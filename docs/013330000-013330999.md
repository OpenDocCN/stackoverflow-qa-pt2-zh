# StackOverflow 问答 13330000-13330999

# c# - 检查 FrameworkElement 是否有 Border

> ID：13330000
> 
> 赞同：2
> 
> 时间：2012-11-11T09:40:11.320
> 
> 标签：c#, .net, wpf, frameworkelement

我在`FrameworkElement`一个类的事件处理程序中得到了一个。是否有可能检查这`FrameworkElement`是否是具有borderthickness/borderbrush 属性的元素？

像

```
var element = myframeworkelement as IHasBorder;
element.borderthickness = new Thickness(1,2,3,4); 
```

这样的事情存在吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T09:56:03.357

属性`BorderThickness`和`BorderBrush`在`Control`类中定义。

因此，您可以尝试将您的`FrameworkElement`to 转换为`Control`，如果可行，请设置属性：

```
public partial class Window1 : Window
{
    public Window1()
    {
        InitializeComponent();

        var pnl = new StackPanel();
        this.Content = pnl;

        var button = new Button();
        button.Content = "Hi";

        pnl.Children.Add(button);

        SetBorder(button);
    }

    public void SetBorder(FrameworkElement fe)
    {
        var borderControl = fe as Control;

        if (borderControl != null)
        {
            borderControl.BorderThickness = new Thickness(10);
            borderControl.BorderBrush = Brushes.Red;
        }
    }
} 
```

# xcode - How to make UIButton in switch case selected and unselected?

> ID：13330005
> 
> 赞同：-1
> 
> 时间：2012-11-11T09:41:29.930
> 
> 标签：xcode, uibutton

Can anyone help with how to make a button unselected after I press another button.

I have 3 buttons and do not know how to make previous button look like unselected in switch case, after touch they change state to selected Yes and change their pics.

```
-(IBAction)pencilPressed:(id)sender{
    UIButton *pressedButton = (UIButton*)sender;
    switch(pressedButton.tag)
    {
    case 0:
          pressedButton.selected=YES;
          red = 255.0/255.255;
          green = 0.0/255.255;
          blue = 0.0/255;
    break;
    case 1:
          pressedButton.selected=YES;
          red = 0.0/255.255;
          green = 0.0/255.255;
          blue = 255.0/255;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T10:21:07.113

切换前：

```
for(UIView *v in sender.superview.subviews) {
    if([v isKindOfClass:[UIButton class]]) {
           [v setSelected:NO];
    }
} 
```

假设所有按钮都彼此相邻:) 否则你需要 IBOutlets 到按钮

# multithreading - Multithreaded application

> ID：13330006
> 
> 赞同：2
> 
> 时间：2012-11-11T09:41:42.073
> 
> 标签：multithreading, qt, qt4

I have an application which runs 2 worker threads separate from the main GUI thread.

## Thread 1:

*   needs to send some data to thread 2 every 100 ms.
*   sleeps for 10ms in each loop of its run.

Header:

```
class thread1:public QThread
{
    Q_OBJECT
public:
    thread1();
    ~thread1();

signals:
    void wakeThread2();
    void sendValue(int);
    void sleepThread2();

protected:
    void run();

private:
    volatile bool stop;
    int data;
}; 
```

Implementation:

```
thread1::thread1():stop(false),data(0)
{

}

void thread1::run()
{
    while(!stop)
    {
        ++data;
        if(data==1000)
            data = 0;
        cout<<"IN THREAD 1 with data = "<<data<<endl;
        emit sendValue(data);
        emit wakeThread2();
        emit sleepThread2();
        msleep(10);

    }
} 
```

## Thread 2

Header:

```
class thread2:public QThread
{
    Q_OBJECT
public:
    thread2();
    ~thread2();

private slots:
    void receiveValue(int);
    void Sleep();

protected:
    void run();

private:
    volatile bool stop;
    int data;
}; 
```

Implementation:

```
thread2::thread2():stop(false),data(0)
{

}

void thread2::run()
{
    if(!stop)
        cout<<"IN THREAD..............2  with data = "<<data<<endl;
}

void thread2::receiveValue(int x)
{
    data = x;
}

void thread2::Sleep()
{
    msleep(100);
} 
```

## MainWindow:

```
MainWindow::MainWindow(QWidget *parent) :
    QMainWindow(parent),
    ui(new Ui::MainWindow)
{
    ui->setupUi(this);

    t1 = new thread1;
    t2 = new thread2;

    QObject::connect(t1,SIGNAL(wakeThread2()),t2,SLOT(start()));
    QObject::connect(t1,SIGNAL(sendValue(int)),t2,SLOT(receiveValue(int)));
    QObject::connect(t1,SIGNAL(sleepThread2()),t2,SLOT(Sleep()));
}

MainWindow::~MainWindow()
{
    delete ui;
}

void MainWindow::on_pushButton_startT1_clicked()
{
    t1->start();
} 
```

## Output:

```
IN THREAD 1 with data = 1
IN THREAD..............2  with data = 1
IN THREAD 1 with data = 2
IN THREAD 1 with data = 3
IN THREAD 1 with data = 4
IN THREAD 1 with data = 5
IN THREAD 1 with data = 6
IN THREAD 1 with data = 7
IN THREAD 1 with data = 8
IN THREAD 1 with data = 9
IN THREAD 1 with data = 10
IN THREAD 1 with data = 11
IN THREAD..............2  with data = 2
IN THREAD 1 with data = 12
IN THREAD 1 with data = 13
IN THREAD 1 with data = 14
IN THREAD 1 with data = 15
IN THREAD 1 with data = 16
IN THREAD 1 with data = 17
IN THREAD 1 with data = 18
IN THREAD 1 with data = 19
IN THREAD 1 with data = 20 
```

* * *

The data in thread 2 is not getting updated with the latest value of thread 1 and the GUI window is totally frozen. Please let me know if there is better/more efficient way to implement multi thread applications with Qt and to communicate between threads.

**EDIT : ACCORDING TO LUCA** the Thread1 remains almost the same...while Thread2.h looks like this

**Thread2.h**

```
#include <QThread>
#include <QTimer>
#include "iostream"

using namespace std;

class Thread2 : public QThread
{
    Q_OBJECT
public:
    Thread2();
    ~Thread2();
    void startThread();
public slots:
    void receiveData(int);
protected:
    void run();
private:
    volatile bool stop;
    int data;
    QTimer *timer;

}; 
```

and Implementation is....**Thread2.cpp**..

```
#include "thread2.h"

Thread2::Thread2():stop(false),data(0)
{
    timer = new QTimer;
    QObject::connect(timer,SIGNAL(timeout()),this,SLOT(start()));
}

Thread2::~Thread2()
{
    delete timer;
}

void Thread2::receiveData(int x)
{
    this->data = x;
}

void Thread2::run()
{
    cout<<"thread 2 .........data  =  "<<data<<endl;
}

void Thread2::startThread()
{
    timer->start(100);
} 
```

and the **mainwindow.cpp** looks like this...

```
MainWindow::MainWindow(QWidget *parent) :
    QMainWindow(parent),
    ui(new Ui::MainWindow)
{
    ui->setupUi(this);

    t1 = new Thread1;
    t2 = new Thread2;

    QObject::connect(t1,SIGNAL(sendData(int)),t2,SLOT(receiveData(int)));
}

MainWindow::~MainWindow()
{
    delete ui;
}

void MainWindow::on_pushButton_start_thread1_clicked()
{
    t1->start();
    t2->startThread();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T10:08:36.683

在我看来，数据实际上已更新。但是线程 1 比线程 2 快 10 倍。当您发出 Sleep 信号时，线程 2 将进入睡眠状态 100ms，这使其无法处理其他信号。一旦控件返回事件循环，这些将被放置在队列中并进行处理。然后您将看到更新数据的消息。

无论如何，规范对我来说很奇怪：我读到“线程 1 需要每 100 毫秒向线程 2 发送数据......”，但我看到你每 10 毫秒执行一次，但后来你说“线程 1 本身休眠 10 毫秒”在其运行的每个循环中”。线程 1 在剩下的时间里应该做什么？

编辑：我不认为这正是你想要的，但我仍然不完全确定我理解你在寻找什么。不是一个完整或好的实现，只是给出一个想法：

```
#include <QCoreApplication>
#include <QTimer>
#include <QThread>

class Thread1 : public QThread
{
   Q_OBJECT
public:
   explicit Thread1() :
      data(0) {
      // Do nothing.
   }

   void run() {
      while (true) {
         data++;
         qDebug("Done some calculation here. Data is now %d.", data);
         emit dataChanged(data);
         usleep(10000);
      }
   }

signals:
   void dataChanged(int data);

private:
   int data;
};

class Thread2 : public QObject
{
   Q_OBJECT
public:
   explicit Thread2() {
      timer = new QTimer;
      connect(timer, SIGNAL(timeout()), this, SLOT(processData()));
      timer->start(100);
   }

   ~Thread2() {
      delete timer;
   }

public slots:
   void dataChanged(int data) {
      this->data = data;
   }

   void processData() {
      qDebug("Processing data = %d.", data);
   }

private:
   QTimer* timer;
   int data;
};

int main(int argc, char *argv[])
{
   QCoreApplication a(argc, argv);

   Thread1 t1;
   Thread2 t2;
   qApp->connect(&t1, SIGNAL(dataChanged(int)), &t2, SLOT(dataChanged(int)));
   t1.start();

   return a.exec();
}

#include "main.moc" 
```

输出是：

```
Done some calculation here. Data is now 1.
Done some calculation here. Data is now 2.
Done some calculation here. Data is now 3.
Done some calculation here. Data is now 4.
Done some calculation here. Data is now 5.
Done some calculation here. Data is now 6.
Done some calculation here. Data is now 7.
Done some calculation here. Data is now 8.
Done some calculation here. Data is now 9.
Done some calculation here. Data is now 10.
Processing data = 10.
Done some calculation here. Data is now 11.
Done some calculation here. Data is now 12.
Done some calculation here. Data is now 13.
Done some calculation here. Data is now 14.
Done some calculation here. Data is now 15.
Done some calculation here. Data is now 16.
Done some calculation here. Data is now 17.
Done some calculation here. Data is now 18.
Done some calculation here. Data is now 19.
Processing data = 19.
Done some calculation here. Data is now 20.
Done some calculation here. Data is now 21.
Done some calculation here. Data is now 22.
Done some calculation here. Data is now 23.
Done some calculation here. Data is now 24.
Done some calculation here. Data is now 25.
Done some calculation here. Data is now 26.
Done some calculation here. Data is now 27.
Done some calculation here. Data is now 28.
Processing data = 28.
... 
```

请注意 Thread2 实际上是应用程序的主线程（即 UI 线程）。如果需要，将对象移动到不同的线程。

# python - Beautiful Soup, Python and the swedish characters ÅÄÖ

> ID：13330007
> 
> 赞同：3
> 
> 时间：2012-11-11T09:42:02.930
> 
> 标签：python, encoding, beautifulsoup

I'm using BeautifulSoup to scrape a Swedish web page. On the web page, the information I want to extract looks like this:

```
"Öhman Företagsobligationsfond" 
```

When I print the information from the Python script it looks like this:

```
"Ã&ndash;hman FÃ¶retagsobligationsfond" 
```

I'm new to Python and I have searched for answers and tried using `# -- coding: utf-8 --` in the beginning of the code but it does not work.

I'm thinking of moving from Sweden to solve this issue.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T10:01:34.590

使用`# -- coding: utf-8 --`时只需指定源代码文档的编码。您正在解析的页面可能声明了错误的编码（或根本没有），因此 Beautiful Soup 失败。尝试在构建汤时指定编码。这是一个小例子：

```
markup = '''
<html>
    <head>
        <title>Övriga fakta</title>
        <meta charset="latin-1" />
    </head>
    <body>
        <h1>Öhman Företagsobligationsfond</h1>
        <p>Detta är en svensk sida.</p>
    </body>
</html>
'''

soup = BeautifulSoup(markup)
print soup.find('h1')

try:
    # Version 4
    soup = BeautifulSoup(markup, from_encoding='utf-8')
except TypeError:
    # Version 3
    soup = BeautifulSoup(markup, fromEncoding='utf-8')

print soup.find('h1') 
```

输出是：

```
<h1>Ãhman FÃ¶retagsobligationsfond</h1>
<h1>Öhman Företagsobligationsfond</h1> 
```

Beautiful Soup 4 中的参数是`from_encoding`，而版本 3 中的参数是`fromEncoding`。

# svn - How do I revert an SVN commit?

> ID：13330011
> 
> 赞同：337
> 
> 时间：2012-11-11T09:42:38.973
> 
> 标签：svn, revert

I have found various examples of how to revert an SVN commit like

```
svn merge -r [current_version]:[previous_version] [repository_url] 
```

or

```
svn merge -c -[R] . 
```

But neither of them seems to work. I tried those commands and checked the files that were changed by hand.

How do I revert a commit with revision number 1944? How do I check that the revert has been done (without looking in the actual file to the changes have been reverted)?

* * *

## 回答 #1

> 赞同：476
> 
> 时间：2012-11-11T11:12:48.290

这两个例子都必须有效，但是

`svn merge -r UPREV:LOWREV .`撤消范围

`svn merge -c -REV .`撤消单个修订

在这种语法中 - 如果当前目录是 WC 并且（如每次合并后必须完成的那样），您将提交结果

你想看日志吗？

* * *

## 回答 #2

> 赞同：138
> 
> 时间：2013-09-24T05:16:55.557

如果您使用[TortoiseSVN客户端，可以](http://en.wikipedia.org/wiki/TortoiseSVN)[通过 Show Log 对话框](http://tortoisesvn.net/docs/release/TortoiseSVN_en/tsvn-howto-rollback.html)轻松完成。

* * *

## 回答 #3

> 赞同：71
> 
> 时间：2012-11-11T09:53:39.287

`svn merge -r 1944:1943 .`应该恢复工作副本中 r1944 的更改。然后，您可以查看工作副本中的更改（使用差异），但您需要提交才能将恢复应用到存储库中。

* * *

## 回答 #4

> 赞同：51
> 
> 时间：2015-04-21T02:25:21.817

首先，将工作副本恢复到 1943 年。

```
> svn merge -c -1943 . 
```

其次，检查将要提交的内容。

```
> svn status 
```

第三，提交版本 1945。

```
> svn commit -m "Fix bad commit." 
```

四、看新日志。

```
> svn log -l 4

------------------------------------------------------------------------
1945 | myname | 2015-04-20 19:20:51 -0700 (Mon, 20 Apr 2015) | 1 line

Fix bad commit.
------------------------------------------------------------------------
1944 | myname | 2015-04-20 19:09:58 -0700 (Mon, 20 Apr 2015) | 1 line

This is the bad commit that I made.
------------------------------------------------------------------------
1943 | myname | 2015-04-20 18:36:45 -0700 (Mon, 20 Apr 2015) | 1 line

This was a good commit.
------------------------------------------------------------------------ 
```

* * *

## 回答 #5

> 赞同：26
> 
> 时间：2012-11-11T10:00:57.193

不可能“取消提交”修订，但您可以将工作副本恢复到版本 1943 并将其提交为版本 1945。版本 1943 和 1945 将相同，有效地还原更改。

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2014-03-26T03:49:46.440

正如它所说，以下将进行试运行。HEAD 是当前版本，PREV 是以前的版本，然后是文件的路径或提交的项目：

```
svn merge --dry-run -rHEAD:PREV https://example.com/svn/myproject/trunk 
```

如果试运行看起来不错，请运行不带 --dry-run 的命令

验证修订中的更改并重新提交。要浏览版本号，请尝试：

```
svn log 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2013-10-01T12:18:42.997

```
F=code.c
REV=123
svn diff -c $REV $F | patch -R -p0 \
    && svn commit -m "undid rev $REV" $F 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2014-11-04T22:27:52.227

虽然给出的建议可能对某些人有用，但它不适用于我的情况。执行合并时`rev 1443`，更新到的用户`rev 1445`仍会同步所有更改的文件，`1444`即使它们`1443`与合并中的相同。我需要最终用户根本看不到更新。

如果您想完全隐藏提交，可以通过在正确的修订版处创建一个新分支然后交换分支来实现。唯一的事情是您需要删除并重新添加所有锁。

```
copy -r 1443 file:///<your_branch> file:///<your_branch_at_correct_rev>
svn move file:///<your_branch> file:///<backup_branch>
svn move file:///<your_branch_at_correct_rev> file:///<your_branch> 
```

这对我有用，也许它会对那里的其他人有所帮助=）

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2013-06-26T10:26:59.193

亚历克斯，试试这个：`svn merge [WorkingFolderPath] -r 1944:1943`

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2016-09-08T13:47:46.577

```
svn merge -c -M PATH 
```

这救了我的命。

我遇到了同样的问题，在恢复后我也没有看到旧代码。运行上述命令后，我得到了一个干净的旧版本代码。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2014-09-05T15:30:02.460

我尝试了上述方法，（`svn merge`），你是对的，它确实是千斤顶。然而

```
svn update -r <revision> <target> [-R] 
```

似乎有效，但不是永久性的（我的 svn 只是显示旧版本）。所以我不得不

```
mv <target> <target backup>
svn update <target>
mv <target backup> <target>
svn commit -m "Reverted commit on <target>" <target> 
```

在我的特殊情况下，我的目标是`interfaces/AngelInterface.php`. 我对文件进行了更改，提交了它们，更新了运行 phpdoc 编译器的构建计算机，发现我的更改是浪费时间。 `svn log interfaces/AngelInterface.php`将我的更改显示为 r22060，并且该文件的先前提交是 r22059。所以我可以`svn update -r 22059 interfaces/AngelInterface.php`，我最终得到了 -r22059 中的代码。然后 ：-

```
mv interfaces/AngelInterface.php interfaces/AngelInterface.php~
svn update interfaces/AngelInterface.php
mv interfaces/AngelInterface.php~ interfaces/AngelInterface.php
svn commit -m "reverted -r22060" interfaces/AngelInterface.php 
```

或者，我可以在目录上做同样的事情，通过指定`. -R`代替`interfaces/AngelInterface.php`上述所有内容。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2017-03-15T22:48:08.497

如果您想从历史记录中完全删除提交，您还可以在特定修订版处转储 repo，然后导入该转储。具体来说：

```
svnrdump dump -r 1:<rev> <url> > filename.dump 
```

svnrdump 命令执行与 svnadmin dump 相同的功能，但适用于远程存储库。

接下来只需将转储文件导入您选择的存储库。经测试，这在 Beanstalk 上运行良好。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-01-27T11:04:19.657

非常旧的线程，但是 Intellij 没有答案。要恢复单个提交：

转到：Subversion -> 集成目录...

[![集成目录视图](../Images/17203b2a588cca80611db0c6f9f2f6d1.png)](https://i.stack.imgur.com/y89Lh.png)

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-06-28T10:52:53.037

请注意，该`svn merge`命令会恢复一个提交，即让另一个提交撤消您的更改，但将您的错误提交保留在历史记录中。

如果您是 Subversion 系统管理员（具有命令行访问权限）并且您必须恢复一个**非常大的错误**（例如，某人犯了在世界上无缘无故犯下的事情），并且如果您想尝试不惜一切代价完全放弃提交，即使有破坏回购的风险：

## 步骤 1\. 在您的服务器上识别您的存储库

首先在您的服务器文件系统上识别您的存储库。

假设路径名是`/repo`. 但它可能是`/home/svn/myrepo`或类似的东西。

文件系统结构应该是这样的：

```
$ ls -la /repo
total 16
drwxr-xr-x.   6 svn svn   86 10 feb  2020 .
drwxrwx---. 145 svn svn 4096 22 giu 16.14 ..
drwxr-xr-x.   2 svn svn   54 10 feb  2020 conf
drwxr-sr-x.   6 svn svn  253 17 giu 11.25 db
-r--r--r--.   1 svn svn    2 10 feb  2020 format
drwxr-xr-x.   3 svn svn 4096 10 feb  2020 hooks
drwxr-xr-x.   2 svn svn   41 10 feb  2020 locks
-rw-r--r--.   1 svn svn  229 10 feb  2020 README.txt 
```

我们还假设您的用户`svn`像上面的示例一样被调用。

**注意**：如果你不知道这是在说什么，你可能没有自己的 Subversion 服务器，这个答案可能对你的情况没有用。请尝试其他答案（您只需要拥有服务器的 URL，无需物理访问）。

## 第 2 步。导出您的良好历史记录

让我们假设您的错误版本是`100`并且您的正确版本是`99`：

```
svnadmin dump -r 1:99 /repo > export.dump 
```

## 步骤 3\. 备份并重新初始化您的存储库

创建存储库的备份并再次对其进行初始化：

```
mv              /repo /repo.bak
mkdir           /repo
svnadmin create /repo 
```

## 步骤 4\. 再次导入您的良好历史记录

```
svnadmin load /repo < export.dump 
```

现在，确保使用正确的用户修复您的权限：

```
chown -R svn:svn /repo 
```

一切正常吗？**就这样！对你有益！**

**但是**在这一点上，您很有可能已经破坏了整个存储库。例如，您可能不再能够结帐，或者您的 Subversion Web 应用程序（Phabricator？）可能会发出奇怪的错误消息，或者您可能在此过程中误杀了一千只小猫。

**如果出现问题**，请为灾难恢复做好准备：

## 灾难恢复

如果发生灾难：

```
mv /repo     /repo.fail
mv /repo.bak /repo 
```

* * *

希望有用。

# scheme - scheme call/cc for handling errors

> ID：13330013
> 
> 赞同：1
> 
> 时间：2012-11-11T09:42:57.353
> 
> 标签：scheme, r5rs

I have a Scheme application that accepts some user input, computes, and gives some output. I would like to make it more robust by enabling some kind of error handling and a way to exit smoothly. Call with current continuation seems to be the thing to fill this gap here, but I'm not quite sure how to go about implementing it.

As of now, if the user enters some non-valid input, the program will crash and exit. I would simply like to keep the user in the application and give an error message instead. Here is an outline of my method, but I'm not sure where to implement it so that if an error occurs that would normally crash the system, just gives an error and keeps them in the program.

```
 (define (handle_err)
    (call/cc
     (lambda (a)
    (display "exception handled: a")))) 
```

I would also like a clean exit from the program. That is, not a crash exit, nor a break. I would like the user to type "leave", have the program close and return to the interpreter. My outline looks much like the above, but it doesn't have the user leave the program, it just takes him back to the input prompt.

Any ideas are appreciated.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T23:51:34.477

Yes, call/cc can handle this kind of transfer of control. One problem here is that the call/cc corresponds to the "try/catch" in this example, not to the "throw".

A bigger problem, though, is that you don't have any nice way in r5rs to get control when an error occurs.

This is really just a symptom of an even bigger problem, which is that various different Scheme implementations have solved this problem in different ways.

Personally, I would strongly urge you to take a look at Racket; it's supported on many versions of Linux, lives in many standard distros, and handles this really nicely:

```
#lang racket

(with-handlers ([exn:fail?
                 (lambda (exn)
                   (display "oh noes! An exception occurred!"))])
  (try-something-dangerous))

(define (try-something-dangerous)
  (/ 1 0)) 
```

Actually, I would recommend Racket even if you want to write r5rs programs; you can just begin your programs with

```
#lang r5rs 
```

... to get full r5rs compliance.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T13:11:08.837

好吧，你看看这个方法

```
(define-syntax try
  (syntax-rules ()
        ((_ handler throw chunk)
         (call/cc (lambda (catch)
                (let ((throw (lambda (exc) (catch (handler exc)))))
                  chunk))))))
(define (div p q)
  (try 
    ;; Error processing
    (lambda (error) (printf "Error: ~s~n" error) error)

    ;; Error my be thrown with keyword "throw"
    throw

    ;;Actual code to run
     (if (= q 0)
    ;; Oh noes, error!
        (throw "Division by zero")
    ;; All ok, do the work
     (/ p q))))

(printf "1/0: ~s~n" (div 1 0))
(printf "1/2: ~s~n" (div 1 2)) 
```

“throw”用于捕获 throw 函数的名称（出于卫生考虑，这是需要的）。

# mysql - 使用jsp向MySQL表中插入一行

> ID：13330014
> 
> 赞同：2
> 
> 时间：2012-11-11T09:42:58.833
> 
> 标签：mysql, sql, jsp, jdbc, insert

我想用 jsp 代码向 mysql 数据库中插入行，但我不能。这是我没有 html 表单的 jsp 代码：

```
<%
String login = request.getParameter("login");
String password = request.getParameter("password");
String full_name = request.getParameter("full_name");
String ulevel = request.getParameter("ulevel");
String team_id = request.getParameter("team_id");

Connection connection = null;
PreparedStatement pstatement = null;
Class.forName("com.mysql.jdbc.Driver").newInstance();
int updateQuery = 0;
if(login!=null && password!=null && full_name!=null && ulevel!=null && team_id!=null){
if(login!="" && password!="" && full_name!="" && ulevel!="" && team_id!="") {
    try {
connection = DriverManager.getConnection("jdbc:mysql://localhost:3306/android","root","root");
String queryString = "INSERT INTO users(user_id,login,password,full_name,ulevel,team_id) VALUES (null, ?, ?, ?, ?, ?)";
pstatement = connection.prepareStatement(queryString);
pstatement.setString(2, login);
pstatement.setString(3, password);
pstatement.setString(4, full_name);
pstatement.setString(5, ulevel);
pstatement.setString(6, team_id);
updateQuery = pstatement.executeUpdate();
if (updateQuery != 0) { %> 
```

当我按 SUBMIT 时，网页会显示：

> 类型状态报告消息描述请求的资源（）不可用。

**ps:** mysql 表中的列`user_id`设置为，所以我使用.`autoincrement``null`

但我不知道，这是正确的方法......

我从 netbeans 7.0.1 运行代码

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T09:45:10.740

因为`ID`是*自动递增*的，所以从列表中删除它，preparedstatement 正在寻找`1`其参数的索引。

```
String queryString = "INSERT INTO users(login,password,full_name,ulevel,team_id) VALUES (?, ?, ?, ?, ?)";
pstatement = connection.prepareStatement(queryString);
pstatement.setString(1, login);
pstatement.setString(2, password);
pstatement.setString(3, full_name);
pstatement.setString(4, ulevel);
pstatement.setString(5, team_id); 
```

下面这个*未经测试*

只需从参数开始，`1`因为只有 5 个参数需要定义。

```
String queryString = "INSERT INTO users(user_id,login,password,full_name,ulevel,team_id) VALUES (null, ?, ?, ?, ?, ?)";
pstatement = connection.prepareStatement(queryString);
pstatement.setString(1, login);
pstatement.setString(2, password);
pstatement.setString(3, full_name);
pstatement.setString(4, ulevel);
pstatement.setString(5, team_id); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T21:08:09.590

我发现了问题。错误是 html 形式的，在属性`action`处，我有一个源文件，这是我以前从未有过的。：/

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-05T10:11:18.553

```
String queryString = "INSERT INTO users(user_id,login,password,full_name,ulevel,team_id) VALUES (?, ?, ?, ?, ?)"; 
```

你不应该使用任何东西，甚至`null`查询！

# android - Pause android DownloadManager

> ID：13330015
> 
> 赞同：6
> 
> 时间：2012-11-11T09:43:08.913
> 
> 标签：android, android-download-manager

In my application I'm downloading movies from the server. Some of them are very big (4gb or more). I tried to implement my own download manager as a service and it was not quit good. On some devices the app just crashes into itself without any notice, and overall the download seems to be too slowly.

So, I wanted to use Android's default DownloadManager, but my only problem is that I can't pause/resume it.

Is there a way to implement that?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-23T04:23:29.317

从我通过查看源代码可以看出，这是不支持的（尽管它`DownloadManager`会在自身发生故障后和系统重新启动后自动重试等）。

如果您还没有看到[这个](https://stackoverflow.com/questions/11297298/downloadmanager-with-manually-pause-and-resume)或[这个](https://stackoverflow.com/questions/6237079/resume-http-file-download-in-java)，看起来那里有一些有用的信息，说明如何使用这些功能自己实现自己的服务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-12T08:58:55.437

我发现了另一个非常令人印象深刻的图书馆

[https://github.com/Trinea/android-common](https://github.com/Trinea/android-common)

![例子](../Images/e73c083ad47bfd93cc31973dff47cfee.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-04-16T10:02:44.223

您可以通过将 Downloads.Impl.COLUMN_CONTROL 设置为 Downloads.Impl.CONTROL_PAUSED 来暂停。

并通过设置 Downloads.Impl.COLUMN_CONTROL、Downloads.Impl.CONTROL_RUN 来恢复

```
 public void pauseOrResumeDownload(boolean pause, long... ids) {
    ContentValues values = new ContentValues();
    if (pause) {
        values.put(Downloads.Impl.COLUMN_CONTROL, Downloads.Impl.CONTROL_PAUSED);
    } else {
        values.put(Downloads.Impl.COLUMN_STATUS, Downloads.Impl.STATUS_PENDING);
        values.put(Downloads.Impl.COLUMN_CONTROL, Downloads.Impl.CONTROL_RUN);
    }
    mResolver.update(mBaseUri, values, getWhereClauseForIds(ids), getWhereArgsForIds(ids));
} 
```

# c# - C# 简单计算

> ID：13330021
> 
> 赞同：0
> 
> 时间：2012-11-11T09:44:03.563
> 
> 标签：c#, addition

嗨，我正在制作一个简单的 c# 计算示例 Label1.Text = textBox1.Text + textbox2.Text 当我尝试输入 88.5 或 80.3 并计算出我的程序不断崩溃时出现问题。我已经转换了文本到 Int，这是我的代码：

```
 int i;
 i = Convert.ToInt32(textBox1.Text) + Convert.ToInt32(textBox2.Text);
 Label1.Text= i.ToString(); 
```

但如果我插入 88 和 80 ，它就可以工作。我知道我错过了这个。任何人都可以帮助我吗？谢谢你

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-11T09:44:36.997

您正在尝试将 "88.5" 转换为*integer*。这不是整数，是吗？

我建议您`decimal`改用 - 并使用`TryParse`这样您就可以处理无效的用户输入而不诉诸异常。

```
decimal input1, input2;
if (decimal.TryParse(textBox1.Text, out input1) &&
    decimal.TryParse(textBox1.Text, out input2))
{
    Label1.Text = (input1 + input2).ToString();
}
else
{
    Label1.Text = "Invalid input";
} 
```

# c# - How do I sort an array from smallest to biggest?

> ID：13330025
> 
> 赞同：0
> 
> 时间：2012-11-11T09:44:34.950
> 
> 标签：c#

I have stored my ArrayList into a multidimensional array to be displayed on the richtextbox. How do I sort an ArrayList/multidimensional array from the smallest value to the biggest and be displayed on rtbx?

The variables are initialized as:

```
public static ArrayList dataList = new ArrayList();
public static float[,] finalData = new float[superX.var, 8]; 
```

superX.var is int 72.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T10:10:09.650

如果可能，您应该使用 List 对象（在 System.Collections.Generic 命名空间中） ，而不是**弃用的 ArrayList 。**List 对象具有排序方法，您可以在其中使用 Lambda 表达式指定排序，也可以使用 LINQ（因为它实现了 IEnumerable）

使用 Lambda 表达式按降序排序：

```
var dataListSorted = dataList.OrderByDescending(x => x.PropertyName); 
```

# python - 多线程和子进程没有在 python 中产生正确数量的线程

> ID：13330028
> 
> 赞同：0
> 
> 时间：2012-11-11T09:44:52.827
> 
> 标签：python, curl, python-2.7

我正在创建一个小型 python 脚本来创建 n 个线程，并且每个线程`curl`在我的 Web 应用程序上调用 m 次。

调用脚本 ./multithreadedCurl.py 10 100

我希望 curl 执行 10*100 = 1000 次。但是我看到它正在创建 n 个线程，但每个线程只调用一次 curl。
这是因为正在使用子流程吗？

Python 版本 Python 2.7.2 操作系统：Mac OSX 10.8.2 (Mountain Lion)

非常感谢任何帮助，我对 python 很陌生，这是我 Python 开发的第二天。

`#!/usr/bin/python`

```
import threading
import time
import subprocess
import sys
import math

# Define a function for the thread
def run_command():
        count  = 0
        while (count < int(sys.argv[2])):
                subprocess.call(["curl", "http://127.0.0.1:8080"])
                count += 1

threadCount = 0
print sys.argv[0]
threadLimit = int(sys.argv[1])
while threadCount < threadLimit:
        t=threading.Thread(target=run_command)
        t.daemon = True  # set thread to daemon ('ok' won't be printed in this case)
        t.start()
        threadCount += 1` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T10:15:49.823

通过设置`t.daemon = True`你说

[http://docs.python.org/2/library/threading.html](http://docs.python.org/2/library/threading.html) 可以将线程标记为“守护线程”。这个标志的意义在于，当只剩下守护线程时，整个 Python 程序就退出了。初始值继承自创建线程。可以通过 daemon 属性设置标志。

因此，您应该使用`t.daemon = False`或等待所有线程完成`join`.

```
threads = []
while len(threads) < threadLimit:
    t=threading.Thread(target=run_command)
    threads.append(t)
    t.daemon = True
    t.start()
[thread.join() for thread in threads] 
```

# php - PHP coding style and conventions: Using require to load page elements

> ID：13330031
> 
> 赞同：0
> 
> 时间：2012-11-11T09:45:24.370
> 
> 标签：php, coding-style, conventions

I have recently begun building webpages using PHP, and being inexperienced, I have a question about coding conventions. Is it considered bad style to use require to dynamically load page content or page elements in a web page?

For example, if you are modularizing your code, and have a /resources/pageContent/ folder with different files containing the content of different pages. Would it be considered bad style to say `require ("resources/pageContent/profile.php")`? Another way I've seen this done is using `fopen()`, but of course, it won't allow you do use any PHP code in your dynamically loaded pages and will only print the HTML and CSS.

I am just trying to put things into modules, since putting things in functions (For example, loadPageProfile) can get really messy-looking.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T11:00:10.017

首先，如果您想编写干净且可维护的代码，请不要使用错误抑制器`@` 聆听所有错误 - 大小错误。这将对您有很大帮助。真的。

```
error_reporting(E_ALL); 
```

完成后，只需更改

```
error_reporting(0); 
```

> 我只是想把东西放到模块中，因为把东西放到函数中（例如，loadPageProfile）看起来真的很乱。

好吧，那么您就走上了正确的道路...您所要做的就是创建一个名为的模块，例如`Page`. （我们现在正在谈论页面）

使用过程代码来创建模块是不好的做法，因为我们正在讨论它们。

只需将所有逻辑封装到一个类中，如下所示：

文件`Page.php`

```
abstract class Page {

   /**
    * Includes chunk of the page
    * it's Useful, when you have number of pages
    * and want for example only one chunk to be displayed
    * everywhere
    * This could be footer or menu or something like this "static" parts
    * 
    * @param string $block
    * @return void
    */
   public static function useBlock($block)
   {  
      $file = 'path_to_blocks' . DIRECTORY_SEPARATOR . $block; 

      //Ensure this is valid stream before we include it;
      if ( is_file($file) ){
         // No need to use require() here
         // Because we are sure that file exists and valid for inclusion
         // include is a bit faster that require()
         include($file);
      }
   }

   /**
    * Displays some page
    * This is just simply form of require, but
    * this method would simplify inclusion 
    * 
    * @param string $page
    * @return void
    */
   public static function DisplayPage($page)
   {
     $file = 'path_to_your_pages' . DIRECTORY_SEPARATOR . $page;

     if ( is_file($file) ){
        include($file); 
     }
   }

} 
```

现在假设你有 pages: `contact`, `index`, `profile`, `login`,`register`所以不用`require()`到处使用你只需调用那个“舒适”的方法。

同时，页脚和菜单可能与此类似：

文件：footer.phtml

```
<div id="footer">Copyrigth (c) you and bla bla bla</div> 
```

文件：menu.phtml

```
<li><a href="/">Home</li>
<li><a href="/register/">Register</a></li>
<li><a href="/contact/">Contact</li> 
```

要要求特定的类，您可以创建一些`module`，比如这个：

```
class Import {

   /**
    * 
    * @param string $class Class File name to be required
    * @param string $ext filename extension (just to simplify )
    * @return bool
    */
   public static function getSomeClass($class, $ext = '.php'){

      $location = 'folder_of_classes' . DIRECTORY_SEPARATOR . $class . $ext;
      return spl_autoload_register(function() use ($location){
         // We won't use include() here
         // Because we'd to stop (producing fatal error) if inclusion would fail
         require_once ($location);
      });
   }

} 
```

然后，当您需要特定课程时，只需致电

```
<?php
// requires MySQL_PDO.php located in defined foldet
Import::getSomeClass('MySQL_PDO'); 
```

请记住，当我们谈论模块时，在 99% 的情况下，我们谈论的是在这个模块中实现的类。

另一个建议是：

1) 不要将 CSS 与 HTML 混合（创建单独的 css 文件并将其包含在特定页面上，通过`<link href="path_to_css.css" rel="stylesheet" type="text/css" />`

因为它使标记清晰且易于将来维护（例如，当您想更改样式或添加某些内容时）

2) 不要混用 PHP 和 JavaScript 代码。将 JavaScript 文件和 CSS 保存在单独的文件中。使用 Ajax 在 PHP 和 JavaScript 之间共享变量

3) 不要将它们全部混合 HTML、CSS、JavaScript 和 PHP。尤其是 HTML。将其`modules`（类或业务逻辑）保存在单独的文件中。然后只包括特定任务所需的部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T09:48:22.450

不，这不是糟糕的风格，它实际上是一种很好的做法。继续使用它。

# ios - 从另一个视图 iphone sdk 隐藏视图上的按钮

> ID：13330032
> 
> 赞同：0
> 
> 时间：2012-11-11T09:45:25.820
> 
> 标签：ios, iphone, xcode, sdk, hide

我有 2 个视图，第一个名为“InterfaceController”，第二个名为“LoginController”。在 LoginController 上，我有一个按钮“Connexion”，当我点击这个按钮时，我希望隐藏我称为“TEST”的按钮。

所以我尝试了：Interfacecontroller.h：

```
@interface InterfaceController : UIViewController {
- (IBAction)TEST:(id)sender;
- (IBAction)LoginSwitch:(id)sender;
} 
```

登录控制器.h：

```
@interface LoginController : UIViewController {
}
- (IBAction)Connexion:(id)sender;
@end 
```

登录控制器.m：

```
#import "InterfaceController.h"
#import "LoginController.h"
@implementation LoginViewController

- (IBAction)Connexion:(id)sender {
        [self dismissModalViewControllerAnimated:YES]; 
        InterfaceController.TEST.hidden = YES; (this is what I want to set)
} 
```

…………

我真的不知道该怎么做，但我认为这很容易。有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T09:58:05.873

您必须在 interfaceController.h 中添加一个测试按钮的出口：

```
@property (nonatomic,strong) IBOutlet UIButton *TEST; 
```

之后在 Interface Builder 中，您必须将此 Outlet 链接到 Test Button。

此时您的代码有效

# c# - 通过电子邮件恢复/重置丢失的密码选项

> ID：13330033
> 
> 赞同：6
> 
> 时间：2012-11-11T09:45:32.013
> 
> 标签：c#, asp.net-mvc, asp.net-membership

我正在开发一个使用 DefaultMembershipProvider 的 C# ASP.MVC 4 项目，并且我试图想出一种用户友好的方式来恢复/重置丢失的密码。

我的第一次尝试是让用户提供他们的用户名（这是一个有效的电子邮件地址），然后应用程序会生成一个随机密码（满足我们的要求），然后将该密码通过电子邮件发送给用户。

我理想的解决方案是当用户单击忘记密码按钮时。他们被要求提供他们的用户名，当提供该用户名时，将发送一封带有 URL 的电子邮件（该 URL 也将附有到期日期）。此解决方案还重置应用程序内部的用户密码（在发送电子邮件之前）。当用户单击 URL 时，他们会自动登录并发送到更改密码表单。这个解决方案有问题吗？

对于配置，我设置了以下值：

```
<membership defaultProvider="DefaultMembershipProvider">
  <providers>
    <clear />
    <add name="DefaultMembershipProvider" type="System.Web.Providers.DefaultMembershipProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="DefaultConnection" 
         enablePasswordRetrieval="false" 
         enablePasswordReset="true" 
         requiresQuestionAndAnswer="false" 
         requiresUniqueEmail="false" 
         maxInvalidPasswordAttempts="5" 
         minRequiredPasswordLength="6" 
         minRequiredNonalphanumericCharacters="0" 
         passwordAttemptWindow="10" 
         applicationName="/" />
  </providers>
</membership> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-11T10:15:08.990

首先，这里有两个必须阅读的内容[我重复一遍，必须阅读]：

1.  [您想知道的有关构建安全密码重置功能的所有信息](http://www.troyhunt.com/2012/05/everything-you-ever-wanted-to-know.html)
2.  [您可能错误地存储了密码](http://www.codinghorror.com/blog/2007/09/youre-probably-storing-passwords-incorrectly.html)

话虽如此，OWASP 有一些关于如何实施身份验证的指南，您可以从他们的[身份验证备忘单](https://www.owasp.org/index.php/Authentication_Cheat_Sheet)开始，对于您的特定情况，您可以使用[忘记密码备忘单](https://www.owasp.org/index.php/Forgot_Password_Cheat_Sheet)。这也可以说是必读的。如果您不打算关注 OWASP，我希望这是因为您决定这样做，而不是因为您不了解更多信息。

无论如何，最好的摘要是下面的图像（取自上面的第一个链接），如果你只想记住一件事，那就这样吧：

![密码重置工作流程](../Images/3f05016b556388aeb9b24435b1a369e6.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T10:01:48.520

您的方法存在缺陷-您写道，发送电子邮件会重置用户密码。假设滥用者知道登录名，这将很容易被任何人滥用来为您的任何用户重置密码。换句话说，我只是坐在您的系统前，通过单击“我不记得我的密码”并提供他们的用户名来阻止其他用户的帐户。

因此，您无需重置任何内容。该方法将为解锁请求创建一个存储（可以是数据库中的一个表），其中每个请求都由一个 guid 标识，并具有一个到期日期、用户名和一个标志，以标记是否使用了请求。当您发送电子邮件时，您会在此请求存储中创建一条记录，并且电子邮件包含带有 guid 的链接（请注意，解锁电子邮件中不需要其他信息）。

然后，当有人单击其电子邮件中的链接时，在服务器端，您将获得请求的 guid。从您的请求存储中，您可以读取过期日期、用户名和信息（如果之前使用过该链接）。然后您提供一个表单，用户在其中提供他的新密码。

与您的方法相比，这具有不干扰现有密码的优点。此外，在服务器端隐藏所有信息并仅向用户公开 guid 具有不向客户端公开潜在敏感信息（如链接到期日期）的优点。

# ios - iOS位置显着改变精度和距离

> ID：13330036
> 
> 赞同：10
> 
> 时间：2012-11-11T09:46:19.437
> 
> 标签：ios, location

我想知道低功耗显着变化定位服务的精度和距离过滤器（即如果我使用startMonitoringSignificantLocationChanges，它的准确度是多少，显着变化的距离是多少）？

我需要一些来自实时应用的实验性（非纪录片）信息

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-11-11T13:40:06.573

去年，我有机会在 WWDC 上与 Apple 定位工程师交谈，这就是我向我解释的方式。

显着位置变化是所有位置监控类型中最不准确的。它仅在蜂窝塔转换或更改时才获得更新。这可能意味着基于用户所在位置的不同级别的准确性和更新。市区，更多更新，更多塔楼。出城，州际，更少的塔和变化。

这也是最难测试的位置类型，因为您也不能使用模拟器。我不确定他们是否已修复它以使用 6.0 的 GPX 文件，但重要的位置更改 api 在 iOS 6 之前的模拟器中根本不起作用。

由于许多这些原因，我试图避免使用表示位置更改。有时无能为力。我最终使用了区域监控 API，因为它们更加准确，并且在电池寿命方面也同样出色。希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T09:51:46.760

从[苹果文档](https://developer.apple.com/library/mac/#documentation/CoreLocation/Reference/CLLocationManager_Class/CLLocationManager/CLLocationManager.html)：

> 此界面仅在检测到设备相关蜂窝塔发生变化时才提供新事件，从而降低更新频率并显着降低功耗。

似乎没有关于确切精度的更具体信息，所以我假设您的精度大致相当于 iOS 设备当前所在区域内的蜂窝塔之间的大致距离（[在更多人口稠密的地区](http://en.wikipedia.org/wiki/Cell_site#Range)）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T06:37:10.787

那时我必须构建一个使用手机信号塔重大位置变化的应用程序。

简短的回答：非常不准确。

我显然跨越了我所在地区的界限。

根据我们在应用程序中观察到的情况，它可能在几百米到几公里之外。我们的测试是在市区，郊区的手机信号塔与火车轨道和其他郊区手机信号塔平行。

相当粗糙。

大部分时间都是一致的。我注意到每次我要进入通往地下火车站的隧道时，它都会触发我为 CBD 市区设置的 3 个区域穿越通知。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-17T13:59:58.993

我使用的是 Xcode 4.6.2，你确实可以在这个模拟器上模拟显着的位置变化。在 iOS 模拟器中，您需要的菜单项是 Debug->Location->Freeway Drive。警告（我欢迎被告知我错了）： 1\. 过了很长一段时间，似乎没有更重要的位置更改事件。2\. 您只能在一般库比蒂诺/SF 区域内驾驶预先定义的路线。如果您只关心重大的位置变化，那很好。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-05T09:34:18.587

请注意，虽然您可以访问从重大位置更新中获得的位置的速度属性，但它没有用！模拟器实际上给出了速度，但在真实设备中速度不可用，因为从手机信号塔获得的位置不包括实际速度（与 GPS 不同）。更如之前所说，位置本身非常不准确，可能会偏离几公里。请注意这一点。获得速度的唯一方法是进行两次配置并手动计算速度

# ruby-on-rails - 填充回复模型的 user_id 属性（不是 attr_accesible 的属性）

> ID：13330040
> 
> 赞同：1
> 
> 时间：2012-11-11T09:46:34.057
> 
> 标签：ruby-on-rails

我有三个模型：`User`,`Post`和, `Reply`。An`user`有很多`posts`和`comments`。一个帖子有很多`replies`，属于一个`user`，一个`reply`属于一个`post`和一个`user`。

**路线.rb：**

```
resources :posts do
  resources :replies
end 
```

**架构.rb：**

```
 create_table "posts", :force => true do |t|
    t.text     "content",    :limit => 255
    t.integer  "user_id"
    t.datetime "created_at",                :null => false
    t.datetime "updated_at",                :null => false
    t.string   "title"
  end

  create_table "replies", :force => true do |t|
    t.text     "content"
    t.integer  "post_id"
    t.integer  "user_id"
    t.datetime "created_at", :null => false
    t.datetime "updated_at", :null => false
  end 
```

这就是我创建评论的方式：

**评论控制器.rb：**

```
 def create
    @post = Post.find(params[:post_id])
    @reply = @post.replies.build(params[:reply])
    if @reply.save!
      flash[:success] = "reply created!"
      redirect_to post_path(@post)
    else
      redirect_to post_path(@post)
    end
  end 
```

**回复/_form.html.erb：**

```
<%= form_for([@post, @post.replies.build]) do |f| %>
  <%= render 'shared/error_messages', object: f.object %>
  <div class="field">
    <%= f.text_area :content, placeholder: "Enter reply content" %>
  </div>
  <%= f.submit "Reply", class: "btn btn-large btn-primary" %>
<% end %> 
```

提交表单后，我收到此错误：

```
Validation failed: User can't be blank 
```

我假设它是因为回复的属性`user_id`为空：

**回复.rb**

```
validates :user_id, presence: true 
```

我不确定如何填写该属性。我不能把它放进去`Reply` `attr_accesible`，因为这会损害应用程序的安全性（据我所知）。

有什么建议可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T10:06:15.563

`attr_acessible`仅当您从属性哈希更新/创建记录时才会影响事物。您始终可以通过直接调用访问器来设置属性，因此在构建回复后，

```
@reply.user = current_user 
```

应该做到这一点（假设您使用的是为您定义的 devise 或 authlogic 之类的东西`current_user`。您也可以`@reply.user_id`直接分配给。

# git - 未列出 Git 远程分支

> ID：13330043
> 
> 赞同：5
> 
> 时间：2012-11-11T09:46:45.807
> 
> 标签：git, github, repository

所以我正在尝试创建一个远程分支，以便我可以将更新推送到我正在执行的项目到我的 Github 帐户，但无论出于何种原因，我的远程分支都没有被创建。

这些是我正在运行的命令：

```
git remote add origin git@github.com:<username>/first_app.git
git push origin master 
```

运行第一行后，一切似乎都正常，我没有收到任何错误消息。但是，当我检查我有哪些远程分支时，什么都不会显示。我为此运行的命令是：

```
git branch -r 
```

忽略我认为我至少会尝试上面的第二个命令。当我这样做时，它自然会说：

```
ERROR: Repository not found 
```

如果有人可以帮助我解决这个问题，将不胜感激。我一直试图在网上找到这方面的信息，但还没有遇到任何问题。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-11T10:06:59.427

添加远程之后，git 还没有关于远程分支的任何知识。事实上，远程 URL 很可能是无效的。

`git fetch`命令旨在执行以下操作：

1.  尝试与远程通信并获取该远程上的分支列表。此信息的快照存储在本地，`.git/refs/remotes/remotename`直到下一个才会更新`git fetch`。
2.  获取该远程和选定分支（或所有跟踪分支）的所有新 git 对象。

换句话说，做`git fetch`对你来说几乎是强制性的。

顺便说一句，`git pull`= `git fetch`+ `git merge`，这样做`git pull`也会完成你想要的。

# c - 使用堆栈粉碎跳过指令

> ID：13330049
> 
> 赞同：5
> 
> 时间：2012-11-11T09:48:16.083
> 
> 标签：c, stack, buffer-overflow, stack-smash

我一直试图通过堆栈粉碎更改返回地址来跳过一条指令。以下代码跳过 main 中的 a++ 并打印输出“1 3”。我已经在 32 位英特尔机器上执行了这段代码。

```
#include<stdio.h>
void fun(int a,int b) {
    // buffer
    char buf[8];
    char *p;
    p = (char *)buf+24;
    *p=*p+5;
    return;
}

int main() {
    int a=1,b=2;
    fun(a,b);
    a++;
    b++;
    printf("%d %d",a,b);
 } 
```

我无法理解为什么返回地址存储在距 buf 起始地址 24 字节的位移处。我尝试在不同的 32 位英特尔机器上执行相同的代码，我不得不使用 20 字节而不是 24 字节的位移。我把我的理解放在了下图中。我不确定是什么填补了“？”所代表的空白。图中。gcc 是否将任何金丝雀值放在那里，还是我错过了什么？

图链接：[http ://www.cse.iitb.ac.in/~shashankr/stack.png](http://www.cse.iitb.ac.in/~shashankr/stack.png)

[粉碎堆栈 example3.c 混乱](https://stackoverflow.com/questions/13006327/smashing-the-stack-example3-c-confusion)提出了同样的问题，但无法解释一般位移的原因。

下图给出了在函数中放置断点得到的堆栈视图。

[![堆栈内容](../Images/dc8ecb2de6c7ec84381e2a3af28f9831.png)](https://i.stack.imgur.com/T10vH.png)
[（来源：[www.cse.iitb.ac.in 上的 shashankr](http://www.cse.iitb.ac.in/~shashankr/stack4.png)）]

以下是 main 和 fun 的汇编代码：

```
 Dump of assembler (fun):
 0x08048434 <+0>:   push   %ebp
 0x08048435 <+1>:   mov    %esp,%ebp
 0x08048437 <+3>:   sub    $0x18,%esp
 0x0804843a <+6>:   mov    %gs:0x14,%eax
 0x08048440 <+12>:  mov    %eax,-0xc(%ebp)
 0x08048443 <+15>:  xor    %eax,%eax
 0x08048445 <+17>:  lea    -0x14(%ebp),%eax
 0x08048448 <+20>:  add    $0x18,%eax
 0x0804844b <+23>:  mov    %eax,-0x18(%ebp)
 0x0804844e <+26>:  mov    -0x18(%ebp),%eax
 0x08048451 <+29>:  movzbl (%eax),%eax
 0x08048454 <+32>:  add    $0x5,%eax
 0x08048457 <+35>:  mov    %eax,%edx
 0x08048459 <+37>:  mov    -0x18(%ebp),%eax
 0x0804845c <+40>:  mov    %dl,(%eax)
 0x0804845e <+42>:  mov    -0xc(%ebp),%eax
 0x08048461 <+45>:  xor    %gs:0x14,%eax
 0x08048468 <+52>:  je     0x804846f <fun+59>
 0x0804846a <+54>:  call   0x8048350 <__stack_chk_fail@plt>
 0x0804846f <+59>:  leave  
 0x08048470 <+60>:  ret    

 Dump of assembler (main)
 0x08048471 <+0>:   push   %ebp
 0x08048472 <+1>:   mov    %esp,%ebp
 0x08048474 <+3>:   and    $0xfffffff0,%esp
 0x08048477 <+6>:   sub    $0x20,%esp
 0x0804847a <+9>:   movl   $0x1,0x18(%esp)
 0x08048482 <+17>:  movl   $0x2,0x1c(%esp)
 0x0804848a <+25>:  mov    0x1c(%esp),%eax
 0x0804848e <+29>:  mov    %eax,0x4(%esp)
 0x08048492 <+33>:  mov    0x18(%esp),%eax
 0x08048496 <+37>:  mov    %eax,(%esp)
 0x08048499 <+40>:  call   0x8048434 <fun>
 0x0804849e <+45>:  addl   $0x1,0x18(%esp)
 0x080484a3 <+50>:  addl   $0x1,0x1c(%esp)
 0x080484a8 <+55>:  mov    $0x80485a0,%eax
 0x080484ad <+60>:  mov    0x1c(%esp),%edx
 0x080484b1 <+64>:  mov    %edx,0x8(%esp)
 0x080484b5 <+68>:  mov    0x18(%esp),%edx
 0x080484b9 <+72>:  mov    %edx,0x4(%esp)
 0x080484bd <+76>:  mov    %eax,(%esp)
 0x080484c0 <+79>:  call   0x8048340 <printf@plt>
 0x080484c5 <+84>:  leave  
 0x080484c6 <+85>:  ret 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T16:07:23.670

我相信答案是什么。你有不同的 gcc 版本吗？无论如何，允许编译器分配比必要更多的堆栈。也许这是基于变量数量的初始“猜测”，但优化阶段并没有减少它，允许将任何变量移动到寄存器。或者它是一些保存 ecx、ebp 或其他寄存器的容器，以防子程序需要。

无论如何，有一个固定地址变量可以解决这个问题：*a* . 返回地址 = &a[-1]。

# linux - 当你的 linux 内核程序出错时，你会采取什么方法？

> ID：13330052
> 
> 赞同：0
> 
> 时间：2012-11-11T09:48:29.860
> 
> 标签：linux, linux-kernel, linux-device-driver

我在编写和测试一个linux内核程序如多内核级线程或其他通用内核模块时没有找到好的方法，你采取什么方法？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-03T20:40:28.103

printk、printk 和更多 printk。

使用 dmesg 查看。有时故意使内核崩溃以获取crashinfo，然后您可以解码crashinfo

dumptrace(), dumpstack() 将在 dmesg 上打印堆栈跟踪。

作为最后一个选项，kgdb。但这需要连接到另一个系统，并且总是很难让它工作。

# php - 结合 PHP 和 C++ 编程

> ID：13330054
> 
> 赞同：-2
> 
> 时间：2012-11-11T09:49:00.680
> 
> 标签：php, c++, web-services, web-applications

嘿伙计们，我正在考虑尝试将 C++ 网络编程与 PHP 结合起来，我在 PHP/MySQL/AJAX 等方面有所了解，但对 C++ 了解不多。所以我正在考虑构建一个网络应用程序。并以 Cpp/Qt4 为例为他们创建客户：

```
The php app is a chat application/server that offers the users to chat in rooms or PMs and etc. ( Like IRC ).
And would want to make a chat client in Cpp/Qt4 to be downloadable and use the same server. Like (mIRC) 
```

*   我应该使用 PHP 作为服务器还是应该重新考虑另一种语言？
*   Qt4 是一个好建议还是我必须重新考虑？
*   我应该如何将 PHP 连接到 C++？

我想帮助我一些我应该参考的技术或资源。先感谢您！干杯!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T09:53:11.393

我不认为将 Qt 与 PHP 混合是一个好主意。PHP 是一种（相当糟糕的）Web 服务器编程语言（您可以考虑使用[Opa](http://opalang.org/)或 Ocaml 与[Ocsigen](http://ocsigen.org/)，甚至 C++ 与[Wt](http://www.webtoolkit.eu/wt)）。

Qt 通常在桌面上运行。（因此，从 PHP 运行 Qt 程序需要 Web 服务器能够访问您桌面的[X11 服务器](http://en.wikipedia.org/wiki/X_Window_System)，这是不寻常的）。

您可以运行一些 Web 服务，例如通过 FastCGI，并将它们与您的 PHP 事物混合。例如，您可以`XMLHttpRequest`在 PHP 应用程序中使用 Ajax 查询 FastCGI 或用 C++ 编写的 CGI。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T13:12:36.947

我建议您考虑使用 PHP、Ruby、Node 或您喜欢的任何其他服务器端语言开发基于 SaaS 的应用程序。

这样，您只需要担心在 c++ 中创建接口并与您创建的 API 进行交互。与数据库的连接和其他请求将通过服务器完成

# symfony - 用自定义包的配置文件覆盖 templateNameParser 类？

> ID：13330056
> 
> 赞同：0
> 
> 时间：2012-11-11T09:49:11.023
> 
> 标签：symfony

我想覆盖 templating.name_parser.class 但我想在 FrameworkBundle 之后加载的自定义配置包中做一些事情。现在我要做的是：

1.  将配置文件放在 customBundle/Resources/config/ 中

2.  通过将其添加到自定义包中重新运行模板传递：

    $container->addCompilerPass(new TemplatingPass());

我想知道这是否是最好的方法？（我知道我可以将配置放在 app/config 中）但如果可能的话，我想将此配置放在 customBundle 中，以确保所有包的特定配置都放在包中。

# php - 登录 Facebook 应用程序重定向到画布 URL

> ID：13330057
> 
> 赞同：0
> 
> 时间：2012-11-11T09:49:14.870
> 
> 标签：php, facebook, facebook-apps

所以我开始学习 facebook 应用程序并遇到了我的第一个障碍。每当我登录到我的简单 hello 用户应用程序时，我都会被重定向到画布 URL（应用程序内容直接在服务器上打开，而不是在 facebook iFrame 内打开）。

这是代码

```
<?php
require_once("php-sdk/facebook.php");

$config = array(
    'appId' => '',
    'secret' => ''
);

$facebook = new Facebook($config);

$user_id = $facebook->getUser();
$params = array(
    'scope' => 'read_stream, friends_likes',
    'redirect_uri' => 'https://apps.facebook.com/401822713222945/'
);
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    </head>

    <body>
<?php
if ($user_id){
    try {
        $user_profile = $facebook->api('/me','GET');
        echo 'Welcome ' . $user_profile['name'] . '!';
    } catch(FacebookApiException $e) {
        $login_url = $facebook->getLoginUrl();
        echo 'Please <a href="' . $login_url . '" onclick="top.location.href = \'' . $login_url . '\'">log in.</a>';
        error_log($e->getType());
        error_log($e->getMessage());
    }
} else {
    $login_url = $facebook->getLoginUrl();
    echo 'Please <a href="' . $login_url . '" onclick="top.location.href = \'' . $login_url . '\'">log in.</a>';
}
?>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T10:01:27.503

`<body>`在标签之后尝试以下操作。

```
<script type="text/javascript">
if(top === self){
    document.location = "<?php echo $params['redirect_uri'];?>";
}
</script> 
```

它将检查当前窗口是否是最顶层的窗口，如果您直接访问该页面，它会将您重定向到 iframed 页面。

# objective-c - iPhone 5 视图未调整大小以正确宽度

> ID：13330062
> 
> 赞同：0
> 
> 时间：2012-11-11T09:50:30.273
> 
> 标签：objective-c, ios, xcode, ios5, ios6

我不使用自动布局，我将所有视图设置为自动调整其子视图的大小。我的子视图不会得到正确的宽度，我做了以下 hack：

```
- (void)awakeFromNib {
    if([CEDeviceUtils isPhone5])
    {
        NSUInteger width = [CEViewUtils windowSize].width;
        if(width != 568) width = 568;
        [CEViewUtils sizeView:self atWidth:width];
    }
  } 
```

isPhone5、windowSize 和 sizeView 只是我使用的一些实用方法，它们的实现对我的问题并不重要。

我不喜欢不得不使用这个 hack，而且我一定遗漏了一些东西。有关如何解决此问题的任何线索？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T09:59:04.203

4" Retina 显示屏的有效分辨率为 320 x 568，高度为 568 pt。我假设您使用的是横向，因为您正在检查`width`属性是否为 568，但您确定你`[CEViewUtils windowSize].width`不是在默认纵向返回设备的 320 pt 宽度吗？`height`无论设备旋转的当前状态如何，你都应该只查看属性。

此外，检查您的`isPhone5`方法是否确实返回了正确的值也无妨；在您的代码中抛出一个`NSLog()`或断点以确保控制到达您期望的位置。（`awakeFromNib`方法也是如此——确保它在您期望的时候被调用。您可能需要将此代码移动到`viewWillAppear`or`viewDidAppear`方法中，这些方法在视图指标建立后调用，因此您可以覆盖它们。）

# networking - RPC 语义究竟是什么目的

> ID：13330067
> 
> 赞同：19
> 
> 时间：2012-11-11T09:51:43.453
> 
> 标签：networking, rpc, semantics

我正在研究 rpc 语义，至少一次和最多一次语义，它们是如何工作的？

无法理解其实现的概念。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-11-11T10:06:56.807

在这两种情况下，目标都是调用该函数一次。但是，不同之处在于它们的故障模式。在“至少一次”中，系统将在失败时重试，直到它知道该函数已成功调用，而“最多一次”不会尝试重试（或将确保对在重试之前调用）。

至于这些是如何实现的，这可能会有所不同，但伪代码可能如下所示：

```
At least once:
    request_received = false
    while not request_received:
       send RPC
       wait for acknowledgement with timeout
       if acknowledgment received and acknowledgement.is_successful:
          request_received = true

At most once:
   request_sent = false
   while not request_sent:
      send RPC
      request_sent = true
      wait for acknowledgement with timeout
      if acknowledgment received and not acknowledgement.is_successful:
         request_sent = false 
```

您想要执行“最多一次”的示例案例类似于付款（您不想意外地向某人的信用卡计费两次），其中“至少一次”的示例案例就像使用特定值更新数据库（如果您碰巧连续两次将相同的值写入数据库，那真的不会对任何事情产生任何影响）。您几乎总是希望对非变异（又名幂等）操作使用“至少一次”；相比之下，大多数变异操作（或至少是那些递增地改变状态并因此在应用变异时依赖于当前/先前状态的操作）将需要“最多一次”。

我应该补充一点，在“至少一次”系统之上实现“最多一次”语义是相当普遍的，方法是在 RPC 的主体中包含一个唯一标识它的标识符，并确保在服务器上看到每个 ID系统只处理一次。您可以将 TCP 数据包中的序列号（确保数据包按顺序交付一次）视为此模式的一个特例。然而，这种方法在分布式系统上正确实施可能会有些挑战，其中相同 RPC 的重试可能会到达运行相同服务器软件的两台独立计算机。（处理这个问题的一种技术是记录接收到 RPC 的事务，然后在系统内部重新分配请求以进行进一步处理之前，使用集中式系统对这些记录进行聚合和重复数据删除；另一种技术是机会性地处理 RPC，但在服务器之间的同步最终检测到这种重复时协调/恢复/回滚状态......这种方法可能不会用于支付，但它在其他情况下可能很有用，如论坛帖子） .

# jquery - 无法从 Angular 调用 JQuery 插件

> ID：13330073
> 
> 赞同：2
> 
> 时间：2012-11-11T09:52:40.983
> 
> 标签：jquery, angularjs, sticky

我尝试从以下声明中调用 JQuery 粘性插件，但没有任何反应，我检查了调试消息，它通过了线路并且粘性没有出现。但是当我从其他地方正常打电话时，它就可以了。

```
var globalService = angular.module('global.service', []);
globalService.config(function ($httpProvider) {
    $httpProvider.responseInterceptors.push('myHttpInterceptor');
    var spinnerFunction = function (data, headersGetter) {
        var settings = {
                'speed' : 'fast',
                'duplicates' : false,
                'autoclose' : false
        };

        $.sticky('Loading..', settings);
        return data;
    };
    $httpProvider.defaults.transformRequest.push(spinnerFunction);
});

//register the interceptor as a service, intercepts ALL angular ajax http calls
globalService.factory('myHttpInterceptor', function ($q, $window) {
    return function (promise) {
        return promise.then(function (response) {
            // do something on success
            // todo hide the spinner

            $.sticky.clear();
            return response;

        }, function (response) {
            // do something on error
            // todo hide the spinner

            $.sticky.clear();
            return $q.reject(response);
        });
    };
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T07:28:06.080

修复 $.sticky.clear() 后，上面的代码可以正常工作

# perl - Perl：do-while循环后打印错误

> ID：13330075
> 
> 赞同：0
> 
> 时间：2012-11-11T09:52:48.207
> 
> 标签：perl

我正在制作一个连接的 do-while 循环，其中每个输入的字符串都将被添加到 main string `$food`。这是代码：

```
do {
  print("\nEnter your order(-1 to end): ");
  $order = <>;
  chop($order);

  if ($order != -1) {
   $food .= " ".$order;
   print($food);
  }  
} while ( $order != -1)

print ($food); #PROBLEM HERE! 
```

问题是每当我放在`print ($food)` **循环之外**时，都会出现此行的语法错误以及一条`Execution of file.pl aborted due to compilation errors`消息。

一旦我放入`print ($food)`循环中，代码就可以工作，但我很好奇为什么会发生这个错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T09:55:28.493

您上次打印之前的行有语法错误 - 它不以`;`. 只需添加它，它应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T10:07:19.333

除了语法错误之外，值得一提的是：我看到您使用换行符开始字符串。虽然这很好，但在打印之前用换行符结束字符串可能被认为“更好”，因为打印换行符会导致立即刷新 STDOUT 缓冲区。在大多数情况下，这是您想要的行为，因为它可以防止延迟输出和文本闪烁（尤其是在大量打印时）。

# php - PHP - cURL 和远程登录

> ID：13330083
> 
> 赞同：0
> 
> 时间：2012-11-11T09:54:22.013
> 
> 标签：php, curl

我的脚本使用 cURL 有问题。在页面 A 上，我设置 cURL POST 并将其发送到页面 B，其中执行登录脚本。数据传递正确，但是页面 B 上没有设置 session 和 cookie。

脚本 login.php 打开 SESSION（最后是 COOKIE）并保存必要的信息。如果我直接从页面 B 登录，它工作正常。

```
 $ch = curl_init("http://www.example.com/login.php");

    curl_setopt ($ch, CURLOPT_POST, 1);
    curl_setopt ($ch, CURLOPT_POSTFIELDS, "login_name=xxx&login_pass=xxx");

    curl_setopt ($ch, CURLOPT_RETURNTRANSFER, 1);

    $output = curl_exec ($ch);

    curl_close ($ch); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T20:19:33.197

尝试将此添加到您的代码中

```
$cookie="cookie.txt";
curl_setopt($curl_connection, CURLOPT_FOLLOWLOCATION, true);
curl_setopt($curl_connection, CURL_COOKIEJAR, $cookie);
curl_setopt($curl_connection, CURL_COOKIEFILE, $cookie);
curl_setopt($curl_connection, CURL_VERBOSE, true); 
```

希望这有帮助..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T11:03:35.373

使用[COOKIEJAR 和 COOKIEFILE](http://www.php.net/manual/en/function.curl-setopt.php)：

```
<?php
    $ch = curl_init("http://www.example.com/login.php");

    curl_setopt($ch, CURLOPT_POST, 1);
    curl_setopt($ch, CURLOPT_POSTFIELDS, "login_name=xxx&login_pass=xxx");
    curl_setopt($ch, CURLOPT_COOKIEJAR, '/cookie.txt');
    curl_setopt($ch, CURLOPT_COOKIEFILE, '/cookie.txt');
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);

    $output = curl_exec($ch);

    curl_close ($ch);
?> 
```

您也可以创建一个存储 cookie的**tmp目录！**

# eclipse - 如何更改默认的 Eclipse 输入语言？

> ID：13330087
> 
> 赞同：1
> 
> 时间：2012-11-11T09:55:24.427
> 
> 标签：eclipse, layout, keyboard, non-english

我有斯洛文尼亚语布局，实际上是带有额外字符（on `AltGr`）的英文布局。在一个布局中包含多种语言很有用。Eclipse 默认为我的系统添加英文布局。这不方便。有没有办法解决这个问题？我真的需要我的布局。Eclipse 靛蓝 SR2，Win7。

# iphone - 标签栏 - 选定的项目阴影

> ID：13330090
> 
> 赞同：1
> 
> 时间：2012-11-11T09:55:49.793
> 
> 标签：iphone, ios, uitabbarcontroller, tabbar, uitabbaritem

我使用 CGRectMake 增加了标签栏的高度，我的问题是：我可以增加阴影（选中时出现在标签栏项目上）的高度吗？如何 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T12:25:35.297

对于您的问题，即使我以前没有尝试过，但我认为这是可能的，从这个参考链接[http://developer.apple.com/library/ios/documentation/UIKit/Reference/UITabBar_Class/UITabBar_Class.pdf](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UITabBar_Class/UITabBar_Class.pdf)，请看在 shadowImage 讨论

```
Discussion
The default value is nil, which corresponds to the default shadow image. When non-nil, this property
represents a custom shadow image to show instead of the default. For a custom shadow image to be shown,
a custom background image must also be set using the backgroundImage (page 5) property. If the default
background image is used, then the defaultshadow image will be used regardless of the value of this property 
```

更新：谢谢你`Muhannad Dasoqie`，自己发现这个:)

```
[self.tabbarController.tabBar setSelectionIndicatorImage:[UIImage imageNamed:@"Selected_Tab_Shadow.png"]]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T12:29:54.580

请参阅本教程和自定义标签栏的源代码。

[自定义标签栏](http://www.cocoacontrols.com/search?utf8=%E2%9C%93&q=tabbar)

有多个示例，并且有一个用于自定义阴影。

希望对你有帮助。

# php - 如何生成 SEF slug 或 url

> ID：13330092
> 
> 赞同：0
> 
> 时间：2012-11-11T09:56:10.060
> 
> 标签：php, mysql, sef

我想像 wordpress 一样生成页面、类别等的 slug 让我有页面标题：“我的页面标题”然后转义空格和特殊字符并生成像“my-page-title” 怎么做

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T09:56:10.060

这是生成蛞蝓的功能

```
function slug($var){
    $seoname = preg_replace('/\%/',' percentage',$var); 
    $seoname = preg_replace('/\@/',' at ',$seoname); 
    $seoname = preg_replace('/\&/',' and ',$seoname); 
    $seoname = preg_replace('/\s[\s]+/','-',$seoname);    // Strip off multiple spaces 
    $seoname = preg_replace('/[\s\W]+/','-',$seoname);    // Strip off spaces and non-alpha-numeric 
    $seoname = preg_replace('/^[\-]+/','',$seoname); // Strip off the starting hyphens 
    $seoname = preg_replace('/[\-]+$/','',$seoname); // // Strip off the ending hyphens 
    $seoname = strtolower($seoname); 

    return $seoname;
} 
```

# apache - apache tomcat 连接器 - 网站配置

> ID：13330094
> 
> 赞同：1
> 
> 时间：2012-11-11T09:56:21.090
> 
> 标签：apache, tomcat, connector, mod-jk, ajp

我已经部署了从 apache 获取流量的网站，该网站从 tomcat 获取页面。我已经配置了 mod_jk 连接器，一切正常。

比如说我的网站 url 是 `http://<mywebsite.com>` 我的 tomcat 部署的应用程序应用程序名称测试应用程序

问题是我只能在浏览时浏览该网站，`http://<mywebsite.com>/testapp`但我希望 apache 在我浏览我的网站时提供页面服务`http://<mywebsite.com>`，目前还没有发生。下面是我的 apache httpd.conf 文件，testapp 是我在 tomcat 上部署的应用程序名称。

```
JkWorkersFile conf/workers.properties
JkLogFile logs/mod_jk.log
JkLogStampFormat "[%b %d %Y - %H:%M:%S] "
JkRequestLogFormat "%w %V %T"
JkLogLevel info

JkOptions +ForwardKeySize +ForwardURICompat -ForwardDirectories

Alias /testapp "C:/Items/Installation Directories/Tomcat7.0/webapps/awardio/"

<Directory "C:/Items/Installation Directories/Tomcat7.0/webapps/awardio/">
    AllowOverride None
    Allow from all
</Directory>

<Location /*/WEB-INF/*>
    deny from all
</Location>

JkMount /testapp/* myworker 
```

我需要 mod_rewrite 或其他什么或配置虚拟主机。

这是相当紧急的，所以感谢您的帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T10:51:06.800

```
my tomcat deployed application app name test app 
```

您需要将部署的应用名称更改为`ROOT`. 所以你可以把war文件重命名为`ROOT.war`

# java - 通过 int 从字符串数组中获取特定的字符串

> ID：13330096
> 
> 赞同：-7
> 
> 时间：2012-11-11T09:56:49.777
> 
> 标签：java, android, arrays, string

我有一个这样的字符串数组：

```
 public static String[] SOM = new String[] { 
    "", "","", "","something", "something","something", "something","", ""}; 
```

假设我想检查位置 4 的字符串是什么。我怎样才能只得到那个单一的字符串？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T09:58:30.630

你可以做：

```
System.out.println(SOM[3]); 
```

# django - django：从模板中的视图调用函数

> ID：13330097
> 
> 赞同：1
> 
> 时间：2012-11-11T09:56:56.067
> 
> 标签：django, function, templates, views

我有一个函数`views.py`，例如这样的：

```
def get_base_content():
    footer = SiteContent.objects.get(pk=1)
    return {
        "footer" : footer,
} 
```

我如何在我的中调用此函数`template`并在其中使用`footer`变量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T10:33:06.397

如果你想在所有模板上显示这个变量，那么你需要实现一个[模板上下文处理器](https://docs.djangoproject.com/en/dev/ref/templates/api/#the-django-template-language-for-python-programmers)。

您只需要对代码进行最少的更改：

```
def get_base_content(request):
    footer = SiteContent.objects.get(pk=1)
    return {"footer" : footer} 
```

现在，将它添加到一个单独的文件中，调用它`custom_context.py`。在您`settings.py`将其添加到您的[`TEMPLATE_CONTEXT_PROCESSORS`](https://docs.djangoproject.com/en/dev/ref/settings/#std%3asetting-TEMPLATE_CONTEXT_PROCESSORS)设置中：

```
TEMPLATE_CONTEXT_PROCESSORS = (
    "django.contrib.auth.context_processors.auth",
    "django.core.context_processors.debug",
    "django.core.context_processors.i18n",
    "django.core.context_processors.media",
    "django.core.context_processors.static",
    "django.core.context_processors.tz",
    "django.contrib.messages.context_processors.messages",
    "myapp.custom_context.get_base_content", # don't forget the comma!
) 
```

现在，在您的视图代码中，您只需要确保您使用的是`RequestContext`. 最简单的方法是使用[`render`快捷方式](http://django.me/render)：

```
from django.shortcuts import render

def myview(request):
   return render(request,'hello.html',{'foo': 'bar'}) 
```

在`hello.html`你将拥有`{{ foo }}`和`{{ footer }}`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T10:00:40.473

您将需要创建一个模板标签，对于您的情况，您可能需要查看[包含标签](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/#inclusion-tags)。

# java - 未登录时禁用 JButton

> ID：13330098
> 
> 赞同：1
> 
> 时间：2012-11-11T09:57:55.453
> 
> 标签：java, swing, jbutton, disabled-control

我正在创建一个迷你项目。我的项目是图书馆管理系统。

![这是我的登录页面](../Images/2d6dbaeaa07f50a7543a358b06e1182f.png)

如果我通过单击登录，如何在高级搜索中禁用问题按钮`Anonymus`？或者如果以管理员身份登录，如何启用问题按钮？

![这是我提前搜索的书籍](../Images/27c652ff742314fa3f8caead2428fd85.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T10:01:46.373

`setEnabled()`您可以使用该方法启用/禁用按钮。您必须找出`boolean`需要传递给方法的代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T10:10:09.020

基本上，您需要做的是调用`setEnabled(isAdministrator())`您的问题按钮。为此，您必须实现一个`isAdministrator()`方法，该方法应检查用户是否已登录以及该用户是否是管理员。如何检查这取决于您的登录对话框的实现以及您管理用户的方式。通常你会有某种数据库保存所有用户和（加密的）密码以及一个标志，告诉某个用户是否是管理员（或者你可以有一个单独的表，其中包含角色或权限以及多对多关系在用户表和角色或权限表之间，但对于小型项目，这可能不需要）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-29T05:08:56.863

当您通过用户名和密码验证时，只需将一个布尔变量初始化为 false，将其更改为 true，按钮有一个 jButton.setVisibility("true or false"); 这可以是真或假，但添加布尔变量将确定它是注册用户还是匿名客户端:)

# php - ZEND 无法访问 AutoLoader

> ID：13330104
> 
> 赞同：1
> 
> 时间：2012-11-11T09:58:35.657
> 
> 标签：php, zend-framework

我试图让我的 Zend 应用程序在生产环境中启动，但我收到此错误：

> 警告：require_once() [function.require-once]：无法访问 /var/www/web1/html/tool/lib/Zend/Loader/AutoLoader.php 在 /var/www/web1/html/tool/public/第 24 行的 index.php

在开发环境中一切正常，所以我认为这一定是服务器配置错误。

任何想法可能导致问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T23:32:24.273

我猜开发系统是Windows，生产环境是*nix。

正确的文件名应该是：

```
Zend/Loader/Autoloader.php 
```

不是

```
Zend/Loader/AutoLoader.php 
```

注意`L`vs. `l`_ Windows 文件系统不区分大小写，但您的生产环境很可能区分大小写，这就是它无法打开该文件的原因。

如果这不是问题，请确保 Web 服务器可以读取 Autoloader 文件和父目录的权限。

# xmpp - 用于 IM 的开源 XMPP 服务器

> ID：13330106
> 
> 赞同：7
> 
> 时间：2012-11-11T09:58:46.263
> 
> 标签：xmpp, instant-messaging

我想为我的公司建立即时通讯服务。我从这本书中熟悉了 XMPP。现在我想玩一些开源的现有 XMPP 服务器并构建即时消息服务。你能推荐任何开源 XMPP 网络服务器吗？

PS：我是 XMPP 和即时消息的新手，所以任何关于 XMPP 和 IM 的建议都会有所帮助。

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-11T10:16:25.907

可以从此链接找到一个很好的 XMPP 服务器列表：http: [//xmpp.org/xmpp-software/servers/](http://xmpp.org/xmpp-software/servers/)

但是很少有主要参与者是 jabberd、ejabberd、openfire、Tigase 等。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-03-07T00:40:51.230

推荐[openfire](http://www.igniterealtime.org/projects/openfire/)作为 XMPP 服务器并安装[candy-chat](http://candy-chat.github.io/candy/)作为 web 界面。

它使最终用户可以自由选择任何[xmpp 客户端](https://xmpp.org/xmpp-software/clients/)，如 pidgin 或直接使用 Web 界面。

Candy 还提供了很多插件来扩展。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-03-06T23:31:09.493

如果你熟悉java我建议你这两个。

1.  openfire - 用 java 编写。易于使用和编写新插件。良好的文档和许多可用的插件。有很好的管理面板
2.  Tigase - 用 Ja​​va 编写。非常好的性能，移动优化，易于编写的插件。

两者都易于安装和设置。如果您必须快速测试它是如何工作的，我建议您安装 openfire 并使用它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-03-05T19:24:02.907

我将强烈推荐通过网络提供给 Openfire (OF) 简单配置的那个。Openfire 具有可通过插件扩展的优势，使其模块化。

由于不利的 Openfire 消耗足够的 RAM。

在这里我留下一个链接，我解释如何安装 gnu/linux（不是英文，是西班牙文）

[http://www.scribd.com/doc/107576024/Instalacion-del-servidor-de-chat-Openfire-v0-1-1](http://www.scribd.com/doc/107576024/Instalacion-del-servidor-de-chat-Openfire-v0-1-1)

# mysql - 查询返回分组攻击最高的口袋妖怪

> ID：13330111
> 
> 赞同：4
> 
> 时间：2012-11-11T09:59:20.017
> 
> 标签：mysql

我有一个充满口袋妖怪卡的数据库，以及它们的攻击。我想进行查询以找到每种类型攻击力最强的口袋妖怪。我希望视图只显示攻击的名称、类型和损害。

```
SELECT p2.MaxD, p2.Type, p1.name 
FROM Pokemon p1 
INNER JOIN ( SELECT type, MAX(damage) MaxD, pokemon_name FROM Attack GROUP BY Type )
p2 ON p1.type = p2.type AND p2.pokemon_name = p1.name 
```

我有这个代码。它返回最高的伤害，但不是正确的口袋妖怪。口袋妖怪表没有伤害字段。我正在尝试了解连接。

这是结构：

攻击表有 4 个字段：pokemon_name（本次攻击所属的宝可梦）、伤害、名称（本次攻击的名称）、类型（本次攻击所属的宝可梦类型）。

口袋妖怪表有 3：HP、类型（口袋妖怪）和名字（口袋妖怪）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T10:20:07.030

首先，您必须构建选择，为每种类型选择最大伤害（您已经有了）：

```
SELECT type, MAX(damage) MaxD FROM Attack GROUP BY Type 
```

现在，除非：

*   类型是`INT`（`ENUM`或其他数字类型）
*   有索引`type`或`type, damage`

您不能选择`pokemon_name`，因为 MySQL 不保证您会得到`pokemon_name`匹配`MaxD`（[这里是关于 stackoverflow 的一个很好的答案](https://stackoverflow.com/a/537235/1149736)，它已经涵盖了这个问题）。

现在您可以选择具有该匹配的口袋妖怪`pokemon_name`

```
SELECT p1.pokemon_name, p1.type, p1.damage
FROM Attack p1
INNER JOIN (
    SELECT type, MAX(damage) MaxD FROM Attack GROUP BY Type
) p2 ON p1.type = p2.type
     AND p1.damage = p2.MaxDamage
GROUP BY (p1.type, p1.damage) 
```

最后一条`GROUP BY`语句确保拥有多个具有相同攻击伤害的口袋妖怪不会导致一对多记录`type,damage`。

同样，您将通过替换为 来获得良好的`pokemon_name`性能`pokemon_id`。也许你应该谷歌[`database normalization`](https://www.google.com/search?hl=en&q=database%20normal%20forms)一段时间[[wikipedia]](http://en.wikipedia.org/wiki/Database_normalization)，[[first tutorial]](http://www.bkent.net/Doc/simple5.htm)。您可能还想查看[此问答](https://dba.stackexchange.com/questions/8334/why-should-i-create-an-id-column-when-i-can-use-others-as-key-fields)，它很好地概述了“关系表”的含义。

现在您有正确`pokemon_name`的（为了您的程序，我希望您将其替换为`pokemon_id`），您可以将它们放在一起：

```
SELECT p1.pokemon_name, p1.type, p1.damage, p.*
FROM Attack p1
INNER JOIN (
    SELECT type, MAX(damage) MaxD FROM Attack GROUP BY Type
) p2 ON p1.type = p2.type
     AND p1.damage = p2.MaxDamage
INNER JOIN Pokemon p
     ON  p.pokemon_name = p1.pokemon_name
GROUP BY (p1.type, p1.damage) 
```

* * *

### 理想的例子

在完美世界中，您的数据库将如下所示：

```
-- Table with pokemons
CREATE TABLE `pokemons` (
    `id` INT NOT NULL AUTO_INCREMENT,
    `name` VARCHAR(255),
    -- More fields
    PRIMARY KEY (`id`)
)

-- This contains pairs as (1,'Wather'), (2, 'Flame'), ...
CREATE TABLE `AttackTypes` (
    `id`,
    `name` VARCHAR(255)
)

-- Create records like (1, 2, 3, 152)
-- 1 = automatically generated keys
-- 2 = id of pokemon (let say it's Pikachu :P)
-- 3 = type of attack (this say it's Electric)
-- 152 = damage
-- This way each pokemon may have multiple attack types (Charizard flame + wind)
CREATE TABLE `Attacks` (
    `id`,
    `pokemonID` INT NOT NULL, -- Represents pokemons.id
    `typeID` INT NOT NULL, -- Represents attack.id
    `damage` INT
) 
```

*ID 字段是**ALWAYS** `PRIMARY KEY`，在这个例子`NOT NULL`中`AUTO_INCREMENT`*

然后从中选择，再次首先获取类型：

```
SELECT MAX(attack.damage) AS mDmg, attack.typeID
FROM attack
GROUP BY attack.typeID 
```

比获得口袋妖怪ID：

```
SELECT a.pokemonID, a.damage, a.typeID
FROM attack AS a
INNER JOIN (
    SELECT MAX(a.damage) AS mDmg, a.typeID
    FROM attack AS a
    GROUP BY a.typeID
) AS maxA
    ON a.typeID = maxA.typeID
        AND a.damage = mDmg
GROUP BY (a.typeID) 
```

一旦你涵盖了所有内容，你实际上可能会选择口袋妖怪数据

```
SELECT aMax.pokemonID as id,
    aMax.damage, 
    p.name AS pokemonName,
    aMax.typeID AS attackTypeID,
    t.name AS attackType

FROM (
    SELECT a.pokemonID, a.damage, a.type
    FROM attack AS a
    INNER JOIN (
        SELECT MAX(a.damage) AS mDmg, a.type
        FROM attack AS a
        GROUP BY a.type
    ) AS maxA
        ON a.type = maxA.type
            AND a.damage = mDmg
    GROUP BY (a.type)
) AS aMax

INNER JOIN pokemons AS p
    ON p.id = aMax.pokemonID

INNER JOIN AttackTypes AS t
    ON t.id = aMax.typeID 
```

### 性能提示：

*   您可以将字段添加`MaxDamage`到`AttackTypes`（将由存储过程计算）并为您节省一层嵌套查询
*   所有`ID`字段都应该是`PRIMARY KEY`s
*   index on`Attacks.typeID`允许您快速获取所有能够进行该类型攻击的口袋妖怪
*   index on`Attack.damage`让你快速找到最强攻击
*   `Attack.type, Attack.damage`在找到每次攻击的最大值时，（两个字段）上的索引将很有帮助
*   索引`Attack.pokemonID`将使查找`pokemon -> attack -> attack type name`更快

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T10:02:04.743

我不太确定您的架构，但我认为`pokemon_name`您的`attack`表实际上是口袋妖怪的名称。

```
SELECT  a.*, c.*
FROM    Attack a
        INNER JOIN
        (
            SELECT  type, MAX(damage) MaxD
            FROM Attack 
            GROUP BY Type 
        ) b ON a.Type = b.Type AND
                a.damage = b.MaxD
        INNER JOIN Pokemon c
            ON c.Name = a.pokemon_name AND
                c.Type = a.Type 
```

上面的查询显示了`attack`表和`pokemon`表中的所有字段，但是如果你真的对表感兴趣`name`，`damage`并且`type`你只对`attack`表进行查询

```
SELECT  a.*
FROM    Attack a
        INNER JOIN
        (
            SELECT  type, MAX(damage) MaxD
            FROM Attack 
            GROUP BY Type 
        ) b ON a.Type = b.Type AND
                a.damage = b.MaxD 
```

# c - 在 C（不是 C++）中正确使用堆栈变量是否“goto”很聪明

> ID：13330115
> 
> 赞同：11
> 
> 时间：2012-11-11T10:00:05.523
> 
> 标签：c

（抱歉英语不好。）

**问题 1。**

```
void foo(void)
{
    goto inside;
    for (;;) {
        int stack_var = 42;
inside:
        ...
    }
} 
```

`stack_var`当我转到`inside`标签时，会在堆栈中分配一个位置吗？即我可以正确使用`stack_var`内的变量`...`吗？

**问题2。**

```
void foo(void)
{
    for (;;) {
        int stack_var = 42;
        ...
        goto outside;
    }
outside:
    ...
} 
```

当我转到标签时，会在`stack_var`释放的堆栈中占有一席之地吗？例如，在内部`outside`做是否正确？`return``...`

换句话说，`goto`正确使用堆栈变量（当我遍历块时自动（取消）分配）是聪明的，还是只是一个愚蠢的跳跃？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-11T10:05:53.023

## 问题一：

> 我可以在 ... 中正确使用 stack_var 变量吗？

... 中的代码可以写入`stack_var`. 但是，这个变量是未初始化的，因为执行流程跳过了初始化，所以代码不应该在没有先写入的情况下读取它。

从 C99 标准，6.8:3

> 每次按执行顺序到达声明时，都会评估具有自动存储持续时间的对象的初始化程序 [...]，并将值存储在对象中（包括在没有初始化程序的对象中存储不确定的值）

我的编译器将下面的函数编译为一个程序集，该程序集有时会返回未初始化的内容`x`：

```
int f(int c){
  if (c) goto L;
  int x = 42;
 L:
  return x;
}

    cmpl    $0, %eax
    jne LBB1_2
    movl    $42, -16(%rbp)
LBB1_2:
    movl    -16(%rbp), %eax
...
    popq    %rbp
    ret 
```

## 问题2：

> 当我转到外部标签时，stack_var 会在堆栈中释放一个位置吗？

`stack_var`是的，您可以预期，一旦变量超出范围，保留的内存就会被回收。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T10:05:53.373

有两个不同的问题：

*   **C*代码中变量的*词法作用域。*C变量仅在声明它的块内才有意义*。*您可以想象编译器正在将变量重命名为唯一名称，这仅在作用域块内有意义。*

**   *在生成的代码中*调用框架。*一个好的优化编译器通常将当前函数的调用帧分配在函数开头的机器类栈上。该调用帧中的给定位置（称为*槽*）可以（并且通常）被编译器重用于多个局部变量（或其他目的）。** 

 **并且局部变量只能保存在寄存器中（调用帧中没有任何插槽），并且该寄存器显然会被用于各种目的。

对于第一个案例，您可能会伤害**未定义的行为**。之后`goto inside`是`stack_var`未初始化的。

我建议您编译`gcc -Wall`并改进代码，直到没有给出警告。**

# iphone - 在 NSMutableArray 中存储字体名称

> ID：13330117
> 
> 赞同：0
> 
> 时间：2012-11-11T10:00:20.397
> 
> 标签：iphone, objective-c, ios, fonts, cydia

如何将 iOS 上所有可用字体的名称存储在 NSMutableArray 中？这是供以后使用并在表格视图上显示它们

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T10:18:17.183

安装的所有字体名称：

```
id families = [UIFont familyNames];
id fonts = [NSMutableArray array];
for(id fam in families) {
    [fonts addObjectsFromArray:[UIFont fontNamesForFamilyName:fam]]; 
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-11T10:02:19.607

[`[UIFont familyNames]`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIFont_Class/Reference/Reference.html#//apple_ref/occ/clm/UIFont/familyNames)就是你要找的。如果您还想知道给定系列中可用的字体类型，您可以使用[`[UIFont fontNamesForFamilyName]`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIFont_Class/Reference/Reference.html#//apple_ref/occ/clm/UIFont/fontNamesForFamilyName%3a).

它们都返回一个不可变数组，如果你真的需要一个可变数组（无论出于何种原因），你可以简单地制作它的可变副本。

# redirect - Webfaction 将 no-WWW 重定向到 WWW（静态应用程序，htaccess 文件）

> ID：13330124
> 
> 赞同：5
> 
> 时间：2012-11-11T10:01:15.913
> 
> 标签：redirect, webfaction

在 webfaction 中，我想将 mysite.com 重定向到 www.mysite.com

我有以下内容：

*   子域 www.mysite.com。它有一个带有 Django 应用程序的网站。

*   一个子域 mysite.com。它有一个网站，其中有一个静态/CGI/PHP 应用程序。这个应用程序称为重定向。

*   在 webapps/redirect 中，我创建了一个文件 .htaccess。（顺便说一句，这一直“消失”。在 ssh 中使用 ls -a 来查看它确实存在。）

该文件如下所示：

```
Options +FollowSymLinks
RewriteEngine on
RewriteCond %{HTTP_HOST} mysite.com$ [NC]
RewriteRule ^(.*)$ http://www.mysite.com/$1 [R=301,L] 
```

（也尝试在 mysite.com$ 前使用 ^）

当我访问 mysite.com 时，我看到的是默认页面“Hello, World”，而不是访问 www.mysite.com 时看到的页面

不知道从这里做什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T15:18:42.727

在做了几个小时的其他事情之后，它现在可以在我没有改变任何东西的情况下工作。

# wordpress - 子域上的 Cufon 字体

> ID：13330129
> 
> 赞同：0
> 
> 时间：2012-11-11T10:01:37.777
> 
> 标签：wordpress, wordpress-theming, cufon

我安装了这个 WordPress 主题。它在域上完美运行。当我在子域上安装主题时，某些字体无法使用。我必须发现它们是 cufon 字体，而我是新手。我怎样才能让它们在子域上工作？我的网站在[这里](http://zikiza.com/)，我的子域网站在[这里](http://definition.zikiza.com/)。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T14:16:58.453

它必须是Cufon字体本身，当您生成Cufon js时，您可以将代码绑定到特定域。重新生成字体并删除域限制，或者创建与特定子域相关的多个版本。

# iphone - [__NSArrayM getFileSystemRepresentation:maxLength:]: 无法识别的选择器发送到实例

> ID：13330135
> 
> 赞同：0
> 
> 时间：2012-11-11T10:02:18.283
> 
> 标签：iphone, objective-c, ios, xcode, nsarray

我有以下代码来加载一些文件并将它们保存到磁盘：

```
NSDictionary *dictionary = [NSKeyedUnarchiver unarchiveObjectWithData:[NSData dataWithContentsOfURL:url]];
// THE LINE BELOW IS WHERE THE EXCEPTION OCCURS
NSMutableArray *paths = [[NSMutableArray alloc] initWithArray:[NSKeyedUnarchiver unarchiveObjectWithFile:[dictionary objectForKey:@"paths"]]];

if(dictionary)
{

    dispatch_async(dispatch_get_main_queue(), ^{

    NSLog(@"DOWNLOADED PATHS: %@", paths);

    NSFileManager *filemgr;
    NSString *docsDir;
    NSArray *dirPaths;

    filemgr = [NSFileManager defaultManager];

    dirPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);

    docsDir = [dirPaths objectAtIndex:0];

    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];

    for(NSObject *obj in paths)
    {

        NSString *identification = [defaults objectForKey:@"LatestID"];

        NSString *pageno = [NSString stringWithFormat:@"%i", [paths indexOfObject:obj]];
        NSString *name = [NSString stringWithFormat:@"%@paths%@.archive", identification, pageno];

        NSString *dataFilePath = [[NSString alloc] initWithString: [docsDir
                                                                    stringByAppendingPathComponent:name]];

        [NSKeyedArchiver archiveRootObject:paths toFile:dataFilePath];

    }

    });

} 
```

但是，当我运行此代码时，会出现以下异常：

![在此处输入图像描述](../Images/6192ae8fd9e88cd5171682bd668b1f92.png)

***终止应用程序由于未捕获的异常'NSInvalidArgumentException'，原因是： ' - [__ NSArrayM getFileSystemRepresentation：最大长度：]：无法识别的选择发送到实例0xc8809e0' ***第一掷调用堆栈：（0x3623012 0x3448e7e 0x36ae4bd 0x3612bbc 0x361294e 0x2e2d7b4 0x2e2d762 0x2e5bc85 0x2e83c7a 0x8d98 0x406053f 0x4072014 0x40632e8 0x4063450 0x95336e12 0x9531ecca) libc++abi.dylib：终止调用抛出异常 (lldb)

为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T10:22:17.503

似乎`[dictionary objectForKey:@"paths"]`在可疑行上包含一个`NSMutableArray`而不是一个`NSString`. 也许你的意思是`[[dictionary objectForKey:@"paths"] objectAtIndex:0]`相反。

# geometry - 形成具有给定斜边和角度的直角三角形

> ID：13330138
> 
> 赞同：0
> 
> 时间：2012-11-11T10:02:53.073
> 
> 标签：geometry, coordinates

我有两个点 A=[ax,ay] 和 B=[bx,by] 并且我在 CAB、CBA（即 90-ACB）和 ACB（90，直角）的直角三角形中有角度。现在我想获得点 C 的坐标 [cx,cy]（从两种可能性中，我想要一个位于从 A 到 B 的定向线段左侧的 C 点）。

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T17:02:18.547

1.  计算中点 D=(A+B)/2
2.  在角度 2*CAB 上旋转矢量 DB

（这是基于外接圆的中心是斜边的中间并且与中心的角度是与 A 角度的两倍的事实）

让我们BD =（dx，dy）

然后 C=D+(dx*cos2a+dy*sin2a,dy*cos2a-dx*sin2a)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T10:22:56.130

由于给定了一条边和两个相邻的角度，剩下的就是为另外两条边构建线并将它们相交。

将向量向左旋转`A->B`角度，将向量向右旋转角度并相交。`BAC``B->A``ABC`

要将向量向左旋转，请将其乘以旋转矩阵：

```
 cos(a) sin(a)
-sin(a) cos(a) 
```

要在二维中以参数形式与两条线相交，请同时求解两个参数，比较两条线的两个分量。

# magento - Magento：取消发货订单时增加“数量”

> ID：13330140
> 
> 赞同：2
> 
> 时间：2012-11-11T10:03:11.867
> 
> 标签：magento, magento-1.7

我在 Magento 1.7.0.2 上。我使用“货到付款”作为我的付款方式。我会准确地告诉你我在任何订单上遵循的步骤。下订单时（数量减少 1 件），我为它创建一个装运，如果客户支付了订单总价。我为该订单创建发票。

我的问题，如果下订单（数量减少 1 件），我会为此订单创建一个发货。如果客户拒绝付款，我打开这个订单并“取消”它，在这种情况下，“数量”没有增加，所以我怎样才能让它增加？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T11:05:20.033

**如果订单状态为处理中**

为“order_cancel_before”创建一个带有观察者的自定义模块（参见示例@Change [Magento default status for duplicate products](https://stackoverflow.com/questions/12677971/change-magento-default-status-for-duplicated-products) change`<catalog_model_product_duplicate> to <order_cancel_before>`

因为`<order_cancel_before>`在 app/code/core/Mage/Sales/Model/Order.php 中没有定义

您可以覆盖/重写订单模型类，例如[http://phprelated.myworks.ro/how-to-override-rewrite-model-class-in-magento/](http://phprelated.myworks.ro/how-to-override-rewrite-model-class-in-magento/)

在你的本地模块做

```
public function cancel()
{
    if ($this->canCancel()) {
        Mage::dispatchEvent('order_cancel_before', array('order' => $this));
        $this->getPayment()->cancel();
        $this->registerCancellation();

        Mage::dispatchEvent('order_cancel_after', array('order' => $this));
    }

    return $this;
} 
```

**或者您可以在模型中创建一个新方法 increaseProductQty() 并将下面的代码复制到其中（这样您就不需要观察者了）。然后将 Mage::dispatchEvent('order_cancel_before'... 行替换为 $this->increaseProductQty()**

在您的观察者方法中（伪代码）

```
$curr_date = date('Y-m-d H:i:s');
$order = $observer->getEvent()->getOrder();

foreach ($order->getItemsCollection() as $item) 
{ 
    $productId  = $item->getProductId();
    $qty = $item->getQty();

    // you need to check order status to make sure it processing
    //$order->getStatus() (assuming you are canceling entire order)
    //$order->getPayment();

    $product = Mage::getModel('catalog/product')->load($product_id);
    $stock_obj = Mage::getModel('cataloginventory/stock_item')->load($product_id);
    $stockData = $stock_obj->getData();
    $product_qty_before = (int)$stock_obj->getQty();
    $product_qty_after = (int)($product_qty_before + $qty); 
    $stockData['qty'] = $product_qty_after;

    $productInfoData = $product->getData();
    $productInfoData['updated_at'] = $curr_date;
    $product->setData($productInfoData);
    $product->setStockData($stockData);
    $product->save();
} 
```

如果您在更新库存时遇到问题，请参阅[在 Magento 1.7 中添加新产品时设置默认产品值](https://stackoverflow.com/questions/13289371/set-default-product-values-when-adding-new-product-in-magento-1-7)

参考[http://pragneshkaria.com/programatically-change-products-quantity-after-order-cancelled-magento/](http://pragneshkaria.com/programatically-change-products-quantity-after-order-cancelled-magento/)

**如果订单状态为待处理**

看看系统>配置>库存

**取消订单时将项目的状态设置为有库存**— 控制如果订单被取消，待处理订单中的产品是否自动返回库存。范围：商店视图。

阅读更多 @

[如何管理 Magento 商店库存？](http://www.magedevelopers.com/articles/magento-tutorials/magento-store-inventory-management)

[管理员：系统 → 配置 → 库存选项卡](http://www.magentocommerce.com/wiki/modules_reference/english/mage_adminhtml/system_config/edit/cataloginventory)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T13:07:06.740

感谢 RS，因为他对我的帮助越来越多。

[我遵循了 RS 回复https://stackoverflow.com/a/13330543/1794834](https://stackoverflow.com/a/13330543/1794834)上的所有说明，并且只更改了观察者代码。这是在 Magento 1.7.0.2 上与我一起工作的观察者代码。

```
$curr_date = date('Y-m-d H:i:s');
$order = $observer->getEvent()->getOrder();

foreach ($order->getItemsCollection() as $item) 
{ 
    $productId  = $item->getProductId();
    $qty = (int)$item->getQtyOrdered();
    $product = Mage::getModel('catalog/product')->load($productId);
    $stock_obj = Mage::getModel('cataloginventory/stock_item')->loadByProduct($productId);
    $stockData = $stock_obj->getData();
    $product_qty_before = (int)$stock_obj->getQty();
    $product_qty_after = (int)($product_qty_before + $qty); 
    $stockData['qty'] = $product_qty_after;
    /*
     * it may be case that admin has enabled product add in stock, after product sold,
     * he set is_in_stock = 0 and if order cancelled then we need to update only qty not is_in_stock status.
     * make a note of it
     */
    if($product_qty_after != 0) {
        $stockData['is_in_stock'] = 1;
    }else{
        $stockData['is_in_stock'] = 0;
    }

    $productInfoData = $product->getData();
    $productInfoData['updated_at'] = $curr_date;
    $product->setData($productInfoData);
    $product->setStockData($stockData);
    $product->save();
} 
```

# sphinx - Sphinx 查询列出来自内部单词的结果

> ID：13330141
> 
> 赞同：0
> 
> 时间：2012-11-11T10:03:50.887
> 
> 标签：sphinx

我试图编写一个狮身人面像查询来列出以某个关键字开头的域。

假设我有一个包含以下项目的狮身人面像索引。

```
stack.com
stack-it.com
stack.net
stack-studio.com
stackoverflow.com
stackmonkey.com 
```

以下查询

```
$cl->SetMatchMode ( SPH_MATCH_EXTENDED2 );
$cl->SetFieldWeights ( array ( "site_domain"=>100 ) );
$cl->SetSortMode ( SPH_SORT_EXTENDED  , "@weight DESC" );
$cl->SetLimits(0, 100);
$cl->AddQuery( '^stack', "domainsDb" ); 
```

只会列出：

```
stack.com
stack-it.com
stack.net
stack-studio.com 
```

因为它找到以 . 或者 -。但是`stackoverflow.com`没有显示，因为我猜它不是一个完整的匹配？如何获得以“查询”开头的所有结果来显示？即使它是一个词的一部分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T13:09:58.080

您应该启用星号选项（http://sphinxsearch.com/docs/1.10/conf-enable-star.html）并在您要查找的关键字后添加 *：

$cl->AddQuery('^stack*, "domainsDb" );

也不要忘记设置最小中缀长度（http://sphinxsearch.com/docs/1.10/conf-min-infix-len.html）

使用 MySQL 进行全文搜索并不是一个真正值得推荐的想法。

1) 与 sphinx/solr 相比，使用 FT 索引的全文搜索速度较慢

2) 没有 FT 索引的全文搜索非常慢，可以非常快速地利用 100% 的数据库服务器，即使在非常低的流量下也无法使用

3）为了能够拥有 FT 索引，您必须使用 MyISAM 引擎，而不是 Innodb，另一方面，Innodb 可能有其自身的一些缺点

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T10:31:50.303

我发现在这种情况下不需要 Sphinx。

仅 MySQL 就可以在 VARCHAR 字段上运行此类查询非常快。

```
SELECT * FROM domain WHERE domain LIKE '$search_term%' 
```

运行速度超快，甚至超过一百万条记录。

# java - 如何在 Struts 2 中处理不是来自 JSP 的 Action 表单数据？

> ID：13330143
> 
> 赞同：0
> 
> 时间：2012-11-11T10:04:04.520
> 
> 标签：java, forms, struts2, struts-action

我在 search.jsp 中有一个表单

```
<s:form name="employeeSearchForm" action="searchAction" method="post">
    <s:textfield name="id" label="Employee ID"/>
    <s:textfield name="name" label="Employee Name"/>
    <s:submit/>
</s:form> 
```

在 struts.xml 中

```
<package name="example" namespace="/" extends="default">

    <action name="searchAction" class="example.SearchAction">
        <result>/example/search.jsp</result>
    </action>

</package> 
```

然后是 SearchAction 类

```
public class SearchAction extends ActionSupport {

    private String id;
    private String name;

    @Override
    public String execute() throws Exception {

        if ("".equals(id.trim())) {    //#1

        ...

    }

    ...
} 
```

看#1行代码，如果我从search.jsp的Form中点击提交按钮，**id**字段不会为空，但如果我`http://127.0.0.1:8080/myapps/searchAction.action`直接打开，**id**字段将为空。

在这种情况下，我可以在 SearchAction.exeucte() 中使用字段检查，例如**if (id != null)**，但我怀疑这是否是最优雅的方式。

任何人都可以提出更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T11:09:26.937

`private String id="";` \快速解决。

但是应用程序不应允许用户直接点击操作，用户应在之前进行身份验证和/或授权。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T12:20:38.083

在 Web 环境中，通常很难判断用户是否提供了输入（空与空）。在您的情况下，您可以使用 Struts2 验证[http://struts.apache.org/2.x/docs/validation.html](http://struts.apache.org/2.x/docs/validation.html)来验证值。

# python - 安全地从目录中的 GET 请求获取文件

> ID：13330145
> 
> 赞同：1
> 
> 时间：2012-11-11T10:04:16.907
> 
> 标签：python, django, security

我想创建一个自己的静态文件视图，该视图返回 GET 请求中定义的文件。该文件**必须**位于额外的目录中。URL 必须像`/e?s=NAME_OF_FILE`. 我的问题是，黑客可以使用它`/e?s=/PATH/TO/DATABASE`来从服务器获取任何文件。我已经有一个解决方法，但我认为有更好的解决方案。

我的代码：

```
path = os.path.abspath(os.path.join(script_path, filename))
if path.startswith(script_path):
    # Good
else:
    # Bad 
```

这是针对“隐藏的静态文件”的，不应由服务器处理。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T10:10:50.183

你在做什么没有多大帮助。你可以做的一些事情——

1.  在网络服务器中关闭目录列表，这样“黑客”就不会获得该目录中所有文件的列表。
2.  您可以获取文件名，而不是将实际文件名暴露给外部世界，生成该文件名的 MD5，将此映射存储在您的服务器中的某处并将此 MD5 作为文件名公开。于是就变成了`/e?s=MD5_HASH_OF_FILENAME`。这样做会使“黑客”很难“猜测”文件名。蛮力无济于事，因为 MD5 不容易猜到。因此，实际上，只有知道如何发送此 URL 的人才能访问它。
3.  您可以将此静态文件查看 API 公开给仅经过身份验证的用户，而不是将其设为公共 API。您可以使用[@login_required](https://docs.djangoproject.com/en/dev/topics/auth/#the-login-required-decorator)装饰器。
4.  最后，在您的网络服务器上启用 HTTPS。

# android - Android：应用内购买丢失交易

> ID：13330146
> 
> 赞同：4
> 
> 时间：2012-11-11T10:04:18.453
> 
> 标签：android, in-app-purchase

使用 Android In App Purchase 创建采购订单时，有时 Google 市场无法及时发送确认消息。

我们已经看到了这样的情况，即在购买本身几个小时后才发送确认，从而使用户处于他们的信用卡被计费的状态，但他们在我们的产品中看不到购买。请参阅：[http ://code.google.com/p/marketbilling/issues/detail?id=14#makechanges](http://code.google.com/p/marketbilling/issues/detail?id=14#makechanges)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-11T10:04:18.453

事实证明，“恢复事务”请求还会发回未验证您的产品已收到它们的非托管事务。

这是一个适用于托管和非托管产品的解决方案：

1.  当用户要购买时，首先设置一个偏好值（如`RESTORE_TRANSACTION_NEXT_TIME`）为`true`，然后向市场发送购买请求。
2.  在您`onBillingSuppored`检查 pref 是否是`true`，如果是，则执行`billingService.restoreTransachtions()`
3.  在 onPurchaseStateChange(): 中`purchaseState == PurchaseState.PURCHASED)`，将 设置`RESTORE_TRANSACTION_NEXT_TIME`为`false`

这将确保自动恢复丢失的事务。

# c# - 编码的 ui - 无法对文本框执行“SetProperty”

> ID：13330148
> 
> 赞同：0
> 
> 时间：2012-11-11T10:04:26.437
> 
> 标签：c#, wpf, coded-ui-tests

我正在为 WPF 应用程序编写一个编码的 ui。该项目包含大约 30 个测试，在测试初始化​​时我有提交登录的方法。问题是在某些情况下我收到错误：

```
Microsoft.VisualStudio.TestTools.UITest.Extension.PlaybackFailureException was unhandled by user code
  Message=Cannot perform 'SetProperty of Text with value "admin"' on the control. Additional Details: 
TechnologyName:  'UIA'
ControlType:  'Edit'
AutomationId:  'UserName' 
```

大多数时候这个错误不会发生。

我很难找到错误一致性。

我可以说，如果我将重新启动代理服务并运行 30 测试 - 我将不会出现此错误。但如果我将运行 10 次测试 - 没有服务重新启动 - 再次运行 10 次测试，我将有可能重现错误。

完整的错误日志：

```
Microsoft.VisualStudio.TestTools.UITest.Extension.PlaybackFailureException was unhandled by user code
  Message=Cannot perform 'SetProperty of Text with value "admin"' on the control. Additional Details: 
TechnologyName:  'UIA'
ControlType:  'Edit'
AutomationId:  'UserName'

  Source=Microsoft.VisualStudio.TestTools.UITesting
  BasicMessage=Cannot perform 'SetProperty of Text with value "admin"' on the control.
  HResult=-268111863
  Action=SetProperty of Text with value "admin"
  ObjectName=UserName
  StackTrace:
       at Microsoft.VisualStudio.TestTools.UITesting.Playback.MapAndThrowComException(COMException innerException, IPlaybackContext context)
       at Microsoft.VisualStudio.TestTools.UITesting.Playback.MapAndThrowException(SystemException exception, IPlaybackContext context)
       at Microsoft.VisualStudio.TestTools.UITesting.Playback.MapAndThrowException(SystemException exception, String actionName, UITestControl uiControl)
       at Microsoft.VisualStudio.TestTools.UITesting.Playback.MapAndThrowException(SystemException exception, String actionName, Object parameterValue, UITestControl uiControl)
       at Microsoft.VisualStudio.TestTools.UITesting.UITestControl.SetPropertyValue(String propertyName, Object propertyValue)
       at Microsoft.VisualStudio.TestTools.UITesting.UITestControl.SetProperty(String propertyName, Object value)
       at Microsoft.VisualStudio.TestTools.UITesting.WpfControls.WpfEdit.set_Text(String value)

  InnerException: System.Runtime.InteropServices.COMException
       Message=Exception from HRESULT: 0xF004F006
       Source=Microsoft.VisualStudio.TestTools.UITest.Playback
       ErrorCode=-268111866
       StackTrace:
            at Microsoft.VisualStudio.TestTools.UITest.Playback.Engine.IScreenElement.SetValueAsEditBox(String bstrNewValue, Int32 nSetValueAsEditBoxFlag)
            at Microsoft.VisualStudio.TestTools.UITest.Playback.ScreenElement.SetValueAsEditBox(String value, Boolean isEncoded, Int32 flag)
            at Microsoft.VisualStudio.TestTools.UITest.Playback.ScreenElement.SetValueAsEditBox(String value, Boolean isEncoded)
            at Microsoft.VisualStudio.TestTools.UITesting.TechnologyElementPropertyProvider.SetValueAsEditBox(UITestControl uiControl, String value, Boolean isEncoded, Boolean useCopyPaste)
            at Microsoft.VisualStudio.TestTools.UITesting.WpfPropertyProvider.SetEditProperty(String propertyName, Object value)
            at Microsoft.VisualStudio.TestTools.UITesting.WpfPropertyProvider.SetPropertyValue(UITestControl uiControl, String propertyName, Object value)
            at Microsoft.VisualStudio.TestTools.UITesting.UITestPropertyProvider.SetPropertyValueWrapper(UITestControl uiControl, String propertyName, Object value)
            at Microsoft.VisualStudio.TestTools.UITesting.UITestControl.SetPropertyValue(String propertyName, Object propertyValue)
       InnerException: 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-15T04:58:27.973

此问题与 IE 有关。您可能需要通过卸载更新版本的 IE 来临时考虑解决方法。
为此，
*（1）打开关于 IE*
*（2）单击“自动卸载 IE 新版本更新”复选框*
*（3）单击确定。*
此新版本 (KBxxxxxxxx) 作为已安装更新的 Windows 安全更新出现。您可能需要暂时考虑解决方法，但请注意您将卸载重要的安全更新。

# android - 如何从数据库中检索图像路径并将其设置为 imageview

> ID：13330149
> 
> 赞同：0
> 
> 时间：2012-11-11T10:04:28.017
> 
> 标签：android

我在 res/drawable 文件夹中有图像。例如，我在数据库中有这些图像的 ID，R.drawable.a 是数据库中的一个值。

任务是将该路径中的图像设置为imageview ...

我可以从数据库中检索值 (R.drawable.a) 作为字符串，但是如何将其设置为 imageview？

请发布示例代码以防万一...谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T14:37:16.667

我得到了答案...

如果我们将它们存储为“R.drawable.filename”，则很难处理从数据库中检索到的字符串。更好的方法是将文件名存储在数据库中。然后，当您从数据库中检索文件名作为字符串时，您可以使用以下代码将其设置为图像...

假设我检索到的文件名是“b”让我的包名是“xyz”

```
String test = "b";    
int id = getResources().getIdentifier("xyz:drawable/" + test, null, null);  
imgAlphabet.setImageResource(id); 
```

这会将您的可绘制文件夹中的图像“b”设置为图像视图..

希望这可以帮助！！！

# android - 如何清除android中的所有活动？

> ID：13330150
> 
> 赞同：0
> 
> 时间：2012-11-11T10:04:50.573
> 
> 标签：android, android-layout, android-intent, android-emulator, android-widget

我有一个主要活动“仪表板”，其中包含一个包含主屏幕图标和退出按钮的操作栏，我从仪表板屏幕转到活动 A -> 活动 B -> 活动 C。现在在 C 上，我单击操作栏仪表板图标，它会在仪表板屏幕上显示给我。

现在我从仪表板屏幕转到活动 E -> 活动 G-> 活动 H。从 H i 按退出按钮，它来到 C 屏幕。当再次单击退出时，我通过我退出应用程序。

为什么退出应用程序需要按两次退出按钮。

在主屏幕图标上：-

```
 public void onClickHome(View view){

    final Intent intent = new Intent(getBaseContext(), Dashboard.class);
    intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);    
    intent.setFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP);   
    getBaseContext().startActivity(intent);     

    //goDashboard();
                           } 
```

ON 退出按钮：-

```
 AlertDialog.Builder alert = new AlertDialog.Builder(this);      
    alert.setTitle(getString(R.string.logoutDialogTitle));
    alert.setMessage(getString(R.string.logoutDialogMessage));
    final OnlineBookApp app = (OnlineBookApp) getApplicationContext();

    alert.setPositiveButton(getString(R.string.logoutDialogCancel), new
              DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int whichButton) {      
                               }
                          });

    alert.setNegativeButton(getString(R.string.logoutDialogOk),
            new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int whichButton) {  
            //finish();
            //stopService(new Intent(getBaseContext(), DatabaseSyncService.class));

                      //                
                  //    moveTaskToBack(true);
                 ////  stopService(new Intent(getBaseContext(),
                        DatabaseSyncService.class));
                    //  System.runFinalizersOnExit(true);
                    //  android.os.Process.killProcess(android.os.Process.myPid());
                      //moveTaskToBack(true);
                  //    finish();
                       //   app.SetIsExit(true);
    Intent intent = new Intent(getApplicationContext(), Dashboard.class);
            intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
            intent.setFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP);
            intent.putExtra("EXIT", true);
            startActivity(intent);

                            }
                                         });
    alert.setNeutralButton(getString(R.string.logoutDialogLogout), new
              DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int whichButton) {      
            //finish();
            //stopService(new Intent(getBaseContext(),
                                DatabaseSyncService.class));
            //finish();
            //app.SetIsExit(true);
            //stopService(new Intent(getBaseContext(),
                                  DatabaseSyncService.class));
            app.logout();
            Intent intent = new Intent(getApplicationContext(),
                               Dashboard.class);
            intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP); 
            intent.setFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP);
            intent.putExtra("EXIT", true);
            startActivity(intent);

                              }
                               });

                    alert.show(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T10:09:35.317

如果我理解得很好，你应该通过使用来解决这个问题`finish()`。

看看[这篇文章](https://stackoverflow.com/questions/12621809/clear-activity-stack-in-android)可能会有所帮助。

# mysql - 如何计算MySQL中时间间隔联合内的秒数

> ID：13330151
> 
> 赞同：0
> 
> 时间：2012-11-11T10:04:56.203
> 
> 标签：mysql, set, intervals

考虑一个保存带有时间戳的记录`start`的表。任何人都可以提出一个 SQL 语句来计算表中所有时间间隔（从到）`end`的联合秒数吗？请注意：时间间隔可能有重叠！`start``end`

# javascript - jquery数据表发布

> ID：13330156
> 
> 赞同：0
> 
> 时间：2012-11-11T10:05:26.357
> 
> 标签：javascript, jquery, datatables

我在一页中有三个选项卡，我使用 jquery 数据表。似乎它们相互影响。我希望在单击选项卡时删除其他选项卡的所有效果。我已经在下面进行了测试，它使它变得更好，但效果并没有完全消除。

```
$( '#inbox' ).empty();
 $( '#inbox' ).html(""); 
```

不是完全释放数据表的方法吗？编辑：这是我的 base.html，其中包含 4 个选项卡，其中三个使用数据表：

```
<script type="text/javascript">

        $( document ).ready( function() {            
            $("tr td input[type='checkbox']").live('change',    function() {
                $(this).parents("tr").toggleClass('row_selected');
                updateActions();
            });            
            $( '#inbox' ).html( '{% trans "waiting ..." %}' ).load( 'inbox/');
           $( '#inbox_list' ).click( function() {
               $( '#inbox' ).html("");
               $( '#outbox' ).html("");
               $( '#compose' ).html("");
               $( '#trash' ).html("");
               $( '#inbox' ).html( '{% trans "waiting ..." %}' ).load( 'inbox/');
            });
            $( '#outbox_list' ).click( function() {
                $( '#inbox' ).html("");
                $( '#outbox' ).html("");
                $( '#compose' ).html("");
                $( '#trash' ).html("");
                $( '#outbox' ).html( '{% trans "waiting ..." %}' ).load( 'outbox/');
            });
            $( '#compose_list' ).click( function() {
                $( '#inbox' ).html("");
                $( '#outbox' ).html("");
                $( '#compose' ).empty();
                $( '#trash' ).html("");
                $( '#compose' ).html( '{% trans "waiting ..." %}' ).load( 'compose/');
            });
            $( '#trash_list' ).click( function() {
                $( '#inbox' ).html("");
                $( '#outbox' ).html("");
                $( '#compose' ).html("");
                $( '#trash' ).html("");
                $( '#trash' ).html( '{% trans "waiting ..." %}' ).load( 'trash1/');
            });
        });
</script>

<ul class="tabber">
        <li><a id="inbox_list" href="#inbox">{% trans "inbox" %}</a> </li>
        <li><a id="outbox_list" href="#outbox">{% trans "sent" %}</a> </li>
        <li><a id="compose_list" href="#compose">{%  trans "compose" %}</a> </li>
        <li><a id="trash_list" href="#trash">{%  trans "trash" %}</a> </li>
</ul>
            <div class="clear"></div>
            <div id="inbox" class="tabContent">
                loading...
            </div>
            <div id="outbox" class="tabContent">
                loading...
            </div>
            <div id="compose" class="tabContent">
                loading...
            </div>
            <div id="trash" class="tabContent">
                loading...
            </div> 
```

我的三个标签中有这个脚本：

```
<script type="text/javascript">
        // =======================================================================
        // DataTables and action buttons
        // =======================================================================
        var oTable;
        var action = 'class="action fg-button ui-button ui-state-default ui-state-disabled ui-corner-all"';
        var addActionButton = function (action) {
            $('#DataTables_Table_0_length').before(action);
        };
        var updateActions = function () {
            if ($('tr.row_selected').length > 0) {
                $('.action:not(.always)').removeClass('ui-state-disabled')
            }
            else {
                $('.action:not(.always)').addClass('ui-state-disabled');
            }
        };
        var selectNone = function () {
            $('input#select-box').prop('checked', false);
            $('tr').find('input[type="checkbox"]:checked').prop('checked', false).change();
        };
        var selectAll = function () {
            $('input#select-box').prop('checked', true);
            $('tr').find('input[type="checkbox"]:not(:checked)').prop('checked', true).change();
        };
        $(function() {
            oTable = $("table.messages").dataTable({
                "aoColumnDefs": [
                    { "bSortable": false, "sWidth": 0, "aTargets": [ 0 ] },
                    { "sWidth": "160px", "aTargets": [ 3,1 ] }
                ],
                "bJQueryUI": true,
                "bProcessing": true,
                "bServerSide": true,
                "sAjaxSource": "trash/",
                "sPaginationType": "full_numbers",
                "sDom": '<"#filter"f><"clear"><"H"lr><"#htool">t<"F"ip>',
                "oLanguage": {
                    "sZeroRecords": '{% trans "No messages match your filter" %}',
                    "sProcessing": '{% trans "Processing" %}',
                    "sSearch": '{% trans "Search" %}',
                    "sInfo": '{% trans "Displaying _START_ to _END_ from _TOTAL_ messages" %}',
                    "sInfoFiltered": '{% trans " - filtered from _MAX_ messages" %}',
                    "sInfoEmpty": '{% trans "Nothing to desplay" %}',
                    "sLoadingRecords": '{% trans "Loading records" %}',
                    "sLengthMenu": '{% trans "Display _MENU_ messages" %}',
                    "sEmptyTable": '{% trans "Nothing to desplay" %}',
                    "oPaginate": {
                        "sFirst": '{% trans "First" %}',
                        "sLast": '{% trans "Last" %}',
                        "sPrevious": '{% trans "Previous" %}',
                        "sNext": '{% trans "Next" %}'
                    }
                }
            });

            $("tr td input[type='checkbox']").live('change',    function() {
                $(this).parents("tr").toggleClass('row_selected');
                updateActions();
            });

            addActionButton('<input type="checkbox" id="select-box">');
            $('input#select-box').change(function() {
                if($('input#select-box:checked').length > 0){
                    selectAll();
                }
                else {
                    selectNone();
                }
            });

            addActionButton('<a href="#" id="refresh" class="always action fg-button ui-button ui-state-default ui-corner-all">{% trans "refresh " %}</a>');
            $('a#refresh').click(function() {
                selectNone();
                updateActions();
                oTable.fnDraw();
                return false;
            });
        });
    </script> 

<table class="messages">
    <thead>
        <tr><th></th><th>{% trans "Sender" %}</th><th>{% trans "Subject" %}</th><th>{% trans "Date" %}</th></tr>
    </thead>
    <tbody>
    </tbody>
</table></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T10:19:52.110

将同一类添加到您的 3 个表中

```
<table class="data_tables" ...> 
```

..

和jQuery：

```
 $('.data_tables').html(""); 
```

或者

```
$('.data_tables').hide(); 
```

或（如果你想要效果）

```
$('.data_tables').fadeOut(1000); // 1000 is the millisecond, 1000 = 1 second, you can change it. 
```

**另一种解决方案**是制作包装 3 个表格的 div，然后使用：`html("")`or `hide()`or `fadeOut(number)`..

# entity-framework - EF 代码优先中的这种多对多关系有什么问题？

> ID：13330162
> 
> 赞同：2
> 
> 时间：2012-11-11T10:06:06.573
> 
> 标签：entity-framework, foreign-keys, code-first, relationship

我的数据库中有这些架构：

```
Tb1: { Id:int , NameTb1:varchar(50) }
Tb2: { Id:int , NameTb2:varchar(50) }
Tb1Tb2 { Tb1Id:int , Tb2Id:int } 
```

显然`Tb1Tb2`是一个关系表，我想在 EF 代码优先中定义一个多对多关系。

这些是实体类：

```
public class Tb1 
{
   public Tb1()
   {
       ListTb2 = new List<Tb2>();
   }
   public int Id { get; set; }
   public string NameTb1 { get; set; }

   public virtual ICollection<Tb2> ListTb2 { get; set; }
}

public class Tb2 
{
   public Tb2()
   {
       ListTb1 = new List<Tb1>();
   }
   public int Id { get; set; }
   public string NameTb2 { get; set; }

   public virtual ICollection<Tb1> ListTb1 { get; set; }
} 
```

和映射：

```
 public class Tb1Map : EntityTypeConfiguration<Tb1>
 {
    public Tb1Map()
    {
        this.HasKey(x => x.Id);

        this.HasMany(x => x.ListTb2)
            .WithMany(xx => xx.ListTb1)
            .Map
            (
                x =>
                    {
                        x.MapLeftKey("Tb1Id");
                        x.MapRightKey("Tb2Id");
                        x.ToTable("Tb1Tb2");
                    }
            );     
    }
}

public class Tb2Map : EntityTypeConfiguration<Tb2>
{
    public Tb2Map()
    {
        this.HasKey(x => x.Id);
    }
} 
```

当我在我的应用程序中使用它时：

```
var sv1 = new TableService<Tb1>(_uow);
var sv2 = new TableService<Tb2>(_uow);

var t1 = new Tb1 { NameTb1 = "T111" };
sv1.Add(t1);
//var res1= _uow.SaveChanges();

var t2 = new Tb2 { NameTb2 = "T222" };
sv2.Add(t2);
//var res2 = _uow.SaveChanges();

t1.ListTb2.Add(t2);
var result = _uow.SaveChanges(); 
```

我收到此错误：

> *保存不为其关系公开外键属性的实体时发生错误。EntityEntries 属性将返回 null，因为无法将单个实体标识为异常源。通过在实体类型中公开外键属性，可以更轻松地在保存时处理异常。有关详细信息，请参阅 InnerException。*

内部例外是：

> *INSERT 语句与 FOREIGN KEY 约束“FK_Tb1Tb2_Tb2”冲突。冲突发生在数据库“dbTest”、表“dbo.Tb2”、列“Id”中。*

为什么我会收到此错误？解决方案是什么？tnx

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T11:07:30.250

我删除

```
sv2.Add(t2); 
```

它奏效了

# android - 使用 GCM 和 ASP.net 发送数据

> ID：13330170
> 
> 赞同：1
> 
> 时间：2012-11-11T10:07:18.803
> 
> 标签：android, asp.net, vb.net

我有以下代码应该使用 Google Cloud Messaging Technology 将数据从在 asp.net (VB.Net) 中开发的 Web 应用程序发送到 android 设备，但我不断收到此错误：远程服务器返回错误：(401) 未经授权。

代码如下：

```
Dim regID As String = "REG_ID_ that i got when I developed the Clint side of this technology"
Dim request As WebRequest = WebRequest.Create("https://android.googleapis.com/gcm/send")
request.Method = "POST"
request.ContentType = "application/x-www-form-urlencoded"
request.Headers.Add("Authorization:Here_I_Provided_the_Server_API_Key")
Dim collapsKey = Guid.NewGuid.ToString("N")
Dim postdata As String = regID + TextBox1.Text + collapsKey
Dim byteArray As Byte() = Encoding.UTF8.GetBytes(postdata)
request.ContentLength = byteArray.Length
Dim dataStream As Stream = request.GetRequestStream
dataStream.Write(byteArray, 0, byteArray.Length)
dataStream.Close()
Dim resposne As WebResponse = request.GetResponse
Dim dataresponse As Stream = resposne.GetResponseStream
Dim reader As New StreamReader(dataresponse)
Dim sResponseFromServer As String = reader.ReadToEnd
Label1.Text = sResponseFromServer
reader.Close()
dataresponse.Close()
resposne.Close() 
```

任何想法我该如何解决这个问题。

问候

胡萨姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T12:21:37.547

也许代替

```
"Authorization:Here_I_Provided_the_Server_API_Key" 
```

你应该试试

```
"Authorization: key=Here_I_Provided_the_Server_API_Key" 
```

还要确保您在处理 GCM 请求的应用程序端具有正确的发件人 ID。

# django - IIS 上 win32com Dispatch 的提升权限

> ID：13330171
> 
> 赞同：3
> 
> 时间：2012-11-11T10:07:21.050
> 
> 标签：django, iis, windows-server-2008, dcom, win32com

我正在尝试使用 win32com 和 Microsoft Excel 在 IIS 上执行一些批处理操作。我想用 DCOM 打开一个 excel 文件，对其进行操作，然后将其保存为 pdf。以下代码在我的开发机器（64 位 windows 7）上运行良好。

```
# views.py
class ConvertFileView(View):
    def get(self,request):
        """Convert the selected file"""
        output = "c://docs/somefile.pdf"
        input = "c://docs/input.xlsx"

        #Open excel and open input.xlsx
        excel = win32com.client.gencache.EnsureDispatch('Excel.Application')
        excel.DisplayAlerts = False
        excel.Visible = False
        workbook = excel.Workbooks.Open(input)

        # File manipulation here
        workbook.ExportAsFixedFormat(Type=0,Filename=output)
        excel.Quit()
        del excel

        return HttpResponse("Done") 
```

但是，当我通过 IIS 加载网页时，出现以下错误。

```
com_error at /converter/convert/114/ 
(-2147024891, 'Access is denied.', None, None)

Traceback:
C:\GoogleDrive\websites\...\python\apps\converter\views.py in get
    141\. excel = win32com.client.gencache.EnsureDispatch('Excel.Application')
C:\python27\lib\site-packages\win32com\client\__init__.py in Dispatch 
    95\. dispatch, userName =  dynamic._GetGoodDispatchAndUserName(dispatch,userName,clsctx)
C:\python27\lib\site-packages\win32com\client\dynamic.py in _GetGoodDispatchAndUserName 
    114\. return (_GetGoodDispatch(IDispatch, clsctx), 
C:\python27\lib\site-packages\win32com\client\dynamic.py in _GetGoodDispatch 
    IDispatch = pythoncom.CoCreateInstance(IDispatch, None, clsctx, pythoncom.IID_IDispatch) 
```

这在我的开发机器上运行良好。当我在 Windows Server 2008 上通过 IIS 加载网页时会发生此错误。我假设 python 没有足够的权限在 IIS 上启动 excel。无论如何我可以授予 python/DCOM 权限来运行 excel 吗？

# java - 挑战：替换反射

> ID：13330173
> 
> 赞同：-1
> 
> 时间：2012-11-11T10:07:30.553
> 
> 标签：java, reflection, javafx

写了几个[javafx.scene.control.TableView](http://docs.oracle.com/javafx/2/api/javafx/scene/control/TableView.html)后，看到代码很繁琐，我把这个实用程序做成了静态函数：

```
public class TableViewHelper {
   public static <T,F> void addColumn(
      TableView<T>     table,
      TableColumn<T,F> column,
      final String     fieldName,
      boolean          sortable,
      double           width      )
   {
      column.setCellValueFactory(
         new Callback< CellDataFeatures<T,F>, ObservableValue< F >>(){
            @Override public ObservableValue< F > call( CellDataFeatures<T,F> p ){
               T t = p.getValue();
               ObservableValue< F > value = null;
/*HERE IT IS*/ Class<T> tc = (Class<T>)t.getClass();
/*HERE IT IS*/ try { value = (ObservableValue<F>)(tc.getDeclaredField( fieldName ).get( t )); }
/*HERE IT IS*/ catch( Throwable x ){ x.printStackTrace(); }
               return value;
            }});
      column.setSortable( sortable );
      column.setPrefWidth( width );
      table.getColumns().add( column );
   }
} 
```

表行类：

```
public class ChatMessage {
   public ChatMessage( String sender, String message ) {
      _date   .set( new Date());
      _sender .set( sender );
      _message.set( message );
   }

   final SimpleObjectProperty< Date > _date    = new SimpleObjectProperty<>();
   final SimpleStringProperty         _sender  = new SimpleStringProperty();
   final SimpleStringProperty         _message = new SimpleStringProperty();
} 
```

用法：

```
public class ChatView
   extends
      BorderPane
{
   ChatView() {
      TableViewHelper.addColumn(
         _view, new TableColumn<ChatMessage,Date  >( "Date"    ), "_date"   ,  100.0 );
      TableViewHelper.addColumn(
         _view, new TableColumn<ChatMessage,String>( "Sender"  ), "_sender" ,  100.0 );
      TableViewHelper.addColumn(
         _view, new TableColumn<ChatMessage,String>( "Message" ), "_message", 1200.0 );
      setCenter( _view );
   }
} 
```

使用反射（由“这里是”注释标记）通过它们的 Java 字段名称获取字段的值是可行的，**但我希望不这样做，而不在“使用”部分添加代码。**

**您能否提出其他方法（使用代码），而不使用反射？**

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T22:36:21.230

您可以创建一个接口

```
public interface Property<T, X>  {
    public X get(T object);
    public void set(T object, X value);
} 
```

该接口`Property`可以在您当前使用反射的地方使用：

```
public static <T,F> void addColumn(
        TableView<T> table,
        TableColumn<T, F> column,
        final Property<T, ObservableValue<F>> property,
        boolean sortable,
        double width)
{
   column.setCellValueFactory(
      new Callback< CellDataFeatures<T,F>, ObservableValue< F >>(){
         @Override public ObservableValue< F > call( CellDataFeatures<T,F> p ){
            T t = p.getValue();
            return property.get(t);
         }
      });
   column.setSortable( sortable );
   column.setPrefWidth( width );
   table.getColumns().add( column );
} 
```

好吧，要么这个，要么我遗漏了一些说这不能用 JavaFX 完成的东西。

# php - 无法插入表 - mysql中的外键约束问题

> ID：13330175
> 
> 赞同：1
> 
> 时间：2012-11-11T10:07:31.987
> 
> 标签：php, mysql, foreign-keys, foreign-key-relationship

我有两个表 main_jobs 和 sub_jobs，结构如下：

```
$query="create table if not exists main_jobs (
            id int not null auto_increment, primary key(id),
            industry int(3), 
            company_name varchar(255),
            job_title varchar(255),
            email varchar(255),
            website varchar(255),
            introduction text not null,
            application_details text,
            advert_date date,
            expiry_date date,
            upload_date date,
            no_deadline int(1) default 0,
            logo  varchar(255),
            featured varchar(20),
            source varchar(10) default 'admin',
            email_status int default 0,
            views int(11) default 1,
            short_url varchar(100),
            tags varchar(255), 
            FOREIGN KEY (industry) REFERENCES industry (id))";
    if(mysql_query($query,$link)){echo "main_jobs created<br>";} else{ die(mysql_error()); }

    $query="create table if not exists sub_jobs (
            id int not null auto_increment, primary key(id),
            parent_id int(11) not null, FOREIGN KEY (parent_id) REFERENCES main_jobs (id),
            title varchar(255),
            description text not null,
            category int (3), FOREIGN KEY (category) REFERENCES category (id),
            job_type varchar(20),
            job_level varchar(50),
            min_qualification varchar(50),
            min_experience int(3),
            max_experience int(3),
            min_salary int(11),
            max_salary int(11),
            show_salary int(1) default 1,
            denomination varchar(10),
            views int(11) default 1,
            short_url varchar(100),
            email varchar(255),
            website varchar(255))";
    if(mysql_query($query,$link)){echo "sub_jobs created<br>";} else{ die(mysql_error()); } 
```

我想插入记录，但它显示了这个错误：

```
Cannot add or update a child row: a foreign key constraint fails (`myjobmag_db`.`sub_jobs`, CONSTRAINT `sub_jobs_ibfk_1` FOREIGN KEY (`parent_id`) REFERENCES `main_jobs` (`id`)) 
```

这些是 mysql 查询，已经盯着它们看了好几个小时，但无法确定问题所在：

插入 main_jobs（成功运行）

```
$resultobj=otherquery("insert into main_jobs(industry, company_name, job_title, email, website, introduction, application_details, advert_date, expiry_date, upload_date, no_deadline, logo) values(?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)", "ssssssssssss", array($industry, $company_name, $job_name, $email, $website, $profile, $application, $advert_date, $expiry_date, $date_uploaded, $no_deadline, $logo)); 
```

我选择最后一个插入的 id（确认它存在于 main_jobs 表中，这是由于错误而手动执行的）并运行 insert into sub_jobs

```
$parent= $resultobj['obj']->insert_id;
mysql_query("insert into sub_jobs(id, parent_id, title, description, category, job_type, job_level, min_qualification, min_experience, max_experience, min_salary, max_salary, show_salary, denomination, email, website) values('', $parent, '$subtitle', '$description', '$category', '$type', '$level', '$min_qualification', '$min_experience', '$max_experience', '$min_salary', '$max_salary', '$show_salary', '$denomination', '$sub_email', '$sub_website')", $link) or die(mysql_error($link)); 
```

在我上次的测试中，main_jobs 表中的 id 是 2616，它确实存在，但我得到了一个错误。

请协助！

# android - 在没有 ScaleGestureDetector 的情况下检测比例和翻译手势

> ID：13330176
> 
> 赞同：0
> 
> 时间：2012-11-11T10:07:33.157
> 
> 标签：android, scale, multi-touch, gesture, translate

我尝试为 API 级别 7 实现多点触控手势检测。这意味着我没有 ScaleGestureDetector。目前我有这样的东西，但效果不好，我对它有更多的开放性问题，而不是完全理解：

```
public boolean onTouchEvent(MotionEvent ev) 
{
   final int action = ev.getAction();
   switch (action & MotionEvent.ACTION_MASK) // why mask it with ACTION_MASK?
   {
      case MotionEvent.ACTION_DOWN: 
      {
         mLastTouchX=ev.getX();
         mLastTouchY=ev.getY();
         mActivePointerId = ev.getPointerId(0);
         break;            
      }
     case MotionEvent.ACTION_POINTER_DOWN: 
     {
        mLastTouchX2=ev.getX();
        mLastTouchY2=ev.getY();
        if (ev.getPointerCount()>1)
         mActivePointerId2 = ev.getPointerId(1);
        break;
     }
     case MotionEvent.ACTION_MOVE: 
     {
        int   pointerIndex;
        float x=0.0f,y=0.0f;

        try
        {
           if ((mActivePointerId!=INVALID_POINTER_ID) || (mActivePointerId2!=INVALID_POINTER_ID))
           {
              // get one of the active pointers - unfortunately here I'm not sure which one is the active one so I only can guess
              pointerIndex= ev.findPointerIndex(mActivePointerId);
              x= ev.getX(pointerIndex);
              y= ev.getY(pointerIndex);
           }
           if ((mActivePointerId!=INVALID_POINTER_ID) && (mActivePointerId2!=INVALID_POINTER_ID))
           {
              float d1,d2;

              pointerIndex = ev.findPointerIndex(mActivePointerId2);
              if (pointerIndex<0) return false;
              float x2 = ev.getX(pointerIndex);
              float y2 = ev.getY(pointerIndex);

              d1=android.util.FloatMath.sqrt((x-x2)*(x-x2)+(y-y2)*(y-y2));
              d2=android.util.FloatMath.sqrt((mLastTouchX-mLastTouchX2)*(mLastTouchX-mLastTouchX2)+
                                  (mLastTouchY-mLastTouchY2)*(mLastTouchY-mLastTouchY2));                  

              if ((d1>0) && (d2>0)) // seems to be a scale gesture with two pointers
              {
                 float w,h,s;

                 transOffsetX=0.0f;
                 transOffsetY=0.0f;
                 s=d1/d2;
                 mScaleFactor*=s;
                 matrix.postScale(s,s);
                 w=(scrWidth-(scrWidth*s))/2.0f;
                 h=(scrHeight-(scrHeight*s))/2.0f;

                 matrix.postTranslate(w,h);
                 imgOffsetX+=w;
                 imgOffsetY+=h;                                    
              }

              mLastTouchX2 = x2;
              mLastTouchY2 = y2;
           }
           else if (mScaleFactor==1.0) // seems to be a translate gesture with only one pointer
           {
              mScaleFactor=1.0f;
              transOffsetX+=(x-mLastTouchX);
              transOffsetY+=(y-mLastTouchY);
              matrix.setTranslate(transOffsetX,transOffsetY);
           }

           if ((mActivePointerId!=INVALID_POINTER_ID) || (mActivePointerId2!=INVALID_POINTER_ID))
           {             
              mLastTouchX = x;
              mLastTouchY = y;
           }
        }
        catch (ArrayIndexOutOfBoundsException aioobe)
        {
           // this is really strange, this exception can be caused by
           // pointerIndex= ev.findPointerIndex(mActivePointerId);
           // x= ev.getX(pointerIndex);
           // above which seems to be a Android bug?
        }
        break;
     }
     case MotionEvent.ACTION_UP: 
     case MotionEvent.ACTION_POINTER_UP: 
     {
        breakMapThread=true;
        mActivePointerId = INVALID_POINTER_ID;
        mActivePointerId2 = INVALID_POINTER_ID;

        // gestrue seems to be finished so trigger update of the view here
        ...

        break;
     }
  }      
  return true; 
```

}

整个工作真的很糟糕。缩放手势会导致较高的额外翻译，单击视图也会导致翻译并且翻译不是很准确。除此之外，我还发现了一些似乎从未使用过的运动事件常量 ACTION_POINTER_1/2/3_DOWN/UP。所以我绝对不确定我的整个分配表 _DOWN/_UP 到指针 1 和 2 是否正确。

有什么想法、提示和技巧可以让这个东西正常工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T12:13:51.107

一种想法是找到 ScaleGestureDetector 的来源并将其包含到您的项目中。但是存在问题：有时系统会检测到单击和长按（尤其是当手指超出窗口边界时）。

# android - ORMLite 和继承（适用于 Android）

> ID：13330177
> 
> 赞同：0
> 
> 时间：2012-11-11T10:08:06.103
> 
> 标签：android, inheritance, persistence, ormlite

我想保留一些必须实现这样的接口的类：

```
@DatabaseTable(tableName = "conditions")
abstract public class Condition implements Configurable {

    @DatabaseField(id = true, foreign = true)
    private Accion belong_to;

    @DatabaseField
    private HashMap<String, String> config = new HashMap<String, String>();

    @DatabaseField
    protected String className = this.getClass().getName();

    protected final HashMap<String, String> getConfig() {/* */}
    protected final void setConfig(HashMap<String, String> config) {/* */}
    protected void setConfig(String string, String value) {/* */}
    abstract public String getName();
    abstract public int getImageResource();
    abstract public String getShortDesc();
} 
```

问题是，我必须在`Condition`创建它们时实例化正确的孩子（因为 Condition 本身是抽象的）。

在编写 DAO 时有什么办法可以做到这一点（为此我记录了 className）？或者我应该以任何其他方式做到这一点？

我的`Accion`对象应该`Condition`附有一个对象。Accion 也是持久化的，所以获取条件的方法也是通过 Dao。

* * *

**更新：**我现在使用`public interface Configurable extends Serializable { /*...*/ }`Java 可以序列化 Configurable 对象，并将其存储在 Accion 对象中。

那行得通吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T08:50:25.310

存储的类不应该是抽象类，`ClassInstantiationException`因为类反射用于实例化检索到的记录。

[这里](https://stackoverflow.com/questions/11569751/how-do-you-use-ormlite-with-an-abstract-class/11569794#comment21389971_11569794)有一个使用包装类发布的解决方法，但到目前为止我的方法是将“类”（在我的情况下为 serverType）存储为一个字段，并且在检索基类时将基类传递给所需子类的构造函数并复制它的属性。

**用法**

```
 Dao<BaseConnectionInfo, Integer> connections = DatabaseManager
                .getInstance(this).getDatabaseHelper()
                .getDao(BaseConnectionInfo.class);

        BaseConnectionInfo connection = connections.queryForId(1);

        if (connection.isServerType(BaseConnectionInfo.SERVER_TYPE_MSSQL)) {
            connection = new MsSqlConnectionInfo(connection);
        } else if (connection
                .isServerType(BaseConnectionInfo.SERVER_TYPE_MYSQL)) {
            connection = new MySqlConnectionInfo(connection);
        } 
```

**基本连接信息**

```
@DatabaseTable(tableName = "connections")
public class BaseConnectionInfo implements SqlDriverInterface {

    public static final String TAG = "BaseConnection";

    public static final String SERVER_TYPE_MYSQL = "MYSQL";
    public static final String SERVER_TYPE_MSSQL = "MSSQL";
    public static final String SERVER_TYPE_SYBASE = "SYBASE";
    public static final String SERVER_TYPE_POSTGRESQL = "POSTGRESQL";

    @DatabaseField(generatedId = true)
    private int id;

    @DatabaseField
    protected String serverType;

    @DatabaseField
    private String name;

    ...

    public boolean isServerType(String serverType) {
        return this.serverType.equals(serverType);
    }

    ...
} 
```

**MySqlConnectionInfo**

```
public class MySqlConnectionInfo extends BaseConnectionInfo {

    public MySqlConnectionInfo() {
        // FOR ORMLITE
        serverType = SERVER_TYPE_MYSQL;
    }

    /**
     * Constructor used to convert {@link BaseConnectionInfo} to
     * {@link MySqlConnectionInfo}
     * 
     * @param baseConnectionInfo
     */
    public MySqlConnectionInfo(BaseConnectionInfo b) {
        setId(b.getId());
        setName(b.getName());
        setHost(b.getHost());
        setOptionsJson(b.getOptionsJson());
    }
    ...
} 
```

**MsSqlConnectionInfo**

```
public class MsSqlConnectionInfo extends BaseConnectionInfo {

    public MsSqlConnectionInfo() {
        // FOR ORMLITE
        serverType = SERVER_TYPE_MSSQL;
    }

    /**
     * Constructor used to convert {@link BaseConnectionInfo} to
     * {@link MsSqlConnectionInfo}
     * 
     * @param baseConnectionInfo
     */
    public MsSqlConnectionInfo(BaseConnectionInfo b) {
        setId(b.getId());
        setName(b.getName());
        setHost(b.getHost());
        setOptionsJson(b.getOptionsJson());
    }
    ...
 } 
```

# apache - HTACCESS - 应用一些简单的 mod_rewrite 规则

> ID：13330182
> 
> 赞同：0
> 
> 时间：2012-11-11T10:09:15.487
> 
> 标签：apache, .htaccess, mod-rewrite, url-rewriting

这很紧急。我需要一些 htaccess 规则的帮助。线索是当用户收到某事的答案时，真正的 url 将是 www.mydomain.com/results.html/sth 但他必须只能在他的浏览器中看到 www.mydomain.com/sth 并且当我将他重定向到家时页面 (www.mydomain.com/index.html) 的 url 只能是 www.mydomain.com。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T21:09:43.827

This should work:

```
RewriteEngine On
RewriteCond %{REQUEST_URI} !^/(results|index)\.html
RewriteCond %{REQUEST_URI} !^/?$
RewriteRule ^(.*)$ /results.html/$1

RewriteRule ^index\.html$ / [R=301,L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T10:44:54.153

将前 3 行代码替换为：

```
DirectoryIndex index.html 
```

默认情况下它应该可以工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T10:29:06.760

```
#this is for the www.yourdomain.com/index.html
RewriteRule ^$  index.html  [L]
RewriteRule ^/$  index.html [L]

#this is for the results
RewriteRule ^([^/]+)$  results.html?$1
RewriteRule ^([^/]+)/$ results.html?$1 
```

# ios - CSSMERR_TP_NOT_TRUSTED：WWDR 证书 - 此证书由未知机构签署

> ID：13330183
> 
> 赞同：3
> 
> 时间：2012-11-11T10:09:16.787
> 
> 标签：ios, xcode, macos, certificate

尝试为 iOS 设备构建我的项目时出现 CSSMERR_TP_NOT_TRUSTED 错误（但模拟器工作正常）。我尝试了系统默认修复无济于事，现在正在尝试添加 WWDR 证书的建议。

CSSMERR_TP_NOT_TRUSTED 错误日志：

```
CodeSign /Users/soroushhakami/Library/Developer/Xcode/DerivedData/pplats-fzoberbyssrcczboxhhyvkpfflhj/Build/Products/Debug-iphoneos/pplats.app
        cd /Users/soroushhakami/dev/pplatsIos
        setenv CODESIGN_ALLOCATE /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/codesign_allocate
        setenv PATH "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
        /usr/bin/codesign --force --sign 1934d5614330256a833582b123621542bdd8dcfe --resource-rules=/Users/soroushhakami/Library/Developer/Xcode/DerivedData/pplats-fzoberbyssrcczboxhhyvkpfflhj/Build/Products/Debug-iphoneos/pplats.app/ResourceRules.plist --entitlements /Users/soroushhakami/Library/Developer/Xcode/DerivedData/pplats-fzoberbyssrcczboxhhyvkpfflhj/Build/Intermediates/pplats.build/Debug-iphoneos/pplats.build/pplats.xcent /Users/soroushhakami/Library/Developer/Xcode/DerivedData/pplats-fzoberbyssrcczboxhhyvkpfflhj/Build/Products/Debug-iphoneos/pplats.app

    /Users/soroushhakami/Library/Developer/Xcode/DerivedData/pplats-fzoberbyssrcczboxhhyvkpfflhj/Build/Products/Debug-iphoneos/pplats.app: replacing existing signature/Users/soroushhakami/Library/Developer/Xcode/DerivedData/pplats-fzoberbyssrcczboxhhyvkpfflhj/Build/Products/Debug-iphoneos/pplats.app: CSSMERR_TP_NOT_TRUSTEDCommand /usr/bin/codesign failed with exit code 1 
```

**如果您不想全部阅读，则错误消息的最后一行**：`CSSMERR_TP_NOT_TRUSTEDCommand /usr/bin/codesign failed with exit code 1`

我所有的证书都有`" this certificate was signed by an unknown authority "`错误。但是 WWDR 证书*本身*就是`unknown authority`错误的基础，让我对如何解决这个问题一无所知。

我确实删除了所有证书，将 WWDR 安装在干净的钥匙串上，但错误仍然存​​在。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-10-03T05:15:02.440

您的钥匙串访问权限中可能有一个过期的 Apple Worldwide Developer Relations 证书颁发机构。如果是这样，您需要从系统中删除所有过期的副本，并在系统钥匙串中安装更新的证书。

1.  在终端，`security find-identity -p codesigning`
    *   获取输出的副本（尤其是过期的证书）以供以后比较
2.  [从https://developer.apple.com/support/certificates/expiration/](https://developer.apple.com/support/certificates/expiration/)下载最新`AppleWWDRCA.cer`证书
3.  打开钥匙串访问
4.  查看 | 显示过期证书
5.  检查登录钥匙串
    *   删除任何过期的 Apple 全球开发者关系证书颁发机构
6.  检查系统钥匙串
    *   删除任何过期的 Apple 全球开发者关系证书颁发机构
7.  选择系统钥匙串时
    *   文件 | 导入物品...
    *   选择下载`AppleDDRCA.cer`
8.  在终端中，重新运行`security find-identity -p codesigning`
    *   将结果与步骤 1 进行比较

# android - 在我的应用程序中有一个非常奇怪的 OutOf Memory 错误

> ID：13330188
> 
> 赞同：1
> 
> 时间：2012-11-11T10:09:49.037
> 
> 标签：android, android-layout, android-intent

我已经阅读了几乎所有关于 stackoverflow 的相关问题，但似乎与我遇到的问题无关。首先，我的应用程序包含大约 160 张图片。180 - 300KB，每个尺寸为 800 x 2000。现在在我的三星 Galaxy s2（4.0.3 版）上，我的应用程序运行良好，没有问题（一次测试大约 20 分钟），在我的 Galaxy Young 上（2.3.6 版） ）仍然像魅力一样工作（以相同的方式测试它）但是，在我的摩托罗拉 xoom 2 平板电脑 10.1 英寸（版本 4.0.4）上测试应用程序不到 2 分钟，它给了我 java.lang.OutOfMemory 错误。现在在一些线程上，我读取了 java.lang.OutOfMemoryError：位图大小超出了 VM 预算，但这与我无关，因为我刚刚收到 java.lang.OutOfMemoryError。这是我得到的错误。

```
11-11 10:00:33.266: E/AndroidRuntime(5390): FATAL EXCEPTION: main
11-11 10:00:33.266: E/AndroidRuntime(5390): java.lang.OutOfMemoryError
11-11 10:00:33.266: E/AndroidRuntime(5390):     at   android.graphics.BitmapFactory.nativeDecodeAsset(Native Method)
11-11 10:00:33.266: E/AndroidRuntime(5390):     at android.graphics.BitmapFactory.decodeStream  (BitmapFactory.java:520)
11-11 10:00:33.266: E/AndroidRuntime(5390):     at   android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:351)
11-11 10:00:33.266: E/AndroidRuntime(5390):     at android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:783)
11-11 10:00:33.266: E/AndroidRuntime(5390):     at android.content.res.Resources.loadDrawable(Resources.java:1954)
11-11 10:00:33.266: E/AndroidRuntime(5390):     at android.content.res.Resources.getDrawable(Resources.java:666)
11-11 10:00:33.266: E/AndroidRuntime(5390):     at android.widget.ImageView.resolveUri(ImageView.java:570)
11-11 10:00:33.266: E/AndroidRuntime(5390):     at android.widget.ImageView.setImageResource(ImageView.java:343)
11-11 10:00:33.266: E/AndroidRuntime(5390):     at com.example.sample.app.Samples$5.onClick(Samples.java:77)
11-11 10:00:33.266: E/AndroidRuntime(5390):     at android.view.View.performClick(View.java:3526)
11-11 10:00:33.266: E/AndroidRuntime(5390):     at android.view.View$PerformClick.run    (View.java:14149)
11-11 10:00:33.266: E/AndroidRuntime(5390):     at android.os.Handler.handleCallback (Handler.java:605)
11-11 10:00:33.266: E/AndroidRuntime(5390):     at android.os.Handler.dispatchMessage (Handler.java:92)
11-11 10:00:33.266: E/AndroidRuntime(5390):     at android.os.Looper.loop(Looper.java:137)
11-11 10:00:33.266: E/AndroidRuntime(5390):     at android.app.ActivityThread.main(ActivityThread.java:4697)
11-11 10:00:33.266: E/AndroidRuntime(5390):     at java.lang.reflect.Method.invokeNative(Native Method)
11-11 10:00:33.266: E/AndroidRuntime(5390):     at java.lang.reflect.Method.invoke(Method.java:511)
11-11 10:00:33.266: E/AndroidRuntime(5390):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:787)
11-11 10:00:33.266: E/AndroidRuntime(5390):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:554)
11-11 10:00:33.266: E/AndroidRuntime(5390):     at dalvik.system.NativeStart.main(Native Method) 
```

我已经让我的朋友在他的 10.1 英寸三星平板电脑上测试该应用程序（不确定他的版本），看看是否会出现同样的问题。还没有收到他的消息，但是一旦我这样做了，我会在这里发布结果。因此，如果他没有收到错误，我可以安全地假设它是我的平板电脑吗？还是我的应用在平板电脑上无法正常运行？

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T17:10:43.573

这只是您找到的解决方法。它不会在低内存设备上运行。您必须减小图像的大小以使用更少的内存。

这是android中的一个众所周知的问题，所以google了一下，你会发现很多线程解释如何在Android中处理位图

# java - 3 Android 应用程序中的活动

> ID：13330197
> 
> 赞同：0
> 
> 时间：2012-11-11T10:10:55.483
> 
> 标签：java, android, eclipse

我做了 2 个活动，并通过单击`Button`. 一切都很好...

但是，如果我添加第三个活动 - 没有任何效果 - 我既不能开始第二个活动，也不能开始第三个活动......

节目方案：

1.  第一个Activity有一个Button，用来启动第二个Activity
2.  第二个Activity有一个Button，用来启动第三个Activity

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T09:46:34.833

如果你写得正确，应该不会有问题。我建议快速浏览一下 Android 开发团队发布的培训指南中有关创建基本程序的教程。他们为您提供了如何制作第一个按钮的想法，只需将此方法添加到您的第二个按钮，而不是接收回文本。如上所述，我们需要更多详细信息，您还应该检查您的清单文件。当您向我们提供这些详细信息时，我们无法为您提供更多帮助。对不起。

# c# - 将文本框乘以一个值

> ID：13330200
> 
> 赞同：3
> 
> 时间：2012-11-11T10:11:22.797
> 
> 标签：c#, android-activity

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T10:16:19.543

问题是编译器将常量视为`Double`.
要修复错误本身，您可以将常量转换为十进制，如下所示：

```
decimal ans = num1 * (decimal)0.20 + num2 * (decimal)0.20; 
```

甚至更好（如评论中所述），您只需[指定常量的类型](https://stackoverflow.com/a/166762/1379664)

```
decimal ans = num1 * 0.20m + num2 * 0.20m; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T10:19:35.733

```
decimal ans = num1 * 0.20m + num2 * 0.20m; 
```

# javascript - 如何使用javascript动态创建复选框列表

> ID：13330202
> 
> 赞同：10
> 
> 时间：2012-11-11T10:11:53.303
> 
> 标签：javascript, html, dynamic, drop-down-menu, checkbox

更新：已根据 Dan 的评论更新了代码。

我正在处理的项目有问题。我需要根据在上面的选择下拉列表中选择的内容创建一个复选框列表。我想为此使用javascript。我能够根据上面的选择创建一个选择下拉列表，但客户需要复选框。我认为它基本上会以相同的方式完成，除了这次制作复选框，但我无法让它工作。我通常使用 php 进行编程，因此不太了解 javascript。这是我必须制作选择下拉列表的代码.... 将其设为复选框列表的最佳方法是什么？请注意，此代码已大大减少以使其易于阅读（此处仅重要部分）。

代码：

```
<!DOCTYPE html>
<html>
<head>
<script type="text/javascript">
    function populate(slct1,slct2){
var s1 = document.getElementById(slct1);
var s2 = document.getElementById(slct2);
s2.innerHTML = "";
if(s1.value == "Cat1"){
    var optionArray = ["Subcat1","Subcat1.1","Subcat1.2"];
} else if(s1.value == "Cat2"){
    var optionArray = ["Subcat2","Subcat2.1","Subcat2.2"];
} else if(s1.value == "Cat3"){
    var optionArray = ["Subcat3","Subcat3.1","Subcat3.3"];
}
for(var option in optionArray){
     if (optionArray.hasOwnProperty(option)) {
        var pair = optionArray[option];
        var newOption = document.createElement("option");
        newOption.value = pair;
        newOption.innerHTML = pair;
        s2.options.add(newOption);
    }
}
}
</script>
</head>
<body>
<h2>Dynamic Select Dropdown</h2>
<hr />
Choose a Category:
<select id="slct1" name="slct1" onchange="populate(this.id,'slct2')">
   <option value=""></option>
   <option value="Cat1">Cat1</option>
   <option value="Cat2">Cat2</option>
   <option value="Cat3">Cat3</option>
</select>
<hr />
   Choose Subcategory:
<select id="slct2" name="slct2"></select>
<hr />
</body>
</html> 
```

任何帮助将不胜感激，如果您在任何开发方面需要帮助，我会尽力报答。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-11T10:38:55.470

复选框是一个简单的输入元素，带有`type='checkbox'`. 所以你至少要准备两件事：一个用于描述盒子的文本节点和盒子本身。在这种情况下，最好使用一个`<label>`元素来包含前面提到的两件事：

```
// create the necessary elements
var label= document.createElement("label");
var description = document.createTextNode(pair);
var checkbox = document.createElement("input");

checkbox.type = "checkbox";    // make the element a checkbox
checkbox.name = "slct[]";      // give it a name we can check on the server side
checkbox.value = pair;         // make its value "pair"

label.appendChild(checkbox);   // add the box to the element
label.appendChild(description);// add the description to the element

// add the label element to your div
document.getElementById('some_div').appendChild(label); 
```

您必须为每一对执行上述步骤。请注意，您必须`<div id="some_div"></div>`在填充之前清除给定的：

```
// clear the former content of a given <div id="some_div"></div>
document.getElementById('some_div').innerHTML = ''; 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-11-11T10:39:42.870

动态创建复选框的过程确实比创建选择选项要复杂一些。您需要创建：

*   复选框
*   它的标签
*   可能还有一个`<br>`造型

这是代码的要点，完整的小提琴位于[http://jsfiddle.net/dandv/9aZQF/2/](http://jsfiddle.net/dandv/9aZQF/2/)：

```
for (var option in optionArray) {
    if (optionArray.hasOwnProperty(option)) {
        var pair = optionArray[option];
        var checkbox = document.createElement("input");
        checkbox.type = "checkbox";
        checkbox.name = pair;
        checkbox.value = pair;
        s2.appendChild(checkbox);

        var label = document.createElement('label')
        label.htmlFor = pair;
        label.appendChild(document.createTextNode(pair));

        s2.appendChild(label);
        s2.appendChild(document.createElement("br"));    
    }
} 
```

# c++ - 在 cv::mat 和 Qimage 之间转换会使程序崩溃

> ID：13330203
> 
> 赞同：0
> 
> 时间：2012-11-11T10:12:24.510
> 
> 标签：c++, qt, opencv

```
#include "opencv2/core/core.hpp"
#include "opencv2/highgui/highgui.hpp"
#include "opencv2/imgproc/imgproc.hpp"    

#include <QtGui>

//make QImage point to the contents of cv::Mat
inline QImage const mat_to_qimage_ref(cv::Mat &mat)
{
  return QImage((unsigned char*)(mat.data), mat.cols, mat.rows, mat.step1(), QImage::Format_RGB32);
}

int main(int argc, char *argv[])
{
  QApplication a(argc, argv);
  QImage img("lena2.jpg");
  cv::Mat mat(img.height(), img.width(), CV_8UC4, img.bits(), img.bytesPerLine());
  QImage img = mat_to_qimage_ref(mat); //#1
  //QImage img2((unsigned char*)(mat.data), mat.cols, mat.rows, mat.step, QImage::Format_RGB32); #2

  QLabel label;
  label.setPixmap(QPixmap::fromImage(img)); //crash at here
  label.show();

  return a.exec();
} 
```

(#2) 没问题，但#1 会发生未定义的行为？（我的情况是崩溃）

此外，如果您使用它作为下面的代码，就可以了

```
 cv::Mat img = cv::imread("lena2.jpg");
 QLabel label;
 label.setPixmap(QPixmap::fromImage(mat_to_qimage_ref(img)));
 label.show(); 
```

不知道发生了什么，与循环依赖有关？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T13:47:14.367

你的功能应该是这样的：

```
 QImage mat_to_qimage_ref(const cv::Mat3b &src) {
        QImage dest(src.cols, src.rows, QImage::Format_ARGB32);
        for (int y = 0; y < src.rows; ++y) {
                const cv::Vec3b *srcrow = src[y];
                QRgb *destrow = (QRgb*)dest.scanLine(y);
                for (int x = 0; x < src.cols; ++x) {
                        destrow[x] = qRgba(srcrow[x][2], srcrow[x][1], srcrow[x][0], 255);
                }
        }
        return dest;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T14:23:48.850

如果您不想复制图像数据，而只是为您的数据创建一个新的 QImage 标头，请尝试以下操作：

```
Mat mat = Mat(...);

QImage qImage = QImage(
    (const uchar*)(mat.data),
    mat.cols,
    mat.rows,
    mat.step1(),
    QImage::Format_ARGB32); // if you have no alpha channel (CV_8UC3),
                            // you can use Format_RGB888 
```

另请注意，OpenCV 通常使用 BGR 通道顺序，您可以使用[rgbSwapped()](http://doc.qt.digia.com/qt/qimage.html#rgbSwapped)来解决此问题，但我不知道是否通过此函数调用复制数据。

# version-control - TortoiseCVS - 查看修订日志

> ID：13330206
> 
> 赞同：2
> 
> 时间：2012-11-11T10:12:37.340
> 
> 标签：version-control, cvs, tortoisecvs

我习惯了 TrotoiseSVN，现在安装了 TortoiseCVS。如何查看 Tortoise CVS 中的修订日志？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-23T15:11:04.017

1.  右击文件或文件夹
2.  进入 CVS 子菜单，
3.  选择 [命令...]
4.  键入 [log]（不带大括号 + 按 Enter）
5.  稍等一下，就会出现日志

# android - android - 活动作为参数

> ID：13330208
> 
> 赞同：2
> 
> 时间：2012-11-11T10:12:41.847
> 
> 标签：android, android-activity, parameter-passing

总是将 Activity 作为参数传递给方法是否昂贵？

你看，我有这个类（这是我把常用的方法放在我的活动中的地方）。而且我所有的方法都有 Activity 作为参数，因为这些方法的结果需要发送回调用该方法的活动，所以基本上我需要知道我应该将结果返回给谁，所以我总是有像：

```
public static void processThis(Activity activity){ 
// some Code
} 
```

我只是想知道这是否违反最佳实践，或者使用起来是否昂贵？

谢谢。期待您的解释，这将启发我。

补充：我正在从我的活动中提取常用方法以促进代码重用。就像，ActivityA 使用 methodA 并将广播发送回 ActivityA，同样的方式适用于 ActivityB，它使用 methodB（与 methodA 相同）并将广播发送回 ActivityB。所以我想要实现的是提取基本相同的methodA和methodB，并将它们放入另一个类，并添加一个参数Activity，这样我就可以知道我需要将广播发回给谁。谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-11T10:19:27.483

在 Java 中，所有非原始参数都是隐式指针；因此，传递诸如activity之类的对象只需要传递Activity在内存中的地址，因此传递这样的东西在Java中并不是一件昂贵的事情。

因此，您应该问自己的真正问题不是它是否昂贵，而是它是否最有意义（从逻辑/可维护性的角度来看）。如果它有意义，那么一定要去做。

# java - 如何比较避免将重复数据插入arraylist

> ID：13330209
> 
> 赞同：-1
> 
> 时间：2012-11-11T10:12:50.243
> 
> 标签：java, list, struts2, arraylist, hashset

我有一个类，我根据提供的 id 将数据插入到数组列表中。我正在将一个 bookId 传递给我的班级，并通过比较 bookid 我得到一个 book 对象。在得到那个对象（书）之后，我插入到我的数组列表中。现在我不想多次插入相同的数据。如果同一个 bookid 在类中传递，那么它应该只存储一次。
我将我的数组列表存储到会话中。

请检查我的代码。并建议我解决我的问题。**如何避免将数据重复插入到我的数组列表中？**

## AddBookToSession.java

```
 ..................
   ...................
    ...................
    private Integer bid;  HttpServletRequest request = ServletActionContext.getRequest();  
    private Map<String, Object> session; 
    List<Bookdetails> books = new ArrayList<Bookdetails>();
    private BookdetailsDAO dao = new BookdetailsDAO(); 

    public String execute() 
    {  
           String bookid = request.getParameter("bid");    
        Bookdetails book = dao.listBookDetailsById(Integer.parseInt(bookid));
        int checkduplicate=1;

           //getting list from session to compare with the id
        List list = (List) session.get( VisionBooksConstants.USER );  
           Iterator itr = list.iterator(); 
           int bidd=0;

        while(itr.hasNext())
        { 
            Bookdetails bks=(Bookdetails) itr.next();
            bidd=bks.getId(); //getting bookid from arraylist,which was stored in session
            if (bidd==Integer.parseInt(bookid))
            {
           checkduplicate=0; //returns 0 ,so that i can compare it below to avoid duplicate data
         }
        }
         //
        if (book != null && checkduplicate==1  ) 
        { 
            books = sessionBooks();
            HttpServletRequest request = ServletActionContext.getRequest();  
            books.add(book);
            System.out.println("books size"+books.size()); 
        }

        return SUCCESS;
    } 
       ........................
        ...................... 
```

替代解决方案 **HashSet() 更新**

```
 public String execute() 
    {    HashSet<Bookdetails> books = new HashSet<Bookdetails>();
          String bookid = request.getParameter("bid");    
          Bookdetails book = dao.listBookDetailsById(Integer.parseInt(bookid));
          books =  (HashSet<Bookdetails>) session.get(BillTransactionBooksConstants.BOK);
          if ( books == null ) books = new HashSet<Bookdetails>();
           boolean already_exists = false; 
            books.add(book);
            System.out.println("books size"+books.size()); 
            session.put(BillTransactionBooksConstants.BOK,books);

        return SUCCESS;
    } 
```

Bookdetails.java(Pojo)

```
 package v.esoft.pojos;

    // Generated Nov 5, 2012 9:37:14 PM by Hibernate Tools 3.4.0.CR1

    import java.util.Date;
    import javax.persistence.Column;
    import javax.persistence.Entity;
    import javax.persistence.GeneratedValue;
    import static javax.persistence.GenerationType.IDENTITY;
    import javax.persistence.Id;
    import javax.persistence.Table;
    import javax.persistence.Temporal;
    import javax.persistence.TemporalType;

    /**
     * Bookdetails generated by hbm2java
     */
    @Entity
    @Table(name = "bookdetails", catalog = "vbsoftware")
    public class Bookdetails implements java.io.Serializable {

        private Integer id;
        private String isbn;
        private String bookTitile;
        private String authFirstname;
        private String authLastname;
        private String editionYear;
        private Integer subjectId;
        private Integer coverId;
        private Integer languageId;
        private String publisherName;
        private Integer editionId;
        private Float price;
        private String quantity;
        private String description;
        private Integer locationId;
        private String remarks;
        private String img1;
        private String img2;
        private String videoUrl;
        private Integer createrId;
        private Date createdDate;
        private Integer updateId;
        private Date updatedDate;

        public Bookdetails() {
        }

        public Bookdetails(String isbn, String bookTitile, String authFirstname,
                String authLastname, String editionYear, Integer subjectId,
                Integer coverId, Integer languageId, String publisherName,
                Integer editionId, Float price, String quantity,
                String description, Integer locationId, String remarks,
                String img1, String img2, String videoUrl, Integer createrId,
                Date createdDate, Integer updateId, Date updatedDate) {
            this.isbn = isbn;
            this.bookTitile = bookTitile;
            this.authFirstname = authFirstname;
            this.authLastname = authLastname;
            this.editionYear = editionYear;
            this.subjectId = subjectId;
            this.coverId = coverId;
            this.languageId = languageId;
            this.publisherName = publisherName;
            this.editionId = editionId;
            this.price = price;
            this.quantity = quantity;
            this.description = description;
            this.locationId = locationId;
            this.remarks = remarks;
            this.img1 = img1;
            this.img2 = img2;
            this.videoUrl = videoUrl;
            this.createrId = createrId;
            this.createdDate = createdDate;
            this.updateId = updateId;
            this.updatedDate = updatedDate;
        }

        @Id
        @GeneratedValue(strategy = IDENTITY)
        @Column(name = "id", unique = true, nullable = false)
        public Integer getId() {
            return this.id;
        }

        public void setId(Integer id) {
            this.id = id;
        }

        //########################################################################### 
                        //  FOR HASHSETS EQUALS
        //########################################################################### 
        public Bookdetails(int i){ id = i; }

        public boolean equals(Object obj){
            System.err.println("called"); // Never happens
            return id == ((Bookdetails)obj).id;
        }

        @Column(name = "isbn", length = 90)
        public String getIsbn() {
            return this.isbn;
        }

        public void setIsbn(String isbn) {
            this.isbn = isbn;
        }

        @Column(name = "book_titile")
        public String getBookTitile() {
            return this.bookTitile;
        }

        public void setBookTitile(String bookTitile) {
            this.bookTitile = bookTitile;
        }

        @Column(name = "auth_firstname", length = 120)
        public String getAuthFirstname() {
            return this.authFirstname;
        }

        public void setAuthFirstname(String authFirstname) {
            this.authFirstname = authFirstname;
        }

        @Column(name = "auth_lastname", length = 120)
        public String getAuthLastname() {
            return this.authLastname;
        }

        public void setAuthLastname(String authLastname) {
            this.authLastname = authLastname;
        }

        @Column(name = "edition_year", length = 20)
        public String getEditionYear() {
            return this.editionYear;
        }

        public void setEditionYear(String editionYear) {
            this.editionYear = editionYear;
        }

        @Column(name = "subject_id")
        public Integer getSubjectId() {
            return this.subjectId;
        }

        public void setSubjectId(Integer subjectId) {
            this.subjectId = subjectId;
        }

        @Column(name = "cover_id")
        public Integer getCoverId() {
            return this.coverId;
        }

        public void setCoverId(Integer coverId) {
            this.coverId = coverId;
        }

        @Column(name = "language_id")
        public Integer getLanguageId() {
            return this.languageId;
        }

        public void setLanguageId(Integer languageId) {
            this.languageId = languageId;
        }

        @Column(name = "publisher_name", length = 70)
        public String getPublisherName() {
            return this.publisherName;
        }

        public void setPublisherName(String publisherName) {
            this.publisherName = publisherName;
        }

        @Column(name = "edition_id")
        public Integer getEditionId() {
            return this.editionId;
        }

        public void setEditionId(Integer editionId) {
            this.editionId = editionId;
        }

        @Column(name = "price", precision = 12, scale = 0)
        public Float getPrice() {
            return this.price;
        }

        public void setPrice(Float price) {
            this.price = price;
        }

        @Column(name = "quantity", length = 40)
        public String getQuantity() {
            return this.quantity;
        }

        public void setQuantity(String quantity) {
            this.quantity = quantity;
        }

        @Column(name = "description", length = 65535)
        public String getDescription() {
            return this.description;
        }

        public void setDescription(String description) {
            this.description = description;
        }

        @Column(name = "location_id")
        public Integer getLocationId() {
            return this.locationId;
        }

        public void setLocationId(Integer locationId) {
            this.locationId = locationId;
        }

        @Column(name = "remarks", length = 65535)
        public String getRemarks() {
            return this.remarks;
        }

        public void setRemarks(String remarks) {
            this.remarks = remarks;
        }

        @Column(name = "img1")
        public String getImg1() {
            return this.img1;
        }

        public void setImg1(String img1) {
            this.img1 = img1;
        }

        @Column(name = "img2")
        public String getImg2() {
            return this.img2;
        }

        public void setImg2(String img2) {
            this.img2 = img2;
        }

        @Column(name = "video_url", length = 65535)
        public String getVideoUrl() {
            return this.videoUrl;
        }

        public void setVideoUrl(String videoUrl) {
            this.videoUrl = videoUrl;
        }

        @Column(name = "creater_id")
        public Integer getCreaterId() {
            return this.createrId;
        }

        public void setCreaterId(Integer createrId) {
            this.createrId = createrId;
        }

        @Temporal(TemporalType.TIMESTAMP)
        @Column(name = "created_date", length = 19)
        public Date getCreatedDate() {
            return this.createdDate;
        }

        public void setCreatedDate(Date createdDate) {
            this.createdDate = createdDate;
        }

        @Column(name = "update_id")
        public Integer getUpdateId() {
            return this.updateId;
        }

        public void setUpdateId(Integer updateId) {
            this.updateId = updateId;
        }

        @Temporal(TemporalType.TIMESTAMP)
        @Column(name = "updated_date", length = 19)
        public Date getUpdatedDate() {
            return this.updatedDate;
        }

        public void setUpdatedDate(Date updatedDate) {
            this.updatedDate = updatedDate;
        }

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T10:14:36.350

> 如何避免将数据重复插入到我的数组列表中？

请改用 Set。

此外，请确保您正确实现了 equals 和 hashcode。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T10:21:07.103

编辑：它现在应该可以工作了。

```
 public String execute() 
    {  
        String bookid = request.getParameter("bid");    
        Bookdetails book = dao.listBookDetailsById(Integer.parseInt(bookid));
        books = (ArrayList) session.get( VisionBooksConstants.USER );  
        if ( books == null ) books = new ArrayList<Bookdetails>();
        boolean already_exists = false;
        for ( Bookdetails b : books ) {
            if ( b.getID().equals(bookid) ) {
                already_exists = true; break;
            }
        }
        if (book != null && !already_exists  ) 
        { 
            books.add(book);
            System.out.println("books size"+books.size()); 
            session.put(VisionBooksConstants.USER,books);
        }
        return SUCCESS;
    } 
```

# c# - 链接按钮事件

> ID：13330210
> 
> 赞同：2
> 
> 时间：2012-11-11T10:12:55.050
> 
> 标签：c#, asp.net, gridview

在我的网格视图中有一个链接按钮，我已经为链接按钮定义`CommandName="Download" CommandArgument='<%#Eval("FileID")%>'`了，但我不知道如何找到链接按钮的点击事件？请帮助我如何使用 e 为这个 LinkBut​​ton 编码。命令名

```
<asp:GridView ID="GridViewEfile" runat="server" AutoGenerateColumns="False" CellPadding="4" ForeColor="#000000" GridLines="Both"  DataKeyNames="FileID">
    <AlternatingRowStyle BackColor="Yellow" />
    <Columns>
       <asp:TemplateField>
           <ItemTemplate>
               <asp:LinkButton ID="LinkButton1" runat="server" OnClick = "Retreive_file" CommandName="Download" CommandArgument='<%#Eval("FileID")%>'><%#Eval("FileName")%></asp:LinkButton>
           </ItemTemplate>
       </asp:TemplateField> 
   </Columns>
</asp:GridView> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T10:18:28.623

您不必同时使用 Click 和 Command 事件。指挥就够了。

```
protected void LinkButton1_Command(object sender, CommandEventArgs e)
{
   // Do something with e.CommandName or e.CommandArgument
}

<asp:LinkButton ID="LinkButton1" runat="server" OnCommand="LinkButton1_Command"
   CommandName="Download" CommandArgument='<%#Eval("FileID")%>'> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T10:17:59.980

您需要摆脱`OnClick = "Retreive_file"`按钮上的点击事件。这里没有意义

```
public void GridViewEfile_OnRowCommand(object sender, GridViewCommandEventArgs e)
    {
        if (e.CommandName == "Download")
        {
           // here goes your code
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T14:27:20.413

删除**OnClick = "Retrive_file"**

```
<asp:GridView ID="GridViewEfile" runat="server" AutoGenerateColumns="False" OnRowCommand="GridViewEfile_OnRowCommand" CellPadding="4" ForeColor="#000000" GridLines="Both"  DataKeyNames="FileID">
<AlternatingRowStyle BackColor="Yellow" />
<Columns>
   <asp:TemplateField>
       <ItemTemplate>
           <asp:LinkButton ID="LinkButton1" runat="server" CommandName="Download" CommandArgument='<%#Eval("FileID")%>'><%#Eval("FileName")%></asp:LinkButton>
       </ItemTemplate>
   </asp:TemplateField> 
</Columns>
</asp:GridView> 
```

和使用功能

```
public void GridViewEfile_OnRowCommand(object sender, GridViewCommandEventArgs e)
{
    if (e.CommandName == "Download")
    {
        //you can get your command argument values as follows
        string FileId=e.CommandArgument.ToString();
    }
 } 
```

# codeigniter - 如何在成功或不成功的视图中移动消息

> ID：13330214
> 
> 赞同：0
> 
> 时间：2012-11-11T10:13:31.763
> 
> 标签：codeigniter, codeigniter-2

**我的控制器**

//类别从类别中检索值

```
$category['categorylist']=$this->usermodel->categorylist();
$data['message']="Product sucessfully inserted";
$this->load->view('admin/products',$category); 
```

**我的观点**

```
<?php
if(isset ($message))
{
    echo $message;
}
?> 
```

在视图中我也想在插入后显示成功消息，但如果我继续喜欢

```
$this->load->view('admin/products',$category,$data); 
```

然后不显示成功消息。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T10:31:15.350

您只能将一个数组传递给视图，因此两者`message`和`category`必须在同一个数组中。

```
$data['category'] = $this->usermodel->categorylist();
$data['message'] = 'Product sucessfully inserted';
$this->load->view('admin/products', $data); 
```

有了这个，您可以在视图中使用`$category`和。`$message`

# javascript - flotchart.org：如何绘制以全圆为符号的散点图？

> ID：13330215
> 
> 赞同：3
> 
> 时间：2012-11-11T10:13:35.347
> 
> 标签：javascript, html, graphics, flot

使用 flotchart.org ，我想用默认的“圆形”形状来表示一个点，只有一个类似的圆形，但填充了系列的颜色；例如，颜色“红色”与某个系列相关联：我要表示的符号是，使用 HTML5 画布 API：

```
var ctx=c.getContext("2d");ctx.beginPath(); ctx.arc(100,75,3,0,2*Math.PI); ctx.fillStyle="red"; ctx.fill(); 
```

但我无法获得结果，对[fllotchart 文档](https://github.com/flot/flot/blob/master/API.md#customizing-the-data-series)建议的内容进行编码。

正如上面的文档中所建议的，在选项中我编写了自定义函数：

```
 points: {
            show: true,
            radius: 2,
            symbol: 
                function fullCircle(ctx, x, y, radius, shadow) {        
                    ctx.arc(x, y, radius, 0, shadow ? Math.PI : Math.PI * 2, false);
                    ctx.fill();
                }, 
```

ctx.fill 不能按预期工作：圆圈用黑色填充，在指向之后，我想用与相应系列相关的颜色填充圆圈，然后聚焦点......

对不起我对canvas ctx的无知......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-19T07:12:44.667

有一个浮点设置的组合来绘制实心圆（圆盘）来表示从文档[https://github.com/flot/flot/blob/master/API.md引用的系列点](https://github.com/flot/flot/blob/master/API.md)

> “填充”是形状是否应该被填充。对于线，这会产生面积图。您可以使用“fillColor”来指定填充的颜色。 **如果 "fillColor" 评估为 false**（除了用白色填充的点之外的所有内容的默认值），**填充颜色将自动设置为数据系列的颜色**。您可以通过将**“填充”设置为 0（完全透明）和 1（完全不透明）之间的数字来****调整填充的不透明度**。

 **所以您只需将`series.points.fillColor`选项设置为`false`（使用系列颜色或您喜欢的任何颜色）。并`series.points.fill`完全`1`不透明。只是玩小提琴。

这是[JsFiddle](http://jsfiddle.net/m0ts8cnd/6/)。**

# ruby-on-rails-3 - 国家/地区名称未保存到表格或显示在视图栏 3

> ID：13330216
> 
> 赞同：0
> 
> 时间：2012-11-11T10:13:48.203
> 
> 标签：ruby-on-rails-3, activerecord

我有一个简单的应用程序，您可以在其中上传食谱

我刚刚整合了 gem terrarum，在我的国家模型中为我提供了世界上所有的国家。我有一个食谱有一个国家和一个国家属于食谱的关系。我正在使用来自 ryan bates 的嵌套表格，并且从我的成分模型和准备模型中获取要显示的信息没有问题。但是我无法将国家/地区名称保存在表格中或显示在视图中（尽管这是由于未保存到模型造成的）

代码如下

形式

```
<%= f.label :country_id, "Country Of Origin" %>
<%= f.collection_select(:country_id, Country.all, :id, :name, :prompt => 'Please select country') %> 
```

看法

```
<% @recipes.each do |r| %>
<tr>
<td><%= r.dish_name %></td>
<td><%= r.country.name %></td>
<td><%= r.difficulty %></td>
<td><%= r.preperation_time %></td>
<td><%= ingredient_names(r.ingredients) %></td>
<td><%= preperation_steps(r.preperations) %></td>
<td><%= image_tag r.avatar.url(:thumb)%></td>
</tr> 
```

帮手

```
def preperation_steps(preperations)
if preperations
  preperation_array = preperations.map {|pre| pre.prep_steps}
  preperation_array.join("\n")
end
end

def country_name(country)
if country
  country_array = country.map {|c| c.country_name}
  country_array.join("\n")
end
end
end 
```

我已经包含了我的准备助手，所以我的 country_name 助手肯定反映了这一点吗？还是我不需要为此提供帮助？

配方控制器

```
def new 

@recipes = current_user.recipes if current_user.recipes #show recipes if the user has any recipes
 @favourites = current_user.favourites

end 
```

配方模型

```
 belongs_to :user
  belongs_to :country
  has_many :ingredients 
  has_many :preperations
  has_many :favourites

  attr_accessible :dish_name, :difficulty, :preperation_time, :ingredients_attributes, :preperations_attributes, :country_id, :avatar:preperations_attributes, :country_id, :avatar

  has_attached_file :avatar, :styles => {  :medium => "300x300>", :thumb => "100x100>" } 

  accepts_nested_attributes_for :ingredients, :preperations

  scope :top_countries, order("country_of_origin DESC") 
```

如果有人可以提供帮助，将不胜感激

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T10:23:38.533

在这段代码中，我看到两个错误：

1.  `Recipe`应该`belong_to :country`。不要`has_one`在这里使用。外键`country_id`应该在`recipes`表中。
2.  `@recipe.build_country`没有必要。您已经有一个国家/地区列表。仅`build_country`当您计划将新国家/地区添加到国家/地区列表时才应使用，在这种情况下您不是。

此外，您不需要`fields_for`. 你可以这样做：

```
<%= f.label :country_id, "Country Of Origin" %>
<%= f.collection_select(:country_id, Country.all, :id, :name, :prompt => 'Please select country') %> 
```

# firebug - 如何在 Android 浏览器中检查元素？

> ID：13330221
> 
> 赞同：80
> 
> 时间：2012-11-11T10:14:53.937
> 
> 标签：firebug, google-chrome-devtools

我想在我的 Android 浏览器中检查我的网站 CSS/HTML 元素。

但是，它将通过智能手机或 Android SDK。

最好的方法是什么？

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-11-11T10:16:56.913

Android 上的 Chrome 可以使用桌面上的 Chrome 开发人员工具来检查从 Android 设备上的 Chrome 应用程序加载的 HTML。

请参阅： [https ://developers.google.com/chrome-developer-tools/docs/remote-debugging](https://developers.google.com/chrome-developer-tools/docs/remote-debugging)

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2014-07-23T20:41:47.687

不得不为原生 Android 浏览器调试一个站点并来到这里。所以我在带有 Firefox 30.0（weinre 客户端）和 Android 4.1.2（目标）的 OS X 10.9（作为 weinre 服务器）上尝试了[weinre 。](https://people.apache.org/~pmuellr/weinre/docs/latest/)我对结果感到非常非常惊讶。

1.  [从http://nodejs.org/download/](http://nodejs.org/download/)下载并安装节点运行时
2.  安装 weinre：`sudo npm -g install weinre`
3.  在设置 > 网络中找出您当前的 IP 地址
4.  在你的机器上设置一个 weinre 服务器：`weinre --boundHost YOUR.IP.ADDRESS.HERE`
5.  在您的浏览器调用中：`http://YOUR.IP.ADRESS.HERE:8080`
6.  您将看到一个脚本片段，将其放入您的网站：`<script src="http://YOUR.IP.ADDRESS.HERE:8080/target/target-script-min.js"></script>`
7.  在本地浏览器中打开调试客户端：http: [//YOUR.IP.ADDRESS.HERE :8080/client](http://YOUR.IP.ADDRESS.HERE:8080/client)
8.  最后在您的 Android 上：调用您要检查的站点（其中包含脚本的站点）并查看它在本地浏览器中如何显示为“目标”。现在您可以打开“元素”或任何您想要的。

也许 8080 不是您的默认端口。然后在第 4 步中，您必须调用`weinre --httpPort YOURPORT --boundHost YOUR.IP.ADRESS.HERE`.

而且我不记得确切的时间，也许是在第 5 步之后的某个地方，当然，我不得不接受传入的连接提示。

快乐调试

PS 我仍然对它的效果感到不知所措。甚至元素突出工作

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2017-03-28T05:56:57.423

您可以使用 Chrome 浏览器检查 Android 设备中网站的元素。

打开您的 Chrome 浏览器并转到您要检查的网站。

转到地址栏并在“HTTP”之前键入“view-source：”并重新加载页面。

将显示页面的整个元素。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-12-27T14:56:16.747

如果您想检查 html、css 或者您的移动浏览器中可能需要 js 控制台。您可以使用出色的工具**eruda** 使用它，您可以在移动浏览器上拥有与桌面设备相同的开发人员工具。不要忘记投票 :) 这是一个链接[https://github.com/liriliri/eruda](https://github.com/liriliri/eruda)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-03-11T14:45:33.940

只需将此代码添加为链接：

```
javascript:(function () { var script = document.createElement('script'); script.src="//cdn.jsdelivr.net/npm/eruda"; document.body.appendChild(script); script.onload = function () { eruda.init() } })(); 
```

并在打开站点后打开书签（在搜索栏中搜索 SAVED 名称）。书签将出现在您的搜索栏上，打开它，您将在 Android 上拥有检查元素。

# winapi - cbClsExtra 和 cbWndExtra

> ID：13330225
> 
> 赞同：7
> 
> 时间：2012-11-11T10:15:38.173
> 
> 标签：winapi, window

我想要有关winapi中使用的成员`cbClsExtra`和`cbWndExtra` `WNDCLASSEX`成员的更多详细信息。`RegisterClassEx`

`MSDN`表示此成员可用于设置将分配给类和每个窗口实例的额外字节的大小。

`MSDN`说

> 系统将字节初始化为零。

1）这是否意味着字节被初始化为零值或系统默认分配零（无）字节？

2）最重要的问题是如何使用这些额外的字节（请提供使用winapi的示例）以及它们最常见的使用方式？

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-11T11:02:58.807

> 这是否意味着字节被初始化为零值或系统默认分配零（无）字节？

初始化总是在变量上完成，所以这意味着将分配的额外内存设置为 0。

> 最重要的问题是如何使用这些额外的字节（请提供使用 winapi 的示例）以及它们是如何最常用的？

做到这一点的唯一方法是通过[`GetClassLongPtr`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633581%28v=vs.85%29.aspx)and[`GetWindowLongPtr`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633585%28v=vs.85%29.aspx)函数，这些函数非常简单，不需要示例（调用`Get*`以获取值，并`Set*`设置值，传递类`ATOM`或窗口`HWND`）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-12-04T19:33:44.560

我想这是一个非常古老的问题，这个人已经继续生活，但我认为它应该得到一个正确的答案，因为我正在努力解决这个问题，而答案并没有太大帮助。是的，它说明了如何设置额外的内存和唯一要使用的功能；但更多的细节是必要的。

你看，有经验的人认为事情是显而易见的和常识，但我不敢苟同。Win32 API 不是一个非常直观的 API。一旦你学会了它，你就会理解某些模式，但后来发现 API 的某些部分与某些部分非常不同。例如，为您的窗口设置字体，与在编辑控件中设置字体不同；对于 Rich Edit Control，这令人惊讶地非常不同。

因此，我总是参考 MSDN 文档，当我无法获得那里的信息时；问堆栈溢出。

///______我的解决方案_________

这是您使用 cbWndExtra 的方法，它是您可以分配给该类的每个窗口实例的额外字节。我不知道 cbClassExtra。

注意我使用 cbWndExtra 作为 GWL_USERDATA 的替代品。对于后者，我将创建一个指向我的特殊结构的新指针并将其设置为 GWL_USERDATA。该结构具有管理窗口对象所需的所有状态。

但是我一直在尝试 cbWndExtra 以避免在堆上创建内存。对于简单的原始变量。

步骤 1\. 创建 windowProc.def 文件。这包含用于以类型安全的方式访问窗口字节的枚举和函数。

```
#include <windows.h>

  #define LINE_NUM_VIEW_WIDTH 0
  #define CODE_EDITOR_EDITOR 0
  #define CODE_EDITOR_LINE_VIEW (CODE_EDITOR_EDITOR + sizeof(HWND))
  #define CODE_EDITOR_HEIGHT (CODE_EDITOR_LINE_VIEW + sizeof(HWND))
  #define CODE_EDITOR_RESIZABLE (CODE_EDITOR_HEIGHT + sizeof(LONG))

  #define LINE_NUMBER_VIEW_WND_EXTRA_BYTES sizeof(LONG)
  #define CODE_EDITOR_WND_EXTRA_BYTES (CODE_EDITOR_RESIZABLE + sizeof(LONG))

#define getLineNumberViewWidth( hwnd) GetWindowLong(hwnd,LINE_NUM_VIEW_WIDTH)
#define setLineNumberViewWidth( hwnd, n) SetWindowLong(hwnd,LINE_NUM_VIEW_WIDTH,n)

#define getTextEditor( hwnd) ((HWND)GetWindowLongPtr(hwnd,CODE_EDITOR_EDITOR))
#define getLineNumberView( hwnd) ((HWND)GetWindowLongPtr(hwnd,CODE_EDITOR_LINE_VIEW))

#define setCodeEditorHeight(hwnd,n) SetWindowLong(hwnd,CODE_EDITOR_HEIGHT,n)
#define getCodeEditorHeight(hwnd) GetWindowLong(hwnd,CODE_EDITOR_HEIGHT)
#define isCodeEditorResizable(hwnd) GetWindowLong(hwnd,CODE_EDITOR_RESIZABLE)
#define setCodeEditorResizable(hwnd, yes) SetWindowLong(hwnd,CODE_EDITOR_RESIZABLE,yes) 
```

请注意 GetWindowLong、GetWindowLongPtr 的技巧。将 GetWindowLong 用于 Long、int、bool 等。使用 GetWindowLongPtr 作为指针。还要注意名称中的 Long。该函数返回 sizeof(LONG) 并存储 sizeof(Long)。并且 msdn 声明有效范围是 0 到 cbWndExtra - sizeof(Long)。因此，即使您可以分配 1 个字节的 cbWndExtra，不要！分配 LONG 的倍数。还要记住 GetWindowLongPtr 存储和检索 sizeof(LONG_PTR)。有效范围 0 - cbWndExtra - sizeof(LONG_PTR)。LONG_PTR 和 LONG 在 64 位窗口上的大小不同。

这真的很简单。GetWindowLong 将始终尝试检索 Long。因此，如果您分配 12 个字节并尝试检索索引 10；这是一个错误，因为只能检索 2 个字节。也许 Windows 会给你带来麻烦，但就我而言，这是未定义的行为。我远离未定义的行为。

请注意，还有 GetWindowWord。从来没有用过。没有 GetWindowByte、Short、Bool 或任何获取和设置 1 字节或 2 字节的机制。因此为所有布尔值分配一个 Long 块。

步骤 2\. 创建 windowProc.cpp

```
#include <stdio.h>
#include "windowProc.def"

LRESULT CALLBACK windowProc(HWND hwnd,UINT msg,WPARAM wparam,LPARAM lparam)
{
    switch(msg)
    {
     case WM_CREATE:
           setCodeEditorHeight(hwnd,100); // from windowProc.def
           printf("%i",getCodeEditorHeight(hwnd)); // from windowProc.def
        return 0;

     default: return DefWindowProc(hwnd, msg, wparam, lparam);
    }
}

ATOM registerMainWindow()
{
 WNDCLASSEX wincl = {0};

 wincl.cbSize = sizeof(WNDCLASSEX);
 wincl.hInstance = (HINSTANCE)0x400000;
 wincl.lpszClassName = "JavWindowProc";
 wincl.lpfnWndProc = windowProc;
 wincl.hCursor = LoadCursor(NULL,IDC_IBEAM);
 wincl.hbrBackground = (HBRUSH)(COLOR_BACKGROUND+1);
 wincl.cbWndExtra = CODE_EDITOR_WND_EXTRA_BYTES; // Safely set the size with our enumeration from windowProc.def

 return (LPCSTR)RegisterClassEx(&wincl);
}

HWND createMainWindow(const char *title,int width,int height)
{
 static auto className = registerMainWindow();

 return CreateWindowExA(
           0,                   // Extended possibilites for variation
           className,
           title,
           WS_CHILD,
           0,0,width,height,
           HWND_DESKTOP,
           0,
           (HINSTANCE)0x400000,
           NULL                 // No Window Creation data// The alternative to cbWndExtra
         );
} 
```

步骤 3 显然，使用您的消息循环创建您的主要功能。

希望这对某人有帮助。

# spine.js - 内部渲染后更改控制器的类

> ID：13330227
> 
> 赞同：0
> 
> 时间：2012-11-11T10:15:50.550
> 
> 标签：spine.js

根据文档，每个 Spine 控制器都有一个 className 字段，用于向渲染的元素添加一个类。

```
class Users extends Spine.Controller
  className: "users list" 
```

初始化后是否可以更改？例如，是否可以在更新事件后将其更改为：

```
"users list updated" 
```

预先感谢您的时间和精力。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T12:17:31.340

向它添加一个新类

```
@el.addClass('newCssClass') 
```

# javascript - 查询。如果已经触发了另一个事件，则不要触发另一个事件

> ID：13330229
> 
> 赞同：6
> 
> 时间：2012-11-11T10:16:14.700
> 
> 标签：javascript, jquery, javascript-events

我有这样的代码：

```
$('#foo').on('click', function(e) {
   //do something
});

$('form input').on('change', function(e) {
  //do some other things
)); 
```

第一个和第二个事件实际上用相同的输入字段做同样的事情，但方式不同。问题是，当我单击#foo 元素时，表单更改元素也会触发。我需要在输入内容发生变化时触发表单更改，但在单击#foo 元素时不需要。

这就是问题所在 ））。这该怎么做？

UPD：这是 jsfiddle 上的代码：http: [//jsfiddle.net/QhXyj/1/](http://jsfiddle.net/QhXyj/1/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-11T10:21:40.953

当焦点离开#input 时会触发 onChange。在您的情况下，这与单击按钮同时发生。尝试按 Tab，然后单击按钮。

为了处理这种特殊情况，一种解决方案是延迟对`change`事件的调用，以检查按钮是否同时被点击。在实践中 100 毫秒有效。这是代码：

```
$().ready(function() {

    var stopTheChangeBecauseTheButtonWasClicked = false;
    $('#button').on('click', function(e) {
        stopTheChangeBecauseTheButtonWasClicked = true;
        $('#wtf').html("I don't need to change #input in this case");
    });

    $('#input').on('change', function(e) {
        var self = this;
        setTimeout(function doTheChange() {
            if (!stopTheChangeBecauseTheButtonWasClicked) {
                $(self).val($(self).val() + ' - changed!');
            } else {
                stopTheChangeBecauseTheButtonWasClicked = false;
            }
        }, 100);
    });
}); 
```

还有小提琴 - [http://jsfiddle.net/dandv/QhXyj/11/](http://jsfiddle.net/dandv/QhXyj/11/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T13:32:00.470

在单击的元素获得焦点之前触发模糊元素上的更改事件是很自然的。如果您不想使用超时（“在输入更改后执行 X ms 操作，除非在单击按钮之间”，如 Dan 所建议的那样）-并且超时很丑-您只能执行两次这些操作。输入更改后，保存其状态并执行某些操作。如果然后 - 稍后 - 单击按钮，检索保存的状态并执行类似的操作。我想这就是你真正想要的 UI 行为，并不是所有用户都那么快。如果一个人离开输入（例如通过按`Tab`），然后“独立”激活按钮，您真的要执行这两个动作吗？

```
var inputval = null, changedval = null;

$('form input').on('change', function(e) {
    inputval = this.value;
    // do some things with it and save them to
    changedval = …
    // you might use the value property of the input itself
));

$('#foo').on('click', function(e) {
    // do something with inputval
});

$('form …').on('any other action') {
    // you might want to invalidate the cache:
    inputval = changedval;
    // so that from now on a click operates with the new value
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T10:49:54.217

```
$('form input').on('change', function(e) {
  // don't do the thing if the input is #foo
  if ( $(this).attrib('id') == 'foo' ) return;

  //do some other things
)); 
```

**更新**

这个怎么样：

```
$().ready(function() {

    $('#button').on('click', function(e) {
        $('#wtf').html("I don't need to change #input in this case");
    });

    $('#input').on('change', function(e) {
        // determine id #input is in focus
        if ( ! $(this).is(":focus") ) return;

        $(this).val($(this).val()+' - changed!');
    });  
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-11T11:19:20.173

```
$(function() {

          $('#button').on('click', function() {
              //use text() not html() here
              $('#wtf').text("I don't need to change #input in this case");
          }); 

          //fire on blur, that is when user types and presses tab
          $('#input').on('blur', function() {
              alert("clicked"); //this doesn't fire when you click button
              $(this).val($(this).val()+' - changed!');
          });  
      });​ 
```

这是[小提琴](http://jsfiddle.net/QhXyj/7/)

# xml - Linq-Xml [DirectoryNotFound 或 NullReferenceException]

> ID：13330239
> 
> 赞同：0
> 
> 时间：2012-11-11T10:17:43.240
> 
> 标签：xml, exception, error-handling, xna, load

我对 Xna 很陌生，我想加载和读取 XML 文件。在互联网上搜索了几个小时后，我仍然没有得到它没有加载文件。每当我尝试启动它时，都会出现 (DirectoryNotFoundException)，而当我尝试将其复制到调试目录时，则会出现 (NullReferenceException)

下载：[http ://www.mediafire.com/?z6w36b73cufy3co](http://www.mediafire.com/?z6w36b73cufy3co)

加载方法：（代码中有第二个，但我还是会上传整个项目）

```
 private void InitLevel(int levelNum)
    {
        actlevel = levelNum;
        levelData = (from level in XElement.Load("Data\\Levels.xml").Descendants("Level")
                      where (int)level.Attribute("Number") == levelNum
                      select new LevelData
                      {
                          number = levelNum,
                          changeDirChance = (int)level.Attribute("ChangeDirChance"),
                          maxActiveAliens = (int)level.Attribute("MaxActiveAliens"),
                          totalAliensToFinish = (int)level.Attribute("TotalAliensToFinish"),
                          boss = alienTypes[(string)level.Attribute("Boss")],
                          fireChance = (int)level.Attribute("FireChance"),
                          maxAlienBullets = (int)level.Attribute("MaxAlienBullets"),
                          alienGenerationTime = TimeSpan.FromMilliseconds((int)level.Attribute("AlienGenerationTime")),
                          selectionData = (from sel in level.Descendants("AlienType")
                                           select new AlienSelectionData
                                           {
                                               chance = (int)sel.Attribute("Chance"),
                                               alien = alienTypes[(string)sel.Attribute("Name")]
                                           }).ToList()
                      }).SingleOrDefault();
        Debug.Assert(levelData != null);
    } 
```

和 XML 文件（/Data 中的 Levels.xml）：

```
<?xml version="1.0" encoding="utf-8" ?>
<Levels>
  <Level Number="1" MaxActiveAliens="7" TotalAliensToFinish="15" Boss="boss1"
         AlienGenerationTime="800" ChangeDirChance="2" FireChance="2" MaxAlienBullets="5">
    <AlienTypes>
      <AlienType Name="alien1" Chance="25" />
      <AlienType Name="alien2" Chance="20" />
      <AlienType Name="alien3" Chance="20" />
      <AlienType Name="alien4" Chance="5" />
    </AlienTypes>
  </Level>
  <Level Number="2" MaxActiveAliens="10" TotalAliensToFinish="25" Boss="boss2"
         AlienGenerationTime="600" ChangeDirChance="2" FireChance="3" MaxAlienBullets="7">
    <AlienTypes>
      <AlienType Name="alien1" Chance="20" />
      <AlienType Name="alien2" Chance="20" />
      <AlienType Name="alien3" Chance="20" />
      <AlienType Name="alien4" Chance="15" />
      <AlienType Name="alien5" Chance="10" />
    </AlienTypes>
  </Level>
</Levels> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T10:45:29.740

您有两种选择来实现它：

A) 使用内容管道

如果您想从 Xbox 游戏加载它，这是选择。制作一个导入器和一个处理器，将其加载并返回为：

1.  一个字符串。

2.  或者你的关卡类型

B) 使用 System.IO

将文件添加到解决方案并转到文件的属性并将选项“复制到输出文件夹”设置为“始终复制”，您将能够从相对于可执行文件的文件夹中加载文件。这似乎是您的代码所需要的，但它在 xbox 游戏中不起作用。

## 编辑

我已经调试了你的代码...

1）您必须将“始终复制选项”设置为文件“alientypes.xml”和“levels.xml”

2）在加载“alienTypes”字段之前调用“InitLevel”，因此该字段为空......所以InitLevels给出一个空引用异常......

```
 public void Initialize( ContentManager Content )
    {
        player.Initialize( );
        stars.Initialize( width, height );
        shot.Initialize( );
--->    InitLevel( 1 );

        // XML Datei
--->    alienTypes = (from at in XElement.Load( "data/alientypes.xml" ).Descendants( "AlienType" )
                      select new AlienType..... 
```

3）我已经修改了你的代码以更容易地调试它......现在很容易跟踪它找到失败的地方......“alientypes”为空......

```
 private void InitLevel( int levelNum )
    {
        actlevel = levelNum;
        var levels =  XElement.Load( "Data\\Levels.xml" ).Descendants( "Level" );
        var level = levels.Where( l => ( int ) l.Attribute( "Number" ) == levelNum ).SingleOrDefault( );

        levelData = new LevelData( );

        levelData.number = levelNum;
        levelData.changeDirChance = ( int ) level.Attribute( "ChangeDirChance" );
        levelData.maxActiveAliens = ( int ) level.Attribute( "MaxActiveAliens" );
        levelData.totalAliensToFinish = ( int ) level.Attribute( "TotalAliensToFinish" );
 ---->  levelData.boss = alienTypes[( string ) level.Attribute( "Boss" )];
        ..... 
```

## 编辑 2

你的外星人类型xml有几个错误...老板需要“space”属性，alien1的路径Texture="Texures/sprites"应该是Texture="Textures/sprites"...

# python - 如何在 SQLAlchemy 中使用嵌套事务和范围会话？

> ID：13330245
> 
> 赞同：7
> 
> 时间：2012-11-11T10:18:20.040
> 
> 标签：python, transactions, python-2.7, sqlalchemy

我已经编写了下面的代码来处理整个应用程序中的嵌套事务。但是当它回滚一次之后，所有事务都会回滚，直到我重新启动应用程序。

```
# method_a starts a transaction and calls method_b
def method_a():
    session.begin(subtransactions=True)
    try:
        method_b()
        session.commit()  # transaction is committed here
    except:
        session.rollback() # rolls back the transaction

# method_b also starts a transaction, but when
# called from method_a participates in the ongoing
# transaction.
def method_b():
    session.begin(subtransactions=True)
    try:
        session.add(SomeObject('bat', 'lala'))
        session.commit()  # transaction is not committed yet
    except:
        session.rollback() # rolls back the transaction, in this case
                       # the one that was initiated in method_a().

# create a Session and call method_a
session = Session(autocommit=True)
global session
method_a(session) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-18T07:15:18.277

除非正在使用 SAVEPOINT（此处不是这种情况），否则 session.rollback() 会回滚整个事务，而不管嵌套如何。使用“子事务”嵌套的目的是使多个代码块可以各自指定它们“开始（）”和“提交（）”一个事务，而与这些方法中的一个是否调用另一个无关。只有**最外层**的begin()/commit() 对才有效，所以这里的代码相当于在 method_b() 中**根本没有begin()/commit() 调用。**

“子事务”模式的存在主要是为了框架集成的目的，而不是用于一般用途。

# delphi - Delphi XE2 - 继承类不调用基类的构造函数......？

> ID：13330251
> 
> 赞同：0
> 
> 时间：2012-11-11T10:19:21.863
> 
> 标签：delphi, class, inheritance

当创建一个从另一个类继承的类时，不应该在创建派生类时调用基类的构造函数吗？

```
Type
  TBase = Class
    constructor xMain;
  End;
  TDerived  = Class(TBase)
    constructor xMain;
  End;

constructor TBase.xMain;
begin
  MessageBox(0,'TBase','TBase',0);
end;

constructor TDerived.xMain;
begin
  MessageBox(0,'TDerived','TDerived',0);
end;

Var
  xTClass:TDerived;
begin
  xTClass := TDerived.xMain;
end. 
```

我认为这应该导致 MessageBox 显示“TBase”，然后显示“TDerived”。然而，事实并非如此。运行上述代码时，它只会导致一个 MessageBox 显示“TDerived”。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-11T10:26:16.023

```
constructor TDerived.xMain;
begin
  inherited;
  MessageBox(0,'TDerived','TDerived',0);
end; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-11T10:31:13.650

在 TDerived.xMain 中添加继承；否则不会调用祖先的代码；

```
begin
  inherited;//call the ancestor TBase.xMain
  MessageBox(0,'TDerived','TDerived',0);
end; 
```

这个问题也将帮助您理解继承的保留字：

[Delphi：如何在虚拟方法上调用继承的继承祖先？](https://stackoverflow.com/questions/4662744/delphi-how-to-call-inherited-inherited-ancestor)

另一个很好的资源是[http://www.delphibasics.co.uk/RTL.asp?Name=Inherited](http://www.delphibasics.co.uk/RTL.asp?Name=Inherited)

# php - Mysql没有从数据库中检索完整数据

> ID：13330256
> 
> 赞同：0
> 
> 时间：2012-11-11T10:19:54.627
> 
> 标签：php, mysql, database, special-characters, password-storage

我在 Mysql 数据库中存储密码，这些密码有特殊字符。密码存储正常，但在检索这些密码时，显示不完整的密码，小于号“<”后不显示密码

例如：这是密码 -> abcxyz abcxyz

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T10:22:31.917

我**假设**您使用 HTML 在网站上显示。然后`<`用于启动 HTML 标记，这就是为什么您看不到它们的原因，但是如果您要查看源代码，那么它应该在那里。如果字符串包含特殊字符，那么您应该对它们进行转义，例如使用`htmlspecialchars`函数。

作为旁注，您不应该将密码存储为纯文本（或显示它们）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T10:30:44.920

### 您永远不应该将密码存储为纯文本！绝不！

这是一个安全问题。存储它的（加盐）**散列**，你也将摆脱你的问题，因为散列不包含特殊字符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T10:31:19.863

如果您在数据库中存储特殊字符，那么这不是一个好主意。出于安全原因，请使用

```
//convert password into the hash as a 32-character hexadecimal number
1) md5 — Calculate the md5 hash of a string 
2) mysql_real_escape_string — Escapes special characters in a string for use in an SQL statement. 
```

如果谈论数据库处理，此链接将有所帮助：-

[如何防止 PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection)

# javascript - 在 Windows 8 Metro 应用程序中进行后台轮询的最佳方式是什么？

> ID：13330261
> 
> 赞同：2
> 
> 时间：2012-11-11T10:21:00.177
> 
> 标签：javascript, windows, windows-8, microsoft-metro, backgroundworker

我正在开发一个具有类似 rss 阅读器功能的 Win 8 javascript 应用程序。如果发现新帖子，它应该反复检查服务器是否有新帖子并显示[toast](http://code.msdn.microsoft.com/windowsapps/Toast-notifications-sample-52eeba29)。

我的问题是，如果我应该使用带有[时间触发器](http://msdn.microsoft.com/en-us/library/windows/apps/JJ160504%28v=win.10%29.aspx)的后台作业（限制为 15 分钟的间隔），或者 setTimeout / setInterval 不是更好的方法。

据我了解[应用程序生命周期](http://msdn.microsoft.com/en-us/library/windows/apps/hh464925.aspx)，我的应用程序可以在任何时候被 Windows 挂起，它不集中并且 Windows 自行决定该时间点。如果应用程序暂停一次，后台作业都不会工作，setTimeout / setInterval 也不会触发。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T15:33:14.160

如果可以的话，我建议在这里重新考虑通知机制。

如果您想使用 toast 通知，我建议您使用推送通知。它确实需要一个云服务来为您轮询文章，然后将通知推送给订阅客户；但是，它不会像轮询触发器那样对客户端的电池寿命征税。

Toast 通知的一个问题是它们很容易被错过，因此如果您想通知用户未读文章，您可能需要考虑在应用程序磁贴上持续存在的徽章通知（就像您在邮件应用程序上看到的那样）。然后一目了然，用户会知道有未读文章，而不是仅当他们碰巧看到传入的 toast 时才知道。

磁贴和徽章通知也可以定期更新，这类似于您想要对 toast 执行的操作，但[这样做的机制](http://blogs.msdn.com/b/jimoneil/archive/2012/08/09/windows-8-notifications-periodic-notifications.aspx)要容易得多。不过这里的挑战是定期通知通常不是个性化的，也就是说，除非您在服务器端做更多的工作，否则您的应用程序的每个用户都会看到相同的徽章/磁贴。

# android - 我收到一个错误 ddms Can't bind to local 8602 for debugger - no debug for Android

> ID：13330264
> 
> 赞同：4
> 
> 时间：2012-11-11T10:21:14.793
> 
> 标签：android, eclipse, debugging

我刚开始开发一个简单的 hello world 应用程序，我收到了这个错误，我无法在 AVD 或任何设备上调试任何应用程序。我正在使用 Eclipse Juno 和 Windows 8。

```
[2012-11-11 10:57:37 - ddms] Can't bind to local 8610 for debugger
[2012-11-11 10:57:37 - ddmlib] An established connection was aborted by the software in your host machine
java.io.IOException: An established connection was aborted by the software in your host machine
at sun.nio.ch.SocketDispatcher.write0(Native Method)
at sun.nio.ch.SocketDispatcher.write(Unknown Source)
at sun.nio.ch.IOUtil.writeFromNativeBuffer(Unknown Source)
at sun.nio.ch.IOUtil.write(Unknown Source)
at sun.nio.ch.SocketChannelImpl.write(Unknown Source)
at com.android.ddmlib.JdwpPacket.writeAndConsume(JdwpPacket.java:213)
at com.android.ddmlib.Client.sendAndConsume(Client.java:575)
at com.android.ddmlib.HandleHeap.sendREAQ(HandleHeap.java:348)
at com.android.ddmlib.Client.requestAllocationStatus(Client.java:421)
at com.android.ddmlib.DeviceMonitor.createClient(DeviceMonitor.java:837)
at com.android.ddmlib.DeviceMonitor.openClient(DeviceMonitor.java:805)
at com.android.ddmlib.DeviceMonitor.processIncomingJdwpData(DeviceMonitor.java:765)
at com.android.ddmlib.DeviceMonitor.deviceClientMonitorLoop(DeviceMonitor.java:652)
at com.android.ddmlib.DeviceMonitor.access$100(DeviceMonitor.java:44)
at com.android.ddmlib.DeviceMonitor$3.run(DeviceMonitor.java:580)

[2012-11-11 10:58:41 - ddms] Can't bind to local 8602 for debugger
[2012-11-11 10:58:41 - ddms] Can't bind to local 8610 for debugger
[2012-11-11 10:58:41 - ddms] Can't bind to local 8602 for debugger 
```

我检查了许多可用的解决方案，包括：禁用 Windows 防火墙/防病毒

在主机文件中添加一行“127.0.0.1 localhost”

检查是否没有另一个 Eclipse 实例在后台运行（我只有一个实例在运行）

重启亚行

重新创建 avd

重新启动eclipse，我的电脑也没有帮助

在 Window -> Preferences -> Android -> DDMS "base local debugger port" 中更改并检查 "use ADBHOST" 和 "127.0.0.1" 也没有帮助我。

使用 netstat -a 检查端口未在使用中

拜托，也许有人可以解决这个问题，以便调试器连接。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T22:44:34.833

安装 Windows 8 后我遇到了同样的问题。

安装 JRE 6 确实解决了这个问题，但是它确实可以工作一次，而无需这样做..

[http://www.oracle.com/technetwork/java/javasebusiness/downloads/java-archive-downloads-javase6-419409.html#jre-6u34-oth-JPR](http://www.oracle.com/technetwork/java/javasebusiness/downloads/java-archive-downloads-javase6-419409.html#jre-6u34-oth-JPR)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T20:04:30.167

好的，我花了几个小时才弄清楚：原来原因是 Java 7。我卸载了 Java 7 并安装了 Java 6，现在可以调试了！

# c++ - 通过 pid 分配信号处理程序

> ID：13330265
> 
> 赞同：0
> 
> 时间：2012-11-11T10:21:25.103
> 
> 标签：c++, linux, signals, posix

如果我知道某个进程的 pid 不运行代码（比如 firefox），我该如何为其分配信号处理程序（比如 SIGINT）？

我现在有了 ：

```
 pid = fork();
    printf("forked and my pid is %d\n",pid);
    //check for errors
    if (pid<0){         
        printf("Error: invoking fork to start ss has failed, Exiting\n ");
        exit(1);
    }
    //the child process runs the gulp
    if (pid==0){
        printf("STARTING THE FIREFOX\n");           
                    //calling signal(somehandler,SIGINT); here will bind the child, which is replaced by the firefox new process,hence won't invoke the "somehandler"
        if (execv(args[0],args)<0){
            perror("Error: running s with execvp has failed, Exiting\n");
        }
                    //invoking signal(somehandler,SIGINT); will obviously not do anything
        printf("IVE BEEN KILLED\n");            
    }
    //dad is here
    printf("DAD IS GOING TO KILL\n");
    if (pid>0){
        sleep(6);
                    //how do I bind a handler to that signal????
        kill(get_pidof(string("firefox")),SIGINT);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T10:23:36.173

您只能在进程**内**建立信号处理程序。换句话说，当它获得 SIGINT 时，您不能让 firefox 调用您的信号处理程序。

* * *

### 编辑

正如您所注意到的，在 exec 之后确实没有保留信号处理程序 - 进程的图像被替换，因此它没有意义。`firefox`所以，就像我之前说的：即使你控制它的父级，你也不能调用你的处理程序。

> 我需要我的程序运行另一个程序（比如 firefox），并知道 firefox 何时死亡或崩溃

在这种情况下，您想为 建立一个信号处理程序`SIGCHLD`：当孩子死亡时，您的进程将跳转到它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T10:55:09.603

正如*Cnucitar*[在这里](https://stackoverflow.com/a/13330279/841108)回答的那样，您只能从进程内部更改信号处理程序。

如果你想在 Firefox 中创建一个信号处理程序，你可以修补它，也许通过一个插件。但我确信那将是一个坏主意。

# c# - 对象的自动拆箱

> ID：13330266
> 
> 赞同：2
> 
> 时间：2012-11-11T10:21:36.010
> 
> 标签：c#, casting, boxing, autoboxing

我对此进行了一些研究，这似乎是不可能的，但没有一个答案对我的问题足够具体。我目前有一个`Stack<object>`我将多种不同类型的对象推送到的对象。在我推动它们之前，我将它们装箱，`object`以便它接受它们。是否有任何可能的方法可以将对象自动拆箱为原始拆箱类型？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T10:26:14.310

您可以使用扩展方法`OfType<OneOfTheTypes>()`仅将那些特定类型的对象转换为正确的类型。

您不能自动将对象转换为具有该对象所具有的运行时类型的兼容类型的编译时类型的变量。
变量的类型是编译时类型，如果编译器在编译时不知道内容属于该类型。编译器不知道堆栈中每个对象实际具有的运行时类型。您必须向编译器（使用强制转换）做出承诺，运行时类型实际上将匹配编译时类型。

但坦率地说。这种“检查我有什么类型”是糟糕设计的典型气味。如果您有类似类型的对象或为不同类型的对象使用不同类型的存储，请尝试使用通用基类设计您的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T10:25:22.850

没有**自动**方法可以做到这一点。

试试这个

`var objT = (T)Convert.ChangeType(obj, typeof(T));`

```
var tuple = new  Tuple<object, Type>(someObject, typeof(someObject));

stack.Push(tuple); 
```

# asp.net - 服务器和客户端 asp.net 的对话框

> ID：13330267
> 
> 赞同：0
> 
> 时间：2012-11-11T10:21:37.370
> 
> 标签：asp.net, client-server, modal-dialog

嗨，谁能告诉我是否有可用于服务器端和客户端的开源对话框。我在 dotnet 3.5 中工作，我无法更新到 dotnet 4.0，我已经在使用 ajaxtoolkit v3.0.30512.20351

我尝试使用[Proudmonkey](http://proudmonkeycontrols.codeplex.com/documentation)，但我正在使用 ajaxtoolkit v3.0.30512.20351，而proudmonkey 需要 ajaxtoolkit v3.0.31106。如果我使用旧的 ajaxtoolkit，我的其他功能将会受到干扰。现在我想知道我应该使用 ajaxtoolkit v3.0.31106 还是使用任何其他控件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T10:52:10.903

我想您可以尝试使用 Ajax Control Toolkit 库中的 Modal Popup Extender。例如参见[http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/ModalPopup/ModalPopup.aspx](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/ModalPopup/ModalPopup.aspx)。

来自 Ajax Control 工具包库的所有控件，与具有客户端支持的 Web 服务器控件（扩展器）相关（此类控件的另一个名称是 Ajax Control）。

因此，如果您查看使用 Modal Popup 的页面的呈现源，您将能够发现以下客户端组件是使用以下 js 创建的：

```
Sys.Application.add_init(function() {
    $create(Sys.Extended.UI.ModalPopupBehavior, {"BackgroundCssClass":"modalBackground","DropShadow":true,"PopupControlID":"ctl00_SampleContent_programmaticPopup","PopupDragHandleControlID":"ctl00_SampleContent_programmaticPopupDragHandle","dynamicServicePath":"/ajaxLibrary/AjaxControlToolkitSampleSite/ModalPopup/ModalPopup.aspx","id":"programmaticModalPopupBehavior","repositionMode":2}, null, null, $get("ctl00_SampleContent_hiddenTargetControlForModalPopup"));
}); 
```

因此，这意味着您可以在客户端动态创建模式弹出窗口。您还可以使用以下 JS 调用特定的模态弹出行为客户端方法：

```
$find("programmaticModalPopupBehavior").show(); 
```

# regex - 使用 Go 编程语言查找命名捕获组的正则表达式

> ID：13330274
> 
> 赞同：6
> 
> 时间：2012-11-11T10:22:59.047
> 
> 标签：regex, go

我正在寻找一个正则表达式来查找（其他）正则表达式字符串中的命名捕获组。

示例：我想在以下正则表达式中找到`(?P<country>m((a|b).+)n)`,`(?P<city>.+)`和：`(?P<street>(5|6)\. .+)`

```
/(?P<country>m((a|b).+)n)/(?P<city>.+)/(?P<street>(5|6)\. .+) 
```

我尝试了以下正则表达式来查找命名的捕获组：

```
var subGroups string = `(\(.+\))*?`
var prefixedSubGroups string = `.+` + subGroups
var postfixedSubGroups string = subGroups + `.+`
var surroundedSubGroups string = `.+` + subGroups + `.+`
var capturingGroupNameRegex *regexp.RichRegexp = regexp.MustCompile(
    `(?U)` + 
    `\(\?P<.+>` + 
    `(` +   prefixedSubGroups + `|` + postfixedSubGroups + `|` + surroundedSubGroups + `)` + 
    `\)`) 
```

`?U`使贪心量词(`+`和`*`) 不贪心，使非贪心量词( `*?`) 贪心。[Go 正则表达式文档](http://code.google.com/p/re2/wiki/Syntax)中的详细信息。

但它不起作用，因为括号没有正确匹配。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-11T10:25:54.973

正则表达式无法正确匹配任意嵌套的括号，因为正则语言无法描述任意（递归）嵌套。

一些现代正则表达式风格确实支持递归（Perl，PCRE）或平衡匹配（.NET），但 Go 不是其中之一（[文档明确表示](http://code.google.com/p/re2/wiki/Syntax)[，Go 的正则表达式包似乎基于](http://golang.org/pkg/regexp/#pkg-overview)`(?R)`的 RE2 库不支持Perl 的构造[上](http://golang.org/pkg/regexp/#pkg-overview)）。您需要构建递归下降解析器，而不是正则表达式。

# android - GCM 和 SIM 的变化

> ID：13330276
> 
> 赞同：1
> 
> 时间：2012-11-11T10:23:11.587
> 
> 标签：android, google-cloud-messaging

如果设备成功注册到 GCM 服务器并正在接收消息，那么如果设备中的 SIM 卡被更改，它是否仍会收到发往 reg_id 的消息？

我想这个问题可以改写为“GCM 通过什么唯一键识别设备？- 钥匙包括电话号码吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T11:41:26.883

据我所知，GCM`reg_id`基于设备/帐户和应用程序包/上下文。而且它与sim卡无关。（GCM 消息传递工作甚至在模拟器上）

GCM reg_id 只有在谷歌出于某种原因决定更改它或当用户 [将应用程序（链接）更新](http://developer.android.com/guide/google/gcm/adv.html#reg-state)到新版本时才能更改。

# jboss - 打开jboss-6.1.0.Final到所有界面

> ID：13330278
> 
> 赞同：-1
> 
> 时间：2012-11-11T10:23:33.443
> 
> 标签：jboss

如何打开所有接口的 jboss-6.1.0.Final 以便我可以远程连接？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T12:29:35.777

如果您指的是 AS6，则需要使用以下选项启动应用程序服务器：

```
-b, --host=<host or ip>       Bind address for all JBoss services

./JBOSS_HOME/bin/run.sh –b 0.0.0.0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T10:27:59.523

你在 Windows 或 Linux 上工作吗？

视窗：

$JBOSS_HOME/bin/domain.bat

Linux：

$JBOSS_HOME/bin/domain.sh

# ruby-on-rails - 即使我使用“目标”，嵌套资源的错误也不显示？

> ID：13330283
> 
> 赞同：1
> 
> 时间：2012-11-11T10:24:12.143
> 
> 标签：ruby-on-rails

我有以下内容：

**路线.rb：**

```
 resources :posts do
    resources :replies
  end 
```

**回复_controller.rb：**

```
class RepliesController < ApplicationController
  def create
    @post = Post.find(params[:post_id])
    @reply = @post.replies.build(params[:reply])
    @reply.user_id = current_user.id
    if @reply.save
      flash[:success] = "reply created!"
      redirect_to post_path(@post)
    else
      redirect_to post_path(@post)
    end
  end 
```

**回复/_form.html.erb：**

```
<%= form_for([@post, @post.replies.build]) do |f| %>
  <%= render 'shared/error_messages', object: f.object, target: @reply %>
  <div class="field">
    <%= f.text_area :content, placeholder: "Enter reply content" %>
  </div>
  <%= f.submit "Reply", class: "btn btn-large btn-primary" %>
<% end %> 
```

**帖子/show.html.erb：**

```
 <div class="span8">
    <%= render 'replies/form' %>
  </div> 
```

**共享/error_messages.html.erb：**

```
<% if object.errors.any? %>
  <div id="error_explanation">
    <div class="alert alert-error">
      The form contains <%= pluralize(object.errors.count, "error") %>.
    </div>
    <ul>
    <% object.errors.full_messages.each do |msg| %>
      <li>* <%= msg %></li>
    <% end %>
    </ul>
  </div>
<% end %> 
```

我不确定为什么`replies`我使用的错误消息没有显示`target: @reply`（：content 和 :user_id 是必需的）。

有什么建议可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T13:26:54.520

在创建方法的**else**部分中，您必须渲染 post_path(@post) 而不是重定向 post_path(@post)

**在创建部分的其他**部分尝试这个

```
render :template => 'posts/show' 
```

这样您当前的**@reply**对象将持续存在您的错误消息。

**redirect_to post_path(@post)**将在 show 操作中重新定义**@reply**对象（我假设您已经在那里定义了 @reply 对象）。

在**帖子/显示**操作中，在那里构建您的回复对象并将其分配给@reply 实例对象。

```
@reply = @post.replies.build 
```

现在在**回复/_form.html.erb 中**：

将 @post.replies.build 更改为 @reply

IE

```
<%= form_for([@post, @post.replies.build]) do |f| %> 
```

到

```
<%= form_for([@post, @reply]) do |f| %> 
```

在渲染“shared/error_messages”部分时，**还将@reply**分配给**对象变量，**

```
<%= form_for([@post, @reply]) do |f| %>
  <%= render :partial => 'shared/error_messages', :locals => {:object => @reply} %>
  <div class="field">
   <%= f.text_area :content, placeholder: "Enter reply content" %>
  </div>
 <%= f.submit "Reply", class: "btn btn-large btn-primary" %>
<% end %> 
```

**还要对共享文件夹 ( shared/_error_messages** )中的 error_messages 进行部分处理。在这个部分粘贴你的代码是在**shared/error_messages**

```
<% if object.errors.any? %>
  <div id="error_explanation">
    <div class="alert alert-error">
      The form contains <%= pluralize(object.errors.count, "error") %>.
    </div>
   <ul>
   <% object.errors.full_messages.each do |msg| %>
     <li>* <%= msg %></li>
   <% end %>
  </ul>
</div> 
```

# c# - c# short if 语句不适用于 int？(int=null)

> ID：13330288
> 
> 赞同：7
> 
> 时间：2012-11-11T10:25:04.007
> 
> 标签：c#, if-statement, expression

我正在尝试通过使用 short-if 来缩短我的代码：

```
int? myInt=myTextBox.Text == "" ? null : 
    Convert.ToInt32(myTextBox.Text); 
```

但我收到以下错误：无法确定条件表达式的类型，因为''和'int'之间没有隐式转换

以下作品：

```
int? myInt;
if (myTextBox.Text == "") //if no text in the box
   myInt=null;
else
   myInt=Convert.ToInt32(myTextBox.Text); 
```

如果我用整数替换'null'（比如'4'），它也可以工作：

```
int? myInt=myTextBox.Text == "" ? 4: 
    Convert.ToInt32(myTextBox.Text); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-11T10:27:26.837

试试这个：

```
int? myInt=myTextBox.Text == "" ? (int?)null : Convert.ToInt32(myTextBox.Text); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-11T10:34:52.453

我们需要让编译器知道，if 表达式的两个部分（if 和 else）是相同的。这就是 C# 包含单词**default**的原因：

```
int? myInt=myTextBox.Text == "" 
   ? default(int?)
   : Convert.ToInt32(myTextBox.Text); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-11T10:33:27.793

我的建议如下？

```
int value;
int? myInt = ( int.TryParse(myTextBox.Text, out value ) ) ? value : default(int?); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-11T10:30:20.423

```
int? myInt=myTextBox.Text == "" ? (int?)null : 
    Convert.ToInt32(myTextBox.Text); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-12-27T10:15:39.873

```
int number =!string.IsNullOrEmpty(temp) ? Convert.ToInt32(temp) : (int?) null; 
```

# unit-testing - 为什么 beforeEach 不在 mocha 中的第二个 describe() 语句上运行？

> ID：13330289
> 
> 赞同：2
> 
> 时间：2012-11-11T10:25:04.443
> 
> 标签：unit-testing, node.js, mocha.js

第一个`beforeEach`清除用户集合......这对于第一组测试（#save（）描述）工作正常......但不适用于第二个描述（“#find（）”）。

```
describe('User', function(){
    beforeEach(function(done){
        //clear out db
        User.remove(done);
    });

    describe('#save()', function(){

        beforeEach(function(done){
            user = new User(fakeUser);
            done();
        });

        it('should have username property', function(done){
        });

        it('should not save if username is not present', function(done){
        });
    });

    describe('#find()', function(){
        beforeEach(function(done){
            user = new User(fakeUser);
            user.save(function(err, user){
                done();
            });
        });

        it('should find user by email', function(done){
        });

        it('should find user by username', function(done){
        });
    });
}); 
```

第一个`beforeEac`h 指的是什么？我认为它适用于每个孩子`describe`，但显然不是。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T07:41:25.627

我的错，我需要添加`after`以删除集合。

# mkmapview - MKMapView#visibleMapRect 返回 MKCoordinateRegion 而不是 MKMapRect (RubyMotion)

> ID：13330290
> 
> 赞同：0
> 
> 时间：2012-11-11T10:25:21.440
> 
> 标签：mkmapview, mapkit, rubymotion

根据苹果文档调用 visibleMapRect 应该返回 MKMapRect 的实例，但我得到一个 MKCoordinateRegion 代替。

```
 class MyMapController < UIViewController
  def loadView
    super
    self.view = MKMapView.alloc.init
    view.delegate = self
  end

  def viewDidLoad
    region = MKCoordinateRegionMake(
      CLLocationCoordinate2D.new(20.7103500366211, -101.607849121094),
      MKCoordinateSpanMake(18, 18)
    )

    view.setRegion region, animated: false
  end

  def mapView map, regionDidChangeAnimated: animated
    puts map.visibleMapRect.inspect
    # prints => <MKCoordinateRegion center=#<CLLocationCoordinate2D latitude=47967664.0 longitude=106401408.0> span=#<MKCoordinateSpan latitudeDelta=20971520.0 longitudeDelta=24051712.0>>
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T08:10:32.257

显然这是 RubyMotion 中的一个错误：

> 你好，
> 
> 这可能是一个编译器错误。两种结构可能具有相同的签名（相同的字段类型），因此编译器会感到困惑。我们将针对即将到来的软件更新对此进行调查。
> 
> 问候。洛朗

# c# - Privoxy - C# 无法打开转发的文件

> ID：13330294
> 
> 赞同：1
> 
> 时间：2012-11-11T10:26:02.033
> 
> 标签：c#

我使用[Privoxy编写应用程序](http://privoxy.org)

```
forward /spacemap/xml/maps.php 127.0.0.1:9002 
```

C# 中的下一步

```
TcpListener tcpListener = new TcpListener(IPAddress.Any, 9002);
tcpListener.Start();
while (true)
{
TcpClient tcpClient = tcpListener.AcceptTcpClient();
HTTP HTTP = new HTTP(tcpClient);
HTTP.Read();
} 
```

在方法`HTTP.Read()`中，我从请求中读取了所有标题到这个文件（/spacemap/xml/maps.php），它工作正常。

但是当我得到 requestURL(good) 并尝试打开该 url 时，什么也没有发生。

```
WebClient webClient = new WebClient();
string download = webClient.DownloadString("http://example.com/spacemap/xml/maps.php");
Console.WriteLine(download); 
```

但下载变量为空。（网络浏览器中的链接工作正常）。

我正在尝试 HttpWebRequest、WebRequest、WebClient - 什么都没有，其他链接工作正常。

有任何想法吗？

# r - 'randomForest'的'caret'中的递归特征消除：为第一个森林设置不同的ntree参数

> ID：13330302
> 
> 赞同：1
> 
> 时间：2012-11-11T10:27:19.743
> 
> 标签：r, machine-learning, random-forest, feature-selection

我目前正在尝试使用递归特征消除 (RFE) 为非常高维数据集 (p > 200k) 优化随机森林分类器。[**caret**](http://cran.r-project.org/web/packages/caret/index.html)包有一个很好的实现（***rfe()*** -function）。但是，我也在考虑优化 RAM 和 CPU 使用率。这就是为什么我想知道是否有机会设置不同（更大）数量的树来训练第一个森林（没有特征消除）并利用它的重要性来构建其余的（使用 RFE）使用例如 500 棵树进行 10 倍或 5 倍交叉验证。我知道这个选项在[varSelRF](http://cran.r-project.org/web/packages/varSelRF/index.html)中可用。但是[**caret**](http://cran.r-project.org/web/packages/caret/index.html)怎么样？我没有设法在手册中找到任何关于此的内容。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T03:25:07.690

你可以这样做。rfFuncs 列表有一个名为 fit 的对象，它定义了模型的拟合方式。此函数的一个参数称为“第一个”，在第一次拟合时为 TRUE（还有一个“最后一个”参数）。您可以基于此设置ntree。

有关更多详细信息，请参阅功能选择插图。

最大限度

# javascript - 当控件改变它的位置时，零剪贴板胶在不同的坐标上

> ID：13330306
> 
> 赞同：3
> 
> 时间：2012-11-11T10:27:42.487
> 
> 标签：javascript, jquery, zeroclipboard

在此帮助下，我使用了复制到剪贴板功能：

```
function clipboard(control, url, key) {

        ZeroClipboard.setMoviePath('http://davidwalsh.name/dw-content
                                    /ZeroClipboard.swf');
        //create client
        var clip = new ZeroClipboard.Client();

        clip.setText(control.textContent);

        clip.addEventListener('complete', function (client, text) {

            alert('copied: ' + text);
            CheckIPAddress(key);
            window.open(url, '_blank');
        });
        //glue it to the button

        clip.reposition('GridView1_ctl03_lnk');

        clip.glue(control);

    } 
```

到目前为止，它工作正常。

但是当该控件由于滑动特性而改变它的位置时，该控件会保持粘在原始位置以及新位置上。

那么有没有一种方法可以在该控件更改其位置时保持粘在新位置并从旧位置移除。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T10:29:22.063

强烈建议您在按钮周围创建一个“容器”DIV 元素，将其 CSS“位置”设置为“相对”，然后将按钮放在里面。然后，将两个参数传递给glue()，即您的按钮DOM 元素或ID，以及容器DOM 元素或ID。这样，零剪贴板可以相对于容器 DIV（而不是页面主体）定位浮动 Flash 影片，从而实现更精确的定位。示例（HTML）：

```
 <div id="d_clip_container" style="position:relative">
     <div id="d_clip_button")Copy to Clipboard</div>
      </div> 
```

和代码：

clip.glue('d_clip_button', 'd_clip_container');

# css - 单击成为顶部列表项时如何更改列表中的列表项位置

> ID：13330313
> 
> 赞同：2
> 
> 时间：2012-11-11T10:28:25.113
> 
> 标签：css, list, html, position

这是用于将动画显示到列表左上角的缩略图，然后打开更大的图像

这是结构，它是一个很大的列表我只想知道放置这些项目的最佳方法，还是应该将它们作为 div 而不是列表项？

```
<li  class="thumb">
    <img src="img/work/thumbemphasis.jpg">
        <div class="thumb-caption">
            <h4>Creative</h4>
        </div>
</li>
......
<li class="thumb">
<img src="img/work/thumbscale.jpg">
    <div class="thumb-caption">
        <h4>Creative</h4>
    </div>
</li> 
```

我将其应用于使用 css 为大小更改设置动画的项目，我现在只需将其移动到列表的顶部......但我不确定如何去做，任何帮助将不胜感激，谢谢，

```
 $(".thumb").click(function(){
         this.style.width="850px";
         this.style.height="600px";
   }); 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T12:55:07.197

如果我理解正确，您喜欢将第一张图片放大，而其他图片则为缩略图。单击缩略图时，它将占据第一张图像的位置。之前的大图像会回到列表中。

我的建议：

让第一个列表项成为单击列表项的占位符，并添加一个通过绝对定位将活动列表项移动到占位符上的类。所有其他列表项都可以浮动。CSS：

```
.thumb {
 float: left;
 }
.thumb.active {
position: absolute; 
top:0; 
left:0;
width:600px;
height: 850px;}

.placeholder {
width:600px;
height: 850px;} 
```

html

```
<ul>
<li class='placeholder'></il>
<li class='thumb'>...</li>
...
<li class='thumb active'>...</li>
...
</ul> 
```

javascript:

```
$(".thumb").click(function(){
    $('.active').removeClass('active');
     this.addClass('active'); 
```

});

我知道这个问题已经很老了。但这是我的第一个答案之一，所以请考虑复选标记。

# c# - sqlite3 未找到，但已作为参考添加

> ID：13330318
> 
> 赞同：1
> 
> 时间：2012-11-11T10:29:10.300
> 
> 标签：c#, .net, wpf, sqlite, dllnotfoundexception

> System.DllNotFoundException 未处理消息=无法加载 DLL 'sqlite3'：找不到指定的模块。

我已经引用了 DLL。我在 Debug 文件夹中检查它，它就在那里。我还搜索了如何在项目中“包含”它，但他们没有具体解释如何去做。

我正在关注这个例子： http: [//www.codeproject.com/Articles/22165/Using-SQLite-in-your-C-Application](http://www.codeproject.com/Articles/22165/Using-SQLite-in-your-C-Application)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T10:39:11.680

SQLite 没有完整的 .NET 实现，但可用的库是本地库的包装器。

这意味着不仅必须引用 .NET 程序集，而且在执行应用程序时还需要确保本地库也存在。

摘要：输出文件夹将有一个.NET 程序集和一个本机程序集（C/C++ 之一）才能正常工作！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T14:02:39.450

按照步骤 ：

1）在调试文件夹中添加 Dll 2）在你的代码中添加这个

使用 System.Data.SQLite；3）通过转到解决方案资源管理器添加引用并添加它。

4）检查app.config中的版本以验证它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T10:35:54.140

这`System.Data.SQLite.dll`是依赖于平台的程序集，您可以添加对适当程序集的引用。

# linux - Linux Red Hat Bash 是目录错误，试图在 Red Hat VI 中将一个文件值与另一个文件值分开

> ID：13330320
> 
> 赞同：-1
> 
> 时间：2012-11-11T10:29:35.807
> 
> 标签：linux

我正在尝试使用以下代码来解决这个问题，它一直给我一个 bash 是 Red Hat 中的目录错误：

```
#!/bin/bash
expr'cat file2'/'cat file1'>file3
touch file1 file2 file3 
```

~
**这就是问题** 在与上周相同的文件夹中，创建一个名为 week3prog3[name].scr 的新文件。

更改此新文件的权限以添加用户、组和所有者的执行位。

创建两个文件。

• File1 有一行值为 5。 • File2 有一行值为 100。

使用 Gedit 或 VI 编辑新文件并对其进行更改，使其执行以下操作：

• 从上面的两个文件（file1 和file2）中读取值。• 将file2 中的值除以file1 中的值。• 将此计算的结果输出到名为file3 的新文件中。

笔记。请记住将 #!/bin/bash 作为脚本的第一行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T10:33:40.517

您可能需要反引号或 shell 替换。所以也许代码

```
 expr "$(cat file2)/$(cat file1)">file3 
```

但这可能仍然是错误的（但我不明白你想要实现什么）。阅读[高级 bash 脚本指南](http://www.tldp.org/LDP/abs/html/)，并暂时将第一行替换为`#!/bin/bash -vx`以调试您的脚本。

# asp.net - 使用VS2010“发布”将文件上传到自定义目录

> ID：13330321
> 
> 赞同：0
> 
> 时间：2012-11-11T10:29:46.437
> 
> 标签：asp.net, visual-studio-2010, publish

我有一个需要与我的 ASP.NET 站点一起发布到服务器的文件。我将它放在项目根目录中并将“复制到输出目录”设置为“如果较新则复制”。当我发布时，它会将文件复制到“bin”子目录中。不好！我需要它在站点的根目录。`*.aspx`在我的项目中紧挨着它的其他文件（例如我的文件）被复制到根目录。如何设置它以便这个文件也被复制到根目录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T11:30:07.573

将“复制到输出目录”更改为“不复制”，然后将构建操作设置为“内容”。复制到输出目录将文件复制到 bin 文件夹。例如，您将使用该功能来复制程序集所需的许可文件。将构建操作设置为 Content 会导致文件在其相对位置发送到服务器。

# javascript - 不同页面上的相同 cookie（cookie 路径）

> ID：13330324
> 
> 赞同：2
> 
> 时间：2012-11-11T10:30:07.797
> 
> 标签：javascript, cookies, browser, overriding

我有一个应用程序，我需要在 cookie 中存储一些信息。我有一个索引页并将一些信息放入 cookie（例如，一些变量名）。索引页 cookie 有 path `/Main/`。在另一个页面中，我需要阅读此 cookie 并在必要时对其进行修改。但另一个页面 cookie 路径是`/Main/info/`. 浏览器只是创建一个新的 cookie，但我需要覆盖它并`/Main/`在所有页面上使用相同的 cookie 和路径。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T04:10:44.337

添加**路径=/;** 或在创建 cookie 时指定路径。这将防止浏览器为每个域创建重复的 cookie。

对于其中一条评论，如果您查看 Google Chrome 以及它如何显示 cookie，它将向您显示路径。如果您使用相同的 cookie 名称而不指定路径，它将为每个创建一个 cookie。

注意：Internet Explorer 不会做同样的事情，它每个域都有一个文本文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-10T15:56:16.110

您应该为所有`SET-COOKIE`命令定义一个独立于请求资源的子路径的路径（例如`path=/Main`）。一般来说，您应该使用尽可能长的路径......（但您必须使用相同的 cookie 获取所有资源的父路径）。

`/`仅当您的应用程序拥有完整的域并且具有不同顶级路径（例如`/main/...`，`/secondary/...`和`/unimportant/...`）的资源需要 cookie 时，才应使用根 ( )

为什么：

*   安全原因
*   防止与同一域上的其他应用程序产生副作用

# javascript - 仅在 div 中应用 javascript？

> ID：13330330
> 
> 赞同：1
> 
> 时间：2012-11-11T10:31:17.637
> 
> 标签：javascript, html

我编写了几行代码来提取页面中所有 img 标签的 URL。好的，一切正常，但我想知道是否有办法将我的代码应用到页面中的特殊 div 中！！！？我的意思是我想从 div 而不是整个页面正文中获取 img 标签的 URL。我希望我清楚地解释了我的意思:) 任何解决方案将不胜感激

```
 function getURL() {
              var url = [];
              var a = document.getElementsByTagName('img');
              for (var i=0, j = a.length; i<j; i++)
              {
                   if (/\.(jpg|jpeg|gif|png)$/im.test(a[i].getAttribute('src')))
                   {
                      url.push(a[i].getAttribute('src'));
                   }
              }
               document.write(url);
       } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T10:34:39.603

替换`document.getElementsByTagName('img')`为`yourElement.getElementsByTagName('img');`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T10:35:13.867

更改您的函数以接受 startElement 参数，然后在传递的元素上调用 getElementsByTagName

```
 function getURL(startElement) {
          var url = [];
          var a = startElement.getElementsByTagName('img');
          for (var i=0, i < a.length; i++)
          {
               if (/\.(jpg|jpeg|gif|png)$/im.test(a[i].getAttribute('src')))
               {
                  url.push(a[i].getAttribute('src'));
               }
          }
          return url; // return the result instead of writing it
   } 
```

假设你有这个标记

```
<div id='myDiv'><img src='test.jpg'/></div> 
```

然后你可以打电话

```
var urls = getUrl(document.getElementById('myDiv')); 
```

另外我建议不要使用document.write，打开开发工具（通常是F12）并改用console.log，

```
console.log(urls); 
```

# c++ - 将 std::string 转换为 char *

> ID：13330336
> 
> 赞同：2
> 
> 时间：2012-11-11T10:31:59.163
> 
> 标签：c++, string, char

> **可能重复：**
> [将 std::string 转换为 const char* 或 char*](https://stackoverflow.com/questions/347949/convert-stdstring-to-const-char-or-char)

我有一个`std::string`并且想将它作为文件名传递给 fstream

```
std::string fname = "/home/mahmood/filter" + boost::lexical_cast<std::string>(b) + ".txt";
std::fstream fout (fname, std::fstream::app | std::fstream::out); 
```

但我收到第二行的错误

```
error: no matching function for call to ‘std::basic_fstream<char, std::char_traits<char>   >::basic_fstream(std::string&, 
```

似乎它无法转换`string`为`char *`. 铸造也不起作用

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-11T10:33:12.977

用作`fname.c_str()`：

```
std::fstream fout (fname.c_str(), std::fstream::app | std::fstream::out); 
```

`.c_str()`返回`const char*`。在 C++03 中，您必须通过`const char*`.

在 C++11 中，您[可以通过](http://en.cppreference.com/w/cpp/io/basic_fstream/basic_fstream) `std::string`，但您的编译器似乎不支持它。

# android - 表格布局未显示 & getChildCount 导致异常，android

> ID：13330338
> 
> 赞同：1
> 
> 时间：2012-11-11T10:32:03.500
> 
> 标签：android, android-tablelayout

我使用记录的示例之一来试验表格布局。`MainActivity`使用仅具有以下代码的准系统，`setContentView(R.layout.activity_main)`模拟器可以很好地显示表格布局。然后我在该行之后添加了该`setContentView`行，该操作导致：

1.  布局未显示在模拟器中（即使在执行通过 setContentView 行之后，当代码在 tableLayout 声明行的断点处停止时）
2.  与第一行错误`getChildCount()`。

## MainActivity 中的代码如下所示：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    TableLayout tableLayout = null;
    int s = tableLayout.getChildCount(); 

    for(int n = 0; n < s; ++n) {
        TableRow row = (TableRow)tableLayout.getChildAt(n);
        int t = row.getChildCount(); 
```

## }

我错过了什么？提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T10:41:48.807

你必须`TableLayout tableLayout`像这样初始化你的：

```
TableLayout tableLayout = findViewById(R.id.whatever_id_you_gave_to_the_tablelayout); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T10:46:14.867

正如 Luksprog 所说， tableLayout 是 null ，那么你将如何获取 getChildCount 的 null 值。因此，为它分配一个值。

```
TableLayout tableLayout = findViewById(R.id.your_table_layout_id); 
```

这里 your_table_layout_id 是您在 xml 文件中为表格布局提供的 id。

# java - 使用 JSoup 检索 p 标签之间的所有 html

> ID：13330345
> 
> 赞同：1
> 
> 时间：2012-11-11T10:33:11.100
> 
> 标签：java, web-scraping, jsoup

所以这是场景。我有一个大的 html 文件，我想使用 JSoup 来抓取它。我是新手，我一直在阅读一些教程和 API 参考。我有以下 html 块。

```
<p><a name="bob"></a>
<table class='schedules'>
<tr><td  align='center' colspan="5"><b>Bob the Builder</b><br>
<a href="blah blah" class='tiny'>Blah Blah Blah</a></td></tr>
<tr><td class='bk'><a href="random/randomUrl.htm">Blah</a></td><td class='bm'><a href="random/randomUrl.htm">Blah</a></td><td class='nm'><a href="random/randomUrl.htm">blah</a></td><td class='sk'><a href="random/randomUrl.htm">blah</a></td><td class='sk'><a href="random/randomUrl.htm">Blah</a></td></tr>
<tr><td class='bk'><a href="random/randomUrl.htm">Blah</a></td><td class='bk'><a href="random/randomUrl.htm">Blah</a></td><td class='nm'><a href="random/randomUrl.htm">blah</a></td><td class='sk'><a href="random/randomUrl.htm">blah</a></td><td class='sk'><a href="random/randomUrl.htm">Blah</a></td></tr>
<tr><td class='bk'><a href="random/randomUrl.htm">Blah</a></td><td class='bm'><a href="random/randomUrl.htm">Blah</a></td><td class='sk'><a href="random/randomUrl.htm">blah</a></td><td class='sk'><a href="random/randomUrl.htm">blah</a></td><td class='sk'><a href="random/randomUrl.htm">Blah</a></td></tr>
<tr><td class='bm'><a href="random/randomUrl.htm">Blah</a></td><!--<td class='whoohaa'><a href="random/randomUrl.htm">Blah</a></td>--><td class='sk'><a href="random/randomUrl.htm">blah</a></td><td class='cc'><a href="random/randomUrl.htm">blah</a></td><td class='cc'><a href="random/randomUrl.htm">Blah</a></td><td class='sk'><a href="random/randomUrl.htm">Blah</a></td></tr>
<tr></td><td class='sk'><a href="random/randomUrl.htm">Blah</a></td><td class='nm'><a href="random/randomUrl.htm">Blah</a></td><td class='sk'><a href="random/randomUrl.htm">blah</a></td><td class='sk'><a href="random/randomUrl.htm">blah</a></td><td class='sk'><a href="random/randomUrl.htm">Blah</a></td></tr>
<tr><td class='sk'><a href="random/randomUrl.htm">Blah</a></td><td class='nm'><a href="random/randomUrl.htm">blah</a></td><td class='sk'><a href="random/randomUrl.htm">blah</a></td><td class='sk'><a href="random/randomUrl.htm">blah</a></td></tr>
</table>
</p> 
```

现在有更多这些块遵循类似的模式，其中（在第一行中）名称属性发生了变化（从“鲍勃”到其他东西）。我想做的是首先能够选择“bob” p 块，然后检索所有 html，直到最后一行中的终止 p 块。

我尝试了以下方法：

```
Elements innerStuff = doc.select("a:contains(bob) ~ *"); 
```

但它只给了我与 href 属性的链接，我猜这是预期的结果。但是，我正在努力看看我还能如何解决这个问题？

非常感谢您在这方面的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T12:24:57.513

根据 name 属性选择 a 标签的更严格的方法是：

```
doc.select("a[name=bob]") 
```

从那里，您应该能够使用 parent() 导航到您想要的元素（以获取包含链接的 p 标签）例如（您需要先调用 first() 才能获取第一个（也是唯一的）元素匹配选择器）：

```
doc.select("a[name=bob]").first().parent() 
```

但是有一个问题：解析后的 H​​TML 文档与原始 HTML 不同：这是原始 HTML 结构：

```
p
    a[name=bob]
    table
        ... 
```

解析后的 H​​TML 如下所示：

```
p
    a[name=bob]
table
    ...
p 
```

因此，从链接标签开始，要获取该表格的元素，您需要上一层（到段落）并获取下一个元素：

```
doc.select("a[name=bob]").first().parent().nextElementSibling() 
```

# iphone - 如何重新启动我的 iphone 应用程序

> ID：13330353
> 
> 赞同：8
> 
> 时间：2012-11-11T10:34:17.340
> 
> 标签：iphone, objective-c, ipad, application-restart

> **可能重复：**
> [强制 iphone 应用程序以编程方式重新启动](https://stackoverflow.com/questions/4399611/force-iphone-app-to-restart-programmatically)

如何以编程方式重新启动/重新打开我的 iphone/iPad 应用程序

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-11T12:02:57.943

**笔记：**

尽管这已被否决，但我认为对于新的 iOS 开发人员来说，这是一个完全有效的问题。有一种方法可以从用户的角度“重新启动”您的应用程序，这在*技术上*不是重新启动或退出 iOS 应用程序。正如其他答案所指出的那样，iOS App 永远不应明确退出，因为这在 iOS 上是不允许的。

**我的答案：**

如果您希望您的应用程序回到它在启动时的状态，这不是 100% 可能的，但我将解释一种方法来获得大部分的方式，这应该足以满足所有有效目的。

首先要做的是重新创建你的根视图控制器。我建议从应用程序委托中的方法执行此操作，如下所示：

```
- (void)resetAppToFirstController
{
    self.window.rootViewController = [[MyMainViewController alloc] initWithNibName:nil bundle:nil];
} 
```

在许多情况下，这已经足够了，但是您拥有的任何应用程序状态也应该在此方法中重置。例如，注销用户，重置任何非持久状态，并尽可能取消（释放）所有对象。此方法也可用于最初从`application:didFinishLaunchingWithOptions`.

**框架类和单例：**

您将无法完全重置任何框架单例或每个应用程序实例的状态，例如：

```
[UIApplication sharedApplication];
[NSNotificationCenter defaultCenter];
[NSUserDefaults standardUserDefaults];
[UIScreen screens];
// etc... 
```

这可能很好，因为无论如何您都不应该在这些中存储任何非持久状态（除了`NSNotificationCenter`，但是在释放对象时应该删除所有已注册的观察者）。如果您确实想要初始化或重置任何框架状态，您可以使用相同的`resetAppToFirstController`方法进行操作。无论如何，应该没有必要重新创建这些或`window`对象。

如果您有任何自己的单例，您可以通过将它们存储在单例持有者类中来重新创建它们（这本身就是一个真正的单例）。从概念上讲，这是一个简单的单例类，其中包含每个其他单例的属性和一个`reset`方法来取消和释放它们。您的其他单例应使用此类（而不是静态或全局变量）来存储单例实例。如果您使用任何第三方库，请小心，因为它们也可能使用单例，您需要确保它们也使用您的单例持有者，以便您可以根据需要重置它们。无论如何，我认为这种技术是一种很好的做法，因为在某些情况下（例如单元测试），您确实希望通常是单例的对象消失并重新初始化为原始状态。但是，您不想将单例实现与单例持有者耦合，因此实现此目的的一个好方法是使用 an`NSMutableDictionary`作为关联对象`[UIApplication sharedApplication]`以单例类名作为键。但是，我有点偏离主题，因为这是超出此问题范围的更先进的技术。

* * *

就用户而言，上述内容应该足以“重置”您的应用程序。如果你想作为你的第一个视图控制器，你甚至可以再次显示启动画面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T11:04:59.253

不，没有办法以编程方式重新启动 iOS 应用程序。应用程序的生命周期由操作系统控制。

# visual-studio-2010 - 如何修复 NuGet 包中已删除的 DLL？

> ID：13330358
> 
> 赞同：2
> 
> 时间：2012-11-11T10:34:58.367
> 
> 标签：visual-studio-2010, nuget

使用`NuGet`，我将`Json.NET`( `Newtonsoft.Json`) 添加到我的代码中。由于一个错误（向 CMS 添加代码、忽略 DLL 和签出），我的参考 DLL 被删除。

我该如何恢复？

[我关注了这个SO question](https://stackoverflow.com/questions/5847885/fetching-dlls-from-nuget-if-deleted)中的所有链接，但没有任何东西可以恢复 DLL。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T14:05:54.320

如果您仍然有 packages.config 文件，您应该能够使用[nuget.exe 来恢复](http://docs.nuget.org/docs/reference/command-line-reference#Install_Command)packages 文件夹中的包。您可以运行 nuget install 后跟 packages.config 文件的路径。

```
nuget install packages.config 
```

这会将包恢复到包文件夹，但不会修改您的项目。

如果您没有 packages.config 文件，您可以尝试运行 nuget install 指定包 ID 和版本。

如果您的包文件夹中有文件，您可能需要在运行此命令之前删除这些文件。

# windows-8 - 如何在应用程序中显示 Windows 8 Metro 风格磁贴？

> ID：13330364
> 
> 赞同：2
> 
> 时间：2012-11-11T10:36:55.220
> 
> 标签：windows-8, microsoft-metro, windows-runtime

Windows 8 Metro 风格应用程序磁贴是基于预定义的 xml 模板（在[此处](http://msdn.microsoft.com/en-us/library/windows/apps/hh761491.aspx)找到）创建的。

有什么方法可以连接到 Windows 的磁贴渲染以允许在应用程序中进行磁贴预览？

在我的应用程序中，我想为用户提供上面链接中列出的磁贴模板的子集，并让用户自定义磁贴内容。在我的应用程序中呈现的自定义图块的实时预览将大大改善用户体验。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T10:51:44.940

你应该看看[HubTile](http://www.telerik.com/products/windows-8/controls/hubtile.aspx)。

我现在不知道任何免费控件，但 Telerik 和 Syncfusion 有 HubTile 控件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T02:59:11.693

您无法访问真实的 Windows 平铺渲染，但您可以模拟它，因为所有模板都是已知的。微软不太可能改变磁贴的呈现方式，即使他们这样做了，您也应该能够发布应用更新以跟上微软的步伐。

# c# - 带有 EF 5 的 Web API - JSON 响应说明

> ID：13330365
> 
> 赞同：0
> 
> 时间：2012-11-11T10:37:00.297
> 
> 标签：c#, json, entity-framework, asp.net-web-api

我一直在使用带有 EF Code First 5 的 MVC 4 Web API。我有这些 POCO：

```
public class Vehicle
{
    public int Id { get; set; }
    public int VehicleMakeId { get; set; }
    public int Model { get; set; }
    public int Year { get; set; }
    public int FuelType { get; set; }
    public int NoOfSeats { get; set; }   
    public virtual VehicleMake VehicleMake { get; set; }
}    

public class VehicleMake
{
    public int Id { get; set; }
    public string Description { get; set; }
} 
```

还有一个 Web API 控制器调用：'http://localhost:63779/api/'vehicles 和一个看起来像这样的 GET：

```
public IEnumerable<Vehicle> Get()
{
   return Uow.Vehicles.GetAll().OrderBy(v => v.VehicleMake.Description);
} 
```

我可以将 JSON 结果返回到浏览器：

```
{
   id: 1,
   vehicleMakeId: 1,
   model: 1,
   year: 2004,
   fuelType: 2,
   noOfSeats: 1,
   vehicleMake: null
} 
```

注意 vehicleMake 为空。但是，在单步执行代码时，对象确实具有正确的值。

是否可以看到对象的 JSON 响应？我猜它甚至是可取的，什么是查找属性？

我意识到这里缺少很多代码，但希望有人能够解释这里发生的事情。如果没有，我可以发布更多信息。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T10:42:57.600

您的 VehicleMake 是延迟加载的。当您使用调试器查看它时，它会立即加载，因此您需要将其包含在查询中：

```
public IEnumerable<Vehicle> Get()
{
   return Uow.Vehicles.GetAll().Include(v => v.VehicleMake)
           .OrderBy(v => v.VehicleMake.Description);
} 
```

# jquery - 自定义对话框到特定位置

> ID：13330366
> 
> 赞同：0
> 
> 时间：2012-11-11T10:37:44.500
> 
> 标签：jquery, css, html

![在此处输入图像描述](../Images/a742d125ed3c17bd7eaf47c75a4d9d69.png)![在此处输入图像描述](../Images/d1b831fd2019e40da9dcabb518cd41b6.png) ![在此处输入图像描述](../Images/aad5deca3f646e7b3f913e6affaf5c99.png) 如您所见，有 3 张图片 Screenshot1.png 、 Screenshot2.png 、 Screenshot3.png 。在 screenshot1 中，当您单击“创建迭代”时，会创建一个对话框，但它的位置不在正确的位置，即 screenshot2.png 。我想自定义它的位置，就像您在 Screenshot3.png 中看到的那样。因为我试图通过给出 position[200,380] 来固定它的位置，它的工作正常，但对于像笔记本电脑这样的小屏幕，它的位置会受到干扰。那么是否可以自定义它的位置和位置，以便在我创建一个对话框时创建它，如您在 screenshot3.png [1中看到的那样](https://i.stack.imgur.com/2xpKq.png)

我希望在创建对话框时，它应该始终在“迭代页面”中打开。这里迭代 1 是我的对话框。基本上，如果您看到我的代码，那么您可以猜到我想要什么。

代码在这里 [jsfiddle.net/coolanuj/7683X/46/]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T11:44:02.050

您需要做的是根据`offset()`页面中要放置它的元素动态创建位置数组的数组。

以下是一些基于以下简单 html 创建动态定位对话框的演示代码：

HTML

```
<div class="col"><button>Open Dialog</button></div>
<div class="col"><button>Open Dialog</button></div>
<div class="col"><button>Open Dialog</button></div> 
```

JS：

```
/* how much to offset from the main element*/
var dialogOffset = {
        top: 50,
       left: 10
}

$('button').click(function() {
    var $parent = $(this).closest('div.col');
    var parentPos = $parent.offset()
/* create position array for new dialog*/
    var dialogPosition = [parentPos.left + dialogOffset.left, parentPos.top + dialogOffset.top];

    var parentIndex = $('.col').index($parent)

    $('<div>').dialog({      
         position:  dialogPosition,
        width: 150,

        title: 'Column '+(parentIndex+1) ,
        close: function() {
            $(this).remove()
        }
    })
}) 
```

演示：

整页：http: [//jsfiddle.net/CPtp4/show/](http://jsfiddle.net/CPtp4/show/)

代码查看：http: [//jsfiddle.net/CPtp4/](http://jsfiddle.net/CPtp4/)

设置位置的时间取决于您的应用程序，因为使用对话框有不同的设置。您可以以这种方式在每次打开对话框时设置位置：

```
/* iniitalize dialog on page load*/
$('#dialog').dialog({
    autoOpen:false

});

$('#myButton').click(function(){
     var pos=$('#myDiv').offset();
     var dialogPos=[pos.left, pos.top];
     $('#dialog').dialog('option','position',dialogPos).dialog('open')

}) 
```

# drupal - 使用分类日期字段作为 Drupal 7 中视图的过滤器

> ID：13330368
> 
> 赞同：2
> 
> 时间：2012-11-11T10:37:48.603
> 
> 标签：drupal, views, taxonomy

我有一个分类术语“圆形”，我在其中添加了一个日期字段，该字段与列表中每周的星期日相对应。我在周末发生的足球比赛的内容类型中使用了这个术语。这使我可以为分类词汇中列出的任何一周添加一些足球比赛。

例如，第 1 轮（学期）是 5 月 1 日星期日（日期字段）。所以我添加了 4 场足球比赛，选择第 1 轮作为每场比赛的术语。我不必为每个匹配添加相同的日期，因为它已经在分类中指定为一个字段。

我正在创建一个视图来显示即将到来的周末的足球比赛。视图必须显示它是哪一轮，正在比赛的球队，以及比赛的日期。我已经做得很好，但它还必须过滤分类中的日期字段，以便它只显示即将到来的一轮比赛，而忽略过去的那些比赛。

这就是我挣扎的地方。我创建了一个关于节点关系的分类术语，指定了 Rounds 词汇。这允许我选择日期字段作为过滤器，但它不会将其视为日期类型（仅将其视为术语/字符串），因此我无法根据日期进行过滤。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T22:09:47.937

终于找到了答案，这是我的疏忽。我没有启用 views_date 模块，因此尽管视图识别出它是用于显示目的的日期，但它并没有将其识别为用于过滤目的的日期。启用它可以解决问题。

# c# - 如何在 C# 中为 DataGrid 中的单元格设置模板？

> ID：13330371
> 
> 赞同：0
> 
> 时间：2012-11-11T10:38:08.313
> 
> 标签：c#, wpf, entity-framework, datagrid

我有一个数据网格，`ItemsSource`它绑定到 LINQ to Entity 查询的结果，其中一列是`EntityCollection`对象。

```
 private void DataGridRecipientsLoad()
    {
        dataGridRecipients.ItemsSource = from rec in _recipientService.GetAllRecipients()
                                         select rec;
        dataGridRecipients.Columns[7].Visibility = System.Windows.Visibility.Collapsed;
        dataGridRecipients.Columns[8].Visibility = System.Windows.Visibility.Collapsed;            
    } 
```

如何在 C# 中创建一个模板，从其中的项目中取出字符串属性`Entity Collection`并显示它们？现在单元格是空的。

包含被调用的`EntityCollection`实体`MailingList`，我想显示`myMailingList.Name`它们中的每一个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T10:54:21.700

例如，您有客户集合，其中有以下属性：`FirstName`和`LastName`：

```
internal class Customer
{
    public string FirstName {get; set;}
    public string LastName {get;set;}
} 
```

然后你可以为它简单的网格视图：

```
<DataGrid x:Name="CustomersGridView" AutoGenerateColumns="False" >
        <DataGrid.Columns>
            <DataGridTextColumn Header="First Name" Binding="{Binding Path=FirstName}" />
            <DataGridTextColumn Header="Last Name" Binding="{Binding Path=LastName}" />
        </DataGrid.Columns>
    </DataGrid> 
```

而且您还需要分配`ItemSource`（就像您在代码中所做的那样）。您还可以使用`DataGridTemplateColumn`. 我建议您阅读有关 xaml 模板的更多信息。（这个[链接](http://www.wpftutorial.net/DataGrid.html)/[另一个链接](http://blogs.msdn.com/b/vinsibal/archive/2008/08/19/wpf-datagrid-stock-and-template-columns.aspx)有很好的样本）。psAlso 当我看到这样的问题时，我总是建议阅读有关[MVVM](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx)的内容。

# python - Python Tkinter 按钮替换标签

> ID：13330373
> 
> 赞同：1
> 
> 时间：2012-11-11T10:38:30.690
> 
> 标签：python, tkinter

我正在制作一个照片应用程序，我可以按下按钮来添加过滤器或调整照片。

我现在只是用锐化按钮进行测试。我有

> 锐化 = img.filter(ImageFilter.SHARPEN)。

我想要它，所以当我按下锐化按钮时，`tkpi2 = ImageTk.PhotoImage(img)`将其自身替换`tkpi2 = ImageTk.PhotoImage(Sharpen)`为新图像，然后将图像更改为新图像。我想知道我怎么能做到这一点？我从哪里开始？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T10:49:18.870

首先保留对标签和原始图像的引用：

```
self.original_label = Label(self.root, image=tkpi)
self.original_label.grid(row =0, column=0, padx=5,pady=5)
....
self.modified_label = Label(self.root, image=tkpi2)
self.modified_label.image = tkpi2
self.modified_label.grid(row =0, column=1, padx=5,pady=5) 
```

然后，在您的按钮处理程序中，用于`.configure()`更改图像：

```
self.modified_label.configure(image=IMAGE_HERE)
self.modified_label.image = IMAGE_HERE 
```

# nginx - proxy_set_header 未按预期工作

> ID：13330374
> 
> 赞同：1
> 
> 时间：2012-11-11T10:38:33.653
> 
> 标签：nginx, reverse-proxy

我正在尝试让 nginx 在同一域的子路径上代理各种应用程序。

我的问题是应用程序生成的链接`/`用作它们的根而不是它们的子目录。

我的配置是：

```
location /wiki/ {
    proxy_pass http://localhost:4567/;
    proxy_set_header SCRIPT_NAME /wiki;
} 
```

我认为`proxy_set_header SCRIPT_NAME /wiki;`应该设置 header `SCRIPT_NAME`，应用程序使用它来生成链接，而是`HTTP_SCRIPT_NAME`设置，应用程序忽略它。

如何设置`SCRIPT_NAME`以便正确生成我的链接？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T13:33:58.137

根据[CGI 规范](https://www.rfc-editor.org/rfc/rfc3875#section-4.1.18)，http 标头带有`HTTP_`前缀：

> ```
> Meta-variables with names beginning with "HTTP_" contain values read
> from the client request header fields, if the protocol used is HTTP.
> The HTTP header field name is converted to upper case, has all
> occurrences of "-" replaced with "_" and has "HTTP_" prepended to
> give the meta-variable name. 
> ```

也就是说，标题`Some-Header`将被视为`HTTP_SOME_HEADER`在您的应用程序中。也就是说，一切正常 - 您添加了 http 标头，并使用`HTTP_`前缀使其可用。

该`SCRIPT_NAME`变量是[特殊](https://www.rfc-editor.org/rfc/rfc3875#section-4.1.13)的，不是由任何标头设置的，而是由运行应用程序的代码从 URI 构造的。要更改它，您必须实际更改后端看到的 URI，即您需要

```
proxy_pass http://localhost:4567/wiki/; 
```

或者只是`/wiki/`在proxy_pass中没有，只要它在`location /wiki/`，即

```
location /wiki/ {
    proxy http://localhost:4567;
} 
```

这里的坏事是您可能出于某种原因将 URI 从 更改`/wiki/`为`/`，即您的后端应用程序期望`/`. 这个问题有几种可能的解决方案：

1.  实际上将应用程序移动到`/wiki/`. 通常这很容易做到。
2.  更改您的应用程序以通过一些带外方法接受其用于生成链接等的基本 url。许多应用程序已经通过一些配置选项支持这一点。
3.  尝试用 nginx 本身替换您的应用程序返回的内容。有几个 nginx 指令可以做到这一点，特别是[proxy_redirect](http://nginx.org/r/proxy_redirect)、[proxy_cookie_path](http://nginx.org/r/proxy_cookie_path)和[sub filter](http://nginx.org/r/sub_filter)。这是最脆弱的方法，除非您知道您的应用程序返回什么以及必须替换什么，否则不推荐使用它。

# mysql - 将基于一天（星期一，..）的时间表插入 MySQL

> ID：13330375
> 
> 赞同：0
> 
> 时间：2012-11-11T10:38:47.203
> 
> 标签：mysql, stored-procedures

我构建了一个应用程序，该应用程序需要管理员根据特定 MO​​NTH（September，..）和特定 YEAR（2012）中的 DAYNAME（Monday，..）创建巴士时刻表。因此，对于 9 月的每个星期一，2o12 将添加巴士时刻表。如果巴士有周二时间表、周三等，也会发生这种情况。

所以我也希望它可以迭代运行，所以对于 2012 年或 2013 年的整个月，每个星期一都添加一个公交时刻表

我有一个带有列的表；dept_time,_dept_date,date_of_travel 等。我认为存储过程将是最好的解决方案。

请我需要有关如何实现这一点的想法。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T10:51:56.303

存储过程并不总是最好的解决方案（至少在这种情况下不是）。

您只需要创建将解析（并可能验证）您的业务逻辑的客户端脚本或程序（使用 Python、Perl、PHP、Java 等），然后根据该逻辑将记录插入您的表中。此脚本应该是添加/更新记录的唯一实体。

最后，用户将从您的表中读取（选择）信息并将其用作计划。

# android - 如何将 JAX-WS 用于 Android 应用程序

> ID：13330379
> 
> 赞同：0
> 
> 时间：2012-11-11T10:39:31.867
> 
> 标签：android, web-services, web-applications, jax-ws

我正在开发一个我想在其中使用 JAX-WS 的 android 应用程序。这个想法是从我将在服务器上设置的 mysql 数据库中提取数据（目前，wordpress 网站托管在该服务器位置）。我想要的是让我的 android 应用程序从我在服务器机器上设置的数据库中提取一些数据。我是否需要在服务器端编写 Web 应用程序。如何解决这个问题？我没有正确理解这个过程需要什么以及如何设置它。请帮忙。有没有我可以遵循的分步教程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T11:09:09.733

这是一个很棒的教程和启动：

[http://www.vogella.com/articles/REST/article.html](http://www.vogella.com/articles/REST/article.html)

我一直在使用与您相同的设置，并且效果很好。本教程仅介绍 web 服务及其内容，然后您必须为其添加数据库连接

# gmail - 指定执行 Google Apps Script webapp 请求时要使用的 Google 帐户

> ID：13330383
> 
> 赞同：6
> 
> 时间：2012-11-11T10:39:54.630
> 
> 标签：gmail, google-apps-script, google-account

我有一个浏览器扩展程序，当用户在 Gmail 中阅读电子邮件时，它会从 URL 中抓取 threadId，并使用此 threadId 使用 Google Apps Script API 获取间接数据。

然而，该扩展程序不知道可能是几个 Google 帐户中的哪一个正在阅读此消息；它只知道我的 Apps Script webapp 的 URL 和 threadId。因此，当它执行 fetch 时，webapp 会将解释请求视为来自默认用户会话，这在某些情况下是错误的，因此会导致`null`when execution `GmailApp.getThreadById(e.parameter.threadId)`。

所以我想知道的是是否可以指定查询 webapp 时使用的 Google 帐户。除了要求用户注销所有其他帐户并将当前帐户设置为默认帐户之外，还有其他可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T03:32:02.827

不幸的是，Google Apps 脚本不能很好地支持多次登录。请参阅[此页面](https://developers.google.com/apps-script/scripts_google_accounts#multipleAccounts)了解更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-24T16:36:11.097

您可以将 authuser 参数添加到您向 Google Apps 脚本发出的请求中。

authuser 参数的值是在当前浏览器会话中记录的所有 Google 帐户的从零开始的索引。

现在，为了提取您需要发送的索引值，您可以从当前页面中抓取具有 authuser 参数的profiles.google.com 链接，并从中提取您的值并与您的请求一起发送。

该链接可能如下所示：

```
https://profiles.google.com/ ... authuser=0 
```

专门针对 gmail，url 还包含当前的 authuser 索引，例如：

```
https://mail.google.com/mail/u/1/#inbox 
```

上面的这个 URL 在末尾包含 authuser 值 1（在片段之前和 /u/ 之后）

我知道这很复杂，看起来更像是一个黑客。但我认为这肯定是一种解决方法，直到 Google 提供了一种更好的方法来为您的应用程序脚本请求指定上下文。

我希望这可能会有所帮助。

谢谢。

# jquery - jQuery 中的克隆（）

> ID：13330385
> 
> 赞同：1
> 
> 时间：2012-11-11T10:40:44.373
> 
> 标签：jquery, clone

关注[jQuery API](http://api.jquery.com/clone/)

> .clone( [withDataAndEvents] [, deepWithDataAndEvents] )
> 
> > **deepWithDataAndEvents**一个布尔值，指示是否应复制克隆元素的所有子元素的事件处理程序和数据。默认情况下，它的值与第一个参数的值匹配（**默认为 false**）。

这是我的代码：

HTML：

```
<div id="d1">Click this paragraph to increase text size.<p id="p1">This is another</p></div>
<button>Click me</button> 
```

Javascript：

```
$("button").click(function(){
    var para = $("#d1:first").clone(true);
    $("body").append(para);
});
$("#d1").click(function(){
   $(this).animate({fontSize:"+=1px"});
});
$("#p1").click(function(){
   $(this).css({color:"green"});
}); 
```

当我单击按钮时， #p1 变为 green 。按照我使用**clone(true)**的 api ， deepWithDataAndEvents 必须为 false 并且 #p1 不能受到影响。我使用 jQuery v1.8.2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T10:45:54.773

看起来您误解了文档中的部分内容：

> **deepWithDataAndEvents**一个布尔值，指示是否应复制克隆元素的所有子元素的事件处理程序和数据。**默认情况下，它的值与第一个参数的值匹配**（默认为 false）。

由于您`true`在第一个参数中提供且未指定`deepWithDataAndEvents`，*因此默认为`true`, not`false`*。要获得您正在寻找的行为，您实际上应该编写：

```
var para = $("#d1:first").clone(true, false); 
```

# php - PHP 在反 CSRF 令牌上的进一步安全性

> ID：13330390
> 
> 赞同：1
> 
> 时间：2012-11-11T10:41:13.127
> 
> 标签：php, csrf

我正在学习如何使用反 CSRF 令牌来防止 CSRF。本质上，这个想法是：-

1) 生成一个令牌，例如 Md5 或 Sha1，然后将此值存储在会话变量中：-

```
$token = md5(uniqid(rand(), TRUE));
$_SESSION['token'] = $token; 
```

2) 所有表单都在 POST 隐藏字段中包含此令牌值

```
<input type='hidden' name='token' value='$nonce_token' /> 
```

例如，在源代码中用户会是什么样子：-

```
<input type='hidden' name='token' value='9ee66e4e63a06ee4b83a3edde4ecd587' /> 
```

3）一旦发送表单，检查 POST 隐藏字段令牌值是否与存储在会话值中的令牌匹配

```
if($_POST['token']==$_SESSION['token']){...ok...} 
```

然而，这个过程似乎有点缺陷，因为通过在隐藏的 POST 字段中包含令牌值，攻击可以简单地查看网站源代码以查看令牌，然后将其包含在我的应用程序将因此而生成的恶意 POST 表单中一旦收到作为发送的令牌值成功将匹配我的会话变量中的令牌值，因为我基本上向攻击者显示我的隐藏字段中的令牌值。

因此，我的问题是最好的解决方法是什么，因为我的一些想法似乎仍然没有什么缺陷：-

1) 改用 _GET 但这仍然有 _POST 之类的缺陷

2) 在 x 分钟或每个请求后更改令牌值，但在返回浏览器时会导致可用性问题或在用户填写表单时失败，并且令牌值与更新的会话令牌值相比会变得过时，因为隐藏令牌值不会在用户更新时更新填写表格。

3）尝试加密隐藏的 POST 表单令牌值，然后在发送 POST 时解密，但加密/解密已经散列的值似乎很复杂，尤其是一种加密方式具有 MD5 等值？

任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T10:51:50.270

您需要做的是使隐藏字段成为带有盐的会话 ID 的 MD5 或 SHA1 哈希。这样，您将提交的值与会话 ID 的哈希值加盐进行比较，如果它们匹配，则它是有效的。如果攻击者可以猜到令牌，那么他们已经窃取了会话 ID，并且由于登录已被劫持，因此再进行保护将毫无意义。真的就这么简单。这是每个 OWASP 关于如何防止 CSRF 的一些重要信息[https://www.owasp.org/index.php/Cross-Site_Request_Forgery_(CSRF)_Prevention_Cheat_Sheet](https://www.owasp.org/index.php/Cross-Site_Request_Forgery_(CSRF)_Prevention_Cheat_Sheet)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T10:50:02.087

> 然而，这个过程似乎有点缺陷，因为通过在隐藏的 POST 字段中包含令牌值，攻击可以简单地查看网站源代码

不，他们不能。

爱丽丝经营一个网站。Bob 访问该网站。Mallory 正在攻击 Bob 的帐户。

Bob 在访问 Alice 的网站时会获得一个 nonce 令牌。

如果 Mallory 访问该站点，Mallory 将获得*不同*的nonce（因为 Mallory 将有不同的会话）。

如果 Mallory 生成了一个包含恶意数据的表单（在她的网站上）并欺骗 Bob 提交它，那么 Mallory 放入表单的 nonce 将与 Bob 会话中的 nonce 不匹配，并且提交将被拒绝。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-11T11:37:49.663

让我们回顾一下攻击场景：

1.  您有一个服务器，`example.com`并且您在表单中使用 CSRF 令牌。
2.  每个 CSRF 令牌都是唯一的，特定于用户并且仅在一段时间内有效。
3.  恶意第三方 Eve 诱骗您的用户 Alice 访问她的站点，试图发起 CSRF 攻击。
4.  如果 Eve 只是欺骗 Alice 向你的服务器提交一个没有 CSRF 令牌的表单，你的服务器将拒绝它。
5.  如果 Eve 在您的服务器上也有一个帐户并尝试获取*任何*令牌以与表单一起提交，这将失败，因为该令牌对 Alice 无效。

这留下了这种情况：使用 Javascript，Eve 从您的服务器获取一个表单*作为 Alice*，然后将该表单提交回来，包括一个有效的令牌。Ie Eve 完全模仿 Alice 使用 Javascript 进行常规表单提交的整个过程。[Same Origin Policy](http://www.w3.org/Security/wiki/Same_Origin_Policy)可以防止这种情况发生。Eve 的 Javascript 将无法从您的服务器获取信息，Alice 的浏览器会阻止这种情况，因为它违反了同源策略。

也就是说，假设浏览器中没有允许 Eve 绕过该策略的安全漏洞。这也意味着您需要防范 XSS，即防止 Eve 能够将她的脚本之一注入您的网站，因此您网站的常规访问者会将 Eve 的脚本作为您网站的一部分从同一来源运行。

* * *

作为自我推销，我刚刚实现了一个基于签名的 CSRF 令牌库，您可能想看看：[Kunststube\CSRFP](https://github.com/deceze/Kunststube-CSRFP)。我还想征求同行评审和批评，而我正在这样做。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-11T11:01:25.613

首先，您必须记住，您无法阻止黑客攻击您的应用程序，只有您可以让事情变得更加困难。

当您考虑 CSRF 攻击的主要目标是什么时，这个想法就很清楚了，CSRF 是一种攻击，它诱使受害者加载包含恶意请求的页面。从某种意义上说，它是恶意的，它继承了受害者的身份和特权以代表受害者执行不希望的功能，例如更改受害者的电子邮件地址、家庭住址或密码，或购买东西。CSRF 攻击通常针对导致服务器状态更改的函数，但也可用于访问敏感数据。

因此，如上所述，攻击者不会直接攻击您的网页，他们需要桥接，就是他们需要受害者，因此他们可以使用受害者身份和权限来执行操作。

当你说：

> 然而，这个过程似乎有点缺陷，因为通过在隐藏的 POST 字段中包含令牌值，攻击可以简单地查看网站源代码

这是没有意义的，因为攻击者不会攻击自己。

我希望这对您有帮助。

# c - 错误的冲突类型

> ID：13330394
> 
> 赞同：0
> 
> 时间：2012-11-11T10:41:30.700
> 
> 标签：c, types

我正在使用数组实现来处理优先级队列。一切似乎工作正常，但我收到此错误：'remove' 的类型冲突我已经在其头文件中声明了该函数，我已经包含了头文件，但编译器仍然抱怨。我认为问题出在其他地方。

这是 pqueue.h：

```
 #ifndef PQUEUE_H
    #define PQUEUE_H
    //---------------

    #define HIGHP  0
    #define MEDP   1
    #define LOWP   2
    #define MAXEL 10

    #include <stddef.h>

    typedef struct message {
        char data[100];
        int priority;
    } message;

    typedef struct pQueue {
        struct message messages[10];
        int rear;
        int front;
        int size;
    } pQueue;

    void initPQueue(pQueue *pq);
    void add(pQueue *pq, char *data, int pri);
    char* remove(struct pQueue *pq);    // Error: conflicting types for: 'remove'
    int isEmpty(pQueue *pq);

    #endif 
```

pqueue.c：

```
 #include "pqueue.h"
    #include <string.h>

    void initPQueue(pQueue *pq) {
        pq->front = 0;
        pq->rear = 0;
        pq->size = 0;
    }

    void add(pQueue *pq, char *data, int pri) {
        if (pq->size > MAXEL) {
            return; // NOTE: data is lost
        }
        message m;
        strcpy(m.data, data);
        m.priority = pri;

        if (isEmpty(pq)) {
            pq->messages[pq->rear] = m;
            pq->rear = (pq->rear % (MAXEL - 1)) + 1;
            return; // done
        }

        /**TODO: NEEDS REPAIR**/
        int i = 0;
        int j = 0;
        for (; i < pq->rear; i = (i % (MAXEL - 1)) + 1) {
            if (m.priority > pq->messages[i].priority) {
                // found element with higher or equal priority
                for (j = pq->rear - 1; j >= i; j = (j % (MAXEL - 1)) - 1) {
                    pq->messages[j] = pq->messages[j - 1];
                }
                    break;
            }
        }
        pq->messages[i] = m;
        /****/

        pq->size++;
    }

    char* remove(struct pQueue *pq) {
        if (isEmpty(pq)) {
            return NULL ;
        }
        pq->size--;
        return pq->messages[pq->front].data;
    }

    int isEmpty(pQueue *pq) {
        if (!pq->size) 
            return 1;

        return 0;
    } 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T10:44:35.263

`int remove(const char *path)`是标准函数。你需要为你的名字选择一个不同的名字。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T10:46:13.013

为了回应其他人所说的，有一个标准功能。但除此之外，在 C 中，您应该始终在函数前面加上库的名称和它所操作的类型，以避免这些问题。例如，最好将您的函数命名为：

```
mylibrary_pqueue_remove 
```

这将避免与标准库和其他人的代码发生命名冲突。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-11T10:44:46.183

`remove`是一个保留标识符，你不能在你的程序中使用它，只要你包含`<stdio.h>`.

> **7.21.4.1`remove`功能**
> 
> `#include <stdio.h>`
> `int remove(const char *filename)`;
> 
> 该`remove`函数导致名称为 filename 指向的字符串的文件不再可通过该名称访问。随后尝试使用该名称打开该文件将失败，除非它是重新创建的。如果文件打开，则删除函数的行为是实现定义的。

# java - Java 正则表达式跳过匹配

> ID：13330401
> 
> 赞同：2
> 
> 时间：2012-11-11T10:42:57.500
> 
> 标签：java, regex

我有一些文字；我想提取没有用标点符号分隔的单词对。这是代码：

```
//n-grams
Pattern p = Pattern.compile("[a-z]+");
if (n == 2) {
    p = Pattern.compile("[a-z]+ [a-z]+");
}
if (n == 3) {
    p = Pattern.compile("[a-z]+ [a-z]+ [a-z]+");
}
Matcher m = p.matcher(text.toLowerCase());
ArrayList<String> result = new ArrayList<String>();

while (m.find()) {
    String temporary = m.group();
    System.out.println(temporary);

    result.add(temporary);
} 
```

问题是它跳过了一些匹配。例如

> “我的名字是詹姆斯”

，对于 n = 3，必须匹配

> “我的名字是”和“名字是詹姆斯”

, 但它只匹配第一个。有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T10:55:24.857

您可以使用前瞻中的组来捕获它

```
(?=(\b[a-z]+\b \b[a-z]+\b \b[a-z]+\b)) 
```

这会导致它分为两组捕获..所以在你的情况下它会是

组1->`my name is`

组2->`name is james`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T10:49:35.643

在正则表达式中，由正则表达式定义的模式从左到右应用于字符串，一旦在匹配中使用源字符，它就不能被重用。

例如，正则表达式“121”将仅匹配“31212142121”两次作为“<em>121___121”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-11T10:59:04.690

我倾向于使用以下`find()`方法的参数`Matcher`：

```
Matcher m = p.matcher(text);
int position = 0;
while (m.find(position)) { 
  String temporary = m.group();
  position = m.start();  
  System.out.println(position + ":" + temporary);
  position++;
} 
```

所以每次迭代后，它会根据最后一个开始索引再次搜索。

希望有帮助！

# ruby-on-rails - Rails / postgres：为一个用户存储电话号码列表的最佳方式是什么

> ID：13330404
> 
> 赞同：6
> 
> 时间：2012-11-11T10:43:17.107
> 
> 标签：ruby-on-rails, postgresql, activerecord, hstore

所以我对如何在一列中存储电话号码列表有点困惑。以下是要求：

1.  用户可以拥有多个电话号码。
2.  电话号码必须是唯一的，因此如果用户 A 添加了用户 B 使用的电话号码，则应显示验证错误。
3.  如果用户有多个电话号码，则应选择默认电话号码。
4.  解决方案必须与 Postgresql 兼容。

我想到了四种可能的解决方案：

1.  HStore：创建一个`phone_number`存储所有电话号码哈希的字段。例如`{1=>"+1-800-123-1234", 2=>"9237492734", "default"=>1}`。在这种情况下，我需要进行大量查询以确保新电话号码是唯一的，例如我需要查询`User.where("phone_number @> ('1' => '+1-800-123-1234')")`然后签入 2 `User.where("phone_number @> ('2' => '+1-800-123-1234')")`... 等等。
2.  一个字段中的电话号码数组：`phone_number`将存储逗号分隔的电话号码，例如“+1-800-123-1234,9237492734”。检查现有电话号码很容易`User.where("phone_number LIKE '%+1-800-123-1234%'")`，但数据库要花很多时间才能找到它。`default_phone`也将被添加到表格中，或者按照惯例将第一个电话号码设为默认号码。
3.  将电话号码限制为 3 个（足够了）并创建`phone_number_1`,`phone_number_2`和`phone_number_3`字段。检查电话号码的唯一性将消耗 3 个查询。也将需要添加`default_phone`.
4.  添加一个新表`phone_numbers`（id:integer, user_id:integer, phone_number:string, default:boolean）并设置与 User 模型的 has_many 关系。这并不是真正的诱惑......为 1 个字段创建一个完整的表。但它具有快速查找功能，并且每个用户都有无限的电话号码。

非常感谢任何想法、提示和建议。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-11T12:18:33.530

两张桌子是要追求的解决方案。您可能有多个用户可以通过同一个电话号码联系到他们，例如作为固定电话的工作号码或家庭号码。

```
CREATE TABLE users (
  id SERIAL PRIMARY KEY,
  name TEXT NOT NULL,
  -- other bits of information
);

CREATE TABLE phone_numbers (
  user_id INTEGER REFERENCES users (id),
  phone_number TEXT NOT NULL,
  location TEXT NOT NULL, -- Mobile, home, work
  PRIMARY KEY (user_id, phone_number),
  INDEX (phone_number)
); 
```

如果您真的想强制执行“每个人都有一个唯一的电话号码，并且该电话号码不能用于联系其他任何人”，只需在 phone_number 列中添加一个 UNIQUE 约束。

# opencv - cvResize 标识符未定义

> ID：13330405
> 
> 赞同：4
> 
> 时间：2012-11-11T10:43:23.703
> 
> 标签：opencv

我所有的 OpenCV 功能都运行良好。但是`cvResize()`编译器找不到。我猜这个功能在安装过​​程中没有安装。以下程序告诉我 cvResize 标识符未定义的错误

是否可以单独下载此功能并使用它？如何？

```
#include "opencv2/highgui/highgui.hpp"
#include <iostream>
#include <ctype.h>
#include <iostream>

using namespace std;

int main( int argc, char** argv )
{

    // Create an IplImage object *image 
    IplImage *source = cvLoadImage( argv[1]);
    // Here we retrieve a percentage value to a integer
    int percent = atoi(argv[3]);

    // declare a destination IplImage object with correct size, depth and channels
      IplImage *destination = cvCreateImage
    ( cvSize((int)((source->width*percent)/100) , (int)((source->height*percent)/100) ), source->depth, source->nChannels );

    //use cvResize to resize source to a destination image
    cvResize(source, destination);

    // save image with a name supplied with a second argument
      cvSaveImage( argv[2], destination );

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-11T11:53:50.553

您缺少包括：

```
#include "opencv2/imgproc/imgproc_c.h" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-10-15T00:27:32.013

我通过以下方式修复了错误

```
#import <opencv2/imgproc/imgproc_c.h> 
```

# android - 如何扩展 AlertDialog.Builder 结果？

> ID：13330406
> 
> 赞同：0
> 
> 时间：2012-11-11T10:44:08.107
> 
> 标签：android, android-alertdialog, builder

我需要为这些项目显示一个`AlertDialog`带有 a`ListView`和一个上下文菜单`ListView`。我更喜欢使用`AlertDialog.Builder`和调用`setItems()`，所以它为我`Builder`创建了一个带有风格化布局的`ListView`内部。`AlertDialog`对于样式化，它使用内部 Android 资源，因此我无法在我的代码中重新实现它。

问题是我无法捕获上下文菜单项单击事件，因为默认[`AlertDialog.onMenuItemSelected()`](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.1.1_r1/android/app/Dialog.java#Dialog.onMenuItemSelected%28int%2Candroid.view.MenuItem%29)实现不会将此类事件转发给父级：

```
public boolean onMenuItemSelected(int featureId, MenuItem item) {
    return false;
} 
```

我不能扩展`AlertDialog.Builder`类并强制它创建我自己的实例，`AlertDialog`因为`onMenuItemSelected()`我需要重写[`AlertDialog.Builder.create()`](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.1.1_r1/android/app/AlertDialog.java#AlertDialog.Builder.create%28%29)它。但它使用了一个私有`P`变量，不能从派生类访问：

```
 public AlertDialog create() {
        final AlertDialog dialog = new AlertDialog(P.mContext, mTheme, false);
        P.apply(dialog.mAlert);
        dialog.setCancelable(P.mCancelable);
        if (P.mCancelable) {
            dialog.setCanceledOnTouchOutside(true);
        }
        dialog.setOnCancelListener(P.mOnCancelListener);
        if (P.mOnKeyListener != null) {
            dialog.setOnKeyListener(P.mOnKeyListener);
        }
        return dialog;
    } 
```

有没有办法强制`AlertDialog.Builder`构建一个自定义`AlertDialog`（`onMenuItemSelected`方法被覆盖）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T16:40:03.547

我仍然没有找到问题的解决方案，但是我发现了一些问题，这使得解决方案毫无用处。对于 Android 2.1，内置`ListView`项目 (android.R.layout.select_dialog_item) 显示为深灰色背景上的黑色文本，`ListView`项目不与对话框消息 ( `setMessage()`) 分离等。

我终于切换回我自己`AlertDialog`的自定义布局`ListView`及其项目（`AlertDialog.Builer`未使用）。通过这种方式可以轻松捕获上下文菜单事件。

Luksprog，非常感谢您的评论。但主要想法是尽可能多地使用风格化布局。AFAIK，没有标准布局（`android.R.layout.*`）提供您提到的按钮。此外，有时可以使用按钮删除项目。使用上下文菜单，至少需要两次单击才能删除项目。

# php - 自动保存 textarea 内容 javascript 和 php

> ID：13330414
> 
> 赞同：1
> 
> 时间：2012-11-11T10:44:58.317
> 
> 标签：php, javascript, textarea, autosave

我正在为作家构建一个非常简单的文本编辑器作为网络应用程序，它本质上是一个美化的文本区域，但我需要它来自动保存文本区域的内容，以便用户可以离开页面并返回而无需重新开始。问题是，我对 PHP 知之甚少，但我知道我会以某种形式需要它。您可以提供的任何提示/方向/帮助都会很棒。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T11:05:28.197

在没有看到任何实际代码的情况下很难给你具体的例子。但这就是你如何让它发挥作用。真的很少有办法。

您需要考虑的第一件事是您会将临时内容保存在哪里？您可以将其保存到您的数据库、html5 网络存储中，或者您甚至可以将其保存到 cookie 中，如果用户正在编辑的文本不是很大的话。

**将临时内容保存到网络存储中：**

您可以将临时内容保存到网络存储中。然后，如果用户决定关闭他的浏览器，然后再回来，你会首先查看他是否有一些临时内容保存在他的网络存储中。如果是，那么您使用该内容填充他的编辑表单。您应该创建某种跟踪系统来了解何时保存内容。您可以每 5 分钟保存一次内容。

**将临时内容保存到数据库中：**

我假设你知道足够的 PHP 来启动数据库连接，以及足够的 SQL 来将一些内容保存到数据库中。您需要做的是使用 AJAX 将表单内容发送到临时数据库表中。当用户开始将文本写入表单时，您会不时地将表单的内容发送到您的 PHP 脚本/操作控制器，该控制器会将该内容保存到临时表中。您将使用 AJAX 来实现这一点，因为您不想在每次要保存临时内容时强制用户刷新浏览器。然后如果用户关闭他的浏览器，并想编辑文本，你会首先检查用户是否有一些临时内容保存在数据库中，并将该内容插入到他的表单中。

有很多方法可以完成这项工作，您只需要决定将内容保存在哪里。我会使用数据库和快速 AJAX 调用。由于并非所有浏览器都支持 HTML5 网络存储，而且 cookie 对于大文本来说很小，并不是真正设计为以这种方式工作的。而且我不会依赖客户端，因为用户可以轻松清除他的历史记录。数据库和 AJAX 调用是比 HTML5 Web 存储更复杂的解决方案，但我认为这是最好的方法。

基本思路是这样的：

*   生成 HTML 表单
*   检查是否有一些临时内容，如果有，将其插入到表单中
*   让用户编辑他的内容，并每隔 5 分钟左右将其保存到您选择的存储中。

在处理 HTML5 Web Storage 和 AJAX 时，我建议你看看 jQuery，它可以让你的生活更轻松。

你有基本的想法如何解决这个问题，现在由你来编写你的代码:) 祝你好运！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T10:57:27.900

> *但我需要它来自动保存文本区域的内容，以便用户可以离开页面并返回而无需重新开始。*

您可以在 php 中使用 ajax 和 session[在数据库中存储]（或 cookie）使用令牌来实现此目的，但这是一种更简单的方法。（假设您有客户端存储选项）

看看[西西弗斯](http://simsalabim.github.com/sisyphus/)

从介绍：

> 在现场使用 Sisyphus，您只需在现代（支持 HTML5）浏览器中重新打开页面，并在该表单上查看您的所有更改。它是轻量级的 (3.5 KB) jQuery 插件使用本地存储来防止您的工作丢失。

支持的弓箭手：

*   铬 4+
*   火狐 3.5+
*   歌剧 10.5+
*   野生动物园 4+
*   浏览器 8+
*   在 Sisyphus 之前加载的页面上带有[jStorage](http://www.jstorage.info/)的IE 6 和 7

# android - Android：当不一致的情况不可避免时如何正确退出应用程序？

> ID：13330415
> 
> 赞同：2
> 
> 时间：2012-11-11T10:44:58.370
> 
> 标签：android, android-asynctask, exit

首先，我已经阅读了所有这些讨论，即手动退出 Android 应用程序不是一个好主意。但就我而言，这似乎是必要的。我有一个`AsyncTask`在后台进行很多操作的。这意味着下载数据，将其保存到本地存储并准备在应用程序中使用。可能会发生没有互联网连接或发生不同情况的情况。对于所有这些情况，我都有一个返回结果的异常处理。如果出现异常，应用程序将无法使用，因此我需要退出它。我的问题是，当我通过代码退出应用程序时，我是否必须执行一些取消注册卸载或解除绑定任务或其他操作`System.exit(0)`？我在一个中完成所有这些`AsyncTask`，请参见我的示例：

```
public class InitializationTask extends AsyncTask<Void, Void, InitializationResult> {
    private ProcessController processController = new ProcessController();
    private ProgressDialog progressDialog;
    private Activity mainActivity;

    public InitializationTask(Activity mainActivity) {
        this.mainActivity = mainActivity;
    }

    @Override
    protected void onPreExecute() {
        super.onPreExecute();

        progressDialog = new ProgressDialog(mainActivity);
        progressDialog.setMessage("Die Daten werden aufbereitet.\nBitte warten...");
        progressDialog.setIndeterminate(true); //means that the "loading amount" is not measured.
        progressDialog.setCancelable(false);
        progressDialog.show();
    };

    @Override
    protected InitializationResult doInBackground(Void... params) {
        return processController.initializeData();
    }

    @Override
    protected void onPostExecute(InitializationResult result) {
        super.onPostExecute(result);

        progressDialog.dismiss();

        if (!result.isValid())  {
            AlertDialog.Builder dialog = new AlertDialog.Builder(mainActivity);
            dialog.setTitle("Initialisierungsfehler");
            dialog.setMessage(result.getReason());
            dialog.setPositiveButton("Ok",
                    new DialogInterface.OnClickListener() {

                        @Override
                        public void onClick(DialogInterface dialog, int which) {
                            dialog.cancel();

                            //TODO cancel application
                            System.exit(0);
                        }
                    });

            dialog.show();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T11:13:08.993

好吧，您已经提到关闭 Android 应用程序不是一个好主意。

你真的不应该使用`System.exit()`！如果您需要它，那么您的应用程序的体系结构存在严重问题。例如，您可以有一个专用于这些“无连接”状态的特殊屏幕。

处理这种“无数据”状态的解决方案可能是通过调用关闭活动（或所有活动）`finish`（这很好）。在完成一项活动之前，您应该进行清理：取消任务、取消注册接收器等。现在应用程序仍然处于活动状态，但您必须让系统将其杀死。杀死它与Android的工作方式相反。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T10:57:59.883

虽然从技术上讲，使用`System.exit`会起作用（操作系统会负责清理进程），但您不应该使用它。

我会重新考虑你正在采取的方法。处理任务中的错误的正确方法是将错误传播到运行任务的活动，在那里可以处理它，然后`finish()`如果检测到此类错误，则只传播活动。这允许您在应用程序（或最顶层的活动）关闭之前向用户显示一条消息，通知他们错误。

# c# - 如何运行任务集合、暂停所有任务、更新数据表，然后允许任务继续使用更新的数据表？

> ID：13330425
> 
> 赞同：3
> 
> 时间：2012-11-11T10:46:28.050
> 
> 标签：c#, multithreading, c#-4.0, task-parallel-library, task

我有 4 个任务，每个任务都运行相同的方法，但参数不同。每个任务都从数据表中读取数据。

**编辑：**我需要分析的数据太大而无法将其全部加载到内存中。因此，我将使用分页来检索较小的数据块。因此，该过程如下：

1.  使用 for 循环/task.Factory 创建 X 个任务，并手动将参数分配给每个任务。（我已经研究了并行 for 循环。）

2.  等到所有任务都运行完第一页数据。

3.  将第二页数据加载到数据表中。

4.  相同的 X 任务将**重新**开始运行新数据

5.  重复直到从数据库中读取所有数据。

**结束编辑**

在我转到 sql server 并检索下一页数据之前，我需要一种等待每个任务完成读取数据表中的所有数据的方法。

目前我正在考虑执行以下操作：在我传递给方法的对象（myEntity）中声明2个变量，

1 = 创建的任务数 (myEntity.TaskCount)。

2 = 完成多少任务的计数器 (myEntity.Count)。

```
public List<int> GetData(object myEntity)
{
    List<int> myList;

    if(rowCounter == myDataTable.Rows.Count)
    {
        myEntity.Count++;

        while(myEntity.Count != myEntity.TaskCount)
        {

        }

        //Refill datatable with new data.
        //rowCounter = 0;
    }
    else
    {
        myList = new List<int>();

        //Assign the values to each tasks myList.   
    }
    return myList;
} 
```

[问题 1] 如何暂停任务，更新数据表，然后让它们继续？

[问题 2] myList 是特定于任务的（即我有 4 个不同的 myList，因为我有 4 个任务）或者它的值是否会在所有任务之间共享？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T11:36:42.460

您可以使用`ContinueWith`TPL 中的方法来等待所有子任务。
像这样的东西：

```
var parentTask = new Task(() => {
    new Task(() => YourFunction1(), TaskCreationOptions.AttachedToParent).Start();
    new Task(() => YourFunction2(), TaskCreationOptions.AttachedToParent).Start();
    new Task(() => YourFunction3(), TaskCreationOptions.AttachedToParent).Start();
    new Task(() => YourFunction4(), TaskCreationOptions.AttachedToParent).Start();
});

parentTask.ContinueWith(p => UpdateYourDatabase());

parentTask.Start(); //Start parent that will start its child tasks. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T13:22:48.863

您可以使用`Task.WaitAll(tasks);`来等待一系列任务。

只需将每个生成的任务添加到列表中，然后等待它们，然后再转到下一页。

```
bool moreData = true;
while(moreData){
    // Go get the next page of data ...
    moreData = TryGetNextPage();

    // spin up the tasks
    List<Task> tasks = new List<Tasks>();
    for(int i = 0; i < maxLoops ; i++){
       Task t = Task.Factory.StartNew(() => { // your action } );
       tasks.Add(t);
     }

     Task.WaitAll(tasks.ToArray());
 } 
```

# jquery - 带有自定义开始和暂停按钮的网站背景音乐

> ID：13330427
> 
> 赞同：0
> 
> 时间：2012-11-11T10:46:47.677
> 
> 标签：jquery, jplayer

谁能告诉我如何在屏幕上没有播放器的情况下使用 jPlayer 和 jQuery 向网站添加背景？请在此处查找示例：

[http://ghostpool.com/wordpress/picturesque/#/fashion/3](http://ghostpool.com/wordpress/picturesque/#/fashion/3)

我也想有一个像这样的自定义按钮![在此处输入图像描述](../Images/5270052b643f92986c4187275c10290a.png)来停止和开始音乐（使用切换方法）

# c++ - 英特尔 C++ 编译器编译递归 decltype 返回的速度极慢

> ID：13330428
> 
> 赞同：7
> 
> 时间：2012-11-11T10:47:08.440
> 
> 标签：c++, c++11, variadic-templates, icc, decltype

我正在为由任意数量的`char`标签参数化的表达式编写模板。

给定一个参数列表，工厂函数根据是否有两个相同类型的参数或它们是否唯一来返回不同类型的表达式。

一个具体的例子：假设这`A`是一个“可标记”的对象，其`operator()`重载以产生一个`?Expression<...>`. 让我们`a, b, ...`声明为标签`LabelName<'a'>, LabelName<'b'>, ...`。Then`A(a,b,c,d)`会产生 a `UniqueExpression<'a','b','c','d'>`，而`A(a,c,b,c)`会产生 a `RepeatedExpression<'a','c','b','c'>`。

为了实现这一点，我必须用和定义`?Expression`的工厂函数。此外，必须级联到另一个，直到元程序完成对参数的递归并且最终确定返回类型。作为说明，我已经为工厂方法隔离了一个相当少的代码。`auto``decltype``decltype``decltype`

```
template <typename... T> struct TypeList { };
template <char C> struct LabelName { };

template <typename... T> class UniqueExpression
{
    // Contains implementation details in actual code
};

template <typename... T> class RepeatedExpression
{
    // Contains implementation details in actual code
};

class ExpressionFactory {
private:
    template <char _C, typename... T, typename... _T>
    static UniqueExpression<T...>
    _do_build(TypeList<T...>,
              TypeList<LabelName<_C>>,
              TypeList<>,
              TypeList<_T...>)
    {
        return UniqueExpression<T...> ();
    }

    template <char _C, typename... T, typename... _T1, typename... _T2, typename... _T3>
    static RepeatedExpression<T...>
    _do_build(TypeList<T...>,
              TypeList<LabelName<_C>, _T1...>, 
              TypeList<LabelName<_C>, _T2...>,
              TypeList<_T3...>)

    {
        return RepeatedExpression<T...> ();
    }

    template <char _C1, char _C2, typename... T, typename... _T1, typename... _T2, typename... _T3>
    static auto
    _do_build(TypeList<T...>,
              TypeList<LabelName<_C1>, _T1...>, 
              TypeList<LabelName<_C2>, _T2...>,
              TypeList<_T3...>)
    -> decltype(_do_build(TypeList<T...>(),
                          TypeList<LabelName<_C1>, _T1...>(),
                          TypeList<_T2...>(),
                          TypeList<_T3..., LabelName<_C2>>()))
    {
        return _do_build(TypeList<T...>(),
                         TypeList<LabelName<_C1>, _T1...>(),
                         TypeList<_T2...>(),
                         TypeList<_T3..., LabelName<_C2>>());
    }

    template <char _C1, char _C2, typename... T, typename... _T1, typename... _T2>
    static auto
    _do_build(TypeList<T...>,
              TypeList<LabelName<_C1>, LabelName<_C2>, _T1...>, 
              TypeList<>,
              TypeList<LabelName<_C2>, _T2...>)
    -> decltype(_do_build(TypeList<T...>(),
                          TypeList<LabelName<_C2>, _T1...>(),
                          TypeList<_T2...>(),
                          TypeList<>()))
    {
        return _do_build(TypeList<T...>(),
                         TypeList<LabelName<_C2>, _T1...>(),
                         TypeList<_T2...>(),
                         TypeList<>());
    }

public:
    template <char C, typename... T>
    static auto
    build_expression(LabelName<C>, T...)
    -> decltype(_do_build(TypeList<LabelName<C>, T...>(),
                          TypeList<LabelName<C>, T...>(),
                          TypeList<T...>(),
                          TypeList<>()))
    {
        return _do_build(TypeList<LabelName<C>, T...>(),
                         TypeList<LabelName<C>, T...>(),
                         TypeList<T...>(),
                         TypeList<>());
    }
}; 
```

可以像这样在程序中调用工厂：（在实际程序中，有另一个重载的类`operator()`调用工厂）

```
int main()
{
    LabelName<'a'> a;
    LabelName<'b'> b;
    ...
    LabelName<'j'> j;

    auto expr = ExpressionFactory::build_expression(a,b,c,d,e,f,g,h,i,j);

    // Perhaps do some cool stuff with expr

    return 0;
} 
```

上述代码按预期工作，并由 GCC 和 Intel 编译器正确编译。现在，我知道编译器会花费更多时间来执行递归模板推导，因为我会增加我使用的标签数量。

在我的计算机上，如果`build_expression`用一个参数调用，那么 GCC 4.7.1 平均需要大约 0.26 秒来编译。5 个参数的编译时间可延长至 0.29 秒左右，10 个参数的编译时间可延长至 0.62 秒。这都是完全合理的。

英特尔编译器的情况完全不同。ICPC 13.0.1 在 0.35 秒内编译单参数代码，编译时间对于最多四个参数几乎保持不变。在 5 个参数时，编译时间达到 12 秒，在 6 个参数时，编译时间超过 9600 秒（即超过 2 小时 40 分钟）。不用说，我还没有等待足够长的时间来找出编译七参数版本需要多长时间。

* * *

两个问题立刻浮现在脑海：

*   英特尔编译器是否特别以递归编译速度慢而著称`decltype`？

*   有没有办法以对编译器更友好的方式重写此代码以达到相同的效果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T17:13:21.473

这是一个尝试。我没有对每个元素进行成对比较，而是对类型列表进行排序，然后使用脑死亡的独特算法来查看是否有任何重复项。

我在类型上实现了归并排序，因为它很有趣。可能在合理数量的参数上，一个简单的冒泡排序会更好。请注意，一些工作将使我们能够对长列表进行合并排序，并专门针对短列表进行冒泡排序（甚至插入排序）。我不适合编写模板快速排序。

这给了我一个编译时间布尔值，表示列表中是否有重复项。然后我可以使用 enable_if 来选择我要使用的重载。

请注意，您的解决方案涉及 n^2 层模板递归，在每个阶段，返回类型都需要评估 1 步更简单类的类型，然后返回的类型也需要相同！如果英特尔编译器记忆失败，那么您正在谈论指数级的工作量。

我用一些助手扩充了你的一些课程。我让你`LabelName`的 s 继承自`std::integral_constant`，所以我可以在编译时轻松访问它们的值。这使排序代码更容易一些。我还从重复和唯一的返回值中暴露了一个`enum`，因此我可以`printf`对结果进行简单的调试。

大部分工作是编写合并排序——我们可以使用标准的编译时类型排序吗？

```
#include <type_traits>
#include <iostream>

template <typename... T> struct TypeList { };

// NOTE THIS CHANGE:
template <char C> struct LabelName:std::integral_constant<char, C> {};

template <typename... T> class UniqueExpression
{
    // Contains implementation details in actual code
public:
  enum { is_unique = true };
};

template <typename... T> class RepeatedExpression
{
    // Contains implementation details in actual code
public:
  enum { is_unique = false };
};

// A compile time merge sort for types
// Split takes a TypeList<>, and sticks the even
// index types into Left and odd into Right
template<typename T>
struct Split;
template<>
struct Split<TypeList<>>
{
  typedef TypeList<> Left;
  typedef TypeList<> Right;
};
template<typename T>
struct Split<TypeList<T>>
{
  typedef TypeList<T> Left;
  typedef TypeList<> Right;
};

// Prepends First into the TypeList List.
template<typename First, typename List>
struct Prepend;
template<typename First, typename... ListContents>
struct Prepend<First,TypeList<ListContents...>>
{
  typedef TypeList<First, ListContents...> type;
};

template<typename First, typename Second, typename... Tail>
struct Split<TypeList<First, Second, Tail...>>
{
  typedef typename Prepend< First, typename Split<TypeList<Tail...>>::Left>::type Left;
  typedef typename Prepend< Second, typename Split<TypeList<Tail...>>::Right>::type Right;
};

// Merges the sorted TypeList<>s Left and Right to the end of TypeList<> MergeList
template< typename Left, typename Right, typename MergedList=TypeList<> >
struct Merge;
template<typename MergedList>
struct Merge< TypeList<>, TypeList<>, MergedList >
{
  typedef MergedList type;
};
template<typename L1, typename... Left, typename... Merged>
struct Merge< TypeList<L1, Left...>, TypeList<>, TypeList<Merged... >>
{
  typedef TypeList<Merged..., L1, Left...> type;
};
template<typename R1, typename... Right, typename... Merged>
struct Merge< TypeList<>, TypeList<R1, Right...>, TypeList<Merged...> >
{
  typedef TypeList<Merged..., R1, Right...> type;
};
template<typename L1, typename... Left, typename R1, typename... Right, typename... Merged>
struct Merge< TypeList<L1, Left...>, TypeList<R1, Right...>, TypeList<Merged...>>
{
  template<bool LeftIsSmaller, typename LeftList, typename RightList, typename MergedList>
  struct MergeHelper;

  template<typename FirstLeft, typename... LeftTail, typename FirstRight, typename... RightTail, typename... MergedElements>
  struct MergeHelper< true, TypeList<FirstLeft, LeftTail...>, TypeList<FirstRight, RightTail...>, TypeList<MergedElements...> >
  {
    typedef typename Merge< TypeList<LeftTail...>, TypeList< FirstRight, RightTail... >, TypeList< MergedElements..., FirstLeft > >::type type;
  };
  template<typename FirstLeft, typename... LeftTail, typename FirstRight, typename... RightTail, typename... MergedElements>
  struct MergeHelper< false, TypeList<FirstLeft, LeftTail...>, TypeList<FirstRight, RightTail...>, TypeList<MergedElements...> >
  {
    typedef typename Merge< TypeList<FirstLeft, LeftTail...>, TypeList<RightTail... >, TypeList< MergedElements..., FirstRight > >::type type;
  };

  typedef typename MergeHelper< (L1::value < R1::value), TypeList<L1, Left...>, TypeList<R1, Right...>, TypeList<Merged...> >::type type;
};

// Takes a TypeList<T...> and sorts it via a merge sort:
template<typename List>
struct MergeSort;
template<>
struct MergeSort<TypeList<>>
{
  typedef TypeList<> type;
};
template<typename T>
struct MergeSort<TypeList<T>>
{
  typedef TypeList<T> type;
};
template<typename First, typename Second, typename... T>
struct MergeSort<TypeList<First, Second, T...>>
{
  typedef Split<TypeList<First, Second, T...>> InitialSplit;
  typedef typename MergeSort< typename InitialSplit::Left >::type Left;
  typedef typename MergeSort< typename InitialSplit::Right >::type Right;
  typedef typename Merge< Left, Right >::type type;
};

// Sorts a TypeList<T..>:
template<typename List>
struct Sort: MergeSort<List> {};

// Checks sorted TypeList<T...> SortedList for adjacent duplicate types
// return value is in value
template<typename SortedList>
struct Unique;

template<> struct Unique< TypeList<> >:std::true_type {};
template<typename T> struct Unique< TypeList<T> >:std::true_type {};

template<typename First, typename Second, typename... Tail>
struct Unique< TypeList< First, Second, Tail... > >
{
  enum
  {
    value = (!std::is_same<First, Second>::value) &&
      Unique< TypeList<Second, Tail...> >::value
  };
};

// value is true iff there is a repeated type in Types...
template<typename... Types>
struct RepeatedType
{
  typedef TypeList<Types...> MyListOfTypes;

  typedef typename Sort< MyListOfTypes >::type MyListOfTypesSorted;
  enum
  {
    value = !Unique< MyListOfTypesSorted >::value
  };
};

// A struct that creates an rvalue trivial constructed type
// of any type requested.
struct ProduceRequestedType
{
  template<typename Result>
  operator Result() { return Result(); };
};

struct ExpressionFactory {
  template<typename... T>
  typename std::enable_if<
    !RepeatedType<T...>::value,
    UniqueExpression<T...>
  >::type
  build_expression(T...) const
  {
    return ProduceRequestedType();
  };
  template<typename... T>
  typename std::enable_if<
    RepeatedType<T...>::value,
    RepeatedExpression<T...>
  >::type
  build_expression(T...) const
  {
    return ProduceRequestedType();
  };
};

// Simple testing code for above:
int main()
{
  auto foo1 = ExpressionFactory().build_expression( LabelName<'a'>(), LabelName<'b'>(), LabelName<'a'>() );
  typedef decltype(foo1) foo1Type;
  if (foo1Type::is_unique)
    std::cout << "foo1 is unique\n";
  else
    std::cout << "foo1 is repeated\n";

  auto foo2 = ExpressionFactory().build_expression( LabelName<'q'>(), LabelName<'a'>(), LabelName<'b'>(), LabelName<'d'>(), LabelName<'t'>(), LabelName<'z'>() );
  typedef decltype(foo2) foo2Type;
  if (foo2Type::is_unique)
    std::cout << "foo2 is unique\n";
  else
    std::cout << "foo2 is repeated\n";
} 
```

此外，我想对您的代码进行评论：模板编程就是编程——您的类型名相当于在函数中对整数变量使用“i1”到“i9”。在做一些不平凡的事情时，给你的类型名起有意义的名字。

这如何在英特尔上编译？

# c++ - STL 向量数组

> ID：13330430
> 
> 赞同：1
> 
> 时间：2012-11-11T10:47:40.657
> 
> 标签：c++

例如，我有一个类名 Point。

```
class Point{
protected: 
int x, y;
public:
void setX(int);
void setY(int)
int getX();
int getY();
}

void Point::setX(int newX)
{
x = newX;
} 
```

里面有setX、getX、setY、getY。

如何用这个开始一个向量数组？这样我就可以使用 setX，getX 和所有？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T10:49:56.427

你只需要声明一个

```
vector<Point> myPoints; 
```

我建议您向您的类添加一个构造函数，该构造函数将点的坐标作为参数：

```
class Point {
  public:
    Point(int xx, int yy) : x(xx), y(yy) {}
  // Other things
} 
```

然后你可以使用添加点到你的向量

```
myPoints.push_back(Point(10, 42)); 
```

一旦你的向量被填充，你就可以使用你的函数获取内部点的坐标。例如：

```
for (int i = 0; i < myPoints.size(); ++i) {
  cout << myPoints[i].getX() << ", " << myPoints[i].getY() << endl;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T10:51:09.533

只需包含`vector`并使用[向量函数](http://en.cppreference.com/w/cpp/container/vector)。

```
#include <iostream>
#include <vector>

/* .... */
size_t number_of_elements = 100;
std::vector<Point> myPointVector(number_of_elements);

for(unsigned i = 0; i < myPointVector.size(); ++i){
    myPointVector[i].setX(i);
    myPointVector[i].setY(number_of_elements - i);
}

for(unsigned i = 0; i < myPointVector.size(); ++i){
    std::cout << "Vector " << i << ": ";
    std::cout << myPointVector[i].getX() << ", ";
    std::cout << myPointVector[i].getY() << std::endl;
} 
```

如果上面的代码让你感到困惑，我建议你阅读一本很好的 C++ 容器/迭代器/算法介绍（或者一般来说是一本很好的 C++ 书籍）。

# git - git错误（-bash：git：找不到命令）

> ID：13330431
> 
> 赞同：5
> 
> 时间：2012-11-11T10:48:17.613
> 
> 标签：git, console, gem

我在`git`命令方面遇到问题。我得到`-bash: git: command not found`。它在我运行时报告为已安装`$ gem list`，并且我已将其路径放在我的路径上`.profile`，如下所示。我只是不明白它为什么不起作用。谢谢您的帮助

```
# MacPorts Installer addition on 2012-10-11_at_19:01:44: adding an appropriate PATH variable for use with MacPorts.
export PATH=/opt/local/bin:/opt/local/sbin:$PATH
# Finished adapting your PATH environment variable for use with MacPorts.
export PATH=${PATH}:/usr/local/mysql/bin

[[ -s "$HOME/.rvm/scripts/rvm" ]] && . "$HOME/.rvm/scripts/rvm"

# git path

export PATH=$PATH:/usr/local/git/bin 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T17:45:08.497

您安装的[git是一个 Ruby Gem，用于从 Ruby 中访问 Git 功能。](http://rubygems.org/gems/git)它不附带实际的 Git，因此不包括命令行`git`（我实际上不确定 Gem 是否甚至*不需要*安装普通的 Git）。

所以你需要做的是下载并安装[Git 本身](http://git-scm.com/download)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-28T08:57:48.057

在 Mac 上：最好的解决方案是安装 Xcode，然后转到 Xcode - 首选项和下载。在这里安装命令行工具，你很高兴。

# regex - 请帮助我修复我的正则表达式！真的难倒这里

> ID：13330435
> 
> 赞同：0
> 
> 时间：2012-11-11T10:49:21.510
> 
> 标签：regex, hyperlink, expression

我正在使用一个相当简单的正则表达式来发布链接以更改该区域以显示 [LINK REMOVED]。不过，我想要做的是完全清除他们用一个空格键入的任何内容，而不是仅仅删除链接本身。

我对正则表达式还不是很好，所以我真的可以使用帮助！这就是我目前所拥有的。

```
$comment = preg_replace('%[a-zA-Z0-9\-\.]+\.
(com|org|net|mil|edu|COM|ORG|NET|MIL|EDU)%', '[LINK REMOVED]', $comment); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T11:27:12.167

您可以在比赛中使用整个评论：

```
$comment = preg_replace('%^.*[a-z0-9.-]+\.(com|org|net|mil|edu).*$%is', ' ', $comment); 
```

或者干脆`preg_match`自己使用和删除评论：

```
if(preg_match('%[a-z0-9.-]+\.(com|org|net|mil|edu)%i', $comment))
    $comment = ' '; 
```

请注意，我还通过使用不区分大小写的修饰符`i`并删除字符类中不必要的转义符对正则表达式进行了轻微优化（为此，连字符必须位于字符类的末尾）。

# sql - 什么导致“INSERT INTO 语句中的语法错误”

> ID：13330436
> 
> 赞同：0
> 
> 时间：2012-11-11T10:49:22.053
> 
> 标签：sql, vb.net, ms-access, syntax-error

我是 VB 的新手，我正在创建一个程序来连接 ms 访问，但是当我运行程序时它得到

> Insert into 语句中的语法错误，未处理 OleDbExpection

这是我的代码：

```
Public Class Form2

Dim cnn As New OleDb.OleDbConnection

Private Sub Form2_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
    txtdate.Value = DateTime.Now
    cnn = New OleDb.OleDbConnection
    cnn.ConnectionString = "Provider=Microsoft.Jet.Oledb.4.0; Data Source=C:\Users\John\Documents\db.mdb"
End Sub
Private Sub btnsave_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnsave.Click
    If Not cnn.State = ConnectionState.Open Then
        cnn.Open()

    End If
    Dim cmd As New OleDb.OleDbCommand

    cmd.Connection = cnn
    cmd.CommandText = "INSERT INTO sr(names,add,tel,dates,prob,serv,model,snm,acc,sna,remark)" & _
                          "VALUES ('" & Me.txtname.Text & "','" & Me.txtadd.Text & "','" & Me.txttel.Text & "', '" & _
                          Me.txtdate.Text & "','" & Me.txtpro.Text & "','" & Me.txtser.Text & "','" & Me.txtmod.Text & "', '" & _
                          Me.txtsnm.Text & "','" & Me.txtacc.Text & "','" & Me.txtsna.Text & "','" & Me.txtrem.Text & "')"

    cmd.ExecuteNonQuery()

    cnn.Close()
End Sub
End Class 
```

我的代码有什么问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T11:02:18.527

为了使您的代码更具可读性和免疫性，请`SQL Injection`使用以下内容

*   命令和参数
*   使用`Using`声明

片段，

```
Dim comText As String = "INSERT INTO sr(names,add,tel,dates,prob,serv,model,snm,acc,sna,remark) " & _
                        "VALUES (@names,@add,@tel,@dates,@prob,@serv,@model,@snm,@acc,@sna,@remark)"
Dim connString As String = "ConnectionString Here"
Using conn As New OleDbConnection(connString)
    Using comm As New OleDbCommand()
        With comm
            .Connection = conn
            .CommandType = CommandType.Text
            .CommandText = comText
            .Parameters.AddWithValue("@names" , txtname.Text)
            .Parameters.AddWithValue("@add" , txtadd.Text)
            .Parameters.AddWithValue("@tel" , txttel.Text)
            .Parameters.AddWithValue("@dates" , txtdate.Text)
            .Parameters.AddWithValue("@prob" , txtpro.Text)
            .Parameters.AddWithValue("@serv" , txtser.Text)
            .Parameters.AddWithValue("@model" , txtmod.Text)
            .Parameters.AddWithValue("@snm" , txtsnm.Text)
            .Parameters.AddWithValue("@acc" , txtacc.Text)
            .Parameters.AddWithValue("@sna" , txtsna.Text)
            .Parameters.AddWithValue("@remark" , txtrem.Text)
        End With

        Try
            conn.Open()
            comm.ExecuteNonQuery
        Catch ex As OleDbException
            ' do something with the error
            ' don't hide it!
        End Try
    End Using
End Using 
```

来源

*   [**加值**](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlparametercollection.addwithvalue.aspx)
*   [**添加** *（推荐使用的方法）*](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlparametercollection.add.aspx)
*   [**OleDbCommand**](http://msdn.microsoft.com/en-us/library/system.data.oledb.oledbcommand%28v=vs.100%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T11:09:10.153

您的 VB 代码很好（它并不像其他人提到的那样理想，但它不是错误的）。

语法错误（`OleDbExpection`通常是 's）意味着您生成的 SQL 字符串对您的数据库无效。要调试它，您需要在调用之前查看生成的 SQL 字符串`cmd.ExecuteNonQuery()`并确保它是有效的 SQL。

此错误很*可能*是因为您的输入文本框中的数据无效。你可以用简单的`If ... Then`语句来检查它们

```
If Not String.IsNullOrEmpty(Me.txtdata.Text) Then
    'Add the txtdata parameter
End If 
```

# c# - 如何在 couchbase 服务器（windows）（服务器端）中添加数据验证？

> ID：13330437
> 
> 赞同：0
> 
> 时间：2012-11-11T10:49:29.897
> 
> 标签：c#, .net, database, couchbase

假设我有一个客户端和一个 couchdb 服务器（在 Windows 上）。客户端是一个小游戏。

假设用户想买东西，客户端检查你是否有足够的钱，如果你确实向服务器发送请求。在服务器上，我有一张桌子，上面有用户名、钱、物品。如果你有足够的钱，我会更新钱并为项目提供 +1。

在这一点上，我希望服务器检查自己是否有足够的钱。并实际进行更新。（我认为它更安全），所以我想在某处添加一些验证功能，但不知道在哪里。

我一直在寻找有关此主题的信息，但找不到任何信息。也许是因为我缺乏对基础知识和寻找什么的理解。

我如何用沙发底座做到这一点？我需要什么工具。（我主要使用.net，但不限于）

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T12:15:39.417

在 Couchbase Server 中，您没有服务器端验证/约束。因此，在您的情况下，您必须做些什么才能将此业务逻辑放入您的应用程序中。

这根本不是问题，您的应用程序将能够使用“get”操作，这是对“用户钱包/配置文件”（可能已经在内存中）的非常快速的操作，并且能够检查是否用户有足够的钱购买该物品。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T09:19:05.370

你不能用沙发底座做到这一点。

use 可以使用 .net Web 服务来查询/更新 couchbase 数据库并将客户端连接到 Web 服务。

这样，所有逻辑都在服务器端（在 Web 服务上），您只需从客户端调用 Web 服务。这也很容易，因为所有方面都允许您在它们之间传递序列化的类。

祝你好运先生！

# plot - 尖点灾难的绘图表面（使用 gnuplot）

> ID：13330446
> 
> 赞同：2
> 
> 时间：2012-11-11T10:50:04.220
> 
> 标签：plot, gnuplot, cusp

是否可以用 Gnuplot绘制[Cusp Catastrophe的表面？](http://en.wikipedia.org/wiki/Catastrophe_theory#Cusp_catastrophe)这是一个[可比较的情节](http://ars.els-cdn.com/content/image/1-s2.0-S0925527398001807-gr1.jpg)。

*   灾难在数学上被描述为：V = x^4 + a*x^2 + b*x（维基百科，见上文）
*   曲面描述为：0 = a + b*y – y^3

我是一个 gnu plot 初学者，所以我非常感谢一个带有源代码的例子。

（我学习心理学，我需要这个情节来写一篇关于临床理论的文章：尖点灾难用于描述情绪的变化，与健康人相比，抑郁症患者的情绪变化似乎更突然和更具破坏性。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T19:57:23.580

我认为最好的方法是生成方程的根表（在 gnuplot 之外），然后用 splot 绘制该表。但是您可以通过尝试在 gnuplot 中获得您想要的近似值

```
a=b=1
set para
set iso 30
set pm3d at s
set urange [-10:10]
set hidd
set view 47,192
splot a + u*v - b * v**3, u, v 
```

# powershell - 由于预构建和构建后事件，Visual Studio 2012 构建缓慢

> ID：13330447
> 
> 赞同：1
> 
> 时间：2012-11-11T10:50:09.880
> 
> 标签：powershell, build, visual-studio-2012, post-build-event, build-events

我在使用 Visual Studio 2012 构建时遇到问题，它运行速度极慢。前段时间还好好的，不知道怎么回事。我启用了诊断构建输出，并看到了这个：

```
3>Target Performance Summary:
...
3>     1093 ms  ResolveComReferences                       1 calls
3>     2741 ms  ResolveAssemblyReferences                  1 calls
3>     3725 ms  CoreCompile                                1 calls
3>    314117 ms  PreBuildEvent                              1 calls
3>
3>Task Performance Summary:
...
3>     1092 ms  ResolveComReference                        1 calls
3>     2741 ms  ResolveAssemblyReference                   1 calls
3>     3724 ms  Csc                                        1 calls
3>    314117 ms  Exec                                       1 calls
3>
3>Build succeeded.
3>
3>Time Elapsed 00:05:22.93 
```

预建事件：

```
Powershell -File "$(ProjectDir)Prepare4Tests.ps1" 
```

脚本文件：

```
# Close all IE instances
if($env:COMPUTERNAME -ne 'W8ALEXAB')
{
    Get-Process | Where { $_.Name -Eq 'iexplore' } | Kill;
}

# Delete test files generated by agent that are more than 7 days old.
$paths = @("C:\Users\tsservice\AppData\Local\VSEQT\QTAgent", "C:\Windows\ServiceProfiles\NetworkService\AppData\Local\VSEQT\QTController");
foreach($path in $paths)
{
    if(Test-Path $path)
    {
        $items = @(Get-ChildItem $path | Where {$_.lastwritetime -lt (Get-date).AddDays(-8)});
        for($i = 0; $i -lt $items.Length; $i++)
        {
            $itemPath = join-path $path  $items[$i] -Resolve;
            "Deleting item: " + $itemPath;
            Remove-Item $itemPath -force;
        }
    }
} 
```

另一个包含执行另一个 powershell 脚本的构建后事件的项目也存在同样的问题。

如果我直接从命令提示符启动脚本，它运行速度很快，没有任何问题。同样在重建时，netstat.exe 总是启动，不知道为什么。任何帮助将不胜感激，欢迎任何想法！

PS 我们团队的其他人也没有这样的问题，所以这绝对是我这边的事情。这是完整的构建日志：

[https://gist.github.com/4064296](https://gist.github.com/4064296)

2012 年 12 月 11 日更新：尝试设置检查点，正如我之前所说，powershell 脚本本身就像一个魅力

```
3>  Task Parameter:Command=Powershell -File "D:\Projects\NGNMS\Dev\NMSClient\NMSClient.UT\Prepare4Tests.ps1" (TaskId:72)
3>  Powershell -File "D:\Projects\NGNMS\Dev\NMSClient\NMSClient.UT\Prepare4Tests.ps1" (TaskId:72)
3>  Checkpoint 1 11/12/2012 13:08:07 (TaskId:72)
3>  Checkpoint 2 11/12/2012 13:08:07 (TaskId:72)
3>  Checkpoint 3 11/12/2012 13:08:07 (TaskId:72)
3>Done executing task "Exec". (TaskId:72) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T09:04:10.853

我建议您添加一些简单的跟踪来尝试找出问题所在。

但是`Write-Host "Checkpoint 1 $(get-date -DisplayHint Time)"`在脚本的开头加上右边，然后把其他放在关键部分之间。

我的猜测是问题在于 Get-Process 花费的时间比您预期的要长。一种可能性是加载默认配置文件/模块需要很长时间。

值得一提的是，我们在 MSBuild/VS 项目中使用了 powershell 脚本并且没有这种问题。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-20T12:03:34.587

安装了 PowerShell 3.0，重新安装了 VS 2012，没有任何帮助。所以我只是格式化了磁盘 C 并安装了 Windows 8，现在它工作得很好:)

# translation - qmake 翻译似乎不起作用

> ID：13330450
> 
> 赞同：1
> 
> 时间：2012-11-11T10:50:36.360
> 
> 标签：translation, locale, qmake

我有一个带有捷克语翻译的 Qt 应用程序。我可以使用以下代码编译和安装我的翻译。但是当我运行应用程序时，翻译不起作用。我错过了什么？

我什至尝试 chmod 644 来更改翻译文件的权限，但它也不起作用。

提前致谢。

```
TRANSLATIONS += cs_CZ.ts

isEmpty(QMAKE_LRELEASE) {
   win32|os2:QMAKE_LRELEASE = $$[QT_INSTALL_BINS]\lrelease.exe
   else:QMAKE_LRELEASE = $$[QT_INSTALL_BINS]/lrelease
   unix {
       !exists($$QMAKE_LRELEASE) { QMAKE_LRELEASE = lrelease-qt4 }
   } else {
       !exists($$QMAKE_LRELEASE) { QMAKE_LRELEASE = lrelease }
   }
}

updateqm.input = TRANSLATIONS
updateqm.output = qm/${QMAKE_FILE_BASE}.qm
updateqm.commands = $$QMAKE_LRELEASE -silent ${QMAKE_FILE_IN} -q qm/${QMAKE_FILE_BASE}.qm
updateqm.CONFIG += no_link target_predeps
QMAKE_EXTRA_COMPILERS += updateqm

INSTALLS += translations

translations.path = /usr/share/app
translations.files = qm/cs_CZ.qm 
```

# c# - 如何更改按钮的 tabcontrol 颜色？

> ID：13330458
> 
> 赞同：1
> 
> 时间：2012-11-11T10:51:56.237
> 
> 标签：c#, .net, winforms

我想更改 tabcontrol 颜色。我尝试了太多，我在 SO 上搜索了它，但我没有找到任何东西。

![在此处输入图像描述](../Images/b3ce2ed1765778fd8d76e3c90d2dafd3.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T14:39:01.030

我也面临同样类型的问题，您可以通过更改属性**DrawMode**来做到这一点。将其从**Normal**更改为**Ownerdrawfixed** 请也访问此链接 [http://www.codeproject.com/Articles/8289/Coloring-Tab-Control](http://www.codeproject.com/Articles/8289/Coloring-Tab-Control)

# matlab - Matlab：Moore-Penrose伪逆算法实现

> ID：13330459
> 
> 赞同：3
> 
> 时间：2012-11-11T10:52:08.240
> 
> 标签：matlab, matrix-inverse

我正在寻找计算伪逆矩阵的 Moore-Penrose 算法的 Matlab 实现。

我尝试了几种算法，这个

[http://arxiv.org/ftp/arxiv/papers/0804/0804.4809.pdf](http://arxiv.org/ftp/arxiv/papers/0804/0804.4809.pdf)

乍一看还不错。

然而，问题在于，对于大型元素，它会产生严重缩放的矩阵，并且一些内部操作会失败。它涉及以下步骤：

```
L=L(:,1:r);
M=inv(L'*L); 
```

我正在尝试找到一个更强大的解决方案，该解决方案可以在我的其他软件中轻松实现。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T11:19:39.593

使用内置有什么问题[`pinv`](http://www.mathworks.nl/help/matlab/ref/pinv.html)？

否则，您可以查看[Octave 中使用的实现](http://fossies.org/dox/octave-3.6.3/pinv_8cc_source.html)。它不是 Octave/MATLAB 语法，但我想你应该能够毫无问题地移植它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-08T15:22:34.727

我使用 Lutz Roeder 的 Mapack 矩阵库在 C# 中重新实现了一个。也许这个或 Java 版本对您有用。

```
/// <summary>
/// The difference between 1 and the smallest exactly representable number
/// greater than one. Gives an upper bound on the relative error due to
/// rounding of floating point numbers.
/// </summary>
const double MACHEPS = 2E-16;

// NOTE: Code for pseudoinverse is from:
// http://the-lost-beauty.blogspot.com/2009/04/moore-penrose-pseudoinverse-in-jama.html

/// <summary>
/// Computes the Moore–Penrose pseudoinverse using the SVD method.
/// Modified version of the original implementation by Kim van der Linde.
/// </summary>
/// <param name="x"></param>
/// <returns>The pseudoinverse.</returns>
public static Matrix MoorePenrosePsuedoinverse(Matrix x)
{
    if (x.Columns > x.Rows)
        return MoorePenrosePsuedoinverse(x.Transpose()).Transpose();
    SingularValueDecomposition svdX = new SingularValueDecomposition(x);
    if (svdX.Rank < 1)
        return null;
    double[] singularValues = svdX.Diagonal;
    double tol = Math.Max(x.Columns, x.Rows) * singularValues[0] * MACHEPS;
    double[] singularValueReciprocals = new double[singularValues.Length];
    for (int i = 0; i < singularValues.Length; ++i)
        singularValueReciprocals[i] = Math.Abs(singularValues[i]) < tol ? 0 : (1.0 / singularValues[i]);
    Matrix u = svdX.GetU();
    Matrix v = svdX.GetV();
    int min = Math.Min(x.Columns, u.Columns);
    Matrix inverse = new Matrix(x.Columns, x.Rows);
    for (int i = 0; i < x.Columns; i++)
        for (int j = 0; j < u.Rows; j++)
            for (int k = 0; k < min; k++)
                inverse[i, j] += v[i, k] * singularValueReciprocals[k] * u[j, k];
    return inverse;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-26T18:11:52.963

这是 [I][1] 编写的用于计算 MP 伪逆的 R 代码。我认为这很简单，可以翻译成matlab代码。

```
pinv<-function(H){
  x=t(H) %*% H
  s=svd(x)
  xp=s$d
  for (i in 1:length(xp)){
    if (xp[i] != 0){
      xp[i]=1/xp[i]
    }
    else{
      xp[i]=0
    }
  }
  return(s$u %*% diag(xp) %*% t(s$v) %*% t(H))
}
```

[1]：[http ://hamedhaseli.webs.com/downloads](http://hamedhaseli.webs.com/downloads)

# delphi - 如何防止/取消要在 TListBox 中更改的项目？

> ID：13330462
> 
> 赞同：0
> 
> 时间：2012-11-11T10:52:22.517
> 
> 标签：delphi, listbox, delphi-xe2, onchange, firemonkey

使用**FireMonkey和**[**TListBox**](http://docwiki.embarcadero.com/Libraries/XE2/en/FMX.ListBox.TListBox_Events)中的几个项目...

我希望能够允许/**取消项目更改**...

就像我们可以使用 TListView 的事件一样：[OnChanging](http://docwiki.embarcadero.com/Libraries/XE2/en/Vcl.ComCtrls.TCustomListView.OnChanging)

事件 OnMouseDown 和 OnKeyDown 在更改之前触发（项目值仍然用于**当前/旧**选定项目，而不是**新** *选择*）...

所以我可以存储 easill 存储当前的 ListBox ItemIndex... 并在更改后移回它.. 但这太糟糕了，肮脏，...

无论如何要做得很好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T07:34:12.007

您最好创建一个自定义组件以通过覆盖 SetItemIndex 方法来添加功能：

```
type TCustomListBox = class(TListBox)
  protected
    procedure SetItemIndex(Value: Integer);override;
  end;

procedure Register; 
```

...

```
procedure Register;
begin
  RegisterControls('Custom', [TCustomListBox]);
end;

procedure TCustomListBox.SetItemIndex(Value: Integer); 
begin
  if <condition> then
inherited
end;

initialization
  RegisterFMXClasses([TCustomListBox]);
end; 
```

当然，您可以为条件添加一个事件。

# c - 如何在 FILE* 上使用 SEEK_CUR

> ID：13330464
> 
> 赞同：4
> 
> 时间：2012-11-11T10:52:51.760
> 
> 标签：c, fseek

```
offset=ftell(ptr)-sizeof(student1);
fseek(ptr,offset,SEEK_SET);
fwrite(&student1,sizeof(student1),1,ptr); 
```

此 C 代码表示将指针从当前位置移动`ftell(ptr)`到刚刚读取的结构块的开头。我对吗？

如果我是对的，我可以使用`SEEK_CUR`而不是`SEEK_SET`回到文件中结构块的开头吗？

请告诉我如何使用`SEEK_CUR`并返回到结构块的开始。

我是编程新手。所以请帮助我。

编辑：谢谢你的答案。我要做的是搜索关键字（学生的卷号）并更新该学生的信息（姓名，地址，..）。更新的数据成功替换了之前的数据。请让我再问一个问题。有什么方法可以在以前的数据之上插入新数据而不是用旧数据替换它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-11T10:55:33.487

> 此 C 代码意味着将指针从当前位置 [ ftell(ptr) ] 移动到刚刚读取的结构块的开头。我对吗？

我认同。

> 请告诉我如何使用 SEEK_CUR 并返回到结构块的开始。

您可以使用负偏移量。

```
#include <stdio.h>

fseek (ptr, -sizeof student1, SEEK_CUR); 
```

无论如何，你应该避免这些调用；它可能很慢。使用相当顺序的阅读。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-11T10:54:33.533

尝试：

```
fseek(ptr, -sizeof(student1), SEEK_CUR); 
```

# css - 导航栏高度问题

> ID：13330465
> 
> 赞同：0
> 
> 时间：2012-11-11T10:52:55.447
> 
> 标签：css, html, twitter-bootstrap

请看这个示例模板：http: [//jsfiddle.net/D8cye/2/](http://jsfiddle.net/D8cye/2/)

如您所见，`navbar`扩展至侧边栏的底部。为什么？我怎样才能避免这种情况？

我知道我可以通过设置来解决这个问题`.navbar-inner{height:40px;}`。但我觉得我做错了什么，也许我对流体网格有误解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T10:59:08.777

用于这样`display: inline-block;`的[**演示**](http://jsfiddle.net/D8cye/4/)`.navbar-inner`[](http://jsfiddle.net/D8cye/4/)

 **说明：使用`display: inline-block;`不会占用导航栏之前使用的额外空间，水平和垂直...... :)

CSS

```
.navbar-inner {
   display: inline-block;
} 
```

编辑：如果你希望你的导航菜单是 100% 的宽度而不是像这样

[**演示 2**](http://jsfiddle.net/D8cye/7/)

CSS

```
.navbar-inner {
   overflow: hidden;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T12:56:07.573

在这里分叉[http://jsfiddle.net/Astraldiva/r6tHv/](http://jsfiddle.net/Astraldiva/r6tHv/)。

我认为在使用 twitter bootstraps 流体布局时要考虑的重要事项之一是不要有固定宽度的项目，否则布局会刹车。不确定这是否有帮助，但我只是重新排列了容器并将内容放在 span8 + span4 div 中以获得您想要的类似布局，并且此版本应该适用于不同的屏幕尺寸。

```
 <div class=row-fluid>
    <div class=span8>
        <div id=text>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</div>
        <div class=navbar>
            <div class=navbar-inner>
                <ul class=nav>
                    <li class=active><a href=#>Home</a></li>
                    <li><a href=#>Link</a></li>
                    <li><a href=#>Link</a></li>
                 </ul>
             </div>
         </div>
    </div>
    <div class=span4>
        <div class=box></div>
        <div class=box></div>
        <div class=box></div>
    </div>
</div> 
```

**编辑**

为了得到想要的布局，[彼得](https://stackoverflow.com/users/175975/peter)[在这个小提琴中](http://jsfiddle.net/D8cye/9/)扩展了我的想法。

有一个 2 列布局，一个固定的侧边栏和流动内容区域（具有最大和最小宽度）。所以它不是完全流动的，但可以解决问题。

```
<div id=container>
    <!-- Sidebar is floated right and has fixed width -->
    <div id=side>
        <div class=box></div>
        <div class=box></div>
        <div class=box></div>
    </div>
    <!-- Content wrapper is in normal flow with margin-right of at least the width of a sidebar-->
    <div id=main>
        <div class=row-fluid>
          <div class=span12>
            <div id=text>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</div>

            <div class=navbar>
                <div class=navbar-inner>
                    <ul class=nav>
                        <li class=active><a href=#>Home</a></li>
                        <li><a href=#>Link</a></li>
                        <li><a href=#>Link</a></li>
                    </ul>
                </div>
            </div>
          </div>
      </div>
    </div>
</div> 
```

CSS：

```
#container {
border: 1px solid #f00;
max-width: 600px;
min-width: 300px;
}

#side {
float: right;
width: 100px;
border: 1px solid #0f0;
}

#main {
margin-right: 108px;
border: 1px solid #00f;
}

#text {
padding: 8px; margin: 8px; border: 1px solid #888;
}

.box {
height: 80px;
margin-bottom: 8px;
background: #ddd;
} 
```

注意：包括 twitter 引导 css。

希望能帮助到你。**

# linux - 合并多个文件的更快方法

> ID：13330470
> 
> 赞同：4
> 
> 时间：2012-11-11T10:53:57.383
> 
> 标签：linux, file, bash

我在 Linux 中有多个小文件（大约 70,000 个文件），我想在文件的每一行末尾添加一个单词，然后将它们全部合并到一个文件中。

我正在使用这个脚本：

```
for fn in *.sms.txt 
do 
    sed 's/$/'$fn'/' $fn >> sms.txt
    rm -f $fn
done 
```

有没有更快的方法来做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-11T11:46:15.013

我尝试使用这些文件：

```
for ((i=1;i<70000;++i)); do printf -v fn 'file%.5d.sms.txt' $i; echo -e "HAHA\nLOL\nBye" > "$fn"; done 
```

我尝试了您的解决方案，该解决方案大约需要**4 分钟**（实际）来处理。您的解决方案的问题是您分叉了`sed`70000 次！并且分叉相当慢。

```
#!/bin/bash

filename="sms.txt"

# Create file "$filename" or empty it if it already existed
> "$filename"

# Start editing with ed, the standard text editor
ed -s "$filename" < <(
   # Go into insert mode:
   echo i
   # Loop through files
   for fn in *.sms.txt; do
      # Loop through lines of file "$fn"
      while read l; do
         # Insert line "$l" with "$fn" appended to
         echo "$l$fn"
      done < "$fn"
   done
   # Tell ed to quit insert mode (.), to save (w) and quit (q)
   echo -e ".\nwq"
) 
```

这个解决方案花了大约。**6秒**。

不要忘记，`ed`是标准的文本编辑器，不要忽视它！如果你喜欢`ed`，你可能也会喜欢`ex`！

干杯!

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T14:13:25.210

几乎与 gniourf_gniourf 的解决方案相同，但没有 ed：

```
for i in *.sms.txt 
do   
   while read line   
   do    
     echo $line $i
   done < $i
done >sms.txt 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-11T18:49:29.187

什么，不爱了`awk`？

```
awk '{print $0" "FILENAME}' *.sms.txt >sms.txt 
```

使用`gawk`，这在我机器上的 gniourf_gniourf[样本上花费了](https://stackoverflow.com/a/13330805/1743811)**1-2 秒**（根据）。`time`

`mawk`比`gawk`这里快 0.2 秒。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-11T12:11:24.040

这个 perl 脚本在每一行的末尾添加了实际的文件名。

```
#!/usr/bin/perl
use strict;
while(<>){
    chomp;
    print $_, $ARGV, "\n";
} 
```

像这样称呼它：

```
scriptname *.sms.txt > sms.txt 
```

由于只有一个进程并且不涉及正则表达式处理，它应该非常快。

# javascript - Zclip 在 jsfiddle 上工作但不在本地工作？

> ID：13330472
> 
> 赞同：2
> 
> 时间：2012-11-11T10:54:08.837
> 
> 标签：javascript, jquery, html, jsfiddle, zclip

真奇怪 ：：

> Jsfiddle： http: [//jsfiddle.net/sxeCM/4/](http://jsfiddle.net/sxeCM/4/) [工作]

本地具有相同的代码：

```
<html>
    <head>
    </head>
    <body>
    <script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"></script>
    <script src="http://www.steamdev.com/zclip/js/jquery.zclip.min.js"></script>
    <script>
    $(document).ready(function() {
        $('a#copy').zclip({
            path:'http://www.steamdev.com/zclip/js/ZeroClipboard.swf',
            copy:$('div#description').text()
        });
    });
    </script>
    <a id='copy' href="#">Copy</a>
    <div id='description'>this seems awesome</div>
    </body>
</html> 
```

它不在本地工作，但在 jsfiddle 上按预期工作。我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T11:03:24.723

听起来像是针对`file:///`URL 的安全限制之一。我最近在 Webkit 中玩过桌面通知，它们只是[不会在本地文件上启动](https://stackoverflow.com/questions/6092885/what-ways-are-out-there-to-display-a-desktop-notification-from-a-web-app/13328397#13328397)，但如果通过访问文件就可以正常工作`http://`。

# javascript - 使 CSS 通用图像居中

> ID：13330475
> 
> 赞同：0
> 
> 时间：2012-11-11T10:54:33.290
> 
> 标签：javascript, css

下面是我的CSS。它用于使图像居中。（此代码有效）

```
.imagecentre{
    width: 25px;
    position:relative;
    margin:0 auto;

} 
```

为了让它工作，你需要说明宽度。但是，并非我所有的图像都是 25 像素。

如何使这个 css 足够通用以容纳所有使用 javascript 的图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T11:01:18.113

如果你只想让一个容器中的图像居中，你可以`text-align: center`在容器上设置，不管你在图像上有什么样式：

```
<div style="width: 100%; border: 1px solid black; text-align: center">
    <img src="https://www.google.com/logos/2012/vets_day-12-hp.jpg">
</div>​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T11:00:19.410

您可以使用以下结构：

```
.image-wrapper {
    display: block;
    text-align: center;
}

.image-wrapper > img {
    display: inline;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T11:10:04.267

您可以使用`margin: 0px auto`, 仅当元素是块元素（div、p、h1 等）而不是内联元素（例如图像和 span 是内联元素）时，您需要添加 text-align:center; 到内联元素的父元素..)

如果在 div 中有不止一张图片..

```
 img.imagecentre{
        width: 25px;
        display:block;
        float:left;
        margin: 0 10px 0 0; /* change the 10 to the space you want.. */

    } 
```

如果是一张图片...（div_warp = 图片的父 div，imagecentre = img 元素）..

```
#div_warp {
text-align center;
...
...
}

 .imagecentre{
        width: 25px;   
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-11T11:18:12.707

在 jquery 中将 widht 动态设置为`".imagecentre"`class

```
$(function(){
    $(".imagecentre").css("width", $(this).width());
}); 
```

希望这会有所帮助！

# c# - 查询 XML 文档

> ID：13330479
> 
> 赞同：0
> 
> 时间：2012-11-11T10:55:28.527
> 
> 标签：c#, xml, linq, xml-parsing, linq-to-xml

我正在尝试查询一个 xml 文档，但是这段代码不会读取带有封闭标记符号的 xml 部分，而是读取很好的 xelement。谁能发现我做错了什么？

我有程序生成的 XML 文档，它给出了封闭的标记文件，因此它现在是一个问题..

```
<?xml version="1.0" encoding="utf-8" ?>
<Student>

 <Person name="John" city="Auckland" country="NZ" />

 <Person>
    <Course>GDICT-CN</Course>
    <Level>7</Level>
    <Credit>120</Credit>
    <Date>129971035565221298</Date>
 </Person>
 <Person>
    <Course>GDICT-CN</Course>
    <Level>7</Level>
    <Credit>120</Credit>
    <Date>129971036040828501</Date>
 </Person>
</Student> 
```

```
class Program
{
    static void Main(string[] args)
    {
        XDocument xDoc = XDocument.Load(AppDomain.CurrentDomain.BaseDirectory + "Customers.xml");
        IEnumerable<XElement> rows = from row in xDoc.Descendants("Person") select row;

        foreach(XElement xEle in rows)
        {
        IEnumerable<XAttribute>attlist = from att in xEle.DescendantsAndSelf().Attributes() select att;

            foreach(XAttribute xatt in attlist)
            {
            Console.WriteLine(xatt);
            }
            Console.WriteLine("-------------------------------------------");
        }
        Console.ReadLine();

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T11:05:30.023

由于您已将`Course`其他属性添加为`XElement`，因此您需要在 XElements 而不是属性上循环 -

```
foreach (XElement xEle in rows)
{
    IEnumerable<XAttribute> attlist = from att in xEle.DescendantsAndSelf()
                                        .Attributes() select att;

    foreach (XAttribute xatt in attlist)
    {
       Console.WriteLine(xatt);
    }
    foreach (XElement elemnt in xEle.Descendants())
    {
       Console.WriteLine(elemnt.Value);
    }
    Console.WriteLine("-------------------------------------------");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T11:24:39.783

首先，您必须导航到 Person 级别并遍历 Person，然后对于每个 Person，您可以遍历其属性。

```
 private static void Main(string[] args)
    {
        //string path = Environment.GetFolderPath(Environment.SpecialFolder.Desktop);
        //XDocument xDoc = XDocument.Load(path + "\\Student Data\\data.xml");
        XDocument xDoc = XDocument.Load(AppDomain.CurrentDomain.BaseDirectory + "Customers.xml");
        IEnumerable<XElement> xElements = xDoc.Descendants("Person");
        foreach (XElement element in xElements)
        {
            foreach (XAttribute attribute in element.Attributes())
            {
                Console.WriteLine(attribute);
            }
            Console.WriteLine("-------------------------------------------");
        }
        Console.ReadLine();
    } 
```

# c - 从/向二进制文件读取和写入 malloc 的链表

> ID：13330482
> 
> 赞同：5
> 
> 时间：2012-11-11T10:55:58.700
> 
> 标签：c, file, struct, binary

我需要为我正在上的一门课做作业。这是一个简单的 C 语言电话簿应用程序，我在使用它时遇到了一些麻烦，因为我需要在程序中使用一些新东西，而且截止日期非常紧迫。

我环顾四周，找到了一些答案，但每次都有新的答案出现。:)

这是我的（简化的）程序：

```
typedef struct record
{
    char fname[31];
    char lname[31];
    char tel[21];
    struct record *next;
} record;

record *new_entry(record *first, char *fname, char *lname, char *tel)
{
    record *new;
    new=(record*) malloc(sizeof(record));
    strcpy(new->fname, fname);
    strcpy(new->lname, lname);
    strcpy(new->tel, tel);
    new->next=first;
}

void fileopen (char *db_file)
{
    FILE *fp;  

    fp=fopen(db_file, "rb");
    if (fp==NULL) 
    {
        fp=fopen(db_file, "wb");
        fclose(fp);
        fp=fopen(db_file, "r+b");
    }
}

int main
{
 char db[51];
 record *next = NULL;

 printf("File:           "); scanf("%s, db);
 fileopen(db);
 printf("First name:     "); scanf("%s", fname);
 printf("Last name:      "); scanf("%s", lname);
 printf("Phone number:   "); scanf("%s", tel);
 first=new_entry(*first, fname, lname, tel);
} 
```

我省略了不必要的部分。现在知道不多了，但是班长说我应该用二进制文件来存储和恢复数据。但是如果我应该如何使用 fread 和 fwrite，我真的很困惑。

* * *

非常感谢您的解决方案！我想我开始理解这个概念了。该程序现在存储数据（至少我认为是这样，因为随着我添加更多数据，文件会不断增长。）当启动一个新的二进制文件时，程序会在请求时正确显示数据，但如果我关闭它并重新打开同一个文件，当它试图列出联系人时没有任何反应。

这是（再次简化，我在实际作业中的一条记录中有 10 个详细信息）打开功能：

```
record *open (char *db_file, record start)
{
  FILE *fp
  record *temp = start;
  fp=fopen(db_file, "rb");
  while (fread(temp, sizeof(rekord), 1, fp)>0) 
    {
        fread(temp->fname, sizeof temp->fname, 1, fp);
        fread(temp->lname, sizeof temp->lname, 1, fp);
        fread(temp->tel, sizeof temp->tel, 1, fp);
    temp=temp->next;
    }
  fclose(fp);
  return temp;
} 
```

在 main() 中，我使用：

```
start=open(db, start); 
```

声明部分：

```
record *start=NULL; 
```

如果有人回复，再次感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T11:03:23.300

要将链接列表写入文件，您可以遍历列表并编写结构。

```
#include <stdio.h>

record *it = first;

while (it != NULL) {
    fwrite (it->fname, sizeof it->name, 1, stream);
    fwrite (it->lname, sizeof it->lname, 1, stream);
    fwrite (it->tel, sizeof it->tel, 1, stream);
    it = it->next;
} 
```

`stream`是一个文件，您可以`wb`在`fopen`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T11:01:05.730

所以，希望这个任务能解释为什么手动序列化/反序列化是一个糟糕的想法（在行业中，做这种事情的真正方法是通过自动代码生成，例如[协议缓冲区](http://code.google.com/p/protobuf/)），但是为了这个任务的目的，您将需要写入链表的内容而不写入链接，然后在反序列化时需要重建链接，因为简单地写入和读取列表中下一个指针的地址是不正确的.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-11T11:02:22.717

将除 *next 指针之外的所有内容写入文件，然后按顺序将它们读回。

```
void write_book(const record *start) {
   FILE *f;
   record end;
   memset(end,0,sizeof(struct record));
   f = fopen("foo","wb");
   for(;start != NULL; start = start->next) { 
     fwrite(start->fname, 31, 1, F);
     fwrite(start->lname, 31, 1, F);
     fwrite(start->tel, 21, 1, F);
     fwrite(end->next, sizeof(void*), 1, F);
   }
   memset(end,0,sizeof(struct record));
   fwrite(end, sizeof(struct record),1,F);
   fclose(f);
} 
```

读取时，将数据读出，直到命中空记录。您可以为此使用 fread() 。只要记住分配新记录，用 fread() 读取它并更新下一个指针。

# vim - Tabular.vim：如何在单词开头的 2 个不同分隔符的第一次出现时对齐？

> ID：13330486
> 
> 赞同：5
> 
> 时间：2012-11-11T10:56:42.850
> 
> 标签：vim, tabular

我已经安装了 Tabular 插件，它对我来说非常好用，只要不涉及复杂的正则表达式……</p>

但我有这个清单：

```
one @abc @rstuvw &foo  
three @defg &bar 
four @mn @opq &kludge &hack  
twelve @hijkl &baz &quux 
```

我希望以这种方式对齐它（首先在 @... 上，然后在 &... 上）：

```
one    @abc @rstuvw &foo  
three  @defg        &bar 
four   @mn @opq     &kludge &hack  
twelve @hijkl       &baz &quux 
```

这意味着我同时有 3 个问题：

*   在第一次出现时对齐
*   2 个不同的分隔符（@ 和 &）
*   这不是真正的分隔符，而是单词开头的“特殊字符”

这远远超出了我对正则表达式和 Tabular.vim 的理解

我应该如何进行？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-11T14:38:09.737

### 在第一次出现时对齐

[帮助文件](https://github.com/godlygeek/tabular/blob/master/doc/Tabular.txt#L133)解释了这个问题，你可以使用这个命令：

```
:Tabularize /^[^@]*\zs@/l1l0 
```

一点解释：

*   `^`表示行的开头
*   `[^@]*`匹配所有不是`@`. 这`*`意味着0次或多次，尽可能多
*   `\zs`将正则表达式的开头放在此处（从这一点开始的所有内容都匹配）
*   `@`上句中的“这一点”表示`@`符号
*   `/l1l0`表示将第一个块向左对齐并添加 1 个空格 ( `l1`) 并将第二个块向左对齐并添加 0 个空格 ( `l0`)

### 对齐 2 个不同的分隔符

您需要在 2 个命令中执行此操作。为了让您的生活更轻松，您可以[命名模式](https://github.com/godlygeek/tabular/blob/master/doc/Tabular.txt#L153)并使用该名称：

```
:AddTabularPattern f_at /^[^@]*\zs@/l1l0
:AddTabularPattern f_and /^[^&]*\zs&/l1l0 
```

现在你可以运行

```
:Tabularize f_at
:Tabularize f_and 
```

### 映射命令

您甚至可以映射这些方法以生成简单的快捷方式。[在此处](https://stackoverflow.com/a/4743029/1149495)阅读有关此的更多信息

# powershell - 在Powershell中通过引用传递哈希表后飞溅

> ID：13330487
> 
> 赞同：4
> 
> 时间：2012-11-11T10:56:45.280
> 
> 标签：powershell, hashtable, pass-by-reference

当我通过引用一个函数来传递一个哈希表时，我遇到了一个障碍。我怎样才能解决这个问题？

```
Function AllMyChildren {
    param (
        [ref]$ReferenceToHash
    }
    get-childitem @ReferenceToHash.Value
    #  etc.etc.
}
$MyHash = @{
    'path' = '*'
    'include' = '*.ps1'
    'name' = $null
}
AllMyChildren ([ref]$MyHash) 
```

> 结果：错误（*“Splatted 变量不能用作属性或数组表达式的一部分。将表达式的结果分配给临时变量，然后改为 splat 临时变量。”*）。

试图这样做：

```
$newVariable = $ReferenceToHash.Value
get-childitem @NewVariable 
```

这确实有效，并且根据错误消息似乎是正确的。在这种情况下，它是*首选语法吗？*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T15:33:24.720

1) 传递哈希表（或任何类的实例，即引用类型）`[ref]`没有意义，因为它们本身总是通过引用传递。`[ref]`与值类型（标量和结构实例）一起使用。

2) splatting 运算符可以直接应用于变量，而不是表达式。

因此，为了解决问题，只需在函数中传递哈希表即可：

```
Function AllMyChildren {
    param (
        [hashtable]$ReferenceToHash # it is a reference itself
    )
    get-childitem @ReferenceToHash
    #  etc.etc.
}
$MyHash = @{
    'path' = '*'
    'include' = '*.ps1'
    'name' = $null
}
AllMyChildren $MyHash 
```

# java - 什么是默认 javac 源代码模式（断言为标识符编译）？

> ID：13330490
> 
> 赞同：4
> 
> 时间：2012-11-11T10:57:16.950
> 
> 标签：java, compilation, assert

根据 Orcale 的[Java7 断言指南](http://docs.oracle.com/javase/7/docs/technotes/guides/language/assert.html#enable-disable)：

> *   源模式 1.3（默认）— 编译器接受使用 assert 作为标识符的程序，但会发出警告。在这种模式下，不允许程序使用 assert 语句。
> *   源模式 1.4 — 如果程序使用 assert 作为标识符，编译器会生成错误消息。在这种模式下，允许程序使用 assert 语句。

我写了这样的课：

```
package mm;

public class ClassTest {
    public static void main(String[] arg) {
        int assert = 1;
        System.out.println(assert);
    }
} 
```

如果 Oracle 的信息正确（1.3 是默认源模式），它应该可以正常编译。但是我遇到了这样的错误：

```
$ javac-版本
javac 1.7.0_04

$ javac -d bin src/mm/*
src\mm\ClassTest.java:5: 错误：从 1.4 版开始，'assert' 是关键字，不能用作标识符
                int 断言 = 1;
                    ^
  （使用 -source 1.3 或更低版本以使用 'assert' 作为标识符）
src\mm\ClassTest.java:6: 错误：从 1.4 版开始，'assert' 是关键字，不能用作标识符
                System.out.println(assert);
                                   ^
  （使用 -source 1.3 或更低版本以使用 'assert' 作为标识符）
2 个错误

```

我手动添加`-source 1.3`并发出警告但编译正常。看来oracle的信息有误，1.3不是默认源码模式。那是哪一个呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T11:17:16.223

[在 Java 7 中，根据 Oracle 的文档](http://docs.oracle.com/javase/7/docs/technotes/tools/solaris/javac.html#options)，默认源模式为 1.7 （请参阅 -source 选项）。您所指的文档可能需要更新

# php - 检查文本大小（以字节为单位）

> ID：13330494
> 
> 赞同：0
> 
> 时间：2012-11-11T10:58:38.300
> 
> 标签：php

我有字符串

```
$text = "this is my text"; 
```

我想知道大小（字节），而不是文本长度。

所以我尝试使用

> 文件大小（）;

但我得到错误

> 警告：filesize(): stat failed for this is my text

如果我尝试使用

> mb_strlen()

它只计算文本长度，而不是大小。

如何知道文本大小？我想要类似“1024 字节”的结果

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T10:59:30.310

在您的情况下，字节长度与字符串长度相同。`strlen`像这样使用：

```
$length = strlen($text); 
```

或者如果你想复杂使用：

```
file_put_contents('myfile.txt', $text);
$length = filesize('myfile.txt');
unlink('myfile.txt'); 
```

# mysql - 我如何释放丢失的自动递增序列号

> ID：13330495
> 
> 赞同：1
> 
> 时间：2012-11-11T10:58:51.577
> 
> 标签：mysql

我有一个带有自动增量字段的表，并且在插入新数据时我正在使用事务。现在我发现有一些序列号丢失了。假设最后一个序列号是 475，现在当我插入新行时，分配给它的序列号是 481。我该如何纠正这个问题。

```
table_A fields ID(Auto increment),Name,Address
table_B fields ID(Auto increment FK TO table_A ID),Tel,Fax,Email,Salesman
table_C fields ID(Auto increment FK TO table_A ID),monthly_commitment

mysql_query("BEGIN");
$a = mysql_query("INSERT INTO table_A VALUES('','name','address')");
$b = mysql_query("INSERT INTO table_B VALUES('','tel','fax','email','salesman')");
$b = mysql_query("INSERT INTO table_C VALUES('','monthly commitment')");
if(($a) && ($b) && ($c)){mysql_query("COMMIT");} else {mysql_query("ROLLBACK");} 
```

# objective-c - 更改静态uitableview的选择/突出显示颜色

> ID：13330498
> 
> 赞同：2
> 
> 时间：2012-11-11T10:59:08.060
> 
> 标签：objective-c, ios, uitableview

如何更改静态的选择/突出显示颜色`UITableView`？我了解非静态`UITableViews`我可能只是子类 a `UITableViewCell`，但由于我不能使用`cellForRowAtIndexPath`静态`UITableView`我该怎么办？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-11T11:06:53.497

使用故事板中的静态单元格时，您**可以**在**`tableView:willDisplayCell:forRowAtIndexPath:`**.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T11:05:13.670

您可以在 Interface Builder 中自定义每个单元格。您可以通过选择每个单元格的属性，然后在属性编辑器中编辑相应的字段来设置它。对于更加自定义的外观/行为，您甚至可以子类化一个单元格并让其类的 Interface Builder 在身份检查器中。

# objective-c - 无法使用 prepareForSegue 传递数据：

> ID：13330501
> 
> 赞同：0
> 
> 时间：2012-11-11T10:59:48.110
> 
> 标签：objective-c, uistoryboard

我正在尝试将数据从一个视图控制器中的 UITextView 传递到另一个视图控制器中的 UITextView。我的应用程序正在使用情节提要。

在第一个视图控制器中我说：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
LyricKaraokeViewController *karaokeController = segue.destinationViewController;
karaokeController.hidesBottomBarWhenPushed = YES;
SongDoc *song = [[SongDoc alloc] initWithTitle:@"Title" lyrics:@"Test" thumbImage:nil];
karaokeController.detailItem = song;
NSLog(@"%@", karaokeController.detailItem.data.lyrics); 
} 
```

NSLog 输出适当的文本

在我的第二个视图控制器中，我声明了这个接口：

```
@class SongDoc;

@interface LyricKaraokeViewController : UIViewController

@property (nonatomic, retain) SongDoc * detailItem;

@end 
```

和这个实现（为简单起见仅显示 viewDidLoad ）：

```
 - (void)viewDidLoad
 {

NSLog(@"%@", self.detailItem.data.lyrics);

    [super viewDidLoad];
 } 
```

我确认 detailItem 中有属性 data.lyrics，因为我们传入了一个 SongDoc 对象，并且我之前在 prepareForSegue 中输出了 SongDocs 内容......

我的问题是在第二个视图控制器中我收到一个错误，说详细项没有声明属性歌词

但我知道这是不真实的，为什么会发生这种情况？

任何帮助都会非常感谢:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T11:04:58.710

```
@class SongDoc; 
```

只告诉编译器这`SongDoc`是一个类，但不读取实现文件。你必须

```
#import "SongDoc.h" 
```

而是让编译器知道类声明了哪些属性。

# c - 创建1个输出“新线程”任意次数的线程

> ID：13330503
> 
> 赞同：1
> 
> 时间：2012-11-11T11:00:03.680
> 
> 标签：c, pthreads

> **可能重复：**
> [了解 pthread_detach](https://stackoverflow.com/questions/13319793/understanding-pthread-detach)

以下代码正在创建一个打印“新线程”的线程。

```
#include<stdio.h>
#include<pthread.h>
void *thr_fn(void *arg)
{
      printf("New thread\n");
      sleep(5);
      return (void *)1;
}
int main()
{
       pthread_t pid;
       void *t;
       pthread_create(&pid,NULL,thr_fn,NULL);
       printf("main thread\n");
       exit(0);
} 
```

输出可以是以下任何一种：

```
 1.main thread 
      New thread
    2.main thread
    3.main thread
      New thread
      New thread
```

第一个和第二个都令人信服。但是任何人都可以解释第三个可选输出背后的原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T11:28:00.737

我很确定，您的程序不会创建两个线程；-)

`stdout`您很可能会在新线程和主线程之间 看到竞争条件的影响。`exit`刷新并关闭所有流。这可能以非原子方式发生，并且与另一个线程并行写入相同的流缓冲区并将其刷新到文件描述符。

# java - 如何解决这个休眠运行时异常？

> ID：13330506
> 
> 赞同：1
> 
> 时间：2012-11-11T11:00:32.233
> 
> 标签：java, hibernate, exception, hibernate-mapping, runtimeexception

我正在尝试在 Eclipse 中运行以下代码

```
package com.trial;

import java.sql.*;
import java.io.*;
import org.hibernate.*;
import org.hibernate.cfg.*;

public class AddStudent {

     private static SessionFactory sessionFactory;

     public static void main(String args[]) throws Exception {

    DataInputStream d = new DataInputStream(System.in);
    System.out.println("ENTER YOUR NAME");
    String name = d.readLine();
    System.out.println("ENTER YOUR DEGREE");
    String degree = d.readLine();
    System.out.println("ENTER YOUR PHONE");
    int phone = Integer.parseInt(d.readLine());
    System.out.println("Name: " + name);
    System.out.println("Degree: " + degree);
    System.out.println("Phone: " + phone);
    if ((name.equals("") || degree.equals(""))) {
        System.out.println("Information Required");
    }
    else {

        try {
            sessionFactory = new Configuration().configure("com//xml//hibernate.cfg.xml").buildSessionFactory();
        }
        catch (Exception e) {
             System.out.println(e.getMessage());
        }

        Session s = sessionFactory.openSession();
        Student stu = new Student();
        stu.setName(name);
        stu.setDegree(degree);
        stu.setPhone(phone);
        s.save(stu);
        System.out.println("Added to Database");
        if (s != null)
            s.close();
    }
}
} 
```

但是在创建**无法读取 XML 的会话工厂对象期间出现运行时异常。**

我正在使用以下 xml 文件

1.  休眠.cfg.xml

    ```
     <!DOCTYPE hibernate-configuration PUBLIC
     "-//Hibernate/Hibernate Configuration DTD 3.0//EN"
      "http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd">
           <hibernate-configuration>

       <session-factory name="studentFactory">

    <property name="connection.driver_class">com.mysql.jdbc.Driver</property>
    <property name="connection.url">jdbc:mysql://localhost:3306/ganeshdb</property>
    <property name="connection.username">****</property>
    <property name="connection.password">****</property>
    <property name="connection.pool_size">10</property>
     <property name="dialect">org.hibernate.dialect.MySQLDialect</property>
     <property name="show_sql">true</property>
    <property name="hbm2ddl.auto">create</property>
    <mapping resource="com//xml//student.hbm.xml" />

     </session-factory>

    </hibernate-configuration> 
    ```

2.  映射文件

    ```
     <?xml version="1.0"? encoding='UTF-8'?>
      <!DOCTYPE hibernate-mapping PUBLIC
     "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
     "http://www.hibernate.org/hibernate-configuration-3.0.dtd">

      <hibernate-mapping>

        <class name="com.trial.Student" table="studentdemo">
      <id name="id" type="int" column="ID">
                    <generator class="increment" />
      </id>
       <property name="name" column="name" />
       <property name="degree" column="degree" />
       <property name="phone" column="phone" />
    </class>

        </hibernate-mapping> 
    ```

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T11:10:36.480

```
<mapping resource="student.hbm.xml" /> 
```

并确保它与 hibernate.cfg.xml 在同一个目录中

# php - 如何使用对象变量（var_dump）？

> ID：13330507
> 
> 赞同：0
> 
> 时间：2012-11-11T11:00:43.520
> 
> 标签：php, simple-html-dom

我只是 var_dump'ed 对象并得到了这样的东西：

```
 object(simple_html_dom)#1 (23) { ["root"]=> object(simple_html_dom_node)#2 (9) { 
["nodetype"]=> int(5) ["tag"]=> string(4) "root" ["attr"]=> array(0) { } ["children"]=> array(0) { } ["nodes"]=> array(1) { [0]=> object(simple_html_dom_node)#3 (9) { ["nodetype"]=> int(3) ["tag"]=> string(4) "text" ["attr"]=> array(0) { } ["children"]=> array(0) { } ["nodes"]=> array(0) { } ["parent"]=> *RECURSION* ["_"]=> array(1) { [4]=> string(51) "'http://www.lnik.com/num' 'http://www.lnik.com/com'" } ["tag_start"]=> int(0) ["dom":"simple_html_dom_node":private]=> *RECURSION* } } ["parent"]=> NULL ["_"]=> array(2) { [0]=> int(-1) [1]=> int(2) } ["tag_start"]=> int(0) ["dom":"simple_html_dom_node":private]=> *RECURSION* } ["nodes"]=> array(2) { [0]=> object(simple_html_dom_node)#2 (9) { ["nodetype"]=> int(5) ["tag"]=> string(4) "root" ["attr"]=> array(0) { } ["children"]=> array(0) { } ["nodes"]=> array(1) { [0]=> object(simple_html_dom_node)#3 (9) { ["nodetype"]=> int(3) ["tag"]=> string(4) "text" ["attr"]=> array(0) { } ["children"]=> array(0) { } ["nodes"]=> array(0) { } ["parent"]=> *RECURSION* ["_"]=> array(1) { [4]=> string(51) "'http://www.lnik.com/num' 'http://www.lnik.com/com'" } ["tag_start"]=> int(0) ["dom":"simple_html_dom_node":private]=> *RECURSION* } } ["parent"]=> NULL ["_"]=> array(2) { [0]=> int(-1) [1]=> int(2) } ["tag_start"]=> int(0) ["dom":"simple_html_dom_node":private]=> *RECURSION* } [1]=> object(simple_html_dom_node)#3 (9) { ["nodetype"]=> int(3) ["tag"]=> string(4) "text" ["attr"]=> array(0) { } ["children"]=> array(0) { } ["nodes"]=> array(0) { } ["parent"]=> object(simple_html_dom_node)#2 (9) { ["nodetype"]=> int(5) ["tag"]=> string(4) "root" ["attr"]=> array(0) { } ["children"]=> array(0) { } ["nodes"]=> array(1) { [0]=> *RECURSION* } ["parent"]=> NULL ["_"]=> array(2) { [0]=> int(-1) [1]=> int(2) } ["tag_start"]=> int(0) ["dom":"simple_html_dom_node":private]=> *RECURSION* } ["_"]=> array(1) { [4]=> string(51) "'http://www.lnik.com/num' 'http://www.lnik.com/com'" } ["tag_start"]=> int(0) ["dom":"simple_html_dom_node":private]=> *RECURSION* } } ["callback"]=> NULL ["lowercase"]=> bool(true) ["original_size"]=> int(51) ["size"]=> int(51) ["pos":protected]=> int(51) ["doc":protected]=> string(51) "'http://www.lnik.com/num' 'http://www.lnik.com/com'" ["char":protected]=> NULL ["cursor":protected]=> int(2) ["parent":protected]=> object(simple_html_dom_node)#2 (9) { ["nodetype"]=> int(5) ["tag"]=> string(4) "root" ["attr"]=> array(0) { } ["children"]=> array(0) { } ["nodes"]=> array(1) { [0]=> object(simple_html_dom_node)#3 (9) { ["nodetype"]=> int(3) ["tag"]=> string(4) "text" ["attr"]=> array(0) { } ["children"]=> array(0) { } ["nodes"]=> array(0) { } ["parent"]=> *RECURSION* ["_"]=> array(1) { [4]=> string(51) "'http://www.lnik.com/num' 'http://www.lnik.com/com'" } ["tag_start"]=> int(0) ["dom":"simple_html_dom_node":private]=> *RECURSION* } } ["parent"]=> NULL ["_"]=> array(2) { [0]=> int(-1) [1]=> int(2) } ["tag_start"]=> int(0) ["dom":"simple_html_dom_node":private]=> *RECURSION* } ["noise":protected]=> array(0) { } ["token_blank":protected]=> string(4) " " ["token_equal":protected]=> string(4) " =/>" ["token_slash":protected]=> string(6) " /> " ["token_attr":protected]=> string(2) " >" ["_charset"]=> string(5) "UTF-8" ["_target_charset"]=> string(5) "UTF-8" ["default_br_text":protected]=> string(2) " " ["default_span_text"]=> string(1) " " ["self_closing_tags":protected]=> array(9) { ["img"]=> int(1) ["br"]=> int(1) ["input"]=> int(1) ["meta"]=> int(1) ["link"]=> int(1) ["hr"]=> int(1) ["base"]=> int(1) ["embed"]=> int(1) ["spacer"]=> int(1) } ["block_tags":protected]=> array(6) { ["root"]=> int(1) ["body"]=> int(1) ["form"]=> int(1) ["div"]=> int(1) ["span"]=> int(1) ["table"]=> int(1) } ["optional_closing_tags":protected]=> array(11) { ["tr"]=> array(3) { ["tr"]=> int(1) ["td"]=> int(1) ["th"]=> int(1) } ["th"]=> array(1) { ["th"]=> int(1) } ["td"]=> array(1) { ["td"]=> int(1) } ["li"]=> array(1) { ["li"]=> int(1) } ["dt"]=> array(2) { ["dt"]=> int(1) ["dd"]=> int(1) } ["dd"]=> array(2) { ["dd"]=> int(1) ["dt"]=> int(1) } ["dl"]=> array(2) { ["dd"]=> int(1) ["dt"]=> int(1) } ["p"]=> array(1) { ["p"]=> int(1) } ["nobr"]=> array(1) { ["nobr"]=> int(1) } ["b"]=> array(1) { ["b"]=> int(1) } ["option"]=> array(1) { ["option"]=> int(1) } } } 
```

如何回显对象的一些变量？试过 $object->link; 等但不工作

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T11:19:06.567

> 如何回显 object 的一些变量？

该[`var_dump`](http://php.net/var_dump)函数用于调试有关具体变量的信息。在您的情况下，它告诉您转储的变量或表达式是类型对象`simple_html_dom`并输出一些附加信息：

```
object(simple_html_dom) #1 (23) { 
    ["root"]=> object(simple_html_dom_node)#2 (9) { 
        ["nodetype"]=> int(5) 
        ["tag"]=> string(4) "root" ["attr"]=> array(0) {} 
        ["children"]=> array(0) {}
        ["nodes"]=> array(1) {
            ... 
```

正如这表明它有一些结构，`var_dump`也试图遍历该对象的属性值。

但是，您在问题中发布输出的方式因此很难真正看到这些。考虑使换行符和空格可见，例如，如果您从浏览器复制了这些内容，请首先使用浏览器的查看源代码功能来实际查看这些换行符。

这通常使得找出哪些对象属性实际存在以及哪些不存在变得不费吹灰之力。

```
 $object->link; 
```

是不是长期不工作不存在。此外，由于每个对象可能不同，请查看简单 html dom 库的文档如何使用它。它可能通过所谓的[*魔术方法*](http://php.net/language.oop5.magic)定义自己的访问器——`var_dump`看不到这些，它只是关于裸值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T11:06:12.733

尝试

```
$object->root->link 
```

有两个级别的对象。

我希望这有帮助

# android - 一个 AsyncTask 用于多个活动

> ID：13330509
> 
> 赞同：3
> 
> 时间：2012-11-11T11:00:54.543
> 
> 标签：android, android-asynctask

我正在编写一个使用 WebServices 检索数据的应用程序。最初`AsyncTask`，对于需要来自 WebService 的数据的每个活动，我都有一个私有类。但是我决定通过创建`AsyncTask`一个公共类来简化代码。一切正常，但我的问题是当我想从`AsyncTask`.

例如，这是我的`AsyncTask`课。

```
public class RestServiceTask extends AsyncTask<RestRequest, Integer, Integer> {

    /** progress dialog to show user that the backup is processing. */
    private ProgressDialog dialog;
    private RestResponse response;
    private Context context;

    public RestServiceTask(Context context) {
        this.context = context;

        //...Show Dialog
    }

    protected Integer doInBackground(RestRequest... requests) {
        int status = RestServiceCaller.RET_SUCCESS;
        try {
            response = new RestServiceCaller().execute(requests[0]);
        } catch(Exception e) {
            //TODO comprobar tipo error
            status = RestServiceCaller.RET_ERR_WEBSERVICE;
            e.printStackTrace();
        }

        return status;
    }

    protected void onPreExecute() {
        response = null;
    }

    protected void onPostExecute(Integer result) {

        if (dialog.isShowing()) {
            dialog.dismiss();
        }

        switch (result) {
        case RestServiceCaller.RET_ERR_NETWORK:
            Toast.makeText(
                    context,
                    context.getResources().getString(
                            R.string.msg_error_network_unavailable),
                    Toast.LENGTH_LONG).show();
            break;
        case RestServiceCaller.RET_ERR_WEBSERVICE:
            Toast.makeText(
                    context,
                    context.getResources().getString(
                            R.string.msg_error_webservice), Toast.LENGTH_LONG)
                    .show();
            break;
        default:
            break;
        }
    }

    public RestResponse getResponse() throws InterruptedException {
        return response;
    }
} 
```

`RestServiceCaller`，`RestRequest`并且`RestResponse`是我创建的类。我正在使用这样的任务：

```
RestRequest request = new JSONRestRequest();
request.setMethod(RestRequest.GET_METHOD);
request.setURL(Global.WS_USER);
HashMap<String, Object> content = new HashMap<String, Object>() {
   {
      put(Global.KEY_USERNAME, username.getText().toString());
   }
};
request.setContent(content);
RestServiceTask task = new RestServiceTask(context);
task.execute(request); 
```

此代码工作正常并且正确调用 Web 服务，我的问题是何时我想访问响应。在`AsyncTask`我创建了方法`getResponse`但是当我使用它时，它返回一个空对象，因为`AsyncTask`仍在进行中，所以这段代码不起作用：

```
//....
task.execute(request);
RestResponse r = new RestResponse();
r = task.getResponse(); 
```

`r`将是一个空指针，因为`AsyncTask`仍在下载数据。

我尝试在`getResponse`函数中使用此代码，但它不起作用：

```
public RestResponse getResponse() throws InterruptedException {
        while (getStatus() != AsyncTask.Status.FINISHED);
        return response;
    } 
```

我认为使用 while 循环，线程将等到`AsyncTask`完成，但我实现的是一个无限循环。

所以我的问题是，我怎么能等到`AsyncTask`完成，这样该`getResponse`方法才会返回正确的结果？

最好的解决方案是使用该`onPostExecute`方法，但由于`AsyncTask`被许多活动使用，我不知道该怎么做。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T11:15:32.507

尝试创建一个回调接口。这个异步任务问题的答案[Android 中 AsyncTask 的通用类？](https://stackoverflow.com/questions/3291490/common-class-for-asynctask-in-android)对此给出了很好的解释。

# ruby-on-rails-3 - 让 routes.rb root 在 Rails 中工作

> ID：13330512
> 
> 赞同：0
> 
> 时间：2012-11-11T11:01:19.687
> 
> 标签：ruby-on-rails-3, rubymine

再次开始与 RoR 合作！我无法让我的 config/routes.rb 文件执行。我正在使用 RubyMine 获得“未初始化的常量 ApplicationsController”。

这是我在尝试搜索内容后在 routes.rb 中所做的更改：

```
resources :applications  
root :to => 'applications#index'

application_controller.rb has:
  class ApplicationController < ActionController::Base
  protect_from_forgery
end 
```

我已经运行了我的 rake 路线：

```
 applications GET    /applications(.:format)          applications#index
                 POST   /applications(.:format)          applications#create
 new_application GET    /applications/new(.:format)      applications#new
edit_application GET    /applications/:id/edit(.:format) applications#edit
     application GET    /applications/:id(.:format)      applications#show
                 PUT    /applications/:id(.:format)      applications#update
                 DELETE /applications/:id(.:format)      applications#destroy
            root        /                                applications#index 
```

`rake rails:update`并且所有更改都已获得批准，除了更改 routes.rb 以下是它踢出 Rubymine 方面的内容：

```
Started GET "/" for 127.0.0.1 at 2012-11-11 02:50:27 -0800
Connecting to database specified by database.yml

ActionController::RoutingError (uninitialized constant ApplicationsController): 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T11:49:02.230

你应该重命名`application_controller.rb`为`applications_controller.rb`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T12:19:11.500

`applications_controller`检查您的文件夹中是否有一个文件`app/controller`，或者它的名称是`application_controller`，因此将其重命名为`applications_controller`，如果您没有该文件，则创建您的`ApplicationsController`：

`rails generate controller applications`

# java - JComboBox 在单击之前不显示

> ID：13330524
> 
> 赞同：0
> 
> 时间：2012-11-11T11:02:52.130
> 
> 标签：java, swing

我有一堆 JComboBox 已放入 JPanel 中，但 JComboBox 在被点击之前是不可见的。有没有人知道我可能做错了什么，初始化代码如下所示：

```
public class DelegateUI extends JFrame implements Observer, ActionListener{
public static int vertexPoints[][]= {
    {586, 584}, {586, 754}, {83, 754}, {83, 582}, // 1 - 4
    {414, 246}, {340, 514}, {479, 514},  // 5 - 8
    {618, 108}, {700, 203}, {493, 336}, {492, 126}, // 9 - 11
    {935, 123}, {937, 470}, {729, 473}, {730, 125}, // 12 - 15  
    {772, 557}, {656, 672}, {608, 410}, 
    {1042, 120}, {1104, 179}, {1071, 508}, {967, 169}   // 19 - 22
    };
private Model model;
private JPanel topPanel;
private JComboBox searchType;
private JComboBox startVertex;
private JComboBox goalVertex;
Object [] searchTypes = { "Breadth First", "Uniform Cost", "Greedy Best First", "A*"};
Object [] vertexNumbers = {"1", "2", "3", "4", "5", "6", "7", "8", "9", "10", "11", "12", "13", "14", "15",
        "16", "17", "18", "19", "20", "21", "22"};

public DelegateUI(Model m){

    this.model = m;
    m.addObserver(this);
    setSize(1200, 1000);

    topPanel = new JPanel();
    topPanel.setBackground(Color.BLACK);
    searchType = new JComboBox(searchTypes);
    startVertex = new JComboBox(vertexNumbers);
    goalVertex = new JComboBox(vertexNumbers);

    searchType.setSelectedIndex(0);
    searchType.addActionListener(this);

    startVertex.setSelectedIndex(3);
    startVertex.addActionListener(this);
    startVertex.setActionCommand("start");

    goalVertex.setSelectedIndex(19);
    goalVertex.addActionListener(this);
    goalVertex.setActionCommand("goal");

    topPanel.add(searchType);
    topPanel.add(startVertex);
    topPanel.add(goalVertex);

    this.setLayout(new BorderLayout());
    this.add(topPanel, BorderLayout.NORTH);

    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    setVisible(true);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T11:22:02.113

我使用了您的代码，它对我有用：

```
public void createGUI(){

        setSize(1200, 1000);

        topPanel = new JPanel();

        JComboBox searchType = new JComboBox(new Object[]{"1", "2"});
        JComboBox startVertex = new JComboBox(new Object[]{"1", "2"});
        JComboBox goalVertex = new JComboBox(new Object[]{"1", "2"});

        searchType.setSelectedIndex(1);         
        startVertex.setSelectedIndex(1);          
        startVertex.setActionCommand("start");

        goalVertex.setSelectedIndex(1);
        goalVertex.setActionCommand("goal");

        topPanel.add(searchType);
        topPanel.add(startVertex);
        topPanel.add(goalVertex);

        this.setLayout(new BorderLayout());
        this.add(topPanel, BorderLayout.NORTH);

        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setVisible(true);

} 
```

![在此处输入图像描述](../Images/62830a94105e38c8904156aca1e924fd.png)

听起来你有一些问题`ActionListener`or `new JComboBox(Vector/Object[])`。

# cassandra - Cassandra 随机密钥 (?)

> ID：13330528
> 
> 赞同：1
> 
> 时间：2012-11-11T11:03:23.357
> 
> 标签：cassandra

我目前是 MongoDB 用户，但是，

看到缺少随机函数（从数据库中获取*n 个*随机键），我正在考虑切换到 cassandra。

我已经阅读了一些关于它的内容，可能适合我的需要；虽然我还没有找到任何关于获取随机密钥的信息，如果这可能的话？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T06:16:36.717

不可能 你必须自己写

# opengl - 在 OpenGL 中存储和加载矩阵

> ID：13330530
> 
> 赞同：3
> 
> 时间：2012-11-11T11:03:27.290
> 
> 标签：opengl, graphics, matrix

是否可以告诉 OpenGL 将当前变换矩阵存储在特定位置（而不是将其推入堆栈）并从特定位置加载矩阵？

我更喜欢不涉及视频设备和主内存之间额外数据传输的解决方案（即，最好将矩阵存储在视频内存中的某个位置）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-11T11:28:06.993

要回答您问题的第一部分：

函数[glLoadMatrix](https://www.opengl.org/sdk/docs/man2/xhtml/glLoadMatrix.xml)和 glGet 可以做到这一点

```
// get current model view matrix
double matrix[16];
glGetDoublev(GL_MODELVIEW_MATRIX, matrix)

// manipulate matrix

glLoadMatrixd(matrix); 
```

请注意，OpenGL 4 不再支持这些函数。无论如何，矩阵运算必须在应用程序站点上完成，并作为统一变量提供给着色器程序。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-11T12:15:59.193

在旧的固定函数管道上，矩阵按需加载到一些特殊的 GPU 寄存器中，但从未在 VRAM 中，所有矩阵计算都发生在 CPU 上。在现代，OpenGL 矩阵计算仍然发生在 CPU 上（并且正确），并再次按需加载到称为“Uniforms”的寄存器中。然而，现代 OpenGL 也有一个称为“统一缓冲区对象”的功能，它允许从 VRAM 加载统一（寄存器）值。[http://www.opengl.org/wiki/Uniform_Buffer_Object](http://www.opengl.org/wiki/Uniform_Buffer_Object)

但它们几乎没有用于存储变换矩阵。首先，您将不断更改它们以制作动画。其次，管理一个简单矩阵的 UBO 的开销比从 CPU 设置它要消耗更多的性能。一个矩阵只有 16 个标量，或者相当于一个具有位置、法线、纹理坐标和切线属性的单个顶点。

# c# - 使用 AttachAll 的 Linq To Sql。重复键异常

> ID：13330533
> 
> 赞同：1
> 
> 时间：2012-11-11T11:03:48.593
> 
> 标签：c#, sql-server, asp.net-mvc, entity-framework, linq-to-sql

我在网站上搜索了答案，但没有找到答案。我有以下问题...

我正在尝试更新数据库中的多条记录，如下所示：

```
 public void SaveJItem(List<DataForDespatcher> Jitem)
        {
             JitemsTable.InsertAllOnSubmit(Jitem.Where(i => i.Id ==0));
JitemsTable.AttachAll(Jitem.Where(i => i.Id != 0));
JitemsTable.Context.Refresh(RefreshMode.KeepCurrentValues, Jitem);
JitemsTable.Context.SubmitChanges(); 

        } 
```

该表描述如下：

```
 [Table(Name = "tanks")] 
    public class DataForDespatcher
    {
        [Column(IsPrimaryKey = true, IsDbGenerated = true,AutoSync = AutoSync.OnInsert)]
        public int Id { get; set; }
    /*bla bla bla */
} 
```

当我更新时，我收到错误：

> “JitemsTable.AttachAll(Jitem.Where(i => i.Id != 0));”中的“DuplicateKeyException”。

如何正确更新数据？

添加：剃须刀更新表格：

```
@inherits WebViewPage<IEnumerable<DomainModel.Entities.DataForDespatcher>>
/*bla bla bla*/ 
```

数据控制器保存（获取）：

```
public ViewResult EditForDispatcher(int group)
        {
            var list = DataRep.JItems.Where(x => x.group == group).Select(x => x);
            return View(list);
        } 
```

数据控制器保存（发布）：

```
 [HttpPost]
        public ActionResult EditForDispatcher(List<DataForDespatcher> Jitem, string addNewOperation, string sendParam, string operations)
        {
                if (ModelState.IsValid)
                {
 int group = DataRep.JItems.ToList().Max(x => x.group + 1);

                    if (Jitem.Any(x => x.group != 0))
                        foreach (var dataForDespatcher in Jitem)
                            dataForDespatcher.group = Jitem.Where(x=>x.group!=0).Select(x=>x.group).First(); 
                    else
                        foreach (var dataForDespatcher in Jitem)
                            dataForDespatcher.group = group; 
                    DataRep.SaveJItem(Jitem);
                }
         return View(Jitem);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T11:42:50.077

我的意思是发生异常是因为您在 List 中有更新的项目和新的项目，并且列表中的第一个项目不是插入的项目。我认为，你必须这样做：

```
 JitemsTable.InsertAllOnSubmit(Jitem.Where(i => i.Id ==0));
    JitemsTable.AttachAll(Jitem.Where(i => i.Id != 0));
    JitemsTable.Context.Refresh(RefreshMode.KeepCurrentValues, Jitem);
    JitemsTable.Context.SubmitChanges(); 
```

# ruby-on-rails - 基于 2 列的 rails 计算字段

> ID：13330544
> 
> 赞同：2
> 
> 时间：2012-11-11T11:05:21.300
> 
> 标签：ruby-on-rails, ruby-on-rails-3

这可能很简单，但不是这样：

```
current_cart.line_items.sum(:line_item_total) 
```

我更喜欢这样实现它：

```
current_cart.line_items.sum(:line_item_unit_price * :quantity) 
```

基于两个字段构建计算字段的最佳语法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T14:15:59.087

您可以使用

```
current_cart.line_items.sum("line_item_unit_price * quantity") 
```

坚持你的第二个选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T11:20:32.137

我认为以下会起作用

```
def total_price
  line_item_unit_price * quantity
end 
```

进而

```
current_cart.line_items.sum(:total_price) 
```

# java - apache cxf客户端初始化缓慢

> ID：13330547
> 
> 赞同：6
> 
> 时间：2012-11-11T11:05:39.973
> 
> 标签：java, apache, soap, cxf

我正在使用 wsdl2java 生成的类和这段代码：

```
MyService f = new MyService();
MyServicePortType type = f.getMyServicePortType(); 
```

每个调用最多需要 30 秒。这是为什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-11T12:44:38.723

经过数小时的谷歌搜索和修改后，问题在于如何引用方案文件：虽然 WSDL 和 XSD 是本地存储的，但仍然有一些引用到 w3.org，如下所示：

```
<!DOCTYPE schema PUBLIC "-//W3C//DTD XMLSchema 200102//EN" "http://www.w3.org/2001/XMLSchema.dtd" [...

<import namespace="http://www.w3.org/2000/09/xmldsig#" schemaLocation="http://www.w3.org/TR/2002/REC-xmldsig-core-20020212/xmldsig-core-schema.xsd" /> 
```

w3.org 服务器响应速度非常慢，因此我的客户端初始化缓慢。

我已更改对本地的引用：

```
<import namespace="http://www.w3.org/2000/09/xmldsig#" schemaLocation="xmldsig-core-schema.xsd" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-16T13:26:17.230

我欠你一大笔债，因为我已经为此苦苦挣扎了好几天，而你的回答为我指明了正确的方向。

实际上 w3.org URL 需要很长时间才能响应，但是实际上没有理由说明从 WSDL 生成的 SOAP 客户端仍然需要在运行时解析 WSDL。

**事实上它不是**，但是默认生成的construstors 会强制这样做。

我发现可以通过以不同方式实例化服务端口并通过请求上下文指定服务端点来跳过此操作，如下所示：

```
// creating the service this way passes null as the wsdlLocation, preventing the runtime resolution and parsing of the wsdl
Service service =  ZefixService.create(ZefixService.SERVICE);

ZefixServicePortType zefixServicePort = service.getPort(ZefixServicePortType.class);

Map<String, Object> requestContext = ((BindingProvider) zefixServicePort).getRequestContext();
// because we create the service without the wsdl location, we need to specify the service base url ourselves
requestContext.put(BindingProvider.ENDPOINT_ADDRESS_PROPERTY, Configuration.get(Constants.API_BASE_URI_PROPERTY));
requestContext.put(BindingProvider.USERNAME_PROPERTY, Configuration.get(Constants.USER_PROPERTY));
requestContext.put(BindingProvider.PASSWORD_PROPERTY, Configuration.get(Constants.PASSWORD_PROPERTY));

return zefixServicePort; 
```

我希望这对您和其他人将来有用。

再次感谢

# mysql - 如何使用 mysql 获得最近 5 天的总数？

> ID：13330549
> 
> 赞同：2
> 
> 时间：2012-11-11T11:05:58.287
> 
> 标签：mysql, sql

我有这样的表：

```
id   answers  date    
12   A1       9-nov  
13   A2       10-nov 
14   A3       7-nov  
... 
```

现在我想为每个答案计算过去 5 天的总答案`A1`, `A2`, `A3`.

输出应该是这样的：

```
answer  count(answer) 
A1      20 
A2      0
A3      34 
```

我怎么能用 MySQL 做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T11:11:00.117

~~试试这个：~~

 ~~```
SELECT answers, COUNT(*)
FROM Table1
WHERE DATEDIFF(NOW(), `date`) >= 5
GROUP BY answers; 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!2/ea806/1)~~  ~~**更新：**试试这个：

```
SELECT t1.answers, IFNULL(COUNT(t2.answers), 0)
FROM table1 t1
LEFT JOIN
(
    SELECT DISTINCT answers FROM table1
) t2 ON  t1.answers = t2.answers AND DATEDIFF(NOW(), t1.`date`) <= 5
GROUP BY t1.answers; 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!2/1c25a/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T18:01:41.980

过去 5 天是什么意思？您是指从现在开始的最后 5 天，还是表中存在的最后 5 天？如果您的意思是表中存在的最后 5 天，如果您错过了表中的某些天，则可能是 5 天前，那么您可以使用以下内容：

```
SELECT
  ans.answers, count(last_tab.id)
FROM
  (select distinct answers from tab) ans
  left join
  (select id, answers
   from tabs
        inner join
        (select distinct date from tab order by date desc limit 5) dt
  on tab.date = dt.date) last_tab
  on ans.answers = last_tab.answers
group by ans.answers; 
```~~

# ios - Facebook 通过 iOS 发送消息

> ID：13330550
> 
> 赞同：0
> 
> 时间：2012-11-11T11:06:03.560
> 
> 标签：ios, xcode, facebook

我正在使用此代码发送消息：

```
//send message
     NSString *friendList = @"1372394537";
     NSMutableDictionary* params =
     [NSMutableDictionary dictionaryWithObjectsAndKeys:
      @"Check this out.",  @"message",
      friendList, @"suggestions",
      nil];

     [self.facebook dialog:@"apprequests"
                 andParams:params
               andDelegate:self];
     //send message 
```

我的应用程序使用 facebook 登录，显示朋友列表，然后在朋友列表中添加朋友的 ID，但他们没有收到任何消息！为什么？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T11:08:37.940

> ### 您发送的是请求而不是消息。有一个很大的不同。
> 
> 您正在谈论的消息只是您可以与请求一起传递的参数。

当请求未到达时，我看到人们处理的最常见问题是应用程序设置为沙盒模式。如果应用程序处于沙盒模式，则只有应用程序中“角色”部分中列出的用户才能接收请求（管理员、开发人员、测试人员......）。

此处可能起作用的另一件事是未为您的应用程序设置画布 URL。当用户对请求采取行动时，他们会被发送到应用程序的画布 URL。如果您未设置该值，则无法发送请求给用户，因此请求无效并且不会到达用户。

因此，您可以尝试两件事-

1.  从沙盒模式中删除您的应用程序。
2.  确保您已经为您的应用程序设置了画布 URL 属性。

# nhibernate - nHibernate ByCode Mapping - 如何完全按照约定映射ManyToMany？

> ID：13330554
> 
> 赞同：1
> 
> 时间：2012-11-11T11:06:36.803
> 
> 标签：nhibernate, mapping-by-code

我已经定义了这个映射：

```
public class Mapping : ConventionModelMapper
{
    public Mapping()
    {
        IsRootEntity((type, declared) =>
                         {
                             return !type.IsAbstract &&
                                    new[] { typeof(Entity<Guid>), typeof(CommonEntity) }.Contains(type.BaseType);
                         });

        IsEntity((x, y) => typeof(Entity<Guid>).IsAssignableFrom(x) && !x.IsAbstract && !x.IsInterface);

        IsSet((mi, wasDeclared) =>
                  {
                      var propertyType = mi.GetPropertyOrFieldType();
                      return propertyType.IsGenericType && typeof(System.Collections.Generic.ISet<>).IsAssignableFrom(propertyType.GetGenericTypeDefinition());
                  });

        IsManyToMany((mi, wasDeclared) =>
                         {
                             var propertyType = mi.GetPropertyOrFieldType();
                             var containingType = mi.ReflectedType;

                             if (typeof(System.Collections.Generic.ISet<>).IsAssignableFrom(propertyType.GetGenericTypeDefinition()))
                             {
                                 var referenceType = propertyType.GetGenericArguments()[0];
                                 return true;
                                 return !referenceType.GetProperties(BindingFlags.Instance | BindingFlags.Public).Any(p => p.PropertyType.IsAssignableFrom(containingType));
                             }
                             return false;
                         });

        Class<Entity<Guid>>(x =>
                                {
                                    x.Id(c => c.Id, m => m.Generator(Generators.GuidComb));
                                    x.Version(c => c.Version, (vm) => { });
                                });

        BeforeMapClass += OnBeforeMapClass;
        BeforeMapManyToOne += OnBeforeMapManyToOne;
        BeforeMapSet += OnBeforeMapSet;
        BeforeMapManyToMany += OnBeforeMapManyToMany;

        Class<CommonEntity>(x =>
        {
            x.Property(c => c.DateCreated, m => m.Type<UtcDateTimeType>());
            x.Property(c => c.DateModified, m => m.Type<UtcDateTimeType>());
        });
    }

    private void OnBeforeMapManyToMany(IModelInspector modelInspector, PropertyPath member, IManyToManyMapper collectionRelationManyToManyCustomizer)
    {
        collectionRelationManyToManyCustomizer.Column(member.LocalMember.GetPropertyOrFieldType().GetGenericArguments()[0].Name + "Id");
    }

    private void OnBeforeMapSet(IModelInspector modelInspector, PropertyPath member, ISetPropertiesMapper propertyCustomizer)
    {
        propertyCustomizer.Key(k=>k.Column(member.GetContainerEntity(modelInspector).Name + "Id"));
        propertyCustomizer.Cascade(Cascade.Persist);
        if (modelInspector.IsManyToMany(member.LocalMember))
        {
            propertyCustomizer.Table(member.GetContainerEntity(modelInspector).Name +
                                     member.LocalMember.GetPropertyOrFieldType().GetGenericArguments()[0].Name);
        }
    }

    private void OnBeforeMapManyToOne(IModelInspector modelInspector, PropertyPath member, IManyToOneMapper propertyCustomizer)
    {
        propertyCustomizer.Column(member.LocalMember.Name + "Id");
    }

    private void OnBeforeMapClass(IModelInspector modelInspector, Type type, IClassAttributesMapper classCustomizer)
    {
        classCustomizer.Table('['+ type.Name + ']');
    }
} 
```

我遇到了多对多关系的问题。我有用户、用户权限和权限。当我在附加权限后保存用户时，它会生成以下 SQL：

```
exec sp_executesql N'UPDATE [Permission] SET UserId = @p0 WHERE Id = @p1',N'@p0 uniqueidentifier,@p1 uniqueidentifier',@p0='57A2CD87-4A79-4131-B9CE-A1060168D520',@p1='9D99D340-1B63-4291-B55A-6127A8F34FC9' 
```

当它应该是这样的：

```
exec sp_executesql N'INSERT INTO UserPermission (UserId, PermissionId) VALUES (@p0, @p1)',N'@p0 uniqueidentifier,@p1 uniqueidentifier',@p0='2C670A01-C2E6-46A3-A412-A1060168F976',@p1='9D99D340-1B63-4291-B55A-6127A8F34FC9' 
```

当我为用户添加特定的类映射时：

```
 Class<User>(classMapper =>
                        {
                            classMapper.Set(x => x.Permissions, map =>
                                                        {
                                                            //map.Key(k => k.Column("UserId"));
                                                            //map.Table("UserPermission");
                                                        }, r => r.ManyToMany(m => {}));
                        }); 
```

我可以省略键和表定义，并在没有列调用的情况下包含 ManyToMany，它可以工作。但它与我的 BeforeManyToMany 事件处理程序做同样的事情。如果我放弃整个 Class 事件，则不会触发 BeforeMapManyToMany 事件，并且 nHibernate 认为我的 Permission 表上有一个 UserId。

继承人用户：

```
public class User : CommonEntity
{
    protected User()
    {
        Permissions = new HashSet<Permission>();
    }

    public User(User createdBy) : base(createdBy)
    {
        Permissions = new HashSet<Permission>();
    }

    public ISet<Permission> Permissions { get; protected set; }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T09:06:31.483

在查看源代码后，我意识到问题是在 IsManyToMany 之前定义集合时，对属性进行了 IsOneToMany 检查。我只需要定义 IsOneToMany，它就可以在没有任何显式映射的情况下工作。

```
 IsOneToMany((mi, wasDeclared) =>
        {
            var propertyType = mi.GetPropertyOrFieldType();

            return ModelInspector.IsEntity(propertyType);
        }); 
```

# php - Drupal 模块：创建文本格式

> ID：13330561
> 
> 赞同：1
> 
> 时间：2012-11-11T11:07:44.523
> 
> 标签：php, drupal, drupal-7, drupal-modules

我创建了一个模块，它定义了一个新的*文本格式过滤器*。
现在我想使用这个新过滤器直接从模块 php定义*文本格式。*Drupal 管理员可以从`admin/config/content/formats/add`管理页面手动执行此操作，但我想避免此步骤。我需要添加`my_dmodule.module`什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-11T12:00:43.437

我猜您正在尝试在模块安装时创建文本格式。如果是这样，您可以调用 filter_format_save()。可以在 filter.module ( [Drupal API 参考](http://api.drupal.org/api/drupal/modules!filter!filter.module/function/filter_format_save/7)) 中找到创建对象的详细信息。

如果您在 hook_install() 中创建过滤器，您可能必须先加载过滤器模块，没有检查：

```
drupal_load('module', 'filter'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T17:02:57.147

受*Hendrik*回答的启发，这是我的解决方案：

```
function myformat_install() {
  drupal_load('module', 'filter');
  /* check already exists */
  $format_exists = (bool) db_query_range('SELECT 1 FROM {filter_format} WHERE name = :name', 0, 1, array(':name' => 'My Format'))->fetchField();
  if (!$format_exists) {
    $format = array(
        'format' => 'myformat',
        'name' => 'My Format',
        'filters' => array(
            'myformat_filter' => array(
                'weight' => 0,
                'status' => 1,
            ),
        ),
    );
    $format = (object) $format;
    filter_format_save($format);
  }
} 
```

`myformat_filter`是一个过滤器定义实现`hook_filter_info()`，但它可以是另一个模块中定义的过滤器。

# haskell - 在二叉树中查找值为 x 的叶子

> ID：13330562
> 
> 赞同：0
> 
> 时间：2012-11-11T11:07:46.037
> 
> 标签：haskell, tree, binary-tree

我有这个问题要做：

“定义一个函数`findpath:: BTree a -> a -> Path`（其中`Btree`a 在前面的问题中定义），给定一棵二叉树`t`和一个 value ，如果有一个值，则`x`返回从根`t`到叶的路径，否则返回值。运行时间你的程序应该与树中的节点数成线性关系。”`x``Nothing`

到目前为止，我有：

```
data Maybe a = Nothing | Just a
data BTree a = Leaf a | Fork (BTree a) (BTree a)
type Path = Maybe [Dir]
data Dir = Left | Right

findpath :: Eq a => BTree a -> a -> Path
findpath (Leaf y) x = if y==x then ??? else Nothing
findpath (Fork l r) x = nodepath (findpath l x) (findpath r x) where
   nodepath :: Path -> Path -> Path
   nodepath Nothing Nothing = Nothing
   nodepath Nothing pathr = Just [R]
   nodepath pathl Nothing = Just [L] 
```

我仍然无法在`(Leaf y)`案例中构建最终答案

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-11T12:07:38.963

你的语言，关于你认为程序应*该做什么*，向我暗示你需要帮助才能摆脱命令式思维的陷阱。*让我试着提供一些帮助，基于对事物是*什么的思考，而不是事物的*作用*。

因为`findpath (Leaf y) x`，你正朝着正确的方向前进。你只需要给出`if`一个小写字母`i`，然后想想什么是正确`Path`的`Leaf`。

现在，让我们考虑另一种可能性。你知道的远不止这些`t`。你知道你真的想弄清楚什么

```
findpath (Node l r) x 
```

是（实际上是什么`=`），因为这是 a 的另一种可能性`BTree`。考虑通过询问“这是`BTree`a`(Leaf y)`还是 a `(Node l r)`？”来拆分问题。作为程序设计的一个概念步骤。现在，为了弄清楚上面的左侧等于什么，您有权获得一些递归计算的信息，即

```
findpath l x 
```

和

```
findpath r x 
```

是。如果您知道`Path`两者的信息`l`和`r`，您能说出`Path`整体`Node l r`的信息吗？让我用 Haskell 写下这个问题：

```
findpath :: Eq a => BTree a -> a -> Path
findpath (Leaf y)   x = if y==x then ??? else Nothing
findpath (Node l r) x = nodepath (findpath l x) (findpath r x) where
  nodepath :: Path -> Path -> Path
  nodepath ??? 
```

我通过引入一个*辅助函数* `nodepath`来表达我的问题，该函数将递归计算的信息作为参数。现在您可以尝试`nodepath`通过模式匹配分别对左右子树的这两条路径来实现。如果您知道它们是`(Just p)`还是`Nothing`，那么您应该能够说出整个节点的路径必须是什么。

第一课，有用的思想是这样的形式：“如果这是某某，那么那一定是某某。”。存在，不做。

第二课，对数据类型进行编程的基本方法是：拆分为构造函数情况（`Leaf`vs `Node`，`Just`vs `Nothing`）；通过递归调用从任何子结构中收集有用的信息；说出整个结构的价值必须是多少。

如果您遵循我的建议并弄清楚`nodepath`应该是什么，您可能会发现它足够简单，不值得成为一个单独的命名定义。在这种情况下，只需将`nodepath`调用替换为其含义并删除 -`where`子句。但最好从引入 开始`nodepath`，因为它表达了解决问题的一个有用的概念步骤。

# java - \s+ 不匹配所有空格？

> ID：13330564
> 
> 赞同：5
> 
> 时间：2012-11-11T11:08:29.980
> 
> 标签：java, regex

我正在尝试匹配这个字符串：

> 文字 18 19 文字

使用这个正则表达式：

```
\s+\d\d\s+ 
```

该字符串有两个数字，每个数字都由前导空格和尾随空格包围。

所以我在想 - 这应该给我 18 和 19 对吗？它没有，它只给了我18个。

我在这里用这个测试仪进行测试：http: [//java-regex-tester.appspot.com/](http://java-regex-tester.appspot.com/)

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-11T11:11:02.160

您不匹配第二个项目的原因是`18`和之间的空间被第一个匹配项的尾随`19`所*消耗*`\s+`。您应该为尾随空白创建一个不消耗的零宽度正则表达式，例如通过使用*前瞻语法*或零宽度边界的标记：

```
\s+\d\d(?=\s+) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-11T11:10:49.667

改用这个：

```
\b\d\d\b 
```

您的正则表达式与第二个数字不匹配，因为第一个匹配已经“吃掉”了所有空格。

同时，`\b`是一个“单词边界”，也就是所谓的零宽度（元）字符：它在匹配时不会“吃掉”任何东西。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-11T11:10:53.097

因为首先解析输出到“18”，剩余的字符串是“19 Text”，这是不匹配的。

# youtube-api - Youtube API - getAvailableQualityLevels 返回一个空数组

> ID：13330565
> 
> 赞同：11
> 
> 时间：2012-11-11T11:08:32.920
> 
> 标签：youtube-api

当我调用 youtube`getAvailableQualityLevels()`函数时，我得到一个空数组，但为什么呢？
该视频具有许多质量级别，例如 360p 480p ... 720p

**演示：http:** [//jsbin.com/eyexah/1/edit](http://jsbin.com/eyexah/1/edit)

**YT API 文档** [https://developers.google.com/youtube/js_api_reference#GettingReference](https://developers.google.com/youtube/js_api_reference#GettingReference)

**代码：**

```
<!DOCTYPE html>
<html>
<head>
<script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/swfobject/2.2/swfobject.js" type="text/javascript"></script>
<meta charset=utf-8 />
<title>JS Bin</title>
<script type="text/javascript" language="javascript">
      var params = { allowScriptAccess: "always" };
      var atts = { id: "youtube_player" };
      swfobject.embedSWF('http://www.youtube.com/v/ZGx2WUbhnyM?enablejsapi=1&playerapiid=ytplayer&version=3',
                         'youtube',
                         '425',
                         '356',
                         '8',
                         null,
                         null,
                         params,
                         atts);

</script>
<script type="text/javascript" language="javascript">
function onYouTubePlayerReady()
{
    console.log('# onYouTubePlayerReady');
    var ytp = document.getElementById("youtube_player");
    var getQuali = ytp.getAvailableQualityLevels();
    console.log(getQuali);
};
</script>
</head>

<body>       
  <div id="youtube"></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-14T07:28:03.217

`playing`如果状态是（或`1`），这将起作用。

`onStateChange`在函数中添加事件监听器`onYouTubePlayerReady`：

```
ytp.addEventListener('onStateChange', 'onPlayerStateChange'); 
```

并添加`onPlayerStateChange`功能，例如：

```
function onPlayerStateChange(event)
{
   var getQuali = ytp.getAvailableQualityLevels();
} 
```

查看基于您的代码的工作示例：http: [//jsbin.com/eyexah/6/edit](http://jsbin.com/eyexah/6/edit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T03:50:32.700

您可以检索状态何时为“正在播放”。
检查 onPlayerStateChange(event)

# javascript - 如何在 JavaScript 中替换 HTML 而不是附加到它？

> ID：13330581
> 
> 赞同：0
> 
> 时间：2012-11-11T11:10:49.920
> 
> 标签：javascript, html

```
function sethtml(a,b)
{
    document.getElementById("canvas_html_"+a).
innerHTML = "<iframe frameBorder="0" scrolling="no" width="200" height="40" name='innerFrame'></iframe>";

    var objDoc = window.frames[ "innerFrame" ].document;
    objDoc.write(b);
} 
```

这只是将 b 添加到 iframe 并且页面变得越来越大。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T11:23:42.877

```
function sethtml(a,b)
{
    document.getElementById("canvas_html_"+a).src=b;
} 
```

b 是指向新 HTML 内容的链接。

编辑：

```
function sethtml(a,b)
{
    var x = document.getElementById("canvas_html_"+a).contentDocument; 
    x.open();
    x.write(b);
    x.close();
} 
```

# java - 在android中读取json响应时如何修复编码？

> ID：13330587
> 
> 赞同：0
> 
> 时间：2012-11-11T11:11:02.727
> 
> 标签：java, android, encoding, character-encoding

我正在调用一个返回`JSON`响应的 API。在阅读`JSON`响应时，有些地方的数据有一些特殊字符。我想在读取对象中的响应时排除这些特殊字符。`JSON`响应如下所示：

```
{"data":[{"title":"PSY - GANGNAM STYLE (\uac15\ub0a8\uc2a4\ud0c0\uc77c) M\/V","content":All rights reserved."}]} 
```

Java代码是这样的：

```
BufferedReader reader = new BufferedReader(new InputStreamReader(
                    is, "ISO-8859-1"), 8); 
```

当我从响应中读取标题键时，它也给了我这些我不想要的特殊字符。如何摆脱那些？我需要指定其他编码吗？

数据源：[http ://pipes.yahoo.com/pipes/pipe.run?_id=920adeb2e95c15877e29dc678aa78dd7&_render=json&n=1](http://pipes.yahoo.com/pipes/pipe.run?_id=920adeb2e95c15877e29dc678aa78dd7&_render=json&n=1)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T14:35:58.310

这不是编码问题（如 UTF-8），而是 JavaScript 语法问题。例如， “ `\uac15`”是表示 Unicode 字符 U+AC15 的 JavaScript 语法，即“강”。这些转义字符一起是用韩文（韩语）写成的歌曲的名称：“강남스타일”。

您的 Java 字符串包含反斜杠转义序列是正常且可以的。当您通过 JSON 阅读器运行该字符串时，您应该得到一个包含实际韩文字符的 JSON 对象。

* * *

为了回应您关于从 JSON 阅读器获得错误输出的评论，这取决于您使用的 JSON 库（以及您如何使用它），您没有在问题中指定。[这是一个使用Jackson](http://jackson.codehaus.org/) 2.1.0对我有用的示例：

```
public final class JsonTest {
    public static void main(final String[] args) {
        final String json = "\"PSY - GANGNAM STYLE (\\uac15\\ub0a8\\uc2a4\\ud0c0\\uc77c) M\\/V\"";
        System.out.println("JSON: " + json);

        try {
            // ObjectMapper is from Jackson 2.1 databind library.
            final ObjectMapper mapper = new ObjectMapper();
            final String decoded = mapper.readValue(json, String.class);
            System.out.println("Decoded: " + decoded);
        }
        catch (final IOException e) {
            e.printStackTrace();
        }
    }
} 
```

# android - 在进行其他活动时将数据导入数据库？

> ID：13330589
> 
> 赞同：1
> 
> 时间：2012-11-11T11:11:46.137
> 
> 标签：android, database, logcat

我正在开发一个“问答”Android 应用程序。当用户选择错误答案时，游戏结束，并且该问题及其答案被导入数据库。但是我有一个问题，我可以将问题及其答案导入数据库，但第二个动作（游戏结束并显示结果）不起作用。我怎样才能解决这个问题？

这是我选择的答案方法：

```
private void onOptionSelected(String option){

    if(!isGamePaused && !isGameEnded) { 
        ATriviaQuestion tTQuestion = myListOfTriviaQuestions.get(currentQuestionNumber);
        if(option.equals(tTQuestion.GetOptions().get(tTQuestion.GetAnswer() - 1))) {
            correct += 1;
            remainingTime = mySecondsPassed;
            totalPoints += remainingTime * pointsPerRemainingSecond; 
            totalPoints += pointsPerCorrectAnswer;  

        }
        else{ questionsAsked = totalQuestions;
        incorrect += 1;
        totalPoints -= pointsPerWrongAnswer;
        DisplayResults();
        EndGame();

            database db= new database(this);

            db.insertData(new ListOfData(myListOfTriviaQuestions.get(currentQuestionNumber).GetQuestion(),tTQuestion.GetOptions().get(tTQuestion.GetAnswer() - 1)));
            loadListViewData();     ;   
        }

        mySecondsPassed = config.GetTimeToAnswer();
        UpdateTimerColors(mySecondsPassed);

        if(questionsAsked >= totalQuestions){   
            isGameEnded=true;
            EndGame();
            DisplayResults();
        } else {                    

            currentQuestionNumber=GenerateQuestionNumber();
            PopulateQuestion();
        }

    }else{
        PausedOrEndedGameResponse();
    }
} 
```

这是 LogCat：

```
11-11 01:58:29.763: E/AndroidRuntime(276): FATAL EXCEPTION: main
11-11 01:58:29.763: E/AndroidRuntime(276): java.lang.NullPointerException
11-11 01:58:29.763: E/AndroidRuntime(276):  at pk.aeh.ideos.taa.PlayGame.lietke_congviec(PlayGame.java:633)
11-11 01:58:29.763: E/AndroidRuntime(276):  at pk.aeh.ideos.taa.PlayGame.onOptionSelected(PlayGame.java:229)
11-11 01:58:29.763: E/AndroidRuntime(276):  at pk.aeh.ideos.taa.PlayGame.onClick(PlayGame.java:149)
11-11 01:58:29.763: E/AndroidRuntime(276):  at android.view.View.performClick(View.java:2408)
11-11 01:58:29.763: E/AndroidRuntime(276):  at android.view.View$PerformClick.run(View.java:8816)
11-11 01:58:29.763: E/AndroidRuntime(276):  at android.os.Handler.handleCallback(Handler.java:587)
11-11 01:58:29.763: E/AndroidRuntime(276):  at android.os.Handler.dispatchMessage(Handler.java:92)
11-11 01:58:29.763: E/AndroidRuntime(276):  at android.os.Looper.loop(Looper.java:123)
11-11 01:58:29.763: E/AndroidRuntime(276):  at     android.app.ActivityThread.main(ActivityThread.java:4627)
11-11 01:58:29.763: E/AndroidRuntime(276):  at     java.lang.reflect.Method.invokeNative(Native Method)
11-11 01:58:29.763: E/AndroidRuntime(276):  at java.lang.reflect.Method.invoke(Method.java:521)
11-11 01:58:29.763: E/AndroidRuntime(276):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
11-11 01:58:29.763: E/AndroidRuntime(276):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
11-11 01:58:29.763: E/AndroidRuntime(276):  at dalvik.system.NativeStart.main(Native Method) 
```

# json - Json 查询 - 无法从数组中获取结果

> ID：13330590
> 
> 赞同：1
> 
> 时间：2012-11-11T11:12:05.900
> 
> 标签：json

我只是在我的网站上制作用于跟踪应用程序的小代码。

我对 json 很陌生，所以我无法找出我的代码有什么问题。现在已经两天了：

这是代码

```
 <http://code.jquery.com/jquery-latest.min.js>  
 <script type="text/javascript">
     $(document).ready(function() {
      var inputField = $('#tracking');
      var outputElement = $('#textResult');
      inputField.keyup(function() {
       if (inputField.val().length > 1) {
        $.getJSON('http://sporing.bring.no/sporing.json?q=' + inputField.val(),                       
             function(data){ 
             outputElement.html('ID' + data.consignmentSet.consignmentId);
             });

       } else {
           outputElement.html('No result!');
       }
      });
     });
    </script>

<div>                                                                      
<input type="text" id="tracking" style="width: 17;" maxlength="30"/><br/><span      id="textResult"></span>
</div>
</body></html> 
```

我的来源是：http: [//developer.bring.com/api/trackingapi.html#json](http://developer.bring.com/api/trackingapi.html#json)

追踪json来源：[http ://sporing.bring.no/sporing.json?q=TESTPACKAGE-AT-PICKUPPOINT](http://sporing.bring.no/sporing.json?q=TESTPACKAGE-AT-PICKUPPOINT)

链接给出结果，但我无法显示它。

这是简单的代码，所以希望有人能解释我做错了什么......

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T11:24:04.670

data.consignmentSet 包含一个包含一个元素的数组，因此

```
data.consignmentSet[0].consignmentId 
```

应该管用！

您可以使用[JSONLint](http://jsonlint.com/)来验证和漂亮地打印您的 JSON，以更好地挖掘它的结构。

此外，您可以使用调试器在运行时探索*数据的内容。*大多数浏览器都有他们的*F12 开发者工具*，或者你可以安装[Firebug](http://getfirebug.com/)。然后切换到*脚本*选项卡，转到访问数据的代码行，然后单击行号。将在运行脚本时停止代码执行的位置设置断点。到达断点后，您可以在*Watch*窗口中浏览数据。

# mysql - 用于保存附件的数据库表

> ID：13330591
> 
> 赞同：0
> 
> 时间：2012-11-11T11:12:13.767
> 
> 标签：mysql, database

我正在为我的网站创建一个数据库，这要求用户在不同的页面上上传多个附件。我希望将所有这些附件保存在一个表中，并从需要附件的其他表中引用该表。

现在的问题是我该怎么做？我还没有弄清楚它的逻辑。我的想法是：

```
attachment_tbl:
attach_id  
file_name
description
item1_id -> FK
item2_id -> FK

item1_tbl:
item1_id
attachment1
attachment2

item2_tbl:
item2_id
attachment1
attachment2
attachment3 
```

现在如何将所有这些附件保存在同一个表中，而在 attachment_tbl 中没有多个 FK，就好像我添加了另一个 item3_tbl，它有附件，是否意味着要在 attachments_tbl 中添加另一个 FK？

有没有其他更简单更好的方法来做同样的事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T11:23:55.537

添加一个关系表，它使用一对多关系连接项目和附件：

```
attachment_tbl:
attach_id  
file_name
description

item_tbl:
item_id

item_attachment_tbl:
item_id -> FK
attach_id -> FK 
```

对于每个附件，item_attach 表中都会有一行：

```
item_id attach_id
-----------------
item1   attach1
item1   attach2
item2   attach3
item3   attach4
item3   attach5
item3   attach6 
```

当您想查看某个项目的附件时，您必须加入表格：

```
select a.file_name, a.description
from attachment_tbl a
inner join item_attachment_tbl ia on a.attach_id = ia.attach_id
where ia.item_id = 87; 
```

另请参阅[SQL 小提琴](http://www.sqlfiddle.com/#!2/5f7da/1/0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T12:59:31.983

如果您不想在 attachment_tbl 中有多个foreign_keys，那么您需要不惜一切代价拥有一个桥接表（如果您想保持关系：）但是它将需要一个额外的字段作为 item_tbl_name 来区分不同项目表的记录。取回它们并没有那么复杂。

```
item_attachment_tbl:
item_id -> FK
item_tbl_name
attach_id -> FK 
```

# php - MySQL日期格式

> ID：13330592
> 
> 赞同：2
> 
> 时间：2012-11-11T11:12:15.620
> 
> 标签：php, mysql, date, time

有谁知道什么是正确的 MySQL 列类型以便以以下格式存储日期？例如：2012-11-11T11:09:28+00:00

更新：我感兴趣的部分是如何存储执行`+xx:xx`操作的用户的时区，问题是是否存在包含时区的 MySQL 日期格式。阅读 MySQL 文档并没有找到任何相关信息，这就是我在这里写的原因。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T13:40:08.140

MySQL 中没有包含时区的 DATE/TIME 列类型。这也不是真的必要，因为时间戳是一个时间戳，它是一个绝对时间点。仅当您想将时间戳格式化为本地时间时，时区才相关，但 MySQL 将日期存储为绝对时间点，而不考虑时区。

如果要存储包含时区信息的值，则必须将其存储为字符串。

但是，无论如何，更好的策略是：

*   将应用程序中的所有时间标准化为一个时区，UTC 是一个不错的选择
*   将标准化时间存储在数据库中
*   为他/她的首选时区存储用户偏好
*   从数据库中获取时间以显示时，将它们从 UTC 转换为用户所需的时区

这是处理此问题的典型方法。如果这对您的应用有意义，您还可以将时区存储在时间戳列旁边的另一列中：

```
`time_utc` (DATETIME) | `timezone` (VARCHAR)
----------------------+---------------------
2012-11-11 11:11:11   | Europe/Berlin 
```

这样，您可以在数据库中拥有统一的时间戳来进行计算/查询，同时能够在需要时以本地时间格式化它们。

# javascript - 我的 $.extend 在 javascript 中的函数内似乎不起作用

> ID：13330593
> 
> 赞同：0
> 
> 时间：2012-11-11T11:12:42.847
> 
> 标签：javascript, jquery

我有以下代码：

```
File 1:
$(document).ready(function () {
   addDataTableExts();
}

File 2:
function addDataTableExts() {
   $.extend($.fn.dataTableExt.oStdClasses, {
        sWrapper: 'no-margin last-child'
   }
} 
```

这似乎工作正常。我现在尝试用以下内容替换它：

```
File 2:
(function () {

    $.extend($.fn.dataTableExt.oStdClasses, {
        sWrapper: 'no-margin last-child'
    }
} 
```

这行不通。

如果我以第一种方式执行此操作，是否有某些原因似乎才有效？我认为通过更改文件 2 的第一行，它会导致代码在没有我调用的情况下被执行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T11:17:57.417

您将代码从在`ready`事件中运行更改为立即运行。您似乎在加载文件 2 后加载了数据表插件，因此当您尝试使用它时该插件还不存在。

如果你把它放回`ready`事件中，它应该可以工作：

```
File 2:
$(document).ready(function () {

  $.extend($.fn.dataTableExt.oStdClasses, {
    sWrapper: 'no-margin last-child'
  }

}); 
```

注意：jQuery 中的事件不是独占的，因此您可以`ready`在同一个页面中拥有多个事件处理程序而不会出现问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T11:29:36.940

> *“我认为通过更改文件 2 的第一行，它会导致代码在没有我调用的情况下被执行。”*

如果您实际上*只*更改了如图所示的第一行，那么您已经创建了一个语法错误 - 您添加了一个 opening`(`而没有 close `)`。但简单地添加关闭`)`不会导致现在匿名函数表达式被执行。如果您希望在不从文件 1 调用的情况下执行代码，则需要`()`在末尾添加额外的括号以实际调用该函数。

此外，您在结束`)`后缺少关闭，尽管这也是您的代码的第一个版本中的一个问题（也是文件 1 中的文档就绪处理程序的问题）。`}``$.extend(...`

```
(function () {
    $.extend($.fn.dataTableExt.oStdClasses, {
        sWrapper: 'no-margin last-child'
    });    // <-- add missing ); here
})();      // <-- add missing )(); here 
```

但是您根本不需要包含函数，除非它还包装了您未显示的其他代码，因为其上的 $.extend() 语句对全局范围没有任何有害影响。

最后，如果您确实需要`$.extend()`在页面准备好后运行它，但又不想在两个文件之间存在依赖关系，您可以直接在文件 2 中添加一个文档就绪处理程序。多个文档就绪处理程序都将被执行。

# awk - AWK - 根据“$1”删除相同的字段

> ID：13330595
> 
> 赞同：2
> 
> 时间：2012-11-11T11:12:49.097
> 
> 标签：awk

我有一个文件1：

```
6 
3 
6 
9 
2 
6 
```

此命令打印结果：

```
awk 'NR==1{a=$1};$0!=a' file1
3 
9 
2 
```

现在我有file2：

```
6 1 2 3 4 5 
3 3 4 4 4 6 
6 5 2 2 5 1 
9 1 3 5 4 1 
2 5 6 4 8 5 
6 1 5 2 3 1 
```

我想做同样的事情，但使用 file2。我想打印出结果：

```
3 3 4 4 5 6 
9 5 3 2 8 1 
2 5 6 5 3 1 
    5 4   1 
      2 
```

我想在awk中做到这一点。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T11:44:00.843

AWK 并不真正适合您尝试做的事情，因为它是为一次处理一行而设计的，而您正在尝试在不同行之间上下移动数字。也就是说，这个怪物应该做你想做的事：

```
awk 'NR==1{nc=NF;for(i=1;i<=nc;i++)a[i]=$i}{for(i=1;i<=nc;i++){if($i!=a[i]){v[m[i]++,i]=$i;if(m[i]>nl)nl=m[i]}}}END{for(l=0;l<nl;l++){for(i=1;i<=nc;i++){if(l<m[i]){printf("%d ", v[l,i])}else{printf("  ")}}printf("\n")}}' 
```

另一方面，如果您的数字矩阵已被转置，则此任务会简单得多：

```
awk '{for(i=2;i<=NF;i++)if($i!=$1)printf(" %d",$i);printf("\n")}' 
```

# ios - TWRequest 在 iOS 6.0 中已弃用 - 我可以改用什么？

> ID：13330596
> 
> 赞同：25
> 
> 时间：2012-11-11T11:12:53.657
> 
> 标签：ios, twrequest, social-framework

我正在为 iOS 应用程序开发 Twitter 提要视图。我找到了 TWRequest，它的工作方式与我正在寻找的完全一样。但是：我收到一条通知：“TWRequest 已弃用：iOS 6.0 中首次弃用”。我应该改用什么？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-11-11T11:14:57.737

在 iOS 6 上，您应该使用`Social.framework`. 这有一个名为`SLRequest`.

您几乎以与 deprecated 相同的方式使用它`TWRequest`，但您需要指定它是 twitter 请求而不是 facebook 请求。

从 iOS 6 开始，整个系统`Twitter.framework`就被弃用了，因为苹果在 iOS 6 中添加了 Facebook 和微博（中国社交网络），他们将所有社交类归为新的`Social.framework`.

请注意，您必须为 Twitter/Facebook 指定服务类型，例如：

```
SLRequest *aRequest  = [SLRequest requestForServiceType:SLServiceTypeTwitter
                                          requestMethod:SLRequestMethodPOST
                                                    URL:myurl
                                             parameters:myparams]; 
```

请务必查看[文档](http://developer.apple.com/library/ios/#documentation/Social/Reference/SLRequest_Class/Reference/Reference.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-12T12:35:01.380

**这是使用 Twitter api 将文本 + 图像上传到您的 Twitter 帐户的完整代码**

```
 UIImage *img = [UIImage imageNamed:@"twitterImage.png"];
    ACAccountStore *account = [[ACAccountStore alloc] init];
    ACAccountType *accountType = [account accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierTwitter];
    [account requestAccessToAccountsWithType:accountType withCompletionHandler:^(BOOL granted, NSError *error) {
        if (granted == YES) {
            // Populate array with all available Twitter accounts
            NSArray *arrayOfAccounts = [account accountsWithAccountType:accountType];
            if ([arrayOfAccounts count] > 0) {
                ACAccount *acct = [arrayOfAccounts objectAtIndex:0];
                NSDictionary *message = @{@"status": @"From my app"};
                NSURL *requestURL = [NSURL URLWithString:@"https://upload.twitter.com/1/statuses/update_with_media.json"];
                SLRequest *postRequest = [SLRequest
                                                  requestForServiceType:SLServiceTypeTwitter
                                                  requestMethod:SLRequestMethodPOST
                                                  URL:requestURL parameters:message];
                NSData *data = UIImagePNGRepresentation(img);
                [postRequest addMultipartData:data withName:@"media" type:@"image/png" filename:@"TestImage"];
                postRequest.account = acct;

                [postRequest performRequestWithHandler:
                     ^(NSData *responseData, NSHTTPURLResponse
                       *urlResponse, NSError *error)
                     {
                         if (error) {
                             NSLog(@"%@",error.description);
                         }
                         else {
                             NSLog(@"Upload Sucess !");
                         }
                     }];
            }
        }
    }]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-19T09:36:27.720

如果您计划通过 Twitter 集成 TwitterKit 以通过您的自定义 Twitter 应用程序执行推文，那么这可能会对您有所帮助。

[https://stackoverflow.com/a/28602749/1740354](https://stackoverflow.com/a/28602749/1740354)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-08T05:10:20.120

另一种选择是使用 Twitter API。你应该有 Twitter 框架。

然后执行以下代码：

```
NSString *statusesShowEndpoint = @"https://api.twitter.com/1.1/statuses/update.json";
NSDictionary *params = @{@"status": @"Hello, my first autopost tweet..."};

    NSError *clientError;
    NSURLRequest *request = [[[Twitter sharedInstance] APIClient]
                             URLRequestWithMethod:@"POST"
                             URL:statusesShowEndpoint
                             parameters:params
                             error:&clientError];

    if (request) {
        [[[Twitter sharedInstance] APIClient]
         sendTwitterRequest:request
         completion:^(NSURLResponse *response,
                      NSData  *data,
                      NSError *connectionError) {
             if (data) {
                 // handle the response data e.g.
                 NSError *jsonError;
                 NSDictionary *dicResponse = [NSJSONSerialization
                                               JSONObjectWithData:data
                                               options:0
                                               error:&jsonError];
                 NSLog(@"%@",[dicResponse description]);
             }
             else {
                 NSLog(@"Error code: %ld | Error description: %@", (long)[connectionError code], [connectionError localizedDescription]);
             }
         }];
    }
    else {
        NSLog(@"Error: %@", clientError);
    } 
```

# javascript - JavaScript：参数传递不适用于所有浏览器

> ID：13330599
> 
> 赞同：0
> 
> 时间：2012-11-11T11:13:28.470
> 
> 标签：javascript, function, arguments

我正在尝试将参数传递给一个函数，该函数在 Chrome 上运行良好，但不适用于所有版本的 Firefox。这是代码：

```
 $('input').focus(function()
  {
     alert(this.width);
   }); 
```

this.width 在某些版本的 FF 上似乎未定义。

请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T11:40:51.053

根据您的描述，问题似乎与将参数传递给函数无关，只是`this.width`在某些浏览器中未定义？我找不到`width`作为输入元素属性的文档，因此它不能始终如一地工作并不令我感到惊讶。

你试过[`this.offsetWidth`](https://developer.mozilla.org/en-US/docs/DOM/element.offsetWidth)吗？或者`this.style.width`？

或者鉴于您似乎正在使用 jQuery，您可能还会查看[`$(this).width()`](http://api.jquery.com/width/).

# java - 为空 json 字段设置默认值

> ID：13330600
> 
> 赞同：1
> 
> 时间：2012-11-11T11:13:39.300
> 
> 标签：java, android, json

我必须解析一个字段可以为空的json：

```
{"fullField":"ok","canBeEmpty":""} 
```

如果我尝试解析这个字符串，整体解析会失败，并显示“canBeEmpty 没有值”。对于我执行的每个 json 项目：

```
json_data.getString("field"); //throws exception if empty 
```

我想仍然保留解析，将 canBeEmpty 值设置为默认字符串...可以吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T11:36:21.717

您可以使用 [JSONObject.JSONObject(String name)](http://developer.android.com/reference/org/json/JSONObject.html#optString%28java.lang.String,%20java.lang.String%29)检查 json 对象中是否存在任何名称：

```
if(JSONObject.isNull("field")){
// do something here
}
else{
//do something here
} 
```

# jpa - 尽管数据库正确，但 JPA 查询有时会返回不完整的结果

> ID：13330602
> 
> 赞同：2
> 
> 时间：2012-11-11T11:14:00.343
> 
> 标签：jpa, eclipselink

我的网络服务出现了一些奇怪的行为。我将 jersey 用于 JAXRS，将 eclipselink 用于 JPA。我怀疑问题出在 JPA 的某个地方。简而言之，我有 2 个实体：历史和挑战。

```
@XmlRootElement
@Entity
public class History {

    @Column
    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    public long id;

    @JoinColumn
    @ManyToOne
    public Challenge challenge;

    public History() {
    }
}

@XmlRootElement
@Entity
public class Challenge {

    @Column
    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    public long id;

    @Column(length = 255)
    public String title;

    @Column(length = 1000)
    public String description;

    public Challenge() {
    }
} 
```

历史和挑战的所有条目都存在于数据库中并且不会更改。通常，当我查询所有历史记录时，我会取回所有条目，并且每个历史记录都附加一个挑战。但是，有时，一个或 2 个历史记录条目对于 Challenge 成员为空（尽管数据库处于完美状态）。如果我在 Tomcat 中重新加载应用程序，查询将再次正常运行。稍后，此错误再次出现。所以我猜这与我如何使用EntityManager有关。下面是查询所有历史的代码：

```
public List<History> getHistories() {
        EntityManager em = emFactory.createEntityManager();
        Query query = em.createQuery("SELECT h FROM History h");
        List<History> list = (List<History>) query.getResultList();
        em.close();

        return list;
    } 
```

正如我之前所说，历史和挑战不会改变。但是，我还有其他一些引用历史的实体，也许我正在其他地方做一些会在这里触发这个问题的事情。我应该在我的方法中调用 em.clear() 还是 em.flush() ？在我为每个请求创建实体管理器的情况下是否有必要？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T15:13:17.400

EclipseLink 默认启用共享缓存。

见， [http://wiki.eclipse.org/EclipseLink/FAQ/How_to_disable_the_shared_cache%3F](http://wiki.eclipse.org/EclipseLink/FAQ/How_to_disable_the_shared_cache%3F)

看来你已经以某种方式破坏了你的对象。也许您在创建对象时没有设置 ManyToOne。或者以某种方式在您的应用程序中将其设置为 null？

# scala - Scala 中的类型声明

> ID：13330604
> 
> 赞同：0
> 
> 时间：2012-11-11T11:14:24.030
> 
> 标签：scala, generics, types

我需要创建一个基本上是只包含时间戳的列表的类。下面是`TimeStamp`特征：

```
trait TimeStamp[T <: Comparable[T]] extends Comparable[TimeStamp[T]]
{
def getTimeStamp:T;
def compareTo(to:TimeStamp[T]) =this.getTimeStamp.compareTo(to.getTimeStamp) 
} 
```

`TimeStamp`是可比的。并且`getTimeStamp`返回类型也是可比的。它可以是`Long`或`Date`例如。上述特征的示例实现是：

```
class FileTimeStamp(file:File) extends TimeStamp[Date] 
{
  val time:Long = file.lastModified();
  val date:Date = new Date(time);
  override def getTimeStamp:Date = date;
  def getFile:File = file;
} 
```

现在的问题是我想要一个`TimeList`没有参数的类。它只能`TimeStamps`添加到列表中。

```
class TimeList[T] extends ArrayList[TimeStamp[????]] 
```

我的上面应该是什么`????`。理想情况下，我想要类似`[T <: Comparable[T]]`. 即a `Long`or`Date`或任何`TimeStamp`类型。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T14:22:58.240

```
class TimeList[T <: Comparable[T]] extends ArrayList[TimeStamp[T]] 
```

编辑：鉴于您的评论，您可以这样做

```
class TimeList[T <: TimeStamp[_]] extends ArrayList[T] 
```

但这种类型将更难使用。

# r - 大于和小于的意外行为

> ID：13330605
> 
> 赞同：-2
> 
> 时间：2012-11-11T11:14:54.290
> 
> 标签：r, comparison

> **可能重复：**
> [为什么这些数字不相等？](https://stackoverflow.com/questions/9508518/why-are-these-numbers-not-equal)

谁能向我解释一下，为什么 R`FALSE`在以下情况下会回答？

```
(1-0.9)>=0.1 
```

我怎样才能得到`TRUE`这种比较？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-11T11:17:51.803

这是经典的[R FAQ 7.31](http://cran.r-project.org/doc/FAQ/R-FAQ.html#Why-doesn_0027t-R-think-these-numbers-are-equal_003f)。你需要`all.equal`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-11T11:22:46.490

这与浮点精度有关。本质上存在无限数量的浮点，在计算机中表示它们只能离散地完成，因此精度有限。要考虑这种有限的精度，请使用`all.equal`进行比较。正如@RomainFrcois 所说，这是 R 中非常常见的问题。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-11T14:01:17.957

您可以创建自己的二元运算符来完成您的工作并将它们存储在您的 .Rprofile 中：

```
`%>=%` <- function(x, y) all.equal(x, y) | x > y
`%<=%` <- function(x, y) all.equal(x, y) | x < y

c(1-.9)>=.1
c(1-.9)%>=% .1 
```

# objective-c - iOS 让我的应用程序不断在后台运行

> ID：13330608
> 
> 赞同：1
> 
> 时间：2012-11-11T11:15:29.870
> 
> 标签：objective-c, ios

我需要能够做以下几件事：

1.  在手机启动时运行我的应用程序
2.  让它一直在后台运行
3.  不需要用户界面 - 这是一个统计应用程序，因此它将收集它需要的所有数据，用户不应该被任何事情打扰。

这些事情可能吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-11T11:17:07.113

并不真地。撇开越狱和未经 Apple 批准的事物不谈，iOS 明确禁止在后台全职运行。同样，您不能在 App Store 上销售没有用户界面的应用，也不能将应用设置为在启动时运行。

# mysql - 依赖 MySQL 特性 vs 我的脚本

> ID：13330611
> 
> 赞同：0
> 
> 时间：2012-11-11T11:15:48.173
> 
> 标签：mysql

对于我需要做的大多数流程，我一直依赖我的 PHP 编程，我知道这可以通过 MySQL 查询或功能来完成。例如：

我知道 MySQL 有一个 FOREIGN KEY 功能，可以帮助维护数据完整性，但我不依赖 MySQL。我不妨让我的脚本这样做，因为它更灵活；我基本上使用 MySQL 作为存储和我的脚本作为处理器。

我想保持这种方式，把大部分的负担放在我的编码上。我确保我的脚本在每次进行更改时都可以检查冲突、孤立行等，我什至有一个 SYSTEM CHECK 例程来运行所有这些数据验证过程，所以我真的尝试在脚本方面做所有事情因为它不会显着影响整个事情的性能（因为我知道 MySQL 可以在内部更快地做事情，我的意思是我当然使用 MySQL COUNT() 函数）。

当然，对表进行的任何直接更改都不会触发我脚本中的例程。但那是另一回事。我对这样做很满意，并且我计划继续这样做，直到我确信不是这样。

我现在唯一真正遇到的问题是检查重复项。

我目前的例程基本上是插入带有序列号的产品。我需要确保没有重复的序列号输入数据库。

我可以简单地依靠 MySQL UNIQUE 约束来确保这一点，或者我可以在脚本端执行它，这就是我所做的。

该产品例程是一个 BATCH 例程，其中在一次调用脚本时将 1 到 500 个产品输入数据库。

显然，我检查提交的数据中的重复条目以及数据库中的数据。这是我日常工作的一部分

```
 for ($i = 1; $i <= $qty; $i++) {
    //
    $serial = $serials_array[$i - 1]; // -1 coz arrays start at zero

    //check duplicates in submitted data ++++++++++++++++++++++++++
    if($serial_check[$serial] == 1) { // duplicate found!
            exit("stat=err&statMsg=Duplicate serial found in your entry! ($serial)");
    }else{
        $serial_check[$serial] = 1;
    }

    //check duplicates in database
    if(db_checkRow("inventory_stocks", "WHERE serial='$serial'"))exit("stat=err&statMsg=Serial Number is already used. ($serial)");
    //++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

} 
```

好的，基本上它是：

1）通过创建一个数组来检查提交的数据是否有重复项，我可以检查每个提交的序列号 - 这没问题，而且 PHP 速度非常快，甚至多达 1000 条记录。

2）但是，要检查数据库是否有重复，我必须调用我创建的函数（db_checkRow），w/c 基本上在每个提交的序列上发出一个 SELECT 语句，看看是否有命中/重复。

因此，基本上，检查重复项的 500 条 SELECT 语句与 MySQL 唯一约束功能相比。

真的很重要吗？？

我设计这样的软件的另一个原因是，至少如果我需要在不同的数据库上部署我的东西，我不会过多地依赖数据库功能，因此我可以轻松地移植我的应用程序而只需很少的调整。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T12:16:20.820

几乎可以保证 MySQL 在检查重复项时会更快。除非你在一些超级机器上运行你的 PHP 并且 MySQL 在一个旧手表上运行，否则索引检查将比你可以通过 PHP 做的任何事情更快和更好地优化。

更不用说在其他人（或其他应用程序）开始写入数据库之前您的过程很好。您可以省去一开始就编写重复检查代码的麻烦——然后在下一个应用程序中再次编写——依此类推。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T12:49:45.287

# jquery - JQuery选择所有div来重置背景颜色

> ID：13330612
> 
> 赞同：0
> 
> 时间：2012-11-11T11:15:51.043
> 
> 标签：jquery, jquery-selectors

我有一个名为 time_holder 的动态生成的 div，它的出现次数取决于从数据库返回的行数。

单击其中一个 div 时，我希望背景更改颜色，而所有其他 time_holder div 保留或更改回原始颜色。我虽然一个简单的重置就可以完成这项工作，但这似乎不起作用：

```
$(document).on('click', '.time_holder', function(){
$('.time_holder').css('background-color', '#EODEF3');
$(this).css('background-color', '#ccc');
}); 
```

我期待第一行将所有 timeholder div 重置为原始颜色，然后第二行更改单击 div 的背景。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T11:17:52.417

`addClass`不是为了添加属性。使用[`.css()`](http://api.jquery.com/category/manipulation/style-properties/). 这是[代码](http://jsfiddle.net/dandv/nFn43/)，简化了一点事件绑定：

```
$('.time_holder').on('click', function() {
    $('.time_holder').css('background-color', 'red');
    $(this).css('background-color', 'blue');
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T11:34:44.320

我已经使用此代码使其正常工作：-

```
$(document).on('click', '.time_holder', function(){
$('.time_holder').removeClass('link_bg').addClass('normal_bg');
$(this).addClass('link_bg');
}); 
```

但不明白为什么原来没有发生......

# xml - 更新我的 Oracle 数据库行中的 XML 标记

> ID：13330615
> 
> 赞同：1
> 
> 时间：2012-11-11T11:16:33.433
> 
> 标签：xml, oracle

我想创建一个触发器，它更新我的 xml 文件中的单个节点。我有一个有 2 行的表，其中一个是条目的 id，另一个是 xml 类型

```
drop table product_information_xml;
create table product_information_xml(
information_id Number(6,0),
products XMLType); 
```

所以，现在一个条目看起来像这样

```
"INFORMATION_ID"    "PRODUCTS"
5                  <products>
                       <product_id>1</product_id>
                       <product_name>samsung galaxy note</product_name>
                       <product_description>mobile phone</product_description>
                       <category_id>11</category_id>
                       <weight_class>2</weight_class>
                       <warranty_period>+000000000-06</warranty_period>
                       <supplier_id>102069</supplier_id>
                       <product_status>orderable</product_status>
                  <list_price>500</list_price>
                  <min_price>400</min_price>
                  <catalog_url>www.samsung.de</catalog_url>
              </products> 
```

所以现在我有另一个不是 xml 的表。并将所有 XML 标记作为单列。所以列是`product_id`，`product_description`等等。

当我更新时`product_id`如何更新`<product_id>`xml 表中的 xml 节点？有人可以帮忙吗？

我所知道的是我从

```
Create or replace trigger delete_xml
after update on product_information
for each row
begin
update ?????
end; 
```

现在我被困住了。我很想寻求帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T11:55:45.807

正确，所以触发器中的语句将是这样的：

如果 product_id 不可为空：

```
update product_information_xml
     set products = updatexml(products, '/products/product_id/text()', :new.product_id)
   where information_id = :new.information_id; 
```

如果是，请使用更长的方式（因为 updatexml 无法从 NULL 变为非 NULL：

```
update product_information_xml
     set products = insertxmlbefore(deletexml(products, '/products/product_id'), 
                         '/products/product_name', 
                        xmltype('<product_id>' || :new.product_id|| '</product_id>'))
   where information_id = :new.information_id; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T12:30:13.320

如果您不知道要更新哪个节点，也许更新整个 XMLTYPE 会更容易-

```
update product_information_xml
   set products = xmltype('<products><product_id>'||:new.product_id||'</product_id>'||
                   '<product_name>'|| :new.product_name||'</product_name>'||
                   '<product_description>'|| :new.product_description||'</product_description>'||
                   '<category_id>'|| :new.category_id||'</category_id>'||
                   '<weight_class>'|| :new.weight_class||'</weight_class>'||
                   '<warranty_period>'|| :new.warranty_period||'</warranty_period>'||
                   '<supplier_id>'|| :new.supplier_id||'</supplier_id>'||
                   '<product_status>'|| :new.product_status||'</product_status>'||
                   '<list_price>'|| :new.list_price||'</list_price>'||
                   '<min_price>'|| :new.min_price||'</min_price>'||
                   '<catalog_url>'|| :new.catalog_url||'</catalog_url></products>')
 where information_id = :new.information_id; 
```

# jquery - 带有自定义回调函数的 jQuery 函数

> ID：13330616
> 
> 赞同：0
> 
> 时间：2012-11-11T11:16:34.190
> 
> 标签：jquery, jquery-plugins

有许多 jQuery 函数，可以与一些回调一起用作参数。例如：

```
$('#id').draggable({
  create: function( event, ui ) {
    // triggered when the draggable is created
  },
  start: function( event, ui ) {
    // triggered when dragging starts
  }
  ...
}); 
```

有人可以解释一下，如何正确创建这样的功能吗？以及如何自己“创造”或“开始”这样的事件？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T11:38:15.737

这些函数由普通变量表示。
在纯 JavaScript 中，这看起来像这样：

```
function test(aFunction){
    if ( typeof aFunction == "undefined" ) return null;
    if ( typeof aFunction == "function" ) aFunction();
}

test(function(){ alert("Hello!"); }); 
```

这将导致显示“你好！”的警报。在 JSON-Object ({}) 中，您只需遍历其中的所有元素。

```
function test(someObject){
    if ( typeof someObject != "object" ) return null;
    for ( var i in someObject )
        if ( someObject.hasOwnProperty(i) && typeof someObject[i] == "function") someObject[i]();
}

test({
    a: function() { alert("Hi!"); },
    b: function() { alert("Hello."); } 
}); 
```

此示例将产生两个警报，一个显示“Hi!”，另一个显示“Hello.”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T11:19:34.893

您可以使用匿名函数（如示例）或传递存储在对象/变量中的函数。这取决于您是否需要多次使用此类回调。

```
$('#id').draggable({
  create: function( event, ui ) {
    // triggered when the draggable is created
  },
  stop: function (event, ui) {
      controller.stop(event.element);
  }
  start: scope.functionName
  ...
}); 
```

至于我，我更喜欢创建接口，并且我使用匿名函数来委托执行以使用所需的参数来更正 API 调用。有时开销很小，但允许创建统一接口而不考虑如何在事件回调的范围内实现它们。

# sql - SQL Server 插入触发器不起作用

> ID：13330619
> 
> 赞同：0
> 
> 时间：2012-11-11T11:17:04.587
> 
> 标签：sql, sql-server, triggers, insert

这是我第一次使用触发器。

我的触发器没有被触发，请帮忙。

```
CREATE TRIGGER sbhack_autoban
ON LOG_CONNECT201211
FOR INSERT
AS
  BEGIN
      /* query to run if single or multiple data is 
       inserted into LOG_CONNECT201211 table */
      UPDATE login.dbo.USER_CHECK_LOGIN
      SET    login.dbo.USER_CHECK_LOGIN.CHECKLOGIN = 2
      WHERE  login.dbo.USER_CHECK_LOGIN.USER_KEY IN 
              (SELECT e.USER_KEY
                 FROM   game.dbo.CHAR_DATA0 AS e
                        INNER JOIN gamelogs.dbo.LOG_USING_DEPOT201211 AS p
                          ON e.CHAR_KEY = p.CHAR_KEY
                 WHERE  p.GATENUM = 150)
             AND login.dbo.USER_CHECK_LOGIN.CHECKLOGIN = 0
             AND login.dbo.USER_CHECK_LOGIN.USER_KEY != 51;
  END 
```

假设在表中插入条目时在 BEGIN : END 中运行查询`LOG_CONNECT201211`。但即使我将多个数据插入`LOG_CONNECT201211`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T11:39:41.527

当您的`INSERT`触发器触发时 - 至少插入**了一个新行！**这是事实。

现在的问题是：假设已经插入了一个或多个新行 -**你**想用这些知识做什么？

通常，您可以例如将列设置为您无法指定为默认约束的值 - 或者您可以插入该行已插入审计表或其他内容的事实......

所以你会有这样的事情：

```
CREATE TRIGGER sbhack_autoban
ON LOG_CONNECT201211
FOR INSERT
AS
    INSERT INTO LogAudit(InsertedDate, UserKey)
        SELECT 
             GETDATE(), i.User_Key
        FROM
             Inserted i 
```

或类似的东西....

**更新：**好的，所以你想`UPDATE`在插入行时运行该语句 - 不是 100% 清楚，你想使用插入行中的哪些列/值 - 看起来`e.UserKey`只是列 - 对吗？

那么`UPDATE`将是：

```
UPDATE login.dbo.USER_CHECK_LOGIN
SET login.dbo.USER_CHECK_LOGIN.CHECKLOGIN = 2
WHERE  
   login.dbo.USER_CHECK_LOGIN.USER_KEY IN 
          (SELECT USER_KEY FROM Inserted)
   AND login.dbo.USER_CHECK_LOGIN.CHECKLOGIN = 0
   AND login.dbo.USER_CHECK_LOGIN.USER_KEY != 51; 
```

**更新#2：**

我仍然**不明白**的一点是：当某些行被插入到一个完全独立的、不相关的表中时，为什么要运行使用`USER_CHECK_LOGIN`,`CHAR_DATA0`和表的更新？`LOG_USING_DEPOT201211``LOG_CONNECT201211`

当您想要做某事时使用触发器，**因为行已插入**该表 - 但在这种情况下，您通常希望对已插入**的行及其值执行某些操作......**

我只是看不到*插入`LOG_CONNECT201211`*事件的行与您随后从中查询和更新的表之间有任何联系。链接在哪里？？***为什么***在插入数据时需要运行 * *this`UPDATE`*`LOG_CONNECT201211`？如果将数据插入其中*涉及的其中一个表中，这将是有意义的`UPDATE`*- 但就像这样，它完全没有任何意义......

# api - 我如何跳过用户在 Box api 中输入他的详细信息

> ID：13330623
> 
> 赞同：0
> 
> 时间：2012-11-11T11:17:16.147
> 
> 标签：api, box-api

我想将 Box cloud 集成到我的软件中。它是桌面应用程序。用户可以从他的 Box 帐户上传或下载数据。我已经浏览了 Box 的 API 文档。

我的应用程序具有 Box 登录凭据，即 Box 用户 ID 和密码。但是当我浏览文档时，我发现在第 3 步（[http://developers.box.com/get-started/](http://developers.box.com/get-started/)）用户必须输入他的盒子凭据，我不想要它，因为我有它。

那么有什么方法可以让我使用盒子凭据而不是通过授权过程来访问盒子帐户？

请帮帮我。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T15:42:01.100

我使用的过程是将您从登录网页获得的令牌写入文件，然后在每次需要时检索它。我将它与用户名一起存储，该用户名也是从用户登录后获取令牌的站点返回的（'https://www.box.com/api/1.0/rest?action=get_auth_token&api_key= blah blah blah '）。令牌似乎根本没有过期，但您可以自己定期过期并让用户登录网站。如果有必要，您还可以在机器级别授权用户，这样她就不会获取其他人的令牌。

麦克风

# javascript - 如何使用 javascript 更改外部样式表中的背景图像？

> ID：13330629
> 
> 赞同：3
> 
> 时间：2012-11-11T11:17:57.510
> 
> 标签：javascript

我想从外部样式表更改背景图像。

例如在外部样式表背景图像是：

```
#nav
  {
   background-image:url(../images/nav.png);
  } 
```

现在我想在运行时通过 javascript 更改它，例如：

```
#nav
  {
   background-image:url(../images/newImg.png);
  } 
```

我可以使用以下 javascript 代码成功更改此图像：

```
 eval('theRule.style.backgroundImage="../images/newImg.png"'); 
```

* * *

但问题是：结果看起来像这样：

```
#nav
  {
   background-image:url(http//localhost/project/images/newImg.png);
  } 
```

我不需要**http//localhost/project/**等...

我只需要**../images/newImg.png**

我努力解决这个问题，但我还没有找到任何解决方案。

所以请指导我如何解决这个问题？

感谢您阅读我的问题

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T13:31:21.783

尝试。

```
rule.style.setProperty("background-image", "../images/newImg.png", "");
rule.style.cssText = rule.style.cssText.replace("../images/nav.png", "../images/newImg.png"); //Replace all images 
```

但如果没有帮助，那么就不要找到简单的方法。

# eclipse - 在我的程序中使用 OpenGL 时生成错误

> ID：13330634
> 
> 赞同：0
> 
> 时间：2012-11-11T11:18:50.503
> 
> 标签：eclipse, opengl, ubuntu

我正在使用以下代码（我在网上找到）来创建一个基本的 OpenGL 程序：

```
#include <GL/gl.h>
#include <GL/glu.h>
#include <GL/glut.h>

#define window_width  640
#define window_height 480

// Main loop
void main_loop_function()
{
    // Z angle
    static float angle;

    // Clear color (screen)
    // And depth (used internally to block obstructed objects)
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
    .
    .
    .
}
.
.
. 
```

我正在使用 Ubuntu 12.04 和 Eclipse 3.7.2。该程序编译并实际运行，但奇怪的是我的代码中出现了一个错误。这

```
glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT); 
```

行有错误：

> 此行有多个标记 - 无效参数“候选者是：void glClear(unsigned int)” - 无法解析符号“GL_COLOR_BUFFER_BIT” - 无法解析符号“GL_DEPTH_BUFFER_BIT”

到目前为止，我所做的一切都没有从 IDE 中删除这个错误。欢迎任何帮助。

注意，如果我将线路更改为

```
glClear(GL_COLOR_BUFFER_BIT); 
```

或者

```
glClear(GL_DEPTH_BUFFER_BIT); 
```

然后错误消失...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-05T11:57:30.547

我通过激活“Preferences -> C/C++ -> Indexer -> Use active build configuration”然后重建项目解决了这个问题。它现在找到了符号。

# mobile - 移动设备分辨率和浏览器视口大小

> ID：13330640
> 
> 赞同：0
> 
> 时间：2012-11-11T11:19:33.240
> 
> 标签：mobile, media-queries, screen-resolution

我得到了分辨率为 720x1280 的银河系。但是当我调用 $(window).width() 它只返回 360px。无论如何要在其他设备上计算 $(window).width() 的值吗？例如，galaxy s 480x800？我的媒体查询需要这些值：

```
@media only screen and (min-width: 360px){
    body{
        font-size: 62.5%;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T18:55:54.647

我不知道你是否会喜欢我的回答.. 但是就这样吧。

忘记宽度（至少是固定宽度），让您的网站与设备无关。不要将断点基于流行的设备分辨率，而是基于您的内容。继续拉伸那个浏览器窗口，直到你感觉到“这看起来不对”——这是你的下一个断点。

尽可能保持流畅并依赖相关单位——即使是媒体查询声明。

我建议阅读 Chris Armstrong 的这篇文章：[http](http://www.alistapart.com/articles/the-infinite-grid/) ://www.alistapart.com/articles/the-infinite-grid/ （虽然 ALA 似乎暂时离线）

如果我错过了问题的重点，请投反对票，但我很确定这就是你要找的。

# php - 使用 foreach 循环遍历 PHP 数组

> ID：13330644
> 
> 赞同：-1
> 
> 时间：2012-11-11T11:20:02.480
> 
> 标签：php, arrays

我想问的问题只是出于我的好奇心。为什么这段代码不起作用：

```
$table = [
    'key1'  => 'value1',
    'key2'  => 'value2',
];

foreach($table as $tb)
{
    $tb = strtoupper($tb);
}

print_r($table); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T11:25:41.287

我相信你期望值变成大写..在这种情况下你需要`&`在 foreach..

```
$table = [
    'key1'  => 'value1',
    'key2'  => 'value2',
];

foreach($table as &$tb)
{
    $tb = strtoupper($tb);
}

print_r($table); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T11:30:00.310

您可以使用`array_map`

```
$table = [
    'key1'  => 'value1',
    'key2'  => 'value2',
];

$table = array_map("strtoupper", $table);
print_r($table); 
```

如果您还将键更改为大写，请使用`array_change_key_case`

```
 print_r(array_change_key_case($table, CASE_UPPER)); 
```

# c++ - OpenGL：如何设置渲染器以不显示阴影、灯光和颜色阴影？

> ID：13330650
> 
> 赞同：1
> 
> 时间：2012-11-11T11:21:01.167
> 
> 标签：c++, c, opengl, rendering, render

所以我需要的很简单：如果对象颜色是 (255, 10, 10)，那么它的每个可见点都应该呈现为 (255, 10, 10)。没有灯光，没有阴影，没有阴影，没有反射/折射，也没有透明度。我只想为它们提供顶点网格和颜色并查看它们的渲染。这样的事情可以用 OpenGL 实现吗（在渲染器设置级别 - 不是通过后期/预着色）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T11:25:28.160

您需要禁用照明：

```
glDisable(GL_LIGHTING); 
```

# java - 在没有 setVisible 的情况下重新加载表单 JFrame

> ID：13330651
> 
> 赞同：0
> 
> 时间：2012-11-11T11:21:23.497
> 
> 标签：java, swing, netbeans, jframe

如何重新加载一个表单`JFrame`？我有两种形式，`form1`并且`form2`：

1.  `form1`使用链接`form2`：

    ```
    new form2().show(); 
    this.setVisible(false); 
    ```

2.  `form2`链接`form1`是成功的

3.  问题是`form1` `form2`没有显示现有数据的链接。

我想问除了方法还有其他方法`setVisible()`吗，因为它似乎只是隐藏它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T13:06:58.287

您可以使用[`CardLayout`](http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html)在表单之间进行切换。此[示例](https://stackoverflow.com/a/5655843/230513)使用按钮导航；此[示例](https://stackoverflow.com/a/6432291/230513)使用组合导航。您可以根据表单上填写的内容设置导航条件。

附录：*和电脑重启一样，* `jframe` *退出再重新打开。*

虽然`CardLayout`更加灵活，*但*您始终可以清空`Container`，添加所需的组件并调用，如此[处](https://stackoverflow.com/a/5812981/230513)`validate()/repaint()`所示。

# android - SimpleCursorAdapter 如何显示图像？

> ID：13330654
> 
> 赞同：2
> 
> 时间：2012-11-11T11:21:54.963
> 
> 标签：android, imageview, simplecursoradapter, android-cursoradapter

我正在制作一个使用数据库的 android 食谱应用程序。在数据库中有一个名为“图像”的列，我在其中存储了我存储在可绘制文件夹中的食谱图片**文件的名称**。现在我想用食谱制作一个列表，显示：1）标题配方的 2) 简短描述和 3) 配方的**图像**为此，我使用 Simplecursoradaptor。

**我的问题是我无法显示图像。**

我想从“图像”列中读取文件名，然后在我的图像视图（R.id.imageview1）中设置图像

到目前为止，这是我的代码：

```
public class RecipesMainActivity extends Activity 
{

public static final String ROW_ID = "row_id"; //Intent extra key
private ListView esodaListView;  // the ListActivity's ListView
private SimpleCursorAdapter esodaAdapter; // adapter for ListView
DatabaseConnector databaseConnector = new DatabaseConnector(RecipesMainActivity.this);

// called when the activity is first created
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_recipes_main);
    esodaListView = (ListView)findViewById(R.id.esodaList);
    esodaListView.setOnItemClickListener(viewEsodaListener);

    databaseConnector.open();

    // map each esoda to a TextView in the ListView layout
    // The desired columns to be bound
    String[] from = new String[] {"title","ingredients","image"}; // built an String array named "from"
    //The XML defined views which the data will be bound to
    int[] to = new int[] { R.id.esodaTextView, R.id.amountTextView, R.id.imageView1}; // built an int array named "to"
    // EsodaMainActivity.this = The context in which the ListView is running
    // R.layout.esoda_list_item = Id of the layout that is used to display each item in ListView
    // null = 
    // from = String array containing the column names to display
    // to = Int array containing the column names to display
    esodaAdapter = new SimpleCursorAdapter (this, R.layout.recipe_list_item, null, from, to);
    esodaListView.setAdapter(esodaAdapter); // set esodaView's adapter
} // end of onCreate method

@Override
protected void onResume()
{
    super.onResume(); // call super's onResume method

    // create new GetEsodaTask and execute it
    // GetEsodaTask is an AsyncTask object
    new GetEsodaTask().execute((Object[]) null);
} // end of onResume method

// onStop method is executed when the Activity is no longer visible to the user
@Override
protected void onStop()
{
    Cursor cursor= esodaAdapter.getCursor(); // gets current cursor from esodaAdapter

    if (cursor != null) 
        cursor.deactivate(); // deactivate cursor

    esodaAdapter.changeCursor(null); // adapter now has no cursor (removes the cursor from the CursorAdapter)
    super.onStop();
} // end of onStop method

// this class performs db query outside the GUI
private class GetEsodaTask extends AsyncTask<Object, Object, Cursor>
{
    // we create a new DatabaseConnector obj
    // EsodaMainActivity.this = Context
    DatabaseConnector databaseConnector = new DatabaseConnector(RecipesMainActivity.this);

    // perform the db access
    @Override
    protected Cursor doInBackground(Object... params)
    {
        databaseConnector.open();

        // get a cursor containing call esoda
        return databaseConnector.getAllEsoda(); 
        // the cursor returned by getAllContacts() is passed to method onPostExecute()
    } // end of doInBackground method

    // here we use the cursor returned from the doInBackground() method
    @Override
    protected void onPostExecute(Cursor result)
    {
        esodaAdapter.changeCursor(result); // set the adapter's Cursor
        databaseConnector.close();
    } // end of onPostExecute() method
} // end of GetEsodaTask class 
```

我在网上搜索了很多，但我找不到可以帮助我的东西。

**我是否可以使用 simplecursoradaptor 在 imageview 上设置图像？**

我必须制作自定义光标适配器吗？如果我必须定制一个，我该怎么做？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-11T11:32:42.200

您需要设置`ViewBinder`适配器以将图像设置为`ImageView`从数据库接收到的值。

```
 esodaAdapter.setViewBinder(new SimpleCursorAdapter.ViewBinder() {
                 @Override
                 public boolean setViewValue (View view, Cursor cursor, int columnIndex){
                     if (view.getId() == R.id.imageView1) {
                         ImageView IV=(ImageView) view;
                         int resID = getApplicationContext().getResources().getIdentifier(cursor.getString(columnIndex), "drawable",  getApplicationContext().getPackageName());
                         IV.setImageDrawable(getApplicationContext().getResources().getDrawable(resID));
                         return true;
                    }
                     return false;
         } 
```

# php - 带有实例或自定义回调函数的 PHP array_diff？

> ID：13330661
> 
> 赞同：0
> 
> 时间：2012-11-11T11:23:04.930
> 
> 标签：php, arrays, multidimensional-array

我有很多数组，每个数组都包含`Product`. 只需要获得独特的产品。来自 PHP 文档[`array_diff`](http://www.php.net/manual/en/function.array-diff.php)：

```
array array_diff ( array $array1 , array $array2 [, array $... ] ) 
```

> 当且仅当 (string) $elem1 === (string) $elem2 时，才认为两个元素相等。换句话说：当字符串表示相同时。

这是否意味着我被迫`toString()`在我的实例中实施？是否有任何函数可以计算提供自定义回调的差异？

我没有测试这段代码，但我猜它不会工作，因为没有`toString()`函数`Product`：

```
$categories = array();
// ...

// Unique products from all categories, compared against ===
$uniqueProducts = array();

// Compute unique products
foreach($categories as $category) {
    $uniqueProducts += array_diff($category->getProducts(), $uniqueProducts)
}

return $uniqueProducts; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T11:29:55.313

> 这是否意味着我不得不在我的实例中实现 toString() ？

根据 PHP 文档手册中的[typecast 部分](http://us3.php.net/manual/en/language.types.string.php#language.types.string.casting)- 您不需要`toString()`函数。基本上类型转换（字符串）就像你只是做了一样`var_dump($uniqueProducts)`

array_diff 所做的就是对数组进行类型转换。

一种选择是制作自己的“array_diff”函数

```
function my_array_diff($arraya, $arrayb)
{
    foreach ($arraya as $keya => $valuea)
    {
        // Put your own 'test' here - but for example this uses in_array()
        if (in_array($valuea, $arrayb))
        {
            unset($arraya[$keya]);
        }
    }
    return $arraya;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T11:29:42.833

如果产品列表很短，您可以根据您选择的值实施您自己的检查吗？

```
$uniqueProducts = array();
foreach($productsOne as $productOne) {
  foreach($uniqueProducts as $alreadyListed) {
    if($productOne->getName() != $alreadyListes->getName()) { // You can customise this line to make more specific
      break;
    }
    $uniqueProducts = $productOne; // If product hasn't already been added to the array then it's unique.
  }
}
// Repeat foreaches for second product array, or combine them before teh foreach using $productOne = $productOne+$productTwo. 
```

# sql-server - SQL Server：当前命令出现严重错误。结果，如果有的话，应该被丢弃

> ID：13330664
> 
> 赞同：1
> 
> 时间：2012-11-11T11:23:46.130
> 
> 标签：sql-server, sql-server-2008, sql-server-2005, sql-server-2008-r2

我在存储过程中有以下 SQL Server 查询，并且正在从 Windows 应用程序运行此服务。我正在用 3000 万条记录填充临时表变量，然后将它们与前几天的记录进行比较`tbl_ref_test_main`以添加和删除不同的记录。插入和删除有一个触发器`tbl_ref_test_main`。触发器在另一个表中写入相同的记录。由于 3000 万条记录的比较，它需要很长时间才能产生结果并抛出错误说`A severe error occurred on the current command. The results, if any, should be discarded.`

请有任何建议。

提前致谢。

```
-- Declare table variable to store the records from CRM database
DECLARE @recordsToUpload TABLE(ClassId NVARCHAR(100), Test_OrdID NVARCHAR(100),Test_RefId NVARCHAR(100),RefCode NVARCHAR(100));

-- Populate the temp table
INSERT INTO @recordsToUpload
SELECT 
class.classid AS ClassId,
class.Test_OrdID AS Test_OrdID ,    
CAST(ref.test_RefId AS VARCHAR(100)) AS Test_RefId, 
ref.ecr_RefCode AS RefCode                  
FROM  Dev_MSCRM.dbo.Class AS class 
LEFT JOIN Dev_MSCRM.dbo.test_ref_class refClass ON refClass.classid = class.classid
LEFT JOIN Dev_MSCRM.dbo.test_ref ref ON refClass.test_RefId = ref.test_RefId
WHERE class.StateCode = 0
AND (ref.ecr_RefCode IS NULL OR (ref.statecode = 0 AND LEN(ref.ecr_RefCode )<= 18 ))                      
AND LEN(class.Test_OrdID )= 12
AND ((ref.ecr_RefCode IS NULL AND ref.test_RefId IS NULL) 
OR (ref.ecr_RefCode IS NOT NULL AND ref.test_RefId IS NOT NULL));                       

-- Insert new records to Main table
INSERT INTO dbo.tbl_ref_test_main
Select * from @recordsToUpload 
EXCEPT 
SELECT * FROM dbo.tbl_ref_test_main;

-- Delete records from main table where similar records does not exist in temp table
DELETE P FROM dbo.tbl_ref_test_main AS P
WHERE EXISTS
(SELECT P.* 
EXCEPT
SELECT * FROM @recordsToUpload);

-- Select and return the records to upload
SELECT Test_OrdID,
CASE 
WHEN RefCode IS NULL THEN 'NA' 
ELSE RefCode 
END,
Operation AS 'Operation' 
FROM tbl_daily_upload_records 
ORDER BY Test_OrdID, Operation, RefCode; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T10:13:25.730

我的建议是 3000 万行对于表变量来说太大了，尝试创建一个临时表，用数据填充它，然后在那里执行分析。如果这不可能/不合适，那么也许创建一个永久表并在使用之间截断它。

# javascript - 如何使用打字稿定义一个对象以具有不同的字段？

> ID：13330667
> 
> 赞同：1
> 
> 时间：2012-11-11T11:24:16.897
> 
> 标签：javascript, typescript

我有以下功能：

```
function getAdminParams(entity) {
   params = {};
   params = {
                pk: "0006000",
                param: "?pk=0006000",
                table: "Content",
                success: true
            };
  return params;
} 
```

在另一个文件中，我像这样使用这个函数：

```
params = getAdminParams(entity);
    if (params.success) { 
```

有没有办法可以使用智能感知，以便 params 对象显示为具有“成功”参数？我看到 Typescript 有类和接口，但我不确定如何或是否可以将它们用作返回类型。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T11:34:43.553

如果将 params 定义为接口，则可以在函数括号后使用冒号将其声明为`getAdminParams()`. 像这样：

```
interface IParams {
    success: bool;
    pk: string;
    // etc...
}

function getAdminParams(entity): IParams {
    params = {
                pk: "0006000",
                success: true
                // etc...
            };
    return params; // If the properties assigned do not fulfill the IParams interface, this will be marked as an error.
}

params = getAdminParams(entity);
if (params. // Intellisense should offer success and pk and any other properties of IParams). 
```

您可以在其中`getAdminParams`显式声明`params`为 new `IParams`，但即使您不这样做，类型推断也会为您设置智能感知，只要您分配给`params`对象的属性满足`IParams`接口中指定的合同即可。

当然，您的返回类型可以是类、字符串或任何其他类型，您可以使用`function f(): returnType`相同的语法声明它。

[语言规范详细](http://go.microsoft.com/fwlink/?LinkId=267238)介绍了所有这些，或者这里有一个更简短的介绍：http: [//www.codeproject.com/Articles/469280/An-introduction-to-Type-Script](http://www.codeproject.com/Articles/469280/An-introduction-to-Type-Script)或类似的 SO 问题：[How在 TypeScript 中声明函数的返回类型](https://stackoverflow.com/questions/12736269/how-to-declare-return-types-for-functions-in-typescript?rq=1)

# windows-8 - AppBar 中的后退按钮

> ID：13330669
> 
> 赞同：0
> 
> 时间：2012-11-11T11:25:15.087
> 
> 标签：windows-8, microsoft-metro

在顶部 AppBar 中有后退按钮是否“合法”？客户认为这是个好主意，我需要知道它是否通过了认证，才能有充分的理由不同意。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T11:44:26.820

我浏览了认证指南，但找不到任何关于后退按钮或标准控制方案的参考。

AppBar 不是很直观。一些用户可能没有意识到这一点，并且无法在页面之间导航，从而导致沮丧和潜在的差评和卸载。

我倾向于将 App Bar 视为放置高级控件的地方 - 需要额外功能的用户可能会看到的地方。

因为我在指南中找不到任何参考 - 如果它不在指南中，那么它在技术上是合法的。

指南：http: [//msdn.microsoft.com/en-us/library/windows/apps/hh694083.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh694083.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T19:30:05.507

这是完全合法的，我什至在我的一些应用程序中使用过，在认证或任何方面都没有问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T20:59:58.430

在应用程序认证期间，他们检查以下因素[http://msdn.microsoft.com/en-us/library/windows/apps/hh694083.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh694083.aspx)

您使用什么字体以及您是否遵循地铁指南都没有关系。

提出您的问题，是的，将后退按钮添加到顶部应用程序栏是合法的，这就是您应该这样做的方式。

# xml - XML 模式验证返回 2 个错误

> ID：13330671
> 
> 赞同：0
> 
> 时间：2012-11-11T11:25:36.303
> 
> 标签：xml, schema

当我尝试验证我的 XML 模式时，我遇到了两个问题：

78,44 *s4s-elt-invalid-content*。`1: The content of 'gamesType' is invalid. Element 'element' is invalid, misplaced, or occurs too often.`

4,9 *cvc-complex-type.2.4*。`a: Invalid content was found starting with element 'author'. One of '{autor}' is expected`.

我不知道该怎么做，这是我第一次使用 Xml 模式做作业。

```
'<?xml version="1.0" encoding="utf-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema">
<!-- Jakub Gluch, Krzzis1013-->

<xs:element name="collection">
<xs:complexType>
<xs:sequence>
<xs:element name="autor"/>
<xs:element name="collection" minOccurs="10" maxOccurs="unbounded"/>
<xs:element name="copyright" type="copyrightType"/>
</xs:sequence>
</xs:complexType>
</xs:element>

<xs:complexType name="authorType">
<xs:sequence>
<xs:element name="gender" type="genderType"/>
<xs:element name="name" type="nameType" minOccurs="1" maxOccurs="2"/>
<xs:element name="surname" type="surnameType"/>
<xs:element name="age" type="ageType"/>
<xs:element name="city" type="cityType"/>
<xs:element name="study" type= "studyType"/>
</xs:sequence>
</xs:complexType>

<xs:simpleType name="genderType">
<xs:restriction base="xs:string">
<xs:pattern value="mezczyzna|kobieta"/>
</xs:restriction>
</xs:simpleType>

<xs:simpleType name="nameType" >
<xs:restriction base="xs:string" >
<xs:minLength value="1"/>
<xs:maxLength value="16"/>
</xs:restriction>
</xs:simpleType>

<xs:simpleType name="surnameType">
<xs:restriction base="xs:string">
<xs:minLength value="1"/>
<xs:maxLength value="20"/>
</xs:restriction>
</xs:simpleType>

<xs:simpleType name="ageType">
<xs:restriction base="xs:integer">
<xs:minInclusive value="1"/>
<xs:maxInclusive value="100"/>
</xs:restriction>
</xs:simpleType>

<xs:simpleType name="cityType">
<xs:restriction base="xs:string">
<xs:minLength value="1"/>
<xs:maxLength value="30"/>
</xs:restriction>
</xs:simpleType>

<xs:complexType name="studyType">
<xs:simpleContent>
<xs:extension base="xs:string">
<xs:attribute name="semester" type="xs:integer"/>
<xs:attribute name="group" type="xs:string"/>
</xs:extension>
</xs:simpleContent>
</xs:complexType>

<xs:complexType name="gamesType">
<xs:sequence>
<xs:element name="game"/>
<xs:element name="author"/>
<xs:element name="date"/>
<xs:element name="url"/>
<xs:element name="species"/>
</xs:sequence>

<xs:element name="games" type="gamesType"/>

<xs:complexType name="gamesType">
<xs:sequence>

<xs:element name="game">
<xs:simpleType>
<xs:restriction base="xs:string">
<xs:minLength value="5"/>
<xs:maxLength value="40"/>
</xs:restriction>
</xs:simpleType>
</xs:element>

<xs:element name="author">
<xs:simpleType>
<xs:restriction base="xs:string">
<xs:minLength value="5"/>
<xs:maxLength value="30"/>
</xs:restriction>
</xs:simpleType>
</xs:element>

<xs:element name="date" type="xs:date" />

<xs:element name="url">
<xs:simpleType>
<xs:restriction base="xs:string">
<xs:minLength value="10"/>
<xs:maxLength value="60"/>
</xs:restriction>
</xs:simpleType>
</xs:element>

<xs:element name="species" type="speciesType"/>

</xs:sequence>
</xs:complexType>

<xs:complexType name="speciesType">
<xs:simpleContent>
<xs:restriction base="speciesTypeBase">
<xs:minLength value="2"/>
<xs:maxLength value="20"/>
</xs:restriction >
</xs:simpleContent>
</xs:complexType>

<xs:complexType name="speciesTypeBase">
<xs:simpleContent>
<xs:extension base="xs:string">
<xs:attribute name="type" type="xs:string"/>
<xs:attribute name="age" type="xs:string"/>
<xs:attribute name="language" type="xs:string"/>
</xs:extension>
</xs:simpleContent>
</xs:complexType>

</xs:complexType>

<xs:simpleType name="copyrightType">
<xs:restriction base="xs:string">
<xs:minLength value="10"/>
<xs:maxLength value="60"/>
</xs:restriction>
</xs:simpleType>

</xs:schema>' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T11:50:54.233

这很明显。

中的元素`gameType`没有定义类型（内联或引用类型）。它需要看起来像`authorType`.

你的第二个错误显然是一个错字......

# html - 为什么我的第一个导航和身体之间有填充？

> ID：13330676
> 
> 赞同：0
> 
> 时间：2012-11-11T11:26:02.577
> 
> 标签：html, css

![在此处输入图像描述](../Images/a351ce0849735be84da41cf8823d8757.png)我虽然我的 css 的第一部分不会在体内填充。这足以解释我的问题 stackoverflow，请允许我现在发布我的问题。

CSS：

```
*{ 
    margin: 0px;
    padding: 0px;
}

header, nav, section, aside, footer{display: block}

body{
    border: solid red 2px;
}

nav{
    border: solid black 2px;
} 
```

的HTML：

```
<!DOCTYPE HTML> 
    <html>     
        <head>             
            <title>redditClone</title>     
            <meta charset="utf-8"/>
            <link rel=stylesheet href=redditClone.css></link>       
        </head>     
        <body>
            <nav>my subreddits - dashboard - front - all - random - friends</nav>
            <header>
                <h1>Reddit</h1>
                <nav>theRealAgorist preferences</nav>
            </header>   
            <section></section>
            <aside></aside>
            <footer></footer>
        </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T11:40:32.060

我在 Chrome、FF 或 IE9 中看不到任何填充，但是...

尝试改变这一点：

```
header nav section aside footer{display: block} 
```

对此：

```
header, nav, section, aside, footer {display: block; padding: 0px; margin: 0px; } 
```

您必须使用逗号来选择许多元素

# html - CSS：获取表单标签以显示在表单元素顶部（jsfiddle）

> ID：13330678
> 
> 赞同：1
> 
> 时间：2012-11-11T11:26:31.917
> 
> 标签：html, css, forms

我试图让表单标签显示在每个表单元素的顶部。我有完成此操作的[jsfiddle](http://jsfiddle.net/LUgg5/1/)。

问题是，如何在每行获取多个表单元素的同时将其标签保持在其正上方？

您可以在我的示例中看到我如何将“城市、州、邮编”全部放在同一行，但由于`display: block`在我的 CSS 中，它会将它们分成单独的行。

```
label { 
    font-weight:bold;
    display: block;
}

<form>

    <label for="name">Name</label>
    <input type="text" name="name" /><br />

    <label for="email">Email</label>
    <input type="text" name="email" /><br />

    <label for="city">City</label>
    <input type="text" name="city" /> 

    <label for="state">State</label>
    <input type="text" name="state" /> 

    <label for="zip">Zip</label>
    <input type="text" name="zip" /><br />

    <label for="last">Last</label>
    <input type="text" name="last" />

</form> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T11:50:01.290

标记标签/字段对的语义方法是使用`DL`列表：

```
<form>
    <dl>
        <dt><label for="name">Name</label></dt>
        <dd><input type="text" name="name" id="name" /></dd>

        <dt><label for="email">Email</label></dt>
        <dd><input type="email" name="email" id="email" /></dd>
    </dl>
</form> 
```

使用此代码，您还可以轻松实现所需的演示。

如果您需要水平放置多个标签/字段对，`DL`请为每个`DT`/`DD`对使用单独的：

```
<form>
    <dl>
        <dt><label for="name">Name</label></dt>
        <dd><input type="text" name="name" id="name" /></dd>
    </dl>
    <dl>
        <dt><label for="email">Email</label></dt>
        <dd><input type="email" name="email" id="email" /></dd>
    </dl>
</form> 
```

并使用`float: left`, 或`display: inline-block`或`display: table-cell`for `DL`（取决于最适合您的需求）：

```
/* Font size zeroed for removing gaps between inline blocks. */
FORM {font-size: 0; }

/* Font size restored for DL. */
FORM DL {
    display: inline-block;
    font-size: 13px;
    vertical-align: top;
    /*width: 200px;*/ /* Specify width if needed. */
} 
```

顺便说一句，考虑到元素的`for`属性是指标记元素的属性，而不是它的属性。`LABEL``id``name`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T11:46:27.787

请写一个CSS类：

```
.inline-block-display{
display: inline-block !important;
} 
```

现在将此类添加到要添加到同一行的每个元素中，如下所示：

```
<input type="text" name="city" class="inline-block-display" /> 
```

[演示](http://jsfiddle.net/LUgg5/5/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T11:44:22.087

您要使用的是 css 'float' 和 'clear'

看看这个 jsfiddle 你就会明白（扩展你的小提琴）你显然可以编辑宽度以满足你的需要

[http://jsfiddle.net/UxPDR/](http://jsfiddle.net/UxPDR/)

像这样

```
.small{
    float:left;
}
.clearleft{
    clear:left;
} 
```

# jquery - 简单的 Panorama jQuery 未在 Geomashup 中使用 AJAX 加载

> ID：13330683
> 
> 赞同：1
> 
> 时间：2012-11-11T11:26:53.760
> 
> 标签：jquery, ajax, wordpress, panoramas

我尝试在 wordpress 中使用 Simple Panorama 插件，通过 Geomashup 加载到帖子槽 AJAX 中。这里加载了 geomashup 和 AJAX 的帖子：http: [//bontex.mu/geo/](http://bontex.mu/geo/)

不幸的是 Panorama jQuery 插件没有在 AJAX 中加载。根据 Geomashup 作者的说法，我必须调整 Panorama 插件才能使其正常工作。我无法从全景作者那里得到任何解决方法的答案。有什么建议吗？感谢您的回答。

插件链接：[http ://www.openstudio.fr/Un-viewer-de-panoramas-simple-en.html?lang=fr](http://www.openstudio.fr/Un-viewer-de-panoramas-simple-en.html?lang=fr)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T11:38:45.590

只需`$("img.panorama").panorama();`在您的 ajax 请求完成后调用。

**例如：**

```
<?php the_content(); ?>
<script>jQuery("img.panorama").panorama();</script> 
```

# c - 这个字符缓冲区代码有什么问题？

> ID：13330684
> 
> 赞同：2
> 
> 时间：2012-11-11T11:26:56.117
> 
> 标签：c, string, buffer, glibc, realloc

由于我保证存在的原因，我正在逐个字符地读取输入，如果一个字符符合某些条件，我会将其写入动态分配的缓冲区。此函数将指定字符添加到指定字符串的“结尾”。读取缓冲区时，我读取了第一个“大小”字符。

```
void append(char c, char *str, int size)
{
 if(size + 1 > strlen(str))
        str = (char*)realloc(str,sizeof(char)*(size + 1));
 str[size] = c;
} 
```

该功能经过多次迭代开发，产生了“损坏的双链表”、“双重释放或损坏”等错误。下面是应该如何使用 append 的示例：

```
// buffer is a string
// bufSize is the number of non-garbage characters at the beginning of buffer
char *buft = buffer;
int bufLoc=0;
while((buft-buffer)/sizeof(char) < bufSize)
    append(*(buft==),destination,bufLoc++); 
```

它通常适用于一些看似任意数量的字符，然后因错误而中止。如果不清楚第二个代码片段在做什么，它只是从缓冲区复制到某个目标字符串。我知道有用于此的库方法，但有时我需要更好地控制确切复制的内容。

提前感谢您的任何见解。我难住了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T11:32:54.437

此函数不会将字符附加到缓冲区。

```
void append(char c, char *str, int size)
{
    if(size + 1 > strlen(str))
        str = realloc(str, size + 1);
    str[size] = c;
} 
```

首先，什么是`strlen(str)`？你可以说“它的长度`str`”，但这忽略了一些非常重要的细节。它是如何计算长度的？简单——`str`必须以 NUL 结尾，并找到其中第一个字节`strlen`的偏移量。`NUL`如果您的缓冲区末尾没有 NUL 字节，则您无法使用`strlen`它来查找其长度。

通常，您需要跟踪缓冲区的长度。为了减少重新分配的次数，请分别跟踪缓冲区大小和其中的数据量。

```
struct buf {
    char *buf;
    size_t buflen;
    size_t bufalloc;
};

void buf_init(struct buf *b)
{
    buf->buf = NULL;
    buf->buflen = 0;
    buf->bufalloc = 0;
}

void buf_append(struct buf *b, int c)
{
    if (buf->buflen >= buf->bufalloc) {
        size_t newalloc = buf->bufalloc ? buf->bufalloc * 2 : 16;
        char *newbuf = realloc(buf->buf, newalloc);
        if (!newbuf)
            abort();
        buf->buf = newbuf;
        buf->bufalloc = newalloc;
    }
    buf->buf[buf->buflen++] = c;
} 
```

## 另一个问题

这段代码：

```
str = realloc(str, size + 1); 
```

它只会改变`str`in的值`append`——它不会改变`str`调用函数中的值。函数参数是函数的本地参数，更改它们不会影响函数之外的任何内容。

## 小问题

这有点奇怪：

```
// Weird
x = (char*)realloc(str,sizeof(char)*(size + 1)); 
```

强制`(char *)`转换不仅是不必要的，而且它实际上可以掩盖错误——如果你忘记包含`<stdlib.h>`，强制转换将允许代码编译。真可惜。

并且`sizeof(char)`是 1，根据定义。所以不要打扰。

```
// Fixed
x = realloc(str, size + 1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T11:34:48.873

当您执行以下操作时：

```
str = (char*)realloc(str,sizeof(char)*(size + 1)); 
```

str 中的更改不会反映在调用函数中，换句话说，更改是函数本地的，因为指针是按值传递的。要解决此问题，您可以返回 str 的值：

```
char * append(char c, char *str, int size)
{
 if(size + 1 > strlen(str))
        str = (char*)realloc(str,sizeof(char)*(size + 1));
 str[size] = c;

 return str;
} 
```

或者您可以通过地址传递指针：

```
void append(char c, char **str, int size)
{
 if(size + 1 > strlen(str))
        *str = (char*)realloc(*str,sizeof(char)*(size + 1));
 (*str)[size] = c;
} 
```

# html - 用连续的分隔词在列表中添加空格

> ID：13330691
> 
> 赞同：2
> 
> 时间：2012-11-11T11:28:32.670
> 
> 标签：html, css

我有一个包含一些项目的列表，我想使用严格的 css 在单词之间添加一些额外的空格！

这就是 html 现在的样子，而 css 不存在，所以请帮帮我。

**HTML**

```
<div class="container"> 
<p>List<->//more space item<->//more space number<->//more space one<->//more space</p>
<p>List<->//more space item<->//more space number<->//more space two<->//more space</p>
<p>List<->//more space item<->//more space number<->//more space three<->//more
space</p> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T11:33:09.890

使用字间距属性

```
p
{ 
word-spacing:30px;
} 
```

[http://www.w3schools.com/cssref/pr_text_word-spacing.asp](http://www.w3schools.com/cssref/pr_text_word-spacing.asp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T11:31:18.303

您可以使用以下方法添加不间断空格：

```
&nbsp; 
```

尽管有些浏览器会将其中的多个折叠到一个空间中。

# asp.net-mvc-3 - 复选框值始终为真

> ID：13330692
> 
> 赞同：0
> 
> 时间：2012-11-11T11:28:43.410
> 
> 标签：asp.net-mvc-3, checkbox

在我的 mvc 应用程序中，我有一个复选框。但不知道为什么它的价值总是真实的。请帮忙

我的查看页面

```
<div id="maindiv">
<%: Html.CheckBoxFor(m => m.status)%>
<%: Html.LabelFor(m => m.status)%>
</div> 
```

脚本就在这里，我如何始终获得 TRUE 值

```
<script type="text/javascript">
   $('#status').change(function () {
       alert(" active " + $('#status').val());
   });
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T11:33:22.480

改用：

```
var status = ( $("#status").attr("checked") ? 'checked' : 'unchecked' );
alert(" active " + status); 
```

**说明：**
您正在读取复选框的值，该值始终为真，您需要检查它`checked attribute`是选中还是未选中。我使用三元运算符来检查它是否已检查您也可以使用`$("#status").is(":checked")`，但速度较慢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T12:38:39.350

```
$('#status').change(function () {
   alert(" active " + this.checked);
}); 
```

# wpf - 立方体围绕其边缘而不是轴旋转

> ID：13330694
> 
> 赞同：1
> 
> 时间：2012-11-11T11:29:06.267
> 
> 标签：wpf, 3d, rotation, cube

我对使用 Visual Studio 和 WPF 很陌生。我一直将 Arduino 和 Processing 一起使用，但我现在正尝试用 WPF 替换 Processing，因为它看起来更专业。我在 WPF 中遇到的问题是我绘制了一个立方体，我需要围绕它的 2 个边缘而不是 x 轴和 y 轴旋转它。

我认为一个可能的解决方案是，当我使用 RotateTransform3D.Rotation 和 AxisAngleRotation3D 时，我可以在代码的 Axis="" 部分输入旋转角度的正弦和余弦值，但我不知道如何获取这些值从以前的旋转旋转。任何人都可以帮忙吗？

# sql - 找到只做了一次预订的 sids？

> ID：13330696
> 
> 赞同：-1
> 
> 时间：2012-11-11T11:29:37.997
> 
> 标签：sql

我使用 Using group 编写了“查找仅做了一次预订的 sids”查询，如下所示：

```
SELECT R.sid
FROM   Sailors S,
       Reserve R
WHERE  R.sid = S.sid
GROUP  BY R.sid
HAVING Count(R.sid) = 1 
```

但我想通过使用（不存在）命令找到它。我写它

```
SELECT S.sid
FROM   Sailors S
WHERE  NOT EXISTS (SELECT R.sid
                   FROM   Reserve R
                   WHERE  Count(R.sid) <> 1) 
```

但它有错误。如何使用 not exists 命令编写它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T11:37:31.503

如果 Reserve 有一个主键删除，你可以这样写：

```
Select
  s.sid
From
  Sailors s
    Inner Join
  Reserve r
    On s.sid = r.sid
Where
  Not Exists (
    Select
      'x'
    From 
      Reserve r2
    Where
      r2.sid = s.sid And
      r2.rid != r.rid
  ); 
```

请注意，在这种情况下，您甚至不需要引用 Sailors 表：

```
Select
  r.sid
From
  Reserve r
Where
  Not Exists (
    Select
      'x'
    From 
      Reserve r2
    Where
      r2.sid = r.sid And
      r2.rid != r.rid
  ); 
```

[http://sqlfiddle.com/#!3/cce6c/2](http://sqlfiddle.com/#!3/cce6c/2)

# javascript - 始终将 url 返回到 nsf 的客户端 javascript

> ID：13330698
> 
> 赞同：-2
> 
> 时间：2012-11-11T11:29:54.250
> 
> 标签：javascript, path, xpages

我需要一个客户端 javascript 函数，它始终返回`.nsf`可以在 XPages 中使用的路径。例如`http://acme.com/folder1/folder2/mydb.nsf/whatever/whatever`

如果我能使用这样的功能就好了

```
function getNSFPath(){

} 
```

我该如何构造这样的函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T20:29:32.733

I would use something like this, to get the first occurrence of .nsf and also cover if someone has written .NSF I have seen that happend ;-)

function getNSFPath(url){ return url.toLowerCase().split(".nsf")[0]+ ".nsf"; }

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T12:09:05.437

XPages 目前没有 nsf 之外的目录结构。因此，像这样查找 / 的最后一次出现就足够了：

```
function getNSFPath(url) {
    return url.substring(0, url.lastIndexOf('/'));
} 
```

在未来的版本中可能会发生变化，因此您希望改为查找“.nsf”。但是，这也不是一种保存方式，因为目录可以包含“.nsf”。此外，管理员可以决定使用 URL 重定向来掩盖 NSF，因此您最好考虑不依赖此类功能的架构

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T19:29:35.087

这是一个适用于 nsf 和副本 ID 路径的片段。由于使用了*document.location.pathname*，因此您不必担心参数，因为它们不包括在内。

```
function getCurrentAppPath(){
    // Extract path with replica id or nsf path
    return document.location.pathname.replace( /^(\/([0-9a-f]{16})|(.+\.nsf)).*/i, '$1/' );
} 
```

# multithreading - 如何限制 Erlang VM (BEAM) 使用的核心数量？

> ID：13330701
> 
> 赞同：5
> 
> 时间：2012-11-11T11:30:06.737
> 
> 标签：multithreading, erlang, scalability, smp

我正在使用 2 个四核 Xeon E5520 2.2GHz、24.0GB RAM 和 Erlang R15B02（启用 SMP）的节点上运行实验。我想知道是否可以限制 Erlang VM 使用的核心数量，以便我可以暂时禁用一些核心并逐步增加数量，以测试可扩展性。

我无权`root`访问此节点。所以我期待一些方法，要么通过指定参数，`erl`要么通过 Erlang 代码。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-11T13:04:30.877

您可以通过`+S`选项 to限制 Erlang 使用的内核数量`erl`，这允许您设置 Erlang 创建的调度程序内核线程的数量。有关详细信息，请参阅[erl 手册页](http://erlang.org/doc/man/erl.html)。

请注意，Erlang[链接端口驱动程序](http://www.erlang.org/doc/tutorial/c_portdriver.html)和[本机实现函数](http://www.erlang.org/doc/tutorial/nif.html)(NIF) 都可以创建自己的线程，因此会影响 Erlang 进程将使用多少内核，而与通过`+S`选项指定的线程无关，尽管标准驱动程序或 NIF 都没有这样做这个。此外，还`+A`可以选择`erl`创建异步线程池供驱动程序使用，这也可能影响使用的内核数量，默认情况下异步线程池有 10 个线程（在 Erlang/OTP 版本 R16B 之前默认为空）。

# jquery - 如何在 flowplayer 中设置元数据

> ID：13330706
> 
> 赞同：0
> 
> 时间：2012-11-11T11:30:40.363
> 
> 标签：jquery, flash, actionscript, flowplayer

我将缩放设置为“适合”，因为它会向上或向下缩放视频并保留其纵横比，但元数据的视频宽度错误，这意味着缩放会保留错误的纵横比。我有一个应该是 853x480 的视频，但在 flowplayer 中它是 720x480。我知道你可以通过写这个来获得元数据宽度

```
onMetaData: function(clip){ 
  alert(clip.metaData.width);
}, 
```

但是你怎么设置呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T11:34:49.970

您无法使用 flowplayer 设置元数据，因为它是存储在 FLV 文件中的数据。您将需要使用元数据注入器。

有关更多信息，请参见[http://osflash.org/flv#metadata](http://osflash.org/flv#metadata)

如果您想动态更改apsect 比率，您应该使用`scale`缩放值并设置flowplayer 使用的div 的正确高度和宽度。

# c# - WinForm和UserControl中连接字符串的初始化

> ID：13330710
> 
> 赞同：0
> 
> 时间：2012-11-11T11:32:14.137
> 
> 标签：c#, windows, visual-studio, user-controls, connection-string

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T11:49:15.287

如果您使用的是测试项目，则需要在其中添加设置（app.config 文件）。

如果您直接调试，DEVENV 会创建一个托管用户控件的示例应用程序，您需要明确读取设置。

您可以使用[预处理器指令](http://msdn.microsoft.com/en-us/library/aa691098%28v=vs.71%29.aspx)来区分用户是通过 DEVENV 控制调试，还是通过在 app 下托管来控制调试。

像这样的代码

```
 #ifdef RunningUnderHost
  // read app settings
  #endif 
```

RunningUnderHost 可以在库上定义，而不是在应用程序上定义。

# php - while循环不起作用

> ID：13330719
> 
> 赞同：1
> 
> 时间：2012-11-11T11:33:48.363
> 
> 标签：php, loops, while-loop

大家好，我正在尝试执行while循环。

while 循环将遍历所有订单。它可以工作，但不知何故它不会在订单状态中循环。例如，订单 4 状态为待处理，但订单 5 状态未显示任何内容。我怀疑我错误地放置了括号。

这是我的代码。

```
<form action="results-action" method="post" enctype="multipart/form-data">
<fieldset>

<table width="600" border="1">
<tr><td><h2>Pending Order</h2></td></tr>
<tr>

<th scope="col">Order ID</th>
<th scope="col">Name</th>
<th scope="col">Address</th>
<th scope="col">Product Name</th>
<th scope="col">Produt Quantity</th>
<th scope="col">Price</th>
<th scope="col">Order status</th>
</tr>

<?php
while ($row = mysqli_fetch_array($result)) {
?>

<tr>
<td><input type="text" value='<?=$row['virtuemart_order_id']?>' name="orderid" id="virtuemart_order_id"></td>
<td><?=$row['first_name']?></td>
<td><?=$row['address_1']?></td>
<td><?=$row['order_item_name']?></td>
<td><?=$row['product_quantity']?></td>
<td><?=$row['product_final_price'] ?></td>
<td><select name="change">
    <?php 
    while ($row2 = mysqli_fetch_array($result2)) {
    ?>
    <option value="<?=$row2['order_status_code'] ?>"><?=$row2['order_status_name'] ?></option>
    <?php
    } //end inner while
    ?>
</td>
</tr>

<?php
} //end outer while
?>

</table>
</fieldset>

<fieldset>
<table>
<tr>
<td><input type="submit" value="Update status" name="update status"> </td>
</tr>
</table>
</fieldset>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T11:44:48.667

如果您想每次都在内部获得相同的行，`while`则必须重置 mysqli 结果集的内部指针。为此，您可以使用[`mysqli_data_seek()`](http://www.php.net/manual/en/mysqli-result.data-seek.php)

你最终会得到这样的东西：

```
while ($row = mysqli_fetch_array($result)) {
    // snip ...
    while ($row2 = mysqli_fetch_array($result2)) {
        // snip
    }
    mysqli_data_seek($result2, 0);
    // snip
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-16T08:55:15.750

还请确保`<select>`具有唯一的名称，否则您的所有状态都将被错误地捕获。

```
<select name="change_<?=$row['row_id']?>"> 
```

类似的东西。

# objective-c - 使用 UITableViewCell 作为按钮

> ID：13330720
> 
> 赞同：2
> 
> 时间：2012-11-11T11:33:49.797
> 
> 标签：objective-c, xcode, button, uitableview

我在 Stack Overflow 上阅读了一些类似的问题，但没有一个给出令人满意的答案。

我想要实现的是“设置”屏幕中的“Facebook 登录按钮”。

![Facebook 设置屏幕](../Images/9c848cb2a55c846717f0f3cb56965b3a.png)

我想使用静态单元来实现这一点。但我很快发现我无法使用 Xcode 将“Action”连接到 UITableViewCell。

然后，我尝试使用内部带有 UIButton 的自定义 UITableViewCell 来实现相同的结果，但它导致了很多额外的样式问题，使其看起来与真正的 UITableViewCell 完全一样。

现在我设法使用以下解决方案使 UITableViewCell 表现得像一个按钮：

我将“登录按钮”UITableViewCell 的标识符更改为“登录按钮”。我将以下代码添加到表视图控制器中。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    if ([[selectedCell reuseIdentifier] isEqualToString:@"loginButton"]) {
        NSLog(@"Clicked");
        // Execute function to run code for Login button
    }
} 
```

我现在将执行一个函数，而不是执行一个 IBAction（如果我可以像 Xcode 中的按钮一样链接它，就会出现这种情况）。

这按预期工作。但我提出这个问题的原因是：我想知道这是否是正确的方法。这个可以吗？这很糟糕吗？为什么这是好的或坏的？有更好的解决方案吗？谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-13T01:00:00.433

这是一个合理的方法。

使用 indexpaths 的类似解决方案是：

为 IB 的 Table View Cell 创建一个出口。

```
@property (strong, nonatomic) IBOutlet UITableViewCell *loginButtonCell; 
```

然后实现 didSelectRowAtIndexPath: 方法。

```
- (void) tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath       *)indexPath
{
    if ([indexPath isEqual:[tableView indexPathForCell:self.loginButtonCell]])
    {
        // This will get called when you cell button is tapped
    }
} 
```

然后您可以重新订购，而无需修改您的代码

# ios5 - IOS：使用分段控制切换文本字段

> ID：13330722
> 
> 赞同：1
> 
> 时间：2012-11-11T11:34:34.950
> 
> 标签：ios5, xcode4

我目前正在为 iPhone 开发一个体重指数计算器，使用分段控制在各种体重和身高单位之间切换，目前我有一个用户输入值的文本字段。

我的问题是这个；有没有办法将文本字段更改为两个单独的文本字段？

例如，如果用户从分段控件中选择“stone & lbs”，则单个文本字段将被替换为两个文本字段，用于输入以 stone 和 lbs 为单位的文本。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T22:25:41.483

你有一个视图控制器。该控制器的工作是控制视图。

因此，作为一个指标，让您的视图控制器在选择一个采用一个值的单位时创建并显示一个文本字段，并且在使用需要两个文本字段的内容时创建并显示两个文本字段。

控制器还可以隐藏未使用的字段，您甚至可以使用 UIView 动画来吸引人为从单文本视图到双文本视图的更改设置动画。

# asp.net - c# asp.net报表和报表查看器（或reportviewer）中的子报表

> ID：13330729
> 
> 赞同：1
> 
> 时间：2012-11-11T11:35:27.833
> 
> 标签：asp.net, reportviewer, report-viewer2010, reportviewer2008

我做了这个 waltrut 的所有步骤：

[http://blogs.msdn.com/b/sqlforum/archive/2011/01/03/walkthrough-add-a-subreport-in-local-report-in-reportviewer.aspx](http://blogs.msdn.com/b/sqlforum/archive/2011/01/03/walkthrough-add-a-subreport-in-local-report-in-reportviewer.aspx)

当我运行它时，我得到第一个父亲报告，而不是我得到的子报告：

> 子报表“Subreport5”的数据检索失败，位于：C:...

我附上一个打印屏幕文件 ![（子报告错误）](../Images/e44ae8a80ec5e0c26f6b97626f0c99f2.png)

我正在使用 VS2010 框架 3.5。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T16:08:20.703

给定正确的参数，您可以自行运行子报表吗？如果你不能，你的问题就是。

如果您可以自行成功运行它，请仔细检查您是否将参数正确传递给您的子报表。确保参数类型匹配并且您正在传递所有这些。

另一个问题可能是 - 如果我没记错的话 - 当您在本地报表中有子报表时，您需要以编程方式为子报表提供数据，就像您使用父报表一样。处理子报告时引发了一个事件 - SubreportProcessingEvent。您为该事件编写处理程序并在处理程序中提供数据。以下是有关它的更多信息： [LocalReport.SubReportProcessingEvent](http://msdn.microsoft.com/en-us/library/microsoft.reporting.webforms.localreport.subreportprocessing%28v=vs.80%29.aspx)。该页面上有一个很好的例子。

# c++ - 将文件中的数据提取到向量中，但避免重复

> ID：13330732
> 
> 赞同：0
> 
> 时间：2012-11-11T11:36:02.747
> 
> 标签：c++, vector, file-read

我想读取格式如下的文件中的数据：

```
Point1, [3, 4] 
```

我正在使用分隔符 '[' ']' 和 ',' 并将它们替换为 ' ' （空格）。我的代码现在很好并且可以工作。但问题是，如果`Point1, [3, 4]`出现一次，我希望它是唯一的，如果文本文件中存在相同的数据，我希望它不会再次出现。

这是我所拥有的：

```
string line, name;
char filename[50];
int x,y;

cout << "Please enter filename : ";
cin >> filename;

ifstream myfile(filename);
if (myfile.is_open()) {
    while ( myfile.good() ) {
        getline(myfile, line);

        for (unsigned int i = 0; i < line.size(); ++i) {
            if (line[i] == '[' || line[i] == ']' || line[i] == ',') {
                line[i] = ' ';
            }
            istringstream in(line);
            in >> name >> x >> y;                                  
        }
        cout <<name <<endl;

        if (name=="Point") {
            p.push_back(Point(x,y));         
        }                          
        count++;
    }    
    myfile.close();
    cout << count;
}
else cout<< "Unable to open file"; 
```

我该怎么做呢？我试着在之后添加这个`if(name=="Point")`

```
for (int j=0; j<p.size(); j++) {
    if(p.getX != x && p.getY) != y) {
        p.push_back(Point(x,y))
    }
} 
```

...但这不能正常工作，因为数据没有存储到向量中。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T11:38:15.043

您可以将数据`vectors`存储到`sets`. 一个集合只包含唯一的值，所以你不必检查你的唯一性`Points`，`set`将管理它。

而不是定义`vector<Point>`，你必须定义`set<Point>`，而不是使用`p.push_back`将点添加到你的向量中，你必须使用`p.insert`如果它是一个`set`。

您可以在[此处](http://www.cplusplus.com/reference/stl/set/)`set`查看文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T12:21:30.760

假设您想将数据存储在 a 中，`std::vector<Point>`您只需检查是否不存在对应的点。假设定义了一个相等运算符，就这么简单：

```
if (p.end() == std::find(p.begin(), p.end(), Point(x, y))) {
    p.push_back(Point(x, y));
} 
```

如果您`Point`的类型没有相等运算符并且不应该得到一个，您可以使用一个函数对象`find_if()`来代替，例如：

```
if (p.end() == std::find_if(p.begin(), p.end(),
                      [=](Point const& v) { return x == v.x && y == v.y; })) {
    ... 
```

您应该将循环与其他操作分开：您建议检查该点是否已存在的循环基本上就是`std::find()`在每次迭代中插入一个新点！您首先要遍历所有现有点，看看它是否存在于任何地方。只有在没有的情况下，您才会插入一个新点。

请注意，您在替换字符串中的字符时犯了类似的错误：您在检查每个字符后尝试解码字符串。这不是一个语义问题，而是一个主要的性能问题。您应该在循环中替换字符，并且**在**该循环之后您应该只解码字符串一次。当然，在解码字符串时，您需要检查格式是否正确，因为**始终**需要确定输入操作是否成功。也就是说，在你的循环替换你想要的字符之后：

```
std::istringstream in(line);
if (in >> name >> x >> y) {
    // now process the data
} 
```

...或者，如果你和我一样，不喜欢命名只是暂时存在的东西：

```
if (std::istringstream(line) >> std::ws >> name >> x >> y) { 
```

另请注意：检查流`good()`通常是错误的事情，因为流可以处于非常好的状态，除非它在某个时候看到了 EOF，因此设置了`std::ios_base::eofbit`. 更重要的是，您需要在输入操作**之后**进行检查，而不是之前！也就是说，您的第一个循环应该以这样的方式开始：

```
while (std::getline(myFile, line)) {
    ... 
```

# java - 关于可执行jar文件

> ID：13330735
> 
> 赞同：0
> 
> 时间：2012-11-11T11:36:36.973
> 
> 标签：java, jar, executable-jar

我开发了一个应用程序，主要是`Swing`基于应用程序。我已经制作了`JAR`整个项目的可执行文件。现在，当我单击它时，`JAR`它会被执行并且我的项目开始并且`Swing`窗口照常显示。但是，当我尝试在另一个系统上执行相同的可执行文件`JAR`时，它不会被执行。请告知如何解决这个问题..!!

原因可能是他的系统上也可能没有安装 JRE，或者没有设置类路径..！请告知如何在他的系统上执行相同的 JAR。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T11:43:58.437

你在使用eclipse吗？也许其他系统没有`JRE7`. 如果是这种情况，您有以下可能性：

1.  `JRE`在其他系统上更新
2.  在eclipse中新建一个项目，`JavaSE-1.6`在“Use an execution environment JRE”处选择

这编译您的项目 JRE6 兼容。但是，您必须为您的问题提供更多详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T11:44:11.813

您的问题缺少一些细节。

请指定在您朋友的机器上运行应用程序时获得的输出。

否则很难给出建议。

也欢迎提供更多详细信息：jdk/jre 版本、操作系统版本、构建脚本等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T11:52:33.557

看看：

[http://launch4j.sourceforge.net](http://launch4j.sourceforge.net) http://jsmooth.sourceforge.net

这些将你的 jar 包装成一个可执行文件，这使得分发你的应用程序变得更容易，处理设置类路径和安装 JVM（如果不存在）的事情。

# php - 如何删除mysql列中的空白

> ID：13330739
> 
> 赞同：0
> 
> 时间：2012-11-11T11:36:54.827
> 
> 标签：php, mysql, replace, preg-replace, trim

我在 mysql 表中有一个列，最后有额外的空格。尽管我已经尝试在 mysql 中执行 REPLACE 和 TRIM ，`$output = preg_replace("/\s+/", " ", $input);`但似乎没有任何东西可以删除多余的空格或字符串末尾的任何内容。

该列是 varchar(255) 排序规则 utf8_general_ci。它包含一个表示航班号的字母数字字符串，例如 LH2214。我有另一列也是相同的排序规则，并且 varchar(255) 具有相同的字母数字字符串，它后面没有额外的空格。

我只能在我的网页上看到空格，它有字符集 utf-8。但我看不到的是，如果它是制表符、空格、eol、eof 或类似的，所以我不知道如何将其过滤掉。有谁知道我如何摆脱mysql列中值末尾的额外空格？

我已经尝试了很多针对她在 SO 上发布的类似问题的解决方案，但没有一个有效。

我添加了一张图片来显示我的问题。

![额外的空白在上面一行可见。](../Images/db48b1023f6c5f97e46511ccf08e1b66.png)

有趣的是，在源代码中，没有可见的空格。因此，如果我保存 html，我将看不到空格`&nbsp;`或类似内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T12:03:38.327

在我看来（从您的屏幕截图中），您在具有“额外空白”的行上有一些额外的 CSS 属性。看看你的 css 属性，也许你设置了一个边距、填充、文本缩进或其他一些会改变你的文本/内容的属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T20:44:10.877

我想到了额外空白的两个可能原因。

1.  尾随空白字符被插入到表列中。

您可以使用以下查询验证并修复此问题（针对现有数据）：

```
UPDATE <your_table> SET <your_column> = TRIM ( <your_column> ); 
```

如果这有效，您应该确认“n 行已更新”，n > 0

1.  如果这返回 0 行更新，您很可能在输出中添加了空格。

检查您的输出 HTML 和样式表

# java - 提高插入排序的运行时间

> ID：13330741
> 
> 赞同：0
> 
> 时间：2012-11-11T11:37:11.410
> 
> 标签：java, runtime

只是为了练习和提高我的编程技能，我决定在 InterviewStreet 上解决问题。我决定开始使用简单的 InsertionSort（我希望它很简单）。 [https://www.interviewstreet.com/challenges/dashboard/#problem/4e90477dbd22b](https://www.interviewstreet.com/challenges/dashboard/#problem/4e90477dbd22b) 我能够得到正确的答案。但是运行时是一个问题。测试用例允许的最大运行时间为 5 秒。但是我有点过火了。我使用了一些技巧（比如从代码中删除一些东西。存储 str.lenght() 的结果等）。不过我还是有点过火了。

十个测试用例的当前运行时是：

1 通过 成功 0.160537

2 通过 成功 0.182606

3 通过 成功 0.172744

4 通过 成功 0.186676

5 失败 超出时间限制。5.19279

6 失败 超出时间限制。5.16129

7 通过 成功 2.91226

8 失败 超出时间限制。5.14609

9 失败 超出时间限制。5.14648

10 失败 超出时间限制。5.16734

我不知道测试用例是什么。请帮助我改进运行时。谢谢你。

```
import java.util.Scanner;
import java.io.*;
//import java.io.BufferedWriter;
//import java.io.FileInputStream;
//import java.io.FileOutputStream;

public class Solution {
    public static int[] A=new int[100001]; 
    public static int swap=0;
    public static void InsertionSort(int n){
    for (int i=1; i<=n; i++){    
        for (int var=i; var>0; var--){
            if (A[var]<A[var-1]){
                int temp=A[var-1];
                A[var-1]=A[var];
                A[var]=temp;
                swap++;
            }
            else {
                break;
            }
        }
    }
    }

    public static void main(String[] args) throws IOException  {
        BufferedReader br = new BufferedReader(new InputStreamReader(System.in));

        String str = br.readLine();
        int number_of_cases =Integer.parseInt(str);
        int counter;
        int [] spacearray = new int[100000];

        for (int j=0; j<number_of_cases; j++){
            swap=0;
            str = br.readLine();
            int arraylength = Integer.parseInt(str);

            str = br.readLine();
            counter=0;
            int strlen=str.length();
            for (int i=0; i<strlen-1; i++){
                if (str.charAt(i) == ' '){
                    spacearray[counter]=i;
                    counter++;
                }
            }
            spacearray[counter]=strlen;

            A[0]=Integer.parseInt(str.substring(0, spacearray[0]));
            for (int i=1; i<=arraylength-1; i++){
                A[i] = Integer.parseInt(str.substring(spacearray[i-1]+1,spacearray[i]));
            }

            InsertionSort(arraylength-1);

            System.out.println(swap);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T12:59:46.923

使用二叉索引树来解决这个问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T18:24:59.883

这里的瓶颈是插入排序算法。它的时间复杂度为 O(n^2)，n 高达 10^5，在 interviewstreet Judge 机器上很容易超过 5 秒。此外，当抛出 TLE 信号时，您的程序将停止执行。因此，到 5 的轻微开销并不是实际运行时间的指标。它是由检测 TLE 和停止执行之间的延迟引入的。

为了历史的缘故，这个问题最初是作为codeprint-1的一部分出现的。使用插入排序不是在这里进行的方法，否则问题将完全放弃。

**暗示**

使用所有值都在 [1,10^6] 范围内的事实。您在这里真正要做的是查找数组 A 中的反转数，即查找所有 i < j st A[i] > A[j] 对。[考虑一种数据结构，它允许您以对数时间复杂度（如二叉索引树](http://community.topcoder.com/tc?module=Static&d1=tutorials&d2=binaryIndexedTrees)）找到每个插入操作所需的交换次数。当然，还有其他方法。

# capistrano - 更改 config/newrelic.yml 路径

> ID：13330743
> 
> 赞同：2
> 
> 时间：2012-11-11T11:37:37.493
> 
> 标签：capistrano, symfony-2.1, newrelic, capifony

我正在使用带有 symfony 2.1 和 capifony 的新的 relic ruby​​ 代理。

我希望能够告诉新的遗物代理配置文件位于 app/config/newrelic.yml 而不是 config/newrelic.yml

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T10:02:58.683

您必须设置`NRCONFIG`环境变量，您可以通过这种方式直接在 cap 调用中进行设置：

`cap newrelic:notice_deployment NRCONFIG=app/config/newrelic.yml`

我想在部署配置中设置它，根据 cap 文档，这应该可以工作：

`set :default_environment, { "NRCONFIG" => "app/config/newrelic.yml" }`

但事实并非如此。;o(

# javascript - html 表格和 div 的

> ID：13330747
> 
> 赞同：1
> 
> 时间：2012-11-11T11:37:51.740
> 
> 标签：javascript, html-table

我有以下问题：我有一个固定宽度和高度的表格，应该在中间。

它的右边应该是**div**，宽度从表格的右边缘到浏览器的左边缘，但是在这个**div**图像中必须在右侧裁剪（这样只有左侧，大小的**div** )

在桌子的左侧，您需要相反的相同东西，以及更低的

这是它的样子 - [http://db.tt/bZU8Z9SJ](http://db.tt/bZU8Z9SJ)

你怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T11:59:25.307

好吧，为了给你更多的答案，用 div 做一个基本的布局：

```
<div id="container">
    <div id="left"></div>
    <div id="table"> <!-- Your table here --> </div>
    <div id="right"></div>
</div> 
```

并添加一些 CSS：

```
#table{
    float: left;
    width: 50%;
    height: 200px;
}

#left{
    float: left;
    background: #3f3;
    width: 25%;
    height: 200px;
    background-position: right;
}

#right{
    float: left;
    background: #f3f;
    width: 25%;
    height: 200px;
    background-position: left;
} 
```

**在这里小提琴：http: [//jsfiddle.net/ycS2N/](http://jsfiddle.net/ycS2N/)**

# drupal - 如何在 drupal 7 中创建一个词汇块？

> ID：13330750
> 
> 赞同：1
> 
> 时间：2012-11-11T11:38:21.453
> 
> 标签：drupal, drupal-7, taxonomy

我必须在 Drupal 7 中创建一个块，我想在其中显示没有子项的词汇表。

我如何创建它？

任何帮助将不胜感激。

块应该是这样的 -

词汇-1

词汇-2

词汇-3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T13:01:34.443

通常，最简单的解决方案是创建分类术语视图并根据您的需要进行排序和过滤。

Views 提供了分类术语（带深度）字段，以便轻松处理父/子关系。

PS：您的块示例仅显示词汇表，而不是它们的术语及其子术语。考虑修改它，以便更清楚您需要什么。

# java - 基本休眠全选语法

> ID：13330752
> 
> 赞同：3
> 
> 时间：2012-11-11T11:38:25.997
> 
> 标签：java, database, hibernate, exception, jpa

我正在尝试使用休眠从我的数据库中检索数据，但它一直抛出异常

> 2012-11-11 11:35:45,943 [main] 错误 com.storage.hibernate.DatabaseAccessRequestsImpl - 出现错误 javax.persistence.PersistenceException：org.hibernate.exception.SQLGrammarException：无法执行查询

```
@Override
public List<Trade> requestPeriod() {
    List<Trade> trades = null;
    EntityManager manager = emf.createEntityManager();
    Query query = manager.createQuery("from trade"); 
    try{
        trades = query.getResultList();
    }
    catch(PersistenceException e){
        logger.error("there was an error " + e);
    }
    catch(SQLGrammarException e){
        logger.error("there was an error " + e);
    }
    return trades;
} 
```

我猜我使用的语法`select all`不正确，但是环顾四周后我看不到替代方法吗？

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-11T12:01:22.123

它应该是`"from Trade"`（大写 T），因为 Trade 是映射类的名称。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-11T11:53:41.683

请注意，在 JPA 中，QL`SELECT`子句是强制性的，根据：[*10.2.1.1。JPQL 选择语句*](http://docs.oracle.com/html/E24396_01/ejb3_langref.html#ejb3_langref_select)：

> 选择语句是由以下子句组成的字符串：
> 
> *   一个 SELECT 子句，它确定要选择的对象或值的类型；
>     
>     
> *   一个 FROM 子句，它提供指定查询的其他子句中指定的表达式所适用的域的声明；
>     
>     
> 
> [...]
> 
> 在 BNF 语法中，选择语句定义为：
> 
> ```
> select_statement ::= select_clause from_clause [where_clause] [groupby_clause] [having_clause] [orderby_clause] 
> ```

裸`from Trade`语法是特定于 Hibernate 的，为了符合规范，您应该始终使用：

```
select t from Trade t 
```

# prestashop - 多个域名的 Prestashop multishop 功能

> ID：13330753
> 
> 赞同：0
> 
> 时间：2012-11-11T11:38:31.093
> 
> 标签：prestashop

如果后端打开，比如说：[http](http://testshop1.com) ://testshop1.com ，我该如何管理网上商店：[http](http://testshop2.com) ://testshop2.com ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T17:19:00.967

只需在两个域上安装 prestashop，将图像复制到 frontoffice 域，然后确保 settings.inc.php 正确。

# css - 如何定位平面层次结构中的特定兄弟姐妹组？

> ID：13330757
> 
> 赞同：6
> 
> 时间：2012-11-11T11:39:07.183
> 
> 标签：css, css-selectors

假设你有这个 HTML：

```
<h1>Header 1</h1>
<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p>
<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p>
<h1>Header 1</h1>
<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p>
<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p>
<h1>Header 1</h1>
<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p>
<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p> 
```

请注意，层次结构是扁平的。

现在尝试选择`<p>`元素的“中间对”。这可能吗？我实在想不通怎么做。

此选择器仅抓取`<p>`以下的第一个`<h1>`：

```
h1:nth-of-type(2) + p 
```

但是这个选择器会抓取正确的`<p>`元素对*以及*出现在我们想要的对之后的所有以下`<p>`元素：

```
h1:nth-of-type(2) ~ p 
```

可能吗？

*没有 JavaScript。没有标记更改。通用解决方案。允许任意数量的`<h1>`s 或`<p>`s，在这种情况下，数字 2 是任意的。*

我在想也许这可以使用一些使用`:not()`选择器，但我似乎无法弄清楚。有点像选择“一般兄弟姐妹”，然后根据需要排除，或类似的东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-11T11:43:56.433

由于一般同胞组合器的工作方式，不可能将同胞的选择限制在特定范围或组内，即使是连续的同胞也是如此。即使`:not()`选择器在这里也没有任何帮助。

您*将*不得不使用 JavaScript 来定位正确的元素。jQuery 的[`.nextUntil()`方法](http://api.jquery.com/nextuntil)立即浮现在脑海中。

# c# - 为什么我的错误没有被捕获？

> ID：13330758
> 
> 赞同：2
> 
> 时间：2012-11-11T11:39:31.813
> 
> 标签：c#, error-handling

我有一个包含**Phone**对象的类。

电话是一个虚拟电话，在我的类的构造函数中，我传入了我希望连接的虚拟电话的 IP 地址和端口。

在构造函数中，我运行了一个名为**Connect**的方法。在**Connect**方法中，我从电话的 IP 地址/端口组合中实例化一个**IPEndPoint对象，然后实例化一个****Socket**对象，并运行 Socket 对象的**Connect****方法**，传入我的**IPEndPoint**作为参数。

 ****如果电话服务器没有为特定电话（不是我的工作）正确配置，则连接被拒绝，并抛出**SocketException 。**我试图捕捉这个异常。

这是一个 Windows 窗体应用程序。在 Form 对象的范围内，但在任何构造函数/方法的范围之外，我将手机作为未实例化的私有字段，如下所示（iPhone 是我手机使用的接口）：

```
private IPhone _phone; 
```

我有一个名为**SetupPhone**的方法，我在这里实例化我的电话对象，并试图在这里捕获异常：

```
private void SetupPhone()
{
    try
    {
        _phone = new Phone(AgentDetails.IPAddress, AgentDetails.Port);
    }
    catch(SocketException ex)
    {
        Log.LogException("Error mapping phone to port", ex);
        ShowBaloonTip("An error occured starting CTI. Please select your name from the list to try again", ToolTipIcon.Error);

        ChangeUser();
        return;
    }

    //Subscribe to Phone events here
} 
```

这是电话对象的构造函数：

```
public Phone(string ipAddress, int port, string password = "FooBar")
{
    Connect(ipAddress, port, password);
} 
```

这是连接方法：

```
public void Connect(string ipAddress, int port, string password)
{
    _phone = new IPEndPoint(IPAddress.Parse(ipAddress), port);
    _socket = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.IP);

    _socket.Connect(_phone);

    //Redacted
} 
```

在未正确配置的电话上，我的 SocketException 如下所示：

![例外](../Images/4418d52e8da8500e257afbc450a8aba2.png)

我是否认为在对象构造函数中运行的任何方法引发的任何异常都应该被放置在该对象实例化周围的 try/catch 块安全地捕获？还是不是这样？我想捕捉实例化我的对象时可能发生的任何错误，这不可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T11:47:28.897

[http://www.blackwasp.co.uk/VSBreakOnException.aspx](http://www.blackwasp.co.uk/VSBreakOnException.aspx)

> 在调试模式下使用 Visual Studio 的调试器运行程序并遇到异常时，默认行为是暂停执行，除非在 try/catch 块中处理了错误。可以针对每种异常类型修改此行为。

**调试模式异常**

> 在调试模式下执行软件时，Visual Studio 对抛出的异常的反应不同，具体取决于异常是在 try/catch/finally 块中处理还是未处理。使用默认配置时，未处理的异常会导致程序停止并显示异常详细信息。处理的异常不会导致程序停止。您可以通过在调试模式下执行以下代码来看到这一点。尽管在尝试除法时会引发 DivideByZeroException，但程序会继续。如果您注释掉 try 和 catch，异常会停止执行。

```
try
{
    int i = 0;
    int j = 1;
    Console.WriteLine(j / i);
}
catch
{
    Console.WriteLine("Caught an exception");
}
Console.ReadLine(); 
```

> 这种行为在大多数情况下都很有用。但是，有时您会想要忽略特定类型的异常，即使是在未处理的情况下，或者在通常会被忽略的已处理异常上中断。您可以使用“异常”对话框来控制它，可以通过从“调试”菜单中选择“异常”或按 Ctrl-Alt-E 来查看该对话框。
> 
> 对话框的主要区域以树状结构显示异常类型列表。树的分支可以展开以显示各种异常组和每个类别中的各个类型。每个例外和组显示两个复选框。如果勾选了“Thrown”复选框，程序将在遇到选定的异常或选定的一组异常时中断。这包括已处理的异常。如果勾选了“用户未处理”复选框，则只有在未处理异常时程序才会中断。要尝试这些选项，请在树结构中找到 DivideByZeroException 类型。要快速查找异常，请单击“查找”按钮并输入您要搜索的项目的部分名称。将找到第一个匹配项。如果这不是所需的例外，请单击“查找下一个”按钮以循环查看匹配项。找到 DivideByZeroException 后，检查相应的“Thrown”选项。如果您运行示例程序，您将看到程序在处理的异常上停止。

**重置全部**

> “例外”对话框中还有一些值得注意的选项。其中第一个是“全部重置”按钮。如果您更改了对话框中的选项以帮助调试应用程序，则可以通过单击此按钮将所有选项重置为其原始设置。

**配置自定义例外**

> 如果您定义了自己的异常类型，该类型继承了 Exception 类或其子类之一的功能，您可能希望使用对话框对其进行配置。由于它不是标准异常类型，因此默认情况下不会出现在列表中。但是，您可以通过单击“添加”按钮并提供详细信息来添加它。对于 .NET 异常，您应该确保从下拉列表中选择“公共语言运行时异常”选项。然后，您应该提供异常类的完全限定名称。例如，“MyNamespace.MyException”。****

# php - lp解决安装问题。操作系统

> ID：13330764
> 
> 赞同：0
> 
> 时间：2012-11-11T11:40:36.257
> 
> 标签：php, macos, lpsolve

我正在尝试使用以下命令安装 lpsolve：http://jeyroz.tumblr.com/post/605709794/lpsolve-php[所以](http://jeyroz.tumblr.com/post/605709794/lpsolve-php) ，我正在尝试执行命令：

```
$ phpize
$ ./configure --enable-maintainer-zts --with-phplpsolve[version]=../..
$ make
$ make test 
```

当我执行 phpize 时，它​​说：

```
configure.in:3: warning: prefer named diversions
configure.in:3: warning: prefer named diversions 
```

不确定这是否正常。

当我执行`./configure --enable-maintainer-zts --with-phplpsolve55=../..`时，它说：

```
WARNING: unrecognized options: --enable-maintainer-zts
and then there is some checking and error.
configure: error: Invalid phplpsolve55 library, make_lp() not found 
```

谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-11-25T04:15:05.297

该选项和相应的错误消息完全令人困惑，看起来好像您首先*需要*phplpsolve55 库才能*构建*phplpsolve55 库。

但这里不是这样。相反，它正在寻找 liblpsolve55.so：

```
checking lpsolve 5.5
  with-phplpsolve55=Insert path to lp_solve here            Include lpsolve Support... yes, shared
checking for make_lp in -llpsolve55... no
configure: error: Invalid phplpsolve55 library, make_lp() not found 
```

该`--with-phplpsolve55=../..`选项告诉`configure`在哪里可以找到头文件；它需要`liblbsolve55.so`在受信任的位置找到 lpsolve 库本身。在 Linux 上是 /lib 或 /usr/lib；在 Mac OSX 上，您可能需要将配置命令更改为：

```
DYLD_LIBRARY_PATH=../.. ./configure --enable-maintainer-zts --with-phplpsolve55=../.. 
```

有关更多信息，请参阅[此问题](https://superuser.com/questions/282450/where-do-i-set-dyld-library-path-on-mac-os-x-and-is-it-a-good-idea)。

# sql-server-2008 - INSERT 上的 SQL Server 存储过程错误

> ID：13330766
> 
> 赞同：0
> 
> 时间：2012-11-11T11:41:18.957
> 
> 标签：sql-server-2008, stored-procedures

我有一个简单的存储过程`INSERT`，最近我注意到我遇到了不寻常的错误，一个似乎不像

当我尝试编译以下存储过程时出现以下错误：

> *消息 137，级别 15，状态 2，过程 usp_AddArticleCategory，第 15 行
> 必须声明标量变量“@ArtcileCategoryActive”。*

这是我的代码：

```
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
-- =============================================
-- =============================================
CREATE PROCEDURE [dbo].[usp_AddArticleCategory]
    @ArticleCategoryName nvarchar(200),
    @LangID int,
    @ArticleCategoryActive bit,
    @Type nvarchar(100)
AS
    SET NOCOUNT ON;
BEGIN
    INSERT INTO art_Category (ArticleCategoryName,[LangID],ArtcileCategoryActive,[Type])
         VALUES (@ArticleCategoryName, @LangID, @ArtcileCategoryActive, @Type)
END 
```

表结构：

```
CREATE TABLE [dbo].[art_Category](
    [ArticleCategoryID] [int] IDENTITY(1,1) NOT NULL,
    [ArticleCategoryName] [nvarchar](200) NULL,
    [LangID] [int] NULL,
    [ArtcileCategoryActive] [bit] NULL,
    [Type] [nvarchar](100) NULL,
 CONSTRAINT [PK_art_Category] PRIMARY KEY CLUSTERED 
(
    [ArticleCategoryID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY] 
```

我比较了表列、数据类型，但我不确定为什么这个错误不断出现。

感谢您对此的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T11:44:52.593

你在声明；

```
ArticleCategoryActive 
```

和使用；

```
ArtcileCategoryActive 
```

指出不同？:)

# memory-management - Ptrace 和内存分配

> ID：13330767
> 
> 赞同：3
> 
> 时间：2012-11-11T11:41:25.553
> 
> 标签：memory-management, system-calls, ptrace

我已经玩了一段时间了`ptrace`。我遵循了一些教程，例如[this one](http://www.linuxjournal.com/article/6100)或[this one](http://www.ars-informatica.com/Root/Code/2010_04_18/LinuxPTrace.aspx)。到目前为止，当我有一个`ptrace`-d 子进程时，我能够：

*   检测系统调用并浏览寄存器。
*   借助. `PTRACE_PEEKDATA`_`ptrace`
*   借助. `PTRACE_POKEDATA`_`ptrace`

我的问题如下：假设我刚刚检测到一个`open`系统调用。由于存储在 ebx 寄存器中的地址，我可以修改要打开的文件的文件名。但是，我想知道是否可以将文件名更改为任何我想要的任何大小。如果我要更改的名称非常大（假设是原始文件名长度的 50 倍），我不会弄乱一些我不应该写的内存吗？我应该在孩子的记忆空间中“分配”一些记忆吗？如果是这样，这将如何完成？

请注意，子进程是一些用 执行的程序`execve`，我无法访问它的源代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T16:11:43.707

传递给 open 的路径名可以由程序动态分配（因此它在堆或堆栈的某处），或者如果它是编译时常量，它可以在只读部分中。无论哪种情况，您都不知道程序的其他部分可能正在使用它，因此更改其内容可能不是一个好主意。如果您写入超过当前长度，您肯定会覆盖相邻的内存（这可能会导致一些微妙的问题，例如损坏堆元数据或损坏其他随机分配对象）。

以下是一些关于如何在子进程中分配内存的随机想法（完全未经测试）：

*   代表它调用 mmap 系统调用（这可能会很棘手），但会给你一页（或更多）内存来玩
*   在当前堆栈中分配一些空间（不要更改孩子的寄存器，但使用您对孩子使用堆栈的哪一部分的知识将临时对象放入未使用的部分）。从技术上讲，子进程做同样的事情是合法的（因此您最终可能会破坏该数据），但不太可能。
*   在堆栈的远端隐藏东西，（再次假设孩子也没有玩这个把戏）。
*   我认为调用 malloc 并不容易，但我在谷歌上搜索“ptrace child allocate memory”时发现：[http](http://www.hick.org/code/skape/papers/needle.txt) ://www.hick.org/code/skape/papers/needle.txt （它找到了 malloc 使用的例程ELF 动态链接器并在此处构造调用以分配内存）。

# python - Google App Engine：一次发布一组实体

> ID：13330769
> 
> 赞同：1
> 
> 时间：2012-11-11T11:41:49.417
> 
> 标签：python, google-app-engine, templates

我正在尝试使用表单收集一组数据，但我不知道如何使用 POST 从表单中获取数据。提前致谢。该程序：

主文件

```
 from google.appengine.ext import db
    import webapp2
    import common

    class Company(db.Model):
        name: db.StringProperty()
        image: db.BlobProperty()
        url: db.URLProperty()

    class MainPage(webapp2.RequestHandler):
        def get(self):
            common.render(self, 'main.html', {'range': range(10)})

        def post(self):
            # How to do the following?
            for i in range(10):
                company = Company()
                company.name = self.request.get("name")
                company.image = self.request.get("image")
                company.url = self.request.get("url")
                company.put()            

    app = webapp2.WSGIApplication([('/', MainPage)], debug=True) 
```

main.html

```
 <form action="/"  method="post" enctype="multipart/form-data">
    <table>
    <tr><th></th><th>Company</th><th>Image</th><th>URL</th></tr>
    {% for i in range %}
      <tr>
        <td>{{ forloop.counter }}: </td>
        <td><input type="text" name="name" id="name" /></td>
        <td><input type="file" name="image" id="image" /></td>
        <td><input type="text" name="url" id="url" /></td>
      </tr>
    {% endfor %}
    </table>
    <input type="submit">
    </form> 
```

- 唐

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T12:56:09.373

`.getall(key)`应该为你做。

```
# All values for a key: ['a', 'b']
check_values = request.POST.getall('check') 
```

[Webapp2 请求数据](http://webapp-improved.appspot.com/guide/request.html)

# jquery - 如何加载 Rails 视图以在 Jasmine 中进行测试？

> ID：13330772
> 
> 赞同：3
> 
> 时间：2012-11-11T11:42:31.353
> 
> 标签：jquery, ruby-on-rails, coffeescript, jasmine, jasmine-jquery

以下代码在浏览器中运行，但如何使用 Jasmine 对其进行测试？单击 后`#opener`，它应该会显示一个 jQuery 对话框并进行 ajax 调用以加载内容：

```
$ ->
  $( "#dialog" ).dialog({ autoOpen: false });
  $( "#opener" ).click ->
    $( "#dialog" ).dialog( "open" );
    $( "#dialog" ).load('/content'); 
```

spec.js.coffee：

```
describe "Open Dialog Box", ->
  it "gets content from server", ->
    spyOn($, "ajax")
    $('#opener').click()
    expect($.ajax.mostRecentCall.args[0]["url"]).toEqual("/content") 
```

看法：

```
<div>
  <a id="opener" href="#">See Content</a>
</div>

<div id="dialog" title="Content"></div> 
```

它没有得到点击事件，所以似乎没有加载视图。如何加载视图进行测试？

在 Rails 3.2.2 和 Jasminerice 中工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T17:45:42.910

jasmine 用于 js 单元测试，如果您需要使用 dom 测试一些小东西，即如果插件正常工作，则可以使用固定装置，对于 rails 应用程序，我建议使用 capybara imo。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-12T16:51:11.190

Jasminerice 允许将任何放入其中的模板`spec/javascript/fixtures`视为固定装置。你只需要执行`loadFixture 'fixtureName'`. [Jasminerice 的夹具文档](https://github.com/bradphelan/jasminerice#fixtures)解释了更多。

我不会去渲染与`app/views`. 如果你做得对，你只依赖于可以在夹具中轻松复制的次要结构（类等）。如果您随后需要检查您的实际视图是否符合这些假设，您可以编写一个请求规范（遗憾的是，rspec 视图规范默认匹配器无法检查文档结构，尽管您始终可以依赖一些 nokogiri-fu。

如果你有一些部分，你可以依靠[`Jasminerice::HelperMethods`](https://github.com/bradphelan/jasminerice#helper-methods)提供一些方法/变量。

# jquery - 使用 JQuery 在 TR 中查找第一个带有文本的 TD

> ID：13330778
> 
> 赞同：13
> 
> 时间：2012-11-11T11:43:08.930
> 
> 标签：jquery, html, html-table

我正在使用 JQuery 遍历表中的所有 TR，

但并非所有行在第一个单元格中都有值。

```
<TR>
  <TD>3</TD>
  <TD>2</TD>
  <TD>1</TD>
</TR>
  <TD></TD>
  <TD>3</TD>
  <TD>2</TD>
<TR>
</TR>
<TR>
  <TD></TD>
  <TD></TD>
  <TD>3</TD>
</TR> 
```

我如何定位每行中不为空的第一个 TD 而不仅仅是第一个孩子？

谢谢！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-11T11:54:19.583

这是一个更简单、更优雅的解决方案：

```
$('tr').find('td:not(:empty):first').css('background', 'red');​ 
```

小提琴：http: [//jsfiddle.net/dandv/JRcEf/](http://jsfiddle.net/dandv/JRcEf/)

它只是在 jQuery 中说明了您的意思：“定位每个*非*空的*第一个”。* `td``tr`

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T11:47:40.330

`td`这会在 each中找到第一个非空白子项`tr`：

```
$("tr").each(function() {
    var $firstNonEmptyCell;

    $(this).children("td").each(function() {
        var $td = $(this);
        if ($td.text() === "") {
            $firstNonEmptyCell = $td;
            return false; // Breaks `each` loop
        }
    });

    // ...use `$firstNonEmptyCell` here
}); 
```

或者，如果您想要所有非空白的 jQuery 包装器，这是一个微不足道的用例[`filter`](http://api.jquery.com/filter/)：

```
$("tr").each(function() {
    var nonBlankCells = $(this).children("td").filter(function() {
        return $(this).text() !== "";
    });

    // Use `nonBlankCells` here
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T11:45:56.403

```
var tds = [];

$('#tableId tr').each(function()
{
  $(this).find('td').each(function()
  {
    if ( $(this).html() != '' )
    {
      tds.push($(this));
      return false;
    }
  });
}); 
```

瞧，在`tds`变量中你得到了你的 td 标签*

# regex - 正则表达式 - 单词分开？

> ID：13330781
> 
> 赞同：3
> 
> 时间：2012-11-11T11:43:40.790
> 
> 标签：regex

正则表达式问题：如果两个单词同时出现在一行中，是否可以匹配 - 但如果它们相隔超过三个单词，则不能匹配？

示例：match 和 apart 应该在“我尝试将单词分开匹配不成功”和“我尝试将两个单词分开匹配不成功”中匹配，但不在“我尝试将三个或更多单词分开匹配不成功”中匹配

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T11:48:05.283

每个词都可以用类似的东西来定义`\w+\s`。

最多可以写成三个字`(\w+\s){0,3}`

所以你的正则表达式可能看起来像

```
/match\s(\w+\s){0,3}apart/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T11:48:19.323

这应该有效：

```
match\s+(\S+\s){,2}apart 
```

`\s`是一个空白字符并且`\S`是一个非空白字符。对于单行方面，您可能希望更改`\s`为`[^\S\n\r]`as `\s`does 还包含换行符`\n`和`\r`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T11:47:20.440

当然。尽管这取决于您如何定义单词。比如说，您只会将字母视为单词，而将所有非字母视为分隔符：

```
firstword[^a-zA-Z\r\n]+(?:[a-zA-Z]+[^a-zA-Z\r\n]+){0,2}secondword 
```

`[a-zA-Z]`是任何字母字符。`[^a-zA-Z\s]`任何非字母、非换行符。这就是它的全部内容。

# asp.net-mvc - ASP.NET MVC 远程属性方法参数始终传递 null

> ID：13330783
> 
> 赞同：5
> 
> 时间：2012-11-11T11:43:50.587
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我有`AdvertiserNameAvailable`远程验证属性正在使用的这种方法。问题是在`AdvertiserNameAvailable`没有将输入值传递给方法`Name`参数的情况下调用了。当我进入调试方法时，我看到`Name`参数总是`null`.

```
 public JsonResult AdvertiserNameAvailable(string Name)
  {
      return Json("Some custom error message", JsonRequestBehavior.AllowGet);
  }

  public class AdvertiserAccount
  {
      [Required]
      [Remote("AdvertiserNameAvailable", "Accounts")]
      public string Name
      {
          get;
          set;
      }
  } 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-11T12:20:21.327

不得不添加`[Bind(Prefix = "account.Name")]`

```
public ActionResult AdvertiserNameAvailable([Bind(Prefix = "account.Name")] String name)
{
    if(name == "Q")
    {
        return  Json(false, JsonRequestBehavior.AllowGet);
    }
    else
    {
        return  Json(true, JsonRequestBehavior.AllowGet);
    }
} 
```

要找出您的前缀，请右键单击并检查您要验证的输入上的元素。寻找`name`属性：

```
<input ... id="account_Name" name="account.Name" type="text" value=""> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T12:25:04.573

```
[HttpPost]
[OutputCache(Location = OutputCacheLocation.None, NoStore = true)]
public ActionResult AdvertiserNameAvailable(string Name)
  {
    bool isNameAvailable = CheckName(Name);  //validate Name and return true of false
    return Json(isNameAvailable );     
  }

  public class AdvertiserAccount
  {
      [Required]
      [Remote("AdvertiserNameAvailable", "Accounts", HttpMethod="Post", ErrorMessage = "Some custom error message.")]     
      public string Name
      {
          get;
          set;
      }
  } 
```

还要注意：

> OutputCacheAttribute 属性是必需的，以防止 ASP.NET MVC 缓存验证方法的结果。

所以`[OutputCache(Location = OutputCacheLocation.None, NoStore = true)]`在你的控制器动作上使用。

# css - CSS 容器问题 - 背景未完整运行

> ID：13330784
> 
> 赞同：3
> 
> 时间：2012-11-11T11:43:53.460
> 
> 标签：css, background, containers

我在尝试让我的主容器（白色背景）伸展到内容的底部时遇到问题，它目前仅在标题中运行。我已经绞尽脑汁很久了，我尝试添加一个清晰的，并确保主容器中的所有容器都浮动但仍然没有乐趣。

这是一个实时网站，可以在[http://www.ridermagazine.co.uk查看](http://www.ridermagazine.co.uk)

我还注意到我的侧边栏已经下降到内容下方而不是显示在右侧，这让我相信我的数学错误，但我已经仔细检查了所有内容，似乎没有任何问题地方。

任何帮助都是极好的。

谢谢。

容器的 CSS 代码：

```
#page-wrap {
width: 926px; 
margin: 20px auto;
background-color:#fff;
padding:17px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T11:59:28.733

问题在于使用所有 float:left 指令。如果所有作为块元素的元素都是块元素，则不需要它们。例如，`h1`元素`header`不是块元素。似乎某处是`h1 {display: inline}`-例如全球。如果您在浏览器的检查器中将其覆盖为 h1 {display: block} 白色背景“正在增长”;-)。所以我的提示：删除所有浮动指令并重新开始编写。

记住：浮动是邪恶的 ;-)

如果你真的需要，就使用它。例如，如果您需要两个主要的 div 元素彼此相邻。还可以考虑使用溢出 ....

编辑：错误在 div 中`id="content"`。删除`float:left`，它的工作原理

这就是我对邪恶浮动元素的意思；-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T11:58:34.133

尝试添加：

```
<div class="clear"></div> 
```

在“page-wrap” div 的末尾。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T11:59:42.987

更准确的答案是

```
<div style="clear:both"></div> 
```

因为他没有提到他是否有一个名为 clear 的课程

“在“页面换行”div 的末尾。”

# facebook - 添加打开的图形元标记后，单击“喜欢”按钮不会产生任何结果

> ID：13330791
> 
> 赞同：0
> 
> 时间：2012-11-11T11:44:15.740
> 
> 标签：facebook, facebook-like, facebook-opengraph

我正在为客户网站上的所有项目添加动态按钮，它们现在可以工作（经过大量试验和错误），但它仍然要求用户确认。我尝试了 facebook 调试工具，它给了我一堆打开图形警告和应该修复的按钮警告。

[http://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fwww.bowmanmusic.be%2Fbowman%2F](http://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fwww.bowmanmusic.be%2Fbowman%2F)

因此，我将所有必需的开放图形元标记添加到我的页面头部，如下所示：

```
<meta property="fb:app_id" content="159728304104034" /> 
<meta property="og:title" content="Bowman" />
<meta property="og:type" content="band" />
<meta property="og:url" content="http://www.bowmanmusic.be/bowman" />
<meta property="og:image" content="http://www.bowmanmusic.be/bowman/images/bowman01.jpg" />
<meta property="og:site_name" content="Bowman Music" />
<meta property="og:description" content="Bowman website" /> 
```

现在它仍然要求用户确认，但它不再注册类似的东西，即它既没有出现在时间线中，也没有出现在事件日志中。

我正在加载 fb sdk，如下所示：

```
<script type="text/javascript" src="http://connect.facebook.net/en_US/all.js#xfbml=1"></script> 
```

这是我的like按钮的php：

```
echo "<div class=\"fbbutton\"><fb:like href=\"http://www.bowmanmusic.be/bowman/index.php?id=",$id,"\" send=\"false\" layout=\"button_count\" show_faces=\"false\"></fb:like></div>"; 
```

我想摆脱确认的需要，当然，类似的事件会出现在用户的时间线上。

现在有人如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T11:53:30.480

包含like按钮的方式不好（尤其是javascript SDK的同步包含）。请使用插件页面上的生成器：

> [https://developers.facebook.com/docs/reference/plugins/like/](https://developers.facebook.com/docs/reference/plugins/like/)

另外，我在您的页面上没有看到任何类似的按钮。所有菜单项都指向相同的图像。请记住，每个带有点赞按钮的页面都必须是公开的（而不是在用户登录或其他任何内容之后）。

顺便说一句，您应该为 Like 按钮使用 App Id（请参阅插件生成器），应该会阻止您获得确认。

...更不用说每个可以被喜欢的页面都必须具有正确的打开图形标签，而不仅仅是主页。因此，如果您想点赞“http://www.bowmanmusic.be/bowman/index.php?id=xxx”，您必须确保特定站点获得了正确的标签，包括带有索引的正确 url。 php之类的。无论如何，您应该重写这些网址，但这是另一个长篇故事......

# c# - 使用 Linq 查询 XML 文档

> ID：13330796
> 
> 赞同：2
> 
> 时间：2012-11-11T11:44:44.230
> 
> 标签：c#, xml, linq, xml-parsing, linq-to-xml

我正在尝试 Linq 一个 xml 文档，我无法查询内部元素，正如您从下面的代码中看到的那样，我正在尝试做什么。我想获取所有具有特定名称的记录...请帮助。

```
<?xml version="1.0" encoding="utf-8" ?>
<Student>

 <Person name="John" city="Auckland" country="NZ" />

 <Person>
    <Course>GDICT-CN</Course>
    <Level>7</Level>
    <Credit>120</Credit>
    <Date>129971035565221298</Date>
 </Person>
 <Person>
    <Course>GDICT-CN</Course>
    <Level>7</Level>
    <Credit>120</Credit>
    <Date>129971036040828501</Date>
 </Person>
</Student> 
```

现在源

```
class Program
{
  static void Main(string[] args)
  {
     string path = Environment.GetFolderPath(Environment.SpecialFolder.Desktop);
     XDocument xDoc = XDocument.Load(path + "\\Student Data\\data.xml");

     IEnumerable<XElement> rows = 
        from row in xDoc.Descendants("Person")
             where (string)row.Attribute("Course") == "GDICT-CN"
             select row;

     foreach(XElement xEle in rows)
     {
        IEnumerable<XAttribute>attlist = 
          from att in xEle.DescendantsAndSelf().Attributes() 
               select att;

        foreach(XAttribute xatt in attlist)
        {
            Console.WriteLine(xatt);
        }
        foreach (XElement elemnt in xEle.Descendants())
        {
             Console.WriteLine(elemnt.Value);
        }
        Console.WriteLine("-------------------------------------------");
      }
   Console.ReadLine();
  }
 } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T11:47:49.393

用这个替换您的`LINQ where`查询 -

```
IEnumerable<XElement> rows = xDoc.Descendants().Where(d => d.Name == "Person"
                               && d.Descendants().Any(e => e.Name == "Course"
                                 && e.Value == "GDICT-CN")); 
```

# python - python中的索引错误

> ID：13330797
> 
> 赞同：4
> 
> 时间：2012-11-11T11:44:45.637
> 
> 标签：python, encryption

我是编程新手，我正在尝试使用 python 编写 Vigenère 加密密码。这个想法很简单，我的功能也是如此，但是在这一行中：

```
( if((BinKey[i] == 'b')or(BinKey[i+1] == 'b')): ) 
```

似乎我有一个索引问题，我不知道如何解决它。错误信息是：

```
IndexError: string index out of range 
```

我试图`i+1`用另一个等于 的变量替换索引`i+1`，因为我认为 python 可能正在重新增加`i`，但它仍然不起作用。

所以我的问题是：

1.  如何解决问题，我做错了什么？

2.  看看我的代码，我能学到什么来提高我的编程技能？

3.  我想为我的程序构建一个简单的接口（它将包含所有加密密码），而我从谷歌想出的只是 pyqt，但是对于一个非常简单的接口来说似乎工作量太大，所以有没有更简单的方法建立一个界面？（我正在使用 Eclipse Indigo 和 Python3.x 的 pydev）

Vigenère 加密函数（包含导致问题的行）是：

```
def Viegner_Encyption_Cipher(Key,String):
    EncryptedMessage = ""
    i = 0
    j = 0
    BinKey = Bin_It(Key)
    BinString = Bin_It(String)
    BinKeyLengh = len(BinKey)
    BinStringLengh = len(BinString)
    while ((BinKeyLengh > i) and (BinStringLengh > j)):
        if((BinKey[i] == 'b')or(BinKey[i+1] == 'b')):
            EncryptedMessage = EncryptedMessage + BinKey[i]
        else:   
            EncryptedMessage = EncryptedMessage + Xor(BinKey[i],BinString[j])
        i = i + 1
        j = j + 1
        if (i == BinKeyLengh):
            i = i+j
    return EncryptedMessage 
```

这是`Bin_It`功能：

```
 def Bin_It(String):
    TheBin = ""
    for Charactere in String:
         TheBin = TheBin + bin(ord(Charactere))
    return TheBin 
```

最后是`Xor`函数：

```
def Xor(a,b):
    xor = (int(a) and not int(b)) or (not int(a) and int(b))
    if xor:
        return chr(1)
    else:
        return chr(0) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T11:51:23.440

在您的 while 条件下，您确保`i < len(BinKey)`. 这意味着这`BinKey[i]`将是有效的，但`BinKey[i+1]`在循环的最后一次迭代中将无效，因为您将访问`BinKey[len(BinKey)]`，这是字符串末尾的一个。python中的字符串从包含开始`0`和结束`len-1`。

为避免这种情况，您可以将循环标准更新为

```
while BinKeyLength > i+1 and ...: 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-11T11:51:35.103

你可以改变

```
while ((BinKeyLengh > i) and (BinStringLengh > j)): 
```

至

```
while ((BinKeyLengh > i-1) and (BinStringLengh > j)): 
```

或改变

```
if((BinKey[i] == 'b')or(BinKey[i+1] == 'b')): 
```

至

```
if((BinKey[i] == 'b') or (BinKeyLengh > i-1 and BinKey[i+1] == 'b')): 
```

这将避免尝试进入`BinKey[BinKeyLength]`超出范围的 。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-11T12:07:41.910

> 看看我的代码，我能学到什么来提高我的编程技能？

在索引上循环不是惯用的 Python。最好在可能的情况下循环遍历迭代器的*元素*。毕竟，这通常是您感兴趣的：`for i in...`通常后面跟着`my_list[i]`.

在这个例子中，你应该使用内置函数[`zip`](http://docs.python.org/2/library/functions.html#zip)（或者[`itertools.izip`](http://docs.python.org/2/library/itertools.html#itertools.izip)如果你的代码是惰性的，虽然这在 Python 3[中不是必需](http://docs.python.org/3.3/library/functions.html#zip)的），它为你提供来自两个或多个迭代器的值对，并在最短的一个时停止筋疲力尽的。

```
for key_char, string_char in zip(BinKey, BinString):  # takes values sequentially from
                                                      # BinKey and BinString
                                                      # and binds them to the names
                                                      # key_char and string_char
    # do processing on key_char and string_char 
```

* * *

如果您真的*必须*对索引执行`while`循环，则将测试反过来进行，以便更清楚您在做什么。相比

```
while len(BinKey) > i and len(BinString) > j:  # this looks like len(BinKey) and
                                               # len(BinString) are varying and you're
                                               # comparing them to static variables i and j 
```

和

```
while i < len(BinKey) and j < len(BinString):  # this looks like you're varying i and j
                                               # and comparing them to len(BinKey) and len(BinString) 
```

哪个更好地传达了循环的目的？

* * *

最后，条款

```
if (i == BinKeyLengh):
    i = i+j 
```

似乎什么也没做。如果`i == BinKeyLength`那么`while`循环无论如何都会停止。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-11T11:58:11.993

正如 Python 解释器所说，我认为您的错误是您访问了无效的数组位置。为了解决这个问题，与人们所说的不同，您应该将代码更改为

`while (BinKeyLength > i+2 and ...):`

这是因为在最后一步中，BinKeyLength = i+2，那么 i+1 就是 BinKeyLength-1，也就是你数组的最后一个位置。

关于您的编程技能，我向您推荐两件事：

*   成为代码。听起来很神秘，但这里缺少的最重要的事情是弄清楚使用了哪些索引号。
*   正如 rubik 所说，遵循一些风格指南，如[PEP8 风格指南](http://www.python.org/dev/peps/pep-0008/)。

# c++ - 将函数指针插入 QMap (Qt)

> ID：13330806
> 
> 赞同：1
> 
> 时间：2012-11-11T11:46:23.750
> 
> 标签：c++, qt, function-pointers, qmap

我正在为 Qt 中的 REST API 创建某种路由器，并且在将函数指针插入 QMap 时遇到问题。

我有`IModule`派生其他模块的类。重要的行`IModule.h`是

```
typedef QByteArray* (*IBusAction)(IBus * , ProxyRequest *);

class IModule : public QObject
{
   Q_OBJECT

  protected:
    QMap<QString , IBusAction > *m_actions; 
```

然后我有`UserModule`它来自`IModule`并在`.cpp`文件中我有这些行：

```
QByteArray* UserModule::create(IBus *bus, ProxyRequest *req)
{
}

QByteArray* UserModule::show( IBus *bus, ProxyRequest *req)
{
}

UserModule::UserModule(QObject *parent) :
IModule(parent)
{

    // register functions
    m_actions->insert("show", &UserModule::show);
    m_actions->insert("create", UserModule::create);

} 
```

所以我尝试了两个选项，如何在没有它的情况下将函数放入带有引用符号的 QMap 中，但两者都不起作用。我收到错误：`no matching function for call to 'QMap<QString, QByteArray* (*)(IBus*, ProxyRequest*)>::insert(const char [5], QByteArray* (UserModule::*)(IBus*, ProxyRequest*))'`

我花了几个小时来解决这个问题，尝试了许多不同的方法来解决它，但没有成功。

所以我会很高兴收到任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T12:00:46.610

你`IBusAction`是一个指向函数的类型。这与指向成员函数的指针不兼容。

当您调用成员函数（如您的`UserModule::create`函数）时，它需要一个额外的（“不可见”）参数：调用函数的实例（`this`指针）。

您基本上有三个选择：

*   更改`IBusAction`为指向成员函数的指针`UserModule`。不过，您只能使用该类的功能。

    ```
    typedef QByteArray* (UserModule::*IBusAction)(IBus * , ProxyRequest *); 
    ```

*   制作函数`static`（这会改变代码的语义）

*   使用独立函数（顶层，不是类的成员）而不是成员函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T13:03:58.597

C++ 中指向成员函数的指针通常比它的价值更麻烦。理智的替代方法是使用类而不是方法，并保留指向实例的指针而不是方法。

Qt 特定的替代方法是使用基于 QObject 的类的可调用方法，您可以通过字符串名称调用它，使用 QObject::invokeMethod，回避许多类型问题。

# scala - 来自周围范围的隐式参数解析

> ID：13330808
> 
> 赞同：2
> 
> 时间：2012-11-11T11:47:10.713
> 
> 标签：scala, implicits, spray-json

我不喜欢将隐式参数带入我的代码中，所以我想在使用它们的地方封装它们的使用。因此，我试图定义一个对象，该对象既包含对 spray-json 的调用和异常处理，又包含我的每个模型类的默认隐式 JsonFormats。但是，除非将隐式参数导入客户端调用代码，否则不会解析隐式参数，这正是我不希望它们出现的地方。这是我到目前为止所拥有的（它不能解决隐式格式化程序），有没有一种方法可以获得我想要的工作？

```
package com.rsslldnphy.json

import com.rsslldnphy.models._
import spray.json._

object Json extends DefaultJsonProtocol {

  implicit val personFormat = jsonFormat1(Person)
  implicit val animalFormat = jsonFormat1(Animal)

  def parse[T](s:String)(implicit reader: JsonReader[T]): Option[T] = {
    try { Some(JsonParser(s).convertTo[T]) }
    catch { case e: DeserializationException => None }
  }
} 
```

注意。JsonFormat 是 JsonReader 的一种

编辑：这是我根据@paradigmatic 的第二个建议（我无法开始工作，我仍然得到`Cannot find JsonReader or JsonFormat type class for T`）所写的内容。我错过了什么吗？

```
object Protocols extends DefaultJsonProtocol {
  implicit val personFormat = jsonFormat1(Person)
  implicit val animalFormat = jsonFormat1(Animal)
}

object Json {

  def parse[T](s:String): Option[T] = {
    import Protocols._
    try { Some(JsonParser(s).convertTo[T]) }
    catch { case e: DeserializationException => None }
  }
} 
```

作为记录，这是一个确实有效的代码片段，但我试图避免它，因为它需要太多的客户端代码（即它需要在范围内具有隐式）：

```
object Json extends DefaultJsonProtocol {
  implicit val personFormat = jsonFormat1(Person)
  implicit val animalFormat = jsonFormat1(Animal)
}

object ClientCode {
  import Json._
  def person(s: String): Person = JsonParser(s).convertTo[Person]
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-11T11:53:32.607

您可以在伴随对象中声明隐式：

```
object Person {
  implicit val personFormat: JReader[Person] = jsonFormat1(Person)
}
object Animal {
  implicit val animalFormat: JReader[Animal] = jsonFormat1(Animal)
} 
```

隐式解析规则非常复杂。[您可以在此博客文章](http://eed3si9n.com/revisiting-implicits-without-import-tax)中找到更多信息。但是如果编译器正在寻找一个 typeclass `T[A]`，它会（迟早）在 class/trait 的伴生对象中寻找它`A`。

**编辑：**如果问题只是范围“污染”的问题，你可以引入一些大括号。使用您的代码示例，您可以将函数解析称为：

```
package com.rsslldnphy.json

import com.rsslldnphy.models._
import spray.json._

object Json extends DefaultJsonProtocol {
  implicit val personFormat = jsonFormat1(Person)
  implicit val animalFormat = jsonFormat1(Animal)

  def parse[T](s:String)(implicit reader: JsonReader[T]): Option[T] = {
    try { Some(JsonParser(s).convertTo[T]) }
    catch { case e: DeserializationException => None }
  }
}

object JsonFacade {
    def optParse[T]( s: String ): Option[T] = {
      import Json._
      parse[T]( s )
    }
} 
```

这里隐含的只是“污染”`optParse`方法。

# matlab - Prewitt 滤波器实现 Matlab

> ID：13330810
> 
> 赞同：1
> 
> 时间：2012-11-11T11:47:16.090
> 
> 标签：matlab, image-processing, filtering, lowpass-filter

我正在尝试在 Matlab 中实现 Prewitt 滤波器。我知道 Matlab 已经有了这种过滤器，但我需要自己编写代码。下面是我的代码，唯一的问题是在过滤结束时我得到一个明亮的图像而不是看到边缘。我正在使用 Prewitt 过滤器的可分离性属性来实现过滤器。有任何想法吗？我将非常感谢您的帮助。

```
%% 3x3 Prewitt Filter
close all
imageIn = imread('images/Bikesgray.jpg');

imageGx = zeros(size(imageIn));
imageGy = zeros(size(imageIn));
imageOut = zeros(size(imageIn));

ny = size(imageIn, 1);
nx = size(imageIn, 2);
average = 3;

imshow(imageIn);

u = [];
v = [];

tic
%Compute Gx
%For every row use the mask (-1 0 1)
for i = 1:ny
    u = imageIn(i,:);
    v = zeros(1, nx);
    for k = 2:nx-1
        v(k) = (uint32(-1*u(k-1))+uint32(0*u(k))+uint32(u(k+1)));
    end
    v(1) = (uint32(-1*u(2))+uint32(0*u(1))+uint32(u(2)));
    v(nx) = (uint32(-1*u(nx-1))+uint32(0*u(nx))+uint32(u(nx-1)));
    imageGx(i,:) = v;
end
%For every column use the mask (1 1 1)
for j = 1:nx
    u = imageGx(:,j);
    v = zeros(ny, 1);
    for k = 2:ny-1
        v(k) = (uint32(u(k-1))+uint32(u(k))+uint32(u(k+1)));
    end
    v(1) = (uint32(u(2))+uint32(u(1))+uint32(u(2)));
    v(ny) = (uint32(u(ny-1))+uint32(u(ny))+uint32(u(ny-1)));
    imageGx(:,j) = v;
end
%Compute Gy
%For every row use the mask (1 1 1)
for i = 1:ny
    u = imageIn(i,:);
    v = zeros(1, nx);
    for k = 2:nx-1
        v(k) = (uint32(u(k-1))+uint32(u(k))+uint32(u(k+1)));
    end
    v(1) = (uint32(u(2))+uint32(u(1))+uint32(u(2)));
    v(nx) = (uint32(u(nx-1))+uint32(u(nx))+uint32(u(nx-1)));
    imageGy(i,:) = v;
end
%For every column use  the mask (1 0 -1)
for j = 1:nx
    u = imageGy(:,j);
    v = zeros(ny, 1);
    for k = 2:ny-1
        v(k) = (uint32(u(k-1))+uint32(0*u(k))+uint32(-1*u(k+1)));
    end
    v(1) = (uint32(u(2))+uint32(0*u(1))+uint32(-1*u(2)));
    v(ny) = (uint32(u(ny-1))+uint32(0*u(ny))+uint32(-1*u(ny-1)));
    imageGy(:,j) = v;
end

toc

figure
imshow(imageGx, [0 255]);

figure
imshow(imageGy, [0 255]);

%Compute the magnitude G = sqrt(Gx^2 + Gy^2);
imageOut(:,:) = sqrt(imageGx(:,:).^2 + imageGy(:,:).^2);
figure
imshow(imageOut, [0 255]); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T17:39:16.097

太糟糕了，您没有使用 convn（卷积），因为加权和只是尖叫它。简而言之，您`Gx,Gy`通过在图像矩阵上使用 convn 生成，使用适当的内核，如[wikipedia中所述](http://en.wikipedia.org/wiki/Prewitt_operator)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T18:01:52.443

解决方案非常明显，但我花了一些时间才弄清楚。我所做的只是更改`uint32`to并确保在将值从to`int32`更改后执行操作（例如乘以 -1）。`uint32``int32`

# ajax - 从元素中将变量写入会话？

> ID：13330817
> 
> 赞同：0
> 
> 时间：2012-11-11T11:47:48.693
> 
> 标签：ajax, cakephp, session-variables

我有一个通过 ajax 在我的“posts/add”视图上呈现的元素。该元素使用 jQuery 计算用户的点击次数并将其保存在一个变量中（我们称之为 $clickCount）。

现在，我想将 $clickCount 传递回 /add 视图，这样我就可以将它与其他几个表单输入一起保存到数据库中。

我将 $clickCount 传递给控制器​​（通过 Ajax）并尝试在会话中保存，但 /add 视图似乎根本看不到它。就好像元素有一个完全不同的会话（这对我来说没有意义？）。因此，即使我将变量传递回我的控制器，我也无法从帖子/添加视图中访问它。

我花了太多时间在这上面，我真的希望有人能提供帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T11:19:50.163

听起来可能是因为您正在进行 ajax 调用以保存会话变量，但是您必须记住您尚未刷新页面，因此页面上的会话没有更改，因此您的新会话值是还不能用于视图。

如果您不想在保存会话值后刷新页面，则需要将该值作为 ajax 请求的响应返回，并使用 JavaScript 将其添加到您的页面中。您可以将其写入隐藏的表单字段或其他适合您稍后将其保存到数据库中的东西。

或者，如果可能，在您首先发出 ajax 请求时将值保存到数据库中，并消除整个会话（如果这不会影响数据库）。

# java - JWS 客户端将文件写入 lib/ext

> ID：13330820
> 
> 赞同：0
> 
> 时间：2012-11-11T11:48:16.970
> 
> 标签：java, security, jnlp, java-web-start

`java.home\lib\ext`Web Start 应用程序是否可以（可能使用 Java 安全性）在客户端的 Windows XP 上写入文件？

无论 Windows 定义的用户凭据如何，我都需要这个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T11:55:52.830

我不认为这是可能的 - 虽然您可以将沙箱转义权限授予已签名的 web start java 应用程序，但这将以 Windows 用户权限运行，这不一定在“管理员”组中。

# c# - 使用mathematica在C#中绘图

> ID：13330823
> 
> 赞同：2
> 
> 时间：2012-11-11T11:48:49.823
> 
> 标签：c#, plot, wolfram-mathematica

我想通过 Mathematica 为我的课程项目绘制一些图形。项目中有代码：

```
 try
        {
            toCompute = @"Show[RegionPlot[-2 <= x1 && x1 <= 2
                          && -2 <= x2 && x2 <= 2, {x1, -2, 
                         2}, {x2, -2, 2}, PlotStyle -> RGBColor[0.7, 1, 1]], 
                        Table[ContourPlot[Sin[x1]*x2 == i, {x1, -2, 2},
                        {x2, -2, 2}], {i, -5, 5, 0.5}], PlotRange -> All]";

            Function.MathKernel.Compute(toCompute);
            if (Function.MathKernel.Graphics.Length > 0)
                Show(Function.MathKernel.Graphics[0]);
        }
        catch (Exception ex)
        {
            System.Windows.Forms.MessageBox.Show(ex.Message);
        } 
```

代码工作没有任何错误，但结果图像为空（只有背景没有图形）。如果我在 Mathematica 中键入 toCompure 字符串 - 它会绘制图形。

为什么会这样？

# jquery - 用于收集图像信息的 jquery 脚本

> ID：13330827
> 
> 赞同：0
> 
> 时间：2012-11-11T11:49:30.763
> 
> 标签：jquery, css

我只需要一个快速的建议。我之前发布过这个问题，但人们误解了我的意图。我不知道如何要求我想要的东西，所以请耐心等待。

我正在尝试找到一个可用于图片库的脚本，基本上用户可以选择将图片信息（如标题、文件名或其他）添加到“愿望清单”或“收藏夹”或“书签的地方。”

例如，假设他们可以右键单击缩略图，并有一个选项：“将此添加到愿望清单”。

另一个例子：想象一个 div 框，它是 position:fixed 的，它说：“将你想稍后查看的图像拖到这个框中。”

所以他们会建立一个“最喜欢的图像”的集合，这并不重要。

你明白我想弄清楚的吗？请给我一些我可以调查的事情的提示，谢谢。（在我发布的最后一个帖子中，有人指责我试图让其他人代表我编写脚本。我显然不是在要求这个。）谢谢。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T13:50:59.530

好吧，据我了解，您正在寻找在线图片库。您将需要服务器端开发，因为您将拥有需要在服务器端做出一些决定的功能。我对您的建议是您在网络上搜索诸如**ASP.NET Online Photo Gallery**或**PHP Online Photo Gallery**之类的术语。**您可以在Umbraco**等**CMS（内容管理系统）**中找到画廊的模板，但您必须进行一些开发才能获得您想要的内容，因为它们没有那些愿望列表或收藏夹列表。

 **告诉我是否可以提供更多帮助，Shakib**

# scope - simulink 中的范围丢弃前几个数据

> ID：13330828
> 
> 赞同：2
> 
> 时间：2012-11-11T11:49:49.403
> 
> 标签：scope, simulation, simulink

我有一个模拟集运行 30 秒，有几个范围。问题是运行前 20 秒的输出在模拟运行结束时被示波器丢弃。

如果我想查看这些输出，我必须将配置参数中的“停止时间”更改为 20 秒。我的“开始时间”始终设置为 0.0 秒。

有什么地方可以更改缓冲区设置之类的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T11:29:58.647

默认情况下，范围块将仅显示最后 5000 个数据点。如范围块的[文档](http://www.mathworks.com/help/simulink/slref/scope.html)中所述，您可以通过导航到范围参数对话框的“历史记录”选项卡来调整此设置。在那里，您将看到设置*Limit data points to last*。您可以增加显示的数据点的数量，或者简单地取消选中此设置以允许显示所有数据点。因为您在如此短的时间内运行模拟，所以在每个示波器上取消选中此设置可能非常好。

# actionscript-3 - 1120：访问未定义的属性

> ID：13330831
> 
> 赞同：1
> 
> 时间：2012-11-11T11:50:03.897
> 
> 标签：actionscript-3, flash

当我尝试从 videoPlayer 影片剪辑中访问按钮影片剪辑时，我收到此错误消息。它们不是嵌套的。单击 videoPlayer 按钮时，屏幕底部的按钮会移开，而 videoPlayer 则位于其先前的位置。在关闭 videoPlayer 时，我希望按钮从屏幕右侧补间，但我收到以下错误消息“1120：访问未定义属性 TweenMax.from(btn1, 3, {x:450, y:209.1, ease:Back.easeOut});。我的问题是我将在 as3 中使用什么来访问按钮的控制，以便在关闭 videoPlayer 影片剪辑时对它们进行补间。任何指针将不胜感激。

```
The flvPlayer script:-

stop();

closeBtn.addEventListener(MouseEvent.CLICK, closeVid)
closeBtn.buttonMode = true;

function closeVid(e:MouseEvent):void
{
    video.stop();
    gotoAndStop(1);
    TweenMax.from(btn1, 3, {x:450, y:209.1, ease:Back.easeOut});
}

**********************************************************************

The script from outside the videoPlayer or scene1:-

import com.greensock.*;
import com.greensock.easing.*;

var numberOfButtons:Number = 3

var startX:Number;
var startY:Number;

var currentButton:MovieClip

for (var i:int = 1; i <= numberOfButtons; i++)
    {

        this["btn"+i].buttonMode = true;
        this["btn"+i].mouseChildren = false;
        this["btn"+i].addEventListener(MouseEvent.MOUSE_OVER, doRollover)
        this["btn"+i].addEventListener(MouseEvent.MOUSE_OUT, doRollout)
        this["btn"+i].addEventListener(MouseEvent.CLICK, showbtnContent);
    }

function doRollover(e:MouseEvent):void
{
    TweenMax.to(this[e.target.name], 1, {scaleX:1.1, scaleY:1.1, ease:Elastic.easeOut});
}

// This function handles the Rollout event  
function doRollout(e:MouseEvent):void
{
    TweenMax.to(this[e.target.name], 1, {scaleX:1, scaleY:1, ease:Elastic.easeOut});
}

function showbtnContent(e:MouseEvent):void
{
    currentButton = this[e.target.name]
    switch (currentButton)
    {
        case btn1:
        TweenMax.from(audioPlayer, 1, {x:449, y:-112, ease:Back.easeOut});
        audioPlayer.gotoAndStop(2);
        audioPlayer.parent.setChildIndex(audioPlayer, audioPlayer.parent.numChildren-1);
        break;

        case btn2:
        TweenMax.from(mcGallery, 1, {x:450, y:300, scaleX:1, scaleY:1, ease:Back.easeOut});
        mcGallery.gotoAndStop(2);
        mcGallery.parent.setChildIndex(mcGallery, mcGallery.parent.numChildren-1);
        break;

        case btn3:
        TweenMax.to(btn1, 20, {x:450, y:777.1, ease:Elastic.easeOut});
        TweenMax.to(btn2, 16, {x:450, y:777.1, ease:Elastic.easeOut});
        TweenMax.to(btn3, 12, {x:450, y:777.1, ease:Elastic.easeOut});
        TweenMax.from(flvPlayer, 3, {x:1060, y:280, ease:Back.easeOut});
        flvPlayer.gotoAndStop(2);
        flvPlayer.parent.setChildIndex(flvPlayer, flvPlayer.parent.numChildren-1);
        break;
        }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T21:20:03.513

当您使用`gotoAndStop(1);`它时，它会移动到第一帧，其中不存在 btn1、btn2 和 btn3。

修复它会很困难，因为您需要将时间线从按住按钮的 MovieClip 或 Sprite 移动到单独的 MovieClip 中，这样就不会发生这种情况。

# php - 坚持一对一关系原则

> ID：13330832
> 
> 赞同：2
> 
> 时间：2012-11-11T11:50:12.323
> 
> 标签：php, doctrine, doctrine-orm, persistence, one-to-one

我有一个与坚持 OneToOne Doctrine2 关系有关的问题。

概述：

我有两个实体：UserEntity（配置文件）和 UserDataEntity（用户数据）。每个 UserEntity 都会有 UserDataEntity（但不是必需的），但是每个 UserDataEntity 必须有 UserEntity 所指的。

当我尝试保留 UserEntity 时，我收到一个错误：

> SQLSTATE[23502]：非空违规：7 BŁĄD：pusta wartość w kolumnie "id" narusza ograniczenie wymaganej wartości 这意味着用户表中的列“id”不能为空。令人困惑，因为此列已分配自动生成的主键策略。

下面是我的实体：

```
/**
 * A user.
 * 
 * @ORM\Entity
 * @ORM\Table(name="users")
 */
class UserEntity extends AbstractEntity
{
    /**
     * @ORM\Id
     * @ORM\Column(type="integer");
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    protected $id;

    /**
     * @ORM\Column(type="string")
     */
    protected $name;

    /**
     * @ORM\OneToOne(targetEntity="ModuleAdmin\Entity\TradesmanDataEntity", inversedBy="parent", cascade={"persist"})
     * @ORM\JoinColumn(name="id", referencedColumnName="data_id")
     */
    protected $data;

    public function setData(UserDataEntity $data)
    {
        $this->data = $data;
    }
} 
```

和用户的数据实体：

```
/**
 * A user's data.
 * 
 * @ORM\Entity
 * @ORM\Table(name="users_data")
 */
class UserDataEntity extends AbstractEntity
{
    /**
     * @ORM\Id
     * @ORM\OneToOne(targetEntity="ModuleAdmin\Entity\TradesmanEntity", mappedBy="parent", cascade={"persist"})
     * @ORM\JoinColumn(name="data_id", referencedColumnName="id")
     */
    protected $parent;

    /**
     * @ORM\Column(type="string")
     */
    protected $email;

    /**
     * @ORM\Column(type="string")
     */
    protected $phone;

    /**
     * Provides creation for new empty entity.
     * 
     */
    public function __construct(TradesmanEntity $parent)
    {
        $this->parent = $parent;
    }
} 
```

我的 PostgreSQL 数据库架构如下所示：

```
CREATE TABLE users
(
  id serial NOT NULL,
  name character varying(255) NOT NULL,
  CONSTRAINT users_pkey PRIMARY KEY (id )
);

CREATE TABLE users_data
(
  data_id integer NOT NULL,
  email character varying(255) NOT NULL,
  phone character varying NOT NULL,
  CONSTRAINT users_data_pkey PRIMARY KEY (data_id ),
  CONSTRAINT users_data_data_id_fkey FOREIGN KEY (data_id)
      REFERENCES users (id) MATCH SIMPLE
      ON UPDATE RESTRICT ON DELETE CASCADE
); 
```

我希望将约束保留在数据库级别，而不是 ORM。

# ruby-on-rails - 无法保存时间戳 - postgresql

> ID：13330835
> 
> 赞同：0
> 
> 时间：2012-11-11T11:50:43.770
> 
> 标签：ruby-on-rails, ruby, postgresql

我有以下代码片段：

```
class Foo    
  include DataMapper::Resource
  property :id, Serial
  property :timestamp, DateTime
 end 
```

我只想将当前时间转换为毫秒：

```
 class Time
   def to_ms
     (self.to_f * 1000.0).to_i
   end
 end

 def current_time
   time = Time.now
   return time.to_ms
  end

  time = current_time # => 1352633569151 
```

但是当我要保存具有上述时间戳的 Foo 时，它无法保存到数据库中，并且我没有收到任何错误消息。

```
foo = Foo.new
foo.timestamp = time
foo.save 
```

任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T12:01:38.603

您是否为您的`:datetime`财产使用了正确的格式？

应该是这样的：

```
DateTime.now.to_s
=> "2012-11-11T14:04:02+02:00" 
```

或“本机” DateTime 对象，没有任何转换。

DataMapper 将根据使用的适配器将其转换为相应的值。

此外，在保存项目时引发异常：

```
DataMapper::Model.raise_on_save_failure = true 
```

这是一个全局设置，即所有模型都会引发异常。

仅使某些模型的行为如下：

```
YourModel.raise_on_save_failure = true 
```

[http://datamapper.org/docs/create_and_destroy.html](http://datamapper.org/docs/create_and_destroy.html)

请参阅“保存失败时引发异常”一章

顺便说一句，在保存之前查看您的项目有什么问题，使用 and `item.valid?`and`item.errors`

```
foo = Foo.new
foo.timestamp = time
if foo.valid?
  foo.save
else
  p foo.errors
end 
```

我复制了您的代码并收到以下错误：

```
@errors={:timestamp=>["Timestamp must be of type DateTime"]} 
```

## 在此处查看[现场演示](http://cibox.org/slivu/stackoverflow?lang=ruby&file=timestamp-cant-be-saved-postgresql.rb&run=true)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T12:08:09.463

PostgreSQL 数据类型将是[`timestamp`或`timestamp with time zone`](http://www.postgresql.org/docs/current/interactive/datatype-datetime.html)。但这与你正在做的事情相矛盾。您将 epoch 值乘以 1000。您必须将其保存为`integer`或一些[数字类型](http://www.postgresql.org/docs/current/interactive/datatype-numeric.html)。

[有关在此相关答案中处理 Postgres 中时间戳的更多信息。](https://stackoverflow.com/a/9576170/939860)

我会按`timestamp with time zone`原样保存值（不乘法）。如果需要，您可以随时从中提取 ms。

如果您需要将 Unix 纪元值转换回时间戳，请使用：

```
SELECT to_timestamp(1352633569.151);
--> timestamptz 2012-11-11 12:32:49.151+01 
```

* * *

### 只需保存“现在”

**如果**您真的想保存“现在”，即当前时间点，那么让 Postgres 为您完成。只需确保数据库服务器具有可靠的本地时间 - 安装[ntp](http://en.wikipedia.org/wiki/Network_Time_Protocol)。这通常更可靠、准确和简单。

将[**`DEFAULT`**](http://www.postgresql.org/docs/current/interactive/sql-createtable.html)时间戳列的 设置为[`now()`](http://www.postgresql.org/docs/current/interactive/functions-datetime.html#FUNCTIONS-DATETIME-CURRENT)或[`CURRENT_TIMESTAMP`](http://www.postgresql.org/docs/current/interactive/functions-datetime.html#FUNCTIONS-DATETIME-CURRENT)。
如果您愿意`timestamp`，`timestamptz`您仍然可以使用`now()`，根据服务器时区设置将其转换为“本地”时间。或者，要获取给定时区的时间：

```
now() AT ZIME ZONE 'Europe/Vienna'  -- your time zone here 
```

或者，在您的特定情况下，因为您似乎只需要三个小数：`now()::timestamp(3)`or `CURRENT_TIMESTAMP(3)`or `CURRENT_TIMESTAMP(3) AT ZIME ZONE 'Europe/Vienna'`。
或者，如果您将列的类型定义为`timestamp(3)`，则所有时间戳值都将强制转换为该类型并自动四舍五入为 3 位小数。

所以这就是你所需要的：

```
CREATE TABLE tbl (
   -- other columns
  ,ts_column timestamp(3) DEFAULT now()
); 
```

该值是自动设置的**`INSERT`**，您甚至不必提及该列。
如果要更新它**`ON UPDATE`**，请添加如下[**触发器**](http://www.postgresql.org/docs/current/interactive/triggers.html)：

触发功能：

```
CREATE OR REPLACE FUNCTION trg_up_ts()
  RETURNS trigger AS
$BODY$
BEGIN
   NEW.ts_column := now();
   RETURN NEW;
END
$BODY$ LANGUAGE plpgsql VOLATILE 
```

扳机：

```
CREATE TRIGGER log_up_ts
BEFORE UPDATE ON tbl
FOR EACH ROW EXECUTE PROCEDURE trg_up_ts(); 
```

现在，*一切都*自动进行。
如果那不是您所追求的，[@slivu 的回答](https://stackoverflow.com/a/13330926/939860)似乎很好地涵盖了 Ruby 方面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T15:12:04.353

我不熟悉 PostgreSQL，但你为什么要分配一个 Fixnum ( `time`) 给`timestamp`（这是一个 DateTime）？在生成 SQL 之前，您的模型必须无法转换`time`为正确的 DateTime 值。

试试`foo.save!`。我很确定你会看到一个错误，要么是从 PostgreSQL 报告的，要么`1352633569151`是表列的无效值，要么你的模型会说它无法解析`1352633569151`为有效的 DateTime。

`foo.timestamp = Time.now`或者`foo.timestamp = '2012-11-11 00:00:00'`是可以工作的东西。

# android - 如何将图像存储在android中预定义的sqlite db中？

> ID：13330839
> 
> 赞同：0
> 
> 时间：2012-11-11T11:51:10.363
> 
> 标签：android, android-sqlite

我是 android 新手，所以对在 sqlite db 中处理图像知之甚少。我正在创建一个应用程序，我将在其中创建一个带有预填充数据的数据库，这意味着我将把该数据填充的数据库放在资产文件夹中，用户将在安装应用程序后直接开始使用它。所以我有大约 186 张来自不同国家/地区的旗帜图像，我需要在自定义列表视图中显示这些图像。你能告诉我如何将所有图像存储在 sqlite db 中并将其重新显示在 listview 上吗？我尝试使用一些 IDE 在数据库中插入图像，但它们的解码不起作用。请帮忙！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T12:18:53.347

试试这个首先你必须将所有图像以 blob 数据类型存储到 sqlite 数据库中，然后从数据库用户中检索以下代码

```
query_compnay_id="Select * From "+mStaticValues.company_master;
mCursor_company_detail=mDatabaseConnectionAPI.ExecuteQueryGetCursor((query_compnay_id));
mCursor_company_detail.moveToFirst();
byte[] by =mCursor_company_detail.getBlob(mCursor_company_detail.getColumnIndex(mStaticValues.image_data));
mBitmap=BitmapFactory.decodeByteArray(by, 0, by.length, null); 
```

# sql-server-2008 - 自引用外键是什么意思？

> ID：13330840
> 
> 赞同：6
> 
> 时间：2012-11-11T11:51:22.017
> 
> 标签：sql-server-2008, foreign-keys

我检查了一个遗留数据库，发现有几个外键引用了一个列本身。引用的列是主键列。

```
ALTER TABLE [SchemaName].[TableName]  WITH CHECK ADD  
CONSTRAINT [FK_TableName_TableName] FOREIGN KEY([Id])
REFERENCES [SchemaName].[TableName] ([Id]) 
```

它的意义是什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-11T12:16:23.403

```
ALTER TABLE [SchemaName].[TableName]  WITH CHECK ADD  
CONSTRAINT [FK_TableName_TableName] FOREIGN KEY([Id])
REFERENCES [SchemaName].[TableName] ([Id]) 
```

这个外键完全是多余的，没有意义，只需将其删除即可。它永远不会被违反，因为一行匹配自己验证约束。

在分层表中，关系将在两个不同的列之间（例如`Id`和`ParentId`）

至于为什么它很可能是通过使用可视化设计器创建的，如果您右键单击对象资源管理器中的“Keys”节点并选择“New Foreign Key”，然后关闭对话框而不删除创建的外键，然后制作一些打开的表设计器中的其他更改并保存它会创建这种冗余约束。

* * *

## 回答 #2

> 赞同：-7
> 
> 时间：2012-11-11T12:09:34.530

在某些情况下，这是减少模型冗余的首选方法。在使用自引用外键（如您的示例中所示）时，您可以在表中的行之间创建层次关系。注意当你从表中删除一行时会发生什么，级联删除可能会删除你仍然想要的行。使用这些类型的键将一些数据验证转移到 DB 模型，而不是让它成为程序/程序员的责任。有些服装更喜欢这种做事方式。我更喜欢确保程序和程序员负责——数据模型在生产环境中很难重构和升级。

# syntax-highlighting - 为 gedit 语法荧光笔使用非默认颜色 shema

> ID：13330843
> 
> 赞同：2
> 
> 时间：2012-11-11T11:52:14.153
> 
> 标签：syntax-highlighting, gedit

我编写了一个简单的 gedit xml lang 文件来突出显示源代码。当我使用像这样的结构时

```
<style id="comment" _name="Comment" map-to="def:comment"/>
<style id="keyword" _name="Keyword" map-to="def:keyword"/> 
```

它总是将评论涂成蓝色，将关键字涂成棕色。相反，我希望我的评论为绿色，关键字为红色。我怎样才能做到这一点？

我还注意到下面的一些模式`/usr/share/gtksourceview-2.0/styles`：

```
classic.xml  cobalt.xml  kate.xml  oblivion.xml  styles.rng  tango.xml 
```

如何在我的 lang 文件中使用这些？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T05:19:01.370

lang 文件不描述样式。语言定义了语言（这是关键字，这是评论等），样式描述了如何显示这些内容（将评论设为绿色，将关键字设为蓝色和粗体等）。最终用户可以根据偏好选择样式。

您可以在 Gedit 首选项对话框中选择一种样式。碰巧的是，“Kate”样式确实将注释颜色为绿色，关键字为红色，所以你应该使用那个。

请注意，存储样式和语言文件的路径在 Gedit 2 和 Gedit 3（GTK+ 2 和 GTK+ 3）中是不同的。

# javascript - DOM中的JQuery搜索和替换

> ID：13330844
> 
> 赞同：2
> 
> 时间：2012-11-11T11:52:17.260
> 
> 标签：javascript, jquery, html

我试图在 JQuery 中实现，一旦用户单击链接，例如属性 from`Feedback.aspx`将被删除并添加到`select``Default.aspx` `li``Feedback.aspx` `li`

```
<ul id="main_menu" class="main_menu ui-sortable">
            <li class="limenu select"><a href="Default.aspx"><span class="ico gray shadow home"></span><b style="">Home</b></a></li>
            <li class="limenu"><a href="OnlineUsers.aspx"><span class="ico gray shadow messenger"></span><b style="">Who is online?</b></a></li>
            <li class="limenu"><a href="Feedback.aspx"><span class="ico gray shadow hand_thumbsup"></span><b style="">Feedback</b></a></li>
            <li class="limenu"><a href="About.aspx"><span class="ico gray shadow info"></span><b style="">About</b> </a></li>
            <li class="limenu"><a href="UserDetails.aspx"><span class="ico gray shadow  user"></span><b style="">User Details</b> </a></li>
            <li class="limenu"><a href="ChangePassword.aspx"><span class="ico gray shadow password"></span><b style="">Change Password</b></a></li>
            <li class="limenu"><a href="Login.aspx"><span class="ico gray shadow power"></span><b style="">Logout</b> </a></li>
        </ul> 
```

**编辑**：我的新网址正在打开，所以我需要`Feedback.aspx`在新页面中找到添加`select`到它

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T11:53:57.510

这应该这样做：

```
$('li.limenu a').click(function(){
    $('li.limenu').removeClass('select');
    $(this).parent().addClass('select');
}); 
```

[示范](http://jsfiddle.net/JxFaM/)

我`e.preventDefault`在这个例子中添加了不跟随链接，我想你的例子使用默认目标来达到类似的效果。

如果您正在更改页面，最简单的解决方案是在打开页面时检查：

```
$(function(){
    var pathtokens = document.location.pathname.split('/');
    var page = pathtokens[pathtokens.length-1];
    $('li.limenu').removeClass('select'); 
    $('li.limenu a').each(function(){
        if ($(this).attr('href')==page) $(this).parent().addClass('select');
    });
}); 
```

# python - Python：将 SQLITE 列的缓冲区类型转换为字符串

> ID：13330846
> 
> 赞同：3
> 
> 时间：2012-11-11T11:52:33.003
> 
> 标签：python, sqlite, python-2.6

我是 Python 2.6 的新手。我一直在尝试在我的 Python 程序中获取格式为格式的日期*日期*时间值。`yyyy-mm-dd hh:m:ss`在检查 Python 中的列类型时，我收到错误：`'buffer' object has no attribute 'decode'`. 我想使用该`strptime()`函数来拆分日期数据并使用它，但我找不到如何将缓冲区转换为字符串。以下是我的代码示例（也可[在此处](http://pastie.org/5360165)获得）：

```
conn = sqlite3.connect("mrp.db.db", detect_types=sqlite3.PARSE_DECLTYPES)
cursor = conn.cursor()
qryT = """
    SELECT dateDefinitionTest FROM t
    WHERE IDproject = 4 AND IDstatus = 5
    ORDER BY priority, setDate DESC
"""
rec = (4,4)
cursor.execute(qryT,rec)
resultsetTasks = cursor.fetchall()
cursor.close()  # closing the resultset
for item in resultsetTasks:
    taskDetails = {}
    _f = item[10].decode("utf-8") 
```

我得到的例外是：

```
'buffer' object has no attribute 'decode' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T13:11:32.383

我不确定您的问题可能是什么。以下是您尝试实现的工作示例，希望对您有所帮助：

```
#!/usr/bin/env python

import datetime
import sqlite3

conn = sqlite3.connect(":memory:", detect_types=sqlite3.PARSE_DECLTYPES)
cursor = conn.cursor()
cursor.execute("CREATE TABLE t (dateDefinitionTest DATETIME)")
cursor.execute("INSERT INTO t VALUES (?)", (datetime.datetime.now(),))
query = "SELECT dateDefinitionTest FROM t"
cursor.execute(query)
for row in cursor.fetchall():
    dt = datetime.datetime.strptime(row[0], "%Y-%m-%d %H:%M:%S.%f")
    print(repr(dt))
    print(dt.strftime("%Y-%m-%d %H:%M:%S.%f"))
cursor.close() 
```

输出：

```
datetime.datetime(2012, 11, 11, 16, 40, 26, 788966)
2012-11-11 16:40:26.788966 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-09-13T16:12:46.500

您的问题的根本原因是认为从 Sqlite 数据库中获取的“缓冲区”对象为“字符串”对象，字符串对象具有 encode() 方法，但“缓冲区”对象没有此方法。您需要做的很简单：只需将“缓冲区”对象转换为字符串对象，这并不难，只需在代码中添加一行：

tempString=str(项目[10])

_f = tempString.decode("utf-8")

我今天也遇到了同样的问题，google了一下，直接到这里，还没有找到合适的答案。所以在这里提供。sqlite 记录数据的类型是缓冲区还是字符串，取决于我们如何构建数据库表，以及 sqlite 版本和 sqlite db 插件的版本，因此您的测试结果与 Pedro Romano 的不同。但无论如何，只需添加这一行：tempString=str(item[10])，它可以强制系统将其用作字符串。

# linux - 用于检查多个正在运行的进程的 Bash 脚本

> ID：13330848
> 
> 赞同：0
> 
> 时间：2012-11-11T11:52:50.373
> 
> 标签：linux, bash, shell

我制作了以下代码来确定进程是否正在运行：

```
#!/bin/bash
ps cax | grep 'Nginx' > /dev/null
if [ $? -eq 0 ]; then
  echo "Process is running."
else
  echo "Process is not running."
fi 
```

我想使用我的代码检查多个进程并使用列表作为输入（见下文），但卡在 foreach 循环中。

```
CHECK_PROCESS=nginx, mysql, etc 
```

使用 foreach 循环检查多个进程的正确方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T12:05:46.617

如果您的系统已经`pgrep`安装，您最好使用它而`grep`不是`ps`.

关于您的问题，如何遍历进程列表，您最好使用数组。一个工作示例可能是这样的：

（备注：避免大写变量，这是一个非常糟糕的 bash 做法）：

```
#!/bin/bash

# Define an array of processes to be checked.
# If properly quoted, these may contain spaces
check_process=( "nginx" "mysql" "etc" )

for p in "${check_process[@]}"; do
    if pgrep "$p" > /dev/null; then
        echo "Process \`$p' is running"
    else
        echo "Process \`$p' is not running"
    fi
done 
```

干杯!

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T12:01:20.413

使用单独的进程列表：

```
#!/bin/bash
PROC="nginx mysql ..."
for p in $PROC
do
  ps cax | grep $p > /dev/null

  if [ $? -eq 0 ]; then
    echo "Process $p is running."
  else
    echo "Process $p is not running."
  fi

done 
```

如果您只是想查看其中任何一个是否正在运行，那么您不需要 loo。只需将列表提供给`grep`：

```
ps cax | grep -E "Nginx|mysql|etc" > /dev/null 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-11T12:15:34.177

创建文件 chkproc.sh

```
#!/bin/bash

for name in $@; do
    echo -n "$name: "
    pgrep $name > /dev/null && echo "running" || echo "not running"
done 
```

然后运行：

```
$ ./chkproc.sh nginx mysql etc
nginx: not running
mysql: running
etc: not running 
```

除非你有一些旧的或“奇怪”的系统，否则你应该有**pgrep**可用。

# frequency - RapidMiner - 出现范围

> ID：13330854
> 
> 赞同：1
> 
> 时间：2012-11-11T11:53:31.467
> 
> 标签：frequency, rapidminer

我想按最频繁（最流行的 10 个）过滤我的结果（文档出现）。我怎么做？

![在此处输入图像描述](../Images/8c4fd253e52fbd346e577a3b2a8080e2.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T11:26:35.553

一种方法是使用`sort`运算符后跟`filter`. 例如，通过以下方式对样本 Iris 数据集进行排序和过滤`a1`：

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<process version="5.2.008">
  <context>
    <input/>
    <output/>
    <macros/>
  </context>
  <operator activated="true" class="process" compatibility="5.2.008" expanded="true" name="Process">
    <process expanded="true" height="417" width="675">
      <operator activated="true" class="retrieve" compatibility="5.2.008" expanded="true" height="60" name="Retrieve" width="90" x="45" y="30">
        <parameter key="repository_entry" value="//Samples/data/Iris"/>
      </operator>
      <operator activated="true" class="sort" compatibility="5.2.008" expanded="true" height="76" name="Sort" width="90" x="179" y="30">
        <parameter key="attribute_name" value="a1"/>
        <parameter key="sorting_direction" value="decreasing"/>
      </operator>
      <operator activated="true" class="filter_example_range" compatibility="5.2.008" expanded="true" height="76" name="Filter Example Range" width="90" x="313" y="30">
        <parameter key="first_example" value="1"/>
        <parameter key="last_example" value="10"/>
      </operator>
      <connect from_op="Retrieve" from_port="output" to_op="Sort" to_port="example set input"/>
      <connect from_op="Sort" from_port="example set output" to_op="Filter Example Range" to_port="example set input"/>
      <connect from_op="Filter Example Range" from_port="example set output" to_port="result 1"/>
      <portSpacing port="source_input 1" spacing="0"/>
      <portSpacing port="sink_result 1" spacing="0"/>
      <portSpacing port="sink_result 2" spacing="0"/>
    </process>
  </operator>
</process> 
```

# windows-8 - 启动另一个 Windows 商店应用程序

> ID：13330858
> 
> 赞同：3
> 
> 时间：2012-11-11T11:53:47.943
> 
> 标签：windows-8

当用户单击我的应用程序中的按钮时，是否可以启动不同的 Windows 商店应用程序？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T09:46:17.033

是的，您可以从您的应用程序（例如 Bing 地图）启动其他 Windows 应用商店应用程序。Maps 应用程序支持协议激活，这意味着您可以使用特殊的 url 语法从您自己的 Windows Store 应用程序中以编程方式调用 Maps 应用程序。

Windows 允许应用注册成为某个 URI 方案名称的默认处理程序。桌面应用程序和 Windows 应用商店应用程序都可以注册为 URI 方案名称的默认处理程序。您可以查看[http://devhammer.net/blog/w8wil-6-leverage-the-maps-app-for-location-based-features](http://devhammer.net/blog/w8wil-6-leverage-the-maps-app-for-location-based-features)来了解这个想法。

地图应用程序 uri 方案的官方文档，包括所有可用参数，可在以下位置找到：http: [//msdn.microsoft.com/en-us/library/windows/apps/jj635237.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/jj635237.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T14:47:15.450

遗憾的是，这是不可能的，因为不允许 Win-RT 应用程序启动其他应用程序。

有一种解决方法可以让您打开特定应用程序，如果它已注册为使用特定 URL 打开：

[http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj206987(v=vs.105).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj206987(v=vs.105).aspx)

我不确定它是否会有很大帮助，但您可以打开商店并使用以下命令转到特定的商店应用页面：

```
Launcher.LaunchUriAsync(new Uri("ms-windows-store:PDP?PFN=" + storeID), a); 
```

storeID 看起来像 '30416[AppName].[AppName]_94hq21bnosq1p' 并且可以从网上商店源代码中获取：

[http://apps.microsoft.com/webpdp/en-gb/app/Fhotoroom/4d91298a-07cb-40fb-aecc-4cb5615d53c1](http://apps.microsoft.com/webpdp/en-gb/app/Fhotoroom/4d91298a-07cb-40fb-aecc-4cb5615d53c1)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-19T11:29:02.390

是的，可以从您的应用程序启动任何现有的 Windows 商店应用程序，您只需导航到[http://www.windowsphone.com/url-of-existing-app](http://www.windowsphone.com/url-of-existing-app)即可。这将首先在浏览器中打开应用程序，而不是自动在商店本身中打开。

在按钮单击事件中编写以下代码

```
private void AnotherApp(object sender, RoutedEventArgs e)
    {
        WebBrowserTask task = new WebBrowserTask();
        task.URL = "http://www.windowsphone.com/en-us/store/app/all-base-to-all-base-converter/869cea08-3a99-4218-8d4f-a631c2fb8f53";
        task.Show();
    } 
```

应用程序将首先在浏览器中打开应用程序，然后自动将控件转发到它的商店。

# php - 从数据库中获取输入

> ID：13330870
> 
> 赞同：0
> 
> 时间：2012-11-11T11:55:23.317
> 
> 标签：php, mysql, database, codeigniter

我想问一下我做得对不对。

这是我模型中的代码：

```
function member_here()
{
$this->db->select('first_name');
$this->db->from('membership');
$this->db->where('username', 'username');

$q=$this->db->get();

if($q->num_rows() > 0) 
{
foreach($q->result() as $row) {
$data[]=$row;
    }
    return $data;
}
} 
```

那么，在我看来，这是我的代码：

```
 $CI =& get_instance();
$CI->load->model('membership_model');
$result = $CI->membership_model->member_here();
var_dump($result); 
```

我很困惑，因为如果我登录，我的名字不会出现在页面中。无论如何，如果我的代码是错误的。我如何从我正在使用的数据库中输出一些信息？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T12:00:43.107

```
if($q->num_rows() > 0) {
    $data = array();
    foreach($q->result() as $row) {
        $data[]=$row;
    }
    return $data;
} 
```

您需要在推入 $data 变量之前对其进行初始化..

# c# - 正则表达式模式中的相同变量

> ID：13330871
> 
> 赞同：2
> 
> 时间：2012-11-11T11:55:29.957
> 
> 标签：c#, regex

我想在正则表达式模式中使用相同的变量。

```
string Pattern = "<li.*?class=\".*?item\".*?>.*?<a.*?href=\"(?<link>.*?)\">(?<a1>.*?)>(?<title>.*?)(a1)"; 
```

例如，如果`"<span>"`在 a1 中，在 title 变量之后`"<span>"`应该变成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T12:10:41.627

如果您需要引用以前捕获的组

利用

```
\index//where index is the group number 
```

**或者**

```
\k<name>//where name is the name of the group 
```

所以在你的情况下应该是`\k<a1>`

* * *

正则表达式也不用于解析 HTML

使用[htmlagilitypack](http://htmlagilitypack.codeplex.com/)

# asp.net - 隐藏数据绑定的 RadGrid 行

> ID：13330876
> 
> 赞同：0
> 
> 时间：2012-11-11T11:55:56.607
> 
> 标签：asp.net, data-binding, telerik, radgrid, objectdatasource

我的 .aspx 页面名称 rgLowRise 中有一个 Telerik radgrid，并且我有一个 ObjectDataSource 作为 DataSource 集，例如`rgLowRise.DataSourceID = odsLowRise`. 这工作正常，但我希望它在第一次加载时不显示任何记录，我该怎么做？而且我必须使用`DataSourceID`而不是`DataSource`由于某些原因。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T13:35:42.230

您可以从标记或后面的代码 (Page_Load) 中删除 DataSourceID 并在稍后阶段设置，例如 Button_Click 或其他一些事件

```
protected void Button_Click(object sender, EventArgs e)
{
    rgLowRise.DataSourceID = odsLowRise; //until you click this button, the grid would display nothing
} 
```

# ruby-on-rails - Rails 中的无表模型

> ID：13330879
> 
> 赞同：2
> 
> 时间：2012-11-11T11:57:27.123
> 
> 标签：ruby-on-rails, activerecord

我想创建不需要数据库的无表模型。例如：

```
class Post < ActiveRecord::Base
  attr_accessible :body, :title, :language_id
  belong_to :language
end
class Language
  has_many :post
  ...
end 
```

将是 2 或 3 种语言。我不想加载数据库，是否可以手动在模型中创建语言？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T12:00:11.907

阅读这篇文章可能会有所帮助：http: [//yehudakatz.com/2010/01/10/activemodel-make-any-ruby-object-feel-like-activerecord/](http://yehudakatz.com/2010/01/10/activemodel-make-any-ruby-object-feel-like-activerecord/)。

通常，您的模型不需要从 ActiveRecord 继承，因为您可以包含 ActiveModel。

另一方面，您可以像这样保持简单：

```
class Langauge
  attr_accessor :posts
  def initialize
    @posts = []
  end

  def add_post(post)
    @posts << post
  end
end

lang = Language.new
lang.add_post(Post.new) 
```

# perl - Perl 程序在传入错误参数时打印 POD

> ID：13330882
> 
> 赞同：1
> 
> 时间：2012-11-11T11:57:34.207
> 
> 标签：perl, perl-pod

当传入的参数或参数数量不正确时，如何让 perl 程序打印 POD 内容？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-11T15:20:53.687

我会使用[Pod::Usage](http://p3rl.org/Pod%3a%3aUsage)模块

[Getopt::Long](http://p3rl.org/Getopt%3a%3aLong)模块有一个[很好的例子](https://metacpan.org/module/Getopt%3a%3aLong#Documentation-and-help-texts)来说明它的用法。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-11T12:00:04.107

您可以`exec("perldoc", $0);`在参数错误时调用。所以用户会得到`man`类似的帮助。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-11T12:06:29.997

如果它与您的程序有关，我认为您必须使用：

```
sub usage {
  print<<help
  Usage $0: description of your script
help
}

if (($#ARGV+1) != $count_args) { usage; } 
```

# android - 删除 ViewPager 中的项目

> ID：13330887
> 
> 赞同：0
> 
> 时间：2012-11-11T11:58:29.900
> 
> 标签：android, android-fragments

我有 ViewPager 和 FragmentStatePagerAdapter。我想动态更改 ViewPager 的内容。对于添加页面，我在 1 上使用简单的增加计数器，然后调用 FragmentStatePagerAdapter.notifyDataSetChanged()。但是如果我想删除页面：

```
destroyItem(viewPager, position, myAdapter.getItem(position)); 
```

收到错误：

> java.lang.IllegalStateException: Fragment MyPanel{40e80930} 当前不在 FragmentManager 中

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T12:50:38.667

上没有`destroyItem()`方法`ViewPager`。

*上*有一个`destroyItem()`方法`PagerAdapter`，但它是由 调用的`ViewPager`，而不是由你调用的。

# security - SIM 卡和认证上的 HTTP 服务器

> ID：13330888
> 
> 赞同：0
> 
> 时间：2012-11-11T11:58:32.123
> 
> 标签：security, http, certificate, x509certificate, sim-card

我想知道如何读取放入 SIM 卡中的证书（http://stackoverflow.com/questions/12705603/read-write-certificates-on-a-sim-card-ios），但事实是它取决于每个打电话时间算了，有点不方便。然后我碰到了这个报告，说你可以[在 SIM 卡上实现安全的 HTTP 服务器。](http://www.iaeng.org/publication/WCE2010/WCE2010_pp253-259.pdf)

我的问题：有人知道如何配置/使用这项技术吗？例如，*通过*http 检查证书？（欢迎任何文档！）

谢谢，

# delphi - 奇怪，当我从 DLL 调用函数时，应用程序无法启动但没有发现错误

> ID：13330890
> 
> 赞同：1
> 
> 时间：2012-11-11T11:58:33.443
> 
> 标签：delphi, delphi-xe2

在我的项目中，我有一个 Windows 应用程序和一个 dll。我这样写了dll：

```
library MyDLL;

uses
  System.SysUtils,
  System.Classes;

{$R *.res}

function Prova: string; export;
begin
  result := 'prova';
end;

exports Prova;

begin
end. 
```

在主程序中我调用了例程：

```
unit FrmMain;

interface

uses
 // declaration uses // 

function Prova: string; external 'MyDLL.dll';

type    
 // declaration type //

implementation

begin
  ...
  TAdvEdit1.Text := Prova;  // [1] // 
  ...
end;

end. 
```

当我编译所有项目时没有报告错误，并且状态报告成功，但应用程序没有启动。如果我删除线 [1] 那么它工作正常。通常，当我调用函数 Prova 时，应用程序不会启动。我能解决这个问题吗？非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T14:06:23.523

您描述的行为是您的应用程序无法加载时发生的情况。从调试器运行时，您会遇到静默失败。在没有调试器的情况下运行时，您将看到一条错误消息，“应用程序无法初始化...”。这将提供详细信息。

在您的情况下，似乎可能的原因是库加载器无法解析 DLL 的依赖关系。这就是应用程序在对外部函数的调用被删除时运行的原因。当您删除该调用时，您也删除了对外部 DLL 的依赖。通过确保可以加载 DLL 来解决问题。例如，将其放在与可执行文件相同的目录中。

调试器的静默失败相当令人沮丧。一旦你经历了几次，你就会知道该怎么做——在没有调试器的情况下运行以找出真正出错的地方。

我还建议您不要跨模块边界传递托管的 Delphi 字符串。这将迫使您对可执行文件和 DLL 使用相同的编译器。如果您要接受该约束，那么您也可以使用包。就您的代码而言，它需要使用 ShareMem 才能工作。但我不建议这样做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T12:18:32.877

您的程序和 DLL 有单独的内存管理器。作为一般规则，从 DLL 分配的内存不应在应用程序内部使用（反之亦然）。哪里来的分配？在Delphi中，“字符串”是托管类型，即当您将一些文本分配给字符串变量（在您的情况下为结果：='prova'）时，Delphi（在幕后）使用DLL的内存管理器为该字符串分配内存。然后，例如，如果您在主应用程序中分配其他文本值，则重新分配使用应用程序的内存管理器，这很糟糕，即应用程序的 MM 正在触及它尚未分配自己的内存。

**要解决此问题，您必须在应用程序**（.dpr 文件）和 DLL中包含“SimpleShareMem”（Delphi >= 2010 IIRC？）单元作为 USES 子句的第一个单元：

```
library MyDLL;

uses
  SimpleShareMem, // **MUST BE THE FIRST UNIT**
  System.SysUtils,
  System.Classes;
...

program YourApp;

uses
  SimpleShareMem, // **MUST BE THE FIRST UNIT**
  // declaration uses // 
```

此方法的示例可在“[开始 > 程序 > Embarcadero RAD Studio > 示例 > Delphi > RTL > SimpleShareMem](http://docwiki.embarcadero.com/CodeExamples/XE2/en/RTL.SimpleShareMem_Sample) ”中找到

您还可以使用 PCHAR 在 DLL 和 APP 之间传输字符串。

# django - 通过 Django 中的 oauth 流进行单元测试

> ID：13330894
> 
> 赞同：1
> 
> 时间：2012-11-11T11:58:49.267
> 
> 标签：django, unit-testing, oauth

我有一个 oauth 流程，其中用户授予对某个范围的访问权限，然后我的应用程序可以做一些事情。为此，我需要一个具有定义范围的访问令牌。我实现了这个（使用 django allauth 包）并且效果很好。但是...我想**测试**一下。这是我到目前为止所拥有的（请求包就像类固醇上的 urllib）：

```
 login = self.client.login(username='test_user', password='test')
    self.assertTrue(login)

    resp = self.client.post(reverse('oauth_login'))
    self.assertEqual(resp.status_code, 302)

    payload = {'session_key': 'email', 'session_password': 'pw', }

    resp2 = requests.post(resp['location'], data=payload)

    resp3 = self.client.get(reverse('do_stuff_with_access_token'))
    self.assertEqual(resp.status_code, 302) 
```

这里的问题是我没有在我的请求变量中获得访问令牌。我的猜测是我超出了应用程序的范围，而 Django 没有在其请求范围内获取变量。

您如何以优雅的方式对此进行测试？模拟 access_token 对我来说似乎有点不对劲。我现在正试图去 Selenium 填写表格，但到目前为止，即使这样也不是真正的成功......

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T21:17:46.553

向马克致敬！

在路上帮助任何人。嘲讽奏效了。在我的情况下（django 1.4），您需要将令牌添加到会话中。在网上可以找到很多不同的建议，但我喜欢简单的东西，这在 Django 中至少适用于测试套件：

```
session = self.client.session
session['request_token'] = {...}
session['access_token'] = {...}
session.save() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-02T01:33:30.280

我遇到了同样的问题，发现以下解决了我的困境：

```
user = User.objects.get(username='lauren')
client = APIClient()
client.force_authenticate(user=user) 
```

这直接取自 Django 文档：

[http://www.django-rest-framework.org/api-guide/testing/#force_authenticateusernone-tokennone](http://www.django-rest-framework.org/api-guide/testing/#force_authenticateusernone-tokennone)

不幸的是，在达到这一点之前进行了多次搜索。我希望这可以节省其他人一些时间。

# objective-c - 是否可以在 iOS 中调用子函数？

> ID：13330895
> 
> 赞同：1
> 
> 时间：2012-11-11T11:59:04.187
> 
> 标签：objective-c, ios, recursion, parent

我们有以下递归函数：

```
parent "function"
  {
  if (main condition)
  {
  if (condition1) call a child "function";
  if (condition2) call a child "function";
  if (condition3) call a child "function";
  if (condition4) call a child "function";
  } Else {
  exit from child function and return to the position in which she had been called in the parent function;
  }
  } 
```

如何实施？

# mysql - mysql C-API mysql_stmt_bind_param：如何在输入中传递二进制值？

> ID：13330897
> 
> 赞同：1
> 
> 时间：2012-11-11T11:59:18.047
> 
> 标签：mysql

我尝试在准备好的语句中调用带有二进制参数的过程。但它在所有情况下都失败了。

我可以在网上找到的所有示例都与输出二进制值有关，而不是与输入值有关。

我能怎么做 ？

提前致谢。

一个非常简单的程序：

```
CREATE PROCEDURE `testVarsGet2` (
    IN i_ulv BINARY(12),
  OUT o_cnt INT(11),
    OUT o_errno INT(11))
testVarsGet2:BEGIN
DECLARE t_ulv BINARY(12);

select `ulv` into t_ulv from `testVars`  where `ulv` =i_ulv;

IF  ROW_COUNT() = 0 THEN 
    SET o_errno = -1002;
    LEAVE testVarsGet2;
END IF;
select `cnt` into o_cnt from `testVars`  where `ulv` = i_ulv;

SET o_errno = 0;

LEAVE testVarsGet2;
END; 
```

如果 ulv 没问题， o_errno = 0 ，如果不是 o_errno =- 1002

命令行 ：

```
mysql> call testVarsGet2 (0x7124A57EF08100010000DF3F,@cnt , @err); select  @cnt, @err;
Query OK, 1 row affected (0.00 sec)

+------+------+
| @cnt | @err |
+------+------+
|    1 |    0 |
+------+------+
1 row in set (0.00 sec) 
```

或者

```
mysql> call testVarsGet2 (unhex('7124A57EF08100010000DF3F'),@cnt , @err); select  @cnt, @err;
Query OK, 1 row affected (0.00 sec)

+------+------+
| @cnt | @err |
+------+------+
|    1 |    0 |
+------+------+
1 row in set (0.00 sec) 
```

但是在 C/C++ 程序中，如果我使用语句，它会失败

```
 mysql_stmt_prepare(stmt, "call testVarsGet2 ( unhex(?), ? , ?)", strlen(..));

with 

const char * value = "7124A57EF08100010000DF3F"
len = 24;

    bind[0].buffer_type = MYSQL_TYPE_STRING;
    bind[0].buffer = (char *)value;
    bind[0].buffer_length = 32;
    bind[0].is_null= 0;
    bind[0].length= &len; 
```

或者

```
mysql_stmt_prepare(stmt, "call testVarsGet2 ( ?, ? , ?)", strlen(..));

value = "0x7124A57EF08100010000DF3F" 
```

或具有二进制值

```
const char * value = "7124A57EF08100010000DF3F"
len = 12

unsigned char * value_bin = hex2bin (value );

    bind[0].buffer_type = MYSQL_TYPE_BLOB;
    bind[0].buffer = (char *)value_bin;
    bind[0].buffer_length = 12;
    bind[0].is_null= 0;
    bind[0].length= &len; 
```

在所有情况下，我都会得到 o_errno = -1002

如何传递二进制值？？？？

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T22:33:14.347

*将我的评论变成答案。*

不应使用引号作为输出参数的占位符。相反，为每个输出参数提供一个用户变量，就像您在命令行版本中所做的那样。然后发出后续`SELECT`语句来检索这些用户变量的值。您可以将结果值绑定到您的 C 变量。

一旦您只输入参数，您应该能够按照您尝试的方式将它们绑定到您的 C 变量。

# c# - 水平滚动固定的页眉/页脚

> ID：13330903
> 
> 赞同：0
> 
> 时间：2012-11-11T11:59:45.187
> 
> 标签：c#, asp.net, css, header, html-table

我有一个设置为最小宽度为 960 像素并固定在页面顶部的标题。当用户将窗口缩小到小于 960 像素时，会出现水平滚动条，它应该是这样。但是，当用户水平滚动时，由于某些标题被切断，我希望能够以与页面相同的速率滚动标题......我非常希望我的标题垂直固定，而不是水平固定。

我查看了以下内容，但没有帮助：

[CSS：x轴上的固定位置但不是y？](https://stackoverflow.com/questions/2049845/css-fixed-position-on-x-axis-but-not-y)

[居中固定元素，但水平滚动](https://stackoverflow.com/questions/5250573/centering-a-fixed-element-but-scroll-it-horizontally)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-08T23:29:04.447

我知道这是一个过时的问题，不确定您是否已经弄清楚了，但想提交一个答案，以防其他人遇到同样的问题。

当您`fixed`在 CSS 中将内容设置为具有最小宽度时，它会相对于两个轴上的窗口锁定。当窗口的大小调整到小于最小宽度时，多余的页眉/页脚将被剪裁并且无法滚动到。不幸的是，没有办法仅在 CSS 中改变这种行为。但是，有一个简单的 jQuery 修复您的问题（假设您已经在页面上有其他将创建水平滚动条的内容）：

```
 $(window).scroll(function ()
    {
        $("header,footer").css('margin-left', -($(window).scrollLeft()) + "px");
    }); 
```

这将导致页眉和页脚（视情况而定）在 x 轴上以与滚动相反的方向移动，从而达到您想要的效果。

# canvas - 路径上的可点击区域

> ID：13330904
> 
> 赞同：1
> 
> 时间：2012-11-11T11:59:50.247
> 
> 标签：canvas, imagemap

有什么方法可以让区域点击图？

Image-map 不适合，因为应该考虑调整图像大小。

例如，我有 html 构造：

```
<a href="#">
    <img src="image.png" alt="image"/>
</a> 
```

CSS：

```
a { width: 30%; }
img{ width: 100%; } 
```

[图像，带区域集团](http://s2.hostingkartinok.com/uploads/images/2012/11/777c784582ee7c4ab396e3dade4063e9.jpg)

# php - 在课堂上使用 PDO 和 php 和 mysql

> ID：13330907
> 
> 赞同：0
> 
> 时间：2012-11-11T12:00:09.183
> 
> 标签：php, mysql, database, pdo

我正在尝试使用类在 php 中使用 PDO。

所以我定义了一个这样的配置文件

```
<?php
global $configVars;

    $configVars['online'] = false;  

    if(($_SERVER['SERVER_NAME'])!='localhost' and ($_SERVER['SERVER_NAME'])!='abc')
    {
$configVars['dbhost']       = "localhost";      
$configVars['dbuser']       = "dbuser";   
$configVars['dbpassword']   = "dbpass";     
$configVars['dbname']       = "dbname"; 

}
?> 
```

然后我定义了连接数据库的类

```
<?php
class dbClass{
var $dbHost,
      $dbUser,
        $dbName,
          $dbPass,
            $dbTable,
              $dbLink,
                $resResult,
                  $dbh,
                  $dbPort;  

        function dbClass(){
            global $configVars;
            $this->dbHost = $configVars['dbhost'];
            $this->dbUser = $configVars['dbuser'];
            $this->dbPass = $configVars['dbpassword'];
            $this->dbName = $configVars['dbname'];
            $this->connect_PDO();
        }

        function connect_PDO(){
            try {
            $dbh = new PDO('mysql:host='.$this->dbHost.';dbname='.$this->dbName.'', $this->dbUser, $this->dbPass);
            $dbh->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
            echo "Connected.";
            }
            catch(PDOException $e) {
            echo "I'm sorry Charlie, I'm afraid i cant do that.";
            file_put_contents('PDOErrors.txt', $e->getMessage(), FILE_APPEND);
            $dbh = null;
            }
        }
 } 
```

?>

现在我已经定义了另一个类来从表中选择记录

```
<?
class cms extends dbClass
{

function get_rec($id=0)
    {
        ($id==0?$addQuery="":$addQuery=" where id =".$id);
        $statement = $dbh->prepare("select * from TABLENAME :name order by id");
        $statement->execute(array(':name' => $addQuery));
        $row = $statement->fetchAll(); 
        return $row ;
    }   

}
?> 
```

现在当我像这样在我的 PHP 文件中使用这个函数时

```
<?php 
$objCMS=new cms();
$getCMS=$objCMS->get_rec(1);
echo $getCMS[0];
?> 
```

我得到了关注

```
Connected.
Fatal error: Call to a member function prepare() on a non-object in /Applications/XAMPP/xamppfiles/htdocs 
```

我试图从过去 2 天解决这个问题，但没有成功。

我是 PDO 的新手，想使用它。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T12:05:28.113

您在基类中声明了 $dbh，但没有特定范围，我认为它将默认为“私有”。因此在子类中不可见。

你也没有调用构造函数。在您的子类中添加对 'parent::__construct()' 的调用。 [http://php.net/manual/en/language.oop5.decon.php](http://php.net/manual/en/language.oop5.decon.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T12:17:50.247

你在解决这个问题上走错了方向。

如果要授予某些对象访问数据库的权限，则该对象需要访问提供与数据库交互的方法的数据库对象。你说对了。

但是，继承是“IS A”关系。而且您的CMS对象不是数据库类型的对象，并且与数据库对象的功能不一样吗？CMS 对象应该只使用数据库，这称为组合。这种关系也称为“HAS A”关系。

因此，您应该像这样使用组合，而不是在这里使用继承：

```
class CMS
{
    protected $db;
    // other CMS related stuff
}

$db = new PDO($dsn, $username, $password, $options);
$cms = new User($db); 
```

这样，您的 CMS 可以在不使用继承的情况下使用数据库。

*   谷歌关于组合与继承以及何时使用它。
*   还可以在这里查看这个答案： [PHP Mysqli Extension Warning](https://stackoverflow.com/questions/13276315/php-mysqli-extension-warning/13276735#13276735)
*   并阅读这篇文章并通过示例来理解为什么在为某些类提供与数据库交互的方式时组合是一种方法。

我知道这不是您问题的答案，但是您在解决问题方面走错了方向。我看到很多人只使用继承，所以要知道除了继承之外还有更多的东西可以让你的对象交互。在这种情况下，使用继承是错误的，因为您的 CMS 对象与数据库无关，它们不是相同的“类型”。CMS 应该只使用数据库。

希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T12:03:24.753

您需要`dbClass()`在构造函数中调用`cms`

将此添加到`cms`课程中

```
function cms() {
    parent::dbClass();
} 
```

并更改`get_rec`为：

```
$statement = $this->dbh->prepare("select * from TABLENAME :name order by id"); 
```

使用`$dbh`时需要将其引用为`$this->dbh`

您需要对您还需要更新的内容进行`$dbh`更改`$this->dbh``connect_PDO()`

# linux - bash 线程限制

> ID：13330911
> 
> 赞同：0
> 
> 时间：2012-11-11T12:00:41.663
> 
> 标签：linux, multithreading, bash

我必须为项目使用 clamAV 签名数据库编写病毒扫描程序。为了提高速度，我使用线程。（组合 & 并等待）我的代码是如何工作的：

它读取文件夹和子文件夹中的所有文件

```
function recursive_files()
{
files=$(find $folder_path -type f)
for f in $files
do
    raw_and_scan "$f" &
done
wait
} 
```

如您所见，每个文件都有一个线程。

```
function raw_and_scan()
{
raw_test_file $1
read_signature_db_by_line $1
} 
```

read_signature..读取签名库的每一行

```
 function  read_signature_db_by_line()
    {
    cat $signature_path | (while read LINE ; do
        stringtokenizer_line_db $LINE $1 $raw_file &
    done
    wait
    )  } 
```

如您所见，DB 的每一行都有一个线程。

我做了双线程实现，因为我看到了巨大的性能（使用时间基准）

当我将 50 个包含 50 行的文件扫描到数据库中时。它工作正常。

但是当我扫描我的主文件夹（800 个文件）时，它不起作用，更糟糕的是，我收到了一个警告（不能 fork() 了）并且我的计算机死机了，它需要重新启动。

我观察这个过程（htop）直到它工作了 5000 个任务。

您可以提交我的项目[https://github.com/peondusud/Bash.antivir](https://github.com/peondusud/Bash.antivir)

最后，我会使用数据库 65000 行扫描文件夹。

如果您有任何想法限制线程或类似的东西。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T12:09:53.140

您看到从单个进程（不是线程）到两个进程的巨大改进并不意味着您将使用 5000 个进程超快！实际上是相反的——如果你打算让进程做密集的工作，你应该将它限制在系统中 2* 数量的 cpu 内核（这是一个通用的经验法则）

# google-app-engine - 使用 JPA for GAE 自动生成的 id（密钥作为编码字符串）

> ID：13330914
> 
> 赞同：1
> 
> 时间：2012-11-11T12:00:42.553
> 
> 标签：google-app-engine, jpa, datanucleus, datastore

**如何在 JPA 实体（不是 JDO）中将 id 字段声明为“作为编码字符串的键”以在 GAE 数据存储中使用？**您可以找到[JDO](https://developers.google.com/appengine/docs/java/datastore/jdo/creatinggettinganddeletingdata?#Keys)的示例，但找不到 JPA 的示例。

只要在子父关系中使用实体，就不能声明 id 字段。

所以，我的实体是这样的：

```
@Entity
public class EntityClass {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Extension(vendorName="datanucleus", key="gae.encoded-pk", value="true")
    private String id; 
```

因此，它同时使用 JPA 和 JDO 注释。

因此，在尝试持久化实体对象时，我遇到了一个异常：

如果字段未编码且为字符串类型，则不能有空主键字段。请提供一个值，或者，如果您希望数据存储区代表您生成一个 id，请将字段的类型更改为 Long。org.datanucleus.store.appengine.FatalNucleusUserException：name.xxx.tips.db.User 的主键无效。如果字段未编码且为字符串类型，则不能有空主键字段。请提供一个值，或者，如果您希望数据存储区代表您生成一个 id，请将字段的类型更改为 Long。

完整堆栈跟踪：如果字段未编码且类型为字符串，则不能有空主键字段。请提供一个值，或者，如果您希望数据存储区代表您生成一个 id，请将字段的类型更改为 Long。org.datanucleus.store.appengine.FatalNucleusUserException：name.xxx.tips.db.User 的主键无效。如果字段未编码且为字符串类型，则不能有空主键字段。请提供一个值，或者，如果您希望数据存储区代表您生成一个 id，请将字段的类型更改为 Long。在 org.datanucleus.store.appengine.DatastoreFieldManager.storeStringPKField(DatastoreFieldManager.java:540) 在 org.datanucleus.store.appengine.DatastoreFieldManager.storeStringField(DatastoreFieldManager.java:460) 在 org.datanucleus.state.AbstractStateManager.providedStringField(AbstractStateManager .java：

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T13:42:06.213

如果使用 JPA，为什么要使用 JDO 注释？用于 JPA 扩展的注释是

```
org.datanucleus.api.jpa.annotations.Extension 
```

[如此处](http://www.datanucleus.org/javadocs/api.jpa/3.1/)所示

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-09T07:06:51.373

```
import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.GenerationType;
import javax.persistence.Id;

import org.datanucleus.api.jpa.annotations.Extension;

@Entity
public class ChildEntity {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Extension(vendorName="datanucleus", key="gae.encoded-pk", value="true")
    private String Id; 
```

这对我有用。

# python - Python循环PEP8规则

> ID：13330920
> 
> 赞同：1
> 
> 时间：2012-11-11T12:01:10.353
> 
> 标签：python, loops, for-loop, unused-variables

> **可能重复：**
> [是否可以在没有迭代器变量的情况下实现 Python for range 循环？](https://stackoverflow.com/questions/818828/is-it-possible-to-implement-a-python-for-range-loop-without-an-iterator-variable)

只是想多次做某事所以我写

```
 for i in range(1, 10):
        print 'something'
        print 'do not use i' 
```

所以当我运行 PyLint 时，它会说：“未使用的变量 'i'”当然。那么在我只想循环多次的地方编写这种类型的循环的正确方法是什么。

```
 i = 0
    while i < 10:
        print 'test'
        i += 1 
```

这是唯一的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T12:08:35.160

虽然您可以用 替换`i`，`_`但首先编写循环是非常好的，并且以任何其他方式编写它可能会被大多数 Python 程序员认为是陌生的。

PyLint 检查过于激进，有时应该被忽略。如果你想要的是一个检查器，它告诉你你的代码是否可能被破坏，也许可以考虑[使用 pyflakes ；](http://pypi.python.org/pypi/pyflakes)或者[pep8](http://pypi.python.org/pypi/pep8)如果你想检查你的风格（变量命名等）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T12:07:41.697

`for i in range(..)`循环（尽管在 python2 中使用）`xrange()`是在 python 中循环一系列数字的正确方法。在这种情况下，应该忽略 pylint 警告。但是，如果是未使用的变量，通常会对其进行命名`_`，以使其更清楚地表明它没有被使用。

虽然还有*其他*方法可以循环，但效率较低，因为它们通常涉及函数调用。除此之外，这样做并不是人们在阅读您的代码时所期望看到的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-11T12:26:27.540

奇怪的是，我现在使用的 PyLint 版本似乎并没有为这个特定示例中未使用的变量哭泣。尽管如此，有几种选择：

*   直接使用迭代器：

    ```
    i = iter(range(1, 10))

    try:
        while i.next():
            pass
    except StopIteration:
        pass  # safely ignore 
    ```

*   在文件顶部添加 PyLint 注释以禁用警告：

    ```
    # pylint: disable=X0123
    # NOTE: X0123 is just an example, I don't know the exact warning code 
    ```

*   可能将 an 附加`_`到未使用的变量。我不确定这个命名约定是否得到尊重，但官方[用户手册](http://www.logilab.org/card/pylint_manual#command-line-options)中提到了：

    > 在我们的项目中，我们刚刚接受了我们必须对代码进行一些修改以取悦 PyLint：坚持更多的命名约定（**未使用的变量以下划线结尾**，...）

# java - 父 pom.xml 的包装无效，必须是“pom”但是“ear”

> ID：13330930
> 
> 赞同：17
> 
> 时间：2012-11-11T12:02:18.467
> 
> 标签：java, maven, maven-3, ear, maven-ear-plugin

任何人都可以向我建议一个解决方案，但有以下例外。我将创建一个多模块项目。

父项目名称是`LOGICBACKEND` 子项目名称是`DBAccess`

我需要`LOGICBACKEND`包含`DBAccess`prjoects文件的 ear`jar`文件。

运行时出现以下异常`mav clean install -P Developer`。

```
[ERROR]The project com.project1.Database:DBAccess:1.0-SNAPSHOT (C:\Project1\DBAccess\pom.xml) has 1 error
[ERROR]Invalid packaging for parent POM com.project1.logic:LOGIC:1.0-SNAPSHOT (C:\Project1\pom.xml), must be "pom" but is "ear" @ com.project1.logic:LOGIC:1.0-SNAPSHOT, C:\Project1\pom.xml, line 6, column 13 
```

这就是我父母 pom.xml 的一部分的样子

```
<modelVersion>4.0.0</modelVersion>
<groupId>com.project1.logic</groupId>
<artifactId>LOGICBACKEND</artifactId>
<packaging>ear</packaging>
<version>1.0-SNAPSHOT</version> 
```

这就是子 pom.xml 的样子

```
<groupId>com.project1.logic</groupId>
<artifactId>DBAccess</artifactId>
<packaging>ejb</packaging>
<name>DBAccess</name>
<version>1.0-SNAPSHOT</version>

<parent>
    <groupId>com.project1.logic</groupId>
    <artifactId>DBAccess</artifactId>
    <version>1.0-SNAPSHOT</version>
    <relativePath>../pom.xml</relativePath>
</parent> 
```

任何人都可以在这里帮助我了解这里出了什么问题。

提前感谢您的帮助

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-11T13:04:04.970

这个简单的设置是一个好的开始。

```
.
├── pom.xml
├── 服务
| ├── pom.xml
| └── 源
| └── 主要
| └── java
| └── com
| └── 堆栈溢出
| └── MyEjbService.java
└── 应用
    └── pom.xml

```

`pom.xml`

```
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <groupId>com.stackoverflow.Q13330930</groupId>
    <artifactId>parent</artifactId>
    <version>1.0-SNAPSHOT</version>
    <packaging>pom</packaging>

    <name>${project.artifactId}-${project.version}</name>

    <properties>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    </properties>

    <modules>
        <module>services</module>
        <module>application</module>
    </modules>

    <dependencies>
    </dependencies>

    <dependencyManagement>
        <dependencies>
            <dependency>
                <groupId>com.stackoverflow.Q13330930</groupId>
                <artifactId>services</artifactId>
                <version>${project.version}</version>
                <type>ejb</type>
            </dependency>
        </dependencies>
    </dependencyManagement>

    <build>
        <plugins>
            <plugin>
                <artifactId>maven-ejb-plugin</artifactId>
                <version>2.3</version>
                <configuration>
                    <ejbVersion>3.1</ejbVersion>
                </configuration>
            </plugin>
        </plugins>
    </build>

</project> 
```

`services/pom.xml`

```
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <parent>
        <groupId>com.stackoverflow.Q13330930</groupId>
        <artifactId>parent</artifactId>
        <version>1.0-SNAPSHOT</version>
    </parent>

    <groupId>com.stackoverflow.Q13330930</groupId>
    <artifactId>services</artifactId>
    <packaging>ejb</packaging>

    <name>${project.artifactId}-${project.version}</name>

</project> 
```

`application/pom.xml`

```
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <parent>
        <groupId>com.stackoverflow.Q13330930</groupId>
        <artifactId>parent</artifactId>
        <version>1.0-SNAPSHOT</version>
    </parent>

    <groupId>com.stackoverflow.Q13330930</groupId>
    <artifactId>application</artifactId>
    <packaging>ear</packaging>

    <name>${project.artifactId}-${project.version}</name>

    <dependencies>
        <dependency>
            <groupId>com.stackoverflow.Q13330930</groupId>
            <artifactId>services</artifactId>
            <type>ejb</type>
        </dependency>
    </dependencies>

    <build>
        <plugins>
            <plugin>
                <artifactId>maven-ear-plugin</artifactId>
                <version>2.7</version>
                <configuration>
                    <defaultLibBundleDir>lib</defaultLibBundleDir>
                </configuration>
            </plugin>
        </plugins>
    </build>

</project> 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-11T12:15:13.643

您正在尝试同时为父 pom 提供两个功能——即作为父 pom（包装`pom`）和包装耳（包装`ear`）。要解决您的问题，您应该在父 pom 下创建另一个 maven 模块，该模块具有打包`ear`并使用 maven-ear-plugin 来定义输出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-07T09:13:00.940

我得到了类似的错误：

[错误] [错误] 父 POM 沙箱的包装无效：父：6.5-SNAPSHOT，必须是“pom”但是“jar”@沙盒：父：6.5-SNAPSHOT

我发现根本原因是通过属性定义的**父版本：**

```
 <version>${revision}${changelist}</version> 
```

一旦我在不引用属性的情况下设置版本，问题就消失了：

```
<version>6.5-SNAPSHOT</version> 
```

可能是一个maven错误。

# mysql - mysql 访问（解密）表中记录的权限

> ID：13330933
> 
> 赞同：0
> 
> 时间：2012-11-11T12:03:12.670
> 
> 标签：mysql, encryption

我将尝试制作一个简单的示例，以显示我面临的问题：

让我的mysql数据库中有一个表，其中包含一个消息系统的私人消息，供互联网平台的用户使用。该表看起来像这样：

```
From    To    Text
1       2     "Hello, Mr. 2"
2       1     "Hello back!" 
```

出于安全原因，我想加密`text`该表的列，这样即使数据被盗，解密文本仍然是一项艰巨的任务。

我的第一个想法是使用用户密码作为密钥来加密他/她的消息，但后来我意识到，有两个人需要访问一个特定记录的权限。所以我想知道哪个是经常进行的练习？对于公钥/私钥方法，是否有 mysql`built-in`方法比例如更进一步？`AES_ENCRYPT()`我真的不是这方面的专家，所以如果有常见的陷阱，谢谢提及！

# playframework - Play framework/Netty 不释放socket

> ID：13330937
> 
> 赞同：26
> 
> 时间：2012-11-11T12:03:55.770
> 
> 标签：playframework, netty, nio, playframework-1.x, file-descriptor

已经问过类似的问题，但删除了它，因为我以为我修复了它，但我错了。

我在生产中为我的一个 Web 项目使用 Play 框架。Play 有时不呈现主页或不返回某些静态内容文件。

第一个屏幕截图显示了萤火虫控制台，在服务主页时，网站的加载在开始时被卡住了。 ![在此处输入图像描述](../Images/cbdba00c6e3b9972f543079e97b4695e.png) 第二个屏幕截图显示提琴手控制台，当 2 个静态资源未加载时。

![在此处输入图像描述](../Images/c2beb3d491bd6aaff1a4f7ef0aa21f3d.png)

最初应用程序运行良好，它必须工作 5-7 天，我可以看到这个问题。很难重现，它发生了 15 次中的 1 次，我必须删除缓存数据并重新加载页面。（在 FF 中按 CRTL-F5）。问题可以在来自不同机器和操作系统的大多数浏览器中重现。最初，我认为托管服务提供商存在一些问题。但我已经改变了它，问题还没有消失。

该剧的版本是1.2.5。也尝试了 1.2.2。Play 在 CentOS-5-32 位上作为独立服务器运行。

我怀疑`Netty`Play 框架使用了一些问题。Play 使用 Netty 3.5.7 final jar。

```
cd /proc/28761/fd
ls -l | wc -l
337 
```

几天来，打开的文件描述符数从 140 增长到 350。请注意，网站在开始和之后的平均负载是相同的。

可以看到进程打开了很多socket，后面没有释放。

```
lrwx------ 1 root root 64 Nov 11 10:34 300 -> socket:[1079566]
lrwx------ 1 root root 64 Nov 11 10:34 301 -> socket:[1079568]
lrwx------ 1 root root 64 Nov 11 10:34 302 -> socket:[1149958]
lrwx------ 1 root root 64 Nov 11 10:34 303 -> socket:[1160807]
lrwx------ 1 root root 64 Nov 11 10:34 304 -> socket:[1160605]
lrwx------ 1 root root 64 Nov 11 10:34 305 -> socket:[1157435]
lrwx------ 1 root root 64 Nov 11 10:34 306 -> socket:[1160607]
lrwx------ 1 root root 64 Nov 11 10:34 307 -> socket:[1160609]
lrwx------ 1 root root 64 Nov 11 10:34 308 -> socket:[1155542]
lrwx------ 1 root root 64 Nov 11 10:34 309 -> socket:[1120231] 
```

**更新**

应用程序启动时打开的 TCP 连接数（运行几个小时）为 63。

```
Total: 150 (kernel 181)
TCP:   63 (estab 38, closed 5, orphaned 0, synrecv 0, timewait 3/0), ports 44

Transport Total     IP        IPv6
*         181       -         -
RAW       0         0         0
UDP       7         4         3
TCP       58        9         49
INET      65        13        52
FRAG      0         0         0 
```

运行 2 天后，打开的 TCP 连接数为 490。

```
[root@82711-2 fd]# ss -s
Total: 459 (kernel 490)
TCP:   378 (estab 271, closed 23, orphaned 0, synrecv 0, timewait 9/0), ports 37

Transport Total     IP        IPv6
*         490       -         -
RAW       0         0         0
UDP       7         4         3
TCP       355       12        343
INET      362       16        346
FRAG      0         0         0 
```

所有这些打开的 TCP 连接都是 http 连接（不是数据库或任何其他连接）。网站上的平均负载始终相同，但打开的文件描述符和打开的套接字的数量一直在增长，直到`too many open files exception`

最初应用程序以 9-15 个新 I/O 线程（Netty 工作者）启动。所有 Netty 线程大部分时间都处于运行状态。大约 16 个处于等待状态的播放线程。

经过几天的运行，Netty 工人的数量变成了 27。我不是 Netty 专家，不确定这是否是正常行为。

几个线程陷入僵局：1 个 Play 线程和 1 个 Netty 线程。还有另一个 Play 线程被第一个 Play 线程锁定。所以总共3个锁定线程。我敢肯定，这种死锁不是问题的根本原因，但根本原因可能是相同的

```
Name: New I/O  worker #21
State: BLOCKED on org.jboss.netty.handler.stream.ChunkedWriteHandler@15e057 owned by: play-thread-2
Total blocked: 44  Total waited: 9

Stack trace: 
org.jboss.netty.handler.stream.ChunkedWriteHandler.flush(ChunkedWriteHandler.java:188)
org.jboss.netty.handler.stream.ChunkedWriteHandler.handleUpstream(ChunkedWriteHandler.java:140)
org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:564)
org.jboss.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendUpstream(DefaultChannelPipeline.java:792)
org.jboss.netty.channel.SimpleChannelUpstreamHandler.channelClosed(SimpleChannelUpstreamHandler.java:212)
org.jboss.netty.channel.SimpleChannelUpstreamHandler.handleUpstream(SimpleChannelUpstreamHandler.java:93)
org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:564)
org.jboss.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendUpstream(DefaultChannelPipeline.java:792)
org.jboss.netty.handler.codec.replay.ReplayingDecoder.cleanup(ReplayingDecoder.java:636)
org.jboss.netty.handler.codec.replay.ReplayingDecoder.channelClosed(ReplayingDecoder.java:533)
org.jboss.netty.channel.SimpleChannelUpstreamHandler.handleUpstream(SimpleChannelUpstreamHandler.java:93)
org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:564)
org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:559)
org.jboss.netty.channel.Channels.fireChannelClosed(Channels.java:476)
org.jboss.netty.channel.socket.nio.AbstractNioWorker.close(AbstractNioWorker.java:631)
org.jboss.netty.channel.socket.nio.NioServerSocketPipelineSink.handleAcceptedSocket(NioServerSocketPipelineSink.java:109)
org.jboss.netty.channel.socket.nio.NioServerSocketPipelineSink.eventSunk(NioServerSocketPipelineSink.java:66)
org.jboss.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendDownstream(DefaultChannelPipeline.java:780)
org.jboss.netty.handler.codec.oneone.OneToOneEncoder.handleDownstream(OneToOneEncoder.java:55)
org.jboss.netty.channel.DefaultChannelPipeline.sendDownstream(DefaultChannelPipeline.java:591)
org.jboss.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendDownstream(DefaultChannelPipeline.java:785)
org.jboss.netty.handler.stream.ChunkedWriteHandler.handleDownstream(ChunkedWriteHandler.java:111)
org.jboss.netty.channel.DefaultChannelPipeline.sendDownstream(DefaultChannelPipeline.java:591)
org.jboss.netty.channel.DefaultChannelPipeline.sendDownstream(DefaultChannelPipeline.java:582)
org.jboss.netty.channel.Channels.close(Channels.java:821)
org.jboss.netty.channel.AbstractChannel.close(AbstractChannel.java:194)
org.jboss.netty.channel.ChannelFutureListener$1.operationComplete(ChannelFutureListener.java:41)
org.jboss.netty.channel.DefaultChannelFuture.notifyListener(DefaultChannelFuture.java:399)
org.jboss.netty.channel.DefaultChannelFuture.notifyListeners(DefaultChannelFuture.java:385)
org.jboss.netty.channel.DefaultChannelFuture.setSuccess(DefaultChannelFuture.java:334)
org.jboss.netty.channel.socket.nio.AbstractNioWorker.write0(AbstractNioWorker.java:493)
   - locked java.lang.Object@3b7e28
org.jboss.netty.channel.socket.nio.AbstractNioWorker.writeFromTaskLoop(AbstractNioWorker.java:431)
org.jboss.netty.channel.socket.nio.AbstractNioChannel$WriteTask.run(AbstractNioChannel.java:364)
org.jboss.netty.channel.socket.nio.AbstractNioWorker.processWriteTaskQueue(AbstractNioWorker.java:349)
org.jboss.netty.channel.socket.nio.AbstractNioWorker.run(AbstractNioWorker.java:245)
org.jboss.netty.channel.socket.nio.NioWorker.run(NioWorker.java:38)
org.jboss.netty.util.ThreadRenamingRunnable.run(ThreadRenamingRunnable.java:102)
org.jboss.netty.util.internal.DeadLockProofWorker$1.run(DeadLockProofWorker.java:42)
java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
java.lang.Thread.run(Thread.java:662) 
```

第二个线程：

```
Name: play-thread-2
State: BLOCKED on java.lang.Object@3b7e28 owned by: New I/O  worker #21
Total blocked: 23  Total waited: 34 778

Stack trace: 
org.jboss.netty.channel.socket.nio.AbstractNioWorker.cleanUpWriteBuffer(AbstractNioWorker.java:654)
org.jboss.netty.channel.socket.nio.AbstractNioWorker.writeFromUserCode(AbstractNioWorker.java:408)
org.jboss.netty.channel.socket.nio.NioServerSocketPipelineSink.handleAcceptedSocket(NioServerSocketPipelineSink.java:127)
org.jboss.netty.channel.socket.nio.NioServerSocketPipelineSink.eventSunk(NioServerSocketPipelineSink.java:66)
org.jboss.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendDownstream(DefaultChannelPipeline.java:780)
org.jboss.netty.handler.codec.oneone.OneToOneEncoder.handleDownstream(OneToOneEncoder.java:63)
org.jboss.netty.channel.DefaultChannelPipeline.sendDownstream(DefaultChannelPipeline.java:591)
org.jboss.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendDownstream(DefaultChannelPipeline.java:785)
org.jboss.netty.channel.Channels.write(Channels.java:733)
org.jboss.netty.handler.stream.ChunkedWriteHandler.flush(ChunkedWriteHandler.java:262)
   - locked org.jboss.netty.handler.stream.ChunkedWriteHandler@15e057
org.jboss.netty.handler.stream.ChunkedWriteHandler.handleDownstream(ChunkedWriteHandler.java:121)
org.jboss.netty.channel.DefaultChannelPipeline.sendDownstream(DefaultChannelPipeline.java:591)
org.jboss.netty.channel.DefaultChannelPipeline.sendDownstream(DefaultChannelPipeline.java:582)
org.jboss.netty.channel.Channels.write(Channels.java:712)
org.jboss.netty.channel.Channels.write(Channels.java:679)
org.jboss.netty.channel.AbstractChannel.write(AbstractChannel.java:245)
play.server.PlayHandler.serveStatic(PlayHandler.java:886)
play.server.PlayHandler$NettyInvocation.init(PlayHandler.java:182)
play.Invoker$Invocation.run(Invoker.java:276)
play.server.PlayHandler$NettyInvocation.run(PlayHandler.java:229)
java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441)
java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
java.util.concurrent.FutureTask.run(FutureTask.java:138)
java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:98)
java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:206)
java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
java.lang.Thread.run(Thread.java:662) 
```

**更新**

我将相同的 Play 应用程序部署到 Tomcat 7 的相同环境。24 小时过去了，问题已经消失，打开的 TCP 连接数保持不变。打开的文件描述符的数量不超过 ~70。这是应用程序的相同生产主机、相同数据库和相同用户。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T20:15:40.103

我实际上遇到了一个类似的错误，但不是在播放中，而是在 JVM（播放运行）中，因此指向文件句柄的关闭通道不会被释放，直到通过关闭 JVM 强制释放。唉，我不记得我是如何找到错误报告的，或者我会链接到它，但它是 JVM 中的一个已知错误。我最终不得不解决它。我可以建议的最好的事情是重写您的代码以尽可能多地使用相同的通道/文件句柄。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T18:58:51.690

ChunkedWriteHandler 中有几个死锁问题。所有这些似乎都在您的 Netty 版本中得到解决。无论如何，那段代码似乎正在吸引这种问题。我建议你向 Netty 家伙提出问题。

[https://issues.jboss.org/browse/NETTY-384](https://issues.jboss.org/browse/NETTY-384)

另请参阅“类似问题”以了解有关该课程的问题数量。

# windows-runtime - 将字典绑定到 WinRT 列表框

> ID：13330938
> 
> 赞同：5
> 
> 时间：2012-11-11T12:04:03.193
> 
> 标签：windows-runtime

我已经阅读了许多关于将 Dictionary 绑定到 WPF ListView 和 ListBox 的帖子，但我无法获得在 WinRT 中工作的等效代码。

```
<Grid Margin="10" Width="1000" VerticalAlignment="Stretch">
        <ListBox Name="StatListView" ItemsSource="{Binding FooDictionary}" >
            <ListBox.ItemTemplate>
                <DataTemplate >
                    <Grid Margin="6">
                        <StackPanel Orientation="Horizontal" >
                            <TextBlock Text="{Binding Key}" Margin="5" />
                            <TextBlock Text="{Binding Value}" Margin="5" />
                        </StackPanel>
                    </Grid>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox>
    </Grid>

    public Dictionary<string, string> FooDictionary
    {
        get
        {
            Dictionary<string, string> temp = new Dictionary<string, string>();
            temp.Add("key1", "value1");
            temp.Add("key2", "value2");
            temp.Add("key3", "value3");
            temp.Add("key4", "value4");
            return temp;
        }
    } 
```

什么是正确的绑定？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-11T16:23:36.580

输出窗口中的错误是（修剪到最有用的部分）：

```
Error: Cannot get 'Key' value (type 'String') from type 
'System.Runtime.InteropServices.WindowsRuntime.CLRIKeyValuePairImpl`2
[[System.String, mscorlib, Version=4.0.0.0, Culture=neutral, 
PublicKeyToken=b77a5c561934e089],[System.String, mscorlib, Version=4.0.0.0, 
Culture=neutral, PublicKeyToken=b77a5c561934e089]], mscorlib, .... 
```

在内部，WinRT 将类型转换为：

```
System.Runtime.InteropServices.WindowsRuntime.CLRIKeyValuePairImpl<K, V> 
```

如果您添加到您的 DataTemplate：

```
<TextBlock Text="{Binding}" Margin="5" /> 
```

你会看到它发出了上面的类型`String, String`。

但是，由于某种原因，它没有按预期正确处理。如果您在 Internet 上搜索该类型，您会在 Connect 上看到该问题的[记录错误](http://social.msdn.microsoft.com/Forums/sr-sp-latn/winappswithcsharp/thread/234a17ad-975f-42f6-aa91-7212deda4190)。

一个简单的解决方法是将您的数据放在一个不是 KeyValuePair 的简单对象中：

```
List<StringKeyValue> temp = new List<StringKeyValue>();
temp.Add(new StringKeyValue { Key = "key1", Value = "value1" } );
temp.Add(new StringKeyValue { Key = "key2", Value = "value2" });
temp.Add(new StringKeyValue { Key = "key3", Value = "value3" });
temp.Add(new StringKeyValue { Key = "key4", Value = "value4" });

this.DefaultViewModel["FooDictionary"] = temp;

public class StringKeyValue
{
    public string Key { get; set; }
    public string Value { get; set; }
} 
```

顺便说一句，至少从一个简单的测试来看，导致问题的根本不是 Dictionary ，而是它是一个`KeyValuePair`正在转换为上述`CLRIKeyValuePairImpl`类型的对象实例。我尝试仅使用列表并将`KeyValuePair<string, string>`实例添加到列表中，但也失败了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-25T08:30:14.803

我想出了一个解决方法，它涉及动态生成您自己的键值对。

如果您有专门的字典，只需添加以下内容：

```
 public IEnumerable<MyPair<K, V>> Collection
    {
        get {
            foreach (var v in this)
            {
                MyPair<K, V> p = new MyPair<K, V>() { Key = v.Key, Value = v.Value };
                yield return p;
            }
         }
    } 
```

并定义您的 Pair 类型：

```
public class MyPair<K, V>
{
    public K Key { get; set; }
    public V Value { get; set; }
} 
```

另外，请注意每次都创建一个新对象。一些项目穿过对象，并存储返回，如果您尝试像我最初那样重用 MyPair，这可能导致一切看起来像最后一个项目。

# php - php echo 嵌套对象

> ID：13330940
> 
> 赞同：0
> 
> 时间：2012-11-11T12:04:41.430
> 
> 标签：php, arrays, object, foreach, nested

> **可能重复：**
> [能够在 print_r() 的输出中看到一个变量，但不确定如何在代码中访问它](https://stackoverflow.com/questions/6322084/able-to-see-a-variable-in-print-rs-output-but-not-sure-how-to-access-it-in-c)

我想“回显”更多嵌套的对象。我看到了几个关于这个问题的帖子——但这把我吓坏了。

我有一个名为“arrResult”的数组/对象，print_r(arrResult) 输出是：

```
Array
(
    [status] => stdClass Object
        (
            [code] => 0
            [message] => Success
        )

    [result] => Array
        (
            [0] => stdClass Object
                (
                    [base] => stdClass Object
                        (
                            [id] => 3
                            [created] => 2012-11-11 12:11:07
                            [start] => 2012-11-11
                        )

                    [pos] => Array
                        (
                            [0] => stdClass Object
                                (
                                    [id] => 4
                                    [invoices_id] => 3
                                    [article_id] => 1
                                    [quantity] => 1
                                    [unit] => Monate
                                    [pos_txt] => Paketname
                                )

                        )

                    [summ] => stdClass Object
                        (
                            [net] => 2.52
                            [discount] => 0
                            [tax] => 0.47899159663865
                            [gross] => 3
                            [rounded_net] => 2.52
                        )

                )

            [1] => stdClass Object
                (
                    [base] => stdClass Object
                        (
                            [id] => 2
                            [created] => 2012-11-11 12:10:39
                            [start] => 2012-11-11
                        )

                    [pos] => Array
                        (
                            [0] => stdClass Object
                                (
                                    [id] => 3
                                    [invoices_id] => 2
                                    [article_id] => 2
                                    [quantity] => 1
                                    [unit] => Monate
                                    [pos_txt] => Paketname2
                                )

                        )

                    [summ] => stdClass Object
                        (
                            [net] => 5.04
                            [discount] => 0
                            [tax] => 0.95798319327731
                            [gross] => 6
                            [rounded_net] => 5.04
                        )

                )

        )

) 
```

我想回应所有 [pos]。'echo arrResult[result][0][pos][0]->pos_txt', 'echo arrResult[result][0][pos][1]->pos_txt',...

我想过这个：

```
foreach ((array)$arrResult['result'] as $key => $contract) {
    foreach ($contract as $key => $objPos){
        echo $objPos->pos_txt;
    }
} 
```

我的大脑不明白。有人可以帮我弄这个吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T12:12:42.453

您可以使用

```
echo "<pre>";
foreach(array_map(function($v){ return $v->pos ;}, $data['result']) as $list)
{
    foreach($list as $objPos)
        echo $objPos->pos_txt,PHP_EOL;
} 
```

输出

```
Paketname
Paketname2 
```

[观看现场演示](http://eval.in/2700)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T12:20:01.033

使用 xdebug 扩展，无论如何它是你开发时必须具备的东西，它稍微改变了 var_dump 的工作方式，我相信它会解决你的问题

[请参阅 xdebug 文档](http://xdebug.org/docs/display)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T12:24:10.660

```
$num = count($arrResult['result']);
for ($i=0; $i <= $num; $i++) {
    echo $arrResult['result'][$i]->pos[0]->pos_txt;
} 
```

# c++ - 如何在调用 SQLGetData 之前知道数据的大小

> ID：13330943
> 
> 赞同：2
> 
> 时间：2012-11-11T12:05:16.080
> 
> 标签：c++, odbc

`SQLGetData`在调用函数之前，我想知道表中可用数据的确切大小。目前我正在遵循下面列出的代码，这对我有用，但我不确定它是否安全。

谁能帮我？

```
char*ptr = new char[0];

        if (retcode = SQLGetData(hstmt, 31, SQL_C_BINARY, ptr,0,&cbfdata) != SQL_NO_DATA)
        {
            delete[] ptr;
            vector<char> vec(cbfdata);

            SQLGetData(hstmt, 31, SQL_C_BINARY, &vec[0],cbfdata,&cbfdata);

            ofstream fout;
            fout.open(file,ios::binary);
            fout.write(&vec[0],cbfdata);
            fout.close();
            vec.clear();
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T09:50:35.343

你不能在没有数据 ptr 和 StrLen_or_IndPtr 设置的情况下调用 SQLGetData，驱动程序会将大小写入 StrLen_or_IndPtr。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-02-26T13:12:42.560

你不能。

至少不是以一种安全、通用的方式。[微软文档](https://docs.microsoft.com/en-us/sql/odbc/reference/develop-app/getting-long-data?view=sql-server-2017)指出：

> 在每次调用中，长度/指示符缓冲区中返回的值会减少前一次调用中返回的字节数，**尽管驱动程序通常无法发现可用数据量并返回 SQL_NO_TOTAL 的字节长度**。

（强调我的）

* * *

让我给你举个例子：

1.  让我们假设您的字段是 `NVARCHAR`结果集中的类型。
2.  您的目标缓冲区是一个 C 字符串。
3.  因此，ODBC 驱动程序必须将宽字符转换为窄字符。
4.  驱动程序可以选择`SQLGetData`“即时”进行转换，同时将数据从其获取缓冲区复制到目标缓冲区。
5.  一个宽字符（在驱动程序的提取缓冲区中）可以在目标缓冲区中占用 1、2、3 或 4 个字节。除非数据实际上已被转换，否则无法判断。如果转换和复制是一步完成的，那么...

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-11-13T11:35:03.290

在没有指针 (NULL) 的情况下调用 SQLGetData 在 cbfdata 中返回 7，这不是实际大小。

我曾尝试创建 0 大小指针并在其他小项目中将其删除。它不会失败。

但是不要冒险，我通过将删除放在末尾并增加大小来稍微改进代码

为 1 个字节。

```
 char*ptr = new char[1];

        if (retcode = SQLGetData(hstmt, 31, SQL_C_BINARY, ptr,0,&cbfdata) != SQL_NO_DATA)
        {
            vector<char> vec(cbfdata);
            SQLGetData(hstmt, 31, SQL_C_BINARY, &vec[0],cbfdata,&cbfdata);

            ofstream fout;
            fout.open(file,ios::binary);
            fout.write(&vec[0],cbfdata);
            fout.close();
            vec.clear();
        }
        delete[] ptr; 
```

# javascript - 自动单击单选按钮但首先检查句子（标签）？

> ID：13330948
> 
> 赞同：2
> 
> 时间：2012-11-11T12:05:51.237
> 
> 标签：javascript, html, radio-button, greasemonkey

我需要帮助...我想自动单击一个单选按钮...但还需要检查句子（标签）...例如...() <-radio button

```
<label>How much is 1+1?</label><br/>
<input type="radio" name="group1" value="2"/>()2<br/>
<input type="radio" name="group1" value="3"/>()3<br/>
<input type="radio" name="group1" value="4"/>()4 
```

我尝试使用这个脚本：

```
// ==UserScript==
// @name script
// @description Auto select rpt radio button
// @include *
// ==/UserScript==

if(radio=document.evaluate('//input[@type="radio" and @value="2"]',document,null,9,null).singleNodeValue)
radio.checked=true; 
```

好的，这段代码..click answer ()2 但是如果我有以下情况会发生什么：

```
<label>How much is 1+1?</label><br/>
<input type="radio" name="group1" value="2"/>()2<br/>
<input type="radio" name="group1" value="3"/>()3<br/>
<input type="radio" name="group1" value="4"/>()4

How much is 4+2?<br/>
<input type="radio" name="group1" value="8"/>()8<br/>
<input type="radio" name="group1" value="2"/>()2<br/>
<input type="radio" name="group1" value="6"/>()6 
```

什么都没有发生，因为有两个值叫“2”..所以我尝试修改代码先检查句子然后标记答案（但我没有很好地掌握它）...

```
if(label=document.evaluate('//label[@value="How much is 1+1?"]',document,null,9,null).singleNodeValue)&&(radio=document.evaluate('//input[@type="radio" and @value="2"]',document,null,9,null).singleNodeValue)
radio.checked=true; 
```

我的意图是添加第二个条件，检查带有“1+1 是多少？”的值的标签。

谁能指导我如何做到这一点？

编辑：示例链接： [Google docs form](https://docs.google.com/spreadsheet/viewform?formkey=dG1fdUU1bTR5R1l3dmtGS095QVYxZlE6MQ)

页面代码如下所示： 标签：

```
<label class="ss-q-title" for="entry_0">How much is 1+1
<span class="ss-required-asterisk">*</span></label> 
```

收音机：

```
<ul class="ss-choices"><li class="ss-choice-item"><label class="ss-choice-label"><input name="entry.0.group" value="2" class="ss-q-radio" id="group_0_1" type="radio">
2</label></li> <li class="ss-choice-item"><label class="ss-choice-label"><input name="entry.0.group" value="3" class="ss-q-radio" id="group_0_2" type="radio">
3</label></li> <li class="ss-choice-item"><label class="ss-choice-label"><input name="entry.0.group" value="4" class="ss-q-radio" id="group_0_3" type="radio">
4</label></li>
</ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T13:11:26.320

您必须找到最近的单选按钮，跟随`<lable>`您关心的（或文本节点）的兄弟。

jQuery 使这种事情变得更容易，请参阅[jQuery 文档](http://docs.jquery.com/)[，](http://docs.jquery.com/Traversing)尤其[是*Selectors*部分](http://docs.jquery.com/Selectors)和[*Traversing*](http://docs.jquery.com/Traversing)[部分](http://docs.jquery.com/Traversing)。[](http://docs.jquery.com/Traversing)

 *这是**一个完整的 Greasemonkey 脚本**，它将根据问题中的新 HTML（链接的 Google 文档）选择正确的按钮：

```
// ==UserScript==
// @name        YOUR_SCRIPT_NAME
// @description Auto select rpt radio button
// @include     http://YOUR_SERVER.COM/YOUR_PATH/*
// @require     http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js
// @grant       GM_addStyle
// ==/UserScript==
/*- The @grant directive is needed to work around a design change introduced
    in GM 1.0\.   It restores the sandbox.
*/
//-- Note that :contains() is case-sensitive
var questionLabel   = $(
    "label.ss-q-title:contains('How much is 1+1') ~ ul.ss-choices"
).first ().find ("input[type=radio][value=2]");
questionLabel.prop ('checked', true); 
```

您还可以[**在 jsFiddle 查看实际代码。**](http://jsfiddle.net/fS2ks/1/)*

# objective-c - 第二个视图转换时崩溃

> ID：13330958
> 
> 赞同：0
> 
> 时间：2012-11-11T12:07:05.013
> 
> 标签：objective-c, ios, xcode

```
 if (! self.mainPage)
{ self.mainPage= [[MainGameDisplay alloc] initWithNibName:nil bundle:nil]; }
[self presentViewController: self.mainPage animated:YES completion:NULL];

[self.view addSubview:self.mainPage.view];
self.mainPage.view.frame = CGRectMake(568, 0, 568, 320);//(N = horizontal, N = vertical)
[UIView animateWithDuration:1.0f
                 animations:^{
                     //actual frame needed with an animation.
                     self.mainPage.view.frame = CGRectMake(0, 0, 568, 320);
                 }
                 completion:^(BOOL finished) {
                     //ENTER HERE ANYTHING TO RUN AFTER ANIMATION IS COMPLETED:
                     [self presentViewController: self.mainPage animated:NO completion:NULL];
                     //This will make the next page load correctly after the transition, otherwise you cannot. interact with anything.
                 }]; 
```

> @property (strong) MainGameDisplay *mainPage;

在 .h 文件中声明。这段代码完美运行，但只有一次，如果我要转换到 mainPage 视图，返回并再次转换到那里，它会在转换结束时崩溃。我已经玩了很多来解决这个问题，但它就是行不通。

================= MainGameDisplay viewDidLoad 的堆栈跟踪：

```
//First transition, A-Okay.
2012-11-11 12:27:07.547 Test_Game [584:c07] (
    0   Test_Game                              0x00002dab -[MainGameDisplay viewDidLoad] + 91
    1   UIKit                               0x000f8817 -[UIViewController loadViewIfRequired] + 536
    2   UIKit                               0x000f8882 -[UIViewController view] + 33
    3   Test_Game                              0x0000240e -[ViewController StartGame:] + 334
    4   libobjc.A.dylib                     0x010e3705 -[NSObject performSelector:withObject:withObject:] + 77
    5   UIKit                               0x0001a920 -[UIApplication sendAction:to:from:forEvent:] + 96
    6   UIKit                               0x0001a8b8 -[UIApplication sendAction:toTarget:fromSender:forEvent:] + 61
    7   UIKit                               0x000db671 -[UIControl sendAction:to:forEvent:] + 66
    8   UIKit                               0x000dbbcf -[UIControl(Internal) _sendActionsForEvents:withEvent:] + 578
    9   UIKit                               0x000dad38 -[UIControl touchesEnded:withEvent:] + 546
    10  UIKit                               0x0004a33f -[UIWindow _sendTouchesForEvent:] + 846
    11  UIKit                               0x0004a552 -[UIWindow sendEvent:] + 273
    12  UIKit                               0x000283aa -[UIApplication sendEvent:] + 436
    13  UIKit                               0x00019cf8 _UIApplicationHandleEvent + 9874
    14  GraphicsServices                    0x01beddf9 _PurpleEventCallback + 339
    15  GraphicsServices                    0x01bedad0 PurpleEventCallback + 46
    16  CoreFoundation                      0x01c07bf5 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 53
    17  CoreFoundation                      0x01c07962 __CFRunLoopDoSource1 + 146
    18  CoreFoundation                      0x01c38bb6 __CFRunLoopRun + 2118
    19  CoreFoundation                      0x01c37f44 CFRunLoopRunSpecific + 276
    20  CoreFoundation                      0x01c37e1b CFRunLoopRunInMode + 123
    21  GraphicsServices                    0x01bec7e3 GSEventRunModal + 88
    22  GraphicsServices                    0x01bec668 GSEventRun + 104
    23  UIKit                               0x0001765c UIApplicationMain + 1211
    24  Test_Game                              0x00001cfd main + 141
    25  Test_Game                              0x00001c25 start + 53
)

//Second transition, crashes now.
2012-11-11 12:27:11.223 Test_Game [584:c07] (
    0   Test_Game                            0x00002dab -[MainGameDisplay viewDidLoad] + 91
    1   UIKit                               0x000f8817 -[UIViewController loadViewIfRequired] + 536
    2   UIKit                               0x000f8882 -[UIViewController view] + 33
    3   Test_Game                              0x0000240e -[ViewController StartGame:] + 334
    4   libobjc.A.dylib                     0x010e3705 -[NSObject performSelector:withObject:withObject:] + 77
    5   UIKit                               0x0001a920 -[UIApplication sendAction:to:from:forEvent:] + 96
    6   UIKit                               0x0001a8b8 -[UIApplication sendAction:toTarget:fromSender:forEvent:] + 61
    7   UIKit                               0x000db671 -[UIControl sendAction:to:forEvent:] + 66
    8   UIKit                               0x000dbbcf -[UIControl(Internal) _sendActionsForEvents:withEvent:] + 578
    9   UIKit                               0x000dad38 -[UIControl touchesEnded:withEvent:] + 546
    10  UIKit                               0x0004a33f -[UIWindow _sendTouchesForEvent:] + 846
    11  UIKit                               0x0004a552 -[UIWindow sendEvent:] + 273
    12  UIKit                               0x000283aa -[UIApplication sendEvent:] + 436
    13  UIKit                               0x00019cf8 _UIApplicationHandleEvent + 9874
    14  GraphicsServices                    0x01beddf9 _PurpleEventCallback + 339
    15  GraphicsServices                    0x01bedad0 PurpleEventCallback + 46
    16  CoreFoundation                      0x01c07bf5 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 53
    17  CoreFoundation                      0x01c07962 __CFRunLoopDoSource1 + 146
    18  CoreFoundation                      0x01c38bb6 __CFRunLoopRun + 2118
    19  CoreFoundation                      0x01c37f44 CFRunLoopRunSpecific + 276
    20  CoreFoundation                      0x01c37e1b CFRunLoopRunInMode + 123
    21  GraphicsServices                    0x01bec7e3 GSEventRunModal + 88
    22  GraphicsServices                    0x01bec668 GSEventRun + 104
    23  UIKit                               0x0001765c UIApplicationMain + 1211
    24  Test_Game                              0x00001cfd main + 141
    25  Test_Game                              0x00001c25 start + 53
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T13:06:06.407

也许你在 viewDidDisapear 或类似的东西中释放你的财产？什么类型的崩溃 - BAD_ACCESS？

# mapreduce - 用于 TimeUUID 列的 Cassandra Map Reduce

> ID：13330960
> 
> 赞同：1
> 
> 时间：2012-11-11T12:07:24.417
> 
> 标签：mapreduce, cassandra

我最近设置了 4 节点 Cassandra 集群，用于使用一个包含时间序列数据的列族进行学习。

Key -> {column name: timeUUID, column value: csv log line, ttl: 1year}，我使用Netflix Astyanax java客户端加载了大约100万条日志行。

我还将 Hadoop 配置为运行具有 1 个名称节点和 4 个数据节点的 map-reduce 作业，以对 Cassandra 数据运行一些分析。

互联网上所有可用的示例都使用列名作为 Hadoop 作业配置的 SlicePredicate，其中我有 timeUUID 作为列，我如何有效地将 Cassandra 数据提供给 Hadoop 作业配置器，一次批处理 1000 列。

此测试数据中的某些行有超过 10000 列，并且预计在实际数据中会更多。

* * *

# 我将我的工作配置为

```
public int run(String[] arg0) throws Exception {
    Job job = new Job(getConf(), JOB_NAME);
Job.setJarByClass(LogTypeCounterByDate.class);
job.setMapperClass(LogTypeCounterByDateMapper.class);       
job.setReducerClass(LogTypeCounterByDateReducer.class);

job.setInputFormatClass(ColumnFamilyInputFormat.class);

job.setMapOutputKeyClass(Text.class);
job.setMapOutputValueClass(LongWritable.class);

ConfigHelper.setRangeBatchSize(getConf(), 1000);

SliceRange sliceRange = new SliceRange(ByteBuffer.wrap(new byte[0]), 
    ByteBuffer.wrap(new byte[0]), true, 1000);

SlicePredicate slicePredicate = new SlicePredicate();
slicePredicate.setSlice_range(sliceRange);

ConfigHelper.setInputColumnFamily(job.getConfiguration(), KEYSPACE, COLUMN_FAMILY);
ConfigHelper.setInputRpcPort(job.getConfiguration(), INPUT_RPC_PORT);
ConfigHelper.setInputInitialAddress(job.getConfiguration(), INPUT_INITIAL_ADRESS);
    ConfigHelper.setInputPartitioner(job.getConfiguration(), INPUT_PARTITIONER);
ConfigHelper.setInputSlicePredicate(job.getConfiguration(), slicePredicate);
FileOutputFormat.setOutputPath(job, new Path(OUTPUT_PATH));
job.waitForCompletion(true);
return job.isSuccessful() ? 0 : 1;
} 
```

但我无法理解我是如何定义 Mapper 的，请您提供 Mapper 类的模板。

```
public static class LogTypeCounterByDateMapper extends Mapper<ByteBuffer, SortedMap<ByteBuffer, IColumn>, Text, LongWritable>
{
    private Text key = null;
    private LongWritable value = null;

    @Override
    protected void setup(Context context){

    }

    public void map(ByteBuffer key, SortedMap<ByteBuffer, IColumn> columns, Context context){
        //String[] lines = columns.;

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T21:55:37.703

```
ConfigHelper.setRangeBatchSize(getConf(), 1000)
...
SlicePredicate predicate = new SlicePredicate().setSlice_range(new SliceRange(TimeUUID.asByteBuffer(startValue), TimeUUID.asByteBuffer(endValue), false, 1000))
ConfigHelper.setInputSlicePredicate(conf, predicate) 
```

# job-scheduling - 如何自动运行java程序

> ID：13330964
> 
> 赞同：0
> 
> 时间：2012-11-11T12:07:44.367
> 
> 标签：job-scheduling

我有一个java包，我想让我的程序每天晚上0点自动运行，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T12:11:52.027

通常你有2个解决方案：

1.  创建每晚运行代码的应用程序，即自己实现调度。显然，您可以（并且应该）使用帮助您进行日程安排的工具。
2.  使用特定于操作系统的工具。例如 unix 的 cron 和 windows 的 windows 任务调度程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T12:13:26.097

您可以在自己的操作系统中进行安排。在 *nix 上，有[cron](http://www.scrounge.org/linux/cron.html)。我不确定在 Windows 中使用什么。

或者您可以制定自己的 java 程序计划：在运行它时，它会设置一个时间以在特定时间执行您的任务。

您可以使用`Thread.sleep()`从现在到午夜的时间，但这是穷人的解决方案。[Quartz](http://www.quartz-scheduler.org/)是你的人，因为它可以安排你的任务。

如果您选择调度路径，您不能忘记在操作系统启动时运行您的应用程序

# .net - 按名称访问 UserControl（字符串）

> ID：13330965
> 
> 赞同：0
> 
> 时间：2012-11-11T12:07:57.687
> 
> 标签：.net, vb.net, winforms, user-controls

我们可以`UserControl`通过名称访问 a 吗？例如，我已经制作了一个`UserControl`（在同一个项目中），名称为`uc1`，和一个`Panel`名为`Panel1`，所以类似于：

```
Dim a As String = "uc1"
Panel1.Controls.Add(a) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T12:35:40.793

你可以这样做：

```
Dim c As Control = Me.Controls("uc1") 
```

或者

```
Dim c As Control = Me.Controls.Find("uc1", True)(0)

If c IsNot Nothing Then
    Panel1.Controls.Add(c)
End If 
```

但为什么不添加：

```
Panel1.Controls.Add(uc1) 
```

（假设您的控件存储为`uc1`内部 -> `Dim uc1 As Control ...`。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T12:38:04.123

是的。与您的代码片段中的内容不相近，您无法将字符串添加到 Controls 集合中。但是您可以使用字符串索引 Controls 集合以获取控件引用。像这样：

```
Dim ctl as New MyUserControl
ctl.Name = "foo"
Panel1.Controls.Add(ctl)

...

Dim ctl as MyUserControl
ctl = DirectCast(Panel1.Controls("foo"), MyUserControl) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-16T08:24:05.823

我偶然发现了这个老问题，因为我正在寻找相同的答案。前面的答案都假设您已经知道用户控件的名称。如果要通过给定的字符串变量加载用户控件，则可以使用以下代码。

```
Dim ControlName as string = "Namespace.ControlName"
Dim oType As System.Type = Type.GetType(ControlName)
Dim obj = System.Activator.CreateInstance(oType)
Panel1.Controls.Add(obj) 
```

这会将用户控件添加到`ControlName`控件中`Panel1`。如果您的用户控件在同一个项目中，则要使用的命名空间是您自己的根命名空间。您可以在项目属性中找到此命名空间。

# django - 如何使用 WebTest 模拟具有特定权限的用户

> ID：13330968
> 
> 赞同：1
> 
> 时间：2012-11-11T12:08:13.160
> 
> 标签：django, python-2.7, webtest

我正在测试我的视图，并想模拟具有某些权限的登录用户。

我知道在 django-webtest 我可以像这样模拟登录用户：

```
self.app.get(reverse('profile'), user='bob') 
```

我也可以为这个用户传入一个组吗？还是权限列表？如果我将在 setUp 中创建一个用户并为他分配一个组，我可以通过传递他的用户名来模拟他登录，如下所示：

```
self.app.get(reverse('profile'), user='user_with_certain_permissions') 
```

还是我需要先让他登录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T18:32:49.783

是的，这应该有效。您也可以传递用户实例而不是用户名：

```
self.app.get(reverse("profile"), self.user_with_certain_permissions) 
```

# javascript - HTML5：尝试更改原型时，Ubuntu 的 Firefox 中出现“ImageData is not defined”错误

> ID：13330969
> 
> 赞同：1
> 
> 时间：2012-11-11T12:08:15.313
> 
> 标签：javascript, html, canvas, getimagedata

我正在使用 <canvas> 元素进行简单的物理模拟（如落沙），该元素涉及每个像素的操作；我正在使用 JavaScript。我想向 getImageData 函数返回的 ImageData 类添加一个方法。

```
ImageData.prototype.isPixel = function(x,y) {
    return (this.data[y*this.width*4 + x*4 +3]!=0); //if alpha for (x,y) is non-zero
} 
```

这在 Windows 上的主要浏览器中完美运行，但在 Firefox 4 for Ubuntu 中发生错误：“ImageData 未定义”我做错了什么？或者是否只是 Ubuntu 的实现？

# java - 如何在 Java 中使用 split 函数拆分像 p^q 这样的字符串？

> ID：13330970
> 
> 赞同：0
> 
> 时间：2012-11-11T12:08:23.397
> 
> 标签：java, regex, split, escaping

我想将像“p^q”这样的字符串分成两个字符串，即“p”和“q”。如何在 Java 中使用“string.split”来做到这一点。我使用过像`s.split("^")`,`s.split("\^")`和`s.split("\\^")`!这样的语法。但是数组列表总是只有一个元素！谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T12:10:56.753

```
System.out.println(Arrays.toString("p^q".split("\\^"))); 
```

印刷

```
[p, q] 
```

这证明由返回的数组`split`不是一个，而是两个元素，并且正是您需要的那些。

# c# - 为什么 SMO 脚本程序不生成外键标头？

> ID：13330973
> 
> 赞同：3
> 
> 时间：2012-11-11T12:08:50.183
> 
> 标签：c#, sql-server-2008, tsql, smo

我正在创建一个程序来使用随 SQL Server 2008 分发的 SMO 库生成我的数据库架构。

我得到的脚本输出代码与配置为输出所有内容时的 SQL Server Management Studio 输出几乎相同，但有一个奇怪的例外：它不输出它在底部生成的外键约束的注释标题，而 SSMS 可以。谁能弄清楚这是为什么？这是我的代码：

```
private void btnExportScript_Click(object sender, EventArgs ea) {
    Server srv = setupConnection();

    // Reference the database
    if (!srv.Databases.Contains(cbChooseDb.SelectedItem.ToString())) {
        _utils.ShowError("Couldn't find DB '" + cbChooseDb.SelectedItem.ToString() + "'.");
        return;
    }
    Database db = srv.Databases[cbChooseDb.SelectedItem.ToString()];

    StringBuilder builder = new StringBuilder();
    try {
        Scripter scrp = new Scripter(srv);
        scrp.Options.AppendToFile = false;
        scrp.Options.ToFileOnly = false;
        scrp.Options.ScriptDrops = false;             // Don't script DROPs
        scrp.Options.Indexes = true;                  // Include indexes
        scrp.Options.DriAllConstraints = true;        // Include referential constraints in the script
        scrp.Options.Triggers = true;                 // Include triggers
        scrp.Options.FullTextIndexes = true;          // Include full text indexes
        scrp.Options.NonClusteredIndexes = true;      // Include non-clustered indexes
        scrp.Options.NoCollation = false;             // Include collation
        scrp.Options.Bindings = true;                 // Include bindings
        scrp.Options.SchemaQualify = true;            // Include schema qualification, eg. [dbo]
        scrp.Options.IncludeDatabaseContext = false;
        scrp.Options.AnsiPadding = true;
        scrp.Options.FullTextStopLists = true;
        scrp.Options.IncludeIfNotExists = false;
        scrp.Options.ScriptBatchTerminator = true;
        scrp.Options.ExtendedProperties = true;
        scrp.Options.ClusteredIndexes = true;
        scrp.Options.FullTextCatalogs = true;
        scrp.Options.SchemaQualifyForeignKeysReferences = true;
        scrp.Options.XmlIndexes = true;
        scrp.Options.IncludeHeaders = true;

        // Prefectching may speed things up
        scrp.PrefetchObjects = true;

        var urns = new List<Urn>();

        // Iterate through the tables in database and script each one.
        foreach (Table tb in db.Tables) {
            if (tb.IsSystemObject == false) {
                // Table is not a system object, so add it.
                urns.Add(tb.Urn);
            }
        }

        // Iterate through the views in database and script each one.  Display the script.
        foreach (Microsoft.SqlServer.Management.Smo.View view in db.Views) {
            if (view.IsSystemObject == false) {
                // View is not a system object, so add it.
                urns.Add(view.Urn);
            }
        }

        // Iterate through the stored procedures in database and script each one.  Display the script.
        foreach (StoredProcedure sp in db.StoredProcedures) {
            if (sp.IsSystemObject == false) {
                // Procedure is not a system object, so add it.
                urns.Add(sp.Urn);
            }
        }

        // Start by manually adding DB context
        builder.AppendLine("USE [" + db.Name + "]");
        builder.AppendLine("GO");

        System.Collections.Specialized.StringCollection sc = scrp.Script(urns.ToArray());
        foreach (string st in sc) {
            // It seems each string is a sensible batch, and putting GO after it makes it work in tools like SSMS.
            // Wrapping each string in an 'exec' statement would work better if using SqlCommand to run the script.
            builder.Append(st.Trim(new char[] { '\r', '\n' }) + "\r\nGO\r\n");
        }
    }
    catch (Exception ex) {
        showExceptionError("Couldn't generate script.", ex);
        return;
    }

    try {
        File.WriteAllText(txtExportToFile.Text, builder.ToString());
        _utils.ShowInfo("DB exported to script at: " + txtExportToFile.Text);
    }
    catch (Exception ex) {
        showExceptionError("Couldn't save script file.", ex);
        return;
    }
} 
```

请注意，外键属于 DRI 约束类别，并且由于`scrp.Options.DriAllConstraints = true;`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-30T13:59:40.240

我在这里有一个解决方案：[Can't get EnumScript() to generate constraints](https://stackoverflow.com/a/19070280/740987)

出于某种原因，`Scripter`当它给出一个 Urn 列表时不会发出 DRI 约束（外键等），但如果一次给定一个 Urn，它会发出。诀窍是按照祖先的顺序给 Urns：必须在约束引用它们之前定义表。为此，我使用了`DependencyWalker`.

这是一个概要：

```
 var urns = new List<Urn>();
        Scripter schemaScripter = new Scripter(srv) { Options = schemaOptions };
        Scripter insertScripter = new Scripter(srv) { Options = insertOptions };
        var dw = new DependencyWalker(srv);

        foreach (Table t in db.Tables)
            if (t.IsSystemObject == false)
                urns.Add(t.Urn);
        DependencyTree dTree = dw.DiscoverDependencies(urns.ToArray(), true);
        DependencyCollection dColl = dw.WalkDependencies(dTree);

        foreach (var d in dColl)
        {
            foreach (var s in schemaScripter.Script(new Urn[] { d.Urn }))
                strings.Add(s);
            strings.Add("GO");
            if (scriptData)
            {
                int n = 0;
                foreach (var i in insertScripter.EnumScript(new Urn[] {d.Urn}))
                {
                    strings.Add(i);
                    if ((++n) % 100 == 0)
                        strings.Add("GO");
                }
            }
        } 
```

注意：每隔一段时间添加一个“GO”可以保持批量较小，因此 SSMS 不会耗尽内存。

# python - 跨模块共享单例

> ID：13330974
> 
> 赞同：11
> 
> 时间：2012-11-11T12:08:55.723
> 
> 标签：python, python-3.x, singleton

给定两个模块，main 和 x，其内容如下：

主要的：

```
class Singleton(object):
    _instance = None
    def __new__(cls, *args, **kwargs):
        if not cls._instance:
            cls._instance = super(Singleton, cls).__new__(cls, *args, **kwargs)
        cls._instance.x = 10
        return cls._instance
uvw = Singleton()

if __name__ == "__main__":
    print(id(uvw))
    uvw.x += 10
    print(uvw.x)
    import x 
```

和 x 分别为：

```
import main

print(id(main.uvw))
print(main.uvw.x) 
```

我现在希望执行 main 会在两个实例中产生相同的 ID 和值 20，但我得到的是：

```
$ python main.py
140592861777168
20
140592861207504
10 
```

有什么办法可以确保`uvw`两个地方都是同一个对象吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-11T12:16:00.927

我认为问题在于您的`Singleton`类正在以某种方式重新加载，因此`_instance`在第二个模块中丢失了它的字段。

* * *

我认为这会起作用：

`singleton.py`：

```
class Singleton(object):
    _instance = None
    def __new__(cls, *args, **kwargs):
        if not cls._instance:
            cls._instance = super(Singleton, cls).__new__(cls, *args, **kwargs)
        cls._instance.x = 10
        return cls._instance 
```

`a.py`：

```
from singleton import Singleton
uvw = Singleton()
print(id(uvw))
uvw.x += 10
print(uvw.x) 
```

`b.py`：

```
from singleton import Singleton
uvw = Singleton()
print(id(uvw))
uvw.x += 10
print(uvw.x) 
```

`main.py`

```
import a
import b 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-11T12:20:35.053

Python 按名称加载每个模块一次（除非`reload(module)`被调用）。如果你运行`main.py`，模块是`__main__`（尝试打印`uvw.__class__.__module__`）。`x`导入时`main`，调用的模块`main`是第一次加载。

如果您`uvw`在第三个模块中定义，或者在`x`-- 只要它以相同的方式导入到`__main__`并且`x`-- 它将是同一个对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-11T12:16:56.583

我发现问题是`main`从命令行执行时加载了两次，一次是 as `__main__`，第二次是由 x as 导入时`main`。

我发现了一个非常邪恶的黑客来规避第二次加载：

```
sys.modules["main"] = sys.modules["__main__"] 
```

在我的情况下，将主模块和单例类分开是不利的。

# iphone - 如何在自定义控件中添加放大镜？

> ID：13330975
> 
> 赞同：8
> 
> 时间：2012-11-11T12:08:58.510
> 
> 标签：iphone, ios, ipad, uiwebview, magnification

如何在自定义控件中添加放大镜？控件是 UIView 的子级。（这是一个 UIWebView - 但本机放大功能在某些页面上不起作用。）

**更新：**

也许可以在 UIWebView 上强制绘制放大镜？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-11T17:56:46.570

## 1\. 将以下文件添加到您的项目中：

放大镜视图.h：

```
//
//  MagnifierView.h
//  SimplerMaskTest
//

#import <UIKit/UIKit.h>

@interface MagnifierView : UIView {
    UIView *viewToMagnify;
    CGPoint touchPoint;
}

@property (nonatomic, retain) UIView *viewToMagnify;
@property (assign) CGPoint touchPoint;

@end 
```

放大镜视图.m：

```
//
//  MagnifierView.m
//  SimplerMaskTest
//

#import "MagnifierView.h"
#import <QuartzCore/QuartzCore.h>

@implementation MagnifierView
@synthesize viewToMagnify;
@dynamic touchPoint;

- (id)initWithFrame:(CGRect)frame {
    return [self initWithFrame:frame radius:118];
}

- (id)initWithFrame:(CGRect)frame radius:(int)r {
    int radius = r;

    if ((self = [super initWithFrame:CGRectMake(0, 0, radius, radius)])) {
        //Make the layer circular.
        self.layer.cornerRadius = radius / 2;
        self.layer.masksToBounds = YES;
    }

    return self;
}

- (void)setTouchPoint:(CGPoint)pt {
    touchPoint = pt;
    // whenever touchPoint is set, update the position of the magnifier (to just above what's being magnified)
    self.center = CGPointMake(pt.x, pt.y-66);
}

- (CGPoint)getTouchPoint {
    return touchPoint;
}

- (void)drawRect:(CGRect)rect {
    CGContextRef context = UIGraphicsGetCurrentContext();
    CGRect bounds = self.bounds;
    CGImageRef mask = [UIImage imageNamed: @"loupe-mask@2x.png"].CGImage;
    UIImage *glass = [UIImage imageNamed: @"loupe-hi@2x.png"];

    CGContextSaveGState(context);
    CGContextClipToMask(context, bounds, mask);
    CGContextFillRect(context, bounds);
    CGContextScaleCTM(context, 1.2, 1.2);

    //draw your subject view here
    CGContextTranslateCTM(context,1*(self.frame.size.width*0.5),1*(self.frame.size.height*0.5));
    //CGContextScaleCTM(context, 1.5, 1.5);
    CGContextTranslateCTM(context,-1*(touchPoint.x),-1*(touchPoint.y));
    [self.viewToMagnify.layer renderInContext:context];

    CGContextRestoreGState(context);
    [glass drawInRect: bounds];
}

- (void)dealloc {
    [viewToMagnify release];
    [super dealloc];
}

@end 
```

TouchReader.h：

```
//
//  TouchReader.h
//  SimplerMaskTest
//

#import <UIKit/UIKit.h>
#import "MagnifierView.h"

@interface TouchReader : UIView {
    NSTimer *touchTimer;
    MagnifierView *loop;
}

@property (nonatomic, retain) NSTimer *touchTimer;

- (void)addLoop;
- (void)handleAction:(id)timerObj;

@end 
```

TouchReader.m:

```
//
//  TouchReader.m
//  SimplerMaskTest
//

#import "TouchReader.h"
#import "MagnifierView.h"

@implementation TouchReader

@synthesize touchTimer;

- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
    self.touchTimer = [NSTimer scheduledTimerWithTimeInterval:0.5 target:self selector:@selector(addLoop) userInfo:nil repeats:NO];

    // just create one loop and re-use it.
    if (loop == nil) {
        loop = [[MagnifierView alloc] init];
        loop.viewToMagnify = self;
    }

    UITouch *touch = [touches anyObject];
    loop.touchPoint = [touch locationInView:self];
    [loop setNeedsDisplay];
}

- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {
    [self handleAction:touches];
}

- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {
    [self.touchTimer invalidate];
    self.touchTimer = nil;
    [loop removeFromSuperview];
}

- (void)touchesCancelled:(NSSet *)touches withEvent:(UIEvent *)event {
    [self.touchTimer invalidate];
    self.touchTimer = nil;
    [loop removeFromSuperview];
}

- (void)addLoop {
    // add the loop to the superview.  if we add it to the view it magnifies, it'll magnify itself!
    [self.superview addSubview:loop];
    // here, we could do some nice animation instead of just adding the subview...
}

- (void)handleAction:(id)timerObj {
    NSSet *touches = timerObj;
    UITouch *touch = [touches anyObject];
    loop.touchPoint = [touch locationInView:self];
    [loop setNeedsDisplay];
}

- (void)dealloc {
    [loop release];
    loop = nil;
    [super dealloc];
}

@end 
```

基于：[http ://coffeeshopped.com/2010/03/a-simpler-magnifying-glass-loupe-view-for-the-iphone](http://coffeeshopped.com/2010/03/a-simpler-magnifying-glass-loupe-view-for-the-iphone)

## 2\. 添加以下图片：

代码上使用的图像：

放大镜-hi@2x.png:

![放大镜-hi@2x.png](../Images/e4432359748c0cf335458a15a42e143e.png)

放大镜掩码@2x.png：

![放大镜掩码@2x.png](../Images/6a07a1f03bca9da60210befff4b3f5e1.png)

带有阴影的原始但居中的图像（此时未使用）：

放大镜-阴影-hi@2x.png:

![放大镜-阴影-hi@2x.png](../Images/91c00fc05c8ab6c41f1145e1c25d8911.png)

放大镜阴影掩码@2x.png：

![放大镜阴影掩码@2x.png](../Images/f7c4a3e2466145d5ca11a65dc70ddfb7.png)

## 3\. 用 TouchReader 替换 xib 文件上的主 UIView

放大镜将自动工作，除了那些自己捕捉触摸事件的控件（例如，UIWebView）。并且上面的代码不支持带有阴影的图像。如果您成功解决了此问题，请为问题添加新答案。

**更新：**

更改以下代码以添加`UIWebView`支持。`UIView`应该保留`UIView`。

```
@interface TouchReader : UILongPressGestureRecognizer 
```

并添加一个手势`webView`：

```
TouchReader* gestureMagnifier = [[[TouchReader alloc] initWithTarget:self action:@selector(handleMagnifier:)] autorelease];
gestureMagnifier.webView = editSource;
gestureMagnifier.delegate = self;
gestureMagnifier.minimumPressDuration = 0.5;
[webView addGestureRecognizer:gestureMagnifier]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-04T17:00:29.230

TouchReader.h：

```
//- (void)handleAction:(id)timerObj;
-(void) handleGestureAction:(CGPoint)location; 
```

TouchReader.m:

```
-(void)awakeFromNib
{
    UILongPressGestureRecognizer * longPressGesture = [[UILongPressGestureRecognizer alloc] initWithTarget:self action:@selector(handleGesture:)];
    [self addGestureRecognizer:longPressGesture];
}

-(void)handleGesture:(UILongPressGestureRecognizer *)longPressGesture
{

    CGPoint location = [longPressGesture locationInView:self];

    switch (longPressGesture.state) {
        case UIGestureRecognizerStateBegan:
            self.touchTimer = [NSTimer scheduledTimerWithTimeInterval:0.5
                                                               target:self
                                                             selector:@selector(addLoop)
                                                             userInfo:nil
                                                              repeats:NO];

            // just create one loop and re-use it.
            if(loop == nil){
                loop = [[MagnifierView alloc] init];
                loop.viewToMagnify = self;
            }

            loop.touchPoint = location;
            [loop setNeedsDisplay];
            break;

        case UIGestureRecognizerStateChanged:
            [self handleGestureAction:location];
            break;

        case UIGestureRecognizerStateEnded:
            [self.touchTimer invalidate];
            self.touchTimer = nil;

            [loop removeFromSuperview];
            loop=nil;
            break;

        default:
            break;
    }
}

- (void)addLoop {
    // add the loop to the superview.  if we add it to the view it magnifies, it'll magnify itself!
    [self.superview addSubview:loop];
}

-(void) handleGestureAction:(CGPoint)location
{
    loop.touchPoint = location;
    [loop setNeedsDisplay];

} 
```

你不再需要这些`touches...`方法了。

# wcf - 如何将异常从 WCF 服务传递到服务主机？

> ID：13330977
> 
> 赞同：1
> 
> 时间：2012-11-11T12:09:27.873
> 
> 标签：wcf

我有 WCF 服务。

在某些情况下，服务失败，需要人工干预。

我希望能够将异常传递给服务主机并使其失败，而不是仅导致特定调用失败。

该服务是异步 MSMQ 服务并托管在自定义应用程序中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T12:59:57.563

该线程对如何在服务和主机之间进行通信有一些想法。基本上，您使用一个单例，这两个部分都可以实例化和共享信息——注意线程同步。

[如何在 WCF 服务和宿主应用程序之间进行通信？](https://stackoverflow.com/questions/4679946/how-to-communicate-between-wcf-service-and-host-application)

另一种选择是在服务遇到问题时使用 IerroHandler 设置一些标志，然后在服务任何请求之前使用 IDispatcherMessageInspector 检查标志。它不会停止主机，但会阻止进一步的服务工作，直到您重新启动。

# multilingual - php和mysql多语言页面

> ID：13330982
> 
> 赞同：-2
> 
> 时间：2012-11-11T12:09:45.660
> 
> 标签：multilingual

我是 PHP 新手，经过一些教程后，我制作了一个 MVC 框架，我真的学到了很多东西。我知道使用像 Zend 这样的内置框架，我认为我可以很容易地做到这一点。所以我接下来要做的是建立一个多语言网站。首先将只针对罗马尼亚语和英语等语言。

我遇到的问题是，在审查了其中一位管理员后，我可以选择女巫用户可以向网站添加新页面，这里的基本语言将是罗马尼亚语。所以会有至少 200 个单词的文本，并且可能有数据库可以保留的尽可能多的页面。所以应该有类似自动翻译的东西，但这还不够好，认为这将是一个演示站点。

我已经研究了这方面的教程和示例，但我无法找到解决我的问题的解决方案。我的页面内容将从数据库生成。在一些错误的解决方案之后，我想到了一个解决方案，在数据库中只保留一些 id 而不是单词/短语，并且该 id 对应于翻译表中的一些 id。这不是一个好的选择，认为从一种语言适应另一种语言没有好处。

你能给我一些解决方案吗？或者你能给我一些很好的教程/例子来解决我的问题吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T12:50:51.920

我只会向使用英语和罗马尼亚语内容的人展示英语内容，以向使用罗马尼亚语的人展示。如果我使用英语网站并转到您的个人资料，我会看到您的所有文章，甚至是罗马尼亚语的文章。但是当我浏览时`latest`，`popular`......我只看到英文的。

数据库结构：

**语言表**

```
language_id | language_name | langauge_code
-------------------------------------------
     1      |    English    |      en
     2      |     Român     |      ro
     3      |    Spanish    |      es 
```

**发布表**

```
post_id | user_id | language_id | post_title | post_content
------------------------------------------------------------
   23   |    7    |      2      |     ...    |     ...
   24   |    5    |      1      |     ...    |     ... 
```

如果您真的想要为所有内容添加第三张表的翻译，那么您将拥有原始语言，带有选项：*罗马尼亚语也可用*，*作者：John Doe*， *翻译：Jane Doe* ...

**翻译表**

```
trans_id | post_id | user_id | language_id | post_title | post_content
----------------------------------------------------------------------
    4    |    23   |    4    |      1      |     ...    |     ...
    5    |    23   |    5    |      3      |     ...    |     ... 
```

您不必太担心翻译，我只会翻译静态内容（页眉、页脚、导航、按钮......），让用户以他们想要的任何语言发布，如果您在您的网站上有评论，他们将使用很多语言。其他网站不用担心（脸书、推特……）。

您可能还想使用[gettext](http://en.wikipedia.org/wiki/GNU_gettext)`.po`查看和`.mo`文件，您可以生成可与[Poedit一起使用的翻译文件](http://www.poedit.net/)

希望这可以帮助。

# javascript - 谷歌地图v2控制位置

> ID：13330984
> 
> 赞同：-2
> 
> 时间：2012-11-11T12:09:55.117
> 
> 标签：javascript, google-maps, google-maps-api-2

我正在使用带有默认 UI 的 Google maps api v2，因为设置为默认值时控件看起来要好得多

```
<script type="text/javascript">
var map = null;
    function load() {
        map = new GMap2(document.getElementById('map'),
        {mapTypes:[G_PHYSICAL_MAP]});
        map.setCenter(new GLatLng(32.0000, 19.3000), 2);
        map.setUIToDefault();
    }
</script> 
```

我想将所有控件（缩放和地图类型）放在右侧。我知道如何在 V3 中做到这一点，但在这里我迷路了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T12:20:46.190

查看[定位 API](https://developers.google.com/maps/documentation/javascript/v2/controls#Control_Positioning)

```
var topRight = new GControlPosition(G_ANCHOR_TOP_RIGHT);
map.addControl(mapTypeControl, topRight); 
```

# java - 使用 JPA 注释确保顺序递增或主键

> ID：13330990
> 
> 赞同：0
> 
> 时间：2012-11-11T12:11:25.567
> 
> 标签：java, spring, hibernate

我有一些简单的属性表，它们都扩展了@MappedSuperclass。

每个属性表都需要有自己唯一的从 1L 开始的长序列。因此，表中的记录数将始终等于最后一次插入的主键值。

我想使用 @GeneratedValue 注释但是我不确定使用哪种策略来确保每个表都有自己的主键序列，从 1L 向上。

任何意见，将不胜感激。

我使用 Hibernate 作为我的 JPA 实现。

***永远不会从任何表格中删除记录。*********

///附加背景信息////////

我要解决的问题是，当我更新表中的属性时，会通知应用程序的其他分布式元素他们需要根据新属性更新自己的状态。我想避免在远程调用中传递新记录的标识符，并依赖“只查看最新插入”方法 - 因此我试图确保行数等于最新记录的 ID。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T20:18:11.243

我只是接受了 a_horse_with_no_name 的建议，并使用 Hibernates 自动生成策略生成了 ID——从不需要基于表中行数的实体 ID 的顺序输入或断言。

# asp.net-mvc-3 - 复选框抽动符号未出现

> ID：13330991
> 
> 赞同：0
> 
> 时间：2012-11-11T12:11:25.897
> 
> 标签：asp.net-mvc-3, checkbox

我不知道为什么在我的 mvc 应用程序中，当我将“true”值返回到视图页面中的复选框时，为什么它的 tic 符号没有出现？需要帮助。

查看页面

```
<div id="maindiv">
<%: Html.CheckBoxFor(m => m.status)%>
<%: Html.LabelFor(m => m.status)%>
</div> 
```

这是为复选框设置数据的脚本

```
<script type="text/javascript">
   $('#status').val(true);
   alert(" active " + $('#status').val());
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T12:20:14.057

而不是*`$('#status').val(true)`*尝试；

```
$('#status').prop('checked', true); //checked
$('#status').prop('checked', false); //unchecked 
```

或者对于 jQuery 1.5 及以下

```
$('#status').attr('checked','checked'); 
```

# c# - 如何避免 c# 中不可能的布尔状态？

> ID：13330992
> 
> 赞同：11
> 
> 时间：2012-11-11T12:11:43.117
> 
> 标签：c#, .net, exception, exception-handling, truthtable

考虑这个函数，您可以将其视为真值表：

```
public Foo doSomething(bool a, bool b) {

       if ( a &&  b) return doAB();
  else if ( a && !b) return doA();
  else if (!a &&  b) return doB();
  else if (!a && !b) return doNotANotB();

  else throw new Exception("Well done, you defeated boolean logic!");
} 
```

编译器坚持最后一个`else`子句。但从真值表的角度来看，这是一个不可能的状态。

是的，它有效，是的，我可以忍受它。但我想知道 C# 中是否有某种机制可以避免这种代码，或者我是否遗漏了一些明显的东西？

**更新：**
对于奖励积分，纯粹出于好奇，是否有任何语言以不同的方式处理此类事情？也许这不是语言问题，而是智能编译器之一（但我想边缘情况将是难以想象的复杂）。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-11T12:16:07.933

考虑到真值表，最后一个条件完全是多余的。可以在不改变程序逻辑的情况下删除它，如下所示：

```
public MyType doSomething(bool a, bool b) {

      if ( a &&  b) return doAB();
else  if ( a && !b) return doA();
else  if (!a &&  b) return doB();
else/*if (!a && !b)*/ return doNotANotB();
} 
```

现在你有一个最终的包罗万象`if`，你的编译器很高兴。您不必完全删除该条件 - 我经常发现将其保留在评论中以提高可读性是一个好主意。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-11T15:32:09.080

```
if(a) return b ? doAB() : doA();
else return b ? doB() : doNotAnotB(); 
```

或更短：

```
return a ? (b ? doAB() : doA())
         : (b ? doB() : doNotAnotB()); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-11-11T13:08:54.833

试试 f#。如果它可以检测到与其 match 指令匹配的详尽条件，那么它不需要 else。

[http://ganesansenthilvel.blogspot.co.at/2011/12/f-pattern-matching.html?m=1#](http://ganesansenthilvel.blogspot.co.at/2011/12/f-pattern-matching.html?m=1#)！

```
> let testAND x y =
match x, y with
| true, true -> true
| true, false -> false
| false, true -> false
| false, false -> true

> testAND true false;;
val it: bool = true 
```

对于不完整的规范

```
> let testAND x y =
match x, y with
| true, true -> true
// Commented | true, false -> false 
| false, true -> false
| false, false -> true
> testAND true false;; 
```

编译器会说

```
Microsoft.Fsharp.Core.MatchFailureExcption: The match cases were incomplete at:....
Stopped due to error 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-11T12:37:17.417

```
 public MyType doSomething(bool a, bool b)
        {
            switch(a)
            {
                case true:
                    if (b) return doAB();
                    return doA();
                default:
                    if (b) return doB();
                    return doNotANotB();

            }

        } 
```

更新：

请注意，您的原始陈述实际上是：

```
 public MyType doSomething(bool a, bool b)
        {
            if (a && b) return doAB();
            if (a) return doA();
            if (b) return doB();
            return doNotANotB();
        } 
```

为了有趣和简洁（如果不是可读性：p）：

```
static MyType doSomething(bool a, bool b)
        {
            return a && b ? doAB() : a ? doA() : b ? doB() : doNotANotB();
        } 
```

# objective-c - 使用 nsxmlparserdelegate 的提要阅读器

> ID：13330993
> 
> 赞同：1
> 
> 时间：2012-11-11T12:11:47.753
> 
> 标签：objective-c, ios, rss, xml-parsing, nsxmlparser

我正在创建一个显示来自特定 Web 服务的最新提要的应用程序，为此我使用 NSXMLParserDelegate 协议，我阅读了苹果文档，我也尝试了一些教程，但某处似乎出了问题，我不明白如何didEndElement,foundCharacters 工作吗，无论如何我想显示帖子的图像，标题和内容，发布日期，我是 xmlparsing 的新手，这是我的**viewcontroller.h**（我刚刚解析了以下代码中的标题元素）

```
 @property(nonatomic,strong)NSString *currentElement;
   @property(nonatomic,strong)NSString *currentTitle;
   @property(nonatomic,strong)NSMutableArray *titles; 
```

**查看didload**

```
NSURL *url=[NSURL URLWithString:@"http://www.forbes.com/fast/feed"];
NSXMLParser *parser=[[NSXMLParser alloc]initWithContentsOfURL:url];
[parser setDelegate:self];
[parser parse];
NSLog(@"%d",titles.count); 
```

**开始元素**

```
-(void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict
 {

self.currentElement=elementName;

if ([self.currentElement isEqualToString:@"title"]) 
{

    self.currentTitle=[NSMutableString alloc];
    titles=[[NSMutableArray alloc]init];

    titles=[attributeDict objectForKey:@"title"];
}
 } 
```

**发现字符**

```
 -(void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict
 {

self.currentElement=elementName;

if ([self.currentElement isEqualToString:@"title"]) 
{

    self.currentTitle=[NSMutableString alloc];
    titles=[[NSMutableArray alloc]init];

    titles=[attributeDict objectForKey:@"title"];
}
  } 
```

**didEnd 元素**

```
 -(void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName
{
if([self.currentElement isEqualToString:@"title"])
{
    NSLog(@"%@",self.currentTitle);

}
} 
```

***疑虑***

**1）我应该在哪里声明我的标题数组，以便我可以向其中添加单独的标题对象。didStartElement 中的 [attributeDict objectForKey] 有什么用？它为我的程序返回 null**

**2）foundCharacters 委托实际上做了什么？它附加了什么？**

**3）在 didEndElement 之后，为什么编译器没有达到 didStartElement 而不是 foundCharacters ？**

**4）最后我应该实际使用 NSXMLParserDelegate 协议进行 xml 解析，其他像 touchXML、TBXML 和 raywenderlich 中提供的其他协议会有所不同吗？**

我很抱歉发了这么长的帖子，但是关于我的查询，我在网上没有得到任何令人满意的答案，我使用了所有的断点并弄清楚了代表是如何来回调用的，我需要一些有启发性的答案来回答我的查询，谢谢和抱歉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T14:03:24.073

在 didFindCharacters 中，只需将找到的字符添加到 NSMutableString 中，在 didEndElement 中，您知道您结束了什么并将变量设置为您找到的字符串

image: image => didEnd 处的字符是链接的名称，url 在didStart 过去的属性中

title-tag didStart => didStart : html 开始，每个标签都是 html，直到 title-tag 的 didEnd

content: didStart => didStart : html开始，每个标签都是html直到内容的didEnd

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T12:44:35.120

**1.**在开始解析之前声明你的数组。当你遇到一个元素（一个xml标签）时，初始化元素（在类中设置一些BOOL，以便你可以识别你正在阅读的元素）；

**2.**找到的字符是作为标记值找到的字符。如果您知道正在读取的元素（读取实例变量），则应将此字符串附加到临时 NSMutableString 并仅在元素结束时将其添加到数组中.

**3.**因为在到达新标签之前它不会开始寻找其他字符。

**例子**

我看到你很困惑，假设你有这个 XML 代码：

```
<person> mickey mouse </person> 
```

当您遇到元素开始的标签时，您会找到其他字符（不是整个字符串，只是字符串的一部分）直到字符串结束，然后当您遇到标签时，元素就结束了。

# php - 上传多个上传文件的问题

> ID：13330998
> 
> 赞同：0
> 
> 时间：2012-11-11T12:12:19.783
> 
> 标签：php, upload

所以我有一个脚本允许文件一次上传：

```
<input style = "width: 90px;" name="book-image" type="file" id="image" value = "Upload">
<input style = "width: 90px;" name="book-preview" type="file" id="book" value = "Upload"> 
```

这是接收脚本：如果图像存在，它会测试预览（pdf）是否存在，然后运行 ​​2 个函数来上传每个图像和 pdf。

```
if(file_exists($_FILES['book-image']['tmp_name']) || is_uploaded_file($_FILES['book-image']['tmp_name'])) {
        //If there is a preview or non-free book
        if((file_exists($_FILES['book-preview']['tmp_name']) || is_uploaded_file($_FILES['book-preview']['tmp_name']))) {
            //valid - upload image, preview and add book 
            if($image = uploadBookImage() && $pdf = uploadPreviewPdf()) {
                $newValues['imagefilename'] = $image;
                $newValues['previewfile'] = $pdf;
                if($qc->insertBook($newValues)) {
                    $message = "Added Book!";
                } else{
                    $error .= "Couldn't add book";
                }
            }
        }
} 
```

$qc->insertBook($values); 将值添加到数据库中。

以下是上传功能：

```
function uploadBookImage() {
$allowedExts = array("jpg", "jpeg", "gif", "png");
$gay = explode(".", $_FILES['book-image']['name']);
$extension = end($gay);
$target_path = "../images/books/";
$filename = $_FILES["book-image"]["name"];
$target_path = $target_path . basename($_FILES['book-image']['name']); 
if ((($_FILES["book-image"]["type"] == "image/gif")
|| ($_FILES["book-image"]["type"] == "image/jpeg")
|| ($_FILES["book-image"]["type"] == "image/png")
|| ($_FILES["book-image"]["type"] == "image/pjpeg"))
&& ($_FILES["book-image"]["size"] < 2000000)
&& in_array($extension, $allowedExts)){
    if (file_exists($target_path)) {
        return false;
    } else {
        if(move_uploaded_file($_FILES['book-image']['tmp_name'], $target_path)) {
            echo $filename;
            return $filename;
        }
    }
} else {
    return false;
}
}//function

function uploadPreviewPdf() {
     $allowedExts = array("pdf");
     $gay = explode(".", $_FILES['book-preview']['name']);
     $extension = end($gay);
     $target_path = '../previews/';
     $filename = $_FILES['book-preview']['name'];
     $target_path = $target_path . basename($_FILES['book-preview']['name']);   
     if((($_FILES['book-preview']['type'] == 'application/pdf'))
         && ($_FILES['book-preview']['size'] < 6000000)
         && in_array($extension, $allowedExts)) {
         if(file_exists($target_path)) {
           return false;
         } else {
        if(move_uploaded_file($_FILES['book-preview']['tmp_name'],    $target_path)) {
            return $filename;
        }
    }
} else {
    return false;
}
} 
```

**问题：当我上传两者时，它会将图像名称的值 1 和 pdf 的文件名添加到数据库中。但是，如果我只上传图像，它会将图像名称添加到数据库中**

**上传图片时var dump的输出：输出图片文件名，上传图片和pdf时var dump的输出：输出图片文件名**

我不知道为什么。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T12:49:57.813

我想到了：

它是：

```
if($image = uploadBookImage() && $pdf = uploadPreviewPdf()) {
     $newValues['imagefilename'] = $image;
     $newValues['previewfile'] = $pdf;
} 
```

它需要是

```
if($image = uploadBookImage()) {
    $newValues['imagefilename'] = $image;
    if($pdf = uploadPreviewPdf()){         
         $newValues['previewfile'] = $pdf;
    }
} 
```

不知道为什么。谁能解释为什么？我唯一的猜测是它没有时间这么快完成两项检查？