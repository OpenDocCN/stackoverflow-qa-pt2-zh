# StackOverflow 问答 13124000-13124999

# javascript - 折叠时手风琴显示其内容的摘要

> ID：13124000
> 
> 赞同：0
> 
> 时间：2012-10-29T14:50:22.613
> 
> 标签：javascript, jquery, jquery-ui, accordion

大家好，我有一组动态创建的手风琴，如果是 3 手风琴，我有以下生成的 html 代码：

```
<h3 value="1" id="header1" class="ui-accordion-header ui-helper-reset 
ui-state-default ui-corner-all" 
role="tab" aria-expanded="true" aria-selected="true" tabindex="0">
    <div id="text1">ACCORDION N1</div>
</h3>
<div id="content1">content of accordion n1</div>
<h3 value="2" id="header2" class="ui-accordion-header ui-helper-reset 
ui-state-default ui-corner-all" 
role="tab" aria-expanded="true" aria-selected="true" tabindex="0">
    <div id="text2">ACCORDION N2</div>
</h3>
<div id="content2">content of accordion n2</div>
<h3 value="3" id="header3" class="ui-accordion-header ui-helper-reset 
ui-state-default ui-corner-all" 
role="tab" aria-expanded="true" aria-selected="true" tabindex="0">
<span class="ui-icon ui-icon-triangle-3-e"></span>
    <div id="text3">ACCORDION N3</div>
</h3>
<div id="content3">content of accordion n3</div>​ 
```

现在我创建了一个函数来在折叠模式下显示手风琴的摘要，这里是代码：

```
$('.clickAccordion').click(function(){
            var tmpAccordionClicked = $(this);
            var tmpIndex = tmpAccordionClicked.attr('value');
            var tmpContent = $("#content"+tmpIndex);
            if(("#header"+tmpIndex).hasClass('ui-state-active')){ 
               $("#text"+tmpIndex).html("ACCORDION N."+tmpIndex);
            }
            if(("#header"+tmpIndex).hasClass('ui-state-default')){
                $("#text"+tmpIndex).html(tmpContent);
            }
    }); 
```

只有在手风琴中只有一项时它才能正常工作，否则如果有多个项目，如果我单击手风琴 n.2，手风琴 n.1 会丢失其摘要。如果我单击第三个，则相同，第一个折叠有摘要，第二个折叠没有摘要。我该如何管理？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T15:14:09.290

对我来说突出的一个问题是您的 if 语句：

```
if("#header"+tmpIndex).hasClass('ui-state-active'){...} 
```

应该是

```
if($("#header"+tmpIndex).hasClass('ui-state-active')){...} 
```

希望这可以帮助。在 jsfiddle.net 上发布一个工作（或不工作）示例以获得更好的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T15:17:21.510

你想太多了。请记住，使用 jQuery，请保持简单。

如果您坚持手动单击，则可以使用以下内容：

```
$('.clickAccordion').click(function(){
    if ($(this).hasClass("ui-state-active")) {
        $(this).find("div").html("ACCORDION N." + $(this).index());
    }
    else {
        $(this).find("div").html($(this).next().text());
    }
}); 
```

***然而***

如果您使用的是[jQueryUI ，则在对](http://api.jqueryui.com)[手风琴](http://api.jqueryui.com/accordion)的调用中有一种更简单的方法：

```
$("#accordion").accordion({
    activate: function(e, ui) {
        ui.oldHeader.html(ui.oldPanel.text());
        ui.newHeader.html("ACCORDION N." + ui.newHeader.index());
    }
}); 
```

# sql-server - 如何仅在 Sql Server 中显示日期时间选择？

> ID：13124004
> 
> 赞同：0
> 
> 时间：2012-10-29T14:50:32.453
> 
> 标签：sql-server, stored-procedures, join, outer-join

`datetime`当我只选择日期时间时，我需要显示。因为我尝试运行 SQL 但显示所有`datetime`.

表`Emp`：

```
EmpNo   fullName
00001   Midna
00002   Klog
00003   Porla
00004   Seka
00005   Mila 
```

表`tFile`：

```
EmpNo   cDate                     cTime
00001   2012-10-29 00:00:00.000   2012-10-29 07:52:00.000
00001   2012-10-29 00:00:00.000   2012-10-29 19:00:00.000
00002   2012-10-29 00:00:00.000   2012-10-29 07:40:00.000
00002   2012-10-29 00:00:00.000   2012-10-29 19:32:00.000
00005   2012-10-29 00:00:00.000   2012-10-29 07:58:00.000
00005   2012-10-29 00:00:00.000   2012-10-29 18:35:00.000 
```

这段代码

```
SELECT 
   em.EmpNo as 'EmpNo', 
   case 
       when tf.cDate <> null then tf.cDate 
            else coalesce(tf.cDate, '2012-10-29') 
   end as 'cDate', 
   Min(tf.cTime) as 'timeIn', 
   Max(tf.cTime) as 'timeOut'
FROM 
   tFile tf 
Full Outer join 
   Emp em On tf.EmpNo = em.EmpNo
Group By 
   em.EmpNo,tf.cDate
Order By 
   'EmpNo' 
```

返回此结果：

```
EmpNo   cDate                     timeIn                     timeOut
-------------------------------------------------------------------------------------
00001   2012-10-21 00:00:00.000   2012-10-21 07:22:00.000    2012-10-21 17:35:00.000
00001   2012-10-24 00:00:00.000   2012-10-24 07:30:00.000    2012-10-24 19:00:00.000
00001   2012-10-29 00:00:00.000   2012-10-29 07:52:00.000    2012-10-29 19:00:00.000
00002   2012-10-25 00:00:00.000   2012-10-25 07:58:00.000    2012-10-25 18:35:00.000
00002   2012-10-22 00:00:00.000   2012-10-22 08:04:00.000    2012-10-22 17:55:00.000
00002   2012-10-24 00:00:00.000   2012-10-24 08:00:00.000    2012-10-24 18:45:00.000
00002   2012-10-29 00:00:00.000   2012-10-29 07:40:00.000    2012-10-29 19:32:00.000
00003   2012-10-29 00:00:00.000   NULL                       NULL
00004   2012-10-29 00:00:00.000   NULL                       NULL
00005   2012-10-28 00:00:00.000   2012-10-28 07:30:00.000    2012-10-28 19:20:00.000
00005   2012-10-27 00:00:00.000   2012-10-27 07:38:00.000    2012-10-27 19:30:00.000
00005   2012-10-29 00:00:00.000   2012-10-29 07:58:00.000    2012-10-29 18:35:00.000 
```

但我需要这个结果：

我选择日期前。`2012-10-29`那么我只需要显示所有行`2012-10-29`。

但是有些`Empno`没有数据，`2012-10-29`它被设置为NULL。

```
EmpNo   cDate                     timeIn                     timeOut
---------------------------------------------------------------------------------------
00001   2012-10-29 00:00:00.000   2012-10-29 07:52:00.000    2012-10-29 19:00:00.000
00002   2012-10-29 00:00:00.000   2012-10-29 07:40:00.000    2012-10-29 19:32:00.000
00003   2012-10-29 00:00:00.000   NULL                       NULL
00004   2012-10-29 00:00:00.000   NULL                       NULL
00005   2012-10-29 00:00:00.000   2012-10-29 07:58:00.000    2012-10-29 18:35:00.000 
```

谢谢你的时间。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T14:57:40.107

这个怎么样？

```
where(datediff(dd, coalesce(cTime, getdate()), getdate()) = 0 
```

或者，如果你真的只想看 10 月 29 日：

```
where(datediff(dd, coalesce(cTime, '2012-10-29'), '2012-10-29') = 0 
```

# .net - 如何在 .NET 2 中显式转换此派生类？

> ID：13124009
> 
> 赞同：1
> 
> 时间：2012-10-29T14:51:00.173
> 
> 标签：.net, generics, inheritance, .net-2.0, derived-class

`.NET2.0`尽管搜索了谷歌和 SO，我似乎无法找到如何做到这一点。

假设我有以下课程：

```
public class Fruit {
    prop string Color {get; set;}
}

public class Apple : Fruit {
    public Apple() {
        this.Color = "Red";
    }
}

public class Grape: Fruit {
    public Grape() {
        this.Color = "Green";
    }
} 
```

现在我想这样做：

```
public List<Fruit> GetFruit() {
    List<Fruit> list = new List<Fruit>();
    // .. populate list ..
    return list;
}    

List<Grape> grapes = GetFruit(); 
```

但我当然明白了`Cannot implicitly convert type Fruit to Grape`。

我意识到这是因为如果我这样做了，我真的会把事情搞砸：

```
List<Grape> list = new List<Grape>();
list.add(new Apple()); 
```

因为虽然两者都是`Fruit`，但 an`Apple`不是`Grape`。所以这是有道理的。

但我不明白为什么我不能这样做：

```
List<Fruit> list = new List<Fruit>();
list.add(new Apple());
list.add(new Grape()); 
```

至少，我需要能够：

```
List<Fruit> list = new List<Fruit>();
list.add(new Apple());   // will always be Apple
list.add(new Apple());   // will always be Apple
list.add(new Apple());   // will always be Apple 
```

关于如何做到这一点的任何想法`.NET2`？

谢谢

**编辑**

对不起，我弄错了。我实际上可以这样做：

```
List<Fruit> list = new List<Fruit>();
list.add(new Apple());
list.add(new Grape()); 
```

并且成功`.FindAll`了`.Convert`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T15:02:11.870

我 100% 确定你可以做到这一点：

```
List<Fruit> list = new List<Fruit>();
list.add(new Apple());
list.add(new Grape()); 
```

您为什么要坚持使用 .net 2.0 有什么特别的原因吗？

使用 .net 3.5，您将有两种可能性：

```
List<Apple> apples = list.OfType<Apple>().ToList(); 
```

这将过滤您的列表并返回一个苹果列表。您还有：

```
List<Apple> apples = list.Cast<Apple>().ToList(); 
```

它不会过滤但假设列表中的所有元素都是苹果（如果不是，则抛出和 InvalidCastException）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T14:53:05.667

由于您首先需要特定的东西，`.Net 2.0`我会使用[FindAll](http://msdn.microsoft.com/en-us/library/fh1w7y8z%28v=vs.80%29.aspx)过滤每个然后使用[ConvertAll](http://msdn.microsoft.com/en-us/library/73fe8cwf%28v=vs.80%29.aspx)。

```
List<Grape> grapes = list
  .FindAll(delegate(Fruit f) { return f is Grape; })
  .ConvertAll<Grape>(delegate(Fruit f) { return f as Grape; }); 
```

至于你的问题：

> 但我不明白为什么我不能这样做：

```
List<Fruit> list = new List<Fruit>();
list.Add(new Apple());
list.Add(new Grape()); 
```

您可以这样做，这是完全有效的，您是否输入错误（添加与添加）？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-29T15:00:37.857

列表永远不会是协变的，即使在更高版本的 .NET 中也是如此（可枚举是）。

等应该已经可以正常工作了-这`list.Add(new Apple())`没有问题。

对于作业，您可能必须执行以下操作：

```
List<Grape> grapes = GetFruit().ConvertAll(x => (Grape)x); 
```

或在较旧的编译器上：

```
List<Grape> grapes = GetFruit().ConvertAll<Grape>(delegate(Fruit x) {
    return (Grape)x;
}); 
```

（在语义上是相同的）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T15:07:38.783

如果您确定葡萄只会返回`Grape`对象，则可以使用 LINQ Cast：

[Enumerable.Cast 方法](http://msdn.microsoft.com/es-es/library/bb341406.aspx)

```
List<Garapes> grapes = GetFruit().Cast<Grape>().ToList(); 
```

在进行转换之前，您还可以使用 LINQ`Where`仅获取葡萄果实

`Where(f => f is Grape)`

# objective-c - 使用带有格式的 NSString 定义方法

> ID：13124013
> 
> 赞同：4
> 
> 时间：2012-10-29T14:51:13.617
> 
> 标签：objective-c, ios

你如何在你自己的类中定义一个接受带有格式的 NSString 的方法？

我看到几个不同的东西使用它`NSLog`，`[NSPredicate predicateWithFormat:(NSString *)predicateFormat, ...]`当然`[NSString stringWithFormat:(NSString *)format, ...]`

此外，在头文件中，NSLog 和 stringWithFormat 在声明后有以下内容： `NS_FORMAT_FUNCTION(1,2)`. 谷歌搜索对告诉我这意味着什么没有多大帮助。

显然省略号是格式参数，但是我不知道在方法本身如何处理。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-29T14:56:53.500

您需要使用一些 C 代码：

```
- (void)someMethod:(NSString *)format,... {
    va_list argList;
    va_start(argList, format);
    while (format) {
        // do something with format which now has next argument value
        format = va_arg(argList, id);
    }
    va_end(argList);
} 
```

并且可以将 args 转发到`NSString`如下：

```
- (void)someMethod:(NSString *)format,... {
    va_list args;
    va_start(args, format);
    NSString *msg = [[NSString alloc] initWithFormat:format arguments:args];
    va_end(args);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T14:56:37.143

您正在寻找具有可变数量参数的 Objective-C 方法。这是如何完成的：

标头中的声明：

```
- (void)setContentByAppendingStrings:(NSString *)firstString, ... 
   NS_REQUIRES_NIL_TERMINATION; 
```

执行：

```
- (void)setContentByAppendingStrings:(NSString *)firstArg, ...
{
    NSMutableString *newContentString = [NSMutableString string];

    va_list args;
    va_start(args, firstArg);
    for (NSString *arg = firstArg; arg != nil; arg = va_arg(args, NSString*))
    {
        [newContentString appendString:arg];
    }
    va_end(args);

    contents = newContentString;
} 
```

资料来源：[可可与爱](http://www.cocoawithlove.com/2009/05/variable-argument-lists-in-cocoa.html)。

# azure - SQL Azure 分发重读查询以进行报告

> ID：13124014
> 
> 赞同：0
> 
> 时间：2012-10-29T14:51:27.137
> 
> 标签：azure, azure-sql-database, azure-web-roles

我们正在为我们的应用程序使用 SQL Azure，并且需要一些关于如何处理扫描大量数据以进行报告的查询的输入。我们的应用程序是读/写密集型的，因此我们不希望报告查询阻塞其余操作。

为了避免由长时间运行的查询引起的连接池问题，我们将查询数据库以报告的代码放在工作角色上。这仍然不能避免数据库受到一堆只读查询的影响。

这里有什么我们遗漏的吗 - 我们可以设置一个所有报告调用都命中的只读副本吗？

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T11:14:34.317

查看 SQL Azure 数据同步。它将允许您逐步更新您的报告数据库。

这里有几个链接可以帮助您入门

[http://msdn.microsoft.com/en-us/library/hh667301.aspx](http://msdn.microsoft.com/en-us/library/hh667301.aspx)

[http://social.technet.microsoft.com/wiki/contents/articles/1821.sql-data-sync-overview.aspx](http://social.technet.microsoft.com/wiki/contents/articles/1821.sql-data-sync-overview.aspx)

我认为它仍然在 CTP 中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T05:07:37.223

这个怎么样：

1.  为报告创建单独的连接字符串，例如使用不同的应用程序名称
2.  对于您的报告查询，请使用 SET TRANSACTION ISOLATION LEVEL SNAPSHOT

这应该可以防止您长时间运行的查询阻塞您的操作查询。这也将使您的报告获得一致的阅读。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T21:13:12.927

You are saying you have a lot of read-only queries...any possibility of caching them? (perfect since it is read-only)

What reporting tool are you using? You can output cache the queries as well if needed.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-29T15:13:27.717

既然您在谈论报告，我假设您不需要实时数据。在这种情况下，您可以考虑定期（例如每 12 小时）创建生产数据库的副本。

[在 SQL Azure 中，创建副本](http://msdn.microsoft.com/en-us/library/windowsazure/ff951631.aspx)非常容易：

```
-- Execute on the master database.
-- Start copying.
CREATE DATABASE Database1B AS COPY OF Database1A; 
```

您的报告将在 Database1B 上进行，而不会影响实际的生产数据库 (Database1A)。

# c++ - 如何准确知道用户何时展开 QTreeView 项目？

> ID：13124016
> 
> 赞同：4
> 
> 时间：2012-10-29T14:51:35.217
> 
> 标签：c++, qt, qtreeview, qt4.8

有没有办法准确地知道用户何时开始展开操作，比如单击 QTreeView 中的展开箭头？

对于他双击的情况，我可以捕捉到双击事件。

我尝试`void expand(const QModelIndex &index);`从 QTreeView 重新实现这个插槽，但它似乎不起作用。

在 QTreeView 中调用了一个信号`void expanded(const QModelIndex &index);`，但它似乎是在扩展发生后发送的。

我正在使用 QT 4.8.2

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-30T15:40:27.760

这就是我为获得所需功能所做的事情：

我像这样从 QTreeView 重新实现了 mousePressEvent

```
void MyTreeView::mousePressEvent(QMouseEvent *event)
{
    QModelIndex clickedIndex = indexAt(event->pos());
    if(clickedIndex.isValid())
    {
        QRect vrect = visualRect(clickedIndex);
        int itemIdentation = vrect.x() - visualRect(rootIndex()).x();
        if(event->pos().x() < itemIdentation)
        {
            if(!isExpanded(clickedIndex))
            {
             //do stuff
            }
        }
    }
} 
```

我检查鼠标是否留在项目的文本标签上（在展开箭头上的意思）

这与双击事件相结合，为我提供了我需要的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T15:35:20.907

您可以通过实现更改事件的方法来尝试做到这一点：

```
 void YourTreeView::changeEvent(QEvent *e)
  {
    QFrame::changeEvent(e);

    switch (e->type()) {
    case QEvent::QGraphicsSceneResizeEvent
        //do want you want to do
        break;
    default:
        break;
    }
  } 
```

# android - 地图中间这个奇怪的小圆圈是什么

> ID：13124020
> 
> 赞同：3
> 
> 时间：2012-10-29T14:51:46.633
> 
> 标签：android, android-mapview

我正在使用 Google Maps Add-on 进行开发。我在 MapView 中间发现了一个奇怪的圆圈。**当我滚动视图或点击其他地方时，它就消失了。**

我使用 Hierarchy View 工具调试视图，您可以从 MapView 内部看到，绝对不是我的代码中的一些错位视图。

![在此处输入图像描述](../Images/9470e720b73f9a47846a41d9b988069d.png)

红色标记来自叠加层，只是简单地固定在此 MapView 的中心。

这是代码，非常标准的 MapView 代码：

```
mMapView = new MapView(getActivity(), R.string.key_mapAPIKey);
mMapView.setClickable(false);
mMapView.getController().setZoom(DEFAULT_MAP_ZOOM);
mMapView.getController().animateTo(geoPoint);
mMapView.getOverlays().clear();
mMapView.getOverlays().add(new GoogleMapClassicMarkerOverlay(getResources(), geoPoint)); 
```

**更新-10/30**

叠加层也很普通，只是为了在中间显示一个标记，**我删除了叠加层但圆圈仍然存在**：

```
public class GoogleMapClassicMarkerOverlay extends ItemizedOverlay<OverlayItem> {

    private GeoPoint mGeoPoint;
    private OverlayItem mItem;

    public GoogleMapClassicMarkerOverlay(Resources res, GeoPoint geoPoint) {
        super(boundCenterBottom(new SafeBitmapDrawable(res, R.drawable.map_marker)));
        mGeoPoint = geoPoint;
        mItem = new OverlayItem(mGeoPoint, "", "");
        populate();
    }

    @Override
    protected OverlayItem createItem(int i) {
        return mItem;
    }

    @Override
        public int size() {
        return 1;
    }
} 
```

有人知道如何删除这个有线圆圈吗？

# ruby-on-rails - 在 Ruby on Rails 的实例化过程中，如何让嵌套的子记录了解其父记录？

> ID：13124024
> 
> 赞同：2
> 
> 时间：2012-10-29T14:51:53.780
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我有一个表格用于创建一个`invoice`带有许多`items`.

```
class Invoice < ActiveRecord::Base
  attr_accessible :project_id, :number, :date, :recipient, :items_attributes
  accepts_nested_attributes_for :items
end 
```

现在，当我实例化一个 new`invoice`和一组 contains时`items`，我希望它们在保存之前`items`就*知道*它们所属的内容`invoice`，因此我可以在我的`Item`模型中执行以下操作：

```
class Item < ActiveRecord::Base
  belongs_to :invoice
  after_initialize :set_hourly_rate

  private 

    def set_hourly_rate
      if new_record?
        self.price ||= invoice.project.hourly_rate
      end
    end   

end 
```

现在，我的代码失败了，因为子 ( ) 在实例化期间`item`对其父 ( ) 一无所知。`invoice`只有在保存`invoice`（因此它的嵌套`items`）之后，一切都会解决。但我想在每个新项目被保存**之前为其设置一个默认值。**

如何才能做到这一点？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T15:08:59.713

您可以在发票关联上添加回调，如下所示：

```
class Invoice < ActiveRecord::Base
  # Code
  belongs_to :project
  has_many :items, :after_add => :set_item_price

  private

  def set_item_price(item)
    item.price = project.hourly_rate
  end  

end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T15:07:32.273

拥有`invoice`对象后，您可以使用通过此方法创建的`.items.build`方法（[此处的文档](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html#method-i-has_many)） 创建子记录，但`items`应该有对`invoice` 虽然的引用，但我认为只有在 Invoice 被持久化时他们才会有引用（不太确定.)

# python - 解包需要长度的字符串参数：Windows 问题？

> ID：13124030
> 
> 赞同：2
> 
> 时间：2012-10-29T14:52:18.213
> 
> 标签：python, struct, unpack

我收到上面的错误，当我试图从二进制文件中解压缩浮点数时，它要求我输入 4 的字符串长度。我的代码在我的 Mac 上运行得非常好，但在 Windows 上却不尽如人意。代码如下：

```
for i in range (0,elec_array.nb_chan):

    elec_array.chan[i].x = struct.unpack('f',f.read(4))[0]
    elec_array.chan[i].y = struct.unpack('f',f.read(4))[0] 
```

问题发生`elec_array.chan[i].x`在线路上。但是它不会立即发生，它会首先在循环中经过几次迭代，然后最终给出需要长度为 4 的字符串的错误。同样，代码在 Mac 上运行良好，但由于某种原因停止在我的 Windows 7 PC 上运行。任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T14:54:41.280

您可能忘记以二进制模式打开文件。在文本模式下，`0x0d` `0x0a`序列会缩短为`0x0a`，并且您的文件大小会错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T14:55:26.667

好吧，`read()`分开做；它是 I/O，所以正如您刚刚了解到的那样，它可能会失败。

要进行调试，请在读取数据时打印数据和数据长度，这将帮助您了解发生了什么问题。

如果没有看到文件和周围的代码，很难更具体。您是否以二进制模式打开文件？

# c - 为什么这个 ptrace 错误？

> ID：13124033
> 
> 赞同：1
> 
> 时间：2012-10-29T14:52:32.247
> 
> 标签：c, linux, ptrace

我只是通过调用测试读写内存`ptrace()`，但是当我运行下面显示的代码时，我收到了这样的错误。

```
Processkey() : 0x80481240
readmem pid 3950
Original opcode : 0x4641682b
writemem pid 3950
readmem pid 3950
PEEKDATA error: No such file or directory 
```

如您所见，`readmem()`工作正常，但之后会`readmem()`打印错误。

```
long readmem(int pid, unsigned long addr)
{
    long ret=0;
    printf("readmem pid %d\n", pid);
    ret = ptrace(PTRACE_PEEKDATA, pid, (void *)(addr), 0);
    if(ret<0)
    {
        error("PEEKDATA error");
    }
    return ret;
}

void writemem(int pid, unsigned long addr, long data)
{
    long ret=0;
    printf("writemem pid %d\n", pid);
    ret = ptrace(PTRACE_POKEDATA, pid, (void *)addr, (void *)data);
    if(ret<0)
    {
        error("POKEDATA error");
    }
}

void detach(int pid)
{
    long ret=0;
    ret = ptrace(PTRACE_DETACH, pid, NULL, NULL);
    if(ret<0)
    {
        error("detach() error");
    }
}

void attach(int pid)
{
    long ret=0;
    ret = ptrace(PTRACE_ATTACH, pid, NULL, NULL);
    if(ret<0)
    {
        error("ptrace() error");
    }

    ret = waitpid(pid, NULL, WUNTRACED);
    if(ret<0)
    {
        error("waitpid ()");
    }
}

int main(int argc, char **argv)
{
    long ret = 0;
    pid_t pid = 0;
    REGS *regs;
    unsigned long processkey_addr = 0;
    int stat_value = 0;
    long op = 0;

    pid = atoi(argv[1]);
    processkey_addr = 0x80481240;
    printf("Processkey() : 0x%lx\n", processkey_addr);

    attach(pid);
    op = readmem(pid, processkey_addr);
    printf("Original opcode : 0x%lx\n", op);
    writemem(pid, processkey_addr, 0x41424344);
    printf("Changed opcode : 0x%lx\n", readmem(pid, processkey_addr));
    detach(pid);
} 
```

但是——这让我发疯了——当我测试没有函数的代码（只是在 中内联代码`main()`）时，整个代码运行良好！

有谁知道为什么会发生这种情况...？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T15:44:17.413

这似乎有点奇怪，但您的代码中至少存在一个实际错误。从手册页：

> 出错时，所有请求都返回 -1，并且正确设置了 errno。由于成功的 PTRACE_PEEK* 请求返回的值可能为 -1，因此调用者必须在此类请求后检查 errno 以确定是否发生错误。

您的代码似乎没有检查`errno`，如果返回值为-1，它只是假设发生了错误。

# cookies - 在第一页查看时访问 __UTMZ cookie

> ID：13124034
> 
> 赞同：1
> 
> 时间：2012-10-29T14:52:32.730
> 
> 标签：cookies, google-analytics

当用户点击页面时，我正在使用 javascript 访问 GA cookie __utmz。我遇到的问题是我无法在第一页视图中获取信息。在我看到信息之前，用户必须刷新或导航到第二个页面。

是否可以在第一页视图中获取此信息。如果您想查看我的代码的特定部分，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T22:18:34.073

您只能在 Google 的回调完成后访问 __utmz。只要您使用较新的（~1.6+？）版本的 jQuery，以下*应该可以*工作：

```
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-XXXXX-X']);
_gaq.push(['_trackPageview']);

$.ajax({
  url: ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js',
  dataType: "script",
  cache: true,
  success: function() {
    // Cookie reading code goes here
    console.log(readCookie("__utmz")); 
  }
}); 
```

# excel - OleDbDataAdapter.Update 返回行，但没有行添加到 Excel 电子表格

> ID：13124035
> 
> 赞同：2
> 
> 时间：2012-10-29T14:52:36.210
> 
> 标签：excel, c#-4.0, oledbdataadapter

我可以一次将一行添加到我的 Excel 电子表格中，但是速度非常慢（400 条记录需要 1 分钟，即使使用 Prepare 也是如此）。所以，我知道 Sql 是有效的并且 DataTable 是好的。

有效的代码：

```
 public void InsertFromDataTable(string strSql, DataTable dtTable, string strTableName)
    {
        if (m_oleDbHandler == null)
        {
            m_oleDbHandler = new OleDbHandler(m_strConnection);
        }

        //Do one row at a time since the DataAdapter did not work
        foreach (DataRow drRow in dtTable.Rows)
        {
            OleDbParmCollection cololedbParameters = new OleDbParmCollection();
            foreach (DataColumn dcColumn in dtTable.Columns)
            {
                OleDbParameter odpParameter = new OleDbParameter("@" + dcColumn.ColumnName, drRow[dcColumn.ColumnName]);
                odpParameter.ParameterName = "@" + dcColumn.ColumnName;
                odpParameter.DbType = OleDbHandler.GetDbType(dcColumn.GetType());
                odpParameter.Size = dcColumn.MaxLength;
                odpParameter.SourceColumn = dcColumn.ColumnName;

                cololedbParameters.Add(odpParameter);
            }

            m_oleDbHandler.ExecuteCommand(strSql, cololedbParameters, true);
        }
    }
} 
```

当我尝试使用 DataAdapter 做同样的事情时，它说它返回 458 行，但电子表格中没有新行。失败的代码：

```
 //DataAdapter version
        OleDbParmCollection cololedbParameters = new OleDbParmCollection();
        foreach (DataColumn dcColumn in dtTable.Columns)
        {
            OleDbParameter odpParameter = new OleDbParameter();
            odpParameter.ParameterName = "@" + dcColumn.ColumnName;
            odpParameter.OleDbType = OleDbHandler.GetOleDbType(dcColumn.GetType());
            odpParameter.DbType = OleDbHandler.GetDbType(dcColumn.GetType());
            odpParameter.Size = dcColumn.MaxLength;
            odpParameter.SourceColumn = dcColumn.ColumnName;

            cololedbParameters.Add(odpParameter);
        }

        m_oleDbHandler.InsertFromDataTable(strSql, dtTable, cololedbParameters, strTableName); 
```

接着：

```
 public int InsertFromDataTable(string strSql, DataTable dtTable, OleDbParmCollection cololeDbParameters, string strTableName)
    {
        //Set every row as added so that they will be inserted
        foreach (DataRow drRow in dtTable.Rows)
        {
            drRow.SetAdded();
        }

        //Update the output table
        int intRows = -1;
        try
        {
            OleDbCommand oleDbCommand = new OleDbCommand(strSql, OpenConnection());

            foreach (OleDbParameter oleDbParameter in cololeDbParameters)
            {
                if (oleDbParameter.Value == null)
                {
                    oleDbCommand.Parameters.Add(oleDbParameter.ParameterName, OleDbType.VarChar).Value = DBNull.Value;
                }
                else if (string.IsNullOrEmpty(oleDbParameter.Value.ToString()))
                {
                    oleDbCommand.Parameters.Add(oleDbParameter.ParameterName, OleDbType.VarChar).Value = DBNull.Value;
                }
                else
                {
                    oleDbCommand.Parameters.Add(oleDbParameter);
                }
            }

            OleDbDataAdapter odaAdapter = new OleDbDataAdapter(new OleDbCommand("SELECT * FROM " + strTableName, OpenConnection()));
            odaAdapter.InsertCommand = oleDbCommand;
            odaAdapter.MissingMappingAction = MissingMappingAction.Passthrough;
            odaAdapter.MissingSchemaAction = MissingSchemaAction.Error;
            odaAdapter.TableMappings.Add(strTableName, dtTable.TableName);

            foreach (DataColumn dcColumn in dtTable.Columns)
            {
                odaAdapter.TableMappings[0].ColumnMappings.Add(dcColumn.ColumnName, dcColumn.ColumnName);
            }

            intRows = odaAdapter.Update(dtTable);
        }
        catch (OleDbException ex)
        {
            LogStackTrace();
            LogToDb.LogException(ex, LogToDb.c_strAppError);
            LogToDb.LogMessage("OleDb error", "OleDbHandler.InsertFromDataTable error", strSql, LogToDb.c_intErrorLevelOleDb);
            CancelTransactionAndClose();
            throw;
        }
        finally
        {
            CloseConnection();
        }

        return (intRows);
    } 
```

为什么我会得到 intRows = 458，但 Excel 文件中没有新行？

**编辑：**我刚刚做了一个测试，看看如果我导出到 Microsoft Access .mdb（而不是 Excel）会发生什么，结果告诉我一些事情。我得到 458 个空白行。所以，我怀疑我在 Excel 中得到了 458 个空白行。所以，现在的问题是为什么这些行都是空白的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T20:36:10.653

明白了——错误在下面的部分。这适用于 ExecuteNonQuery，但在没有数据时很糟糕。

```
 foreach (OleDbParameter oleDbParameter in cololeDbParameters)
        {
            if (oleDbParameter.Value == null)
            {
                oleDbCommand.Parameters.Add(oleDbParameter.ParameterName, OleDbType.VarChar).Value = DBNull.Value;
            }
            else if (string.IsNullOrEmpty(oleDbParameter.Value.ToString()))
            {
                oleDbCommand.Parameters.Add(oleDbParameter.ParameterName, OleDbType.VarChar).Value = DBNull.Value;
            }
            else
            {
                oleDbCommand.Parameters.Add(oleDbParameter);
            }
        } 
```

适用于 Access 和 Excel 的更正代码是：

```
 foreach (OleDbParameter oleDbParameter in cololeDbParameters)
    {
            oleDbCommand.Parameters.Add(oleDbParameter);
    } 
```

还有第二个不那么严重的错误。我用了

```
OleDbHandler.GetOleDbType(dcColumn.GetType()); 
```

应该是

```
OleDbHandler.GetOleDbType(dcColumn.DataType); 
```

# html - 将 Django 表单的结果传递给页面

> ID：13124036
> 
> 赞同：1
> 
> 时间：2012-10-29T14:52:37.667
> 
> 标签：html, django

我已经为此工作了一段时间，我决定寻求您的帮助。我有一个正在进行的项目，我正在使用 django 框架来构建站点。我有一个请求用户输入的 html 页面，我已经能够使用`form.cleaned_data['']`. 一种

```
#This is my views.py;

 from django.shortcuts import render_to_response
    from django.template import RequestContext

    from forms import CarloanForm

    def index(request):
        form = CarloanForm()
        if request.POST:
            form = CarloanForm(request.POST)
            if form.is_valid():
                form.save()
        else:
            form = CarloanForm()
        return render_to_response('carloan/index.html', {'form': form},
                      context_instance=RequestContext(request))

#I am extracting the user inputs using;

amount_of_vehicle = form.cleaned_data['cost_of_vehicle_Naira'] 
tenure = form.cleaned_data['loan_repayment_tenure_Months']
interest_rate = form.cleaned_data['interest_rate_Percentage']
equity = form.cleaned_data['equity_contrib_rate_Percentage']
depreciation_rate = form.cleaned_data['depreciation_rate_Percentage'] 
```

我需要做但不知道如何去做的是；

1.  对数据进行一些操作（使用提取`form.cleaned_data['']`），我为此编写了一些代码行；

    ```
    class LoanCalc:
        def __init__(self,amount_of_vehicle,tenure,interest_rate,equity,depreciation_rate):
            self.amount_of_vehicle = float(amount_of_vehicle)
            self.tenure = float(tenure)
            self.interest_rate = float(interest_rate)
            self.equity = float(equity)
            self.depreciation_rate = float(depreciation_rate)
        def interest(self):
            return (self.interest_rate/100) * self.amount_of_vehicle *(self.tenure/12)
        def management_fee(self):
            return 0.01 * (self.amount_of_vehicle + user.interest())
        def processing_fee(self):
            return 0.0025 *(self.amount_of_vehicle + user.interest())
        def legal_fee(self):
            return 0.0075 * (self.amount_of_vehicle + user.interest())
        def residual_amount(self):
            return 0.01 * (self.amount_of_vehicle - ((self.depreciation_rate/100) * self.amount_of_vehicle *(self.tenure/12)))
        def equity_contribution(self):
            return (self.equity/100) * self.amount_of_vehicle
        def LoanPaymentPlan(self):
            months = 1
            total_amount = self.amount_of_vehicle+user.interest()+user.management_fee()+user.processing_fee()+user.legal_fee()+user.residual_amount()
            upfront_payment = user.management_fee()+user.processing_fee()+user.legal_fee()+user.equity_contribution()+user.residual_amount()
            opening_balance = total_amount - upfront_payment
            balance = opening_balance
            while months <= self.tenure:
                if balance > 0:
                    monthly_instalment =(opening_balance/self.tenure)
                    monthly_interest = (((self.interest_rate/100) * balance)/ 12)
                    loan_payment = monthly_instalment - monthly_interest
                    closing_balance = balance - monthly_instalment
                    print'  ',months,'  ',round(balance,2),'   ', round(monthly_instalment,2),'        ',round(monthly_interest,2) \
                    , '       ',' ',round(loan_payment,2),'     ',round(closing_balance,2)
                    balance = closing_balance
                    months += 1
    return 'Thank you for using the Loan Calculator App' 
    ```

我想对提取的数据执行上面代码中的操作。

1.  我正在考虑以这样的方式进行操作；

创建一个空字典；

```
 user = {}
    user = LoanCalc(amount_of_vehicle,tenure,interest_rate,equity,depreciation_rate)
    result= user.interest()
    result1 = user.management_fee()
     .           .
     .           .
     .           .
    result10 = user.LoanPaymentPlan() 
```

1.  将从（问题 2）获得的结果传递给生成表单的同一模板。

请帮帮我，我对 django 还是很陌生。谢谢

# 这是我得到的引用错误的完整堆栈：

```
Environment:

Request Method: GET
Request URL: http://127.0.0.1:9000/result/

Django Version: 1.4.1
Python Version: 2.5.4
Installed Applications:
('django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.sites',
 'django.contrib.messages',
 'django.contrib.staticfiles',
 'django.contrib.admin',
 'carloan')
Installed Middleware:
('django.middleware.common.CommonMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware')

Traceback:
File "C:\Python25\Lib\site-packages\django\core\handlers\base.py" in get_response
  111\.                         response = callback(request, *callback_args, **callback_kwargs)
File "C:\Users\AJIBIKE\Documents\Circuit Atlantic\calculator\carloan\views.py" in result_page
  226\.         'carloan': instance,

def result_page(request):
    if request.POST:
        form = Carloan_formForm(request.POST)
        if form.is_valid():
            instance = form.save(commit=False)
            instance.interest = (instance.interest_rate/100) * instance.amount_of_vehicle * (instance.tenure/12)
            instance.save()
    else:
        form = Carloan_formForm()
    return render_to_response('carloan/result.html', {'carloan': instance,'form': form},
                  context_instance=RequestContext(request))

Exception Type: UnboundLocalError at /result/
Exception Value: local variable 'instance' referenced before assignment 
```

# 最新的

```
from django.shortcuts import render_to_response
from django.template import RequestContext
from django.http import HttpResponseRedirect, HttpResponse

from forms import Carloan_formForm

def index(request):
    if request.POST:
        form = Carloan_formForm(request.POST)
        if form.is_valid():
            instance = form.save()
            return HttpResponseRedirect ('/result/')
    form = Carloan_formForm()
    kwvars = {
            'form': form,
            }
    return render_to_response('carloan/index.html', kwvars,
                  context_instance=RequestContext(request))

def result_page(request):
    instance = None
    if request.POST:
        form = Carloan_formForm(request.POST)
        if form.is_valid():
            instance = form.save(commit=False)
            instance.interest = (instance.interest_rate_Percentage/100) * instance.cost_of_vehicle_Naira * (instance.loan_repayment_tenure_Months/12)
            instance.management_fee = 0.01 * (instance.cost_of_vehicle_Naira + instance.interest)
            instance.processing_fee = 0.0025 * (instance.cost_of_vehicle_Naira + instance.interest)
            instance.legal_fee = 0.0075 * (instance.cost_of_vehicle_Naira + instance.interest)
           #i get syntax error starting from this line, and when i comment it out and the lines below, there is no syntax error.
            instance.residual_amount = 0.01 * ((instance.cost_of_vehicle_Naira - ((instance.depreciation_rate_Percentage/100) * instance.cost_of_vehicle_Naira * (instance.tenure/12))) 
            instance.equity_contribution = (instance.equity_contrib_rate_Percentage/100) * instance.cost_of_vehicle_Naira)
            instance.save()
    else:
        form = Carloan_formForm()
    return render_to_response('carloan/result.html', {'instance': instance, 'form': form},
                  context_instance=RequestContext(request))
forms.py

from django import forms
from django.forms import ModelForm

from models import Carloan_form

class Carloan_formForm(ModelForm):
    class Meta:
        model = Carloan_form
        exclude = ('interest', 'management_fee', 'processing_fee', 'legal_fee', \
                   'residual_amount', 'equity_contribution') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T15:28:12.943

一种更简单的方法是将会话中的数据存储在一个视图中，然后在下一个视图中检索它。[文档](https://docs.djangoproject.com/en/dev/topics/http/sessions/)会有所帮助。[1](https://docs.djangoproject.com/en/dev/topics/http/sessions/)

话虽如此 - 还有其他一些方法可以解决这个问题。在 SO 上已不止一次讨论过它：

*   [Django 在视图之间传递数据](https://stackoverflow.com/questions/7763115/django-passing-data-between-views)
*   [你如何在 django 视图之间传递或共享变量？](https://stackoverflow.com/questions/2570131/how-do-you-pass-or-share-variables-between-django-views)
*   [如何在 Django 中的视图之间传递列表](https://stackoverflow.com/questions/6416084/how-to-pass-a-list-between-views-in-django)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T15:47:37.010

> 1 保存在 Django Administration 中对提取的数据执行的操作的结果。（注意：我已经知道如何保存用户输入）

创建一个模型来保存用户的条目。`app/models.py`

```
class Carloan(models.Model) :
    # In addition to your model fields add the functions that are part of your LoanCalc
    ... 
```

然后创建一个 ModelForm：`app/forms.py`

```
class CarLoanForm(forms.ModelForm) :
    class Meta:
        model = Carloan 
```

以与通常相同的方式使用 CarLoanForm，除了：`app/views.py`

```
if request.POST:
    form = CarloanForm(request.POST)
    if form.is_valid():    
        carloan = form.save()
        #pass carloan (the instance) to the template and 
        #call its functions(from LoanCalc) instead of 
        #passing all of the values separately 
```

最后，注册这个模型，让它出现在管理部分`app/admin.py`

```
from django.contrib import admin
from app.models import Carloan

admin.sites.register(Carloan) 
```

> 2 我将页面分为两部分（一个用于表单，另一个用于结果），我想将结果传递到页面的一半以使用户能够看到它。

使用上述步骤，carloan 将被传递给视图。继续渲染它的值。

# 此外：

## 重构索引

您的索引定义应该稍微重构，否则您的 POST 绑定表单将永远不会进入模板：

```
def index(request):
    if request.POST:
        form = CarloanForm(request.POST)
        if form.is_valid():
            instance = form.save()
    else :
        form = CarloanForm()

    return render_to_response('carloan/index.html', {'form': form},
              context_instance=RequestContext(request)) 
```

## 重构你的 ModelForm

**对数据执行一些操作（使用 form.cleaned_data[''] 提取），我为此编写了一些代码行；**- 使用 ModelForm 而不是常规的 django 表单，您将获得一个模型实例，其中已经填写*了用户的值，您可以使用**instance.field*引用它们。

**我想对提取的数据执行上面代码中的操作。**- 您计划为其计算值的字段列在*排除*中，它们不会影响表单验证。

```
class CarLoanForm(forms.ModelForm) :
    class Meta:
        model = Carloan
        # exclude fields that are calculated from user input
        # NOTE: these fields must be in your model
        exclude = ('interest', 'management_fee'...) 
```

## 重构结果页面

**对数据执行一些操作（使用 form.cleaned_data[''] 提取），我为此编写了一些代码行；**

*   在 form.is_valid 检查下的 results_page 中，有一行：`instance = form.save(commit=False)`这将获取用户在尚未保存的 Carloan 模型实例中提交的所有值。
*   再往下：`instance.interest = (instance.interest_rate/100) * instance.amount_of_vehicle *(instance.tenure/12)`在这一行中，我正在计算一个排除的字段值（此计算是您的代码的副本）。
*   最后（在完成对数据的所有操作之后）我保存模型的实例。
*   然后将实例传递给模板进行显示。

代码：

```
def result_page(request):
    if request.POST:
        form = CarloanForm(request.POST)
        if form.is_valid():
            # get an instance from the form but don't save it
            instance = form.save(commit=False)
            # calculate excluded field values
            instance.interest = (instance.interest_rate/100) * instance.amount_of_vehicle *(instance.tenure/12)
            ...
            # after you have calculated all of the excluded fields save the instance
            instance.save()

    else :
        form = CarloanForm()

    return render_to_response('carloan/result.html', {'carloan' : instance, 'form' : form},
                          context_instance=RequestContext(request)) 
```

## 错误：

`reference before error assignment`- 它说什么在分配之前被引用？请粘贴整个堆栈跟踪。

# php - php MySQL查询不返回任何内容

> ID：13124040
> 
> 赞同：0
> 
> 时间：2012-10-29T14:52:49.943
> 
> 标签：php, mysql, arrays

我不确定如何确切解释查询的作用，但问题不完全在于它的设置方式，因为在另一种情况下，当我将它用作数组时它确实有效，但是当我使用它时它不起作用将它与 mysql_fetch_assoc() 一起使用，所以这是我的原始查询（不是我遇到问题的那个）：

```
SELECT * FROM 
(SELECT * FROM comments 
          WHERE postID='$id' AND state='0' 
          ORDER BY id DESC LIMIT 3
) t ORDER BY id ASC 
```

这样做是选择帖子的最后 3 条评论，然后以另一种方式对它们进行排序（因此它们以正确的顺序显示，从旧到新） 现在这是直接回显评论数组的查询。但现在我想做的就是从 3 条评论中取出第一个 id。

这是我试图做的（顺便说一下，这个查询确实有效，当我替换我以前的查询以在数组中回显结果时，但我只需要获取 id 以供使用，我不想要大批）：

```
$previousIDq = mysql_fetch_assoc(mysql_query("
                                   SELECT * FROM 
                                  (SELECT * FROM comments 
                                   WHERE postID='$id' AND state='0' 
                                   ORDER BY id DESC LIMIT 3
                                  ) t ORDER BY id ASC LIMIT 1"));

 $previousID = $previousIDq['id']; //this doesn't return the id as I want it to. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T15:04:45.320

您的问题可能是没有匹配的行。

另外，我认为您还可以改进您的查询：

```
SELECT * FROM comments WHERE postID='$id' AND state='0' ORDER BY id DESC LIMIT 2,1 
```

但正如其他人所说，使用 PDO 或 MySQLi，并使用准备好的语句。并且永远不要选择 *。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T14:56:08.517

尝试 var_dump($previousID) 看看你得到了什么

它可能会给你一个对象，你需要从那个对象中获取你的 id

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T15:00:30.947

请停止使用`mysql_`函数来编写新代码，它已[被弃用](http://www.deprecatedphp.com/mysql_)。使用`mysqli_`或`PDO`功能（`mysqli`下）。

*   绑定参数以防止 SQL 注入
*   始终使用列列表（不要使用`SELECT *`）
*   如果您要返回 > 1 行，请使用`while`循环

## `mysqli_`解决方案

```
$link = mysqli_connect("localhost", "user_name", "password", "stock");

if (mysqli_connect_error()) {
die('Connect Error (' . mysqli_connect_errno() . ') ' . mysqli_connect_error());
}

$stmt = mysqli_prepare($link, "SELECT t.id FROM 
    (SELECT id FROM comments 
    WHERE postID = ? AND state = 0
    ORDER BY id DESC 
    LIMIT 3) t 
ORDER BY id ASC");

mysqli_bind_param($stmt, 's', $id) or die(mysqli_error($dbh));

$result = mysqli_stmt_execute($stmt) or die(mysqli_error($link));

while($row = mysqli_fetch_assoc($result)) {
    echo $row[id];
}

mysqli_close($link); 
```

## `mysql_`解决方案

```
$stmt = "SELECT t.id FROM 
        (SELECT id FROM comments 
        WHERE postID = $id AND state = 0
        ORDER BY id DESC 
        LIMIT 3) t 
    ORDER BY id ASC";
$result = mysql_query($stmt) or die(mysql_error());
$row = mysql_fetch_assoc($result);

while($row = mysql_fetch_assoc($result)) {
    echo $row[id];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T15:00:42.943

您的脚本过于紧凑，无法进行错误处理，更不用说调试了

```
$mysql = mysql_connect(...

$query = "
    SELECT * FROM 
    (SELECT * FROM comments 
    WHERE postID='$id' AND state='0' 
    ORDER BY id DESC LIMIT 3
    ) t ORDER BY id ASC LIMIT 1
";
$result = mysql_query($query, $mysql);
if ( !$result ) { // query failed
  die('<pre>'.htmlspecialchars(mysql_error($mysql)).'</pre><pre>'.htmlspecialchars($query).'</pre>');
}

$previousIDq = mysql_fetch_assoc($result);
if ( !$previousIDq ) {
    die('empty result set');
}
else {
    $previousID = $previousIDq['id'];
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-29T15:01:33.133

您需要分离代码才能进行调试

```
$query = "SELECT * FROM 
               (SELECT * FROM comments 
                     WHERE postID='$id' AND state='0' 
                                   ORDER BY id DESC LIMIT 3
                                  ) t ORDER BY id ASC LIMIT 1";

$result = mysql_query($query);

echo mysql_error(); //what eror comes out here

while($previousIDq  = mysql_fetch_assoc($result))
{
     print ($previousIDq['id']);
} 
```

**注意：** mysql_* 已折旧，升级到 mysqli 或 PDO

# search - 查找具有特定字符的文件名

> ID：13124042
> 
> 赞同：1
> 
> 时间：2012-10-29T14:52:59.050
> 
> 标签：search, powershell-2.0

这是我的第一篇文章：D ...我从来不需要发帖，因为我所有的答案都已经得到了回答。我看了但没有找到任何答案。

我在 C:\ 中有一个目录（称为 temp ），我需要在其中（递归地）找到所有包含这些字符 ~!@#$%^&*()+. 或空格的所有文件。然后我需要他们列出他们的位置，我不在乎日期或权限（事实上我更希望他们被删除）

我还需要过滤 *.htm 的选项

我尝试使用 GCI 和 Select-String，但 select-string 一直在读取我的文件内容，而且我对正则表达式不太擅长。

提前感谢您的帮助，我知道这里的人知道他们的东西（在我不得不发布问题之前 4 年：D）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T08:28:29.813

试试这个：

```
$files = Get-ChildItem "c:\PST\"
$files = ($files | Where-Object {$_.BaseName.IndexOfAny("~!@#$%^&*()+., ".ToCharArray()) -ne -1})
$files 
```

# android - Android 服务没有响应

> ID：13124046
> 
> 赞同：3
> 
> 时间：2012-10-29T14:53:09.597
> 
> 标签：android

我正在开发一个安卓防盗应用程序，想实现备份联系人功能。我不是 Android 方面的专家，而且对它很陌生，所以我只是简单地实现了一个简单的编码来检索联系人姓名和电话号码，并将所有这些附加到一个字符串消息中并通过电子邮件发送。我希望这是我在应用程序中的一项服务，这意味着用户不会收到此备份联系服务的通知。我确实将这个功能作为一个应用程序独立运行并且它可以工作。但是，当我将此作为服务移至我的防盗应用程序时，它不起作用...请大家帮助我检查问题...谢谢...

```
public class BackupContacts extends Service{
/** Called when the activity is first created. */

    String msg = "**********Backup Phone Contacts**********\n\n";
    SharedPreferences pref;
    public static String filenames = "AntiTheft";
    String email;

@Override
public IBinder onBind(Intent intent){
    // TODO Auto-generated method stub
    return null;
}

@Override
public void onCreate(){
    // TODO Auto-generated method stub
    pref = getSharedPreferences(filenames, 0);
    email = pref.getString("keyemail", "");
    super.onCreate();
}

@Override
public void onStart(Intent intent, int startId){
    // TODO Auto-generated method stub
    super.onStart(intent, startId); 
}

public int onStartCommand(Intent intent, int flags, int startId){

    retrieveContacts();
    return START_STICKY;
}

public void retrieveContacts(){

    ContentResolver cr = getContentResolver();
    Cursor cursor = cr.query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI, null, null, null, null);

    while(cursor.moveToNext()){
        String name = cursor.getString(cursor.getColumnIndexOrThrow(Phone.DISPLAY_NAME));
        String number = cursor.getString(cursor.getColumnIndexOrThrow(Phone.NUMBER));

        msg += name + "\t\t\t\t\t" + number + "\n";         
    }

    try{
        sendMail();
    } catch(MessagingException e){
        e.printStackTrace();
    }
}

public void sendMail() throws MessagingException{

    // Recipient's email ID needs to be mentioned.
    String to = email;
    // Sender's email ID needs to be mentioned
    String from = "testing@gmail.com";
    // Email Password
    String password = "abc123";
    // Assuming you are sending email from GMail SMTP
    String host = "smtp.gmail.com";

    // Get system properties
    Properties properties = System.getProperties();
    // Setup mail server
    //properties.setProperty("mail.smtp.host", host);
    properties.put("mail.smtp.host", host);
    properties.put("mail.smtps.auth", "true");
    properties.put("mail.smtp.starttls.enable", "true");

    // Get the default Session object.
    Session session = Session.getDefaultInstance(properties, null);

    // Create a default MimeMessage object.
    MimeMessage message = new MimeMessage(session);
    // Set From: header field of the header.
    message.setFrom(new InternetAddress(from));
    // Set To: header field of the header.
    message.addRecipient(Message.RecipientType.TO, new InternetAddress(to));
    // Set Subject: header field
    message.setSubject("This is the Backup Contacts Email!");
    // Now set the actual message
    //message.setText(msg.toString());

    //BodyPart always come along with MultiPart (For sending attachment in email)
    //Create the message part
    BodyPart msgBodyPart = new MimeBodyPart();
    //Fill up the message
    msgBodyPart.setText(msg);

    //Create a multipart message
    Multipart multipart = new MimeMultipart();
    //Set the text message part
    multipart.addBodyPart(msgBodyPart);
    //Set the complete message part
    message.setContent(multipart);

    // Send message
    //Transport.send(message);
    try{
        Transport transport = session.getTransport("smtps");
        transport.connect(host, from, password);
        transport.sendMessage(message, message.getAllRecipients());
        System.out.println("Sent message successfully....");
        transport.close();
    }catch (MessagingException mex) {
        mex.printStackTrace();
    }
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T15:29:07.410

您确定已将此类声明为服务`Manifest.xml`吗？

在`<application>`标签内，放入以下代码：

```
<service android:name=".BackupContacts" /> 
```

# android - Android应用程序在失去焦点时会在kindle fire上杀死

> ID：13124051
> 
> 赞同：2
> 
> 时间：2012-10-29T14:53:51.657
> 
> 标签：android, focus, kindle

我制作的一个应用程序在任何普通的安卓设备上都很好用，但是当应用程序失去对 Kindle Fire 的关注时，它就会死掉。有谁知道为什么？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T14:58:03.977

一旦您的应用程序不再处于前台，操作系统可以随时终止其进程，以便为其他进程释放内存。这发生在每台 Android 设备上。某些版本的 Kindle Fire 可能对它更具攻击性，但终止您的进程是标准行为，您的应用程序需要考虑这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T15:05:00.123

我同意 CommonsWare 只是为了补充这一点，请检查是否在 onPause 中手动完成您的活动有时这可能是原因，我知道这听起来很愚蠢，但人们有时会犯愚蠢的错误 :)

# c# - 在 Mac 上的 Firefox 中将 pdf 文件写入屏幕

> ID：13124054
> 
> 赞同：0
> 
> 时间：2012-10-29T14:53:59.083
> 
> 标签：c#, asp.net, macos, firefox, pdf

我有一个页面，我只是想在屏幕上写一个 pdf。这就是我正在做的事情：

```
protected void ViewPDF(string url)
{
    Response.Clear();
    Response.ClearContent();
    Response.ClearHeaders();
    Response.ContentType = "application/pdf";
    Response.TransmitFile(url);
    Response.Flush();
    Response.End();
} 
```

这适用于除 Mac 上的 Firefox 之外的所有浏览器和操作系统。浏览器不会在浏览器中显示 pdf 文件，而是打开对话框下载文件，您可以在其中打开或保存文件。

我也试过这个：

```
protected void ViewPDF(string url)
{    
    Response.Clear();
    Response.ContentType = "application/pdf";

    string path = Server.MapPath(url);
    byte[] data = File.ReadAllBytes(path);
    Response.BinaryWrite(data);
    Response.End();
} 
```

我得到了同样的结果。

有人知道怎么修这个东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T14:57:12.397

浏览器需要*能够*呈现任何给定的文件格式。Firefox（适用于 Mac）不包括开箱即用的 PDF 渲染器。就是这么简单。

请参阅[http://support.mozilla.org/en-US/kb/view-pdf-files-firefox-without-downloading-them](http://support.mozilla.org/en-US/kb/view-pdf-files-firefox-without-downloading-them)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T14:59:03.273

您可以尝试更改内容处置标头。这篇文章中有一个完整的讨论：

[Content-Disposition：“inline”和“attachment”有什么区别？](https://stackoverflow.com/questions/1395151/content-dispositionwhat-are-the-differences-between-inline-and-attachment)

# objective-c - 重写 NSWindowController

> ID：13124055
> 
> 赞同：1
> 
> 时间：2012-10-29T14:54:05.150
> 
> 标签：objective-c, xcode, cocoa, nswindow

有一个小问题，我正忙着创建一个 OSX 应用程序。在我的第一个视图（appdelegate）中，我得到了一个登录屏幕，但是在用户登录后我想要（翻转登录控制器（main.xib）以删除登录屏幕并打开一个新的 NSWindowcontroller。

最好的方法是什么？我试过;

```
 Second = [[SecondController alloc] initWithWindowNibName:@"SecondController"];

[[Second window] makeFirstResponder:nil]; 
```

但是现在第二个控制器出现了，但第一个控制器仍然存在。在iOS开发中我正在做（想要同样的东西，但比OSX）

```
CategoriesViewController *tableController = [CategoriesViewController alloc];

    tableController.managedObjectContext = [self managedObjectContext];

    self.navigationController = [[UINavigationController alloc] initWithRootViewController:tableController]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T15:38:04.680

每个窗口控制器控制一个窗口。你有两个窗口控制器。你有两个窗口。iOS 一次只显示一个窗口，而 OSX 一次显示多个窗口。您需要 NSWindow 关闭登录窗口以使其消失。如果未设置 NSWindow-releasedWhenClosed 属性，您可能还希望释放登录窗口。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T16:19:15.963

Carmin 是正确的，但你可以这样做

`[Yourwindow close:nil];`

# linq - 一个获取请求必须是一个简单的成员访问表达式；'[100002]' 是一个 SubQueryExpression

> ID：13124056
> 
> 赞同：1
> 
> 时间：2012-10-29T14:54:13.887
> 
> 标签：linq, fluent-nhibernate

我收到以下错误：“提取请求必须是简单的成员访问表达式；'[100002]' 是 SubQueryExpression。参数名称：relatedObjectSelector”

以下是我的查询：

```
var query =
    session.Query<Customer().Where(cus => cus.CustomerId == customerId)
    .Fetch(c => c.CustomerType) // Parent CustomerType
    .Fetch(c => c.CustomerOrders) // Child Collection of orders
    .ThenFetch(co => co.Select(it => it.Item)).ToList(); // A parent of CustomerOrder 
```

如果我把“ThenFetch”拿出来，那么我就不会得到那个错误。但是，我确实需要检索 Item 对象。

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T15:54:04.533

您不能只在生成的 CustomerOrder 上应用选择吗？

```
var query =
    session.Query<Customer().Where(cus => cus.CustomerId == customerId)
    .Fetch(c => c.CustomerType)
    .Fetch(c => c.CustomerOrder)
    .Select(co => co.Item)
    .ToList(); 
```

# python - 如何以最简单的方式将字符串转换为列表

> ID：13124059
> 
> 赞同：-2
> 
> 时间：2012-10-29T14:54:33.983
> 
> 标签：python

如果我想将字符串转换`'ABCD'`为列表`['A','B','C','D']`，最简单的方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T15:02:44.720

我能想到的最简单的一个：

```
>> list('ABCD')
['A', 'B', 'C', 'D'] 
```

参考：

*   [Python 2 内置函数：list([ *iterable* ])](http://docs.python.org/2/library/functions.html#list)
*   [Python 3 内置类型：*类*list([ *iterable* ])](http://docs.python.org/3/library/stdtypes.html#list)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T16:19:47.757

根据您的用例，您甚至可能不必这样做 - 字符串已经是可迭代的：

```
for c in "ABCD"
    print c 
```

印刷

```
A
B
C
D 
```

# php - 我如何用 php json 发出这个 http post 请求？

> ID：13124060
> 
> 赞同：-1
> 
> 时间：2012-10-29T14:54:36.803
> 
> 标签：php, jquery, json, httprequest

> **可能重复：**
> [如何在 PHP 中发送 HTTP 请求和检索响应（微调标头）？](https://stackoverflow.com/questions/4468877/how-to-send-http-request-and-retrieve-response-in-php-with-fine-tuning-of-heade)

8.1.4.1 ping 请求示例

HTTP 请求：

```
POST /api/ra/v1/ping HTTP/1.0
Host: app.test.net
Authorization: Basic dXNlcm5hbWU6cGFzc3dvcmQ=
Content-Type: application/json
"Are you there?" 
```

有人可以帮我一些php原始示例吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T15:10:59.530

尝试 curl [http://www.php.net/manual/en/curl.examples-basic.php](http://www.php.net/manual/en/curl.examples-basic.php)

```
$ch = curl_init("http://www.example.com/");
$fp = fopen("example_homepage.txt", "w");

curl_setopt($ch, CURLOPT_FILE, $fp);
curl_setopt($ch, CURLOPT_HEADER, 0);

curl_exec($ch);
curl_close($ch);
fclose($fp); 
```

我为一个游戏网站做了同样的事情，我必须不断登录才能使用我的回合。因此，我没有使用 curl 登录，获取授权令牌并使用它，而是使用 curl 发送另一个请求以执行某些操作。然后我使用 Windows 任务调度程序运行该脚本。我在某处有代码，如果您仍然需要这方面的帮助，我会在回家时查看它。

# php - 识别日期格式并在php中转换为ISO日期

> ID：13124064
> 
> 赞同：2
> 
> 时间：2012-10-29T14:54:49.787
> 
> 标签：php, date

**目标：**将任何本地日期转换为相应的 ISO 日期

**我的方法：** [http ://codepad.viper-7.com/XEmnst](http://codepad.viper-7.com/XEmnst)

```
strftime("%Y-%m-%d",strtotime($date))"; 
```

**优点：**可以很好地转换很多格式

**缺点/问题：**转换显然不是日期的字符串和数字。例如

```
strftime("%Y-%m-%d",strtotime("A")) => 2012-10-29
strftime("%Y-%m-%d",strtotime("1")) => 1970-01-01 
```

**问题：**

1.  有没有更好的方法来识别日期并将其转换为 ISO 日期？
2.  您知道任何能够在 php 中执行此操作的库/正则表达式吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T16:35:13.353

PHP 的`strtotime()`函数已经尽最大努力尝试获取任意字符串并计算出它的日期格式。

出于多种原因，我不喜欢这个函数，但它确实可以合理地解决问题，因为输入的是未知日期格式的字符串。

然而，即使`strtotime()`是最好的努力也永远不够，因为任意日期格式都是模棱两可的。

无法判断`05-06-07`是 2007 年 6 月 5 日还是 2007 年 5 月 6 日。甚至是 2005 年 6 月 7 日（是的，有些人确实会这样写日期）。

简单明了的事实：这是不可能的。

如果您希望您的日期以任何有意义的方式可靠，您必须放弃您将能够接受任意输入格式的想法。

[编辑] 您在评论中说输入来自各种 Excel 和 CSV 文件。

您唯一的希望是这些文件中的每一个是否本身都是一致的。如果您知道来自给定源的文件将具有给定的输入格式，则可以为您导入的每种文件类型编写自定义包装器，并针对该格式对其进行处理。这是我过去自己使用过的解决方案，只要您可以预测正在处理的文件的格式，它就可以工作。

但是，如果单个文件包含不可预测或不明确的日期，那么您就不走运了：您有一项不可能完成的任务。避免不良数据的唯一方法是回击文件供应商并要求他们修复数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T15:26:47.380

我认为当面对诸如 2012 年 6 月 5 日之类的日期时，问题确实会出现，当您不清楚您是在处理 6 月 5 日还是 5 月 6 日时，您可能会从以 DD MM YYYY 为标准的欧洲国家获取输入。

如果您只分析一个输入字段，那么您可能有机会检测分隔符并将字符串拆分以寻找可能看起来像真实日期的内容。

在这种情况下，PHP 函数[checkdate](http://www.php.net/manual/en/function.checkdate.php)可能会作为最后的双重检查派上用场。

另请注意，Mysql（如果这是数据的方向）对于将放入 DATE 字段、分隔符、没有前导零等的内容也非常宽松。但是，您仍然必须正确获取 YMD 顺序让它有机会。

我想最终的答案是不允许日期的自由文本输入，但给他们选择器 - 但当然你可能无法影响传入的日期......

# php - jQuery 使用延迟加载插件从外部文件加载图像

> ID：13124069
> 
> 赞同：2
> 
> 时间：2012-10-29T14:55:05.827
> 
> 标签：php, javascript, jquery, load, lazy-loading

我正在使用jQuery 的[延迟加载插件](http://www.appelsiini.net/projects/lazyload)在页面滚动时加载 imgs。另外，我想通过 .load() 函数在用户单击锚点（以防止不必要的内容加载）时将图像从画廊加载到容器：

```
$('#category_1').load('gallery.php?a=1'); 
```

我的问题是事实， .load() 函数`<script>`从加载的内容中去除标签，并且图像无法使用延迟加载插件加载。

```
<img src="blank.gif" data-original="img.png" alt="img" />
<script> $('img').lazyload({ effect : 'fadeIn' }); </script> 
```

所以，我只是认为我可以将`<script>`标签放在加载内容的文件中，但它不起作用。

有人遇到这样的问题吗？问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T15:05:22.777

添加回调函数`.load`怎么样？

```
$('#category_1').load('gallery.php?a=1', function() {
   $('#category_1 > img').lazyload({ effect : 'fadeIn' });
}); 
```

**更新**
查看您在 pastebin 上发布的代码，它将位于 index.php 第 14 行：

```
$("#loadpic").click(function() { 
    $("#page").load ("gallery.php", function() {
        $("#page").find("img").lazyload({ effect : "fadeIn", skip_invisible : false });
    });
}); 
```

正如[文档所说](http://www.appelsiini.net/projects/lazyload)（在最底部），添加`skip_invisible:false`以解决您的问题

并且gallery.php上没有javascript

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T15:29:29.453

也许你需要[yepnopejs](http://yepnopejs.com/)来控制加载顺序

# java - Java：键绑定被其他组件消耗

> ID：13124071
> 
> 赞同：3
> 
> 时间：2012-10-29T14:55:08.397
> 
> 标签：java, swing, jpanel, key-bindings, jtabbedpane

我正在开发一个 GUI。

Gui 的构造如下： 包含（自定义）leftPanel 和 rightPanel 的 JFrame。RightPanel 是选项卡窗格的扩展，并包含作为选项卡之一的 MainTab 类。

Maintab 有以下代码：

```
private void createKeyBindings(){
    actionMap = this.getActionMap();
    inputMap = this.getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW);
    inputMap.put(KeyStroke.getKeyStroke("UP),
            "pressedUpArrow");
    inputMap.put(KeyStroke.getKeyStroke("released UP"),
           "releasedUpArrow");
    actionMap.put("pressedUpArrow",
             new PressedUpArrowAction());
    actionMap.put("releasedUpArrow",
            new ReleasedUpArrowAction());
    inputMap.put(KeyStroke.getKeyStroke("RIGHT"),
            "pressedRightArrow");
    inputMap.put(KeyStroke.getKeyStroke("released RIGHT"),
           "releasedRightArrow");
    actionMap.put("pressedRightArrow",
             new PressedRightArrowAction());
    actionMap.put("releasedRightArrow",
            new ReleasedRightArrowAction());
    inputMap.put(KeyStroke.getKeyStroke("LEFT"),
            "pressedLeftArrow");
    inputMap.put(KeyStroke.getKeyStroke("released LEFT"),
           "releasedLeftArrow");
    actionMap.put("pressedLeftArrow",
             new PressedLeftArrowAction());
    actionMap.put("releasedLeftArrow",
            new ReleasedLeftArrowAction());
    inputMap.put(KeyStroke.getKeyStroke("RIGHT"),
            "pressedRightArrow");
    inputMap.put(KeyStroke.getKeyStroke("released RIGHT"),
           "releasedRightArrow");
    actionMap.put("pressedRightArrow",
             new PressedRightArrowAction());
    actionMap.put("releasedRightArrow",
            new ReleasedRightArrowAction());
    inputMap.put(KeyStroke.getKeyStroke("DOWN"),
            "pressedDownArrow");
    inputMap.put(KeyStroke.getKeyStroke("released DOWN"),
           "releasedDownArrow");
    actionMap.put("pressedDownArrow",
             new PressedDownArrowAction());
    actionMap.put("releasedDownArrow",
            new ReleasedDownArrowAction());
} 
```

因此，当我按下其中一个箭头键并释放它时，它必须采取行动。

但它只有在我释放其中一个箭头键时才会起作用。原因可能是 LeftPanel 或 RightPanel 的其他组件之一或面板本身已经将该键绑定用于其他用途。

我试图只清除类本身（ this.getInputMap().clear() ）中的输入图和动作图，但问题仍然存在。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-11-21T16:28:45.250

当您注册箭头键击但未执行相应的操作时（而与其他键击相关的操作，如字母，工作正常），原因可能是您的组件上的 a`JButton`或`JTextField`某处拦截了这些箭头键击。

要解决此问题，请调用`yourJButton.setFocusable(false)`and `yourJTextfield.setFocusable(false)`。这将阻止`JButton`和`JTextField`消耗箭头键击。

# php - 如何以编程方式从其中一个方法中查找类的公共属性

> ID：13124072
> 
> 赞同：18
> 
> 时间：2012-10-29T14:55:07.583
> 
> 标签：php, oop, reflection

我有一个`Foo`具有公共和受保护属性的类。 `Foo`需要有一个非静态方法，`getPublicVars()`它返回所有公共属性的列表`Foo`（这只是一个示例，我知道从*外部*`Foo`调用对象将[`get_object_vars()`](http://php.net/get_object_vars)完成此操作，不需要我的`getPublicVars()`方法）。

> **注意：**这还必须返回在运行时分配给未在类定义中定义的类实例（对象）的动态声明的属性。

这是示例：

```
class Foo{
    private $bar = '123';
    protect $boo = '456';
    public   $beer = 'yum';

   //will return an array or comma seperated list
   public function getPublicVars(){
      // thar' be magic here...
   } 
}

 $foo = new Foo();
 $foo->tricky = 'dynamically added var';

 $result = $foo->getPublicVars();  
 var_dump($result); // array or comma list with 'tricky' and 'beer' 
```

从公共和受保护都可见的类自己的方法中获取对象的唯一公共属性的最简洁方法是什么？

我看过：

*   [查看 PHP 类实例（对象）以查看其所有可用的公共属性和方法的最佳方法是什么？](https://stackoverflow.com/questions/6498476/what-is-the-best-way-to-look-inside-a-php-class-instance-object-to-see-all-of)

但这似乎并没有解决我的问题，因为它指向`get_object_vars()`从对象外部使用。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-10-29T15:00:49.380

正如您已经意识到的，PHP 的内置[`get_object_vars`](http://php.net/get_object_vars)是范围敏感的。您只需要*公共* 对象属性。

所以从那个函数到公共变体并不是一个很大的步骤：

```
function get_object_public_vars($object) {
    return get_object_vars($object);
} 
```

调用`get_object_public_vars`它只会给你公共属性，因为它超出了当前对象的范围。

如果您需要更细粒度的控制，还可以使用[`ReflectionObject`](http://php.net/ReflectionObject)：

```
(new ReflectionObject($this))->getProperties(ReflectionProperty::IS_PUBLIC); 
```

这样做的好处是您不需要在全局命名空间中引入另一个函数。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2014-11-13T17:10:35.950

> **不适用于 php version >=7**
> 因此，我不能再推荐解决方案了。
> 改用反射

从类中获取公共属性

```
$publicProperties = call_user_func('get_object_vars', $this); 
```

“技巧”是`get_object_vars`从对象的范围`call_user_func`而不是对象的范围调用

不需要反射、独立函数、闭包等

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-06T04:36:35.040

根据[这篇文章](http://www.vancelucas.com/blog/get-only-public-class-properties-for-current-class-in-php/#comments)（由 Vance Lucas 撰写），您可以使用“*匿名*”函数在“Foo”类定义中创建一个新的调用范围，然后可以`get_object_vars()`从内部调用。这允许您**仅从**类内部获取公共属性，即使这些是后来从外部动态创建的。

因此适合您的示例，它将是：

```
<?php
class Foo {
    private $bar = '123';
    protected $boo = '456';
    public   $beer = 'yum';

   // return an array of public properties 
   public function getPublicVars(){
      $publicVars = create_function('$obj', 'return get_object_vars($obj);');
        return $publicVars($this);
   } 
}

 $foo = new Foo();
 $foo->tricky = 'dynamically added var';

 $result = $foo->getPublicVars();  
 print_r($result); 
```

输出将是：

```
大批
(
    [啤酒] => 好吃
    [棘手] => 动态添加 var
)

```

上面提到的文章中有第二个示例，它显示了使用所谓的“闭包”（来自 php 5.3）的另一种方法，但由于某种原因，它不适用于我使用 php v5.4 所以私有并且受保护的属性仍然包含在结果数组中。

# wordpress - Wordpress 重写（删除）部分 url

> ID：13124074
> 
> 赞同：1
> 
> 时间：2012-10-29T14:55:18.050
> 
> 标签：wordpress, url-rewriting, custom-post-type

我四处寻找答案。有几个看起来像这样，但大多数都指向一个插件，或者我无法在我的情况下工作的功能示例......

所以问题是：我为我的网站主页创建了一个自定义帖子类型。我将其设为默认首页，所以现在当我输入：**localhost/vhh**时，我会自动转到此页面：**localhost/vhh/homepage/homepage**

第一个“主页”是指自定义帖子类型。二是“帖子”的名称。现在我想删除两者，或者至少删除 1 个“主页”，所以我得到：

**localhost/vhh**或**localhost/vhh/homepage**

这可以通过 WP 重写规则来完成吗？如何？

# eclipse - 以编程方式显示标记

> ID：13124079
> 
> 赞同：0
> 
> 时间：2012-10-29T14:55:27.977
> 
> 标签：eclipse

有没有办法（以编程方式）在问题视图中显示某个`IMarker`内容，类似于用户从上下文菜单中选择“查看...”时发生的情况？我有一个可能会导致标记出现的向导，我希望在向导完成后使这些标记在问题视图中可见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T15:09:35.507

你只需要让你的标记成为问题。但是，有单独的标记视图显示所有标记。

要显示标记，您可以使用[MarkerViewUtil.showMarker(..)](http://help.eclipse.org/helios/topic/org.eclipse.platform.doc.isv/reference/api/org/eclipse/ui/views/markers/MarkerViewUtil.html#showMarker%28org.eclipse.ui.IWorkbenchPage,%20org.eclipse.core.resources.IMarker,%20boolean%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T16:38:30.067

忽略所有好的 API 规则，您可以查看 FiltersConfigurationDialog 的内部结构，以编程方式在问题视图中创建新的资源过滤器。但我再说一遍：没有用于创建问题过滤器的 API，这可能会随时中断。

# typescript - TypeScript 中的 Blob

> ID：13124080
> 
> 赞同：9
> 
> 时间：2012-10-29T14:55:30.000
> 
> 标签：typescript

我正在尝试使用 FileSystem API 在 TypeScript 中编写文件下载器。

当我试图创建一个新的 Blob 对象时：

```
var blob: Blob = new Blob(xhr.response, JSON.stringify(mime)); 
```

我收到错误：

```
Supplied parameters do not match any signature of call target 
```

可以在没有任何参数的情况下创建 Blob：

```
var blob: Blob = new Blob(); 
```

但这无济于事。

Blob 的（已弃用）回退是 BlobBuilder 对象，但 TypeScript（VS 2012 插件）仅提供该`MSBlobBuilder`对象。

我究竟做错了什么？还是 TypeScript 不知道 Blob 构造函数？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-29T15:15:58.307

lib.d.ts 库中的定义`Blob`只包含一个空的构造函数：

```
declare var Blob: {
    prototype: Blob;
    new (): Blob;
} 
```

如果这不正确，您可以提交回更正的版本，或在您的代码中覆盖它。这是对原始声明应该是什么样子的粗略猜测。

```
declare var Blob: {
    prototype: Blob;
    new (): Blob;
    new (request: any, mime: string): Blob;
} 
```

我没有指定第一个参数的类型，并且名称可能是错误的 - 但正如您所知`Blob`，您可以根据需要调整这些。

# java - JSF p:commandLink 和 p:ajax 在更新中有不同的行为

> ID：13124083
> 
> 赞同：4
> 
> 时间：2012-10-29T14:55:39.627
> 
> 标签：java, ajax, jsf-2, primefaces

我有一个包含列表项和`p:commandLink`内部的菜单。在将它用于不同的页面时，我意识到我在使用 a`p:dataTable`和`p:columns`内部更新表单时遇到问题。点击链接后，`form2`实际上有一些面板和里面的表格应该更新。现在我的问题：只有*大部分*内容 `form2`被正确更新，但`p:columns`具有*旧*值。如果我再次单击该链接，则会显示正确的值。

bean 方法`public void selectProject(Project myProject)`被正确调用并且值被正确处理。

现在奇怪的是：如果我添加`h:graphicImage`一个`p:ajax`一切正常！

```
<h:form id="form1">
  ...
  <li>
    <p:commandLink update=":form2" actionListener="#{bean.selectProject(p)}">  
      <h:outputText value="#{p.name}" />
    </p:commandLink>
    <!-- Code below is for testing only, but works fine! -->
    <h:graphicImage value="#{iconBean.icon(12,'clock')}">
      <p:ajax event="click" update=":form2" listener="#{bean.selectProject(p)}"/>
    </h:graphicImage>
  </li>
  ...
</h:form> 
```

**更新**这似乎与`p:columns`一个简化的测试用例显示了预期的行为无关`p:commandLink`。在原始（仍然失败）设置中，菜单被实现为复合组件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T16:42:29.290

作为一种解决方法，我使用

```
<h:commandLink>
  <h:outputText value="#{p.name}"/>
  <p:ajax event="click" update=":form2" listener="#{bean.selectProject(p)}"/>
</h:commandLink> 
```

# python - 向 matplotlib 图动态添加一条垂直线

> ID：13124088
> 
> 赞同：3
> 
> 时间：2012-10-29T14:55:51.780
> 
> 标签：python, matplotlib

当用户单击特定点时，我正在尝试将垂直线动态添加到 matplotlib 图中。

```
import matplotlib.pyplot as plt
import matplotlib.dates as mdate

class PointPicker(object):
    def __init__(self,dates,values):

        self.fig = plt.figure()
        self.ax = self.fig.add_subplot(111)

        self.lines2d, = self.ax.plot_date(dates, values, linestyle='-',picker=5)

        self.fig.canvas.mpl_connect('pick_event', self.onpick)
        self.fig.canvas.mpl_connect('key_press_event', self.onpress)

    def onpress(self, event):
        """define some key press events"""
        if event.key.lower() == 'q':
            sys.exit()

    def onpick(self,event):
        x = event.mouseevent.xdata
        y = event.mouseevent.ydata
        print self.ax.axvline(x=x, visible=True)
        x = mdate.num2date(x)
        print x,y,type(x)

if __name__ == '__main__':
    import numpy as np
    import datetime

    dates=[datetime.datetime.now()+i*datetime.timedelta(days=1) for i in range(100)]
    values = np.random.random(100)

    plt.ion()
    p = PointPicker(dates,values)
    plt.show() 
```

这是一个（几乎）工作示例。当我单击一个点时，`onpick`确实调用了该方法并且数据似乎正确，但没有出现垂直线。我需要做什么才能显示垂直线？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T15:10:47.300

您需要更新画布绘图 ( `self.fig.canvas.draw()`)：

```
def onpick(self,event):
    x = event.mouseevent.xdata
    y = event.mouseevent.ydata
    L =  self.ax.axvline(x=x)
    self.fig.canvas.draw() 
```

# objective-c - 核心数据模型不能影响 SQLITE 数据库

> ID：13124091
> 
> 赞同：0
> 
> 时间：2012-10-29T14:55:57.177
> 
> 标签：objective-c, sqlite, core-data, xcode4

我现在面临数据模型的问题。问题在删除 XCode 数据模型文件（意外）后开始。虽然我创建了与以前的数据模型同名的数据模型文件，但它不会影响 sqlite 数据库文件。当我创建名为“TblAct”的新实体时，它总是显示错误。这是错误：

```
'+entityForName: could not locate an NSManagedObjectModel for entity name 'TblAct'' 
```

如何匹配数据模型和 sqlite 数据库？请帮忙

最佳 rgds, df

# asp.net-mvc - 为 MVC 4 设置 Intranet 服务器的最佳方式是什么？

> ID：13124094
> 
> 赞同：1
> 
> 时间：2012-10-29T14:56:10.810
> 
> 标签：asp.net-mvc, razor, virtualbox, windows-server-2008-r2

我最近开始使用 Asp.Net MVC 4 进行编程。我已经从 Microsoft DreamSpark 下载了 Visual Studio 2010 和“标准”Microsoft Server 2008 R2。现在我将服务器安装到混杂网络上的 VirtualBox 中（从而允许它与我的整个网络通信），接下来我想用它来测试我的应用程序。

您能否指出一些好的资源来告诉我如何为此设置最好的服务器？

非常感谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T15:04:53.537

此链接适用于 MVC 3，但它仍然适用于您。[http://www.asp.net/mvc/mvc3](http://www.asp.net/mvc/mvc3)

它包括一切，包括 Razor 引擎。

安装和帮助

•使用 Web 平台安装程序安装 ASP.NET MVC 3（推荐）[http://www.microsoft.com/web/gallery/install.aspx?command=getinstallerredirect&appid=MVC3](http://www.microsoft.com/web/gallery/install.aspx?command=getinstallerredirect&appid=MVC3)

•使用安装程序可执行文件[http://go.microsoft.com/fwlink/?LinkID=208140安装 ASP.NET MVC 3](http://go.microsoft.com/fwlink/?LinkID=208140)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T15:15:31.620

[这](http://msdn.microsoft.com/en-us/library/gg703322%28v=vs.98%29.aspx)是关于使用 asp.net MVC、IIS 7 和 Visual Studio 2010 创建 Intranet 站点的演练。

对我来说效果很好。

问候

# java - 在java中解析异常

> ID：13124095
> 
> 赞同：1
> 
> 时间：2012-10-29T14:56:14.337
> 
> 标签：java, date

我正在尝试验证一个字符串是否在 ISO-8601 日期中，但它抛出了一个解析异常，不确定哪里出错了。

```
try {
    String s = "2007-03-01T13:00:00Z";
    SimpleDateFormat ft = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ssZ");
    ft.setLenient(false);
    System.out.println(ft.format(ft.parse(s)));
} catch (ParseException e) {
    System.out.println(e.getMessage());
} 
```

输出是：

```
Unparseable date: "2007-03-01T10:00:00Z" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T14:58:03.757

我怀疑这`Z`被解释为时区所以会匹配`-0800`但不是文字`Z`所以你可以通过引用来解决这个问题：`'Z'`。

[`getErrorOffset`](http://docs.oracle.com/javase/7/docs/api/java/text/ParseException.html#getErrorOffset%28%29)应该告诉你问题出在哪里。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T15:21:54.817

如果您使用的是 Java 7，请使用以下格式字符串：`"yyyy-MM-dd'T'HH:mm:ssXXX"`

注意：`X`是匹配 ISO 8601 时区字符串的新代码（在 Java 7 中添加）；请参阅 的 API 文档[`SimpleDateFormat`](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T15:19:18.357

如果要验证任意字符串，则不能硬编码“Z”时区指示符，因为对于有效的 ISO8601 时间戳，例如“2007-03-01T13:00:00+01”，验证将失败。

如果您使用的是 Java 6 或更早版本，SimpleDateFormat 将不支持 ISO8601 时区编码，因此您也不能使用它来验证时间戳。在 Java 7 或更高版本中，您可以使用`new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ssX");`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-29T15:00:16.563

您的代码不起作用，因为 SDF 非常有限，广告在编写时不知道 ISO 8601。

您可以使用以下代码：

```
import java.text.DateFormat;
import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.Date;

import org.apache.commons.lang.time.DateUtils;

public final class JSONDateUtil {

    private static final DateFormat ISO8601_FORMAT = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss.SSS'Z'");

    static  {
        ISO8601_FORMAT.setLenient(false);
        ISO8601_FORMAT.setTimeZone(DateUtils.UTC_TIME_ZONE);
    }

    public static String toJSON(Date date) {
        return ISO8601_FORMAT.format(date);
    }

    public static String toJSON(long millis) {
        return ISO8601_FORMAT.format(millis);
    }

    public static Date toJava(String date) {
        try {
            return ISO8601_FORMAT.parse(date);
        } catch (ParseException e) {
            return null;
        }
    }

} 
```

注意时区，非常重要。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-19T08:07:40.203

# 乔达时间

仅供参考，如果您使用[Joda-Time](http://www.joda.org/joda-time/)而不是臭名昭著的麻烦 java.util.Date/Calendar 类，您可以简单地将[ISO 8601](https://en.wikipedia.org/wiki/ISO_8601)字符串直接传递给[DateTime](http://www.joda.org/joda-time/apidocs/org/joda/time/DateTime.html)构造函数，而无需格式化程序。Joda-Time 使用 ISO 8601 作为其默认值。

```
DateTimeZone timeZone = DateTimeZone.forID( "America/Montreal" );
DateTime dateTime = new DateTime( "2007-03-01T13:00:00Z", timeZone ); 
```

## 验证

要确定您的输入字符串是否无效，请 catch [`IllegalArgumentException`](http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalArgumentException.html)。

## java.util.日期

如果需要，您甚至可以返回 java.util.Date。

```
java.util.Date date = dateTime.toDate(); 
```

# java - Android - 缺少应用程序子类

> ID：13124098
> 
> 赞同：2
> 
> 时间：2012-10-29T14:56:27.753
> 
> 标签：java, android, adt, google-play, classnotfoundexception

我有点困惑，对我在 Eclipse 、 ADT 和 Google Play 上遇到的问题感到有点恼火。

我正在运行 OS X 10.8.2、Eclipse 4.2.1 和 ADT 20.0.3。

以下是导致问题的工作流程：

*   开发人员 Alpha 负责构建 Android 应用以供内部/外部发布。
*   其他开发人员在应用程序上工作，将更改推送到 GitHub。
*   Developer Alpha 做标准的 pull/mergetool 等
*   Alpha打开Eclipse，刷新主项目，还有两个库项目（ActionBarSherlock和FacebookSdk）
*   Alpha 运行项目 > 清理 > 全部
*   此时运行会创建一个在模拟器和硬件中都能正常工作的应用程序，范围从 OS 2.3.3 到 4.0.1
*   Alpha 运行 Android 工具 > 导出签名的 APK，输入密钥通行证等。
*   生成的构建将通过电子邮件发送给人们，或上传到 Google。请注意，它运行的代码与刚刚在模拟器/硬件合并后运行的代码完全相同。
*   有时会发生以下情况：

痕迹：

```
FATAL EXCEPTION: main
java.lang.RuntimeException: Unable to instantiate application com.COMPANY.android.APPLICATION.application.APPLICATIONApplication: java.lang.ClassNotFoundException: com.COMPANY.android.APPLICATION.application.APPLICATIONApplication
    at android.app.LoadedApk.makeApplication(LoadedApk.java:482)
    at android.app.ActivityThread.handleBindApplication(ActivityThread.java:4089)
    at android.app.ActivityThread.access$1300(ActivityThread.java:132)
    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:137)
    at android.app.ActivityThread.main(ActivityThread.java:4575)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:511)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:789)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:556)
    at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.ClassNotFoundException: com.OO4usa.android.fanzlive.application.FanzliveApplication
    at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
    at android.app.Instrumentation.newApplication(Instrumentation.java:942)
    at android.app.LoadedApk.makeApplication(LoadedApk.java:477)
    ... 11 more 
```

现在，我的问题是，为什么 Application 子类没有打包/可见？

更糟糕的是，我们使用的是 Acra，并且捕获崩溃的注释位于丢失的应用程序上，因此没有崩溃报告。

最后，我认为我们总是可以尝试通过运行以下命令来测试构建的 APK：

```
adb install ~/path/to/app.apk 
```

但是，这是否与用户从 Play 商店下载后获得的二进制文件相同？Google 会完全弄乱构建或其元数据吗？

**编辑：** *清单的相关位*

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.COMPANY.android.APPLICATION"
    android:versionCode="7"
    android:versionName="1.3.3" >

    <uses-sdk
        android:minSdkVersion="10"
        android:targetSdkVersion="14" />

    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="android.permission.CAMERA" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />

    <uses-feature
        android:name="android.hardware.camera"
        android:required="false" />

    <application
        android:name=".application.APPLICATIONApplication"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/Theme.APP_green" >

        <!-- activities -->

        <!-- snip -->

        <!-- services -->

        <!-- snip -->

    </application>

</manifest> 
```

**编辑：** *自动生成的 proguard.cfg*

```
-optimizationpasses 5
-dontusemixedcaseclassnames
-dontskipnonpubliclibraryclasses
-dontpreverify
-verbose
-optimizations !code/simplification/arithmetic,!field/*,!class/merging/*

-keep public class * extends android.app.Activity
-keep public class * extends android.app.Application
-keep public class * extends android.app.Service
-keep public class * extends android.content.BroadcastReceiver
-keep public class * extends android.content.ContentProvider
-keep public class * extends android.app.backup.BackupAgentHelper
-keep public class * extends android.preference.Preference
-keep public class com.android.vending.licensing.ILicensingService

-keepclasseswithmembernames class * {
    native <methods>;
}

-keepclasseswithmembers class * {
    public <init>(android.content.Context, android.util.AttributeSet);
}

-keepclasseswithmembers class * {
    public <init>(android.content.Context, android.util.AttributeSet, int);
}

-keepclassmembers class * extends android.app.Activity {
   public void *(android.view.View);
}

-keepclassmembers enum * {
    public static **[] values();
    public static ** valueOf(java.lang.String);
}

-keep class * implements android.os.Parcelable {
  public static final android.os.Parcelable$Creator *;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T14:45:47.753

我们的项目也遇到了类似的问题。Eclipse 中的发布版本正在左右丢弃类。

出于某种原因，当第一次完成**调试**构建时（一直到在模拟器上运行它），**然后**完成发布导出，它就开始工作了。

这听起来像是 Eclipse 中的一个错误，因为 proguard 甚至没有配置为在我们的`project.properties`文件中使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T15:02:07.890

> 这是否与用户从 Play 商店下载后获得的二进制文件相同？Google 会完全弄乱构建或其元数据吗？

不，用户将获得**与**您上传到[Google Play 开发者控制台](https://play.google.com/apps/publish/Home)**完全相同**的文件。 **`.apk`**

 **关于指定的异常 - 它告诉您在最终的“.apk”文件中缺少标签属性中`Application`指定的子类。**每次**您尝试运行应用程序的特定构建时都应该抛出此异常，而不是“有时”。`android:name``<application>``AndroidManifest.xml`**

# javascript - 在Javascript中读取附加到变量的值

> ID：13124107
> 
> 赞同：0
> 
> 时间：2012-10-29T14:56:58.877
> 
> 标签：javascript

嗨，下面是我的代码的一部分。我没有得到想要的输出，`else if ( txt3Val.value >= txt4Val )`但如果我调整它就可以`else if ( document.getElementById('txt3') >= document.getElementById('txt4') )`了。有人能告诉我为什么会这样吗？谢谢。

```
......AND THE CODE READS
    else if(document.form1.GWchk.checked == true) 
        {
        var txt3Val = document.getElementById('txt3');
        var txt4Val = document.getElementById('txt4');
            if(txt3Val.value == "" || txt4Val.value == "")
            {
                alert ("You need to enter both starting and ending number \nof the cheque book for GlW."); return false;
            }
            else if ( txt3Val.value >= txt4Val ) 
            { 
                alert ("Ending cheque number should be of greater value"); return false;
            }
            else
            {
            alert ("Successfully saved your entry1."); return false;
            }
        } 
```

**亮点：**对不起，代码`else if ( txt3Val.value >= txt4Val.value )`也不起作用！实际上，这就是我的真实脚本上的重写错误。但是我的问题仍然存在，它没有给我结束数字应该更大......并且直接成功保存。

**编辑**我想我想通了。在第一个文本框中，如果我将“10”作为值，第二个作为“9”，那么 JS 似乎不会将 9 识别为较低的值。但如果我输入“09”，它会给出所需的输出。我该如何处理？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T15:01:29.670

尝试改变：

```
else if ( txt3Val.value >= txt4Val ) 
```

至

```
else if ( txt3Val.value >= txt4Val.value ) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T15:00:34.823

```
else if ( txt3Val.value >= txt4Val ) 
```

应该

```
else if ( txt3Val.value >= txt4Val.value ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T15:00:45.193

再次使用比较 HTML 元素不会给您想要的结果。追加`.value`到末尾`txt4Val`以访问该元素的值：

```
else if ( txt3Val.value >= txt4Val.value ) {

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T15:01:56.820

```
if( parseInt( txt3Val.value, 10 ) >=  parseInt( txt4Val.value, 10 ) ) 
```

# html - CSS样式堡垒流体宽度

> ID：13124110
> 
> 赞同：0
> 
> 时间：2012-10-29T14:57:04.097
> 
> 标签：html, css

[我的网站在这里](http://www.inside-guides.co.uk/brentwood/pages/index.html)是流畅的宽度，但是带有搜索栏和图像的中间标题部分在 IE、Chrome 或 FF 中都不能正确调整大小。

我已经尝试使用媒体屏幕样式表来降低屏幕分辨率，但这只会导致在某些浏览器中右侧图像的右侧有一个间隙，它们会以不同的方式显示宽度。

如果有人可以在不同的分辨率和浏览器上查看并查看它，那将是很棒的，并且可能对任何建议有所帮助。

目前在 IE9 中，当它略微缩小到 1263 像素（约 1250 像素）以下时，图像会完全跳下并且看起来很糟糕。

这是CSS：

```
/*Town Image */
#town-image-search {
box-shadow:0 5px 5px #CCC;
background:0;
filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#fafafa',endColorstr='#e4e4e4');
border-top:1px solid #D6D2D5;
border-bottom:#d1d1d1;
}

#search-bar {
float:left;
width:16.5%;
padding:8px 15px;
}

input#search {
width:100%;
height:22px;
color:#aaa;
text-indent:10px;
border:1px solid #d6d6d6;
font-size:14px;
-webkit-border-bottom-left-radius:5px;
-webkit-border-radius:5px;
-moz-border-radius:5px;
border-radius:5px;
margin:0 0 6px;
padding:0;
}

input#submit {
width:100%;
border:1px solid #666;
height:22px;
color:#fff;
text-shadow:0 1px 0 #555;
background-color:#803C6D;
font-family:'Arial Rounded MT Bold';
cursor:pointer;
-webkit-border-top-right-radius:5px;
-webkit-border-radius:5px;
-moz-border-radius:5px;
border-radius:5px;
padding:0;
}

#middle-top {
height:68px;
float:left;
width:81%;
border-left:1px solid #Fafafa;
}

#town-name {
word-spacing:5px;
position:relative;
z-index:0;
float:left;
font-family:'arial rounded mt bold';
font-size:36px;
color:#354057;
line-height:69px;
text-indent:27px;
letter-spacing:-3px;
}

#town-name span {
font-family:'arial rounded mt bold';
color:#354057;
}

img#heart {
float:right;
width:230px;
height:68px;
position:relative;
z-index:10;
margin-right:-120px;
}

img#town-image {
width:404px;
height:68px;
float:right;
} 
```

任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T20:16:23.163

`#middle-top`a`float:right`并将宽度更改为 80%

# java - 由漂亮面孔重定向

> ID：13124111
> 
> 赞同：1
> 
> 时间：2012-10-29T14:57:10.463
> 
> 标签：java, jsf, redirect, prettyfaces

我遇到了一个问题，Pretty Faces 会导致无限循环，由我的浏览器结束：`Firefox has detected that the server is redirecting the request for this address in a way that will never complete.`

**问题的确切原因**

*文件结构*

![在此处输入图像描述](../Images/7093eafea6ec3ca40bc9392b82929d99.png)

*pretty-config.xml 片段*

```
<url-mapping id="login">
    <pattern value="/login" />
    <view-id value="/login/login.xhtml" />
</url-mapping>

<url-mapping id="register">
    <pattern value="/register" />
    <view-id value="/login/register.xhtml" />
</url-mapping> 
```

**描述**

导航到`localhost:8080/register`将导致我的网页。导航到`localhost:8080/login`将导致所描述的循环，请注意导航将导致重定向到`localhost:8080/login/`< - 一个尾部斜杠。

我的猜测`localhost:8080/login`是对文件夹的请求`login`。但我不知道如何修复它，所以我的请求`localhost:8080/login`将导致网页。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T15:54:20.797

我过去也有这个问题。问题是您的 Servlet 容器。如果您请求一个类似的 URL `/login`，您的容器会检查您的 Web 应用程序中是否有一个名为 的目录`login`。如果是这样，它会将您重定向到`/login/`，因为容器认为您想要访问此目录。如果还有删除尾部斜杠的重写规则，您将看到这样的行为。

我知道这很奇怪，但是 tomcat 用户列表中的某个人写道，这种行为符合规范。

因此，唯一的解决方案是在您的映射中更改`/login`为`/login/`或重命名您的 webapp 中的登录文件夹。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-29T15:17:35.173

我唯一的猜测是你`FacesServlet`的映射到，`*.xhtml`所以当一个请求被处理时，首先你的漂亮过滤器将它转发到你的 FacesServlet，但是，因为你的 xhtml 文件在路径中，然后转发再次被你的漂亮过滤器无限处理。

要解决它，请将您的视图放在 WEB-INF 文件夹中，并在您的`pretty.config.xml`put 中添加如下内容：

```
 <url-mapping id="login">
    <pattern value="/login/" />
    <view-id value="/WEB-INF/views/login.xhtml" />
 </url-mapping> 
```

这样过滤器截获的路径与你的servlet不一样，因为客户端可以请求`WEB-INF`文件夹中的资源

# c++ - 从字符串转换为数字大于 std::numeric_limit 的 double ::数字10

> ID：13124112
> 
> 赞同：4
> 
> 时间：2012-10-29T14:57:10.700
> 
> 标签：c++, double, type-conversion

```
std::string str = "12345679012.124678";
double back = boost::lexical_cast<double>( str );
std::string str2 =boost::lexical_cast<std::string>( back );

//here str2 is equal to str 
```

即使数字的有效数字大于`std::numeric_limit<double>::digits10`（即15），这里没有损失（即最终字符串=原始字符串）是否正常？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T16:46:41.530

是的，这很正常。

`std::numeric_limit<double>::digits10`指的是保证强制转换不会有损的最大位数。

这并不意味着使用比限制更宽的数字造成损失，只是意味着损失的可能性增加。

# android - 正在启动 Android 服务？

> ID：13124115
> 
> 赞同：44
> 
> 时间：2012-10-29T14:57:22.300
> 
> 标签：android, service, android-intent

当然这是一个微不足道的问题。如果我`Service`使用以下代码启动 a 会发生什么：

```
 startService(new Intent(this,myService.class)); 
```

然后我不小心想起了上面的代码，而`Service`尚未运行？

恐怕第二次调用`startservice`可以创建一个新`Service`的，以便同时执行两个不同的进程。

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2012-10-29T15:43:15.153

> 恐怕第二次调用 startservice 可以创建一个新服务，以便同时执行两个不同的进程。

不，在多个方面：

*   不，它不会创建新服务。如果服务已经在运行，它将`onStartCommand()`再次被调用以传递新的`Intent`，但不会创建第二个副本。

*   不，它不会“同时执行两个不同的进程”，因为默认情况下，服务与应用程序的其余部分在同一进程中运行。

# database - DDL 更改如何在 PostgreSQL 中复制

> ID：13124118
> 
> 赞同：4
> 
> 时间：2012-10-29T14:57:37.847
> 
> 标签：database, postgresql, replication

在 PostgreSQl 9.1 中，流式复制是通过流式 WAL 记录完成的，这些记录由主数据上的 UPDATE 和 DELETE 生成。

DDL 更改是如何复制的？这些不是 WAL 的一部分。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-29T15:04:55.917

Postgresql 的预写日志 (WAL)*确实*包含 DDL。在 Postgresql 中，DDL 是事务性的，就像 DML 一样。一切都通过 WAL。

请参阅[http://wiki.postgresql.org/wiki/Transactional_DDL_in_PostgreSQL:_A_Competitive_Analysis](http://wiki.postgresql.org/wiki/Transactional_DDL_in_PostgreSQL:_A_Competitive_Analysis)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-29T23:30:15.860

为了详细说明 Colin 的答案，几乎*所有内容*都通过预写日志进行。它是一个块级日志，记录将对任何数据库结构进行的每次写入。对数据目录任何部分的每次更改都会首先记录在 WAL 中。这是因为 WAL 的主要目的是在系统崩溃或断电时允许重放更改，因此它需要记录每个计划的磁盘写入。

在 PostgreSQL 中，表、视图等只是系统目录表中的条目。对这些目录的更改会与其他所有内容一起被预先写入记录。数据库创建也是如此；一个 db 只是一个条目`pg_database`和相应的目录结构。

由 、 等对表格进行`VACUUM`的`CLUSTER`更改`TRUNCATE`；它们都经过 WAL，要么带有块级更改记录，要么带有特殊的 WAL 条目来描述操作。

只有少数不耐用的东西不会通过 WAL，例如：

*   更改`UNLOGGED`和`TEMPORARY`表
*   用于磁盘排序的临时文件

# c++ - XLC++ 11.1 的奇怪问题

> ID：13124121
> 
> 赞同：0
> 
> 时间：2012-10-29T14:57:42.667
> 
> 标签：c++, aix, xlc

也许这是一个糟糕的编程案例，但它体现在 XLC++ 从 6.0 升级到 11.1

代码如下所示：

```
 int startAt = 140;
 startAt = parseAndSaveResponseINSTANTID_MODEL(response, startAt);
 COUT << "After tokenize INSTANTID_MODEL startAt=" <<startAt <<ENDL;

    startAt = startAt++;
    startAt = parseAndSaveResponseINSTANTID_CHRON_HISTORY(response, startAt);
COUT << "After tokenize INSTANTID_MODEL startAt=" <<startAt <<ENDL;

    startAt = startAt++;
    startAt = parseAndSaveResponseINSTANTID_FOLLOWUP_ACTION(response, startAt);
COUT << "After tokenize TSTID_INSTANTID_FOLLOWUP_ACTION startAt=" <<startAt <<ENDL;

startAt = startAt++;
    startAt = parseAndSaveResponseINSTANTID_RISK_INDICATOR(response, startAt);
COUT << "After tokenize TSTID_INSTANTID_RISK_INDICATOR startAt=" <<startAt <<ENDL; 
```

在每个解析方法中，我们做一个`return (startAt + 1 + vRows * 81);`

vRows 在所有方法中都为零。

使用旧编译器，输出如下所示：

```
 After tokenize INSTANTID_MODEL startAt=141
 vRows=0
 After tokenize INSTANTID_MODEL startAt=142
 vRows=0
 After tokenize TSTID_INSTANTID_FOLLOWUP_ACTION startAt=143
 vRows=0
 After tokenize TSTID_INSTANTID_RISK_INDICATOR startAt=144 
```

但是，使用新的编译器，输出看起来像

```
 After tokenize INSTANTID_MODEL startAt=141
 vRows=0
 After tokenize INSTANTID_MODEL startAt=143
 vRows=0
 After tokenize TSTID_INSTANTID_FOLLOWUP_ACTION startAt=145
 vRows=0
 After tokenize TSTID_INSTANTID_RISK_INDICATOR startAt=147 
```

处理整数/返回的方式是否发生了变化？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T15:25:10.743

`startAt = startAt++`是[未定义的行为](http://c-faq.com/expr/ieqiplusplus.html)。因为它是未定义的，所以编译器可以自由给出任何它想要给出的结果，比如 6.0 版中的这个结果和 11.1 版中的不同结果。

;-)

使用 GCC，`-Wsequence-point`(or `-Wall`) 会为此构造发出警告。不确定 XLC 中是否有等效警告。

# zxing - 是否有用于 Windows 的 zxing 的预编译二进制文件

> ID：13124124
> 
> 赞同：2
> 
> 时间：2012-10-29T14:57:48.563
> 
> 标签：zxing, binaries

[是否有用于 Windows 的zxing](http://code.google.com/p/zxing/)预编译版本？Java 版本或 C++ 端口都可以。我可以在他们的网站上找到源包。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T22:58:26.437

Maven 中的 Java 工件`core`，`javase`来自 Sonatype 的 OSS 存储库：[https ://oss.sonatype.org/index.html#nexus-search;quick~zxing](https://oss.sonatype.org/index.html#nexus-search;quick~zxing)

如果您使用 Maven，这很有用，但也意味着您也可以通过网络获取 .jar 文件： [https ://oss.sonatype.org/content/groups/google/com/google/zxing/](https://oss.sonatype.org/content/groups/google/com/google/zxing/)

# c++ - 在 DirectShow 中寻找不同的流

> ID：13124130
> 
> 赞同：1
> 
> 时间：2012-10-29T14:58:12.307
> 
> 标签：c++, winapi, com, directshow

在我开发的应用程序中，我使用 VMR9 播放多层视频。问题是我需要能够在每个视频流中独立导航。

有没有人实现过类似的东西或知道怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T01:06:37.167

不应该部分地寻找过滤器图。您应该将它们分成单独的图表并使用在图表之间传递数据的某种方法组合内容，例如以主从方式。一种流行的方法是使用“桥梁”：[DirectShow 中的多个图](http://www.gdcl.co.uk/gmfbridge/)。

# iphone - 加载屏幕到游戏过渡

> ID：13124133
> 
> 赞同：0
> 
> 时间：2012-10-29T14:58:24.920
> 
> 标签：iphone, ios, opengl-es, opengl-es-2.0

当我启动我的游戏时，我希望屏幕在后台加载资源时显示加载图像。我通过加载一个简单的 UIImageView 组件并为其添加一个“微调器”来向用户提供反馈，即设备正在后台加载某些内容。

在显示此图像时，我加载所有图像和纹理并设置我的 OpenGL 视图并让它渲染。当第二帧被渲染时，我想隐藏 ImageView 并且只显示 OpenGL 视图。我不希望 OpenGL 视图显示在第一帧上，因为渲染需要很长时间。

但是，我在加载所有资源并为 OpenGL 视图设置 DisplayLink 以在新线程中进入渲染循环，然后在加载完成时显示 OpenGL 视图时遇到了一些问题。渲染循环似乎没有开始。

这是我的视图控制器的 loadView 方法

```
- (void)loadView 
{
CGRect mainScreenFrame = [[UIScreen mainScreen] applicationFrame];

    // Set up the image view
    UIImage *img = [UIImage imageWithContentsOfFile: [[NSBundle mainBundle] pathForResource:@"Startscreen" ofType:@"png"]];
    _imageView = [[UIImageView alloc] initWithFrame:mainScreenFrame];
    _imageView.image = img;

    // Set up the spinner
    _spinner = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhiteLarge];
    [_spinner setCenter:CGPointMake(mainScreenFrame.size.height/3.0*1.85, mainScreenFrame.size.width/10.0*7.55)];
    [_imageView addSubview:_spinner];    
    [_spinner startAnimating];

    // Show the loading image
    self.view = _imageView;

    /* Load resources in a new thread -- this shows the spinner during loading */
    [NSThread detachNewThreadSelector:@selector(loadGLView) toTarget:self withObject:nil];
} 
```

loadGLView 仅执行以下操作并初始化 OpenGL 视图并开始加载过程。

```
_glView = [[JungleOpenGLView alloc] initWithFrame:mainScreenFrame]; 
```

这就是我在 OpenGL 视图中设置 DisplayLink 的方式。

```
CADisplayLink* displayLink = [CADisplayLink displayLinkWithTarget:self selector:@selector(setupRender:)];
[displayLink setFrameInterval:2];
[displayLink addToRunLoop:[NSRunLoop mainRunLoop] forMode:NSDefaultRunLoopMode]; 
```

当第二帧被渲染时，我发送一个通知，然后 ViewController 设置

```
self.view = _glView; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T09:21:07.487

我发现了我的错误。而不是像这样为加载方法创建一个新线程：

```
[NSThread detachNewThreadSelector:@selector(loadGLView) toTarget:self withObject:nil]; 
```

我用了：

```
[self performSelectorInBackground:@selector(loadGLView) withObject:nil]; 
```

这就是诀窍。关于这个主题（创建线程）的好读物可以在这里找到：[https ://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Multithreading/CreatingThreads/CreatingThreads.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Multithreading/CreatingThreads/CreatingThreads.html)

# c++ - C++ 类方法声明返回错误

> ID：13124135
> 
> 赞同：3
> 
> 时间：2012-10-29T14:58:32.047
> 
> 标签：c++, class, types, compiler-errors, declaration

我最近开始使用 C++ 类，并在遇到错误时才开始。我有一个“resource.h”文件，其中包含两个类的类定义：“deck”和“card”。我`#include`将此文件放在另一个文件“card.cpp”中。在 card.cpp 文件中，我描述了“card”类的所有方法/功能。但是在编译时，我收到以下错误（仅供参考，我正在使用 MinGW 编译器进行命令行）：

> card.cpp:3:29：错误：ISO C++ 禁止声明没有类型的“setCard” [-fp ermissive] card.cpp:3:1：错误：“int Card::setCard(char, char)”的原型与“卡”类资源中的任何内容不匹配。h:9:8：错误：候选人是：void Card::setCard(char, char)

“card.cpp”文件：

```
#include "resource.h"

Card::setCard(char f, char s) {
    face = f;
    suit = s;
}

Card::Card (char face, char suit) {
    setCard(face, suit);
}

Card::~Card () {} 
```

“resource.h”文件：

```
typedef unsigned short int UINT;
class Card;
class Deck;

class Card {
    public:
        Card(char face, char suit);
        ~Card();        
        void setCard(char face, char suit);
        char getFace() const { return face; }
        char getSuit() const { return suit; }
    private:
        char face;
        char suit;
};

class Deck {
    public:
        Deck();
        ~Deck();
        Card getCard(UINT x);

    private:
        Card myCards[54];
}; 
```

是什么导致了这个问题，为什么编译器认为“Card::setChard()”是一个`int`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-29T14:59:06.713

```
Card::setCard(char f, char s) {
    face = f;
    suit = s;
} 
```

应该

```
void Card::setCard(char f, char s) {
    face = f;
    suit = s;
} 
```

一些提示帮助我得出了这个惊人的结论：

*   C++ 禁止声明没有类型的“setCard”
*   候选人是：`void Card::setCard(char, char)`

如果您认为这很神秘，请在使用模板时紧紧抓住。编译器有为它们生成大量错误消息的历史。

# string - 从函数更改字符串并将其作为输入 MATLAB

> ID：13124137
> 
> 赞同：1
> 
> 时间：2012-10-29T14:58:35.833
> 
> 标签：string, matlab, printf

基本上我的任务如下：编写一个以数字和字符为输入的函数。然后它将打开文件 text.txt。语音应写入文件，精度为 4，类型为字符串，即 'e'、'E' 等。然后将关闭文件。如果该函数无法打开文件，则会出现一条错误消息。

目前我的功能是这样的：

```
function [ ] = (a,b)

a=char(a)
fid=fopen('text.txt','w');
fprintf(fid,'%.4b'l,a);
fclose(fid)

end 
```

如何使我的 indata "b" 更改字符串的 "b"？

我真的可以使用一些帮助

真挚地

# git - 设置用户名和密码返回“github：找不到命令”

> ID：13124141
> 
> 赞同：7
> 
> 时间：2012-10-29T14:58:47.203
> 
> 标签：git, github, github-for-windows

我的环境完全可以在工作中使用，使用 SSH，但是在家里我倾向于使用更多的 GitHub for Windows 而不是 Git bash，所以这就是为什么使用`http`.

```
github --credentials 获取：github：找不到命令
“https://github.com”的用户名：用户
'https://user@github.com' 的密码：
github --credentials 存储：github：找不到命令
已经是最新的了。

```

我在哪里可以找到并安装`github`命令，这样我就不必每次都输入我的用户名和密码了？（我想我可能需要在`PATH`某处添加一些东西。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T15:07:00.410

你可以看看这篇很有帮助的文章：[设置 git](https://help.github.com/articles/set-up-git#platform-windows)。您有一个部分，他们向您解释如何保存密码。

没有**Github**可执行文件，*因为**Github** “只是”一个网站*，您看到的消息是`git`试图自动获取您的凭据（您可以按照上面链接中的指南解决此问题）。

* * *

*无论如何，我想谈谈 SSH，因为它对其他到达这里的人很有用。*

不过，存储密码的更好方法是不要使用密码，而是使用**SSH 密钥**。**您的Github**设置中有一个选项可以添加一个新的，使用 Windows，只需使用**PuttyGen**或替代生​​成一个密钥，导出为 OpenSSH 密钥，然后将其复制/粘贴到 Github 的文本区域。
然后使用 SSH 选项克隆您的存储库：

```
git clone git@github.com:your_username/your_project.git 
```

或者，如果您有一个已经存在的存储库，请更改 url（[参见此处](https://stackoverflow.com/questions/1595848/configuring-git-over-ssh)）：

```
git remote set-url origin git@github.com:your_username/your_project.git 
```

您不再需要输入密码，而且非常安全（只要没有人可以访问您的计算机并复制私钥）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-12T05:00:31.770

要设置您的用户名： `git config --global user.name "[Your USERNAME]"`

我的用户名是 PyTis，所以我输入： `git config --global user.name "PyTis"`

要测试您的用户名设置类型： `git config user.name` 要设置您的电子邮件（这对 GitHub 来说同样重要），请键入：

`git config --global user.email "[You EMAIL]"`

假装我的电子邮件是 me@someaddress.com，所以我输入： `git config --global user.email "me@someaddress.com"`

要测试您的电子邮件设置： `git config user.email`

对不起，我不知道如何保存密码，但用户名，我确定有效。

** 注意这里，您可以全局应用这些设置，也可以只应用到特定目录/项目。要全局应用它们，请保留我上面显示的全局，要在本地应用它们，只需在您希望应用它们的目录中使用命令，同时省略“--global”

下面举几个实际例子：

`(root@pluto)-(/home/jlee/NSIS-Walker)-(12:57 AM Tue May 12)-> (3 files, 60Kb)--> git config user.name "PyTis"`

`(root@pluto)-(/home/jlee/NSIS-Walker)-(12:57 AM Tue May 12)-> (3 files, 60Kb)--> git config user.name PyTis`

`(root@pluto)-(/home/jlee/)-(12:57 AM Tue May 12)-> (3 files, 60Kb)--> git config --global user.name "PyTis"`

`(root@pluto)-(/home/jlee/)-(12:57 AM Tue May 12)-> (3 files, 60Kb)--> git config --global user.name PyTis`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-07-02T20:57:06.357

实际上有一个 github 可执行文件，在这种情况下它被用于自动登录。

当前状态似乎已经安装了 Github for Windows（Github Desktop）并将其版本的 git 添加到 PATH 变量中。[**（如果其他读者没有，您可以在此处**](https://stackoverflow.com/questions/26620312/installing-git-in-path-with-github-client-for-windows)了解如何操作。）

要找出这个神秘的 github 可执行文件的位置，请启动与 Github for Windows 一起安装的 Git Shell，然后输入命令`which github`。

在我的系统上它吐出这条路径，在你的系统上它会有所不同：

```
/c/Users/Admin/AppData/Local/Apps/2.0/W25VPZXO.O5Y/DC9K5M2B.KL1/gith..tion_317444273a93ac29_0003.0003_5794af8169eeff14/github 
```

这是指向 github 可执行文件的 Linux 风格路径。

`/c/`通过将开头更改为（或您的驱动器号可能是其他任何内容）将其更改为 Windows 样式路径`C:\`，将正斜杠更改为反斜杠并敲掉尾随`/github`以获取目录。

对我来说，这又是这样，在你的系统上它会有所不同：

```
C:\Users\Admin\AppData\Local\Apps\2.0\W25VPZXO.O5Y\DC9K5M2B.KL1\gith..tion_317444273a93ac29_0003.0003_5794af8169eeff14 
```

将其添加到您的路径（末尾），您应该能够使用 git 命令而无需填写凭据。（不过，您仍然需要在 Github for Windows 中设置一次。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-16T12:27:51.090

如果您使用 HTTPS 克隆 GitHub 存储库，则可以使用凭证助手告诉 Git 在每次与 GitHub 通信时记住您的 GitHub 用户名和密码。

使用[Git for Windows](https://git-for-windows.github.io/)，在命令行中运行以下命令将存储您的凭据：

```
$ git config --global credential.helper wincred 
```

**更多阅读**

*   [在 Git 中缓存你的 GitHub 密码](https://help.github.com/articles/caching-your-github-password-in-git/)
*   [使用 SSH 连接到 GitHub](https://help.github.com/articles/connecting-to-github-with-ssh/)

# firefox - 如何启用对未知 URL 的自动谷歌搜索？

> ID：13124142
> 
> 赞同：0
> 
> 时间：2012-10-29T14:58:47.487
> 
> 标签：firefox, browser

如果在地址栏中键入的字符串不可解析，有没有办法让浏览器执行谷歌搜索？

例如，如果我输入：

*堆栈溢出*

我的浏览器只是说：

```
The address isn't valid
The URL is not valid and cannot be loaded. 
```

我知道关键字概念，例如为 google.com 设置 g ，这样：

*g 堆栈溢出*

将执行谷歌搜索。

但是是否也可以定义像默认搜索引擎这样的东西，只要地址无法解析，它就只搜索给定的字符串？

我为**Linux Mint使用****Firefox 16.0.1**。

 **谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T13:11:56.260

尝试更改 about:config 中的 keyword.URL 设置。信息可以在这里找到：

[http://kb.mozillazine.org/Keyword.URL](http://kb.mozillazine.org/Keyword.URL)

HTH
ysis**

# java - java多线程问题

> ID：13124143
> 
> 赞同：-1
> 
> 时间：2012-10-29T14:58:51.533
> 
> 标签：java, multithreading, concurrent-programming

> **可能重复：**
> [Java String.equals 与 ==](https://stackoverflow.com/questions/767372/java-string-equals-versus)

我正在编写一个程序来模拟兔子和乌龟的比赛！我正在使用 getName() 来查看线程正在执行哪些对象，并在此基础上增加对象值。这是我的代码：

```
public void run()
{
    try{
    for(int i=0;i<100;i++)

    {
                System.out.println(Thread.currentThread().getName());
        if(Thread.currentThread().getName() == "HARE")
        {

            hare++;
            System.out.println("hare thread");
            Thread.sleep(100);
            if(hare ==  49) 
            {
                Thread.sleep(2000);
            }   
        }
        if(Thread.currentThread().getName() == "TURTLE")
        {
            turtle++;
            Thread.sleep(250);  
        System.out.println("Turtle Thread");

        } 
```

问题是它甚至认为它准确地检测到了线程的名称，但它从来没有进入 if 块。PS我是java多线程的新手。感谢您浏览代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T15:00:00.637

```
Thread.currentThread().getName() == "HARE" 
```

你不能以这种方式比较字符串。

```
Thread.currentThread().getName().equals("HARE"); 
```

该`equals`方法区分大小写。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T15:00:14.457

您需要在比较字符串/对象时使用`.eqauls()`而不是。`==`

因此，您的代码应如下所示：

```
Thread.currentThread().getName().equals("HARE") 
```

`==`比较引用相等，这意味着两个引用都指向同一个对象。`equals()`方法确实内容平等，换句话说，检查字符串是否相同（这是您需要的）。

# google-apps-script - 删除电子邮件字段谷歌应用程序脚本

> ID：13124147
> 
> 赞同：2
> 
> 时间：2012-10-29T14:59:01.417
> 
> 标签：google-apps-script, google-contacts-api

我只是想*使用谷歌应用程序脚本代码来创建一个新联系人，并将电子邮件字段标记为“工作”，因为它*在创建时默认为“家庭”。（我正在尝试使用表单来执行此操作，但出于测试目的，它是一个简单的运行触发器）

我已经尝试了很多不同的迭代，所以这里列出的太多了。但是我最新的解决方法（所有事情都与谷歌一样）是让事物在创建联系人时创建默认的“家庭”电子邮件字段，然后添加“工作”字段电子邮件，然后删除“家庭” - 但是`deleteEmailField`谷歌文档中列出的内容永远不会起作用。

这是我整理的最新消息：

```
function testAddcontact() {
var firstName= "Contact"
var lastName= "Test2"
var email= "testy@test.com"
var newcontact = ContactsApp.createContact( firstName, lastName , email );
newcontact.addEmail("Work", email);
newcontact.deleteEmailField("Home");
} 
```

我已经尝试了很多变体，以至于我无法提供我在这里工作过的所有代码，但我已经插入了我最新尝试的上方。

有人想过如何创建联系人并将该电子邮件地址标记为“工作”而不是默认的“家庭”吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T16:12:23.003

这个片段应该工作：

```
function testAddcontact() {
  var firstName= "Contact"
  var lastName= "Test2"
  var email= "testy@test.com"
  var newcontact = ContactsApp.createContact( firstName, lastName , email );
  newcontact.addEmail(ContactsApp.Field.WORK_EMAIL, email);
  var emailArr = newcontact.getEmails(ContactsApp.Field.HOME_EMAIL);
  emailArr[0].deleteEmailField();
} 
```

请记住：

标准标签是 Field 对象

deleteEmailField 是一个 EmailField 方法

# ruby - 循环遍历数组并删除ruby中的所有重复项

> ID：13124157
> 
> 赞同：0
> 
> 时间：2012-10-29T14:59:25.510
> 
> 标签：ruby, arrays, loops, duplicates

我需要遍历一个名为@ads 的数组并删除其中所有相互重复的对象。我该怎么做呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T15:01:59.030

```
@ads = @ads.uniq 
```

或者

```
@ads.uniq! 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-29T15:02:02.723

下面的代码将通过 id 为您提供唯一的结果。

```
@ads = @ads.uniq{|ad| ad.id} 
```

# r - 使用 plm 的动态面板数据。错误 "solve.default(Reduce("+", A1)) "

> ID：13124161
> 
> 赞同：0
> 
> 时间：2012-10-29T14:59:31.697
> 
> 标签：r, plm

我有一个`pdata.frame`来自 plm 库的 df 格式：

`library(plm)`

```
 head(df) :  

       Company Year Kapitalinkomster Bank.o.kassa
3-1920       3 1920         1.388520    0.5520765
3-1921       3 1921         1.251319    0.6952595
3-1922       3 1922         1.001186    0.9812447
3-1923       3 1923         1.056346    1.4212759
3-1924       3 1924         1.451935    0.9596924
3-1925       3 1925         1.435478    0.2283118

dim(df) :
[1] 1196    4

str(df) :
Classes ‘pdata.frame’ and 'data.frame': 1196 obs. of  4 variables:
 $ Company         : Factor w/ 42 levels "3","4","5","6",..: 1 1 1 1 1 1 1 1 1 1 ...
  ..- attr(*, "index")='data.frame':    1196 obs. of  2 variables:
  .. ..$ Company: Factor w/ 42 levels "3","4","5","6",..: 1 1 1 1 1 1 1 1 1 1 ...
  .. ..$ Year   : Factor w/ 62 levels "1887","1888",..: 34 35 36 37 38 39 40 41 42 43 ...
  ..- attr(*, "names")= chr  "3-1920" "3-1921" "3-1922" "3-1923" ...
 $ Year            : Factor w/ 62 levels "1887","1888",..: 34 35 36 37 38 39 40 41 42 43 ...
  ..- attr(*, "index")='data.frame':    1196 obs. of  2 variables:
  .. ..$ Company: Factor w/ 42 levels "3","4","5","6",..: 1 1 1 1 1 1 1 1 1 1 ...
  .. ..$ Year   : Factor w/ 62 levels "1887","1888",..: 34 35 36 37 38 39 40 41 42 43 ...
  ..- attr(*, "names")= chr  "3-1920" "3-1921" "3-1922" "3-1923" ...
 $ Kapitalinkomster:Classes 'pseries', 'numeric'  atomic [1:1196] 1.39 1.25 1 1.06 1.45 ...
  .. ..- attr(*, "index")='data.frame': 1196 obs. of  2 variables:
  .. .. ..$ Company: Factor w/ 42 levels "3","4","5","6",..: 1 1 1 1 1 1 1 1 1 1 ...
  .. .. ..$ Year   : Factor w/ 62 levels "1887","1888",..: 34 35 36 37 38 39 40 41 42 43 ...
 $ Bank.o.kassa    :Classes 'pseries', 'numeric'  atomic [1:1196] 0.552 0.695 0.981 1.421 0.96 ...
  .. ..- attr(*, "index")='data.frame': 1196 obs. of  2 variables:
  .. .. ..$ Company: Factor w/ 42 levels "3","4","5","6",..: 1 1 1 1 1 1 1 1 1 1 ...
  .. .. ..$ Year   : Factor w/ 62 levels "1887","1888",..: 34 35 36 37 38 39 40 41 42 43 ...
 - attr(*, "index")='data.frame':   1196 obs. of  2 variables:
  ..$ Company: Factor w/ 42 levels "3","4","5","6",..: 1 1 1 1 1 1 1 1 1 1 ...
  ..$ Year   : Factor w/ 62 levels "1887","1888",..: 34 35 36 37 38 39 40 41 42 43 ... 
```

我尝试做一个两步动态随机面板数据模型，如 plm tutorial pdf on page 23： [plm vignette](ftp://mirror.cict.fr/cran/web/packages/plm/vignettes/plm.pdf)

```
dynamicrandom=pgmm(Kapitalinkomster~lag(Kapitalinkomster,1)+Bank.o.kassa|lag(Kapitalinkomster,2:99),
                   data=df,effect="twoways",model="twosteps") 
```

然后我得到这个`error`：

```
Error in solve.default(Reduce("+", A1)) : 
  system is computationally singular: reciprocal condition number = 8.46296e-2

traceback()
3: solve.default(Reduce("+", A1))
2: solve(Reduce("+", A1))
1: pgmm(Kapitalinkomster ~ lag(Kapitalinkomster, 1) + Bank.o.kassa | 
       lag(Kapitalinkomster, 2:99), data = datapd, effect = "individual", 
       model = "twosteps") 
```

我觉得很奇怪。

如果我尝试`pgmm`使用较小的数据集运行，其中所有“不必要的”变量都被删除，

```
dim(ph)
[1] 300   4

rownames(ph)=NULL

head(ph)
  Company Year Kapitalinkomster Bank.o.kassa
1       3 1920         1.388520    0.5520765
2       3 1921         1.251319    0.6952595
3       3 1922         1.001186    0.9812447
4       3 1923         1.056346    1.4212759
5       3 1924         1.451935    0.9596924
6       3 1925         1.435478    0.2283118 
```

我得到错误

```
Error in yX[[1]] : subscript out of bounds
In addition: Warning message:
In `[.data.frame`(index, as.numeric(rownames(mf)), ) :
  NAs introduced by coercion 
```

有人知道为什么`pgmm`不为我工作吗？

这是

```
 dput(df[1:60,])
structure(list(Company = structure(c(1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 2L, 2L, 2L, 2L, 
2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
2L, 2L, 2L, 2L, 2L, 2L), .Names = c("3-1920", "3-1921", "3-1922", 
"3-1923", "3-1924", "3-1925", "3-1926", "3-1927", "3-1928", "3-1929", 
"3-1930", "3-1931", "3-1932", "3-1933", "3-1934", "3-1935", "3-1936", 
"4-1887", "4-1888", "4-1889", "4-1890", "4-1891", "4-1892", "4-1893", 
"4-1894", "4-1895", "4-1896", "4-1897", "4-1898", "4-1899", "4-1900", 
"4-1901", "4-1902", "4-1903", "4-1904", "4-1905", "4-1906", "4-1907", 
"4-1908", "4-1909", "4-1910", "4-1911", "4-1912", "4-1913", "4-1914", 
"4-1915", "4-1916", "4-1917", "4-1918", "4-1919", "4-1920", "4-1921", 
"4-1922", "4-1923", "4-1924", "4-1925", "4-1926", "4-1927", "4-1928", 
"4-1929"), .Label = c("3", "4", "5", "6", "10", "12", "14", "19", 
"20", "21", "25", "26", "29", "33", "34", "35", "40", "43", "45", 
"46", "47", "48", "49", "57", "58", "59", "60", "62", "64", "65", 
"68", "69", "71", "72", "73", "74", "76", "77", "79", "80", "83", 
"84"), class = c("pseries", "factor")), Year = structure(c(34L, 
35L, 36L, 37L, 38L, 39L, 40L, 41L, 42L, 43L, 44L, 45L, 46L, 47L, 
48L, 49L, 50L, 1L, 2L, 3L, 4L, 5L, 6L, 7L, 8L, 9L, 10L, 11L, 
12L, 13L, 14L, 15L, 16L, 17L, 18L, 19L, 20L, 21L, 22L, 23L, 24L, 
25L, 26L, 27L, 28L, 29L, 30L, 31L, 32L, 33L, 34L, 35L, 36L, 37L, 
38L, 39L, 40L, 41L, 42L, 43L), .Names = c("3-1920", "3-1921", 
"3-1922", "3-1923", "3-1924", "3-1925", "3-1926", "3-1927", "3-1928", 
"3-1929", "3-1930", "3-1931", "3-1932", "3-1933", "3-1934", "3-1935", 
"3-1936", "4-1887", "4-1888", "4-1889", "4-1890", "4-1891", "4-1892", 
"4-1893", "4-1894", "4-1895", "4-1896", "4-1897", "4-1898", "4-1899", 
"4-1900", "4-1901", "4-1902", "4-1903", "4-1904", "4-1905", "4-1906", 
"4-1907", "4-1908", "4-1909", "4-1910", "4-1911", "4-1912", "4-1913", 
"4-1914", "4-1915", "4-1916", "4-1917", "4-1918", "4-1919", "4-1920", 
"4-1921", "4-1922", "4-1923", "4-1924", "4-1925", "4-1926", "4-1927", 
"4-1928", "4-1929"), .Label = c("1887", "1888", "1889", "1890", 
"1891", "1892", "1893", "1894", "1895", "1896", "1897", "1898", 
"1899", "1900", "1901", "1902", "1903", "1904", "1905", "1906", 
"1907", "1908", "1909", "1910", "1911", "1912", "1913", "1914", 
"1915", "1916", "1917", "1918", "1919", "1920", "1921", "1922", 
"1923", "1924", "1925", "1926", "1927", "1928", "1929", "1930", 
"1931", "1932", "1933", "1934", "1935", "1936", "1937", "1938", 
"1939", "1940", "1941", "1942", "1943", "1944", "1945", "1946", 
"1947", "1948"), class = c("pseries", "factor")), Kapitalinkomster = structure(c(1.3885195254922, 
1.25131942960191, 1.00118642574671, 1.05634611761787, 1.45193473728394, 
1.43547824494178, 1.38055601480859, 1.34933328550615, 1.28899624736276, 
0.76598077860797, 0.655935113492874, 0.774737637154851, 1.25108435851729, 
1.47671292146985, 1.34370424443801, 1.32632101821461, 1.51421133098558, 
1.26164769097955, 0.955087391528799, 1.12112930644918, 6.97097381553989, 
7.79692376727096, 6.75239407150735, 2.08849093781665, 2.59292961541875, 
3.11050340941574, 2.96014979405135, 5.52806493525727, 4.2921092782187, 
4.6719464983905, 3.83041286491572, 4.07770060833387, 4.25073315665221, 
4.3909964974014, 4.11259760549932, 4.28222569526617, 3.79412435277674, 
4.01135863256581, 4.3810637384393, 4.45988129747339, 4.44638766670966, 
4.09501035463032, 4.71990150360464, 4.67768296668679, 4.4802955128012, 
5.04020000347546, 5.12446555871404, 4.75796798559771, 7.5561386506949, 
4.88420437113848, 4.84541975371883, 5.18996412420159, 5.17554303094439, 
5.39663296271381, 5.61129389005161, 5.33778018090439, 5.49889317435039, 
5.24776724759386, 4.83822195731842, 4.90661955903865), .Names = c("3-1920", 
"3-1921", "3-1922", "3-1923", "3-1924", "3-1925", "3-1926", "3-1927", 
"3-1928", "3-1929", "3-1930", "3-1931", "3-1932", "3-1933", "3-1934", 
"3-1935", "3-1936", "4-1887", "4-1888", "4-1889", "4-1890", "4-1891", 
"4-1892", "4-1893", "4-1894", "4-1895", "4-1896", "4-1897", "4-1898", 
"4-1899", "4-1900", "4-1901", "4-1902", "4-1903", "4-1904", "4-1905", 
"4-1906", "4-1907", "4-1908", "4-1909", "4-1910", "4-1911", "4-1912", 
"4-1913", "4-1914", "4-1915", "4-1916", "4-1917", "4-1918", "4-1919", 
"4-1920", "4-1921", "4-1922", "4-1923", "4-1924", "4-1925", "4-1926", 
"4-1927", "4-1928", "4-1929")), Aktiebolag = structure(c(0L, 
0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 
0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 
0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 
0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L), .Names = c("3-1920", 
"3-1921", "3-1922", "3-1923", "3-1924", "3-1925", "3-1926", "3-1927", 
"3-1928", "3-1929", "3-1930", "3-1931", "3-1932", "3-1933", "3-1934", 
"3-1935", "3-1936", "4-1887", "4-1888", "4-1889", "4-1890", "4-1891", 
"4-1892", "4-1893", "4-1894", "4-1895", "4-1896", "4-1897", "4-1898", 
"4-1899", "4-1900", "4-1901", "4-1902", "4-1903", "4-1904", "4-1905", 
"4-1906", "4-1907", "4-1908", "4-1909", "4-1910", "4-1911", "4-1912", 
"4-1913", "4-1914", "4-1915", "4-1916", "4-1917", "4-1918", "4-1919", 
"4-1920", "4-1921", "4-1922", "4-1923", "4-1924", "4-1925", "4-1926", 
"4-1927", "4-1928", "4-1929")), Bank.o.kassa = structure(c(0.552076466710613, 
0.695259455479398, 0.981244655715202, 1.42127589620433, 0.959692448821232, 
0.228311793009368, 0.30871924158571, 2.69943145432275, 3.04368302717424, 
3.05290552372935, 4.24442587875512, 2.43324032807521, 4.69502073549705, 
4.21425554491043, 3.43802415683905, 1.91228479124126, 0.183612711919672, 
1.93873324222939, 0.658324934241255, 1.65583430229754, 8.16610788753491, 
10.6696930067877, 6.20505938433427, 0.768959064173528, 2.47147653520727, 
1.4749677888885, 2.1905085760638, 10.4511636424978, 18.4910241070292, 
15.5739616534392, 11.4808752327392, 7.18593926102981, 4.79510448317011, 
2.85703955642673, 1.82405600468293, 1.14336459853929, 1.91224006506971, 
1.86664771087767, 3.29991106032535, 3.01042462888444, 6.84688859551067, 
4.5949838689742, 4.95776617931262, 6.01761059832527, 5.12621851069932, 
2.36515966545918, 2.50574176281981, 1.88913570646181, 2.12361708504312, 
1.70295644658185, 0.237788523257187, 3.94594260772663, 0.514660379058555, 
0.63723501085728, 0.163482237867645, 0.197324873476979, 0.692618649628274, 
0.316872042668265, 1.67508648494876, 0.142354356664425), .Names = c("3-1920", 
"3-1921", "3-1922", "3-1923", "3-1924", "3-1925", "3-1926", "3-1927", 
"3-1928", "3-1929", "3-1930", "3-1931", "3-1932", "3-1933", "3-1934", 
"3-1935", "3-1936", "4-1887", "4-1888", "4-1889", "4-1890", "4-1891", 
"4-1892", "4-1893", "4-1894", "4-1895", "4-1896", "4-1897", "4-1898", 
"4-1899", "4-1900", "4-1901", "4-1902", "4-1903", "4-1904", "4-1905", 
"4-1906", "4-1907", "4-1908", "4-1909", "4-1910", "4-1911", "4-1912", 
"4-1913", "4-1914", "4-1915", "4-1916", "4-1917", "4-1918", "4-1919", 
"4-1920", "4-1921", "4-1922", "4-1923", "4-1924", "4-1925", "4-1926", 
"4-1927", "4-1928", "4-1929")), Obligationer = structure(c(0, 
0.710619775236431, 0.569764858043086, 0.663694337104649, 0.761033448298168, 
0.319840031930296, 0.312307395488807, 0.0346835018362475, 0.0330125633514856, 
0.0188647549138383, 0.0151764700315497, 0.018196428174861, 0.0300829419881919, 
9.20824963171287, 8.09476461975424, 7.33591599214263, 10.3237519153303, 
23.4587496564246, 8.34307628014455, 8.21105338961859, 19.3630967796124, 
18.5571303656964, 26.520466175308, 7.10867944326549, 6.98218342383004, 
6.27961874258339, 5.04505474511001, 6.80023508002221, 8.77338607338471, 
8.86362404959709, 7.75977758606352, 10.3435727294857, 9.89547857880742, 
9.53223792314849, 11.9082814125304, 12.8046506505709, 15.1592108784811, 
15.398922387006, 15.1136243789378, 14.6794808956586, 14.2827955517189, 
14.7029129176851, 15.5305565249781, 14.9495702592336, 13.5321062823358, 
16.9791185495982, 27.5452432427652, 35.5636383102538, 31.5779522681227, 
31.3394353672748, 38.0906430075851, 39.4360188809573, 40.2139304909776, 
40.592971239732, 37.6076781083026, 34.5895784054617, 31.8919927541514, 
29.1162189615666, 26.8061925543101, 27.0963897344843), .Names = c("3-1920", 
"3-1921", "3-1922", "3-1923", "3-1924", "3-1925", "3-1926", "3-1927", 
"3-1928", "3-1929", "3-1930", "3-1931", "3-1932", "3-1933", "3-1934", 
"3-1935", "3-1936", "4-1887", "4-1888", "4-1889", "4-1890", "4-1891", 
"4-1892", "4-1893", "4-1894", "4-1895", "4-1896", "4-1897", "4-1898", 
"4-1899", "4-1900", "4-1901", "4-1902", "4-1903", "4-1904", "4-1905", 
"4-1906", "4-1907", "4-1908", "4-1909", "4-1910", "4-1911", "4-1912", 
"4-1913", "4-1914", "4-1915", "4-1916", "4-1917", "4-1918", "4-1919", 
"4-1920", "4-1921", "4-1922", "4-1923", "4-1924", "4-1925", "4-1926", 
"4-1927", "4-1928", "4-1929")), Lån = structure(c(21.8552046760463, 
16.9354631519048, 14.1079257359718, 16.7908540878211, 21.8125358015014, 
22.7049393024745, 22.9845270523343, 20.6327272995821, 20.2367766482934, 
9.0730433268189, 8.76280146788203, 8.45831605254012, 18.5583384882304, 
16.0227874442418, 14.4469141085505, 16.2948078954055, 18.4678621483242, 
34.8801647613554, 12.8718995058876, 26.2903301206017, 64.6032084887766, 
61.4639536152419, 57.7399633611202, 24.4863080781916, 27.8232438432077, 
30.3833412076318, 30.0677530506136, 65.1444741565493, 56.6516443429197, 
60.315684852254, 56.4199996064144, 60.1715597365204, 65.0667857507308, 
69.0349764486106, 66.422363861315, 67.6453246293749, 65.7992995302202, 
65.8377134866222, 70.3265356626504, 71.1633761722355, 67.0366584836927, 
68.6845898885332, 69.184192353293, 68.9082294008192, 67.774846884622, 
75.1563302426472, 63.307097388227, 55.885346238016, 56.7374120385912, 
56.4914905969678, 52.7731271340091, 48.12682459542, 49.3502034782439, 
49.1867624617933, 52.8503985776916, 55.3039715920661, 57.9145523998424, 
60.7339335739289, 59.9731465741533, 49.3913672299458), .Names = c("3-1920", 
"3-1921", "3-1922", "3-1923", "3-1924", "3-1925", "3-1926", "3-1927", 
"3-1928", "3-1929", "3-1930", "3-1931", "3-1932", "3-1933", "3-1934", 
"3-1935", "3-1936", "4-1887", "4-1888", "4-1889", "4-1890", "4-1891", 
"4-1892", "4-1893", "4-1894", "4-1895", "4-1896", "4-1897", "4-1898", 
"4-1899", "4-1900", "4-1901", "4-1902", "4-1903", "4-1904", "4-1905", 
"4-1906", "4-1907", "4-1908", "4-1909", "4-1910", "4-1911", "4-1912", 
"4-1913", "4-1914", "4-1915", "4-1916", "4-1917", "4-1918", "4-1919", 
"4-1920", "4-1921", "4-1922", "4-1923", "4-1924", "4-1925", "4-1926", 
"4-1927", "4-1928", "4-1929")), Aktier = structure(c(3.07318204837309, 
2.07446311309404, 1.43295861797836, 0.510917006044213, 0.585849402603378, 
0.565762106856816, 0.276425856457835, 0.264148494973398, 0.251422678300478, 
58.0164377288786, 15.2785505467049, 52.7552822254383, 3.38621830653397, 
3.04972648885867, 0.847461182502024, 3.72584362278638, 0.214291913995251, 
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0.880242370615362, 0.782706137309241, 0.690115718443861, 
0.800097690345683, 1.06271791918577, 0.834468719186235, 0.0962303485314691, 
0.0884637193545766, 0.084862230936858, 0.0802494456090769, 0.0744384419445548, 
0.07795889974169, 0.0732881714498627, 0.064264352555926, 12.4266612039723
), .Names = c("3-1920", "3-1921", "3-1922", "3-1923", "3-1924", 
"3-1925", "3-1926", "3-1927", "3-1928", "3-1929", "3-1930", "3-1931", 
"3-1932", "3-1933", "3-1934", "3-1935", "3-1936", "4-1887", "4-1888", 
"4-1889", "4-1890", "4-1891", "4-1892", "4-1893", "4-1894", "4-1895", 
"4-1896", "4-1897", "4-1898", "4-1899", "4-1900", "4-1901", "4-1902", 
"4-1903", "4-1904", "4-1905", "4-1906", "4-1907", "4-1908", "4-1909", 
"4-1910", "4-1911", "4-1912", "4-1913", "4-1914", "4-1915", "4-1916", 
"4-1917", "4-1918", "4-1919", "4-1920", "4-1921", "4-1922", "4-1923", 
"4-1924", "4-1925", "4-1926", "4-1927", "4-1928", "4-1929")), 
    Placeringar.andra.ftg = structure(c(28.0431221549195, 25.9545126815565, 
    24.0242448095517, 31.3234881936435, 39.255978576323, 42.1621242692298, 
    43.6032738316212, 45.4357566594961, 46.598249907364, 28.4981460177937, 
    17.0504236197116, 23.836948841527, 48.4988040028843, 45.556077510276, 
    38.8496679378584, 38.6176234980822, 38.9963029248996, 0, 
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
    0, 0, 0, 0, 0, 0, 0, 0, 0.74742599118763, 0.952114597368105, 
    0.911108175078138, 2.15433130730393, 2.22837176822736, 1.6965099678165, 
    2.01166483245572, 1.92960283356866, 1.89400279726231, 1.83065143079271, 
    1.8441365039718, 1.74778438036979, 1.70553412657279, 1.74014123634787, 
    1.57422476543071), .Names = c("3-1920", "3-1921", "3-1922", 
    "3-1923", "3-1924", "3-1925", "3-1926", "3-1927", "3-1928", 
    "3-1929", "3-1930", "3-1931", "3-1932", "3-1933", "3-1934", 
    "3-1935", "3-1936", "4-1887", "4-1888", "4-1889", "4-1890", 
    "4-1891", "4-1892", "4-1893", "4-1894", "4-1895", "4-1896", 
    "4-1897", "4-1898", "4-1899", "4-1900", "4-1901", "4-1902", 
    "4-1903", "4-1904", "4-1905", "4-1906", "4-1907", "4-1908", 
    "4-1909", "4-1910", "4-1911", "4-1912", "4-1913", "4-1914", 
    "4-1915", "4-1916", "4-1917", "4-1918", "4-1919", "4-1920", 
    "4-1921", "4-1922", "4-1923", "4-1924", "4-1925", "4-1926", 
    "4-1927", "4-1928", "4-1929")), Fodringar = structure(c(13.4091880009393, 
    11.4007737009461, 8.85180109245837, 10.5207294715513, 11.8554668691406, 
    11.6406790162891, 10.8301249257183, 10.5342894550549, 10.2725808443785, 
    0.0712700398569951, 19.6151778087924, 4.08751075071719, 8.5369441404377, 
    7.22244542654346, 5.74211168867129, 5.00624411086692, 5.70750325407667, 
    11.7113734113266, 21.5391725460311, 17.601114228451, 3.05187896774013, 
    5.56912149567179, 5.47086167639443, 15.6851978435924, 14.9119890182211, 
    15.0092045884117, 12.6228928396926, 0.442201848780838, 0.662413501667926, 
    0.849732956673642, 1.47202590554835, 1.56431397609731, 1.65711491625151, 
    1.7323412708195, 1.85220571392917, 1.93390958786632, 1.84134615133785, 
    1.99887445786696, 1.83728108674151, 2.46597909355305, 3.73562846025962, 
    3.76713685012398, 1.96943185869625, 2.29567819454465, 2.17585138923596, 
    3.4385473363555, 4.04443383630046, 4.4787124078019, 5.91953337740812, 
    6.7714060177497, 1.06707862774494, 1.14746124710284, 1.05345153517615, 
    0.952153564360688, 0.945755278051777, 1.05282199902918, 1.32354993575186, 
    1.31741363057881, 1.29531376381482, 2.49542755736025), .Names = c("3-1920", 
    "3-1921", "3-1922", "3-1923", "3-1924", "3-1925", "3-1926", 
    "3-1927", "3-1928", "3-1929", "3-1930", "3-1931", "3-1932", 
    "3-1933", "3-1934", "3-1935", "3-1936", "4-1887", "4-1888", 
    "4-1889", "4-1890", "4-1891", "4-1892", "4-1893", "4-1894", 
    "4-1895", "4-1896", "4-1897", "4-1898", "4-1899", "4-1900", 
    "4-1901", "4-1902", "4-1903", "4-1904", "4-1905", "4-1906", 
    "4-1907", "4-1908", "4-1909", "4-1910", "4-1911", "4-1912", 
    "4-1913", "4-1914", "4-1915", "4-1916", "4-1917", "4-1918", 
    "4-1919", "4-1920", "4-1921", "4-1922", "4-1923", "4-1924", 
    "4-1925", "4-1926", "4-1927", "4-1928", "4-1929")), Reala.tillgångar = structure(c(24.1236303297959, 
    37.4986675879214, 46.6429235423771, 35.4664214060824, 21.107906639929, 
    19.0801609856783, 18.4927931928856, 17.5395655673799, 17.1966584758689, 
    0, 34.7674001114172, 7.96457079858135, 15.6705819482217, 
    14.1133809273624, 28.0736200437156, 26.5998804921383, 25.6518212731437, 
    1.95963811345151, 56.5875267336955, 46.2416679590312, 0.482603187490813, 
    0.398935965859933, 0.307217480627311, 51.950855570777, 47.8111071795339, 
    46.8528676724846, 50.0737907885199, 15.4355247525754, 14.2093849840859, 
    13.3958115562226, 22.7149659643704, 20.7346142968668, 18.5855162710402, 
    16.8434048009947, 17.9930930075424, 16.4727505336486, 15.2879033748912, 
    14.8978419576271, 9.42264781134492, 8.68073920966838, 8.09802890881811, 
    8.2503764746835, 8.35805308372005, 7.82891154707734, 11.1718677682141, 
    0.0111751265820557, 0.00993685427215673, 0.00876137160323813, 
    0.009999421233499, 0.0321994407601129, 5.19895399696667, 
    5.06909968623497, 5.74993956248165, 5.65223190455595, 5.47608036625753, 
    5.80844475706357, 5.67763062110834, 5.30082678935982, 6.52809468404085, 
    6.31727899750595), .Names = c("3-1920", "3-1921", "3-1922", 
    "3-1923", "3-1924", "3-1925", "3-1926", "3-1927", "3-1928", 
    "3-1929", "3-1930", "3-1931", "3-1932", "3-1933", "3-1934", 
    "3-1935", "3-1936", "4-1887", "4-1888", "4-1889", "4-1890", 
    "4-1891", "4-1892", "4-1893", "4-1894", "4-1895", "4-1896", 
    "4-1897", "4-1898", "4-1899", "4-1900", "4-1901", "4-1902", 
    "4-1903", "4-1904", "4-1905", "4-1906", "4-1907", "4-1908", 
    "4-1909", "4-1910", "4-1911", "4-1912", "4-1913", "4-1914", 
    "4-1915", "4-1916", "4-1917", "4-1918", "4-1919", "4-1920", 
    "4-1921", "4-1922", "4-1923", "4-1924", "4-1925", "4-1926", 
    "4-1927", "4-1928", "4-1929")), Övriga.tillgångar = structure(c(8.94359632321529, 
    4.73024053386131, 3.38913668790429, 3.30261960154855, 3.66153681338318, 
    3.29818249453177, 3.19182850390819, 2.85939756735457, 2.36761585526891, 
    1.26933260800861, 0.266044096705159, 0.445934574945972, 0.624009436206777, 
    0.613077026094302, 0.507436262108836, 0.507399597336736, 
    0.454853858310495, 26.0513408152126, 0, 0, 4.33310468884518, 
    3.34116555074217, 3.75643192221575, 0, 0, 0, 0, 1.72640051957453, 
    1.21214699091261, 1.00118493181342, 0.152355704864146, 0, 
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.219109164892739, 0.422000717554878, 
    0.852726180937993, 0.573182072341244, 0.677056811951724, 
    0.371422443252653, 0.101430023434196, 0.166757801571104, 
    1.09974800113887, 0.999780790501637, 1.04570455542704, 1.12928342698615, 
    0.673912359406274, 1.43591270387502, 1.91776034982839, 0.556296154636263
    ), .Names = c("3-1920", "3-1921", "3-1922", "3-1923", "3-1924", 
    "3-1925", "3-1926", "3-1927", "3-1928", "3-1929", "3-1930", 
    "3-1931", "3-1932", "3-1933", "3-1934", "3-1935", "3-1936", 
    "4-1887", "4-1888", "4-1889", "4-1890", "4-1891", "4-1892", 
    "4-1893", "4-1894", "4-1895", "4-1896", "4-1897", "4-1898", 
    "4-1899", "4-1900", "4-1901", "4-1902", "4-1903", "4-1904", 
    "4-1905", "4-1906", "4-1907", "4-1908", "4-1909", "4-1910", 
    "4-1911", "4-1912", "4-1913", "4-1914", "4-1915", "4-1916", 
    "4-1917", "4-1918", "4-1919", "4-1920", "4-1921", "4-1922", 
    "4-1923", "4-1924", "4-1925", "4-1926", "4-1927", "4-1928", 
    "4-1929"))), .Names = c("Company", "Year", "Kapitalinkomster", 
"Aktiebolag", "Bank.o.kassa", "Obligationer", "Lån", "Aktier", 
"Placeringar.andra.ftg", "Fodringar", "Reala.tillgångar", "Övriga.tillgångar"
), index = structure(list(Company = structure(c(1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 2L, 2L, 
2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L), .Label = c("3", "4"), class = "factor"), 
    Year = structure(c(34L, 35L, 36L, 37L, 38L, 39L, 40L, 41L, 
    42L, 43L, 44L, 45L, 46L, 47L, 48L, 49L, 50L, 1L, 2L, 3L, 
    4L, 5L, 6L, 7L, 8L, 9L, 10L, 11L, 12L, 13L, 14L, 15L, 16L, 
    17L, 18L, 19L, 20L, 21L, 22L, 23L, 24L, 25L, 26L, 27L, 28L, 
    29L, 30L, 31L, 32L, 33L, 34L, 35L, 36L, 37L, 38L, 39L, 40L, 
    41L, 42L, 43L), .Label = c("1887", "1888", "1889", "1890", 
    "1891", "1892", "1893", "1894", "1895", "1896", "1897", "1898", 
    "1899", "1900", "1901", "1902", "1903", "1904", "1905", "1906", 
    "1907", "1908", "1909", "1910", "1911", "1912", "1913", "1914", 
    "1915", "1916", "1917", "1918", "1919", "1920", "1921", "1922", 
    "1923", "1924", "1925", "1926", "1927", "1928", "1929", "1930", 
    "1931", "1932", "1933", "1934", "1935", "1936"), class = "factor")), .Names = c("Company", 
"Year"), row.names = c(NA, -60L), class = "data.frame"), row.names = c("3-1920", 
"3-1921", "3-1922", "3-1923", "3-1924", "3-1925", "3-1926", "3-1927", 
"3-1928", "3-1929", "3-1930", "3-1931", "3-1932", "3-1933", "3-1934", 
"3-1935", "3-1936", "4-1887", "4-1888", "4-1889", "4-1890", "4-1891", 
"4-1892", "4-1893", "4-1894", "4-1895", "4-1896", "4-1897", "4-1898", 
"4-1899", "4-1900", "4-1901", "4-1902", "4-1903", "4-1904", "4-1905", 
"4-1906", "4-1907", "4-1908", "4-1909", "4-1910", "4-1911", "4-1912", 
"4-1913", "4-1914", "4-1915", "4-1916", "4-1917", "4-1918", "4-1919", 
"4-1920", "4-1921", "4-1922", "4-1923", "4-1924", "4-1925", "4-1926", 
"4-1927", "4-1928", "4-1929"), class = c("pdata.frame", "data.frame"
)) 
```

此致

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-29T08:14:17.567

由于您包含所有滞后，因此`|lag(Kapitalinkomster,2:99)`您使仪器矩阵太大。这导致矩阵的秩不足。从线性面板模型的一般 GMM 公式可以看出这一点。例如，JM Wooldridge 的“横截面和面板数据的计量经济学分析”第 8 章第 190 页。简单（且不正确）的解释是，通过包含太多滞后，您得到的列多于行。尝试减少 中的滞后数，`|lag(Kapitalinkomster,2:99)`最多使用两个或三个。

# java - Google App Engine 中的 Java 视频处理库

> ID：13124162
> 
> 赞同：0
> 
> 时间：2012-10-29T14:59:42.930
> 
> 标签：java, google-app-engine, video-streaming

我现在正在寻找用于视频处理的 Java 库，我读过这篇文章： [Java 的视频处理库](https://stackoverflow.com/questions/13011397/video-processing-library-for-java)，然后用 Xuggle 尝试了一些“hello world”。但问题是 Xuggle 使用了一些 Native Code，正如他们的主页所述：

“Xuggler 由少量 Java（即独立于架构）代码和大量需要针对不同操作系统专门编译的本机代码组成。这意味着不同的二进制包必须与不同的操作系统一起使用（不像大多数 Java 程序)。”

由于我们不太了解 Google 使用了哪些平台，所以不太可能使用 Xuggle。

那么，你能告诉我一些其他的解决方案吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T04:11:29.563

您将无法在 GAE 上执行此操作。正如你所提到的，Xuggle 是一个原生库的包装器，你不能在 GAE 上使用它。

另一种解决方案是使用 IaaS 提供商，您可以在其中控制整个堆栈（操作系统及更高版本）。例如 Amazon EC2 或其他[VPS 提供商](http://sixrevisions.com/web-development/top-vps-providers/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-28T17:43:41.867

您现在可以在 2016 年使用[Google Cloud 托管虚拟机](https://cloud.google.com/appengine/docs/managed-vms/)

# search - 我可以使用 ExpressionEngine 中的段过滤搜索结果吗？

> ID：13124163
> 
> 赞同：3
> 
> 时间：2012-10-29T14:59:54.077
> 
> 标签：search, expressionengine

我试图根据具有某个变量的条目数量在表达式引擎中读取单数或复数，但没有任何运气。这是目前的情况：

```
exp:channel:entries channel="specialist" dynamic="no" search:sp_specialty="={segment_2}" }
  {if total_entries <= 1 }
    OUR SPECIALIST
  {if:else}
    OUR SPECIALISTS
  {/if}
{/exp:channel:entries} 
```

我可以使用分段值匹配搜索吗？现在它不工作。更简单的方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-29T15:13:39.197

试试这个：

```
{exp:channel:entries 
    channel="specialist"
    dynamic="no"
    search:sp_specialty="={segment_2}"
}
    {if count == '1'}
        {if total_results == '1'}
            OUR SPECIALIST
        {if:else}
            OUR SPECIALISTS
        {/if}
    {/if}
{/exp:channel:entries} 
```

*   你想用`total_results`不`total_entries`。
*   检查 1 个或更少的结果是多余的，因为如果没有结果，通道条目标签将不输出任何内容（除非您使用`{if no_results}`标签对）。

# sql - 将色谱柱分成两个单独的色谱柱

> ID：13124165
> 
> 赞同：1
> 
> 时间：2012-10-29T15:00:02.240
> 
> 标签：sql, sql-server

我有一个专栏`name`。有一些条目，例如：

```
Smith, John
Smith, Joe
One whole entry 
```

我需要将它们分成两列，如下所示：

```
LastName        | FirstName
---------------------------
Smith           | John
Smith           | Joe
One whole entry | 
```

我正在使用这个查询：

```
SELECT left(name, CHARINDEX(', ', name)) as LastName FROM LookUps 
```

我在上面尝试了以下操作，但它显示以下逗号（例如*Smith,*）。我需要它来删除以下逗号，但还需要显示那些不带逗号的条目的完整信息。

任何帮助，将不胜感激。谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T15:01:46.367

```
select 
    case when charindex(',',name) > 0 
            then left(name, charindex(',',name)-1 ) 
            else name end,
    case when charindex(',',name) > 0 
            then ltrim(substring(name, charindex(',',name)+1, len(name) )) 
            else null end   
from yourtable 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T15:11:10.137

其他方式;

```
select
  left(name, charindex(',', name + ',', 1) - 1) as lastname,
  ltrim(substring(name,  charindex(',', name + ',', 1) + 1, len(name))) as firstname 
```

# javascript - 未知的填充/边距突然出现

> ID：13124176
> 
> 赞同：0
> 
> 时间：2012-10-29T15:00:36.610
> 
> 标签：javascript, jquery, html, css

这是我的 jsfiddle：http: [//jsfiddle.net/BTYA7/4/](http://jsfiddle.net/BTYA7/4/)

在白色输入框的底部，我们可以看到边框和白色框之间大约有 5px 的 padding/margin。我曾尝试使用 chrome 开发人员工具，但我看不到它的来源，谁能帮我查明它？

这似乎是：

```
<div class="uEditor" style=""> 
```

但是在度量窗口中没有填充

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T15:08:42.137

那是因为**line-height**属性..将其设置为 0

```
.uEditor
{
    line-height: 0;
} 
```

[检查小提琴](http://jsfiddle.net/sushanth009/BTYA7/7/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T15:17:27.867

您可以`line-height`按照 Sushanth 的建议将其更改为 0。但是`line-height`是可继承的，因此您必须将其更改回子元素的正常值。

因此，我建议您将背景颜色更改`.uEditor`为白色并`line-height`保持不变。

[看到这个 jsfiddle](http://jsfiddle.net/BTYA7/8/)。

# android - Android：在类之间传递 ArrayList

> ID：13124178
> 
> 赞同：0
> 
> 时间：2012-10-29T15:00:38.077
> 
> 标签：android, class, arraylist

如何在类之间传递 ArrayList？我想从这个扩展 Activity 的类/方法中传递一个 ArrayList ...

```
public class OpportunityActivity extends Activity {

public void updateOpportunities(ArrayList<Opportunity> opportunities) {     
        Intent intent = new Intent(this, OppListActivity.class);
    startActivity(intent);
   } 
```

...转到扩展 ListActivity 的 OppListActivity 类，我使用这个机会 ArrayList 使用 arraylist 机会中的元素填充我的自定义 ListView：

```
public class OppListActivity extends ListActivity {

@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState); 
```

我想在两者之间完整地传递机会数组列表。我应该... - 使用捆绑包（我尝试过但无法找出正确的语法，这似乎有点矫枉过正/也许有更好的方法？） - 公开机会/以某种方式暴露给两个类 - 传递机会作为参数？

特定语法（不是伪代码）赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T15:04:25.143

您不能像这样创建活动：

```
public void updateOpportunities(ArrayList<Opportunity> opportunities) {     
   OppListActivity a = new OppListActivity();
   } 
```

您应该始终使用 Intent。在 Intent 中，您可以在 ArrayList 中添加一个“额外”，稍后您将在 ListActivity 中阅读它。请注意，您可能需要让 Opportunity 实现 Parcelable。在 StackOverflow 和官方文档中都有很多关于这两个主题的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T15:10:51.367

`putExtra`如果您正在使用 an`Intent`来触发下一个活动，则On way 是使用。它看起来像这样：

```
ArrayList<String> test_array = new ArrayList<String>();
// do something with test_array
Intent launchNextActivity = new Intent(getApplicationContext(), nextActivity.class);
launchNextActivity.putExtra("array", test_array);
startActivity(launchNextActivity); 
```

然后在您启动的活动中，您可以使用以下内容来获取它：

```
Intent sender = getIntent();
ArrayList<String> passedInArray = new ArrayList<String>();
passedInArray = sender.getStringArrayExtra("array"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T15:09:53.560

你需要使用意图来开始一个新的活动。您实际上可以将可序列化对象放入您的意图的额外数据中：

```
 public void updateOpportunities(ArrayList<Opportunity> opportunities) {     
        Intent intent = new Intent(this, OppListActivity.class);
        intent.putExtra("opportunities", opportunities);
        startActivity(intent);
    } 
```

在您的 OppListActivity 活动中：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    Intent intent = getIntent();
    ArrayList<Opportunity> opportunities = intent.getSerializableExtra("opportunities");
} 
```

但是您可能需要确保`Opportunity`该类 extends `Serializable`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T15:15:09.057

通常，您在切换到其他活动时开始新意图时会添加一个额外的捆绑包。例如

```
ArrayList<String> theArrayList = new ArrayList<String>();
Intent i = new Intent(this,TheNewActivity.class);
i.putStringArrayListExtra("list",theArrayList);
startActivity(i);
finish(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-12T13:17:32.530

hiiii..... 你可以使用 Bean，与一个 ArrayList

例如

```
ArrayList<RowItem> aryListbean=new ArrayList<rowItem>(); //your arraylist
RowItem rowItem=new RowItem();  // that is your bean class 
```

现在您必须创建一个类 RowItem，即您的 Bean，它具有 getter/setter 方法

```
for(....)
{
   rowItem.setUserId(); // set method's example
   rowItem.setPassword() // set method's exampl

   aryListbean.add(rowItem);
} 
```

现在您可以使用 getmethod 在每个活动中使用您的数据

例如

```
getUserId();
getUserPassword(); 
```

# java - 如何解决 java 套接字中的连接超时异常？

> ID：13124196
> 
> 赞同：1
> 
> 时间：2012-10-29T15:01:37.780
> 
> 标签：java, swing, sockets, exception, connection-timeout

我一直在开发一个 Swing 应用程序，当我想添加一个选项，用户可以通过本地网络发送文件时，我遇到了一些严重的问题。

为了通过网络发送文件，我使用了 Sockets 库来创建客户端和服务器之间的连接，**Client.java**的源代码是：

```
 package Test;

        import java.io.BufferedOutputStream;
        import java.io.FileOutputStream;
        import java.io.IOException;
        import java.io.InputStream;
        import java.net.Socket;

        public class Client{
        public static void main (String [] args ) throws IOException {
         int filesize=6022386; // filesize temporary hardcoded

         long start = System.currentTimeMillis();
         int bytesRead;
         int current = 0;

          Socket sock = null;
          try{
          sock = new Socket("192.168.1.107",1234);
         }catch(Exception e){
           e.printStackTrace();
           e.getCause();
          }
           System.out.println("Connecting...");

           // receive file
          byte [] mybytearray  = new byte [filesize];
          InputStream is = sock.getInputStream();
          FileOutputStream fos = new FileOutputStream("C:\\Test\\test-copy.txt");
          BufferedOutputStream bos = new BufferedOutputStream(fos);
          bytesRead = is.read(mybytearray,0,mybytearray.length);
          current = bytesRead;

           do {
             bytesRead =
             is.read(mybytearray, current, (mybytearray.length-current));
            if(bytesRead >= 0) current += bytesRead;
            } while(bytesRead > -1);

            bos.write(mybytearray, 0 , current);
            bos.flush();
            long end = System.currentTimeMillis();
            System.out.println(end-start);
            bos.close();
            sock.close();
            sock.getPort();
    }
   } 
```

**Server.java**的源代码 是：

```
 package Test;

   import java.io.BufferedInputStream;
   import java.io.File;
   import java.io.FileInputStream;
   import java.io.IOException;
   import java.io.OutputStream;
   import java.net.ServerSocket;
   import java.net.Socket;

   public class Server{
   public static void main (String [] args ) throws IOException {
   // create socket
   ServerSocket servsock = new ServerSocket(1234);
   while (true) {
  System.out.println("Waiting...");

  Socket sock = servsock.accept();
  //servsock.set
  System.out.println("Accepted connection : " + sock);

  // sendfile
  File myFile = new File ("C:\\testing\\test.txt");
  byte [] mybytearray  = new byte [(int)myFile.length()];
  FileInputStream fis = new FileInputStream(myFile);
  BufferedInputStream bis = new BufferedInputStream(fis);
  bis.read(mybytearray,0,mybytearray.length);
  OutputStream os = sock.getOutputStream();
  System.out.println("Sending...");
  os.write(mybytearray,0,mybytearray.length);
  os.flush();
  sock.close();
  }
}
} 
```

如您所见，我想将**test.txt**文件从我的计算机发送到本地网络中存在的另一台计算机。当我运行**Server.Java**和**Client.java**时，我在终端中遇到异常，提示**连接超时**：

```
 java.net.ConnectException: Connection timed out: connect
at java.net.DualStackPlainSocketImpl.connect0(Native Method)
    Connecting...
at  java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:69)
at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:339)
at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:200)
at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:182)
at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:157)
at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:391)
at java.net.Socket.connect(Socket.java:579)
at java.net.Socket.connect(Socket.java:528)
at java.net.Socket.<init>(Socket.java:425)
at java.net.Socket.<init>(Socket.java:208)
at Test.NewClass1.main(Client.java:27)
    Exception in thread "main" java.lang.NullPointerException
at Test.Client.main(Client.java:36) 
```

更让我困惑的是，当我使用我的**Localhost**运行应用程序时，文件**test-copy.txt**的副本创建得很好，我查找了异常的原因，我发现它可能是**防火墙**权限，我为**端口**启用了事务：1234 ，但我仍然遇到同样的错误。

我在这里要问的是，这是权限问题还是特权问题？我的计算机也设置为管理员和目的地，或者我想添加或修改什么以使其正常工作？

我希望我把我的问题说清楚了。

谢谢 ：）。

# javascript - CSS / js级联垂直菜单手风琴：试图让我的活动页面显示为活动

> ID：13124197
> 
> 赞同：1
> 
> 时间：2012-10-29T15:01:40.130
> 
> 标签：javascript, css, menu

放弃撕掉我的头发，有人可以帮忙吗？我试图让活动页面应用单独的样式，在示例中与单击 test1 时相同，即主页或关于我们的背景为深色母鸡。

[http://www.tait-design.com/devsites/test-nav/index.asp](http://www.tait-design.com/devsites/test-nav/index.asp)

主页不会去任何地方，即 test1，但页面 test1-1 和 test2-1 作为示例

我认为问题出在 js [http://www.tait-design.com/devsites/test-nav/js/accordion.js](http://www.tait-design.com/devsites/test-nav/js/accordion.js) 和 css（不能放入完整的 url）/css/black .css 我在文本上制作了几个不同颜色的类，以帮助识别

我拿起了别人的作品，我怀疑这是一个模板站点，它已被更改，左侧导航没有作为包含完成，因此每个页面都有单独的标记以使活动页面......看起来很活跃。我已将此更改为 asp，只是为了使包含在我的网站上工作，但它将是 php。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T23:24:26.043

这可以纯粹在 CSS 中完成，不需要 Javascript。

*   `body`首先，为页面上的每个标签提供唯一的类。例如，在主页上，它可能类似于`<body class="home">`.
*   然后将匹配链接的锚标记赋予相同的类（即 - 看到我已向链接添加了第二个类）。
*   现在，当它是活动页面时，您可以在 CSS 中专门设置该链接的样式：

    body.home #menu-1 a.home { // 任何你喜欢的样式 }

# java - 我可以将依赖项注入不是由 DI 框架创建的对象吗

> ID：13124199
> 
> 赞同：3
> 
> 时间：2012-10-29T15:01:46.437
> 
> 标签：java, dependency-injection, guice, objectify

如何将依赖项注入不是由 DI 框架创建的对象？

我正在使用 Objectify 在 Google App Engine 上运行应用程序，因此当从数据存储区获取数据时，Objectify 会创建 POJO。我个人喜欢有方便的方法来获取相关对象，比如 car.getOwner().getName() 汽车对象是由 Objectify 创建的。getOwner() owner 的代码类似于

```
public Person getOwner(){
    return PersonService.getById(this.ownerId);
} 
```

我可以使用 ServiceLocator 改进它

```
public Person getOwner(){
    return ServiceLocator.getService(PersonService.class).getById(this.ownerId);
} 
```

但是我将如何使用 DI 做到这一点？

我查看了 Guice，但我只能想到将 Injector 放在一个单例中并从 getOwner 方法访问它。

我的想法有问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T05:09:34.837

如果您使用 Objectify4，您可以继承 ObjectifyFactory 并覆盖construct() 方法。这将允许您注入您的实体类。

你可以在这里看到一个例子： [https ://github.com/stickfigure/motomapia/blob/master/java/com/motomapia/OfyFactory.java](https://github.com/stickfigure/motomapia/blob/master/java/com/motomapia/OfyFactory.java)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T15:44:51.183

我能想到的唯一解决方案是加载时间编织，[我引用](http://www.springbyexample.org/examples/aspectj-ltw-spring-config.html)：

> context:load-time-weaver 将 AspectJ 的 Load-time Weaver 注册到当前类加载器。因此，不仅 Spring bean 将成为目标，而且类加载器中加载的任何与定义的切入点匹配的类都将成为目标。

但我认为这会与 GAE 限制相冲突，但我还没有在 GAE 中尝试过。

# c# - 我应该为包含线程的类实现 IDisposable

> ID：13124201
> 
> 赞同：6
> 
> 时间：2012-10-29T15:01:49.723
> 
> 标签：c#, multithreading, idisposable

我有一个使用[Thread](http://msdn.microsoft.com/en-us/library/system.threading.thread%28v=vs.90%29.aspx)类的类：

```
class A
{
    public Thread thread
    { get; set; }
} 
```

我应该实现 IDisposable 并将 Thread 属性设置为 null 吗？

```
class A : IDisposable
{
    public Thread Thread
    { get; set; }

    protected bool Disposed
    { get; set; }

    public void Dispose()
    {
        Dispose(true);
        GC.SuppressFinalize(this);
    }

    protected virtual void Dispose(bool disposing)
    {
        if (!this.Disposed)
        {
            if (disposing)
            {
                if (Thread != null)
                    Thread = null;
            }

            Disposed = true;
        }
    }
} 
```

或不？
为什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-29T15:04:17.110

您`IDisposable`仅在您的类处理非托管对象、资源或其他`IDisposable`对象时实现。线程不是非托管对象，当没有任何对象引用它或处理它的进程终止时，它会被垃圾回收。由于 Thread 没有实现`IDisposable`，因此引用它的类也不需要实现它。

可选地，`IDisposable`在方法的范围内，可以将它们包装在`using`语句中，并且在退出范围时自动调用 Dispose() 方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T15:54:12.693

这取决于你的线程在做什么。如果您的线程正在执行可能无限期运行的长时间运行的任务，那么我会*将该*线程视为资源（不会被垃圾收集）。例如，考虑线程是否设计为无限期地轮询某些状态，或者从队列中消费项目（如线程池线程消费任务或 TCP 服务器消费新连接）等。在这种情况下，我会说自然效果处置您的课程将释放此线程资源。在这种情况下，将其设置为 null 并不是很有用。相当`Dispose`应该可能涉及标记同步事件（或者可能是 CancellationToken）以通知线程它应该完成其无限任务，然后处理线程应该等待一段时间让线程完成（加入）。与连接一样，请注意死锁情况，如果线程拒绝终止，请考虑一些替代操作。出于显而易见的原因，我*不会*在终结器中执行此操作。

作为我的意思的一个例子，考虑你`class A`的实际情况`class MyTcpListener`，旨在无限期地侦听和等待给定端口上的新 TCP 连接。然后考虑您期望以下（不太可能）代码执行的操作：

```
using (MyTcpListener listener = new MyTcpListener(port:1234))
{
    // Do something here
}

// Create another one. This would fail if the previous Dispose
// did not unbind from the port.
using (MyTcpListener listener = new MyTcpListener(port:1234))
{
    // Do something else here
} 
```

假设我知道`MyTcpListener`创建侦听器线程的构造函数，我希望在`Dispose`调用返回后，`MyTcpListener`将不再绑定到 TCP 端口 - 即 TCP 侦听器线程将完全终止。不用说，如果您不提供某种机制来阻止侦听器，就会发生资源泄漏。停止机制可能是对某些方法“Stop”的调用，但我个人认为“Dispose”模式更适合这种情况，因为忘记停止某些东西通常并不意味着资源泄漏。

您的代码可能需要不同的假设，所以我建议根据场景来判断它。如果你的线程是短期运行的，例如它有一些已知的有限任务要完成，然后它会自行终止，那么我会说处置不那么重要或者可能没用。

# android - Android 可绘制 DPI

> ID：13124202
> 
> 赞同：4
> 
> 时间：2012-10-29T15:01:54.630
> 
> 标签：android, drawable, dpi, hdpi

我在每个文件夹中都有一个带有 4 个版本的相同图像的 Android 应用程序：

drawable-ldpi/
drawable-mdpi/
drawable-hdpi/
drawable-xhdpi/

图像之间的唯一区别是大小，我只是将原始大图像按照公式缩小：

120dp lpdi, 1 dp=0.75 像素
160dp mpdi, 1 dp=1 像素
240dp hdpi, 1 dp=1.5 像素
320dp xhpdi, 1 dp=2 像素

问题是我打算拥有超过 100 个图像，所以为了减小文件大小，我不能将 xhdpi 版本放在 drawables/ 文件夹中，而不是每个图像有 4 个版本，那么 Android 可以根据需要缩放图像吗？这样做有什么缺点？它只是性能和文件大小之间的权衡吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T15:19:58.303

只有 xhdpi 资源会大大降低您的应用程序性能。此外，在低端设备（小屏幕和小内存）上，VM 很可能会在处理这些大位图时耗尽内存并崩溃。

您可以在高端设备上开发所有内容，并使用简单的 Photoshop 自动化来创建其他资源，但最好拥有更大的 APK，而不是您的应用无法在中低端设备上运行。

另一种选择可能是导出多个 APK（每个屏幕类型一个）并使用清单指定它支持的屏幕尺寸，并让市场将正确的 APK 过滤到正确的设备。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T15:12:26.330

您可以将 xhdpi 版本放在可绘制资源中。然后在您的布局/xml 文件中指定 dp 中的图像尺寸。Android 会相应地缩小您的图像。只要您缩小图像的可绘制资源质量，就不会改变。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T15:14:49.747

你可以。缺点可能是图像质量稍差：考虑到 hdpi 显示，您需要缩放 240/320 倍，即 0.75，或者说，例如在一维像素行中，您从 4 个源像素中构成 3 个目标像素。大多数时候它看起来会非常好，但我想一些像素艺术可能是个例外。我想这也可能更慢，并且使用的内存比它可能的多，但我没有测量，所以我不能确定。

PS我自己也在使用这种方法（仅提供xhdpi资源）。

# jquery - 将 jquery ui 滑块句柄动画到页面加载上的特定值

> ID：13124214
> 
> 赞同：0
> 
> 时间：2012-10-29T15:02:17.833
> 
> 标签：jquery, jquery-ui

试图让 jquery ui 滑块句柄在页面加载时自动滑动到某个值。

这是[Fiddle](http://jsfiddle.net/jonnystudent/VycW2/)，只是为了看看我想要做什么。

我希望滑块 1 在页面加载时滑动到 200 的值，滑块 2 滑动到 14 的值。

```
$("#slider1").slider({
    max:350,
    min:100,
    step:10,
    value:100,
    animate: 'true',
    slide: function(event, ui) {  
        $("#amount").val(ui.value);
        $(this).find('.ui-slider-handle').html('<div class="sliderControl-label v-labelCurrent">£'+ui.value+'</div>');

                update();
       setTimeout("$('#slider1').slider('value', 200);", 350);
    }    
});
$('#slider').slider('value', 200); 
```

我看过动画，但我没有得到任何地方。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T15:10:37.223

在您的小提琴中，我刚刚添加了一个更改事件，其代码与幻灯片相同

```
change :function(event, ui) {  
        $("#amount").val(ui.value);
        $(this).find('.ui-slider-handle').html('<div class="sliderControl-label v-labelCurrent">£'+ui.value+'</div>');
        update();
} 
```

最后是这个

```
$("#slider1").slider("value", 200); 
```

它有效！[http://jsfiddle.net/ktNTa/4/](http://jsfiddle.net/ktNTa/4/)

# c# - 添加一个 Tab 到 Tab 控件及其内容

> ID：13124217
> 
> 赞同：0
> 
> 时间：2012-10-29T15:02:26.300
> 
> 标签：c#

我正在做一个 ERP 项目。它是 treeView 框上的一个按钮，当它单击 treeView 中的按钮时，它必须创建一个带有其内容的选项卡（之前定义设计的内容）。

我可以以编程方式添加选项卡，但如何设计其内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T15:19:30.323

将此添加到树视图的单击事件中应该可以满足您的要求：

```
var contentControl = new ContentControl ();    //This is what we will put all your content in
contentControl.Dock = DockStyle.Fill;

var page = new TabPage("Tab Text");    //the title of your new tab
page.Controls.Add(contentControl);     //add the content to the tab

TabControl1.TabPages.Add(page);        //add the tab to the tabControl 
```

在您的项目中，添加一个`UserControl`名为 ContentControl 的新名称（或您需要的任何内容，在我的示例中使用它），并用您希望出现在选项卡中的所有内容填充它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T15:21:01.063

您有几个解决方案，最简单的一种是创建`TabPage`，创建所需的控件，设置它们的属性（即大小、位置、文本等），将它们`TabPage`添加`TabPage`到`TabControl`.

```
TabPage tp = new TabPage();
//create controls and set their properties
Button btn1 = new Button();
btn1.Location = new Point(10,10);
btn1.Size = new System.Drawing.Size(30,15);
//add control to the TabPage
tp.Controls.Add(btn1);
//add TabPage to the TabControl
tabControl1.TabPages.Add(tp); 
```

第二种解决方案是`TabPage`在您的类中覆盖，例如`CustomTabPage`，您将在类的构造函数中设置控件。然后，当您要添加 new 时`TabPage`，创建您的`CustomTabPage`实例并将其添加到`TabControl`.

```
public class CustomTabPage : TabPage
{
    public CustomTabPage()
    {
        //create your Controls and setup their properties
        Button btn1 = new Button();
        btn1.Location = new Point(20, 20);
        btn1.Size = new System.Drawing.Size(40, 20);
        //add controls to the CustomTabPage
        this.Controls.Add(btn1);
    }
}

//Create CustomTabPage
CustomTabPage ctp = new CustomTabPage();
tabControl1.TabPages.Add(ctp); 
```

第三种解决方案（最好但最复杂）是用你想要`UserControl`的所有东西创建你想要的（你可以使用 Designer 帮助），然后创建你的实例，`UserControl`创建一个`TabPage`并添加`UserControl`. `TabPage`然后添加`TabPage`到`TabControl`.

```
 public partial class CustomControlForTabPage : UserControl
 {
     public CustomControlForTabPage()
     {
         InitializeComponent();
     }
 }

//Create CustomControl
TabPage tp = new TabPage();
CustomControlForTabPage ccftp = new CustomControlForTabPage();
//set properties you like for your custom control
tp.Controls.Add(ccftp);
tabControl1.TabPages.Add(ctp); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T15:07:19.557

向项目添加一个新的用户控件，然后使用设计器进行控件/布局，然后当您单击时，您所做的就是将用户控件的新实例添加到选项卡 - 可能停靠以填充选项卡，除非您的表单大小是固定的.

# asp.net-mvc-4 - ASP.NET Mvc 4 对 Url.Content 使用 bundle 的好处

> ID：13124218
> 
> 赞同：2
> 
> 时间：2012-10-29T15:02:35.277
> 
> 标签：asp.net-mvc-4, bundling-and-minification, urlhelper

有什么办法可以做到这一点吗？

捆绑的一些好处是：

*   最小化
*   Gzip 压缩
*   该请求具有用于处理文件版本（缓存）的令牌参数。

在我的站点中，我使用了很多捆绑包，但在某些页面中我只有 1 个脚本，我认为我不应该只为 1 个脚本创建捆绑包。有什么办法可以用方法来使用这三个好处`Url.Content`。

我的 utopic 解决方案是设置一些东西（可能在 web.config 中），每当调用 Url.Content 时，它都会添加此功能。以任何一种方式使用它：

```
<script type="text/javascript" src="@Url.Content("~/Scripts/...")"></script>
<script type="text/javascript" src="~/Scripts/..."></script> 
```

（第二个是因为我使用的是[Razor 2](http://vibrantcode.com/blog/2012/4/10/whats-new-in-razor-v2.html/)）

如果那是不可能的，我可以为 UrlHelper 创建一个扩展方法来添加此功能。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T17:05:46.720

创建包含一个文件的捆绑包以获得缩小和版本控制的好处并没有什么问题。您还必须使用 Scripts.Render 帮助器，目前 UrlHelper 中不支持此功能，但正如您已经提到的，您可以编写一个扩展方法来调用 Scripts 帮助器。

**更新（由 OP）**

这是我为任何想要使用它的人的扩展方法：

```
public static IHtmlString DynamicScriptsBundle(this HtmlHelper htmlHelper, string nombre, params string[] urls)
{
    string path = string.Format("~/{0}", nombre);
    if (BundleTable.Bundles.GetBundleFor(path) == null)
        BundleTable.Bundles.Add(new ScriptBundle(path).Include(urls));
    return Scripts.Render(path);
}

public static IHtmlString DynamicStylesBundle(this HtmlHelper htmlHelper, string nombre, params string[] urls)
{
    string path = string.Format("~/{0}", nombre);
    if (BundleTable.Bundles.GetBundleFor(path) == null)
        BundleTable.Bundles.Add(new StyleBundle(path).Include(urls));
    return Styles.Render(path);
} 
```

# sql-server - 在更新中使用替换

> ID：13124220
> 
> 赞同：-1
> 
> 时间：2012-10-29T15:02:46.653
> 
> 标签：sql-server, replace, sql-update

我有一个项目表，在描述字段中，我想在很多记录中用 '' 替换 Char(10)。

我可以像这样手动逐个记录替换它：

```
UPDATE tblProjects
SET    Description = (SELECT Replace(Description, Char(10), ' ')
                      FROM   tblProjects
                      WHERE  ( Description LIKE '%' + Char(10) + '%' )
                             AND ProjectID = XAXD)
WHERE  ( Description LIKE '%' + Char(10) + '%' )
       AND ProjectID = XAXD 
```

但想要一个更通用的解决方案，例如 foreach 项目，然后将 ProjectID 作为变量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T15:06:22.823

不能简单写吗

```
UPDATE tblProjects
SET    Description = Replace(Description, Char(10), ' ') 
```

?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T15:07:01.057

你不能就这样吗

```
UPDATE tblProjects SET    

   Description =  Replace(Description, Char(10), ' ')

WHERE  ( Description LIKE '%' + Char(10) + '%' )
       AND ProjectID = 'XAXD' 
```

您在 2 个地方重复了这种情况

您还可以删除该`AND`部分以更新所有具有`char(10)`

```
UPDATE tblProjects SET    

   Description =  Replace(Description, Char(10), ' ')

WHERE  ( Description LIKE '%' + Char(10) + '%' ) 
```

或使用参数`@ProjectID`代替'XAXD'

```
Declare @ProjectID varchar(50)

SET @ProjectID = 'XAXD'
UPDATE tblProjects SET    

   Description =  Replace(Description, Char(10), ' ')

WHERE  ( Description LIKE '%' + Char(10) + '%' ) AND
       ProjectID = @ProjectID 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T15:07:38.187

我怀疑你需要嵌套选择。为什么不只是：

```
UPDATE tblProjects
SET    Description = Replace(Description, 'whatever', '')
WHERE  Description LIKE '%whatever%'
       AND ProjectID = XAXD 
```

# java - android更改选择器和选项卡下划线的默认颜色

> ID：13124221
> 
> 赞同：0
> 
> 时间：2012-10-29T15:02:50.407
> 
> 标签：java, android, listview, tabs, themes

如何更改（使用主题修改）选择器（ListView、GridView）和选项卡选择器/下划线颜色的默认颜色。我使用 actionbarsherlock 和 Theme.Sherlock 作为主要应用程序主题。

下面是描述我想要更改的图片。

谢谢

![1](../Images/29127036a15833ce75d22c282cdea499.png)

![2](../Images/08426c4dcb0e9fcfe64b20a08f1db65b.png)

![3](../Images/1831f3875558ae11848d97c936995956.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T16:07:49.630

不幸的是，如果您想为操作栏设置样式，则需要单独设置其部分的样式 - 没有颜色属性可以将浅蓝色更改为其他颜色。

基本上，您需要做的是覆盖样式并更改一些属性并添加一些新的可绘制对象。如果您的操作栏包含微调器、下拉面板、单选按钮等，您还需要为它们提供新的彩色图像。我建议您检查 ActionBarSherlock`styled`示例（您与库一起下载），尤其是它的`styles.xml`.

# regex - grepping .eml 文件时忽略 base64 编码的附件

> ID：13124223
> 
> 赞同：3
> 
> 时间：2012-10-29T15:02:59.520
> 
> 标签：regex, bash, grep, base64

我有一大堆 .eml 格式的导出电子邮件，我正在搜索关键字，如下所示：

```
egrep -iR "keyword|list|foo|bar" * 
```

由于 base64 编码的电子邮件附件如下所示，因此在使用相对较短的关键字时会导致许多误报：

```
Inbox/Email Subject.eml:rcX2aiCZBfoogjNUShcWC64U7buTJE3rC5CeShpo/Uhz0SeGz290rljsr6woPNt3DQ0iFGzixrdj
Inbox/Email Subject.eml:3qHXNEj5sKXUa3LxfkmEAEWOpW301Pbarq2Jr2IswluaeKqCgeHIEFmFQLeY4HIcTBe3wCf6HzPL 
```

是否有我可以编写的正则表达式来识别和排除这些匹配项，或者我可以告诉 grep 在文件到达“Content-Transfer-Encoding: base64”的行后停止读取文件吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T15:24:06.587

如果您排除任何完全由 base64 组成的匹配项，则应该只剩下有趣的匹配项。作为一个近似值，排除任何完全由 base64 组成且长度超过 60 个字符的行可能足以供人类立即使用。

```
egrep -iR "keyword|list|foo|bar" . |
egrep -v ':[0-9A-Za-z+/]{60,}$' |
less 
```

如果您需要提高准确性，可以预先过滤邮件以排除任何附件。您可能还想检查排除的行是否是 4 个字符的偶数倍，尽管对于该特定标准，您不太可能有很多误报。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T15:40:32.317

您可能会发现`-w`grep 选项很有用（仅匹配完整的单词），尽管它只会减少而不是消除误报，因为 base-64 编码文件中的字符串大约有 1/1024 的机会会被非字母数字包围人物。

您可以让 grep 在找到给定字符串时停止匹配，例如`Content-Transfer-Encoding: base64`但仅以始终在第一个匹配时停止为代价，还匹配该字符串并将最大匹配计数设置为 1。但是，您必须过滤比赛：

```
grep -EiR -e "Content-Transfer-Encoding: base64" -e "foo|bar" -x 1 * |
grep -v -i "Content-Transfer-Encoding: base64" 
```

您可以使用 gawk 更轻松、更精确地做到这一点：

```
awk 'BEGIN {IGNORECASE=1}
     /Content-Transfer-Encoding: base64/ {nextfile}
     /foo|bar/  {print FILENAME":"$0}' * 
```

（注意：`nextfile`是一个 gawk 扩展。还有其他方法可以做到这一点，但不方便。）

每次你想这样做时都要输入很多东西，所以你最好把它做成一个 shell 函数（或脚本，但我个人更喜欢函数。）

# doctrine-orm - Doctrine2：映射超类上的 OneToMany

> ID：13124225
> 
> 赞同：10
> 
> 时间：2012-10-29T15:03:28.860
> 
> 标签：doctrine-orm, relationship, class-table-inheritance, mappedsuperclass

我的数据库结构如下：

工作：

*   [CTI](http://docs.doctrine-project.org/en/latest/reference/inheritance-mapping.html#class-table-inheritance)表**工作**
*   [MappedSuperclass](http://docs.doctrine-project.org/en/latest/reference/inheritance-mapping.html#mapped-superclasses)表**AbstractImageWork**扩展**Work**
*   扩展**AbstractImageWork**的决赛桌**PhotoWork**

 **评论：

*   [MappedSuperclass](http://docs.doctrine-project.org/en/latest/reference/inheritance-mapping.html#mapped-superclasses)表**注释**
*   扩展**评论**的决赛桌**WorkComment**

 ****WorkComment与****Work**具有 ManyToOne 关系：

```
@ManyToOne(targetEntity="Work", inversedBy="comments") 
```

**Work与****WorkComment**具有 OneToMany 关系：

```
@OneToMany(targetEntity="WorkComment", mappedBy="work") 
```

问题是 Doctrine 在更新模式时给了我这个错误：

```
[Doctrine\ORM\Mapping\MappingException]
It is illegal to put an inverse side one-to-many or many-to-many association on
mapped superclass 'Acme\...\AbstractImageWork#comments'. 
```

我想这与夹在**Work**和**PhotoWork**中间的 MappedSuperclass **AbstractImageWork**有关，但我实际上并没有将这种关系放在 MappedSuperclass 上，而是放在 CTI 表上.. 那么为什么 Doctrine 会这样呢？

 ****有任何想法吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-11-15T11:30:12.130

在某些情况下，当您从标记为的类继承时遇到此类错误时`@ORM\MappedSuperclass`，请尝试将您的属性访问级别从**私有**更改为**受保护**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-02-11T13:33:50.227

在其他情况下，当您`@ORM\Entity`在抽象上级类中声明而不是`@ORM\MappedSuperclass`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-12-18T10:04:27.203

> 映射的超类不能是实体，它不是可查询的，并且由映射的超类定义的持久关系必须是单向的（仅具有拥有方）。**这意味着在映射的超类上根本不可能进行一对多关联。**此外，只有当映射的超类目前仅在一个实体中使用时，多对多关联才是可能的。为了进一步支持继承，必须使用单表或联表继承特性。

在这里查看：[https ://www.doctrine-project.org/projects/doctrine-orm/en/2.7/reference/inheritance-mapping.html](https://www.doctrine-project.org/projects/doctrine-orm/en/2.7/reference/inheritance-mapping.html)********

# iphone - ios setHidden:NO 在长方法的开头不显示

> ID：13124226
> 
> 赞同：2
> 
> 时间：2012-10-29T15:03:34.607
> 
> 标签：iphone, objective-c, ios, cocoa-touch, hidden

我有一个方法，它从 Web 服务加载数据。在该方法的开始，我想展示一个 UIActivityIndi​​cator。

但仅将隐藏更改为 NO 不会重绘 UIView。所以 UIActivityIndi​​cator 在长时间加载数据后是可见的，这肯定为时已晚。

那么如何在数据加载开始之前告诉 UIView 重绘 activityIndi​​cator 呢？

```
- (IBAction)loadData{
    [activity setHidden:NO];
     // here the activtyIndicator should appear 
     ...
    loadlongdataFromNet..
    [activity setHidden:YES];
     // here the activtyIndicator should disappear 
```

}

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T15:09:15.590

**切勿在主线程上执行网络和其他计算密集型操作！！！**

它将冻结/阻止 UI。您应该将与网络相关的长处理移至后台线程：

```
- (void)loadData
{
    [activity startAnimating]; // use this instead of setHidden
    [NSThread detachNewThreadSelector:@selector(reallyLoadData) toTarget:self withObject:nil];
}

- (void)reallyLoadData
{
    // network-heavy processing
    // then:
    [activity performSelectorOnMainThread:@selector(stopAnimating) withObject:nil waitUntilDone:YES];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T15:14:25.253

一种方法是使用 GCD 正确执行此操作：

```
- (void)loadData {
    [activity startAnimating];

    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_BACKGROUND, 0), ^{
        // do long running data load here

        dispatch_async(dispatch_get_main_queue(), ^{
            [activity stopAnimating];
        });
    });
} 
```

# iphone - 启用自动布局的 iOS 调整视图大小

> ID：13124233
> 
> 赞同：6
> 
> 时间：2012-10-29T15:04:06.183
> 
> 标签：iphone, objective-c, ios, ios6, autolayout

## 给定的问题

我有以下视图，其中包括导航栏、搜索栏和表格视图 - 左图是我拥有的给定视图，右图是我想要实现的 - 基本上只是隐藏导航栏并调整所有内容的大小。

![给定](../Images/aaf49331e60bc0a8c0c4316e46d227c0.png) ![通缉](../Images/20a7e384b1f0c35da946b14b5ccff3e4.png)

## 目前的解决方案

目前，我已经设法使用从搜索框到超级视图顶部属性的垂直空间约束来隐藏和调整所有内容 -

*   默认约束常量为 44（导航栏高度）
*   单击搜索框后，我隐藏导航栏并将约束常量设置为 0
*   当我停止搜索时，我恢复导航栏并将约束再次设置为 44

![垂直约束](../Images/ad90f3c14c08b011606745da20dfdbf0.png)

## 我想要的是

我正在寻找隐藏导航栏并调整搜索框+表格以填满整个屏幕的*最简单方法。*

有*什么*办法可以利用 iOS 6 自动布局系统？

我目前的解决方案感觉不自然。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-30T19:52:32.433

如果这是您需要更改的唯一约束，那么您可以为该约束创建一个 IBOutlet 到您的视图或视图控制器中，然后根据需要更改的时间简单地修改约束：

```
if(shouldHide){
  self.nibTitleBarConstraint.constant = 0.f;
}
else{
  self.nibTitleBarConstraint.constant = 44.f;
} 
```

如果您想为更改设置动画，则只需坚持`-layoutIfNeeded`动画上下文：

```
[UIView animateWithDuration:0.33f
                 animations:^{
                   [view layoutIfNeeded];
                 }]; 
```

这适用于您想要修改的任何约束常量（高度、顶部空间等），只要您的其他约束知道如何对该视图约束的更改做出反应。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T15:23:10.387

你能不能：

```
[[self navigationController] setNavigationBarHidden:YES animated:NO]; 
```

# java - 在 java servlet 中包含 javascript 的最佳方法

> ID：13124234
> 
> 赞同：7
> 
> 时间：2012-10-29T15:04:09.240
> 
> 标签：java, javascript, servlets

我实际上阅读了有关 servlet 的教程，并且看到了两种在 servlet 中包含 javascript 的不同方法。

```
 out.println("<html><head>");

  RequestDispatcher dispatcher = request.getRequestDispatcher(
      "/WEB-INF/javascript/functions.js");

  dispatcher.include(request, response);

  out.println("<title>Client Forms</title></head><body>"); 
```

和其他可能性：

```
out.println("<html><head>");
out.println("<script language="text/javascript" src="functions.js">");
... 
```

使用调度程序或直接包含有什么区别？什么是更好的解决方案？

谢谢你的建议..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T15:19:05.667

```
<script language="text/javascript" src="functions.js"> 
```

[在这种情况下，浏览器可以缓存脚本，如果它的内容没有改变](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.3.5)，它不会在下一页加载时加载。缓存资源可以节省页面加载和网络流量的时间。无论您在 servlet 还是 jsp 中使用此代码段都没有关系。

顺便说一句，您第一种包含脚本的方式存在错误。*.js 文件通常只包含 javascript 代码，没有标记，因此您应该在包含 functions.js 的内容之前添加开始脚本标记和结束脚本标记：

```
out.println("<script type='text/javascript'>");
RequestDispatcher dispatcher = request.getRequestDispatcher("/WEB-INF/javascript/functions.js");
out.println("</script>"); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-29T15:23:19.933

当我们使用 .js 时`RequestDispatcher`，我们实际上是从服务器请求该 JS 文件，然后我们将其嵌入到响应文档中。

另一方面，嵌入标签将使浏览器向服务器发出这样的请求。如果您的文件位于不同的服务器上，我猜这两种方法至少在 99% 的时间都将获取相同的结果。

另一方面，如果在同一台服务器上，我认为 RequestDispatcher 会更快。

服务器端缓存将有助于第一种方法和客户端的另一种方法。

# python - python通过管道进行进程通信：竞争条件

> ID：13124235
> 
> 赞同：2
> 
> 时间：2012-10-29T15:04:11.940
> 
> 标签：python, named-pipes, race-condition, python-3.2

所以我有两个需要相互通信的Python3.2进程。大多数需要传达的信息都是标准字典。命名管道似乎是要走的路，所以我创建了一个可以在两个进程中实例化的管道类。这个类实现了一个非常基本的协议来获取信息。

我的问题是有时有效，有时无效。除了代码失败的地方之外，这种行为似乎没有模式。

以下是重要的 Pipe 类。如果您想要更多代码，请大声喊叫：

```
class Pipe:
    """
    there are a bunch of constants set up here. I dont think it would be useful to include them. Just think like this: Pipe.WHATEVER = 'WHATEVER'
    """
    def __init__(self,sPath):
        """
        create the fifo. if it already exists just associate with it
        """
        self.sPath = sPath
        if not os.path.exists(sPath):
            os.mkfifo(sPath)
        self.iFH = os.open(sPath,os.O_RDWR | os.O_NONBLOCK)
        self.iFHBlocking = os.open(sPath,os.O_RDWR)

    def write(self,dMessage):
        """
        write the dict to the fifo
        if dMessage is not a dictionary then there will be an exception here.  There never is 
        """
        self.writeln(Pipe.MESSAGE_START)
        for k in dMessage:
            self.writeln(Pipe.KEY)
            self.writeln(k)
            self.writeln(Pipe.VALUE)
            self.writeln(dMessage[k])
        self.writeln(Pipe.MESSAGE_END)

    def writeln(self,s):
        os.write(self.iFH,bytes('{0} : {1}\n'.format(Pipe.LINE_START,len(s)+1),'utf-8'))
        os.write(self.iFH,bytes('{0}\n'.format(s), 'utf-8'))
        os.write(self.iFH,bytes(Pipe.LINE_END+'\n','utf-8'))

    def readln(self):
        """
        look for LINE_START, get line size
        read until LINE_END
        clean up
        return string
        """
        iLineStartBaseLength = len(self.LINE_START)+3  #'{0} : '
        try:
            s = os.read(self.iFH,iLineStartBaseLength).decode('utf-8')
        except:
            return Pipe.READLINE_FAIL

        if Pipe.LINE_START in s:
            #get the length of the line
            sLineLen = ''
            while True:
                try:
                    sCurrent = os.read(self.iFH,1).decode('utf-8')
                except:
                    return Pipe.READLINE_FAIL
                if sCurrent == '\n':
                    break
                sLineLen += sCurrent
            try:
                iLineLen = int(sLineLen.strip(string.punctuation+string.whitespace))
            except:
                raise Exception('Not a valid line length: "{0}"'.format(sLineLen))
            #read the line
            sLine = os.read(self.iFHBlocking,iLineLen).decode('utf-8')

            #read the line terminator
            sTerm = os.read(self.iFH,len(Pipe.LINE_END+'\n')).decode('utf-8')
            if sTerm == Pipe.LINE_END+'\n':
                return sLine
            return Pipe.READLINE_FAIL

        else:
            return Pipe.READLINE_FAIL

    def read(self):
        """
        read from the fifo, make a dict
        """
        dRet        = {}
        sKey        = ''
        sValue      = ''
        sCurrent    = None

        def value_flush():
            nonlocal dRet, sKey, sValue, sCurrent
            if sKey:
                dRet[sKey.strip()] = sValue.strip()
            sKey = ''
            sValue = ''
            sCurrent = ''

        if self.message_start():
            while True:
                sLine = self.readln()
                if Pipe.MESSAGE_END in sLine:
                    value_flush()
                    return dRet
                elif Pipe.KEY in sLine:
                    value_flush()
                    sCurrent = Pipe.KEY
                elif Pipe.VALUE in sLine:
                    sCurrent = Pipe.VALUE
                else:
                    if sCurrent == Pipe.VALUE:
                        sValue += sLine
                    elif sCurrent == Pipe.KEY:
                        sKey += sLine
        else:
            return Pipe.NO_MESSAGE 
```

它有时会在这里失败（在 readln 中）：

```
 try:
            iLineLen = int(sLineLen.strip(string.punctuation+string.whitespace))
        except:
            raise Exception('Not a valid line length: "{0}"'.format(sLineLen)) 
```

它不会在其他任何地方失败。

一个示例错误是：

```
Not a valid line length: "KE 17" 
```

它间歇性的事实告诉我这是由于某种比赛条件，我只是在努力弄清楚它可能是什么。有任何想法吗？

**编辑**添加了有关调用进程的内容

Pipe 的使用方式是通过调用具有相同路径的构造函数在 processA 和 ProcessB 中实例化它。然后进程 A 将间歇性地写入管道，进程 B 将尝试从中读取。在任何时候，我都没有试图让这件事成为两种方式。

这是对这种情况的更冗长的解释。我一直试图让这个问题简短，但我认为现在是我放弃的时候了。Anyhoo，我有一个守护进程和一个 Pyramid 进程需要玩得很好。有两个 Pipe 实例正在使用：一个只有 Pyramid 写入，另一个只有守护进程写入。Pyramid 写的东西很短，我在这个管道上没有遇到任何错误。守护进程写的东西要长得多，这是让我伤心的管道。两个管道都以相同的方式实现。两个进程只将字典写入各自的管道（如果不是这种情况，那么 Pipe.write 中就会出现异常）。

基本算法是：Pyramid 产生守护进程，守护进程加载疯狂的厄运对象层次结构和巨大的 ram 消耗。Pyramid 将 POST 请求发送到守护进程，然后守护进程进行大量计算并将数据发送到 Pyramid，以便呈现人性化的页面。然后，人类可以通过填写 HTML 表单等来响应层次结构中的内容，从而导致金字塔向守护程序发送另一个字典，并且守护程序发送回字典响应。

所以：只有一个管道出现任何问题，问题管道的流量比另一个管道多得多，并且保证只有字典写入其中一个

**编辑**作为对问题和评论的回应

在你告诉我试一试之前……除了继续阅读的东西。异常被提出的事实让我感到困扰。iLineLengh = int(stuff) 在我看来应该总是传递一个看起来像整数的字符串。这种情况只是大多数时候，而不是全部。因此，如果您想评论它可能不是整数，请不要。

套用我的问题：发现**比赛条件**，你将成为我的英雄。

**编辑**一个小例子：

进程_1.py：

```
oP = Pipe(some_path)
while 1:
    oP.write({'a':'foo','b':'bar','c':'erm...','d':'plop!','e':'etc'}) 
```

进程_2.py：

```
oP = Pipe(same_path_as_before)
while 1:
    print(oP.read()) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T12:27:34.507

在玩弄了代码之后，我怀疑问题出在您阅读文件的方式上。

具体来说，像这样的行：

```
os.read(self.iFH, iLineStartBaseLength) 
```

该调用不一定返回`iLineStartBaseLength`字节 - 它可能会消耗`"LI"`，然后返回`READLINE_FAIL`并重试。在第二次尝试时，它将获得该行的其余部分，并以某种方式最终将非数字字符串提供给`int()`调用

不可预测性可能来自于 fifo 的刷新方式——如果在写入完整行时它恰好刷新，那么一切都很好。如果它在行写一半时刷新，那就奇怪了。

至少在我最终得到的脚本的破解版本中，`oP.read()`调用`process_2.py`通常得到与发送的不同的字典（`KEY`可能会渗入以前的`VALUE`和其他奇怪的地方）。

我可能弄错了，因为我必须进行大量更改才能使代码在 OS X 上运行，并且在进行实验时还要进一步。[我修改的代码在这里](https://gist.github.com/3979658)

不确定如何修复它，但是.. 使用`json`模块或类似模块，协议/解析可以大大简化 - 换行符分隔的 JSON 数据更容易解析：

```
import os
import time
import json
import errno

def retry_write(*args, **kwargs):
    """Like os.write, but retries until EAGAIN stops appearing
    """

    while True:
        try:
            return os.write(*args, **kwargs)
        except OSError as e:
            if e.errno == errno.EAGAIN:
                time.sleep(0.5)
            else:
                raise

class Pipe(object):
    """FIFO based IPC based on newline-separated JSON
    """

    ENCODING = 'utf-8'

    def __init__(self,sPath):
        self.sPath = sPath
        if not os.path.exists(sPath):
            os.mkfifo(sPath)

        self.fd = os.open(sPath,os.O_RDWR | os.O_NONBLOCK)
        self.file_blocking = open(sPath, "r", encoding=self.ENCODING)

    def write(self, dmsg):
        serialised = json.dumps(dmsg) + "\n"
        dat = bytes(serialised.encode(self.ENCODING))

        # This blocks until data can be read by other process.
        # Can just use os.write and ignore EAGAIN if you want
        # to drop the data
        retry_write(self.fd, dat)

    def read(self):
        serialised = self.file_blocking.readline()
        return json.loads(serialised) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-29T15:12:33.413

尝试摆脱`try:`,`except:`块并查看实际抛出的异常。

因此，只需将您的样本替换为：

```
iLineLen = int(sLineLen.strip(string.punctuation+string.whitespace)) 
```

我敢打赌它现在会抛出一个`ValueError`，这是因为你试图将“KE 17”投射到一个`int`.

如果要将字符串转换`string.whitespace`为.`string.punctuation``int`

# php - php 5.3 中的 mktime 等效项

> ID：13124236
> 
> 赞同：1
> 
> 时间：2012-10-29T15:04:12.390
> 
> 标签：php, mktime

嗨我刚刚更新到 php 5.3。

我`mktime()`在脚本中使用：

```
$DateSec = mktime($Hour, $Minutes, $Seconds, $Month, $Day, $Year, 0); 
```

PHP 5.3 中的等效函数是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T15:10:09.670

[http://fr2.php.net/manual/fr/function.mktime.php](http://fr2.php.net/manual/fr/function.mktime.php)

你用得好，只要去掉最后一个参数。

```
mktime($Hour, $Minutes, $Seconds, $Month, $Day, $Year); 
```

不被弃用。

如果你想使用特定的时区，看看这个： http: [//fr2.php.net/manual/en/function.date-default-timezone-set.php](http://fr2.php.net/manual/en/function.date-default-timezone-set.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T17:20:52.863

正如其他人所说，`mktime()`它仍然在 PHP 5.3 中工作，并且它仍然占有一席之地。但就个人而言，我更喜欢使用新的 DateTime 类来处理我的所有日​​期。它们在各个方面都比旧功能要好得多。

查看[DateTime 类手册页](http://php.net/manual/en/book.datetime.php)。它有一些你可能感兴趣的东西。

例如，这是`mktime()`使用新的 OO 方法替换的方式：

```
$date = new DateTime();    
$date->setDate($year, $month, $day);
$date->setTime($hour, $mins, $secs); 
```

但这也可能是有趣的：

```
$date = DateTime::createFromFormat('Y-m-d H:i:s', '2009-02-15 15:16:17') 
```

希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-30T15:53:57.490

你也可以使用

```
strtotime('2015-04-30 17:00:00'); 
```

可以与日期函数结合使用来模拟`mktime`这样的默认值：

```
strtotime(date('Y').'-04-30'); 
```

# android - 垃圾收集触摸事件（Action_Up 触发）Android

> ID：13124239
> 
> 赞同：0
> 
> 时间：2012-10-29T15:04:26.580
> 
> 标签：android, garbage-collection, touch, touch-event, ontouchlistener

我创建的自定义相机活动有问题。当用户按下按钮（Action_Down）时，我希望有一个软按钮聚焦相机，如果用户将他/她的手指抬起（Action_Up）到图像视图上则拍照，然后如果用户拖出则取消所有操作按钮区域的/提升到按钮之外。

下面是我注册到 ImageView 的触摸监听器；

```
public boolean onTouch(View v, MotionEvent event) {

    Rect rect = new Rect(v.getLeft(), v.getTop(), v.getRight(),
            v.getBottom());

    StringBuilder sb = new StringBuilder();
    sb.append("rect (l,t,r,b) - " + rect.left + "," + rect.top + ","
            + rect.right + "," + rect.bottom + " x-Event " + event.getX()
            + " y-event " + event.getY() + " event code"
            + event.getAction() + " rect Cont "
            + rect.contains((int) event.getRawX(), (int) event.getRawY()));
    Log.d("Touch", sb.toString());

    switch (v.getId()) {
    case R.id.CameraShutterButton: {
        if (event.getAction() == MotionEvent.ACTION_DOWN) {
            softShutterPressed=true;

            shutter.setImageDrawable(getResources().getDrawable(
                    R.drawable.camera_shutter_pressed));
            if (focusingFlag == false) {
                focusingFlag = true;
                autoFocusIndicator.setImageDrawable(getResources()
                        .getDrawable(R.drawable.autofocus_focusing));
                autoFocusIndicator.setVisibility(View.VISIBLE);
                camera.autoFocus(this);
            }
            shutter.invalidate();
            return true;
        }

        if (event.getAction() == MotionEvent.ACTION_UP
                && rect.contains((int) event.getRawX(),
                        (int) event.getRawY())&&softShutterPressed) {

            shutter.setImageDrawable(getResources().getDrawable(
                    R.drawable.camera_shutter));
            softShutterPressed=false;
            toast.setText("Action Up");
            toast.show();
            if (focusedFlag == true && pictureEventOneShot == false) {

                camera.takePicture(null, null, null, this);

            }

            if (focusedFlag == false && focusingFlag == true
                    && pictureEventOneShot == false) {
                captureWhenFocused = true;
            }

            if (focusedFlag == false && focusingFlag == false
                    && pictureEventOneShot == false) {
                captureWhenFocused = true;
                focusingFlag = true;
                autoFocusIndicator.setImageDrawable(getResources()
                        .getDrawable(R.drawable.autofocus_focusing));
                autoFocusIndicator.setVisibility(View.VISIBLE);

                camera.autoFocus(this);
            }

            shutter.invalidate();
            return true;

        }

        if ((event.getAction() == MotionEvent.ACTION_MOVE && !rect
                .contains((int) event.getRawX(), (int) event.getRawY()))
                || (event.getAction() == MotionEvent.ACTION_UP && !rect
                        .contains((int) event.getRawX(),
                                (int) event.getRawY()))) {
            shutter.setImageDrawable(getResources().getDrawable(
                    R.drawable.camera_shutter));
            softShutterPressed=false;

            if (captureWhenFocused != true) {

                focusedFlag = false;
                focusingFlag = false;
                camera.cancelAutoFocus();
                autoFocusIndicator.setImageDrawable(getResources()
                        .getDrawable(R.drawable.autofocus_focusing));
                autoFocusIndicator.setVisibility(View.GONE);
            } else {

                // Nothing
            }

            shutter.invalidate();
            return true;
        }

    }

    default:
        break;

    }

    return false;
} 
```

我遇到的问题是，当垃圾收集发生时，即使用户仍然将手指放在按钮上，也会错误地触发事件 Action_UP。以下是 logcat 输出：

```
10-29 10:57:00.657: D/Touch(4455): rect (l,t,r,b) - 704,24,819,139 x-Event 56.75714 y-event 39.312866 event code2 rect Cont true
10-29 10:57:00.712: D/Touch(4455): rect (l,t,r,b) - 704,24,819,139 x-Event 56.75714 y-event 39.80368 event code2 rect Cont true
10-29 10:57:00.774: D/Touch(4455): rect (l,t,r,b) - 704,24,819,139 x-Event 56.75714 y-event 40.294464 event code2 rect Cont true
10-29 10:57:00.938: D/Touch(4455): rect (l,t,r,b) - 704,24,819,139 x-Event 56.75714 y-event 40.294464 event code1 rect Cont true
10-29 10:57:02.579: D/dalvikvm(4455): GC_FOR_MALLOC freed 1557K, 57% free 3124K/7175K, external 3166K/3417K, paused 82ms
10-29 10:57:02.696: D/dalvikvm(4455): GC_CONCURRENT freed 6K, 43% free 4099K/7175K, external 2885K/3417K, paused 2ms+6ms 
```

我已经验证，当触发垃圾收集时（通过在 DDMS 视图中转储堆）会触发此错误操作。

**更新日志**

下面是当我按下按钮强制进行堆转储，然后在垃圾收集之前看到错误的操作事件时的日志。

```
10-29 12:57:08.884: D/Touch(9532): rect (l,t,r,b) - 704,24,819,139 x-Event 55.88568 y-event 59.92639 event code0 rect Cont true
10-29 12:57:08.923: D/Touch(9532): rect (l,t,r,b) - 704,24,819,139 x-Event 55.88568 y-event 59.92639 event code2 rect Cont true
10-29 12:57:08.985: D/Touch(9532): rect (l,t,r,b) - 704,24,819,139 x-Event 55.88568 y-event 59.92639 event code2 rect Cont true
10-29 12:57:09.477: D/Touch(9532): rect (l,t,r,b) - 704,24,819,139 x-Event 55.88568 y-event 59.92639 event code2 rect Cont true
10-29 12:57:14.430: D/ddm-heap(9532): Heap dump: [DDMS]
10-29 12:57:15.063: I/dalvikvm(9532): hprof: dumping heap strings to "[DDMS]".
10-29 12:57:16.610: I/dalvikvm(9532): hprof: heap dump completed (3503KB)
10-29 12:57:16.618: D/dalvikvm(9532): GC_HPROF_DUMP_HEAP freed 44K, 57% free 3121K/7239K, external 3166K/3417K, paused 2180ms
10-29 12:57:22.137: D/Touch(9532): rect (l,t,r,b) - 704,24,819,139 x-Event 55.88568 y-event 59.92639 event code2 rect Cont true
10-29 12:57:22.173: D/Touch(9532): rect (l,t,r,b) - 704,24,819,139 x-Event 55.88568 y-event 59.92639 event code2 rect Cont true
10-29 12:57:22.243: D/Touch(9532): rect (l,t,r,b) - 704,24,819,139 x-Event 55.88568 y-event 59.92639 event code2 rect Cont true
10-29 12:57:22.266: D/Touch(9532): rect (l,t,r,b) - 704,24,819,139 x-Event 55.88568 y-event 59.92639 event code2 rect Cont true
10-29 12:57:22.332: D/Touch(9532): rect (l,t,r,b) - 704,24,819,139 x-Event 55.88568 y-event 59.92639 event code2 rect Cont true
10-29 12:57:22.353: D/Touch(9532): rect (l,t,r,b) - 704,24,819,139 x-Event 55.88568 y-event 59.92639 event code2 rect Cont true
10-29 12:57:22.829: D/Touch(9532): rect (l,t,r,b) - 704,24,819,139 x-Event 55.88568 y-event 59.92639 event code2 rect Cont true
10-29 12:57:22.860: D/Touch(9532): rect (l,t,r,b) - 704,24,819,139 x-Event 55.88568 y-event 59.92639 event code2 rect Cont true
10-29 12:57:23.649: D/Touch(9532): rect (l,t,r,b) - 704,24,819,139 x-Event 49.785706 y-event 54.52762 event code2 rect Cont true
10-29 12:57:23.673: D/Touch(9532): rect (l,t,r,b) - 704,24,819,139 x-Event 49.785706 y-event 53.54602 event code2 rect Cont true
10-29 12:57:23.712: D/Touch(9532): rect (l,t,r,b) - 704,24,819,139 x-Event 49.785706 y-event 52.07361 event code2 rect Cont true
10-29 12:57:23.720: D/Touch(9532): rect (l,t,r,b) - 704,24,819,139 x-Event 49.785706 y-event 51.582825 event code2 rect Cont true
10-29 12:57:23.751: D/Touch(9532): rect (l,t,r,b) - 704,24,819,139 x-Event 49.785706 y-event 50.601227 event code2 rect Cont true
10-29 12:57:23.766: D/Touch(9532): rect (l,t,r,b) - 704,24,819,139 x-Event 49.785706 y-event 49.61963 event code2 rect Cont true
10-29 12:57:23.782: D/Touch(9532): rect (l,t,r,b) - 704,24,819,139 x-Event 49.785706 y-event 49.128845 event code2 rect Cont true
10-29 12:57:23.798: D/Touch(9532): rect (l,t,r,b) - 704,24,819,139 x-Event 49.785706 y-event 48.147247 event code2 rect Cont true
10-29 12:57:23.813: D/Touch(9532): rect (l,t,r,b) - 704,24,819,139 x-Event 49.785706 y-event 47.16565 event code2 rect Cont true
10-29 12:57:23.829: D/Touch(9532): rect (l,t,r,b) - 704,24,819,139 x-Event 49.785706 y-event 46.674835 event code2 rect Cont true
10-29 12:57:23.837: D/Touch(9532): rect (l,t,r,b) - 704,24,819,139 x-Event 49.785706 y-event 46.18405 event code2 rect Cont true
10-29 12:57:23.845: D/Touch(9532): rect (l,t,r,b) - 704,24,819,139 x-Event 49.785706 y-event 45.693237 event code2 rect Cont true
10-29 12:57:23.868: D/Touch(9532): rect (l,t,r,b) - 704,24,819,139 x-Event 49.785706 y-event 44.71164 event code2 rect Cont true
10-29 12:57:23.884: D/Touch(9532): rect (l,t,r,b) - 704,24,819,139 x-Event 49.785706 y-event 44.220856 event code2 rect Cont true
10-29 12:57:23.907: D/Touch(9532): rect (l,t,r,b) - 704,24,819,139 x-Event 49.785706 y-event 43.730072 event code2 rect Cont true
10-29 12:57:23.915: D/Touch(9532): rect (l,t,r,b) - 704,24,819,139 x-Event 49.785706 y-event 43.239258 event code2 rect Cont true
10-29 12:57:23.938: D/Touch(9532): rect (l,t,r,b) - 704,24,819,139 x-Event 49.785706 y-event 42.748474 event code2 rect Cont true
10-29 12:57:24.016: D/Touch(9532): rect (l,t,r,b) - 704,24,819,139 x-Event 49.785706 y-event 42.748474 event code2 rect Cont true
10-29 12:57:24.055: D/Touch(9532): rect (l,t,r,b) - 704,24,819,139 x-Event 49.785706 y-event 44.71164 event code2 rect Cont true
10-29 12:57:24.079: D/Touch(9532): rect (l,t,r,b) - 704,24,819,139 x-Event 49.785706 y-event 45.202454 event code2 rect Cont true
10-29 12:57:24.102: D/Touch(9532): rect (l,t,r,b) - 704,24,819,139 x-Event 49.785706 y-event 45.693237 event code2 rect Cont true
10-29 12:57:24.102: D/Touch(9532): rect (l,t,r,b) - 704,24,819,139 x-Event 49.785706 y-event 46.18405 event code2 rect Cont true
10-29 12:57:24.118: D/Touch(9532): rect (l,t,r,b) - 704,24,819,139 x-Event 49.785706 y-event 46.674835 event code2 rect Cont true
10-29 12:57:24.134: D/Touch(9532): rect (l,t,r,b) - 704,24,819,139 x-Event 49.785706 y-event 47.16565 event code2 rect Cont true
10-29 12:57:24.157: D/Touch(9532): rect (l,t,r,b) - 704,24,819,139 x-Event 49.785706 y-event 47.656433 event code2 rect Cont true
10-29 12:57:24.165: D/Touch(9532): rect (l,t,r,b) - 704,24,819,139 x-Event 49.785706 y-event 48.147247 event code2 rect Cont true
10-29 12:57:24.188: D/Touch(9532): rect (l,t,r,b) - 704,24,819,139 x-Event 48.914246 y-event 48.63803 event code2 rect Cont true
10-29 12:57:24.212: D/Touch(9532): rect (l,t,r,b) - 704,24,819,139 x-Event 48.914246 y-event 49.128845 event code2 rect Cont true
10-29 12:57:24.243: D/Touch(9532): rect (l,t,r,b) - 704,24,819,139 x-Event 48.914246 y-event 49.61963 event code2 rect Cont true
10-29 12:57:24.259: D/Touch(9532): rect (l,t,r,b) - 704,24,819,139 x-Event 48.914246 y-event 50.110413 event code2 rect Cont true
10-29 12:57:24.283: D/Touch(9532): rect (l,t,r,b) - 704,24,819,139 x-Event 48.914246 y-event 50.601227 event code2 rect Cont true
10-29 12:57:24.329: D/Touch(9532): rect (l,t,r,b) - 704,24,819,139 x-Event 48.914246 y-event 51.09201 event code2 rect Cont true
10-29 12:57:24.360: D/Touch(9532): rect (l,t,r,b) - 704,24,819,139 x-Event 48.042847 y-event 51.09201 event code2 rect Cont true
10-29 12:57:24.384: D/Touch(9532): rect (l,t,r,b) - 704,24,819,139 x-Event 48.042847 y-event 51.582825 event code2 rect Cont true
10-29 12:57:24.399: D/Touch(9532): rect (l,t,r,b) - 704,24,819,139 x-Event 48.042847 y-event 52.07361 event code2 rect Cont true
10-29 12:57:24.438: D/Touch(9532): rect (l,t,r,b) - 704,24,819,139 x-Event 48.042847 y-event 52.564423 event code2 rect Cont true
10-29 12:57:24.470: D/Touch(9532): rect (l,t,r,b) - 704,24,819,139 x-Event 48.042847 y-event 53.055206 event code2 rect Cont true
10-29 12:57:24.493: D/Touch(9532): rect (l,t,r,b) - 704,24,819,139 x-Event 48.042847 y-event 53.54602 event code2 rect Cont true
10-29 12:57:24.509: D/Touch(9532): rect (l,t,r,b) - 704,24,819,139 x-Event 48.042847 y-event 54.036804 event code2 rect Cont true
10-29 12:57:24.532: D/Touch(9532): rect (l,t,r,b) - 704,24,819,139 x-Event 48.042847 y-event 54.52762 event code2 rect Cont true
10-29 12:57:24.556: D/Touch(9532): rect (l,t,r,b) - 704,24,819,139 x-Event 48.042847 y-event 55.018402 event code2 rect Cont true
10-29 12:57:24.579: D/Touch(9532): rect (l,t,r,b) - 704,24,819,139 x-Event 48.042847 y-event 55.509186 event code2 rect Cont true
10-29 12:57:24.618: D/Touch(9532): rect (l,t,r,b) - 704,24,819,139 x-Event 48.042847 y-event 56.0 event code2 rect Cont true
10-29 12:57:24.815: D/Touch(9532): rect (l,t,r,b) - 704,24,819,139 x-Event 48.042847 y-event 56.490784 event code2 rect Cont true
10-29 12:57:26.274: D/Touch(9532): rect (l,t,r,b) - 704,24,819,139 x-Event 48.042847 y-event 56.490784 event code2 rect Cont true
10-29 12:57:26.306: D/Touch(9532): rect (l,t,r,b) - 704,24,819,139 x-Event 48.042847 y-event 56.490784 event code2 rect Cont true
10-29 12:57:26.391: D/Touch(9532): rect (l,t,r,b) - 704,24,819,139 x-Event 48.042847 y-event 56.490784 event code2 rect Cont true
10-29 12:57:27.446: D/Touch(9532): rect (l,t,r,b) - 704,24,819,139 x-Event 48.042847 y-event 54.52762 event code2 rect Cont true
10-29 12:57:30.548: D/Touch(9532): rect (l,t,r,b) - 704,24,819,139 x-Event 48.042847 y-event 54.036804 event code2 rect Cont true
10-29 12:57:41.118: D/Touch(9532): rect (l,t,r,b) - 704,24,819,139 x-Event 48.042847 y-event 54.036804 event code1 rect Cont true
10-29 12:57:42.720: D/dalvikvm(9532): GC_FOR_MALLOC freed 647K, 57% free 3123K/7239K, external 2941K/3417K, paused 80ms
10-29 12:57:42.727: I/dalvikvm-heap(9532): Grow heap (frag case) to 9.082MB for 1128458-byte allocation
10-29 12:57:42.774: D/dalvikvm(9532): GC_FOR_MALLOC freed <1K, 42% free 4225K/7239K, external 2941K/3417K, paused 35ms
10-29 12:57:42.860: D/dalvikvm(9532): GC_CONCURRENT freed 5K, 42% free 4226K/7239K, external 2941K/3417K, paused 2ms+5ms 
```

我的问题是我有什么选择来防止这种行为？有没有办法在一段时间内防止垃圾收集？

# google-fusion-tables - 融合表 ST_INTERSECTS 不起作用

> ID：13124241
> 
> 赞同：0
> 
> 时间：2012-10-29T15:04:32.610
> 
> 标签：google-fusion-tables

我的应用程序使用 fusiontable 通过 ST_INTERSECTS 选择记录 id 工作正常，然后突然无法正常工作！

```
var queryText = encodeURIComponent("select id from "+ v_TableID +" where ST_INTERSECTS(address, CIRCLE(LATLNG(" + lat + ',' + lng + '),' + 1000 + '))' + "and" + v_select + "and id > 1" );
var query = new google.visualization.Query("http://www.google.com/fusiontables/gvizdata?tq=" + queryText); 
```

如果删除`ST_INTERSECTS(address, CIRCLE(LATLNG(" + lat + ',' + lng + '),' + 1000 + '))`它工作正常

```
var queryText = encodeURIComponent("select id from "+ v_TableID +" where " + v_select + "and id > 1");
var query = new google.visualization.Query("http://www.google.com/fusiontables/gvizdata?tq=" + queryText); 
```

如果我修改融合表地址（例如：22.2202,113.9196 更改为 22.22,113.919）它会再次工作，但只是第一次。

**附加信息**

> var v_select = '类别在 ("abc","xyz")';

我再试一次而不是找出

```
var queryText = encodeURIComponent("select id from "+ v_TableID +" where ST_INTERSECTS(address, CIRCLE(LATLNG(" + lat + ',' + lng + '),' + 1000 + '))' + "and" + 'category in ("abc","xyz")' + "and id > 1" );
var query = new google.visualization.Query("http://www.google.com/fusiontables/gvizdata?tq=" + queryText); 
```

如果我删除“（“abc”，“xyz”）中的类别”或“ST_INTERSECTS（地址，CIRCLE（LATLNG（“+ lat +'，'+ lng +'）”工作正常。

现在不能同时使用“in”和“ST_INTERSECTS”吗？

在 2012 年 10 月 28 日之前，它工作正常，我已经使用了 6 个月的相同条款，但现在不起作用。

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T14:14:17.303

我很欣赏这不是一个答案（我没有足够的代表发表评论），但它可能有助于解决这个问题 - 我遇到了一个类似的问题，几乎相同的查询已经工作了一段时间。这似乎是因为从数字 tableID 切换到加密 tableID - 这是我的两个代码版本的唯一区别。张贴者是否使用加密的表格 ID？努力尝试解决这个问题，到目前为止没有运气......

# c#-4.0 - NpqsqlParameter - 多个值

> ID：13124242
> 
> 赞同：1
> 
> 时间：2012-10-29T15:04:38.733
> 
> 标签：c#-4.0, npgsql

**代码：**

```
string sqlCommand = @"UPDATE table SET active = 0 WHERE id IN (@CommaSeparatedId)";
string sqlParamName = "CommaSeparatedId";
string sqlParamValue = "111, 222";

try
{
    using (NpgsqlConnection connection = new NpgsqlConnection())
    {
        // Get connection string from Web.config
        connection.ConnectionString = _connectionString;
        connection.Open();
        Int32 rowsAffected;

        using (NpgsqlCommand command = new NpgsqlCommand(sqlCommand, connection))
        {
            NpgsqlParameter sqlParam = new NpgsqlParameter(sqlParamName, NpgsqlTypes.NpgsqlDbType.Varchar);
            // Code below no exception occur, and active not updated to 0
            // sqlParam.Value = sqlParamValue;

            // This code works for only one value
            sqlParam.Value = "111";

            command.Parameters.Add(sqlParam);
            rowsAffected = command.ExecuteNonQuery();
        }
    }
}
catch (NpgsqlException pgEx)
{
    throw pgEx;
} 
```

* * *

**问题是：**

如果我使用`111, 222`rowsAffected `sqlParam.Value'`= 0 `, but if I'm using only`111 `or`222 `rowsAffected = 1`。这意味着当只有 1 个值时更新成功，但如果尝试更新超过 1 个值则失败。`

 `* * *

**预期查询：**

```
UPDATE table
    SET active = 0
WHERE id IN ('111', '222'); 
```

* * *

**我在上面的代码中缺少什么？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T15:16:26.393

您面临的问题是由于参数值“111,222”将被数据库引擎视为不是两个不同的值，而是一个。
数据库搜索 ID = "111,222" 的记录，但找不到任何与请求匹配的记录。
您应该尝试使用存储过程并根据 PostgreSQL 要求的语法执行[动态 SQL](http://www.postgresql.org/docs/8.3/static/ecpg-dynamic.html)`

# mongodb - 在 Mongodb 中搜索并返回嵌套值

> ID：13124243
> 
> 赞同：0
> 
> 时间：2012-10-29T15:04:44.537
> 
> 标签：mongodb, find

我有以下`Question.findOne()`返回的数据结构：

```
Object
_id: "8132c2f0-baee-434f-a739-c4d30718daf2"
owner: "273b7291-df2b-494c-bd9b-64e71283447e"
question: "Vacations?"
answers: Array[1]
  0: Object
  name: "Cancun"
  owned_by: "273b7291-df2b-494c-bd9b-64e71283447e"
  __proto__: Object 
```

如何使用 mongodb`find`和`return`本文档中的一系列答案？`_id "8132c2f0-baee-434f-a739-c4d30718daf2"`这是我开始的地方：

```
Questions.find({}, {"answers.name":1}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T15:30:46.893

```
db.Questions.findOne({_id:"8132c2f0-baee-434f-a739-c4d30718daf2"}, {answers:1}); 
```

另请查看文档：

[http://www.mongodb.org/display/DOCS/Retrieving+a+Subset+of+Fields](http://www.mongodb.org/display/DOCS/Retrieving+a+Subset+of+Fields)

# html - Emberjs：调用全局操作时重新加载当前状态

> ID：13124251
> 
> 赞同：0
> 
> 时间：2012-10-29T15:05:01.577
> 
> 标签：html, model-view-controller, ember.js, javascript-framework

假设我在以下 Ember 代码中进入“用户”状态：

```
Html:    
<button {{action doSomething App.currentUsername}}>Go!</button>

JS:
App.Router = Ember.Router.extend({
    enableLogging: true,
    root: Ember.Route.extend({
        doSomething: Ember.Route.transitionTo('user'),
        main: Ember.Route.extend({
            route: '/'
        }),
        user: Ember.Route.extend({
            route: '/:username',
            connectOutlets: function(router, context) {
                //some actions
            }
        })
    })
}); 
```

当再次调用“doSomething”操作时，我希望 Ember 重新运行 connectOutlets 代码（因为用户名会更改）。

将代码放在“用户”内的“doSomething”操作中不起作用，因为我需要上下文。

知道怎么做吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T09:52:52.833

显然，在 Ember 中，如果使用相同的上下文对象调用状态，它将不会连接出口（或者甚至不会首先进入状态）。解决这个问题的方法就是提供一个新的上下文，所以我们将“doSomething”替换为：

```
doSomething: function(router, event) {
  router.transitionTo('user', {username: event.context.username});
} 
```

# android - Android 进度条长参数

> ID：13124252
> 
> 赞同：1
> 
> 时间：2012-10-29T15:05:03.927
> 
> 标签：android, progress-bar

我有两个 Date 对象。结束日期和开始日期。我想在进度栏中显示此日期之间的差异（包括小时和分钟）。我用 Date.getTime() 初始化了两个长变量，然后计算了差异。

但是 ProgressBar.setProgress() 和 ProgressBar.setMax() 只接受 int。我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T15:09:55.710

`long`是整数类型。`int`如果差异不超过大小，您可以毫无问题地投射。

一个`long`che 持有 `2^(63-1)`值，`int` `2^(31-1).`如果你通过你设置的值可以毫无问题`setMax()`地转换它。`int`

# asp.net - 获取在运行时生成的控制

> ID：13124255
> 
> 赞同：2
> 
> 时间：2012-10-29T15:05:11.657
> 
> 标签：asp.net, controls, runtime

我正在通过后端在文本更改事件上创建一些文本框，如下所示：

```
protected void txtHowMany_TextChanged(object sender, EventArgs e)
    {
          int totalSections = Convert.ToInt32(txtHowMany.Text.Trim());

            for (int i = 1; i <= totalSections; i++)
            {
                TextBox tbx = new TextBox();
                tbx.Text = "";
                tbx.ID = "section" + i;
                tbx.Style.Add("width", "90%");
                tdSectionsAdd.Controls.Add(tbx);
            }
            trSectionsName.Visible = true;
    } 
```

**txtHowMany**的自动回发是正确的，所以当我输入一个数字时，它会生成文本框并将其添加到表格划分中

现在的问题是，我试图从生成的文本框中获取文本，如下所示：

```
protected void btnSave_click(object sender, EventArgs e)
    {
      int numbersOfSectionsToSave = 1;
                int sectionsToSave =Convert.ToInt32(txtHowMany.Text.Trim());

                for (int i = 1; i < sectionsToSave; i++)
                {
                    Sections section = new Sections();
                    section.CourseId = result;
                    section.OrganizationId = course.OrganizationId;

                    foreach (Control c in tdSectionsAdd.Controls)
                    {
                        if (c.GetType() == typeof(TextBox))
                        {
                          TextBox  txtBox = (TextBox)c;
                            string id = "section" + i;
                            if (txtBox.ID == id)
                            {
                                section.Name = txtBox.Text.Trim();
                            }
                        }
                    }

                    string name = Request.Form["section1"];
                    section.CreatedBy = "Admin";
                    section.CreationDate = DateTime.Now;
                    section.ModifiedBy = "Admin";
                    section.ModificationDate = DateTime.Now;
                    numbersOfSectionsToSave += section.SaveSection();
    } 
```

但它显示**tdSectionsAdd**中的控件计数为 0，这些控件是在我尝试访问它们之前添加的，但它仍然在 td 中显示没有控件。请帮忙，我怎样才能得到这些文本框？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T15:14:34.593

您需要在每个回发中添加它们。将`totalSections`变量存储在 ViewState 中，以便您也可以在页面加载时添加它们：

```
protected void AddTextBoxes()
{
    int totalSections;
    if (int.TryParse(Convert.ToString(ViewState["TotalSections"]), out totalSections)
    {
        for (int i = 1; i <= totalSections; i++)
            {
                TextBox tbx = new TextBox();
                tbx.Text = "";
                tbx.ID = "section" + i;
                tbx.Style.Add("width", "90%");
                tdSectionsAdd.Controls.Add(tbx);
            }
        trSectionsName.Visible = true;
    }
}
protected void txtHowMany_TextChanged(object sender, EventArgs e)
    {
          ViewState["TotalSections"] = Convert.ToInt32(txtHowMany.Text.Trim());

            tdSectionsAdd.Controls.Clear();
            AddTextBoxes();
    }

protected void Page_Load(object sender, EventArgs e)
{
    AddTextBoxes();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T15:10:35.630

动态创建的控件在回发时“消失”，如果它们没有在该页面的 Page_Init 中“重新创建”。

只有在 page_init 中创建它们时，页面的视图状态才会使用它们的信息进行更新。

**长解释：** 当我们执行回发（或部分回发）时，我们希望能够访问这些控件（或至少是用户放入其中的值）。我们知道数据在 viewstate 中，但是 ASP.NET 并不真正知道 ViewState 项属于哪个控件。它只知道通过相同的索引来匹配视图状态项和控件（例如，将视图状态树中的项目 n 与控件树中的项目 n 匹配）。因此，为了获取动态控件的数据，我们需要在每次回发页面时重新创建控件。但是为了让它工作，我们需要在 Page_Init 函数中而不是在 Page_Load 中重新创建控件。为什么？因为当创建 ViewState 时，它​​需要所有控件都已经存在。 ![页面生命周期](../Images/cebb244bb654ef59842647cf7aaa8ec7.png)

这取自 MSDN，您可以看到视图状态是在 init 之后但在页面加载之前加载的。

**TL;DR**调用在 page_init 中创建动态控件的函数，您应该能够看到用户在页面回发时输入的所有值

关于这个问题的几个链接：

[http://forums.asp.net/t/1186195.aspx/1](http://forums.asp.net/t/1186195.aspx/1)

[ASP.NET - 在 Page_Pre_init() 或 Page_Init() 或 Page_Load() 中创建的动态控件](https://stackoverflow.com/questions/4017848/asp-net-dynamic-controls-created-in-page-pre-init-or-page-init-or-page-loa)

**选项 2：**

我应该注意：如果控件都具有唯一的 ID，并且***您对每次回发都重新创建它们不感兴趣***- 您总是可以在请求对象中查找它们。Request.Form 是一个 NameValueCollection，它保存了作为表单一部分的所有控件的值，只需搜索它以查找您要查找的任何内容

# android - 使用 SQLite 数据库时的几个异常

> ID：13124257
> 
> 赞同：6
> 
> 时间：2012-10-29T15:05:17.413
> 
> 标签：android, android-sqlite

这段代码：

```
public void foo() {
    new Thread() {
        @Override
        public void run() {
            ShaufelDatabaseHelper dbHelper = ShaufelDatabaseHelper.getInstance(parentActivity);
            SQLiteDatabase connection = null;
            Cursor queryData = null;

            final String[] values = new String[8];

            try{
                connection = dbHelper.getReadableDatabase();

                queryData = connection.rawQuery(         // line 132
                    "SELECT name, firstname, section, row, gravenr, type, workorder, comment "+
                    "FROM orders, graves "+
                    "WHERE orders.id=? AND graves.id=orders.id"
                    , new String[] {orderID});

                queryData.moveToFirst(); // line 138

                // ...
        } catch(Throwable t) {
            // ...
        }
    }.start();
} 
```

给了我这些例外：

```
10-29 15:19:55.103: E/AndroidRuntime(23102): FATAL EXCEPTION: Thread-1387
10-29 15:19:55.103: E/AndroidRuntime(23102): java.lang.IllegalMonitorStateException
10-29 15:19:55.103: E/AndroidRuntime(23102):    at java.util.concurrent.locks.ReentrantLock$Sync.tryRelease(ReentrantLock.java:126)
10-29 15:19:55.103: E/AndroidRuntime(23102):    at java.util.concurrent.locks.AbstractQueuedSynchronizer.release(AbstractQueuedSynchronizer.java:1239)
10-29 15:19:55.103: E/AndroidRuntime(23102):    at java.util.concurrent.locks.ReentrantLock.unlock(ReentrantLock.java:431)
10-29 15:19:55.103: E/AndroidRuntime(23102):    at android.database.sqlite.SQLiteDatabase.unlock(SQLiteDatabase.java:487)
10-29 15:19:55.103: E/AndroidRuntime(23102):    at android.database.sqlite.SQLiteDirectCursorDriver.query(SQLiteDirectCursorDriver.java:62)
10-29 15:19:55.103: E/AndroidRuntime(23102):    at android.database.sqlite.SQLiteDatabase.rawQueryWithFactory(SQLiteDatabase.java:1564)
10-29 15:19:55.103: E/AndroidRuntime(23102):    at android.database.sqlite.SQLiteDatabase.rawQuery(SQLiteDatabase.java:1538)
10-29 15:19:55.103: E/AndroidRuntime(23102):    at de.l_one.app.shaufel.OrderDetailView$3.run(OrderDetailView.java:132)

10-29 15:21:07.953: E/SQLiteQuery(23133): exception: library routine called out of sequence; query: SELECT name, firstname, section, row, gravenr, type, workorder, comment FROM orders, graves WHERE orders.id=? AND graves.id=orders.id
10-29 15:21:07.953: E/SQL order detail(23133): android.database.sqlite.SQLiteMisuseException: library routine called out of sequence
10-29 15:21:07.953: E/SQL order detail(23133): android.database.sqlite.SQLiteMisuseException: library routine called out of sequence
10-29 15:21:07.953: E/SQL order detail(23133):  at android.database.sqlite.SQLiteQuery.nativeFillWindow(Native Method)
10-29 15:21:07.953: E/SQL order detail(23133):  at android.database.sqlite.SQLiteQuery.fillWindow(SQLiteQuery.java:86)
10-29 15:21:07.953: E/SQL order detail(23133):  at android.database.sqlite.SQLiteCursor.fillWindow(SQLiteCursor.java:164)
10-29 15:21:07.953: E/SQL order detail(23133):  at android.database.sqlite.SQLiteCursor.getCount(SQLiteCursor.java:156)
10-29 15:21:07.953: E/SQL order detail(23133):  at android.database.AbstractCursor.moveToPosition(AbstractCursor.java:161)
10-29 15:21:07.953: E/SQL order detail(23133):  at android.database.AbstractCursor.moveToFirst(AbstractCursor.java:201)
10-29 15:21:07.953: E/SQL order detail(23133):  at de.l_one.app.shaufel.OrderDetailView$3.run(OrderDetailView.java:138)

10-29 15:22:52.983: E/AndroidRuntime(23133): FATAL EXCEPTION: Thread-1411
10-29 15:22:52.983: E/AndroidRuntime(23133): java.lang.IllegalStateException: database /data/data/de.l_one.app.shaufel/databases/poidatabase (conn# 0) already closed
10-29 15:22:52.983: E/AndroidRuntime(23133):    at android.database.sqlite.SQLiteDatabase.verifyDbIsOpen(SQLiteDatabase.java:2082)
10-29 15:22:52.983: E/AndroidRuntime(23133):    at android.database.sqlite.SQLiteCompiledSql.<init>(SQLiteCompiledSql.java:58)
10-29 15:22:52.983: E/AndroidRuntime(23133):    at android.database.sqlite.SQLiteProgram.compileSql(SQLiteProgram.java:143)
10-29 15:22:52.983: E/AndroidRuntime(23133):    at android.database.sqlite.SQLiteProgram.compileAndbindAllArgs(SQLiteProgram.java:361)
10-29 15:22:52.983: E/AndroidRuntime(23133):    at android.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java:127)
10-29 15:22:52.983: E/AndroidRuntime(23133):    at android.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java:94)
10-29 15:22:52.983: E/AndroidRuntime(23133):    at android.database.sqlite.SQLiteQuery.<init>(SQLiteQuery.java:53)
10-29 15:22:52.983: E/AndroidRuntime(23133):    at android.database.sqlite.SQLiteDirectCursorDriver.query(SQLiteDirectCursorDriver.java:47)
10-29 15:22:52.983: E/AndroidRuntime(23133):    at android.database.sqlite.SQLiteDatabase.rawQueryWithFactory(SQLiteDatabase.java:1564)
10-29 15:22:52.983: E/AndroidRuntime(23133):    at android.database.sqlite.SQLiteDatabase.rawQuery(SQLiteDatabase.java:1538)
10-29 15:22:52.983: E/AndroidRuntime(23133):    at de.l_one.app.shaufel.OrderDetailView$3.run(OrderDetailView.java:132) 
```

这些不是一次性抛出的，而是（看起来是）随机抛出的。抛出哪个异常没有模式，有时根本没有抛出异常。
我在我的应用程序的任何地方都使用相同的方法，并且它没有任何问题。我没有最小的线索`IllegalStateException`来自哪里，因为数据库没有关闭，至少我没有。（根据一些关于 SO 的答案是可以的，在某些情况下甚至比手动关闭你的数据库更可取）。

代码注释：
`ShaufelDatabaseHelper`是一个扩展`SQLiteOpenHelper`. 它用于通常工作的不同活动，这似乎是唯一的例外。

我刚刚在第二台设备上进行了测试，没有抛出异常并且一切正常。
抛出异常的设备是运行 android 4.0.3 的 lenovo thinkpad。
没有异常运行的是运行 Android 2.3.4 的 HTC Sensation Z710e。

有谁知道可能导致这种情况的原因？

E：我不知道它是否有帮助，但这是在之前记录的`SQLiteMisuseException`：

```
10-29 16:07:46.530: I/SqliteDatabaseCpp(23728): sqlite returned: error code = 21, msg = API called with NULL prepared statement, db=/data/data/de.l_one.app.shaufel/databases/poidatabase
10-29 16:07:46.530: I/SqliteDatabaseCpp(23728): sqlite returned: error code = 21, msg = misuse at line 58929 of [8609a15dfa], db=/data/data/de.l_one.app.shaufel/databases/poidatabase
10-29 16:07:46.530: I/SqliteDatabaseCpp(23728): sqlite returned: error code = 21, msg = API call with invalid database connection pointer, db=/data/data/de.l_one.app.shaufel/databases/poidatabase
10-29 16:07:46.530: I/SqliteDatabaseCpp(23728): sqlite returned: error code = 21, msg = misuse at line 106340 of [8609a15dfa], db=/data/data/de.l_one.app.shaufel/databases/poidatabase
10-29 16:07:46.530: I/SqliteDatabaseCpp(23728): sqlite returned: error code = 21, msg = API call with invalid database connection pointer, db=/data/data/de.l_one.app.shaufel/databases/poidatabase
10-29 16:07:46.530: I/SqliteDatabaseCpp(23728): sqlite returned: error code = 21, msg = misuse at line 106271 of [8609a15dfa], db=/data/data/de.l_one.app.shaufel/databases/poidatabase 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-23T14:30:35.890

### 原因

如果有任何机会另一个线程在您调用之间`getReadableDatabase()`和`rawQuery()`或在`rawQuery()`您执行期间关闭了数据库，则会收到此异常。这是因为你`SQLiteOpenHelper`是一个单例（它应该是），这意味着如果某个其他线程关闭了数据库，`mDatabase`那么持有数据库连接的单个内部成员将被关闭。

### 我的建议：

对您的衍生产品实施您自己的`close()`方法。在您的实现中，在实际关闭它（调用）`SQLiteOpenHelper`之前检查打开的连接的引用计数。`SQLiteOpenHelper.close()`

```
private int openedConnections = 0;
//...
public synchronized SQLiteDatabase getReadableDatabase() {
    openedConnections++;
    getReadableDatabase();
}

public synchronized void close() {
    openedConnections--;
    if (openedConnections == 0) {
        close();
    }
} 
```

让我知道它是否有效！:)

# jquery - ScrollTo 在每次点击时覆盖更远的距离

> ID：13124261
> 
> 赞同：1
> 
> 时间：2012-10-29T15:05:32.233
> 
> 标签：jquery, slider, scrollto, jquery-ui-slider

嗨，我希望有人可以提供帮助。

我正在使用 ScrollTo jquery 插件，每次单击向左滚动时，它都会逐渐覆盖更大的距离。相反，单击以向右滚动将项目返回以另一种方式逐渐覆盖较小的距离。

[您可以在此处](http://psd2htmlservice.com/scrolltest/index2.html)查看示例

我想知道人们是否可以查看源代码以更好地了解正在发生的事情，但我用来调用该函数的实际代码是这样的

```
$(document).ready(function() { 
    $("#streetstyles_right_arrow").click(function() {
        $("#streetstyles-pane").scrollTo({top:'+=0px',left:'+=470px'}, 370);
        $("#streetstyles-pane2").scrollTo({top:'+=0px',left:'+=470px'}, 370);
    });

    $("#streetstyles_left_arrow").click(function(){
        $("#streetstyles-pane").scrollTo({top:'+=0px',left:'-=470px'}, 370);
        $("#streetstyles-pane2").scrollTo({top:'+=0px',left:'-=470px'}, 370);
    });         
}); 
```

任何帮助将非常感激。

jQuery ScrollTo 在每次点击时覆盖更大的距离。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T15:15:32.520

把`document.ready`代码改成这样...

```
$(document).ready(function() {
    $("#streetstyles_right_arrow").click(function(){
        $("#streetstyles-pane").scrollTo({top:'+=0px',left:'+=460px'}, 370);
        $("#streetstyles-pane2").scrollTo({top:'+=0px',left:'+=480px'}, 370);
    });

    $("#streetstyles_left_arrow").click(function(){
        $("#streetstyles-pane").scrollTo({top:'+=0px',left:'-=460px'}, 370);
        $("#streetstyles-pane2").scrollTo({top:'+=0px',left:'-=480px'}, 370);
    });
}); 
```

第一个窗格滚动得太远，第二个窗格滚动得不够远。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T15:10:31.690

你滚动得太远了。如果要滚动`470px`，则框的宽度应为`460px`（+`5px`右边距，+`5px`右边距）。它们当前的宽度是`450px`。

或者，将滚动宽度减小 10 像素。

# networking - 前端应该限制列表大小还是后端？

> ID：13124269
> 
> 赞同：0
> 
> 时间：2012-10-29T15:06:13.990
> 
> 标签：networking, language-agnostic

所以我有一个对象列表，这些对象在我的应用程序的后端处理，然后传递到前端用于显示目的。但是，我最多只想显示列表中的 4 个项目。我的问题是 - 我应该在后端剪辑列表还是应该将整个列表传递到前端并允许它剪辑列表？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T15:08:19.033

当然，在后端，要去掉不需要的网络传输。您需要为所有前端执行一次。

我认为没有更适合在前端执行此操作的实际用例，因为即使后端没有修剪并因此节省了一点 CPU，更多的处理是由后端底层操作系统将冗余字节传输到客户端。

# embedded - 通过 /dev/mem 驱动 Beaglebone GPIO

> ID：13124271
> 
> 赞同：29
> 
> 时间：2012-10-29T15:06:21.727
> 
> 标签：embedded, embedded-linux, mmap, gpio

我正在尝试编写一个 C 程序来闪烁 Beaglebone 上的 LED。我知道我可以使用 sysfs 方式……但我想看看是否可以通过 /dev/mem 映射物理地址空间获得相同的结果。

我有一个头文件 beaglebone_gpio.h ，内容如下：

```
#ifndef _BEAGLEBONE_GPIO_H_
#define _BEAGLEBONE_GPIO_H_

#define GPIO1_START_ADDR 0x4804C000
#define GPIO1_END_ADDR 0x4804DFFF
#define GPIO1_SIZE (GPIO1_END_ADDR - GPIO1_START_ADDR)
#define GPIO_OE 0x134
#define GPIO_SETDATAOUT 0x194
#define GPIO_CLEARDATAOUT 0x190

#define USR0_LED (1<<21)
#define USR1_LED (1<<22)
#define USR2_LED (1<<23)
#define USR3_LED (1<<24)

#endif 
```

然后我有我的 C 程序 gpiotest.c

```
#include <stdio.h>
#include <stdlib.h>
#include <sys/mman.h>
#include <sys/stat.h>
#include <fcntl.h> 
#include "beaglebone_gpio.h"

int main(int argc, char *argv[]) {
    volatile void *gpio_addr = NULL;
    volatile unsigned int *gpio_oe_addr = NULL;
    volatile unsigned int *gpio_setdataout_addr = NULL;
    volatile unsigned int *gpio_cleardataout_addr = NULL;
    unsigned int reg;
    int fd = open("/dev/mem", O_RDWR);

    printf("Mapping %X - %X (size: %X)\n", GPIO1_START_ADDR, GPIO1_END_ADDR, GPIO1_SIZE);

    gpio_addr = mmap(0, GPIO1_SIZE, PROT_READ | PROT_WRITE, MAP_SHARED, fd, GPIO1_START_ADDR);

    gpio_oe_addr = gpio_addr + GPIO_OE;
    gpio_setdataout_addr = gpio_addr + GPIO_SETDATAOUT;
    gpio_cleardataout_addr = gpio_addr + GPIO_CLEARDATAOUT;

    if(gpio_addr == MAP_FAILED) {
        printf("Unable to map GPIO\n");
        exit(1);
    }
    printf("GPIO mapped to %p\n", gpio_addr);
    printf("GPIO OE mapped to %p\n", gpio_oe_addr);
    printf("GPIO SETDATAOUTADDR mapped to %p\n", gpio_setdataout_addr);
    printf("GPIO CLEARDATAOUT mapped to %p\n", gpio_cleardataout_addr);

    reg = *gpio_oe_addr;
    printf("GPIO1 configuration: %X\n", reg);
    reg = reg & (0xFFFFFFFF - USR1_LED);
    *gpio_oe_addr = reg;
    printf("GPIO1 configuration: %X\n", reg);

    printf("Start blinking LED USR1\n");
    while(1) {
        printf("ON\n");
        *gpio_setdataout_addr= USR1_LED;
        sleep(1);
        printf("OFF\n");
        *gpio_cleardataout_addr = USR1_LED;
        sleep(1);
    }

    close(fd);
    return 0;
} 
```

输出是：

```
Mapping 4804C000 - 4804DFFF (size: 1FFF)
GPIO mapped to 0x40225000
GPIO OE mapped to 40225134
GPIO SEDATAOUTADDR mapped to 0x40225194
GPIO CLEARDATAOUTADDR mapped to 0x40225190
GPIO1 configuration: FE1FFFFF
GPIO1 configuratino: FE1FFFFF
Start blinking LED USR1
ON
OFF
ON
OFF
... 
```

但我看不到 LED 闪烁。

从程序的输出中可以看出，配置是正确的，FE1FFFFF 是一致的，因为 GPIO1_21、GPIO1_22、GPIO1_23 和 GPIO1_24 被配置为输出，每个都驱动一个 LED。

关于原因的任何想法？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-12-07T21:29:47.820

当心。乍一看这很有效，但它直接写入 GPIO 控制器驱动程序认为它拥有的寄存器。这将导致奇怪且难以追踪的副作用，无论是在此 GPIO 线路上还是在同一组中的 GPIO 上。为此，您需要从内核 GPIO 驱动程序中禁用整个组。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-08-01T18:22:55.213

修复方法是：

```
pio_addr = mmap(0, GPIO1_SIZE, PROT_READ | PROT_WRITE, MAP_SHARED, fd, GPIO1_START_ADDR); 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-01-02T00:53:28.547

原始帖子中显示的代码不适用于最新的 Beaglebone Black 及其相关的 3.12 内核。控制寄存器偏移量似乎发生了变化；验证以下代码可以正常工作：

```
#define GPIO0_BASE 0x44E07000
#define GPIO1_BASE 0x4804C000
#define GPIO2_BASE 0x481AC000
#define GPIO3_BASE 0x481AE000

#define GPIO_SIZE  0x00000FFF

// OE: 0 is output, 1 is input
#define GPIO_OE 0x14d
#define GPIO_IN 0x14e
#define GPIO_OUT 0x14f

#define USR0_LED (1<<21)
#define USR1_LED (1<<22)
#define USR2_LED (1<<23)
#define USR3_LED (1<<24)

int mem_fd;
char *gpio_mem, *gpio_map;

// I/O access
volatile unsigned *gpio;

static void io_setup(void)
{
    // Enable all GPIO banks
    // Without this, access to deactivated banks (i.e. those with no clock source set up) will (logically) fail with SIGBUS
    // Idea taken from https://groups.google.com/forum/#!msg/beagleboard/OYFp4EXawiI/Mq6s3sg14HoJ
    system("echo 5 > /sys/class/gpio/export");
    system("echo 65 > /sys/class/gpio/export");
    system("echo 105 > /sys/class/gpio/export");

    /* open /dev/mem */
    if ((mem_fd = open("/dev/mem", O_RDWR|O_SYNC) ) < 0) {
            printf("can't open /dev/mem \n");
            exit (-1);
    }

    /* mmap GPIO */
    gpio_map = (char *)mmap(
            0,
            GPIO_SIZE,
            PROT_READ|PROT_WRITE,
            MAP_SHARED,
            mem_fd,
            GPIO1_BASE
    );

    if (gpio_map == MAP_FAILED) {
            printf("mmap error %d\n", (int)gpio_map);
            exit (-1);
    }

    // Always use the volatile pointer!
    gpio = (volatile unsigned *)gpio_map;

    // Get direction control register contents
    unsigned int creg = *(gpio + GPIO_OE);

    // Set outputs
    creg = creg & (~USR0_LED);
    creg = creg & (~USR1_LED);
    creg = creg & (~USR2_LED);
    creg = creg & (~USR3_LED);

    // Set new direction control register contents
    *(gpio + GPIO_OE) = creg;
}

int main(int argc, char **argv)
{
    io_setup();
    while (1) {
        // Set LEDs
        *(gpio + GPIO_OUT) = *(gpio + GPIO_OUT) | USR0_LED;
        *(gpio + GPIO_OUT) = *(gpio + GPIO_OUT) | USR1_LED;
        *(gpio + GPIO_OUT) = *(gpio + GPIO_OUT) | USR2_LED;
        *(gpio + GPIO_OUT) = *(gpio + GPIO_OUT) | USR3_LED;

        sleep(1);

        // Clear LEDs
        *(gpio + GPIO_OUT) = *(gpio + GPIO_OUT) & (~USR0_LED);
        *(gpio + GPIO_OUT) = *(gpio + GPIO_OUT) & (~USR1_LED);
        *(gpio + GPIO_OUT) = *(gpio + GPIO_OUT) & (~USR2_LED);
        *(gpio + GPIO_OUT) = *(gpio + GPIO_OUT) & (~USR3_LED);

        sleep(1);
    }

    return 0;
} 
```

我在这里发布这个，因为看起来 mmap-ed 访问停止在 3.8 内核周围工作，从那时起没有人发布过有效的解决方案。我不得不使用 /sys/class/gpio 接口对控制寄存器偏移进行逆向工程；我希望这个答案可以减少一些与使用 BeagleBone GPIO 和较新内核相关的挫败感。

该代码是在 BSD 许可下获得许可的——在任何地方都可以随意使用它。

编辑：user3078565 在上面的回答中是正确的。您需要禁用默认的用户 LED GPIO 驱动程序，方法是将其触发器设置为无，或者通过编辑设备树将它们完全隐藏在内核中。不这样做会导致 LED 按预期闪烁，但有时它们的状态也会被内核 GPIO 驱动程序覆盖。

这对我的原始应用程序来说不是问题，因为它使用 GPIO bank 0，内核 GPIO 驱动程序很大程度上忽略了它。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-02-08T03:00:03.237

您可能还需要为您尝试在用户空间中控制的任何硬件启用时钟。幸运的是，您可以使用 dev/mem 和 mmap() 来调整特定硬件的时钟控制寄存器，就像我编写的启用 SPI0 的代码一样：（定义值都来自 spruh73i.pdf 寄存器描述）

```
#define CM_PER_BASE     0x44E00000  /* base address of clock control regs */
#define CM_PER_SPI0_CLKCTRL     0x4C        /* offset of SPI0 clock control reg */

#define SPIO_CLKCTRL_MODE_ENABLE 2          /* value to enable SPI0 clock */

int mem;            // handle for /dev/mem

int  InitSlaveSPI(void) // maps the SPI hardware into user space
{
    char *pClockControl;    // pointer to clock controlregister block (virtualized by OS)
    unsigned int value;

    // Open /dev/mem:
    if ((mem = open ("/dev/mem", O_RDWR | O_SYNC)) < 0)
    {
        printf("Cannot open /dev/mem\n");
        return 1;
    }
    printf("Opened /dev/mem\n");

    // map a pointer to the clock control block:
    pClockControl = (char *)mmap(0, 4096, PROT_READ|PROT_WRITE, MAP_SHARED, mem, CM_PER_BASE);

    if(pClockControl == (char *)0xFFFFFFFF) 
    {
        printf("Memory map failed. error %i\n", (uint32_t)pClockControl);
        close( mem );
        return 2;
    }

    value = *(uint32_t *)(pClockControl + CM_PER_SPI0_CLKCTRL);
    printf("CM_PER_SPI0_CLKCTRL was 0x%08X\n", value);

    *(uint32_t *)(pClockControl + CM_PER_SPI0_CLKCTRL) = SPIO_CLKCTRL_MODE_ENABLE;

    value = *(uint32_t *)(pClockControl + CM_PER_SPI0_CLKCTRL);
    printf("CM_PER_SPI0_CLKCTRL now 0x%08X\n", value);

    munmap( pClockControl, 4096 );              // free this memory map element 
```

一旦我执行了这个代码片段，我就可以使用另一个 mmap() 指针访问 SPI0 寄存器。如果我不首先启用 SPI0 模块时钟，那么当我尝试访问这些 SPI 寄存器时会出现总线错误。启用时钟是持久的：一旦以这种方式启用，它就会一直保持下去，直到您禁用它，或者直到您使用 spidev 然后关闭它，或重新启动。因此，如果您的应用程序使用您启用的硬件完成，您可能希望禁用它以节省电量。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-12-02T08:33:03.747

用于启用 GPIO bank....

```
enableClockModules () {
    // Enable disabled GPIO module clocks.
    if (mapAddress[(CM_WKUP_GPIO0_CLKCTRL - MMAP_OFFSET) / GPIO_REGISTER_SIZE] & IDLEST_MASK) {
      mapAddress[(CM_WKUP_GPIO0_CLKCTRL - MMAP_OFFSET) / GPIO_REGISTER_SIZE] |= MODULEMODE_ENABLE;
      // Wait for the enable complete.
      while (mapAddress[(CM_WKUP_GPIO0_CLKCTRL - MMAP_OFFSET) / GPIO_REGISTER_SIZE] & IDLEST_MASK);
    }
    if (mapAddress[(CM_PER_GPIO1_CLKCTRL - MMAP_OFFSET) / GPIO_REGISTER_SIZE] & IDLEST_MASK) {
      mapAddress[(CM_PER_GPIO1_CLKCTRL - MMAP_OFFSET) / GPIO_REGISTER_SIZE] |= MODULEMODE_ENABLE;
      // Wait for the enable complete.
      while (mapAddress[(CM_PER_GPIO1_CLKCTRL - MMAP_OFFSET) / GPIO_REGISTER_SIZE] & IDLEST_MASK);
    }
    if (mapAddress[(CM_PER_GPIO2_CLKCTRL - MMAP_OFFSET) / GPIO_REGISTER_SIZE] & IDLEST_MASK) {
      mapAddress[(CM_PER_GPIO2_CLKCTRL - MMAP_OFFSET) / GPIO_REGISTER_SIZE] |= MODULEMODE_ENABLE;
      // Wait for the enable complete.
      while (mapAddress[(CM_PER_GPIO2_CLKCTRL - MMAP_OFFSET) / GPIO_REGISTER_SIZE] & IDLEST_MASK);
    }
    if (mapAddress[(CM_PER_GPIO3_CLKCTRL - MMAP_OFFSET) / GPIO_REGISTER_SIZE] & IDLEST_MASK) {
      mapAddress[(CM_PER_GPIO3_CLKCTRL - MMAP_OFFSET) / GPIO_REGISTER_SIZE] |= MODULEMODE_ENABLE;
      // Wait for the enable complete.
      while (mapAddress[(CM_PER_GPIO3_CLKCTRL - MMAP_OFFSET) / GPIO_REGISTER_SIZE] & IDLEST_MASK);
    }
} 
```

在哪里...

MMAP_OFFSET = 0x44C00000

MMAP_SIZE = 0x481AEFFF - MMAP_OFFSET

GPIO_REGISTER_SIZE = 4

MODULEMODE_ENABLE = 0x02

IDLEST_MASK = (0x03 << 16)

CM_WKUP = 0x44E00400

CM_PER = 0x44E00000

CM_WKUP_GPIO0_CLKCTRL = (CM_WKUP + 0x8)

CM_PER_GPIO1_CLKCTRL = (CM_PER + 0xAC)

CM_PER_GPIO2_CLKCTRL = (CM_PER + 0xB0)

CM_PER_GPIO3_CLKCTRL = (CM_PER + 0xB4)

我写了一个[小库](https://github.com/facine/easyBlack)，也许你可能会感兴趣。目前仅适用于数字引脚。

问候

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-10-23T11:37:24.577

REF: madscientist159

```
// OE: 0 is output, 1 is input
#define GPIO_OE 0x14d
#define GPIO_IN 0x14e
#define GPIO_OUT 0x14f
should be
// OE: 0 is output, 1 is input
#define GPIO_OE 0x4d
#define GPIO_IN 0x4e
#define GPIO_OUT 0x4f 
```

unsigned int 偏移地址派生自 unsigned char 地址

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-10-30T16:39:10.027

这种异常似乎是 AM335x 芯片中地址解码不完整造成的。有意义的是，0x4D、0x4E 和 0x4F 作为访问这些寄存器的基地址的偏移量。C/C++ 指针算法将这些偏移量乘以 4 以产生 0x134、0x138 和 0x13C 的真实偏移量。但是，可以通过 0x14D、0x14E 和 0x14F 访问这些寄存器的“影子”副本。我已经验证了两组偏移量都有效。我没有费心尝试 0x24D 等。

可以使用偏移量 0x64 访问 GPIO_CLEARDATAOUT 寄存器，并且可以使用偏移量 0x65 访问 GPIO_SETDATAOUT 寄存器。

# registry - 使用 WMI 的 Microsoft 产品许可证密钥

> ID：13124274
> 
> 赞同：1
> 
> 时间：2012-10-29T15:06:23.373
> 
> 标签：registry, wmi, license-key, product-key

我一直在徒劳地寻找一个 WMI 脚本，它允许我检索用于安装在机器上的 Microsoft 产品的产品许可证密钥（例如 xxxxx-xxxxx-xxxxx-xxxx-xxxxx）。这包括诸如 Sharepoint、SQL Server 和 Exchange 之类的产品，但我似乎能够找到的只是用于检索实际 Windows 许可证密钥的脚本。

到目前为止我尝试过的（***必须是 WMI，所以请不要使用 powerscript***）：

1.  尝试了 win32_product 类，但我感兴趣的字段（productid）在 windows2003 上不存在，我有一个混合（30% 到 70%）windows 2008 与 windows 2003 服务器
2.  尝试去注册表，但产品密钥没有标准化的位置，由此产生的解决方案将非常“讨厌”，但如果这是我不得不考虑的唯一方法

这样做的原因：我必须检查大量（> 200 台机器）并列出每台机器上用于上述 Microsoft 产品的许可证以进行审计。

任何帮助将不胜感激，即使是可以为我指明正确方向的资源。或者，如果 Microsoft 有能够做到这一点的产品，我也会对此感兴趣，但一等奖将是 WMI 脚本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T17:17:15.943

@Lizz，做出了最有帮助的贡献，并且刚刚证实了我的担忧，即如果我想完成这项工作，它将涉及手动搜索注册表中的各个位置以查找每种类型的 Microsoft 产品。

所以我要做的是使用她提到的工具并监控它访问的注册表部分。然后，我将把它与她为 Sharepoint 提供的 URL 结合起来，并浏览可能存储密钥的各个位置。肮脏，但它会工作

# java - 在循环下从数组填充jtable

> ID：13124276
> 
> 赞同：1
> 
> 时间：2012-10-29T15:06:31.483
> 
> 标签：java, arrays, swing, loops

在每个循环中，它从某个文件收集信息并将其内容存储在一个数组中。然后，该数组应在表上的每个循环中创建一个新行。我的问题是，它只创建 1 行。我怎样才能解决这个问题？

```
for (int i = 0; i < listOfFiles.length; i++) 
    {
        if (listOfFiles[i].isFile()) 
        {
            files = listOfFiles[i].getName();

            SimpleDateFormat sdf = new SimpleDateFormat("MM/dd/yyyy HH:mm:ss");
            iCount = humanReadableByteCount(listOfFiles[i].length(), true);

            if (files.toLowerCase().endsWith(".mp3"))
            {
                //jTextArea1.append("File name: " + files + " | Last Modified: " + sdf.format(listOfFiles[i].lastModified()) + " | Lenght: " + iCount + "\n");

                Object rowData[] = { files, sdf.format(listOfFiles[i].lastModified()), iCount };
                Object columnNames[] = { "Name", "Last Modified", "Size" };
                DefaultTableModel model = new DefaultTableModel(columnNames, 0);
                model.addRow(rowData);
                jTable1.setModel(model);
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T15:08:03.197

在循环外创建模型。也将表模型设置在循环之外。

在循环中唯一要做的就是将新行添加到模型中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T15:18:14.107

每次循环循环时都会创建一个新模型。因此，每次，您都有一个新的空模型，并在空模型中添加 1 行。

它应该是这样的：

```
Object columnNames[] = { "Name", "Last Modified", "Size" };
DefaultTableModel model = new DefaultTableModel(columnNames);
jTable1.setModel(model);
SimpleDateFormat sdf = new SimpleDateFormat("MM/dd/yyyy HH:mm:ss");
for (int i = 0; i < listOfFiles.length; i++) 
    {
        if (listOfFiles[i].isFile() && listOfFiles[i].getName().toLowerCase().endsWith(".mp3")) 
        {
            files = listOfFiles[i].getName();
            iCount = humanReadableByteCount(listOfFiles[i].length(), true);
            model.addRow(new Object[]{ files, sdf.format(listOfFiles[i].lastModified()), iCount });
        }
    } 
```

# django - Django 显示列表中项目的附加信息

> ID：13124278
> 
> 赞同：1
> 
> 时间：2012-10-29T15:06:33.630
> 
> 标签：django, templates

我有一个问题，我不知道解决它的*正确方法。*

基本上，我有一个模式，称为任务：

```
class Task(models.Model):
    #mto1: many task made of one template
    template = models.ForeignKey(Template)
    STATUS_CHOISE = (('PR', 'In process'), ('ST', 'Stopped'), ('FN', 'Finished'), ('DL', 'Deleted'),)
    status = models.CharField(max_length=2, choices=STATUS_CHOISE, default='ST')
    responses_required = models.IntegerField(default=0)
    date_deadline = models.DateTimeField(auto_now=False, auto_now_add=False)
    date_created = models.DateTimeField(auto_now_add=True, auto_now=False) 
```

可以有几个答案

```
class Response(models.Model):
    #mto1: many Responses generated for one task
    task = models.ForeignKey(Template)
    STATUS_CHOISE = (('PR', 'Process'), ('FN', 'Finished'))
    status = models.CharField(max_length=2, choices=STATUS_CHOISE, default='ST')
    date_finished= models.DateTimeField(auto_now_add=False, auto_now=True)
    date_created = models.DateTimeField(auto_now_add=True, auto_now=False)
    ip_address=models.IPAddressField() 
```

现在，我想显示一个用户的所有任务（来自模板模型，并且已经完成）以及有关答案的其他信息，这些信息是 - 给出的答案数量（所以哪个状态是 = FN） - 数量总答案（状态 FN 或 PR）-也许还有一些额外的信息。

我做了这个

```
@login_required
def TemplateList(request):
    task_list = Task.objects.filter(user=request.user)
    return render_to_response('task_list.html',{'task_list':task_list}, context_instance=RequestContext(request)) 
```

但这只是显示模型中存在的数据，我要计算的值呢？

到目前为止，我使用 CustomTag 完成了它，但它似乎不是一个干净的解决方案。我宁愿在视图中执行逻辑，然后仅使用模板来显示结果。但是：如何将此值添加到任务列表的每个项目中？

我是否必须这样做： [将附加数据传递给 Django 中的模板，](https://stackoverflow.com/questions/12129906/passing-additional-data-to-a-template-in-django)以便从头开始创建对象（这也需要我在模板中使用一些逻辑，因为我必须将列表中的值与我创建的对象匹配)? 还是有更好的解决方案？

我以这种方式尝试了通用视图，例如 list_detail.object_list

```
def TaskListDetail(request):
return list_detail.object_list(
    request,
    queryset = Task.objects.filter(user=request.user),
    template_name = 'task_list.html',
    template_object_name = 'task_list',

) 
```

但首先，它不显示任何内容（而另一个视图显示数据），其次我不知道如何以与列表项匹配的方式添加额外数据。

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T01:03:57.787

您可以向模型添加方法。

```
class Task(models.Model):
   #mto1: many task made of one template
   template = models.ForeignKey(Template)
   STATUS_CHOISE = (('PR', 'In process'), ('ST', 'Stopped'), ('FN', 'Finished'), ('DL', 'Deleted'),)
   status = models.CharField(max_length=2, choices=STATUS_CHOISE, default='ST')
   responses_required = models.IntegerField(default=0)
   date_deadline = models.DateTimeField(auto_now=False, auto_now_add=False)
   date_created = models.DateTimeField(auto_now_add=True, auto_now=False)

   def do_some_calculation(self):
       #make funny things
       return "foo" 
```

在您的模板中，您可以通过以下方式访问它：

```
{% for taks in task_list %}
   {{ task.do_some_calculation }}
{% endfor %} 
```

# mysql - MYSQL查询返回空结果

> ID：13124279
> 
> 赞同：2
> 
> 时间：2012-10-29T15:06:36.523
> 
> 标签：mysql

我需要查找用户的电子邮件首选项。

此表包含用户可以接收的电子邮件类型，按类别细分。

```
email_preferences_categories

+----------+------------------+------+-----+---------+----------------+
| Field    | Type             | Null | Key | Default | Extra          |
+----------+------------------+------+-----+---------+----------------+
| id       | int(10) unsigned | NO   | PRI | NULL    | auto_increment |
| name     | text             | YES  |     | NULL    |                |
| overview | text             | YES  |     | NULL    |                |
+----------+------------------+------+-----+---------+----------------+ 
```

此表包含他们对接收各种类型的偏好。如果他们尚未设置首选项，则此表将没有任何行。

```
email_preferences

+------------+---------------------------------+------+-----+---------+----------------+
| Field      | Type                            | Null | Key | Default | Extra          |
+------------+---------------------------------+------+-----+---------+----------------+
| id         | int(10) unsigned                | NO   | PRI | NULL    | auto_increment |
| user_id    | int(10) unsigned                | NO   |     | NULL    |                |
| name       | text                            | YES  |     | NULL    |                |
| frequency  | enum('Daily','Monthly','None')  | YES  |     | Daily   |                |
+------------+---------------------------------+------+-----+---------+----------------+ 
```

我需要构建一个 MYSQL 查询，该查询返回与给定用户的电子邮件首选项相对应的名称和频率。

```
SELECT name, frequency
FROM email_preferences
LEFT JOIN email_preferences_categories using (name)
WHERE user_id = 42 
```

我遇到问题的地方：如果用户没有设置他们的偏好，这个查询不会返回任何行。我希望它为缺少的电子邮件类别返回默认的“每日”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T15:09:07.317

更改`LEFT JOIN`为`RIGHT JOIN`。

```
...
FROM email_preferences
RIGHT JOIN email_preferences_categories
... 
```

或者，您可以交换表格：

```
...
FROM email_preferences_categories
LEFT JOIN email_preferences
... 
```

这两个选项都做同样的事情——确保`email_preferences_categories`即使在`email_preferences`.

您还需要更改您已经注意到的连接条件。

* * *

> 我希望它为缺少的电子邮件类别返回默认的“每日”。

您可以使用[`IFNULL`](http://dev.mysql.com/doc/refman/5.6/en/control-flow-functions.html#function_ifnull)：

```
SELECT name, IFNULL(frequency, 'Daily') AS frequency 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T16:02:05.160

此查询不需要 WHERE 子句。它需要更严格的 JOIN。这是与上面的 Mark Byers 答案相结合的完整查询。

```
SELECT email_preferences_categories.name, IFNULL(frequency, 'Daily') AS frequency
FROM email_preferences_categories
LEFT JOIN email_preferences
    ON email_preferences.name = email_preferences_categories.name
    AND user_id = 42; 
```

# sql-server-2008 - SSRS 'rsAccessed Denied' 用于安全中的用户

> ID：13124280
> 
> 赞同：1
> 
> 时间：2012-10-29T15:06:39.377
> 
> 标签：sql-server-2008, reporting-services

我在 SSRS 和安全设置方面遇到了一个有趣的问题。我在 Windows Server 2008 机器上安装了 2008 R2。所有用户都使用他们的活动目录凭据登录到他们的工作站，有些是本地管理员，有些只是标准用户。我以 DOMAIN\administrator 身份访问管理站点或目录站点都没有问题。

我将所有报告、文件夹和数据源设置为继承服务器上的安全设置，但是当我转到用户计算机并输入服务器地址（主机/报告服务器）时，我得到 rsAccess Denied DOMAIN\USER 用户权限不足.

根据我读过的帖子，我尝试了许多不同的方法。

*   将 NT Authority\Authenticated Users 和 NT Authority\Network Service 添加到安全权限
*   授予用户在报表服务器上的“管理员”级别访问权限
*   在工作站上禁用 UAC

我读到以管理员身份启动 IE 可能会解决问题。那将要求所有用户都是本地管理员，不是吗？我认为这是一个不可接受的解决方案。

与往常一样，我感谢任何人都可以提供的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T03:51:59.970

1）将用户名（域\用户名）添加到文件夹设置（新角色分配-->浏览器）

的报告经理。这将允许访问报告管理器上的所有文件夹。

例如，如果您的用户名是 (domain\rocky)，则将此 domain\rocky 添加到报告管理器。

2) 确保用户名(domain\rocky) 存在于 windows 活动目录中。

3) 出于安全原因：不要向用户提供管理员权限。

# java - 在 DOM 中使用 clondNode() 方法更改它复制的元素时，元素副本是否会被更改？

> ID：13124286
> 
> 赞同：0
> 
> 时间：2012-10-29T15:07:05.770
> 
> 标签：java, dom

当我使用 DOM 将 java 对象序列化为 xml 文件时，在尝试复制元素时遇到了问题。

我想生成两个xml文件，第一个只包含一个子元素，第二个包含两个子元素（实际上是复制元素）。

因此，xml 文件应该是：

```
1.xml
<fruit>
    <apple name="XXX"/>
</fruit>

2.xml
<fruit>
    <apple name="XXX"/>
    <apple name="XXX"/>
</fruit> 
```

我使用一个名为“times”的变量来控制一次生成这两个文件。我的代码是这样的： public void static main(String[] args) { DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance(); DocumentBuilder docBuilder = factory.newDocumentBuilder(); 文档 doc = docBuilder.newDocument();

```
 // create the fruit element
    Element fruit = doc.createElement("fruit");
    doc.appendChild(fruit);

    int times = 2;

    Element fruitCopy = (Element)fruit.cloneChild(true);
    for(int i=1; i<=times; i++) {
        fruit = createApples(doc, fruitCopy, i);
        System.out.println(fruitCopy.getChildNodes().getLength());
        // write the output xml file
        ......
    }
}

public Element static createApples(Document doc, Element fruit, int noOfCopies)  {
    for(int j=0; j < noOfCopies; j++) {
        // create apple element
        Element apple = doc.createElement("apple");  
        apple.setAttribute("name",Apple.getName());
        // set other attributes
        ....

        fruit.appendChild(apple);
    }

    return fruit;
} 
```

打印行的输出是：

```
0
2 
```

但是我希望fruitCopy在将它传递给createApple方法时一直为空.....因此，我想要的打印行的输出应该是：

```
0
0 
```

我搜索了 DOM API，它说 clondNode() 方法将从被克隆的不可变元素创建一个可变元素。那么这是否意味着只要修改了原来的“fruit”，那么“fruitCopy”也是如此？

谢谢！！！！！

# c# - 如何在无需创建另一个实例的情况下显示 wpf 窗口

> ID：13124288
> 
> 赞同：0
> 
> 时间：2012-10-29T15:07:06.413
> 
> 标签：c#, wpf, static

（我正在尝试从 wpf 创建自己的自定义 MSGBOX ...）如何在没有此类代码的情况下显示另一个 WPF 窗口

```
WpfWindow w = new WpfWindow();
w.SetBox("hellow world");
w.ShowDialog(); 
```

但是我找到了一种减少代码的方法，但我仍然需要创建另一个实例（这是资源的浪费）

```
new WpfWindow().ShowBox("hellow world"); 
```

ShowBox(string msg) 方法：

```
public bool? ShowBox()
{
    SetBox(msg);
    return w.ShowDialog();
} 
```

我想摆脱那个“*新*”代码片段（如果这就是你所说的）

所以...总之...我想知道如何制作***静态***WPF 窗口...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T15:21:16.650

您可以简单地将代码包装在类中的静态方法中：

```
class WpfWindow {

  public static bool? Show(String message) {
    var window = new WpfWindow();
    window.SetBox(message);
    return window.ShowDialog();
  }

} 
```

然后你这样称呼它：

```
var result = WpfWindow.Show("Hello world"); 
```

您可能会反对在每次调用时都会创建一个新的窗口实例，但我认为您无法避免这种情况。您正在使用`ShowDialog`显示模式对话框，并且此对话框将控制权返回给您的代码，它必须关闭。关闭的窗口无法重新打开，每次都必须创建一个新实例。不过这应该不是问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T15:15:20.817

实现单例模式？

```
private static WpfWindow _instance;
public static WpfWindow Instance
{
    get
    {
       if(_instance == null) _instance = new WpfWindow();
       return _instance;
     }
} 
```

呼叫者：

```
WpfWindow.Instance.ShowDialog(); 
```

# jsf-2 - 如何获取自定义组件的父级？

> ID：13124291
> 
> 赞同：1
> 
> 时间：2012-10-29T15:07:18.717
> 
> 标签：jsf-2, facelets

我有一个自定义容器组件，我想像这样使用它：

```
<p:a>A
  <p:a>B</p:a>
</p:a> 
```

那应该生成这个标记：

```
<div>A
    <div>B</div>
</div> 
```

该组件的代码如下。

```
public class TagA extends TagHandler {
    Logger logger = Logger.getLogger(getClass().getName());

    public TagA(TagConfig config) {
        super(config);
    }

    public void apply(FaceletContext ctx, UIComponent parent)
        throws IOException {
        UIComponentBase c = new UIComponentBase() {
                public void encodeBegin(FacesContext ctx) throws IOException {
                    //getParent() always returns UIViewRot
                    logger.info("Parent is: " + getParent().getClass().getName());
                    ResponseWriter w = ctx.getResponseWriter();
                    w.write("<div>");
                    super.encodeBegin(ctx);
                }

                public void encodeEnd(FacesContext ctx) throws IOException {
                    ResponseWriter w = ctx.getResponseWriter();
                    w.write("</div>");

                    super.encodeEnd(ctx);
                }
                // abstract method in base, must override
                public String getFamily() {
                    return "com.mobiarch.nf";
                }
        };
        parent.getChildren().add(c);
        nextHandler.apply(ctx, parent);
    }
} 
```

不幸的是，这会呈现以下标记：

```
<div></div>A
<div></div>B 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T16:00:56.467

对于处于类似情况的其他人，只需开发组件而不是标签。

```
@FacesComponent("my.ComponentA")
public class ComponentA extends UIComponentBase {
    Logger logger = Logger.getLogger(getClass().getName());

    public String getFamily() {
        return "my.custom.component";
    }
    public void encodeBegin(FacesContext ctx) throws IOException {
        super.encodeBegin(ctx);
        logger.info("Component parent is: " + getParent().getClass().getName());
        ResponseWriter w = ctx.getResponseWriter();
        w.write("<div>");
    }

    public void encodeEnd(FacesContext ctx) throws IOException {
        super.encodeEnd(ctx);
        ResponseWriter w = ctx.getResponseWriter();
        w.write("</div>");  
    }
} 
```

在你的 ??.taglib.xml 中注册它

```
<tag>
    <tag-name>a</tag-name>
    <component>
        <component-type>my.ComponentA</component-type>
    </component>
</tag> 
```

# liferay - Liferay - 是用户站点所有者吗？

> ID：13124298
> 
> 赞同：1
> 
> 时间：2012-10-29T15:07:54.117
> 
> 标签：liferay, role, owner

我正在开发 Liferay 6 中的一项功能，我希望它只能由站点所有者访问。如果用户是网站所有者，我有很大的问题。我可以得到如果用户是管理员使用这个

```
if (RoleServiceUtil.hasUserRole(user.getUserId(), companyId,
                "Administrator", true)) {
   //do something
} 
```

当我使用站点所有者而不是管理员时，我会收到此消息`Site Owner is not a regular role`

感谢帮助

-罗马

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T21:18:43.053

最简单的方法是使用`permissionChecker`.

首先，您需要像这样包含一个 TagLib：

```
<%@ taglib uri="http://liferay.com/tld/theme" prefix="liferay-theme" %> 
```

然后您可以在页面上放置一些基本变量（其中之一是`permissionChecker`），如下所示：

```
<liferay-theme:defineObjects /> 
```

然后你可以简单地打电话，

`permissionChecker.isGroupOwner()`或者`permissionChecker.isGroupAdmin()`

# jquery - 在同一位置显示/隐藏跨度

> ID：13124300
> 
> 赞同：2
> 
> 时间：2012-10-29T15:07:56.597
> 
> 标签：jquery, html, jquery-plugins

我正在使用 jQuery 来显示或隐藏跨度。但我希望它`<div>`出现在与我单击的链接相同的位置。当前代码实际上`<div>`在屏幕左侧显示了标签。这是我正在使用的代码。

```
<script>
$(document).ready(function(){
    $(".slidingDiv").hide();
    $(".show_hide").show();
    $('.show_hide').click(function(){
    $(".slidingDiv").slideToggle();
      return false;
    });
    $(".slidingDiv1").hide();
    $(".show_hide1").show();
    $('.show_hide1').click(function(){
    $(".slidingDiv1").slideToggle();
      return false;
    });
});
</script> 
```

跨度标签：

```
<span>
 <a href="#" class="show_hide">Japan</a>
 <span class="slidingDiv">
   <img src="02-1 ImageFiles/01 Japan.JPG" style="width:235px; height:245px;">
   <a href="#" class="show_hide">Close</a>
 </span>
 is made up of islands, regions, prefectures (government districts), cities, and surrounding communities. The main island, Honshu, has thirty-four prefectures making up five regions. The 
 <a class="show_hide1" href="#">Tōhoku Region</a>
 <span class="slidingDiv1">
  <img src="02-1 ImageFiles/02 TohokuRegion.JPG" style="width:217px; height:236px;">
  <a href="#" class="show_hide1">Close</a>
</span> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T17:35:50.497

这可以是您的 HTML 部分：

```
<a href="#" class="show_hide" style="position: relative;">Japan</a>
<span class="slidingDiv" style="position: absolute; left: 0;">
    <img src="02-1 ImageFiles/01 Japan.JPG" style="width: 235px; height: 245px;" />
    <a href="#" class="show_hide_close">Close</a>
</span>
is made up of islands, regions, prefectures (government districts), cities, and surrounding communities. The main island, Honshu, has thirty-four prefectures making up five regions. The
<a class="show_hide" href="#" style="position: relative;">T&#197;hoku Region</a>
<span class="slidingDiv" style="position: absolute; left: 0;">
    <img src="02-1 ImageFiles/02 TohokuRegion.JPG" style="width: 217px; height: 236px;" />
    <a href="#" class="show_hide_close">Close</a>
</span> 
```

这可以是您的脚本部分：

```
<script type="text/javascript">
    $(document).ready(function () {
    $(".slidingDiv").hide();
    $(".show_hide").show();

    $('.show_hide').click(function () {
        var el = $(this);
        var slidingDiv = el.find("span.slidingDiv");
        if (slidingDiv.length > 0) {
            slidingDiv.slideToggle(function () { el.after(slidingDiv); });
        }
        else {
            slidingDiv = el.next("span.slidingDiv");
            el.append(slidingDiv);
            slidingDiv.slideToggle();
        }
        return false;
    });
    $('.show_hide_close').click(function () {
        $(this).parent().parent("a.show_hide").click();
        return false;
    });
}); 
```

解释：

*   该脚本将在单击时将跨度附加到锚点，并在关闭时将其移回其原始位置。原因是您不能在 html 代码中的锚标记中包装块（这里是跨度），所以我们将在运行时进行。我们应该包装它，因为我们需要在锚标签下方显示跨度。

*   包含 img 和关闭按钮的 span 应该有绝对位置

*   将被单击的锚点应该具有相对位置，以便浏览器可以从父锚点计算跨度的位置，因此它现在将位于链接下方

*   我概括了锚和跨度类，所以你可以只用一个脚本块

*   不同的类已分配给关闭按钮，因此单击它将单击父锚点

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-29T15:13:26.843

删除 div 并将跨度设置为**显示：块**

```
<a href="#" class="show_hide">Japan</a>
<a href="#" class="show_hide">Close</a>
<span class="slidingDiv">
    <img src="02-1 ImageFiles/01 Japan.JPG" style="width:235px; height:245px;" />    
</span>

span
{
   display: block;
}​ 
```

[检查小提琴](http://jsfiddle.net/sushanth009/3AfUS/3/)

# iphone - 为什么我使用 UIImage 时 CGsize 太小？

> ID：13124303
> 
> 赞同：0
> 
> 时间：2012-10-29T15:08:16.367
> 
> 标签：iphone, objective-c

我正在尝试加载图像，然后获取它的大小，以便我可以在调整大小算法中使用它。

当我在 ViewdidLoad 中使用以下代码时

```
UIImage *image = [UIImage imageNamed:@"photo1.png"];
self.imageView = [[UIImageView alloc] initWithImage:image];
[self.scrollView addSubview:self.imageView];
self.imageView.frame = (CGRect){.origin=CGPointMake(0.0f, 0.0f), .size=image.size}; 
```

然后我需要从 viewwillappear 中抓取框架

```
CGSize trial = self.imageView.frame.size;
CGRect scrollViewFrame = self.scrollView.frame; 
```

这就是我得到的。

![错误值](../Images/1812fc3a2a7ae01ca660d06cbf3df26e.png)

为什么scrollviewframe的大小为0,0？

# c# - 在对象列表上使用 IN

> ID：13124304
> 
> 赞同：0
> 
> 时间：2012-10-29T15:08:16.267
> 
> 标签：c#, linq, linq-to-entities

我正在尝试在对象内的列表上使用 LINQ。我将尝试解释：

我有一个名为“评论”的对象。在评论对象中，我有一个“用户”对象列表，其中每个用户对象都有一个“ID”字段。

如

```
Public class Comment {
List<User> users;
...
} 
```

然后，我得到一个用户 ID 列表（我们称它为 UsersList，例如 UsersList 是一个 List<int> 对象），并希望获取所有评论，其中 UsersList 中的所有用户都在该评论的“用户”列表中。

因此，如果`UsersList = {1,2}`我想获取所有评论，其中 id 为 1 的用户和 id 为 2 的用户将出现在“用户”列表中。

如何做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T15:13:04.483

```
comments.Where(c => usersList.All(id => c.users.Any(user => user.Id == id))); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T15:14:11.957

反过来查询它，即不是询问“listOfIds 中的userId”，而是询问“listOfIds.Contains(userId)”。

```
var query = comments
    .Where(c => UsersList.All(id => c.users.Any(u => u.ID == id))); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T15:13:16.563

就这么简单：

```
comments.Where(c => UsersList.All(uId => c.users.Contains(u => u.Id == uId))); 
```

# javascript - 如何创建自定义回调

> ID：13124308
> 
> 赞同：1
> 
> 时间：2012-10-29T15:08:25.093
> 
> 标签：javascript

我有一个完成一些异步操作的函数：

```
function funcAsynch() {
    // asynch operations
} 
```

好吧，我想调用这个函数，并声明一个回调以在所有异步操作完成时执行。

像

```
customCallback(funcAsynch(), function () { 
    alert("all asynch operations are finished") 
}); 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T15:10:37.157

`funcAsynch()`为您的函数定义一个参数。

```
function funcAsynch(callback) {
    // asynch operations
    // invoke callback() when asynch is done
} 
```

并将回调函数传递给该参数。

```
funcAsynch(function () { 
    alert("all asynch operations are finished");
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T15:11:00.073

```
function doSomething(callback) {
    // ...

    // Call the callback
    callback('stuff', 'goes', 'here');
}

function foo(a, b, c) {
    // I'm the callback
    alert(a + " " + b + " " + c);
}

doSomething(foo); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T15:28:53.733

一个小辅助函数：

```
function asyncFn() {
  var readyList = [],
       isReady = false;

  function emitReady() {
    isReady = true;
    var i = 0,
        len = readyList.length;

    for ( ; i < len; i++ ) {
      emit( readyList[i] );
    }
  }
  function emit( fn ) {
    fn();
  }
  function ready( fn ) {
      if ( !isReady ) {
        readyList.push( fn );
      }
      else {
        emit( fn );
      }
    }

  return {
    ready: ready,
    emitReady: emitReady
  };
} 
```

* * *

**用例 1**

```
function F() {
    var async = asyncFn();

    async.ready(function() {
        // Called when emitReady is called
    });

    async.emitReady();
} 
```

**用例 2**

```
function customAsync() {
  var async = asyncFn();

  /*
    Async stuff going on here....
  */
  setTimeout(function() {
    async.emitReady();
  }, 500);

  return async;
}

function customCallback(def, callback) {
  def.ready(callback);
}

customCallback(customAsync(), function() {
  console.log("async is operated");
}); 
```

* * *

只有一种方法...

# html - 修复列表项的宽度并隐藏溢出的文本

> ID：13124313
> 
> 赞同：2
> 
> 时间：2012-10-29T15:08:40.547
> 
> 标签：html, css

我有一个包含单个项目的列表，我想将列表项的宽度固定为 200 像素，如果文本链接超出 200 像素的宽度，则用“...”截断。

有什么想法我可以如何去做吗？

```
<ul>
  <li>
    <a href="account.asp">Super long string</a>
  </li>
</ul> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T15:11:08.937

```
ul li {
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    width: 200px;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-29T15:13:22.550

使用这个 CSS：

```
ul li {
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    width: 200px;
} 
```

这个css风格是关键：

```
text-overflow: ellipsis; 
```

在这里玩它：[http ://www.w3schools.com/cssref/tryit.asp?filename=trycss3_text-overflow](http://www.w3schools.com/cssref/tryit.asp?filename=trycss3_text-overflow)

在这里测试：http: [//jsfiddle.net/xXM2z/](http://jsfiddle.net/xXM2z/)

# ruby-on-rails - 选择图像并将图像附加到模型的解决方案？

> ID：13124324
> 
> 赞同：1
> 
> 时间：2012-10-29T15:09:12.870
> 
> 标签：ruby-on-rails, image, upload, carrierwave

我试图变得懒惰，宁愿找到现有的 gem、插件等，而不是编写自己的实现。在我看来，这个用例很笼统，可能有一些东西在那里，但我找不到任何东西。

我们正在使用 Ruby on Rails 和 carrierwave 让用户上传附加到所谓活动的图像（这些活动需要每天整理几次）。事实证明，用户经常（重新）将相同的图像用于不同的活动。我不想让用户一直上传同一张图片，而是向他们展示一个小的图片库，让他们选择一个来使用（当然，如果他们真的想上传，也可以让他们上传）。

有什么可以帮助我的吗？

# asp.net-mvc-3 - 如何打印未映射的值

> ID：13124325
> 
> 赞同：4
> 
> 时间：2012-10-29T15:09:14.213
> 
> 标签：asp.net-mvc-3, c#-4.0, razor, entity-framework-4

我正在使用复杂的 SQL 查询，我必须以简单的方式使用 SqlQuery ...：

模型：

```
public class C
{
    public int ID { get; set; }
    [NotMapped]
    public float Value { get; set; }
} 
```

控制器：

```
IEnumerable<C> results = db.C.SqlQuery(@"SELECT ID, ATAN(-45.01) as Value from C);
return View(results.ToList()); 
```

看法：

```
@model IEnumerable<C>
@foreach (var item in Model) {
    @Html.DisplayFor(modelItem => item.Value)
} 
```

item.Value 的结果为 NULL。

所以我的问题是，我如何打印 SQL 查询中的计算值？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T17:06:47.950

我将从`Value`0 的事实得出结论，即 EF 不会将返回的列映射到模型中未映射的属性。

您可以尝试的替代方法是定义一个辅助类型......

```
public class CHelper
{
    public int ID { get; set; }
    public float Value { get; set; }
} 
```

然后查询到这种类型，然后将值复制到您的实体：

```
IEnumerable<C> results = db.Database.SqlQuery<CHelper>(
    @"SELECT ID, ATAN(-45.01) as Value from C")
    .Select(ch => new C
    {
        ID = ch.ID,
        Value = ch.Value
    }); 
```

（通常在 LINQ-to-Entities 查询中，您不能使用 . 投影到实体中`Select`。但我相信`Select`上面示例中的不过，我不确定。）

请注意，`results`集合没有附加到上下文并由上下文跟踪，但我猜您无论如何都不需要它来呈现视图的 GET 请求。

当然，您可以直接基于`CHelper`类作为视图模型创建视图，并省略到`C`实体的转换。

# c++ - %.*s 在 printf 上代表什么？

> ID：13124327
> 
> 赞同：2
> 
> 时间：2012-10-29T15:09:15.853
> 
> 标签：c++, c

> **可能重复：**
> [c中的printf中的“%.*s”是什么意思](https://stackoverflow.com/questions/7899119/what-does-s-mean-in-printf-in-c)

我知道这个问题肯定在其他地方被问过，但是搜索“%.*s”对 SO 没有任何意义。有人可以向我解释以下行吗？

`printf("%.*s", len, buffer);`

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-29T15:12:23.430

它将输出限制为最多`len`字符。开始'`.`精度'; `*`说“使用参数列表中的一个`int`来确定精度”。请注意，如果“字符串” ( `buffer`) 长于 ，则甚至不必以 null 结尾`len`。

所有这些都可以在[`printf()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/printf.html).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T15:24:22.320

[这里](http://www.cplusplus.com/reference/clibrary/cstdio/printf/)有一个很好的表格，显示了所有不同的格式说明符可以为您做什么。对于您的示例，假设您有一个缓冲区和一个长度定义为：

```
char buf[] = "Hello World";
len = 5; 
```

您可以使用`%.*s`打印完整字符串的一部分：

```
printf("%.*s", len, buffer); 
```

在这种情况下，这将输出`Hello`前 5 个（基于 1）字符。请注意，这与以下内容相同：

```
printf("%.5s", buffer); 
```

# c# - 任务结果事件已完成

> ID：13124329
> 
> 赞同：8
> 
> 时间：2012-10-29T15:09:22.407
> 
> 标签：c#, .net, wpf, task-parallel-library

> **可能重复：**
> [如何创建运行 STA 线程的任务 (TPL)？](https://stackoverflow.com/questions/5971686/how-to-create-a-task-tpl-running-a-sta-thread)

我正在使用以下代码：

```
var task = Task.Factory.StartNew<List<NewTwitterStatus>>(
        () => GetTweets(securityKeys),  
        TaskCreationOptions.LongRunning);

Dispatcher.BeginInvoke(DispatcherPriority.Background,
    new Action(() =>
    {
        var result = task.Result; // ERROR!!! The calling thread cannot access this object because a different thread owns it.
        RecentTweetList.ItemsSource = result;
        Visibility = result.Any() ? Visibility.Visible : Visibility.Hidden;
    })); 
```

我得到了错误：

```
var result = task.Result; // ERROR!!! The calling thread cannot access this object because a different thread owns it. 
```

我需要做什么来解决这个问题？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-29T15:21:09.473

任务的想法是您可以将它们链接起来：

```
 var task = Task.Factory.StartNew<List<NewTwitterStatus>>(
                            () => GetTweets(securityKeys),  
                            TaskCreationOptions.LongRunning
                        )
        .ContinueWith(tsk => EndTweets(tsk) );

    void EndTweets(Task<List<string>> tsk)
    {
        var strings = tsk.Result;
        // now you have your result, Dispatchar Invoke it to the Main thread
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T15:21:20.813

您需要将 Dispatcher 调用移动到看起来像这样的任务延续中：

```
var task = Task.Factory
    .StartNew<List<NewTwitterStatus>>(() => GetTweets(securityKeys), TaskCreationOptions.LongRunning)
    .ContinueWith<List<NewTwitterStatus>>(t =>
    {
        Dispatcher.CurrentDispatcher.BeginInvoke(DispatcherPriority.Background,
            new Action(() =>
            {
                var result = t.Result;
                RecentTweetList.ItemsSource = result;
                Visibility = result.Any() ? Visibility.Visible : Visibility.Hidden;
            }));
    },
    CancellationToken.None,
    TaskContinuationOptions.None); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T15:24:02.827

看起来您正在启动一个后台任务来开始阅读推文，然后在两者之间没有任何协调的情况下启动另一个任务来阅读结果。

我希望您的任务继续执行另一个任务（请参阅[http://msdn.microsoft.com/en-us/library/dd537609.aspx](http://msdn.microsoft.com/en-us/library/dd537609.aspx)），并且您可能需要调用回 UI 线程。 ..

```
var getTask = Task.Factory.StartNew(...);
var analyseTask = Task.Factory.StartNew<...>(
()=> 
Dispatcher.Invoke(RecentTweetList.ItemsSource = getTask.Result)); 
```

# ruby - 正则表达式不匹配，但为什么？

> ID：13124331
> 
> 赞同：1
> 
> 时间：2012-10-29T15:09:37.830
> 
> 标签：ruby, regex

我必须遵循正则表达式：

```
(\/\*\*)([\s[:graph:]]*@brief[\s[:graph:]]*\r)( \*\/) 
```

我正在尝试检查以下内容：

```
/**
    @brief TestViewController

    <##full description#>

    @see UIViewController
    @ingroup <##group/module#>

    @date 2012-10-29
 */
@interface LaunchViewController : UIViewController { 
```

这是在代码变量中。

它将不匹配，以这种方式检查：

```
if @code =~ /(/*\*)([\s[:graph:]]*@brief[\s[:graph:]]*\r)( \*\)/
    puts "found----------" 
end 
```

我也这样尝试过：

```
r = Regexp.new(Regexp.quote('/') + Regexp.quote('**') + '[\s[:graph:]]*@brief[\s[:graph:]]*\r ' + Regexp.quote('*/')) 
```

谁能帮我解决这个问题？

在这种情况下，我对群组不感兴趣，所以请不要怀疑一个有群组而另一个没有群组。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T15:26:27.163

Ruby 通常不包含`\r`在换行符中。如果将正则表达式更改为：

```
/(\/\*\*)([\s[:graph:]]*@brief[\s[:graph:]]*)( \*\/)/ 
```

我得到一个匹配。

# android - android计算设置闹钟的时间差

> ID：13124332
> 
> 赞同：0
> 
> 时间：2012-10-29T15:09:39.327
> 
> 标签：android, time

我正在开发一个小型闹钟应用程序，我需要一种方法来计算时间差，以便能够将时间间隔传递给 alarmManager。我在这里看到了很多类似的话题，所以问题是：为了我的目的，计算时差的最佳方法是什么？我编写了该方法以从时间选择器中获取时间并计算差异，但它有问题，因为我在测试时得到了一些疯狂的值..

```
 public int CalculateInterval() {

    /*--- get the target time from the time picker ---*/
    ViewGroup vg = (ViewGroup) tp.getChildAt(0);
    ViewGroup number1 = (ViewGroup) vg.getChildAt(0);
    ViewGroup number2 = (ViewGroup) vg.getChildAt(1);
    String hours = ((EditText) number1.getChildAt(1)).getText()
            .toString();
    String mins = ((EditText) number2.getChildAt(1)).getText()
            .toString();

    /*--- convert to integer values in ms ---*/
    int hrsInMillis = Integer.parseInt(hours) * 3600 * 1000;
    int mnsInMillis = Integer.parseInt(mins) * 60 * 100;

    /*--- obtain the current time in ms ---*/
    Calendar c = Calendar.getInstance(); 
    int secondsInMillis = c.get(Calendar.SECOND) * 1000;
    int minutesInMillis = c.get(Calendar.MINUTE) * 1000 * 60;
    int HoursInMillis = c.get(Calendar.HOUR) * 1000 * 3600;

    int current = secondsInMillis + minutesInMillis + HoursInMillis;

    /*--- calculate the difference ---*/
    int interval = (hrsInMillis + mnsInMillis) - current;

    return interval;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T15:20:55.097

```
Calendar c = Calendar.getInstance(); 
int secondsInMillis = c.get(Calendar.SECOND) * 1000;
int minutesInMillis = c.get(Calendar.MINUTE) * 1000 * 60;
int HoursInMillis = c.get(Calendar.HOUR) * 1000 * 3600; 
```

上面的代码有点不必要，我猜这就是你得到“疯狂值”的原因。取而代之的是，从中获取`long`值`c`并用另一个减去它`long`。

但是，这有点小技巧，因为您目前只能获得以毫秒为单位的小时和分钟。

这是我要做的（伪代码）：

```
set alarm to Calendar.getInstance()
set alarm.hour to Integer.parseInt(hours)
set alarm.minute to Integer.parseInt(mins)
set alarm.secs to 0
if alarm.before(now)
    add 1 day to alarm
endif
set difference to (alarm.getTimeInMillis() - now.getTimeInMillis()) 
```

# javascript - 单击两次后无法在 iOS 上输入 html 输入字段

> ID：13124340
> 
> 赞同：13
> 
> 时间：2012-10-29T15:10:04.333
> 
> 标签：javascript, ios, events, input, touch

我在 iOS 上遇到了一个问题，我为此做了一个小提琴：

[http://jsfiddle.net/Hk56Q/](http://jsfiddle.net/Hk56Q/)

如果为任何触摸事件（touchstart/touchmove/touchend）添加了一个事件监听器到文档中，像这样：

```
function onTouch( e ){};
document.addEventListener( 'touchstart', onTouch, false ); 
```

这导致输入字段在 iOS 上具有以下行为：

*   第一次触摸：输入获得焦点，用户可以正确输入
*   随后的触摸（关注已经到位的字段）：打字不再起作用

我在 iPad 和 iPhone（模拟器和实际设备）上的 iOS 5、5.1 和 6 上遇到并测试了这个问题。

唯一的修复似乎是删除事件侦听器以恢复输入字段的正确行为（或者实际上根本不添加侦听器）：

```
document.removeEventListener( 'touchstart', onTouch); 
```

我还注意到，如果页面上有多个 iframe，其中一个将侦听器添加到其文档中，它也会破坏另一个 iframe 的输入字段。

小提琴在我的 Android 手机上运行正常。

任何想法为什么会发生这种情况？或者如何在不破坏 iOS 输入的情况下为触摸事件设置全局自定义事件处理程序？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2015-06-01T04:23:40.263

这是一种解决方法。将焦点设置到窗口，然后返回节点，超时：

```
function fixIpadTouch(node){
    node.ontouchend=function(e){
        if(document.activeElement===node){
            window.focus();
            setTimeout(function(){
                node.focus();
            },0);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-01-11T21:34:20.590

在我的情况下，特里的答案的一个变体解决了这个 Mobile Safari 错误（！！！）。在这里，“#input”，此代码位于 iframe 页面上：

```
var el = $('#input');
el.on('keydown', function() {
  window.focus()
  el.focus()
}); 
```

该错误以多种方式触发，但“keydown”可靠地通过。这也使得下一个“按键”到达。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-26T11:54:31.210

jQuery Mobile 1.2.0 应该是你需要的

证明！在勾选方框之前：

![证明（之前）](../Images/ac7c51262e1d67fe9b9f4daae16d14c1.png)

勾选方框后：

![打勾后](../Images/9b7e56c3d69f9b763634498275dfa0c3.png)

# javascript - 刷新页面时如何在嵌套列表中显示相同的页面？

> ID：13124352
> 
> 赞同：1
> 
> 时间：2012-10-29T15:10:39.733
> 
> 标签：javascript, jquery, jquery-mobile

我使用 spring 3 mvc、jquery mobile 1.2 和 HDIV 开发了一个移动应用程序。

我的应用程序中有一个嵌套列表。我的问题是当我在嵌套列表中刷新浏览器时，浏览器会将我带到主页。如何在 jquery mobile 中停止刷新以及如何在嵌套列表中显示相同的列表页面？

我想要完全像以下... [http://jquerymobile.com/demos/1.0a3/#docs/lists/lists-nested.html&ui-page=Planes-1](http://jquerymobile.com/demos/1.0a3/#docs/lists/lists-nested.html&ui-page=Planes-1)

有什么帮助吗？

感谢和问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T21:10:10.990

1.  您可以更改您的 url 以获得您想要显示的页面的路径： [http ://www.yourhost.com/inde.htm#mypagename](http://www.yourhost.com/inde.htm#mypagename)
2.  或 $.mobile.changePage(...
3.  或 $.mobile.loadPage(... 更多信息请看：http: [//jquerymobile.com/test/docs/api/methods.html](http://jquerymobile.com/test/docs/api/methods.html)

# zeromq - PyZMQ 是否为每个新的客户端连接处理创建线程？

> ID：13124359
> 
> 赞同：4
> 
> 时间：2012-10-29T15:11:03.633
> 
> 标签：zeromq, pyzmq

我正在使用 PyZMQ 创建请求/回复服务器，并且我试图弄清楚为每个新客户端连接创建线程的行为是否由 PyZMQ 自动处理。最终，我试图弄清楚来自一个需要很长时间才能回复的客户端的请求是否会阻止来自所有其他客户端的请求。

通常，我会在 Python 套接字实例上调用 accept，阻塞直到建立新连接，然后在单独的线程中处理任何新连接。但是，PyZMQ 套接字似乎不支持这样的工作流程。那么，这在 PyZMQ 中是如何处理的呢？如果 PyZMQ REP 套接字有多个连接到它的客户端，它如何正确地将回复路由回发出请求的客户端？而且，我该如何设计我的代码，以便在客户端发出长时间运行的请求时不会阻止来自其他客户端的请求？

我知道我可以使用 PyZMQ 提供的基于 Tornado 的 EventLoop，我只是想更好地了解如果这不是一个选项，它将如何工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T20:32:32.873

ZeroMQ 公开为“类固醇上的套接字”，但还有另一种实现通信的方法。

首先，忘记连接传统套接字中对等点的线。在 0mq 中，您有一个“量子传送器”，它将您的消息从一段代码传递到另一段代码，对您隐藏实际的传递工作。你不能只问 0mq 有多少客户端连接到套接字或者你是否有客户端。因此，ZeroMQ 不能用作套接字的替代品。

取而代之的是，0mq 给了你一顶魔术师帽子，你可以从中取出一些白兔。想象一下，那顶帽子的底部与一个巨大的管道网络相连，另一边有多个奇妙的工厂。这些工厂有时会送一些东西到你的帽子上，当你从帽子里拿出来时，你会发现自己手里拿着一只兔子，或者一束鲜花或其他东西。您无法确定该物品是从哪个工厂发送的，除非该物品上有明确的标签（即多部分消息的一部分指向消息的来源）。

从帽子中取出兔子后，您可能想要发回一些东西，而 0mq 将针对不同的套接字类型表现不同。对于 REP 套接字，它将直接向消息来源发送答案，因为 DEALER 将在连接的对等点之间循环回答，而 ROUTER 在接收消息时为您提供对等点的确切内部地址的大量知识，并允许您在发送消息时设置明确的目的地。

总而言之，如果您想为每个通信客户端设置一个单独的线程，您需要以下内容：

*   客户应明确表明自己的身份。
*   在服务器上，您运行一个接收消息的线程（调度程序），从中获取客户端身份并选择一个线程进行处理。
*   Dispatcher 将此消息发送到线程（或派生一个）并继续为传入消息流提供服务。
*   线程接收消息，处理它并通过调度程序（如果需要）向客户端发送答案。
*   调度程序路由对客户端的响应。

这是一种在记住经典套接字知识的情况下实现“zeromq 上的多客户端套接字服务器”的方法。

但这不是解决问题的 0mq 方法。

在 0mq 中，您可以将处理逻辑放在一个线程中（上面示例中的调度程序）并将其实现为循环`receive request -> process -> send answer -> receive ...`。当处理时间不是问题时非常适合。但是当它是，0mq 风格的解决方案涉及客户端和工作人员（执行实际工作）之间的任务队列代理。然后，broker逻辑比上面提到的receive-answer循环稍微复杂一点，worker的实现方式也是一样的。请参阅 zguide - [A Request-Reply Message Broker中的示例](http://zguide2.zeromq.org/py%3aall#toc53)

# ruby-on-rails - 隐藏的反分页问题

> ID：13124364
> 
> 赞同：1
> 
> 时间：2012-10-29T15:11:12.447
> 
> 标签：ruby-on-rails, ruby-on-rails-3, pagination, auto-increment, infinite-scroll

我目前有一个按几个选择框排序的工作表。我最近按照本教程实现了无限/无限滚动：[http ://railscasts.com/episodes/114-endless-page-revised?view=asciicast](http://railscasts.com/episodes/114-endless-page-revised?view=asciicast)

该教程经过几次更改后工作，但我有一个问题。我在第一列使用计数器，但问题是每次加载下一页时，计数器都会重置为 1，所以计数器就像 1..2..3.. 一直到 50，但是当我滚动到底部时，它会重置为 1。我目前在开始时显示 50 条记录，并且每次用户向下滚动到底部时再显示 50 条记录。我希望下一个记录是 51...52...53...等。然后下次滚动到底部时，从 101 开始，然后是 102...103...104...等等，例如排名列表。

为了获得部分内容，我遵循了本教程，该教程还告诉我如何制作计数器列：http: [//xianese.blogspot.com/2008/06/render-collection.html](http://xianese.blogspot.com/2008/06/render-collection.html)

经过一番研究，我发现我使用的计数器几乎没有记录，并且有几个人报告了它的分页问题，​​这意味着它不仅仅是无限滚动的问题，而是分页的问题（我正在使用will_paginate）。在一个网站上，一个人说他们已经解决了分页问题，​​但没有说如何，现在帖子已经关闭，所以我知道有办法解决这个问题。

这是该网站的链接： [http ://www.pgrs.net/2007/07/20/render-partial-with-collection-has-hidden-counter/](http://www.pgrs.net/2007/07/20/render-partial-with-collection-has-hidden-counter/)

任何可以帮助我的东西都将不胜感激。

这是我的代码：

**文章.js.coffee**

```
jQuery ->
   if $('.pagination').length
      $('#articles_table').scroll ->
              url = $('.pagination .next_page').attr('href')          
              if url &&  $('#articles_table')[0].scrollHeight -    
              $('#articles_table').scrollTop() < 700                  
                      $('.pagination').text('Fetching more users...')
                      $.getScript(url)
$('#articles_table').scroll() 
```

**index.html.erb**

```
<table class="table table-striped table-bordered span8 table-condensed"     
 id="articles_table" >
<thead class="header">
  <tr>
      <th>ID</th>
      <th>Title</th>
      <th>Description</th>
      <th>Created_At</th>
  </tr>
</thead>
<tbody>
<%= render @articles %>

</tbody> 
```

**index.js.erb**

```
$('#articles_table').append('<%= j render(@articles) %>');
<% if @articles.next_page %>
$('.pagination').replaceWith('<%= j will_paginate(@articles) %>');
<% else %>
$('.pagination').remove();
<% end %> 
```

**_article.html.erb**

```
<tr>
      <td> <%= article_counter +1 %> </td>
      <td> <%= article.Title %> </td>
      <td> <%= article.Description %> </td>
      <td> <%= article.Created_At %> </td>
</tr> 
```

谢谢，

杰克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T23:22:11.487

经过大量研究后，我发现这篇堆栈溢出帖子与我的不同，因为它使用了索引，但代码对我有用！ [Ruby/Rails 中的持久计数器](https://stackoverflow.com/questions/6290771/persistent-counter-in-ruby-rails-for-each)

这是我添加到 _article.html.erb 的代码：

```
<% if params[:page].nil? || params[:page] == "0" || params[:page] == "1" %>
  <% x = 0 %>
<% else %>
  <% page = params[:page].to_i - 1 %>
  <% x = page * 50 %>
<% end %> 
```

我刚刚添加了一个 x ，所以它是：**article_counter + x + 1**，其中 x 在上面的代码中定义。这是整个文件的样子：

```
<% if params[:page].nil? || params[:page] == "0" || params[:page] == "1" %>
      <% x = 0 %>
    <% else %>
      <% page = params[:page].to_i - 1 %>
      <% x = page * 50 %>
    <% end %>
<tr>
      <td> <%= article_counter +1 %> </td>
      <td> <%= article.Title %> </td>
      <td> <%= article.Description %> </td>
      <td> <%= article.Created_At %> </td>
</tr> 
```

# wordpress - wordpress 自定义帖子类型自带页面

> ID：13124365
> 
> 赞同：0
> 
> 时间：2012-10-29T15:11:13.867
> 
> 标签：wordpress, url, custom-post-type

当您[访问 http://www.classicandvintage.co.uk/car/rebecca/](http://www.classicandvintage.co.uk/car/rebecca/) 时，它使用的是我创建的自定义帖子类型的汽车......

问题是，这个页面也存在，我不知道它来自哪里？ [http://www.classicandvintage.co.uk/car](http://www.classicandvintage.co.uk/car)

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T15:18:12.267

“汽车”页面，

是您的顶级 (index.php) 页面，使用该自定义帖子类型的所有帖子填充页面，

您可以为该页面创建一个页面模板，其中列出了用于婚礼的所有汽车（已经是），然后仅显示每个帖子的特色图片，而不是显示所有帖子信息等。

[[EDIT]] 或者如果你想重定向它：

在您的 htaccess 文件中，您可以添加

重定向 301 /汽车[http://www.classicandvintage.co.uk/](http://www.classicandvintage.co.uk/)

# php - 创建 Flot 图表所需的 PHP 数组结构（使用 JSON）

> ID：13124376
> 
> 赞同：-1
> 
> 时间：2012-10-29T15:11:54.203
> 
> 标签：php, json, flot

我需要使用 Flot 图表库创建图表，使用 PHP JSON 函数（即 json_encode）。

问题是我不了解 PHP 数组的结构，必须对其进行编码才能创建正确的 JS 数组以生成 Flot 图表。

图表需要有几条线，有不同的颜色。

有人可以帮我举一些适合这种类型的 PHP 数组的例子。

我已经尝试（没有成功）实现下一个示例：

[通过 PHP 从 MySQL FLOT 数据？](https://stackoverflow.com/questions/9161785/flot-data-from-mysql-via-php)

问题是我得到了我不知道如何在我的脚本中实现的对象：

```
 $.ajax({
        type:'post', 
        dataType: "json", 
        url:'/stocks/index/',
        success: function(r) {
            $.plot($("#placeholder"), [
                {data:(r)}
            ] )
        }
    }); 
```

先感谢您！

**更新**：用于生成 JSON 数组的 php 代码如下所示：

```
$dataSet1 = array();
$dataSet1['label'] = 'Customer 1';
$dataSet1['data'] = array(array(1,1),array(2,2)); // an array of arrays of point pairs

$dataSet2 = array();
$dataSet2['label'] = 'Customer 2';
$dataSet2['data'] = array(array(3,3),array(4,5)); // an array of arrays of point pairs

$flots = array($dataSet1, $dataSet2);
return json_encode($flots); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T15:28:19.003

```
$dataSet1 = array();
$dataSet1['label'] = 'Customer 1';
$dataSet1['data'] = array(array(1,1),array(2,2)); // an array of arrays of point pairs

$dataSet2 = array();
$dataSet2['label'] = 'Customer 2';
$dataSet2['data'] = array(array(3,3),array(4,5)); // an array of arrays of point pairs

$flots = array($dataSet1, $dataSet2);
echo json_encode($flots); 
```

.php 文件..

和

```
$.ajax({
        type:'post', 
        dataType: "json", 
        url:'/stocks/index/',
        success: function(data) {
            $.plot($("#placeholder"),  data );
        }
    }); 
```

# web-applications - 当 webapp 本身驻留在其他付费服务器中时，我可以将 webapp 的数据库放在云中吗？

> ID：13124378
> 
> 赞同：0
> 
> 时间：2012-10-29T15:12:07.683
> 
> 标签：web-applications, cloud

我创建了一个在后端有很多数据库连接的 web 应用程序。我想要的是将 webapp 放置在付费服务器中，同时将应用程序的数据库放置在云中。这可能吗？或者我是否需要将整个 webapp 和数据库移动到云端？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T15:15:59.077

从技术上讲，当然。

但是，您必须通过从一台服务器 ping 到另一台服务器来仔细检查延迟问题。

还要了解区域，关于一个云中的各种服务器如何与数据库云中的服务器通信。

一般来说，DB和APP服务器最好放在一起。

# jquery - jquery自动完成中的动态参数

> ID：13124379
> 
> 赞同：2
> 
> 时间：2012-10-29T15:12:11.167
> 
> 标签：jquery, dynamic, parameters, autocomplete, runtime

我无法在以下代码中动态传递参数过滤器。过滤器值取决于下拉列表 (id="dataLevel") 值，并用于相应地生成不同的自动完成建议。

## HTML 代码：

```
<td>
<select id="dataLevel" name="dataLevel" 
    onchange="enableSearch(this);resetError(this);" >
    <option value="0">-- Select Level --</option>
    <option value="1">Group Level</option>
    <option value="2">Region Level</option>
    <option value="3">Sub Region Level</option>
    <option value="4">Branch Level</option>
</select>&nbsp;&nbsp;&nbsp;
</td>
<td>
    <input value="" name="searchTarget" id="searchTarget" type="text" />
</td> 
```

## JAVASCRIPT代码：

```
$(document).ready(function() {
    $("#searchTarget").autocomplete(
    "/jsp/AjaxInterface.jsp",{maxItemsToShow:15,extraParams:{filter:getTargetFilter()}}
    );
});

function getTargetFilter() {
    var targetType = document.getElementById('dataLevel').value;
    switch (targetType) {
    case '1':
        return 0;
        break;
    case '2':
        return 26;
        break;
    case '3':
        return 65;
        break;
    case '4':
        return 66;
        break;
    default:
        return 0;
        break;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T15:36:43.510

`source`您可以通过使用该选项并编写自己的 AJAX 调用来创建对 AJAX 的更多控制。

```
$(document).ready(function() {

    $("#searchTarget").autocomplete({
        source: function(request, response) {
            $.getJSON("/jsp/AjaxInterface.jsp", {
                term: request.term,
                filter: getTargetFilter()

            }, response);
        },
        maxItemsToShow: 15
    });
}); 
```

[请参阅 API http://jqueryui.com/autocomplete/#multiple-remote](http://jqueryui.com/autocomplete/#multiple-remote)中的 Mulitple-Remote 演示 和“查看源”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T15:58:36.590

每次 Datalevel 值更改时，您都应该更改 Filter 选项。

```
function getTargetFilter() {
        var targetType = document.getElementById('dataLevel').value;
        switch (targetType) {
        case '1':
            return 0;
            break;
        case '2':
            return 26;
            break;
        case '3':
            return 65;
            break;
        case '4':
            return 66;
            break;
        default:
            return 0;
            break;
        }
    }

    //Change filter option each time dataLever value change's
    $("#dataLevel").change(function(){
         $("#searchTarget").autocomplete("option","filter",getTargetFilter());
    }); 
```

# facebook - 如何使用 Photo 对象的 name_tags 字段？

> ID：13124381
> 
> 赞同：1
> 
> 时间：2012-10-29T15:12:20.263
> 
> 标签：facebook, facebook-graph-api, tags

上传照片并设置该照片的名称（标题）没问题，我正在尝试标记我在标题中提到的名称。根据文档，这样做的方法是使用 name_tags 字段。

该字段在[api-reference](http://developers.facebook.com/docs/reference/api/photo/)中列出，但我找不到正确的使用方法，也没有示例。

我可以在这里找到[另一个](https://stackoverflow.com/questions/12526077/tag-user-in-image-post)关于此的问题，但从未得到回答（他只是放弃并使用了其他东西）。

有谁知道 name_tags 字段是否真的可以通过 api 使用，如果是，如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T16:59:27.087

我认为您应该尝试使用`message_tags`字段。

# asp-classic - ASP vb 编译错误 800A03EA

> ID：13124389
> 
> 赞同：0
> 
> 时间：2012-10-29T15:12:41.680
> 
> 标签：asp-classic, vbscript, compiler-errors

我不是一个 ASP 人，但我最近继承了一个 ASP 项目。我的任务几乎是对其进行改造，让过去 10 年中构建的所有功能在视觉和体验上更好地为用户工作。

到目前为止一直很好，直到今天。我收到以下错误消息：

```
Microsoft VBScript compilation error '800a03ea'

Syntax error

/test/calsearchmember.asp, line 3

if ((Request.Form("dateToToggle").Item >=0) && (Request.Form("dateToToggle").Item<=31))
---------------------------------------------^ 
```

我已将该站点复制到一个测试目录中，并一直在那里进行更改。此日历搜索功能在主站点上运行良好，但在子目录中却没有，而且我没有对产生错误的文件进行任何更改。

有任何想法吗？谢谢！

* * *

我想分享更多代码本身，以帮助更好地了解问题。

这是文件的调用方式：

```
<script language="JavaScript">
    <!--#include file="sidebarclientscript.inc"-->
</script> 
```

这是第一段代码（其中标记了错误）：

```
<%
if ((Request.Form("dateToToggle").Item >=0) && (Request.Form("dateToToggle").Item<=31))
{
    var sql;
    var date = Request.Form("calsearchmonth") + "/" + Request.Form("dateToToggle") + "/" + Request.Form("calsearchyear")

    if (Request.Form("bNewStateOpen").Item == "true")
    {
        sql = "SELECT * FROM OpenDates WHERE MemberId = ";
        sql += Request.Form("calsearchmember");
        sql += " AND DateValue(OpenDate) = DateValue('";
        sql += date;
        sql += "') AND TimeValue(OpenDate) = ";

        if (Request.Form("calsearchPM").Item == "1")
            sql += "TimeValue('12:00:00 PM')";
        else
            sql += "''";

        //Response.Write(sql);
        var rs = db.Execute(sql);
        if (rs.EOF)
        {
            sql = "INSERT INTO OpenDates (MemberId, OpenDate) VALUES ("
            sql += Request.Form("calsearchmember").Item
            sql += ", '"
            sql += date;
            if (Request.Form("calsearchPM").Item == "1")
                sql += " 12:00:00 PM";
            sql += "')"

            //Response.Write("<BR>"+sql);
            db.Execute(sql);
        }
    }
           %>` 
```

希望这有助于澄清一些事情。再次感谢您的意见和帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T09:06:34.707

看起来默认语言从 JScript 更改为 VBScript，因此将其更改回 JScript。

**IIS 5：（**也应该适用于 6）

管理控制台→右键单击网站→属性→主目录选项卡→配置按钮→选项→在“默认ASP语言”下键入JScript并确认。

**IIS 7.5：**

管理控制台 → IIS → ASP → 编译 → 脚本语言 → 输入“JScript”并确认。

7.5的屏幕截图使其更清晰：

> ![](../Images/256521335f9a7be197ca427fc867b57a.png)

> ![](../Images/1bf3d0d095df0d92fb319e1a2316257f.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T17:13:11.593

最后还需要一个`then`：

```
if ((Request.Form("dateToToggle").Item >=0) and (Request.Form("dateToToggle").Item<=31)) then 
```

# c# - 检查密码更改以确保新密码不等于上次使用的密码

> ID：13124391
> 
> 赞同：0
> 
> 时间：2012-10-29T15:12:44.690
> 
> 标签：c#, razor, webmatrix, change-password

我只是想知道如何检查（当用户在密码过期后更改密码时）如何使用（在 WebMatrix 中）if 分支来确保新密码不等于以前的密码。

除了上次使用的密码之外，我认为我不想再检查任何密码历史记录，所以只要我可以检查以前的密码，我认为就可以了。

我当然可以查询数据库并检查，但由于密码不是以纯文本形式存储的，我知道这不起作用，但我也在这里检查了 WebSecurity 方法：

[http://msdn.microsoft.com/en-us/library/webmatrix.webdata.websecurity(v=vs.111).aspx](http://msdn.microsoft.com/en-us/library/webmatrix.webdata.websecurity(v=vs.111).aspx)

并没有找到任何东西。

完成这项工作的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T16:17:15.033

由于密码未存储在数据库中，因此您无法执行此操作，除非您在用户首次注册时以及随后更改密码时记下密码。

具有讽刺意味的是，通过存储原始密码（即使处于加密状态），您实际上会降低应用程序的安全性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T18:23:41.037

对于任何感兴趣的人，我确实找到了一个很好的解决这个问题的方法，可以很好地完成工作。

但是请记住，这仅适用于检查他们拥有/拥有的最后一个密码。

这是我实现的：

首先，当然，在登录页面中，在其他代码中以及在实际登录后，我有明显的（检查他们的密码是否超过 6 个月并且需要更改）：

```
if(WebSecurity.GetPasswordChangedDate(username).AddMonths(6) < DateTime.UtcNow)
{
    WebSecurity.Logout();
    Session["gActionMessage"] = "Your password has expired. Please change your password by visiting \"Login\" then \"Change Password\"";
    Session["gActionMessageDisplayed"] = "not";
    Response.Redirect("~/");
} 
```

然后，我在“更改密码”页面上想到了这个（实际上是密码重置令牌的电子邮件验证后的重定向页面，但你明白了）：

```
if(WebSecurity.Login(email, newPassword, false) && WebSecurity.UserExists(email) && WebSecurity.GetPasswordChangedDate(email).AddMonths(6) < DateTime.UtcNow)
{
    WebSecurity.Logout();
    errorMessage = "You cannot repeat your last expired password.";
} 
```

这里的 if 分支进行三项检查：

首先，如果可能的话，它会根据他们输入的新密码有效地检查和登录他们。

其次，它检查用户是否存在（不确定我是否需要这个，但无论如何）。

最后，检查以确保他们的密码更改日期超过 6 个月（因为同一页面用于“忘记密码”的内容，所以这只是确保在以这种方式出错之前满足正确的情况）。

因此，简而言之，如果他们的新密码仍然足以让他们登录（当然是在实际更改之前），那么这是重复的，随后将他们注销并向他们抛出错误消息，而不是更改密码。如果登录还不够，则不能是重复密码，（只要满足其他要求）然后更改密码。

希望这对将来可能需要在更改密码时使用 WebMatrix 的非重复密码的任何人有所帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-13T15:13:04.217

引用 System.Web.Helpers 程序集，

创建一个名为“UserPasswordHistory”的自定义表，其中包含存储在“Password”列中的散列密码，并在“PasswordVersion”列中增加版本号，每次注册用户或更新给定密码时都会插入一行用户，以下代码有效。

```
var userProfile = db.UserProfiles.First(x => x.UserId == userId);
                var passwords = (userProfile.UserPasswordHistory
                                          .OrderByDescending(x => x.PasswordVersion)
                                          .Take(_configuration.PasswordCountBeforeReuseAllowed))
                                          .Select(x => x.Password);

return passwords.Any(previousPassword => Crypto.VerifyHashedPassword(previousPassword, password)); 
```

要回答专门提出的问题 _configuration.PasswordCountBeforeReuseAllowed 将设置为 1

# excel - 如何在 Web 表单中使用 VBA 单击锚元素

> ID：13124395
> 
> 赞同：-2
> 
> 时间：2012-10-29T15:13:05.987
> 
> 标签：excel, vba

你能在这里给我一些代码，我可以通过它点击网页上的锚标签。我想点击“配置”标签。这些标签用于从一个页面导航到另一个页面。这是网页视图源代码的一部分。

```
<td class="tabtext-unsel"><nobr><a href="/aems/catalog/cataloglist.do" class="tabtext-unsel">Catalogs</a></nobr></td>

<td class="tabtext-sel"><nobr><a href="/aems/configuration/configurationlist.do" class="tabtext-sel">Configuration</a></nobr></td> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T15:46:59.380

在评论中进行一些讨论后，我可以提出另一个答案：

[自动化和脚本语言](http://www.autoitscript.com/site/autoit/)

您可以使用它来导航复杂的页面，在任何应用程序中自动化工作等。它可以复制几乎任何数据并将其粘贴到 Excel 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T15:28:47.303

也许这会帮助你：

[Youtube：MrExcel 的 Learn Excel #665 - 抓取网页](http://www.youtube.com/watch?v=K9V5E_LPiKs)

有一种技术称为[网络抓取](http://en.wikipedia.org/wiki/Web_scraping)。

你可能会发现很多关于网页抓取的教程，还有一些 excel 教程。

# javascript - jqGrid：编辑行时有条件地编辑列

> ID：13124405
> 
> 赞同：1
> 
> 时间：2012-10-29T15:13:58.243
> 
> 标签：javascript, jqgrid

我有一个使用 jqGrid 的表，我需要在编辑一行时，根据行上的值，某些列不可用于编辑。我知道如何避免根据单元格值编辑行，但在整个行级别，我不知道如何在列级别指定。这是双击我的表的功能。

```
ondblClickRow: function(id){

    var code = id.split("-")[0];   
    var status = id.split("-")[1]; 
    if((code == "0" && status == "255") || (code == "1" && status == "0")
            || (code == "1" && status == "1")
            || (code == "2" && status == "255")){
        return;
    }else{
        jQuery('#nameableSignalsListView').jqGrid('editRow',id, { 
            keys : true,
            reloadAfterSubmit:true,
            successfunc: function(response, postdata) {                     
                var result = printErrors(response, false);
                if(result === true) {
                    return true;
                } else {
                    setTimeout(function() {
                    customAlert(result);
                }, 200);    
                    return false;
                }
            },
            restoreAfterError: false,
            url: appRootUrl  + "rest/nameableSignals/update"
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T15:32:51.250

我多次回答同一个问题。主要的理解问题是列的属性将在初始化时`editing: true`被读取。`editRow`因此，您可以**直接**`editing`在`setColProp`调用. 通过这种方式，您可以实现所需的任何动态行为。**`editRow`**

看[答案](https://stackoverflow.com/a/7732536/315935)，[这个](https://stackoverflow.com/a/4308172/315935)还是[这个](https://stackoverflow.com/a/12956484/315935)。最后一个为每个`formatter: "actions"`.

# memcached - Memcache bahaviour incase Web 和 Memcache 服务器都安装在同一台机器上

> ID：13124408
> 
> 赞同：1
> 
> 时间：2012-10-29T15:14:07.593
> 
> 标签：memcached

我有两台服务器，安装了两台 web 服务器和两台 memcache 服务器。我以这种方式指定了用于构建 Memcache 客户端的服务器顺序

```
String location = "10.1.1.1:11211 10.1.1.2:11211";
    MemcachedClientBuilder builder = new XMemcachedClientBuilder(
                AddrUtil.getAddressMap(location), new int[] {1,3}); 
```

如果 web 和 memcache 服务器安装在同一台机器上，此顺序是否会对访问数据产生任何影响？

# ruby-on-rails - Rails：重复单元测试 - DRY？

> ID：13124410
> 
> 赞同：1
> 
> 时间：2012-10-29T15:14:09.730
> 
> 标签：ruby-on-rails, ruby-on-rails-3, unit-testing, tdd, dry

是否有任何标准做法来干燥 Rails 中的重复单元测试用例。例如，我有许多具有“名称”属性的模型，我想对每个模型进行相同类型的单元测试。我隐约看到我需要创建的模块是重用的？那可能/正确吗？

创建 DRY 单元测试的任何指针/实践？

**示例代码：**我想对具有相同命名属性的许多其他模型进行相同类型的测试。

```
require 'test_helper'

# Factory class
class UserFactory

  # Creates a valid template user
  def self.create
    user = User.new do |u|
      u.name = "Test User #{rand}"
      u.notes = "test notes"
    end
    user
  end

end

class UserTest < ActiveSupport::TestCase
  # ------------
  # Init
  # ------------

  def setup
    @valid_usr = UserFactory.create
  end

  def teardown
    @valid_usr.destroy if @valid_usr.persisted?
    @valid_usr = nil
  end

  # ------------
  # Name
  # ------------

  test "should not have a dummy user object" do
    user = User.new
    assert !user.save
  end

  test "unique user name must be saved" do
    assert UserFactory.create.save!, "First entry must be saved"

    user = UserFactory.create
    user.name = "Different name"
    assert user.save!, "Unique user must be saved"
    user.destroy
  end

  test "non unique user names must not be saved" do
    user1 = UserFactory.create
    user2 = UserFactory.create
    user1.name = "Same User name"
    user2.name = "Same User name"

    assert user1.save!, "First entry must be saved"
    assert !user2.save, "Duplicate name should not be saved"

    user1.destroy
    user2.destroy
  end

  test "should not have user without a valid name" do
    # Invalid name
    @valid_usr.name = " "
    assert !@valid_usr.save
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T18:30:55.300

移动模块中的重复代码并将其包含在实际测试中（如在类中）。

# ruby-on-rails - 104：对等方重置连接：nginx + rainbows + 超过 1 mb 的上传

> ID：13124412
> 
> 赞同：4
> 
> 时间：2012-10-29T15:14:18.557
> 
> 标签：ruby-on-rails, nginx, unicorn, unix-socket, rainbows

我正在运行 ThreadPool rainbows + nginx（unix 套接字）

在大文件上传时，我在 nginx 错误日志中得到以下信息（应用程序日志中没有任何内容）：

```
readv() failed (104: Connection reset by peer) while reading upstream 
```

浏览器收到响应：

```
413 Request Entity Too Large 
```

为什么会这样？

*   “client_max_body_size 80M;” 在 nginx 中同时设置 http 和服务器级别（以防万一）
*   nginx 通过 unix 套接字与彩虹通信（上游套接字 + 位置@proxy_pass）
*   我在其他日志中看不到任何内容。我检查过：
    *   彩虹日志
    *   工头日志
    *   应用程序日志
    *   dmesg 和 /var/log/messages
*   上传文件时会发生这种情况 ~> 1 MB 大小

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T16:09:26.943

( `ECONNRESET`Connection reset by peer) 错误意味着连接被后端应用程序不干净地关闭。这通常发生在后端应用程序死亡时，例如由于分段错误，或者被[OOM 杀手杀死](http://en.wikipedia.org/wiki/Out_of_memory)。要找出确切原因，您必须检查后端日志（如果有）和/或系统日志。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T03:40:00.513

也许您已经`client_max_body_size`设置了`nginx.conf`将主体大小限制为 1Mb 的设置，例如

```
client_max_body_size 1M; 
```

在这种情况下，您需要将其删除以允许上传超过 1M 的文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-03T01:25:37.897

原来 Rainbows 有一个名为的配置选项`client_max_body_size`，默认为 1 MB 该选项[记录在这里](http://rainbows.rubyforge.org/Rainbows/Configurator.html)

如果启用此选项，Rainbows 将`413`静默处理大型请求。除非您在它前面运行某些东西，否则您可能不知道它正在破裂。

```
Rainbows! do
  # let nginx handle max body size
  client_max_body_size nil 
end 
```

# postgresql - PostgreSQL 临时文件使用率非常高

> ID：13124415
> 
> 赞同：1
> 
> 时间：2012-10-29T15:14:34.677
> 
> 标签：postgresql, insert, temporary-files

我正在尝试将系统从 Postgres 8.3 迁移到 9.1，每天在 8.3 服务器上运行的查询需要大约 10 分钟并且 <5gb 的 ram，9.1 db 上完全相同的查询占用了所有内存（200GB+）死前的默认表空间（通常在一两个小时后），

查询

```
INSERT INTO warehouse.stream_user_facts(
  time_id,
  country,
  content_manager_id,
  preview,
  stream_type_id,
  stream_source_key_id,
  user_is_registered,
  user_id,
  gender,
  age,
  stream_count,
  stream_costs,
  user_recency_days
)
SELECT
    facts.*,
    date - last_stream AS user_recency_days
  FROM main_facts AS facts
  LEFT JOIN warehouse.times USING (time_id)
  LEFT JOIN last_streams USING (user_id); 
```

它使用的视图

```
 CREATE TEMP VIEW main_facts AS
    SELECT
        time_id,
        CASE WHEN stream_type_id = (SELECT stream_type_id FROM warehouse.stream_types WHERE name = 'SUBSCRIPTION')
             THEN subscription_country
             ELSE track_streams_extra.country
        END AS report_country,
        content_manager_id,
        preview,
        stream_type_id,
        stream_source_key_id,
        COALESCE(register_date <= reporting_date, false) AS user_is_registered,
        user_id,
        CASE WHEN register_date <= reporting_date
             THEN gender
        END AS gender_at_stream,
        CASE WHEN register_date <= reporting_date
             THEN EXTRACT(YEAR FROM age(reporting_date, dob))
        END AS age_at_stream,
        COUNT(1) AS stream_count,
        nullable_sum(cost) AS stream_costs
      FROM warehouse.track_streams_extra
      LEFT JOIN users USING (user_id)
      LEFT JOIN user_registration USING (user_id)
      JOIN time_period ON (reporting_date >= start AND reporting_date < past_end)
      GROUP BY time_id, report_country, content_manager_id, preview, stream_type_id, stream_source_key_id, user_is_registered, user_id, gender_at_stream, age_at_stream; 
```

我看不出它有什么问题，但正如我所说，它适用于 8.3 但不适用于 9.1，是否存在一些可能导致这种情况发生的根本变化。

**编辑:: 添加解释** **编辑:: 添加解释版本**

在 9.1 上进行解释，因为它崩溃并且永远不会返回，所以无法得到解释分析，将立即发布 8.3 解释分析

```
Insert on stream_user_facts  (cost=148914916373.07..321324730521.96 rows=1362701321853 width=152)
   ->  Hash Left Join  (cost=148914916373.07..321324730521.96 rows=1362701321853 width=152)
         Hash Cond: (track_streams.user_id = last_streams.user_id)
         ->  Hash Left Join  (cost=148914916319.42..246024946085.50 rows=140484672356 width=148)
               Hash Cond: (time_period.time_id = times.time_id)
               ->  GroupAggregate  (cost=148914916300.90..242688435098.53 rows=140484672356 width=95)
                     InitPlan 1 (returns $0)
                       ->  Seq Scan on stream_types  (cost=0.00..1.06 rows=1 width=2)
                             Filter: (name = 'SUBSCRIPTION'::text)
                     ->  Sort  (cost=148914916299.84..149266127980.73 rows=140484672356 width=95)
                           Sort Key: time_period.time_id, (CASE WHEN (CASE WHEN ((track_streams.stream_source_key_id = ANY ('{8,16}'::integer[])) AND (CASE WHEN (track_streams.ingestion_date IS NULL) THEN track_streams.date WHEN (date_trunc('day'::text, track_streams.date) = track_streams.ingestion_date) THEN track_streams.date ELSE (track_streams.ingestion_date)::timestamp without time zone END >= '2012-01-01 00:00:00'::timestamp without time zone)) THEN 1 WHEN ((track_streams.flags & 2::bigint) <> 0) THEN 2 WHEN (track_streams.play_source = ANY ('{5,6,7,8}'::integer[])) THEN 3 WHEN CASE WHEN (CASE WHEN (track_streams.ingestion_date IS NULL) THEN track_streams.date WHEN (date_trunc('day'::text, track_streams.date) = track_streams.ingestion_date) THEN track_streams.date ELSE (track_streams.ingestion_date)::timestamp without time zone END >= '2011-06-01 00:00:00'::timestamp without time zone) THEN (COALESCE(track_streams.playlist_id, 0::bigint) > 0) ELSE (track_streams.playlist_id IS NOT NULL) END THEN 4 ELSE 5 END = $0) THEN (archive.subscriptions.country)::character varying ELSE track_streams.country END), t.user_id, track_streams.preview, (CASE WHEN ((track_streams.stream_source_key_id = ANY ('{8,16}'::integer[])) AND (CASE WHEN (track_streams.ingestion_date IS NULL) THEN track_streams.date WHEN (date_trunc('day'::text, track_streams.date) = track_streams.ingestion_date) THEN track_streams.date ELSE (track_streams.ingestion_date)::timestamp without time zone END >= '2012-01-01 00:00:00'::timestamp without time zone)) THEN 1 WHEN ((track_streams.flags & 2::bigint) <> 0) THEN 2 WHEN (track_streams.play_source = ANY ('{5,6,7,8}'::integer[])) THEN 3 WHEN CASE WHEN (CASE WHEN (track_streams.ingestion_date IS NULL) THEN track_streams.date WHEN (date_trunc('day'::text, track_streams.date) = track_streams.ingestion_date) THEN track_streams.date ELSE (track_streams.ingestion_date)::timestamp without time zone END >= '2011-06-01 00:00:00'::timestamp without time zone) THEN (COALESCE(track_streams.playlist_id, 0::bigint) > 0) ELSE (track_streams.playlist_id IS NOT NULL) END THEN 4 ELSE 5 END), track_streams.stream_source_key_id, (COALESCE((user_registration.register_date <= CASE WHEN (track_streams.ingestion_date IS NULL) THEN track_streams.date WHEN (date_trunc('day'::text, track_streams.date) = track_streams.ingestion_date) THEN track_streams.date ELSE (track_streams.ingestion_date)::timestamp without time zone END), false)), track_streams.user_id, (CASE WHEN (user_registration.register_date <= CASE WHEN (track_streams.ingestion_date IS NULL) THEN track_streams.date WHEN (date_trunc('day'::text, track_streams.date) = track_streams.ingestion_date) THEN track_streams.date ELSE (track_streams.ingestion_date)::timestamp without time zone END) THEN users.gender ELSE NULL::character varying END), (CASE WHEN (user_registration.register_date <= CASE WHEN (track_streams.ingestion_date IS NULL) THEN track_streams.date WHEN (date_trunc('day'::text, track_streams.date) = track_streams.ingestion_date) THEN track_streams.date ELSE (track_streams.ingestion_date)::timestamp without time zone END) THEN date_part('year'::text, age(CASE WHEN (track_streams.ingestion_date IS NULL) THEN track_streams.date WHEN (date_trunc('day'::text, track_streams.date) = track_streams.ingestion_date) THEN track_streams.date ELSE (track_streams.ingestion_date)::timestamp without time zone END, (users.dob)::timestamp without time zone)) ELSE NULL::double precision END)
                           ->  Nested Loop  (cost=40230598.46..58079790334.65 rows=140484672356 width=95)
                                 Join Filter: ((CASE WHEN (track_streams.ingestion_date IS NULL) THEN track_streams.date WHEN (date_trunc('day'::text, track_streams.date) = track_streams.ingestion_date) THEN track_streams.date ELSE (track_streams.ingestion_date)::timestamp without time zone END >= time_period.start) AND (CASE WHEN (track_streams.ingestion_date IS NULL) THEN track_streams.date WHEN (date_trunc('day'::text, track_streams.date) = track_streams.ingestion_date) THEN track_streams.date ELSE (track_streams.ingestion_date)::timestamp without time zone END < time_period.past_end))
                                 ->  Hash Left Join  (cost=40230598.46..481074638.44 rows=775682240 width=87)
                                       Hash Cond: (track_streams.user_id = user_registration.user_id)
                                       ->  Hash Left Join  (cost=40173344.70..448709880.28 rows=775682240 width=79)
                                             Hash Cond: (track_streams.user_id = users.user_id)
                                             ->  Hash Left Join  (cost=37218851.64..347178159.42 rows=775682240 width=73)
                                                   Hash Cond: ((t.user_id = c.content_manager_id) AND ((track_streams.country)::text = (c.country)::text))
                                                   Join Filter: ((CASE WHEN (track_streams.ingestion_date IS NULL) THEN track_streams.date WHEN (date_trunc('day'::text, track_streams.date) = track_streams.ingestion_date) THEN track_streams.date ELSE (track_streams.ingestion_date)::timestamp without time zone END >= c.first_valid_day) AND (CASE WHEN (track_streams.ingestion_date IS NULL) THEN track_streams.date WHEN (date_trunc('day'::text, track_streams.date) = track_streams.ingestion_date) THEN track_streams.date ELSE (track_streams.ingestion_date)::timestamp without time zone END < c.one_past_last_valid_day))
                                                   ->  Hash Left Join  (cost=37218834.16..279295937.13 rows=775682240 width=67)
                                                         Hash Cond: (t.user_id = fallback.content_manager_id)
                                                         Join Filter: ((CASE WHEN (track_streams.ingestion_date IS NULL) THEN track_streams.date WHEN (date_trunc('day'::text, track_streams.date) = track_streams.ingestion_date) THEN track_streams.date ELSE (track_streams.ingestion_date)::timestamp without time zone END >= fallback.first_valid_day) AND (CASE WHEN (track_streams.ingestion_date IS NULL) THEN track_streams.date WHEN (date_trunc('day'::text, track_streams.date) = track_streams.ingestion_date) THEN track_streams.date ELSE (track_streams.ingestion_date)::timestamp without time zone END < fallback.one_past_last_valid_day))
                                                         ->  Hash Join  (cost=37218817.98..155389716.85 rows=775682240 width=61)
                                                               Hash Cond: (track_streams.track_id = t.track_id)
                                                               ->  Hash Right Join  (cost=36223425.43..114392317.09 rows=775682240 width=61)
                                                                     Hash Cond: (archive.subscriptions.user_id = track_streams.user_id)
                                                                     Join Filter: ((CASE WHEN (track_streams.ingestion_date IS NULL) THEN track_streams.date WHEN (date_trunc('day'::text, track_streams.date) = track_streams.ingestion_date) THEN track_streams.date ELSE (track_streams.ingestion_date)::timestamp without time zone END >= archive.subscriptions.created_at) AND (CASE WHEN (track_streams.ingestion_date IS NULL) THEN track_streams.date WHEN (date_trunc('day'::text, track_streams.date) = track_streams.ingestion_date) THEN track_streams.date ELSE (track_streams.ingestion_date)::timestamp without time zone END < COALESCE(archive.subscriptions.created_at, 'infinity'::timestamp without time zone)))
                                                                     ->  Merge Left Join  (cost=28078.03..28672.47 rows=26353 width=27)
                                                                           Merge Cond: ((archive.subscriptions.user_id = archive.subscriptions.user_id) AND ((((count(b.subscription_id)) + 1)) = (count(b.subscription_id))))
                                                                           ->  Sort  (cost=14110.51..14176.40 rows=26353 width=27)
                                                                                 Sort Key: archive.subscriptions.user_id, (((count(b.subscription_id)) + 1))
                                                                                 ->  Hash Join  (cost=9851.19..11541.95 rows=26353 width=27)
                                                                                       Hash Cond: (a.subscription_id = archive.subscriptions.subscription_id)
                                                                                       ->  GroupAggregate  (cost=8419.24..8880.42 rows=26353 width=16)
                                                                                             ->  Sort  (cost=8419.24..8485.13 rows=26353 width=16)
                                                                                                   Sort Key: a.subscription_id

 ->  Hash Left Join  (cost=1405.94..6032.69 rows=26353 width=16)
                                                                                                         Hash Cond: (a.user_id = b.user_id)
                                                                                                         Join Filter: (b.created_at < a.created_at)
                                                                                                         ->  Seq Scan on subscriptions a  (cost=0.00..921.53 rows=26353 width=24)
                                                                                                         ->  Hash  (cost=921.53..921.53 rows=26353 width=24)
                                                                                                               ->  Seq Scan on subscriptions b  (cost=0.00..921.53 rows=26353 width=24)
                                                                                       ->  Hash  (cost=921.53..921.53 rows=26353 width=27)
                                                                                             ->  Seq Scan on subscriptions  (cost=0.00..921.53 rows=26353 width=27)
                                                                           ->  Materialize  (cost=13967.51..14099.28 rows=26353 width=24)
                                                                                 ->  Sort  (cost=13967.51..14033.40 rows=26353 width=24)
                                                                                       Sort Key: archive.subscriptions.user_id, (count(b.subscription_id))
                                                                                       ->  Hash Join  (cost=9825.19..11489.95 rows=26353 width=24)
                                                                                             Hash Cond: (a.subscription_id = archive.subscriptions.subscription_id)
                                                                                             ->  GroupAggregate  (cost=8419.24..8880.42 rows=26353 width=16)
                                                                                                   ->  Sort  (cost=8419.24..8485.13 rows=26353 width=16)
                                                                                                         Sort Key: a.subscription_id
                                                                                                         ->  Hash Left Join  (cost=1405.94..6032.69 rows=26353 width=16)
                                                                                                               Hash Cond: (a.user_id = b.user_id)
                                                                                                               Join Filter: (b.created_at < a.created_at)
                                                                                                               ->  Seq Scan on subscriptions a  (cost=0.00..921.53 rows=26353 width=24)
                                                                                                               ->  Hash  (cost=921.53..921.53 rows=26353 width=24)
                                                                                                                     ->  Seq Scan on subscriptions b  (cost=0.00..921.53 rows=26353 width=24)
                                                                                             ->  Hash  (cost=921.53..921.53 rows=26353 width=24)
                                                                                                   ->  Seq Scan on subscriptions  (cost=0.00..921.53 rows=26353 width=24)
                                                                     ->  Hash  (cost=18166794.40..18166794.40 rows=775682240 width=58)
                                                                           ->  Seq Scan on track_streams  (cost=0.00..18166794.40 rows=775682240 width=58)
                                                               ->  Hash  (cost=758689.47..758689.47 rows=13617047 width=16)
                                                                     ->  Seq Scan on tracks t  (cost=0.00..758689.47 rows=13617047 width=16)
                                                         ->  Hash  (cost=9.99..9.99 rows=495 width=30)
                                                               ->  Seq Scan on streaming_costs fallback  (cost=0.00..9.99 rows=495 width=30)
                                                                     Filter: (country IS NULL)
                                                   ->  Hash  (cost=9.99..9.99 rows=499 width=33)
                                                         ->  Seq Scan on streaming_costs c  (cost=0.00..9.99 rows=499 width=33)
                                             ->  Hash  (cost=1728633.36..1728633.36 rows=70521336 width=14)
                                                   ->  Seq Scan on users  (cost=0.00..1728633.36 rows=70521336 width=14)
                                       ->  Hash  (cost=30163.34..30163.34 rows=1558434 width=16)
                                             ->  Seq Scan on user_registration  (cost=0.00..30163.34 rows=1558434 width=16)
                                 ->  Materialize  (cost=0.00..34.45 rows=1630 width=20)
                                       ->  Seq Scan on time_period  (cost=0.00..26.30 rows=1630 width=20)
               ->  Hash  (cost=10.45..10.45 rows=645 width=12)
                     ->  Seq Scan on times  (cost=0.00..10.45 rows=645 width=12)
         ->  Hash  (cost=29.40..29.40 rows=1940 width=12)
               ->  Seq Scan on last_streams  (cost=0.00..29.40 rows=1940 width=12)
(80 rows) 
```

**编辑配置** 8.3

```
 name            |                                        current_setting                                         
---------------------------+------------------------------------------------------------------------------------------------
 version                   | PostgreSQL 8.3.8 on x86_64-pc-linux-gnu, compiled by GCC gcc-4.3.real (Debian 4.3.2-1.1) 4.3.2
 autovacuum                | off
 checkpoint_segments       | 6
 client_encoding           | UTF8
 constraint_exclusion      | on
 default_statistics_target | 100
 effective_cache_size      | 512MB
 external_pid_file         | /var/run/postgresql/8.3-main.pid
 lc_collate                | en_GB.UTF-8
 lc_ctype                  | en_GB.UTF-8
 listen_addresses          | *
 log_line_prefix           | %t 
 log_lock_waits            | on
 maintenance_work_mem      | 2GB
 max_connections           | 50
 max_fsm_pages             | 3000000
 max_stack_depth           | 2MB
 port                      | 5432
 search_path               | "$user", archive, clone, live, public
 server_encoding           | UTF8
 shared_buffers            | 1536MB
 ssl                       | on
 TimeZone                  | GB
 unix_socket_directory     | /var/run/postgresql
 wal_buffers               | 8MB
 work_mem                  | 512MB 
```

9.1

```
 name             |                                            current_setting                                            
------------------------------+-------------------------------------------------------------------------------------------------------
 version                      | PostgreSQL 9.1.2 on x86_64-unknown-linux-gnu, compiled by gcc-4.4.real (Debian 4.4.5-8) 4.4.5, 64-bit
 archive_command              | test ! -f /storage/wal/data/%f && cp %p /storage/wal/data/%f
 archive_mode                 | on
 archive_timeout              | 5min
 autovacuum_freeze_max_age    | 1000000000
 autovacuum_vacuum_cost_delay | 20ms
 checkpoint_completion_target | 0.5
 checkpoint_segments          | 64
 checkpoint_timeout           | 1min
 checkpoint_warning           | 0
 client_encoding              | UTF8
 effective_cache_size         | 18GB
 effective_io_concurrency     | 6
 external_pid_file            | /var/run/postgresql/9.1-main.pid
 lc_collate                   | en_GB.UTF8
 lc_ctype                     | en_GB.UTF8
 listen_addresses             | 127.0.0.1,10.10.10.2,10.10.10.1,10.0.0.225
 log_destination              | stderr
 log_directory                | /var/log/postgresql
 log_filename                 | postgresql-%Y-%m-%d.log
 log_line_prefix              | %m [%u@%r:%d] 
 log_min_duration_statement   | 100ms
 log_min_error_statement      | info
 log_min_messages             | info
 logging_collector            | on
 maintenance_work_mem         | 2GB
 max_connections              | 100
 max_stack_depth              | 2MB
 max_wal_senders              | 5
 port                         | 5432
 search_path                  | "$user", archive, clone, live
 server_encoding              | UTF8 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T09:31:15.740

首先，除非您拥有大量 RAM，否则 work_mem 太多了。*您允许它为每个连接*或排序分配 0.5GB 的 RAM 。你会想要减少很多。这可能是您问题的很大一部分。将其减少很多，您可能会发现它可以解决您的问题。

# javascript - 返回引用的 Ecmascript 函数的真实示例？

> ID：13124417
> 
> 赞同：21
> 
> 时间：2012-10-29T15:14:41.510
> 
> 标签：javascript, reference

[ECMAScript 规范，第 8.7 节*参考规范类型*](http://es5.github.com/#x8.7)指出：

> 该`Reference`类型用于解释诸如 、 和赋值运算符等运算符的`delete`行为`typeof`。[…] 引用是解析的名称绑定。
> 
> 允许函数调用返回引用。这种可能性纯粹是为了宿主对象而被承认的。本规范定义的内置 ECMAScript 函数没有返回引用，也没有规定用户定义的函数返回引用。

最后两句话让我印象深刻。有了这个，你可以做类似`coolHostFn() = value`（[有效的语法](https://stackoverflow.com/a/3710015/1048572)，顺便说一句）的事情。所以我的问题是：

是否有任何定义产生`Reference`值的宿主函数对象的 ECMAScript 实现？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-30T16:50:25.483

谷歌浏览器的引擎就是以这种方式工作的。但是，您会注意到在控制台中`ReferenceError: Invalid left-hand side in assignment`执行以下操作时会收到一个：

```
var myObj = new Object();
function myFunc() {
    myObj.test = "blah";
    return myObj;
}
myFunc() = new String("foobar"); 
```

`myFunc`然而，这是一个早期错误，并且由于 v8 的 ECMAScript 实现，如果它在假设引用错误之前正确执行，这应该可以工作。

那么，在 v8 的当前实现中呢？是和否。它是默认实现的（由于语言的结构），但是该功能因不同的问题而停止。`coolHostFn() = value`不应该返回错误，并且确实应该能够正确执行。但是`3=4`，应该最肯定会返回左侧分配错误。

不完全是您问题的答案，但我希望它有助于澄清为什么它不起作用。

（这是问题/票证，以防有人想插话...... [http://code.google.com/p/v8/issues/detail?id=838](http://code.google.com/p/v8/issues/detail?id=838)）

# git - Git SSH 协议记住密码

> ID：13124422
> 
> 赞同：1
> 
> 时间：2012-10-29T15:15:03.923
> 
> 标签：git, ssh, debian, vps

我在 Debian VPS 上有一个 git 存储库，一切正常。除了我不想每次拉或推时都输入我的root密码。有没有办法记住密码？

我知道 SSH，我设法在 GitHub 上正确设置它，但我无法为我的 Debian VPS 做这件事。

我知道如何使用 ssh-keygen，但是在服务器上该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T15:21:45.990

常规过程是将您的公钥放在 ~/.ssh 上的授权密钥文件中，供您连接的用户使用。

如果您有一些特定于产品的东西（git 可以与 gitosis、gitolite、gitorious 一起安装），请提供有关您如何完成它的更多详细信息。

# xml - 在 Liferay 中包含静态站点地图

> ID：13124424
> 
> 赞同：8
> 
> 时间：2012-10-29T15:15:14.797
> 
> 标签：xml, static, liferay, sitemap, liferay-6

我需要放置一个静态`sitemap.xml`文件，因为 Liferay 不会生成所有所需的链接，还有一些不应该存在的链接。我认为这是因为它被我的`ext-plugin`.

问题是，是否可以在门户根目录中设置静态`sitemap.xml`（由谷歌机器人使用），而不被 Liferay 本身更改？

使用：Liferay 6.0.6

提前致谢 ：）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-30T09:00:23.543

一个解决方案是将您的静态站点地图添加到 Liferay 文档库，然后使用[Google 的网站管理员工具](https://www.google.com/webmasters/tools/home)告诉 Google 站点地图 URL 。

第二种解决方案是将站点地图添加到您的 ROOT 目录（如果您使用的是 Tomcat），但这可能需要对 Tomcat 设置和 Liferay 代码进行一些更改。

另一种解决方案是创建一个 portlet，它将您想要的所有链接生成到 XML 站点地图中，然后将该文件保存到您选择的位置。这是我采取的方法，因为我需要输出实际上不作为页面存在的完整文章 URL。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T15:06:05.720

最好的解决方案是在 Liferay 中创建一个 SitemapServlet 类（如 Johnny 所建议的），它会响应站点地图文件。不需要对 Tomcat 进行任何更改。

# asp.net - 将 HTML 电子邮件转换为纯文本，是否可以添加颜色/样式

> ID：13124426
> 
> 赞同：0
> 
> 时间：2012-10-29T15:15:15.597
> 
> 标签：asp.net, email, ascii

我们目前有一个糟糕的情况，我需要从 CMS 更改 HTML 正文内容并将其转换为纯文本，以便它可以进入电子邮件的正文。

```
 private static string StripHtmlToAscii(string mergeEmailBody)
    {
        var asciiEmailBody = mergeEmailBody;

        asciiEmailBody = asciiEmailBody.Replace("<br />", "%0D%0A").Replace("<br/>", "%0D%0A").Replace("+", "%20").Replace(" ", "%20").Replace("<p>", "").Replace("</p>", "%0D%0A%0D%0A").Replace("<br>", "%0D%0A");

        return asciiEmailBody;
    } 
```

往上看..

我想知道是否可以在纯文本电子邮件中添加粗体或颜色等样式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T15:17:12.237

不，纯文本是纯文本，它只会接受文本。添加颜色的唯一方法是发送 HTML 电子邮件

# cakephp - 我应该如何在 CakePHP 中命名我的表/类

> ID：13124430
> 
> 赞同：1
> 
> 时间：2012-10-29T15:15:36.207
> 
> 标签：cakephp, naming-conventions, cakephp-2.0, cakephp-model

我在一个职业体育统计网站上工作，我正在寻找关于如何设置我的表格以及命名我的类（模型/控制器）的建议。

例如，假设我正在处理来自 NBA、NFL 和 MLB 的数据。

`nba_players`用, `nba_Stats`, `nfl_players`, , `nfl_Stats`, `mlb_players`,等前缀设置表是否有意义`mlb_Stats`？

`NBA.players`将它们作为单独的数据库（例如, `NBA.stats`,`NFL.players`等）是否更有意义`NFL.stats`...

这导致我的下一个问题是设置我的课程。

我想确保在设置所有内容时都考虑到 CakePHP 约定。在我看来，如果我使用上面建议的前缀方法，我会将我的控制器命名为类似的名称`NbaPlayersController`，我的模型将是`NbaPlayer`. 我需要使用`$tablePrefix`此处概述的 => [http://book.cakephp.org/1.3/view/1060/tablePrefix](http://book.cakephp.org/1.3/view/1060/tablePrefix)吗？我猜我不会，但我不是 100% 确定。

如果我以后一种方式使用单独的数据库，我猜我将不得不拥有单独的应用程序，除非有另一种我不知道的方式来做到这一点。

此外，NBA、NFL 和 MLB 的数据是如此不同，并且会有大量不同的统计类别，因此我不想考虑将它们组合到单独的表格中，例如`players`然后`stats`有一个`league_type_id`来确定我是哪个联赛想要信息。我认为这种方式过于繁琐，并且会为数据库添加大量不必要的额外空间。

所以我想我的问题是，我上面列出的方法之一是在 Cake 中做事的首选方式，还是有另一种我应该做的方式，我没有在上面列出？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T15:53:45.400

不需要多个数据库，也不需要为不同的玩家类型设置单独的表——他们仍然是“玩家”。只需将每个统计信息保存在不同的表格中即可。

您的结构应如下所示：

**表：**

*   球员
*   联赛
*   联赛球员
*   mlb_stats
*   nfl_stats
*   nba_stats

**模型/协会：**

*   Player hasAndBelongsToMany League
*   联盟有并且属于许多玩家
*   MlbStat 属于玩家
*   NflStat 属于玩家
*   NbaStat 属于球员
*   玩家有一个 MlbStat
*   玩家有一个 NflStat
*   球员有一个NBA统计

# javascript - 打开新窗口后重定向 ASP.Net 页面

> ID：13124432
> 
> 赞同：3
> 
> 时间：2012-10-29T15:15:43.470
> 
> 标签：javascript, asp.net, popup

我在按钮单击事件的末尾有一些代码，该事件使用 RegisterStartupScript 打开一个新的 Windows（它是一个供用户打印的报告）

页面加载后，我想将用户从数据输入页面重新引导回默认页面，但如果我在其中输入一个`Response.Redirect`，则不会打开我的弹出窗口。知道为什么弹出窗口不会触发吗？

这是 C# 代码：

```
string myRptURL = "EstimateReport.aspx?id=" + hiddenID.Value;
                string script = "window.open('" + myRptURL + "','')";

                ClientScript.RegisterStartupScript(this.GetType(), "OpenWin", "<script>openNewWin('" + myRptURL + "')</script>");
                Response.Redirect("default.aspx?mess=" + Server.UrlEncode("New Estimate Created")); 
```

这是Javascript函数：

```
<script language="javascript" type="text/javascript">

function openNewWin(url) {
    var x = window.open(url, 'mynewwin', '_blank', 'toolbar=0,scrollbars=1,location=0,statusbar=0,menubar=0,resizable=1,width=600,height=520,modal=yes,alwaysRaised=yes');
    x.focus();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T15:18:10.520

正在取消脚本，`Response.Redirect`因为它没有被发送到客户端。改用javascript重定向。

```
ClientScript.RegisterStartupScript(this.GetType(), "OpenWin",
 "<script>openNewWin('" + myRptURL + "','" + "default.aspx?mess=" +
 Server.UrlEncode("New Estimate Created") + "')</script>");

function openNewWin(url, redirectUrl) {
    var x = window.open(url, 'mynewwin', '_blank', 'toolbar=0,scrollbars=1,location=0,statusbar=0,menubar=0,resizable=1,width=600,height=520,modal=yes,alwaysRaised=yes');
    x.focus();
    window.location = redirectUrl;
} 
```

# oracle - 在oracle数据库中创建用户

> ID：13124433
> 
> 赞同：0
> 
> 时间：2012-10-29T15:15:54.700
> 
> 标签：oracle, triggers, grant

我在 oracle 数据库中有以下要求

1.  创建用户并授予模式“abc”中的所有对象
2.  如果我将任何表添加到模式“abc”，那么用户默认应该有权访问而不执行单独的授予

目前我们正在为模式中创建的每个对象执行 Grant 语句，是否有任何一次性配置可用？请帮忙

注意：这里的用户不是架构所有者，例如。一些有权访问只读访问的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T15:18:23.653

在当前版本的 Oracle 中，您可以创建一个 DDL 触发器并让它自动将新创建的对象上的授权授予您的其他用户。

请参阅优秀的 PSOUG 站点以获取概述：[http ://psoug.org/reference/ddl_trigger.html](http://psoug.org/reference/ddl_trigger.html)

# objective-c - ARC - 为什么对象指针在函数定义中需要明确的所有权类型？

> ID：13124440
> 
> 赞同：3
> 
> 时间：2012-10-29T15:16:36.807
> 
> 标签：objective-c, xcode, automatic-ref-counting

```
void testFunction (id testArgument[]) {
    return;
} 
```

我收到错误“必须明确描述对象数组参数的预期所有权”。为什么 ARC 需要我指定 testArgument 数组中对象的所有权类型？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-29T16:33:10.610

为了扩展 Jeremy 的答案，ARC 在设计时有两个主要目标：

*   在纯 Objective-C 代码中使内存管理尽可能全自动，同时保持或最大化效率（事实上，ARC 可以比手动保留释放更有效）。

*   当跨越 C 和 Objective-C 之间的边界时，需要准确地声明内存管理意图。

同样，ARC 的实现非常保守。也就是说，在任何传统上“未定义”行为的地方，ARC 都会发出警告。

因此，在这种情况下，需要声明意图，以便编译器可以将一组一致且特定的内存管理规则应用于数组的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T15:19:52.383

因为ARC需要知道是否为你插入`retain`/`release`调用以避免内存泄漏。

# animation - 在 SVG 动画元素中的 2 个值之间切换

> ID：13124441
> 
> 赞同：2
> 
> 时间：2012-10-29T15:16:37.570
> 
> 标签：animation, svg

我想在 SVG 动画元素中的两个值之间切换。我试过这样：

```
<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="150" height="150" viewBox="0 0 150 150">

    <rect x="10" y="10" width="100" height="100" fill="blue" stroke="red">
        <animate attributeName="fill-opacity" values="0; 1" dur="1s" repeatCount="indefinite"/>
    </rect>
</svg> 
```

我希望在值 0 和 1 之间切换填充不透明度。但它的作用是从 0*淡化*到 1。我希望它保持 0 1 秒，然后保持 1 1 秒，回到 0 1 秒等等在。

我怎么做？我尝试了几乎所有可能的属性组合，但没有管理它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T15:27:27.637

您希望动画元素上的[calcMode](http://www.w3.org/TR/SVG/animate.html#ValueAttributes) ="discrete" 默认为线性。

# mysql - MySQL 查询优化 - 索引

> ID：13124443
> 
> 赞同：1
> 
> 时间：2012-10-29T15:16:41.003
> 
> 标签：mysql, sql-optimization

我有这些表：

```
CREATE TABLE  `cstat` (
  `id_cstat` bigint(20) NOT NULL,
  `lang_code` varchar(3) NOT NULL,
  `description` varchar(255) NOT NULL,
  `description_tr` varchar(255) NOT NULL,
  `id_ccountry` varchar(3) NOT NULL,
  `geometry_point` point DEFAULT NULL,
  `geometry_poly` polygon DEFAULT NULL,
  `name_type` varchar(1) NOT NULL,
  `bb_min_lat` double DEFAULT NULL,
  `bb_min_lon` double DEFAULT NULL,
  `bb_max_lat` double DEFAULT NULL,
  `bb_max_lon` double DEFAULT NULL,
  `has_ex` tinyint(1) NOT NULL DEFAULT '0',
  `order` int(11) DEFAULT NULL,
  PRIMARY KEY (`id_cstat`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8;

CREATE TABLE  `dstat` (
  `id_cstat` bigint(20) NOT NULL,
  `lang_code` varchar(3) NOT NULL,
  `word` varchar(30) NOT NULL,
  `word_no` tinyint(3) unsigned NOT NULL,
  `word_cnt` tinyint(3) unsigned NOT NULL,
  `word_grp` tinyint(3) unsigned NOT NULL,
  `name_type` char(1) CHARACTER SET ascii NOT NULL,
  `cstat_order` int(11) DEFAULT NULL
) ENGINE=MyISAM DEFAULT CHARSET=utf8; 
```

我需要使用 dstat 中的条件并按照 cstat.order 或 dstat.cstat_order 的顺序从 cstat 中选择一条记录。

我的查询如下所示：

```
SELECT cstat.ID_CSTAT, cstat.LANG_CODE, cstat.DESCRIPTION, cstat.DESCRIPTION_TR, cstat.ID_CCOUNTRY, AsBinary(cstat.GEOMETRY_POINT) AS GEOMETRY_POINT, cstat.NAME_TYPE, cstat.BB_MIN_LAT, cstat.BB_MIN_LON, cstat.BB_MAX_LAT, cstat.BB_MAX_LON, cstat.HAS_EX
FROM cstat cstat
JOIN dstat W0
ON (W0.ID_CSTAT = cstat.ID_CSTAT)
where
  (W0.WORD = 'ceska') AND
  (W0.NAME_TYPE = 'B')
ORDER BY W0.CSTAT_ORDER; 
```

谁能帮我创建什么索引来防止使用文件排序？我相信我已经尝试了几乎所有的方法，但我失败了。此基本查询有更多修改（表 dstat 的另一个或多个连接，但现在不重要）。

非常感谢你的帮助。

编辑：说实话 - 我已经尝试了很多索引。我声明的基础是 cstat_id_cstat 上的主键。目前我有以下索引：

```
KEY `ix_dstat_nt_word_id_order` (`name_type`,`word`,`id_cstat`,`cstat_order`);
KEY `ix_dstat_word_id_order` (`word`,`id_cstat`,`cstat_order`);
KEY `ix_dstat_nt_grp_no_word_id_order` (`name_type`,`word_grp`,`word_no`,`word`,`id_cstat`,`cstat_order`);
KEY `ix_dstat_grp_no_word_id_order` (`word_grp`,`word_no`,`word`,`id_cstat`,`cstat_order`);
KEY `ix_dstat_nt_grp_word_id_order` (`name_type`,`word_grp`,`word`,`id_cstat`,`cstat_order`); 
```

这部分解决了我的索引阅读问题。但是排序总是使用文件排序。

**`EXPLAIN`**

```
1, 'SIMPLE', 'W0', 'ref', 'ix_dstat_nt_word_id_order,ix_dstat_word_id_order,ix_dstat_nt_grp_no_word_id_ord‌​er,ix_dstat_nt_grp_word_id_order', 'ix_dstat_nt_word_id_order', '93', 'const,const', 1, 'Using where; 使用索引；使用文件排序'
1，'简单'，'cstat'，'eq_ref'，'PRIMARY，ix_cstat_id_order'，'PRIMARY'，'8'，'search_2012_q3_cze_svk_dev.W0.id_cstat'，1，''
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T15:20:35.447

看起来你应该在 cstat.id_cstat 上有一个索引，在 dstat 上有一个用于单词的索引，以及 name_type

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T15:20:52.333

更改您的表格并添加表格上`index`的列`id_cstat``dstat`

```
ALTER TABLE dstat ADD INDEX tb_idx(id_cstat) 
```

所以它不需要全表扫描，然后也在表上`cstat`

```
ALTER TABLE cstat ADD INDEX tba_idx(`order`) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T13:26:21.957

通过添加以下索引来解决问题：

```
KEY `ix_dstat_nt_word_order_id_grp_no`（`name_type`、`word`、`cstat_order`、`id_cstat`、`word_grp`、`word_no`）；
KEY `ix_dstat_word_order_id_grp_no`（`word`、`cstat_order`、`id_cstat`、`word_grp`、`word_no`）；

```

# c# - 在 WinRT 中从外部获取 Page 实例

> ID：13124445
> 
> 赞同：2
> 
> 时间：2012-10-29T15:16:43.193
> 
> 标签：c#, microsoft-metro, windows-runtime

我目前正在开发一个包含 2 页（`page1`，`page2`）的 Windows 8 应用程序。

将表单 page1 导航到 page2 后，使用`this.Frame.Navigate(typeof(AnotherPage));` 我如何访问`page2`表单的实例`page1`，（***我们可以通过具有静态实例属性来实现它并在调用构造函数时设置它***）

但是是否有任何内置功能可以从当前页面外部访问页面的当前实例，或者在 WinRT 范例中推荐这种编程模式，有没有办法实现我的场景。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T16:29:32.193

第一件事是 - 默认情况下，在默认情况下导航到下一页后，上一页的实例不会保存在内存中 - 除非您更改页面的默认 NavigationCacheMode，否则这可能不是一个好主意，除非页面采用加载时间很多，就像您经常返回的中心页面。

我建议的方法是使用[MVVM](http://blog.xyzzer.me/2012/08/27/minimalistic-mvvm-for-windows-runtime-xaml-platform-development-with-c/)模式，因此页面永远不必相互交谈，而视图模型可以做到这一点。然后使用 pub/sub 模式和 MVVM Light Toolkit 中的 Messenger 类等助手来发送弱事件/消息，而不是在对象之间添加紧密耦合。

总而言之 - 这取决于您想要做什么以及为什么您希望您的页面相互交谈。您可以在 Navigate() 调用中传递一个参数（如果您想使用 SuspensionManager 类和 Frame 类的内置序列化来支持应用程序暂停，请确保它只是一个原始类型）。您还可以使用某种全局存储库或设置服务在页面之间共享数据。

如果您不愿意投资这些东西 - 使用普通的旧静态类可能对您来说就足够了。什么都行。

# javascript - 覆盖 javascript 标准提交函数行为

> ID：13124452
> 
> 赞同：0
> 
> 时间：2012-10-29T15:17:25.200
> 
> 标签：javascript, jquery

在一个巨大的网络应用程序中，我需要一个提交表单的解决方法。

为了覆盖内置的 javscript 方法，我尝试[了这个示例](http://greasemonkey.win-start.de/patterns/override-method.html)，但我什至没有收到警报弹出窗口。

我对覆盖提交功能的想法是这样的：

```
function submit(event) {
        var target = event ? event.target : this;
        $.ajax({
            url: target.action,
            data: $('form').serialize(), // &nd someone knows how I can get the serialize() of the form I just clicked?
            success: function (data) {
                alert('done');
            },
            error: function (data) {
                alert('error (check console log)');
                console.log(data);
            }
        });
        //this._submit();
        return false;
    } 
```

到处使用提交的方式并不一致。原始代码中的可能性：

```
<button onclick="form.submit">
onclick="calltoFunction();" // where inside the function the submit is called
<button type="submit" // the normal way 
```

我想我的想法是可能的，因为我之前覆盖了 js-functions。但是我应该如何处理提交部分。欢迎任何建议，想法，修复！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T15:22:41.153

将事件绑定到您的按钮，如下所示：

```
$('#my_button').click(
    function(event){
        event.preventDefault(); //This will prevent the buttons default submit behavior
        ...//The rest is up to you!
}
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T15:24:21.860

```
function submit(form) {
    $.ajax({
        url: $(form).attr('action'),
        data: $(form).serialize(),
        success: function (data) {
            alert('done');
        },
        error: function (data) {
            alert('error (check console log)');
            console.log(data);
        }
    });
    return false;
}

<form id="my-form" action="/my-action-file.php" method="post" onsubmit="return submit('#my-form');">
    <!-- my form content -->
</form> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T15:27:29.487

我怀疑你会发现这很有用：

```
$('#yourForm').beforeSubmit(function()
{
    return doWhateverYouLikeAndReturnTrueToContinueFormSubmition($(this));
}); 
```

这将在任何其他表单提交代码**之前**执行 doWhateverYouLikeAndReturnTrueToContinueFormSubmition

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T15:34:53.523

你可以试试这个：

```
function submit(event) {
    var target = event ? event.target : this;
    $.ajax({
        url: target.action,
        type: "POST",
        data: $('form').serialize(), // &nd someone knows how I can get the serialize() of the form I just clicked?
        success: function (data) {
            alert('done');
        },
        error: function (data) {
            alert('error (check console log)');
            console.log(data);
        }
    });
    //this._submit();
    return false;
    } 
```

# python - Django中基于接口和基于API的编程

> ID：13124456
> 
> 赞同：1
> 
> 时间：2012-10-29T15:17:33.890
> 
> 标签：python, django, api, interface

我已经在网上搜索过这个问题。并且已经有一个具有相同标题的帖子，但并未真正描述实际问题。所以我还没有找到合适的解决方案。

我正在开发非常大的项目。因此，绝对有必要将其拆分为多个层或组件或您想要调用的任何内容。

每一层都暴露了一些功能。对于每一层，它如何实现并不重要（因为这在大型项目中经常发生变化），但重要的是我们如何调用功能以及它返回给我们的内容 => 合约！

如果我们有两层，一层与 TransactionService 相关，另一层与 BankService 相关，BankService 比 TransactionService 更高一层，将使用 transactionservice。transactionService 只会做一个事务：

```
TransactionVO doTransaction(clientFromVO, clientToVO); 
```

另一层做额外的事情.. TransactionVO 不是模型类！它们是值对象，因此服务的实现不会暴露在层之外。在java中，我们可以通过以下方式实现：

```
public interface TransactionService {
   TransactionVO doTransaction(clientFromVO, clientToVO);
} 
```

实现将是这样的：

```
public class TransactionServiceImpl {
   public TransactionVO doTransaction(clientFromVO, clientToVO) { 
     // implementation 
   }
} 
```

因为我们预先定义了我们的接口，所以我们有一个契约，它说明了每个服务的外观（没有实际的实现，TransactionServiceImpl 还不需要存在）。

因此，2 个团队可以在每一层上同时工作，他们可以模拟实现。我想知道如何在 Django 中实现这一点！为每一层创建一个 REST api 根本就没有完成（开销很大，性能问题..）那么对于那些有大型项目经验的人来说？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T15:57:37.583

Python 没有与 Java 相同的“接口”。取而代之的是“鸭子打字”——其中“界面”隐含在暴露的行为中。这个问题（[How to handle "duck typing" in Python?](https://stackoverflow.com/questions/6589967/how-to-handle-duck-typing-in-python)）中的答案应该解决一些围绕这个问题。

对于像 Python 这样的动态语言，如果你想在一个类实现之前定义它的行为，你需要提前编写一个测试用例。如果您不熟悉 Python 中的测试驱动开发，您可以[从阅读本文开始。](http://www.blog.pythonlibrary.org/2011/03/09/python-102-an-intro-to-tdd-and-unittest/)

有许多可用于 Python 的模拟库。[这](http://www.voidspace.org.uk/python/mock/)是一个例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T09:36:48.637

似乎 python 没有提供这个开箱即用的功能。但是有一个叫做 abc 模块的东西：

我引用了[http://www.doughellmann.com/PyMOTW/abc/ “通过定义一个抽象基类，您可以为一组子类定义一个通用 API。此功能在](http://www.doughellmann.com/PyMOTW/abc/)**第三方存在** 的情况下特别有用**将提供实现**......”

这不是一个完美的解决方案，但它提供了我需要的一些东西。以下评论让我明白了这一点：[Python 中的 Java 抽象/接口设计，](https://stackoverflow.com/questions/8181576/java-abstract-interface-design-in-python)因此值得一提；）

# multidimensional-array - OCaml Bigarray：比内置数组慢？

> ID：13124458
> 
> 赞同：5
> 
> 时间：2012-10-29T15:17:49.333
> 
> 标签：multidimensional-array, ocaml

`Bigarray`当与 C 接口不是问题时，使用的缺点是什么？它们是否较慢，尤其是对于小型 2D 矩阵？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-29T15:49:04.860

仅基于查看实现，我会说如果您创建大量短期数组，bigarrays 可能会更慢。看起来它们的内存是在通常的 OCaml GC 之外进行管理的，它非常好地处理短期对象。

您还可能会发现对 bigarrays 的访问不是内联的，而对内置数组的访问是内联的。

另一方面，内置数组将对二维有额外的间接性。

如果性能真的很重要，您可能必须对您的特定应用程序进行基准测试。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-29T15:48:13.063

主要的缺点就在类型中 - bigarrays 只能保存原始类型的一小部分

# ruby-on-rails - Ruby on Rails has_many_through 带有验证和逻辑以确保连接表中只有一条记录根据需要进行更新

> ID：13124460
> 
> 赞同：1
> 
> 时间：2012-10-29T15:17:55.090
> 
> 标签：ruby-on-rails, ruby, activerecord

我有一个 Course 模型，它有许多通过与连接表 CourseUser 的用户模型的关联。连接表有一个属性 type_str，它指定用户扮演的角色。我添加了验证以确保每个课程（用户对）的连接表中只存在一条记录。问题是如果该记录已经存在，则确保更新该记录，而不是添加一个新记录，这当然会使验证失败。

用户等级：

```
class User < ActiveRecord::Base

...
  has_many :courses_enrolled_on, :through => :course_enrollees, :source => :course, :conditions => { :course_users => { :type_str => "enrollee" } }

  has_many :course_users
  has_many :courses, :through => :course_users, :source => :course, :readonly => true 
end 
```

课程班

```
class Course < ActiveRecord::Base

  has_many :course_enrollees, :conditions => { :type_str => "enrollee" }, :class_name => CourseUser
  has_many :enrollees, :through => :course_enrollees, :source => :user

  has_many :course_users
  has_many :users, :through => :course_users, :source => :user, :readonly => true
end 
```

课程类别：

```
class CourseUser < ActiveRecord::Base
  belongs_to :course
  belongs_to :user

   validates_uniqueness_of :course_id, :scope => :user_id
end 
```

# ios - App Store 加速标准

> ID：13124464
> 
> 赞同：5
> 
> 时间：2012-10-29T15:18:17.603
> 
> 标签：ios, app-store

经过 2 个月的测试，我们向 App Store 提交了一个应用程序，发现如果 Facebook 个人资料没有当前位置值，则从 Facebook 返回的信息为空而不是空白（只是我们从未测试过的东西，因为我们所有的测试人员都有输入的位置 - 只是我们的失误）。

这导致我们的应用程序在登录时崩溃。我们提交了一个 2.0.1 版本，通过加急请求修复了这个问题，我们从 Apple 收到了这个 ???? （我的问题是......如果不是为了修复您的应用程序的登录崩溃，加快审查的标准是什么？）

来自 Apple：（当然来自 do_not_reply@apple.com）所以我不能问他们。

> 感谢您联系我们，要求对您的应用 Sligage 进行快速审核。
> 
> 虽然我们尽最大努力满足加急审核的请求，但遗憾的是，我们目前无法批准您的请求，因为它不符合加急审核的标准。
> 
> 帮助您将应用程序或更新放到 App Store 对我们来说非常重要，我们正在努力尽快处理所有提交。我们感谢您的理解。
> 
> 最好的祝福，
> 
> 应用审核小组

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-01-08T14:27:55.030

加急审查是一个基于队列的过程，就像标准审查一样。但是，您可以根据您提供的加急原因或您的应用当前正在 App Store 中推广的原因将队列“向上”移动。

例如，如果您只是“需要快速”并且没有真正的问题/错误要修复，那么您目前可能不太重要。

但是，有一些方法可以让你完全跳过这个过程，或者至少不用担心你的应用程序被损坏的时间限制。为此，您可以使用[rollout.io](https://rollout.io) - 一个 SDK，可让您立即解决生产中的质量问题，并且完全符合 Apple 的准则。（免责声明：我是 Rollout.io 团队的一员）

您将能够控制问题，而不必等待加急审查发生。

希望这可以帮助！Eido，Rollout.io

PS这个网站显示了苹果应用商店的平均审批时间（常规提交流程）- [http://appreviewtimes.com/](http://appreviewtimes.com/)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-29T15:22:54.283

虽然这是一个糟糕的地方，但从 Apple 的角度来看，这并不重要。如果您的更新解决了导致用户数据丢失的问题，那么他们可能会接受加急审核。但是对于某些用户来说，简单的崩溃对他们来说并不重要。我知道这是给你和用户的。但是，如果 Apple 对每个仅修复崩溃的更新都授予加急审核，那么除了加急审核之外什么都没有。

# crystal-reports - 水晶报表，子报表详情部分不显示下一批记录

> ID：13124468
> 
> 赞同：0
> 
> 时间：2012-10-29T15:18:41.547
> 
> 标签：crystal-reports, crystal-reports-2010

我在主报表的页脚中放置了一个子报表，并将其详细信息部分设置为每页显示五条记录（通过分页选项卡）。我确信我的查询返回九条记录。

预览报告后，在第一页上显示前五条记录。但是，在第二页上，它还显示前五条记录，而不是其余四条记录。

我不确定问题出在哪里，因为我刚开始使用水晶报表。希望您能够帮助我。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T15:22:54.617

您需要设置子报告链接。

这会将您的主报告中的数据链接到您的子报告。在 Crystal 2008 中，您右键单击子报表并选择“更改子报表链接...”选项。然后，您可以选择要从主报告流向子报告的数据。否则，您的子报告将被视为一个完全独立的报告，您只是将其插入主报告之上，并且在每个实例中都是相同的。

此外，在插入子报告时使用组而不是详细信息部分可能是个好主意。

# facebook-graph-api - 将评论发布到 FB 页面成功但发送 OAuthException 错误

> ID：13124469
> 
> 赞同：1
> 
> 时间：2012-10-29T15:18:42.373
> 
> 标签：facebook-graph-api, comments

我正在尝试对 FB 页面上的帖子发表评论。该评论成功发送到 FB，但我收到错误作为响应，而不是新的评论 ID。

这是我的要求：

curl --data "message=testing" [https://graph.facebook.com/PAGEID_POSTID/comments?access_token=ACCESS_TOKEN](https://graph.facebook.com/PAGEID_POSTID/comments?access_token=ACCESS_TOKEN)

和错误：

{"error":{"message":"发生意外错误。请稍后重试您的请求。","type":"OAuthException","code":2}}

我做错了什么还是这是一个错误？

# c# - 转换从通用基础继承的对象时遇到问题

> ID：13124479
> 
> 赞同：1
> 
> 时间：2012-10-29T15:19:19.053
> 
> 标签：c#, generics, inheritance

我正在尝试处理更复杂的继承结构和泛型，并且我正在尝试为遵循此诉讼的当前项目创建一些架构。我目前的问题是我收到此错误：

> 类型参数“Foo”不继承或实现约束类型“ListBase”

```
 public class ItemBase {}
  public class ListBase<T> where T : ItemBase
  {
    public virtual List<T> ListExample {get; set; }
  } 
```

这些是我的基类，尽管它们可能没有正确命名我只是试图展示一个简单的例子来说明我想要实现的目标。

```
 public class FooItem : ItemBase { }
  public class Foo : ListBase<FooItem>
  {
    public override List<FooItem> ListExample { get; set;}
  } 
```

所以我可以扩展列表的初始基类并用它做更多事情，但我想要一种处理所有这些类的通用方法。

```
 public class ListHandler<T> where T : ListBase<ItemBase> { } 
```

`Foo`当我尝试传递我提到`T`的`ListHandler`错误时，我认为不可避免地因为`Foo`is a `List<ItemBase>`and `FooItem`is 类型`ItemBase`我将能够做到这一点`var handler = new ListHandler<Foo>();`。

谁能解释为什么我不能这样做或我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T15:21:24.543

A`ListBase<ItemBase>`与 a 不同`ListBase<FooItem>`。
特别是，您可以将*任何*类型添加`ItemBase`到`ListBase<ItemBase>`.

您需要接受两个通用参数：

```
public class ListHandler<TList, TItem> where T : ListBase<TItem> where TItem : ItemBase { } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T16:02:29.523

您需要提供*项目*类型的类型参数，而不是列表类型。为了澄清这一点，请尝试扩展`ListHandler`类以包含一个`AddItem`将`ItemBase`项目添加到`ListBase`实例的方法：

```
// As is: Won't work, because there is no way to refer to the constructed
// specific type of ItemBase:
public class ListHandler<TList> where TList: ListBase {
    public TList List { get; private set; }
    public ListHandler(TList List) { this.List = List; }
    public void AddItem(T???? item) { List.ListExample.Add(item); }
}

// Corrected: this will work because TItem can be used to constrain
// the constructed ListBase type as well:
public class ListHandler<TItem> where TItem : ItemBase {
    public ListBase<TItem> List { get; private set; }
    public ListHandler(ListBase<TItem> List) { this.List = List; }
    public void AddItem(TItem item) { List.ListExample.Add(item); }
}

// And this will work just fine:
var handler = new ListHandler<FooItem>(new FooList()); 
```

# android - 为什么它在触发后不更新屏幕？

> ID：13124480
> 
> 赞同：0
> 
> 时间：2012-10-29T15:19:20.737
> 
> 标签：android, scheduled-tasks, task

我正在安排一个简单的任务，应该在 4 秒内更新一个文本字段。

然而，每次这被称为活动暂停并且在我重新启动活动之前不会在文本字段中显示值。

```
 private void showDelayedValue() {

    Runnable longRunningTask = new Runnable() {
        public void run() {

        int randomVal = randomNumberGenerator.nextInt(30 - -10) - 10; //random number between -10 and 30
        String randomValStr = Integer.toString(randomVal);

            Log.i(this.getClass().getSimpleName(),
                "FIRED startScheduler: " + randomValStr);

        theFieldOnScreenTV.setText(randomTempStr);

        }
    };
    //show the value in 2 seconds
    scheduledTaskExecutor.schedule(longRunningTask, 4, TimeUnit.SECONDS);

    } 
```

日志显示：

```
FIRED startScheduler: 4 
```

但不更新`TextView theFieldOnScreenTV`

而是 在 LogCat 中显示`onPause`后立即调用。`Fired startScheduler:`

非常感谢！

编辑：

按照亚历克斯的方法，这对我有用：

```
private void showDelayedValue() {
    int randomX = randomNumberGenerator.nextInt(30 - -10) - 10; 
    final String randomXStr = Integer.toString(randomX);
    final Runnable updateFieldR = new Runnable() {
        public void run() {
        theFieldOnScreenTV.setText(randomXStr);
        }
    };

    Runnable longRunningTask = new Runnable() {
        public void run() {
        theFieldOnScreenTV.post(updateFieldR);

        }
    };
    scheduledTaskExecutor.schedule(longRunningTask, 4, TimeUnit.SECONDS);

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T15:24:39.320

代替

```
theFieldOnScreenTV.setText(randomTempStr); 
```

尝试

```
theFieldOnScreenTV.post(new Runnable() { theFieldOnScreenTV.setText(randomTempStr); } ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T15:57:10.833

尝试使用处理程序。

```
Handler handler = new Handler();
handler.post(new Runnable() {

@Override
public void run() {

theFieldOnScreenTV.setText(randomTempStr);          
    }
}); 
```

# sql-server - （空）选择角色时 SSAS 多维数据集中的值

> ID：13124481
> 
> 赞同：3
> 
> 时间：2012-10-29T15:19:24.923
> 
> 标签：sql-server, ssas, security-roles

我有以下问题：

当我在 SSAS 中处理多维数据集并以普通用户的身份不受限制地查看数据时，一切都很好，聚合结果显示它们的正常值。

当我在 Data Tools (MsSQL 2012) 中选择将数据作为特定角色查看时，所有安全约束都正常工作（例如，我只查看特定国家数据而没有其他），但所有相应的值都是（null）。

我已经尝试过 Visual Totals = true 并且我对维度和多维数据集都施加了这些限制。计算脚本中的 CALCULATE 仍然存在（当我选择使用普通用户时一切正常）。

这发生在度量值和计算值上！！！

任何想法可能会发生什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T08:12:01.133

**解决了。**

这个问题与**细胞数据**有关！！！

数据工具工作室会**自动检查**相应选项卡中的**启用单元格数据权限**复选框。

如果这些中没有定义 MDX 查询，则自动假定您无权查看任何聚合度量数据！！！！

***取消选中它们***或***定义***正确的***MDX 查询***，问题将得到解决！！！！

# ms-access - 有没有办法在转换后的 access 97 表单上应用主题？

> ID：13124482
> 
> 赞同：3
> 
> 时间：2012-10-29T15:19:25.603
> 
> 标签：ms-access, ms-access-2010

我将 access 97 应用程序升级为 access 2010

当我创建一个新表单时，就像一个主设计，我可以一键应用到每个表单。此功能不适用于我的旧表单（没有任何变化）。

![在此处输入图像描述](../Images/4e56010491f6c8119a6bfb83c90e14e6.png)

我试图从一个空白数据库开始并导入所有内容。现在表单看起来更好一些，因为按钮是圆形的并且字体更好，但我仍然无法使用主设计更改标签背景。

颜色就像在每个标签的属性中硬编码一样。我可以全部选择并更改它，但我必须为每种表格都这样做。有没有办法可以将主设计与旧表格一起使用？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T21:08:50.800

Theme fore colors are applied to labels using the following properties:

```
ForeThemeColorIndex
ForeTint
ForeShade 
```

As near as I can tell, when you import a form from a different database where themes were not applied, the ForeThemeColorIndex value will be set to -1 for some controls. This basically tells Access that these controls have a color that's "hard coded" (though not in VBA).

I'm thinking the only way to fix this problem is to use VBA to open each form in design view, loop through all of the form's controls, and if the control is a label control (or any other control you're having trouble with), apply your theme colors using the correct theme-related properties. Once you've set the control to use theme colors, changing or applying themes should work without a hitch.

Here's a list of these properties. This is not necessarily comprehensive. I just pulled this using a basic loop looking at properties for a label control. These properties are the same for textbox controls. This list is with theme colors applied successfully to my label control named lblLastName:

```
lblLastName: BackThemeColorIndex=1
lblLastName: BackTint=100
lblLastName: BackShade=100
lblLastName: BorderThemeColorIndex=0
lblLastName: BorderTint=50
lblLastName: BorderShade=100
lblLastName: ThemeFontIndex=1
lblLastName: ForeThemeColorIndex=0
lblLastName: ForeTint=75
lblLastName: ForeShade=100
lblLastName: GridlineThemeColorIndex=1
lblLastName: GridlineTint=100
lblLastName: GridlineShade=65 
```

Here's a link to some of Microsoft's Documentation on this: [http://msdn.microsoft.com/en-us/library/office/ff195247.aspx](http://msdn.microsoft.com/en-us/library/office/ff195247.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T18:13:51.380

尝试在设计模式下打开表单，然后按 ctrl-a 选择所有对象。然后从设计选项卡上的功能区中，只需单击主题并选择图片显示的主题。

请记住，如果您使用 mdb，该选项将被禁用，因此您必须使用较新的 accDB 格式才能使用此选项。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2018-08-23T17:03:12.597

解决此问题的一种方法是将（旧）自动套用格式命令添加到快速访问工具栏。虽然它不会将主题功能添加到表单中，但它是一种以相当快速和一致的方式重新格式化表单的快速方法。

# java - 在 JTable 中禁用单元格轮廓

> ID：13124486
> 
> 赞同：4
> 
> 时间：2012-10-29T15:19:31.883
> 
> 标签：java, swing, jtable

我正在使用 a`JTable`来显示一些数据。用户只能选择 的整行，而`JTable`不是单个单元格。这是用于仅允许行选择的代码：

```
jTable1.setCellSelectionEnabled(false);
jTable1.setColumnSelectionEnabled(false);
jTable1.setRowSelectionAllowed(true);
jTable1.setSelectionMode(javax.swing.ListSelectionModel.SINGLE_SELECTION); 
```

但是当用户选择一行时，该行中的单元格会被勾勒出来（下图中的第一列/最后一行）：

![在此处输入图像描述](../Images/8064ec5ea638c889efde000c44580852.png)

如何禁用此大纲？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-29T16:02:45.377

您可以简单地从 UI 的角度扩展`DefaultTableCellRenderer`并假装该单元格没有“聚焦”。

我使用以下渲染器删除了边框：

```
private static class BorderLessTableCellRenderer extends DefaultTableCellRenderer {

    private static final long serialVersionUID = 1L;

    public Component getTableCellRendererComponent(
            final JTable table,
            final Object value,
            final boolean isSelected,
            final boolean hasFocus,
            final int row,
            final int col) {

        final boolean showFocusedCellBorder = false; // change this to see the behavior change

        final Component c = super.getTableCellRendererComponent(
                table,
                value,
                isSelected,
                showFocusedCellBorder && hasFocus, // shall obviously always evaluate to false in this example
                row,
                col
        );
        return c;
    }
} 
```

您可以像这样在 JTable 上设置它：

```
table.setDefaultRenderer( Object.class, new BorderLessTableCellRenderer() ); 
```

或者，对于字符串：

```
table.setDefaultRenderer( String.class, new BorderLessTableCellRenderer() ); 
```

这有点像 hack，因为它只是重用原始渲染器并假装焦点/选定的单元格不是，但它应该让你开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-24T21:29:10.743

我刚刚找到了一个非常简单的技巧来改变这种行为。事实证明，细胞聚焦是表格聚焦的延伸。如果表格不能集中在单个单元格上（尽管仍然显示行选择）。

您只需要一行简单的代码：

```
jTable1.setFocusable(false); 
```

这是我的一个项目的图片，它实现了同样的行为（注意：我使用的是 windows LookAndFeel）

[![不可聚焦的细胞](../Images/761189b816938c76f0616bde221ece7e.png)](https://i.stack.imgur.com/moYj8.png)

无论您在整行下单击的哪一列都被选中，但您单击的单元格未获得焦点。我希望它有帮助！:)

# python - 为什么导入子流程会改变我的输出？

> ID：13124488
> 
> 赞同：12
> 
> 时间：2012-10-29T15:19:37.373
> 
> 标签：python, python-import, python-2.5

我注意到使用 Python 2.5.2 的以下内容（使用 2.7 不会发生）：

```
#!/usr/bin/python

import sys

for line in sys.stdin:
   print line, 
```

输出：

```
$ echo -e "one\ntwo\nthree" | python test.py
$ one
$ two
$ three 
```

正如预期的那样。但是，如果我导入`subprocess`到这个脚本：

```
#!/usr/bin/python

import sys
import subprocess

for line in sys.stdin:
   print line, 
```

输出：

```
$ echo -e "one\ntwo\nthree" | python test.py
$ two
$ three 
```

第一行输出发生了什么？

**更新：**

我想我可能已经发现了问题的根源。我`time.py`的`cwd`. `time.pyc`每次我运行导入的脚本时都会创建一个，`subprocess`这表明`./time.py`它也在被导入。如果我删除`.pyc`和`time.py`文件，脚本将正常运行；但是，仍然存在一个问题，为什么`subprocess`进口也会导致`./time.py`进口？

我已将其进一步缩小到`time.py`导致奇怪行为的确切行。我已将工作目录和文件内容剥离为影响输出的内容：

**测试.py**

```
#!/usr/bin/python

import sys
import subprocess

for line in sys.stdin:
   print line, 
```

**时间.py**

```
#!/usr/bin/python

import sys

for line in sys.stdin:
   hour = re.search(r'\b([0-9]{2}):', line).group(1) 
```

使用任何类型的输入运行`test.py`都会导致第一行输出被省略`time.pyc`并被创建。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T17:26:47.763

听起来您的本地 time.py 将被导入而不是全局时间模块。您可能想要重命名它，或者至少开始检查它是​​作为脚本运行还是作为模块导入。

如果您想测试它，这将为您证明。

```
#!/usr/bin/python

import sys

# Test that script was run directly
if __name__=='__main__':
    for line in sys.stdin:
       hour = re.search(r'\b([0-9]{2}):', line).group(1)
else:
    print 'Imported local time.py instead of global time module!'
    sys.exit(1) 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-10-29T15:34:04.070

`print line,`2.7 之前没有换行，所以它覆盖了第一行。丢掉逗号，结果是一样的。

# hadoop - 如何创建跨越两个文件的hadoop输入拆分？

> ID：13124498
> 
> 赞同：2
> 
> 时间：2012-10-29T15:20:03.997
> 
> 标签：hadoop

我的数据输入文件的长度都相同，但是其中的记录可能跨越两个文件（从第一个文件的末尾开始，到第二个文件的开头结束）。

是否可以创建一个允许我跨越这两个文件的输入拆分？

创建一组全新的文件以便记录不跨越多个文件是否更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T15:27:26.850

我肯定会确保您的记录不会跨越一个以上的文件：理论上，您可以编写自己的输入格式来处理这个问题，但是开销可能像您一样相当大 - 必须确保***您***知道哪个文件属于一起 - 接管 jobtracker 和名称节点为您履行的部分责任。

您应该可以自由地告诉 jobtracker/name 节点输入在哪里，并且为了真正并行处理，您不希望***收回***一些控制：恕我直言，它会部分破坏使用的对象好在第一位。

# c# - 如何在javascript中获取动态控件的id

> ID：13124499
> 
> 赞同：1
> 
> 时间：2012-10-29T15:20:04.723
> 
> 标签：c#, javascript, asp.net

> **可能重复：**
> [如何在外部 javascript 文件中获取 asp.net 客户端 ID](https://stackoverflow.com/questions/3845900/how-to-get-asp-net-client-id-at-external-javascript-file)

```
 var table = new Table { CssClass = "Table", ID = "MYTable" }; 
```

在 Javascript 文件中，我想获取类似的表 ID

```
'ctl00_ctl00_ContentPlaceHolder1_ContentPlaceHolder1_MYTable. 
```

如何在 javascript 中获取此 ID。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T15:22:52.687

当您需要 ID 时，在您的脚本中添加：

```
<%=table.ClientID%> 
```

# visual-c++ - 为什么 VC++ 编译器 MOV+PUSH args 而不是 PUSH 它们？x86

> ID：13124501
> 
> 赞同：5
> 
> 时间：2012-10-29T15:20:12.937
> 
> 标签：visual-c++, assembly, compiler-construction, x86

在这个 VC++ 的反汇编中，正在进行一个函数调用。编译器在推送它们之前将本地指针移动到寄存器：

```
 memcpy( nodeNewLocation, pNode, sizeCurrentNode );
0041A5DA 8B 45 F8             mov         eax,dword ptr [ebp-8]  
0041A5DD 50                   push        eax  
0041A5DE 8B 4D 0C             mov         ecx,dword ptr [ebp+0Ch]  
0041A5E1 51                   push        ecx  
0041A5E2 8B 55 D4             mov         edx,dword ptr [ebp-2Ch]  
0041A5E5 52                   push        edx  
0041A5E6 E8 67 92 FF FF       call        00413852  
0041A5EB 83 C4 0C             add         esp,0Ch 
```

为什么不直接推他们？IE

```
push  dword ptr [ebp-8] 
```

此外，如果您要单独推送，为什么不手动进行。换句话说，不要在上面做“push eax”，而是做

```
mov [esp], eax 
```

等等，这样做的好处是，在执行 3 次移动之后，您可以执行一次减法来设置新的堆栈指​​针，而不是通过推送隐式减去三次。

更新---发布版本

这是为发布编译的相同代码：

```
; 741  :    memcpy( nodeNewLocation, pNode, sizeCurrentNode );

  00087 8b 45 f8     mov     eax, DWORD PTR _sizeCurrentNode$[ebp]
  0008a 8b 7b 04     mov     edi, DWORD PTR [ebx+4]
  0008d 50       push    eax
  0008e 56       push    esi
  0008f 57       push    edi
  00090 e8 00 00 00 00   call    _memcpy
  00095 83 c4 0c     add     esp, 12            ; 0000000cH 
```

绝对比调试版本更有效，但它仍然在做 MOV/PUSH 组合。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T16:44:00.267

这是一个优化。英特尔处理器手册第 4 卷第 12.3.3.6 节明确提到了这一点：

> 在英特尔凌动微架构中，使用 PUSH/POP 指令来管理堆栈空间和函数调用/返回之间的地址调整将比使用 ENTER/LEAVE 替代方案更优化。这是因为 PUSH/POP 不需要 MSROM 流，堆栈指针地址更新在 AGU 完成。当被调用函数需要返回给调用者时，被调用者可以发出 POP 指令恢复数据并从 EBP 中恢复堆栈指针。
> 
> 汇编/编译器编码规则 19。（MH 影响，M 通用性）对于 Intel Atom 处理器，**支持 PUSH/POP 的寄存器形式，**避免使用 LEAVE；使用 LEA 来调整 ESP 而不是 ADD/SUB。

手册的其余部分并不清楚原因，但它确实提到了隐式 ESP 调整可能出现的 3 周期 AGU 停顿。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T16:24:49.427

我怀疑它只在调试版本中执行，或者可能在某些情况下通过流水线或其他考虑保证它（例如，它可以将参数放入`esi`并在调用后使用它）。我查看了一些二进制文件，MSVC 确实使用了这样的推送：

```
 push ebx          ; mthd
 push dword ptr [ebp+place+4]
 push dword ptr [ebp+place] ; pos
 push [ebp+filedes]   ; fh
 call __lseeki64_nolock 
```

（来自 CRT 的代码）

至于第二个问题，指令寻址`esp`比推送长：`"push eax"`是一个字节，`"mov [esp-8], eax"`而是*四个*字节。事实上，这种方法（`mov`而不是`push`）默认使用 GCC 自几个版本（选项`-maccumulate-outgoing-args`）以来，它导致[代码大小显着增加](https://lkml.org/lkml/2007/7/29/100)。据说它使代码更快，但我不相信。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T20:00:19.033

我实际上已经找到了原因。它与 Pentium MMX 上的指令流水线方式有关。有两条流水线 U 和 V，***如果***它们是可配对的，则允许 MMX 处理器一次处理 2 条指令。PUSH 不能相互配对，但它们可以与 MOV 配对。所以，如果你写：

```
mov eax, [indirect]
mov esi, [indirect]
push eax
push esi 
```

然后，发生的情况是指令#1 和#3 配对，#2 和#4 配对，因此，有效地，这四条指令运行的周期数与单个 mov/push 相同，并且单个 mov/push 是比两个 push [indirect] 快。第 4.3 节，第 4 页详细描述了这种确切的情况。41，示例 4.11a 和 4.11b，Agner Fog 的微架构优化指南，可在 Internet 上广泛获取。

# hadoop - Hive 查询生成需要很长时间才能生成数据集

> ID：13124502
> 
> 赞同：0
> 
> 时间：2012-10-29T15:20:24.270
> 
> 标签：hadoop, mapreduce, hive

我正在尝试对大量数据（几乎是 PB 的一半）运行配置单元查询，并且这些查询运行映射在内部减少。生成数据集需要很长时间（map reduce 完成）我可以使用什么优化机制来使这些查询更快，我有一个更重要的问题是可用于 map reduce 或 in / 的磁盘量tmp 目录对于更快地减少地图很重要？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T19:24:12.013

您可以做的不多，但我可以给出一些通常可以用 Hive 完成的方向：
您应该选择导致较少洗牌的 SQL。例如，您可以尝试在可能的情况下进行地图侧连接。您还可以通过某种方式执行一些操作，从而导致仅映射查询。
另一种方法是调整减速器的数量 - 有时 Hive 定义的减速器比需要的少得多 - 因此您可以手动设置它以更好地利用您的集群
如果您有许多查询要运行来进行转换 - 您可以为此定义低复制因子HDFS 中的临时数据
如果我们知道您在做什么，可以提供更多帮助。

# php - 从php中的文本值获取数据

> ID：13124503
> 
> 赞同：0
> 
> 时间：2012-10-29T15:20:31.710
> 
> 标签：php, mysql, select, text

我完全被困在这里，并在发布时发现了数十个示例以获取和设置值。我想做的是-

1.  让用户在我的表单中的文本框中输入车辆年份模型（设置为发布）

2.  然后我需要将此值设置为可变状态

    ```
    $vehicle_year = $_GET['vyear']; 
    ```

    第一个错误在这里... vyear 是我的文本框的名称和 ID。错误 - 未定义的索引“vyear”。没有提交表单等，因为我仍然在同一个表单/页面上。

3.  捕获此值后，我搜索我的数据库以返回所有附有年份（如返回）的制造商 -

    ```
    $query = "SELECT * FROM `vehicledata` WHERE `year`='$vehicle_year'"; 
    ```

    显然它不起作用，因为我仍然没有从上面返回的未定义错误的值。我试图更改文本框的名称和 ID，但没有成功。

4.  返回这些记录后，我需要将值添加到选择（下拉）框中。我不知道如何在其中获取值 - 似乎我需要运行一个循环，我知道如何，只是不知道如何将选项添加到选择框中。

    请注意，我的表单没有提交，我需要先加载所有相关数据才能提交。

任何帮助将不胜感激，thanx伙计们。

PS 一旦我知道如何获取值并添加选项，我将添加反对 sql 注入。只需要基础知识就可以让我继续前进。

HTML: //这将是我的代码...搜索只是我的车轮
**年**  

```
 <?php          

            $vehicle_year = isset($_POST['vehicleyear']) ? $_POST['vehicleyear'] : -1;                

                if ($vehicle_year == -1) {
                echo 'No Value Returned...';
                                    //returns no value...
            } else {
                                    //How to get the value and echo it out...
                echo $vehicle_year;
            }
 //$query = "SELECT * FROM (SELECT * FROM `vehicledata` WHERE `year`='$vehicle_year' ORDER BY `cid` DESC LIMIT 1, 10) AS `table` ORDER BY `cid` ASC";
 $query = "SELECT * FROM `vehicledata` WHERE `year`='$vehicle_year'";

 $result = mysql_query($query);

 while ($line = mysql_fetch_array($result, MYSQL_ASSOC)) {
$vehicle_id = $line['cid'];
$vehicle_year = $line['year'];
$manufacturer = $line['carfindmake'];

//Get manufacturer data...
$images = get_make($vehicle_year);

if (!empty($make)) {
    echo 'No data';
} else {
    echo 'Found stuff';
}
 }
    ?>

            <td align="right"><span style="visibility:hidden" id="makelabel"><strong>Make</strong>&nbsp;&nbsp;</span></td>
            <!--<td><input name="make" id="make" type="text" class="searchbox" style="visibility:hidden" onClick="toggleVisibility('modellabel'); toggleVisibility('model');"/></td>-->
            <td><select name="make" id="make" class="searchbox" style="visibility:hidden" onClick="toggleVisibility('modellabel'); toggleVisibility('model');"/></td> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T15:26:57.343

2）当您的表单尚未提交时，这会导致错误，因为该值未设置。

通过以下方法解决此问题：

```
$vehicle_year = '';

if ( isset( $_POST['vyear'] ) ) {
    $vehicle_year = $_POST['vyear'];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T15:23:56.357

> 我的表格（设置为发布）

```
$vehicle_year = $_GET['vyear']; 
```

如果您的表单设置为使用 POST，则需要通过`$_POST`超全局访问表单元素，如下所示：

```
$vehicle_year = $_POST['vyear']; 
```

如果您因为可能设置或未设置索引而遇到问题，请使用 PHP[`isset()`](http://php.net/isset)进行检查。如果未设置索引，则不会导致错误。

```
if(isset($_POST['vyear'])) {
    $vehicle_year = $_POST['vyear'];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T15:24:39.627

1 - 如果表单设置为 POST，您必须使用 $_POST["vyear"] 来恢复值。

2 - 仔细检查文本框名称的大小写。

# xpath - 使用 xpath 按名称识别按钮

> ID：13124505
> 
> 赞同：1
> 
> 时间：2012-10-29T15:20:36.287
> 
> 标签：xpath

谁能建议我如何使用 xpath 按名称找到这个元素？

```
<button style="position: relative; width: 69px;" type="button" class="x-btn-text " tabindex="0">Search</button> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T15:24:59.657

您可以使用：`//button[text()='Search']`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T15:26:22.957

`//button/text()`应该返回您“搜索”。

# windows-8 - 使用 Visual Studio 2012 调试 IIS 8。权限不足

> ID：13124506
> 
> 赞同：5
> 
> 时间：2012-10-29T15:20:38.200
> 
> 标签：windows-8, visual-studio-2012, iis-8

如果我尝试使用本地 IIS 8 开始调试 ASP.Net MVC（3 或 4，没关系），它会显示（只需单击播放按钮）：

> 无法在 Web 服务器上开始调试。Visual Studio 没有足够的权限来调试此进程。要调试此过程，Visual Studio 必须以管理员身份运行。

如果我尝试使用 DEBUG -> Attach To Process -> Show Process From all Users -> w3wp.exe 手动附加，我会收到一条类似的消息。

> 无法附加到进程。Visual Studio 没有足够的权限来调试此进程。要调试此过程，Visual Studio 必须以管理员身份运行。

使用 IIS Express 它可以工作，只是完整的 IIS 8 阻止了我进行调试。

我已启用 IIS 上的调试 -> 默认网站 -> .Net 编译 -> 调试 = True

我还尝试将 DefaultAppPool 更改为使用 ApplicationPoolIdentity / Network Service / My own Account。

而且，当然，我尝试以管理员身份运行 VS2012。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-31T08:38:44.973

文尼格是对的。是VSCommands的问题。检查 VSCommands 上的中等信任会禁用 IIS 调试。![在此处输入图像描述](../Images/552fdf40b71b5d365d3017f588c5586c.png)

# objective-c - Objective-C 我应该使用 NSError 以及为什么 presentError 函数不起作用

> ID：13124507
> 
> 赞同：0
> 
> 时间：2012-10-29T15:20:38.850
> 
> 标签：objective-c

我正在 iPhone 上创建一个应用程序，我将编写代码和 Java 并翻译成 Objective-C，因为该应用程序必须在 Android 和 iPhone 中类似地工作。现在的问题当然是在某些领域的语言差异很大，并且很难正确实施。

当然不同的地方之一是你不能创建只接受某种类型的对象的 NSMutableArrays 或 NSMutableDictionaries。因此，当我为这些对象创建 getter 和 setter 时，我一直在这样做，示例如下：

```
 -(void)setPerson:(NSMutableArray *)personList_p
    {
        BOOL bAllowed = YES;
        for(int i = 0; i < [personList_p count]; i++)
        {
            if(![[personList_p objectAtIndex:i] isKindOfClass:[Person class]])
            {
                bAllowed = NO;
                break;
            }
            else
            {
                bAllowed = YES;
            }
        }

        if(bAllowed)
        {
        personList_i = personList_p;
        }
        else
        {
        //Raise error here
        }
    } 
```

现在我最初使用的是 NSRaise Exception，但在阅读了它之后，它建议不要这样做，因为异常处理是资源密集型的，不应该用于这种情况。所以我阅读的 NSError 是一个很好的解决方案，所以我正在阅读本指南

> [http://www.cimgf.com/2008/04/04/cocoa-tutorial-using-nserror-to-great-effect/](http://www.cimgf.com/2008/04/04/cocoa-tutorial-using-nserror-to-great-effect/)

我的问题有两个，如果我决定使用 NSError 应该，在方法中声明 NSError 对象是最佳实践吗，即​​像这样

```
-(void)setPerson:(NSMutableArray *)personList_p : (NSError **)error 
```

还是可以在上面的 else 语句中声明错误，像这样

```
 NSError *error = nil;
         NSMutableDictionary* details = [NSMutableDictionary dictionary];
                [details setValue:@"Invalid object passed into Array, object must be of type Person." forKey:NSLocalizedDescriptionKey];
                error = [NSError errorWithDomain:@"Invalid Object" code:200 userInfo:details];
                NSLog(@"%@", [error localizedDescription]); 
```

其次，在我上面链接的指南中，作者在结论中说

> 在此示例中，我正在检查消息调用后错误是否仍然为零。如果它不再是 nil 我知道发生了错误并且我需要将它显示给用户。Apple 提供了一个内置方法来执行此操作，方法是在 NSApplication 实例上调用 presentError:

他在这里使用了这行代码

```
[NSApp presentError:error]; 
```

这对我不起作用，我没有使用此代码获得自动完成选项，只是说使用了未声明的标识符。我在这里遗漏了一些明显的东西吗？

另外，为了确定，我使用的方法是确保用户发送具有正确对象类型的数组的最佳方法吗？或者是否可以使用另一种方法来实现相同的目标，但以更有效的方式。

提前致谢！！

编辑：

附加问题，使用 NSException 会不会是个坏主意，因为 NSError 的问题是应用程序继续运行，我正在考虑使用它，所以如果他们确实传入了一个包含无效对象的数组，它只会导致应用程序崩溃并引发异常。我不应该这样做有什么主要原因吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T22:04:09.540

> 现在我最初使用的是 NSRaise Exception，但在阅读了它之后，它建议不要这样做，因为异常处理是资源密集型的，不应该用于这种情况。所以我阅读的 NSError 是一个很好的解决方案，所以我正在阅读本指南

他实际上并没有说引发异常本质上是不好的或资源密集型的，他认为@try/catch 是错误的处理方式。那样的话，Cocoa 应用程序（更何况我是 Cocoa-Touch）应该尽可能避免抛出异常。异常表示未定义的行为，而不是简单的错误。

> 其次，在我上面链接的指南中，作者在结论中......在这里使用了这行代码
> 
> ```
> [NSApp presentError:error]; 
> ```
> 
> 这对我不起作用，我没有使用此代码获得自动完成选项，只是说使用了未声明的标识符。我在这里遗漏了一些明显的东西吗？

那是因为 NSApp 是一个只有 Cocoa（或 Mac）应用程序才能访问的概念。它代表一个指向“应用程序本身”的指针，并有一些与之相关的非常简洁的功能。当然，iOS 没有并行的概念，因此传统上会在[UIAlertView](http://developer.apple.com/library/ios/ipad/#documentation/uikit/reference/UIAlertView_Class/UIAlertView/UIAlertView.html)中呈现错误。

> 附加问题，使用 NSException 会不会是个坏主意，因为 NSError 的问题是应用程序继续运行，我正在考虑使用它，所以如果他们确实传入了一个包含无效对象的数组，它只会导致应用程序崩溃并引发异常。我不应该这样做有什么主要原因吗？

将 NSException 用于非常严重的逻辑之外的任何事情通常是一个坏主意（例如，当调用超出 NSArray 范围的索引时，或者当 UITableView 的数据源恰好与表要求）。如果您绝对必须停止程序执行，那么使用`NSAssert()`抛出条件异常要干净得多。即便如此，setter 也不是抛出异常的地方。当条件失败时简单地返回 nil 会容易得多，然后让调用者检查这样的结果并适当地处理它。

# javascript - 动态更改传递给 YouTube 播放器的 URL

> ID：13124510
> 
> 赞同：0
> 
> 时间：2012-10-29T15:20:45.870
> 
> 标签：javascript

动态更改传递给 YouTube 播放器的 URL

YouTube 的播放器很棒，但是我们如何在脚本中多次调用这个对象并每次都传递一个新的 URL 给它呢？

例如，对象的单个副本将位于我们的脚本中，或者隐藏在容器中，或者像这样：

```
 <div Style="Position:Absolute; Left:430px; Top:30px;";>
 <object width="350" height="25">
 <embed src="http://www.youtube.com/v/stCKjZniMsQ?autohide=2&autoplay=0&border=0&cc_load_policy=0&controls=2&fs=0&hd=1&iv_load_policy=3&loop=0&modestbranding=1&rel=1&showinfo=1&showsearch=1"
 type="application/x-shockwave-flash" width="350" height="25">
 </embed></object></div> 
```

...然后每当我们在脚本中使用这样的漂亮函数调用它时，它就会开始播放视频：

函数调用YouTube(URL) { }

感谢您的输入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T17:32:47.487

也许我不是很明白，但我来了……

您只需要重新设置所需元素的“src”属性，在这种情况下，您的 embed 元素。

# c - 编写新系统调用时可用的函数

> ID：13124517
> 
> 赞同：3
> 
> 时间：2012-10-29T15:21:14.800
> 
> 标签：c, linux, linux-kernel, system-calls, kernel

对于大学作业，我们必须向 Linux 内核添加系统调用。我有“你好，世界”没有问题。在添加更复杂的调用方面，我知道（或至少认为）我不能使用 malloc 之类的 C 函数，但我想知道我可以使用 syscall() 来使用其他系统调用吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T15:28:05.943

内核对几乎所有内容都有自己的特定调用。您无权访问系统调用或`<sys/xxxx.h>`头文件。

例如，是的，您不能使用`malloc()`，但可以使用`kmalloc()`

在旧版本的内核 (2.4) 中，您可以使用`syscall()`via:`syscallN()`宏。我很确定它已被删除。

一般来说`syscalls()`从内核来说不是一个好主意。真正的系统调用只是用户空间进入内核做某事的一种方式，所以如果你已经在内核中，应该有更好的方法来做你想做的事情。

# speech-recognition - C/C++ 中的 Mel 频率倒谱系数 (MFCC)

> ID：13124521
> 
> 赞同：8
> 
> 时间：2012-10-29T15:21:22.510
> 
> 标签：speech-recognition, windowing, mfcc

C/C++ 中是否有任何可用的 MFCC 实现？任何源代码或库？

我已经找到了[http://code.google.com/p/libmfcc/](http://code.google.com/p/libmfcc/)这似乎很好。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-08-15T01:44:38.000

2016年回顾：

*   `libmfcc`很简单，MIT 许可证，自 2010 年以来不受支持。
*   [YAAFE](http://yaafe.sourceforge.net/)提供 MFCC 和其他功能，LGPLv3，自 2011 年以来不受支持。
*   [Kaldi](http://kaldi-asr.org)是多余的，但它只能用于 MFCC。Apache License v2.0，仍然受支持。
*   [PocketSphinx](https://en.wikipedia.org/wiki/CMU_Sphinx#PocketSphinx)是用于语音识别、CMU 许可证（BSD 风格）的 CMU 工具包，并且仍然受支持。
*   [SPTK](http://sp-tk.sourceforge.net)是来自日本的研究工具包，修改后的 BSD 许可证，仍然受支持。
*   [OpenSMILE](http://audeering.com/research/opensmile)有两个许可证：(1) 一个用于研究和个人使用的灵活许可证，以及 (2) 一个商业许可证。

注意我提到的是 PocketSphinx，而不是 Sphinx，因为后者是用 Java 编写的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T06:32:24.807

您可以使用开源语音识别工具包（例如[Kaldi](http://kaldi.sourceforge.net/classkaldi_1_1Mfcc.html) 或[Sphinx](http://sourceforge.net/p/cmusphinx/code/11639/tree/trunk/sphinxbase/src/libsphinxbase/) ）的前端。

# jboss - 10分钟后Jboss 4.2.3事务超时

> ID：13124523
> 
> 赞同：3
> 
> 时间：2012-10-29T15:21:32.653
> 
> 标签：jboss

我的 jboss 上运行了一个很长的事务（超过 10 分钟）。此事务在 10 分钟后始终失败。我改变了我的 jboss-service.xml 如下：

```
<mbean code="com.arjuna.ats.jbossatx.jta.TransactionManagerService"
      name="jboss:service=TransactionManager">
      <attribute name="TransactionTimeout">1200</attribute>
      <attribute name="ObjectStoreDir">${jboss.server.data.dir}/tx-object-store</attribute> 
</mbean> 
```

我还更改了 standardjboss.xml 中的最大 bean 年龄（10 次）：

```
<max-bean-age>1600</max-bean-age> 
```

默认情况下设置为 600（10 分钟），但 1600 仍然会出现问题。

一些日志：在交易过程中我已经收到了数千次：

```
 2012-10-29 15:57:45,006 DEBUG [com.hp.hpl.jena.shared.LockMRSW] Lock : http-0.0.0.0-8080-2
    2012-10-29 15:57:45,006 DEBUG [com.hp.hpl.jena.shared.LockMRSW] http-0.0.0.0-8080-2 >> enterCS: Thread R/W: 0/0 :: Model R/W: 0/0 (thread: http-0.0.0.0-8080-2)
    2012-10-29 15:57:45,006 DEBUG [com.hp.hpl.jena.shared.LockMRSW] http-0.0.0.0-8080-2 << enterCS: Thread R/W: 0/1 :: Model R/W: 0/1 (thread: http-0.0.0.0-8080-2)
    2012-10-29 15:57:45,006 DEBUG [com.hp.hpl.jena.shared.LockMRSW] http-0.0.0.0-8080-2 >> leaveCS: Thread R/W: 0/1 :: Model R/W: 0/1 (thread: http-0.0.0.0-8080-2)
    2012-10-29 15:57:45,006 DEBUG [com.hp.hpl.jena.shared.LockMRSW] http-0.0.0.0-8080-2 << leaveCS: Thread R/W: 0/0 :: Model R/W: 0/0 (thread: http-0.0.0.0-8080-2)
    2012-10-29 15:57:45,115 DEBUG [com.hp.hpl.jena.shared.LockMRSW] Lock : http-0.0.0.0-8080-2 
```

当它失败时：

```
2012-10-29 15:58:12,944 DEBUG [com.hp.hpl.jena.shared.LockMRSW] Lock : http-0.0.0.0-8080-2
2012-10-29 15:58:12,944 DEBUG [com.hp.hpl.jena.shared.LockMRSW] http-0.0.0.0-8080-2 >> enterCS: Thread R/W: 0/0 :: Model R/W: 0/0 (thread: http-0.0.0.0-8080-2)
2012-10-29 15:58:12,944 DEBUG [com.hp.hpl.jena.shared.LockMRSW] http-0.0.0.0-8080-2 << enterCS: Thread R/W: 0/1 :: Model R/W: 0/1 (thread: http-0.0.0.0-8080-2)
2012-10-29 15:58:12,944 DEBUG [com.hp.hpl.jena.shared.LockMRSW] http-0.0.0.0-8080-2 >> leaveCS: Thread R/W: 0/1 :: Model R/W: 0/1 (thread: http-0.0.0.0-8080-2)
2012-10-29 15:58:12,944 DEBUG [com.hp.hpl.jena.shared.LockMRSW] http-0.0.0.0-8080-2 << leaveCS: Thread R/W: 0/0 :: Model R/W: 0/0 (thread: http-0.0.0.0-8080-2)
2012-10-29 15:58:12,975 DEBUG [org.jboss.ejb3.cache.simple.StatefulSessionFilePersistenceManager] Attempting to activate; id=4spxl-oj441k-h8vp9pzg-1-h8vpcqc2-p
2012-10-29 15:58:13,100 ERROR [org.nuxeo.ecm.core.event.impl.EventServiceImpl] Error during sync listener execution
javax.ejb.NoSuchEJBException: Could not find stateful bean: 4spxl-oj441k-h8vp9pzg-1-h8vpcqc2-p
    at org.jboss.ejb3.cache.simple.SimpleStatefulCache.get(SimpleStatefulCache.java:390)
    at org.jboss.ejb3.cache.simple.SimpleStatefulCache.get(SimpleStatefulCache.java:375)
    at org.jboss.ejb3.stateful.StatefulInstanceInterceptor.invoke(StatefulInstanceInterceptor.java:61)
    at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101)
    at org.jboss.aspects.security.RoleBasedAuthorizationInterceptor.invoke(RoleBasedAuthorizationInterceptor.java:166)
    at org.jboss.ejb3.security.RoleBasedAuthorizationInterceptor.invoke(RoleBasedAuthorizationInterceptor.java:115)
    at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101) 
```

有人能帮我吗 ？

这里有一个相关的帖子，但没有解决方案：[https ://community.jboss.org/thread/159596](https://community.jboss.org/thread/159596)

非常感谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T09:00:30.903

我找到了解决方案：

进入：“jboss\server\default\conf\jboss-service.xml”行：1200（默认为300）

然后

进入：“jboss\server\default\deploy\ejb3-interceptors-aop.xml”

发现：idleTimeoutSeconds=300

替换为：idleTimeoutSeconds=1800

出现4次，全部替换。

# xml - Organize XML file - FIlezilla

> ID：13124524
> 
> 赞同：2
> 
> 时间：2012-10-29T15:21:38.093
> 
> 标签：xml, filezilla

I have like 50 FTP servers in Filezilla. They used to be all in the root of the Site Manager. This was a problem every time i wanted to connect to one of them.

So I organized them **manually** into folders and categories. You can do this in the site manager, but i can't drag elements out of the view and the interface sucks.

So, the question is, is there a software that would allow me to *visually* organize an XML file? Create < elements > and move the nodes, etc.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T22:12:58.470

Agreed, Filezilla's interface is poor for moving sites between folders. I found a free solution, Microsoft's [XML Notepad 2007](http://www.microsoft.com/en-us/download/details.aspx?id=7973), which did allow me to drag and drop nodes. This wasn't as simple as I hoped because Filezilla's nodes are named Server and Folder and I had to expand each Server node to see its Name attribute, but eventually it got the job done.

There are a bunch of other XML editors that might work better, but a lot of them cost money. You could check this thread for some options, or just Google "XML editor": [https://superuser.com/questions/319416/help-me-find-an-xml-editor](https://superuser.com/questions/319416/help-me-find-an-xml-editor)

# internet-explorer - 使用带有 JBoss AS7 的 SSL 中断连接（Richfaces 页面）

> ID：13124528
> 
> 赞同：4
> 
> 时间：2012-10-29T15:21:54.067
> 
> 标签：internet-explorer, tomcat, jsf-2, richfaces, jboss7.x

我有一个奇怪的问题。我在具有 HTTPS 和客户端身份验证的 JBOSS AS7 网络服务器上使用 Richfaces 4。

一切（客户端身份验证、HTTPS 等）实际上都可以正常工作，但有时样式表和 JavaScript 资源没有被 Internet Explorer 加载，而且奇怪的是 Firefox 也没有加载。Firebug等调试工具只是说连接被中断，没有额外的信息。

此外，一段时间后，我无法重现一种情况，Internet Explorer（甚至是 Firefox，但不太常见）无法显示整个站点。在那种情况下，没有刷新、删除缓存、cookie、重新启动 IE 确实有帮助。

为了确保这不是公司的网络或代理问题，我确实拔掉了我的电脑，在本地主机上运行我的网络服务器。同样的问题也发生在这里。

有任何想法吗？先感谢您！

* * *

没有人？我确实将日志级别更改为 DEBUG 并观察到以下输出：

```
10:25:48,518 DEBUG [org.apache.tomcat.util.net.AprEndpoint] (http--0.0.0.0-8443-1) 
             Handshake failed: error:00000000:lib(0):func(0):reason(0) 
```

* * *

似乎连接将被重置。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T16:04:15.933

**我还没有找到为什么我的设置不起作用。但是，我使用的是 JBoss 本地连接器，所以我决定不使用它们。**

如果不使用本机连接器，并且在生成新证书后它运行良好，上述问题到目前为止还没有发生。

我正在使用以下来源如何生成我的自签名证书：

*   [http://virgo47.wordpress.com/2010/08/23/tomcat-web-application-with-ssl-client-certificates/](http://virgo47.wordpress.com/2010/08/23/tomcat-web-application-with-ssl-client-certificates/)

这是我的配置`standalone.xml`

```
<security-domain ....
<jsse 
    keystore-password="changeit" 
    keystore-url="keystore.jks" 
    truststore-password="changeit" 
    truststore-url="cacerts.jks" 
    server-alias="sercer" 
    client-auth="true" 
    protocols="TLS"/> 
```

和

```
<connector ....
<ssl 
    name="ssl" 
    key-alias="sercer" 
    password="changeit" 
    certificate-key-file="keystore.jks" 
    protocol="TLSv1" 
    verify-client="true" 
    ca-certificate-file="cacerts.jks" /> 
```

**但是**，我仍然不明白为什么它之前在 IE 和 FF 中随机运行以及在 Chrome 中没有问题。这会将我的证书排除在原始问题之外，不是吗？

# c++ - 在类内的结构中使用运算符重载

> ID：13124530
> 
> 赞同：0
> 
> 时间：2012-10-29T15:22:15.427
> 
> 标签：c++

我有一个头文件，我在其中声明一个带有结构的类。此外，我将一个重载运算符（！=，用于比较结构）声明为此类的成员。我在 cpp 文件中给出了这个运算符的定义。但我无法访问结构的成员

汽车.h

```
class car
{ 
int carsor;

struct model
{
    int id;

    int mode;

}prev,curr;

bool operator !=(const model& model1);

}; 
```

汽车.cpp

```
#include "car.h"

bool car::operator !=(const model& model1)
{
if((model1.id==model.id)&&(model1.mode==model.mode))
{
    return false;
}

else
{

    return false;
}
} 
```

我得到的错误是这个

```
Error   2   error C2275: 'car::model' : illegal use of this type as an expression 
```

我应该如何访问结构成员？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T15:26:13.317

`if((model1.id==model.id)&&(model1.mode==model.mode))`-`model`是你的班级的名字，而不是你的对象。您的对象可以通过访问，`this`或者您可以在类中完全省略它。用于`if((model1.id==prev.id)&&(model1.mode==prev.mode))`比较`prev`或`if((model1.id==next.id)&&(model1.mode==next.mode))`与下一个比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T15:44:25.993

这：

```
bool car::operator !=(const model& model1)
{ 
```

是一种比较汽车和模型的方法。然而，这：

```
bool car::model::operator != (car::model const &other) const
{
  return !(*this == other);
} 
```

是一种比较两个模型的方法（我在这里将其写为 的方法`car::model`，但如果您愿意，它可以是一个自由函数。

我也用 来编写它`operator==`，因为逻辑几乎总是更容易解决：

```
bool car::model::operator ==(car::model const &other) const
{
    return (this->id == other.id) && (this->mode == other.mode);
} 
```

这些方法将被声明为：

```
class car
{ 
    struct model
    {
        int id;
        int mode;
        bool operator==(model const&) const;
        bool operator!=(model const&) const;
        // ... 
```

# java - GCM 不适用于许多设备令牌（> 800）

> ID：13124531
> 
> 赞同：0
> 
> 时间：2012-10-29T15:22:16.570
> 
> 标签：java, android, google-cloud-messaging

几天前，Android 设备的推送通知运行良好，因为到目前为止我的数据库中有大约 1000 个设备令牌，但今天它不起作用，因为它已达到大约 1500 个设备令牌。我正在进入`java.io.IOException`服务器端。

```
java.io.IOException: Server returned HTTP response code: 400 for URL: https://android.googleapis.com/gcm/send
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
    at sun.net.www.protocol.http.HttpURLConnection$6.run(HttpURLConnection.java:1491)
    at java.security.AccessController.doPrivileged(Native Method)
    at sun.net.www.protocol.http.HttpURLConnection.getChainedException(HttpURLConnection.java:1485)
    at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1139)
    at sun.net.www.protocol.https.HttpsURLConnectionImpl.getInputStream(HttpsURLConnectionImpl.java:234)
    at com.google.android.gcm.server.Sender.sendNoRetry(Sender.java:363)
    at com.google.android.gcm.server.Sender.send(Sender.java:261)
    at com.orange.server.ws.androidpns.androidPNHandler.run(androidPNHandler.java:58)
Caused by: java.io.IOException: Server returned HTTP response code: 400 for URL: https://android.googleapis.com/gcm/send
    at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1436)
    at java.net.HttpURLConnection.getResponseCode(HttpURLConnection.java:379)
    at sun.net.www.protocol.https.HttpsURLConnectionImpl.getResponseCode(HttpsURLConnectionImpl.java:318)
    at com.google.android.gcm.server.Sender.sendNoRetry(Sender.java:362)
    ... 2 more 
```

我检查了一个设备令牌，它工作正常，但是当我的数据库表中有很多设备令牌（> 800）时，我得到了上述异常。这是我的 GCM 服务器代码。

```
Sender sender = new Sender("SENDER-ID");
AndroidPNSEntityHandler androidPNSEntityHandler = new AndroidPNSEntityHandler();
ArrayList<String> androidDeviceIds = androidPNSEntityHandler.getList();

/* I checked by adding only one device token to this arraylist like
this **androidDeviceIds.add("Android-Device-Token");**
It worked fine...
*/

if(androidDeviceIds.size() != 0)
{
    String title;
    if(!isOrangeCall)
        title = "title";
    else
        title = "oTitle";

    Message message = new Message.Builder()
                .collapseKey(pnsCollapseKey)
                .timeToLive(86400)
                .addData(title,msgTitle)
                .addData("content",msgContent)
                .build();
    try
    {
        MulticastResult result = sender.send(message, androidDeviceIds, 5);
        if (result.getResults() != null) 
        {
            int failureMsgs = result.getFailure();
            int canonicalRegId = result.getCanonicalIds();
            List<Result> multicastResults = result.getResults();
            Boolean flag =true;
            int total;
            if(failureMsgs != 0 || canonicalRegId != 0)
            {

                for(total = 0;flag;total++)
                {
                    if(canonicalRegId != 0)
                    {
                        String tempCanId = multicastResults.get(total).getCanonicalRegistrationId(); 
                        if( tempCanId != null)
                        {
                            if(androidPNSEntityHandler.deleteDuplicate(androidDeviceIds.get(total), tempCanId))
                                canonicalRegId--;
                        }
                    }
                    if(failureMsgs != 0)
                    {
                        if(multicastResults.get(total).getErrorCodeName().equals(Constants.ERROR_NOT_REGISTERED))
                        {
                            if(androidPNSEntityHandler.deleteUid(androidDeviceIds.get(total)));
                            failureMsgs--;
                        }
                    }
                    if(canonicalRegId == 0 && failureMsgs == 0)
                        flag = false;
                }

            }

        }

    }catch (java.lang.IllegalArgumentException e)
    {
        e.printStackTrace();
    }catch (InvalidRequestException e)
    {
        e.printStackTrace();
    }catch (java.io.IOException e)
    {
        e.printStackTrace();
    }catch (Exception e) 
    {
        e.printStackTrace();
    }
} 
```

请指导我解决此问题...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T16:03:00.010

[文档](http://developer.android.com/guide/google/gcm/gcm.html) 清楚地表明 1000 是限制：

> 注册ID
> 
> A string array with the list of devices (registration IDs) receiving the message. It must contain at least 1 **and at most 1000** registration IDs. To send a multicast message, you must use JSON. For sending a single message to a single device, you could use a JSON object with just 1 registration id, or plain text (see below). Required.

# sublimetext2 - 在 Sublime Text 2 中安装包

> ID：13124532
> 
> 赞同：66
> 
> 时间：2012-10-29T15:22:16.960
> 
> 标签：sublimetext2

当我在 Sublime Text 2 中浏览包时，packages 文件夹中充满了我想要的所有插件，例如 Zen coding 和 SidebarEnhancements。
我安装的包文件夹虽然只有包控制。其他已安装的软件包是否应该位于此处？

例如，SidebarEnhancements 不起作用，即使它位于 packages 文件夹中。如果我右键单击侧边栏，我只会得到“关闭”选项。几周以来我一直试图解决这个问题，我想我会在这里问一下，看看是否有人能告诉我在我将包放在包文件夹中之后我需要做什么，如果有的话。

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2012-11-14T20:33:42.767

使用 Sublime Text 2 中的 Package Control，您确实需要熟悉一些不同的东西才能使其正常工作：

1.  [始终在wbond 社区](https://packagecontrol.io/)中查找软件包。在那里，您将能够看到有多少人安装了该软件包（越流行越好）以及该软件包上的文档（如果有的话）。
2.  下的菜单项`Prefs > Package Control`。您可以在此处安装、删除或查看所有已安装软件包的列表。
3.  `Prefs > Package Settings`. 在这里，您将找到可以修改的设置以及可用的快捷键。确保在用户设置而不是默认设置中进行任何更改。否则，当该软件包更新时，您的设置将被覆盖。
4.  `CTRL`+ `SHIFT`+ `P`。这将打开一个菜单，您可以在其中查找已安装的软件包可以执行的许多功能。只需开始输入，它就会开始过滤。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-08-15T05:21:07.227

这是一个更短且重点描述的链接：http: [//www.granneman.com/webdev/editors/sublime-text/packages/how-to-install-and-use-package-control/](http://www.granneman.com/webdev/editors/sublime-text/packages/how-to-install-and-use-package-control/)

步骤是：

1.  安装包控制。
2.  转到[http://wbond.net/sublime_packages/package_control/installation](http://wbond.net/sublime_packages/package_control/installation)并获取安装代码。
3.  在 Sublime Text 2 中打开控制台 ( `Ctrl`+ ```) 并粘贴代码。
4.  重新启动 Sublime Text 2。
5.  `Command`通过+ `Shift`+ `P`(Mac OSX) 或`Ctrl`+ `Shift`+ `P`(Windows)打开命令面板。
6.  开始输入 Package Control 并选择您要查找的包。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-10-29T15:30:33.280

尝试使用[Sublime Package Control](http://wbond.net/sublime_packages/package_control)来安装你的包。

也看看这些[提示](http://net.tutsplus.com/tutorials/tools-and-tips/sublime-text-2-tips-and-tricks/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-29T18:52:52.487

> 已安装的包目录 您将在数据目录中找到该目录。它包含已安装的每个 sublime-package 的副本。用于恢复包

所以，你不应该把任何插件放到这个文件夹中。要获得 SidebarEnhancements 插件的作品，请尝试使用 Package Control 禁用和重新启用此插件。如果它不起作用，请尝试从“Packages”文件夹中删除文件夹“SidebarEnhancements”，然后通过 Package Control 重新安装。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-06-26T09:43:27.303

这最近对我有用。您只需要添加到您的包中，以便包管理器知道这些包：

1.  将 Sublime Text 2 存储库添加到 Synaptic 包管理器：

    ```
    sudo add-apt-repository ppa:webupd8team/sublime-text-2 
    ```

2.  更新

    ```
    sudo apt-get update 
    ```

3.  安装崇高文本：

    ```
    sudo apt-get install sublime-text 
    ```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-08-07T09:44:56.530

您可以尝试按照[安装指南](https://sublime.wbond.net/installation)中提供的简单说明首先安装[Package Control](https://sublime.wbond.net/)（例如 1\. 打开控制台，2\. 粘贴代码）。

然后请检查基本功能的[包文档控件用法：](https://sublime.wbond.net/docs/usage)

> 包控制由命令面板驱动。要打开托盘，请按`Ctrl`+ `Shift`+ `P`（Win、Linux）或`CMD`+ `Shift`+ `P`（OS X）。所有 Package Control 命令都以 Package Control: 开头，因此首先键入 Package。
> 
> 命令托盘现在将显示许多命令。大多数用户会对以下内容感兴趣：
> 
> **安装包**
> 
> 显示可安装的所有可用软件包的列表。这将包括默认频道中的所有包，以及您添加的存储库中的任何包。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-06-25T16:27:18.007

**启用之前安装的 Sublime Text 包**

如果您有一个`Sublime Text 2\Packages`不工作的包的子目录，您可能需要启用它。

请按照以下步骤启用已安装的软件包：

1.  `Preferences > Package Control > Enable Package`
2.  从列表中选择要启用的包

# javascript - 从没有框架的处理程序中解除绑定事件

> ID：13124534
> 
> 赞同：0
> 
> 时间：2012-10-29T15:22:28.287
> 
> 标签：javascript, unbind

我正在尝试在不使用框架的情况下从处理程序中取消绑定所有事件，这是正确的吗？它们都是 Divs 和那些是 ids，它似乎不起作用。

```
function reply_click(d_850)
{
    document.getElementById("directions").onsubmit = null;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T15:30:54.060

不，有[`removeEventListener`](https://developer.mozilla.org/en-US/docs/DOM/element.removeEventListener)（[`detachEvent`](http://msdn.microsoft.com/en-us/library/ie/ms536411%28v=vs.85%29.aspx)在 IE 中），但他们需要明确引用他们应该删除的函数。没有包罗万象的机制。添加它们时，您需要为 remove-all-of-type-X 方法单独存储所有绑定函数，例如 jQuery 就是这样做的。

剩下的唯一机会是重建你的 DOM，这将完全删除所有以前绑定的处理程序。

# c# - 从 C#（64 位）加载 C++ 类库

> ID：13124535
> 
> 赞同：1
> 
> 时间：2012-10-29T15:22:29.840
> 
> 标签：c#, c++, windows, 32bit-64bit, badimageformatexception

我有一个 C++ 类库和一个使用该库的 C# 中的 Windows 应用程序。

它适用于 32 位 Windows，但不适用于 64 位 Windows -`BadImageFormatException`发生。

我试图改变C++类库的平台，但是它不能从WIN32改为WIN64。

我认为以下问题之一可以解决这个问题。

1.  有没有办法将 WIN32 库转换为 WIN64 库？
2.  是否有另一种方法可以在不使用 C++ 库的情况下在 C# 上调用 C++ 函数？
3.  是否可以在 64 位应用程序中加载 WIN32 库？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T15:27:06.367

> 有没有办法将 WIN32 库转换为 WIN64 库？

将库重新构建（重新编译）为 64 位库。

> 是否可以在 64 位应用程序中加载 WIN32 库？

编号来自[64 位 Windows 编程指南](http://msdn.microsoft.com/en-us/library/aa384249.aspx)：

> ... 32 位进程无法加载 64 位 DLL 以执行，64 位进程无法加载 32 位 DLL 以执行。

# objective-c - 为什么动态添加的内容到已注册和出队的 UITableViewCell 会从单元格的一种使用持续到另一种使用？

> ID：13124539
> 
> 赞同：1
> 
> 时间：2012-10-29T15:22:41.773
> 
> 标签：objective-c, ios, uitableview

首先， UITableViewCell 像这样注册以供重用

```
UINib *cellLoader=[UINib nibWithNibName:@"GroupCell_iPhone" bundle:nil];
[self.tableView registerNib:cellLoader forCellReuseIdentifier:@"GroupCell"]; 
```

然后在 cellForRowAtIndexPath 委托中

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
```

单元格出列

```
GroupCell_iPhone *cell=(GroupCell_iPhone*)[self.tableView dequeueReusableCellWithIdentifier:@"GroupCell"]; 
```

然后根据一系列标准动态创建一系列 UILabel 和其他对象，并像这样添加到单元格中

```
[cell.contentView addSubview:noActivityLabel]; 
```

当第二个和后续单元格出列并且似乎具有来自第一个出列单元格的动态添加的对象时，就会出现问题。最后，每个细胞都会不同。出队的单元格是指向 UITableViewCell 一个实例的“指针”吗？为什么这些随后出列的单元格具有第一个的内容？

如果是这种情况，创建具有动态/变化内容的单元格的最佳方法是什么？每次都应该创建一个新的单元格实例吗？可以“克隆”出队的单元格吗？

澄清：表格中的所有单元格都以基本布局开始，但随后根据与该单元格关联的一些数据将唯一内容添加到每个单元格。因此，表格中的每个单元格都是唯一的，即单元格中有不同的子视图（UILable、UIImageView 等）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T07:42:24.483

我不确定这是否是最好的方法，但我做了以下事情：

创建了一个具有多个子类的 CustomCellClass：CustomCellType1、CustomCellType2 Custom CellType3 等。其中 CustomCellSubclasses 都使用同一模型的不同部分来显示信息。

然后，我可以给 CustomCellClass 添加一个 prePareDataForCell 函数来设置一些基本属性。如果 CustomCellSubclass 需要它们，它就会拥有它们，如果不是，事情就会发生相同的变化（我认为，这是我不确定这是否是好的做法的部分）。

然后我可以做一些这样的伪代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    CustomCellClass *returnCell = (CustomCellClass*)[tableView cellForRowAtIndexPath:indexPath];
    MyObject *obj = [self.fetchedResultsController objectAtIndexPath:indexPath];

    if ([returnCell.reuseIdentifier isEqualToString:CustomCellType1) {
        CustomCellType1 *cell = (CustomCellType1*)[tableView dequeueReusableCellWithIdentifier:CustomCellType1];

        if (!cell) {
            cell = [[CustomCellType1 alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CustomCellType1];
            NSArray *topLevelObjects = [[NSBundle mainBundle] loadNibNamed:@"CustomCellType1" owner:self options:nil];
            cell = [topLevelObjects objectAtIndex:0];
        }
        // This is a basic cell doesn't need anything special done with the object model
        returnCell = cell;
    } else if ([[returnCell reuseIdentifier] isEqualToString:CustomCellType2]) {
        CustomCellType2 *cell = (CustomCellType2 *)[tableView dequeueReusableCellWithIdentifier:CustomCellType2];

        if (!cell) {
            cell = [[CustomCellType2 alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CustomCellType2];
            NSArray *topLevelObjects = [[NSBundle mainBundle] loadNibNamed:@"CustomCellType2" owner:self options:nil];
            cell = [topLevelObjects objectAtIndex:0];
        }
        // Do stuff with obj data only needed for this type of cell, perhaps modify the cells subviews
        [cell preConfigureCustomCellType2:obj];
        returnCell = cell;
    } else {
        CustomCellType3 *cell = (CustomCellType3*)[tableView dequeueReusableCellWithIdentifier:StandardMailCell];

        if (!cell) {
            cell = [[CustomCellType3 alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:StandardMailCell];
            NSArray *topLevelObjects = [[NSBundle mainBundle] loadNibNamed:@"CustomCellType3" owner:self options:nil];
            cell = [topLevelObjects objectAtIndex:0];
        }
        // Do stuff with obj data only needed for this type of cell perhaps modify the same subviews in a different way for this type of cell
        [cell preConfigureCustomCellType3:mail];
        returnCell = cell;
    }

    if (![tableView isDragging] && !tableView.decelerating) {
             // I used this to only run an expensive operation after the the customer flicks and the table comes to a rest.
    }

    return returnCell;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T15:59:46.600

**为什么这些随后出列的单元格具有第一个的内容？**

与其每次都重新创建新的单元格，不如重新使用您已经创建的不再显示的单元格。这就是在将单元格出列时实际执行的 tableView 操作：如果可以的话，它会为您提供一些未显示的单元格。

假设您需要显示一个包含 1000 个单元格的 tableview，而 tableView 实际上一次只显示 6 个单元格。它不会创建 1000 个单元格，而是重新使用单元格堆栈，因此不需要重新创建新的单元格。

**出队的单元格是指向 UITableViewCell 一个实例的“指针”吗？为什么这些随后出列的单元格具有第一个的内容？**

因为它是同一个指针对象，所以它将具有与第一次显示时相同的内容。然后您需要更新其数据。

**每次都应该创建一个新的单元格实例吗？可以“克隆”出队的单元格吗？**

您只需要创建新单元格，当

```
[self.tableView dequeueReusableCellWithIdentifier:@"GroupCell"] 
```

什么都不返回。这是一个简单的例子：

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
 // get your cell from the stack    
GroupCell_iPhone *cell=(GroupCell_iPhone*)[self.tableView dequeueReusableCellWithIdentifier:@"GroupCell"];

 // or create new one if nil. Note: you must give it the same identifier than the
 // one you are using for the dequeue. Or tableview will not be able to return you anything from the dequeing.
if(!cell)
 cell = [GroupCell_iPhone newWithIdentifier: @"GroupCell"] + autorelease]; 
```

** 更新**

```
// here you are sure to have a valid cell, so you can display content according to the indexPath
// display: use a controller who will update your cell change
// note, the first method clean what was inside your cell. You can keep the subview and reuse them the same way as tableview do.
    [myDisplayClassCellController emptyCellSubview: cell];

// here you add all the display logic you want into your cell view. Note, you need indexPath
// because you need to display depending of the stack.
    [myDisplayClassCellController decorateCellWithCustomViews: cell atIndexPath: indexPath]; 
```

**结束更新**

```
// then you can return back the cell to the tableView
return cell;
} 
```

# c# - MS 图表控件的鼠标滚轮滚动事件

> ID：13124547
> 
> 赞同：2
> 
> 时间：2012-10-29T15:22:57.797
> 
> 标签：c#, c#-4.0, mschart, microsoft-chart-controls

我试图弄清楚如何通过来回滚动鼠标来放大和缩小 MS 图表。我查看了图表事件列表，但找不到任何合适的东西。

这可能吗+最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T16:10:55.923

正如我在上面的评论中提到的，在我的代码中，图表是在设计时动态创建的，但我看到确实有一个 MouseWheel 事件：`AddHandler newChart.MouseWheel, AddressOf Chart_MouseWheel`，这应该对你有用：

函数签名如下：

```
Public Sub Chart_MouseWheel(ByVal sender As Object, ByVal e As System.Windows.Forms.MouseEventArgs)

End Sub 
```

您将需要使用该`e.Delta`属性来了解 Wheel 移动了多少个棘爪。

高温高压

# c# - 仅使用最小起订量测试仅设置属性的值

> ID：13124551
> 
> 赞同：1
> 
> 时间：2012-10-29T15:23:17.703
> 
> 标签：c#, .net, moq

我有一个简单的类，它在构造函数中设置一个字段，并且匹配属性是只读的。

```
public class COMAssembly : ICOMAssembly
{
    private List<string> properties = new List<string>();
    public List<string> Properties
    {
        get { return properties; }
    }

    ...
} 
```

我有这些使用 MSpec 和 Moq 的测试类：

```
using Machine.Specifications;
using Moq;
using System.Collections.Generic;
using It = Machine.Specifications.It;

public class MSPEC_With_a_COM_Assembly
{
    protected static Mock<ICOMAssembly> _mockCOMAssembly;
    protected static List<string> _listOfStrings;

    Establish context = () =>
       {
           _mockCOMAssembly = new Mock<ICOMAssembly>(MockBehavior.Loose);
           _mockCOMAssembly.DefaultValue = DefaultValue.Mock;
           _mockCOMAssembly.SetupAllProperties();
           _mockCOMAssembly.SetupProperty(m => m.Properties, new List<string>() { "Prop1", "Prop2" });
       };
}

[Subject(typeof(MSPEC_With_a_COM_Assembly), "With a COM Assembly")]
public class When_asking_for_a_list_of_properties_and_assembly_has_properties : MSPEC_With_a_COM_Assembly
{
    Because of = () =>
      {
          _listOfStrings = _mockCOMAssembly.Object.Properties;
      };

    It Should_return_a_list_with_values = () =>
        {
            //TODO:  Verify that the Count property of _listOfStrings/_mockCOMAssembly.Object.Properties is greater than zero.
        };
} 
```

我查看了许多论坛、Moq 教程等，但无法找到仅使用 Moq 来解决此问题的答案。我不想使用 NUnit。我有其他通过验证 _listOfStrings 不为空并且该属性上的 get 工作正常的测试。我是练习 MSpec/Moq/单元测试的新手，尽管到目前为止我已经阅读了很多关于这些主题的内容。任何帮助表示赞赏！

# matlab - 错误：未知类型名称“mxArray”

> ID：13124556
> 
> 赞同：0
> 
> 时间：2012-10-29T15:23:40.447
> 
> 标签：matlab, matlab-compiler

当我尝试使用 MATLAB mex 命令编译 ac 文件时，我遇到了以下错误

> 错误：未知类型名称“mxArray”</p>

错误代码在这里

```
const char *model_to_matlab_structure(mxArray *plhs[], int num_of_feature, struct svm_model *model);
struct svm_model *matlab_matrix_to_model(const mxArray *matlab_struct, const char **error_message); 
```

我不明白为什么 MATLAB 不能识别 mxArray 类型。我该如何解决这个问题？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T02:34:24.747

谢谢。原来我忘记了

```
#include "mex.h" 
```

# php - 使用 php 在 linux 中写入管道

> ID：13124557
> 
> 赞同：4
> 
> 时间：2012-10-29T15:23:42.057
> 
> 标签：php, c, linux, named-pipes

我已经在 linux 中创建了一个管道，`mkfifo /tmp/myFIFO`现在我已将 chmod 设置为 777 .. 然后我有一个 ac 应用程序，它读取管道并将我写入管道的内容输出。

当我在 php 中这样做时，这有效..

```
$command = "echo 'helloworld' > myFIFO";
$process = proc_open($command, $descriptor, $pipes, $cwd, $env); 
```

但是当我用 fwrite 例如

```
$out = fopen("/tmp/myFIFO","w");
fwrite($out,"hello");
fclose($out); 
```

它根本不起作用。我在 linux 中没有从我的管道获得任何输出？.. 为什么 fwrite 不起作用？.. 谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T15:36:35.800

它现在正在工作，感谢您的所有帮助。我将 chmod 设置为 a+rw。

```
chmod a+rw /tmp/myFIFO 
```

现在它工作正常。

感谢你的帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T15:36:30.860

FIFO 有一个奇怪的行为，当您首先`open`将它们写入时（直接使用`open(2)`系统调用或通过任何包装器，例如`fopen(3)`），`open`调用会阻塞，直到读取器也打开相同的 FIFO 进行读取。当两端都打开时，两个调用都被解除阻塞，可以开始读写了。

您可能看到的是您的程序永远不会进行`fwrite`调用（应该正常运行），因为`fopen`调用永远不会返回，因为还没有读取器打开 FIFO 的另一端。如果您有另一个程序打开 FIFO 进行读取，它应该可以工作。

# centos - 刀食谱安装后流浪者盒子破裂

> ID：13124564
> 
> 赞同：6
> 
> 时间：2012-10-29T15:24:05.923
> 
> 标签：centos, chef-infra, vagrant, knife

我是一个 Vagrant n00b，在`knife`使用 chef-solo 设置一个非常简单的 CentOS LAMP 盒子时，我在让 Vagrant 和 Chef 的命令一起玩得很好时遇到了问题。

以下是这个问题的简要说明：

1.  我在 vagrantbox.es 上使用 CentOS 6.3 w/ Chef 基本框创建了一个基本的 Vagrantfile。[您可以在这个 gist](https://gist.github.com/3974036)中看到基础知识。
2.  我已经通过`knife cookbook site install nameofcookbook`使用将它们放入的配置下载了所有食谱`./chef/cookbooks`。
3.  我已经成功运行`vagrant up`到 You can see the basics in [this gist](https://gist.github.com/3974036)。
4.  我已经测试过 apache、php 等。一切都很好。
5.  现在技巧来了：**在 VM 运行的情况下，我运行 Knife 来添加另一个包（在本例中为 i3）**。
6.  从这里开始，Vagrant 无法在 VM 中执行各种任务：
7.  当我运行时，`vagrant provision`我收到这样的错误

    > ```
    > The chef binary (either `chef-solo` or `chef-client`) was not found on
    > the VM and is required for chef provisioning. Please verify that chef
    > is installed and that the binary is available on the PATH. 
    > ```

8.  当我运行时，`vagrant halt`我收到一个错误，即 ssh 命令以非零错误代码退出。

9.  但是，我可以运行`vagrant ssh`，并确认 (a) chef-solo 实际上存在于框中，并且 (b) 我可以通过框中的命令行关闭。
10.  当我运行时，`vagrant up`我收到这样的错误：

    > ```
    > The following SSH command responded with a non-zero exit status.
    > Vagrant assumes that this means the command failed!
    > mkdir -p /vagrant</li> 
    > ```

我难住了。我已经在两个盒子上发生过这种情况，而且我知道 Knife 和 Vagrant 应该能够很好地配合使用。

我究竟做错了什么？

非常感谢任何帮助，我对深入研究 Vagrant 感到非常兴奋！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-23T13:47:15.807

```
chef.add_recipe "sudo" 
```

第一次运行后核对你的 sudo 文件。

为您的 vagrant 用户将适当的 json 添加到您的 vagrant 文件中。

就像是：

```
config.vm.provision :chef_solo do |chef|

  # add your recipes
  # chef.add_recipe "foo"
  # chef.add_role   "bar"
  chef.json = {
    "authorization" => {
        "sudo" => {
            "users" => [ "vagrant" ],
            "passwordless" => true,
        }
    }
  }
end 
```

# c# - C# 计时器对象如何决定何时发生了经过的时间量？

> ID：13124567
> 
> 赞同：4
> 
> 时间：2012-10-29T15:24:09.393
> 
> 标签：c#, timer

C# 计时器对象如何决定何时发生了经过的时间量？

我想知道它是否只是循环或比这更智能。

此外，最好知道在哪里可以找到 C# 源代码以进行查看。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-29T16:25:04.457

CLR 创建一个专用线程来处理您在应用程序中创建的所有计时器对象，并使它们的 Elapsed 事件和回调处理程序运行。您可以看到它与调试器一起使用。从如下所示的控制台模式应用程序开始：

```
using System;
using System.Timers;

class Program {
    static void Main(string[] args) {
        var t = Timer();
        t.Elapsed += ElapsedEventHandler((s, e) => { });
        t.Start();
    }
} 
```

项目+属性，调试选项卡，勾选“启用本机代码调试”（又名非托管代码）选项。工具 + 选项、调试、符号并确保 Microsoft 符号服务器已启用。按 F11 开始调试。

现在使用调试 + Windows + 线程。您将看到列出的 4 个线程。您的主线程、终结器线程、调试线程和空闲线程池线程。继续前进，直到您通过 t.Start() 方法调用。请注意，现在添加了一个*新*线程。名称是“ThreadPoolMgr::TimerThreadStart”。双击它并查看调用堆栈窗口。你会看到的：

```
ntdll.dll!_NtDelayExecution@8()  + 0x15 bytes   
ntdll.dll!_NtDelayExecution@8()  + 0x15 bytes   
KernelBase.dll!_SleepEx@8()  + 0x39 bytes   
clr.dll!ThreadpoolMgr::TimerThreadFire()  + 0x3e bytes  
clr.dll!ThreadpoolMgr::TimerThreadStart()  + 0x6a bytes 
kernel32.dll!@BaseThreadInitThunk@12()  + 0x12 bytes    
ntdll.dll!___RtlUserThreadStart@8()  + 0x27 bytes   
ntdll.dll!__RtlUserThreadStart@8()  + 0x1b bytes 
```

这里的重要位是 TimerThreadStart() 函数，它是 CLR 启动的线程的起点。而 SleepEx() 调用，就是这个线程在下一个计时器到期之前一直处于休眠状态。此堆栈跟踪适用于 .NET 4.5，自 .NET 2.0 以来一直如此。对于哪些源代码可用，您可以查看可[在此处下载](http://www.microsoft.com/en-us/download/details.aspx?id=4917)的 SSCLI20 源代码。搜索该代码会将您带到 clr/src/vm/win32threadpool.cpp 源代码文件。看看它，看看发生了什么。

我将简单地描述一下。计时源是 GetTickCount() api 函数，与 Environment.TickCount 使用的相同。FireTimers() 函数排序出哪个活动计时器首先到期。SleepEx() 函数与 Thread.Sleep() 函数相同，不同之处在于它是*alertable*。它可以在睡眠完成之前被 APC（异步过程调用）中断。您看到在同一个文件中使用 QueueUserAPC() 函数，当线程因为程序关闭而需要终止时，以及当添加或修改计时器以便需要计算新的睡眠时。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-29T15:42:25.780

.NET BCL 至少有两个类提供计时器：

*   [`System.Threading.Timer`](http://msdn.microsoft.com/en-us/library/system.threading.timer.aspx)
*   [`System.Timers.Timer`](http://msdn.microsoft.com/en-us/library/system.timers.timer.aspx)

但是，第二个类是使用第一个类实现的。第一类使用某种本机 Win32 计时器，Hans Passant 提供了有关所使用机制的更多信息。在 BCL 源代码中，计时器是使用名为`TimerQueue`. 该类的实现`TimerQueue`有这样的评论：

> TimerQueue 维护此 AppDomain 中的活动计时器列表。我们使用由 VM 提供的单个本机计时器来调度 AppDomain 中的所有托管计时器。

所以基本上 AppDomain 有一个使用非托管代码实现的单一时间源。有关更多信息，请参阅 Hans Passant 的回答。

* * *

> 此外，最好知道在哪里可以找到 C# 源代码以进行查看。

我使用[JetBrains dotPeek](http://www.jetbrains.com/decompiler/)。它可以配置为从 Microsoft 检索源文件（如果存在）。只需加载您想要检查的 .NET 版本，点击`Ctrl`+ `T`，键入“Timer”，选择您想要的特定类，如果存在，它将下载源代码。否则你会看到一个反编译的版本（取决于你的配置）。

请注意，此工具仅允许您对托管代码进行反编译并完全了解 .NET 中计时器的实现，您需要能够进一步了解非托管代码。

# python - 使用 cx_Oracle 将变量绑定到表名

> ID：13124572
> 
> 赞同：2
> 
> 时间：2012-10-29T15:24:27.373
> 
> 标签：python, oracle, cx-oracle

我在 Python 中使用 cx_Oracle 并且无法将变量用作表名，就像在这个简单的示例中一样：

```
query = "select * from some.:usertable.userinfo"

bindvars = {'usertable':usertable}

cursor.execute(query, bindvars) 
```

什么是正确的语法？当我使用...等时，变量替换工作正常，`WHERE`但不适用于表名。我想我必须以某种方式分隔“：usertable”......</p>

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T15:54:49.237

数据库适配器很少支持对不是“值”的任何东西（需要引用的东西）使用参数。要么使用字符串格式（狡猾，你冒着 sql 注入的风险），要么使用像 SQLAlchemy 这样的库，让你使用 Python 代码生成有效的 SQL。

如果您确定您的`usertable`值是合理的（例如，根据现有表名列表检查），则以下内容将起作用：

```
query = 'select * from some.{usertable}.userinfo'.format(usertable=usertable) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T18:11:46.063

您不能在 Oracle 中绑定对象名称，只能绑定文字。但是，Oracle 确实有一个内置包[`dbms_assert`](http://docs.oracle.com/cd/E11882_01/appdev.112/e25788/d_assert.htm)，以帮助防止在使用动态对象名称时进行 SQL 注入。在您的情况下，最有用的功能可能是[`sql_object_name`](http://docs.oracle.com/cd/E11882_01/appdev.112/e25788/d_assert.htm#BABDDEEF)，其中：

> “...验证输入参数字符串是现有 SQL 对象的限定 SQL 标识符。”

例如，您可以在 cx_Oracle 中执行以下操作。

```
object_name = cursor.callfunc('sys.dbms_assert.sql_object_name'
                             , cx_Oracle.string, ['usertable']) 
```

如果名称无效，它会引发 ORA-44002，您[可以在 cx_Oracle 中捕获它](http://cx-oracle.sourceforge.net/html/module.html#exceptions)，或者如果一切正常，请按照 Martijn 的建议继续。

我建议阅读 Oracle 的[防止 SQL 注入](http://docs.oracle.com/cd/E11882_01/appdev.112/e25519/dynamic.htm#BJECFFHD)指南。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-18T12:54:02.893

也许回复有点晚了，但我两天前正在处理同样的事情。

正如 Martjin 所说，解决方案是格式化查询。

```
query = f'select * from {tableName}' 
```

希望它能帮助别人，因为它帮助了我。

# ruby-on-rails - 使用 Rails 的 accept_nested_attributes_for 功能时如何维护子记录的顺序？

> ID：13124575
> 
> 赞同：0
> 
> 时间：2012-10-29T15:24:48.233
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, sqlite

我正在使用 Rails 的漂亮`accepts_nested_attributes_for`工具来创建`invoices`和他们的`items`. `Items`可以`invoice`用 jQuery 动态添加。

```
class Invoice < ActiveRecord::Base
  attr_accessible :project_id, :number, :date, :recipient, :items_attributes
  accepts_nested_attributes_for :items
end 
```

这工作正常。除了**Rails**保存`items`.

例如，当我`invoice`用这 5 个`items`...

```
A
B
C
D
E 
```

...一切正常。但是当我点击`Create`将发票和项目保存到数据库时，订单是完全随机的，例如：

```
D
A
C
E
B 
```

查看我的数据库和`created_at`我的`items`表列显示 Rails（或 SQLite？）似乎`items`以随机顺序保存，而不是按照我（作为用户）将它们添加到`invoice`.

这是正常行为吗？如果是这样，我如何才能在`items`添加到我的 时保持正确的顺序`invoice`？

谢谢你的帮助...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T16:14:04.343

您可以通过将 :order 选项传递给您的关联来指定接收关联对象的顺序。例如：

```
has_many :items, :order => "created_at DESC" 
```

来源：[关联选项](http://guides.rubyonrails.org/association_basics#options-for-has_many)

# ios - NSURLConnection，登录然后发布图片

> ID：13124577
> 
> 赞同：0
> 
> 时间：2012-10-29T15:24:54.147
> 
> 标签：ios, uiwebview, nsurlconnection, nsurlrequest

**我正在尝试从我的 iPhone 将图片上传到我的网站，但我需要先进行身份验证。**

我的第一次尝试是使用 NSMutableURLRequest 使用我的登录凭据发送 HTTP Post 请求，然后使用第二个 NSMutableURLRequest（在单独的 NSURLConnection 中）以类似的方式发送图像。但这失败了，因为从登录到图像帖子没有保留任何会话数据。我仍然在第二个请求中遇到了身份验证错误。

我想我会很聪明并创建一个隐藏的 UIWebView 并只调用`[webview loadRequest:request];`登录然后发布图像，其中 request 类型为`NSMutableURLRequest`。这很好用，现在我可以将图像上传到我的网站......

....但是，当我在我的 iPod touch 上尝试时，`received memory warning`当我打电话时`[webview loadRequest:request];`我只为整个应用程序分配了大约 10MB 的内存（感谢分析器）所以我猜它不是在请求本身，但 UIWebView 如何处理它。我认为 UIWebivew 的“视图”部分分配了大量内存。

**这是我的问题：**如何保持 NSURLConnections 之间的会话和登录数据，这样我就不必使用 UIWebView？

伪代码：

```
 NSMutableURLRequest *request = [[NSMutableURLRequest alloc] init];
    [request setCachePolicy:NSURLRequestReloadIgnoringLocalCacheData];
    [request setHTTPShouldHandleCookies:YES];
    [request setTimeoutInterval:180];
    [request setHTTPMethod:@"POST"];
    [ request setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"content-type"];

    NSURL* url = [[NSURL alloc]initWithString:@"http://website.com/login.php"];

     NSMutableData *body = [NSMutableData data];
    [body appendData:[@"username=me&password=password&" dataUsingEncoding:NSUTF8StringEncoding]];

    [request setHTTPBody:body];

    NSString *postLength = [NSString stringWithFormat:@"%d", [body length]];
    [request setValue:postLength forHTTPHeaderField:@"Content-Length"];    

    [request setURL:url]; 
```

然后：

```
 [self.webview loadRequest:request]; 
```

或者：

```
 NSURLConnection* connection = [[NSURLConnection alloc] initWithRequest:request delegate:self];

    if (connection) {
        NSLog(@"Login Opened");
        responseData = [NSMutableData data];
    } else {
        NSLog(@"Logon failed");
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T14:07:37.713

身份验证取决于 cookie 的正确功能。看起来您正在使用 Web 视图的 loadRequest 来处理您的一个请求。如果您只`NSURLConnection`用于这两个请求，它应该正确地管理从第一个响应中读取 cookie 并代表您在第二个请求中发送它。（请参阅[URL 加载系统编程指南](http://developer.apple.com/Mac/library/documentation/Cocoa/Conceptual/URLLoadingSystem/Concepts/URLOverview.html#//apple_ref/doc/uid/20001834-157091)。）如果这仍然不起作用，那么您的服务器上的会话 cookie 设置可能有问题。

# boilerplatejs - 将 jQuery-UI 与 BoilerPlateJS 一起使用

> ID：13124581
> 
> 赞同：0
> 
> 时间：2012-10-29T15:25:06.547
> 
> 标签：boilerplatejs

如何在 BoilerPlateJS 中包含 JQuery-UI 组件？我有一个使用 jquery 选项卡、日期选择器等的网络应用程序。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T15:47:58.960

您可以在应用程序的 index.html 文件中添加 jquery-ui 脚本和 css 文件，因此所有 JQuery-UI 组件将在全球范围内可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T05:57:47.343

正如@guigouz 提到的，在创建ui 面板之后，您需要在组件的activate 方法中初始化jqueryui 元素。

我在这里添加了一个 jqueryui 示例[https://github.com/slayerjay/boilerplatejs/tree/master/src/modules/sampleModule2/jqueryui](https://github.com/slayerjay/boilerplatejs/tree/master/src/modules/sampleModule2/jqueryui)

# c# - 如何在 API Controller 中有两个方法名称相同但参数不同？

> ID：13124587
> 
> 赞同：0
> 
> 时间：2012-10-29T15:25:37.593
> 
> 标签：c#, asp.net-mvc-3, asp.net-mvc-4

我是 MVC4 中 ApiControllers 的新手，我需要使用不同的参数集进入我的 Api 控制器，如下所示：

```
public Models.Response Get(int skip, int take, int pageSize, int page)
{
    //do something
}

public Models.Response Get(int skip, int take, int pageSize, int page, PersonSearchModel personSearchModel)
{
    //search with search model
} 
```

我制作了一串“PersonSearchModel”属性，我的请求如下所示：（搜索模型的实例为空）

> localhost:3039/api/personapi/?Firstname=&Lastname=&BirthDate=1/1/0001%2012:00:00%20AM&Gender=0&PageIndex=0&PageSize=20&SortExpression=&TotalItemCount=0&TotalPageCount=0&&take=3&skip=0&page=1&pageSize=3

根据我从 MVC3 知道的内容，它应该将 url 映射到搜索模型并选择第二个 Get，但我在我的 firebug 中得到“找到与请求匹配的多个操作”异常。我该怎么办？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T15:31:56.923

在控制器的 MVC 中你不能做的一件事是重载函数。

对于额外参数，将其设置为可选并检查您为其分配的默认值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T15:33:13.540

您可以编写一个派生自 ActionMethodSelectorAttribute 的自定义属性来检查请求参数。您需要覆盖 IsValidForRequest 方法。可能是这样的

```
public class RequireRequestValueAttribute : ActionMethodSelectorAttribute
{
    public RequireRequestValueAttribute(valueName)
    {
        ValueName = valueName;
    }
    public override bool IsValidForRequest(ControllerContext controllerContext, MethodInfo methodInfo)
    {
        return (controllerContext.HttpContext.Request[ValueName] != null);
        }
    }
    public string ValueName { get; private set; }
} 
```

（您可以扩展它以检查多个参数）

您将此属性与您的方法一起使用，如下所示

```
public Models.Response Get(int skip, int take, int pageSize, int page)
{
    //do something
}

[RequireRequestValue("personSearchModel")]
public Models.Response Get(int skip, int take, int pageSize, int page, PersonSearchModel personSearchModel)
{
    //search with search model
} 
```

这适用于 MVC 3，我想它也适用于 MVC 4

# java - 跨可信域的 Java AD 身份验证

> ID：13124591
> 
> 赞同：3
> 
> 时间：2012-10-29T15:26:04.723
> 
> 标签：java, active-directory, ldap

我正在尝试在 Java 中实现 Active Directory 身份验证，它将从 Linux 机器运行。我们的 AD 设置将由多个彼此共享*信任*关系的服务器组成，因此对于我们的测试环境，我们有两个域控制器：

`test1.ad1.foo.com`谁信任`test2.ad2.bar.com`。

使用下面的代码，我可以成功地对用户进行身份验证，`test1`但不能`test2`：

```
public class ADDetailsProvider implements ResultSetProvider {
private String domain;
private String user;
private String password;

public ADDetailsProvider(String user, String password) {
    //extract domain name
    if (user.contains("\\")) {
        this.user = user.substring((user.lastIndexOf("\\") + 1), user.length());
        this.domain = user.substring(0, user.lastIndexOf("\\"));
    } else {
        this.user = user;
        this.domain = "";
    }

    this.password    = password;
}

    /* Test from the command line */
public static void main (String[] argv) throws SQLException {
    ResultSetProvider res = processADLogin(argv[0], argv[1]);
    ResultSet results = null;
    res.assignRowValues(results, 0);
    System.out.println(argv[0] + " " + argv[1]);
}

public boolean assignRowValues(ResultSet results, int currentRow)
    throws SQLException
{
    // Only want a single row
    if (currentRow >= 1) return false;

    try {
        ADAuthenticator adAuth = new ADAuthenticator();
        LdapContext ldapCtx = adAuth.authenticate(this.domain, this.user, this.password);
        NamingEnumeration userDetails = adAuth.getUserDetails(ldapCtx, this.user);

        // Fill the result set (throws SQLException).
        while (userDetails.hasMoreElements()) {
            Attribute attr = (Attribute)userDetails.next();
            results.updateString(attr.getID(), attr.get().toString());
        }

        results.updateInt("authenticated", 1);
        return true;

    } catch (FileNotFoundException fnf) {
        Logger.getAnonymousLogger().log(Level.WARNING,
           "Caught File Not Found Exception trying to read cris_authentication.properties");

        results.updateInt("authenticated", 0);
        return false;

    } catch (IOException ioe) {
        Logger.getAnonymousLogger().log(Level.WARNING,
            "Caught IO Excpetion processing login");

        results.updateInt("authenticated", 0);
        return false;

    } catch (AuthenticationException aex) {
        Logger.getAnonymousLogger().log(Level.WARNING,
           "Caught Authentication Exception attempting to bind to LDAP for [{0}]",
           this.user);

        results.updateInt("authenticated", 0);
        return true;

    } catch (NamingException ne) {
        Logger.getAnonymousLogger().log(Level.WARNING,
           "Caught Naming Exception performing user search or LDAP bind for [{0}]",
           this.user);
        results.updateInt("authenticated", 0);
        return true;
    }
}

public void close() {
    // nothing needed here
}

/**
 * This method is called via a Postgres function binding to access the
 * functionality provided by this class.
 */
public static ResultSetProvider processADLogin(String user, String password) {
    return new ADDetailsProvider(user, password);
}
}

public class ADAuthenticator {

public ADAuthenticator()
    throws FileNotFoundException, IOException {
    Properties props = new Properties();
    InputStream inStream = this.getClass().getClassLoader().
       getResourceAsStream("com/bar/foo/ad/authentication.properties");

    props.load(inStream);
    this.domain                = props.getProperty("ldap.domain");
    inStream.close();
}

public LdapContext authenticate(String domain, String user, String pass)
   throws AuthenticationException, NamingException, IOException {
    Hashtable env = new Hashtable();
    this.domain = domain;

    env.put(Context.INITIAL_CONTEXT_FACTORY, com.sun.jndi.ldap.LdapCtxFactory);
    env.put(Context.PROVIDER_URL, "ldap://" + test1.ad1.foo.com + ":" + 3268);
    env.put(Context.SECURITY_AUTHENTICATION, simple);
    env.put(Context.REFERRAL, follow);

    env.put(Context.SECURITY_PRINCIPAL, (domain + "\\" + user));
    env.put(Context.SECURITY_CREDENTIALS, pass);

    // Bind using specified username and password
    LdapContext ldapCtx = new InitialLdapContext(env, null);
    return ldapCtx;
}

public NamingEnumeration getUserDetails(LdapContext ldapCtx, String user)
   throws NamingException {
    // List of attributes to return from LDAP query
    String returnAttributes[] = {"ou", "sAMAccountName", "givenName", "sn", "memberOf"};

    //Create the search controls
    SearchControls searchCtls = new SearchControls();
    searchCtls.setReturningAttributes(returnAttributes);

    //Specify the search scope
    searchCtls.setSearchScope(SearchControls.SUBTREE_SCOPE);

    // Specify the user to search against
    String searchFilter = "(&(objectClass=*)(sAMAccountName=" + user + "))";

    //Perform the search
    NamingEnumeration answer = ldapCtx.search("dc=dev4,dc=dbt,dc=ukhealth,dc=local", searchFilter, searchCtls);

    // Only care about the first tuple
    Attributes userAttributes = ((SearchResult)answer.next()).getAttributes();
    if (userAttributes.size() <= 0) throw new NamingException();

    return (NamingEnumeration) userAttributes.getAll();
} 
```

根据我对信任关系的理解，如果在`trust1`中收到用户的登录尝试`trust2`，那么它应该将登录尝试转发给它，并从用户的域名中解决这个问题。

这是正确的，还是我遗漏了什么，或者使用上面的方法是不可能的？

--EDIT--
来自 LDAP 绑定的堆栈跟踪是 `{java.naming.provider.url=ldap://test1.ad1.foo.com:3268, java.naming.factory.initial=com.sun.jndi.ldap.LdapCtxFactory, java.naming.security.authentication=simple, java.naming.referral=follow} 30-Oct-2012 13:16:02
ADDetailsProvider assignRowValues WARNING: Caught Authentication Exception attempting to bind to LDAP for [trusttest] Auth error is [LDAP: error code 49 - 80090308: LdapErr: DSID-0C0903A9, comment: AcceptSecurityContext error, data 52e, v1db0]`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T15:37:12.327

据我所知，您应该将 Context.REFERRAL 设置为 true。
这是您在代码中的意思吗？
此外，当我切换到 GSSAPI/Kerberos 时，
我定义了 kerberos 领域之间的信任关系，它对我有用。

# facebook - 客户端无法在沙盒模式下查看应用程序

> ID：13124594
> 
> 赞同：0
> 
> 时间：2012-10-29T15:26:10.777
> 
> 标签：facebook, sandbox

我为客户的 Facebook 页面创建了一个选项卡应用程序并将其置于沙盒模式。客户端具有应用程序的“测试员”角色。

但是，当我们尝试使用她的 Facebook 用户查看应用程序时，内容显示为空白，如下所示：

![截屏](../Images/57fa15430db146008c1b4024c26802be.png)

但是我可以很好地查看该应用程序。直到上周，客户才能看到它。

问题可能是什么？太可惜了，因为他们应该使用内置的管理界面来设置它。

提前致谢！

亲切的问候，托拜厄斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T13:09:08.377

这可能是 SSL 问题。如果您还没有签名的 SSL 证书，请确保您的客户已在其 Facebook 帐户设置 > 安全性中禁用安全浏览。

# java - 弹簧自动装配类

> ID：13124595
> 
> 赞同：3
> 
> 时间：2012-10-29T15:26:11.263
> 
> 标签：java, spring, dependency-injection, inversion-of-control

当我们将一个类注释为`@Autowired`时，它必须是一个接口还是可以是一个类？

我见过的所有使用 Spring 的例子，都是使用一个接口，然后在一个类上实现它。然后使用接口类型调用具体类上的函数。我们能不能简单地添加`@Autowired`到一个具体的类而不是一个接口。

我知道程序与 JAVA 中的接口类比，但如果你不依赖于多态，那为什么要编写接口？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T15:28:59.617

不，您不必使用接口，就 Spring 而言，这完全没问题：

```
@Service
public class FooService {
    @Autowired
    private FooDao fooDao;
} 
```

或者你甚至可以进行建筑注入：

```
@Service
public class FooService {

    private final FooDao fooDao;

    public FooService(FooDao fooDao) {
        this.fooDao = fooDao;
    }
} 
```

接口通常是不合时宜的实践，每一代都在重复。如果不需要，请不要使用它们。如果它们总是只有一个实现，或者如果你想模拟这样一个类（现代模拟框架模拟类没有任何问题），它们就不是必需的。

注入具体类也没有错，就像`FooDao`上面的例子一样。它有一些技术含义。代理，但没有什么是不能理解的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-29T15:30:10.333

技术上`@Autowired`可用于实现或接口。春天不在乎。注入接口是一种设计策略。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-30T06:03:35.780

@Autowired 也可以用于类而不是接口。但是，使用接口将是一种更好的做法，因为它减少了组件之间的硬耦合。

# ios6 - 如何在由内容可用通知启动的报亭应用程序中使用 MKNetworkKit 执行 GET 请求

> ID：13124602
> 
> 赞同：1
> 
> 时间：2012-10-29T15:26:26.293
> 
> 标签：ios6, apple-push-notifications, newsstand-kit, mknetworkkit

我的报亭应用程序可以通过内容可用的推送通知启动。发生这种情况时，应检索问题列表，并下载包含最新问题的 zip 文件。

我无法检索问题列表。此问题仅在通过内容可用推送通知启动应用程序时发生。手动启动应用程序时，一切正常。

这段代码下载问题列表：

```
-(MKNetworkOperation*)getIssueList:(void(^)(NSArray *issues, BOOL cacheResponse))completionBlock
                             onError:(MKNKErrorBlock) errorBlock{
    MKNetworkOperation *op = [self operationWithPath:@"list/"
                                              params:nil
                                          httpMethod:@"GET"];
    NSLog(@"in getissuelist");

    [op onCompletion:^(MKNetworkOperation *completedOperation)
     {
         NSLog(@"in getissuelist on completion");
         BOOL cachedResponse = NO;
         if([completedOperation isCachedResponse]) {
             cachedResponse = YES;
         }

         NSArray *issueDicts = [completedOperation responseJSON];
         completionBlock(issueDicts, cachedResponse);

     }onError:^(NSError* error) {
         NSLog(@"in getissuelist on error");
         errorBlock(error);
     }];

    [self enqueueOperation:op];

    NSLog(@"in getissuelist return op");
    return op;
} 
```

这是通过通知启动应用程序时的控制台输出

```
Oct 29 16:06:42 murzofoon newsstand[2373] <Warning>: start download latest
Oct 29 16:06:42 murzofoon newsstand[2373] <Warning>: in getissuelist
Oct 29 16:06:42 murzofoon newsstand[2373] <Warning>: in getissuelist return op 
```

因此操作已入队，但未调用 onCompletion（和 onError）块。

当我收到通知后手动启动应用程序时，会调用 onCompletion 块。

`Oct 29 16:06:54 murzofoon newsstand[2373] <Warning>: in getissuelist on completion`

在我手动启动应用程序之前，似乎没有处理 MKNetworkOperation。即使我没有手动启动应用程序，我也希望调用 onCompletionblock。如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T16:09:27.147

事实证明，这个问题与 MKNetworkKit 无关。我忘了购买一些后台时间来完成这些任务。

当在 beginBackgroundTaskWithExpirationHandler 调用之后调用网络函数时，它们工作得很好。

# mysql - Mysql 查询：在单列中显示多个值

> ID：13124603
> 
> 赞同：1
> 
> 时间：2012-10-29T15:26:27.733
> 
> 标签：mysql, group-concat

我有以下查询：

```
 $query = db_select('commerce_order', 'cord')->extend('TableSort');
  $query->join('commerce_line_item', 'li', 'cord.order_id = li.order_id');
  $query->join('commerce_product', 'item', 'item.sku = li.line_item_label');
  $query->fields('cord', array('order_id'))
        ->fields('li', array('quantity'))
        ->fields('item', array('title', 'sku'))
        ->groupBy('title')

        ->orderByHeader($header); 
  $query->addExpression('SUM(quantity)', 'quantity');      
  $result = $query->execute(); 
```

如您所见，结果按“标题”分组。其中一行如下所示：

产品 1 - 0000003 - 3.00 - 612

3.00 是数量，612 是订单 ID**之一。**订单 612 的数量为 2，订单 615 的数量为 1。如何在订单 ID 612 旁边显示订单 ID 615？所以该行看起来像这样：

产品 1 - 0000003 - 3.00 - 612、615

我希望你能明白，提前感谢你的帮助

**解决方案**

```
$query->addExpression("GROUP_CONCAT(li.order_id separator ', ')", 'order_id'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T15:33:05.367

在 MySQL 中，您可以添加一个表达式`GROUP_CONCAT(order_id)`，它将是每个组的所有值的逗号分隔列表。有关详细信息，请参阅[GROUP_CONCAT()](http://dev.mysql.com/doc/refman/5.5/en/group-by-functions.html#function_group-concat)手册。

如果您不使用 MySQL，则必须使用其他解决方案。GROUP_CONCAT 是 MySQL 特有的函数，但其​​他一些 RDBMS 品牌也有一些等效的方法来做同样的事情。

# java - 设计问题：增强代码可重用性的具体案例

> ID：13124606
> 
> 赞同：3
> 
> 时间：2012-10-29T15:26:29.353
> 
> 标签：java, android, design-patterns

我有一些 View 子类的实例（如 ImageView、ViewGroup、TextView 等），我让它们都实现了两个方法 a() 和 b()，它们都必须运行相同的 init() 方法，该方法很长并为所有这些做同样的事情。在这种情况下，我应该如何设计我的架构以增强代码的可重用性？

如果它是 C++，我可以从视图和一个在创建时运行 init() 并具有抽象方法 a() 和 b() 的新抽象类进行多重继承，它是如何在 Java 中实现的？

也许有某种方法可以使用某种装饰器来实现它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T15:38:57.793

如果我理解正确，您可以创建一个抽象类`AbstractView`来扩展`View`和实现您的常用`init()`方法。 `AbstractView`应该声明抽象方法`a()`和`b()`，但将实现留给子类。

```
public abstract class AbstractView extends View {
    public void init() {
        // common init implementation here
    }

    public abstract void a();
    public abstract void b();
} 
```

由于您试图将行为添加到一组现有子类（`ImageView`、`ViewGroup`、`TextView`等），您可能确实需要为每个子类（`MyImageView`、`MyViewGroup`、`MyTextView`等）创建一个包装器。这些子类中的每一个都将扩展`AbstractView`和实现它们自己的方法`a()`和方法，`b()`但继承公共`init()`方法（以及类中实现的所有方法。然后，您可以为您需要`View`的现有行为创建委托方法保持不变。`ImageView``ViewGroup``TextView`

```
public class MyImageView extends AbstractView {

    private ImageView wrappedImageView;

    public MyImageView(Context context) {
        wrappedImageView = new ImageView(context);
    }

    // TODO: Implement other constructor wrappers

    final void clearColorFilter() {
        wrappedImageView.clearColorFilter();
    }

    // TODO: Implement other method wrappers

    @Override
    public void a() {
        // specific implementation here
    }

    @Override
    public void b() {
        // specific implementation here
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T15:39:57.590

您需要一个带有 init() 方法的新抽象类：

```
public abstract class MyAbstractView extends View {
  public void init() {
    //TODO: implement init 
  }
  public abstract void a();
  public abstract void b();
} 
```

让你的类（ImageView、TextView）继承自这个抽象类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T15:44:29.970

如果我正确地理解了你的答案，你应该做的是：

```
public abstract class MyBaseView extends View{

  public MyBaseView(Context context) {
    super(context);
    init();
    // TODO Auto-generated constructor stub
  }

  private void init(){

  }

  public abstract void a();
  public abstract void b();
} 
```

然后使用以下方法再次扩展它：

```
public class MyView extends MyBaseView{

    public MyView(Context context) {
        super(context);
        // TODO Auto-generated constructor stub
    }

    @Override
    public void a() {
        // TODO Auto-generated method stub

    }

    @Override
    public void b() {
        // TODO Auto-generated method stub

    }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T15:50:04.700

您可以定义实现方法 init() a() b() 的类层次结构。根据层次结构中的子类逐步添加内容。最后，您的视图将调用此类的方法并为自己生成内容。

```
 interface WidgetContent {
        void init();

        void a();

        void b();
    }

    abstract class AbstractWidgetContent implements WidgetContent  {
        public void init(){}

        public abstract void a();

        public abstract void b();
    }

    class BaseViewWidgetContent extends AbstractWidgetContent {

        public void a() {
        }

        public void b() {
        }

    }

    class ImageViewWidgetContent extends BaseViewWidgetContent {

        public void a() {
        }

        public void b() {
        }
    }

class PictureView extends ImageView{
    ImageViewWidgetContent imageContent;

} 
```

# sql-server-2000 - 在 SQL Server 2000 中如何将表转换为文本文件

> ID：13124607
> 
> 赞同：0
> 
> 时间：2012-10-29T15:26:29.913
> 
> 标签：sql-server-2000, ssms, bcp

在 SQL Server 2000 中，我需要将表数据（全部，而不是部分）转换为文本文件（csv 或选项卡）。

例如，如何使用`tblCustomer`包含姓名、地址、电话号码的表 ( ) 执行此操作？

我不使用 SQL Server Management Studio。我有很多组每天都在运行的存储过程，我只想编写一个存储过程来添加到其中一个组中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T15:33:30.453

你正在使用管理工作室，你可以试试[这个](http://www.sql-server-helper.com/forums/topic.asp?TOPIC_ID=353)：

> 1.  在您的 SQL Server Management Studio 中，右键单击表所在的数据库，然后选择 Tasks->Export Data。这将打开 SQL Server 导入和导出向导，它与 SQL Server 2000 的 DTS 导入/导出实用程序非常相似。
> 2.  从“选择数据源”屏幕中选择您的表，然后单击下一步。
> 3.  在“选择目标”中，选择“平面文件目标”作为目标并输入文件名。
> 
> 之后点击下一步，你应该已经好了。

您还可以使用查询将其导出为 xml，然后在您的应用程序上将其转换为 csv。看看这个：[FOR XML](http://msdn.microsoft.com/en-us/library/ms178107.aspx)

或者，正如@Aaron 所说，使用[BCP 实用程序](http://msdn.microsoft.com/en-us/library/aa174646%28v=sql.80%29.aspx)

**编辑**

正如您所说的您想要查询方式，我会选择`For XML`他们将结果解析为 CSV 格式。AFAIK，SQL Server 无法自动执行您想要的操作，因此您必须自己制作。此外，您可以调整[此](https://stackoverflow.com/questions/111341/combine-multiple-results-in-a-subquery-into-a-single-comma-separated-value)示例。

[在这里](http://www.virtualobjectives.com.au/sqlserver/saving_to_csv.htm)和[这里，](http://www.simple-talk.com/sql/database-administration/creating-csv-files-using-bcp-and-stored-procedures/)您可以找到一些可能对您有所帮助的脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T15:29:35.817

您使用的是 SQL Server Management Studio 吗？

如果是这样，只需右键单击数据库名称，然后从上下文菜单中选择任务->导出数据，然后按照向导进行操作。

# flash - Scriptaculous 可拖动对象在 Firefox 中不起作用

> ID：13124608
> 
> 赞同：1
> 
> 时间：2012-10-29T15:26:30.943
> 
> 标签：flash, prototypejs, scriptaculous

我们正在使用 Scriptaculous 的可拖动功能来允许拖放元素。除了处理 Flash 电影外，这一切都很好。我们正在使用 Scriptaculous v1.9.0 和 PrototypeJS v1.7。一个样本是：

```
<div style="position:absolute; z-index:1; top:0px; left:0px; height:px; width:px;" id="wrapper_movie15">
    <object height="337" width="364" style="position: absolute; width: 364px; height: 337px; z-index: 1; top: -15px; left: 42px;" class="movieId_ie15 selectable selected" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" id="movie15">
        <param value="movie.swf" name="movie">
        <param value="transparent" name="wmode">
        <param value="always" name="allowScriptAccess">
        <!--[if !IE]>-->
        <object height="337" width="364" data="movie.swf" type="application/x-shockwave-flash">
        <!--<![endif]-->            
        <p>--- movie ---</p>
        <!--[if !IE]>-->
        </object>
        <!--<![endif]-->
    </object>
</div>
<script type="text/javascript">
    new Draggable('movie15',{
        handle:'wrapper_movie15'    
    });
</script> 
```

Chrome v22 和 IE9 按预期工作，移动电影，但是 Firefox v16.0.1 似乎没有做任何事情。

任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T17:47:03.283

怎么了：

1.  手柄应该在可拖动元素的内部（换句话说，与该对象一起移动）。当句柄停留在同一个地方时，您正试图移动 Flash 电影。

2.  两者`wrapper`都`object`绝对定位。

3.  点击将闪烁对象。

可能的解决方案：

*   [http://jsfiddle.net/C25MJ/](http://jsfiddle.net/C25MJ/) - Flash 影片上方有 50px 的句柄

*   [http://jsfiddle.net/C25MJ/1/](http://jsfiddle.net/C25MJ/1/) - 覆盖定位在 Flash 电影上，覆盖将劫持鼠标点击

# perl - 使用 snp 位置修改序列并在同一文件中输出

> ID：13124610
> 
> 赞同：5
> 
> 时间：2012-10-29T15:26:35.983
> 
> 标签：perl, sed, awk

我有两个文件，一个是位置信息，另一个是序列信息。现在我需要读取位置并获取位置处的snp并将该位置基替换为序列中的snp信息并将其写入snp信息文件中..例如

Snp 文件包含

```
10 A C A/C 
```

序列文件包含

```
ATCGAACTCTACATTAC 
```

这里第 10 个元素是 T，所以我将用 [A/C] 替换 T，所以最终输出应该是

```
10 A C A/C ATCGAACTC[A/C]ACATTAC 
```

示例文件是

文件

```
SNP Ref Alt
10  A   C
19  G   C
30  C   T
42  A   G 
```

序列 ：

> 序列1 CTAGAATCAAAGCAAGAATACACTCTTTTTTTTGGAAAAGAATATCTCATGTTTGCTCTT

最终输出：

```
SNP Ref Alt Output
10  A   C   CTAGAATCA[A/C]AGCAAGAANACACTCTTTTTTTTGGAAAAGAATATCTCATGTTTGCTCTT
19  G   C   CTAGAATCANAGCAAGAA[C/G]ACACTCTTTTTTTTGGAAAAGAATATCTCATGTTTGCTCTT
30  C   T   CTAGAATCAAAGCAAGAATACACTCTTTT[T/C]TTTGGAAAAGAATATCTCATGTTTGCTCTT
42  A   G   CTAGAATCAAAGCAAGAATACACTCTTTTTTTTGGAAAAGA[A/G]TATCTCATGTTTGCTCTT 
```

在从 Ref 和 A​​lt 列替换此处的 snps 时，我们需要考虑 {A,T,C,G} 的顺序，例如 [Ref/Alt] 始终第一个碱基应该是 A 或 T 或 C，然后是命令。

另一件事是，如果我们取 snp 位置，并且如果有 10 个碱基差异中有任何 snp，我们需要将那个 snp 位置替换为“N”。在上面的示例中，前两个位置的差异为 9，我们将另一个元素替换为“N”。

我编写了代码，它按顺序打印位置，还用该 snp 位置替换序列，但无法读取附近的位置并用 N 替换。

我的方法可能是完全错误的，因为我是编码的初学者。我认为通过使用哈希，我们可以轻松实现这一点，但我对哈希不太熟悉。请提供一些建议。我不必只使用 perl ,

```
my $input_file = $ARGV[0];
my $snp_file = $ARGV[1];
my $output_file = $ARGV[2];

%sequence_hash = ();

open SNP, $snp_file || die $!;
$indel_count = 0;
$snp_count = 0;
$total_count = 0;

#### hashes and array
@id_array = ();

while ($line = <SNP>) {

    next if $line =~ /^No/;
    $line =~ s/\r|\n//g;

   # if ($line =~ /\tINDEL/) {

    #    $indel_count++;
     #   $snp_type = "INDEL";

    #} else {
     #   $snp_count++;
      #  $snp_type = "SNP";
    #}

    @parts = split(/\t/,$line);

    $id = $parts[0];
    $pos = $parts[1];
    #$ref_base = $parts[3];
    @temp_ref = split(",",$parts[2]);
    $ref_base = $temp_ref[0];
    @alt = split(",",$parts[3]);
    $alt_base = $alt[0];
    $snpformat = '';

    if ($ref_base eq "A" || $alt_base eq "A")
    {

        if ($ref_base eq "A"){
            $snpformat = "[".join("/",$ref_base,$alt_base)."]";}
            #$snpformat = $ref_base/$alt_base;}
            #print "refbase is A $ref_base \t $alt_base \t $snpformat \n"; }

            else 
            {$snpformat = "[".join("/",$alt_base,$ref_base)."]";}
            #print "Altbase is A $ref_base \t $alt_base \t $snpformat \n";}
    }

    elsif ($ref_base eq "T" || $alt_base eq "T")
    {

        if ($ref_base eq "T"){
            $snpformat = "[".join("/",$ref_base,$alt_base)."]";}
            #$snpformat = $ref_base/$alt_base;}
            #print "refbase is A $ref_base \t $alt_base \t $snpformat \n"; }

            else 
            {$snpformat = "[".join("/",$alt_base,$ref_base)."]";}
            #print "Altbase is A $ref_base \t $alt_base \t $snpformat \n";}
    }

    elsif ($ref_base eq "C" || $alt_base eq "C")
    {

        if ($ref_base eq "C"){
            $snpformat = "[".join("/",$ref_base,$alt_base)."]";}
            #$snpformat = $ref_base/$alt_base;}
            #print "refbase is A $ref_base \t $alt_base \t $snpformat \n"; }

            else 
            {$snpformat = "[".join("/",$alt_base,$ref_base)."]";}
            #print "Altbase is A $ref_base \t $alt_base \t $snpformat \n";}
    }

    else 
    {$snpformat = "-/-" ;}
    print " $id \t $pos \t $ref_base \t $alt_base \t $snpformat \n  ";
}

open SEQ, $input_file ||die $!;

$header = '';
$sequence = '';
$num_sequences = 0;

while ($line = <SEQ>) {

    $line =~ s/\r|\n//g;
    next if $line =~ //;

    if ($line =~ /^>(.+)/) {
        if ($header eq '') {

            $header = $1;
            $sequence = '';
            next;
        } else {

            $sequence_len = length($sequence);

            $sequence_hash{$header} = $sequence;
            push (@headers,$header);
            #print $header."\t".$sequence_len."\n";
            #print $sequence."\n";
            $num_sequences++;

            $header = $1;
            $sequence = '';

        }

    } else {

        $sequence .= $line;

    }

}
$sequence_len = length($sequence);
$sequence_hash{$header} = $sequence;
push (@headers,$header);
#print $header."\t".$sequence_len."\n";

$num_sequences++;

close (SEQ);

$pos = '4';
substr($sequence,$pos,1) = "[A/G]";
print $sequence."\n";   
print "$pos \n"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-28T02:49:06.513

该`awk`脚本可能可以帮助您获得所需的结果。

```
awk '
BEGIN {
print "SNP\tRef\tAlt\tOutput"
}
NR==FNR { 
    a[++i]=$0
    next 
} 
FNR>1 { 
    x=substr(a[i],1,($1-1))
    z=substr(a[i],($1+1))
    if ($2=="A") {
        y="["$2"/"$3"]"
    } 
    else if ($2=="T" && $3=="A") {
        y="["$3"/"$2"]"
    }
    else if ($2=="C" && ($2=="A" || $2=="T")) {
        y="["$3"/"$2"]"
    }
    else if ($2=="G" && ($2=="A" || $2=="T" || $2=="C")) {
        y="["$3"/"$2"]"
    }
    else 
        y="["$3"/"$2"]"
    print $1"\t"$2"\t"$3"\t"x""y""z
}' sequence snp 
```

### 测试：

```
[jaypal:~/temp] cat sequence
CTAGAATCAAAGCAAGAATACACTCTTTTTTTTGGAAAAGAATATCTCATGTTTGCTCTT

[jaypal:~/temp] cat snp
SNP Ref Alt
10  A   C
19  G   C
30  C   T
42  A   G

[jaypal:~/temp] awk '
BEGIN {
print "SNP\tRef\tAlt\tOutput"
}
NR==FNR { 
    a[++i]=$0
    next 
} 
FNR>1 { 
    x=substr(a[i],1,($1-1))
    z=substr(a[i],($1+1))
    if ($2=="A") {
        y="["$2"/"$3"]"
    } 
    else if ($2=="T" && $3=="A") {
        y="["$3"/"$2"]"
    }
    else if ($2=="C" && ($2=="A" || $2=="T")) {
        y="["$3"/"$2"]"
    }
    else if ($2=="G" && ($2=="A" || $2=="T" || $2=="C")) {
        y="["$3"/"$2"]"
    }
    else 
        y="["$3"/"$2"]"
        print $1"\t"$2"\t"$3"\t"x""y""z
}' sequence snp
SNP Ref Alt Output
10  A   C   CTAGAATCA[A/C]AGCAAGAATACACTCTTTTTTTTGGAAAAGAATATCTCATGTTTGCTCTT
19  G   C   CTAGAATCAAAGCAAGAA[C/G]ACACTCTTTTTTTTGGAAAAGAATATCTCATGTTTGCTCTT
30  C   T   CTAGAATCAAAGCAAGAATACACTCTTTT[T/C]TTTGGAAAAGAATATCTCATGTTTGCTCTT
42  A   G   CTAGAATCAAAGCAAGAATACACTCTTTTTTTTGGAAAAGA[A/G]TATCTCATGTTTGCTCTT 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T08:10:17.560

我不是 perl 专家，但我认为这样做可以：

```
#!/usr/bin/perl

open(SEQ, "seq");
my $seq = <SEQ>;
$seq =~ s/.* //;

print "SNP Ref Alt Output\n";
open(SNP, "snp");
<SNP>;# header line
while(<SNP>)
{
    my($line) = $_;
    chomp($line);
    my ($loc, $ref, $alt) = split(/ +/, $line);
    my $outString = $seq;
    substr($outString, $loc-1, 1, "[$ref/$alt]");
    print $loc."  ".$ref."   ".$alt."   ".$outString."\n";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-28T03:51:49.013

```
A=1;T=2;C=3;G=4
echo "SNP Ref Alt Output"
while read l1 l2 l3; do
    lp=$(($l1 - 1))
    eval ol2=\$$l2 && eval ol3=\$$l3
    if [[ $ol2 > $ol3 ]]; then 
        ol2=$l3 && ol3=$l2; 
    else 
        ol2=$l2 && ol3=$l3; 
    fi
    sed "s@[^ ]* \(.\{$lp\}\).\(.*\)@$l1  $l2   $l3   \1[$ol2\/$ol3]\2@" sequence
done < snp 
```

**输出**

```
SNP Ref Alt Output
10  A   C   CTAGAATCA[A/C]AGCAAGAATACACTCTTTTTTTTGGAAAAGAATATCTCATGTTTGCTCTT
19  G   C   CTAGAATCAAAGCAAGAA[C/G]ACACTCTTTTTTTTGGAAAAGAATATCTCATGTTTGCTCTT
30  C   T   CTAGAATCAAAGCAAGAATACACTCTTTT[T/C]TTTGGAAAAGAATATCTCATGTTTGCTCTT
42  A   G   CTAGAATCAAAGCAAGAATACACTCTTTTTTTTGGAAAAGA[A/G]TATCTCATGTTTGCTCTT 
```

# sql - 使用 Min() 的 SQL

> ID：13124613
> 
> 赞同：2
> 
> 时间：2012-10-29T15:26:41.397
> 
> 标签：sql, sqlplus

我需要在我的数据库中显示最年轻的运动员。MIN(Athlete.Age) 工作正常，但我显然也需要这个名字。当我添加名称以选择时，我得到大约 5 个结果。如何只显示 MIN(Age) 和她的名字？

```
select MIN(Athlete.Age), Athlete.Name
 from (((Country INNER JOIN Athlete ON Country.Country_Code = Athlete.Country_Code)
  INNER JOIN Athlete_event
   ON Athlete.Athlete_ID = Athlete_event.Athlete_ID2)
  INNER JOIN Event
   ON Event.Event_ID = Athlete_event.Event_ID2)
 Where Athlete.Athlete_ID = Event.Award_Gold
 GROUP BY Athlete.Name; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T15:31:14.233

您可能有 5 位同龄的运动员。查询将不知道您想要哪一个。

如果您在数据库中有**出生日期**，请尝试使用它。

[编辑] 存储年龄通常不是一个好主意，因为在一年内，它们都会出错。

[edit2] 请注意，人们仍然可以共享相同的生日。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T15:36:10.620

如果您`GROUP BY`在查询中使用 ，则您正在搜索每个运动员的最小年龄。

您应该尝试使用子查询。将其添加到您的 where 子句中。类似的东西：（未测试）

```
select Athlete.Age, Athlete.Name
from Athlete
AND Athlete.Age = (select MIN(Athlete.Age)
from (((Country INNER JOIN Athlete ON Country.Country_Code = Athlete.Country_Code)
INNER JOIN Athlete_event
ON Athlete.Athlete_ID = Athlete_event.Athlete_ID2)
INNER JOIN Event
ON Event.Event_ID = Athlete_event.Event_ID2)
Where Athlete.Athlete_ID = Event.Award_Gold); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T15:28:05.637

```
select * 
from
(
    select Athlete.Age, Athlete.Name
    from (((Country INNER JOIN Athlete ON Country.Country_Code = Athlete.Country_Code)
      INNER JOIN Athlete_event
       ON Athlete.Athlete_ID = Athlete_event.Athlete_ID2)
      INNER JOIN Event
       ON Event.Event_ID = Athlete_event.Event_ID2)
     Where Athlete.Athlete_ID = Event.Award_Gold  
    order by Age
) v
where rownum=1; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T15:28:50.833

在您的查询中添加这一行

```
HAVING MIN(Athlete.Age) =  (SELECT MIN(AGE) from Athlete) 
```

所以你的最终查询看起来像

```
SELECT MIN(Athlete.Age),
        Athlete.NAME
FROM (((Country INNER JOIN Athlete
            ON Country.Country_Code = Athlete.Country_Code
        ) INNER JOIN Athlete_event
            ON Athlete.Athlete_ID = Athlete_event.Athlete_ID2
        ) INNER JOIN Event
            ON Event.Event_ID = Athlete_event.Event_ID2
        )
WHERE Athlete.Athlete_ID = Event.Award_Gold
GROUP BY Athlete.NAME
HAVING MIN(Athlete.Age) = ( SELECT MIN(AGE) FROM Athlete ) 
```

# android - 安卓手机的服务状态

> ID：13124619
> 
> 赞同：0
> 
> 时间：2012-10-29T15:27:12.583
> 
> 标签：android, networking

在我的一个应用程序中，我想在发送短信之前检查 android 手机的服务状态。我已经使用以下代码来做到这一点

```
 //check service
    ServiceState pstate = new ServiceState();
    if(pstate.getState() != ServiceState.STATE_IN_SERVICE)
        {
        Log.v(TAG,"service state" +pstate.getState());
        Toast.makeText(Myactivity.this, "error string", 2000).show();
        return;
        } 
```

但是代码总是返回 OUT_OF_SERVICE（+pstate.getState 中的值为 1）

请让我知道检查手机是否处于 STATE_IN_SERVICE 的可靠方法是什么？

此代码在 FROYO 版本中进行了检查。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T01:29:15.437

确实不是一个令人满意的答案，但我遇到了同样的问题并且一直在浪费时间，但它也不适用于我的 FROYO 版本。

但是使用[TelephonyManager](http://developer.android.com/reference/android/telephony/TelephonyManager.html)和[PhoneStateListener](http://developer.android.com/reference/android/telephony/PhoneStateListener.html)效果很好。对于您的情况，我建议使用包装器而不是直接实例化 ServiceState ，即

```
 //declare current state
    ServiceState myServiceState = new ServiceState();
    PhoneStateListener listener = null; // not sure if this is needed really..

    // nifty getter
    public ServiceState getServiceState(){ return myServiceState; }

    //setup listener (eg. in onCreate)
    TelephonyManager tm = (TelephonyManager) context.getSystemService(context.TELEPHONY_SERVICE);
    listener = new PhoneStateListener() {
        @Override
        public void onServiceStateChanged(ServiceState serviceState){
            myServiceState = serviceState;
        }
    };
    tm.listen(listener,PhoneStateListener.LISTEN_SERVICE_STATE);

    // to be called when destroying your context
    public void unregisterListener(){
        // something like..
        tm.listen(listener,PhoneStateListener.LISTEN_NONE);
    }

    //check service
    ServiceState pstate = getServiceState();
    if(pstate.getState() != ServiceState.STATE_IN_SERVICE)
    {
        Log.v(TAG,"service state" +pstate.getState());
        Toast.makeText(Myactivity.this, "error string", 2000).show();
        return;
    } 
```

一个更懒惰的解决方案是将监听器设置移动到 getter 中，并仅在实际调用时注册它，如果有的话，并且只有在服务可用时才保存。IE

```
 //declaration
    boolean isAvailable = false;
    PhoneStateListener listener = null;

    // more nifty getter
    public boolean isServiceAvailable(){
        if (listener == null){
            //setup listener if not yet done
            TelephonyManager tm = (TelephonyManager) context.getSystemService(context.TELEPHONY_SERVICE);
            listener = new PhoneStateListener() {
                @Override
                public void onServiceStateChanged(ServiceState serviceState){
                    isAvailable = serviceState.getState() == ServiceState.STATE_IN_SERVICE;
                }
            };
            tm.listen(listener,PhoneStateListener.LISTEN_SERVICE_STATE);
        }
        return isAvailable;
    }

    // to be called when destroying your context
    public void unregisterListener(){
        // something like..
        if (lister != null){
            tm.listen(listener,PhoneStateListener.LISTEN_NONE);
        }
    }

    //check service
    if(! isServiceAvailable())
    {
        Log.v(TAG,"service state" +pstate.getState());
        Toast.makeText(Myactivity.this, "error string", 2000).show();
        return;
    } 
```

但请注意，这将要求侦听器在注册后立即被调用，否则您最终会得到任意结果 - 因此请务必检查。

# iphone - 创建自定义视图以替换 UINavigationBar

> ID：13124626
> 
> 赞同：1
> 
> 时间：2012-10-29T15:27:38.497
> 
> 标签：iphone, ios, ipad, uinavigationcontroller, uinavigationbar

我有很多定制 UINavigationBars 的经验，发现不费吹灰之力就能让它做我想做的事是一件非常痛苦的事情。因此，我编写了自己的自定义 UIView，其行为就像 UINavigationBar 一样，并且可以完全轻松地自定义。但是，我遇到了一个问题，当导航控制器将新控制器推入堆栈时，我的自定义视图停止接收触摸事件。

为了更清楚地说明这一点，我的应用程序加载并显示了一个视图控制器，在 viewDidLoad 方法中，我创建了自定义导航栏并将其添加到控制器的视图中。以编程方式创建导航控制器，并将视图控制器推送给它。此时我的自定义视图位于顶部并接收触摸事件。当我将另一个视图控制器推送到导航控制器的堆栈时，我的自定义视图仍在顶部且可见，但未接收事件。

所以我的问题是如何让我的自定义导航栏回到响应者链中？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T15:38:51.197

如果您不必支持 iOS < 5.0，您应该尝试使用 UINavigationController 的`- (instancetype)initWithNavigationBarClass:(Class)navigationBarClass toolbarClass:(Class)toolbarClass`方法添加 UINavigationBar，而不是手动添加。

# java - 在 Java 中导入库

> ID：13124627
> 
> 赞同：0
> 
> 时间：2012-10-29T15:27:39.867
> 
> 标签：java, import

> **可能重复：**
> [Import package.* vs import package.SpecificType](https://stackoverflow.com/questions/187453/import-package-vs-import-package-specifictype)

我想知道这之间有什么区别

```
import javax.swing.* 
```

和

```
import javax.swing.SpecificLibaray 
```

因为第一种方法使编码更快更容易？

使用整个导入库和导入特定库制作的程序之间是否存在性能差异？

上述两种方式导入库的优缺点是什么？

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T15:33:34.430

我想您的意思是将通配符导入与单类导入（而不是库）进行比较

**通配符导入**（例如import `javax.swing.*`）：

优点：

*   易于使用和编写

缺点：

*   您可能会冒险使用不合适的类（如果不同包中的两个类具有相同的名称，例如，您想使用`java.util.Timer`但您有一个`import javax.swing.*`其中也包含一个`Timer`类）
*   编译（非常）稍慢

**完全合格/单类进口**（例如`import javax.swing.JFrame`）

优点：

*   没有与具有相同名称的类混淆的风险。

缺点：

*   如果您不使用 IDE，则正确编写它们可能是一项乏味的任务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T15:33:22.210

可读性 - 阅读您的代码的人确切地知道您正在使用哪些类。相当肯定theres没有性能损失，因为java在转换为字节码之前对其进行了优化

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T15:30:13.213

第二个不导入库。它导入特定的类。第一个导入`javax.swing`包中的所有类

# php - PHP按字母顺序对分隔的文本文件进行排序，然后填充下拉列表

> ID：13124630
> 
> 赞同：0
> 
> 时间：2012-10-29T15:27:48.457
> 
> 标签：php, file, sorting, text, drop-down-menu

我在做一些我确信很简单的事情时遇到了一些问题。

我在 Google 和 stackoverflow 上看了好几个小时，但似乎找不到答案。我确实发现与我尝试修改的相似，但不幸的是没有成功。

我有一个文本文件（names.txt），其中包含与此类似的值：

```
Jim|Bob|Keith|Fred|Steve<br> 
```

我需要一个可以每分钟运行一次的脚本来更改文件的内容，以便以相同的格式但按字母顺序存储值：

```
Bob|Fred|Jim|Keith|Steve<br> 
```

然后将它们作为选项显示在 html 下拉框中。

任何帮助将不胜感激。提前感谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T15:33:18.380

你可以试试这个：

```
$fileName = 'names.txt';
$data     = file_get_contents($fileName);

// Assuming that the file had the data in one line...

// Split the data using the delimiter
$split = explode("|", $data);

// Sort
sort($split);

// Put it all back together
$data = implode("|", $split);

// Store it back in the file
file_put_contents($fileName, $data); 
```

# mysql - 如何将mysql列的默认值设置为unix_timestamp？

> ID：13124632
> 
> 赞同：8
> 
> 时间：2012-10-29T15:27:52.803
> 
> 标签：mysql, unix-timestamp

我在想这样的事情：

```
`post_modified` int(11) NOT NULL DEFAULT UNIX_TIMESTAMP (NOW ()) ON UPDATE UNIX_TIMESTAMP (NOW ()), 
```

但是这段代码不起作用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-29T15:49:38.073

不，你不能像你展示的那样使用它。

[来自MySql](http://dev.mysql.com/doc/refman/5.6/en/data-type-defaults.html)上的数据类型文档：

“默认值必须是常量；它不能是函数或表达式。这意味着，例如，您不能将日期列的默认值设置为函数的值，例如 NOW() 或 CURRENT_DATE。例外是您可以将 CURRENT_TIMESTAMP 指定为 TIMESTAMP 列的默认值。”

查看以下解决方法的答案：

[是否可以在 MySQL 中创建具有 UNIX_TIMESTAMP 默认值的列？](https://stackoverflow.com/questions/5331026/is-it-possible-to-create-a-column-with-a-unix-timestamp-default-in-mysql)

希望这会有所帮助！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-01-12T12:45:04.780

> 注意：我不知道**MYSQL TRIGGER的性能**
> 
> 请通过这些链接
> 
> 1.  [确定实现 sql server 触发器的一些缺点](https://stackoverflow.com/questions/3170837/identify-some-of-the-drawback-of-implementing-sql-server-triggers)
>     
>     
> 2.  [使用触发器](http://dev.mysql.com/doc/refman/5.0/en/triggers.html)

您可以为此创建触发器。

> **用于插入**

`CREATE TRIGGER {trigger_name} BEFORE INSERT ON {table_name} FOR EACH ROW SET new.{field_name} = UNIX_TIMESTAMP(NOW());`

> **更新**

`CREATE TRIGGER {trigger_name} BEFORE UPDATE ON {table_name} FOR EACH ROW SET new.{field_name} = UNIX_TIMESTAMP(NOW());`

# ruby-on-rails - rspec：测试 cookie 选项

> ID：13124633
> 
> 赞同：1
> 
> 时间：2012-10-29T15:28:04.610
> 
> 标签：ruby-on-rails, cookies, rspec

我想测试我的 Rails 控制器是否`path`为 cookie 设置了有效的选项（在本例中）。我怎么能用 RSpec 做到这一点？

我的代码：

```
#Controller
def action
  #(...)
  cookies[:name] = { value:cookie_data,
                     path: cookie_path }
  #(...)
end

#spec 
it "sets cookie path" do
  get 'action'
  #I'd like do to something like that
  response.cookies['name'].path.should == '/some/path' 
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-08-08T02:17:36.320

在尝试让 CGI::Cookie.parse 做正确的事情失败后，我最终滚动了自己的解析器。这很简单：

```
def parse_set_cookie_header(header)
  kv_pairs = header.split(/\s*;\s*/).map do |attr|
    k, v = attr.split '='

    [ k, v || nil ]
  end

  Hash[ kv_pairs ]
end 
```

这是它产生的结果的示例：

**饼干制作：**

```
IN: "signup=VALUE_HERE; path=/subscriptions; secure; HttpOnly"
OUT: {"signup"=>"VALUE_HERE", "path"=>"/subscriptions", "secure"=>nil, "HttpOnly"=>nil} 
```

**Cookie 删除：**

```
IN: "signup=; path=/subscriptions; max-age=0; expires=Thu, 01 Jan 1970 00:00:00 -0000; secure; HttpOnly"
OUT: {"signup"=>nil, "path"=>"/subscriptions", "max-age"=>"0", "expires"=>"Thu, 01 Jan 1970 00:00:00 -0000", "secure"=>nil, "HttpOnly"=>nil} 
```

这是一个与之配套的示例规范：

```
describe 'the Set-Cookie header' do
  let(:value) { 'hello world' }

  let(:signup_cookie) do
    parse_set_cookie_header response.header['Set-Cookie']
  end

  before do
    get :index, :spec => 'set_signup_cookie'
  end

  it 'has a payload set for :signup' do
    expect(signup_cookie['signup']).to be_present
  end

  it 'has the right path' do
    expect(signup_cookie['path']).to eq '/subscriptions'
  end

  it 'has the secure flag set' do
    expect(signup_cookie).to have_key 'secure'
  end

  it 'has the HttpOnly flag set' do
    expect(signup_cookie).to have_key 'HttpOnly'
  end

  it 'is a session cookie (i.e. it has no :expires)' do
    expect(signup_cookie).not_to have_key 'expires'
  end

  it 'has no max-age' do
    expect(signup_cookie).not_to have_key 'max-age'
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T15:39:17.317

我找到了解决方案，但这似乎是一种黑客行为。我想知道是否有更清洁的方法来做到这一点。

```
it "sets cookie path" do
  get 'action'
  match = response.header["Set-Cookie"].match(/path=(.*);?/)
  match.should_not be_nil
  match[1].should == '/some/path'
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-24T21:03:20.133

我已经尝试了这里提供的几种解决方案以及类似的线程。唯一对我有用的是检查 Set-Cookie 标头，如下所示：

```
it 'expires cookie in 15 minutes' do
  travel_to(Date.new(2016, 10, 25))
  post 'favorites', params: { flavor: 'chocolate' }
  travel_back

  details = 'favorite=chocolate; path=/; expires=Tue, 25 Oct 2016 07:15:00 GMT; HttpOnly'
  expect(response.header['Set-Cookie']).to eq details
end 
```

这有点脆弱，因为 cookie 的其他非关键属性可能会破坏该字符串。但它确实使您远离 Rails 内部，并允许您一次检查多个属性。（注意这是一个反模式 rspec！）

如果你只关心一个属性，你可以像这样匹配它：

```
 expect(response.header['Set-Cookie']).to match(
    /favorite=chocolate.*; expires=Tue, 25 Oct 2016 07:15:00 GMT/
  ) 
```

# javascript - 与放置文件的位置有关的 Jquery 总 noob 导入查询

> ID：13124642
> 
> 赞同：0
> 
> 时间：2012-10-29T15:28:16.073
> 
> 标签：javascript, jquery, django

我下载了 Jquery Raty 插件：[https ://github.com/wbotelhos/raty](https://github.com/wbotelhos/raty)

然后我将此文件夹结构安装到我的 {{static_url}}js 文件夹中，并将其命名为 Raty。

然后我将它导入到我的模板中，并将路径作为存储其图像的位置。

```
 <script type="text/javascript" charset="utf-8" src="{{ STATIC_URL }}js/raty/js/jquery.raty.min.js"></script>
  <script type="text/javascript" charset="utf-8">
    $(document).ready(function() {
         $('.thingrating').each(function(index){
          $(this).raty({
            readOnly:  false,
            path: "{{ STATIC_URL }}js/raty/img/",
            start: $(this).children("span:first").text(),
            click: function(score, evt) {
                var vote_url = "rate/" + this.attr('id').substring(2) + "/" + score + "/";
                $.ajax({
                  url: vote_url,
                  success: function(){
                    alert('vote successful');
                  }
                });
            }
          });
        });
    });
  </script> 
```

这个对吗？我没有看到它在我的模板中工作，所以在我继续破译出了什么问题之前，要确保这个存储脚本并将其导入我的模板的过程是正确的......

这是我的模板的其余部分：

```
{% block body %}
    <h2>Things</h2>
        <div class="block" id="block-tables">
          <div class="content">
            <p></p>
            <div class="inner">
                <table class="table">
                  <tr>
                    <th class="first">Name</th>
                    <th class="last">Rating</th>
                  </tr>
                  <tr class="odd">
                    <td>{{ item.modelname }}</td>
                    <td><div class="thingrating" id="t_{{ item.id }}"><span style="display:none;">{{ score }}</span></div></td>
                  </tr>
                </table>
                <div class="actions-bar wat-cf">       
                </div>
            </div>
          </div>
        </div>
{% endblock %} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T16:09:56.570

看看这个[jsfiddle](http://jsfiddle.net/Qp69H/1/)演示。它工作正常（好吧，除了看起来`start`应该更改`score`为我理解你想要定义初始分数的方式）。不正确的图像路径根本不会破坏它。如果图像路径错误，浏览器将仅显示不可用图像的默认图标。不确定`{{static_url}}`变量中有什么。如果它包含类似“http://example.com/static”的内容 - 您必须在其后添加一个斜杠。

可能的问题 - rate 的脚本标记出现在 jQuery 之前。`$(document).ready`或者当事件发生时模板处理的结果在页面上不可用。

# jsp - 在 JSP 中上传文件而不更改 enctype

> ID：13124645
> 
> 赞同：0
> 
> 时间：2012-10-29T15:28:22.200
> 
> 标签：jsp, upload

我想从 jsp 上传文件，但我的限制是由于我们使用的自定义框架，我无法更改表单的 enctype。我当然知道“文件”类型的控制输入需要 enctype="multipart/form-data" 但我想知道是否可以在不更改表单的 enctype 的情况下实现相同的功能。我熟悉 commons-fileupload 等，但我想不出用户正在浏览带有文本框等的页面的流程，同时他可以一步添加文件并提交表单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T15:34:13.023

那是不可能的。不同形式的编码类型并不是为了好玩而发明的。

修复您的自定义框架。或者切换到一个*真正的*框架而不是自制一个。

请注意，此问题并非特定于 JSP。这就是 HTTP/HTML 的工作方式。

# c++ - 使用 std::remove_reference 获取 STL 容器的元素迭代器

> ID：13124648
> 
> 赞同：2
> 
> 时间：2012-10-29T15:28:32.840
> 
> 标签：c++, c++11

我正在试验 std::remove_reference。例如，我可以将元素类型提取为数组，但如何让 remove_reference 与 STL 容器一起使用？例如，我想使用下面的 remove_reference 将迭代器返回到向量的元素：

```
#include <iostream>
#include <vector>
#include <type_traits>
using std::vector;
using std::cout;
using std::endl;
using std::begin;
using std::end;
using std::remove_reference;

template<typename T> 
auto my_end(T& c) -> typename remove_reference<decltype(&c[0])>::type
{
    return end(c)-1; //compile error when myend<vector> is instantiated
}

int main()
{
    int ia[] = {1,2,3,4,5,6,7,8,10};
    vector<int> v(begin(ia), end(ia));

    auto my_back1 = *my_end(ia);
    cout << my_back1 << endl; //prints 10

    auto my_back2 = *my_end(v);
    cout << my_back2 << endl; //should print 10
} 
```

实例化时的编译器错误`my_end<vector>`是：

```
cannot convert from 'std::_Vector_iterator<_Myvec>' to 'int *' 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-29T15:33:42.367

返回的类型是`std::vector<T>::operator[]`什么？它是一个`T&`. 所以，结果`decltype(&c[0])`是`T*`。

但是 的类型是`end(c)-1`什么？它是一个迭代器。

如果你想返回一个迭代器，使用`decltype(end(c))`或类似的东西。

* * *

请注意，如果您只想引用最后一个元素，则可以使用（或换行）：

```
ia.back(); 
```

如果你想要一个迭代器（出于某种原因），但不关心*方向*：

```
ia.rbegin(); 
```

这也将取消对最后一个条目的引用。

如果容器是空的，你`my_end`的也是不安全的......但我当然不确定你打算如何使用它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-29T15:32:35.807

来这里的目的是`remove_reference`什么？`std::vector<T>::end()`产生一个迭代器，而`&c[0]`产生一个指向元素的指针。

定义您期望`my_end()`返回的内容，然后我们可以帮助您解决问题。

如果你想要的只是返回一个迭代器，那么像这样声明它：

```
auto my_end(T& c) -> decltype(begin(c)) { } 
```

但是话又说回来，您想尝试一下`remove_reference`，对吧...？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T18:28:35.627

谢谢你们的帮助。代码在我下面的评论中看起来很蹩脚，所以又来了。`remove_reference`如果例如我需要传递一个迭代器，这个时间对于推断返回类型很有用。（好吧，所以它不是那么有用....）

```
#include <iostream>
#include <vector>
#include <type_traits>
using std::vector;
using std::cout;
using std::endl;
using std::begin;
using std::end;
using std::remove_reference;

template<typename T> 
auto my_end(T It) -> typename remove_reference<decltype(It)>::type
{
    return It-1; 
}

int main()
{
    int ia[] = {1,2,3,4,5,6,7,8,10};
    vector<int> v(begin(ia), end(ia));

    auto my_back1 = my_end(end(ia));
    cout << *my_back1 << endl; //prints 10

    auto my_back2 = my_end(end(v));
    cout << *my_back2 << endl; //should print 10
} 
```

# ruby - 分析在 ruby 应用程序中发送的消息（方法调用）？

> ID：13124653
> 
> 赞同：1
> 
> 时间：2012-10-29T15:28:52.377
> 
> 标签：ruby, oop, graph, profiling

是否有一种工具可以分析发送到 ruby​​ 应用程序中的对象（即方法调用）的消息？

理想情况下，该工具将创建一个（GraphViz）图表并能够在结果中过滤类（fi 仅监视特定于应用程序的类，而不是所有类，如字符串、数组和很多）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T16:36:21.357

除非您有 dtrace 支持，[否则 ruby​​prof](http://ruby-prof.rubyforge.org)是下一个最好的选择。

至于绘图，您可能必须使用某种辅助分析包来获得所需的结果。

# jquery - jQuery.ajax 可变数据对象键

> ID：13124656
> 
> 赞同：0
> 
> 时间：2012-10-29T15:28:59.953
> 
> 标签：jquery

我正在尝试做类似于以下问题的事情：[ASP.NET: jQuery AJAX 'data' param problem](https://stackoverflow.com/questions/1061884/asp-net-jquery-ajax-data-param-problem)。

我的代码如下所示：

```
var key = jQuery(this).parent().parent().attr('id');
var value = 1;

var object = {};
object[key]=value;

jQuery.ajax({
                type: "POST",
                url: "",    
                data: object
            }).done(function() {
                alert("message");
            }); 
```

这根本没有任何作用。我知道这应该很简单，但我什么也没得到。对 jQuery 和 Javascript/AJAX 来说还是很新的。我已将问题缩小到数据对象。

例如，如果我这样做

```
data: {1:1}
data: {2:1}
data: {3:1} etc. 
```

它有效，但我需要我的键值是基于引用元素的 ID 的变量，而不是常量。

总而言之，我正在寻找一种在 AJAX 键/值对中具有可变键的方法。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T15:35:47.093

在使用它之前，确保`key`你得到的不是 null 或空的。

然后填充你可以尝试的对象

```
 var theKey = jQuery(this).parent().parent().attr('id');
    var theValue = 1;
    var dict = []; // create an empty array
    dict.push({ key: theKey, value: theValue }); 
```

然后尝试处理`success`and`error`方法。

```
$.ajax({
    type: 'POST',
    url: 'Your Url here',
    data: dict,
    success: function () {
        alert("message");
    },
    error: function (req, status, error) {
        alert(error);
    }
}); 
```

# php - 如何在 Joomla 2.5 美德玛特上显示购物车中的商品数量？

> ID：13124659
> 
> 赞同：2
> 
> 时间：2012-10-29T15:29:08.477
> 
> 标签：php, mysql, arrays, session, joomla

我发现了这个从 vm 会话中打印出一个数组的 php：

```
<?php print_r(unserialize($_SESSION['__vm']['vmcart'])); ?> 
```

这是打印出来的数组：

```
stdClass Object
(
[products] =&gt; Array
    (
        [1] =&gt; stdClass Object
            (
                [virtuemart_manufacturer_id] =&gt; Array
                    (
                    )

                [slug] =&gt; basic
                [published] =&gt; 1
                [virtuemart_product_price_id] =&gt; 1
                [virtuemart_product_id] =&gt; 1
                [virtuemart_shoppergroup_id] =&gt; 
                [product_price] =&gt; 10.00000
                [override] =&gt; 
                [product_override_price] =&gt; 0.00000
                [product_tax_id] =&gt; 0
                [product_discount_id] =&gt; 0
                [product_currency] =&gt; 52
                [virtuemart_vendor_id] =&gt; 1
                [product_parent_id] =&gt; 0
                [product_sku] =&gt; 001
                [product_name] =&gt; Basic
                [product_s_desc] = d
                [product_weight] =&gt; 0.0000
                [product_weight_uom] =&gt; KG
                [product_length] =&gt; 0.0000
                [product_width] =&gt; 0.0000
                [product_height] =&gt; 0.0000
                [product_lwh_uom] =&gt; M
                [product_in_stock] =&gt; 0
                [product_ordered] =&gt; 2
                [product_sales] =&gt; 0
                [product_unit] =&gt; KG
                [product_packaging] =&gt; 0.0000
                [min_order_level] =&gt; 
                [max_order_level] =&gt; 
                [virtuemart_media_id] =&gt; Array
                    (
                    )

                [categories] =&gt; Array
                    (
                        [0] =&gt; 1
                    )

                [virtuemart_category_id] =&gt; 1
                [category_name] =&gt; Policies
                [link] =&gt; /locksure-upgrade/index.php/our-policies/policies/basic-detail
                [packaging] =&gt; 0
                [quantity] =&gt; 2
                [amount] =&gt; 2
                [url] =&gt; /locksure-upgrade/index.php/our-policies/policies/basic-detail
                [customfields] =&gt; 
                [cart_item_id] =&gt; 1
            )

    )

[vendorId] =&gt; 1
[lastVisitedCategoryId] =&gt; 0
[virtuemart_shipmentmethod_id] =&gt; 1
[virtuemart_paymentmethod_id] =&gt; 1
[automaticSelectedShipment] =&gt; 1
[automaticSelectedPayment] =&gt; 1
[order_number] =&gt; 
[BT] =&gt; Array
    (
        [company] =&gt; 
        [email] =&gt; sean@rmspr.co.uk
        [title] =&gt; 
        [first_name] =&gt; lock
        [middle_name] =&gt; 
        [last_name] =&gt; sure
        [address_1] =&gt; 20 market street
        [address_2] =&gt; 
        [zip] =&gt; wa141pf
        [city] =&gt; altrincham
        [virtuemart_country_id] =&gt; 222
        [virtuemart_state_id] =&gt; 65
        [phone_1] =&gt; 01619273131
        [phone_2] =&gt; 
        [fax] =&gt; 
    )

[ST] =&gt; 0
[tosAccepted] =&gt; 
[customer_comment] =&gt; 
[couponCode] =&gt; 
[cartData] =&gt; Array
    (
        [duty] =&gt; 1
        [payment] =&gt; 0
        [paymentName] =&gt; <span class="vmpayment_name">payment</span>
        [totalProduct] =&gt; 1
        [DBTaxRulesBill] =&gt; Array
            (
            )

        [taxRulesBill] =&gt; Array
            (
            )

        [DATaxRulesBill] =&gt; Array
            (
            )

        [shipmentName] =&gt; <span class="vmshipment_name">shipment</span>
    )

[lists] =&gt; Array
    (
        [shipTo] =&gt; 
<input name="shipto" id="shipto1" value="1" checked="checked" type="radio">
<label for="shipto1" id="shipto1-lbl" class="radiobtn"><a href="/locksure-upgrade/index.php/our-policies/user/editaddresscartBT?virtuemart_userinfo_id=1">- Default (Same as Billing)</a><br></label>

        [billTo] =&gt; 1
    )

[pricesUnformatted] =&gt; Array
    (
        [basePrice] =&gt; 20
        [basePriceWithTax] =&gt; 0
        [discountedPriceWithoutTax] =&gt; 0
        [salesPrice] =&gt; 20
        [taxAmount] =&gt; 0
        [salesPriceWithDiscount] =&gt; 0
        [discountAmount] =&gt; 0
        [priceWithoutTax] =&gt; 20
        [subTotalProducts] =&gt; 0
        [1] =&gt; Array
            (
                [costPrice] =&gt; 10.00000
                [basePrice] =&gt; 10
                [basePriceVariant] =&gt; 10
                [basePriceWithTax] =&gt; 0
                [discountedPriceWithoutTax] =&gt; 0
                [priceBeforeTax] =&gt; 10
                [salesPrice] =&gt; 10
                [taxAmount] =&gt; 0
                [salesPriceWithDiscount] =&gt; 0
                [salesPriceTemp] =&gt; 10
                [unitPrice] =&gt; 0
                [discountAmount] =&gt; 0
                [priceWithoutTax] =&gt; 10
                [variantModification] =&gt; 0
                [DBTax] =&gt; Array
                    (
                    )

                [Tax] =&gt; Array
                    (
                    )

                [VatTax] =&gt; Array
                    (
                    )

                [DATax] =&gt; Array
                    (
                    )

                [subtotal_with_tax] =&gt; 20
                [subtotal_tax_amount] =&gt; 0
                [subtotal_discount] =&gt; 0
                [subtotal] =&gt; 20
            )

        [discountBeforeTaxBill] =&gt; 0
        [withTax] =&gt; 20
        [discountAfterTax] =&gt; 20
        [shipmentValue] =&gt; 0
        [shipmentTax] =&gt; 0
        [shipmentTotal] =&gt; 0
        [salesPriceShipment] =&gt; 0
        [shipment_calc_id] =&gt; 0
        [cost] =&gt; 0
        [paymentValue] =&gt; 0
        [paymentTax] =&gt; 0
        [paymentTotal] =&gt; 0
        [salesPricePayment] =&gt; 0
        [payment_calc_id] =&gt; 0
        [billSub] =&gt; 20
        [billDiscountAmount] =&gt; 0
        [billTaxAmount] =&gt; 0
        [billTotal] =&gt; 20
    )

[pricesCurrency] =&gt; 52
[paymentCurrency] =&gt; 52
[_inCheckOut] =&gt; 1
[_dataValidated] =&gt; 
[_confirmDone] =&gt; 
[STsameAsBT] =&gt; 0
) 
```

从该数组中，我将如何提取购物车中的物品数量？如果它甚至可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T09:15:06.833

使用以下代码为任何需要它的人解决：

```
<?php $array = unserialize($_SESSION['__vm']['vmcart']); 
$amount = $array->products[1]->amount; 
if ($amount != 0){ echo $amount; } else { echo 0; } ?> 
```

# java - Buildnumber maven插件返回null

> ID：13124662
> 
> 赞同：3
> 
> 时间：2012-10-29T15:29:18.607
> 
> 标签：java, maven, pom.xml

我的问候！

我已经编写了大量的文档，但我仍然得到同样的错误:(我使用 Buildnumber maven 插件来获取 svn 版本，但它总是返回 null。

这是pom：

```
 <plugin>
        <groupId>org.codehaus.mojo</groupId>
        <artifactId>buildnumber-maven-plugin</artifactId>
        <version>1.1</version>
        <executions>
           <execution>
             <phase>validate</phase>
               <goals>
                   <goal>create</goal>
               </goals>
          </execution>
       </executions>
       <configuration>
           <revisionOnScmFailure/>
           <doCheck>false</doCheck>
           <doUpdate>true</doUpdate>
       </configuration>
    </plugin>

...

    <plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-jar-plugin</artifactId>
    <configuration>
        <properties>
            <maven.build.timestamp.format>yyyy-MM-dd HH:mm</maven.build.timestamp.format>
            <build.timestamp>${maven.build.timestamp}</build.timestamp>
        </properties>
        <archive>
            <manifest>
                <addClasspath>true</addClasspath>
                <classpathPrefix>lib/</classpathPrefix>
                <mainClass>com.*.main.Main</mainClass>
            </manifest>
            <manifestEntries>
                <Implementation-Build>${buildNumber}</Implementation-Build>
                <build-timestamp>${maven.build.timestamp}</build-timestamp>
            </manifestEntries>
        </archive>
    </configuration>
</plugin> 
```

另外，我在我的路径中配置了一个 Tortoise svn，并且所有的要求都完成了，这些在官方文档中都有说明。构建、清理、安装均成功，但 SVN 版本仍为 NULL。

我真的很感谢你的帮助，我花了好几个小时让这个东西工作......

编辑 - 我的 scm 配置存根

```
<scm>
    <connection>scm:svn:http://none</connection>
        <developerConnection>scm:svn:https://none</developerConnection>
    <url>scm:svn:https://none</url>
</scm> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T15:23:50.617

问题是 TortoiseSVN 不在我的路径中。所以我必须安装类似 SilkSVN 的东西，这样我才能在系统路径中使用它的库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T08:19:15.270

我尝试了您的配置，除了一些配置问题外，我没有发现任何直接问题。

首先，您在该部分中`<properties/>`拥有的`<configuration/>`部分`maven-jar-plugin`不属于那里。请参阅[此处](http://maven.apache.org/guides/introduction/introduction-to-the-pom.html#Available_Variables)应如何使用它们。

`<mainClass/>`然后你应该告诉标签的完全限定类。星号不起作用。

当涉及到这`scm`部分时，您必须将`<scm/>`标签添加到您`pom.xml`的以及命令行 svn 客户端中。

这是`META-INF/MANIFEST.MF`我`mvn install`使用您的配置运行时创建的：

```
Manifest-Version: 1.0
Archiver-Version: Plexus Archiver
Created-By: Apache Maven
Built-By: maba
Build-Jdk: 1.7.0_07
Main-Class: com.*.main.Main
Implementation-Build: 8
build-timestamp: 2012-10-30 09:09
Class-Path: lib/log4j-1.2.14.jar 
```

如您所见，我没有`NULL`为`Implementation-Build`. 如前所述，这`Main-Class: com.*.main.Main`也不起作用。

为了能够为您提供更多帮助，您需要发布更多信息，例如`<scm/>`标签。

# javascript - 根据屏幕设置幻灯片宽度

> ID：13124664
> 
> 赞同：0
> 
> 时间：2012-10-29T15:29:29.647
> 
> 标签：javascript, jquery, slideshow, resolution

我的幻灯片在各个方面都正常工作，除了在调整到不同的屏幕尺寸时完全失败。

它就像在我的大屏幕上一样工作，但在我的另一个屏幕上它不适应并添加了一个水平滚动条。

我为其添加了 100% 的宽度，但我发现正确的方法是通过动态调整所有内容的 javascript 代码。问题是，我以前从未有过这样做的经验，也不知道从哪里开始。顺便说一下，我的页面加载了 jQuery。

这是幻灯片的示例结构：

```
<div class="featured-image">
<div style="overflow: hidden;height: 450px;"><img width="1950px" height="" alt="4" src="image.jpg"></div>
<!-- end .featured-price -->
</div> 
```

我想一个动态定位'.featured-image img'并为其添加宽度和高度的jQuery脚本将是做到这一点的方法。有没有比这更好的方法或更简单的脚本？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T15:34:09.347

```
var screenWidth = $(document).width();
$('.featured-image img').width(screenWidth); 
```

如果您需要它动态调整，那么您需要捕获 resize 事件：

```
$(window).resize(function() {
  var screenWidth = $(document).width();
  $('.featured-image img').width(screenWidth);
}); 
```

# javascript - evercookie 不再是“曾经的 cookie”？

> ID：13124670
> 
> 赞同：6
> 
> 时间：2012-10-29T15:29:48.327
> 
> 标签：javascript, cookies

我试图实现evercookie，它实际上试图以多种方式保存cookie（常规cookie，flash cookie，...）。根据我在网上找到的信息，即使用户删除了他的临时互联网文件，这个 evercookie 也会使 cookie 持久化。

我的测试表明这根本不起作用。事实证明，当我删除我的临时 Internet 文件时，当我重新访问该站点时找不到 evercookie...

evercookie 应该仍然有效吗？

# php - Postgresql 更新函数

> ID：13124674
> 
> 赞同：1
> 
> 时间：2012-10-29T15:30:00.463
> 
> 标签：php, jquery, html, postgresql

我想知道是否有人知道为什么我在我的脚本上出现此错误。我已经在这个脚本上工作了一段时间，并清理到了这一点。当从 pipeno 下拉列表中选择一个项目时，我只需要让表单上的一些字段自动填充，在这种情况下，下拉列表是触发器。到目前为止，我刚刚收到这两个错误，这似乎是阻碍脚本自动填充所需字段的原因。感谢您的贡献

这是错误

错误信息是

> 警告：pg_query()：查询失败：错误：在“，”或附近出现语法错误 第 9 行：...T wthick = 9.80, pipeno=837913,heatno1=56,pipeno2=,heatno2=6... ^ in C :\Users\iegbulefu\Documents\My Web Sites\Personal Site1\dropdown3.php 在第 32 行

这是我的脚本

```
 <?php
//Php Code to connect to postgresqldatabase
$PGHOST = "localhost:25376";
 $PGDATABASE = "Pipeline";
 $PGUSER = "postgres";
 $PGPASSWORD = "Casa2009";
 $PGPORT = 5432;
 $db_handle = pg_connect("dbname=$PGDATABASE user=$PGUSER password=$PGPASSWORD");
//<!-- #2 -->
 if(isset($_POST['submit_1'])){
 //Code to post fieldtally data to the database
 $pipeno = pg_escape_string( $_POST['pipeno']);
 $heatno1 = pg_escape_string( $_POST['heatno1']);
 $pipeno2 = pg_escape_string( $_POST['pipeno2']);
 $heatno2 = pg_escape_string($_POST['heatno2']);
 $Djointno = pg_escape_string($_POST['Djointno']);
 $measuredlength = pg_escape_string($_POST['measuredlength']);
 $serialno = pg_escape_string($_POST['serialno']);
 $wthick= pg_escape_string($_POST['wthick']);
 $remark= pg_escape_string($_POST['remarks']); 
 //<!-- #3 -->
$query = "CREATE FUNCTION trigf()  RETURNS trigger AS 'fieldtally';
            CREATE TRIGGER tbefore BEFORE INSERT OR UPDATE ON fieldtally
              FOR EACH ROW EXECUTE PROCEDURE trigf();

          SELECT * FROM fieldtally WHERE pipeno = $pipeno;

          INSERT INTO fieldtally VALUES('$wthick', '$pipeno','$heatno1','$pipeno2','$heatno2','$Djointno','$measuredlength','$serialno','$remark');

          UPDATE fieldtally SET wthick = $wthick, pipeno=$pipeno,heatno1=$heatno1,pipeno2=$pipeno2,heatno2=$heatno2,Djointno=$Djointno,measuredlength=$measuredlength,serialno=$serialno,remarks=$remark WHERE pipeno = $pipeno;
          LANGUAGE plpgsql";
 $result = pg_query($query);
 if (!$result) {
 $errormessage = pg_last_error();
 $message = "Error with query: " . $errormessage;
 }
 $message = sprintf ("These values were inserted into the pipeline database - %s %s %s %s %s %s %s %s %s",$wthick,$pipeno,$heatno1,$pipeno2,$heatno2,$Djointno,$measuredlength,$serialno,$remark);
 }
 //<!-- #2 -->
 if(isset($_POST['submit_2'])){
 //Code to post fieldbend data under suto the database
 $pipeno = pg_escape_string( $_POST['pipeno']);
 $wthick1= pg_escape_string($_POST['wthick1']);
 $heatno1 = pg_escape_string( $_POST['heatno1']);
 $pipeno2 = pg_escape_string( $_POST['pipeno2']);
 $heatno2 = pg_escape_string($_POST['heatno2']);
 $Djointno = pg_escape_string($_POST['Djointno']);
 $measureddistance = pg_escape_string($_POST['measureddistance']);
 $benddegree = pg_escape_string($_POST['benddegree']);
 $bendtype= pg_escape_string($_POST['bendtype']); 
 $remark= pg_escape_string($_POST['remarks']);
 //<!-- #3 -->
$query1 = "INSERT INTO fieldbend(pipeno,wthick1,heatno1,pipeno2,heatno2,Djointno,measureddistance,benddegree,bendtype,remarks)VALUES ('$pipeno','$wthick1','$heatno1','$pipeno2','$heatno2','$Djointno','$measureddistance','$benddegree','$bendtype','$remark') ON DUPLICATE KEY UPDATE wthick1='$wthick1',heatno1='$heatno1',pipeno2='$pipeno2',heatno2='$heatno2',Djointno='$Djointno''";

//<!-- #4a -->
 $result1 = pg_query($query1);
 if (!$result1) {
 $errormessage = pg_last_error();
 $message1 = "Error with query: " . $errormessage;
 }
 $message1 = sprintf ("These values were inserted into the pipeline database - %s %s %s %s %s %s %s %s %s %s",$pipeno,$wthick1,$heatno1,$pipeno2,$heatno2,$Djointno,$measureddistance,$benddegree, $bendtype,$remark);
 }
 //<!-- #2 -->
 if(isset($_POST['submit_3'])){
 //Code to post apptally data under suto the database
 $pipeno = pg_escape_string( $_POST['pipeno']);
 $wthick2= pg_escape_string($_POST['wthick2']);
 $tallytype = pg_escape_string( $_POST['tallytype']);
 $qty = pg_escape_string( $_POST['qty']);
 $serialno = pg_escape_string($_POST['serialno']);
 $referenceid = pg_escape_string($_POST['referenceid']);
 //<!-- #3 -->
$query2 = "INSERT INTO apptally(pipeno,wthick2,tallytype,qty,serialno,referenceid)VALUES ('$pipeno','$wthick2','$tallytype','$qty','$serialno','$referenceid') ON DUPLICATE KEY UPDATE wthick2='$wthick2', pipeno='$pipeno'";

//<!-- #4a -->
 $result2 = pg_query($query2);
 if (!$result2) {
 $errormessage = pg_last_error();
 $message2 = "Error with query: " . $errormessage;
 }
 $message2 = sprintf ("These values were inserted into the Pipeline database - %s %s %s %s %s %s",$pipeno,$wthick2,$tallytype,$qty, $serialno,$referenceid);
 }
 // Code to pull data from the database and load onto the form
 $query = 'select pipeno from fieldtally order by pipeno asc'; 
 $result = pg_query($db_handle,$query); 
 while ($row = pg_fetch_row($result))
 {
    // Creates Arrays to use in dropdowns
     $pipeno_array[] = $row[0];

 } 
 // This function creates dropdowns that will be used in the forms
 function dropdown($field_name, $num){
     // Creates the Dropdown
     //<!-- #5a -->
     $c = ($field_name == 'pipeno') ? ' onChange="check('.$num.');"' : '';
     echo "<select name=\"".$field_name."\" id=\"".$field_name.$num."\"$c>\n";
     echo "<option value=\"\"> --- Select --- </option>\n";
     // Chooses which array to use for Dropdown options
     global $pipeno_array;
     $name_array = ($field_name == 'pipeno') ? $pipeno_array : $wallthick;
     // Creates the Dropdown options based off the array above
     foreach($name_array as $k){
         echo "<option value=\"$k\">$k</option> \n"; }
     // Ends the Dropdown
     echo "</select>\n";
 }
?>
<html>
<head>
<meta charset="utf-8">
<title>UG Pipeline Field Data Capture</title>
</head>
<body>
     <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
     </head>
      <body>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js"></script>
<script type="text/javascript">

<!-- #5b -->
        function check(num){
           var pipeno_id = '#pipeno_'+num;
           var pipeno = $(pipeno_id).val();
           if(pipeno!= ""){
             jQuery.ajax({
             type: "POST",
             url: "check.php" , 
             data:'pipeno='+pipeno,
             cache: false,
             success: function(response){
             var response_array = JSON.parse(response);
             $('#heatno1').val(response_array['heatno1']);
             $('#pipeno2').val(response_array['pipeno2']); 
             $('#heatno2').val(response_array['heatno2']);
             $('#Djointno').val(response_array['Djointno']);
             }           
            });
           }
           else{
           $('#heatno1').val('');
           $('#pipeno2').val('');
           $('#heatno2').val('');
           $('#Djointno').val('');}
            }
  </script>
          <!-- #4b -->
 <!--<?php printf($message);?>-->

 <!-- #6.1 -->
<form action="" method="post">
 <table width="800" cellpadding= "10" cellspacing="1" border="2">
 <tr align="center" valign="top">
 <td align="center" colspan="1" rowspan="1" bgcolor="#00CC00">
 <h3>Input Field Tally Information</h3>
      Select Wall Thickness:<select name="wthick" id="wthick">
 <!-- #7.1 -->
  <option value=""> --Select-- </option> 
  <option value="9.80">  9.80  </option>
  <option value="13.50"> 13.50 </option>
  <option value="15.90"> 15.90 </option>
  </Select>           
 Select Pipe No:<?php dropdown('pipeno', 1); ?> HeatNo1: <input type="text" name="heatno1" id="heatno1"><br /><br />  
 PipeNo2: <input type="text" name="pipeno2" id="pipeno2"> HeatNo2: <input type="text" name="heatno2" id="heatno2">Joint No: <input type="text" name="Djointno"><br /><br /> 
  Input measured Length: <input type="text" name="measuredlength"> Input Serial No: <input type="text" name="serialno"><br><br> Remarks: <input type="text" name="remarks"><br><br> 
 <!-- #8.1 -->
 <input type="Submit" name="submit_1" value="Submit">
 <!-- #9.1 -->
</td></tr></table></form>
<!-- #6.2 -->
 <form action="" method="post">
 <table width="800" cellpadding= "10" cellspacing="1" border="2">
 <tr align="center" valign="top">
 <td align="center" colspan="1" rowspan="1" bgcolor="#FF99FF">
 <h3>Input Field Bend Information</h3>
  Select Wall Thickness:<select name="wthick1" id="wthick1">
 <!-- #7.2 -->
     <option value=""> --Select-- </option> 
     <option value="9.80">  9.80  </option>
     <option value="13.50">13.50 </option>
     <option value="15.90"> 15.90 </option>
  </select>
 <!-- #10.1 -->           
 Select Pipe No:<?php dropdown('pipeno', 2); ?>   HeatNo1: <input type="text" name="heatno1" id="heatno1_2"> <br><br>
 PipeNo2: <input type="text" name="pipeno2" id="pipeno2_2"> HeatNo2: <input type="text" name="heatno2" id="heatno2_2"> Joint No: <input type="text" name="Djointno"> <br><br>
 Input Measured Distance: <input type="text" name="measureddistance"> Input Bend Angle: <input type="text" name="benddegree"> <br><br>
Select Bend Type:<select name="bendtype" id="bendtype">
    <option value=""> --Select-- </option> 
    <option value="Combo">Combo</option>
    <option value="SAG">SAG</option>
    <option value="OB">OB</option>
    <option value="SBRT">SBRT</option>
    <option value="SBLT">SBLT</option>
    <option value="HBLT">HBLT</option>
    <option value="HBRT">HBRT</option><p></p> 
  Remarks: <input type="text" name="remarks"><br></br>

  <input type="Submit" name="submit_2" value="Submit"> 
 <!-- #9.2 -->
</td></tr></table></form>
<!-- #6.3 -->

<form action="" method="post">
 <table width="800" cellpadding= "10" cellspacing="1" border="2">
 <tr align="center" valign="top">
 <td align="center" colspan="1" rowspan="1" bgcolor="#99FF33">
 <h3>Input App. Tally Information</h3>
 <!-- #11 -->
       Select Wall Thickness:<select name="wthick2" id="wthick2">
 <!-- #7.3 -->
     <option value=""> --Select-- </option> 
     <option value="9.80">  9.80  </option>
     <option value="13.50"> 13.50 </option>
     <option value="15.90"> 15.90 </option>
  </select>
 <!-- #10.2 -->             
 Select Pipe No:<?php dropdown('pipeno', 3); ?>  <br><br> Input Tally Type: <input type="text" name="tallytype">
 Input Tally Qty: <input type="text" name="qty"><br></br>  Input Serial No: <input type="text" name="serialno"> 
 RefID: <input type="text" name="referenceid"><br></br>
 <!-- #8.3 -->
 <input type="Submit" name="submit_3" value="Submit">
 </td></tr></table>
</form>
</body>
</html> 
```

上面 jquery 中指定的 check.php 文件

```
<?php
//Php Code to connect to postgresqldatabase
include connection.php;
// Code to pull data from the database and load onto the form  
 $pipeno = pg_escape_string($_POST['pipeno']);
//$query = 'SELECT heatno1,pipeno2,jointno,FROM fieldtally WHERE pipeno = $pipeno';
$query = 'select * from fieldtally order by pipeno asc';
$result = pg_query($db_handle,$query);
$row = pg_fetch_row($result);
$row_info = array('heatno1'=>$row[1],'pipeno2'=>$row[2],'heatno2'=>$row[3],'jointno'=>$row[4]);
$row_info = json_encode($row_info);
print_r($row_info); 
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T15:36:04.613

您正在使用该变量`$remark`，但将其声明为`$remarks`. 所以你可能错过了`s`一次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T15:33:34.987

不知道为什么要动态创建功能，而不仅仅是部署和执行。

对于这个错误

```
Warning: pg_query(): Query failed: ERROR: function "updatefunction" already exists with same argument types in C:\Users\iegbulefu\Documents\My Web Sites\Personal Site1\autopopulate.php on line 35 
```

将 CREATE FUNCTION 更改为 CREATE OR RELACE FUNCTION。如果它已经存在，这将删除它并重新创建它。

# c# - Visual Studio 2010/2012：当在断点上停止调试时，被调试的进程挂起并且无法杀死

> ID：13124675
> 
> 赞同：5
> 
> 时间：2012-10-29T15:30:05.677
> 
> 标签：c#, visual-studio-2010, visual-studio, debugging, visual-studio-2012

发生在某些场合。使用 Visual Studio 2012 Professional 运行 Windows 8 x64（之前在 VS 2010 中也发生过）。使用“启用本机代码调试”调试 C# 控制台项目。

按 F5，调试一些代码，到达断点等，然后按 Shift+F5（停止调试），Visual Studio 不会像往常一样返回到编辑模式，它只是挂起一段时间，然后给出终止挂起操作的选项（带有进度条和终止按钮的对话框窗口**“远程操作花费的时间比预期的要长” ）。**如果我不单击终止，它会停留在那里只是更新进度条。如果我单击以终止操作，VS 将返回到可编辑模式，但已调试的进程在任务管理器中仍然可见并且不可终止。这个挂起的调试进程会锁定它使用的某些文件（例如 DLL），因此无法进行进一步的重建。终止此进程的唯一方法是重新启动机器。

有趣的是，当在调试代码中到达断点并逐步执行调试时，就会发生这种情况。如果我只是在没有断点的情况下运行调试过程，则不会发生挂起。

以下线程中的解决方案没有帮助：[https ://connect.microsoft.com/VisualStudio/feedback/details/504538/](https://connect.microsoft.com/VisualStudio/feedback/details/504538/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T04:16:01.070

我们在使用 2010 之前也遇到过类似的问题，但还没有找出根本原因。

解决方法是单独运行该进程（控制台，双击 .exe）并执行[Debug->Attach To Process](http://msdn.microsoft.com/en-us/library/vstudio/3s68z0b3.aspx)。 *注意：*如果您想调试启动代码，那么这可能不是一个好主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T23:17:39.700

不久前，我遇到了一些关于文件锁定和调试器奇怪行为的严重无法解释的问题。我通过激活应用体验服务解决了这些问题。我不知道为什么，但在激活它之后，我所有关于调试的问题都悄然消失了......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-20T10:07:12.007

I came across a *similar* hanging problem and solved it. Trying it *may* heal your wound (it is for windows forms, but since you're on console, it is worth giving a try):

[Windows Form Won't Display in Debug Mode](https://stackoverflow.com/questions/17955864/windows-form-wont-display-in-debug-mode/39591028#39591028)

Please let me know if it works or not.

# sql-server - 如何从 XLSX 文件扩展名批量插入？

> ID：13124680
> 
> 赞同：7
> 
> 时间：2012-10-29T15:30:26.460
> 
> 标签：sql-server, bulkinsert, xlsx

谁能建议如何从`.xlsx`文件中批量插入？

我已经尝试了以下查询：

```
BULK INSERT #EVB FROM 'C:\Users\summer\Desktop\Sample\premise.xlsx' 
WITH (FIELDTERMINATOR = '\t', ROWTERMINATOR = '\n', FIRSTROW = 2);

SELECT * FROM #EVB 
```

我也尝试过`FIELDTERMINATOR like "**\t**", "**,**", "**;**", "**|**"`，但这也不起作用。

不幸的是，没有错误消息。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-10-29T15:34:12.460

您可以将 xlsx 文件保存为制表符分隔的文本文件并执行

```
BULK INSERT TableName
        FROM 'C:\SomeDirectory\my table.txt'
            WITH
    (
                FIELDTERMINATOR = '\t',
                ROWTERMINATOR = '\n'
    )
GO 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T15:42:02.270

You need to use `OPENROWSET`

Check this question: [import-excel-spreadsheet-columns-into-sql-server-database](https://stackoverflow.com/questions/375991/import-excel-spreadsheet-columns-into-sql-server-database)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T15:39:51.210

为您的文档创建链接服务器

[http://www.excel-sql-server.com/excel-import-to-sql-server-using-linked-servers.htm](http://www.excel-sql-server.com/excel-import-to-sql-server-using-linked-servers.htm)

然后使用普通的 INSERT 或 SELECT INTO。如果您想变得花哨，可以使用 ADO.NET 的 SqlBulkCopy，它几乎可以获取任何可以从中获取 DataReader 的数据源，并且插入速度非常快，尽管数据的读取速度不会特别快。

您还可以花时间将 Excel 电子表格转换为文本分隔文件或其他[bcp 支持的格式](http://msdn.microsoft.com/en-us/library/ms162802.aspx)，然后使用 BCP。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-07-05T13:05:33.693

它可以使用**SQL Server 导入和导出向导来完成。**但是，如果您熟悉 SSIS 并且不想运行 SQL Server 导入和导出向导，请创建一个在数据流中使用 Excel 源和 SQL Server 目标的 SSIS 包。

# tomcat - 将外部 Tomcat 控制台连接到 NetBeans 7.0+

> ID：13124692
> 
> 赞同：1
> 
> 时间：2012-10-29T15:31:01.043
> 
> 标签：tomcat, netbeans, netbeans-7

我已将 Tomcat 与 NetBeans 分开安装。然后我将我的 NetBeans 连接到 Tomcat，一切都运行良好。我可以部署项目，运行它们等等。我唯一的一个问题是我看不到 System.out.println(); 任何地方的控制台消息。我的同事直接从 NetBeans 安装了 Tomcat，他们有控制台。为什么我没有它以及我应该如何在没有这个控制台的情况下进行调试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T15:42:11.757

You probably closed that console and you can't see it. Open `Netbeans` and go to: `Window -> Output -> Output` or just click `Alt + 6` and the console will be opened.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T14:37:00.363

如果在 NetBeans 服务器列表中注册 Tomcat 实例，服务器列表中会出现一个新的“Tomcat”节点，该节点有一个上下文菜单。对于许多服务器，此菜单包括一个显示服务器控制台输出/日志的菜单项：`'View Server Log'`和`'View Server Output'`.

# typescript - 当前范围内不存在 TypeScript 导入模块

> ID：13124693
> 
> 赞同：2
> 
> 时间：2012-10-29T15:31:07.133
> 
> 标签：typescript

为什么 TypeScript 编译器会在 Logger.ts 中发出错误“名称 m 不存在于当前范围内”，即使它能够解析 Model.LogMessage 定义的 LogMessage.ts

这些是相关文件：

记录器.ts：

```
 ///<reference path="Utils.ts"/>
    /// <reference path="../Models/LogMessage.ts"/>
    /// <reference path="JqGridUtilities.ts"/>

    module Utilities {

        declare var $;
        import m = Model;
        //import jqu = Utilities;

        export class Logger {        

                static logs:  m.LogMessage[];  // how to do typed array????

                logs1: m.LogMessage[];

                static logsGridClass = "jqgdash_logs";
                static gridName = "jqgdash";
                static logsGridHeader = "Info Center";            

  static displayDataOnConsole(gridClass : string, gridHeader : string, theData) {

                if (theData != null && theData.length > 0) {
                    var grid = $("#" + gridName);

                    if (gridClass === logsGridClass) {
                        if (!grid.hasClass(logsGridClass)) {
                            GridUtils.reconfigureGrid(gridName, gridHeader, theData);
                            grid.addClass(logsGridClass);
                        } else {
                            GridUtils.addDataToGrid(gridName, gridHeader, theData);
                        }   
                    } else {
                        if (grid.hasClass(logsGridClass)) {
                            grid.removeClass(logsGridClass);
                    }

                    GridUtils.reconfigureGrid(this.gridName, gridHeader, theData);
                }
            }
        }

          static  createErrorLogs(messages : string) : m.LogMessage[] {
                    if (messages == null) return [];
                    $.each(messages, function (i, msg) {
                        logs.push(this.createLogJson("error", msg));
                    });

                    return logs;
                }

           static logMessageToConsole (severity : string, message : string) {
                    this.logs.push(this.createLogJson(severity, message));
                }      
            }      
    } 
```

日志消息.ts：

```
module Model { 
       export class LogMessage {

        message: string;
        timeStamp: Date; 
        severity: string;

        constructor (severity : string, message: string, date: Date) {
            this.message = message;
            this.timeStamp = date;
            this.severity = severity;
        }
     }
} 
```

和 Utils.ts：

```
module Utils { 

    declare var tut;

   export var liveString = "http://" + window.location.host + '/trackutransit';

    export function executeAjaxPostJsonCall(url : string, success : any ) { 
        return  $.ajax(url,
        {
            type: "POST",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            error: tut.Logger.displayAjaxError,
            success : success  });
         }

   export function getResourcePath(relativePath: string): string {
            return liveString + relativePath;
        }

    export function isMobile(): bool {
            var index = navigator.appVersion.indexOf("Mobile");
            return (index > -1);
        }
} 
```

JQGridUtilities.ts 与 Logger.ts 在同一文件夹中定义如下：

```
///<reference path="Utils.ts"/>
module Utilities{

    declare var jqGrid;

    declare var $;
    //import t = TrackuTransit;

    export class GridUtils {

        static instance = new GridUtils();

        constructor() { }

      static  isUserFriendlyField(key : string) : bool {    
        return true;
    }

    // Extracts the fields from this Json object
   static extractColumnsFromJsonObject(obj) : any[]{
        var columns = new Array();
        if (obj) {
            for (var key in obj) {
                if (isUserFriendlyField(key)) {
                    columns.push(key);
                }
            }
        }

        return columns;
    }

   static  addDataToGrid(gridId, gridHeader, data) {
        if (data != null) {
            var grid = $("#" + gridId);
            for (var i = 0; i < data.length; i++) {
                grid.jqGrid('addRowData', i, data[i]);
            }
        }
    }

    static createColumnModels(columns)  : any[]{

        var model = [];

        $.each(columns, function (i, column) {
            if (this.isUserFriendlyField(column)) {
                if (column === "icon" || column === "image") {
                    model.splice(0, 0, { name: column, label: ' ', width: 16, formatter: function (cellvalue, options, rowObjects) {
                        return "<img src='" + cellvalue + "' width='16px' height='16px'/>";
                    }
                    });
                }
                else if (column === "Severity") {
                    model.splice(0, 0, {
                        name: column,
                        label: ' ',
                        width: 20,
                        formatter: function (cellvalue, options, rowObjects) {
                            var imagePath = Utils.liveString + '/Content/images/' + cellvalue + '.png';
                            return "<img src='" + imagePath + "' width='16px' height='16px'/>";
                        }
                    });
                }
                else {
                    if (column === "display_name") {
                        model.splice(0, 0, { name: column, label: "name" });
                    } else {
                        model.push({ name: column, label: column, width: 70 });
                    }
                }
            }
        });

        return model;
    }

   static reconfigureGrid(gridName, gridHeader, theData) {
        if (!gridName)
            throw ("grid name must be specified");

        if (gridHeader, theData != null && gridHeader, theData.length > 0) {

            var columns = extractColumnsFromJsonObject(theData[0]);
            var colsModel = createColumnModels(columns);

            // todo: report unable to chain jQuery methods as bug for jqGrid
            $("#" + gridName).jqGrid('GridUnload');
            $("#" + gridName).jqGrid({
                datatype: "local",
                data: theData,
                autowidth: true,
                colModel: colsModel,
                pager: '#pager',
                rowNum: 10,
                rowList: [5, 10, 20, 50],
                height: 120,   // constant height allows grid navigator to show, if parent div is constant height
                width: '100%',
                viewrecords: true,
                caption: gridHeader
            });
        }
    }

    }

} 
```

如果我在 Logger.ts 中删除对 JqGridUtilities.ts 的引用，错误就会消失，但现在 GridUtils 无法再解决。如果我使用不同的模块名称定义 GridUtils，例如 jqGridUtilities 而不是 Utilities，我将不再收到此错误。为什么是这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T21:41:09.920

这是我根据你的例子得到的......

看起来您正在采用捆绑策略...即您要求 TypeScript 将 JavaScript 的加载方式留给您。您要么将所有脚本添加到页面，要么将它们捆绑到一个文件中并缩小它。

当您这样做时，您几乎可以忽略`import`关键字，而只使用`reference`注释来描述您将在运行时提供的文件。

考虑到这一点，这是您的 Logger.ts 文件

更改主要是缺少`import`语句，但我还展示了如何实例化类型化数组（您只需在声明之后使用`= []`.

```
/// <reference path="Utils.ts"/>
/// <reference path="./Models/LogMessage.ts"/>
/// <reference path="JqGridUtilities.ts"/>

module Utilities {
    declare var $;

    export class Logger {

        static logs: Model.LogMessage[] = [];  // how to do typed array? - Like this

        logs1: Model.LogMessage[] = [];

        static logsGridClass = "jqgdash_logs";
        static gridName = "jqgdash";
        static logsGridHeader = "Info Center";

        static displayDataOnConsole(gridClass: string, gridHeader: string, theData) {

            if (theData != null && theData.length > 0) {
                var grid = $("#" + gridName);

                if (gridClass === logsGridClass) {
                    if (!grid.hasClass(logsGridClass)) {
                        GridUtils.reconfigureGrid(gridName, gridHeader, theData);
                        grid.addClass(logsGridClass);
                    } else {
                        GridUtils.addDataToGrid(gridName, gridHeader, theData);
                    }
                } else {
                    if (grid.hasClass(logsGridClass)) {
                        grid.removeClass(logsGridClass);
                    }

                    GridUtils.reconfigureGrid(this.gridName, gridHeader, theData);
                }
            }
        }

        static createErrorLogs(messages: string): m.LogMessage[] {
            if (messages == null) return [];
            $.each(messages, function (i, msg) {
                logs.push(this.createLogJson("error", msg));
            });

            return logs;
        }

        static logMessageToConsole(severity: string, message: string) {
            this.logs.push(this.createLogJson(severity, message));
        }
    }
} 
```

# unit-testing - 如何只删除生成的单元测试数据？

> ID：13124696
> 
> 赞同：1
> 
> 时间：2012-10-29T15:31:15.897
> 
> 标签：unit-testing, intersystems-cache, objectscript

我使用此代码创建数据：

```
Method OnBeforeAllTests() As %Status
{
    // Create one MyClass row   
    Do ##class(MyClass).Populate(1)
    Quit $$$OK
} 
```

这要删除数据：

```
Method OnAfterAllTests() As %Status
{
    Do ##class(MyClass).%KillExtent()
    Quit $$$OK
} 
```

如何更改`OnAfterAllTests`为仅删除我使用填充的数据`OnBeforeAllTests`而不删除任何其他数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T16:59:47.287

唯一可能会自动跟踪您所做的事情并将其回滚的是事务。

除此之外，您需要自己跟踪它，或者只是不让您的单元测试实际创建数据。在生产系统中测试特定代码不是一个很好的做法，因此标志字段“testData”不是很好，但我想你可以。

我个人的解决方案是首先创建实际上不插入数据的测试，但这需要使用依赖注入并创建一个模拟框架以使编写单元测试变得可行。

一个更简单的解决方案可能是拥有一个跟踪所有数据更改并在最后回滚它们的对象，但可能仅使用事务会做得更好。

# android - 未调用但在清单中的 InsentService

> ID：13124698
> 
> 赞同：1
> 
> 时间：2012-10-29T15:31:30.043
> 
> 标签：android, service, intentservice

我创建了无法启动服务的简单 IntentService 框架。我已经添加了调用、主代码块和清单条目，但我仍然没有得到任何日志输出。我在这里检查了其他类似的答案，但都指向我已将条目添加到的清单：

显现：

```
<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" 
    android:name=".ApplicationGlobal">

    <service android:name=".MyIntentServiceImpl" /> 
```

启动服务：

```
Intent intent = new Intent(ThisActivity.this, MyIntentServiceImpl.class);
startService(intent); 
```

服务代码：

```
public class MyIntentServiceImpl extends IntentService implements MyIntentService {

private boolean result;
private Long pollingCount; 

public MyIntentServiceImpl (){
    super("MyIntentServiceImpl ");
    Log.d(TAG, "Creating Polling Service");
    this.result = false;
    this.pollingCount = 0L;
}

@Override
protected void onHandleIntent(Intent arg0) {
    Log.d(TAG, "Polling Service Started");

    while(!result && (pollingCount <= MAX_POLLING_VALUE)){
        pollingCount++;
        Log.d(TAG, "Polling for Result Request (" + pollingCount.toString() + ")");
    }

    Log.d(TAG, "Polling Service Finished"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T23:44:52.487

检查 LogCat。Android是否告诉您它找不到该服务？这意味着您的 Intent 编码不正确。

您确定要调用 startService 吗？您只提供了两行调用它的内容，并且您根本没有在清单中显示它。

我开始调试的方法是说服自己 startService 正在被调用。到目前为止，最好的方法是使用 Eclipse 中的调试器对其进行调试，*但*您也可以注释掉“startService”并将其替换为日志语句。如果这未能显示在您的日志中，那么您就知道没有达到 startService 的位置。

# javascript - 使用 facebook 数据填写表格

> ID：13124701
> 
> 赞同：5
> 
> 时间：2012-10-29T15:31:55.563
> 
> 标签：javascript, facebook, forms, fill

我想允许用户在我的页面上按下一个按钮，该按钮将使用他们的名字、姓氏和电子邮件地址自动填写表格，前提是他们已登录 Facebook。如果不是，则应弹出 Facebook 登录表单，允​​许用户登录，然后应进行自动填充。

我一直在 javascript 测试控制台中解决这个问题。我知道我需要调用 first_name、last_name 和 email，但我不确定如何使用这些信息填充我的表单字段。

```
FB.api(
      {
        method: 'fql.query',
        query: 'SELECT first_name, last_name, email FROM user WHERE uid=' + response.authResponse.userID
      }, 
```

我想在javascript中做到这一点。我需要创建一个函数，该函数将在单击时使用此信息填充表单。有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-29T16:04:14.933

你为什么不使用注册插件。它将为您节省大量工作[https://developers.facebook.com/docs/plugins/registration/](https://developers.facebook.com/docs/plugins/registration/)

如果您想要自定义表单。您必须获得用户的许可并获取他的详细信息。您可以使用以下代码：

```
<div id="fb-root"></div> 
<script src="https://connect.facebook.net/en_US/all.js"></script> 
FB.init({appId: 'XXXXXXXXXXXXX',status : true,xfbml  : true, cookie: true ,oauth  : true});

function login(){
        FB.getLoginStatus(function(response) {
        // checks if user already authorized
                    if (response.status === 'connected') {
                            FB.api('me?fields=id,name,email', function(user) {
                                     if(user != null) {
                                                                username  = user.name;
                                                                uid = user.id;
                                                                email = user.email;
                                                            }
                                });

                    } else {
        // If user is not authorized call FB.login for pop up window for authorization  , scope defines list of persmission requested with user
                    FB.login(function(response) {
                            if (response.authResponse.accessToken) {    
                                            FB.api('me?fields=id,name,email', function(user) {
                                                    if(user != null) {
                                                                username  = user.name;
                                                                uid = user.id;
                                                                email = user.email;
                                                            }
                                                        }) 
                                                    } 
                                                }, {scope:'email'});
                    }

                });
    } 
```

按下按钮即可调用 login()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T16:59:10.767

你可以尝试这样的事情：

```
<script>
      FB.api(
      {
        method: 'fql.query',
        query: 'SELECT first_name, last_name, email FROM user WHERE uid= ' + response.authResponse.userID}, function (data) {
        if (data && data[0]) {
            if (data[0].first_name) {
                document.getElementById('user_first_name').value = data[0].first_name;
            }
            if (data[0].last_name) {
                document.getElementById('user_last_name').value = data[0].last_name;
            }
            if (data[0].email) {
                document.getElementById('user_email').value = data[0].email;
            }
        }

      });
</script>

<input id="user_first_name" />
<input id="user_last_name" />
<input id="user_email" /> 
```

# javascript - Javascript 脚本在 Safari 中不起作用

> ID：13124703
> 
> 赞同：0
> 
> 时间：2012-10-29T15:32:00.473
> 
> 标签：javascript, safari

我有一段 javascript 似乎不能在 safari 中运行，但它可以在所有其他浏览器中运行。

这是代码

```
<script type="text/javascript">
        $(document).ready(function () {

            var contracts = $.evalJSON($("#json_contracts").val());
            var contractDropDown = $("#<%= c.cID%>");
            var dateDropDown = $("#<%= _startDate.cID %>");

            function populateMonths(i) {

                dateDropDown.empty();

                if (i == 0) {
                    dateDropDown.append("<option value=\"Select Month\">Select Month</option>");
                    return;
                }

                $(contracts[i-1].AvailableBillingMonths).each(function(j) {
                    var selected = "";
                    dateDropDown.append("<option value=\"" + contracts[i-1].AvailableBillingMonths[j].InvoiceMonth + "\" " + selected + ">" + contracts[i-1].AvailableBillingMonths[j].InvoiceMonth + "</option>");
                });
            }

            contractDropDown.click(function() {
                populateMonths(this.selectedIndex || 0);
            });
        });
    </script> 
```

谁能明白为什么它不起作用？这个片段的重点是用正确的月份填充日期下拉列表，但它实际上从未在 safari 中填充它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T15:39:36.370

将**点击**事件替换为**更改**事件..

试试这个

```
contractDropDown.change(function() { 
```

# jquery - 是否可以为 jquery 点击声音定义一个 mp3 和 ogg 文件？

> ID：13124704
> 
> 赞同：0
> 
> 时间：2012-10-29T15:32:01.760
> 
> 标签：jquery, click, mp3, html5-audio, ogg

我有这个解决方案在 chrome 中工作：

[单击按钮时使用 jQuery 播放音频文件](https://stackoverflow.com/questions/8489710/how-can-i-play-sound-in-jquery-when-click-a-button)

但萤火虫控制台说：

`HTTP "Content-Type" of "audio/mpeg" is not supported. Load of media resource http://path/to/sound.mp3 failed.`

有没有办法在这个脚本中定义一个 ogg 和 mp3 文件（假设这将使声音在 firefox 中播放）：

```
<script>
$(document).ready(function() {
var audioElement = document.createElement('audio');
audioElement.setAttribute('src', 'http://path.com/to/sound.mp3');
$('#play_it').click(function() {
audioElement.play();
});
});
</script> 
```

谢谢你。

**更新**

我尝试在 mp3 参考下方添加对文件的另一个参考并且它有效，但不确定这是否是最佳解决方案：

```
<script>
$(document).ready(function() {
var audioElement = document.createElement('audio');
audioElement.setAttribute('src', 'http://path.com/to/sound.mp3');
audioElement.setAttribute('src', 'http://path.com/to/sound.ogg');
$('#play_it').click(function() {
audioElement.play();
});
});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T15:39:26.903

您必须向元素添加`<source>`元素`<audio>`以指定不同的声音格式

```
<audio>
    <source src="sound.ogg" type="audio/ogg">
    <source src="sound.mp3" type="audio/mpeg">
</audio> 
```

jQuery：

```
var audioElement = $('audio');
var sourceElement = $('source');
sourceElement.attr('src', 'http://path.com/to/sound.mp3');
sourceElement.attr('type', 'audio/mpeg');
audioElement.append(sourceElement);
sourceElement = $('source');
sourceElement.attr('src', 'http://path.com/to/sound.ogg');
sourceElement.attr('type', 'audio/ogg');
audioElement.append(sourceElement); 
```

# xcode - 使用 Xcode 在 openGL ES 1.0 中绘制线条

> ID：13124707
> 
> 赞同：0
> 
> 时间：2012-10-29T15:32:11.967
> 
> 标签：xcode, opengl-es, ios6, xcode4.5

我试图在我的 GLView 中画一些线条，但它什么也没做。

我将 Xcode 4.5 用于 iOS 6.0 应用程序。

这是我的代码：

```
//Draw Axes
{

    const GLfloat lineX[] = {
        -100.0f, 0.0f, 0.0f, //point A
        100.0f, 0.0f, 0.0f //point B
    };
    const GLfloat lineY[] = {
        0.0f, -100.0f, 0.0f, //point A
        0.0f, 100.0f, 0.0f //point B
    };
    const GLfloat lineZ[] = {
        0.0f, 0.0f, -100.0f, //point A
        0.0f, 0.0f, 100.0f //point B
    };

    glEnableClientState(GL_VERTEX_ARRAY);
    glColor4f(1.0f, 0.0f, 0.0f, 1.0f); // opaque red
    glVertexPointer(3, GL_FLOAT, 0, lineX);
    glDrawArrays(GL_LINES, 0, 2);

    glColor4f(0.0f, 1.0f, 0.0f, 1.0f); // opaque green

    glVertexPointer(3, GL_FLOAT, 0, lineY);
    glDrawArrays(GL_LINES, 0, 2);

    glColor4f(0.0f, 0.0f, 1.0f, 1.0f); // opaque blue

    glVertexPointer(3, GL_FLOAT, 0, lineZ);
    glDrawArrays(GL_LINES, 0, 2);

    glDisableClientState(GL_VERTEX_ARRAY);
} 
```

我是openGL的新手，我只是想做一些基本的事情。我可以使用 glClear：

```
glClearColor(1, 0, 1, 1);
glClear(GL_COLOR_BUFFER_BIT); 
```

所以看起来上下文是正确的，但我无法画线。

任何帮助...谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T15:47:28.187

您为什么不尝试查看[GLPaint](http://developer.apple.com/library/ios/samplecode/GLPaint/)示例代码。

它使用 OpenGL ES 1.0 绘制线条（基于触摸输入）

# parallel-processing - 将 mpi 中的 n 个数字与树上的策略相加

> ID：13124708
> 
> 赞同：1
> 
> 时间：2012-10-29T15:32:23.967
> 
> 标签：parallel-processing, mpi

我开发了这个简单的函数来使用 mpi 在并行环境中执行 n 个数的总和，使用的策略是每个处理器计算其部分总和，然后在成对不同的情况下，处理器在它们之间通信计算的数量，从而创建一棵二叉树。当然，如果处理器数量是 2^n 的倍数，则可以应用此策略。

参数：menum = id 处理器，nproc = 处理器总数，sum = 部分总和

```
 void Second_Strategy( int menum ,int nproc,int sum, MPI_Status status)
  {
    int a,b,p,i,sumtmp;
    double t_tot, t1, t2, diff;

    p=log(nproc)/log(2);
    t1 = MPI_Wtime();

    for(i=1;i<=p;i++)
    {
       b=pow(2,i-1);
       a=pow(2,i);
       if ( (menum % a) ==0) 
       {
          MPI_Recv(&sumtmp,1,MPI_INT,(menum+b),i,MPI_COMM_WORLD,&status);
          sum=sum+sumtmp;

        }else{
               if ( ( menum % b) ==0){MPI_Send(&sum,1,MPI_INT,(menum-b),i,MPI_COMM_WORLD); }

            }
      }
        t2 = MPI_Wtime();
        diff = t2-t1;
        MPI_Reduce(&diff, &t_tot, 1, MPI_DOUBLE, MPI_MAX, 0, MPI_COMM_WORLD);

        if(menum==0) 
        {

          printf("The sum is : %d \n ",sum);
          printf("Time  : %f seconds\n", t_tot);

        }      

 } 
```

在这种情况下，过程 P0 将得到求和的结果。但是在用户要选择将具有引入参数“选择”的总和的处理器的情况下。怎么做？我在创建用于在进程之间交换数据的二叉树时遇到问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T19:06:51.187

最直接的解决方案是创建一个新的通信器，其中用户选择的进程接收等级 0。然后只需使用该通信器而不是`MPI_COMM_WORLD`在您的树构建算法中。

我当然假设您这样做是为了在并行通信中进行练习，而不是为了对数字求和，因为可以很容易地用`MPI_Reduce()`.

# node.js - 使用 node-postgres 在 postgres 中存储文件

> ID：13124711
> 
> 赞同：11
> 
> 时间：2012-10-29T15:32:42.180
> 
> 标签：node.js, postgresql, node-postgres

我正在尝试使用 node-postgres 模块将一个小文件存储到 postgres 数据库中。我知道我应该使用 bytea 数据类型来执行此操作。我遇到的问题是当我做一些事情时：

```
fs.readFile path, (err, data) ->
    client.query 'UPDATE file_table SET file = $1 WHERE key = $2', [data, key], (e, result) ->
    .... 
```

db 中文件列的内容是：\x 并且没有存储任何内容。如果我将数据缓冲区更改为十六进制，即 data.toString('hex') 文件将被存储，但当我读回文件时所有格式都会丢失。

使用 node-postgres 模块将文件存储到 postgres 的正确方法是什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-18T21:47:34.037

诀窍是编码为十六进制并在文件前面加上 \x。通过返回缓冲区的 parseByteA 确实支持将其读回：

[https://github.com/brianc/node-postgres/blob/master/lib/textParsers.js](https://github.com/brianc/node-postgres/blob/master/lib/textParsers.js)

这是我在 postgres 9.2.2 和 node.js 0.8.16 和 node-postgres (npm package='pg') 0.11.2 上从磁盘读取图像时所做的：

```
 fs.readFile(loc_on_disk, 'hex', function(err, imgData) {
        console.log('imgData',imgData);
        imgData = '\\x' + imgData;
        app.pgClient.query('insert into image_table (image) values ($1)',
                           [imgData],
                           function(err, writeResult) {
          console.log('err',err,'pg writeResult',writeResult);
        });
      }); 
```

以及我做了什么把它写回来

```
app.get('/url/to/get/', function(req, res, next) {
  app.pgClient.query('select image from image_table limit 1',
                     function(err, readResult) {
    console.log('err',err,'pg readResult',readResult);
    fs.writeFile('/tmp/foo.jpg', readResult.rows[0].image);
    res.json(200, {success: true});
  });
}); 
```

# web-services - Axis2 客户端缺少原始类型的 xsi 类型属性

> ID：13124712
> 
> 赞同：1
> 
> 时间：2012-10-29T15:32:45.057
> 
> 标签：web-services, axis2, xsitype

我正在尝试将我的客户端从axis1.x 更新到axis2-1.6.2，而服务器端保持不变。网络服务由 ZSI webservice 平台在 python 上实现。使用 WSDL2Java 工具和 XMLBeans 数据绑定，使用旧的 wsdl 文件成功生成了客户端。

在向旧 Web 服务发送请求时遇到问题，新的 axis2 客户端创建的请求缺少旧服务器所期望的 xsi:type 属性，因此服务器返回 Any cannot parse untyped element 错误。

新旧请求看起来像

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema"xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
<soapenv:Body>
<ns1:getSearchResult xmlns:ns1="http://www.iphrase.com/2003/11/oneStep/" soapenv:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/">
<arg xsi:type="xsd:string">
test
</arg>
</ns1:getSearchResult>
</soapenv:Body>
</soapenv:Envelope> 
```

而新的是

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
<soapenv:Body>
<ones:getSearchResult xmlns:ones="http://www.iphrase.com/2003/11/oneStep/">
<arg>
test
</arg>
</ones:getSearchResult>
</soapenv:Body>
</soapenv:Envelope> 
```

如您所见，“arg”参数丢失 xsi:type="xsd:string" ，我认为这是主要问题。

这里有更多技术细节：

wsdl 看起来像

```
<?xml version="1.0" encoding="utf-8"?>
<definitions xmlns:http="http://schemas.xmlsoap.org/wsdl/http/" 
  xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" 
  xmlns:xsd="http://www.w3.org/2001/XMLSchema" 
  xmlns:types="http://www.iphrase.com/2003/11/oneStep/encodedTypes"
  xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/"
  xmlns:tns="http://www.iphrase.com/2003/11/oneStep/"
  xmlns:tm="http://microsoft.com/wsdl/mime/textMatching/"
  xmlns:mime="http://schemas.xmlsoap.org/wsdl/mime/"
  targetNamespace="http://www.iphrase.com/2003/11/oneStep/"
  xmlns="http://schemas.xmlsoap.org/wsdl/">
<types>
  <xsd:schema targetNamespace="http://www.iphrase.com/2003/11/oneStep/encodedTypes">
    <xsd:import namespace="http://schemas.xmlsoap.org/soap/encoding/" />
    <xsd:import namespace="http://schemas.xmlsoap.org/wsdl/" />

<xsd:simpleType name="arg">
  <xsd:restriction base="xsd:string">
  </xsd:restriction>
</xsd:simpleType>

<xsd:simpleType name="out">
  <xsd:restriction base="xsd:string">
  </xsd:restriction>
</xsd:simpleType>

 </xsd:schema>
</types>
<message name="getSearchResultSoapIn">
  <part name="arg" type="types:arg"/>
</message>
<message name="getSearchResultSoapOut">
  <part name="searchResult" type="types:out"/>
</message>

<portType name="QueryServiceSoap">
  <operation name="getSearchResult">
    <input message="tns:getSearchResultSoapIn"/>
    <output message="tns:getSearchResultSoapOut"/>
  </operation>
</portType>
<binding name="QueryServiceSoap" type="tns:QueryServiceSoap">
  <soap:binding transport="http://schemas.xmlsoap.org/soap/http" style="document" />
  <operation name="getSearchResult">
    <soap:operation soapAction="http://www.iphrase.com/2003/11/oneStep/getSearchResult" style="rpc" />
    <input>
      <soap:body use="encoded" namespace="http://www.iphrase.com/2003/11/oneStep/" encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" />
    </input>
    <output>
      <soap:body use="encoded" namespace="http://www.iphrase.com/2003/11/oneStep/" encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" />
    </output>
  </operation>
</binding>

<service name="QueryService">
  <port name="QueryServiceSoap" binding="tns:QueryServiceSoap">
      <soap:address location="http://9.148.51.231:8777/service" />
  </port>
</service>
</definitions> 
```

似乎axis2由于某种原因省略了原始类型的 xsi:type ，我也没有找到 xmlns:xsd="http://www.w3.org/2001/XMLSchema"xmlns:xsi="http://www. w3.org/2001/XMLSchema-instance 命名空间可能也相关。我假设使用 Axis2 客户端也不需要升级服务器。

有人可以给个方向吗，似乎有任何配置问题，但我对axis2的了解非常有限。所有在网络上寻找相关内容的尝试都没有成功。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T07:27:55.987

在您的 WSDL 中，查看该`binding`部分指定的位置`style="document"`和`use="encoded"`？此 WSDL 指定文档/编码样式，这是非标准的且非常不寻常。[此页面](http://www.ibm.com/developerworks/webservices/library/ws-whichwsdl/)描述了四种样式（RPC 与文档，编码与文字），您会看到作者没有在文档/编码上花费任何空间。

Axis2[不支持 rpc/encoded](http://axis.apache.org/axis2/java/core/docs/Axis2-rpc-support.html)，我猜它也不包含支持文档/编码所需的位。您最好的选择是向该服务器添加一个支持文档/文字的新界面。否则，您可能会因为客户端无法使用 Axis。[这是一个](http://www.jroller.com/gmazza/entry/calling_rpc_encoded_web_services)讨论从 JAX-WS 客户端调用 rpc/编码服务的页面。您可以根据自己的需要进行调整。

# c# - 在运行时创建未知类型的值

> ID：13124713
> 
> 赞同：3
> 
> 时间：2012-10-29T15:32:47.487
> 
> 标签：c#, validation, mvvm, runtime

我找到了一个很好的类型验证代码示例：

```
public class StringViewModel : ViewModelBase, IComparable
{
    private string _value;
    private string _originalValue;

    public StringViewModel(string value)
    {
        _value = value;
        _originalValue = value;
    }

    // Der eigentliche Wert.
    public string Value
    {
        get { return _value; }
        set
        {
            if (value != _value)
            {
                _value = value;
                RaisePropertyChanged("Value");
                HasChanges = _value != _originalValue && !(string.IsNullOrEmpty(_value) && string.IsNullOrEmpty(_originalValue));
            }
        }
    }

    public override void AcceptChanges()
    {
        _originalValue = _value;
        HasChanges = false;
        HasError = false;
    }

    public override void UndoChanges()
    {
        Value = _originalValue;
        HasError = false;
    }

    // Muss implementiert werden, damit die Sortierung im CollectionView funktioniert.
    public int CompareTo(object obj)
    {
        if (obj == null) return 1;
        if (object.ReferenceEquals(this, obj)) return 0;
        StringViewModel other = obj as StringViewModel;
        return string.Compare(this._value, other._value);
    }

    public override string ToString()
    {
        return _value;
    }
} 
```

现在我想让它更通用，所以我需要在运行时创建以下 2 个值：

```
private T? _value;
private T? _originalValue; 
```

因为我想做类似的事情：

```
public class ItemModel : IComparable, INotifyEXTEND
{
    private ??? _value;
    private ??? _originalValue;

    public ItemModel(string value)
    {
            _value = value;
            _originalValue = value;
    }

    public ??? Value
    {
        get { return _value; }
        set
        {
            if (value != _value)
            {
                _value = value;
                RaisePropertyChanged("Value");
                HasChanges = _value != _originalValue && !(string.IsNullOrEmpty(_value) && string.IsNullOrEmpty(_originalValue));
            }
        }
    }

    public override void AcceptChanges()
    {
        _originalValue = _value;
        HasChanges = false;
        HasError = false;
    }

    public override void UndoChanges()
    {
        Value = _originalValue;
        HasError = false;
    }

    public int CompareTo(object obj)
    {
        if (obj == null) return 1;
        if (object.ReferenceEquals(this, obj)) return 0;
        ??? other = obj as ???;
        return string.Compare(this._value, other._value);
    }

    public override string ToString()
    {
        return _value;
    }
} 
```

所以我可以这样使用它：

```
public class PersonViewModel : ViewModelBase
{

    private Person _person;
    private ItemModel _lastname;
    private ItemModel _birthdate;
    private bool _isNew;

    // Otherstuff
} 
```

关于如何做到这一点的任何建议？（一些示例代码片段或链接会很好）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T15:38:47.257

您需要使用泛型：

```
public class ItemModel<T> : IComparable<ItemModel<T>>, INotifyEXTEND where T : IComparable<T> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T14:58:19.587

在 SLaks 启发性提示之后我的解决方案（谢谢）我希望它可以帮助某人

```
public class ValueModel<T> : IComparable
{
    private object _value;
    private object _originalValue;

    public T Value
    {
        get { return (T)_value; }
        set
        {
            if ((object)value != _value)
            {
                _value = value;
            }
        }
    }

    public ValueModel(T value)
    {
        _value = value;
        _originalValue = value;
    }

    public void AcceptChanges()
    {
        _originalValue = _value;
    }

    public void UndoChanges()
    {
        Value = (T)_originalValue;
    }

    // Muss implementiert werden, damit die Sortierung im CollectionView funktioniert.
    public int CompareTo(object obj)
    {
        if (obj == null) return 1;
        if (object.ReferenceEquals(this, obj)) return 0;
        ValueModel<T> other = obj as ValueModel<T>;
        if (typeof(T) == typeof(String))
            return string.Compare(this._value.ToString(), other._value.ToString());
        else
            return ((IComparable)_value).CompareTo(other._value);
    }
} 
```

你可以像下面这样使用它

```
public ValueModel<int> Id {get;set;} 
```

执行类似的方法

```
Id.AcceptChanges(); 
```

并绑定到它

```
TextBox Text="{Binding Id.Value}" 
```

# events - 如何在 vba 中激活单击事件是唯一标识符的按钮？

> ID：13124715
> 
> 赞同：1
> 
> 时间：2012-10-29T15:32:52.240
> 
> 标签：events, vba, onclick, html-parsing

嗨，我尝试了不同的方法，但没有成功。谁能弄清楚如何在此按钮上激活事件：

```
<b>Class="palette" Title="Tilf&oslash;j" 
  onclick ="paletteAdd('databank_form_frekvens_dualListBox_choices', 
                       'databank_form_frekvens_dualListBox_selection',
                       'databank_form_frekvens_dualListBox_recorder');" 
  img src=   
  "/jobindsats/viewer/resources/com.sas.jobindsats.ui.palette.Palette/add.gif" 
  alt = "Tilf&oslash;j".</b> 
```

到目前为止，代码单击第一页上的两个按钮并激活/选择第二页上的所有变量。但我似乎无法单击将所选值从左侧框发送到右侧框的单个箭头按钮。问题是他们都有相同的名字、头衔等。唯一的区别是 onclick 事件...

代码：

```
Sub makro()
Dim IE As Object
Dim frm As Object
Dim elc As HTMLHtmlElement

Set IE = CreateObject("InternetExplorer.Application")
With IE
    .Visible = True
    .navigate "http://www.jobindsats.dk/sw167.asp"
    Do Until .readyState = 4: DoEvents: Loop
    End With

    frm.document.getElementByID("form_gruppe_maalingsgrupper_0_maalinger_1_radio").Click
        Application.Wait DateAdd("s", 1, Now)

    frm.document.getElementByID("nextbutton").Click
        Application.Wait DateAdd("s", 1, Now)

      'Ledighedstype
     frm.document.all("databank_form_forcedDimensions_0_placeholder_dual_choices").Options(1).Selected = True
        Application.Wait DateAdd("s", 2, Now)
        'doesnt work
   Set elc = frm.document.all.Title("Tilf&oslash;j")
   For Each elc In frm.document.all
   If elc.onclick = "form_gruppe_maalingsgrupper_0_maalinger_1_radio" Then
    elc.Click
   End If
 Next
End Sub 
```

# regex - 使用正则表达式的简单搜索/替换在点和字符之间插入空格

> ID：13124716
> 
> 赞同：10
> 
> 时间：2012-10-29T15:32:53.513
> 
> 标签：regex, replace

我想通过在每个句点和字母之间插入空格而不是在点和括号或点和逗号之间插入空格来分隔句子。

考虑一下：

```
This is a text.With some dots.Between words.(how lovely). 
```

这可能在 Perl 或 PHP 中有一些解决方案，但我感兴趣的是它可以在支持基于正则表达式的搜索/替换的文本编辑器中完成吗？问题是它会同时匹配点和字符，而替换将完全消除两者。换句话说，有没有办法在这两个字符之间匹配“无”？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-29T15:52:51.660

您可以在替换字符串中使用反向引用。通常它看起来像：

搜索正则表达式：

```
(\.)(\w) 
```

替换模式（注意空格）：

```
$1 $2 
```

后向引用是相应组的替身。

或者，您可以使用环视：

```
(?<=\.)(?=\w) 
```

这不会“捕获”文本，它只会匹配句点和字母/数字（零长度字符串）之间的位置。替换它本质上会插入一些文本。

但实际上，这取决于您的文本编辑器的功能。很少有文本编辑器内置“完整”的正则表达式引擎。我使用 TextPad，它有自己的正则表达式风格，很大程度上不支持环视（迫使我使用第一种方法）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T15:40:38.613

未指明语言，我使用了 PHP，但表达式非常通用，可以在其他环境中重用：

```
<?php

$s = 'This is a text.With some dots.Between words.(how lovely).';
$r = '~(\w)(\.)(\w)~';

echo preg_replace($r, '$1 $3', $s); 
```

此代码导致以下字符串输出：

```
This is a text With some dots Between words.(how lovely). 
```

1.  (\w) 匹配点之前的一个字母数字字符
2.  (.) 匹配点
3.  (\w) 匹配点后的一个字母数字字符

第一个和第三个匹配在替换字符串中被称为 $1 和 $3

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T15:44:09.253

在 Perl 中：

```
$msg =~ s/\.([a-zA-Z])/\. \1/g 
```

在 vim（整个文件）中：

```
:%s/\.([a-zA-Z])/\. \1/g 
```

在 Visual Studio 中它会是

```
\.([a-zA-Z]) 
```

在“查找内容：”中，以及

```
\. \1 
```

在“替换为：”中。

一般来说，大多数支持正则表达式搜索的编辑器通常都有捕获组，允许您存储匹配的部分表达式并在替换文本中使用它。在上面的表达式中， 中的所有内容`()`都是“捕获的”，我将其包含在`\1`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-29T15:48:02.647

这段代码解决了你的问题：

```
preg_replace('/([a-zA-Z]{1})\.([a-zA-Z]{1})/', '$1\. $2', 'This is a text.With some dots.Between words.(how lovely).'); 
```

您应该检测点前后的任何字符并替换为 blanco。

# javascript - “Rails 方式”应用 javascript 链接

> ID：13124717
> 
> 赞同：0
> 
> 时间：2012-10-29T15:33:00.270
> 
> 标签：javascript, ruby-on-rails, ruby

我有一些纯 HTML，在单击链接时提供一些功能。我想清理它，以便以符合 Ruby/Rails 编码风格的方式处理它。我尝试与`link_to`助手打交道，但无法找到一种干净的方法来处理这种情况。

```
<p>...or <a id="set_current_location" href="#">Use Current Location</a></p>

<script>
$(function(){
    $('#set_current_location').on('click', function(e){
        e.preventDefault();
        navigator.geolocation.getCurrentPosition(function(position) {
            $.ajax({
              type: 'POST',
              url: '<%= set_location_path %>',
              data: {
                latitude: position.coords.latitude,
                longitude: position.coords.longitude
              },
              async: false
            });
        })
    });
});
</script> 
```

更新：我实际上已经将 javascript 移动到一个咖啡脚本文件中，所以这不是我的问题。我真的只是想知道这是否看起来像一种类似 Rails 的方式来解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T15:37:40.830

“rails 方式”是在单独的文件中使用不显眼的 javascript，将您的 javascript 留在您的视野之外。乍一看，您的代码很好 - 只需将您的“脚本”内容移动到 .js 文件中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T15:37:15.860

我能想到的唯一方法是在调用此函数时传递 rails 生成的路径（url）。我用过`$(this).attr("href")`。`href`在元素中创建一个属性。此 href 属性将具有由 rails 生成的链接。

js.erb 不会有 actionview 方法

```
$(function(){
    $('#set_current_location').on('click', function(e){
        e.preventDefault();
        var url = $(this).attr('href');
        navigator.geolocation.getCurrentPosition(function(position) {
            $.ajax({
              type: 'POST',
              url: url,
              data: {
                latitude: position.coords.latitude,
                longitude: position.coords.longitude
              },
              async: false
            });
        })
    });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T17:15:56.460

如果你问我认为你是什么..

```
<%= link_to "Use Current Location", "#", id: :set_current_location %> 
```

这样就可以了。

# javascript - 如何检测 Firefox 中的 Enter 键？

> ID：13124719
> 
> 赞同：1
> 
> 时间：2012-10-29T15:33:04.340
> 
> 标签：javascript, html, events, firefox, typescript

我能够成功检测到`Enter`Internet Explorer 10、Chromium 和 Opera 中的密钥，但不能在 Firefox 中检测到。

我在这里找到了一些页面，尽管它们在 Firefox 中也不起作用。我在这里做错了吗？

打字稿：

```
function HandleKeyPress(e) {
    var key = e.keyCode || e.which;

    if (key == 13) {
        // We got this.
        var textbox = <HTMLInputElement>document.getElementById("tbox");
        sayHello(textbox.value);
    }
} 
```

生成的 JavaScript（相同）：

```
function HandleKeyPress(e) {
    var key = e.keyCode || e.which;
    if(key == 13) {
        var textbox = document.getElementById("tbox");
        sayHello(textbox.value);
    }
} 
```

HTML：

```
<input type="text" value="dfgdfgdfg" id="tbox" onkeypress="HandleKeyPress(event)" /> 
```

我不能使用任何外部库，我必须在纯 JavaScript（或编译为纯 JS 的语言）中执行此操作。

* * *

# 更新：

* * *

我刚刚安装了 Firebug，并在我注意到的 Consolw 窗格中（在按下`Enter`文本字段上的 jey 之后：

```
http://localhost:1058/Default.cshtml?someValue=dfgdfgdfgkjkhj

<p>You said: dfgdfgdfgkjkhj</p> 
```

见下图：

![在此处输入图像描述](../Images/431841d470423aaff5d519e633f7fb13.png)

*请注意*，页面本身并没有将`response`段落的值更新为在文本框中输入的值，**但是**，Firebug 确实说它已成功发布。

现在，由于此代码适用于所有其他浏览器（IE、Chrome/Canary 和 <、Opera、Safari），我的问题是，也许 Firefox**正在**检测关键事件，但在那之后不起作用的部分是？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T15:47:44.560

在某些实现中，您应该更改`onkeypress`为仅触发可打印字符。`onkeydown``onkeypress`

您现有的代码应该与`onkeydown`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-29T15:41:41.240

try this:

```
<input type="text" value="dfgdfgdfg" id="tbox" onkeypress="HandleKeyPress(event)" /> 
```

And define the function `HandleKeyPress` as:

```
function HandleKeyPress(evt){
    var key = evt.which || evt.charCode || evt.keyCode || 0;

    if (key == 13) ...
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T15:35:38.297

您可以像这样使用jQuery来完成

```
$(".input").keyup(function (e) {
    if (e.keyCode == 13) {
        // Whatever
    }
}); 
```

# ruby-on-rails - RangeError 异常：偏移量 25 和限制 25 超出了允许的范围

> ID：13124728
> 
> 赞同：0
> 
> 时间：2012-10-29T15:33:31.507
> 
> 标签：ruby-on-rails, datamapper, kaminari

我正在尝试对数据库中的某些项目进行分页，但是当我尝试进入分页的第二页时出现此错误：

```
RangeError Exception: offset 25 and limit 25 are outside allowed range 
```

这是我的控制器中设置分页的代码：

```
@activities = (current_user.followed_users.activities(:order => [:created_at.desc]) + current_user.followed_centers.activities(:order => [:created_at.desc])).all(:limit => 40)

unless (params[:page].nil?)
  @page = params[:page].to_i
end

unless (@page.nil?)
  @activities = Kaminari.paginate_array(@activities).page(@page).per(10)
else
  @activities = Kaminari.paginate_array(@activities).page(0).per(10)
end 
```

我将查询中返回的对象数量限制为 40，然后尝试对结果集进行分页，但出现范围错误。我不确定这里有什么问题。如果我取消初始查询的限制，这可以正常工作。

这是终端中的输出：

```
RangeError (offset 25 and limit 25 are outside allowed range):
  lib/ct_gems/dm-core-1.2.0/lib/dm-core/query.rb:1298:in `get_relative_position'
  lib/ct_gems/dm-core-1.2.0/lib/dm-core/query.rb:592:in `slice!'
  lib/ct_gems/dm-core-1.2.0/lib/dm-core/query.rb:567:in `slice'
  lib/ct_gems/dm-core-1.2.0/lib/dm-core/collection.rb:1414:in `sliced_query'
  lib/ct_gems/dm-core-1.2.0/lib/dm-core/collection.rb:396:in `[]'
  app/controllers/users_controller.rb:64:in `stream'
  lib/ct_gems/dm-core-1.2.0/lib/dm-core.rb:263:in `block in repository'
  lib/ct_gems/dm-core-1.2.0/lib/dm-core/repository.rb:114:in `scope'
  lib/ct_gems/dm-core-1.2.0/lib/dm-core.rb:263:in `repository' 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T16:39:45.567

不确定这是否有帮助，但您可以尝试将总数传入

```
@activities = Kaminari.paginate_array(@activities, total_count: 40 ).page(@page).per(10) 
```

您还可以调用 paginate_array 的偏移量和限制参数，这可能会有所帮助。

****更新****

这也可能会引导您走上正确的道路

[https://github.com/amatsuda/kaminari/pull/160](https://github.com/amatsuda/kaminari/pull/160)

[https://github.com/amatsuda/kaminari/pull/111](https://github.com/amatsuda/kaminari/pull/111)

# c# - 如何从非参考 dll 中导入模型类

> ID：13124733
> 
> 赞同：1
> 
> 时间：2012-10-29T15:33:38.417
> 
> 标签：c#, asp.net, asp.net-mvc, razor, asp.net-mvc-4

对不起我的英语，它不是我的母语。

我正在编写一个对大型医疗系统的网络访问。

使用 ASP.NET MVC 4。碰巧模型和控制器在另一个 dll 中，当 web 应用程序启动时加载了什么。控制器在 Unity 容器中注册，一切正常。

但是在 View 中不能直接使用模型类。Razor 视图引擎找不到它们的命名空间。

如何解决？如何使用加载到内存中但没有 mvc-project 引用的 ViewEngine 命名空间库？

预先感谢您的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T05:20:42.070

有两种方法可以将命名空间添加到 ASP.NET MVC 中的 Razor 视图。

**方法一**

第一种方法是在 .cshtml 文件中使用 @using 语句，它只将命名空间导入当前文件。

例子 ：-

```
@using Namespace1
@using Namespace2.SomeClass 
```

**方法二**

第二种方法是在项目的 View 目录的 web.config 中定义这些命名空间。

![在此处输入图像描述](../Images/c4808bcf9452cdfd3460d57ef9f65a8d.png)

例子：-

```
<system.web.webPages.razor>
<pages pageBaseType="System.Web.Mvc.WebViewPage">
  <namespaces>
    <add namespace="System.Web.Mvc" />
    <add namespace="System.Web.Mvc.Ajax" />
    <add namespace="System.Web.Mvc.Html" />
    <add namespace="System.Web.Routing" />
    .
    <!-- can more more here... -->
  </namespaces>
</pages> 
```

或者您也可以像这样添加自定义命名空间：

```
<add namespace="Custom.Yasser" />
<add namespace="Custom.Mohsin" /> 
```

[资源](http://yassershaikh.com/how-to-add-import-namespace-to-razor-view-in-mvc-3/)

# eclipse - Eclipse XML 编辑器：刷新内容辅助

> ID：13124737
> 
> 赞同：1
> 
> 时间：2012-10-29T15:33:55.323
> 
> 标签：eclipse, eclipse-wtp

我正在使用 eclipse WTP 插件来创建 XML 语法。我编写了一组 XML Schema，并使用 XML 文件来测试语法是否正确。Eclipse 内容辅助功能就像一个魅力，但每次我更改语法中的某些内容时，xml 编辑器的自动完成功能不会随着新的更改而刷新。如果我关闭并重新打开项目，内容辅助将使用新定义进行更新。

有没有办法强制刷新 XML 编辑器的内容辅助，而无需每次都关闭并重新打开项目？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-07-06T22:11:57.933

您会发现当**XML 编辑器**处于活动状态时，工具栏上有一个**Reload Dependencies**按钮来执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T16:51:49.383

我通常只是关闭并打开我正在处理的文件并刷新。

IE，如果我在架构的文档元素中添加新行，当我关闭并打开文件时，将鼠标悬停在元素上现在将显示新文档。

我不确定这是否是你想要的。

# objective-c - 核心数据谓词对多

> ID：13124738
> 
> 赞同：1
> 
> 时间：2012-10-29T15:33:55.200
> 
> 标签：objective-c, ios, core-data, nspredicate

我试图找到一个匹配字符串和一组对象的对象。我的谓词如下所示：

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"name == %@ and individuals CONTAINS %@", name, individuals]; 
```

我没有受到任何打击。虽然我知道有一个实体匹配名称和个人设置。

我的谓词有什么问题？

编辑：我已经取得了一些进展。现在的问题是，如果我尝试找到一个具有现有组名和现有联系人的组，即 groupname = "test" 和 individual.name = "john doe" 和 individual.contactInfo = "123" 它会正确找到我这个组但是如果我有一个组具有相同的组名和相同的联系人+另一个联系人，它也会找到我不想要的这个组。

我只想要与谓词完全匹配的组。

我现在通过这样做来使用子谓词：

```
NSMutableArray *subPredicates = [NSMutableArray initWithCapacity:5];
// Add group name to predicate
[subPredicates addObject:[NSPredicate predicateWithFormat:@"name == %@", name]];

for (NSDictionary *contactInfo in individuals) {

    NSString *name = [contactDict objectForKey:@"name"];
    NSString *contactInfo = [contactDict objectForKey:@"contactInfo"];

    NSPredicate *individualPredicate = [NSPredicate predicateWithFormat:@"ANY individuals.name LIKE %@ AND any individuals.contactInfo LIKE %@", name, contactInfo];

    [subPredicates addObject:individualPredicate];
}

NSPredicate *individualsPredicate = [NSCompoundPredicate andPredicateWithSubpredicates:subPredicates];

Group *group = // do the fetch with the predicate 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T15:44:56.713

一组对象不能与`CONTAINS`谓词匹配。您可以使用 ANY 谓词匹配集合中的一个对象：

```
[NSPredicate predicateWithFormat:@"name == %@ and ANY individuals.name == %@", name, individualName]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T22:30:59.357

我正在手机上输入此内容，但无法验证，但以下谓词可能对您有用：

```
[NSPredicate predicateWithFormat:@"name == %@ AND SUBQUERY(individuals, $x, $x IN %@).@count == %d", 
    name, individuals, individuals.count]; 
```

它搜索具有给定名称的对象，其个体是给定集合的超集。

# php - 尝试在 php 中使用 count(*) 时收到未定义的变量

> ID：13124742
> 
> 赞同：3
> 
> 时间：2012-10-29T15:34:01.990
> 
> 标签：php, mysql

我想显示销售人员完成的销售/购买次数。我有一个搜索框，当我输入他们的名字时，它会返回一个数字。因此，要计算总购买量，我使用以下代码：

```
<?php

mysql_connect ("****", "****","****")  or die (mysql_error());
mysql_select_db ("*******");

 $term = $_POST['term'];

$sql = mysql_query("select count(*) from car_orders where side='buy' and sales_id like '%$term%'");

while ($row = mysql_fetch_array($sql)){
 echo 'owner_id: '.$row['sales_id'];
echo '<br/> side '.$row['side'];
echo '<br/><br/>';
 }
?> 
```

我试图找出如何让计数数字显示在页面上并且失败了。请有人帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T15:35:07.803

你需要添加`ALIAS`

```
select count(*) AS totalCOUNT from car_orders where .... 
```

你现在可以使用它来获得价值

```
$row['totalCOUNT'] 
```

但是在您的查询中看到，既不是`sales_id`也不`side`是预计的。下面的查询*只是一个假设*

```
select `sales_id`,`side`, count(*) AS totalCOUNT
from car_orders 
where side='buy' and 
      sales_id like '%$term%'
GROUP BY `sales_id`,`side` 
```

现在您可以获取所有值，

```
$row['sales_id']
$row['side']
$row['totalCOUNT'] 
```

并且该查询很容易受到`SQL Injection`. 请花时间阅读下面的文章如何保护它，

*   [如何防止 PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection-in-php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T15:37:27.297

1.  您只选择了`COUNT(*)`列，没有别的。
2.  您没有使用`mysql_fetch_assoc()`，因此它不是关联数组。
3.  这些`mysql_`函数已弃用，请使用 mysqli 或 PDO。

# php - 获取并将提交的文本回显到单个 li/div？

> ID：13124744
> 
> 赞同：0
> 
> 时间：2012-10-29T15:34:04.173
> 
> 标签：php, html-lists

这是我第一次发帖...

我有一个关于我正在编写的 html/php 中的新闻提要相关功能的问题。你可以说它类似于 Facebook 正在使用的“墙”。

所以我在页面顶部有一个输入字段，它发布用户编写的文本并插入到我的数据库中。

稍后使用 echo 将文本打印在页面上。

到目前为止，一切都很好。我正在从数据库中获取信息，例如消息、作者、时间等。我已经能够显示一条消息，所有信息都显示在正确的位置。事情是; 我希望每条提交的消息都在单独的 div 中回显。我正在使用无序列表来创建这些单独的容器，其中将显示每条消息。

现在我想在逻辑部分得到一些帮助。我该怎么做？

到目前为止，我一直在考虑的是在每条提交的消息上发布一个带有增量的隐藏 ID。然后网站将检查是否存在 ID 高于网站上显示的最新消息的消息。如果有更高 ID 的消息，则该特定消息将在另一个 li 中回显。不过，我不确定这些新的 li 将如何自动创建。如果存在高于最新显示的 ID 值，也许我也可以将 li 呼出。

我也想知道 fetch 功能。如何指定要从表中获取的内容，然后将获取的数据回显到指定的 div 中？

TLDR？我想要发生的事情。

1.  用户写一些文本并提交。
2.  文本被插入到数据库中。
3.  获取最新插入的文本。
4.  将获取的文本回显到一个新的 li 中。

如果有什么我需要澄清的，请告诉我。提前感谢。

编辑; 假设我有很多帖子，但我只想展示其中的一些。假设我有四个用户，其中两个的 viewID 为 0，另外两个的 viewID 为 1。当 ID 为 0 的用户提交内容时，只有 ID 为 0 的用户会看到此消息。这将如何实现？我在想，当用户发布消息时，也会发布隐藏的 viewID。之后从数据库中选择 viewID = 0 等。也许这可以使用 cookie/会话来完成？我不知道这是否比上面写的迈出了一大步？

然而。我有点忘了你可以回显 html，所以我个人的 li/div 与获取的文本可以通过这种方式完成，在提交时立即获取和回显。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T15:42:00.967

You can echo out `html` with `php`. As for fetching, I recommend the object-oriented way

```
$sql = "SELECT * FROM table_name" // note this could be of many forms depending on your needs.

$result = $sql->query();

while($row = $result->fetch_object()){
  echo '<li><div>' . $row->comment . '</div></li>';
} 
```

So you create a new div inside a li for every query in the database, aka for every post.

All this code goes into a single `ul` element, wrapped in the php starting tags.

# asp.net-mvc - 具有包含复杂成员的列表属性的 MVC 视图模型

> ID：13124751
> 
> 赞同：0
> 
> 时间：2012-10-29T15:34:19.283
> 
> 标签：asp.net-mvc, mvc-editor-templates, defaultmodelbinder

我有一个如下所示的模型

```
class ContainerClass
{
    string Name { get; set;}
    Guid Id { get; set; }

    [UIHint("CustomSelectBox")]
    List<Member> Members { get; set; }
}

class Member
{
    string Name { get; set;}
    Guid Id { get; set; }
    string SomeProperty { get; set;}
}

class DerivedFromMember: Member
{
   string AnotherProperty { get; set;}
} 
```

如果控制器动作是

```
 [HttpPost]
    public ActionResult Edit(ContainerClassmodel)
    {
         return null;
    } 
```

谁能告诉为什么默认模型绑定器无法从标签映射列表成员，即

```
<select id="Members" name="Members" multiple="multiple" >
 <option id="Members[0].Id" selected="selected" name="Members[0].Id" value="9b1ea01c-6dad-470d-a6c1-a0f5009ac069">Member One</option>
<option id="Members[1].Id" selected="selected" name="Members[1].Id" value="adf1dbda-9020-45b7-abd7-a0f5009a9b30">Member two</option>
</select> 
```

请注意，已选择所有值。

而以下作品

```
 <input type="hidden" name="Members[0].Id" value="9b1ea01c-6dad-470d-a6c1-a0f5009ac069" />
 <input type="hidden" name="Members[1].Id" value="adf1dbda-9020-45b7-abd7-a0f5009a9b30" /> 
```

老实说，我知道为什么它不起作用:(因为如果我查看 http 标头以防选择提交的数据对于默认模型绑定器来说是不够的。

```
Members:9b1ea01c-6dad-470d-a6c1-a0f5009ac069
Members:adf1dbda-9020-45b7-abd7-a0f5009a9b30 
```

谁能告诉标签内要更改什么，以便提交的数据是

```
Members[0].Id:9b1ea01c-6dad-470d-a6c1-a0f5009ac069
Members[1].Id:adf1dbda-9020-45b7-abd7-a0f5009a9b30 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T15:46:50.397

使用选择列表时，您的模型中需要两件事。

1.  要填充选择列表的集合。
2.  回发到服务器时保存所选项目值的属性。

强类型版本如下所示：

```
@Html.ListBoxFor(x=> x.Id, IEnumerable<SelectListItem>) 
```

如果要手动指定名称，可以这样做：

```
@Html.ListBox("Id", IEnumerable<SelectListItem>) 
```

由于用户可以选择多个选项`Id`，因此需要是您的选择列表值所在类型的数组。如果它们是整数，那么您需要`Id`像这样`public int[] Id {get; set;}`：

提交表单时，控件仅提交其值，您的列表框不会发回足够的数据将其绑定回原始`Members`列表。如果由于某种原因您需要额外的信息，您将不得不使用返回的 id。

**编辑以回应第一条评论：**

希望我能正确理解你。

如果您想通过 AJAX 查询该选择框的更多选项，您可以将 AJAX 端点设置为另一个返回 JSON 的操作。您真正需要发回的只是一组键/值对（用于选项值和文本）。然后使用 JavaScript 将选项附加到原始列表框。如果您询问序列化一个`IEnumerable<SelectListItem>`，不确定它是否会正确序列化。

# c# - 当名称不以 [] 结尾时，MultipartFormDataContent 不会发布 StringContent 项

> ID：13124753
> 
> 赞同：8
> 
> 时间：2012-10-29T15:34:31.417
> 
> 标签：c#, httpclient

考虑以下代码：

```
 MultipartFormDataContent MPFD = new MultipartFormDataContent();
  MPFD.Add(new StringContent(0.ToString()), "doesNotWork");
  MPFD.Add(new StringContent(0.ToString()), "works[]");
  HttpClient apiClient = new HttpClient();
  var Result = apiClient.PostAsync(testurl, MPFD).Result;
  Console.WriteLine("Response: " + Result.Content.ReadAsStringAsync().Result); 
```

然后将此数据发布到通用处理程序，该处理程序执行以下操作：

```
context.Response.ContentType = "text/plain";
foreach (string key in context.Request.Form.AllKeys) {
  context.Response.Write(key + ": " + context.Request.Form[key] + Environment.NewLine);
} 
```

如果我这样做，只会发布以“[]”结尾的名称，但我还需要能够发布没有“[]”的名称。知道为什么会发生这种行为以及如何解决它吗？

**注意**：使用 a 时`FormUrlEncodedContent`，不带 [] 的名称会被发布。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-09-15T14:05:32.870

```
form.Add(new StringContent(Opts.DataType), "\"fieldname\"");
form.Add(new ByteArrayContent(mycontent, 0, mycontent.Length), "\"filename\"", "filename.csv"); 
```

似乎没有必要，但它确实有效。

# google-chrome-extension - blob 没有出现在 depthjs 上

> ID：13124754
> 
> 赞同：0
> 
> 时间：2012-10-29T15:34:35.473
> 
> 标签：google-chrome-extension, kinect, openkinect

我已经在 mac(10.7.4) 上的 chorme (22.0) 上安装了插件。kinect 可以在 OpenNI 示例中找到，当我进入测试页面[http://steventking.com/gesture_interface_site/BasicDemo.html](http://steventking.com/gesture_interface_site/BasicDemo.html)时，它显示 kinect 和插件都已到位。但看不到手。

该 blob 未显示在任何页面上。当我检查 background.html 它给了我这个错误：

```
Refused to execute inline script because it violates the following Content Security Policy directive: "script-src 'self' chrome-extension-resource:". 
```

Depthjs 似乎正在运行，

```
depthjspluginAPI: start DepthJS backend.js:142
depthjsplugin::RunDepthJS backend.js:142
depthjsplugin::RunDepthJS - thread running? backend.js:142
Successfully acquired Kinect event monitor from plugin! backend.js:145
Init complete root.js:48
OpenNIBackend: start openni backend thread undefined:1
event port connected chrome.js:14 
```

但是我不断收到这个断言失败的错误，这有点超出我的理解。

```
Assertion failed: chrome.js:13
(anonymous function) chrome.js:13
chrome.Event.dispatchToListener event_bindings:379
chrome.Event.dispatch_ event_bindings:365
chrome.Event.dispatch event_bindings:385
chromeHidden.Port.dispatchOnConnect 
```

我感觉 kinect 在红灯亮时工作（就像我运行那些 openNI 样本时一样），但是由于斑点没有出现，我无法追踪我的手或做任何事情。有人在这里有类似的问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T14:10:06.610

您发布的错误消息告诉您 Chrome 扩展程序中不允许内联脚本块。查看[http://developer.chrome.com/extensions/contentSecurityPolicy.html](http://developer.chrome.com/extensions/contentSecurityPolicy.html)以了解有关限制的一些详细信息，以及如何调整扩展程序以在清单版本 2 和内容安全策略的勇敢新世界中运行。特别是，[关于内联脚本的部分](http://developer.chrome.com/extensions/contentSecurityPolicy.html#JSExecution)应该会派上用场。

# javascript - 主干中的触发器和事件有什么区别？

> ID：13124755
> 
> 赞同：16
> 
> 时间：2012-10-29T15:34:36.257
> 
> 标签：javascript, backbone.js, marionette

在 Backbone Marionette 中，您可以使用触发器和事件执行极其相似的操作：

触发器：

```
return Marionette.Layout.extend({
    triggers: {
        'click .something': 'view:handleClickSomething'
    },

    initialize: function(){
        this.bindTo(this, 'view:handleClickSomething', this.handleClickSomething);
    },

    handleClickSomething: function(){}
} 
```

与事件：

```
return Marionette.Layout.extend({
    events: {
        'click .something': 'view:handleClickSomething'
    },

    handleClickSomething: function(ev){}
} 
```

事件方式似乎是一种更快更简单的方式，也更容易获得实际事件本身（因为它是自动传递的）。有理由使用其中一个吗？他们的预期用例是什么？很难在网上找到很多关于这个的信息（除了试图了解带注释的来源）......

（我刚刚发现了 events 方法，到目前为止，我一直在为所有事情使用触发器，因为我认为这是唯一的方法）

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-29T20:12:34.680

您的第一个示例是触发器使用不当。触发器旨在作为从视图触发事件的快捷方式，以便外部对象可以捕获事件，而不是触发事件的视图。

[http://lostechies.com/derickbailey/2012/05/15/workflow-in-backbone-apps-triggering-view-events-from-dom-events/](http://lostechies.com/derickbailey/2012/05/15/workflow-in-backbone-apps-triggering-view-events-from-dom-events/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-10-02T01:14:17.577

如果我们将`events`和都`triggers`视为 Javascript 对象，那么区别如下：

*事件示例：*

```
events: {
    'click hi': 'alertTitle',
},

alertTitle: function () {
    alert('Title!!');
} 
```

在每个事件中，key ( `'click h1'`) 始终是一个 DOM 事件和一个 jQuery 选择器，**value ( `'alertTitle'`) 始终是回调函数的名称，存在于视图中。**

*触发示例：*

```
triggers: {
    'click h1': 'alert:title'
}, 
```

在每个触发器中，key 仍然是一个 DOM 事件和一个 jQuery 选择器，**但 value ( `'alert:title'`) 始终是您要触发的新事件的名称。**该事件处理程序可以在任何地方定义，不一定在当前视图内。

触发器在以下情况下很有用：

1.  您希望您的 DOM 事件触发 Marionette 事件，而不是调用回调函数；
2.  您希望 Marionette 事件的处理程序位于当前视图之外的某个位置，例如其父视图。在这种情况下，此视图的父级可以具有`onChildviewAlertTitle()`处理此`alert:title`事件的功能。

# java - Java：滚动时填充文本区域（动态更新）

> ID：13124756
> 
> 赞同：1
> 
> 时间：2012-10-29T15:34:41.057
> 
> 标签：java, swing, dynamic

我有一个非常大的内存值数组（0-64k），需要打印到窗口，但更新时间非常长。

是否可以在用户滚动时更新（打印）行？

我试图避免使用自定义按钮来调用更新方法，并希望使用内置的滚动条。

附言。我没有太多使用 Swing，因为我的学校提供​​了一个基本版本，所以如果我错过了实现这一点的简单方法，我深表歉意。我认为我目前拥有的任何代码都不会有帮助，但请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T17:51:54.787

@ignis 是正确的`JTable`and `JList`; 两个视图都使用[*享元模式*](http://en.wikipedia.org/wiki/Flyweight_pattern)进行[渲染](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#renderer)。您还需要[分析](https://stackoverflow.com/q/2064427/230513)您的代码以查看出现任何延迟的位置。

# android - smali：处理参数化类

> ID：13124758
> 
> 赞同：0
> 
> 时间：2012-10-29T15:34:45.193
> 
> 标签：android, smali

假设我有一个`List<E>`，我想调用它的`add(E object)`方法，而我的列表实际上是一个`List<String>`，我应该如何在 smali 中表示这个调用？

应该是

```
invoke-interface {v1, v2}, Ljava/util/List;->add(Ljava/lang/Object;)Z 
```

或者

```
invoke-interface {v1, v2}, Ljava/util/List;->add(Ljava/lang/String;)Z 
```

或者是其他东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T16:58:21.873

它应该是第一个。

```
invoke-interface {v1, v2}, Ljava/util/List;->add(Ljava/lang/Object;)Z 
```

如有疑问，您可以在 java 中尝试您想要的，编译它，dx 它，然后 baksmali :)

# css - HTML 部门位置

> ID：13124765
> 
> 赞同：0
> 
> 时间：2012-10-29T15:35:17.437
> 
> 标签：css, html

我正在为我的网站做一个新设计。我想我应该做不同的盒子。他们所有的`borders`和`backgrounds`必须相同，但他们的`heights`和`widths`必须不同。所以，我创建了一个 CSS 类。

```
.box
{
    background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/Pgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgdmlld0JveD0iMCAwIDEgMSIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+CiAgPGxpbmVhckdyYWRpZW50IGlkPSJncmFkLXVjZ2ctZ2VuZXJhdGVkIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjAlIiB5MT0iMCUiIHgyPSIxMDAlIiB5Mj0iMCUiPgogICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iIzAwNWFmZiIgc3RvcC1vcGFjaXR5PSIwLjUiLz4KICAgIDxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iIzAwNWFmZiIgc3RvcC1vcGFjaXR5PSIwLjUiLz4KICA8L2xpbmVhckdyYWRpZW50PgogIDxyZWN0IHg9IjAiIHk9IjAiIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIGZpbGw9InVybCgjZ3JhZC11Y2dnLWdlbmVyYXRlZCkiIC8+Cjwvc3ZnPg==);
    background: -moz-linear-gradient(left,  rgba(0,90,255,0.5) 0%, rgba(0,90,255,0.5) 100%);
    background: -webkit-gradient(linear, left top, right top, color-stop(0%,rgba(0,90,255,0.5)), color-stop(100%,rgba(0,90,255,0.5)));
    background: -webkit-linear-gradient(left,  rgba(0,90,255,0.5) 0%,rgba(0,90,255,0.5) 100%);
    background: -o-linear-gradient(left,  rgba(0,90,255,0.5) 0%,rgba(0,90,255,0.5) 100%);
    background: -ms-linear-gradient(left,  rgba(0,90,255,0.5) 0%,rgba(0,90,255,0.5) 100%);
    background: linear-gradient(to right,  rgba(0,90,255,0.5) 0%,rgba(0,90,255,0.5) 100%);
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#80005aff', endColorstr='#80005aff',GradientType=1 );

    border:thick white groove;
    border-bottom-color:gray;
    border-right-color:gray;
    border-top-left-radius:1em;
    border-bottom-right-radius:1em;

} 
```

* * *

我将 HTML 代码作为 -

```
 <body onload="load()">

    <center>

        <div style="width:1120px">
            <img src="images/blu-logo.png" style="float:left;">     
            <div class="box" style="width:900px;height:50px;float:right;margin-top:100px;">
            </div>
        </div>

        <div class="box" style="width:900px;height:500px;">
            <p>Sample text</p>
        </div>          
    </center>

</body> 
```

* * *

我不知道如何，但是当我在浏览器中查看文件时发生了一些疯狂的事情`<div>`，因为应该在另一个**之下**的除法（）实际上与第一个相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T15:39:30.603

我认为您的问题与您的浮动元素有关。

尝试将 css 属性“overflow:auto”添加到包含两个浮动元素的 DIV 上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T15:40:23.527

Clear the floated div/img - you can add an empty div with a style attribute or give it a clear class to use for other elements (br is an option as well)

# php - 数据库驱动导航 PHP & MySQL

> ID：13124772
> 
> 赞同：0
> 
> 时间：2012-10-29T15:35:41.513
> 
> 标签：php, mysql, navigation

> **可能重复：**
> [如何将一系列父子关系转换为层次树？](https://stackoverflow.com/questions/2915748/how-can-i-convert-a-series-of-parent-child-relationships-into-a-hierarchical-tre)

我正在开发一个网络应用程序。并想使导航数据库驱动。多级导航，顺便说一句。现在，棘手的部分是，我只想使用一张桌子。我查看、阅读和搜索，但找不到答案。

我的表结构是

```
ID | NAME | LINK | ALC | PARENT_ID |

0    Home   #      0     0

1    Ops    #      0     0

2    ops1   #      0     1

3    ops2   #      0     1 
```

问题是我如何在数组中获取数据库内容，以便能够使用子类别创建列表标签

```
<ul>
    <li>HOME</li>
    <li>OPS
        <ul>
            <li>ops1</li>
            <li>ops2</li>
        </ul>
    </li>
</ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T15:41:50.933

**It's called recursive functions** and they call themselves. **Proof of concept**:

```
function printUL($parentID = 0){
    // select elements with PARENT_ID = $parentID (or PARENT_ID = NULL if 0)
    if(!$children){
        return;
    }
    // now print stuff
    echo '<ul>';
    foreach($children as $child){
        echo '<li>';
            echo $child['NAME']; // change as you need
            printUL($child['ID']); // functions calls itself to dig deeper
        echo '</li>';
    }
    echo '</ul>';
}
// call for root element
printUL($parentID); 
```

*Hope it makes sense. Change it to your needs.*

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-29T15:42:12.850

```
function myTree($parent_id) {
   $sql = mysql_query("SELECT category_id, category_name 
                       FROM categories 
                       WHERE parent_id='$parent_id'");
   if(mysql_num_rows($sql) != 0) {
       echo '<ul>'; 
       while($row = mysql_fetch_array($sql)) {
           echo '<li>' . $row['category_name'];

           myTree($row['category_id']);

           echo '</li>';
       }
       echo '</ul>';
   }
}

echo '<div>';

myTree(0);

echo '</div>'; 
```

# c# - 在 OneWay 绑定上使用 ConvertBack 函数而不是 Convert 函数

> ID：13124776
> 
> 赞同：2
> 
> 时间：2012-10-29T15:35:51.307
> 
> 标签：c#, wpf, binding

我有一个转换器，它接收一个 IEnumerable 并返回一个包含多行的字符串。convertback 函数则相反，它接收一个包含多行的字符串并返回一个列表。我在几个地方使用它，效果很好。

我的问题是，我现在有我想反向使用 Convert 和 ConvertBack 函数的位置（例如，在 OneWay 绑定中，它使用 ConvertBack 函数） 这在 XAML 中是否可行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T15:40:24.250

我不知道这是否可能，但即使可能，我也不会做这样的事情。

转换器用于将绑定值从一个值转换为另一个值，如果您更改它，那么您将更改 WPF 中的部分核心功能，这将使其他开发人员在未来非常困惑。

相反，我只会制作第二个转换器，为您进行反向转换。

如果转换时间很长，我有时会把重复的代码拉出来放在转换器类文件中自己的方法中，让两个转换器都调用那个方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-29T15:50:39.027

创建这样的转换器是可能的，例如：

```
class ListStringConverter : IValueConverter
{
   public bool IsListToString { get; set; }

    public ListStringConverter()
    {
        IsListToString = true;
    }

    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        return IsListToString ? FromListToString(value) : FromStringToList(value);
    }

    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        return IsListToString ? FromStringToList(targetListItem) : FromListToString(targetListItem);
    }

    public object FromListToString(object list)
    {
       .... // Conversion Logic
    }

    public object FromStringToList(object myString)
    {
       .... // Conversion Logic
    }

} 
```

在 XAML 中，您可以像这样声明它

```
<ListStringConverter x:Key="StringToListConverter " IsListToString ="False" /> 
```

# javascript - 从事件处理程序调用对象函数

> ID：13124777
> 
> 赞同：0
> 
> 时间：2012-10-29T15:35:52.070
> 
> 标签：javascript, extjs

我在下面的代码中收到“未捕获的 ReferenceError：searchPerson 未定义”。

如何从“onTriggerClick”事件处理程序中调用“searchPerson”？

```
Ext.define('App.view.search.Base', {
extend: 'Ext.window.Window',
layout: 'vbox',
items:[
    {
        xtype: 'container',
        height:30,
        layout: 'hbox',
        width: '100%',
        items: [
            comboChoice= Ext.create('Ext.form.ComboBox', {
                width: 150,
                padding: '0 20 0 0'
            }),
            edPerson= Ext.create('Ext.form.field.Trigger', {
                triggerCls: 'x-form-search-trigger',
                flex: 1,
                onTriggerClick: function() {

                    **searchPerson(); //it does not work this way**

                }
            })
        ]
    },
    {
        xtype: 'grid',
        flex: 1,
        width: '100%',
        columns: [
            { text: 'Name',  dataIndex: 'name' },
            { text: 'Email', dataIndex: 'email', flex: 1 },
            { text: 'Phone', dataIndex: 'phone' }
        ]
    }
],
searchPerson: function() {
    alert('done!');
}
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T09:52:13.953

我必须访问顶部容器（App.view.search.Base），这是我想要的对象。所以，首先我为这个对象设置了一个别名：

```
Ext.define('App.view.search.Base', {
  extend: 'Ext.window.Window',
  layout: 'vbox',
  alias: 'widget.searchbase', 
```

其次，在事件处理程序中访问此对象：

```
this.up('searchbase').searchPerson(this); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T10:38:33.783

最好这样做，这样您就不必依赖任意查询：

```
Ext.define('App.view.search.Base', {
    extend: 'Ext.window.Window',
    layout: 'vbox',

    initComponent: function() {
        this.items = [{
            xtype: 'container',
            height: 30,
            layout: 'hbox',
            width: '100%',
            items: [Ext.create('Ext.form.ComboBox', {
                width: 150,
                padding: '0 20 0 0'
            }), Ext.create('Ext.form.field.Trigger', {
                triggerCls: 'x-form-search-trigger',
                flex: 1,
                onTriggerClick: Ext.Function.bind(this.searchPerson, this)
            })]
        }, {
            xtype: 'grid',
            flex: 1,
            width: '100%',
            columns: [{
                text: 'Name',
                dataIndex: 'name'
            }, {
                text: 'Email',
                dataIndex: 'email',
                flex: 1
            }, {
                text: 'Phone',
                dataIndex: 'phone'
            }]
        }];
        this.callParent();
    },

    searchPerson: function() {
        alert('done!');
    }
}); 
```

# c++ - MFC画圆

> ID：13124780
> 
> 赞同：2
> 
> 时间：2012-10-29T15:36:00.760
> 
> 标签：c++, mfc

我刚开始学习MFC。我需要画一个圆圈。如果我使用 OnPaint() 它可以工作。我应该怎么做它会在背景上绘制？这是正确的功能还是我应该改变它？

```
void Cvaja5Dlg::OnRButtonDown(UINT nFlags, CPoint point)
{
    CPaintDC dc(this);
    dc.Ellipse(0,0,500,500);
    CDialogEx::OnRButtonDown(nFlags, point);
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-29T15:49:55.690

不，Windows 绘画的工作方式不同。这是相当异步的。

1.  [`CPaintDC`](http://msdn.microsoft.com/en-us/library/a48eab8d%28v=vs.80%29.aspx)只能在[`WM_PAINT`](http://msdn.microsoft.com/en-us/library/ms534901%28v=vs.80%29.aspx)处理程序内部使用，因为它执行`BeginPaint()`/`EndPaint()`调用。
2.  所有绘图通常应以覆盖[`CWnd::OnPaint()`](http://msdn.microsoft.com/en-us/library/01c9aaty%28v=vs.80%29.aspx)/[`CView::OnDraw()`](http://msdn.microsoft.com/en-us/library/e6htdchf%28v=vs.80%29.aspx)方法执行。
3.  在用户输入时（例如按下鼠标右键），您的处理程序将更改您的类的状态，例如设置一些 bool 标志`isRightButtonDown`并调用[`Invalidate()`](http://msdn.microsoft.com/en-us/library/ax04k970%28v=vs.80%29.aspx)以启动窗口的异步重绘。要强制同步重绘，您可以在失效后使用[`UpdateWindow()`](http://msdn.microsoft.com/en-us/library/6yz8we9y%28v=vs.80%29.aspx)or 。[`RedrawWindow()`](http://msdn.microsoft.com/en-us/library/0fdz8ey6%28v=vs.80%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-23T12:52:37.150

如果你想使用 OnRedraw() 方法重新绘制是好的......在 BeginPaint() 和 endPaint(); 使用 CPAINTDC 创建油漆处理程序的结构

# c# - 在 Google 电子表格 API 中添加一个简单的标题行

> ID：13124784
> 
> 赞同：3
> 
> 时间：2012-10-29T15:36:14.003
> 
> 标签：c#, google-spreadsheet-api

如何通过 Google 电子表格 API 在以编程方式创建的工作表上添加简单的标题行？很难理解他们的文档，它只提到了如何在已经创建的标题行上添加一行。如果第一次使用基于单元格的提要添加标题行，

```
// Fetch the cell feed of the worksheet.
  CellQuery cellQuery = new CellQuery(worksheet.CellFeedLink);
  CellFeed cellFeed = service.Query(cellQuery);

  // Iterate through each cell, updating its value if necessary.
  foreach (CellEntry cell in cellFeed.Entries)
  {
    if (cell.Title.Text == "A1")
    {
      cell.InputValue = "name";
      cell.Update();
    }
    else if (cell.Title.Text == "B1")
    {
      cell.InputValue = "age";
      cell.Update();
    }
  } 
```

此代码不起作用，因为 cellFeed.Entries 为 0，因此控制永远不会进入 for 循环。我已经添加了一个包含 (4) 行和 (10) 列的工作表。但是如何先输入一个简单的标题行（作为一列），然后再输入其他行（作为这些列中的值）？我知道已经问了几个问题，但没有一个问题有答案，这太令人沮丧和难以理解这个 API 实现起来如此复杂是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T12:58:31.873

答案是 ：

```
 CellQuery cellQuery = new CellQuery(worksheet.CellFeedLink);
        CellFeed cellFeed = _SpService.Query(cellQuery);

        CellEntry cellEntry = new CellEntry(1, 1, "name");
        cellFeed.Insert(cellEntry);
        cellEntry = new CellEntry(1, 2, "age");
        cellFeed.Insert(cellEntry);
        cellEntry = new CellEntry(1, 3, "address");
        cellFeed.Insert(cellEntry); 
```

然后可以根据与上述标题行匹配的文档在下面添加行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T12:54:07.373

默认情况下，单元格查询不返回空单元格。您需要覆盖此设置。

像这样编辑您的代码：

```
CellQuery cellQuery = new CellQuery(worksheet.CellFeedLink);
cellQuery.ReturnEmpty = ReturnEmptyCells.yes;
CellFeed cellFeed = _SpService.Query(cellQuery); 
```

# linux - 将 Sqsh 与 FreeTDS 一起使用有什么优势？

> ID：13124785
> 
> 赞同：2
> 
> 时间：2012-10-29T15:36:20.713
> 
> 标签：linux, bash, command-line, freetds, sqsh

这里的新手问题：我有 FreeTDS 工作并从 mint linux vm 查询 Microsoft SQL server 2008 r2 db，读取 inter-webs，主要是 stackoverflow，有人提到我也应该将 sqsh 与 FreeTDS、 [SQSH 和](https://stackoverflow.com/questions/149395/what-are-some-ways-of-accessing-microsoft-sql-server-from-linux)FreeTDS 一起使用，我不明白什么 sqsh，除了我猜是某种类型的 cli 之外，添加了因为我可以使用 FreeTDS 访问数据库 .. 任何信息来清除这个将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T19:04:37.733

我过去经常使用sqsh。这真的很有帮助。

如果您使用过 sybase/mSServer isql，您就会知道这真的很痛苦。没有对命令行编辑和历史记录的真正支持。SQSH 最初的创建是为了提供一个类似于 shell 的命令行环境来与您的数据库进行交互。从数据库中提取数据并保存到文件中非常容易使用。然后，您可以根据需要编辑文件，并使用 bcp 或其他方法将数据加载到新表中。

SQSH shell 支持环境变量、文件重定向（我不记得在内部使用输入方向，但能够编写

```
select c1, c2, c3,c7, c120 from customer > customerFile 
```

非常方便。

请在左侧菜单的功能链接下查看[http://www.sqsh.org](http://www.sqsh.org)上的完整功能列表。

```
Commands 
Variables 
Redirection and Pipes 
Aliasing 
Command Substitution 
Backgrounding & Job Control 
SQL Batch History 
Configurable Exit Status 
Inter-Server BCP 
Remote Procedure Calls 
Semicolon "go" 
Simple Scripting 
Flow-of-Control  
Functions  
Multiple Display Styles 
X Windows Support 
Macro Pre-Processing 
Miscellaneous 
Commands 
```

请注意，控制流允许有 1 个查询返回多行结果集，并在每条记录上使用`do`和`while`循环处理。这也支持`if ... elif ..fi`块。我不记得使用过这些功能，但我发现了别名和环境变量，并且重定向为我节省了几个小时。

也就是说，我是一个有动力的用户。文档不会向您提供所有答案，因此需要一些时间进行实验、摸索和审查。

除了阅读过它之外，我对 TDS 没有任何经验。基本上你需要回答的问题是，我是不是 shell 命令行垃圾，我是否愿意花一点时间来学习如何在基于文本的 SQL 客户端中获得命令行功能。

IHTH。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-02T20:23:06.633

TDS（表格数据流）是 Sybase 和 MSSQL 正在使用的本地客户端 - 服务器通信协议，并在 CT_Library 中实现，CT_Library 是一组专有的中间件软件和实用程序。FreeDTS 是 CT-Library 的开源等价物。Sqsh 使用 CT-Library 调用与服务器通信，并且可以与 Sybase CT-Library 或 FreeTDS 构建/链接。Sybase CT-Library 仅支持 TDS 5.0 及以下版本，而 MSSQL 现在使用 TDS 7.0 或 8.0 版本。FreeTDS 也支持这些协议版本。所以如果想让sqsh能够连接MSSQL，就需要FreeTDS作为中间件层。FreeTDS 还附带了一些基本实用程序，可用于连接到服务器并执行一些 SQL 语句（fisql、tsql）。然而，Sqsh 提供了更多的功能，比如真正的 shell。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T16:48:12.577

我结合 perl 的 ODBC 模块在 ubuntu 上使用 unixodbc 和 freetds。有时（虽然很少）我使用`isql`快速查询但仅此而已。SQSH 类似于具有更好功能的 isql。查看 SQSH[维基](http://en.wikipedia.org/wiki/Sqsh)

SQSH 比 isql 有更多的功能。但是，我从未遇到过必须广泛使用 isql / sqsh 的用例。不管我有什么，我都是通过 perl 来做的。

# c++ - 我如何将这个 int 数组的一部分复制到 C++ 中的另一个数组中？

> ID：13124790
> 
> 赞同：0
> 
> 时间：2012-10-29T15:36:35.367
> 
> 标签：c++

这是我到目前为止所拥有的：

```
#include <iostream>
#include <string>
using namespace std;

int main()
{
    int size;
    int sizeCopy= 0;
    int *array;

    cin >> size;
    cout << endl;
    cin >> sizeCopy;

    array = new int [size];
    int i = 0;
    int counter = 1;

    while(i<size)
    {
        array[i] = counter;
        ++counter;
        ++i;
    }

    cout << "The array contains: ";
    for(i=0; i<size; i++)
    {
        cout << array[i] << ", ";
    }
    cout << "\n";

    return 0;
} 
```

到目前为止，我创建了一个程序，该程序将要求用户输入数组的大小，以及将在新数组中复制多少个数组元素的大小（即 sizeCopy）。

我设法创建了第一个数组，我希望它是这样的：如果用户输入为 3，则数组将包含 1、2、3。如果用户输入为 10，则数组将包含 1、2、3、4 , 5, 6, 7, 8, 9, 10。

这似乎完美无缺。现在我想将我的 int 数组的一部分复制到另一个，但它比这更复杂一些。假设第一个数组（大小）的用户输入是 10，而 sizeCopy（要复制到第二个数组中的元素数量）是 2，那么我希望第二个数组是：1、2。这还没有结束不过，我希望一段时间后将整个数组复制到第二个数组中。我想要这样的东西：

*   1, 2
*   收到第 1 部分
*   1、2、3、4
*   收到第 2 部分
*   1、2、3、4、5、6
*   收到第 3 部分
*   1、2、3、4、5、6、7、8
*   收到第 4 部分
*   1、2、3、4、5、6、7、8、9、10
*   收到第 5 部分

程序中包含“收到的部分..”。然后它就会完成。

如果用户的第一个数组的大小是 4，而 sizeCopy 是 2，那么我想要这样的东西：

*   1, 2
*   收到第 1 部分
*   1、2、3、4
*   收到第 2 部分

我可以就如何完成这项工作获得一些帮助吗？我想我可以管理如何将整个数组复制到另一个数组中，或者至少是其中的一部分。但是一个人怎么做我想做的事呢？我想我需要循环，但我不知道更多。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T15:38:48.897

tl;博士我将回答标题中的问题。

`std::vector`与构造函数一起使用

```
template< class InputIt >
vector( InputIt first, InputIt last, 
    const Allocator& alloc = Allocator() ); 
```

或者[`std::copy`](http://en.cppreference.com/w/cpp/algorithm/copy)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-29T15:42:11.933

I don't like the C++ way(of std::copy) - i rather use `memcpy()` or `memmove()`. I feel more *in* _control_ `</sarcasm>`

# html - CSS中的定位 - 错误的对齐方式

> ID：13124798
> 
> 赞同：1
> 
> 时间：2012-10-29T15:36:57.903
> 
> 标签：html, css

我在这里过得很艰难。我有两段单独的代码运行良好，但是当我把它们放在一起时，一切都出错了。

[这是我的所见即所得代码](http://jsfiddle.net/bzjW7/)

[这是我尝试将其放入我的字段框的时候](http://jsfiddle.net/Vh26b/3/)

```
<div class="field_box">
  <label field_id="None" for="position">Test2</label>
  <div class="fieldwrapper">
    <textarea class="uEditorCustom" name="textarea"></textarea>
  </div>
</div> 
```

我尝试了几件事，但没有任何运气。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T16:31:28.587

我不认为你做错了什么。但是编辑器正在将 CSS 加入到与您自己的不兼容的组合中。

[http://jsfiddle.net/sCATj/](http://jsfiddle.net/sCATj/)

我将这两行添加到 CSS 的底部，我认为结果（至少在 FF 中）就是您所追求的。

```
.fieldwrapper {overflow:hidden;}
.uEditor { float:right }    ​ 
```

# bdd - 测试人员是否应该使用与开发人员相同的工具进行 BDD 式测试？

> ID：13124799
> 
> 赞同：1
> 
> 时间：2012-10-29T15:36:59.243
> 
> 标签：bdd, specflow, fitnesse, acceptance-testing, robotframework

我没有使用 BDD 的经验，但经过一些研究，我发现它在我们的项目中非常有用。

这个想法是开发人员希望为他们的单元测试创​​建 BDD 样式的测试（使用 SpecFlow），我们的测试团队需要一些地方来放置自动化的 Web UI 测试（使用 Selenium）以及 Web 服务集成测试。

所以问题是：在测试人员和开发人员的测试之间共享相同的对象是否更好，或者将这两个世界分开可以让我们更好地进行测试管理？

SpecFlow 似乎不是我们的测试人员的完美解决方案（正在考虑机器人框架或 Fitnesse），但使用通用工具和库来编写不同类型的测试似乎是合理的。

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T20:03:18.310

*我认为您会发现两个测试系统之间的重叠可能意味着共享的内容比您预期的要少。*

首先让我们考虑一下 BDD 下的开发周期。我们从一个新的特性定义开始，然后开发一些场景和代码来支持它。事实上，如果我们这样做得当，每个 Specflow 场景都是一个业务级别测试，为了推动该单一业务级别测试的开发，您可能还开发了许多较低级别的单元级别测试。我听说这个过程被描述为各种各样的事情（包括“七步过程”），但重要的是它是一个循环中的一个循环，您完成多个[Red Green Refactor](http://www.jamesshore.com/Blog/Red-Green-Refactor.html)单元测试周期以通过业务级别循环将业务级别场景从红色变为绿色。

到目前为止，还没有必要测试 UI 层，特别是如果我们在 MVC/MVVM 或类似的分层代码库中工作。其实这就是我建议我的客户工作的方式，不需要测试点击是否调用命令，我们假设我们不想浪费时间测试我们正在工作的框架，所以我们只是调用命令本身.

但是您提到 Selenium，所以我假设您正在使用它来驱动您与浏览器的交互，因此我们还假设您也想在 UI 级别进行一些测试。此代码跨越多个域（请参阅[Who's domain is it anyway](http://dannorth.net/2011/01/31/whose-domain-is-it-anyway/)）为您提供高级概念，例如您现在想要重用的登录和常用流程。此代码尚不存在，因为它与浏览器的交互与您的其他代码无关。

所以我想你会发现你最终会得到两个测试代码库，一个用于单元测试和业务级别规范以单独测试事物，即与 Mocks 或*整个系统的一部分*一起保存的代码块。

另一个包含 Selenium 测试与*完整系统*的交互，它用于集成测试和系统测试。

使用 SpecFlow 规范仍然会给你一些非常好的东西，比如描述你的系统的通用语法，但是如果你决定使用它，我认为它不会被绑定到相同的代码。

# jquery-ui - Jquery Multi-Select 对于非常多的选项

> ID：13124801
> 
> 赞同：2
> 
> 时间：2012-10-29T15:37:05.790
> 
> 标签：jquery-ui, jquery, jquery-autocomplete, jquery-select2

考虑用户必须从数千个值的列表中选择多个值的情况。我最接近可用工具的是[http://quasipartikel.at/multiselect/](http://quasipartikel.at/multiselect/)

主要问题是由于用户必须从中选择的大量数据。我目前使用的方法是用户必须在文本框中输入第一个字符，然后应显示以第一个字符开头的所有值以进行多选。（因此过滤到一个相当大的值列表）

问题是即使值的数量如此之大，重新加载多选选项也需要 5-15 秒。但是一旦加载了值，javascript 过滤就会处理其余的，因为用户输入了后续字符。

关于解决这种情况的任何其他方法的任何建议？？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T15:42:10.523

Instead of using a multiselect box that is pre-populated use [jQueryUI Autocomplete](http://jqueryui.com/autocomplete/) to filter the list server side and only return matches to the client (similar to the way the tag selection works on StackOverflow).

There is a good example of selecting multiple values here [http://jqueryui.com/autocomplete/#multiple-remote](http://jqueryui.com/autocomplete/#multiple-remote)

You can then save the results of the selections in the same way you would process a multiselect.

To implement a hybrid approach where the first letter fetches terms from the server and then afterwards filters from those results, you could use the following (please note that this is completely untested):

Add a global var to hold your results

```
var results_cache = []; 
```

Use a hybrid source in your `autocomplete`

```
source: function( request, response ) {
    // get the first letter of your search term
    var letter = request.term.substring(0,1);
    // check to see if we already have results for this letter
    if (!results_cache[letter]){
        // no results, fetch via AJAX
        $.getJSON( "search.php", { term: request.term }, 
            function(data){ 
                // cache results
                results_cache[letter] = data;
                // filter results (in case we have more than just 1 character in the term)
                response($.ui.autocomplete.filter(data, request.term));
            }
        );
    } else {
        // we already have data for this letter, just filter the results from the cache
        response($.ui.autocomplete.filter(results_cache[letter], request.term));
    }
},
search: function() {
    // make sure we have at least 1 character for the term
    if (!this.value) return;
    var term = this.value;
}, 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T15:41:54.087

The following were helpful:

**First,** filter the values based on certain input parameters, before selecting the final large size input. **Secondly,** increasing the limit from one character to multiple before the jquery select values are loaded. This shall limit the number of values further, but the user shall have to be aware of the multiple character input limit

But [http://quasipartikel.at/multiselect/](http://quasipartikel.at/multiselect/) still feels the best avaliable option out there.

# function - @IsAgentEnabled 的 Xpages 版本？

> ID：13124806
> 
> 赞同：1
> 
> 时间：2012-10-29T15:37:16.833
> 
> 标签：function, xpages

我目前将 Notes 应用程序升级到 Xpages。该应用程序使用@IsAgentEnabled 隐藏/显示按钮集以启用/禁用代理。

如果@IsAgentEnabled 不可用，XPage 的执行方式是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T16:48:40.530

您可以使用这种代码和平设置可见属性

```
database.getAgent("agentname").isEnabled() 
```

# html - div元素中的灵活元素

> ID：13124807
> 
> 赞同：1
> 
> 时间：2012-10-29T15:37:19.090
> 
> 标签：html, css

我有这个代码

```
 <div class="search-box-wrapper">                
                <div class="search-box">
                    <span class="search-lbl">Search</span>
                    <span><input type="submit" name="search" value="Find" class="search-btn" /></span>
                    <span><input class="search-text" type="text" name="lookingfor" value=" " /></span>                        
                </div>                
        </div> 
```

如何制作`{input type="text"}`尺寸灵活的元素？我的意思是`search-lbl`并且`search-btn`将在`type="text"`元素周围，但`search-text`可以改变它的大小。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T15:42:01.790

Aren't you able to give it a width and a height in CSS?

`.search-text{ width: 100px; height: 100px; }>`

Maybe I misunderstood you. For a flexible text input element, check out text-area!

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T15:42:40.540

尝试

```
input[type="text"]
{
width:100%;
} 
```

但是，这可能与所有浏览器都不兼容 - 我可能也误解了@ckarlss0n 可能与文本区域正确。

# matlab - 使用 Graph Cut 算法

> ID：13124808
> 
> 赞同：1
> 
> 时间：2012-10-29T15:37:22.227
> 
> 标签：matlab, graph, computer-vision, vision

我想使用 Graph Cut 算法来标记一些视频立方体。这是我的问题。

据我了解，GraphCut 有一个被称为`D`（每元素成本）的能量函数，以及一个`V`成对的，即两个相邻邻居的成本。现在，我已经处理了视频，并且对设置的内容有所了解`V`（例如欧几里得距离），但是我不知道可以将什么用于能量函数`D`。应该注意的是，我没有训练数据，所以我无法将输入数据与模型或预知分布进行比较以获得`D`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T18:54:59.967

简短的回答是，您需要`D(l,s)`了解网站`s`拥有标签的可能性`l`。如何对此进行建模以及哪些东西可以用于`D`跨越许多研究领域。例如，有很多论文研究`D`了立体声、分割、去噪等的合理性。理解这些问题的一个很好的参考是[原始的 Veksler、Boykov、Zabih](http://www.csd.uwo.ca/faculty/olga/Papers/cvpr98.pdf)论文。一旦你理解了这篇基础论文，你就可以阅读更复杂的作品，这些作品与如何将 Graphcuts 应用于你想要解决的特定问题有关。

# ubuntu - apt-get install hadoop-0.20-fuse - 找不到包

> ID：13124809
> 
> 赞同：3
> 
> 时间：2012-10-29T15:37:23.693
> 
> 标签：ubuntu, hadoop, hdfs, fuse

我需要安装一个“可安装的 HDFS”。环顾四周，我最终得到了几个教程：

*   [https://ccp.cloudera.com/display/CDHDOC/Mountable+HDFS](https://ccp.cloudera.com/display/CDHDOC/Mountable+HDFS)
*   [http://xmodulo.blogspot.de/2012/06/how-to-mount-hdfs-using-fuse.html](http://xmodulo.blogspot.de/2012/06/how-to-mount-hdfs-using-fuse.html)

（和其他类似的）

它们都以`sudo apt-get install hadoop-0.20-fuse`. 但这不起作用。我得到错误：`the package cannot be found`。我还是 Linux 的新手。我怎样才能让我的 Ubuntu 找到这个包？（新安装的 Ubuntu 12.10 LTS。从那以后我唯一做的就是安装和配置 Hadoop 和 HBase。）

我还搜索了一下，发现了这个： [http ://code.google.com/p/hdfs-fuse/](http://code.google.com/p/hdfs-fuse/)

在 README 文件的“如何使用”部分，在可下载的 tar 中，有`sudo apt-get install fuse fuse-libs fuse-devel`在 Debian/Ubuntu 上使用命令安装 FUSE 的说明。那也行不通。README 文件中的说明似乎建议我们需要在安装 HDFS-FUSE 之前安装 FUSE。我也被这个困住了..

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-07-20T04:29:07.660

按照以下步骤安装可挂载的 HDFS：

1.  添加 CDH5 存储库：

    `wget http://archive.cloudera.com/cdh5/one-click-install/trusty/amd64/cdh5-repository_1.0_all.deb`
    `sudo dpkg -i cdh5-repository_1.0_all.deb`.

2.  安装`hadoop-hdfs-fuse`

    `sudo apt-get update`
    `sudo apt-get install hadoop-hdfs-fuse`

3.  挂载你的 HDFS

    `sudo mkdir -p <mount_point>`
    `sudo hadoop-fuse-dfs dfs://<NAMENODE_HOSTNAME>:<PORT> <mount_point>`

现在您的 HDFS 已安装在本地，`mount_point`您可以`ls`在其中查看并使用其他 linux 命令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T20:56:20.127

[从The Apache Software Foundation](http://www.apache.org/dyn/closer.cgi/hadoop/common/)下载一个版本并使用以下教程之一来安装和运行它：[blog.cloudera.com](http://blog.cloudera.com/blog/2011/11/building-and-deploying-mr2/)或[crobak.org](http://www.crobak.org/2011/12/getting-started-with-apache-hadoop-0-23-0)或[hadoop.apache.org](http://hadoop.apache.org/docs/r0.23.0/hadoop-yarn/hadoop-yarn-site/ClusterSetup.html)。我发现这些教程非常有用。祝你好运

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-09T04:13:00.807

在运行 apt-get 之前，您需要安装 CDH3 存储库。

请注意，官方 CDH3 存储库仅适用于 Maverick (10.10) 或更早版本。

如果您愿意，您仍然可以尝试该存储库。

查看更多详细信息：

[http://xmodulo.com/2012/06/how-to-mount-hdfs-using-fuse.html](http://xmodulo.com/2012/06/how-to-mount-hdfs-using-fuse.html)

# jquery - 在 JSF 上下文中使用 JQuery 检查复选框

> ID：13124812
> 
> 赞同：0
> 
> 时间：2012-10-29T15:37:30.260
> 
> 标签：jquery, jsf, checkbox

我只想用 JQuery 检查我所有的复选框。这些复选框是使用 JSF 创建的。

我试过 ：

```
$("input[type=checkbox]").each( 
        function() {              
           $(this).prop('checked', true);
// OR
           $(this).attr('checked', true);
// OR         
           $(this).attr('checked', 'checked');
          alert($(this).attr('id'));
            } 
        ); 
```

没有任何工作...

JSF会是问题吗？这些复选框的值与一些托管 bean 布尔值相关联。

感谢帮助。

PS：我的 alert() 函数正确返回复选框的 id，JQuery 版本为：

> jQuery JavaScript 库 v1.8.1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T15:40:00.520

这应该可以解决问题

```
$(":checkbox").prop('checked',true); 
```

[**演示**](http://jsfiddle.net/bQSYE/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T16:06:32.027

好的，我想我已经理解了这个问题......

当我尝试这段代码时：

```
$(":checkbox").prop('checked',true);
$("input[type=checkbox]").each( 
        function() {          
          alert($(this).prop('checked'));               
        } 
    ); 
```

我总是有`true`价值观，但我看到一些复选框未选中......

所以值改变了，但视觉保持不变。这是因为我使用 JSF 并且它遵循渲染：

![在此处输入图像描述](../Images/d4a8a88af765672f0ffa5eb9e237d5ce.png) ![在此处输入图像描述](../Images/ad02ff21b5ba1a95c01b4487a2b5fa99.png)

这个checkox是由一些CSS背景等组成的......

因此，我必须更改父 div 的 CSS（带背景...），以使这个 checkox**可视化**检查，因为它的值已经设置为 true。

这只是一个视觉问题，而不是价值问题。

谢谢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T15:53:55.053

尝试使用普通 DOM：

```
$("input[type=checkbox]").each(function() { this.checked = true; }); 
```

**也可以看看：**

[使用 jQuery 为复选框设置“选中”？](https://stackoverflow.com/questions/426258/how-do-i-check-a-checkbox-with-jquery-or-javascript)

# c# - 如何定义带有图像的复选框和自定义图标

> ID：13124813
> 
> 赞同：0
> 
> 时间：2012-10-29T15:37:30.480
> 
> 标签：c#, winforms, checkbox

我想创建一个 CheckBox，我可以将自定义图标用于选中和未选中的图标。但也有一个图像而不是文本作为 CheckBox 的主要部分。即，像这样，但是背景图像向左偏移，或者像文本一样可移动，如果 Image 是 Text。

```
box.Image = Image.FromFile("myimage.jpg");

box.CheckStateChanged += new System.EventHandler(Checkbox_CheckStateChanged);
private void Checkbox_CheckStateChanged(CheckBox box, EventArgs e)
        {
            switch (box.CheckState)
            {
                case CheckState.Checked:
                    box.Image = CheckedImage;
                    break;
                case CheckState.Unchecked:
                    box.Image = UnCheckedImage;
                    break;
            }
        } 
```

# vba - 特定于 Excel 64 位的 VBA 宏

> ID：13124815
> 
> 赞同：1
> 
> 时间：2012-10-29T15:37:47.233
> 
> 标签：vba, excel, 64-bit

我想写一些特定于 Excel 64 位的宏。下面的链接说的是一个宏， http: [//msdn.microsoft.com/en-us/library/office/gg264421.aspx](http://msdn.microsoft.com/en-us/library/office/gg264421.aspx)

但它说“#if Win64”：它是否引用了办公版本..？因为用户可以在 Windows 64 位操作系统中安装 Office 32 位 2010。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T16:07:57.010

> 但它说“#if Win64”：它是否引用了办公版本..？因为用户可以在 Windows 64 位操作系统中安装 Office 32 位 2010。

#If...then...#Else 中使用的 Win64 常量是[编译器常量](http://msdn.microsoft.com/en-us/library/office/gg264614.aspx)。如果返回 true，则表明开发环境是 64 位兼容的。这意味着为 32 位环境编写的代码可能存在问题。

通常，您可能会在 32 位 VBA 和 64 位 VBA 之间遇到的唯一冲突是您尝试通过 Declare 调用外部 Dll。如您提供的链接中所述，主要的潜在问题是：

> 在 64 位 Office 中运行旧 VBA 代码的问题是尝试将 64 位加载到 32 位数据类型中会截断 64 位数量。这可能会导致内存溢出、代码中出现意外结果以及可能的应用程序故障。

可能您的旧代码仍然可以工作，但您会进行调整以确保它可以工作。

处理此问题的方法在您提供的链接中进行了描述，您在该链接中使用编译器常量在 #If...then...#Else 结构中提供了正确的 64 位调用方法。

# grid - Susy 非移动优先

> ID：13124818
> 
> 赞同：1
> 
> 时间：2012-10-29T15:37:53.417
> 
> 标签：grid, responsive-design, compass-geolocation, susy-compass

有没有办法让 Compass Susy 从大宽度到移动工作？

我首先了解移动设备以保持文件大小较小等，但从布局的角度来看，肯定构建一个完整的桌面版本并让断点删除宽度较窄的项目是最好的吗？

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T18:20:07.263

是的你可以。实际上，我发现使用移动向上的建筑布局要容易得多，因为这让我在布局之前考虑内容。我认为从绝对最小开始并根据需要在每个步骤中添加是一个更好的过程。也就是说，Susy 将使用您喜欢的任何流程。只需为您的媒体查询使用最大宽度而不是最小宽度。

mixin 接受一个由`at-breakpoint`三部分组成的参数：`$min $layout $max`. 您可以传递除 max-only 之外的任何组合。以与移动优先相同的方式执行此操作，只是减小最大宽度而不是增加最小宽度。susy 默认值实际上是为桌面优先方法设置的。只需添加断点即可！

```
.page {
  @include container;
  @include at-breakpoint(9 40em) { /* a 9-column grid with max-width of 40em */ }
  @include at-breakpoint(6 20em) { /* a 6-column grid with max-width of 20em */ }
} 
```

# email - 使用 Symfony 2 处理 500 人一组发送的数千封电子邮件

> ID：13124819
> 
> 赞同：2
> 
> 时间：2012-10-29T15:38:04.660
> 
> 标签：email, symfony, cron, swiftmailer

我正在使用 Symfony 2.1 框架和 SwiftMailer 开发一个邮件工具。

该工具需要处理数千封电子邮件，但由于 smtp 服务器限制（我无法修改它），因此需要处理 500 封电子邮件。每波之间需要等待几分钟。

我完全不知道该怎么做。

运行该应用程序的服务器位于装有 Apache 和 PHP 5.4 的 Windows 机器上。我可以使用 CRON 任务，但我没有找到关于 CRON 和 Symfony 的任何信息（我发现 Symfony 1.1 并不是最新的）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T15:54:27.573

我会在这里使用 Symfony 的内置命令组件。您可能熟悉 Symfony 附带的普通命令......诸如`app/console generate:bundle`等之类的东西。

您可以使用 ContainerAwareCommand 类来编写自己的。

以下是您需要采取的步骤：

*   保留需要发送的电子邮件队列（可能在数据库表中）
*   创建一个扩展 ContainerAwareCommand 的类，并使命令名称类似于“email:send:partial”
    *   此类应检查数据库中是否存在未发送的电子邮件。如果有的话，它应该发送最多 500 条，然后删除或更新数据库中的记录以反映它们已发送的事实。
    *   顺便说一句，ContainerAwareCommand 当然是容器感知的……这意味着它可以访问 Monolog、Twig 以及最重要的 Doctrine 等服务。因此，您将能够使用`$this->getContainer()->get("doctrine")`.
*   在 cron 中，使用您的邮件服务器提供的间隔（加上一两分钟以考虑执行延迟）设置一个常规作业。这个命令将是`/path/to/symfony/app/console email:send:partial`

那应该能让你到达那里。以下是 ContainerAwareCommand 类的一些参考资料：

[http://symfony.com/doc/2.0/cookbook/console/console_command.html](http://symfony.com/doc/2.0/cookbook/console/console_command.html)

[http://api.symfony.com/2.1/Symfony/Bundle/FrameworkBundle/Command/ContainerAwareCommand.html](http://api.symfony.com/2.1/Symfony/Bundle/FrameworkBundle/Command/ContainerAwareCommand.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T17:33:12.030

[你可以在 Symfony Cookbook 的How to Spool Email](http://symfony.com/doc/current/cookbook/email/spool.html)部分找到这个问题的解决方案。

# ffmpeg - ffmpeg：如何从 rtmp 流式传输到 FLS？

> ID：13124821
> 
> 赞同：2
> 
> 时间：2012-10-29T15:38:04.747
> 
> 标签：ffmpeg, red5

我可以使用该命令从静态 MPEG4 创建 HLS：

```
ffmpeg -i video.mp4 -codec copy -map 0 -f segment -segment_list out.list -segment_time 10 out%03d.ts 
```

我现在正在努力实现这一目标：

实时 RTMP(FME)-------->FFMEG-------------->HLS

![在此处输入图像描述](../Images/150439fc8e8eb480efcd2b67746c7c4c.png)

我试过：

`ffmpeg -i rtmp://127.0.0.1:1935/live/video -codec copy -map 0 -f segment -segment_list out.list -segment_time 10 out%03d.ts`

但出现错误：

> 关闭连接：NetStream.Play.StreamNotFound rtmp://127.0.0.1:1935/live/video：发生未知错误

任何想法如何实现：

RTMP---->FMPEG----->HLS ?

我也试过：

```
ffmpeg -i "rtmp://localhost:1935/live/yarek live=1" -codec copy -map 0 -f segment -segment_list out.list -segment_time 10 out%03d.ts 
```

看起来更好但卡住了：

```
ble-zlib 
```

libavutil 52\. 0.100 / 52\. 0.100 libavcodec 54\. 69.100 / 54\. 69.100 libavformat 54\. 35.100 / 54\. 35.100 libavdevice 54\. 3.100 / 54\. 3.100 libavfilter 3\. 20.106 / 3\. 20.106 libswscale 2\. 1.101 / 2\. 1.101 libswresample 0 . 16.100 / 0\. 16.100 libpostproc 52\. 1.100 / 52\. 1.100 **rtmp server sent error** Metadata: videokeyframe_frequency8.00 avclevel 31.00 videodevice Microsoft LifeCam Cinema 关键字 width 320.00 videodatarate 350.00 presetname 自定义版权创建日期 Mon Oct 29 17:51:08 2012 author videocodecid avc1 avcprofile 66.00 标题高度 240.00 描述等级 帧率 20.00

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-06-21T13:17:53.507

```
ffmpeg -re -i rtmp://127.0.0.1/live/video -vcodec libx264 -vprofile baseline -acodec libmp3lame -ar 44100 -ac 1 -f flv rtmp://127.0.0.1/livepkgr/video 
```

# visual-studio-2010 - 如何在 PC 上显示 Windows Phone 的镜像视图以进行应用演示？

> ID：13124824
> 
> 赞同：2
> 
> 时间：2012-10-29T15:38:12.630
> 
> 标签：visual-studio-2010, windows-phone-7, xna, nokia, windows-phone-7-emulator

我们是一群正在完成开发我们的 windows phone xna 游戏的学生，这是我们第一次使用 windows phone。我们有一个 Lumia 610 用于测试，我们想知道是否有办法将手机上看到的内容镜像到电脑上，以便可以将其发送到投影仪，因为我们的游戏将使用多个触摸区域和加速度计，这很难只用鼠标指针呈现。

替代方案二 - 有没有办法将手机连接到投影仪，也许是 USB 输出的 hdmi、dvi 或 vga？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T09:24:14.317

如果没有自制应用程序，似乎真的没有办法做到这一点，而且其中大多数似乎都不是那么好。

我们是如何为我们的演示解决这个问题的？

好吧，我对这个问题的回答以及在这种情况下对其他任何人的提示是简单地使用笔记本电脑或网络摄像头上的摄像头。然后向下倾斜屏幕并将手机放在摄像头前，如果您将笔记本电脑连接到投影仪，这将向所有人展示玩家所看到的内容。简单的解决方案，但不是您可能立即考虑的，它对我们很有效。

# .htaccess - 从旧域重定向到新域而不扩展

> ID：13124825
> 
> 赞同：1
> 
> 时间：2012-10-29T15:38:15.337
> 
> 标签：.htaccess, mod-rewrite, redirect

我有一个域，我想重定向到一个新域。我希望请求保持不变，但我的以下代码正在向其添加 .php 扩展名。以下代码是我所拥有的：

```
RewriteCond %{HTTP_HOST} ^oldomain.eu [NC]
RewriteRule ^(.*)$ http://newdomain.eu/$1 [L,R=301]
RewriteCond %{HTTP_HOST} ^www.olddomain.eu [NC]
RewriteRule ^(.*)$ http://newdomain.eu/$1 [L,R=301] 
```

当我转到以下网址时：www.oldomain.eu/samplepage 它正在将我重定向到 www.newdomain.eu/samplepage.php

我怎么能防止这个添加 .php 到 url？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T20:01:52.683

这听起来像 mod_negotiation 干扰。尝试添加：

```
Options -Multiviews 
```

高于你的规则。

# r - 按两个条件分组的多个箱线图

> ID：13124827
> 
> 赞同：5
> 
> 时间：2012-10-29T15:38:21.233
> 
> 标签：r, boxplot

我在单个图中制作多个箱线图时遇到了真正的麻烦......我有五个变量，三个是数字，两个是因子。我想要所有三个数值变量的箱线图，但按两个因子变量分组......该图应该有两个组，每个组用于低和高，三个框分别用于 MM、ND 和 BB。图例应包含 MM、ND 和 BB 的缩写。

```
Group   Class   Sal Wal Daa
MM  Low 21  34  4
ND  Low 23  65  3
BB  High    21  34  2
MM  High    25  23  4
MM  High    23  23  5
MM  High    13  54  6
MM  High    56  32  4
MM  Low 34  13  3
ND  Low 12  35  7
ND  Low 34  34  2
ND  Low 54  54  1
ND  High    32  34  6
ND  High    43  32  7
BB  Low 54  13  3
BB  Low 12  56  2
BB  Low 45  34  6
BB  High    32  32  3
BB  High    13  12  2
BB  High    54  12  5 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-29T15:58:02.700

如果您想为每个数值变量分别绘制一组箱线图，您可以使用该`interaction()`函数按 Group 和 Class 对变量进行分组：

```
test.data <- data.frame(Sal=rnorm(100),
                        group=factor(sample(LETTERS[1:3], 100, replace=TRUE)),
                        class=factor(sample(c("low","high"), 100, replace=TRUE)))
boxplot(Sal ~ interaction(group,class), data=test.data) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T16:08:29.817

您需要先重新排列数据：

```
dta <- read.table(text="Group   Class   Sal Wal Daa
    MM  Low 21  34  4
    ND  Low 23  65  3
    BB  High    21  34  2
    MM  High    25  23  4
    MM  High    23  23  5
    MM  High    13  54  6
    MM  High    56  32  4
    MM  Low 34  13  3
    ND  Low 12  35  7
    ND  Low 34  34  2
    ND  Low 54  54  1
    ND  High    32  34  6
    ND  High    43  32  7
    BB  Low 54  13  3
    BB  Low 12  56  2
    BB  Low 45  34  6
    BB  High    32  32  3
    BB  High    13  12  2
    BB  High    54  12  5", header=TRUE)
dtaLong <- stack(dta, select=cbind(Sal, Wal, Daa))  
dtaLong <- data.frame(dtaLong, dta[,1:2]) 
```

现在 ind 是从原始数据集中的三个变量中识别值的新因子。

```
library(lattice)
bwplot(values~ind | Group + Class, data=dtaLong) 
```

# opencv - 如何在同一个 Android.mk 中编译两个不同的库，将其中一个链接到另一个

> ID：13124829
> 
> 赞同：4
> 
> 时间：2012-10-29T15:38:27.380
> 
> 标签：opencv, android-ndk, makefile

我有 2 个不同库的源代码，FooMain 和 FooSecondary。FooSecondary 被 FooMain 使用，所以，makefile 必须先编译 FooSecondary，然后编译 FooMain，然后将 FooSecondary 链接到 FooMain。

我的 Android.mk 是：

```
LOCAL_PATH:= $(调用我的目录)

# Foo 二级库：

# 清除变量
包括 $(CLEAR_VARS)
# 目标构建
LOCAL_ARM_MODE := 手臂   
# 库名称          
LOCAL_MODULE := FooSecondary        
# 将所有 SRC_FILES 设置在一起            
SRC_FILES := $(通配符 $(LOCAL_PATH)/FooSecondary/src/*.c)
SRC_FILES := $(SRC_FILES:$(LOCAL_PATH)/%=%)     
LOCAL_SRC_FILES = $(SRC_FILES)
# 启用日志支持
LOCAL_LDLIBS = -llog    
# C 标志 - 最大优化              
LOCAL_CFLAGS := -O3 -mno-thumb
# C++ 标志 - 最大优化          
LOCAL_CPPFLAGS := -O3 -mno-thumb
# 编译为共享库     
包括 $(BUILD_SHARED_LIBRARY)     

# Foo 二级库：

# 清除变量
包括 $(CLEAR_VARS)
# 包含 OpenCV
包括 3rdparty/OpenCV-2.4.3-rc-android-sdk/sdk/native/jni/OpenCV.mk
# 目标构建
LOCAL_ARM_MODE := 手臂   
# 库名称          
LOCAL_MODULE := FooMain     
# 将所有 SRC_FILES 设置在一起            
SRC_FILES := $(通配符 $(LOCAL_PATH)/FooMain/src/*.cpp)
SRC_FILES := $(SRC_FILES:$(LOCAL_PATH)/%=%)     
LOCAL_SRC_FILES = $(SRC_FILES)
LOCAL_SHARED_LIBRARIES := libFooSecondary
LOCAL_LDLIBS := -L$(LOCAL_PATH)/../libs/armeabi
LOCAL_LDLIBS += -lz -lm -ldl -lGLESv2 -lEGL -llog -lFooSecondary
LOCAL_CFLAGS := -O2 -mno-thumb -Wno-write-strings
LOCAL_CPPFLAGS := -O2 -mno-thumb -Wno-write-strings
# 编译为共享库     
包括 $(BUILD_SHARED_LIBRARY)

```

我的 Application.mk 是：

```
APP_CPPFLAGS := -frtti -fexceptions
APP_STL := gnustl_static
APP_ABI := armeabi-v7a

```

但是，当我使用 ndk-build 编译 Android.mk 时，会出现下一个错误：

```
Compile arm    : libFooSecondary <= *.c
SharedLibrary  : libFooSecondary.so
Install        : libFooSecondary.so => libs/armeabi-v7a/libFooSecondary.so
SharedLibrary  : libFooMain.so

/home/user/android-ndk-r8/toolchains/arm-linux-androideabi-4.4.3/prebuilt/linux-x86/bin/../lib/gcc/arm-linux-androideabi/4.4.3/../../../../arm-linux-androideabi/bin/ld: cannot find -lFooSecondary

collect2: ld returned 1 exit status
make: *** [obj/local/armeabi-v7a/libFooMain.so] Error 1 
```

如果正确编译和安装，为什么找不到 libFooSecondary.so？

另外，如果 LOCAL_MODULE 名称更改，例如，第一个是 LOCAL_MODULE := zname 而第二个是 LOCAL_MODULE := aname，则首先编译第二个，我不知道为什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T21:57:38.367

你`Android.mk`长得怪怪的。它在`LOCAL_PATH`某处分配吗？无需分配`LOCAL_CPPFLAGS`给 duplicate `LOCAL_CFLAGS`，因为 ndk-build 将两组标志都放在 C++ 命令行上。

要更好地了解 NDK 如何解释您的**Application.mk**和**Android.mk**，您可以运行

```
ndk-build V=1 
```

这将回显所有执行的命令，包括编译和链接，以及 NDK 构建分配的所有参数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T07:53:33.807

尝试将 FooSecondary 编译为静态库并将其包含在 FooMain 中：LOCAL_STATIC_LIBRARIES := libFooSecondary

ndk 不能很好地与多个共享库一起使用，除非它们被 dlopen'd。

# javascript - 使用 jQuery 验证插件验证一些文件输入字段

> ID：13124831
> 
> 赞同：-1
> 
> 时间：2012-10-29T15:38:46.500
> 
> 标签：javascript, jquery, html, jquery-plugins, jquery-validate

HTML

```
<div id="multadpic">
    <input type="file" name="adpic[]" />
</div> 
```

我在这个 div 之后有一个按钮，我可以添加无限文件输入，如下所示：

```
<div id="multadpic">
    <input type="file" name="adpic[]" />
    <input type="file" name="adpic[]" />
    <input type="file" name="adpic[]" />
    <input type="file" name="adpic[]" />
    <input type="file" name="adpic[]" />
</div> 
```

我将如何使用 jQuery 验证插件来验证它？考虑到我不能在规则中写方括号，但是输入的名称有方括号..

我发现的一个解决方案是在插件之后编写我自己的验证（但我不知道它是否有效，或者它是否是一个糟糕的解决方法）：

```
jQuery('#myForm').validate(
{
    rules:
    {
        //my rules
    },

    messages:
    {
        //my messages
    },

    submitHandler:
    {
        //my file input validation
    }
}); 
```

我一直在阅读很多关于此的问题，但没有答案能解决我的需求。

提前感谢您的关注。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T16:17:49.903

`.validate()`方括号对插件来说不是问题。您必须简单地将`name`包含特殊字符的 用引号括起来。

**工作演示**：

[http://jsfiddle.net/grVmG/](http://jsfiddle.net/grVmG/)

**jQuery** :

```
$(document).ready(function() {

    $('#myform').validate({
        rules: {
            "field[]": {
                required: true,
                minlength: 5
            }
        },
        messages: {
            "field[]": {
                required: "this is required",
                minlength: "must be at least {0} characters"
            }
        }
    });

}); 
```

**HTML**：

```
 <input type="text" name="field[]" /> 
```

# webcam - 相机兼容性

> ID：13124835
> 
> 赞同：0
> 
> 时间：2012-10-29T15:38:55.097
> 
> 标签：webcam, directshow, device-driver

我有一个带有驱动程序的 USB 相机和带有一些功能的 dll，可以在我的解决方案中使用这个相机。我想在任何广泛使用的应用程序中使用它，例如，能够在 Skype 中选择和使用它。所以。我想开发一些东西，让我可以像平常的网络摄像头一样使用这个设备。我听说过诸如“上层过滤器驱动程序”和“用户模式 ​​DirectShow 源过滤器”之类的技术。看起来它可以提供帮助。

所以问题是：这些任务有哪些技术？如果我没有驱动程序开发技能，我应该选择什么技术来解决我的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T01:00:16.993

Skype 仍然使用 DirectShow 进行视频捕获，用户模式过滤器将完成这项工作。Skype 仍然做出某些不合理的假设来限制兼容的源过滤器，例如，如果开发人员在他们最喜欢的 USB cam 工作时立即停止开发/测试，而忽略用户可能想要连接的所有其他设备。

[建议您的选项之一（](http://forum.wonderu.com/viewtopic.php?f=2&t=1413)俄语 - [1、2](http://forum.wonderu.com/viewtopic.php?f=1&t=1410)）是开发内核模式驱动程序，以便您的设备通过标准对应用程序可见。这是可能的并且会起作用，尽管在我看来这是一个巨大的矫枉过正。[`WDM Video Capture Filter`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd390974%28v=vs.85%29.aspx)

安装自定义源过滤器并不容易，因为 Skype 不喜欢附加调试器，但是驱动程序开发确实是一个完全不同的故事。

您提到的 Skype 论坛链接显然具有误导性。发帖人抱怨 Skype 更新破坏了与视频源的兼容性。管理员的回复是关于音频设备的，无关紧要。

# javascript - 谷歌地图 - 如何隐藏坐标标记

> ID：13124838
> 
> 赞同：0
> 
> 时间：2012-10-29T15:38:58.417
> 
> 标签：javascript, maps

我正在使用嵌入谷歌地图 iframe 代码。但它出现了 2 个标记。

一个用于公司，另一个用于坐标。如何隐藏绿色坐标标记？

```
<iframe width="600" height="350" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" src="http://maps.google.es/maps?f=q&amp;source=s_q&amp;hl=es&amp;geocode=&amp;q=36.510085,-4.888811&amp;ie=UTF8&amp;t=m&amp;z=14&amp;output=embed"></iframe> 
```

[http://jsfiddle.net/diegomenezes/VYRmr/](http://jsfiddle.net/diegomenezes/VYRmr/)

谢谢 =)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T16:18:03.203

我认为绿色标记是指“附近的地方”，我不知道是否有办法删除，但如果你想，你可以专注于你的公司，包括参数 '&iwloc=A'

```
<iframe width="600" height="350" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" src="http://maps.google.es/maps?f=q&amp;source=s_q&amp;hl=es&amp;geocode=&amp;q=36.510085,-4.888811&amp;ie=UTF8&amp;t=m&amp;z=14&amp;output=embed&amp;iwloc=A"></iframe> 
```

# ruby-on-rails - Rails 中的 Or-ing 关系

> ID：13124839
> 
> 赞同：0
> 
> 时间：2012-10-29T15:39:02.647
> 
> 标签：ruby-on-rails, ruby, associations

我在两个表之间有许多多对多关系，条件表示不同的角色。

```
class Course < ActiveRecord::Base
  ...
  has_many :course_mentors, :conditions => { :type_str => "mentor" }, :class_name => CourseUser
  has_many :mentors, :through => :course_mentors, :source => :user

  has_many :course_enrollees, :conditions => { :type_str => "enrollee" }, :class_name => CourseUser
  has_many :enrollees, :through => :course_enrollees, :source => :user
  ...
end 
```

要单独检索其中一个关联的内容，我可以简单地执行@course.enrollees、@course.mentors 等。但有时将登记者和导师聚集在一起会很方便。

我有许多不同的关联，这使得为单个关联的每个组合创建额外的关联是不切实际的。总能做到

```
(@course.enrollees + @course.mentors).sort 
```

但是，这会导致对数据库的两次请求，并可能导致重复条目。

我还研究了`merge`关联函数，但是这只是返回一个空关系。

这样做的最好的rails方式是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T15:45:59.303

您可以在 Course 模型中简单地为 CourseUser 添加一般关联：

```
has_many :course_users 
```

然后在 CourseUser 模型中放置一个范围：

```
scope :of_type, lambda {|types| where(:type_str => types)} 
```

然后您可以通过以下方式访问它：

```
my_course = Course.first
my_course.course_users.of_type([:mentor, :enrollee]) 
```

# facebook - 什么时候需要FB应用程序

> ID：13124847
> 
> 赞同：-3
> 
> 时间：2012-10-29T15:39:40.270
> 
> 标签：facebook, facebook-like

你能帮我解决什么时候需要facebook应用程序的基本问题吗？如果我们只使用推荐或 Facebook 评论或 Facebook 喜欢，是否需要 Facebook 应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T16:23:11.977

使用 Like 按钮或 Comments 插件不需要完整的应用程序。您可以在此处找到有关它们的更多信息：

*   [https://developers.facebook.com/docs/reference/plugins/comments/](https://developers.facebook.com/docs/reference/plugins/comments/)
*   [https://developers.facebook.com/docs/reference/plugins/like/](https://developers.facebook.com/docs/reference/plugins/like/)

# asp.net - SelectedIndexChanged 的 单选列表未在 radgrid 内触发

> ID：13124855
> 
> 赞同：1
> 
> 时间：2012-10-29T15:40:01.820
> 
> 标签：asp.net, user-controls, postback, telerik-grid, onselect

我有一个用户控件，其中包含一个单选列表，在 SelectIndexChanged 上它会更新一个下拉列表。我整理了一个基本页面并将用户控件添加到它工作正常的页面，但是当我将控件移动到 radgrid 内部时它不起作用，它会回发但从不调用 SelectIndexChanged 事件。

我已经提出了关于这个[Q. 1](https://stackoverflow.com/questions/463398/assign-an-event-to-a-custom-control-inside-a-repeater-control/463582#463582)和[Q. 2](https://stackoverflow.com/questions/485390/why-isnt-the-selectedindexchanged-event-firing-from-a-dropdownlist-in-a-gridvie)的 2 个先前的问题，它们说需要在 aspx 页面中设置 OnSelectedIndexChanged。我的问题是该控件在 aspx 页面中不存在并且是稍后创建的，因此该解决方案对我不起作用。

*工作代码*

**工作.aspx**

```
<TT:ToolTipControl ID="ToolTipEdit" runat="server" /> 
```

**工作.aspx.cs**

```
protected void Page_Load(object sender, EventArgs e)
{
    ToolTipEdit.getEditToolTip("POL_TERM_CD", "DataPolTermDropDownlistEdit");
} 
```

*用户控制*

**用户控件.ascx.cs**

```
public void getEditToolTip(string fieldName, string ddlName)
{
     DataPolTermRadioListBox ccPolTermRadioListBox = new DataPolTermRadioListBox(); //custom radio list
     ccPolTermRadioListBox.ID = "PolTermRadioListBox";
     ccPolTermRadioListBox.AutoPostBack = true;
     ccPolTermRadioListBox.SelectedIndexChanged += new System.EventHandler(updateParent);
     ToolTip.Controls.Add(ccPolTermRadioListBox);
} 
```

*破码*

**破碎页面.aspx**

```
<telerik:RadGrid ID="rgState" Skin="WebBlue" runat="server" OnNeedDataSource="rgState_NeedDataSource"
     AutoGenerateColumns="False" OnPreRender="rgState_PreRender">
     <MasterTableView DataKeyNames="wrtnStPolId" AllowAutomaticUpdates="false" AllowAutomaticDeletes="true"
         AllowAutomaticInserts="false" CommandItemDisplay="Top" AllowMultiColumnSorting="True"
         EditMode="InPlace" GroupLoadMode="Server" Caption="State(s) and Exposure(s)">
         <Columns>
             <telerik:GridTemplateColumn AllowFiltering="false" HeaderText="Pol Type Nstd" SortExpression="nonStdPolTypeCd"
                 UniqueName="nonStdPolTypeCd">
                 <ItemTemplate>
                     <asp:Label ID="lblNonStdPolTypeCd" runat="server" align="center" Text='<%#DataBinder.Eval(Container.DataItem, "nonStdPolTypeCd")%>' />

                 </ItemTemplate>
                 <EditItemTemplate>
                     <cc1:DataNonStdTypeCdDropDownList ID="ddlNonStdTypeCd" runat="server" ClientIDMode="Predictable">
                     </cc1:DataNonStdTypeCdDropDownList>
                     <TT:ToolTipControl ID="ttcNonStdPolTypeCdEdit" runat="server" />
                 </EditItemTemplate>
             </telerik:GridTemplateColumn>
         </Columns>
     </MasterTableView>
 </telerik:RadGrid> 
```

**破碎页面.aspx.cs**

```
protected void rgState_PreRender(object sender, EventArgs e)
        {

            RadGrid rgExpMod = (RadGrid)sender;

            foreach (GridDataItem row in rgExpMod.Items)
            {

                    GridDataItem gdiItem = (GridDataItem)row;

                    if (row.FindControl("ttcNonStdPolTypeCdEdit") != null)
                    {

                        DropDownList ddl = (DropDownList)row.FindControl("ddlNonStdTypeCd");
                        ddl.ID += row.RowIndex;
                        ddl.SelectedIndex = 2;

                        NCCI.PDC.Web.Controls.ucToolTip ttcNonStdPolTypeCdEdit = (NCCI.PDC.Web.Controls.ucToolTip)row.FindControl("ttcNonStdPolTypeCdEdit");
                        ttcNonStdPolTypeCdEdit.getEditToolTip("non_std_pol_type_cd", ddl.ID);

                    }
            }

        } 
```

# apache-poi - 使用 POI 时，我应该将 Excel 表中的 read 用作 Workbook 还是 HSSFWorkbook？

> ID：13124856
> 
> 赞同：0
> 
> 时间：2012-10-29T15:40:16.750
> 
> 标签：apache-poi

我必须创建一个使用 POI 读取 excel 文件的自定义标签，修改一些单元格，然后将修改写回同一个 excel 文件。excel文件中有多个工作表。在某些工作表中，某些单元格被锁定，某些单元格具有颜色编码，而某些单元格具有下拉选项。当我将修改写回 excel 文件时，所有这些特殊样式必须保持不变。

我注意到我可以`Workbook`通过执行读取 excel 文件`WorkbookFactory.create()`。我也可以`HSSFWorkbook`通过做来阅读`new HSSFWorkbook()`。我的问题是，我应该使用哪一个来完成我想要完成的任务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T10:20:47.667

`Workbook`是适用于 HSSF（.xls 文件）和 XSSF（.xlsx 文件）的通用接口。通过使用`Workbook`而不是`HSSFWorkbook`，您的代码对于两种文件格式都可以正常工作。

从[*为什么改变？*POI网站上的部分](http://poi.apache.org/spreadsheet/converting.html#Why+change?)：

> 如果您拥有可以正常工作的现有 HSSF 用户模型代码，并且您不想使用新的 OOXML XSSF 支持，那么您可能不需要。您现有的仅 HSSF 代码将继续正常工作。
> 
> 但是，如果您希望能够同时使用 .xls 文件的 HSSF 和 .xslx 文件的 XSSF，那么您将需要对您的代码进行一些细微的调整。

因此，如果您只需要支持 .xls，并且永远支持，您可以坚持使用 .xls `HSSFWorkbook`。但是，如果您想在现在或将来同时使用 .xls 和 .xlsx，请使用通用接口

# iphone - 在 NSMutableArray 上求和重复

> ID：13124857
> 
> 赞同：1
> 
> 时间：2012-10-29T15:40:18.043
> 
> 标签：iphone, ios, nsmutablearray, nsmutabledictionary

我有一个`NSMutableArray`with 类型的对象`NSMutableDictionary`，

包含`NSMutableDictionary`2 个键

-航空公司（字符串）

-评分（整数）

我有`NSMutableArray`所有对象，我需要对所有航空公司重复对象的评级求和，例如：

```
Airline  Rating

  A         2

  B         3

  B         4

  C         5 
```

最终结果数组将是 A = 2、C = 5 和等于 7 的 B 之和。

到目前为止我的代码：

```
for (int i = 0; i < arrayMealRating.count; ++i) {
         NSMutableDictionary *item = [arrayMealRating objectAtIndex:i];
         NSLog(@"item=%@",item);
         for (int j = i+1; j < arrayMealRating.count; ++j)
         {
           if ([[item valueForKey:@"Airline"] isEqualToString:[arrayMealRating objectAtIndex:j]]){
                NSMutableDictionary *item = [arrayMealRating objectAtIndex:j];
                NSMutableDictionary *item1 = [arrayMealRating objectAtIndex:i];
                NSInteger auxCount =  [[item valueForKey:@"setMealRating"] integerValue] + [[item1 valueForKey:@"setMealRating"] integerValue];

                NSMutableDictionary *aux = [NSMutableDictionary dictionaryWithObjectsAndKeys:[item valueForKey:@"Airline"], @"Airline"
                                                        ,[NSString stringWithFormat:@"%d",auxCount], @"setMealRating"
                                                        ,nil];
                NSLog(@"aux=%@",aux);
                [arrayMealRating replaceObjectAtIndex:i withObject:aux];

            }
         }
   } 
```

我知道有点乱，但我不知道如何使用`NSMutableDictionary`，任何帮助将不胜感激，在此先感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T16:32:56.340

如果您不想更改存储数据的方式，以下是使用[键值编码的方式](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/KeyValueCoding/Articles/Overview.html#//apple_ref/doc/uid/20001838-SW1)。[这是@distinctUnionOfObjects 和 @sum](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/KeyValueCoding/Articles/CollectionOperators.html#//apple_ref/doc/uid/20002176-178593)文档的直接链接。

```
// Get all the airline names with no duplicates using the KVC @distinctUnionOfObjects collection operator
NSArray *airlineNames = [arrayMealRating valueForKeyPath:@"@distinctUnionOfObjects.Airline"];

// Loop through all the airlines
for (NSString *airline in airlineNames) {

    // Get an array of all the dictionaries for the current airline
    NSPredicate *predicate = [NSPredicate predicateWithFormat:@"(Airline == %@)", airline];
    NSArray *airlineMealRating = [arrayMealRating filteredArrayUsingPredicate:predicate];

    // Get the sum of all the ratings using KVC @sum collection operator
    NSNumber *rating = [airlineMealRating valueForKeyPath:@"@sum.Rating"];
    NSLog(@"%@: %@", airline, rating);
} 
```

这给出了以下输出

```
A: 2
B: 7
C: 5 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T16:12:36.127

如果可能的话，我建议完全重新设计它。

创建一个类`Airline`

```
@interface Airline : NSObject

@property (strong, nonatomic) NSString *name;
@property (strong, nonatomic) NSMutableArray *mealRatings;

- (void)addMealRating:(float)rating;
- (float)sumOfMealRatings;

@end

@implementation

- (id)initWithName:(NSString *)pName
{
    self = [super init];
    if (self)
    {
        self.name = pName;
        self.mealRatings = [NSMutableArray array];
    }
    return self;
}

- (void)addMealRating:(float)rating
{
    [self.mealRatings addObject:@(rating)];
}

- (float)sumOfRatings
{
    float sum = 0;
    for (NSNumber *rating in self.mealRatings)
    {
        sum += [rating floatValue];
    }
 }

 @end 
```

然后在您的“主类”中，您只需持有对象的`NSArray`实例`Airline`。它可能需要您更改一些现有代码，但我认为从长远来看，它可以节省您的时间和麻烦。也许您稍后会意识到，您想为您的航空公司添加其他属性。字典是一种繁琐的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T16:16:47.190

@试试这个

```
NSMutableArray *myArray = [[NSMutableArray alloc] initWithCapacity:4];

NSMutableDictionary *dict = [[NSMutableDictionary alloc] init];
[dict setValue:[NSNumber numberWithInteger:2] forKey:@"A"];
[myArray addObject:dict];

NSMutableDictionary *dict2 = [[NSMutableDictionary alloc] init];
[dict2 setValue:[NSNumber numberWithInteger:3] forKey:@"B"];
[myArray addObject:dict2];

NSMutableDictionary *dict3 = [[NSMutableDictionary alloc] init];
[dict3 setValue:[NSNumber numberWithInteger:4] forKey:@"B"];
[myArray addObject:dict3];

NSMutableDictionary *dict4 = [[NSMutableDictionary alloc] init];
[dict4 setValue:[NSNumber numberWithInteger:5] forKey:@"D"];
[myArray addObject:dict4];

NSMutableDictionary *resultDictionary = [[NSMutableDictionary alloc] init];

for(NSMutableDictionary *dictionary in myArray)
{
    NSString *key = [[dictionary allKeys] objectAtIndex:0];

    NSInteger previousValue = [[resultDictionary objectForKey:key] integerValue];

        NSInteger value = [[dictionary objectForKey:key] integerValue];

        previousValue += value;

    [resultDictionary setObject:[NSNumber numberWithInteger:previousValue] forKey:key];

}

for(NSString *key in resultDictionary)
{
    NSLog(@"value for key = %@ = %d",key, [[resultDictionary valueForKey:key] integerValue]);
} 
```

# c# - ASP.NET 移动设备注册

> ID：13124862
> 
> 赞同：1
> 
> 时间：2012-10-29T15:40:25.967
> 
> 标签：c#, jquery, asp.net, mobile, web

提前感谢您的宝贵建议。

我正在工作中创建一个移动网站。我对开发并不陌生，只是对移动设备很陌生。我最初的计划是设置一个基本登录名（用户名/密码）。但是，我被要求创建某种方式来“注册”设备以绕过用户名/密码。

我的问题如下：

是否可以在移动 Web 上创建此设备注册场景？如果是这样，实现这一点的最佳实践/方法是什么？

感谢所有的帮助。

-zd

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T15:59:52.590

无法检索到使用 asp.net 完美识别移动用户的方法。

对不起。

# .net - F# 基础：将 NameValueCollection 变成漂亮的字符串

> ID：13124865
> 
> 赞同：4
> 
> 时间：2012-10-29T15:40:34.237
> 
> 标签：.net, collections, f#

学习 F# 的同时尝试做一些有用的事情，所以这是一个基本问题：

我有`req`，这是 a `HttpListenerRequest`，它具有`QueryString`属性，类型为`System.Collections.Specialized.NameValueCollection`。所以，为了清楚起见，让我们说，我有

`let queryString = req.QueryString`

现在我想从它的内容中生成漂亮的字符串（不是 printf 到控制台），但`queryString.ToString()`显然没有被覆盖，所以它只给出字符串“System.Collections.Specialized.NameValueCollection”。

那么，什么是 F# one-liner 可以从中得到一个漂亮的字符串，比如“key1=value1\nkey2=value2\n...”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T15:52:56.167

像这样的东西应该可以工作：

```
let nvcToString (nvc:System.Collections.Specialized.NameValueCollection) =
    System.String.Join("\n", 
                       seq { for key in nvc -> sprintf "%s=%s" key nvc.[key] }) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-29T16:05:33.877

```
nvc.AllKeys
|> Seq.map (fun key -> sprintf "%s=%s" key nvc.[key])
|> String.concat "\n" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T19:51:36.420

我使用此代码，它处理具有多个值的键的情况，这在 a 中是合法的`NameValueCollection`，而我在其他答案中没有看到。我还使用 MS [AntiXSS 库](http://nuget.org/packages/AntiXSS)对值进行 URL 编码。

*编辑：*哎呀，我没有仔细阅读OP。我假设您想变`Request.QueryString`回实际的查询字符串。我将留下这个答案，因为`NameValueCollection`每个键允许多个值仍然是正确的。

```
type NameValueCollection with
    /// Converts the collection to a URL-formatted query string.
    member this.ToUrlString() =
        // a key can have multiple values, so flatten this out, repeating the key if necessary
        let getValues (key:string) =
            let kEnc = Encoder.UrlEncode(key) + "="
            this.GetValues(key)
            |> Seq.map (fun v -> kEnc + Encoder.UrlEncode(v))

        let pairs = this.AllKeys |> Seq.collect getValues

        String.Join("&", pairs) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T15:55:25.683

`kvs.AllKeys |> Seq.map (fun i -> i+ " = " + kvs.[i]) |> Seq.fold (fun s t -> s + "\n" + t) ""`

直接从我的脑海中效率低下并创建大量字符串实例。:)

# html - HTML5 中的属性是否需要值？

> ID：13124867
> 
> 赞同：0
> 
> 时间：2012-10-29T15:40:38.923
> 
> 标签：html

问题如下图所示：

```
<ul data-my-div='true><li></li></ul> <!-- this is surely okay -->
<ul data-my-div><li></li></ul> <!-- but is this? --> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T15:45:59.380

只是测试它！见，例如[这个小提琴](http://jsfiddle.net/hLQtE/)。简短的测试表明，您至少可以在 Firefox 和 Chrome 中使用。

```
<ul id="t1" data-my-div="true"><li></li></ul>
<ul id="t2" data-my-div><li></li></ul>

<div id="r1"></div>
<div id="r2"></div>

<script>
document.querySelector( '#r1' ).innerHTML = JSON.stringify( document.querySelector( '#t1' ).dataset );

document.querySelector( '#r2' ).innerHTML = JSON.stringify( document.querySelector( '#t2' ).dataset ); 
```

结果：

> {"myDiv":"true"}
> 
> {"myDiv":""}

通常，引用明确允许[此处](http://www.w3.org/TR/html-markup/syntax.html#syntax-attr-empty)为空属性：

> **空属性语法**
> 
> 某些属性可以通过仅提供属性名称来指定，不提供值。

# c# - VS 2010 C# ReportViewer 为什么数据没有显示在列中？

> ID：13124868
> 
> 赞同：2
> 
> 时间：2012-10-29T15:40:41.647
> 
> 标签：c#, sql-server-ce, datasource, reportviewer

我有旧的 C# 项目，它是使用 Report Viewer 8.0.50727.42 的 .Net 2.0，我将其导入 Visual Studio 2010，将其更改为使用 .Net 3.5 和 Report Viewer 10.0.40219.1，除了一份报告中的一份报告之外，一切似乎都正常数据列显示#Error 而不是值。

该数据库是一个 SQL compact 3.5 SDF 文件。

它是什么，我有一个要显示的事件类列表，每个事件都有一个 EventType 类的属性。

因此，对于 Type 列，我将以下内容作为 rdlc 中的表达式：

```
=Fields!EventType.Value 
```

在我的 EventForm 中，我在 DataSources.Add() 函数处放置了一个断点。它看起来像这样：

```
ReportDataSource reportDataSource = new ReportDataSource("Manager_Base_Event", bindingSource);
reportViewer.LocalReport.DataSources.Add(reportDataSource); 
```

当它在那里中断时，我可以在堆栈中看到我想要的数据，但正如我所说，它显示#Error 并且不幸的是，据我所知，它并没有给我一个理由。

我尝试将 [Serializable()] 放在 Event 和 EventType 类上，但没有帮助。

有谁知道我如何才能更好地调试它以获得数据未显示的确切原因，或者可能已经知道它为什么不显示？

让我感到困惑的是，我在其他报告中与其他班级做同样的事情，而且没有任何问题，所以我不确定为什么这不起作用。

如果重要的话，我在 [TypeConverter(typeof(EventTypeTypeConverter))] 的 EventType 类上有一个属性

我认为这可能是相关的，但我找不到任何东西来确认这可能会导致问题。

# unix - 按出现次数排序历史记录

> ID：13124869
> 
> 赞同：1
> 
> 时间：2012-10-29T15:40:46.703
> 
> 标签：unix, sorting, history, uniq

基本上我想打印存储在 bash 历史记录中的 10 个最常用的命令，但它们仍然必须按照指示何时使用的数字进行；

我做到了这一点：历史 | 切-f 2 | 剪切-d''-f 3,5 | 排序 -k 2 -n

哪个应该从该行中的命令中对出现次数的第二列进行排序......但它没有这样做。我知道我可以在最后的管道中使用 -10 来获取其中最高的 10 个，但我有点卡在排序部分。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-29T15:47:21.917

历史中存储的 10 个最常用的命令：

```
history | sed -e 's/ *[0-9][0-9]* *//' | sort | uniq -c | sort -rn | head -10 
```

`sed`这通过删除历史编号 ( )、计数 ( `sort | uniq -c`)、按频率排序 ( `sort -rn`) 并仅显示前十个条目，为您提供最常用的命令行条目。

如果您只想要命令：

```
history | awk '{print $2;}' | sort | uniq -c | sort -rn | head -10 
```

这两个都去掉了历史编号。目前，我不知道如何在一行中实现这一目标。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T16:10:39.737

如果您想在历史记录文件中查找最常用的命令，则必须计算历史记录中的实例。`awk`可以用来做到这一点。在下面的代码中，`awk`段将创建一个哈希表，其中命令作为键，它们出现的次数作为值。这与该命令的最后一个历史编号一起打印出来并排序：

```
history | cut -f 2 | cut -d ' ' -f 3,5 | awk '{a[$2]++;b[$2]=$1} END{for (i in a) {print b[i], i, a[i]}}' | sort -k3 -rn | head -n 10 
```

输出如下所示：

```
975 cd 142
972 vim 122
990 ls 118
686 hg 90
974 mvn 51
939 bash 39
978 tac 32
958 cat 28
765 echo 27
981 exit 17 
```

如果您不想要最后一列，您可以将输出通过`cut -d' ' -f1,2`.

# html - 奇怪的css溢出效果发生

> ID：13124872
> 
> 赞同：0
> 
> 时间：2012-10-29T15:41:00.447
> 
> 标签：html, css

我一直在使用基于 twitter 引导程序的模板。对于登陆页面底部的图像，由于某种原因，会出现一个额外的滚动条，这会导致底部组合中的图像出现裁剪或部分加载。

不确定是哪位 html 或 css 导致了这种情况，因为问题似乎没有出现在原始模板中。我已经检查并将我的代码与原始代码进行了比较，但无法弄清楚是什么原因造成的。

我已经从原始代码中删除了很多代码，因为我不需要太多代码。我只想要一个简单的主页，但不知道是什么导致了额外的滚动条或溢出效果。

如果有人有任何想法，这里是页面链接：http: [//krmmalik.com/photography/](http://krmmalik.com/photography/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T16:32:56.980

对 Ascensor.js 的引用破坏了网站并将所有丑陋的内联 CSS 添加到正文中。我不知道它应该诚实地做什么，但它目前正在破坏事情。我在您的网站上禁用了 js 并重新加载它，一切正常。

该布局没有响应性，因为它只是一个流畅的布局。老实说，它不能很好地调整大小。我希望它不是非常昂贵。无论是那个还是你改变的东西都破坏了它应该如何调整大小。

我会尝试找出该脚本应该做什么，但与此同时，只需删除引用，您的网站似乎就可以正确加载。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T15:55:21.300

我在 Chrome 开发工具中看到了这一点：

```
<div class="house" id="house0" style="height: 268px; width: 1726px; overflow-y: scroll; overflow-x: hidden; margin-top: 0px; margin-left: 0px; position: absolute; "> 
```

它设置了一个 fix `height`，然后当项目低于该`overflow-y:scroll;`属性的高度时导致第二个滚动条。

但是，这不在`View Source`您的文档中！如果您碰巧知道它的来源，那么摆脱它是解决问题的关键。

如果您可以控制它，也许尝试将其更改为：

```
<div class="house" id="house0" style="min-height: 268px; width: 1726px; overflow-x: hidden; margin-top: 0px; margin-left: 0px; position: absolute; "> 
```

这（应该）做的是让它永远不会比它更短，`268px`同时允许它扩展到一个新的高度，如果需要的话。我说应该是因为我没有测试它！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T16:05:29.643

这是你犯的愚蠢错误。只需删除`overflow-x: hidden; and overflow-y: scroll;`和你的代码是这样的。

```
 <div id="house0" class="house" style="width: 1263px; margin-top: 0px; 
     margin-left: 0px; position: absolute;"> 
```

希望它会帮助你，干杯。！！如果有帮助，请将其标记为答案，以便其他人可以解决相同的问题。谢谢。

# android - smali：字符串常量

> ID：13124874
> 
> 赞同：0
> 
> 时间：2012-10-29T15:41:08.727
> 
> 标签：android, smali

除了执行以下操作之外，是否还必须执行其他操作才能将 String 常量加载到寄存器中，然后在方法调用中使用它：

```
const-string v6, "TEST CONSTANT"
invoke-static {v6, p1}, Landroid/util/Log;->wtf(Ljava/lang/String;Ljava/lang/String;)I 
```

?

以下指令块

```
iget-object v4, p0, Lcom/mypackage/MyClass;->myList:Ljava/util/List;
invoke-interface {v4, p1}, Ljava/util/List;->contains(Ljava/lang/Object;)Z
move-result v5
if-eqz v5, :cond_not_met_0
const-string v6, "TEST CONSTANT"
invoke-static {v6, p1}, Landroid/util/Log;->wtf(Ljava/lang/String;Ljava/lang/String;)I
:cond_not_met_0

invoke-interface {v4, p2}, Ljava/util/List;->contains(Ljava/lang/Object;)Z
move-result v5
if-eqz v5, :cond_not_met_1
invoke-static {v6, p2}, Landroid/util/Log;->wtf(Ljava/lang/String;Ljava/lang/String;)I
:cond_not_met_1 
```

给了我以下 logcat 错误消息：

```
10-29 23:37:37.191: W/dalvikvm(515): VFY: register1 v6 type 2, wanted ref
10-29 23:37:37.241: W/dalvikvm(515): VFY: bad arg 0 (into Ljava/lang/String;)
10-29 23:37:37.241: W/dalvikvm(515): VFY:  rejecting call to Landroid/util/Log;.wtf (Ljava/lang/String;Ljava/lang/String;)I
10-29 23:37:37.241: W/dalvikvm(515): VFY:  rejecting opcode 0x71 at 0x0028 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T18:18:37.373

在这种情况下，您的怀疑是正确的。问题是因为在第二个 Log->wtf 实例中，不一定要设置 v6。

至于*为什么*会发生这种情况，重要的是要注意在重新组装字节码时进行的验证很少。在许多情况下，汇编器根本没有足够的信息来进行此级别的验证 - 这将要求汇编器了解应用程序运行时将出现的完整类集，类似于 deodexing (-o ) 或生成寄存器信息 (-r)。

dalvik在验证字节码时发现了这些类型的问题，这正是您提到的错误所在。

此外，您提到“我用于 p1 和 p2 的值在 if-eqz 测试中都失败了”。这与 dalvik 的字节码验证器无关。验证者确保*所有*代码路径都有效。它不能知道或假定传递给方法的参数的任何特定值。

如果您想查看与寄存器类型如何在整个方法中传播相关的其他信息，您可以尝试使用 baksmali 的 -r 选项。

```
# grab the full framework directory from your device
adb pull /system/framework framework
# run baksmali with the -r command
baksmali -r ARGS,DEST,FULLMERGE -d framework <apk_or_dex_file> 
```

这将在每条指令之前/之后添加注释，其中包含有关该位置寄存器类型的详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T14:12:54.543

我改变了一些东西并让它工作，但我不知道为什么......

我所做的改变是将常量加载（`const-string v6, "TEST CONSTANT"`）移到“if-block”之外，导致

```
const-string v6, "TEST CONSTANT"
iget-object v4, p0, Lcom/mypackage/MyClass;->myList:Ljava/util/List;

invoke-interface {v4, p1}, Ljava/util/List;->contains(Ljava/lang/Object;)Z
move-result v5
if-eqz v5, :cond_not_met_0
invoke-static {v6, p1}, Landroid/util/Log;->wtf(Ljava/lang/String;Ljava/lang/String;)I
:cond_not_met_0

invoke-interface {v4, p2}, Ljava/util/List;->contains(Ljava/lang/Object;)Z
move-result v5
if-eqz v5, :cond_not_met_1
invoke-static {v6, p2}, Landroid/util/Log;->wtf(Ljava/lang/String;Ljava/lang/String;)I
:cond_not_met_1 
```

我怀疑最初问题的原因是如果流程绕过了第一个“if-block”但进入了第二个“if-block”，那么在`v6`使用之前还没有加载寄存器。

我不太确定的原因是，当我运行重新组装的程序时，我使用的值`p1`并且`p2`会通过两个`if-eqz`测试（即流程将进入两个“if-blocks”）。

所以看起来， 1.在实际控制流之前先检查要在使用之前加载
的寄存器吗？ 2\. 我认为这种检查只在编译时进行？`v6`

我将其发布为答案，因为我需要更多空间来解释我的所作所为。但是，我仍然很好奇为什么这样的改变让它起作用，所以如果有人能给出解释，我会把它标记为答案，谢谢！

# php - 如何使用“parse_ini_file”解析包含特殊字符的ini文件？

> ID：13124875
> 
> 赞同：3
> 
> 时间：2012-10-29T15:41:11.693
> 
> 标签：php, parsing, character-encoding, ini

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-29T15:50:50.167

以下是一个假设，因为到目前为止，您的问题在技术上并未记录实际原因是什么。

但是可以说的是，您在这里遇到了与字符编码相关的问题。

使用 UTF-8 编码保存您的 INI 文件，这*应该可以*工作。我假设您的 PHP 脚本将 UTF-8 输出到浏览器，并且 INI 文件中的值不是 UTF-8 编码的。如果您使用 UTF-8 编码保存 INI 文件，那么这*应该可以*工作。

这里的关键点与其说是“UTF-8”，不如说是使用您使用的应用程序所期望的正确字符编码来保存 INI 文件。例如，如果您的应用程序使用 ISO-8859-1，则使用 ISO-8859-1 编码保存 INI 文件。

两者 - INI 文件和 PHP 脚本 - 都需要使用相同的“语言”。

您可以添加一个“翻译器”，它可以帮助您将两种不同的“语言”结合在一起。这样的翻译器（或更正确*的重新编码器*）是[`iconv`](http://php.net/iconv)：

```
$ini_iso88591 = file_get_contents("sad - Kopie (6)/folder.ini");
$ini_utf8     = iconv("ISO-8859-1", "UTF-8", $ini_iso88591);
$ini_array    = parse_ini_string($ini_utf8, TRUE); 
```

# perl - Compilation errors when connecting to MongoDB from Perl

> ID：13124876
> 
> 赞同：4
> 
> 时间：2012-10-29T15:41:11.987
> 
> 标签：perl, mongodb

I'm trying to run the simple "MongoDB:Tutorial" tutorial:

[http://search.cpan.org/dist/MongoDB/lib/MongoDB/Tutorial.pod](http://search.cpan.org/dist/MongoDB/lib/MongoDB/Tutorial.pod)

My goal is to connect to a MongoDB database from a Perl script. I've installed MongoDB using cpanm:

```
$ sudo cpanm MongoDB
MongoDB is up to date. (0.501.1) 
```

I created a simple Perl script called `loadRaw.pl`:

```
use strict;
use warnings;

use MongoDB;
use MongoDB::Connection;
use MongoDB::OID;

print "hello\n"; 
```

When I try to run the script, I get a bunch of errors:

```
$ perl ./loadRaw.pl
String found where operator expected at /usr/local/lib/perl/5.10.1/MongoDB/Cursor.pm line 271, near "confess "cannot set fields after querying""
    (Do you need to predeclare confess?)
String found where operator expected at /usr/local/lib/perl/5.10.1/MongoDB/Cursor.pm line 273, near "confess 'not a hash reference'"
    (Do you need to predeclare confess?)
String found where operator expected at /usr/local/lib/perl/5.10.1/MongoDB/Cursor.pm line 294, near "confess "cannot set sort after querying""
    (Do you need to predeclare confess?)
String found where operator expected at /usr/local/lib/perl/5.10.1/MongoDB/Cursor.pm line 296, near "confess 'not a hash reference'"
    (Do you need to predeclare confess?)
String found where operator expected at /usr/local/lib/perl/5.10.1/MongoDB/Cursor.pm line 317, near "confess "cannot set limit after querying""
    (Do you need to predeclare confess?)
String found where operator expected at /usr/local/lib/perl/5.10.1/MongoDB/Cursor.pm line 343, near "confess "Cannot set tailable state""
    (Do you need to predeclare confess?)
String found where operator expected at /usr/local/lib/perl/5.10.1/MongoDB/Cursor.pm line 366, near "confess "cannot set skip after querying""
    (Do you need to predeclare confess?)
String found where operator expected at /usr/local/lib/perl/5.10.1/MongoDB/Cursor.pm line 390, near "confess "cannot set snapshot after querying""
    (Do you need to predeclare confess?)
String found where operator expected at /usr/local/lib/perl/5.10.1/MongoDB/Cursor.pm line 408, near "confess "cannot set hint after querying""
    (Do you need to predeclare confess?)
String found where operator expected at /usr/local/lib/perl/5.10.1/MongoDB/Cursor.pm line 410, near "confess 'not a hash reference'"
    (Do you need to predeclare confess?)
syntax error at /usr/local/lib/perl/5.10.1/MongoDB/Cursor.pm line 90, near "has started_iterating"
syntax error at /usr/local/lib/perl/5.10.1/MongoDB/Cursor.pm line 271, near "confess "cannot set fields after querying""
syntax error at /usr/local/lib/perl/5.10.1/MongoDB/Cursor.pm line 294, near "confess "cannot set sort after querying""
syntax error at /usr/local/lib/perl/5.10.1/MongoDB/Cursor.pm line 317, near "confess "cannot set limit after querying""
syntax error at /usr/local/lib/perl/5.10.1/MongoDB/Cursor.pm line 343, near "confess "Cannot set tailable state""
syntax error at /usr/local/lib/perl/5.10.1/MongoDB/Cursor.pm line 366, near "confess "cannot set skip after querying""
syntax error at /usr/local/lib/perl/5.10.1/MongoDB/Cursor.pm line 390, near "confess "cannot set snapshot after querying""
syntax error at /usr/local/lib/perl/5.10.1/MongoDB/Cursor.pm line 408, near "confess "cannot set hint after querying""
BEGIN not safe after errors--compilation aborted at /usr/local/lib/perl/5.10.1/MongoDB/Cursor.pm line 564.
Compilation failed in require at /usr/local/lib/perl/5.10.1/MongoDB/Connection.pm line 26.
BEGIN failed--compilation aborted at /usr/local/lib/perl/5.10.1/MongoDB/Connection.pm line 26.
Compilation failed in require at /usr/local/lib/perl/5.10.1/MongoDB.pm line 30.
BEGIN failed--compilation aborted at /usr/local/lib/perl/5.10.1/MongoDB.pm line 30.
Compilation failed in require at ./loadRaw.pl line 7.
BEGIN failed--compilation aborted at ./loadRaw.pl line 7. 
```

It seems like the MongoDB Perl module (specifically, the `Cursor.pm` file) has some syntax errors. The first batch of problems (those related to the `confess` keyword) are solved if I add the line `use Carp;` to the top of `Cursor.pm`. However, I don't think I should have to do this, and instead I'm doing something else incorrectly. Also, the second batch of errors (those related to the `has` keyword) are not solved by including `Carp`.

Has anyone else experienced this? Any ideas?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T23:50:38.053

我从来没有确切地知道出了什么问题，但它肯定是我的系统和我的 Perl 配置所独有的。由于其他人能够毫无问题地执行提供的代码，我尝试使用 Perlbrew 执行代码（如frido所建议的那样）：

```
$ perlbrew install perl-5.16.0
(Output not shown)
$ perlbrew switch perl-5.16.0
(Output not shown)
$ perlbrew install-cpanm
(Output not shown)
$ /home/sthomas/perl5/perlbrew/bin/cpanm MongoDB
(Output not shown)
$ perlbrew exec perl ./loadRaw.pl
perl-5.16.0
==========
hello 
```

因为它在 Perlbrew 安装中运行良好，所以问题不在于 MongoDB 或我的示例代码；这一定是我的 Perl 环境的一些奇怪的怪癖。我想我会尝试全新安装 Perl 和所有我需要的模块，看看是否可行。

# mysql - 如何在表名相同的连接期间避免表名混淆

> ID：13124880
> 
> 赞同：-1
> 
> 时间：2012-10-29T15:41:29.120
> 
> 标签：mysql, sql, alias

我有一个看起来像这样的模型：

```
author: id, name, lastname
books: id, name, author_id 
```

当我提出加入请求时：

```
SELECT author.*, books.*
FROM author
LEFT JOIN books ON books.author_id = author.id 
```

目前尚不清楚我的结果集中列名指的是什么。

我可以通过这样做来解决这个问题：

```
SELECT author.*, books.*, author.name as `author_name`, books.name as `book_name`
... 
```

但我不想明确每个字段别名。我想做的是这样的：

```
SELECT author.* as `author_.*`, books.* as `books_.*`
... 
```

这样我就有了专栏`author_id, author_name, ..., book_name, ...`

但它不起作用。如何避免名称混淆？我必须为每个字段指定别名吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T15:42:52.277

如果您不想`ALIAS`在列上添加 an ，解决问题的最佳方法是***重命名它以避免名称冲突***。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T15:44:12.973

输出将只显示字段名（或查询中指定的别名），而不是表名。将模型更改为具有“author_name”、“book_name”等字段，或在查询中使用别名。

# c# - Spring.Net\DI\如何读取系统环境变量

> ID：13124891
> 
> 赞同：0
> 
> 时间：2012-10-29T15:42:06.010
> 
> 标签：c#, dependency-injection, environment-variables, spring.net

在我的依赖注入配置文件中 - 我不知道（也找不到示例）如何将一些预定义的环境变量文件设置为成员。

无法告诉如何在 Spring.Net 中执行此操作 - 我们将不胜感激您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T19:36:50.790

使用`EnvironmentVariableSource`，目前的文档有些缺乏：http: [//springframework.net/docs/1.3.2/reference/html/objects.html#objects-variablesource](http://springframework.net/docs/1.3.2/reference/html/objects.html#objects-variablesource)。我已经编写了一些额外的文档，它们可能会包含在构建的下一个 2.0 版本中。同时，您还可以在 Github [https://github.com/serra/spring-net-examples/tree/master/Spring.IoCQuickStart.VariableSources](https://github.com/serra/spring-net-examples/tree/master/Spring.IoCQuickStart.VariableSources)上查看此示例代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T19:42:50.593

看看`VariablePlaceholderConfigurer`对象。它应该完成这项工作： [http ://www.springframework.net/doc-latest/reference/html/objects.html#objects-variablesource](http://www.springframework.net/doc-latest/reference/html/objects.html#objects-variablesource)

```
<object type="Spring.Objects.Factory.Config.VariablePlaceholderConfigurer, Spring.Core">
   <property name="VariableSources">
      <list>
         <object type="Spring.Objects.Factory.Config.EnvironmentVariableSource, Spring.Core"/>
      </list>
   </property>
</object>

<object type="MyObject">
  <property name="MyProperty" value="${MyEnvironmentVariableName}"/>
</object> 
```

# sql-server-2008 - 将 nvarchar 转换为 int

> ID：13124897
> 
> 赞同：1
> 
> 时间：2012-10-29T15:42:24.580
> 
> 标签：sql-server-2008, stored-procedures

我在网上搜索了这个问题，我一生都无法弄清楚为什么这会一直抛出错误，感谢您的帮助。

> 将 nvarchar 值 'SELECT @orderid = t.orderid FROM (SELECT *, ROW_NUMBER() OVER (PARTITION BY id ORDER BY creationdatetime DESC) AS row FROM [intranet].[dbo].handbook_appendix_data WHERE id = ' 转换为数据类型 int。

```
DECLARE @sql nvarchar(500)
DECLARE @table varchar(40)
SET @table = 'handbook_section_data';
SET @table = 'handbook_appendix_data';

DECLARE @parentid INT
DECLARE @id INT
DECLARE @published INT
DECLARE @orderid INT
SET @parentid = 2
SET @id = -1
SET @published = 1

SET @sql = N'SELECT @orderid = t.orderid FROM 
(SELECT *, ROW_NUMBER() OVER (PARTITION BY id ORDER BY creationdatetime DESC) AS row FROM [intranet].[dbo].'+@table+' WHERE id = '+@id+' AND published = '+@published+') AS t
WHERE t.published = '+@published+' AND t.row = 1';
EXEC SP_EXECUTESQL @sql, N'@orderid INT OUTPUT', @orderid = @orderid OUTPUT --Get the OrderID from ID

PRINT @orderid 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T15:44:35.753

您需要将您的`@id`和`@published`ints 转换为 varchar

```
 convert(varchar(50),@published) 
```

IE

```
SET @sql = N'SELECT @orderid = t.orderid FROM 
(SELECT *, ROW_NUMBER() OVER (PARTITION BY id ORDER BY creationdatetime DESC) AS row FROM [intranet].[dbo].'+@table+' WHERE id = '+     convert(varchar(50),@id) +' AND published = '+     convert(varchar(50),@published) +') AS t
WHERE t.published = '+convert(varchar(50), @published) +' AND t.row = 1'; 
```

一个更好的解决方案是避免字符串连接，并使用你已经在做的那样传递`@id`and`@published`参数，或者完全质疑动态 SQL 的要求？`sp_executesql``@orderid`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T15:44:49.183

您需要将整数变量转换为字符类型：

```
 ....
 WHERE id =' + cast(@id as varchar(32)) + ' AND published = ' + cast(@published as varchar(32)) + ') AS t ... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T15:44:50.427

`WHERE t.published = '+@published+' AND t.row = 1'`

`@published`是一个`int`。SQL Server 已决定`+`必须在两个`int`s 之间，并尝试将字符串转换为`int`.

`@published`要阻止这种情况，请改为强制成为一个字符串 - 然后它添加两个字符串（连接）：

`WHERE t.published = '+CONVERT(varchar(10),@published)+' AND t.row = 1'`

# java - m2eclipse 解析工作区工件和 tld 文件

> ID：13124901
> 
> 赞同：1
> 
> 时间：2012-10-29T15:42:28.173
> 
> 标签：java, maven, m2eclipse, taglib

我们有一个多模块的 Maven 项目。其中一个子模块是标签库。我们使用 m2eclipse（Spring Tool Suite 3.1）进行 eclipse。

**当我在没有**“解决工作区工件”的情况下启动 mvn jetty:run inside 时，一切运行正常。我们的 taglib jar 是从本地 maven 存储库中提取的。美好的。

**当我使用**“解决工作区工件”启动 mvn jetty:run inside时，我们的标签不会被拾取。不是运行标记处理程序，而是将标记按原样打印到 html 中。

我猜想 servlet 容器（码头）的 tld 扫描不适用于 m2eclipses 功能“解决工作区工件”。

当然，我们可以将我们的标签库移动到一个独立的项目中。然后我们仍然可以为所有其他子模块享受“工作区工件解析”的好处。

有没有人有更好的解决方案将标签库作为子模块保留？

# meteor - 不知道如何使用 Meteor 框架创建 Todo 应用程序

> ID：13124904
> 
> 赞同：0
> 
> 时间：2012-10-29T15:42:47.277
> 
> 标签：meteor

我尝试在不使用示例流星终端注释的情况下复制 todos 应用程序

我遵循的步骤，（我使用的是 Ubuntu 12.04 版本）在终端中 - meteor create todos - 创建了 todos

默认 *.html、*.css、*.js 在 todos 文件夹下创建，我删除并替换了实际的 todo 工件（例如，客户端、服务器、公共文件夹到根目录）-> 尝试运行应用程序- UI 出现但功能中断

我只是想知道什么是创建类似于 todos 应用程序结构的应用程序的理想方式。这可能会帮助其他人创建更大的应用程序......目前我停留在单个 *.js 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T17:30:24.600

每个项目还有一个 .meteor 目录。你也是抄的吗？

我使用 vagrant (https://github.com/pixelhandler/vagrant-dev-env) 来安装所有依赖项并让应用程序运行良好。

我就像文档说的那样使用了“meteor create myapp”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T06:26:29.017

我的坏我找到了，只需在终端上使用这个评论

> 流星列表——使用

上面的注释将列出你当前使用的所有包流星项目

只需将这些项目添加到新创建的流星项目并编写自己的结构，我找到了另一种方式来构建我尽快发布的项目......

> 流星列表——使用
> 
> *   下划线
> *   骨干
> *   可蜘蛛
> *   帐户-ui
> *   账号-微博
> *   帐户-谷歌
> *   帐户-facebook
> *   帐户密码
> *   账户-推特
> *   jQuery
> *   保留输入

有趣的事实是 todo 示例有两个版本一，带有安全和非安全包 - 开箱即用的构建版本分别为 0.4.2 和 0.5.0...

# java - Java ExecutorService 获取所有任务的反馈

> ID：13124905
> 
> 赞同：3
> 
> 时间：2012-10-29T15:42:48.970
> 
> 标签：java, executorservice

我想向多个（500,1000,2000）个用户发送电子邮件。

我已经使用`ExecutorService`.

但是现在我想从总记录中收集发送成功的电子邮件数量和失败的电子邮件数量。

我已经实现了这样的：

```
int startValue=0;
int endValue=0;
List userEmailList = getListFromDB();
ExecutorService  e = Executors.newFixedThreadPool(10);
Collection c = new ArrayList();

while (someflag) 
{  
// in MyTask class I am sending email to users.
c.add(new MyTask(startValue, endValue,userEmailList));  
}    
e.invokeAll(c);   //Here I am calling invokeall .
pool.shutdown();

public class MyTask implements Callable<String> { 
  MyTask(startValue, endValue,userEmailList){
  }

  public String call(){
//e.g.   batch 1 will have  - startValue => endValue   = 0 -100
//e.g.   batch 2 will have  - startValue => endValue   = 101 -199
//e.g.   batch 3 will have  - startValue => endValue   = 200 -299
//e.g.   batch 4 will have  - startValue => endValue   = 300 -399
//e.g.   batch 5 will have  - startValue => endValue   = 400 - 499

for(int i=startValue;i<endValue;i++){
      sendEmailToUser(userEmailList.get(i)){
}
 } 
```

}

但是 future.get() 返回我完成的任务数。所以从上面的代码中它会返回我 5 个任务。

但我想要输出为没有失败的电子邮件和成功发送的电子邮件的数量。

例如，如果有 500 个电子邮件用户，如果有 20 个失败，那么输出应该是 480 成功和 20 失败。

但是使用上面的代码，我只得到没有任务。即5个任务

谁能告诉我如何从所有并发任务中获得反馈（*不是*完成的任务数量）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T15:50:53.787

您`MyTask`返回 a `String`(implements `Callable<String>`)，这在您的情况下没有多大意义。您可以自由返回您想要的任何其他类型。不幸的是，您需要一些简单的 POJO 来包含结果，例如：

```
public class Result {

    private final int successCount;
    private final int failureCount;

    public Result(int successCount, int failureCount) {
        this.successCount = successCount;
        this.failureCount = failureCount;
    }

} 
```

并在给定批次完成后返回它（实施`Callable<Result>`）。当然，您`MyTask`将必须跟踪有多少电子邮件失败并返回正确的值`Result`。

但是，我看到了几种可以改进代码的方法。首先，而不是传递`startValue, endValue`范围来`MyTask`使用`userEmailList.subList(startValue, endValue)`- 这将大大简化您的*代码*：

```
new MyTask(userEmailList.subList(startValue, endValue));
//...

public class MyTask implements Callable<Result> { 
    MyTask(userEmailList){
    }

    public Result call(){
        for(email: userEmailList) {
            sendEmailToUser(email);
            //collect results here
        }
        return new Result(...);
    }
 } 
```

另一方面，创建`MyTask`只发送一封电子邮件并没有错。您无需在给定批次中汇总计数，您只需检查一项任务（一封电子邮件）的结果 - 没有任何内容或异常（或单个`Boolean`）。它更容易，不应该更慢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T15:48:44.583

我可以看到您的调用方法被声明为返回一个字符串，但您的代码没有返回任何内容（可能是不完整的代码段）。而且从您的陈述中，我了解到您正在返回任务是否完成，而不是邮件是否已发送。您可以`sendEmailToUser`根据邮件是否已成功发送成功返回失败并使用获取结果`Future.get`

# javascript - 如何删除内容安全策略的不安全内联代码？

> ID：13124907
> 
> 赞同：5
> 
> 时间：2012-10-29T15:42:52.297
> 
> 标签：javascript, django, content-security-policy

我想使用内容安全策略并使我的 Django Web 应用程序安全，而没有任何不安全的内联代码。但是，虽然将大部分 JavaScript 代码移动到外部文件很容易，但我也有一段我不知道修复的内联代码。我正在使用 Django，并且我在 Django 模板上下文中有一些变量，我想将其 pqww 转换为 JavaScript。所以目前我只是将它作为内联 JavaScript 输出。但由于 CSP，这不起作用。

```
<script type="text/javascript">
    /* <![CDATA[ */
    var documentURL = '{% filter escapejs %}{{ document.get_document_url }}{% endfilter %}';
    /* ]]> */
</script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T23:36:55.410

将评论放入答案形式并添加一点......

最简单的方法是生成带有属性集的标签。我不知道 django，所以我将它留在纯 html 中：

```
<input type="hidden" id="mything" value="<MY VALUE>"> 
```

当我有多个相关值时，我可能会将它们放入同一个元素中：

```
<span class="hidden" data-attribute1="<VALUE1>" data-attribute2="<VALUE2>">
<!-- rename 'attributeN' to something meaningful obviously --> 
```

无论哪种情况，只需使用 JS 读取值（为简洁起见，使用 jquery）

```
$('#mything').data("attribute1") 
```

或者，如果您需要一个复杂的对象，请将其作为 html 实体转义数据放在一个跨度中：

```
<span class="hidden" id="data-container">
  <your html-escaped JSON>
</span> 
```

并在外部文件中读取它：

```
var myObject = JSON.parse($('#data-container').html()); 
```

这也在[https://www.owasp.org/index.php/XSS_(Cross_Site_Scripting)_Prevention_Cheat_Sheet#RULE_.233.1_-_HTML_escape_JSON_values_in_an_HTML_context_and_read_the_data_with_JSON.parse](https://www.owasp.org/index.php/XSS_(Cross_Site_Scripting)_Prevention_Cheat_Sheet#RULE_.233.1_-_HTML_escape_JSON_values_in_an_HTML_context_and_read_the_data_with_JSON.parse)

# ruby - HTTParty中如何设置端口

> ID：13124908
> 
> 赞同：6
> 
> 时间：2012-10-29T15:42:56.303
> 
> 标签：ruby, ssl, httparty

我读到 HTTParty[如果端口设置为 443 则](http://railstips.org/blog/archives/2008/07/29/it-s-an-httparty-and-everyone-is-invited/)使用 SSL ，但我看不到如何设置端口。有人可以为我澄清一下吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T16:06:33.403

检查规格：

[https://github.com/jnunemaker/httparty/blob/82a90c1b93b076f9d2d7410123c2b5d609401a1f/spec/httparty/request_spec.rb#L41](https://github.com/jnunemaker/httparty/blob/82a90c1b93b076f9d2d7410123c2b5d609401a1f/spec/httparty/request_spec.rb#L41)

目标 URL 应使用端口 443。只需`:443`在目标 URI 的末尾添加 就足以使 HTTParty 使用 SSL。

顺便说一句，HTTPS URL 也将使用 SSL。

例子：

```
http://foo.com     => no SSL
https://foo.com    => SSL
http://foo.com:443 => SSL 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-03-25T02:33:16.560

它实际上默认使用 HTTPS，除非端口是 80 并且请求是 HTTP：

```
context "using port 80" do
  let(:uri) { URI 'http://foobar.com' }
  it { should_not use_ssl }
end

context "using port 443 for ssl" do
  let(:uri) { URI 'https://api.foo.com/v1:443' }
  it { should use_ssl }
end

context "https scheme with default port" do
  it { should use_ssl }
end

context "https scheme with non-standard port" do
  let(:uri) { URI 'https://foobar.com:123456' }
  it { should use_ssl }
end 
```

[https://github.com/jnunemaker/httparty/blob/master/spec/httparty/connection_adapter_spec.rb](https://github.com/jnunemaker/httparty/blob/master/spec/httparty/connection_adapter_spec.rb)

这是我的规格：

```
describe Foo do
  it 'is https' do
    adapter = HTTParty::ConnectionAdapter.new(URI(subject.base_uri))
    expect(adapter.connection.use_ssl?).to eq(true)
  end
end 
```

# login - Instagram 登录

> ID：13124910
> 
> 赞同：-5
> 
> 时间：2012-10-29T15:43:00.727
> 
> 标签：login, instagram-api

我是 Instagram API 的新手，我非常有兴趣使用它为我正在构建的网站创建登录名，作为用户获得访问权限的另一个选项。我已经简要查看了文档，但仍然没有真正了解如何实现这一点。任何帮助/链接/文档都会非常有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-12-30T12:51:53.063

你看到这个文档了吗？它真的很准确，所以我建议您看一下，然后如果您仍然对此有具体问题，只需编辑您的问题，我会看看是否可以回答。

[http://instagram.com/developer/authentication/](http://instagram.com/developer/authentication/)

# python - UWSGI 在 Django 中的管理员登录表单中添加双斜杠

> ID：13124913
> 
> 赞同：2
> 
> 时间：2012-10-29T15:43:07.560
> 
> 标签：python, django, uwsgi, mezzanine

在 UWSGI 后面运行 Django，我设置了一个*几乎*可以完美运行的 Mezzanine 实例。唯一的问题是管理员登录页面无法正常工作。如果您只是尝试正常登录，则浏览器将被重定向到`http://admin/`. html 表单操作属性设置为`//admin/`而不是`/admin/`因此浏览器将“admin”视为域名而不是当前域的根目录。

我尝试过浏览 Django 和 Mezzanine 包代码，但我看不到任何应该导致多余斜线的东西。我发现一个网页说更改`settings.FORCE_SCRIPT_NAME`为`"/"`可能会导致这种情况，但我没有覆盖默认值，`None`所以这不应该是原因。

在 urls.py 我有以下内容（我认为这是默认设置）：

```
urlpatterns = 模式（“”，

    # 在此处更改管理员前缀以使用备用 URL
    # 管理界面，这会稍微安全一些。
    ("^admin/", 包括(admin.site.urls)),

  ……

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T21:45:21.767

搞了好久才知道是什么问题！我遵循了一些关于如何使用 nginx 设置 uwsgi 的说明，其中包含一行说`uwsgi_param SCRIPT_NAME /;`. 的目的`SCRIPT_NAME`是为 UWSGI 应用程序提供基本路径，因此在这种情况下，它用于双斜杠。我在金字塔中发现了同样的问题。我怀疑任何 UWSGI 应用程序都会发生这种情况。

# ninject - 如果不使用 OnePerRequestModule，Ninject 中 InRequestScope 的默认回退是什么？

> ID：13124916
> 
> 赞同：2
> 
> 时间：2012-10-29T15:43:15.733
> 
> 标签：ninject

我为控制台应用程序和 MVC Web 应用程序使用相同的 DAL 基础结构，我需要在 MVC Web 应用程序中为 InRequestScope 配置一些东西，但需要知道当 OnePerRequestModule 尚未配置时 InRequestScope 的默认回退是什么（就像我的控制台应用程序中的情况一样）。

**编辑** 我的 Ninject 版本是 3.0.1.10。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T17:22:13.617

阅读[Nate Kohari 的 Cache and Collect 文章](http://kohari.org/2009/03/06/cache-and-collect-lifecycle-management-in-ninject-20/)。

Ninject 的最新版本将它们分离`OnePerRequestModule`到一个`Ninject.Web.Mvc`程序集中，因此如果不在该上下文中工作，您甚至无法看到`InRequestScope`扩展。

对于控制台应用程序，您通常不会处理大量需要`Dispose`d 来来去去的请求，因此默认范围[`null`而`InTransientScope`不是指定范围] 和/或允许类的隐式自我注册可能会导致完全合适。但是一般来说，你最好弄清楚你的工作单元是什么，并在需要处理的东西需要处理时明确管理（因为对象不会被限定范围，不会进行处理，只有终结器会启动 [with墨菲定律规定的时间]）。

wiki的[范围部分](https://github.com/ninject/ninject/wiki/Object-Scopes)也值得一读。

# java - 每次更新查询耗时 0.1 秒

> ID：13124918
> 
> 赞同：0
> 
> 时间：2012-10-29T15:43:34.360
> 
> 标签：java, sqlite

我正在编写一个简单的 java 程序，它执行一个简单的任务：它输入一个文本文件夹，并返回每个文档频率最高的 5 个单词作为输出。

起初，我尝试在没有任何数据库支持的情况下这样做，但是当我开始遇到内存问题时，我决定改变方法并将程序配置为使用 SQLite 运行。现在一切正常，但是在数据库中添加单词需要很多时间（801 个单词需要 67 秒）。

这是我启动数据库的方式：

```
 this.Execute(
                "CREATE TABLE words ("+
                "word VARCHAR(20)"+
                ");"
    );
    this.Execute(
        "CREATE UNIQUE INDEX wordindex ON words (word);"
    ); 
```

然后，一旦程序计算了文件夹中的文档（假设为 N），我将 N 个计数器列和 N 个频率列添加到表中

```
 for(int i = 0; i < fileList.size(); i++)
        {
            db.Execute("ALTER TABLE words ADD doc"+i+" INTEGER");
            db.Execute("ALTER TABLE words ADD freq"+i+" DOUBLE");
        } 
```

最后，我使用以下函数添加单词：

```
public void AddWord(String word, int docid)
{

    String query = "UPDATE words SET doc"+docid+"=doc"+docid+"+1 WHERE word='"+word+"'";
    int rows = this.ExecuteUpdate(query);

    if( rows <= 0)
    {
        query = "INSERT INTO words (word,doc"+docid+") VALUES ('"+word+"',1)";
        this.ExecuteUpdate(query);
    }
} 
```

我做错了什么，或者更新查询需要这么长时间才能执行是正常的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T16:23:27.500

将所有命令包装在一个事务中，否则每个命令都会获得一个事务（具有关联的存储同步）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T15:48:42.927

每秒 12 次很慢，但并非不合理。对于 MySQL 之类的数据库，我希望它使用 HDD 存储磁盘接近 100/秒。

# android - 如何在从活动发送的自定义视图中持续检查布尔值的状态？在安卓中

> ID：13124920
> 
> 赞同：1
> 
> 时间：2012-10-29T15:43:42.483
> 
> 标签：android

我是stackoverflow的新手！我一直在 android 中开发一个应用程序，但在特定点上卡住了。

我有一个活动（活动 1），它有四个按钮和一个画布。画布是在自定义视图（视图 1）中创建的，然后通过 xml 文件将其绘制到活动中。我想将画布作为 jpg 文件保存到我的 SD 卡中。保存操作必须在按下按钮时发生。

我打算如何工作如下：通过单击按钮，布尔值设置为 true。这个布尔值必须从活动 1 发送到绘制画布的视图 1。该视图 1 将监视布尔值是否设置为真或假。如果布尔值设置为 true，则会运行一段代码，将画布保存为 jpg。

我的问题在于布尔值的监控。如何在自定义视图（视图 1）中持续监控布尔值的状态？

活动1：所以在这里我有我的主要活动，其中我有一个按钮，单击时将布尔值设置为true。（我将代码剥离到论坛的基本部分）

```
public class ShowImage extends Activity implements ColorPickerDialog.OnColorChangedListener {

 public boolean saveCanvas = false;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    setContentView(R.layout.image);

 Button saveButton = (Button)findViewById(R.id.savePic);
    saveButton.setOnClickListener(saveListener);
}

private OnClickListener saveListener = new OnClickListener(){
    public void onClick(View v) {
        saveCanvas = true;          
}; 
```

视图 1：这是我创建的用于绘制画布的自定义视图。在这段代码中，我想持续监控我刚刚在 Acitivty 1 中创建的布尔值的状态。

```
public class MyView extends View {

    boolean saveCanvas = false;

Context context;

public MyView(Context c, AttributeSet as) {
    super(c, as);
    ....    
}

//CONTINUOUSLY MONITOR THE STATE OF THE BOOLEAN
//IF TRUE SAVE PICTURE, ELSE CONTINUE CODE

 @Override
protected void onSizeChanged(int w, int h, int oldw, int oldh) {            
    super.onSizeChanged(w, h, oldw, oldh);        
    ....
}

@Override
protected void onDraw(Canvas canvas) {      
    ....
}

} 
```

我希望我的问题以某种方式清楚，并希望我提供了足够的代码来让有人帮助我。如果需要更多信息，请告诉我。

干杯!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T16:03:35.583

如果我理解正确，您希望在用户点击按钮后立即将当前画布保存为 jpg。在这种交互式情况下，轮询布尔值以更改不是您想要的方式。用户操作正在引发应用程序操作，因此您应该告诉视图在用户单击按钮时捕获图片。

例如，视图可以有一个方法

```
 public void capturePicture(){
      // capture the canvas as a jpg
  } 
```

然后在您的 onClick 处理程序中，您只需调用此方法

```
public class ShowImage extends Activity implements ColorPickerDialog.OnColorChangedListener {

 public boolean saveCanvas = false;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        setContentView(R.layout.image);

     Button saveButton = (Button)findViewById(R.id.savePic);

        saveButton.setOnClickListener(saveListener);
    }

    private OnClickListener saveListener = new OnClickListener(){
        final MyView theView = (MyView)findViewById(R.id.viewID);
        public void onClick(View v) {
            theView.capturePicture();          
    }; 
```

# ios - 在设备上将 GIF 转换为 MP4

> ID：13124923
> 
> 赞同：5
> 
> 时间：2012-10-29T15:44:00.800
> 
> 标签：ios, mpmovieplayercontroller, gif, mp4

是否可以使用远程（但如果需要我可以先下载）GIF 序列并在设备上制作 MPMoviePlayerViewController 可播放的 mp4？

我曾尝试使用[http://api.online-convert.com/](http://api.online-convert.com/)，但 API 不适合，而且免费版本对于我们的需求来说太受限制了。

[iOS 的 Imagemagick](https://www.imagemagick.org/script/download.php#iOS)似乎也不包括 GIF 支持。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T09:10:45.930

这并不容易。[这里](https://gist.github.com/4104323)有一个解决方案的要点片段。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-02-24T06:41:22.287

斯威夫特 3.0 版本。

[https://gist.github.com/powhu/00acd9d34fa8d61d2ddf5652f19cafcf](https://gist.github.com/powhu/00acd9d34fa8d61d2ddf5652f19cafcf)

用法

```
let data = try! Data(contentsOf: Bundle.main.url(forResource: "gif", withExtension: "gif")!)
let tempUrl = URL(fileURLWithPath:NSTemporaryDirectory()).appendingPathComponent("temp.mp4")
GIF2MP4(data: data)?.convertAndExport(to: tempUrl, completion: { }) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-05T06:39:17.023

1st - 将所有图像与 GIF 分开。第二 - 从单独的图像创建视频。

请检查这个。我认为你可以解决你想要的。使用此链接，您可以轻松地将 GIF 文件转换为 MP4。点击 [https://github.com/dennygajera/gifToMp4](https://github.com/dennygajera/gifToMp4)

# c# - .net/c#中的android设备管理

> ID：13124924
> 
> 赞同：1
> 
> 时间：2012-10-29T15:44:02.697
> 
> 标签：c#, java, android, .net, mobile

我可以使用 .NET 而不是 Java 在 Android 设备上应用企业策略吗？

我找到了“AndroidLib - .NET Android 设备通信和管理库”，但它似乎是较低级别的东西，而不是企业策略管理库。此外，它是 Java 的包装器，这正是我想要避免的。

还有其他选择吗？

# javascript - 使用 EasyXDM 时外域和子域的区别？

> ID：13124934
> 
> 赞同：0
> 
> 时间：2012-10-29T15:44:41.690
> 
> 标签：javascript, cross-domain

[使用EasyXDM](http://easyxdm.net)时，外部域和子域之间有什么区别吗？

我想知道：

*   安全问题
*   跨浏览器支持
*   速度
*   任何小事或大事

我真的找不到太多关于这个的信息，所以我认为它必须是相同的？

为了进一步解释哪一个是最好的设置：

1.  example.com <-> sub.example.com
2.  example.com <-> sub.other.com

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T08:52:20.773

我发现有一件事让这件事变得更容易`document.domain`：

> 同源规则有一个例外。脚本可以将 document.domain 的值设置为当前域的后缀。如果这样做，则较短的域将用于后续的来源检查。
> 
> 例如，假设 [http://store.company.com/dir/other.html](http://store.company.com/dir/other.html)文档中的脚本执行以下语句： document.domain = "company.com";
> 
> 该语句执行后，页面将通过 [http://company.com/dir/page.html](http://company.com/dir/page.html)的来源检查。但是，同理，company.com 无法将 document.domain 设置为 othercompany.com。

来源：[https ://developer.mozilla.org/en-US/docs/Same_origin_policy_for_JavaScript](https://developer.mozilla.org/en-US/docs/Same_origin_policy_for_JavaScript)

# c# - 将数据发送到 Windows 窗体应用程序

> ID：13124936
> 
> 赞同：2
> 
> 时间：2012-10-29T15:44:42.830
> 
> 标签：c#, .net, winforms, c#-4.0, communication

我正在开发一个使用 Windows 自动启动的程序。该程序是`windows-forms`用`C#`. 当它启动时，它会自动隐藏自己并显示一个托盘图标。所以它只在托盘中可见，而不是在任务栏中，而不是作为窗口。

现在我想以某种方式向正在运行的 Windows 窗体发送一个 ID（一个简单的 int 编号），并且该窗体应该自动显示一个带有收到编号的消息框。

应该直接发送，而不是通过数据库或被监视的文本文件。

有没有办法将数据发送到打开的 Windows 窗体？

任何帮助表示赞赏:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T15:52:14.763

命名管道怎么样？

它们是持久的，并且易于访问。这是一篇详细介绍 2.0 和 3.5 实现的博文： [http ://www.switchonthecode.com/tutorials/dotnet-35-adds-named-pipes-support](http://www.switchonthecode.com/tutorials/dotnet-35-adds-named-pipes-support)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-29T15:49:16.573

您可以使用标准的 Windows API `SendMessage`（同步）或`PostMessage`（异步/发送并忘记）。要使用这些 API，您必须知道 Windows 窗体/应用程序主窗体的句柄。

还有其他方法，但这可能是迄今为止最简单的方法，并且可以在相同或其他过程中工作，并且对于仅需要传递的整数来说非常轻量级。

# list - 通过公共字段附加带有共享点列表的外部列表

> ID：13124938
> 
> 赞同：1
> 
> 时间：2012-10-29T15:44:44.857
> 
> 标签：list, join, sharepoint-2010, external

我有一个带有表的数据库（SQLSERVER）（我在 SahrePoint 中创建了一个外部列表）：

> IDStore : 整数
> 
> 地址商店：文本

我有一个包含字段的 SharePoint 列表：

> 编号：整数
> 
> 名称存储：文本
> 
> IDStode：整数

我想看看：

> IDStore
> 
> 名称存储
> 
> 地址商店

我不能使用 Visual Studio 我必须使用 SharePoint Designer。可能吗 ？我创建了一个链接数据源，并在我的两个源之间建立了连接，但是当我在数据视图中使用它时，我看不到我的两个列表链接。没有加入吗？那么我的两个列表都有“IDStore”字段。

我该怎么办？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-26T03:01:54.607

我不相信 SharePoint 2007-2013 支持将外部列表加入 SharePoint 列表。

# selenium - href 元素的 Xpath

> ID：13124942
> 
> 赞同：16
> 
> 时间：2012-10-29T15:44:52.337
> 
> 标签：selenium, selenium-rc, selenium-webdriver, xpath

我需要单击下面的 href 元素，该元素存在于类似的 href 元素中。

```
<a id="oldcontent" href="listDetails.do?camp=1865"><u>Re-Call</u></a> 
```

谁能提供我xpath来点击上面的href链接？在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-29T18:03:01.303

试试下面的定位器。

```
selenium.click("css=a[href*='listDetails.do'][id='oldcontent']"); 
```

或者

```
selenium.click("xpath=//a[contains(@href,'listDetails.do') and @id='oldcontent']"); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-04-25T11:29:45.777

这工作正常试试这个代码 -

```
selenium.click("xpath=//a[contains(@href,'listDetails.do') and @id='oldcontent']"); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-03-16T16:07:04.073

这将为您提供通用链接：

```
selenium.FindElement(By.XPath("xpath=//a[contains(@href,'listDetails.do')")).Click(); 
```

如果你想让它指定一个参数，那么你必须对每个参数进行测试：

```
...
int i = 1;

selenium.FindElement(By.XPath("xpath=//a[contains(@href,'listDetails.do?camp=" + i.ToString() + "')")).Click();
... 
```

上面可以利用一个for循环来导航到每个营地号码的页面，这可以验证一个静态营地列表。

如果代码不完美，请原谅，我没有测试过自己。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-20T19:19:10.907

你有没有尝试过：

```
//a[@id='oldcontent']/u[text()='Re-Call'] 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-04-27T08:40:08.427

对我来说工作了 //a[text()='Re-Call']

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-16T08:55:38.657

定位锚元素的最佳方法是使用`link=Re-Call`：

```
selenium.click("link=Re-Call"); 
```

它会工作..

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-29T15:52:50.370

下面工作正常。

```
//a[@id='oldcontent'] 
```

如果您尝试过某些方法但没有奏效，请告诉我们，否则像这样简单的方法应该可以。

# sql-server - 将 NVARCHAR(255) 转换为 DATE

> ID：13124944
> 
> 赞同：8
> 
> 时间：2012-10-29T15:44:58.867
> 
> 标签：sql-server, datetime, sql-server-2012, type-conversion

我正在尝试使用 Excel 将一些旧的 SQL Server 数据传输到 SQL Server。似乎`Import/Export Data`应用程序自动将大多数数据列设置为`NVARCHAR(255)`. 我遇到的问题是，我的一个列应该是一种`DATE`类型，但其中的所有数据看起来都像这样`18.08.2000 14:48:15`。

因此，当我尝试使用此查询时：

```
SELECT CONVERT(Date, DATE_TIME,  113)
FROM someTable 
```

我收到此错误：

> Msg 9807, Level 16, State 0, Line 1
> 输入的字符串不遵循样式 113，要么更改输入字符串，要么使用不同的样式。

`[styles]`在我的情况下，[CAST 和 CONVERT (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms187928.aspx)中的任何一个都不起作用。

非常感谢任何建议或帮助。

**解决了：**

```
UPDATE myTable
SET columnName = CONVERT(NVARCHAR(255),CONVERT(SMALLDATETIME, columnName,105))
ALTER TABLE myTable
ALTER COLUMN columnName SMALLDATETIME 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-29T15:49:53.740

据我所知 - 风格没有。103（*英国/法国*）应该工作 - 不是吗？

```
DECLARE @input NVARCHAR(255)

SET @input = '18.08.2000 14:48:15'

SELECT CONVERT(DATETIME, @input, 103) 
```

给我的输出：

```
2000-08-18 14:48:15.000 
```

这似乎很合理，不是吗？

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-29T17:41:38.140

因此，如果它对任何人有用，这就是将数据类型 NVARCHAR 更改为 DATETIME 的确切代码：

```
UPDATE myTable
SET columnName = CONVERT(NVARCHAR(255),CONVERT(SMALLDATETIME, columnName,105))
ALTER TABLE myTable
ALTER COLUMN columnName SMALLDATETIME 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-29T15:50:29.460

如果您使用的是 SQL Server 2012，请尝试：

```
PARSE(Date AS datetime USING 'en-GB') 
```

或者，如果这不起作用，请尝试：

```
PARSE(Date AS datetime USING 'Et-EE') 
```

爱沙尼亚文化特别使用“。”。作为日期分隔符 ( `d.MM.yyyy H:mm:ss`) 所以它应该可以工作。

（两者似乎都可以在 SQL Fiddle 上正常工作）

# exception - 实体异常消息 至少有一个输入路径无效，因为它太长或格式不正确

> ID：13124945
> 
> 赞同：3
> 
> 时间：2012-10-29T15:45:11.410
> 
> 标签：exception, entity-framework-4, entity

使用 EF4 我尝试建立连接，但收到此错误消息 **“实体异常消息至少有一个输入路径无效，因为它太长或格式不正确。”**

这使用了来自[http://msdn.microsoft.com/en-us/library/bb738533.aspx](http://msdn.microsoft.com/en-us/library/bb738533.aspx)的示例，但传入了我自己的服务器名称。什么是“输入路径”当我从 Web 应用程序运行它时它很好，当我尝试在通过连接的单元/集成测试中运行它时（因为 app.config 可能不存在）我收到此错误。

这是怎么回事？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-04-22T20:51:22.350

我遇到过同样的问题。我正在以以下方式编写代码

```
 ebuilder.Metadata = @"Model1.csdl, Model1.ssdl,Model1.msl"; 
```

然后经过一些研究，我将其更改为

```
 ebuilder.Metadata = @"res://*/Model1.csdl|res://*/Model1.ssdl|res://*/Model1.msl"; 
```

奇迹发生了，它开始起作用了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-16T19:14:37.063

我在 EF6 中遇到了同样的错误。当我尝试从数据库中获取某些东西时，抛出了这个错误。我通过更正我的connectinString 的元数据部分解决了这个问题。您必须具有如下元数据部分： metadata=res:// */myModel.csdl|res://* /myModel.ssdl|res://*/myModel.msl;

# java - 每个资源的 Jersey 缓存控制

> ID：13124948
> 
> 赞同：1
> 
> 时间：2012-10-29T15:45:22.700
> 
> 标签：java, jersey, jax-rs, cache-control, restful-architecture

是否可以为每个资源定义缓存控制级别？

是否有一些注释可以放在每个 Resource 类之上，以便以自定义方式指定缓存控制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T16:13:38.997

为了解决这个问题，我最终定义了一个`@Cache`方面。我遇到了一些警告：

*   缓存的方法需要返回一个`Response`对象（不是 POJO），以便方面可以修改标头。

*   如果你想使用 ETags，那么包含方法的类（或方法参数本身）需要公开，`@Request`以便方面可以检查传入的标记。

*   确保您的方法参数与您的方法名称相结合实际上会创建唯一键。这里的另一个问题是响应类型。客户端可能会发出两个具有相同参数但响应类型不同的请求。

*   您可以轻松地将选项添加到方面以`max-age`根据每个方法进行控制和其他参数。

这是我的`invoke`方法：

```
@Override
public Object invoke(MethodInvocation invocation) throws Throwable {
  if (Response.class != invocation.getMethod().getReturnType()) {
    logger.warning(String.format("%s is @Cachable but does not return a Response object", invocation.getMethod()));
    return invocation.proceed();
  }

  Optional<Request> request = getRequest(invocation);
  if (!request.isPresent()) {
    logger.warning(String.format("%s is @Cachable but does not declare a public Request field named \"request\"", invocation.getMethod()));
    return invocation.proceed();
  }

  Object response = super.invoke(invocation);
  EntityTag responseTag = JaxRsUtil.getEntityTag(response);

  Response.ResponseBuilder builder = request.get().evaluatePreconditions(responseTag);
  if (null != builder) {
    logger.finer("Found matching etag: " + responseTag);
    return builder.build();
  } 
  CacheControl cc = new CacheControl();
  cc.setMaxAge(maxAge);
  builder = Response.fromResponse((Response)response).tag(responseTag).cacheControl(cc);
  return builder.build();
} 
```

# javascript - 在 IE 8/9 和 FF 中使用 jQuery 更改“onclick”事件（输入类型 = 按钮）将不起作用（IE 无法识别更改）

> ID：13124950
> 
> 赞同：-1
> 
> 时间：2012-10-29T15:45:27.260
> 
> 标签：javascript, jquery, sharepoint, onclick

```
<input id="UploadButton" type="button" value="Upload" onclick="xyz"/> 

<script language="javascript" type="text/javascript">
    $(function () {
        $().SPServices({
            operation: "GetList",
            listName: "Docs",
            async: false,
            completefunc: function (xData, Status) {
                id = $(xData.responseXML).find("List").attr("ID");
            }
        });

        reference = "./_layouts/Upload.aspx?List=" + id + "&amp;RootFolder=";
        $('#UploadButton2').attr("href", reference);
        alert($('#UploadButton2').attr("href"));

        js = "javascript:" + "NewItem2(event, &quot;" + reference + "&quot;);javascript:return false;";
        $('#UploadButton').attr("onclick", js);
        alert($('#UploadButton').attr("onclick"));
    });
</script> 
```

我找到了一些适合我的问题的东西或解决方案，但它不起作用。

我只想设置或更改输入类型（id=UploadButton）的“onclick”事件和

```
alert($('#UploadButton').attr("onclick")); 
```

给我来自“js”的字符串。到目前为止一切顺利......但如果我点击 UploadButton 没有任何反应。浏览器似乎无法识别更改。我当前代码中的解决方案并不是我过去几个小时尝试过的唯一一个。我尝试过的解决方案之一是使用 jQuery 的 so .click() 方法，但我不能通过 .click() 调用“NewItem2()”函数，对吗？我的主要目标是使用字符串“reference”的信息在 UploadButton 上调用“NewItem2()”函数。不幸的是，NewItem2() 是 Sharepoint 的一个函数，所以里面没有用我的双手编写的代码，但是如果我在代码中硬设置属性 onclick，则按钮工作正常：-/

上次我看到了很多不同的解决方案，但没有什么不适合我，但我认为失败在我的网站上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T15:47:52.527

要为该按钮设置`onclick`事件，您需要绑定一个匿名函数：

```
$( '#UploadButton' ).click( function () {
    // Do stuff here
} ); 
```

...或绑定另一个命名函数：

```
$( '#UploadButton' ).click( myClickHandler ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T16:12:55.290

您将调用 NewItem2 作为字符串，您将有更好的运气改变

```
js = "javascript:" + "NewItem2(event, &quot;" + reference + "&quot;);javascript:return false;";
$('#UploadButton').attr("onclick", js); 
```

至

```
$('#UploadButton').click( function (event) {
    NewItem2(event, reference);
    return false;
}); 
```

# javascript - 在 JavaScript 中读取文件的最简单方法是什么？

> ID：13124952
> 
> 赞同：0
> 
> 时间：2012-10-29T15:45:35.673
> 
> 标签：javascript, file-io

我知道以前有人问过这个问题，但我仍在学习 JavaScript，而且我无法看穿其他人答案的复杂性。我在与读取 JavaScript 的 HTML 文件相同的目录中有一个文本文件，并且该文本文件实际上只有一行。我希望能够从文本文件中抓取该行并将其放入字符串中。什么是一种非常简单的方法可以在 FF、IE 和 Chrome 中工作，并且除了浏览器选择之外，是相当普遍有效的？同样，我知道以前有人问过这个问题，但是我无法从我在其他地方看到的示例代码的复杂性中选择真正的方法。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T15:50:16.400

使用 jQuery 获取方法[http://api.jquery.com/jQuery.get/](http://api.jquery.com/jQuery.get/)

```
$.get(url).success(function(data, status, response) {
    var text = response.responseText;
    // use your one line text stored in text variable here
} 
```

*url*变量可以是相对的，因此您可以将文本文件名放在那里。例如，如果您的文本文件名为“mytext.txt”，并且在访问它的脚本的同一目录中，您输入：

```
 $.get("mytext.txt").success(function(data, status, response) {
        var text = response.responseText;
        // use your one line text stored in text variable here
    } 
```

请注意，此答案假定您使用 http 访问文本文件，并且脚本和文本文件都在同一个域中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T15:55:38.550

这很棘手，因为大多数浏览器默认情况下不允许 JS 从计算机的文件系统本地打开文件。不过，您可以使用 ajax 从 Web 服务器请求文本文件。为此，我会推荐 jQuery，因为正如您所说，它将非常“普遍有效”。在进行 ajax 调用时，请求必须遵守同源策略。通俗地说，如果您在 www.mysite.com，您可以请求 www.mysite.com/aTextFile.txt，但您无法请求 www.someothersite.com/aTextFile.txt

要使用 jquery 执行此操作，请参阅 momo 的答案。我打算输入同样的东西，但他/她打败了我。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T15:55:55.617

我能想到的最简单的方法是使用服务器端语言将文档的内容输出到页面中的某个位置（例如 invisible `textarea`），然后让 Javascript 读取它。没有 AJAX，没有库，而且速度非常快。

```
<textarea id="textarea"><?php include("test.txt") ?></textarea>

<script>
var str = document.getElementById("textarea").value;
</script> 
```

现在，这并不总是最好的方法，但与在任何地方使用异步 Javascript 和繁重的框架以牺牲 SEO 性能为代价相比......

# python - 在 python 中使用 slimXMPP 或其他客户端接收 GChat 消息？

> ID：13124954
> 
> 赞同：2
> 
> 时间：2012-10-29T15:45:53.510
> 
> 标签：python, client, google-talk

我有用于 python 的 slimXMPP，并且我使用 API 创建了发送消息的函数，虽然当我研究接收它们时我找不到任何东西，有人可以帮我解决这个问题，或者反驳这种可能性。谢谢。下面是我用来发送消息的代码，如果有帮助的话。

```
to = config.get('usermap', to[4:])
gmail_from_user = config.get('auth', 'email')
gmail_from_secret = config.get('auth', 'secret')

sys.stdout = stdouttmp
sys.stderr = stderrtmp
print "Sending chat message to " + to
xmpp = SendMsgBot(gmail_from_user, gmail_from_secret, to, message)
xmpp.register_plugin('xep_0030') # Service Discovery
xmpp.register_plugin('xep_0199') # XMPP Ping

sys.stdout = stdouttmp
if xmpp.connect(('talk.google.com', 5222)):
    xmpp.process(block=True)
else:
    sys.stdout = stdouttmp
    print("Unable to connect.")

sys.stdout = stdouttmp
sys.stderr = stderrtmp 
```

顺便说一句，我使用 .cfg 文本文件作为用户电子邮件和密码，以及一些联系人，然后将其解析为

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T17:38:48.380

我看到您正在使用[send_client.py](https://github.com/fritzy/SleekXMPP/blob/master/examples/send_client.py)示例。该示例的目的是如何可靠地登录、发送一条消息，然后注销。[您的用例是发送和接收消息，因此查看echo_client.py](https://github.com/fritzy/SleekXMPP/blob/master/examples/echo_client.py)示例会更好。

值得注意的是，为了接收消息，您将执行以下操作：

```
# in your __init__ method:
def __init__(...):
    # ...
    self.add_event_handler('message', self.recv_message)

def recv_message(self, msg):
    # You'll probably want to ignore error and headline messages.
    # If you want to handle group chat messages, add 'groupchat' to the list.
    if msg['type'] in ('chat', 'normal'):
        print "%s says: %s" % (msg['from'], msg['body']) 
```

同样，您需要从使用`SendMsgBot`示例切换，因为它在发送消息后会自动断开连接。

如果您需要任何帮助，请不要忘记sslough@conference.jabber.org 聊天室。

——兰斯

# escaping - 为什么我们有 DOS 的反斜杠和 linux 和 URL 的斜杠？

> ID：13124955
> 
> 赞同：-1
> 
> 时间：2012-10-29T15:45:55.893
> 
> 标签：escaping, backslash, slash

我同时使用 Windows 和 Linux，当我使用命令行时经常会感到困惑......

1>MS-DOS使用**反斜杠**`C:\Documents and Settings\user_name\Desktop\`

2>Linux使用**斜线**`/usr/lib`

3>URL 似乎使用**斜杠**`http://stackoverflow.com/questions/ask`

4>C++/C程序员经常使用**反斜杠**作为转义符，比如`\n or \t or \"`

项目 1-3 加上项目 4 的效果可能会令人困惑。我想知道为什么 MS-DOS 不使用（正向）斜杠就像其他所有内容一样，然后我们只能使用特殊的反斜杠作为转义字符。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T15:49:06.860

超级用户已经回答了这个问题：[https ://superuser.com/questions/176388/why-does-windows-use-backslashes-for-paths-and-unix-forward-slashes](https://superuser.com/questions/176388/why-does-windows-use-backslashes-for-paths-and-unix-forward-slashes)

让我引用它的要点：

> MS-DOS 2.0 在 1980 年代初期引入了 \ 作为目录分隔符。没有使用 / 的原因是 MS-DOS 1.0 已经使用 / 来引入命令行选项。它从 CP/M 中获取了 / 的这种用法，它从 VMS 中获取了它。

# python - 如何有效地传递参数（**kwargs in python）

> ID：13124961
> 
> 赞同：13
> 
> 时间：2012-10-29T15:46:07.100
> 
> 标签：python, inheritance, keyword-argument

我有一个继承自其他 2 个类的类。这些是基类：

```
class FirstBase(object):
      def __init__(self, detail_text=desc, backed_object=backed_object,
                   window=window, droppable_zone_obj=droppable_zone_obj,
                   bound_zone_obj=bound_zone_object,
                   on_drag_opacity=on_drag_opacity):
          # bla bla bla

class SecondBase(object):
      def __init__(self, size, texture, desc, backed_object, window):
          # bla bla bla 
```

这是孩子：

```
class Child(FirstBase, SecondBase):
       """ this contructor doesnt work
       def __init__(self, **kwargs):
          # PROBLEM HERE
          #super(Child, self).__init__(**kwargs)
       """
       #have to do it this TERRIBLE WAY
       def __init__(self, size=(0,0), texture=None, desc="", backed_object=None,
                    window=None, droppable_zone_obj=[], bound_zone_object=[],
                    on_drag_opacity=1.0):
          FirstBase.__init__(self, detail_text=desc, backed_object=backed_object,
                             window=window, droppable_zone_obj=droppable_zone_obj,
                             bound_zone_obj=bound_zone_object,
                             on_drag_opacity=on_drag_opacity)
          SecondBase.__init__(self, size, texture, desc, backed_object, window) 
```

我想很好地解决这一切，`**kwargs`但是当我调用第一个注释掉的构造函数时，我得到了`TypeError: __init__() got an unexpected keyword argument 'size'`.

任何想法我如何使它工作`**kwargs?`

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-29T15:59:31.317

您的问题是您仅尝试`super`在子类中使用。

如果您`super`也在基类中使用，那么这将起作用。每个构造函数都会“吃掉”它所接受的关键字参数，而不是将它们传递给下一个构造函数。当`object`调用 for 的构造函数时，如果有剩余的关键字参数，它将引发异常。

```
class FirstBase(object):
    def __init__(self, detail_text=None, backed_object=None,
                 window=None, droppable_zone_obj=None,
                 bound_zone_obj=None, on_drag_opacity=None, **kwargs):
        super(FirstBase, self).__init__(**kwargs)

class SecondBase(object):
    def __init__(self, size=(0,0), texture=None, desc="",
                 backed_object=None, window=None, **kwargs):
        super(SecondBase, self).__init__(**kwargs)

class Child(FirstBase, SecondBase):
    def __init__(self, **kwargs):
        super(Child, self).__init__(**kwargs) 
```

如您所见，它有效，除非您传递了一个虚假的关键字参数：

```
>>> Child()
<__main__.Child object at 0x7f4aef413bd0>
>>> Child(detail_text="abc")
<__main__.Child object at 0x7f4aef413cd0>
>>> Child(bogus_kw=123)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "test.py", line 14, in __init__
    super(Child, self).__init__(**kwargs)
  File "test.py", line 5, in __init__
    super(FirstBase, self).__init__(**kwargs)
  File "test.py", line 10, in __init__
    super(SecondBase, self).__init__(**kwargs)
TypeError: object.__init__() takes no parameters 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-29T16:10:27.697

我不喜欢这个解决方案，但你可以这样做：

```
class FirstBase(object):
  def __init__(self, *args, **kargs):
      kargs.get('karg name', 'default value')
      # bla bla bla

class SecondBase(object):
  def __init__(self, *args, **kargs):
      kargs.get('karg name', 'default value')
      # bla bla bla

class Child(FirstBase, SecondBase):
   def __init__(self, *args, **kargs):
      FirstBase.__init__(self, *args, **kargs)
      SecondBase.__init__(self, *args, **kargs) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T15:50:21.913

因为`FirstBase.__init__`没有`size`论据。您可以添加`size`参数或添加`**kwargs`到`FirstBase.__init__`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T15:57:17.287

尝试这样的事情。

```
class FirstBase(object):
      def __init__(self, detail_text, backed_object, window, droppable_zone_obj, bound_zone_obj, on_drag_opacity):
          # bla bla bla

class SecondBase(object):
      def __init__(self, texture, desc, backed_object, window, size=None):
          # bla bla bla 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-30T00:37:53.453

一个可能的黑客（但黑客是不好的，记住），是诉诸检查模块来获取你将要使用的函数的签名：

```
import inspect
#define a test function with two parameters function
def foo(a,b):
    return a+b

#obtain the list of the named arguments
acceptable = inspect.getargspec(f).args

print acceptable
#['a', 'b']

#test dictionary of kwargs
kwargs=dict(a=3,b=4,c=5)

#keep only the arguments that are both in the signature and in the dictionary
new_kwargs = {k:kwargs[k] for k in acceptable if k in kwargs}

#launch with the sanitized dictionary
f(**new_kwargs) 
```

这不是您应该在生产代码中使用的代码。如果函数拒绝某些参数，则意味着您可以获得读取代码的签名，并且只传递必要的密钥。带有inspect 的hack 的稳定性和可读性要差得多，所以只有在没有其他方法时才使用！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-08-21T07:55:48.370

Since you have control over the code, the easy way to let yourself just pass around **kwargs the way you want is to add a **kwargs parameter to the __init__ of both base classes, as so:

```
class FirstBase(object):
  def __init__(self, detail_text=desc, backed_object=backed_object,
               window=window, droppable_zone_obj=droppable_zone_obj,
               bound_zone_obj=bound_zone_object,
               on_drag_opacity=on_drag_opacity, **kwargs):
      # bla bla bla

class SecondBase(object):
      def __init__(self, size, texture, desc, backed_object, window, **kwargs):
          # bla bla bla 
```

The failure you had encountered is because your base classes only had named parameters, therefore when you pass an unknown name, the bouncer says you're not on my list. By adding **kwargs parameters to the __init__ functions of the base classes, they suddenly allow any arbitrary named value to simply be passed in, which is understandable since, after all, **kwargs is an open ended catch all, nothing of which is named, so how would it know what to exclude? It simply ends up a dictionary of named values in the eyes of the called code, which uses them or doesn't. You could completely ignore **kwargs.

The answer which at the moment of writing is currently accepted as the right one, by Dietrich, confused the essential issue -- it has nothing to do with super() at all, and his correction works simply because **kwargs were added and that opened the door for any arbitrary name.

If you don't have control over the code, you can:

*   pass arguments explicitly so as not to unpack *args too long, or **kwargs with unspecified names,
*   pop extraneous parameters out of kwargs using the dictionary pop function,
*   or you could use this helper meta-function:

    ```
    import inspect

    def anykwarg(function, *args, **kwargs):
        validargs = inspect.getargspec(function).args
        removals = [key for key in kwargs.keys() if key not in validargs]
        for removal in removals:
            del kwargs[removal]
        return function(*args, **kwargs) 
    ```

This anykwarg helper could be improved to check for a kwargs parameter and if present not remove any values from the kwargs passed in, and inspect.getargspec used above returns that information. Note, it is okay to del from kwargs in anykwarg because it is not a reference to some dictionary passed in, it is a local dictionary generated from parameters.

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2015-11-09T22:09:59.020

您不必像[@Dietrich Epp 接受的答案](https://stackoverflow.com/a/13125197/3765905)`super()`那样调用基类。您所做的就是将任何剩余的参数传递给基类，然后将它们丢弃；这是马虎。`kwargs``object`

当您这样做时`super(ChildClass, self).__init__(foo, bar, **kwargs)`， 的超类`ChildClass`必须期待**所有**参数`foo`、`bar`和`**kwargs`。因此，在您的情况下，收到错误`TypeError: __init__() got an unexpected keyword argument 'size'`意味着您的父类在其方法中`Child`没有`size`或没有。`**kwargs``__init__()`

当您`super()`调用每个`Firstbase`and`Secondbase`时，它们的构造函数将尝试解包`**kwargs`到它们的关键字参数中。**一切都`**kwargs`需要去某个地方。**任何剩余的东西（即不是由关键字参数指定的），例如`size`，都会引发您的 TypeError，除非剩余的东西还有另一个`**kwargs`可以进入。

# php - 从安卓手机到桌面网络浏览器的实时视频流

> ID：13124963
> 
> 赞同：0
> 
> 时间：2012-10-29T15:46:14.107
> 
> 标签：php, android, html, browser, video-streaming

我必须开发一个应用程序，在桌面浏览器和安卓智能手机上录制视频和音频，并在它们之间共享。就像Skype视频通话一样。

该应用程序将由这三个平台上的三个子应用程序组成：

*   智能手机（安卓java）
*   网络服务器（apache + php）
*   destkop 网络浏览器 (html5 + javascript + css)

* * *

1.  您能否向我推荐任何可以在这些平台（智能手机、Web 服务器、Web 浏览器）上帮助我的库？
2.  我是否能够**仅通过** `php`（用户日志记录、视频流...）来维护 Web 服务器上的所有工作？
3.  我是否可以 **通过** `html5`+来保持网络浏览器中的视频录制和播放，`js`还是**需要**使用`flash`/ `silverlight`？
4.  Web 服务器需要做什么？只需将视频流存储在内存中的某个位置，然后将其发送（*转发*）到网络浏览器？你能描述一下这应该如何更深入地工作吗？

我应该从什么开始？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T15:54:38.760

为此，您将不得不使用 RTSP（实时流协议），尝试学习此内容，有关详细信息，您可以查看此[链接](https://stackoverflow.com/questions/3186950/video-streaming-using-rtsp-android)

# php - php静态子类继承

> ID：13124964
> 
> 赞同：1
> 
> 时间：2012-10-29T15:46:33.097
> 
> 标签：php, oop

我最近开始以面向对象的方式在 php5 中进行开发，但我遇到了一些问题。我非常感谢您的帮助/建议。

忍受我，因为它最终一团糟:-(

这是我的场景（希望我能详细说明）：我有两个动态类，Client 和 Supplier，它们使用名为 Vocabulary 的静态类的方法。Vocabulary 是一个从源中提取词汇术语的类，该源可以是：纯文本文件、mongodb 数据库或 mysql 数据库。配置文件中的一个条目决定了应用程序将使用上述三种来源中的哪一种。

```
class Client {
    public function foo() {
        ...
        Vocabulary::getTerm();
        ...
    }
    ...
}

class Supplier {
    public function bar() {
        ...
        Vocabulary::getTerm();
        ...
    }
    ...
}

class Vocabulary {
    public static function useVocab($vocab) {
        $_SESSION['vocab'] = $vocab;
    }
    public static function getTerm($termKey) {...}
    ...
} 
```

我计划为我想要支持的每种类型创建 Vocabulary 子类，例如：Vocabulary_file、Vocabulary_mongodb 和 Vocabulary_mysql。Vocabulary_file 将覆盖其父 useVocab()，因为它需要执行额外的操作来设置 $_SESSION 变量，但 Vocabulary_mongodb 和 Vocabulary_mysql 不需要覆盖它们的 useVocab() 父方法（它们只需要设置 $_SESSION 变量）。所有三个词汇“子”类都将覆盖 getTerm() 方法。

以下是我尝试过的，这是我最终得到的一团糟:-(

*   对于 Vocabulary_mongodb 和 Vocabulary_mysql，由于 useVocab() 不存在而是从 Vocabulary 继承，“method_exists()”返回 true，并且该调用导致无限循环。
*   我在 Vocabulary 中显式调用 child 和在 child 类中调用 parent:: 看起来很奇怪。

喝了很多杯咖啡后，我已经筋疲力尽了，我的大脑也受损了。

```
// Class Vocabulary modified to make it call the desired "child" class too
class Vocabulary {
    // This would execute "child" class method
    private static function _callChild($method, $args) {
        $child_class = 'Vocabulary_' . Config::$vocab['type']; // Config::$vocab['type']     can be: file, mongodb or mysql
        if (method_exists($child_class, $method)) {
            return call_user_func_array($child_class . '::' . $method, $args);
        } else {
            return false;
        }
    }
    public static function useVocab($vocab) {
        $_SESSION['vocab'] = $vocab;
        self::_callChild(__FUNCTION__, compact('vocab'));
    }
    public static function getTerm($termKey) {
        $termKey = strtolower($termKey);
        self::_callChild(__FUNCTION__, compact('termKey'));
    }
    ...
}

class Vocabulary_file extends Vocabulary {
    public static function useVocab($vocab) {
        parent::useVocab($vocab);
        // some specific stuff here
    }
    public static function getTerm($termKey) {
        parent::getTerm($termKey);
        // some specific stuff here
    }
}

class Vocabulary_mongodb extends Vocabulary {
    public static function getTerm($termKey) {
        parent::getTerm($termKey);
        // some specific stuff here
    }
}

class Vocabulary_mysql extends Vocabulary {
    public static function getTerm($termKey) {
            parent::getTerm($termKey);
        // some specific stuff here
    }
} 
```

我想知道如何设计 Vocabulary 类以保持 Vocabulary::... 像 Client 和 Supplier 中的调用，并让 Vocabulary 知道哪个子类用于“Config”类中配置的类型。

任何建议将不胜感激。干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T15:52:47.133

该关键字`self`无法处理“后期静态绑定”。基本上，在父类中，`self`当它在它自己的静态函数中时认为它是父类（因为由于`self`遗留原因仍在编译时评估）。

您需要在父类中使用`static`而不是`self`（假设您有 php 5.3 或更高版本）。

顺便说一句：`parent`关键字的功能正如您所期望的那样，`parent`无论如何必须在编译时知道。

这是一个例子：

```
public static function getTerm($termKey) {
    $termKey = strtolower($termKey);
    static::_callChild(__FUNCTION__, compact('termKey'));
} 
```

如果您使用的是 php 5.2 及更早版本，则必须尝试破解，例如要求所有子类具有返回其类名的静态函数。我希望您使用的是 php 5.3 或更高版本...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T16:01:36.717

如果你使用所有`static`方法，你可能根本不使用OOP，它基本上只是全局函数调用。如果您希望使用多态性进行继承，您几乎需要实例化您的类。多态性来自于实例化对象可以是任何东西的事实，但是您在它们上调用相同的方法。例如：

```
abstract class Vocabulary {

    abstract public function getTerm($termKey);

}

class Vocabulary_File extends Vocabulary {

    public function getTerm($termKey) {
        // get from file
    }

}

class Vocabulary_MySQL extends Vocabulary {

    public function getTerm($termKey) {
        // get from database
    }

} 
```

你可以像这样使用这个多态：

```
if (mt_rand(0, 1)) {
    $vocab = new Vocabulary_File;
} else {
    $vocab = new Vocabulary_MySQL;
}

// This call is polymorphic.
//  What exactly it does depends on which class was instantiated.
$vocab->getTerm('foo'); 
```

这就是多态性真正有用的地方。接口( `getTerm($termKey)`) 是定义好的，类之间是不变的，但具体的实现会发生变化。如果您的代码是对 的硬编码调用`Vocabulary::getTerm()`，那不是多态性。对于您的结构，您还违反了一个重要的 OO 设计规则：父级不知道其子级，也不与子级交互。子代覆盖父代的功能，而不是相反。

您也不应该将`$_SESSION`用作全局存储的一种形式。保持对象自包含。

# php - PHP $_SESSION 数据丢失，因为 IE 上的框架集

> ID：13124966
> 
> 赞同：0
> 
> 时间：2012-10-29T15:46:41.380
> 
> 标签：php, internet-explorer, session, session-variables, frameset

我想开始说我已经为这个问题搜索了很多。经过一个多星期的尝试来解决它，我认为我几乎在那里。

是的，我确实把 session_start() - 不仅如此，因为我有 session.auto_start ！

一些访问者不使用 www 访问我的网站，而其他访问者则使用。在整个访问过程中，他们可能会经历域的变化（从 mydomain.com 到 www.mydomain.com，反之亦然）我丢失了 $_SESSION 数据并且发生了许多错误。

所以我将它添加到我的代码中：

```
session_write_close(session_id());
ini_set('session.cookie_domain', '.mydomain.com');
session_set_cookie_params(0, '/', '.mydomain.com');
session_start(); 
```

经过一些测试，从现在开始，我在 Chrome 和 Firefox 上完美地工作了。更改域时会话 ID 和数据保持不变。但是 - 毫不奇怪 - 它不适用于 IE。

我不知道，因为理论上 PHP 不支持浏览器。因此，无论用户代理是什么，它都应该工作。

在 IE 上，它从一个会话变为另一个会话。这很奇怪。这是发生的事情：

1.  我访问 mydomain.com/info1，它会将许多数据加载到 $_SESSION 中。
2.  我访问 mydomain.com/info2，它会根据新数据覆盖 $_SESSION。到这里为止，一切都很完美。
3.  但随机地，仅在 IE 上，有时会显示有关 /info1 的信息，然后突然又回到 /info2。

当我使用框架集时，我认为这是*php.net*的重要说明：

> 会话数据通常在脚本终止后存储，无需调用 session_write_close()，但由于会话数据被锁定以防止并发写入，任何时候只有一个脚本可以对会话进行操作。将框架集与会话一起使用时，由于这种锁定，您将体验到一个一个加载的框架。您可以通过在会话变量的所有更改完成后立即结束会话来减少加载所有帧所需的时间。

我做了*没有*框架集的新测试，它适用于所有浏览器，包括 IE。

这是我的会话 php 配置：

```
Directive   Local Value Master Value
session.auto_start  On  On
session.bug_compat_42   On  On
session.bug_compat_warn On  On
session.cache_expire    240 240
session.cache_limiter   nocache nocache
session.cookie_domain   no value    no value
session.cookie_httponly Off Off
session.cookie_lifetime 0   0
session.cookie_path /   /
session.cookie_secure   Off Off
session.entropy_file    no value    no value
session.entropy_length  0   0
session.gc_divisor  100 100
session.gc_maxlifetime  1440    1440
session.gc_probability  1   1
session.hash_bits_per_character 4   4
session.hash_function   0   0
session.name    PHPSESSID   PHPSESSID
session.referer_check   no value    no value
session.save_handler    files   files
session.save_path   /tmp    /tmp
session.serialize_handler   php php
session.use_cookies On  On
session.use_only_cookies    Off Off
session.use_trans_sid   0   0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T16:39:40.860

> 一些访问者不使用 www 访问我的网站，而其他访问者则使用。在整个访问过程中，他们可能会经历域的变化（从 mydomain.com 到 www.mydomain.com，反之亦然）我丢失了 $_SESSION 数据并且发生了许多错误。

这只是一个建议，我不知道，但可能会有所帮助。如果您有权访问，您可以在这里做的`.htacces`是规范化您的网站访问方式的 URL，尤其是在[*Mod_Rewrite*](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)的帮助下有或没有*www*的域部分：[](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)

 *```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^example.com [NC]
RewriteRule ^(.*)$ http://www.example.com/$1 [L,R=301] 
```

此示例将确保用户始终将您的网站与`www.`子域一起使用，而不是混合使用。

这通常也很好，因此您的站点只有一个域，可以省去一些麻烦。*

# squid - 在 Squid 刷新模式中设置 lm-factor 的最佳实践

> ID：13124967
> 
> 赞同：2
> 
> 时间：2012-10-29T15:46:44.360
> 
> 标签：squid

我在 Django 前面运行一个 Squid (3.1) 缓存。该站点的内容不会经常更改，因此 Squid 为我们的后端提供了急需的喘息空间。

目前，这是我们用来缓存内容的刷新模式：

```
refresh_pattern .   60   100%   60 
```

我们基本上希望在 Squid 重新验证内容之前将所有内容缓存至少一个小时（并且仅一个小时）。

我的问题是关于设置 lm 因子的“100%”参数。

我不确定将其设置为 100% 是否符合我们的要求。假设通过将其设置为 100%，它将确保对象在缓存中停留最大缓存时间。

这是一个不正确的假设吗？

在设置这样的刷新模式时应该遵循哪些最佳实践？

# android - 在 Galaxy 选项卡上启用 ipv6 支持

> ID：13124970
> 
> 赞同：-1
> 
> 时间：2012-10-29T15:46:49.897
> 
> 标签：android, android-ndk, ipv6

目前我在我的 android 设备中使用 cCURL 客户端应用程序（使用 ndk-build 交叉编译）。目前我的设备正在获取 IPV4 地址。现在我想在我的设备上启用 IPV6 支持。如何在我的设备上启用 ipv6，以便我的 curl 客户端使用这个 ipv6 ip ..？

我的设备详细信息：三星 Galaxy Tab 10.1 android 操作系统：Honey comb，3.1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T15:56:06.197

Android Ice Cream Sandwich 4.0.1 直接支持 ipv6。

对于早期版本，您可能会对 GogoDroid 感到幸运：

*   [https://code.google.com/p/gogodroid/](https://code.google.com/p/gogodroid/)

*   [http://forum.xda-developers.com/showthread.php?t=1276727](http://forum.xda-developers.com/showthread.php?t=1276727)

# c# - 使用现有对象数据填充新对象

> ID：13124975
> 
> 赞同：2
> 
> 时间：2012-10-29T15:46:58.843
> 
> 标签：c#, oop

我有一个服务返回一个名为“UserSettings”的自定义对象在我的应用程序中，我想向“UserSettings”对象添加更多属性，所以我创建了一个名为“MyUserSettings”的新对象，它继承自“UserSettings”现在我想填充我的新对象包含“UserSettings”中保存的现有数据以及我的新属性的新数据。我不想像这样将每个属性一一映射到新对象中的相同属性。

```
_MyUserSettings.Name=_UserSettings.Name; 
```

有没有一种方法或更好的方法可以一次性将现有对象的所有属性填充到我的新对象中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T15:50:56.080

是的，您可以使用复制构造函数模式。它会给您带来另一个好处 - 您不需要公共属性设置器，因此对象变得不可变。

```
public MyUserSettings(UserSettings baseSettings)
{
    // TODO: set all properties
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T15:51:16.280

不幸的是，这是唯一的方法，但是，具体的机制可以改变。方法有很多种（不一一列举）：

*   复制构造函数，它接受一个项目并手动复制字段。
*   使用反射有一个更通用的机制来实现同样的目标。
*   使用类似[AutoMapper](https://github.com/AutoMapper/AutoMapper)的东西。

他们都归结为几乎做同样的事情。

如果`UserSettings`实际是 a`MyUserSettings`那么你可以简单地转换它：

```
var mySettings = (MyUserSettings)settings; 
```

但是，如果`UserSettings`是真的，这将失败`UserSettings`。

# javascript - PHP Dynamic Marquee 一次滚动一项

> ID：13124976
> 
> 赞同：0
> 
> 时间：2012-10-29T15:47:02.823
> 
> 标签：javascript, marquee

我创建了一个函数，它从表格中获取新闻标题并在选取框中滚动标题。

它按预期工作，除了它不是一次滚动一个而是同时滚动它们。

这是代码：

```
$query = mysql_query("SELECT * FROM `news`");

    echo '<ul>';

    while (($row = mysql_fetch_assoc($query)) !== false) {

        $title = $row['title'];

        echo '<li>';
        echo '<marquee behavior="scroll" direction="left">News: '.$title.'</marquee>';
        echo '</li>';

} 
```

我怎样才能让它一次滚动标题 1 而不是同时滚动当前的 All？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T15:53:06.810

这只是 HTML 中选取框元素的默认行为。它会滚动您放入的任何内容，无法从 PHP 方面影响它。顺便说一句，它**不在**HTML 标准中，因此如果您使用它，您的文档将不是有效的 HTML。

因此，我建议您[在线搜索](https://www.google.nl/search?q=jquery%20marquee)即插即用的 Javascript 选框控件。这些通常还提供更复杂的选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T21:00:33.193

实际上，我确实知道一个使用 jQuery、Javascript 和 marquee 的网站，这里是该网站。您可以通过右键单击该站点并浏览它来查看源代码。我实际上正在尝试找到该选框选项，但我没有运气。

[http://ppgmvp.com/Home.aspx](http://ppgmvp.com/Home.aspx)

# jquery - 将画布元素复制到 iFrame 未渲染

> ID：13124977
> 
> 赞同：1
> 
> 时间：2012-10-29T15:47:04.170
> 
> 标签：jquery, iframe, printing, jqplot

使用 jquery，我将 DIV 的内容复制到我正在动态创建的新 iFrame 中。除 CANVAS 元素外，DIV 中的所有元素都可以正确渲染。正在复制 CANVAS 元素，它们只是没有在 iFrame 中正确呈现。那是普遍问题。

具体来说，我试图将 jqPlot 图表的渲染输出复制到 iFrame，然后在 iFrame 中打印图表。

任何想法为什么 CANVAS 元素没有在 iFrame 中呈现？

# javascript - 修改现有双工 WCF 服务以与 JavaScript 一起使用

> ID：13124979
> 
> 赞同：2
> 
> 时间：2012-10-29T15:47:09.430
> 
> 标签：javascript, wcf, websocket

我有一个现有的 WCF 服务，我们一直在使用它与 Silverlight 客户端进行通信，因此一直将它与 NetTCP 绑定一起使用。我想开始在 JavaScript 客户端上使用相同的服务，最好尽可能少地修改服务（即，允许 Silverlight 和 JS 客户端调用相同的双工服务）。理想情况下，这将通过诸如 WebSockets 之类的性能合理且可扩展的技术来实现，而不是像 Comet 之类的 hack。

最好的方法是什么？

向服务添加 WebSocket 支持（通过[NetHttpBinding](http://msdn.microsoft.com/en-us/library/hh674273.aspx)）似乎是一种明显的方法 - 但似乎没有任何关于如何从 JavaScript 调用生成的服务的文档。我想我可以将它配置为使用基于文本的传输，而不是默认的二进制传输，然后将某种基于 JavaScript 的 SOAP 客户端（可能使用[WSDL2JS](http://wsdl2js.sourceforge.net/)）组合在一起来调用它。感觉它应该可以工作，但也很尴尬，而且混合中的一些片段没有得到很好的记录。

[我还可以在XSockets](http://xsockets.net/)或[SuperWebSocket](http://superwebsocket.codeplex.com/)之类的框架中重新实现我的服务，但这是一些真正的工作，保持它与 WCF 实现同步将更重要。

还有其他想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T19:32:32.363

我是 XSockets.NET 背后的人之一。我希望能帮你解决这个问题。XSockets 有一个“外部”API，您可以使用它从 WCF（或其他任何与 TCP/IP 和 .NET 相关的东西）向 XSockets 服务器发送消息。然后服务器将消息（发布/订阅模式）传递给客户端，反之亦然。

因此，您的 WCF 几乎不会发生任何变化。

如果您需要一个示例，请告诉我，我会为您提供一个。只需在 xsockets dot net 上给我发一封关于 uffe 的电子邮件，我们就可以从那里获取。

编辑：创建了一个关于如何将 WCF 提升到实时的示例。它在 GitHub 上：[将 WCF 提升到 RealTime](https://github.com/codeplanner/XSocketsWCF)

问候 Uffe，XSockets 团队

# java - “Google Places”API 中保证了哪些 JSON 标签？

> ID：13124981
> 
> 赞同：0
> 
> 时间：2012-10-29T15:47:15.110
> 
> 标签：java, android, json, google-places-api, google-places

在使用 Google Places API 服务时，是否存在肯定会出现的 JSON 对象列表？我假设 "geometry" 、 "location" 和 "name" 将始终在 JSON 页面中返回，但我刚刚发现 "opening_hours" 仅存在于某些位置的困难方式。我需要为不保证存在的条目添加额外的 try catch 块。任何人都知道哪些条目可以保证或不保证？

我刚刚修复了我的 android 应用程序中的一个错误，该错误是因为我试图调用一个仅存在于 Google Places API 中的某些（但不是全部）条目的对象。宁愿不要在我不需要它们的地方添加额外的尝试捕获...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T00:31:24.030

[如文档](https://developers.google.com/places/documentation/search#PlaceSearchResponses)`results`中所述，不能保证返回数组中的任何结果：

> “结果数组中的每个结果都*可能*包含以下字段”

但是，除了`opening_hours`,`events[]`和之外的所有参数都`rating` *应该*返回。

# android - 在 Eclipse 中为 android 在 linux 上配置 maven

> ID：13124982
> 
> 赞同：1
> 
> 时间：2012-10-29T15:47:18.947
> 
> 标签：android, maven, ubuntu, path

我正在按照[http://code.google.com/p/maven-android-plugin/wiki/GettingStarted](http://code.google.com/p/maven-android-plugin/wiki/GettingStarted)上的说明在我的 android 项目中使用 maven（我正在学习 android）。我被困在以下步骤：

*   将环境变量 ANDROID_HOME 设置为您安装的 Android SDK 的路径，并将 $ANDROID_HOME/tools 以及 $ANDROID_HOME/platform-tools 添加到您的 $PATH。（或在 Windows %ANDROID_HOME%\tools 和 %ANDROID_HOME%\platform-tools 上）。

有人会告诉我如何完成该步骤吗？

我正在使用 linux`Natty Narwhal`和 eclipse`juno`来测试样本。我的路径`Android SDK`是`/home/myusr/opt/android-sdk-linux`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T15:54:25.620

您应该将以下内容添加到您的`/etc/profile`文件中（在文件末尾），或者您可以仅为您的用户编辑执行此操作`/home/your_user/.bashrc`：

```
ANDROID_HOME=/home/myusr/opt/android-sdk-linux
export ANDROID_HOME

PATH=$PATH:$ANDROID_HOME/tools:$ANDROID_HOME/platform-tools
export PATH 
```

从您的外壳注销/登录。您可以使用以下方法验证结果：

```
printenv 
```

# dotnetnuke - 编辑无效密码规则和错误信息

> ID：13124986
> 
> 赞同：0
> 
> 时间：2012-10-29T15:47:38.367
> 
> 标签：dotnetnuke

在我们的自定义 DotNetNuke 网站上注册为新用户时，如果我们输入的密码不正确，则会显示一条错误消息，指出“指定的密码无效。请指定有效密码。密码长度必须至少为 7 个字符，并且包含至少 0 个非字母数字字符。”。

有什么方法可以编辑此错误消息以及规则吗？例如，我们希望密码中至少有一个数字，并且长度在 8 到 10 个字符之间。这可以做到吗？我可以在哪里做呢？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T16:02:41.360

我刚刚从这篇文章中找到了如何做到这一点：http: [//www.dotnetnuke.com/Resources/Forums/forumid/89/postid/218801/scope/posts.aspx](http://www.dotnetnuke.com/Resources/Forums/forumid/89/postid/218801/scope/posts.aspx)

看起来它都可以从 web.config 文件中编辑

# c - 交换映射到虚拟内存中两个页面的两个物理页面

> ID：13124997
> 
> 赞同：1
> 
> 时间：2012-10-29T15:48:06.220
> 
> 标签：c, linux

情况如下：

一个进程有两个页面 vp1 和 vp2。这两个页面映射到交换中的 2 个物理页面或 2 个页面。我们将这些物理（或交换）页面称为 pp1 和 pp2。映射是：

vp1->pp1

vp2->pp2

现在，如果我想将映射更改为：

vp1->pp2

vp2->pp1

这意味着，进程从 vp2 中读取将获得原始在 vp1 中的内容。有没有一种方法可以在不更改 Linux 内核的情况下做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T16:04:34.763

是的，但你必须先做一些工作。实现此目的的一种方法是创建两个共享内存对象。然后可以在进程地址空间中映射和取消映射共享内存对象。有关详细信息，请参阅系统调用`shmat`、`shmdt`、`shmget`和`shmctl`。

映射和取消映射可能会花费大量时间，因此与使用某些指针方案来选择进程用于访问数据的地址相比，它可能无法节省时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T15:54:04.430

不。如果您想保持系统正常工作，一般情况下不会。但是，如果您控制映射的创建方式，您可以使用文件的 mmap 或 shm_open 中的对象创建它们，当您需要交换它们时，只需使用 mmap(... MAP_FIXED ...) 覆盖它们。