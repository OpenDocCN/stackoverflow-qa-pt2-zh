# StackOverflow 问答 13648000-13648999

# ios - 具有 NSAttributedString 和自定义属性的 UITextView 不起作用

> ID：13648003
> 
> 赞同：8
> 
> 时间：2012-11-30T15:19:05.850
> 
> 标签：ios, cocoa-touch, uitextview, nsattributedstring

使用 UITextView 时，我尝试将自定义属性添加到属性字符串。但是，在分配给 UITextView 的属性文本后，所有自定义键都会丢失。像这样：

```
NSMutableAttributedString *lString = [[ NSMutableAttributedString alloc ] initWithString: @"astring"
                                             attributes: @{ @"customkey": @"customvalue" }];
NSLog(@"string: %@", lString);  // shows customkey present
textView.attributedText = lString;
NSLog(@"result: %@", self.textView.attributedText);   // shows customkey missing 
```

这应该工作吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-09-23T15:51:23.710

从 iOS 7 开始，它现在可以随心所欲地工作：

从[访问属性](https://developer.apple.com/library/ios/documentation/cocoa/Conceptual/AttributedStrings/Tasks/AccessingAttrs.html#//apple_ref/doc/uid/20000161-BAJBBCBI)：

> 属性字符串按名称标识属性，在 NSDictionary 对象中存储属性名称下的值，该对象又与 NSRange 相关联，该 NSRange 指示字典属性适用的字符。**除了标准属性之外，您还可以将任何您希望的属性名称-值对分配给一系列字符。**

它适用于标准和`NSTextStorage`（文本工具包）支持的 UITextViews。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-30T16:16:01.550

根据评论，您正试图滥用`NSAttributedString`. `NSAttributedString`并且`UITextView`仅设计用于处理记录的属性。您最初可能能够在字符串中存储自定义属性，但是一旦文本视图开始处理属性文本并且您向文本视图询问最新的属性文本，文本视图早就摆脱了任何自定义属性。

更好的解决方案是创建一个扩展 UITextView 的类。您的子类应该添加一个可以包含您想要的任何自定义属性的属性。或者，您的自定义类可能会覆盖`attributedText`和 'setAttributedText:` 方法。这些将负责保存和恢复在属性字符串中找到的任何自定义属性。

注意：**此答案适用于 iOS 6 及更早版本**。对于 iOS 7，请参阅下面的 @julien_c 答案。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-21T19:26:11.697

UITextView 并不真正显示属性字符串。Apple 有一个内部类 NSHTMLWriter，它将集合 NSAttributedString 转换为 HTML 数据，然后由内容 UIWebDocumentView（本质上是 Webkit）显示

在这里查看我的分析：http: [//www.cocoanetics.com/2012/12/uitextview-caught-with-trousers-down/](http://www.cocoanetics.com/2012/12/uitextview-caught-with-trousers-down/)

# javafx-2 - 从 javaFX 折线图中的 CategoryAxis 检索字符串值 -CategoryAxis JavaFx 2.2.3 中的错误 .getValueForDisplay(double displayPosition)-

> ID：13648005
> 
> 赞同：1
> 
> 时间：2012-11-30T15:19:07.030
> 
> 标签：javafx-2, linechart

我有一个带有月份与值的 JavaFXline 图表。每次单击图表时，我都试图在控制台中打印月份和折线图中的值。问题是，当我`getValueForDisplay`在`CategoryAxis`对象中调用该方法时，它会返回`null`。
当我单击 (x,y):jan,3
我想打印时：
`X value = jan Y value: 3`
但程序正在打印：
`X value = **null** Y value: 2.7796610169491527`

另一个问题;
2）为什么在尝试打印坐标时它似乎没有校准（如果我点击 3 程序打印`2.779661016949152`？您会注意到这个问题检查控制台上打印的值。

这是我正在使用的代码：

```
public class LineChartTest extends Application {
String xValue;
Number yValue;
private void init(Stage primaryStage) {
    Group root = new Group();
    primaryStage.setScene(new Scene(root));
    final CategoryAxis xAxis = new CategoryAxis();

    final NumberAxis yAxis = new NumberAxis("Values for Y-Axis", 0, 3, 1);

    yAxis.setUpperBound(5);

    ObservableList<XYChart.Series<String,Double>> lineChartData = FXCollections.observableArrayList(
        new LineChart.Series<String,Double>("en", FXCollections.observableArrayList(
            new XYChart.Data<String,Double>("jan", 1.0),
            new XYChart.Data<String,Double>("feb", 2.0),
            new XYChart.Data<String,Double>("mar", 3.0),
            new XYChart.Data<String,Double>("apr", 4.0),
            new XYChart.Data<String,Double>("may", 0.5)
        )),
        new LineChart.Series<String,Double>("to", FXCollections.observableArrayList(
            new XYChart.Data<String,Double>("jan", 1.6),
            new XYChart.Data<String,Double>("feb", 0.4),
            new XYChart.Data<String,Double>("mar", 2.9),
            new XYChart.Data<String,Double>("apr", 1.3),
            new XYChart.Data<String,Double>("may", 0.9)
        ))
    );

    //define a new line
    final Series<String,Double> otherSeries = new Series<String,Double>();
    //set points
    otherSeries.getData().add(new XYChart.Data("jan",3));
    otherSeries.getData().add(new XYChart.Data("feb",2));
    otherSeries.getData().add(new XYChart.Data("mar",4));
    //set name to the line
    otherSeries.setName("tre");
    //add the new line to the graph
    lineChartData.add(otherSeries);
    final LineChart chart = new LineChart(xAxis, yAxis, lineChartData);

    //set title to the figure
    chart.setTitle("Line Chart Test");

    root.getChildren().add(chart);

    chart.setOnMouseClicked(new EventHandler<MouseEvent>() {

          @Override
        public void handle(MouseEvent t) {

            //Why this seems to be not working properly?
            double sceneX = t.getSceneX();
            double sceneY = t.getSceneY();

            //gives the point of the graph
            xValue = xAxis.getValueForDisplay(sceneX);
            yValue = yAxis.getValueForDisplay(sceneY);

            System.out.println("sceneX-25: "+ sceneX);
            System.out.println("getDisplayPosition: " + xAxis.getValueForDisplay(sceneX));

            //Test
            System.out.println(" X value = " +  
            xValue + " Y value: " + yValue );  

            }
    });

}

@Override public void start(Stage primaryStage) throws Exception {
    init(primaryStage);
    primaryStage.show();

}

    public static void main(String[] args) {
        launch(args);
    }
} 
```

**回答：**

*感谢 Sergey Grinev 和 Uluk Biy*

在前面的代码中你必须修改：

折线图代码：

```
 chart.setOnMouseClicked(new EventHandler<MouseEvent>() {

          @Override
          public void handle(MouseEvent e) {
            Node chartPlotBackground = chart.lookup(".chart-plot-background");
            final double shiftX = xSceneShift(chartPlotBackground);
            final double shiftY = ySceneShift(chartPlotBackground);    

            double x = e.getSceneX() - shiftX;
            double y = e.getSceneY() - shiftY;

            xValue = xAxis.getValueForDisplay(x);
            yValue = yAxis.getValueForDisplay(y );
            System.out.println("shiftX = " + shiftX + " shiftY: " + shiftY);
            System.out.println("X value = "
                + xValue + " \nY value: " + yValue);
          }
    });

}
//recursive calls    
private double xSceneShift(Node node) {
return node.getParent() == null ? 0 : node.getBoundsInParent().getMinX() +    xSceneShift(node.getParent());
}

private double ySceneShift(Node node) {
return node.getParent() == null ? 0 : node.getBoundsInParent().getMinY() + ySceneShift(node.getParent());
}

    @Override 
    public void start(Stage primaryStage) throws Exception {
    init(primaryStage);
    primaryStage.show();

}

public static void main(String[] args) {
    launch(args);
    }
} 
```

在`CategoryAxis`您必须修改的源代码中（查看评论！）：

```
 @Override public String getValueForDisplay(double displayPosition) {
    if (getSide().equals(Side.TOP) || getSide().equals(Side.BOTTOM)) { // HORIZONTAL
        if (displayPosition < 0 || displayPosition > getHeight()) return null; //   <-------------- WRONG SHOULD BE displayPosition > getWidth()
        double d = (displayPosition - firstCategoryPos.get()) / categorySpacing.get();
        return toRealValue(d);
    } else { // VERTICAL
        if (displayPosition < 0 || displayPosition > getWidth()) return null; // <-------------- WRONG SHOULD BE displayPosition > getHeight()
        double d = (displayPosition - firstCategoryPos.get()) / (categorySpacing.get() * -1);
        return toRealValue(d);
    }
} 
```

你可以在这里找到源代码：

[http://hg.openjdk.java.net/openjfx/2.1/master/rt/file/5c3b3d524f07/javafx-ui-controls/src/javafx/scene/chart/CategoryAxis.java](http://hg.openjdk.java.net/openjfx/2.1/master/rt/file/5c3b3d524f07/javafx-ui-controls/src/javafx/scene/chart/CategoryAxis.java)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T18:09:12.300

如果您的目标是显示用户在图表上单击的数据点，那么您可以直接访问下划线数据。将鼠标悬停在此示例中的数据 XY 交点：

```
import javafx.application.Application;
import javafx.event.EventHandler;
import javafx.scene.Cursor;
import javafx.scene.Node;
import javafx.scene.Scene;
import javafx.scene.chart.CategoryAxis;
import javafx.scene.chart.LineChart;
import javafx.scene.chart.NumberAxis;
import javafx.scene.chart.XYChart;
import javafx.scene.control.Label;
import javafx.scene.control.LabelBuilder;
import javafx.scene.effect.DropShadow;
import javafx.scene.input.MouseEvent;
import javafx.scene.layout.StackPane;
import javafx.scene.paint.Color;
import javafx.scene.text.Font;
import javafx.scene.text.FontWeight;
import javafx.stage.Stage;

public class ChartDemo extends Application {

    private DropShadow ds = new DropShadow();

    @Override
    public void start(Stage stage) {
        stage.setTitle("Linear plot");

        final CategoryAxis xAxis = new CategoryAxis();
        final NumberAxis yAxis = new NumberAxis(0, 22, 0.5);

        yAxis.setTickLabelFormatter(new NumberAxis.DefaultFormatter(yAxis) {
            @Override
            public String toString(Number object) {
                return String.format("%7.2f", object);
            }
        });
        final LineChart<String, Number> lineChart = new LineChart<String, Number>(xAxis, yAxis);

        lineChart.setCreateSymbols(true);
        lineChart.setAlternativeRowFillVisible(false);
        lineChart.setLegendVisible(false);

        final XYChart.Series series1 = new XYChart.Series();

        series1.getData().add(new XYChart.Data("Jan", 1));
        series1.getData().add(new XYChart.Data("Feb", 1.5));
        series1.getData().add(new XYChart.Data("Mar", 2));
        series1.getData().add(new XYChart.Data("Apr", 2.5));
        series1.getData().add(new XYChart.Data("May", 3));
        series1.getData().add(new XYChart.Data("Jun", 4));
        series1.getData().add(new XYChart.Data("Jul", 6));
        series1.getData().add(new XYChart.Data("Aug", 9));
        series1.getData().add(new XYChart.Data("Sep", 12));
        series1.getData().add(new XYChart.Data("Oct", 15));
        series1.getData().add(new XYChart.Data("Nov", 20));
        series1.getData().add(new XYChart.Data("Dec", 22));

        final Label lbl = LabelBuilder.create().font(Font.font("Arial", FontWeight.BOLD, 25))
                .textFill(Color.BLUEVIOLET).translateY(-200).build();
        StackPane pane = new StackPane();
        pane.getChildren().addAll(lineChart, lbl);
        Scene scene = new Scene(pane, 800, 600);
        lineChart.getData().addAll(series1);

        for (Object obj : series1.getData()) {
            final XYChart.Data data = (XYChart.Data) obj;
            final Node node = data.getNode();

            node.setOnMouseEntered(new EventHandler<MouseEvent>() {
                @Override
                public void handle(MouseEvent arg0) {
                    node.setEffect(ds);
                    node.setCursor(Cursor.HAND);
                    lbl.setText("X-value=" + data.getXValue().toString() + "\nY-value=" + data.getYValue().toString());
                    System.out.println("X-value=" + data.getXValue().toString() + ", Y-value=" + data.getYValue().toString());
                }
            });

            node.setOnMouseExited(new EventHandler<MouseEvent>() {
                @Override
                public void handle(MouseEvent arg0) {
                    node.setEffect(null);
                    node.setCursor(Cursor.DEFAULT);
                    lbl.setText("");
                }
            });
        }
        stage.setScene(scene);
        stage.show();
    }

    public static void main(String[] args) {
        launch(args);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T17:15:36.767

有2个问题。

**1）**您使用了错误的坐标。`getValueForDisplay`期望相对于图表绘图区域的坐标，而不是场景。

要解决这个问题，您可以使用下一个技巧。

引入下一个递归调用来计算场景移位：

```
private double xSceneShift(Node node) {
    return node.getParent() == null ? 0 : node.getBoundsInParent().getMinX() + xSceneShift(node.getParent());
}

private double ySceneShift(Node node) {
    return node.getParent() == null ? 0 : node.getBoundsInParent().getMinY() + ySceneShift(node.getParent());
} 
```

查找图表绘制区域的移位：

```
Node chartPlotBackground = chart.lookup(".chart-plot-background");
final double shiftX = xSceneShift(chartPlotBackground);
final double shiftY = ySceneShift(chartPlotBackground); 
```

并在您的鼠标处理程序中使用它们：

```
public void handle(MouseEvent e) {
    double x = e.getSceneX() - shiftX;
    double y = e.getSceneY() - shiftY;

    xValue = xAxis.getValueForDisplay(x );
    yValue = yAxis.getValueForDisplay(y);

    System.out.println(" X value = "
                    + xValue + " \nY value: " + yValue);
} 
```

**2）**您遇到了一个`CategoryAxis`已修复但在下一个版本（8.0）中的问题：http: [//javafx-jira.kenai.com/browse/RT-25899](http://javafx-jira.kenai.com/browse/RT-25899)

作为一种解决方法，您可以下载`CategoryAxis`源代码，将其重命名`MyCategoryAxis`并修复方法中的错误`getValueForDisplay()`——只需切换位置`getWidth()`并`getHeight()`调用。

[http://hg.openjdk.java.net/openjfx/2.1/master/rt/file/5c3b3d524f07/javafx-ui-controls/src/javafx/scene/chart/CategoryAxis.java](http://hg.openjdk.java.net/openjfx/2.1/master/rt/file/5c3b3d524f07/javafx-ui-controls/src/javafx/scene/chart/CategoryAxis.java)

# xml - XML 模式的数据不包含在标签中——？

> ID：13648007
> 
> 赞同：2
> 
> 时间：2012-11-30T15:19:08.847
> 
> 标签：xml, xml-parsing

我想解析一个不寻常的 XML 结构，如此处所示。两个自闭标签用于标记文本的开始和结束。因此，文本不在标签分区内。

```
<article>
  <sec>
    <clause id="31"/>This says thirty-one <clause_end/>
    <clause id="32"/>This says thirty-two <clause_end/>
  </sec>
</article> 
```

遗留文档不太适合 XML 的离散层次要求，此模式试图解决这些问题。

*   它与 XML 的任何合理实现一致吗？
*   您对如何应用 XML 解析器有什么建议吗？

保持原始结构是可取的，但如果答案是否定的，那么我将不得不：

1.  制作一个通常标记文本的替代模式：`<clause id="32"> text </clause>`.
2.  通过去除其他干扰`<clause>`. 我很确定我不会错过任何事情。

顺便说一句，我很乐意链接到实时文件，*除非*我不想让开发人员感到尴尬，假设这个模式和我想的一样不正常。;-)

## 根据九十九的回答...

*   它与 XML 的任何合理实现一致吗？
*   . . . **可能**
*   您对如何应用 XML 解析器有什么建议吗？
*   . . . **尽可能解析，但在架构中的这个级别，您必须使用字符串。**

我可能会保留现有结构，但会引入一个小改进：

```
<article>
  <sec>
    <clause id="31"/>This says thirty-one <clause_end id="31"/>
    <clause id="32"/>This says thirty-two <clause_end id="32"/>
  </sec>
</article> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T05:47:15.300

这种结构在其他模式中肯定有先例，例如[`milestone-start`](http://dtd.nlm.nih.gov/archiving/tag-library/3.0/n-dae0.html)在[`milestone-end`](http://dtd.nlm.nih.gov/archiving/tag-library/3.0/n-b8e0.html)国家[医学图书馆标签集中](http://dtd.nlm.nih.gov/archiving/)（尽管我从未见过它们在超过一百万个文档中使用）。请注意，它们在 上包含一个`IDREF`属性以将`milestone-end`其与`milestone-start/@id`. 这肯定有助于您在解析时处理这些元素。

[扩展 OSIS 评论，因为我发现这篇文章](http://xml.coverpages.org/DeRoseEML2004.pdf)特别有趣和优雅（或者至少是解决这个混乱问题的优雅解决方案）：

> OSIS 中使用的解决方案是：既不使用通用里程碑标记，也不使用特定的额外标记，而是使用与里程碑和非里程碑元素完全相同的标记：以空和非空 XML 形式。一群人发出一声叹息。简而言之，
> 
> *   尽可能使用`<q who='paris'>...</q>`，否则
> *   利用`<q who='paris' sID='foo'/>...<q eID='foo'/>`
> 
> 这种在 Troy 之后被称为“Trojan 里程碑”的方法几乎可以免费使用典型的模式语言。不需要额外的元素。只需添加 sID 和 eID 属性，并确保允许空内容。因此，并非任何元素都不能随意或在需要时具有里程碑意义。正确的属性会自动出现，因为相同的声明是有效的。

# javascript - FlashCanvas drawImage 不工作

> ID：13648012
> 
> 赞同：1
> 
> 时间：2012-11-30T15:19:24.063
> 
> 标签：javascript, html, canvas, flashcanvas

我在 IE8 中运行的 Windows7 IE9 上。这仅在 IE9 中有效，因为我可以使用画布，但在 IE8 中，它应该回退到 Flash 画布。这是我的来源[http://blog.jackadam.net/2010/alpha-jpegs/](http://blog.jackadam.net/2010/alpha-jpegs/)现在看来我在 IE 中遇到了 context.drawImage 不绘制图像的问题？我已经在 flashcanvas 谷歌组上发帖，但他们似乎需要一些时间来回复，所以希望这里可能有 flashcanvas 大师。

```
;(function() {

var create_alpha_jpeg = function(img) {

    var alpha_path = img.getAttribute('data-alpha-src')
    if(!alpha_path) return

    // Hide the original un-alpha'd
    img.style.visiblity = 'hidden'

    // Preload the un-alpha'd image
    var image = document.createElement('img')
    image.src = img.src + '?' + Math.random()
    console.log(image.src);
    image.onload = function () {
        console.log('image.onload');

        // Then preload alpha mask
        var alpha = document.createElement('img')
        alpha.src = alpha_path + '?' + Math.random()
        alpha.onload = function () {
            console.log('alpha.onload');
            var canvas = document.createElement('canvas')
            canvas.width = image.width
            canvas.height = image.height
            img.parentNode.replaceChild(canvas, img)

            // For IE7/8
            if(typeof FlashCanvas != 'undefined') FlashCanvas.initElement(canvas)

            // Canvas compositing code
            var context = canvas.getContext('2d')
            context.clearRect(0, 0, image.width, image.height)
            context.drawImage(image, 0, 0, image.width, image.height)
            //context.globalCompositeOperation = 'xor'
            //context.drawImage(alpha, 0, 0, image.width, image.height)

        }

    }

}

// Apply this technique to every image on the page once DOM is ready
// (I just placed it at the bottom of the page for brevity)
var imgs = document.getElementsByTagName('img')
for(var i = 0; i < imgs.length; i++)
create_alpha_jpeg(imgs[i])

})(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-17T16:19:07.840

对此的解决方案是它只适用于旧版本的 flashcanvas 并且它只适用于 flashcanvas pro...如网站第二页脚所述

> 该技术使用 globalCompositeOperation 操作，该操作需要 FlashCanvas Pro。非盈利用途免费，商业许可证仅需 31 美元。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-13T23:31:31.997

我让它与 flashcanvaspro 一起工作。根据它所针对的最大图像大小不同的 Flash 播放器。Flash Player 10 将位图的最大尺寸增加到最大像素数 16,777,215。Flash Player 9 限制（2880 x 2880 像素）。

[https://helpx.adobe.com/flash-player/kb/size-limits-swf-bitmap-files.html](https://helpx.adobe.com/flash-player/kb/size-limits-swf-bitmap-files.html)

需要有人将 flashcanvas 更新到最新的 flash 播放器

# ios - 静态子视图背景图片效果

> ID：13648015
> 
> 赞同：4
> 
> 时间：2012-11-30T15:19:40.750
> 
> 标签：ios, uiscrollview

在最新的 iOS 版 Expedia 应用程序中，它们有一个非常有趣的效果，我正试图绕过它。有两列无限滚动的子视图，我知道可以用 2 个滚动视图来完成。有趣的是，整个滚动视图似乎有一个亚麻背景，它保持静态，并且可以在每个子视图单元格之间的间隙中看到。真正酷的部分是子视图具有不同的背景并保持不变。在下面的屏幕截图中，它是城市天际线图像。当子视图滚动时，只能在子视图单元格后面看到城市图像。这似乎是某种掩蔽技巧，但我不太清楚效果是如何完成的。我怎样才能达到相同的结果？

本质上，您如何在充当小窗口而不显示亚麻布的子视图后面显示静态背景。亚麻布应该只显示在细胞周围。

您可以下载该应用程序，点击飞行模式并亲自尝试。

这是一个屏幕截图：![在此处输入图像描述](../Images/533d6e38fbd70c9f40e6e8e4c87e1260.png)

这是另一个显示单元格滚动但城市保持不变的情况：

![在此处输入图像描述](../Images/54e8e216a38bc5caac826827c2e8fab5.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T17:39:56.677

我想找到一个优雅的解决方案，现在我将通过跟踪**可见**的子视图偏移并配置它们的外观来做到这一点。

[请在示例项目](http://dl.dropbox.com/u/12708367/ScrollMasks.zip)中查看结果。

为了将来的参考，我将附上以下代码：

视图控制器.m

```
//
//  OSViewController.m
//  ScrollMasks
//
//  Created by #%$^Q& on 11/30/12.
//  Copyright (c) 2012 Demo. All rights reserved.
//

#import "OSViewController.h"

@interface OSViewController ()

// subviews
@property (strong) IBOutlet UIScrollView * scrollView;

// all the subviews
@property (strong) NSArray * maskedSubviews;
// subviews visible at scrollview, we'll update only them
@property (strong) NSArray * visibleMaskedSubviews;

// updates the views from visibleMaskedSubviews
-(void) updateVisibleSubviews;
// updates the visibleMaskedSubviews array with the given scrollView offset
-(void) updateVisibleSubviewsArrayForOffset:(CGPoint) offset;
@end

@implementation OSViewController

-(void) unused {}

#pragma mark - view

-(void) viewWillAppear:(BOOL)animated {
    [self updateVisibleSubviews];
    [super viewWillAppear:animated];
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    /*
     See -updateVisibleSubviews comment for the class comments
     */
    UIView * newMaskedView = nil;
    NSMutableArray * newMaskedSubviews = [NSMutableArray array];

    const CGSize scrollViewSize = self.scrollView.bounds.size;
    const int totalSubviews = 10;
    const float offset = 20.;
    const float height = 100.;

    UIImage * maskImage = [UIImage imageNamed:@"PeeringFrog.jpg"];

    /*

     // Uncomment to compare

     UIImageView * iv = [[UIImageView alloc] initWithFrame:self.scrollView.bounds];
     iv.image = maskImage;
     [self.view insertSubview:iv atIndex:0];
     */

    // add scrollview subviews
    for (int i = 0; i < totalSubviews; i++) {

        CGRect newViewFrame = CGRectMake(offset, offset*(i+1) + height*i, scrollViewSize.width - offset*2, height);
        newMaskedView = [UIView new];
        newMaskedView.frame = newViewFrame;
        newMaskedView.clipsToBounds = YES;
        newMaskedView.backgroundColor = [UIColor redColor];
        newMaskedView.autoresizingMask = UIViewAutoresizingFlexibleRightMargin | UIViewAutoresizingFlexibleWidth;

        UIImageView * maskImageView = [UIImageView new];
        maskImageView.frame = CGRectMake(0, 0, self.scrollView.bounds.size.width, self.scrollView.bounds.size.height);
        maskImageView.image = maskImage;
        [newMaskedView addSubview:maskImageView];

        [self.scrollView addSubview:newMaskedView];
        [newMaskedSubviews addObject:newMaskedView];
    }

    self.scrollView.contentSize = CGSizeMake(scrollViewSize.width, (height+offset)*totalSubviews + offset*2);

    self.maskedSubviews = [NSArray arrayWithArray:newMaskedSubviews];
    [self updateVisibleSubviewsArrayForOffset:self.scrollView.contentOffset];
}

-(void) updateVisibleSubviews {
    [self updateVisibleSubviewsArrayForOffset:self.scrollView.contentOffset];

    for (UIView * view in self.visibleMaskedSubviews) {

        /*
        TODO:
         view must be UIView subclass with the imageView initializer and imageView frame update method
        */

        CGPoint viewOffset = [self.view convertPoint:CGPointZero fromView:view];
        UIImageView * subview = [[view subviews] objectAtIndex:0];
        CGRect subviewFrame = subview.frame;
        subviewFrame = CGRectMake(-viewOffset.x, -viewOffset.y, subviewFrame.size.width, subviewFrame.size.height);
        subview.frame = subviewFrame;
    }
}

#pragma mark - scrollview delegate & utilities
-(void) scrollViewDidScroll:(UIScrollView *)scrollView {
    [self updateVisibleSubviews];
}

-(void) updateVisibleSubviewsArrayForOffset:(CGPoint) offset {

    NSMutableArray * newVisibleMaskedSubviews = [NSMutableArray array];
    for (UIView * view in self.maskedSubviews) {
        CGRect intersectionRect = CGRectIntersection(view.frame, self.scrollView.bounds);
        if (NO == CGRectIsNull(intersectionRect)) {
            [newVisibleMaskedSubviews addObject:view];
        }
    }

    self.visibleMaskedSubviews = [NSArray arrayWithArray:newVisibleMaskedSubviews];
}

#pragma mark - memory
- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

@end 
```

视图控制器.h

```
//
//  OSViewController.h
//  ScrollMasks
//
//  Created by #%$^Q& on 11/30/12.
//  Copyright (c) 2012 Demo. All rights reserved.
//

/*
 PeeringFrog image is taken (and resized) from Apple sample project "PhotoScroller"
 */

#import <UIKit/UIKit.h>

@interface OSViewController : UIViewController <UIScrollViewDelegate>

@end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T17:34:05.847

几年前我做过类似的事情。起初我尝试使用 CGImageMaskCreate 东西，但发现创建一个具有透明“切口”的图像然后使用动画效果滚动它下面的图片要容易得多。

对于您的情况，我会找到屏幕大小的亚麻图像。然后我会使用图像编辑器（我使用 GIMP）在亚麻布上使用纯色绘制一些框。然后我将该框颜色映射为透明以制作切口。还有其他方法可以做到这一点，但我就是这样做的。

在您的应用程序中，将两个或更多图像视图添加到主视图。不要担心位置，因为这将在运行时确定。您需要将这些图像视图设置为包含您希望在其下“滚动”的图像。然后添加带有切口的亚麻布 UIImageView 使其位于顶部并占据整个屏幕尺寸。确保顶部 UIImageView 的背景设置为透明。

当应用程序启动时，从上到下布局您的“下方”图像视图，然后启动一个 [UIView beginAnimation]，通过修改“y”位置向上滚动您的下方图像视图。这个动画应该有一个 done 回调，当顶部图像视图完全离开屏幕时会调用该回调。然后，在 done 回调中，布局当前状态并再次启动动画。这是我使用的代码的主要内容（但请注意，我的滚动是从右到左，而不是从下到上，而且我的图像大小都相同。）

```
 - (void)doAnimationSet
    {

        [iv1 setFrame:CGRectMake(0, 0, imageWidth, imageHeight)];
        [iv2 setFrame:CGRectMake(imageWidth, 0, imageWidth, imageHeight)];
        [iv3 setFrame:CGRectMake(imageWidth*2, 0, imageWidth, imageHeight)];

        [self loadNextImageSet];

        [UIView beginAnimations:nil context:nil];
        [UIView setAnimationDuration:10];
        [UIView setAnimationCurve:UIViewAnimationCurveLinear];

        [iv1 setFrame:CGRectMake(-imageWidth, 0, imageWidth, imageHeight)];
        [iv2 setFrame:CGRectMake(0, 0, imageWidth, imageHeight)];
        [iv3 setFrame:CGRectMake(imageWidth, 0, imageWidth, imageHeight)];

        [UIView setAnimationDelegate:self];
        [UIView setAnimationDidStopSelector:@selector(doneAnimation:finished:context:)];

        [UIView commitAnimations];

    }

    - (void)doneAnimation:(NSString *)aid finished:(BOOL)fin context:(void *)context
    {
        [self doAnimationSet];
    } 
```

这应该会给你你正在寻找的效果。祝你好运 ：）

# java - SimpleDateFormat 和 android.text.format.DateFormat 有什么区别？

> ID：13648019
> 
> 赞同：5
> 
> 时间：2012-11-30T15:19:59.330
> 
> 标签：java, api, simpledateformat, android-date

通过阅读它们，我了解到 android 类是一个仅为方便而制作的实用程序类，并没有提供任何`SimpleDateFormat`不提供的东西。android类有什么意义吗？使用它是更好的做法（如果是，为什么）？我的目标是在 android 应用程序中显示一个 Date 对象（显然）。这里是：

```
private Date date;

public String getDateString(String formatStr){
    return new SimpleDateFormat(formatStr).format(date);
} 
```

像这样使用 android.text.format.DateFormat 会更好：

```
public String getDateString(String formatStr){
    return android.text.format.DateFormat.format(formatStr, date);
} 
```

或者也许两者都不是，但最好的方法是不同的？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-11-24T23:48:06.747

[从https://stackoverflow.com/a/27116266/642160](https://stackoverflow.com/a/27116266/642160)复制我的答案：

据我所知，`android.text.format.DateFormat`它具有来自 的`java.text.DateFormat`一些功能，来自 的一些功能`java.text.SimpleDateFormat`，以及它自己的一些额外功能。

最为显着地：

*   java SimpleDateFormat 允许构造任意非本地化格式。
*   java DateFormat 允许通过其工厂方法为日期和时间构造三种本地化格式。
*   android DateFormat 允许上述大部分内容（任意格式和少量本地化格式），但也提供`getBestDateTimePattern`选择适合语言环境的格式字符串，该字符串包含使用适合语言环境的顺序和标点符号指定的元素。

因此，如果您需要 java 的 DateFormat 类提供的三种以外的本地化日期/时间格式，则 android DateFormat 类是解决方案。

不太重要，但额外的便利：android DateFormat 方法可以直接采用 Calendar 或 long 毫秒，而不需要 Date 对象。我总是更喜欢使用 Calendar 或 long over Date。此外，它正确地尊重日历对象的时区——而从日历中获取日期并将其传递给格式化程序会丢失时区信息。（没有什么是您无法通过 java DateFormat 的 setCalendar 方法解决的，但不必这样做很好。）

最后，也是最不重要的一点，Android DateFormat 的一些方法实际上并不构造格式化程序，您只需构造一个格式化字符串。这个类的所有方法都是静态的。构造 DateFormat 的方法实际上构造了一个 java DateFormat！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T22:33:01.377

我相信答案就[在这里](http://developer.android.com/reference/android/text/format/DateFormat.html)：

> 此类的工厂方法返回适当本地化的 DateFormat 实例，适用于格式化和解析日期。

我不认为 SimpleDateFormat 提供适当本地化的格式。

# android - HLS Streaming 无法在 android 3.0+ 上运行

> ID：13648025
> 
> 赞同：2
> 
> 时间：2012-11-30T15:20:43.620
> 
> 标签：android, video-streaming, http-live-streaming

我在寻找实时 hls 流时遇到问题。

当我在 videoview 上调用 getCurrentPosition 时，它返回 40 000，但是当我尝试 seekto(20000); 没有任何变化，没有错误没有行动。

所以如果有人有任何建议，请帮助我。

这是一个代码示例：

```
//video is playing live 
seek = 20000;
if(_vPlayer.getCurrentPosition() > seek) {
    _vPlayer.seekTo(seek);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-22T12:15:42.173

我猜想 HLS 不支持 seek （另见[http://developer.android.com/guide/appendix/media-formats.html](http://developer.android.com/guide/appendix/media-formats.html)），他们声明，对于 H-264 AVC，他们支持 MPEG-TS（AAC仅音频，不可搜索，Android 3.0+）

当我在 Galaxay SII 上尝试[此流](http://devimages.apple.com/iphone/samples/bipbop/bipbopall.m3u8)时，本机播放器也不支持搜索。

请参阅[此处](https://stackoverflow.com/questions/11019564/hls-http-live-streaming-on-android-3-0-and-seeking?rq=1)以获得更好/更完整的答案

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T00:52:45.617

一些建议： 1）尝试实现 OnSeekCompleteListener 以确定搜索是否实际成功完成： [VideoView not playing Video from desired position](https://stackoverflow.com/questions/7990784/videoview-not-playing-video-from-desired-position/11938019#11938019)

2）尝试暂停，seekTo，开始。同样，您可能需要实现 OnSeekCompleteListener；或者为了测试目的只是在 seekTo 和 start 之间睡一会儿。

# c# - 如何使用 .net 获取本地计算机中软件项的版本？

> ID：13648026
> 
> 赞同：1
> 
> 时间：2012-11-30T15:20:43.583
> 
> 标签：c#, .net, windows-applications

我需要使用 .net framework 2.0 或 4.0 获取安装在本地机器上的 adobe acrobat reader 版本。我尝试使用“注册表”类，但问题在于它在注册表编辑器中作为可编辑的子键存在（因此任何人都可以更改它并且不能确保它是版本或只是文件夹名称）连同它一起对版本进行四舍五入（例如：如果版本是 10.1.3.23，它将保持为 10.0）。那么，如果有任何方法可以获取阅读器的实际和完整版本，请告诉我。

我什至想知道是否有任何方法可以使用 .net 访问程序文件中软件项的属性，以便我可以获取安装在本地计算机中的软件的所有属性。

任何有关如何使用 .net 获取软件项目版本的具体建议，将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T09:42:08.063

```
 System.Diagnostics.FileVersionInfo fileVersionObj = System.Diagnostics.FileVersionInfo.GetVersionInfo(@"C:\\Program Files\\Adobe\\Reader 9.0\\Reader\\AcroRd32.exe");

 MessageBox.Show(fileVersionObj.FileVersion); 
```

使用它，您还可以访问文件版本的每个部分。

```
 MessageBox.Show(fileVersionObj.FileMajorPart.ToString());
    MessageBox.Show(fileVersionObj.FileMinorPart.ToString());
    MessageBox.Show(fileVersionObj.FileBuildPart.ToString());
    MessageBox.Show(fileVersionObj.FilePrivatePart.ToString()); 
```

# php - 无法返回正确的 json 响应

> ID：13648029
> 
> 赞同：0
> 
> 时间：2012-11-30T15:20:55.193
> 
> 标签：php, ajax, json

我有一个 php 脚本，其中有以下功能：

```
<?php
function readXML() {
    $url = $_REQUEST['schemaPath'];

    $xml = simplexml_load_file($url);

    $fields = $xml -> fields -> field;
    GLOBAL $array;
    GLOBAL $c;
    $array = new stdClass;
    foreach($fields as $field->attributes){
        foreach($field->attributes->attributes() as $a => $b){
            if($a == "name") {
                $c = $b;
            }
            if($a == "type") {
                $array -> $c = $b;
            }
        }
    }
    return json_encode($array);
}
echo readXML();
?> 
```

我正在通过以下方式进行 ajax 调用：

```
$.ajax({
                cache: false,
                url: "readXML.php",
                type: "POST",
                dataType: 'jsonp',
                jsonp: 'jsonp_callback',
                data: { schemaPath: "http://localhost:8983/solr/admin/file/?file=schema.xml" },
                crossDomain: true,
                success:function(data) {
                    if (!data) {
                        alert("Error in processing xml file");
                        return null;
                    } else {                
                        console.log(data);
                    }
                },
                error:function(data) {
                    alert("Error while reading schema file.");
                    $("#loadingStatus").hide();
                }
            }); 
```

我没有得到所需的 json 响应格式。我在响应中收到警报`Error while reading schema file`。我实际上希望它`key:value`像 as 那样的模式，`$c:$b`但它正在像`$c:{"0":$b}`. 如何从 php 脚本返回数组，以便我可以获得有效的 json 响应。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T18:53:31.750

我得到了解决方案，为什么在完成 ajax 调用时它总是进入错误函数。在这里，我`jsonp`在 ajax 调用中进行操作，但在 php 脚本中没有处理相同的操作。要解决此问题并返回正确的响应，需要在 php 脚本中添加以下内容：

```
if(isset($_REQUEST['jsonp'])) {
        echo $_REQUEST['jsonp'].'('.json_encode($array).')';
    }else{  
        echo json_encode($array);
    } 
```

并根据`key:value`需要做出响应`$array[$c] = $b;`，`$array[$c] = (string)$b;`连同@EmmanuelG 在他的回答中指出的更改一起更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T15:26:46.317

为什么不使用常规关联数组，而不是使用标准类。这将以最少的更改解决您的问题。

```
<?php
function readXML() {
    $url = $_REQUEST['schemaPath'];

    $xml = simplexml_load_file($url);

    $fields = $xml -> fields -> field;
    GLOBAL $array;
    GLOBAL $c;
    $array = array(); // changed
    foreach($fields as $field->attributes){
        foreach($field->attributes->attributes() as $a => $b){
            if($a == "name") {
                $c = $b;
            }
            if($a == "type") {
                // cast the $c to convert the value from a SimpleXMLObject 
                // to a string for use within the key
                $c = (string)$c; 
                $array[$c] = $b;
            }
        }
    }
    return json_encode($array);
}
echo readXML();
?> 
```

# ruby - 我需要平均减少

> ID：13648031
> 
> 赞同：-3
> 
> 时间：2012-11-30T15:21:03.837
> 
> 标签：ruby, average, reduce

```
a = [[24, 18.0], [24, 16.0], [25, 15.0]] 
```

我需要 b = [[24, 17.0], [25, 15.0]]

这是我需要计算子数组中第二项的平均值的两条规则，即`[24, 18.0], [24, 16.0] #=> [24, 17.0]`- 我可以自己单独完成，但我不明白如何将 reduce 与平均值结合起来，如“ruby way”解决方案`a.collect{...}`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T15:27:15.303

您可以使用`group_by`对常用键进行分组，并`sum/size`获得平均值：

```
b = a.group_by(&:first).map do |k,v| 
  [k, v.map(&:last).inject(:+) / v.size]
end 
```

# c# - 如何从中继器获取更新的文本框值？

> ID：13648037
> 
> 赞同：2
> 
> 时间：2012-11-30T15:21:37.490
> 
> 标签：c#, asp.net, gridview, repeater

我有一个`repeater`如下所列的控件。它有一个`textbox`控制。单击a 时`save button`，我需要从文本框中获取更新的文本。我有以下代码；但是当我获取文本框文本时，它给了我旧值。

我们如何获得更新的文本？

**代码背后**

```
 protected void Save_Click(object sender, EventArgs e)
    {

        foreach (RepeaterItem item in repReports.Items )
        {
            if (item.ItemType == ListItemType.Item || item.ItemType == ListItemType.AlternatingItem )
            {

                string updatedEmail = ((TextBox)item.Controls[5]).Text;
                string originalEmail = ((HiddenField)item.Controls[7]).Value;

            }
        }
    } 
```

**控制标记**

```
 <div class="repeaterTableBorder">
                <asp:Repeater ID="repReports" runat="server">
                    <ItemTemplate>
                        <div id="repeaterIdentifier" class="repeaterIdentifier">
                            <div class="reportTitle">
                                <%# Eval("ReportName") + ":"%>
                                <asp:HiddenField ID="hdnLastChangeTime" runat="server" Value= '<%# ((DateTime)Eval("RecordSelectionTime")).ToString("MM/dd/yyyy hh:mm:ss.fff tt")%>' />
                                <asp:HiddenField ID="hdnReportID" runat="server" Value='<%# Eval("ReportTypeCode")%>' />
                            </div>
                            <div class="reportFrequency">
                                 <%# " Frequency - Weekly" %> 
                            </div>
                        </div>
                        <div class="reportContent">
                            <div class="repeaterLine">
                                <asp:TextBox ID="txtEmailRecipients" runat="server" class="textEdit" 
                                    Text='<%# Eval("ExistingRecipients") %>'
                                    TextMode="MultiLine"></asp:TextBox>
                                 <asp:HiddenField ID="hdnOriginalRecipients" runat="server" Value='<%# Eval("ExistingRecipients")%>' />
                            </div>
                        </div>

                    </ItemTemplate>
                </asp:Repeater>
            </div> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-30T15:23:59.277

我假设您将其绑定`Repeater`到它`DataSource`也在回发中。你应该只这样做`if(!IsPostBack)`。否则这些值将被覆盖。

```
protected void Page_Load(Object sender, EventArgs e)
{
    if(!IsPostBack)
    {
        // databinding code here
    }
} 
```

# django - Django ORM 管理器 (objects.all()) 返回的按索引访问列表对象的问题

> ID：13648047
> 
> 赞同：0
> 
> 时间：2012-11-30T15:22:20.473
> 
> 标签：django

我有两个类，它们之间是一对多的关系。

我有一个测试运行，导致父对象（'fm'）包含两个子对象，可通过相关管理器（'changelog'）访问。

以下代码运行，表明“更改日志”列表包含两个不同的`UserMessageStatusUpdate`对象，具有不同的属性：

```
>>> logging.debug(fm.changelog.all())
DEBUG [<UserMessageStatusUpdate: fred changed message status from New to Received>,
    <UserMessageStatusUpdate: fred changed message status from Received to Read>] 
```

我也可以遍历它们：

```
>>> for m in fm.changelog.all():
    ....logging.debug(m)
DEBUG fred changed message status from New to Received
DEBUG fred changed message status from Received to Read 
```

但是，如果我尝试通过索引访问每个对象，我会得到完全不同的东西：

```
>>> logging.debug(fm.changelog.all()[0])
DEBUG fred changed message status from Received to Read
>>> logging.debug(fm.changelog.all()[1])
DEBUG fred changed message status from Received to Read 
```

这到底是怎么回事？

[更新 1]

我已将 ID 添加到模型 _str_() 方法中，所以现在我可以看到按索引访问方法两次返回相同的记录：

```
>>> logging.debug(fm.changelog.all()[0])
DEBUG id:3 fred changed message status from Received to Read
>>> logging.debug(fm.changelog.all()[1])
DEBUG id:3 fred changed message status from Received to Read 
```

那么现在的问题是，为什么经理在通过索引访问时返回相同的记录？（这是默认的`Manager`，没什么特别的。）

[更新 2]

使用@stevejalim 对此进行调查，如果`fm.changelog.all()`对象显式地大小写为 a ，则测试将通过`list`：

```
>>> changelog = list(fm.changelog.all())
>>> logging.debug(changelog[0])
DEBUG id:2 fred changed message status from New to Received
>>> logging.debug(changelog[1])
DEBUG id:3 fred changed message status from Received to Read 
```

查看 fm.changelog.all()：

```
>>> logging.debug(type(fm.changelog.all()))
DEBUG <class 'django.db.models.query.QuerySet'> 
```

似乎问题可能与返回生成器的查询集有关，并且无法通过索引直接访问项目。或者可能与`RelatedManager`课堂上的这一行有关：[https ://github.com/django/django/blob/stable/1.4.x/django/db/models/fields/related.py#L458](https://github.com/django/django/blob/stable/1.4.x/django/db/models/fields/related.py#L458)

```
def get_query_set(self):
    try:
        return self.instance._prefetched_objects_cache[rel_field.related_query_name()] 
```

基本上，这是一个谜，但投射到列表中就可以了。 1

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T14:45:02.913

正如评论中所讨论的，解决方案是将返回的 QuerySet 转换为列表。我强烈怀疑这是底层 django 实现中的一个错误，因为在通过索引访问时返回错误元素是一种意外行为，但我无法准确找出问题所在。

默认行为给出错误（意外）结果：

```
>>> changelog = fm.changelog.all()
>>> changelog[0]
id:3 fred changed message status from Received to Read
>>> changelog[1]
id:3 fred changed message status from Received to Read 
```

转换为列表会给出正确的（预期的）结果：

```
>>> changelog = list(fm.changelog.all())
>>> changelog[0]
id:2 fred changed message status from New to Received
>>> changelog[1]
id:3 fred changed message status from Received to Read 
```

# objective-c - 双击保存的文件以启动应用程序。文件名的奇怪路径

> ID：13648050
> 
> 赞同：0
> 
> 时间：2012-11-30T15:22:31.250
> 
> 标签：objective-c, cocoa

我正在使用委托功能`-(BOOL)application:(NSApplication *)theApplication openFile:(NSString *)fileName;`通过双击以前从应用程序本身保存的文件来启动我的应用程序。

我遇到的主要问题是文件的路径。`fileName`如果我在变量中双击桌面上的文件，则会得到以下路径：

```
/Users/Mark/Library/Containers/com.Mark.myApp/Data/Desktop/theFile.ff 
```

虽然我期待类似的东西

```
/Users/Mark/Desktop/theFile.ff 
```

这就是我使用`NSOpenPanel`

我该如何管理这条路径？

编辑 - - -

当我尝试使用取消归档文件的内容时

`[NSKeyedUnarchiver unarchiveObjectWithData:[NSData dataWithContentsOfURL: filename]];`

我得到错误`-[NSKeyedUnarchiver initForReadingWithData:]: data is NULL`

但是当我使用 NSOpenPanel 读取相同的文件时，它可以正常工作。

编辑添加源------------

这本质上是我用来通过双击文件来管理应用程序启动的代码。

```
-(BOOL)application:(NSApplication *)theApplication openFile:(NSString *)fileName{
    self.openFile = [NSURL URLWithString:fileName];
}

- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{
    if (self.openedFile != nil) { 
        id obj = [NSKeyedUnarchiver unarchiveObjectWithData:[NSData dataWithContentsOfURL:filename]];
        - do something with the obj -
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T15:28:07.200

有什么问题？它们都指向同一个文件。第一个只是沙盒表示（使用符号链接，因此应用程序可以访问桌面而不会破坏沙盒）

编辑：在你的代码中你使用 URLWithString 实际上你应该使用 fileURLWithPath。
字符串不是 URL，而是使用 fileURLWithPath 转换为 URL 的 POSIX 路径

# mysql - 如何使用结果表制作另一个表

> ID：13648052
> 
> 赞同：-1
> 
> 时间：2012-11-30T15:22:39.803
> 
> 标签：mysql, sql, database

我有以下代码：

```
SELECT CD_NO, COUNT(purchasedate) AS most_sales
FROM Artist
GROUP BY CD_NO 
```

这将返回每张 CD 的销售量，因为每次销售 CD 都有一个购买的条目。但是，我希望从中找出每个 CD_NO 的销售额最多的日期，而不是显示数字来显示当天 most_sales 的日期。因此，它将根据特定 CD 输入购买日期，然后对它们进行计数并找到特定购买日期的最大购买次数。

例如打开这个输入：

```
CD_NO          purchasedate
1              2012-04-04
1              2012-04-04
1              2012-04-03
2              2012-04-03
2              2012-04-03
2              2012-04-03
2              2012-04-02 
```

并将其变成：

```
CD_NO           most_sales
1               2012-04-04
2               2012-04-03 
```

这是因为它计算了 CD_NO 的不同日期，然后返回哪个日期最多。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T15:32:28.630

```
SELECT CD_NO, COUNT(purchasedate) AS most_sales
INTO ARTIST_SALES
FROM Artist
GROUP BY CD_NO 
```

这应该可行，它将创建一个名为 ARTIST_SALES 的表（您可以更改此表），您也可以考虑在第二个表中添加艺术家 ID，这样您就可以选择每个艺术家的汇总销售额。

编辑：

不知道你用的是mysql，不支持select into，你应该先新建一个表，例如

```
CREATE TABLE Artist_Sales (
  CD_NO INT NOT NULL,
  SALES_COUNT INT NOT NULL
); 
```

然后执行插入，例如：

```
INSERT INTO Artis_Sales (CD_NO,SALES_COUNT)
SELECT CD_NO, COUNT(purchasedate) 
FROM Artist
GROUP BY CD_NO 
```

祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T15:34:25.790

你能不能这样做：

SELECT CD_NO, MAX(PURCHASEDATE) 从 ARTIST GROUP BY CD_NO

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T15:27:03.743

```
SELECT CD_NO, COUNT(purchasedate) AS most_sales
INTO [NEW TABLE NAME] 
FROM Artist
GROUP BY CD_NO 
```

ALL YOU HVAE 做它放入语句，结果将进入一个基本级别的新表

# android - 如何在 Android 的每个单元格中使用 ImageView 和 TextView 动态创建表格布局？

> ID：13648053
> 
> 赞同：0
> 
> 时间：2012-11-30T15:22:41.950
> 
> 标签：android, android-layout, android-tablelayout

我是 android 新手，我在我的 xml 中手动创建了一个包含 5 行和 10 列的表格布局。我设法使用线性布局在每个单元格中组合了一个图像视图和文本视图。但是我的代码太长了，运行程序时我的 Eclipse 崩溃了。

我看到了一些关于在每个单元格中动态创建带有 imageview 的 tablelayout 的代码，但是我找不到关于在每个单元格中组合 imageview 和 textview 的东西。请帮忙...

这是我的 xml 的一部分。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout 
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" 
xmlns:android="http://schemas.android.com/apk/res/android">

<TableLayout 
    android:id="@+id/tableLayout1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:shrinkColumns="*"
    android:stretchColumns="*" 
    >

<TableRow
    android:id="@+id/tableRow1"
    android:layout_width="match_parent"
    android:layout_height="100dp"

 >

  <LinearLayout 
      android:id="@+id/l1"
      android:orientation="vertical"
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:gravity="center"
      android:background="@android:drawable/list_selector_background">  

  <ImageView
      android:id="@+id/s1"
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:src="@drawable/chair" />

   <TextView
       android:id="@+id/t1"
       android:layout_width="wrap_content"
       android:layout_height="wrap_content"
       android:text="001" />

   </LinearLayout>

</TableRow>
</TableLayout>
<LinearLAyout> 
```

我希望它是这样的，我可以点击每个单元格，所以我认为 listview 不能解决我的问题。我也不知道它是否可以支持我的问题。

![在此处输入图像描述](../Images/11b4313d6fa59d4747539813020d8743.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T15:24:44.800

你的行似乎是相同的。您应该将[Listview](http://developer.android.com/reference/android/widget/ListView.html)与每行中具有 imageview 和 textview 的自定义适配器一起使用。

参考： [教程](http://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/) [更多](http://www.ezzylearning.com/tutorial.aspx?tid=1763429)

更新：

尝试使用[GridView](http://developer.android.com/guide/topics/ui/layout/gridview.html)

# mysql - 如何在 nodejs 中执行此异步功能

> ID：13648054
> 
> 赞同：3
> 
> 时间：2012-11-30T15:22:44.530
> 
> 标签：mysql, node.js, asynchronous

我有一个代码来做一些计算。如何以异步方式编写此代码？查询数据库时，似乎无法同步获取结果。那么如何实现这种功能呢？

```
function main () {
    var v = 0, k;
    for (k in obj) 
        v += calc(obj[k].formula)
    return v;
}

function calc (formula) {
    var result = 0;
    if (formula.type === 'SQL') {
        var someSql = "select value from x = y"; // this SQL related to the formula;
        client.query(someSql, function (err, rows) {
            console.log(rows[0].value);
            // *How can I get the value here?*
        });
        result = ? // *How can I return this value to the main function?*
    }
    else 
        result = formulaCalc(formula); // some other asyn code
    return result;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T16:15:47.010

不可能返回异步函数的结果，它只会在自己的函数范围内返回。

这也是不可能的，结果将始终保持不变（null）

```
client.query(someSql, function (err, rows) {
   result = rows[0].value;
});
return result; 
```

在 calc() 函数中放置一个回调作为第二个参数，并在 client.query 回调中调用该函数并使用结果

```
function main() {
   calc(formula,function(rows) {
      console.log(rows) // this is the result
   });
}

function calc(formula,callback) {
   client.query(query,function(err,rows) {
       callback(rows);
   });
} 
```

现在，如果您希望 main 返回该结果，您还必须在 main 中放置一个回调参数并像以前一样调用该函数。

我建议您查看[async](https://github.com/caolan/async)它是一个很棒的库，而不必处理这种麻烦

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T16:34:14.623

这是使用事件实现循环以执行计算（模拟异步数据库调用）的一种非常粗略的方法。

正如 Brmm 所暗示的，一旦你去异步，你必须一直去异步。下面的代码只是一个示例，让您了解理论上的流程应该是什么样子。有几个库可以使处理异步调用的同步过程变得更加干净，您也想研究一下：

```
var events = require('events');
var eventEmitter = new events.EventEmitter();
var total = 0;
var count = 0;
var keys = [];

// Loop through the items
calculatePrice = function(keys) {
    for (var i = 0; i < keys.length; i++) {
        key = keys[i];
        eventEmitter.emit('getPriceFromDb', {key: key, count: keys.length});
    };
}

// Get the price for a single item (from a DB or whatever)
getPriceFromDb = function(data) {
    console.log('fetching price for item: ' + data.key);
    // mimic an async db call
    setTimeout( function() {
        price = data.key * 10;
        eventEmitter.emit('aggregatePrice', {key: data.key, price: price, count: data.count});
    }, 500);
}

// Agregate the price and figures out if we are done
aggregatePrice = function(data) {

    count++;
    total += data.price;
    console.log('price $' + price + ' total so far $' + total);

    var areWeDone = (count == data.count);
    if (areWeDone) {
        eventEmitter.emit('done', {key: data.key, total: total});   
    } 
}

// We are done.
displayTotal = function(data) {
    console.log('total $ ' + data.total);
}

// Wire up the events
eventEmitter.on('getPriceFromDb', getPriceFromDb);
eventEmitter.on('aggregatePrice', aggregatePrice);
eventEmitter.on('done', displayTotal);

// Kick of the calculate process over an array of keys
keys = [1, 2, 3]
calculatePrice(keys); 
```

# mysql - MySQL 不会 CSV 导入 \N 作为 NULL

> ID：13648055
> 
> 赞同：2
> 
> 时间：2012-11-30T15:22:45.737
> 
> 标签：mysql, csv, phpmyadmin

我正在尝试使用 phpMyAdmin 将 CSV 文件导入 MySQL 5.1 DB。该文件包括几个可能包含`NULL`值的日期列。[根据手册](http://dev.mysql.com/doc/refman/5.1/en/load-data.html)，`NULL`应该写成`\N`。但是，在以其他方式成功导入后，将`\N`显示为`0000-00-00`日期列（而不是*`NULL`*）。如何导入 NULL？

选项集：

*   行分隔符`,`
*   `"`由,包围的字段
*   逃脱的领域`\`，
*   `auto`以.结尾的行

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T15:22:45.737

phpMyAdmin 区分两种 CSV 导入格式：`CSV`和`CSV with LOAD DATA`. 后一个选项实际上接受`\N`了手册中的描述。

如果列被一个字符包围（就是这种情况），也可以使用前一种方法（no ）通过在 CSV 文件中将`LOAD DATA`值设置为非封闭来导入 NULL。`NULL`这符合[手册](http://dev.mysql.com/doc/refman/5.1/en/load-data.html)的以下声明：

> 如果 FIELDS ENCLOSED BY 不为空，则将包含文字 NULL 作为其值的字段读取为 NULL 值。这与包含在 FIELDS ENCLOSED BY 字符中的单词 NULL 不同，后者被读取为字符串“NULL”。

# javascript - 根据切换更改按钮值

> ID：13648060
> 
> 赞同：0
> 
> 时间：2012-11-30T15:22:58.637
> 
> 标签：javascript, jquery, html

我想要做的是，如果通过按下它打开的部分可见，则将按钮值设为“1”，如果该部分不可见，则使其显示“2”。（可见/不可见 - 隐藏/可见）。

这是我认为最接近真相的失败尝试：

```
 $(document).ready(function(){
    $(".doc1").hide();
    $(".doc").click(function(){
        $(".doc1").slideToggle("fast");

        if($('.doc1').is(':visible')) {
            document.getElementById('doc').value = '1';
        }
        else
            document.getElementById('doc').value = '2';
    });
}); 
```

无论该部分是打开（可见）还是隐藏（.hide），该值都停留在“2”上。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T15:29:55.797

有几件事。首先你有`$(".doc").click`. 你的意思是`$("#doc").click`？

其次，如果您在 check 之前启动动画`:visible`，它将*始终*被认为是可见的。您要么需要使值更改调用的回调`slideToggle`，要么只需反转分配顺序并在`slideToggle`之后执行：

[http://jsfiddle.net/95nKw/](http://jsfiddle.net/95nKw/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T15:29:01.460

根据 jquery 文档：

**在隐藏元素的动画期间，该元素被认为是可见的，直到动画结束。在显示元素的动画期间，该元素被认为在动画开始时可见。**

可能你应该等到动画完成

```
$(".doc").click(function(){
    $(".doc1").slideToggle("fast", function(){
        if($('.doc1').is(':visible')) {
            document.getElementById('doc').value = '1';
        }
        else
            document.getElementById('doc').value = '2';     
    });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T15:31:20.310

如果您打算使用 jquery，请继续使用它。使返回和修复/阅读变得更加容易。

下面可能是您正在寻找的内容。

```
$(document).ready(function(){
    $(".doc1").hide();
    $(".doc").click(function(){
        $(".doc1").slideToggle("fast", function() {
           if($(this).is(':visible')) {
              $('#doc').val('1');
           } else {
              $('#doc').val('2');
           }
        });
    });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T15:30:21.140

未经测试，但我会尝试这样的事情：

```
$(document).ready(function(){
    $(".doc1").hide();
    $(".doc").click(function(){
        $(".doc1").slideToggle("fast");

        if($('.doc1').is(':visible')) {

             $(".doc").val("1");  //or .val(1);
        }
        else
             $(".doc").val("2");
    });
}); 
```

# javascript - 如何选择图像背面的文本？

> ID：13648061
> 
> 赞同：1
> 
> 时间：2012-11-30T15:22:58.497
> 
> 标签：javascript, html, css

我在前面有一个图像，在后面有一个文本。我想在图像仍然在前面时使文本可选。我怎样才能做到这一点？jsfiddle 的链接是[http://jsfiddle.net/G5BeU/](http://jsfiddle.net/G5BeU/)

示例代码

```
<html><head><style type="text/css">@media print {  .gmnoprint {    display:none  }}@media screen {  .gmnoscreen {    display:none  }}</style>
    <title>Google Maps JavaScript API v3 Example: Custom StreetView</title>
    <meta charset="utf-8">
<style>
#parent-street-view{position:relative}
#map_canvas{position:absolute !important;width: 500px; height: 400px; background-color: rgb(229, 227, 223); overflow: hidden; -webkit-transform: translateZ(0);z-index:0}
#parent-street-view .overlay-pollution{width: 500px; height: 400px;position:absolute;z-index:100; }
</style>
  </head>
  <body>
    <div id="parent-street-view">
        <div id="map_canvas" >This is supposed to be visible and selectable</div>
        <img class="overlay-pollution" src="http://www.mickeys.net/assets/images/default/transparent.png" />
    </div>

    <!--<canvas id="canvas" width="500px" height="500px" style="position:absolute;top:500px;"></canvas>-->
</body></html> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-30T15:24:39.497

很简单，将`pointer-events`图片的 CSS 属性设置为`none`. 这将允许您选择后面的文本。

您可能还想降低图像的不透明度，以便可以看到部分文本。

```
#parent-street-view .overlay-pollution {
    width: 500px;
    height: 400px;
    position: absolute;
    z-index: 100;
    opacity: 0.5;
    pointer-events:none;
} 
```

这是一个演示：http: [//jsfiddle.net/G5BeU/2/](http://jsfiddle.net/G5BeU/2/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-30T16:27:07.987

使用此代码。

```
<html><head><style type="text/css">@media print {  .gmnoprint {    display:none  }}@media screen {  .gmnoscreen {    display:none  }}</style>
    <title>Google Maps JavaScript API v3 Example: Custom StreetView</title>
    <meta charset="utf-8">
<style>
#parent-street-view{position:relative}
#map_canvas{position:absolute !important;width: 500px; height: 400px; background-color: rgb(229, 227, 223); overflow: hidden; -webkit-transform: translateZ(0);z-index:0}
#parent-street-view .overlay-pollution{width: 500px; height: 400px;position:absolute;z-index:100; }

.overlay-pollution:hover + #map_canvas , #map_canvas:hover
{
    z-index: 1000;
}

</style>
  </head>
  <body>
    <div id="parent-street-view">
        <img class="overlay-pollution" src="http://www.mickeys.net/assets/images/default/transparent.png" />
        <div id="map_canvas" >This is supposed to be visible and selectable</div>
    </div>

    <!--<canvas id="canvas" width="500px" height="500px" style="position:absolute;top:500px;"></canvas>-->
</body></html> 
```

**笔记 ：**

添加样式

```
.overlay-pollution:hover + #map_canvas , #map_canvas:hover
{
    z-index: 1000;
} 
```

HTML 代码标签更改位置

```
<img class="overlay-pollution" src="http://www.mickeys.net/assets/images/default/transparent.png" />
<div id="map_canvas" >This is supposed to be visible and selectable</div> 
```

[在http://jsfiddle.net/Ct2X8/1](http://jsfiddle.net/Ct2X8/1)看到这个例子

# objective-c - Monotouch 绑定 ObjC 库

> ID：13648063
> 
> 赞同：3
> 
> 时间：2012-11-30T15:23:02.600
> 
> 标签：objective-c, binding, xamarin.ios, static-libraries

构建胖二进制文件时出现错误：

```
ld: symbol(s) not found for architecture i386 (or arm7 for device)
collect2: ld returned 1 exit status

error MT5202: Native linking failed. Please review the build log. 
```

即使我在 ApiDefinition 中只放置一个定义（AWView）。包括所有依赖项。

虽然，在 xcode 中一切正常。

这是[github](https://github.com/gaech/adwired-binding)的链接。

PS“xcrun -sdk iphoneos lipo -info /...../libAdWired.a”告诉你

> 胖文件中的架构：libAdWired.a 是：i386 armv6 armv7

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T19:35:15.237

我必须解放我的思想，我喜欢/喜欢做 MonoTouch 绑定，所以请试一试

[https://github.com/dalexsoto/AlexTouch.AdWired](https://github.com/dalexsoto/AlexTouch.AdWired)

希望这可以帮助

亚历克斯

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T15:48:20.793

尝试为将针对 armv7 架构的实际设备进行编译...。您的 objc 库未使用 i386 架构编译，可能只是 armv7。您可以通过转到终端并使用以下命令来查看其中编译了哪些架构：

```
file libSomeLibrary.a 
```

这将告诉您编译库中的所有架构。因此，只需选择 Debug -> iPhone 而不是 iPhone Simulator，您就不会遇到同样的错误...

# c++ - 确定二进制文件的大小

> ID：13648066
> 
> 赞同：4
> 
> 时间：2012-11-30T15:23:19.933
> 
> 标签：c++, file-io, input

我正在尝试读取一个二进制文件，我需要确定它的大小，但是无论我尝试过哪种方法，我的大小都是零。

例如：

```
fstream cbf(address, ios::binary | ios::in | ios::ate);
fstream::pos_type size = cbf.tellg();                   // Returns 0.

char* chunk = new char[size];
cbf.read(chunk, size);
//... 
```

如果我要使用以下内容：

```
#include <sys/stat.h>
struct stat st;
stat(address.c_str(),&st);
int size = st.st_size; 
```

大小仍然为零。我也尝试了以下方法，但它仍然为零。

```
File* fp;
fp = open(address.c_str(), "rb"); 
```

如何获取文件的大小？

感谢您的回复...我已经确定了问题：我尝试访问的二进制文件是在执行期间创建的，我只是忘记在尝试读取之前关闭它...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T15:43:41.177

您的两个示例都没有检查失败。[这个程序](http://ideone.com/Tr6AVb)，使用你的第一种方法，对我来说效果很好。它正确识别 /etc/passwd 的大小和 /etc/motd 的不存在。

```
#include <fstream>
#include <iostream>
#include <string>

void printSize(const std::string& address) {
  std::fstream motd(address.c_str(), std::ios::binary|std::ios::in|std::ios::ate);
  if(motd) {
    std::fstream::pos_type size = motd.tellg();
    std::cout << address << " " << size << "\n";
  } else {
    perror(address.c_str());
  }
}

int main () {
    printSize("/etc/motd");
    printSize("/etc/passwd");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T16:08:48.130

尝试以这种方法加载文件。

注意：在这一行中使用`ifstream`insted of`fstream``ifstream cbf(address, ios::binary | ios::in );`

```
long size;
ifstream cbf(address, ios::binary | ios::in);
cbf.seekg(0, ios::end);
size=cbf.tellg();
cbf.seekg(0, ios::beg);

char* chunk = new char[size];
cbf.read(chunk, size); 
```

# java - Java 重复正则表达式

> ID：13648067
> 
> 赞同：-1
> 
> 时间：2012-11-30T15:23:29.393
> 
> 标签：java, regex, expression

我有以下 RegEx 应该匹配例如括号中的一些 id：

```
[swpf_02-7679, swpf_02-7622, ...]

Pattern p = Pattern.compile("[\\[\\s]*?[a-z]{1,8}[0-9]*?_[0-9]{2,}\\-[0-9]+[\\s]*?\\]"); 
```

现在的目标是将此模式与“，”处的“拆分”结合起来，以适应字符串`[swpf_02-7679, swpf_02-7622]`，而不仅仅是`[swpf_02-7679]`像上面发布的 RegEx。

有人可以给我一个提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T15:29:47.533

我认为做你想做的最简单的方法是删除前后的'['和']'（使用`String.subString()`），然后用逗号分隔`String.split()`并在返回的每个单独的字符串上使用正则表达式（调整正则表达式当然要删除括号）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T15:31:48.483

只需从字符串中删除`[`and然后在`]``split``,`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T15:33:24.627

好的，假设您想要 id 类似于“swpf_02-7622”的位，然后在逗号上拆分，然后循环遍历剩余部分，边走边修剪。就像是

```
List<String> cleanIds = new ArrayList<String>();
for(String id : ids.split(","))
    cleanIds.add(id.trim()); 
```

如果你想去掉“swpf_”位，那么 id.substring(5)。

最后，要去掉方括号，请使用 id.startsWith('[') 和 id.endsWith(']') 。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T15:40:14.270

正如@was 和@garyh 已经提到的，最简单的方法是删除`[]`，然后使用`String.split("\s*,\S*") 拆分您的列表，然后使用您的模式匹配每个成员。

您还可以使用起始位置作为上一次迭代的结束位置多次匹配您的字符串：

Pattern p = .... // 你在捕获括号中的模式`()` Matcher m = p.matcher(str);

```
for (int start = 0; m.find(start); start = m.end()) {
    String element = m.group(1);
    // do what you need with the element.
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-30T18:07:33.550

如果您只想提取列表中的所有代码，可以使用以下正则表达式：

```
[^,\s\[\]]+ 
```

从以下字符串中获取所有匹配项：

```
[swpf_02-7679, swpf_02-762342, swpf_02-7633  ,   swpf_02-723422] 
```

会给你以下结果：

```
swpf_02-7679
swpf_02-762342
swpf_02-7633
swpf_02-723422 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-30T15:28:17.840

为什么不使用 Java [StringTokenizer](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/StringTokenizer.html)类，然后只对从中获得的标记使用正则表达式？您可以对它们进行后处理以包含您需要的括号或稍微修改正则表达式。

# jquery - 将选择列表功能从“删除”更改为“添加到”

> ID：13648069
> 
> 赞同：1
> 
> 时间：2012-11-30T15:23:29.737
> 
> 标签：jquery, html, html-lists, optgroup

我有一个脚本，它从 ul 列表中生成一个 opt 组选择，然后替换它。我想更改函数以生成选择列表但不替换 ul 列表。这是UL：

```
<ul id="sitemap">
    <li><a href="www.google.com">Home</a></li>
    <li><a href="www.google.com">Small Business</a>
        <ul>
            <li><a href="www.google.com">Laptops</a></li>
            <li><a href="www.google.com">Workstations</a></li>
            <li><a href="www.google.com">Workstations</a></li>
            <li><a href="www.google.com">Printers</a></li>
            <li><a href="www.google.com">Mobile Phones</a></li>
        </ul>
    </li>
    <li><a href="www.google.com">Public Sector</a>
        <ul>
            <li><a href="www.google.com">State Government</a></li>
            <li><a href="www.google.com">Federal Government</a></li>
            <li><a href="www.google.com">Support and Drivers</a></li>
        </ul>
    </li>
    <li><a href="www.google.com">Large Enterprise</a>
        <ul>
            <li><a href="www.google.com">Services</a></li>
            <li><a href="www.google.com">Solutions</a></li>
        </ul>
    </li>
</ul> 
```

和 JS：

```
function sitemapCycle(){
    if(typeof(sitemapNode)==="undefined") sitemapNode= $("#sitemap");
    if($(this).find("ul").length)
    {
        sitemapNode= $(sitemapNode).append('<optgroup label="'+$(this).children().first().text()+'" />').children().last();
        $(this).find("ul li").each(sitemapCycle);
        sitemapNode= $(sitemapNode).parent();
    }
    else
    {
         $(sitemapNode).append('<option value="'+$(this).children().attr("href")+'">'+$(this).text()+'</option>');
    }
}

var sitemapNode;

$("#sitemap").removeAttr("id").after('<select id="sitemap" />').children().each(sitemapCycle).parent().remove();​ 
```

我对 js 不是很有经验，但是我想删除

```
var sitemapNode;

$("#sitemap").removeAttr("id").after('<select id="sitemap" />').children().each(sitemapCycle).parent().remove();​ 
```

会做的伎俩，但它没有。这是一个活生生的例子：http: [//jsfiddle.net/XvruF/](http://jsfiddle.net/XvruF/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T15:39:06.313

将最后一行更改为：

```
$("#sitemap").removeAttr("id").after('<select id="sitemap" />').children().each(sitemapCycle);​ 
```

# java - 这段代码中有构造函数吗？

> ID：13648070
> 
> 赞同：1
> 
> 时间：2012-11-30T15:23:32.023
> 
> 标签：java, constructor

这段代码中有构造函数吗？这段代码的哪一部分是构造函数？

```
class Bicycle {
    int cadance = 0;
    int speed = 0;
    int gear = 0;

    void changeCadance(int changeCadence) {
        cadance = changeCadence;
    }

    void changeGear(int changeGear) {
        gear = changeGear;
    }

    void changeSpeed(int changeSpeed) {
        speed = changeSpeed;
    }

    void printState() {
        System.out.print("Cadance = "+cadance);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T15:29:01.970

你所拥有的是一个隐含的默认构造函数。它从未被拼写出来，但它被 IDE 和编译器理解为存在。非静态类通常被理解为具有构造函数，因此如果没有显式创建构造函数，则使用**默认构造函数**。它不接受任何参数，并且除了使用显式提供的属性值初始化类之外什么都不做。有时，您可以只使用默认设置。

有关更多信息，我正在链接[默认构造函数](http://en.wikipedia.org/wiki/Default_constructor)的维基百科文章，因为我认为它很好地解释了多种语言。

从本质上讲，如果类中没有明确给出无参数构造函数，则默认构造函数由编译器提供（IDE 通常也允许您调用它）。因此，如果我编写了一个带参数的构造函数，但我不编写不带参数的构造函数，编译器仍然会提供一个。

这有点笼统，因为某些语言略有不同，但我认为大多数语言都是上述情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T18:11:45.030

构造函数是*隐含的默认构造函数*。

如果没有定义其他构造函数，则提供空构造函数（不带参数）是 Java（和其他语言）的惯例。

值得注意的是，只要您添加任何带参数的构造函数，那么隐含的默认构造函数就不再可用。

# mfc - CTabCtrl SetItemRect?

> ID：13648071
> 
> 赞同：2
> 
> 时间：2012-11-30T15:23:36.623
> 
> 标签：mfc, ctabctrl

我想改变标签的大小。

我们在选项卡中添加了一个右十字，但它与选项卡的文本有很大的冲突。

![在此处输入图像描述](../Images/a366d3ab647f2d987f07a140a4a2cb93.png)

到目前为止，我已经意识到以下几点：

*   `GetItemRect(int i, RECT* rc)`给我矩形。我真正想要的是一个 SetItemRect。
*   `SetItem`不能使用，因为该项目不包含其大小。它是根据我给它的内容计算的。
*   我可以在字符串末尾添加一个空格字符，但这违反了事物的自然顺序。我不会用 CStrings 调整像素。
*   `SetSize`应该设置选项卡的大小（所有选项卡？）。但是我找不到不触发重绘的放置它的位置，如果我将它与 WM_PAINT 案例一起放置，则会引发无限循环。

这是我自定义绘制选项卡内容的地方，但我无法在此处调整它们的大小：

```
LRESULT CSkinnedTabCtrl::WindowProc(UINT message, WPARAM wParam, LPARAM lParam) 
{
switch (message) {
    case WM_PAINT: {
        ...

        CPaintDC dc(this); 

        INT nCount = GetItemCount();

        for (INT i = 0; i < nCount; i++) {
            CRect rc;
            GetItemRect(i, rc);
            DrawItem(dc, i, rc);
        }

        return TRUE;
    } 
```

我在哪里设置选项卡的大小，以及如何设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T08:55:00.913

IIRC you need to overwrite WM_NCCALCSIZE message.

# apache - 阻止整个国家访问服务器的最简单方法

> ID：13648080
> 
> 赞同：0
> 
> 时间：2012-11-30T15:23:59.797
> 
> 标签：apache, .htaccess, spam, spam-prevention

在过去的两周里，我收到了相当严重的垃圾邮件，并开始查找垃圾邮件发送者的 IP，并注意到他们都来自我的网站甚至不感兴趣的非常特定的国家。我在网上找到了解决这个问题的方法，但它涉及将大量代码放入 htaccess 以阻止 IP。是否有阻止整个国家/地区的最小方法？我还想知道地图上是否有某种 IP 范围的地理表示，以便下次我可以通过视觉辅助来确定垃圾邮件的来源。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T18:36:51.633

[GeoIP](http://www.maxmind.com/en/geolocation_landing)在免费数据库中提供国家代码信息。我调整了一个 phpBB 论坛来使用它，并看到垃圾的大量减少。

但是，只有在垃圾邮件发送者不使用代理的情况下，才能阻止中国、印度、越南和其他不好的地方。此外，来自这些区域的一些 IP 解析为“未知”，您可能不得不让这些 IP 通过或冒险阻止合法用户。

# c# - 双动画倾斜不起作用

> ID：13648082
> 
> 赞同：0
> 
> 时间：2012-11-30T15:24:10.160
> 
> 标签：c#, wpf, animation

我试图让这个动画工作，但由于某种原因，当调度计时器调用它时什么都没有发生，有什么想法吗？

```
 public static void Grass2(Canvas canvas, int boundry)
    {
        foreach (var element in canvas.Children.OfType<Image>())
        {
            var elementName = Regex.Split(element.Name, "_");
            if (elementName[0] == "grass")
            {
                var skewGrass = new DoubleAnimation
                    {
                        From = 0,
                        To = boundry,
                        Duration = new Duration(TimeSpan.FromMilliseconds(100)),
                        RepeatBehavior = RepeatBehavior.Forever,
                        EasingFunction = new BackEase(),
                        AutoReverse = true
                    };
                element.BeginAnimation(SkewTransform.AngleXProperty, skewGrass);
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T20:15:12.537

You're trying to animate the `SkewTransform.AngleXProperty` on an object of type Image. That won't work since Image does not have this property. However, the Image's `RenderTransform` might be set to a SkewTransform, and that SkewTransform can be animated:

```
...
// each element's RenderTransform must be a SkewTransform
var transform = (SkewTransform)element.RenderTransform;
transform.BeginAnimation(SkewTransform.AngleXProperty, skewGrass); 
```

# android - 在 onPostExecute adapter.notifyDataSetChanged() 中发布时无法更新列表视图中的列表适配器；

> ID：13648084
> 
> 赞同：0
> 
> 时间：2012-11-30T15:24:28.933
> 
> 标签：android, android-asynctask, android-arrayadapter, reload

基本上我已经尝试这样做了 40 多个小时 - 阅读所有关于它的线程，但仍然没有结果！因此，在发布 onPostExecute adapter.notifyDataSetChanged(); 时，我无法在列表视图中更新列表适配器；

```
ArrayAdapter<String> adapter;
private ProgressDialog dialog;

protected void onCreate(Bundle savedInstanceState) 
{

    super.onCreate(savedInstanceState);

    setListAdapter(adapter);
    dialog = new ProgressDialog(
            Table.this);
    dialog.setProgressStyle(ProgressDialog.STYLE_SPINNER);
        dialog.setMessage("Загружаю. Подождите..."); 

    AsyncTask<Void, Void, Void> loadingTask = new AsyncTask<Void, Void, Void>() {
        @Override
        protected void onPreExecute() {                                     
              dialog.show();
        }

        @Override
        protected Void doInBackground(Void... params) {                 

  ........ adapter = new ArrayAdapter<String>(Table.this,         android.R.layout.simple_list_item_1,CreateStringArray
   .getString(myData, null, null, null, null));

            return null;
        }
        @Override
        protected void onPostExecute(Void result) {  
          adapter.notifyDataSetChanged();      
         Table.this.
            dialog.dismiss();
        }

    };          
    loadingTask.execute();  

    getListView().setOnItemClickListener(this);

} 
```

所以它向我展示了微调器并成功加载和删除它。经过一段时间的调试，我注意到它成功地更改了适配器中的数据。仍然它凹痕显示它。我正在使用 listvew

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T15:30:37.093

通过在其中实例化一个新适配器，`doInBackGround`您将失去对您设置的适配器的引用`setListAdapter(adapter);`因此，您在 OnPostExecute 中通知的适配器不是您的 ListView 中的适配器。

# php - 如何优化此 sql 查询以获得更快的结果

> ID：13648086
> 
> 赞同：0
> 
> 时间：2012-11-30T15:24:31.563
> 
> 标签：php, mysql, sql

我对一些奇怪的 sql 查询有疑问。我正在使用 MySQL，我会更改数据库结构，但我不能。所以我必须用查询来解决我的问题。

所以我有3张桌子。挑战、用户挑战和用户订阅。我需要离开那里 3 如下：

我需要一个包含 Challenges.private = 0 的所有挑战的列表，并且我必须排除当前用户 ID 下的 Users_challenges 中出现的所有挑战（users_challenges.iduser = 414）。然后我需要可以具有challenge.private = 1或0的挑战，但它们列在第三个表（users_subscribed.iduser = 414）中，而且在这里我必须从挑战表中排除所有读取的ID。最后，我需要统一所有结果并按时间和限制对它们进行排序。

我希望我是正确的，因为这很令人困惑，至少对我来说：D

我当前的查询需要 26 秒才能执行：

```
SELECT *
FROM challenges
WHERE challenges.private = 0
AND challenges.isquest = 1
AND challenges.title like '%%'
AND challenges.id NOT
IN (
        SELECT users_challenges.idchallenge
        FROM users_challenges
        WHERE users_challenges.iduser = 414
        AND users_challenges.idquest IS NULL
        GROUP BY users_challenges.idchallenge
)

UNION

SELECT *
FROM challenges
WHERE challenges.isquest = 1
AND challenges.title like '%%'
AND challenges.iduser
IN (
                SELECT users_subscriptions.idsubscribedto
                FROM users_subscriptions
                WHERE users_subscriptions.iduser = 414
                UNION
                SELECT 414 AS idsubscribedto
)
AND challenges.id NOT
IN (
        SELECT users_challenges.idchallenge
        FROM users_challenges
        WHERE users_challenges.iduser
        IN (
                SELECT users_subscriptions.idsubscribedto
                FROM users_subscriptions
                WHERE users_subscriptions.iduser = 414
                UNION
                SELECT 414 AS idsubscribedto
        )
        AND users_challenges.idquest IS NULL
        GROUP BY users_challenges.idchallenge
)

ORDER BY TIME DESC
LIMIT 0,30 
```

那么有没有办法简化这个查询并更快地获得相同的结果？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T17:12:16.467

如果`and challenges.title like '%%'`不是错字，我会首先*将*其删除，因为它始终是正确的。

根据将[子查询重写为联接](http://dev.mysql.com/doc/refman/5.5/en/rewriting-subqueries.html)，使用联接而不是`in (subquery)`.

您也可以分别运行这两个查询，以查看其中一个是否很慢。然后，您可以专注于慢速部分，而不要理会快速的部分。

# windows - If else 条件下批处理脚本的异常行为

> ID：13648091
> 
> 赞同：0
> 
> 时间：2012-11-30T15:24:58.920
> 
> 标签：windows, if-statement, batch-file

作为批处理文件编程的初学者，我创建了一个批处理文件。下面是代码片段-

```
SET INDEX=1
SET CURRJOBS=10
REM TOTALJOBS and CURRJOBS are dynamic but to keep code here, i have put static values to them
SET TOTALJOBS=1000
IF [%CURRJOBS%] LSS [%TOTALJOBS%] (

    IF [%INDEX%] GEQ [5] (
        SET /A INDEX=0
    )

    ECHO Started at %date% %time% with %CURRJOBS% jobs>>%CURRDIR%\JobSubmit.log
    REM Here is a call to another bat file with Index.
    ECHO Finished at %date% %time% with %CURRJOBS% jobs>>%CURRDIR%\JobSubmit.log
    SET /A INDEX+=1
    GOTO START
)ELSE (
   ECHO Finished at %date% %time% with %CURRJOBS% jobs>>%CURRDIR%\JobSubmit.log
) 
```

现在，这段代码有时有效，有时无效。但是有一些语法错误可能会导致行为异常。是否有任何 IDE 或在线实用程序来检查批处理文件的语法？

上面的代码有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T16:16:14.157

IF 命令中的比较有两种类型：字符串或数字。为了指示我们想要数字比较的 IF，数字必须写成没有额外的字符。所以，你的代码应该这样写：

```
IF %CURRJOBS% LSS %TOTALJOBS% (
    IF %INDEX% GEQ 5 (
        SET /A INDEX=0
    ) 
```

当变量或参数可能有空值时，习惯上用引号将其括起来以避免语法错误，例如：

```
IF "%POSSIBLEEMPTYVAR%" NEQ "" ( 
```

如果变量具有字符串值，您可以使用相同的格式来检查空值并进行比较：

```
IF "%VARIABLE%" equ "THIS VALUE" GOTO OK 
```

但是，如果一个变量可能为空并且您想将其作为数字进行比较，则必须进行两个测试。

# iphone - iPhone 应用程序的 Adhoc 分发

> ID：13648092
> 
> 赞同：0
> 
> 时间：2012-11-30T15:25:04.690
> 
> 标签：iphone, ipad, ios5, ios6, xcode4.5

大家好，我只想知道..创建分发配置文件时是否需要手动添加所有设备udid？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T15:27:12.760

是的，它是。您需要添加设备，然后在要生成 AD-HOC 配置文件时选择它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T01:33:32.710

我使用“AppStore”配置文件签署了一个应用程序并将其存档并保存以供分发。这在开始时有效，但是当我将 IPA 发送给其他人时，他们（大多数人）无法在他们的设备中安装该应用程序。还是试试吧。

# php - 如何在 PHP 中找到并显示两个日期之间的差异？

> ID：13648095
> 
> 赞同：0
> 
> 时间：2012-11-30T15:25:14.797
> 
> 标签：php, datetime, datediff

> **可能重复：**
> [如何使用 PHP 计算两个日期之间的差异？](https://stackoverflow.com/questions/676824/how-to-calculate-the-difference-between-two-dates-using-php)

> [由于该主题显然没有任何好的规范问题，并且有超过 5000 个重复项，因此我认为该主题的规范是有序的。请告诉我您是否找到了一个**具有良好答案的副本，详细说明了步骤并提供了正确、可靠的解决方案**。]

给定两个示例日期：

1.  2012-11-30 17:03:30
2.  2012-12-21 00:00:00

如何找到两者之间的差异并正确显示？

期望的输出：

> 20天6小时56分30秒

# hibernate - JPA 和 Hibernate 让我发疯，不坚持我的对象

> ID：13648098
> 
> 赞同：2
> 
> 时间：2012-11-30T15:25:23.383
> 
> 标签：hibernate, postgresql, jpa, netbeans, persistence

我有一个现有的 java-JSF 项目，我被要求添加持久性，使用 JPA 和 Hibernate，当然还有 MVC。我使用 Postgres 作为 DBMS，使用 Netbeans 作为我的 IDE。我做了很多研究，结果比开始之前更加困惑，所以这就是我到目前为止所得到的：

我的项目需要是一个工作列表网站，用户可以在其中注册然后申请工作机会。但我只是坚持注册用户。我的视图有一个使用 JSF 构建的 register.xhtml 页面，我的模型包中有一个 User.java 类，我的控制器中有一个 UserController bean。register.xhtml 调用 UserController bean 中的 register() 方法，该方法应该保留 User 对象。

我已经像这样配置了我的 persistence.xml：

```
<persistence version="2.0" xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">  
<persistence-unit name="TP5PU" transaction-type="RESOURCE_LOCAL">  
<provider>org.hibernate.ejb.HibernatePersistence</provider>  
<non-jta-data-source>tp5</non-jta-data-source>  
<class>model.User</class>  
<exclude-unlisted-classes>true</exclude-unlisted-classes>  
<properties>  
  <property name="configLocation" value="WEB-INF/classes/hibernate.cfg.xml"/>  
  <property name="hibernate.dialect" value="org.hibernate.dialect.PostgreSQLDialect"/>  
  <property name="hibernate.hbm2ddl.auto" value="update"/>  
  <property name="hibernate.connection.username" value="postgres"/>  
  <property name="hibernate.connection.password" value="postgres"/>  
  <property name="hibernate.connection.url" value="jdbc:postgresql://localhost:5432/pootp5"/>  
</properties>  
</persistence-unit>  
</persistence> 
```

我还创建了一个 PersistenceManager.java 类，它是一个单例，其中还有一个单例 EntityManagerFactory：

```
import javax.persistence.*;

public class PersistenceManager {

private EntityManagerFactory emf = null;
private EntityManager em = null;
private static PersistenceManager instance = null;

private PersistenceManager(){
}

public static PersistenceManager getInstance() {
    if (instance==null){
        instance=new PersistenceManager();
    }
    return instance;
}

public EntityManagerFactory getEmf() {
    if (emf == null){
        this.setEmf(Persistence.createEntityManagerFactory("TP5PU"));
    }
        return emf;
}

public EntityManager getEm() {
    this.setEm(this.getEmf().createEntityManager());
    return em;
}

public void setEmf(EntityManagerFactory emf) {
    this.emf = emf;
}

public void setEm(EntityManager em) {
    this.em = em;
}
} 
```

现在，我的 UserController bean 有以下代码：

```
import javax.faces.bean.ManagedBean;
import javax.faces.bean.SessionScoped;
import java.io.Serializable;
import javax.persistence.EntityTransaction;
import model.PersistenceManager;
import model.Usuario;

@ManagedBean (name="userController")
@SessionScoped
public class UserController implements Serializable{

private String username;
private String password;
private String name;
private String lastname;
private String resume;
private PersistenceManager pm;
private EntityTransaction tx;

public UserController() {
    pm = PersistenceManager.getInstance();
    tx = pm.getEm().getTransaction();
}

public String register() {
    User user = new User(this.getUsername(), this.getPassword(), this.getName(), this.getLastname(), this.getResume());
    try {
        getPm().getEmf();
        getTx().begin();
        getPm().getEm().persist(user);
        getTx().commit();
        getPm().getEm().close();
        return "registered";
    }
    catch (org.hibernate.exception.ConstraintViolationException e1){   
        if (getTx().isActive()){
            getTx().rollback();}
        getPm().getEm().close();
        return "duplicateuser";
    }
    catch (Exception e2){   
        if (getTx().isActive()){
            getTx().rollback();}            
        getPm().getEm().close();
        return "registrationerror";
    }
}

//all getters & setters
} 
```

我所有的 User.java 类都有一堆属性和 getter/setter 方法：

```
import java.io.Serializable;
import javax.persistence.*;

@Entity
public class User implements Serializable {

@Id
@GeneratedValue(strategy=GenerationType.AUTO)
@Column(updatable=false)
protected long userID;
@Column(unique=true)
private String username;
private String password;
private String name;
private String lastname;
private String resume;

//and all the getters & setters needed for each attribute. 
```

register.xhtml 页面有一个注册表单（我不包括在这里，因为它只是一团糟，所有 i18n 键和东西）当按下“注册”按钮时调用 UserController bean：

如果 register() 方法返回“已注册”，则有一个导航规则将用户带到应用程序登录。如果它返回“duplicateuser”，则将其带回 register.xhtml，如果它抛出不同的错误消息，它也会将用户带回 register.xhtml（是的，这些涉及的逻辑并不多，我需要保持简单）。

问题是，我创建了我的用户表，但没有用户保存在其中，并且我没有收到任何错误消息、异常或任何东西。调试时，我在 UserController bean 中的 EntityTransaction 对象将事务显示为 begin=true 然后committed=true，所以一切似乎都在工作。但是我去检查我的数据库并创建了表，但其中没有用户:(

另外，我想知道当将 PersistenceManager 作为单例并将所有持久性逻辑粘贴在 UserController bean 中时，我是否以正确的方式进行。如果有人能指导我一点，我将非常感激！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T16:39:53.353

您的 getEM() 方法在每次调用时都会创建一个新的 EntityManager。这意味着您用来启动事务的实体管理器与您调用persist(user)的实体管理器不同；上。因此事务提交，但不绑定到包含您的更改的 EM。

使用静态 PM 来保存 EntityManager 是个坏主意，因为 EntityManager 本身不是线程安全的。使用获取EntityManagers可能很好，但是注册和其他方法需要直接持有entityManager，完成后应该关闭它。PM 还应该有一个清理方法，在关闭或取消部署时关闭其工厂。

# java - 从另一个类访问 ArrayList

> ID：13648099
> 
> 赞同：1
> 
> 时间：2012-11-30T15:25:24.107
> 
> 标签：java, android, mobile, arraylist

我无法从另一个类访问我的 ArrayList。我正在关注过去的示例和互联网示例，但似乎无法使其正常工作。

我发布了我的 3 个课程只是为了彻底。错误在我的 QuestionView.java 类中。我在我的代码中记录了错误消息的位置和内容。

感谢您对我的代码的任何其他部分提出的任何其他建议。:)

QuestionView.java

```
public class QuestionView extends Activity {

    Quiz q = new Quiz();
    ArrayList<Question> queries = new ArrayList<Question>();
    queries.getTenQs();  //error here:  "Syntax error on token "getTenQs", Identifier expected after this token"

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.questionviewmain);

    TextView question = (TextView)findViewById(R.id.question);

    Button answer1 = (Button)findViewById(R.id.answer1);
    Button answer2 = (Button)findViewById(R.id.answer2);
    Button answer3 = (Button)findViewById(R.id.answer3);
    Button answer4 = (Button)findViewById(R.id.answer4);

    for(int i = 0; i < 10; i++) {
        question.setText(queries.get(i).getQuery());
        answer1.setText(queries.get(i).getA1());
        answer2.setText(queries.get(i).getA2());
        answer3.setText(queries.get(i).getA3());
        answer4.setText(queries.get(i).getA4());

                    //more code...
    }
}
  } 
```

测验.java

```
 package com.example.test;

  import java.util.ArrayList;

  public class Quiz {
ArrayList<Question> qList = new ArrayList<Question>();
public static ArrayList<Question> tenQs = new ArrayList<Question>(10);

public Quiz() {
    qList.add(new Question("A", "B", "C", "D", 3, "Question 1?"));
    qList.add(new Question("A", "B", "C", "D", 3, "Question 2?"));
    qList.add(new Question("A", "B", "C", "D", 3, "Question 3?"));
    qList.add(new Question("A", "B", "C", "D", 3, "Question 4?"));
    qList.add(new Question("A", "B", "C", "D", 3, "Question 5?"));
    qList.add(new Question("A", "B", "C", "D", 3, "Question 6?"));
    qList.add(new Question("A", "B", "C", "D", 3, "Question 7?"));
    qList.add(new Question("A", "B", "C", "D", 3, "Question 8?"));
    qList.add(new Question("A", "B", "C", "D", 3, "Question 9?"));
    qList.add(new Question("A", "B", "C", "D", 3, "Question 10?"));
    qList.add(new Question("A", "B", "C", "D", 3, "Question 11?"));
    qList.add(new Question("A", "B", "C", "D", 3, "Question 12?"));
    qList.add(new Question("A", "B", "C", "D", 3, "Question 13?"));
    qList.add(new Question("A", "B", "C", "D", 3, "Question 14?"));
}

public void getRandom10() {
    for(int i = 0; i < 10; i++) {
        Question x = qList.get((int) Math.floor((qList.size()+1)*Math.random()));
        if(tenQs.contains(x) == true) {
            i--;
        } else {
            tenQs.add(x);
        }
    }
}

public ArrayList<Question> getTenQs() { 
    return tenQs;
}
  } 
```

问题.java

```
 package com.example.test;

  public class Question {
String a1;
String a2;
String a3;
String a4;
int correctAnswer;
String query;

public Question() {
}

public Question(String a1, String a2, String a3, String a4, int correctAnswer, String query) {
    this.a1 = a1;
    this.a2 = a2;
    this.a3 = a3;
    this.a4 = a4;
    this.correctAnswer = correctAnswer;
    this.query = query;        
}

public String getA1() { return a1; }
public String getA2() { return a2; }
public String getA3() { return a3; }
public String getA4() { return a4; }
public String getQuery() { return query; }
public int getCorrectAnswer() { return correctAnswer; }
  } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T15:27:37.137

您调用 getTenQs() 就好像它是 ArrayList 中的一个方法。我想你想要的是：

```
Quiz q = new Quiz();
ArrayList<Question> queries = q.getTenQs(); 
```

希望有帮助！

# javascript - 如何根据鼠标移动使 HTML 滚动？

> ID：13648100
> 
> 赞同：4
> 
> 时间：2012-11-30T15:25:28.127
> 
> 标签：javascript, jquery, html, css

我的图像比实际屏幕尺寸大得多。我想要一个以原始大小显示这些图像之一的网页，因此只显示实际图像的一部分。图像的可见区域应根据鼠标移动滚动。

[http://www.joeltinley.com/](http://www.joeltinley.com/)上的网页显示了我想要完成的任务。然而，这个人正在使用 Flash，而我想要一个基于 HTML、CSS 和 Javascript 的解决方案。

有一个通用的解决方案吗？也许是一些 jQuery 魔法？还有其他提示吗？

我一直在网上搜索，但到目前为止我还没有找到令人满意的解决方案。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-30T16:56:46.800

我一直对做这样的事情很感兴趣，所以这里只是为了好玩，原型，它可能不是那么完美，但它给出了整个想法，你以后可能会遇到麻烦。

HTML

```
<!DOCTYPE html>
<html>
<head>
<script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
<meta charset=utf-8 />
<title>JS Bin</title>
</head>
<body>
  <div class="imgHolder">
  </div>
</body>
</html> 
```

CSS

```
.imgHolder {
background: url(http://mickricereto.files.wordpress.com/2012/09/3_siematic-s3-graphite-grey_lotus-white.jpg) no-repeat 50% 50%;
position: absolute;
top: 0; bottom: 0; left: 0; right: 0;
} 
```

和一块 jQuery，尽管你可以在任何库甚至核心 JS 中执行它

```
(function(){
  var 
      div = $('.imgHolder'),
      divX = div.width(),
      divY = div.height(),
      backgroundX, backgroundY, backgroundPos;

  // hint
  //  mouse on the right background position for x img = 100%
  //  mouse on the left background position for x img = 0
  //  center background position for x img = 50%

  //  mouse on the top background position for y img = 0
  //  mouse on the bottom background position for y img = 100%
  //  center background position for y img = 50%

  // now if
  //  divX       = 100%
  //  ev.clientX = x%
  //  divY       = 100%
  //  ev.clientY = y%
  // is what we need

  $(div).mousemove(function(ev){

    backgroundX = 1/divX*ev.clientX*100;
    backgroundY = 1/divY*ev.clientY*100;
    backgroundPos = backgroundX + '%' + ' ' + backgroundY + '%';
    div.css('background-position', backgroundPos);

  });
})(); 
```

[jsbin](http://jsbin.com/jefusiyi/1)上的工作示例

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-30T15:31:22.577

有一些 jQuery 插件可以帮助实现类似的效果。但是您需要调整它们以满足您的需求..

[http://johnpolacek.github.com/scrolldeck.js/](http://johnpolacek.github.com/scrolldeck.js/)

[http://stephband.info/jparallax/index.html](http://stephband.info/jparallax/index.html)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-09-02T19:48:20.610

我见过很多 jQuery 插件可以做到这一点.. 自己编写代码不是一件简单的事情... 搜索 google jQuery slider sliders.. 你会发现一堆普通的滑块。在某个地方，您可以通过移动鼠标来探索图像。

# c# - 在列表的前面和末尾添加字符串

> ID：13648104
> 
> 赞同：2
> 
> 时间：2012-11-30T15:25:46.657
> 
> 标签：c#, .net

我有名单：

```
IEnumerable<Name> names;
names = n.GetNames(abc); 
```

它的列表如下：Ken，John，Sam，...我希望它显示如下：'Ken'，'John'，'Sam'，...

我试过这个： `string s = string.Join("',", names);`但它给出的结果如下：Ken'，John'，Sam'，......

有没有办法在单行代码中在这些名称前面添加“'”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T15:38:09.630

试试这个。

```
string s = string.Join(",", names.Select(s => string.Format("'{0}'", s)).ToArray()); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-30T15:38:43.280

我想你几乎在那里：

```
string s = "'" + string.Join("','", names) + "'"; 
```

# c# - 在 Excel 加载项安装程序中将 VBA 调用转换为 C#

> ID：13648106
> 
> 赞同：0
> 
> 时间：2012-11-30T15:25:49.247
> 
> 标签：c#, excel, vba, installation, add-in

我的 Excel 插件是用 C# 编写的，但安装程序通过 VBA 宏调用 Excel。我想摆脱VBA。

我想知道下面的 VBA 对注册表做了什么。据我所知，它在`HKCU\Software\Microsoft\Office\14.0\Excel\Options`. 是这样吗？

```
Dim MyXLL As AddIn
Set MyXLL = Application.AddIns.Add(addinFile)
If (Not MyXLL Is Nothing) Then
    MyXLL.Installed = True
Else
    MsgBox "Failed to add XLL"
End If 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T15:44:20.407

您应该尝试使用 c# 中的 excel interop，而不是直接修改注册表，这可能会导致噩梦（严重）。此外，您还必须处理不同版本的办公室等。

通过互操作添加插件：

[http://msdn.microsoft.com/en-us/library/microsoft.office.interop.excel.addins.add(v=office.11​​).aspx](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.excel.addins.add(v=office.11).aspx)

添加后安装插件：

[http://msdn.microsoft.com/en-us/library/microsoft.office.interop.excel.addin.installed(v=office.11​​).aspx](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.excel.addin.installed(v=office.11).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T10:47:27.757

使用 VBA 或自动化/互操作中的插件方法可能是最简单的方法，但很难处理在 PC 上安装多个版本的 Excel 的情况。
更全面的解决方案包括为您要安装的每个 Excel 版本编写 OPENn 密钥（其中 n 比当前最高 OPENn 密钥大 1）的安装脚本，并在卸载脚本中反转这些操作（您还需要重写其他 OPENn高于 XLL 的 OPENn 键的键）。[您可以在此处http://www.jkp-ads.com/articles/AddinsAndSetupFactory.asp](http://www.jkp-ads.com/articles/AddinsAndSetupFactory.asp)
找到使用 LUA for Setup Factory 的示例脚本

# ssis - SSIS 2008。仅当数据不重复时才将数据从一个表传输到另一个表

> ID：13648108
> 
> 赞同：1
> 
> 时间：2012-11-30T15:26:05.770
> 
> 标签：ssis

我将尽力解释这一点。我目前有一个数据流任务，它有一个 OLE DB 源将数据从不同数据库的表传输到另一个数据库的表。它工作正常，但我遇到的问题是我不断向目标表添加重复数据。

因此，在该表中多次看到日期“2012 年 11 月 30 日”的客户 ID 为“13029”，金额为“$ 56.82”。我该如何做到这一点，以便我只能将唯一数据传输到该目标表？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T15:38:09.807

在传输数据的数据流任务中，您可以插入查找转换。在查找中，您可以指定数据源（表或查询，最适合您的）。选择数据源后，您可以转到 Columns 视图并创建一个映射，在其中连接两个表的 CustomerID、Date 和 Amount。

在一般视图中，您可以配置匹配/不匹配行会发生什么。只需获取不匹配的输出并将其定向到 DB 目标。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T15:58:17.577

您将需要确定是什么使该数据在表中独一无二。如果是客户表，则可能是 13029 的 customerid。但是，如果是客户订单表，则可能是 CustomerId 和 OrderDate 的组合（也可能不是，我在同一日期下了两个不同的订单）。根据您的餐桌设计，您将知道答案。

有了这些知识，您将需要编写一个查询以从目标表中取回键`SELECT CO.CustomerId, CO.OrderId FROM dbo.CustomerOrder CO`如果您知道该过程仅传输当前年份的数据，请在上述查询中添加一个过滤器以限制返回的行数。这样做的原因是内存保护——您希望 SSIS 快速运行，不要带回它永远不需要的无关列或行。

在您的数据流中，使用该查询添加[查找转换](http://msdn.microsoft.com/en-us/library/ms141821.aspx)。您没有将 2005、2008 或 2012 指定为您的 SSIS 版本，它们具有与查找转换相关的不同行为。一般来说，您要做的是识别不匹配的行。根据定义， unmatched 意味着它们不存在于目标数据库中，因此这些是*新*的行。2005 假设每一行都将匹配或出错。您需要单击配置错误输出...按钮并选择“重定向行”。2008+ 在“指定如何处理没有匹配条目的行”下有一个选项，您需要“将行重定向到不匹配的输出”。

现在采用 No match 输出分支 (2008+) 或错误输出分支 (2005) 并将其插入您的目的地。

当源系统报告 56.82 美元而目标系统报告 22.38 美元（更新）时，这种方法不包括检测和处理。如果您需要处理这个问题，那么您需要查看一些更改检测系统。查看 Andy Leonard 的[Stairway to Integration Services](http://www.sqlservercentral.com/articles/Stairway+Series/76390/)系列文章，了解检测和处理更改的选项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T15:35:11.813

您是否考虑过使用 T-SQL MERGE 语句？[http://technet.microsoft.com/en-us/library/bb510625.aspx](http://technet.microsoft.com/en-us/library/bb510625.aspx)

它将在定义的字段上比较两个表，并在匹配与否时采取行动。

# c# - 使用 XmlWriter 添加属性

> ID：13648110
> 
> 赞同：0
> 
> 时间：2012-11-30T15:26:11.667
> 
> 标签：c#, xml, xmlwriter

我正在尝试使用 XmlWriter 将以下属性添加到节点，但似乎没有任何效果，有人有什么想法吗？

```
<news:news> 
```

我正在努力实现以下目标：

```
 <url>
    <loc>http://www.example.org/business/article55.html</loc>
    <news:news>
      <news:publication>
        <news:name>The Example Times</news:name>
        <news:language>en</news:language>
      </news:publication>
      <news:access>Subscription</news:access>
      <news:genres>PressRelease, Blog</news:genres>
      <news:publication_date>2008-12-23</news:publication_date>
      <news:title>Companies A, B in Merger Talks</news:title>
      <news:keywords>business, merger, acquisition, A, B</news:keywords>
      <news:stock_tickers>NASDAQ:A, NASDAQ:B</news:stock_tickers>
    </news:news>
  </url> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T15:36:37.367

查看以下链接，了解如何使用 XmlWriter 处理命名空间

[XmlWriter 中的命名空间处理](http://msdn.microsoft.com/en-us/library/cfche0ka.aspx)

您可以使用 WriteAttributeString 方法手动写出命名空间声明，然后使用[WriteStartElement(String, String)](http://msdn.microsoft.com/en-us/library/7579ed08.aspx)重载将未来元素与该命名空间相关联，如下所示

```
writer.WriteStartElement("root");
writer.WriteAttributeString("xmlns", "x", null, "urn:1");
writer.WriteStartElement("item", "urn:1");
writer.WriteEndElement();
writer.WriteStartElement("item", "urn:1");
writer.WriteEndElement();
writer.WriteEndElement(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T15:42:50.630

```
 using System;
    using System.Xml;

    class Program
    {
        static void Main(string[] args)
        {
            XmlWriter writer = new XmlTextWriter(Console.Out);
            writer.WriteStartElement("root");
            writer.WriteAttributeString("news", "http://www.stackoverflow.com");
            writer.WriteStartElement("news:news");
            writer.WriteStartElement("news:publication");
            writer.WriteElementString("news:name", "The Example Times");
            writer.WriteElementString("news:language", "en");
            // etc
            writer.WriteEndElement();
            writer.WriteEndElement();
            writer.WriteEndElement();
            Console.ReadKey(true);
        }
    } 
```

# python - Django 强制查询设置返回 30 个项目（即使需要重复）

> ID：13648115
> 
> 赞同：0
> 
> 时间：2012-11-30T15:26:43.210
> 
> 标签：python, django

即使该模型的数据库中少于 30 个，我也想使用 Django ORM 返回 30 个项目。有没有办法强制它返回这么多项目，即使这意味着返回重复项？

```
projects = Project.objects.filter(approved=True).order_by('?')[0:30] 
```

这可能吗？上面的代码返回 4 个项目，因为这就是我的数据库中有多少。

更好的方法是操纵项目变量使其包含 30 个项目吗？我希望项目随机化。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-30T15:31:21.687

如果结果集是 30 个或更多对象，你很好，解决它的一种方法是`itertools.cycle`用于你没有足够的地方......（这将再次从头开始重复数据）......并限制它使用`itertools.islice`.

```
from itertools import islice, cycle
always_30_results = islice(cycle(result_set), 30))
for result in always_30_results:
    print result # or whatever 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T15:30:33.167

不，你不能。你必须连接你的结果，直到你到达 N 个对象，其中 N 是你需要的数字。

# php - php 5.3.8 中的 filter_var

> ID：13648117
> 
> 赞同：3
> 
> 时间：2012-11-30T15:26:47.410
> 
> 标签：php

我正在开发一个用户注册表单并想要验证用户的电子邮件地址。但是，我读过的所有 php 文档都建议使用 filter_var。我的脚本将有效的电子邮件验证为无效。请发布一个工作脚本，或者指导我完成我的脚本。她的是我的剧本：

```
 <?php
      if(isset($_POST['email'])== true && empty($_POST['email'])false)
      {
       $email = $_POST['email'];
      }
      if(filter_var($email,FILTER_VALIDATE_EMAIL)) 
      {
       echo"valid email";
      }
      else
      {
      echo"invalid email";
      }
     ?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T15:28:40.803

```
if(isset($_POST['email'])== true && empty($_POST['email'])false) 
```

这应该是

```
if(isset($_POST['email']) && !empty($_POST['email']) ) 
```

或者作为[@jack](https://stackoverflow.com/users/1338292/jack)，您可以只使用

```
if (!empty($_POST['email'])) 
```

确实`empty()`隐含`isset()`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T15:31:55.453

```
$email = isset($_POST['email']) ? $_POST['email'] : "";
echo(filter_var($email,FILTER_VALIDATE_EMAIL) ? "valid email" : "invalid email"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T15:35:30.487

```
 if(isset($_POST['email'])== true && empty($_POST['email'])false)
                           ^^^^^^^--redundant               ^^^^^---typo? 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-01T00:28:33.627

在您的情况下，您不应该使用`filter_var`, 但是[`filter_input`](http://www.php.net/filter_input). 这是您需要的所有代码：

```
if ($email = filter_input(INPUT_POST, 'email', FILTER_VALIDATE_EMAIL)) {
    // email was submitted and is a valid email
} 
```

不过，此[错误](https://bugs.php.net/bug.php?id=55478)可能与您的问题有关。

# asp-classic - ADODB.Field 错误“800a0bcd”

> ID：13648119
> 
> 赞同：6
> 
> 时间：2012-11-30T15:26:54.927
> 
> 标签：asp-classic

我的 .asp 文件出现错误，我不知道如何解决这个问题（我不知道 ASP，这是我客户的旧项目，其他开发人员这样做了）。我得到的错误如下：

```
 ADODB.Field error '800a0bcd'

    Either BOF or EOF is True, or the current record has been deleted. Requested operation requires a current record.

    /br/grava_cadastro.asp, line 105 
```

和行：

```
 100 %>
 101   <!--#include file="abrir_arquivo.asp"-->  
 102 <%
 103 xip= Request.ServerVariables("REMOTE_ADDR")
 104 RS.Open "SELECT * from  visitas where vi_data = date() and vi_ip='" &  xip & "'",cn,3,3
 105 xlink=rs("vi_link")
 106 rs.close 
```

它阻止了我的注册表单。有人知道如何解决这个问题吗？提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T17:14:22.203

你确定你有记录吗？

在`line 105`你假设这是一个记录，如果不是呢？

你为什么不添加这样的东西：

```
 if rs.eof = false then
       xlink=rs("vi_link")
   end if 
```

还，

在 sql 行中你有这个：

```
RS.Open "SELECT * from  visitas where vi_data = date() and vi_ip='" &  xip & "'",cn,3,3 
```

但我不确定是否`date()`应该这样，它应该有`'"& date() &"' or "& date() &"`（不记得日期是字符串还是数字）

它应该是这样的：

```
RS.Open "SELECT * from  visitas where vi_data = '" & date() & "' and vi_ip='" &  xip & "'",cn,3,3 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-06-07T18:43:49.680

我们在旧版 Classic ASP 应用程序上收到此错误。事实证明，他们从另一个系统复制到提交表单的值是在输入字段中添加不可见字符。

# markdown - doxygen 降价页面中的标题标签使标题标题消失

> ID：13648124
> 
> 赞同：20
> 
> 时间：2012-11-30T15:27:09.360
> 
> 标签：markdown, doxygen

我注意到 doxygen 1.8.2 有一个奇怪的问题。包含标题标签会导致标题标题从输出 html 中消失。

使用以下降价文件：

```
Title            {#title}
=====

Section 1        {#section1}
---------
Text for section 1 
```

我得到的输出为：

> **标题**
> 
> 第 1 节的文本

但是，如果我`{#section1}`从降价文件中删除标签，我会得到正确的输出：

> **标题**
> 
> **第 1 节**
> 
> 第 1 节的文本

我在这里犯了什么错误？

**编辑**当我标记一个部分时，我观察到以下警告：

```
 warning: found subsection command outside of section context! 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-12-19T13:36:34.180

经过一番调查，我认为这*似乎*是一个错误，但这只是因为它有点违反直觉。

考虑以下：

```
The Main Section {#the_main_section}
================

Subsection One {#first}
--------------

Something highly interesting... 
```

该文档以 1 级标题开始（如此[处](http://www.doxygen.nl/manual/markdown.html#md_page_header)所述），因此 Doxygen 将“主要部分”解析为页面的名称和标题。`{#the_main_section}`将标题转换为页面名称后，标题和标签似乎将被忽略。

然后处理继续到文档的其余部分，当它到达“Subsection One”时，它认为“subsection”没有父“Section”（因为“Section”已转换为页面名称）并且这是它窒息的地方。

更具体地说，它丢弃子节（标题），因为它认为没有父“节”。所有其他文本仍然存在，但被视为“页面”的一部分（没有部分父级）。

“修复”是在初始“1 级标题”之后添加另一个“1 级标题”，例如

```
My Great Documentation (Which Becomes the Page Name)
====================================================

The First Section
=================

Q. What? I already created a level 1 heading?
A. Yup, but that was converted to a page name/title and discarded, so now
   we have to create another level 1 heading for my first section. Don't
   be fooled into thinking that the opening heading in this document is
   still treated as an opening heading by Doxygen - it's not! 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-02T10:48:55.953

版本 1.8.9.1 中的相同问题。您可以通过使用 # 标签而不是 --- 来避免它。

例如：

```
[TOC]

Page Title {#pageTitle}
==========
Lorem ipsum dolor sit amet

# section 1 {#section1}
Lorem ipsum dolor sit amet

## Section 1.1 {#section1-1}
Lorem ipsum dolor sit amet

# section 2 {#section2}
Lorem ipsum dolor sit amet

# section 3 {#section3}
Lorem ipsum dolor sit amet

## section 3.1 {#section3-1}
Lorem ipsum dolor sit amet

# section 4 {#section4}
Lorem ipsum dolor sit amet 
```

将工作。您甚至可以将 [TOC] 标记放在页面标题定义下方，以将其从目录中删除。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-12T22:18:27.030

我正在使用 Doxygen 1.8.14，我遇到了同样的问题。我想分享一下我是如何解决的。

正如[http://svenax.net/site/2013/07/creating-user-documentation-with-doxygen/](http://svenax.net/site/2013/07/creating-user-documentation-with-doxygen/)中所建议的， 我设置了 USE_MDFILE_AS_MAINPAGE = mainpage.md，并确保标记所有部分和小节。

正如 Lester Burnham 所提到的，该文档需要两个 1 级标题。但是，要使其第一个使用“=========”样式，第二个使用“#”样式。像这样：

```
My main page    {#mainpage}
============

# Introduction  {#intro}
Text.....

## A sub section    {#subsection1}
Text... and a reference to the [Introduction](#intro). 
```

有了这个，我的 Doxygen 主页运行良好。出现所有标题并且参考工作。希望能帮助到你！=)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-06-10T19:27:05.800

我在 Doxygen 中无法控制 Markdown 页面的标题；我最终使用了实际的 Doxygen @page 命令：

@page pageLabel 这是我的页面标题

这允许我使用@ref pageLabel 引用该页面，并且在我的页面部分中它显示为“这是我的页面的标题”。

这对我来说特别有用，因为我希望我的标题有空格，而 Doxygen 无法使用文件名作为标题。

# php - Textarea 输入 / MySQL 插入 / 格式化显示

> ID：13648128
> 
> 赞同：0
> 
> 时间：2012-11-30T15:27:17.033
> 
> 标签：php, html, mysql, format, textarea

我有一个不知道如何解决的问题。本质上，我的表单上有一个文本区域，允许用户以这种格式输入数据：

```
Windows XP Home and Professional<br />(32 and 64 bit)

Windows 7 Home and Professional<br />(32 and 64 bit) 
```

我可以将它插入我的数据库并在 PHP 中使用 nl2br 毫无问题地检索/显示它。但是，我需要使用一些 HTML 来格式化输出。我基本上需要输出在 HTML 中看起来像这样：

```
<p class="smallText">Windows XP Home and Professional<br />(32 and 64 bit)</p>
<p class="smallText">Windows 7 Home and Professional<br />(32 and 64 bit)</p> 
```

本质上，当只有一次退货时，我需要 nl2br 为我处理的 br 标签。但是在有双重返回的地方，我需要将 br 转换为开始和结束 p。

我真诚地感谢有人能提供的任何见解！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T15:32:50.950

假设文本输入正确，并且您用作段落指示符的两个换行符之间没有多余的空格/空格：

```
$txt = "Windows blah blah blah \n\n blah blah 64 bit)";
$nlbr = nl2br($txt);
$fixed = str_replace("<br /><br />", "</p><p>", $nlbr);
echo "<p>$fixed</p>"; 
```

# css - 使用 CSS 再现图像形状

> ID：13648131
> 
> 赞同：4
> 
> 时间：2012-11-30T15:27:22.450
> 
> 标签：css, css-shapes

我正在尝试仅使用 css 重现此图像

![在此处输入图像描述](../Images/edf382d72872146dcc7ab54b758bf346.png)

我玩过半径属性，但你会看到我没有得到相同的角度效果。

```
.shape{
background-color: black;
opacity:0.9;
filter:alpha(opacity=90); /* For IE8 and earlier */    
    color:white;
    font-weight:bold;
    padding: 30px 30px 30px 50px;
    text-align:center;
    position:absolute;
    right:0;
    bottom:0;
    z-index:1003;
    font-size: 20px;    
    border-top-left-radius: 125px;
    -moz-border-radius-topright: 125px;
}
​ 
```

[您可以在http://jsfiddle.net/ymorin007/7qX4U/](http://jsfiddle.net/ymorin007/7qX4U/)看到我尝试过的内容

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T16:25:55.320

可能不兼容跨浏览器，但这会让你接近:)

```
.shape{
    background-color: black;
    opacity:0.9;
    filter:alpha(opacity=90); /* For IE8 and earlier */    
    color:white;
    font-weight:bold;
    padding: 30px 30px 30px 50px;
    text-align:center;
    position:absolute;
    right:0;
    bottom:0;
    z-index:1003;
    font-size: 20px;    
    border-top-left-radius: 125px;
    -moz-border-radius-topright: 125px;
}

.shape::before{
   content:"";
   width:0;
   height:0;
   position:absolute;
   left:-34px;
   border-left: 53px solid transparent;
   border-right: 53px solid transparent;    
   border-bottom: 53px solid black;
}
​ 
```

小提琴：http: [//jsfiddle.net/pggRb/](http://jsfiddle.net/pggRb/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-22T11:55:19.467

如果您需要命中测试，您可能需要考虑使用倾斜的伪元素：

```
div {
  position: fixed;
  bottom: 0;
  right: 0;
  height: 50px;
  width: 200px;
  background: gray;
  cursor: pointer;
  transition: all 0.6s;
}
div:before {
  content: "";
  position: absolute;
  top: 0;
  left: -50%;
  width: 100%;
  height: 100%;
  background: inherit;
  transform: skewX(-45deg);
  border-radius: 20px 0 0 0;
  z-index: -1;
}
div:hover {
  background: tomato;
  ]
```

```
<div>SOME TEXT</div>
```

# python - 搜索两个整数 root**pwr = integer(user's input)

> ID：13648132
> 
> 赞同：3
> 
> 时间：2012-11-30T15:27:25.717
> 
> 标签：python

我找到的一本书中的一个问题。

> 编写一个程序，要求用户输入一个整数并打印两个整数，root 和 pwr，使得 0 < pwr < 6 并且 root**pwr 等于用户输入的整数。如果不存在这样的对，则打印不可能找到这样的对。

```
integer = 3 #there will be raw_input but I use it as an example
root = 0

for pwr in range(1,6):

    if root**pwr != integer:
        pwr += 1
        print pwr

    else:
        print root, pwr

    if pwr > 5:     
        pwr = 1
        root += 1 
```

我还没有完成程序，因为我无法正确循环。问题是我收到输出 2、3、4、5、6，然后循环终止。但是，我确实在您看到的最后一个 if 语句代码块中对 pwr 变量使用了 restart 。但是，它无论如何都会停止执行。这里有什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-02-01T15:41:31.987

正如其他人所指出的，这是John Guttag 的《*使用 Python 进行计算和编程导论*》第 3.1 节（详尽枚举）的手指练习，这是大规模开放在线课程[MITx：6.00.1x 计算机科学导论和使用 Python 编程](https://www.edx.org/course/introduction-computer-science-mitx-6-00-1x)。教科书和课程使用**Python 2.7**。

我还没有足够高的声誉来评论其他答案，所以请允许我在我的答案前言，在我发布此内容时，据我所知，**以前发布的所有答案都是不正确或不完整**的. 其他答案中的一个常见错误是他们没有考虑所有整数。一个正确的程序应该解决所有整数的问题，包括正整数和负整数以及零（[零也是整数](https://en.wikipedia.org/wiki/Integer)）。

在 Guttag 书中的这个练习之前，我们已经介绍了`while`循环，但没有介绍`for`循环和`range`函数，这两者都将在下一节中介绍。这是我的答案，仅使用本练习之前书中介绍的概念：

```
num = int(raw_input("Enter an integer: "))
pwr = 1
root = 0
found = False
if num < 0:
    neg = True
else:
    neg = False
while pwr < 6:
    while abs(root**pwr) <= abs(num):
        if root**pwr == num:
            print(str(root) + "**" + str(pwr) + " = " + str(num))
            found = True
        if abs(root) > abs(num):
            root = 0
        elif neg:
            root -= 1
        else:
            root +=1
    pwr += 1
    root = 0
if not found:
    print("No pair of integers, 'root' and 'pwr', exists such that 0 < pwr < 6 and root**pwr = " + str(num)) 
```

我已经用整数 0、1、-1、2、-2、8、-8 和其他一些整数测试了这段代码，它似乎可以工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T16:05:57.067

另一种选择，使用“简单数学”。

```
integer = 3

for power in range(1,6):
    a = (integer ** (1.0/power))
    if math.ceil(a) == a:
        print a, power

>> 3.0 1 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-30T16:10:30.040

一般来说，修改循环内循环的内容不是一个好主意。`pwr`当您使用它来迭代时，没有理由摆弄`range(1,6)`.

您的代码试图做的是测试`root ** pwr == integer`的连续值`pwr`和固定值，`root`直到`pwr`达到 6。然后您希望它添加一个`root`并重复。这最自然地表述为两个嵌套的 for 循环：

```
for root in range(0,integer):
    for pwr in range(1,6):
        if root ** pwr == integer:
            print root, pwr 
```

无论如何，这是一种相当昂贵的方法，因此我建议您在此处查看其他一些解决方案。但是，您应该记住这一点，因为它是如何使用 for 循环的一个很好的例子。

要回答关于循环为何终止的问题，您必须考虑 python 如何处理迭代器。当 for 循环内的代码块终止时，python 将设置`pwr`为 iterators 方法返回的值`next()`（它完全按照您的想法执行）。当迭代器中没有更多值时，`next()`将引发`StopIteration`异常，Python 将退出循环。关键是 Python 不会`pwr`通过每次迭代加 1 来修改 的值，它会覆盖该值。所以你循环将运行 5 次，因为那是有多少项目`range(1,6)`

为了澄清，请运行以下代码：

```
for i in range(0,9):
    print i
    i += 5
    print i 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-30T15:34:50.970

`integer ** 1`总是满足条件。

另一种选择（假设你真的想要`1 < pwr < 6`）：

检查是否有某个基数`a`和一个数字`n`：`ceil(a ** log_a(n)) == n`。如果是这样 - 那么`a ** log_a(n)`这就是你的答案。 对范围内所有可能的 '
重复此操作。`a`

（这里`log_a(n)`是以 a 为底的对数，可以计算为`log(n)/log(a)`）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-12-15T15:15:37.203

正如其他人所提到的，这是John Guttag的*Introduction to Computation and Programm Using Python中的**手指练习。*

 *虽然上述一些响应可能有效（老实说，我没有测试过），但更简单的方法将产生所需的结果并适应负整数，例如：

```
x = int(input("Enter an integer: "))
root = 0

while root < abs(x):
    root += 1
    for pwr in range(1,6):
        if root ** pwr == abs(x):
            if x < 0:
                print(-root, "to the power of", pwr, "=", x)
            else:
                print(root, "to the power of", pwr, "=", x) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-01-13T03:54:23.237

我有一个逻辑错误，在试图弄清楚它可能是什么时，我浪费了很多时间，我认为这可能是一个常见的错误。我忘了重置`pwr`外循环中的值。

这是当前版本：

```
root=0
pwr=1
check=0
integer=int(input('Enter the number:'))
while(root**pwr<abs(integer)):
    while(pwr<6):
        if root**pwr==abs(integer):
            check=1
            print('Root =',root,'or -'+ str(root),'and Power =',pwr)
        pwr+=1
    root+=1
    pwr=1    #<--------------Resetting pwr to 1 inside the outer loop
if check!=1:
    print('No such combination exists') 
```

我希望这有助于节省一些时间。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-08-09T20:25:10.433

这就是我想出的。正如在上一篇文章中提到的，pwr 的范围应该是 2-6，因为整数到 pwr 1 的答案总是存在的，并且练习表明存在不存在这样对的整数。

```
x = int(input('Enter an integer: '))
root = 0
pwr = 2
while pwr > 1 and pwr < 7:
    while root**pwr < x:
        root = root + 1
    if root**pwr == x:
        print(str(root) + '**' + str(pwr), '==', str(x))
        break
    else:
        root = 1
        pwr = pwr + 1
else:
    print('no such pair exists') 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-02-26T07:16:59.377

# 打印递减函数的长版本答案 - 仅用于小数字

```
x = int(input('Enter an integer:'))

pwr = [1,2,3,4,5]
mypairs = []

for p in pwr:
    root = 0 
    while root**p < abs(x):
        print('Value of decrementing function abs(x) - root**p is',\
              abs(x)-root**p)
        root = root + 1
    if root**p == abs(x) and p%2 !=0:
        print('For the power %s there exists such a pair, shown in final list.'%p)

    if root**p != abs(x):
        print('For the power %s there does not exist any such pairs.'%p)
    else:
        if x < 0:
            if p%2 == 0 :
                print('For the power %s there does not exist any such pairs'%p)
            else:
                root = -root            
                mypairs.append([root,p])
        else:
            mypairs.append([root,p])
print(mypairs) 
```

# 无需递减函数即可快速回答

```
x = int(input('Enter an integer:'))

pwr = [1,2,3,4,5]
mypairs = []

for p in pwr:
    root = 0 
    while root**p < abs(x):
        root = root + 1
    if root**p != abs(x):
        print('For the power %s there does not exist any such pairs.'%p)
    else:
        if x < 0:
            if p%2 == 0 :
                print('For the power %s there does not exist any such pairs'%p)
            else:
                root = -root            
                mypairs.append([root,p])
        else:
            mypairs.append([root,p])
print(mypairs) 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-03-14T00:41:52.023

这是 John Guttag 的“使用 Python 进行计算和编程简介”第 3 章的手指练习，内容如下：

*编写一个程序，要求用户输入一个整数并打印两个整数，root 和 pwr，使得 0 < pwr < 6 并且 root**pwr 等于用户输入的整数。如果不存在这样的对，它应该打印一条消息。*

鉴于作者指出可能不存在对，我假设 pwr 的条件应该是 1 < pwr < 6 否则总会有一个解决方案（整数**1）。我的回答是，仅使用书中已经介绍过的概念：

```
num = int(raw_input('Enter a positive integer: '))
pwr = 2
root = 1
ans = ''
while pwr < 6:
    while root**pwr <= num:
        if root**pwr == num:       
            print 'the root is ',root,
            print 'the power is ', pwr
            ans = True
        root += 1        
    pwr += 1
    root = 1
if ans != True:
    print'No such pair of integers exist' 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-07-17T22:40:28.957

首先，如果我们输入一个整数，例如 1024，那么我们就有 1024^1 = 1024。所以这个问题总会有解决方案：

```
n = int(input('Enter an integer: '))
pwr = 1
root = 1
found = False

while root <= n:
    if root**pwr == n:
        print('root =',root, 'pwr =', pwr)
        found = True
    pwr = pwr + 1
    if pwr == 6:
        pwr = 1
        root = root + 1

if not found:
    print('No such pair exist.') 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-10-17T13:04:13.120

这是基于archery1234提交的答案。感谢archery1234 a，我对这个很陌生，没有帮助我无法开始。我喜欢所提供的答案，因为它只使用了书中到目前为止解释的概念，所以我觉得它接近 Guttag 博士可能希望我们学习的内容（while 循环中的 while 循环）。下面的代码满足 0 < pwr < 6 的条件，而不总是仅仅终止于作为根输入的整数和 pwr = 1。

```
integer = abs(int(raw_input("Enter an integer: ")))
pwr = 1
root = 2
ans = ' '
if abs(integer) == 1:
    print "No such pair of integers exists"
else:
    while root < abs(integer):
        while root**pwr <= integer:
            if root**pwr == integer:
                print "The root is ",root,";"
                print "The power is ",pwr,"."
                ans = True
            pwr += 1
        root += 1
        pwr = 1
    if ans != True:
        print "No such pair of integers exist" 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-01-18T19:30:14.013

我正在解决这个问题，我的答案有效：

```
number = int(raw_input("Enter a number: "))
    i = 1

    pwr = 1
    test = 0
    while i <= number/2:
        while pwr < 6:
            if i ** pwr == number:
                print i
                test = 1
            pwr = pwr + 1
        i = i + 1
        pwr = 1
    if test == 0:
        print 'No such pair of integers exist.' 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2016-01-16T16:49:35.557

这是我的回答：

```
usr = int(raw_input("Enter an integer > "))
paired = False
for pwr in range(1,6):
    root = 0
    while (usr - root**pwr > 0):
        root += 1
    if usr == root**pwr:
        paired = True
        print "root is " + str(root) + " and ",
        print "power is " + str(pwr)
        break
if paired == False:
    print "No pair" 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2016-01-31T07:11:20.637

我已经设法用你在 Gattug 的书中从第 1 章到第 3.1 章获得的知识解决了这个问题。这个手指练习花了我两个星期才完成。我也刚开始编码。

这是我的解决方案：

```
num = int(raw_input('Enter an integer: ')) 
root = num 
power = 1 

if root**power == abs(num):
   print ' First pair of integers which equal the integer:', num, 'is root = ', root, 'power = ', power
   root -= 1
while root**power != abs(num) and root > 0:
while power < 6 and root**power != abs(num):
      if not(root**power == abs(num)):
         power +=1
      if not(root**power == abs(num)):
         power +=1 
if power >= 6 and root**power != abs(num):
    power = 1
    root -= 1
if root**power == abs(num):
print 'Second pair of integers which equal the integer:', num, 'is root = ', root, 'power = ', power
elif root**power != abs(num) and root == 0:
print ' there is no other pair of integers that equal', num 
```

我已经做到了，这是教你编码的最好的书

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2016-04-18T19:00:01.597

试图在不重新定义手指练习规范的情况下做到这一点，只使用本书迄今为止介绍的内容——这适用于正整数和负整数，据我所知，它将列出所有可能的对，包括 root=number , pwr=1。其中一个关键似乎是在正确的位置使用 abs，如果用户整数为负数，请确保将 root 设置为负数。希望这有助于像所有其他深思熟虑的贡献一样帮助我的人。

```
num = int(raw_input('Enter an integer: '))
pwr = 1
root = 1
ans = ''
while pwr < 6:
    while root**pwr <= abs(num):
        if root**pwr == abs(num):
            if num<0:
                root=-root
        print 'the root is ',root, 'the power is ', pwr
        ans = True
        root= abs(root)+1
    pwr += 1
    root = 1
if ans != True:
    print'No such pair of integers exist' 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2016-06-15T14:26:38.200

我正在自学python，我的解决方案如下。

```
num = int(input('Please enter integer: '))
list= []
list1=[]
for root in range (0,num):
    for pwr in range (1,6):
        if root**pwr == num:
            list.append([root,pwr])
        else:
            list1.append(0)
if list ==[]:
    print ('No root exist')
else:
    print (list) 
```

我创建了列表以保存其中的所有根和 pwrs。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2018-01-13T18:50:49.487

我喜欢布拉格的解决方案，但我认为它有所改进。如果找到解决方案，例如在布拉格的解决方案中以最低值结束，我会停止它， 16 将返回 2^3 和 4^2 ，这是真正的答案。我自己已经放入了非零部分并使用 for 解决了它，但我意识到，正如 Pragu 雄辩地指​​出的那样，我们还没有在书中到达那里。这就是我所做的。

```
# -*- coding: utf-8 -*-
"""
Created on Sat Jan 13 12:03:09 2018

@author: chief
"""

import random #this imports the random function
mysteryNumber = int(input('Please enter a non-zero positive integer: ')) #give me input Seymour!
if mysteryNumber <= 0: #did they give me a non-zero positive integer?
    print("that wasn't a non-zero positive integer doofenshmirtz!! I'll fix that for you") #Carl would understand
    if mysteryNumber < 0: #make it a positive integer
        mysteryNumber = -mysteryNumber
    if mysteryNumber == 0: #make it a non zero integer by generating random number
        mysteryNumber = random.randint(1,100)
print ('Your number is', mysteryNumber)
root=0 #set the variables or clear the pallet if you will
pwr=1
check=0

while(root**pwr<abs(mysteryNumber)): #first while loop 
    while(pwr<6) and check == 0: # this and logical stops it at the earliest answer otherwise 16 will give you two answers as will 81
        if root**pwr == abs(mysteryNumber): #if then loop checks did you find the answer, if yes then next 2 lines are active, if no then to the else line
            check=1
            print('The root =',root,'or -'+ str(root),'and Power =',pwr, 'will yield', mysteryNumber)
        pwr+=1 #else line, adds 1 to the pwr and moves back to the while statement of while<6
    root+=1 #While pwr <6 is done so we go onto the next root
    pwr=1    #<--------------Resetting pwr to 1 inside the outer loop
if check!=1: #the first while is done now, if we found an answer this argument returns false and the line below doesn't get executed
    print('No rational combination of root and power exists for', mysteryNumber) 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2018-02-26T15:54:49.787

```
number = int(raw_input("Enter a number: "))
pwr = 1
root = 2

while root < number:
    pwr = 1
    while pwr < 6:
        if root*pwr == number:
            print'Numbers are', (root, pwr)
        pwr += 1
    root += 1
    print('No such numbers') 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2018-08-02T18:35:52.193

我认为这个问题已经得到解答，但希望这可以扩展当前的工作状态。任何反馈表示赞赏！

我目前正在 MIT OpenCourseWare 上解决这个问题。我想提出一个解决方案，可以打印给定整数的所有可能的 root/pwr 组合，同时将详尽的猜测限制为最小数量。这是我的回答：

```
intNum = int(input("Please enter an integer: "));
neg = False;

if intNum < 0:
    neg = True;

root = 0;
pwr = 2;

print("The integer is: ", intNum);
# Will always have at least one root/pwr such that intNum=root and pwr = 1
print ("rootFOUND: ", intNum, " pwrFOUND : ", 1);

while 0 < pwr < 6:
    while root**pwr <= abs(intNum):
#        print ("root: ", root, " pwr: ", pwr);
        if root**pwr == abs(intNum):
            if neg and pwr%2 != 0:
                print ("rootFOUND: ", -root, " pwrFOUND : ", pwr);
            elif not neg:
                print ("rootFOUND: ", root, " pwrFOUND : ", pwr);
        root += 1;
    pwr += 1;
    root = 0; 
```

我想考虑的边界是：

1.  如果整数是正数
2.  如果整数是负数
3.  如果整数为零

思考过程：

1.  通过将初始根值设置为零并在 root**pwr 小于输入的整数时递增来实现正整数。

2.  First 完成了一个负整数，总是检查整数是否为负数。其次，随着 root 的增加，root**pwr 会根据整数的绝对值进行检查。最后必须考虑的事实是，负整数只有在指数为奇数时才能通过指数语句找到。这是通过检查整数是否为负数和指数是否为奇数来完成的。

3.  通过将初始根设置为零并在退出内部 while 循环时始终将根重置为零来完成零整数检查。

以下是一些输出：

```
Please enter an integer: -4096
The integer is:  -4096
rootFOUND:  -4096  pwrFOUND :  1
rootFOUND:  -16  pwrFOUND :  3 
```

* * *

```
Please enter an integer: 4096
The integer is:  4096
rootFOUND:  4096  pwrFOUND :  1
rootFOUND:  64  pwrFOUND :  2
rootFOUND:  16  pwrFOUND :  3
rootFOUND:  8  pwrFOUND :  4 
```

* * *

```
Please enter an integer: 0
The integer is:  0
rootFOUND:  0  pwrFOUND :  1
rootFOUND:  0  pwrFOUND :  2
rootFOUND:  0  pwrFOUND :  3
rootFOUND:  0  pwrFOUND :  4
rootFOUND:  0  pwrFOUND :  5 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2019-02-18T08:48:49.073

我相信这可能是一个更优雅的解决方案，因为它以最少的初始化提供了所有可能的根，并且根据 Guttag 文本*仅使用* **while 循环。**请试一试。我相信它适用于所有用例。

我使用根等于整数来打破循环，以便我可以在每次迭代时重置功率。这可以防止 while 循环的任何过载。（根==整数与幂等于1的情况相同）

```
integer = int(input("Enter an integer please: "))
root = 0
pwr = 0
while root**pwr < abs(integer):
    root = root + 1
    while pwr < 6:
        pwr = pwr + 1
        if root**pwr == integer:
            print("Root:", root, ", Power:", pwr)
    if root == integer:
        break
    pwr = 0 
```

**整数 = 343 的输出：**

根：7，功率：3

根：343，功率：1

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2019-04-10T17:48:50.590

这就是我使用两个while循环所拥有的

```
x = int(input('Enter an integer'))
root = 0
pwr = 0

while(root**pwr < abs(x)):

    while(root**pwr < abs(x) and pwr < 6):
        pwr += 1
        #print('root',root, ' power', pwr, 'result', root**pwr)
        if(root**pwr == abs(x)):
            if(x<=0):
                print('root', -root, 'power', pwr)
            else:
                print('root', root, 'power', pwr)
            break

    if(root**pwr == abs(x)):
        break
    else:
        root+=1
        pwr = 0

if(root**pwr!=x):
    print('no result found') 
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2019-10-19T22:32:25.483

```
#instead of asking for input, i input random so you could test faster 
#and greater range of integers

input = randint(-10000,10000)
root = 0
power = 1

while root <= abs(input):
  if root**power == abs(input):
      break
  # if power is within bounds, increment, else reset it to 1 and increment 
  # root to loop through
  if power < 6:
      power = power + 1
  else:
      power = 1
      root = root + 1

if root**power != abs(input):
    print("There are no perfect integers")
else:
    if input < 0:
        root = -root
    print("Root:",root,"; Power:",power) 
```

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2020-06-07T10:23:00.990

**这是使用Python 3.7.6**的最新答案（2020 年 6 月） ，用于**John Guttag 的《使用 Python 进行计算和编程简介**》的第二版。

正如巨无霸所写

> 正如其他人所指出的，这是 John Guttag 的《使用 Python 进行计算和编程导论》第 3.1 节（详尽枚举）的手指练习，这是大规模开放在线课程 MITx：6.00.1x 计算机科学导论和使用 Python 编程。教科书和课程使用 Python 2.7。...其他答案中的一个常见错误是他们没有考虑所有整数。一个正确的程序应该解决所有整数的问题，包括正整数和负整数以及零（零也是整数）。
> 
> **在 Guttag 书中的这个练习之前，我们已经介绍了 while 循环，但没有介绍 for 循环和 range 函数**，这两者都将在下一节中介绍。

手指练习：编写一个程序，要求用户输入一个整数并打印两个整数，root 和 pwr，使得 0 < pwr < 6 并且 root**pwr 等于用户输入的整数。如果不存在这样的整数对，它应该打印一条消息。

```
x = int(input('Enter an integer to analyze '))
root = 0
pwr = 1
while pwr < 6:   
    while root**pwr < abs(x):
        root += 1     
    if abs(root**pwr) != abs(x):
        print('no root at the power', pwr, 'for', x)
    else:
        if x < 0:
            root = -root
            if pwr%2 != 0:
                print (root, "**", pwr, '=', x)
            else:
                print('no root at the power', pwr, 'for', x)                
        else:
            print (root, "**", pwr, '=', x)         
    root = 0    
    pwr += 1 
```

这个解决方案对所有整数都有效，使用**Python 3**，稍微短一些（相对于迄今为止在参考书**第二版中获得的知识），并且通过打印****每个幂**的答案稍微更完整（据我所知）即使***不存在这样的对***。

它将返回类似的结果

```
Enter an integer to analyze -8
-8 ** 1 = -8
no root at the power 2 for -8
-2 ** 3 = -8
no root at the power 4 for -8
no root at the power 5 for -8 
```

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2020-08-14T18:25:40.053

```
x = int(input("Enter an Integer :"))
root = 1
pwr = 0

while root**pwr != abs(x) and x != 0 :
    if pwr == 6 :
        pwr = 0
        root = root + 1
    else :
        pwr = pwr + 1
if x > 0 :
    print(root,"**",pwr,"==",x)
elif x < 0 :
    if pwr%2 == 0 :
        print ("no solution")
    else :
        print(-1*root,"**",pwr,"==",x)
else :
    print("no solution") 
```

大家好，我认为有很多方法可以解决这个问题。目前我也只是从书中学习phyton。

由于这是使用“while”的迭代部分的问题，我认为预期的解决方案也使用“while”。

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2021-01-05T16:35:41.257

```
integer = int(input('Enter an integer: '))

root = 0
ans=0
isTrue=False
while (root < integer):    
    for pwr in range(1,6):
       ans=root**pwr      

       if ans==integer:            
           print(root, 'to the power', pwr, '=', ans)
           isTrue= True        
   root = root+1 

if isTrue != True:
    print('No such pair of integers exists') 
```*

# mysql - MySQL 查询运行*非常*慢

> ID：13648133
> 
> 赞同：1
> 
> 时间：2012-11-30T15:27:29.400
> 
> 标签：mysql, sql, performance

我有一个运行非常缓慢的 sql 查询，我很困惑为什么。查询是：

```
SELECT DISTINCT(c.ID),c.* FROM `content` c 
  LEFT JOIN `content_meta` cm1 ON c.id =    cm1.content_id 
 WHERE 1=1 
   AND c.site_id IN (14) 
   AND c.type IN ('a','t') 
   AND c.status = 'visible' 
   AND (c.lock = 0 OR c.site_id = 14) 
   AND c.level = 0 
    OR 
       (
          (     c.site_id = 14 
            AND cm1.meta_key = 'g_id' 
            AND cm1.meta_value IN ('12','13','7')
          ) 
          OR 
          (     c.status = 'visible' 
            AND ( 
                    (c.type = 'topic' AND c.parent_id IN (628,633,624))
                )
          )
       ) 
 ORDER BY c.date_updated DESC LIMIT 20 
```

内容表有大约 1250 行，内容元表有大约 3000 行。这不是很多数据，我不太确定是什么导致它运行如此缓慢。任何想法/意见将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T16:13:32.013

你的where子句正确吗？您正在执行一系列 AND 语句，然后您正在执行 OR。

正确的不是这样的：

```
AND (c.lock = 0 OR c.site_id = 14) 
AND (
        ( ... )
        OR
        ( ... )
   ) 
```

如果确实正确，您可以考虑更改结构或在脚本或过程中处理结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T16:23:01.510

它可能与你最后的“OR”子句有关......你的前期正在被索引尽可能地利用，但是你在最后抛出这个巨大的 OR 条件，可以是一个或另一个。不知道更多的基础内容，我会调整在内部有一个 UNION，这样每个实体都可以利用自己的索引，获得合格的 CID，然后加入最终结果。

```
select
      c2.*
   from
      ( select distinct
              c.ID
           from
              `content` c
           where
                  c.site_id in (14)
              and c.type in ('a', 't' )
              and c.status = 'visible'
              and c.lock in ( 0, 14 )
              and c.level = 0
        UNION
        select
              c.ID
           from
              `content` c
           where
                  c.status = 'visible'
              and c.type = 'topic'
              and c.parent_id in ( 628, 633, 624 )
        UNION
        select
              c.ID
           from
              `content` c
                 join `content_meta` cm1
                    on c.id = cm1.content_id
                   AND cm1.meta_key = 'g_id'
                   AND cm1.meta_value in ( '12', '13', '7' )
           where        
                  c.site_id = 14 ) PreQuery
      JOIN `content` c2
         on PreQuery.cID = c2.cID
   order by
      c2.date_updated desc
   limit
      20 
```

我会确保内容表在（site_id，type，status）上有一个索引，另一个在（parent_id，type，status）上

和元表，（ content_id，meta_key，meta_value ）上的索引

# asp.net - 如果数字证书不存在，则阻止所有 http 请求

> ID：13648138
> 
> 赞同：0
> 
> 时间：2012-11-30T15:27:50.840
> 
> 标签：asp.net, asp.net-mvc, http, asp.net-mvc-4, digital-certificate

在我的应用程序中，可以使用存储在数据库中的登录名/密码或使用其数字证书对用户进行身份验证。

在这两种方式中，如果登录成功，则会创建一个 cookie 并将其关联到用户。

```
FormsAuthentication.SetAuthCookie(model.UserName, false);
return RedirectToAction("Index", "Home"); 
```

我需要这个与众不同。如果用户使用其数字证书登录，我想检查证书是否存在，否则会引发错误。

这个概念是如果证书不存在，这是因为用户已经离开，所以什么也做不了。

这很难做到吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T16:33:35.330

我找到了一个简单的解决方案。

在 IIS 上，有一种方法可以在站点高级设置中设置连接超时。它是连接在断开之前可以保持非活动状态的时间段（以秒为单位）。

单击站点节点，在操作窗格中单击高级设置，单击连接限制上的 + 并将连接超时（秒）设置为您认为相关的时间段。

我设置为1；现在基本上每次用户调用一个动作时，它都会检查证书。如果它在那里，应用程序将正常继续。

它对我有用，因为数字证书是必需的。对于那些具有正常登录/密码表单验证的用户，您需要找到更好的方法，否则用户将始终被重定向到登录页面。

# c++ - 从 C++ 调用 dll 函数

> ID：13648139
> 
> 赞同：9
> 
> 时间：2012-11-30T15:27:52.197
> 
> 标签：c++, dll

我想从我的 C++ 应用程序调用的 dll 中有一个函数。dll 也是用 C++ 制作的，并且有一个 def 文件，其中显示了 dll 中存在的函数。我正在使用visual studio 2010，我通过在链接器“附加库目录”中添加dll的目录，然后在链接器的“输入”中添加DLLname.lib，将其配置为使用dll文件。现在 dll 中的所有命名空间都可用，但是我需要的函数不可用，因为它们不在任何命名空间下。我该如何访问这些功能？这些函数是在 dll 中声明的

```
#include "stdafx.h"
#include <stdio.h>
__declspec(dllexport) int somefunction()
{
......
            return SomeValue
} 
```

我的问题是如何通过其 dll 访问我的 C++ 应用程序中的某些功能。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-30T15:32:28.793

这里似乎有些混乱。将文件添加到链接器输入用于静态链接库（Windows 上的 .lib）。使用静态链接库，代码只是在编译时复制到您的程序中。动态链接库（Windows 中的 .dll）驻留在不同的文件（DLL）中，并在您的程序运行时加载。要访问 dll 中的函数，有两种主要方法：

*   使用[dllimport](http://msdn.microsoft.com/en-us/library/3y1sfaz2.aspx)，类似于使用 dllexport 导出函数的方式

*   [使用LoadLibrary](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684175%28v=vs.85%29.aspx)加载 DLL ，然后使用[GetProcAddress](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683212%28v=vs.85%29.aspx)获取指向您的函数的指针。如果您使用此方法，您应该注意的另一件事是，您可能应该`extern "C"`在要导出的函数上使用以避免[名称混淆](http://en.wikipedia.org/wiki/Name_mangling#Name_mangling_in_C.2B.2B)。如果使用 查找函数时遇到问题`GetProcAddress`，可以使用[Dependency Walker](http://www.dependencywalker.com/)检查 DLL 中的函数名称 - 根据使用的[调用约定](http://en.wikipedia.org/wiki/Calling_convention)，它们可能会稍作修改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T16:23:22.307

我认为张贴者正在寻求有关隐式链接的帮助。 [MSDN Linking Implicitly](http://msdn.microsoft.com/en-us/library/d14wsce5%28v=vs.71%29.aspx)和[Wikipedia Dynamic-link library Using DLL imports](http://en.wikipedia.org/wiki/Dynamic_link_library#Using_DLL_imports)

# google-chrome-extension - Chrome 扩展：上下文菜单复选框在 windows chrome 浏览器版本中不可见：23.0.1271.91

> ID：13648144
> 
> 赞同：0
> 
> 时间：2012-11-30T15:28:10.733
> 
> 标签：google-chrome-extension

我正在开发 chrome 扩展。使用上下文菜单选项创建复选框，它在 Ubuntu(O/S) 的 Chrome 浏览器（版本 21.0.1180.15 beta）中运行良好。但复选框在 Windows-XP Chrome 浏览器（版本 23.0.1271.91）中不可见

```
var contextMenuCallback = function(info, tab) {
  console.log(info);
  console.log(tab);
  // we can do other stuff here.
}

var first_params = {
  "id": "first_id",
  "title": "First",
  "type": "checkbox",
  "checked": true,
  "onclick": contextMenuCallback
};
var second_params = {
 "id": "second_id",
 "title": "Second",
 "type": "checkbox",
 "checked": true,
 "onclick": contextMenuCallback
};  
chrome.contextMenus.create(first_params);
chrome.contextMenus.create(second_params); 
```

给你同样的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T08:10:41.217

我在同一个版本，它的工作原理

![在此处输入图像描述](../Images/031a852637c22c616d2ebfc64166823a.png)

您是否检查了上下文菜单的权限，如此处所示。

**清单.json**

```
{
  "name": "Context Menu Demo",
  "description": "This gives demo of context menu features",
  "version": "1",
  "permissions": ["contextMenus"],
  "background": {
    "scripts": ["sample.js"]
  },
  "manifest_version": 2,
  "icons":{"16":"screen.png","48":"screen.png","128":"screen.png"}
} 
```

您是否在`background.js`此处包含代码

```
var contextMenuCallback = function(info, tab) {
  console.log(info);
  console.log(tab);
  // we can do other stuff here.
}

var first_params = {
  "id": "first_id",
  "title": "First",
  "type": "checkbox",
  "checked": true,
  "onclick": contextMenuCallback
};
var second_params = {
 "id": "second_id",
 "title": "Second",
 "type": "checkbox",
 "checked": true,
 "onclick": contextMenuCallback
};  
chrome.contextMenus.create(first_params);
chrome.contextMenus.create(second_params); 
```

试试这个代码并将屏幕截图发送给我们，以输出您所期望的和缺少的内容？

# log4j - 避免在 log4j 中打印方法的完整包名

> ID：13648147
> 
> 赞同：2
> 
> 时间：2012-11-30T15:28:18.790
> 
> 标签：log4j

我有一个使用 log4j 进行日志记录的 API。当我在我的项目中使用 API 时，虽然与项目相关的日志语句打印了 ontl 方法名称，但来自 API 的日志语句打印的是完整的包名格式。在 log4j.properties 文件中，我使用“%c”（小写）。

如何强制所有项目日志语句仅打印方法名称。

让我们说；

我有两个类 Main.java 和 AlarmCategoryImpl.java AlarmCategroryImpl.java 位于 API 类中，Main.java 在我的项目类中定义。

```
 static Logger                       logger = Logger.getLogger(AlarmCategoryImpl.class);
 static Logger               logger   = Logger.getLogger(Main.class); 
```

及其 log4j 输出。

```
 2012-12-01/18:13:22.220/EET [INFO][Main->main] starting...  
2012-12-01/18:13:22.447/EET [INFO][com.monitor.base.alarmmanagement.alarmconfigurationImpl.AlarmCategoryImpl->copyStructureRecursive] Copying AlarmCategoryImpl 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T04:50:15.007

`%c`表示“类别名称”，与“记录器名称”同义。这意味着`%c`它将扩展到记录器的名称。

记录器名称*不一定*是完全限定的类名。记录器名称是传递给的字符串`Logger.getLogger()`。因此，如果您有一个名为 的类`x.y.z.MyClass`，并且它具有以下内容：

`private static final Logger logger = Logger.getLogger("hello");`

然后将使用`hello`扩展而不是生成日志语句`%c`。

这意味着您的 API 中的类正在使用`getLogger()`，将类名作为参数传递。这会导致`%c`在打印日志时扩展为完全限定的类名。

我猜您的非 API 类（换句话说，您自己的项目的类）没有将任何值传递给`Logger.getLogger()`，或者它们可能使用根记录器。可以肯定的是，将检索`Logger`实例的代码行粘贴到此处。

**根据评论**编辑：****

 **那么，您的`Main`类是否可能在默认包中？（也就是说，它不与任何包关联）？如果是，那么我认为没有任何问题。

`[INFO][Main->main]`:`INFO`是级别，`Main`是类，`main`是方法。

`[INFO][com.monitor.base.alarmmanagement.alarmconfigurationImpl.AlarmCategoryImpl->copyStructureRecursive]`:`INFO`是级别，`com.monitor.base.alarmmanagement.alarmconfigurationImpl.AlarmCategoryImpl`是类，`copyStructureRecursive`是方法。**

# matlab - 在matlab中定义颜色条的尺寸

> ID：13648149
> 
> 赞同：2
> 
> 时间：2012-11-30T15:28:25.750
> 
> 标签：matlab, colorbar

我创建下图：

```
Naming = {'Name1','Name2','Name3','Name4','Name5','Name6'};

for i = 1:length(Naming);
    dat = 1+(30-1).*rand(365,5);
    time = datenum('2009-01-01','yyyy-mm-dd'):datenum('2009-12-31',...
        'yyyy-mm-dd');
    dept = 1:5;

    figure(1);
    ax = subplot(3,2,i);
    contourf(time,dept,dat',1:5:30);
    shading flat;
    title(Naming{i});
    datetick('x','mmm','keepticks');
    AX{i} = get(ax,'position'); 
end
h = axes('Position',[0 0 1 1],'Visible','off');
c = colorbar;
x = get(c,'Position');
x(1) = AX{end}(1)+AX{end}(3)+0.02;
x(2) = AX{end}(2);
x(3) = 0.02;
x(4) = AX{1}(2)+AX{1}(4);
set(c,'Position',x); 
```

有没有更好的方法来定义颜色条的宽度和高度？目前颜色条位于正确的位置，但高度太大。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-12T14:30:58.960

MathWorks 提供了一种用于指定颜色条宽度的[解决方案，对我来说效果很好。](http://www.mathworks.de/support/solutions/en/data/1-1DQ8BG/index.html?product=ML)

这是来自链接网站的示例，其中颜色栏的宽度设置为**0.03**：

```
pcolor(peaks);
c=colorbar;
x1=get(gca,'position');
x=get(c,'Position');
x(3)=0.03;
set(c,'Position',x)
set(gca,'position',x1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T16:24:43.477

我认为你只需要减去底部轴的 y 位置：

```
x(4) = AX{1}(2)+AX{1}(4)-AX{6}(2); 
```

至于更好的方法：在我看来，你做得很好......你认为什么会“更好”？

# android - Android - 如何使用“选择 last_insert_rowid();”

> ID：13648158
> 
> 赞同：4
> 
> 时间：2012-11-30T15:28:47.130
> 
> 标签：android, sqlite

我是安卓新手。

我想在`TextView`. 所以，我只是想获取已存储在数据库中的最新 ID，并声明为`Integer`我得到的值加 1，然后显示到`TextView`.

我已经阅读了许多有关获取最新 ID 的问题。我该如何使用`select last_insert_rowid();`？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T22:13:43.613

`last_insert_rowid()`仅适用于已在同一会话中插入的记录。

如果您的列被声明为`INTEGER PRIMARY KEY`，那么如果您没有在新记录中指定一个值，SQLite 将自动为其生成一个值。

如果您在插入记录之前确实需要 ID，则可以执行以下操作：

```
SELECT max(_id) FROM MyTable 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-31T22:53:33.587

```
Cursor c = database.rawQuery("SELECT last_insert_rowid()", null);
c.moveToFirst();
int id = c.getInt(0);
id += 1; 
```

我也是新手，不能很好的解释。以上将从同一会话中获取最后一个插入 id。如果启动新会话，它将不起作用，即您插入某些内容并关闭连接并重新打开它，因为它将返回 0，因此您需要记住这一点，因为您的 TextView 将始终显示 1。就像你我读了很多关于它的问题，但不知道如何实现它。上面的代码是我如何设法使用它而不会出现越界异常。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-30T15:31:23.027

如果您使用自动增量使用

```
SELECT * from SQLITE_SEQUENCE; 
```

获取最新的 id。

# jquery - Jquery如何更改具有相同类的三个“div”的值

> ID：13648161
> 
> 赞同：1
> 
> 时间：2012-11-30T15:28:49.853
> 
> 标签：jquery

请我有以下标记：

```
<div class="item"> 1 a </div>
<div class="item"> 2 b </div>
<div class="item"> 3 c </div> 
```

单击按钮后，我想使用 jQuery 将三个元素的值增加 2 并得到：

```
<div class="item"> 3 a </div>
<div class="item"> 4 b </div>
<div class="item"> 5 c </div> 
```

请问有什么帮助吗？

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T15:31:33.277

您可以在按钮的事件处理程序中执行此操作：

```
$('.item').each(function(){
   $(this).html(
      $(this).html().replace(/(\d+)/, function(v){return parseInt(v,10)+1})
   );
}); 
```

这会增加项目中的第一个数字（如果要增加任何数字，只需将正则表达式更改为`/(\d+)/g`）。

**[示范](http://jsfiddle.net/X38Aw/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T15:31:05.923

你应该像这样修改你的html：

```
<div class="item"> <span>1</span> product </div>
<div class="item"> <span>2</span> product </div> 
```

你的Javascript应该是：

```
$('.yourbutton').click(function(){
    $( '.item' ).each(function(){
        var actual = parseInt( $(this).find( 'span' ).html() );
        $(this).find( 'span' ).html( actual + 1 );
    }); 
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T15:34:22.373

[在这里](http://api.jquery.com/appendTo/)查看 .appendTo 类

> 另一方面，使用 .appendTo()，内容在方法之前，作为选择器表达式或作为动态创建的标记，它被插入到目标容器中。

# jquery - 在响应式图像上使用 jcrop

> ID：13648162
> 
> 赞同：16
> 
> 时间：2012-11-30T15:28:53.080
> 
> 标签：jquery, html, css, responsive-design, jcrop

由于 jcrop 现在在触摸屏上工作，我想做一个使用它的网络应用程序。我已经完成了所有工作，但是如果我尝试使设计具有响应性，以便用户可以在裁剪之前看到整个图像（它的宽度是屏幕的百分比），那么裁剪区域将与所选区域不同用户。在调整大小的图像顶部所做的选择坐标与全尺寸图像上的坐标不匹配。

Jcrop 通过使用框大小或 truesize 方法包括解决类似问题（处理大图像时）的方法，但如果图像的宽度基于百分比而不是给定的像素宽度，则它们都不起作用。

我能想到的唯一解决方案是使用媒体查询调整图像大小，并根据屏幕宽度制作 3 或 4 个版本，但我宁愿坚持基于百分比的调整大小，因为它看起来要好得多。

这是我的 jcrop 电话：

```
 var jcrop_api, boundx, boundy;
    $('#target').Jcrop({
        onChange: updatePreview,
        onSelect: updatePreview,
        aspectRatio: 0.75
    },function(){
        // Use the API to get the real image size
        var bounds = this.getBounds();
        boundx = bounds[0];
        boundy = bounds[1];
        trueSize: [900,600],
        // Store the API in the jcrop_api variable
        jcrop_api = this;
    });
            function updatePreview(c){
        if (parseInt(c.w) > 0){
            var rx = <?echo $width;?> / c.w;
            var ry = <?echo $height;?> / c.h;

            $('#preview').css({
                width: Math.round(rx * boundx) + 'px',
                height: Math.round(ry * boundy) + 'px',
                marginLeft: '-' + Math.round(rx * c.x) + 'px',
                marginTop: '-' + Math.round(ry * c.y) + 'px'
            });
        }

        $('#x').val(c.x);
        $('#y').val(c.y);
        $('#w').val(c.w);
        $('#h').val(c.h);

    }; 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-04T08:32:53.157

TrueSize 最终成功了，我没有正确使用它：

```
jQuery(function($){

    // Create variables (in this scope) to hold the API and image size
    var jcrop_api, boundx, boundy;

    $('#target').Jcrop({
        onChange: updatePreview,
        onSelect: updatePreview,
        aspectRatio: 0.75,
        trueSize: [<?echo $width2;?>,<?echo $height2;?>]
    },function(){
        // Use the API to get the real image size
        var bounds = this.getBounds();
        boundx = bounds[0];
        boundy = bounds[0.75];
        //trueSize: [ancho,alto],
        // Store the API in the jcrop_api variable
        jcrop_api = this;
    });

    function updatePreview(c){
        if (parseInt(c.w) > 0){
            var rx = <?echo $width;?> / c.w;
            var ry = <?echo $height;?> / c.h;

            $('#preview').css({
                width: Math.round(rx * boundx) + 'px',
                height: Math.round(ry * boundy) + 'px',
                marginLeft: '-' + Math.round(rx * c.x) + 'px',
                marginTop: '-' + Math.round(ry * c.y) + 'px'
            });
        }

        $('#x').val(c.x);
        $('#y').val(c.y);
        $('#w').val(c.w);
        $('#h').val(c.h);

    };

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-29T10:04:30.503

它使用以下代码

```
var width2  = jQuery('#cropbox').prop('naturalWidth');
var height2 = jQuery('#cropbox').prop('naturalHeight');

jQuery('#cropbox').Jcrop({
  aspectRatio: 1,
  onSelect: updateCoords,
  onChange: updateCoords,
  setSelec: [0,0,110,110],
  trueSize: [width2,height2]
});
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-07-17T09:33:48.727

我希望即使是我的回答也能帮助人们理解这个想法。假设我们在引导程序中有一个响应式图像，其类**为 img-responsive**

这是带有图像的html表单

```
<form method="POST" action="#" enctype="multipart/form-data">
      <img  class="img-responsive" id="get-profile-img" src="image.jpg"/>
      <input id="x" name="x" type="hidden" value="">        
      <input id="y" name="y" type="hidden" value="">        
      <input id="w" name="w" type="hidden" value="">        
      <input id="h" name="h" type="hidden" value="">        

      <input id="rx" name="rx" type="hidden" value="">        
      <input id="ry" name="ry" type="hidden" value="">        
      <input id="rw" name="rw" type="hidden" value="">        
      <input id="rh" name="rh" type="hidden" value="">        
</form> 
```

这是 JCrop 代码，它将根据**x**、**y**、**w**和**h**的计算获得**rx**、**ry**、**rw**和**rh**

 ******```
$(function() {
    $('#get-profile-img').Jcrop({
            onSelect: updateCoords,
            aspectRatio: 1,
            setSelect  : [50, 0, 300,300],
            allowResize: true
        });
    });
    function updateCoords(c) {
        $('#x').val(c.x);
        $('#y').val(c.y);
        $('#w').val(c.w);
        $('#h').val(c.h);
       responsiveCoords(c, '#get-profile-img');
    };

    function responsiveCoords(c, imgSelector) {

        var imgOrignalWidth     = $(imgSelector).prop('naturalWidth');
        var imgOriginalHeight   = $(imgSelector).prop('naturalHeight');

        var imgResponsiveWidth  = parseInt($(imgSelector).css('width'));
        var imgResponsiveHeight = parseInt($(imgSelector).css('height'));                

        var responsiveX         = Math.ceil((c.x/imgResponsiveWidth) * imgOrignalWidth);
        var responsiveY         = Math.ceil((c.y/imgResponsiveHeight) * imgOriginalHeight);

        var responsiveW         = Math.ceil((c.w/imgResponsiveWidth) * imgOrignalWidth);
        var responsiveH         = Math.ceil((c.h/imgResponsiveHeight) * imgOriginalHeight);

        $('#rx').val(responsiveX);
        $('#ry').val(responsiveY);
        $('#rw').val(responsiveW);
        $('#rh').val(responsiveH);

}; 
```

最后在 PHP 端使用**rx**、**ry**、**rw**和**rh**代替**x**、**y**、**w**和**h**。

（或者）

您可以像这样简单地覆盖**x**、**y**、**w**和**h** 上 的
**rx**、**ry**、**rw**和**rh**并像往常一样使用**x**、**y**、**w**和**h 。**

 ******```
$('#x').val(responsiveX);
$('#y').val(responsiveY);
$('#w').val(responsiveW);
$('#h').val(responsiveH); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-02T22:33:33.450

您可以为此使用 truesize 参数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-27T11:58:27.473

如果您使用 ajax 加载图像，您可以获取图像宽度/高度，`getimagesize('img.png')`然后您可以在 javascript 代码中使用此变量。

trueSize 真的对我有用。************

# swing - 如何将实现事件处理程序接口的类限制为具有初始化参数的一个实例？

> ID：13648165
> 
> 赞同：1
> 
> 时间：2012-11-30T15:28:59.963
> 
> 标签：swing, singleton, design-patterns, actionlistener

`ActionListener`我正在编写一个具有登录功能的 Swing 应用程序，需要为实现该接口的登录按钮创建一个类。

此类需要用户输入字段和 GUI 控件的句柄，我想将这些句柄传递给构造函数或初始化方法。（这些句柄不能传递给`actionPerformed()`接口中声明的事件。）同时，应该只创建这个类的一个实例。

请提出最佳设计方案。我读到单例模式被认为是有缺陷的，尤其是在涉及参数时。

# c# - 如何避免在视图中循环？

> ID：13648174
> 
> 赞同：4
> 
> 时间：2012-11-30T15:29:46.267
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, razor, asp.net-mvc-4

当我构建视图时，我想尽可能多地消除处理逻辑。理想情况下，我想只使用 HTML 并使用 Razor 呈现值。

所以假设我有一个带有 BarModel 对象列表的 FooModel：

```
public class FooModel
{
    public List<BarModel> Bars { get; set; }

    public string FoosFirstValue { get; set; }
    public string FoosOtherValue { get; set; }
}

public class BarModel
{
    public string SomeValue { get; set; }
    public string SomeOtherValue { get; set; }
} 
```

在我看来，我需要循环并在我的 Bars 上显示元素：

```
@model MyApp.FooModel
<div>@Model.FoosFirstValue</div>
<div>@Model.FoosOtherValue </div>
<div>
    Bars:
    <ul>
        @foreach (var bar in Model.Bars)
        {
            <li>@bar.SomeValue: @bar.SomeOtherValue</li>
        }
    </ul>
</div> 
```

无论如何要避免在我看来使用循环？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-30T15:29:46.267

虽然在 MVC 视图中循环并不一定是坏事，但一些纯粹主义者（就像你似乎是）更喜欢保持他们的视图超级干净并且没有任何处理逻辑。

对您来说幸运的是，MVC 中有一个鲜为人知的宝石，它可以获取一个 IEnumerable 对象列表，并将其渲染到绑定到单个对象的编辑器/显示模板——它为您处理循环。

例如，如果您设置了显示模板部分视图，我们将其命名为 BarModel.cshtml（应存储在[PartialViewLocationFormats 搜索路径](https://stackoverflow.com/a/6084214/213902)之一的“DispalyTemplate”子文件夹下）：

```
@model MyApp.BarModel
<li>@Model.SomeValue: @Model.SomeOtherValue</li> 
```

现在，在您的视图中，您可以简单地使用 调用显示模板`Html.DisplayFor`，并将完整列表作为模型传递：

```
<div>
    Bars:
    <ul>
        @Html.DisplayFor(m => m.Bars)
    </ul>
</div> 
```

就是这样。它将获取您的 BarModel 列表，并为列表中的每个 BarModel 对象生成部分显示模板。

当然，对于您的简单示例，这实际上取决于个人喜好，因为没有主要好处，除非您只是想摆脱循环逻辑。

但是，如果您需要在同一视图或不同视图的多个位置共享此显示模板，那么构建这样的视图并减少复杂性和代码重复确实是值得的。

另一个旁注：此方法假定您要显示列表中的每个项目，并按照其存储在列表中的顺序。如果您需要有条件地显示项目，或者想要以不同的顺序显示，这种方法将不起作用。

但是，如果是这种情况，我建议完全按照您在视图中显示的需要设置列表。也就是说，在构建列表的控制器/服务中进行任何过滤/排序，并让您的视图仅渲染您的模型。

# php - 函数内部的数据库查询未发布到页面

> ID：13648177
> 
> 赞同：1
> 
> 时间：2012-11-30T15:29:49.980
> 
> 标签：php, mysql, function, select-menu

我是 php 函数的新手，我目前正在尝试构建一个 if 语句来查看数据库表以查看名为 tableformatting 的列。此表是存储我的测验问题的格式选项的位置，例如，如果我希望我的问题的答案显示为下拉菜单，我会在添加测验问题时选择该选项，然后当它从数据库中拉出时将被格式化。

目前 if 语句如下所示：

```
 <?php
    // Lookup Question Format & Format Using Function //
    $questionformat="SELECT * FROM itsnb_chronoforms_data_createquestions WHERE questionID='$questionID'";
    $questionformatresult =mysql_query($questionformat);
    while ($formatrow = mysql_fetch_array($questionformatresult)){
    $format = $formatrow['questionformat']; }

            if ($format == 'questionformatdropmenu')
            {dropdownmenu ();
            }
            else
            {}

     ?> 
```

格式化函数如下所示：

```
<?php
    // Question formatting functions //

    // Dropdown Menu
    function dropdownmenu(){

    echo '<select id="quizselectanswer" name="quizselectanswer" title="quizselectanswer">';

    $sql="SELECT * FROM itsnb_chronoforms_data_createquestions WHERE questionID='$questionID'";
    $result2 =mysql_query($sql);
    while ($data = mysql_fetch_array($result2)){

      echo '<option value ="' . $data['quizanswer1'] . '" >' . $data['quizanswer1'] . '</option>';
      echo '<option value ="' . $data['quizanswer2'] . '" >' . $data['quizanswer2'] . '</option>';
      echo '<option value ="' . $data['quizanswer3'] . '" >' . $data['quizanswer3'] . '</option>';
      echo '<option value ="' . $data['quizanswer4'] . '" >' . $data['quizanswer4'] . '</option>';
        }
      echo '</select>';
      }
    // Question formatting functions END //
    ?> 
```

我遇到的问题是该函数可以很好地创建下拉列表菜单，但是由于某种原因没有填写数据并且下拉菜单只是空白，如果我将代码从函数中取出并正常运行它虽然它一切都按预期工作，菜单中填满了答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T15:34:37.853

您正在尝试访问`$questionID`超出范围的变量。尝试将其传递给函数，例如：

```
// Dropdown Menu
function dropdownmenu ( $questionID ) {
  echo '<select id="quizselectanswer" name="quizselectanswer" title="quizselectanswer">';

  $sql="SELECT * FROM itsnb_chronoforms_data_createquestions WHERE questionID='$questionID'";
  $result2 =mysql_query($sql);

  while ( $data = mysql_fetch_array( $result2 ) ) {
    echo '<option value ="' . $data['quizanswer1'] . '" >' . $data['quizanswer1'] . '</option>';
    echo '<option value ="' . $data['quizanswer2'] . '" >' . $data['quizanswer2'] . '</option>';
    echo '<option value ="' . $data['quizanswer3'] . '" >' . $data['quizanswer3'] . '</option>';
    echo '<option value ="' . $data['quizanswer4'] . '" >' . $data['quizanswer4'] . '</option>';
  }

  echo '</select>';
} 
```

然后从你的第一个循环调用函数，如下所示：

```
dropdownmenu($questionID) 
```

# sql-server - 分区与多维数据集的性能

> ID：13648179
> 
> 赞同：2
> 
> 时间：2012-11-30T15:30:01.597
> 
> 标签：sql-server, performance, ssas, cube, data-partitioning

鉴于这种情况，

**三个国家的销售信息。**

```
CountryA: 0.9M records.
CountryB: 0.8M records.
CountryC: 0.7M records. 
```

从理论上讲，以下方法之间的**预期性能差异（*）是什么？**

1.  一个立方体，每个国家有一个分区。
2.  三个立方体，每个国家一个。

(*)*对于单个国家/地区查询，当然。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T16:29:07.377

只要分区方法的查询正确地针对适当的分区，性能差异应该很小。

如果事实/维度关系相同，则采用分区方法。这将使跨分区返回结果变得更加容易（例如第 1 季度的 TotalRevenue 或 ProductA 的 TotalCost）。如果将它们分成单独的立方体，这些将更加难以计算。对于使用 Excel 数据透视表或报表生成器等自助服务研究工具来定位多个多维数据集的分析师来说，这也将变得更加复杂。

以下是 SQL CAT 团队关于分区大小的建议：

*在大多数情况下，分区应包含少于 2000 万条记录，每个度量值组应包含少于 2000 个分区。此外，避免定义包含少于 200 万条记录的分区。分区过多会导致元数据操作变慢，而分区过少会导致错失并行机会。*

你显然在 2000 万记录推荐之下。此外，我还会查看每个分区的数据大小。较小的多维数据集（只有必要的度量、属性关系和正确定义的层次结构等）可以在每个分区显着更多记录的情况下表现良好。

以下是 SQL CAT 最佳实践的完整列表：

[http://sqlcat.com/sqlcat/b/top10lists/archive/2007/09/13/analysis-services-query-performance-top-10-best-practices.aspx](http://sqlcat.com/sqlcat/b/top10lists/archive/2007/09/13/analysis-services-query-performance-top-10-best-practices.aspx)

# jquery - Internet Explorer 8+ - 通过 jquery 填充选择不会扩大选择范围

> ID：13648180
> 
> 赞同：0
> 
> 时间：2012-11-30T15:30:01.383
> 
> 标签：jquery, html, css, internet-explorer

基本上我会根据选择的费用类别自动填充费用描述，并且选择不会根据框中的内容扩大。

当然，这在 chrome、firefox 和 safari 上运行得非常好。

任何人都知道为什么它不会像其他浏览器那样自动加宽？或者我怎么能强迫它？我没有受 CSS 限制的宽度。

![在此处输入图像描述](../Images/f61d6510e1df42f29d344f2db787adb1.png)

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T15:34:10.903

这应该为 IE8 修复它：

```
select:focus {
   position: relative; /* needed if the parent element has assigned width */
   width: auto;
} 
```

# android - 当来自服务器的数据时刷新列表视图中的数据

> ID：13648181
> 
> 赞同：0
> 
> 时间：2012-11-30T15:30:04.887
> 
> 标签：android, android-listview, android-adapter

我在刷新列表视图中的数据时遇到问题。我从服务器获取列表中的数据，当我想刷新数据时，我需要转到服务器并接收新数据。notifyDataSetChanged() 没有帮助， ListView.invalidateViews 也没有帮助。当我旋转设备时，列表更新了。如何以与屏幕旋转相同的方式加载列表视图？

这是填充列表视图的创建代码。

提前致谢。

```
query = new ParseQuery(PET_CLASS_NAME);
petListView.addHeaderView((View)getLayoutInflater().inflate(R.layout.header_row, null));        
petDetailIntent = new Intent(getApplicationContext(), PetDetailActivity.class);
    selectCityIntent = new Intent(this, CitiesActivity.class);
    loadingIntent = new Intent(getApplicationContext(), LoadingActivity.class);
    startActivityForResult(loadingIntent, LOADING_INTENT_CODE);                     

    /*the user see list of pets that are still missing*/
    query.whereEqualTo(PET_FOUNDED, false);
    selectedCity = settings.getString("cityQuery", "");
    if(selectedCity != ""){
        query.whereEqualTo(PET_CITY, selectedCity);
    }
    query.findInBackground(new FindCallback() {

        @Override
        public void done(List<ParseObject> list, ParseException e) {
            if (e == null) { //objects retrieved well                   
                petList.addAll(list);

                //MyAdapter
                adapter = new MyAdapter(
                        getApplicationContext(), 
                        android.R.layout.simple_list_item_1, 
                        R.id.tv_pet_name,
                        petList);

                setListAdapter(adapter);
            }
            else{
                toaster(getResources().getString(R.string.error_message_load_pets));
                finish();
            }           
            finishActivity(LOADING_INTENT_CODE);                        
        }       
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T15:36:26.477

当您旋转设备时，活动实际上开始停止并开始，并且您的初始请求将再次发出。

您应该将您的请求代码放入一个方法中并自己调用它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T15:49:08.507

与 Rawkode 提到的类似，实际上执行从服务器检索数据的工作的代码似乎不是可重用的（因为它存在于`onCreate()`. 看看这张图：http: [//developer.android.com/images/activity_lifecycle.png](http://developer.android.com/images/activity_lifecycle.png)。如您所见，该`onCreate()`方法只执行一次，除非重新创建 Activity（即旋转屏幕）。

此外，从给定的代码来看，似乎也没有刷新方法的证据。用户将如何刷新数据？考虑重构您的代码，以便在您可以稍后调用的方法（即`refreshData()`）中完成工作，然后找出您希望用户刷新的方法。例如，您可以使用带有刷新 ActionItem 的 ActionBar、菜单选项甚至按钮。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T15:44:48.830

使用 AsyncTask 从服务器加载数据。它会更快地加载它。

试试这个：

```
private class YourTask extends AsyncTask<String, Void, String> {
        @Override
        protected String doInBackground(String... s) {

            //Here you have to make the loading / parsing tasks
            //Don't call any UI actions here. For example a Toast.show() this will couse Exceptions
            // UI stuff you have to make in onPostExecute method

        }

        @Override
        protected void onPreExecute() {
            // This method will called during doInBackground is in process
            // Here you can for example show a ProgressDialog
        }

        @Override
        protected void onPostExecute(Long result) {
            // onPostExecute is called when doInBackground finished
            **// Here you can for example fill your Listview with the content loaded in doInBackground method**

        }

} 
```

而且，如果您从服务器加载内容，则只需始终调用此 AsyncTask ：

```
new YourTask().execute(""); 
```

试试看！..希望这有帮助..

# usb - 区分具有相同供应商和产品 ID 的多个 USB 设备

> ID：13648182
> 
> 赞同：7
> 
> 时间：2012-11-30T15:30:06.373
> 
> 标签：usb, lsusb

我正在编写一个应用程序，它允许 Linux 机器通过 USB 调制解调器连接到互联网。我有多个具有相同供应商和产品 ID 的 USB 调制解调器；我无法使用`lsusb`提供供应商和产品 ID 来区分它们。同样根据他们的 USB 端口提供 ID 也不能解决我的问题，因为我希望能够在我想要的任何端口中使用 USB 调制解调器。
是否有可以用来区分我的 USB 设备的唯一标识符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T10:25:55.723

使用序列号区分我的 USB 调制解调器。在此站点中显示了基本命令。

[http://wiki.openmoko.org/wiki/Hardware:AT_Commands#Section_5.2C_General_Commands](http://wiki.openmoko.org/wiki/Hardware:AT_Commands#Section_5.2C_General_Commands)

我使用了“ATE+CGSN”命令，它给出了设备的序列号。

# xml - Flex：来自转发器中 httpservice 的 XML 数据

> ID：13648187
> 
> 赞同：1
> 
> 时间：2012-11-30T15:30:29.403
> 
> 标签：xml, apache-flex, httpservice

我正在尝试使用 httpservice 的结果填充标签。此结果来自生成 xml 的 phpscript。当我运行它时，我只是得到一个空白页。我的应用程序代码如下：

```
'<?xml version="1.0" encoding="utf-8"?>
 <s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
           xmlns:s="library://ns.adobe.com/flex/spark" 
           xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600"
           initialize="doSend()">
<fx:Script> 
    <![CDATA[
        import mx.collections.ArrayCollection;
        import mx.collections.ArrayList;
        import mx.collections.XMLListCollection;
        import mx.rpc.events.ResultEvent; 

        [Bindable]
        private var myData:XML;
        public function doSend():void 
        {
            getWatchlist.send();
        }

        protected function getXML(event:ResultEvent):void
        {
            var myData:XML = XML(event.result);
            rptWatchlist.dataProvider = new XMLListCollection(myData.movies);
        }

    ]]>

</fx:Script>
<fx:Declarations>
    <mx:HTTPService url="http://****/phpscripts/selectWatchlist.php"
                    id="getWatchlist" 
                    showBusyCursor="true" 
                    method="POST"
                    result="getXML(event)"
                    resultFormat="e4x">
        <!--todo: userid ophalen -->
        <!--<mx:request xmlns="">
            <userid>
                1
            </userid>
        </mx:request>-->
    </mx:HTTPService>
</fx:Declarations>
<mx:HBox>
    <mx:Repeater id="rptWatchlist">
        <s:Label text="{rptWatchlist.currentItem.movie}" />
    </mx:Repeater>
</mx:HBox> 
```

'

我的 phpscript 的结果是一个 xml：

```
 <?xml version="1.0" encoding="utf-8" ?>
  <movies>
  <movie>
       <watched>N</watched>
       <poster_url>http://cf2.imgobject.com/t/p/w185/2lECpi35Hnbpa4y46JX0aY3AWTy.jpg</poster_url>
       <movie_title>Fight Club</movie_title>
  </movie>
  </movies> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-30T18:55:13.590

visi [http://www.adobe.com/devnet/flex/videotraining/exercises/ex2_04.html](http://www.adobe.com/devnet/flex/videotraining/exercises/ex2_04.html)类似的例子

# python - 如何发送使用 Python 的 Twisted.web 实时转码的视频文件？

> ID：13648192
> 
> 赞同：1
> 
> 时间：2012-11-30T15:30:33.973
> 
> 标签：python, video-streaming, twisted, twisted.web

我正在使用 Python 的 Twisted.web 构建一个视频流媒体，并回调 ffmpeg。

我想知道，因为我通过使用'return file.read（）'发送文件，所以发送转码输出会出现问题，因为它不能被完整读取？我是不是想太多了，这一切都是由 Twisted.web 的低级管理代码管理的，还是我必须重新考虑我的方法？

此外，我如何支持人们跳到没有为他们缓冲的视频部分？我希望它会非常复杂，但只是以防万一。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T03:21:08.173

1）我可以在扭曲中使用 file.read() 吗？

最简洁的答案是不”。

除非你做了一堆其他相对复杂的事情，比如在 fd 上设置 O_NONBLOCK，或者明确地将这个请求委托给单独的线程，否则`file.read()`是一个阻塞调用，它将在文件返回之前将整个文件读入内存。

当这些数据从磁盘同步读取时，Twisted 的反应器将无法调用任何回调或读取或写入任何 fd 上的任何可用数据，导致任何其他挂起的请求或流传输在您的文件被读取时完全停止进入记忆。

此外，如果文件的源卷负载过重和/或有很多文件，即使是`open()`获取文件对象的调用也可能会阻塞很长时间。没有非阻塞打开，所以如果你需要一个文件对象，你应该使用`reactor.deferToThread()`扭曲的常规文件对象。

**所以这是你应该做的：**

要使用 twisted 直接从文件系统读取文件，您应该查看 twisted.web.server.Site 和 twisted.web.static.File。[这里](http://twistedmatrix.com/documents/current/web/howto/web-in-60/static-content.html)有一个关于它们的有趣教程。这些调用不仅会从磁盘流式传输文件内容，而且还会支持静态文件的附加 HTTP 功能，例如 HTTP Range 请求。

2) 我如何支持人们跳到没有为他们缓冲的视频部分？

这就是通常所说的擦洗，基本上有两种擦洗：HTML5 擦洗和基于时间的擦洗。

前者（HTML5 清理）只是“HTTP 范围请求”的一种花哨方式，并且受到原生浏览器和插件的支持，例如 Safari Mobile、Quicktime、mplayer 以及所有实现 html5 标签的浏览器。`twisted.web.static.File`我在回答第一个问题时提到的 支持这一点。

后者（基于时间的清理）是支持清理的传统方式。它基本上是自定义播放器（例如 jwplayer 或 OSMF）和服务器之间的协议，允许播放器请求从某个查询参数指定的时间偏移开始的视频。

这可以通过在子进程中启动 ffmpeg 来完成，该`-itsoffset`参数从所需的查询参数中提取，使用磁盘中的一些输入文件，或使用[您最喜欢的 webserver 中的模块](http://nginx.org/en/docs/http/ngx_http_mp4_module.html)。无论哪种方式都需要玩家了解要发送的查询参数。

# grails - Grails 外部配置。无法访问外部变量。总是得到 [:]

> ID：13648194
> 
> 赞同：3
> 
> 时间：2012-11-30T15:30:41.087
> 
> 标签：grails, groovy, config

我不能让我的“文件夹”外部变量工作。我总是得到[:]。

我正在 Windows 下的 Grails 上进行开发*（这就是为什么外部配置文件看起来像 file:C:\path\to/file）*。

我在另一个项目中使用外部配置没有问题，就像我在下面展示的那样。

我有这个：

**配置.groovy：**

```
environments {
    development {
        grails.config.locations = [ "file:${userHome}/.grails/${appName}-config.groovy" ]
    }
} 
```

**myApp-config.groovy：**

```
stats.feed.wsdl.folder = '/static' 
```

**控制器和服务：**

```
class WsdlController {
    def wsdlService
    def index = {
        wsdlService.getEventsSchedule()
    }
}

class WsdlService {
    def grailsApplication

    def getEventsSchedule = {
        println "Locations: ${grailsApplication.config.grails.config.locations}"
        println "Folder: ${grailsApplication.config.stats.feed.wsdl.folder}"
    }
} 
```

**安慰：**

```
Locations: [file:C:\Users\myUser/.grails/myApp-config.groovy]
Folder: [:] 
```

有什么线索吗？

谢谢！

**更新！**

这是整个 myApp-config.groovy：

```
println 'Start'
stats.feed.wsdl.folder = "/stats"
println 1
stats.feed.wsdl.folder.events = "${stats.feed.wsdl.folder}/events"
println 2
stats.feed.wsdl.folder.teams = "${stats.feed.wsdl.folder}/teams"
println 'End' 
```

这不起作用，控制台显示：

```
Start
1 
```

但是，如果我更改变量名称，它会起作用。

```
println 'Start'
stats.feed.wsdl.folder = "${playcall.static.resources.folder}/stats"
println 1
stats.feed.wsdl.events.folder = "${stats.feed.wsdl.folder}/events"
println 2
stats.feed.wsdl.teams.folder = "${stats.feed.wsdl.folder}/teams"
println 'End' 
```

安慰：

```
Start
1
2
End 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T18:23:19.257

您创建一个属性并将其声明为字符串：

```
stats.feed.wsdl.folder = "/stats" 
```

这样你就不能添加子属性。所以，要保持接近你想要的东西，你可以这样做：

```
stats.feed.wsdl.folder.base = "/stats"
stats.feed.wsdl.folder.events = "${stats.feed.wsdl.folder.base}/events"
stats.feed.wsdl.folder.teams = "${stats.feed.wsdl.folder.base}/teams" 
```

# c - NUMA系统中使用mbind移动页面

> ID：13648196
> 
> 赞同：2
> 
> 时间：2012-11-30T15:30:46.727
> 
> 标签：c, linux, numa

我正在尝试了解`numa(3)`Linux 上的库。

我分配了一个大数组（许多 GB 的内存）。在随机 NUMA 节点上运行的线程写入它，因为这样的页面在随机 NUMA 内存节点上出现故障（默认 NUMA 策略）。

在线程计算结束时，我有一个单线程作业来总结结果。为此，我首先压缩数组，删除大量元素，然后将剩余部分移动到主线程的 NUMA 节点。

系统`move_pages`调用不适合这项工作，因为它需要每个页面的数组条目 - 开销太大。

文档不清楚是否可以强制`numa_tonode_memory`移动故障内存。

所以我看到的唯一方法是使用`mbind`with `MPOL_MF_MOVE`，但我无法理解创建一个正确的`nodemask`参数（或者其他东西失败了）。据我所知，这是：

```
#define _GNU_SOURCE
#include <stdlib.h>
#include <sched.h>
#include <numa.h>
#include <numaif.h>

int master_node;
nodemask_t master_nodemask;

// initializer
// has to be called from master/main thread
void numa_lock_master_thread() {
    int curcpu = sched_getcpu();
    if (curcpu >= 0) {
        // master_node = numa_node_of_cpu(curcpu);
        numa_run_on_node(master_node = numa_node_of_cpu(curcpu));
        if (master_node >= 0) {
            struct bitmask * bindmask = numa_bitmask_alloc(numa_num_possible_nodes());
            numa_bitmask_clearall(bindmask);
            numa_bitmask_setbit(bindmask, master_node);
            copy_bitmask_to_nodemask(bindmask, &master_nodemask);
            numa_bitmask_free(bindmask);
        }
    } else { // has never failed before
        perror("sched_getcpu");
    }
}

static inline void numa_migrate_pages_to_master_node(void * addr, unsigned long len) {
    if (master_node < 0)
        return;

    if ( mbind(   addr
                , len
                , MPOL_BIND
                , master_nodemask.n
                , numa_max_node()
                , MPOL_MF_MOVE)) {
        perror("mbind");
    }

} 
```

来自`/usr/include/numa.h`：

```
typedef struct {
        unsigned long n[NUMA_NUM_NODES/(sizeof(unsigned long)*8)];
} nodemask_t; 
```

有时我得到`mbind: Bad address`，有时调用成功，但随后的内存访问给出了`SIGSEGV`.

`addr`始终是由返回的有效指针

```
mmap(NULL, (num_pages) * sysconf(_SC_PAGE_SIZE), PROT_READ | PROT_WRITE, MAP_ANONYMOUS | MAP_PRIVATE | (flags), -1, 0); 
```

并且`len`是页面对齐的。

我怎样才能用尽可能少的系统调用来完成这项工作，并且没有随之而来的大量开销`move_pages`？

建立`nodemask`论点的正确方法是`mbind`什么？

# python - Python - 将二维数组写入文件中的特定行（空格分隔，无括号）

> ID：13648198
> 
> 赞同：1
> 
> 时间：2012-11-30T15:30:53.710
> 
> 标签：python, formatting

我对python相当陌生。基本上，我试图将一个二维数字数组插入到输入文件中以创建一个新的输出文件。

输入数据的格式如下：

```
!TITLE
0000 0000 0000 0000 0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000 0000 0000 0000 0000 
```

真的，我只是想用一个 3x1 数组替换一个特定的列，比如：

```
print(newcol_3) 
```

这给了我：

```
[[1111]
 [1111]
 [1111]] 
```

我的代码：

```
Inp_ptr = file('inp_file.dat', 'r')
Inp_data = Inp_ptr.readlines()

firstline = 1
for i in range(firstline,firstline+2):
  old_inp[i-firstline] = array(Inp_data[i].split()[0:12])

new_inp = zeros([3,12])
for i in range(0,2):
  new_inp[i] = [old_inp[i,0], old_inp[i,1], float(newcol_3[i]), old_inp[i,3], ... old_inp[1,11]] 
```

这给了我我的 3x12 阵列。要将其打印到我尝试过的文件中：

```
Out_ptr = file('out_file.dat', 'w')
Out_data = Inp_data

row0 = str(new_inp[0])
row1 = str(new_inp[1])
row2 = str(new_inp[2])

Out_data[firstline] = row0
Out_data[firstline+1] = row1
Out_data[firstline+2] = row2

for line in Out_data:
  Out_ptr.write(line) 
```

这让我有点接近，但输入仍然以数组（和多行）的形式出现，所以输出看起来像：

```
!TITLE
[  0000      0000      1111      0000      0000      0000
   0000      0000      0000      0000      0000      0000][  0000      0000      1111      0000      0000     0000
   0000      0000      0000      0000      0000      0000][  0000      0000      1111      0000      0000     0000
   0000      0000      0000      0000      0000      0000] 
```

我正在寻找的是：

```
!TITLE
0000 0000 1111 0000 0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 1111 0000 0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 1111 0000 0000 0000 0000 0000 0000 0000 0000 0000 
```

我在这里很迷茫，我在网上搜索并尝试了''.join和\n %等的各种组合。我也确信有一种更简单的方法来创建新数据集（我理解for循环所以我坚持我所知道的）。但我愿意接受所有建议。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T15:36:57.867

如果你的用例真的这么简单，你可以这样做：

```
with open('inputfile') as fin,open('outputfile','w') as fout:
    fout.write(next(fin))  #write first line directly to fout
    for line in fin:
        ll = line.split()
        ll[2] = '1111'
        fout.write(' '.join(ll)+'\n') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T15:35:15.393

当你`print`列出一个列表时，你会得到代表它的括号。您实际上想要在文件中结束的是字符串，最好使用`Out_ptr.write(''.join(line))`.

# java - 我是否应该允许在 Internet 上使用 SQL WHERE 子句作为 REST API 参数？

> ID：13648199
> 
> 赞同：1
> 
> 时间：2012-11-30T15:30:56.053
> 
> 标签：java, mysql, sql, ruby, security

我正在处理的项目有一个用 JRuby/Java 编写的 REST API，其端点可以访问 MySQL 数据库以检索许多记录。

我们需要允许客户端使用一列或多列过滤这些记录，包括布尔检查和范围值。

我们可以做到这一点的最简单方法是向 API 添加一个字符串参数，然后将其添加到 SQL 语句中。

总体而言，开发团队同意这是一个坏主意，但替代方法是提供几乎相同的过滤语法，将其转换为 SQL。SQL 注入参数的吸引力很强。

**所以我的问题是，在任何情况下这样做是安全的吗？**

特别是，如果 WHERE 子句预先被完全解析并被识别出来，我们是否可以考虑安全地使用它。或者至少，检查某些触发词，例如 DROP、SELECT 等。

此外，如果有人知道一个好的库可以充当中间人（将外部表达式翻译或解析为 WHERE 子句），那就太好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T15:37:06.633

OData 和 GData 协议已经以安全和标准的方式实现了此功能。您可以找到两者的服务器和客户端实现，用于 Ruby、PHP、MySQL 等。[在此处](http://www.odata.org/libraries#MySQL)查看 OData 库

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T15:47:02.383

除了安全隐患之外，允许任意 WHERE 子句是一个坏主意，因为它将“I”从“API”中取出——它不是一个接口。API 应该让用户无需了解实现的细节。像表名和列名。

如果客户端通过构建自己的 WHERE 子句与您的数据进行交互，那么您*永远无法更改数据库*。那里可能有包含这些语句的代码。如果错误或新功能要求您以一种会破坏现有客户端交互的方式更改数据库，那么您将被卡住。API 应该提供过滤功能，并将请求转换为对后端的调用，让您可以在不破坏 API 的情况下更改后端。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T15:45:15.197

撇开 SQL 注入问题不谈，您将直接以 API 的形式公开您的内部实现（选择的数据库 - MySQL*和您的表结构）。*

例如，如果您在后端更改为某些 NoSQL 类型的实现，您的面向公众的 API 将立即中断。同样，如果您重组数据库。即使在我不担心注入攻击的可能性/严重性的环境中，我也不会这样做。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T21:43:05.077

为此目的有许多 ORM，尤其是在 ruby​​ 中（activerecord，sequel）

您需要做的最基本的事情是转义字符串输入，如果您做得正确，这几乎可以防止后续注入。

如果您也不必直接将参数直接插入到后续语句中，它会有所帮助，而是检查它们的有效性，然后将它们映射到逻辑参数（这并不总是可能的）。例如，如果有一个 html 下拉列表，并且当您提交表单时，它会传递一些参数“firstitem”，将“firstitem”映射到一个 id 或其他您将用于搜索的 id，而不是使用用户提供的版本（假设这个映射不涉及数据库）。

# python - 更改函数中的每个 for 循环，以在每次迭代失败后自动执行错误处理

> ID：13648200
> 
> 赞同：3
> 
> 时间：2012-11-30T15:30:55.083
> 
> 标签：python, for-loop

这个问题来自[生成器中的捕获错误，然后继续](https://stackoverflow.com/questions/13645112/catch-errors-within-generator-and-continue-afterwards)

我有大约 50 个类似（但不同）的函数，它们试图从网站中提取 URL 等。因为每个网站都是不同的，每个功能都是不同的，而且因为网站往往会随着时间的推移而改变，所以这个代码是混乱的，不能被信任。

这是一个简化的示例，或者看第一个问题中的示例

```
def _get_units(self):
    for list1 in self.get_list1():
        for list2 in self.get_list2(list1):
            for unit in list2:
                yield unit 
```

我想用这个函数做的基本上是改变行为以匹配这个：

```
def _get_units(self):
    for list1 in self.get_list1():
        try:                 
            for list2 in self.get_list2(list1):
                try:
                    for unit in list2:
                        try:
                            yield unit
                        except Exception as e:
                            log_exception(e)
                except Exception as e:
                    log_exception(e)
        except Exception as e:
            log_exception(e) 
```

总之，我想把这个

```
for x in list:
    do_stuff(x) 
```

对此：

```
for x in list:
    try:
        do_stuff(x)
    except Exception as e:
        log_exception(e) 
```

对于`for`我的职能中的每一个。

但我想以pythonic的方式来做。我不希望`try:except`块分散在我需要更改的 50 个函数中。这可能吗？如果是这样，我怎样才能以最干燥的方式做到这一点，我可以在一个地方进行错误处理吗？

**更新：**这个问题以前包括一个`continue`与日志记录一起的语句，但正如 mgilson 指出的那样，这不是必需的。

**使用georgesl的答案更新2**，函数如下：

```
from contextlib import contextmanager

@contextmanager
def ErrorManaged():
    try:
        yield
    except Exception as e:
        log_exception(e)

def _get_units(self):
    for list1 in self.get_list1():
        with ErrorManaged():              
            for list2 in self.get_list2(list1):
                with ErrorManaged():
                    for unit in list2:
                        with ErrorManaged():
                            yield unit 
```

这确实更清洁。不过，单纯的装饰者会更好。谁能告诉我这是否可能？如果没有，我会接受georgesl的回答。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T16:06:46.380

您可能想要使用装饰器或更好[的上下文管理器](http://docs.python.org/2/library/contextlib.html#contextlib.contextmanager)：

```
from contextlib import contextmanager

def HandleError(func):

    def wrapped(*args, **kwargs):

        try:
            func(*args, **kwargs)
        except Exception:
            print "Bug on node #", args[0]

    return wrapped

@contextmanager
def ErrorManaged():
    try:
        yield
    except Exception:
        print "Oh noes, the loop crashed"

@HandleError
def do_something(x):
    print x
    if x==5:
        raise('Boom !')

with ErrorManaged():
    for x in range(10):
        do_something(x)
        if x == 7 :
            raise('aaaah !') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T15:47:32.470

我可能会“装饰”这些功能本身。如果您遵循 DRY 原则，大概会将它们存储在列表或其他东西中：

```
def decorate_function(func):
    def decorated(x):
        try:
            return func(x)
        except Exception as e:
            log_error(e)
    return decorated 
```

现在你可以用它来装饰你的函数，它会记录你的错误。请注意，这假定上述`continue`声明是不必要的。看起来我真的不习惯，但我可能会遗漏一些东西。

如果函数确实没有返回某些内容，那么您可以返回`True`或`False`取决于您是否遇到异常。你可以用它来编写你的`continue`逻辑。就像是：

```
if not decorated_function(x): continue 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T01:19:52.513

我对此进行了更多思考，真正满足我需求的唯一解决方案似乎是修改代码本身。所以这里是：

```
from contextlib import contextmanager
import inspect

@contextmanager
def ErrorManaged():
    try:
        yield
    except Exception as e:
        print e

def get_units():
    for x in range(-5,5):
        print(x)

        if x % 3 == 0:
            raise Exception("x nope")

        for y in range(-5,5):
            print("\t{}".format(y))

            if y % 3 == 0:
            raise Exception("y nope")

            for z in range(-5,5):
                print("\t\t{}".format(z))

                if z % 3 == 0:
                    raise Exception("z nope")

import re

def modify_get_units(get_units):    
    lines = inspect.getsourcelines(get_units)[0]
    add = "with ErrorManaged():\n"
    new = []
    tabsize = 0
    for c in lines[1]:
        if c == " ":
            tabsize += 1
        else:
            break

    count = 0
    for line in lines:
        new.append(" " * tabsize * count + line)
        m = re.match(r"^(\s+)for\s[()\w,]+\sin\s[^ :\n]+:\n$",line)
        if m:
            count += 1
            new.append(m.group(1) + " " * tabsize * count + add)

    return "".join(new)

oldfunc = inspect.getsource(get_units)
newfunc = modify_get_units(get_units)

#printing function bodies to show results

print(oldfunc)
print("\n\n\n")
print(newfunc)

#re-declare get_units
exec newfunc

#execute, but now now
#get_units() 
```

**输出：**

```
toon@ToonAlfrinkPC ~ $ python test.py
def get_units():
    for x in range(-5,5):
        print(x)

        if x % 3 == 0:
            raise Exception("x nope")

        for y in range(-5,5):
            print("\t{}".format(y))

            if y % 3 == 0:
                raise Exception("y nope")

            for z in range(-5,5):
                print("\t\t{}".format(z))

                if z % 3 == 0:
                    raise Exception("z nope")

def get_units():
    for x in range(-5,5):
        with ErrorManaged():
            print(x)

            if x % 3 == 0:
                raise Exception("x nope")

            for y in range(-5,5):
                with ErrorManaged():
                    print("\t{}".format(y))

                    if y % 3 == 0:
                        raise Exception("y nope")

                    for z in range(-5,5):
                        with ErrorManaged():
                            print("\t\t{}".format(z))

                            if z % 3 == 0:
                                raise Exception("z nope") 
```

感谢您帮助我到达那里！

# php - 按 ID 更改选定的下拉列表

> ID：13648201
> 
> 赞同：1
> 
> 时间：2012-11-30T15:30:55.783
> 
> 标签：php, javascript, jquery

我已经看到您可以按值更改选定的下拉项，但我想通过选项 ID 进行更改，因为这些值是动态创建的。我正在创建一个带有下拉菜单、问题部分和上一个/下一个按钮的调查表。下拉列表的值是在 php 数组中动态创建的。

我设置它的方式与此类似：

```
<select id="myDropdown">
    <option id="1" value="dynamicallycreated1"></option>
    <option id="2" value="dynamicallycreated2"></option>
    <option id="3" value="dynamicallycreated3"></option>
</select> 
```

选择是通过 php 创建的，以数组的索引作为 ID。页面上有上一个/下一个按钮可以从一个部分向后/向前移动。当用户单击下一个或上一个按钮时，我希望下拉菜单更改为适当的项目。我可以通过当前的 javascript 轻松获取索引，那么如何使用此索引作为 ID 更改下拉列表？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T15:34:11.130

在 JavaScript 中，只需将`selected`属性设置为`true`：

```
var opt = document.getElementById("1");
opt.selected = true; 
```

经过测试并与 Firefox 一起使用。

使用 jQuery，它将是：

```
$("#1").prop('selected', true); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T15:44:19.033

我同意 Lee Taylor 的观点，即您不应该使用 1,2,3 作为 Id 字段。您可以改为在`value`下拉列表的属性中使用这些值，例如

并使用 jquery 选择 value = 1 的元素

```
$('#myDropdown').val(1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T15:58:34.730

忘记`id`为您的`option`项目创建任何特殊的或更改值。只需使用 jQuery 来获取`index`. （请注意，索引开始于，`0`所以如果需要，只需添加`1`到此结果中。）

```
$('#myDropdown').find('option:selected').index(); 
```

HTML：

```
<select id="myDropdown">
    <option value="dynamicallycreated1">option one</option>
    <option value="dynamicallycreated2">option two</option>
    <option value="dynamicallycreated3">option three</option>
</select> 
```

# c# - 获取 ProcessModule.MainWindowHandle

> ID：13648204
> 
> 赞同：0
> 
> 时间：2012-11-30T15:31:05.383
> 
> 标签：c#, winapi, process

鉴于：

```
Process p; 
```

我可以执行以下操作：

```
IntPtr hWnd = p.MainWindowHandle; 
```

这给了我主模块主窗口的 HWnd。

我想做的是在这个过程中为另一个模块的主窗口获取 HWnd，可能是这样的：

```
IntPtr hWnd = p.Modules[0].MainWindowHandle; 
```

这样的事情可能吗？即使我必须使用 Win32API dll 也没关系。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T15:54:24.623

模块不拥有窗口。窗口归进程所有。严格来说，windows 与创建它们的线程有密切关系。但是由于可见窗口总是由进程的主 GUI 线程创建的，因此将窗口视为由进程拥有并没有什么坏处。

碰巧的是，进程中的任何模块都可能创建了由`MainWindowHandle`. 因此，所要求的实际上没有任何意义。

# java - 保存文件java

> ID：13648206
> 
> 赞同：1
> 
> 时间：2012-11-30T15:31:07.050
> 
> 标签：java, performance, file, save, jfilechooser

因为`File`对象构造函数需要a`String`来表示路径，考虑到其他原因，我选择制作一个临时文件，当用户要保存时，将临时文件的内容带到最终文件中，并要求用户给出路径那时。
我有一些我会解释的代码，但由于很多原因，我认为这不是做我想做的事情的最佳解决方案之一。

```
public String FileSavePath() throws NullPointerException {

        boolean acceptable = false;
        String theFilepath = null;

        do {
            theFilepath = null;
            File f = null;
            JFileChooser FileChooser = new JFileChooser();
            if (FileChooser.showSaveDialog(null) == JFileChooser.APPROVE_OPTION) {
                theFilepath = FileChooser.getSelectedFile().getAbsolutePath();
                f = FileChooser.getSelectedFile();
                //System.out.println(theFile);
                if (f.exists()) {
                    int result = JOptionPane.showConfirmDialog(this, "The file exists, overwrite?",
                            "Existing file", JOptionPane.YES_NO_CANCEL_OPTION);
                    if (result == JOptionPane.YES_OPTION) {
                        acceptable = true;
                    }

                }
            } else {
                acceptable = true;
            }
        } while (!acceptable);
        saved=true;
        return theFilepath;

    } 
```

并且该方法在保存函数中以这种方式调用：

```
 FileChannel sourceChannel=null;
    FileChannel targetChannel=null;

                try
                {
                    try{
                        file=new File(FileSavePath());
                    }
                    catch(NullPointerException npe)
                    {
                        System.exit(0);
                    }
                    sourceChannel = new FileInputStream(temp).getChannel();
                    targetChannel = new FileOutputStream(file).getChannel();
                    targetChannel.transferFrom(sourceChannel, 0, 
                            sourceChannel.size());
                }
                catch(IOException ioe)
                {
                    System.out.println(ioe.getMessage());
                }

                finally
                {   

                    try {
                        if (sourceChannel != null) {
                            sourceChannel.close();
                        }
                        if (targetChannel != null) {
                            targetChannel.close();
                        }
                    } catch (IOException e1) {
                        e1.printStackTrace();
                    }

                } 
```

基本上机制如下：所有数据都保存到一个临时文件中。当用户要保存时，会`JFileChooser`出现 a 并保存路径。然后初始化最终文件，将临时数据传递给最终文件，仅此而已。
如果用户在“我不确定我的代码是否有效或者是否有任何方法可以使它变得更好”期间未选择有效路径或在某处取消，则处理 NPE 很重要。

PS请不要费心告诉异常尚未处理，我知道这一点，但我想知道基本想法是否能有效地做应该做的事情。

# javascript - 淘汰赛不评估IE7中的表达式

> ID：13648209
> 
> 赞同：5
> 
> 时间：2012-11-30T15:31:17.943
> 
> 标签：javascript, internet-explorer, knockout.js, internet-explorer-7

当我在 Mozilla 中运行我的程序时，它会解析剔除表达式并显示可观察数组中的值。当我在 IE7 中执行相同操作时，它会显示敲除代码。

Mozilla 结果

```
value 1
value 2
value 3 
```

IE7 结果

```
function observable() { 
   if (arguments.length > 0) {
        // Write
        // Ignore writes if the value hasn't changed
        if ((!observable['equalityComparer']) || !observable['equalityComparer'](_latestValue, arguments[0])) {
            observable.valueWillMutate();
            _latestValue = arguments[0];
            if (DEBUG) observable._latestValue = _latestValue;
            observable.valueHasMutated();            
        }
        return this; // Permits chained assignments        
   }        
   else {
        // Read
        ko.dependencyDetection.registerDependency(observable); // The caller only needs to be notified of changes if they did a "read" operation
        return _latestValue;       
   }
} 
```

我怎样才能使它在 IE7 中正常工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T05:18:00.493

IE 浏览器不支持数组的 indexOf，这会导致 knockout.js 框架出现问题。

添加以下javascript，它可能会解决您的问题：

```
 //
    // IE browsers do not support indexOf method for an Array. Hence 
    // we add it below after performing the check on the existence of
    // the same.
    //
    if (!Array.prototype.indexOf)
    {
        Array.prototype.indexOf = function (obj, start)
        {
            for (var i = (start || 0), j = this.length; i < j; i++)
            {
                if (this[i] === obj)
                {
                    return i;
                }
            }
            return -1;
        };
    } 
```

# android - Galaxy sIII jb 4.1中的网络位置监听器

> ID：13648210
> 
> 赞同：0
> 
> 时间：2012-11-30T15:31:19.113
> 
> 标签：android, networking, location

在我的服务中，我每 X 分钟跟踪一次我的位置。我尝试

```
LocationManager lm=(LocationManager)getApplicationContext().getSystemService(LOCATION_SERVICE);
Criteria criteria = new Criteria();
criteria.setAccuracy(Criteria.ACCURACY_COARSE);

criteria.setAltitudeRequired(false);
criteria.setBearingRequired(false);        
String provider=lm.getBestProvider( criteria, true );
if (provider!=null){

    lm.requestLocationUpdates(provider,5000,1,locationListenerNetwork);
} 
```

使用网络位置，如果它不可用，我尝试使用 gps 位置。

问题是，当提供者可用时，我尝试询问一个位置

```
lm.requestLocationUpdates(provider,5000,0,locationListenerNetwork); 
```

其中 LocationListenerNetwork 是我的 LocationListener，但什么也没发生，我的

```
onLocationChanged(Location location) 
```

LocationListenerNetwork 内部永远不会被调用

如果我使用 GPS（具有 ACCESS_FINE_LOCATION 权限） onlocationchanged 被调用并且一切正常。

这只发生在 Galaxy S3 jb (4.1) 中。（正确设置）在更新之前，在其他智能手机上，一切正常：

我试穿了

*   银河 Nexus 4.2
*   银河 Nexus 4.1
*   连结 S 4.1
*   银河小号
*   Galaxy Note

我的代码在任何地方都可以正常工作，但在 S3 JB 中我无法理解如何解决。另一个奇怪的事情是，gmaps 也可以在没有 gps 的情况下完美地跟踪位置，所以这不可能是设备问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T08:33:09.207

这不是一个真正的答案，但它可能会有所帮助....

根据这篇文章：[Android 4.1.1 中的 NETWORK_PROVIDER 行为是否发生了变化？](https://stackoverflow.com/questions/12630413/has-network-provider-behavior-changed-in-android-4-1-1)

我和他在 Galaxy Nexus 上遇到了类似的问题 - 重新启动解决了这个问题。

# iphone - 在 iOS 中重新加载支持的界面方向

> ID：13648215
> 
> 赞同：3
> 
> 时间：2012-11-30T15:31:23.273
> 
> 标签：iphone, ios, uiviewcontroller, uiinterfaceorientation

考虑一个`UIViewController`基于其状态支持不同界面方向的界面，该状态可以根据用户输入而改变。

AFAIK，`supportedInterfaceOrientations`仅在设备方向更改时调用。有没有办法告诉应用程序它需要再次询问支持的界面方向，即使设备方向没有改变？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T00:39:36.837

You're correct. Basically you can only respond to an orientation change, not force it. But there is a trick you can use to fool the application to go through all the orientation callbacks.

You should have a ViewController which you created at the start of your app and set as the window's rootViewController. Remove that ViewController's view from its superview (which is the window) and immediately add it as a subview to the window again. Since the entire visible view hierarchy just changed, the app will go through all orientation callbacks again.

But I wouldn't rely on this too much if I were you, while it is logical for this to happen, you never know when Apple might change this. Now that I think of it, I haven't tested this in iOS 6 yet. It does work on iOS 4 and 5.

# php - 从外部网页获取变量值进行处理？

> ID：13648224
> 
> 赞同：0
> 
> 时间：2012-11-30T15:32:02.860
> 
> 标签：php, html, variables, post, get

让我首先说我对 PHP 几乎一无所知，但是，我认为这可能被证明是做我想做的事情的最佳方式。我想从外部页面获取变量的值，以便我可以处理它以在我的页面上创建图表和统计信息。我试图从中获取变量的示例页面（需要 Facebook 帐户）是 - [http://superherocity.klicknation.com/game/pages/battle_replay.php?battle=857337182](http://superherocity.klicknation.com/game/pages/battle_replay.php?battle=857337182)

变量名称是 fvars，它包含有关 2 个玩家用于攻击的数据、他们造成的伤害等数据。最终，我想要提供一个页面，其中包含一个玩家可以进入并插入他们的回放的表单链接（如上）并获得战斗的简洁详细的细分。

至少，如果有人可以向我解释如何在表单提交后以重播 url 作为输入来回显 fvars 的值，那将非常有帮助！我试过在这里查看一些 PHP 参考资料和其他帖子，但到目前为止已经丢失了。:(

感谢您的任何帮助或指导。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T15:59:26.030

您可以使用的一种方法是使用 Selenium。您需要设置 selenium 服务器和浏览器，然后编写一个 selenium 脚本来为您获取页面。这里的关键点是 selenium 可以通过 selenium 以编程方式运行带有 javascript、facebook 登录等的 firefox 客户端，以及您在普通 firefox 上拥有的一切。

我在 Linux 环境中运行 selenium 并通过 php cli 脚本控制它。我运行 java selenium-server-standalone 以及 framebuffered X 和 firefox。PHP 单元测试库已经有了一个扩展，尽管你显然不需要它来进行测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T15:40:23.397

您可以像这样获取任何网页的内容：

```
$homepage = file_get_contents('http://www.example.com/');
echo $homepage; 
```

然后只需使用正则表达式或基本搜索在 $homepage 中找到您需要的变量。问题是您需要通过 Facebook 登录。我知道目前没有使用 PHP 动态执行此操作的方法。麦克风

编辑：找到一个解决这个确切问题的 SO 问题 -[从需要登录的网站抓取？](https://stackoverflow.com/questions/4997147/scraping-from-a-website-that-requires-a-login)

# terminal - 从终端杀死iOS模拟器

> ID：13648225
> 
> 赞同：16
> 
> 时间：2012-11-30T15:32:04.083
> 
> 标签：terminal, jenkins, simulator, kill, prompt

我正在尝试从终端控制台终止 iOS 模拟器（需要在 Jenkins 中集成自动 UI 测试），但每次尝试命令时：

```
killall SimulatorBridge 
```

显示等待操作的提示： ![在此处输入图像描述](../Images/8b987d939f8915bca1fcf472441a1040.png)

问题是在对提示采取行动之前，模拟器不会被关闭。如何摆脱它？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2019-01-25T06:18:32.003

关闭模拟器的正确方法是`xcrun simctl shutdown all`.

我不建议通过杀死 CoreSimulator 来关闭模拟器。

Simulator.app 只是一个查看器（从 Xcode 9 开始）。它不需要启动，因此也不需要关闭。它将自动响应设备启动和关闭。

您还可以在退出时按住 Option 以从正在运行的模拟器中分离而不关闭它们。选中复选框以使其成为默认行为。

同样，您可以在通过 File 关闭窗口时按住 Control，Close 在关闭单个模拟器的窗口时获得类似的选择。

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2012-11-30T15:44:21.717

利用`killall "iPhone Simulator"`

使用 XCode 6，使用`killall "iOS Simulator"`（感谢@gempewsaw）

使用 XCode 7，使用`killall "Simulator"`（感谢@Stanislaw）

使用 XCode 8，杀死 Simulator 进程有时是不够的，还需要杀死进程`com.apple.CoreSimulator.CoreSimulatorService`（感谢@bensnider）

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-12-12T21:06:47.920

我同意上面的答案。只是想补充一点，当没有模拟器可以杀死时，我注意到我的 Jenkins 工作失败了。我通过像这样添加它来解决这个问题：

```
killall "iOS Simulator" || echo "No matching processes belonging to you were found" 
```

祝你好运！

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-30T15:46:18.043

请试试

```
killall -9 "iPhone Simulator" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-06-23T14:28:51.733

您可以杀死从命令行运行的模拟器。

`killall "Simulator" || true`

# java - Long 数组、整数数组和 ArrayList 的内存使用情况

> ID：13648230
> 
> 赞同：0
> 
> 时间：2012-11-30T15:32:34.647
> 
> 标签：java, memory

无论我使用`Long[]`,`Integer[]`还是`ArrayList<Integer>`, 为什么它们都返回相同的内存使用量？

```
System.out.println("Memory Usage : " + Runtime.getRuntime().totalMemory()/(1024*1024));
System.out.println("Memory Usage : " + (Runtime.getRuntime().totalMemory() - Runtime.getRuntime().freeMemory())/(1024*1024));

//Long[] aa = new Long[70000000];
Integer[] bb = new Integer[70000000];
//ArrayList<Integer> a = new ArrayList<Integer>(70000000);

System.gc();

System.out.println("Memory Usage : " + Runtime.getRuntime().totalMemory()/(1024*1024));
System.out.println("Memory Usage : " + (Runtime.getRuntime().totalMemory() - Runtime.getRuntime().freeMemory())/(1024*1024)); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-30T15:37:50.897

> 在上述语句中，无论我使用 Long[]、Integer[] 还是 ArrayList，为什么它们都给出相同的内存使用量？

这很有意义。在所有情况下，您基本上都在分配一个 70000000 * （JVM 上的引用大小）的数组。参考的大小与`Integer`参考的大小相同，参考的大小与`Long`参考的大小相同`Object`。在这种`ArrayList`情况下，对象本身的额外开销非常小`ArrayList`，但这非常小 - 根据 Louis 的评论很容易解释。

如果您实际上*填充*了这些数组，创建了and的*实例*，*那么*您会看到不同之处。同样，如果您创建了 a vs an ，您会看到不同之处。`Long``Integer`*`long[]``int[]`*

# asp.net - 遍历 IHtmlElementCollection

> ID：13648231
> 
> 赞同：1
> 
> 时间：2012-11-30T15:32:38.313
> 
> 标签：asp.net, vb.net

我有一个 VB 网络应用程序，它需要从 Internet 上的现有网页中读取信息。因此我使用 mshtml 库。我将 html 读入 ihtmldocument3 界面。之后，我遍历 ihtmlelementcollection 并且在 Visual Studio 2010 调试器中一切正常。至少，第一次。当我第二次调试代码时，在迭代了几个元素之后，下一个元素什么都不返回，我得到一个异常。（当我闯入代码时， ihtmlelementcollection 显示 0 个项目。）当我重命名所有变量时，它运行正常，但同样，只是第一次。

这是我用来调试的代码。我已经概述了实际代码，因为它会响应异常（空引用）。我是否需要手动发布集合或其他东西，还是我在做一些愚蠢的事情？

```
'global variable
Private tables as IHTMLElementCollection
...........................................
        Dim tableChildren As IHTMLElementCollection = tables(3).children
        Dim trElements As IHTMLElementCollection = tableChildren.item(0).getElementsByTagName("tr")

        Dim intCount As Integer 'just for debugging purposes
        For Each element As IHTMLElement In trElements
            intCount += 1 'for debugging purposes
            Debug.Print(intCount.ToString & vbNewLine & element.innerHTML)
            'strLine1 = element.children(0).innerText
            'strLine2 = element.children(1).innerText
            'and so on...
        Next 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T22:10:08.683

我假设此时您已经以某种方式解决了问题，但我认为我会建议[HtmlAgilityPack](http://htmlagilitypack.codeplex.com/)。它的优点是只支持这种类型的场景，并且（据我所知）是一个原生的 .NET 库，而不是基于 COM 的。它可能更适合您的情况。

# vim - Ctrl+S（水平分割）在 vim 中不能与 Command-T 一起使用

> ID：13648237
> 
> 赞同：11
> 
> 时间：2012-11-30T15:32:51.903
> 
> 标签：vim, ubuntu, archlinux

我无法让水平分割工作。Ctrl+enter 什么都不做，Ctrl+S 什么都不做。

我已经在谷歌上搜索了一下，到目前为止我发现的唯一解决方案与 OSX 有关。

在 Arch Linux 和 Ubuntu 上，都有同样的问题（但也有相同的配置）。

我没有使用 Janus 或类似的东西，只是一个非常基本的配置

```
set t_Co=256
set tabstop=2
set expandtab
set shiftwidth=2
set fileencoding=utf-8
set encoding=utf-8
set termencoding=utf-8
set showcmd
filetype plugin indent on
"color molokai
syntax enable
autocmd! BufNewFile * silent! 0r ~/.vim/skel/tmpl.%:e
set laststatus=2 " Always show the statusline

set backspace=indent,eol,start  " backspace through everything in insert mode

"" Searching
set hlsearch                    " highlight matches
set incsearch                   " incremental searching
set ignorecase                  " searches are case insensitive...
set smartcase                   " ... unless they contain at least one capital letter

call pathogen#infect()
colorscheme jellybeans
" use comma as <Leader> key instead of backslash
let mapleader=","

" Double <Leader> to switch between buffers
nnoremap <leader><leader> <c-^>
" double percentage sign in command mode is expanded
" to directory of current file - http://vimcasts.org/e/14
cnoremap %% <C-R>=expand('%:h').'/'<cr>

map <leader>f :CommandTFlush<cr>\|:CommandT<cr>
map <leader>F :CommandTFlush<cr>\|:CommandT %%<cr> 
```

`[~]$ ls .vim/bundle
rbenv:system command-t jellybeans.vim snipmate-snippets tlib_vim vim-addon-mw-utils vim-powerline vim-snipmate`

我希望有人能够对此有所了解，这真的令人沮丧。

不完全确定出了什么问题，但它偶尔会起作用，但现在根本不行。

按 CTRL+S 什么都不做，shift+enter 只是在当前缓冲区中正常打开它，而 ctrl+enter 只是在 Command-T 中跳下搜索结果列表。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-30T16:00:47.983

不幸的是，在大多数终端中，Vim 无法区分`Enter`与`Ctrl`or的组合及其组合；`Shift`这些仅在 GVIM 中有效。

终端的流控命令可能会干扰Ctrl-S和Ctrl-Q；这可以修复（在终端中，而不是在 Vim 中！）

```
stty start undef stop undef 
```

在 ~/.bashrc、~/.zshrc 等中。

# android - AVD 管理器不会打开，虽然 SDK 管理器打开并工作

> ID：13648240
> 
> 赞同：2
> 
> 时间：2012-11-30T15:33:16.250
> 
> 标签：android, avd

我有一个类似于这个问题的问题：

[AVD 管理器不启动](https://stackoverflow.com/questions/13470388/avd-manager-dont-start)

但我不明白答案以及它是如何工作的。我在任何地方都找不到任何 AVD。

我的 AVD 管理器一直运行良好，然后突然停止了。在我添加到 Kindle Fire 模拟器之前，我不能 100% 确定它是否运行良好，因为我已经设置了一些 AVD，并且在添加之前没有尝试创建新的。

我更新了 ADT，我很确定这是一个 android 配置问题，而不是 Eclipse。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-12T23:53:54.497

我遇到了同样的问题，然后我意识到我在左上角运行了 Java EE，而不仅仅是 Java。在写手的角落，退出 Java EE 并启动一个 Java EE，它就会有您寻找的 AVD 管理器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T22:36:46.437

是的，我也有这个。它是由损坏的 AVD 图像引起的。我按照以下 Google 代码问题的说明（并添加了评论）；

[http://code.google.com/p/android/issues/detail?id=41024](http://code.google.com/p/android/issues/detail?id=41024)

按照那里的说明，享受剩下的 AVD 不足......：S

# php - 为什么我不能在 PHP 的 foreach 循环中设置变量？

> ID：13648242
> 
> 赞同：0
> 
> 时间：2012-11-30T15:33:23.137
> 
> 标签：php

我正在尝试在`foreach()`语句中设置变量，但它一直在消亡。

如果我这样做，一切都很好。

```
foreach($array as $key => $value)
    {
         echo '<tr>';
            echo '<td><a href="http://mgoode.com/index.php?option=com_mls&view=mls&mlsnum=' . $value['1'] . '">' . $value['1'] . '</a></td>';
         echo '</tr>';
    } 
```

但是当我这样做时，它不想工作。

```
foreach($array as $key => $value)
    {
        $mls = echo '' . $value['1'] . '';
         echo '<tr>';
            echo '<td><a href="http://mgoode.com/index.php?option=com_mls&view=mls&mlsnum=' $mls '">' $mls '</a></td>';
         echo '</tr>';
    } 
```

语法方面，我看不出这些语句有什么不同。我也试过`$mls = $value['1'];`了，也不想工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T15:35:12.000

当然，您在抱怨第二种情况时遇到了语法错误，对吗？如果你说“它一直在死去”，你应该准确地告诉我们当某物死去时会发生什么。更重要的是，*您*应该阅读语法错误并考虑它所说的内容。这些错误是描述性的，因此您可以找出问题所在。

在第二种情况下，您没有将字符串与`.`运算符连接起来。

```
echo '<td><a href="http://mgoode.com/index.php?option=com_mls&view=mls&mlsnum=' $mls '">' $mls '</a></td>'; 
```

应该

```
echo '<td><a href="http://mgoode.com/index.php?option=com_mls&view=mls&mlsnum=' . $mls . '">' . $mls . '</a></td>'; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T15:35:31.673

```
 $mls = echo '' . $value['1'] . ''; 
```

应该

```
$mls =   $value['1'] ;
echo $mls; 
```

和

```
 echo '<td><a href="http://mgoode.com/index.php?option=com_mls&view=mls&mlsnum=' $mls '">' $mls '</a></td>' 
```

应该

```
echo '<td><a href="http://mgoode.com/index.php?option=com_mls&view=mls&mlsnum=' . $mls . '">' . $mls . '</a></td>'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T15:43:40.343

您的第二个代码块应该看起来更像这样：

```
foreach($array as $key => $value)
{
    $mls = (string) $value['1'];
    echo '<tr>';
    echo '<td><a href="http://mgoode.com/index.php?option=com_mls&amp;view=mls&mlsnumamp;=' , $mls , '">'  , $mls , '</a></td>';
    echo '</tr>';
} 
```

*   当您键入时，`$var = echo "something"`您没有为该变量分配任何值。相反，您正在输出该字符串 -`echo`没有[返回值](http://php.net/manual/en/function.echo.php)。
*   您可以将变量[类型转换](http://php.net/manual/en/language.types.type-juggling.php)为字符串，而无需附加和前置空字符串。
*   您可以使用[更少的开销](http://www.fusionswift.com/2010/05/php-concatenation-benchmark-comma-vs-period/)`,`一个接一个地回显多个字符串。
*   您应该使用 HTML 实体作为 & 符号，即使它们在属性值中
*   （最后）您实际上并没有将变量连接到第三个`echo`.

# visual-studio-2010 - 如何关闭由母版页名称属性自动生成的asp控件asp.net 4网站

> ID：13648246
> 
> 赞同：1
> 
> 时间：2012-11-30T15:33:24.833
> 
> 标签：visual-studio-2010, .net-4.0

例如我有页面，这是她的内容

```
<asp:Content runat="server" ContentPlaceHolderID="MenuHeaderContent" ID="MenuPage">
<asp:RadioButton Text="Edit file name" runat="server" GroupName="renameOrRaplace"
                                        ID="chooseRen" CssClass="radio" />
</asp:Content> 
```

我已经关闭了自动生成 ID，但现在我对控件的自动生成名称有疑问我的意思是 GroupName="renameOrRaplace" 的 [input] 的名称必须是 name="renameOrRaplace" 但不是 name="MenuHeaderContent$renameOrRaplace" 如何我可以修复它，但不能通过javascript？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T17:03:02.183

只需将 name="renameOrRaplace" 添加到服务器端 ASP.NET 页面标记，而不是使用 GroupName 属性

```
<asp:RadioButton Text="Edit file name" runat="server" name="renameOrRaplace"
                                        ID="chooseRen" CssClass="radio" />
</asp:Content> 
```

# c# - 条件表达式中的数据类型不匹配

> ID：13648247
> 
> 赞同：1
> 
> 时间：2012-11-30T15:33:30.917
> 
> 标签：c#, asp.net, ms-access

我正在尝试根据特定的选择 ID 填充数据集，但出现错误

```
Data type mismatch in criteria expression. 
```

不完全确定为什么我有这个错误。

```
conn = new OleDbConnection(@"Provider=Microsoft.Jet.OleDb.4.0;
                                Data Source =" + Server.MapPath("App_Data\\HarryPothead.mdb"));
        conn.Open();

        DataSet ds = new DataSet();

        OleDbDataAdapter dba = new OleDbDataAdapter("SELECT * FROM [Person] WHERE [StatusIdFrn] = '" + statusID + "'", conn);
        dba.Fill(ds, "PersonName");
        DataTable dt = ds.Tables["PersonName"];

        drpPerson.DataSource = ds.Tables[0];
        drpPerson.DataTextField = "PersonName";
        drpPerson.DataBind();

        conn.Close(); 
```

关于如何克服这一点的建议。

我从中选择的数据库是一个 Access 数据库，我从三个字段中选择表，即 AutoNumber 类型的 PersonId、Text 类型的 PersonName 和 Number 数据类型的 StatusIdFrn。（drpPerson 是 DropDownList 控件)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T15:37:03.177

改变这个：

```
"SELECT * FROM [Person] WHERE [StatusIdFrn] = '" + statusID + "'" 
```

对此：

```
"SELECT * FROM [Person] WHERE [StatusIdFrn] = " + statusID + "" 
```

由于 [StatusIdFrn] 是数字，因此您需要丢弃单引号，因为它们表示文本类型。

# firebug - 为什么我看不到带有 firebug 的嵌入式 javascript？

> ID：13648248
> 
> 赞同：1
> 
> 时间：2012-11-30T15:33:57.933
> 
> 标签：firebug

下载了萤火虫并喜欢它。

但是有一个问题：您可以使用 firebug 查看/调试在 .js 文件（即 html、cshtml 等）中找不到的脚本吗？

1）。如果我在浏览器页面上查看源代码，我会看到我的 javascript（运行良好）

2）。从萤火虫， html 选项卡只显示 html

3）。在 firebug 中，脚本选项卡只显示 .js 文件。

我必须缺少一些基本的东西......我希望能够设置断点等......但只能在 .js 文件中找到脚本。

所有建议表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T03:54:40.887

I have always been able to find the inline scripts in the Script panel.

A workaround would be, if you have access to the script, to write a "debugger;" statement there to force Firebug to halt where you want.

# svn - 控制过时的版本控制

> ID：13648249
> 
> 赞同：2
> 
> 时间：2012-11-30T15:33:59.157
> 
> 标签：svn, version-control

我目前正在监督一个传递给我的系统，版本控制是以这种方式完成的：

每次开发人员（只有一个）想要创建快照时，他都会将整个文件夹复制到一个目录并给它一个编号。所以目前我持有的文件夹范围从 1 到 50，我想为此开始使用 svn。

除了从上一个版本创建一个新的主干之外，我还想从那个版本创建一个历史记录。我尝试复制 versino 1，提交，删除它，将 v2 粘贴到位，提交更改，它运行良好，除了一个问题（文件删除没有转换为 svn 删除）。

您将如何自动执行此任务？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T15:45:25.113

你所描述的就是你需要做的。您可以将其自动化（复制项目对脚本来说是微不足道的）。要捕获更改（添加、删除等），您可以使用[svn_load_dirs.pl](http://svnbook.red-bean.com/en/1.7/svn.advanced.vendorbr.html#svn.advanced.vendorbr.svn_load_dirs)来处理检测、执行和提交它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T15:47:05.870

我不知道您是否在 Windows 上，但是 TortoiseSVN 在您提交时会列出已删除的文件并允许检查它们是否有 SVN 删除。

否则，您可以查看以下问题：[如何从存储库中删除所有已删除的文件？](https://stackoverflow.com/questions/4608798/how-to-remove-all-deleted-files-from-repository)

# .net - 自定义 Windows 窗体控件是否必须放在单独的项目中？

> ID：13648251
> 
> 赞同：1
> 
> 时间：2012-11-30T15:34:07.047
> 
> 标签：.net, vb.net, forms, user-interface, controls

我有一个 UserContol，它只是 GroupBox 中的一组 9 个文本框，它们代表 3x3 矩阵的元素。我试图将此控件添加到工具箱中，以便可以使用设计器拖放它，但我不知道如何。我已经看到了许多关于如何使用自定义控件添加整个 .dll 的说明，但我只想添加一对二。我必须为控件和主程序设置单独的项目吗？如果是这样，为什么要这样设计？如果我想在我的控件中编写想要引用在我的主项目中定义的类型的方法怎么办？

谢谢亚历克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T15:43:46.010

如果您的主项目中有自定义控件需要的类型，最佳做法是将这些类型拆分到它们自己的项目中，并从主项目和自定义控件项目中引用该项目。当然，这可能是矫枉过正:)

在您可以将自定义控件添加到工具箱之前，它们所在的项目必须已成功构建。

# c# - 实现快速排序算法

> ID：13648252
> 
> 赞同：20
> 
> 时间：2012-11-30T15:34:10.133
> 
> 标签：c#, algorithm, quicksort

我从这本书中找到了快速排序算法

![](../Images/d8989b7ddf6ddc453a883681f9d300a2.png)

这是算法

```
QUICKSORT (A, p, r)
if p < r
    q = PARTITION(A, p, r)
    QUICKSORT(A, p, q-1)
    QUICKSORT(A, q+1, r)

PARTITION(A, p, r)
x=A[r]
i=p-1
for j = p to r - 1
  if A <= x
     i = i + 1
     exchange A[i] with A[j]
exchange A[i+1] with A[r]
return i + 1 
```

我做了这个c#代码：

```
private void quicksort(int[] input, int low, int high)
{
    int pivot_loc = 0;

    if (low < high)
        pivot_loc = partition(input, low, high);
    quicksort(input, low, pivot_loc - 1);
    quicksort(input, pivot_loc + 1, high);
}

private int partition(int[] input, int low, int high)
{
    int pivot = input[high];
    int i = low - 1;

    for (int j = low; j < high-1; j++)
    {
        if (input[j] <= pivot)
        {
            i++;
            swap(input, i, j);
        }
    }
    swap(input, i + 1, high);
    return i + 1;
}

private void swap(int[] ar, int a, int b)
{
    temp = ar[a];
    ar[a] = ar[b];
    ar[b] = temp;
}

private void print(int[] output, TextBox tbOutput)
{
    tbOutput.Clear();
    for (int a = 0; a < output.Length; a++)
    {
        tbOutput.Text += output[a] + " ";
    }
} 
```

当我像这样调用函数时，`quicksort(arr,0,arr.Length-1);`我得到这个错误`An unhandled exception of type 'System.StackOverflowException' occurred`，它传递了空数组......当像这样调用函数时，我在这一行`quicksort(arr,0,arr.Length);`得到错误，但数组成功传递。`Index was outside the bounds of the array.``int pivot = input[high];`

我也想像这样打印它，`print(input,tbQuick);`但是在哪里放置它以便在快速排序完成时打印？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-11-30T15:36:50.737

您没有正确实现基本情况终止，这导致`quicksort`永远不会停止使用长度为 0 的子列表递归到自身。

改变这个：

```
if (low < high)
    pivot_loc = partition(input, low, high);
quicksort(input, low, pivot_loc - 1);
quicksort(input, pivot_loc + 1, high); 
```

对此：

```
if (low < high) {
    pivot_loc = partition(input, low, high);
    quicksort(input, low, pivot_loc - 1);
    quicksort(input, pivot_loc + 1, high);
} 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-11-30T15:49:12.487

除了 Deestan 的回答，你也有这个错误：

```
for (int j = low; j < high-1; j++) 
```

它应该是：

```
for (int j = low; j < high; j++) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-07T13:39:44.537

以防万一您想要一些较短的快速排序代码：

```
 IEnumerable<int> QuickSort(IEnumerable<int> i)
    {
        if (!i.Any())
            return i;
        var p = (i.First() + i.Last) / 2 //whichever pivot method you choose
        return QuickSort(i.Where(x => x < p)).Concat(i.Where(x => x == p).Concat(QuickSort(i.Where(x => x > p))));
    } 
```

当然，用任何合适的方法获取 p (pivot)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-08-03T08:14:09.800

这是快速排序算法的最短实现（没有`StackOverflowException`）

```
IEnumerable<T> QuickSort<T>(IEnumerable<T> i) where T :IComparable
{
    if (!i.Any()) return i;
    var p = i.ElementAt(new Random().Next(0, i.Count() - 1));
    return QuickSort(i.Where(x => x.CompareTo(p) < 0)).Concat(i.Where(x => x.CompareTo(p) == 0)).Concat(QuickSort(i.Where(x => x.CompareTo(p) > 0)));
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-02-01T07:09:33.143

一个简单的快速排序实现。

[https://github.com/bharathkumarms/AlgorithmsMadeEasy/blob/master/AlgorithmsMadeEasy/QuickSort.cs](https://github.com/bharathkumarms/AlgorithmsMadeEasy/blob/master/AlgorithmsMadeEasy/QuickSort.cs)

```
using System;
using System.Collections.Generic;
using System.Linq;

namespace AlgorithmsMadeEasy
{
    class QuickSort
    {
        public void QuickSortMethod()
        {
            var input = System.Console.ReadLine();
            string[] sInput = input.Split(' ');
            int[] iInput = Array.ConvertAll(sInput, int.Parse);

            QuickSortNow(iInput, 0, iInput.Length - 1);

            for (int i = 0; i < iInput.Length; i++)
            {
                Console.Write(iInput[i] + " ");
            }

            Console.ReadLine();
        }

        public static void QuickSortNow(int[] iInput, int start, int end)
        {
            if (start < end)
            {
                int pivot = Partition(iInput, start, end);
                QuickSortNow(iInput, start, pivot - 1);
                QuickSortNow(iInput, pivot + 1, end);
            }
        }

        public static int Partition(int[] iInput, int start, int end)
        {
            int pivot = iInput[end];
            int pIndex = start;

            for (int i = start; i < end; i++)
            {
                if (iInput[i] <= pivot)
                {
                    int temp = iInput[i];
                    iInput[i] = iInput[pIndex];
                    iInput[pIndex] = temp;
                    pIndex++;
                }
            }

            int anotherTemp = iInput[pIndex];
            iInput[pIndex] = iInput[end];
            iInput[end] = anotherTemp;
            return pIndex;
        }
    }
}

/*
Sample Input:
6 5 3 2 8

Calling Code:
QuickSort qs = new QuickSort();
qs.QuickSortMethod();
*/ 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-12-01T11:06:48.497

```
Code Implemented with Iteration With last element as Pivot
<code>https://jsfiddle.net/zishanshaikh/5zxvwoq0/3/    </code>

function quickSort(arr,l,u) {
 if(l>=u)
 {
  return;
 }

var pivot=arr[u];
var pivotCounter=l;
for(let i=l;i<u;i++)
{
    if(arr[i] <pivot )
    {
      var temp= arr[pivotCounter];
      arr[pivotCounter]=arr[i] ;
      arr[i]=temp;
      pivotCounter++;
    }
}

var temp2= arr[pivotCounter];
      arr[pivotCounter]=arr[u] ;
      arr[u]=temp2;

quickSort(arr,pivotCounter+1,u);
quickSort(arr,0,pivotCounter-1);

}

<code>https://jsfiddle.net/zishanshaikh/exL9cdoe/1/</code>

Code With first element as Pivot

//Logic For Quick Sort
function quickSort(arr,l,u) {
 if(l>=u)
 {
  return;
 }

var pivot=arr[l];
var pivotCounter=l+1;
for(let i=l+1;i<u;i++)
{
    if(arr[i] <pivot )
    {
      var temp= arr[pivotCounter];
      arr[pivotCounter]=arr[i] ;
      arr[i]=temp;
      pivotCounter++;
    }
}
var j=pivotCounter-1;
var k=l+1;
while(k<=j)
{
var temp2= arr[k-1];
      arr[k-1]=arr[k] ;
      arr[k]=temp2;
      k++;
      }

      arr[pivotCounter-1]=pivot;

quickSort(arr,pivotCounter,u);
quickSort(arr,0,pivotCounter-2);

} 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2020-05-16T21:36:14.573

QuickSort 的简单通用 C# 实现，可以使用第一个或最后一个值或任何其他中间值作为枢轴

```
using System;

namespace QuickSort
{
    class Program
    {
        static void Main(string[] args)
        {
            int[] arInt = { 6, 4, 2, 8, 4, 5, 4, 5, 4, 5, 4, 8, 11, 1, 7, 4, 13, 5, 45, -1, 0, -7, 56, 10, 57, 56, 57, 56 };
            GenericQuickSort<int>.QuickSort(arInt, 0, arInt.Length - 1);

            string[] arStr = { "Here", "Is", "A", "Cat", "Really", "Fast", "And", "Clever" };
            GenericQuickSort<string>.QuickSort(arStr, 0, arStr.Length - 1); ;

            Console.WriteLine(String.Join(',', arInt));
            Console.WriteLine(String.Join(',', arStr));

            Console.ReadLine();
        }

    }

    class GenericQuickSort<T> where T : IComparable
    {

        public static void QuickSort(T[] ar, int lBound, int uBound)
        {
            if (lBound < uBound)
            {
                var loc = Partition(ar, lBound, uBound);
                QuickSort(ar, lBound, loc - 1);
                QuickSort(ar, loc + 1, uBound);
            }
        }

        private static int Partition(T[] ar, int lBound, int uBound)
        {
            var start = lBound;
            var end = uBound;

            var pivot = ar[uBound];

            // switch to first value as pivot
            // var pivot = ar[lBound];

            while (start < end)
            {

                while (ar[start].CompareTo(pivot) < 0)
                {
                    start++;
                }

                while (ar[end].CompareTo(pivot) > 0)
                {
                    end--;
                }

                if (start < end)
                {
                    if (ar[start].CompareTo(ar[end]) == 0)
                    {
                        start++;
                    }
                    else
                    {
                        swap(ar, start, end);
                    }
                }
            }

            return end;
        }

        private static void swap(T[] ar, int i, int j)
        {
            var temp = ar[i];
            ar[i] = ar[j];
            ar[j] = temp;
        }
    }
} 
```

输出：

-7,-1,0,1,2,4,4,4,4,4,4,5,5,5,5,6,7,8,8,10,11,13,45,56, 56,56,57,57

A,And,Cat​​,聪明,快速,Here,Is,真的

这里要注意的一件重要事情是，这个经过优化的简单代码可以正确处理重复项。我尝试了几个发布的快速排序代码。那些没有为此（整数数组）输入提供正确的结果或只是挂起，例如[https://www.w3resource.com/csharp-exercises/searching-and-sorting-algorithm/searching-and-sorting-algorithm-exercise -9.php](https://www.w3resource.com/csharp-exercises/searching-and-sorting-algorithm/searching-and-sorting-algorithm-exercise-9.php)和[http://www.softwareandfinance.com/CSharp/QuickSort_Iterative.html](http://www.softwareandfinance.com/CSharp/QuickSort_Iterative.html)。因此，如果作者也想使用处理重复的代码，这将是一个很好的参考。

# javascript - 使用 javascript 打开萤火虫检查器

> ID：13648257
> 
> 赞同：1
> 
> 时间：2012-11-30T15:34:22.663
> 
> 标签：javascript, firefox, firebug

从一个小书签我需要打开萤火虫并检查一个元素。

我知道萤火虫有一个命令“检查”，但似乎不可能从 javascript 执行这个命令。

Firebug 可以使用新的 firefox 命令行来驱动……但似乎我们无法从 javascript 执行命令行。

如果你有想法？

* * *

我有一个小书签，可以在 HTML 代码中找到错误。小书签列出了所有错误的元素。如果用户点击一个元素，我想在萤火虫检查器中显示它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T15:40:30.713

不确定您到底想在这里实现什么。如果您尝试调试自己的代码，请使用 javascript“调试器”命令使 firebug 在给定的代码行上中断。

如果您希望触发 Firebug 在最终用户的浏览器中打开，那么这会导致用户混淆，并且此选项可能会带来安全风险。

无论如何，如果萤火虫被停用，那么它就无法响应任何事情，因此您将无法执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-13T10:43:03.737

您只需在浏览器中按 F12 即可打开 FireBug

# soap - Jira4r 在项目中查找用户

> ID：13648260
> 
> 赞同：0
> 
> 时间：2012-11-30T15:34:27.123
> 
> 标签：soap, jira

如何找到项目中的用户或项目组角色中的用户？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T13:47:10.197

```
project = @jira.getProjectByKey('PROJCODe')
devs = @jira.getProjectRoles[2]
@jira.getProjectRoleActors(devs,proj).roleActors[0].users 
```

# php - PropelORM v1 多数据库

> ID：13648268
> 
> 赞同：10
> 
> 时间：2012-11-30T15:34:56.227
> 
> 标签：php, propel

将 PropelORM 设置为与多个数据库一起使用时，我几乎没有问题。我在文档中找不到任何有用的东西。

1.  从多个数据库生成模式

    我更喜欢先更改数据库架构然后运行

    ```
    $ propel-gen . reverse 
    ```

    获取*schema.xml*。如果我的系统包含多个数据库怎么办？它可以生成多个模式吗？我从文档中知道*buildtime-conf.xml*必须创建，但它对我没有任何作用。

2.  生成类

    假设我创建了不同的模式*blog.schema.xml*和*platform.schema.xml*。是否有可能：

    1.  每个模式都有不同的类前缀？在*build.properties*我可以设置`propel.classPrefix`，但这将适用于每个模式。

    2.  每个架构都有不同的项目名称？再次在我可以设置的*build.properties*`propel.project`中，这将在 classes 目录中创建某个目录。现在所有班级都将去同一个地方。如果我在两个模式中使用相同的表名，一个类将覆盖另一个。

我可以自己解决的解决方案是为某个数据库设置 2 个不同的目录，但是我更喜欢更优雅的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T01:54:28.277

`<database>`您可以从您的架构中发布该行吗？

只要您具备以下条件：

```
<database package="blog" name="blog" defaultIdMethod="native"> 
```

在您的 blog.schema.xml 中，它应该为您生成一个新目录。但是，如果您让延迟加载这些东西，您是对的，您会遇到冲突，所以我只是手动在我的表中预先添加了一些东西`schema.xml`（这可能不是处理事情的最有效的方法）。

但是您可以执行以下操作：

1.  在 blog.schema.xml 中：

    ```
     <table name="users" phpName="blogUsers" idMethod="native"> 
    ```

2.  在 platform.schema.xml 中：

    ```
     <table name="users" phpName="platformUsers" idMethod="native"> 
    ```

这对我来说很好。

# file-io - 如何使用 Server.MapPath 在经典 asp 中获取网络位置

> ID：13648271
> 
> 赞同：0
> 
> 时间：2012-11-30T15:35:01.300
> 
> 标签：file-io, asp-classic, vbscript

我正在从网络上的文件夹中列出文件名。我正在使用 Server.MapPath 的 VBScript 兼容代码来定位网络上的文件夹：

```
<%Set FSO = Server.CreateObject("Scripting.FileSystemObject")
Set farFolder = FSO.GetFolder(Server.MapPath("\server\folder"))%> 
```

我收到找不到路径的错误。网络运行良好且正常工作。我不确定这是否是我们可以解决网络文件夹的方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T17:21:10.590

尝试这个：

设置 farFolder = FSO.GetFolder(Server.MapPath("..") & "\server\folder" )

不确定是否所有版本的 IIS 都允许 ("..")

# lucene - 可以使用名称中具有给定前缀的字段进行搜索吗？

> ID：13648272
> 
> 赞同：1
> 
> 时间：2012-11-30T15:35:04.650
> 
> 标签：lucene

是否可以创建将在所有具有给定前缀名称的字段中搜索的查询？

我需要它，因为我需要索引一些我正在索引的对象附带的信息，例如类别。类别可以有不同的级别。我想为不同的类别级别提供不同的提升。

我注意到我可以在索引时多次添加一个字段。我可以`catName`多次添加这个字段，使用不同的提升然后搜索它，因为它是一个字段吗？

```
int level = 1;

for (Category cat : sortedCategories) {
    float boost = CATEGORY_BOOST / level;
    String catName = CATEGORY_NAME + String.valueOf(level);
    TextField categoryName = new TextField(catName, cat.getName(),
                                           Field.Store.NO);
    categoryName.setBoost(boost);
    doc.add(categoryName); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T20:32:13.087

您可以保持索引不变，只需创建一个使用多个子句的 BooleanQuery，每个字段名称一个，以及 Occurs.SHOULD。

或者，您可以为前缀创建一个专用索引 - 如果您的字段名称是“Pre1”和“Pre2”，您可以添加一个新的索引字段“Pre”并索引来自“Pre1”和“Pre2”的文档聚合.

# java - 如何在 servlet 中使用 GSON 解析这个 JSON 字符串

> ID：13648273
> 
> 赞同：2
> 
> 时间：2012-11-30T15:35:09.893
> 
> 标签：java, json, servlets, gson

如何解析这个 JSON 字符串以在 servlet 中创建集合对象

```
{"title":["1","2"],"amount":["1","3"]} 
```

我的 servlet 中的内部类

```
public class Data {
    private List<String> title;
    private List<String> amount;
  //getters and setters
} 
```

解析json

```
Gson gson = new Gson();
String param=request.getParameter("info");
Data data = gson.fromJson(param, Data.class);
List<String> a=data.getTitle();
 if(a==null){p("a null");}else{p("a not null");} //here a is null, prints "a null" 
```

这是我如何创建 json 字符串的 jsfiddle [http://jsfiddle.net/testtracker/XDNLp/](http://jsfiddle.net/testtracker/XDNLp/)

表单提交功能中的客户端

```
var dataString=JSON.stringify($(this).serializeObject());
$.ajax({
    type: "POST",
    url: URL,
    data: {"info":JSON.stringify($(this).serializeObject())},
    success: function(data){

    }
  }); 
```

这是我到现在为止的。我走对了吗？接下来我应该对 System.print 它们做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T16:22:44.037

当我无法解决问题时，我会编写尽可能小的程序来验证我的理解是否正确。在你的情况下，我想出了这个：

```
import java.util.List;
import com.google.gson.Gson;
public class GsonTest {

public static class Data {
    private List<String> title;
    public List<String> getTitle() {return title;}
    public Data() {}
}

public static void main (String [] args) {
    Gson gson = new Gson();
    Data data = gson.fromJson("{\"title\":[\"1\",\"2\"]}", Data.class);
    System.out.println(data.getTitle());
} 
} 
```

编译并运行，它输出：

```
["1", "2"] 
```

所以我仍然认为 servlet 接收到的输入不正确（或者您没有提供对现有代码的准确描述）。请将上面的示例与您的真实代码进行比较。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T15:55:15.747

尝试

```
public class Data {
    private ArrayList<String> title;
    private ArrayList<String> amount;
  //getters and setters
} 
```

List 是一个抽象类（所以 GSON 不知道如何创建它）

# css - 嵌套的 CSS 选项卡，冲突的 ul 和 li 格式

> ID：13648277
> 
> 赞同：0
> 
> 时间：2012-11-30T15:35:14.637
> 
> 标签：css, html

我有一个使用无序列表和列表项在 css 中构建的选项卡系统。我想在我的内容区域中使用相同的视觉样式嵌入第二个选项卡结构。我能够做到这一点并且一切正常，但是存在外观问题。在我的内容区域内，我有不同的设置 ul 定义。我基本上想告诉一个 div 遵循内容区域中定义的一半指令。需要间距和那种类型的格式，但我希望忽略 ul 的东西。

如果有人有这方面的经验，我很乐意提供任何需要的代码。我不想发布一堆无助于解决问题的东西。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T15:49:20.877

将“未重置”CSS 块应用于您的内容区域。

见：[https ://github.com/jbcrawford/Un-ResetStylesheet](https://github.com/jbcrawford/Un-ResetStylesheet)

或： http: [//noscope.com/vanilla-css](http://noscope.com/vanilla-css)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T17:23:02.430

您只需要在您的内容中专门针对 lis 和 uls 并覆盖您不想要或更改的值。

如果您的内容位于名为#content 的包装器中，并且选项卡称为.tabs，则执行

```
#content .tabs {
background-image:none;
margin:0px;
} 
```

等等，设置你需要的值。

标签的样式如何？使用完全相同的选择器，但在它们前面放置一个选择器，例如内容包装器，以便您可以专门针对它们。

没有任何代码很难给你一个准确的答案。

# android - 如何正确可靠地保存片段状态（自定义类）

> ID：13648282
> 
> 赞同：0
> 
> 时间：2012-11-30T15:35:28.320
> 
> 标签：android, android-fragments, state

如何正确保存片段状态，使其 100% 可靠？

我的问题是，当我在片段中拍照时，它会导致我的应用程序被杀死并重新创建。我的片段状态丢失了。

我已经尝试过`onSaveInstanceState`，令我惊讶的是没有用，如果应用程序在拍照后被杀死，状态会丢失，`onCreate(Bundle savedInstanceState)`saveInstanceState 为空......

我尝试过将状态变量设为静态。首先，我不喜欢这个解决方案，其次它在我的特殊情况下不起作用，因为我在应用程序中有多个片段类实例。

推荐的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T18:42:53.337

也许您应该考虑使用 SharedPreferences。看看这个问题。[如何在 Android 中使用 SharedPreferences 来存储、获取和编辑值](https://stackoverflow.com/questions/3624280/how-to-use-sharedpreferences-in-android-to-store-fetch-and-edit-values)

或者你可以创建一个 Sqlite 数据库来持久化你的状态。由于您有自定义类，我猜这就是您将使用的。

[http://www.vogella.com/articles/AndroidSQLite/article.html](http://www.vogella.com/articles/AndroidSQLite/article.html)

我不建议在您的应用程序中使用静态变量，因为如果系统内存不足，它们可能会被刷新。

# c# - VS 2010：C# 项目无法打开 DLL

> ID：13648286
> 
> 赞同：4
> 
> 时间：2012-11-30T15:35:32.053
> 
> 标签：c#, .net, visual-studio-2010, dll, reference

我在构建一个引用位于项目 bin 文件夹中的 DLL 的项目时遇到问题，直到昨天，该项目的构建和运行都没有问题。

我得到的错误是`fatal error CS0009: Metadata file 'c:\MyProject\bin\myClient.dll' could not be opened -- 'Error importing module 'myClient.netmodule' of assembly 'c:\MyProject\bin\myClient.dll' -- The system cannot find the file specified.'`Intellisense 同样抱怨，`The type or namespace 'Api' does not exist in the namespace 'Client'`因为它找不到 DLL。

如果您认为这是重复的，请告诉我，但是我查看了几篇类似的帖子，并且解决方案确实解决了我的问题。这里有些例子：

*   [Visual Studio 2010 — 您是否缺少 using 指令或程序集引用？](https://stackoverflow.com/questions/4512176/visual-studio-2010-are-you-missing-a-using-directive-or-an-assembly-reference)
*   [VS2010 - 获取“找不到类型或命名空间名称”但一切似乎都正常？](https://stackoverflow.com/questions/4512176/visual-studio-2010-are-you-missing-a-using-directive-or-an-assembly-reference)
*   [受到 ASP.NET 编译错误 CS0009 的阻碍](https://stackoverflow.com/questions/2011134/stymied-by-asp-net-compilation-error-cs0009)
*   [在 Visual Studio 中找不到元数据文件“...\Release\project.dll”](https://stackoverflow.com/questions/898559/metadata-file-release-project-dll-could-not-be-found-in-visual-studio)
*   [Visual Studio 2010：找不到元数据文件“.../Debug/Graph.dll”](https://stackoverflow.com/questions/6917793/visual-studio-2010-metadata-file-debug-graph-dll-could-not-be-found)
*   [元数据文件...构建项目时找不到错误](https://stackoverflow.com/questions/329142/metadata-file-could-not-be-found-error-when-building-projects)

具体来说，我尝试了以下解决方案（以及这些解决方案的组合）：

*   清理并重建了我的项目。
*   确保目标框架不是 .NET 的“客户端配置文件”版本
*   已验证 dll 已添加为项目引用
*   删除并重新添加了项目参考
*   已验证项目是否在 Visual Studio 的“引用”部分中显示 DLL
*   修复.NET
*   验证 DLL 的位置（它在错误给出的本地项目的 bin 文件夹中）
*   尝试了其他版本的 .NET
*   关闭并重新启动 Visual Studio
*   重新启动我的机器
*   已验证“使用”语句周围没有隐藏字符
*   删除了自上次工作构建以来的所有代码更改
*   验证配置管理器中的设置，包括选中“构建”

调用 DLL 的项目是一个小型类库，它与另一个小型项目（控制台应用程序）一起驻留在解决方案中。DLL 是一个外部 DLL，我已经在这个项目/解决方案中成功使用了几个星期。无论我是从解决方案还是自己构建项目，都会出现错误。

关于可能发生的事情有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T15:46:06.150

您是否不小心在项目中包含了 bin 文件夹？如果是，那可能会导致问题。您不能在项目中包含 bin 文件夹，因为 bin 文件夹将由 VS 创建。如果您不小心在项目中包含 bin 文件夹，bin 项目将设置为复制到输出，当您编译时，该文件将被删除并由 Visual Studio 复制到输出，这会触发某些文件丢失的奇怪行为。

希望这有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T16:02:17.217

好吧，我不确定这里到底发生了什么，但这是最终解决问题的原因：

老式的删除每个文件并从头开始从这些文件重建项目。我给一些回复 +1 是因为它们值得考虑，并且因为 Jonathon Wood 建议的某些地方可能有一个混乱的参考。

# objective-c - 在 iOS 中设计购物车时，我应该使用核心数据还是全局 Cart 类？

> ID：13648289
> 
> 赞同：3
> 
> 时间：2012-11-30T15:35:44.093
> 
> 标签：objective-c, ios

我通常是一名 Web 开发人员，所以我立即认为全局 Cart 类将是可行的方法，因为它与 Web 会话半类似。我还认为 Core Data 用于更永久的存储，因此不适合购物车。

但是，鉴于objective-c 中存在的结构和层次结构，我不确定如何实现cart 类的全局实例。我应该将它存储在我的 appdelegate 中并通过类似于托管对象上下文的方法从那里访问它吗？还是应该只使用核心数据，因为 MOC 已经通过 appdelegate 作为全局实例提供？

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T15:40:52.227

我会说你是正确的，单例类对于这种情况来说是理想的，但是必须处理设备内的 iOS 和用户操作会让我说你应该走 CoreData 道路。

考虑任务切换/关闭会导致购物车丢失的情况，您是否希望购物车在这种情况后保留？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T15:46:40.300

很多非常方便的购物网站，为了确保您可以保存、保留、恢复您的购物车，煞费苦心；只是因为人们必须切换任务，并且知道当你回来时你的工作仍然在那里，这是一种很舒服的感觉。

就我而言，当您在 iOS 应用程序中购物时也是如此。我认为知道我的购物车信息（我可能已经花时间收集）只会在***我***想删除它时消失，这绝对是一件好事。

这表明信息是永久性的，这反过来又表明使用核心数据......

# owl - 保护本体结构

> ID：13648294
> 
> 赞同：0
> 
> 时间：2012-11-30T15:35:52.437
> 
> 标签：owl, protege

我正在尝试构建一个非常简单的本体来表示带有 protege 和 owl 的 RPG 游戏。
我对本体相当陌生，所以我可能并没有真正得到很多东西（例如，我想的开放世界假设）。

在这里你可以下载它-> [LINK](http://pastebin.com/nfHeeaqA)

有两种类型的单位类别，魔法师和近战战士。
附魔师分为奥术魔法和神圣魔法。
法术分为4个流派（唤起，治疗，元素，保护）。
奥术魔法师只能使用元素和召唤法术，神圣魔法师只能使用其他两个。
单元可以有一个类。
单位、法术和单位类别是个体。

我想执行许多查询但不返回任何内容，例如：

1.  canCast some ArcaneMagicSpell
    Expected：可以施放奥术法术的单位类别列表。
    返回：单位类，但我也想要单位（个人）。

2.  canCast value SpellFireball
    Expected：可以施放火球的单位类别列表。
    回报：没有。

3.  canBeCastedBy some ArcaneMagicClass
    Expected: 奥术法师可以施放的所有法术。
    返回:: 没有。

4.  canBeCastedBy value UnitClassBlackMage
    Expected: 黑魔法师可以施展的所有法术。
    回报：没有。

5.  hasClass some (canCast some Spell) Expected：所有可以施展特定法术的单位。
    回报：没有。

我显然在这里做错了什么，但我真的不明白。如何改进我的本体以支持这些查询（或更好地形成查询以获得相同的预期结果）？

# eclipse - 在 Springsource 中设置“在项目中搜索文本”快捷方式？

> ID：13648295
> 
> 赞同：0
> 
> 时间：2012-11-30T15:35:53.483
> 
> 标签：eclipse, ide, sts-springsourcetoolsuite

我在 STS 3.1.0 中工作，我经常使用 Search->Text->Project 菜单项（以及工作区、文件）。我查看了命令可用性选项、菜单选项等。我看不到将此命令添加到工具栏或更好的键盘快捷键的方法。

这就是我所说的：

![菜单](../Images/b661777f7d30c581e43fe88894294013.png)

我错过了什么还是不可能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-13T02:52:27.080

如果您使用的是 STS 3.3 或更高版本 - 您可以（在 Mac 上为 CTRL+SHIFT+L 或 CMD+SHIFT+L）从任何上下文中打开以下对话框并获得即时搜索结果。

![在此处输入图像描述](../Images/23b6e01c21919fb8b31d43c2f4421082.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T21:55:08.983

转到首选项（据我记得在 mac 上是 cmd+），然后转到 General>Keys 并搜索添加键绑定所需的操作。

这是您可能感兴趣的键的快照 ![搜索](../Images/ba3d69fefb5ec2a5d8766055849da41f.png)

# 3d - 具有相等轴的gnuplot splot：如何将z轴保持在屏幕上？

> ID：13648296
> 
> 赞同：3
> 
> 时间：2012-11-30T15:35:56.493
> 
> 标签：3d, plot, gnuplot

我正在尝试使用 gnuplot 绘制 3D 曲面图，所有三个轴的缩放比例相同。问题是 z 轴一直在绘制，因此图像不适合屏幕。以下命令重现了我看到的问题：

```
set view 90,0
set view equal xyz
splot '-' using 1:2:3
-1 -1 0
-1 0 0
-1 1 0

0 -1 0
0 0 2
0 1 0

1 -1 0
1 0 0
1 1 0
e 
```

您看不到点 (0,0,2)，它位于视图顶部。

问题似乎是双重的：1.虽然所有三个轴都设置为相等，但在决定使用什么比例时似乎没有考虑 z 轴的范围 2.出于某种原因，它插入了高度的空白[zrange/2] 在 x 轴和它实际开始 z 轴相关 tic 范围的位置之间。

我可以通过强制一个比 x 轴所需的范围更大的范围来解决 (1)，但是 (2) 仍然很烦人，因为它浪费了绘图窗口中的大量空间。

谁能建议我做错了什么和/或如何解决这个问题？对我来说，这感觉就像 gnuplot 中的一个直接错误，但我在某个地方犯了错误吗？感谢您的任何建议

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T01:10:57.813

gnuplot 的手册中提到`set view equal xyz`并不能保证 z 轴显示在图形中。因此，用户可以适当地缩放图形。

对于你的第二个问题，你试过了`set ticslevel 0`吗？

# symfony - 如何在教义2中使用我的主键策略

> ID：13648298
> 
> 赞同：0
> 
> 时间：2012-11-30T15:36:15.823
> 
> 标签：symfony, doctrine

我有一个实体（该实体从 itunes.apple.com 解析）

```
/**
 * App
 */
abstract class App extends ContainerAware implements AppInterface
{
  /**
   * Using traits
   */
  use AppImageTrait,
      AppLanguageTrait,
      AppCommonTrait,
      AppCategoriesTrait;

  /**
   * @var integer
   * 
   * @ORM\Id
   * @ORM\Column(name="apple_id", type="integer")
   */
  protected $apple_id; 
```

这个实体有方法 setAppleId 和 getAppleId

我想将主键（id）保存为苹果 id

这是如何工作的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T03:25:14.933

从[@ORM\GeneratedValue](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/annotations-reference.html#annref-generatedvalue)注释的文档开始：

```
class App implements AppInterface
{
    use AppImageTrait, AppLanguageTrait, AppCommonTrait, AppCategoriesTrait;

    /**
     * @var integer
     * 
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="NONE")
     * @ORM\Column(name="apple_id", type="integer")
     */
    protected $apple_id;

    /* @param int $appleId */
    public function setAppleId($appleId)
    {
        $this->apple_id = (int) $appleId;
    }

    /* @return int */
    public function getAppleId()
    {
        return $this->apple_id;
    }
} 
```

这应该可以防止 ORM 使用自动增量 ID，同时将设置标识符的任务留给您。

附带说明：不要让您的实体容器知道。

# php - 检测 Windows 进程和应用程序是否正在运行

> ID：13648304
> 
> 赞同：3
> 
> 时间：2012-11-30T15:36:35.247
> 
> 标签：php, windows, process, taskbar, quickbooks

我正在调查是否有办法以编程方式检查某个进程是否作为进程（在运行的 exe 列表中）**和**作为打开的应用程序（即在任务栏上）运行，并根据结果采取行动。

另外-有没有办法以编程方式杀死进程**或**正在运行的应用程序？

我们正在这台服务器上运行一个 WAMP 应用程序，所以理想情况下我想要一种使用 PHP 的方法，但我愿意接受任何最有效的方法。

有什么建议吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-30T16:15:47.310

> 检查某个进程是否作为进程运行

如果您有 tasklist 命令，请确保：

```
// show tasks, redirect errors to NUL (hide errors)
exec("tasklist 2>NUL", $task_list);

print_r($task_list); 
```

然后你可以通过从行中匹配/提取任务名称来杀死它。

```
exec("taskkill /F /IM killme.exe 2>NUL"); 
```

我在 php-cli 中使用了很多。例子：

```
// kill tasks matching
$kill_pattern = '~(helpctr|jqs|javaw?|iexplore|acrord32)\.exe~i';

// get tasklist
$task_list = array();

exec("tasklist 2>NUL", $task_list);

foreach ($task_list AS $task_line)
{
  if (preg_match($kill_pattern, $task_line, $out))
  {
    echo "=> Detected: ".$out[1]."\n   Sending term signal!\n";
    exec("taskkill /F /IM ".$out[1].".exe 2>NUL");
  }
} 
```

# c++ - bjam，如何找到提升构建

> ID：13648306
> 
> 赞同：1
> 
> 时间：2012-11-30T15:36:39.847
> 
> 标签：c++, boost, bjam, boost-build

我的机器上有**两个**boost 目录。一个在 /usr/ 中，一个在 /home/user/boost 中。我如何告诉 bjam 在 /home/user/boost 中只使用我的本地版本。我已经将 BOOST_ROOT 设置为指向该目录，但 bjam 仍然尝试使用 /usr/ 中的版本。

编辑：我发现，我可以在 Jamroot 旁边使用一个文件 boost-build.jam，只有一行告诉 bjam 在哪里可以找到 boost.build：

```
boost-build $(BOOST_ROOT)/tools/build/v2 ; 
```

但这只是次优的，因为我必须为每个项目创建这个文件。有没有更简单的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T18:56:24.410

我认为最简单的解决方案是全局设置`BOOST_BUILD_PATH`环境变量。在这种情况下，您不需要`boost-build.jam`为每个项目都搞乱。

# java - 如果没有为 Windows 上的 Chrome 23 安装 Java 插件，则 navigator.javaEnabled() 返回 true

> ID：13648309
> 
> 赞同：3
> 
> 时间：2012-11-30T15:36:49.410
> 
> 标签：java, javascript, google-chrome

我的任务是确定是否在用户附带的浏览器上安装并启用了 Java。

我正在`navigator.javaEnabled()`为此使用方法。

除了 Chrome 浏览器外，它在任何地方都可以正常工作：即使 Chrome 上根本没有安装 Java 插件，它也会显示 TRUE。

这是错误还是功能？如何在 Chrome 中解决我的任务？

铬 23，Windows。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T15:45:15.907

此问题已多次向 Chromium 项目报告：

*   [http://code.google.com/p/chromium/issues/detail?id=36154](http://code.google.com/p/chromium/issues/detail?id=36154)
*   [http://code.google.com/p/chromium/issues/detail?id=108957](http://code.google.com/p/chromium/issues/detail?id=108957)

前者是开放的，后者作为 WontFix 关闭。

社区中似乎对应该返回的值存在一些分歧：

> 目前还不清楚这里的正确行为是什么；它不是规范的一部分，MDN 中对预期行为的描述*非常*特定于一种偏好，这种偏好不仅在 Chrome 中不存在，而且在 Gecko 中也不再存在（因为它已被通用替换启用和禁用任意插件的能力）

看起来 Chrome 根据以下条件返回 true：

> 请注意，它明确表示它并*没有*指出是否实际支持 Java，只是表示首选项的值。**因此，如果插件没有安装，因此用户没有明确禁用，那么根据这些文档，它实际上应该返回 true，而不是 false**。我们将安装但禁用的插件视为未安装用于 Web 内容目的的插件。

^([强调我的])

* * *

因此，我能想到的检测 Java 是否正在运行的唯一解决方案是在页面上实际放置一个 Applet，看看您是否可以通过 JavaScript 与它进行交互。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-12T12:12:19.550

我添加了 Chrome 解决方法：

```
var isJavaEnabled = (function() {
    if (!Ext.isChrome) {
        return window.navigator.javaEnabled();
    }

    // Chrome bug https://code.google.com/p/chromium/issues/detail?id=108957
    // get all installed plugins
    var plugins = Array.prototype.slice.call(window.navigator.plugins, 0); 
    // looking for Java
    return plugins.some(function(plugin) {
        return plugin && String(plugin.name).toLowerCase().indexOf("java") > -1;
    });
})(); 
```

# rest - 使用 yiirestfull 插件和 Backbone.JS 的 403 禁止错误 PUT 请求

> ID：13648311
> 
> 赞同：0
> 
> 时间：2012-11-30T15:36:52.053
> 
> 标签：rest, backbone.js, yii

我正在 Yii 中使用 REST。因此我使用 yiirestful 插件和 Backbone.JS。目前，我完全能够在整个 REST 中执行 POST 和 GET 请求。但是当我想更新一条记录时，我总是收到 403 禁止错误。我将解释我的尝试以及如何：

首先，我将我的收藏保存在 Backbone 中，如下所示：

```
Backbone.sync('update', this.collection); 
```

现在我不确定这是否会起作用，但事实是任何 PUT 请求都会得到 403。

其次，因为我在一个模块中工作，所以我调整了 URLmanager 规则，如下所示：

```
 'contentManagement/api/<controller:\w+>'=>array('contentManagement/<controller>/restList', 'verb'=>'GET'),

        'api/<controller:\w+>'=>array('<controller>/restList', 'verb'=>'GET'),
        'api/<controller:\w+>/<id:\w+>'=>array('<controller>/restView', 'verb'=>'GET'),
        'api/<controller:\w+>/<id:\w+>/<var:\w+>'=>array('<controller>/restView', 'verb'=>'GET'),

        array('contentManagement/<controller>/restCreate', 'pattern'=>'contentManagement/api/<controller:\w+>', 'verb'=>'POST'),

        array('<controller>/restUpdate', 'pattern'=>'contentManagement/api/<controller:\w+>/<id:\d+>', 'verb'=>'PUT'),

        array('<controller>/restUpdate', 'pattern'=>'contentManagement/api/<controller:\w+>/<id:\d+>', 'verb'=>'PUT'),
        array('<controller>/restDelete', 'pattern'=>'api/<controller:\w+>/<id:\d+>', 'verb'=>'DELETE'),
        array('<controller>/restCreate', 'pattern'=>'contentManagement/api/<controller:\w+>', 'verb'=>'POST'),
        array('<controller>/restCreate', 'pattern'=>'contentManagement/api/<controller:\w+>/<id:\w+>', 'verb'=>'POST'), 
```

这可能是导致问题的原因。但是我对这个规则并不是很深入。我做了与 POST 请求相同的操作，但无论我尝试什么，它仍然会给出 403。

第三，我将提供我的请求信息：

```
PUT http://pimtest.php/Yii/trackstar/contentManagement/api/SidebarWidgetsUsed/

403 Forbidden
        38ms 
```

我认为这个 url 之后需要一个 id，但是当我在数据中提供一个 id 应该足以让骨干网识别它是关于 PUT 请求/更新请求时。

我不知道在哪里可以进一步查看我的代码。我知道这是一个复杂的故事，所以任何最小的建议都会受到赞赏！

问候，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T17:50:58.363

您有两个（相同的）规则适用于 PUT，正如您所说，它们需要一个 ID。如果没有 ID，任何规则都不会匹配 PUT 请求。

要么提供一个 ID，要么将规则修改为不需要 id，例如：

```
 array('<controller>/restUpdate', 'pattern'=>'contentManagement/api/<controller:\w+>', 'verb'=>'PUT'), 
```

无论如何，由于您没有使用 id，我不确定为什么它在规则中开始？

# oracle-apex - APEX 3.2 (Oracle)：在更改项目时动态填充页面上其他项目的值

> ID：13648314
> 
> 赞同：1
> 
> 时间：2012-11-30T15:37:03.277
> 
> 标签：oracle-apex

我在 APEX 3.2 上，并且在用于在表 f 中插入字段 f1 和 f2 的表单中，我希望有几个文本项将根据在 f1 中键入的数据和表 t 上的查询自动填充和显示. 换句话说，在 f1 中输入 empno，移动到 f2 框，用户应该会自动看到 emp last_name 和 first_name 显示。这样她就可以验证输入的 empno 是否正确，在 f2 中输入其他数据并提交表单。

关于如何达到这个范围的任何建议？

我想我应该使用一些javascript。

非常感谢。加布里埃尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T21:26:05.090

我可以看到您可能已经走上了 javascript 的道路...我过去曾与 APEX 3.2 合作过类似的问题，并且不知道足够的 javascript 来从平台中获取这种动态功能。如果您想尝试另一种方法，您可以调整您的用户界面以提供您寻求的功能，但您必须与用户核实他们是否可以适应这种方法，您应该能够使用现有的 3.2 功能且无需额外的脚本：

**要求：**

根据 field1 和 field2 的字段输入，使用现有表中的数据自动填充顶点页面，以便用户确认在 field1 和 field2 中输入的数据是否正确。将搜索结果中的数据用作输入新流程或表单的参数。

**建议设计：**

*第1页：*从空白页开始，然后添加三个项目：field1、field2和一个“提交”按钮。添加从第 1 页表单上的值重定向到第 2 页设置项 P2_field1 和 P2_field2 的页面进程（提交后，以提交按钮项为条件）。

*第 2 页：*报告页面。设置一个查询，该查询将通过部分或完整字符串搜索对员工表进行搜索，以搜索现有员工表。APEX 3.2 过去使用以下约定来解决部分和区分大小写的匹配问题：

```
SELECT field1, field2, field3, field4, ...
FROM table1
WHERE instr(upper(field1), upper(:P2_field1), 1, 1) > 0
  AND instr(upper(field2), upper(:P2_field2), 1, 1) > 0 
```

当同一搜索查询可能有多个答案时，为搜索工作创建报告输出“表”会有所帮助......例如使用“Smith”或“John”等常用名称......

在报表输出中添加一个附加列，或将名称列（字段 1 或字段 2）作为链接列转到第 3 页，以提供来自员工表的查询数据。

将属性添加到报告编辑器上的列值：重定向到“第 3 页”，设置 P3_key = #KEY# 其中第 3 页是您的最终目标表单或流程，“键”是您所在表的索引或主键从...搜索，或者您可以提供已从查找表中查询到的 n 个值，以填充第 2 页报告。

我想重要的收获是对旧版本 Apex的限制以及对高级 Web 脚本语言知识的*可能限制的欣赏。*即使您只熟悉 Apex 版本的基础知识和一点 SQL，您的要求仍然可以实现。

注意：如果您的查找表非常庞大（数十万条记录），您可能需要咨询您的 DBA 以获取优化表以处理 SQL 搜索查询的帮助。在没有额外优化帮助的情况下，将 UPPER 和 INSTR 函数添加到 WHERE 条件并不是查询大型数据集的最有效方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T14:08:08.893

汤姆，这是您修改后的代码以在我的系统中工作：

-- 按需申请流程 get_emp_details：

```
DECLARE
   lEmp emp%rowtype;
BEGIN
   SELECT *
     INTO lEmp
     FROM emp
    WHERE badge = :P2_BADGE;

   htp.p('{"result":"ok", "emp":{"lastname":"'||lEmp.last_name||'","firstname":"'||lEmp.first_name||'"}}');
EXCEPTION 
WHEN no_data_found THEN
   htp.p('{"result":"nok", "emp":{}}');
END; 
```

-- 页眉中的 Javascript：

```
<script type="text/javascript">
$(document).ready(function(){
   $("#P2_BADGE").change(function(){
      $.post('wwv_flow.show', 
             {"p_request"      : "APPLICATION_PROCESS=get_emp_details",
              "p_flow_id"      : $v('pFlowId'),
              "p_flow_step_id" : '0',
              "p_instance"     : $v('pInstance'),
              "p_arg_names"    : ['P2_BADGE'],
              "p_arg_values"   : [$('#P2_BADGE').val()]},
              function(data){
                 if(data){
                    var lReturn = $.parseJSON(data);
                    if(lReturn.result=='ok'){
                       var lEmp = lReturn.emp;
                       $("#P2_LAST_NAME").val(lEmp.last_name);
                    } else {
                       alert('ename could not be found for this empno!');
                    };
                 };
              }
      );        
   });
});
</script> 
```

我可能遗漏了一些东西，当我在 P2_BADGE 中输入徽章编号时，它不会在 P2_LAST_NAME 中显示 last_name。

谢谢，加布里埃尔

汤姆，这是我在萤火虫的监视右侧窗口中的功能（数据）步骤：

```
this
  function()

arguments
[
"wwv_flow.show"
, Object { p_request=
"APPLICATION_PROCESS=get_emp_details"
,  p_flow_id=
"120"
,  p_flow_step_id=
"0"
,  more...}, function()]

0

"wwv_flow.show"

1
  Object { p_request=
"APPLICATION_PROCESS=get_emp_details"
, p_flow_id=
"120"
, p_flow_step_id=
"0"
, more...}

p_arg_names
[
"P2_BADGE"
]

p_arg_values
[
"155752"
]

p_flow_id
"120"

p_flow_step_id
"0"

p_instance
"2189517750670012"

p_request
"APPLICATION_PROCESS=get_emp_details"
2
  function()
e
"wwv_flow.show"
r
Object { p_request=
"APPLICATION_PROCESS=get_emp_details"
, p_flow_id=
"120"
, p_flow_step_id=
"0"
, more...}
p_arg_names
[
"P2_BADGE"
]
p_arg_values
[
"155752"
]

p_flow_id
"120"
p_flow_step_id
"0"
p_instance
"2189517750670012"
p_request
"APPLICATION_PROCESS=get_emp_details"
s
undefined
i
function()
toString
  function()

Closure Scope
  Closure Scope { toString=function()}
Closure Scope
  Closure Scope { toString=function()}
Window
  Window f?p=120:2:2189517750670012::NO::: 
```

* * *

从我的萤火虫 1.10.6 控制台：

文件准备好了

f?p=12...::NO::: （第 29 行）

empno 变了

f?p=12...::NO::: (第 31 行)

执行具有 empno 值的帖子：未定义

f?p=12...::NO::: (第 32 行)

邮政

400 错误请求 48ms
wwv_fl....min.js（第 2 行） HeadersPostResponseHTMLCookies

```
<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">
<HTML><HEAD>
<TITLE>400 Bad Request</TITLE>
</HEAD><BODY><H1>Bad Request</H1>
The HTTP client sent a request that this server could not understand.</BODY></HTML> 
```

-- 和帖子标签：

```
Parametersapplication/x-www-form-urlencoded
p_arg_names[]   P2_BADGE
p_arg_values[]  155751
p_flow_id   120
p_flow_step_id  0
p_instance  4466366911674565
p_request   APPLICATION_PROCESS=get_emp_details
Source
p_request=APPLICATION_PROCESS%3Dget_emp_details&p_flow_id=120&p_flow_step_id=0&p_instance=4466366911674565&p_arg_names%5B%5D=P2_BADGE&p_arg_values%5B%5D=155751 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T08:40:46.423

我不是 3.2 wiz，我没有使用它。我确实知道没有动态操作，也没有页面按需处理点，所以我已经考虑到了这一点。

申请流程：'get_emp_details'
（不知道3.2中可以/需要选择的处理点。如果可以按需选择，就去吧。）代码：

```
DECLARE
   lEmp emp%rowtype;
BEGIN
   SELECT *
     INTO lEmp
     FROM emp
    WHERE empno = :P7_EMPNO;

   htp.p('{"result":"ok", "emp":{"ename":"'||lEmp.ename||'","job":"'||lEmp.job||'"}}');
EXCEPTION 
WHEN no_data_found THEN
   htp.p('{"result":"nok", "emp":{}}');
END; 
```

在您的页面上（在我的情况下，我使用了第 7 页，将页码更改为您的页码！）将其放在 html 标题部分（或者如果您有 javascript 部分，则将 javascript 代码放在那里而不带脚本标签） ：
**编辑：添加`console.log`在行中。请注意，当开发人员工具 (F12) 未打开时，这些将在 IE 中产生 javascript 错误！**

```
<script type="text/javascript">
$(document).ready(function(){
   console.log('document is ready');
   $("#P7_EMPNO").change(function(){
      var oDBGet = new htmldb_Get(null, $('pFlowId').val(), "APPLICATION_PROCESS=get_emp_details", '0');
      oDBGet.add('P7_EMPNO', $("#P7_EMPNO").val());
      var oResult = oDBGet.get();
      var lReturn = $.parseJSON(oResult);
      if(lReturn.result=='ok'){
         var lEmp = lReturn.emp;
         $("#P7_ENAME").val(lEmp.ename);
      } else {
         alert('ename could not be found for this empno!');
      };
   });
});
</script> 
```

这将在 EMPNO 更改时执行 ajax 回调，并更改员工的姓名。由于没有可以使用的临时应用程序项目（`apex_application.g_x##`），我将所需的页面项目提交到会话状态。在这种情况下`P7_EMPNO`被添加到 p_arg_names 数组和它的值在 p_arg_values 数组中的相应位置。这是必要的，因为在应用程序进程中使用了 P7_EMPNO 的会话状态。

检查 Firebug 中的控制台选项卡时：
ajax 调用的发布值： ajax 调用
![AJAX 调用 POST 值](../Images/2b3bd17a6c52cf0f56ed58ab1b3f156d.png) 的响应值： ![AJAX 调用响应值](../Images/56d8d7f69573e15bf93ac6e9fbb83794.png)

# r - R中的ENFA。处理内存不足？

> ID：13648316
> 
> 赞同：1
> 
> 时间：2012-11-30T15:37:48.583
> 
> 标签：r, memory-management

操作系统：Windows 7；4GB 内存；3GB 处理器速度；R 2.11.1,64位

大家好。我正在尝试在 R 中执行生态利基因子分析，但是在尝试将我的 .asc 环境特征编译到列表中时遇到了问题（代码：

```
maps <- as.kasc(list(cut_diststrm = bio1, cut_cos_asp = bio2, 
                 cut_dem = bio3, cut_sin_asp = bio4, 
                 cut_slope = bio5)). 
```

一旦我要求 R 将这些功能集中在一起，我就会收到以下错误消息：

> 错误：无法分配大小为 218.5 Mb 的向量

我知道我要求我的处理器分配大量内存来执行分析，但是以前有人遇到过这个问题吗？如何克服这个恼人的问题？

# python - 计算皮尔逊相关性

> ID：13648318
> 
> 赞同：11
> 
> 时间：2012-11-30T15:37:50.873
> 
> 标签：python, numpy, statistics, scipy

我正在尝试计算两个变量的 Pearson 相关系数。这些变量用于确定邮政编码数量与距离范围之间是否存在关系。所以我想看看邮政编码的数量是否随着距离范围的变化而增加/减少。

我将有一个列表来计算距离范围内的邮政编码数量，而另一个列表将具有实际范围。

可以有一个包含一系列距离的列表吗？或者最好有一个像 [50, 100, 500, 1000] 这样的列表，其中每个元素将包含该数量的范围。例如，列表代表最长 50 公里，然后从 50 公里到 100 公里，依此类推。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-30T16:09:54.183

使用 scipy ：

```
scipy.stats.pearsonr(x, y) 
```

> 计算 Pearson 相关系数和用于检验非相关性的 p 值。
> 
> Pearson 相关系数衡量两个数据集之间的线性关系。严格来说，皮尔逊相关性要求每个数据集都是正态分布的。与其他相关系数一样，这个系数在 -1 和 +1 之间变化，0 表示没有相关性。-1 或 +1 的相关性意味着精确的线性关系。正相关意味着随着 x 的增加，y 也会增加。负相关意味着随着 x 增加，y 减少。
> 
> p 值大致表示不相关系统产生的数据集的概率，这些数据集的 Pearson 相关性至少与从这些数据集计算得出的数据集一样极端。p 值并不完全可靠，但对于大于 500 左右的数据集可能是合理的。
> 
> 参数 ：
> 
> > x : 一维数组
> > 
> > y : 与 x 长度相同的一维数组
> 
> 返回：
> 
> > （皮尔逊相关系数，：2 尾 p 值）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-11-14T22:15:05.850

您还可以使用`numpy`：

```
numpy.corrcoef(x, y) 
```

这会给你一个相关矩阵，如下所示：

```
[[1          correlation(x, y)]
[correlation(y, x)          1]] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-15T08:57:01.583

尝试这个：

```
 val=Top15[['Energy Supply per Capita','Citable docs per Capita']].rank().corr(method='pearson') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-10-13T21:02:34.407

在 Python 3.10中，在 Python 标准库的模块中增加了[相关](https://docs.python.org/3/library/statistics.html#statistics.correlation)`statistics`函数，可以通过导入统计模块直接使用：

```
import statistics

statistics.correlation(words, views) 
```

# gtk - 如何在 GtkTreeview 中用字符串和 pixbuf 制作列？

> ID：13648323
> 
> 赞同：4
> 
> 时间：2012-11-30T15:37:56.530
> 
> 标签：gtk, vala, gtktreeview, cellrenderer

我正在使用 Gtk+2 开发应用程序，我需要实现文件树视图。

实际代码是：

```
public FileTree() {

    store = new TreeStore(2,typeof(string),typeof(string));

    this.change_dir( "/dir/path" );

    set_model( store );

    // File icon
    var pixbuf = new Gtk.CellRendererPixbuf();
    var column = new Gtk.TreeViewColumn();
    column.set_title("");
    column.pack_start(pixbuf, false);
    column.add_attribute(pixbuf,"stock-id",0);
    column.set_alignment(1.0f);
    append_column (column);

    // File name
    Gtk.CellRenderer cell = new Gtk.CellRendererText();
    insert_column_with_attributes(-1,"", cell, "text", 1);

    // Do some visual configs
    this.config();

} 
```

和`change_dir()`：

```
public void change_dir( string path ) {
        File repo_dir = File.new_for_path( path );

        try {
            generate_list( repo_dir, null, new Cancellable());
        } catch ( Error e ) {
            stderr.printf("Error: %s\n", e.message);
        }
    }

public void generate_list ( 
        File file, 
        TreeIter? parent = null, 
        Cancellable? cancellable = null 
    ) throws Error {

        // Enumerator
        FileEnumerator enumerator = file.enumerate_children (
            "standard::*",
            FileQueryInfoFlags.NOFOLLOW_SYMLINKS,
            cancellable
        );
        FileInfo info = null;
        TreeIter iter;

        while(cancellable.is_cancelled() == false && ((info = enumerator.next_file(cancellable)) != null )) 
        {
            // Check if not it's in the omited files.
            if( ! (info.get_name() in IGNORED ) ) {

                // Check if is a dir or a file
                if( info.get_file_type() == FileType.DIRECTORY ) {

                    this.store.append( out iter, parent);
                    this.store.set(iter, 0, STOCK_DIRECTORY, 1, info.get_name());

                    File subdir = file.resolve_relative_path(info.get_name());

                    this.generate_list(subdir, iter, cancellable );
                } else {
                    // It's a file

                    this.store.append( out iter, parent);
                    this.store.set(iter, 0, STOCK_FILE, 1, info.get_name());
                }

            }
        }

        if ( cancellable.is_cancelled()) {
            throw new IOError.CANCELLED ("Operation was cancelled");
        }
    } 
```

这显示了两列（第一列是文件夹/文件图标，第二列是文件夹/文件的名称）

这是在一列中执行此操作的某种方法？

编辑：在名称旁边设置图标可能是一些技巧，实际代码显示图标和字符串，但是当我展开一列时，字符串向右移动一点，图标之间有一个空格和字符串。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-01T03:46:50.047

使用 TreeViewColumn 的方法`pack_start()`，我只需将任何单元格渲染器附加到列。

（在 C 中，这就像[http://developer.gnome.org/gtk/unstable/gtk-question-index.html](http://developer.gnome.org/gtk/unstable/gtk-question-index.html)（参见 5.3））

所以，刚刚修改：

```
// File icon
var pixbuf = new Gtk.CellRendererPixbuf();
var column = new Gtk.TreeViewColumn();
column.set_title("");
column.pack_start(pixbuf, false);
column.add_attribute(pixbuf,"stock-id",0);
column.set_alignment(1.0f);
append_column (column);

// File name
Gtk.CellRenderer cell = new Gtk.CellRendererText();
insert_column_with_attributes(-1,"", cell, "text", 1); 
```

和：

```
// File icon

var pixbuf = new Gtk.CellRendererPixbuf();
column.set_title("");
column.pack_start(pixbuf, false);
column.add_attribute(pixbuf,"stock-id",0);

// The name of the file.
var cell = new Gtk.CellRendererText();
column.pack_start(cell, false);
column.add_attribute(cell,"text",1);

append_column (column); 
```

它就在那里:)

# android - 转到下一篇文章 - 使用 finish() 和 startActivity()，但只是在顶部加载新文章

> ID：13648329
> 
> 赞同：0
> 
> 时间：2012-11-30T15:38:22.440
> 
> 标签：android, android-activity, reload

标题几乎解释了我的整个问题。我有一个简单的新闻应用程序 - 上下滚动查看文章标题，然后单击一个转到 ArticleActvity（即阅读文章）。

当用户向左或向右滑动时，它会加载下一篇或上一篇文章。但是 - 我的代码显然只是在另一个之上加载了一个新的文章活动，因为我的后退按钮在多次单击时会关闭文章活动，然后关闭另一个，然后关闭另一个......等等，直到你最终返回文章列表。

作为一个 Android 菜鸟，这是我的代码 1) 检测水平滑动，以及 2) 使用新文章重新加载（尝试）相同的活动。

**版本：**

```
<uses-sdk android:minSdkVersion="8" android:targetSdkVersion="15"/> 
```

**我在 ArticleActivty.java 中的代码：**

```
SimpleOnGestureListener simpleOnGestureListener = new SimpleOnGestureListener()
{

     @Override
     public boolean onScroll(MotionEvent e1, MotionEvent e2, float distanceX, float distanceY)
     {
         if(distanceX < -60)
         {
             //still need to hide article and show rotator graphic
             Intent myIntent = new Intent(getBaseContext(), ArticleActivity.class);
             myIntent.putExtra("id", String.valueOf(articlesDataSource.getNextOrPrevArticleId(article.id, true)));
             overridePendingTransition(0, 0);
             myIntent.addFlags(Intent.FLAG_ACTIVITY_NO_ANIMATION);

             finish();

             overridePendingTransition(0, 0);
             startActivity(myIntent);
         }
         else if(distanceX > 60)
         {
             //still need to hide article and show rotator graphic
             Intent myIntent = new Intent(getBaseContext(), ArticleActivity.class);
             myIntent.putExtra("id", String.valueOf(articlesDataSource.getNextOrPrevArticleId(article.id, false)));
             overridePendingTransition(0, 0);
             myIntent.addFlags(Intent.FLAG_ACTIVITY_NO_ANIMATION);

             finish();

             overridePendingTransition(0, 0);
             startActivity(myIntent);
         }
         return super.onScroll(e1, e2, distanceX, distanceY);
     } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T15:53:00.330

添加`android:launchMode="singleInstance"`

在`ArticleActivity's`清单文件的标签中

# python - 使用内置类型创建动态对象时的未绑定方法

> ID：13648330
> 
> 赞同：2
> 
> 时间：2012-11-30T15:38:23.373
> 
> 标签：python, python-2.7

我有这个代码：

```
class X(object):
    x = 10
    def test_x(self):
        return self.x

class Y(X):
    def test_y(self):
        return self.x

y = Y()
y.test_y()      # works fine 
```

但是当我使用 type 构造一个基于 X 的新对象 z 时：

```
z = type('Z', (X,), dict(z=1))
z.x             # works fine
z.test_x()      # gives a TypeError : 
```

必须使用 Z 实例作为第一个参数调用未绑定的方法 test_x()（什么都没有）。我该如何解决。

**更新**

在 Martijn 的帮助和理解下，我解决了这个问题：

```
z = type('Z', (X,), dict(z=1))()
z.test_x() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T15:40:10.787

`z`是一个类，而不是一个实例。而是创建一个实例：

```
z().test_x() 
```

你所做的相当于：

```
class Z(X):
    z = 1

z = Z
z.test_x() 
```

# c# - 没有操作的方法会被编译出来吗？

> ID：13648332
> 
> 赞同：1
> 
> 时间：2012-11-30T15:38:26.013
> 
> 标签：c#, compilation

如果我有一个没有操作但返回传入参数的方法，编译器会将其从生成的 MSIL 中删除吗？

例如：

```
public partial class StringResource {

    /// <summary>About</summary>
    public static string About { get { return Encode(Resources.WebUI.About); } }

    public static string Encode(string s) { return s; }
} 
```

C# 编译器甚至会生成该`Encode`方法吗？如何查看生成的 IL 并比较使用和不使用该`Encode`方法的代码？

如果静态编译器不删除它，那么运行时 JIT 编译器呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T15:39:45.580

> 如果我有一个没有操作但返回传入参数的方法，编译器会将其从生成的 MSIL 中删除吗？

不，不可能——这会破坏任何试图通过反射等方式调用该方法的东西。

该方法可能会被 JIT 内联为空，但这是另一回事。有很多因素决定了方法是否可以内联，这些细节在不同版本的 CLR、不同的进程架构等之间有所不同。对于空方法，我希望它们被内联（当不在调试器中运行时）*非- 虚拟*通话。

> 如何查看生成的 IL 并比较使用和不使用 Encode 方法的代码？

1.  编译代码。
2.  反汇编，例如使用 `ildasm Foo.dll /out=before.il
3.  更改代码
4.  编译
5.  拆卸，例如`ildasm Foo.dll /out=after.il`
6.  比较`before.il`和`after.il`

# wpf - DataGrid 到自定义类对象问题的 Observable 集合

> ID：13648334
> 
> 赞同：1
> 
> 时间：2012-11-30T15:38:44.627
> 
> 标签：wpf, vb.net, data-binding

我有点新手，所以在绑定方面我很不稳定。我已经搜索了很长时间，但我根本找不到任何可以让我到达我需要的地方的例子。

我有一个绑定到可观察集合的 DataGrid。它是一个包含多个属性的自定义类的集合（其中一个属性本身就是一个可观察的集合）。用户将文本输入 DataGrid 并更新 Observable 集合。我希望用户能够右键单击 DataGrid 中的一行并获得一个上下文菜单，其中包含从父可观察集合中项目的可观察集合属性生成的项目。

为简单起见，我的 DataGrid 绑定到 InputItemList，它是 InputItem 的 Observable 集合。

InputItemList 作为 ObservableCollection(Of InputItem)

InputItem 具有属性： Part_Number as String Drawing_List as ObservableCollection(Of DrawingItem)

DrawingItem 具有属性： Revision as String Drawing_Path as String

DataGrid 通过 ItemsSource 绑定到 InputItemList，并且工作正常。对于我的生活，我无法创建一系列绑定到 Drawing_List 集合的菜单项

这是我的 XAML 的简化版本，带有 ??? 我在绑定方面需要帮助：

```
<DataGrid x:Name="mw_DataGrid" ItemsSource="{Binding Source={StaticResource InputItemList}}">
    <DataGrid.Columns>
        <DataGridTextColumn Binding="{Binding Path=Part_Number}" CanUserReorder="False" CanUserResize="False" CanUserSort="False" Header=""/>
    <DataGrid.Columns>
    <DataGrid.ContextMenu>
        <ContextMenu>
            <MenuItem Header="Open Obsolete Revision" ItemsSource=????>
                <MenuItem.ItemContainerStyle>
                    <Style>
                        <Setter Property="MenuItem.Header" Value="{Binding Path=Revision}"/>
                        <Setter Property="MenuItem.Command" Value="{StaticResource cmdOpenObsPDF}" />
                        <Setter Property="MenuItem.CommandParameter" Value="{Binding Path=Drawing_Path}" />
                    </Style>
                </MenuItem.ItemContainerStyle>
            </MenuItem>
        </ContextMenu>
    </DataGrid.ContextMenu>
</DataGrid> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T17:11:35.917

在您的视图模型上创建一个 InputItem 类型的属性，它表示当前选定的行。例如，将其命名为 CurrentSelectedInputItem

然后将其绑定到 DataGrids SelectedItem。

然后绑定你想要的itemsource：

```
<MenuItem Header="Open Obsolete Revision" ItemsSource="{Binding CurrentlySelectedItem.DrawingList}"> 
```

不是 100% 确定菜单项的使用 - 但这是如何绑定到您所追求的绘图列表，您应该能够修改它以满足您的需要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T14:31:31.850

好的，我想通了。我实际上必须这样做一次并且完全忘记了！

显然，使用上下文菜单在树中搜索有些困难。我不记得完整的解释，但这是适用于我的 XAML：

```
<MenuItem Header="Open Obsolete Revision" ItemsSource="{Binding Path=PlacementTarget.SelectedItem.DrawingList, RelativeSource={RelativeSource AncestorType={x:Type ContextMenu}}}"> 
```

# testing - 连续属性 - 朴素贝叶斯算法中的分布

> ID：13648335
> 
> 赞同：0
> 
> 时间：2012-11-30T15:38:51.303
> 
> 标签：testing, machine-learning, artificial-intelligence, classification

我正在尝试通过在 MATLAB 中编写自己的代码来实现朴素贝叶斯算法。我很困惑为连续属性之一选择什么分布。它的值如下：

```
 MovieAge :
         1
         2
         3
         4
         ..
         10
         1
         11
         2
         12
         1
         3
         13
         2
         1
         4
         14
         3
         2
         5
         15
         4
         3
         6
         16
         5
         4
         ....
         32
         9
         3
         15 
```

请让我知道这些数据使用哪个分布？在我的测试集中，此属性将包含（有时）未包含在训练数据中的值。如何处理这个问题？谢谢 15

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T00:40:27.360

就像@Ben 的回答一样，从[直方图](http://en.wikipedia.org/wiki/Histogram)开始听起来不错。

我接受您的输入，直方图如下所示：

![在此处输入图像描述](../Images/c89dd24a9fdcb4861589f0f90eaf0481.png)

将数据保存到名为 的文本文件`histdata`中，每个值一行：

用于生成绘图的 Python 代码：

```
import matplotlib.pyplot as plt
data = []
for line in file('./histdata'):
    data.append(int(line))

plt.hist(data, bins=10)
plt.xlabel('Movie Age')
plt.ylabel('Counts')
plt.show() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T15:58:31.317

假设这个变量取整数值，而不是连续的（基于示例），最简单的方法是直方图类型的方法：某个值的概率是它在训练数据中出现的次数的分数。考虑为高于某个数字的所有值（根据您的示例可能为 20 左右）的最终 bin。如果您遇到零计数问题，请在所有计数中添加一个（如果您倾向于这种方式，可以将其视为 Dirichlet 先验）。

至于参数形式，如果您更喜欢，泊松分布是一种可能。一个 qq 图，甚至是拟合优度测试，将表明这在您的情况下有多合适，但我怀疑您使用基于直方图的方法会更好。

# c# - 使用接口驱动方法或静态辅助方法

> ID：13648340
> 
> 赞同：1
> 
> 时间：2012-11-30T15:39:11.660
> 
> 标签：c#

我在应用程序中使用 Dapper ORM。我创建了一个带有 Dapper 方法的接口，以便快速浏览此应用程序中正在使用 Dapper 的哪些功能，并且可以通过实现它轻松地被其他 ORM 替换。

```
public interface IDapperRepository
{            
    IEnumerable<T> GetAll<T>(string query, object cmdParams = null, CommandType cmdType = CommandType.Text) where T : class;
    T GetById<T>(string query, object cmdParams = null, CommandType cmdType = CommandType.Text) where T : class;
}   

class DapperRepository : IDapperRepository
{   
    public IEnumerable<T> GetAll<T>(string query, object cmdParams = null, CommandType cmdType = CommandType.Text) where T : class
    {
        //implementation
    }

    public T GetById<T>(string query, object cmdParams = null, CommandType cmdType = CommandType.Text) where T : class
    {
        //implementation
    }
} 
```

从 DAL 层：

```
public class UserRep : IUserRep
{
    private readonly IDapperRepository _iDapperRepository;
    public UserRep()
    {
         _iDapperRepository = new DapperRepository();
    }

    public IEnumerable<UserBO> GetAll()
    {
          return _iDapperRepository.GetAll<UserBO>("select * from users");
    }
    //Other methods
} 
```

在用户列表页面中，_iUserRep.GetAll() 被控制器调用。

从上面的代码中，通过调用 _iUserRep.GetAll() 或存储库类中的任何其他方法，DapperRepository 类被实例化。我的问题是，因为我在 DapperRepository 类中只有实用程序方法，所以删除 IDapperRepository 并使用“静态”方法将 DapperRepository 修改为“静态”是个好主意，这样我就可以在不实例化它的情况下调用这些方法。我想知道这样做是否会带来任何性能提升。

此外，感谢任何改进此设计的输入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T16:17:21.333

由于这是关于可取概念的问题，我将介绍我会做什么。首先尝试限制您的抽象和开销复杂性 - 首先简化，最后自动化。您是否有可能更改存储库实现以使用不同的 ORM？如果没有，请不要使用这种方法。这是老式的存储库风格，乍一看似乎还可以，但最终被重新评估和多余 - 至少在我看来。由于它是 ASP.MVC 应用程序，您可以尝试使用命令代替：

```
public abstract class BaseController : Controller
{
    public IDocumentSession DocumentSession { get; set; }

    protected override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        DocumentSession = ...OpenSession(); // initialize and open session
    }

    protected override void OnActionExecuted(ActionExecutedContext filterContext)
    {
        if (filterContext.IsChildAction)
        {
            return;
        }

        using (DocumentSession)
        {
            if (filterContext.Exception != null)
            {
                return;
            }

            if (DocumentSession != null)
            {
                DocumentSession.SaveChanges();
            }
        }
    }

    public void ExecuteCommand(Command cmd)
    {
        cmd.DocumentSession = DocumentSession;
        cmd.Execute();
    }

    public TResult ExecuteCommand<TResult>(Command<TResult> cmd)
    {
        ExecuteCommand((Command)cmd);
        return cmd.Result;
    }
} 
```

抽象命令定义：

```
public abstract class Command
{
    public IDocumentSession DocumentSession { get; set; }

    public abstract void Execute();
}

public abstract class Command<T> : Command
{
    public T Result { get; protected set; }
} 
```

示例命令实现：

```
public class GetUsers : Command<IList<User>>
{
    public IList<int> IDs { get; set; }

    public override void Execute()
    {
        return DocumentSession.Query<User>()...;
    }
} 
```

用法 - 执行表单控制器动作：

```
[HttpGet]
public NJsonResult GetUsers(string ids)
{
    var result = ExecuteCommand(new GetUsers
                                    {
                                        IDs = ids
                                    });
    //...
} 
```

在我看来，这不是一个微不足道的问题。需要相当多的考虑。为了更好地理解它，您可以在空闲时间尝试浏览 Ayende 的博客：

[http://ayende.com/blog/4784/architecting-in-the-pit-of-doom-the-evils-of-the-repository-abstraction-layer](http://ayende.com/blog/4784/architecting-in-the-pit-of-doom-the-evils-of-the-repository-abstraction-layer)

连同下面的系列（简短的帖子，真的很快就能看完）：

[http://ayende.com/blog/153889/limit-your-abstractions-analyzing-a-ddd-application](http://ayende.com/blog/153889/limit-your-abstractions-analyzing-a-ddd-application)

[http://ayende.com/blog/153921/limit-your-abstractions-application-eventsndash-what-about-change](http://ayende.com/blog/153921/limit-your-abstractions-application-eventsndash-what-about-change)

[http://ayende.com/blog/153953/limit-your-abstractions-application-eventsndash-proposed-solution-1](http://ayende.com/blog/153953/limit-your-abstractions-application-eventsndash-proposed-solution-1)

[http://ayende.com/blog/153985/limiting-your-abstractions-reflections-on-the-interface-segregation-principle](http://ayende.com/blog/153985/limiting-your-abstractions-reflections-on-the-interface-segregation-principle)

[http://ayende.com/blog/154017/limit-your-abstractions-application-eventsndash-proposed-solution-2ndash-cohesion](http://ayende.com/blog/154017/limit-your-abstractions-application-eventsndash-proposed-solution-2ndash-cohesion)

[http://ayende.com/blog/154049/limit-your-abstractions-application-eventsndash-event-processing-and-rx](http://ayende.com/blog/154049/limit-your-abstractions-application-eventsndash-event-processing-and-rx)

...从这里开始变得更有趣：

[http://ayende.com/blog/154081/limit-your-abstractions-you-only-get-six-to-a-dozen-in-the-entire-app](http://ayende.com/blog/154081/limit-your-abstractions-you-only-get-six-to-a-dozen-in-the-entire-app)

[http://ayende.com/blog/154113/limit-your-abstractions-commands-vs-tasks-did-you-forget-the-workflow](http://ayende.com/blog/154113/limit-your-abstractions-commands-vs-tasks-did-you-forget-the-workflow)

[http://ayende.com/blog/154145/limit-your-abstractions-all-cookies-looks-the-same-to-the-cookie-cutter](http://ayende.com/blog/154145/limit-your-abstractions-all-cookies-looks-the-same-to-the-cookie-cutter)

[http://ayende.com/blog/154177/limit-your-abstractions-so-what-is-the-whole-big-deal-about](http://ayende.com/blog/154177/limit-your-abstractions-so-what-is-the-whole-big-deal-about)

[http://ayende.com/blog/154209/limit-your-abstractions-refactoring-toward-reduced-abstractions](http://ayende.com/blog/154209/limit-your-abstractions-refactoring-toward-reduced-abstractions)

[http://ayende.com/blog/154241/limit-your-abstractions-the-key-is-in-the-infrastructurehellip](http://ayende.com/blog/154241/limit-your-abstractions-the-key-is-in-the-infrastructurehellip)

[http://ayende.com/blog/154273/limit-your-abstractions-and-how-do-you-handle-testing](http://ayende.com/blog/154273/limit-your-abstractions-and-how-do-you-handle-testing)

我希望它能让你对这个话题有另一种看法。

# html - 如何在 Google 自定义搜索中排除索引菜单

> ID：13648342
> 
> 赞同：1
> 
> 时间：2012-11-30T15:39:28.147
> 
> 标签：html, seo

您好我正在使用 Google 自定义搜索来搜索我网站中的内容。

但是，在搜索单词时，google 无法从页面中排除菜单，例如 [http://www.innosia.com/Home/ArticleSearch?q=efore&sitesearch=innosia.com](http://www.innosia.com/Home/ArticleSearch?q=efore&sitesearch=innosia.com)

如果您看到 efore，每个页面都会显示，因为每个页面都包含指向 Efore 页面的链接。如何告诉 Google 排除链接区域（左右菜单）并仅索引标题和内容区域？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T21:51:00.750

我一直在寻找相同的信息......我花了一段时间，但我在 Google 自定义搜索文档中找到了这个。这篇谷歌文章准确地解释了如何实现你想要的：

[http://support.google.com/customsearch/bin/answer.py?hl=en&answer=2364585&ctx=cb&src=cb&cbid=4iiarmion6fw&cbrank=1](http://support.google.com/customsearch/bin/answer.py?hl=en&answer=2364585&ctx=cb&src=cb&cbid=4iiarmion6fw&cbrank=1)

享受！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-07T02:55:50.283

接受的答案（耶利米）链接提到了添加，尽管这不再像这里解释的那样起作用：https: [//support.google.com/programmable-search/thread/16487981?hl=en](https://support.google.com/programmable-search/thread/16487981?hl=en)。在这个答案中，还有一个解决您的问题的方法。

目前，在谷歌搜索中没有快速简单的方法来隐藏页面内的内容，只能隐藏整个页面。

更多阅读： [https ://www.seroundtable.com/google-no-block-indexing-parts-pages-29144.html](https://www.seroundtable.com/google-no-block-indexing-parts-pages-29144.html)

[有没有办法阻止 Googlebot 索引页面的某些部分？](https://stackoverflow.com/questions/1497445/is-there-a-way-to-prevent-googlebot-from-indexing-certain-parts-of-a-page)

# visual-c++ - VC++ 编译器选项

> ID：13648343
> 
> 赞同：1
> 
> 时间：2012-11-30T15:39:30.680
> 
> 标签：visual-c++

我有一个 VC++ 6.0 项目，我现在正在使用 VS2008 进行编译。我有这段代码，它曾经在 VC++ 6 下编译，但在 VS2008 下抛出错误：

```
int CIDStorage::Length()

{

CIDStorage* m_ptr = this;

    for(int i = 0;m_ptr->m_ptrNext != NULL;i++)
        m_ptr = m_ptr->m_ptrNext;

    if(i == 0)
        if(m_ID.IsEmpty())
            return 0;

    return i+1;
} 
```

错误是 `'i' : undeclared identifier`

没有问题，我可以看到这是怎么发生的。所以...我要更改源代码吗？或者是否有我可以设置的编译器设置来解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T15:43:52.360

VC++ 6（通常为¹）遵循预标准规则，其中定义在 for 循环中的变量在 for 循环所在范围的其余部分保持定义。VC++ 2008 遵循标准规则，其中 for 循环定义了一个新范围，并且变量仅在该范围内定义。

解决方法很简单——在循环外定义变量：

```
int CIDStorage::Length()
{
    CIDStorage* m_ptr = this;
    int i;

    for(i = 0; m_ptr->m_ptrNext != NULL; i++)
        m_ptr = m_ptr->m_ptrNext;

    if(i == 0)
        if(m_ID.IsEmpty())
            return 0;

    return i+1;
} 
```

* * *

¹ VC++ 中的*编译器*实际上能够遵循正确的规则来确定`for`循环中定义的变量的范围。不幸的是，要遵守规则，您必须使用`/Za`标志，它试图尽可能严格地执行它知道的*所有规则。*事实证明这是完全不可用的，因为打开它，它会拒绝（实际上？）它自己的所有标题都包含错误！

# css - 原型：如何找到某个类的第一个元素？

> ID：13648350
> 
> 赞同：2
> 
> 时间：2012-11-30T15:39:51.710
> 
> 标签：css, prototypejs

我的文档中有 2 个 ul 元素。如何使用 PrototypeJS 找到 2 个中的第一个？我试过这段代码：

```
first = $$('ul[class="level0"]')[0];
second = $$('ul[class="level0"]')[1]; 
```

只有第一个是满的，第二个是空的。有任何想法吗？这是我的html：

```
<ul id="nav">
    <li class="level0 nav-1 first level-top parent">
        <ul class="level0">...</ul>
    </li>
    <li class="level0 nav-2 last level-top parent">
        <ul class="level0">...</ul>
    </li>
</ul> 
```

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T16:45:08.470

不要使用属性 CSS 选择器，而是使用类 CSS 选择器

```
first = $$('ul.level0')[0];
second = $$('ul.level0')[1]; 
```

但否则应该工作

还有其他方法也`$$()`返回一个元素数组（即使是一个），您可以参考`.first()`

```
first = $$('ul.level0').first() 
```

请让我们知道修复 HTML 是否有效，或者您的 javascript 控制台中是否出现任何错误 - 这可能会导致您遇到不同的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T11:11:52.487

利用

**第一的**

```
$('nav').down('.level0'); 
```

**第二**

```
$('nav').down('.level0', 1); 
```

干杯

# java - form:form 标签声明它接受动态属性但没有实现所需的接口

> ID：13648357
> 
> 赞同：2
> 
> 时间：2012-11-30T15:40:25.970
> 
> 标签：java, spring, jsp, jsp-tags

我的 JSP 中有这段代码：

```
<form:form commandName="Recipient" name="mailForm" 
           action="MailSuccess.jsp" method="get">
    <form:input path="toAddress"/>
    <form:input path="subject"/>
    <input type="submit" value="Send"/>
</form:form> 
```

我收到此错误：

> org.apache.jasper.JasperException: /SendMail.jsp(12,0) form:form 标签声明它接受动态属性但没有实现所需的接口

我的猜测是我缺少一些 JAR 文件，但我不确定。谁能提供一些信息说明为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-30T19:02:03.647

您确实缺少一些 JAR 文件，或者您可能拥有它们但版本错误（我认为包含标签处理程序的 Spring jar 是错误的，甚至可能错误地包含`jsp-api.jar`在您的应用程序中）。

**您从 servlet 容器中获得该异常，因为它认为 Spring Form 标记处理程序无效。**

在 JSP 2.0 中，标记处理程序添加了一个新特性，允许它们[获取动态属性](http://docs.oracle.com/cd/E13222_01/wls/docs100/taglib/tld.html#wp364354)。为此，您必须在 TLD 文件中使用`<dynamic-attributes>true</dynamic-attributes>`声明指定它，并且您的标签处理程序类必须实现该[`DynamicAttributes`](http://docs.oracle.com/javaee/6/api/javax/servlet/jsp/tagext/DynamicAttributes.html)接口。

从例外情况来看，您的应用程序很可能加载了 JSP 2.0 Spring TLD 文件以及包含`org.springframework.web.servlet.tags.form.FormTag`该类的旧版本 JAR。

您没有提到您正在使用的 Spring 版本。是3吗？也许它加载了一个 Spring 2 JAR，如果您使用 Maven 获取应用程序依赖项，这可能会发生。这是有道理的，因为类在版本之间发生了变化，所以**这将是我要检查的第一件事**：

**[FormTag 版本 2](http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/web/servlet/tags/form/FormTag.html)：**所有实现的接口：Serializable、IterationTag、JspTag、Tag、TryCatchFinally、EditorAwareTag。

**[FormTag 版本 3](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/web/servlet/tags/form/FormTag.html)：**所有实现的接口：Serializable、 **DynamicAttributes**、IterationTag、JspTag、Tag、TryCatchFinally、EditorAwareTag。

# jquery - ajax 在 Firefox 中使用加载器 gif 减慢速度

> ID：13648358
> 
> 赞同：0
> 
> 时间：2012-11-30T15:40:28.467
> 
> 标签：jquery, ajax, firefox

这是我的 jquery ajax 设置代码，在 chrome 中运行良好，但在 Firefox 中非常慢，我发现是加载器 gif 导致了问题，没有加载器动画，ajax 在 Firefox 中运行很快，有人知道为什么吗？非常感谢您。

Javascript：

```
var div=$("<div id='mask'/>");
$.ajaxSetup({
    beforeSend:function(jqxhr,settings){                          
        div.addClass('loader').appendTo('body');                         
    }
    ,complete:function(){
        div.remove();        
    }
}); 
```

CSS：

```
#mask {
    position:fixed;
    top:0;
    left:0;
    right:0;
    bottom:0;
    opacity:0.2;
    background-color:#fff;
}

.loader {
    background:url(ajax-loader.gif) center center no-repeat;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T15:46:48.437

首先，关闭你的 div。另外，您是否尝试过预加载您的 GIF？2.5kb 并不能真正减慢您的 ajax 查询速度……但是哦，没有什么是不可能的。顺便说一句，你的元素是#mask。

1.  在 HTML 页面上创建掩码元素：

`<div id="mask"> </div>`

1.  CSS它到：

> ```
> position:fixed;
> top:0;
> left:0;
> right:0;
> bottom:0;
> opacity:0.2;
> background-color:#fff;
> display : none;
> background:url(ajax-loader.gif) center center no-repeat; 
> ```

1.  在你的 javascript 中：

> ```
> var div = $("#mask");
> $.ajaxSetup({
>     beforeSend:function(jqxhr,settings){                          
>         div.show();                         
>     }
>     ,complete:function(){
>         div.hide();        
>     }
> }); 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T15:48:54.117

我猜那是因为您为每个 ajax 请求在正文中添加和删除了 div。我建议您尝试在 html 中声明它并显示/隐藏：

```
#mask {
 ..
 display: none;
 background:url(ajax-loader.gif) center center no-repeat;
 ..
}

$.ajaxSetup({
    beforeSend:function(jqxhr,settings){                          
        $('#mask').show();
    }
    ,complete:function(){
        $('#mask').hide();
    }
}); 
```

# iphone - 使用 NSPredicate 覆盖核心数据信息

> ID：13648359
> 
> 赞同：0
> 
> 时间：2012-11-30T15:40:27.790
> 
> 标签：iphone, objective-c, ios

我正在尝试使用 NSPredicate 编辑核心数据条目中的条目，但我不完全确定它是如何工作的。

我正在尝试根据来自另一个对象的 id 获取实体，但我看不出我哪里出错了。这是我的有效数据模型：实体：myEntity，属性：名称、id、值。

我正在尝试通过以下方式在数据库中检索正确的对象：

```
 NSEntityDescription *entity = [NSEntityDescription entityForName:@"myEntity" inManagedObjectContext:self.managedObjectContext];
    NSFetchRequest *request = [[NSFetchRequest alloc] init];
    [request setEntity:entity];

    NSPredicate *predicate = [NSPredicate predicateWithFormat:@"id == %@", self.itemToEdit.ID];
    [request setPredicate:predicate];

    NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"name" ascending:YES];
    NSArray *sortDescriptors = [[NSArray alloc] initWithObjects:sortDescriptor, nil];
    [request setSortDescriptors:sortDescriptors];

    NSError *error;

    MyEntity *myEntity = [[self.managedObjectContext executeFetchRequest:request error:&error] objectAtIndex: 0];
    myEntity.value = self.itemToEdit.anotherValue;

    [self.managedObjectContext save:&error]; 
```

无论出于何种原因，数据都没有被保存，应用程序也没有崩溃，这让我相信问题出在谓词上。无论如何，代码有什么问题？请注意，itemToEdit 不是 myEntity 类型，它是另一个对象，但分配类型是相同的。

问候，
迈克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T16:01:16.707

结案伙计们。我犯的愚蠢错误。我非常专注于让 Core Data 的这个新部分正常工作（我觉得这令人生畏），以至于我实际上忘记了分配 self.itemToEdit.value。很抱歉浪费您的时间。

麦克风

# java - 等距平铺选择

> ID：13648362
> 
> 赞同：1
> 
> 时间：2012-11-30T15:40:33.130
> 
> 标签：java, math, game-engine, isometric

我数学不是很好，所以我希望你们中的一些人能帮忙？

我正在尝试创建一个函数来将鼠标坐标转换为等轴测视图中的特定图块。

它不会让我出于愚蠢的原因发布图片，所以我只是链接图片：

[关联](http://i.imgur.com/SaxTk.png)

到目前为止，我看到的所有算法都适用于 X 和 Y 轴对角线，我的游戏目前是这样设置的，我想保持这样。

有没有一种算法，如果鼠标在红点处，它会返回它所在的瓷砖的坐标？(6,2)

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T15:44:41.223

有一个好的开始：[http ://www.java-gaming.org/index.php?topic=23656.0](http://www.java-gaming.org/index.php?topic=23656.0)

享受 ：）

编辑

完全受信任的“DrDobb's”网站，全文：[http ://www.drdobbs.com/parallel/designing-isometric-game-environments/184410055](http://www.drdobbs.com/parallel/designing-isometric-game-environments/184410055)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T12:32:56.857

```
 <0;4>
 x      <0;3> <1;4>
     <0;2> <1;3> <2;4>
  <0;1> <1;2> <2;3> <3;4>
<0;0> <1;1> <2;2> <3;3> <4;4>
  <1;0> <2;1> <3;2> <4;3> 
     <2;0> <3;1> <4;2> 
  y     <3;0> <4;1> 
           <4;0> 
```

我像上面一样渲染了瓷砖。

解决方案非常简单！

第一件事：

我的瓷砖宽度和高度都是 = 32 这意味着在等轴测视图中，宽度 = 32 和高度 = 16！在这种情况下 Mapheight 为 5（最大 Y 值）

当 y_mouse=MapHeight/tilewidth/2 且 x_mouse = 0 时，y_iso & x_iso == 0

当 x_mouse +=1, y_iso -=1

所以首先我计算“每像素变换”

TileY = ((y_mouse*2)-((MapHeight*tilewidth)/2)+x_mouse/2;

TileX = x_mouse-TileY;

找到我只是通过 tilewidth 划分的 tile 坐标

TileY = TileY/32；TileX = TileX/32；

完毕！！从来没有任何问题！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-02T11:52:27.980

实际上，一旦您将头缠住它，这很容易。您所要做的就是找出您的鼠标相对于地图的位置，然后反转您绘制图块的方式。

我在双“for”循环中绘制我的地图，如下所示：

```
For x coord: x * (TileWidth / 2) - (y * (TileWidth / 2))
For y coord: x * (TileHeight / 2) + (y * (TileHeight / 2)) 
```

所以我的 x 从左上到右下，我的 y 从右上到左下。但是请注意，对于第一个图块，世界坐标将为 0,0，但顶部像素从 x=0 + (tilewidth / 2) 开始，因此当我们要查找鼠标在哪个图块上时，我们必须对其进行补偿. （或者我们可以通过给它一个偏移量来为整个世界本身做这件事）。

现在首先我们必须找到鼠标相对于世界的位置，因为你可能想要一个移动的相机。我的相机中心从 0,0 开始，所以我必须将鼠标补偿一半的屏幕宽度，如下所示：

```
mouseWorldPosX = mouse.x + cam.x - (screen.width / 2)
mouseWorldPosY = mouse.y + cam.y - (screen.height / 2) 
```

这就是我们需要计算鼠标位置回到平铺位置的全部内容。

对于 X：

```
tileX = (mouseWorldPosX + (2 * mouseWorldPosY) - (tileWidth / 2)) / tileWidth 
```

如您所见，我们将整个事物除以 tilewidth，因为我们在 draw 方法中将其相乘。(tileWidth / 2) 只是为了补偿我前面提到的偏移量。

对于 Y：

```
tileY = (mouseWorldPosX - (2 * mouseWorldPosY) - (tileHeight / 2) / -tileWidth 
```

它实际上是相同的，但反过来。我们减去 Y 世界位置，因为 Y 轴反向运行。这次我们补偿了瓷砖高度的偏移量，并将整个物体除以负瓷砖宽度，因为它以另一种方式运行。

我希望这有助于下面是我查找的方法的一个工作示例，它返回一个带有图块坐标的向量：

```
public Vector2 MouseTilePosition(Camera cam, GraphicsDevice device)
    {
        float mPosX = newMouseState.X + (cam.Position.X - (device.Viewport.Width / 2));
        float mPosY = newMouseState.Y + (cam.Position.Y - (device.Viewport.Height / 2));

        float posx = (mPosX + (2 * mPosY) - (Map.TileWidth / 2)) / Map.TileWidth;
        float posy = (mPosX - (2 * mPosY) - (Map.TileHeight / 2)) / -Map.TileWidth;

        return new Vector2((int)posx, (int)posy);
    } 
```

# c# - 如何在 C# 中手动构造 SOAP 信封？

> ID：13648363
> 
> 赞同：4
> 
> 时间：2012-11-30T15:40:33.033
> 
> 标签：c#, .net, xml, soap

我正在尝试在 C# 中手动构造一个 SOAP 信封。我最初通过 StringBuilder 构建它并通过 LoadXml 方法将其添加到 XmlDocument 的路线。但是，在执行时，我遇到了以下异常：

> System.Xml.XmlException : ':' 字符，十六进制值 0x3A，不能包含在名称中。第 1 行，位置 200。

我要创建的信封是：

```
<soap:Envelope 
    xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:xsd="http://www.w3.org/2001/XmlSchema">
    <soap:Header>
        <wsrp:path
            soap:actor="http://schemas.xmlsoap.org/soap/actor/next"
            soap:mustUnderstand="1"
            xmlns:wsrp="http://schemas.xmlsoap.org/rp">
        <wsrp:action>
            http://abcd.com/Webservices
        </wsrp:action>
        <wsrp:to>
        http://abcd.com/Webservices.asmx
        </wsrp:to>
        <wsrp:id>
    uuid:aaaaa0a7-9e46-432b-8f1b-35037077601f
    </wsrp:id>
        </wsrp:path>
        <wsu:Timestamp
        xmlns:wsu="http://schemas.xmlsoap.org/ws/2002/07/utility">
            <wsu:Created>
            2012-11-30T10:38:13z
            </wsu:Created>
            <wsu:Expires>
                2012-11-30T11:38:13z
            </wsu:Expires>
        </wsu:Timestamp>
        <wsse:Security soap:mustUnderstand="1" xmlns:wsse="http://schemas.xmlsoap.org/ws/2002/07/secext">
            <wsse:UsernameToken 
            wsu:Id="SecurityToken-00c26e1a-3b3b-400f-a99a-3aa54cf8c8ff" 
                xmlns:wsu="http://schemas.xmlsoap.org/ws/2002/07/utility">
            <wsse:Username>username</wsse:Username>
            <wsse:Password Type="wsse:PasswordText">password</wsse:Password>
            <wsse:Nonce>NBzqolcwIZrAOYw1vLyucDM3sQQ=</wsse:Nonce>
            <wsu:Created>2012-11-30T10:38:13z</wsu:Created>
            </wsse:UsernameToken>
       </wsse:Security>
    </soap:Header>
    <soap:Body>
        <MethodName xmlns="http://abcd.com/Webservices">
            <ValueField>Ford</ValueField>
        </MethodName>
    </soap:Body>
</soap:Envelope> 
```

我很难理解为什么编译器对“：”不满意。有没有更好的方法来做到这一点/我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T14:42:07.717

感谢您的输入。仅供参考，对我有用的解决方案是在字符串前面加上'@'符号，而不是使用 \" 转义序列作为双引号，我选择了 "" （即在转义序列的任何地方使用两组双引号将是必需的） - 工作一种享受。

# android - Android 4.1：启动音乐

> ID：13648365
> 
> 赞同：1
> 
> 时间：2012-11-30T15:40:39.217
> 
> 标签：android, startup

在Android ICS中，以下代码运行良好，`bootanimation_main.cpp`开机时可以听到音乐。但是相同的代码在 Android JB 中不起作用。开机时听不到音乐，而且音乐必须很长才能听到最后过去的音乐[*意思不清楚*]。但是当我在 adb shell 中运行 bootanimation 时，可以听到音乐。

```
int index;
MediaPlayer* mp = new MediaPlayer();
if (mp->setDataSource("/sdcard/bootup.mp3", NULL) == NO_ERROR) {
  mp->setAudioStreamType(AudioSystem::ENFORCED_AUDIBLE);
  mp->prepare();
}
AudioSystem::getStreamVolumeIndex(AudioSystem::ENFORCED_AUDIBLE, &index);
if (index != 0) {
  mp->seekTo(0);
  mp->start();
} 
```

# android - BluetoothSocket.connect() 抛出异常“读取失败”

> ID：13648373
> 
> 赞同：10
> 
> 时间：2012-11-30T15:41:03.913
> 
> 标签：android, bluetooth

我有一个通过蓝牙连接到设备的项目。它曾经相当可靠地工作，但现在`BluetoothSocket.connect()`每次调用都失败。（好吧，我在 4 小时内的数千次尝试中让它连接一次。）大部分代码取自 API 中的标准示例聊天代码，除了获取`BluetoothSocket`设备本身的常见修改：

```
Method m = device.getClass().getMethod(
              "createRfcommSocket", new Class[] { int.class });
tmp = (BluetoothSocket) m.invoke(device, Integer.valueOf(1)); 
```

这是感兴趣的方法，一旦`BluetoothSocket`获得 a 就会运行：

```
public void run() {
  setName("ConnectThread" + mSocketType);

  // Always cancel discovery because it will slow down a connection
  mAdapter.cancelDiscovery();

  // Make a connection to the BluetoothSocket
  try {
    mmSocket.connect();
  } catch (Exception e) {
    Log.e(TAG, "Connection to " + mmDevice.getName() + " at "
                + mmDevice.getAddress() + " failed:" + e.getMessage());
    // Close the socket
    try {
        mmSocket.close();
    } catch (Exception e2) {
        Log.e(TAG, "unable to close() " + mSocketType
                + " socket during connection failure", e2);
    }
    connectionFailed(e.getMessage());
    return;
  }

  // Reset the ConnectThread because we're done
  synchronized (BluetoothChatService.this) {
    mConnectThread = null;
  }

      // Start the connected thread
  connected(mmSocket, mmDevice, mSocketType);
} 
```

相关的日志条目（在调用时捕获异常时打印`connect()`）是这样的：

> 11-30 10:23:51.685：E/BluetoothChatService(2870)：在 00:06:66:42:8E:01 连接到 ZYNO-700091 失败：读取失败，套接字可能关闭，读取 ret：-1

这个错误过去偶尔会出现一次。我有一个积极的重新连接系统 - 它基本上一遍又一遍地敲击连接，直到它连接，如果它曾经断开连接，它会再次开始敲击它。因此，它会杀死连接线程并不断从头开始。我曾考虑过那里可能存在问题-可能是多线程问题，或者可能是在处理套接字清理/初始化时。但是，如果是这种情况，我仍然希望第一次连接尝试成功，因为该系统在连接尝试失败之前不会启动。

我查看了引发异常的[源代码。](https://android.googlesource.com/platform/frameworks/base/+/9a7debe5857ffc7c71cfc4082b1b6d72a5cf81cd/core/java/android/bluetooth/BluetoothSocket.java)问题似乎是底层证券`InputStream`没有数据。当然，这并不是真正的答案，只是朝着它迈出的一步。为什么流没有数据？

我试图对潜在问题保持开放的态度。我得到`BluetoothSocket`正确的吗？事实上，它曾经是一个间歇性问题，现在几乎是不变的，这让我怀疑多线程，但与 C++ 相比，这在 Java 中是一个相对简单的话题——如果你知道自己在做什么，就很难搞砸。另外，该代码的大部分（特别是处理同步线程的部分）直接来自示例代码。

另一端的设备是嵌入式蓝牙设备，因此从那端调试问题的希望不大。

更新 ============================

我突然想到这可能是由于操作系统升级（我在 Galaxy Nexus 手机上运行 - 我有几个要测试）。所以我用 4.0.4 打开了一部新手机的包装，它工作了！因此，然后返回并在两个运行 4.2 的原始测试手机上进行测试，期待我一直看到的失败。奇怪的是，现在它也可以在这些手机上使用。我想说我做了一些事情来让这项工作再次发挥作用，但我没有。我仍然很困惑，现在也怀疑这个东西在我真正需要的时候会起作用。

我想知道是否有可能以某种方式使用 4.0.4 连接可以正确设置服务器模块的状态，使其接受 4.2 设备？只是在黑暗中开枪，我想...

更新 2 ============================

我发现取消配对和重新配对将允许设备连接。这是一种解决方法，但总比没有好。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-03T18:54:33.653

Jellybean 具有完全不同的蓝牙堆栈，因此版本差异肯定会触发某些事情，但这本身并不能解释为什么它在连接旧设备后仍然工作或不工作。会不会和配对有关？如果再次发生，请尝试从设备取消配对并再次配对。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-13T12:48:46.750

我知道这是一个老问题。但由于我无法在网上找到任何解决方案，这是我最近创建的一种解决方法：[IOException: read failed, socket might closed - Android 4.3 上的蓝牙](https://stackoverflow.com/questions/18657427/ioexception-read-failed-socket-might-closed-bluetooth-on-android-4-3/18786701#18786701)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-07-27T07:13:21.983

就我而言，这是由于`createRfcommSocketToServiceRecord()`功能中的 UUID 错误造成的。我想连接到树莓派 3 中的 SPP 串行配置文件，我使用了这个 UUID：

```
private static final UUID MY_UUID_SECURE =
            UUID.fromString("00001101-0000-1000-8000-00805F9B34FB"); 
```

我在 SPP 的 android 文档页面的某个地方找到了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-06-06T07:35:01.063

我在通过蓝牙模块连接到 arduino 时遇到了同样的问题。这个问题只在与 arduino 连接时出现，因为它与另一个安卓手机蓝牙连接顺畅。对我有用的是更改 UUID 字符串..

# asp.net - 将 ASP.Net DetailsView 置于编辑模式和更新模式

> ID：13648377
> 
> 赞同：2
> 
> 时间：2012-11-30T15:41:24.343
> 
> 标签：asp.net, vb.net, detailsview, updatemodel, editmode

我们正在使用带有 VB.Net 代码隐藏文件的 ASP.Net DetailsView。我们试图通过允许用户单击“编辑”按钮然后单击“更新”按钮来允许用户在 DetailsView 中编辑和保存更改。

当用户单击 Edit 按钮时没有任何反应，因此我们为 Edit 按钮添加了 OnClick 处理程序。DetailsView 将进入编辑模式，但前提是用户单击 Edit 按钮两次。（也许是一个 ASP.Net 错误？）

一旦 DetailsView 处于编辑模式，Update 和 Cancel 按钮就会按预期显示，但是当用户单击其中任何一个按钮时都不会发生任何事情。我们在 Update 按钮上放置了一个 OnClick，试图强制 DetailsView 更新，但 .ChangeMode(DetailsViewMode.) 的唯一选择是 Edit、Insert、ReadOnly。

我还认为 DetailsViews 不需要额外的 OnClick，除非我们需要执行特殊处理。

这是 DetailsView 的标记：

```
<asp:DetailsView 
    ID="DetailsView" 
    runat="server" 
    Height="50px" 
    Width="218px" AutoGenerateRows="False">

    <Fields>

        <asp:TemplateField ShowHeader="False">

            <EditItemTemplate>
                <asp:Button ID="ButtonUpdate" runat="server" CausesValidation="True" 
                    CommandName="Update" Text="Update" OnClick="ButtonUpdate_Click"  />
                &nbsp;<asp:Button ID="ButtonCancelUpdate" runat="server" CausesValidation="False" 
                    CommandName="Cancel" Text="Cancel" />
            </EditItemTemplate>

            <ItemTemplate>
                <asp:Button ID="ButtonEdit" runat="server" CausesValidation="False" 
                    CommandName="Edit" Text="Edit" OnClick="ButtonEdit_Click"/>
            </ItemTemplate>
        </asp:TemplateField>

        <asp:BoundField DataField="Forename" HeaderText="First Name:" />
    </Fields>
</asp:DetailsView> 
```

这是代码隐藏文件中的编码：

```
Public Class StudentDetailsMaintenance
    Inherits System.Web.UI.Page

    Dim theTableAdapter As New DataSetSingleStudentTableAdapters.StudentsMaintenanceTableAdapter

    Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load

        ' Load the data from the database into the DetailsView.
        '------------------------------------------------------
        DetailsView.DataSource = theTableAdapter.GetDataByStudentID(StudentMaintenance.IntStudentID)
        DetailsView.DataBind()
    End Sub

    Protected Sub ButtonEdit_Click(sender As Object, e As EventArgs)

        ' Place the DetailsView into Edit mode.
        '--------------------------------------
        DetailsView.ChangeMode(DetailsViewMode.Edit)
    End Sub

    Protected Sub ButtonUpdate_Click(sender As Object, e As EventArgs)

        ' Place the DetailsView into Update mode.
        '----------------------------------------
        DetailsView.ChangeMode(DetailsViewMode.)
    End Sub
End Class 
```

ButtonUpdate_Click 例程不完整，因为我们不知道如何让 DetailsView 进行更新。

附加说明：这是我们第一次尝试通过不在标记中设置 DataSource 来执行 DetailsView。我们没有这样做，而是使用 DataSet 设计器中创建的 DataSet TableAdapter 中的数据。

如果我们在标记中执行 DetailsView 和 DataSource ，那么 Edit 和 Update 按钮可以正常工作。我们也这样做是为了尽可能消除额外的编码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-06-03T16:56:52.913

如果您想要 DetailsView 的自动编辑行为，您需要使用 CommandField 来显示 Edit 按钮：

```
<asp:DetailsView id="dvDetailsView" runat="server" DataSourceId="sqlDS" DataKeyNames="primaryKey">
  <Fields>
    <asp:CommandField ButtonType="Button" ShowEditButton="true" />
  </Fields>
</asp:DetailsView> 
```

如上所述，您需要包含 DataKeyNames 属性来指定数据源的主键，以便 ASP.NET 知道要更新数据源中的哪个记录。同样如上所述，您需要确保 Bind("columnName") 语句使用与数据存储中使用的字段名称相同的字段名称。

此外，请确保在 SqlDataProvider（或数据存储的等效项）中提供 UpdateCommand，以便进行更新。

现在，当您将 DetailsView 置于 Edit 模式时，Update 和 Cancel 按钮将自动显示在原处。如果您需要在数据存储中更新数据之前对数据进行一些处理，则在后面的代码中处理 DetailView 的 ItemUpdating 事件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T15:44:34.587

好吧，简单地看一下，尝试将 Page_Load 数据绑定包装在 If Not Page.IsPostback 中。

回发对数据绑定控件造成严重破坏。

# css - 是否可以使用 div -> ul 创建纯 CSS 下拉菜单

> ID：13648378
> 
> 赞同：0
> 
> 时间：2012-11-30T15:41:31.357
> 
> 标签：css

我喜欢简约的标记。而且我想学习一两件新东西：）希望你能帮助我！

我想要一个简单的下拉菜单，只有 CSS。

我有以下结构：

```
<div>
<a>
<ul> 
```

`<a>`应该打开下拉菜单。

这可以做到吗？

我为你做了一个小小提琴。

[http://jsfiddle.net/ZxbGq/](http://jsfiddle.net/ZxbGq/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T15:50:15.007

这是可能的。我喜欢这种方法：

HTML

```
<ul>
    <li>
        <a href="">drop</a>
        <ul>
            <li>
                <a href="">inside drop</a>
            </li>
        </ul>
   </li>
</ul> 
```

CSS

```
ul {
    list-style-type:none;
}
ul > li > ul{
    position:absolute;
    display:none;
}
ul > li > a{
    /*your top anchor properties*/
}
ul > li:hover > ul{
    display:block;
} 
```

我使用锚的父列表对象`display`将内部无序列表声明为`block`. 但是，如果您更喜欢使用锚点。使用：`ul > li > a:hover ul > li > ul{}`。

如果不坚持我提供的选择器，上面的选择器应该可以工作。祝菜单好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T16:10:42.187

CSS方法：

```
<style>
    #showMe:hover > #loginboard{
        display:block;
    }
</style>
        <div id="showMe">
            <a id="logindd" onMouseover="sho()" href="#">Login</a>

            <ul id="loginboard">
                <li>
                    <form method="post" action="/wp-login.php" name="loginform">    
                        <input type="text" name="log" id="username">
                        <input type="text" name="pwd" id="password">
                        <label for="rememberme"><input type="checkbox" value="forever" id="rememberme" name="rememberme">Keep me signed in!</label>
                        <input type="submit" value="Sign in">
                    </form>
                    <span id="forgotpassword"><a href="#">Forgot Password?</a></span>
                    <span id="createaccountbtn"><a href="#">Create an account!</a></span>
                </li>
            </ul>
        </div> 
```

JavaScript 方法：

```
<script>
    function sho(){
        document.getElementById('loginboard').style.display = 'block';
    }
</script> 
```

两种方法都有效，但我更喜欢 CSS 版本。您所要做的就是将 showMe div 添加到您的代码中，一切都应该可以工作。

# php - 有没有办法查看哪个 php 脚本占用了 cpu？

> ID：13648380
> 
> 赞同：2
> 
> 时间：2012-11-30T15:41:37.923
> 
> 标签：php, performance, wordpress, cpu

我在 nginx 上运行 wordpress，在 centos6 上使用 spawn-fcgi。我有很多流量通过这台服务器，cpu 上的负载通常很好，但有时 cpu 会在很长一段时间内达到 99% 的最大值，并且`top`命令说罪魁祸首是几个`php-cgi`进程。有什么办法可以让我看到是什么 php 脚本导致我的 cpu 最大化？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-07T00:14:53.520

`ps faxuewwww`为我解决了问题

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T16:08:55.340

这听起来像是 ps -ef 与 grep 的工作，并使用您找到的 PID 对您的顶部显示进行一些过滤。我不确定您的流程是什么样的，但说您正在寻找通用的 php 流程。

你可以做：

```
ps -ef | grep php 
```

ps -ef 将以相当详细的方式获取所有进程，而 grep 将过滤结果以仅返回您想要的内容。接下来，您使用 pid 的 -p 标志打开顶部，并将您找到的 pid 列表传递给它，逗号分隔。例如：

```
top -p 123,456,789 
```

那应该让您只监视您想要的那些，并且您可以参考 ps -ef | 的结果。grep 将顶部的 pid 与相关的特定脚本相匹配。希望这可以帮助。

# javascript - 从 LI 获取索引号

> ID：13648381
> 
> 赞同：-1
> 
> 时间：2012-11-30T15:41:39.473
> 
> 标签：javascript, jquery

> **可能重复：**
> [使用 jQuery 获取父索引](https://stackoverflow.com/questions/1306503/get-parent-index-with-jquery)

如果我点击`li a`- 我想获得一个索引号`li`

例如：

```
<ul class="tabs">
    <li><a class="active" href='#'>One</a></li>
    <li><a href='#'>Two</a></li>
    <li><a href='#'>Three</a></li>
</ul> 
```

我已经尝试过 jQuery 代码，它似乎不起作用？

```
$("ul.tabs li a").on("click",function() {
        var li = $(this).prev();
        alert($(li).index(this));
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T15:44:07.410

你`.parent()`不需要`.prev()`

```
var li = $(this).parent();
alert( li.index() ); 
```

[**演示**](http://jsfiddle.net/hcjGb/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T15:50:37.833

这个对我有用；[http://jsfiddle.net/mqdAe/](http://jsfiddle.net/mqdAe/)

HTML

```
<ul class="tabs">
    <li><a class="active" href='#'>One</a></li>
    <li><a href='#'>Two</a></li>
    <li><a href='#'>Three</a></li>
</ul> 
```

JS

```
$("ul.tabs li a").on("click",function() {
        var li = $(this).parent();
        alert(li.index());
}); 
```

# c# - 双倍的？= 双倍？+ 双倍？

> ID：13648382
> 
> 赞同：79
> 
> 时间：2012-11-30T15:41:41.287
> 
> 标签：c#, .net

我想 ping StackOverflow 社区，看看我是否对这个简单的 C# 代码失去了理智。

我正在 Windows 7 上开发，在 .NET 4.0、x64 调试中构建它。

我有以下代码：

```
static void Main()
{
    double? y = 1D;
    double? z = 2D;

    double? x;
    x = y + z;
} 
```

如果我调试并在结束大括号上放置一个断点，我希望在 Watch Window 和 Immediate Window 中 x = 3。x = null 代替。

如果我在 x86 中调试，事情似乎工作正常。x64 编译器有问题还是我有问题？

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2012-11-30T18:38:43.693

Douglas 对 JIT 优化死代码的回答是正确的（ x86 和 x64 编译器*都*会这样做）。但是，如果 JIT 编译器正在优化死代码，它会立即显而易见，因为它`x`甚至不会出现在 Locals 窗口中。此外，当您尝试访问监视和即时窗口时，它会给您一个错误：“名称 'x' 在当前上下文中不存在”。这不是你所描述的正在发生的事情。

您所看到的实际上是 Visual Studio 2010 中的一个错误。

首先，我尝试在我的主机上重现这个问题：Win7x64 和 VS2012。对于 .NET 4.0 目标，`x`当它在右花括号上中断时等于 3.0D。我决定也尝试 .NET 3.5 目标，并且将其`x`设置为 3.0D，而不是 null。

由于我在 .NET 4.0 之上安装了 .NET 4.5，因此无法完美重现此问题，因此我启动了一个虚拟机并在其上安装了 VS2010。

在这里，我能够重现该问题。在方法的右花括号上有一个断点`Main`，在监视窗口和本地窗口中，我都看到`x`了`null`. 这是它开始变得有趣的地方。我改为针对 v2.0 运行时，发现它在那里也为空。当然不可能，因为我在另一台计算机上拥有相同版本的 .NET 2.0 运行时，它成功显示为 .NET`x`值`3.0D`。

那么，发生了什么事呢？在windbg中进行了一些挖掘之后，我发现了问题：

**VS2010 在实际分配 x 之前向您显示 x 的值**。

我知道这不是它的样子，因为指令指针超出了该`x = y + z`行。您可以通过在该方法中添加几行代码来自行测试：

```
double? y = 1D;
double? z = 2D;

double? x;
x = y + z;

Console.WriteLine(); // Don't reference x here, still leave it as dead code 
```

在最后一个花括号上有一个断点，locals 和 watch 窗口显示`x`为等于`3.0D`. *但是，如果您单步执行代码，*您会注意到 VS2010`x`直到您单步执行.*`Console.WriteLine()`*

 *我不知道是否曾经向 Microsoft Connect 报告过这个错误，但您可能希望这样做，并以此代码为例。但是，它显然已在 VS2012 中修复，所以我不确定是否会有更新来修复此问题。

* * *

**以下是 JIT 和 VS2010 中实际发生的情况**

通过原始代码，我们可以看到 VS 在做什么以及为什么会出错。我们还可以看到该`x`变量没有得到优化（除非您已将程序集标记为在启用优化的情况下进行编译）。

首先，我们看一下IL的局部变量定义：

```
.locals init (
    [0] valuetype [mscorlib]System.Nullable`1<float64> y,
    [1] valuetype [mscorlib]System.Nullable`1<float64> z,
    [2] valuetype [mscorlib]System.Nullable`1<float64> x,
    [3] valuetype [mscorlib]System.Nullable`1<float64> CS$0$0000,
    [4] valuetype [mscorlib]System.Nullable`1<float64> CS$0$0001,
    [5] valuetype [mscorlib]System.Nullable`1<float64> CS$0$0002) 
```

这是调试模式下的正常输出。Visual Studio 定义在分配期间使用的重复局部变量，然后添加额外的 IL 命令以将其从 CS* 变量复制到其各自的用户定义局部变量。下面是显示这种情况的相应 IL 代码：

```
// For the line x = y + z
L_0045: ldloca.s CS$0$0000 // earlier, y was stloc.3 (CS$0$0000)
L_0047: call instance !0 [mscorlib]System.Nullable`1<float64>::GetValueOrDefault()
L_004c: conv.r8            // Convert to a double
L_004d: ldloca.s CS$0$0001 // earlier, z was stloc.s CS$0$0001
L_004f: call instance !0 [mscorlib]System.Nullable`1<float64>::GetValueOrDefault()
L_0054: conv.r8            // Convert to a double 
L_0055: add                // Add them together
L_0056: newobj instance void [mscorlib]System.Nullable`1<float64>::.ctor(!0) // Create a new nulable
L_005b: nop                // NOPs are placed in for debugging purposes
L_005c: stloc.2            // Save the newly created nullable into `x`
L_005d: ret 
```

让我们用 WinDbg 做一些更深入的调试：

如果你在 VS2010 中调试应用程序并在方法结束时留下断点，我们可以轻松地以非侵入模式附加 WinDbg。

`Main`这是调用堆栈中方法的框架。我们关心IP（指令指针）。

```
0:009> !clrstack
操作系统线程 ID：0x135c (9)
子 SP IP 呼叫站点
000000001c48dc00 000007ff0017338d ConsoleApplication1.Program.Main(System.String[])
[等等...]

```

如果我们查看该`Main`方法的本机机器代码，我们可以看到在 VS 中断执行时已经运行了哪些指令：

```
000007ff`00173388 e813fe25f2 调用 mscorlib_ni+0xd431a0
           (000007fe`f23d31a0) (System.Nullable`1[[System.Double, mscorlib]]..ctor(Double), mdToken: 0000000006001ef2)
****000007ff`0017338d cc int 3****
000007ff`0017338e 8d8c2490000000 lea ecx,[rsp+90h]
000007ff`00173395 488b01 mov rax,qword ptr [rcx]
000007ff`00173398 4889842480000000 mov qword ptr [rsp+80h],rax
000007ff`001733a0 488b4108 mov rax,qword ptr [rcx+8]
000007ff`001733a4 4889842488000000 mov qword ptr [rsp+88h],rax
000007ff`001733ac 488d8c2480000000 lea rcx,[rsp+80h]
000007ff`001733b4 488b01 mov rax,qword ptr [rcx]
000007ff`001733b7 4889442440 mov qword ptr [rsp+40h],rax
000007ff`001733bc 488b4108 mov rax,qword ptr [rcx+8]
000007ff`001733c0 4889442448 mov qword ptr [rsp+48h],rax
000007ff`001733c5 eb00 jmp 000007ff`001733c7
000007ff`001733c7 0f28b424c0000000 movaps xmm6,xmmword ptr [rsp+0C0h]
000007ff`001733cf 4881c4d8000000 添加 rsp,0D8h
000007ff`001733d6 c3 ret

```

使用我们从`!clrstack`in获得的当前 IP `Main`，我们看到在调用的构造函数*之后直接在指令上暂停执行。*`System.Nullable<double>`（`int 3`是调试器用来停止执行的中断）我已经用 * 包围了该行，您也可以`L_0056`在 IL 中匹配该行。

随后的 x64 程序集实际上将其分配给局部变量`x`。我们的指令指针还没有执行该代码，所以 VS2010`x`在本地代码分配变量之前过早地中断。

编辑：在 x64 中，`int 3`指令放在赋值代码之前，如上所示。在 x86 中，该指令放在赋值代码之后。这就解释了为什么 VS 只在 x64 中早期中断。很难说这是 Visual Studio 还是 JIT 编译器的错。我不确定哪个应用程序插入断点挂钩。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-11-30T15:45:58.690

众所周知，x64 JIT 编译器在优化方面比 x86 更积极。（可以参考“<a href="http://blogs.msdn.com/b/clrcodegeneration/archive/2009/08/13/array-bounds-check-elimination-in-the-clr.aspx" rel ="nofollow noreferrer">CLR 中的数组边界检查消除”，适用于 x86 和 x64 编译器生成语义不同的代码的情况。）

在这种情况下，x64 编译器会检测到它`x`永远不会被读取，并完全取消它的赋值；这在编译器优化中称为[死代码消除。](http://en.wikipedia.org/wiki/Dead_code_elimination)为防止这种情况发生，只需在赋值后添加以下行：

```
Console.WriteLine(x); 
```

您将观察到，不仅`3`打印了正确的值，而且在引用它的调用之后，该变量`x`也会在调试器中显示正确的值***（编辑） 。***`Console.WriteLine`

**编辑**：Christopher Currens 提供了[另一种解释](https://stackoverflow.com/a/13651118/1149773)，指向 Visual Studio 2010 中的错误，这可能比上述更准确。*

# android - Maven 和安卓

> ID：13648383
> 
> 赞同：0
> 
> 时间：2012-11-30T15:41:49.147
> 
> 标签：android, maven

我想在我的 Android 项目中使用 Maven 依赖项注入。这样做的目的不是将库包含到项目中，而是在运行时绑定它们。但是，我想知道互联网连接是否很慢会发生什么？项目会崩溃吗？与我将库包含到应用程序中的情况相比，它会变慢吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T15:56:01.723

你在这里混合了一些东西。Maven 不进行依赖注入。那是春季学期。Maven 进行构建管理，可帮助您在构建应用程序时添加正确的 jar。

编译应用程序时，会从 Internet（或您的本地存储库）下载必要的库。执行应用程序时不会这样做！Maven 可以将正确版本的正确 jar 添加到您的 jar 中（如果您配置 Maven 来执行此操作）。

# jquery - 仅将视频的 fancybox 标题样式更改为“外部”

> ID：13648384
> 
> 赞同：3
> 
> 时间：2012-11-30T15:41:49.153
> 
> 标签：jquery, video, fancybox, title

所以我有一个图片库和一个视频。我希望图像具有“over”类型的标题，而视频具有“inside”类型的标题。下面的代码是我尝试过的，但是视频标题仍然“结束”，单击视频缩略图只会导致fancybox覆盖闪烁。如果我删除了 fancybox-media 定义，否则视频缩略图可以正常工作。

```
<script type="text/javascript">
    $(document).ready(function() {
        $(".fancybox").fancybox({
            margin: 10,
            padding: 10,

            helpers : {
                title : {
                    type : 'over'
                },
                media : {}
            }
        });

        $('.fancybox-media').fancybox({
            helpers : {
                title : {
                    type : 'inside'
                }
            }
        });

    });
</script> 
```

然后在 HTML 中：

```
<a class="fancybox fancybox-media" href="http://www.youtube.com/v/EIyixC9NsLI?hd=1&autoplay=1" data-fancybox-group="gallery" title="Here is a video."><img class="thumb" src="tn_video.png" alt="" /></a> 
```

答案有关系`.attr('rel', 'gallery')`吗？我真的不明白那是做什么的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T22:02:04.913

您是否尝试创建 2 个单独的 fancybox 函数调用，一个用于`fancybox` `fancybox-media`，因为在那里，它们可能相互重叠。

像这样的东西（未经测试）：

```
 $(".fancybox").fancybox({
        margin: 10,
        padding: 10,

        helpers : {
            title : {
                type : 'over'
            },
            media : {}
        }
    });
    $(".fancybox-media").fancybox({
        margin: 10,
        padding: 10,

        helpers : {
            title : {
                type : 'inside'
            },
            media : {}
        }
    }); 
```

# linq - 如何在此 linq 查询 where 子句中检查空值

> ID：13648388
> 
> 赞同：2
> 
> 时间：2012-11-30T15:42:06.890
> 
> 标签：linq

我有一个 linq 查询来定位 SharePoint 库中的匹配项。如果有一个名为 'MMSTerm' 的自定义属性，它可以正常工作，但如果该属性为空，那么显然我的字符串修改将失败并在命中 x["MMSTerm"] 时出错

我需要在 where 操作中使用 string.replace ，所以 null 不会很好。

```
SPListItem item = (from x in Items.OfType<SPListItem>()
                where x["MMSTerm"].ToString() == pageReference.ToString()
                select x).ToList<SPListItem>().FirstOrDefault(); 
```

希望这是一个容易的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T15:46:35.767

[您可以使用SPFieldCollection.ContainsField](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.spfieldcollection.containsfield.aspx)方法验证字段是否存在

```
SPListItem item = (from x in Items.OfType<SPListItem>()
                   where x.Fields.ContainsField("MMSTerm") && 
                         (x["MMSTerm"] == null ||
                          x["MMSTerm"].ToString() == pageReference.ToString())
                   select x).FirstOrDefault(); 
```

另外我认为在这种情况下流畅的 API 看起来更好：

```
SPListItem item = Items.OfType<SPListItem>()
                       .FirstOrDefault(x => 
                           x.Fields.ContainsField("MMSTerm") &&
                          (x["MMSTerm"] == null ||
                           x["MMSTerm"].ToString() == pageReference.ToString())); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T15:49:03.453

由于调用会在不存在`x["MMSTerm"]`时抛出异常，而不是返回，因此您应该调用`"MMSTerm"``null`[`ContainsField`](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.spfieldcollection.containsfield.aspx)

```
x.Fields.ContainsField("MMSTerm") 
```

查看该字段是否存在：

```
SPListItem item = (from x in Items.OfType<SPListItem>()
            where x.Fields.ContainsField("MMSTerm") && x["MMSTerm"].ToString() == pageReference.ToString()
            select x).FirstOrDefault(); 
```

由于is`&&`时短路评估，因此不会评估 。`x.Fields.Contains("MMSTerm")``false``x["MMSTerm"]`

如果`x["MMSTerm"]`可能包含`null`s，您可以使用该`""+obj`技巧来避免空引用异常：

```
var pageRefStr = pageReference.ToString();
SPListItem item = (from x in Items.OfType<SPListItem>()
            where x.Fields.ContainsField("MMSTerm") && pageRefStr.Equals(""+x["MMSTerm"])
            select x).FirstOrDefault(); 
```

# ruby-on-rails-3.2 - 避免基于属性值渲染 simple_form 组件

> ID：13648390
> 
> 赞同：0
> 
> 时间：2012-11-30T15:42:45.697
> 
> 标签：ruby-on-rails-3.2, simple-form

如果属性值为空白，我`CustomInput < SimpleForm::Inputs::Base`想避免渲染。IOW，我想避免渲染所有的包装器和组件。我可以在控件中执行此操作以避免`if model.attribute.blank?`为模板中的每个控件进行编写吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T15:24:54.627

Just subclass the `FormBuilder` and override the `input` method

```
class MyFormBuilder < SimpleForm::FormBuilder

  def input(attribute_name, options = {}, &block)
    if @template.my_action_show?
      return if @object.send(attribute_name).blank?
    end 
    super
  end 
```

`my_action_show?` is just custom `ApplicationHelper` method that checks if

```
params[:action]=='show' 
```

# java - 集合 addAll removeAll 返回布尔值

> ID：13648391
> 
> 赞同：2
> 
> 时间：2012-11-30T15:42:48.407
> 
> 标签：java

C是类型的集合`Set<T>`，F（x）返回Set的集合，我想做的是在集合之间执行诸如联合，交集，差异之类的操作

```
// C union ( F(X) \ F(Y))
C.addAll( F(X).removeAll( F(Y)))); //error boolean because removeAll returns a boolean 
```

替代我可以

```
C_aux = new HashSet<T> ( F(X));
C_aux.removeAll( F(Y)); 
C.addAll( C_aux); 
```

无论如何要在不声明辅助集合的情况下执行此操作？（跳过/忽略布尔返回）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-30T16:05:38.737

java.util.Collection API：

```
a.retainAll(b); // intersection
a.removeAll(b); // difference
a.addAll(b); // union 
```

谷歌番石榴 com.google.common.collect.Sets API：

```
Sets.union(a, b);
Sets.intersection(a, b);
Sets.difference(a, b); 
```

如果这是您真正需要的，您可以编写单行：

```
Sets.union(C, Sets.difference(F(X), F(Y))) 
```

但请记住，结果集是只读的，所以如果你需要真正的 Set`C.removeAll`使用

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T15:55:21.030

怎么样

```
C.addAll(A.removeAll(B)?A:A); 
```

通常我会认为这是一个笑话，但在这种情况下，您可以省去创建一个列表。在我忘记浇水大约 3 个月后，它仍然像我的“装饰”植物一样丑陋......：P

**编辑：**这当然也有效，但仍然会改变 A.

```
A.removeAll(B);
C.addAll(A); 
```

顺便说一句：如果`A`并且`B`不能在方法中更改，我认为没有办法创建一个临时列表（无论您是否将其安全地保存在变量中）。至少 if`C`最初可以包含元素。

# c++ - 用于数据收集的 RingBuffer

> ID：13648402
> 
> 赞同：1
> 
> 时间：2012-11-30T15:43:35.473
> 
> 标签：c++, visual-c++, mfc

我有一个环形缓冲区实现，我喜欢用它来处理传入的数据。考虑到需要同步，以下方法是否安全有效？

```
void CMyDlg::MyButton1()
{
    RingBuffer BufRing(10000);

    unsigned char InputBuf[100];
    unsigned char OutBuf[100];

    for (int ii = 0; ii < 1000; ++ii)
    {
        for (int i = 0; i < 100; ++i)
        {
            InputBuf[i] = i;
        }

        BufRing.Write(InputBuf,100);

        BufRing.Read(OutBuf,100);
        AfxBeginThread(WorkerThreadProc,OutBuf,THREAD_PRIORITY_NORMAL,0,0,NULL);
    }
}

UINT WorkerThreadProc( LPVOID Param )
{
    unsigned char* pThreadBuf = (unsigned char*)Param;

    for (int c = 0; c < 100; ++c)
    {
        TRACE("Loop %d elemnt %x\n",c,pThreadBuf[c]);
    }

    return TRUE;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T15:58:53.253

对我来说看起来很危险...

```
void CMyDlg::MyButton1()
{
    // ...
    unsigned char OutBuf[100];

    for (int ii = 0; ii < 1000; ++ii)
    {
        // ...

        BufRing.Read(OutBuf,100);
        AfxBeginThread(WorkerThreadProc,OutBuf,THREAD_PRIORITY_NORMAL,0,0,NULL);
    }
} 
```

我看到的问题是您使用单个缓冲区 ( `OutBuf`) 来存储数据，将其传递给工作线程，然后在循环的下一次迭代中修改同一个缓冲区。

您的测试代码不会显示这一点，因为您只是`OutBuf`在每次迭代中重新填充相同的值（据我所知，无论如何）。如果您更改`InputBuf[i] = i;`为`InputBuf[i] = ii;`并在输出中包含唯一线程 ID `TRACE`，您可能会看到可疑行为。

# vb.net - 报表设计器 V2.0 自定义代码无法将参数作为日期类型传递

> ID：13648409
> 
> 赞同：0
> 
> 时间：2012-11-30T15:43:57.797
> 
> 标签：vb.net, tfs, vbscript, report, reporting-services

我正在尝试使用报表设计器 V2.0 创建一个报表，并编写了一个 VB 函数来计算两个日期之间的工作日数。

我已经在 vb.Net 中编写了代码并将其移植到报告中的自定义代码选项卡中。

该函数的签名如下所示

```
 Public Function CalculateWorkdays(ByVal startdate As Date, ByVal enddate As Date) As String
        Return "Test"
    End Function 
```

然后我尝试将我的报告变量传递给这个函数

```
 =Code.CalculateWorkdays(CDate(Parameter.MyStartDate), CDate(Parameter.MyEndDate)) 
```

这无法执行

如果我将签名更改为

```
 Public Function CalculateWorkdays(ByVal startdate As String, ByVal enddate As String) As String
             Return "Test"
      End Function

      =Code.CalculateWorkdays(Parameter.MyStartDate, Parameter.MyEndDate) 
```

这执行并成功。

因此，我没有尝试在函数调用之前尝试转换/转换我的字符串日期，而是尝试在函数本身中执行它，例如

```
 Dim startdate as Date
     startdate = Date.Parse(strstartdate) 
```

但是在函数中将字符串转换/转换为 Date 类型的任何尝试都失败了。奇怪的是我可以做类似的事情

```
 Public Function CalculateWorkDays(ByVal strstartdate As String) As String
       Dim startDate as Date
       startDate = Today.AddDays(30)
       Return startDate.ToString()
    End Function 
```

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T13:22:32.753

我已经设法通过将我传递的日期字符串重新格式化为 Date 类型可以理解的东西来解决这个问题。

我的查询以以下格式传递日期 30/01/2012 (dd/mm/yyyy)

将日期字符串重新格式化为 (mm/dd/yyyy) 意味着我现在可以做

```
 Dim mydate as Date   
 mydate = Date.Parse(strmydate) 
```

我仍然不确定为什么需要这样格式化日期，但认为这与 CultureInfo 默认值有关。

希望这可以帮助某人。

# linux - 如何从 Bash 中的数组中获取唯一值？

> ID：13648410
> 
> 赞同：112
> 
> 时间：2012-11-30T15:43:58.843
> 
> 标签：linux, arrays, bash, unique

我有几乎和[这里](https://stackoverflow.com/questions/618378/select-unique-or-distinct-values-from-a-list-in-unix-shell-script)一样的问题。

我有一个包含`aa ab aa ac aa ad`等的数组。现在我想从这个数组中选择所有唯一元素。想，这会很简单，`sort | uniq`就像`sort -u`他们在另一个问题中提到的那样，但数组中没有任何变化......代码是：

```
echo `echo "${ids[@]}" | sort | uniq` 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：159
> 
> 时间：2012-11-30T15:45:46.560

有点hacky，但应该这样做：

```
echo "${ids[@]}" | tr ' ' '\n' | sort -u | tr '\n' ' ' 
```

要将排序后的唯一结果保存回数组中，请执行[Array assignment](https://github.com/koalaman/shellcheck/wiki/SC2178)：

```
sorted_unique_ids=($(echo "${ids[@]}" | tr ' ' '\n' | sort -u | tr '\n' ' ')) 
```

如果您的 shell 支持[herestrings](http://linux.die.net/abs-guide/x15683.html) ( `bash`should)，您可以`echo`通过将其更改为：

```
tr ' ' '\n' <<< "${ids[@]}" | sort -u | tr '\n' ' ' 
```

**截至 2021 年 8 月 28 日的说明：**

根据[ShellCheck wiki 2207](https://github.com/koalaman/shellcheck/wiki/SC2207)`read -a` ，应使用管道以避免分裂。因此，在 bash 中，命令将是：

`IFS=" " read -r -a ids <<< "$(echo "${ids[@]}" | tr ' ' '\n' | sort -u | tr '\n' ' ')"`

或者

`IFS=" " read -r -a ids <<< "$(tr ' ' '\n' <<< "${ids[@]}" | sort -u | tr '\n' ' ')"`

**输入：**

```
ids=(aa ab aa ac aa ad) 
```

**输出：**

```
aa ab ac ad 
```

**解释：**

*   `"${ids[@]}"`- 用于处理 shell 数组的语法，无论是用作字符串的一部分`echo`还是作为字符串的一部分。该`@`部分表示“数组中的所有元素”
*   `tr ' ' '\n'`- 将所有空格转换为换行符。因为你的数组被shell看作是一行中的元素，用空格分隔；并且因为 sort 期望输入在不同的行上。
*   `sort -u`- 仅排序和保留独特的元素
*   `tr '\n' ' '`- 将我们之前添加的换行符转换回空格。
*   `$(...)`-[命令替换](http://tldp.org/LDP/abs/html/commandsub.html)
*   除了：`tr ' ' '\n' <<< "${ids[@]}"`是一种更有效的方式：`echo "${ids[@]}" | tr ' ' '\n'`

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2012-11-30T16:40:16.390

如果您正在运行 Bash 版本 4 或更高版本（在任何现代版本的 Linux 中都应该是这种情况），您可以通过创建一个包含原始数组的每个值的新关联数组来在 bash 中获取唯一的数组值。像这样的东西：

```
$ a=(aa ac aa ad "ac ad")
$ declare -A b
$ for i in "${a[@]}"; do b["$i"]=1; done
$ printf '%s\n' "${!b[@]}"
ac ad
ac
aa
ad 
```

这是有效的，因为在任何数组（关联或传统，任何语言）中，每个键只能出现一次。当`for`循环到达 in 的第二个值时`aa`，`a[2]`它会覆盖`b[aa]`最初为 设置的值`a[0]`。

在本机 bash 中执行操作可能比使用管道和外部工具（如`sort`and ）更快`uniq`，但对于较大的数据集，如果您使用更强大的语言（如 awk、python 等），您可能会看到更好的性能。

如果您有信心，可以`for`通过使用`printf`' 为多个参数回收其格式的能力来避免循环，尽管这似乎需要`eval`. （如果您对此感到满意，请立即停止阅读。）

```
$ eval b=( $(printf ' ["%s"]=1' "${a[@]}") )
$ declare -p b
declare -A b=(["ac ad"]="1" [ac]="1" [aa]="1" [ad]="1" ) 
```

此解决方案需要的原因`eval`是在分词之前确定数组值。这意味着命令替换的输出被认为*是一个单词*而不是一组键=值对。

虽然这使用了一个子shell，但它只使用 bash 内置函数来处理数组值。请务必以`eval`批判的眼光评估您的使用情况。如果您不是 100% 确信 chepner 或 glenn jackman 或 graycat 不会发现您的代码有问题，请改用 for 循环。

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2013-07-10T05:12:47.360

我意识到这已经得到了回答，但它在搜索结果中的显示率很高，它可能会对某人有所帮助。

```
printf "%s\n" "${IDS[@]}" | sort -u 
```

例子：

```
~> IDS=( "aa" "ab" "aa" "ac" "aa" "ad" )
~> echo  "${IDS[@]}"
aa ab aa ac aa ad
~>
~> printf "%s\n" "${IDS[@]}" | sort -u
aa
ab
ac
ad
~> UNIQ_IDS=($(printf "%s\n" "${IDS[@]}" | sort -u))
~> echo "${UNIQ_IDS[@]}"
aa ab ac ad
~> 
```

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2013-07-20T04:16:59.170

如果你的数组元素有空格或任何其他 shell 特殊字符（你能确定它们没有吗？）那么首先要捕获那些（你应该总是这样做）用双引号表达你的数组！例如`"${a[@]}"`。Bash 会将其解释为“每个数组元素在一个单独的*参数*中”。在 bash 中，这总是有效的。

然后，为了得到一个排序（且唯一）的数组，我们必须将它转换为排序理解的格式，并能够将其转换回 bash 数组元素。这是我想出的最好的：

```
eval a=($(printf "%q\n" "${a[@]}" | sort -u)) 
```

不幸的是，这在空数组的特殊情况下失败了，将空数组变成了一个包含 1 个空元素的数组（因为 printf 有 0 个参数，但仍然像有一个空参数一样打印 - 请参阅解释）。所以你必须在 if 或其他东西中抓住它。

说明： printf 的 %q 格式“shell 转义”了打印的参数，就像 bash 可以在 eval 之类的东西中恢复一样！因为每个元素都在其自己的行上打印了 shell 转义，所以元素之间的唯一分隔符是换行符，并且数组赋值将每一行作为一个元素，将转义值解析为文字文本。

例如

```
> a=("foo bar" baz)
> printf "%q\n" "${a[@]}"
'foo bar'
baz
> printf "%q\n"
'' 
```

eval 是必要的，以去除每个返回数组的值的转义。

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2015-09-14T15:02:48.247

'sort' 可用于对 for 循环的输出进行排序：

```
for i in ${ids[@]}; do echo $i; done | sort 
```

并使用“-u”消除重复项：

```
for i in ${ids[@]}; do echo $i; done | sort -u 
```

最后，您可以使用唯一元素覆盖您的数组：

```
ids=( `for i in ${ids[@]}; do echo $i; done | sort -u` ) 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2015-06-24T22:51:29.420

这也将保持秩序：

```
echo ${ARRAY[@]} | tr [:space:] '\n' | awk '!a[$0]++' 
```

并使用唯一值修改原始数组：

```
ARRAY=($(echo ${ARRAY[@]} | tr [:space:] '\n' | awk '!a[$0]++')) 
```

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2015-07-31T02:05:59.120

要创建一个包含唯一值的新数组，请确保您的数组不为空，然后执行以下操作之一：

### 删除重复条目（带排序）

```
readarray -t NewArray < <(printf '%s\n' "${OriginalArray[@]}" | sort -u) 
```

### 删除重复条目（不排序）

```
readarray -t NewArray < <(printf '%s\n' "${OriginalArray[@]}" | awk '!x[$0]++') 
```

警告：不要尝试做类似`NewArray=( $(printf '%s\n' "${OriginalArray[@]}" | sort -u) )`. 它将打破空间。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2020-08-20T21:03:27.210

这种变化怎么样？

```
printf '%s\n' "${ids[@]}" | sort -u 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2015-05-21T15:10:02.050

在不丢失原始顺序的情况下：

```
uniques=($(tr ' ' '\n' <<<"${original[@]}" | awk '!u[$0]++' | tr '\n' ' ')) 
```

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2016-10-06T12:54:29.437

> 猫号.txt

```
1 2 3 4 4 3 2 5 6 
```

> 将行打印到列中：`cat number.txt | awk '{for(i=1;i<=NF;i++) print $i}'`

```
1
2
3
4
4
3
2
5
6 
```

> 查找重复记录：`cat number.txt | awk '{for(i=1;i<=NF;i++) print $i}' |awk 'x[$0]++'`

```
4
3
2 
```

> 替换重复记录：`cat number.txt | awk '{for(i=1;i<=NF;i++) print $i}' |awk '!x[$0]++'`

```
1
2
3
4
5
6 
```

> 仅查找 Uniq 记录： `cat number.txt | awk '{for(i=1;i<=NF;i++) print $i|"sort|uniq -u"}`

```
1
5
6 
```

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2017-01-11T14:42:09.237

如果您想要一个仅使用 bash 内部的解决方案，您可以将值设置为关联数组中的键，然后提取键：

```
declare -A uniqs
list=(foo bar bar "bar none")
for f in "${list[@]}"; do 
  uniqs["${f}"]=""
done

for thing in "${!uniqs[@]}"; do
  echo "${thing}"
done 
```

这将输出

```
bar
foo
bar none 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2019-09-04T17:14:50.553

处理嵌入空格的另一种选择是用 进行空分隔`printf`，用 区分`sort`，然后使用循环将其打包回数组中：

```
input=(a b c "$(printf "d\ne")" b c "$(printf "d\ne")")
output=()

while read -rd $'' element
do 
  output+=("$element")
done < <(printf "%s\0" "${input[@]}" | sort -uz) 
```

最后，`input`并`output`包含所需的值（提供的顺序不重要）：

```
$ printf "%q\n" "${input[@]}"
a
b
c
$'d\ne'
b
c
$'d\ne'

$ printf "%q\n" "${output[@]}"
a
b
c
$'d\ne' 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2021-05-20T16:36:54.557

以下所有工作都在`bash`并且`sh`没有错误，`shellcheck`但您需要抑制[SC2207](https://github.com/koalaman/shellcheck/wiki/SC2207)

```
arrOrig=("192.168.3.4" "192.168.3.4" "192.168.3.3")

# NO SORTING
# shellcheck disable=SC2207
arr1=($(tr ' ' '\n' <<<"${arrOrig[@]}" | awk '!u[$0]++' | tr '\n' ' ')) # @estani
len1=${#arr1[@]}
echo "${len1}"
echo "${arr1[*]}"

# SORTING
# shellcheck disable=SC2207
arr2=($(printf '%s\n' "${arrOrig[@]}" | sort -u)) # @das.cyklone
len2=${#arr2[@]}
echo "${len2}"
echo "${arr2[*]}"

# SORTING
# shellcheck disable=SC2207
arr3=($(echo "${arrOrig[@]}" | tr ' ' '\n' | sort -u | tr '\n' ' ')) # @sampson-chen
len3=${#arr3[@]}
echo "${len3}"
echo "${arr3[*]}"

# SORTING
# shellcheck disable=SC2207
arr4=($(for i in "${arrOrig[@]}"; do echo "${i}"; done | sort -u)) # @corbyn42
len4=${#arr4[@]}
echo "${len4}"
echo "${arr4[*]}"

# NO SORTING
# shellcheck disable=SC2207
arr5=($(echo "${arrOrig[@]}" | tr "[:space:]" '\n' | awk '!a[$0]++')) # @faustus
len5=${#arr5[@]}
echo "${len5}"
echo "${arr5[*]}"

# OUTPUTS

# arr1
2 # length
192.168.3.4 192.168.3.3 # items

# arr2
2 # length
192.168.3.3 192.168.3.4 # items

# arr3
2 # length
192.168.3.3 192.168.3.4 # items

# arr4
2 # length
192.168.3.3 192.168.3.4 # items

# arr5
2 # length
192.168.3.4 192.168.3.3 # items 
```

所有这些的输出都是 2 并且是正确的。这个答案基本上总结和整理了这篇文章中的其他答案，是一个有用的快速参考。给出了原始答案的归属。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2021-11-28T21:33:16.567

在 zsh 中，您可以使用 (u) 标志：

```
$ ids=(aa ab aa ac aa ad)
$ print ${(u)ids}
aa ab ac ad 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2016-10-24T09:10:38.840

试试这个来获取文件中第一列的 uniq 值

```
awk -F, '{a[$1];}END{for (i in a)print i;}' 
```

* * *

## 回答 #16

> 赞同：-2
> 
> 时间：2019-04-12T15:22:53.993

```
# Read a file into variable
lines=$(cat /path/to/my/file)

# Go through each line the file put in the variable, and assign it a variable called $line
for line in $lines; do
  # Print the line
  echo $line
# End the loop, then sort it (add -u to have unique lines)
done | sort -u 
```

# php - 控制多个版本的 PHP 项目

> ID：13648412
> 
> 赞同：3
> 
> 时间：2012-11-30T15:44:11.280
> 
> 标签：php, project-management

我偶然发现了以下问题，无法找到合适的解决方案。我用 PHP 为各种客户制作网站。像所有客户一样，有些人会发现需要修复的错误，有些人会在几个月后请求更新实时站点，有些人会两者兼而有之。

在为客户处理更新时，我喜欢在发布之前向客户预览它们。

过去我使用了几种不同的解决方案，但没有一个让我满意。到目前为止我所做的：

*   在索引中定义`VERSION`s 和。`CURRENT_VERSION`参观者看到批准的版本。我向客户发送一个设置变量的特定链接，`$_SESSION`让他们看到新版本。在代码中，我使用 if 和 switch 来根据`CURRENT_VERSION`. 这很有效，将所有代码保存在一个地方，并且可以轻松地进行错误修复，但会使代码充满愚蠢的`if(CURRENT_VERSION >= V2)`语句。我也不能在 CSS 文件中使用它。
*   将所有文件放在“build1”文件夹中，当开始需要预览的大更新时，我将所有文件复制到“build2”文件夹中。我为客户端上传“build2”文件夹并用密码保护它。这工作得很好，但是，如果我必须在处理 build2 时修复 build1，我必须确保将修复从 build1 复制到 build2。
*   使用开发服务器（一些客户端可以提供）这是迄今为止效果最好的，因为开发服务器与实时站点是分开的。它的工作原理与第二个解决方案非常相似，我必须制作项目的副本，但对我来说感觉更干净。

然而，我正在寻找一种更好的方法来管理我的代码，可能使用 Git/SVN，但如果他们能帮助我，我对这些事情的了解不够。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T15:56:18.310

如今，一个相当典型的范例是开发/登台/生产。对于这种方法，您也不需要整个开发服务器，VirtualHosts/nginx 等效就足够了。

我建议你要做的第一件事就是把你的项目放到 Git 中，越快越好！

**免责声明：*这是我的工作流程，有很多喜欢的，但这是我的。***

这是我当前工作流程的一个示例。

**GitHub**

我承担的每个项目都有一个单独的存储库

**开发服务器**

**裸**Git 存储库，复制我的 GitHub（我稍后会解释）

```
/opt/git-bare 
```

我所有项目的虚拟主机

```
/var/www/vhosts 
```

**本地机器**

我会根据需要克隆我的裸存储库，以便快速编辑和提交。我不担心来回 FTP 文件或将任何内容本地安装到我的机器上。我发现这是处理项目的**最佳**方式。当我准备好在我的开发服务器上检查一些代码时，我只需提交并将我的工作推送到裸存储库，在那里我有一个**post 挂钩**，然后告诉我的开发 VirtualHost 进行自我更新。

这意味着在我的本地机器上提交/推送我的工作的几秒钟内，我可以通过我的浏览器在我的开发服务器上看到它。

当我对我在开发服务器上看到的内容感到满意时，我会将我的裸存储库推送到 GitHub。Git 是一个很棒的工具，我所有的本地提交也可以在 GitHub 上的日志中找到。

**分期**

**这是我在 GitHub 上的主**分支的克隆，来自GitHub。这就是我用来向客户展示和签署更改的方法。

**生产**

我的生产服务器是来自 GitHub的**标签的克隆。**无论我在主分支中做什么，生产都不会受到影响，如果我的一台服务器出现任何问题，我可以轻松地使用此标签进行重建。

如果您对此有任何疑问，请直接开火。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T16:09:26.600

**在我长长的回答之前**：如果您正在寻找可以为您执行此操作的主机，[stackable](http://stackable.com/features/)支持多个“环境”的概念。我确信其他托管平台提供了类似的功能，允许基本相同的事情（例如[AWS Elastic Beanstalk](http://docs.amazonwebservices.com/elasticbeanstalk/latest/dg/create_deploy_PHP_eb.sdlc.html)），但我不知道有哪个是该产品的核心。*注意：我与stackable没有任何联系，我什至不是客户。*

* * *

> 在索引中定义 VERSIONs 和 CURRENT_VERSION ......但是用愚蠢的 if(CURRENT_VERSION >= V2) 语句来混淆代码。我也不能在 CSS 文件中使用它。

如果我没记错的话，这实际上类似于 Facebook 推出更改的方式。你是对的，它增加了额外的逻辑；但是有一个优势，因为您可以“预览”多个用户的更改（例如，所有管理员用户，或特定地理位置的所有用户）。

当然，预览使用相同的数据——这意味着预览站点的用户将像往常一样使用它（而不是与人为的数据进行奇怪的交互）。

尽管您对缺点是正确的，但在某些情况下，这是测试新功能的有用方法。

> 将所有文件放在“build1”文件夹中，当开始需要预览的大更新时......但是，如果我必须在处理 build2 时修复 build1，我必须确保将修复从 build1 复制到 build2。

在这里，您实际上是将项目的两个版本部署到同一台服务器上。在您给出的示例中，您将第二个副本放在原始 webroot 下 - 但根据托管，您可以只分配一个子域并从两个不同的 web 根目录工作。

优点与第一个类似，因为两个安装都可以轻松共享相同的数据，并且如果所有请求都通过某种前端控制器，您可以添加逻辑以仅显示对选定用户的更改（或使用某种基本身份验证）描述）。

在这种情况下，将您的项目置于版本控制中（在我看来，git 在这方面会比 SVG 更好）可以使这更容易。在您的开发系统上，只需在分支之间切换即可在现有版本和新版本之间工作。

如果您修复旧版本中的错误，您应该能够通过一些命令轻松（或比当前工作流程更容易）将该修复合并到新版本中。如果您修复了旧版本中的新版本中的错误，则进行挑选可以让您将单个更改合并回旧版本中。

部署代码可以像登录 Web 服务器并执行 git pull 一样简单，也可以使用工具来自动化部署。本质上，您对旧版本的部署将基于存储库的“主”分支（或类似的东西），而新版本将基于您所称的那个分支。

> 使用开发服务器（一些客户端可以提供）这是迄今为止效果最好的，因为开发服务器与实时站点是分开的。它的工作原理与第二个解决方案非常相似，我必须制作项目的副本，但对我来说感觉更干净。

由于这与您的第二种方法非常相似，因此添加版本控制肯定也会使这更容易。

有大量资源解释如何从各种版本控制系统部署到各种托管平台，但希望这能说明这将如何适应您已经在做的事情并使事情变得更容易。

# css - 更改 CSS3 中的背景颜色

> ID：13648417
> 
> 赞同：0
> 
> 时间：2012-11-30T15:44:26.057
> 
> 标签：css, html, colors, colorbox

我有以下内容：

```
#box1 {
    position: absolute;
    width: 400px;
    border: 1px solid black;
    box-shadow:  -3px 8px 34px  #808080;
    border-radius: 20px;
    box-shadow: -8px 5px 5px #888888;
    right: 100px; top:  50px;
    height:  300px;
    background: -webkit-gradient(linear, left top, left bottom, from(#E0FFFF), to(#ADD8E6));
    -webkit-animation-name:myfirst;
    -webkit-animation-duration:5s;
    -webkit-animation-timing-function:linear;
    -webkit-animation-iteration-count:infinite;
    -webkit-animation-direction:alternate;
    -webkit-animation-play-state:running;
}

 @-webkit-keyframes myfirst /* Safari and Chrome */
{
from {background:red;}
to {background:yellow;}
} 
```

我的问题是：在那些行中

```
from {background:red;}
    to {background:yellow;} 
```

我怎样才能将开始颜色（红色）更改为此（在下一行中）将像背景中的这种颜色：

```
 -webkit-gradient(linear, left top, left bottom, from(#E0FFFF), to(#ADD8E6)); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T16:11:30.117

试试这个代码。

**注意**：当您使用 sub div 时，这是可能的...

```
<!DOCTYPE HTML>
<html>
<head>
<title>What</title>
<style type="text/css">
#box1 {
    position: absolute;
    width: 400px;
    border: 1px solid black;
    box-shadow:  -3px 8px 34px  #808080;
    border-radius: 20px;
    box-shadow: -8px 5px 5px #888888;
    right: 100px; top:  50px;
    height:  300px;
    background: -webkit-gradient(linear, left top, left bottom, from(#E0FFFF), to(#ADD8E6));
}

#box1 > div
{
    width: 100%;
    height: 100%;
    border-radius: 20px;
    background-color: yellow;
    opacity: 0;
    -webkit-animation:myfirst 5s;
}

@-webkit-keyframes myfirst /* Safari and Chrome */
{
    from { opacity: 0; }
    to { opacity: 1;}
}
</style>
</head>
<body>

<div id="box1"><div></div></div>

</body>
</html> 
```

# java - 从 Internet 加载数据时显示进度对话框

> ID：13648420
> 
> 赞同：2
> 
> 时间：2012-11-30T15:44:34.400
> 
> 标签：java, android, dialog, android-asynctask

从互联网加载数据时，我想在我的应用程序中单击按钮时显示进度对话框。我无法让它工作，有人可以给我一些关于在哪里放置对话框功能的提示吗？

这是我的 AsyncTask 方法：

```
private class GetTweets extends AsyncTask<String, Void, String> {

        @Override
        protected String doInBackground(String... twitterURL) {
            //start building result which will be json string
            StringBuilder tweetFeedBuilder = new StringBuilder();
            //should only be one URL, receives array
            for (String searchURL : twitterURL) {
                HttpClient tweetClient = new DefaultHttpClient();
                try {
                    //pass search URL string to fetch
                    HttpGet tweetGet = new HttpGet(searchURL);
                    //execute request
                    HttpResponse tweetResponse = tweetClient.execute(tweetGet);
                                            StatusLine searchStatus = tweetResponse.getStatusLine();
                    if (searchStatus.getStatusCode() == 200) {
                        //get the response
                        HttpEntity tweetEntity = tweetResponse.getEntity();
                        InputStream tweetContent = tweetEntity.getContent();
                                                    InputStreamReader tweetInput = new InputStreamReader(tweetContent);
                        BufferedReader tweetReader = new BufferedReader(tweetInput);
                        String lineIn;
                        while ((lineIn = tweetReader.readLine()) != null) {
                            tweetFeedBuilder.append(lineIn);
                        }
                    }
                    else
                        tweetDisplay.setText("Error!");
                }
                catch(Exception e){ 
                    tweetDisplay.setText("Error!");
                    e.printStackTrace(); 
                }
            }
            //return result string
            return tweetFeedBuilder.toString();
        }
                    protected void onPostExecute(String result) {
            //start preparing result string for display
            StringBuilder tweetResultBuilder = new StringBuilder();
            try {
                //get JSONObject from result
                JSONObject resultObject = new JSONObject(result);
                //get JSONArray contained within the JSONObject retrieved - "results"
                JSONArray tweetArray = resultObject.getJSONArray("results");
                //loop through each item in the tweet array
                for (int t=0; t<tweetArray.length(); t++) {
                    //each item is a JSONObject
                    JSONObject tweetObject = tweetArray.getJSONObject(t);
                                        tweetResultBuilder.append(tweetObject.getString("from_user")+": ");
                    tweetResultBuilder.append(tweetObject.get("text")+"\n\n");
                }
            }
            catch (Exception e) {
                tweetDisplay.setText("Error!");
                e.printStackTrace();
            }
            //check result exists
            if(tweetResultBuilder.length()>0)
                tweetDisplay.setText(tweetResultBuilder.toString());
            else
                tweetDisplay.setText("no results!");
        }
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-30T15:47:02.443

在 AsyncTask 类中，使用 onPrexecute 方法显示进度对话框并使用 onPostExecute 关闭它：

```
 @Override
    protected void onPreExecute()
    {
        super.onPreExecute();
        pDialog = new ProgressDialog(YOUR_ACTIVITY_CLASS_NAME.this);
        pDialog.setMessage("Please Wait");
        pDialog.setIndeterminate(false);
        pDialog.setCancelable(false);
        pDialog.show();
    }

    @Override
    protected void onPostExecute(String str)
    {
        // Dismiss the dialog once finished
        pDialog.dismiss();  
    } 
```

在调用它之前不要忘记定义 pDialog：

```
 ProgresDialog pDialog; 
```

# c# - c# pdf itextsharp 文本在提取时分散和重复

> ID：13648425
> 
> 赞同：-1
> 
> 时间：2012-11-30T15:45:00.287
> 
> 标签：c#, pdf

使用 itextsharp 我需要在 ac# 应用程序中从 pdf 中提取文本。当我试图提取一些 pdf 文件时，一些单词会分散和重复（例如堆栈溢出 - s st ta ac ck ko ov ve er rf fl lo ow w）。有人可以建议如何使这个完美或建议我纠正这个。我附上了上述案例的示例图片。 ![在此处输入图像描述](../Images/4f8031019c73cdf5ae790b758a594c55.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T15:53:33.660

我可以猜测导致此问题的文本在 PDF 文件中以**粗体显示吗？**在 PostScript 和 PDF 中使文本看起来粗体的一种常见方法（一种非常糟糕的方法，但很好......）是两次渲染相同的字符，文本位置的平移（移位）非常轻微。

如果这确实是造成这种情况的原因，那么您唯一的解决方法可能是计算每个字符的位置并丢弃那些相等且非常接近的字符。

# asp.net - 用于 ASP.NET 的 Google 地图控件

> ID：13648427
> 
> 赞同：0
> 
> 时间：2012-11-30T15:45:08.293
> 
> 标签：asp.net, google-maps

我尝试使用[此 Google Maps Control](http://www.shabdar.org/asp-net/70-google-maps-control-for-aspnet-part-1.html)，但我不断收到此错误：

```
The base class includes the field 'GoogleMapForASPNet1', but its type
(Vehicle_Tracking_System.GoogleMapForASPNet) is not compatible with the type of control
(ASP.googlemapforaspnet_ascx). 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T22:03:40.900

请注意，控件是代码文件。您可以检查：

*   它的包含页面也是代码文件（或将控件的源代码更改为代码隐藏）
*   如果您打算在 .aspx.cs 中使用它，请使用指令 <@reference control="..."
*   如果您的 .aspx.cs 是部分类，则应自动声明该控件

希望这会有所帮助，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-17T11:52:32.593

注意：确保 System.Web.Extension 库的版本与您在添加引用时选择的版本相同。

**例如，您正在添加“System.Web.Extensions，Version=4.0.0.0”，并且引用具有“System.Web.Extensions，Version=1.0.61025.0”。**

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-15T15:19:44.787

这是一个更好的用户控件， [http://shabdar.org/asp-net/70-google-maps-control-for-aspnet-part-1.html](http://shabdar.org/asp-net/70-google-maps-control-for-aspnet-part-1.html)

# android - 有没有办法让两个不同的android应用程序通信？

> ID：13648429
> 
> 赞同：0
> 
> 时间：2012-11-30T15:45:11.183
> 
> 标签：android, android-intent

我想这样做，以便在选择我的应用程序时，会弹出另一个应用程序。这是否可能与意图和服务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T15:51:04.783

是的，很有可能

在应用程序之间进行通信使用[Content Provider](http://developer.android.com/guide/topics/providers/content-providers.html)

Intent 可用于启动其他应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T15:52:22.253

您可以使用`IPC`（进程间通信）。[你可以在这里](http://developer.android.com/guide/components/aidl.html)找到文档

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T15:57:33.337

是的，有可能。

你有几种方法可以做到这一点，这里有两种：

1.  如果您需要某种长连接并且需要在应用程序之间移动数据，您可以使用两个服务，每侧一个，然后与[Messenger](http://developer.android.com/reference/android/os/Messenger.html)对象进行通信。Messenger 对象用于实现跨进程的基于消息的通信——两个不同的应用程序，一旦你明白了它就很容易使用。

2.  如果您只需要在选择您的应用程序时启动其他应用程序，您可以使用您在要启动的应用程序的清单中设置的意图过滤器启动一个意图。如果您只需要启动第二个应用程序，它们之间没有任何连接，这就是您所需要的。

如果您需要启动计算器应用程序，您可以尝试这样做：

```
Intent i = new Intent();
i.setClassName("com.android.calculator2", "com.android.calculator2.Calculator");
startActivity(i); 
```

# iphone - clang：错误：没有这样的文件或目录：

> ID：13648432
> 
> 赞同：3
> 
> 时间：2012-11-30T15:45:15.180
> 
> 标签：iphone, ios, xcode, ipad, compiler-construction

我正在尝试使用 OAuth2Client 编译项目，但出现错误：

```
Ld /Users/willmoss26/Library/Developer/Xcode/DerivedData/Elance5WS-ebjkwadamxzcifcdxvdmtiiqdpoy/Build/Products/Debug-iphonesimulator/ELance5.app/ELance5 normal i386
cd /Users/willmoss26/Documents/XCode/ELance5
setenv IPHONEOS_DEPLOYMENT_TARGET 6.0
setenv PATH "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch i386 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk -L/Users/willmoss26/Library/Developer/Xcode/DerivedData/Elance5WS-ebjkwadamxzcifcdxvdmtiiqdpoy/Build/Products/Debug-iphonesimulator -F/Users/willmoss26/Library/Developer/Xcode/DerivedData/Elance5WS-ebjkwadamxzcifcdxvdmtiiqdpoy/Build/Products/Debug-iphonesimulator -filelist /Users/willmoss26/Library/Developer/Xcode/DerivedData/Elance5WS-ebjkwadamxzcifcdxvdmtiiqdpoy/Build/Intermediates/ELance5.build/Debug-iphonesimulator/ELance5.build/Objects-normal/i386/ELance5.LinkFileList -Xlinker -objc_abi_version -Xlinker 2 -fobjc-arc -fobjc-link-runtime -Xlinker -no_implicit_dylibs -mios-simulator-version-min=6.0 /Users/willmoss26/Library/Developer/Xcode/DerivedData/Elance5WS-ebjkwadamxzcifcdxvdmtiiqdpoy/Build/Products/Debug-iphonesimulator/OAuth2Client/OAuth2Client -lOAuth2Client -framework UIKit -framework Foundation -framework CoreGraphics -o /Users/willmoss26/Library/Developer/Xcode/DerivedData/Elance5WS-ebjkwadamxzcifcdxvdmtiiqdpoy/Build/Products/Debug-iphonesimulator/ELance5.app/ELance5

clang: error: no such file or directory: '/Users/willmoss26/Library/Developer/Xcode/DerivedData/Elance5WS-ebjkwadamxzcifcdxvdmtiiqdpoy/Build/Products/Debug-iphonesimulator/OAuth2Client/OAuth2Client' 
```

我该如何解决？

我已经

*   检查用户标头搜索路径以包含库
*   确保基本 SDK 和编译设置适用于 iOS6 / armv7
*   将 .framework 和 .a 文件从项目添加到链接框架和库

提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-08-24T02:07:24.223

转到您的目标 -> 构建设置 -> 其他链接器标志，看看这是否完成 => -framework Foundation

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-04T01:34:13.063

转到项目的 Build Phase 页面并展开 Compile Sources 以删除以红色突出显示的文件。

# jquery - 使用 $.each 遍历对象数组 - 正则表达式的问题

> ID：13648440
> 
> 赞同：0
> 
> 时间：2012-11-30T15:45:46.010
> 
> 标签：jquery

我一直在使用该`$.each`函数和一些模板，以便我可以使用存储在数组 中的对象的and属性有效地填充/替换存储在`temp`变量中的 HTML 字符串。`title``thumbnail``content`

因此，例如在`$.each`正则表达式的回调函数中找到`{{title}}`，它将替换`{{title}}`为 的内容`obj.title`，因此我们基本上将其替换为字符串 'Speak of the devil and he shall present'，这是对象的标题属性被迭代。

我发现的问题是，当我将此 HTML 字符串 ( `temp variable`) 附加到正文时。我的`img`HTML 标记以错误的方式输出，其内容在我的标记`obj.title`中创建了不需要的属性`img`

输出的 HTML：

```
<h2> Speak of the devil and he shall appear </h2>
<img appear="" shall="" he="" and="" devil="" the="" of="" alt="Speak" src="images/bane.jpg"> 
```

这是我的模板：

```
<script id="blogTemplate" type="chris/template">
    <h2> {{title}} </h2>
    <img src={{thumbnail}} alt={{title}}>
</script> 
```

这是我的 jQuery 代码：

```
(function() {

        var content = [
            {
                title: 'Speak of the devil and he shall appear',   
                thumbnail: 'images/bane.jpg',
            },

            {
                title: 'Me the joker',   
                thumbnail: 'images/Joker.jpg',
            }
        ];

            var template = $.trim( $('#blogTemplate').html() );

        $.each( content, function( index, obj ) {  

            var temp = template.replace( /{{title}}/ig, obj.title )
                               .replace( /{{thumbnail}}/ig, obj.thumbnail );
            console.log(temp);

            $('body').append(temp);
        });

    })(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T15:50:10.710

您需要修改模板以在属性周围包含引号。

```
<script id="blogTemplate" type="chris/template">
    <h2> {{title}} </h2>
    <img src="{{thumbnail}}" alt="{{title}}">
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T15:51:52.387

我强烈建议你看看 Handlebars：[http](http://handlebarsjs.com/) ://handlebarsjs.com/ 。您几乎在做同样的事情，但有了车把，您可以获得更多的支持。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T15:53:38.643

你需要在你的正则表达式中转义`{`and`}`字符，即

```
template.replace(/\{\{title\}\}/ig, obj.title) 
```

未转义，`{n}`将完全`n`匹配前一个字符的出现。查看[MDN 上的 Regex 指南以](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions)获取更多信息。

# ruby-on-rails - 为已存储数据的模型重新加载轮胎/弹性搜索映射

> ID：13648448
> 
> 赞同：5
> 
> 时间：2012-11-30T15:46:03.043
> 
> 标签：ruby-on-rails, elasticsearch, mongomapper, chef-infra, tire

我正在使用 Tire 和 elasticsearch 在 MongoMapper 模型上提供搜索功能，该模型是 Rails 应用程序的一部分。我刚刚偶然发现了一个问题，当我重新部署到使用以下配置的环境（在 config/environments/env_name.rb 中）时，该模型的映射没有更新：

```
config.cache_classes = true 
```

单独重新加载类似乎并不能解决问题（也许可以理解，新映射可能与我猜的现有数据不兼容？）。相反，我必须执行以下操作：

```
MyModel.index.delete
<restart the app or reload the class>
MyModel.index.import MyModel.all 
```

我只是想知道是否有更好的方法a）。确保在我的模型代码中定义的最新映射在每次部署后都被 elasticsearch 使用，但是 b). 避免用完整的数据集不必要地重新填充索引？

我们通常使用 Chef 进行部署，因此我可以自动完成我成功使用的三个步骤，而不会遇到太多麻烦。但是我是弹性搜索和轮胎的新手，所以我认为我很可能会滥用两者或使事情变得不必要的困难。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T20:44:10.073

这里有几点：

*   Tire 尝试在类加载时创建具有正确映射的索引
*   **但是**当模型已经存在时， Tire 不会**尝试**为模型创建索引

那么，您的问题实际上更多是关于正确的工作流程吗？当你部署一个新版本的应用程序时，你不应该重新填充索引，就像你不从某种备份重新填充数据库一样。

自动检查符合模型中当前定义的索引映射当然是可能的（比较`MyModel.tire.index.mapping`with `MyModel.tire.mapping`，如果不同则重新填充等），这是我要小心的事情。

开发人员通常知道她何时更改了映射并应该重新索引数据。删除索引并重新填充也意味着搜索停机，对于大型应用程序甚至不可行。

`my-index-2012-12`更好的解决方案是在导入数据时使用特定的索引名称，并`my-index`为该索引指定一个别名。然后，您可以自由地重新填充索引，并在完成后翻转别名，而无需停机。Tire 会努力在这种工作流程中为您提供支持（Rake 导入任务等）。

# .net - 实体框架 SaveChanges - 更新 - 仅使用主键

> ID：13648450
> 
> 赞同：0
> 
> 时间：2012-11-30T15:46:03.357
> 
> 标签：.net, entity-framework

我使用 SQL Profiler 跟踪 Entity Framework 生成的 SQL 以更新对实体的更改。我不明白为什么它已经在使用主键时会生成所有其他条件。

你能解释一下为什么以及如何让它只使用 where 子句中的主键吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T15:59:03.530

在检索和更新实体之间检查上下文是否已更新。

`OptimisticConcurrencyException`如果从更新中返回 0 行，它将抛出一个错误，这意味着上下文中的实体已被修改。

你是如何创建模型的？[这篇文章](http://blogs.msdn.com/b/alexj/archive/2009/05/20/tip-19-how-to-use-optimistic-concurrency-in-the-entity-framework.aspx)可能会解释一下；具有固定并发模式的列将包含在 where 子句中。

# c# - ConcurrentStack - 从底部或等效功能中删除

> ID：13648454
> 
> 赞同：2
> 
> 时间：2012-11-30T15:46:12.863
> 
> 标签：c#, .net, multithreading, concurrency

我一直在寻找问题的答案，但我还没有找到解决问题的好方法。我想要做的基本上是有一个并发集合，有点像 ConcurrentStack 但我需要能够从堆栈底部删除项目。这是因为我希望堆栈只有一定的长度，因此当集合变得太大时，任何旧项目都会从底部移除。

并发堆栈在添加对象时效果很好，但从底部删除它们是我无法弄清楚的。

我也有一个 ConcurrentDictionary 的想法，我可以在其中跟踪添加的日期和存储的对象，然后根据最后一个日期删除项目？

任何帮助/想法将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T15:53:09.990

我认为你需要[ConcurrentQueue 类](http://msdn.microsoft.com/en-us/library/dd267265.aspx)

# memory - 顶部和（房间）的 SBCL 已用内存报告不同

> ID：13648458
> 
> 赞同：3
> 
> 时间：2012-11-30T15:46:20.027
> 
> 标签：memory, lisp, common-lisp, sbcl

我在具有 1GB Ram 和 256MB 交换空间的 Linux (Fedora 15) 32 位系统（内核 3.6.5）上运行 SBCL 1.0.51。

我启动`sbcl --dynamic-space-size 125`并开始调用一个函数，该函数向 http (couchDB) 服务器发出约 10000 个 http 请求（使用 drakma），我只是将返回数据的操作结果格式化为标准输出。

每次通话后，我都会做 a`(sb-ext:gc :full t)`然后`(room)`。结果没有增长。无论我运行该函数多少次，`(room)`都会报告相同的已用空间（有一些起伏，但大约是相同的平均值，不会增长）。

但是：每次我调用该函数后，top 都会报告 sbcl 进程的 VIRT 和 RES 数量不断增长，甚至超过了我告诉 sbcl 自己请求的 125MB 空间。所以我有以下问题：

1.  为什么`top`-reported 内存不断增长，而`(room)`说它没有？我唯一能想到的是通过 ffi 的一些泄漏。我不是直接用 ffi 呼唤，但也许有些 drakma dep 确实忘记了释放它的 C 垃圾。无论如何，我不知道这是否可以作为解释。会不会是别的东西？有什么见解吗？
2.  为什么不`--dynamic-space-size`被尊重？

# sql - PostgreSQL - 如何查询“结果全部”？

> ID：13648460
> 
> 赞同：0
> 
> 时间：2012-11-30T15:46:24.777
> 
> 标签：sql, postgresql, relational-division

我是 PostgreSQL 新手，但对以下查询有疑问：

```
WITH relevant_einsatz AS (
    SELECT einsatz.fahrzeug,einsatz.mannschaft 
    FROM einsatz 
    INNER JOIN bergefahrzeug ON einsatz.fahrzeug = bergefahrzeug.id
),
relevant_mannschaften AS (
    SELECT DISTINCT relevant_einsatz.mannschaft
    FROM relevant_einsatz
    WHERE relevant_einsatz.fahrzeug IN (SELECT id FROM bergefahrzeug)
    )
SELECT mannschaft.id,mannschaft.rufname,person.id,person.nachname 
FROM mannschaft,person,relevant_mannschaften WHERE mannschaft.leiter = person.id AND relevant_mannschaften.mannschaft=mannschaft.id; 
```

这个查询基本上是有效的——但在“relevant_mannschaften”中，我目前正在选择每个 mannschaft，它已经到了一个至少有 1 个 bergefahrzeug 的相关的einsatz。

而不是这个，我想选择每个 mannschaft 到“relevant_mannschaften”，这些 mannschaft 已经从 bergefahrzeug 到了一个相关的 einsatz WITH EACH。

有人知道如何制定这种变化吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T19:32:27.667

您提供的信息比较简陋。但是调整到我的心理技能，走出困境，我猜这个查询的解开版本可以更快地完成这项工作：

```
SELECT m.id, m.rufname, p.id, p.nachname
FROM   person        p 
JOIN   mannschaft    m ON m.leiter = p.id
JOIN (
    SELECT e.mannschaft
    FROM   einsatz       e
    JOIN   bergefahrzeug b ON b.id = e.fahrzeug -- may be redundant
    GROUP  BY e.mannschaft
    HAVING count(DISTINCT e.fahrzeug)
         = (SELECT count(*) FROM bergefahrzeug)
    ) e ON e.mannschaft = m.id 
```

### 解释：

*   在子查询中，我计算了一个团队（）在所有部署（ ）中使用`e`了多少`DISTINCT`山地车（ ）：`bergfahrzeug``mannschaft``einsatz``count(DISTINCT e.fahrzeug)`

    如果该数字与表中的计数匹配`bergfahrzeug`： `(SELECT count(*) FROM bergefahrzeug)`- 团队根据您的描述获得资格。

*   查询的其余部分只是从 和 中的匹配行中获取详细`mannschaft`信息`person`。

你根本不需要这条线，如果除了 bergfahrzeuge 之外没有其他车辆在玩：

```
~~JOIN   bergefahrzeug b ON b.id = e.fahrzeug~~
```

基本上，这是**关系除法**的一种特殊应用。在这个相关问题下有更多关于这个主题的信息：
[How to filter SQL results in a has-many-through relationship](https://stackoverflow.com/questions/7364969/how-to-filter-sql-results-in-a-has-many-through-relation)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T18:46:40.057

不知道如何解释，但这是我如何解决这个问题的一个例子，以防万一有一天有人有问题。

```
WITH dfz AS (
    SELECT DISTINCT fahrzeug,mannschaft FROM einsatz WHERE einsatz.fahrzeug IN (SELECT id FROM bergefahrzeug)
), abc AS (
    SELECT DISTINCT mannschaft FROM dfz
), einsatzmannschaften AS (
    SELECT abc.mannschaft FROM abc WHERE (SELECT sum(dfz.fahrzeug) FROM dfz WHERE dfz.mannschaft = abc.mannschaft) = (SELECT sum(bergefahrzeug.id) FROM bergefahrzeug)
)
SELECT mannschaft.id,mannschaft.rufname,person.id,person.nachname
FROM mannschaft,person,einsatzmannschaften WHERE mannschaft.leiter = person.id AND einsatzmannschaften.mannschaft=mannschaft.id; 
```

# wcf - 如何在操作的上下文中检查服务器上的自定义标头？

> ID：13648466
> 
> 赞同：0
> 
> 时间：2012-11-30T15:46:48.363
> 
> 标签：wcf, custom-headers

> **可能重复：**
> [如何访问用于在 WCF 服务（服务器端）上实现 IDispatchMessageInspector 的类中的属性？](https://stackoverflow.com/questions/2538551/how-to-access-a-property-in-a-class-used-to-implement-idispatchmessageinspector)

我已经`IClientMessageInspector`在我的客户端上实现了一个向服务器的所有调用添加一个特定变量。现在我需要在服务器上利用这个变量来控制执行流程，但我似乎无法在服务器上找到自定义标头。

我意识到这`IDispatchMessageInspector`是对 的通常补充`IClientMessageInspector`，但我不认为这将允许我在操作上下文中使用标题。

我也尝试过使用`OperationContext.Current.IncomingMessageHeaders`，但自定义标题没有出现在那里。显然，我需要使用 an 显式设置消息头`OperationContextScope`才能使这种方法起作用。

那么，如何在服务器上的操作上下文中访问我的自定义标头？或者这对于使用设置的标题是不可能的`IClientMessageInspector`并且我需要使用`OperationContextScope`？

# php - Sonata Admin 与文件上传的一对多关系（appendFormFieldElement）

> ID：13648467
> 
> 赞同：8
> 
> 时间：2012-11-30T15:46:56.727
> 
> 标签：php, symfony, symfony-sonata, sonata-admin

我目前正面临 SonataAdminBundle、一对多关系和文件上传的挑战。我有一个实体叫`Client`和一个叫`ExchangeFile`。一个`Client`可以有几个`ExchangeFile`s，所以我们这里是一对多的关系。我正在使用[VichUploaderBundle](https://github.com/dustin10/VichUploaderBundle)进行文件上传。

这是`Client`课程：

```
/**
 * @ORM\Table(name="client")
 * @ORM\Entity()
 * @ORM\HasLifecycleCallbacks
 */
class Client extends BaseUser
{    
    // SNIP

    /**
     * @ORM\OneToMany(targetEntity="ExchangeFile", mappedBy="client", orphanRemoval=true, cascade={"persist", "remove"})
     */
    protected $exchangeFiles;

    // SNIP
} 
```

这是`ExchangeFile`课程：

```
/**
 * @ORM\Table(name="exchange_file")
 * @ORM\Entity
 * @Vich\Uploadable
 */
class ExchangeFile
{
    // SNIP

    /**
     * @Assert\File(
     *     maxSize="20M"
     * )
     * @Vich\UploadableField(mapping="exchange_file", fileNameProperty="fileName")
     */
    protected $file;

    /**
     * @ORM\Column(name="file_name", type="string", nullable=true)
     */
    protected $fileName;

    /**
     * @ORM\ManyToOne(targetEntity="Client", inversedBy="exchangeFiles")
     * @ORM\JoinColumn(name="client_id", referencedColumnName="id")
     */
    protected $client;

    // SNIP
} 
```

在我的`ClientAdmin`课堂上，我`exchangeFiles`通过以下方式添加了该字段：

```
protected function configureFormFields(FormMapper $formMapper)
{
    $formMapper
        // SNIP
        ->with('Files')
            ->add('exchangeFiles', 'sonata_type_collection', array('by_reference' => false), array(
                    'edit' => 'inline',
                    'inline' => 'table',
                ))
        // SNIP
} 
```

这允许在客户端编辑表单中对各种交换文件进行内联编辑。到目前为止效果很好：![具有一对多关系和文件上传的 Sonata Admin](../Images/764e12637bd12928bda9421389a88c55.png).

**问题**

但是有一个警告：当我点击绿色“+”号一次（添加一个新的交换文件表单行），**然后在我的文件系统中选择一个文件**，然后再次点击“+”号（通过 Ajax 附加一个新的表单行)，选择另一个文件，然后点击“更新”（保存当前客户端），**那么第一个文件就不会被持久化了**。在数据库和文件系统中只能找到第二个文件。

据我了解，这有以下原因：当第二次点击绿色“+”号时，当前表单被发布到网络服务器，包括表单中当前的数据（客户端和所有交换文件）。创建了一个新表单并将请求绑定到表单中（这发生在`AdminHelper`位于的类中`Sonata\AdminBundle\Admin`）：

```
public function appendFormFieldElement(AdminInterface $admin, $subject, $elementId)
{
    // retrieve the subject
    $formBuilder = $admin->getFormBuilder();

    $form = $formBuilder->getForm();
    $form->setData($subject);
    $form->bind($admin->getRequest()); // <-- here
    // SNIP
} 
```

所以整个表单被绑定，一个表单行被附加，表单被发送回浏览器，整个表单被新的表单覆盖。但由于`<input type="file" />`出于安全原因无法预先填充文件输入 ( )，因此第一个文件会丢失。该文件仅在实体被持久化时才存储在文件系统中（我认为为此`VichUploaderBundle`使用了 Doctrine `prePersist`），但是在附加表单字段行时还不会发生这种情况。

**我的第一个问题是**：我该如何解决这个问题，或者我应该往哪个方向发展？我希望以下用例能够工作：我想创建一个新客户端，并且我知道我将上传三个文件。我点击“新建客户端”，输入客户端数据，点击绿色“+”按钮一次，选择第一个文件。然后我再次点击“+”号，然后选择第二个文件。第三个文件也一样。所有三个文件都应该被持久化。

**第二个问题**：当我只想以一对多的关系添加单个表单行时，为什么 Sonata Admin 会发布整个表单？这真的有必要吗？这意味着如果我有文件输入，则每次添加新的表单行时都会上传表单中存在的所有文件。

在此先感谢您的帮助。如果您需要任何详细信息，请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T16:18:33.753

除了我对[SonataMediaBundle](https://github.com/sonata-project/SonataMediaBundle)的评论...

如果你确实走这条路，那么你会想要创建一个类似于以下内容的新实体：

```
/**
 * @ORM\Table
 * @ORM\Entity
 */
class ClientHasFile
{
    /**
     * @var integer $id
     *
     * @ORM\Column(name="id", type="integer")
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    private $id;

    /**
     * @var Client $client
     *
     * @ORM\ManyToOne(targetEntity="Story", inversedBy="clientHasFiles")
     */
    private $client;

    /**
     * @var Media $media
     *
     * @ORM\ManyToOne(targetEntity="Application\Sonata\MediaBundle\Entity\Media")
     */
    private $media;

    // SNIP
} 
```

然后，在您的客户实体中：

```
class Client
{
    // SNIP

    /**
     * @var \Doctrine\Common\Collections\ArrayCollection
     *
     * @ORM\OneToMany(targetEntity="ClientHasFile", mappedBy="client", cascade={"persist", "remove"}, orphanRemoval=true)
     */
    protected $clientHasFiles;

    public function __construct()
    {
        $this->clientHasFiles = new ArrayCollection();
    }

    // SNIP
} 
```

...和您的 ClientAdmin 的 configureFormFields：

```
protected function configureFormFields(FormMapper $form)
{
    $form

    // SNIP

    ->add('clientHasFiles', 'sonata_type_collection', array(
        'required' => false,
        'by_reference' => false,
        'label' => 'Media items'
    ), array(
        'edit' => 'inline',
        'inline' => 'table'
    )
    )
;
} 
```

...最后但并非最不重要的是，您的 ClientHasFileAdmin 类：

```
class ClientHasFileAdmin extends Admin
{
    /**
     * @param \Sonata\AdminBundle\Form\FormMapper $form
     */
    protected function configureFormFields(FormMapper $form)
    {
        $form
            ->add('media', 'sonata_type_model_list', array(), array(
                'link_parameters' => array('context' => 'default')
            ))
        ;
    }

    /**
     * {@inheritdoc}
     */
    protected function configureListFields(ListMapper $list)
    {
        $list
            ->add('client')
            ->add('media')
        ;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-06-30T11:30:01.763

我发现，可以通过在 AJAX 调用添加新行之前记住文件输入内容来解决这个问题。这有点hacky，但它正在工作，因为我现在正在测试它。

我们能够覆盖一个模板进行编辑 - base_edit.html.twig。我添加了我的 javascript 来检测添加按钮上的点击事件，以及添加行后的 javascript。

我的 sonata_type_collection 字段称为**galleryImages**。

完整的脚本在这里：

```
$(function(){
      handleCollectionType('galleryImages');
});

function handleCollectionType(entityClass){

        let clonedFileInputs = [];
        let isButtonHandled = false;
        let addButton = $('#field_actions_{{ admin.uniqid }}_' + entityClass + ' a.btn-success');

        if(addButton.length > 0){
            $('#field_actions_{{ admin.uniqid }}_' + entityClass + ' a.btn-success')[0].onclick = null;
            $('#field_actions_{{ admin.uniqid }}_' + entityClass + ' a.btn-success').off('click').on('click', function(e){

                if(!isButtonHandled){
                    e.preventDefault();

                    clonedFileInputs = cloneFileInputs(entityClass);

                    isButtonHandled = true;

                    return window['start_field_retrieve_{{ admin.uniqid }}_'+entityClass]($('#field_actions_{{ admin.uniqid }}_' + entityClass + ' a.btn-success')[0]);
                }
            });

            $(document).on('sonata.add_element', '#field_container_{{ admin.uniqid }}_' + entityClass, function() {
                refillFileInputs(clonedFileInputs);

                isButtonHandled = false;
                clonedFileInputs = [];

                handleCollectionType(entityClass);
            });
        }

}

function cloneFileInputs(entityClass){
        let clonedFileInputs = [];
        let originalFileInputs = document.querySelectorAll('input[type="file"][id^="{{ admin.uniqid }}_' + entityClass + '"]');

        for(let i = 0; i < originalFileInputs.length; i++){
            clonedFileInputs.push(originalFileInputs[i].cloneNode(true));
        }

        return clonedFileInputs;
}

function refillFileInputs(clonedFileInputs){
        for(let i = 0; i < clonedFileInputs.length; i++){
            let originalFileInput = document.getElementById(clonedFileInputs[i].id);
            originalFileInput.replaceWith(clonedFileInputs[i]);
        }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-19T19:10:27.570

我尝试了许多不同的方法和解决方法，最后我发现这里描述的最佳解决方案[https://stackoverflow.com/a/25154867/4249725](https://stackoverflow.com/a/25154867/4249725)

如果不需要，您只需隐藏文件选择周围所有不必要的列表/删除按钮。

在所有其他直接在表单内选择文件的情况下，您迟早会遇到其他一些问题——表单验证、表单预览等。在所有这些情况下，输入字段都将被清除。

因此，尽管开销很大，但使用媒体包和 sonata_type_model_list 可能是最安全的选择。

我发布它以防有人以我搜索的方式搜索解决方案。

我还为这个确切的问题找到了一些 java-script 解决方法。当您点击“+”按钮然后将其恢复时，它基本上可以更改文件输入的名称。

仍然在这种情况下，如果某些验证失败等，您仍然会遇到重新显示表单的问题，所以我绝对建议使用媒体包方法。

# maven-3 - Maven站点插件版本3失败？

> ID：13648472
> 
> 赞同：4
> 
> 时间：2012-11-30T15:47:16.900
> 
> 标签：maven-3, maven-site-plugin

我正在尝试使用 Maven 3.0.4 运行 maven site:site 目标的项目。我不知道，它一直在 Maven 2.2.1 下运行（当我认为它应该是 3 时）。

我不断收到以下失败：

无法在项目 myproj-parent 上执行目标 org.apache.maven.plugins:maven-site-plugin:3.0:site (default-cli)：执行目标 org.apache.maven.plugins:maven-site-的 default-cli plugin:3.0:site failed: For artifact {null:null:null:jar}：groupId 不能为空。

我什至如何找到缺少 groupId 的工件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T17:05:17.013

事实证明，我的一个依赖项的 POM 文件已损坏。我们 Nexus 存储库中 joda-jsptags-1.0.2 的 POM 不是 POM，而是 HTML 的片段。

获取一个干净的 joda-jsptags 版本解决了这个问题。

不知道什么是坏的只是令人沮丧。显然 Maven 3 插件对 POM 解析更加严格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T17:16:58.173

如果您从 Maven 2.2.1 迁移到 Maven 3.0.4，您必须注意一些差异，特别是与站点生成相关的差异。您应该查看[迁移文档](https://maven.apache.org/plugins/maven-site-plugin/maven-3.html#Using_maven-site-plugin_2.x_with_Maven_2_and_maven-site-plugin_3.x_with_Maven_3)并查看是否需要修复您的 pom。

错过了一个[链接](http://maven.apache.org/plugins/maven-site-plugin/maven-3.html)。

# algorithm - prolog中的路径查找

> ID：13648474
> 
> 赞同：1
> 
> 时间：2012-11-30T15:47:18.163
> 
> 标签：algorithm, prolog

我需要在 prolog 中编写一个程序来查找路径，例如，对于图形：

```
edge(a, b). 
edge(a, c). 
edge(c, b). 
```

测试用例是：

```
/* test case 1 */
?- path(a, b, P). 
P = [a, b] ;
P = [a, c, b] ; 
false. 

/* test case 2 */
?- path(c,b,[c,b]).
true. 
```

我的代码是

```
path(X,Y,[X,Y]):-
    edge(X,Y).
path(X,Z,[X|P]):-
    edge(X,Y),
    path(Y,Z,P). 
```

但是，对于测试用例 2，我的代码将显示

```
?- path(c,b,[c,b]).
true;
false. 
```

我知道我应该在我的代码中添加一个剪切以删除案例 2 中的错误，但它也会删除案例 1 中的错误。我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T18:55:45.127

这是因为你的两个函数都是相同的，我认为 prolog 会检查这两个......在第一种情况下它失败了，因为只有一个函数满足它，即 path(c,b,P) 但在第二种情况下 path(c,b, [c,b]

它检查两个功能

```
path(X,Y,[X|P] here X = c and P = b
and
path(X,Y,[X,Y]) here also X=c and Y = b 
```

因此，在第二种情况下，这两个功能的作用相同，因此您需要修改其中一种情况。例如：对于 2 个顶点，您只能使用

```
path(X,Y,[X|Y|[]]):- edge(X,Y). 
```

代替

```
path(X,Y,[X,Y]):-
edge(X,Y). 
```

它只需要两个变量，我认为这应该可以解决您的问题。

# video - 适用于 Xbox 的原生广告 SDK

> ID：13648478
> 
> 赞同：0
> 
> 时间：2012-11-30T15:47:50.540
> 
> 标签：video, ads, xbox

我正在研究向 Xbox 应用/游戏提供视频广告的解决方案/可能性。这个想法是开发一个 SDK，发行商可以将 SDK 集成到他们的 xbox 应用程序/游戏中进行广告，类似于将 AdMob SDK 集成到 iOS 和 Android 应用程序。

这在技术上可行吗？微软是否允许第三方广告 SDK；或者发布商只能使用微软自己的广告 SDK。

我用谷歌搜索，还没有发现任何 AdNetwork 为 xbox 提供广告 SDK。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T19:35:42.600

从技术上讲，这是*可能的*，但是，微软并不热衷于在游戏中使用广告，此外，为了更新游戏内广告（取决于您考虑的广告类型以及它们将放置在哪里）会有成为更新这些广告的一种方式。这意味着您必须拥有游戏，以某种方式从服务器提取数据（不是什么大不了的事），但这会为游戏打开可能的漏洞，并且由于 xbox live 是付费的，人们不会善待广告。

# zend-studio - 如何显示一个项目的 Zend Studio 任务？

> ID：13648480
> 
> 赞同：0
> 
> 时间：2012-11-30T15:48:00.160
> 
> 标签：zend-studio

我正在使用 Zend Studio 9，并希望通过在我的代码中添加标签（例如 @todo 等）来使用任务功能。当我打开任务视图时，会出现大量来自其他库的现有标签，这些标签会造成如此多的混乱该列表变得太麻烦而无法使用。此外，该列表会同时显示我所有项目的任务标签，这增加了更多的混乱。如何显示我目前正在从事的一个项目的任务标签并隐藏第三方库的标签？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-11T09:26:21.533

这在 Zend Studio 10 中对我有用：

1.  单击任务窗口右上角的向下三角形。
2.  选择“配置内容”（可以有两个。右边是打开对话框，第一个控件是“显示所有项目”。）
3.  您可以在此处定义工作集，不包括包含第三方解决方案的文件夹。

我希望这有帮助。

# html - css - 子容器的最小高度：100%，不想工作？

> ID：13648487
> 
> 赞同：1
> 
> 时间：2012-11-30T15:48:20.610
> 
> 标签：html, joomla2.5, css

我现在正在开发一个 Joomla 2.5 模板 @ [http://development.aycdesign.net/skin](http://development.aycdesign.net/skin)，并且已经坚持了好几天了，谷歌在这个问题上也不是朋友。我想要完成的是拥有一个可变大小的页眉、可变大小的页脚，并且始终让内容容器至少为浏览器窗口大小的 100%。我已经尝试了几乎所有在阳光下的东西，但遇到了两个问题。

1.  我的内容所在的容器不会扩展到其容器的 100% 高度。
2.  在必须滚动的页面上，部分内容被剪裁到页脚中。

对此的任何建议将不胜感激，以便我可以解决这个问题并继续前进！

```
<html>
<body>

<div id="wrapper">
        <div id="top">
            header
        </div>
        <div id="mnav">
            main menu
        </div>
        <div id="pagewidth">
                <div id="maincol">
                    content
                </div>
        </div>
        <div id="footer">
            footer
        </div>
</div>

</body>
</html> 
```

....和CSS：

```
html,body {
    height:100%;
    background: rgb(138, 126, 102);
    color: #A5A56F;
    font-family: arial, sans-serif;
    font-size: .9em;
    line-height: 1.25;
}

/* ******************************************************************** */ 
/* Wireframe Elements                                                   */
/* ******************************************************************** */   
#wrapper {
    position: relative;
    height:auto !important;
    height:100%;
    min-height:100%;
} 

#top {
       background: rgb(0, 0, 0);
       width: 100%;
}

#top .custom {
       width: 80%;
       margin: 0 auto 0 auto;
       color: #fff;
       text-align: right;
       padding: .5em 0 .5em;
}

#pagewidth {
        width: 80%;
    min-height: 100%;
        background: rgba(54, 54, 54, 0.5);
    text-align: left; 
        margin: 0 auto;
    padding-bottom: 3em;
}

#maincol {

}

#footer {
    background: rgb(0, 0, 0);
        width: 100%;
    height: 5%;
    position: absolute;
    bottom: 0;
}

#footer .custom {
    width: 80%;
    margin: 0 auto;
        color: #fff;
        text-align: right;
    padding: .5em 0 .5em 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T15:54:02.437

尝试将以下 CSS 添加到`#pagewidth`：

```
position: absolute;
top: 20px;
bottom: 5%; /* To keep the content from stretching past the footer */
left: 50%;
margin-left: -40%; 
```

[http://jsfiddle.net/H8sg8/](http://jsfiddle.net/H8sg8/)

当您有一个`position`设置为`absolute`or 或的元素时`fixed`，您可以同时使用`top`和`bottom`将其拉伸为分别距其容器顶部和底部的距离。同样可以用于`left`和`right`。

[这里的例子](http://jsfiddle.net/ZqP5U/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T16:07:03.620

问题是您的子容器不知道它的父容器的高度，以便计算它自己的高度。值得庆幸的是，过去很多工作都在研究这个问题。

我喜欢这样设置我的页面，以获得带有粘性页脚的灵活页面。

我将演示两种方法来做到这一点。一种用于现代浏览器，另一种用于支持旧版浏览器（ie7、ie8、firefox < 17）

**HTML** 现代浏览器

```
<div class="page">
    <div class="page-header">
        <div class="container">
        </div>
    </div>
    <div class="container">
        <!--Main content goes here-->
    </div>
</div>
<div class="page-footer">
    <div class="container">
    </div>
</div> 
```

旧版浏览器

```
<div class="page no-box">
    <div class="page-header">
        <div class="container">
        </div>
    </div>
    <div class="container">
        <!--Main content goes here-->
    </div>
    <div class="page-push">
    <!--Acts as a buffer against the footer-->
    </div>
</div>
<div class="page-footer">
    <div class="container">
    </div>
</div> 
```

**CSS**

```
html, body {
    height: 100%;
    margin: 0;
    position: relative;
}

.page {
    min-height: 100%;
    position: relative;
    /* Same height as the footer*/
    margin-bottom: -150px;
    padding-bottom: 150px;
    /* These allow the box model to include padding and margin*/
    -webkit-box-sizing: border-box;
    -moz-box-sizing: border-box;
    -ms-box-sizing: border-box;
    box-sizing: border-box;
}

    .page.no-box {
        padding-bottom: 0;
    }

.page-push, .page-footer {
    height: 150px;
}

.page-footer {
    /*make sure it sits on top*/
    position: relative;
    z-index: 1;
}

.container {
    margin: 0 auto;
    width: 80%;
    max-width: 1140px;
} 
```

我在工作中经常使用这个系统，并基于它创建了一个响应式网格，您可以在[这里查看](http://jimbobsquarepants.github.com/Flexo/)。希望这一切对你有意义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-13T20:58:46.620

我最终使用JS来解决这个问题......

```
function sizeContent() 
{
  var contentHeight = $("#outer-container").height();
  var newHeight = $("html").height() - $("#top").height() - $("#footer").height();
    if (contentHeight < newHeight)
  {
    $("#outer-container").css("height", newHeight + "px");
  }
}

//Initial load of page
jQuery(window).load(sizeContent); 
//Every resize of window
jQuery(window).resize(sizeContent); 
```

# python - 从整个字典中删除一个元素

> ID：13648489
> 
> 赞同：0
> 
> 时间：2012-11-30T15:48:27.207
> 
> 标签：python, dictionary, tuples

我已经在这件事上工作了几个小时，仍然无法弄清楚：O

我遇到的问题是这个。假设我有一个字典，其中 4 元素元组作为元素，整数作为键。当从整个字典（属于每个元组）中删除一个元素时，使两个元组（元素）相同，这两个元组的键不会相加。相反，形成了一个新元素，该元素的键是前两个键之一。

假设我有一本字典：

```
dict={('A','B','D','C'): 4, ('C','B','A','D'):5, ('D','A','C','B'):3,('D','A','B','C'):1} 
```

现在我想从整个字典中删除一个字母。例如，如果我想删除“B”。以下新字典已形成，但未返回，因为其中两个元素相同。

```
 {('A','D','C'): 4, ('C','A','D'):5, ('D','A','C'):3,('D','A','C'):1} 
```

这不是`('D','A','C'):3,('D','A','C'):1`成为`('D','A','C'):4`，而是最终发生的事情：

`('D','A','C'):3`与其他元组一起

所以基本上，其中一个元组消失了。

这是我目前使用的方法：

```
for next in dict:
new_tuple=()
for i in next:
    if i!='A':
        new_tuple+=(i,)
new_dict[new_tuple]=dict[next] 
```

上面的代码返回 new_dict 如下：

```
 {('A','D','C'): 4, ('C','A','D'):5, ('D','A','C'):3} 
```

那么我该怎么做，从整个字典中的每个元组中删除一个字母，如果两个元组看起来相同，它们合并并且键加起来？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T15:53:30.717

您将不得不重建整个字典，因为每个键/值对都会受到影响。当您遇到现在重叠的键时，您可以使用 a`defaultdict`使合并更容易：

```
from collections import defaultdict

new_dict = defaultdict(int)
for key, value in old_dict.items():
    new_key = tuple(i for i in key if i != 'A')
    new_dict[new_key] += value 
```

因为第一次查找时默认设置为`new_key`，我们所要做的就是添加旧值以在我们第一次遇到键时进行更新。下次我们遇到键时，通过将它们相加来“合并”这些值。`new_dict``0``new_dict`

# mysql - 使用 \ 作为要检查的值的 sql 查询

> ID：13648492
> 
> 赞同：1
> 
> 时间：2012-11-30T15:48:50.160
> 
> 标签：mysql, sql, special-characters

我通过以下方式进行查询.....我有一个名为 location_ns 的列，它包含“Marriott\256 Hotel & Convention Centre”作为它的值。但查询不会产生任何 id。当我在值和查询中删除 \ 时，它正在工作。

```
SELECT id
FROM notice
WHERE 
lon = 78.48693966865540000000 
AND lat = 17.42434596639255000000 
AND location_ns = 'Marriott\256 Hotel & Convention Centre' 
AND notice_type="text" 
```

请让我知道是否有人有解决方案

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T15:52:01.300

如[String Literals](http://dev.mysql.com/doc/en/string-literals.html)中所述：

> 在字符串中，某些序列具有特殊含义，除非[`NO_BACKSLASH_ESCAPES`](http://dev.mysql.com/doc/en/server-sql-mode.html#sqlmode_no_backslash_escapes)启用 SQL 模式。这些序列中的每一个都以反斜杠（“<code>\”）开头，称为*转义字符*。MySQL 识别[表 9.1，“特殊字符转义序列”</a> 中显示的转义序列。对于所有其他转义序列，反斜杠将被忽略。也就是说，转义字符被解释为好像没有转义。例如，“<code>\x”就是“<code>x”。](http://dev.mysql.com/doc/en/string-literals.html#character-escape-sequences)
> 
> [](http://dev.mysql.com/doc/en/string-literals.html#character-escape-sequences)

 [因此，您必须转义反斜杠：

```
AND location_ns = 'Marriott\\256 Hotel & Convention Centre' 
```](http://dev.mysql.com/doc/en/string-literals.html#character-escape-sequences) 

[但是，您最好将文字作为参数传递给 MySQL 以](http://dev.mysql.com/doc/en/string-literals.html#character-escape-sequences)[准备好的语句](https://stackoverflow.com/a/60496)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T15:51:37.803

`\`是 MySQL 中的转义序列。如果你有一个有价值的记录：

```
Marriott\256 Hotel & Convention Centre 
```

你需要像这样查询它

```
AND location_ns = 'Marriott\\256 Hotel & Convention Centre' 
```

这让 MySQL 知道您正在寻找文字`\`.

# java - Android：如何获得箭头按钮？

> ID：13648495
> 
> 赞同：13
> 
> 时间：2012-11-30T15:48:58.820
> 
> 标签：java, android, android-layout, button, google-translate

我希望在我的应用程序中拥有用于谷歌翻译的箭头按钮。此处textview右侧使用的那个：

![在此处输入图像描述](../Images/dd794b42f98abfe6401b3902120b6d6d.png)

我怎样才能以最少的质量损失得到它？

提前致谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-30T16:02:04.007

[您可以在此处](https://design.google.com/icons)下载一组 Android ActionBar 图标，还有向前箭头。希望这可以帮助。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-30T15:55:31.757

在 SDK 中查看。SDK 具有几乎所有适用于 Android 的默认图标。你可以在`[ANDROID_SDK_HOME]/platforms/[ANDROID_VERSION]/data/res/`

在所有`drawable-xxxx`文件夹（即 drawable-xhdpi、drawable-hdpi 等）中查找图标

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-03-16T10:51:22.250

正如[Egor 所指出的](https://stackoverflow.com/a/13648685/2538037)，箭头可以在官方的[Android Action Bar Icon Pack](http://developer.android.com/design/downloads/index.html)中找到。以下是路径：

## 全息灯（黑色箭头）：

**箭头返回：** `Android Design - Icons 20131120\Action Bar Icons\holo_light\02_navigation_back\`

**向前箭头：** `Android Design - Icons 20131120\Action Bar Icons\holo_light\02_navigation_forward\`

## Holo Dark（白色箭头）：

**箭头返回：** `Android Design - Icons 20131120\Action Bar Icons\holo_dark\02_navigation_back\`

**向前箭头：** `Android Design - Icons 20131120\Action Bar Icons\holo_dark\02_navigation_forward\`

# android - 如何分别在计时器中执行两个任务？

> ID：13648496
> 
> 赞同：0
> 
> 时间：2012-11-30T15:49:01.297
> 
> 标签：android, service, timer, location, timertask

上次我的问题是：“java.lang.RuntimeException：无法在未调用 Looper.prepare() 的线程内创建处理程序”。之后，我修改并使用 HandlerThread 调用位置更新函数。没有错误，但位置没有刷新。任何人都可以提供一些建议吗？

MyService.java（已编辑）

```
 public class MyService extends Service{

    int counter = 0;
    static final int UPDATE_INTERVAL = 15000;
    private Timer timer = new Timer();
    private Timer timer2 = new Timer();
    DefaultHttpClient httpclient;
    HttpPost httppost;
    String line,result;
    HttpResponse response;
    InputStream is;
    BufferedReader reader;
    StringBuilder sb;
    final static String MY_ACTION = "MY_ACTION";
    LocationManager lm;
    LocationListener locationListener;
    String s = "";
    static final int READ_BLOCK_SIZE = 100;
    List<NameValuePair> nameValuePairs;
    private HandlerThread refreshThread = null;

    @Override
    public IBinder onBind(Intent arg0) {
            // TODO Auto-generated method stub
            return null;
    }

    public int onStartCommand(Intent intent, int flags, int startId){
            doSomethingRepeatedly();
            doUpdateLocation();
            return START_STICKY;                
    }

    private void doSomethingRepeatedly(){
            timer.scheduleAtFixedRate(new TimerTask(){
                    public void run(){
                            ...
                    }
            },10000,UPDATE_INTERVAL);
    }

    private void doUpdateLocation(){
        timer2.scheduleAtFixedRate(new TimerTask(){
            public void run(){
                 onClickLoad();
                 lm = (LocationManager)getSystemService(Context.LOCATION_SERVICE);
                          locationListener = new MyLocationListener();
                          refreshThread = new HandlerThread("GPS Thread");
                           refreshThread.start();
                  new Handler(refreshThread.getLooper()).post(
                  new Runnable() {
                     @Override
               public void run() {
                         lm.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 60000, 1000, locationListener); 
                     }
                 }
             );                                                                 
                    }
            },10000,UPDATE_INTERVAL);
    }

     private class MyLocationListener implements LocationListener{

                @Override
                public void onLocationChanged(Location arg0) {
                        if(arg0!=null){
                                final String lat = String.valueOf(arg0.getLatitude());
                                final String lon = String.valueOf(arg0.getLongitude());

                                new Thread(){
                                public void run(){
                                        try{ 
                                            DefaultHttpClient httpclient = new DefaultHttpClient();
                                            HttpPost httppost = new HttpPost("http://www.kryptoquest.com/tracker/getLocation.php");
                                            ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(3);
                                            nameValuePairs.add(new BasicNameValuePair("Username", s));
                                            nameValuePairs.add(new BasicNameValuePair("Latitude", lat));
                                            nameValuePairs.add(new BasicNameValuePair("Longitude", lon));
                                            Log.d("Latitude",lat);
                                            Log.d("Longitude",lon);
                                            httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
                                            httpclient.execute(httppost);
                                        }catch(Exception e){
                                                Log.e("log_tag", "Error:"+e.toString());
                                        }        
                                }
                        }.start();

                        lm.removeUpdates(locationListener);
                        refreshThread.getLooper().quit();
                        }                
                }

                @Override
                public void onProviderDisabled(String provider) {
                        // TODO Auto-generated method stub                             
                }

                @Override
                public void onProviderEnabled(String provider) {
                        // TODO Auto-generated method stub                             
                }

                @Override
                public void onStatusChanged(String provider, int status, Bundle extras) {
                        // TODO Auto-generated method stub                             
                }

        }

     public void onClickLoad(){

                try
                {
                        FileInputStream fIn = openFileInput("user.txt");
                        InputStreamReader isr = new InputStreamReader(fIn);

                        char[] inputBuffer = new char[READ_BLOCK_SIZE];                            

                        int charRead;
                        while((charRead = isr.read(inputBuffer))>0)
                        {
                                String readString = String.copyValueOf(inputBuffer,0,charRead);

                                s += readString;                                     
                                inputBuffer = new char[READ_BLOCK_SIZE];
                        }                            

                }catch(IOException ioe){
                        ioe.printStackTrace();
                }
        }

    public void onDestroy(){
            super.onDestroy();                 
            if(timer != null){
                    timer.cancel();
            }  
            Toast.makeText(this, "Service Destroyed", Toast.LENGTH_SHORT).show();
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T15:53:50.883

这可能有效：尝试在不同的线程中运行每个计时器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T16:15:52.937

您使用的线程没有 Looper。

在第一个线程中创建的第二个线程导致崩溃，因为第一个线程中没有 Looper 可用于向第二个线程发送消息。

使用 Android 的 HandlerThread 而不是使用 Thread

[http://developer.android.com/reference/android/os/HandlerThread.html](http://developer.android.com/reference/android/os/HandlerThread.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T17:14:17.483

您可以在 android 中使用 Handler，您可以将消息从一个线程发送到另一个线程并安排消息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T16:03:28.390

您不能从计时器线程调用 requestLocationUpdates。有关更多信息，请参阅[requestLocationUpdates 给出错误“无法在未调用 Looper.prepare() 的线程内创建处理程序](https://stackoverflow.com/questions/9033337/requestlocationupdates-gives-error-cant-create-handler-inside-thread-that-has)

# find - 致命错误：在第 7 行的 C:\xampp\htdocs\index.php 中的非对象上调用成员函数 find()

> ID：13648507
> 
> 赞同：1
> 
> 时间：2012-11-30T15:49:48.020
> 
> 标签：find, file-get-contents

这段代码有以下错误，我希望它从 HTML 中抓取一个选定的对象，而不是整个文件。

**.php 文件：**

```
<?php 
include_once('simple_html_dom.php');

$target = "test.html";
$html = file_get_contents($target);

foreach($html->find('div.article') as $element) 
       echo $element->find('h1');

?> 
```

**测试.html：**

```
<html>
<head>
</head>
<body>
<div class="article">
<h1>Header</h1>
<p>Paragraph</p>
</div>
</body>
</html> 
```

**输出：**

```
Fatal error: Call to a member function find() on a non-object in C:\xampp\htdocs\index.php on line 7 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T15:55:24.593

file_get_contents() 返回一个字符串对象。

字符串对象没有 find 方法。请参阅[http://php.net/manual/en/book.strings.php](http://php.net/manual/en/book.strings.php)。

改用这个

file_get_html()

```
<?php 
include_once('simple_html_dom.php');

$target = "test.html";
$html = file_get_html($target);

foreach($html->find('div.article') as $element) 
       echo $element->find('h1');

?> 
```

# google-maps - 自托管网站上的谷歌地图

> ID：13648508
> 
> 赞同：2
> 
> 时间：2012-11-30T15:50:07.990
> 
> 标签：google-maps, self-hosting

我有一个通过 no-ip.com 在我的家庭服务器上托管的小型自托管网站，想知道在其上使用 Google 地图是否合法/可能，如果没有，可行的选择是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T17:10:21.990

“在上面使用谷歌地图”是什么意思？

如果您只想让您的用户查看地图并在其上导航，这是可能的。Google 发布了一个 SDK（Google Maps API），允许其他人查询 Google 服务器、收集数据（地图）、向用户显示地图并执行一些与定位和导航相关的操作。这里有一个网络（javascript）工具包：

[https://developers.google.com/maps/documentation/javascript/](https://developers.google.com/maps/documentation/javascript/)

其他信息在这里：

[https://developers.google.com/maps/](https://developers.google.com/maps/)

[https://developers.google.com/maps/documentation/](https://developers.google.com/maps/documentation/)

如果您想在您的 PC 上托管 Google Mpas 服务的克隆，那么不，这是不可能的（出于法律和技术原因）。

一个广为人知的、广受好评的谷歌地图替代品是openstreetmap：

[http://openstreetmap.org/](http://openstreetmap.org/)

# jsp - 在 JSP 中的文本框中显示变量值

> ID：13648512
> 
> 赞同：0
> 
> 时间：2012-11-30T15:50:15.213
> 
> 标签：jsp

我使用以下代码从 JSP 中的条形码扫描仪读取条形码扫描值

```
<%
    final Scanner scanner;

    try 
    {
        scanner = new Scanner();

        try {
            scanner.release();
            scanner.close();
        } catch (Exception e) {

        }

        scanner.open("MotorolaScannerUSB");

        scanner.claim(100);
        scanner.setDeviceEnabled(true);
        scanner.setDataEventEnabled(true);

        scanner.addDataListener(new DataListener() 
        {
            public void dataOccurred(DataEvent arg0) {
                Scanner scn = (Scanner) arg0.getSource();

                if (scn.equals(scanner)) {                      
                    try {
                        scanner.claim(100);
                        System.out.println(new String(scanner.getScanData()));
                        scanner.claim(100);
                        scanner.setDeviceEnabled(true);
                        scanner.setDataEventEnabled(true);
                    } catch (JposException e) {
                        e.printStackTrace();
                    }
                }
            }
        });
    }
    catch (Exception e) {
        System.err.println("error");
    }
%> 
```

我配置了扫描仪，它已成功打开，当我扫描代码时，它也被打印到控制台，但现在我想在 JSP 中的文本框中显示扫描的代码，但我不知道如何， 任何想法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T16:02:06.877

代替

```
System.out.println(new String(scanner.getScanData())); 
```

经过

```
request.setAttribute("scanData", new String(scanner.getScanData())); 
```

这样您就可以稍后在同一个 JSP 中执行

```
<input type="text" value="${fn:escapeXml(scanData)}" /> 
```

或者，如果您不知道如何使用[JSTL](https://stackoverflow.com/tags/jstl/info) / [EL](https://stackoverflow.com/tags/el/info)，或者由于某些不清楚的原因而无法使用它（尽管它们是十年来官方推荐的编写 JSP 的方式），请使用

```
String scanData = new String(scanner.getScanData()); 
```

和

```
<input type="text" value="<%= scanData %>" /> 
```

*（请注意，scriptlet 没有内置的 HTML 转义功能，在防止潜在的 XSS 攻击漏洞时要考虑到这一点）*

* * *

**与具体问题无关**，Java 代码设计在技术上属于[servlet](https://stackoverflow.com/tags/servlets/info)类，而不是 JSP 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T16:03:29.080

您需要使用 ajax 并让客户端向您的服务器发送扫描任何新条形码的请求，然后返回一个带有最新条形码的 json 对象。查看[jquery.ajax](http://api.jquery.com/jQuery.ajax/)进行客户端数据处理。

# twitter-bootstrap - 在 Twitter Bootstrap 2 中调整导航媒体查询

> ID：13648514
> 
> 赞同：0
> 
> 时间：2012-11-30T15:50:29.407
> 
> 标签：twitter-bootstrap, media-queries, nav

这可能是一个非常直接的答案，但我无法找到解决方案。我正在使用 Twitter Bootstrap 2 构建一个站点，并且客户要求顶部导航中的 6 个菜单链接在整个容器中居中并隔开。当我这样做然后开始缩小浏览器窗口时，几个菜单项开始相互堆叠，创建一个更高的导航栏。我能够找到避免这种情况的解决方案的唯一方法是让导航直接进入可折叠菜单，因为它从 724 像素开始。

我需要做什么才能使 940 像素的菜单与 724 像素相同，而不是 1170 像素？当存在可折叠菜单时，我还遇到了一些需要覆盖的填充问题，但我可以为此启动另一个问题日志。

提前谢谢了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T21:44:58.777

没关系，我的朋友们......我已经回答了我自己的问题。我不是 100% 确定如何处理媒体查询，但我发现你可以在 main.css 中为不同的分辨率大小设置最小值/最大值。

谢谢，我！:)

# javascript - 为什么 $.each() 不遍历每个项目？

> ID：13648515
> 
> 赞同：54
> 
> 时间：2012-11-30T15:50:29.410
> 
> 标签：javascript, iteration, jquery

我有以下标记，其中包含 10 个`pre`元素的类`indent`：

```
​&lt;pre class="indent"></pre>
<pre class="indent"></pre>
<pre class="indent"></pre>
<pre class="indent"></pre>
<pre class="indent"></pre>
<pre class="indent"></pre>
<pre class="indent"></pre>
<pre class="indent"></pre>
<pre class="indent"></pre>
<pre class="indent"></pre>​ 
```

我正在使用以下 jQuery`.each()`函数来遍历每个元素：

```
​$(function(){    
    $.each(".indent", function(index){
       alert(index); 
    });    
});​ 
```

我希望看到 10 个警报，但我只看到 7 个

[**-- 见小提琴 --**](http://jsfiddle.net/6nzw9/)

* * *

但是，这可以按预期使用`$(".indent").each()`：

```
$(function(){    
    $(".indent").each(function(index){
       alert(index); 
    });    
});​ 
```

[**-- 见小提琴 --**](http://jsfiddle.net/6nzw9/)

* * *

查看`$.each()`文档，我了解存在差异：

> $.each() 函数与 $(selector).each() 不同，后者用于以独占方式迭代 jQuery 对象。

但我不明白为什么在这种情况下，它不会遍历所有元素。

为什么会这样？

* * *

## 回答 #1

> 赞同：145
> 
> 时间：2012-11-30T15:51:45.920

```
$.each(".indent", function(index){ 
```

不会遍历长度为 7 个字符`$('.indent')`的字符串，而是遍历其中的元素。`".indent"`

见[参考](http://api.jquery.com/jQuery.each/)

* * *

**基于[jQuery源代码](http://code.jquery.com/jquery-latest.js)的更详细的解释：**

jQuery 首先检查第一个参数`obj`（这里是你的字符串）是否有`length`：

```
var ...
        length = obj.length,
        isObj = length === undefined || jQuery.isFunction( obj ); 
```

你的字符串有一个`length`（而不是一个函数），`isObj`是`false`.

在这种情况下，将执行以下代码：

```
for ( ; i < length; ) {
    if ( callback.call( obj[ i ], i, obj[ i++ ] ) === false ) {
        break;
    }
} 
```

所以，给定函数`f`，下面的代码

```
$.each(".indent", f); 
```

相当于

```
for (var i=0; i<".indent".length; i++) {
    var letter = ".indent"[i];
    f.call(letter, i, letter);
} 
```

（您可以记录使用的字母或提醒使用`var f = function(i,v){console.log(v)};`的微妙之处之一）`call``var f = function(){console.log(this)};`

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2012-11-30T15:52:11.550

您正在遍历字符串，您应该将对象或数组传递给`$.each`方法：

```
$(function(){    
    $.each($(".indent"), function(index){
       alert(index);
    });    
}); 
```

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2012-11-30T15:53:28.947

$.each 遍历数据集合。由于您传递了一个包含 7 个字符的字符串，因此它将针对每个字符进行迭代。看使用示例：

```
$.each([52, 97], function(index, value) { 
  alert(index + ': ' + value); 
}); 
```

# css - 在 WinJS 应用程序中缩放文本

> ID：13648517
> 
> 赞同：0
> 
> 时间：2012-11-30T15:50:34.167
> 
> 标签：css, winjs

我正在尝试在 WinJS 应用程序中缩放文本，以便字体大小随屏幕大小而增加。到目前为止，我使用

```
 <div style="height: 5vh;">
        <div data-win-control="WinJS.UI.ViewBox">
            <h1 data-win-bind="textContent:title"></h1>
        </div>
    </div> 
```

这可以正确地在不同分辨率下放大文本的大小，但它也会对文本执行翻译，并在我希望它保持左对齐时将其移动到包含 div 的中心。h1 具有 position:absolute，但即使明确地将其设置为 left:0 也不起作用，看来翻译总是具有更高的重要性。有没有人遇到过这个？在这种情况下，翻译直接应用于 h1 元素，并且父元素上没有边距或填充，并且设置了 text-align:left

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T09:32:13.707

读到这里，我想这就是你想要的：http: [//www.maxdesign.com.au/articles/em/](http://www.maxdesign.com.au/articles/em/)

“浏览器缩放功能是使用一些简单的 JavaScript 来实现的，该 JavaScript 检索浏览器的宽度，将其除以最佳行长”

# c# - 如何通过 StreamReader -> StandardInput 使用 mysql.exe 导入大型 SQL 文件

> ID：13648523
> 
> 赞同：5
> 
> 时间：2012-11-30T15:51:01.563
> 
> 标签：c#, mysql

我有 .sql 文件（550 MB），我想将它导入到正在运行的 mysql 服务器。我知道 mysql.exe 的路径。

我的想法是模仿命令行导入`mysql -u user -ppass db_name < file.sql`。这从命令行运行良好（我设置了高 max_allowed_pa​​cket）。根据 Stackoverflow 上的另一个线程，我发现这很有效：

```
Process process = new Process();
process.StartInfo.FileName = mysqlexepath;
process.StartInfo.Arguments = "-v -u user -ppassworddbname";
process.StartInfo.UseShellExecute = false;
process.StartInfo.RedirectStandardInput = true;

try
{
    process.Start();
    StreamWriter input = process.StandardInput;
    using (StreamReader sr = new StreamReader(sqlfilepath))
    {
        while ((line = sr.ReadLine()) != null)
        {
            if (process.HasExited == true)
                throw new Exception("DB went away.");

            input.WriteLine(line);
            input.Flush();
        }
    }
    process.Close();
}
catch (Exception ex)
{
    MessageBox.Show(ex.Message);
} 
```

我可以看到如何在 DB 中创建表。但我的问题是大约一半的过程退出。我在谷歌上搜索一些超时设置，但找不到任何东西。

我也尝试先读取文件：

```
var file = FileInfo(sqlfilepath);
StreamReader reader = file.OpenText();
string fileContents = reader.ReadToEnd();
StreamWriter input = process.StandardInput;
input.AutoFlush = true;
input.Write(fileContents);
input.Close(); 
```

但我得到 OutOfMemory 异常。所以正确的方法不会通过字符串。

对于如何找出问题所在的任何建议，我将不胜感激。我什至不知道它的进程超时或mysql超时，或者问题是否出在StreamReader中。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-04T18:34:11.207

我知道这不是您问题的直接答案，老实说，我不确定您的方法有什么问题。我可以通过分享我们如何使用 mysql.exe 运行非常大的 sql 脚本来提供帮助...

`"C:\Program Files (x86)\MySQL\MySQL Server 5.0\bin\mysql.exe" -C -B --password=[password] -P 3306 --user=[username] --host=localhost --database=[database] -e "\. C:\Backups\Mybackup.sql"`

这些参数中的大多数都是显而易见的，连接信息等。

不明显的是参数指定mysql应该运行以下命令并退出的神奇`-e "\. [filename]"`部分`-e`。前缀`"\. "`表示应使用输入文件，后跟该文件名。

我们使用它来毫无问题地恢复数 GB 的数据库。所以这是用 mssql 完整的“运行脚本”......

```
public static int RunMySql(string server, int port, string user, string password, string database, string filename)
{
    var process = Process.Start(
        new ProcessStartInfo
        {
            FileName = @"C:\Program Files (x86)\MySQL\MySQL Server 5.0\bin\mysql.exe",
            Arguments =
                String.Format(
                    "-C -B --host={0} -P {1} --user={2} --password={3} --database={4} -e \"\\. {5}\"",
                    server, port, user, password, database, filename),
            ErrorDialog = false,
            CreateNoWindow = true,
            UseShellExecute = false,
            RedirectStandardError = true,
            RedirectStandardInput = true,
            RedirectStandardOutput = true,
            WorkingDirectory = Environment.CurrentDirectory,
        }
        );

    process.OutputDataReceived += (o, e) => Console.Out.WriteLine(e.Data);
    process.ErrorDataReceived += (o, e) => Console.Error.WriteLine(e.Data);
    process.Start();
    process.BeginErrorReadLine();
    process.BeginOutputReadLine();
    process.StandardInput.Close();
    process.WaitForExit();

    return process.ExitCode;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-23T11:33:23.313

我遇到了同样的问题，并且固执地无法使用公认的解决方案，尽管它已经两年没有受到挑战。此外，我想从 .gz 导入而不先将其解压缩到另一个文件（并且不想假设 gzip 可执行文件可用）。所以我找出了原始代码有什么问题。

MySQL转储文件可以有很长的行而没有中断，所以我的猜测是`ReadLine()`填充缓冲区而没有找到换行符，导致`OutOfMemory`异常。所以`Read()`必须使用而不是`ReadLine()`避免这种情况。

可能发生的另一个问题（我有）是.sql文件中的二进制blob，当将文本字符串从文件移动到stdin时，文本重新编码可能会搞砸，所以我修改了代码避免使用 Readers 或 Writers，而是使用字节和二进制。

这是我的解决方案：

```
Process process = new Process();
process.StartInfo.FileName = mysqlexepath;
process.StartInfo.Arguments = "-v -u user -ppassworddbname";
process.StartInfo.UseShellExecute = false;
process.StartInfo.RedirectStandardInput = true;

byte[] buffer = new byte[4096]; 
int count;

try
{
    process.Start();
    BinaryWriter stdinBinary = new BinaryWriter(process.StandardInput.BaseStream);

    Stream fileStream;
    if (sqlfilepath.EndsWith(".gz")) {
         fileStream = new GZipStream(new FileStream(sqlfilepath, FileMode.Open, FileAccess.Read, FileShare.Read), CompressionMode.Decompress); 
    } else {
         fileStream = new FileStream(sqlfilepath, FileMode.Open, FileAccess.Read, FileShare.Read);
    }

    using (fileStream)
    {
        while ((count = fileStream.Read(buffer, 0, buffer.Length)) > 0)
        {
            if (process.HasExited == true)
                throw new Exception("DB went away.");

            stdinBinary.Write(buffer, 0, count);
            stdinBinary.Flush(); // probably not needed
        }
    }

    stdinBinary.Flush();
    process.Close();
}
catch (Exception ex)
{
    Console.Error.WriteLine(ex.Message);
} 
```

我正在导入一个 1.1 GB 的 sql.gz 数据库转储（3.5 GB 未压缩），没有任何问题，但我欢迎任何代码改进。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T11:09:23.203

我遇到了很多问题，问题不在于代码，您的代码是正确的，问题是计算机不支持处理每个进程内存大的文件的虚拟内存限制。Windows 进程系统限制执行每个进程的内存量，以防止系统崩溃。

我不知道限制，因为它因每种计算机体系结构和内存、总线等的数量而异。..

建议您从文件中按顺序创建表，读取一个运行，读取另一个运行，等等。

另一个想法是尝试在另一个线程或进程上并行工作，请观看： http: [//www.codeproject.com/Articles/189374/The-Basics-of-Task-Parallelism-via-C](http://www.codeproject.com/Articles/189374/The-Basics-of-Task-Parallelism-via-C)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T15:28:44.803

在调试.NET 应用程序时，windbg+SOS 是一个不错的选择工具。

*   为 windbg [http://msdn.microsoft.com/en-us/library/bb190764.aspx安装 SOS 扩展](http://msdn.microsoft.com/en-us/library/bb190764.aspx)
*   通过windbg启动你的程序

*   当异常发生时，检查 HEAP Objects 和 CallStack 到 HEAP 中特定的 Exception 对象，找出原因。 [http://blogs.msdn.com/b/johan/archive/2007/01/11/i-am-getting-outofmemoryexceptions-how-can-i-troubleshoot-this.aspx](http://blogs.msdn.com/b/johan/archive/2007/01/11/i-am-getting-outofmemoryexceptions-how-can-i-troubleshoot-this.aspx)

*   gcroot 命令可以在 HEAP 中找到对 Object 的引用。 [http://blogs.msdn.com/b/tess/archive/2006/01/23/net-memory-leak-case-study-the-event-handlers-that-made-the-memory-baloon.aspx](http://blogs.msdn.com/b/tess/archive/2006/01/23/net-memory-leak-case-study-the-event-handlers-that-made-the-memory-baloon.aspx)

# c# - 找不到网络资源 404

> ID：13648525
> 
> 赞同：0
> 
> 时间：2012-11-30T15:51:15.517
> 
> 标签：c#, .net, webresource.axd, webresource

我正在寻找有关为什么找不到此 Web 资源的帮助。

我有第三方解决方案。该演示有一个类库项目和一些演示页面。我下载了它运行它，在我的本地机器上测试它。有用！

为了将其放入我自己的网站解决方案中，我采取了以下步骤。

1.  创建了一个新的类项目/解决方案
2.  将第三方解决方案中的类库对象 .cs 和 1 .js 复制到我的新类项目中。
3.  将我的新项目添加到我的 Web 解决方案中

但是，我收到的错误结果是 404 未找到由萤火虫报告的。

该项目只有几个对网络资源的引用，因此很难使其工作

使用 System.Web.UI；

// 嵌入的 javascript 资源 [程序集：WebResource( RuleValidation.Controls.RuleValidation.ScriptResName, "text/javascript" )]

```
namespace RuleValidation.Controls
{

public static class RuleValidation
{
    public const string ScriptResName = "RuleValidation.Controls.RuleValidation.js";
    public const string ScriptName = "ruleValidation";

    public const string RenderEvaluationFunction = "evaluationfunction";
    public const string RenderValidationType = "validationtype";
    public const string RenderOperations = "operations";
    public const string RenderSources = "sources";
    public const string RenderScopes = "scopes";
    public const string RenderCompareValues = "comparevalues";
    public const string RenderCompareCounts = "comparecounts";

} 

} 
```

其中 RuleValidation.Controls 是嵌入式项目文件的命名空间。

```
 protected override void OnPreRender( EventArgs e )
    {
        base.OnPreRender( e );
        if ( RenderUplevel )
        {
            Type type = GetType();
            if ( !Page.ClientScript.IsClientScriptBlockRegistered( type, RuleValidation.ScriptResName ) )
            {
                Page.ClientScript.RegisterClientScriptResource( type, RuleValidation.ScriptResName );
            }
        }
    } 
```

帮助！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T18:01:27.383

找到了答案。

.js 上有一个属性需要设置为嵌入资源。

# jquery - 谁能告诉我为什么这个空白出现在我的 jQuery 移动按钮中？

> ID：13648534
> 
> 赞同：0
> 
> 时间：2012-11-30T15:51:55.560
> 
> 标签：jquery, jquery-mobile

我不知道如何摆脱按钮右侧的这条白线。这是问题所在：

[http://cl.ly/image/2W0G1o2g3D47](http://cl.ly/image/2W0G1o2g3D47)

这是我的代码：

```
 <!DOCTYPE html><html><style type="text/css">
        </style><head><title></title>

        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
        <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
        <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script></head><body>

        <div data-role="navbar" >
            <ul>
                <li><a id='button1' data-theme ="a" data-iconpos="top">Button 1</a></li>
                <li >  <a id='button2' data-theme ="a" data-iconpos="top">Button 2</a></li>
<li >  <a id='button3' data-theme ="a" data-iconpos="top">Button 3</a></li>
</ul>
        </div><!-- /navbar -->

        <div data-role="navbar" >
            <ul>
                <li><a id='button4' data-theme ="a" data-iconpos="top">Button 4</a></li>
                <li >  <a id='button5' data-theme ="a" data-iconpos="top">Button 5</a></li>

                <li >  <a id='button11' data-theme ="a" data-iconpos="top">Button 6     </a></li>
            </ul>
        </div><!-- /navbar -->

        <div data-role="navbar" >
            <ul>
                <li><a id='button6' data-theme ="a" data-iconpos="top">Button 7</a></li>
                <li >  <a id='button10' data-theme ="b" data-iconpos="top">Button 8</a></li>
            </ul>
        </div><!-- /navbar -->

    </body></html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T16:07:12.513

为每一行的最后一个按钮设置一个类（即 class="lastbut"）。然后，在 CSS 中这样做：

```
.lastbut {
   width:34% !important;
} 
```

33%+33%+33% 等于 99%，你会看到白色的 1% 如果你想修复它，其中一个按钮应该是 34%。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-26T12:03:07.467

我通过在导航栏 div 上使用 overflow-x:hidden 解决了这个问题：

```
<div data-role="navbar" data-iconpos="top" style="overflow-x:hidden"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T16:10:52.130

在您的 CSS 中尝试以下代码：

```
.ui-grid-b > :nth-child(n) {
   margin-right: 0px!important;
 } 
```

# svn - 如何使用 Subversion 命令行向 svn:ignore 添加一个条目而不删除以前的值

> ID：13648537
> 
> 赞同：0
> 
> 时间：2012-11-30T15:52:18.367
> 
> 标签：svn, ant

我需要从命令行向 svn:ignore 添加一些文件。

但我需要这样做而不删除 svn:ignore 属性的先前值。如果我使用命令：

```
svn propset svn:ignore "*.jar" . 
```

它设置了正确的忽略值，但删除了每个先前的值，这不是我想要的。

Using`svn propedit`不适合我，因为我需要从 Ant 脚本中执行它。

**编辑：**可移植性对我来说不是问题（我必须在 Windows 上工作），但我无法安装第三方 Ant 库，我只有 Subversion 命令行。

提前感谢您的任何提示。

**最终编辑：**对于感兴趣的人，我以这种方式在 Ant 脚本中实现了建议的解决方案：

```
<!-- Read current values and write them to a file -->
<exec executable="svn" output="${build}/current-props-file">
    <arg value="propget" />
    <arg value="svn:ignore" />
    <arg value="." />
</exec>
<!-- Reload the file, stripping away the value possibly already present to avoid duplicate -->
<loadfile srcfile="${build}/current-props-file" property="cleaned-props">
    <filterchain>
        <linecontains negate="true">
            <contains value=".jar" /> 
        </linecontains>
    </filterchain>
</loadfile>
<echo message="cleaned-props: ${cleaned-props}" />
<!-- Create file with final values to set -->
<echo file="${build}/cleaned-props-file" message="${cleaned-props}*.jar" />
<!-- Set property values -->
<exec executable="svn">
    <arg value="propset" />
    <arg value="svn:ignore" />
    <arg value="--file" />
    <arg value="${build}/cleaned-props-file" />
    <arg value="." />
</exec> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T16:18:16.810

您是否尝试过 svnant 任务？您可以使用它直接将 SVN 客户端功能集成到您的 Ant 构建中。它还有一个[忽略任务](http://subclipse.tigris.org/svnant/svntask.html#ignore)，看起来它可以满足您的需求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T16:23:10.500

您可以在更新之前读取 svn:ignore 的值，然后在该值上附加一个新行并设置新值：

```
$ ignores=$(svn propget svn:ignore .)
$ ignores="$ignores"$'\n'"*.jar"
$ svn propset svn:ignore "$ignores" . 
```

您还可以使用临时文件来存储旧值：

```
$ svn propget svn:ignore . > /tmp/ignores
$ echo "*.jar" >> /tmp/ignores
$ svn propset svn:ignore -F /tmp/ignores .
$ rm -f /tmp/ignores 
```

但由于您要从 Ant 脚本执行此代码，我建议使用[SVNKit](http://svnkit.com/)实现该功能。代码应如下所示：

```
File target = new File("");
SVNWCClient client = SVNClientManager.newInstance().getWCClient();
SVNPropertyData oldValue = client.doGetProperty(
    target,
    SVNProperty.IGNORE,
    SVNRevision.WORKING,
    SVNRevision.WORKING
);
String newValue = SVNPropertyValue.getPropertyAsString(oldValue.getValue()) +
                  '\n' + "*.jars";
client.doSetProperty(
    target,
    SVNProperty.IGNORE,
    SVNPropertyValue.create(newValue),
    false,
    SVNDepth.EMPTY,
    ISVNPropertyHandler.NULL,
    Collections.emptyList()
); 
```

为了从您的 ant 脚本中运行此代码，请将其放入某个 IgnoresUpdate 类的 main 方法中。编译并使 .class 文件可用于脚本。然后您可以按如下方式调用它：

```
<java classname="IgnoresUpdate" fork="true">
    <classpath>
        <pathelement location="/path/to/compiled/IgnoresUpdate"/>
        <pathelement location="/path/to/svnkit.jar"/>
    </classpath>
</java> 
```

However, as [David](https://stackoverflow.com/users/1156554/david) pointed out in [his answer](https://stackoverflow.com/a/13648967/1065967), you can use [ignore task](http://subclipse.tigris.org/svnant/svntask.html#ignore) which seems like the best solution in general (although it may be not applicable for you case).

# php - 调用方法后返回对象项的快速方法？

> ID：13648542
> 
> 赞同：-3
> 
> 时间：2012-11-30T15:52:32.973
> 
> 标签：php, object

我正在使用 PHP 5.4。我班级中的大多数数据库查询都将结果作为对象返回。我有一些查询要转换为返回对象而不是数组。我正在转换的查询之一在我的应用程序中使用了很多。通常我一次只需要访问一个项目，并且我使用一种速记方法来访问该数组项目。

```
echo $this->analysis->get_meta_data()['member_id']; 
```

有没有办法使用相同的方法仅从带有对象的数组中获取单个结果？我试过了：

```
echo $this->analysis->get_meta_data()->member_id; 
```

...认为它会起作用，但我得到的只是一个错误。我只是不知道是否可以像从数组中返回对象一样，从对象返回单个项目。谢谢！

var_dump：

```
object(stdClass)#23 (72) {
  ["id"]=>
  string(3) "31734"
  ["member_id"]=>
  string(1) "2233"
  ["entity_name"]=>
  string(15) "Tester, Test"
  ["create_date"]=>
  string(10) "11/13/2012"
  ["create_user_id"]=>
  string(1) "1"
  ["status_id"]=>
  string(1) "1"
  ...
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T16:03:24.613

你可以从你的函数中返回一个`ArrayObject`而不是，并拥有两全其美`stdClass``get_meta_data()`

```
function get_meta_data()
{
     // your existing code building an array

     // ..

     // hand array to ArrayObject, telling it to also allow array keys to be accessed as properties

     return new ArrayObject($array, ArrayObject::ARRAY_AS_PROPS);

}
//Either method should now work

echo $this->analysis->get_meta_data()['member_id']; 
echo $this->analysis->get_meta_data()->member_id; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T15:55:44.457

您可以创建一个迭代数组的方法。对于每次迭代，您都会移动索引。

你也可以这样做：

```
 get_meta_data() {

         $obj->member_id = $var["member_id"];
         return $obj;

    }
}
class Obj {

    var $member_id;

} 
```

我假设您已经拥有`$obj`并且`$var`在课堂上的某个地方。

# parsing - 在多个文件中查找字符串并给出每个文件的计数

> ID：13648546
> 
> 赞同：0
> 
> 时间：2012-11-30T15:52:54.807
> 
> 标签：parsing, powershell, logfile

我正在使用 PowerShell 查看 IIS 日志，我需要计算每个日志文件有 500 个错误。

我用过：

```
dir $logpath -recursive | select-string -pattern ' 500 ' | measure-object 
```

但这让我得到了所有文件的总数。我需要每个文件的计数。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T15:57:33.033

select-String 匹配公开一个 Path 属性，您可以使用该属性进行分组：

```
dir $logpath -recursive | select-string -pattern ' 500 ' | group path 
```

# typescript - 如何使用 TypeScript 创建 jQuery UI 小部件

> ID：13648548
> 
> 赞同：1
> 
> 时间：2012-11-30T15:52:58.853
> 
> 标签：typescript, jquery-ui-widget-factory

帮助。我是 java 脚本的新手，所以我想我会尝试使用 TypeScript 让我的生活更轻松......但是当我尝试使用 TypeScript 创建一个 jquery UI Widget 时，我不知道从哪里开始。

我之前在 java 脚本中创建了 UI 小部件，并且知道我的目标是最基本的；

```
$.widget( "nmk.progressbar", {
  _create: function() {
    var progress = this.options.value + "%";
    this.element.addClass("progressbar").text( progress );
  }
}); 
```

（来自[jQuery UI Widget Factory](http://stage.learn.jquery.com/plugins/stateful-plugins-with-widget-factory/)教程）

甚至可以使用 TypeScript 创建一个 jquery UI Widget 吗？

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T21:07:46.323

您应该只需要引用来自definitelyTyped 的[jqueryui.d.ts](https://github.com/borisyankov/DefinitelyTyped)[文件](https://github.com/borisyankov/DefinitelyTyped/blob/master/jqueryui/jqueryui-1.9.d.ts)来获取类型信息。

# facebook - 找不到创建新应用程序按钮或链接

> ID：13648549
> 
> 赞同：-2
> 
> 时间：2012-11-30T15:53:07.760
> 
> 标签：facebook

我在尝试创建新的 facebook 画布页面时遇到问题。我一直在关注教程：http: [//developers.facebook.com/docs/appsonfacebook/tutorial/](http://developers.facebook.com/docs/appsonfacebook/tutorial/)

它首先说“首先访问开发者应用程序”。它指向：http: [//developers.facebook.com/apps](http://developers.facebook.com/apps)。但是，当我单击此链接时，它会将我重定向到我实际 Facebook 页面的管理面板。

我不明白为什么会发生这种情况，而且我不知道有任何其他方法可以导航到可以创建新应用程序的位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T15:59:36.057

这是我到达那里的方式：

1.  点击了你的链接。
2.  登录脸书。
3.  它打开了下面的屏幕。

我确实想指出，它将链接更改为安全链接[https://developers.facebook.com/apps](https://developers.facebook.com/apps)

![这就是我转到该链接时得到的。](../Images/9dd084b9909d17b235001e69d565c81d.png)

# jquery - jQuery：找到正确的元素来删除一个类

> ID：13648552
> 
> 赞同：1
> 
> 时间：2012-11-30T15:53:20.233
> 
> 标签：jquery

好吧，不知何故，我只是无法弄清楚如何使这项工作，它不会那么困难。

我有一个普通的旧导航，如下所示：

```
<ul>
        <li><a href="#" class="men-trigger">Men's</a></li>
        <li><a href="#" class="women-trigger">Women's</a></li>
        <li><a href="#" class="coed-trigger">Coed</a></li>
        <li><a href="#" class="all-trigger">All</a></li>
</ul> 
```

而且我需要向单击的元素添加一个类（我知道该怎么做）：

```
$('.men-trigger').click(function() {  
   $(this).addClass('active');   
}); 
```

我遇到的问题是如何在`active`单击另一个导航项时从导航项中删除类。

我试过类似的东西，但它不起作用：

```
$('.men-trigger').click(function() {  
    $(this).addClass('active');
    $(this).prev().siblings().find('active').removeClass('active');
}); 
```

我已经尝试使用`.parent().siblings().children();`，`.parents(ul).find('active');`但我仍然无法使其工作。

我为此创建了一个**[演示](http://jsfiddle.net/rzea/Vyeaf/3/)**。

注意：每个导航元素都需要有自己的类，因为我在脚本中做了其他事情，这里我只是向您展示我遇到的问题。

提前感谢您对此的任何帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-30T15:55:15.160

```
$('.men-trigger').click(function() {  
    $(this).addClass('active').siblings().removeClass('active');
}); 
```

此外，您可以使用“ends-with”选择器加入所有这些功能：

```
$('[class$="trigger"]').click(function() {  
    $(this).addClass('active').siblings().removeClass('active');
}); 
```

而且由于它们是 li 内部的嵌套锚点，您可能必须：

```
$('[class$="trigger"]').on('click', function() {  
    $(this).addClass('active').parent('li').siblings().find('a').removeClass('active');
});​ 
```

如果使用 jQuery 1.7+ ，它还添加`on()`为绑定事件处理程序的首选方式

[**小提琴**](http://jsfiddle.net/Vyeaf/15/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T15:56:20.450

```
$('.men-trigger').click(function() {  
    $('.active').removeClass('active');
    $(this).addClass('active');
}); 
```

假设您仅对导航元素使用 active 类

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T15:58:29.700

您可以使用最接近来查找父元素。而你的发现没有“。” 活动前。

```
$('.men-trigger').click(function() {  
    $(this).closest('ul').find('.active').removeClass('active');
    $(this).addClass('active');
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-30T15:58:36.997

```
$('li').click(function(){
    $(this).children('a').addClass('active');
    $(this).siblings().children('a').removeClass('active');    
});​ 
```

# java - (Java) 尽早设置新的默认 UI 对象

> ID：13648558
> 
> 赞同：2
> 
> 时间：2012-11-30T15:53:34.433
> 
> 标签：java, user-interface, progress

我制作了一个扩展**BasicProgressBarUI**的自定义进度条 UI 类。我知道我可以简单地通过调用来更改进度条的 UI `progressBar.setUI()`。但是，我认为这是在浪费处理时间，因为环境已经初始化了默认 UI 对象。

因此，我的问题是：如何尽早在应用程序中设置一些属性，使所有进度条默认使用我自己的进度条 UI？如果我必须创建更多的类来做到这一点，这当然很好。

感谢您的回答！

# opencv - 多个单通道矩阵转换为单个多通道矩阵

> ID：13648567
> 
> 赞同：3
> 
> 时间：2012-11-30T15:54:29.650
> 
> 标签：opencv, matrix, computer-vision

我正在使用带有矩阵的 opencv c++ api

我有 4 个单通道垫，我想合并到一个 4 通道矩阵中。它基本上是我在 4 个矩阵中拥有的 rgba 通道，并且想要组合成一个 rgba 图像/矩阵。有谁知道该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T16:43:05.793

你可以使用[cv::merge](http://docs.opencv.org/modules/core/doc/operations_on_arrays.html?highlight=merge#void%20merge%28const%20Mat%2a%20mv,%20size_t%20count,%20OutputArray%20dst%29)做你想做的事。一种可能的用法：

```
cv::Mat r,g,b,a;

//Fill r,g,b,a with data

cv::Mat result;
std::vector<cv::Mat> channels;

channels.push_back(r);
channels.push_back(g);
channels.push_back(b);
channels.push_back(a);

cv::merge(channels, result); 
```

# ant - 如何在ant scp任务中的用户名中转义@

> ID：13648570
> 
> 赞同：1
> 
> 时间：2012-11-30T15:54:44.580
> 
> 标签：ant

> **可能重复：**
> [如何在 Ant SCP 任务中转义 @](https://stackoverflow.com/questions/12979503/how-to-escape-in-ant-scp-task)

我尝试使用带有jsch的ant scp将文件从本地复制到远程。我的问题是，我的用户名包含“@”，我不知道如何逃脱。我试过@@，将用户名设置为属性并将用户名作为命令参数。没有任何帮助。Ant 尝试访问虚假服务器。

它适用于 filezilla 和 Apatana。谁能帮我？

在这里理解我的问题是一个例子。我的用户名是 auth_user@maschine_user@maschine

```
<scp file="example.txt" 
todir="auth_user@maschine_user@maschine@host:/targetdir" 
keyfile="priv_id_dsa"
passphrase="XXXXX"
sftp="true"
/> 
```

非常感谢！

# vb.net - 将2个图片框组合成一个新的图片框

> ID：13648574
> 
> 赞同：0
> 
> 时间：2012-11-30T15:55:14.550
> 
> 标签：vb.net

我的 pixBox1 已修复，无法更改图像

并且 pixBox2 不固定，可以在此处更改颜色并在此处旋转

我使用 OpenFileDialog 函数将图像放入那些像素框

那么现在我怎样才能将这两个 pixbox 合并到我的 pixbox3 中呢？

我试试这个，但它看起来不起作用：

```
 Dim image As New Bitmap(pixBox1.Image)
    Dim image2 As New Bitmap(pixBox2.Image)
    Dim Image3 As New Bitmap(300, 300)

    Dim g As Graphics = Graphics.FromImage(Image3)

    g.DrawImage(image1, New Point(300, 300))

    g.DrawImage(image2, New Point(300, 300))

    g.Dispose()

    g = Nothing

    pixBox3.Image = Image3 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T18:12:14.153

这有点丑陋和缓慢，但它基本上将所有像素设置`image2`为 50% 透明，然后将其绘制在`Image`.

```
Dim image As New Bitmap(pixBox1.Image)
Dim image2 As New Bitmap(pixBox2.Image)
Dim Image3 As New Bitmap(300, 300)

Using g As Graphics = Graphics.FromImage(Image3)

    'make 2nd bmp translucent

    For Integer Xcount = 0 To image2.Width - 1            
        For Integer Ycount = 0 To image2.Height - 1
            Dim c as Color = image2.GetPixel(Xcount, Ycount)
            c = Color.FromARGB(125, c.R, c.G, c.B) '50% alpha
            image2.SetPixel(Xcount, Ycount, c)
        Next 
    Next 

    g.DrawImage(image1, New Point(0, 0))

    g.DrawImage(image2, New Point(0, 0))

End Using

pixBox3.Image = Image3 
```

作为旁注，无论发生什么，该`Using`块都确保被处置。`g`

# wcf - 在 WCF 服务中设置绑定

> ID：13648583
> 
> 赞同：2
> 
> 时间：2012-11-30T15:55:29.997
> 
> 标签：wcf, wcf-binding, wcf-security

这似乎是一个非常简单的问题，但我似乎根本无法弄清楚。

我正在尝试创建一个新的 WCF 服务，但我对必须保护它们并不陌生。我正在使用自定义用户名/密码进行身份验证。我似乎遇到的问题[现在无论如何]是我无法弄清楚如何定义服务以使用 WSHttpBinding（在服务端，而不是客户端）。

我错过了一些非常简单的东西吗？任何指针和/或建议将不胜感激！

**编辑**

到目前为止，这是我的代码： **IAccountService**

```
[ServiceContract]
public interface IAccountService
{
    [OperationContract]
    bool IsCardValid(string cardNumber);

    [OperationContract]
    bool IsAccountActive(string cardNumber);

    [OperationContract]
    int GetPointBalance(string cardNumber);
} 
```

**服务 web.config**

```
<system.serviceModel>
<behaviors>
  <serviceBehaviors>
    <behavior>
      <!-- To avoid disclosing metadata information, set the value below to false before deployment -->
      <serviceMetadata httpGetEnabled="true"/>
      <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
      <serviceDebug includeExceptionDetailInFaults="false"/>

      <StructureMapServiceBehavior />
    </behavior>
  </serviceBehaviors>
</behaviors>
<extensions>
  <behaviorExtensions>
    <add name="StructureMapServiceBehavior" type="Marcus.Loyalty.WebServices.Setup.StructureMapServiceBehavior, Marcus.Loyalty.WebServices, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null"/>
  </behaviorExtensions>
</extensions>
<serviceHostingEnvironment multipleSiteBindingsEnabled="true" aspNetCompatibilityEnabled="true" />
<services>
  <service name="Marcus.Loyalty.WebServices.Account.IAccountService">
    <endpoint address=""
      binding="wsHttpBinding"
      bindingConfiguration="WSHttpBinding_Config"
      contract="Marcus.Loyalty.WebServices.Account.IAccountService"/>
  </service>
</services>
<bindings>
  <wsHttpBinding>
    <binding name="WSHttpBinding_Config"/>
  </wsHttpBinding>
</bindings>
</system.serviceModel> 
```

**测试应用程序（控制台应用程序）**

```
class Program
{
    static void Main(string[] args)
    {
        Console.WriteLine("Please enter card number");
        var number = Console.ReadLine();

        var endPoint = new EndpointAddress("http://localhost:59492/Account/AccountService.svc");
        var binding = new WSHttpBinding(SecurityMode.Message);
        binding.Security.Message.ClientCredentialType = MessageCredentialType.UserName;
        binding.Security.Transport.ClientCredentialType = HttpClientCredentialType.Basic;

        var cf = new ChannelFactory<IAccountService>(binding, endPoint);
        cf.Credentials.UserName.UserName = "testuser";
        cf.Credentials.UserName.Password = "Password1!";

        var service = cf.CreateChannel();
        var balance = service.IsAccountActive(number);

        Console.WriteLine("\nBALANCE: {0:#,#}", balance);

        Console.Write("\n\nPress Enter to continue");

        Console.Read();
    }
} 
```

**测试应用 app.config**

```
<configuration>

<system.serviceModel>
    <bindings>
        <wsHttpBinding>
            <binding name="BasicHttpBinding_IAccountService" />
        </wsHttpBinding>
    </bindings>
    <client>
        <endpoint address="http://localhost:59492/Account/AccountService.svc"
            binding="wsHttpBinding" bindingConfiguration="BasicHttpBinding_IAccountService"
            contract="ServiceReference1.IAccountService" name="BasicHttpBinding_IAccountService" />
    </client>
</system.serviceModel>
</configuration> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T16:55:36.273

MSDN 上有一个广泛的示例（[如何：在代码中指定服务绑定](http://msdn.microsoft.com/en-us/library/ms731833.aspx)） - 但基本上，您需要：

*   您的服务合同 ( `IMyService`)
*   该服务的实现 ( `MyService`)
*   您创建`ServiceHost`托管服务的代码

你得到了这一切？伟大的！

在这种情况下，只需执行以下操作：

```
// Specify a base address for the service
string baseAddress = "http://YourServer/MyService";

// Create the binding to be used by the service.
WsHttpBinding binding1 = new WsHttpBinding();

using(ServiceHost host = new ServiceHost(typeof(MyService)))
{
    host.AddServiceEndpoint(typeof(IMyService), binding1, baseAddress);

    host.Open();

    Console.ReadLine();
} 
```

现在你应该让你的服务主机在你选择的基地址上启动并运行，并`wsHttpBinding`在代码中定义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T16:09:02.063

您需要将 abc（地址，绑定，合同）配置定义到 de web.config 文件中（您也可以通过编程方式进行。b部分，绑定，您可以指定`wsHttpBinding`

```
<system.serviceModel>
    <services>
        <service name = "MyNamespace.MyService">
            <endpoint
            address = "http://localhost:8000/MyService"
            binding = "wsHttpBinding"
            contract = "MyNamespace.IMyContract" />
        </service>
    </services>
</system.serviceModel> 
```

如果您希望以适当的方式启用安全性，有很多文献和选项。您可以使用证书、基于 Windows 的令牌、... 像参数一样传递用户名和密码并不是最好的方法。

# java - 更新tomcat的lib中的jar

> ID：13648586
> 
> 赞同：0
> 
> 时间：2012-11-30T15:55:59.823
> 
> 标签：java, tomcat, jar, jersey

我有一个使用 Jersey Plugin 开发并部署在 Tomact 7 上的应用程序。我必须将项目中使用的所有 jar 导出到 Tomact 的 lib/ 文件夹中……但我不想……是否可以在不将 jar 导出到 Tomcat lib 文件夹的情况下部署我的应用程序。如果是，那么如何？

我听说过使用 maven 或 classpath，但我在 appfog 中托管了我的应用程序，所以我不控制服务器。

[https://t1.ap01.aws.af.cm/rest/person](https://t1.ap01.aws.af.cm/rest/person)

这是我的应用程序链接，如果未导出 lib/，则会出现以下错误：

```
HTTP Status 404 - Servlet Jersey REST Service is not available

type Status report

message Servlet Jersey REST Service is not available

description The requested resource (Servlet Jersey REST Service is not available) is not available.

Apache Tomcat/6.0.35 
```

***抱歉重新发布问题：这是我的旧帐户 jst 可以访问回来..plz 在这里回答不再能够使用我发布的帐户访问[更新 Tomcat LIb 文件夹这个问题](https://stackoverflow.com/questions/13647991/updating-tomcat-lib-folder)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T16:02:57.513

是的，将所有需要的 jars 放在 Web 应用程序的 WEB-INF/lib 文件夹中，Tomcat 就可以访问它们。

通过这种方式，您的 Web 应用程序包含所有必需的 jar，而无需依赖 Tomcat lib 文件夹中可能可用或不可用的 jar。

# java - JPA 和 Hibernate Search 的方法是什么？

> ID：13648588
> 
> 赞同：0
> 
> 时间：2012-11-30T15:56:02.273
> 
> 标签：java, php, hibernate, jpa, hibernate-search

我一直在寻找有关 JPA 和 Hibernate Search 用于查询数据的方法的信息。有大量数据，但大多数（如果不是全部）包含非常高级的术语。我正在努力理解它们之间的差异。如果有人可以向我指出以更简单的方式解释这两件事的东西，那就太好了。我来自 Java（但以前从未使用过 Java 数据库）和 PHP 背景（使用 PHP 数据库）。

干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T16:11:12.500

JPA 是访问关系数据库的标准 API。这是一个 ORM：对象关系映射器。它允许从数据库中获取/保存对象图，而不是行和列。

Hibernate 是 JPA API 的实现。

Hibernate Search 插入到 Hibernate 中，以便能够对持久存在于数据库中的对象（或对象的一部分）执行全文查询。目标是能够执行类似 google 的查询，而不是（或附加于）传统的 SQL 查询。

Hibernate Search在幕后使用[Lucene 。](http://lucene.apache.org/core/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T16:34:40.270

好吧，它们基本上都是 SQL 之上的精美包装器/抽象器。抽象有多个层次：

*   首先，直接 SQL 查询（几乎）完全隐藏起来，并且两个框架都公开了更高级别的（但仍类似于 synthax 中的 SQL）语言。这主要是为了使您的应用程序独立于不同数据库供应商实现的各种 SQL 怪癖。认为 JQuery DOM 操作 API 优于标准（和特定于浏览器）纯 JavaScript。这种语言抽象在 Hibernate 中称为 HQL（Hibernate Query Language），在 JPA 中称为 JPQL（Java Persistence Query Language）。它们都非常相似，事实上我认为 JPQL 深受 HQL 的启发。这是一个基本示例：

SQL查询如

```
SELECT * FROM Persons 
```

在 JPQL 中可以表示为：

```
SELECT p FROM Person p 
```

在 HQL 中：

```
FROM Person p 
```

显然不止这些，而且由于框架，正如它们的全局名称所暗示的那样，试图将关系数据映射到对象，它们的高级查询语言适用于对象。我认为重要的是，在深入研究细节之前从一开始就了解这样一个事实，即无论您使用 JPA 还是 Hibernate 编写的任何查询代码，它都会被转换为特定于当前数据库的 SQL 并针对它执行。Hibernate（它本身和它的 JPA 实现）有一个很好的特性，可以记录所有生成的 SQL 。只需在 Hibernate 配置中将“hibernate.show_sql”（可能还有“hibernate.format_sql”）配置参数添加为 true。例如，对于 Hibernate-JPA 项目，您需要将它们添加到您的持久性单元声明中，在您的 persistence.xml 文件中，

```
<persistence>

    <persistence-unit name="some_name">
        <provider>org.hibernate.ejb.HibernatePersistence</provider>
        <properties>
            <!-...->
            <property name="hibernate.show_sql" value="true" />
            <property name="hibernate.format_sql" value="true" />
        </properties>
    </persistence-unit>
</persistence> 
```

尝试激活此功能并使用 JPQL 或 HQL，看看在 SQL 级别实际发生了什么。这可能会让您更好地了解更高级别的 API 是如何工作的。

*   目前 Hibernate 和 JPA（从第 2 版开始）提供了另一个用于查询数据的抽象 API，称为 Criteria API。这里的基本思想是它完全抛弃了类似 SQL 的语法（和范式），转而支持完全面向对象的查询 API。这是一个快速的 JPA 示例：

    > CriteriaQuery cq = cb.createQuery(Person.class);
    > 
    > ```
    > Root<Person> fromPerson = cq.from(Person.class);
    > CriteriaQuery<Person> selectFromPerson = cq.select(fromPerson); 
    > ```

是的，它看起来很奇怪，但它有它的用途（想象一下尝试基于一些可能设置或未设置的运行时参数动态创建查询等）

同样，纯 Hibernate 和 Hibernate JPA 都具有非常相似的 API 实现。Ang 同样，以这种方式进行的查询会转化为您可以记录和研究的 SQL。

根据您关于 JPA 和 Hibernate 的问题以及哪个是哪个，这是故事：

首先是休眠。一个独立的第 3 方框架，它提供了一种将 SQL 数据映射到 Java 类和对象的方法。然后 Java EE 的人认为这是一个好主意，并制作了自己的版本，命名为 JPA。由于这些人坚持只制定规范并允许第 3 方实际实施这些规范的理念，因此 JPA 本身只是一堆接口和详细说明它们应该如何工作的长文档（在[此处查看](http://jcp.org/aboutJava/communityprocess/final/jsr317/index.html)对于 JPA 2.0)。因此，在完成所有这些之后，决定实施 JPA 规范的潜在第三方之一就是 Hibernate 人员。由于 JPA 规范与已经存在的（并且完全实现的）Hibernate 框架非常相似，因此他们决定与 Hibernate 一起构建它。因此，在 Hibernate 框架中，您拥有原始的 Hibernate API 和实现（与 JPA 规范无关）和 JPA 实现。您甚至可以同时使用它们，尽管这确实不是一个好习惯。

Now, the Oracle Java guys, after finishing the specs, also made an implementation of those themselves. They tend to do this with most of their specs APIs. This implementation is called EclipseLink and you can check it out [here](http://www.eclipse.org/eclipselink/) . Theoretically, your JPA project should work exactly the same if you switch your Hibernate-JPA implementation libraries to EclipseLink-JPA implementation libraries. In practice there are small differences.

# java - 处理 HttpClient 相对重定向

> ID：13648589
> 
> 赞同：0
> 
> 时间：2012-11-30T15:56:06.870
> 
> 标签：java, android, apache, redirect, httpclient

我正在使用 Apache HttpClient 开发一个 Android 应用程序，在执行 post 方法后，响应是一个错误页面，其中包含如下内容：

1|#||4|59|pageRedirect||%2fweb%2fError.aspx%3faspxerrorpath%3d%2fWeb%2fdefault.aspx|

我认为，（但我不确定），问题可能是到 /Web/default.aspx 的相对重定向，其中完整的 URL 应该像“www.site.com/Web/default.aspx”，是否有简单的方法来解决它？我真的要疯了，谢谢。

编辑：问题是我不知道如何在重定向之前编辑 URL，因为我知道在 /Web/default.aspx 之前要添加什么

但是这里的问题是完全相同的：[Httpclient redirect handler](https://stackoverflow.com/questions/4131139/httpclient-redirect-handler) still unsolved ...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T22:01:33.440

我终于使用 loopj http 客户端解决了这个问题

# android - 为什么键盘不显示？

> ID：13648594
> 
> 赞同：0
> 
> 时间：2012-11-30T15:56:28.110
> 
> 标签：android, android-softkeyboard

当编辑文本字段获得焦点时，我无法打开软键盘。它适用于设备，但不适用于模拟器。我有一个 setOnFocusedChangedListener 试图处理它，我认为代码被调用了。此外，屏幕底部会出现一个灰色条。

谁能给我一些关于寻找什么的提示？这是我一直在尝试的类型：

```
 mainPassEdit =  (EditText)mainPrefsPasswordDialog.findViewById(R.id.prefs_main_pass_dialog_edit_text);
    mainPassEdit.setOnFocusChangeListener(new View.OnFocusChangeListener() {
        @Override
        public void onFocusChange(View v, boolean hasFocus) {
            if (hasFocus) {
                Log.v(TAG, "has focus");
                InputMethodManager mgr = (InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE);
                mgr.toggleSoftInput(0, 0);

            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T16:01:40.043

如果您遇到模拟器问题但不是真实设备，请检查您的模拟设备设置。在 Android Virtual Device Manager > Device Definitions > [Device] > Edit... 中，确保 Buttons 设置为“Software”而不是“Hardware”。如果您使用硬件键盘模拟设备，则不会弹出键盘。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T16:04:18.013

你试过这个版本的写法吗：

```
EditText yourEditText= (EditText) findViewById(R.id.yourEditText);
InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
imm.showSoftInput(yourEditText, InputMethodManager.SHOW_IMPLICIT); 
```

通过直接引用 EditText，您可以更好地控制显示它并将其链接到 EditText

# java - 更改多维数组的一行的长度？

> ID：13648598
> 
> 赞同：-1
> 
> 时间：2012-11-30T15:56:35.140
> 
> 标签：java, arrays, multidimensional-array

```
class B {
    public static void main(String a[])
    {
        int x;
        String aa[][]= new String[2][2];
        aa[0]=a;
        x=aa[0].length;
        for(int y=0;y<x;y++)
            System.out.print(" "+aa[0][y]);
    }
} 
```

命令行调用是

**`>java B 1 2 3`**

选项是

> 1.) 0 0
> 
> 2.) 1 2
> 
> 3.) 0 0 0
> 
> 4.) 1 2 3

我告诉第二个选项是正确的，因为数组是用 声明的`[2][2]`，所以它不能是`[0][2]`. 但是，答案是`1 2 3`。有人解释一下，这是怎么发生的？？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-30T15:59:04.450

程序的参数存储在`aa[0]`其中是一个数组，因为它`aa`是一个数组数组。

所以程序只是真正地迭代了`main`方法的参数。它打印`1, 2, 3`（它不关心`aa[1]`）。

```
int x;
String aa[][]= new String[2][2]; // create an matrix of size 2x2
aa[0]=a; // store the program arguments into the first row of aa 
x=aa[0].length; // store the length of aa[0] which is the same as a
for(int y=0;y<x;y++) // iterate over aa[0] which is the same as a
    System.out.print(" "+aa[0][y]); 
```

在功能上与：

```
for (int i = 0; i < a.length; ++i)
    System.out.print(" " + a[i]);
// or even
for (String str: a)
    System.out.print(" " + str); 
```

**编辑**

正如有人说已经删除了他的答案（你不应该，我在你删除它时赞成它），java多维数组是锯齿状数组，这意味着多维数组不必是相同的尺寸，您可以让第 1 行和第 2 行有 2 种不同的尺寸。因此，这意味着声明 a`String[2][2]`并不意味着当您重新分配一行时，该行只需要限制为两列。

```
String[][] ma = new String[3][2];
ma[0] = new String[] {"a", "b"};
ma[1] = new String[] {"a", "b", "c", "d"}; // valid
String[] foo = new String {"1", "3", "33", "e", "ff", "eee"};
ma[2] = foo; // valid also 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T16:08:50.190

变量`aa`被声明为字符串数组的数组，而不是简单的多维数组。设置时，`aa[0] = a`您将数组数组的第一个元素设置为作为参数传递的字符串数组。因此，当您遍历您的项目时，`aa[0]`您正在遍历`aa[0] = a`语句中放置的项目。

# ajax - 如何在 Spring MVC 中通过 Ajax 使用 PUT 方法上传文件？

> ID：13648599
> 
> 赞同：0
> 
> 时间：2012-11-30T15:56:34.070
> 
> 标签：ajax, spring, file-upload, put, apache-commons-fileupload

我有以下 js 代码将 Ajax 请求发送到映射 Spring MVC 中的方法的 URL。

```
function update(id)
{
    $.ajax({
        datatype:"json",
        type: "put",
        url: "/wagafashion/ajax/TempAjax.htm",
        data: "id=" + id+"&t="+new Date().getTime(),
        success: function(response)
        {
            alert(response);                        
        },
        error: function(e)
        {
            alert('Error: ' + e);
        }
    });
} 
```

下面是一个简单的 Spring 表单，它只有一个文件浏览器和一个按钮。

```
<form:form id="mainForm" name="mainForm" method="post" action="Temp.htm" enctype="multipart/form-data" commandName="tempBean">
    <input type="file" id="myFile" name="myFile"/>
    <input type="button" id="btnSubmit" name="btnSubmit" onclick="update(1);" value="Submit"/>
    <!--The js function is called when this button is clicked supplying 1 as id.-->
</form:form> 
```

当按下该按钮时，将调用 Spring 控制器中的以下方法。

```
@RequestMapping(method={RequestMethod.PUT}, value={"ajax/TempAjax"})
public @ResponseBody String update(HttpServletRequest request, HttpServletResponse response)
{
    System.out.println(ServletFileUpload.isMultipartContent(request));
    return "Message";
} 
```

然而，方法调用`ServletFileUpload.isMultipartContent(request)`返回`false`。

* * *

当我如下修改方法时，

```
@RequestMapping(method={RequestMethod.PUT}, value={"ajax/TempAjax"}, headers={"content-type=multipart/form-data"})
public @ResponseBody String update(@RequestParam MultipartFile file, HttpServletRequest request, HttpServletResponse response)
{
    System.out.println(ServletFileUpload.isMultipartContent(request));
    return "Message";
} 
```

js 代码中的错误部分总是提醒`Error: [object Object]`。在这种情况下，即使使用该`POST`方法也会发生同样的事情。

如何通过 Ajax 传递多部分内容（精确使用`PUT`方法）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T00:39:25.103

我真的不明白这是如何将多部分文件发布到服务器的？数据只包含 id 和时间。

尝试类似：

```
function update(id)
{
    $.ajax({
        datatype:"json",
        type: "put",
        url: "/wagafashion/ajax/TempAjax.htm",
        data: $('#mainForm').serialize(),
        success: function(response)
        {
            alert(response);                        
        },
        error: function(e)
        {
            alert('Error: ' + e);
        }
    });
} 
```

# javascript - ExtJS 以 ISO 8601 格式显示来自服务器的日期/时间

> ID：13648600
> 
> 赞同：1
> 
> 时间：2012-11-30T15:56:38.593
> 
> 标签：javascript, datetime, extjs, amazon-s3, timezone

我有以下情况，我在 ExtJs 网格中显示来自 Amazon S3 的一些文件。显示的信息包括名称、大小和上次修改日期时间。现在“LastModified”以 ISO 8601 格式显示 GMT 时间。我想知道 ExtJS 在显示给定计算机所在的时区时是否有任何方法可以更改该时间？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T16:25:17.740

使用该[`Ext.Date.format`](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.Date-method-format)函数自定义 JavaScript 字符串表示的格式`Date`。

例如，`'c'`格式似乎可以满足您的需求：

```
Ext.Date.format(new Date(), 'c'); 
```

回报：

```
2012-11-30T10:21:16-06:00 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T18:03:39.283

在网格中，您可以使用 datecolumn xtype 根据需要呈现日期。这是一个例子：

```
 text:'Created Date',
 dataIndex:'dateCreated',
 xtype:'datecolumn', 
 format:'Y-m-d',
 width:80 
```

**[此处](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.Date)**详细说明了日期格式语法 。对于时区属性“T”，文档说：

> T 运行代码的机器的时区缩写

我将其解释为将使用用户的语言环境自动设置时区。

# javascript - 登录验证时硬刷新 Facebook 应用程序

> ID：13648602
> 
> 赞同：0
> 
> 时间：2012-11-30T15:56:44.047
> 
> 标签：javascript, facebook, authentication

我正在努力从 Facebook 用户那里获得验证，以访问他们在我正在构建的应用程序上的基本信息。我正在使用 PHP SDK 和 Javascript SDK。Javascript 用于调用登录屏幕，PHP 用于获取数据并将其存储在 MySQL 表中以在应用程序周围使用。

这是一个应用程序，您可以在其中对事物进行投票，并且我已对其进行了设置，因此如果用户未使用该应用程序进行验证，则“投票”按钮是 Facebook 登录按钮。在他们登录之前，一切都很好。它成功地将它们登录（在弹出登录对话框中正常），但我无法让父窗口成功刷新以反映更改。基本上，获取用户信息的唯一方法是他们登录然后手动刷新应用程序。然后它会正确发送所有数据。我已经尝试过`location.reload(true);`并且我已经尝试过父窗口重定向，但这些似乎都不起作用。

下面是我的Javascript：

```
<div id="fb-root"></div>
  <script>
    window.fbAsyncInit = function() {
      FB.init({
        appId      : 'APP_ID', // App ID
        status     : true, // check login status
        cookie     : true, // enable cookies to allow the server to access the session
        xfbml      : true  // parse XFBML
      });

      FB.Event.subscribe('auth.login', function(resp) {
        parent.window.location = 'MY_APP_URL';
    });
    };

    // Load the SDK Asynchronously
    (function(d){
      var js, id = 'facebook-jssdk'; if (d.getElementById(id)) {return;}
      js = d.createElement('script'); js.id = id; js.async = true;
      js.src = "//connect.facebook.net/en_US/all.js";
      d.getElementsByTagName('head')[0].appendChild(js);
    }(document));
  </script> 
```

有没有更有效的方法来硬刷新父窗口？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T16:01:28.127

如果 location.reload 不起作用，您可以尝试

```
window.location.href = window.location.href; 
```

这不是最优雅的解决方案，但它有效

# flash - 在没有互联网连接的情况下安装空中桌面应用程序

> ID：13648603
> 
> 赞同：0
> 
> 时间：2012-11-30T15:56:47.653
> 
> 标签：flash, air, adobe, desktop, builder

我得到了一个使用 Adob​​e Flash Builder 创建的 AIR 桌面应用程序。现在我想把它复制到 U 盘上，然后安装在没有互联网连接的电脑上。虽然不起作用，但当我尝试这样做时，我收到一个错误，提示需要更新的 AIR 播放器，并且由于没有互联网连接，它无法更新。

我想我可以将 AIR 播放器安装文件放在 USB 记忆棒上。不过，理想情况下，我想一次安装整个东西，而不是强迫用户先安装一个东西，然后再安装另一个。

有没有办法以某种方式将 AIR 播放器与 AIR 应用程序一起导出，以便自动安装，而不需要互联网连接？还是让它先查看 U 盘中的安装文件，而不是检查互联网并报告错误？或者有没有其他方法可以解决这个问题？

谢谢。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T16:00:50.000

您正在寻找“离线安装程序”。尝试这个：

*   [http://forums.adobe.com/message/3382162?tstart=0](http://forums.adobe.com/message/3382162?tstart=0)

# asp.net-mvc - ASP.NET MVC 4 中的 SignalR 未通过服务器到客户端的消息

> ID：13648605
> 
> 赞同：4
> 
> 时间：2012-11-30T15:56:56.483
> 
> 标签：asp.net-mvc, signalr

我创建了一个简单的测试应用程序来重现我在主应用程序中遇到的问题。

我有以下集线器类：

```
[HubName("testHub")]
public class TestHub : Hub
{
    public TestHub()
    {
        System.Diagnostics.Debug.WriteLine("TestHub instantiated");
    }

    public void RunMe()
    {
        System.Diagnostics.Debug.WriteLine("Client Started");
    }

    public static void Notify(string msg)
    {
        var hubContext = GlobalHost.ConnectionManager.GetHubContext<TestHub>();
        hubContext.Clients.All.notify("Hello!");
    }
} 
```

我的测试网页是：

```
<form action="javascript: void(0)" method="post">
    <input type="button" value="Do It!" onclick="hitHub()"/>
</form>

<div id="error"></div>
<script type="text/javascript">
    var tHub;    
    $(document).ready(function () {
        tHub = $.connection.testHub;
        tHub.notify = function (msg) {
            alert(msg);
        }
        $.connection.hub.start().done(function () {
            tHub.server.runMe();
        });
    });

    function hitHub() {
        $.ajax({
            type: "POST",
            url: "@Url.Content("~/Hub/Test")" ,
            success: function (data, textStatus, jqXHR) {
            },
            error: function (data, textStatus, jqXHR) {
                $("#error")[0].innerHTML = data.responseText;
                alert("Error notifying hub.");
            }
        });

    }
</script> 
```

最后，我的 HubController：

```
public class HubController : Controller
{
    [AcceptVerbs(HttpVerbs.Post)]
    public void Test()
    {
        TestHub.Notify("Got it!");
    }
} 
```

在我的 Application_Start 中，我调用 RouteTable.Routes.MapHubs();

集线器被实例化。然后对 runMe() 的调用被传递到服务器。这一切都很好。

它失败的地方是当我点击“做它！” 按钮。hitHub() 被调用并且我的 HubController.Test() 方法被调用。TestHub.Notify("Got it!") 在没有任何错误的情况下执行，但是客户端上没有任何反应。

我错过了什么？

**更新 1：**根据 JcFx 的回答，更改了上面的 javascript，以便在调用 $.connection.hub.start() 之前设置 tHub.notify。然而，问题仍然存在。

**更新 2：** 提琴手看到的： ![提琴手看到了什么](../Images/7b49a7f4b6208d991c11bdc490fe7ea4.png)

**更新 3：** 当我跟踪 MessageBus.Publish() 调用时，我注意到该主题没有订阅，因此该主题永远不会被安排。我不确定我应该在什么时候检查要进行的订阅...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T22:19:03.813

您使用了错误的语法：

```
var tHub;    
$(document).ready(function () {
    tHub = $.connection.testHub;
    tHub.client.notify = function (msg) {
        alert(msg);
    }
    $.connection.hub.start().done(function () {
        tHub.server.runMe();
    });
}); 
```

注意集线器上的**.client**属性以注册回调。

# visual-studio - 可用于类而不是方法的 TestPropertyAttribute 的等价物是什么

> ID：13648606
> 
> 赞同：1
> 
> 时间：2012-11-30T15:56:56.903
> 
> 标签：visual-studio, unit-testing

类是否有等效的[TestPropertyAttribute](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.testtools.unittesting.testpropertyattribute%28v=vs.80%29.aspx)可用？我想用一个属性标记一堆测试，而不必标记每个测试。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T04:15:19.093

Unfortunately there is none. We don't have a TestProperty equivalent at the class level.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-04T09:45:36.453

刚刚发现这个使用了TestProperty类，在初始化时用来设置一个类成员。它设置了一个默认值，你用不同的设置标记测试`[TestProperty("thing", "non-default")]`

```
[ClassInitialize()]
public void InitializeClass(TestContext testContext)
{
    // Changed by the [TestProperty("thing", "non-default")]
    if (TestContext.Properties.Contains("thing"))
        _thing = TestContext.Properties["thing"] as string;
    else
        _thing = "default";
} 
```

进一步的解释在[这里](http://craigandera.blogspot.nl/2010/02/on-utility-of-testpropertyattribute_24.html)。

# iphone - iOS 应用保护

> ID：13648610
> 
> 赞同：1
> 
> 时间：2012-11-30T15:57:01.183
> 
> 标签：iphone, ios, ipad, jailbreak

> **可能重复：**
> [如何保护我的 iOS 应用程序不被破解？](https://stackoverflow.com/questions/13642153/how-do-i-protect-my-ios-app-from-being-cracked)

我正在尝试制作我的第一个应用程序，它应该花费大约 10 美元。恐怕很多“黑客”会破解我的应用程序并使其完全免费。我在网上发现了很多破解的应用程序。你有什么想法，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T15:58:20.340

我认为你不应该担心它。如果人们决定破解你的应用程序，那将是因为你让它流行起来，你应该已经赚钱了。大多数人没有越狱的 iOS 设备，因此他们无论如何都不会寻找盗版应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T15:58:22.823

没有任何。它是软件世界的猫和老鼠。你必须希望剩下足够多诚实的人。如果您的应用程序足够好，那么好人会付钱。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T15:59:23.717

你应该在问之前搜索。我已经回答了同样的问题，但我会在这里复制解决方案。

老问题：[如何保护我的 iOS 应用程序不被破解？](https://stackoverflow.com/questions/13642153/how-do-i-protect-my-ios-app-from-being-cracked/13642182#13642182)

**回答：**

我实现的小类非常容易： [https ://github.com/itruf/crackify](https://github.com/itruf/crackify)

只需导入 Crackify.h 并检查：

```
BOOL cracked = [Crackify isCracked]; 
```

# ehcache - Grails 2.1.1 与 Terracotta 和 Ehcache 集成

> ID：13648611
> 
> 赞同：0
> 
> 时间：2012-11-30T15:57:08.227
> 
> 标签：ehcache, terracotta, grails-2.1

我正在尝试将 Grails 2.1.1 与 Terracotta 和 Ehcache 集成，但我没有得到任何好的结果。

有人可以给我一些建议以配置它吗？我有点困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T09:29:00.393

现在正在处理主题。首先`ehcache.xml`在您的`grails-app/conf`目录中创建。它应该是这样的：

```
<ehcache>                                                                                                                                                                                                                                      

 <terracottaConfig url="vm4:9510"/>                                                                                                                                                                                                           

  <defaultCache                                                                                                                                                                                                                                
      maxElementsInMemory="50"                                                                                                                                                                                                                 
      eternal="false"                                                                                                                                                                                                                          
      timeToIdleSeconds="20"                                                                                                                                                                                                                   
      timeToLiveSeconds="20"                                                                                                                                                                                                                   
      overflowToDisk="false"                                                                                                                                                                                                                   
      diskPersistent="false"                                                                                                                                                                                                                   
      memoryStoreEvictionPolicy="LRU"                                                                                                                                                                                                          
       />                                                                                                                                                                                                                                       

   <cache name="processedUrlCache"                                                                                                                                                                                                              
         maxElementsInMemory="50000"                                                                                                                                                                                                           
         eternal="true">                                                                                                                                                                                                                       
      <terracotta />                                                                                                                                                                                                                             
   </cache>                                                                                                                                                                                                                                     

</ehcache> 
```

考虑到 terracottaConfig url 应该指向你的实际主机：`Terracotta server`居住的端口。确保您的 tarracotta 缓存节点具有子节点`<terracotta/>`（类似于我的 processUrlCache 条目）。

现在，将这 3 个 jar 放入您的项目 lib 目录中： `ehcache-core-ee-2.6.2.jar`, `ehcache-terracotta-ee-2.6.2.jar`,`terracotta-toolkit-1.6-runtime-ee-5.2.0.jar`

实际版本可能会有所不同（但它应该与您的服务器上的完全相同`terracotta`，所以我的建议是从服务器 lib 目录中获取这些 jar）。

现在，运行您的服务器（`start-tc-server.sh`或`start-tc-server.bat`取决于 Unix/Windows 平台）并运行您的 grails 应用程序。首先，我建议您在 Config.groovy 文件中启用调试日志，方法是：

```
debug 'net.sf.ehcache' 
```

进入你的`log4j`部分。

让我知道它会帮助你。

# dart - Google Dart 简单联系表

> ID：13648615
> 
> 赞同：1
> 
> 时间：2012-11-30T15:57:33.273
> 
> 标签：dart

我正在尝试在 Dart 中制作联系表格。到目前为止，我可以理解服务器需要包含以下内容：

服务器

```
app.addRequestHandler(
  (req) => req.method == 'POST' && req.path == '/adduser',
    (req, res) {
      //process json data
    };
  }
); 
```

以及给客户的表格：

```
<form method="post" action="/adduser">
  <fieldset>
    <legend>Add a user</legend>
    <p><label>First name</label>
    <input name="user[first_name]"/></p>

    <p><label>Email</label>
    <input name="user[email]"/></p>

    <p class="actions"><input type="submit" value="Save"/></p>
  </fieldset>
</form> 
```

客户端需要做什么才能将json数据传到服务器端？

处理表单是否需要 json 或有更好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T17:40:16.057

您可以`form`直接将您的提交到服务器。内容将在请求正文中以*URL 编码*`post`形式发送。[`query_string`在服务器上，您可以使用 pub 上可用](http://pub.dartlang.org/packages/query_string)的包解码数据。

添加`query_string`到您的 pubspec.yaml 文件中：

```
dependencies:
  query_string: ">=1.0.0 <2.0.0" 
```

您的服务器代码可能如下所示：

```
import 'dart:io';
import 'package:query_string/query_string.dart';

main() {
  final server = new HttpServer();
  server.listen('127.0.0.1', 8081);
  server.addRequestHandler((req) => req.method.toUpperCase() == 'POST' 
      && req.path == '/adduser', (request, response) {
    readStreamAsString(request.inputStream).then((body) {
      final params = QueryString.parse("?${body}");
      print(params["user[first_name]"]);
      print(params["user[email]"]);
      response.statusCode = HttpStatus.CREATED;
      response.contentLength = 0;
      response.outputStream.close();
    });
  });
}

Future<String> readStreamAsString(InputStream stream) {
  final completer = new Completer();
  final sb = new StringBuffer();
  final sis = new StringInputStream(stream);
  sis
    ..onData = () { sb.add(sis.read()); }
    ..onClosed = () { completer.complete(sb.toString()); }
    ..onError = (e) { completer.completeException(e); };
  return completer.future;
} 
```

# c# - c# 使用嵌套类反序列化自定义类

> ID：13648616
> 
> 赞同：0
> 
> 时间：2012-11-30T15:57:45.943
> 
> 标签：c#, serialization, xml-serialization, deserialization, xml-deserialization

我正在尝试将我的 xml 反序列化为一个自定义对象并且我很接近，但是没有填充最嵌套的元素，而所有的父母都工作正常。

这是反序列化过程的 xml 和类：

```
<?xml version="1.0" encoding="utf-8" ?>
<dataMapping>
  <documentType attr1="blah" attr2="blah2" attr3="blah3">
    <indexFields>
      <indexField name1="field1A" name2="field1B" type="int" />
      <indexField name1="field2A" name2="field2B" type="int" />
      <indexField name1="field3A" name2="field3B" type="int" />
    </indexFields>
  </documentType>
  <documentType attr1="asdf" attr2="asdf2" attr3="asdf3">
    <indexFields>
      <indexField name1="field1A" name2="field1B" type="int" />
      <indexField name1="field2A" name2="field2B" type="int" />
      <indexField name1="field3A" name2="field3B" type="int" />
    </indexFields>
  </documentType>
</dataMapping>

[XmlRoot("dataMapping")]
public class dataMapping
{
    [XmlElement("documentType")]
    public List<DocumentType> DocumentTypes{ get; set; }

    public dataMapping() { }
}

[XmlRoot("documentType")]
public class DocumentType
{
    [XmlAttribute("attr1")]
    public string Area { get; set; }

    [XmlAttribute("attr2")]
    public string Cabinet { get; set; }

    [XmlAttribute("attr3")]
    public string SearchGroup { get; set; }

    [XmlElement("indexFields")]
    public List<IndexField> IndexFields{ get; set; }

    public DocumentType() { }
}

[XmlRoot("indexField")]
public class IndexField
{
    [XmlAttribute("name1")]
    public string Name1 { get; set; }

    [XmlAttribute("name2")]
    public string Name2 { get; set; }

    [XmlAttribute("type")]
    public string DataType { get; set; }

    public string ObjectValue { get; set; }

    public IndexField() { }
} 
```

因此，当通过反序列化创建我的自定义对象时，除了索引字段及其关联属性之外，所有内容都在填充。我在哪里设置那个类是错误的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T16:02:15.410

尝试添加[XmlArrayItem](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlarrayitemattribute.aspx)它应该有帮助

```
[XmlArrayItem(typeof(IndexField))]
public List<IndexField> IndexFields{ get; set; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T16:14:42.777

搞清楚了 我还需要一个名为“IndexFields”的类（基于我构造 xml 的方式），然后它包含一个“IndexField”列表......只是缺少一个级别。

```
[XmlRoot("indexFields")]
public class IndexFields
{
    [XmlElement("indexField")]
    public List<IndexField> NestedIndexFields { get; set; }

    public IndexFields() { }
} 
```

# html - 为什么我的标题比我想要的高，为什么我的图像没有以内联方式显示？

> ID：13648620
> 
> 赞同：0
> 
> 时间：2012-11-30T15:58:03.413
> 
> 标签：html, css, wordpress

我正在使用我的正常网站[http://christianselig.com](http://christianselig.com)并将其转换为位于[http://christianselig.com/wp](http://christianselig.com/wp)的 Wordpress 网站。

我有两个问题。我在顶部的导航菜单的高度不同。它具有几乎相同的样式，所以我无法说明原因。

此外，我的作品集中的图像在我的主要网站上以内联方式显示，但在 Wordpress 网站中 - 同样，尽管样式相同 - 它们出现在自己的行中，这是我不想要的。

谁能提供为什么会发生这些事情的原因？我一直是个好人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T16:03:24.723

您的图像显示在自己的行上，因为`<br/>`每张图像后面都有一个。

至于你的导航。如果您删除`.main-navigation a { display: block }`并向活动添加填充，`li`它将是相同的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T16:02:54.180

您的图像不是内联的，因为它们之间有换行符。Wordpress 会自动放入这些内容。尝试使用[原始 html](http://wordpress.org/extend/plugins/raw-html/)插件来解决这个问题。

# iphone - 下载并首次启动 iPhone 应用程序后预填充用户数据

> ID：13648621
> 
> 赞同：0
> 
> 时间：2012-11-30T15:58:13.733
> 
> 标签：iphone, ios, url, app-store, mobile-safari

用户从我从邀请电子邮件中提供的 appStore 链接下载我的 iPhone 应用程序。是否可以在应用程序启动时保留/缓存用户数据，例如电子邮件地址和预填充。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T18:18:55.167

你可以得到苹果允许你得到的所有数据，这绝对是没有的——你不能得到用户的电子邮件，你不能得到他的电话号码，你不能得到他的 UDID。没有办法认出他。如果你想从用户那里得到任何东西，他需要手动输入。如果您考虑一下 - 这实际上是一件好事。您的所有 iphone 信息都是完全安全和受保护的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T18:07:39.383

不，这是不可能的。您的特殊链接可能会将用户带到应用商店，但仅此而已。安装应用程序的行为不再与您的链接有关，并且无法将任何数据传递给新安装的应用程序。

当然，一旦安装了应用程序，如果用户点击您提供的特殊链接，它可能会强制您的应用程序运行并向其提供数据。

也许您可以提供一个 QR 码，用户可以在他们第一次运行您的应用程序时扫描它。二维码可以包含您想要的数据。当然，用户可以选择不扫描代码。再说一次，用户可以在不使用您的链接的情况下安装您的应用程序。

# ruby - Ruby 中的向量化字符串连接，如 R 的粘贴函数

> ID：13648625
> 
> 赞同：4
> 
> 时间：2012-11-30T15:58:20.740
> 
> 标签：ruby, arrays

我在 Ruby 中有两个数组，我想将它们按元素连接在一起。在 R 中，这就像使用`paste`函数一样简单，因为它是矢量化的：

```
# R
values <- c(1, 2, 3)
names <- c("one", "two", "three")
paste(values, names, sep = " as ")
[1] "1 as one"   "2 as two"   "3 as three" 
```

在Ruby中它有点复杂，我想知道是否有更直接的方法：

```
# Ruby
values = [1, 2, 3]
names = ["one", "two", "three"]
values.zip(names).map { |zipped| zipped.join(" as ") }
 => ["1 as one", "2 as two", "3 as three"] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T16:32:07.553

另一种方法：

```
values = [1, 2, 3]
names = ["one", "two", "three"].to_enum 
values.map{|v|"#{v} as #{names.next}"}
# => ["1 as one", "2 as two", "3 as three"] 
```

然而，这会在超过 2 个数组时变得更加复杂。OP 的版本更适用于多个数组。

# python - 为什么 Queue().get() 可以停止（或中断）一个 while true 循环？

> ID：13648630
> 
> 赞同：2
> 
> 时间：2012-11-30T15:58:30.847
> 
> 标签：python, multithreading, queue

我正在学习线程和队列，我发现 Queue().get() 可以停止 while 循环。但我不知道为什么。

```
from threading import Thread
from queue import Queue

def working():
    while True:
        print("loop...")
        Queue().get()         ## why here ##

for i in range(5):    
    t = Thread(target=working)
    t.start() 
```

如果我删除“Queue().get()”，它将成为一个无限循环。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T16:03:10.437

该[文档](http://docs.python.org/2/library/queue.html#Queue.Queue.get)告诉您确切的原因。除非您作为第一个参数`Queue.get()`传递，否则会阻塞直到项目可用。`False`

# node.js - NODEJS Canvas 到 base64 png 流

> ID：13648633
> 
> 赞同：1
> 
> 时间：2012-11-30T15:58:45.643
> 
> 标签：node.js, canvas, png, base64

想象一下，我有一个只能读取 base64 图像的客户端，我想像实时电影一样显示这些图像（尽可能减少延迟）。

此图像是使用 nodejs 画布库在服务器端创建的。对于我发送给客户端的每个图像，我使用 imagediff nodejs lib 看到它们之间的差异，并且我只发送差异匹配图像。

在客户端，我展示了它将最后一张图像完全放在前面的图像（层）上。

问题是在服务器端我有以下值会减慢进程：

1.  16ms：画布后：

2.  42ms: imagediff (imagediff nodejs lib)

3.  [100 到 250 毫秒] - toDataUrl (canvas to png base64 - canvas nodejs lib toBuffer().toString('base64'))

大问题在3。

您对此有不同的解决方案吗？

谢谢你的时间。

爱德华多

# c# - 解析前需要除数

> ID：13648634
> 
> 赞同：0
> 
> 时间：2012-11-30T15:58:48.930
> 
> 标签：c#, parsing, int

我目前正在从字符串中读取一个长数字。该数字是 3 位整数，后跟 7 位没有小数的十进制数字（例如`1234567890`）。

在解析之前如何划分这个数字？

我正在尝试将其解析为整数，但整数的最大值约为 20 亿。

这是我尝试过的：

```
class Program
{
    static void Main(string[] args)
    {
        using (StreamReader reader = new StreamReader("CLIFF.dat"))
        {
            string line;
            var locations = new Dictionary<string, int[]>() {
                {"210", new [] {405, 4, 128, 12, 141, 12, 247, 15}}, 
                {"310", new [] {321, 4, 112, 12, 125, 12, 230, 15}}, //
                {"410", new [] {477, 4, 112, 12, 125, 12, 360, 15 }} 
            };
 while ((line = reader.ReadLine()) != null)
            {                 
                    var lineStart = line.Substring(0, 3);

                    if (lineStart == "210" || lineStart == "310" || lineStart == "410")
                    {
                        var currentLocations = locations[lineStart];
                        var letters = line.Substring(currentLocations[0], currentLocations[1]);

                        var transactionvolume =
                            int.Parse(line.Substring(currentLocations[2], currentLocations[3])) +
                            int.Parse(line.Substring(currentLocations[4], currentLocations[5]));
                        var watching = line.Substring(currentLocations[6], currentLocations[7]);
                        var number = int.Parse(line.Substring(currentLocations[6], currentLocations[7])*)); 
```

是当前位置[6]数太大，需要乘以10^-7。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T16:18:13.063

可耻地将评论汇总为答案：

问题是 32 位有符号整数最多可以处理 21 亿的值（准确地说是 2,147,483,647）。直接从字符串翻译的值太大。

如评论中所述，可能的策略是：

*   使用更大的数据类型。Long、double、decimal、bigint 等都能够处理数百亿甚至更高的数字（尽管对于浮点类型，它的精度越高，精度越低）。由于您需要浮点类型并且期望小数点后 7 位，因此我个人会选择 Decimal；它是 128 位的最大数据类型，但它具有浮点类型的最佳精度，这意味着您可以期望将任何整数值放入其中，除以 10 ⁷并得到正确答案。

*   分而治之。您已经将数字作为字符串，并且您知道它正好有 7 个小数点。因此，您知道在字符串中放置小数点的位置，以便可以将其解析为浮点类型：

    ```
    decimal myValue = decimal.Parse(myString.Substring(0, myString.Length-7) 
                                + "." 
                                + myString.Substring(myString.Length-7, 7)); 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T16:20:42.367

也许是这样的：

```
String input = "34567891234567";
int intPart = int.Parse(input.Substring(0, input.Length - 7));
int fracPart = int.Parse(input.Substring(input.Length - 7));
double val = intPart + fracPart * 0.0000001; 
```

# java - 使用jsoup删除两个标签之间的html文本

> ID：13648637
> 
> 赞同：1
> 
> 时间：2012-11-30T15:59:00.817
> 
> 标签：java, html-parsing, jsoup

我想递归地删除两个标签之间的 HTML 文本，例如`<bloquotes>`

对于这个例子：

```
<div>hfhfk
<bloquotes><bloquotes>ppppp</bloquotes>fin texte </bloquotes>
</div> 
```

我想得到以下结果：

```
<div>hfhfk</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T16:11:19.463

使用 jQuery 你可以这样做：

```
$("bloquotes").each(function(){
       $(this).html("");
});
$("bloquotes").remove(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-01T10:49:55.113

给你：

```
String html = "<div>hfhfk<bloquotes><bloquotes>ppppp</bloquotes>fin texte </bloquotes></div>";
Document doc = Jsoup.parse(html);

Elements source = doc.select("div");
Element element = (Element) source.get(0);
Node result = element.childNode(0);
String nodeResult = result.toString().trim();

System.out.println(nodeResult + "");
System.out.println(nodeResult.length() + ""); 
```

# php - Zend Framework 2 PHPUnit 测试错误

> ID：13648644
> 
> 赞同：4
> 
> 时间：2012-11-30T15:59:10.977
> 
> 标签：php, phpunit, zend-framework2, fatal-error

您好我目前正在通过 ZF2 用户指南尝试在骨架应用程序上运行 PHPUnit 测试，如此处所述[http://zf2.readthedocs.org/en/latest/user-guide/unit-testing.html](http://zf2.readthedocs.org/en/latest/user-guide/unit-testing.html)。

但是，即使我没有编辑模块并且每次在 Zend Studio 中运行 PHPUnit 测试时都从教程中复制了所有文件，我也会收到此错误

**错误：**

```
Fatal error: Class 'ApplicationTest\Bootstrap' not found in C:\Program Files (x86)\Zend\Apache2\htdocs\exerciseDB\module\Application\test\ApplicationTest\Controller\IndexControllerTest.php on line 24 
```

但是当我点击 Bootstrap::getServiceManager(); 在第 24 行 Zend Studio 将我带到正确的方法。

**文件结构：**

```
module
|_Application
    |_config
    |_language
    |_src
    |_test
       |_ApplicationTest
       |    |_Controller
       |        |_IndexControllerTest.php
       |_Bootstrap.php
       |_phpunit.xml.dist
       |_TestConfig.php.dist 
```

谁能告诉我哪里出错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T16:14:06.933

这是一个非常烦人的错误，有点令人恼火。您的 phpunit 配置似乎与骨架应用程序上的配置略有不同。为了给你直接的答案来解决我的问题，我做了以下......

```
module
|_Application
    |_config
    |_language
    |_src
    |_tests
       |_ZendApplicationModule
       |    |_Framework
       |        |TestCase.php
       |    |_IndexControllerTest.php
       |    |_SampleTest.php
       |_Bootstrap.php
       |_phpunit.xml.dist
       |_TestConfig.php.dist 
```

使用上述骨架应用程序中概述的基本设置，我必须添加

```
require_once 'Framework/TestCase.php'; 
```

到 SampleTest.php

对于您的实际修复，您需要 require_once 生成问题的文件。那应该解决它。

还要确保更新您的 autoload_classmap.php

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T20:57:45.380

我遇到了同样的问题，phpunit 没有看到我的“module/Application/test/phpunit.xml.dist”文件（我拼错了）

尝试将文件直接添加到命令行： phpunit --bootstrap Bootstrap.php 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-19T10:56:53.003

我也有这个问题。

我通过使用以下参数**从 ZF2 项目的根目录运行 phpunit**解决了这个问题：

```
 ./vendor/bin/phpunit
  --bootstrap ./module/Rest/test/Bootstrap.php 
```

还可以指定要使用的测试套件：

```
 ./vendor/bin/phpunit
  --bootstrap ./module/Rest/test/Bootstrap.php
  ./module/Rest/test/RestTest/Controller/RestControllerTest.php 
```

更多细节[在这里](https://stackoverflow.com/questions/12980033/phpunit-with-a-zend-framework-2-module/19465266#19465266)

# r - 从子集 data.table 中检索特定值

> ID：13648651
> 
> 赞同：1
> 
> 时间：2012-11-30T15:59:50.197
> 
> 标签：r, data.table

因此，我`data.table`在 R 中有一个：

```
my.dt <- data.table(x=seq(1:5),y=(c(TRUE, TRUE, FALSE, FALSE, FALSE))) 
```

我想从中提取一个值或一个值向量：

```
boolean.vector <- my.dt[x<4,"y",with=FALSE]
boolean.value <- my.dt[x<2,"y",with=FALSE] 
```

但是，这些返回值仍然属于 class `data.table`。因此，例如，我不能执行以下操作：

```
> if(boolean.value) { print("Hello") }
Erro em if (boolean.value) { : argumento não é interpretável como lógico
# (Error in if (boolean.value) { : argument cannot be interpreted as logical) 
```

如何检索原始值以便以这种方式使用它们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T16:18:47.993

代替

```
my.dt[1:3,"y",with=FALSE] 
```

我只会做以下之一：

```
my.dt$y[1:3]
my.dt[["y"]][1:3]
my.dt[x<2, "y"][[1L]]
my.dt[1:3, get(y)]
my.dt[1:3, eval(as.name(y))] 
```

在基础 R`[[`中不会复制向量（它是更改时复制），因此这是非常有效的，并且不需要为此使用`data.table`语法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T16:10:20.257

您可以使用该`unlist`函数将输出转换为布尔向量：

```
unlist(boolean.value)
   y 
TRUE 

unlist(boolean.vector)
   y1    y2    y3 
 TRUE  TRUE FALSE 
```

# javascript - 如何将 tbody 元素强制放入非 IE 浏览器的空表中

> ID：13648655
> 
> 赞同：3
> 
> 时间：2012-11-30T16:00:15.993
> 
> 标签：javascript, dom, cross-browser

我有一个非常复杂的旧基础设施 UltraWebGrid 实现。我试图强制浏览器兼容性，即使他们只是告诉我升级。我的网格没有为非 IE 浏览器呈现某个网格的行。我已将错误追溯到一些内置的 javascript，我将在下面添加。我想我可以通过在网格 html 表中添加一个 tbody 元素来强制网格工作，然后它会尝试呈现动态添加的行。我遇到这个想法的逻辑如下。我该怎么做呢？

根据[This SO question](https://stackoverflow.com/questions/3817832/ie-v-ff-is-table-tbodies0-valid)，只有 IE 会自动将 tbody 元素广告到空表中。其他浏览器需要至少一行才能存在 tbody 元素。似乎阻止此网格呈现的 javascript 错误是无法获取主网格表的 tbody 元素。如果浏览器不是 IE，则应该可以通过 javascript 强制表中的 tbody 元素来解决此问题。

旧的 infragistics 网格的内置 javascript 似乎假设这个 tbody 元素将存在于一个空网格中。因此，我的页面无法在非 IE 浏览器中加载网格的行，因为 javascript 正在调用一个不存在的元素。

破坏javascript：

（这在非 IE 浏览器的最后一行中断。我假设因为没有 tbody 元素）

```
var strTransform = this.applyXslToNode(this.Node);
if (strTransform)
{
    var anId = (this.AddNewRow ? this.AddNewRow.Id : null);
    this.Grid._innerObj.innerHTML = "<table style=\"table-layout:fixed;\">" + strTransform + "</table>";
    var tbl = this.Element.parentNode;
    igtbl_replaceChild(tbl, this.Grid._innerObj.firstChild.firstChild, this.Element);
    igtbl_fixDOEXml();
    var _b = this.Band;
    var headerDiv = igtbl_getElementById(this.Grid.Id + "_hdiv");
    var footerDiv = igtbl_getElementById(this.Grid.Id + "_fdiv");
    if (this.AddNewRow)
    {
        if (_b.Index > 0 || _b.AddNewRowView == 1 && !headerDiv || _b.AddNewRowView == 2 && !footerDiv)
        {
            var anr = this.AddNewRow.Element;
            anr.parentNode.removeChild(anr);
            if (_b.AddNewRowView == 1 && tbl.tBodies[0].rows.length > 0)
                tbl.tBodies[0].insertBefore(anr, tbl.tBodies[0].rows[0]);
            else
                tbl.tBodies[0].appendChild(anr);
        }
        this.AddNewRow.Element = igtbl_getElementById(anId);
        this.AddNewRow.Element.Object = this.AddNewRow;
    }
    this.Element = tbl.tBodies[0];
    this.Element.Object = this; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T16:22:08.890

我建议在顶部设置 innerHTML 时添加 tbody。检查 strTransform 是否已经包含一个 tbody，如果没有，请自己添加一个。就像是：

```
var tadd1 = '';
var tadd2 = '';
if (!(/\<tbody\>/.test(strTransform))) {
    tadd1 = '<tbody>';
    tadd2 = '</tbody>';
}
this.Grid._innerObj.innerHTML =
    "<table style=\"table-layout:fixed;\">" + tadd1 + strTransform + tadd2 + "</table>"; 
```

# gwt - 奇怪的 GWT 编译错误

> ID：13648657
> 
> 赞同：16
> 
> 时间：2012-11-30T16:00:25.823
> 
> 标签：gwt

> **可能重复：**
> [GWT RPC 应用程序中的异常](https://stackoverflow.com/questions/8521475/exception-in-gwt-rpc-app)

编译我的项目时（2，我遇到了这个异常。有人以前见过这个吗？

```
[ERROR] Failure in unit cache map load.
java.util.concurrent.ExecutionException: java.lang.RuntimeException: Unable to read from byte cache
    at java.util.concurrent.FutureTask$Sync.innerGet(FutureTask.java:222)
    at java.util.concurrent.FutureTask.get(FutureTask.java:83)
    at com.google.gwt.dev.javac.PersistentUnitCache.awaitUnitCacheMapLoad(PersistentUnitCache.java:466)
    at com.google.gwt.dev.javac.PersistentUnitCache.find(PersistentUnitCache.java:391)
    at com.google.gwt.dev.javac.CompilationStateBuilder.addArchive(CompilationStateBuilder.java:365)
    at com.google.gwt.dev.ArchivePreloader.preloadArchives(ArchivePreloader.java:65)
    at com.google.gwt.dev.Precompile.precompile(Precompile.java:243)
    at com.google.gwt.dev.Precompile.precompile(Precompile.java:229)
    at com.google.gwt.dev.Precompile.precompile(Precompile.java:141)
    at com.google.gwt.dev.Compiler.run(Compiler.java:232)
    at com.google.gwt.dev.Compiler.run(Compiler.java:198)
    at com.google.gwt.dev.Compiler$1.run(Compiler.java:170)
    at com.google.gwt.dev.CompileTaskRunner.doRun(CompileTaskRunner.java:88)
    at com.google.gwt.dev.CompileTaskRunner.runWithAppropriateLogger(CompileTaskRunner.java:82)
    at com.google.gwt.dev.Compiler.main(Compiler.java:177)
Caused by: java.lang.RuntimeException: Unable to read from byte cache
    at com.google.gwt.dev.util.DiskCache.transferFromStream(DiskCache.java:171)
    at com.google.gwt.dev.util.DiskCacheToken.readObject(DiskCacheToken.java:87)
    at sun.reflect.GeneratedMethodAccessor22.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:974)
    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1848)
    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1752)
    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1328)
    at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:1946)
    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1870)
    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1752)
    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1328)
    at java.io.ObjectInputStream.readObject(ObjectInputStream.java:350)
    at java.util.ArrayList.readObject(ArrayList.java:593)
    at sun.reflect.GeneratedMethodAccessor21.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:974)
    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1848)
    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1752)
    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1328)
    at java.io.ObjectInputStream.readObject(ObjectInputStream.java:350)
    at com.google.gwt.dev.javac.CachedCompilationUnit.readObject(CachedCompilationUnit.java:205)
    at sun.reflect.GeneratedMethodAccessor24.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:974)
    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1848)
    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1752)
    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1328)
    at java.io.ObjectInputStream.readObject(ObjectInputStream.java:350)
    at com.google.gwt.dev.javac.PersistentUnitCache.loadUnitMap(PersistentUnitCache.java:517)
    at com.google.gwt.dev.javac.PersistentUnitCache.access$800(PersistentUnitCache.java:96)
    at com.google.gwt.dev.javac.PersistentUnitCache$4.run(PersistentUnitCache.java:222)
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662)
Caused by: java.io.StreamCorruptedException: unexpected EOF in middle of data block
    at java.io.ObjectInputStream$BlockDataInputStream.refill(ObjectInputStream.java:2494)
    at java.io.ObjectInputStream$BlockDataInputStream.read(ObjectInputStream.java:2657)
    at java.io.ObjectInputStream.read(ObjectInputStream.java:843)
    at java.io.InputStream.read(InputStream.java:82)
    at com.google.gwt.dev.util.DiskCache.transferFromStream(DiskCache.java:159)
    ... 40 more 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-11-30T16:04:02.227

从这个链接：

> *   [GWT RPC 应用程序中的异常](https://stackoverflow.com/questions/8521475/exception-in-gwt-rpc-app)
> 
> 由于某种原因，缓存很可能已损坏，因此请尝试从您的项目中删除文件夹 gwt-UnitCache，这应该会有所帮助。

# vbscript - 解析嵌入在 VBScript (QTP) 中的 XML

> ID：13648658
> 
> 赞同：3
> 
> 时间：2012-11-30T16:00:26.237
> 
> 标签：vbscript, xml-parsing, documentation, qtp, procedures

假设有一个包含许多过程的 QTP 函数库。每个过程都包含以 XML 节点格式编写的文档，描述了过程的目的、返回值和其他信息。

有没有办法解析这些嵌入在源代码中的 XML 文档，就像如何在 .NET 中基于 XML 文档生成文档一样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T08:26:53.603

微软自己的 XML 解析器应该可以完成这项工作。我已经在几个项目中使用过它。SO发布[MSXML2.ServerXMLHTTP.4.0 Source？](https://stackoverflow.com/questions/941725/msxml2-serverxmlhttp-4-0-source)展示了如何找出您的机器上安装了哪个版本。微软自然有很多文档。你可以从[这里](http://msdn.microsoft.com/en-us/library/windows/desktop/ms766431%28v=vs.85%29.aspx)开始。

# php - 给我错误

> ID：13648660
> 
> 赞同：-4
> 
> 时间：2012-11-30T16:00:28.030
> 
> 标签：php, facebook, facebook-graph-api

```
$fql_query_url = 'https://graph.facebook.com/'
    . '/fql?q=SELECT+uid2+FROM+friend+WHERE+uid1=me()'
    . '&access_token=' . $access_token;
$fql_query_result = file_get_contents($fql_query_url);
$fql_query_obj = json_decode($fql_query_result, true);

foreach ($fql_query_obj['data'] as $row) {
    echo $row['uid2'];
    echo ',';
} 
```

预期结果是

```
xxxx,xxxx,xxxx,xxxx,xxx,xxxx 
```

它正在工作，正在使用逗号分隔所有 ID，但现在显示错误

```
Warning: Invalid argument supplied for foreach() in xxxx.php 
```

Some1 请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T16:02:18.747

尝试

```
foreach ($fql_query_obj['data'] as $row) {
   echo $row ;
   echo ',';

} 
```

如果`$fql_query_obj`是二维数组，如果是一维数组，则尝试

```
foreach ($fql_query_obj as $row) {
   echo $row ;
   echo ',';

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T16:48:21.730

做一个

```
var_dump($fql_query_obj['data']) 
```

并查看结果以确保您的数据格式正确。

facebook 最有可能返回错误或格式错误的结果。您很可能需要添加逻辑来捕捉这一点，以便您的 foreach 循环仅在您验证该项目是一个数组后执行：

```
if(!is_array($fql_query_obj['data'])){
   return false; 
```

或者其他的东西。

# java - Java REGEX：匹配注释而不匹配特定字符

> ID：13648662
> 
> 赞同：2
> 
> 时间：2012-11-30T16:00:39.730
> 
> 标签：java, regex, comments, pattern-matching

所以我是 Java 新手，在使用正则表达式时遇到了一些麻烦。我试图在一个字符串中找到带翼的注释（`/* */`）和行尾注释（`//`），这样我就可以沿着它们拆分并将这些片段放入一个数组中。

这是我目前拥有的正则表达式：

```
stringofstuff.split("[!//.*?\n!]"); 
```

它有效，但我的问题是它也匹配字符“。” 所以当字符串包含一个数字时`90.55`，我的数组看起来`[90, 55]`不是我想要的。我尝试`^\\.`在右方括号后添加到正则表达式的末尾：

```
stringofstuff.split("[!//.*?\n!]^\\."); 
```

它成功地不匹配`.`，但它不再识别任何一种类型的评论！我不知道我哪里出错了，有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T16:21:42.353

您可以使用正则表达式包的模式和匹配器来执行此操作。例如查找数字：

```
Pattern p = Pattern.compile("\\d");
Matcher m = p.matcher(string);
if(m.find())
{
     System.out.println(m.start()+" "+m.end()+" "+m.group);
} 
```

同样，您可以对要分离的字符串进行不同的组合，并将它们存储在 m.group() 中。

有关 regex 包的不同组合和更多信息，您可以在此处查看：

[http://www.regular-expressions.info/java.html](http://www.regular-expressions.info/java.html)

# facebook - Facebook Graph API - 通过过滤器查找人员

> ID：13648665
> 
> 赞同：1
> 
> 时间：2012-11-30T16:00:45.363
> 
> 标签：facebook, facebook-graph-api

我正在开发一个 facebook 应用程序，它允许通过性别、年龄、国家等众多过滤器来搜索人。我浏览了 facebook graph api，发现这是……不可能的。换句话说，无法使用 facebook api 按性别、年龄或国家/地区查找人员。

我错过了什么吗？

# java - Android上的Phonegap：为什么触发后退按钮会导致SocketException？

> ID：13648669
> 
> 赞同：2
> 
> 时间：2012-11-30T16:00:58.840
> 
> 标签：java, javascript, android, html, cordova

我用 Phonegap 创建了一个 Android 应用程序。

在我的 JavaScript 代码中，我这样做：

```
window.location.href = "http://m.facebook.com/dialog/" + params; 
```

..因为我想重定向到 Facebook。到目前为止效果很好，但是当我按下 Android 设备的后退按钮时，应用程序会显示一个带有错误消息的弹出窗口：

```
Application Error
A network error occured. (file:///android_asset//www/index.html#article?id=61142746) 
```

所以我检查了日志，这就是我去 Facebook 页面时打印的内容：

```
11-30 16:50:25.480: I/PRIME(12998): <CallBackProxy> Send to WebViewClient.
11-30 16:50:25.480: D/CordovaWebView(12998): >>> loadUrl(http://m.facebook.com/dialog/feed?app_id=408479945865356&link=http://nachrichten.mydomain.de/obama-geraet-wegen-seiner-personalpolitik-weiter-in-bredouille/id_61142746/index&picture=http://mcp.mydomain.de/images/id_61143440/af_amp/bilder/uno-botschafterin-und-obama-vertraute-susan-rice-unter-beschuss.jpg&name=Skandalkandidatin%20bringt%20Obama%20in%20die%20Bredouille%0A&caption=mydomain.de%20Nachrichten&description=Skandalkandidatin%20bringt%20Obama%20in%20die%20Bredouille%0A...&redirect_uri=http://nachrichten.mydomain.de/obama-geraet-wegen-seiner-personalpolitik-weiter-in-bredouille/id_61142746/index)
11-30 16:50:25.490: D/CordovaWebView(12998): >>> loadUrlNow()
11-30 16:50:25.620: W/webcore(12998): [webViewCore::webkitDraw] defer message ====
11-30 16:50:25.640: W/System.err(12998): java.net.SocketException: Socket closed
11-30 16:50:25.640: W/System.err(12998):    at libcore.io.Posix.accept(Native Method)
11-30 16:50:25.640: W/System.err(12998):    at libcore.io.BlockGuardOs.accept(BlockGuardOs.java:55)
11-30 16:50:25.640: W/System.err(12998):    at java.net.PlainSocketImpl.accept(PlainSocketImpl.java:98)
11-30 16:50:25.640: W/System.err(12998):    at java.net.ServerSocket.implAccept(ServerSocket.java:202)
11-30 16:50:25.640: W/System.err(12998):    at java.net.ServerSocket.accept(ServerSocket.java:127)
11-30 16:50:25.640: W/System.err(12998):    at org.apache.cordova.CallbackServer.run(CallbackServer.java:195)
11-30 16:50:25.640: W/System.err(12998):    at java.lang.Thread.run(Thread.java:864)
11-30 16:50:25.650: D/DroidGap(12998): onMessage(onPageStarted,http://m.facebook.com/dialog/feed?app_id=408479945865356&link=http://nachrichten.mydomain.de/obama-geraet-wegen-seiner-personalpolitik-weiter-in-bredouille/id_61142746/index&picture=http://mcp.mydomain.de/images/id_61143440/af_amp/bilder/uno-botschafterin-und-obama-vertraute-susan-rice-unter-beschuss.jpg&name=Skandalkandidatin%20bringt%20Obama%20in%20die%20Bredouille%0A&caption=mydomain.de%20Nachrichten&description=Skandalkandidatin%20bringt%20Obama%20in%20die%20Bredouille%0A...&redirect_uri=http://nachrichten.mydomain.de/obama-geraet-wegen-seiner-personalpolitik-weiter-in-bredouille/id_61142746/index)
11-30 16:50:25.830: I/PRIME(12998): <CallBackProxy> Send to WebViewClient.
11-30 16:50:25.830: D/CordovaWebView(12998): >>> loadUrl(http://m.facebook.com/login.php?app_id=408479945865356&skip_api_login=1&cancel=http%3A%2F%2Fnachrichten.mydomain.de%2Fobama-geraet-wegen-seiner-personalpolitik-weiter-in-bredouille%2Fid_61142746%2Findex&next=http%3A%2F%2Fm.facebook.com%2Fdialog%2Ffeed%3F_path%3Dfeed%26app_id%3D408479945865356%26redirect_uri%3Dhttp%253A%252F%252Fnachrichten.mydomain.de%252Fobama-geraet-wegen-seiner-personalpolitik-weiter-in-bredouille%252Fid_61142746%252Findex%26display%3Dtouch%26link%3Dhttp%253A%252F%252Fnachrichten.mydomain.de%252Fobama-geraet-wegen-seiner-personalpolitik-weiter-in-bredouille%252Fid_61142746%252Findex%26picture%3Dhttp%253A%252F%252Fmcp.mydomain.de%252Fimages%252Fid_61143440%252Faf_amp%252Fbilder%252Funo-botschafterin-und-obama-vertraute-susan-rice-unter-beschuss.jpg%26name%3DSkandalkandidatin%2Bbringt%2BObama%2Bin%2Bdie%2BBredouille%250A%26caption%3Dmydomain.de%2BNachrichten%26description%3DSkandalkandidatin%2Bbringt%2BObama%2Bin%2Bdie%2BBredouille%250A...%26from_login%3D1%26client_id%3D408479945865356&rcount=1&_rdr)
11-30 16:50:25.830: D/CordovaWebView(12998): >>> loadUrlNow()
11-30 16:50:25.830: D/skia(12998): notifyPluginsOnFrameLoad not postponed
11-30 16:50:25.830: D/Cordova(12998): onPageFinished(http://m.facebook.com/login.php?app_id=408479945865356&skip_api_login=1&cancel=http%3A%2F%2Fnachrichten.mydomain.de%2Fobama-geraet-wegen-seiner-personalpolitik-weiter-in-bredouille%2Fid_61142746%2Findex&next=http%3A%2F%2Fm.facebook.com%2Fdialog%2Ffeed%3F_path%3Dfeed%26app_id%3D408479945865356%26redirect_uri%3Dhttp%253A%252F%252Fnachrichten.mydomain.de%252Fobama-geraet-wegen-seiner-personalpolitik-weiter-in-bredouille%252Fid_61142746%252Findex%26display%3Dtouch%26link%3Dhttp%253A%252F%252Fnachrichten.mydomain.de%252Fobama-geraet-wegen-seiner-personalpolitik-weiter-in-bredouille%252Fid_61142746%252Findex%26picture%3Dhttp%253A%252F%252Fmcp.mydomain.de%252Fimages%252Fid_61143440%252Faf_amp%252Fbilder%252Funo-botschafterin-und-obama-vertraute-susan-rice-unter-beschuss.jpg%26name%3DSkandalkandidatin%2Bbringt%2BObama%2Bin%2Bdie%2BBredouille%250A%26caption%3Dmydomain.de%2BNachrichten%26description%3DSkandalkandidatin%2Bbringt%2BObama%2Bin%2Bdie%2BBredouille%250A...%26from_login%3D1%26client_id%3D408479945865356&rcount=1&_rdr)
11-30 16:50:25.830: D/CordovaWebView(12998): >>> loadUrlNow()
11-30 16:50:25.830: D/DroidGap(12998): onMessage(onNativeReady,null)
11-30 16:50:25.830: D/DroidGap(12998): onMessage(onPageFinished,http://m.facebook.com/login.php?app_id=408479945865356&skip_api_login=1&cancel=http%3A%2F%2Fnachrichten.mydomain.de%2Fobama-geraet-wegen-seiner-personalpolitik-weiter-in-bredouille%2Fid_61142746%2Findex&next=http%3A%2F%2Fm.facebook.com%2Fdialog%2Ffeed%3F_path%3Dfeed%26app_id%3D408479945865356%26redirect_uri%3Dhttp%253A%252F%252Fnachrichten.mydomain.de%252Fobama-geraet-wegen-seiner-personalpolitik-weiter-in-bredouille%252Fid_61142746%252Findex%26display%3Dtouch%26link%3Dhttp%253A%252F%252Fnachrichten.mydomain.de%252Fobama-geraet-wegen-seiner-personalpolitik-weiter-in-bredouille%252Fid_61142746%252Findex%26picture%3Dhttp%253A%252F%252Fmcp.mydomain.de%252Fimages%252Fid_61143440%252Faf_amp%252Fbilder%252Funo-botschafterin-und-obama-vertraute-susan-rice-unter-beschuss.jpg%26name%3DSkandalkandidatin%2Bbringt%2BObama%2Bin%2Bdie%2BBredouille%250A%26caption%3Dmydomain.de%2BNachrichten%26description%3DSkandalkandidatin%2Bbringt%2BObama%2Bin%2Bdie%2BBredouille%250A...%26from_login%3D1%26client_id%3D408479945865356&rcount=1&_rdr)
11-30 16:50:25.840: D/DroidGap(12998): onMessage(onPageStarted,http://m.facebook.com/login.php?app_id=408479945865356&skip_api_login=1&cancel=http%3A%2F%2Fnachrichten.mydomain.de%2Fobama-geraet-wegen-seiner-personalpolitik-weiter-in-bredouille%2Fid_61142746%2Findex&next=http%3A%2F%2Fm.facebook.com%2Fdialog%2Ffeed%3F_path%3Dfeed%26app_id%3D408479945865356%26redirect_uri%3Dhttp%253A%252F%252Fnachrichten.mydomain.de%252Fobama-geraet-wegen-seiner-personalpolitik-weiter-in-bredouille%252Fid_61142746%252Findex%26display%3Dtouch%26link%3Dhttp%253A%252F%252Fnachrichten.mydomain.de%252Fobama-geraet-wegen-seiner-personalpolitik-weiter-in-bredouille%252Fid_61142746%252Findex%26picture%3Dhttp%253A%252F%252Fmcp.mydomain.de%252Fimages%252Fid_61143440%252Faf_amp%252Fbilder%252Funo-botschafterin-und-obama-vertraute-susan-rice-unter-beschuss.jpg%26name%3DSkandalkandidatin%2Bbringt%2BObama%2Bin%2Bdie%2BBredouille%250A%26caption%3Dmydomain.de%2BNachrichten%26description%3DSkandalkandidatin%2Bbringt%2BObama%2Bin%2Bdie%2BBredouille%250A...%26from_login%3D1%26client_id%3D408479945865356&rcount=1&_rdr)
11-30 16:50:26.670: D/skia(12998): notifyPluginsOnFrameLoad not postponed
11-30 16:50:26.680: D/Cordova(12998): onPageFinished(http://m.facebook.com/login.php?app_id=408479945865356&skip_api_login=1&cancel=http%3A%2F%2Fnachrichten.mydomain.de%2Fobama-geraet-wegen-seiner-personalpolitik-weiter-in-bredouille%2Fid_61142746%2Findex&next=http%3A%2F%2Fm.facebook.com%2Fdialog%2Ffeed%3F_path%3Dfeed%26app_id%3D408479945865356%26redirect_uri%3Dhttp%253A%252F%252Fnachrichten.mydomain.de%252Fobama-geraet-wegen-seiner-personalpolitik-weiter-in-bredouille%252Fid_61142746%252Findex%26display%3Dtouch%26link%3Dhttp%253A%252F%252Fnachrichten.mydomain.de%252Fobama-geraet-wegen-seiner-personalpolitik-weiter-in-bredouille%252Fid_61142746%252Findex%26picture%3Dhttp%253A%252F%252Fmcp.mydomain.de%252Fimages%252Fid_61143440%252Faf_amp%252Fbilder%252Funo-botschafterin-und-obama-vertraute-susan-rice-unter-beschuss.jpg%26name%3DSkandalkandidatin%2Bbringt%2BObama%2Bin%2Bdie%2BBredouille%250A%26caption%3Dmydomain.de%2BNachrichten%26description%3DSkandalkandidatin%2Bbringt%2BObama%2Bin%2Bdie%2BBredouille%250A...%26from_login%3D1%26client_id%3D408479945865356&rcount=1&_rdr)
11-30 16:50:26.680: D/CordovaWebView(12998): >>> loadUrlNow()
11-30 16:50:26.680: D/DroidGap(12998): onMessage(onNativeReady,null)
11-30 16:50:26.680: D/DroidGap(12998): onMessage(onPageFinished,http://m.facebook.com/login.php?app_id=408479945865356&skip_api_login=1&cancel=http%3A%2F%2Fnachrichten.mydomain.de%2Fobama-geraet-wegen-seiner-personalpolitik-weiter-in-bredouille%2Fid_61142746%2Findex&next=http%3A%2F%2Fm.facebook.com%2Fdialog%2Ffeed%3F_path%3Dfeed%26app_id%3D408479945865356%26redirect_uri%3Dhttp%253A%252F%252Fnachrichten.mydomain.de%252Fobama-geraet-wegen-seiner-personalpolitik-weiter-in-bredouille%252Fid_61142746%252Findex%26display%3Dtouch%26link%3Dhttp%253A%252F%252Fnachrichten.mydomain.de%252Fobama-geraet-wegen-seiner-personalpolitik-weiter-in-bredouille%252Fid_61142746%252Findex%26picture%3Dhttp%253A%252F%252Fmcp.mydomain.de%252Fimages%252Fid_61143440%252Faf_amp%252Fbilder%252Funo-botschafterin-und-obama-vertraute-susan-rice-unter-beschuss.jpg%26name%3DSkandalkandidatin%2Bbringt%2BObama%2Bin%2Bdie%2BBredouille%250A%26caption%3Dmydomain.de%2BNachrichten%26description%3DSkandalkandidatin%2Bbringt%2BObama%2Bin%2Bdie%2BBredouille%250A...%26from_login%3D1%26client_id%3D408479945865356&rcount=1&_rdr)
11-30 16:50:26.840: D/SQLiteDatabase(12998): Create pool connection
11-30 16:50:26.840: D/SqliteDatabaseCpp(12998): DB info: open db, path = /data/data/de.mydomain2.my_place_de/databases , key = sefraes, flag = 1, file size = 12288
11-30 16:50:26.840: D/SqliteDatabaseCpp(12998): DB info: path = /data/data/de.mydomain2.my_place_de/databases , key = sefraes, handle: 0xb14f98, type: r, r/w: (1,1), mode: wal, disk free size: 1753 M
11-30 16:50:26.890: I/SqliteDatabaseCpp(12998): sqlite returned: error code = 1, msg = no such table: __version__ 
```

这就是我按下后退按钮时日志所说的内容：

```
11-30 16:50:52.210: D/CordovaWebView(12998): >>> loadUrl(file:///android_asset/www/index.html#article?id=61142746)
11-30 16:50:52.210: D/CordovaWebView(12998): >>> loadUrlNow()
11-30 16:50:52.220: D/chromium(12998): Unknown chromium error: -6
11-30 16:50:52.220: D/DroidGap(12998): onMessage(onPageStarted,file:///android_asset/www/index.html#article?id=61142746)
11-30 16:50:52.230: D/Cordova(12998): CordovaWebViewClient.onReceivedError: Error code=-1 Description=Es ist ein Netzwerkfehler aufgetreten. URL=file:///android_asset/www/index.html#article?id=61142746
11-30 16:50:52.230: D/DroidGap(12998): onMessage(onReceivedError,{"errorCode":-1,"url":"file:\/\/\/android_asset\/www\/index.html#article?id=61142746","description":"Es ist ein Netzwerkfehler aufgetreten."})
11-30 16:50:52.320: D/skia(12998): notifyPluginsOnFrameLoad not postponed
11-30 16:50:52.350: W/System.err(12998): java.net.SocketException: Socket closed
11-30 16:50:52.350: W/System.err(12998):    at libcore.io.Posix.accept(Native Method)
11-30 16:50:52.350: W/System.err(12998):    at libcore.io.BlockGuardOs.accept(BlockGuardOs.java:55)
11-30 16:50:52.350: W/System.err(12998):    at java.net.PlainSocketImpl.accept(PlainSocketImpl.java:98)
11-30 16:50:52.350: W/System.err(12998):    at java.net.ServerSocket.implAccept(ServerSocket.java:202)
11-30 16:50:52.350: W/System.err(12998):    at java.net.ServerSocket.accept(ServerSocket.java:127)
11-30 16:50:52.360: W/System.err(12998):    at org.apache.cordova.CallbackServer.run(CallbackServer.java:195)
11-30 16:50:52.360: W/System.err(12998):    at java.lang.Thread.run(Thread.java:864)
11-30 16:50:52.360: D/DroidGap(12998): onMessage(onPageStarted,file:///android_asset/www/index.html#article?id=61142746)
11-30 16:50:52.360: D/Cordova(12998): onPageFinished(file:///android_asset/www/index.html#article?id=61142746)
11-30 16:50:52.360: D/CordovaWebView(12998): >>> loadUrlNow()
11-30 16:50:52.370: D/DroidGap(12998): onMessage(onNativeReady,null)
11-30 16:50:52.370: D/DroidGap(12998): onMessage(onPageFinished,file:///android_asset/www/index.html#article?id=61142746)
11-30 16:50:52.370: D/SoftKeyboardDetect(12998): Ignore this event
11-30 16:50:52.390: D/Cordova(12998): onPageFinished(file:///android_asset/www/index.html#article?id=61142746)
11-30 16:50:52.390: D/CordovaWebView(12998): >>> loadUrlNow()
11-30 16:50:52.390: D/DroidGap(12998): onMessage(onNativeReady,null)
11-30 16:50:52.390: D/DroidGap(12998): onMessage(onPageFinished,file:///android_asset/www/index.html#article?id=61142746) 
```

**这是怎么回事？**

* * *

**注意：**这只发生在这些设备上。

*   宏达一
*   三星 Galaxy Note

它不会**发生**在：

*   HTC 感觉
*   三星盖乐世 S2
*   三星Galaxy S3

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T03:13:11.797

后退按钮关闭应用程序，这意味着 CallbackServer 已关闭中​​断套接字，这就是触发异常的原因。但是，您只会在某些手机上看到这一点，因为并非所有 JavaScript/本机通信都通过 CallbackServer 进行。我们根据手机的功能选择可用的最佳方法。

此外，如果您升级到 PhoneGap 2.2.0，您将永远不会再看到该异常，因为我们已经停用了 CallbackServer。

# bash - 从 SSH shell 执行时，Bash 脚本“读取”不会暂停用户输入

> ID：13648671
> 
> 赞同：3
> 
> 时间：2012-11-30T16:00:59.823
> 
> 标签：bash, unix, ssh, ubuntu-12.04

我是 Bash 脚本的新手，所以请保持温和。

我通过 SSH (PuTTY) 连接到 Ubuntu 服务器，当我运行此命令时，我希望下载并执行的 bash 脚本允许用户输入，然后回显该输入。它似乎只是写出输入请求的回显标签并终止。

```
wget -O - https://raw.github.com/aaronhancock/pub/master/bash/readtest.sh | bash 
```

任何线索我可能做错了什么？

**更新：**这个 bash 命令完全符合我的要求

```
bash <(wget -q -O - https://raw.github.com/aaronhancock/pub/master/bash/readtest.sh) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T16:20:14.847

乔纳森已经提到：`bash`从管道中获取它的标准输入。`bash`因此，当您想以交互方式输入内容时，您无法将脚本输入。但是您可以使用（假设您的登录 shell 是 a ）的*进程替换*功能：`bash``bash`

```
bash <(wget -O - https://raw.github.com/aaronhancock/pub/master/bash/readtest.sh) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T16:12:48.670

Bash 从管道中获取标准输入，而不是从终端获取。因此，您不能将脚本通过管道传输到 bash 并仍然使用“读取”命令进行用户输入。

请注意，如果将脚本保存到本地文件并将其通过管道传输到 bash，则会遇到同样的问题：

```
less readtest.sh | bash 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T17:10:19.213

我发现这也有效，有助于将数据保持在当前范围内。

评价“ `wget -q -O - https://raw.github.com/aaronhancock/pub/master/bash/readtest.sh`”

# html - 如何使用 CSS 和 HTML 获得“悬停”和“活动”状态？

> ID：13648674
> 
> 赞同：3
> 
> 时间：2012-11-30T16:01:13.377
> 
> 标签：html, css, button, hover

我的网站顶部的标题中有 3 个菜单项（目前它不存在，所以我无法提供链接 - 抱歉）。这 3 个“按钮”不是 CSS 按钮意义上的按钮——它们是呈现为图像的文本（不理想，我知道但它们看起来很漂亮，所以......）。

无论如何，每个图像都包含不同的版本：1 代表默认外观，1 代表鼠标悬停，另一个代表 onclick/active。到目前为止，我使用的 html 和 CSS 如下所示：

HTML

```
<li>
    <a id="About" class="button" href="About Us.cshtml">About Us</a>
</li>
<li style="margin-left: 30px;">
    <a id="Services" class="button" href="Services.cshtml">Services</a>
</li>
<li style="margin-left: 30px;">
    <a id="Contact" class="button" href="Contact Us.cshtml">Contact Us</a>
</li> 
```

CSS

```
#About {background: url(../Buttons/About.png) no-repeat 0 0; width: 87px;}
#Services {background: url(../Buttons/Services.png) no-repeat 0 0; width: 112px;}
#Contact {background: url(../Buttons/Contact.png) no-repeat 0 0; width: 117px;}
a.button {height: 20px; display: inline-block;}
a.button:hover {background-position: 0 -20px;}
a.button:active {background-position: 0 -40px;} 
```

由于某种原因，“悬停”和“活动”状态无效。我注意到，如果我为每个按钮而不是 id 定义类，它工作正常 - 但这对我来说毫无意义。每个按钮都有自己的图像和宽度，因此是独一无二的（这就是为什么我给他们 id 而不是类）。

谁能解释我哪里出错了？我对这一切都很陌生，所以任何解释都需要外行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T16:12:18.280

问题是您的 ID 选择器比您的类 + 伪选择器组合更具体。但如果你不在 ID 选择器中指定位置，你会没事的。例如：

```
#About {background-image: url(../Buttons/About.png); width: 87px;}
#Services {background-image: url(../Buttons/Services.png); width: 112px;}
#Contact {background-image: url(../Buttons/Contact.png); width: 117px;}
a.button {height: 20px; display: inline-block; background-repeat: no-repeat}
a.button:hover {background-position: 0 -20px;}
a.button:active {background-position: 0 -40px;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T16:09:57.660

它不适用于 ids 但适用于类的原因是 ids 将覆盖，因为它们更“特定”。

当遇到冲突时，CSS 优先顺序包括样式与元素匹配的具体程度，并且 id 是您可以获得的最具体的。

您是否有理由不想只使用类？在语义网中，通常倾向于使用类来处理这种情况。

# mysql - 组合 SUM 的 MySQL 查询问题

> ID：13648684
> 
> 赞同：1
> 
> 时间：2012-11-30T16:01:42.917
> 
> 标签：mysql, sql

我在这里有三个表，我正在尝试对其进行复杂的组合查询。

表 1（团队）中有团队：

```
id     name
------------
150    LA Lakers
151    Boston Celtics
152    NY Knicks 
```

表 2（分数）中有分数：

```
id  teamid   week    score
---------------------------
1     150     5        75
2     151     5        95
3     152     5        112 
```

表 3(tickets) 里面有门票

```
id    teamids    week
---------------------
1   150,152,154   5   
2   151,154,155   5 
```

我有两个要尝试编写的查询，而不是每次查询票时都尝试对这些求和，而是在票中添加了一个每周分数字段。这个想法是，每当为团队输入新分数时，我都可以获取该团队 ID，获取具有该团队/周组合的所有门票，并根据他们的团队得分总和进行更新。

我尝试了以下方法来获得我正在寻找的结果（在我尝试更新它们之前）：

```
SELECT t.id, t.teamids, (
  SELECT SUM( s1.score ) 
  FROM scores s1
  WHERE s1.teamid
   IN (
    t.teamids
   )
 AND s1.week =11
) AS score
FROM tickets t
WHERE t.week =11
AND (t.teamids LIKE  "150,%" OR t.teamids LIKE  "%,150") 
```

不仅查询速度慢，而且它似乎也不返回分数的总和，它只返回列表中的第一个分数。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T16:12:32.350

您在这里不需要 SUM 功能吗？分数表已经有了？顺便说一句，避免子查询，尝试左连接（或根据您的需要左外连接）。

```
SELECT t.id, t.name, t1.score, t2.teamids 
FROM teams t 
LEFT JOIN scores t1 ON t.id = t1.teamid AND t1.week = 11
LEFT JOIN tickets t2 ON t2.week = 11 
WHERE t2.week = 11 AND t2.teamids LIKE "%150%" 
```

未测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T16:15:06.623

如果要匹配，则需要容纳只有一个团队 ID 的列。此外，您需要在 SELECT 子查询中添加 LIKE。

```
SELECT t.id, t.teamids, (
  SELECT SUM( s1.score ) 
  FROM scores s1
  WHERE 
    (s1.teamid LIKE t.teamids 
        OR CONCAT("%,",s1.teamid, "%") LIKE t.teamids 
        OR CONCAT("%",s1.teamid, ",%") LIKE t.teamids
    )
    AND s1.week =11
) AS score
FROM tickets t 
WHERE t.week =11
AND (t.teamids LIKE  "150,%" OR t.teamids LIKE  "%,150" OR t.teamids LIKE "150") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T18:46:13.287

好吧，这不是有史以来最优雅的查询，但它应该是这样的：

```
SELECT
  tickets.id,
  tickets.teamids,
  sum(score)
FROM
  tickets left join scores
  on concat(',', tickets.teamids, ',') like concat('%,', scores.teamid, ',%')
WHERE tickets.week = 11 and concat(',', tickets.teamids, ',') like '%,150,%'
GROUP BY tickets.id, tickets.teamids 
```

或者这个：

```
SELECT
  tickets.id,
  tickets.teamids,
  sum(score)
FROM
  tickets left join scores
  on FIND_IN_SET(scores.teamid, tickets.teamids)>0
WHERE tickets.week = 11 and FIND_IN_SET('150', tickets.teamids)>0
GROUP BY tickets.id, tickets.teamids 
```

（有关更多信息，请参阅此[问题](https://stackoverflow.com/questions/10480568/comma-separated-values-in-mysql-in-clause/13445491#13445491)和答案）。

# c - 没有 GdkModifierType 的 gtk_widget_add_accelerator

> ID：13648686
> 
> 赞同：2
> 
> 时间：2012-11-30T16:02:04.540
> 
> 标签：c, gtk3, gdk

我正在尝试使用以下 C 代码将加速器添加到“播放”GTK+ 3.0 菜单项：

```
gtk_widget_add_accelerator(play, "activate", accel_group, GDK_KEY_F5, NULL, GTK_ACCEL_VISIBLE); 
```

我希望在用户按下**F5**键时激活“播放”菜单项。但是，当我尝试编译时，出现以下错误：

```
/usr/include/gtk-3.0/gtk/gtkwidget.h:504:9: note: expected 'GdkModifierType' but argument is of type 'void *' 
```

我不想添加修饰符，只需在用户按下**F5**键时激活菜单项。我意识到我可以将 a`0`作为参数传递（因为`GdkModifierType`它只是一个二进制掩码），但有没有比这个解决方案更受欢迎的方法——也许是一个调用的预处理器宏`GDK_NONE_MASK`或类似的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-21T22:45:37.223

没错，您不应该将*指针*（例如`NULL`）传递给`enum`参数。试图这样做是错误的，这就是编译器告诉你的。

你可以逃脱惩罚`0`。从整数到枚举的隐式转换将开始。

更明确地说，您可以写`(GdkModifierType)0`为参数。

# asp.net - 动态控件不适用于 IE8

> ID：13648692
> 
> 赞同：1
> 
> 时间：2012-11-30T16:02:22.240
> 
> 标签：asp.net, .net, internet-explorer-8, htmlgenericcontrol

我在 Microsoft .NET 4.0 环境中工作。我有一个可变数量的图片列表及其标题，要写入屏幕，因此，我在 ASP.NET 的代码隐藏中使用动态控件。

我写了以下代码：

对于列表中的每张图片，我定义：

标签控制：

```
Label lbPic = new Label();
lbPic.Text = "PicTitle"; 
```

画面控制：

```
ImageButton ImgPic = new ImageButton();
ImgPic.ID = "imgID";
ImgPic.CssClass = "myImgCSS";
ImgPic.ImageUrl = "myImgUrl"; 
```

包含标签和图片的 HTML 控件：

```
HtmlGenericControl hgc = new HtmlGenericControl("myDivName");
hgc.Controls.Add(lbPic);
hgc.Controls.Add(imgPic);
hgc.Attributes.Add("class", "myHgcCss"); 
```

每张图片（img+lable 对）包含在：

```
dvPhotos.Controls.Add(hgc); 
```

`dvPhotos`在 .aspx 文件中定义为 .aspx 文件的 ID `<div>`。这个 div 用`runat="server"`.

这些图片在 FireFox、Chrome 和 IE9 中看起来不错。它们在 IE8 中看起来很糟糕。

看来HTML控件忽略了“myHgcCss”，所以所有的图片和标签都放在了`dvPhotos`.

知道为什么它不适用于 IE8 吗？

CSS相关部分：

```
.myHgcCss
{
    float:right;
    height: 180px;
    width:  170px;
    background-color : #FFFFFF;
    color:#003300;
    margin: 10px 10px 10px 10px; 
    font-size:15px;
    font-style:normal;
    text-align:right;
}
.myImgCSS
{
    height: 150px;
    width:  150px;
    margin: 10px 10px 10px 10px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T16:27:30.810

我认为这是 IE8 中的错误，这可能是一种解决方法。而不是这样做：

```
dvPhotos.Controls.Add(hgc); 
```

将 hgc 添加到标题中。像这样的东西：

```
Page.Header.Controls.Add(hgc); 
```

阅读此内容，我认为他找到了解决您同样问题的方法：

[https://siderite.dev/blog/controls-collection-cannot-be-modified.html](https://siderite.dev/blog/controls-collection-cannot-be-modified.html)

# sql - 将表格分组为 15 分钟间隔

> ID：13648693
> 
> 赞同：5
> 
> 时间：2012-11-30T16:02:25.580
> 
> 标签：sql, sql-server, sql-server-2008, tsql, group-by

T-SQL、SQL Server 2008 及更高版本

给定一个样本表

```
 StatusSetDateTime   | UserID | Status    | StatusEndDateTime   | StatusDuration(in seconds)
============================================================================
 2012-01-01 12:00:00 | myID   | Available | 2012-01-01 13:00:00 | 3600 
```

我需要将其分解为使用 15 分钟间隔的视图，例如：

```
IntervalStart       | UserID | Status | Duration

===========================================

2012-01-01 12:00:00 | myID | Available | 900 

2012-01-01 12:15:00 | myID | Available | 900

2012-01-01 12:30:00 | myID | Available | 900 

2012-01-01 12:45:00 | myID | Available | 900 

2012-01-01 13:00:00 | myID | Available | 0

etc.... 
```

现在我已经能够四处搜索并找到一些会分解的查询，我在[这里](https://stackoverflow.com/questions/2793994/group-mysql-query-by-15-min-intervals)找到了与 MySql 类似的东西：

还有一些 T-SQL [Here](http://blogs.lessthandot.com/index.php/DataMgmt/DataDesign/interesting-t-sql-problems)

但是在第二个示例中，他们将结果相加，而我需要将总持续时间除以间隔时间（900 秒）除以用户的状态。

我能够调整第二个链接中的示例以将所有内容拆分为间隔，但返回总持续时间，我无法完全弄清楚如何拆分间隔持续时间（并且仍然总计为原始总持续时间）。

**提前感谢您的任何见解！**

**编辑：第一次尝试**

```
 ;with cte as 
    (select MIN(StatusDateTime) as MinDate
          , MAX(StatusDateTime) as MaxDate
          , convert(varchar(14),StatusDateTime, 120) as StartDate
          , DATEPART(minute, StatusDateTime) /15 as GroupID
          , UserID
          , StatusKey
          , avg(StateDuration) as AvgAmount
     from AgentActivityLog
     group by convert(varchar(14),StatusDateTime, 120)
         , DATEPART(minute, StatusDateTime) /15
         , Userid,StatusKey)

  select dateadd(minute, 15*GroupID, CONVERT(datetime,StartDate+'00'))
         as [Start Date]
       , UserID, StatusKey, AvgAmount as [Average Amount]
  from cte 
```

**编辑：第二次尝试**

```
;With cte As
   (Select DateAdd(minute
                   , 15 * (DateDiff(minute, '20000101', StatusDateTime) / 15)
                   , '20000101') As StatusDateTime
         , userid, statuskey, StateDuration
    From AgentActivityLog)

 Select StatusDateTime, userid,statuskey,Avg(StateDuration)
 From cte
 Group By StatusDateTime,userid,statuskey; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T17:37:45.987

```
;with cte_max as 
(
   select dateadd(mi, -15, max(StatusEndDateTime)) as EndTime, min(StatusSetDateTime) as StartTime
   from AgentActivityLog
), times as
(
    select StartTime as Time from cte_max
    union all
    select dateadd(mi, 15, c.Time)
    from times as c
        cross join cte_max as cm
    where c.Time <= cm.EndTime
)
select
    t.Time, A.UserID, A.Status,
    case
        when t.Time = A.StatusEndDateTime then 0
        else A.StatusDuration / (count(*) over (partition by A.StatusSetDateTime, A.UserID, A.Status) - 1)
    end as Duration
from AgentActivityLog as A
    left outer join times as t on t.Time >= A.StatusSetDateTime and t.Time <= A.StatusEndDateTime 
```

**`[sql fiddle demo](http://sqlfiddle.com/#!3/de934/9)`**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-30T17:20:55.197

我从来不习惯使用日期数学将事物分成多个分区。似乎有各种各样的陷阱可以落入。

我更喜欢做的是创建一个表（预定义的表值函数，表变量），其中每个日期分区范围都有一行。表值函数方法特别有用，因为您可以根据需要为任意范围和分区大小构建它。然后，您可以加入此表以拆分内容。

```
paritionid starttime     endtime
---------- ------------- -------------
1          8/1/2012 5:00 8/1/2012 5:15
2          8/1/2012 5:15 8/1/2012 5:30
... 
```

我无法谈论这种方法的性能，但我发现查询更加直观。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T19:04:08.767

如果您有一个每 15 分钟时间戳的帮助表，则相对简单，您可以通过 BETWEEN 将其加入到您的基表中。您可以即时构建帮助表或将其永久保存在数据库中。你公司的下一个人也很容易弄清楚：

```
// declare a table and a timestamp variable
declare @timetbl table(t datetime)
declare @t datetime

// set the first timestamp
set @t = '2012-01-01 00:00:00'

// set the last timestamp, can easily be extended to cover many years
while @t <= '2013-01-01'
begin
    // populate the table with a new row, every 15 minutes
    insert into @timetbl values (@t)
    set @t = dateadd(mi, 15, @t)
end

// now the Select query:
select 
   tt.t, aal.UserID, aal.Status,
   case when aal.StatusEndDateTime <= tt.t then 0 else 900 end as Duration
   // using a shortcut for Duration, based on your comment that Start/End are always on the quarter-hour, and thus always 900 seconds or zero

from 
   @timetbl tt 
      INNER JOIN AgentActivityLog aal 
         on tt.t between aal.StatusSetDateTime and aal.StatusEndDateTime

order by
  aal.UserID, tt.t 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T17:28:21.867

您可以使用[递归 Common Table Expression](http://msdn.microsoft.com/en-us/library/ms186243%28v=sql.105%29.aspx)，在 StatusEndDateTime 大于 IntervalStart 时继续添加持续时间，例如

```
;with cte as (
    select StatusSetDateTime as IntervalStart
        ,UserID
        ,Status
        ,StatusDuration/(datediff(mi, StatusSetDateTime, StatusEndDateTime)/15) as Duration
        , StatusEndDateTime
    From AgentActivityLog
    Union all
    Select DATEADD(ss, Duration, IntervalStart) as IntervalStart
        , UserID
        , Status
        , case when DATEADD(ss, Duration, IntervalStart) = StatusEndDateTime then 0 else Duration end as Duration
        , StatusEndDateTime
    From cte
    Where IntervalStart < StatusEndDateTime
)

select IntervalStart, UserID, Status, Duration from cte 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-30T20:59:03.047

这是一个无需辅助表即可为您完成工作的查询。（我不反对辅助表，它们很有用，我使用它们。有时也可以不使用它们。）此查询允许活动在任何时间开始和结束，即使不是以 :00 结尾的整分钟， :15,:30,:45。如果会有毫秒部分，那么你将不得不做一些实验，因为按照你的模型，我只去了第二个分辨率。

如果您有一个已知的硬最大持续时间，则删除 @MaxDuration 并将其替换为该值（以分钟为单位）。`N <= @MaxDuration`对查询执行良好至关重要。

```
DECLARE @MaxDuration int;
SET @MaxDuration = (SELECT Max(StatusDuration) / 60 FROM #AgentActivityLog);

WITH
L0 AS(SELECT 1 c UNION ALL SELECT 1),
L1 AS(SELECT 1 c FROM L0, L0 B),
L2 AS(SELECT 1 c FROM L1, L1 B),
L3 AS(SELECT 1 c FROM L2, L2 B),
L4 AS(SELECT 1 c FROM L3, L3 B),
L5 AS(SELECT 1 c FROM L4, L4 B),
Nums AS(SELECT ROW_NUMBER() OVER (ORDER BY (SELECT 0)) n FROM L5)
SELECT
   S.IntervalStart,
   Duration = DateDiff(second, S.IntervalStart, E.IntervalEnd)
FROM
   #AgentActivityLog L
   CROSS APPLY (
      SELECT N, Offset = (N.N - 1) * 900
      FROM Nums N
      WHERE N <= @MaxDuration
   ) N
   CROSS APPLY (
      SELECT Edge =
         DateAdd(second, N.Offset, DateAdd(minute,
            DateDiff(minute, '20000101', L.StatusSetDateTime)
            / 15 * 15, '20000101')
         )
   ) G
   CROSS APPLY (
      SELECT IntervalStart = Max(T.BeginTime)
      FROM (
         SELECT L.StatusSetDateTime
         UNION ALL SELECT G.Edge
      ) T (BeginTime)
   ) S
   CROSS APPLY (
      SELECT IntervalEnd = Min(T.EndTime)
      FROM (
         SELECT L.StatusEndDateTime
         UNION ALL SELECT G.Edge + '00:15:00'
      ) T (EndTime)
   ) E
WHERE
   N.Offset <= L.StatusDuration
ORDER BY
   L.StatusSetDateTime,
   S.IntervalStart; 
```

如果您想尝试，这里是安装脚本：

```
CREATE TABLE #AgentActivityLog (
    StatusSetDateTime datetime,
    StatusEndDateTime datetime,
    StatusDuration AS (DateDiff(second, 0, StatusEndDateTime - StatusSetDateTime))
);

INSERT #AgentActivityLog -- weird end times
SELECT '20120101 12:00:00', '20120101 13:00:00'
UNION ALL SELECT '20120101 13:00:00', '20120101 13:27:56'
UNION ALL SELECT '20120101 13:27:56', '20120101 13:28:52'
UNION ALL SELECT '20120101 13:28:52', '20120120 11:00:00'

INSERT #AgentActivityLog -- 15-minute quantized end times
SELECT '20120101 12:00:00', '20120101 13:00:00'
UNION ALL SELECT '20120101 13:00:00', '20120101 13:30:00'
UNION ALL SELECT '20120101 13:30:00', '20120101 14:00:00'
UNION ALL SELECT '20120101 14:00:00', '20120120 11:00:00' 
```

此外，这是一个版本，它只期望整分钟以 :00、:15、:30 或 :45 结尾的时间。

```
DECLARE @MaxDuration int;
SET @MaxDuration = (SELECT Max(StatusDuration) / 60 FROM #AgentActivityLog);

WITH
L0 AS(SELECT 1 c UNION ALL SELECT 1),
L1 AS(SELECT 1 c FROM L0, L0 B),
L2 AS(SELECT 1 c FROM L1, L1 B),
L3 AS(SELECT 1 c FROM L2, L2 B),
L4 AS(SELECT 1 c FROM L3, L3 B),
L5 AS(SELECT 1 c FROM L4, L4 B),
Nums AS(SELECT ROW_NUMBER() OVER (ORDER BY (SELECT 0)) n FROM L5)
SELECT
   S.IntervalStart,
   Duration = CASE WHEN Offset = StatusDuration THEN 0 ELSE 900 END
FROM
   #AgentActivityLog L
   CROSS APPLY (
      SELECT N, Offset = (N.N - 1) * 900
      FROM Nums N
      WHERE N <= @MaxDuration
   ) N
   CROSS APPLY (
      SELECT IntervalStart = DateAdd(second, N.Offset, L.StatusSetDateTime)
   ) S
WHERE
   N.Offset <= L.StatusDuration   
ORDER BY
   L.StatusSetDateTime,
   S.IntervalStart; 
```

看起来最后的 0 Duration 行似乎是不正确的，因为那样你就不能只按 IntervalStart 排序，因为有重复的 IntervalStart 值。使总数加 0 的行有什么好处？

# android - 在具有 50% 屏幕宽度的 RelativeLayout 中加载 WebView 时出现问题

> ID：13648696
> 
> 赞同：1
> 
> 时间：2012-11-30T16:02:37.250
> 
> 标签：android, webview, android-webview, android-relativelayout

我有一个填充父宽度的相对布局（ **A ），在其中，我有另一个相对布局（** **B**），屏幕大小（376px）的 50%。

在**RL B**内部，我有一个 webview，它正在显示一个网站。视图的大小是屏幕的 50%，但是网站以全尺寸显示，这意味着我只能看到网站的一半，而另一半没有显示。

我想使网站适合视图宽度，所以我必须在具有屏幕宽度 50% 的视图中查看网站的 100%

我尝试使用这个：

```
WebView webView = new WebView(activity);

        webView.getSettings().setLoadWithOverviewMode(true);
        webView.getSettings().setUseWideViewPort(true); 

        webView.setVisibility(View.VISIBLE);
        webView.setEnabled(true);

        webView.loadUrl(URL); 
```

但它不起作用，我只看到网站宽度的 50%，而不是完整的网站。

代码有什么问题？为什么不工作`.setLoadWithOverviewMode`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T16:42:20.390

我认为您想在加载时将网站内容正确地修复到 webview 中。您可以使用以下代码启用捏合和捏合`wv.getSettings().setSupportZoom(true);`。这允许用户可以放大和缩小。您也可以在使用以下代码加载网页时设置 webview 的比例：

```
WebView browser = (WebView) findViewById(R.id.webview);
browser.getSettings().setLoadWithOverviewMode(true);
browser.getSettings().setUseWideViewPort(true); 
```

有关更多信息，您可以查看[为 Webview 设置缩放](https://stackoverflow.com/questions/2505393/set-zoom-for-webview)

# .net - 如何在派生类上动态调用静态方法

> ID：13648707
> 
> 赞同：3
> 
> 时间：2012-11-30T16:03:08.280
> 
> 标签：.net, vb.net, reflection, static-methods, invokemember

在我的 ASP.Net MVC 页面中，我可以单击列标题以按该列排序，但这涉及 aspx 中的“魔术字符串”，这可能会导致运行时问题。我试图在运行时检查传递给排序依据的值是否有效。我有一个基类，我的所有实体都继承自：

```
Public MustInherit Class BaseEntity(Of T)
'Some Property and method definitions...'

    Public Shared Function IsValidSearchProperty(name As String) As Boolean
        Dim rootPart As String = name
        Dim nested As Boolean = False
        If rootPart.Contains(".") Then
            rootPart = rootPart.Split("."c)(0)
            nested = True
        End If
        Dim properties As PropertyInfo() = GetType(T).GetProperties()
        For Each prop As PropertyInfo In properties
            If prop.Name = rootPart Then
                If nested Then
                    'This is where my issue is'
                    Return Convert.ToBoolean(
                    prop.PropertyType.InvokeMember("IsValidSearchProperty",
                                                   BindingFlags.InvokeMethod Or BindingFlags.Public Or BindingFlags.Static Or BindingFlags.FlattenHierarchy,
                                                   Nothing, Nothing, New Object() {name.Substring(name.IndexOf(".") + 1)})
                                            )
                Else
                    Return True
                End If
            End If
        Next
        Return False
    End Function
End Class 
```

这很好用，除非我试图验证在类层次结构中超过 1 层的嵌套属性。例如：

```
'Pseudocode Hierarchy
BaseEntity(of T)
    PersonEntity : Inherits BaseEntity(Of PersonEntity)
        Property FirstName as string
    PatientEntity : Inherits PersonEntity
        Property PatientType as int
    VisitEntity : Inherits BaseEntity(Of VisitEntity)
        Property Patient as PatientEntity 
```

按 Patient.FirstName 对访问进行排序工作正常，递归地找到该属性，但是当我尝试根据 Patient.PatientType 对访问进行排序时，找不到 PatientType 属性。IsValidSearchProperty 最初是从查找 Patient 属性的 VisitEntity 调用的，它甚至显示为 PatientEntity 类型，但是当此方法使用 InvokeMember 递归调用自身时（这就是我尝试使用属性 Type 调用它的方式） ，在第二次调用中，GetType(T) 是 PersonEntity 类型，它没有 PatientType。关于如何正确解析嵌套调用中的类型的任何建议？

这个方法会被这样调用：

```
VisitEntity.IsValidSearchProperty("Patient.FirstName") 
VisitEntity.IsValidSearchProperty("Patient.PatientType")  '* This one doesn't work
PatientEntity.IsValidSearchProperty("PatientType")
PatientEntity.IsValidSearchProperty("FirstName") 
```

* * *

更新

以下是关于我如何使用它的更多信息：

```
 Dim sorts() As String = SortExpression.Split(";")

                For Each sort As String In sorts
                    Dim sortParts() As String = sort.Split(" ")

                    If VisitEntity.IsValidSearchProperty(sortParts(0)) Then
                        If sortParts(1).ToLower = "true" Then
                            visits = visits.OrderBy(Of VisitEntity)(sortParts(0).ToString(), SortDirection.Ascending)
                        Else
                            visits = visits.OrderBy(Of VisitEntity)(sortParts(0).ToString(), SortDirection.Descending)
                        End If
                    Else
                        _log.WarnFormat("Found invalid sort property {0}", sortParts(0))
                    End If
                Next 
```

SortExpression 类似于“Patient.PatientType True;Patient.FirstName True”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T17:34:32.467

我不知道为什么`InvokeMember`会调用基本类型而不是当前类型。但是，我会更改函数以解决该行为。下面使用将要检查的类型作为参数的函数的私有重载。当函数向下钻取时，它可以调用这个重载并将它想要检查的类型传递给它。`GetType(T)`这应该消除调用该方法的类以及该类返回什么值的问题。

```
Public Shared Function IsValidSearchProperty(name As String) As Boolean
    Dim CurrentType = GetType(T).GetProperties()
    Return IsValidSearchProperty(name, CurrentType)
End Function 

Private Shared Function IsValidSearchProperty(name As String, CurrentType as Type) As Boolean
    Dim rootPart As String = name
    Dim nested As Boolean = False
    If rootPart.Contains(".") Then
        rootPart = rootPart.Split("."c)(0)
        nested = True
    End If
    Dim properties As PropertyInfo() = CurrentType.GetProperties()
    For Each prop As PropertyInfo In properties
        If prop.Name = rootPart Then
            If nested Then
                'This is where my issue is'
                Return IsValidSearchProperty(name.Substring(name.IndexOf(".") + 1), prop.PropertyType)

            Else
                Return True
            End If
        End If
    Next
    Return False
End Function 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T18:13:37.043

我自己玩了一些，想知道这可能是你的问题......

```
Sub Main
    PersonEntity.IsValidSearchProperty()
    PatientEntity.IsValidSearchProperty()
End Sub

' Define other methods and classes here

public class BaseEntity(of T)

    public shared sub IsValidSearchProperty ()
        Console.Write(GetType(T))
    end sub

end class

public class PersonEntity
    inherits BaseEntity(of PersonEntity)

end class

public class PatientEntity
    inherits PersonEntity

end class 
```

这是我认为您的继承如何运作的一个简单示例。我假设构造 BaseEntity 时传递的通用参数是有问题的实体。我假设 PersonEntity 是具体的，而不是另一个带有通用参数的抽象。

我列出的代码的问题是，对于 PatientEntity，在调用`IsValidSearchProperty`类型参数 T 时仍然`PersonEntity`继承自 PersonEntity 类。

这可能与您的课程相同，也可能不同，但如果您的 GetType 返回的是 PersonEntity 而不是 PatientEntity，那么这似乎是您的问题。

我假设如果您要按这些类的实例进行排序，那么您有一个实例，您可以将其转换为实例方法吗？

或者，您可以将类型显式传递给递归函数，这样您就已经从属性的类型中计算出类型并正确传递，而不是在泛型参数上使用 getType （毕竟您拥有该属性，所以不费吹灰之力找到它的类）。

这个答案做了一些假设，但它们确实符合可观察的情况，所以我希望它们是正确的并有所帮助。如果不让我知道，我会编辑或删除。

# ios - UIScrollView 在调整大小时保持滚动矩形

> ID：13648710
> 
> 赞同：0
> 
> 时间：2012-11-30T16:03:16.907
> 
> 标签：ios, uiscrollview, uiimageview, scrollrect

我有一个 UIScrollView 和一个 UIImageView 作为子视图。ScrollView 的 contentSize 已设置为 UIImageView 的大小。我实现了 UIImageView 的缩放和滚动。

当我改变它的框架（按比例）时，我需要 UIScrollView 来保持滚动矩形。

这是怎么做到的？

我的问题是，每当我更改 UIScrollView 的框架时， UIImageView 的可见矩形都会发生变化。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T19:49:19.787

如果我正确理解您的问题，您希望缩小滚动视图的框架，而不改变您在滚动视图中看到的内容。您可以通过以下方式执行此操作：

创建一个新的 UIView 并将其框架设置为您希望查看滚动视图内容的位置和大小。打开剪辑到该视图的边界，view.clipsToBounds = yes。将滚动视图作为子视图添加到您创建的视图中。[查看 addSubview:scrollview]。在滚动视图上关闭剪辑到边界，scrollview.clipsToBounds = no。

希望有帮助。

# sql - 用一个 SQL 脚本提取两组数据

> ID：13648711
> 
> 赞同：0
> 
> 时间：2012-11-30T16:03:16.563
> 
> 标签：sql, sql-server, sql-server-2008

我希望能够在一个脚本中提取两组数据，总共 15 条记录。

在我的场景中，我从某个城镇提取成员，例如可以返回 3 条记录，然后我想从该特定州提取剩余的 12 条记录。

这是一个编码示例：

```
SELECT MemberID, a.UserName, a.MemberDisplayName, a.NYKABizName, a.PackageType
FROM Member a
WHERE a.Claimed = 'Y'
AND a.PrCity = 'Bridgewater'
AND a.PrStateID = 36
AND a.PackageType = 'E'
ORDER BY a.MemberDisplayName

SELECT MemberID, a.UserName, a.MemberDisplayName, a.NYKABizName, a.PackageType
FROM Member a
WHERE a.Claimed = 'Y'
AND a.PrStateID = 36
AND a.PackageType = 'E'
ORDER BY a.MemberDisplayName 
```

我不想将这两者合二为一，我想要一个临时虚拟表来存储结果，然后在完成后返回虚拟表。

有什么想法可以做到这一点吗？

非常感谢，neojakey

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T16:07:48.433

你的[虚拟表](http://www.w3schools.com/sql/sql_view.asp)看起来像这样

```
CREATE VIEW view_name AS
    SELECT * FROM
    (
    SELECT MemberID, a.UserName, a.MemberDisplayName, a.NYKABizName, a.PackageType
    FROM Member a
    WHERE a.Claimed = 'Y'
    AND a.PrCity = 'Bridgewater'
    AND a.PrStateID = 36
    AND a.PackageType = 'E'
    ORDER BY a.MemberDisplayName
    ) x 
    UNION 
    (
    SELECT MemberID, a.UserName, a.MemberDisplayName, a.NYKABizName, a.PackageType
    FROM Member a
    WHERE a.Claimed = 'Y'
    AND a.PrStateID = 36
    AND a.PackageType = 'E'
    ORDER BY a.MemberDisplayName
    ) y 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T16:11:14.360

您可以在数据适配器中传递多个选择语句，以“;”分隔。

```
SqlDataAdapter dataAdapter = new SqlDataAdapter(“select * from table1;select * from table2”, connection);

DataSet ds = new DataSet();

dataAdapter.Fill(ds); 
```

然后您可以使用 ds.Tables[index] 引用结果集。

[具有多个表的 C# DataAdapter 和 DataSet](https://stackoverflow.com/questions/4574606/c-sharp-dataadapter-and-dataset-with-multiple-table)

# java - Hadoop 示例作业在独立模式下失败：“无法加载本机 hadoop 库”

> ID：13648713
> 
> 赞同：1
> 
> 时间：2012-11-30T16:03:22.417
> 
> 标签：java, hadoop, ubuntu-12.04

我试图让最简单的 Hadoop“hello world”设置工作，但是当我运行以下命令时：

```
hadoop jar /usr/share/hadoop/hadoop-examples-1.0.4.jar grep input output 'dfs[a-z.]+' 
```

我收到以下警告：

```
12/11/30 16:36:40 WARN util.NativeCodeLoader: Unable to load native-hadoop library for your platform... using builtin-java classes where applicable 
```

完整的错误跟踪如下所示：

```
12/11/30 16:57:18 WARN util.NativeCodeLoader: Unable to load native-hadoop library for your platform... using builtin-java classes where applicable
12/11/30 16:57:18 WARN snappy.LoadSnappy: Snappy native library not loaded
12/11/30 16:57:18 INFO mapred.FileInputFormat: Total input paths to process : 6
12/11/30 16:57:18 INFO mapred.JobClient: Running job: job_local_0001
12/11/30 16:57:18 INFO util.ProcessTree: setsid exited with exit code 0
12/11/30 16:57:18 INFO mapred.Task:  Using ResourceCalculatorPlugin : org.apache.hadoop.util.LinuxResourceCalculatorPlugin@7d4ecfa4
12/11/30 16:57:18 INFO mapred.MapTask: numReduceTasks: 1
12/11/30 16:57:18 INFO mapred.MapTask: io.sort.mb = 100
12/11/30 16:57:18 WARN mapred.LocalJobRunner: job_local_0001
java.lang.OutOfMemoryError: Java heap space
    at org.apache.hadoop.mapred.MapTask$MapOutputBuffer.<init>(MapTask.java:949)
    at org.apache.hadoop.mapred.MapTask.runOldMapper(MapTask.java:428)
    at org.apache.hadoop.mapred.MapTask.run(MapTask.java:372)
    at org.apache.hadoop.mapred.LocalJobRunner$Job.run(LocalJobRunner.java:212)
12/11/30 16:57:19 INFO mapred.JobClient:  map 0% reduce 0%
12/11/30 16:57:19 INFO mapred.JobClient: Job complete: job_local_0001
12/11/30 16:57:19 INFO mapred.JobClient: Counters: 0
12/11/30 16:57:19 INFO mapred.JobClient: Job Failed: NA
java.io.IOException: Job failed!
    at org.apache.hadoop.mapred.JobClient.runJob(JobClient.java:1265)
    at org.apache.hadoop.examples.Grep.run(Grep.java:69)
    at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:65)
    at org.apache.hadoop.examples.Grep.main(Grep.java:93)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.apache.hadoop.util.ProgramDriver$ProgramDescription.invoke(ProgramDriver.java:68)
    at org.apache.hadoop.util.ProgramDriver.driver(ProgramDriver.java:139)
    at org.apache.hadoop.examples.ExampleDriver.main(ExampleDriver.java:64)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.apache.hadoop.util.RunJar.main(RunJar.java:156) 
```

我正在运行 Ubuntu 12.04 和 Java 版本：

```
java version "1.7.0"
Java(TM) SE Runtime Environment (build 1.7.0-b147)
Java HotSpot(TM) 64-Bit Server VM (build 21.0-b17, mixed mode) 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T22:44:25.210

警告告诉您未（正确）为 Hadoop 安装压缩编解码器。要安装`Snappy`压缩，请查看：[http ://code.google.com/p/hadoop-snappy/](http://code.google.com/p/hadoop-snappy/)

然而，一个更严重的问题是`OutOfMemoryError`你得到的。检查您的输入，如有必要，增加堆大小。您可能还会查看这个相关问题：
[Hadoop 中的内存不足错误](https://stackoverflow.com/questions/8464048/out-of-memory-error-in-hadoop)

# html - Ipad 上的网站问题 - CSS

> ID：13648716
> 
> 赞同：0
> 
> 时间：2012-11-30T16:03:27.220
> 
> 标签：html, css

我目前正在开发一个在线商店。

我的客户希望它在 iPad 上具有正确的外观。问题是当它以横向加载时，网站没有居中并在右侧显示一个“白条”。

我已经解决这个问题几天了，仍然没有找到任何解决这个问题的方法。我认为这只是一个 CSS 问题，但我似乎无法找到它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T16:05:03.647

使用此元标记：

```
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"> 
```

或者，考虑让您的网站响应以考虑实际的分隔宽度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T16:06:16.520

您是否考虑过使用媒体查询？您的网站对我测试的内容没有响应。媒体查询将允许您定义最大值在不同大小的屏幕上的外观。

[http://mediaqueri.es/](http://mediaqueri.es/)

[http://mobile.smashingmagazine.com/2010/07/19/how-to-use-css3-media-queries-to-create-a-mobile-version-of-your-website/](http://mobile.smashingmagazine.com/2010/07/19/how-to-use-css3-media-queries-to-create-a-mobile-version-of-your-website/)

例如对于 iPhone 4

```
@media only screen and (max-device-width: 480px) {

} 
```

# jquery - @font-face 让 IE 和 Firefox 崩溃

> ID：13648718
> 
> 赞同：1
> 
> 时间：2012-11-30T16:03:28.547
> 
> 标签：jquery, css, font-face

我`@font-face`在我的网站和 Typekit 上使用。我使用两者的原因是因为我使用`@font-face`图标和 Typekit 不提供这种性质的任何字体。我使用很棒的工具[IcoMoon App](http://icomoon.io/app/%22IcoMoon)创建了我的图标字体。

在花了几个小时筛选我的文件`stylesheets`和`js`文件后，我了解到，当`@font-face`我`stylesheet`在某些使用 Firefox 或 Internet Explorer（最新版本）的 Windows7 机器上出现时，浏览器会挂起一段时间，或者在某些情况下崩溃然后重新启动。发生这种情况后，网站工作正常。

有人对我如何防止这种情况发生有任何想法吗？

下面是我`@font-face`的样式表中的代码，[这](http://devsite87.clickdealer.co.uk)是我正在使用它的网站。

**先感谢您！！**

```
@font-face {
font-family: "icomoon";
src:url("/css/fonts/icomoon.eot");
src:url("/css/fonts/icomoon.eot?#iefix") format("embedded-opentype"),
    url("/css/fonts/icomoon.svg#icomoon") format("svg"),
    url("/css/fonts/icomoon.woff") format("woff"),
    url("/css/fonts/icomoon.ttf") format("truetype");
font-weight: normal;
font-style: normal;} 
```

注意：*如果有的话，我完全愿意接受 Jquery 的建议和修复！*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T22:30:47.870

如果 CSS 使您的浏览器崩溃，我会感到非常惊讶。您创建的图标字体可能已损坏。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-06T11:11:26.647

问题似乎直接与 IcoMoon 应用程序有关。在使用 IcoMoon 创建了我的图标字体后，我`ttf`使用 Font Squirrel 自己的生成器上传了文件，并且没有浏览器崩溃，页面加载速度快了 10 倍！

# android - ActionBarSherlock、ActionBar 和 Native 菜单，如何进行？

> ID：13648721
> 
> 赞同：1
> 
> 时间：2012-11-30T16:03:39.090
> 
> 标签：android

我正在编写一个 android 应用程序（sdk 8 到 15）并且我正在处理菜单。我读了很多关于它的东西来理解，但我被困在一点上：

显然从 sdk 10 开始，不支持**硬件菜单按钮**，现在我们必须使用**操作栏**。行。但在我的应用程序中，我想要这种菜单：

![底部菜单](../Images/404ed991456260b96aa8f2f4de967461.png)

或这个 ：

![另一个底部菜单](../Images/20ab97b708f0968de46475d7f438c4be.png)

...这不是硬件菜单按钮，但似乎是“本机操作栏”。我在网上只能找到**顶部的操作栏**，应用程序的标题和左侧的徽标......占据了很多位置。我对所有这些 sdk 版本迷失了方向，我只想集成一个像上面这样的简单菜单，我应该如何继续？

我的代码中有这个，但是：

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_fragments_slider, menu);
    return true;
} 
```

...但是android 4没有出现菜单，因为它应该在第一张或第二张图像中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T16:20:58.980

查看[Android API 文档中的菜单资源，](http://developer.android.com/guide/topics/resources/menu-resource.html)尤其是：

> android:showAsAction=["ifRoom" | “从不” | "带文本" | “总是” | “折叠动作视图”]

文档中的示例 XML 也是一个很好的资源，也可以用于准确地布置它：

```
<menu xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:id="@+id/item1"
          android:title="@string/item1"
          android:icon="@drawable/group_item1_icon"
          android:showAsAction="ifRoom|withText"/>
    <group android:id="@+id/group">
        <item android:id="@+id/group_item1"
              android:onClick="onGroupItemClick"
              android:title="@string/group_item1"
              android:icon="@drawable/group_item1_icon" />
        <item android:id="@+id/group_item2"
              android:onClick="onGroupItemClick"
              android:title="@string/group_item2"
              android:icon="@drawable/group_item2_icon" />
    </group>
    <item android:id="@+id/submenu"
          android:title="@string/submenu_title"
          android:showAsAction="ifRoom|withText" >
        <menu>
            <item android:id="@+id/submenu_item1"
                  android:title="@string/submenu_item1" />
        </menu>
    </item> </menu> 
```

然后，您需要添加到您的清单：

```
android:uiOptions="splitActionBarWhenNarrow" 
```

这会将您的按钮向下移动到底部，将标题留在操作栏中，如果您有更多的东西可以容纳在屏幕中，您会得到三个小点 | 在下部操作栏的右侧。但这仅在纵向模式下才真正有效，除非您有很多菜单项...或更长的文本字符串（我认为...）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T16:11:08.783

ActionBarSherlock 将您的菜单内容放在所有受支持平台版本的 ActionBar 中。将其添加为库项目并确保导入 Sherlock 菜单并扩展 SherlockActivity。

# c# - 将标题中包含非 ASCII 字母的文件上传到 Google Drive

> ID：13648723
> 
> 赞同：1
> 
> 时间：2012-11-30T16:04:00.103
> 
> 标签：c#, google-drive-api

如果文件标题中包含非 ASCII 符号，我如何将文件上传到 Google Drive？

目前我正在使用这种方法开始上传到 Google Drive。但是，如果我传递的文件名包含非 ASCII 字母，则它无法在 JSON 响应中返回 ParseError。

```
 public string startUploadSession(string mimeType, long fileLength, string filename)
    {
        string uri = "https://www.googleapis.com/upload/drive/v2/files?uploadType=resumable" + "&access_token=" + account.accessInfo.access_token;
        var request = (HttpWebRequest)WebRequest.Create(uri);
        request.Method = "POST";

        request.ContentType = "application/json; charset=utf-8";

        request.Headers.Add("X-Upload-Content-Type", mimeType);
        request.Headers.Add("X-Upload-Content-Length", fileLength.ToString());

        // Here we're providing file metadata
        File file = new File();
        file.title = filename;

        string requestBody = toJsonString(file);

        request.ContentLength = requestBody.Length;

        System.IO.Stream requestStream = request.GetRequestStream();

        requestStream.Write(requestBody.ToByteArray(), 0, requestBody.Length);

        requestStream.Close();

        try
        {
            var response = request.GetResponse();
            var reader = new System.IO.StreamReader(response.GetResponseStream());
            var responseBody = reader.ReadToEnd();

            return response.Headers["Location"];
        }
        catch (WebException ex)
        {
            System.IO.StreamReader reader = new System.IO.StreamReader(ex.Response.GetResponseStream());
            string error = reader.ReadToEnd();
            Logger.Error(error, "Getting upload uri");
            return null;
        }
    } 
```

好的。这是我的错误。修复部分代码：

```
System.IO.Stream requestStream = request.GetRequestStream();
byte[] utf8Bytes = requestBody.ToByteArray();

requestStream.Write(utf8Bytes, 0, utf8Bytes.Count());
requestStream.Close(); 
```

# c# - 用自定义列覆盖 LLBLGen Save()

> ID：13648725
> 
> 赞同：1
> 
> 时间：2012-11-30T16:04:09.137
> 
> 标签：c#, reflection, polymorphism, llblgenpro

在我们的计划中，LLBLGEN 中有大约 50 多个实体。它们都有 2 列，称为*ModifyDatetime*和*ModifyUserID*。它们也是 SQL 数据库中每个表的最后 2 列。

我们想修改 .Save() 的 LLBLGEN 函数，*以便在程序员执行 .Save()**时*有一个会话变量和要在所有实体上发送的当前时间

 *我得到它是为了保存会话用户 ID 和日期时间，但在某些情况下会出错，我认为这与在渲染或编译时更改的列的位置有关。

我从 ___Entity.cs 之一（在本例中为 CityEntity.cs）复制了 2 个*公共虚拟*函数，它甚至在保存另一种实体类型（ServicesEntity.cs）时也有效。所以，有一段时间，我认为 CityFieldIndex.* 只是一个随机整数。两个类都有不同数量的列。或者也许我不完全理解这个*公共虚拟*以及如何覆盖它。

我还尝试发送 Rows.Count - 1 和 Rows.Count - 2 而不是 CityFieldIndex.*

在 set ModifyUserId 上也出现一个奇怪的错误：值 33 的类型为“System.Int32”，而该字段的类型为“System.Nullable`1[System.DateTime]”（33 是用户 ID）

**CommonEntityBase.cs**上的自定义代码是：

```
public override bool Save(IPredicate updateRestriction, bool recurse)
{
      System.Diagnostics.Debug.WriteLine("i'm overriding SAVE yeii");
      ModifyDatetime = DateTime.Now;
      ModifyUserId = 33;

      return base.Save(updateRestriction, recurse);
}

public virtual Nullable<System.DateTime> ModifyDatetime
{
    get { return (Nullable<System.DateTime>)GetValue((int)CityFieldIndex.ModifyDatetime, false); }
    set { SetValue((int)CityFieldIndex.ModifyDatetime, value, true); }
}    

public virtual Nullable<System.Int32> ModifyUserId
{
    get { return (Nullable<System.Int32>)GetValue((int)CityFieldIndex.ModifyUserId, false); }
    set { SetValue((int)CityFieldIndex.ModifyUserId, value, true); }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T21:02:23.703

我解决了。
现在，每当其他人使用 Save() 时，它都会从会话中保存用户。如果没有用户集，它只是放置 UserId = 0。

当然，我们关闭了我们的应用程序来验证登录会话，只有系统服务使用 0 保存:)

```
 public override bool Save(IPredicate updateRestriction, bool recurse)
    {
        ModifyDatetime = DateTime.Now;
        int userID = 0;

        // Verifies the UserId that called the Save(). Uses 0 (as system user) when none is found.
        try
        {
            if (HttpContext.Current.Session["UserID"] != null)
            { userID = Convert.ToInt32(HttpContext.Current.Session["UserID"]); }

        }
        catch (NullReferenceException nullE)
        {
            userID = 0;
        }
        ModifyUserObjectId = userID;

        return base.Save(updateRestriction, recurse);
    }

    /// <summary> The ModifyDatetime property of all Entities<br/><br/></summary>
    /// <remarks>All tables must have the field: *table*."modifyDatetime"<br/>
    public virtual Nullable<System.DateTime> ModifyDatetime
    {
    //    get { return (Nullable<System.DateTime>)GetValue((int)base.Fields["ModifyDatetime"].FieldIndex, false); }  // uncomment for GET
        set { SetValue((int)base.Fields["ModifyDatetime"].FieldIndex, value, true); }
    }

    /// <summary> The ModifyUserObjectId property of all Entities<br/><br/></summary>
    /// <remarks>All tables must have the field: *table*."modifyUser_objectID"<br/>
    public virtual Nullable<System.Int32> ModifyUserObjectId
    {
    //    get { return (Nullable<System.Int32>)GetValue((int)base.Fields["ModifyUserObjectId"].FieldIndex, false); }  // uncomment for GET
        set { SetValue((int)base.Fields["ModifyUserObjectId"].FieldIndex, value, true); }
    } 
```

仍然不知道它是否适用于集合。但它应该是相同的代码。*

# javascript - 如何在没有 GTM+... 的情况下在 JavaScript 中显示 toLocaleString()？

> ID：13648727
> 
> 赞同：-1
> 
> 时间：2012-11-30T16:04:09.933
> 
> 标签：javascript

当我使用这个时：

```
var d=new Date();
var n=d.toLocaleString(); 
```

我得到如下结果：

```
Fri Nov 30 2012 17:02:03 GMT+0100 (Mitteleuropäische Zeit) 
```

问题：我只想拥有某事。喜欢：

```
Fri Nov 30 2012 17:02:03 
```

如何用 javascript 做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T16:15:24.813

有一个不错的 JavaScript 库，称为[DateJS](http://www.datejs.com/)，它允许自定义格式和日期操作，并且可以免费使用。我强烈推荐它用于此类目的。它甚至有语言包以您选择的语言显示日期。

# python - 外向英国邮政编码的 Python 正则表达式

> ID：13648729
> 
> 赞同：2
> 
> 时间：2012-11-30T16:04:20.450
> 
> 标签：python, regex, postal-code

我已经查看并尝试了有关此主题的先前问题的解决方案（[此处](https://stackoverflow.com/questions/164979/uk-postcode-regex-comprehensive)和[此处](https://stackoverflow.com/questions/378157/python-regular-expression-postcode-search)），但无法使其正常工作。

我正在寻找[英国邮政编码](http://www.postcodeaddressfile.co.uk/products/postcodes/postcodes_explained.htm)外部的正则表达式。在“PO1 1AF”中，PO1为去往邮编或邮编区，1AF为去往邮编。我有一长串网址，其中一些网址末尾有一个外部邮政编码。

例如，我想要这两个字符串中的“ab15”和“dd9”：

```
string1= "www.xyz.com/abcdab15/"
string2 = "www.xyz.com/adbdd9" 
```

外部邮政编码的排列[是](http://en.wikipedia.org/wiki/Postal_code)：

```
A9
A9A
A99
AA9
AA9A
AA99 
```

[我从上一个答案](https://stackoverflow.com/a/10600422/578582)中尝试了这个解决方案，它旨在匹配内部、外部或两者，但它不返回任何内容（答案是大写字母）：

```
exp = '^((([A-PR-UWYZ][0-9])|([A-PR-UWYZ][0-9][0-9])|([A-PR-UWYZ][A-HK-Y][0-9])|([A-PR-UWYZ][A-HK-Y][0-9][0-9])|([A-PR-UWYZ][0-9][A-HJKSTUW])|([A-PR-UWYZ][A-HK-Y][0-9][ABEHMNPRVWXY]))) || ^((GIR)[ ]?(0AA))$|^(([A-PR-UWYZ][0-9])[ ]?([0-9][ABD-HJLNPQ-UW-Z]{0,2}))$|^(([A-PR-UWYZ][0-9][0-9])[ ]?([0-9][ABD-HJLNPQ-UW-Z]{0,2}))$|^(([A-PR-UWYZ][A-HK-Y0-9][0-9])[ ]?([0-9][ABD-HJLNPQ-UW-Z]{0,2}))$|^(([A-PR-UWYZ][A-HK-Y0-9][0-9][0-9])[ ]?([0-9][ABD-HJLNPQ-UW-Z]{0,2}))$|^(([A-PR-UWYZ][0-9][A-HJKS-UW0-9])[ ]?([0-9][ABD-HJLNPQ-UW-Z]{0,2}))$|^(([A-PR-UWYZ][A-HK-Y0-9][0-9][ABEHMNPRVWXY0-9])[ ]?([0-9][ABD-HJLNPQ-UW-Z]{0,2}))$'

import re

url1= "www.xyz.com/abcdAB15/"
url2 = "www.xyz.com/adbDD9"

postalCode = re.findall(exp,url1)
print postalCode[0] 
```

这是没有所有 $ 和 ^ 锚的表达式，如下所示：

```
exp = '((([A-PR-UWYZ][0-9])|([A-PR-UWYZ][0-9][0-9])|([A-PR-UWYZ][A-HK-Y][0-9])|([A-PR-UWYZ][A-HK-Y][0-9][0-9])|([A-PR-UWYZ][0-9][A-HJKSTUW])|([A-PR-UWYZ][A-HK-Y][0-9][ABEHMNPRVWXY]))) || ((GIR)[ ]?(0AA))|(([A-PR-UWYZ][0-9])[ ]?([0-9][ABD-HJLNPQ-UW-Z]{0,2}))|(([A-PR-UWYZ][0-9][0-9])[ ]?([0-9][ABD-HJLNPQ-UW-Z]{0,2}))|(([A-PR-UWYZ][A-HK-Y0-9][0-9])[ ]?([0-9][ABD-HJLNPQ-UW-Z]{0,2}))|(([A-PR-UWYZ][A-HK-Y0-9][0-9][0-9])[ ]?([0-9][ABD-HJLNPQ-UW-Z]{0,2}))|(([A-PR-UWYZ][0-9][A-HJKS-UW0-9])[ ]?([0-9][ABD-HJLNPQ-UW-Z]{0,2}))|(([A-PR-UWYZ][A-HK-Y0-9][0-9][ABEHMNPRVWXY0-9])[ ]?([0-9][ABD-HJLNPQ-UW-Z]{0,2}))' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T16:28:13.993

鉴于您列出的外部邮政编码的可能性，它可以描述为：

*   一两个字母
*   后跟一个数字
*   可选地后跟一个字母或数字

用正则表达式来说，是这样的：

```
[a-z]{1,2}[0-9][a-z0-9]? 
```

...但您只想在 URL 的末尾找到该模式（可能后跟一个斜杠），所以我们将添加一个前瞻：

```
[a-z]{1,2}[0-9][a-z0-9]?(?=/?$) 
```

您问题中的完整邮政编码正则表达式包含许多不同的排除项。例如，看起来 V、Q 和 X 在某些地方是不允许的，而且显然还有其他限制——我不会费心去尝试复制那些（阅读其他人的正则表达式从来都不是有趣的）......但是使用我们有什么：

```
>>> import re
>>> postcode = re.compile("[a-z]{1,2}[0-9][a-z0-9]?(?=/?$)")
>>> string1= "www.xyz.com/abcdab15/"
>>> string2 = "www.xyz.com/adbdd9"
>>> re.findall(postcode, string1)
['ab15']
>>> re.findall(postcode, string2)
['dd9'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T16:10:52.093

问题在于`^$`锚点，它们分别锚定字符串的开头和结尾，这意味着正则表达式只会匹配整个字符串。从每个交替中删除它们（`exp`split on `|`），它将起作用。

# javascript - 警告在 Javascript 中出现一次

> ID：13648731
> 
> 赞同：0
> 
> 时间：2012-11-30T16:04:29.857
> 
> 标签：javascript, alert

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<script language = "JavaScript">
function calculate()
{
if (document.eMarkForm.option.value=="1" )
{
    window.alert("Thanks for using E-Marks");
}
}
</script>
</head>
<body>
<form name="eMarkForm">
<select name="option">
<option value="1">First Time User</option>
<option value="2">Frequent Flier</option>
<option value="3">Buying a Degree</option>
</select>
<input type="button" value="Go for It" onclick="calculate();aloop()"/>
</form>
</body>
</html> 
```

我有一个用户可以填写的表格，对于其中一个部分，他们可以选择其中一个选项。但是，我希望在第一次使用表单提交“首次用户”时仅弹出一次警报。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T16:07:20.937

添加检查条件..

```
var check = false;

function calculate() {
    if (!check) {
        if (document.eMarkForm.option.value == "1") {
            window.alert("Thanks for using E-Marks");
        }
    }
    check = true;
}​ 
```

# java - 什么 JAXB bean 对应于这个 JSON？

> ID：13648734
> 
> 赞同：1
> 
> 时间：2012-11-30T16:04:39.217
> 
> 标签：java, jquery, json, jakarta-ee, jersey

JSON是：

```
{"list": [1,2,3,4,5,6,7,8,9,10]} 
```

以下是我实现 JAXB bean 的方法：

```
package com.anon.sortweb.jaxb;

import javax.xml.bind.annotation.XmlRootElement;
import javax.xml.bind.annotation.XmlElement;

@XmlRootElement
public class JsonBean {
    @XmlElement(name="list")
    private int[] list;

    public JsonBean() {}

    public void setList(int[] list) {
        this.list = list;
    }

    public int[] getList() {
        return list;
    }
} 
```

我的 Web 应用程序运行良好（我能够成功访问其他资源），但是这个资源（我将 JSON 传递给）返回了 415 Media Type Unsupported 异常。

```
@POST
@Consumes(MediaType.APPLICATION_JSON)
@Produces("text/html")
public String sortAndReturnHtml(JsonBean listBean) { ... } 
```

如何正确编写我的 JAXB bean 来封装整数列表？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T20:48:38.037

**注意：** 我是[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)负责人，也是[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)专家组的成员。

您的 JAXB bean 是您的 JSON 数据的完全合理的表示。[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)规范不涵盖 JSON 绑定，因此答案最终归结为您的 JAX-RS 实现如何/是否解释 JAXB 元数据以生成/使用 JSON。

**演示**

下面是它如何与 MOXy 一起工作。

```
package forum13648734;

import java.util.*;
import javax.xml.bind.*;
import javax.xml.transform.stream.StreamSource;
import org.eclipse.persistence.jaxb.JAXBContextProperties;

public class Demo {

    public static void main(String[] args) throws Exception {
        Map<String, Object> properties = new HashMap<String, Object>(2);
        properties.put(JAXBContextProperties.MEDIA_TYPE, "application/json");
        properties.put(JAXBContextProperties.JSON_INCLUDE_ROOT, false);
        JAXBContext jc = JAXBContext.newInstance(new Class[] {JsonBean.class}, properties);

        Unmarshaller unmarshaller = jc.createUnmarshaller();
        StreamSource json = new StreamSource("src/forum13648734/input.json");
        JsonBean jsonBean = unmarshaller.unmarshal(json, JsonBean.class).getValue();

        Marshaller marshaller = jc.createMarshaller();
        marshaller.marshal(jsonBean, System.out);
    }

} 
```

**输入.json/输出**

```
{"list":[1,2,3,4,5,6,7,8,9,10]} 
```

**了解更多信息**

*   [http://blog.bdoughan.com/2011/08/json-binding-with-eclipselink-moxy.html](http://blog.bdoughan.com/2011/08/json-binding-with-eclipselink-moxy.html)
*   [http://blog.bdoughan.com/2012/05/moxy-as-your-jax-rs-json-provider.html](http://blog.bdoughan.com/2012/05/moxy-as-your-jax-rs-json-provider.html)

# c# - Windows Store 应用程序中的 TopAppBar 按钮 AutomationProperties 样式

> ID：13648735
> 
> 赞同：4
> 
> 时间：2012-11-30T16:04:51.367
> 
> 标签：c#, xaml, windows-8, visual-studio-2012, windows-store-apps

`AutomationProperties.Name`是否可以用不同的颜色设置值的样式？我从我的应用程序中的深色主题中获得了基本的文本颜色。我有一个自定义背景颜色，这就是为什么我需要一个特定的`ForegroundColor`和`TextColor`这个属性（`Value="OtherUserAppBarButton"`）

```
<Style x:Key="LogoutAppBarButtonStyle" TargetType="ButtonBase" 
              BasedOn="{StaticResource AppBarButtonStyle}">
    <Setter Property="AutomationProperties.AutomationId" Value="OtherUserAppBarButton"/>
    <Setter Property="AutomationProperties.Name" Value="Other User"/>
    <Setter Property="Content" Value="&#xE1A6;"/>
    <Setter Property="Foreground" Value="#ffffffff" />
</Style> 
```

有人有想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T06:07:03.573

为此，您需要修改`AppBarButtonStyle`您的按钮样式所基于的样式。你可以`Common\StandardStyles.xaml`在你的项目中找到它。`App.xaml`如果您还需要未修改的样式，您可以直接修改此文件中的样式，也可以在其中创建一个副本。

您需要更改样式中的以下块`ControlTemplate`：

```
<TextBlock
    x:Name="TextLabel"
    Text="{TemplateBinding AutomationProperties.Name}"
    Foreground="{StaticResource AppBarItemForegroundThemeBrush}"
    Margin="0,0,2,0"
    FontSize="12"
    TextAlignment="Center"
    Width="88"
    MaxHeight="32"
    TextTrimming="WordEllipsis"
    Style="{StaticResource BasicTextStyle}"/> 
```

如您所见，该`Foreground`属性固定为`AppBarItemForegroundThemeBrush`. 您可以将其更改`{TemplateBinding Foreground}`为与您设置的颜色相匹配，`LogoutAppBarButtonStyle`也可以直接在模板中为其提供另一种自定义固定颜色。

也不要忘记其他视觉状态的样式（、`PointerOver`和`Pressed`）。它们也设置为主题颜色。您可以在模板中更改它们`Disabled``Checked``VisualStateManager`

# jquery - 数据绑定单选按钮未设置样式

> ID：13648739
> 
> 赞同：3
> 
> 时间：2012-11-30T16:05:04.600
> 
> 标签：jquery, css, jquery-mobile, knockout.js

我正在尝试将 KnockoutJS 与 jQuery mobile 一起使用，但遇到了数据绑定集中的单选按钮没有样式的问题。

这是一个[小提琴](http://jsfiddle.net/8ajSq/1/)

我有一个看起来像这样的简单模型：

```
var vm = {
    options: ["option1","option2","option3"]            
}

$(function() {
    ko.applyBindings(vm);
}); 
```

我尝试像这样绑定它：

```
<div data-role="fieldcontain">
    <fieldset data-role="controlgroup" data-bind="foreach: options">
        <input type="radio" name="selectModel" data-bind="attr: { id: $data}, value: $data" />
        <label data-bind="attr: {for: $data}, text: $data"></label>
    </fieldset>
</div> 
```

通过检查 DOM，我可以看到 KnockoutJS 已正确地将我的集合转换为（大致）这个（为了清楚起见删除了数据绑定）：

```
<fieldset data-role="controlgroup">
    <input id="option1" type="radio" name="selectStaticModel" value="option1">
    <label for="option1">option1</label>

    <input id="option2" type="radio" name="selectStaticModel" value="option2">
    <label for="option2">option2</label>

    <input id="option3" type="radio" name="selectStaticModel" value="option3">
    <label for="option3">option3</label>
</fieldset> 
```

如果我将其静态放入我的 HTML 中，它会被 jQuery Mobile 正确设置样式。

知道这里可能会发生什么吗？在同一个项目的其他地方，我有一个显示在列表视图中的集合，并且样式很好。

到目前为止，我只在 FF 中测试过这个。

**更新**

搜索一下，我发现了一些[旧信息](http://forum.jquery.com/topic/refresh-a-form-element)，这些信息建议将其应用于`.checkboxradio()`元素以手动设置样式。我在[这里做了](http://jsfiddle.net/8ajSq/3/)

```
$(function() {
    ko.applyBindings(vm);

    $(".boundRadio").checkboxradio();
}); 
```

这对一些人有帮助，但它们不像静态定义的按钮那样分组。每个都有单独的圆角，而不是仅圆角第一个项目的顶角和最后一个项目的底角。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T17:50:45.880

好的。想我已经修好了。看[这里](http://jsfiddle.net/8ajSq/4/)

我在应用绑定后添加了这个：

```
$(function() {
    ko.applyBindings(vm);

    $(".boundRadio").checkboxradio();
    $("#boundFS").controlgroup();
}); 
```

`boundFS`我分配给父字段集的 id在哪里，并且`.boundRadio`是应用于我模板中所有单选按钮的类。

除非有人有更好、更清洁的方法来处理这个问题，否则我会结束这个问题。

# asp.net - 如何根据 ASP.NET 中请求的域设置或不设置 cookieless 会话？

> ID：13648741
> 
> 赞同：1
> 
> 时间：2012-11-30T16:05:09.930
> 
> 标签：asp.net, asp.net-mvc-3, iframe, session-state, cookieless

我有一个 MVC 3 应用程序，它为两个不同域上的请求提供服务。对 firstdomain.com 的请求来自 iframe，对 seconddomain.com 的请求来自普通浏览器窗口。我需要在 iframe 中使用无 cookie 会话，但希望在普通浏览器中保留基于 cookie 的会话。

通常会话类型在 web.config 中通过设置以下内容来确定：

```
<system.web>
   ...
   <sessionState cookieless="UseUri"/>
   ...
</system.web> 
```

但这适用于每个请求，无论域如何。可以在服务器上拥有该站点的两个副本，每个域一个，并且每个具有不同的 sessionState cookieless 设置值，但出于多种原因，我想避免这种情况。有没有办法在运行 Web 应用程序的单个实例时根据请求的域来切换此功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T16:13:19.583

您可以将两者拆分为单独的项目，每个项目都有自己的 web.config。这是一种比运行两个单独的实例更好的想法。

只是出于好奇，为什么是饼干？缓存或会话可能会更好。

# php - SSL 连接错误

> ID：13648742
> 
> 赞同：0
> 
> 时间：2012-11-30T16:05:10.653
> 
> 标签：php, facebook, jquery

“无法与服务器建立安全连接。这可能是服务器的问题，或者可能需要您没有的客户端身份验证证书。错误 107 (net::ERR_SSL_PROTOCOL_ERROR): SSL 协议错误。”

我正在创建 Fb 应用程序但出现此错误。

[https://apps.facebook.com/finalyear/](https://apps.facebook.com/finalyear/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T16:23:24.397

`Error 107: ERR_SSL_PROTOCOL_ERROR`表示您的服务器或您的域没有启用 SSL。如果您不知道如何启用 SSL，那么我建议您联系您的服务器公司并要求他们为您启用它，因为复杂性因每个服务器接口、位置而异。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T16:34:02.603

此时，所有 Facebook Tab 和 Canvas 应用程序都需要 SSL。

您已输入[https://ikirsha.com/fyp/reg/](https://ikirsha.com/fyp/reg/)作为您的 URL，但该 URL 不起作用，因为您的服务器没有打开 SSL。您需要为其获取 SSL 证书并让您的主机安装它。

# objective-c - 在弹出窗口中编辑 UITableViewController 中的按钮

> ID：13648745
> 
> 赞同：0
> 
> 时间：2012-11-30T16:05:35.173
> 
> 标签：objective-c, ios, ipad, uitableview

我在`UITableViewController`弹出框内显示一个。一切正常。现在我想要右上角的那个小“编辑”按钮来重新排列单元格。但不幸的是，我无法做到这一点。我已经实现了 2 个用于重新排序的委托方法，并且在我的 tableviewcontroller 中，我在 viewdidloead 上调用了它

```
[self setEditing:YES];
self.navigationItem.rightBarButtonItem = self.editButtonItem; 
```

但由于某种原因，我看不到顶部应该显示编辑按钮的导航栏。我究竟做错了什么？提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T16:43:23.433

您可以`UITableViewController`以与现在相同的方式创建您的，将其嵌入到`UINavigationController`using 中`– initWithRootViewController:`并在弹出窗口中显示导航控制器

# spring-security - 使用 Spring Security 3 进行 LDAP 身份验证

> ID：13648748
> 
> 赞同：3
> 
> 时间：2012-11-30T16:05:46.517
> 
> 标签：spring-security, ldap

我正在尝试通过对我组织的 LDAP 服务器进行身份验证来保护我的 Spring 3 MVC Web 应用程序的某些部分。我是 LDAP 新手，所以我边走边学。我一直在关注此处的文档和[此处](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/ldap.html)的示例[，](https://github.com/SpringSource/spring-security/blob/9b423a7726e999b6c80e8c4a769a99dd634f56ce/samples/ldap/src/main/webapp/WEB-INF/applicationContext-security.xml)但我似乎无法正确理解。

这是我的 security-context.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:s="http://www.springframework.org/schema/security"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/security http://www.springframework.org/schema/security/spring-security-3.1.xsd
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd">

    <!-- Security Configuration -->
    <s:http>
        <s:intercept-url pattern="/page/tosecure/*" access="ROLE_USER" />
        <s:http-basic />
    </s:http>

    <s:ldap-server root="dc=ldap,dc=sub,dc=myorg,dc=org" url="ldap.sub.myorg.org" port="636" />

    <s:authentication-manager>
        <s:ldap-authentication-provider user-dn-pattern="uid={0},cn=users" />
        <s:authentication-provider ref="ldapAuthProvider" />
    </s:authentication-manager>

    <bean id="contextSource" class="org.springframework.security.ldap.DefaultSpringSecurityContextSource">
        <constructor-arg value="ldaps://ldap.sub.myorg.org:636/dc=ldap,dc=sub,dc=myorg,dc=org" />
    </bean>

    <bean id="ldapAuthProvider" class="org.springframework.security.ldap.authentication.LdapAuthenticationProvider">
        <constructor-arg>
            <bean class="org.springframework.security.ldap.authentication.BindAuthenticator">
                <constructor-arg ref="contextSource" />
                <property name="userDnPatterns">
                    <list>
                        <value>uid={0},cn=users</value>
                    </list>
                </property>
            </bean>
        </constructor-arg>
        <constructor-arg>
            <bean class="org.springframework.security.ldap.userdetails.DefaultLdapAuthoritiesPopulator">
                <constructor-arg ref="contextSource" />
                <constructor-arg value="cn=groups" />
                <property name="groupRoleAttribute" value="cn" />
            </bean>
        </constructor-arg>
    </bean>

</beans> 
```

这是我得到的错误（堆栈跟踪中列出的最后几个原因）

```
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.security.securityContextSource': Instantiation of bean failed; nested exception is org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [org.springframework.security.ldap.DefaultSpringSecurityContextSource]: Constructor threw exception; nested exception is org.springframework.ldap.BadLdapGrammarException: Failed to parse DN; nested exception is org.springframework.ldap.core.TokenMgrError: Lexical error at line 1, column 5\.  Encountered: "." (46), after : ""
    at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:288)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1035)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:939)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:485)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:323)
    ... 106 more
Caused by: org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [org.springframework.security.ldap.DefaultSpringSecurityContextSource]: Constructor threw exception; nested exception is org.springframework.ldap.BadLdapGrammarException: Failed to parse DN; nested exception is org.springframework.ldap.core.TokenMgrError: Lexical error at line 1, column 5\.  Encountered: "." (46), after : ""
    at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:162)
    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:121)
    at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:280)
    ... 115 more
Caused by: org.springframework.ldap.BadLdapGrammarException: Failed to parse DN; nested exception is org.springframework.ldap.core.TokenMgrError: Lexical error at line 1, column 5\.  Encountered: "." (46), after : ""
    at org.springframework.ldap.core.DistinguishedName.parse(DistinguishedName.java:224)
    at org.springframework.ldap.core.DistinguishedName.<init>(DistinguishedName.java:174)
    at org.springframework.ldap.core.support.AbstractContextSource.setBase(AbstractContextSource.java:207)
    at org.springframework.security.ldap.DefaultSpringSecurityContextSource.<init>(DefaultSpringSecurityContextSource.java:67)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
    at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:147)
    ... 117 more
Caused by: org.springframework.ldap.core.TokenMgrError: Lexical error at line 1, column 5\.  Encountered: "." (46), after : ""
    at org.springframework.ldap.core.DnParserImplTokenManager.getNextToken(DnParserImplTokenManager.java:678)
    at org.springframework.ldap.core.DnParserImpl.jj_consume_token(DnParserImpl.java:231)
    at org.springframework.ldap.core.DnParserImpl.SpacedEquals(DnParserImpl.java:114)
    at org.springframework.ldap.core.DnParserImpl.attributeTypeAndValue(DnParserImpl.java:94)
    at org.springframework.ldap.core.DnParserImpl.rdn(DnParserImpl.java:58)
    at org.springframework.ldap.core.DnParserImpl.dn(DnParserImpl.java:23)
    at org.springframework.ldap.core.DistinguishedName.parse(DistinguishedName.java:218) 
```

似乎它不喜欢 contextSource bean 的构造函数参数中列出的 URL，尽管我不知道为什么。

另外，我怀疑此配置的其他部分不正确。例如，我在 ldap-server 标记和 contextSource bean 中定义了 ldap 服务器 URL。这似乎是不必要的重复，但在示例中就是这样做的。有人可以好好看看配置以确保它是健全的吗？

另外，如果有必要，我会稍微谈谈我们的 LDAP 服务器布局，因为它似乎有点不标准。用户的 DN 由 uid={the_user_name},cn=users,dc=ldap,dc=sub,dc=myorg,dc=org 构成。组 DN 是 cn={group_name},cn=groups,dc=ldap,dc=sub,dc=myorg,dc=org，组的成员由 memberUid 属性定义。我说这是非标准的，因为根据我的阅读，组应该由 ou 定义。但希望 spring security 可以处理这个设置。此配置是否正确获取用户所属的角色（组）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T16:45:05.643

您是否尝试过删除`ldap-server`元素？您不应该需要它，并且您没有使用正确的 URL 配置它（它可能应该以`ldap://`or开头`ldaps://`）。

您链接到的示例使用嵌入式服务器，并说明了同一事物的名称空间和 bean 配置。

group 属性默认为`cn`，因此对于您的设置应该是正确的。Javadoc for[`DefaultLdapAuthoritiesPopulator`](http://static.springsource.org/spring-security/site/docs/3.1.x/apidocs/org/springframework/security/ldap/userdetails/DefaultLdapAuthoritiesPopulator.html)很好地描述了它的工作原理。

# mysql - 比较两个 MySQL 表并将最大行合并到一个新表

> ID：13648750
> 
> 赞同：0
> 
> 时间：2012-11-30T16:05:56.267
> 
> 标签：mysql, sql

我有两个使用以下简单结构的表：

```
-----------
id | count|
----------- 
```

一张男桌，一张女桌。我想比较两个表的行并选择计数最高的行。例如：

如果一行的计数为 500，而另一行的计数为 200，则应选择第一行，并将其与其余行的结果一起添加到新表中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T16:27:02.433

这假设 table_a 和 table_b 具有相同的 id：

```
INSERT INTO new_table (id, count)
SELECT table_a.id, GREATEST(table_a.count, table_b.count)
FROM table_a
LEFT JOIN table_b
ON table_a.id = table_b.id 
```

# objective-c - 如何获取 NSSliderCell Objective-C 的标签

> ID：13648753
> 
> 赞同：0
> 
> 时间：2012-11-30T16:06:01.683
> 
> 标签：objective-c, tags, nsslider

我正在研究 CustomSlider 类。在我的项目中，我有三个滑块，它们都具有类 CustomSlider。我希望这三个滑块有不同的旋钮。见图片。

由于滑块已经有标签，我决定为此目的使用它们。不幸的是，我看不到如何获取 NSSliderCell 的标签值。

我试过这个：

```
int myTag = [self tag]; 
```

还有这个：

```
NSButton *button = [super self];
int myTag = [button tag]; 
```

两者都没有成功，有什么想法吗？有没有另一种方法让类知道哪个对象正在发送消息？

## 问候，罗纳德

![在此处输入图像描述](../Images/e6c32ae06e3df9c3aa136de904a4abc9.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T17:34:55.930

标签是一个`long`. NSSliderCells 从 NSActionCell 继承它们的标签，因此有一个与使用 NSSliderCell 的 NSSlider 分开的标签，它从 NSControl 继承其标签。在自定义 NSSliderCell 类`[self tag]`中，返回 XIB 中的 sliderCell 的标签集。

这是自定义滑块单元格类的标题：

```
#import <AppKit/AppKit.h>
@interface EWSliderCell : NSSliderCell
@end 
```

这是整个班级本身：

```
#import "EWSliderCell.h"
@implementation EWSliderCell
-(NSRect)rectOfTickMarkAtIndex:(NSInteger)index {
    static BOOL reportedTag;
    if (!reportedTag) {
        long myTag = [self tag];
        NSLog(@"myTag=%ld", myTag);
        reportedTag = TRUE;
    }
    return CGRectMake(0.0, 0.0, 0.0, 0.0); // remove the tick marks from the slider
}
@end 
```

这确实执行并报告了正确的标签。

我无法复制您报告的错误消息。但是，如果我（错误地）写`myTag = [EWSliderCell tag];`了，那么我会看到消息“没有已知的选择器'标签'的类方法。`tag`不是类方法，它是一个实例方法。（这是正确的词吗？）你能发布产生的代码吗？错误信息？

# .net - 委托在其他线程中返回值的函数

> ID：13648754
> 
> 赞同：0
> 
> 时间：2012-11-30T16:06:09.110
> 
> 标签：.net, vb.net, delegates

我确定这是一个简单的问题。我从串口读取了一些数据，在某个解析点，我需要更新一些状态标签。令人惊讶的是，状态标签是线程安全的......我不知道......

好的，但是状态标签需要包含一些似乎不是线程安全的组合文本

statLabel1.Text = "已连接到 " & cmbPort.text & "，找到并且开心"

所以我试图从任何component.text创建一个“读取安全”的功能，但我失败了......

```
Private Delegate Function ControlGetTextDelegate(ByRef cmp As Control) As String
Public Function ControlGetText(ByRef cmp As Control) As String

    Dim s As String = ""

    ' control invoked from another thread ?
    If cmp.InvokeRequired Then ' YES, so call through delegate

        Dim dlg As New ControlGetTextDelegate(AddressOf ControlGetText)
        cmp.BeginInvoke(dlg, {cmp})

    Else ' NO, so call normally
        s = cmp.Text
    End If

    Return s

End Function 
```

有人可以提供一点帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T16:14:22.793

我认为您的问题是您没有为 when 分配任何`s`东西`InvokeRequired = True`。

您可以将结果分配给`s`（您需要使用它`Invoke`而不是`BeginInvoke`），但最好调用您从中调用它的事件处理程序。您没有发布该代码，但它基本上是相同的想法 -`InvokeRequired`在表单上测试它，然后调用`BeginInvoke`事件处理程序本身。

# php - 将日期插入 MySql 数据库时遇到问题

> ID：13648756
> 
> 赞同：2
> 
> 时间：2012-11-30T16:06:12.963
> 
> 标签：php, mysql

我查看了几个与此问题有关的线程，但仍然无法弄清楚我的代码出了什么问题。

我从我的表单中带来了一个格式为“mm-dd-yyyy”的日期字段，当我将它带到我的代码中以将出生日期字段更新为“yyyy-dd-mm”时，我使用以下内容

```
$birth=$_POST['dateBorn'];
$dateB = date('Y-d-m',strtotime($birth));
$finaldateB = ($dateB === false) ? '0000-00-00' : date('Y-d-m',strtotime($dateB)); 
```

当我回显变量的值（使用 11-23-2012 的出生日期）时，我看到它们的以下值出生 = 11-23-2012，dateB = 1969-31-12，finaldateB = 1969-31- 12

我显然在做一些不正确的事情并且无法找到

TIA

为了让事情发挥作用，我至少发现了一种可能并不优雅但给我现在需要的结果的解决方法

```
 $dateB = $birth;
 $dateborn_a=explode("-",$birth);
 $yearborn = $dateborn_a[2];
 $dayborn = $dateborn_a[1];
 $monthborn = $dateborn_a[0];
 $dateOfBirth=$yearborn."-".$monthborn."-".$dayborn; 
```

然后使用 $dateOfBirth 中的值更新表。它适用于我迄今为止测试过的所有记录。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T16:08:45.540

```
$dateB = date('Y-d-m',strtotime($birth)); 
```

这里

```
y is for year 
d is for day
m is for month 
```

所以甲酸将是 `yyyy-dd-mm`

尝试

```
$dateB = date('Y-m-d',strtotime($birth)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T16:08:31.813

您使用的是 Ydm 而不是 Ymd。MySQL 的日期格式应该是 YEAR-MONTH-DAY。使用

```
$dateB = date('Y-m-d',strtotime($birth)); 
```

应该修复它。

# javascript - 使用索引删除类

> ID：13648759
> 
> 赞同：2
> 
> 时间：2012-11-30T16:06:20.467
> 
> 标签：javascript, jquery

这可能很容易，但我无法让它工作。我正在使用 .each() 遍历列表。我想知道是否可以使用索引删除一个类。

例如。例如，如果列表中有 10 个项目，并且我想在单击第 8 个元素时从第 5 个元素中删除该类。

```
$(function () {
var items = $('#v-nav>ul>li').each(function (index) {
    $(this).click(function () {
        if (index = 8)
{
$(#5).removeClass('class');
}
    });
}); 
```

有任何想法的人吗？谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-30T16:07:17.957

改变

```
$(#5).removeClass('class'); 
```

到

```
$('#v-nav>ul>li:eq(4)').removeClass('class'); 
```

最好将选择器返回的元素分配给再次执行相同的处理以获得所需的元素。

```
$(function () {
    var items = $('#v-nav>ul>li')

       $('#v-nav>ul>li').click(function () {
          if ($(this).index() = 8)
          {
             $(items).eq(4).removeClass('class');
          }
       });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T16:08:39.333

没有必要迭代 with `each()`，因为每个元素都已经有一个索引，并且 using`eq()`可以让你根据它们在 DOM 中的索引来选择元素。该解决方案取决于兄弟姐妹（）等元素。

```
$(function () {
    var elems = $('#v-nav>ul>li');

    elems.on('click', function() {
        if ($(this).index()==8) elems.eq(4).removeClass('class');
    });
}); 
```

您也可以将点击绑定到该元素：

```
$(function () {
    $('#v-nav>ul>li:eq(7)').on('click', function() {
         $(this).siblings().filter(':eq(4)').removeClass('class');
    });
}); 
```

否则我会这样做：

```
$(function () {
    var elems = $('#v-nav>ul>li');
    $.each(elems, function(idx, elm) {
        if (idx==8) elems.eq(4).removeClass('class');
    });
}); 
```

作为旁注，仅由数字（或以数字开头）组成的 ID 是无效的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T16:30:55.180

实际上，您不需要遍历所有`li`元素，而是可以这样做

```
$(function(){
  $('#v-nav>ul>li').eq(7).on('click', function(){ // eq(7) is 8th li
    $(this).closest('ul').find('li').eq(4).removeClass('cls'); //eq(4) is 5th li
  });
}); 
```

[**演示**](http://jsfiddle.net/gWWu6/)。

# java - 在tomcat中部署一个jar

> ID：13648760
> 
> 赞同：4
> 
> 时间：2012-11-30T16:06:25.780
> 
> 标签：java, tomcat

可以在 tomcat 中部署一个简单的 jar 并运行它？？？

一个简单的例子，只是执行 main 并打印一个 hello world ：P

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T16:10:25.000

不，这不对。您必须创建一个包含 jar 和 servlet 的 Web 应用程序（至少）。

看看这个[http://docs.oracle.com/javaee/6/tutorial/doc/bnafd.html](http://docs.oracle.com/javaee/6/tutorial/doc/bnafd.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-30T16:09:28.007

不。

Tomcat 是一个 Web 应用程序容器，您需要部署一个 Web 应用程序。

# powershell - 如何将 Export-CSV 链接到 Send-MailMessage 而无需在 PowerShell 中将 CSV 保存到磁盘？

> ID：13648761
> 
> 赞同：2
> 
> 时间：2012-11-30T16:06:27.910
> 
> 标签：powershell, powershell-3.0

我想以 CSV 格式通过电子邮件发送 AD 用户列表，但我不想在通过电子邮件发送之前将 CSV 保存到磁盘。

这是获取数据的代码：

```
get-aduser -filter * -properties Telephonenumber |
where Telephonenumber -ne $Null | 
select givenname, surname, telephonenumber | 
sort surname 
```

现在我想添加如下内容：

```
| Export-Csv | 
Send-MailMessage -From HelpDesk@company.com -to someone@company.com -subject "Outlook address book export" -SmtpServer EdgeTransport 
```

无论如何将CSV数据作为附件添加到内存中而不将文件保存到文件系统？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-11-10T18:43:59.550

我知道这是一个超级老线程，但上面的答案不再正确。您可以将内存中的对象作为附件发送，而无需先写入文件。您需要使用 .net 方法，但效果很好。

关键是 .net 方法 [System.Net.Mail.Attachment]::CreateAttachmentFromString

[http://geekswithblogs.net/mkoerner/archive/2012/01/19/powershell-emailing-strings-as-attachments.aspx](http://geekswithblogs.net/mkoerner/archive/2012/01/19/powershell-emailing-strings-as-attachments.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-12-02T17:43:56.990

上面建议/接受的答案是不正确的，并且不起作用。Send-MailMessage 的 -Body 参数需要一个字符串对象 (System.String)。示例中创建的 $mydata 对象是一个 System.array 对象。如果您按照上面所示使用它，该命令将失败。

您可以做的是创建一个文件，用 CSV 数据填充它，将其作为附件通过电子邮件发送，然后将其删除。

使用上面的代码，例如：

```
$attachment = New-Item filename.csv -ItemType file
get-aduser -filter * -properties Telephonenumber | where Telephonenumber -ne $Null | select givenname, surname, telephonenumber | sort surname | Export-Csv $attachment -NoTypeInformation
Send-MailMessage -Attachments $attachment -Body $SmtpBodyTrue -BodyAsHtml -From $SmtpSender -To $MailTo -Subject $SmtpSubject -SmtpServer $SmtpServer
Remove-Item $attachment
$attachment = $null 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-30T16:54:47.273

`-Attachments`for 参数需要一个路径数组，因此`Send-MailMessage`您必须将文件写入磁盘的某个位置。

要将 CSV 数据作为电子邮件正文发送，请`convertto-csv -notypeinformation`使用`export-csv`.

```
$myData = get-aduser -filter * -properties Telephonenumber | where Telephonenumber -ne $Null | select givenname, surname, telephonenumber | sort surname|convertto-csv -notypeinformation
Send-MailMessage -From HelpDesk@company.com -to someone@company.com -subject "Outlook address book export" -SmtpServer EdgeTransport -body $mydata 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-06-23T13:23:06.780

我知道这是一篇很老的帖子，但我想我会在处于类似职位后给出我的意见。

以下是我编写的用于从对象等创建 CSV 附件的基本函数。

让它工作的主要问题之一是首先`convertto-csv`输出引号中的所有内容（我知道这已经修复了 PS6 +，但在使用 PS5 时没有用。其次，当将 CSV 数据转换为字符串并将其转换为内存流时正在转义回车/换行，为了解决这个问题，我将其附加`[System.Environment]::NewLine`到 CSV 中的每一行。

```
Function ConvertTo-CSVEmailAttachment {
Param(
    [Parameter(Mandatory=$true)]
    [String]$FileName,
    [Parameter(Mandatory=$true)]
    [Object]$PSObject,
    $Delimiter
    )
    If ($Delimiter -eq $null){$Delimiter = ","}
    $MS = [System.IO.MemoryStream]::new()
    $SW = [System.IO.StreamWriter]::new($MS)
    $SW.Write([String]($PSObject | convertto-csv -NoTypeInformation -Delimiter $Delimiter | % {($_).replace('"','') + [System.Environment]::NewLine}))
    $SW.Flush()
    $MS.Seek(0,"Begin") | Out-Null
    $CT = [System.Net.Mime.ContentType]::new()
    $CT.MediaType = "text/csv"
    Return [System.Net.Mail.Attachment]::new($MS,$FileName,$CT)
} 
```

要使用它，您需要准备好您的对象，因为它们没有考虑到管道功能（正如我所说的基本功能）。

例子：

```
 $ADList = get-aduser -filter * -properties Telephonenumber | where Telephonenumber -ne $Null | select givenname, surname, telephonenumber |sort surname
 $EmailAttachment = ConvertTo-CSVEmailAttachment -FileName "ADList.CSV" -PSObject $ADList 
```

`Send-MailMessage`在需要文件路径的字符串才能起作用的意义上，其中一个答案是正确的。

但是，您可以使用 .net 库`[Net.Mail.MailMessage]`来创建电子邮件，而不是使用`Send-MailMessage`：

```
$SMTPserver = "This.Will.Be.Your.Email.Server.Endpoint"
$from = "SomeEmailAddress@yourdomain.com"
$to = "Recipient@domain.com"
$subject = "This is the subject Line"
$emailbody = "This is the body of the email"

$mailer = new-object Net.Mail.SMTPclient($SMTPserver)
$msg = new-object Net.Mail.MailMessage($from, $to, $subject, $emailbody)
$msg.Attachments.Add($EmailAttachment) #### This uses the attachment made using the function above. 
$msg.IsBodyHTML = $false
$mailer.send($msg) 
```

无论如何，我希望这对将来处于类似情况的人有所帮助。

# objective-c - iOS：在c代码中获取文件的路径

> ID：13648763
> 
> 赞同：0
> 
> 时间：2012-11-30T16:06:38.097
> 
> 标签：objective-c, ios, c, file, file-io

我有一个 iOS 项目，我在其中使用了一些 C 源。在 C 部分中，我需要主包中文件的路径。我如何在不使用 Obj-C 的情况下获得它？

基本上我希望通过以下方式返回路径：

```
NSLog(@"%s",[[[NSBundle mainBundle] pathForResource:@"myfile" ofType:@"txt"] fileSystemRepresentation]); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T16:18:28.900

所以只需像上面那样获取路径，然后获取 C 字符串版本：

```
NSString *path = [[[NSBundle mainBundle] pathForResource:@"myfile" ofType:@"txt"] fileSystemRepresentation];
char *cPath = [path cStringUsingEncoding:UTF8StringEncoding]; 
```

只要注意文档中的警告并复制字符串，如果您打算将其挂在您所在的方法/函数的末尾之外：

> 保证返回的 C 字符串仅在接收器被释放或当前自动释放池被清空之前有效，以先发生者为准。您应该复制 C 字符串或使用 getCString:maxLength:encoding: 如果它需要存储超过此时间的 C 字符串。

**更新：**如果由于某种原因你不能使用 Foundation，你可以使用 Core Foundation 做类似的事情。您可以调用`CFBundleCopyResourceURL()`（或其表亲之一）来获取资源的 URL，然后使用`CFURLCopyPath()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T16:16:40.833

最好使用objective-c 读取路径，并通过调用函数将其作为char * 传递给c 类。
您还可以分配一个全局变量 char *，它对 Objective-c 和 C 都是可见的。

# jsf-2 - 带有 weblogic 12c 的 jsf 2.0 的 Build.xml

> ID：13648764
> 
> 赞同：-2
> 
> 时间：2012-11-30T16:06:41.507
> 
> 标签：jsf-2

我是 jsf 和 jsp 的新手。我知道 weblogic 12 c 带有 jsf 2.0，但是当我尝试部署我的应用程序时，我得到了一个堆栈错误。我想这是由于我的 build.xml 无法从 weblogic 服务器获取我的 jars 和 wars，下面是build.xml 的代码，请尽快帮助我，将不胜感激。

```
<property name="weblogic.home" value="/bea/wlserver_12.1/"/>
    <path id="WebLogic System Libraries.libraryclasspath">
        <pathelement location="../../../../bea/wlserver_12.1/server/lib/api.jar"/>
        <pathelement location="../../../../bea/wlserver_12.1/server/lib/wls-api.jar"/>
     <pathelement location="../../../../bea/wlserver_12.1/common/deployable-libraries/jsf-2.0.war"/>
  <pathelement location="../../../../bea/wlserver_12.1/common/deployable-libraries/jstl-1.2.war"/>

     </path>
   <path id="Security_Search.classpath">
        <pathelement location="build/classes"/>
        <path refid="WebLogic System Libraries.libraryclasspath"/>
       </path>

    <target name="init"> 
        <mkdir dir="build/classes"/> 
        <mkdir dir="dist" /> 
    </target>

    <path id="compile.classpath"> 
     <fileset dir="${weblogic.home}/common/deployable-libraries">
          <include name="*.war"/>
        </fileset>
        <pathelement location="../../../../bea/wlserver_12.1/common/deployable-libraries/jsf-2.0.war"/>

    </path>

    <target name="compile" depends="init" > 
        <javac destdir="build/classes" debug="true" srcdir="src"> 
            <classpath refid="compile.classpath"/> 
        </javac> 
    </target>

    <target name="war" depends="compile"> 
        <war destfile="dist/security_Search_JSF.war" webxml="WebContent/WEB-INF/web.xml"> 
            <fileset dir="WebContent">
                <exclude name="*.jar"/>
                    </fileset> 

            <classes dir="build/classes"/> 
        </war> 
    </target>

    <target name="clean">
        <delete dir="dist" />
        <delete dir="build/classes"/>
    </target>

     <target name="build"/>

</project> 
```

TTP:101064][WebAppModule(security_Search_JSF:security_Search_JSF.war)] 在 Web 应用程序“C:\bea_deploy\security_Search_JSF.war”weblogic.application.ModuleException 中解析描述符时出错：发现验证问题问题：cvc-complex-type.2.3：具有纯元素内容类型的元素“weblogic-web-app@http://xmlns.oracle.com/weblogic/weblogic-web-app”不能有文本内容。：在 weblogic.servlet.internal.WebAppModule.loadDescriptor(WebAppModule .java:1494) 在 weblogic.servlet.internal.WebAppModule.init(WebAppModule.java:253) 在 weblogic.servlet.internal.WebAppModule.init(WebAppModule.java:636) 在 weblogic.application.internal.flow.ScopedModuleDriver。 init(ScopedModuleDriver.java:162) 在 weblogic.application.internal.ExtensibleModuleWrapper.init(ExtensibleModuleWrapper.java:74) 在 weblogic.application.internal.flow。ModuleListenerInvoker.init(ModuleListenerInvoker.java:84) 在 weblogic.application.internal.flow.InitModulesFlow.initModule(InitModulesFlow.java:312) 在 weblogic.application.internal.flow.InitModulesFlow.initModules(InitModulesFlow.java:325) 在 weblogic .application.internal.flow.InitModulesFlow.prepare(InitModulesFlow.java:378) 在 weblogic.application.internal.BaseDeployment$1.next(BaseDeployment.java:706) 在 weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java: 35) 在 weblogic.application.internal.BaseDeployment.prepare(BaseDeployment.java:237) 在 weblogic.application.internal.SingleModuleDeployment.prepare(SingleModuleDeployment.java:48) 在 weblogic.application.internal.DeploymentStateChecker.prepare(DeploymentStateChecker.java :158) 在 weblogic.deploy.internal.targetserver.AppContainerInvoker.prepare(AppContainerInvoker.java:60) 在 weblogic.deploy.internal.targetserver.operations.ActivateOperation.createAndPrepareContainer(ActivateOperation.java:207) 在 weblogic.deploy.internal.targetserver.operations.ActivateOperation.doPrepare(ActivateOperation.java:96) 在 weblogic.deploy .internal.targetserver.operations.AbstractOperation.prepare(AbstractOperation.java:229) 在 weblogic.deploy.internal.targetserver.DeploymentManager.handleDeploymentPrepare(DeploymentManager.java:747) 在 weblogic.deploy.internal.targetserver.DeploymentManager.prepareDeploymentList(DeploymentManager .java:1216) 在 weblogic.deploy.internal.targetserver.DeploymentManager.handlePrepare(DeploymentManager.java:250) 在 weblogic.deploy.internal.targetserver.DeploymentServiceDispatcher.prepare(DeploymentServiceDispatcher.java:159) 在 weblogic.deploy.service。内部.targetserver。DeploymentReceiverCallbackDeliverer.doPrepareCallback(DeploymentReceiverCallbackDeliverer.java:171) 在 weblogic.deploy.service.internal.targetserver.DeploymentReceiverCallbackDeliverer.access$000(DeploymentReceiverCallbackDeliverer.java:13) 在 weblogic.deploy.service.internal.targetserver.DeploymentReceiverCallbackDeliverer$1.run(DeploymentReceiverCallbackDeliverer. java:46) 在 weblogic.work.SelfTuningWorkManagerImpl$WorkAdapterImpl.run(SelfTuningWorkManagerImpl.java:545) 现在我收到此错误.. 请帮助,,,, 它在 weblogic 中的错误.. 请在 weblogic.work.SelfTuningWorkManagerImpl$WorkAdapterImpl.run(SelfTuningWorkManagerImpl.java:545) 上运行（DeploymentReceiverCallbackDeliverer.java:46）现在我收到此错误..请帮助,,, 它在 weblogic 中的错误.. 请在 weblogic.work.SelfTuningWorkManagerImpl$WorkAdapterImpl.run(SelfTuningWorkManagerImpl.java:545) 上运行（DeploymentReceiverCallbackDeliverer.java:46）现在我收到此错误..请帮助,,, 它在 weblogic 中的错误.. 请

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T11:27:23.013

关于原始错误，它指出您的**weblogic.xml**文件格式无效。

下面是一个有效的 weblogic.xml 示例，它引用了您要使用的 JSF 2.0 共享库：

```
<?xml version="1.0" encoding="UTF-8"?>
<wls:weblogic-web-app xmlns:wls="http://xmlns.oracle.com/weblogic/weblogic-web-app" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd http://xmlns.oracle.com/weblogic/weblogic-web-app http://xmlns.oracle.com/weblogic/weblogic-web-app/1.4/weblogic-web-app.xsd">
<wls:weblogic-version>12.1.1</wls:weblogic-version>
<wls:context-root>store</wls:context-root>
<wls:library-ref>
    <wls:library-name>jsf</wls:library-name>
    <wls:specification-version>2.0</wls:specification-version>
    <wls:exact-match>true</wls:exact-match>
</wls:library-ref> 
```

如果您已经解决了这个错误，请提供下一个错误的详细信息 - 它是在部署期间发生的吗？你能打印整个堆栈跟踪吗？

干杯，法比奥

# sql - 对 nvarchar(max) 对数据库大小的影响感到困惑

> ID：13648766
> 
> 赞同：1
> 
> 时间：2012-11-30T16:06:50.127
> 
> 标签：sql, sql-server-2008, bulkinsert

我正在批量插入 6 个制表符分隔的 txt 文件，每个大约 1gb 未压缩。（有些是 400 万行）

我预计这对于 MS-SQL BULK-INSERT 没有问题，但显然有 4GB / 10GB mdf 文件大小限制，具体取决于许可证（快递 4 / 支付 10），我在批量插入期间越过了该限制

该数据库使用了很多**nvarchar(max)**列。这是否解释了为什么我要超过文件大小限制？这是我的插入示例

```
BULK INSERT DUMP1TableName FROM 'c:\usr1\myserver.be\www\myproject\somefolder\data\DUMP_1.txt' WITH  ( FIELDTERMINATOR = '\t', ROWTERMINATOR = '\n',CODEPAGE ='1252',FIRSTROW =2,ROWS_PER_BATCH =10000) 
```

有什么办法可以在 4GB 的 sql 数据库中放入 6GB 的未压缩文本？unicode 在这里是必须的。

# jquery - 阻止fancyBox刷新整个包装

> ID：13648768
> 
> 赞同：0
> 
> 时间：2012-11-30T16:06:54.727
> 
> 标签：jquery, fancybox

基本上我正在尝试创建一种产品图片库灯箱的东西。

现在，fancyBox 是我最接近的东西，适合您在亚马逊和 buy.com 等网站上看到的灯箱（即[http://www.buy.com/prod/norton-360-premier-1-user-3-pcs /240575091.html](http://www.buy.com/prod/norton-360-premier-1-user-3-pcs/240575091.html)）所以我想我会试一试。

现在你知道我大致想做什么了。

所以我开始为 fancyBox 编辑 thumbs helper，当我得到 thumbs div 追加`fancybox-outer`而不是时，我认为我已经接近了，`body`但是 fancyBox 似乎想要刷新它包含的整个包装器，这意味着 thumbs 窗格当然会消失我只剩下图像了。

是否有一些我可以用来阻止fancyBox刷新它的整个自我并且只刷新它的内部包装器的选项，以便我可以将拇指行附加到对话框的内部？

我浏览了：http: [//fancyapps.com/fancybox/#useful](http://fancyapps.com/fancybox/#useful)，但无法立即看到任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T09:40:33.050

我一直在用 fancyBox 进行调整，但它无法做到我想要的，所以最后我放弃了。

相反，我决定花几天时间来构建自己的：[https ://github.com/Sammaye/prodigal](https://github.com/Sammaye/prodigal)

它非常简单，专注于制作亚马逊类型的产品库，但它确实有效，我已经在以下设备上进行了测试：

*   火狐（最新）
*   IE（7 及以上）
*   Safari 5.1 及更高版本
*   Opera 12 及以上
*   和铬（最新）

它适用于所有能够处理图像和视频的人。

随意使用它，滥用它，然后将它塑造成你想要的样子。

# .htaccess - 重写规则循环。如何停止应用规则

> ID：13648773
> 
> 赞同：0
> 
> 时间：2012-11-30T16:07:12.000
> 
> 标签：.htaccess, mod-rewrite, url-rewriting, rewrite

我有一个 .htaccess 文件，将 /blog/2012/11/30/this-post 之类的博客文章 URL 重定向到 /blog/post.php?id=this-post。工作正常，直到我在它下面应用第二条规则，它也是匹配的。此规则设置为采用路径格式的 url，如 /this/is/a/pageid 并重定向到 /page.php?id=pageid。它不关心路径有多长，它只是使用路径中的最后一个目录作为 id。不幸的是，这条规则匹配所有内容，我不确定如何在第一次匹配后停止重定向。这是我的 .htacess

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

RewriteRule ^blog/([0-9]+)/([0-9]+)/([0-9]+)/([A-Za-z0-9-]+)$ /blog/post.php?id=$4 [L]
RewriteRule ([^/]+)/?$ /page.php?id=$1 [L] 
```

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T16:17:58.993

您可以在第一次重定向后添加一个可选的查询参数，并将其与查询字符串上的简单重写条件相结合，以检查该参数是否存在，试试这个：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^blog/([0-9]+)/([0-9]+)/([0-9]+)/([A-Za-z0-9-]+)$ /blog/post.php?id=$4 [L]

RewriteCond %{QUERY_STRING} !^(.*&)?r=0(&.*)?$
RewriteRule ([^/]+)/?$ /page.php?id=$1&r=0 [L] 
```

# python - 从 numpy datetime64 获取年、月或日

> ID：13648774
> 
> 赞同：72
> 
> 时间：2012-11-30T16:07:16.543
> 
> 标签：python, datetime, numpy

我有一个 datetime64 类型的数组：

```
dates = np.datetime64(['2010-10-17', '2011-05-13', "2012-01-15"]) 
```

有没有比遍历每个元素以获得 np.array 年更好的方法：

```
years = f(dates)
#output:
array([2010, 2011, 2012], dtype=int8) #or dtype = string 
```

我正在使用稳定的 numpy 版本 1.6.2。

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2014-11-12T19:58:59.670

[我发现以下技巧与此答案](https://stackoverflow.com/a/13652262)中描述的熊猫方法（即`pd.DatetimeIndex(dates).year`等）相比，速度提高了 2 倍和 4 倍。我发现的速度和`[dt.year for dt in dates.astype(object)]`pandas方法差不多。这些技巧也可以直接应用于任何形状（2D、3D 等）的 ndarray

```
dates = np.arange(np.datetime64('2000-01-01'), np.datetime64('2010-01-01'))
years = dates.astype('datetime64[Y]').astype(int) + 1970
months = dates.astype('datetime64[M]').astype(int) % 12 + 1
days = dates - dates.astype('datetime64[M]') + 1 
```

* * *

## 回答 #2

> 赞同：50
> 
> 时间：2012-11-30T19:59:02.333

由于 numpy 中的 datetime 不稳定，我会为此使用 pandas：

```
In [52]: import pandas as pd

In [53]: dates = pd.DatetimeIndex(['2010-10-17', '2011-05-13', "2012-01-15"])

In [54]: dates.year
Out[54]: array([2010, 2011, 2012], dtype=int32) 
```

Pandas 在内部使用 numpy 日期时间，但似乎避免了 numpy 到目前为止的短缺。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2016-02-09T00:21:42.553

应该有一种更简单的方法来执行此操作，但是，根据您要执行的操作，最好的方法可能是转换为常规[Python 日期时间对象](https://docs.python.org/2/library/datetime.html#datetime-objects)：

```
datetime64Obj = np.datetime64('2002-07-04T02:55:41-0700')
print datetime64Obj.astype(object).year
# 2002
print datetime64Obj.astype(object).day
# 4 
```

根据下面的评论，这似乎只适用于 Python 2.7.x 和 Python 3.6+

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2019-05-22T15:15:17.900

我就是这样做的。

```
import numpy as np

def dt2cal(dt):
    """
    Convert array of datetime64 to a calendar array of year, month, day, hour,
    minute, seconds, microsecond with these quantites indexed on the last axis.

    Parameters
    ----------
    dt : datetime64 array (...)
        numpy.ndarray of datetimes of arbitrary shape

    Returns
    -------
    cal : uint32 array (..., 7)
        calendar array with last axis representing year, month, day, hour,
        minute, second, microsecond
    """

    # allocate output 
    out = np.empty(dt.shape + (7,), dtype="u4")
    # decompose calendar floors
    Y, M, D, h, m, s = [dt.astype(f"M8[{x}]") for x in "YMDhms"]
    out[..., 0] = Y + 1970 # Gregorian Year
    out[..., 1] = (M - Y) + 1 # month
    out[..., 2] = (D - M) + 1 # dat
    out[..., 3] = (dt - D).astype("m8[h]") # hour
    out[..., 4] = (dt - h).astype("m8[m]") # minute
    out[..., 5] = (dt - m).astype("m8[s]") # second
    out[..., 6] = (dt - s).astype("m8[us]") # microsecond
    return out 
```

它在任意输入维度上进行矢量化，速度快，直观，适用于 numpy v1.15.4，不使用 pandas。

我*真的*希望 numpy 支持这个功能，在应用程序开发中一直需要它。当我不得不像这样滚动自己的东西时，我总是非常紧张，我总是觉得我错过了一个边缘案例。

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2017-03-30T15:00:41.780

使用 numpy 版本 1.10.4 和 pandas 版本 0.17.1，

```
dates = np.array(['2010-10-17', '2011-05-13', '2012-01-15'], dtype=np.datetime64)
pd.to_datetime(dates).year 
```

我得到你要找的东西：

```
array([2010, 2011, 2012], dtype=int32) 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2020-02-07T11:44:09.473

用于`dates.tolist()`转换为本机日期时间对象，然后只需访问`year`. 例子：

```
>>> dates = np.array(['2010-10-17', '2011-05-13', '2012-01-15'], dtype='datetime64')
>>> [x.year for x in dates.tolist()]
[2010, 2011, 2012] 
```

这基本上与[https://stackoverflow.com/a/35281829/2192272](https://stackoverflow.com/a/35281829/2192272)中公开的想法相同，但使用更简单的语法。

使用 python 3.6 / numpy 1.18 测试。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-07-14T13:38:22.353

另一种可能是：

```
np.datetime64(dates,'Y') - returns - numpy.datetime64('2010') 
```

或者

```
np.datetime64(dates,'Y').astype(int)+1970 - returns - 2010 
```

但仅适用于标量值，不会采用数组

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-11-30T16:47:30.840

如果您升级到 numpy 1.7（其中 datetime 仍被标记为实验性），则以下内容应该可以工作。

```
dates/np.timedelta64(1,'Y') 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-06-17T21:35:12.870

[Anon 的回答](https://stackoverflow.com/a/26895491/4284627)对我很有用，但我只需要修改声明`days`

从：

```
days = **dates** - dates.astype('datetime64[M]') + 1
```

到：

```
days = **dates.astype('datetime64[D]')** - dates.astype('datetime64[M]') + 1
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-11-30T23:07:41.913

不幸的是，目前还没有直接的方法可以做到这一点，但是有几种间接的方法：

```
[dt.year for dt in dates.astype(object)] 
```

或者

```
[datetime.datetime.strptime(repr(d), "%Y-%m-%d %H:%M:%S").year for d in dates] 
```

两者都受到[此处](http://mail.scipy.org/pipermail/numpy-discussion/2011-December/059383.html)示例的启发。

这两种方法都适用于 Numpy 1.6.1。您可能需要对第二个更加小心，因为 datetime64 的 repr() 可能在小数点后有小数部分。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-04-17T18:06:20.077

# 转换`np.datetime64`为浮动年

在此解决方案中，您可以逐步了解如何处理`np.datetime64`数据类型。

在以下 dt64 是类型`np.datetime64`（甚至是该类型的 numpy.ndarray ）：

*   `year = dt64.astype('M8[Y]')`仅包含年份。如果您想要一个浮点数组，请执行`1970 + year.astype(float)`.
*   您可以访问的日期（自 1 月 1 日起）`days = (dt64 - year).astype('timedelta64[D]')`
*   您还可以推断一年是否是闰年（比较`days_of_year`）

[另请参阅 numpy 教程](https://numpy.org/doc/stable/reference/arrays.datetime.html#datetime-units)

```
import numpy as np
import pandas as pd

def dt64_to_float(dt64):
    """Converts numpy.datetime64 to year as float.

    Rounded to days

    Parameters
    ----------
    dt64 : np.datetime64 or np.ndarray(dtype='datetime64[X]')
        date data

    Returns
    -------
    float or np.ndarray(dtype=float)
        Year in floating point representation
    """

    year = dt64.astype('M8[Y]')
    # print('year:', year)
    days = (dt64 - year).astype('timedelta64[D]')
    # print('days:', days)
    year_next = year + np.timedelta64(1, 'Y')
    # print('year_next:', year_next)
    days_of_year = (year_next.astype('M8[D]') - year.astype('M8[D]')
                    ).astype('timedelta64[D]')
    # print('days_of_year:', days_of_year)
    dt_float = 1970 + year.astype(float) + days / (days_of_year)
    # print('dt_float:', dt_float)
    return dt_float

if __name__ == "__main__":

    dt_str = '2011-11-11'
    dt64 = np.datetime64(dt_str)
    print(dt_str, 'as float:', dt64_to_float(dt64))
    print()

    dates = np.array([
        '1970-01-01', '2014-01-01', '2020-12-31', '2019-12-31', '2010-04-28'],
        dtype='datetime64[D]')
    float_dates = dt64_to_float(dates)

    print('dates:      ', dates)
    print('float_dates:', float_dates) 
```

**输出**

```
2011-11-11 as float: 2011.8602739726027

dates:       ['1970-01-01' '2014-01-01' '2020-12-31' '2019-12-31' '2010-04-28']
float_dates: [1970\.         2014\.         2020.99726776 2019.99726027 2010.32054795] 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-06-09T05:50:54.320

这显然已经很晚了，但我从其中一个答案中受益，所以在这里分享我的一点。

[Anon](https://stackoverflow.com/users/4245545/anon)的[回答](https://stackoverflow.com/a/26895491/10673135)非常正确——使用numpy 方法而不是先将它们转换为 pandas 日期时间序列然后获取日期，速度非常快。尽管 numpy 转换后结果的偏移和转换有点破旧，但可以编写一个更清洁的助手，如下所示：-

```
def from_numpy_datetime_extract(date: np.datetime64, extract_attribute: str = None):
    _YEAR_OFFSET = 1970
    _MONTH_OFFSET = 1
    _MONTH_FACTOR = 12
    _DAY_FACTOR = 24*60*60*1e9
    _DAY_OFFSET = 1

    if extract_attribute == 'year':
        return date.astype('datetime64[Y]').astype(int) + _YEAR_OFFSET
    elif extract_attribute == 'month':
        return date.astype('datetime64[M]').astype(int)%_MONTH_FACTOR + _MONTH_OFFSET
    elif extract_attribute == 'day':
        return ((date - date.astype('datetime64[M]'))/_DAY_FACTOR).astype(int) + _DAY_OFFSET
    else:
        raise ValueError("extract_attribute should be either of 'year', 'month' or 'day'") 
```

解决问题`dates = np.array(['2010-10-17', '2011-05-13', "2012-01-15"], dtype = 'datetime64')`：-

*   Numpy 方法（使用上面的助手）

```
%timeit -r10 -n1000 [from_numpy_datetime_extract(x, "year") for x in dates]
# 14.3 µs ± 4.03 µs per loop (mean ± std. dev. of 10 runs, 1000 loops each) 
```

*   熊猫方法

```
%timeit -r10 -n1000 pd.to_datetime(dates).year.tolist()
# 304 µs ± 32.2 µs per loop (mean ± std. dev. of 10 runs, 1000 loops each) 
```

# javascript - Internet Explorer javascript 值 NULL，或不是对象

> ID：13648779
> 
> 赞同：0
> 
> 时间：2012-11-30T16:07:24.650
> 
> 标签：javascript, json, internet-explorer-8

我看到了[这个](https://stackoverflow.com/questions/154059/what-is-the-best-way-to-check-for-an-empty-string-in-javascript)和[这个](https://stackoverflow.com/questions/7135321/javascript-error-on-internet-explorer-6-7-8-is-null-or-not-an-object)主题，但没有解决我的问题。

这是我的代码，在`Chrome`and中可以正常工作`Firefox`，但`Internet Explorer`不能正常工作（仅在 IE8 中测试）：

```
var myjson = {'dat':[
    {'myval':'100','price':'1300'},
    {'myval':'100','price':'950'},
    {'myval':'20','price':'100'},
    {'myval':'0','price':'1000'},
    {'myval':'100','price':'750'},
]};
var myotherval = 0;
for (var i = 0; i < myjson.dat.length; i++) {
    if ( (myjson.dat[i].myval == 0 || myjson.dat[i].myval == 0) && myotherval == 0 ) {
        // do something
    }
} 
```

Internet Explorer 说`is NULL, or not an object`。每个变量每次都有价值。他们好几次`0`。

有人有什么想法吗？我在哪里可以找到错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T16:09:54.620

确保

```
myjson.dat[i].myval 
```

是一个整数。使用[http://www.w3schools.com/jsref/jsref_parseint.asp](http://www.w3schools.com/jsref/jsref_parseint.asp)

```
parseInt(myjson.dat[i].myval) == 0 
```

# linux - 从当前终端在新终端中运行 shell 脚本

> ID：13648780
> 
> 赞同：30
> 
> 时间：2012-11-30T16:07:34.930
> 
> 标签：linux, shell, terminal

如何从 Windows 中的“start test.bat”之类的终端在 Linux 的新终端中运行 shell 脚本，它也应该在控制台模式下工作。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-11-30T16:12:18.967

这是一个简单的示例，可以帮助您入门：

要编写 shell 脚本，请在命令提示符下执行以下操作：

```
echo -e '#!/bin/sh\n echo "hello world"' > abc.sh 
```

这写道：

```
#!/bin/sh
echo "hello world" 
```

到一个名为`abc.sh`

接下来，您想通过以下方式将其设置为可执行：

```
chmod +x abc.sh 
```

现在，您可以通过以下方式运行它：

```
./abc.sh 
```

你应该看到：

```
hello world 
```

在您的终端上。

要在新终端中运行它，您可以执行以下操作：

```
gnome-terminal -x ./abc.sh 
```

或者，如果是`xterm`：

```
xterm -e ./abc.sh 
```

这是[不同终端仿真器的列表](http://en.wikipedia.org/wiki/List_of_terminal_emulators)。

或者，您只需在当前终端中运行它，而是通过以下方式将其作为背景：

```
./abc.sh & 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-11-04T21:02:12.490

我来到这里是想弄清楚如何让脚本生成一个终端并在其中自行运行，所以对于那些想要这样做的人，我想出了这个解决方案：

```
if [ ! -t 0 ]; then # script is executed outside the terminal?
  # execute the script inside a terminal window with same arguments
  x-terminal-emulator -e "$0" "$@"
  # and abort running the rest of it
  exit 0
fi 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-30T16:12:10.957

对于 gnome 试试这个。

将 ls 替换为您要运行的命令

```
gnome-terminal -x sh -c "ls|less" 
```

我希望这是你想要的

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-01-31T07:20:28.503

截至 2020 年 1 月，`-e`and`-x`选项`gnome-terminal`仍然可以正常运行，但会抛出以下警告：

对于`-e`：

> # 选项“-e”已弃用，可能会在更高版本的 gnome-terminal 中删除。
> 
> # 使用“--”终止选项并在其后放置要执行的命令行。

对于`-x`：

> # 选项“-x”已弃用，可能会在更高版本的 gnome-terminal 中删除。
> 
> # 使用“--”终止选项并在其后放置要执行的命令行。

根据上述信息，我确认您可以运行以下两个命令而不会收到任何警告消息：

```
gnome-terminal -- /bin/sh -c '<your command>' 
```

```
gnome-terminal -- ./<your script>.sh 
```

我希望这可以帮助目前遇到此问题的其他人:)

# php - MongoDB PHP findAndModify 多重性能

> ID：13648785
> 
> 赞同：0
> 
> 时间：2012-11-30T16:08:00.627
> 
> 标签：php, mongodb

我在一个名为的集合`Reports`中有一个要处理的文档。我做一个查询

```
$collectionReports->find(array('processed' => 0)) 
```

（50 到 2000 个项目之间的任何地方）。我按我的需要处理它们并将结果插入另一个集合，但我需要更新原始报告以将处理设置为当前系统时间。现在它看起来像：

```
$reports = $collectionReports->find(array('processed' => 0));
$toUpdate = array();
foreach ($reports as $report) {
    //Perform the operations on them now
    $toUpdate = $report['_id'];
}
foreach ($toUpdate as $reportID) {
    $criteria = array('_id' => new MongoId($reportID));
    $data = array('$set' => array('processed' => round(microtime(true)*1000)));
    $collectionReports->findAndModify($criteria, $data);
} 
```

我的问题是它的效率非常低。对于 2000 份报告，处理报告并将它们插入到集合中可能需要 700 毫秒，但对于同样的 2000 份报告，仅更新处理时间至少需要 1500 毫秒。有什么技巧可以加快速度吗？提前致谢。

编辑：处理时间不必精确，它可以是脚本运行的时间（+/- 10 秒左右），如果可以获取对象（$report）并更新时间直接这样，比只在第一个foreach之后搜索要好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T19:51:54.947

感谢 Sammaye，从 findAndModify() 更改为 update() 似乎工作得更好更快。

# ios - searchDisplayController 被释放，崩溃

> ID：13648788
> 
> 赞同：2
> 
> 时间：2012-11-30T16:08:18.663
> 
> 标签：ios, uisearchdisplaycontroller

在某一时刻，这工作得很好，显然，有些事情发生了变化。当我离开加载 searchDisplayController 的 viewController 时，我的应用程序正在向已释放的实例发送消息。堆栈就是为什么我相信它是 searchDisplayController： ![在此处输入图像描述](../Images/e3063ae9d8267a174b785a17c61f33bc.png)

查看我的代码，我不确定它在哪里被释放。我会很感激任何想法。谢谢。

**编辑：我应该补充一点，如果我注释掉我的 viewDidDisappear 方法，崩溃就会停止。**

```
-(void)viewDidDisappear:(BOOL)animated {
        // save the state of the search UI so that it can be restored if the view is re-created
    self.searchWasActive = [self.searchDisplayController isActive];
    self.savedSearchTerm = [self.searchDisplayController.searchBar text];
    self.savedScopeButtonIndex = [self.searchDisplayController.searchBar selectedScopeButtonIndex];
} 
```

以下是相关位：

```
@interface ShowAttributesViewController : UIViewController <UITableViewDataSource, UITableViewDelegate, UISearchDisplayDelegate, UISearchBarDelegate>
{   
    IBOutlet UITableView *attributesTableView;
    NSString        *savedSearchTerm;
    NSInteger   savedScopeButtonIndex;
    BOOL            searchWasActive;   
}   
@property (nonatomic, retain) UITableView *attributesTableView;
@property (nonatomic, retain) NSMutableArray *filteredattributesArray;
@property (nonatomic, copy) NSString *savedSearchTerm;
@property (nonatomic) NSInteger savedScopeButtonIndex;
@property (nonatomic) BOOL searchWasActive;

- (void)viewDidLoad
{
    [super viewDidLoad];

    self.filteredattributesArray = [NSMutableArray arrayWithCapacity:[[[SharedAppData sharedStore] attributesArray] count]];

    if (self.savedSearchTerm)
    {
        [self.searchDisplayController setActive:self.searchWasActive];
        [self.searchDisplayController.searchBar setSelectedScopeButtonIndex:self.savedScopeButtonIndex];
        [self.searchDisplayController.searchBar setText:savedSearchTerm];

        self.savedSearchTerm = nil;
    }
}

-(void)viewDidDisappear:(BOOL)animated {
    self.searchWasActive = [self.searchDisplayController isActive];
    self.savedSearchTerm = [self.searchDisplayController.searchBar text];
    self.savedScopeButtonIndex = [self.searchDisplayController.searchBar selectedScopeButtonIndex];
}

-(void)viewDidUnload {

    self.filteredattributesArray = nil;
}

- (BOOL)searchDisplayController:(UISearchDisplayController *)controller shouldReloadTableForSearchString:(NSString *)searchString {
    [self filterContentForSearchText:searchString];
    return YES;
}

- (void)searchDisplayController:(UISearchDisplayController *)controller willUnloadSearchResultsTableView:(UITableView *)tableView {

    [attributesTableView reloadData];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T19:43:12.427

经过大量挖掘，像其他人一样，我发现这篇文章解决了这个问题。

[UISearchDisplayController 自动释放崩溃](https://stackoverflow.com/questions/2758575/how-can-uisearchdisplaycontroller-autorelease-cause-crash-in-a-different-view-co)

# url - Drupal 7：在多语言站点上未选中“提供菜单链接”时，页面上的 URL 别名被忽略

> ID：13648789
> 
> 赞同：5
> 
> 时间：2012-11-30T16:08:20.117
> 
> 标签：url, drupal-7, alias, multilingual

我希望有人可以帮助我，因为这让我发疯。

我有一个多语言 DrupaL 7 站点，以英语为主要语言，法语为次要语言。我已经设置了 url 别名，并且在大多数情况下它可以正常工作。

当我不想将页面包含在菜单中时会出现问题，因此我未选中“提供菜单链接”框。即使为那些没有菜单链接的页面选中了“生成自动 URL 别名”框，该页面也会完全忽略我设置的任何 url 别名模式，并且 url 始终显示为“node/31”而不是“my-content” -页'。如果我通过页面上的 URL 路径设置对 URL 别名进行硬编码，它将采用这些，但这不是我想要的。我希望它采用我为其设置的 url 别名模式。我什至安装了“Pathauto 持久状态”模块并强制“生成自动 URL 别名”保持选中以防万一，但我的别名模式仍然被忽略。

如果页面没有提供菜单链接，则英语和法语页面都会执行此操作。

有没有人见过这种行为？有谁知道可能出了什么问题？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-05T12:11:35.960

如果您有一个非英文网站，请遵循以下问题：[https](https://drupal.org/node/1847444) ://drupal.org/node/1847444和补丁或解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T15:11:10.120

当您的 URL 别名模式中有令牌因任何原因不起作用时，就会发生这种情况。在您的情况下，听起来您有一个包含“菜单项”令牌的模式，因此当您保存没有菜单项的节点时，不会创建 URL 别名。

解决方案是包含一个菜单项，手动添加您的 URL 别名，或者将`[node:menu-link]`您的 URL 别名模式中的任何内容更改为其他内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-09T17:05:49.610

我想我有同样的问题，关键是“基本页面”内容类型需要在其“菜单设置”中提供适当语言的菜单（在管理/结构/然后“编辑”基本页面) .

希望这对你也有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-11T09:17:44.797

我遇到了同样的问题，我通过阅读 enzipher 写的评论解决了它，“我希望永远”：

> 当您的 URL 别名模式中有令牌因任何原因不起作用时，就会发生这种情况。

我正在使用自定义模式，并通过以下步骤解决了它：

1.  我去了模式页面，删除了自定义令牌并保存
2.  我去节点和编辑，然后保存节点和 url 别名已创建，如 domain/language/title_node
3.  我去了模式页面，插入相同的自定义令牌并保存
4.  我再次进入节点并对其进行了编辑，然后保存并创建了正确的节点 url 别名 domain/language/custom_token_content/title_node

# java - 将堆栈跟踪重定向到日志文件而不是控制台输出？

> ID：13648790
> 
> 赞同：1
> 
> 时间：2012-11-30T16:08:28.917
> 
> 标签：java, jakarta-ee

每当我在服务器控制台中收到未处理的异常或堆栈跟踪输出时，我宁愿将其保存到全局日志文件中。并且*不要*在服务器控制台中打印它。

如何防止或重定向这些错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T16:14:15.403

您可以更改通过方法`PrintStream`设置的实例。但是，这会将所有发送到日志文件的输出重定向。`System.err``System.setErr``System.err`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T16:12:31.973

虽然这在 java-ee 上不是 kosher，但总的来说，看看[`UncaughtExceptionHandler`](http://docs.oracle.com/javase/6/docs/api/java/lang/Thread.UncaughtExceptionHandler.html).

在早期，您必须管理一个线程组来拦截未捕获的异常，但现在您可以[设置默认处理程序](http://docs.oracle.com/javase/6/docs/api/java/lang/Thread.html#setDefaultUncaughtExceptionHandler%28java.lang.Thread.UncaughtExceptionHandler%29)。

# php - 编号 Sql 行 PHP

> ID：13648793
> 
> 赞同：0
> 
> 时间：2012-11-30T16:08:39.443
> 
> 标签：php, sql, odbc

这是我想要实现的目标：

```
Page1.html
Page2.php
Page3.php 
```

Page1 有 1 个选项来提交查询以使用 ODBC 从表中提取行。当您点击 Page1 上的提交按钮时，它会将您带到 Page2 并以标准表格格式向您显示结果。我需要它做的是对行进行编号并显示数字。目前在表格下方有一个文本字段供用户插入数字。当用户输入数字时，下方有一个提交按钮，用户可以单击该按钮。用户输入数字并点击提交后，第 3 页再次返回行，减去用户选择删除的已删除行。

我无法弄清楚如何在 page2 上实现编号过程以与 page3 上的删除过程相关。

page2 -- $query = "select * from table where columnA is NULL"

```
$sql_result = odbc_prepare($query);
$result = odbc_execute($sql_result);
//$string = odbc_result($sql_result,1);
$string = odbc_result_all($sql_result,"border=1");

echo '
<form action="page3.php" method="post">
<br><input type="text" name="newid" /><br><br>
<input type="submit" />
</form>'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T16:26:47.597

您应该执行以下操作：

```
$x=0;
while (odbc_fetch_row($result)){
    //do something
    echo $x;
    $x++;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T16:34:44.390

正如 naryk 所说，您可以循环并使用计数器，但是您所做的事情背后的逻辑似乎很奇怪……如果您没有提取 id，那么您如何确定要从数据库中删除正确的行? 如果我加载页面，你加载页面，我走了 10 分钟，而你删除了 15 行，然后我尝试删除它们？最常见的是，您只需拉出 id 并将其值用作复选框或单选按钮的值属性。

# html - 黑莓网页图片比例问题

> ID：13648804
> 
> 赞同：0
> 
> 时间：2012-11-30T16:09:08.863
> 
> 标签：html, css, mobile, blackberry, web

在以下网页上，所有图像的最大宽度都设置为 100%。这适用于除黑莓以外的所有设备。有没有人遇到过这个问题？

[http://www.applewoodindependent.co.uk/](http://www.applewoodindependent.co.uk/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T06:29:15.503

在黑莓中，因为我们没有 iOS 或 android 中的 webview ......我们有 browserfield2 api。

在 browserfield2 中，您可以使用浏览器字段配置中的 initiale scale 方法缩放网页。

```
config.setProperty(BrowserFieldConfig.INITIAL_SCALE, new Float(value)); 
```

通过在方法中传递正确的值来调整缩放。

# ember.js - DS.Model url 在 ember.js 中不起作用

> ID：13648807
> 
> 赞同：3
> 
> 时间：2012-11-30T16:09:13.230
> 
> 标签：ember.js, ember-data

我对 Ember 非常、非常、非常陌生 :-)

我有一个 DS.Model，我想在其中强制使用 .json 进行扩展，以便从 Rails 服务器检索数据。

来自服务器的 url 正在工作，我可以在浏览器的调试器中看到，该 url 不是 DS.model url 中指定的

```
var App = Ember.Application.create();

App.store = DS.Store.create({
 adapter:  DS.RESTAdapter.create({url: 'http://127.0.0.1:3000'}),
revision: 8
});

App.Expedient = DS.Model.extend({
  url: 'expedients/%@.json',
  procedencia: DS.attr('string'),
  interessat_nom: DS.attr('string'),
  data_signatura_provisional: DS.attr('date')
}); 
```

手动获取权宜之计：

```
var model2 = App.store.find(App.Expedient, 125000); 
```

输出控制台：

```
OPTIONS http://127.0.0.1:3000/expedients/125000 404 (Not Found) 
```

我想成为这样的网址：

```
http://127.0.0.1:3000/expedients/125000.json 
```

此外，我还尝试用另一个不同的名称真正更改 DS.Model url，如下所示：

```
App.Expedient.reopenClass({
 url: 'mockurl/%@.json'
}); 
```

但是浏览器的控制台和以前一样有'url'，我不知道为什么Ember-Data没有得到模型的url。

谢谢！

问候，

附言。从两个来源测试 Ajax 时，我知道 Access-Control-Allow-Origin CORS 问题

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T18:12:58.847

由于某种原因，github 现在无法正常工作，所以我无法查看 ember 的源代码，但我认为您可以执行以下操作：

```
var adapter = DS.RestAdapter.extend({
  buildURL: function(record, suffix) {
    var s = this._super(record, suffix);
    return s + ".json";
  })
}); 
```

您需要将其插入您的商店而不是默认的休息适配器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-01T21:38:54.830

我刚刚用我的 RESTAdapter 子类尝试了这个，它正在工作：

```
 App.WORESTAdapter = DS.RESTAdapter.extend({
    ...
    buildURL: function(record, suffix){
       return this._super(record, suffix) + ".json";
    }
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-30T17:43:49.617

由于您使用的是 rails 后端，是否更容易使您的 API 适应 Ember.data 期望的相同约定？所以在你的`expedientsController#show`行动中：

```
def show
  @expedient = Expedient.find(params[:id])
  render json: @expedient
end 
```

只要您的控制器返回 JSON 结构 Ember 期望它应该映射到您`DS.Model`看到：[this ember guide](http://emberjs.com/guides/models/the-rest-adapter/)。

# vbscript - 创建一个以登录用户为文件名的文本文件

> ID：13648808
> 
> 赞同：-2
> 
> 时间：2012-11-30T16:09:15.637
> 
> 标签：vbscript, login-script, createfile

我有这个脚本，它正在创建和更新一个名为 Machine.txt 的文本文件，并用具有这种格式的行列表（脚本运行时的用户名、时间和日期）填充它。

我在登录时运行它。

我想要做的是为每个登录的用户创建一个新的文本文件。

例如，如果用户名为 fred，我希望脚本创建 fred.txt。

有任何想法吗？

**使用的脚本如下所示，我已将文件位置和名称替换为“文件路径和名称”，希望您能提供任何帮助。**

```
Set WSHShell = WScript.CreateObject ("WScript.Shell")
Set WSHNetwork = WScript.CreateObject ("WScript.Network")
Set WSHSysEnv = WSHShell.Environment ("PROCESS")

On Error Resume Next 

' Check what OS is being used

Dim valOS

    valOS = WSHShell.RegRead ("HKLM\SOFTWARE\Microsoft\Windows     NT\CurrentVersion\ProductName")

Dim valPath, valLocation

Set WshShell = WScript.CreateObject("WScript.Shell")
Set objEnv = WshShell.Environment("Process")
valMachine = objEnv("COMPUTERNAME")
valDate = date
valTime = time

' This section of the script look for a hidden file on a users private share. This   file is used to store a list of 
' machines that a client has logged onto and the date and time that they logged on

Set oFSO = CreateObject ("Scripting.FileSystemObject")

If oFSO.FileExists ("filepath and name") Then ' If this file exists open the file for  appending

    Set oAppend = oFSO.OpenTextFile ("filepath and name",8) ' Open the text file for  appending
    oAppend.Writeline valMachine & "," & valDate & "," & valTime ' Write the machine name, date and time the the user logged onto the client
    oAppend.close ' Close the text file connection
    valPath = ""
    valDate = ""
    valTime = ""
Else
    Set oStream = oFSO.CreateTextFile ("filepath and name") ' Create the file
    Set objFile = oFSO.GetFile ("filepath and name") ' Attach to the file
    objFile.Attributes = 2 ' Change the file attribute to hidden
    oStream.Writeline valMachine & "," & valDate & "," & valTime ' Write the machine      name, date and time the the user logged onto the client
    oStream.close ' Close the text file connection
    valPath = "" ' Clear the valPath variable
valDate = "" ' Clear the valDate variable
valTime = "" ' Clear the valTime variable

End If 

wscript.quit 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T17:12:48.610

尝试这个：

```
Dim objNetwork
Dim userName

Set objNetwork = CreateObject("WScript.Network")
userName = objNetwork.UserName 
```

将 userName 分配为您的文件名，扩展名为 .txt

# java - HSSFSheet 删除所有空行

> ID：13648812
> 
> 赞同：-1
> 
> 时间：2012-11-30T16:09:43.813
> 
> 标签：java, apache, excel, apache-poi, poi-hssf

我有一个 excel 表，例如 3,4 和第 6 行是空的（以前我为这些行调用了 sheet.removeRow()）。我总共有 7 行

现在，有了这些空行的索引，我想删除它们（移动它们）。

当我调用函数 shiftRows(rowIndex+1, lastRowNum, -1) 我得到

```
 java.lang.IllegalArgumentException: Minumum row number is 0 
```

这是我的实现

```
 List<Integer> rowsToRemove = [2,3,5];
 for (Integer rowIndex : rowsToRemove) {
     removeRow(sheet, rowIndex);
 }
 int lastRowNum = sheet.getLastRowNum();
 for (Integer rowIndex : rowsToRemove) {
     shiftRow(sheet, rowIndex, lastRowNum);
 }

/**
* Remove a row by its index
* @param sheet a Excel sheet
* @param rowIndex a 0 based index of removing row
*/
public static void removeRow(HSSFSheet sheet, int rowIndex) {

   HSSFRow removingRow = sheet.getRow(rowIndex);
   if(removingRow!=null) {
       sheet.removeRow(removingRow);
   }
}

public static void shiftRow(HSSFSheet sheet, int rowIndex, int lastRowNum) {
   if (rowIndex >= 0 && rowIndex < lastRowNum) {
       sheet.shiftRows(rowIndex+1, lastRowNum, -1);
   }
} 
```

你能帮我删除那些空行吗？我需要一个从 excel 文件中删除所有空行的解决方案。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T10:17:10.323

仅当未合并列中的单元格时，此方案才有效。如果它们被合并，就会出现poi中的异常。

# python - 计算字符串中前导空格的pythonic方法是什么？

> ID：13648813
> 
> 赞同：64
> 
> 时间：2012-11-30T16:09:52.497
> 
> 标签：python

我知道我可以用这个来计算字符串中的前导空格：

```
>>> a = "   foo bar baz qua   \n"
>>> print "Leading spaces", len(a) - len(a.lstrip())
Leading spaces 3
>>> 
```

但是有没有更蟒蛇的方式？

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2012-11-30T16:21:13.227

你的方式是pythonic但不正确，它也会计算其他空白字符，只计算空格是显式的`a.lstrip(' ')`：

```
a = "   \r\t\n\tfoo bar baz qua   \n"
print "Leading spaces", len(a) - len(a.lstrip())
>>> Leading spaces 7
print "Leading spaces", len(a) - len(a.lstrip(' '))
>>> Leading spaces 3 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-11-30T16:16:29.567

你可以使用`itertools.takewhile`

```
sum( 1 for _ in itertools.takewhile(str.isspace,a) ) 
```

并证明它给出的结果与您的代码相同：

```
>>> import itertools
>>> a = "    leading spaces"
>>> print sum( 1 for _ in itertools.takewhile(str.isspace,a) )
4
>>> print "Leading spaces", len(a) - len(a.lstrip())
Leading spaces 4 
```

我不确定这段代码是否真的比你原来的解决方案*更好。*它的优点是它不会创建更多的临时字符串，但这非常小（除非字符串真的很大）。我没有发现任何一个版本都可以立即清楚地了解那行代码，所以如果您打算多次使用它（在任何一种情况下都带有适当的注释），我肯定会将它包装在一个命名良好的函数中。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-11-30T16:26:25.563

只是为了多样化，理论上你可以使用正则表达式。它有点短，而且看起来比对 . 的双重调用更好`len()`。

```
>>> import re
>>> a = "   foo bar baz qua   \n"
>>> re.search('\S', a).start() # index of the first non-whitespace char
3 
```

或者：

```
>>> re.search('[^ ]', a).start() # index of the first non-space char
3 
```

但我不推荐这个；根据我所做的快速测试，它的效率远低于`len(a)-len(lstrip(a))`.

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-11-30T16:26:22.100

使用`next`和`enumerate`：

```
next((i for i, c in enumerate(a) if c != ' '), len(a)) 
```

对于任何空格：

```
next((i for i, c in enumerate(a) if not c.isspace()), len(a)) 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-10-12T23:01:50.890

我最近有一项类似的计算缩进的任务，因此我想将制表符计为四个空格：

```
def indent(string: str):
    return sum(4 if char is '\t' else 1 for char in string[:-len(string.lstrip())]) 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-11-30T16:13:29.013

这看起来……对我来说很棒。通常我会回答“是 X Pythonic 吗？” 有一些功能魔法的问题，但我觉得这种方法不适合字符串操作。

*如果有一个只*返回前导空格的内置函数，并且采取`len()`那个，我会说去吧 - 但 AFAIK 没有，`re`而且其他解决方案绝对是矫枉过正。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-05-19T08:48:42.033

您可以使用正则表达式：

```
def count_leading_space(s): 
    match = re.search(r"^\s*", s) 
    return 0 if not match else match.end()

In [17]: count_leading_space("    asd fjk gl")                                  
Out[17]: 4

In [18]: count_leading_space(" asd fjk gl")                                     
Out[18]: 1

In [19]: count_leading_space("asd fjk gl")                                      
Out[19]: 0 
```

# python - 运行 vpython 时出现“分段错误”

> ID：13648817
> 
> 赞同：2
> 
> 时间：2012-11-30T16:09:55.127
> 
> 标签：python, segmentation-fault, vpython

我正在尝试运行[vpython 弹跳球演示代码](http://www.vpython.org/contents/bounce_example.html)。但是每次我运行这个脚本时，窗口都会以超快的速度弹出并再次关闭。然后我得到一个`Segmentation fault`（只有那个！没有其他信息）。有谁知道我怎样才能正确运行 Vpython？

**额外信息：**

从 Ubuntu 软件中心安装 vpython（名称包：python-visual）

操作系统：Ubuntu 11.10，64 位

显卡驱动：VESA：M92

Python版本：2.7.2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T22:02:57.123

这对我有用：

```
sudo rm /usr/lib/x86_64-linux-gnu/libGL.so
sudo ln -s /usr/lib/fglrx/libGL.so.1 /usr/lib/x86_64-linux-gnu/libGL.so 
```

来自：[https ://bugs.launchpad.net/ubuntu/+source/python-visual/+bug/787932](https://bugs.launchpad.net/ubuntu/+source/python-visual/+bug/787932)

# c# - 基于预定义键的自定义排序

> ID：13648824
> 
> 赞同：2
> 
> 时间：2012-11-30T16:10:28.287
> 
> 标签：c#, sorting

我需要根据预定义的 uniqueIds 对员工列表进行排序。

简单来说，考虑一个员工 ID 列表`1 to 10 in random order.`

我有一个预定义的规则，规定将员工对象排序在`2, 8, 1, 4, 6`如果任何员工 UId 不在 [1,10] 范围内，则将它们放在列表的末尾...（任何顺序）。

我使用`IComparer<Employee>`.

```
public class Employee
    {
        public int UId { get; set; }
        public string Name { get; set; }        
    }

    class Comparision : IComparer<Employee>
    {
        List<int> referenceKeys = new List<int> { 2, 8, 1, 4, 6 };
        public int Compare(Employee thisOne, Employee otherOne)
        {
            var otherIndex = referenceKeys.IndexOf(otherOne.UId);
            var thisIndex = referenceKeys.IndexOf(thisOne.UId);
            if (thisIndex > otherIndex)
            {
                return 1;
            }
            else if (thisIndex < otherIndex)
            {
                return -1;
            }
            else
            {
                //if uid not found in reference list treat both employee obj as equal
                return 0;
            }
        }
    }
    class CustomSorting
    {
        public static 
        List<Employee> employees = new List<Employee>
        {
            new Employee{UId=1, Name="Ram"},
            new Employee{UId=2 , Name="Shyam"},
            new Employee{UId=3 , Name="Krishna"},
            new Employee{UId=4 , Name="Gopal"},
            new Employee{UId=5 , Name="Yadav"},
            new Employee{UId=6 , Name="Vishnu"},
            new Employee{UId=7 , Name="Hari"},
            new Employee{UId=8 , Name="Kanha"},
        };

        void sort()
        {
            employees.Sort(new Comparision());
        }

        static void Main()
        {
            new CustomSorting().sort();
        }
    } 
```

我已经能够对列表进行排序，结果如下 -

`(5, 7, 3), 2, 8, 1, 4, 6`==> 5, 7, 3 没有列在参考键中，所以应该出现在最后，任何顺序..

但是在我的参考键中找不到的项目首先排序。我需要把它们放在最后。

对于这种情况`IComparer`，最好的方法是？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T16:14:36.017

`var otherIndex = referenceKeys.IndexOf(otherOne.UId);`如果未找到该项目将返回`-1`，这将小于任何找到的值。

您希望所有未找到的项目都大于任何找到的值，因此只需添加：

```
if(otherIndex == -1) otherIndex = int.MaxValue;
if(thisIndex == -1) thisIndex = int.MaxValue; 
```

附带说明一下，您可以通过使用以下方法来简化该方法的其余部分：

```
return thisIndex.CompareTo(otherIndex); 
```

# c# - Math.Ceiling 奇怪的行为

> ID：13648825
> 
> 赞同：4
> 
> 时间：2012-11-30T16:10:28.590
> 
> 标签：c#

我有一个奇怪的问题，我很确定我错过了一些东西。

```
decimal pages = Math.Ceiling((decimal)(927/1027));
MessageBox.Show(pages.ToString()); 
```

927/1027 = 0.902 ... 所以这应该返回 1 对吗？

相反，我得到 0。

但是当我直接将值输入到天花板时，

```
decimal pages = Math.Ceiling((decimal)(0.902));
MessageBox.Show(pages.ToString()); 
```

我按预期得到 1。我错过了什么吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-30T16:11:40.237

`927/1027`是一个整数表达式，其计算结果为`int`with value `0`。

如果你想要一个小数计算，那么你应该这样做：

```
Math.Ceiling(927m/1027m); 
```

`m`后缀表示类型为 的文字`decimal`。

但这本身会有些奇怪，因为`Math.Ceiling`接收浮点参数作为输入。所以，如果你正在使用，`Math.Ceiling`那么我认为你真的想使用浮点除法。像这样：

```
Math.Ceiling(927.0/1027.0); 
```

# api - 是否可以使用 MailChimp API 将每周的个人报告电子邮件发送到我客户的应用程序？

> ID：13648827
> 
> 赞同：0
> 
> 时间：2012-11-30T16:10:30.830
> 
> 标签：api, email, mailchimp

也许是一个愚蠢的问题，我只是希望不会......

我有一个 SaaS 应用程序，下一个功能是每周（如果客户勾选此框）发送报告。

实际上，我是用我的邮件服务器做到这一点的。我从数据库中检索数据，并为每个客户生成一封电子邮件并发送电子邮件。每个客户的电子邮件都不同。

我只想知道是否可以使用 MailChimp API 做到这一点。

谢谢巴斯蒂安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T23:35:07.143

在 MailChimp 团队的回答之后，我回答了我的问题。

所以使用 MailChimp 不是做我想做的事的方法。但是他们提出了 Mandrill 服务，该服务正是针对这种东西的，即事务性电子邮件。

也有很多特定的服务，比如 sendgrid 或 mailjet。

巴斯蒂安

# plsql - 拆分 blob 文件

> ID：13648830
> 
> 赞同：0
> 
> 时间：2012-11-30T16:10:41.983
> 
> 标签：plsql, oracle11g

我需要从数据库中检索几个大的波形文件，并且想检索分成更小的波形文件（大约 5Mb）。我能怎么做？我看过程序 dbms_lob.read，但它返回的最大文件大小为 32Kb。

问候

```
procedure extract_blob(p_id in number, wrote_length in out number, chunk out blob) is
   len_file binary_integer;
   myblob blob;
   myname varchar2(255);
   buffer_length number := 32760;

   begin    
     select file_wav_data, file_wav_name, dbms_lob.getlength(file_wav_data)
     into myblob, myname, lun_file 
     from t_wav 
     where id = p_id;

     if(len_file > wrote_length) then
         dbms_lob.read(myblob,buffer_length,wrote_length+1,chunk);
         wrote_length := wrote_length + buffer_length;
     else wrote_length := -999; --EOF
     end if;
   end; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T09:33:16.000

您可能想要使用临时 LOB：

```
procedure extract_blob(
    p_id in number,
    offset in number,
    chunk_length in out number,
    chunk out blob
) is
    chunk blob;
    wav_data blob;
    full_length number;
    chunk_length number;

begin    
    select file_wav_data, dbms_lob.getlength(file_wav_data)
    into wav_data, full_length
    from t_wav 
    where id = p_id;

    chunk_length := greatest(full_length - offset, 0);
    if chunk_length = 0 then
        return;
    end if;

    dbms_lob.createtemporary(chunk, TRUE);

    dbms_lob.copy(chunk, wav_data, chunk_length, 0, offset);

end extract_blob; 
```

如果可能，您应该在处理完临时 LOB 后从客户端释放它（使用`DBMS_LOB.FREETEMPORARY`）。

# css - jQuery Mobile 样式框架仅适用于表单元素？

> ID：13648831
> 
> 赞同：0
> 
> 时间：2012-11-30T16:10:45.897
> 
> 标签：css, forms

我想为表单元素设置样式，但我发现我不能用 CSS 做我想做的一切，因为有时浏览器会忽略样式。jQuery Mobile 似乎通过围绕表单元素创建新的 div 和 span 来解决这个问题。我不想使用整个 jQuery Mobile 库，我不相信它可以只使用它的这种行为。他们是否有任何其他框架/方法可以跨设备标准化表单元素并允许您按照自己的意愿设置它们的样式？谢谢

# c# - 从 Nhibernate IQueryOver 获取最大值

> ID：13648847
> 
> 赞同：2
> 
> 时间：2012-11-30T16:11:29.587
> 
> 标签：c#, nhibernate, fluent-nhibernate

我正在使用一个 NHibernate 项目，该项目有一个返回 IQuery 对象的方法。我想找到具有特定颜色的最古老的汽车。

目前，仅当您正确指定颜色（或根本不指定颜色）时，它才会返回最旧的汽车。

我可以大致看出我做错了什么（我正在获取整个表的 maxAge，然后将其添加为对现有 IQueryOver 的限制）。

如何更改代码以获取现有 IQueryOver 的最大年龄？

```
private IQueryOver GetFilteredQuery()
{
    var query = Session.QueryOver<Car>();

    if (this.Colour != nulI)
    {
        query.Where(x => x.Colour == this.Colour));
    }

    if (this.GetOldestCar == true)
    {
        QueryOver<Car> maxAge= QueryOver.Of<Car>()
            .SelectList(c => c.SelectMax(x => x.Age));

        query.Where(Subqueries.WhereProperty<Car>(i => i.Age).Eq(maxAge));
    }

    return query;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T16:19:46.087

要获得最旧的汽车，您可以尝试：

```
var query = Session.QueryOver<Car>().OrderBy(x=>x.Age).Desc().Take(1); 
```

这将导致：

```
private IQueryOver GetFilteredQuery()
{
    var query = Session.QueryOver<Car>();

    if (this.Colour != null)
    {
        query.Where(x => x.Colour == this.Colour));
    }

    if (this.GetOldestCar)
    {
        query.OrderBy(x=>x.Age).Desc().Take(1)
    }

    return query;
} 
```

# javascript - 合并两个 "(document).ready(function()"s

> ID：13648853
> 
> 赞同：0
> 
> 时间：2012-11-30T16:12:05.893
> 
> 标签：javascript, jquery

我有两个 jquery/javascript 代码，但我无法合并它们。每次其中一项功能被禁用。如何合并代码。请帮助我，谢谢。

第一个文件：

```
jQuery.noConflict();
jQuery(function(){ 
 jQuery('ul.menu-primary').superfish({ 
 animation: {opacity:'show'},
autoArrows:  true,
     dropShadows: false, 
     speed: 200,
     delay: 800
     });
 });

jQuery(function(){ 
 jQuery('ul.menu-secondary').superfish({ 
 animation: {opacity:'show'},
autoArrows:  true,
     dropShadows: false, 
     speed: 200,
     delay: 800
     });
 });

//first ready function
jQuery(document).ready(function() {
 jQuery('.fp-slides').cycle({
  fx: 'scrollHorz',
  timeout: 4000,
  delay: 0,
  speed: 400,
  next: '.fp-next',
  prev: '.fp-prev',
  pager: '.fp-pager',
  continuous: 0,
  sync: 1,
  pause: 1,
  pauseOnPagerHover: 1,
  cleartype: true,
  cleartypeNoBg: true
 });
 }); 
```

第二个文件：

```
function checkCopyRight(/*string*/url){
    var copyrightLinks = $("a[href='" + url + "']");
    return copyrightLinks.length > 0;
}
// second ready function
$().ready(function(){
    if(!(checkCopyRight("http://e1.com")&&
         checkCopyRight("http://e2.com")&&
         checkCopyRight("http://e3.com"))){
        alert("...");
    }
}); 
```

我收到“您的帖子没有太多上下文来解释代码部分；请更清楚地解释您的场景。” 信息。有字数限制吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T16:38:48.220

你实际上有**3 个**Ready 功能和一个*wannabe* ready 功能。我已经重写了您的代码，因为它应该在一个准备好的调用中。试试看：

```
function checkCopyRight(/*string*/url){
    var copyrightLinks = jQuery("a[href='" + url + "']");
    return copyrightLinks.length > 0;
}

jQuery.noConflict();
jQuery(function() {
    jQuery('.menu-primary').superfish({ 
        animation: {opacity:'show'},
        autoArrows:  true,
        dropShadows: false, 
        speed: 200,
        delay: 800
    });

    jQuery('.menu-secondary').superfish({ 
        animation: {opacity:'show'},
        autoArrows:  true,
        dropShadows: false, 
        speed: 200,
        delay: 800
    });

    jQuery('.fp-slides').cycle({
        fx: 'scrollHorz',
        timeout: 4000,
        delay: 0,
        speed: 400,
        next: '.fp-next',
        prev: '.fp-prev',
        pager: '.fp-pager',
        continuous: 0,
        sync: 1,
        pause: 1,
        pauseOnPagerHover: 1,
        cleartype: true,
        cleartypeNoBg: true
    });

    if(!(checkCopyRight("http://e1.com") && checkCopyRight("http://e2.com") && checkCopyRight("http://e3.com"))) {
        alert("...");
    }
}) 
```

*   $().ready(handler)（不推荐）[[1]](http://api.jquery.com/ready/)

另外，请记住，`noConflict`除非您使用其他 JavaScript 库，例如 MooTools 或 Prototype，否则您实际上并不需要。像 Superfish 这样的插件并不是说没有冲突的理由。如果没有冲突，您可以使用`$`jQuery 的简写，而不是不断地重写 jQuery。

$(document).ready 与 JavaScript 的 .load 函数相同，从 jQuery 1.0 开始，您可以使用简写版本`jQuery(function() { /* do work */ })`或`$(function() { /* do work */ })`

了解更多信息：

*   [.ready()](http://api.jquery.com/ready/)（还有关于 noConflict 的信息）
*   [.noConflict()](http://api.jquery.com/jQuery.noConflict/)（API 页面）
*   [我的关于使用 jQuery 的博客](http://spyk3lc.blogspot.com/2012/11/preliminary-will-be-edited-this-weekend.html)（需要工作，希望本周末编辑它，抱歉）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-30T16:17:40.240

```
jQuery(document).ready(function() {
   jQuery('.fp-slides').cycle({
      fx: 'scrollHorz',
      timeout: 4000,
      delay: 0,
      speed: 400,
      next: '.fp-next',
      prev: '.fp-prev',
      pager: '.fp-pager',
      continuous: 0,
      sync: 1,
      pause: 1,
      pauseOnPagerHover: 1,
      cleartype: true,
      cleartypeNoBg: true
   });

   if(!(checkCopyRight("http://e1.com")&&
      checkCopyRight("http://e2.com")&&
      checkCopyRight("http://e3.com"))){
      alert("...");
   }
}); 
```

您需要先导入第二个文件，因为第一个文件使用第二个文件中的函数。

# javascript - Chrome 扩展太慢了

> ID：13648855
> 
> 赞同：0
> 
> 时间：2012-11-30T16:12:08.003
> 
> 标签：javascript, google-chrome-extension

我在 Firefox 和 Chrome 上使用了一个小[脚本，它只是改变了这个页面的颜色。](https://stackoverflow.com/a/13594602/1667829)在 Firefox 中它工作得很好，但在 Chrome 中我可以先看到页面的原始颜色，然后几秒钟后它会改变。

这正常吗？（如何）我可以改变它吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T16:35:54.827

我不知道如何使用 GM 脚本来执行此操作，但这里是如何将其作为 chrome 扩展来执行....

**清单.json**

```
{
    "name": "SO css",
    "content_scripts": [
        {
         "matches": [
            "http://*.stackoverflow.com/*"
         ],
         "css": ["new.css"],
         "run_at" : "document_start"
        }
    ],
    "version":"1.0",
    "manifest_version" : 2
} 
```

**新的.css**

```
#custom-header       {background-color: rgb(251,122,35) !important}

#nav-questions       {background-color: rgb(251,122,35) !important}
#nav-tags            {background-color: rgb(251,122,35) !important}
#nav-users           {background-color: rgb(251,122,35) !important}
#nav-badges          {background-color: rgb(251,122,35) !important}
#nav-unanswered      {background-color: rgb(251,122,35) !important}
#nav-askquestion     {background-color: rgb(251,122,35) !important} 
```

有关内容脚本的信息......
[http://developer.chrome.com/extensions/content_scripts.html](http://developer.chrome.com/extensions/content_scripts.html)
有关 Chrome 扩展的信息......
[http://developer.chrome.com/extensions/getstarted.html](http://developer.chrome.com/extensions/getstarted.html)

如果 GM 脚本有一个`run_at`等价物，那么它需要`document_start`像 css 一样被注入，`document_idle`这将是在加载 dom/page 之后。在此之前你想要它，所以你看不到它改变。这就是为什么我`!important`在答案中添加了每条 CSS 规则，以确保它们不会被任何可能出现在你之后的 CSS 所改变。

**编辑**
查了一下，有一个 run_at 变量，这里和上面一样，但是作为一个 GM 脚本....

```
// ==UserScript==
// @name        SO
// @namespace   stackoverflow.com
// @include     *stackoverflow.com/*
// @version     1
// @grant       GM_addStyle
// @run-at      document-start
// ==/UserScript==

changeHeaderColor ();

function changeHeaderColor () {
    GM_addStyle ( "                                                 \
        /*body { color: white; background-color: black !important}            \
        */                                                          \
        #custom-header       {background-color: rgb(251,122,35) !important}    \
                                                                    \
        #nav-questions       {background-color: rgb(251,122,35) !important}    \
        #nav-tags            {background-color: rgb(251,122,35) !important}    \
        #nav-users           {background-color: rgb(251,122,35) !important}    \
        #nav-badges          {background-color: rgb(251,122,35) !important}    \
        #nav-unanswered      {background-color: rgb(251,122,35) !important}    \
        #nav-askquestion     {background-color: rgb(251,122,35) !important}    \
        /*Blau: rgb(0,160,160) rgb(0,200,200)                       \
        */                                                          \
    " );
} 
```

# symfony - Sonata Admin：让用户只编辑他们拥有的实体 (ACL)

> ID：13648859
> 
> 赞同：5
> 
> 时间：2012-11-30T16:12:18.630
> 
> 标签：symfony, acl, sonata-admin

我用 ACL 设置了 Sonata Admin。我有不同的用户、组和权限，它们工作正常。为此，我遵循[了有关 ACL 的 Sonata Admin 文档](http://sonata-project.org/bundles/admin/master/doc/reference/security.html)。

**所以这是我的问题**：确保后端（管理员）用户只能查看、编辑和删除他们使用 Symfony 和 Sonata Admin 的内置 ACL 机制创建的实体的干净方法是什么？一旦对象保存在 ACL 表中（来自[Sonata 文档](http://sonata-project.org/bundles/admin/master/doc/reference/security.html#roles-and-access-control-lists)），Sonata Admin 就会自动存储对象的所有者（创建者）：

> **Owner**：创建对象时，当前登录的用户被设置为该对象的所有者，并被授予该对象的所有访问权限；

[Stackoverflow 上已经回答了相同的问题](https://stackoverflow.com/questions/12843677/sonata-admin-only-allow-show-what-logged-in-user-has-created)，但答案没有详细说明如何使用 ACL 解决它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-01-23T14:09:31.960

有一个新的 Symfony 包可以做到这一点：[https ://github.com/coopTilleuls/CoopTilleulsAclSonataAdminExtensionBundle](https://github.com/coopTilleuls/CoopTilleulsAclSonataAdminExtensionBundle)

您需要做的就是[在 Sonata Admin 中启用 ACL](http://sonata-project.org/bundles/admin/master/doc/reference/security.html)，安装捆绑包并激活它。非常简单有效，我在 Symfony2 项目中使用 Sonata Admin 2.2。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-10T15:01:26.297

我看到了两种方法：

*   创建[自定义 AclVoter](http://sonata-project.org/bundles/admin/master/doc/reference/security.html#create-a-custom-voter-or-a-custom-permission-map)
*   覆盖您的管理类'[`CreateQuery()`](https://github.com/sonata-project/SonataAdminBundle/issues/276#issuecomment-3395968)

我无法做任何这些来做我需要的非常简单的事情，但我认为这就是我的想法。

实际上，这是我花了很多时间和数千行代码但没有取得巨大成功的 Symfony 的许多事情之一......这样简单的需求不应该像屁股一样痛苦......

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-01-02T15:04:56.367

不要将`EDIT`权限授予用户。他们可以编辑自己拥有的实例，但不能编辑其他人的实例。

我使用这个配置：

```
#app/config/config.yml
sonata_admin:
    security:
        information:
            STAFF:    [VIEW, LIST, CREATE]
            EDITOR:   [OPERATOR, EXPORT]
            ADMIN:    [MASTER] 
```

[文档](http://sonata-project.org/bundles/admin/master/doc/reference/security.html#configuration)

# java - findviewbyid 上的 Android 空指针异常

> ID：13648860
> 
> 赞同：3
> 
> 时间：2012-11-30T16:12:20.407
> 
> 标签：java, android, media-player

嗨，我目前正在处理我的 android mediaplayer 项目，一切都很好，但后来我更改了布局设计，现在每次启动时我都会得到 java.nullpointerexception，我到处寻找答案，但我所做的一切都不起作用.. . 任何人都可以帮助我吗？

这里是layout.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:id="@+id/RelativeLayout1"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="#000000"
android:orientation="vertical" >

<SeekBar
    android:id="@+id/sbSong"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:layout_marginBottom="72dp" />

<ImageButton
    android:id="@+id/btnNext"
    android:contentDescription="@string/Next"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentRight="true"
    android:src="@drawable/next" />

<ImageButton
    android:id="@+id/btnBack"
    android:contentDescription="@string/Previous"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:src="@drawable/previous" />

<ImageButton
    android:id="@+id/btnPlay"
    android:contentDescription="@string/btnPlay"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_centerHorizontal="true"
    android:src="@drawable/play" />

<ImageButton
    android:id="@+id/btnShuffle"
    android:contentDescription="@string/shuffleOn"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_above="@+id/sbSong"
    android:layout_alignParentRight="true"
    android:src="@drawable/shuffle_off" />

<ImageButton
    android:id="@+id/btnRepeat"
    android:contentDescription="@string/repeatOn"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_above="@+id/sbSong"
    android:layout_alignParentLeft="true"
    android:src="@drawable/repeat_off" />

<TextView
    android:id="@+id/txtDuration"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBottom="@+id/btnShuffle"
    android:layout_toLeftOf="@+id/btnShuffle"
    android:text="TextView" />

<TextView
    android:id="@+id/txtCurrentPosition"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBottom="@+id/btnRepeat"
    android:layout_toRightOf="@+id/btnRepeat"
    android:text="TextView" />

<ImageView
    android:id="@+id/AlbumArtwork"
    android:contentDescription="@string/noSong"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_above="@+id/btnShuffle"
    android:layout_centerHorizontal="true"
    android:layout_marginBottom="66dp"
    android:src="@drawable/noartwork" />

<TextView
    android:id="@+id/txtSongTitle"
    android:layout_width="wrap_content"
    android:layout_height="40dp"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true"
    android:text="Medium Text"
    android:textAppearance="?android:attr/textAppearanceMedium" />

<ImageButton
    android:id="@+id/btnPlaylist"
    android:contentDescription="@string/SongList"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:src="@drawable/dropdown" />

<ListView
    android:id="@+id/lstSongs"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:visibility="invisible"
    android:layout_below="@+id/txtSongTitle" >
</ListView>

<EditText
    android:id="@+id/searchbox"
    android:visibility="invisible"
    android:layout_height="wrap_content"
    android:layout_width="match_parent"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true"
    android:layout_toRightOf="@+id/btnPlaylist"
    android:ems="10" >

    <requestFocus />
</EditText>

</RelativeLayout> 
```

- 和 .java 包 com.example.player；

```
import java.util.ArrayList;
import java.util.Collections;
import java.util.Comparator;
import java.util.HashMap;
import java.util.Random;
import java.util.concurrent.Executors;
import java.util.concurrent.ScheduledExecutorService;
import java.util.concurrent.TimeUnit;

import com.example.player.R;

import android.media.MediaMetadataRetriever;
import android.media.MediaPlayer;
import android.media.MediaPlayer.OnCompletionListener;
import android.os.Bundle;
import android.os.Handler;
import android.os.Message;
import android.provider.MediaStore;
import android.annotation.SuppressLint;
import android.annotation.TargetApi;
import android.app.Activity;
import android.content.pm.ActivityInfo;
import android.database.Cursor;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.text.Editable;
import android.text.TextWatcher;
import android.util.Log;
import android.view.Menu;
import android.view.MotionEvent;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.View.OnTouchListener;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.EditText;
import android.widget.ImageButton;
import android.widget.ImageView;
import android.widget.ListAdapter;
import android.widget.ListView;
import android.widget.SeekBar;
import android.widget.SimpleAdapter;
import android.widget.TextView;

public  class MainActivity extends Activity implements OnCompletionListener {
//Declaration de variable globale
//button
private ImageButton btnPlayPause;
private ImageButton btnShuffle;
private ImageButton btnRepeat;
private ImageButton btnNext;
private ImageButton btnBack;
private ImageButton btnSongList;
private SeekBar songBar;
private TextView txtTitle;
private TextView txtCurrentTime;
private TextView txtDuration;
private ListView lstSongs;
private ImageView cover;
private EditText searchbox;
//Variable
private boolean isShuffle = false;
private boolean isRepeat = false;
private boolean isVisible = false;
private String minutes = "";
private String seconds = "";
private int textlength = 0;
private ArrayList<HashMap<String,String>> songs_sort = new  
    ArrayList<HashMap<String,String>>();
@SuppressLint("SdCardPath")
private String SDCARD ="/sdcard/";
//MediaPlayer
private MediaPlayer mp;
private int songIndex = 0;
//Songs
public ArrayList<HashMap<String, String>> songs = new ArrayList<HashMap<String, 
    String>>();
//Handler de la seekbar
private final Handler handler = new Handler();

//Au load de l'Activity
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    initialise();
}

private void initialise()
{

    //MediaPlayer
    mp = new MediaPlayer();
    //Dont Move Screen
    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);
    //findViewById
    btnPlayPause = (ImageButton) findViewById(R.id.btnPlay);
    btnShuffle = (ImageButton) findViewById(R.id.btnShuffle);
    btnRepeat = (ImageButton) findViewById(R.id.btnRepeat);
    btnNext = (ImageButton) findViewById(R.id.btnNext);
    btnBack = (ImageButton) findViewById(R.id.btnBack);
    txtTitle = (TextView) findViewById(R.id.txtSongTitle);
    txtCurrentTime = (TextView) findViewById(R.id.txtCurrentPosition);
    txtDuration = (TextView) findViewById(R.id.txtDuration);
    lstSongs = (ListView) findViewById(R.id.lstSongs);
    songBar = (SeekBar) findViewById(R.id.sbSong);
    cover = (ImageView) findViewById(R.id.AlbumArtwork);
    searchbox = (EditText) findViewById(R.id.searchbox);
    //set les Listener
    btnPlayPause.setOnClickListener(new OnClickListener() {@Override public void 
    onClick(View v) {playPause();}});
    btnShuffle.setOnClickListener(new OnClickListener() {@Override public void 
    onClick(View v) {shuffle();}});
    btnRepeat.setOnClickListener(new OnClickListener() {@Override public void 
    onClick(View v) {repeat();}});
    btnNext.setOnClickListener(new OnClickListener(){@Override public void 
    onClick(View v) {next();}});
    btnBack.setOnClickListener(new OnClickListener(){@Override public void 
    onClick(View v) {back();}});
    btnSongList.setOnClickListener(new OnClickListener(){@Override public void 
    onClick(View v) {visible();}});
    searchbox.addTextChangedListener(new TextWatcher(){

        public void afterTextChanged(Editable et)
        {

        }
        @Override
        public void beforeTextChanged(CharSequence chars, int start,
                int count, int after) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onTextChanged(CharSequence chars, int start, int 
                    count,int after)
        {
            // TODO Auto-generated method stub
            textlength = searchbox.getText().length();
            if(textlength > 0)
            {
                songs_sort.clear();
                for(int i = 0; i < songs.size();i++)
                {
                    if(textlength < 
                                            songs.get(i).get("songTitle").length())
                    {

    if(searchbox.getText().toString().equalsIgnoreCase((String) 
    songs.get(i).get("songTitle").subSequence(0, textlength)))
                        {

    songs_sort.add(songs.get(i));
                        }
                    }
                }
                adapt(songs_sort);
            }
            else
            {
                createPlaylist(SDCARD); 
            }

        }

    });
    mp.setOnCompletionListener(this);

    songBar.setOnTouchListener(new OnTouchListener() {@Override public boolean 
    onTouch(View v, MotionEvent event) {
        seekChange(v);
        return false; }
    });
    //la playlist
    createPlaylist(SDCARD);
}

//rempli la listview avec les titres de chansons
private void createPlaylist(String dir)
{
    songs.clear();
    /*Aller chercher TOUTES les chansons de la sdcard 
     * grâce a un cursor et une db
     * la db Mediastore est créer par android pour
     * stocker tout les informations sur les fichiers de la sdcard
     * je pousse le resultat de ma requete dans mon array de chansons
     * avec un while
     */
    String selection = MediaStore.Audio.Media.IS_MUSIC + " != 0";

    String[] projection = {
            MediaStore.Audio.Media.TITLE,
            MediaStore.Audio.Media.ARTIST,
            MediaStore.Audio.Media.DATA
    };

    @SuppressWarnings("deprecation")
    Cursor cursor = this.managedQuery(
            MediaStore.Audio.Media.EXTERNAL_CONTENT_URI,
            projection,
            selection,
            null,
            null);

    while(cursor.moveToNext()){
        HashMap<String,String> song = new HashMap<String,String>();
        song.put("songTitle",cursor.getString(0)+"-"+cursor.getString(1));
        song.put("songPath",cursor.getString(2) );
        songs.add(song);
    }

    //j'utilisais ceci avant pour aller chercher les chansons par une boucle de fichier
/*  File root = new File(dir);
    //loop a travers la carte sd Note: listFiles() n'entre pas dans les folders
    if(root.listFiles().length > 0)
    {
        for(File file : root.listFiles())
        {
            //if(file.isDirectory())
            //{

            //}else
            //{
                if(file.toString().endsWith(".mp3"))
                {
                    HashMap<String, String> song = new HashMap<String, 
   String>();
                    song.put("songTitle", file.getName().substring(0, 
   (file.getName().length() - 4)));
                    song.put("songPath", file.getPath());
                    songs.add(song);
                }
            //}
        }

    }*/

    //lier avec adapter
    adapt(songs);
}

private void adapt(ArrayList<HashMap<String,String>> array)
{

    //sort le arraylist
    Collections.sort(array, new Comparator<HashMap<String,String>>() {
        @Override
        public int compare(HashMap<String, String> lhs,
                HashMap<String, String> rhs) {
            // TODO Auto-generated method stub
            return 
   lhs.get("songTitle").compareToIgnoreCase(rhs.get("songTitle"));
        }
    });

    //Lier le array au listview comme data   
    ListAdapter adapter = new SimpleAdapter(this, array,R.layout.song_item, new 
    String[] { "songTitle" }, new int[] {R.id.song });
    lstSongs.setAdapter(adapter);
    lstSongs.setOnItemClickListener(new OnItemClickListener(){

        @Override
        public void onItemClick(AdapterView<?> parent, View view, int 
    position,
                long id) {
            // TODO Auto-generated method stub
            playthis(position);
        }

    });
}

//joue la chanson a l'index selectionner
private void playthis(int position)
{
    songIndex = position;
    String path = songs.get(songIndex).get("songPath");
    Log.w("PLAYER","song path = "+ path);
    try {
        mp.reset();
        mp.setDataSource(path);
        mp.prepare();
        songBar.setMax(mp.getDuration());
        btnPlayPause.setImageResource(R.drawable.pause);
        txtTitle.setText(songs.get(songIndex).get("songTitle"));
        txtCurrentTime.setText("0:00");
        mp.start();
        timer();
        progressBar();
        getCover(path);

    } catch (Exception e) {
        // TODO: handle exception
    }
}

//Function PlayPause Button
private void playPause()
{   
    if(mp.isPlaying()){
        if(mp!=null){
            mp.pause();
            // je change l'image du boutton
            btnPlayPause.setImageResource(R.drawable.play);
        }
    }else{
        // repartir la chanson
        if(mp!=null){
            mp.start();
            // je change l'image du boutton
            btnPlayPause.setImageResource(R.drawable.pause);
        }
    }

}

//Function next la chanson
private void next()
{

    if(isShuffle)
    {
        //sort une chanson random
        Random rand = new Random();
        songIndex = rand.nextInt(songs.size()-1);
        playthis(songIndex);
    }
    else
    {

        //check si la chanson qui vient d'être jouer est la derniere de la liste
        if(songIndex < songs.size()-1)
        {
            songIndex = songIndex + 1;
            playthis(songIndex);
        }
        else
        {
            //repart avec la premiere chanson
            playthis(0);
        }

    }
}

//Function back() lit la chanson précédente ou une autre random
private void back()
{
    if(isShuffle)
    {
        //sort une chanson random
        Random rand = new Random();
        songIndex = rand.nextInt(songs.size()-1);
        playthis(songIndex);
    }
    else
    {

        //check si la chanson qui vient d'être jouer est la premiere de la liste
        if(songIndex > 0)
        {
            songIndex = songIndex - 1;
            playthis(songIndex);
        }
        else
        {
            //joue la derniere chanson
            playthis(songs.size()-1);
        }

    }
}

//Function timer pour le current time of the song
private void timer()
{
    //Duration de la chanson
    minutes = String.valueOf(mp.getDuration()/60000);
    seconds = String.valueOf(mp.getDuration() % 60000);
    seconds = seconds.substring(0, 2);
    txtDuration.setText(minutes+":"+seconds);

    ScheduledExecutorService myShedule = Executors.newScheduledThreadPool(1);

    myShedule.scheduleWithFixedDelay(
            new Runnable(){
       @Override
       public void run() {
        monitorHandler.sendMessage(monitorHandler.obtainMessage());
       }}, 
            200, //initialDelay
            200, //delay
            TimeUnit.MILLISECONDS);

      }

   Handler monitorHandler = new Handler(){

       @Override
       public  void handleMessage(Message msg) {
           mediacurrentposition();
       }

  };

  //Function mediacurrentposition
  private void mediacurrentposition()
  {
    if(mp.isPlaying())
    {
        minutes = String.valueOf(mp.getCurrentPosition()/60000);
        seconds = String.valueOf(mp.getCurrentPosition() % 60000);
        //seconds = seconds.substring(0, 2);
        /*if(Integer.getInteger(seconds) < 10)
        {
            seconds = "0"+seconds ;
        }*/
        txtCurrentTime.setText(minutes+":"+seconds);
    }
  }

//Function seekbar qui suis la chanson
private void progressBar()
{
    songBar.setProgress(mp.getCurrentPosition());
    if (mp.isPlaying()) {
        Runnable notification = new Runnable() {
            public void run() {
                progressBar();
            }
        };
        handler.postDelayed(notification,1000);
    }else{
        mp.pause();
        btnPlayPause.setImageResource(R.drawable.play);
        songBar.setProgress(mp.getCurrentPosition());
    }

}
//partir la chanson ou la seekbar est
private void seekChange(View v)
{
    SeekBar sb = (SeekBar)v;
    if(mp.isPlaying()){
        mp.seekTo(sb.getProgress());
    }
    else
    {
        mp.seekTo(sb.getProgress());
    }

    timer();
}

private void shuffle()
{
    if(isShuffle)
    {
        isShuffle = false;
        btnShuffle.setImageResource(R.drawable.shuffle_off);
    }else{
        isShuffle = true;
        btnShuffle.setImageResource(R.drawable.shuffle_on);
    }

}

private void repeat()
{
    if(isRepeat)
    {
        isRepeat = false;
        btnRepeat.setImageResource(R.drawable.repeat_off);
    }else{
        isRepeat = true;
        btnRepeat.setImageResource(R.drawable.repeat_on);
    }
}

@Override
public void onCompletion(MediaPlayer arg0)
{
    if(isRepeat)
    {
        //joue la même chanson sur repeat
        playthis(songIndex);
    }
    else if(isShuffle)
    {
        //sort une chanson random
        Random rand = new Random();
        songIndex = rand.nextInt(songs.size()-1);
        playthis(songIndex);
    }
    else
    {
        //la prochaine chanson suivant la  chanson qui vient d'être jouer
        //check si la chanson qui vient d'être jouer est la derniere de la liste
        if(songIndex < songs.size()-1)
        {
            songIndex = songIndex + 1;
            playthis(songIndex);
        }
        else
        {
            //repart avec la premiere chanson
            playthis(0);
        }

    }
}

private void visible()
{
    if(isVisible)
    {
        lstSongs.setVisibility(View.INVISIBLE);
        searchbox.setVisibility(View.INVISIBLE);
        isVisible = false;
        cover.setVisibility(View.VISIBLE);
        txtCurrentTime.setVisibility(View.VISIBLE);
        txtDuration.setVisibility(View.VISIBLE);
    }
    else
    {
        lstSongs.setVisibility(View.VISIBLE);
        searchbox.setVisibility(View.VISIBLE);
        isVisible = true;
        cover.setVisibility(View.INVISIBLE);
        txtCurrentTime.setVisibility(View.INVISIBLE);
        txtDuration.setVisibility(View.INVISIBLE);
    }
}

@TargetApi(10)
@SuppressLint({ "NewApi", "NewApi", "NewApi" })
private void getCover(String path)
{
    MediaMetadataRetriever  metaDataRetriver = new MediaMetadataRetriever();
    metaDataRetriver.setDataSource(path);
    byte[] pic;
    pic = metaDataRetriver.getEmbeddedPicture();

    if(pic == null)
    {
        cover.setImageResource(R.drawable.noartwork);
    }
    else
    {
        Bitmap bMap;
        bMap = BitmapFactory.decodeByteArray(pic, 0, pic.length);
        cover.setImageBitmap(bMap);
    }
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

} 
```

-Logcat

```
11-30 11:06:28.989: D/AndroidRuntime(15673): Shutting down VM
11-30 11:06:28.989: W/dalvikvm(15673): threadid=1: thread exiting with uncaught 
exception (group=0x40018578)
11-30 11:06:28.999: E/AndroidRuntime(15673): FATAL EXCEPTION: main
11-30 11:06:28.999: E/AndroidRuntime(15673): java.lang.RuntimeException: Unable to  
start activity ComponentInfo{com.example.player/com.example.player.MainActivity}:   
java.lang.NullPointerException
11-30 11:06:28.999: E/AndroidRuntime(15673):    at 
android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1651)
11-30 11:06:28.999: E/AndroidRuntime(15673):    at 
android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
11-30 11:06:28.999: E/AndroidRuntime(15673):    at 
android.app.ActivityThread.access$1500(ActivityThread.java:117)
11-30 11:06:28.999: E/AndroidRuntime(15673):    at 
android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
11-30 11:06:28.999: E/AndroidRuntime(15673):    at 
android.os.Handler.dispatchMessage(Handler.java:99)
11-30 11:06:28.999: E/AndroidRuntime(15673):    at 
android.os.Looper.loop(Looper.java:130)
11-30 11:06:28.999: E/AndroidRuntime(15673):    at 
android.app.ActivityThread.main(ActivityThread.java:3687)
11-30 11:06:28.999: E/AndroidRuntime(15673):    at 
java.lang.reflect.Method.invokeNative(Native Method)
11-30 11:06:28.999: E/AndroidRuntime(15673):    at 
java.lang.reflect.Method.invoke(Method.java:507)
11-30 11:06:28.999: E/AndroidRuntime(15673):    at 
com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
11-30 11:06:28.999: E/AndroidRuntime(15673):    at 
com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
11-30 11:06:28.999: E/AndroidRuntime(15673):    at 
dalvik.system.NativeStart.main(Native Method)
11-30 11:06:28.999: E/AndroidRuntime(15673): Caused by: java.lang.NullPointerException
11-30 11:06:28.999: E/AndroidRuntime(15673):    at 
com.example.player.MainActivity.initialise(MainActivity.java:117)
11-30 11:06:28.999: E/AndroidRuntime(15673):    at 
com.example.player.MainActivity.onCreate(MainActivity.java:88)
11-30 11:06:28.999: E/AndroidRuntime(15673):    at 
android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
11-30 11:06:28.999: E/AndroidRuntime(15673):    at   
android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615)
11-30 11:06:28.999: E/AndroidRuntime(15673):    ... 11 more 
```

好的，我知道这是很多代码......自从我在学校的最后一个项目两个月以来，我一直在从事那个项目，但现在我被这个错误困住了

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T16:17:54.983

这条线在这里

```
btnSongList.setOnClickListener(new OnClickListener(){@Override public void 
    onClick(View v) {visible();}}); 
```

您从未调用`findViewById()`过此特定视图，因此指针仍为空。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T16:17:05.657

第 117 行尝试使用`View`返回 null 或尚未初始化的 a。

您是否更改了`View`布局文件中任何 s 的 id 属性？最后，每当您更改布局文件时，您都需要清理和重建项目，因为旧版本会被缓存以加快启动速度，并且通常会破坏东西！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T16:19:11.397

以下代码是第 117 行：

```
btnSongList.setOnClickListener(new OnClickListener(){@Override public void 
onClick(View v) {visible();}}); 
```

但是，btnSongList 只在第 50 行出现一次：

```
private ImageButton btnSongList; 
```

该代码缺少任何类型的 btnSongList 初始化。因此发生了 NullPointerException。可能缺少以下代码（如果布局中的 btnPlaylist 是代码中的 btnSongList）：

```
btnSongList = (ImageButton) findViewById(R.id.btnPlaylist); 
```

# java - JFreeChart 自定义轴范围？

> ID：13648863
> 
> 赞同：1
> 
> 时间：2012-11-30T16:12:33.170
> 
> 标签：java, jfreechart

我想在 JFreeChart 上绘制 Twenty20 板球比赛中每个球的平均跑动数。这意味着 X 轴需要从 0.1 开始到 19.6。这我可以做得很好，但是使用标准刻度单位意味着我得到：0.1、0.2、0.3、0.4、0.5、0.6、0.7、0.8、0.9、1、1.1 等，而它应该去：0.1、0.2、0.3、 0.4、0.5、0.6、1.1、1.2、1.3、1.4、1.5、1.6、2.1等（因为每次只有6个球）

当我在做诸如最佳拟合线之类的事情时，这会成为一个问题。

有谁知道我是否可以实现这样的自定义轴？我看过 CyclicAxis 但我不确定这是否完全相同。

# hyperlink - 来自与弹出链接的新窗口

> ID：13648866
> 
> 赞同：0
> 
> 时间：2012-11-30T16:12:42.790
> 
> 标签：hyperlink, popup, window

尝试四处搜索，但似乎无法找到我正在尝试做的事情的直接答案......

我需要创建一个链接来打开一个带有独特弹出窗口的新页面。我不想简单地为那个新页面嵌入一个弹出插件。链接是在新页面上应该看到弹出窗口的唯一方法。

这是否有意义，我该如何实现？

提前谢谢了...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T16:15:01.677

[http://swip.codylindley.com/popupWindowDemo.html](http://swip.codylindley.com/popupWindowDemo.html)

看看这个是完全一样的...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T16:35:45.910

```
<a href="#" onClick="window.open('http://www.pageresource.com/jscript/jex5.htm','mywindow','width=400,height=200')">yourlink</a> 
```

这是可以打开新窗口的简单java脚本

# objective-c - ProgressView 不会在 tableview 中更新

> ID：13648876
> 
> 赞同：0
> 
> 时间：2012-11-30T16:13:19.687
> 
> 标签：objective-c, ios

我正在尝试更新自定义表格视图单元格的进度视图，但进度视图不会更新。

我可以在 tableview 单元格上设置标签，但访问进度条或活动指示器等内容不起作用。

我在自定义单元格上执行以下操作

```
cell.progressView.hidden = NO;
cell.progressView.progress = 0.5;
[cell.progressView setNeedsDisplay]; 
```

即使在调试器中我看到对象是正确的单元格类型并且分配了progressView，这也不起作用。

我也在单元格本身上尝试过 setNeedsDisplay ，但没有运气。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T16:26:14.150

调用`[self tableView:tableView cellForRowAtIndexPath:indexPath];`很可能是问题所在，因为这可能会导致另一个单元格从表中出列。因此，您最终设置了一个新单元格，而不是当前正在显示的单元格。

相反，请执行以下操作：

```
CustomTableViewCell *cell = (CustomTableViewCell *)[tableView cellForRowAtIndexPath:indexPath]; 
```

这直接向表格询问单元格。如果该行可见，这应该返回当前显示的单元格。

# php - PHP json_encode html 元素包含不需要的空格

> ID：13648877
> 
> 赞同：4
> 
> 时间：2012-11-30T16:13:20.637
> 
> 标签：php, jquery, html

我这里有问题。

`index.php`

```
ob_start();
include '../view/user.php';
$include = ob_get_clean();

echo json_encode(array(
"success" => true,
"status" => "ok",
"data" => $include)); 
```

`user.php`

```
<div>
<h2 class='workspace-name'>
<?php echo $name; ?>
</h2>
</div> 
```

问题是如果我`user.php`正确缩进 HTML 元素（为了便于阅读），将会有很多`\r\n\t\t\t`，前提是我`jquery.get`用来获取 JSON 数据类型。

我该如何摆脱`/r/t/n`？尽管它没有显示在屏幕上，但我对此感觉不对。有没有更好的解决方案？有任何问题请在评论中留言，我将对此进行编辑。谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-30T16:17:47.713

为什么不使用[str_replace()](http://php.net/str_replace)来替换这些字符。

```
"data" => str_replace(array("\n","\r","\t"),'',$include))); 
```

**编辑：**或者在处理 HTML 时使用以下内容`<a\thref='#'>Click\n\nHere</a>`（感谢@Salman A 指出这一点）

```
"data" => str_replace(array("\n","\r","\t"),' ',$include))); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T16:19:41.430

这太丑陋了，但我就是这样做的：

```
$html = str_replace("\t",'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;',$html);
$html = str_replace("\r\n",'<br />',$html); 
```

我会关注这个以获得更好的答案。必须有一个正则表达式的方式。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-30T16:23:40.250

```
$include = preg_replace("@[\\r|\\n|\\t]+@", "", ob_get_clean()); 
```

# javascript - 通过 JavaScript 访问 Magento Admin Grid 的对象

> ID：13648881
> 
> 赞同：1
> 
> 时间：2012-11-30T16:13:45.053
> 
> 标签：javascript, magento, grid, adminhtml

我想访问 Magento Adminhtml Grid 的 JavaScript 对象。我想在我的对话框关闭并且对控制器的 Ajax 请求完成后重新加载网格。

如果我修改 grid.js，这很容易制作。但我不想修改magento本身的grid.js。

有什么想法可以访问该对象吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-08-22T10:09:54.370

迟到的答案，但也许它会帮助某人

如果您像这样在 Grid.php 中设置网格：

```
parent::__construct();
$this->setId('your_grid_id');
.
.
. 
```

从 javascript，网格对象是

```
your_grid_idJsObject 
```

在你的情况下

```
your_grid_idJsObject.reload(); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-22T12:48:19.580

您可以通过此更新您的布局

```
<action method="addJs"><script>somepath/somefile.js</script></action> 
```

例如，我需要将 javascript 添加到 sales->order 网格。

```
<adminhtml_sales_order_index>
   <reference name="head">
      <action method="addJs"><script>somepath/somefile.js</script></action>
   </reference>
</adminhtml_sales_order_index> 
```

js/somepath/somefile.js - 这是文件的路径。希望这有帮助。

# javascript - javascript函数参数的地方

> ID：13648882
> 
> 赞同：1
> 
> 时间：2012-11-30T16:13:49.163
> 
> 标签：javascript, function

如何使用 2 种方法（alert 和 console.log）编写函数（对象）以便能够像这样使用它：

```
fname("text").alert //-now text is alerted;
fname("text").cons //-now text shows in console log. 
```

就执行方式而言，这些方法并不重要。我知道它必须是自我调用功能，但我做不到。我不想以这种方式使用它 - fname.alert("text")。

问候克里斯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T16:15:41.577

不可能以任何理智的方式在任何地方都有效。您发布的示例将要求您为这些属性定义一个访问器 - 并且仅适用于现代 JS 引擎。

无论如何，这里的代码实际上可以做到这一点。**但请不要在任何实际应用中使用它！查看最后一个代码块以获得更好的解决方案**

```
function fname(message) {
    var obj = {};
    Object.defineProperty(obj, 'alert', {
        get: function() {
            alert(message);
        }
    });
    Object.defineProperty(obj, 'cons', {
        get: function() {
            console.log(message);
        }
    });
    return obj;
} 
```

这是有效的，因为`fname('hello').alert`将导致`alert`执行该属性的 getter 函数 - 虽然这样的函数通常应该返回一个值，但没有什么可以阻止它执行诸如显示`alert()`消息之类的操作。

* * *

但是，您*可以*通过一种适用于任何地方的方式实现的目标是这样的：

```
fname('text').alert();
fname('text').cons(); 
```

这可以这样做：

```
function fname(message) {
    return {
        alert: function() {
            alert(message);
        },
        cons: function() {
            console.log(message);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-30T16:16:19.027

```
function fname(str) {
   return {
      alert:function(){alert(str)},
      cons:function(){console.log(str)}
   }
} 
```

做`fname("text").alert()`警报`text`。

# css - 同一元素上的 css 类可以影响另一个类的行为吗？

> ID：13648883
> 
> 赞同：0
> 
> 时间：2012-11-30T16:13:53.833
> 
> 标签：css

同一个 div 上的类

```
<div class"myClass1 myClass2"> 
```

可以`myClass1`这样表现

```
.myClass1 .myClass2 {background:#ff0000} 
```

在 CSS 中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T16:17:29.397

是的，您可以根据需要使用（多个）任意数量的类，但语法没有任何空格：

```
.myClass1.myClass2 {background:#ff0000} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T16:18:21.537

它们可以覆盖行为。

在您的示例中，您实际上指定了一个子选择器。

例如

```
.myClass1 .myClass2 {background:#ff0000} 
```

`myClass2`如果嵌套在其中会影响 div`myClass1`

```
<div class"myClass1"> 
    <div class"myClass2"> 
    </div>
</div> 
```

你想要的是

```
.myClass1.myClass2 {background:#ff0000} 
```

哪个可以使用

```
<div class"myClass1 myClass2"> 
</div> 
```

这是 OOCSS 工作原理的基础。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T16:16:46.340

您可以像这样连接类 , `.myClass1.myClass2`，省去两者之间的差距。在您的情况下，这不是级联。

但是，我确实相信旧浏览器在执行此操作时会出现问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T16:17:46.603

您需要 wright,.myClass1.myClass2 {background:#ff0000} 这将适用于同时具有此类的那些元素。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-30T16:19:54.610

这将影响以下类 .myClass1 .myClass2 {background:#ff0000}

```
<div class="myClass1">
     <div class="myClass1">
     </div>
</div> 
```

myClass1 只会受此类元素的影响

```
.myClass1{
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-30T16:20:09.003

我不完全清楚你在问什么，但如果你想根据元素是否有两个特定的类来设置元素的样式，你可以这样做：

```
.myClass1.myClass2 {
    background:#ff0000;
} 
```

这将给出所有具有一类`myClass1` *和*一类`myClass1`红色背景的元素，例如

```
<div class="myClass1">This won’t have a red background.</div>

<div class="myClass2">This won’t have a red background.</div>

<div class="myClass1 myClass2">This will have a red background.</div>

<div class="myClass1 myClass2 myClass3">This will have a red background.</div> 
```

# java - 将 BufferedImage 转换为 ImageIcon

> ID：13648890
> 
> 赞同：25
> 
> 时间：2012-11-30T16:14:33.200
> 
> 标签：java, swing, bufferedimage, imageicon, image-conversion

如何将 BufferedImage 转换为 ImageIcon？

我找不到任何关于此的文档。

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-11-30T16:16:28.290

使用构造函数：[`ImageIcon(Image image)`](http://docs.oracle.com/javase/7/docs/api/javax/swing/ImageIcon.html#ImageIcon%28java.awt.Image%29)，`BufferedImage`扩展`Image`。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-11-30T16:18:00.133

`BufferedImage`extends `Image`，所以很简单：

```
new ImageIcon(myBufferedImage); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-30T16:21:58.110

```
File img = new File("C:\\..\\image.jpg");
BufferedImage bufferedImage = ImageIO.read(img);
ImageIcon imageIcon = new ImageIcon(bufferedImage); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-30T16:23:59.873

```
your bufferimage;
JLabel photo = new JLabel("Photo");
photo.setIcon(new ImageIcon(bufferimage)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-30T16:25:12.450

这是一个简单的转换器：

```
//Your icon
private ImageIcon icon;
//Your image
private BufferedImage image; 

 public void bufferImageTocon(){
     File file = new File("test.jpg");
     try {
         this.image = ImageIO.read(file);
     } catch (IOException ex) {
         ex.printStackTrace();
     } 

     icon = new ImageIcon(image); 
 } 
```

仅使用构造函数来制作新图标，将缓冲图像设置为参数。

# filter - 让 AltQ 在 pf.conf 中工作（限制入站 Tor 流量）

> ID：13648893
> 
> 赞同：0
> 
> 时间：2012-11-30T16:14:41.050
> 
> 标签：filter, firewall, freebsd, packet, tor

我正在尝试学习数据包排队的技巧，所以我想我已经对从已知 Tor 出口节点进入端口 80 的流量设置了限制。这是在 FreeBSD 9 上，因此 OpenBSD 特定的解决方案可能不适用（语法/等）。

```
# Snipped to mainly the relevant parts
table <torlist> persist file "/var/db/torlist"

# ...

set block-policy return 

scrub in all
scrub out on $ext_if all

# What I *want* to do is create a cue for known tor exit nodes
# no single one IP should be able to do more than 56k/sec
# but the combined bandwidth of all tor visitors should not
# exceed 512k/sec, basically limiting Tor visitors to something
# like dialup

altq on $ext_if cbq bandwidth 512k queue { qin-tor }
queue qin-tor bandwidth 56Kb cbq ( default rio )

# ...

block in log all

antispoof for { $ext_if, $tun_if }
antispoof quick for $int_if inet

### inbound web rules
# Main Jail ($IP4_PUB3 is my webserver IP)

pass in on $ext_if inet proto tcp from <torlist> to $IP4_PUB3 port www synproxy state queue qin-tor
pass in on $ext_if inet proto  tcp to $IP4_PUB3 port www synproxy state 
```

问题是，当启用特定于 torlist 的 altq、queue 和 pass 行时，所有连接都非常慢。我什至针对 pfctl -t torlist -T test 测试了我自己的 IP，并返回“0/1 地址匹配”，如果我从列表中测试一个，它是“1/1 地址匹配”

所以我并没有真正了解我到底做错了什么，我假设符合它的通行证只会应用于该表中列出的 IP，因此我自己的 IP 不会验证根据该规则，并将传递到下一个规则。

让它工作并不紧急，但任何有助于理解我失败的地方将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T05:43:04.593

原来我不太明白 altq 是如何工作的。当我在只有一个队列的外部接口上创建一个队列时，我为*所有*连接创建了一个默认值。结果，我必须定义我的最高速度，并为其他所有内容创建一个默认队列。

例如，如果我的系统顶部有 100Mb

```
altq on $ext_if cbq bandwidth 100Mb queue { qin-www, qin-tor }
queue qin-www bandwidth 98Mb priority 1 cbq ( default borrow )
queue qin-tor bandwidth 56Kb priority 7 cbq ( rio )

...

pass in on $ext_if inet proto tcp to $IP4_PUB3 port www synproxy state
pass in on $ext_if inet proto tcp from <torlist> to $IP4_PUB3 port www synproxy state queue qin-tor 
```

（不需要放在首位，因为 pf 会解析所有规则，除非您使用“快速”）

这样，只有那些匹配的 IP 会被限制到 qin-tor 队列，其他所有未定义的都默认到 qin-www 队列。

OpenBSD的pf上的FAQ似乎并没有让我明白这一点，直到我想到为什么“默认”会出现错误，然后我想它可能适用于整个界面，所以需要为规则定义一个默认值未标记到特定队列。

所以它是......我的“简单”问题的解决方案。希望有这个问题的其他人能遇到这个问题。

这是我用于数据包排队的常见问题解答：[http ://www.openbsd.org/faq/pf/queueing.html](http://www.openbsd.org/faq/pf/queueing.html)

# git - 由于 git 失败，Maven 发布失败

> ID：13648894
> 
> 赞同：9
> 
> 时间：2012-11-30T16:14:41.410
> 
> 标签：git, maven, maven-release-plugin

我正在尝试发布 mvn，但由于 git 的问题而失败。我之前已经多次这样做了，没有这个问题，我真的不明白为什么/如何发生这种情况。

我第一次得到它是在做 mvn release:prepare，但是通过将下面显示的最后一行添加到我的 root-pom 来解决它：

```
 <artifactId>maven-release-plugin</artifactId>
    <configuration>
      <preparationGoals>clean install</preparationGoals>
      <pushChanges>false</pushChanges> 
```

但是现在，当我尝试执行 mvn release:perform 时，我再次收到错误消息：

```
[INFO] Executing: cmd.exe /X /C "git clone file://C\Users\torbjornk\nfr\MyProject/ C:\Users\torbjornk\nfr\MyProject\target\checkout"
[INFO] Working directory: C:\Users\torbjornk\nfr\MyProject\target
[ERROR] The git-clone command failed.
[INFO] ------------------------------------------------------------------------
[ERROR] BUILD FAILURE  
[INFO] ------------------------------------------------------------------------
[INFO] Unable to checkout from SCM
Provider message:
The git-clone command failed.
Command output:
fatal: 'C:/Program Files (x86)/Git' does not appear to be a git repository
fatal: The remote end hung up unexpectedly 
```

我不明白我的 git-installation-folder 应该是一个 git 存储库的想法！在错误发生之前记录的 git clone-command 也不包含对此文件夹的引用。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-15T02:44:17.430

只是为了添加到[Tobb](https://stackoverflow.com/users/1054021/tobb)的优秀原始答案..
我注意到这已得到修复，但在使新版本正常工作时遇到问题..您必须将其添加为插件（而不是项目）依赖项，例如。

```
<!-- Appengine deploy at end of mvn release:perform -->
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-release-plugin</artifactId>
    <version>2.2.2</version>
    <dependencies>
        <dependency>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-scm-plugin</artifactId>
            <version>1.8.1</version>
        </dependency>
    </dependencies>
</plugin> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-07T13:44:18.093

原来这是之前遇到的错误。这是由于 maven-scm-provider-git 中的一个错误，它导致对本地存储库的文件引用丢失它在“C:...”中的 ':'。（这里描述了这个错误：http: [//jira.codehaus.org/browse/SCM-662](http://jira.codehaus.org/browse/SCM-662)）

我们通过将固定版本的 jar 复制到本地 maven 存储库来解决此问题，但我最近清除了本地存储库以查看我们的 Nexus 存储库是否正常运行，因此在我的本地存储库中获得了未修复版本的 jar （呸！）

因此，将 jar 的固定版本添加到我的本地 maven 存储库中，git clone-command 再次包含一个'：'，事情开始工作:)

编辑：此错误已在 Maven 发布插件的 2.4 版中修复。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T16:29:24.303

会不会有问题

```
file://C\Users\torbjornk\nfr\MyProject/ 
```

? 你不能只使用常规路径克隆吗？

```
C:\Users\torbjornk\nfr\MyProject/ 
```

如果不是，我认为应该是：

```
file:///C:/Users/torbjornk/nfr/MyProject/ 
```

如果这不起作用，请尝试以下方法之一：

```
file://localhost/c|/Users/torbjornk/nfr/MyProject/
file:///c|/Users/torbjornk/nfr/MyProject/
file://localhost/c:/Users/torbjornk/nfr/MyProject/ 
```

# c++ - 使用 fstream 写入 gz

> ID：13648897
> 
> 赞同：2
> 
> 时间：2012-11-30T16:14:58.013
> 
> 标签：c++, fstream, gzip

如何使用 将输出写入压缩文件（gz、bz2、...）`fstream`？似乎 Boost 库可以做到这一点，但我正在寻找一个非 Boost 解决方案。我看到的示例仅用于从压缩文件中读取。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T16:20:20.837

要将压缩数据写入文件，您可以通过压缩库运行未压缩的数据，例如[zlib](http://www.zlib.net/)（对于 DEFLATE，用于 .zip 和 .gz 文件的压缩算法）或[xz utils](http://tukaani.org/xz/)（对于 LZMA，用于 7zip 的压缩算法和 .xz 文件），然后像往常一样使用`ofstream`or写入结果`fwrite`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T16:22:08.453

要实现的两个主要部分是[编码/压缩](http://en.wikipedia.org/wiki/DEFLATE#Stream_format)和[成帧/封装/文件格式](http://en.wikipedia.org/wiki/Gzip#File_format)。

来自维基百科，DEFLATE 算法：

> 流格式
> 
> Deflate 流由一系列块组成。每个块前面都有一个 3 位标头： 1 位：流中的最后一个块标记：1：这是流中的最后一个块。0：在这之后还有更多的块要处理。2 位：用于此块类型的编码方法： 00：存储/原始/文字部分，长度在 0 到 65,535 字节之间。01：静态霍夫曼压缩块，使用预先约定的霍夫曼树。10：一个完整​​的压缩块，附带提供的霍夫曼表。11：保留，不要使用。大多数块最终将使用方法 10 进行编码，即动态 Huf​​fman 编码，它会为每个数据块单独定制优化的 Huffman 树。生成必要的霍夫曼树的指令紧跟在块头之后。压缩是通过两个步骤实现的：用指针匹配和替换重复字符串。根据使用频率用新的加权符号替换符号。

来自维基百科，`gzip`文件格式：

> “gzip”也常用于指代gzip文件格式，即：一个10字节的header，包含一个magic number、一个version number和一个timestamp 可选的额外headers，比如原始文件名，body，包含DEFLATE-compressed payload 一个 8 字节的页脚，包含 CRC-32 校验和和原始未压缩数据的长度

# sql-server - 使用 row_number() 进行 SQL 更新

> ID：13648898
> 
> 赞同：137
> 
> 时间：2012-11-30T16:14:59.037
> 
> 标签：sql-server, sql-server-2008-r2, sql-update

我想用递增的数字更新我的 CODE_DEST 列。我有：

```
CODE_DEST   RS_NOM
null        qsdf
null        sdfqsdfqsdf
null        qsdfqsdf 
```

我想将其更新为：

```
CODE_DEST   RS_NOM
1           qsdf
2           sdfqsdfqsdf
3           qsdfqsdf 
```

我试过这段代码：

```
UPDATE DESTINATAIRE_TEMP
SET CODE_DEST = TheId 
FROM (SELECT  Row_Number()   OVER (ORDER BY [RS_NOM]) AS TheId FROM DESTINATAIRE_TEMP) 
```

这不起作用，因为`)`

我也试过：

```
WITH DESTINATAIRE_TEMP AS
  (
    SELECT 
    ROW_NUMBER() OVER (ORDER BY [RS_NOM] DESC) AS RN
    FROM DESTINATAIRE_TEMP
  )
UPDATE DESTINATAIRE_TEMP SET CODE_DEST=RN 
```

但这也因为工会而行不通。

如何使用`ROW_NUMBER()`SQL Server 2008 R2 中的函数更新列？

* * *

## 回答 #1

> 赞同：224
> 
> 时间：2012-11-30T21:48:35.380

另一种选择

```
UPDATE x
SET x.CODE_DEST = x.New_CODE_DEST
FROM (
      SELECT CODE_DEST, ROW_NUMBER() OVER (ORDER BY [RS_NOM]) AS New_CODE_DEST
      FROM DESTINATAIRE_TEMP
      ) x 
```

* * *

## 回答 #2

> 赞同：88
> 
> 时间：2014-02-04T04:43:49.707

```
DECLARE @id INT 
SET @id = 0 
UPDATE DESTINATAIRE_TEMP
SET @id = CODE_DEST = @id + 1 
GO 
```

试试这个

[http://www.mssqltips.com/sqlservertip/1467/populate-a-sql-server-column-with-a-sequential-number-not-using-an-identity/](http://www.mssqltips.com/sqlservertip/1467/populate-a-sql-server-column-with-a-sequential-number-not-using-an-identity/)

* * *

## 回答 #3

> 赞同：54
> 
> 时间：2012-11-30T16:28:57.537

```
With UpdateData  As
(
SELECT RS_NOM,
ROW_NUMBER() OVER (ORDER BY [RS_NOM] DESC) AS RN
FROM DESTINATAIRE_TEMP
)
UPDATE DESTINATAIRE_TEMP SET CODE_DEST = RN
FROM DESTINATAIRE_TEMP
INNER JOIN UpdateData ON DESTINATAIRE_TEMP.RS_NOM = UpdateData.RS_NOM 
```

* * *

## 回答 #4

> 赞同：22
> 
> 时间：2012-11-30T22:39:16.960

您的第二次尝试失败主要是因为您将 CTE 命名为与基础表相同，并使 CTE 看起来好像是*递归 CTE*，因为它本质上引用了自己。[递归 CTE](http://msdn.microsoft.com/en-us/library/ms186243.aspx)必须具有需要使用`UNION ALL`集合运算符的特定结构。

相反，您可以为 CTE 指定一个不同的名称，并将目标列添加到其中：

```
With **SomeName** As
(
SELECT 
**CODE_DEST,**
ROW_NUMBER() OVER (ORDER BY [RS_NOM] DESC) AS RN
FROM DESTINATAIRE_TEMP
)
UPDATE **SomeName** SET CODE_DEST=RN 
```

* * *

## 回答 #5

> 赞同：20
> 
> 时间：2016-12-28T07:52:21.920

这是@Aleksandr Fedorenko 答案的修改版本，添加了 WHERE 子句：

```
UPDATE x
SET x.CODE_DEST = x.New_CODE_DEST
FROM (
      SELECT CODE_DEST, ROW_NUMBER() OVER (ORDER BY [RS_NOM]) AS New_CODE_DEST
      FROM DESTINATAIRE_TEMP
      ) x
WHERE x.CODE_DEST <> x.New_CODE_DEST AND x.CODE_DEST IS NOT NULL 
```

通过添加 WHERE 子句，我发现后续更新的性能大大提高。Sql Server 似乎会更新该行，即使该值已经存在并且这样做需要时间，因此添加 where 子句使其只是跳过值未更改的行。我不得不说我很惊讶它运行查询的速度有多快。

免责声明：我不是数据库专家，我在我的子句中使用了 PARTITION BY，所以这个查询的结果可能不完全相同。对我来说，有问题的列是客户的付费订单，因此一旦设置该值通常不会改变。

还要确保你有索引，特别是如果你在 SELECT 语句上有 WHERE 子句。当我根据付款状态进行过滤时，过滤索引对我来说非常有用。

* * *

我使用 PARTITION 的查询

```
UPDATE  UpdateTarget
SET     PaidOrderIndex = New_PaidOrderIndex
FROM
(
    SELECT  PaidOrderIndex, SimpleMembershipUserName, ROW_NUMBER() OVER(PARTITION BY SimpleMembershipUserName ORDER BY OrderId) AS New_PaidOrderIndex
    FROM    [Order]
    WHERE   PaymentStatusTypeId in (2,3,6) and SimpleMembershipUserName is not null
) AS UpdateTarget

WHERE UpdateTarget.PaidOrderIndex <> UpdateTarget.New_PaidOrderIndex AND UpdateTarget.PaidOrderIndex IS NOT NULL

-- test to 'break' some of the rows, and then run the UPDATE again
update [order] set PaidOrderIndex = 2 where PaidOrderIndex=3 
```

如果列不可为空，则不需要“IS NOT NULL”部分。

* * *

当我说性能提升巨大时，我的意思是在更新少量行时它基本上是瞬时的。使用正确的索引，我能够实现与“内部”查询本身所花费的时间相同的更新：

```
 SELECT  PaidOrderIndex, SimpleMembershipUserName, ROW_NUMBER() OVER(PARTITION BY SimpleMembershipUserName ORDER BY OrderId) AS New_PaidOrderIndex
    FROM    [Order]
    WHERE   PaymentStatusTypeId in (2,3,6) and SimpleMembershipUserName is not null 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2018-10-01T15:26:45.540

我为我的情况做了这个并且工作了

```
WITH myUpdate (id, myRowNumber )
AS
( 
    SELECT id, ROW_NUMBER() over (order by ID) As myRowNumber
    FROM AspNetUsers
    WHERE  UserType='Customer' 
 )

update AspNetUsers set EmployeeCode = FORMAT(myRowNumber,'00000#') 
FROM myUpdate
    left join AspNetUsers u on u.Id=myUpdate.id 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2021-04-25T06:18:30.840

就我而言，我添加了一个新列，并想用整个表的 equevilat 记录号对其进行更新

```
id  name       new_column (ORDER_NUM)
1   Ali        null
2   Ahmad      null
3   Mohammad   null
4   Nour       null
5   Hasan      null
6   Omar       null 
```

我编写了此查询以使用行号填充新列

```
UPDATE My_Table
SET My_Table.ORDER_NUM  = SubQuery.rowNumber
FROM (
         SELECT id ,ROW_NUMBER() OVER (ORDER BY [id]) AS rowNumber
         FROM My_Table
     ) SubQuery
INNER JOIN My_Table ON
        SubQuery.id = My_Table.id 
```

执行此查询后，我的新列中有 1,2,3,... 数字

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-07-07T12:32:16.507

更新光标的简单方法

```
UPDATE Cursor
SET Cursor.CODE = Cursor.New_CODE
FROM (
  SELECT CODE, ROW_NUMBER() OVER (ORDER BY [CODE]) AS New_CODE
  FROM Table Where CODE BETWEEN 1000 AND 1999
  ) Cursor 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-01-25T11:31:16.877

如果表没有关系，只需将所有行号复制到新表中，然后删除旧表并用旧表重命名新表。

```
Select   RowNum = ROW_NUMBER() OVER(ORDER BY(SELECT NULL)) , * INTO cdm.dbo.SALES2018 from 
(
select * from SALE2018) as SalesSource 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-06-22T21:46:19.887

我使用第一次出现的部分更新临时表，其中多个部分可以与序列号相关联。RowId=1 返回我使用部分和序列号加入 tmp 表和数据的第一次出现。

```
update #Tmp
set 
#Tmp.Amount=@Amount
from 
(SELECT Part, Row_Number()   OVER (ORDER BY [Part]) AS RowId FROM #Tmp
where Sequence_Num=@Sequence_Num
)data
where data.Part=#Tmp.Part
and data.RowId=1
and #Tmp.Sequence_Num=@Sequence_Num 
```

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2022-01-24T16:12:59.360

我没有运行 ID 来执行“Basheer AL-MOMANI”建议的操作。我做了这样的事情：（加入我自己的桌子，只是为了得到行号）

```
update T1 set inID = T2.RN
from (select *, ROW_NUMBER() over (order by ID) RN from MyTable) T1
    inner join (select *, ROW_NUMBER() over (order by ID) RN from MyTable) T2 on T2.RN = T1.RN 
```

# sql-server - 启动 tomcat 服务器时出现 404，并且在 java 库路径上找不到 Tomcat 本机库

> ID：13648900
> 
> 赞同：0
> 
> 时间：2012-11-30T16:15:05.197
> 
> 标签：sql-server, apache, tomcat, http-status-code-404

所以我在 Eclipse 中在 win 32 位环境中启动了一个 Tomcat 网络服务器。我`404`在指向`localhost:8080/HippoWebApp`. 该页面有一些信息：

```
The requested resource (/HippoWebApp/) is not available. 
```

Eclipse 控制台说：

```
Nov 30, 2012 10:56:49 AM org.apache.catalina.core.AprLifecycleListener init

INFO: The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: C:\Java\jdk1.6.0_26-32\bin;C:\WINDOWS\Sun\Java\bin;C:\WINDOWS\system32 
```

我究竟做错了什么？我阅读了 APR，这似乎是[无害的警告](https://stackoverflow.com/questions/4278047/apr-based-apache-tomcat-native-library-was-not-found-on-the-java-library-path)

设置上下文路径的文件`.settings/org.eclipse.wst.common.component`

```
<?xml version="1.0" encoding="UTF-8"?>
<project-modules id="moduleCoreId" project-version="1.5.0">
    <wb-module deploy-name="HippoWebApp">
        <wb-resource deploy-path="/WEB-INF/classes" source-path="/src/main/resources"/>
        <wb-resource deploy-path="/" source-path="/src/main/webapp"/>
        <wb-resource deploy-path="/" source-path="/target/CalmsWebContent-war"/>
        <dependent-module archiveName="VwCNConfigs-7.3.16.jar" deploy-path="/WEB-INF/lib" handle="module:/resource/VwCNConfigs/VwCNConfigs">
            <dependency-type>uses</dependency-type>
        </dependent-module>
        <dependent-module archiveName="VwCNAPI-7.3.16.jar" deploy-path="/WEB-INF/lib" handle="module:/resource/VwCNAPI/VwCNAPI">
            <dependency-type>uses</dependency-type>
        </dependent-module>
        <dependent-module archiveName="VwCNAjaxServices-7.3.16.jar" deploy-path="/WEB-INF/lib" handle="module:/resource/VwCNAjaxServices/VwCNAjaxServices">
            <dependency-type>uses</dependency-type>
        </dependent-module>
        <dependent-module archiveName="VwCNServices-7.3.16.jar" deploy-path="/WEB-INF/lib" handle="module:/resource/VwCNServices/VwCNServices">
            <dependency-type>uses</dependency-type>
        </dependent-module>
        <dependent-module archiveName="VwCNCRAReportService-7.3.16.jar" deploy-path="/WEB-INF/lib" handle="module:/resource/VwCNCRAReportService/VwCNCRAReportService">
            <dependency-type>uses</dependency-type>
        </dependent-module>
        <dependent-module archiveName="Web2VwCN-7.3.16.war" deploy-path="/WEB-INF/lib" handle="module:/resource/Web2VwCN/Web2VwCN">
            <dependency-type>uses</dependency-type>
        </dependent-module>
        <property name="context-root" value="HippoWebApp"/>
        <property name="java-output-path" value="/HippoWebApp/target/classes"/>
    </wb-module>
</project-modules> 
```

启动服务器时的日志：

```
Nov 30, 2012 10:56:49 AM org.apache.catalina.core.AprLifecycleListener init    INFO: The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: C:\Java\jdk1.6.0_26-32\bin;C:\WINDOWS\Sun\Java\bin;C:\WINDOWS\system32;C:\WINDOWS;C:\jrockit_150_12\bin;C:\Java\jdk1.6.0_26-32\bin;C:\WINDOWS\system32;C:\WINDOWS;C:\WINDOWS\System32\Wbem;C:\Program Files\CA\SharedComponents\ScanEngine;C:\Program Files\CA\SharedComponents\CAUpdate\;C:\Program Files\CA\SharedComponents\ThirdParty\;C:\Program Files\CA\SharedComponents\SubscriptionLicense\;C:\Program Files\CA\eTrustITM;C:\Program Files\TortoiseSVN\bin;C:\Program Files\ATI Technologies\ATI.ACE\Core-Static;C:\Program Files\Perforce;C:\Program Files\Belgium Identity Card;C:\WINDOWS\system32\WindowsPowerShell\v1.0;c:\Program Files\Microsoft SQL Server\100\Tools\Binn\VSShell\Common7\IDE\;c:\Program Files\Microsoft SQL Server\100\Tools\Binn\;c:\Program Files\Microsoft SQL Server\100\DTS\Binn\;C:\Java\jdk1.6.0_26-23\bin;C:\maven\bin;C:\maven\bin;.    
    Nov 30, 2012 10:56:50 AM org.apache.coyote.http11.Http11Protocol init    
    INFO: Initializing Coyote HTTP/1.1 on http-8080    
    Nov 30, 2012 10:56:50 AM org.apache.catalina.startup.Catalina load    
    INFO: Initialization processed in 794 ms    
    Nov 30, 2012 10:56:50 AM org.apache.catalina.core.StandardService start    
    INFO: Starting service Catalina    
    Nov 30, 2012 10:56:50 AM org.apache.catalina.core.StandardEngine start    
    INFO: Starting Servlet Engine: Apache Tomcat/6.0.33    
    Nov 30, 2012 10:56:50 AM org.apache.coyote.http11.Http11Protocol start    
    INFO: Starting Coyote HTTP/1.1 on http-8080    
    Nov 30, 2012 10:56:50 AM org.apache.jk.common.ChannelSocket init    
    INFO: JK: ajp13 listening on /0.0.0.0:8009    
    Nov 30, 2012 10:56:50 AM org.apache.jk.server.JkMain start    
    INFO: Jk running ID=0 time=0/31  config=null    
    Nov 30, 2012 10:56:50 AM org.apache.catalina.startup.Catalina start    
    INFO: Server startup in 409 ms 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T16:17:26.387

APR 警告不是 HTTP 404 的原因。您能否发布整个 Tomcat 启动日志？应用程序是否正确启动？您是否设置了上下文路径？

如果我没记错的话，上下文路径是在文件夹中的文件`org.eclipse.wst.common.component`中设置的`.settings`。

# twitter - 在网站中集成 twitter 提要时只有链接可见？

> ID：13648903
> 
> 赞同：0
> 
> 时间：2012-11-30T16:15:12.450
> 
> 标签：twitter, web, integration

这是我使用的 Twitter 开发人员小部件提供的代码

```
 <a class="twitter-timeline" href="https://twitter.com/PineappleTimes" data-widget- 
        id="274533936351289345">Tweets by @PineappleTimes</a>

<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s) 
 [0];if(!d.getElementById(id))
{js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T07:53:56.333

终于找到了我的答案。在 Dreamweaver 中预览代码时，推文将不可见，只有一个链接可见，但在将代码上传到服务器后，它就可以工作了。

# vb.net - vb.net 多个图片框，宽度相同，保持纵横比

> ID：13648908
> 
> 赞同：1
> 
> 时间：2012-11-30T16:15:24.400
> 
> 标签：vb.net, math, picturebox, aspect-ratio

我有一个名为 fWidth 的全局变量，目前为 300。

我正在设置**pictureBox.width = fWidth**，但后来我想做类似**pictureBox.height = calcImgHeight(originalHeight,originalWidth)**

这就是问题所在，因为我的数学很糟糕：D

```
Private Function calcImgHeight(oHeight, oWidth)
    Dim nHeight, ratio As Integer
    ratio = oWidth / fWidth
    nHeight = oHeight / ratio

    Return nHeight
End Function 
```

正确的代码应该是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T16:19:59.120

我敢打赌我的数学比你差，但幸运的是我擅长谷歌搜索。

[http://andrew.hedges.name/experiments/aspect_ratio/](http://andrew.hedges.name/experiments/aspect_ratio/)

原始高度 / 原始宽度 x 新宽度 = 新高度

# facebook-apps - Application unavailable for non-developer

> ID：13648913
> 
> 赞同：0
> 
> 时间：2012-11-30T16:15:37.723
> 
> 标签：facebook-apps

My application is now finished, so to put it online I disabled 'sandbox mode' in application's page. But it's not working, if i'm logged as developer i can run the application, else i get a 404 error... Facebook told me it could take several minutes, but i disabled 'sandbox mode' at 11am !! Does Facebook need to validate my app?

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-01T10:47:18.597

I found the solution : we can't use header('location:xxx.php') for asking app authorization, (because $loginUrl is null) it must be like this :

```
try {
    // On récupère l'UID de l'utilisateur Facebook courant
    // On récupère les infos de base de l'utilisateur
    $me = $fb->api('/me');
} catch (FacebookApiException $e) {

    // S'il y'a un problème lors de la récup, perte de session entre temps, suppression des autorisations...

    // On récupère l'URL sur laquelle on devra rediriger l'utilisateur pour le réidentifier sur l'application
    $loginUrl = $fb->getLoginUrl(
        array(
            'canvas'    => 1,
            'fbconnect' => 0,
            'redirect_uri' => 'http://www.facebook.com/pages/Point-dEncre-France-Page-officielle/178099798924693'
        )
    );
    // On le redirige en JS (header PHP pas possible)
    echo ("<script>top.location.href='".$loginUrl."'</script>"); 
```

**BUT to redirect users into the canvas app** i must use

```
header('location:xxx.php') 
```

and not

```
<script>top.location.href="xxxx"</script> 
```

otherwise FB redirect the user out of the canvas view.

And another tip : if you store the 'user id' into a db use a 'big int' column and not a 'int' column like i did!

Hope it will help people

# objective-c - iOS - 移除成就

> ID：13648914
> 
> 赞同：0
> 
> 时间：2012-11-30T16:15:38.447
> 
> 标签：objective-c, ios, game-center, achievements

我已经开始在我的应用程序中使用 Game Center，但是在测试成就时，我注意到我不知道如何删除/重置它们。我还尝试在游戏中心（在模拟器上）在应用程序上滑动并删除它。但是当我再次玩我的应用程序时，我之前解锁的成就仍然存在。

有办法重置/删除它们吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T16:25:38.830

没关系。我找到了“resetAchievementsWithCompletionHandler”方法。不知道我以前是怎么错过的。

# perl - 使用 shell 命令进出 perl 脚本的不同结果

> ID：13648917
> 
> 赞同：3
> 
> 时间：2012-11-30T16:15:46.140
> 
> 标签：perl, ssh

我有一个 perl 脚本需要检查远程机器上的空目录。使用 ksh 我可以获得以下 shell 脚本：

```
ksh# ssh user@host '[ "$(ls -A /empty/dir/* 2>/dev/null)" ] && echo "1" || echo "0"' 
```

如果目录为空或不存在，这将正确返回“0”。仅当目录包含某些内容时，它才会返回“1”。

当我将这一行放在 perl 脚本中时，如下所示：

```
#!/usr/bin/perl
print `ssh user\@host '[ "$(ls -A /empty/dir/* 2>/dev/null)" ] && echo "1" || echo "0"'` 
```

无论我放什么，它都会返回一个“1”，空目录与否。我检查了与普通 shell 和 perl 脚本相比的 env 值，它们是相同的。

有谁知道为什么这个命令只会在 perl 脚本中返回不同的结果？

两台机器都是 AIX 6.1，使用 KSH 作为默认 shell。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T16:21:43.820

反引号内的文本在传递给操作系统之前被插入，就好像它在双引号内一样。跑

```
print qq`ssh user\@host '[ "$(ls -A /empty/dir/* 2>/dev/null)" ] && echo "1" || echo "0"'` 
```

确切地查看传递给操作系统的字符串。我敢打赌你至少得逃离`$`.

一种更安全、更明智的方法是先构建您的命令，然后在反引号中运行它：

```
# q{...} does no interpolation
my $cmd = q{ssh user\@host '[ "$(ls -A /empty/dir/* 2>/dev/null)" ] && echo "1" || echo "0"'};
print `$cmd`; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T16:33:07.713

```
use Net::SFTP::Foreign;

my $s = Net::SFTP::Foreign->new('user@host');
my $empty = 1;
if (my $d = $s->opendir('/empty/dir')) {
  if (defined $s->readdir($d)) {
    $empty = 0
  }
} 
```

# android - Android - 如何从 .net 网站解析 RSS Feed？

> ID：13648921
> 
> 赞同：1
> 
> 时间：2012-11-30T16:15:51.867
> 
> 标签：android, rss, dotnetnuke, jsoup

我正在使用这种方法从 URL 读取 RSS 提要。一切正常，除了无法从 .net 网络服务器（例如[http://www.dotnetnuke.com/Resources/Blogs/rssid/99.aspx](http://www.dotnetnuke.com/Resources/Blogs/rssid/99.aspx)）获取提要。

```
public String getRSSLinkFromURL(String url) {
// RSS url
    String rss_url = null;

    try {
    // Using JSoup library to parse the html source code
    org.jsoup.nodes.Document doc = Jsoup.connect(url).get();
    // finding rss links which are having link[type=application/rss+xml]
    org.jsoup.select.Elements links = doc.select("link[type=application/rss+xml]");

    Log.d("No of RSS links found", " " + links.size());

    // check if urls found or not
    if (links.size() > 0) {
        rss_url = links.get(0).attr("href").toString();
    } else {
        // finding rss links which are having link[type=application/rss+xml]
        org.jsoup.select.Elements links1 = doc.select("link[type=application/atom+xml]");
        if(links1.size() > 0){
            rss_url = links1.get(0).attr("href").toString();    
        }
    }

    } catch (IOException e) {
    e.printStackTrace();
    }

    // returing RSS url
    return rss_url;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T18:37:10.520

您的 RSS 提要已损坏：**传输已关闭，剩余未完成的读取数据**。

> curl 将在套接字在读取大块传输的最终终止块之前关闭时返回该消息。对我来说，这听起来确实像是一个服务器错误。

来源：[回复：传输已关闭，剩余未完成的读取数据与预期：100-继续][1]

JSoup 的修复（解决方法）在这里：

[https://github.com/jhy/jsoup/pull/323](https://github.com/jhy/jsoup/pull/323)

# java - 如何在一个 jar 中分发包含 jython 代码的 java 包？

> ID：13648926
> 
> 赞同：3
> 
> 时间：2012-11-30T16:16:14.590
> 
> 标签：java, python, distribution, jython

我正在开发几个 java 包，然后作为 jar 文件分发。由于一些新的需求，我现在必须在 jython 中编写几个新功能；这些可能会涵盖分布在许多单独的 jython 文件中的大量代码。

我想继续为每个包分发一个 jar 文件。我进行了一些搜索，为我提供了两种方法，不幸的是它们都不是很好：

1) jythonc：我使用的是 jython 2.5.1，所以 jythonc 不再是发行版的一部分。此外，我不喜欢这会对我的 jython 代码施加的限制。

2) 将所有内容与 jython.jar 文件一起打包。不幸的是，这是不可能的；所有使用我的代码包的人在他们的环境中都已经有了一个 jython.jar 文件（其中许多人使用不同的版本）。换句话说，我的包必须在没有python核心的情况下分发；相反，我可以依赖它在目标系统的类路径中找到。

现在问题仍然存在，是否有另一种方法可以将我的所有 java 和 jython 代码打包在一个 jar 中，同时保持 jython.jar 文件不变？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T14:52:54.507

我终于找到了解决我的问题的方法。也许这对其他人也很感兴趣。提醒一下，这适用于顶部带有 java 的混合 java/jython 包，然后将交付给客户，而不是独立的应用程序。

1) 使用“jar”工具（或任何其他 zip 工具）将所有 jython 源文件放在 jar 文件顶层的单独文件夹中；我使用了文件夹“Lib”。

2) 从 java 访问 jython 代码是使用建模为单例的对象工厂类完成的（类似于[这里](http://www.jython.org/jythonbook/en/1.0/JythonAndJavaIntegration.html#more-efficient-version-of-loosely-coupled-object-factory)描述的）；从 jython 访问 java 可以直接使用完整的包名。

3）在我使用的对象工厂的构造函数中

> `String jarPath = myObjectFactory.class.getProtectionDomain().getCodeSource().getLocation() .getPath();`

从代码中确定 jar 文件的位置。

4）我将jar文件中的“Lib”文件夹添加到jython模块查找路径中

> `PySystemState newState = new PySystemState(); newState.path.insert(0,Py.newString(jarPath + java.io.File.separator + "Lib")); Py.setSystemState(newState);`

只要 jython.jar 文件包含在类路径中，这将起作用。

# c - 服务器无法接受来自多个客户端的消息？

> ID：13648936
> 
> 赞同：0
> 
> 时间：2012-11-30T16:16:39.287
> 
> 标签：c, sockets

两个客户端能够连接到服务器，但它只接受和显示第一个客户端的输入流消息，而不是第二个客户端，尽管另一个客户端也已连接。

以下是我接受流的代码，我尝试关闭每个领带的套接字，但没有成功。

```
int main(int argc,char *argv[])
{
fd_set ready;
struct sockaddr_in msgfrom;
int msgsize;
union {
    uint32_t addr;
    char bytes[4];
} fromaddr;

if ((progname = rindex(argv[0], '/')) == NULL)
    progname = argv[0];
else
    progname++;
while ((ch = getopt(argc, argv, "adsp:h:")) != -1)
    switch(ch) {
        case 'a':
            aflg++;     /* print address in output */
            break;
        case 'd':
            soctype = SOCK_DGRAM;
            break;
        case 's':
            server = 1;
            break;
        case 'p':
            port = optarg;
            break;
        case 'h':
            host = optarg;
            break;
        case '?':
        default:
            usage();
    }
argc -= optind;
if (argc != 0)
    usage();
if (!server && (host == NULL || port == NULL))
    usage();
if (server && host != NULL)
    usage();
/*
 * Create socket on local host.
 */
if ((s = socket(AF_INET, soctype, 0)) < 0) {
    perror("socket");
    exit(1);
}
sock = setup_server();  
while (!done) {
    FD_ZERO(&ready);
    FD_SET(sock, &ready);
    FD_SET(fileno(stdin), &ready);
    if (select((sock + 1), &ready, 0, 0, 0) < 0) {
        perror("select");
        exit(1);
    }
    if (FD_ISSET(fileno(stdin), &ready)) {
        if ((bytes = read(fileno(stdin), buf, BUF_LEN)) <= 0)
            done++;
        send(sock, buf, bytes, 0);
    }
    msgsize = sizeof(msgfrom);
    if (FD_ISSET(sock, &ready)) {
        if ((bytes = recvfrom(sock, buf, BUF_LEN, 0, (struct sockaddr *)&msgfrom, &msgsize)) <= 0) {
            done++;
        } else if (aflg) {
            fromaddr.addr = ntohl(msgfrom.sin_addr.s_addr);
            fprintf(stderr, "%d.%d.%d.%d: ", 0xff & (unsigned int)fromaddr.bytes[0],
                0xff & (unsigned int)fromaddr.bytes[1],
                0xff & (unsigned int)fromaddr.bytes[2],
                0xff & (unsigned int)fromaddr.bytes[3]);
        }
        write(fileno(stdout), buf, bytes);
    }
} 
```

这是我设置服务器的代码，供参考：

```
int setup_server() {
struct sockaddr_in serv, remote;
struct servent *se;
int newsock, len;

len = sizeof(remote);
memset((void *)&serv, 0, sizeof(serv));
serv.sin_family = AF_INET;
if (port == NULL)
    serv.sin_port = htons(9990);
else if (isdigit(*port))
    serv.sin_port = htons(atoi(port));
if (bind(s, (struct sockaddr *)&serv, sizeof(serv)) < 0) {
    perror("bind");
    exit(1);
}
if (getsockname(s, (struct sockaddr *) &remote, &len) < 0) {
    perror("getsockname");
    exit(1);
}
fprintf(stderr, "Port number is %d\n", ntohs(remote.sin_port));
listen(s, 1);
newsock = s;
if (soctype == SOCK_STREAM) {
    fprintf(stderr, "Entering accept() waiting for connection.\n");
    newsock = accept(s, (struct sockaddr *) &remote, &len);
}
return(newsock);
} 
```

客户端代码：

```
sock = setup_client();
/*
 * Set up select(2) on both socket and terminal, anything that comes
 * in on socket goes to terminal, anything that gets typed on terminal
 * goes out socket...
 */
while (!done) {
    FD_ZERO(&ready);
    FD_SET(sock, &ready);
    FD_SET(fileno(stdin), &ready);
    if (select((sock + 1), &ready, 0, 0, 0) < 0) {
        perror("select");
        exit(1);
    }
    if (FD_ISSET(fileno(stdin), &ready)) {
        if ((bytes = read(fileno(stdin), buf, BUF_LEN)) <= 0)
            done++;
        send(sock, buf, bytes, 0);
    }
    msgsize = sizeof(msgfrom);
    if (FD_ISSET(sock, &ready)) {
        if ((bytes = recvfrom(sock, buf, BUF_LEN, 0, (struct sockaddr *)&msgfrom, &msgsize)) <= 0) {
            done++;
        } else if (aflg) {
            fromaddr.addr = ntohl(msgfrom.sin_addr.s_addr);
            fprintf(stderr, "%d.%d.%d.%d: ", 0xff & (unsigned int)fromaddr.bytes[0],    0xff & (unsigned int)fromaddr.bytes[1],
                0xff & (unsigned int)fromaddr.bytes[2],
                0xff & (unsigned int)fromaddr.bytes[3]);
        }
        write(fileno(stdout), buf, bytes);
    }
    //close(sock);
}
return(0);
}

/*
 * setup_client() - set up socket for the mode of soc running as a
 *      client connecting to a port on a remote machine.
 */

int setup_client() {

struct hostent *hp, *gethostbyname();
struct sockaddr_in serv;
struct servent *se;

/*
 * Look up name of remote machine, getting its address.
 */
if ((hp = gethostbyname(host)) == NULL) {
    fprintf(stderr, "%s: %s unknown host\n", progname, host);
    exit(1);
}
/*
 * Set up the information needed for the socket to be bound to a socket on
 * a remote host.  Needs address family to use, the address of the remote
 * host (obtained above), and the port on the remote host to connect to.
 */
serv.sin_family = AF_INET;
memcpy(&serv.sin_addr, hp->h_addr, hp->h_length);
if (isdigit(*port))
    serv.sin_port = htons(atoi(port));
else {
    if ((se = getservbyname(port, (char *)NULL)) < (struct servent *) 0) {
        perror(port);
        exit(1);
    }
    serv.sin_port = se->s_port;
}
/*
 * Try to connect the sockets...
 */ 
if (connect(s, (struct sockaddr *) &serv, sizeof(serv)) < 0) {
    perror("connect");
    exit(1);
} else
    fprintf(stderr, "Connected...\n");
return(s);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T20:58:02.993

UDP 没问题，你可以像你已经做的那样 recvfrom() 。

TCP 是不同的，但你几乎就在那里：你需要为你希望处理的**每个**连接调用 accept()，即你将 select() 保存在循环中的服务器套接字，并根据需要调用 accept() 以获取一个新的套接字，处理它并在最后关闭（）它。

在客户端，您似乎已连接，因为您在服务器的待处理连接队列中 - 请参阅 listen(2) 联机帮助页。

# java - JPanel 的文本问题

> ID：13648942
> 
> 赞同：1
> 
> 时间：2012-11-30T16:17:05.687
> 
> 标签：java, swing, jpanel, java.util.scanner, event-dispatching

在认为我正在解决使文本（从文件中读取）出现在 JPanel 中的问题之后，我沮丧地回到了原点。

代码如下。结果只是一个空白屏幕 400x500 屏幕。使用 nextLine() + nextLine() 作为 displayText 命令的某些组合会导致文件中出现一个单词（该单词多次不同）。这让我想知道：我需要处理文本换行的代码吗？文本文件本身是分段的，因此，我认为 sf.displayText 应该说 sf.displayText(reader.next() + reader.nextline() + reader.nextline()，并尝试了其他组合，但这可能混淆while参数。还尝试了一个带有简单句子的不同文本文件，没有段落，但同样，什么也没有出现。

在网上查看后，我发现布局可能是一个问题，替代选项可能是 BufferedReader 或使用 JTextArea。浏览 Big Java 并没有提供任何我觉得可以接受的东西，因为关于扫描仪的所有讨论都针对整数，而我想要阅读的文件是散文。我还尝试在代码本身中放入一小段文本并取消其下方的所有其他内容，以查看是否可以将文本从代码传输到 JPanel：

```
StoryFrame sf = new StoryFrame();
sf.displayText("Life is beautiful"); 
```

但仍然没有任何结果。最终，我想将文件中的文本放入 JPanel，并让每个段落在前一个段落之后 5 秒出现。所以最终，我的问题是：

*   为什么我的文字无法显示，或只显示一个字？是因为我没有指定布局吗？
*   我需要考虑文字换行吗？
*   我应该查看 JTextArea 而不是 JPanel，而使用 BufferedReader 而不是 Scanner？
*   我是否正确使用了 Scanner 中的 nextLine 方法？
*   我可以输入一个命令来读取文件并在 StoryFrame 的显示方法中显示该文件的文本（我认为这会使事情变得更容易）吗？

我知道很多，所以任何问题的任何答案都将不胜感激，谢谢。汤姆

```
import javax.swing.JFrame;
import javax.swing.JLabel;

public class StoryFrame extends JFrame {

private JLabel mylabel;
public StoryFrame() {

    setTitle("見張ってしながら...");
    setSize(400,500);
    setDefaultCloseOperation(EXIT_ON_CLOSE);
    setLocationRelativeTo(null);
    mylabel = new JLabel();
    this.add(mylabel);
    setVisible(true);
}

public void displayText(String text) {
    JLabel storyText = new JLabel();
    add(storyText);
}

} 
```

## 演出介绍

```
import java.util.Scanner;
import java.io.File;
import java.io.IOException;

class ShowIntro {
 public static void main(String args[]) 
        throws IOException {

StoryFrame sf = new StoryFrame();
Scanner reader = new Scanner(new File("Try.txt"));

while (reader.hasNextLine()) {
    //String line = in.nextLine() Not sure whether this would contribute, I doubt it does though
    sf.displayText(reader.next()); 
            //sf.displayText(reader.next() + reader.nextLine() + reader.nextLine()); was also attempted.

    try {
        Thread.sleep(5000);
    } catch (InterruptedException e) {          }
}

 }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T16:21:29.090

它失败了，因为您从不调用方法来使用 displaytext 方法中的文本

```
public void displayText(String text) {
    mylabel.setText(text);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T16:32:31.343

您还一次阅读一个单词的文件：

```
 sf.displayText(reader.next()); 
```

应该：

```
 sf.displayText(reader.nextLine()); 
```

如果你想读到下一个换行符。

* * *

尽管这不是在原始问题中满足以下一些评论，但这里是该程序的修改版本

```
package com.vincentramdhanie.kitchensink;

import java.io.File;
import java.io.IOException;
import java.util.Scanner;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JTextArea;

public class StoryFrame extends JFrame {

    private JTextArea area;
    public StoryFrame() {

        setTitle("見張ってしながら...");
        setSize(400,500);
        setDefaultCloseOperation(EXIT_ON_CLOSE);
        setLocationRelativeTo(null);
        area = new JTextArea(10, 30);
        area.setEditable(false); 
        area.setCursor(null); 
        area.setOpaque(false); 
        area.setFocusable(false);
        this.add(area);
        setVisible(true);
    }

    public void displayText(String text) {
        area.setText(text);
    }

    public static void main(String args[]) 
        throws IOException {

        StoryFrame sf = new StoryFrame();
        Scanner reader = new Scanner(new File("Try.txt"));

        while (reader.hasNextLine()) {                
             String line = reader.nextLine();
             sf.displayText(line); 
             try {
                //to skip blank lines. If the line has no non-space characters then do not sleep
               if(!line.trim().equals("")){
                  Thread.sleep(5000);
               }
             } catch (InterruptedException e) {          }
        }
     }
} 
```

# imagemagick - 在 Imagemagick 中屏蔽图像的 alpha

> ID：13648943
> 
> 赞同：2
> 
> 时间：2012-11-30T16:17:09.413
> 
> 标签：imagemagick, imagemagick-convert

我需要创建一个图像用作翻转背景图像。它是一个圆形图案，被分成 8 块。这是主图像的屏幕截图（具有透明度的 png）：

![主图](../Images/06afa6ffe3d4b4fc12bddf14a736128f.png)

这是面具图像的屏幕截图。它与主图像大小相同，并具有“馅饼”部分，以掩盖除被悬停的扇区之外的所有部分。

![蒙面图像](../Images/735f959a959aa59c6f84f7a2588b4cd8.png)

我包括屏幕截图，因为我相信答案应该很简单（当你知道它们时，不是所有的答案都简单吗？！）所以我会节省带宽，但如果有帮助，我可以上传原始文件。

这是我用来创建新蒙版图像的命令：

```
convert main.png \( mask.png -colorspace gray -alpha off \) \
-compose copy-opacity -composite new.png 
```

问题是创建的新图像已将原始图像的 alpha 展平为黑色背景：

![新图片](../Images/63470cc517f234571ca521e9f8ca0b8f.png)

如何让 Imagemagick 保留原始 png 的透明度？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-03-14T23:40:07.697

您需要蒙面合成来执行此操作。 [http://imagemagick.org/Usage/compose/#mask](http://imagemagick.org/Usage/compose/#mask)

该技术是将原始图像（src）合成到相同大小的完全透明图像（dst）上，使用蒙版来限制合成区域（蒙版）。它是`-composite`运算符的一种特殊情况，涉及 3 张图像，而不是像其他 compose 方法那样使用 2 张图像。您没有`-compose`为此指定任何模式。

获得此技术所需的完全透明 dst 的一种快速方法是克隆 src 图像并将其 alpha 通道清零，然后交换 src 和 dst 的顺序，以便它们处于正确的顺序以进行`-composite`操作：

```
convert main.png -alpha on \( +clone -channel a -fx 0 \) +swap mask.png -composite out.png 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-21T03:44:14.233

[我对retroj 的解决方案](https://stackoverflow.com/a/22417663/2334951)不满意，因为它似乎忽略了蒙版的灰度。

这个对我有用：

```
composite -compose Dst_In \( mask.png -alpha copy \) main.png -alpha Set PNG32:result.png 
```

或者

```
convert -compose Dst_In \( mask.png -alpha copy \) main.png -alpha Set -composite PNG32:result.png 
```

[`Dst_In`](http://imagemagick.org/Usage/compose/#dstin)方法将两个图像的 alpha 通道相乘。这里的诀窍是将灰度蒙版转换为 alpha 通道，这是用[`-alpha copy`](http://www.imagemagick.org/Usage/masking/#alpha_copy).

# javascript - 使用 UIWebView 从本地资源运行 javascript

> ID：13648945
> 
> 赞同：1
> 
> 时间：2012-11-30T16:17:12.597
> 
> 标签：javascript, ios, uiwebview

我有一个简单的问题。我有两个文件。有`.html`和`.js`文件。我需要将`.js`文件与我的 html 内容一起使用。

现在我刚刚添加了从资源加载 html 的方法，但我还没有找到如何将 .js 集成到我的`UIWebView`。

这是我加载html的代码

```
[self.theWebView loadRequest:[NSURLRequest requestWithURL:[NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:@"test" ofType:@"html"]]]]; 
```

我知道`stringByEvaluatingJavaScriptFromString`方法，但我认为它适用于具体的功能，但在我的情况下，我有很多功能的文件，我需要加载所有功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T16:31:14.740

这是一个非常简单的问题，或者我不明白你，但你可以使用这样的简单`<script>`标签将 Javascript 代码添加到 HTML：

```
<script type="text/javascript" src="MY_JAVASCRIPT_FILE.js"></script> 
```

替换`"MY_JAVASCRIPT_FILE.js"`为您的 Javascript 文件相对于 HTML 文件的路径。（如果它们在同一个目录中，则不需要路径，只需写文件名即可）。

如果这不是您问题的答案，请告诉我。谢谢。

# c++ - 非 pod 类型的布局（因为有默认构造函数）

> ID：13648949
> 
> 赞同：0
> 
> 时间：2012-11-30T16:17:30.333
> 
> 标签：c++

```
struct vec3{
vec3(){x=y=z=0.0f;};
float x,y,z;
};

vec3 array[10];
char buffer[100];
memcpy(buffer, array, sizeof(array));
memcpy(array, buffer, sizeof(array)); 
```

**struct Vec3**不是普通旧数据类型（**POD**类型）。这段代码是否正确和/或是否存在一些关于 C++2003 中内存布局的保证？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T16:34:22.283

不在 C++03 中，但在 C++11 中这很好。

他们引入了一个名为*standard-layout*的概念，这确实是 POD 应该有的。我不会进入标准语言，但新类别是认识到您的类实际上只是一个具有新初始化方式的 POD；布局仍然相同，因此名称为“标准布局”。

所以大多数（全部？）过去只是 POD 的东西现在只是标准布局，所以你很高兴。

实际上，这在 C++03 编译器中运行良好；您可以将其视为它们以某种方式支持 C++11。

# c++ - Visual Studio 2008 发布版本不装饰 DLL 导出

> ID：13648951
> 
> 赞同：1
> 
> 时间：2012-11-30T16:17:39.927
> 
> 标签：c++, visual-studio-2008, dll, dllexport

我正在 Visual Studio 2008 中构建一个 C++ DLL，供用 Borland C++ Builder 6 编写的 C 应用程序使用。

我的调试 DLL 构建导出用下划线装饰的方法。然而，在我发布的 DLL 构建中，这些方法没有被修饰，导致 C++ Builder 中的链接器错误。（有关两种构建类型的 dumpbin.exe 的输出，请参见下文）

我检查了调试和发布配置的编译器选项，看不到任何可能导致此问题的东西。

我已经设法解决了这个问题。Borland 工具 implib 将 Visual Studio .lib 文件转换为 C++ Builder .lib 文件，可以添加下划线。但我想了解为什么出口没有被装饰。

**头文件methods.h**

```
#ifndef METHODS_H
#define METHODS_H

#ifdef ENCRYPTION_EXPORTS
#define DLLEXPORT __declspec(dllexport)
#else
#define DLLEXPORT __declspec(dllimport)
#endif

#ifdef __cplusplus
extern "C"
{
#endif

DLLEXPORT BOOL EncryptString(char *szPlain, char *szEncrypted);
DLLEXPORT BOOL DecryptString(char *szEncrypted, char *szPlain);
DLLEXPORT BOOL EncryptInitialise(void);
DLLEXPORT void EncryptExit(void);

#ifdef __cplusplus
}
#endif

#endif 
```

**用于调试构建的 Dumpbin.exe 输出**

> dumpbin /EXPORTS 加密.dll

```
Microsoft (R) COFF/PE Dumper Version 9.00.30729.01
Copyright (C) Microsoft Corporation.  All rights reserved.

Dump of file encryption.dll

File Type: DLL

  Section contains the following exports for encryption.dll

    00000000 characteristics
    50B8B22E time date stamp Fri Nov 30 13:18:38 2012
        0.00 version
           1 ordinal base
           4 number of functions
           4 number of names

    ordinal hint RVA      name

          1    0 000308F7 DecryptString = @ILT+2290(_DecryptString)
          2    1 00031635 EncryptExit = @ILT+5680(_EncryptExit)
          3    2 000303CF EncryptInitialise = @ILT+970(_EncryptInitialise)
          4    3 0003003C EncryptString = @ILT+55(_EncryptString)

  Summary

        5000 .data
        1000 .idata
       13000 .rdata
        5000 .reloc
        1000 .rsrc
       64000 .text
       2F000 .textbss 
```

**发布版本的 Dumpbin.exe 输出**

> dumpbin /EXPORTS 加密.dll

```
Microsoft (R) COFF/PE Dumper Version 9.00.30729.01
Copyright (C) Microsoft Corporation.  All rights reserved.

Dump of file encryption.dll

File Type: DLL

  Section contains the following exports for encryption.dll

    00000000 characteristics
    50B8BE14 time date stamp Fri Nov 30 14:09:24 2012
        0.00 version
           1 ordinal base
           4 number of functions
           4 number of names

    ordinal hint RVA      name

          1    0 00001A10 DecryptString
          2    1 000012C0 EncryptExit
          3    2 00001370 EncryptInitialise
          4    3 00001820 EncryptString

  Summary

        4000 .data
        4000 .rdata
        2000 .reloc
        1000 .rsrc
        F000 .text 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T16:37:02.863

这是一篇关于[调用约定和名称装饰](http://unixwiz.net/techtips/win32-callconv.html)的文章。名称装饰可能会被项目中的 *.def 文件否决。

# openx - 我可以通过 xampp 1.6.8 在 Windows 7 中设置 openx api（开源广告服务）吗

> ID：13648953
> 
> 赞同：0
> 
> 时间：2012-11-30T16:17:45.980
> 
> 标签：openx

我想通过 xampp 1.6.8 在 Windows 7 上使用 Openx 和 api。在 Windows 上找不到设置和使用 openx api 的教程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T11:23:05.533

为此，您需要安装 XML-RPC2 客户端库，然后使用它来访问远程 OpenX 服务器 API。

您可以访问 OpenX 服务器吗？如果是这样，并且如果您更喜欢使用 REST，那么您可以在服务器中安装此 REST API（由我开发）：

[http://openxrest.com](http://openxrest.com)

# dns - 无法解析虚拟机上的主机“bucket.s3.amazonaws.com”

> ID：13648956
> 
> 赞同：0
> 
> 时间：2012-11-30T16:17:52.110
> 
> 标签：dns, amazon-s3, amazon-web-services, virtual-machine, vagrant

从 S3 提供静态 pdf。在 AWS 上有一个生产环境，在我的本地 Vagrant 虚拟机上有一个开发环境。直到今天一切正常。

当我尝试从我的 Vagrant 开发环境访问 S3 文件时，我得到

> 无法解析主机“bucket.s3.amazonaws.com”

我仍然可以在我的 AWS 生产环境中正常访问这些文件。访问代码完全相同。

其他可能相关或不相关的注释

1.  今天早上重置了虚拟机。从那以后它就没有工作了。
2.  我试图刷新 DNS -> ipconfig /flushdns
3.  我已清除浏览器缓存

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T19:19:05.800

“虚拟机已重置”是什么意思？当我忘记将虚拟机置于挂起状态然后更改主机上的网络时，我遇到了问题。在那之后我将无法解决任何问题。为了解决这个问题，我只是做了一个`vagrant suspend && vagrant up`让它刷新它的网络。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-08T17:17:23.243

当我尝试在 openstack 上使用 vagrant 获取 S3 文件时遇到了类似的问题，通过在我的 openstack 子网上配置 DNS 解决了这个问题。（这意味着 DNS 问题与 vagrant vm 配置无关，它与 openstack 配置有关，您可以通过运行：cat /etc/resolv.conf from your vagrant vm 来验证它）

# php - 如何设置 PHPExcel 来编写文件并使用网格线？

> ID：13648959
> 
> 赞同：4
> 
> 时间：2012-11-30T16:17:54.950
> 
> 标签：php, phpexcel

我正在尝试为 PHPExcel 中的 excel 文件设置打印选项。我正在使用打包的 API 文档（版本 1.7.7），但找不到任何方法来执行此操作。我在某处缺少设置吗？

此设置可在 MS Excel 中的 Print > Page Setup > Sheet 下找到。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-30T16:30:15.117

```
$objPHPExcel->getActiveSheet()->setPrintGridlines(TRUE); 
```

**编辑**

setPrintGridlines() 确定从 MS Excel 打印工作表时是否应显示单元格周围的网格线；默认为假。setShowGridlines() 确定在 MS EXcel GUI 中显示电子表格时是否应显示单元格周围的网格线；默认为真；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T16:30:24.303

我找到了我要找的那个。它在 Worksheet 类下，而不是我之前认为的页面设置类。对于任何展望未来的人，这是您需要的方法：

```
PHPExcel_Worksheet setPrintGridlines( [boolean $pValue = false]) 
```

但是有两个函数非常相似：setPrintGridlines 和 setShowGridlines。我不太确定有什么区别。任何人都可以启发我吗？

# web-services - *.jaxws 包不是用 cxf 下的 java2ws 生成的

> ID：13648962
> 
> 赞同：0
> 
> 时间：2012-11-30T16:18:04.873
> 
> 标签：web-services, maven, cxf, java2wsdl

我尝试使用 cxf maven 插件从 java first 策略生成 wsdl，它编译、构建良好但只生成 wsdl 而不是应该使用包 *.jaxws 创建的包装器 bean。因此，当使用 weblogic ( 10.0 ) 进行部署时，它会抛出：

```
class: com.edf.ftn.ws.jaxws.GetIban could not be found
    at com.sun.xml.ws.model.RuntimeModeler.getClass(RuntimeModeler.java:272)
    at com.sun.xml.ws.model.RuntimeModeler.processDocWrappedMethod(RuntimeModeler.java:566)
    at com.sun.xml.ws.model.RuntimeModeler.processMethod(RuntimeModeler.java:513)
    at com.sun.xml.ws.model.RuntimeModeler.processClass(RuntimeModeler.java:358)
    at com.sun.xml.ws.model.RuntimeModeler.buildRuntimeModel(RuntimeModeler.java:245)
    at com.sun.xml.ws.server.EndpointFactory.createSEIModel(EndpointFactory.java:229)
    at com.sun.xml.ws.server.EndpointFactory.createEndpoint(EndpointFactory.java:161)
    at com.sun.xml.ws.api.server.WSEndpoint.create(WSEndpoint.java:291)
    at com.sun.xml.ws.api.server.WSEndpoint.create(WSEndpoint.java:315)
    at weblogic.wsee.jaxws.JAXWSServlet.registerEndpoint(JAXWSServlet.java:125)
    at weblogic.wsee.jaxws.JAXWSServlet.init(JAXWSServlet.java:64)
    at javax.servlet.GenericServlet.init(GenericServlet.java:241)
    at weblogic.servlet.internal.StubSecurityHelper$ServletInitAction.run(StubSecurityHelper.java:282)
    at weblogic.security.acl.internal.AuthenticatedSubject.doAs(AuthenticatedSubject.java:321)
    at weblogic.security.service.SecurityManager.runAs(Unknown Source)
    at weblogic.servlet.internal.StubSecurityHelper.createServlet(StubSecurityHelper.java:63)
    at weblogic.servlet.internal.StubLifecycleHelper.createOneInstance(StubLifecycleHelper.java:58)
    at weblogic.servlet.internal.StubLifecycleHelper.<init>(StubLifecycleHelper.java:48)
    at weblogic.servlet.internal.ServletStubImpl.prepareServlet(ServletStubImpl.java:507)
    at weblogic.servlet.internal.WebAppServletContext.preloadServlet(WebAppServletContext.java:1853)
    at weblogic.servlet.internal.WebAppServletContext.loadServletsOnStartup(WebAppServletContext.java:1830)
    at weblogic.servlet.internal.WebAppServletContext.preloadResources(WebAppServletContext.java:1750)
    at weblogic.servlet.internal.WebAppServletContext.start(WebAppServletContext.java:2918)
    at weblogic.servlet.internal.WebAppModule.startContexts(WebAppModule.java:973)
    at weblogic.servlet.internal.WebAppModule.start(WebAppModule.java:361)
    at weblogic.application.internal.flow.ModuleStateDriver$3.next(ModuleStateDriver.java:204)
    at weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:26)
    at weblogic.application.internal.flow.ModuleStateDriver.start(ModuleStateDriver.java:60)
    at weblogic.application.internal.flow.ScopedModuleDriver.start(ScopedModuleDriver.java:200)
    at weblogic.application.internal.flow.ModuleListenerInvoker.start(ModuleListenerInvoker.java:117)
    at weblogic.application.internal.flow.ModuleStateDriver$3.next(ModuleStateDriver.java:204)
    at weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:26)
    at weblogic.application.internal.flow.ModuleStateDriver.start(ModuleStateDriver.java:60)
    at weblogic.application.internal.flow.StartModulesFlow.activate(StartModulesFlow.java:27)
    at weblogic.application.internal.BaseDeployment$2.next(BaseDeployment.java:635)
    at weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:26)
    at weblogic.application.internal.BaseDeployment.activate(BaseDeployment.java:212)
    at weblogic.application.internal.DeploymentStateChecker.activate(DeploymentStateChecker.java:154)
    at weblogic.deploy.internal.targetserver.AppContainerInvoker.activate(AppContainerInvoker.java:80)
    at weblogic.deploy.internal.targetserver.operations.AbstractOperation.activate(AbstractOperation.java:566)
    at weblogic.deploy.internal.targetserver.operations.ActivateOperation.activateDeployment(ActivateOperation.java:136)
    at weblogic.deploy.internal.targetserver.operations.ActivateOperation.doCommit(ActivateOperation.java:104)
    at weblogic.deploy.internal.targetserver.operations.AbstractOperation.commit(AbstractOperation.java:320)
    at weblogic.deploy.internal.targetserver.DeploymentManager.handleDeploymentCommit(DeploymentManager.java:816)
    at weblogic.deploy.internal.targetserver.DeploymentManager.activateDeploymentList(DeploymentManager.java:1223)
    at weblogic.deploy.internal.targetserver.DeploymentManager.handleCommit(DeploymentManager.java:434)
    at weblogic.deploy.internal.targetserver.DeploymentServiceDispatcher.commit(DeploymentServiceDispatcher.java:161)
    at weblogic.deploy.service.internal.targetserver.DeploymentReceiverCallbackDeliverer.doCommitCallback(DeploymentReceiverCallbackDeliverer.java:181)
    at weblogic.deploy.service.internal.targetserver.DeploymentReceiverCallbackDeliverer.access$100(DeploymentReceiverCallbackDeliverer.java:12)
    at weblogic.deploy.service.internal.targetserver.DeploymentReceiverCallbackDeliverer$2.run(DeploymentReceiverCallbackDeliverer.java:67)
    at weblogic.work.SelfTuningWorkManagerImpl$WorkAdapterImpl.run(SelfTuningWorkManagerImpl.java:464)
    at weblogic.work.ExecuteThread.execute(ExecuteThread.java:200)
    at weblogic.work.ExecuteThread.run(ExecuteThread.java:172) 
```

这是我的 pom.xml 配置：

```
 <plugin>
    <groupId>org.apache.cxf</groupId>
    <artifactId>cxf-java2ws-plugin</artifactId>
    <version>2.6.2</version>
    <dependencies>
        <dependency>
            <groupId>org.apache.cxf</groupId>
            <artifactId>cxf-rt-frontend-simple</artifactId>
            <version>${cxf.version}</version>
        </dependency>
        <dependency>
        <groupId>org.apache.cxf</groupId>
        <artifactId>cxf-rt-frontend-jaxws</artifactId>
        <version>${cxf.version}</version>
    </dependency>
    <dependency>
        <groupId>org.apache.cxf</groupId>
        <artifactId>cxf-rt-transports-http</artifactId>
        <version>${cxf.version}</version>
    </dependency>
        <!-- Jetty is needed if you're are not using the CXFServlet -->
    <dependency>
        <groupId>org.apache.cxf</groupId>
        <artifactId>cxf-rt-transports-http-jetty</artifactId>
        <version>${cxf.version}</version>
    </dependency>
    </dependencies>

    <executions>
        <execution>
            <id>process-classes</id>
            <phase>package</phase>
            <configuration>
                <className>com.edf.ftn.ws.InfosRibProducteurImpl</className>
                <genWrapperbean>true</genWrapperbean>
                <genServer>true</genServer>
            <outputFile>com.edf.ftn.ws.jaxws</outputFile>
            <classpath>com.edf.ftn.ws.jaxws</classpath>
                <genWsdl>true</genWsdl>
                <verbose>true</verbose>
            </configuration>
            <goals>
                <goal>java2ws</goal>
            </goals>
        </execution>
    </executions>
</plugin> 
```

这是我的网络服务接口类：

```
@WebService(name="InfosRibProducteurService")
@SOAPBinding(style = Style.DOCUMENT, use=Use.LITERAL,parameterStyle=ParameterStyle.WRAPPED)
@Policies({ @Policy( uri ="META-INF/policy/usernametoken.xml", placement=Policy.Placement.BINDING) } )
public interface InfosRibProducteur {

    @WebMethod 
    @WebResult(name = "responsegetIban")String getIban(@XmlElement(nillable = false, required = true) @WebParam(name = "fournisseur") final String pNumeroFournisseur);

    @WebMethod  
    @WebResult(name = "responseEditIban") ResponseRibDTO editIban(@XmlElement(nillable = false, required = true) @WebParam(name = "Fournisseur")final String pNumeroFournisseur, @XmlElement(nillable = false, required=true) @WebParam(name = "iban") final String pRib);

} 
```

任何帮助都将受到欢迎，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T16:48:07.300

尝试删除 outputFile 和 classpath 条目。在这种情况下可能不需要这些，并且可能会导致问题。它们也是错误的，因为 outputFile 应该是生成的 wsdl 文件的完整路径。喜欢：${basedir}/target/generated/wsdl/MyWsdl.wsdl

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-22T06:38:15.010

这对我有用。

```
<plugin>
    <groupId>org.apache.cxf</groupId>
    <artifactId>cxf-java2ws-plugin</artifactId>
    <version>${cxf.version}</version>
    <dependencies>
        <dependency>
            <groupId>org.apache.cxf</groupId>
            <artifactId>cxf-rt-frontend-jaxws</artifactId>
            <version>${cxf.version}</version>
        </dependency>
        <dependency>
            <groupId>org.apache.cxf</groupId>
            <artifactId>cxf-rt-frontend-simple</artifactId>
            <version>${cxf.version}</version>
        </dependency>
        <dependency>
            <groupId>org.apache.cxf</groupId>
            <artifactId>cxf-rt-transports-http</artifactId>
            <version>${cxf.version}</version>
            <type>jar</type>
        </dependency>
    </dependencies>

    <executions>
        <execution>
            <id>generate-wsdl</id>
            <phase>process-classes</phase>                              
            <goals>
                <goal>java2ws</goal>
            </goals>
            <configuration>
                <className>com.demo.helloworld</className>
                <outputFile>./WebContent/wsdl/helloworld.wsdl</outputFile>
                <argline>-createxsdimports</argline>
                <verbose>true</verbose>
                <frontend>jaxws</frontend>
                <databinding>jaxb</databinding>
                <genWsdl>true</genWsdl>
                <genWrapperbean>true</genWrapperbean>
                <soap12>false</soap12>
                <attachWsdl>true</attachWsdl>
            </configuration>                        
        </execution>
    </executions>
</plugin>
<plugin>
  <artifactId>maven-resources-plugin</artifactId>
  <version>3.0.2</version>
  <executions>
    <execution>
      <id>copy-resources</id>
      <phase>process-classes</phase>
      <goals>
        <goal>copy-resources</goal>
      </goals>
      <configuration>
        <outputDirectory>./target/classes/com/demo/jaxws</outputDirectory>
        <resources>
          <resource>
            <directory>./com/demo/jaxws</directory>
                <excludes>
                    <exclude>**/*.java</exclude>
                </excludes>
            <filtering>false</filtering>
          </resource>
        </resources>
      </configuration>
    </execution>
  </executions>
</plugin> 
```

# java - 休眠映射异常

> ID：13648963
> 
> 赞同：2
> 
> 时间：2012-11-30T16:18:07.353
> 
> 标签：java, hibernate, struts2, struts

我有 2 个实体类 ParameterGroupBean 和 GroupLevelBean

```
import javax.persistence.*;
import java.util.ArrayList;
import java.util.Collection;

@Entity
@Table(name="tbl_ParameterGroups")
public class ParameterGroupBean {

@Id
@GeneratedValue
private int ParameterGroupId;
private String ParameterGroupName;  
private Boolean Status;

@ManyToOne
@JoinColumn(name="LevelId")
private GroupLevelBean level = new GroupLevelBean();

public GroupLevelBean getLevel() {
    return level;
}

public void setLevel(GroupLevelBean level) {
    this.level = level;
}

@Id
@GeneratedValue
public int getParameterGroupId() {
    return ParameterGroupId;
}

public void setParameterGroupId(int parameterGroupId) {
    ParameterGroupId = parameterGroupId;
}

@Column(length=120) 
public String getParameterGroupName() {
    return ParameterGroupName;
}

public void setParameterGroupName(String parameterGroupName) {
    ParameterGroupName = parameterGroupName;
}

public Boolean getStatus() {
    return Status;
}

public void setStatus(Boolean Status) {
    this.Status = Status;
}
} 
```

GroupLevelBean：

```
import javax.persistence.*;
import java.util.ArrayList;
import java.util.Collection;

@Entity
@Table(name="tbl_GroupLevel")
public class GroupLevelBean {

private int LevelId;
private String LevelName;
@OneToMany(mappedBy = "level")
private Collection<ParameterGroupBean> parameterGroups = new ArrayList<ParameterGroupBean>();

public Collection<ParameterGroupBean> getParameterGroups() {
    return parameterGroups;
}

public void setParameterGroups(Collection<ParameterGroupBean> parameterGroups) {
    this.parameterGroups = parameterGroups;
}

@Id
@GeneratedValue
public int getLevelId() {
    return LevelId;
}
public void setLevelId(int levelId) {
    LevelId = levelId;
}
@Column(length = 30)
public String getLevelName() {
    return LevelName;
}
public void setLevelName(String levelName) {
    LevelName = levelName;
}   
} 
```

GroupLevelBean 和 ParameterGroupBean 之间的关系是一对多的。当我尝试创建会话对象时出现异常。

org.hibernate.MappingException：无法确定类型：com.vrde.daems.bean.GroupLevelBean，表：tbl_ParameterGroups，列：[org.hibernate.mapping.Column(level)]

谁能告诉我有什么问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-30T16:37:53.460

因为您在上面放置了`@Id`java`@GeneratedValue`持久性注释：

```
@Id
@GeneratedValue
private int ParameterGroupId; 
```

在同一时间：

```
@Id
@GeneratedValue
public int getParameterGroupId() {
    return ParameterGroupId;
} 
```

只需将注释放在上面就足够了`private int ParameterGroupId;`

# objective-c - 如何在 iOS Objective-C 中从 IP 地址解析主机名

> ID：13648964
> 
> 赞同：11
> 
> 时间：2012-11-30T16:18:10.333
> 
> 标签：objective-c, ios, hostname

我正在寻找一种方法来从该 LAN 上的 IP 地址解析我 LAN 中设备的主机名。

我用 C 语言编写了一个程序，它使用 gethostbyaddr() 函数在 Linux 上完美运行。

当我在 OS X 或 iOS 上尝试时，它不起作用。

似乎 OS X 和 iOS 中的 gethostbyaddr() 存在问题。

无论如何，如果您有另一个想法从 iOS 中的 IP 获取远程机器的主机名，那会让我很开心。

这是我使用的代码：

**第一次测试：**

192.168.0.101 是我们正在查询主机名的机器的 IP 地址。

```
#include <netdb.h>
#include <netinet/in.h>
#include <arpa/inet.h>

struct hostent *he;
struct in_addr ipv4addr;
inet_pton(AF_INET, "192.168.0.101", &ipv4addr);
he = gethostbyaddr(&ipv4addr, sizeof ipv4addr, AF_INET);
printf("Host name: %s\n", he->h_name); 
```

这段代码在 linux 上运行良好，但在 OS X 和 iOS 上却不行。

**第二次测试：**

```
+ (NSArray *)hostnamesForAddress:(NSString *)address {
    // Get the host reference for the given address.
    struct addrinfo      hints;
    struct addrinfo      *result = NULL;
    memset(&hints, 0, sizeof(hints));
    hints.ai_flags    = AI_NUMERICHOST;
    hints.ai_family   = PF_UNSPEC;
    hints.ai_socktype = SOCK_STREAM;
    hints.ai_protocol = 0;
    int errorStatus = getaddrinfo([address cStringUsingEncoding:NSASCIIStringEncoding], NULL, &hints, &result);
    if (errorStatus != 0) return nil;
    CFDataRef addressRef = CFDataCreate(NULL, (UInt8 *)result->ai_addr, result->ai_addrlen);
    if (addressRef == nil) return nil;
    freeaddrinfo(result);
    CFHostRef hostRef = CFHostCreateWithAddress(kCFAllocatorDefault, addressRef);
    if (hostRef == nil) return nil;
    CFRelease(addressRef);
    BOOL isSuccess = CFHostStartInfoResolution(hostRef, kCFHostNames, NULL);
    if (!isSuccess) return nil;

    // Get the hostnames for the host reference.
    CFArrayRef hostnamesRef = CFHostGetNames(hostRef, NULL);
    NSMutableArray *hostnames = [NSMutableArray array];
    for (int currentIndex = 0; currentIndex < [(NSArray *)hostnamesRef count]; currentIndex++) {
        [hostnames addObject:[(NSArray *)hostnamesRef objectAtIndex:currentIndex]];
    }

    return hostnames;
} 
```

此代码停留在 CFHostStartInfoResolution 处，此时返回 nil。

提前谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T22:57:47.150

它实际上是一个单行。 `[[NSHost hostWithAddress:@"173.194.34.24"] name]`

# asp.net - 间歇性问题 - OleDbConnection.Open() 引发 System.Data.OleDb.OleDbException：未指定的错误

> ID：13648971
> 
> 赞同：2
> 
> 时间：2012-11-30T16:18:31.953
> 
> 标签：asp.net, excel, ado.net, oledb

我们组织中的一个生产应用程序使用 Excel 2003 文件来处理用户通过 Web 应用程序提交的数据。此应用程序在大多数情况下都能可靠地工作。最近，应用程序开始在调用 OleDbConnection.Open() 方法时间歇性地抛出“System.Data.OleDb.OleDbException: Unspecified error”。错误一直持续到应用程序池被回收，此时一切都再次按预期运行。Windows 应用程序事件日志中未捕获任何错误。

ASP.NET Web 应用程序托管在 Windows Server 2003 32 位计算机上的 WSS 3.0 中的 Web 部件中。该应用程序旨在防止任何并发问题。系统功能 ID 是唯一有权访问临时文件存储的帐户，并且内置机制可确保在使用唯一命名约定和上传跟踪子系统的处理期间文件不会被另一个上传覆盖。

任何见解将不胜感激。

我们使用以下代码从 Excel 2003 文件中检索数据：

```
public static DataTable GetWorksheetData(string filePath)
{
    OleDbConnectionStringBuilder builder = new OleDbConnectionStringBuilder { DataSource = filePath };
    builder.Provider = "Microsoft.Jet.OLEDB.4.0";
    builder["Extended Properties"] = "Excel 8.0;IMEX=1;HDR=YES";

    DataTable table = new DataTable();
    try
    {
        // Creates an OleDbConnection for the excel file
        using (OleDbConnection connection = new OleDbConnection(builder.ConnectionString))
        {
            connection.Open();
            string sheetName = GetWorksheet(connection, "Template");
            if (!string.IsNullOrEmpty(sheetName))
            {
                using (OleDbCommand command = connection.CreateCommand())
                {
                    try
                    {
                        command.CommandText = string.Format("SELECT * FROM [{0}]", sheetName);

                        using (OleDbDataAdapter adapter = new OleDbDataAdapter(command))
                        using (DataSet dataSet = new DataSet())
                        {
                            adapter.Fill(dataSet);
                                table = dataSet.Tables[0];
                        }
                    }
                    finally
                    {
                        connection.Close();
                    }
                }
            }
            else
            {
                throw new InvalidWorksheetException();
            }
        }
    }
    catch (Exception ex)
    {
        Logger.Write(LogMsgSeverity.Error, ex);
        throw;
    }
    return table;
}

private static string GetWorksheet(OleDbConnection connection, string sheetName)
{
    string validSheetName = string.Empty;
    using (DataTable tables = connection.GetSchema("Tables"))
    {
        DataRowCollection rows = tables.Rows;

        if (rows.Count > 0)
        {
            foreach (DataRow row in rows)
            {
                if (row["Table_Name"].ToString().Contains(sheetName))
                {
                    validSheetName = sheetName;
                }
            }
        }
    }
    return validSheetName;
} 
```

# php - Symfony2 - Doctrine2：跨数据库连接列抛出映射异常

> ID：13648974
> 
> 赞同：3
> 
> 时间：2012-11-30T16:18:41.953
> 
> 标签：php, symfony, doctrine-orm, cross-database

您好想在两个实体之间建立连接。实体位于不同的数据库中：

这是我设置数据库配置的方式：

```
doctrine:
    dbal:
    default_connection: default
    connections:
        default:
            driver:   %database_driver%
            host:     %database_host%
            port:     %database_port%
            dbname:   %database_name%
            user:     %database_user%
            password: %database_password%
            charset:  UTF8
            mapping_types:
                enum: string
        data_warehouse:
            driver:   %database_data_warehouse_driver%
            host:     %database_data_warehouse_host%
            port:     %database_data_warehouse_port%
            dbname:   %database_data_warehouse_name%
            user:     %database_data_warehouse_user%
            password: %database_data_warehouse_password%
            charset:  UTF8
            mapping_types:
                enum: string

    orm:
    auto_generate_proxy_classes: %kernel.debug%

    default_entity_manager: default

    entity_managers:
        default:
            connection: default
            mappings:
                MyBundle1: ~

        data_warehouse:
            connection: data_warehouse
            mappings:
                MyBundle2: ~ 
```

这些是我的实体：

```
namespace My\Bundle1\Entity;
use My\Bundle1\Entity\MyBundle2Entity;
class MyBundle1Entity
{

    /**
     * @var integer
     *
     * @ORM\Column(name="id", type="integer", nullable=false)
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="IDENTITY")
     */
    private $id;
}

namespace My\Bundle2\Entity;
class MyBundle2Entity
{

    /**
     * @var integer
     *
     * @ORM\Column(name="id", type="integer", nullable=false)
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="IDENTITY")
     */
    private $id;

   /**
     * @var MyBundle1Entity
     *
     * @ORM\ManyToOne( targetEntity="My\Bundle1\Entity\MyBundle1Entity")
     * @ORM\JoinColumn(name="my_bundle1_entity_id",  nullable=true)
     */
    private $myBundle1Entity;
} 
```

当我尝试使用教义：模式：更新命令时，我收到一个错误：

```
php app/console doctrine:schema:create --dump-sql --em=data_warehouse 
```

错误：

[Doctrine\Common\Persistence\Mapping\MappingException]
在链配置的命名空间 My\Bundle2\Entity\Bundle2Entity 中找不到类“My\Bundle1\Entity\Bundle1Entity”

我的设置是正确的还是我做错了什么？我假设我定义了两个实体管理器和连接并告诉他们他们必须处理哪些捆绑包。我确保每个捆绑包中只有一个数据库中的实体。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-06-21T00:36:44.743

看起来这个问题很老，但从未得到回答。我希望这个答案能帮助谷歌同事偶然发现这个问题。

您无法跨实体管理器在实体之间建立直接关系。但是，如果它们共享同一个实体管理器，您可以跨包设置关系。

**使用相同实体管理器 [2.2+] 的 2 个实体之间的关系：**

查看[有关该问题的 Symfony 文档](http://symfony.com/doc/current/cookbook/doctrine/resolve_target_entity.html)

本质上，在 Bundle1 中，创建一个接口，然后在您的实体上实现它。在 Bundle2 中，将您的 @ManyToOne 注释链接到接口而不是实体本身。然后，在配置中告诉 Symfony 如何解析接口。

捆绑1：

```
<?php

// src/My/Bundle1/Entity/Bundle1Entity.php

namespace My\Bundle1\Entity;

use My\Bundle1\Entity\MyBundle2Entity; // <-- NOT NEEDED

interface Bundle1EntityInterface {}

class MyBundle1Entity implements Bundle1EntityInterface
{
    // ...
} 
```

捆绑2：

```
<?php

// src/My/Bundle2/Entity/Bundle2Entity.php

namespace My\Bundle2\Entity;
class MyBundle2Entity
{
    // ...

    /**
     * @var MyBundle1Entity
     *
     * @ORM\ManyToOne(targetEntity="My\Bundle1\Entity\Bundle1EntityInterface")
     * @ORM\JoinColumn(name="my_bundle1_entity_id", nullable=true)
     */
    private $myBundle1Entity;
} 
```

应用配置：

```
# app/config/config.yml
doctrine:
    # ....
    orm:
        # ....
        resolve_target_entities:
            My\Bundle1\Entity\Bundle1EntityInterface: My\Bundle1\Entity\Bundle1Entity 
```

**使用不同实体管理器的 2 个实体之间的关系**

因为实体不能直接绑定，所以您必须挂接到 postLoad 事件以设置引用，同时手动保留 id。有关将 MongoDB 对象与 ORM 对象混合的示例和说明，请参阅[文档。](http://docs.doctrine-project.org/projects/doctrine-mongodb-odm/en/latest/cookbook/blending-orm-and-mongodb-odm.html)

这是一个使用 2 个实体管理器的骨架（移除了获取器/设置器）：

实体：

```
<?php

// src/My/Bundle1/Entity/Bundle1Entity.php

namespace My\Bundle1\Entity;

class MyBundle1Entity
{
    /**
     * @var integer
     *
     * @ORM\Column(name="id", type="integer", nullable=false)
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="IDENTITY")
     */
    private $id;
}

// src/My/Bundle2/Entity/Bundle2Entity.php

namespace My\Bundle2\Entity;
class MyBundle2Entity
{
    /**
     * @var integer
     *
     * @ORM\Column(name="id", type="integer", nullable=false)
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="IDENTITY")
     */
    private $id;

    /**
     * @var integer
     *
     * @ORM\Column(type="integer")
     */
    private $myBundle1EntityId;

    /**
     * @var MyBundle1Entity
     */
    private $myBundle1Entity;

    public function setMyBundle1Entity($entity)
    {
        $this->myBundle1EntityId = $entity->getId();
        $this->myBundle1Entity = $entity;
    }
} 
```

事件监听器：

```
<?php

use Doctrine\ORM\EntityManager;
use Doctrine\ORM\Event\LifecycleEventArgs;

class MyEventSubscriber
{
    public function __construct(EntityManager $bundle1Em)
    {
        $this->bundle1Em = $bundle1Em;
    }

    public function postLoad(LifecycleEventArgs $eventArgs)
    {
        $myBundle2Entity = $eventArgs->getEntity();
        $defaultEm = $eventArgs->getEntityManager();
        $myBundle2EntityReflProp = $defaultEm->getClassMetadata('Entity\MyBundle2Entity')
            ->reflClass->getProperty('myBundle1Entity');
        $myBundle2EntityReflProp->setAccessible(true);
        $myBundle2EntityReflProp->setValue(
            $myBundle1Entity, $this->bundle1Em->getReference('Entity\MyBundle1Entity', $myBundle2Entity->getMyBundle1Id())
        );
    }
} 
```

显然，您必须注册事件侦听器并将捆绑包 1 的实体管理器作为参数传递。

# entity-framework - 在 EF Code First 中映射 twitter 风格的追随者关系

> ID：13648977
> 
> 赞同：2
> 
> 时间：2012-11-30T16:19:08.710
> 
> 标签：entity-framework, entity-framework-4, ef-code-first

我希望能够访问关注者并作为我的用户实体的集合进行关注：

```
public class User
{
  public int Id { get; set; }
  public ICollection<User> Followers { get; set; }
  public ICollection<User> Following { get; set; }
} 
```

然后这将映射到一个表：

> 用户关注者（用户 ID，关注者 ID）

我可以通过一些流畅的配置正确生成表格并为关注者工作：

```
modelBuilder.Entity<User>().HasMany(m => m.Followers).WithMany().Map(x => x.MapLeftKey("UserId").MapRightKey("FollowerId").ToTable("UserFollowers")); 
```

棘手的部分是让 EF 知道 FollowerId 应该映射到同一个表，但 FollowerId 映射到用户。

我试过简单地添加：

```
modelBuilder.Entity<User>().HasMany(m => m.Following).WithMany().Map(x => x.MapLeftKey("FollowerId").MapRightKey("UserId").ToTable("UserFollowers")); 
```

但我收到一个错误：

> 已经定义了具有模式 'dbo' 和表 'UserFollowers' 的 EntitySet 'UserUser1'。每个 EntitySet 必须引用一个唯一的模式和表。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T16:59:06.177

您可以使用这样的一个映射来做到这一点。

```
modelBuilder.Entity<User>().HasMany(m => m.Followers).WithMany(m=>m.Following ).Map(x => x.MapLeftKey("UserId").MapRightKey("FollowerId").ToTable("UserFollowers")); 
```

# twitter-bootstrap - Bootstrap Modal 立即消失

> ID：13648979
> 
> 赞同：218
> 
> 时间：2012-11-30T16:19:11.287
> 
> 标签：twitter-bootstrap, modal-dialog

我正在使用引导程序在网站上工作。

基本上，我想在主页中使用一个模式，由英雄单元中的按钮召唤。

按钮代码：

```
<button type="button" 
    class="btn btn-warning btn-large" 
    data-toggle="modal"
    data-target="#myModal">Open Modal</button> 
```

模式代码：

```
<div class="modal hide fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
    <h3 id="myModalLabel">In Costruzione</h3>
  </div>
  <div class="modal-body">
    <p>Test Modal: Bootstrap</p>
  </div>
  <div class="modal-footer">
    <button class="btn" data-dismiss="modal" aria-hidden="true">Chiudi</button>
    <button class="btn btn-warning">Salva</button>
  </div>
</div> 
```

问题是，只要我单击按钮，模式就会淡入，然后立即消失。

我会很感激任何帮助。

另外，如何更改下拉三角形的颜色（指向上方，不悬停）？我正在开发一个基于橙色和棕色的网站，蓝色的东西真的很烦人。

* * *

## 回答 #1

> 赞同：498
> 
> 时间：2012-12-02T14:57:37.497

## 一个可能的原因

这是 Modal 插件的 JavaScript 被加载两次时的典型行为。请检查以确保插件没有被双重加载。根据您使用的平台，可以从多个来源加载模态代码。一些常见的有：

*   **bootstrap.js**（完整的 BootStrap JS 套件）
*   **bootstrap.min.js**（同上，只是缩小了）
*   **bootstrap-modal.js**（独立插件）
*   一个依赖加载器，例如，`require('bootstrap')`

## 调试技巧

一个好的起点是`click`使用浏览器中的开发人员工具检查已注册的事件侦听器。例如，Chrome 会列出可以找到注册监听器代码的 JS 源文件。另一种选择是尝试在页面上的资源中搜索模态代码中找到的短语，例如`var Modal`.

不幸的是，这些并不总是在所有情况下都能找到东西。检查网络请求可以更可靠地为您提供页面上加载的所有内容的图片。

## 一个（损坏的）演示

这是加载**bootstrap.js**和**bootstrap-modal.js**时发生的演示（只是为了确认您的经验）：

## [普朗克](http://plnkr.co/edit/WwgzRX?p=preview)

如果您向下滚动到该页面上源代码的底部，您可以删除或注释掉**bootstrap-modal.js**`<script>`的行，然后验证现在模态将按预期运行。

 *** * *

## 回答 #2

> 赞同：98
> 
> 时间：2014-09-11T11:42:39.883

我有同样的问题，但它有不同的原因。我按照文档创建了一个按钮，如下所示：

```
<button class="btn btn-primary btn-lg" data-toggle="modal" data-target="#myModal">
  Launch demo modal
</button> 
```

当我点击它时，似乎什么都不会发生。但是，该按钮位于`<form>`暂时只是获取同一页面的位置。

我通过添加`type="button"`到按钮元素来解决此问题，以便在单击时不会提交表单。

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2016-09-12T13:28:09.633

对我来说有效的是删除

```
data-toggle="modal" 
```

从按钮。按钮本身可以是任何元素 - 链接、div、按钮等。

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2015-12-22T12:55:23.027

在这个问题的其他有用答案之后，我在我的 mvc 应用程序中寻找了一段时间的重复引导参考。

终于找到了——它包含在我正在使用的另一个库中，所以一点也不明显！( `datatables.net`)。

如果您仍然遇到此问题，请查找可能包含引导程序的其他库。（`datatables.net`允许您指定使用或不使用引导程序的下载 - 其他人也这样做）。

所以我`bootstrap.min.js`从我的身上删除了`bundle.config`，一切都很好。

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2015-03-30T12:34:22.907

同样的症状，在带有由`bootstrap-sass`gem 提供的 Bootstrap 的 Rails 应用程序的上下文中，@merv 的回答让我走上了正确的轨道。

我的`application.js`文件有以下内容：

```
//= require bootstrap
//= require bootstrap-sprockets 
```

解决方法是删除两行之一。事实上，gem 的自述文件会警告您这个错误。我的错。

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2014-04-18T13:19:29.723

`e.preventDefault();` 使用 jquery ui

对我来说，这个问题发生在 jquery ui 按钮上的 click 方法覆盖上，默认情况下会导致页面重新加载。

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2015-06-18T07:24:54.847

我的代码不知何故包含了两次 bootstrap.min.js。我删除了其中一个，现在一切正常。

* * *

## 回答 #8

> 赞同：9
> 
> 时间：2016-05-16T22:50:38.643

我也有同样的问题，但对我来说，这是因为我在模态表单中有一个类型为“提交”的按钮。我变了

```
 <input  type='submit' name='submitname' id="partyBtn" value='Submit' title='Click to submit.'/> 
```

到

```
 <input  type='button' name='submitname' id="partyBtn" value='Submit' title='Click to submit.'/> 
```

这解决了失踪问题。

* * *

## 回答 #9

> 赞同：8
> 
> 时间：2014-08-26T09:33:23.937

如果使用 jquery 两次附加事件侦听器，也会出现此问题。例如，您可以在不取消绑定的情况下进行设置：

```
 $("body").on("click","#fixerror",function(event){
                $("#fixerrormodal").modal('toggle')
            }) 
```

如果发生这种情况，事件将连续触发两次，并且模式消失。

```
 $("body").on("click","#fixerror",function(event){
                $("#fixerrormodal").modal()
                $("#fixerrormodal").modal('toggle')
            }) 
```

参见示例：http: [//embed.plnkr.co/i5xB1WbX7zgXrbDMhNAW/preview](http://embed.plnkr.co/i5xB1WbX7zgXrbDMhNAW/preview)

* * *

## 回答 #10

> 赞同：8
> 
> 时间：2015-03-18T18:51:22.613

我遇到了@gpasse 在他的示例中显示的相同症状。这是我的代码...

```
<form...>
  <!-- various inputs with form submit --->

  <!-- button opens modal to show dynamic info -->
  <button id="myButton" class="btn btn-primary">Show Modal</button>
</form>

<div id="myModal" class="modal fade" ...>
</div>

<script>
  $( '#myButton' ).click( function() {
    $( '#myModal' ).modal();
  )};
</script> 
```

正如@Bhargav 建议的那样，我的问题是由于按钮尝试提交表单并重新加载页面。我将按钮更改为`<a>`链接，如下所示：

```
<a href="#" id="myButton" class="btn btn-primary">Show Modal</a> 
```

...它解决了这个问题。

注意：我还没有足够的声誉来简单地添加评论或投票，我觉得我可以添加一点澄清。

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2017-01-20T10:46:43.850

就我而言，单击按钮会导致（不需要）重新加载页面。

这是我的修复：

```
<button class="btn btn-success" onclick="javascript: return false;" 
data-target="#modalID" data-toggle="modal">deaktivieren</button> 
```

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2015-06-17T08:20:03.223

就我而言，我只有一个 bootstrap.js, jquery.js 文件，但仍然出现这种类型的错误，我的按钮代码是这样的：

```
<script type="text/javascript">
$(document).ready(function(){
   $("#bttn_<?php echo $rnt['id'];?>").click(function(){
      $("#myModal_<?php echo $rnt['id'];?>").modal('show');
   });
});
</script> 
```

我简单地添加了**e.preventDefault();** 对它来说，它就像魅力一样。

所以，我的新代码如下：

```
<script type="text/javascript">
$(document).ready(function(){
  e.preventDefault();
  $("#bttn_<?php echo $rnt['id'];?>").click(function(){
     $("#myModal_<?php echo $rnt['id'];?>").modal('show');
  });
});
</script> 
```

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2015-07-14T08:38:00.217

我今天自己遇到了这个问题，它恰好只在 Chrome 中。是什么让我意识到这可能是一个渲染问题。将特定模态移动到它自己的渲染层解决了它。

```
#myModal {
  -webkit-transform: translate3d(0, 0, 0);
} 
```

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2017-02-22T13:27:20.677

在我的情况下，我`actionlink`在 MVC 中使用了按钮并且我遇到了这个问题，我已经尝试了很多上面和其他的解决方案，但仍然面临这个问题，然后我意识到我的代码错误。

我通过使用在 javascript 中调用了 modal

```
 $('#ModalId').modal('show'); 
```

在错误之前我使用这个按钮

```
<a href="" onclick="return Edit();" class="btn btn-primary">Edit</a> 
```

我对这个按钮中的 href 属性没有任何价值，所以我面临这个问题。

然后我像这样编辑这个按钮代码

```
 <a href="#" onclick="return Edit();" class="btn btn-primary">Edit</a> 
```

然后问题得到解决只是一个错误，因为第一个没有#。

看看这是否对你有帮助。

* * *

## 回答 #15

> 赞同：3
> 
> 时间：2019-02-23T04:37:24.127

另一个原因/解决方案！我在我的 JS 代码中有：

```
$("#show_survey").click(function() {
  $("#survey_modal").modal("show")
}) 
```

但是我的 HTML 代码已经写成：

```
<a class="small-text link" data-target="#survey_modal" data-toggle="modal" href="#" id="show_survey">Take a quick 7 question survey!</a> 
```

因此，这是重复如何进入代码并导致模式打开然后关闭的另一种排列方式。在我的情况下，`data-target`并且`data-toggle`根据 Bootstrap 文档在 html 中已经触发了模式工作。因此 JS 代码是多余的，当删除时，它可以工作。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2014-05-19T01:20:36.400

我在使用 asp.NET 的项目中遇到了同样的问题。我正在使用 bootstrap 3.1.0 解决了它降级到 Bootstrap 2.3.2。

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2014-11-11T10:48:24.950

我也有这个问题，如果按钮在里面**标记然后模态出现一次并很快消失，将按钮从表单中取出修复了问题。谢谢我最终进入了这个线程！对所有人 +1。**

 *** * *

## 回答 #18

> 赞同：1
> 
> 时间：2015-03-04T12:47:21.270

我在移动设备上进行测试时遇到了同样的问题，这个技巧对我有用

```
<a type="submit" class="btn btn-primary" data-toggle="modal" href="#myModal">Submit</a> 
```

将按钮更改为应该可以工作的锚标记，由于它的类型按钮在尝试提交时出现问题，因此模式立即消失。并且还从模式隐藏淡入中删除隐藏， `<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">` 希望这对你有用。

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2015-05-11T22:03:07.977

就我而言，我将 CDN 包含在 application.html.erb 的头部中，并且还安装了“jquery-rails”gem，由于上面的文档和帖子，我猜这是多余的。

我只是从 application.html.erb 的头部注释掉了 CDN（下），并且模态适当地保持打开状态。

```
<!--<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>--> 
```

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2016-04-28T15:56:04.773

我也有同样的问题。我的问题是我在按下链接并提示使用 jquery 确认时显示模式。

下面的代码显示了模态并立即消失：

```
<a href="" onclick="do_some_stuff()">Hey</a> 
```

我最终在 href 中添加了“#”，所以链接不会去任何地方，它解决了我的问题。

```
<a href="#" onclick="do_some_stuff()">Hey</a> 
```

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2018-11-08T08:21:29.440

你试过删除

```
data-dismiss="modal" 
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2017-09-12T00:27:54.780

我知道这很旧，但还有另一件事要检查 - 确保你只有一个 data-target= 属性。我已经复制了它，结果是按照这个线程。

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2018-01-28T17:20:54.547

我已经通过添加`bootstrap`到我的项目中`bower`，然后我导入了`bootstrap.min.js`文件并在`modal.js`文件之后。（打开模式的按钮位于表单内）。我只是删除了导入`modal.js`，它对我有用。

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2018-05-17T08:31:35.493

万一有人使用带有数据表的codeigniter 3引导程序。

下面是我在 config/ci_boostrap.php 中的修复

```
//'assets/dist/frontend/lib.min.js',
//lib.min.js has conflict with datatables.js and i removed it replace with jquery.js
'assets/dist/frontend/jquery-3.3.1.min.js',
'assets/dist/frontend/app.min.js',
'assets/dist/datatables.js' 
```

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2018-08-03T07:59:33.457

不得不面对同样的问题。原因同上`@merv`。问题在于向页面添加了**日历组件**。组件本身添加了要在日历弹出窗口中使用的模式功能。

所以打破模型弹出的原因将是以下一项或多项

*   加载多个引导 js 版本/文件（缩小...）
*   将外部日历添加到使用引导程序的页面
*   向页面添加自定义警报或弹出库
*   添加弹出行为的任何其他库

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2018-08-29T09:47:42.163

在使用 Angular(5) 时，我遇到了同样的问题，但在我的情况下，我解决了如下问题：

组件.html

```
<button type="button" class="btn btn-primary"  data-target="#myModal" 
(click)="showresult()">fff</button>

<div class="modal" id="myModal" role="dialog"  tabindex="-1" data-backdrop="false">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Modal title</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <p>Modal body text goes here.</p>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-primary">Save changes</button>
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div> 
```

组件.ts

注意：需要将 ts 文件中的 jquery 导入为“declare var $:any;”

```
 showresult(){
    debugger
    $('#myModal').modal('show');
  } 
```

我所做的更改：

*   从 Button 标签中删除了“data-toggle="modal"（感谢@miCRoSCoPiC_eaRthLinG，这个答案在这里对我有帮助）在我的情况下它的显示模式，所以我创建了 (click)="showresult()"

*   在component.ts里面需要声明Jquery($)和里面的按钮点击方法showresult()调用“$('#myModal').modal('show');”

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2020-02-25T08:28:46.640

我遇到了同样的问题，因为我切换了两次模态，如下所示：

```
statusCode: {
    410: function (request, status, error) { //custom error code

        document.getElementById('modalbody').innerHTML = error;
        $('#myErrorModal').modal('toggle')
    }
},
error: function (request, error) {

    document.getElementById('modalbody').innerHTML = error;
    $('#myErrorModal').modal('toggle')
} 
```

我删除了一个事件：

> $('#myErrorModal').modal('toggle')

它就像魔术一样工作！****

# php - 创建注册和登录页面

> ID：13648980
> 
> 赞同：2
> 
> 时间：2012-11-30T16:19:15.063
> 
> 标签：php, authentication, login, registration

我目前正在制作注册和登录页面。我的第一页询问您是否要创建帐户或登录。我们要做的是从用户输入信息的表单中获取信息，并将其放入文本文件中。我已经大致完成了这个工作。我知道出于安全原因这不是好的做法，但这是课堂作业，我必须将信息放入文本文件中。我有进入文本文件的信息，但是我无法将发布的用户名与数据库内的所有用户名进行比较。这是我的 newaccount.html 页面的代码，以及表单提交到的 register.php 文件。

**新帐户.html**

```
<html>
<head>
</head>
<body>

<h3>Hello new user! Choose a user name and password ^_^</h3><br>

<form action = "register.php" method = "POST" >
Username: <input type = "text" name = "username"><br><br>
Password: <input type = "password" name = "pass"><br>
<input type = "submit" value = "Create Account" name = "submit"><br>
</form>
<form method = "LINK" action = "Proj2_practice.html">
<input type = "submit" value = "Home Page" name = "submit2">
</form>

</body>  
</html> 
```

**注册.php**

```
<?php

$username = $_POST['username'];
$password = $_POST['pass'];

$userAndPass = $username.",".$password;

$userNames = 'usernames.txt'." ";
$passwords = 'passwords.txt'." ";

$fh_users = fopen($userNames, 'a+')or die("sorry, we couldnt open the file");
$fh_passwords = fopen($passwords, 'a+')or die("sorry, we couldnt open the file");

fwrite($fh_users, $username." ");
fwrite($fh_passwords, $password." ");

$allUserNames = fread($fh_users, filesize('usernames.txt'));

echo $allUserNames;

?> 
```

用户名和密码被正确发送到文本文件，在代码末尾，它没有回显变量。截至目前，文本文件中没有任何信息，我不知道这是否是没有回显的原因。我的方法在这里正确吗？我在这里要做的是将每个名称和密码发送到用户名和密码文本文件。然后，我计划

用它们之间的空格来分解每个文本文件，这就是为什么我在将它们写入文本文件后添加一个，然后通过它们各自的数组元素比较用户名和密码。我是否像我想的那样过于复杂了？请与我分享您的意见，我只是想变得更好^_^

先感谢您！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T16:25:32.430

如果您使用“a+”标志打开文件，它会将文件指针放在文件末尾。因此，当您阅读时，您将一无所获，因为您已经在文件的末尾。

在阅读之前回到文件的开头

```
fseek ($fh_users, 0); 
```

或关闭并使用标志“r”再次打开它

```
$fh_users = fopen($userNames, 'r') 
```

或者干脆做

```
$dataString = file_get_contents($userNames); 
```

或者

```
$dataArray = file($userNames); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T16:52:35.920

如果这是一个课堂作业，我可以建议一种方法和解决方案吗？

如果这样的事情不起作用，请尝试降低您尝试做的事情的复杂性并逐步构建。你自己说你的文件是空的；如果它是空的，您将无法从中读取，因此您的第一个问题是弄清楚如何正确写入文件并从中读取内容。忘记所有其他任务，首先专注于它。

现在，如果你打开一个资源（比如一个文件），当你不再需要它时，你**必须再次关闭它。**所以你肯定需要一个 fopen / fclose 对开始。

```
$username = "Penguin";
$userNames = 'usernames.txt'; // Why did you have a space after this?
$fh_users = fopen($userNames, 'a+');
fwrite($fh_users, $username." ");
fclose($userNames); 
```

我还没有对此进行测试，但此时，您应该有一个包含“企鹅”的文件。如果您多次运行代码，您应该会看到文件内容增长。

如果您想从该文件中读回内容，请意识到有一个文件指针决定您要读取或写入的位置。您可以通过将文件指针移到前面的方式再次打开文件（这样您就可以阅读所需的内容），也可以使用`fseek`或将其显式移回前面`rewind`。

一旦你完成了这些写作和阅读工作，然后添加代码来处理你的表单等等。

# zend-framework - Magento：必须加载 cURL 扩展

> ID：13648985
> 
> 赞同：0
> 
> 时间：2012-11-30T16:19:23.543
> 
> 标签：zend-framework, magento, curl, ubuntu-12.04, magento-1.4

我想在我的本地机器上运行我们的一个 Magento 安装副本。我已经复制了代码，在本地机器上重新创建了数据库，配置了 apache，现在尝试运行它。我收到以下消息：

> 处理您的请求时出错
> 
> 必须加载 cURL 扩展才能使用这个 Zend_Http_Client 适配器。

我在互联网上搜索了解决方案，但找不到解决方案。

卷曲没有安装，所以我这样做了：`apt-get install php5-curl`

我打开 /etc/php5/apache2/php.ini 并寻找 php_curl.dll，其中没有提到。所以我添加了以下行：`extension=php_curl.dll`. 重新启动 apache 后没有任何改变。那个DLL不应该在那里吗？我尝试使用 grep 搜索 /etc/php5 和 /etc 中的字符串，但没有结果。

现在我想知道如何让 magento 工作。我不关心 Curl，这个安装是为了测试、试用，它不需要安装所有选项。最好是如果这可行，但现在不是必需的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T16:30:54.730

我已将 php_curl.dll 更改为 php_curl.so，这似乎解决了问题。

# asp.net-mvc-3 - 在 MVC 视图中显示是或否而不是 1 或 0

> ID：13648992
> 
> 赞同：0
> 
> 时间：2012-11-30T16:19:55.487
> 
> 标签：asp.net-mvc-3

有没有一种方法可以注释我的视图字段，以便它在我的视图中显示 yes 而不是 1 和 no 而不是 0？我知道有一个显示属性，它采用名称并显示不同的东西，但这不是我想要的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T16:24:57.850

创建名称为“YesNo”的[显示模板](http://digitaltoolfactory.net/blog/2012/04/how-to-use-ui-hints-and-display-templates-in-asp-net-mvc-3/)

```
@model int

@(Model == 0 ? "No" : "Yes") 
```

并将属性添加到模型的字段

```
[UIHint("YesNo")]
public int Value { get; set; } 
```

当您将显示您的模型时，`"YesNo"`将使用显示模板。

```
@Html.DisplayFor(model => model.Value) // output "Yes" or "No" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T16:21:47.363

你有几个选择。最简单的就是在你的视图中添加一些“显示逻辑”。

```
@(Model.YesNo == 1 ? "Yes" : "No") 
```

我会创建一个 Enum 类型并在您的模型上使用它而不是 int 。

```
public enum YesNo
{
  No = 0,
  Yes, 1
} 
```

那么你的观点就会有

```
@Html.DisplayFor(model => model.YesNo) 
```

# c# - 使用方法控制母版页时：对象引用未设置为对象的实例

> ID：13648993
> 
> 赞同：1
> 
> 时间：2012-11-30T16:19:54.777
> 
> 标签：c#, asp.net, class, exception, master-pages

我是 ASP.net 的初学者，想创建一个类文件，其中包含我的应用程序中常用的方法。就像这里隐藏某些`ButtonLink`'s 在`login.aspx`and`registration.aspx`页面中的那个。

但是当我启动这些页面中的任何一个时，我都会收到此错误：

```
Object reference not set to an instance of an object. 
```

这是我的代码：

`Helper.cs`

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

namespace WebApplication1
{
    public class Helper : System.Web.UI.Page
    {
        public void hideLinks(){
            // error is produced at the following line at the start of
            // login.aspx or registration.aspx pages.
            LinkButton profile = (LinkButton)Master.FindControl("LinkButton1");
            LinkButton logout = (LinkButton)Master.FindControl("LinkButton2");

            profile.Visible = false;
            logout.Visible = false;
        }        
    }
} 
```

`login.aspx.cs`& `registration.aspx.cs`:

```
void Page_PreInit(object sender, EventArgs e)
{
   //LinkButton profile = (LinkButton)Master.FindControl("LinkButton1");
   //LinkButton logout = (LinkButton)Master.FindControl("LinkButton2");

   //profile.Visible = false;
   //logout.Visible = false;
   Helper master_helper = new Helper();
   master_helper.hideLinks();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T16:25:38.017

实例化一个 new `Helper`（即一个 new `System.Web.UI.Page`）不作为整个页面请求的一部分存在，因此它没有对相同的引用`Master`（如果它甚至有一个）。相反，重新设计你`Helper`的`Master`（或`Page`）在：

```
public class Helper
{
    private Page AssociatedPage;

    public Helper(Page page)
    {
        this.AssociatedPage = page;
    }

    public void hideLinks(){
        // error is produced at the following line at the start of
        // login.aspx or registration.aspx pages.
        LinkButton profile = (LinkButton)AssociatedPage.Master.FindControl("LinkButton1");
        LinkButton logout = (LinkButton)AssociatedPage.Master.FindControl("LinkButton2");

        profile.Visible = false;
        logout.Visible = false;
    }        
} 
```

那么您的用法可能如下所示：

```
void Page_PreInit(object sender, EventArgs e)
{
   Helper master_helper = new Helper(this);
   master_helper.hideLinks();
} 
```

您还可以将方法重新设计为静态方法，并简单地将`Page`（或`Master`）引用与`hideLinks`方法作为参数一起传入，但这取决于您。

# javascript - 如何从ajax调用中获取返回值？

> ID：13648995
> 
> 赞同：8
> 
> 时间：2012-11-30T16:20:05.820
> 
> 标签：javascript, jquery, ajax

我想使用函数来获取 ajax 调用的值。但该值始终返回未定义。返回值只有 1 或 0。

这是我的代码：

```
$(function(){ 
   $('#add_product').click(function(){ 
     var i = $('#product_name').val(); 
     param = 'product_name='+i; 
     var value = check_product(param); 
     alert(value); 
     return false; 
   }); 
});

function check_product(param){ 
  $.ajax({ 
    type : 'POST', 
    data : param, 
    url : baseurl+'cart/check_product_name/', 
    success : function(result){ 
      //alert(result); 
      return result; 
    } 
 });
} 
```

* * *

我仍在努力完成这项工作。我现在得到的值显示为 1 或 0。我现在想要完成的是我如何在 if 语句中实现它。我想要这样的东西。如果 val = 0 返回真；否则返回假。我不确定我是否在使用 ajax 函数的正确轨道上。但是，如果有更好的方法可以告诉我，我将不胜感激。

```
$(function(){ 
       $('#add_product').click(function(){ 
         var i = $('#product_name').val(); 
         param = 'product_name='+i; 
         check_product(param).done(function(value) {
        var val = value; //waits until ajax is completed
         });
         if(val == 0){
            return true;
         } else{
            return false;
         }
       }); 
    });

function check_product(param){ 
  return $.ajax({ 
    type : 'POST', 
    data : param, 
    url : baseurl+'cart/check_product_name/'
 });
} 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-30T16:21:40.093

它是异步的，因此您必须等待 ajax 调用来获取数据，然后才能对其发出警报。您可以通过返回 ajax 调用并使用来轻松做到这一点`done()`，如下所示：

```
$(function() {
    $('#add_product').click(function() {
        var i   = $('#product_name').val(),
            par = 'product_name=' + i;

        check_product(par).done(function(value) {
            alert(value); //waits until ajax is completed
        });

        return false;
    });
});

function check_product(param) {
    return $.ajax({
        type : 'POST',
        data : param,
        url  : baseurl + 'cart/check_product_name/'
    });
}​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T16:24:24.993

将此添加到 ajax 选项：

```
dataType: "json", 
```

并使用

```
return Json(dataObject, JsonRequestBehavior.AllowGet); 
```

在你的行动方法中。

您的

```
return result; 
```

在 ajax 的成功处理程序中不是返回`check_product`. 将另一个函数（可能是匿名的）传递给`check_product`并调用 ajax 成功。