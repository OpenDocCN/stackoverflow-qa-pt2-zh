# StackOverflow 问答 13408000-13408999

# javascript - 查看实例化的 Backbone.Router 正在监视哪些路由

> ID：13408001
> 
> 赞同：1
> 
> 时间：2012-11-15T23:23:06.607
> 
> 标签：javascript, backbone.js, javascript-framework

我正在寻找一种方法来检查 Backbone.Router 并查看它正在寻找哪些路由。

如果您在使用 myroute.route(a,b,c) 实例化后添加路由，我无法弄清楚如何查看完整的路由列表。

代码示例：

```
var myRoute = new Backbone.Router({ 'routes':{ 'home':'goHome' } })
myRoute.route('settings','settings',goSettings) 
```

我希望能够检查“myRoute”并查看“设置”和“家”路线，但我想不出办法。我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T23:31:11.083

我找到了正在监听的正则表达式列表`Backbone.history.handlers`，但这些都很难读。它们看起来像这样：

```
Backbone.history.handlers[0] -> Object { route=RegExp, callback=function()}
route RegExp /^myModuleTests$/ 
```

仍在寻找更好的解决方案，但恐怕这可能就是全部了。

# css - 我有一张背景图片。从顶部填充一个盒子会将图像向下推，我该如何避免这种情况？

> ID：13408002
> 
> 赞同：0
> 
> 时间：2012-11-15T23:23:09.333
> 
> 标签：css

我创建了一个在这个标题里面有一个背景图片我放了一个图片链接

所以现在标题中有一个图像。所以我尝试定位标题。但是当我尝试用填充定位标题时，比如从 300px 的顶部开始，它会将图像带到我想要的位置，但问题是背景图像向下增长了 300px。我如何防止这种情况发生:(？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T23:30:26.347

在没有看到代码的情况下，我不太确定所有内容的布局方式，但我认为您可以通过以下两种方式之一解决问题：1.）在标题上使用边距而不是填充来定位它 2.）为背景和任何时候向标题添加填充时，将背景的高度降低相同的量。

如果我对您的理解正确，那么其中之一应该可以解决您的问题。

# java - 二维数组矩阵的乘法（不是矩阵乘法，而是正常乘法到具有相应元素的元素）

> ID：13408011
> 
> 赞同：0
> 
> 时间：2012-11-15T23:24:46.320
> 
> 标签：java, output

我有一个任务要编写一个执行分段乘法的方法。我的方法头应该是：

```
public static double [][] multiply(int [][] a, double [][]b) 
```

如果尺寸不一致，则返回 null。为了检查第一维和第二维，请使用： a.length 和 a[0].length 您可以放心地假设数组是矩形的。

矩阵是这种形式

```
 a  b  c  
  d  e  f
  g  h  i 
```

&

```
 j  k  l
  m  n  o
  p  q  r 
```

这是我得出的结论：

```
Random randomGenerator = new Random();
a = new int [a.length][a[0].length];

for (int i=0; i<a.length; i++) {
  for(int j=0; j<a[0].length; j++) {
    a[i][j]=(int)(randomGenerator.nextDouble()*255.0);
  }
}

for (int i=0; i<a.length; i++) {
  for(int j=0; j<a[0].length; j++) {
    System.out.print(a[i][j]+" ");
  }
  System.out.println();
}

b=new double[b.length][b[0].length];
for (int i=0; i<b.length; i++) {
  for(int j=0; j<b[0].length; j++) {
    b[i][j]=randomGenerator.nextDouble()*255.0
      }

}

      double[][] result  = new double[3][3];
      result = a[i][j]*b[i][j];

      if([a.length]!=[b.length]&&[a[0].length]!=[b[0].length]){
      return null;
      }
      else{
      return result;
      } 
```

用户是否可以自己选择维度？我怎样才能做到这一点？

此代码是否将矩阵的每个元素与矩阵的其他元素相乘？

所有条件都满足了吗？

# objective-c - 为什么 TableView 没有显示任何内容。

> ID：13408019
> 
> 赞同：0
> 
> 时间：2012-11-15T23:25:41.620
> 
> 标签：objective-c, cocoa-touch, uitableview

我有一个带有 tableView 的课程。我没有收到任何构建错误，但是当我尝试运行该应用程序时，在我添加一个新项目后，似乎什么也没有发生。这是代码：

在.h

```
@interface entriesViewController : UIViewController <UITableViewDelegate>

@property (weak, nonatomic) IBOutlet UITableView *TableView;

-(IBAction)startEditing:(id)sender;
-(IBAction)newItem:(id)sender;
@end 
```

在.m

```
#import "entriesViewController.h"
#import "LEItemStore.h"
#import "LEItem.h"

@interface entriesViewController ()

@end

@implementation entriesViewController
@synthesize TableView;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
        [TableView setDelegate:self];
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.
    [TableView reloadData];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

-(IBAction)startEditing:(id)sender {

    if ([TableView isEditing])
    {
        [TableView setEditing:NO animated:YES];

    }
    else
    {
        [TableView setEditing:YES animated:YES];
    }
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [[[LEItemStore sharedStore] allItems] count];
}

-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"UITableViewCell"];

    if (!cell) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"UITableViewCell"];
    }

    LEItem *p = [[[LEItemStore sharedStore] allItems]objectAtIndex:[indexPath row]];

    [[cell textLabel] setText:[p description]];

    return cell;
}

-(IBAction)newItem:(id)sender {
    LEItem *newItem = [[LEItemStore sharedStore] createItem];
    [TableView reloadData];
}

-(void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (editingStyle == UITableViewCellEditingStyleDelete)
    {
        LEItemStore *ps = [LEItemStore sharedStore];
        NSArray *items = [ps allItems];
        LEItem *p = [items objectAtIndex:[indexPath row]];
        [ps removeItem:p];

        [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
    }
}

-(void)tableView:(UITableView *)tableView moveRowAtIndexPath:(NSIndexPath *)sourceIndexPath toIndexPath:(NSIndexPath *)destinationIndexPath
{
    [[LEItemStore sharedStore] moveItemAtIndex:[sourceIndexPath row] toIndex:[destinationIndexPath row]];
}

-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{

    //NSArray *items = [[LEItemStore sharedStore] allItems];
    //BNRItem *selectedItem = [items objectAtIndex:[indexPath row]];
}

-(void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];
    [[self TableView]reloadData];
} 
```

看起来好像 TableView 没有重新加载它的数据。顺便说一句，所有连接都已建立。绝对什么都没有出现。只是我的工具栏，即使我添加了一个项目，TableView 也不会改变。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T00:34:48.467

好的，在注释中清除后，您的问题是您尚未设置数据源（您也可以使用数组控制器执行此操作）。所以你设置了委托和数据源：

```
[TableView setDelegate:self];
[TableView setdataSource: self]; 
```

然后你声明这个类也实现 UITableViewDataSource 协议。
并且您提供了两种基本方法（也欢迎使用可选方法）：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section; 
```

这是一个简单的数据源实现的示例，它只有一个标签说你好：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell* cell=[[UITableViewCell alloc]init];
    UILabel* label= cell.textLabel;
    label.text= @"Hello";
    return cell;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return 1;
} 
```

但是现在您知道如何提供更复杂的数据源：如果您有一个数组，您可以读取索引路径，然后使用 objectAtIndex 方法设置标签。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T00:27:01.037

我不确定这一点，但是如果您使用控制器作为数据源，那么您需要为 UITableViewDataSource 指定接口。

尝试改变：

```
@interface entriesViewController : UIViewController
   <UITableViewDelegate,UITableViewDataSource> 
```

将 viewDidLoad 中 tableView 的委托和数据源设置为控制器实例，例如

```
TableView.delegate = self;
TableView.dataSource = self; 
```

您还可以在 LEItemStore 类上实现 UITableViewDataSource 接口。如果这样做，则需要将 dataSource 属性设置为 LEItemStore 的实例。

```
TableView.delegate = self;
TableView.dataSource = [LEItemStore sharedStore]; 
```

# ruby-on-rails - Rails3 管理 UI 框架

> ID：13408021
> 
> 赞同：1
> 
> 时间：2012-11-15T23:25:48.007
> 
> 标签：ruby-on-rails, ruby, architecture, activeadmin

我们很快将在一个全新的 Rails 3 应用程序中重新编写一个使用了 5 年的 Rails 应用程序，该应用程序的代码基础非常不健全，并且具有所有新的热点。当前的应用程序有一个大量的自定义管理 UI 后端，它完全依赖于现在的管理框架。只是一些基本的控制器类和一些有用的 CSS 约定。但是维护这个 UI 需要做很多工作，特别是如果我们希望它看起来不错。

所以我在市场上寻找一个 Admin UI 框架，它可以让简单的东西变得微不足道，但没有在形式和功能上获得更复杂的定制方式。

顶级竞争者[ActiveAdmin](http://activeadmin.info/)似乎很受欢迎，在玩了一会儿之后，我有些担心。它似乎声明了一个存在于单个 ruby​​ 文件中的完整唯一的 DSL。这有点简洁，但它也与大多数其他 Rails 应用程序的架构方式完全不同。它抽象了视图、控制器的助手，并为您提供了一个纯 ruby​​ DSL。在我看来，这会妨碍在我们的管理视图中做一些棘手的事情，更高级的自定义事情。DSL 很棒，除非您想做一些他们不明确支持的事情。

我的实验中的示例“资源”，没有控制器也没有视图。

```
ActiveAdmin.register Region do
  menu parent: "Wines"

  show title: :name

  index do
    column(:zone) { |o| link_to o.zone, admin_region_path(o) }
    column(:name) { |o| link_to o.name, admin_region_path(o) }
    default_actions
  end  
end 
```

所以，问题：

1.  是不是基于单独文件中的标准 Rails MVC 架构，以及管理区域的典型控制器继承实现，实际上我应该关注什么？从长远来看，它会阻碍可扩展性吗？
2.  ActiveAdmin 中的 DSL 是否比我认为的更好、更灵活？
3.  我是否应该寻找其他一些更适合我的高度定制目标的框架？
4.  我应该停止懒惰并自己动手吗？
5.  选择`Mongoid`代替`MySQL`作为数据库是否会影响上述任何问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T00:32:39.043

值得一提的是，在 ActiveAdmin 中，您还可以使用 partials 创建自己的复杂表单

```
 form partial: 'my_form' 
```

并使用控制器块扩展控制器功能。

```
 controller do
      def edit
      end

      def index
      end
   end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T08:33:59.807

+1 活跃管理员，我在许多项目中使用它，包括我正在构建的 cms。它确实比许多新使用它的人认为它更灵活，在一天结束时你总是可以这样做：

```
controller do
  def custom_action
    Puts "hi"
  end
end 
```

（认为​​这是从手机上写的正确语法，所以这一切都在脑海中）

另外，我对继承的资源发誓，这些资源是活动管理控制器扩展的，因为它们确实（以一种好的方式）迫使你编写宁静的、可重用的代码。底线是我相信活跃的管理员在我尝试过的其他人（railsadmin 和至少一个其他人）之前取得了飞跃式发展

更新：当然，这里是inherited_resources 文档

[https://github.com/josevalim/inherited_resources](https://github.com/josevalim/inherited_resources)

这是一个直接修改控制器的例子，来自我的小 CMS 项目。

```
ActiveAdmin.register Channel do

  index do
    column :title
    column :slug
    column "Fields" do |channel|
      "#{link_to('View Fields', admin_channel_entry_fields_path(channel))}    #{link_to 'Add Field', new_admin_channel_entry_field_path(channel)}".html_safe      
    end  
    column "Actions" do |channel|
      "#{link_to('View Entries', admin_channel_entries_path(channel))}    #{link_to 'Create Entry', new_admin_channel_entry_path(channel)}".html_safe
    end
    default_actions
  end

  form :html => { :enctype => "multipart/form-data" } do |f|
    f.inputs "Channel" do
      f.input :title
      f.input :display_name
      f.input :image
    end
    f.buttons
  end

  controller do

    def begin_of_association_chain
      current_site
    end

    def tags

      query = params[:q]
       if query[-1,1] == " "
         query = query.gsub(" ", "")
         ActsAsTaggableOn::Tag.find_or_create_by_name(query)
       end

       @tags = ActsAsTaggableOn::Tag.all
       @tags = @tags.select { |v| v.name =~ /#{query}/i }
       respond_to do |format|
         format.json { render :json => @tags.collect{|t| {:id => t.name, :name => t.name }}}
       end

    end

  end

end 
```

基本上，我使用继承的资源 begin_of_association_chain 方法（我最喜欢的 IR 方法之一）将频道内的所有数据或从我的频道资源继承的任何管理资源限制到当前站点，而没有像 /admin/sites/1/channels 这样的 url - 因为我已经根据访问者输入的 url 设置 current_site。-- 无论如何，基本上一旦你在里面：

```
controller do
  puts self.inspect
end 
```

返回实际的控制器本身，例如 Admin::ChannelsController（其中 < InheritedResources::Base，可能不是直接的，但此时所有 IH 控制器方法都应该可用）。

# c# - 绘制具有计算宽度的矩形不绘制

> ID：13408022
> 
> 赞同：0
> 
> 时间：2012-11-15T23:26:00.910
> 
> 标签：c#, winforms, drawing

我正在尝试在 Windows 窗体上创建一个图形，该图形将模拟我尝试`ProgressBar`使用用作健康栏的操作。我不喜欢 ，因为当我将equal`ProgressBar`设置为 时，它会在开始时为填充设置动画。`Value``Maximum`

这是我的方法

```
private void Battlefield_Paint(object sender, PaintEventArgs e)
  {
      using (SolidBrush blackBrush = new SolidBrush(Color.Black))
      using (SolidBrush redBrush = new SolidBrush(Color.Red))
      using (Graphics formGraphics = this.CreateGraphics())
      {
          formGraphics.FillRectangle(blackBrush, new Rectangle(12, 12, 76, 23));
          formGraphics.FillRectangle(redBrush, new Rectangle(14, 14, 72*(p1.CurrentHealth/p1.MaxHealth), 19));
          int result = 72 * (p1.CurrentHealth / p1.MaxHealth);
          Console.WriteLine(result);
      }
  } 
```

我有一个计时器每 50 毫秒重绘一次表单。

我有一个问题，黑色矩形内的红色矩形一开始会画得很好，但是一旦我的角色受到伤害并且`CurrentHealth`小于`MaxHealth`，结果`72*(p1.CurrentHealth/p1.MaxHealth)`返回为 0，并且矩形甚至不会出现在屏幕，因为我认为它是用 0 宽度绘制的......

我不知道这个计算出了什么问题会导致它返回 0。我已经通过调试器运行了一堆，输入的值看起来都是正确的，起初都是 30 和 30，然后是 28， 30 下一次通过，我得到的值为 0...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T23:31:53.470

我想`CurrentHealth`和`MaxHealth`是整数，并且您正在进行整数除法，当您将 6 除以 10 时，您得到 0，而不是 0.6

你应该试试这个：

```
private void Battlefield_Paint(object sender, PaintEventArgs e)
  {
      using (SolidBrush blackBrush = new SolidBrush(Color.Black))
      using (SolidBrush redBrush = new SolidBrush(Color.Red))
      {
          e.Graphics.FillRectangle(blackBrush, new Rectangle(12, 12, 76, 23));
          e.Graphics.FillRectangle(redBrush, new Rectangle(14, 14, (int)(72.0*((double)p1.CurrentHealth/(double)p1.MaxHealth)), 19));
          int result = (int)(72.0*((double)p1.CurrentHealth/(double)p1.MaxHealth));
          Console.WriteLine(result);
      }
  } 
```

此外，您应该使用而不是每次都`e.Graphics`制作新对象。`Graphics`

# iphone - 哪个 iOS 音频 API 设计用于以低延迟从磁盘流式传输大型本地音频文件？

> ID：13408023
> 
> 赞同：1
> 
> 时间：2012-11-15T23:26:01.283
> 
> 标签：iphone, ios, audio, streaming, core-audio

我需要从磁盘播放非常大的音频文件，并将它们流式传输到内存中是最有效的。

我必须为此使用 OpenAL 还是有其他选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T03:31:20.643

在 iOS 上，对于未压缩的音频数据，您可以映射大文件，然后将样本从内存复制到 RemoteIO 回调缓冲区。RemoteIO 音频单元可以配置为比音频队列更低的延迟。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T23:28:22.223

我建议使用[音频队列](http://developer.apple.com/library/ios/#documentation/musicaudio/Conceptual/AudioQueueProgrammingGuide/Introduction/Introduction.html)。它们易于使用、有据可查且高级别的。我建议使用[扩展音频文件服务](https://developer.apple.com/library/mac/#documentation/MusicAudio/Reference/ExtendedAudioFileServicesReference/Reference/reference.html)从文件中获取音频数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T22:35:13.437

绝对使用 Audio Unit，它是 Apple 最低级别的音频 API，因此非常适合低延迟..

您应该首先使用 remoteIO 初始化音频单元，它们在 while 循环中从您的文件中读取缓冲区，并在 AudioUnit 回调中将这些缓冲区推送到 AudioUnit

# javascript - 如何在函数[onClick]中在表中添加新行，并从除新行之外的所有行中删除此属性

> ID：13408030
> 
> 赞同：-1
> 
> 时间：2012-11-15T23:26:40.717
> 
> 标签：javascript, jquery, html, dom

我编写了一个添加新行的代码，并在单击表中的现有行时删除了（onClick）属性

```
<table style="vertical-align:middle;margin:20px;" id="table_insert">
 <tr  id="tra" >
  <td >Word :</td><td onClick="insert_tr()"> <input type="text" id='word_text' ></input></td>
  <td>Definition :</td><td><input type="text" id='def_text' ></input></td>
 </tr>
</table> 
```

这是添加新行的函数，从上一个删除 onclick attr 并将其添加到新添加的行：

```
<script type="text/javascript">
function insert_tr(){
     $(this).removeAttr('onClick'); //jQuery inside javascript function
     console.log("text:"+$(this).find('td').attr('onClick') ); 
        $('#table_insert').append('<tr onClick="insert_tr()"><td>Word :</td><td > <input type="text" id="word_text" ></input></td><td>Definition :</td><td><input type="text" id="def_text" ></input></td></tr>');
}
</script> 
```

但它不起作用，在控制台屏幕上，它打印 [text:undefined] ..我该如何修复它？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T23:32:25.450

`$(this)` -- 这是一个**窗口对象**，而不是您期望的元素

传递`this`给函数

```
onClick="insert_tr(this)" 
```

/

```
function insert_tr(elem){
     $(elem).removeAttr('onClick'); //jQuery inside javascript function
     // Your code here
} 
```

# python - 获取多处理错误

> ID：13408031
> 
> 赞同：0
> 
> 时间：2012-11-15T23:26:52.933
> 
> 标签：python, module

所以我有这个；

```
from multiprocessing import Process

def run():
    4/0
    sys.exit()

def go(self):
    p = Process(target=run, args=())
    p.start()
    p.join() 
```

如何从流程中获取错误并将它们存储在文件中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T23:30:37.403

您可以使用日志模块：`import logging`并让每个进程直接在日志文件中记录错误/日志。

`logger = logging.getLogger('spam_application')`
`logger.warning("Something bad happened")`

在您的代码中执行以下操作。注意 - 这是一个旋转记录器，您也可以使用其他记录器。[http://docs.python.org/2/library/logging.html]

```
from multiprocessing import Process
import logging
from logging.handlers import RotatingFileHandler 

r_logger = logging.getLogger('parsexmlfiles')

def set_logger()
    FORMAT = '%(asctime)-15s %(clientip)s %(user)-8s %(message)s'
    parser_logger = logging.getLogger('A_A_logfile')

    if isdaemon is True:
        # Log into a Log File.
        rotatingFH = RotatingFileHandler("/tmp/A_Alogfile.log", mode='a', 
                                     maxBytes=7340032, backupCount=4,
                                     encoding=None, delay=False)
        rotatingFH.setFormatter(logging.Formatter(
                                fmt="%(asctime)s : %(levelname)s : %(message)s", 
                                datefmt=None))
        parser_logger.addHandler(rotatingFH)
        parser_logger.setLevel(logging.DEBUG)

def run():
    4/0
    r_logger.info("Info Message")
    sys.exit()

def go(self):
    set_logger()
    p = Process(target=run, args=())
    p.start()
    p.join() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T23:50:30.263

将函数包装在 try/except 中，一揽子捕获异常。使用 python logging 模块来记录堆栈跟踪，也许还可以使用 locals() 来记录上下文。

您也可以跳过日志记录模块，只使用“打印”将异常处理消息打印到控制台。

# git - git 结帐 -b

> ID：13408035
> 
> 赞同：1
> 
> 时间：2012-11-15T23:27:07.940
> 
> 标签：git

上次我使用带有两个 args 的 -b 选项创建一个新分支时发生了一些事情：

我像这样从master创建了一个分支

```
git checkout -b test remotes/origin/master 
```

这创建了一个分支，但它也将我的配置设置为：

```
branch.test.remote=origin
branch.test.merge=refs/heads/master 
```

我将我的新分支推送到 github，并继续在我的测试分支中做一些工作。过了一会儿，我不得不向我的主分支添加一些东西，所以我做了并推送。

然后我切换到我的测试分支，在执行 git pull 之后，我在测试分支中得到了更改。我认为这与我如何创建分支以及如何设置配置有关。

我试图查找解释，但我只看到第二个参数是 .

有人可以解释这里到底发生了什么吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T01:08:46.073

你是对的。你没有按照他们通常的方式做事情，现在测试是跟踪大师。您要做的是将参数添加到`checkout -b`命令中以不为分支设置跟踪。然后，当您想将测试推送到服务器时，通过执行`git push -u origin test`.

# c# - 使用 FitNesse 发送 nServiceBus 消息

> ID：13408037
> 
> 赞同：0
> 
> 时间：2012-11-15T23:27:24.797
> 
> 标签：c#, nservicebus, fitnesse

我无法将我的 FitNesse 测试连接到用于`nServiceBus`向 MSMQ 发送消息的 c# 项目。

```
__EXCEPTION__:System.Reflection.TargetInvocationException: 
Exception has been thrown by the target of an invocation. 
---> System.InvalidOperationException: No configuration file found at: .\FitNesse\slim\Runner.exe.config, 
the default configuration for nservicebus requires an app.config to be present. Please add one! 
```

我曾尝试使用标志将 wiki 页面指向 the`app.config`和 the ，但都失败了。`app.dll.config``-a`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T16:46:29.390

我想通了，我将所有第三方 dll 复制到包含 Runner.exe 的文件夹中，并复制了我的 app.config 并将其重命名为 Runner.exe。一切正常，希望这对其他人有帮助。

# jquery - Safari 3.2.2 (525.28.1) 无法识别偏移量

> ID：13408047
> 
> 赞同：0
> 
> 时间：2012-11-15T23:28:37.643
> 
> 标签：jquery, safari, cross-browser, offset

在我的 Safari（我使用 windows vista）中，左侧和顶部的偏移量始终为零。这不仅是我的脚本，也是演示页面 [jQuery Offset](http://api.jquery.com/offset/)。在 safari 中查看时，该文档上的示例显示 0 偏移，即使没有 display:inline、display:none 或 visibility: hidden。

```
$("*", document.body).click(function (e) {
var offset = $(this).offset();
e.stopPropagation();
$("#result").text(this.tagName + " coords ( " + offset.left + ", " +
offset.top + " )"); 
```

}); 有什么已知的解决方案吗？谢谢

# rest - 创建一个接受 POST 和 GET 的 Jax-RS RESTful 服务？

> ID：13408049
> 
> 赞同：7
> 
> 时间：2012-11-15T23:28:48.750
> 
> 标签：rest, jakarta-ee, jersey, jax-rs, resteasy

我正在将我现有的一项服务转换为 RESTful，并且我已经掌握了使用 RestEasy 的基本功能。我的一些客户端应用程序应该能够对多个服务执行 GET 和 POST 请求。我只是在寻找围绕 jax-rs 是否有任何简单的方法来指定 API 应该同时接受 GET 和 POST。接下来你可以找到一个测试方法，如果你看到任何方法而不用@GET和@QueryParam在另一个类中复制它，请告诉我。

```
@POST
@Path("/add")
public Response testREST(@FormParam("paraA") String paraA,
        @FormParam("paraB")  int paraB) {

    return Response.status(200)
            .entity("Test my input : " + paraA + ", age : " + paraB)
            .build();

} 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-15T23:38:06.723

只需将您的方法主体放在另一个方法中，并为每个 HTTP 动词声明一个公共方法：

```
@Controller
@Path("/foo-controller")
public class MyController {

    @GET
    @Path("/thing")
    public Response getStuff() {
        return doStuff();
    }

    @POST
    @Path("/thing")
    public Response postStuff() {
        return doStuff();
    }

    private Response doStuff() {
        // Do the stuff...
        return Response.status(200)
                .entity("Done")
                .build();
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-20T08:24:07.077

正如[维基百科](http://en.wikipedia.org/wiki/Representational_state_transfer#RESTful_web_services)所说，如果 API 是具有四个已定义方面的资源集合，那么它就是 RESTful：

*   Web 服务的基本 URI，例如`http://example.com/resources/`
*   Web 服务支持的数据的 Internet 媒体类型。这通常是 XML，但可以是任何其他有效的 Internet 媒体类型，只要它是有效的超文本标准。
*   Web 服务使用 HTTP 方法（例如，GET、PUT、POST 或 DELETE）支持的一组操作。
*   API 必须是超文本驱动的。

通过减少和之间的差异`GET`，`POST`你违反了第三个方面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T10:48:19.017

如果此方案适合您的所有资源，您可以创建一个包装请求的 ServletFilter，并在每次请求该方法时返回 Get 或 Post。

# java - 使用静态导入时出现未经检查的异常，这是怎么回事？

> ID：13408053
> 
> 赞同：4
> 
> 时间：2012-11-15T23:29:23.267
> 
> 标签：java, static-methods, unchecked-exception

使用继承的静态方法的静态导入时，我遇到了一些奇怪的行为：

com/example/util/BaseUtil.java：

```
package com.example.util;

/*default*/ class BaseUtil {
    public static final void foo(){ System.out.println("foo"); }
} 
```

com/example/util/Util.java：

```
package com.example.util;

public final class Util extends BaseUtil{
    public static void bar(){ System.out.println("bar"); }
    //foo() will be inherited
} 
```

com/example/UtilTest.java

```
package com.example;

import static com.example.util.Util.bar;
import static com.example.util.Util.foo;

public class UtilTest {
    public static void main(String[] args) {
        bar();
        foo();
    }
} 
```

运行`UtilTest`导致未经检查的异常！

> 线程“主”java.lang.IllegalAccessError 中的异常：试图从类 com.example.UtilTest 访问类 com.example.util.BaseUtil
> 
> ```
>  at com.example.UtilTest.main(UtilTest.java:15) 
> ```

但是，如果我通过`Util`（没有静态导入）引用这些方法，一切都会按预期工作：

com/example/UtilTest.java

```
package com.example;

import com.example.util.Util;

public class UtilTest {
    public static void main(String[] args) {
        Util.bar();
        Util.foo();
    }
} 
```

那么，什么给了？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T23:41:10.757

```
/*default*/ class BaseUtil { //only visible within the package com/example/util 
```

该类具有默认的访问说明符，这使得它在该包之外不可见。

您需要将其公开。

**更新**

以下是反编译的样子：

```
public class com.example.UtilTest extends java.lang.Object{
public com.example.UtilTest();
  Code:
   0:   aload_0
   1:   invokespecial   #8; //Method java/lang/Object."<init>":()V
   4:   return

public static void main(java.lang.String[]);
  Code:
   0:   invokestatic    #16; //Method com/example/util/Util.bar:()V
   3:   invokestatic    #21; //Method com/example/util/BaseUtil.foo:()V
   6:   return

} 
```

以下是我使用 JD GUI 得到的结果

```
package com.example;

import com.example.util.BaseUtil;
import com.example.util.Util;

public class UtilTest
{
  public static void main(String[] args)
  {
    Util.bar();
    BaseUtil.foo();
  }
} 
```

这当然不会编译。

在这里看起来像编译器中的一个漏洞（可能是由于静态导入）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T00:33:45.457

不完全是答案，但在导入静态函数时需要考虑其他一些问题。

当您使用静态函数/常量时，它们有时会被内联编译。这取决于您使用的编译器。我不记得我的头顶是哪些。

当您从外部库导入静态变量/函数，然后在运行时升级该库时，这是一个问题，您的代码中仍将包含 OLD 静态函数。

我的建议是完全避免使用静态函数，而是使用单例对象。使用 spring 等框架在运行时将单例注入到您的类中。

最好将此对象设为最终对象，并使用构造函数对其进行设置。

这也使测试更容易，因为您可以模拟单例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T23:55:47.633

您的代码的第一个版本有效地编译为

```
package com.example;

public class UtilTest {
    public static void main(String[] args) {
        com.example.util.Util.bar();
        com.example.util.BaseUtil.foo();
    }
} 
```

并且由于`BaseUtil`具有包范围，因此您不能从不同的包中调用它，并且会出现异常。

您的代码的第二个版本有效地编译为

```
package com.example;

public class UtilTest {
    public static void main(String[] args) {
        com.example.util.Util.bar();
        com.example.util.Util.foo();
    }
} 
```

由于`Util`是一个公共类，您可以访问所有方法，包括`foo`, 因为`foo`对 Util 可见。

令我困惑的是为什么任何版本都能正确编译？

# mysql - 检索已经存在的表的 CREATE TABLE 代码？

> ID：13408054
> 
> 赞同：1
> 
> 时间：2012-11-15T23:29:24.487
> 
> 标签：mysql, sql, create-table

有没有办法做到这一点？

以防 DBMS 命令历史被清除，或者在我的情况下，随着时间的推移使用了许多 ALTER TABLE。

我正在使用 MySQL。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T23:30:49.710

是的，它很简单

```
SHOW CREATE TABLE yourtable; 
```

这将包括所有后续`ALTER TABLE`语句。您无法检索表的*原始*状态。

这是[相关文档](http://dev.mysql.com/doc/refman/5.0/en/show-create-table.html)

# android - 如何在具有同步功能的 android 2.3 中创建日历？

> ID：13408055
> 
> 赞同：0
> 
> 时间：2012-11-15T23:29:45.877
> 
> 标签：android, calendar, android-2.3-gingerbread

我用这段代码创建了一个新的日历。安卓 2.3.5

```
public long CreateNewCalendar(String nameSchedule) {
    try{
        ContentValues calendar = new ContentValues();
        calendar.put("_sync_account", nameSchedule); // My account
        calendar.put("_sync_account_type", "com.google");
        // calendar.put("_sync_id", 1); // null
        calendar.put("name", nameSchedule);
        calendar.put("displayName", nameSchedule);
        calendar.put("hidden", 0);
        calendar.put("color", 0xFF008080);
        calendar.put("access_level", 700);
        calendar.put("selected", 1); // 0
        calendar.put("sync_events", 1);
        // calendar.put("createdByCategory", 0); //Doesn't work on Motorola
        // Droid / Milestone
        calendar.put("timezone",  TimeZone.getDefault().getID());
        calendar.put("ownerAccount", nameSchedule);
        Uri calendarUri = Uri.parse(CalendarBase);
        Uri insertCalendarUri = ActivitySource.getContentResolver().insert(calendarUri, calendar);
        return ContentUris.parseId(insertCalendarUri);
    } catch (Exception e) {
        return -1;
    }
} 
```

日历已成功创建，我可以在日历应用程序中看到它。但是重启手机后，日历就不存在了。怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T16:56:14.480

不要在名称、ownerAccount 和 _sync_account 中使用特殊字符，如 '-、$' 等。一切都会好起来的：）

# javascript - 动态加载表单元素值

> ID：13408056
> 
> 赞同：0
> 
> 时间：2012-11-15T23:29:48.277
> 
> 标签：javascript, jquery

是否可以使用 jQuery 获取表单中的动态值？

例如我有这个：

```
<form id="contact" method="post" action"contact.php" class="ajaxForm">
    <label>Name:</label>
    <input type="text" name="name" />
    <label>Email:</label>     
    <input type="text" name="email"/>
    <label>Message:</label>
    <textarea name="message"></textarea>
    <input type="submit" value="send!"/>
</form> 
```

在js中：

```
$(".ajaxForm").send(function(){
    var page = $(this).attr("action");
}); 
```

我想用 .each 之类的循环获取 var name=value，但代码只读取输入/文本区域/选择数据。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T23:37:57.807

您可以使用 jQuery 在表单中获取 input/textarea/select 值。

```
$(".ajaxForm").send(function(){
    var page = $(this).attr("action");
    var its = $(this).find('input, textarea, select');
    its.each(function(){
         console.log($(this).val());
    })
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T23:36:28.310

采用`.children()`

```
$(".ajaxForm").send(function(){
    var page = $(this).attr("action");
    $(this).children('input').each(function() { // Loop over all  the children
                                                // that are input elements
           console.log( $(this).val() );
                       OR

           console.log( this.value );
    });

}); 
```

# grails - 所有命令的 grails 错误

> ID：13408060
> 
> 赞同：0
> 
> 时间：2012-11-15T23:30:12.117
> 
> 标签：grails

我需要让 grails 从 netflix 编译 asgard，但我似乎遇到了一个我还没有找到解决方案的问题。

```
$  $GRAILS_HOME/bin/grails help

| Error java.lang.reflect.InvocationTargetException
| Error         at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
| Error         at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
| Error         at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
| Error         at java.lang.reflect.Method.invoke(Method.java:597)
| Error         at org.codehaus.groovy.grails.cli.support.GrailsStarter.rootLoader(GrailsStarter.java:234)
| Error         at org.codehaus.groovy.grails.cli.support.GrailsStarter.main(GrailsStarter.java:262)
| Error Caused by: java.lang.IllegalAccessError: class sun.reflect.GeneratedMethodAccessor1 cannot access its superclass sun.reflect.MethodAccessorImpl
| Error         at sun.misc.Unsafe.defineClass(Native Method)
| Error         at sun.reflect.ClassDefiner.defineClass(ClassDefiner.java:45)
| Error         at sun.reflect.MethodAccessorGenerator$1.run(MethodAccessorGenerator.java:381)
| Error         at java.security.AccessController.doPrivileged(Native Method)
| Error         at sun.reflect.MethodAccessorGenerator.generate(MethodAccessorGenerator.java:377)
| Error         at sun.reflect.MethodAccessorGenerator.generateMethod(MethodAccessorGenerator.java:59)
| Error         at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:28)
| Error         at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
| Error         at java.lang.reflect.Method.invoke(Method.java:597)
| Error         at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSiteNoUnwrap.invoke(PogoMetaMethodSite.java:252)
| Error         at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.callCurrent(PogoMetaMethodSite.java:52)
| Error         at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallCurrent(CallSiteArray.java:46)
| Error         at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:133)
| Error         at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:149)
| Error         at grails.util.BuildSettings.establishProjectStructure(BuildSettings.groovy:1452)
| Error         at grails.util.BuildSettings.setBaseDir(BuildSettings.groovy:835)
| Error         at grails.util.BuildSettings$setBaseDir.callCurrent(Unknown Source)
| Error         at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallCurrent(CallSiteArray.java:46)
| Error         at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:133)
| Error         at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:141)
| Error         at grails.util.BuildSettings.<init>(BuildSettings.groovy:774)
| Error         at grails.util.BuildSettings.<init>(BuildSettings.groovy:749)
| Error         at org.codehaus.groovy.grails.cli.GrailsScriptRunner.main(GrailsScriptRunner.java:164)
| Error         ... 6 more

$  java -version
java version "1.6.0_37"
Java(TM) SE Runtime Environment (build 1.6.0_37-b06-434-11M3909)
Java HotSpot(TM) 64-Bit Server VM (build 20.12-b01-434, mixed mode) 
```

2.1.1 的 zip 文件来自 grails 站点，我还没有找到任何丢失的东西。所有 grails 命令都在执行此操作。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T11:46:44.557

你在关注[阿斯加德推荐](https://github.com/Netflix/asgard/wiki/Quick-Start-Guide)吗？？

```
Run Sun/Oracle Java 6 on Linux or Mac
    Avoid Java 7
    Avoid OpenJDK
    Avoid Windows
    Yes, Asgard runs on Grails, and Grails runs on Java, and Java is supposed to be "run
 anywhere", except for the fact that Asgard users have reported incompatibility problems with 
Java 7, OpenJDK, and Windows. A future version of Asgard will be Java 7 compatible, and 
perhaps it will work with OpenJDK eventually. The Windows issue is less likely to get 
debugged by Netflix engineers, but if you figure it out feel free to send a pull request. 
```

# php - PHP MySQL Top 5 引用函数

> ID：13408061
> 
> 赞同：0
> 
> 时间：2012-11-15T23:30:19.597
> 
> 标签：php, mysql, function, ranking

我有一个名为的表`users`，如下所示：

-id
-email
-login
-admin
-coins
-cash
-premium -IP
-pass -ref -signup -online -promote -activate
-banned -rec_hash -country -c_changes -sex -daily_bonus

如果说 id 为 81 的用户推荐了 10 个人，那么这 10 个人的`ref`列中将有“81”。

我想创建一个前 5 名的推荐表，但我在查询和显示 PHP 时遇到了问题，有人能帮忙吗？

我忘了提如果他们没有推荐人，这表明`0`我如何将 0 排除在推荐人之外？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T23:33:16.673

您可以像这样在单个 SQL 语句中执行此操作：

```
SELECT ref, COUNT(*) AS num FROM users
GROUP BY ref ORDER BY num DESC LIMIT 5 
```

但这只会让您获得 5 个 ID，而不是他们的用户行。然后，您可以执行进一步查询以获取实际行。或者，将上述查询与连接一起使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T23:41:45.467

> 如果他们没有推荐，则显示为 0

凌乱的设计 - 这应该是空的。不管...

```
 SELECT u.login, ilv.referred
 FROM
 (SELECT ref, COUNT(*) AS referred
   FROM users
  WHERE ref IS NOT NULL
  AND ref>0
  GROUP BY ref
  ORDER BY COUNT(*) DESC
  LIMIT 0,5) ilv
INNER JOIN users u
ON ilv.ref=users.id
ORDER BY ilv.referred DESC; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T23:42:20.107

或者像这样的 SQL：

```
SELECT u.*, COUNT(*) as referrers FROM users r JOIN users u ON r.ref = u.id
GROUP BY u.id ORDER BY referrers DESC LIMIT 5 
```

即使在同一个表上进行连接，只使用一条语句也会更快。

# coldfusion - CFHTTP 和 HTTPS 发布问题

> ID：13408062
> 
> 赞同：1
> 
> 时间：2012-11-15T23:30:20.273
> 
> 标签：coldfusion, https, cfhttp

我正在使用`cfhttp`POST 将 XML 格式的作业发布到 HTTPS url。我得到以下错误。

> I/O 异常：证书“jobserve ltd”中的名称与主机名“xml.jobserve.com”不匹配

那么根据这里的说明[http://www.coldfusionmuse.com/index.cfm/2005/1/29/keystore](http://www.coldfusionmuse.com/index.cfm/2005/1/29/keystore)我做了以下事情。

*   在 IE 浏览器中，我去了[https://xml.jobserve.com](https://xml.jobserve.com)
*   使用复制到文件按钮从详细信息选项卡导出证书。
*   转到命令提示符并将 SSL 证书 (.cer) 文件导入`C:\ColdFusion8\runtime\jre\lib\security`使用 ColdFusion 附带的 keytool.exe。导入成功。

后来去再次发布我的请求......同样的问题。还需要做什么？我们使用 CF 8，这是一个多域 SSL 证书 (https://xml.jobserve.com)。

你能帮忙吗？

谢谢， 海特什

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T03:00:32.230

插入证书后，您必须重新启动 ColdFusion 服务器。

此知识库文章包含其他信息。它还为您的信任库 (cf_root/runtime/lib) 提供了不同的位置。最终它需要是您的 jrun.xml 文件中指定的位置。

> *注意：*如果您使用 JRun 作为底层 J2EE 服务器（服务器配置或带有 JRun 配置的 Multiserver/J2EE）并为内部 JRun Web 服务器 (JWS) 启用 SSL，则需要将证书导入到**信任库在 jrun.xml 文件中为 Secure JWS 而不是 JRE 密钥库定义**。默认情况下，该文件称为“trustStore”，通常位于`jrun_root/lib`具有 JRun 配置的 Multiserver/J2EE 或`cf_root/runtime/lib`ColdFusion 服务器配置的下方。您使用相同的 Java 密钥工具来管理 trustStore。

来自：[Jrun 帮助 / 导入证书 | 证书存储 | 冷融合](http://helpx.adobe.com/coldfusion/kb/import-certificates-certificate-stores-coldfusion.html)

[Naveen Chhabra 的博客](http://naveenchhabra.wordpress.com/2010/10/18/trusting-certificate-in-coldfusion-using-keytool-utility/)也有类似信息的逐步过程。

# sql-server - 使用 HTTPS 时散列用户密码

> ID：13408066
> 
> 赞同：2
> 
> 时间：2012-11-15T23:30:34.377
> 
> 标签：sql-server, security, hash, https, passwords

即使我使用的是 HTTPS，是否应该在客户端使用 hash(password + salt) 方法对密码进行哈希处理？还是应该在它到达带有内置函数的 SQL SERVER 2008 R2 时对其进行散列？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T23:35:55.097

为什么要在客户端散列？这是用 Javascript 编写的单页应用程序吗？即使这样，您也必须使用某种服务器端语言连接到数据库（ASP.NET？PHP？）。在服务器端进行加盐和散列。客户端对我来说很糟糕......由于某种原因，如果你有逻辑和随机生成发生在客户端，那么加盐/哈希过程似乎更容易受到攻击。我无法指出具体的攻击——但推送到客户端似乎是一件不必要的事情（除非你可能无法获得 SSL）。

无论您是使用服务器端语言还是直接在数据库中进行，都不是特别重要。我更喜欢在代码中进行计算，然后将最终哈希发送到 SQL。使用内置 SQL Server 函数很烦人，并且版本之间存在问题 - 而且您的代码永远锁定在 Microsoft 领域。

**TL;DR**在服务器端进行，而不是在客户端，而不是直接在数据库中。如果您希望在发送之前通过线路加密明文密码（绝对应该），则 HTTPS 是必需的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T23:35:45.970

据我所知，如果有人发现安全漏洞并从数据库中窃取密码列表，密码的加盐（也）很有用。如果加盐，几乎不可能用彩虹表之类的方法找回清晰的密码。否则，它们可能会被破解。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T23:36:23.393

如果您假设 HTTPS 已损坏，则会出现许多安全后果。基本上一切都崩溃了。

不要这样做。这是浪费你的时间。以更好的方式使用它，例如开发用户关心的功能。

只需在服务器上进行标准哈希和加盐，尽量不要发明新的安全方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T23:36:37.420

如果您使用 SSL，客户端和服务器之间的通信将被加密。

问题的后半部分稍微复杂一些。尽管 SQL Server 具有内置加密功能，但它面临的问题是任何有权访问数据库的人都可以使用它。

如果您在代码中加密并将加密版本发送到数据库，它可以在数据库受损的情况下为您提供保护 - 他们可能已经侵入您的数据库，但他们无法解密数据。

所以我的答案是......既不是客户端，也不是数据库 - 在两者之间的代码中加密和加盐！

# c++ - Visual Studio 2008 64 位部署项目未按预期部署 64 位 VC90 合并模块

> ID：13408068
> 
> 赞同：0
> 
> 时间：2012-11-15T23:30:40.103
> 
> 标签：c++, visual-studio, visual-studio-2008

我目前正在为 Microsoft Windows 2008 开发 64 位二进制文​​件的 64 位安装程序。先决条件之一是 microsoft visual c++ 2008 运行时库，它不能使用 Microsoft 可再发行包安装。我已经了解了 Microsoft Visual Studio 中使用的合并模块，并包括了这四个：

Microsoft_VC90_ATL_x86_x64.msm Microsoft_VC90_CRT_x86_x86.msm policy_9_0_Microsoft_VC90_ATL_x86_64.msm policy_9_0_Microsoft_VC90_ATL_x86_64.msm

但是，当我尝试在 Windows 2008 R2 64 位机器上安装 64 位安装程序时，我收到此错误（使用 sxstrace.exe）

```
=================
Begin Activation Context Generation.
Input Parameter:
    Flags = 0
    ProcessorArchitecture = AMD64
    CultureFallBacks = en-US;en
    ManifestPath = C:\Program Files\Nimsoft\Nimsoft Robot x64\bin\nimbus.exe
    AssemblyDirectory = C:\Program Files\Nimsoft\Nimsoft Robot x64\bin\
    Application Config File = 
-----------------
INFO: Parsing Manifest File C:\Program Files\Nimsoft\Nimsoft Robot x64\bin\nimbus.exe.
    INFO: Manifest Definition Identity is (null).
    INFO: Reference: Microsoft.VC90.CRT,processorArchitecture="amd64",publicKeyToken="1fc8b3b9a1e18e3b",type="win32",version="9.0.21022.8"
INFO: Resolving reference Microsoft.VC90.CRT,processorArchitecture="amd64",publicKeyToken="1fc8b3b9a1e18e3b",type="win32",version="9.0.21022.8".
    INFO: Resolving reference for ProcessorArchitecture amd64.
        INFO: Resolving reference for culture Neutral.
            INFO: Applying Binding Policy.
                INFO: No publisher policy found.
                INFO: No binding policy redirect found.
            INFO: Begin assembly probing.
                INFO: Did not find the assembly in WinSxS.
                INFO: Attempt to probe manifest at C:\Windows\assembly\GAC_64\Microsoft.VC90.CRT\9.0.21022.8__1fc8b3b9a1e18e3b\Microsoft.VC90.CRT.DLL.
                INFO: Attempt to probe manifest at C:\Program Files\Nimsoft\Nimsoft Robot x64\bin\Microsoft.VC90.CRT.DLL.
                INFO: Attempt to probe manifest at C:\Program Files\Nimsoft\Nimsoft Robot x64\bin\Microsoft.VC90.CRT.MANIFEST.
                INFO: Attempt to probe manifest at C:\Program Files\Nimsoft\Nimsoft Robot x64\bin\Microsoft.VC90.CRT\Microsoft.VC90.CRT.DLL.
                INFO: Attempt to probe manifest at C:\Program Files\Nimsoft\Nimsoft Robot x64\bin\Microsoft.VC90.CRT\Microsoft.VC90.CRT.MANIFEST.
                INFO: Did not find manifest for culture Neutral.
            INFO: End assembly probing.
    ERROR: Cannot resolve reference Microsoft.VC90.CRT,processorArchitecture="amd64",publicKeyToken="1fc8b3b9a1e18e3b",type="win32",version="9.0.21022.8".
ERROR: Activation Context generation failed.
End Activation Context Generation. 
```

是否有一些我没有包含在包装中的东西或一些我没有使用的设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T04:40:55.640

`Microsoft.VC90.CRT.DLL`这是因为找不到dll ，它属于`Microsoft Visual C++ 2008 Redistributable Package`，你可以在[这里](http://www.microsoft.com/en-us/download/details.aspx?id=2092)下载包，然后安装那个包再试一次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-30T11:50:29.710

您应该能够在

C:\Program Files (x86)\Common Files\Merge Modules

（是的，即使是 64 位合并模块也在那里）

如果不是，那么您的 2008 年安装就搞砸了。

# nexus - Nexus OSS：我需要为用户授予什么权限，以便第二台服务器可以将第一台服务器用作代理？

> ID：13408075
> 
> 赞同：0
> 
> 时间：2012-11-15T23:31:04.547
> 
> 标签：nexus

我有一个主要的 Nexus OSS 服务器，它存储我们的构建工件以及代理中心和其他各种站点。为了加快我们与 Internet 连接性相对较差的远程站点之一的访问速度，我正在设置一个服务器来代理主服务器。

我们不想允许匿名访问主服务器，因此我在主服务器上创建了一个代理用户，该用户具有对所有存储库的读取/查看权限。然后我在新服务器上配置存储库来代理主服务器，使用代理用户进行访问。但是，新服务器无法从主服务器获取信息。我收到“RemoteAuthenticationNeededException：未经授权”。

我认为代理用户可能在主服务器上没有正确的权限，但我无法弄清楚代理用户需要什么权限。如果我授予代理用户 UI：基本 UI 权限和 UI：存储库浏览器权限，则用户确实可以查看适当的存储库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T03:51:13.363

对于您的用例，我相信您需要的权限是“工件下载”。那是允许用户获取工件的方法。

# ubuntu - 通过代理在 Ubuntu 上安装 Heroku Toolbelt

> ID：13408092
> 
> 赞同：4
> 
> 时间：2012-11-15T23:32:06.293
> 
> 标签：ubuntu, heroku-toolbelt

我正在尝试在通过代理连接到 Internet 的 Ubuntu 机器上安装 Heroku Toolbelt。我对 Ubuntu 及其设置很陌生，但我设法连接到互联网很好。互联网似乎工作正常，只是通过 apt-get 浏览和获取更新总是成功的，并且 curl 命令返回预期的内容。

当我尝试在 Heroku Toolbelt 站点上运行命令时：

```
wget -qO- https://toolbelt.heroku.com/install-ubuntu.sh | sh 
```

我收到一些错误：

```
me@mypc-vb:~/Documents/stuff$ wget -qO- https://toolbelt.heroku.com/install-ubuntu.sh | sh
This script requires superuser access to install apt packages.
You will be prompted for your password by sudo.
[sudo] password for hsiehbe: 
--2012-11-15 15:09:46--  https://toolbelt.heroku.com/apt/release.key
Resolving toolbelt.heroku.com... failed: Name or service not known.
wget: unable to resolve host address `toolbelt.heroku.com'
gpg: no valid OpenPGP data found.
Ign http://us.archive.ubuntu.com oneiric InRelease
Ign http://security.ubuntu.com oneiric-security InRelease           
Ign http://extras.ubuntu.com oneiric InRelease                       
...
Fetched 12.9 MB in 32s (394 kB/s)                                                                                     
Reading package lists... Done
W: GPG error: http://toolbelt.heroku.com ./ Release: The following signatures couldn't be verified because the public key is not available: NO_PUBKEY C927EBE00F1B0520
Reading package lists... Done
Building dependency tree       
Reading state information... Done
The following extra packages will be installed:
  foreman heroku libreadline5 libruby1.9.1 ruby1.9.1
Suggested packages:
  ruby1.9.1-examples ri1.9.1 graphviz ruby1.9.1-dev
The following NEW packages will be installed:
  foreman heroku heroku-toolbelt libreadline5 libruby1.9.1 ruby1.9.1
0 upgraded, 6 newly installed, 0 to remove and 27 not upgraded.
Need to get 4,815 kB of archives.
After this operation, 15.9 MB of additional disk space will be used.
WARNING: The following packages cannot be authenticated!
  foreman heroku heroku-toolbelt
E: There are problems and -y was used without --force-yes 
```

最明显的错误可能只是

```
Resolving toolbelt.heroku.com... failed: Name or service not know. 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-07T15:24:32.750

在代理后面安装heroku toolbelt时，我遇到了同样的问题：

问题的核心是这样的：

```
GPG error: http://toolbelt.heroku.com ./ Release: The following
signatures couldn't be verified because the public key is not
available: NO_PUBKEY C927EBE00F1B0520 
```

您会注意到，下次运行 apt-get update 时，您将获得相同的消息。似乎 ubuntu 无法获取 heroku 包存储库的公钥。

要克服这个问题，您可以按照此处所述手动附加公钥：http: [//en.kioskea.net/faq/809-debian-apt-get-no-pubkey-gpg-error](http://en.kioskea.net/faq/809-debian-apt-get-no-pubkey-gpg-error)

```
gpg --keyserver pgpkeys.mit.edu --recv-key  C927EBE00F1B0520 
gpg -a --export C927EBE00F1B0520 | sudo apt-key add - 
```

在此之后，安装脚本将运行正常。

# openerp - openERP：更改搜索的“创建”按钮行为：产品

> ID：13408096
> 
> 赞同：1
> 
> 时间：2012-11-15T23:32:40.970
> 
> 标签：openerp

我正在尝试从 openERP 的默认新产品页面继承和添加/删除一些字段。我想更改搜索产品视图中默认“创建”按钮的行为，以将用户发送到*新*修改的产品页面，但我似乎无法更改它。我已经尝试过 XPath、position="replace" 和其他一些东西，但似乎没有任何效果。我该如何抓住它？只需使用 XPath 并将其替换为另一个按钮？

如何更改单击该按钮的结果？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T06:02:36.090

我认为您正在尝试删除树视图中显示的创建按钮。要删除它，有一个名为 .openerp 的 openerp 模块`web-remove-quick-create`。它在[openerp 应用程序](http://apps.openerp.com/addon/8222?filter=%7B%22order_by%22%3a%20%22click_counter%20desc%22,%20%22text_search%22%3a%20%22web%20remove%22%7D&page=0)中。请使用这个。否则尝试修改 jc 和 css 文件。谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T12:47:20.860

As I understand you want to modify product form view and remove some of the unnecessary fields for your application.

you just need to create inherited views for the fields you need to remove from the form view. for 6.1 to remove the weight field in product form view

1.  activate the developer mode by clicking information button next to the exit button on top right and click to the activate developer mode text.
2.  open the product form you would like to modify
3.  select manage views from developer drop down menu
4.  click edit
5.  select the field you would like to remove
6.  click on inherited view button to create an inherited view and confirm the dialogue go to views from settings > Customization > User interface > views
7.  find the inherited view you just created by writing name or object and checking the few results.
8.  the inherited view is like

 `````
<?xml version='1.0'?>
<field name='weight' position='after'> </field> 
```` 

`- to remove the weight field just change the position property with replace`

 ``````
<?xml version='1.0'?>
<field name='weight' position='replace'> </field> 
````  `save the inherited view, its done. you can also achieve this by just adding invisible to the filed property like

 `````
<?xml version='1.0'?>
<field name='weight' position='replace'><field name='weight' invisible='1'?></field> 
````  `if there are more than one inherited views referring to the same field you may need to increase or decrease the sequence value of the inherited view to change the order of inherited view to get the necessary behavior.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T13:46:39.780

您没有描述您想要实现的目标，但可能的解决方案可能是：

*   授予您的用户对 Product 模型的只读访问权限，让他们
*   通过向导创建新产品，通过客户端操作打开。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T09:46:40.970

杰夫，

您不能通过 uisng XPath, position="replace" 删除创建按钮。创建按钮是从视图模板的一部分，您可以在 web 插件部分 formview js 文件中找到它。和 qweb xml 模板，您可以使用一些硬代码对其进行 Web 修改，但这会影响所有视图，因为创建按钮是所有视图的通用/通用模板。所以即使你尝试 CSS 和 JS 的东西我也不建议。

谢谢你，``````

# actionscript-3 - 使用 Flash 加载图像并保持纵横比并集中

> ID：13408097
> 
> 赞同：0
> 
> 时间：2012-11-15T23:32:47.243
> 
> 标签：actionscript-3, flash

我有两个问题要解决。

首先，我有这个函数将图像（基于 url）添加到影片剪辑中，并且我尝试保留影片剪辑中的纵横比。但是我需要集中，我找不到将加载器 x 和 y 更改为好的值的方法。

```
function addImg(movieclip,url):void {
    var urlRequest:URLRequest = new URLRequest(url);
    var loader:Loader = new Loader();
    var loaderContext:LoaderContext = new LoaderContext();
    loaderContext.checkPolicyFile = true;

    loader.load( urlRequest, loaderContext );

    var W:Number = movieclip.width;
    var H:Number = movieclip.height;
    var A:Number = W/H;

    loader.contentLoaderInfo.addEventListener(Event.COMPLETE, function(e:Event){
        var tempImage:Bitmap = new Bitmap(e.target.content.bitmapData);

        var image:Object = {};
        image.width = 267;
        image.height = 223;

        var a:Number = image.width / image.height;

        if( A >= a ){
            loader.width =H*a;
            loader.height =H;
        }else{
            loader.width = W;
            loader.height =W / a;
        }

        movieclip.alpha =1;     
        loader.alpha = 1;

        movieclip.addChild( loader );
    }); 
} 
```

其次，我使用硬编码的宽度和高度。如何识别图像的原始尺寸？我尝试查看新的位图（e.target.content.bitmapData），但宽度和高度错误（显示舞台的 w 和 h）。

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T00:46:02.913

您需要从`contentLoaderInfo`属性中提取此数据。

在你的情况下：

```
var originalHeight:int( e.currentTarget as LoaderInfo ).height;
var originalWidth:Number = ( e.currentTarget as LoaderInfo ).width; 
```

[正如LoaderInfo#height](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/LoaderInfo.html#height)的文档中所讨论的：

> 此值可能与显示内容的实际高度不同，因为加载的内容或其父显示对象可能会被缩放

* * *

顺便说一句，你不应该在这件事上声明函数。它不利于内存管理和代码组织。每次加载图像时，都必须在内存中重新创建该函数，而不仅仅是引用。因此，CPU 必须在加载它之前重新创建该函数，每次您需要它并且每个实例都存储在内存中，直到下次运行 GarbageCollection。

如果您在全局空间中声明它（也不要在其他函数中嵌套函数），则该函数在其范围内时会立即加载到内存中（通常是在加载类时）。所以加载会有一些开销，但是一旦加载，它就在那里并且可以使用了。该函数也只有一个实例。

如果您只制作 1 张图片，这似乎没什么大不了的，但在为包含数百个拇指的画廊做拇指墙之类的事情时，它可能会导致感知到的内存泄漏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T01:19:44.643

不确定我是否完全理解您的问题，但答案似乎与以下示例一样简单：

```
package 
{
    import flash.display.Bitmap;
    import flash.display.Loader;
    import flash.display.LoaderInfo;
    import flash.display.Sprite;
    import flash.events.Event;
    import flash.net.URLRequest;

    public class Main extends Sprite 
    {

        public function Main():void 
        {
            if (stage) init();
            else addEventListener(Event.ADDED_TO_STAGE, init);

        }// end function

        private function init(e:Event = null):void 
        {
            removeEventListener(Event.ADDED_TO_STAGE, init);

            var loader:Loader = new Loader();
            loader.contentLoaderInfo.addEventListener(Event.COMPLETE, onComplete);
            loader.load(new URLRequest("images/koala.jpg"));

        }// end function

        private function onComplete(e:Event):void {

            var bitmap:Bitmap = ((e.target as LoaderInfo).content as Bitmap);

            var sprite:Sprite = new Sprite();

            sprite.addChild(bitmap);

            bitmap.x = -(bitmap.width / 2);
            bitmap.y = -(bitmap.height / 2);

            addChild(sprite);

            sprite.x = stage.stageWidth / 2;
            sprite.y = stage.stageHeight / 2;

        }// end function

    }// end class

}// end package 
```

您使用`Loader`对象加载图像并向属性添加`Event.COMPLETE`事件侦听器`Loader.contentLoaderInfo`。

```
var loader:Loader = new Loader();
loader.contentLoaderInfo.addEventListener(Event.COMPLETE, onComplete);
loader.load(new URLRequest("images/koala.jpg")); 
```

然后当调用事件处理程序时，您从`LoaderInfo`对象中获取位图

```
var bitmap:Bitmap = ((e.target as LoaderInfo).content as Bitmap); 
```

然后创建一个显示对象容器，将位图添加到该容器中。然后，为了使位图在显示对象容器中居中，您将`x`位图的属性设置为负其宽度的一半`y`，并将位图的属性设置为负其高度的一半。

```
var sprite:Sprite = new Sprite();

sprite.addChild(bitmap);

bitmap.x = -(bitmap.width / 2);
bitmap.y = -(bitmap.height / 2); 
```

# c++ - 地图中的c ++自定义对象抛出错误

> ID：13408104
> 
> 赞同：0
> 
> 时间：2012-11-15T23:33:44.603
> 
> 标签：c++, templates, opencv, stl, map

我正在尝试在 C++ 中使用自定义标量对象获取 STL 映射，以便我可以在 OpenCV 的映射中使用标量类。我收到以下错误：

`error: ‘template class std::map’ used without template parameters`

这是我使用的模板：

```
template<typename _Tp> class MyScalar_ : public Scalar_<_Tp>{
public:
    MyScalar_();
    MyScalar_(Scalar_<_Tp>& s){
        _s = s;
    };
    _Tp& operator[](const int idx){
        return _s[idx];
    }
    //std::less<_Tp>::operator()(const _Tp&, const _Tp&) const
    //this wont work if scalars are using doubles
    bool operator < (const MyScalar_<_Tp>& obj) const {
        double lhs,rhs;
        lhs = _s[0] + _s[1] + _s[2] + _s[3];
        rhs = _s[0] + _s[1] + _s[2] + _s[3];
        return lhs > rhs;
    }
    bool operator == (const MyScalar_<_Tp>& obj) const{
        bool valid = true;
        for(int i = 0;i<_s.size();i++){
            if(_s[i] != obj[i])
                return false;
        }
        return valid;
    }
    private:
        Scalar_<_Tp> _s;
}; 
```

我`std::map< MyScalar,Point > edgeColorMap;`的头文件中也有

上面的错误表明该行：

```
auto tempit = edgeColorMap.find(s);
    if(tempit != std::map::end){//found a color that this pixel relates to 
```

if 语句失败，我不知道为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T23:37:52.157

您需要使用来自实际`map`实例的迭代器：

```
if(tempit != edgeColorMap.end()) { 
```

`std::map::end()`只是一个普通函数，它返回一个迭代器或 const_iterator 到容器最后一个元素之后的元素。

# c# - MVC 验证万无一失

> ID：13408110
> 
> 赞同：0
> 
> 时间：2012-11-15T23:34:39.623
> 
> 标签：c#, asp.net-mvc, validation

我正在将现有门户从 Web 表单重新构建为 MVC，但我在验证时遇到了问题。我有这样的模型：

```
public class Customer
{
    [RequiredIf("FirstNameRequired", true)]        
    [Display(Name = "First Name")]
    public string FirstName { get; set; }
    public bool FirstNameRequired { get; set; }
    public bool FirstNameVisible { get; set; }

    [RequiredIf("LastNameRequired", true)]
    public string LastName { get; set; }
    public bool LastNameRequired { get; set; }
    public bool LastNameVisible { get; set; }

    [RequiredIf("EmailRequired", true)]
    public string Email { get; set; }
    public bool EmailRequired { get; set; }
    public bool EmailVisible { get; set; }
}

public class PersonalInfo
{
    public Customer PrimaryCustomer { get; set; }
    public IEnumerable<Customer> Customers { get; set; }
} 
```

客户中有很多属性，但我仅添加了 3 个（例如 100 个或其他）。我这样做是因为有许多联系人类型和属性，例如可见和必需是 dinamyc。现在我有了可以呈现所有客户的编辑器模板。它是这样的。

```
@if (Model.FirstNameVisible)
{ 
    <p>
        First Name:
        @Html.TextBoxFor(x => x.FirstName)
    </p>
}
@if (Model.LastNameVisible)
{ 
    <p>
        Last Name:
        @Html.TextBoxFor(x => x.LastName)
    </p>
}
@if (Model.EmailVisible)
{ 
    <p>
        Email:
        @Html.TextBoxFor(x => x.Email)
    </p>
} 
```

现在这是渲染所有联系人，但是当我在模型中发布数据时 REQUIRED 和 VISIBLE 布尔属性为假。这是因为我没有添加：

```
@Html.HiddenFor(x => x.FirstNameRequired)
@Html.HiddenFor(x => x.FirstNameVisible) 
```

如果我添加此验证效果很好。ModelState.IsValid 工作正常。问题是如果有人更改隐藏的值数据并且能够插入不正确的数据怎么办。我怎样才能防止这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T00:03:56.397

替换`[RequiredIf(...)]`为plain`[Required]`并删除`@Html.HiddenFor(...)`。这将使这些字段始终是必需的，并且用户必须提供值。

在持久化实体之前，您必须手动验证可变需要的字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T12:38:12.883

您可以使用[HtmlHelper.AntiForgeryToken 方法](http://msdn.microsoft.com/en-us/library/dd492767%28v=vs.100%29.aspx) ，因此您的模型将使用令牌进行验证。

另一种解决方案是手动检查是否允许用户插入数据。

在进行验证的同时，您始终可以使用 [FluentValidation](http://fluentvalidation.codeplex.com/wikipage?title=mvc)。

# neo4j - Neo4j Cypher：使用 LIMIT 和 COLLECT（或在同一查询中使用 LIMIT 两次）

> ID：13408111
> 
> 赞同：5
> 
> 时间：2012-11-15T23:34:55.257
> 
> 标签：neo4j, cypher

我有一个时间线类型查询，用于检索帖子和“喜欢”帖子的用户。

```
START me=node:node_auto_index(UserIdentifier='USER0')
MATCH me-[rels:FOLLOWS*0..1]-myfriend
WITH myfriend
MATCH myfriend-[:POSTED*]-statusupdates<-[r?:LIKE]-likers
WHERE myfriend <> statusupdates
RETURN distinct statusupdates, FILTER (x in collect(distinct likers) : x <> null), myfriend
ORDER BY statusupdates.PostTime DESC
LIMIT 25; 
```

我将检索到的帖子数量限制为 25 个。我还想限制喜欢帖子的用户数量。有没有办法在查询中使用多个限制子句？理想情况下，我想做以下事情：

```
START me=node:node_auto_index(UserIdentifier='USER0')
MATCH me-[rels:FOLLOWS*0..1]-myfriend
WITH myfriendMATCH myfriend-[:POSTED*]-statusupdates<-[r?:LIKE]-likers
WHERE myfriend <> statusupdates
RETURN distinct statusupdates, LIMIT FILTER (x in collect(distinct likers) : x <> null) 6, myfriend
ORDER BY statusupdates.PostTime DESC
LIMIT 25; 
```

或者：

```
START me=node:node_auto_index(UserIdentifier='USER0')
MATCH me-[rels:FOLLOWS*0..1]-myfriend
WITH myfriendMATCH myfriend-[:POSTED*]-statusupdates<-[r?:LIKE]-likers
WHERE myfriend <> statusupdates
RETURN distinct statusupdates, FILTER (x in collect(distinct likers) : x <> null), myfriend
LIMIT likers 6
ORDER BY statusupdates.PostTime DESC
LIMIT 25; 
```

这会将每个帖子的返回点赞数限制为 6。我怎样才能实现这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-16T00:12:10.017

限制喜欢者的问题在于它位于查询的另一端，因此无法优化它。你基本上必须做两场比赛。此外，WITH 后的 LIMIT 仅在 1.9.M01 中可用

所以，我认为这种做你想要的：

```
START me=node:node_auto_index(UserIdentifier='USER0')
MATCH me-[rels:FOLLOWS*0..1]-myfriend-[:POSTED*]-statusupdates<-[r?:LIKE]-likers
WITH distinct likers
// you can also order by something here, if you want.
LIMIT 6
START me=node:node_auto_index(UserIdentifier='USER0')
// at this point, likers is already bound, so it's limited to the 6
MATCH me-[rels:FOLLOWS*0..1]-myfriend-[:POSTED*]-statusupdates<-[r?:LIKE]-likers
RETURN distinct statusupdates, likers, myfriend
ORDER BY statusupdates.postTime
LIMIT 25; 
```

未经测试的代码。希望它有效——下次在控制台中为我们构建一个示例，以便我们可以玩耍。:)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-07-26T05:57:01.917

在 Neo4j 2.0 中，您可以使用集合切片。即你可以做类似的查询

`MATCH (n)-[r*0..1]-(x) RETURN n, LABELS(n), COLLECT([x,id(x),LABELS(x),r])[0..10] LIMIT 5`

上面的示例将返回集合中最多 5 个 n 节点，每个节点包含 0 到 10 个相关节点。

# java - 将字符串从 servlet 传递到 .jsp

> ID：13408115
> 
> 赞同：1
> 
> 时间：2012-11-15T23:35:24.233
> 
> 标签：java, string, jsp, post

运行 post 方法后，我无法将输出字符串打印到我的 .jsp 文件中。下面是我的 .java 和 .jsp 文件。我已经删除了那里的代码，因为此时我知道我所尝试的远非直观。我只是在我知道两行代码需要去的地方留下了评论。我只是想在 servlet 执行 SQL 命令后在我的 .jsp 文件中打印字符串“out”。

编辑：我终于将所有输出都转到 JSP 页面。我现在遇到的唯一问题是，我将查询结果存储在输出字符串中的不太理想的方法导致我的输出是一长串结果，而不是一个很好的间距或表格。我知道在 jsp 的表中循环遍历结果会更好，但我似乎也无法让它工作。

dbServlet.jsp

```
<?xml version = "1.0"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<!-- dbServlet.html -->
<html xmlns = "http://www.w3.org/1999/xhtml">
<head>
    <title>MySQL Servlet</title>
    <style type="text/css">
        body{background-color: green;}
    </style>
</head>
<body>
    <h1>Hello World!</h1>
    <h2>This is the MySQL Servlet</h2>
    <form action = "/database/database" method = "post">
    <p>
        <label>Enter your query and click the button to invoke a MySQL Servlet
            <input type = "text" name = "query" />
            <input type = "submit" value = "Run MySQL Servlet" />
        </label>
    </p>
    </form>
    <hr>
    <%= request.getAttribute("queryResults") %>
</body>
</html> 
```

数据库Servlet.java

```
import javax.servlet.*;
import javax.servlet.http.*;
import java.io.*;
import java.sql.*;

@SuppressWarnings("serial")

public class databaseServlet extends HttpServlet {
    private Connection conn;
    private Statement statement;

    public void init(ServletConfig config) throws ServletException {
        try {
            Class.forName(config.getInitParameter("databaseDriver"));
            conn = DriverManager.getConnection(
                    config.getInitParameter("databaseName"),
                    config.getInitParameter("username"),
                    config.getInitParameter("password"));
            statement = conn.createStatement();
        }
        catch (Exception e) {
            e.printStackTrace();
        }
    }

    protected void doPost (HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        String out = "\n";

        String query = request.getParameter("query");

        if (query.toString().toLowerCase().contains("select")) {
            //SELECT Queries
            try {
                ResultSet resultSet = statement.executeQuery(query.toString());
                ResultSetMetaData metaData = resultSet.getMetaData();
                int numberOfColumns = metaData.getColumnCount();
                for(int i = 1; i<= numberOfColumns; i++){
                    out = out + "\t" + metaData.getColumnName(i) + "\n";
                }
                out = out + "\n";

                while (resultSet.next()){
                    for (int i = 1; i <= numberOfColumns; i++){
                        out = out + "\t" + resultSet.getObject(i) + "\n";
                    }
                    out = out + "\n";
                 }
            }
            catch (Exception f) {
                f.printStackTrace();
            }
        }
        else if (query.toString().toLowerCase().contains("delete") || query.toLowerCase().contains("insert")) {
            //DELETE and INSERT commands
            try {
                conn.prepareStatement(query.toString()).executeUpdate(query.toString());
                out = "\t\t Database has been updated!";
            }
            catch (Exception l){
                l.printStackTrace();
            }
        }
        else {
            //Not a valid response
            out = "\t\t Not a valid command or query!";
        }
        request.setAttribute("queryResults", out);
        RequestDispatcher dispatcher = request.getRequestDispatcher("/dbServlet.jsp");
        dispatcher.forward(request,  response);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T02:24:35.030

您不能只执行 out.println 并在 JSP 上打印。您需要将其放入您的响应对象并转发给 JSP。然后 JSP 可以将其拾取并打印。

# java - 来自 C++ 应用程序的 Java com.sun.jna 回调函数

> ID：13408118
> 
> 赞同：0
> 
> 时间：2012-11-15T23:35:44.537
> 
> 标签：java, callback, jna

我有一个用 C++ 编写的 DLL，我无法更改。它具有以下暴露功能

```
// c++ 
DllExport unsigned int ProcessMessage( char * in_message, USHORT in_message_length, char * connectionString, bool ( SendMessage)( char * connectionString, BYTE * payload, USHORT iPayloadSize )  ); 
```

我有一个需要调用此 DLL 函数的 Java 应用程序。我目前正在使用 java 库[com.sun.jna](https://github.com/twall/jna)

```
// Java 
public class main {
    public interface CBlargAPI extends Library {
        interface sendMessage_t extends Callback {
            boolean invoke(String connectionString, Pointer payload, short iPayloadSize );
        }
        int ProcessMessage( byte[] in_message, short in_message_length, String connectionString, sendMessage_t SendMessage ) ; 
    }
    public static void main(String[] args) throws Exception 
    {
        // Override function thingy (#A) 
        CBlarg.sendMessage_t sendMessage_fn  = new CBlarg.sendMessage_t() {
            @Override
            public boolean invoke(String connectionString, Pointer payload, short iPayloadSize) {
                System.out.println("sendMessage_t: " )  ;
                return false; 
                }
            };         
        }
        CBlargAPI.INSTANCE.ProcessMessage( receivePacket.getData(), (short) receivePacket.getLength(), connectionString, sendMessage_fn ); 
    }

    // static member function (#B) 
    public static boolean SendUDPMessage( String connectionString, Pointer payload, short length )  {    
        // ToDo: I want to use this one. 
    }
} 
```

目前这正在使用，`override function thingy (#A)`但我想`static member function (#B)`改用。我尝试了一些没有成功的事情，例如

```
// Errors with "cannot find symbol, symbol: class SendUDPMessage, location: class main" 
CBACnetAPI.sendMessage_t sendMessage_fn  = new main.SendUDPMessage(); 
```

我是初级 C++ 程序员，很少接触 Java

**我的问题是：**

*   我如何调用静态成员函数`SendUDPMessage()`作为回调而不是`Override function thingy (#A)`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T12:32:52.017

您必须`override function thingy (#A)`拨打电话`static member function(#B)`。Java 没有函数指针，因此您需要一个接口对象来实现该目的。

为什么你需要做#B而不是#A？

# c# - 从 sqldatamart asp.net 中选择下拉列表项

> ID：13408130
> 
> 赞同：0
> 
> 时间：2012-11-15T23:36:46.047
> 
> 标签：c#, asp.net, webforms, sqldatasource

我有 6 个从 sqldatasource 填充的下拉列表。我还有另一个返回一些行的 sqldatasource。我想要做的是浏览第二个数据源的每一行并在我的下拉列表中选择该值。因此，如果第二个数据源包含三行，它将在前三个下拉列表中选择适当的值，并将其他的设置为“N/A”。

这是我想到的一些伪代码

```
protected void fileattributes_ItemDataBound(object sender, ListViewItemEventArgs e)
{
        DropDownList kw1 = (DropDownList)e.Item.FindControl("keyw1");
        DropDownList kw2 = (DropDownList)e.Item.FindControl("keyw2");
        DropDownList kw3 = (DropDownList)e.Item.FindControl("keyw3");
        DropDownList kw4 = (DropDownList)e.Item.FindControl("keyw4");
        DropDownList kw5 = (DropDownList)e.Item.FindControl("keyw5");
        DropDownList kw6 = (DropDownList)e.Item.FindControl("keyw6");

        DropDownList[] array = { kw1, kw2, kw3, kw4, kw5, kw6 };

        for(int i = 0; i<sqldatasource2.length;i++)
        {            
              array[i].SelectedItem.Text = sqldatasource2.item    
        }

        foreach(Array a in array)
        {    
              if (a is null)
              {    
                   a.selecteditem.text = "N/A";
              }        
        }        
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T01:03:09.877

我没有直接使用 sqldatasource 的经验，所以我所做的是用结果集填充 DataTable。希望这有效！

```
 DropDownList kw1 = (DropDownList)e.Item.FindControl("keyw1");
    DropDownList kw2 = (DropDownList)e.Item.FindControl("keyw2");
    DropDownList kw3 = (DropDownList)e.Item.FindControl("keyw3");
    DropDownList kw4 = (DropDownList)e.Item.FindControl("keyw4");
    DropDownList kw5 = (DropDownList)e.Item.FindControl("keyw5");
    DropDownList kw6 = (DropDownList)e.Item.FindControl("keyw6");

    DropDownList[] array = { kw1, kw2, kw3, kw4, kw5, kw6 };

    DataView dv = new DataView();
    DataTable dt = new DataTable();    
    dv = (DataView)SqlDataSource1.Select(DataSourceSelectArguments.Empty);
    dt = dv.ToTable();

    int i = 0;
    foreach (DataRow dr in dt.Rows)
    {
        // dr["column name or column index"] (zero in my case)
        array[i].SelectedItem.Text = dr[0].ToString();
        i++;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T07:04:46.093

```
DataSourceSelectArguments args = new DataSourceSelectArguments();
DataView view = (DataView)SqlDataSource1.Select(args);
DataTable dt = view.ToTable();

DropDownList[] array = { kw1, kw2, kw3, kw4, kw5, kw6 };
int i;
for (i = 0; i < dt.Rows.Count;i++ )
{
    array[i].SelectedItem.Text = dt.Rows[i][0].ToString();
}

// If array length (number of DropDowns) is greater than rows in datasource
// Remaining Dropdowns will get text N/A --- Now i=dt.Rows.Count
for (; i < array.Length; i++)
{
    array[i].SelectedItem.Text = "N/A";
} 
```

# javascript - 将线性坐标系映射到 Google Earth 的球面坐标系

> ID：13408131
> 
> 赞同：0
> 
> 时间：2012-11-15T23:36:48.310
> 
> 标签：javascript, coordinates, kml, google-earth, google-earth-plugin

我有两个点向量，当散点图给我以下路径：（每种颜色只是路径的不同段 - 有些段是直的，有些段是通过采用某个半径的圆的某个弧长来构造的）

![s](../Images/669ba1cc4e59968cfddac3de73bf2909.png)

然后我想抓住这些点并使用谷歌地球的Javascript API将它们绘制在地球表面，如下所示：

```
// Create the placemark
var lineStringPlacemark = ge.createPlacemark('');

// Create the LineString; set it to extend down to the ground
// and set the altitude mode
var lineString = ge.createLineString('');

lineStringPlacemark.setGeometry(lineString);
lineString.setExtrude(true);
lineString.setAltitudeMode(ge.ALTITUDE_RELATIVE_TO_GROUND);

// Add LineString points
lineString.getCoordinates().pushLatLngAlt( 200,  300);
lineString.getCoordinates().pushLatLngAlt( 200.50505051, 300);

... all points ...

ge.getFeatures().appendChild(lineStringPlacemark); 
```

所以我基本上将它们视为纬度和经度 - 并不介意此时路径出现在地球上的哪个位置。当我这样做时，我会得到一条自行循环的路径，我假设这是因为地球是球形的。

![在此处输入图像描述](../Images/5a0285afe15fa127af4ba3d306fc3a60.png)

我认为谷歌地球可以处理任何类型的线在地球表面的投影！我可以做什么样的转变来防止这种情况/实现所需的路径？原始点来自 x=[0,500] 和 y=[0,500] 的坐标系，我试图将坐标系中的点移到地球上的纬度和经度上！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T17:55:48.447

问题是纬度和经度被包装了。

纬度表示为赤道以北或以南的度数（0 度）。值范围从 -90 度到 90 度。

经度是以度为单位的角距离，相对于本初子午线。子午线以西的值范围为 -180 到 0 度。经线以东的值范围为 0 到 180 度。

您遇到的问题是给定范围 [-90,90] 和 [-180.180] 之外的值被包装了。这意味着纬度，例如 +150，实际上是在 -60 处绘制的。+500 的经度将绘制在 +140 处。

要将绘图保持在框架内，您必须将纬度限制在 [-90, 90] 范围内（在北极和南极之间），您的经度需要限制在相同的量，因为您只能看到地球的一半立即，[-90, 90]。

为了实现这一点，只需将所有角度除以一个值`5.6`- 这将使您的线保持在框架内为 500/5.6 = 89.28

# android - Proguard如何缩小Facebook sdk

> ID：13408133
> 
> 赞同：1
> 
> 时间：2012-11-15T23:37:06.843
> 
> 标签：android, proguard, facebook-android-sdk

我正在将 Proguard 用于 Android 应用程序。

根据[示例](http://proguard.sourceforge.net/index.html#manual/examples.html)，要缩小 lib 中的 .jar 文件，我需要添加`-injar libs`。

但是如果我想缩小 Facebook 等外部 sdks 怎么办？我是否提供它的本地类路径？

# vim - 在命令行程序中使用 emacs 或 vim 的语法高亮？

> ID：13408134
> 
> 赞同：6
> 
> 时间：2012-11-15T23:37:17.997
> 
> 标签：vim, emacs, syntax-highlighting, pygments

我有一个可以输出 JSON 和 YAML 的命令行程序。默认情况下，它会检测 pygments (pygmentize) 是否可用，如果可用，则将输出传递给它以获得漂亮的彩色输出。但是，默认情况下，运行该程序的大多数计算机上都不会安装 pygments。但是大多数计算机都会有 emacs 或 vim，但是，有。有没有办法让这些编辑器中的一个使用 ANSI 转义序列对某些文本进行语法高亮显示，然后再次输出？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T16:03:52.820

因为编辑器已经可以做 ansi 的东西，所以很容易对编辑器进行屏幕截图，不是吗？

```
script -qc "stty rows 10000
emacs -nw -visit YOURFILE.YAML -eval '(redisplay t)' -f kill-emacs
resize" 
```

（仅 GNU FSF Emacs 需要重新显示）

现在清理捕获

```
perl -p0E 's/\A(?s:.*)\e\[27m\r\n
\e\[A\n((?s).*?)
(?:\e\[K\n)+
\e.*\e\[27m\r$(?s:.*)\Z/$1/mx' < typescript 
```

如果您不想在屏幕上看到录制过程，您可以使用 perl 的 IO::Pty 之类的东西将其包装在隐藏的终端中

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-16T21:17:19.337

Matthew Wozniski 编写了一个名为 vimcat.sh 的脚本，它使用 Vim 来执行此操作。他的版本位于[https://github.com/godlygeek/vim-files/blob/master/macros/vimcat.sh](https://github.com/godlygeek/vim-files/blob/master/macros/vimcat.sh)。我对它做了一些修改（如果有记忆，修改允许它在我的 Mac OS X 系统上运行；我知道替换`/dev/fd/9`for`/proc/self/fd/9`有这个目的）；[在https://gist.github.com/4090959](https://gist.github.com/4090959)上查看我的要点。

如果 Vim 的突出显示更改了背景，我相信这两个版本的脚本都无法返回默认背景颜色。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-16T07:53:16.193

与 Emacs 一样（cp.ataylor 的回答），Vim 可以将具有完整语法突出显示的缓冲区呈现为 HTML；见`:help 2html.vim`。您可能可以重用大部分通过缓冲区语法的插件代码，并将其更改为呈现为 ANSI 转义序列，但您必须自己重新实现所有呈现逻辑。

尽管有一些插件使用 Vim 作为寻呼机，但我认为不可能只使用 Vim 来输出带有 ANSI 转义序列的缓冲区。毕竟，Vim 想要保留对终端的控制权，并在退出时将其清除。

我建议在 Vim 之外寻找另一个专用的解决方案，尽管这意味着你需要安装它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-16T16:03:21.230

如果您不想遵循@IngoKarkat 的建议并重写标准插件以支持 ANSI 转义序列，您可以使用我的[formatvim](http://www.vim.org/scripts/script.php?script_id=3113)插件，它支持通过使用渲染为 ANSI 转义序列

```
Format format csi to /path/to/file 
```

. 最初我的插件是针对不同格式的标准 2html 的重写，可以轻松添加新格式（我花了大约 30 分钟来添加 ANSI 转义序列支持，主要是阅读这些序列的规范），但当前代码已经走得太远了提及相似之处。众所周知，对于大文件或当您使用一个 vim 实例来渲染多个文件时（即，当预热（“编译”和缓存填充）阶段被进一步运行的好处掩盖时）工作得更快。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-16T00:05:24.590

Emacs 包含一个调用函数`htmlfontify`，它将字体化缓冲区转换为 HTML。您可以在批处理模式下使用一个小的 elisp 脚本来将文件呈现为 HTML。例如：

```
emacs -q --batch --file myfile.rb --eval '(progn (require (quote htmlfontify)) (htmlfontify-buffer) (set-buffer-modified-p t) (save-buffer))' 
```

# apache - Google Pagespeed 洞察力声称没有设置过期时间，虽然它似乎存在

> ID：13408135
> 
> 赞同：5
> 
> 时间：2012-11-15T23:37:22.467
> 
> 标签：apache, caching, http-headers, pagespeed

根据[google pagespeed 洞察力](https://developers.google.com/speed/pagespeed/insights#url=http_3A_2F_2Fchatalenka.com_2Fnew_2F_2F_3Fab&mobile=false&rule=LeverageBrowserCaching)，例如[此](http://chatalenka.com/images/_global/social-icons/delicious.png)资源未设置过期时间（' *（未指定过期时间） '）。*如果我查看我的 chrome 日志，但我会看到

```
HTTP/1.1 200 OK
Date: Thu, 15 Nov 2012 23:27:40 GMT
Server: Apache
Accept-Ranges: bytes
Content-Length: 1323
Cache-Control: max-age=2692000, public
Expires: Sat, 15 Dec 2012 23:27:40 GMT
Keep-Alive: timeout=10, max=30
Connection: Keep-Alive
Content-Type: image/png 
```

据我所知，其中包含所有必要的标题。我目前正在使用[此答案](https://stackoverflow.com/questions/2676744/set-http-caching-expiration-recommended-by-google-pagespeed)所建议的 htaccess 文件，尽管我尝试了一些手动变体和其他一些答案所建议的其他 htaccess 文件。有人知道我做错了什么，还是谷歌只是在惹我？

# ruby - 如何为类方法动态定义别名方法？

> ID：13408136
> 
> 赞同：6
> 
> 时间：2012-11-15T23:37:31.427
> 
> 标签：ruby

我有一个模块可以调用“计算器”，我想将其包含在“产品”类中。Calculator 将扩展“Product”，它将类方法复制到 Product。这些类方法之一是“memoize”。我的想法是我可以做这样的事情：

```
module Calculator
  def self.extended(base)
    base.memoize :foo_bar
  end
end 
```

为了记住方法（特别是类方法）：foo_bar。在 memoize 内部，我将方法称为“alias_method”，它试图将类方法别名为不同的名称（此处为：foo_bar）。这失败了。Memoize 看起来像：

```
module Calculator (the extended module)
  def memoize(name)
    alias_method "memoized_#{name}", name
  end
end 
```

当通过 memoize :foo_bar 调用它时， alias_method 行会出现错误，说 Product has no method "name".. 我的理解是这是因为 alias_method 将尝试为实例方法而不是类方法.. （我不知道为什么但没关系，没什么大不了的）..

我可以像这样重新打开特征类

```
module Calculator
  def memoize(name)
    class << self
      alias_method "memoized_#{name}", name
    end
   end
end 
```

这会起作用，但名称在类 << 自我定义的范围内不可用。人们提到使用 self.class_eval 和 self.instance_eval 但这些似乎都不起作用..我也想要我的蛋糕并吃掉它..我怎样才能保持 alias_method 动态但在 class_methods 上使用它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T23:48:45.440

所以刚刚了解到这会成功：

```
module Calculator
  def memoize
    define_singleton_method(name, method(name))
  end
end 
```

然后，当 Calculator 包含在 Product 中时，它将根据需要定义单例方法。我仍然不知道为什么 alias_method 只需要在实例方法上工作.. 我不知道为什么 class_eval 或 instance_eval 没有解决问题.. 但至少我有一个解决方案..

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-16T06:05:25.957

如果在包含/扩展之前将实例方法设置为别名怎么办？如果您将扩展名放在类名之后，则尚未定义实例方法。

```
module Foo
  def self.extended(base)
    base.memoize :flavor
  end

  def memoize(name)
    alias_method "memoized_#{name}", name
  end
end

class Bar
  def flavor
    puts "Orange"
  end

  extend Foo
end

if __FILE__==$0
  b = Bar.new
  b.memoized_flavor   #=> Orange
end 
```

# asp.net - 不同类型的 ASP.NET meta:resourcekey 表达式

> ID：13408137
> 
> 赞同：1
> 
> 时间：2012-11-15T23:37:39.103
> 
> 标签：asp.net

我似乎记得当 ASP.NET 2.0 发布时 meta:resourcekey 是一种新类型的表达式，您可能会构建自己的“处理程序”，例如 mymeta:CustomerLabel="LabelX"

那可能吗？那个功能叫什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T00:22:51.300

我正在寻找的功能称为[Expression Builders](http://haacked.com/archive/2006/11/29/Express_Yourself_With_Custom_Expression_Builders.aspx)

# c# - 在 WebGrid 下显示预定义的 URL

> ID：13408138
> 
> 赞同：0
> 
> 时间：2012-11-15T23:37:46.320
> 
> 标签：c#, .net, asp.net-mvc, asp.net-mvc-3

当我将一些 **MODEL**传递给**VIEW**并且这个**MODEL**已经构建了**URL**。

我怎样才能显示出来？

我试过`Html.ActionLink`了，但它总是有网站的主机。我不需要它。

谢谢！

```
 @grid.GetHtml(
                            tableStyle: "grid",
                            headerStyle: "head",
                            alternatingRowStyle: "alt",
                            rowStyle: "row",
                            selectedRowStyle: "selected-row",
                            columns: grid.Columns(
                                           grid.Column("Name", "Name", style: "column"),
                                      grid.Column("Price", "Price"),
                                           grid.Column(format: (item) => Html.ActionLink("ShopURL", "Buy", 
                                               new { @href = item.ShopURL}), style: "column-action") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T21:25:42.417

问题是您实际上并没有在示例中设置链接的 href 。第三个参数是您的 RouteValues，缺少您的 @href 设置。以下应该可以解决您的问题：

```
@Html.ActionLink("LinkText", "SomeAction", "SomeController", null, new {@href = link}) 
```

# c# - WPF 中的进度条或搜索栏，如 WP7

> ID：13408139
> 
> 赞同：1
> 
> 时间：2012-11-15T23:37:50.220
> 
> 标签：c#, wpf, windows-phone-7, xaml, progress-bar

我想在播放视频时制作 Windows Phone 7 中的“进度条”或搜索栏。它的进度条在您正在进行电影的位置带有圆圈。

我发现的第一个例子： ![在 WP7 中显示搜索栏的图像](../Images/bd2a2e2918da12af6d7c4a85251bd608.png)

我是这样开始的：

```
 <Style TargetType="ProgressBar" BasedOn="{StaticResource styleProgressBase}" x:Key="styleEllipse">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="ProgressBar">
                    <Ellipse Name="PART_Track" Stroke="{TemplateBinding BorderBrush}" StrokeThickness="{TemplateBinding BorderThickness}" >
                        <Ellipse.Fill>
                            <VisualBrush>
                                <VisualBrush.Visual>
                                    <Border Width="{TemplateBinding Width}" Height="{TemplateBinding Height}" Background="{TemplateBinding Background}">
                                        <Rectangle Name="PART_Indicator" HorizontalAlignment="Left" Height="{TemplateBinding Height}" Fill="{TemplateBinding Foreground}" />

                                    </Border>

                                </VisualBrush.Visual>
                            </VisualBrush>

                        </Ellipse.Fill>
                    </Ellipse>

                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</Window.Resources> 
```

我不知道如何在其中制作圆角，主要是我不知道如何添加圆圈。

编辑：对未来的改进几乎没有问题。通过触摸和移动那个圆圈来实现寻找、浏览视频会很困难吗？

# javascript - 简单的路径过渡

> ID：13408144
> 
> 赞同：6
> 
> 时间：2012-11-15T23:38:02.247
> 
> 标签：javascript, d3.js

我正在尝试实现一个简单的路径转换，如此[处所示](http://blog.visual.ly/wp-content/uploads/2012/06/transitions.html#13)。我既不是 javascript 也不是 d3 魔术师，所以我尽力做到最好：

```
var line = d3.svg.line()
    .x(function(d) { return x(d.date); })
    .y(function(d) { return y(d.price); });

svg.append("path")
  .datum(data)
  .attr("class", "line")
  .attr("d", line)
  .transition().duration(next.duration||1000).delay(next.delay||0); # not right 
```

如何让过渡正常工作？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-16T00:39:12.917

在 d3 中进行路径绘制动画的一种方法是使用 dash-array 和 dash-offset 属性。

您可以做的是将 dashoffset 设置为总路径长度，然后随着时间的推移减小 dashoffset 直到它为零。这将模拟正在绘制的路径。查看有关[stroke-dasharray](https://developer.mozilla.org/en-US/docs/SVG/Attribute/stroke-dasharray "MDN：中风破折号")和[stroke-dashoffset](https://developer.mozilla.org/en-US/docs/SVG/Attribute/stroke-dashoffset "MDN：中风-dashoffset")的 SVG 文档。

从概念上讲，您正在做的是：

假设您的线长 4 个单位 (----)。您将 dasharray 设置为 (----,,,,) 即四个单位，然后是四个空格。您将 dashoffset 设置为 4 个单位，因此该线将位于可见空间左侧 4 个单位处。然后，当您将 dashoffset 减小到 0 时，线将看起来像 (-,,,,) 然后 (--,,,,) 依此类推，直到绘制整条线。

```
var line = d3.svg.line()
.x(function(d) { return x(d.date); })
.y(function(d) { return y(d.price); });

var path = svg.append("path")
                  .attr("d", line(data))
                  .classed("line", true);

var pathLength= path.node().getTotalLength();

path
  .attr("stroke-dasharray", pathLength + " " + pathLength)
  .attr("stroke-dashoffset", pathLength)
  .transition()
  .duration(2000)
  .ease("linear")
  .attr("stroke-dashoffset", 0); 
```

-

从[Duopixel](https://stackoverflow.com/users/524555/duopixel "双像素")[在这里](https://stackoverflow.com/questions/13353665/cant-make-paths-draw-slowly-with-d3 "不能用 d3 使路径缓慢绘制")的帖子中学习。

# php - 只检查第一条记录，而不是全部

> ID：13408145
> 
> 赞同：1
> 
> 时间：2012-11-15T23:38:02.470
> 
> 标签：php, mysql, mysqli

编辑：更新！让第一部分工作。但是，我不确定如何检查同一 IF() 语句中的其他变量。任何人都可以帮助我吗？单个 if 语句将拒绝名称与输入完全相同的类。但是，我还需要它拒绝相等的天数和时间。

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Register Diver</title>
<link rel="stylesheet" href="php_styles.css" type="text/css" />
<meta http-equiv="content-type"
content="text/html; charset=iso-8859-1" />
</head>
<body>
<h1>Aqua Don's Scuba School</h1>
<h2>Registration Confirmation</h2>
<?php
$DiverID = $_GET['diverID'];
if (empty($DiverID))
    exit("<p>You must enter a diver ID! Click your browser's Back button to return to the previous page.</p>");
$DBConnect = @mysqli_connect("localhost", "students", "password")
    Or die("<p>Unable to connect to the database server.</p>"
    . "<p>Error code " . mysqli_connect_errno()
    . ": " . mysqli_connect_error()) . "</p>";
$DBName = "scuba_school";
@mysqli_select_db($DBConnect, $DBName)
    Or die("<p>Unable to select the database.</p>"
    . "<p>Error code " . mysqli_errno($DBConnect)
    . ": " . mysqli_error($DBConnect)) . "</p>";

$TableName = "registration";
$SQLstring = "SELECT * FROM $TableName";
$QueryResult = @mysqli_query($DBConnect, $SQLstring);
if (!$QueryResult) {
    $SQLstring = "CREATE TABLE registration (diverID SMALLINT, class VARCHAR(40), days VARCHAR(40), time VARCHAR(40))";
    $QueryResult = @mysqli_query($DBConnect, $SQLstring)
        Or die("<p>Unable to create the registration table.</p>"
        . "<p>Error code " . mysqli_errno($DBConnect)
        . ": " . mysqli_error($DBConnect)) . "</p>";
    echo "<p>Successfully created the registration table.</p>";
}
?>

<?php
$Class = $_GET['class'];
$Days = $_GET['days'];
$Time = $_GET['time'];
$DiverID = $_GET['diverID'];

$DBConnect = mysqli_connect("localhost", "students", "password");
$DBName = "scuba_school";
@mysqli_select_db($DBConnect, $DBName)
    Or die("<p>Unable to select the database.</p>"
    . "<p>Error code " . mysqli_errno($DBConnect)
    . ": " . mysqli_error($DBConnect)) . "</p>";

$sqlString= "SELECT * FROM `registration` WHERE `diverID` = $DiverID AND `class` = '$Class' AND `days` = '$Days' AND `time` = '$Time'";
$QueryResult = mysqli_query($DBConnect, $sqlString) or die("MySQL error: " . mysqli_error($DBConnect) . "<hr>\nQuery: $QueryResult");  
$row = mysqli_fetch_assoc($QueryResult);

if ($row["class"] == $Class)
{

echo "<p>You are already registered for $Class</p>";
    }

    elseif($row["days"] == $Days && $row["time"] == $Time)
    {
        echo "<p>There is a conflict with $Days or $Time</p>";
        }
else
{
 $SQLstring = "INSERT INTO $TableName VALUES('$DiverID', '$Class', '$Days', '$Time')";
    $QueryResult = @mysqli_query($DBConnect, $SQLstring);
    echo "<p>You are registered for $Class on $Days, $Time. Click your browser's Back button to register for another course or review your schedule.</p>";
}

mysqli_close($DBConnect);
?>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T23:42:33.703

使用查询“找到所有有这些详细信息的人”，然后说“如果找到任何人 = 坏，否则 = 好。例如：

```
SELECT ID FROM $TableName WHERE DiverID = '$DiverId', class = '$class', days='$Days' LIMIT 1 
```

然后你运行那个查询，如果它找到任何东西（`if(count($results) > 0)...`）然后你显示一个错误（或任何东西）如果它没有找到任何人，那么添加细节是安全的。

**奖励：** 作为旁注，请查看 PDO（ PHP 领域[不再支持](http://news.php.net/php.internals/53799)`mysql_*`函数）并确保在输入数据库查询之前过滤和清理输入（谷歌）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T23:46:18.497

查询后您的情况不好

```
//change this
if ($row['class'] == "$Class")
{
    echo "<p>You are already registered for $Class</p>";
}

//to this
if(!empty($row))
{
    if ($row['class'] == "$Class")
        echo "<p>You are already registered for $Class</p>";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T23:47:03.737

你的问题出在这里：

```
SELECT * FROM $TableName WHERE `diverID` = $DiverID 
```

您正在数据库中查询与 匹配的*所有*记录`diverID`，而忽略`class`. 这意味着，例如，如果某个潜水员注册到不同的类别，则查询可能会或可能不会检索该记录。你想要类似的东西：

```
// this is for simplicity's sake only; please escape your input in your code!!

$sql = "SELECT * FROM $TableName WHERE `diverID` = $DiverID AND `class` = '$Class'"
$query = mysqli_query($sql);

if (mysqli_num_rows($query)) {
    // already registered
} else {
    // not registered, insert
} 
```

话虽如此...

1.  **不要**使用`@`（错误抑制）。关闭生产中的错误报告，但这（抑制错误）是可怕的。

2.  **不要**让您的代码容易受到[SQL 注入](http://bobby-tables.com/)的影响。你甚至没有试图逃避任何东西，**更**糟糕的是，你正在使用`$_GET`，这也让你容易受到 CSRF 攻击。

3.  **不要**即时创建表。在执行脚本之前，您应该已经准备好表结构。如果有的话，它们应该由安装脚本创建。

# windows-phone-8 - Windows 8 手机模拟器方向更改按钮不会更改或触发“OnOrientationChanged”

> ID：13408148
> 
> 赞同：3
> 
> 时间：2012-11-15T23:38:09.447
> 
> 标签：windows-phone-8, windows-phone-8-emulator

我正在处理一个 Windows 8 手机项目，我注意到单击右上角的方向更改按钮没有按预期运行。

手机模拟器更改为处于横向位置，但视图没有改变，`OnOrientationChanged`事件也没有被触发。

此外，从 开始`PortraitUp`，PhoneApplicationPage.Orientation 属性在执行此操作时也不会更改。这是模拟器中的错误，其他人对此有任何运气吗？

Windows 8 手机是否应该自动重新排列 UI 元素？即使您没有专门为该视图指定的布局？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T06:50:06.110

该`OrientationChanged`事件仍然应该在 Windows Phone 8 上运行。确保输入页面`PortraitOrLandscape`的`SupportedOrientations`属性：

```
<phone:PhoneApplicationPage 
    x:Class="WP8Application.Page1"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:phone="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone"
    xmlns:shell="clr-namespace:Microsoft.Phone.Shell;assembly=Microsoft.Phone"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    FontFamily="{StaticResource PhoneFontFamilyNormal}"
    FontSize="{StaticResource PhoneFontSizeNormal}"
    Foreground="{StaticResource PhoneForegroundBrush}"        
    mc:Ignorable="d" d:DesignHeight="768" d:DesignWidth="480"
    shell:SystemTray.IsVisible="True" 
    SupportedOrientations="PortraitOrLandscape" Orientation="Portrait"
    OrientationChanged="PhoneApplicationPage_OrientationChanged_1"> 
```

关键是，如果您简单地离开`Portrait`或`Landscape`以支持的方向离开，`OrientationChanged`则不会触发该事件，**因为您的应用程序的方向实际上不会改变**，即使您旋转手机也是如此。

至于您的另一个问题，是的，Windows Phone 应该自动重新排列您的 UI 元素，正如您在正确设置`SupportedOrientations`属性时会发现的那样。在大多数情况下，只要您没有以像素为单位明确设置元素的位置，自动布局就应该满足您的需要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-23T19:37:38.053

Orientation 不应该是 Portrait，如果您希望页面在两种类型的 Orientation 中工作，则应该省略该参数，只保留 SupportedOrientations 参数。当您从 Portrait 转到 LandScape 时，在模拟器中不起作用的是 InputScope。似乎没有人提到这一点。

# ruby - 将 rackup 作为守护进程运行时，File.expand_path 返回 / 而不是项目文件夹

> ID：13408149
> 
> 赞同：0
> 
> 时间：2012-11-15T23:38:15.293
> 
> 标签：ruby, filesystems, rack, rackup

我不确定我在某些配置文件中是否做错了什么。当我运行时`rackup -D`，这样做：

```
File.expand_path(__FILE__) 
```

实际上返回`/file.rb`。并`File.dirname`以某种方式添加返回`/`。所以现在我所有的文件加载代码都不起作用，因为它试图在`/`目录中查找，而不是在项目目录中查找。

`-D`如果我删除该选项，则不会发生这种情况。它返回完整路径`/home/blablabla/stuff/file.rb`

示例代码：

测试.rb：

```
require 'rubygems' if RUBY_VERSION <= '1.8.7'
require 'sinatra'

get '/expdir' do
  File.expand_path(File.dirname(__FILE__))
end

get '/exp' do
  File.expand_path(__FILE__)
end

get '/file' do
  __FILE__
end

get '/dirname' do
  File.dirname(__FILE__)
end

get '/dir' do
  Dir.entries(File.expand_path(File.dirname(__FILE__))).to_s
end 
```

配置.ru：

```
require 'test.rb'

run Sinatra::Application 
```

执行它`rackup -p 4567`并观察它返回正确的值。执行它`rackup -p 4567 -D`并观察它返回错误的值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T04:50:18.363

Rack 确实[将工作目录更改`/`为作为 daemon 运行时](https://github.com/rack/rack/blob/1.4.1/lib/rack/server.rb#L309)。

在 Ruby 1.8.7 中，`__FILE__`in a required file 指的是用于加载文件的路径，它可以是进程当前工作目录的相对路径。但是，*如果*稍后更改工作目录，例如调用`Dir.chdir`.

`File.expand_path`展开相对于工作目录的相对文件路径。所以在这种情况下`File.expand_path(__FILE__)`导致路径相对于根目录，但值`__FILE__`是相对于原始工作目录，给出错误的结果。

在 Ruby 1.9.2 和 1.9.3 中，`__FILE__`in a required file 指的是文件的绝对路径，所以不会出现这个问题。

在 Ruby 1.8.7 中解决此问题的一种方法是在需要应用程序文件时使用绝对路径。`require 'test.rb'`将您的行更改`config.ru`为：

```
require File.expand_path('../test', __FILE__) 
```

现在对的引用`__FILE__`将是绝对的，因此在守护进程时不会受到工作目录更改的影响。

如果您的应用程序更复杂，包含更多文件，则最好设置加载路径。例如，您可以将所有`.rb`文件放入一个`lib/`目录中，然后在您的`config.ru`添加中：

```
$LOAD_PATH.unshift(File.expand_path '../lib', __FILE__) 
```

然后你可以只需要你的文件而不用担心相对路径。

# google-chrome - 用铬打开pdf

> ID：13408151
> 
> 赞同：3
> 
> 时间：2012-11-15T23:38:21.420
> 
> 标签：google-chrome, chromium

我想在 Ubuntu 上使用 evince 打开 pdf 文件（不使用 pdf 插件）。我试过编辑 mailcap 和 xdg-mime 但似乎都不起作用。有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T09:27:14.670

### 在 Evince 等外部查看器中打开 PDF...

Google 的品牌 Chrome 浏览器包含 Chrome PDF 查看器插件，可在新的浏览器选项卡中显示 PDF。Chromium 浏览器没有，因为[Chrome PDF Viewer 包含一些专有代码](http://code.google.com/p/chromium/wiki/ChromiumBrowserVsGoogleChrome)。相反，Chromium 的行为如下所述（默认情况下，会显示保存文件提示）。

*（仅确认在 Ubuntu Linux 10.04 (Lucid)、Chromium 18.0.1025.151 下工作）*

在 Chromium 中...设置>>引擎盖下>>下载...

*下载位置*应该是一个目录，如果您不想将某些 PDF 文件保存在那里（例如 ~/Downloads），则不会有问题。

设置... *[ ] 下载前询问每个文件的保存位置？*

*   如果选中，单击 PDF 将打开“保存文件”对话框。
*   如果未选中，单击 PDF 将立即将其下载到*下载位置*目录。

左下角会短暂出现一个蓝色箭头，然后提示...

```
 This type of file can harm your computer. Do you want to
    keep {filename} anyway? [Discard]  [Keep] 
```

如果您点击[放弃]...

*   该文件不会保存到您的“下载”文件夹中
*   该文件不会在任何 PDF 查看器中打开
*   您将留下一个空白标签
*   单击返回箭头以返回包含 PDF 链接的页面

如果您单击[保留]...

*   **如果未设置为自动打开 PDF**

    *   当浏览器左下角的进度按钮更新时，将下载 PDF 文件
    *   点击按钮左端的文件名，在外部查看器（即Evince）中打开PDF文件
    *   外部查看器由系统范围的 mimetype 配置文件指定，这些文件是一个或多个...
        *   /etc/mime.types
        *   /etc/mailcap
        *   ~/.local/share/applications/mimeapps.list
    *   如果您单击按钮右端的向下箭头，您将获得四个选项...
        *   *打开*
            *   与单击文件名相同。
        *   *[ ] 总是打开这种类型的文件*
            *   复选框以在下载完成后使用外部查看器自动打开此类文件。
        *   *展现在文件夹中*
            *   使用默认系统文件浏览器（例如 Nautilus 或 PCManFM）打开下载位置目录。
        *   *取消*
            *   中止下载。
            *   下载完成时灰显。
*   **如果设置为自动打开 PDF**（*[X] 始终打开这种类型的文件*）

    *   **PDF 文件将被静默下载，然后使用外部查看器（即 Evince）打开**
    *   关闭外部查看器后，PDF 将保留在“下载位置”目录中。
    *   通过以下之一手动删除 PDF...
        *   单击 chrome://downloads 页面上的从列表中删除。
        *   使用文件浏览器。
    *   在设置>>引擎盖下>>下载

        *   以下选项将处于活动状态（未灰显）...

            ```
            You have chosen to open certain file types automatically after downloading.
                              [Clear Auto-opening Settings] 
            ```

        *   没有选项可以仅清除 PDF 或任何其他单个文件类型的自动打开。

        *   要清除所有文件类型的自动打开，请单击按钮...
            `[Clear Auto-opening Settings]`
        *   然后重新应用所需的任何自动打开

**补充**
将默认下载位置设置为临时目录，如 /tmp/downloads，也很有效。除非您明确将其移动或将其保存在其他位置，否则 PDF 将在下次重新启动时被删除。

# java - JDBC/Spring - 执行 sql 查询以获取结果的迭代器

> ID：13408153
> 
> 赞同：4
> 
> 时间：2012-11-15T23:38:26.597
> 
> 标签：java, sql, spring, jdbc, jdbctemplate

到目前为止，我一直在使用“SimpleJdbcTemplate”并使用“RowCallbackHadler”来处理查询的整个结果。目前我想接收一个类似迭代器的对象，我可以在感兴趣的时候查询下一个表行。在 Spring/jdbc（最好是 slpring）中是否可能出现以下行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T08:15:38.550

您可以尝试使用 JdbcTemplate 方法 queryforRowSet

```
public SqlRowSet queryForRowSet(String sql,
                                Object... args)
                         throws DataAccessException 
```

[http://static.springsource.org/spring/docs/current/javadoc-api/org/springframework/jdbc/core/JdbcTemplate.html#queryForRowSet%28java.lang.String,%20java.lang.Object...% 29](http://static.springsource.org/spring/docs/current/javadoc-api/org/springframework/jdbc/core/JdbcTemplate.html#queryForRowSet%28java.lang.String,%20java.lang.Object...%29)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T00:58:11.873

您可以使用[ResultSetExtractor](http://static.springsource.org/spring/docs/3.0.x/api/org/springframework/jdbc/core/ResultSetExtractor.html)而不是`RowCallbackHadler`. 接受后者的方法`JdbcTemplate`也会接受前者。

# css - 浮动背景图片

> ID：13408157
> 
> 赞同：1
> 
> 时间：2012-11-15T23:38:53.327
> 
> 标签：css, css-float

在我的[网站上](http://www.olmasigereken.com/demo/)有一个输入表单和一个轨迹图片。如果您调整浏览器窗口的大小，轨道将在表单中崩溃。即使轨道不是独立图像，是否可以浮动背景图像？
CSS：

```
#header{
    height:212px;
    width:100%;
    margin:0 auto;
    border-bottom:2px solid #66675e;
    background:url(img/truck.gif) no-repeat 150px 55px;
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-15T23:53:32.723

为了防止您的卡车背景图像与包含在具有背景图像的同一 div 中的元素之间发生冲突，我建议您的 div 具有最小宽度。

另一种解决方案是使您的 div 可浮动并添加最小宽度（将样式提取到 css 中，将 a 和 b 替换为您的大小并执行计算）：

```
<div id="header" style="min-width: (a+b)px;">
    <div style="float: left; width: (a)px;"><img src="truck"/></div>
    <div style="width: (b)px; margin: auto;"><form..../></div>
</div> 
```

这应该给你一个开始

# testing - 在沙盒中测试贝宝定期付款的整个周期

> ID：13408160
> 
> 赞同：5
> 
> 时间：2012-11-15T23:39:34.387
> 
> 标签：testing, paypal, recurring-billing

我目前正在尝试实施贝宝定期付款，我想测试“整个周期”。我发现这篇文章[http://www.paypalobjects.com/en_US/ebook/PP_Sandbox_UserGuide/testing_recurringpayments.html](http://www.paypalobjects.com/en_US/ebook/PP_Sandbox_UserGuide/testing_recurringpayments.html)以及 stackoverlfow 中的一些参考资料，它应该可以工作。但对我来说，它似乎不起作用。也许我必须为此深入研究代码，但我想知道这是否真的有效？

我正在使用[https://github.com/thenbrent/paypal-digital-goods](https://github.com/thenbrent/paypal-digital-goods)库，我的订阅详细信息如下：

```
$subscriptionDetails = array(
  'description'        => 'Subscription for $10/month for the next year.',
  'initial_amount'     => '10.00',
  'amount'             => '10.00',
  'period'             => 'Day',
  'frequency'          => '1',
  'total_cycles'       => '12',
);

$pay = new PayPal_Subscription( $subscriptionDetails ); 
```

我已经在我的通知接收端设置了日志记录，但只有在我创建新的个人资料时才会受到影响。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T22:27:43.523

在直播网站上，在实际指定时间过去后重复一个计费周期；例如，一个月的计费周期需要一个月的时间。在测试定期付款配置文件时，您可以在沙盒中模拟一个计费周期的经过时间，在这种情况下，实际经过的时间会减少。当您想要模拟计费周期而不等待实际时间过去时，这很有用。

要减少实际经过的时间，请将**Day**指定为时间段。当您指定 Day 时，计费周期**在 Sandbox 中每 n 分钟**发生一次，其中 n 表示**频率**；例如，如果您在执行 CreateRecurringPaymentsProfile API 时将计费频率指定为 1，将周期指定为 Day，则在 Sandbox 中测试时每分钟发生一次计费周期。

**仅当时间段为 Day 时，减少经过的时间才有效；其他值不会改变实际经过的时间。**

考虑一个场景，您希望在三个月试用后模拟一个月的计费周期，而无需等待四个月。在沙盒中，您可以指定以下 NVP 参数：

```
...&TRIALBILLINGPERIOD=Day&TRIALBILLINGFREQUENCY=3
...&BILLINGPERIOD=Day&BILLINGFREQUENCY=1... 
```

在沙盒中，试用计费周期大约需要 3 分钟，而常规计费周期大约每分钟发生一次。当您准备好上线时，您可以将试用计费期和计费期更改为月。

如果这不起作用，请发布您的 CreateRecurringBillingProfile 请求和响应，我们可以进一步调查。

# java - 数组越界问题

> ID：13408161
> 
> 赞同：1
> 
> 时间：2012-11-15T23:39:45.277
> 
> 标签：java, arrays, string, split, indexoutofboundsexception

我有一个非常简单的程序，带有一个文本框和一个按钮。

用户被告知在框中输入两种颜色的名称，并用空格分隔。

例如“red green” 输出将在屏幕上打印，“The apple is red with green dots.”。

但是，当屏幕上只输入一个单词时，我需要它起作用。我正在使用一个包含拆分字符串的数组。当我只输入红色时，我收到此错误。

“AWT-EventQueue-0”java.lang.ArrayIndexOutOfBoundsException：

***这是代码：***

```
String userInput = textField.getText();
String[] userInputSplit = userInput.split(" ");
String wordOne = userInputSplit[0];
String wordTwo = userInputSplit[1];
if (wordTwo !=null){
                System.out.println("The apple is " + wordOne + " with " + wordTwo + " dots.");
                } else {
                 System.out.println("The apple is " + wordOne + " with no colored dots.");
                } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T23:41:44.677

可以像这样简单地做一些事情：

```
String wordOne = userInputSplit[0];
String wordTwo = null;
if (userInputSplit.length > 1){
    //This line will throw an error if you try to access something 
    //outside the bounds of the array
    wordTwo = userInputSplit[1];  
}
if (wordTwo !=null) {
    System.out.println("The apple is " + wordOne + " with " + wordTwo + " dots.");
} 
else {
    System.out.println("The apple is " + wordOne + " with no colored dots.");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T23:41:53.197

您可以使用保护`if`语句括起您的打印逻辑：

```
if (userInputSplit.length > 1) {
  String wordOne = userInputSplit[0];
  String wordTwo = userInputSplit[1];
  ...
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-15T23:56:26.390

您还可以进行前置条件检查以查看用户的输入是否包含任何空格...

```
String userInput = textField.getText();
userInput = userInput.trim(); // Remove any leading/trailing spaces
if (userInput != null && userInput.length() > 0) {
    StringBuilder msg = new StringBuilder(64);
    if (userInput.contains(" ")) {
        String[] userInputSplit = userInput.split(" ");
        String wordOne = userInputSplit[0];
        String wordTwo = userInputSplit[1];
        msg.append("The apple is ").append(wordOne);
        msg.append(" with ").append(wordTwo).append(" dots");
    } else {
        msg.append("The apple is ").append(userInput).append(" with no colored dots.");
    }
    System.out.println(msg);
} else {
    // No input condition...
} 
```

这只是看待问题的另一种方式......

# javascript - 如何计算跨度中每个字符的宽度和高度

> ID：13408162
> 
> 赞同：2
> 
> 时间：2012-11-15T23:40:00.293
> 
> 标签：javascript, jquery, html, css, dom

计算跨度中每个字符的宽度和高度的最佳方法是什么。

说，html看起来像：

```
 <span style="font-size:12px">Test 100<span> 
```

因此，一种方法是为每个具有跨度样式的字符创建一个虚拟跨度，并将其附加到 dom 并获取它的高度和宽度。

例如，使用查询：

```
 var x = $('<span style="font-size:12px">' + 'T' + '</span'>);
 $('body').append(x); 
 var h = x.height(),  w= x.width();
 x.remove(); 
```

但这是低效的。还有其他方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T23:55:18.947

您无法真正获得字符的大小，因为它占用的空间量取决于它旁边的字符。

例如，字符`A`and`V`彼此相邻是紧缩的，因此它们比一个`A`next 到 an`A`或 a `V`next 到 a更靠近`V`。交错放置相同数量的字符比将它们放在相同字符旁边占用更少的空间：

AVAVAVAVAVAVAVAVAVAVAVAVAVAVAV
AAAAAAAAAAAAAAAAVVVVVVVVVVVVVVVV

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T23:42:09.473

不要每次都创建一个 span，而是尝试更改 span 的 innerHTML 并获取它的宽度。这会更快，并且不会触发大量验证。

试一试，它表现得更快吗？

# php - 我应该如何存储音乐文件？

> ID：13408163
> 
> 赞同：0
> 
> 时间：2012-11-15T23:40:05.347
> 
> 标签：php, mysql

> **可能重复：**
> [上传文件（声音、图片和视频）的存储位置](https://stackoverflow.com/questions/186656/where-to-store-uploaded-files-sound-pictures-and-video)

我正在制作一个用户注册和登录的网站，然后他们可以上传自己的音乐文件。我应该将他们作为 blob 上传的音乐文件存储在 MySQL 数据库表中吗？或者我怎么可能存储这些文件，以便它们可以通过 HTML 5 媒体播放器播放？我曾尝试在网上对此进行研究，但我发现将文件存储在 MySQL 表中并不好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T23:41:26.770

您应该将它们上传到服务器上的目录中。您将文件名和/或 ID 与歌曲和用户相关联，以便在需要时从数据库中检索它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T23:44:53.610

关于存储媒体文件，最好将它们存储在服务器上的某个地方，或者甚至更好地将它们存储在 CDN 上。

关于存储音乐的详细信息，请在 mysql 中创建一个表，将其命名为 music_meta 之类的名称，然后保存有关文件位置、名称、大小等的详细信息。

# ruby-on-rails-3 - 如何使用 fb_graph gem 获得对 facebook 个人资料的扩展权限？

> ID：13408164
> 
> 赞同：0
> 
> 时间：2012-11-15T23:40:11.120
> 
> 标签：ruby-on-rails-3, fb-graph

使用 fb_graph gem

从 facebook 用户处获取基本信息：

```
fb_user = FbGraph::User.new(FB_USER_ID)
fb_user = fb_user.fetch 
```

这很好用。

现在我还需要访问传记和位置

```
fb_user.bio 
fb_user.location.name 
```

位置为零，所以我收到一个错误，生物是空白的。

在 Facebook API 文档[http://developers.facebook.com/docs/reference/api/user/](http://developers.facebook.com/docs/reference/api/user/)

看起来 bio 需要 user_about_me 或 friends_about_me 权限。

所以我认为这应该意味着我需要为我的应用程序生成一个访问令牌，我这样做了：

```
app = FbGraph::Application.new(FB_APP_ID, :secret => FB_APP_SECRET)                         
access_token = app.get_access_token() 
fb_user = FbGraph::User.new(authentication.uid, access_token) 
```

但后来我得到：

```
undefined method `[]' for GENERATED_TOKEN:Rack::OAuth2::AccessToken::Legacy 
```

我不太确定如何解决这个问题。这是我使用 Facebook API 的第一天

问题：如何获得我的应用程序的扩展权限以获取生物和用户位置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T22:27:06.733

为了扩展权限，您必须在 OmniAuth 提供程序配置中添加它们

```
provider :facebook, APP_ID, APP_SECRET, {:scope => 'publish_stream,offline_access,email'} 
```

然后您将有权在用户时间轴等中发布。

您也可以按照这个有点旧的教程进行操作，但您可以使用这些概念

[Facebook 与 Omniauth 和 Devise on Rails 3 的集成](http://blog.assimov.net/blog/2010/11/21/facebook-integration-with-omniauth-and-devise-on-rails-3/)

**权限**

Facebook 提供的权限在 Facebook 网站本身中可用。

签入此链接[Facebook 权限](http://developers.facebook.com/docs/reference/login/#permissions)

# templates - 在 magento 中动态添加指向“我的帐户导航”的链接

> ID：13408166
> 
> 赞同：0
> 
> 时间：2012-11-15T23:40:15.807
> 
> 标签：templates, magento, layout, block

我正在创建一个 Magento 扩展程序，并希望以编程方式将链接添加到“我的帐户”导航。我已阅读以下主题（[Magento - 如何在我的帐户导航中添加/删除链接？](https://stackoverflow.com/questions/1977824/magento-how-to-add-remove-links-on-my-account-navigation)）及其引用的网站，但他们只谈论静态添加链接。

通过将以下内容添加到我的模块中的布局文件中，我可以获得一个新链接以显示在客户帐户导航中。

```
<customer_account>
    <reference name="customer_account_navigation">
        <action method="addLink" translate="label" module="mymodule">
            <name>modulename</name>
            <path>mymodule/</path>
            <label>New link</label>
        </action>
    </reference>
</customer_account> 
```

我怎样才能使这个链接的外观取决于对我的一个扩展模型的方法调用的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-02-26T10:24:15.723

我遇到了同样的需求，这是我发现的实现它的最佳方法。

1）使用以下代码创建一个扩展 Magento 帐户导航块的新块文件。

```
class Mynamespace_Mymodule_Block_Addlink extends Mage_Customer_Block_Account_Navigation {
    public function addLinkToUserNav() {
        if (your logic here) {
            $this->addLink(
                    "your label",
                    "your url",
                    "your title"
            );
        }
    }
} 
```

2）在您的扩展配置文件**config.xml**中，添加以下代码（尊重您现有的 XML 数据结构）：

```
<config>
    ...
    <global>
        ....
        <blocks>
            ...
            <customer>
                <rewrite>
                    <account_navigation>Mynamespace_Mymodule_Block_Addlink</account_navigation>
                </rewrite>
            </customer>
        </blocks>
    </global>
</config> 
```

3) 在您的扩展 XML 布局文件中，添加以下代码（尊重您现有的 XML 数据结构）：

```
<layout>
    ...
    <customer_account>
        <reference name="customer_account_navigation">
            <action method="addLinkToUserNav"></action>
        </reference>
    </customer_account>
</layout> 
```

就是这样。这将使您能够动态添加/删除帐户导航链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T09:08:03.817

我认为您应该能够使用 Magento 的 ifconfig 属性，如此[处所述](http://www.fabrizio-branca.de/magento-layout-xml-conditions.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T11:00:30.927

你必须使用magento的事件观察者功能你必须使用它的事件“controller_action_layout_load_before”在你的模块的config.xml中

```
<controller_action_layout_load_before>
    <observers>
        <uniquename>
            <type>singleton</type>
            <class>Package_Modulename_Model_Observer</class>
            <method>customlink</method>
        </uniquename>
    </observers>
</controller_action_layout_load_before> 
```

并在相应的observer.php中使用以下代码

```
public function customlink(Varien_Event_Observer $observer)
{
    $update = $observer->getEvent()->getLayout()->getUpdate();
    $update->addHandle('customer_new_handle');
} 
```

并在 local.xml 中写入

```
<customer_new_handle>
    <reference name="customer_account_navigation">
        <action method="addLink" translate="label" module="mymodule">
            <name>modulename</name>
            <path>mymodule/</path>
            <label>New link</label>
        </action>
    </reference>
</customer_new_handle> 
```

# localization - Xcode 4.5 基础本地化和 NSSegmentedControl 问题

> ID：13408167
> 
> 赞同：6
> 
> 时间：2012-11-15T23:40:21.930
> 
> 标签：localization, nssegmentedcontrol

我无法让我的 NSSegmentedControl 使用 Base Localization 更改其标题。

Xcode 为英语和法语生成文件，我翻译每个段的标题，但它们与 xib 文件中的相同。

其他分段控件的工具提示也是如此。

由于其他一切工作正常，我想这是这种特殊类型控件的错误。

其他人可以确认这个问题吗？（Xcode 4.5.2，MacOS 10.8.2）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-17T09:43:04.440

对我来说就像微风一样工作。

**需要注意的事项：**

*   **清理构建文件夹**。当您刚刚`.strings`为新翻译添加文件时，旧文件（非本地化）仍然可以在旧位置徘徊。这可能会导致系统忽略您的本地化资源。

*   **确保所有内容都包含在您的 bundle**中。到 Finder 中构建的二进制文件并检查其内容。有时文件在复制步骤中丢失，未包含在目标中等，因此它们最终不会出现在构建的捆绑包中。

# c++ - 如何创建一个包含 4 个字节的多信息的 ID

> ID：13408169
> 
> 赞同：1
> 
> 时间：2012-11-15T23:40:29.700
> 
> 标签：c++, c, algorithm

它相当复杂，所以我需要解释一下：

我有一个结构，这个结构用了很长时间，用来读/写二进制文件。所以不能在这个结构中添加新的或删除任何字段。但是当我创建这个结构时，我在这个结构中放了一个备用，以便在功能中重用。现在，这个结构是：

```
struct Entry {
 int a;
 int b;
 ....
 char spare[4];
}; 
```

现在我的结构中有 4 个字节。我需要根据以下 3 个信息创建 ID 条目：

*   时间：（月份和年份，年份格式为YY，月份格式为MM）。

*   Code：入口代码，包含3个字符，例如：ABC。

*   Values：入口的值，为浮点型，包括整数和小数部分的4位数字。例如：1.21、40.14 或 12.3。

基于以上 3 条信息，如何创建 1 个包含 4 个字节的 ID 条目。非常感谢。

注意：我有办法：

*   时间：假设 12/99 编码为 12*100+99 = 1299

*   代码：假设 ABC 编码为 'A' + 'B' + 'C' = 65 + 66 + 67 = 198。

*   值：假设 40.25 编码为 40.14*100 = 4014。

之后，我将 3 个数字 1299、198、4014 编码为：

ID_Entry = (1299 * 10^7) + (198*10^4) + 4014 = 1299 198 4014 = 12.991.984.014。但是这个 ID_Entry 太大而不能包含在 4 字节备用中

你有什么办法或改进我的办法，请告诉我，帮助我，非常感谢。

P/S：因此创建 ID 因此不能重复，在同一时间（月 + 年）代码和值不重复，如果 ts 不同时间，代码和值可以重复。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T23:54:35.347

您可以将数据编码为位域。

例如月份和年份：月份是 0-11，所以你需要 4 位。一年允许说 7 位（您可以添加一个常数，例如 2000 来获得实际年份）。

那是 11 位

3字符代码：如果代码只是AZ，您可以在5位（3 * 5 = 15）中做每一个

= 26 位，但只留下 6 位用于 id，这不足以处理您想要的范围。

字节中的位如下所示：

```
MMMM_YYYY  YYYA_AAAA  BBBB_BCCC  CCII_IIII

Where M=Month, Y=Year, A=Code1, B=Code2, C=Code3, I=Id 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T23:58:11.853

您正试图在 10 磅的袋子中装入 20 磅的土豆。

考虑 ID 的所有可能值，假设 26 个字母、100 年的月份以及从 00.01 到 99.99 的值。有`26*26*26 * 1200 * 10000`可能的值，或 210,912,000,000 个不同的组合。由于 32 位 int 只有 4,294,967,296 个不同的值，因此无论您选择哪种编码，您都不可能代表所有值。

您*可以*做的是减少其中一些数字。也许是三位数而不是四位数？也许是字母 A 到 M 而不是 A 到 Z？也许只记录月份而不是年份和月份？

例如，如果将值限制为两位数，则可以这样编码：

```
id = (char1 - 'A');
id = id * 26 + (char2 - 'A');
id = id * 26 + (char3 - 'A');
id = id * 26 + (year * 100 + month);
id = id * 1200 + (int)(value); 
```

2,109,120,000 种可能的组合。超过一整点备用！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T23:52:17.787

1.  您的结构有超过 4 个字节。

2.  一个浮点数有 4 个字节，一个字符有 1 个字节，您的时间格式可以存储在 2 个字节中，也可以是 1 个字节。

如果我理解你正确的话，你自己算算你至少有 21 个字节的信息要存储在 4 个字节中而不会发生冲突。这不可能！

在某些情况下，如果您可以限制输入数据，您可以优化大小，例如，只有 16 个不同的字符是可能的，或者只允许 0 到 1 之间的浮点数，但仍然无法从您编写的内容中实现您想要实现的目标。

# c++ - 抽象基类扩展

> ID：13408170
> 
> 赞同：0
> 
> 时间：2012-11-15T23:40:30.750
> 
> 标签：c++, polymorphism

这是我的简化代码，需要您对实现不佳的多态性提出宝贵意见。

```
class X
{
    public:
        void test();
    protected:
        virtual void foo() const = 0;
};

class Y : public X
{
    public:
        void foo(){ cout << "hello" << endl; }
};

int main()
{   
    X *obj = new Y();
} 
```

我在编译时收到以下错误。

```
test.cpp: In function ‘int main()’:
test.cpp:23: error: cannot allocate an object of abstract type ‘Y’
test.cpp:14: note:   because the following virtual functions are pure within ‘Y’:
test.cpp:9: note:   virtual void X::foo() const 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T23:42:14.983

应该

```
class Y : public X
{
    public:
        void foo() const { cout << "hello" << endl; }
}; 
```

因为

```
void foo() const 
```

和

```
void foo() 
```

不是同一个功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T23:42:11.417

`foo`Y 类中的函数与 X::foo 具有不同的签名

```
class Y : public X
{
  public:
    void foo() const { cout << "hello" << endl; }
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T23:42:11.293

`foo`Y 类中的不是 const，因此您不会重载 X 类中的虚拟。

# iphone - iPhone SDK 关闭操作表并显示图片库

> ID：13408172
> 
> 赞同：0
> 
> 时间：2012-11-15T23:40:47.113
> 
> 标签：iphone, ios, xcode, sdk, gallery

我正在构建这个应用程序并且非常成功。然而，我最近只是想改变用户选择上传图片的方式。它现在带有一个操作表。问题是，当单击按钮时，我尝试关闭操作表，然后启动图像库，但它不起作用。谢谢你的帮助！

```
-(void)actionSheet:(UIActionSheet *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex {

    if (buttonIndex == 0) {

        [actionSheet dismissWithClickedButtonIndex:0 animated:NO];

        UIImagePickerController *picker = [[UIImagePickerController alloc] init];
        picker.sourceType = UIImagePickerControllerSourceTypeCamera;
        picker.delegate = self;

        [self presentViewController:picker animated:YES completion:NULL];
}

///////////

  UIActionSheet *actionsheet = [[UIActionSheet alloc]

                                  initWithTitle:@"Submit Photo"

                                  delegate:self

                                  cancelButtonTitle:@"Cancel"

                                  destructiveButtonTitle:nil

                                  otherButtonTitles:@"Take Photo",@"Select Photo from Gallery", nil];

    [actionsheet showInView:self.view]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T00:10:53.617

代替实现`actionSheet:clickedButtonAtIndex:`委托方法，实现`actionSheet:didDismissWithButtonIndex:`方法。然后，您不需要自己关闭操作表。

并确保`self`在创建它时作为委托传递给操作表。

# c# - 使用Skype时如何测量网络的吞吐量

> ID：13408175
> 
> 赞同：0
> 
> 时间：2012-11-15T23:40:52.667
> 
> 标签：c#, performance, matlab, skype, throughput

我正在使用 USB 加密狗 Wimax 和 skype 作为 voip 应用程序。我想在运行时测量吞吐量（kb/s 或 Mb/s）。有没有办法使用matlab或C#来做到这一点？（我有一个项目，需要编写一个不使用现有工具的代码）谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T23:42:47.507

你最好的选择是使用 Wireshark。放置一个监听器并捕获一些数据包。您可以查看捕获，它会告诉您正在使用的带宽。在 C# 中我确信有办法，但为什么要重新发明轮子呢？使用线鲨。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T23:44:59.350

如果它或多或少是唯一使用网络的应用程序 - 网络相关性能计数器可以为您提供一些信息。从 PerfMon 开始，看看您是否可以获得所需的信息，而不是继续使用它（即将计数器转储到 SQL DB 进行分析）或使用 C# 来监视计数器。

# apache-flex - 使用带有 flexmojos 的多线程 maven 构建

> ID：13408177
> 
> 赞同：1
> 
> 时间：2012-11-15T23:41:11.740
> 
> 标签：apache-flex, maven, maven-3, maven-plugin, flexmojos

我正在尝试通过使其成为多线程来提高多模块 Maven 构建的性能。在这样做的同时，我正在尝试解决一堆依赖项，并且我遇到了一些问题，这是 flexmojos-maven-plugin 的错误。

执行目标 org.sonatype.flexmojos:flexmojos-maven-plugin:3.9:compile-swf 失败，它只是说（编译错误）。

我在网上看了看，好像 flexmojos 还不支持多线程构建，我想知道是否有任何想法可以解决。我正在使用的构建是巨大的，所以我们需要使它成为多线程的，所以我基本上至少目前正在寻找一种解决方法。

提前致谢，如果您需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T00:03:22.130

我已经用 Jenkins 构建了 400 多个多模块。使用顺序构建需要一个多小时。使用并行构建，这减少到小得多，具体取决于需要构建的模块。有些构建只有 5 分钟。

始终运行的最大组件是程序集插件，它必须将所有模块打包到一个可分发的包中。

这样，您可以只重新构建相关模块。

让它工作的诀窍是你需要始终构建到安装阶段。然后，您只需要构建更改的模块、依赖它们的任何模块以及程序集。

# java - Play 框架 1.2.5 中的 GSON 错误

> ID：13408178
> 
> 赞同：0
> 
> 时间：2012-11-15T23:41:12.083
> 
> 标签：java, playframework, stack-overflow, playframework-1.x

该错误似乎是一个递归错误，该公司要求 Worksheets 再次要求公司，这....您得到了漂移。我已经为此搜索了互联网和堆栈溢出，我发现了错误发生的原因，但解决方案始终是编写自己的解析器或使用 flexjson 或其他。我只是想知道是否有解决方案，因为游戏非常流行，而且人们肯定会在一次操作中获取帖子和评论，或者不是吗？

必须有一个解决方案，无需更换 json 解析器或编写自己的解析器。

公司.java

```
package models;

import java.util.*;
import javax.persistence.*;

import play.db.jpa.*;

@Entity
public class Company extends Model {
    public String name;
    public String address;
    public String city;
    public String zipcode;
    public String country;
    public String phonenumber;
    public String website;
    public String footer;
    public String maincontactperson;
    public String email;
    public String password;
    public Blob logo;
    @OneToMany(mappedBy = "company", cascade = CascadeType.ALL, orphanRemoval = true, fetch=FetchType.EAGER)
    public List<Worksheet> worksheets;

    }

} 
```

和

工作表.java

```
package models;

import java.util.*;
import javax.persistence.*;

import play.db.jpa.*;

@Entity
public class Worksheet extends Model {
    public String contactname;
    public String name;
    public String address;
    public String phonenumber;
    public String city;
    public String email;
    public String partnumber;
    @Lob
    public String partdescription;
    public String password;
    public Date due_date;
    public Date in_date;
    @Lob
    public String notes;
    @ManyToOne(cascade=CascadeType.ALL)
    public Company company;
...
} 
```

在我的控制器中，我只是运行这个：

```
List<Company> companies = Company.FindAll();
renderJSON(companies); 
```

如果没有工作表，这可以工作，但是一旦有工作表，它就会崩溃并显示一英里长的错误消息。这是它的顶部：

```
00:31:02,623 ERROR ~ 

@6cbn7gi1o
Internal Server Error (500) for request POST /companies/login

Execution exception
InvocationTargetException occured : null

play.exceptions.JavaExecutionException
    at play.mvc.ActionInvoker.invoke(ActionInvoker.java:239)
    at Invocation.HTTP Request(Play!)
Caused by: java.lang.reflect.InvocationTargetException
    at play.mvc.ActionInvoker.invokeWithContinuation(ActionInvoker.java:557)
    at play.mvc.ActionInvoker.invoke(ActionInvoker.java:508)
    at play.mvc.ActionInvoker.invokeControllerMethod(ActionInvoker.java:484)
    at play.mvc.ActionInvoker.invokeControllerMethod(ActionInvoker.java:479)
    at play.mvc.ActionInvoker.invoke(ActionInvoker.java:161)
    ... 1 more
Caused by: java.lang.StackOverflowError
    at java.util.Date.getTimeImpl(Date.java:870)
    at java.util.Date.getTime(Date.java:866)
    at java.sql.Timestamp.getTime(Timestamp.java:126)
    at java.util.Calendar.setTime(Calendar.java:1076)
    at java.text.SimpleDateFormat.format(SimpleDateFormat.java:875)
    at java.text.SimpleDateFormat.format(SimpleDateFormat.java:868)
    at java.text.DateFormat.format(DateFormat.java:316)
    at com.google.gson.internal.bind.DateTypeAdapter.write(DateTypeAdapter.java:90)
    at com.google.gson.internal.bind.DateTypeAdapter.write(DateTypeAdapter.java:41)
    at com.google.gson.internal.bind.TypeAdapters$22$1.write(TypeAdapters.java:522)
    at com.google.gson.internal.bind.TypeAdapters$22$1.write(TypeAdapters.java:515)
....

    at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$1.write(ReflectiveTypeAdapterFactory.java:89)
    at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$Adapter.write(ReflectiveTypeAdapterFactory.java:195)
    at com.google.gson.Gson$FutureTypeAdapter.write(Gson.java:879)
    at com.google.gson.internal.bind.TypeAdapterRuntimeTypeWrapper.write(TypeAdapterRuntimeTypeWrapper.java:68)
    at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$1.write(ReflectiveTypeAdapterFactory.java:89)
    at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$Adapter.write(ReflectiveTypeAdapterFactory.java:195) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T08:30:48.940

恕我直言，这不是错误，您的模型中有递归，并且框架无法真正自动知道它应该如何序列化模型。

我通常使用 @Expose 注释来解决这个问题。将其添加到您希望在序列化 JSON 中显示的所有成员中，并创建一个辅助方法，该方法执行以下操作：

```
 Gson gson = new GsonBuilder().excludeFieldsWithoutExposeAnnotation().create();
    String json = gson.toJson(your_model_instance); 
```

或者，您还可以按照评论中的建议实现 JsonSerializer 接口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T10:25:24.287

在[另一个问题](https://stackoverflow.com/questions/10036958/the-easiest-way-to-remove-the-bidirectional-recursive-relationships)中，我找到了指向[此类](http://code.google.com/p/google-gson/source/browse/trunk/extras/src/main/java/com/google/gson/graph/GraphAdapterBuilder.java)的链接，这似乎很好地解决了循环引用问题（并且无需修改模型类）。

有关示例，请参阅链接问题的批准答案。

# python - PyQt QtWebKit loadFinished 未调用

> ID：13408179
> 
> 赞同：2
> 
> 时间：2012-11-15T23:41:22.083
> 
> 标签：python, pyqt, signals-slots, qtwebkit

我有这个脚本，我想在它准备好后做更多的事情：

```
from PyQt4 import QtCore, QtGui, QtWebKit

class WebViewCreator:
    def __init__(self):

        self.view = QtWebKit.QWebView()
        self.view.setPage(QtWebKit.QWebPage())

        self.view.connect(self.view, QtCore.SIGNAL('loadFinished(bool)'), self.load_finished)

        path = self.app.resources_uri() + "/index.html"
        self.view.load(QtCore.QUrl(path))

    def load_finished(self, ok):
        print ok

def onDone(ok):
    print ok 
```

我遇到的问题是，如果我将一个函数连接到 loadFinished(bool) 信号，那么该函数就会被执行，但是如果我连接一个像 self.load_finished 这样的对象的方法，那么这个方法就不会被调用，我不明白为什么：-/

同样的情况发生在：

```
self.view.loadFinished.connect(onDone) 
```

相对：

```
self.view.loadFinished.connect(self.load_finished) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T00:21:15.340

您发布的代码没有明显错误。

也就是说，当我运行它的这个稍微简化的版本时，它会成功加载页面并（最终）打印`True`：

```
from PyQt4 import QtCore, QtGui, QtWebKit

class WebViewCreator(QtGui.QWidget):
    def __init__(self):
        QtGui.QWidget.__init__(self)
        self.view = QtWebKit.QWebView(self)
        self.view.loadFinished.connect(self.load_finished)
        layout = QtGui.QVBoxLayout(self)
        layout.addWidget(self.view)
        self.view.load(QtCore.QUrl('http://stackoverflow.com/'))

    def load_finished(self, ok):
        print ok

if __name__ == '__main__':

    import sys
    app = QtGui.QApplication(sys.argv)
    window = WebViewCreator()
    window.show()
    sys.exit(app.exec_()) 
```

这是在 Linux 上使用 Python 2.7.3、Qt 4.8.3 和 PyQt 4.9.5。

# iphone - Iphone 应用程序字体

> ID：13408181
> 
> 赞同：-1
> 
> 时间：2012-11-15T23:41:24.447
> 
> 标签：iphone, ios

我正在尝试为我的 Iphone 应用程序找到一种好的字体。我需要在下图中使用此字体![在此处输入图像描述](../Images/91dc8856c2c0a72f3cab28eb0dbaf0e7.png)

我刚刚看到这个链接[http://iosfonts.com/](http://iosfonts.com/)但字体在这里不可用。

如何使用相同的字体或我想要的任何自定义字体？

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T23:44:24.150

您可以导入字体文件（.otf 和 .ttf），就像将图像拖入 Xcode 项目一样。在`info.plist`文件中，添加`Fonts provided by application`一个数组，并添加字体的文件名。然后，使用`[UIFont fontWithName:@"fontname" size:15]`方法。您可以使用此网站来检测该应用程序中显示的字体：[http ://www.myfonts.com/WhatTheFont/](http://www.myfonts.com/WhatTheFont/)

# python - Python 日期时间和处理微秒

> ID：13408183
> 
> 赞同：0
> 
> 时间：2012-11-15T23:41:25.873
> 
> 标签：python, datetime

所以我想先说我不想使用`datetime.strptime()`，我写了一个非常简单的解析器，代码如下：

```
def datetime_parse(s):
    return datetime.datetime(int(s[0:4]), int(s[5:7]), int(s[8:10]), int(s[11:13]),
                             int(s[14:16]), int(s[17:19]), int(s[20:26])) 
```

这里的问题是，对于我的微秒转换，我有如下值：

```
2012-09-30 17:00:04.01350000 
```

读入时`int()`会自动向下舍入为 0，据我所知`datetime.datetime()`只会接受`int`s。有解决方法吗？

**注意：**在同时更正的原始问题中，最后一个参数`datetime.datetime()`是`int(s[20:27])`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T23:47:17.930

微秒应在 [0, 1E6) 范围内。您传递的是 7 位而不是 6 位，因此额外的零会将实际值增加 10 倍。请尝试`int(s[20:26])`改用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T23:59:00.450

它按预期工作 - 一旦你解析回一个字符串，你就会得到相同的字符串。

```
>>> s = '2012-09-30 17:00:04.013500'
>>> d = datetime.datetime(int(s[0:4]), int(s[5:7]), int(s[8:10]), int(s[11:13]),   int(s[14:16]), int(s[17:19]), int(s[20:26]))
>>> d.strftime('%Y-%m-%d %H:%M:%S.%f')
'2012-09-30 17:00:04.013500' 
```

# mpxj - GetResourceNames 为 MPXJ 任务方法返回 null

> ID：13408188
> 
> 赞同：1
> 
> 时间：2012-11-15T23:41:45.280
> 
> 标签：mpxj

我正在尝试使用 MPXJ - Java 从 MS Project 2010 .mpp 文件中提取基本任务和资源信息。我打开文件并转储所有任务没有问题，但是在尝试访问分配给任务的资源时出现问题。我正在调用 Task.GetResourceNames()，但它每次都返回 null。我也尝试过调用 Task.GetResourceAssignments()，但这也每次都返回 null。

我创建了一个非常非常简单的项目，其中包含一个摘要任务、三个子任务，它们链接在一起，并为每个任务分配了不同的资源。

当我运行我的程序时，我看到了所有任务，但是对 GetResourceNames() 的调用仍然返回 null。

我是否通过错误的界面进行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T22:32:14.543

您可以在 javadoc 中看到，对于 mpp 文件，GetResourceNames() 始终返回 null。要从特定任务中获取资源名称，我是这样做的：

```
 List<ResourceAssignment> Resources = task.getResourceAssignments();
// getResourceAssignments() return a list of ResourceAssignment of a specific task.
            Iterator i = Resources.iterator();

            while (i.hasNext()) {
                ResourceAssignment ra = (ResourceAssignment) i.next();
                Resource r = ra.getResource();
// we get the resource from the resource assignment
                System.out.println("\t Assigned Resources : " + r.getName());
// print the name of the Resource. If you want to do the same than GetResourceNames, just add each name in a String and you will have the same results at the end.
            } 
```

希望这可以帮助。

# java - Java中的多态副本

> ID：13408202
> 
> 赞同：5
> 
> 时间：2012-11-15T23:42:51.110
> 
> 标签：java, reflection, polymorphism, deep-copy

我突然遇到了在 Java 中制作深度多态副本的问题。实现**Clonable**解决了我的问题，但它通常被称为“坏”技术。

因此，这是我寻找“不可克隆”解决方案的尝试：

```
public class Parent {
    int x;

    public Parent() {}

    public Parent(int x0) {
        x = x0;
    }

    public Parent copy() {
        Parent b = new Parent();
        b.assign(this);

        return b;
    }

    protected void assign(Parent c) {
        x = c.x;
    }

    @Override
    public String toString() {
        return getClass().getName() + ", " + x;
    }
}

public class Child extends Parent {
    int y;

    protected Child() {}

    public Child(int x0, int y0) {
        super(x0);
        y = y0;
    }

    @Override
    public Child copy() {
        Child b = new Child();
        b.assign(this);

        return b;
    }

    @Override
    protected void assign(Child c) {
        super.assign(c);
        y = c.y;
    }

    @Override
    public String toString() {
        return getClass().getName() + ", " + x + "," + y;
    }
}

public class Test {
    public static void main(String[] args) {
        Parent x = new Parent(5);
        Child y = new Child(10, 20);
        Parent z = x.copy();
        Parent w = y.copy();

        System.out.println(x);
        System.out.println(y);
        System.out.println(z);
        System.out.println(w);
    }
} 
```

输出是：

```
com.xxx.zzz.Parent, 5
com.xxx.zzz.Child, 10,20
com.xxx.zzz.Parent, 5
com.xxx.zzz.Child, 10,20 
```

还有另一种（更短的）方法（使用反射）：

```
public class Parent {
    int x;

    public Parent() {}

    public Parent(int x0) {
        x = x0;
    }

    public Parent copy() {
        try {
            Parent b = getClass().newInstance();
            b.assign(this);
            return b;
        } catch (InstantiationException | IllegalAccessException e) {
            e.printStackTrace();
            return null;
        }
    }

    protected void assign(Parent c) {
        x = c.x;
    }

    @Override
    public String toString() {
        return getClass().getName() + ", " + x;
    }
}

public class Child extends Parent {
    int y;

    protected Child() {}

    public Child(int x0, int y0) {
        super(x0);
        y = y0;
    }

    protected void assign(Child c) {
        super.assign(c);
        y = c.y;
    }

    @Override
    public String toString() {
        return getClass().getName() + ", " + x + "," + y;
    }
} 
```

无需在 Child 类中覆盖 copy()。但我不确定使用 getClass().newInstance() 构造一个副本占位符有多“合法”......

上面的解决方案值得使用还是有更常见/强大/简单的方法？

谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T00:21:31.110

对于这个特定的用例，您的解决方案对我来说看起来不错。

使用 , 的主要限制`newInstance()`是：

*   它仅适用于具有无参数构造函数的对象，并且
*   它将无法克隆具有最终字段的对象

有一些库支持克隆。看看[克里奥](http://code.google.com/p/kryo/)。它是一个序列化库，还支持克隆（深和浅），包括没有无参数构造函数或具有最终字段的对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T02:50:20.303

我从来都不是“clone()”方法的忠实粉丝。复制构造函数似乎更优雅 IMO：

```
public class Parent {
    int x;

    public Parent() {
        super();
    }

    public Parent(Parent other) {
        super();
        this.x = other.x;
    }
}

public class Child extends Parent {
    int y;

    public Child() {
        super();
    }

    public Child(Child other) {
        super(other);
        this.y = other.y;
    }
} 
```

请注意，如果您需要，这还具有额外的好处：

```
Parent p = new Parent(new Child(...)); 
```

您当然可以通过检查参数的具体类类型来防止构造函数中的这种行为，但我不明白为什么在大多数情况下需要这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T00:20:28.640

作为使用复制构造函数或可克隆的替代方法，您可以使用序列化来执行复制。

[http://www.javaworld.com/javaworld/javatips/jw-javatip76.html?page=2](http://www.javaworld.com/javaworld/javatips/jw-javatip76.html?page=2)

# javascript - 为什么此密码验证代码不适用于 jquery 表单向导？

> ID：13408204
> 
> 赞同：2
> 
> 时间：2012-11-15T23:43:04.043
> 
> 标签：javascript, jquery, json

我正在为我的表单使用 jquery 表单向导，它是一个多页表单，示例如下： **[http ://thecodemine.org/examples/example_1_straight.html](http://thecodemine.org/examples/example_1_straight.html)**

该表单使用 jquery 验证插件，在*jquery.validation.js*中，没有密码验证规则或检查重新输入密码。

我尝试了许多其他简单的验证表单代码，但它们不适用于表单向导，可能是因为这是多页表单，当我单击**下一步按钮时它没有传递信息**

如果我使用 mootools 进行验证，则 jquery 表单向导停止工作。

我正在尝试使用小定制后提到的简单代码，但它也不适用于表单，但它适用于其他简单表单。

**请指导我如何在我的页面中使用此脚本，这与上述链接中的示例完全相同。**

**首先我调用将值传递给表单向导来创建动画表单，下面提到的代码**

```
 <script type="text/javascript">
        $(function(){
            $("#SignupForm").formwizard({ 
                formPluginEnabled: true,
                validationEnabled: true,
                focusFirstInput : true,
                formOptions :{
                    success: function(data){$("#status").fadeTo(500,1,function(){ $(this).html("You are now registered!").fadeTo(5000, 0); })},
                    beforeSubmit: function(data){$("#data").html("data sent to the server: " + $.param(data));},
                    dataType: 'json',
                    resetForm: true
                }   
             }
            );
    });
</script> 
```

**以下是我尝试在表单中使用的验证码，但它不起作用**

```
 <script type="text/javascript">
$(function(){

var pass1 = $('#password'),
    pass2 = $('#passwordConfirm'),
    email = $('#email'),
    form = $('#SignupForm'),
    strength = $('#strength'),
    arrow = $('#form-div .arrow');

// Empty the fields on load
$('#main .row input').val('');

// Handle form submissions
form.on('submit',function(e){

    // Is everything entered correctly?
    if($('#main .row.success').length == $('#main .row').length){

        // Yes!
        alert("Thank you for trying out this demo!");
        e.preventDefault(); // Remove this to allow actual submission

    }
    else{

        // No. Prevent form submission
        e.preventDefault();

    }
});

// Validate the email field
email.on('blur',function(){

    // Very simple validation
    if (!/^\S+@\S+\.\S+$/.test(email.val())){
        email.parent().addClass('error').removeClass('success');
    }
    else{
        email.parent().removeClass('error').addClass('success');
    }

});

// Use the complexify plugin on the first password field
pass1.complexify({minimumChars:7, strengthScaleFactor:0.4}, function(valid, complexity){

    if(valid){
        pass2.removeAttr('disabled');

        pass1.parent()
                .removeClass('error')
                .addClass('success');
    }
    else{
        pass2.attr('disabled','true');

        pass1.parent()
                .removeClass('success')
                .addClass('error');
    }

    var calculated = (complexity/100)*268-30;
    if(calculated <50){
    $('#strength').text('Very Weak');

    strength.removeClass('GreenJoy').addClass('RedWarn');

    }

    if(calculated >50 && calculated < 100){
    $('#strength').text('Weak');

    strength.removeClass('GreenJoy').addClass('RedWarn');

    }

    if(calculated >100 && calculated < 150){
    $('#strength').text('Normal');

    strength.removeClass('RedWarn').addClass('GreenJoy');

    }

    if(calculated >170 && calculated < 200){
    $('#strength').text('Good');

    strength.removeClass('RedWarn').addClass('GreenJoy');
    }

    if(calculated >235){
    $('#strength').text('Perfect!');

    strength.removeClass('RedWarn').addClass('GreenJoy');
    }

});

// Validate the second password field
pass2.on('keydown input',function(){

    // Make sure its value equals the first's
    if(pass2.val() == pass1.val()){

        pass2.parent()
                .removeClass('error')
                .addClass('success');
    }
    else{
        pass2.parent()
                .removeClass('success')
                .addClass('error');
    } 
});

 });

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T22:44:55.613

我得到了它：）

**jquery.validate.js**中有一个验证规则equalTo

 **我这样做是为了获得密码验证

**HTML**

```
 <label for="password">Password</label>
<label for="password" id="strength" style="font-weight:normal"></label>
<input class="ui-wizard-content ui-helper-reset ui-state-default" disabled="disabled" name="password" id="password" type="password">

<label for="passwordConfirm">Retype password</label>

<input class="ui-wizard-content ui-helper-reset ui-state-default equalTo required" disabled="disabled" name="passwordConfirm" id="passwordConfirm" type="password"> 
```

**JavaScript**

```
 <script>
 $(document).ready(function(){
 $("#SignupForm").validate({
 rules: {
password: "required",
passwordConfirm: {
  equalTo: "#password"
}
}
});
 });
 </script> 
```**

# c# - 用于视觉工作室 c# 的 PHPMyAdmin

> ID：13408205
> 
> 赞同：2
> 
> 时间：2012-11-15T23:43:11.443
> 
> 标签：c#, mysql, database, visual-studio-2010, phpmyadmin

我想知道我是否可以在 Visual Studios C# 上使用在 phpmyadmin 上创建的数据库？过去，我只将它用于 php 项目。现在我正在使用 Visual Studios 制作 ac# 项目，我可以在 Visual Studios 上连接我在 phpmyadmin 上创建的数据库吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T23:45:37.837

您可以使用 MySql.Data 库来使用 MySQL 数据库。

[Code Project 上](http://www.codeproject.com/Articles/43438/Connect-C-to-MySQL)有一个完整的示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T23:48:22.337

是的。C# 中有用于 MySQL 的库（例如 MySql.Data）。它是由 PHPMyAdmin 创建的这一事实对您在 C# 应用程序中访问它的方式没有影响。

# linux - 在linux中没有shell的情况下更改目录？

> ID：13408208
> 
> 赞同：0
> 
> 时间：2012-11-15T23:43:23.037
> 
> 标签：linux, bash

在 bash 脚本中，我想立即`chroot`转到一个目录和`cd`另一个子目录。我想通过 执行此操作`exec chroot [dir] cd [subdir]`，但我收到一个未找到文件的错误。这是因为该`cd`命令不在新目录树中。该`cd`命令通常由 shell 提供，但我需要避免使用 eval 启动子进程。

有没有办法在 Linux 中不需要 shell 就可以更改目录？我寻找包含`cd`在 linux 中的包，但 coreutils 不包含它。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T01:09:42.373

没有`cd`程序。`cd`是您的外壳的内置程序；它使外壳程序更改其自己的当前目录。进程不能改变其他进程的当前目录，所以`cd`不可能有程序（它会在另一个进程中运行，对调用进程没有影响）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T00:58:08.817

安装`schroot`程序/包。这似乎可以选择更改目录：

```
-d, --directory=directory
    Change to directory inside the chroot before running the command or login shell. 
```

# c# - 需要帮助从 C# 调用 IronPython 中的函数

> ID：13408212
> 
> 赞同：1
> 
> 时间：2012-11-15T23:43:46.820
> 
> 标签：c#, ironpython

> **可能重复：**
> [在 C# 中实例化一个 python 类在 C#](https://stackoverflow.com/questions/579272/instantiating-a-python-class-in-c-sharp)
> [中嵌入 IronPython](https://stackoverflow.com/questions/5978918/embedding-ironpython-in-c-sharp)

我尝试这个：[链接](http://blogs.msdn.com/b/charlie/archive/2009/10/25/hosting-ironpython-in-a-c-4-0-program.aspx)

C＃：

```
private void Form1_Load(object sender, EventArgs e)
{
    var ipy = Python.CreateRuntime();
    dynamic test = ipy.UseFile(@"C:\Users\Admin\Desktop\Test.py");
    textBox1.Text = test.Simple();
} 
```

Python：

```
def Simple():
    print "Hello from Python" 
```

没有错误，当我运行它时，文本框保持空白。我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T23:53:06.927

您的`Simple`函数不返回任何内容，它只是将输出打印到控制台`print`。类似的东西`return "Hello from Python"`应该会给你想要的结果。

旁注：您可能能够拦截控制台输出，但它可能不是您感兴趣的。

# python - 递归生成所有唯一排列的代码？

> ID：13408213
> 
> 赞同：1
> 
> 时间：2012-11-15T23:44:00.130
> 
> 标签：python, permutation

假设我有一个列表`L=[1,2,3,3,4]`，我想递归地找到所有长度为 3 的排列。

我正在尝试返回所有唯一的排列，这意味着`[1,2,3]`输出中没有两次包含类似`3`的东西，因为`L`.

我问是因为 itertools.permutations 包含重复项，而且我试图按顺序迭代排列（从最低迭代`[1,2,3]`到`[4,3,3]`），因为我希望能够在需要时退出迭代。

如果我没有正确解释事情，我很抱歉。

编辑：我可能应该再次详细说明。在实践中，我不想实际生成每一个可能的排列（会有太多的排列），尽管代码可以运行完成。我正在尝试以特定顺序遍历所有排列，以便在必要时可以提前保释。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T23:47:22.380

这个怎么样：

```
l = [1,2,3,3,4]

print sorted(set(itertools.permutations(l,3))) 
```

输出：

```
[(1, 2, 3), (1, 2, 4), (1, 3, 2), (1, 3, 3), (1, 3, 4), ..., (4, 3, 3)] 
```

这使它保持有序并删除重复项。

* * *

如果您想避免事先生成每个可能的排列，我会这样做：

```
gen = itertools.permutations(l,3)
s = set()

for i in gen:
    if i not in s:
        print i  # or do anything else
    # if some_cond: break
    s.add(i) 
```

这`gen`是一个*生成器*，因此您不会预先创建所有可能使用的元素。

# prolog - 在 Prolog 中查找一个集合是否是加法 mod K

> ID：13408214
> 
> 赞同：2
> 
> 时间：2012-11-15T23:44:12.233
> 
> 标签：prolog, discrete-mathematics, addition

我是 Prolog 的初学者，我想我可以尝试编写一个简单的测试来检查一组整数 mod K (L) 是否是一个组。我首先试图找出上述集合是否是加法的，即。如果 L 的每两个元素之和也是 L 的一个元素。

我写了以下内容：

```
group(A,K):-member(B,A),member(C,A),As is B+C, Bs is mod(As,K), member(Bs,A). 
```

然后我尝试了这个：

```
trace. group([0,1,2],3). 
```

这自然会产生所有可能的总和，并且正确地回答答案对所有这些都是正确的。

但在所有这些情况之后，它最终打印出以下内容：

```
 1    1  Redo: group([0,1,2],3) ? 
  6    2  Redo: member(1,[0,1,2]) ? 
  6    2  Fail: member(1,[0,1,2]) ? 
  1    1  Fail: group([0,1,2],3) ?
  no 
```

为什么程序会检查最后一个案例，在我看来，这似乎是荒谬的？

在此之前的最后一个案例是：

```
 1    1  Redo: group([0,1,2],3) ? 
  6    2  Redo: member(0,[0,1,2]) ? 
  6    2  Fail: member(0,[0,1,2]) ? 
  3    2  Redo: member(1,[0,1,2]) ? 
  3    2  Exit: member(2,[0,1,2]) ? 
  4    2  Call: _158 is 2+2 ? 
  4    2  Exit: 4 is 2+2 ? 
  5    2  Call: _186 is 4 mod 3 ? 
  5    2  Exit: 1 is 4 mod 3 ? 
  6    2  Call: member(1,[0,1,2]) ? 
  6    2  Exit: member(1,[0,1,2]) ? 
  1    1  Exit: group([0,1,2],3) ? 

  true 
```

哪个做它应该做的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T00:26:52.737

为此目的使用示踪剂并不是很有帮助。它向您展示了许多无关紧要的细节。相反，专注于对问题的良好表述。专注于有意义的名称。用于`A`集合`B`和`C`元素。那是可以改进的！

你目前测试的是这样的：

> 一个集合中存在两个元素，其和模 K 在同一个集合中。

您要测试的是：

> 对于 S 中的所有 X、Y：( (X+Y) mod K ) 在 S 中。

操作本身可以写成：`Z is (X+Y) mod K`

示踪剂如何向您解释这一点？

```
组（S，K）：-
   \+ (
         成员(X,S), 成员(Y,S), Z 是 (X+Y) mod K,
         \+ 成员(Z,S)
   ）。

?- 组（[0,1,2],3）。
真的。

?- 组（[0,2],3）。
错误的。

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T00:36:43.510

我认为追踪器向您展示了回溯追踪器所遵循的所有不同分支。为此，它似乎否定了它尝试的最后一个分支中的一个成功语句，所以这一次它将采用不同的解决方案。

看看整个执行过程，你肯定会看到失败的谓词是真的，就像`Fail: (7) lists:member(0, [0, 1, 2])`在第二次评估中一样。

```
[trace]  ?- group([0, 1, 2], 3).
   Call: (6) group([0, 1, 2], 3) ? creep
   Call: (7) lists:member(_G718, [0, 1, 2]) ? creep
   Exit: (7) lists:member(0, [0, 1, 2]) ? creep
   Call: (7) lists:member(_G718, [0, 1, 2]) ? creep
   Exit: (7) lists:member(0, [0, 1, 2]) ? creep
^  Call: (7) _G721 is 0+0 ? creep
^  Exit: (7) 0 is 0+0 ? creep
^  Call: (7) _G724 is 0 mod 3 ? creep
^  Exit: (7) 0 is 0 mod 3 ? creep
   Call: (7) lists:member(0, [0, 1, 2]) ? creep
   Exit: (7) lists:member(0, [0, 1, 2]) ? creep
   Exit: (6) group([0, 1, 2], 3) ? creep
true ;
   Redo: (7) lists:member(0, [0, 1, 2]) ? creep
   Fail: (7) lists:member(0, [0, 1, 2]) ? creep
   Redo: (7) lists:member(_G718, [0, 1, 2]) ? creep
   Exit: (7) lists:member(1, [0, 1, 2]) ? creep
^  Call: (7) _G721 is 0+1 ? creep
^  Exit: (7) 1 is 0+1 ? creep
^  Call: (7) _G724 is 1 mod 3 ? creep
^  Exit: (7) 1 is 1 mod 3 ? creep
   Call: (7) lists:member(1, [0, 1, 2]) ? creep
   Exit: (7) lists:member(1, [0, 1, 2]) ? creep
   Exit: (6) group([0, 1, 2], 3) ? creep
true ;
   Redo: (7) lists:member(1, [0, 1, 2]) ? creep
   Fail: (7) lists:member(1, [0, 1, 2]) ? creep
   Redo: (7) lists:member(_G718, [0, 1, 2]) ? creep
   Exit: (7) lists:member(2, [0, 1, 2]) ? creep
^  Call: (7) _G721 is 0+2 ? creep
^  Exit: (7) 2 is 0+2 ? creep
^  Call: (7) _G724 is 2 mod 3 ? creep
^  Exit: (7) 2 is 2 mod 3 ? creep
   Call: (7) lists:member(2, [0, 1, 2]) ? creep
   Exit: (7) lists:member(2, [0, 1, 2]) ? creep
   Exit: (6) group([0, 1, 2], 3) ? creep
true ;
   Redo: (7) lists:member(_G718, [0, 1, 2]) ? creep
   Exit: (7) lists:member(1, [0, 1, 2]) ? creep
   Call: (7) lists:member(_G718, [0, 1, 2]) ? creep
   Exit: (7) lists:member(0, [0, 1, 2]) ? creep
^  Call: (7) _G721 is 1+0 ? creep
^  Exit: (7) 1 is 1+0 ? creep
^  Call: (7) _G724 is 1 mod 3 ? creep
^  Exit: (7) 1 is 1 mod 3 ? creep
   Call: (7) lists:member(1, [0, 1, 2]) ? creep
   Exit: (7) lists:member(1, [0, 1, 2]) ? creep
   Exit: (6) group([0, 1, 2], 3) ? creep
true ;
   Redo: (7) lists:member(1, [0, 1, 2]) ? creep
   Fail: (7) lists:member(1, [0, 1, 2]) ? creep
   Redo: (7) lists:member(_G718, [0, 1, 2]) ? creep
   Exit: (7) lists:member(1, [0, 1, 2]) ? creep
^  Call: (7) _G721 is 1+1 ? creep
^  Exit: (7) 2 is 1+1 ? creep
^  Call: (7) _G724 is 2 mod 3 ? creep
^  Exit: (7) 2 is 2 mod 3 ? creep
   Call: (7) lists:member(2, [0, 1, 2]) ? creep
   Exit: (7) lists:member(2, [0, 1, 2]) ? creep
   Exit: (6) group([0, 1, 2], 3) ? creep
true ;
   Redo: (7) lists:member(_G718, [0, 1, 2]) ? creep
   Exit: (7) lists:member(2, [0, 1, 2]) ? creep
^  Call: (7) _G721 is 1+2 ? creep
^  Exit: (7) 3 is 1+2 ? creep
^  Call: (7) _G724 is 3 mod 3 ? creep
^  Exit: (7) 0 is 3 mod 3 ? creep
   Call: (7) lists:member(0, [0, 1, 2]) ? creep
   Exit: (7) lists:member(0, [0, 1, 2]) ? creep
   Exit: (6) group([0, 1, 2], 3) ? creep
true ;
   Redo: (7) lists:member(0, [0, 1, 2]) ? creep
   Fail: (7) lists:member(0, [0, 1, 2]) ? creep
   Redo: (7) lists:member(_G718, [0, 1, 2]) ? creep
   Exit: (7) lists:member(2, [0, 1, 2]) ? creep
   Call: (7) lists:member(_G718, [0, 1, 2]) ? creep
   Exit: (7) lists:member(0, [0, 1, 2]) ? creep
^  Call: (7) _G721 is 2+0 ? creep
^  Exit: (7) 2 is 2+0 ? creep
^  Call: (7) _G724 is 2 mod 3 ? creep
^  Exit: (7) 2 is 2 mod 3 ? creep
   Call: (7) lists:member(2, [0, 1, 2]) ? creep
   Exit: (7) lists:member(2, [0, 1, 2]) ? creep
   Exit: (6) group([0, 1, 2], 3) ? creep
true ;
   Redo: (7) lists:member(_G718, [0, 1, 2]) ? creep
   Exit: (7) lists:member(1, [0, 1, 2]) ? creep
^  Call: (7) _G721 is 2+1 ? creep
^  Exit: (7) 3 is 2+1 ? creep
^  Call: (7) _G724 is 3 mod 3 ? creep
^  Exit: (7) 0 is 3 mod 3 ? creep
   Call: (7) lists:member(0, [0, 1, 2]) ? creep
   Exit: (7) lists:member(0, [0, 1, 2]) ? creep
   Exit: (6) group([0, 1, 2], 3) ? creep
true ;
   Redo: (7) lists:member(0, [0, 1, 2]) ? creep
   Fail: (7) lists:member(0, [0, 1, 2]) ? creep
   Redo: (7) lists:member(_G718, [0, 1, 2]) ? creep
   Exit: (7) lists:member(2, [0, 1, 2]) ? creep
^  Call: (7) _G721 is 2+2 ? creep
^  Exit: (7) 4 is 2+2 ? creep
^  Call: (7) _G724 is 4 mod 3 ? creep
^  Exit: (7) 1 is 4 mod 3 ? creep
   Call: (7) lists:member(1, [0, 1, 2]) ? creep
   Exit: (7) lists:member(1, [0, 1, 2]) ? creep
   Exit: (6) group([0, 1, 2], 3) ? creep
true ;
   Redo: (7) lists:member(1, [0, 1, 2]) ? creep
   Fail: (7) lists:member(1, [0, 1, 2]) ? creep
   Fail: (6) group([0, 1, 2], 3) ? creep
false. 
```

# prolog - 使用切割提高效率

> ID：13408215
> 
> 赞同：3
> 
> 时间：2012-11-15T23:44:11.823
> 
> 标签：prolog, prolog-cut

如果我有以下知识库，如何在 parent_of 术语中添加一个剪辑，以便如果 X 已经确定为父亲，prolog 不会尝试“检查”X 是否也是母亲？

```
father_of(max,john).
father_of(max,james).
father_of(max,gabe).
mother_of(june,john).
mother_of(june,james).

parent_of(X,Y) :- father_of(X,Y).
parent_of(X,Y) :- mother_of(X,Y). 
```

例如，我想要：

parent_of(max,Y) 为：Y=john, Y=james, Y=gabe

parent_of(june,Y) 为：Y=john, Y=james

对于第一个，我什至不希望 prolog 尝试检查 max 是否是母亲，因为已经确定他是父亲。

我已经尝试了很多组合，包括：

```
parent_of(X,Y) :- father_of(X,Y),!.  <-- fixes an X and Y and thus will list only Y=john
parent_of(X,Y) :- !,father_of(X,Y). <-- works for parent_of(max,Y) but not parent_of(jane) 
```

这甚至可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T00:08:18.273

做这样的优化是非常棘手的。Prolog 在没有任何优化的情况下在此类问题上表现出色。

但作为一般规则：你不能简单地在程序中设置cut，你需要提前进行各种测试。我怀疑这些测试很容易比您打算删除的开销更昂贵。这是一个尝试。老实说，我感觉不是很好，因为你宁愿先学习纯Prolog。

所以我们假设没有解决方案：`?- father_of(P,_), mother_of(P,_).`

```
parent_of(F, C) :-
   ( atom(F), \+ \+ 父亲_of(F, _) -> ！
   ; 真的
   ),
   父亲（F，C）。
parent_of(M, C) :-
   母亲（M，C）。

```

这真的更好吗？也许，也许不是。

但无论如何，你已经明白了一个重要的点：巧妙的优化需要大量的测试。我相信上面是正确的，但我什至不确定这会更快。毕竟，现在有两个查找`father_of/2`代替一个 for`father_of/2`和一个 for `mother_of/2`。天真的版本可能会更快......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T07:16:02.480

为此，一些 Prolog 系统提供了“软剪辑” `*->/2`：

```
parent_of(X,Y) :- father_of(X,Y) *-> true ; mother_of(X,Y). 
```

通常 for `If *-> Then ; Else`，如果条件`If`成功，`Then`则执行，回溯时只返回`If`和的替代解决方案`Then`。只有在`If`根本没有解决方案的情况下，`Else`才会执行。

这需要您知道谓词的模式，即调用模式。在您的情况下，如果您的谓词模式`parent_of`是`parent_of(++,?)`，那么添加软切就可以了（假设名称是唯一的或仅针对一种性别出现）。在 的情况下`parent_of(++,++)`，即使是常规切割也可以，尽管没有必要，除非您的数据库中有重复的事实（对称性破坏是切割的一个用例）。但是，如果您还必须满足`parent_of(-,?)`，那么削减确实会削减解决方案。

通常：仅当您确定您切掉的搜索树的分支不包含任何解决方案或仅包含您不感兴趣的对称解决方案时才使用剪切。

# javascript - 为什么页面加载后这个方法在 Firefox 中“未定义”？

> ID：13408217
> 
> 赞同：0
> 
> 时间：2012-11-15T23:44:17.237
> 
> 标签：javascript

```
"use strict";
Math.isNumber = function(number) {
    return (number >= 0 || number < 0);
}; 
```

我已将上述内容`<script>`放在`<head>`. 在页面完全加载之前，我可以使用`alert(Math.isNumber("blah"))`并获得一个值。但是一旦页面加载完毕，`Math.isNumber`在 Firefox 的 web 控制台中输入`undefined`. 在 Chrome 中，它返回我上面设置的函数。为什么？

# android - 初级安卓布局

> ID：13408219
> 
> 赞同：1
> 
> 时间：2012-11-15T23:44:27.263
> 
> 标签：android, android-layout

所以我是 Android 开发的新手，对布局有疑问。当我在 Eclipse 中创建我的应用程序时，我对其进行了设置，以便我可以看到它在 Nexus S（4 英寸，480 x 800）上的样子。当我在我的 Exhibit 2 4G（3.7 英寸，480 x 800）上打开它时，它看起来很棒，但是当我在 Nexus 7 上打开它时它看起来很糟糕。按钮在错误的位置，事情看起来不像相同的。我假设这与布局有关？当我在 java 中创建 Windows 应用程序时，我使用诸如边框布局、网格布局、流布局、蚀刻等布局，然后将其添加到框架中。这样，无论我调整多大的窗口，它看起来总是一样的。你如何在 Android 中做到这一点？还有，有点跑题了 但是当在文本框中显示数字时，如何使它只显示到百分之一？我开始创建处理小费、销售价格、蚀刻的应用程序，并且不需要最终计算的价格到小数点后 5 位。

这是我的布局代码：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".Main" >

    <TextView
        android:id="@+id/tagpricetext"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_marginLeft="18dp"
        android:layout_marginTop="21dp"
        android:text="Enter tag price:"
        android:textAppearance="?android:attr/textAppearanceLarge"
        tools:ignore="HardcodedText" />

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/tagpricetext"
        android:layout_marginTop="36dp"
        android:layout_toLeftOf="@+id/tagprice"
        android:text="Enter % off:"
        android:textAppearance="?android:attr/textAppearanceLarge"
        tools:ignore="HardcodedText" />

    <Button
        android:id="@+id/calc"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/tagpricetext"
        android:layout_alignRight="@+id/percentoff"
        android:layout_below="@+id/textView1"
        android:layout_marginTop="31dp"
        android:text="Calculate"
        tools:ignore="HardcodedText" />

    <TextView
        android:id="@+id/saleprice"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/textView2"
        android:layout_alignBottom="@+id/textView2"
        android:layout_toRightOf="@+id/textView1"
        android:text="     "
        android:textAppearance="?android:attr/textAppearanceLarge"
        tools:ignore="HardcodedText" />

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/tagpricetext"
        android:layout_alignParentTop="true"
        android:orientation="vertical"
        tools:ignore="UselessLeaf" >

    </LinearLayout>

    <TextView
        android:id="@+id/textView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/calc"
        android:layout_below="@+id/calc"
        android:layout_marginTop="20dp"
        android:text="Sale Price: $"
        android:textAppearance="?android:attr/textAppearanceLarge"
        tools:ignore="HardcodedText" />

    <EditText
        android:id="@+id/tagprice"
        android:layout_width="100dp"
        android:layout_height="wrap_content"
        android:layout_alignTop="@+id/tagpricetext"
        android:layout_marginLeft="18dp"
        android:layout_toRightOf="@+id/tagpricetext"
        android:ems="10"
        android:inputType="numberDecimal" >

        <requestFocus />
    </EditText>

    <EditText
        android:id="@+id/percentoff"
        android:layout_width="100dp"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/tagprice"
        android:layout_alignTop="@+id/textView1"
        android:ems="10"
        android:inputType="numberDecimal" />

</RelativeLayout> 
```

这是一个截图： [https ://www.dropbox.com/sh/cq327dyhzzb1af6/PjRXqS2DWc/screenshot.jpg](https://www.dropbox.com/sh/cq327dyhzzb1af6/PjRXqS2DWc/screenshot.jpg)

提前致谢！

布兰登

三星展览 2 4G (T-Mobile)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T01:43:39.717

开发人员指南中的这篇文章涵盖了您需要了解的有关支持不同屏幕尺寸的所有信息：http: [//developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

如果您希望将所有内容居中，则只需将其全部标记为 center_horizo​​ntal ...

至于你的数字，也许乘以 100，Math.round 它，然后除以 100？

# c - printf for C %f 在小数点后留下 6 个 0

> ID：13408221
> 
> 赞同：1
> 
> 时间：2012-11-15T23:44:34.687
> 
> 标签：c, formatting, printf

```
int main ()
{
float MarysAge;

MarysAge = (int) 19.32;
printf("Mary is %f years old\n", MarysAge);

return 0;
} 
```

为什么这个输出最后有 6 个 0？试图帮助一个朋友，但是，我不太了解 C，任何帮助表示赞赏 =)。

输出 = 玛丽 19.000000 岁

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T23:46:51.447

我误读了你的问题。

位数可以控制如下...

```
printf("Mary is %.2f years old\n", MarysAge); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T02:09:54.677

%f 的默认精度为 6，点后输出 6 个数字。和 (int) 向下舍入。首先 19.32 在 (int) 上变为 19，然后在 %f 上变为 19.000000。

# javascript - 单击时显示/隐藏按钮

> ID：13408223
> 
> 赞同：2
> 
> 时间：2012-11-15T23:44:43.993
> 
> 标签：javascript, function, button, show-hide

我想要两个按钮，单击时相反显示或隐藏。（即，通过 style:display=none|block;）。

最初，button1 是 display:block，而 button2 是 display:none。

当您单击 button1 时，它会将 button2 切换为 display:block 并将 button1 切换为 display:none。

我知道这可能很简单，请原谅我缺乏知识。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T23:49:05.603

如果您可以使用 jquery，这很容易执行，您可以简单地使用`css(key, value)`函数设置对象的 css，例如[这个 jsfiddle](http://jsfiddle.net/GJCy9/)

或者使用纯js：[this jsfiddle](http://jsfiddle.net/MVQwL/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T23:53:00.760

首先我们创建两个按钮。给它们 id 属性，这样我们就有一个别名来访问它们：

```
<button id="first">Click</button> <button id="second">Second</button> 
```

按照您的定义设置 CSS：

```
#first  { display: block; }
#second { display: none;  } 
```

然后是JS。我们使用一个名为 的函数通过它们的 ID 访问这两个元素`document.getElementById()`。这将返回具有指定 ID 的元素。

```
var first = document.getElementById( 'first' ),
    second = document.getElementById( 'second' ); 
```

现在我们可以创建一个`toggle`函数。这是概念：如果`display`第一个元素的属性是“block”，那么我们将其更改为“none”，并将后者更改为“block”。反之亦然。这里是：

```
function toggle() {

    if ( first.style.display === "block" ) {

        first.style.display = "none";
        second.style.display = "block";

    } else { // switch back

        first.style.display = "block";
        second.style.display = "none";

    }

} 
```

然后我们这样在 HTML 中设置事件处理程序：

```
<button id="first" onclick="toggle();">First</button>
<button id="second" onclick="toggle();">Second</button> 
```

或者我们可以使用 JS 来实现：

```
first.onclick = toggle;
second.onclick = toggle; 
```

我更喜欢第二个，我们会坚持下去，

你有它。你可以在这里找到一个工作示例——http: [//jsfiddle.net/twEK5/](http://jsfiddle.net/twEK5/)

# build - 我可以预先收缩我的 dojo、dijit 和 dojox 文件吗？

> ID：13408226
> 
> 赞同：2
> 
> 时间：2012-11-15T23:44:54.060
> 
> 标签：build, dojo

据我了解 Dojo 构建，它需要大量的 dojo、dijit 和 dojox 模块文件，将它们复制到您的 releaseDir，将它们缩小，然后将必要的文件连接到您的最终输出文件中（可能是 dojo.js）。

*我突然想到，每次*运行 Dojo 构建时都不需要复制和压缩 dojo、dijit 和 dojox 文件，因为它们保持不变。

有没有办法“预收缩”这些文件并告诉 Dojo 使用这些文件。现在，我正在缩小一堆我永远不会真正包含在最终构建文件中的文件。我不介意每次迁移到新版本的 Dojo 时都这样做*一次，但是在每次构建时都这样做会延长我的构建时间并用谷壳填充我的构建日志。*

有谁知道这样做的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T23:49:11.143

### 概述

您可以将构建工具指向已构建的一组 dojo、dijit 和 dojox 文件夹。依赖解析仍然有效，因为文件保留了它们`define`的 s.

不构建两次的“技巧”要求您在自己的模块中拥有任何所需的全局变量，但这就是您使用 AMD 的原因。

### 脚步

1.  缩小 dojo、dijit 和 dojox 文件夹。
2.  在不包括与 dojo 相关的文件夹的情况下，最小化您自己的源文件（没有 AMD 解析器）。
3.  运行带压缩功能的 AMD 解析器。

# php - PHP会话变量未通过

> ID：13408230
> 
> 赞同：-1
> 
> 时间：2012-11-15T23:45:14.673
> 
> 标签：php, session, null

我有 2 页

**one.php**：

```
<?php

session_start();
$_SESSION["myvar"] = "Hello World!";
header("Location: http://mysite.com/two.php");
die;

?> 
```

**二.php**：

```
<?php

session_start();
var_dump($_SESSION["myvar"]); 

?> 
```

当它转到第二页时，它显示 NULL 而不是 Hello World!。

*php v5.3.8*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T23:51:18.273

我刚刚用 php 5.3.8（与你的版本相同）尝试了你的例子并得到

```
string(12) "Hello World!" 
```

作为输出。所以我由此得出的结论是您的会话文件夹不可写。也许您应该阅读[php - session save path](http://php.net/manual/en/function.session-save-path.php)并选择另一个会话保存路径。我想那是你的问题。

并且：正如所有其他人所说：打开error_reporting by`error_reporting(E_ALL);`

# javascript - 事件绑定 Ctrl-Shift-N

> ID：13408233
> 
> 赞同：2
> 
> 时间：2012-11-15T23:45:29.093
> 
> 标签：javascript, jquery

我正在使用 jQuery.hotkeys 来绑定键盘事件。

我正在尝试绑定`Ctrl`++`Shift``N`

```
$(document).bind('keydown', 'ctrl+shift+n', function(e) {
    e.preventDefault();
    alert('Ctrl+Shift+N');
    return false;
}); 
```

以上不起作用。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T00:00:54.367

Chrome 不允许您接管某些快捷方式。

如果您使用以下代码[http://jsfiddle.net/rNkmA/1/](http://jsfiddle.net/rNkmA/1/)

```
$(document).bind('keydown', function(e) {
    console.log(e.which);
    console.log(e.ctrlKey);
    console.log(e.shiftKey);
    if (e.ctrlKey && e.shiftKey && e.which === 78) {
        e.preventDefault();
        console.log('Ctrl+Shift+N');
        return false;
    }
});​ 
```

您会看到处理程序永远不会在 Chrome 中被调用

我建议您使用未预先分配给 chrome 的快捷方式，例如`alt`++ 。这将适用于 FF、IE、Safari 和 Chrome（有人测试过 Opera 吗？）`shift``n`

# c# - 是否可以在不从服务中公开 IQueryable 的情况下使用 MVCContrib 网格？

> ID：13408235
> 
> 赞同：2
> 
> 时间：2012-11-15T23:45:37.200
> 
> 标签：c#, asp.net-mvc, iqueryable, mvccontrib

我不想有一个返回 IQueryable 的方法，但我也希望我的分页查询在数据库中而不是在内存中执行。本文[讨论](http://thinkbeforecoding.com/post/2009/01/19/Repositories-and-IQueryable-the-paging-case)如何通过 IQueryable 仅公开数据的子集。

我修改了文章中描述的 GetRange 方法，如下所示。

```
 public IEnumerable<T> GetRange<TKey>(int page, int pageSize, Expression<Func<T, TKey>> keySelector, bool ascending )
    {

        IOrderedQueryable<T> sourceOrdered = null;
        sourceOrdered = ascending ? source.OrderBy(keySelector) : source.OrderByDescending(keySelector);

        return sourceOrdered.Skip((page - 1) * pageSize).Take(pageSize);

    } 
```

并通过它 contrib IPagination 如下。

```
 var productPagedList = productList.GetRange(page ?? 1, 10, p => p.SupplierID, false)
            .AsPagination(page ?? 1, 10); 
```

但是网格需要知道总记录数才能正确呈现寻呼机。有没有办法让 MVCContrib 网格以这种方式与从服务层公开的 IQueryable 的子集一起工作？或者以某种方式将总记录数提供给它？或者有什么其他技巧吗？

谢谢

# java - 简单的 Java GUI 作为弹出窗口和下拉菜单

> ID：13408238
> 
> 赞同：5
> 
> 时间：2012-11-15T23:46:08.103
> 
> 标签：java, swing, popup, jcombobox, joptionpane

我从来不用用java写GUI。这次我也可以跳过它并`args`用作 UI（用户界面）。但我想知道是否有一种简单的方法来创建一个小 GUI 让用户选择其中一个选项。换句话说，实现`askUser()`用户可以从下拉菜单中选择并按“确定”的功能。我花了一些时间学习这个主题，但我什至不确定我是否知道我需要哪种类型的 GUI 来完成这项任务。框架？面板？菜单？谢谢。

这是所需功能的示例。

```
package trygui;

public class Main {

    public static void main(String[] args) {
        String[] choices = new String[]{"cats", "dogs"};
        int choice = askUser(choices);
        System.out.println("selected: " + choices[choice]);
    }

    static int askUser(String[] choices) {
        // create pop-up dialog
        return 0;
    }
} 
```

**更新**：我使用 Netbeans，如果这可以有所作为。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-16T00:07:23.977

最简单的选择是使用`JOptionPane`API

![在此处输入图像描述](../Images/a11ea86dde0e4e242af9ee36da091927.png)

```
public class TestOptionPane03 {

    public static void main(String[] args) {
        new TestOptionPane03();
    }

    public TestOptionPane03() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JPanel panel = new JPanel();
                panel.add(new JLabel("Please make a selection:"));
                DefaultComboBoxModel model = new DefaultComboBoxModel();
                model.addElement("Chocolate");
                model.addElement("Strewberry");
                model.addElement("Vanilla");
                JComboBox comboBox = new JComboBox(model);
                panel.add(comboBox);

                int result = JOptionPane.showConfirmDialog(null, panel, "Flavor", JOptionPane.OK_CANCEL_OPTION, JOptionPane.QUESTION_MESSAGE);
                switch (result) {
                    case JOptionPane.OK_OPTION:
                        System.out.println("You selected " + comboBox.getSelectedItem());
                        break;
                }

            }
        });
    }
} 
```

您可以通过阅读[如何制作对话框来了解更多信息](http://docs.oracle.com/javase/tutorial/uiswing/components/dialog.html)

**已更新反馈**

```
public class TestOptionPane03 {

    public static void main(String[] args) {
        String choice = ask("Chocolate", "Strewberry", "Vanilla");
        System.out.println("You choose " + choice);
    }

    public static String ask(final String... values) {

        String result = null;

        if (EventQueue.isDispatchThread()) {

            JPanel panel = new JPanel();
            panel.add(new JLabel("Please make a selection:"));
            DefaultComboBoxModel model = new DefaultComboBoxModel();
            for (String value : values) {
                model.addElement(value);
            }
            JComboBox comboBox = new JComboBox(model);
            panel.add(comboBox);

            int iResult = JOptionPane.showConfirmDialog(null, panel, "Flavor", JOptionPane.OK_CANCEL_OPTION, JOptionPane.QUESTION_MESSAGE);
            switch (iResult) {
                case JOptionPane.OK_OPTION:
                    result = (String) comboBox.getSelectedItem();
                    break;
            }

        } else {

            Response response = new Response(values);
            try {
                SwingUtilities.invokeAndWait(response);
                result = response.getResponse();
            } catch (InterruptedException | InvocationTargetException ex) {
                ex.printStackTrace();
            }

        }

        return result;

    }

    public static class Response implements Runnable {

        private String[] values;
        private String response;

        public Response(String... values) {
            this.values = values;
        }

        @Override
        public void run() {
            response = ask(values);
        }

        public String getResponse() {
            return response;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T00:17:08.907

询问后我找到了这个解决方案。为了简单起见，`askUser()`返回`String`.

```
package trygui;

import javax.swing.JOptionPane;

public class Main {

    public static void main(String[] args) {
        String[] choices = new String[]{"cats", "dogs"};
        String choice = askUser(choices);
        System.out.println("selected: " + choice);
    }

    static String askUser(String[] choices) {
        String s = (String) JOptionPane.showInputDialog(
                null,
                "make your choice",
                "Try GUI",
                JOptionPane.PLAIN_MESSAGE,
                null,
                choices,
                choices[0]);
        return s;
    }
} 
```

![在此处输入图像描述](../Images/b38ce60df433b4c01ab85c97dad72f2f.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-15T23:57:44.523

如果您想创建 Swing GUI，使用像 NetBeans 这样的 IDE 可以让您使用[WYSIWYG gui 设计器](http://netbeans.org/kb/docs/java/quickstart-gui.html)的简单性，因此您只需将您的 GUI 元素拖放到适当的位置，然后在[NetBeans](http://netbeans.org/)的 GUI 代码周围添加您的逻辑代码输出。

它当然不是依靠“为您构建 gui”的东西，但它确实在为您建立工作基础方面做得很好。您还可以通过阅读和使用 NetBeans 为 GUI 生成的代码来学习很多关于 Swing 的知识。

我发现这是开始设计 Swing 应用程序的一个很好的加速器。

# vba - 在 Word 模板中输入值后，FormField 的结果在宏中返回空

> ID：13408243
> 
> 赞同：0
> 
> 时间：2012-11-15T23:47:00.813
> 
> 标签：vba, ms-word, macros, form-fields

我有一个 Microsoft Word 2010 模板文件，上面有几个 FormFields。项目名称、项目位置和项目编号的顶部有三个。我打算截取 FileSave 内置宏并将上述三个字段的值连接起来，以在另存为对话框中建议一个文件名。我的代码包括：

```
Sub FileSave()

    With Dialogs(wdDialogFileSaveAs)
        .Name = ThisDocument.FormFields("ProjectNumber").Result & _
                ThisDocument.FormFields("ProjectName").Result & _
                ThisDocument.FormFields("ProjectLocation").Result
        .Show
    End With

End Sub 
```

当我填写三个字段并按 ctrl+s 时，确实出现了另存为对话框，但文件名是空白的。在立即窗口中进一步调查后，我可以参考这些字段，但它们的 Result 属性总是返回一个空字符串。因此对话框中的文件名显示为空白。我可以参考布尔属性、类型属性等，并通过即时窗口将其显示在 MsgBox 中，但我无法让它返回任何结果。有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T20:02:33.187

所以看起来这个问题的答案最终是这样的：我仍在模板文档中工作，而不是启用宏的文档。对于模板，在宏运行时，文档上的字段不包含值。为了使宏能够使用输入到 FormFields 中的值，它必须是文档而不是模板。希望这可以帮助任何人寻找这个问题的答案。

# jquery-cookie - 使用 Bootstrap，让警报框记住关闭操作

> ID：13408244
> 
> 赞同：12
> 
> 时间：2012-11-15T23:47:01.057
> 
> 标签：jquery-cookie

我正在尝试创建一个引导警报框，它会记住用户何时单击关闭按钮。我想我需要将该信息存储在 cookie 中。理想情况下，该 cookie 只会持续到当前会话，然后他们返回该框将再次出现。

我正在使用 jQuery-Cookie 插件。我上传到`/jquery-cookie-master`. 插件可以在[这里找到](https://github.com/carhartl/jquery-cookie)。

这是我到目前为止通过遵循[此处找到](https://stackoverflow.com/questions/10151605/using-twitter-bootstrap-how-can-you-remember-user-actions)的代码所得到的。

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script src="/jquery-cookie-master/jquery.cookie.js"></script>
<script>
    function runOnLoad(){
        if($.cookie('alert-box') == null) {
            $.cookie('alert-box', 'open', { expires: 7 });
        } else if($.cookie('alert-box') == 'close') {
            $(".close").hide();
        }

</script> 
```

HTML：

```
<body onload="runOnLoad()">

<div class="alert alert-info">
  <button type="button" class="close" data-dismiss="alert" href="hideMe.php" onclick="hideMe()">×</button>
  <p>
    <strong>FORUM UPGRADE:</strong> In light of our recent surge in popularity we upgraded our forum and unfortunately lost all the old threads in the process.
  </p>
  <p>
    In an effort to kick-start the forum again we need your help. Sign up now and leave a post (it's free). Once we reach 100 threads every member will receive a special gift.
  </p>
  <p>
    <a href="http://example.com/forum/#/entry/register">
      <strong>Sign up to the forum now</strong>
    </a>.
  </p>
</div>

</body> 
```

不幸的是，它不起作用。当我单击关闭按钮时，它不记得该操作，如果我刷新页面，警报框将再次出现。

我做错了什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-04T09:07:47.717

# 代码问题

*   在您的代码`onload`功能中，您似乎正在设置 cookie 值，这很奇怪，因为您只想在用户关闭警报框时设置 cookie。

*   你的按钮有一个`href`属性。这不是必需的，也是无效的 html。

# 解决方案

为了简单地隐藏和记住警报框的状态，您必须将事件绑定到关闭按钮，以便您知道用户何时单击关闭。

要使用 jQuery 绑定事件，您可以使用以下代码：

```
// When document is ready replaces the need for onload
jQuery(function( $ ){

    // Grab your button (based on your posted html)
    $('.close').click(function( e ){

        // Do not perform default action when button is clicked
        e.preventDefault();

        /* If you just want the cookie for a session don't provide an expires
         Set the path as root, so the cookie will be valid across the whole site */
        $.cookie('alert-box', 'closed', { path: '/' });

    });

}); 
```

要隐藏警报框，您只需检查正确的 cookie 值并隐藏该框：

```
jQuery(function( $ ){

    // Check if alert has been closed
    if( $.cookie('alert-box') === 'closed' ){

        $('.alert').hide();

    }

    // ... Binding code from above example

}); 
```

# sql - 将 SQL Server 日期转换为 Oracle

> ID：13408253
> 
> 赞同：0
> 
> 时间：2012-11-15T23:48:02.720
> 
> 标签：sql, sql-server, oracle

从 SQL Server ，我需要能够根据日期列从 Oracle 数据库中提取一些信息。

```
SET @foo = 'SELECT * from OPENQUERY(' + @LinkedServer +
', ''SELECT *
    FROM Table1
    WHERE date_revised > '''''+@myDate+'''''')' 
```

不要介意数字`'`是否关闭...我删减了一些内容以使其更短。我曾尝试`convert()`在 SQL Server 端使用，但我似乎找不到 Oracle 接受的格式，因此它不断抛出错误。

至少，我需要日期、小时和分钟。在 SQL Developer (Oracle) 中测试值以找出可接受的格式时，我一直遇到这种行为：

```
select to_date('2010-11-15 12:21:00', 'yyyy/mm/dd hh:mi:ssam') from dual

15-NOV-10 
```

显然，我指定我想要时间，但它就是不同意我的看法。我在这个问题上被困太久了。

简而言之，如何将 SQL Server`datetime`格式化为 Oracle`to_date`函数将接受的格式，以及如何使该函数正确显示日期和时间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T00:26:39.407

> SET @FOO = (选择 * ...

我对此皱眉，因为您正在将查询结果以及`*`（所有列）分配给变量？

无论如何，a_horse_with_no_name 已经为您提供了您需要呈现给 Oracle 的日期时间文字的格式，即`timestamp`.

```
SET @query = 'SELECT * FROM Table1
              WHERE date_revised > timestamp ''2010-11-15 12:21:00'''; 
```

（我把生成 YYYY-MM-DD HH:MM:SS 文本的练习留给你）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T06:26:49.027

假设@mydate 是 DATETIME，诀窍是将日期时间更改为 SQL Server 上具有已知格式的字符串，并使用该格式将其更改回 Oracle 上的 DATE。

```
SET @foo = 'SELECT * from OPENQUERY(' + @LinkedServer +
', ''SELECT *
     FROM Table1
WHERE date_revised > TO_DATE('''''
                     + CONVERT( varchar( max ), @myDate, 120 )
                     + ''''', ''''yyyy-mm-dd hh24:mi:ss'''') '')' 
```

120 部分告诉 SQL Server 将日期格式化为格式为 yyyy-mm-dd hh24:mi:ss 的字符串，格式部分告诉 Oracle 如何将字符串转回日期。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T16:56:05.667

由于甲骨文与我不合作，我想出了自己的解决方案。我基本上采用了`DATEPARTS`一切，并在 oracle 中以相同的格式构建了我自己的日期字符串。感谢您的全部输入。当我有更多时间时，我会尽量让这个工作正常进行。这个创可贴现在就可以了。

```
DECLARE @year varchar(4),
    @month varchar(3),
    @day varchar(2),
    @hour varchar(2),
    @meridian varchar(2),
    @minute varchar(2),
    @second varchar(2),
    @date smalldatetime,
    @OracleTime varchar(50);

SET @date = (SELECT MAX(Processed) FROM MES_CAPP.Signoff)
SET @year = YEAR(@date)
SET @month = DATENAME(m,@date)
SET @day = DAY(@date)
-------------------------------------------------------------------------
IF (DATEPART(hh, @date) >= 12)
BEGIN
    SET @hour = DATEPART(hh, DATEADD(hh, -12, @date))
    SET @meridian = 'PM'
END
ELSE
BEGIN
    SET @hour = DATEPART(hh, @date)
    SET @meridian = 'AM'
END

SET @minute = DATEPART(MINUTE, @date)
SET @second = '00'

SET @OracleTime = @day + '-'  + @month + '-' + @year + ' ' + @hour + ':' + @minute + ':' + @second + ' ' + @meridian 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-27T17:01:12.840

我接受了 Jeff 的回答并将其包装在一个返回 to_date 字符串的函数中。

```
 CREATE FUNCTION [dbo].[fnOracleTo_DateStringFromMsSqlDate] 
(
    @InputDate datetime
)
RETURNS varchar(100)
AS
BEGIN

    DECLARE @year varchar(4),
        @month varchar(3),
        @day varchar(2),
        @hour varchar(2),
        @minute varchar(2),
        @second varchar(2),
        @date smalldatetime,
        @OracleTime varchar(50),
        @returnString varchar(100)

    SET @year = YEAR(@InputDate)
    SET @month = Month(@InputDate)
    SET @day = DAY(@InputDate)
    -------------------------------------------------------------------------

        SET @hour = DATEPART(HH, @InputDate)

    SET @minute = DATEPART(MINUTE, @InputDate);
    SET @second = datepart(SECOND, @InputDate);

    SET @OracleTime = @day + '-'  + @month + '-' + @year + ' ' + @hour + ':' + @minute + ':' + @second ;
    set @returnString = 'to_date(' + char(39) +  @OracleTime  + char(39) + ',' + char(39) +  'DD-MM-YYYY HH24:MI:SS' + char(39) + ')'

    return @returnString;
END 
```

# extjs - Extjs - 使用组件查询选择特定的网格行

> ID：13408262
> 
> 赞同：0
> 
> 时间：2012-11-15T23:49:20.330
> 
> 标签：extjs, grid, component-query

我需要动态更改网格面板行中包含的值，但我不知道如何选择行 - 我可以使用 ComponentQuery 来选择它吗？

我有一个带有唯一标识符的隐藏列，我想将其用作选择器，但我不确定这是否可行，如果可以，语法是什么。

任何指导表示赞赏。

[编辑]为了澄清，我想简单地更改网格行中呈现给用户的内容，而不更新任何基础数据 - 也许这是不可能的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T15:40:59.297

您可能会发现**[列渲染器](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.grid.column.Column-cfg-renderer)**很有帮助。

```
renderer: function(value){
    if (value === 1) {
        return '1 person';
    }
    return value + ' people';
} 
```

但我不太确定它们是否正是您正在寻找的，因为它们只允许在渲染时操作查看的数据。如果这不合适，您应该描述一个场景。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T00:03:31.520

您不会通过更改行来更改网格中的数据，而是通过更新底层模型来更改它：

```
store.first().set('myField', 1); 
```

# ios - 应用程序本身是否有任何最小数量的磁盘空间？

> ID：13408263
> 
> 赞同：2
> 
> 时间：2012-11-15T23:49:25.073
> 
> 标签：ios

> 注意：我不是在问是否有最大值，这个问题之前已经被问过，我是在问是否还有为应用程序预留的最小值。

我的应用程序从 Internet 下载内容包，我正在调查它在低/无磁盘空间条件下的表现。

这些包有一个时间元素，如果没有空间，那么应用程序可以自动删除旧内容，以便为新内容腾出空间。（这些包可能会过期，因此在没有用户明确删除它们的情况下将它们删除是标准行为）。

但是，如果所有应用程序之间共享所有磁盘空间并且某些其他应用程序已经吞噬了设备上的所有可用磁盘空间，那么这将毫无意义，这样我的应用程序就什么都没有了。这种情况是否可能，另一个应用程序可以消耗所有内容，而我的应用程序什么也没有？或者每个应用程序是否保留了一些空间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T23:53:04.400

应用程序可以使用的空间量没有限制。理论上，应用程序可以使用所有可用的磁盘空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T23:53:36.003

AFAIK没有实际限制。我一直在使用一个占用 1.6GB 的应用程序，并且没有遇到任何问题。从本质上讲，您使用可用的东西，如果其他人刻薄并占据所有空间，那么您无能为力。一个好的策略可能是声明“我的应用程序将使用 512mb 的磁盘空间”或类似的东西，然后确保你永远不会超过这个值。这会让您放心，您的应用程序可以运行到上限。任何移动设备上的经验法则，永远不要假设你有足够的空间来存放任何东西，在写入磁盘时总是检查失败，并有一个处理它的策略。

更进一步。如果你想保证你的应用总是有足够的空间。选择一个大小上限（比如 256 mb），然后在安装和首次运行您的应用程序时，创建占用大量磁盘空间的虚拟文件。然后，当您下载有用的数据时，将虚拟文件替换为有用的文件，以便您的应用始终使用原始保留空间量。

我似乎也有点误解了这个问题。为您的应用程序保留的最小空间是从应用程序商店重新下载所占用的空间。就是这样。如果你只有 200mb 的免费空间并且你尝试下载一个 300mb 的应用程序，它不会让你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T05:35:42.040

在写入磁盘之前，您可以检查可用磁盘空间的数量并相应地提醒用户。

```
-(uint64_t)getFreeDiskspacePrivate
{
uint64_t totalSpace = 0.0f;
uint64_t totalFreeSpace = 0.0f;
NSError *error = nil;  
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);  
NSDictionary *dictionary = [[NSFileManager defaultManager] attributesOfFileSystemForPath:[paths lastObject] error: &error];  

if (dictionary) {  
    NSNumber *fileSystemSizeInBytes = [dictionary objectForKey: NSFileSystemSize];  
    NSNumber *freeFileSystemSizeInBytes = [dictionary objectForKey:NSFileSystemFreeSize];
    totalSpace = [fileSystemSizeInBytes floatValue];
    totalFreeSpace = [freeFileSystemSizeInBytes floatValue];
    //NSLog(@"Memory Capacity of %llu MiB with %llu MiB Free memory available.", ((totalSpace/1024ll)/1024ll), ((totalFreeSpace/1024ll)/1024ll));
} /*else {  
    NSLog(@"Error Obtaining System Memory Info: Domain = %@, Code = %@", [error domain], [error code]);  
}  
*/
return totalFreeSpace;
} 
```

# php - symfony2 关系学说

> ID：13408265
> 
> 赞同：0
> 
> 时间：2012-11-15T23:49:38.703
> 
> 标签：php, symfony, doctrine

您好，我正在使用 Symfony2，我有以下关系：

表医：

```
/**
* @ORM\OneToMany(targetEntity="Cita", mappedBy="medico")
*/
protected $citas; 
```

表 citas：

```
 /**
 * @ORM\ManyToOne(targetEntity="Medico", inversedBy="citas")
 */
 protected $medico; 
```

然后我有这个代码，其中一个预约是创建一个医生。

```
 $em = $this->get('doctrine')->getEntityManager();
        $cita = new Cita();
        $empleado = $this->get('security.context')->getToken()->getUser();
        $cita->setEmpleado($empleado);
        $cliente = $this->getDoctrine()->getRepository('miomioBundle:Usuario')->find($this->getRequest()->query->get('cliente'));
        $cita->setFechacita(new \DateTime($this->getRequest()->query->get('fecha')));
        $cita->setCliente($cliente);//asociacion de cita a usuario.
        $cita->setFechaoper(new \DateTime('now'));
        $medico = $this->getDoctrine()->getRepository('miomioBundle:Medico')->find($this->getRequest()->query->get('medico'));
        $cita->setMedico($medico);

        $em->persist($cita);
        $em->persist($cliente);
        $em->persist($empleado);
        $em->flush(); 
```

然后尝试预约医生：

```
public function pintarAction($id)
    {
        $return_arr = array();
        $medico = $this->getDoctrine()->getRepository('miomioBundle:Medico')->find($id);
        $citas = $medico->getCitas();
        foreach($citas as $cita){
                return  new Response('entra');
                    $array['id'] = (string)$cita->getId();
                    $array['title'] = $cita->getCliente()->getNombre() . ' '. $cita->getCliente()->getApellido1();
                    $array['empleado'] = $cita->getEmpleado()->getUsername();
                    if ($cita->getInforme()){
                        $array['informe'] = $cita->getInforme()->getId();
                        $array['className'] = 'informe';
                    }
                    else{
                        $array['informe'] = 'NO';
                        $array['className'] = '';
                    }
                    $array['fecha'] = $cita->getFechaoper()->format('d-m-Y H:i:s');
                    $array['start'] = $cita->getFechacita()->format('Y-m-d H:i:s');
                    $array['allDay'] = false;
                array_push($return_arr,$array);
         }

    return  new Response(json_encode($return_arr), 200, array('Content-Type', 'text/json'));
    } 
```

其中变量 $medico 是可以的。但变量 $citas 为空。为什么？

有人知道我做错了吗？问候和感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T10:48:30.123

感谢您的回答，但问题不是结果。

这是拥有方， inversedBy 因为您指定了属性：

```
/**
 * @ORM\ManyToOne(targetEntity="Medico", inversedBy="citas")
*/
protected $medico; 
```

这是反面（因为它具有 mappedBy 属性）：

```
 /**
 * @ORM\OneToMany(targetEntity="Cita", mappedBy="medico")
 */
 protected $citas; 
```

为了让它更干净：

拥有方必须使用 OneToOne inversedBy、ManyToOne 或 ManyToMany 映射声明的属性。inversedBy 属性包含反面关联字段的名称。而对于反面：

双向关系的反面必须通过使用 OneToOne、OneToMany 或 ManyToMany 映射声明的 mappedBy 属性来引用其拥有方。mappedBy 属性指定实体中的字段即关系的所有者。

ManyToOne 始终是双向关联的拥有方。

OneToMany 始终是双向关联的反面。

getter 和 setter 这个生成器与学说： 生成：实体 当我保存医生的预约时，我分配：

```
$ cita-> setMedico ($medico); 
```

但是当我在医生中做循环时不起作用。这个空白：

```
$ citas = $ medico-> getCitas ();
         foreach ($ citas as $ cita) 
```

当我保存预约时，医生不需要更新医生的集合吗？谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T07:12:31.593

我认为这是因为您从刚刚保存实体的同一工作单元中读取实体。在代码中，您没有填写一对多关联的反面。Doctrine 只有在从存储中加载实体时才会这样做。

如果这是问题所在，您可以通过更改 setter 函数来解决它：

```
function setMedico($medico) {
     $this->medico = $medico;
     $medico->getCitas->add($this);
} 
```

当然你必须`Medico::getCitas()`定义方法

```
function getCitas() {
    return $this->citas;
} 
```

并且 Medico 构造函数必须启动该`$citas`属性：

```
function __construct() {
    $this->citas = new \Doctrine\Common\Collections\ArrayCollection();
} 
```

# android - 从 GET 参数设置 cookie 以唯一标识移动用户

> ID：13408266
> 
> 赞同：0
> 
> 时间：2012-11-15T23:49:38.023
> 
> 标签：android, iphone, ruby-on-rails, cookies

我需要在我的 Rails 应用程序上唯一标识移动设备，而无需用户注册。

他们将使用嵌入了默认 url 硬编码到应用程序中的移动应用程序。我正在考虑做

domain.com?uniqueid=[UniqueDeviceIdentifier usingLocalMethods]

并将其保存在会话 cookie 中，以便用户通过索引中的链接加载后续页面，我可以跟踪该唯一 ID。

有没有更好的方法来处理这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T00:25:19.870

我对你的应用一无所知，但我想到了几件事......

*   如果您可以将其作为 HTTP 标头发送，那将对用户隐藏它，假设它将启动他们手机的浏览器。

*   不要将它们发送到您网站的根目录。让他们说`domain.com/mobile-launcher?uniqueid=....`这样你就有了一个专门的地方来处理你的逻辑，并可以将它们重定向到主页。

# objective-c - NSFetchedResultsControllerDelegate 在 GCD 托管环境中难以理解的行为

> ID：13408269
> 
> 赞同：1
> 
> 时间：2012-11-15T23:49:59.500
> 
> 标签：objective-c, core-data, nsfetchedresultscontroller, iphonecoredatarecipes

我有`CoreData`和表相关`NSFetchedResultsController`的。控制器有上下文，它在主队列中创建并且只读。当然，`tableviewcontroller`实现`NSFetchedResultsControllerDelegate`协议。

看一下它实现的方法：

```
- (void)controller:(NSFetchedResultsController *)controller didChangeObject:(id)anObject atIndexPath:(NSIndexPath *)indexPath forChangeType:(NSFetchedResultsChangeType)type newIndexPath:(NSIndexPath *)newIndexPath {
    switch (type) {
        case NSFetchedResultsChangeInsert:
            NSLog(@"Inserted in %@", [NSString stringWithUTF8String:dispatch_queue_get_label(dispatch_get_current_queue())]);
            [_tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:newIndexPath] withRowAnimation:UITableViewRowAnimationFade];
            break;

        case NSFetchedResultsChangeDelete:
            [_tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
            break;

        case NSFetchedResultsChangeUpdate:
            NSLog(@"Updated in %@", [NSString stringWithUTF8String:dispatch_queue_get_label(dispatch_get_current_queue())]);
            [_tableView reloadRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
            break;

        case NSFetchedResultsChangeMove:
            [_tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
            [_tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:newIndexPath] withRowAnimation:UITableViewRowAnimationFade];
            break;
    }
} 
```

在后台，我在我的应用程序中下载数据并更新数据库。数据库的更新总是一样的。它以我的数据管理器的方法更新：

```
- (void)saveDataInBackgroundInForeignContext:(void (^)(NSManagedObjectContext *))saveBlock completion:(void (^)(void))completion {
    AppDelegate *delegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
    dispatch_async([delegate.dispatcher queueForDataSavingInModel:self.modelName], ^{
        [self saveDataInForeignContext:saveBlock];

        dispatch_sync(dispatch_get_main_queue(), ^{
            completion();
        });
    });
}

- (void)saveDataInForeignContext:(void (^)(NSManagedObjectContext *))saveBlock {
    NSPersistentStoreCoordinator *coordinator = [self persistentStoreCoordinator];
    if (coordinator != nil) {

        NSManagedObjectContext *localContext = [[NSManagedObjectContext alloc] init];
        [localContext setPersistentStoreCoordinator:coordinator];

        [localContext setMergePolicy:NSMergeByPropertyObjectTrumpMergePolicy];
        [self.managedObjectContext setMergePolicy:NSMergeByPropertyStoreTrumpMergePolicy];
        [[NSNotificationCenter defaultCenter] addObserver:self.managedObjectContext
                                                 selector:@selector(mergeChangesFromContextDidSaveNotification:)
                                                     name:NSManagedObjectContextDidSaveNotification
                                                   object:localContext];

        saveBlock(localContext);

        if (localContext.hasChanges) {

            [self updateLastUpdateDateInConformedUpdatedObjects:localContext];

            NSError *error = nil;
            BOOL success = [localContext save:&error];
            if (!success) {
                NSLog(@"Saving in foreign context failed. %@", error.userInfo);
            }
        }

        [localContext release];
    }
} 
```

在`saveBlock`我修改上下文中取决于来自服务器的数据。所以，结果我有奇怪的行为：

注意`NSLog`在`controller:didChangeObject:atIndexPath`第一个列表中的方法。让我们看看日志：

```
2012-11-16 02:59:33.376 [27824:5303] Inserted in ru.idecide.saving.calls // WTF WHY?!
2012-11-16 03:05:56.219 [27824:c07] Updated in com.apple.main-thread 
```

`ru.idecide.saving.calls - queue`的保存数据。

这并不重要，一切正常，但是`insertRowsAtIndexPaths`在调用插入和（显然）立即更新后，方法会在 2-3 秒内对 UI 产生影响。为什么会发生，我能做些什么来避免它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T06:19:18.800

问题在这里：

```
 [[NSNotificationCenter defaultCenter] addObserver:self.managedObjectContext
                                             selector:@selector(mergeChangesFromContextDidSaveNotification:)
                                                 name:NSManagedObjectContextDidSaveNotification
                                               object:localContext]; 
```

您将主线程上下文直接链接到后台队列上下文。当`localContext`在您的后台线程上运行时，发布通知时，通知将传递给`self.managedObjectContext`同一队列（后台队列）上的观察者（）。

您需要先将通知传输到主线程，然后再将其传递给`self.managedObjectContext`. 给自己一个新方法来接收后台队列上的通知并将其转发到主线程：

```
- (void)backgroundContextDidSave:(NSNotification *)note {
    dispatch_async(dispatch_get_main_queue(), ^{
        [self.managedObjectContext mergeChangesFromContextDidSaveNotification:note];
    });
} 
```

然后在注册通知时使用该方法选择器：

```
 [[NSNotificationCenter defaultCenter] addObserver:self.managedObjectContext
                                             selector:@selector(backgroundContextDidSave:)
                                                 name:NSManagedObjectContextDidSaveNotification
                                               object:localContext]; 
```

# android - Android 的 WifiManager RSSI ScanResult.level 在不同手机之间是否一致？

> ID：13408271
> 
> 赞同：3
> 
> 时间：2012-11-15T23:50:13.333
> 
> 标签：android, wifi

我正在开发一个 Android Wi-fi 指纹识别应用程序，该应用程序使用以 dBm 为单位的基站信号 RSSI 值（返回为 ScanResult.level）。

这些电平值在不同手机和芯片组之间是否一致？[ScanResult.level](http://developer.android.com/reference/android/net/wifi/ScanResult.html#level)上的 Android 文档说：“检测到的信号电平以 dBm 为单位。至少这些是 TI 驱动程序使用的单位。”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-12T20:19:26.113

使用我目前正在制作的应用程序，Wi-Fi RSSI 在不同手机上是一致的。但是，对于蓝牙 RSSI，它们完全不同。我的一部手机为 -75，另一部手机为 170。我认为需要进行一些认真的研究！

# jsp - 在 JSP 上使用 JSTL 变量

> ID：13408280
> 
> 赞同：0
> 
> 时间：2012-11-15T23:51:54.037
> 
> 标签：jsp, jstl

我如何使用 JSTL 变量如下：

```
 <c:set var="datetime" value="${fn:split(starttime,' ')}" />
         <c:set var="date" value="${fn:replace(datetime[0],':',',')}" /> 
```

稍后将用于以下内容：

```
 <c:if test="${param.cid!=null}">
         <%
              Calendar d = Calendar.getInstance();
              d.set(out.print(<c:out value="${date}"/>);
         %>
         </c:if> 
```

**编辑**：

我终于做了一些实验，发现了这样的东西：

```
 <% Calendar c = Calendar.getInstance();
            if(pageContext.getAttribute("date") != null)
            { 
               String datez = (String)pageContext.getAttribute("date"); 
               String dates[] = datez.split(","); 
               String date0 = dates[0]; 
               String date1 = dates[1]; 
               String date2 = dates[2]; 
               int int0 = Integer.parseInt(date0); 
               int int1 = Integer.parseInt(date1) - 1; 
               int int2 = Integer.parseInt(date2); 
               c.set(int0,int1,int2); 
             } 
          %> 
```

有更好的想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T01:20:27.170

您不能在 scriptlet 中使用表达式语言，因为它们应该只包含 Java 代码。顺便说一句，通常 scriptlet 是不好的做法，而[JSTL](http://docs.oracle.com/javaee/6/tutorial/doc/bnaqz.html)和[EL](http://docs.oracle.com/javaee/6/tutorial/doc/gjddd.html)旨在取代它们。

# php - 配置文件的 PhpMyAdmin 错误

> ID：13408281
> 
> 赞同：19
> 
> 时间：2012-11-15T23:52:14.270
> 
> 标签：php, phpmyadmin, server-configuration

错误是：

> phpMyAdmin 配置存储未完全配置，部分扩展功能已停用。要找出原因，请单击此处。
> 使用 Suhosin 运行的服务器。请参阅文档以了解可能的问题。
> 
> $cfg['Servers'][$i]['pmadb'] ... 好的
> 
> $cfg['Servers'][$i]['relation'] ... 不正常 [ 文档 ]
> 一般关系功能：已禁用
> 
> $cfg['Servers'][$i]['table_info'] ... 不正常 [ 文档 ]
> 显示功能：已禁用
> 
> $cfg['Servers'][$i]['table_coords'] ... 不行 [ 文档 ]
> 
> $cfg['Servers'][$i]['pdf_pages'] ... 不正常 [ 文档 ]
> 创建 PDF：已禁用
> 
> $cfg['Servers'][$i]['column_info'] ...不正常 [ 文档 ]
> 显示列注释：已禁用
> 浏览器转换：已禁用
> 
> $cfg['Servers'][$i]['bookmarktable'] ... 不正常 [文档]
> 已添加书签的 SQL 查询：已禁用
> 
> $cfg['Servers'][$i]['history'] ...不正常 [ 文档 ]
> SQL 历史记录：已禁用
> 
> $cfg['Servers'][$i]['designer_coords'] ... 不正常 [ 文档 ]
> Designer: Disabled
> 
> $cfg['Servers'][$i]['tracking'] ... 不正常 [ 文档 ]
> 跟踪：已禁用
> 
> $cfg['Servers'][$i]['userconfig'] ... 不正常 [ 文档 ]
> 用户首选项：禁用

我的 config.inc.php 文件如下：

```
/* vim: set expandtab sw=4 ts=4 sts=4: */
/**
 * phpMyAdmin sample configuration, you can use it as base for
 * manual configuration. For easier setup you can use setup/
 *
 * All directives are explained in Documentation.html and on phpMyAdmin
 * wiki <http://wiki.phpmyadmin.net>.
 *
 * @package phpMyAdmin
 */

/*
 * This is needed for cookie based authentication to encrypt password in
 * cookie
 */
$cfg['blowfish_secret'] = 'myblowfishpass';

/*
 * Servers configuration
 */
$i = 0;

/*
 * First server
 */
$i++;
/* Authentication type */
$cfg['Servers'][$i]['auth_type'] = 'cookie';
/* Server parameters */
$cfg['Servers'][$i]['host'] = 'localhost';
$cfg['Servers'][$i]['connect_type'] = 'tcp';
$cfg['Servers'][$i]['compress'] = false;
/* Select mysql if your server does not have mysqli */
$cfg['Servers'][$i]['extension'] = 'mysqli';
$cfg['Servers'][$i]['AllowNoPassword'] = false;

/*
 * phpMyAdmin configuration storage settings.
 */

/* User used to manipulate with storage */
 $cfg['Servers'][$i]['controluser'] = 'dave1';
 $cfg['Servers'][$i]['controlpass'] = 'mypassword';

/* Storage database and tables */
 $cfg['Servers'][$i]['pmadb'] = 'wordpress_db'; //the name of my db table
 $cfg['Servers'][$i]['bookmarktable'] = 'pma_bookmark'; //does the pma_ need to change to dave1_?
 $cfg['Servers'][$i]['relation'] = 'pma_relation';
 $cfg['Servers'][$i]['table_info'] = 'pma_table_info';
 $cfg['Servers'][$i]['table_coords'] = 'pma_table_coords';
 $cfg['Servers'][$i]['pdf_pages'] = 'pma_pdf_pages';
 $cfg['Servers'][$i]['column_info'] = 'pma_column_info';
 $cfg['Servers'][$i]['history'] = 'pma_history';
 $cfg['Servers'][$i]['tracking'] = 'pma_tracking';
 $cfg['Servers'][$i]['designer_coords'] = 'pma_designer_coords';
 $cfg['Servers'][$i]['userconfig'] = 'pma_userconfig';
/* Contrib / Swekey authentication */
 $cfg['Servers'][$i]['auth_swekey_config'] = '/etc/swekey-pma.conf';

/*
 * End of servers configuration
 */

/*
 * Directories for saving/loading files from server
 */
$cfg['UploadDir'] = '';
$cfg['SaveDir'] = '';

/**
 * Defines whether a user should be displayed a "show all (records)"
 * button in browse mode or not.
 * default = false
 */
  $cfg['ShowAll'] = true;

/**
 * Number of rows displayed when browsing a result set. If the result
 * set contains more rows, "Previous" and "Next".
 * default = 30
 */
  $cfg['MaxRows'] = 50;

/**
 * Use graphically less intense menu tabs
 * default = false
 */
//$cfg['LightTabs'] = true;

/**
 * disallow editing of binary fields
 * valid values are:
 *   false  allow editing
 *   'blob' allow editing except for BLOB fields
 *   'all'  disallow editing
 * default = blob
 */
//$cfg['ProtectBinary'] = 'false';

/**
 * Default language to use, if not browser-defined or user-defined
 * (you find all languages in the locale folder)
 * uncomment the desired line:
 * default = 'en'
 */
  $cfg['DefaultLang'] = 'en';
//$cfg['DefaultLang'] = 'de';

/**
 * default display direction (horizontal|vertical|horizontalflipped)
 */
//$cfg['DefaultDisplay'] = 'vertical';

/**
 * How many columns should be used for table display of a database?
 * (a value larger than 1 results in some information being hidden)
 * default = 1
 */
//$cfg['PropertiesNumColumns'] = 2;

/**
 * Set to true if you want DB-based query history.If false, this utilizes
 * JS-routines to display query history (lost by window close)
 *
 * This requires configuration storage enabled, see above.
 * default = false
 */
//$cfg['QueryHistoryDB'] = true;

/**
 * When using DB-based query history, how many entries should be kept?
 *
 * default = 25
 */
//$cfg['QueryHistoryMax'] = 100;

/*
 * You can find more configuration options in Documentation.html
 * or here: http://wiki.phpmyadmin.net/pma/Config
 */ 
```

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2013-02-17T18:08:42.270

我也有同样的问题。清除 cookie 和缓存对我有用。试试看

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-05-11T17:25:08.907

如果您使用“create_tables.sql”创建数据库和表，请将表名更改`pma__`为`pma_`. （将 2 个下划线更改为 1 个下划线）

或将“config.inc.php”中的表名更改`pma_`为`pma__`（将 1 个下划线更改为 2 个下划线）。
例如，`pma_bookmark`要`pma__bookmark`

```
$cfg['Servers'][$i]['pmadb'] = 'phpmyadmin';
$cfg['Servers'][$i]['bookmarktable'] = 'pma__bookmark';
$cfg['Servers'][$i]['relation'] = 'pma__relation';
$cfg['Servers'][$i]['table_info'] = 'pma__table_info';
$cfg['Servers'][$i]['table_coords'] = 'pma__table_coords';
$cfg['Servers'][$i]['pdf_pages'] = 'pma__pdf_pages';
$cfg['Servers'][$i]['column_info'] = 'pma__column_info';
$cfg['Servers'][$i]['history'] = 'pma__history';
$cfg['Servers'][$i]['tracking'] = 'pma__tracking';
$cfg['Servers'][$i]['designer_coords'] = 'pma__designer_coords';
$cfg['Servers'][$i]['userconfig'] = 'pma__userconfig';
$cfg['Servers'][$i]['recent'] = 'pma__recent';
$cfg['Servers'][$i]['table_uiprefs'] = 'pma__table_uiprefs'; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-01-23T20:50:28.287

VestaCP 团队为 phpMyAdmin 制作并成功测试了错误修复程序（不再出现烦人的消息“phpMyAdmin 配置存储未完全配置，一些扩展功能已停用”）。我们希望该修复将是有用的，并将帮助用户。

Github 页面：[https ://github.com/skurudo/phpmyadmin-fixer](https://github.com/skurudo/phpmyadmin-fixer)

脚本的作用：

*   从用户根工作；
*   /etc/phpmyadmin/config.inc.php 内部的变化，修正值；
*   在 /root 文件夹中备份 /etc/phpmyadmin/config.inc.php；添加一个mysql pma用户/和表phpmyadmin（如果用户“pma”或表“phpmyadmin”已经存在，脚本将删除它们！）；
*   下载并添加数据库 phpmyadmin 的表；
*   清理临时文件、剩余的 pma.txt（包含 pma@localhost 的密码）和旧配置；

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-16T03:51:10.657

```
$cfg['Servers'][$i]['user'] = 'root'; //mysql username here
$cfg['Servers'][$i]['password'] = 'password'; //mysql password here 
```

尝试在之后添加上述配置行`$cfg['Servers'][$i]['connect_type'] = 'tcp';`

如果这些也不起作用，请尝试使用新的配置文件，可能是通过复制*config.sample.inc.php*。请确保它具有上述配置行。检查它是否工作正常，然后开始逐步对其进行更改，如果要进行任何更改..

请注意，您提供的用户名和密码应该能够从 mysql 命令提示符登录您。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-08-04T02:56:10.930

请按照以下步骤操作：

1.  创建一个名为 phpmyadmin 的数据库 导入数据库 sql/create_tables.sql
2.  创建一个用户并授予用户对该数据库的访问权限（GRANT ALL PRIVILEGES ON phpmyadmin.* TO user@'localhost' IDENTIFIED BY 'password';）
3.  找到并编辑您的配置文件，在 config.inc.php 中启用这些行（删除每行前面的 #）

    ```
    /* User used to manipulate with storage */
     $cfg['Servers'][$i]['controlhost'] = 'localhost';
     $cfg['Servers'][$i]['controluser'] = 'phpmyadmin_pma';
     $cfg['Servers'][$i]['controlpass'] = 'yourpassword';

    /* Storage database and tables */
     $cfg['Servers'][$i]['pmadb'] = 'phpmyadmin';
     $cfg['Servers'][$i]['bookmarktable'] = 'pma__bookmark';
     $cfg['Servers'][$i]['relation'] = 'pma__relation';
     $cfg['Servers'][$i]['table_info'] = 'pma__table_info';
     $cfg['Servers'][$i]['table_coords'] = 'pma__table_coords';
     $cfg['Servers'][$i]['pdf_pages'] = 'pma__pdf_pages';
     $cfg['Servers'][$i]['column_info'] = 'pma__column_info';
     $cfg['Servers'][$i]['history'] = 'pma__history';
     $cfg['Servers'][$i]['table_uiprefs'] = 'pma__table_uiprefs';
     $cfg['Servers'][$i]['tracking'] = 'pma__tracking';
     $cfg['Servers'][$i]['designer_coords'] = 'pma__designer_coords';
     $cfg['Servers'][$i]['userconfig'] = 'pma__userconfig';
     $cfg['Servers'][$i]['recent'] = 'pma__recent';

     /* These lines I added-in because they are not exist in the config_sample.inc.php */
     $cfg['Servers'][$i]['favorite'] = 'pma__favorite';
     $cfg['Servers'][$i]['users'] = 'pma__users';
     $cfg['Servers'][$i]['usergroups'] = 'pma__usergroups';
     $cfg['Servers'][$i]['navigationhiding'] = 'pma__navigationhiding';
     $cfg['Servers'][$i]['savedsearches'] = 'pma__savedsearches';
     $cfg['Servers'][$i]['central_columns'] = 'pma__central_columns';
     $cfg['Servers'][$i]['designer_settings'] = 'pma__designer_settings';
     $cfg['Servers'][$i]['export_templates']  = 'pma__export_templates'; 
    ```

请注意 pma__ 之间有两个下划线，您需要确保它与数据库中的表名匹配

如果您看到此错误： $cfg['Servers'][$i]['userconfig'] ... 不正常 [ 文档 ] 用户首选项：已禁用

这意味着您的配置设置与表的名称不匹配，或者......您的用户无权访问数据库。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-01-28T06:19:12.110

如果您向下滚动到底部，则在错误页面中。有一个提示告诉您注销并重新登录。这样做会奏效

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-10-29T10:43:37.793

要更正错误，请单击消息，然后在顶部您可以创建链接，单击创建并刷新。这个解决方案对我有用。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-05-17T23:04:33.663

1）检查您的mysql服务器中是否有phpmyadmin数据库。Phpmyadmin 帮助您创建它的数据库。

2）检查您是否有 pma 用户。如果不创建它：

```
CREATE USER  'pma'@'localhost' IDENTIFIED BY 'yourPassword'; 
```

pma 密码必须与 config.inc.php 中给出的密码相同

3) 赋予 pma 特权：

```
GRANT ALL PRIVILEGES ON phpmyadmin.* TO `pma`@`localhost` WITH GRANT OPTION;
FLUSH PRIVILEGES; 
```

4) 清除缓存和cookies。

# python - 在一个字符之后获取所有内容，即使有重复。Python

> ID：13408283
> 
> 赞同：2
> 
> 时间：2012-11-15T23:52:20.613
> 
> 标签：python, parsing, irc

我正在编写一个 IRC 机器人，并且正在使用一大堆拆分来解析消息。IRC“消息”的格式是：

```
:username!765a4aa2@gateway/web/freenode/ip.***.***.***.*** PRIVMSG #Channel :Message body 
```

特别是得到消息文本的那个：

```
message = data.split(':')[2] 
```

这是最后一个 ':' 之后的所有内容，但是当用户通过 IRC 发送链接时，消息将如下所示：

```
:username!765a4aa2@gateway/web/freenode/ip.***.***.***.*** PRIVMSG #Channel :http://web address.com/ 
```

并且代码只会获取消息的“http”部分，因为其余部分现在位于拆分的第三部分。

那么如何解析包含链接的消息呢？

一种方法是获取第一部分的长度，然后将其删除：

```
message = data[len(data.split(':')[1])+1:] 
```

但我不禁觉得一定有更好的方法。有吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T23:55:26.230

`str.split()`接受一个可选参数`maxsplit`。

```
message = data.split(':', 2) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T23:55:19.757

设置`:`您要拆分的数量：

```
data.split(':', 2) 
```

你将拥有：

```
['',
'username!765a4aa2@gateway/web/freenode/ip.***.***.***.*** PRIVMSG #Channel ',
'http://web address.com/'] 
```

# php - 如何从 Android 访问 json 子对象到 PHP？

> ID：13408289
> 
> 赞同：1
> 
> 时间：2012-11-15T23:53:02.663
> 
> 标签：php, android, json

我在Android中有这个结构：

```
HttpPost post = new HttpPost(url);

        mjson.put("receiveOrderId", receiveOrderId);
        mjson.put("packageId", packageId);
        mjson.put("partNumber", partNumber);
        mjson.put("qty", qty);
        mjson.put("serial", serial);
        mjson.put("locationId", locationId);

        json.put("version", "6");
        json.put("token", token);
        json.put("data", mjson);

        post.setHeader("json", json.toString());
        StringEntity se = new StringEntity(json.toString());
        se.setContentEncoding(new BasicHeader(HTTP.CONTENT_TYPE,
                "application/json"));
        post.setEntity(se);
        response = client.execute(post); 
```

而且我需要在php中解码，如何访问“partNumber”或“qty”的值？

尝试这种方式，但它不起作用：

```
$data = file_get_contents('php://input');
$json = json_decode($data);
$version = $json->{'version'};
$token = $json->{'token'};
$receiveOrderId = $json->{'receiveOrderId'};
$packageId = $json->{'packageId'};
$partNumber = $json->{'partNumber'};
$qty = $json->{'qty'};
$serial = $json->{'serial'};
$locationId = $json->{'locationId'}; 
```

**抱歉我的英语不好，我来自墨西哥。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T00:32:18.850

你能打印你的 $json 吗？

```
var_dump($json); 
```

它必须看起来像：

```
'{"qty": 123, "version": "xxxxx"}'; 
```

确保索引名称（数量、版本、...）用双引号括起来，而不是单引号

# facebook - Facebook Graph API 消息 - 字数或字符数限制

> ID：13408293
> 
> 赞同：1
> 
> 时间：2012-11-15T23:53:08.817
> 
> 标签：facebook, facebook-graph-api, message

我使用 PHP、json 和 API Cache 成功地在网站上显示了 Facebook Feed 消息。但是，有些消息太长，无法放入网站上提供的空间。

有谁知道是否有办法限制消息将显示的单词或字符的数量？

最好的方案是让消息在低于限制时完全显示，然后显示一定数量的单词或字符 i 后跟 [...] 阅读全文@pagename

然后我可以将链接添加到 Facebook 帖子以查看完整消息。我知道如何添加帖子链接和文本，只需要缩小消息的大小。

这是我正在使用的 PHP 代码：

```
<?php $fb_message = $fb_json->data[0]->message; ?>
<?php echo $fb_message; ?> 
```

任何帮助将不胜感激。

谢谢，史蒂夫

* * *

感谢 James Pearce，我能够使用以下代码使其工作：

```
<?php $fb_message = $fb_json->data[0]->message; $truncated = substr($fb_message, 0, strrpos(substr($fb_message, 0, 100), ' ')); echo $truncated . '...'; ?> 
```

如果消息超过 100 个字符，它会起作用，但如果它少于 100 个字符，它只会显示第一个单词而不会显示更多......？

有人知道我在做什么错吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-04T18:24:19.690

这是我用来检查 Facebook“消息”字段有多长的代码，然后截断它，如果它超过 100 个字符，或者如果它足够短则显示整个内容：

```
$post->message = $fbdata->data[0]->message; 
$messageLength = strlen($post->message);
if ($messageLength < 100) {
     $outputMessage = $post->message; 
} else {
     $outputMessage = substr($post->message, 0, strrpos(substr($post->message, 0, 100), ' ')) . ' ...'; 
}
echo $outputMessage; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T00:34:46.697

无法让 Facebook API 为您截断字符串。但是，在 PHP 中有很多方法可以做到这一点。

一种简单的方法是使用该`wordwrap`函数 ( [http://www.php.net/wordwrap](http://www.php.net/wordwrap) ) 并在第一个换行符之前获取所有内容。

另请参阅[如何将 PHP 中的字符串截断为最接近特定字符数的单词？](https://stackoverflow.com/questions/79960/how-to-truncate-a-string-in-php-to-the-word-closest-to-a-certain-number-of-chara)

这似乎工作正常：

```
<?php 
    $fb_message = $fb_json->data[0]->message;
    echo array_shift(explode("\n", wordwrap($fb_message, 100)));
?> 
```

# mongodb - 在 MongoDB 中创建数据库并从文件中插入数据

> ID：13408295
> 
> 赞同：3
> 
> 时间：2012-11-15T23:53:17.863
> 
> 标签：mongodb, mongodb-query, mongodb-php, database

我刚刚在我的系统上配置了 Mongo Db。在 Mongo DB 中有什么区别`collection and Database`，我做了 db.help() 来查看不同的功能。但我找不到任何函数来添加创建数据库、创建表或列等我有一个我想在 Mongo DB 中加载的 csv 文件。请帮忙谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T00:59:51.917

在 MongoDB 中，您不必专门创建数据库或集合。如果它不可用，只需调用一个即可创建它。您也不会像在 SQL 中那样创建列，字段是动态的，并且您的文档中可以有许多不同的字段。至于导入csv，看[这里](https://stackoverflow.com/questions/4686500/how-to-use-mongoimport-to-import-csv)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-05T01:35:27.980

我想你知道 SQL 和 NOSQL 之间的基本区别。

如果您还是新手，请查看此链接。 [这里！](http://www.sitepoint.com/sql-vs-nosql-differences/)

* * *

并回答您的问题：

> 问题1：集合和数据库有什么区别？mongoDB 中的集合相当于 Sql 世界中的表。

在 SQL(MYSQL,....) 中：数据库 --> 表 -- 行和列。

在 NOSQL(MongoDB,....) 中：数据库 ---> 集合 ----> 文档（大多数情况下为 JSON）。

> 问题2：如何创建数据库和集合以及插入数据。

与 SQL 数据库不同，您必须在将数据插入每一行、每一列之前预先定义一个模式。Mongodb 有一个灵活的模式，其中它对于 mongodb 的概念是必不可少的。

### 创建新数据库

使用数据库名称

例如：使用 foo

### db.databaseName.CollectionName.insert({"":""})

将会发生的是 use 语句将搜索具有该名称的数据库，如果找不到，它将在其上创建。然后你将不得不插入你的新收藏和你的好去处！

> 问题 3：如何将 cvs 加载到 mongodb。

在此处检查此链接[！](https://docs.compose.io/importing-exporting/from-csv.html)

> 快速提示：查看[此处的链接！](https://docs.mongodb.org/manual/reference/sql-comparison/). 如果您来自 SQL 世界并且想要一种在 mongodb 中查询的快速方法，它会提供有价值的信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-13T07:53:47.733

mongoDb 中的集合与关系 sql 数据库中的表相同。要在 mongoDB 中创建数据库，只需键入`use exampleDB`. 当您在集合中插入文档时，您也可以即时创建集合。MongoDB 文档很好地解释了这一点，我建议在这里查看它们[mongoDB CRUD Operations](https://docs.mongodb.com/manual/crud/#create-operations)

# ruby - 如何将字符串与 Ruby 中的命令提示符输入进行比较

> ID：13408301
> 
> 赞同：2
> 
> 时间：2012-11-15T23:53:40.477
> 
> 标签：ruby, string, comparison, command-prompt

两天前我才开始研究 Ruby 语言，并很快了解到我过于拘泥于 C 派生语言的思维方式......我正在尝试对字符串进行比较：

```
def menu_listen
    action = gets
    while !(action.eql?("up")) && !(action.eql?("down")) && !(action.eql?("close")) do
        puts "'#{action}' is not a valid command at this time."
        action = gets
    end
    return action
end 
```

...之前是这样写的：

```
def main_listen
    action = gets
    while action != "up" && action != "down" && action != "close" do
        puts "'#{action}' is not a valid command at this time."
        action = gets
    end
    return action
end 
```

我在这个网站上读到 thisString.eql?(thatString) 与 thisString == thatString 相同，因为两者都不起作用。我在命令提示符中输入的任何输入都不会通过 while 循环并给我这个作为响应：

```
'down
' is not a valid command at this time. 
```

那么这是否意味着按下回车键也存储为命令提示符输入的新行？谁能告诉我如何实现这一点，以便字符串比较正常工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T00:04:31.887

`gets`也接受 eol 字符，所以使用`gets.chomp`只接受实际的字符串。该[`chomp`](http://www.ruby-doc.org/core-1.9.3/String.html#method-i-chomp)方法删除您的回车以及换行符。

就字符串比较而言，它更像是比较您的输入是否存在于预定义字符串数组中，而不是链接`&&`and `eql?`，例如：

```
while not %w(up down close).include? action do 
```

这比链接更干净，也更容易修改。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T00:17:26.260

```
def menu_listen
  until r = (['up', 'down', 'close'] & [t = gets.strip]).first 
    puts "#{t} is not a valid command"
  end
  r
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T00:17:11.670

您所需要的只是一个[String#chomp](http://www.ruby-doc.org/core-1.9.3/String.html#method-i-chomp)方法，该方法从字符串末尾删除分隔符。

```
 def menu_listen
      while 1 do
        action = gets.chomp
        return action if %w(down up close).include? action.downcase
        puts "#{action}' is not a valid command at this time."
      end
    end 
```

# templates - Kendo - Grid - FooterTemplate 中的自定义聚合

> ID：13408302
> 
> 赞同：0
> 
> 时间：2012-11-15T23:53:42.380
> 
> 标签：templates, grid, kendo-ui, aggregates

我的理解是 Kendo 不支持自定义聚合，但您可以在 footerTemplate 中调用函数。然后，该函数可以提供数据计算，甚至可以引用剑道定义的聚合。所以，例如，

```
footerTemplate: "<div><b>Range</b> #= computeRange()#</div>" 
```

如果这是正确的，您将如何编写函数computeRange？它将使用最大最小聚合。

另外，您将如何编写 computeMedian 函数？

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-11T04:01:08.710

```
function computeRange(){
    var bal         =   0;
    var ds          =   $("#itemcode_grid").data("kendoGrid").dataSource;
    var aggregates  =   ds.aggregates();
    if(aggregates.total_balance)
        bal         =   aggregates.total_balance.sum;
    else
        bal         =   0;
    return kendo.toString(bal,'n2');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-13T10:19:28.413

我已经实现了一个解决方案，可以帮助您使用 groupFooterTemplate 使用自定义聚合函数。

链接[在这里](http://christfriedbalizou.github.io/kendo-grid-custom-aggregate-function-hack/)

```
function myAggregate(data){
  // Data here is a list of data by group (brilliant right! :-) )
  // Do anything here and return result string
}

var grid = $('#grid').kendoGrid({
  ...
  columns: [
    { field: '', title: '', groupFooterTemplate: myAggregate
  ]
  ...
});
```

```
<!DOCTYPE html>
<html>
  <head>
    <!-- YOUR CSS HERE -->
  </head>
  <body>
    ...
    <div id="#grid"></div>
    ...
    <script><!-- jQuery here --></script>
    <script><!-- kendo.all.min.js here --></script>
    <script src="kendo.aggregate.helper.js"></script>
  </body>
</html>
```

[http://christfriedbalizou.github.io/kendo-grid-custom-aggregate-function-hack/](http://christfriedbalizou.github.io/kendo-grid-custom-aggregate-function-hack/)

# javascript - JavaScript：如何以适用于 node.js 和浏览器的方式包含文件？

> ID：13408303
> 
> 赞同：0
> 
> 时间：2012-11-15T23:53:42.187
> 
> 标签：javascript, node.js, import

我正在编写一个可以在浏览器和 node.js 上使用的文件。要使用库，我可以`_ = require('underscore.js'); main();`在节点和`$.getScript('underscore.js',function(){ main(); });`浏览器上使用它来导入它。包含适用于两种环境的文件的正确方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T00:14:48.603

您可以使用 AMD 兼容的模块加载器，例如 RequireJS。

[http://requirejs.org/](http://requirejs.org/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T00:14:40.887

尝试[对象检测](http://www.quirksmode.org/js/support.html)：

```
if($ && $.getScript){
    $.getScript('underscore.js',function(){ main(); });
}else if(require){
    _ = require('underscore.js');
}else{
    /* output: Could not load library 'underscore.js'. */
} 
```

这样做的危险是`require`可以定义但意味着其他东西。

# ruby - 用 ruby 和 rake 解释 Jenkins 失败

> ID：13408304
> 
> 赞同：0
> 
> 时间：2012-11-15T23:53:44.843
> 
> 标签：ruby, jenkins, rake

我只是想证明詹金斯在我的本地机器上工作的概念。我只想看到 Jenkins 在 rakefile 中执行任务。这是我得到的错误。

```
Started by user anonymous
Building in workspace C:\Program Files\Jenkins\jobs\thursday test\workspace
[workspace] $ C:\Ruby193\bin\rake.bat --rakefile C:\Users\zreichert\workspace\FalconQA\testCases\rakefile.rb FAL001
'"ruby.exe"' is not recognized as an internal or external command,
operable program or batch file.
Build step 'Invoke Rake' marked build as failure 
```

我有 ruby​​ 1.93、jenkins 1.485、ruby 插件 1.2、rake 插件 1.7.7

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T05:29:41.160

红宝石在你的道路上吗？我对 Windows 上的 Jenkins 不太熟悉，但在 Linux 中，如果你的环境没有为默认用户设置，比如 jenkins，那么事情就会爆炸。

# visual-studio-2010 - 在 exe 中包含文本文件作为本地资源

> ID：13408306
> 
> 赞同：4
> 
> 时间：2012-11-15T23:53:59.663
> 
> 标签：visual-studio-2010, visual-c++, mfc

我有一个文本文件，我想将它包含在一个独立的可执行文件中。该文件本身位于另一个目录的源代码控制中，我想我想在编译时将文本文件添加到可执行文件中。

我一直在阅读一些有关资源的信息，但我不确定添加文件的最佳方法是什么。我也不知道在执行期间如何引用和读取文件。

该项目是静态链接的MFC，我使用的是vs2010。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T05:29:25.443

只需将文件作为资源添加到您的应用程序中。您可以使用类似于以下的代码“阅读”它：

```
/* the ID is whatever ID you choose to give the resource. The "type" is
 * also something you choose. It will most likely be something like "TEXTFILE"
 * or somesuch. But anything works.
 */
HRSRC hRes = FindResource(NULL, <ID of your resource>, _T("<type>")); 
HGLOBAL hGlobal = NULL;
DWORD dwTextSize = 0;

if(hRes != NULL)
{
    /* Load the resource */
    hGlobal = LoadResource(NULL, hRes);

    /* Get the size of the resource in bytes (i.e. the size of the text file) */
    dwTextSize = SizeofResource(NULL, hRes);
}

if(hGlobal != NULL)
{ 
    /* I use const char* since I assume that your text file is saved as ASCII. If
     * it is saved as UNICODE adjust to use const WCHAR* instead but remember 
     * that dwTextSize is the size of the memory buffer _in bytes_).
     */
    const char *lpszText = (const char *)LockResource(hGlobal);

    /* at this point, lpszText points to a block of memory from which you can
     * read dwTextSize bytes of data. You *CANNOT* modify this memory.
     */
    ... whatever ...
} 
```

# php - 用 php 和 jquery 实现一个喜欢/不喜欢的计数器

> ID：13408308
> 
> 赞同：0
> 
> 时间：2012-11-15T23:54:21.467
> 
> 标签：php, javascript, jquery

我有一个漫画网站，我想跟踪有多少人点击喜欢和不喜欢单个漫画 ID...我想将值存储在我的数据库中，并将其报告回浏览器。

这是我的非工作解决方案：

**viewcomic.php：**

```
 <script type="text/javascript">
    function likeCounter(choice) {    
       var site = $("#site").val();
       var imgid = $("#imgid").val();
       $.get("./scripts/likecounter.php", {_choice : choice, _site : site, _id : imgid},
            function(returned_data) {
                $("#choice").html(returned_data);
            }
        );
}
</script>
       //Changed to try and work with buttons
   <button id="like" onClick="likeCounter(this.id)">Like</button>
   <button id="dislike" onClick="likeCounter(this.id)">Dislike</button>
   <input id="site" type="hidden" value="<?php echo $site; ?>">
   <input id="imgid" type="hidden" value="<?php echo $imgid; ?>">

<br />
Likes: <span id="choice"></span> 
```

**像counter.php**

```
<?php 
include 'dbconnect.php';

$site = $_GET['_site'];
$imgid = $_GET['_id'];
$input = $_GET['_choice'];

if ($site == "artwork") {
   $table = "comics";
}
else {
   $table = "artwork";
}

$likes = $mysqli->query("SELECT like FROM $table WHERE id = $imgid");
$dislikes = $mysqli->query("SELECT dislike FROM $table WHERE id = $imgid");

if ($input == "like") {
   $sql = "UPDATE $table SET like = like + 1 WHERE id = $imgid";
   $mysqli->query($sql);
   $likes++;

else if ($input == "dislike") {
   $sql = "UPDATE $table SET like = dislike + 1 WHERE id = $imgid";
   $mysqli->query($sql);
   $dislikes++;
}   
mysqli_close($mysqli);

echo "Likes: " . $likes . ", Dislikes: " . $dislikes;

?> 
```

它不会增加数据库值，也不会向浏览器报告值。有什么建议么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T00:00:25.520

我认为

```
$site = $_GET['site'];` 
```

应该

```
$site = $_GET['_site'];` 
```

你也没有发送`id`-`$imgid = $_GET['id'];`

请查看 PDO 或 MySQLi，因为您的代码不安全（查看 SQL 注入）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T00:32:21.920

我相信您需要将列名“like”更改为其他名称，因为该词在 SQL 中是保留的，这里是[保留词列表](http://developer.mimer.se/validator/sql-reserved-words.tml)

只需将其更改为“喜欢”或类似的东西。

另一件小事是您可以在单个查询中获取这两个值

```
Select likes,dislikes from $table where id = $ImgID 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T00:38:24.613

技术问题是这一行：

```
$.get("./scripts/likecounter.php", {_choice : choice, _site : site, _id : id}... 
```

由于 site 和 id 未定义，您将收到 javascript 错误`ReferenceError: site is not defined`

尝试：

```
$.get("./scripts/likecounter.php", {_choice : choice, _site : "<?php echo $site; ?>", _id : "<?php echo $imgid; ?>"}... 
```

您不需要隐藏的输入，也`onClick`应该是`onclick`.

其他快速建议：

确保 $imgid 实际上是一个整数：

```
$imgid = intval($_GET['_id']);
if($imgid == 0) exit('Invalid id'); 
```

以下不需要分开：

```
$likes = $mysqli->query("SELECT like FROM $table WHERE id = $imgid");
$dislikes = $mysqli->query("SELECT dislike FROM $table WHERE id = $imgid");

$result = $mysqli->query("SELECT like_count, dislike_count FROM $table WHERE id = $imgid"); 
```

`$mysqli->query`只会返回一个 mysqli_result，这意味着你不能只是回显它，你必须做一个 fetch，因为你知道你只得到一个结果，你可以使用`list($likes, $dislikes) = $result->fetch_array(MYSQLI_NUM);`

阅读[文档](http://php.net/manual/en/mysqli-result.fetch-array.php)以帮助您了解我到底在做什么。

正如您所提到的，人们可以随心所欲地点击喜欢/不喜欢，您需要使用某种 IP 日志来限制这一点。例如使用以下字段设置一个新的数据库表；ip，表，imgid。然后当有人“喜欢”时记录他们的 IP：

```
$sql = "INSERT INTO xxx (ip, table_name, imgid) VALUES(\"".$_SERVER['REMOTE_ADDR']."\", \"$table\", $imgid)";
$mysqli->query($sql); 
```

然后在添加新的喜欢之前检查他们是否有记录：

```
$sql = "SELECT ip FROM xxx WHERE ip = \"".$_SERVER['REMOTE_ADDR']."\" AND table_name = "$table" AND imgid = $imgid";
$result = $mysqli->query($sql);
if($result->num_rows == 0) { ...if($input ==... } 
```

# c# - 每个模型都需要 MVC 数据库表吗？

> ID：13408310
> 
> 赞同：1
> 
> 时间：2012-11-15T23:54:28.960
> 
> 标签：c#, asp.net-mvc, ef-code-first

我是 MVC 的新手，我只是想建立一个简单的网站。我首先使用 EF 代码。我的问题是 MVC 总是为我不想要永久存储的模型寻找数据库表，（当我使用它时，我只会初始化它的一个对象）这是我的代码：

```
public class Family
{
    public int FamilyId { get; set; }
    public String FamilyName { get; set; }
    public String FamilyJoinString { get; set; }
    public String MemberIds { get; set; }
    public virtual List<FamilyMember> Members { get; set; }

    public List<FamilyMember> GetFamilyMembers()
    {
        var db = new HomeTrackerDb();
        var CommonHelper = new CommonHelper();
        var members = new List<FamilyMember>();
        var memberids = MemberIds;
        var ids = CommonHelper.SplitToList(memberids, ",");
        foreach (var id in ids)
        {
            var user = db.UserInfoes.Find(int.Parse(id));
            var member = new FamilyMember();
            member.FamilyMemberId = user.UserInfoId;
            member.FamilyMemberName = user.UserName;
            member.FamilyMemberLoad = 0;
            members.Add(member);
        }
        db.Dispose();
        return members;
    }

}

    //FamilyMember Class
    public class FamilyMember
    {
        public int FamilyMemberId { get; set; }
        public String FamilyMemberName { get; set; }
        public int FamilyMemberLoad { get; set; }
    }
} 
```

我只在控制器中生成 FamilyMember 列表，没有数据库更新、插入和查找操作。控制器：

```
 public ActionResult Edit(int id)
    {
        Family family = db.Families.Find(id);
        family.Members = family.GetFamilyMembers();                       
        return View(family);
    } 
```

但是 MVC 总是说找不到数据库表 FamilyMembers。

请帮忙！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T01:28:35.757

看起来 Family 是您数据库中的一个表，而 Family 类是一个映射到您的 Family 表的实体。

由于您拥有`List<FamilyMember> Members`Family 类的属性，因此 EF 正在尝试将该属性映射到相关表。

为了向 EF 发出信号以不映射该属性，请添加`[NotMapped]`属性：

```
[NotMapped]
public virtual List<FamilyMember> Members { get; set; } 
```

这是假设您没有使用 Fluent API。如果您使用的是 Fluent，那么您可以像这样指定它：

```
protected override void OnModelCreating(DbModelBuilder modelBuilder)
{
    modelBuilder.Entity<Family>().Ignore(t => t.Members);
    base.OnModelCreating(modelBuilder);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T01:34:11.657

您指定`public virtual List<FamilyMember> Members { get; set; }`自动转换为表映射，例如[相似映射](http://blogs.msdn.com/b/jasonz/archive/2012/07/23/my-favorite-features-entity-framework-code-first-and-asp-net-web-api.aspx)。

如果您不想在示例中映射属性，可以将其更改为可见性`internal`，但我建议根本不要使用这样的解决方案，对我来说更好的方法是：

```
public class Family
{
    [Key]
    public int FamilyId { get; set; }
    public String FamilyName { get; set; }
    public String FamilyJoinString { get; set; }

    public IList<UserInfoes> Members { get; set; }
}

public class Family
{
    [Key]
    public int UserInfoId { get; set; }
    public Family Family { get; set; }
    public string UserName { get; set; }
} 
```

# jquery - 更改 jquery 手风琴菜单以删除未选择的类别

> ID：13408311
> 
> 赞同：1
> 
> 时间：2012-11-15T23:54:29.823
> 
> 标签：jquery, onclick, accordion

该脚本目前在侧手风琴菜单上提供。当按下 img 时，它会删除并添加手风琴上的类别类，使该类别的链接消失。

是否有任何方法可以将其应用于手风琴中的每个 div，而不仅仅是被按下的那个？谢谢。

```
(function(){
  jQuery('a.navToggle').bind('click',function(){
  var id = jQuery(this).attr('id'); 
  if(jQuery(this).find('img').attr('src').indexOf('minus') != -1){
  jQuery('div[id*=subnav-'+id+']').removeClass('expanded').addClass('collapsed');
  jQuery(this).find('img').attr('src','lnav-plus.png');

 } else {
   //jQuery('div[id*=subnav-]').removeClass('expanded').addClass('collapsed');
   jQuery('div[id*=subnav-'+id+']').removeClass('collapsed').addClass('expanded');
   jQuery(this).find('img').attr('src','lnav-minus.png');
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T00:42:46.083

不要使用`jQuery(this).find('img')`or`jQuery(this).attr('id')`来查找被点击的项目，而是使用 jQuery 选择器在您的手风琴中查找特定类型的所有对象。

例如：`jQuery('#accordion img')`将选择手风琴内的每个图像标签。

作为旁注，建议使用类选择器来查找这样的项目！

如果您发布其余代码，我也许可以提供更多见解。

# mysql - MySQL 查询 WHERE x 和如果设置 y

> ID：13408314
> 
> 赞同：1
> 
> 时间：2012-11-15T23:54:44.617
> 
> 标签：mysql

我一直在做一个工作项目，我需要两个表中的数据。我不是 MySQL 查询方面的专家，但我做到了这一点：

```
SELECT *
FROM `p_list` AS pl
JOIN `employee` AS em
WHERE em.id =10
AND pl.employee_id =10 
```

当有 pl.employee_id 时它可以正常工作，但在没有 pl.employee_id 时返回结果。这是有道理的，但我不知道如何让它返回 em.id=10 以及是否设置了 pl.employee_id 。

我即将放弃，只运行两个查询，让 PHP 做这些脏活。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T23:56:27.770

试试这个，使用`LEFT JOIN`

```
SELECT *
FROM   `p_list` AS pl
       LEFT JOIN `employee` AS em
          ON em.id = pl.employee_ID
WHERE  em.id = 10 
```

基本上，您现在正在做的是一个`INNER JOIN`. `INNER JOIN`不同于`LEFT JOIN`（*这是你需要的*）。`INNER JOIN`仅当连接条件中指定的记录在另一个表上至少有一个匹配项时才返回结果。`LEFT JOIN`，*另一方面，返回**LEFT*表上指定的所有行，无论它在另一个表上匹配还是不匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T23:56:40.070

您可以使用左连接来执行此操作：

```
SELECT *
FROM `p_list` AS pl
LEFT JOIN `employee` AS em ON em.id = pl.employee_id
WHERE em.id =10 
```

# jquery - 使用 jQuery 解析 Rails HTML

> ID：13408323
> 
> 赞同：0
> 
> 时间：2012-11-15T23:55:34.043
> 
> 标签：jquery, html, ruby-on-rails-3

我正在尝试使用 jQuery 处理一堆 div 的内容。它完美地工作，除了当 HTML 放置在可见文件中时，`div`它不会像HTML 一样呈现元素，它们最终只是被显示为代码。有什么想法吗？我尝试过使用 Rails 的or ，这两种方法似乎都不起作用。`<h3>``<br>``h(this)``this.html_safe`

此代码使隐藏的“存储”div：

```
<div style="display: none;"><%= content_tag(:div, r.body.html_safe, :id => 'page'+i.to_s+'_hidden_article'+r.issue_id.to_s) %></div> 
```

此代码向用户显示上述内容之一：

```
<%= content_tag(:div, "", :id => "document_article#{i}_body", :class => "thumbnail") %> 
```

这是管理它的 jQuery 交换：

```
$('#doc_article1').change(function() {
  var src = $(this).val();
  $('#document_article1_body').text('');
  var b = $('#page1_hidden_article'+src).text();
  $('#document_article1_body').text(b);
}); 
```

任何帮助都会非常好。

干杯!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T00:01:28.617

替换`text()`为`html()`可能会帮助您解决此问题。

# javascript - 如何让一张图像更改为我使用javascript单击的图像

> ID：13408324
> 
> 赞同：1
> 
> 时间：2012-11-15T23:55:42.660
> 
> 标签：javascript, html

您好我正在尝试使用 JavaScript 创建一个画廊。我想在底部有一排小图像，当您单击一个时，它会在上方更大的窗口中显示该图像。并且该窗口当前包含图像。

JavaScript 新手，所以不能 100% 确定我在做什么。这是我试图使用但没有工作的东西。任何提示都会非常感谢。：

```
<script>
function changeimage(val)
{
    var x = val.getAttribute("src");
    var y = getElementById("Display");
    var z = y.getAttribute("src");
    z.setAttribute("src","x");
}
</script>

<img class="mid_one" src="Images/home3.jpg" alt="home1" width="186px" height="186px" onclick="changeimage(this)"/> 
```

提前致谢。

```
<img name="Display" id="Display" src="Images/home2.jpg" width="450" height="450" alt="Displayed Image"/> 
```

编辑：添加显示

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T23:58:53.450

尝试这个

```
function changeimage(val)
{
    var x = val.getAttribute("src");
    var y = getElementById("Display");
    y.setAttribute("src",x);
} 
```

根据你的逻辑 `var z = y.getAttribute("src");`是一个字符串和`not an Element`..在下一行你似乎将属性设置为字符串..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T23:58:56.973

您应该在元素 ( `y`) 上设置属性，不能在属性值 ( `z`) 上设置属性。

此外，您应该使用变量`x`从其他图像获取源，而不是字符串`"x"`。

```
var x = val.getAttribute("src");
var y = document.getElementById("Display");
y.setAttribute("src", x); 
```

# iphone - 从 tapklibrary 获取日期

> ID：13408325
> 
> 赞同：0
> 
> 时间：2012-11-15T23:55:46.017
> 
> 标签：iphone, ios, xcode, nsdate, tapku

我需要为我的应用程序实现一个日历，在搜索了不同的库之后，我认为tapku 是要走的路。

我对IOS有点陌生，所以这可能是一个新手问题：

我成功实现了tapku 库，似乎一切正常，除了我不知道如何使用它。

当用户选择日期时，我希望日历给我选择的日期并切换到新的视图控制器。

我该如何做到这一点:)？

顺便提一句。我试图获取文档，但 github 上的下载链接不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T05:00:16.533

你需要实现的`- (void)calendarMonthView:(TKCalendarMonthView *)monthView didSelectDate:(NSDate *)d`方法`TKCalendarMonthViewDelegate`。

```
#pragma mark -
#pragma mark TKCalendarMonthViewDelegate method

- (void)calendarMonthView:(TKCalendarMonthView *)monthView didSelectDate:(NSDate *)date
{
    NSLog(@"DidSelectDate %@",date);
} 
```

请从此[链接下载并检查示例应用程序](http://developinginthedark.com/posts/iphone-tapku-calendar-markers)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T04:36:22.717

您需要实现`TKCalendarMonthViewDelegate`协议，将您的对象设置为您的委托，`TKCalendarMonthView`并且每当用户选择一个日期时，您都会收到一个`calendarMonthView:didSelectDate:`电话。

如果你看一下，`TKCalendarMonthView.h`你会看到所有的协议方法。

# extjs - ExtJS 4 检查类是否存在

> ID：13408327
> 
> 赞同：3
> 
> 时间：2012-11-15T23:55:49.433
> 
> 标签：extjs, extjs4

我有一系列名字

```
变量名称 = ['X', 'Y']
```

对于每个名称，我想创建类实例，但前提是存在正确的 js 文件，否则函数应返回 null

```
    获取工具：功能（名称）{

        var t = Ext.create('VC.tools.' + name + 'Tool',{
            地图：this.map
        });

        返回 t.getEntryPoint();
}

```

或者也许有办法实现某种尝试捕获？我只是不希望出现任何错误，例如无法加载文件等。

编辑：

如果我添加 try catch 我可以避免不是构造函数错误。但仍然得到文件不存在错误。有没有办法处理这个？

```
    尝试 {
                var t = Ext.create('VC.tools.' + name + 'Tool',{
                    地图：this.map
                });

                返回 t.getEntryPoint();

            }捕捉（错误）{
                返回空值；
            }

```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T00:02:53.223

在 ClassManager 上使用 isCreated 方法：[http ://docs.sencha.com/ext-js/4-1/#!/api/Ext.ClassManager-method-isCreated](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.ClassManager-method-isCreated)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-27T18:27:34.217

您可能已经找到了解决方案，但以防万一它对其他人有帮助，您可以使用以下方法：

```
if(Ext.ClassManager.getAliasesByName('[Classname to check]').length > 0) {

    // create the requested component
    var component = Ext.create('[Classname to check]');

    // add replace the contents of the center container with the created component
    centerContainer.removeAll();
    centerContainer.add(component);

} else {
    console.log('Uknown component: '+ '[Classname to check]');
} 
```

如果它不存在，它不会给你一个错误，也不会尝试下载你的类文件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-02-26T14:23:12.067

就我而言，我要查找的类没有定义别名。我发现我可以使用这个：

```
function createClassIfExists(name) {
    var newClass;

    if(!Ext.isEmpty(Ext.ClassManager.getNamesByExpression(name + '*')))
        newClass = Ext.create(name);

    return newClass;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-07-26T18:43:01.547

如果您使用*“Ext.ClassManager”*，请注意查找类是否存在的警告。下面的代码仅在您的代码具有您在查看代码的“要求”部分中查找的类时才有效。

```
if(Ext.ClassManager.get('MyApp.view.Main')) 
```

如果尚未添加，它将返回*undefined 。*

```
requires: [ 'MyApp.view.Main'] 
```

您也可以在“*视图”*部分中将其添加到您的 App.js 中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-16T13:37:06.373

```
function openView(cid) {
    shortName = cid.substr(cid.lastIndexOf(".")+1, cid.length);
    if(Ext.get(shortName) == null) Ext.create(cid);
   Ext.Viewport.setActiveItem(Ext.getCmp(shortName));
} 
```

此功能打开一个视图，如

```
openView('MyApp.view.Oeffnungszeiten'); 
```

如果视图存在，它会访问旧实例

# c# - 在 C# 中以编程方式获取控件名称

> ID：13408331
> 
> 赞同：2
> 
> 时间：2012-11-15T23:55:57.523
> 
> 标签：c#, winforms

我对 c# .net 比较陌生。因此，如果您需要更多输入来回答我的查询，请告诉我。

1）我想做什么？

我使用的表单在 3 个不同的选项卡中有近 30 个数据网格视图控件。datagridview 的名称如下。 `dgView1`, `dgView2`,`dgView3`

除了上面的数据网格控件，我还得到了几个文本框控件，所以在选项卡 1 中更具体。我得到了下面的控件项。 `txtTabName1`, `txtStrKey1`,`dgView1`

现在我正在尝试编写一个函数，该函数将采用一个输入参数说`int v_CtrlNum` ，并使用此参数我需要从一个选项卡扫描每个项目并将其添加到 ArrayList/Collection。

因此，例如，该函数将需要从 datagrid 视图中读取每一行，如下所示

用于数据网格

```
foreach (DataGridViewRow in dgView+v_CtrlNum ) 
```

对于文本框

```
txtTabName+v_CtrlNum 
```

我想知道我这样做的方向是否正确。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T01:53:02.713

您可以查看[Controls.Find 方法](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.controlcollection.find%28v=VS.80%29.aspx)，注意它返回匹配的控件数组。

```
Control[] tbp = tabControl1.Controls.Find("txtTabName" + 2,true );
if (tbp.Length > 0)
{
    Control[] dv = tbp[0].Controls.Find("dgView" + 2, true);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T00:12:31.867

不完全确定我是否遵循您想要实现的目标，但我认为您只是想通过 ID 号获得控制权，对吗？你可以这样做：

```
List<Controls> myTabControls = new List<Controls>();
foreach (Control thisControl in this.Controls)
    if (thisControl.Name.Contains(v_CtrlNum.ToString()))
        foreach (Control thisChildControl in thisControl.Controls)
            myTabControl.Add(thisChildControl)thisChildControl 
```

要获取与 对应的选项卡中的控件`v_CtrlNum`，假设它`v_CtrlNum`是一个标识符，它是控件名称的一部分。然后通过选项卡中的控件来处理每个 DataGridView，可能是这样的：

```
foreach (Control thisControl in myTabContols)
    if (thisControl.GetType() == typeof(DataGridView))
       // Parse your DataGridView's rows here 
```

`this.Controls`您的表单的控件集合在哪里（`this`在这种情况下是指您的父表单）。

这有帮助吗？但是我不确定我是否正确理解了您在问题中所问的内容...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T00:52:13.547

我认为您可能想要做的是这样的事情：

```
DataGridView[] formDataGrids = this.Controls.OfType<DataGridView>().ToArray(); 
```

这将为您提供表单中所有 DataGridViews 的数组。您可以使用该选项卡的控制列表为单个选项卡执行此操作。您可以对文本框执行相同的操作，只需将数组类型和 OfType() 调用中的类型替换为 TextBox。

您不能像在您的示例中那样使用 foreach，因为“in”的右侧必须是对特定列表或数组的引用（实现 IEnumerable 的东西）。但是，如果您创建了一个像上面这样的列表，那么您可以执行以下操作：

```
foreach(DataGridView thisGrid in formDataGrids)
    DoSomething(thisGrid); 
```

或者也将它们链接在一起，如：

```
foreach(DataGridView thisGrid in this.Controls.OfType<DataGridView>())
    DoSomething(thisGrid); 
```

对于多选项卡处理，您应该已经在设计器中为每个页面创建了 TabPage 成员。然后，您可以执行以下操作：

```
var formDataGrids = new List<DataGridView>();
if (usingTab1)
    formDataGrids.AddRange(tabPage1.Controls.OfType<DataGridView>());
if (usingTab2)
    formDataGrids.AddRange(tabPage2.Controls.OfType<DataGridView>());
if (usingTab3)
    formDataGrids.AddRange(tabPage3.Controls.OfType<DataGridView>());

foreach(var thisGrid in formDataGrids)
    DoSomething(thisGrid); 
```

# javascript - Cookie 问题

> ID：13408333
> 
> 赞同：0
> 
> 时间：2012-11-15T23:56:00.517
> 
> 标签：javascript, jquery, cookies

我正在构建一个字体大小更改器，新字体的大小将保存在用户计算机上的 cookie 中。

我的问题是，当用户更改字体大小时，如果他们在“www.site.com”上查看网站，它会保存与在“site.com”上所做的不同的 cookie，如果您理解我的话？

我在网上看了，它说如果你将cookie的路径设置为'/'，它会使cookie在整个域和以下子域中全局可访问，所以我将cookie路径设置为'/'并没有区别。

你建议我做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T23:57:03.450

将 cookie 设置`Path`为`/`是正确的，但您也应该将 cookie 设置`Domain`为`.site.com`（注意前导`.`）。

[http://en.wikipedia.org/wiki/HTTP_cookie#Domain_and_Path](http://en.wikipedia.org/wiki/HTTP_cookie#Domain_and_Path)

# c# - 混淆和 Intellitrace VS 2012

> ID：13408334
> 
> 赞同：0
> 
> 时间：2012-11-15T23:56:03.287
> 
> 标签：c#, visual-studio-2012, obfuscation

是否可以在 Visual Studio 2012 中对混淆的 C# 代码（或任何 .net 代码）使用 Intellitrace？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T00:52:08.487

可能的，可能的，有用的，简单的，没那么多。Intellitrace 可能不会立即崩溃，但混淆的全部意义在于，即使您看到所有代码以及它在做什么，您仍然无法*理解*它。

# entity-framework - .edmx 为数据库首先定制 XML

> ID：13408336
> 
> 赞同：0
> 
> 时间：2012-11-15T23:56:18.490
> 
> 标签：entity-framework, edmx, customizing

是否可以更改为 edmx 模型生成的底层 xml？我基本上想防止特定列包含在存储模型、概念模型和映射元素中。我可以手动删除它们，并且事情会按我的预期工作，但是当您需要添加更多实体并且 XML 会使用您之前删除的内容重新生成时，它不是很容易维护。

# c#-4.0 - ObserveOn(Scheduler.CurrentThread) 不会导致订阅的 Action 在原始线程上运行

> ID：13408341
> 
> 赞同：1
> 
> 时间：2012-11-15T23:56:43.667
> 
> 标签：c#-4.0, system.reactive

我有一个动作，它接受一个回调，一旦完成，它将使用一个通用参数调用，即一个`Action<Action<T>>`. 我想在动作开始时显示一个忙碌的微调器，然后在它调用回调时将其带走，因此我创建了一个简单的实用程序来执行此操作。我遇到的问题是用户希望他们的回调在原始调用线程上运行，但它并不总是这样做。它几乎总是在单元测试（nUnit）中完美运行，但在应用程序实际运行时（WPF，.Net 4）不适用于某些调用。

这是我所拥有的相关内容

```
void WrapAsyncCallbackPattern<T>(Action<T> callback, Action<Action<T>> actionToRun)
{
    var subject = new AsyncSubject<T>();
    try
    {
        actionToRun(
            result =>
            {
                subject.OnNext(result);
                subject.OnCompleted();
            });
    }
    catch (Exception ex)
    {
        subject.OnError(ex);
    }

    subject
        .ObserveOn(Scheduler.CurrentThread)
        .Subscribe(callback, OnError);
} 
```

我想`callback`在我订阅的线程上运行（并`subject`在其上声明），但它似乎并不可靠。我假设我在做一些愚蠢的事情。它是什么？

**编辑：添加了单元测试代码**

```
private readonly TimeSpan m_WaitTime = TimeSpan.FromSeconds(1);

[Test]
public void WrapAsyncCallbackPattern_WithActionOnDifferentThread_CallsCallbackOnSameThread()
{
    var awaiter = new AutoResetEvent(false);

    bool callbackRan = false;
    int callingThreadId = Thread.CurrentThread.ManagedThreadId;
    int callbackThreadId = int.MinValue;
    int actionThreadId = int.MinValue;

    BackgroundOperation.WrapAsyncCallbackPattern<int>(
        _ =>
        {
            callbackRan = true;
            callbackThreadId = Thread.CurrentThread.ManagedThreadId;

            awaiter.Set();
        },
        cb => ThreadPool.QueueUserWorkItem(
            _ =>
            {
                actionThreadId = Thread.CurrentThread.ManagedThreadId;
                cb(0);
            }));

    var errorInfo = string.Format("\r\nCalling thread = {0}; Action thread = {1}; Callback thread = {2}", callingThreadId, actionThreadId, callbackThreadId);

    Assert.IsTrue(awaiter.WaitOne(m_WaitTime));
    Assert.IsTrue(callbackRan);
    Assert.AreNotEqual(callingThreadId, actionThreadId, "Action needs to be run on a different thread for this test." + errorInfo);
    Assert.AreNotEqual(actionThreadId, callbackThreadId, "Callback should not be run on action thread." + errorInfo);
    Assert.AreEqual(callingThreadId, callbackThreadId, "Callback should be run on calling thread." + errorInfo);
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-16T06:00:09.310

您可能对做什么有错误的理解`Scheduler.CurrentThread`。我想每个人都会犯这个错误。

调度程序与正在执行的`CurrentThread`observable 相关，而不是在定义（或订阅）时。考虑延迟或延迟执行。这应该是有意义的，因为每当您跳转到不同的线程时，您都需要某种方式来编组调用。

所以你真正追求的是这样的：

```
var synchContext = new SynchronizationContextScheduler(
    System.Threading.SynchronizationContext.Current) 

subject
    .ObserveOn(synchContext)
    .Subscribe(callback, OnError); 
```

或许：

```
subject
    .ObserveOn(this) /* this is my current form */
    .Subscribe(callback, OnError); 
```

如果你这样做，你应该能够控制你的回调在哪个线程上运行。

您的测试可能有效，因为它们最终同步执行。

# asp.net - sql或asp.net需要子查询或参数传递

> ID：13408342
> 
> 赞同：1
> 
> 时间：2012-11-15T23:56:44.103
> 
> 标签：asp.net, sql, asp-classic

我正在尝试使用一个记录集的结果作为第二个记录集结果的基础。Q1 按我试图传递给另一个查询的部分为我提供正确的总库存。（当我作为Q2的一部分直接查询总和时，总和值不正确，似乎与预测表链接有关。是否可以创建子查询或直接传递信息。（我是一个介绍用户，所以对流程不太熟悉）Q1

```
oRS7.open "Select i.partNo, sum(i.InventoryQuantity) as 'Inv Qty in FG/FS' from invloc i Where i.InventoryLocation IN ('FG','FS') GROUP BY i.partno, i.InventoryLocation", oConn 
```

第二季度

```
oRS.open "Select p.PartNo, p.Description, [NEED THE RESULTS TO INSERT HERE], sum(m.ForecastQuantity) as 'Current Month Plan', sum(m.ForecastQuantity)/4 as 'Weekly Avg Plan', sum(m.ForecastQuantity)/30 as '1 Day Avg Plan',(case when i.InventoryQuantity < sum(m.ForecastQuantity) then 'Y' else 'N' end)as 'Below Monthly Plan',(case when i.InventoryQuantity < sum(m.ForecastQuantity/4) then 'Y' else 'N' end)as 'Below Weekly Plan',(case when i.InventoryQuantity <= sum(m.ForecastQuantity/30) then 'Y' else 'N' end)as 'Below 1 Day Plan'
from parts p, invloc i, salesforecast m Where p.PartNo = i.PartNo and p.PartNo = m.PartNo and i.InventoryLocation='FS' and m.ForecastDate between '" & Date & "' and '" & Date+27 & "' 
Group by p.partno, p.Description, i.InventoryQuantity, Order by 'Below 1 Day Plan' desc, 'Below Weekly Plan' desc, 'Below Monthly Plan' desc, p.PartNo ", oConn 
```

原始编码需要一个库存，但现在我需要将两个库存量相加，然后再将这些值与预测的量进行比较。这是从 MS SQL Server 的 asp.net 页面上提取的

请参阅下面的原始代码（需要将 FG 设为汇总库存）

```
<%@ Language="VBScript" %>
<%  Option Explicit %>
<%
    Response.Expires = 0
    Server.ScriptTimeout = 500000

    dim oConn, oRS, oRS2, oRS3, oRS4, oRS5, oRS6

    Set oConn = Server.CreateObject("ADODB.Connection")

    oConn.Open "Driver={SQL Server}; Server=ABSQL21; Database=DF_WHSE; Uid=ReadOnlyUser; Pwd=bionics;"

    Set oRS = Server.CreateObject("ADODB.Recordset")

    Set oRS2 = Server.CreateObject("ADODB.Recordset")

    Set oRS3 = Server.CreateObject("ADODB.Recordset")

    Set oRS4 = Server.CreateObject("ADODB.Recordset")

    Set oRS5 = Server.CreateObject("ADODB.Recordset")

    Set oRS6 = Server.CreateObject("ADODB.Recordset")
%>
<html>

<head>
<title><%=Month(Date) & Day(Date) & Year(Date)%></title>
<style>
body  {
    font-family: "Trebuchet MS", Arial, Helvetica, san-serif;;
    font-size: 12px;
}
table {
    font-size: 11px;
    border-collapse:collapse;
}
td  {
    border-bottom: 1px #ccc solid;
    border-right: 1px #a1b0f3 dashed;
}
th  {
    border-bottom: 2px #333 solid;
    border-right: 1px #a1b0f3 dashed;
    background-color:#1790C0;
    color: #fff;
}
input  {
    border: 0px;
}
a  {
    color: #1790C0;
    text-decoration: none;
}
a:hover  {
    color: #5A6D81;
    text-decoration: underline;
}
</style>
</head>

<body>
<center>
<img src="Logo.png">
<br>

<%
    oRS.open "Select p.PartNo, p.Description, (case when i.InventoryLocation='FG' then i.InventoryQuantity else 0 end) as 'Inv Qty in FG', " &_
                "sum(m.ForecastQuantity) as 'Current Month Plan', sum(m.ForecastQuantity)/4 as 'Weekly Avg Plan', sum(m.ForecastQuantity)/30 as '1 Day Avg Plan', " &_
                "(case when i.InventoryQuantity < sum(m.ForecastQuantity) then 'Y' else 'N' end)as 'Below Monthly Plan', " &_
                "(case when i.InventoryQuantity < sum(m.ForecastQuantity/4) then 'Y' else 'N' end)as 'Below Weekly Plan', " &_
                "(case when i.InventoryQuantity <= sum(m.ForecastQuantity/30) then 'Y' else 'N' end)as 'Below 1 Day Plan' " &_
                "from parts p, invloc i, salesforecast m Where p.PartNo = i.PartNo and p.PartNo = m.PartNo and i.InventoryLocation='FG' and m.ForecastDate between '" & Date & "' and '" & Date+27 & "' " &_
                "Group by p.partno, p.Description, i.InventoryQuantity, i.InventoryLocation Order by 'Below 1 Day Plan' desc, 'Below Weekly Plan' desc, 'Below Monthly Plan' desc, p.PartNo ", oConn

    Response.Write "<table cellpadding=2 border=0 cellspacing=4>"
    Response.Write "<tr align=center>"
    Response.Write "<th width=50></td>"
    Response.Write "<th width=130><b>Finished Part No</b></td>"
    Response.Write "<th width=140><b>Purchased Part No</b></td>"
    Response.Write "<th width=200><b>Description</b></td>"
    Response.Write "<th width=100><b>FG Inventory</b></td>"
    Response.Write "<th width=250><b>Forward 4 Week MRP Demand</b></td>"
    Response.Write "<th width=200><b>Comments</b></td>"
    Response.Write "</tr>"

    IF oRS.EOF THEN
        Response.Write "<tr align=center>"
        Response.Write "<td colspan=7>No MRP Warnings Found.</td>"
        Response.Write "</tr>"
    ELSE
    END IF

    DO WHILE NOT oRS.EOF

    Select case oRS("PartNo").Value

        case "7095316-36J"
        case "7095316-37H"
        case "7095316-49H"

        case else

            IF oRS("Below Monthly Plan").Value = "Y" THEN
                IF oRS("Below Weekly Plan").Value = "Y" THEN
                    IF oRS("Below 1 Day Plan").Value = "Y" THEN
                        Response.Write "<tr align=center>"
                        Response.Write "<td width=50 bgcolor=""#FF3366"">"
                        Response.Write "<td><font style=""color: #0098DB; font-weight: bold;"">" & oRS("PartNo").Value & "</font></td>"
                        Response.Write "<td>"

                        oRS2.open "Select Component from dbo.bomli_all where BomId='" & oRS("PartNo").Value & "' and Quantity = '1.0000' Order By Component ", oConn

                        Do While Not oRS2.EOF

                            oRS3.Open "Select MakeBuyCode from dbo.parts where PartNo='" & oRS2("Component").Value & "' ", oConn

                            If oRS3("MakeBuyCode").Value = "B" Then
                                Response.Write "<font style=""font-size: 10px;"">" & oRS2("Component").Value & "</font><br>"
                            Else
                                oRS4.open "Select Component from dbo.bomli_all where BomId='" & oRS2("Component").Value & "' and Quantity = '1.0000' Order By Component ", oConn
                                Do While Not oRS4.EOF
                                    oRS5.Open "Select MakeBuyCode from dbo.parts where PartNo='" & oRS4("Component").Value & "' ", oConn
                                    If oRS5("MakeBuyCode").Value = "B" Then
                                        Response.Write "<font style=""font-size: 10px;"">" & oRS4("Component").Value & "</font><br>"
                                    Else
                                    End If
                                    oRS5.Close
                                oRS4.MoveNext
                                Loop
                                oRS4.Close
                            End If
                            oRS3.Close

                        oRS2.MoveNext
                        Loop
                        oRS2.Close

                        Response.Write "</td>"
                        Response.Write "<td>" & oRS("Description").Value & "</td>"
                        Response.Write "<td><font color=#FF3366><b>" & oRS("Inv Qty in FG").Value & "</b></font></td>"
                        Response.Write "<td>" & oRS("Current Month Plan").Value & "</td>"
                        Response.Write "<td><input type=text size=30></td>"
                        Response.Write "</tr>"
                    ELSE
                        Response.Write "<tr align=center>"
                        Response.Write "<td width=50 bgcolor=""#FF6600"">"
                        Response.Write "<td><font style=""color: #0098DB; font-weight: bold;"">" & oRS("PartNo").Value & "</font></td>"
                        Response.Write "<td>"

                        oRS2.open "Select Component from dbo.bomli_all where BomId='" & oRS("PartNo").Value & "' and Quantity = '1.0000' Order By Component ", oConn

                        Do While Not oRS2.EOF

                            oRS3.Open "Select MakeBuyCode from dbo.parts where PartNo='" & oRS2("Component").Value & "' ", oConn

                            If oRS3("MakeBuyCode").Value = "B" Then
                                Response.Write "<font style=""font-size: 10px;"">" & oRS2("Component").Value & "</font><br>"
                            Else
                                oRS4.open "Select Component from dbo.bomli_all where BomId='" & oRS2("Component").Value & "' and Quantity = '1.0000' Order By Component ", oConn
                                Do While Not oRS4.EOF
                                    oRS5.Open "Select MakeBuyCode from dbo.parts where PartNo='" & oRS4("Component").Value & "' ", oConn
                                    If oRS5("MakeBuyCode").Value = "B" Then
                                        Response.Write "<font style=""font-size: 10px;"">" & oRS4("Component").Value & "</font><br>"
                                    Else
                                    End If
                                    oRS5.Close
                                oRS4.MoveNext
                                Loop
                                oRS4.Close
                            End If
                            oRS3.Close

                        oRS2.MoveNext
                        Loop
                        oRS2.Close

                        Response.Write "</td>"
                        Response.Write "<td>" & oRS("Description").Value & "</td>"
                        Response.Write "<td><font color=#FF3366><b>" & oRS("Inv Qty in FG").Value & "</b></font></td>"
                        Response.Write "<td>" & oRS("Current Month Plan").Value & "</td>"
                        Response.Write "<td><input type=text size=30></td>"
                        Response.Write "</tr>"
                    END IF
                ELSE
                    Response.Write "<tr align=center>"
                    Response.Write "<td width=50 bgcolor=""#FFFF66"">"
                    Response.Write "<td><font style=""color: #0098DB; font-weight: bold;"">" & oRS("PartNo").Value & "</font></td>"
                    Response.Write "<td>"

                        oRS2.open "Select Component from dbo.bomli_all where BomId='" & oRS("PartNo").Value & "' and Quantity = '1.0000' Order By Component ", oConn

                        Do While Not oRS2.EOF

                            oRS3.Open "Select MakeBuyCode from dbo.parts where PartNo='" & oRS2("Component").Value & "' ", oConn

                            If oRS3("MakeBuyCode").Value = "B" Then
                                Response.Write "<font style=""font-size: 10px;"">" & oRS2("Component").Value & "</font><br>"
                            Else
                                oRS4.open "Select Component from dbo.bomli_all where BomId='" & oRS2("Component").Value & "' and Quantity = '1.0000' Order By Component ", oConn
                                Do While Not oRS4.EOF
                                    oRS5.Open "Select MakeBuyCode from dbo.parts where PartNo='" & oRS4("Component").Value & "' ", oConn
                                    If oRS5("MakeBuyCode").Value = "B" Then
                                        Response.Write "<font style=""font-size: 10px;"">" & oRS4("Component").Value & "</font><br>"
                                    Else
                                    End If
                                    oRS5.Close
                                oRS4.MoveNext
                                Loop
                                oRS4.Close
                            End If
                            oRS3.Close

                        oRS2.MoveNext
                        Loop
                        oRS2.Close

                    Response.Write "</td>"
                    Response.Write "<td>" & oRS("Description").Value & "</td>"
                    Response.Write "<td><font color=#FF3366><b>" & oRS("Inv Qty in FG").Value & "</b></font></td>"
                    Response.Write "<td>" & oRS("Current Month Plan").Value & "</td>"
                    Response.Write "<td><input type=text size=30></td>"
                    Response.Write "</tr>"
                END IF
            ELSE
            END IF

    End select

    oRS.MoveNext
    Loop

    Response.Write "</table><br>"

    oRS.Close

    oRS.open "Select p.PartNo, p.Description, " &_
                "(case when i.InventoryLocation='FG' then i.InventoryQuantity else 0 end)as 'Inv Qty in FG', " &_
                "sum(p.OrderPoint)as '4 Weeks Safety Stock', " &_
                "sum(p.OrderPoint/4)as '1 Week Safety Stock', " &_
                "sum(p.OrderPoint/4/30)as '1 Day Safety Stock', " &_
                "(case when i.InventoryQuantity < sum(p.OrderPoint) then 'Y' else 'N' end)as 'Below Monthly Safety Stock', " &_
                "(case when i.InventoryQuantity < sum(p.OrderPoint/4) then 'Y' else 'N' end)as 'Below Weekly Safety Stock', " &_
                "(case when i.InventoryQuantity < sum(p.OrderPoint/30) then 'Y' else 'N' end)as 'Below 1 Safety Stock' " &_
                "from parts p, invloc i " &_
                "Where p.PartNo = i.PartNo " &_
                "and i.InventoryLocation='FG' " &_
                "and p.PlanningType='OPN' " &_
                "and p.OrderPoint > i.InventoryQuantity " &_
                "Group by p.partno, p.Description, i.InventoryQuantity, i.InventoryLocation " &_
                "Order by 'Below Monthly Safety Stock' desc, 'Below Weekly Safety Stock' desc, 'Below 1 Safety Stock' desc, p.PartNo", oConn

    IF oRS.EOF THEN
    ELSE
        Response.Write "<table cellpadding=2 border=0 cellspacing=4>"
        Response.Write "<tr align=center>"
        Response.Write "<th width=50></td>"
        Response.Write "<th width=130></td>"
        Response.Write "<th width=140></td>"
        Response.Write "<th width=200></td>"
        Response.Write "<th width=100></td>"
        Response.Write "<th width=250><b>Order Point Level:</b></td>"
        Response.Write "<th width=200></td>"
        Response.Write "</tr>"
    END IF

    DO WHILE NOT oRS.EOF

    Select case oRS("PartNo").Value

    case "6015213-001"
    case "5060050008"
    case "8044213-001"
    case "9050050011"
    case "5023015-001"
    case else

        IF oRS("Below Monthly Safety Stock").Value = "Y" THEN
                IF oRS("Below Weekly Safety Stock").Value = "Y" THEN
                    IF oRS("Below 1 Safety Stock").Value = "Y" THEN
                        Response.Write "<tr align=center>"
                        Response.Write "<td width=50 bgcolor=""#FF3366"">"
                        Response.Write "<td><font style=""color: #0098DB; font-weight: bold;"">" & oRS("PartNo").Value & "</font></td>"
                        Response.Write "<td>"

                        oRS2.open "Select Component from dbo.bomli_all where BomId='" & oRS("PartNo").Value & "' and Quantity = '1.0000' Order By Component ", oConn

                        Do While Not oRS2.EOF

                            oRS3.Open "Select MakeBuyCode from dbo.parts where PartNo='" & oRS2("Component").Value & "' ", oConn

                            If oRS3("MakeBuyCode").Value = "B" Then
                                Response.Write "<font style=""font-size: 10px;"">" & oRS2("Component").Value & "</font><br>"
                            Else
                                oRS4.open "Select Component from dbo.bomli_all where BomId='" & oRS2("Component").Value & "' and Quantity = '1.0000' Order By Component ", oConn
                                Do While Not oRS4.EOF
                                    oRS5.Open "Select MakeBuyCode from dbo.parts where PartNo='" & oRS4("Component").Value & "' ", oConn
                                    If oRS5("MakeBuyCode").Value = "B" Then
                                        Response.Write "<font style=""font-size: 10px;"">" & oRS4("Component").Value & "</font><br>"
                                    Else
                                    End If
                                    oRS5.Close
                                oRS4.MoveNext
                                Loop
                                oRS4.Close
                            End If
                            oRS3.Close

                        oRS2.MoveNext
                        Loop
                        oRS2.Close

                        Response.Write "</td>"
                        Response.Write "<td>" & oRS("Description").Value & "</td>"
                        Response.Write "<td><font color=#FF3366><b>" & oRS("Inv Qty in FG").Value & "</b></font></td>"
                        Response.Write "<td>" & oRS("4 Weeks Safety Stock").Value & "</td>"
                        Response.Write "<td><input type=text size=30></td>"
                        Response.Write "</tr>"
                    ELSE
                        Response.Write "<tr align=center>"
                        Response.Write "<td width=50 bgcolor=""#FF6600"">"
                        Response.Write "<td><font style=""color: #0098DB; font-weight: bold;"">" & oRS("PartNo").Value & "</font></td>"
                        Response.Write "<td>"

                        oRS2.open "Select Component from dbo.bomli_all where BomId='" & oRS("PartNo").Value & "' and Quantity = '1.0000' Order By Component ", oConn

                        Do While Not oRS2.EOF

                            oRS3.Open "Select MakeBuyCode from dbo.parts where PartNo='" & oRS2("Component").Value & "' ", oConn

                            If oRS3("MakeBuyCode").Value = "B" Then
                                Response.Write "<font style=""font-size: 10px;"">" & oRS2("Component").Value & "</font><br>"
                            Else
                                oRS4.open "Select Component from dbo.bomli_all where BomId='" & oRS2("Component").Value & "' and Quantity = '1.0000' Order By Component ", oConn
                                Do While Not oRS4.EOF
                                    oRS5.Open "Select MakeBuyCode from dbo.parts where PartNo='" & oRS4("Component").Value & "' ", oConn
                                    If oRS5("MakeBuyCode").Value = "B" Then
                                        Response.Write "<font style=""font-size: 10px;"">" & oRS4("Component").Value & "</font><br>"
                                    Else
                                    End If
                                    oRS5.Close
                                oRS4.MoveNext
                                Loop
                                oRS4.Close
                            End If
                            oRS3.Close

                        oRS2.MoveNext
                        Loop
                        oRS2.Close

                        Response.Write "</td>"
                        Response.Write "<td>" & oRS("Description").Value & "</td>"
                        Response.Write "<td><font color=#FF3366><b>" & oRS("Inv Qty in FG").Value & "</b></font></td>"
                        Response.Write "<td>" & oRS("4 Weeks Safety Stock").Value & "</td>"
                        Response.Write "<td><input type=text size=30></td>"
                        Response.Write "</tr>"
                    END IF
                ELSE
                    Response.Write "<tr align=center>"
                    Response.Write "<td width=50 bgcolor=""#FFFF66"">"
                    Response.Write "<td><font style=""color: #0098DB; font-weight: bold;"">" & oRS("PartNo").Value & "</font></td>"
                    Response.Write "<td>"

                        oRS2.open "Select Component from dbo.bomli_all where BomId='" & oRS("PartNo").Value & "' and Quantity = '1.0000' Order By Component ", oConn

                        Do While Not oRS2.EOF

                            oRS3.Open "Select MakeBuyCode from dbo.parts where PartNo='" & oRS2("Component").Value & "' ", oConn

                            If oRS3("MakeBuyCode").Value = "B" Then
                                Response.Write "<font style=""font-size: 10px;"">" & oRS2("Component").Value & "</font><br>"
                            Else
                                oRS4.open "Select Component from dbo.bomli_all where BomId='" & oRS2("Component").Value & "' and Quantity = '1.0000' Order By Component ", oConn
                                Do While Not oRS4.EOF
                                    oRS5.Open "Select MakeBuyCode from dbo.parts where PartNo='" & oRS4("Component").Value & "' ", oConn
                                    If oRS5("MakeBuyCode").Value = "B" Then
                                        Response.Write "<font style=""font-size: 10px;"">" & oRS4("Component").Value & "</font><br>"
                                    Else
                                    End If
                                    oRS5.Close
                                oRS4.MoveNext
                                Loop
                                oRS4.Close
                            End If
                            oRS3.Close

                        oRS2.MoveNext
                        Loop
                        oRS2.Close

                    Response.Write "</td>"
                    Response.Write "<td>" & oRS("Description").Value & "</td>"
                    Response.Write "<td><font color=#FF3366><b>" & oRS("Inv Qty in FG").Value & "</b></font></td>"
                    Response.Write "<td>" & oRS("4 Weeks Safety Stock").Value & "</td>"
                    Response.Write "<td><input type=text size=30></td>"
                    Response.Write "</tr>"
                END IF
            ELSE
            END IF

    End select

    oRS.MoveNext
    Loop

    IF oRS.EOF THEN
    ELSE
        Response.Write "</table>"
    END IF

    oRS.Close

    Set oRS = Nothing
    oConn.Close
    Set oConn = Nothing

%>

</body>

</html> 
```

`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T00:25:29.097

如果我只处理 SQL 部分：

你想混合这个：

```
Select i.partNo, sum(i.InventoryQuantity) as 'Inv Qty in FG/FS' 
from invloc i 
Where i.InventoryLocation IN ('FG','FS') 
GROUP BY i.partno, i.InventoryLocation 
```

有了这个：

```
Select p.PartNo, p.Description, 
[NEED THE RESULTS TO INSERT HERE],  sum(m.ForecastQuantity) as 'Current Month Plan',
sum(m.ForecastQuantity)/4 as 'Weekly Avg Plan', 
sum(m.ForecastQuantity)/30 as '1 Day Avg Plan',
(case when i.InventoryQuantity < sum(m.ForecastQuantity) then 'Y' else 'N' end) as 'Below Monthly Plan',
(case when i.InventoryQuantity < sum(m.ForecastQuantity/4) then 'Y' else 'N' end)as 'Below Weekly Plan',
(case when i.InventoryQuantity <= sum(m.ForecastQuantity/30) then 'Y' else 'N' end)as 'Below 1 Day Plan'
from parts p, invloc i, salesforecast m 
Where p.PartNo = i.PartNo 
and p.PartNo = m.PartNo 
and i.InventoryLocation='FS' 
and m.ForecastDate between '" & Date & "' and '" & Date+27 & "' 
Group by p.partno, p.Description, i.InventoryQuantity
Order by 'Below 1 Day Plan' desc, 'Below Weekly Plan' desc, 
'Below Monthly Plan' desc, p.PartNo 
```

您将第一个查询添加为子表并将其加入，但您需要注意重复计算问题：

```
Select p.PartNo, p.Description, 
-- Here's your column
IQ.[Inv Qty in FG/FS],  
------------------------
sum(m.ForecastQuantity) as 'Current Month Plan',
sum(m.ForecastQuantity)/4 as 'Weekly Avg Plan', 
sum(m.ForecastQuantity)/30 as '1 Day Avg Plan',
(case when i.InventoryQuantity < sum(m.ForecastQuantity) then 'Y' else 'N' end) as 'Below Monthly Plan',
(case when i.InventoryQuantity < sum(m.ForecastQuantity/4) then 'Y' else 'N' end)as 'Below Weekly Plan',
(case when i.InventoryQuantity <= sum(m.ForecastQuantity/30) then 'Y' else 'N' end)as 'Below 1 Day Plan'
from parts p, invloc i, salesforecast m ,
-- Here's your query from above, aliased as IQ
(
Select i.partNo, sum(i.InventoryQuantity) as 'Inv Qty in FG/FS' 
from invloc i 
Where i.InventoryLocation IN ('FG','FS') 
GROUP BY i.partno
) IQ
----------------------------
Where p.PartNo = i.PartNo 
and p.PartNo = m.PartNo 
and i.InventoryLocation='FS' 
and m.ForecastDate between '" & Date & "' and '" & Date+27 & "' 
--- Here is where we join
and IQ.partNo = p.partNo
Group by p.partno, p.Description, i.InventoryQuantity, 
-- don't forget to group by
IQ.[Inv Qty in FG/FS]
Order by 'Below 1 Day Plan' desc, 'Below Weekly Plan' desc, 
'Below Monthly Plan' desc, p.PartNo 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T01:00:15.433

这不能回答您的确切问题，但可能有助于解决一些加入问题。

**注意：** 这包含该行

```
AND m.liid = ???? 
```

预测表*可能*需要在此列上进行过滤或连接才能正确唯一。（这取决于数据）。在尝试关联实际值和预算时，这是一个常见问题。我希望这会有所帮助 - 回帖，我会进一步提供帮助。我怀疑如果我们使用 SQLFiddle 这会容易得多！

```
 SELECT p.PartNo, p.Description, 
    IQ.FG_Qty, Iq.FS_Qty,
    sum(m.ForecastQuantity) as 'Current Month Plan',
    sum(m.ForecastQuantity)/4 as 'Weekly Avg Plan', 
    sum(m.ForecastQuantity)/30 as '1 Day Avg Plan'
    FROM
    -- parts is unique on partNo
    parts p
    -- salesforecast is unique on partno,liid
    INNER JOIN
    salesforecast m
    ON P.partNo = m.partNo
    AND m.liid = ????
    INNER JOIN
    (
    -- The subtable IQ is unique on partNo
    Select 
    i.partNo, 
    sum(case when i.InventoryLocation = 'FG' then i.InventoryQuantity else 0 end) as [FG_Qty], 
    sum(case when i.InventoryLocation = 'FS' then i.InventoryQuantity else 0 end) as [FS_Qty]
    from invloc i 
    Where i.InventoryLocation IN ('FG','FS') 
    GROUP BY i.partno
    ) IQ
    ON p.PartNo = IQ.PartNo 
    AND m.ForecastDate between '" & Date & "' and '" & Date+27 & "' 
    --- Here is where we join
    GROUP BY p.partno, p.Description, IQ.FG_Qty, Iq.FS_Qty 
```

# .net - Rally .NET Rest API - 请求页面大小与限制？

> ID：13408344
> 
> 赞同：1
> 
> 时间：2012-11-15T23:56:48.383
> 
> 标签：.net, rest, rally

从 Rally Web 服务 v1.39 中提取用户故事（使用 .NET Rest API）——我认为设置 pagesize 值实际上会限制结果集合中的记录数。然而，这似乎根本没有效果。设置限制值确实会影响结果的数量。

有人可以解释一下区别是什么以及为什么 pagesize 不符合我的预期。

```
public static QueryResult GetProjectUserStories(string projectReference, int start)
{
    var restApi = GetApi();
    var pageSize = (Convert.ToInt32(WebConfigurationManager.AppSettings["RallyPageSize"]));

    var request = new Request("HierarchicalRequirement")
    {
         Fetch = new List<string>()
         {
              "Name",
              "Description",
              "FormattedID",
              "TaskEstimateTotal"
         },
         Query = new Query("Project.Name", Query.Operator.Equals, projectReference),
               PageSize = pageSize,
               Limit = pageSize,
               Start = start
         };

         var queryResult = restApi.Query(request);

         return queryResult;
} 
```

我想也许这可能会被翻译成“FindAll”搜索——但是为什么要有页面大小属性呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T00:07:18.323

页面大小是将在每个响应中返回的结果数。WSAPI 允许其范围为 1 到 200。当结果超过 200 个时，必须将其拆分为多页数据。限制是要返回的最大结果总数。

因此，如果您将页面大小设置为 200 并限制为 500 并且有 450 个结果，则工具包将为您提出以下请求：

1.  页面大小=200，开始=1
2.  页面大小=200，开始=201
3.  页面大小=50，开始=401

总共有 450 个结果。

# html - 如何使用 XML 数据在 HTML 中创建产品目录？

> ID：13408348
> 
> 赞同：1
> 
> 时间：2012-11-15T23:57:09.677
> 
> 标签：html, xml, file, integration

我知道如何设计和构建整个 HTML 页面来创建产品目录。我只是认为对于正式的做法，最好将产品信息存储在 XML 文件中。除了我不知道如何将两者联系起来。在 HTML 网页中显示 XML 信息的标准方式是什么？

我有一个产品列表，每个产品都有标题、图片、描述和添加到购物车按钮。我想知道如何在 HTML 列表中显示正确的 XML 产品数据。

我看到了一个很好的数据绑定示例，但后来发现它已被弃用。那么现在人们使用的正常程序是什么？人们如何以最安全、最有效的方式在 HTML 网页中显示外部信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T00:12:53.493

要将您的 XML 转换为 HTML，您可以使用[XSLT](http://www.w3schools.com/xml/xml_xsl.asp)样式表和一些过程来应用转换。

要从 XML 中选择数据，您需要使用[XPATH](http://www.w3schools.com/xpath/xpath_syntax.asp)选择器来获取要转换的数据或数据集合。

XSLT 文件的编码可能会变得相当复杂，因为它从 XML 文件中选择数据并且呈现的选项非常广泛。

这是来自 W3Schools 的示例：[XSLT - Try It Yourself](http://www.w3schools.com/xml/tryxslt.asp?xmlfile=simple&xsltfile=simple)，他们也有一个[XSLT 教程](http://www.w3schools.com/xsl/default.asp)

您当然也可以使用[JavaScript 将 XML 转换为 HTML](http://www.w3schools.com/xml/xml_to_html.asp)，但代码会更复杂且灵活性更低。

获得有关 XSLT 和 XPATH 的初始概念可能需要更长的时间，但最终会得到回报。

# android - Android 多用户支持（4.2 中新增）对服务器端数据模型（例如 android_id）的影响

> ID：13408349
> 
> 赞同：38
> 
> 时间：2012-11-15T23:57:17.160
> 
> 标签：android, multi-user

Google 刚刚发布了 Android 4.2，其中包括在单个设备上支持多个用户配置文件：http: [//developer.android.com/about/versions/android-4.2.html#MultipleUsers](http://developer.android.com/about/versions/android-4.2.html#MultipleUsers)。

谷歌表示这将对应用程序透明，但我认为这可能会对用于识别设备、用户和安装的数据模型产生影响。

一个问题是 android_id 的使用。上面链接页面上的建议建议通过 android_id 以外的方法之一来识别设备，但我相信 android_id 被广泛用于此目的。

**我的主要问题是 - 每个用户个人资料都有自己的 android_id，这意味着什么？**

安装新操作系统或完成硬重置时会生成一个新的 android_id - 也许在创建新用户配置文件时会生成一个新的（这是问题 #1）？我认为可能不会，因此可以为同一个 android_id 多次安装一个应用程序 - 我认为这可能会与某些应用程序的服务器端数据模型混为一谈。

无论哪种方式，根据您识别设备的方式，您现在可以发现特定应用程序可以在单个设备上进行多次安装。

另一个问题是用户。假设每个配置文件可以有任意数量的 Google 帐户，但一个 Google 帐户必须与每个配置文件中的 Play 商店相关联。我认为您的应用也有可能在同一设备（通过 android_id）和同一用户上同时安装多个。我认为多个配置文件功能的常见用途是让单个用户在他们的手机上拥有家庭和工作配置文件 - 通常使用不同的 Google 帐户，但在某些情况下，他们可以在每个配置文件中拥有相同的 Google 帐户（例如他们不必为东西支付两次费用）。

**旁注**这里是在新的 ARC 平台（Chrome 上的 Android）上对 ANDROID_ID
[的类似讨论。](https://stackoverflow.com/questions/29656101/how-does-android-id-on-arc-chrome-differ-from-android)注意 - ARC 上的行为与 Android 上的不同。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-11-20T01:38:50.150

（没有人回答我的问题，但我现在有机会自己用 4.2 进行测试。）

答案是每个配置文件都有自己的 android_id。

想一想，这可能是最有意义的，并且会引起最少的问题。这应该会导致大多数系统将设备上的不同配置文件视为不同的设备 - 这应该不是问题。唯一的问题是正确识别设备的系统，例如。基于 wifi 或 bt mac 地址，或序列号或 IMEI，然后预期该单个设备上的多个 android_id 代表该设备上的顺序操作系统安装。（相反，错了会更安全。）

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-11-19T09:53:32.617

是的，每个用户配置文件都有自己的 ANDROID_ID。这现在记录[在这里](http://developer.android.com/reference/android/provider/Settings.Secure.html#ANDROID_ID)：

> **注意：**当一个设备有[多个用户](http://developer.android.com/about/versions/android-4.2.html#MultipleUsers)（在某些运行 Android 4.2 或更高版本的设备上可用）时，每个用户显示为一个完全独立的设备，因此`ANDROID_ID`每个用户的值都是唯一的。

请注意，尽管众所周知，制造商会搞砸他们的`ANDROID_ID`. 例如，摩托罗拉 Droid2为每个设备[返回相同的`ANDROID_ID`值](https://groups.google.com/d/msg/android-developers/U4mOUI-rRPY/n3ycpSXyZFoJ)。因此，依靠`ANDROID_ID`唯一标识用户配置文件或设备[可能是不可靠](http://android-developers.blogspot.co.uk/2011/03/identifying-app-installations.html)的。

# c++ - 重新制定先前的状态 3 查询

> ID：13408351
> 
> 赞同：3
> 
> 时间：2012-11-15T23:57:33.047
> 
> 标签：c++, scope, class-method, class-reference

好的，从[C++ 进程重新制定和合并，以状态 3 混淆终止](https://stackoverflow.com/questions/13390479/c-process-terminated-with-status-3-confusion)到具有最少代码的单个文件，用“cout”替换我的“日志”引用，打印到控制台而不是文件。我通过 code::blocks 编译器运行它并得到一个不同的错误，但是对于同一行 ['log' is not declared in this scope]。当我在自己的文件中有类时，它只是以“状态 3”关闭程序。

我之前遇到过范围错误，自己修复了它，并认为我理解它，但我想不是......

```
#include <iostream>
#include <string> // Doesn't complain if this is not present...
using namespace std;

//------------------------------------------------------------
class Logfile {
public:
    bool LACT; // Is log file active?
    string value; // Data to be entered

    Logfile();
    ~Logfile();

    void entry(string value); // Make an entry
};

Logfile::Logfile() { // Constructor
    LACT = true;
    cout << "OPENED\n"; 
}

Logfile::~Logfile() {
    cout << "CLOSED\n";
}

void Logfile::entry(string value) {
    if ( LACT ) cout << value << endl;
}

//--------------------------------------------------
class Engine { // Constructor contains only code for this class right now
public :
    Engine();
}; 
```

这一行是编译器挂起并给我错误的地方：

```
Engine::Engine() {
    log.entry("Engine constructed"); // !Problem line!
} 
```

我是否在正确的轨道上认为问题在于我从不同的类中错误地调用了现有对象的类方法？

```
//--------------------------------------------------
int main()
{
    Logfile log;
    Engine engine;

    cout << "Hello world!" << endl;

    return 0;
} 
```

当我'//'有问题的行时，一切运行正常，控制台打印出 OPENED, Hello World!, CLOSED。感谢您的耐心和时间，因为我确信这比我认为的要简单得多——而且是新手。

--

我问这个问题的最初目的是（现在我意识到）从多文件程序中的任何 *.cpp 文件中获取一个全局声明的对象。我刚刚找到了这个答案：[http](http://www.cplusplus.com/forum/beginner/3848/) ://www.cplusplus.com/forum/beginner/3848/ ，以防这可能对其他有类似问题的人有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T00:17:19.320

`log`并且`engine`是完全分开的。两者都无法访问对方。

如果您希望`engine`能够访问 的实例，例如可以通过 setter 或通过的构造函数`Logfile`将其传递给：`engine``Engine`

```
Engine::Engine(Logfile& log) {
    log.entry("Engine constructed");
} 
```

有一些替代方法可以让您拥有一个全局实例`Logfile`（在 的范围之外`main`）。通常全局变量是一个坏主意。变量的生命周期应该减少到可能的最小范围。但是，日志文件可能有资格作为此规则的合理例外。

* * *

为了进一步解释，您可以对日志文件使用单例。使用单例是一个非常有争议的问题。只需搜索单例或双重检查锁定，您就会发现关于危险的大量讨论。

然而，随着 C++11 的出现，事情变得更加安全了。新标准保证本地静态对象的初始化是线程安全的。这使我们可以执行以下操作：

```
class Logfile {
public:
    static Logfile& instance();
    void entry(const string& value) { cout << value << '\n'; }
private:
    Logfile() { cout << "OPENED\n"; }
    ~Logfile() { cout << "CLOSED\n"; }
};

Logfile& Logfile::instance() {
    static Logfile log_file;
    return log_file;
} 
```

请注意，构造函数现在是私有的。获得 a 的唯一方法`Logfile`是通过`instance()`函数，因为它有一个本地 static `Logfile`，所以永远只有一个实例。

然后你可以在里面使用它`Engine()`：

```
Engine::Engine() {
    Logfile::instance().entry("Engine constructed");
} 
```

不过，您仍然需要在这里小心。比如此时VC2012还没有实现C++11所要求的局部静态的线程安全初始化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T00:20:58.627

您需要让 Engine 类知道日志对象在哪里。所以你需要修改你的代码：

```
class Engine { // Core system, contains main loop
public :
    Engine(Logfile& log);

private:
    Logfile& log_;
};

Engine::Engine(Logfile& log):log_(log)
{
    log_.entry("Engine constructed");
} 
```

现在你从 main 调用它：

```
int main(int argc, char *argv[]) 
{
  Logfile log;
  Engine engine(log);
  return 0;
} 
```

顺便说一句：您并没有真正`string value;`在 Logfile 类中使用成员，您可以考虑将其删除。

# android - Android：使用 4.x 日历 API 监控日历通知

> ID：13408354
> 
> 赞同：1
> 
> 时间：2012-11-15T23:57:46.893
> 
> 标签：android, android-calendar

我想使用 android 4.0 向上的日历 API 来监控日历提醒。基本上我想在通知栏中弹出通知时收到一个事件，并且在它被解雇或选择“贪睡”时得到通知。

是否有允许这样做的内容观察者？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T01:25:41.147

这是不可能的。

内容观察者（本质上）用于在游标数据更改时获取通知。

您无法知道日历何时发出通知。发布通知是发布通知的应用程序和系统之间的“私有”事件。当用户关闭通知时，系统会发送一个 Intent。从理论上讲，您可以过滤该 Intent，但如果应用程序没有记录该功能，那么您不能指望它“永远”工作，因此您不应该使用它。

这同样适用于“打盹”。

你有什么理由要困住这个吗？

# jquery - 重新排序列表项 - 剪切 li 元素并在 li:first-child 之后插入

> ID：13408358
> 
> 赞同：2
> 
> 时间：2012-11-15T23:57:56.287
> 
> 标签：jquery, css

我似乎无法解决这个问题...

我需要分离（或删除）一个选定的列表元素，并将其插入到第一个 li 元素 *之后的 ul 中。*

[http://fiddle.jshell.net/PgfEF/](http://fiddle.jshell.net/PgfEF/)

所以我认为这可能有效，但没有；

```
$(this).slice().prependTo('ul.support-items > li:first-child:after'); 
```

任何帮助表示赞赏，谢谢 Cam

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T01:21:50.673

这个怎么样：

```
$('ul.support-items li').click(function(){
    $(this).insertAfter('ul.support-items li:first');
})​ 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/PgfEF/2/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T00:02:36.667

试试这个 `$this.slice().after('ul.support-items');`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T01:12:04.977

这应该有效：

```
$(this).parent().prepend($(this).detach()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T01:18:42.273

制定了一个解决方案，并不优雅，但它有效..

[http://fiddle.jshell.net/PgfEF/1/](http://fiddle.jshell.net/PgfEF/1/)

# javascript - 如何在 Python 子进程终止之前禁用表单字段和按钮？

> ID：13408361
> 
> 赞同：0
> 
> 时间：2012-11-15T23:58:11.780
> 
> 标签：javascript, jquery, python, django, subprocess

我是 JavaScript/jQuery 新手，需要一些帮助。在 Django 应用程序中，我有一个包含两个表单的 HTML 页面。当单击第一个表单的提交按钮时，相应的 Django 视图会启动一个 Python 子进程。第一种形式的字段用于将参数传递给该子流程。第二种形式不包含任何字段。它的唯一目的是在单击其提交按钮时停止相同的子进程。

整个表单提交过程发生在服务器端。我想知道如何使用 jQuery 完成以下行为：

1.  首次加载 HTML 页面时，启用除*停止子流程*按钮之外的所有表单字段和按钮（因为还没有什么可停止的）
2.  *单击启动子流程*按钮时，应禁用表单的字段和按钮本身，直到子流程完成。同时，应该启用*停止子进程按钮。*
3.  *单击停止*子进程按钮时，再次禁用它，直到子进程真正完成。子流程完成后，返回步骤 1。

我一般都知道如何使用 jQuery 来禁用表单元素。我的问题是如何让 jQuery 知道我的子进程的状态。

以下是 Django 视图的相关代码：

```
def process_main_page_forms(request):
    if request.method == 'POST':
        if request.POST['form-type'] == u'webpage-crawler-form':
            template_context = _crawl_webpage(request)

        elif request.POST['form-type'] == u'stop-crawler-form':
            template_context = _stop_crawler(request)
    else:
        template_context = {
            'webpage_crawler_form': WebPageCrawlerForm(),
            'stop_crawler_form': StopCrawlerForm()}

    return render(request, 'main.html', template_context)

def _crawl_webpage(request):
    webpage_crawler_form = WebPageCrawlerForm(request.POST)

    if webpage_crawler_form.is_valid():
        url_to_crawl = webpage_crawler_form.cleaned_data['url_to_crawl']
        maximum_pages_to_crawl = webpage_crawler_form.cleaned_data['maximum_pages_to_crawl']

        program = 'python manage.py crawlwebpages' + ' -n ' + str(maximum_pages_to_crawl) + ' ' + url_to_crawl
        p = subprocess.Popen(program.split())

    template_context = {
        'webpage_crawler_form': webpage_crawler_form,
        'stop_crawler_form': StopCrawlerForm()}

    return template_context

def _stop_crawler(request):
    stop_crawler_form = StopCrawlerForm(request.POST)

    if stop_crawler_form.is_valid():
        with open('scrapy_crawler_process.pid', 'rb') as pidfile:
            process_id = int(pidfile.read().strip())

        # These are the essential lines
        os.kill(process_id, signal.SIGTERM)
        while True:
            try:
                time.sleep(10)
                os.kill(process_id, 0)
            except OSError:
                break
        print 'Crawler process terminated!'

    template_context = {
        'webpage_crawler_form': WebPageCrawlerForm(),
        'stop_crawler_form': stop_crawler_form}

    return template_context 
```

非常感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T00:11:46.377

我会考虑将子进程作为对 django 视图的 Ajax 请求触发，当您触发 Ajax 请求时，还调用您的 JS 方法来禁用所有元素。

当视图完成处理时，它将返回一个对进行 Ajax 调用的 Javascript 的响应。当 javascript 收到此响应时，重新启用所有表单元素。

这将允许您还通过来自 Django 的 Ajax 响应向客户端发送有关处理结果的错误/消息。

我希望我已经正确地理解了你的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T17:08:58.460

首先，您可以像这样设置 jQuery

```
$(document).ready(function() {
  $('#startButton').bind('click', startProcess());
});

var startProcess() = function {
  $('#startButton').unbind('click');
  .ajax({
    url: '',
    data: {},
    dataType: '',
    type: '',
    beforeSend: function() {
      $('#stopButton').bind('click', stopProcess());
    },
    success: function(data) {
      $('#stopButton').unbind('click');             
    },
    error: function(data) {
      // Handle error
    },
    complete: function(data) {
      $('#startButton').bind('click', startProcess());
    },
};

var stopProcess() = function {
  $('#stopButton').unbind('click');

  // Use AJAX to tell django to stop processing

  $('#startButton').bind('click', startProcess());
}; 
```

您可以让 Django 以 success = True 响应，这反过来会触发成功函数。

```
from django.utils import simplejson as json

def json_response(message):
    return HttpResponse(json.dumps(dict(success=True, message=message))) 
```

编辑：我还没有对此进行测试，您还必须在 AJAX 请求中填写详细信息，但我认为它可能会有所帮助。

# ajax - 如何在 wordpress 中 ajax 下一个/上一个帖子？

> ID：13408364
> 
> 赞同：1
> 
> 时间：2012-11-15T23:58:50.993
> 
> 标签：ajax, wordpress, jquery

好的，我一直在这里做一些研究，但我不确定如何解决这个问题，因为大多数 ajax 和 wordpress 主题似乎与我的不同。我几乎有一个网站

[http://dev.touch-akl.com/childsplay/](http://dev.touch-akl.com/childsplay/)

在博客部分，它显示了三个最新的博客，其中包含我想在接下来的 3 个使用 ajax 的帖子中加载的更多内容链接。

我的jQuery如下

```
loadPosts();

function loadPosts(){

        var $loadBtn = $('.ajax-load a');
        var $loadCont = $('#ajax-content');
        var pageTitle = document.title;

        $loadBtn.live("click",function(e){
            e.preventDefault();

            var sourceTarget = '#ajax-content .the-posts';
            $this = $(this);
            pageUrl=$this.attr('href');

            $loadCont.fadeTo(500,0);

            $loadCont.load(pageUrl+" "+sourceTarget, function(){

                $loadCont.fadeTo(500,1);

                        if(window.history.replaceState){
                     document.title = pageTitle;
                     window.history.replaceState(null, pageTitle, pageUrl);
                   }                                

                        //loadJQUERY(sourceTarget);
            }); // end ajax load    

        });     // end click function

} 
```

和html

```
 <div id="ajax-content">
            <div class="the-posts">

                <?php
                // START A QUERY OF THE NEWS ITEM POSTS AND LOOP THAT THANGGGG
                if ( get_query_var('paged') ) $paged = get_query_var('paged');  
                if ( get_query_var('page') ) $paged = get_query_var('page');

                query_posts('posts_per_page=3&paged=' . $paged);

                if (have_posts()) : while (have_posts()) : the_post(); ?>   

                    <article class="three columns">
                        <h3>The Most Recent Post</h3>
                        <img class="blog-image" src="<?php bloginfo('template_url');?>/images/blog/blogs-post.jpg" alt="Childsplay">
                        <p>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text.</p>
                        <a href="#">Read More</a>
                    </article>

            <?php endwhile; ?>

                    <div class="navigation">
                        <span class="left ajax-load"><? previous_posts_link('&larr; More Stuff') ?></span>
                        <span class="right ajax-load"><? next_posts_link('More Stuff &rarr;') ?></span>
                    </div>      

            <?php else : endif; ?> 
            <?php wp_reset_query(); // reset the query ?>   

        </div>
    </div> 
```

即使将永久链接设置为 wordpress 下一篇文章按钮的默认值，它似乎也找不到该页面。

我的ajax方式对wordpress不是很好吗？我见过人们使用其他方式，但我不太了解它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T09:03:06.730

如果您想考虑使用插件，那么有很多。这是我迄今为止发现的。也许这会对你有所帮助这是一步一步的过程[http://www.mygeekpal.com/creating-an-ajax-powered-pagination-in-wordpress/](http://www.mygeekpal.com/creating-an-ajax-powered-pagination-in-wordpress/)

这个也不错，但概念不同[http://wordpress.org/extend/plugins/ajax-pagination/screenshots/](http://wordpress.org/extend/plugins/ajax-pagination/screenshots/)

# paypal - Paypal 集成选项和应用程序

> ID：13408366
> 
> 赞同：0
> 
> 时间：2012-11-15T23:58:56.627
> 
> 标签：paypal

我以前从未使用过贝宝，并且发现大量的帐户类型和错综复杂的文档分布在多个网站上非常难以导航。以下是我正在尝试做的事情，也许有人可以引导我朝着正确的方向前进。

我正在建立一个网站，向客户出售网站上某些内容的访问权限。经常添加新内容。客户不需要购物车，他们一次只会结账一件商品。我可以将客户从我的网站发送到贝宝进行结帐，但我需要包含参数（用户 ID、产品 ID、安全令牌等），这些参数将在成功结帐后返回到我的应用程序，以便我的网站可以自动授予用户访问他们刚刚支付的任何内容的权限。付款完成后，它们也应该自动返回到我的网站。

实现这样的事情的最简单方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T04:14:39.270

根据您的要求 - 您只需要 PayPal 标准产品：[https](https://www.paypal.com/webapps/mpp/merchant) ://www.paypal.com/webapps/mpp/merchant 。使用它，您可以创建简单的 HTML 按钮，您可以在您的网站上托管这些按钮以收取款项。

如果您有兴趣查找有关 API 和其他解决方案的更多信息，可以在此处参考我的博客文章：[https ://www.x.com/developers/community/blogs/praveen/paypal-apis-galaxy-not-so-far -离开](https://www.x.com/developers/community/blogs/praveen/paypal-apis-galaxy-not-so-far-away)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T22:24:03.017

贝宝很棒，但看看这个 [https://gumroad.com/](https://gumroad.com/)

在您的情况下，它可能比 Paypal 更容易。

# python - 在运行时覆盖 __setattr__

> ID：13408372
> 
> 赞同：5
> 
> 时间：2012-11-15T23:59:30.170
> 
> 标签：python

我知道在 Python 中可以在运行时向类添加方法：

```
class Test:
    def __init__(self):
        self.a=5

test=Test()

import types
def foo(self):
    print self.a
test.foo = types.MethodType(foo, test)
test.foo() #prints 5 
```

而且我也知道可以覆盖类定义中的默认**setattr ：**

```
class Test:
    def __init__(self):
        self.a=5
    def __setattr__(self,name,value):
        print "Possibility disabled for the sake of this test"

test=Test() #prints the message from the custom method called inside __init__ 
```

但是，似乎无法在运行时覆盖**setattr**：

```
class Test:
    def __init__(self):
        self.a=5

test=Test()

import types
def __setattr__(self,name,value):
    print "Possibility disabled for the sake of this test"
test.__setattr__ = types.MethodType(__setattr__, test)
test.a=10 #does the assignment instead of calling the custom method 
```

在最后两种情况下， dir(test) 还报告方法**setattr**。但是，虽然在第一种情况下它可以正常工作，但在第二种情况下却不能。请注意，我也可以显式调用它，在这种情况下它可以工作。似乎是这样，虽然方法已定义，但尚未正确映射以覆盖默认分配方法。我错过了什么吗？

顺便说一句，我正在使用 Python 2.7。这个问题主要是学术性的，因为从程序设计的角度来看，做这样的事情可能不是一个好主意，但它仍然值得一个答案——尽管我进行了搜索，但我无法在任何地方找到它的文档。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T00:24:04.147

它记录在[数据模型](http://docs.python.org/2/reference/datamodel.html#the-standard-type-hierarchy)，“类实例”部分：

> 属性分配和删除会更新实例的字典，而不是类的字典。**如果类**有`__setattr__()`or `__delattr__()`方法，则调用此方法而不是直接更新实例字典。

因此，无论是旧式还是新式，这两个检查总是针对类型，而不是实例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T00:12:45.613

请参阅 Python 文档的这一部分：[新样式类的特殊方法查找](http://docs.python.org/2/reference/datamodel.html#special-method-lookup-for-new-style-classes)

> 对于新式类，特殊方法的隐式调用**只有在对象的 type 上定义时才能保证正常工作**，而不是在对象的实例字典中。

按照链接详细说明其背后的基本原理。据我了解，基本思想是适用于实例对象和类型对象（例如`__repr__`）的特殊方法需要一致地调用，而不是有时需要显式参数，有时需要接收隐式参数。通过总是调用对象类型的方法，我们知道总是传递一个显式参数 - 但副作用是实例字典被绕过。

# r - rbind.fill 大数据帧

> ID：13408378
> 
> 赞同：1
> 
> 时间：2012-11-16T00:00:20.667
> 
> 标签：r, csv, plyr

我正在尝试 rbind 具有许多重叠列的大量 csv 文件。

```
library(plyr)

filenames <- list.files("output/", pattern = "*.csv")
filenames = paste("output/", filenames, sep="")
frames = lapply(filenames,read.csv,header=TRUE)
input = do.call(rbind.fill,frames)
write.csv(input, file="stacked.csv", quote=FALSE, na="", row.names=FALSE) 
```

合并后的框架将有大约 300,000 行，列的并集是 3,000 左右，有 104 个文件。这样做我的电脑超过了它的内存限制 (32gb) 并且 R 崩溃了。我还尝试将进程拆分以处理分段内存。再次，没有运气：

```
library(plyr)

filenames <- list.files("output/", pattern = "*.csv")
filenames = paste("output/", filenames, sep="")
input = lapply(filenames,read.csv,header=TRUE)
part1 = do.call(rbind.fill,input[1:30])
save(part1,part2,file="p1")
part2 = do.call(rbind.fill,input[31:70])
part3 = do.call(rbind.fill,input[71:104])

write.table(input, file="stacked.csv", quote=FALSE, na="", row.names=FALSE) 
```

以上只是我所做的一个示例。一旦我将第 1 部分、第 2 部分、第 3 部分加载回内存，它们总共约为 6gb。在保存和加载之前，我的内存使用量约为 20gb。然后我尝试`rbind.fill(part1,part2)`，内存使用量再次飙升 > 32gb。

关于如何解决这个问题的任何建议？我对其他解决方案（python、sql 等）持开放态度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T00:52:59.280

使用非常低的内存但使用磁盘的算法将是：

*   1）读取所有文件的标题以找到唯一的列集，
*   2）逐行处理每个文件：将`NA`s 添加到缺少的列并将该行写入一个大文件。

只有完成后，您才能将该大文件读入您​​的 R 会话（如果它不是太大的话。）

其他语言可能更适合此类任务。Perl 浮现在脑海中。

编辑：如果您有兴趣，这里是使用 Perl 的代码。把它放在一个`rbindfill.pl`文件中并运行如下：`perl rindfill.pl > output.csv`

```
use strict;
use warnings;

my @files = glob "output/*.csv";
my %fields;

foreach my $file (@files)
   {
   open my $fh, '<', $file;
   my $header = <$fh>;
   chomp $header;
   map {$fields{$_} = 1} split ',', $header;
   close $fh;
   }

my @all_fields = keys %fields;
print join(',', @all_fields) . "\n";

foreach my $file (@files)
   {
   open my $fh, '<', $file;
   my $header = <$fh>;
   chomp $header;
   my @fields = split ',', $header;
   foreach my $line (<$fh>)
      {
      chomp $line;
      my $rec;
      @{$rec}{@fields} = split ',', $line;
      print join(',', map { defined $rec->{$_} ? $rec->{$_} : ''} @all_fields) . "\n";
      }
   close $fh;
   } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T09:02:59.867

这是我使用的python代码。它还为文件名添加一列，删除任何无法转换为浮点数的内容（特别是文本字段），并在写入输出文件时跳过一行（包括标题在内的 2 行）。

```
import csv
import glob

files = glob.glob("data/*.txt")
csv.field_size_limit(1000000000)

outfile = "output.csv"

def clean_row(row,filename):
    for k,v in row.items():
        try:
            row[k] = float(v)
        except:
            row[k] = ""
    row['yearqtr'] = filename
    return row

headers = set()
for filename in files:
    with open(filename,"r") as infile:
        reader = csv.reader(infile)
        for header in next(reader):
            headers.add(header)

headers = list(headers)
headers.insert(0,"yearqtr")

with open(outfile, "w") as outfile:
    writer = csv.DictWriter(outfile,headers,restval="",extrasaction="ignore")
    writer.writeheader()
    for filename in files:
        with open(filename, "r") as infile:
            reader = csv.DictReader(infile)
            next(reader)
            writer.writerows((clean_row(row,filename) for row in reader)) 
```

# mvvm - MapOverlay 绑定不起作用

> ID：13408379
> 
> 赞同：3
> 
> 时间：2012-11-16T00:00:20.543
> 
> 标签：mvvm, maps, windows-phone-8

我正在尝试使用 MVVM 代码结构在 Windows Phone 8 上工作的地图叠加层。我似乎无法让 MapOverlay 的 GeoCoordinate 属性正确绑定到我的 ViewModel，我不知道为什么。

XAML 的现状是：

标题：

```
xmlns:maps="clr-namespace:Microsoft.Phone.Maps.Controls;assembly=Microsoft.Phone.Maps" 
```

代码：

```
<maps:Map x:Name="Map"  ZoomLevel="6" Height="500" Width="500" CartographicMode="Terrain" Center="{Binding MapCenter, Converter={StaticResource GpsCoordinateConverter}, Mode=TwoWay}">
    <maps:Map.Layers>
        <maps:MapLayer>
            <maps:MapOverlay PositionOrigin="1,1"  GeoCoordinate="{Binding MapCenter, Converter={StaticResource GpsCoordinateConverter}, Mode=OneWay}">
                <Ellipse Fill="Blue" Height="20" Width="20" Opacity="50" />
            </maps:MapOverlay>
        </maps:MapLayer>
    </maps:Map.Layers>
</maps:Map> 
```

这`GpsCoordinateConverter`只是一个非常简单的类，它将数据类型从我的视图模型更改为`System.Device.Location.GeoCoordinate`地图控件所期望的类型。地图绑定的中心工作正常，但覆盖上的地理坐标不会绑定，蓝色圆圈只是位于地图的左上角。

我已经通过调试验证了 PropertyChanged 事件正在为我的模型触发，因为地图本身的中心正在更新，甚至尝试传递 null 来触发所有字段都无济于事。

我已经检查了调试并且 MapOverlay GeoCoordinate 的属性似乎总是​​为空。我尝试将以下内容添加到代码隐藏中，将圆圈放在我想要的位置，但我似乎无法根据事件发生它......

```
GpsCoordinateConverter converter = new GpsCoordinateConverter();
Map.Layers[0][0].GeoCoordinate = (GeoCoordinate)converter.Convert(((ViewModel.ReportViewModel)DataContext).MapCenter, typeof(GeoCoordinate), null, null); 
```

有谁知道为什么会这样或如何解决这个问题？我不想为此放弃 MVVM 架构。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T10:52:25.500

这是 Silverlight XAML 解析器的限制。作为 XAML 元素属性的一部分初始化的对象将不参与同一逻辑树，因此没有数据上下文深入其中。

为了对新的诺基亚地图控件进行数据绑定，请使用新的[Windows Phone Toolkit](http://phone.codeplex.com)中的 MapExtensions 。例如，这里是[如何使用 MapExtensions 在特定地理坐标中创建](http://phone.codeplex.com/SourceControl/changeset/view/80797#1336302)PushPin。

```
<maps:Map x:Name="Map" Grid.Row="1" Hold="OnMapHold">
    <maptk:MapExtensions.Children>
        <maptk:Pushpin x:Name="RouteDirectionsPushPin" Visibility="Collapsed"/>
        <maptk:MapItemsControl Name="StoresMapItemsControl">
            <maptk:MapItemsControl.ItemTemplate>
                <DataTemplate>
                    <maptk:Pushpin GeoCoordinate="{Binding GeoCoordinate}" Visibility="{Binding Visibility}" Content="{Binding Address}"/>
                </DataTemplate>
            </maptk:MapItemsControl.ItemTemplate>
        </maptk:MapItemsControl>
        <maptk:UserLocationMarker x:Name="UserLocationMarker" Visibility="Collapsed"/>
    </maptk:MapExtensions.Children>
</maps:Map> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T07:33:21.753

要解决此问题，您需要隐式告诉绑定在哪里找到属性，在 MVVM Light 世界中，它看起来像：

```
 <maps:MapOverlay GeoCoordinate="{Binding Main.CurrentLocation, Source={StaticResource Locator}}">
                            <Ellipse Fill="Blue" Height="20" Width="20" Opacity="50" />
                        </maps:MapOverlay> 
```

此外，您将需要 viewmodel 上的调度程序来处理 ui 更改

# c# - 远程服务器返回意外响应：(400)

> ID：13408386
> 
> 赞同：1
> 
> 时间：2012-11-16T00:01:03.267
> 
> 标签：c#, asp.net, wcf

我有一个使用 WCF 服务的 Web 应用程序。我正在尝试通过此 WCF 服务更新存储在云中的数据库中的某些内容，但出现此错误：

远程服务器返回意外响应：(400)

我认为无论 maxRequestLenght 和其他参数有多大，我都会得到 StackOverFlow。

这是一些代码：

更新条目的 WCF 方法：

```
 public void updateMember(Membership member)
    {
        _context.Memberships.ApplyCurrentValues(member);
        _context.SaveChanges();     
    } 
```

我使用 WCF 服务的编辑方法：

```
 [HttpPost]
    public ActionResult Edit(Membership member)
    {
        Guid guid = AcsPrincipal.getGuid();
        Membership model = client.getMember(guid);
        model.Bikes = member.Bikes;
        model.City = member.City;
        model.Comment = member.Comment;
        model.Country = member.Country;
        model.Age = member.Age;
        if (ModelState.IsValid)
        {

            client.updateMember(model);
            return RedirectToAction("Details");
        }
        return View(model);
    } 
```

我在这里卡了几天...

非常感谢！

稍后编辑 WCF web.config

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
<system.diagnostics>
<sources>
  <source name="System.ServiceModel"
          switchValue="Information, ActivityTracing"
          propagateActivity="true">
    <listeners>
      <add name="traceListener"
          type="System.Diagnostics.XmlWriterTraceListener"
          initializeData= "c:\log\Traces.svclog" />
    </listeners>
  </source>
</sources>
</system.diagnostics>
<system.web>
<customErrors mode="Off" />
<httpRuntime maxRequestLength="2147483647" />
<compilation debug="true" targetFramework="4.0">
  <assemblies> 
<add assembly="System.Data.Entity, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
  </assemblies>
 </compilation>
 </system.web>
 <system.serviceModel>
 <bindings>
  <basicHttpBinding>
    <binding name="basicHttpBinding" maxBufferPoolSize="2147483647" maxReceivedMessageSize="2147483647" maxBufferSize="2147483647">
      <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647" maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" />
  </binding>
</basicHttpBinding>
</bindings>

<behaviors>
<serviceBehaviors>
  <behavior>
    <serviceMetadata httpGetEnabled="true" />
    <serviceDebug includeExceptionDetailInFaults="true" />
  </behavior>
</serviceBehaviors>
</behaviors>
<serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
</system.serviceModel>
<system.webServer>
<modules runAllManagedModulesForAllRequests="true" /> 
```

网络应用配置：

```
<?xml version="1.0" encoding="utf-8"?>
<!--
For more information on how to configure your ASP.NET application, please visit
http://go.microsoft.com/fwlink/?LinkId=152368
-->
<configuration>
<configSections>
<section name="microsoft.identityModel" type="Microsoft.IdentityModel.Configuration.MicrosoftIdentityModelSection, Microsoft.IdentityModel, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
</configSections>
<system.diagnostics>
<trace>
  <listeners>
    <add type="Microsoft.WindowsAzure.Diagnostics.DiagnosticMonitorTraceListener, Microsoft.WindowsAzure.Diagnostics, Version=1.8.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" name="AzureDiagnostics">
      <filter type="" />
    </add>
  </listeners>
</trace>
</system.diagnostics>
<appSettings>
<add key="webpages:Version" value="1.0.0.0" />
<add key="ClientValidationEnabled" value="true" />
<add key="UnobtrusiveJavaScriptEnabled" value="true" />
<add key="FederationMetadataLocation" value=" https://exciteaccesscontrol.accesscontrol.windows.net/FederationMetadata/2007-06/FederationMetadata.xml " />
</appSettings>
<location path="FederationMetadata">
<system.web>

  <authorization>
    <allow users="*" />
  </authorization>
</system.web>
</location>
<system.web>
<httpRuntime requestValidationMode="2.0" />
<authorization>
  <deny users="?" />
</authorization>
<authentication mode="None" />
<compilation debug="true" targetFramework="4.0">
  <assemblies>
    <add assembly="System.Web.Abstractions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    <add assembly="System.Web.Helpers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    <add assembly="System.Web.Routing, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    <add assembly="System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    <add assembly="System.Web.WebPages, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    <add assembly="Microsoft.IdentityModel, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    <add assembly="System.Data.Entity, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
  </assemblies>
</compilation>
<!--Commented out by FedUtil-->
<!--<authentication mode="Forms"><forms loginUrl="~/Account/LogOn" timeout="2880" /></authentication>-->
<membership defaultProvider="DefaultMembershipProvider">
  <providers>
    <clear />
    <!--<add name="AspNetSqlMembershipProvider" type="System.Web.Security.SqlMembershipProvider" connectionStringName="ApplicationServices" enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" requiresUniqueEmail="false" maxInvalidPasswordAttempts="5" minRequiredPasswordLength="6" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10" applicationName="/" />-->
    <add name="DefaultMembershipProvider" type="System.Web.Providers.DefaultMembershipProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="ApplicationServices" enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" requiresUniqueEmail="false" maxInvalidPasswordAttempts="5" minRequiredPasswordLength="6" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10" applicationName="/" />
  </providers>
</membership>
<profile defaultProvider="DefaultProfileProvider">
  <providers>
    <clear />
    <!--<add name="AspNetSqlProfileProvider" type="System.Web.Profile.SqlProfileProvider" connectionStringName="ApplicationServices" applicationName="/" />-->
    <add name="DefaultProfileProvider" type="System.Web.Providers.DefaultProfileProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="ApplicationServices" applicationName="/" />
  </providers>
</profile>
<roleManager enabled="true" defaultProvider="DefaultRoleProvider">
  <providers>
    <clear />
    <!--<add name="AspNetSqlRoleProvider" type="System.Web.Security.SqlRoleProvider" connectionStringName="ApplicationServices" applicationName="/" />-->
    <add name="AspNetWindowsTokenRoleProvider" type="System.Web.Security.WindowsTokenRoleProvider" applicationName="/" />
    <add name="DefaultRoleProvider" type="System.Web.Providers.DefaultRoleProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="ApplicationServices" applicationName="/" />
  </providers>
</roleManager>
<pages>
  <namespaces>
    <add namespace="System.Web.Helpers" />
    <add namespace="System.Web.Mvc" />
    <add namespace="System.Web.Mvc.Ajax" />
    <add namespace="System.Web.Mvc.Html" />
    <add namespace="System.Web.Routing" />
    <add namespace="System.Web.WebPages" />
  </namespaces>
</pages>
<!--
        If you are deploying to a cloud environment that has multiple web server instances,
        you should change session state mode from "InProc" to "Custom". In addition,
        change the connection string named "DefaultConnection" to connect to an instance
        of SQL Server (including SQL Azure and SQL  Compact) instead of to SQL Server Express.
  -->
<sessionState mode="InProc" customProvider="DefaultSessionProvider">
  <providers>
    <add name="DefaultSessionProvider" type="System.Web.Providers.DefaultSessionStateProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="DefaultConnection" />
  </providers>
</sessionState>
<httpModules>
  <add name="WSFederationAuthenticationModule" type="Microsoft.IdentityModel.Web.WSFederationAuthenticationModule, Microsoft.IdentityModel, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
  <add name="SessionAuthenticationModule" type="Microsoft.IdentityModel.Web.SessionAuthenticationModule, Microsoft.IdentityModel, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
</httpModules>
</system.web>
<system.net>
<settings>
  <servicePointManager expect100Continue="false" />
</settings>
</system.net>
<system.webServer>
<validation validateIntegratedModeConfiguration="false" />
<modules runAllManagedModulesForAllRequests="true">
  <add name="WSFederationAuthenticationModule" type="Microsoft.IdentityModel.Web.WSFederationAuthenticationModule, Microsoft.IdentityModel, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" preCondition="managedHandler" />
  <add name="SessionAuthenticationModule" type="Microsoft.IdentityModel.Web.SessionAuthenticationModule, Microsoft.IdentityModel, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" preCondition="managedHandler" />
</modules>
</system.webServer>
<runtime>
<assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
  <dependentAssembly>
    <assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35" />
    <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="3.0.0.0" />
  </dependentAssembly>
  </assemblyBinding>
  </runtime>
<microsoft.identityModel>
<service>
  <audienceUris>
    <add value="http://localhost:28547/" />
  </audienceUris>
  <federatedAuthentication>
    <wsFederation passiveRedirectEnabled="true" issuer="https://exciteaccesscontrol.accesscontrol.windows.net/v2/wsfederation" realm="http://localhost:28547/" requireHttps="false" />
    <cookieHandler requireSsl="false" />
  </federatedAuthentication>
  <applicationService>
    <claimTypeRequired>
      <!--Following are the claims offered by STS 'https://exciteaccesscontrol.accesscontrol.windows.net/'. Add or uncomment claims that you require by your application and then update the federation metadata of this application.-->
      <claimType type="http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name" optional="true" />
      <claimType type="http://schemas.microsoft.com/ws/2008/06/identity/claims/role" optional="true" />
      <!--<claimType type="http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier" optional="true" />-->
      <!--<claimType type="http://schemas.microsoft.com/accesscontrolservice/2010/07/claims/identityprovider" optional="true" />-->
    </claimTypeRequired>
  </applicationService>
  <issuerNameRegistry type="Microsoft.IdentityModel.Tokens.ConfigurationBasedIssuerNameRegistry, Microsoft.IdentityModel, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35">
    <trustedIssuers>
      <add thumbprint="363D1B4E8CF16B68C674B0FABEB7A692B52152C0" name="https://exciteaccesscontrol.accesscontrol.windows.net/" />
    </trustedIssuers>
  </issuerNameRegistry>
  <certificateValidation certificateValidationMode="None" />
 </service>
</microsoft.identityModel>
<system.serviceModel>

<behaviors>

  <endpointBehaviors>

    <behavior name="maxItemsInObjectGraphBehaviour">

      <dataContractSerializer maxItemsInObjectGraph="2147483646" />

    </behavior>

  </endpointBehaviors>

</behaviors>

<bindings>
  <basicHttpBinding>
    <binding name="BasicHttpBinding_IService1" allowCookies="true"
             maxReceivedMessageSize="500000000"
             maxBufferSize="500000000"
             maxBufferPoolSize="20000000">
      <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647" maxArrayLength="2147483647"
    maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" />
    </binding>
  </basicHttpBinding>
</bindings>

<client>
  <endpoint address="http://excitewcf.cloudapp.net/Service1.svc"
    binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_IService1"
    contract="Service.IService1" name="BasicHttpBinding_IService1" behaviorConfiguration="maxItemsInObjectGraphBehaviour" />
</client>
</system.serviceModel>
</configuration> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T21:57:33.660

好的，2天后我想通了！

问题是：

_context.Memberships.ApplyCurrentValues（成员）；

现在我之前更新了模型，只是保存了 WCF 中的更改。

# php - 无法通过引用传递参数 2 - uuid PDO

> ID：13408388
> 
> 赞同：9
> 
> 时间：2012-11-16T00:01:16.613
> 
> 标签：php, mysql, pdo

我正在尝试`UUID()`与我的`INSERT`查询一起插入。

```
$handle->beginTransaction();
// Define query
$query = "INSERT INTO users (users_uuid, type_id) VALUES (:uuid, :type_id)";
// Prepare statement
$stmt = $handle->prepare($query);
// Bind parameters
$stmt->bindParam(':uuid',"SELECT UUID()",PDO::PARAM_STR);
$stmt->bindParam(':type_id',1,PDO::PARAM_INT);
// Execute query
$stmt->execute();
$handle->commit(); 
```

此查询返回此错误**Cannot pass parameter 2 by reference ... 在第 51 行**。它指向这条线`$stmt->bindParam(':uuid',"SELECT UUID()",PDO::PARAM_STR);`

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-11-16T00:12:41.430

的第二个参数`bindParam`是通过引用传递的，应该是一个变量。您直接传递了不允许的值。

直接放置`UUID()`在查询中，因为如果它作为参数绑定，它将作为带引号的字符串放置在查询中，并且不会被评估为 UUID 值。

您也可以将其`1`直接放在查询中。或者分配`1`给一个变量，并在绑定参数时将该变量作为第二个参数`:type_id`。

```
$type_id = 1;
$stmt->bindParam(':type_id', $type_id, PDO::PARAM_INT); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T00:07:37.830

在这种情况下无需绑定它，只需将其包含在您的查询中：

```
$query = "INSERT INTO users (users_uuid, type_id) VALUES (UUID(), :type_id)"; 
```

`:type_id`..然后像你​​一样绑定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T00:21:20.540

您的 INSERT INTO 用户 (users_uuid, type_id) 值 (SELECT UUID(), 1)

不是有效的 mysql 查询

尝试先获取 uuid()，然后将值插入用户表

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-01-02T21:24:12.730

如果您要传递一个值，请使用以下命令：

```
$type_id = 1;
$stmt->bindValue(':type_id', $type_id, PDO::PARAM_INT); 
```

如果要绑定参数（传递对变量的引用），请执行以下操作：

```
$stmt->bindParam(':type_id', $type_id, PDO::PARAM_INT);

// now you can update $type_id, since it is a reference, and execute multiple times:
foreach($id as $i){
    $type_id = $i;
    $stmt->execute();
} 
```

# java - 扫描仪、eclipse调试

> ID：13408391
> 
> 赞同：2
> 
> 时间：2012-11-16T00:01:23.257
> 
> 标签：java, eclipse, debugging

当我尝试通过遍历每一行来调试简单的 java 代码时，我可以成功调试它。但是，如果我通过进入每一行来调试它，我最终会得到“找不到源”。

```
import java.util.*;
    public class LocalClass {
        public static void main(String[] args) {

            System.out.println("Hello ! ");
            Scanner scan = new Scanner(System.in);
            String original = scan.next();
            } 
    } 
```

在调试时，我在第 5 行得到错误 - Scanner scan = new Scanner(System.in); 挂起的主线程信息显示“FileNotFoundException”

注意：在浏览了 Eclipse 调试相关问题后，我编辑了源查找路径以指向我的源代码，但仍然没有找到解决方案的机会以白费告终。

有人可以解释这个错误的原因吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T01:58:57.827

我最初的想法是，当您安装 JDK 或任何 JRE Eclipse 碰巧正在使用时，您可能还没有安装源代码。

我知道我没有使用我的 JDK 安装源代码，所以我测试了您包含的代码并重新创建了与您解释的完全相同的错误。

我设法通过以下方式为自己解决了这个问题：

1.  更改 JDK 安装以包含源代码（我在添加/删除程序中使用了“更改”选项）。

2.  我在 Eclipse（Window > Preferences > Java > Installed JREs）中删除并重新添加了 JDK，这会自动正确附加现在包含的源代码。我发现重新添加 JDK 的最简单方法是使用搜索，然后导航到正确的文件夹（例如 C:\Program Files\Java\jdk1.7.0_09）。确保这个新添加的 JRE 是 Eclipse 使用的选定默认值。

第 2 步实际上可能没有必要。我有多个 JRE，并且在某一时刻略有混淆。

这解决了我的问题。如果它不能为您解决问题，我会在这里向您推荐（长但不接受）答案：[Eclipse java 调试：找不到源](https://stackoverflow.com/questions/6174550/eclipse-java-debugging-source-not-found)

# php - PHP 和 MongoDB。如何将php数组转换为javascript对象？

> ID：13408393
> 
> 赞同：1
> 
> 时间：2012-11-16T00:01:31.713
> 
> 标签：php, javascript, mongodb

我有一组报价和复杂查询，其中包含很多字段和排序。任务是在只有一个查询数组和当前文档 ID 的查询结果中找到上一个和下一个文档。所以我正在编写一个 javascript 函数，它执行排序查询并返回两个 ID。问题是将 php 查询数组转换为正确的 javascript 对象。

像这样的东西，例如：

```
$query = array('city' => new MongoId('...'), 'price' => array('$gt' => 100000), ...);
$sort = array('price' => -1);
$code = new MongoCode("function findPrevNext() { db.offer.find($query).sort($sort).forEach(function(obj){ ... }) }"); 
```

我怎样才能进行这样的转换？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T00:12:19.803

要在 JavaScript 中读取此数据，请在 PHP 回显的 JSON 上运行 JavaScript 的 eval() 函数。

编辑：这里有其他人的另一个答案，他们讨论了 json_encode() 在 PHP 中的用法。

对于您将数组转换为 JSON，您将：

```
json_encode($my_array); 
```

要将这些数据解析为 JavaScript 对象，您可以：

```
var myObject = eval(jsonStringFromPHP); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T04:39:47.377

如果使用 运行`PHP >= 5.3.0`，则可以使用`json_encode`并且可以利用`options`参数。

```
json_encode($array, JSON_FORCE_OBJECT); 
```

**JSON_FORCE_OBJECT**

使用非关联数组时输出对象而不是数组。当输出的接收者期待一个对象并且数组为空时特别有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T21:35:33.703

根本不需要使用转换。一切都可以使用标准工具完成：

```
$code = 'function findNext(query, sort, current) { ... }';
$result = $mongo->command(array('$eval' => new MongoCode($code), 'args' => array($query, $sort, new MongoId($offer)), 'nolock' => true)); 
```

# html - 如何使用 CSS 垂直对齐 DIV 中的图像和文本？

> ID：13408394
> 
> 赞同：32
> 
> 时间：2012-11-16T00:01:41.137
> 
> 标签：html, css, image

我在 div 中有一个图像和一些文本，我想使用 CSS 将图像和文本放在 div 的垂直中心。问题是我不知道我会有多少行文本，但文本和图像必须始终位于中间。例如，当只有一行文本时，div 应如下所示：

```
####################################
#  _______                         #
# |       |                        #
# |       |                        #
# | IMAGE |    text text text      #
# |       |                        #
# |_______|                        #
#                                  #
#################################### 
```

如果最终我有更多的行或者文本的高度大于图像的高度，那么图像应该对齐，就像这样：

```
####################################
#                                  #
#              text text text      #
#  _______     text text text      #
# |       |    text text text      #
# |       |    text text text      #
# | IMAGE |    text text text      #
# |       |    text text text      #
# |_______|    text text text      #
#              text text text      #
#              text text text      #
#                                  #
#################################### 
```

我很难获得这种效果，有什么办法不使用javascript来做到这一点？

观察。我所指的 div 的父 div 有 position:relative 所以还有另一个问题。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-11-16T00:10:20.060

为图像和文本都设置一个垂直对齐：中间 - 文本需要包含在一个也是 display: inline 的元素中。所以标记是这样的：

```
<div>
  <span><img src="blah.jpg" /></span>
  <span>text text text</span>
</div>

div {
  display: table;
}

img {
  vertical-align: middle;
  display: table-cell;
}
span {
  vertical-align: middle;
  display: table-cell;
} 
```

应该管用。这是一个要演示的[jsfiddle](http://jsfiddle.net/kq9G8/8/)（编辑过的小提琴以显示所有内容也在容器内垂直对齐。）

编辑：为了获得你想要的行为，我建议使用额外的显示属性——容器的表格和包含的元素的表格单元格。Fiddle 链接已随更改更新。

编辑：我能想到的让它工作的唯一方法是将图像包装在另一个内联容器中，在这种情况下是一个跨度。我已经更新了小提琴来演示。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-16T01:01:06.527

你可以试试这个，[这里的例子](http://jsfiddle.net/DWThr/2/)。

## CSS：

```
div.parent{ 
    border:solid black 1px;
    display:table;
    padding:5px; 
    width:100%;
    margin:5px 0; /* you can change/remove margin */
}
div.text{ 
    vertical-align:middle;
    display:table-cell;
    text-align:justify;
}
div.parent .img{
    vertical-align:middle;
    display:table-cell;
    padding-right:5px;
    width:50px; /* you can change width */
}
div.img img{ 
    width:100%;
    height:50px; /* you can change height */
    vertical-align:middle;
} 
```

​</p>

## ​HTML：

```
<div class="parent">
    <div class="img"><img src="http://example.com.img1.png" /></div>
    <div class="text">Some Text Some.</div>
</div> 
```

# php - Yii - 主管覆盖功能 - 临时验证用户

> ID：13408395
> 
> 赞同：0
> 
> 时间：2012-11-16T00:02:11.537
> 
> 标签：php, authentication, yii

我有一个小问题，我试图绕开我的头。我有一个正在运行的应用程序，当前功能之一是主管覆盖。即，如果请求特定操作，则主管可以输入他们的凭据，该操作将被执行，并且站点返回以前的用户凭据。

这种情况是否可以使用 Yii 框架和 Rights 扩展？以及如何先行的想法将不胜感激..

顺便说一句，我最初的想法是将当前用户的会话保存到数据库中，销毁它并开始一个新会话..

谢谢

**编辑**

适合的情况如下：

1.  吉姆正在为一位客户填写发票。客户要求应用折扣，但 Jim 在系统中没有执行该任务所需的凭据。
2.  作为轮班主管的 Mark 确实拥有正确的凭据，因此他单击主管覆盖按钮，登录并将折扣应用于发票。
3.  吉姆继续完成发票并开始履行职责。

因此，在这种情况下，当 Mark 单击覆盖按钮时，Jim 的会话被破坏，并且允许 Mark 登录站点。任务完成后，Marks 会话被破坏，Jim 被恢复。这是一种在 POS 系统中非常常见的场景，主管可以在系统中进行身份验证以执行单个任务，而无需让之前的用户重新进行身份验证。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T05:07:57.777

您可以执行以下操作，而不是完全销毁会话：

*   在主管登录成功时，如果当前有登录用户，则将登录用户凭据存储在某种“后备”用户帐户中
*   用主管用户模型替换主用户模型
*   允许主管用户执行所需的操作
*   注销时，如果有“后备”用户，而不是破坏会话，将主用户模型替换为“后备”用户模型

那有意义吗？而不是破坏会话（这将需要您的原始用户重新登录），您可以通过交换主管模型所需的任何信息来伪造会话被破坏。

它可能会变得有点脆弱，但破坏会话意味着您无法再访问它......

# html - 我在哪里可以使用 FileSystem API 查看我存储的数据？

> ID：13408398
> 
> 赞同：2
> 
> 时间：2012-11-16T00:02:37.607
> 
> 标签：html, google-chrome, filesystems, storing-data

我已经使用 HTML5 提供的 FILESYSTEM API 成功存储了数据。但是我不知道在哪里可以识别本地存储库中的文件，以便备份存储的数据。我还检查了服务器（Tomcat 7.0）中应用程序的根目录，但找不到该文件。在使用 chrome 开发人员工具时，我检查了数据是否存储成功。

代码是这样的：

```
 window.requestFileSystem  = window.requestFileSystem || window.webkitRequestFileSystem;

            function onInitFs(fs)
            {
                fs.root.getFile('fpslog.txt', {create: false}, function(fileEntry) {

                        // Create a FileWriter object for our FileEntry (log.txt).
                        fileEntry.createWriter(function(fileWriter) {

                          fileWriter.seek(fileWriter.length); // Start write position at EOF.

                             fileWriter.onwriteend = function(e) {
                              console.log('Write completed.');
                            };

                              fileWriter.onerror = function(e) {
                              console.log('Write failed: ' + e.toString());
                            };

                          // Create a new Blob and write it to log.txt.
                          var blob = new Blob(['Hello World'], {type: 'text/plain'});

                          fileWriter.write(blob);

                        }, errorHandler);

                      }, errorHandler);

            }

            window.requestFileSystem(window.TEMPORARY, 5*1024*1024 /*5MB*/, onInitFs, errorHandler); 
```

和错误功能：

```
function errorHandler(e) {
                  var msg = '';

                  switch (e.code) {
                    case FileError.QUOTA_EXCEEDED_ERR:
                      msg = 'QUOTA_EXCEEDED_ERR';
                      break;
                    case FileError.NOT_FOUND_ERR:
                      msg = 'NOT_FOUND_ERR';
                      break;
                    case FileError.SECURITY_ERR:
                      msg = 'SECURITY_ERR';
                      break;
                    case FileError.INVALID_MODIFICATION_ERR:
                      msg = 'INVALID_MODIFICATION_ERR';
                      break;
                    case FileError.INVALID_STATE_ERR:
                      msg = 'INVALID_STATE_ERR';
                      break;
                    default:
                      msg = 'Unknown Error';
                      break;
                  };

                  console.log('Error: ' + msg);
                } 
```

在开发人员工具中，我确实没有看到错误打印，而是说“写入完成”，这意味着我能够在某处创建文件并存储数据。我想访问该数据以进行查看。正如教程已经提到的那样，我没有看到在根文件夹中创建任何文件。请提供任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T17:23:16.397

您还可以使用根目录的`filesystem:`URL 查看文件。在地址栏中打开 `filesystem:<YOUR_ORIGIN>/temporary/`，替换为您的应用程序运行的来源（例如“http://stackoverflow.com”）。

您还可以在实验下的 DevTools 中启用“文件系统检查”。这可能还需要您在`about:flags`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T00:11:55.633

我找到了方法，使用 google chrome[插件](https://chrome.google.com/webstore/detail/html5-filesystem-explorer/nhnjmpbdkieehidddbaeajffijockaea)可以帮助您查看 HTML5 的文件系统 API 的内容。

# c++ - SDL/SDL.h：没有这样的文件或目录

> ID：13408410
> 
> 赞同：1
> 
> 时间：2012-11-16T00:03:59.047
> 
> 标签：c++, eclipse, sdl

我正在按照教程在 Eclipse 中设置 SDL。我已按照此处的所有步骤操作：

[http://www.lazyfoo.net/SDL_tutorials/lesson01/windows/eclipse/index.php](http://www.lazyfoo.net/SDL_tutorials/lesson01/windows/eclipse/index.php)

我必须下载 7zip 才能打开 tar 文件。我根据教程使用 7 zip 复制所有文件。我尝试将 SDL.dll 的副本放在 C:\WINDOWS\SYSTEM32 以及我的 Eclipse 工作区中的项目文件夹中。

当我尝试运行以下代码时：

```
#include "SDL/SDL.h"

int main( int argc, char* args[] )
{
    //Start SDL
    SDL_Init( SDL_INIT_EVERYTHING );

    //Quit SDL
    SDL_Quit();

    return 0;
} 
```

我收到以下编译错误：

..\main.cpp:1:21: SDL/SDL.h: 没有这样的文件或目录 ..\main.cpp: 在函数`int main(int, char**)': ..\main.cpp:6: error:`SDL_INIT_EVERYTHING' 中未声明（首先使用这个函数） ..\main.cpp:6: 错误: (每个未声明的标识符只针对它出现的每个函数报告一次。) ..\main.cpp:6: error: `SDL_Init' undeclared (first use this function) ..\main.cpp:9: error:`SDL_Quit' undeclared (首先使用这个函数)

我尝试用以下内容替换包含语句：

```
#include <SDL/SDL.h> 
```

但这也没有奏效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T00:06:42.893

您是否忘记执行教程中的第 3 步？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T00:07:15.543

这些编译错误是编译器无法找到包含在`main.cpp`.

发生这种情况是因为您没有告诉编译器在哪里可以找到 SDL 标头。尝试传递`-I"path_to_your_SDL_include_directory"`给您的编译器。

# machine-learning - 这个符号是什么意思？

> ID：13408414
> 
> 赞同：0
> 
> 时间：2012-11-16T00:04:44.497
> 
> 标签：machine-learning, symbols

圆圈中的 X。它来自学习理论论文。

我已经看到这意味着 XOR，但我不明白在这种情况下这怎么可能是正确的。

![带圆圈的 X 符号](../Images/b09d931184a00b627264cabb7c73223d.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T00:06:54.180

张量积。有关更多信息，请参见 wiki 页面： [http ://en.wikipedia.org/wiki/Tensor_product](http://en.wikipedia.org/wiki/Tensor_product)

# java - 如何判断 Android 中是否存在 Intent extras？

> ID：13408419
> 
> 赞同：55
> 
> 时间：2012-11-16T00:05:52.873
> 
> 标签：java, android, android-intent

我有这段代码可以检查从我的应用程序中的许多地方调用的 Activity 的 Intent 中的额外值：

```
getIntent().getExtras().getBoolean("isNewItem") 
```

如果 isNewItem 没有设置，我的代码会崩溃吗？在我调用它之前，有什么方法可以判断它是否已设置？

处理这个问题的正确方法是什么？

* * *

## 回答 #1

> 赞同：118
> 
> 时间：2012-11-16T00:39:29.853

正如其他人所说，两者都`getIntent()`可能`getExtras()`返回null。因此，您不想将调用链接在一起，否则您最终可能会调用`null.getBoolean("isNewItem");`这将引发 a`NullPointerException`并导致您的应用程序崩溃。

以下是我将如何完成此任务。我认为它的格式最好，并且可能正在阅读您的代码的其他人很容易理解。

```
// You can be pretty confident that the intent will not be null here.
Intent intent = getIntent();

// Get the extras (if there are any)
Bundle extras = intent.getExtras();
if (extras != null) {
    if (extras.containsKey("isNewItem")) {
        boolean isNew = extras.getBoolean("isNewItem", false);

        // TODO: Do something with the value of isNew.
    }
} 
```

如果额外不存在，您实际上不需要调用`containsKey("isNewItem")`as将返回 false 。`getBoolean("isNewItem", false)`您可以将上述内容浓缩为以下内容：

```
Bundle extras = getIntent().getExtras();
if (extras != null) {
    boolean isNew = extras.getBoolean("isNewItem", false);
    if (isNew) {
        // Do something
    } else {
        // Do something else
    }
} 
```

您还可以使用这些`Intent`方法直接访问您的附加功能。这可能是最干净的方法：

```
boolean isNew = getIntent().getBooleanExtra("isNewItem", false); 
```

实际上这里的任何方法都是可以接受的。选择一个对你有意义的，然后这样做。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2016-11-10T09:47:53.723

你可以这样做：

```
Intent intent = getIntent();
if(intent.hasExtra("isNewItem")) {
   intent.getExtras().getBoolean("isNewItem");
} 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-11-16T00:15:26.143

问题不在于`getBoolean()`但`getIntent().getExtras()`

以这种方式测试：

```
if(getIntent() != null && getIntent().getExtras() != null)
  myBoolean = getIntent().getExtras().getBoolean("isNewItem"); 
```

顺便说一句，如果`isNewItem`不存在，它会返回 de default vaule `false`。

问候。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-16T00:15:54.070

`getIntent()``null`如果没有那么用会返回`Intent`...

```
boolean isNewItem = false;
Intent i = getIntent();
if (i != null)
    isNewItem = i.getBooleanExtra("isNewItem", false); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-16T00:17:04.117

除非您使用它，否则它不会崩溃！如果它存在，您不必获取它，但如果您出于某种原因尝试使用不存在的“额外”，您的系统将崩溃。

所以，尝试做类似的事情：

```
final Bundle bundle = getIntent().getExtras();

boolean myBool=false;

if(bundle != null) {
    myBool = bundle.getBoolean("isNewItem");
} 
```

这样您就可以确保您的应用程序不会崩溃。（并确保你有一个有效的`Intent`:)）

# java - 日期格式化程序产生奇怪的输出

> ID：13408420
> 
> 赞同：1
> 
> 时间：2012-11-16T00:06:02.820
> 
> 标签：java, date-format

```
 public static void main(String[] args) throws ParseException {
        List<String> strd = new ArrayList<>();
        List<Date> date = new ArrayList<>();
        strd.add("Sun May 11 03:17:40 UTC 2009");
        strd.add("Wed Jun 11 03:17:40 UTC 2008");
        strd.add("Mon May 11 03:17:40 UTC 2009");
        strd.add("Mon Jun 11 03:17:40 UTC 2009");
        strd.add("Sun Jun 11 03:17:40 UTC 2009");
        List<Character> letters = new ArrayList<>();
        char letter;
        for (letter = 'A'; letter <= 'Z'; letter++) {
            letters.add(letter);
        }
        List<String> dateToChar = new ArrayList<>();

        for (int j = 0; j < strd.size(); j++) {
            try {
                String strDate = strd.get(j);
                // String strDate = "Mon May 11 03:17:40 UTC 2009";
                SimpleDateFormat formatter = new SimpleDateFormat("EEE MMM dd HH:mm:ss zzz yyyy", Locale.US);
                Date dateStr = formatter.parse(strDate);
                String formattedDate = formatter.format(dateStr);
                System.out.println("Date is ==>" + formattedDate);
                Date date1 = formatter.parse(formattedDate);
                date.add(date1);
            } catch (ParseException e) {
                System.err.print(e);
            }
        }

        for (int k = 0; k < date.size(); k++) {
            for (int h = 1; h < date.size(); h++) {
                if (k != h && k < h) {
                    if (date.get(k).equals(date.get(h))) {
                        System.out.println("Equal dates");                        
                    } else {

                        System.out.println("Not Equal dates");
                    }
                }
            }
        }        
    }
} 
```

我的问题是，当我进行解析时，输出是：

```
Date is ==>Mon May 11 03:17:40 UTC 2009
Date is ==>Wed Jun 11 03:17:40 UTC 2008
Date is ==>Mon May 11 03:17:40 UTC 2009
Date is ==>Thu Jun 11 03:17:40 UTC 2009
Date is ==>Thu Jun 11 03:17:40 UTC 2009
Not Equal dates
Equal dates
Not Equal dates
Not Equal dates
Not Equal dates
Not Equal dates
Not Equal dates
Not Equal dates
Not Equal dates
Equal dates 
```

为什么？我无法理解原因！最后的日期是错误的，但只有最后的日期。例如，如果我更改日期，则输出再次错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T00:22:52.637

我相信您被自己的输入误导了：

```
strd.add("Sun May 11 03:17:40 UTC 2009");
strd.add("Mon May 11 03:17:40 UTC 2009"); 
```

2009 年 5 月 11 日是星期一。据我所知（但找不到任何来源），一周中的一天被一个月中的一天所覆盖。因此，您在解析为星期一后更改了星期日。

然后一切看起来都是正确的。在您的循环中，日期相等的唯一地方是：

```
k=0; h=2;
Date is ==>Mon May 11 03:17:40 UTC 2009 
```

在循环中：

```
k=3; h=4; 
Date is ==>Thu Jun 11 03:17:40 UTC 2009 
```

我不知道你是否故意这样做，但一个日期是**2008 年**：

```
Date is ==>Wed Jun 11 03:17:40 UTC 2008 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T00:34:09.693

由于日期解析器没有使用星期几，因此打印输出中的结果对我来说是正确的。如果两个字符串之间的唯一区别是星期几，那么它们将解析为相同的日期值。

第一次通过循环：

```
"Sun May 11 03:17:40 UTC 2009" vs "Wed Jun 11 03:17:40 UTC 2008" == not equal month
"Sun May 11 03:17:40 UTC 2009" vs "Mon May 11 03:17:40 UTC 2009" == equal (DoW ignored)
"Sun May 11 03:17:40 UTC 2009" vs "Mon Jun 11 03:17:40 UTC 2009" == not equal month
"Sun May 11 03:17:40 UTC 2009" vs "Sun Jun 11 03:17:40 UTC 2009" == not equal month 
```

第二次通过循环：

```
"Wed Jun 11 03:17:40 UTC 2008" vs "Mon May 11 03:17:40 UTC 2009" == not equal month
"Wed Jun 11 03:17:40 UTC 2008" vs "Mon Jun 11 03:17:40 UTC 2009" == not equal year
"Wed Jun 11 03:17:40 UTC 2008" vs "Sun Jun 11 03:17:40 UTC 2009" == not equal year 
```

第三次通过循环：

```
"Mon May 11 03:17:40 UTC 2009" vs "Mon Jun 11 03:17:40 UTC 2009" == not equal month
"Mon May 11 03:17:40 UTC 2009" vs "Sun Jun 11 03:17:40 UTC 2009" == not equal month 
```

第四次也是最后一次通过循环：

```
"Mon Jun 11 03:17:40 UTC 2009" vs "Sun Jun 11 03:17:40 UTC 2009" == equal (DoW ignored) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T00:38:16.797

关于错误的日期，这是因为您使用的日期名称不是有效日期。以最后一个为例`Sun Jun 11 03:17:40 UTC 2009`。查一下日历，就是`Thu`那个日期。解析器知道这一点并输出正确的日期。

现在循环，如果你一步一步地跟随它，它没有错误，你会看到输出是正确的，因为它会检查`List` `date`自身。

最后，如果您使用的是 Java 6 或更早版本，则代码中的强制转换存在一些问题：

```
List<Date> date = new ArrayList<>(); 
```

不是真正有效的，而是应该是

```
List<Date> date = new ArrayList<Date>(); 
```

（感谢@Reimeus 指出这在 Java 7 中有效）

# c# - 如何修改另一个窗口的背景颜色？

> ID：13408422
> 
> 赞同：2
> 
> 时间：2012-11-16T00:06:17.030
> 
> 标签：c#, .net, winforms

假设您有一个只是一个红色窗口的第 3 方应用程序。获得窗口句柄后，是否有一种简单的方法可以更改其颜色？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T00:58:02.980

到目前为止我能想到的最好的方法是使用`Graphics.FillRectangle`

```
Graphics g = Graphics.FromHwnd(handle);
g.FillRectangle(Brushes.Green, new Rectangle(0, 0, 10000, 10000)); 
```

完整的winform工作示例：

```
 public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            foreach (var p in Process.GetProcesses())
            {
                if (p.MainWindowTitle.Contains("Window Name"))
                {
                     IntPtr handle = p.MainWindowHandle;
                    if ((int)handle != 0)
                    {
                        Graphics g = Graphics.FromHwnd(handle);
                        g.FillRectangle(Brushes.Green, new Rectangle(0, 0, 10000, 10000));
                    }

                }
            }
        }
    } 
```

您还可以尝试使用[GetWindowRect](http://www.pinvoke.net/default.aspx/user32/getwindowrect.html)获取窗口大小信息，如下所述：[Get A Window's Bounds By Its Handle](https://stackoverflow.com/questions/6415222/get-a-windows-bounds-by-its-handle)
以避免使用 10000 作为宽度和高度。

# c++ - 我可以让 C++ 编译器决定是按值传递还是按引用传递？

> ID：13408423
> 
> 赞同：15
> 
> 时间：2012-11-16T00:06:39.870
> 
> 标签：c++, performance, compiler-construction, pass-by-value, pass-by-const-reference

看看这个假设的头文件：

```
template <class T>
class HungryHippo {
public:
    void ingest(const T& object);
private:
    ...
} 
```

现在，`HungryHippo<string>`您想要`ingest`引用字符串是有道理的——复制字符串可能非常昂贵！但对于 a`HungryHippo<int>`来说，它的意义不大。直接传递 an`int`可能真的很便宜（大多数编译器会在寄存器中这样做），但是传递对 an 的引用`int`是额外不必要的间接级别。这也适用于返回值。

有没有办法向编译器建议“嘿，我不打算修改参数，所以*你*决定是通过值还是通过引用传递，这取决于你认为什么更好”？

一些可能相关的事情：

*   我可以通过编写`template <class T, bool PassByValue> class HungryHippo`然后专注于`PassByValue`. 如果我想变得非常花哨，我什至可以`PassByValue`根据`sizeof(T)`and来推断`std::is_trivially_copyable<T>`。无论哪种方式，当实现看起来几乎相同时，这都是很多额外的工作，而且我怀疑编译器可以比我更好地决定是否通过值传递。
*   ~~[libc++](http://libcxx.llvm.org)项目似乎通过内联许多函数来解决这个问题，因此编译器可以向上一级做出选择，但在这种情况下，假设 的实现`ingest`相当复杂，不值得内联。~~正如评论中所解释的，所有模板函数都是`inline`默认的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-16T00:22:56.897

标题`boost::call_traits`正是处理这个问题。[在这里](http://www.boost.org/doc/libs/1_52_0/libs/utility/call_traits.htm)查看。

具体来说，该`call_traits<T>::param_type`选项包括以下描述：

> 如果`T`是小型内置类型或指针，则`param_type`定义为`T const`，而不是`T const&`。如果它们依赖于传递的参数，这可以提高编译器优化函数体中的循环的能力，否则传递参数的语义不变（需要部分特化）。

在您的情况下，您可以定义`ingest`如下：

```
template <class T>
class HungryHippo {
public:
    void ingest(call_traits<T>::param_type object);
    // "object" will be passed-by-value for small 
    // built-in types, but passed as a const reference 
    // otherwise
private:
    ...
}; 
```

我不确定这是否会对您的实际代码/编译器组合产生很大影响。与往常一样，您必须运行一些实际的基准测试，看看会发生什么......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T01:53:48.873

虽然提到的诸如 boost 之类的技巧`call_traits<T>`在这种情况下可以做到他们声称要做的事情，但我认为您假设编译器尚未在最重要的情况下进行此优化。毕竟，这是微不足道的。如果您接受`const T&`and `sizeof(T) <= sizeof(void*)`，则 C++ 引用语义强加的不变量允许编译器简单地替换整个函数体中的值（如果它是胜利的话）。如果不是，那么最坏情况的开销是函数序言中的一个指向参数的取消引用。

# javascript - Mustache.js 递归

> ID：13408425
> 
> 赞同：10
> 
> 时间：2012-11-16T00:06:46.373
> 
> 标签：javascript, node.js, mustache

我正在尝试使用 Mustache.js 构建一个 html 树，但它无法抛出“超出最大调用堆栈大小”，可能是因为无限递归。

怎么了？

```
var Mustache = require('mustache');

var root = {
    title: 'Gar1',
    children: [{title: 'gar2'}, {title: 'gar3', children: [{title: 'gar4'}]}]
};

var panelTemplate = '{{title}}<ul>{{#children}}<li>{{>panel}}</li>{{/children}}</ul>';

var partials = {panel: panelTemplate};
var output = Mustache.render(panelTemplate, root, partials);

console.log(output); 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-27T20:46:57.943

The problem is inherent to the implementation in Mustache.js (disclaimer: not sure if the problem is in the spec itself) as the algorithm looks for a property on its *parent* when it can't find it on the current context.

To explain it briefly: code runs on your template, outputs `Gar1<ul>` and finds a `{{#children}}` tag. Since your context has a children tag it outputs the `<li>` and invokes the partial which will now run on the inner context `{title: 'gar2'}`. When Mustache reaches your `{{#children}}` tag again, it now finds out that the current context has no `children` property, thus it goes one level up where it actually finds your children property and starts recursing (is this a real word?) again on itself like mad.

Two possible solutions:

**1 -** modify your data so that all entries have a `children` property, and when a node should have no children set it to `false` or `null` (not an empty array) like this:

```
var root = {
    title: 'Gar1',
    children: [{title: 'gar2', children: false}, {title: 'gar3', children: [{title: 'gar4', children: false}]}]
}; 
```

**2 -** use Handlebars instead of Mustache, and wrap the `<ul>` in an `{{#if children}}` tag.

Hope this helps, I know the answer is a bit late since this has been asked.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-19T20:09:32.437

这是一个需要递归的对象。

### 目的

```
var obj = [
    {
        obj: true,
        key: 'a',
        value: [
            {
                obj: false,
                key: 'a',
                value: 1
            },
            {
                obj: false,
                key: 'b',
                value: 2
            },
            {
                obj: true,
                key: 'c',
                value: [
                    {
                        obj: false,
                        key: 'a',
                        value: 3
                    }
                ]
            }
        ]
    },
    {
        obj: false,
        key: 'b',
        value: 4
    }
]; 
```

### 模板（recursion.html）。

```
<!-- root -->
<ul>
    {{#value}}
    <li>
        <!-- object -->
        {{#obj}}
        <span><b>{{key}}</b></span>
        {{>object}}
        {{/obj}}
        <!-- value -->
        {{^obj}}
        <span><b>{{key}}</b> <span>{{value}}</span></span>
        {{/obj}}
    </li>
    {{/value}}
</ul> 
```

您传入的第一个对象是根，它`key`不仅有一个`value`. 如果`value`有一个属性`obj`设置，`true`那么它是一个对象，打印出它的键并再次递归调用模板以获得它的值。如果不是对象，则不需要递归，只需打印出来。

### 渲染客户端。

```
// html is recursion.html contents
var template = Hogan.compile(html),
    content = template.render({value: obj}, {object: html});
// show the rendered template
$('body').empty().append(content); 
```

### 使用 Express.js 渲染服务器端

```
res.render('recursion', {
    value: obj,
    partials: {
        object: 'recursion'
    }
}); 
```

### 这个例子的输出

### [http://jsfiddle.net/simo/GYjMY/](http://jsfiddle.net/simo/GYjMY/)

顺便说一句，我正在使用 Hogan.js 来呈现模板。我不知道 Mustache.js 渲染是否支持递归。

# visual-studio - 公共库 nuget 包与 tfsbuild 服务器集成

> ID：13408426
> 
> 赞同：1
> 
> 时间：2012-11-16T00:06:48.543
> 
> 标签：visual-studio, tfs, nuget, tfsbuild

这个问题是来自:: [how to handle a common library in TFS & share dlls](https://stackoverflow.com/questions/13000894/how-to-handle-a-common-library-in-tfs-share-dlls)

我决定采用使用 nuget 包与其他项目共享我的公共库的方法。我已将其与 tfs 构建服务器集成，在该服务器中创建包并在构建完成时将其移动到共享位置。

我有点困惑这如何在本地工作。特别是，假设我在本地处理公共库，构建它，创建包。我想在我的本地项目中使用它。我是否从本地创建包的位置安装包？还是在 tfs 构建服务器上？我的偏好是，本地开发引用本地包，但是当我将其签入 tfs build 服务器时，它会从 tfs build 中的公共库包位置选择包。我知道这很令人困惑，但想要完美的包分发系统！

另一件事，在本地调试包是多么容易，当我对 common 进行更改时，如果可能的话，我希望能够调试本地包。可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T07:16:55.110

您可能想要做的是通过 TFS 构建服务器将最新的“通用”包推送到中央包存储库（自托管或 www.myget.org）。您要确保构建服务器也推送符号包（例如，到 SymbolSource.org）

之后，每个项目都可以从创建的包存储库中使用这个通用包。Visual Studio 需要时会自动下载调试符号。

# vb.net - linq 到使用两个表的实体

> ID：13408428
> 
> 赞同：1
> 
> 时间：2012-11-16T00:06:54.080
> 
> 标签：vb.net, linq

已编辑：我正在检索一些订单数据，并尝试使用第一个表中的 productID 从另一个表中获取产品描述。下面的代码工作正常，但我需要使用 productid 查询产品表以获取字符串、产品描述

```
 Dim result = From c In ctx.orders
                         Where c.CustomerId = 13
                Select New With
                {c.OrderDate,
                 c.PurchaseOrderNumber,
                 c.ProductId,
                 c.ProductPrice,
                 c.ProductQty} 
```

我尝试了以下建议并使用此方法得到“名为 productid 的字段或属性不存在”错误

```
 Dim result = From c In ctx.orders
                         Where c.CustomerId = 13
                  Join prod In ctx.products on c.ProductId Equals prod.Id
                Select New With
                {c.OrderDate,
                 c.PurchaseOrderNumber,
                 prod.Description,
                 c.ProductPrice,
                 c.ProductQty} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T00:11:16.620

为什么不用[join算子C#版](http://msdn.microsoft.com/en-us/library/bb311040.aspx)和[join算子VB版](http://msdn.microsoft.com/en-us/library/bb918093.aspx)

```
Dim result = From c In ctx.orders
             Join prod In ctx.products On c.ProductId Equals prod.Id
             Where c.CustomerId = custid
             Select New With
                    {c.OrderDate,
                      prod.Description
                     c.ProductPrice,
                     c.ProductQty} 
```

我制作了一个示例类来测试连接，并且效果很好。你确定它加载了产品表并且它具有属性吗？

```
Module Module1

Sub Main()
    Dim ctx As List(Of X) = New List(Of X)
    Dim x1 As X = New X()
    x1.One = 1
    x1.Two = 2
    Dim x2 As X = New X()
    x2.One = 10
    x2.Two = 20
    ctx.Add(x1)
    ctx.Add(x2)

    Dim ctx2 As List(Of Y) = New List(Of Y)
    Dim y1 As Y = New Y()
    y1.Three = 1
    y1.Four = 2
    Dim y2 As Y = New Y()
    y2.Three = 10
    y2.Four = 20
    ctx2.Add(y1)
    ctx2.Add(y2)

    Dim result = From c In ctx
         Join prod In ctx2 On c.One Equals prod.Three
         Where c.One = 1
         Select New With
                {c.One,
                 prod.Four,
                 c.Two}

    For Each a In result
        Console.Beep()
    Next

    Console.Read()
End Sub

Class X
    Public Property One As Integer
    Public Property Two As Integer
End Class

Class Y
    Public Property Three As Integer
    Public Property Four As Integer
End Class

End Module 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T01:32:16.037

为什么不使用这个： Dim result = From c In ctx.orders .Where(c => c.CustomerId = 13) .SelectMany(c => c.products); 然后您将获得订单中的所有产品。

# ios - iOS 报亭推送通知

> ID：13408429
> 
> 赞同：2
> 
> 时间：2012-11-16T00:07:01.217
> 
> 标签：ios, push-notification, apple-push-notifications, newsstand-kit

我有一个报亭应用程序，并且正在成功发送报亭通知以触发新问题的下载。此通知使用“内容可用”：1。

我注意到的是，对于那些未连接到 WiFi 的设备，没有任何反应。我了解自动下载仅适用于连接到 WiFi 的设备。

推送通知格式为

```
{
  "aps":{
    "sound":"default",
    "content-available":1,
    "badge":0,
    "alert":"{{ title }} is now available"
},
  "issue":{
    "url":"{{ url }}",
    "name":"{{ title }}"
  }
} 
```

我至少希望为那些未连接到 WiFi 的设备显示警报。我是否需要发送另一个没有“内容可用”的通知：1？

对于连接到 WiFi 的设备，下载问题时会显示警报。如果我可以避免它，我宁愿不发送两个通知，因为这会显示 WiFi 连接设备的两个通知（一个说有一个新问题，然后再过一会儿说它已下载）。

# performance - 尝试在 Microsoft Access 中制作高效的日历

> ID：13408430
> 
> 赞同：4
> 
> 时间：2012-11-16T00:07:11.363
> 
> 标签：performance, vba, ms-access, listbox, calendar

我正在开发一个设备管理系统，前端使用 MS Access .mdb 文件，后端使用 SQL Server 2008。如果需要，我可以将前端转换为 MS Access 2010 文件。

我创建了一个日历表单，用户可以在其中查看预订、退出或过期的设备。它看起来像这样：

![在此处输入图像描述](../Images/ec275e9fcb2de58e0431a075b717face.png)

我使用 42 个子表单制作了这个，不幸的是这很慢。使用上面显示的数据，加载只需要大约 5 秒，但是一旦我使用真实数据，它就开始真正陷入无法接受的困境。我试图通过将子表单的源对象保持空白直到它们显示出来来提高效率，并且直到此时才加载记录源。这足以使上面看到的示例运行得相当快，但对于真实数据来说仍然不够。

所以我想做的是，要么找到一种在仍然使用子窗体的同时提高效率的方法，找到另一个代替子窗体工作的控件，或者用列表框切换子窗体，但不知何故仍然能够格式化颜色的行。我知道这对于列表框来说是不可能的，但我是一名程序员，如果不会浪费我太多时间，我愿意尝试子类化列表框来做到这一点。不幸的是，我从来没有做过任何 vba 子类化，所以我需要指出一些好的资源才能这样做。

设置每天子窗体的记录源的代码如下：

```
f("sub" & X & Y).Form.RecordSource = "SELECT * " & _
                                     "FROM QRY_Calendar " & _
                                     "WHERE CDate(StartDate) <= #" & curDate & "# " & _
                                     "AND ((EndDate IS NULL OR CDate(EndDate) >= #" & curDate & "#)" & _
                                     IIf(CDate(curDate) <= Date, " OR ((Date_In IS NULL OR CDate(Date_In) >= #" & curDate & "#) AND Date_Out IS NOT NULL)", "") & ") " & _
                                     "ORDER BY IIF(Date_Out Is Not Null And (Date_In Is Null Or CDate2(Date_In)>=#" & curDate & "#) And CDate2(EndDate)<#" & curDate & "#,0,iif(CDate2(Date_Out)<=#" & curDate & "# And (Date_In Is Null Or CDate2(Date_In)>=#" & curDate & "#),1,2)), ID" 
```

QRY_Calendar 看起来像这样：

```
SELECT B.ID, Person, Initials, ProjectNum & '-' & ProjectYear & '-' & Format(TaskNum,'000') AS Project, Sign_Out_Code, Value AS Type, StartDate, EndDate, Date_Out, Date_In
FROM (((TBL_Booking AS B INNER JOIN TBL_Person AS P ON B.PersonID = P.ID) INNER JOIN LKUP_List AS T ON B.EquipTypeID = T.ID) LEFT JOIN TBL_Usage AS U ON B.ID = U.BookingID) LEFT JOIN TBL_Equipment AS E ON U.Equipment_ID = E.ID; 
```

表 TBL_Booking 中的 StartDate 和 EndDate 是预订的开始和结束，表 TBL_Usage 中的 Date_Out 和 Date_In 是注销的开始和结束。每个注销都通过外键 BookingID 链接到预订。如果 Date_In 为 NULL，则表示设备当前已注销。

LKUP_List 是我几年前开始工作之前的一个名称不佳的表，我从来没有费心去改变它。它包含设备类型的列表（除其他外）。预订是针对设备类型而非特定项目的，当用户注销其设备时，会在 TBL_Usage 中创建一条与特定设备相关联的记录。

如果有人对我应该采取哪个方向以及我可以在哪里寻求指导有任何想法，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T00:11:12.533

首先，42 个子表单的加载速度非常快，事实上我已经这样做了很多年，42 个子表单的加载时间实际上是瞬时的。

因此，这表明这里的读者可以忽略这里的一些评论，这些评论表明，与具有 NEAR 直接能力的 Windows 高性能桌面应用程序相比，基于脚本或基于文本的解释系统（如 HTML）在某种类型的浏览器渲染系统中运行速度更快直接写入视频显卡。

请记住，如果您了解 Windows 桌面应用程序可以直接写入视频卡的简单和基本知识，那么很少有人会尝试比较并建议如果我们要比较 HTML 中的渲染系统在速度方面比较这里有两种不同的架构。

所以这里真正的问题是can日历可以运行多快，42个子表单会是个问题吗？

答案很简单，42 个子表格不是问题，而且速度很快！

我的以下 Access 日历几乎立即呈现。

![在此处输入图像描述](../Images/186116bd12bc11e65ea737924b3863f4.png)

即使在生产环境中，我的上述 Access 日历也已使用多年。即使日历每天都有更多无法显示在屏幕上的数据，加载时间也是即时的。其中很多正在运行，其中桌面（客户端）通过标准 Internet 连接到在网站上运行的 SQL Server 的托管版本访问 SQL Server 后端。即使在这种带宽更有限的情况下，日历的加载时间和响应也几乎是即时的。因此，无论我是否使用 accDB（基于文件）后端、使用 SQL 服务器作为后端，甚至更令人惊奇的是，该表单都可以很好地与我的许多通过常规 Internet 运行此 Access 日历的客户配合使用后端是在托管网站上运行的 SQL 服务器的连接。

上面的设计有 42 个子表单，正如没有数据所指出的，子表单加载绝对接近即时。说明这一点很重要，因此我提供了一些现实世界和事实证据来贬低那些显然不掌握和理解基本计算机体系结构的人在这里发表的其他评论。因此，这些人会建议加载 42 个子表单在某种程度上会降低软件速度，而事实上我可以很容易地证明情况并非如此。因此，这里其他人的证人和证词可以被证明是没有价值的，因此这种观点是基于对计算机的基本操作如何在我们的行业中工作缺乏了解。HTML 无法与此处的此类设置进行比较。

现在谈到基于 Web 的 Access 允许 Web 发布，然后我发布了以下视频，其中包含在 Web 浏览器中运行的 Access 内置日历。这个基于浏览器的日历仅使用 Access 构建，没有任何第三方工具。

[http://www.youtube.com/watch?v=AU4mH0jPntI](http://www.youtube.com/watch?v=AU4mH0jPntI)

上述视频的结果显示了此日历应用程序的黄油平滑和即时响应的基于 Web 的版本。

现在我应该指出，在上述基于 Web 的示例中，我不使用 42 个子表单，因为在 Web 浏览器中，每个表单都是一个单独的框架，并导致重新呈现从服务器发送的表单。这意味着对于基于 42 个子表单的设计的 Access web 是不可能的。您将在渲染方面遭受巨大的性能损失（即使没有数据，因为 XMAL 表单是按需加载的以节省时间，但在这种情况下，这种设置会受到伤害）。

但是，正如视频所示，基于 Web（也适用于基于客户端）的解决方案是填写一个表格，在该表格中将文本框绑定到该表格。因此，具有一个记录显示正如上面的视频中所指出的那样，并且显示了这样的结果意味着接近即时的响应，并且即使在网络浏览器中也是如此。

我强调基于 WEB 的应用程序，因为该视频是仅使用 Access 构建的，没有其他工具。

现在回到性能问题和基于客户端的应用程序。当然，我们现在知道加载 42 个子表单不是问题。

当然，问题是运行 42 个单独的 SQL 查询，使用各种表达式将数据提取到这些子表单中，这是瓶颈和性能下降的地方。因此，如果我们使用 42 个文本框，甚至 42 个列表框，这个性能问题不会改变。

所以问题在于尝试执行 42 个单独的 SQL 查询。请记住，每个 SQL 查询都需要时间来解析、检查语法，然后构建查询计划等。事实上，在数据甚至开始为那个给定查询流动之前，必须发生相当多的操作。事实上，我发现一个查询在带宽方面可能是大约 10,000 行数据流的成本。

基于以上信息，我设计的这 42 个子表单之所以可以立即加载和执行，是因为我只执行一个查询来返回整个月的数据。换句话说，我使用显示的开始日期和结束日期执行查询。然后，我运行 VBA 代码将生成的 reocrdset 中的数据处理为子表单 1 到 42。因此，VBA 代码将生成的记录集数据填充到 42 个子表单中。因此，这是确保高性能计算且不会减速的关键概念和建议。

所以总结和总结：

性能瓶颈不是使用 42 个子表单，而是拥有 42 个记录集和 42 个查询，以及可能需要计算 42 次的附加代码和表达式。消除 42 次查询和 42 次并不得不重新执行此类 SQL 语句，这个瓶颈将几乎消失。

我敢说，使用 42 个列表框，甚至只是 42 个文本框并继续执行 42 条这样的 SQL 语句，不会产生任何有价值的性能改进。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-16T04:37:19.153

不久前问了一个与日历相关的问题：[在Access中创建一个'日历矩阵'](https://stackoverflow.com/questions/13093375/creating-a-calendar-matrix-in-access)

也就是说，您可能永远无法使用绑定到非平凡查询的 43 个子表单来获得良好的性能。

### 可能的小改进

您并不是说您的数据是否在后端服务器上，在这种情况下，每个子表单都必须通过网络获取数据。
如果是这种情况，您最好对服务器进行一次查询以提取所有数据并将其缓存在前端。然后，您只需对本地表进行简单的过滤，这应该会更快，尽管 42 个子表单可能会成为性能的一大瓶颈。

一个简单的`INSERT INTO`查询可以帮助您入门，前提是您已经创建了一个`myCacheTable`基于正常查询返回的数据调用的本地表。

### 轻量级控件

您可能应该尝试的第一件事是使用 venerable `listbox`。
它相当轻巧，并且有很多方法可以配置它们。
如果你将它与我上面提到的服务器缓存数据结合起来，你可以获得更好的性能。

![列表框示例](../Images/e82af094d357e70c7985792d4eaf2a4d.png)

### 支持 Web 的控件

正如[HelloW 所](https://stackoverflow.com/a/13410077/3811)`TextFormat = RichText`提到的，简单地使用设置为的文本框并为它们提供简单的 HTML（它不支持太多）来格式化内部数据可能是一个好主意：

![RichText 文本框示例](../Images/e2742c8060bb4670e81d1dee2b8cf9e7.png)

### 完整的网页

可能设置起来有点复杂，但在 UI 方面难以击败，可能是使用现有的 Javascript 库，如[FullCalendar](http://arshaw.com/fullcalendar/)，或者将您自己的 html 直接注入浏览器文档（您可以使用 simple`<table>`来格式化日历）。

下面是一个[示例在线日历](http://arshaw.com/js/fullcalendar-1.5.4/demos/theme.html)`WebBrowser`在 Access 表单中的控件内的样子：

![Access 中的 Web 日历视图](../Images/6649eb54ed3e5b5adefe0014de67969f.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-16T03:48:01.950

我同意这在 HTML 中效果最好的想法。
将每个子表单替换为富文本格式的文本框。然后在表单加载（或其他一些事件）上获取该月的记录集并循环通过它将文本添加到每个文本框。可用的 HTML 子集通常足以获得您需要的大部分格式。

注意事项

1.  就 vba 而言，这将需要一些真正的思考。很可能您对此感到满意，因为您已经做到了这一点。
2.  只有一个查询，所以速度可以更可接受
3.  您的关键 HTML 标签将是`<br>`和颜色标签
4.  您将无法仅更改文本颜色的背景颜色（我可能在这里错了）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-09-19T02:51:48.320

另一种解决方案是制作许多文本框控件，每个控件代表日历日中的记录。

您运行 1 个查询 - 快！

在 VBA 中循环遍历每个文本框控件并为其分配水平和垂直位置、内容（值）、格式、可见性（您不需要显示没有数据的控件）。

不利的一面是您必须提前确定需要多少个文本框控件，并且可能不足以满足查询传递的所有记录。

为了克服这个问题，您可以任意决定您有 100 个控件，仅首先显示记录集中更重要的记录（例如过期），并记下“并非所有记录都显示”。如果用户想查看所有记录，他单击特定日期，将打开更详细的子表单，其中显示该日期的所有记录。

我从未在日历中尝试过，但我有一个带有甘特图的表格，显示时间条。每个时间栏都是一个文本框控件。我有 120 个控件，它可以立即工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-02-15T13:10:00.773

另一种解决方案是使用Tcal，我刚刚更新到版本1.4.2 什么是Tcal？Tcal 是具有完整图形界面的客户端-服务器跨平台日历。使用 TcalServer 和 TCP/IP，Tcal 将事件、截止日期和工作时间记录到您公司的个性化 FileMaker Pro、Microsoft Access 或 MySQL 数据库文件中。您可以为您的活动分配资源和工作名称、查看其他资源日历、接受或拒绝邀请。Tcal 适用于 Mac OSX 和 Window（7 或 XP），并且是免费的，最多可供 2 个连接用户使用。你可以在这里找到 Tcal：[http ://www.tcal.it/eng/index.html](http://www.tcal.it/eng/index.html)

# c# - 尝试从指定的 url 读取 xml 不会产生 xml 结果

> ID：13408433
> 
> 赞同：1
> 
> 时间：2012-11-16T00:07:17.777
> 
> 标签：c#, asp.net, xml-parsing

这个特定的[url](http://bankisrael.gov.il/currency.xml) <-- (点击查看) 工作正常。

```
http://bankisrael.gov.il/currency.xml 
```

但是当试图从中读取以提取货币时，无论我尝试哪种方式来解决它，这都是我得到的......

```
<html><body><script>document.cookie='iiiiiii=e0076bcciiiiiii_e0076bcc; path=/';window.location.href=window.location.href;</script></body></html> 
```

尝试以下：

```
 using (WebClient c = new WebClient())
    {
        var result = c.DownloadString(@"http://bankisrael.gov.il/currency.xml");
    } 
```

尝试过以上`WebClient`...但不是第一次尝试。

下一个代码是我的第一次尝试。我究竟做错了什么 ？

在“浏览”到上面的 URL 时，XML 就在那里。我想先在您的帮助下尝试一下，然后再拼命想其他方法。

我将能够将文件保存到我的硬盘驱动器（以编程方式），然后从硬盘驱动器中读取它。对于这种方法，我还没有测试过，但我相信它会起作用。

但我试图与一些有经验的开发人员核实，以尝试一下。有什么问题？

```
 string DollarURL = "http://bankisrael.gov.il/currency.xml";
   xx.Load(DollarURL);
   XmlNode root = xx; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T00:18:13.710

看起来您应该为此使用 Linq to XML。尝试`XDocument.Load`：

```
var xdoc = XDocument.Load(DollarURL); 
```

现在`xdoc.Root`会给你`CURRENCIES`元素：

```
Console.WriteLine(xdoc.Root.Name.LocalName); // "CURRENCIES" 
```

用于`xdoc.Root.Elements("CURRENCY")`获取所有货币节点。用于`xdoc.Save("filename")`保存到硬盘。

要查询某种货币，可以这样写：

```
XElement[] usdElements = xdoc.Root.Elements("CURRENCY")
    .Where(currency => (string)currency.Element("CURRENCYCODE") == "USD")
    .ToArray(); 
```

* * *

有关更多信息，请阅读[MSDN 上的 LINQ to XML](http://msdn.microsoft.com/en-us/library/bb387098.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T00:45:09.930

使用 XPath 访问 XML 节点有一种更简单的方法：

```
using System;
using System.Net;
using System.Xml;
using System.Globalization;

// ...    

using (WebClient c = new WebClient())
{
    string result = c.DownloadString(@"http://bankisrael.gov.il/currency.xml");
    CultureInfo culture = new CultureInfo("en-US");

    XmlDocument xml = new XmlDocument();
    xml.LoadXml(result);

    foreach (XmlNode currency in xml.SelectNodes("/CURRENCIES/CURRENCY"))
    {
        string name = currency.SelectSingleNode("NAME").InnerText;
        int unit = int.Parse(currency.SelectSingleNode("UNIT").InnerText);
        string currencyCode = currency.SelectSingleNode("CURRENCYCODE").InnerText;
        string country = currency.SelectSingleNode("COUNTRY").InnerText;
        double rate = double.Parse(currency.SelectSingleNode("RATE").InnerText, culture);
        double change = double.Parse(currency.SelectSingleNode("CHANGE").InnerText, culture);

        Console.WriteLine("{2} {0} ({3}, {5}) rate:{1} change:{4}", currencyCode, rate, unit, country, change, name);
    }
} 
```

# wix - 我怎样才能让 Wix 只安装修改过的文件

> ID：13408436
> 
> 赞同：1
> 
> 时间：2012-11-16T00:07:43.813
> 
> 标签：wix, windows-installer

我有一个安装程序，它安装了一个最终被 Explorer 使用的 dll。修改或覆盖该 dll 需要重新启动资源管理器，这很丑陋。

如果我增加我的 Wix ProductVersion（例如从 4.0 到 4.1）但不更改与该 dll 相关的任何文件（dll 的版本未更改），我不希望 MSI/Wix 尝试修改该 dll。有没有办法告诉 MSI/Wix 只安装那些改变了最后一个 MSI 和当前正在运行的文件的文件？

目前，我的 msi 最终将通过重新启动管理器重新启动资源管理器，因为资源管理器正在使用 Wix 想要更改的文件（dll），即使该文件实际上没有任何有意义的更改。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T00:49:16.517

Brian Gillespie 在 [如何实施 WiX 安装程序升级中的回答？](https://stackoverflow.com/a/214650/572834)（关于`RemoveExistingProducts`之后的安排`InstallFinalize`）为您解决这个问题？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T07:31:39.590

你用升级吗？尝试按照MikeBaz 的[建议](https://stackoverflow.com/a/13408816/572834)`RemoveExistingProducts`安排之后。在这种情况下，安装新版本，然后卸载旧版本，因此如果版本没有更改，DLL 应该保持不变。`InstallFinalize`

如果`RemoveExistingProducts`是之前安排`InstallInitialize`的，则完全卸载旧版本，然后安装新版本。在这种情况下，卸载旧版本时必须删除 DLL，并使用新版本再次（重新）安装。

# jquery - 使用 Jquery 计算小计

> ID：13408437
> 
> 赞同：2
> 
> 时间：2012-11-16T00:07:55.817
> 
> 标签：jquery, append, calculator

我正在尝试获取用户附加到购物车的项目的小计，但似乎无法使其正常工作。

基本上我有一个项目列表，上面有一个添加到购物车按钮，该按钮链接到一个 jquery 函数，该函数将一些 html 附加到购物车：

```
$('#object01').click(function(){
    if ($('#slideShoppingCart').is(":hidden")) {
    $('#slideShoppingCart').slideToggle(500);   
    $('#objectList').append('<div class="shoppingCartObject"><img src="img/leather-backpack-cart.jpg" width="75" height="75"><div class="cartObjectInfo"><h1 class="cartTitle">Gentleman&#39;s Satchel</h1><div class="closeCartObject">x</div><h2 class="cartDescription">Chestnut Leather</h2><h3 class="quantity">QTY. 1</h3><h3 class="cartPrice">£<span class="price">300</span></h3></div></div>')
    } else {
        $('#objectList').append('<div class="shoppingCartObject"><img src="img/leather-backpack-cart.jpg" width="75" height="75"><div class="cartObjectInfo"><h1 class="cartTitle">Gentleman&#39;s Satchel</h1><div class="closeCartObject">x</div><h2 class="cartDescription">Chestnut Leather</h2><h3 class="quantity">QTY. 1</h3><h3        class="cartPrice">£<span class="price">300</span></h3></div></div>')
    }
    });
    $('.closeCartObject').live('click', function() {
    $(this).parent().parent().remove();

    return false;
}); 
```

其中我将价格包含在一个名为 price 的类中。然后我的购物车中有一个 id 为 total 的 span。

我有这个函数来计算价格，这似乎不起作用。

```
$(document).ready(function getTotal(){
var total = 0;
$('.price').each(function(){
    total += parseFloat(this.innerHTML)
});
$('#total').text(total);
getTotal();
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T00:17:04.953

你的功能：

```
$(document).ready(function getTotal(){
var total = 0;
$('.price').each(function(){
    total += parseFloat(this.innerHTML)
});
$('#total').text(total);
getTotal();
}); 
```

包含从 getTotal() 对 getTotal() 的调用。你有无意的**递归**。

编辑：好的，试试这个：（如果你的代码有一个jsfiddle会更容易）

```
$(document).ready(function ()
{
    var total = 0;
    $('.price').each(function()
    {
        total += parseFloat(this.innerHTML)
    });

    $('#total').text(total);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T00:23:00.450

您的计算逻辑似乎有效

```
var total = 0;
$('.price').each(function(){
    total += parseFloat(this.innerHTML)
}); 
```

但问题是您在其内部调用“getTotal()”函数。

尝试

```
$(document).ready(function() {

var getTotal = function(){
  var total = 0;
  $('.price').each(function(){
      total += parseFloat(this.innerHTML);
  });
  return total;
}  

$('#total').text(getTotal());

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T00:12:54.253

尝试将您的 JS 放入`<script defer="defer">`标记中，这意味着它会最后运行 - 您的函数可能会在 Dom 完全完成之前尝试计算（尽管这可能仅适用于早期版本的 jQuery）

或者添加一个 setTimeout 以在几秒钟后调用您的小计函数。

您可能还想为您的函数添加一些警报，确保其尝试定位的字段正确定位。

Defer：[<script defer="defer"> 究竟是如何工作的？](https://stackoverflow.com/questions/5250412/how-exactly-does-script-defer-defer-work)

设置超时：[https ://developer.mozilla.org/en-US/docs/DOM/window.setTimeout](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout)

# variables - 启动时使用 Powershell 脚本的参数

> ID：13408440
> 
> 赞同：9
> 
> 时间：2012-11-16T00:08:18.087
> 
> 标签：variables, powershell, argument-passing

与 C 和其他语言一样，您可以在实际执行脚本时为 script/.exe 提供参数。例如：

`myScript.exe Hello 10 P`

其中 Hello, 10 和 P 被传递给程序本身的某个变量。

这在 Powershell 中可行吗？如果是这样，您如何将这些参数提供给给定的 $variable

谢谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-16T00:45:31.793

使用这样的参数块定义您的脚本：

```
-- Start of script foo.ps1 --
param($msg, $num, $char)

"You passed in $msg, $num and $char" 
```

您还可以进一步键入限定参数，例如：

```
-- Start of script foo2.ps1 --
param([string]$msg, [int]$num, [char]$char)

"You passed in $msg, $num and $char" 
```

您还可以指定默认值和所需值，例如：

```
-- Start of script foo3.ps1 --
param([string]$msg=$(throw "Msg param is required"), [int]$num, [char]$char="P")

"You passed in $msg, $num and $char" 
```

您可以使用高级功能（指定属性以验证参数等）获得更高级的功能。但这应该让你继续前进。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-16T04:53:12.247

只是对@Keith Hill 回答的补充......

当您谈论“C”时，您还可以使用[自动变量](http://technet.microsoft.com/en-us/library/hh847768.aspx) `$args`编写带有参数的脚本。

`$Args`包含传递给函数、脚本或脚本块的未声明参数和/或参数值的数组。

```
-- Start of script foo3.ps1 --
if ($args.length -gt 0)
{
  write-host "first param is $($args[0])"
}

for ($i=0 ; $i -lt $args.length ; $i++)
{
  write-host "$i) " $args[$i]
} 
```

你可以调用 thr 脚本

```
.\foo3.ps1 coucou bonjour "hello world"
first param is coucou
0)  coucou
1)  bonjour
2)  hello world 
```

# javascript - JavaScript 执行函数返回函数

> ID：13408444
> 
> 赞同：3
> 
> 时间：2012-11-16T00:08:42.220
> 
> 标签：javascript, function, scope

我有以下两个计数器函数，它们在运行时返回不同的结果。

在第一个片段中，计数器函数被分配给变量letsCount，看起来执行该函数会更新计数器函数中的var count。

然而，在第二个片段中，直接执行该函数不会更新 count 变量。

您能否解释为什么它们有不同的结果以及将返回函数的函数分配给变量时会发生什么？

**片段 1**

```
function counter() {
    var count = 0;
    return function() {
        console.log(count++);
    }
}
var letsCount = counter();
letsCount();    // 0
letsCount();    // 1
letsCount();    // 2 
```

**片段 2**

```
function counter() {
    var count = 0;
    return function() {
        console.log(count++);
    }
}
counter()();  // 0
counter()();  // 0
counter()();  // 0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T00:10:51.480

每次调用时，`counter()`您都会创建一个新的匿名函数实例，该实例具有自己的作用域变量。如果您想继续使用相同的功能，则必须执行以下操作：

```
var counter = (function () {
    var count = 0;

    var fn = function() {
        console.log(count++);
    };

    return function () {
        return fn;
    };
})();

counter()();  // 0
counter()();  // 1
counter()();  // 2 
```

将创建一个匿名函数，然后将其存储在作用域`fn`函数中，然后我们返回一个函数，该函数在调用时将返回`fn`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T00:14:13.493

*Snippet 1*和*Snippet 2*的调用不同。您的第一个片段有一个对返回函数的引用，并且该函数保留在其范围内（是一个*闭包*，具有对 的引用`count`）。

您的第二个代码段每次都调用外部函数，总是返回对新函数的引用，并带有一个新的新闭包*count*。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T00:11:59.877

在第一种情况下，您使用函数指针引用它。所以上下文被保存

而在第二种情况下，您正在调用该函数，其中计数为 0。所以变量在这里脱离了上下文，所以你看到的值为 0

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T16:40:01.373

实际上，为什么您会出现这种行为是完全有道理的。当您调用 时`counter()()`，将执行第一次`counter()`调用，有效地将变量重置`count`为 0。当您将变量设置为 时`counter()`，实际上是将其设置为返回的函数：

```
var letsCount = // (function() {
    // var count = 0;
    return function() {
        console.log(count++);
    }

// })(); 
```

然后当你调用时`letsCount`，你调用的是返回的函数而不是外部函数。

# perl - Perl 函数中的变量在函数外具有意外值

> ID：13408446
> 
> 赞同：3
> 
> 时间：2012-11-16T00:08:57.670
> 
> 标签：perl, recursion, dbi

所以，我是 Perl 的新手。我正在尝试创建一个递归子例程。逻辑似乎很简单：

```
sub directory_tree
{
    my $sth = $dbh->prepare("
        SELECT id, org_id, name
        FROM media_directories
        WHERE
            org_id = ?
            AND parent = ?
            AND bucket = ?
    ");
    $sth->bind_param(1, $_[0]);
    $sth->bind_param(2, $_[1]);
    $sth->bind_param(3, 'mfsermons.myflock2.com');
    $sth->execute;

    $result = '';
    while(my($id, $org_id, $name) = $sth->fetchrow_array())
    {
        $result .= "<option value='$id'>$name</option>";  #377
        $result .= directory_tree($org_id, $id);          #378
    }

    return $result;
}

$directory_tree = '<select name="folder">';
$directory_tree .= directory_tree($churchid, 0);
$directory_tree .= '</select>'; 
```

* * *

为什么当我`$result`在第 377 行之后打印它等于预期值，但是当我在第 378 行打印它时，什么都没有出现？.= 运算符不应该再次运行该函数，然后附加到该值吗？

我最好的猜测是 Perl 中存在一些我不理解的范围问题，尤其是关于`$result`. 但是，对于我的生活，我无法弄清楚出了什么问题，我完全不知道去哪里找！

当我打开错误报告、致命和警告时，没有返回任何内容。我错过了什么可能出了什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T08:10:43.653

`use strict`, avoid global variables. In other words: you are reusing the global `$result`, resetting its value in each call to the subroutine.

# android - 在 Android 活动中覆盖 ArrayList.equals

> ID：13408447
> 
> 赞同：2
> 
> 时间：2012-11-16T00:09:01.797
> 
> 标签：android, arraylist, overriding, equals, contains

我有一个包含多个变量的对象数组列表。

我生成新对象并希望有条件地检查以查看在 arraylist 中是否不存在具有相同内容的对象。

不幸的是， Arraylist.contains(object) 和 Arraylist.equals(object) 都只检查同一对象的引用，而不是具有相同组件的对象。我希望它表现得像一个更简单的 String.contains("x") 。

如何覆盖 arraylist.equals/arraylist.contains 以在我的 android 活动中执行我想要的操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T00:15:13.723

您可以创建自己的继承自 ArrayList 的类，并为两者定义自己的定义。

```
public class myArrayList<E> extends ArrayList<E> {
    @Override
    public Boolean equals(object o) {
        //Your implementation
    }
    @Override
    public Boolean contains(object o) {
        //Your implementation
    }
} 
```

然后用 MyArrayList 类型替换您的 ArrayList 类型。

或者您可以在某处创建一个接受 2 个 ArrayList 的方法，并告诉您它们是否相等，或者一个是否包含另一个。

```
public static Boolean areArrayListsEqual(ArrayList a, ArrayList b) {
     //Check if they are equal
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T01:32:03.307

ArrayList 的 equals(Object o) 和 contains(Object o) 方法都在其中的每个对象上调用 equals 方法。因此，如果您只是进行浅比较，那是因为您放入 ArrayList 的对象没有覆盖 equals 方法以正确比较其自己的组件。

# objective-c - 带有页面的滚动视图中的“按钮”

> ID：13408449
> 
> 赞同：1
> 
> 时间：2012-11-16T00:09:20.993
> 
> 标签：objective-c

我有一个带有页面的滚动视图，它使用图像来显示不同的页面，我希望将按钮放在不同的页面上，但我不太确定如何去做。

这是我当前的代码：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    // add the first image (image1) into the last position
    [self addImageWithName:@"image1.jpg" atPosition:0];

    scrollView.contentSize = CGSizeMake(2272, 320);
    [scrollView scrollRectToVisible:CGRectMake(568,0,0,320) animated:NO];

    // add the last image (image4) into the first position
    [self addImageWithName:@"image4.jpg" atPosition:5];

    // add all of the images to the scroll view
    for (int i = 1; i < 4; i++) {
        [self addImageWithName:[NSString stringWithFormat:@"image%i.jpg",i] atPosition:i];
    }
}
-(void)viewDidAppear:(BOOL)animated {
    [self.navigationController setNavigationBarHidden:NO animated:YES];
}
- (void)addImageWithName:(NSString*)imageString atPosition:(int)position {
    // add image to scroll view
    UIImage *image = [UIImage imageNamed:imageString];
    UIImageView *imageView = [[UIImageView alloc] initWithImage:image];
    imageView.frame = CGRectMake(position*568, 0, 568, 320);
    [scrollView addSubview:imageView];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T13:01:37.683

您可以参考下面的链接以获得相同的功能

[http://eureka.ykyuen.info/2010/05/22/iphone-uiscrollview-with-paging-example/](http://eureka.ykyuen.info/2010/05/22/iphone-uiscrollview-with-paging-example/)

您可以添加按钮而不是标签。

# x++ - 如何编辑树控制节点文本？

> ID：13408457
> 
> 赞同：3
> 
> 时间：2012-11-16T00:10:31.373
> 
> 标签：x++, axapta, dynamics-ax-2012

我是 Microsoft Dynamics AX 2012 的新手，正在尝试编辑 EcoResCategory 表单上的树视图控件，以便为每个节点显示的文本是 EcoResCategory.Name 和 EcoResCategoryTranslation.FriendlyName 的串联。我已经搜索了表单方法中的所有 X++ 代码，但还没有弄清楚我可以在哪里修改它。

有没有人对如何实现这一目标有任何指示或线索？它不可能像我想象的那么复杂。文档似乎也受限于 X++。

*   请注意，该表单曾一度做了我想做的事情，但自定义已被删除。我不确定我们的供应商是添加了这个还是原生的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T14:25:17.900

在`initializeHelper`EcoResCategory 类的方法中，有一行初始化代码如下：

```
EcoResCategoryLookupParameters lookupParameters = new EcoResCategoryLookupParameters(false, false, false); 
```

第二个布尔参数是`boolean _showFriendlyNameWithName`（此处的文档：http: [//msdn.microsoft.com/en-us/library/ecorescategorylookupparameters.new.aspx](http://msdn.microsoft.com/en-us/library/ecorescategorylookupparameters.new.aspx)）

我的猜测是，如果您将其设置为`true`而不是`false`您将获得请求的行为。

# system-calls - 计算 Minix 3 中进程的系统调用并使用 F8 打印进程/#of sys 调用

> ID：13408458
> 
> 赞同：2
> 
> 时间：2012-11-16T00:10:35.210
> 
> 标签：system-calls, minix

我需要一种方法来计算每个进程使用了​​多少系统调用（用户、系统等），然后使用`F8`. 我猜我需要更改`proc.c`并`proc.h`添加一个流程字段并更改`keyboard.c`以使`F8`按钮打印所有内容。

任何有关如何处理的帮助将不胜感激。

# ruby-on-rails - 使用 Devise、Omniauth 和 Rails 的访问令牌身份验证

> ID：13408461
> 
> 赞同：3
> 
> 时间：2012-11-16T00:10:51.123
> 
> 标签：ruby-on-rails, devise, omniauth

我已正确设置我的应用程序以将 Dropbox Oauth 登录名与用户相关联（通过设计/Omniauth）。下面的文件夹`Dropbox/Apps/myapp`是正确的。

我已经在数据库中保存（并加密）了用户的访问令牌和访问密码 - 如何使用 OmniAuth 使用这些值进行身份验证，而不是让它们经历完整的 Dropbox OAuth 周期？每次我使用 Dropbox 登录时，它都会一遍又一遍地询问我是否允许该应用访问我的 Dropbox 文件夹。

我已经设置了 OmniAuth 回调，就像它们在 wiki 中一样。它搜索提供者和 uid，并以这种方式找到用户。这与 Dropbox 与 Twitter 或 Facebook 的工作方式有什么不同吗？他们只要求我一次将 Twitter/FB 帐户与`myapp`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T01:49:49.530

嗯，嗨，如果您尝试将每个用户与您的保管箱连接，那么它会询问访问您文件夹的权限。基本上，它就像 facebook App 一样，如果您需要访问该应用程序，您将获得一些请求权限。您需要做的可能是您的 Web 应用程序首次获得对保管箱文件夹的访问权限，并且您的用户正在使用您为他们分配的权限。希望能帮助到你..

# paypal - 如果我在 paypal 定期付款中将 TOTALBILLINGCYCLES 设置为零，该付款资料会永远存在吗？

> ID：13408463
> 
> 赞同：4
> 
> 时间：2012-11-16T00:11:06.533
> 
> 标签：paypal, recurring-billing

我对定期付款和它的生命周期有点困惑。我想弄清楚在那一年过去后我是否必须以某种方式更新定期付款资料。我正在阅读[https://www.x.com/developers/paypal/documentation-tools/api/createrecurringpaymentsprofile-api-operation-nvp#id09BNA01I0E9](https://www.x.com/developers/paypal/documentation-tools/api/createrecurringpaymentsprofile-api-operation-nvp#id09BNA01I0E9)以下内容：

```
The combination of BillingPeriod and BillingFrequency cannot exceed one year. 
```

但是还有一个 TOTALBILLINGCYCLES 参数说明

```
For the regular payment period, if no value is specified or 
the value is 0, the regular payment period continues until the 
profile is canceled or deactivated. 
```

它表明如果我设置为零，我不需要对配置文件做任何事情。我对吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-16T00:21:14.057

`BillingPeriod`并且`BillingFrequency`不同于定期计费帐户的生命周期。

`BillingPeriod`Paypal 应该在两次收费之间等待多长时间？日常的？每周？每月？

`BillingFrequency`是该用户一年内将被收取多少次费用。

因此，如果您有 a `BillingPeriod`of week 和 a `BillingFrequency`of 52，则将在一年中的每周向用户收费。如果您有 a `BillingPeriod`of week 和 a `BillingFrequency`of 26，则用户将在上半年每周收费，然后不再向他们收费。

`TOTALBILLINGCYCLES`是您希望此订阅运行多长时间。如果将其设置为零，它将永远运行（直到取消）。如果您将其设置为 3，那么它将向用户计费三个计费周期（3 年），然后自行终止。

# c# - IF ELSE 语句有问题

> ID：13408464
> 
> 赞同：-3
> 
> 时间：2012-11-16T00:11:06.630
> 
> 标签：c#, if-statement, percentage

我正在尝试为课堂做作业，但在弄清楚如何将婚姻状况纳入数学公式时遇到了一些麻烦。请记住，我需要保持代码简单，并且必须使用 if else 语句，因为这是我上课的第三周。提前致谢

这是作业，因此您可以更好地了解我要做什么。

> 您需要设计一个应用程序来提示用户他或她的时薪、工作时间以及他或她是单身、已婚、离婚还是丧偶。然后它将计算用户的总工资和净工资。如果用户工作超过 40 小时，加班费按正常工资的 1.5 倍计算，并单独显示。如果用户已婚，则使用 15% 的统一税率。如果用户是单身，用22%，如果离婚，用23%，如果丧偶，用13%（我意识到这些不太现实）

到目前为止，这是我的代码：

```
double hourlyRate;
int hoursWorked;
string marriageStatus;
double Percent;

Console.WriteLine("Enter your Pay Rate");
Convert.ToDouble(Console.ReadLine());

Console.WriteLine("Enter the hours you worked this week");
Convert.ToInt16(Console.ReadLine());

Console.WriteLine("Enter your Marital status: M for married, S for single, D for divorced and W for widow");

if (marriageStatus == M)
    percent = .15 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T00:13:50.483

您没有根据用户输入设置婚姻状态变量。

所以你需要：

```
marriageStatus = Console.ReadLine();

if(!String.IsNullOrEmpty(marriageStatus)) {
marriageStatus = marriageStatus.ToUpper();
if (marriageStatus == "M") {
    //do married stuff
} else if (marriageStatus =="W") {
  //do widowed stuff
} else if (marriageStatus == "S") {
  // do Single Stuff
} else if (marriageStatus == "D") {
  // do divorced stuff
} else {
  // invalid input - error handling
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T00:17:13.267

这会将用户输入存储到字符串中

```
string input = Console.ReadLine(); 
```

那么你可以去

```
if(input == "m" || input == "M")
{ percentage = 0.15;}
else if (input == "s" || input == "S")
{  percentage = .50; } 
else if (input = "w" || input == "W")
{percentage = .90; }
else
{
//there was an error
percentage = 0.0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T00:14:20.810

几个问题：

1.  您正在从控制台读取 - 但不会将该输入存储在任何地方。您需要将读取的内容放入变量中。
2.  在您的 if 语句中，您将变量`mariageStatus`与变量进行比较，`M`但该变量`M`不存在。您想在这里使用的是将其与`"M"`完全不同的文字进行比较。

# .net - WPF 应用程序中的 Web 服务器

> ID：13408465
> 
> 赞同：2
> 
> 时间：2012-11-16T00:11:07.723
> 
> 标签：.net, wpf, web-services, soap, webserver

**我有一个 WPF 应用程序**，专门用于演示如何使用我公司的专有技术（该应用程序显示了一个地图，其中被跟踪的对象来回飞行）。除了展示我们的技术外，演示应用程序最重要的方面是简单性。它必须易于尝试、易于设置、易于使用，否则潜在客户在看到任何东西之前就会抛弃我们。所以演示应用程序**必须类似于 checkout-compile-run。**

**但是，为了演示发布/订阅功能，我需要添加一个 SOAP Web 服务**。但我不想要 Web 项目、配置、虚拟目录、Web 服务和应用程序之间的 WCF，或者任何其他会使设置比编译和运行更困难的东西。我只想要一个.EXE。**有没有办法让我的 WPF 应用程序也成为为这些 Web 服务提供服务的简单 Web 服务器？**

再次为简单起见，重要的是：

*   Web 服务实现不应该有虚拟和/或物理目录，它们应该可以作为 .NET 类型编译到我的单个 EXE 程序集中（就像我的 Web 服务器一样）。
*   Web 服务对象应与 WPF 应用程序在同一应用程序域中运行，以便它们可以自由地相互通信，而无需远程处理或 WCF。

**我仅限于使用 .NET 3.5**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T09:56:56.500

我找到了答案：`System.ServiceModel.ServiceHost`上课。

[这是 MSDN 示例代码。](http://msdn.microsoft.com/en-us/library/ms731758%28v=vs.90%29.aspx)

# java - 如何将必要的 GWT 组件与 GIN 绑定？

> ID：13408466
> 
> 赞同：2
> 
> 时间：2012-11-16T00:11:12.843
> 
> 标签：java, gwt, dependency-injection, gwt-gin

我已按照GWT-GIN 教程页面上的[基本设置说明进行操作。](http://code.google.com/p/google-gin/wiki/GinTutorial#Step_3._Declare_bindings)我在第 3 步（**声明绑定**）并试图弄清楚如何使用 GIN 的 Binder API。

```
public class MyModule extends AbstractGinModule {
    @Override
    public void configure() {
        // 1\. Declare an instance of EventBus and make sure every
        // injection request pulls back the same instance.
        EventBus eventBus = new EventBus();
        bind(EventBus.class).to??? // no toInstance() method!

        // 2\. Declare two instances of Fizz using different constructors,
        // and allow the injection of either of them.
        Fizz f1 = new Fizz(true, "oh yeah", null);
        Fizz f2 = new Fizz();
        bind(Fizz.class).to??? // no toInstance() AND don't know how to choose f1 or f2!

        // 3\. Declare a List of Buzz objects and allow them to be
        // injectable.
        List<Buzz> buzzes = new ArrayList<Buzz>();
        configureBuzzes(buzzes); // adds configured Buzz objects to the list
        bind(???).to(buzzes); // no toInstance() methods AND how to bind List<?>.class?!

        // 4\. Conditionally bind SomePlace to Place *only* when we want the default Place
        // that 'historyHandler.handleCurrentHistory()' will go to when called onModuleLoad.
        bind(Place.class).to(SomePlace.class); // forces me to only have SomePlace instances!
    }
} 
```

上面的四个用例是我正在努力解决的问题。分别：

1.  `EventBus`每次客户端请求时如何重用相同的实例？
2.  从上面的#1 构建，如何在不同的场景下注入 2+ 个不同的实例？
3.  如何注入`List`任何东西？
4.  可能与上面的 #2 相同，但是如何将 2+ Place 子类绑定到`Place.class`？

提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-16T05:39:01.427

很好的问题有助于阐明 Guice 本身的工作原理，以及 Guice 和 Gin 之间的区别。Gin 与 Guice 不太一样——该`configure()`方法在生成 JavaScript 时运行，因此编译器只烘焙正确的类型集——否则你的应用程序可能包含整个 JRE！这对 Gin 来说有点作弊，一旦你理解了这一点，GWT DI 就更有意义了。

基本思想是该`configure()`方法只应该处理布线 - 而不是创建实例。这提供了 1) 的答案，以及 2) 的部分答案。实际上编写将在应用程序运行时使用的代码（`Provider`对象、`@Provides`方法，当然还有任何用 注释的东西`@Inject`）需要反过来——它只会被编译成 JS。这意味着虽然您可以定义`configureBuzzes`3) 中的方法，但您需要小心只从方法内部调用这些`configure()`方法 - 并且*永远不要*`configure()`从常规应用程序代码调用。

2)、3) 和 4) 的答案主要与 Guice 本身的一般工作方式有关。我提供的解决方案 1) 也适用于普通的 Guice，而且我会一直建议这种方法 - 我发现如果你不混合布线和实际的对象构建，它往往会使代码更具可读性.

1.  不要在您的`configure()`方法中创建实例，只需进行绑定即可。您可以将绑定设置为例如

    ```
    bind(EventBus.class).to(SimpleEventBus.class).in(Singleton.class); 
    ```

    创建实例，并将其限定为单例 - 默认情况下将使用默认构造函数。

2.  *   如果要使用非默认构造函数，有几个选项。您可以使用 注释特定的构造函数`@Inject`，并为每个值提供一些注释（稍后会详细介绍），或者您可以构建一个提供程序或`@Provides`方法来创建实例。同样，您可能希望`@Singleton`这样做有意义，但这取决于您的用例（这将是您 GinModule 中的另一种方法）：

        ```
        @Provides
        //@Singleton //optional, depends on your use case
        public Fizz provideFirstFizz() {
            return new Fizz(true, "oh yeah", null);
        } 
        ```

    *   接下来，你如何提供两种不同的同一种东西？你如何在 Guice 中做到这一点？您如何期望您的代码被`Fizz`注入来获得正确的代码？事实证明，这些可能都有相同的答案——您需要找到一种方法来指示您想要哪个实例。它们都是相同的类型，所以这还不够，但我们可以提供其他提示，例如注入字段上的注释。说出我们需要的代码，`f1`看起来`f2`像这样

        ```
        @Inject
        @Red// Make up your own annotation, or use some existing ones
        private Fizz f1;

        @Inject @Blue private f2; 
        ```

        现在我们有一种方法来区分它们，我们需要使用相同的注释来绑定它们。由于我们仍然假设构造函数没有`@Inject`，`Fizz`我们不能只做一个`bind()`调用，所以我们只需添加`@Blue`到提供的方法：

        ```
        @Provides
        @Blue
        //@Singleton //optional, depends on your use case
        public Fizz provideFirstFizz() {
            return new Fizz(true, "oh yeah", null);
        } 
        ```

        我们可以将其解读为“This method `Provides` `Blue`Fizz instances”。对于`@Red`，因为我们有默认的 ctor，我们*可以*使用`bind()`：

        ```
        bind(Fizz.class).annotatedWith(Red.class);//... no need to specify type
                                                  //in this case, but might want 
                                                  //singleton 
        ```

        有关这方面的更多详细信息，请参阅[https://code.google.com/p/google-guice/wiki/BindingAnnotations](https://code.google.com/p/google-guice/wiki/BindingAnnotations)。

3.  同样，我们可以使用`@Provides`它，或者创建和绑定一个`Provider<T>`类型。由于我们已经完成了几个提供程序方法，让我们尝试一个`Provider<List<Buzz>>`：

    ```
    public class BuzzListProvider implements Provider<List<Buzz>> {
        public List<Buzz> get() {
            List<Buzz> buzzes = new ArrayList<Buzz>();
            // Configure them... This might call on a @Inject defined
            // within this BuzzListProvider, on the ctor or a field, or
            // just some code in this method.
            return buzzes;
        }
    } 
    ```

    然后，将 Provider 绑定到该列表：

    ```
    // cant say List<Buzz>.class, use TypeLiteral instead
    bind(new TypeLiteral<List<Buzz>>(){})
        .toProvider(BuzzListProvider.class);
    //  .in(Singleton.class); if the list needs to be only created once 
    ```

4.  您的摘要完全正确 - 这与 2 完全相同。我通常会做一个`@DefaultPlace`注释（或者只是简单的`@Default`，以便我可以重新使用它）来处理这种情况。

# ruby-on-rails - Ruby on Rails：关于在分页对象内渲染部分内容

> ID：13408468
> 
> 赞同：0
> 
> 时间：2012-11-16T00:11:23.420
> 
> 标签：ruby-on-rails, ruby-on-rails-3, object, pagination, partial-classes

我真的对渲染的分页对象的工作方式感到困惑。以此为例：

当我跑

```
<%= render :partial => 'feeds/share_item', collection: @share_items %>
<%= will_paginate @share_items %> 
```

我可以去`_share_item.html.erb`里面，我可以做到这一点......

```
<%= link_to "Delete", share_item, method: :delete, 
data: { confirm: "Are you sure you want to delete this?" }, 
class: "btn-link", title: share_item.content %> 
```

...它会有删除链接，一切顺利。

但是，当我还在时`_share_item.html.erb`，如果我用...替换它

```
<%= render :partial => 'shared/delete' %> 
```

...我明白了：

`undefined local variable or method 'share_item' for #<#<Class:0xaf0b888>:0xb15cb3c>`

**为什么？**

我一直在尝试解决这个问题很长一段时间，因为我的部分表格和链接杂乱无章。我希望能够通过*另一个*部分呈现所述表单和链接。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T00:46:17.060

现在，变量 share_item 是空的，因为它没有提供给部分。你需要做这样的事情：

```
<% @share_items.each do |share_item| %>
  <%= render :partial => 'shared/delete', :locals => { :share_item => share_item } %>
<% end %> 
```

或者，稍微简洁一点

```
<% @share_items.each do |share_item| %>
  <%= render 'shared/delete', share_item: share_item %>
<% end %> 
```

或者，甚至更好：

```
<%= render 'shared/delete',  collection: @share_items %> 
```

[你可以在这里](http://apidock.com/rails/ActionView/PartialRenderer)找到更多信息。

# c++ - 打印链表中的元素

> ID：13408473
> 
> 赞同：-5
> 
> 时间：2012-11-16T00:12:00.493
> 
> 标签：c++, algorithm

如果我有一个整数的链接列表，我如何迭代/遍历链接列表，以便我可以在 C++ 中使用 cout 打印每个元素？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-12-24T16:30:11.827

希望这可以帮助！

```
struct Node
    {
         int data;
         struct Node *next;
    }

void Print(Node *head)
{
    Node *a =head;
    while(a!=NULL){
        cout<<a->data<<endl;
        a = a->next;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T00:13:46.990

你可以使用这个：

```
void print(node* n) {
  cout << n -> value << endl;
  if(n -> next) print(n -> next);
} 
```

并这样称呼它：

```
int main() {
  linked_list l;
  ...
  print(l -> head);
  return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T00:14:12.080

想必你的链表有典型的链表操作。这些包括获取引用第一个元素的迭代器，递增迭代器以引用下一个元素，检查迭代器是否已超出列表的末尾，等等。算法是：

1.  设置一个迭代器来引用链表中的第一个元素。

2.  如果迭代器已经跑出链表的末尾，则停止。

3.  打印迭代器引用的元素。

4.  增加迭代器。

5.  转到第 2 步。

如果您不知道如何执行任何这些特定步骤，那么您将不知道如何使用您拥有的特定链接类。为了帮助您，我们需要查看它的代码（如果它是一个现成的类，则需要查看其文档的链接）。

典型的 C++ 实现如下所示：

```
void LinkedList::print(ostream& stream) const
{
      LinkedListElement* ptr = head; // this is my step 1
      while (ptr != NULL)            // this is my step 2
      {
           stream << *ptr;           // this is my step 3
           ptr = ptr->getNext();     // this is my step 4
      } // step 5 happens here because this is a loop
} 
```

# android - 后退按钮后重新加载数据库值

> ID：13408475
> 
> 赞同：1
> 
> 时间：2012-11-16T00:12:06.110
> 
> 标签：android, sql, variables, refresh

在我的主屏幕上，我从我的数据库中获得了某个值（字段活动=1 的项目表）：

```
String s2 = "Logged in as " + myDbHelper.getActivePlayer();
bPlayQuiz.setText(s2); 
```

当我单击我的设置活动时，更改播放器，另一个播放器的字段活动 = 1。所以当我点击后退按钮时，第一个值仍然存在......知道如何编写代码，当我回到主屏幕时它会刷新吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T00:24:37.033

您可以随时重新加载 中的字段，`onResume`只要活动重新获得焦点，就会调用该字段：

```
@Override
public void onResume()
{
    super.onResume();

    String s2 = "Logged in as " + myDbHelper.getActivePlayer();
    bPlayQuiz.setText(s2);
} 
```

[这里](http://developer.android.com/training/basics/activity-lifecycle/pausing.html)有关于生命周期的简历部分的更多信息。

# .net - 检测 SerialPort 何时断开连接

> ID：13408476
> 
> 赞同：18
> 
> 时间：2012-11-16T00:12:06.500
> 
> 标签：.net, winforms

我通过事件打开`SerialPort`并接收数据。`DataReceived`

有什么方法可以检测是否`SerialPort`断开连接？

我尝试了`ErrorReceived`和`PinChanged`事件，但没有运气。

除此之外，`SerialPort.IsOpen`在物理断开连接时返回 true。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-16T15:46:32.533

USB 串行端口是一个**巨大**的痛苦。例如，参见[这个问题](https://stackoverflow.com/questions/3230311/problem-with-serialport)。我不确定它是否真的被 .NET 4.0 修复了，但在那天我试图处理断开连接的问题，使整个程序崩溃，如下所示：

```
public class SafeSerialPort : SerialPort
{
    private Stream theBaseStream;

    public SafeSerialPort(string portName, int baudRate, Parity parity, int dataBits, StopBits stopBits)
        : base(portName, baudRate, parity, dataBits, stopBits)
    {

    }

    public new void Open()
    {
        try
        {
            base.Open();
            theBaseStream = BaseStream;
            GC.SuppressFinalize(BaseStream);
        }
        catch
        {

        }
    }

    public new void Dispose()
    {
        Dispose(true);
    }

    protected override void Dispose(bool disposing)
    {
        if (disposing && (base.Container != null))
        {
            base.Container.Dispose();               
        }
        try
        {
            if (theBaseStream.CanRead)
            {
                theBaseStream.Close();
                GC.ReRegisterForFinalize(theBaseStream);
            }
        }
        catch
        {
            // ignore exception - bug with USB - serial adapters.
        }
        base.Dispose(disposing);
    }
} 
```

向我改编这个的人道歉，似乎我没有在我的代码中记下它。问题显然源于.NET 在串行端口消失的情况下如何处理底层流。断开串行端口后，您似乎无法关闭流。

我使用的另一种策略是创建一个只执行串行通信部分的小程序，并公开一个 WCF 服务供我的主程序连接。这样，当 USB 串行适配器脱落并使通信程序崩溃时，我可以从我的主程序中自动重新启动它。

最后，我不知道为什么没有人销售锁定 USB 端口来避免整个意外断开问题，尤其是使用 USB 串行适配器！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-16T01:56:17.463

问题是该值仅在方法执行时`IsOpen`被设置回。`false``Close`

您可以尝试捕获`WM_DEVICECHANGE`消息并使用它。

[http://msdn.microsoft.com/en-us/library/windows/desktop/aa363480(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363480(v=vs.85).aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-23T11:12:51.290

一旦 USB 串行适配器断开连接，我还面临无法处理的异常问题（并且无法检测/规避代码中的问题）。我可以确认 Mattt Burland 的解决方案有效。

简化版：

```
class SafeSerialPort : SerialPort {
    public new void Open() {
        if (!base.IsOpen) {
            base.Open();
            GC.SuppressFinalize(this.BaseStream);
        }
    }

    public new void Close() {
        if (base.IsOpen) {
            GC.ReRegisterForFinalize(this.BaseStream);
            base.Close();   
        }           
    }

    protected override void Dispose(bool disposing) {
        try {
            base.Dispose(disposing);
        } catch (Exception ex) {
            Debug.WriteLine(ex.Message);
        }

    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-16T15:54:36.737

如果您要连接的设备使用 CD 引脚，您可以观察它的变化（其他引脚可能适用于某些使用流量控制的设备）。如果没有，那么就没有明确的方法来做到这一点。

根据连接设备的预期行为，您可能希望实现超时或某种保持活动状态。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-08-15T21:20:58.933

为那些仍然面临这个问题的人更新；几点...

1.  告诉用户“不要断开 USB 设备”是徒劳的，只会惹恼所有相关人员。尽管我们不希望他们这样做，但我们知道他们会在我们的程序运行时将设备拉出......
2.  早期版本的框架**确实**会立即更新`SerialPort.GetPortNames()`yank，但 4.7 不会更新开放端口的列表。我们有一个后台线程来检查这个列表是否有变化（如上所述），它曾经工作得很好，但它不再工作了......
3.  由于此框架更改（错误？），我们将检查线程更新为 test `SerialPort.IsOpen()`，在 4.7 中，当用户拉出设备时，它会立即报告设备关闭。我们确实会在 yank 上立即看到该消息，但对于我们的应用程序来说，在后台线程中`WM_DEVICECHANGE`进行测试更容易。`SerialPort.IsOpen()`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-12-05T00:17:33.453

使用 C# SerialPort.CDHolding 标志。

因此，在打开和读取循环之前，将布尔值保存到 lastCDHolding 标志。

在您阅读 test SerialPort.CDHolding != lastCDHolding 以捕获更改或仅测试 SerialPort.CDHoldin==false 以检测端口已关闭之后。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-12-24T09:24:00.453

我已经通过 Jeb 的代码编辑得到了这个解决方案。在这种情况下，我总是有一个后台计时器（但您也可以在连接 Comport 时启动它）当我连接 Comport 时，我将布尔“canDisconnect”设置为 true，这就是我使工作始终完美的方式。

```
 bool canDisconnect = false;

    private void tmrBackgroundTick_Tick(object sender, EventArgs e)
    {
        if (canDisconnect == true ){ 
        //Automatic disconnect program if Comport is removed 
            try
            {
                 ComPort.WriteLine("test");

            }
            catch (Exception ex)
            {
                disconnect();
                canDisconnect = false;
            }

        }
    } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-08-15T07:03:59.870

我在使用 RFID 设备时遇到了同样的问题。
可以通过发送虚拟数据来检测 USB 移除。

通常我只需要从 RFID 接收数据，但（在我的情况下）每秒发送一些数据并没有什么坏处。
当 USB 电缆断开时，serialPort.Write 会引发异常。
然后必须立即关闭端口，否则程序会挂起。

```
bool verify_connection()
{
    try
    {
        if (serialport.isOpen)
        {
            serialport.WriteLine("Dummy");
        }
    }
    catch (Exception ex)
    {
        serialport.Close();
    }
    return serialport.isOpen;
} 
```

使用 .NET Core 3.1 测试

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-01-25T10:06:46.990

我用一个简单的后台工作者解决了这个问题。我不断检查/将所有当前端口设置到一个阵列中，如果新端口与我的端口阵列不同，我会从这两个阵列中获取更改后的端口。

例子：

```
// global variable
List<string> oldPorts = new List<string>();    // contains all connected serial ports

private void bgw_checkSerialPorts_DoWork(object seder, DoWorkEventArgs e)
{
    while (true)
    {
        string[] currentPorts = SerialPort.GetPortNames();    // get all connected serial ports
        string[] diffPorts = currentPorts.Except(oldPorts.ToArray());    // get the differences between currentPorts[] and oldPorts-list

        if (diffPorts.Length > 0)
        {
            // iterate all changed ports
            for (int i = 0; i < diff.Length; i++)
            {
                // check if changed port was in old list
                if (oldPorts.Contains(diff[i]))
                {
                    // port in diff[] was removed
                }
                else
                {
                    // port in diff[] is a new device
                }
            }
        }

        oldPorts = currentPorts.ToList();   // update oldPortlist

        // check every 100ms
        Thread.Sleep(100);
    }
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-12-14T17:16:21.010

我面临着同样的问题。经过几次尝试，我得到了我想要的东西`SerialPort.DsrHolding`。

一旦 USB 电缆被拉出，它就会返回 false。我不知道这可能会失败的其他情况。但这对我有用。

# ios5 - UIPickerView 级联式选择

> ID：13408478
> 
> 赞同：1
> 
> 时间：2012-11-16T00:12:13.333
> 
> 标签：ios5, ios6, uipickerview

是否可以从一侧与另一侧动态过滤选择？

例如

| 车型 | 颜色 |

| 丰田 | 蓝色，黄色 |

| 福特 | 绿色、橙色、紫色 |

| 法拉利 | 红、绿、黄 |

因此，当 UIPickerview 显示时，我可以选择不同类型的汽车。在选择汽车类型时，我希望能够只选择指定的颜色。

目前，当 UIPickerView 显示时，我只能加载所有汽车类型和一种颜色范围。我不知道是否可以使用左侧的选项动态生成右侧。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T05:41:59.570

这实际上很简单。您需要`component 1`根据在 中选择的内容返回相关颜色`component 0`，例如：

```
- (NSString *)pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component
    //...
    case 1:
    {
        NSArray *colors = [self colorsWithSelection:self.selectedRow0];
        return colors[row];
    }
    //...
} 
```

然后执行以下操作：

```
- (void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component
{
    if (component == 0)
    {
        self.selectedRow0 = row;
        [pickerView reloadComponent:1];
        dispatch_async(dispatch_get_main_queue(), ^{
            [pickerView selectRow:0 inComponent:1 animated:YES];
        });
    }
} 
```

显然这可以优化，但它显示了这个想法。

# javascript - Javascript中的位压缩

> ID：13408485
> 
> 赞同：5
> 
> 时间：2012-11-16T00:12:55.780
> 
> 标签：javascript, encoding, compression

有没有办法将 250+ 1 和 0 的 JavaScript 数组压缩成更易于管理的东西（比如更短的字符串），然后可以管理地解压缩？有点像谷歌的图像编码方式......

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T00:32:32.430

我可以通过编码为基数 32 为您提供几乎 1:5 的压缩。我选择包含一个简单的长度值以使其允许可变长度。请看[这个 fiddle 演示了](http://jsfiddle.net/y2rma/)具有两个函数的技术，这些函数允许您往返值。（或者你可以看到我在@slebetman 提醒我 javascript 中存在的本机数字基数转换之前创建的更早、更天真的[十六进制版本。）](http://jsfiddle.net/EcSpe/)

这是一组 250 个 1 和 0 的示例输出。字符数不计算前导“250|”：

```
base 32, 50 chars: 250|qgl6alf1q2lbl1aclau3k5ana2kpals78alek59ilboeglajgu
base 16, 63 chars: 250|D42A6555E1D0AABA854CAABC3A155750A995578742AAEA1532AAF0E85553878 
```

您可以使用 base 64 编码将其减少到 42 个字符，但请注意，对于 base 32 和 base 64 版本，您最终可能会在最终结果中出现可能令人反感的单词（请参阅上面的小提琴以获取例子）。十六进制版本也可能包含令人反感的内容，但更少（一张坏脸让爸爸成为 cad？）

如果您需要再保存 8 个字符，请告诉我，我会为您编写额外的脚本。避免元音可能是处理令人反感的单词问题的一种方法。如果您也需要这样做，请告诉我。

如果你的位串*总是*250 个字符，那么函数可以简化一点，但我不想做这个假设。

作为参考，这里是 bits-to-base-32 函数。

```
function bitstringEncode(bitstring) {
    var i, l = bitstring.length,
        retval = l.toString() + '|';
    for (i = 0; i < l; i += 5) {
        retval += parseInt((bitstring.substr(i, 5) + '0000').substr(0, 5), 2).toString(32);
    }
    return retval;
} 
```

此函数将填充到最接近的 5 位，并且可能会在您提供的长度的末尾生成一个虚假的额外字符。我包含了每个转换函数的第二个版本，它填充到最接近的 10 位，这可能会生成最多两个虚假的额外字符。我包括它们是因为如果速度很重要，它们*可能*（或可能不会）更快，因为它们从输入中获取更大的块。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-17T20:24:55.557

（其他答案中没有太多解释，所以除了介绍我的方法之外，我想讨论一下我的答案中到目前为止提出的方法。请多多包涵。）

正如其他答案所表明的那样，位数组可以被视为位流，这本质上是一个以 2 为基数的相当大的数字。相同的数字可以写在另一个数字基数中。因为十进制数字以外的单个字符可用于更大数字基数中的更高值数字（例如“F”或“f”表示十六进制中的 15），数字基数越大，需要显示的数字（字符）越少它。

正如这些答案中所建议的那样，您可以使用 base64 编码甚至更大的基数（Unicode Base Multilingual Plane 有 65536 个代码点，并且[符合 ECMAScript 实现支持](http://ecma-international.org/ecma-262/5.1/#sec-2)，因此基数 65536 是一种明显的可能性，尽管[您必须再次进行百分比编码对于 URIs](https://www.rfc-editor.org/rfc/rfc3986#section-2.1)），但在 ECMAScript 中需要一个用户定义的函数，也许是一个包含它的库；至少它需要转换算法的非本地实现，这必然比本地慢。

幸运的是，ECMAScript 实现具有内置方法，允许您将数字从一个基数转换为另一个基数，从基数 2 转换为 36（含）。使用[`parseInt(string, radix)`](http://ecma-international.org/ecma-262/5.1/#sec-15.1.2.2)它可以将写入 base的`String`数值转换为类型的值，使用它可以将值转换为写入 base的数字。`string``radix``Number`[`number.toString(radix)`](http://ecma-international.org/ecma-262/5.1/#sec-15.7.4.2)`Number``number``String``radix`

但是，因为[ECMAScript`Number`类型是 IEEE-754 双精度浮点数的实现](http://ecma-international.org/ecma-262/5.1/#sec-4.3.19)，所以整数精度有*几个*限制。AIUI 之一是，对于一个满是 1 的位数组，除非您的数组不包含超过 53 个位元素（或者您的字符串不包含超过 53 个“1”），否则您无法将整个位字符串向前转换并且在不损失精度的情况下返回。（[IEEE-754 双精度数的有效位精度为 53 位。](http://en.wikipedia.org/wiki/Double-precision_floating-point_format#IEEE_754_double-precision_binary_floating-point_format:_binary64)）

但是您可以将大（二进制）数字视为较小（二进制）数字字符串的串联，将原始比特流分成足够小的块并将每个块转换为更大的基数。`0`在任何情况下，每个块都会丢失有关连续高位的信息。所以在从转换结果中恢复比特流时，需要在左边的每个chunk上补零，这样每个解码后的chunk都和原来的chunk一样长。块大小需要与编码流所需的步数以及解码时需要填充的零的数量相权衡。

AIUI，如果从左到右处理比特流，每个块编码的数字可能会更大，因此编码的字符串可能会更长，即使基数更大，因为可能会设置块中的高位（例如，比较右边界`11|001|001`- 3|1|1 - 和左边界`110|010|01`- `6|2|1`-，两者的块大小都是 3)。首先对数据进行编码的原因是*短*URI。因此，由于流在编码之前完成，您应该从右到左处理流。（如果该数字是块大小的倍数，则此方法还消除了在编码字符串中包含原始位数的必要性。）

这些考虑导致了以下*一般*（为了可读性，未完全优化）功能：

```
/*
 * @param bitArray : Array[Number|String]
 * @param chunkSize : optional Number = 53
 * @param chunkBase: optional Number = 36
 * @param delim : optional String = ","
 *   Delimiter to use.
 * @return string
 */
function bitEncode (bitArray, chunkSize, chunkBase, delim)
{
  var chunkArray = [];
  if (!chunkSize || chunkSize < 2 || chunkSize > 53)
  {
    chunkSize = 53;
  }

  if (!chunkBase)
  {
    chunkBase = 36;
  }

  for (var i = bitArray.length; i > 0; i -= chunkSize)
  {
    var index = i - chunkSize;
    if (index < 0)
    {
      index = 0;
    }

    var slice = bitArray.slice(index, i);
    var chunk = parseInt(slice.join(""), 2).toString(chunkBase);
    chunkArray.unshift(chunk);
  }

  return chunkArray.join(delim);
}

/*
 * @param input : String
 * @param length : Number > 1
 *   Target length of input after left-padded with zeros
 * @return string
 */
function leadingZero (input, length)
{
  input = String(input);

  var inputLength = input.length;
  if (inputLength >= length)
  {
    return input;
  }

  var padding = [];
  padding.length = length + 1 - inputLength;

  return padding.join("0") + input;
}

/*
 * @param s : String
 * @param chunkSize : optional Number = 53
 * @param chunkBase : optional Number = 36
 * @param delim : optional String = ","
 * @return Array[string]
 */
function bitDecode (s, chunkSize, chunkBase, delim)
{
  var chunkArray = s.split(delim || ",");
  var bitArray = [];
  if (!chunkSize || chunkSize > 53)
  {
    chunkSize = 53;
  }

  if (!chunkBase)
  {
    chunkBase = 36;
  }

  for (var i = 0, len = chunkArray.length; i < len; ++i)
  {
    bitArray = bitArray.concat(
      leadingZero(
        parseInt(chunkArray[i], chunkBase).toString(2),
        chunkSize)
      .split(""));
  }

  return bitArray;
} 
```

可以看到，这里默认的块大小是 53 位，默认基数是 36。因此，一个 250 位随机位的数组 –</p>

```
var a = [];
for (var i = 250; i--;)
{
  a[i] = +(Math.random() < 0.5);
} 
```

– 可能是（在 53 位的右边界块中）

```
/*
              "11111110110011110011000011001010101010\
11010011111010010010100110100100010011001011001010111\
00100100010000101110011010000011100010010101011100011\
11100010110110111001101110000100011101101111101111100\
10001110110100010101110010011100110110100101110010011"
*/
a.join("") 
```

默认编码为

```
/* "3hou1lt6,21ewvahkfvb,ck8t6olnmr,26lbvliu2rg,1dh74lghy8j" (55 characters) */
var s = bitEncode(a) 
```

并且可以像这样解码：

```
var a = bitDecode(s); 
```

这些*通用*函数应该允许您改变块大小和基数，以便为您的用例优化编码字符串。（由于分隔符，任何可能令人反感的词都可能被一分为二。）

但是，请注意，如果原始数组长度不是块大小的倍数，则解码后的数组将包含额外的前导零。如果存在这种可能性并造成问题，您可以按照 ErikE 的建议传递原始长度，然后使用该值来解决该问题：

```
var originalLength = …;

a = a.slice(a.length - originalLength); 
```

或（在所有主要实现中，除了 1.6 版之前的 JavaScript 和 9.52 版之前的 Opera ECMAScript）

```
a = a.slice(-originalLength); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T07:33:31.887

这两个函数都需要一个字符串输入：

```
// input size must be less then 256 characters
// first byte in returned output is length of original string
// this is used during decoding for correct padding of last 8 bits
function encodeBits(input) {
    var output = String.fromCharCode(input.length);
    while(1) {
        output += String.fromCharCode(parseInt(input.substr(0,8),2));
        input = input.substr(8);
        if(input.length == 0) {
            break;
        }
    }

    return output;
}

function decodeBits(input) {
    var output = "";    
    var bits;
    var finalLength = input.charCodeAt(0);
    input = input.substr(1);

    while(1) {
        bits = input.charCodeAt(0).toString(2);

        // string must be left padded with 0's
        while(bits.length < 8) {
            if((bits.length+output.length) == finalLength) {
                break;
            }
            bits = "0"+bits;
        }

        output += bits;

        input = input.substr(1);
        if(input.length == 0) {
            break;
        }
    }

    return output;
} 
```

**编码**

```
var instr = "101001110010100110010000111011111010110110001001111010110110";
var encStr = encodeBits(instr); 
```

您可以使用*转义对输出进行编码*

```
var escapedStr = escape(encStr); // returns '%3C%A7%29%90%EF%AD%89%EB%06' 
```

**解码**

使用*unescape解码*

```
var unescapedStr = unescape("%3C%A7%29%90%EF%AD%89%EB%06");
var bitStr = decodeBits(unescaped);

// bitStr now contains original input
"101001110010100110010000111011111010110110001001111010110110" 
```

作为 escape/unescape 的替代方案，您还可以使用[btoa](https://developer.mozilla.org/en-US/docs/DOM/window.btoa)和[atob](https://developer.mozilla.org/en-US/docs/DOM/window.atob)，这将为您提供更短的编码。

这些功能及其用法在此工作示例中进行了演示：http: [//jsfiddle.net/EU4nL/](http://jsfiddle.net/EU4nL/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T00:30:35.567

我刚刚制作了这个非常幼稚的实现。

它将在`"111000111"`和之间转换`[['1',3],['0',3], ['1',3]]`（反之亦然）。

希望它应该适用于大型二进制字符串，其中应该有很多重复字符。在最坏的情况下（`01010101...`），您将使用`1+7*n`字符（`n`即输入字符串的大小）。

希望有人会有更有效的解决方案？

```
var compress = function (input){
    var output = [], current = null;
    for (var t = 0; t < input.length; ++t ) {
        if (current === null || current[0] !== input[t]) {
            current = [input[t], 0];
            output.push(current);
        }

        ++ current[1];
    }

    return output;
};

var decompress = function (input) {
    var output = '';

    for (var t = 0; t < input.length; ++t) {
        for (var u = 0; u < input[t][1]; ++u) {
            output += input[t][0];
        }
    }

    return output;
}; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-16T01:22:46.777

为什么不使用base64？我前段时间写过这样的东西，但它使用了类型化数组：

[https://github.com/beatgammit/base64-js/blob/master/lib/b64.js](https://github.com/beatgammit/base64-js/blob/master/lib/b64.js)

基本上只需将您的 1 和 0 转换为字节并进行 base64 编码。Base64 可以在 URL 中传递，因此它适用于您的情况。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-16T05:19:41.637

啊！我终于找到了一篇几个月前读过的文章。它描述了多种有效压缩字符串的方法，您应该尝试一下：[就是这样](http://www.bitsnbites.eu/?p=20)。

论文中提到的技术：

*   base64
*   拉丁语1
*   UTF-16
*   PNG

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-16T01:16:03.207

这是一个将 1 和 0 转换为十六进制的实现。在服务器上，将其转换回 1 和 0 应该相当简单。转换为十六进制基本上每个字符存储 4 位，因此它将您的 250 位序列转换为 63 个字符。

但请注意，这会将数据转换为 4 位块，因此您需要将序列填充为 252 位（用于 4 位对齐）或 256 位（用于 8 位对齐）。下面的实现不处理填充，因为我不知道您要从哪一端填充数据：

```
function binArray2HexArray (binArray) {
    var hexArray = [];
    while (binArray.length) {
        hexArray.push(parseInt(binArray.splice(0,4),2).toString(16));
    }
    return hexArray;
} 
```

显然，您可以加入返回的数组以将其转换为十六进制字符串。

如果您将数据填充到 8 位对齐，您可以通过将拼接参数更改为每个循环对 8 位进行操作来加快函数速度：

```
binArray.splice(0,8) 
```

同样，如果您将数据填充为 16 位对齐，则可以通过一次拼接 16 位来再次加快速度。由于浮点表示，我相信在javascript开始舍入数字之前的限制是32位。因为我不确定各种 javascript 引擎将如何处理 32 位整数的符号，所以我会更喜欢 16。

# php - SQL 数组语句

> ID：13408486
> 
> 赞同：0
> 
> 时间：2012-11-16T00:13:23.830
> 
> 标签：php, mysql, sql

您好我正在尝试创建一个标签过滤功能，其中可以使用标签过滤图像。具体来说，我在传递 tagz 数组时遇到了麻烦，这可能取决于我的表设置，无论是对 SQL 或代码的任何其他部分的任何帮助，都将不胜感激。提前致谢。

```
<?php
    if (@mysql_connect('*****','*****','****')) {
        if (mysql_select_db('****')) {
            $tagz = $_REQUEST['tagz'];
            $tagz = mysql_real_escape_string($tagz);
            $tagz = implode(", ", $tagz);

            $query = " SELECT boxes . BNO, boxes . BName, boxes . URL, images . Ipath FROM boxes LEFT JOIN images ON boxes . INO = images . INO LEFT JOIN links ON boxes . BNO = links . BNO WHERE links . TNO LIKE '$tagz' ";
            $query_run = mysql_query($query);
        } while ($query_row = mysql_fetch_assoc($query_run)) {
            echo $row ='<li id='.$query_row['BNO'].' class="box">;
        }
    }

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T00:18:34.363

您是否尝试过回显 $tagz 然后手动执行 SQL 以确保其正常工作？可能只是 SQL 中的逻辑问题或破坏 SQL 的哑字符。

还可以考虑切换到 mysqli 或 pdo，它将消除对 escape_string tagz 的需要。

# regular-language - 抽引理（常规语言）

> ID：13408487
> 
> 赞同：5
> 
> 时间：2012-11-16T00:13:30.257
> 
> 标签：regular-language, automata, formal-languages, pumping-lemma

我需要一些帮助来解决抽水引理问题。

```
L = { {a,b,c}* | #a(L) < #b(L) < #c(L) } 
```

这是我到目前为止得到的：

```
y = uvw is the string from the pumping lemma. 
```

我让 y = abbc^n，n 是来自抽水引理的长度。y 在 L 中是因为 a:s 的数量小于 b:s 的数量，并且 b:s 的数量小于 c:s 的数量。

我让 u = a，v = bb 和 w = c^n。|紫外线| < y，如抽水引理中所述。如果我“抽” (bb)^2 那么我得到

```
y = abbbbc^n which violates the rule #b(L) < #c(L). 
```

这是正确的吗 ？我在“正确的道路”上吗？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-16T03:17:56.333

pumping lemma 的主要思想是告诉你，当你有一种`L`具有无限数量的术语的常规语言时，语言中存在一种永远重复的模式。

与该语言相关的正则表达式将包含 KLEENE-STAR(pattern)。

与该正则表达式（和语言）关联的自动机将包含一个循环。

证明是使用鸽子原理完成的。

这![图片](../Images/a1aa46772348610b807636bf317c5707.png)是很有启发性的。

请注意，在这种情况下，所有术语都必须以 q0 开头并以 qn 结尾。因此，定义语言的自动机是有限的（最多 N 个状态），因此状态数量有限，但单词（即术语）可以有 >N 个字母。鸽子[原理](https://en.wikipedia.org/wiki/Pigeonhole_principle)告诉我们，必须有一个状态达到 2 次，所以在那个状态下会出现一个循环。

在您的符号中，您可以与图像进行对应：

*   你`u`来自`x`图像

*   `v`在`y`图像中

*   `w`来自`z`图像

要从 到 到达`q0`，`qn`您可以使用集合中的任何字符串：`{ uw , uvw, uvvw, uvvvw, ... }`。

在这种特殊情况下，模式`P`是`y`，集合`X`是`{xz xyz xyyz xyyyz ...}`并且`S`是`length(x)+length(y)`。

# bash - Bash 中“if”语句的“and”运算符

> ID：13408493
> 
> 赞同：255
> 
> 时间：2012-11-16T00:14:11.510
> 
> 标签：bash, if-statement

我正在尝试创建一个简单的 Bash 脚本来检查网站是否已关闭，并且由于某种原因“and”运算符不起作用：

```
#!/usr/bin/env bash

WEBSITE=domain.com
SUBJECT="$WEBSITE DOWN!"
EMAILID="an@email.com"
STATUS=$(curl -sI $WEBSITE | awk '/HTTP\/1.1/ { print $2 }')
STRING=$(curl -s $WEBSITE | grep -o "string_to_search")
VALUE="string_to_search"

if [ $STATUS -ne 200 ] && [[ "$STRING" != "$VALUE" ]]; then
    echo "Website: $WEBSITE is down, status code: '$STATUS' - $(date)" | mail -s "$SUBJECT" $EMAILID
fi 
```

“-a”运算符也不起作用：

```
if [ $STATUS -ne 200 ] -a [[ "$STRING" != "$VALUE" ]] 
```

能否请您告知何时使用：

*   单方括号和双方括号
*   插入语

?

* * *

## 回答 #1

> 赞同：371
> 
> 时间：2012-11-16T00:22:52.077

你所拥有的应该工作，除非`${STATUS}`是空的。这样做可能会更好：

```
if ! [ "${STATUS}" -eq 200 ] 2> /dev/null && [ "${STRING}" != "${VALUE}" ]; then 
```

或者

```
if [ "${STATUS}" != 200 ] && [ "${STRING}" != "${VALUE}" ]; then 
```

很难说，因为您没有向我们确切展示您的脚本出了什么问题。

个人意见：永远不要使用`[[`. 它抑制重要的错误消息，并且不能移植到不同的 shell。

* * *

## 回答 #2

> 赞同：66
> 
> 时间：2016-02-23T07:06:31.783

试试这个：

```
if [ "${STATUS}" -ne 100 -a "${STRING}" = "${VALUE}" ] 
```

或者

```
if [ "${STATUS}" -ne 100 ] && [ "${STRING}" = "${VALUE}" ] 
```

* * *

## 回答 #3

> 赞同：33
> 
> 时间：2012-11-16T00:25:11.163

试试这个：

```
if [ $STATUS -ne 200 -a "$STRING" != "$VALUE" ]; then 
```

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2012-11-16T01:05:10.543

引用：

> “-a”运算符也不起作用：
> 
> 如果 [ $STATUS -ne 200 ] -a [[ "$STRING" != "$VALUE" ]]

更详细的解释：`[`and`]`不是 Bash 的保留字。关键字引入了要由作业评估的`if`条件（如果作业的返回值为真，则条件为真，`0`否则为假）。

对于琐碎的测试，有[`test`](https://linux.die.net/man/1/test)程序 ( `man test`)。

正如一些发现行之类`if test -f filename; then foo bar; fi`的令人讨厌的行，在大多数系统上，您会找到一个名为的程序`[`，实际上它只是该`test`程序的符号链接。当`test`被称为 时`[`，您必须添加`]`为最后一个位置参数。

所以`if test -f filename`基本上与`if [ -f filename ]`. 在这两种情况下，`test`程序都将启动，并且两个进程的行为应该相同。

这是您的错误：`if [ $STATUS -ne 200 ] -a [[ "$STRING" != "$VALUE" ]]`将解析为`if`+ 一些工作，该工作是除`if`自身之外的一切。这项工作只是一个*简单的命令*（Bash 代表导致单个进程的东西），这意味着第一个单词 ( `[`) 是命令，其余是位置参数。*在第一个之后还有剩余的参数`]`*。

也不是，`[[`确实是一个 Bash 关键字，但在这种情况下，它只被解析为一个普通的命令参数，因为它不在命令的前面。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2022-02-17T23:00:47.770

首先，您不需要将变量名大写。通常，应该为那些被`export`编辑到环境中的变量名保留全大写变量名，以使其他可执行文件受益。

其次，你所拥有的`&&`应该可以工作，但在面对可能为空或非数字的状态变量时不是很有弹性。

最后，`-a`尝试没有成功，因为它是/ ...`-a`语法的一部分；它在括号内*。*`test``[``]`

 *从根本上说，关于 shell 中的条件，最重要的是*它们只是命令*。这个 if 表达式：

```
if foo; then
  echo true
else
  echo false
fi 
```

与此完全相同：

```
foo
if [ $? -eq 0 ]; then
  echo true
else
  echo false
fi 
```

所以`if`（或`while`或`until`）之后的东西可以是任何命令。

对于`&&`and`||`运算符也是如此：两边的东西都只是命令。该序列`foo && bar`运行该命令`foo`，然后，只有当该命令以状态 0 退出时，它才会运行`bar`. （因此它实际上是 . 的缩写`if foo; then bar; fi`。）类似地，`foo || bar`运行`foo`，然后，如果该命令以*非零*状态退出，则运行`bar`. （所以它实际上是 . 的缩写`if ! foo; then bar; fi`。）

这是许多初学 shell 程序员错过的主要事情。shell 本身没有表达式，只有运行命令。

但是，由于您经常想要在常规非 shell 编程语言中执行比较和其他可能是布尔表达式的操作，因此您可以运行一个特殊的命令来执行这些操作。它曾经是一个单独的二进制文件，但现在它已内置到 shell 中。它的真名是`test`，但也可以调用 as `[`，在这种情况下，如果它的最后一个参数不匹配，它会报错`]`。括号内或之后的参数`test`构成要评估的表达式，如果表达式为真，则测试命令以状态 0 退出，如果为假，则以非零状态退出。因此，它将通常是语句在其他编程语言中所期望的那种东西`if`变成你可以运行的命令，有效地将它翻译成 shell。

`[`...的出现`]`可能会产生误导；它确实像拼写一样被解析`test`，使用与任何常规 shell 命令相同的命令行处理。这意味着如果您尝试比较事物，`<`否则`>`它们将被解释为重定向。尝试使用`(`and`)`进行分组，您将创建一个子shell（并且可能会在命令的参数中间生成语法错误）。尝试将表达式与`&&`括号`||`结合起来，您将提前终止命令并再次触发语法错误。

你仍然可以在括号*外*`&&`使用and ；那时，您只是在运行 test 命令的多个实例，而不仅仅是一个。但是你也可以使用and只要它们在*括号*内。所以这两个管道产生相同的结果：`||` *`-a``-o`*

 **```
[ "$status" -ne 200 -a "$string" != "$value" ]

[ "$status" -ne 200 ] && [ "$string" != "value" ] 
```

不同之处在于第一个由`test`命令的一个实例检查，而第二个运行其中两个。

Korn Shell 引入了一个新版本的测试命令，它用两个括号而不是一个括号拼写，在这两个括号之间是一个特殊的语法环境，它与常规命令的解析方式不同。在双括号之间，您可以安全地使用不带引号的参数扩展、不带引号的括号进行分组`<`和`>`字符串比较（坚持`-lt`并`-gt`以数字方式比较），`&&`以及`||`作为布尔运算符。`[[`...`]]`还增加了匹配 glob 模式 ( `[[`foo == f* `]]`) 和正则表达式 ( `[[ foo =~ ^f ]]`) 的能力。

Bash 和 Zsh 等现代 shell 从 Ksh 继承了这种结构，但它不是 POSIX 规范的一部分。如果您处于必须严格遵守 POSIX 的环境中，请远离它；否则，这基本上取决于个人喜好。

请注意，算术替换表达式`$((`...`))` *是*POSIX 的一部分，它的规则与`[[`...非常相似`]]`。主要区别在于相等和不等式测试（这里产生一个数值，0 表示假，1 表示真）以数字方式而不是字符串方式完成：`[[ 10 < 2 ]]`为真，但 `$(( 10 < 2 ))`产生 0。

再一次，现代 shell 扩展了 POSIX 规范，添加了一个独立的`$`-less 版本的`((`... `))`，它的功能基本上是一个自动引用的命令，如果你正在处理数字`let`，你可以在表达式中使用它。`if`所以你的第一个条件也可以写成`(( status != 200 ))`。同样，除了必须坚持 POSIX 之外，这取决于个人喜好。我喜欢在处理数字时使用`((`... ，但其他人更喜欢坚持使用or并使用数字运算符，例如.`))``[``[[``-lt`

因此，对于它的价值，这是我重写代码的方式：

```
website=domain.com
subject="$website DOWN!"
email=an@email.com
value="string_to_search"
status=$(curl -sI "$website" | awk '/HTTP\/1.1/ { print $2 }')
string=$(curl -s "$website" | grep -o "$value")

if (( status != 200 )) && [[ $string != $value ]]; then
    mail -s "$subject" "$email" <<<"Website: $website is down, status code: '$status' - $(date)"
fi 
```***

# javascript - 一个滑块，两个图表，带有 Rickshaw 和 D3.js

> ID：13408497
> 
> 赞同：2
> 
> 时间：2012-11-16T00:14:30.787
> 
> 标签：javascript, slider, d3.js, rickshaw

我有两个用 Rickshaw 渲染的图形，非常好。我有一个滑块，我希望能够操纵两个图表，但它现在正在做的是操纵我声明的最后一个图表：

```
//graph one
var graph_one = new Rickshaw.Graph( {
        element: document.querySelector("#chart_one"),
        height: 150,
        width: 170,
        renderer: 'bar',
        series: data
} );

//slider code
var slider_one = new Rickshaw.Graph.RangeSlider({
    element: document.querySelector('#slider-range'),
    graph: graph_one
});

graph_one.render();

//graph two
var graph_two = new Rickshaw.Graph( {
        element: document.querySelector("#chart_two"),
        renderer: 'line',
        height: 150,
        width: 170,
        series: data
} );

//slider code
var slider_two = new Rickshaw.Graph.RangeSlider({
    element: document.querySelector('#slider-range'),
    graph: graph_two
});

graph_two.render(); 
```

是否可以让一个滑块操纵两个图形？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T17:22:46.837

我通过编辑 rickshaw.js 来实现这一点，特别是编辑 Rickshaw.Graph.RangeSlider 以接受图形数组作为图形变量：

```
Rickshaw.Graph.RangeSlider = function(args) {

    var element = this.element = args.element;
    var graph = this.graph = args.graph;
    //added by bozdoz
    if(graph.constructor === Array){
            $( function() {
                $(element).slider( {
                    range: true,
                    min: graph[0].dataDomain()[0],
                    max: graph[0].dataDomain()[1],
                    values: [ 
                        graph[0].dataDomain()[0],
                        graph[0].dataDomain()[1]
                    ],
                    slide: function( event, ui ) {
                        //on slide, move both graphs
                        for(var i=0; i < graph.length; i++){
                            graph[i].window.xMin = ui.values[0];
                            graph[i].window.xMax = ui.values[1];
                            graph[i].update();

                            // if we're at an extreme, stick there
                            if (graph[i].dataDomain()[0] == ui.values[0]) {
                                graph[i].window.xMin = undefined;
                            }
                            if (graph[i].dataDomain()[1] == ui.values[1]) {
                                graph[i].window.xMax = undefined;
                            }
                        }
                    }
                } );
            } );
            graph[0].onUpdate( function() {

                var values = $(element).slider('option', 'values');

                $(element).slider('option', 'min', graph[0].dataDomain()[0]);
                $(element).slider('option', 'max', graph[0].dataDomain()[1]);

                if (graph[0].window.xMin == undefined) {
                    values[0] = graph[0].dataDomain()[0];
                }
                if (graph[0].window.xMax == undefined) {
                    values[1] = graph[0].dataDomain()[1];
                }

                $(element).slider('option', 'values', values);

            } );
            ... 
```

然后，在声明图形时，我只需要将滑块代码添加到最后一个图形，包括两个图形变量作为数组：

```
var slider_two = new Rickshaw.Graph.RangeSlider({
    element: document.querySelector('#slider-range'),
    graph: [graph_one, graph_two]
}); 
```

完全按照我想要的方式工作：http: [//jsfiddle.net/bozdoz/k4NmL/](http://jsfiddle.net/bozdoz/k4NmL/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-02T22:13:19.413

这是最新版本的 Rickshaw 的上述代码的修改版本：

```
Rickshaw.Graph.RangeSlider = Rickshaw.Class.create({

initialize: function(args) {

    var element = this.element = args.element;
    var graph = this.graph = args.graph;
    this.onslide = args.onslide;

    this.build();

    if( graph.constructor === Array ) {
        for( var i=0; i<graph.length; i++ ) {
            graph[i].onUpdate( function() { this.update() }.bind(this) );
        }
    } else {
        graph.onUpdate( function() { this.update() }.bind(this) );
    }
},

build: function() {

    var element = this.element;
    var graph = this.graph;
    var onslide = this.onslide;

    if( graph.constructor === Array ) {
        $( function() {
            $(element).slider( {
                range: true,
                min: graph[0].dataDomain()[0],
                max: graph[0].dataDomain()[1],
                values: [
                    graph[0].dataDomain()[0],
                    graph[0].dataDomain()[1]
                ],
                slide: function( event, ui ) {
                    for( var i=0; i<graph.length; i++) {
                        graph[i].window.xMin = ui.values[0];
                        graph[i].window.xMax = ui.values[1];
                        graph[i].update();

                        // if we're at an extreme, stick there
                        if (graph[i].dataDomain()[0] == ui.values[0]) {
                            graph[i].window.xMin = undefined;
                        }
                        if (graph[i].dataDomain()[1] == ui.values[1]) {
                            graph[i].window.xMax = undefined;
                        }
                    }
                    if( onslide ) {
                        onslide(ui.values[0],ui.values[1]);
                    }
                }
            } );
        } );

        element[0].style.width = graph[0].width + 'px';

    } else {
        $( function() {
            $(element).slider( {
                range: true,
                min: graph.dataDomain()[0],
                max: graph.dataDomain()[1],
                values: [
                    graph.dataDomain()[0],
                    graph.dataDomain()[1]
                ],
                slide: function( event, ui ) {

                    graph.window.xMin = ui.values[0];
                    graph.window.xMax = ui.values[1];
                    graph.update();

                    // if we're at an extreme, stick there
                    if (graph.dataDomain()[0] == ui.values[0]) {
                        graph.window.xMin = undefined;
                    }
                    if (graph.dataDomain()[1] == ui.values[1]) {
                        graph.window.xMax = undefined;
                    }
                    if( onslide ) {
                        onslide(ui.values[0],ui.values[1]);
                    }
                }
            } );
        } );

        element[0].style.width = graph.width + 'px';
    }
},

update: function() {

    var element = this.element;
    var graph = this.graph;

    var values = $(element).slider('option', 'values');

    if( graph.constructor === Array ) {
        graph = graph[0];
    }

    $(element).slider('option', 'min', graph.dataDomain()[0]);
    $(element).slider('option', 'max', graph.dataDomain()[1]);

    if (graph.window.xMin == null) {
        values[0] = graph.dataDomain()[0];
    }
    if (graph.window.xMax == null) {
        values[1] = graph.dataDomain()[1];
    }

    $(element).slider('option', 'values', values);
}
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-19T10:18:22.343

已经实现的更好的解决方案是使用*Rickshaw.Graph.RangeSlider.Preview* 类。

它可以采用参数`graph`或`graphs`为了管理 1 个单个图形或图形数组。

例如。

```
var slider = new Rickshaw.Graph.RangeSlider.Preview ({
	graphs: [graphone, graphtwo],
	element: document.querySelector('#slider')
});
```

# java - 在 Java 中解析 URL

> ID：13408498
> 
> 赞同：3
> 
> 时间：2012-11-16T00:14:36.637
> 
> 标签：java, php

我正在寻找与 Java 中 PHP 的“parse_url”函数等效的函数。我*没有*在 Tomcat 中运行。我将查询字符串保存在数据库中，我试图将其分解为单个参数。我在 Pentaho 内部工作，所以我只有 Java SE 类可以使用。我知道我可以编写一个插件或其他东西，但如果我要做所有这些，我将只用 PHP 编写脚本并完成它。

TLDR：寻找一个 Java 标准类/函数，它接受一个字符串并输出一组参数。

谢谢，

罗杰

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-16T00:22:09.050

您可以使用以下方法完成此操作[`java.net.URL`](http://docs.oracle.com/javase/6/docs/api/java/net/URL.html)：

```
URL url = new URL("http://hostname:port/path?arg=value#anchor");
String protocol = url.getProtocol(); // http
String host = url.getHost(); // hostname
String path = url.getPath(); // /path
int port = url.getPort(); // port
String query = url.getQuery(); // arg=value
String ref = url.getRef(); // anchor 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-16T02:33:36.210

这是一些又快又脏的东西（还没有编译过，但你应该明白了。

```
URL url = new URL("http://...");
String query = url.getQuery();
String paramStrings[] = query.split("\\&");
HashMultiMap<String, String> params = HashMultiMap.create(); // <== google guava class
for (int i=0;iparamStrings.length;i++) {
    String parts[] = params[i].split("=");
    params.put(URLDecoder.decode(parts[0], "UTF-8"), URLDecoder.decode(parts[1], "UTF-8"));
}

Set<String> paramVals = params.get("paramName"); 
```

如果你不想使用 guava 类，你可以用一些额外的代码和 HashMap> 来完成同样的事情

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-11-16T00:21:07.947

Java中没有这样的东西。您将需要手动解析字符串并创建自己的数组。您可以使用 StringTokenizer、String.split 或正则表达式轻松创建自己的 parse_url。

您还可以将这些字符串从数据库转换回 URL 对象并以这种方式解析它们，[这里是 docs](http://docs.oracle.com/javase/tutorial/networking/urls/urlInfo.html)。

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2012-11-16T00:17:01.340

字符串具有拆分功能，但您需要编写自己的正则表达式来确定如何拆分字符串。

请参阅：[http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#split(java.lang.String)](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#split(java.lang.String))

# ruby - 如何通过 Salesforce REST API 获得写入权限？

> ID：13408502
> 
> 赞同：2
> 
> 时间：2012-11-16T00:14:53.087
> 
> 标签：ruby, rest, oauth, salesforce, databasedotcom-gem

我目前正在尝试通过 Ruby 和 databasedotcom-gem 访问 salesforce.com 数据库。我在这里按照自述文件：[https ://github.com/heroku/databasedotcom](https://github.com/heroku/databasedotcom)

我能够连接到数据库并访问联系人，并找到该联系人的电子邮件。所以连接工作正常。但是，当我运行时：

```
contact.update_attributes "Name" => "New Name" 
```

我收到以下错误

> ensure_expected_response'：无法创建/更新字段：名称。请检查安全性？>此字段的设置，并验证它对于您的个人资料或权限集是读/写的。(Databasedotcom::SalesForceError)

好像我已经读取但没有对 salesforce 数据库的写入权限。这是我如何使用 oauth 的问题（我的理解非常基础）？还是仅仅是 salesforce.com 上的设置更改？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-16T03:41:09.620

并非所有字段都是可写的，您只是碰巧选择了一个不可写的字段来进行测试。联系人的姓名字段是名字和姓氏字段的只读复合字段，如果要更改联系人姓名，则需要更新名字和姓氏字段，而不是姓名字段。

# r - 每个 bin 的平均值直方图

> ID：13408503
> 
> 赞同：4
> 
> 时间：2012-11-16T00:14:59.870
> 
> 标签：r, ggplot2

我正在尝试创建一个直方图，其中 bin 高度是落入每个 bin 的值的平均值。下面 p2 的代码是我认为可行的。

```
library(ggplot2)
m <- mtcars[1:20, ];
p <- ggplot(m, aes(x = mpg)) + geom_histogram(binwidth = 5);
p <- p + aes(weight = wt); # works, but is the sum of the wt
p2 <- p + aes(weight = wt / ..count..); # does not work, but the idea I am going for 
```

抱歉，如果我在这里遗漏了一些明显的东西，但我感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2020-07-07T05:14:37.680

您现在可以使用`stat_summary_bin`它。

```
ggplot(mtcars, aes(x=mpg, y=wt)) +
  stat_summary_bin(fun.y = "mean",
                   geom="bar",
                   binwidth=5
                   ) 
```

[![在此处输入图像描述](../Images/77014c26b30ab505250a7a4502439554.png)](https://i.stack.imgur.com/zr7Hg.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T01:46:17.477

您可以使用以下方法计算均值：

```
m <- mtcars[1:20, ];
m$br <- cut(m$mpg,hist(m$mpg,5,plot=F)$breaks);
mean.wt <- tapply(m$wt,m$br,mean);
m2 <- data.frame(mpg.bin=names(mean.wt),mean.wt);
ggplot(m2,aes(x=mpg.bin,y=mean.wt)) + geom_bar(); 
```

![在此处输入图像描述](../Images/b4c02883711b1a7f5d32633c32bf70ed.png)

# c# - Twitter OAuth：仅使用客户端 ID 和密码进行身份验证

> ID：13408505
> 
> 赞同：0
> 
> 时间：2012-11-16T00:15:23.083
> 
> 标签：c#, twitter, twitter-oauth

我需要使用以下 REST 请求访问 Twitter API 用户时间线服务，以便我可以从提要中提取一些推文以显示在网站上：“https://api.twitter.com/1/statuses/user_timeline.json?screen_name =弗罗萨里奥”

它主要工作，但在执行此请求时我收到零星的 401 和 500 错误；这似乎是因为我达到了未经身份验证的 API 调用的速率限制。

我想使用我的客户端 ID 和密码进行身份验证，以便我可以利用增加的速率限制。我想只使用我的客户端 ID 和密码来使用服务器端 OAuth 流来执行此操作；但如果需要，也可以提供用户凭据。但是，这需要全部是服务器端；每次我们加载网站时，我都无法通过 OAuth 重定向流程向 Twitter 的 API 进行身份验证；只是为了下载这些推文。我有哪些选择？我查看了 Twitter 的 OAuth 文档，并没有看到任何对我的情况有用的东西。但也许我错过了一些东西。

非常感谢任何建设性的意见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T08:55:46.660

您只需要授权您的应用程序一次。查看 Spring Social Twitter 扩展中的 MVC 快速入门： [http ://www.springframework.net/social-twitter/](http://www.springframework.net/social-twitter/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T00:23:51.877

使用 oAuth 时，您使用它来验证当前用户，以便您可以访问他们的特定推文等，这不是您想要做的。您只是在寻找一种下载某些推文的方法吗？

您可以创建一个控制台应用程序或进程来为您下载推文，将它们存储在数据库中，然后从您的数据库中读取。

如果有很多推文，我建议使用[Twitter Stream API](https://dev.twitter.com/docs/streaming-apis)。

# java - 无需在 Selenium 中等待即可快速断言元素不存在

> ID：13408507
> 
> 赞同：2
> 
> 时间：2012-11-16T00:15:35.923
> 
> 标签：java, selenium, selenium-webdriver

Selenium IDE 中的 Java Junit 导出器默认设置 30 秒[隐式等待](http://seleniumhq.org/docs/04_webdriver_advanced.html#implicit-waits)。这意味着，测试元素的断言不存在将导致不必要的延迟 30 秒。

我曾尝试使用`WebDriverWait`超时时间为 1 的显式等待（类），但仍然需要大约 30 秒。

那么有没有绕过隐式等待各种定位器（即`By`类）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T06:22:52.957

如果您使用显式等待，则取消设置隐式等待：

```
driver.manage().timeouts().implicitlyWait(0, TimeUnit.SECONDS); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T18:36:07.413

```
boolean isElementPresent(By by) {
    try {
        driver.manage().timeouts().implicitlyWait(1, TimeUnit.SECONDS);
        driver.findElement(by);
        driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);
        return true;
    }
    catch(Exception e){
        driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);
        return false;
    }
} 
```

恶心但有效。似乎每个隐式等待的命令都应该能够被重载。但 find 元素没有 2 参数版本。也许它在By？

# jquery - 在 Bootstrap Ajax 模式中使用 simple_form 显示内联错误

> ID：13408508
> 
> 赞同：5
> 
> 时间：2012-11-16T00:15:51.043
> 
> 标签：jquery, twitter-bootstrap, ruby-on-rails-3.2, simple-form

我在[这里](https://stackoverflow.com/a/10021054/550712)和[这里](https://stackoverflow.com/q/10051050/550712)发现了类似的 StackOverflow 问题，但仍然无法正常工作。

我正在使用 Rails 3.2.8、SimpleForm 2.0.4 和 Twitter Bootstrap 2.1.1（通过 bootstrap-sass gem 2.1.1.0）。

用户应该能够从模式弹出窗口中添加联系人。如果存在验证错误，它们应该内联显示，就像用户使用表单的非模态版本一样（字段周围的红色边框，字段旁边的错误消息）。

我像这样加载模态：

```
<a data-toggle="modal" data-target="#new-contact-modal">Go modal!</a> 
```

这是 Bootstrap 模态，它调用`contacts/contact_fields`非模态版本中使用的相同部分。**app/views/contacts/_new_modal.html.erb**：

```
<div id="new-contact-modal" class="modal hide fade" tabindex="-1" 
     role="dialog" aria-labelledby="new-contact-modal-label" 
     aria-hidden="true">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" 
     aria-hidden="true">×</button>
    <h3 id="new-contact-modal-label"><%= t("contacts.new.header") %></h3>
  </div>
  <%= simple_form_for(@contact, 
      :remote => true,
      :html => {:class => "form-horizontal", 
                "data-type" => :json }) do |contact_form| %>
    <div id="new-contact-body" class="modal-body">
      <%= render 'contacts/contact_fields', :f => contact_form %>
    </div>
    <div class="modal-footer">
      <%= contact_form.submit :class => "btn btn-primary", 
          :"data-loading-text"=> ('simple_form.creating') %>
      <%= t('simple_form.buttons.or') %>
      <a data-dismiss="modal" aria-hidden="true">
        <%= t('simple_form.buttons.cancel') %>
      </a>
    </div>
  <% end %>
</div> 
```

**app/controllers/contacts_controller.rb**（故意注释掉这一`format.json`行，因为我试图使用 JavaScript 将整个模式发回）：

```
def create
  @contact = Contact.new(params[:contact])
  <...some additional processing...>
  respond_to do |format|
    if @contact.save
      format.html { flash[:success] = "Contact added."
                    redirect_to @contact }
      format.json { render json: @contact, status: :created, location: @contact}
    else
      format.html { render action: "new" }
      #format.json { render json: @contact.errors, status: :unprocessable_entity }
      format.js { render 'new_modal_error' }
    end 
```

**应用程序/视图/联系人/new_modal_error.js.erb**

```
var modal = "<%= escape_javascript(render :partial => 'contacts/new_modal', :locals => { :contact => @contact.errors }) %>";
$("#new-contact-modal").html($(modal)); 
```

**app/assets/javascripts/contacts.js**一些 JQuery 来重置表单并在成功时关闭模式。

```
$(function($) {
  $("#new_contact")
    .bind("ajax:success", function(event, data, status, xhr) {
      // http://simple.procoding.net/2008/11/22/how-to-reset-form-with-jquery :
      $(this).each(function(){
        this.reset();
      });       
      $("#new-contact-modal").modal("hide");
    })
}); 
```

好消息是，这在表单没有错误时有效：添加了联系人并隐藏了模式。但是，如果存在*验证*错误，我会收到消息“JSON.parse：意外字符”。这来自 jquery.js，第 515 行，这是`return`此代码段中的语句：

```
// Attempt to parse using the native JSON parser first
if ( window.JSON && window.JSON.parse ) {
    return window.JSON.parse( data );
} 
```

如果我检查`data`，我看到那是我的`new_modal_error.js`文件的内容，完全扩展了表单错误，并为 JavaScript 转义。但它不是 JSON。

我错过了什么？如何让页面`new_modal_error.js`作为 JavaScript 文件而不是 JSON 变量进行处理？或者有没有更简单的方法来完全处理这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T04:46:30.337

这里的主要问题是使用`data-type => :json`. 这意味着它将期望 JSON 响应，但我希望它传回 JavaScript。解决方案是设置`data-type => :script`（或将其关闭，让 Rails 推断 JavaScript）：

```
:html => {:class => "form-horizontal", 
          "data-type" => :script }) do |contact_form| %> 
```

感谢这篇文章解释了各种数据类型，并澄清了数据类型是指*响应*，而不是数据的提交：

[Rails 3 远程链接和表单第 2 部分：数据类型（使用 jQuery）](http://www.alfajango.com/blog/rails-3-remote-links-and-forms-data-type-with-jquery/)

“jQuery 的`.ajax()`方法提供了一个可选参数`dataType`，用于指定响应的所需数据类型。”

我认为@wanghq 指出的另一个问题是JQuery 的`.html()`方法更新了对象的*innerHTML*。我最终创建了一个仅包含表单的部分，在包装器内调用部分`<div id="new-contact-form-wrapper">`，然后以*包装器*为目标来替换表单：

```
var myForm = "<%= escape_javascript(render :partial => 'contacts/new_modal_form', :locals => { :contact => @contact.errors }) %>";
$("#new-contact-form-wrapper").html(myForm); 
```

我仍在努力让变量通过，成功清除表单等。由于我使用的是控制器的部分，我可能会继续将所有 JQuery（成功和失败）放在那里所以我不需要**app/assets/javascripts/contacts.js**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T06:38:58.850

我不明白你为什么需要重置表格。我认为没有必要。

```
$(function($) {
  $("#new_contact")
    .bind("ajax:success", function(event, data, status, xhr) {
      ...
    })
}); 
```

您需要修复的一件事是在**new_model_error.js.erb**中的行下方，否则您将拥有**id="new-contact-modal" 的**重复 div 。

```
old:
$("#new-contact-modal").html($(modal)); 
new:
$("#new-contact-modal").html($(modal).html()); 
```

如果您还有问题，请告诉我。

# ruby-on-rails - 使用 if 语句检查 DB 表中的值是否在 Ruby on Rails 中是唯一的

> ID：13408511
> 
> 赞同：1
> 
> 时间：2012-11-16T00:16:13.807
> 
> 标签：ruby-on-rails, database, validation, if-statement, unique

我想使用 if 语句来检查 Postgres DB 表中的值是否唯一。如果是独一无二的，那就做点什么，如果不是独一无二的，做点别的。这是 Ruby on Rails 中伪代码的样子。

```
if validates_uniqueness_of :number == "true"
    puts "this value is unique and should be added to the DB"
else 
    puts "this value is not unique and should not be added to the DB"
end 
```

这种类型的逻辑可以在模型或控制器中实现吗？如果是，哪个是更好的方法？如果不是，我应该怎么做？另外，这样的语法会是什么样子？

多谢你们！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T00:28:35.603

你可以使用[存在吗？](http://api.rubyonrails.org/classes/ActiveRecord/FinderMethods.html#method-i-exists-3F)检查记录是否已经在数据库中的方法。它可以采用您要搜索的字段的哈希值：

```
before_create :do_something_if_unique

def do_something_if_unique
  if self.class.exists?(number: number)
    # there is a record that exists with this number
  else
    # there are no records that exist with this number
  end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T00:28:40.790

为了在列中找到唯一值，我会执行以下操作：

```
def self.has_unique_numbers?
    pluck(:number).uniq.count == 1
end 
```

然后在您的模型或控制器中，您可以询问：

```
if YourModel.has_unique_numbers?
    # Some Code
else
    # Some other code
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T00:21:31.953

您可以使用`first_or_create`：

```
MyModel.where(number: number).first_or_create! 
```

如果没有找到与给定条件匹配的内容（也可以链接更多 AR 方法），则将对象保存到数据库中。它是否应该进入模型或控制器取决于您如何使用它。它应该可以正常工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T00:22:06.747

看看`:validates_uniqueness_of`模型验证。您是否要额外添加数据库约束是一个更大的问题，这取决于您坐在围栏的哪一边：）

```
class MyThing < ActiveRecord::Base
   validates :number, :uniqueness => true
end

a = MyThing.create(:number => 1) # will succeeed
b = MyThing.create(:number => 2) # will fail and a.errors will contain more info. 
```

# c++ - 另一个类操作中的 C++ 指针类

> ID：13408514
> 
> 赞同：2
> 
> 时间：2012-11-16T00:16:29.843
> 
> 标签：c++, class, pointers

我有一个班级`foo1`，在 foo1.h 我有

```
class foo1
{
public:
int var;
foo1();
}; 
```

还有另一个名为 的类`foo2`，其中我有一个基于的对象`foo1`：

```
class foo2
{
public:
foo1 *afoo1;
foo2();
void func1(int,int);
}; 
```

我的问题是我如何才能访问`afoo1->var`. 如果我`afoo1->var`在 foo2.cpp 中使用，一切看起来都很好，并且编译时没有错误。但是当我在命令提示符窗口中运行它时，会弹出一个窗口并要求关闭程序。我想这是因为我违反了内存访问，其原因可能是`afoo1->var`.

谁能帮我这个？

谢谢

**额外说明**

我从 foo2 制作了一个 dll 文件，并在另一个程序中使用它，我无权访问它的源代码。只是为了让事情更清楚一点。

**回答**

我犯了两个错误。第一个是我指的是 Null。`afoo1 = new foo1();`在构造函数中`foo2`处理了这一点。

第二个是我没有包含`foo1.cpp`在我的makefile中。我知道，愚蠢的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T00:20:17.817

你需要做的是`foo2Instance->afoo1->var`，在 foo2 方法中，这只是`afoo1->var`。如果那是崩溃，则更有可能是因为您没有`afoo1`在 foo2 的构造函数中进行初始化。

```
#ifndef FOO1_H
#define FOO1_H 

class foo1
{
public:
int var;
foo1() { var = 0; } //make sure the constructor is in fact defined. 
// if it isn't implemented it would cause that linker error.
};

#endif 
```

确保你有`#include "foo1.h"`foo2.h

```
 // constructor and deconstructor, these are in the cpp file.
   foo2::foo2()
   {
        afoo1 = new foo1();
   }
   foo2::~foo2()
   {
        delete afoo1;
   } 
```

如果您收到 NullReferenceException ，很可能是因为您在构造函数中缺少该行。但是，如果您尝试访问您的属性，则每次都会崩溃，`afoo2->afoo1`这很好。永远都不好。`afoo1 == NULL``afoo1``NULL->someProperty`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T00:41:47.917

> foo2，其中我有一个基于 foo1 的对象

不，你有一个指向 foo1 的指针。如果您没有将该指针设置为实际指向 foo1 对象的实例，那么尝试通过它访问任何内容很可能会导致崩溃。这听起来像你正在经历的。

因此，听起来您应该将该变量设为实际的 foo1 （例如`foo1 afoo1;`：），或者您需要将该指针设置为指向 evanmcdonnal 建议的实例（例如`afoo1 = new foo1();`：）

# proxy - javamail忽略socks代理

> ID：13408521
> 
> 赞同：1
> 
> 时间：2012-11-16T00:17:08.110
> 
> 标签：proxy, jakarta-mail, socks

我已经将 javamail 设置为通过 socks 代理运行，但它不会通过它。我尝试设置 mail.smtp.socks.host 和 mail.smtp.socks.port 但它一直直接到邮件主机。我觉得我错过了一些非常基本的东西。任何帮助，将不胜感激。这是我的属性：

```
props.setProperty("mail.smtp.host", this.smtpHost);
props.setProperty("mail.smtp.port", Integer.toString(this.smtpPort));
props.setProperty("mail.smtp.user", this.smtpUser);
props.setProperty("mail.smtp.auth", "true");
props.setProperty("mail.transport.protocol", "smtp");
props.setProperty("mail.smtp.starttls.enable", Boolean.toString(this.smtpTLS));
props.setProperty("mail.debug", "true");

if (this.useSOCKSProxy) {
   logger.info("Using proxy");
   props.setProperty("mail.smtp.socks.host", "127.0.0.1");
   props.setProperty("mail.smtp.socks.port", Integer.toString(1080));
   props.setProperty("mail.smtps.socks.host", this.socksProxyHost);
   props.setProperty("mail.smtps.socks.port", Integer.toString(this.socksProxyPort));
   props.setProperty("proxySet", "true");
   props.setProperty("socksProxyHost", this.socksProxyHost);
   props.setProperty("socksProxyPort", Integer.toString(this.socksProxyPort));
}

 //Session session = Session.getInstance(props, new SmtpAuthenticator(this.smtpUser,this.smtpPassword));
Session session = Session.getDefaultInstance(props,
   new Authenticator() {
      protected PasswordAuthentication getPasswordAuthentication() {
         return new PasswordAuthentication(smtpUser, smtpPassword);
      }
   });

 //Session session = Session.getInstance(props, null);
session.setDebugOut(System.out);
session.setDebug(true);
 //Transport tr = session.getTransport("smtp");
 //tr.connect();
 //tr.connect(this.smtpHost,this.smtpPort, this.smtpUser, this.smtpPassword);

Message msg = new MimeMessage(session);
msg.setFrom(new InternetAddress(this.smtpFrom));
msg.addRecipient(Message.RecipientType.TO, new InternetAddress(email));
msg.setSubject(subject);
msg.setText(msgToSend.toString());
msg.saveChanges();

Transport.send(msg); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T00:49:17.627

从修复这些[常见错误](http://www.oracle.com/technetwork/java/javamail/faq/index.html#commonmistakes)开始。

如果这不能解决问题，请发布调试输出。将系统属性“mail.socket.debug”设置为“true”以获得额外的调试输出。

您使用的是什么版本的 JavaMail？什么JDK？

除非“props”来自 System.getProperties()，否则设置“socksProxyHost”无效。如果您确实将其设置为 System 属性，则不需要 JavaMail socks 属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-07T19:13:40.943

您可以尝试找出正确的属性组合，包括 Bill 提到的常见错误，或者您也可以采取简单的方法，让[Simple Java Mail](http://www.simplejavamail.org)（开源）为您解决：

您的示例已转换：

```
Mailer mailer = new Mailer(
        new ServerConfig(smtpHost, smtpPort, smtpUser, smtpPassword),
        TransportStrategy.SMTP_TLS,
        this.useSOCKSProxy ? new ProxyConfig(socksProxyHost, socksProxyPort) : null
);

mailer.setDebug(true);

mailer.sendMail(new EmailBuilder()
        .from(null, smtpForm)
        .to(null, email)
        .subject(subject)
        .text(msgToSend.toString())
        .build()); 
```

请注意您不再需要处理任何属性或 JavaMail API。如果需要，您还可以使用经过身份验证的代理。

# c++ - 如果您只是重新创建 ifstream 类，您如何重载 operator>>？

> ID：13408525
> 
> 赞同：2
> 
> 时间：2012-11-16T00:17:13.813
> 
> 标签：c++, operator-overloading, iostream, ifstream

我的老师希望我们学习 ifstream 课程及其工作原理。她给我们布置了创建一个 FileStream 包装类的作业，该类被模板化以处理任何内容，并且可以接收文件中的任何内容。

我已经编写了所有内容，但无法编译，因为我不知道如何编写`>>`运算符并不断收到错误。这是我到目前为止所拥有的：

```
template<class A>
ifstream& operator >>(FileStream<A> fs, A& x){
  fs>>x;
  return fs;
} 
```

她主要用来检查我们的工作，它的名称如下：

```
FileStream<Word> input;
Word temp; //word is a class we created to manipulate strings in certain ways 

while(input>> temp){
  cout<<temp<<endl;
} 
```

如果有人可以帮助我，我将不胜感激。我已经为此工作了 2 天，但我无法得到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T00:24:37.210

```
template<class T>
FileStream<T>& operator >> (FileStream<T>& fs, T& value) {
  value = fs.readValueFromStream();
  return fs;
} 
```

您的方法应该类似于上面的内容。强调：

（请注意，我已重命名`A`为`T`和.是通用模板参数的常用名称，并且`x`比.更具描述性。）`value``T``value``x`

1.  接受`FileStream<T>&`参考。这`&`确保您使用原始流对象而不是副本。
2.  返回一个`FileStream<T>&`引用，而不是一个`ifstream`.
3.  `fs>>x`您需要编写代码来实际从流中读取一个项目并将其放入`value`. 这应该使用您`FileStream`班级的某些方法。我写了`value = fs.readValueFromStream()`，但这可能是任何事情。

以这种方式`operator >>`作为语法糖。真正的工作是由`value = fs.readValueFromStream()`行（或您实际在那里编写的任何代码）完成的。

# content-management-system - 自适应内容的内容管理系统

> ID：13408530
> 
> 赞同：5
> 
> 时间：2012-11-16T00:17:33.373
> 
> 标签：content-management-system, metadata, reusability

内容管理系统 (CMS) 使我们能够轻松维护博客、新闻网站、一般网站等。其中许多旨在管理**内容页面**，并提供工具来组织和自定义内容在网络上的显示方式。

然而，正如 Mark Boulton 在他的[*自适应内容管理*](http://www.markboulton.co.uk/journal/adaptive_content_management)文章中所解释的，以及 Karen McGrane 在她关于使[*我们自己适应自适应内容*](http://karenmcgrane.com/2012/09/04/adapting-ourselves-to-adaptive-content-video-slides-and-transcript-oh-my)的演讲中所解释的那样，我们越来越多地不仅向网络提供内容，而且还向其他平台和渠道提供内容。我们需要工具来管理附加了有意义的元数据**的内容。**一次创建，随处发布。

主要思想是干净地存储内容，而不会将其与特定于 Web 的演示标记交织在一起。由于内容片段在语义上被划分，它可以很容易地适应不同的平台和渠道。因此，它被称为**自适应内容**。

让我们看一个简单的例子来比较：

> 假设我管理新闻文章和事件。要创建新闻文章，我会告诉 CMS 我正在创建的内容类型，并被要求填写表格，其中包含为新闻文章量身定制的各个字段（例如标题、副标题、全文、短片和图像） . — 即*内容片段*
> 
> 使用传统的网络发布工具，我可能不得不在新闻下创建一个新页面，然后在空白的 WYSIWYG 文本编辑器中输入和格式化新闻文章。- 即*内容页面*

如您所见，第一个设计允许我以最小的语义单元单独指定内容。当我想展示或消费时，系统可以轻松提供我需要的部分。

所以这是我的问题：是否有专门为*自适应内容*设计的 CMS ，并且与表示层分离？

* * *

*注意：这**不是**关于最好的 CMS 或我应该使用哪个 CMS 的讨论。我在问是否有一种非常特定类型的工具——为自适应内容而设计的 CMS——供开发人员使用。*

# c++ - 内存池删除问题

> ID：13408533
> 
> 赞同：0
> 
> 时间：2012-11-16T00:17:48.920
> 
> 标签：c++, memory-pool

需要一些关于我的内存池的帮助。我已经准备好一切并正常工作，但是“删除”分配的内存会产生问题。基本上，即使我静态分配其动态对象被池化的类的对象，在销毁时它也会调用它的析构函数，它当然会尝试释放该内存，就好像它是从池中分配的一样，然后一切都死了。有什么办法可以解决这个问题，而不必在删除中放入糟糕的检查逻辑，从而减慢删除速度？

# boolean - 如何从 4 输入 K-Map 中获取布尔表达式

> ID：13408535
> 
> 赞同：0
> 
> 时间：2012-11-16T00:18:05.807
> 
> 标签：boolean, logic

我注意到 4 输入 K-map 与 3 输入 K-map 的读取方式不同。

我假设 A，不是 A，B，不是 B，C，不是 C，D 和不是 D 在 4 输入 K-Map 中的位置不同。

![4 输入K图](../Images/6325489f7e3220aa914eacce5acf4c2d.png)

谁能解释这些位置在 4 输入 K 地图上的位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T00:39:30.560

维基百科中有关于卡诺图的[文章。](http://en.wikipedia.org/wiki/Karnaugh_map)这是 4 个变量的地图布局： [K-map for 4 variables](http://en.wikipedia.org/wiki/File%3aK-map_minterms_A.svg)。

# php - 无法使此 PHP curl 请求正常工作

> ID：13408539
> 
> 赞同：0
> 
> 时间：2012-11-16T00:18:30.013
> 
> 标签：php, rest, curl, put

我正在尝试向我的服务器发出 put 请求，但是当我调用它时没有任何反应。这是我所拥有的：

```
$url = ("http://my.server/api/");
$data = array("{\"bri\": 254, \"on\": true,\"bri\": 10}" => $a);
$ch = curl_init($url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_CUSTOMREQUEST, "PUT");
curl_setopt($ch, CURLOPT_POSTFIELDS,http_build_query($data));

 $response = curl_exec($ch);
 if(!$response) {
return false;
} 
```

# c# - 文本框对象引用问题

> ID：13408543
> 
> 赞同：0
> 
> 时间：2012-11-16T00:18:52.793
> 
> 标签：c#, .net

我发表了一篇关于在文本框中检测粘贴事件的帖子，并被定向到带有执行此操作的代码的某个地方。我让它工作了，但它要求我从 Program.cs 主事件创建自己的文本框控件。这是代码：

```
 var txtNum = new MyTextBox();
    txtNum.Pasted += (sender, args) => MessageBox.Show("Pasted: " + args.ClipboardText);
    txtNum.Size = new System.Drawing.Size(578, 20);
    txtNum.Location = new System.Drawing.Point(12, 30);
    var form = new Form1();
    form.Controls.Add(txtNum);
    Application.Run(form); 
```

现在的新问题是，当我尝试处理 txtNum 中的任何内容时，我收到“对象引用未设置为对象的实例”我该如何解决这个问题？这是一个winforms应用程序.net 4.0

错误在这里：

```
 private void button1_Click(object sender, EventArgs e)
    {
        string s = txtNum.Text; //OBJECT REFERENCE ERROR

            string[] numbers = s.Split(' ');
            double sum = 0;
            for (int i = 0; i < numbers.Length; i++)
            {
                double num = double.Parse(numbers[i]);
                sum += num;
            }
            lblRESULT.Text = sum.ToString();
            if (cp == true)
            {
                Clipboard.SetText(lblRESULT.Text);
            }

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T00:23:36.973

这是因为您已在`Main()`.

```
static TextBox txtNum = new TextBox();
[STAThread]
static void Main()
{
//Application.EnableVisualStyles();
//Application.SetCompatibleTextRenderingDefault(false);
// txtNum.Paste += (sender, args) => MessageBox.Show("Pasted: " + args.ClipboardText);
txtNum.Size = new System.Drawing.Size(578, 20);
txtNum.Location = new System.Drawing.Point(12, 30);
Form1 form = new Form1();
form.Controls.Add(txtNum);
Application.Run(form);
} 
```

更好的方法是在 Form1s 构造函数或`Form_Load`事件中添加文本框。

```
TextBox txtNum = new TextBox();
public Form1()
{
InitializeComponent();
txtNum.Size = new System.Drawing.Size(578, 20);
txtNum.Location = new System.Drawing.Point(12, 30);
txtNum.PreviewKeyDown += (sender, e) =>
{
    if (e.KeyValue == 17 && e.Control == true)
    {
        MessageBox.Show("you pasted:" + Clipboard.GetText());
    }
};
this.Controls.Add(txtNum);

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T00:52:26.147

好的，在 Main 中声明文本框的代码只是一个示例。根据 Jeremy 的回答，您应该在表单代码中声明文本框。

或者，您应该能够`MyTextBox`在工具箱中找到您的控件 - 只需像任何控件一样将其拖到表单上，然后`Pasted`像往常一样添加事件处理程序代码。

# c# - 在 C# 的大二进制文件中搜索十六进制值的有效方法是什么

> ID：13408544
> 
> 赞同：3
> 
> 时间：2012-11-16T00:18:57.613
> 
> 标签：c#, binaryreader

[与HxD](http://mh-nexus.de/en/hxd/)编辑器中的相同功能非常相似，我正在实现一个程序，该程序在大**二进制**文件（> 1 GB）中搜索特定的十六进制值（比如 32 位）。内存是有限的，而且似乎逐块读取`BinaryReader`类的速度很慢。HxD 在大约 12 秒内返回搜索结果（几乎到达文件末尾），这是可以接受的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T01:10:17.280

`BinaryReader`应该能够在 12 秒内读取千兆字节，前提是您的磁盘子系统可以处理它（它显然可以，因为 HxD 正在这样做）。关键是用更大的输入缓冲区打开文件。也就是说，而不是：

```
var f = File.OpenRead(filename) 
```

称呼

```
var f = new FileStream(filename, FileMode.Open, FileAccess.Read, FileShare.None, 65536); 
```

这将导致 .NET 以 64 KB 块而不是默认的 4 KB 块读取文件。

尽管您为什么要使用`BinaryReader`它是一个谜。为什么不直接读取流？例如：

```
var buff = new byte[1024*1024];
int bytesRead = f.Read(buff, 0, buff.Length); 
```

使用 64 KB 的文件缓冲区，.NET 只需对操作系统进行 16 次调用即可满足您的请求。使用默认的 4K 缓冲区，它必须对操作系统进行 256 次调用。差异是显着的。

使用大于 64 KB 的缓冲区大小参数并不能提高性能。在我的测试中，大于 256 KB 的缓冲区实际上导致系统读取速度变慢。至少在我测试的系统上，64 KB 似乎是“最佳位置”。

如果您出于某种原因决定使用`BinaryReader`，您应该预期更大的缓冲区会带来类似的性能提升。

# python - PySide如何获取QWebInspector同一个窗口

> ID：13408545
> 
> 赞同：5
> 
> 时间：2012-11-16T00:19:05.643
> 
> 标签：python, qt, webkit, pyside

我刚刚开始进入 Qt 领域（来自 PyGTK）并且我正在使用 PySide。所以我[在 stack exchange 的另一个答案中](https://stackoverflow.com/questions/5942487/pyside-webkit-basic-question)找到了这个很好的例子。

```
import sys
from PySide.QtCore import *
from PySide.QtGui import *
from PySide.QtWebKit import *

app = QApplication(sys.argv)

web = QWebView()
web.settings().setAttribute(
  QWebSettings.WebAttribute.DeveloperExtrasEnabled, True)
# or globally:
# QWebSettings.globalSettings().setAttribute(
#     QWebSettings.WebAttribute.DeveloperExtrasEnabled, True)

web.load(QUrl("http://www.google.com"))
web.show()

inspect = QWebInspector()
inspect.setPage(web.page())
inspect.show()

sys.exit(app.exec_()) 
```

我的问题如下，如何让检查员出现在同一个窗口而不是新窗口中？我知道我需要将 QWebInspector 添加到主窗口内的另一个小部件（例如 vbox），我想知道如何将该事件连接到上下文菜单“检查”触发的信号。在 PyGTK 中，我需要使用 .connect() 但我找不到此特定操作的正确信号。

谢谢你的时间伙计们/姑娘们

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T01:30:57.577

不需要为上下文菜单执行任何特殊操作。只需将检查器小部件添加到您的布局中，然后`hide()`就可以开始了。然后，默认上下文菜单操作可以`show()`根据需要检查器。

一个稍微棘手的问题是如何在检查器显示后再次隐藏它，因为似乎没有相应的上下文菜单项。

下面的演示脚本只是创建了一个键盘快捷键来隐藏/显示检查器：

```
from PySide import QtGui, QtCore, QtWebKit

class Window(QtGui.QWidget):
    def __init__(self):
        QtGui.QWidget.__init__(self)
        self.view = QtWebKit.QWebView(self)
        self.view.settings().setAttribute(
            QtWebKit.QWebSettings.WebAttribute.DeveloperExtrasEnabled, True)
        self.inspector = QtWebKit.QWebInspector(self)
        self.inspector.setPage(self.view.page())
        self.inspector.hide()
        self.splitter = QtGui.QSplitter(self)
        self.splitter.addWidget(self.view)
        self.splitter.addWidget(self.inspector)
        layout = QtGui.QVBoxLayout(self)
        layout.addWidget(self.splitter)
        QtGui.QShortcut(QtGui.QKeySequence('F7'), self,
            self.handleShowInspector)

    def handleShowInspector(self):
        self.inspector.setShown(self.inspector.isHidden())

if __name__ == '__main__':

    import sys
    app = QtGui.QApplication(sys.argv)
    window = Window()
    window.view.load(QtCore.QUrl('http://www.google.com'))
    window.show()
    sys.exit(app.exec_()) 
```

# javascript - 为点击事件选择特定表单的提交按钮

> ID：13408546
> 
> 赞同：6
> 
> 时间：2012-11-16T00:19:09.683
> 
> 标签：javascript, jquery

如果我有以下表单，如何根据要用于点击事件的表单 ID 选择提交按钮？

```
<form id="login">
    <input type="text" name="email">
    <input type="text" name="password">

    <input type="submit" name="submit">
</form> 
```

像下面这样的工作，但它不能仅仅`input[name=submit]`因为页面上可能有多个。

```
$('input[name=submit]').click(function (e) {

        e.preventDefault();

        console.log('clicked');

    }); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-16T00:21:06.347

这将自动选择表单的提交控件：

```
$('#login :submit').click(...); 
```

[http://api.jquery.com/submit-selector/](http://api.jquery.com/submit-selector/)

干杯

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-09-17T06:55:11.007

采用 ：

```
 document.querySelectorAll("input[type=submit]")[0].click(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-16T00:21:17.260

采用

```
$('#login input[type="submit"]') 
```

您可以阅读所有 CSS 选择器的[http://www.w3.org/TR/selectors/。（jQuery](http://www.w3.org/TR/selectors/)*支持所有默认选择器 + 更多[http://api.jquery.com/category/selectors/](http://api.jquery.com/category/selectors/)*）

# c - C 等价于 C

> ID：13408549
> 
> 赞同：1
> 
> 时间：2012-11-16T00:19:45.280
> 
> 标签：c, arrays

用于处理动态内存中的数组的程序。需要C的等价物。有人可以帮忙吗？

```
const int n = 6;
char **words = (char**) malloc(n *sizeof(char*));
for(int i = 0 ; i < n; i++)
    words[i] = (char*)malloc( 50 * sizeof(int));

for(int i = 0; i < n; i++) 
{
    cin>>words[i];
}

cout<<endl;
for(int i = 0; i < n; i++) 
{
    if(words[i][0] == 'q')
        cout<<words[i]<<endl;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-16T00:26:41.800

唯一的 C++ 部分是`cin`and `cout`; 您可以轻松更改它们：

```
cin>>words[i]; 
```

变成

```
scanf("%s", words[i]); 
```

或者

```
gets(words[i]); 
```

尽管

```
cout<<words[i]<<endl; 
```

变成

```
puts(words[i]); 
```

顺便说一句，在//`cin`你有一个潜在的缓冲区溢出，因为你正在为 6 个字符分配空间，但你正在接受任何长度的输入。你应该这样做：`scanf``gets`

```
scanf("%6s", words[i]); 
```

或（更易于维护，因为它`n`直接使用）

```
fgets(words[i], n, stdin); 
```

（尽管这将包括`\n`字符串中的尾随）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T00:25:38.933

您使用的唯一 C++ 功能是 cin 和 cout。替换`cin>>words[i]`为`gets(words[i])`和。`cout<<words[i]<<endl`_`puts(words[i])`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T00:25:40.173

用于`scanf("%s", &words[i])`从标准输入输入数据并`printf("%s\n", words[i])`输出到标准输出。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T00:46:15.353

如你所愿：

```
 const int n = 6;
    char **words = (char**) malloc(n *sizeof(char*));

    int i = 0;

    for( i= 0 ; i < n; i++)
    {
        words[i] = (char*)malloc( 50 * sizeof(char));
    }

    for(i = 0; i < n; i++) 
    {
        scanf("%s", words[i]); 
    }

    printf("\n");

    for(i = 0; i < n; i++) 
    {
        if(words[i][0] == 'q')
            printf("%s\n", words[i]);

    } 
```

# php - 如何防止 PHP PDO 通过 jQuery AJAX 插入 MySQL varchar 中的转义字符

> ID：13408551
> 
> 赞同：1
> 
> 时间：2012-11-16T00:19:59.047
> 
> 标签：php, mysql, jquery, pdo, escaping

我觉得很奇怪，我在这方面找不到任何东西，但事实就是如此。

在我的网站上，我允许用户输入要存储在我的数据库中的文本。我使用 PDO 来保证它的安全，但是所有危险字符前面都有“\”。

有没有一种简单的方法可以摆脱这一切？我应该在 MySQL 中使用不同的数据类型吗？

提前致谢！

**没有双重逃避。懒惰阻止了它**

我读到只做直接 PDO 就可以了，所以你不必担心逃逸、消毒、漂白、擦洗等……

我像这样执行标准 PDO INSERT[如何插入 PDO (sqllite3)？](https://stackoverflow.com/questions/1176122/pdo-insert-help)

数据由 jQuery ajax 传输。这是问题的根源吗？如果是这样，我该如何扭转它？

谢谢你的帮助！

**具体问题**

我只有在引号和双引号前有“\”。谢谢！

**版本**

用于 Zend Guard 兼容性的 PHP 5.3。MySQL 5.5。阿帕奇 2.2.2。jQuery 1.8.3

**+1 反转**

我将给出尽可能多的 +1 作为关于如何反转这些 / 的答案。谢谢！

**魔术行情**

是答案。有人想延长他们的答案以进行检查吗？

仍在寻找 SQL 语句来反转先前的转义。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T16:15:42.607

这可能是由于`magic quotes`在服务器上启用了。特别是，它可能是`magic_quotes_gpc`指令，可以在 , 等中设置`php.ini`，`.htaccess`但不能在运行时使用`ini_set`.

首先，仔细检查输出`phpinfo()`以确保这是问题所在。如果您发现启用了魔术引号，则需要有权访问服务器的人在您的`php.ini`or`.htaccess`文件中禁用它。php手册在这里解释了这个过程：[http ://www.php.net/manual/en/security.magicquotes.disabling.php](http://www.php.net/manual/en/security.magicquotes.disabling.php)

但是请注意这一点：如果服务器上运行的代码依赖于魔术引号，禁用它可能会使这些站点容易受到 sql 注入等攻击。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T00:22:37.367

在应用程序到达 PDO 层之前，您显然已经在应用程序中进行了其他一些转义。查找`addslashes`或`escape_string`键入方法调用以查看您是否进行了该操作。

您所看到的是双重转义的迹象。

# c - 用C覆盖文件中的行，奇怪的输出

> ID：13408558
> 
> 赞同：1
> 
> 时间：2012-11-16T00:20:51.793
> 
> 标签：c, file, io, fseek, ftell

我正在尝试逐行浏览文件（每行不超过 50 个字符），将每个字符移动 10 或 -10（加密和解密），然后在旧字符串所在的位置打印移动后的字符串。但我得到了一些非常有趣的输出。

继承人的代码：

```
#include <stdio.h>
int main(void){
    FILE *fp;
    fp=fopen("tester.csv","r+");
    Encrypt(fp);      // I call decrypt here when I test it.
    fclose(fp);
}

int Encrypt(FILE *fp){
    int offset=10;
    Shift(fp, offset);
}
int Decrypt(FILE *fp){
    int offset= -10;
    Shift(fp, offset);
}
int Shift(FILE *fp, int offset){
    char line[50],tmp[50], character;
    long position;
    int i;
    position = ftell(fp);
    while(fgets(line,50,fp) != NULL){
        for(i=0;i<50;i++){
            character = line[i];
            character = (character+offset)%256;
            tmp[i] = character;                 
        }
        fseek(fp,position,SEEK_SET);
        fputs(tmp, fp);
        position = ftell(fp);
    }
} 
```

所以如果 tester.csv 最初读取

```
this, is, a, test 
```

运行程序产生

```
~rs}6*s}6*k6*~o}~

êñv[    ‰

this, is, a, test 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T00:50:31.507

```
fputs(tmp, fp); 
```

`fputs`写入字节直到终止 0 字节。

```
while(fgets(line,50,fp) != NULL){
    for(i=0;i<50;i++){
        character = line[i];
        character += offset;
        tmp[i] = character;                 
    } 
```

无论您读入的行有多长，您都会移动 50`char`秒，因此在大多数情况下，`tmp`缓冲区中没有 0 字节，因此`fputs`通常会写入至少 50 个字节，其中一些与该位置的文件中的内容以及缓冲区之外的内容，这会调用未定义的行为并可能导致崩溃。

您应该检查循环中的终止 0 字节，甚至可能在换行处停止也是一个好主意。

```
while(fgets(line,50,fp) != NULL){
    for(i = 0; i < 50 && line[i] != 0 && line[i] != '\n'; i++){
        character = line[i];
        character += offset;
        tmp[i] = character;                 
    } 
```

注意：循环体会更简单`line[i] += offset;`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T00:43:45.227

尝试在加密时使用 GDB 调试您的程序。

编译： `gcc -g -Wall YOURPROGRAM.cxx`

运行 gdb： `gdb YOURPROGRAM.cxx`

设置断点：

在第 3 行中断：`break 3`

调试你的程序：`run`

`step`您可以使用和单步执行每一行代码`next`，并使用 打印每个点的变量`print VARIABLENAME`。这是一个功能强大的程序，对调试非常有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T00:55:12.910

您可能不应该使用面向行的`fgets()`，因为您可以在加密的输出数据和解密的输入数据中`fputs()`获得 NUL字符（换行符将是 . 使用和。确保您也处理正确数量的字符;可能不会返回 49 个字符和 NUL；该行可能会更短，并且您无论如何都不想处理 NUL。`'\0'``fread()``fwrite()``fgets()`

# azure - 是否可以在不使用托管服务的情况下使用 Azure 诊断

> ID：13408564
> 
> 赞同：2
> 
> 时间：2012-11-16T00:21:09.657
> 
> 标签：azure, azure-diagnostics

我的解决方案中有多个 Web 和辅助角色，但我还有一个在 Azure 托管 VM 上运行的非 Azure 应用程序。该应用程序连接到 Azure 存储以执行各种操作，例如读取和写入 blob 和队列，并且运行良好。

我想在同一个应用程序（在 Azure 中托管的 VM 上运行的 .NET 应用程序）中使用 Azure 诊断。但是，如果我尝试初始化诊断程序，则会出现以下异常：

System.InvalidOperationException：未在托管服务或 Development Fabric 中运行。

这是有道理的，但我想知道是否可以在不作为托管服务的情况下以某种方式使用诊断。特别是，我使用 azure 诊断来收集由 System.Diagnostics.Trace 写出的日志信息，这些信息都隐藏在应用程序代码之外，所以如果有其他一些 API，我可能可以将其插入.

有任何想法吗？谢谢，JC

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T01:31:02.333

抱歉不行。至少今天不是。代理对 RoleEnvironment 内容进行了一些硬编码检查，当它不存在时，它会失败。这也是你今天也不能在 IaaS 中使用代理的原因。

# javascript - 当标签没有焦点时，浏览器会做什么处理/渲染*不*浏览器？

> ID：13408567
> 
> 赞同：1
> 
> 时间：2012-11-16T00:21:13.623
> 
> 标签：javascript

我有一个显示实时统计信息的页面。它运行大量的 javascript，发出大量的 HTTP 请求，使用 D3.js 每隔几秒渲染一次 SVG 图表，有大量的 CSS 动画，并且经常重新排列 DOM。

只要页面有焦点，它就可以顺利运行。如果我切换到另一个选项卡并稍后返回，通常会出现短暂的停顿，页面似乎被冻结，然后视图突然似乎重新呈现并且页面再次可用。选项卡的背景时间越长，此暂停的时间就越长。如果选项卡已经在后台很长时间（几个小时）并且我切换回它，它将被冻结很长时间然后崩溃。

在 Chrome 中观察到所有这些行为。我没有在其他浏览器中测试太多。

当我第一次切换回标签页时，Chrome 在暂停期间在做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T01:38:10.483

您正在运行一个`setInterval`或一系列`setTimeout`s。
每一个都排队等待在您在函数中指定的点之后运行。

谷歌将你页面上的所有内容限制为每秒更新几次......所以如果你设置了定时器来移动东西并以 30fps 或其他速度进行动画处理，那么你就会让谷歌启动一轮更新（无论您安排了什么），这无疑会调用请求另一个更新的东西，这将请求另一个更新......

...当您切换回来时，您有数百个（或数万个）这些更新等待发生，现在不是以 30fps 发生，而是有一堆这样的事情在等待...所有这些更新都已经过去了他们的“直到...”时间才运行，并且他们都将尝试尽可能快地更新，直到您再次赶上计时器的当前位置。

如果浏览器支持页面可见性 API 的组件，则在页面不可见时暂停调用。

```
if (!document.hidden) { doStuff(); } 
```

或者

```
document.addEventListener("visibilitychange", function (evt) {
    if (evt.visibilityState === "hidden") { myApp.pause(); }
    else if (evt.visibilityState === "visible") { myApp.resume(); }
}); 
```

如果它不支持 API，那么您可以尝试使用 polyfill`window.onblur`或其他方式填充它。
也就是说，如果浏览器不支持页面可见性 API，它也不会对页面代码进行硬核限制。
这不是 100% 的保证，而是半可能性。

# c# - 是否有可以解析此值的 JSON 库？

> ID：13408572
> 
> 赞同：0
> 
> 时间：2012-11-16T00:21:25.540
> 
> 标签：c#, json

```
[{\"Berth\":8,\"Name\":\"GROUP OF 8 (EIGHT)\",\"Cost\":1400.0000,\"BookingFee\":40.0000,\"Available\":true,\"ProductId\":49},{\"Berth\":6,\"Name\":\"GROUP OF 6 (SIX)\",\"Cost\":1050.0000,\"BookingFee\":30.0000,\"Available\":true,\"ProductId\":49},{\"Berth\":5,\"Name\":\"GROUP OF 5 (FIVE)\",\"Cost\":875.0000,\"BookingFee\":25.0000,\"Available\":true,\"ProductId\":49},{\"Berth\":4,\"Name\":\"GROUP OF 4 (FOUR)\",\"Cost\":700.0000,\"BookingFee\":20.0000,\"Available\":true,\"ProductId\":49},{\"Name\":\"CAMPING TICKET\",\"Cost\":135.0000,\"BookingFee\":5.0000,\"Available\":false,\"ProductId\":48},{\"Name\":\"WEEKENDER PASS\",\"Cost\":110.0000,\"BookingFee\":5.0000,\"Available\":false,\"ProductId\":50}] 
```

而已！

编辑：

我在序列化之前将数组包装在一个对象中并在输出上运行此代码......

```
 var prods = JsonValue.Parse(json).AsDynamic();

        var productId = prods.Products[0].ProductId; 
```

它只是说 productid 是“默认”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T00:30:30.980

您在这里拥有的不是 JSON，因此无法解析。但是，当您去除斜线时，您拥有有效的 JSON，然后可以正常解析它。

编辑：

我想你想要做的是：

```
prods[0].ProductId 
```

prods 是一个数组，而不是一个对象。

您能否显示“将数组包装在对象中”的代码 - 因为听起来这就是您的问题所在。

# sbt - 使用 scct 时如何设置`testOptions in Test`

> ID：13408575
> 
> 赞同：1
> 
> 时间：2012-11-16T00:21:35.700
> 
> 标签：sbt, scalatest, scct

[在 sbt 中，我可以使用此处](http://www.scalatest.org/user_guide/using_scalatest_with_sbt)`testOptions in Test += Tests.Arguments("...")`描述的方法将参数传递给 ScalaTest 。

有没有办法在调用时通过[scct](https://github.com/mtkopone/sbt-scct)将这些选项传递给 ScalaTest `scct:test`？我试过`testOptions in Scct += ...`了，但似乎没有效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T15:01:04.510

scct 看起来有两种配置：`ScctTest`和`Scct`. [从源头](https://github.com/mtkopone/sbt-scct/blob/master/src/main/scala/ScctPlugin.scala#L48)上，你可能想要`testOptions in ScctTest`

# matlab - 使用 MATLAB 进行图像去模糊

> ID：13408576
> 
> 赞同：4
> 
> 时间：2012-11-16T00:21:36.687
> 
> 标签：matlab, image-processing

我有两张图像，一张是退化的，一张是原始图像的一部分。我需要通过使用第二张图像来增强第一张图像，并且我需要在[频域中](http://en.wikipedia.org/wiki/Frequency_domain)执行此操作。我从退化的图像中切出相同的区域，对其进行 FFT，并尝试计算传递函数，但是当我将该函数应用于图像时，结果很糟糕。

所以我试图`h=fspecial('motion',9,45);`成为我的传递函数，然后用下面给出的代码重建图像。

```
im = imread('home_degraded.png');
im = rgb2gray(im);
h = fspecial('motion',9,45);
H = zeros(519,311);
H(1:7,1:7) = h;
Hf = fft2(H);
d = 0.02;
Hf(find(abs(Hf)<d))=1;
I = ifft2(fft2(im)./Hf);
imshow(mat2gray(abs(I))) 
```

我现在有两个问题：

1.  如何使用小矩形（我的意思是不使用`h=fspecial('motion',9,45);`）生成传递函数？

2.  我可以使用哪些方法从增强图像中去除噪点？

![在此处输入图像描述](../Images/520e2637cb9d82dd32d0f74494d21cbb.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T18:22:15.313

我可以向您推荐几种方法：

1.  算术平均滤波器：

    ```
    f = imfilter(g, fspecial('average', [m n])) 
    ```

2.  几何均值滤波器

    ```
    f = exp(imfilter(log(g), ones(m, n), 'replicate')) .^ (1/(m*n)) 
    ```

3.  谐波均值滤波器

    ```
    f = (m*n) ./ imfilter(1 ./ (g + eps), ones(m, n), 'replicate'); 
    ```

    其中 n 和 m 是掩码的大小（例如，您可以设置`m = 3` `n = 3`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-10T14:39:33.107

基本上你想要做的有两个步骤（至少）：

1.  通过使用带有正方形的图像补丁来估计 PSF（模糊内核）。
2.  使用估计的内核对模糊图像进行反卷积

如果您想“猜测”第 1 步的 PSF，那很好，但最好计算一下。

对于第 2 步，您必须首先使用`edgetaper`它来消除图像中的振铃效应，您称之为噪声。

`deconvlucy`您通过使用遵循以下语法的函数来使用非盲反卷积（步骤 2） ：

```
J = deconvlucy(I,PSF) 
```

这个反卷积过程会增加一些噪音，特别是如果您的 PSF 不是 100% 准确，但如果您允许更多迭代（细节交易，NFL），您可以使其更平滑。

对于第一步，如果您不关心您有“尖锐”正方形这一事实，您可以使用盲反卷积*deconvblind*并获得 PSF 的一些估计值。如果您想正确执行此操作并使用尖锐补丁，那么您可以在任何涉及 PSF 估计的优化方案中将其用作数据项目标。

# iphone - Groupon 和 Fab 的推送通知如何在我打开手机后立即显示？

> ID：13408577
> 
> 赞同：1
> 
> 时间：2012-11-16T00:21:47.530
> 
> 标签：iphone, push-notification

我早上一解锁 iPhone，Groupon 的通知就会出现在我的通知托盘顶部。这可能发生在上午 8 点到 10 点之间的任何时间，所以我想知道他们是如何做到这一点的。

# arrays - Wordpress 中的初级和次级排序

> ID：13408580
> 
> 赞同：2
> 
> 时间：2012-11-16T00:22:06.713
> 
> 标签：arrays, wordpress, sorting

我正在创建一个对专辑进行分类的 Wordpress 主题，并且我已经创建了自定义帖子类型，创建了自定义字段，并让它们成功拉入。我有几个自定义字段，包括：艺术家、专辑、大小、标签等。我目前使用此数组按艺术家姓名的字母顺序排序帖子：

> $args=array(
> 'post_type' => 'albums',
> 'order' => 'ASC',
> 'meta_key' => 'custom_meta_artist',
> 'orderby' => 'meta_value',
> 'posts_per_page' => -1,
> ) ;

但我也希望专辑“custom_meta_album”如果是同一位艺术家，则按字母顺序排序。目前，如果用户输入同一艺术家的 10 张专辑，则帖子将按艺术家姓名的字母顺序正确排序，但专辑没有顺序。

有没有办法在 Wordpress 中进行某种二级排序或一级和二级排序？我不知道这是否是一个 IF 语句，上面写着“如果艺术家的价值相等，那么也对专辑进行升序排序”或类似的东西。我认为需要某种方式来告诉 Wordpress 它应该首先对哪个字段进行排序，然后继续到第二级。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T01:53:54.170

你可以试试这个，希望这会奏效

```
// keep this function in your functions.php
function myCustomOrderby($orderby) {
    return str_replace('menu_order', 'mt1.meta_value, mt2.meta_value', $orderby);
} 
```

这是你的 args 数组

```
$args=array(
    'post_type' => 'albums',
    'orderby' => 'title',
    'order' => 'ASC',
    'posts_per_page' => -1,
    'meta_query' => array(
         array(
            'key' => 'custom_meta_artist',
            'value' => '',
            'compare' => 'LIKE'
        ),
        array(
            'key' => 'custom_meta_album',
            'value' => '',
            'compare' => 'LIKE'
        )
    )
);
add_filter('posts_orderby','myCustomOrderby'); // Add filter before you call the WP_Query
$albums = new WP_Query($args);
remove_filter('posts_orderby','myCustomOrderby'); // Remove filter after you call the WP_Query
// Start your loop
while ( $albums->have_posts() ) : $albums->the_post();
    //...
endwhile; 
```

# mysql - 从一个类别中选择所有书籍，但属于其他类别的书籍除外

> ID：13408581
> 
> 赞同：1
> 
> 时间：2012-11-16T00:22:07.693
> 
> 标签：mysql, sql

我有 3 张桌子：`books`, `book_categories`, `categories`.

`book_categories`表“连接”`books`和`categories`. 它包含列：`id`、`book_id`、`category_id`。

所以一本书可能属于许多类别，而一个类别可能有很多书。

`given_category`我需要查询，它从属于的书籍除外的所有书籍中检索所有书籍`given_set_of_categories`。因此，例如，我想要 A 类的所有书籍，但前提是它们不属于 B 类或 C 类。我还需要按 Book.inserted 列对结果进行排序（排序）。

我知道如何从`given_category`2 个连接中获取所有书籍，但不知道如何从结果中排除其他类别的一些书籍。我无法在 PHP 中过滤书籍，因为我正在对搜索结果进行分页。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T00:24:18.470

```
where
  category_id = <given category>
  and books.book_id not in
(
 select book_id from book_categories
  where category_id in (<given set of cat>)
)
order by books.inserted 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T07:48:11.807

我认为这可以通过计数来实现，前提是 book_categories 条目是**唯一的**，因此**book_id 和 category_id 的组合**不**重复**。我们不是直接尝试排除记录，而是从组合的类别集中进行选择 [,] 然后我们将计算 book_id 属于的条目：

```
COUNT(IF(category_id = <given_category>, 1, NULL)) as cnt_exists 
```

在确保它包含所需的类别之后，我们计算总数以查看它是否也属于任何其他类别：

```
COUNT(*) AS cnt_total

SELECT * FROM books b JOIN (
  SELECT book_id, 
         COUNT(IF(category_id = <given_category>, 1, NULL)) as cnt_exists, 
         COUNT(*) AS cnt_total FROM book_categories WHERE
         category_id IN(<given_category>, <given_set_of_categories>)
) bc ON b.id = bc.book_id AND 
        cnt_exists = 1 AND cnt_total = 1 ORDER BY b.inserted 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T00:26:24.087

因此，如果您的意思是它属于一个类别而不属于任何其他类别：

```
AND EXISTS(SELECT * FROM books b JOIN book_categories bc ON b.id = bc.book_id JOIN categories c ON bc.category_id = c.id AND c.id = 'A')
AND NOT EXISTS(SELECT * FROM books b JOIN book_categories bc ON b.id = bc.book_id JOIN categories c ON bc.category_id = c.id AND c.id != 'A') 
```

# java - “实例化”和“子类”之间的区别

> ID：13408588
> 
> 赞同：2
> 
> 时间：2012-11-16T00:22:41.293
> 
> 标签：java

我正在阅读 Java 教程，它说：

抽象类不能被实例化，但它们可以被子类化。

这是什么意思？我认为必须实例化才能创建子类？这条线真的让我很困惑，非常感谢任何和所有的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T00:24:19.997

实例化：

```
AbstractClass a = new AbstractClass(); //illegal 
```

子类：

```
class ConcreteClass extends AbstractClass { ... }
ConcreteClass c = new ConcreteClass(); //legal 
```

您必须创建一个扩展抽象类的新类，实现所有抽象方法，**然后**使用该新类。

请注意，您也可以这样做：

```
class ConcreteClass extends AbstractClass { ... }
AbstractClass a = new ConcreteClass(); //legal 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T01:06:14.817

子类可以获取其父类具有的所有属性/方法，而实例化类是在您在内存中创建该父类的实例时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T00:26:58.640

当你说实例化时，它意味着你想创建类的对象。子类是继承的孩子。例如，

```
abstract class A{
  //Class A is abstract hence, can not be instantiated. The reason being abstract class provides the layout of how the concrete sub-class should behave. 

   pubic abstract void doSomething();
   //This abstract method doSomething is required to be implemented via all the sub-classes. The sub-class B and C implement this method as required.

}

class B extends A{
   //Class B is subclass of A
  public void doSomething(){ System.out.println("I am class B"); }
}
class C extends A{
   //Class C is subclass of A
  public void doSomething(){ System.out.println("I am class C"); }
}

if you try to do this, it would generate an exception

A a = new A();

But this would work fine.
B b = new B();
or 
A a = new B(); //Note you are not instantiating A, here class A variable is referencing the instance of class B 
```

# c# - WCF 客户端的默认属性值

> ID：13408589
> 
> 赞同：1
> 
> 时间：2012-11-16T00:22:46.057
> 
> 标签：c#, wcf, default-value

我有以下情况：

有一个复杂的对象驻留在独立类库中，并且一些对象属性具有默认值。

该对象是 WCF 公共方法的参数。

我在 WCF 的客户端上实例化这个对象，将值分配给属性并将其传递给 WCF 公共方法。

服务端的 WCF 方法接受它并执行任何操作。

我的问题是，当我在客户端属性上实例化对象时，我无法使用默认值，我必须再次在代码中分配它们。

我在这里查看了有关该主题的过去问题，但没有找到与我的场景相关的任何内容。尽管在客户端我的对象不是从类库本身而是从服务引用实例化的，但我并没有真正的参数数据协定，例如 WCFServiceReference.MyClass （否则 WCF 方法不能接受它作为参数）。

我真的很想在客户端上使用所有这些默认值。

我将不胜感激任何帮助。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T00:28:27.990

使用您的方法 - 使用服务代理类 - 客户端仅获取标有 的属性`DataMember`。这就是为什么您分配的默认值不会出现在客户端中的原因——该代码未序列化，因此不会与 WCF 服务一起发送。

如果要共享代码，可以通过`DataContract`在单独的类库中声明类来实现。让 WCF 服务和客户端都引用该库。

# android - 通过标签而不是 ID 刷新片段

> ID：13408592
> 
> 赞同：0
> 
> 时间：2012-11-16T00:22:55.957
> 
> 标签：android, android-layout

我在“ActionBarMain.java”中创建了以下片段

```
 FragMent1 fram1;

FragmentTransaction fragMentTra = null;

public void onTabSelected(Tab tab, FragmentTransaction ft) {

    if (tab.getText().equals("Collection")) {
        try {
            rl.removeAllViews();
        } catch (Exception e) {
        }
        fram1 = new FragMent1();
        fragMentTra.addToBackStack(null);
        fragMentTra = getFragmentManager().beginTransaction().add(rl.getId(), fram1);
        fragMentTra.commit(); 
```

}

```
//And in here I create a new activity
         Intent intent = new Intent(this, AddBookActivity.class);
         startActivity(intent); 
```

所以很自然我应该能够执行`findFragmentByTag(fram1)`

现在我在“AddBookActivity”中，并且已经将一个新项目添加到一个`fram1`打印出来的数组列表中`simple_list_item_1`，所以现在我想刷新 fram1，我该如何在 AddBookActivity 中做到这一点？

```
//AddBookActivity.java
@Override
        public boolean onOptionsItemSelected(MenuItem item) {
            switch (item.getItemId()) {
            case R.id.addBook:
                FragmentManager fragmentManager = getFragmentManager();
                FragmentTransaction fragmentTransaction = fragmentManager.beginTransaction();
                Fragment newFragment = new FragMent1();
                FragmentTransaction transaction = getFragmentManager().beginTransaction();
                //How do I find out the fragment id from findFragmentByTag(fram1)????
                transaction.replace(R.id.your_fragment_id, newFragment);//Whats the id, I have the Tag that is fram1
                transaction.addToBackStack(null);
                transaction.commit();
                return true; 
            case R.id.cancel:
                super.finish(); 
                return (true);

            }

            return (super.onOptionsItemSelected(item));
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T00:36:17.917

`findFragmentByTag`将 a`String`作为参数，而不是 a`Fragment`

所以你会使用

```
fragMentTra = getFragmentManager().beginTransaction().add(rl.getId(), fram1, "fram1"); 
```

添加和替换使用

```
transaction.replace(R.id.your_fragment_id, newFragment, "fram1"); 
```

要找到片段，请使用

```
findFragmentByTag("fram1"); 
```

这是否会更新您的列表是另一回事，因为您发布的代码没有解决这个问题。

编辑：

您`Activity`可以加载多个`Fragments`，因此`Activity`布局将取决于屏幕大小。最简单的用途是它只够一个`Fragment`。这`Fragment`是一个`FragmentList`或它包含一个`ListView`。该列表需要`Adapter`将数据绑定到列表。简单的例子是一个例如`ArrayAdapter`类型。您指定将用作其数据源。然后，您可以直接更改s 底层数据（或）（要求适配器通知更改）或通过适配器本身。通过扩展适配器类可以实现更复杂的视图。`String``ArrayAdapter<String>``ListView``ArrayAdapter``ArrayAdapter``ArrayList<String>``String[]`

我建议查看`ListView`SDK`FragmentList`示例。

# android - 将数据条目从平板电脑上的应用程序发送到存储在其他地方的数据库

> ID：13408595
> 
> 赞同：-2
> 
> 时间：2012-11-16T00:23:04.747
> 
> 标签：android, android-sqlite

我目前的难题是这个。我非常了解如何在应用程序本身中存储数据，但我目前的目标是让应用程序创建的每个数据条目立即发送到位于其他地方的服务器。实现这一目标的最佳方法是什么？

提前为这个模糊的问题道歉，我只是不知道从哪里开始。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T00:45:36.583

通过 HTTP 将数据发送到支持 PHP 的网络服务器，该网络服务器可以将数据写入数据库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T16:53:16.407

尝试研究这些：

REST 和 SOAP。

您还可以尝试 API 和 XML。

REST 和 SOAP 是用于数据交换的协议。

API是应用程序编程接口，你可以在服务器上自己构建一个，或者看看服务器应用程序是否已经有了。

XML 是通常用于数据交换的数据格式。

# javascript - Chrome标签在前台长时间处于后台后崩溃/挂起

> ID：13408597
> 
> 赞同：11
> 
> 时间：2012-11-16T00:23:13.370
> 
> 标签：javascript, google-chrome

我有一个显示实时统计信息的页面。它运行大量的 javascript，发出大量的 HTTP 请求，使用 D3.js 每隔几秒渲染一次 SVG 图表，有大量的 CSS 动画，并且经常重新排列 DOM。

只要页面有焦点，它就可以顺利运行。如果我切换到另一个选项卡并稍后返回，通常会出现短暂的停顿，页面似乎被冻结，然后视图突然似乎重新呈现并且页面再次可用。选项卡的背景时间越长，此暂停的时间就越长。如果选项卡已经在后台很长时间（几个小时）并且我切换回它，它将被冻结很长时间然后崩溃。

在 Chrome 中观察到所有这些行为。我没有在其他浏览器中测试太多。

选项卡在后台时 Chrome 没有做什么，当我第一次切换回选项卡时它在暂停期间做什么？

## 更新：

我也在做一些 jQuery 动画。[这个答案](https://stackoverflow.com/a/7387953/711902) 和[这个](https://stackoverflow.com/a/8040153/711902)答案可能是相关的。

根据第一个答案：

> “非活动浏览器选项卡缓冲了一些 setInterval 或 setTimeout 函数。”
> 
> stop(true,true) 将停止所有缓冲事件并立即执行最后一个动画。

我在我的代码中添加了对 .stop(true, true) 的调用，至少对于远离标签的短途旅行，我没有检测到打嗝。我需要将它留在后台很长时间并对其进行测试，然后才能判断它是否有显着差异。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-02-17T14:08:57.567

我们在 SVG 图上遇到了类似的问题，并设法使用HTML5 引入的**Page Visibility API解决了它。**如果有人偶然发现此类问题，请参阅以下文章[Using the Page Visibility API](https://developer.mozilla.org/en-US/docs/Web/Guide/User_experience/Using_the_Page_Visibility_API)

我们设法做的是在浏览器窗口不可见时暂停所有 SVG 渲染活动。这设法阻止标签崩溃。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T18:19:13.267

是的，这是 Chrome 浏览器的典型行为。

我猜当您的标签在后台时，Chrome 会将所有标签数据放在“后架”上，以清除运行速度更快的“前架”。我知道，这听起来不专业，但我希望你能理解。

我认为在你的情况下很难解决这个问题（因为你对图形使用了很多操作）..但也许这种方法会拯救你（我以前从未测试过）：

每次更新统计信息（或进行一些高负载计算）时，您都可以保存时间戳。然后，当您再次更新统计信息时，您可以减去新时间戳的旧时间戳。而且，如果您发现时间戳之间的差异非常大，请在下次更新之前使用 setTimeout() 函数。也许，它会阻止 Chrome 的 chash。

# sql - 如何创建存储过程以确保每个表都包含某些列？

> ID：13408598
> 
> 赞同：2
> 
> 时间：2012-11-16T00:23:25.647
> 
> 标签：sql, firebird

我有一个 Firebird 数据库，[我想确保每一行一次最多可以由一个用户编辑。](https://softwareengineering.stackexchange.com/questions/173284/whats-a-good-scheme-for-multi-user-database-synchronization) 为此，我想`OWNER`在每个适用的表格上放置一列。为每张表手动执行此操作会有点乏味，因此我尝试编写一种自动化方法。首先，创建一个视图，为您提供所有需要更新的表：

```
CREATE VIEW OWNABLE_TABLES_V
(
  NAME
)
AS
SELECT tables.RDB$RELATION_NAME 
FROM RDB$RELATIONS tables
WHERE (tables.RDB$SYSTEM_FLAG=0) and (tables.rdb$view_source is null)
  and not exists (
    --table containing names of tables that are exceptions to the rule
    select name from META_NOT_OWNABLE 
    where name = tables.RDB$RELATION_NAME)
  and not exists (
    select * from RDB$RELATION_FIELDS fields
    where (fields.RDB$RELATION_NAME = tables.RDB$RELATION_NAME)
    and (fields.RDB$FIELD_NAME = 'OWNER'))
order by tables.RDB$RELATION_NAME; 
```

这工作正常。

然后，创建一个 proc 来进行维护：

```
CREATE PROCEDURE PREPARE_OWNERSHIP
AS 
declare variable name varchar(31); 
BEGIN
   for select NAME from OWNABLE_TABLES_V into :name do
   BEGIN
      execute statement replace('ALTER TABLE %T ADD OWNER INTEGER', '%T', :name)
        with autonomous transaction;
      execute statement replace('ALTER TABLE %T ADD OWNER_TIMEOUT TIMESTAMP', '%T', :name)
        with autonomous transaction;
      execute statement replace('ALTER TABLE %T ADD CONSTRAINT FK_%T_OWNER foreign key (OWNER) references USERS', '%T', :name)
        with autonomous transaction;
   END
END 
```

但是当我运行这个时，什么也没有发生。没有报告错误，但没有表更新为新的簿记。当我在 Firebird 的 Hopper proc 调试器下运行 proc 时，我再次没有收到任何错误。

知道出了什么问题，以及如何正确地做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T19:18:43.423

我发现了问题。在尝试将其作为`EXECUTE BLOCK`语句运行后，我实际上收到了一条有用的错误消息：“未知令牌：_OWNER”。

显然，在 Hopper 调试器下运行 proc 时不会出现这种情况，但是包含表名的元数据选择的结果有尾随空格。所以下面一行：

```
replace('ALTER TABLE %T ADD CONSTRAINT FK_%T_OWNER foreign key (OWNER) references USERS', '%T', :name) 
```

解析为：

```
ALTER TABLE TABLENAME ADD CONSTRAINT FK_TABLENAME      _OWNER foreign key (OWNER) references USERS 
```

这显然是无效的。在in循环`name = trim(name);`之后立即添加该行修复它。`BEGIN``for`

# linux - shell命令末尾的“/dev/null”是什么意思

> ID：13408619
> 
> 赞同：32
> 
> 时间：2012-11-16T00:26:11.380
> 
> 标签：linux, shell

以下命令有什么区别？

```
ssh myhostname "command1; command2;...commandn;" 2>/dev/null
ssh myhostname "command1; command2;...commandn;" 
```

1.  是什么`2>`意思？

2.  是什么`/dev/null`意思？我在某处读到命令的结果将写入文件`/dev/null`而不是控制台！这样对吗？文件名对我来说似乎很奇怪`null`！

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-11-16T00:28:16.580

`2>`表示“重定向标准错误”到给定文件。

`/dev/null`是空文件。任何写入它的东西都会被丢弃。

它们一起意味着“丢弃任何错误消息”。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-05-27T07:35:17.787

1 是标准输出。2 是标准错误。

然后有时你会发现`2>&1`，这意味着将 stderr 重定向到 stdout。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-16T00:28:15.347

`/dev/null`本质上意味着“进入虚空”，被丢弃。你提到的`2`是指错误输出，它应该被引导到哪里。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-16T00:29:13.403

2> 表示将标准错误发送给某物

/dev/null 表示一个 bin

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-16T00:30:24.570

1）将标准错误的所有内容通过管道传输到 /dev/null （所以忽略它并且不显示它）

2) Dev null 只是指向无处，通过管道传递任何东西，然后它就消失了。

# sql-server-2008 - Sitecore 数据库清理错误 - 超时？

> ID：13408625
> 
> 赞同：2
> 
> 时间：2012-11-16T00:26:58.917
> 
> 标签：sql-server-2008, sitecore, sitecore6

在大型站点核心数据库上运行 db cleanup（控制面板 > 数据库 > 清理数据库）时出现错误，主要是由于媒体库 blobs 表。运行大约 4 分钟后出现错误。

```
Job started: CleanUpDatabases|System.InvalidOperationException: This SqlTransaction has completed; it is no longer usable.
at System.Data.SqlClient.SqlTransaction.ZombieCheck()
at System.Data.SqlClient.SqlTransaction.Rollback()
at Sitecore.Data.DataProviders.Sql.DataProviderTransaction.Dispose()
at Sitecore.Data.DataProviders.Sql.SqlDataProvider.CleanupBlobs(CallContext context)
at Sitecore.Data.DataProviders.Sql.SqlDataProvider.CleanupDatabase(CallContext context)
at Sitecore.Data.DataProviders.DataProvider.CleanupDatabase(CallContext context, DataProviderCollection providers)
at Sitecore.Shell.Applications.Databases.CleanUp.CleanUpForm.Cleaner.CleanUp()|Job ended: CleanUpDatabases (units processed: ) 
```

将`DefaultSQLTimeout`web.config 中的值增加到一个较大的值似乎并没有什么不同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T07:42:00.250

尝试在 sitecore/settings 的 web.config 中添加 DataProviderTimeout 设置，这对我有用——我们的主数据库大约 50GB。运行 v6.4.1 Update-1

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-02T11:47:34.267

对我来说，接受的解决方案不起作用。在我的情况下，我有一个很大的主数据库（显然）有很多孤立的媒体项目。一些研究表明，Sitecore 有一个 SQL 服务器脚本可以解决这个问题。Bjarke Istrup Pedersen 创建了一个小型控制台 .NET 程序，它通过一个漂亮、简单的界面运行这个脚本：

[http://mixedsitecore.blogspot.dk/2014/05/fixing-database-with-too-many-orphaned.html](http://mixedsitecore.blogspot.dk/2014/05/fixing-database-with-too-many-orphaned.html)

它为我解决了这个问题。

# php - Preg_match 日期/带或不带前导 0

> ID：13408626
> 
> 赞同：0
> 
> 时间：2012-11-16T00:26:59.960
> 
> 标签：php, regex

当我想转换一个日期以便我可以将它“提供”给 MySQL (mm/dd/yyyy -> yyyy-mm-dd) 这个 preg_match 工作正常

```
$new_date = preg_replace("!([01][0-9])/([0-9]{2})/([0-9]{4})!", "$3-$1-$2", $data[$c]); 
```

日期如

```
04/02/2012, 12/31/2012 
```

但是当我得到像这样的输入时它失败了

```
12/1/2011, 1/4/2011 
```

如何解决它，因为我完全不熟悉正则表达式... :(

非常感谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T00:28:01.813

尝试：

```
!([01]?[0-9])/([0-9]{1,2})/([0-9]{4})! 
```

第二`{1,2}`组上的 表示 0-9 之间的 1 位或 2 位数字。我还让第一部分接受 1 或 2 位数字，以便您可以匹配 2012 年 3 月 12 日和 2012 年 3 月 12 日。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T00:29:53.837

尝试：

```
!(\d{1,2})/(\d{1,2})/(\d{4})! 
```

`\d`表示一个数字，我认为它比 更方便`[0-9]`，它们几乎是等价的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T00:28:24.920

使用日期然后使用正则表达式更容易。[DateTime](http://us3.php.net/manual/en/book.datetime.php)对象使这很容易：

```
$date = new DateTime('1/1/2013');
$new_date = $date->format('Y-m-d'); // Outputs 2013-01-01 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T00:34:47.673

尝试：

```
$date = date("Y-m-d", strtotime($input)); 
```

[strtotime](http://php.net/manual/en/function.strtotime.php)几乎适用于任何格式。

# c++ - (C++) 为相等元素的快速排序添加随机性

> ID：13408631
> 
> 赞同：2
> 
> 时间：2012-11-16T00:27:18.873
> 
> 标签：c++, random, quicksort

我正在使用以下代码对 std.vector 中的元素进行排序

```
struct element {
    int order;
    int someValue;
};

int comp( element a, element b ) {
    if (a.order < b.order)
        return true;
    return (rand() % 2) == 0;
}

vector.quickSort(comp); 
```

如果我尝试在具有相同***顺序***值的元素上添加随机性，此代码是否正确

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T00:31:49.783

> 这段代码是否正确。

你真的应该用一些数据编写一个测试来检查它。

* * *

如果您要编写一个测试，您会发现一些错误并知道原因，如果我们查看

```
if (a.order < b.order)
    return true;
return (rand() % 2) == 0; 
```

您可以看到该`a.order > b.order`案例丢失，这就是为什么它在该案例中无法正常工作的原因，我们可以通过这样做来解决此问题，而是专注于例外情况，并将其他两种情况保留为默认行为（检查顺序）：

```
if (a.order == b.order)
    return (rand() % 2) == 0;
else
    return a.order < b.order; 
```

# api - 将 freebase 搜索查询限制为只有“/common/topic”类型的结果

> ID：13408632
> 
> 赞同：1
> 
> 时间：2012-11-16T00:27:42.960
> 
> 标签：api, search, filter, freebase

我试图从搜索中找到结果，其中结果中的所有主题都只有类型：“/common/type”。例如，如果我搜索“BBQ Chicken”，我想将*“/en/barbecue_chicken”*作为第一个返回，也许只有结果，因为除了*“/common/topic”之外，它没有与之关联的其他类型"*

我确实在以下位置看到了类似问题的答案： [Freebase search_api and exclude results by specified type](https://stackoverflow.com/questions/5883933/freebase-search-api-and-excluding-results-by-specified-type)但我知道新 api 不再支持 mql_filter。此外，我还发现了一个 mql 查询，它返回在 MQL Cookbook 中只有类型“/common/topic”的所有主题，但无法找到在搜索中使用它的方法。

[http://wiki.freebase.com/wiki/MQL_Cookbook#Find_untyped_topics_.28or_which_only_have_a_given_type.29](http://wiki.freebase.com/wiki/MQL_Cookbook#Find_untyped_topics_.28or_which_only_have_a_given_type.29)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T00:48:13.503

Freebase 是一个免费的开放式数据库，任何人都可以为之做出贡献。假设“BBQ Chicken”永远不会分配另一种类型，这不是一个好的假设。事实上，您可能应该假设随着时间的推移，大多数 Freebase 主题将获得除 /common/topic 之外的某种类型。

我已经继续并添加了[/food/dish](http://www.freebase.com/view/food/dish)类型，以便现在您可以使用 Search API 可靠地找到 BBQ Chicken，如下所示：

[https://www.googleapis.com/freebase/v1/search?query=BBQ+Chicken&type=/food/dish](https://www.googleapis.com/freebase/v1/search?query=BBQ+Chicken&type=/food/dish)

# android - 仅在 java 套接字中为基于回合的 android 游戏编写网络代码是一个坏主意吗？

> ID：13408635
> 
> 赞同：-1
> 
> 时间：2012-11-16T00:28:10.833
> 
> 标签：android, multithreading, sockets, file-io, serversocket

最初我想在播放器的地方使用套接字

向服务器发送请求，服务器处理请求并发送回复。或者玩家可能需要每隔一段时间发送一次游戏状态更改的查询。

这是最坏的主意吗？

第二个问题，与服务器端代码有关。目前，每个传入的连接都会产生一个新线程来运行它的任务，主要是从硬盘驱动器上读取一些文件并将字符串发送回请求它作为响应的 android 设备。

但我想知道可扩展性。例如，假设有一百万玩家每分钟打开一个套接字线程，持续 10 秒。在任何给定时间，可能有大约 20,000 个并发线程在运行并且需要使用硬盘驱动器文件 IO 进程......

如果这明显不切实际，你有什么替代方案？谢谢和抱歉，我以前从未尝试过任何网络或类似的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T02:02:20.090

即使只做一个简单的游戏，我也会考虑使用 Message Broker。它通过包开销增加了网络流量，但它具有令人难以置信的灵活性和可扩展性。

查看消息中的请求-回复模式：

[http://www.eaipatterns.com/RequestReply.htmlhttp://www.eaipatterns.com/RequestReply.html](http://www.eaipatterns.com/RequestReply.htmlhttp://www.eaipatterns.com/RequestReply.html)

和

查看此特定代理的 RPC 和主题教程：

[http://www.rabbitmq.com/java-client.html](http://www.rabbitmq.com/java-client.html)

您可以为特定客户端订阅交换中的任何主题，并且可以在运行时更改它们。我为寻找游戏的客户设想了一个主题，然后将它们移动到一个独特的顶部或 que。

我意识到它没有目的，但认为它是比套接字更现代的 TCP/IP 抽象层。您想做的大部分事情都已经完成，您将有更多时间去做有趣的事情！:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T01:02:45.867

我建议使用线程池： [http ://www.javamex.com/tutorials/threads/ThreadPoolExecutor.shtml](http://www.javamex.com/tutorials/threads/ThreadPoolExecutor.shtml)

有了这个，您不必继续创建和销毁线程，但许多线程总是在那里，等待任务。这将避免创建和销毁线程的开销。

关于 IO，您希望避免从多个线程同时读取同一个磁盘，因为这会导致硬盘驱动器浪费时间从一个位置寻找到另一个位置。我将通过实现一个串行管理文件读取的类来解决这个问题。您的每个线程都可以向此类发出请求以读取特定文件并提供在读取文件后调用的回调方法。然后，在您的回调中，您可以处理文件并提出要发送回手机的响应。这也将确保您不会在 2 个线程中意外写入同一个文件。

此答案显示了如何使用回调实现任务：[https ://stackoverflow.com/a/443741/1675231](https://stackoverflow.com/a/443741/1675231)

希望能帮助到你。

# c - 为什么我的程序只能在调试器中运行？

> ID：13408636
> 
> 赞同：0
> 
> 时间：2012-11-16T00:28:13.013
> 
> 标签：c, memory, dr-memory

我正在使用 Dr. Memory 对我今天写的一个 C 程序进行内存调试。使用 MinGW 的 gcc 编译的这个程序只有在我从调试器 gdb 运行它时才有效，所以我假设它是内存错误。内存博士返回给我的 results.txt 文件类似于：

```
Dr. Memory version 1.5.0 build 5 builton Aug 31 2012 16:19:51
Application cmdline: ""c:\Users\Lincoln\Desktop\USACO\gift1.exe""
Recorded 63 suppression(s) from default c:\Program Files\Dr. Memory/bin/suppress-default.txt

Error #1: UNINITIALIZED READ: reading register eflags
# 0 replace_memcmp               [d:\derek\drmemory\withwiki\trunk\drmemory\replace.c:557]
# 1 parseInputs                  [c:\Users\Lincoln\Desktop\USACO/gift1.c:55]
# 2 main                         [c:\Users\Lincoln\Desktop\USACO/gift1.c:126]
Note: @0:00:00.473 in thread 3824
Note: instruction: jnz    $0x7388a607

Error #2: UNINITIALIZED READ: reading register eax
# 0 parseInputs               [c:\Users\Lincoln\Desktop\USACO/gift1.c:55]
# 1 main                      [c:\Users\Lincoln\Desktop\USACO/gift1.c:126]
Note: @0:00:00.473 in thread 3824
Note: instruction: test   %eax %eax

Error #3: UNINITIALIZED READ: reading register esi
# 0 replace_memcmp               [d:\derek\drmemory\withwiki\trunk\drmemory\replace.c:556]
# 1 parseInputs                  [c:\Users\Lincoln\Desktop\USACO/gift1.c:55]
# 2 main                         [c:\Users\Lincoln\Desktop\USACO/gift1.c:126]
Note: @0:00:00.474 in thread 3824
Note: instruction: movzx  (%esi,%ecx,1) -> %edi

Error #4: UNADDRESSABLE ACCESS: reading 0x00000004-0x00000005 1 byte(s)
# 0 replace_memcmp               [d:\derek\drmemory\withwiki\trunk\drmemory\replace.c:556]
# 1 parseInputs                  [c:\Users\Lincoln\Desktop\USACO/gift1.c:55]
# 2 main                         [c:\Users\Lincoln\Desktop\USACO/gift1.c:126]
Note: @0:00:00.474 in thread 3824
Note: instruction: movzx  (%esi,%ecx,1) -> %edi 
```

我不知道如何阅读这篇文章，也不知道从哪里开始尝试修复我的程序。这些错误消息是什么意思，我该如何解决？

编辑：这是我的代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <math.h>

struct personsData {
    char * name;
    int accountMoney, receivedMoney, numAquaintances;
};

void parseInputs( FILE * fin, int NP, struct personsData * person ) {

    int i;
    for ( i = 0; i < NP; i ++ )
        fscanf( fin, "%s", person[i].name );

    char * tempName_1;
    while ( !feof( fin ) ) {

        tempName_1 = malloc ( sizeof( char ) * 15 );
        fscanf( fin, "%s", tempName_1 );

        int index = 0;
        while ( memcmp( tempName_1, person[index].name, 15 ) != 0 )
            index ++;
        free( tempName_1 );

        fscanf( fin, "%d %d", &person[index].accountMoney, &person[index].numAquaintances );

        int b;
        char * tempName_2;
        for ( b = 0; b < person[index].numAquaintances; b ++) {
            tempName_2 = malloc( sizeof( char ) * 15 );
            fscanf( fin, "%s", tempName_2 );
            i = 0;
            while ( memcmp( tempName_2, person[i].name, 15 ) != 0 )
                i ++;

            free( tempName_2 );

            person[i].receivedMoney += ( int ) floor( person[index].accountMoney / person[index].numAquaintances );
            person[index].accountMoney = floor( person[index].accountMoney / person[index].numAquaintances ) * person[index].numAquaintances;

        }
    }

}

int main() {

    FILE * fin  = fopen ("gift1.in",  "r");
    FILE * fout = fopen ("gift1.out", "w");

    int NP;
    fscanf( fin, "%d", &NP);

    struct personsData person[NP];
    int i;
    for ( i = 0; i < NP; i ++ ) {
        person[i].accountMoney = 0;
        person[i].receivedMoney = 0;
        person[i].numAquaintances = 0;
        person[i].name = ( char * ) malloc ( sizeof( char ) * 15 );
    }

    parseInputs( fin, NP, person );

    for ( i = 0; i < NP; i ++ ) {
        // print to output file (and also to console for development purposes
        fprintf( fout,  "%s %d\n", person[i].name, person[i].receivedMoney - person[i].accountMoney );
        printf(         "%s %d\n", person[i].name, person[i].receivedMoney - person[i].accountMoney );
    }

    for ( i = 0; i < NP; i ++ ) {
        free( person[i].name );
    }

    exit(0);
} 
```

这是输入文件gift1.in：

```
5
dave
laura
owen
vick
amr
dave
200 3
laura
owen
vick
owen
500 1
dave
amr
150 2
vick
owen
laura
0 2
amr
vick
vick
0 0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T00:34:03.873

你对 x86 汇编很熟悉吗？如果你不是，其中一些错误将很难解释。无论哪种方式，它都会告诉您回溯中涉及哪些代码行，例如第一行：

```
# 0 replace_memcmp               [d:\derek\drmemory\withwiki\trunk\drmemory\replace.c:557]
# 1 parseInputs                  [c:\Users\Lincoln\Desktop\USACO/gift1.c:55]
# 2 main                         [c:\Users\Lincoln\Desktop\USACO/gift1.c:126] 
```

通常，这些错误似乎表明您将未初始化的内存传递给`memcmp()`并取消引用 NULL 指针。但是，正如 Mitch 所建议的，我们需要查看代码才能确定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T00:36:43.953

我想知道您是否阅读了有关为 Dr Memory 准备程序的[文档](http://drmemory.org/docs/page_prep.html)。看起来您使用过 Visual Studio，因此请使用 /Zi、/MD 或 /Mt、/Ob0、/Oy- 进行编译。确保它是 32 位的，因为 Dr Memory 不支持 64 位二进制文​​件。

这应该为您提供源代码行而不是机器指令的输出。

# r - 相关矩阵

> ID：13408646
> 
> 赞同：2
> 
> 时间：2012-11-16T00:28:58.753
> 
> 标签：r, matrix

我是使用 R 的新手，我正在尝试创建一个相关矩阵。我有三个自变量（x1，x2，x3）和一个因变量（y）。

我一直在尝试使用 cor 来制作相关矩阵，但到目前为止，我一直无法找到这样做的公式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T00:42:15.697

```
x1=rnorm(20)
x2=rnorm(20)
x3=rnorm(20)
y=rnorm(20)
data=cbind(y,x1,x2,x3)
cor(data) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T00:36:38.313

如果我理解正确，你有一个 3 列（比如 x1 到 x3）和许多行（作为 y 值）的矩阵。您可以采取以下行动：

```
foo = matrix(runif(30), ncol=3) # creating a matrix of 3 columns
cor(foo) 
```

如果你已经在 3 个向量 x1 到 x3 中有你的值，你可以`foo`这样：`foo=data.frame(x1,x2,x3)`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T00:57:16.987

如果我错了，请纠正我，但假设这与回归问题有关，这可能就是您要查找的内容：

```
#Set the number of data points and build 3 independent variables
set.seed(0)
numdatpoi <- 7
x1 <- runif(numdatpoi)
x2 <- runif(numdatpoi)
x3 <- runif(numdatpoi)

#Build the dependent variable with some added noise
noisig <- 10
yact <- 2 + (3 * x1) + (5 * x2) + (10 * x3)
y <- yact + rnorm(n=numdatpoi, mean=0, sd=noisig)

#Fit a linear model
rmod <- lm(y ~ x1 + x2 + x3)

#Build the variance-covariance matrix.  This matrix is typically what is wanted.
(vcv <- vcov(rmod))

#If needed, convert the variance-covariance matrix to a correlation matrix
(cm <- cov2cor(vcv)) 
```

综上所述，这是方差-协方差矩阵：

```
 (Intercept)        x1        x2        x3
(Intercept)    466.5773   14.3368 -251.1715 -506.1587
x1              14.3368  452.9569 -170.5603 -307.7007
x2            -251.1715 -170.5603  387.2546  255.9756
x3            -506.1587 -307.7007  255.9756  873.6784 
```

而且，这是相关的相关矩阵：

```
 (Intercept)          x1         x2         x3
(Intercept)  1.00000000  0.03118617 -0.5908950 -0.7927735
x1           0.03118617  1.00000000 -0.4072406 -0.4891299
x2          -0.59089496 -0.40724064  1.0000000  0.4400728
x3          -0.79277352 -0.48912986  0.4400728  1.0000000 
```

# matlab - 正确的轴范围（matlab）

> ID：13408648
> 
> 赞同：0
> 
> 时间：2012-11-16T00:29:23.467
> 
> 标签：matlab, axis-labels

我怎样才能自动解决这两个图像的问题（使用适用于不同数据的代码）**而不必为每个图固定轴范围**（我有数百万个这些图）？

问题：轴范围**应该更小**

问题：轴范围**应该更大**

另外，我需要**从第一个值到最后一个值正确标记**轴（请参见评论中的示例）

非常感谢任何帮助。非常感谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T17:14:00.120

要设置轴限制和更好地可视化图表，您可以使用轴命令，如 axis([xmin xmax ymin ymax]) 参数设置图表边界。它应该可以帮助你。更多信息在这里： http: [//www.mathworks.se/help/matlab/ref/axis.html](http://www.mathworks.se/help/matlab/ref/axis.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T12:51:11.233

为了有一个完整的边界框使用`box on`.

为了避免绘图周围出现大的空白空间（或根本没有空间），请使用`xlim`and `ylim`。尝试以下操作：

```
figure
plot(x,y)
box on

x1 = min(x);
x2 = max(x);
dx = x2-x1;
y1 = min(y);
y2 = max(y);
dy = y2-y1;

fc = 10/100  % this is a factor of 10% of empty space around plot

xlim([x1-dx*fc x2+dx*fc])
ylim([y1-dy*fc y2+dy*fc]) 
```

如果你想让一个刻度值出现在轴的开始和结束处，你可以通过 强制它`set(gca,'Xtick',[values])`，其中值是你想要显示的那些刻度；或通过上述 xlim`floor`和`ceil`ylim 最小和最大限制。

希望这是你需要的

# java - 带有switch语句java的字符计数器

> ID：13408649
> 
> 赞同：2
> 
> 时间：2012-11-16T00:29:39.313
> 
> 标签：java, character, switch-statement, counter

我正在编写一个字符计数器程序，它读取一行文本并计算元音、辅音、空格和标点符号的数量。

我还必须使用一个开关来增加每个的计数。由于这是我第一次在程序中使用 switch 语句，我不确定我是否在循环中正确使用它。

据我所知，问题在于它编译时的循环，但是当它运行时，它挂在终端中，所以我假设循环没有正确终止。

我知道我计算字符的方法非常基本，但这是按照说明进行的。

谢谢

```
import java.util.Scanner;
import java.io.*;

public class CharacterCounter2
{
public static void main(String args[])
{

Scanner scan = new Scanner(System.in);
String line = new String(scan.nextLine());

String cons = new String ("bcdfghjklmnpqrstvwxyz");
String vowels = new String ("aeiou");
String space = new String (" ");
String punct = new String(",.;:");

int consCount = 0, vowelCount = 0, spaceCount = 0, pCount = 0, inx = 0;
char ch = line.charAt(inx);

while (inx <= line.length()-1)

{
if (cons.indexOf(line.charAt(inx)) != -1)
ch = 'C';
else 
if (vowels.indexOf(line.charAt(inx)) != -1)
ch = 'V';
else
if(line.equals(space))
ch = 'S';
if (punct.indexOf(line.charAt(inx)) != -1)
ch = 'P';

switch (ch)
{
case 'C':
consCount += 1;
break;

case 'V':
vowelCount += 1;
break;

case 'S':
spaceCount += 1;
break;

case 'P':
pCount += 1;

default:
break;

}

inx = inx ++;
ch = line.charAt(inx);
}

System.out.println("contains" +consCount+" consonants, "+vowelCount+" vowels, " + spaceCount+" spaces" + pCount + "punctuation");
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T00:32:23.107

你永远不想这样写：

```
inx = inx ++; 
```

你的意思很简单

```
inx++; 
```

这至少应该让循环终止，否则我认为它可能会起作用，除非你的空间计数逻辑是错误的。

# ruby-on-rails - Rails mongoDB 添加新的键值对

> ID：13408650
> 
> 赞同：0
> 
> 时间：2012-11-16T00:29:43.683
> 
> 标签：ruby-on-rails, mongodb

我正在使用 MongoDB on Rails。如果我想在现有集合中添加一个新的键值对，这样做的语法是什么？假设集合名称是用户，它类似于

```
User.create(:name => "john") 
```

?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T10:45:58.653

您使用的是 Mongo_mapper 还是 Mongoid（那么您必须有一个用户模型）？

```
#mongo_mapper
User.create(:name => "John") 
```

使用 ruby​​ 驱动程序，是这样的：

```
collection = db["User"]
collection.insert(:name => "John") 
```

但首先，您需要建立连接，并选择数据库

[http://api.mongodb.org/ruby/current/file.TUTORIAL.html](http://api.mongodb.org/ruby/current/file.TUTORIAL.html)

# wpf - 在 WPF 和 Silverling 中使用 IDataErrorInfo

> ID：13408656
> 
> 赞同：0
> 
> 时间：2012-11-16T00:30:09.657
> 
> 标签：wpf, mvvm

我使用*IDataErrorInfo*接口来处理模型中的验证，它在 Silverlight 中工作。相同的界面用于相同的 WPF 应用程序，应用程序工作正常，但验证不起作用。

我错过了什么吗？我的假设是该应用程序应该在两个平台上都可以运行，但我想这不是真的。任何想法？

谢谢。

# asp.net - 使用 Web API 和数据库优先策略构建 ASP.Net 应用程序

> ID：13408659
> 
> 赞同：5
> 
> 时间：2012-11-16T00:30:25.777
> 
> 标签：asp.net, asp.net-mvc, entity-framework, asp.net-web-api, crud

我是 ASP.NET MVC 4 和 Web API 的新手。

我想要实现的是创建一个 CRUD Web 应用程序，它能够在一个简单的现有 SQL Server 2008 数据库中操作数据表。

我想到了带有 Web API 和实体框架的新 MVC 4。有许多关于代码优先数据访问模式的示例和示例，但关于数据库优先的却很少。

任何人都可以帮助任何简要的想法如何首先使用数据库和实体框架和存储库模式来实现这一点吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T01:28:34.437

您所描述的（CRUD 操作、SQL Server、实体框架）是 MVC4 项目的假定默认值。给定数据库优先的方法，这对您来说应该非常简单。

1.  在 Visual Studio 中创建 MVC4 项目
2.  在该`Models`文件夹下，创建一个新的实体框架类（ADO.Net 实体框架模型）。选择“从数据库生成”并按照说明操作
3.  构建项目
4.  右键单击该`Controllers`文件夹并添加一个新控制器。选择“具有读/写操作和视图的 MVC 控制器，使用实体框架”。对于 Model 类，选择要定位的表实体。对于数据上下文类，选择您在步骤 2 中创建的实体框架类。

就是这样。您应该能够运行该项目并让 CRUD 表单完全可操作（导航到 /YourControllerName 以查看表中的行列表）。您可以根据需要重复步骤 4 以添加其他表控制器。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-16T01:27:12.220

几个月前我开始走这条路：学习 ASP.Net、MVC3，使用现有数据库构建 App。

这是我发现的（我很高兴得到纠正）：

1.  不学VB，学C#。周围的 VB 示例很少。

2.  我遵循了“数据库优先”教程。网上有很多教程，上手跟着一个，不要害怕重新开始

3.  如果你想要任何花哨的东西，你需要使用 JQuery——这基本上是一个 javascript 库。MVC / ASP.Net 提供的交互式网格和页面方式非常少。

4.  事实证明，MVC 有点用词不当。通常你需要 5 层，而不是 3 层：

模型（MVC中的M，一般由Entity Framework等代码生成工具为你生成，直接映射到表）

ViewModel（围绕自动生成的表类添加更多有用数据的包装类）-这篇文章是我遇到的地方： [MVC dbContext find parent record when current record has no elements](https://stackoverflow.com/questions/12661411/mvc-dbcontext-find-parent-record-when-current-record-has-no-elements)

控制器（MVC 中的 C）

视图（MVC 中的视图）

Javascript（如果您需要基本 HTML 表单之外的任何内容，例如网格或日期选择器，则需要使用 javascript）

就像我说的那样，我很高兴在这些问题上得到纠正。这只是我在这个旅程阶段的观点。我不得不说我只是将 jqGrid 作为网格解决方案进行了调查，我正准备尝试其他方法。

# c++ - c++奇怪的语法

> ID：13408663
> 
> 赞同：1
> 
> 时间：2012-11-16T00:30:39.137
> 
> 标签：c++, syntax

我不明白教程
第一个代码中的一些东西：那个逗号“，”在中间做什么？mb 是重载运算符吗？

```
u32 TimeStamp = irrTimer->getTime(), DeltaTime = 0; 
```

接下来我有一个来自 CharacterDemo 类的奇怪构造函数，为什么在一些带有奇怪括号的变量后面有一个“：”？我猜他们正在用括号中的值初始化..？

```
CharacterDemo::CharacterDemo()
:
m_indexVertexArrays(0),
m_vertices(0),
m_cameraHeight(4.f),
m_minCameraDistance(3.f),
m_maxCameraDistance(10.f)
{
    m_character = 0;
    m_cameraPosition = btVector3(30,30,30);
} 
```

我很好奇，解释很受欢迎

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T00:34:58.460

这是一个[初始化列表](http://forums.codeguru.com/showthread.php?464084-C-General-What-is-the-initialization-list-and-why-should-I-use-it)。

它调用指定类的成员和父类的构造函数。

请注意，您只能在类的构造函数中使用它（因为它只发生在其构造中）。

**[编辑]**对于您的第一个问题，这是一次声明多个相同类型的变量的方法。请注意，它并不总是按预期工作：`int * a, b`将声明一个`a`类型的变量`int *`和另一个`b`类型的变量`int`（不是指针）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T00:36:13.977

> 中间那个逗号“，”在做什么？

语句 like`int i = 3, j = 4;`与`int i = 3; int j = 4;`

因此，`u32 TimeStamp = irrTimer->getTime(), DeltaTime = 0;`定义和初始化两个类型的变量`u32`：一个是命名`TimeStamp`的，另一个是命名的`DeltaTime`。

> 为什么在一些带有奇怪括号的变量后面有一个“：”？我猜他们正在用括号中的值初始化..？

没错：谷歌搜索`c++ member initialization list`.

# javascript - 尝试只返回多个数据一次

> ID：13408666
> 
> 赞同：0
> 
> 时间：2012-11-16T00:31:09.650
> 
> 标签：javascript, d3.js

我目前有一个对象是平移位置，我将它们放在我的变换函数中：

```
 .attr("transform", function(d,i)
                {return "translate ("+ arc[i].centroid() +")" +  inner[d.Country];})
                ;

   .text(function(d) {return d.Country;}) 
```

我想知道是否可以在文本函数中定义只收集国家数据一次而不是多次？

这是一个 jsfiddle 让我的观点更清楚：http: [//jsfiddle.net/xwZjN/41/](http://jsfiddle.net/xwZjN/41/)

任何正确方向的指针将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T13:09:17.500

要绘制国家名称，您将遍历具有重复国家名称的节点，因此您将获得多个名称。也许您可以对节点进行快速转换并对其进行迭代。像这样的东西可以工作。

首先创建一个返回唯一元素的函数。这是我在[SO](https://stackoverflow.com/questions/840781/easiest-way-to-find-duplicate-values-in-a-javascript-array)中找到的一个：

```
function unique(a) {
  var s = a.sort();
  var r = [];
  for (var i = 0; i < a.length - 1; i++) {
    if (s[i + 1] != s[i]) {
      r.push(s[i]);
    }
  }
  return r;
} 
```

然后使用以下内容作为您的数据元素。

```
unique(nodes.map(function(d) { return d.Country })) 
```

这样做是，首先，将节点数组转换为国家名称数组，其次，仅获取不重复的国家名称。由于`d.Country`数据现在位于`d`.

希望能帮助到你...

# ajax - 为什么我的 Ajax 代码无法运行？

> ID：13408667
> 
> 赞同：0
> 
> 时间：2012-11-16T00:31:11.107
> 
> 标签：ajax

我正在尝试构建一个页面，当用户单击按钮时，该页面将显示 PHP 数组中的下一项。我是 Ajax 的新手，我正在使用“Head First Ajax”一书作为指南。我的代码（如下）不起作用，我不明白为什么。坦率地说，我什至不知道如何调试 Ajax ......

该代码位于一个名为`Index.php`. 我正在使用 WampServer。

页面加载正确。这是代码：

```
<html><head><script type="text/javascript">
  var id=null;
  function getRequest(){
    try {
      request = new XMLHttpRequest();
    }catch (MS){
      try {
        request = new ActiveXObject("Msxml2.XMLHTTP");
      }catch (MoreMS){
        try {
          request = new ActiveXObject("Microsoft.XMLHTTP");
        }catch (failure){
          request = null;
        }
      }
    }
    return request;
  }

  function showNext(itemId){
    request=getRequest();
    if(request==null){
      alert("Request object is null");
      return;
    }
    var url="index.php?itemId="+escape(itemId);
    request.open("GET",url,true);
    request.onreadystatechange=function(){
      if(request.readyState==4){
        alert("Request.readyState is 4");
        if(request.status==200){
          alert("Request.status is 200");
          document.getElementById('article').value=request.responseText;
        }else{
          alert("Request.status not 200");
          return;
        }
      }else{
        alert("Request.readystate not 4");
        return;
      }
    }
    request.send(null);
  }

  function getItemId(){
    if(id==null){
      id=0;
    }else{
      id=id+1;
    }
    return id;
  }

  function doIt(){
    itemId=getItemId();
    showNext(itemId);
  }
</script></head>
<body><p>
  <textarea id='article'>
  </textarea>
</p>  
<p>
  <button type="button" id='showNext1' onclick="doIt()" >Show next</button>
</p></body></html>

<?php
  $array=array(10,21,32,43,54,65,76);
  if(!isset($_GET['itemId'])){
  }else{
    echo $array[$_GET['itemId']];
  }
  var_dump("GET :",$_GET);
?> 
```

当我单击按钮时，会发生以下情况：

我收到**两次**`Request.readystate not 4`警报，然后是一次，`Request.readyState is 4`然后是一次`Request.status is 200`，然后是`textarea`填充，然后是**一次** `Request.readystate not 4`。毕竟`textarea`包含我的整个代码，然后是：

```
10<pre class='xdebug-var-dump' dir='ltr'><small>string</small> <font color='#cc0000'>'GET :'</font> <i>(length=5)</i>
</pre><pre class='xdebug-var-dump' dir='ltr'>
<b>array</b>
  'itemId' <font color='#888a85'>=&gt;</font> <small>string</small> <font color='#cc0000'>'0'</font> <i>(length=1)</i>
</pre> 
```

然后，如果我再次单击，我会得到相同的警报和输出，除了最后我得到`21<pre class='xdebug-var-dump'....`. 下一步单击产生相同`32<pre class....`的结果，除了最后的等等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T00:57:10.317

尝试为`onreadystatechange`事件内联定义函数。`value`此外，使用而不是访问文本区域的值`innerHtml`。修改后的内容`showNext()`为：

```
function showNext(itemId){
    request=getRequest();
    if(request==null){
        return;
    }
    var url="index.php?itemId="+escape(itemId);
    request.open("GET",url,true);
    request.onreadystatechange= function(){
        if(request.readyState==4){
            if(request.status==200){
            document.getElementById('article').value=request.responseText;
            }
        }   
    }
    request.send(null);
} 
```

# excel - 在excel中通过宏添加颜色

> ID：13408668
> 
> 赞同：1
> 
> 时间：2012-11-16T00:31:11.777
> 
> 标签：excel, colors, styling, fill, vba

我有 13 列关于我们当前库存的信息 - 二手车 它们按制造型号年份等排序 我想要一个宏来查看第 8 列（制造）并将整行交替制造的填充颜色更改为黄色所以当印刷品可能会来来去去，库存中每个品牌的数量也会根据采购和销售情况发生变化时，它们会成群地脱颖而出。当然它也需要在到达数据底部时停止。我已经阅读了很多文章，但还没有看到这个特别的问题得到解决。任何帮助或正确方向的点将不胜感激。我正在使用 Excel 2010

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T00:58:26.783

不需要宏。您可以使用条件格式。假设您的数据从第 2 行开始，请将第 2 行中的单元格的条件格式公式设置为以下

```
=MOD(SUM(IF($H2:$H9999<>OFFSET($H2:$H9999,1,0),1,0)),2)=0 
```

并根据需要设置该条件的突出显示。将格式复制并粘贴到其他单元格。根据需要调整下限，以便覆盖所有行。这也可以是动态的，但我不想过多地混淆公式。

# hyperlink - 阻止链接返回顶部

> ID：13408671
> 
> 赞同：1
> 
> 时间：2012-11-16T00:31:57.560
> 
> 标签：hyperlink

我有一张图片，上面写着“添加到购物车”，当它被点击时，jQuery 会显示一个 div，说明已成功添加到购物车。问题是，因为我需要它作为图片滚动的链接才能工作，所以单击时它链接到页面顶部（

```
<div class="producttext"> Body Snatcher <!-- product name text --> <div class="pricetag"><img src="pricetags/1499.png" width="113" height="150" /> </div></div> <!-- pricetag, ending both the pricetag and text div -->
  <div class="addtocart"><a href="#" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('cart','','cart-rollover.png',1)"><img onclick="document.getElementById('addedcartbg').style.display = 'block'" src="cart.png" width="200" height="80" id="cart" /></a> <br /></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T00:36:59.487

尝试将 href 更改为“javascript:;” 所以它不会跳转到命名/空（如此顶部）锚点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T00:54:52.333

我只能猜测这一点，因为我看不到您在这里使用的函数所涉及的代码。通常，当我使用函数调用并且不希望对调用它的页面进行任何更改时，我会简单地添加'return false;' 作为函数的最后一行。

但是，如果您有想要从函数返回的数据，那么您可能需要将函数返回的值放在全局声明的变量中，然后再从函数返回 false。例如，在您显示的函数中......

```
function MM_swapImgRestore() {
  ...do my processing here;
  my_global_variable_1 = (value you want returned from this function)
  return false;
}

functionMM_swapImage('cart','','cart-rollover.png',1) {
  ...do my processing here;
  my_global_variable_2 = (value you want returned from this function)
  return false;
} 
```

对于一个锚标签，你可以做同样的事情......

```
<a href="javascript:return false;"
   onmouseout="MM_swapImgRestore()"
   onmouseover="MM_swapImage('cart','','cart-rollover.png',1)">
<img onclick="document.getElementById('addedcartbg').style.display='block'"
     src="cart.png" width="200" height="80" id="cart" />
</a> 
```

此外，我会将 onclick 事件添加到锚点而不是图像，即使 HTML5 允许所有标签上的 javascript 处理程序。

```
<a href="javascript:return false;"
   onclick="document.getElementById('addedcartbg').style.display='block'"
   onmouseout="MM_swapImgRestore()"
   onmouseover="MM_swapImage('cart','','cart-rollover.png',1)">
<img src="cart.png" width="200" height="80" id="cart" />
</a> 
```

这是我在 jsfiddle 为您提供的示例

[http://jsfiddle.net/Ephiphany/bRF7t/](http://jsfiddle.net/Ephiphany/bRF7t/)

# svn - SVN 创建主干等目录

> ID：13408672
> 
> 赞同：20
> 
> 时间：2012-11-16T00:32:03.193
> 
> 标签：svn

如何使用 svn 命令行或 svnadmin 来创建推荐的目录结构主干等。我做了 mkdir 但什么也没显示？如何创建这些目录？

无法使用工具连接，所以只想先创建这些基本目录。

所以让我知道如何使用命令行或帮助：[SVNAdmin Create Repository URL not working](https://stackoverflow.com/questions/13407784/svnadmin-create-repository-url-not-working)

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-11-16T02:27:38.940

Did you read the [Subversion manual](http://svnbook.com)? This is one of the best open source instruction manuals in the world. Go through the first few chapters and try the examples. Heck, they show you exactly how to do what you want.

You are talking about two separate structures: The repository directory that may be on a completely different machine, and the working directory where you've checked out your work.

You need to create a repository. Once you do that, you can use the `svn mkdir` command to either make your directory structure without a working directory:

```
$ svn mkdir --parents -m" Creating basic directory structure" \
    svn://my_repo/trunk svn://my_repo/branches svn://my_repo/tags 
```

Or, you can checkout a copy of the repository in into a working directory and do everything from there:

```
C> svn co svn://my_repo workingdir
C> cd workingdir
C> svn mkdir trunk tags branches
C> svn commit -m"Creating basic directory structure" 
```

Notice that you will not see the directories directly inside your repository. However, you can use the `svn ls` command to see the structure:

```
C> svn ls -R svn://my_repo 
```

# java - JAXB 和编组

> ID：13408684
> 
> 赞同：0
> 
> 时间：2012-11-16T00:32:58.113
> 
> 标签：java, jaxb, marshalling

我有以下内容：

```
JAXBContext context = JAXBContext.newInstance(A.class, B.class, C.class, D.class); 
```

假设 A、B、C、D 是来自具有不同名称空间的不同模式的类。

我正在创建 Marshaller 对象，如下所示：

```
Marshaller m = context.createMarshaller(); 
```

然后我使用这个 Marshaller m 将 A 的实例转换为 XML。

在生成 XML 代码时，Marshaller 对象还放置了与 B、C 和 D 关联的其他命名空间。

我看到如下内容：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<ns4:A 
xmlns:ns4="http://a.com/" 
xmlns:ns5="http://b.com/"
xmlns:ns6="http://c.com/"
xmlns:ns7="http://d.com/">
<ns4:Foo></ns4:Foo>
</ns4:A> 
```

我不希望将 ns5、ns6 和 ns7 添加到 XML 中。我该怎么做？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T01:59:52.757

将命名空间绑定到包中的类，使用`package-info.java`wilch 将如下所示：

```
@javax.xml.bind.annotation.XmlSchema(namespace = "http://nameSpaceUri"
, xmlns = {
    @XmlNs(prefix = "myPrefix", namespaceURI = "http://nameSpaceUri")
}
, elementFormDefault = javax.xml.bind.annotation.XmlNsForm.QUALIFIED)

package my.package.; 
```

如果没有命名空间应用于编组对象，则 this

```
<ns4:A 
xmlns:ns4="http://a.com/" 
xmlns:ns5="http://b.com/"
xmlns:ns6="http://c.com/"
xmlns:ns7="http://d.com/"> 
```

会发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T11:58:46.607

**注意：** 我是[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)负责人，也是[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)专家组的成员。

您看到的行为会因您使用的 JAXB 实现而异。MOXy 实现将为您提供您正在寻找的结果。我将在下面演示。

**JAVA模型**

下面是将用于此示例的 Java 模型。包级别`@XmlSchema`注释将用于指定每个包中的命名空间限定（参见： [http](http://blog.bdoughan.com/2010/08/jaxb-namespaces.html) ://blog.bdoughan.com/2010/08/jaxb-namespaces.html ）。

**论坛13408684.aA**

```
package forum13408684.a;

import javax.xml.bind.annotation.XmlRootElement;

@XmlRootElement
public class A {

} 
```

**论坛13408684.a.package-info**

```
@XmlSchema(namespace="A", elementFormDefault=XmlNsForm.QUALIFIED)
package forum13408684.a;

import javax.xml.bind.annotation.*; 
```

**论坛13408684.bB**

```
package forum13408684.a;

import javax.xml.bind.annotation.XmlRootElement;

@XmlRootElement
public class B {

} 
```

**论坛13408684.b.package-info**

```
@XmlSchema(namespace="B", elementFormDefault=XmlNsForm.QUALIFIED)
package forum13408684.b;

import javax.xml.bind.annotation.*; 
```

* * *

**演示代码**

```
package forum13408684;

import javax.xml.bind.*;
import forum13408684.a.A;
import forum13408684.b.B;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(A.class, B.class);

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(new A(), System.out);
        marshaller.marshal(new B(), System.out);
    }

} 
```

* * *

**输出**

**JAXB 参考实现**

下面的输出与您在问题中描述的内容相匹配：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<a xmlns="A" xmlns:ns2="B"/>
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<ns2:b xmlns="A" xmlns:ns2="B"/> 
```

**EclipseLink JAXB (MOXy)**

如果您将 MOXy 指定为您的 JAXB 提供程序（请参阅：[http](http://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as-your.html) ://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as-your.html ），您将获得您正在寻找的输出。

```
<?xml version="1.0" encoding="UTF-8"?>
<a xmlns="A"/>
<?xml version="1.0" encoding="UTF-8"?>
<ns0:b xmlns:ns0="B"/> 
```

# python - 如何在我的项目中使用预制应用程序？

> ID：13408685
> 
> 赞同：0
> 
> 时间：2012-11-16T00:32:59.733
> 
> 标签：python, django, macos

抱歉，我完全是个菜鸟，但我找不到任何能真正解释这一点的地方。我想制作一个网络博客，我想与其自己滚动，不如使用一个预制的博客，我从基本应用程序项目中选择了博客（https://github.com/nathanborror/django-basic-应用）。我安装一切正常，将应用程序添加到我的设置文件，同步数据库等。但现在我不知道该怎么做。我如何实际使用博客？当我运行测试服务器时，它说我必须执行 manage.py startapp 但我已经有了 app 文件夹。我应该怎么办？再次，对不起菜鸟问题。

最好的，

杰克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T03:21:42.077

经验法则是：如果应用程序的纪录片没有解释如何安装（使用等）应用程序，那么最好忘记使用该应用程序。

你怎么能依赖 5 个月未更新-未测试-未充分记录的应用程序？应该有更好的解决方案。

# content-management-system - SimpleCMS，PageLime。它们安全吗？

> ID：13408688
> 
> 赞同：1
> 
> 时间：2012-11-16T00:33:31.667
> 
> 标签：content-management-system

我有一个中等大小的网站（50 页），其中大约一半是静态的。我想授予我的客户编辑静态页面的权限，并且正在考虑使用 PageLime 或 SimpleCMS。但是，安全性是我的客户关心的问题。任何人都可以评论这些 CMS 的安全性吗？我也有点担心，因为该站点的 FTP 凭据存储在 CMS 的站点上。

感谢您的任何意见。

# actionscript-3 - Eclipse 控制台显示红色文本运行时错误，但没有足够的错误信息。我如何找到这个错误？

> ID：13408689
> 
> 赞同：1
> 
> 时间：2012-11-16T00:33:30.960
> 
> 标签：actionscript-3, flash-builder, runtime-error

我正在Eclipse（Flash-builder 4.5）中处理一个大型ActionScript 3.0项目，我通过拖放输入文件到程序窗口中。自从我最近接触到代码库以来，我对代码库知之甚少。通常，在调试和抛出一些东西时，它有一个堆栈跟踪和有关错误的更多信息（在控制台上以红色文本显示）。然而，这一次，程序继续运行，除了一行带有一些错误信息的红色文本之外，没有响应我的拖放操作。

我怎样才能查明这个问题，以便找出问题所在？一行只是我试图在其上运行程序的输入文件。当代码仍在工作时，我已尝试在代码的前面逐步执行，但是必须调度其他我不知道的事件。我还在所有的捕获括号中放置了痕迹，以确保我看到是否有任何东西被抛出。

谢谢你的帮助。

# jquery - jquery暂停多个元素？

> ID：13408703
> 
> 赞同：0
> 
> 时间：2012-11-16T00:35:35.730
> 
> 标签：jquery, animation, queue, controls

[fxqueues](http://archive.plugins.jquery.com/project/fxqueues)似乎不适用于较新版本的 jquery。

我正在为许多元素制作动画，需要暂停/播放它们。简单地字符串回调不会给我我需要的控制（至少可读），因为停止动画需要引用被动画的元素并且有很多元素。

我试图将动画排队到父 div，但这似乎不起作用。像这样的东西：

```
<div id='parent'>
    <div class='c1'></div>
    <div class='c2'></div>
    <div class='c3'></div>
    <div class='c4'></div>
</div>

$('#parent')
    .queue(function(){$('.c1').animate({...})});
    .queue(function(){$('.c2').animate({...})});
    .queue(function(){$('.c3').animate({...})});
    .queue(function(){$('.c3').animate({...})});

$('#parent').pause();
$('#parent').clearQueueu(); 
```

我要玩了：[stackoverflow answer for something related](https://stackoverflow.com/questions/12675275/writing-a-global-animation-queue-in-jquery)

这是一个如此罕见的需求，以至于 jquery 团队有理由忽视这个功能，[就像在许多例子中的这样一个请求中一样](http://bugs.jquery.com/ticket/7490)？或者是否有其他策略与 .promise()、.done()、.deferend()、Callbacks.add()...等。我应该学习吗？

再次为每个动画使用回调对于许多动画来说很麻烦，并且所有这些回调的暂停/播放功能意味着我的暂停函数必须为运动中的许多元素中的每一个都有线条。

```
$('.c1').pause();
$('.c2').pause();
$('.c3').pause();
$('.c4').pause(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T00:52:13.753

[:animated](http://api.jquery.com/animated-selector/)选择器会帮助你吗？您应该能够选择所有动画元素并停止它们。

# ios - 线程 1：EXC_BAD_ACCESS（代码=2，地址=0xbf7ffffc）GMTOAuth2

> ID：13408705
> 
> 赞同：1
> 
> 时间：2012-11-16T00:36:05.407
> 
> 标签：ios

我在一个带有一个viewController的应用程序中使用GMTOAuth2，它工作正常，然后我将相同的代码添加到另一个包含更多viewControllers的应用程序中，它加载了带有用户名和密码文本字段的webView，但是如果我单击此视图中的任何内容，它会崩溃线程 1：EXC_BAD_ACCESS (code=2, address=0xbf7ffffc) with void SendDelegateMessage(NSInvocation *): delegate (webView:decidePolicyForNavigationAction:request:frame:decisionListener:) 在等待 10 秒后未能返回。主运行循环模式：控制台中的 kCFRunLoopDefaultMode。我的授权部分代码如下所示：

```
- (void)awakeFromNib {
    [super awakeFromNib];
    GTMOAuth2Authentication *auth = nil;
    auth = [GTMOAuth2ViewControllerTouch authForGoogleFromKeychainForName:kKeychainItemName
                                                             clientID:kMyClientID
                                                         clientSecret:kMyClientSecret];
    if (auth)
    {
        [auth authorizeRequest:nil
                  delegate:self
         didFinishSelector:@selector(authentication:request:finishedWithError:)];
    }

}

- (void)signInToGoogle {
    [self signOut];

    NSString *keychainItemName = kKeychainItemName;

    NSString *scope = @"https://spreadsheets.google.com/feeds https://docs.google.com/feeds";
    NSString *clientID = kMyClientID;
    NSString *clientSecret = kMyClientSecret;

    if ([clientID length] == 0 || [clientSecret length] == 0) {
        NSString *msg = @"The sample code requires a valid client ID and client secret to sign in.";
        [self displayAlertWithMessage:msg];
        return;
    }

    SEL finishedSel = @selector(viewController:finishedWithAuth:error:);

    GTMOAuth2ViewControllerTouch *viewController = [[GTMOAuth2ViewControllerTouch alloc]     initWithScope:scope
                                                                                              clientID:clientID
                                                                                          clientSecret:clientSecret
                                                                                  keychainItemName:keychainItemName
                                                                                  finishedSelector:finishedSel];
                                                                                          delegate:self
    [self presentViewController:viewController animated:YES completion:^{}];

    [[self navigationController] pushViewController:viewController animated:YES];

}

- (void)authentication:(GTMOAuth2Authentication *)auth
           request:(NSMutableURLRequest *)request
     finishedWithError:(NSError *)error {
    if (error != nil) {
        NSLog(@"error!");
    } else {
        [self isAuthorizedWithAuthentication:auth];
        self.auth = auth;    
    }
} 
```

并将相同的类从第一个应用程序复制到第二个应用程序，并制作完全相同的 nib 文件。

# mysql - 最近的 MySql 集群改进

> ID：13408708
> 
> 赞同：3
> 
> 时间：2012-11-16T00:36:21.907
> 
> 标签：mysql

我最近一直在互联网上阅读有关 MySql 在其他各种数据库中的可扩展性。我注意到关于 MySql Cluster 的一件事是，许多关于它的问题和博客都已经严重过时，出现在 3-4 岁之间。我想通过 MySql Cluster 7.2 GA 的发布获得一个更新的视角。我的一些普遍担忧是稳定性、复合键、数据丢失和数据节点之间的网络通信，因为如果我决定使用它，我将使用 AWS EC2 进行托管。有没有人最近有使用 MySql Cluster 的经验，可以提供一些启示？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T15:32:09.993

披露 - 我在 MySQL Cluster 产品团队工作

我可以花几个小时谈论 MySQL 集群的演变和改进（！），但最好直接听取用户的意见。

PayPal 在 MySQL Cluster 7.2 上实施了他们的全球欺诈检测系统——部署在 5 个 AWS 区域，保护了超过 1000 亿美元的交易。这里有新闻报道和主题视频： [http ://www.mysql.com/customers/view/?id=1223](http://www.mysql.com/customers/view/?id=1223)

PlayFul Play - 拉丁美洲最大的社交游戏开发商已部署在 MySQL Cluster 7.2 上，在 SoftLayer 云上运行： [https ://blogs.oracle.com/MySQL/entry/mysql_cluster_powers_el_chavo](https://blogs.oracle.com/MySQL/entry/mysql_cluster_powers_el_chavo)

因此，如果我建议您继续尝试，您不会感到惊讶！

# android - Android：带有 FragmentTabHost 的底部标签

> ID：13408709
> 
> 赞同：4
> 
> 时间：2012-11-16T00:36:28.660
> 
> 标签：android, android-fragments, android-tabhost

我正在尝试将 FragmentTabHost 放在屏幕底部。前段时间，我可以用常规的 TabHost 做到这一点（按照[这个线程](https://stackoverflow.com/questions/2395661/android-tabs-at-the-bottom)），但现在这对我不起作用。

有没有办法做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T01:40:28.320

我终于明白了这一点。FragmentTabHost.java 存在一个问题，它总是会为您创建一个 TabHost 元素，无论您在 XML 中定义什么并预先膨胀。

因此，我在编写自己的 FragmentTabHost.java 版本时注释掉了那部分代码。

确保在您的 XML 布局中使用您的新版本，`<com.example.app.MyFragmentTabHost`

当然还有充气：

片段1.java：

```
mTabHost = (MyFragmentTabHost) view.findViewById(android.R.id.tabhost);
mTabHost.setup(getActivity(), getChildFragmentManager(), android.R.id.tabcontent); 
```

MyFragmentTabHost.java：

```
package com.example.app;

import java.util.ArrayList;

import android.content.Context;
import android.content.res.TypedArray;
import android.os.Bundle;
import android.os.Parcel;
import android.os.Parcelable;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentManager;
import android.support.v4.app.FragmentTransaction;
import android.util.AttributeSet;
import android.view.View;
import android.widget.FrameLayout;
import android.widget.TabHost;

/**
 * Special TabHost that allows the use of {@link Fragment} objects for
 * its tab content.  When placing this in a view hierarchy, after inflating
 * the hierarchy you must call {@link #setup(Context, FragmentManager, int)}
 * to complete the initialization of the tab host.
 *
 */
public class MyFragmentTabHost extends TabHost
    implements TabHost.OnTabChangeListener {
private final ArrayList<TabInfo> mTabs = new ArrayList<TabInfo>();
private FrameLayout mRealTabContent;
private Context mContext;
private FragmentManager mFragmentManager;
private int mContainerId;
private TabHost.OnTabChangeListener mOnTabChangeListener;
private TabInfo mLastTab;
private boolean mAttached;

static final class TabInfo {
    private final String tag;
    private final Class<?> clss;
    private final Bundle args;
    private Fragment fragment;

    TabInfo(String _tag, Class<?> _class, Bundle _args) {
        tag = _tag;
        clss = _class;
        args = _args;
    }
}

static class DummyTabFactory implements TabHost.TabContentFactory {
    private final Context mContext;

    public DummyTabFactory(Context context) {
        mContext = context;
    }

    @Override
    public View createTabContent(String tag) {
        View v = new View(mContext);
        v.setMinimumWidth(0);
        v.setMinimumHeight(0);
        return v;
    }
}

static class SavedState extends BaseSavedState {
    String curTab;

    SavedState(Parcelable superState) {
        super(superState);
    }

    private SavedState(Parcel in) {
        super(in);
        curTab = in.readString();
    }

    @Override
    public void writeToParcel(Parcel out, int flags) {
        super.writeToParcel(out, flags);
        out.writeString(curTab);
    }

    @Override
    public String toString() {
        return "FragmentTabHost.SavedState{"
                + Integer.toHexString(System.identityHashCode(this))
                + " curTab=" + curTab + "}";
    }

    public static final Parcelable.Creator<SavedState> CREATOR
            = new Parcelable.Creator<SavedState>() {
        public SavedState createFromParcel(Parcel in) {
            return new SavedState(in);
        }

        public SavedState[] newArray(int size) {
            return new SavedState[size];
        }
    };
}

public MyFragmentTabHost(Context context) {
    // Note that we call through to the version that takes an AttributeSet,
    // because the simple Context construct can result in a broken object!
    super(context, null);
    initFragmentTabHost(context, null);
}

public MyFragmentTabHost(Context context, AttributeSet attrs) {
    super(context, attrs);
    initFragmentTabHost(context, attrs);
}

private void initFragmentTabHost(Context context, AttributeSet attrs) {
    TypedArray a = context.obtainStyledAttributes(attrs,
            new int[] { android.R.attr.inflatedId }, 0, 0);
    mContainerId = a.getResourceId(0, 0);
    a.recycle();

    super.setOnTabChangedListener(this);

    /*** REMOVE THE REST OF THIS FUNCTION ***/
    /*** findViewById(android.R.id.tabs) IS NULL EVERY TIME ***/
}

/**
 * @deprecated Don't call the original TabHost setup, you must instead
 * call {@link #setup(Context, FragmentManager)} or
 * {@link #setup(Context, FragmentManager, int)}.
 */
@Override @Deprecated
public void setup() {
    throw new IllegalStateException(
            "Must call setup() that takes a Context and FragmentManager");
}

public void setup(Context context, FragmentManager manager) {
    super.setup();
    mContext = context;
    mFragmentManager = manager;
    ensureContent();
}

public void setup(Context context, FragmentManager manager, int containerId) {
    super.setup();
    mContext = context;
    mFragmentManager = manager;
    mContainerId = containerId;
    ensureContent();
    mRealTabContent.setId(containerId);

    // We must have an ID to be able to save/restore our state.  If
    // the owner hasn't set one at this point, we will set it ourself.
    if (getId() == View.NO_ID) {
        setId(android.R.id.tabhost);
    }
}

private void ensureContent() {
    if (mRealTabContent == null) {
        mRealTabContent = (FrameLayout)findViewById(mContainerId);
        if (mRealTabContent == null) {
            throw new IllegalStateException(
                    "No tab content FrameLayout found for id " + mContainerId);
        }
    }
}

@Override
public void setOnTabChangedListener(OnTabChangeListener l) {
    mOnTabChangeListener = l;
}

public void addTab(TabHost.TabSpec tabSpec, Class<?> clss, Bundle args) {
    tabSpec.setContent(new DummyTabFactory(mContext));
    String tag = tabSpec.getTag();

    TabInfo info = new TabInfo(tag, clss, args);

    if (mAttached) {
        // If we are already attached to the window, then check to make
        // sure this tab's fragment is inactive if it exists.  This shouldn't
        // normally happen.
        info.fragment = mFragmentManager.findFragmentByTag(tag);
        if (info.fragment != null && !info.fragment.isDetached()) {
            FragmentTransaction ft = mFragmentManager.beginTransaction();
            ft.detach(info.fragment);
            ft.commit();
        }
    }

    mTabs.add(info);
    addTab(tabSpec);
}

@Override
protected void onAttachedToWindow() {
    super.onAttachedToWindow();

    String currentTab = getCurrentTabTag();

    // Go through all tabs and make sure their fragments match
    // the correct state.
    FragmentTransaction ft = null;
    for (int i=0; i<mTabs.size(); i++) {
        TabInfo tab = mTabs.get(i);
        tab.fragment = mFragmentManager.findFragmentByTag(tab.tag);
        if (tab.fragment != null && !tab.fragment.isDetached()) {
            if (tab.tag.equals(currentTab)) {
                // The fragment for this tab is already there and
                // active, and it is what we really want to have
                // as the current tab.  Nothing to do.
                mLastTab = tab;
            } else {
                // This fragment was restored in the active state,
                // but is not the current tab.  Deactivate it.
                if (ft == null) {
                    ft = mFragmentManager.beginTransaction();
                }
                ft.detach(tab.fragment);
            }
        }
    }

    // We are now ready to go.  Make sure we are switched to the
    // correct tab.
    mAttached = true;
    ft = doTabChanged(currentTab, ft);
    if (ft != null) {
        ft.commit();
        mFragmentManager.executePendingTransactions();
    }
}

@Override
protected void onDetachedFromWindow() {
    super.onDetachedFromWindow();
    mAttached = false;
}

@Override
protected Parcelable onSaveInstanceState() {
    Parcelable superState = super.onSaveInstanceState();
    SavedState ss = new SavedState(superState);
    ss.curTab = getCurrentTabTag();
    return ss;
}

@Override
protected void onRestoreInstanceState(Parcelable state) {
    SavedState ss = (SavedState)state;
    super.onRestoreInstanceState(ss.getSuperState());
    setCurrentTabByTag(ss.curTab);
}

@Override
public void onTabChanged(String tabId) {
    if (mAttached) {
        FragmentTransaction ft = doTabChanged(tabId, null);
        if (ft != null) {
            ft.commit();
        }
    }
    if (mOnTabChangeListener != null) {
        mOnTabChangeListener.onTabChanged(tabId);
    }
}

private FragmentTransaction doTabChanged(String tabId, FragmentTransaction ft) {
    TabInfo newTab = null;
    for (int i=0; i<mTabs.size(); i++) {
        TabInfo tab = mTabs.get(i);
        if (tab.tag.equals(tabId)) {
            newTab = tab;
        }
    }
    if (newTab == null) {
        throw new IllegalStateException("No tab known for tag " + tabId);
    }
    if (mLastTab != newTab) {
        if (ft == null) {
            ft = mFragmentManager.beginTransaction();
        }
        if (mLastTab != null) {
            if (mLastTab.fragment != null) {
                ft.detach(mLastTab.fragment);
            }
        }
        if (newTab != null) {
            if (newTab.fragment == null) {
                newTab.fragment = Fragment.instantiate(mContext,
                        newTab.clss.getName(), newTab.args);
                ft.add(mContainerId, newTab.fragment, newTab.tag);
            } else {
                ft.attach(newTab.fragment);
            }
        }

        mLastTab = newTab;
    }
    return ft;
}
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-02T14:43:32.590

在您设置选项卡并将其添加到 FragmentTabHost 后放置此代码，它将删除然后将选项卡添加为 TabHost 中的最后一个子项。（使用 android.support.v13.app.FragmentTabHost 从 xml 进行测试，并在嵌套片段中使用 getChildFragmentManager() 进行设置）

```
View tabs = (TabWidget) mTabHost.findViewById(android.R.id.tabs);
ViewGroup parent = (ViewGroup) mTabHost.getChildAt(0); 
parent.removeView(tabs);
parent.addView(tabs); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T09:35:17.210

最后我遵循了这个教程：[Android Tabs with Fragments](http://android.codeandmagic.org/2011/07/android-tabs-with-fragments/)

我放弃了 FragmentTabHost，这更容易（恕我直言）实现，并且我能够毫不费力地将 tabWidget 放在底部。

# python - NIM 游戏 - 重新运行游戏

> ID：13408711
> 
> 赞同：2
> 
> 时间：2012-11-16T00:36:37.970
> 
> 标签：python

我要做一个叫NIM的小游戏。该游戏是人类与计算机的游戏，每个玩家移走一些吸管（1,2 或 3），移走最后一根稻草的玩家松动。我让游戏正常运行，但问题是如果玩家想再次玩，它不想重新运行。任何帮助将不胜感激。:)

```
import random
print("""************ NIM GAME   ***********
************ Game Start ***********
************ The rules  ***********
-----------------------------------------------------
You need to remove from 1 to 3 straws from the pile.
The player that removes the final straw is the loser.
-----------------------------------------------------""")

player1=str(input("Enter your name. "))
player2="Computer"
howMany=0
gameover=False
strawsNumber=random.randint(10,20)

if (strawsNumber%4)==1:
    strawsNumber+=1

def removingStrawsComputer():
    removedNumber=random.randint(1,3)
    global strawsNumber
    while removedNumber>strawsNumber:
    removedNumber=random.randint(1,3)
    strawsNumber-=removedNumber
    return strawsNumber

def removingStrawsHuman():
    global strawsNumber
    strawsNumber-=howMany
    return strawsNumber

def humanLegalMove():
    global howMany
    legalMove=False
    while not legalMove:
        print("It's your turn, ",player1)
        howMany=int(input("How many straws do you want to remove?(from 1 to 3) "))
        if  howMany>3 or howMany<1:
            print("Enter a number between 1 and 3.")
        else:
            legalMove=True
    while howMany>strawsNumber:
        print("The entered number is greater than a number of straws remained.")
        howMany=int(input("How many straws do you want to remove?"))
    return howMany

def checkWinner(player):
    if strawsNumber==0:
        print(player," wins.")
        global gameover
        gameover=True
        return gameover

def resetGameover():
    global gameover
    gameover=False
    return gameover

def game():
    while gameover==False:
        print("It's ",player2,"turn. The number of straws left: ",removingStrawsComputer())
        checkWinner(player1)
        if gameover==True:
            break
        humanLegalMove()        
        print("The number of straws left: ",removingStrawsHuman())
        checkWinner(player2)

def playAgain():
    answer=input("Do you want to play again?(y/n)")
    resetGameover()
    while answer=="y":
        game()
    else:
        print("Thanks for playing the game")

game()
playAgain() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T00:40:58.973

您忘记在每场比赛开始时重置吸管数量。之后`def game():`，您应该插入：

```
global strawsNumber
strawsNumber=random.randint(10,20) 
```

注意：您还需要放在循环`answer=input("Do you want to play again?(y/n)")`的末尾。`while answer=="y":`这将要求用户每次重播，而不是在第一场比赛之后。

# selenium-rc - waitForElementPresent 命令在（Jenkins SeleniumHQ）中失败，但在 SeleniumIDE 中成功

> ID：13408714
> 
> 赞同：2
> 
> 时间：2012-11-16T00:36:47.900
> 
> 标签：selenium-rc, selenium-ide

我正在解决一个问题，即在页面上搜索特定元素时我的 Selenium IDE 测试成功（Command=waitForElementPresent 和 Target=link=Related Sites），但是当我从 Jenkins 'SeleniumHQ htmlSuite Run' 中运行它时，相同的命令却失败了。

举个例子; waitForElementPresent link=相关站点在 30000 毫秒后超时

我不想给人留下所有“waitForElementtPresent”命令都失败的印象，因为有些命令成功了。

我只是不知道我是否正在处理时间问题，或者当它将在 Jenkins 'SeleniumHQ htmlSuite Run' 中运行时，我必须对测试进行不同的编码。

任何可以帮助我理解为什么我会在同一命令下得到不同行为的建议都让我感到困惑，并且不确定如何解决。

预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T06:00:35.990

我猜您的脚本设置了默认超时，这就是您面临问题的原因。

只需尝试`selenium.setTimeout("0")`在启动 selenium 的构造函数中使用。

# delphi - 使 TDBEdit 显示剩余的字符

> ID：13408718
> 
> 赞同：1
> 
> 时间：2012-11-16T00:37:00.953
> 
> 标签：delphi

我要解决的问题是在用户输入 TDBEdit 时向用户显示字段中剩余的字符。

目前我正在做一些事情

```
lCharRemaining.Caption := Field.Size - length(dbedit.text); 
```

即更新TDBEdit 的OnChange 事件中的标签，它工作得非常好。但是，我想为许多 TDBEdits 执行此操作，并尝试编写一个自定义组件，以显示右侧编辑框中剩余的长度。但是它会干扰编辑。我可能在想我可以在有人打字时显示提示，以指示该字段中的剩余空间 - 有什么建议吗？

这是我的组件的代码（如果有人可以提出改进建议）。

```
unit DBEditWithLenghtCountdown;

interface

uses
  SysUtils, Classes, Controls, StdCtrls, Mask, DBCtrls, messages, Graphics;

type
  TDBEditWithLenghtCountdown = class(TDBEdit)
  private
    { Private declarations }
    FCanvas: TCanvas;
    procedure WMPaint(var Message: TWMPaint); message WM_PAINT;
  protected
    { Protected declarations }
    property Canvas: TCanvas read FCanvas;
    procedure WndProc(var Message: TMessage); override;
  public
    { Public declarations }
    function CharactersRemaining : integer;
    constructor Create(AOwner: TComponent); override;
    destructor Destroy; override;
  published
    { Published declarations }
  end;

procedure Register;

implementation

uses
  db, Types;

procedure Register;
begin
  RegisterComponents('Samples', [TDBEditWithLenghtCountdown]);
end;

{ TDBEditWithLenghtCountdown }

function TDBEditWithLenghtCountdown.CharactersRemaining: integer;
begin
  result := -1;
  if Assigned(Field)then
  begin
    result := Field.Size - Length(Text);
  end;
end;

constructor TDBEditWithLenghtCountdown.Create(AOwner: TComponent);
begin
  inherited Create(AOwner);
  FCanvas := TControlCanvas.Create;
  TControlCanvas(FCanvas).Control := Self;
end;

destructor TDBEditWithLenghtCountdown.Destroy;
begin
  FCanvas.Free;
  inherited;
end;

procedure TDBEditWithLenghtCountdown.WMPaint(var Message: TWMPaint);
var
  R: TRect;
  Remaining : string;
  WidthOfText: Integer;
  x: Integer;
begin
  inherited;
  if not focused then
    exit;

  Remaining := IntToStr(CharactersRemaining);
  R := ClientRect;
  Inc(R.Left, 1);
  Inc(R.Top, 1);
  Canvas.Brush.Assign(Self.Brush);
  Canvas.Brush.Style := bsClear;
  Canvas.Font.Assign(Self.Font);
  Canvas.Font.Color := clRed;

  WidthOfText := Canvas.TextWidth(Remaining);
  x := R.right - WidthOfText - 4;
  Canvas.TextOut(x,2, Remaining);
end;

procedure TDBEditWithLenghtCountdown.WndProc(var Message: TMessage);
begin
  inherited WndProc(Message);
  with Message do
    case Msg of
      CM_MOUSEENTER, CM_MOUSELEAVE, WM_LBUTTONUP, WM_LBUTTONDOWN,
      WM_KEYDOWN, WM_KEYUP,
      WM_SETFOCUS, WM_KILLFOCUS,
      CM_FONTCHANGED, CM_TEXTCHANGED:
      begin
        Invalidate;
      end;
   end; // case
end;

end. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T01:41:36.207

您可以通过设置编辑边距为提示文本留出空间来测试它在没有任何文本干扰的情况下的外观。快速测试：

```
type
  TDBEditWithLenghtCountdown = class(TDBEdit)
    ..
  protected
    procedure CreateWnd; override;
    property Canvas: TCanvas read FCanvas;
    ..

procedure TDBEditWithLenghtCountdown.CreateWnd;
var
  MaxWidth, Margins: Integer;
begin
  inherited;
  MaxWidth := Canvas.TextWidth('WW');
  Margins := Perform(EM_GETMARGINS, 0, 0);
  Margins := MakeLong(HiWord(Margins), LoWord(Margins) + MaxWidth);
  Perform(EM_SETMARGINS, EC_LEFTMARGIN or EC_RIGHTMARGIN, Margins);
end; 
```

除此之外，这是个人意见，但我觉得这有点令人困惑。我要做的可能是在派生编辑上发布一个状态面板字段，如果在编辑控件的文本更改时分配了一些文本，则向它输出一些文本。

**编辑：**这是一个稍微扩展的版本，应该解决评论中提到的问题（如果用长文本向左导航，编辑文本会覆盖提示文本），并且仅在控件具有焦点时才设置边距。（不是从问题中复制的完整代码，只有修改过的位。）

```
type
  TDBEditWithLenghtCountdown = class(TDBEdit)
  private
    FCanvas: TCanvas;
    FTipWidth: Integer;
    FDefMargins: Integer;
    procedure WMPaint(var Message: TWMPaint); message WM_PAINT;
  protected
    ..

procedure TDBEditWithLenghtCountdown.WMPaint(var Message: TWMPaint);
var
  PaintStruct: TPaintStruct;
  EndPaint: Boolean;
  Rgn: HRGN;
  R, TipR: TRect;
  Remaining : string;
begin
  if not Focused then
    inherited
  else begin
    EndPaint := Message.Dc = 0;
    if Message.DC = 0 then
      Message.DC := BeginPaint(Handle, PaintStruct);

    R := ClientRect;
    TipR := R;
    TipR.Left := TipR.Right - FTipWidth;
    Remaining := IntToStr(CharactersRemaining);
    Canvas.Handle := Message.DC;
    SetBkColor(Canvas.Handle, ColorToRGB(Color));
    Canvas.Font := Font;
    Canvas.Font.Color :=  clRed;
    Canvas.TextRect(TipR, Remaining, [tfSingleLine, tfCenter, tfVerticalCenter]);

    R.Right := TipR.Left;
    Rgn := CreateRectRgn(R.Left, R.Top, R.Right, R.Bottom);
    SelectClipRgn(Canvas.Handle, Rgn);
    DeleteObject(Rgn);
    inherited;
    if EndPaint then
      windows.EndPaint(Handle, PaintStruct);
  end;
end;

procedure TDBEditWithLenghtCountdown.WndProc(var Message: TMessage);
const
  TipMargin = 3;
begin
  inherited WndProc(Message);
  with Message do
    case Msg of
      CM_MOUSEENTER, CM_MOUSELEAVE, WM_LBUTTONUP, WM_LBUTTONDOWN,
      WM_KEYDOWN, WM_KEYUP,
      CM_TEXTCHANGED: Invalidate;
      WM_CREATE: FDefMargins := Perform(EM_GETMARGINS, 0, 0);
      CM_FONTCHANGED:
        begin
          Canvas.Handle := 0;
          Canvas.Font := Font;
          FTipWidth := Canvas.TextWidth('67') + 2 * TipMargin;
        end;
      WM_SETFOCUS:
        Perform(EM_SETMARGINS, EC_LEFTMARGIN or EC_RIGHTMARGIN,
            MakeLong(HiWord(FDefMargins), LoWord(FDefMargins) + FTipWidth));
      WM_KILLFOCUS:
        Perform(EM_SETMARGINS, EC_LEFTMARGIN or EC_RIGHTMARGIN, FDefMargins);
    end;
end; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T11:40:16.633

作为您开始的基础，如果不想派生每个 Edit-Component，这里是从 TCustomEdit 派生的每个组件的通用方法。

将 Edit-Component 的 MaxLength 设置为 Value > 0，这个 Unit 将在文本下方绘制一条细红线作为填充指示器。

该单元只需要出现在您的项目中。

```
unit ControlInfoHandler;

interface

uses
  Vcl.Forms;

implementation

uses
  System.Classes,
  Vcl.Graphics, Vcl.Controls, Vcl.StdCtrls;

type
  TControlInfoHandler = class( TComponent )
  private
    FCurrent :       TWinControl;
    FCurrentLength : Integer;
  protected
    procedure ActiveControlChange( Sender : TObject );
    procedure ApplicationIdle( Sender : TObject; var Done : Boolean );
    procedure Notification( AComponent : TComponent; Operation : TOperation ); override;
  end;

  THackedEdit = class( TCustomEdit )
  published
    property MaxLength;
  end;

var
  LControlInfoHandler : TControlInfoHandler;

  { TControlInfoHandler }

procedure TControlInfoHandler.ActiveControlChange( Sender : TObject );
begin
  FCurrent       := Screen.ActiveControl;
  FCurrentLength := 0;
  if Assigned( FCurrent )
  then
    FCurrent.FreeNotification( Self );
end;

procedure TControlInfoHandler.ApplicationIdle( Sender : TObject; var Done : Boolean );
var
  LEdit :   THackedEdit;
  LCanvas : TControlCanvas;
  LWidth :  Integer;
begin
  if not Assigned( FCurrent ) or not ( FCurrent is TCustomEdit )
  then
    Exit;

  LEdit := THackedEdit( FCurrent as TCustomEdit );

  if ( LEdit.MaxLength > 0 )
  then
    begin

      LCanvas         := TControlCanvas.Create;
      LCanvas.Control := LEdit;

      LCanvas.Pen.Style := psSolid;
      LCanvas.Pen.Width := 2;

      LWidth := LEdit.Width - 6;

      if FCurrentLength <> LEdit.GetTextLen
      then
        begin
          LCanvas.Pen.Color := LEdit.Color;
          LCanvas.MoveTo( 0, LEdit.Height - 4 );
          LCanvas.LineTo( LWidth, LEdit.Height - 4 );
        end;

      LCanvas.Pen.Color := clRed;
      LWidth            := LWidth * LEdit.GetTextLen div LEdit.MaxLength;

      LCanvas.MoveTo( 0, LEdit.Height - 4 );
      LCanvas.LineTo( LWidth, LEdit.Height - 4 );

      FCurrentLength := LEdit.GetTextLen;

    end;
end;

procedure TControlInfoHandler.Notification( AComponent : TComponent; Operation : TOperation );
begin
  inherited;
  if ( FCurrent = AComponent ) and ( Operation = opRemove )
  then
    FCurrent := nil;
end;

initialization

LControlInfoHandler          := TControlInfoHandler.Create( Application );
Screen.OnActiveControlChange := LControlInfoHandler.ActiveControlChange;
Application.OnIdle           := LControlInfoHandler.ApplicationIdle;

end. 
```

# php - 如何在php中全部转换为

> ID：13408720
> 
> 赞同：-2
> 
> 时间：2012-11-16T00:37:22.103
> 
> 标签：php, html, regex

> **可能重复：**
> [正则表达式用包含 src 的 href 包装 img 标签](https://stackoverflow.com/questions/1762408/regex-to-wrap-img-tag-with-href-containg-the-src)

作为主题 - 我想根据这些图像转换链接中的所有图像

所以：

```
<img src="http://xxx.xxx/image.jpg"> or <img src="/image.jpg"> 
```

<- 在本地图像上

转换为：

```
<a href="http://xxx.xxx/image.jpg"><img src="http://xxx.xxx/image.jpg"></a> 
```

在php中

有小费吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T00:46:10.110

寻找：

```
(\<img\s+src\s*\=\")([^\"]+)(\"\/?\>) 
```

并替换为：

```
<a href="$2">$1$2$3</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T00:46:32.483

如果你想为此解析 HTML 输出，你可以这样做（未经测试）

```
$out = preg_replace( '/<img .*src="([^"]+)".*>/', '<a href="$1">$0</a>', $input ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T00:48:35.673

所以基本上你想在你的 img src 中添加一个 base_url 对吗？如果你有一个链接数组（比如说 $image_links），你会这样做：

```
foreach($image_links as $image_link) {
    echo '<a href="'.$base_url.'/'.$image_link.'"'.'><img src="'.$base_url.'/'.$image_link.'"'.'></a>';
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T00:59:50.420

您真的需要在 php 中执行此操作吗？我认为仅使用 jquery 将单击事件附加到图像以在用户单击图像时将浏览器重定向到图像 url 会更简单。它应该只需要不到 10 行 javascript totdo 就可以了。

# asp.net - DebugDiag 显示长时间运行以来

> ID：13408722
> 
> 赞同：3
> 
> 时间：2012-11-16T00:37:32.823
> 
> 标签：asp.net, iis, windbg, debugdiag

我们的应用程序池每天会回收数次。我很确定这是因为它达到了内存限制。我也很确定它不应该达到 ~3GB 的内存限制。我尝试使用 WinDbg 分析内存转储，但收效甚微。我以后可能会再试一次。然而，使用 DebugDiag 给了我一些很好的数据可视化效果，并且已经导致了一些改变，减少了它的回收次数。一份让我有点困惑和担心的报告是 HttpContext 报告。它显示了一些这样的输出：

```
HttpContext Timeout Completed RunningSince ThreadId ReturnCode Verb RequestPath+QueryString 
0x02374c94 110 Sec  No        995 Sec      ---      302        GET   /Loans/Details/529146/517006  
0x02472a44 110 Sec  No        993 Sec      ---      200        GET   /Login ReturnUrl=%2fLoans%2fDetails%2f529146%2f517006 
0x024d2f94 110 Sec  No        979 Sec      ---      302        POST  /Loans/UpdateDealer  
0x025773c0 110 Sec  No        951 Sec      ---      302        GET   /Applicants  
0x025d6bb4 110 Sec  No        951 Sec      ---      200        GET   /Login ReturnUrl=%2fApplicants 
0x025f5adc 110 Sec  No        935 Sec      ---      302        GET   /Applicants/Details/537358  
0x02654708 110 Sec  No        935 Sec      ---      200        GET   /Login ReturnUrl=%2fApplicants%2fDetails%2f537358 
0x026b1bb4 110 Sec  No        926 Sec      ---      200        POST  /Loan/InsertLoanChecklistItem  
0x027710dc 110 Sec  No        914 Sec      ---      200        GET   /Applicants  
0x02779320 110 Sec  No        915 Sec      ---      302        POST  /Login ReturnUrl=%2fApplicants 
0x02797448 110 Sec  No        914 Sec      ---      200        GET   /Loans/Details/523729/526198  
0x02867070 110 Sec  No        911 Sec      ---      200        POST  /Loans/UpdateAmount 
```

当然，报告中还有更多行。我真的有运行了 995 秒（约 15 分钟）但仍未完成的请求吗？他们只是挂在那里吗？他们在等待其他事情完成吗？我不确定我什至可以相信它，更不用说开始诊断它了。其他人可以给我一些关于如何解释这些数据的见解吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-03T08:45:27.727

经过长时间的研究，我得到了解决方案，而不是确切的解决方案，但它可以提供帮助。

long running since 列指示其第一个请求开始的时间。这并不意味着请求时间是为任何用户完成任何单个请求。所以，这里不用担心这个高数字。

编辑：http: [//blogs.msdn.com/b/yunjin/archive/2005/08/25/456355.aspx](http://blogs.msdn.com/b/yunjin/archive/2005/08/25/456355.aspx)

[http://blogs.msdn.com/b/yunjin/archive/2005/08/29/457150.aspx](http://blogs.msdn.com/b/yunjin/archive/2005/08/29/457150.aspx)

[http://social.msdn.microsoft.com/Forums/en/vsdebug/thread/17f783cd-d5af-4146-ab46-be80e62da750](http://social.msdn.microsoft.com/Forums/en/vsdebug/thread/17f783cd-d5af-4146-ab46-be80e62da750)

对于内存泄漏，我建议使用 WinDbg。WinDbg 参考：

[http://blogs.msdn.com/b/alejacma/archive/2009/06/30/sos-cheat-sheet-net-2-0-3-0-3-5.aspx](http://blogs.msdn.com/b/alejacma/archive/2009/06/30/sos-cheat-sheet-net-2-0-3-0-3-5.aspx)

[http://geekswithblogs.net/.NETonMyMind/archive/2006/03/14/72262.aspx](http://geekswithblogs.net/.NETonMyMind/archive/2006/03/14/72262.aspx)

# php - mysql_query 没有结果

> ID：13408723
> 
> 赞同：2
> 
> 时间：2012-11-16T00:37:45.183
> 
> 标签：php, mysql, database, forms

我正在编写一些使用两个 MySQL 数据库的 PHP。我正在努力的是从两个数据库中获取不同的信息，然后这些信息将填充一些表单字段，例如下拉菜单。然后将发布该表格以创建可打印的文档 yada yada...

### 什么有效

与第一个数据库的连接工作正常，该字段已填充并且没有错误。

### 什么不起作用

当我介绍第二个数据库时，我没有收到任何错误，但不会填充表单。我做这个改变...

从一个数据库：

```
$sql = mysql_query"SELECT * FROM car WHERE color='blue' ORDER BY sqm ASC"; 
```

到两个数据库：

```
$sql = mysql_query("SELECT * FROM car WHERE color='blue' ORDER BY sqm ASC", $conn); 
```

### 连接

资料来源：[http ://rosstanner.co.uk/2012/01/php-tutorial-connect-multiple-databases-php-mysql/](http://rosstanner.co.uk/2012/01/php-tutorial-connect-multiple-databases-php-mysql/)

[如何在一个网页上连接多个 MySQL 数据库？](https://stackoverflow.com/questions/274892/how-do-you-connect-to-multiple-mysql-databases-on-a-single-webpage)

```
<?php  
// connect to the database server  
$conn = mysql_connect("localhost", "cars", "password");  

// select the database to connect to  
mysql_select_db("manufacturer", $conn);  

// connect to the second database server  
$conn2 = mysql_connect("localhost", "cars", "password");  

// select the database to connect to  
mysql_select_db("intranet", $conn2);  
?> 
```

### 执行

看来 $sql = mysql_query("SELECT * FROM car WHERE color='blue' ORDER BY sqm ASC", $conn); 是我的问题

```
<form name="form" method="post" action="review.php">
<table><td>
    <select>
    <option value="">--Select--</option>
<?php $sql = mysql_query("SELECT * FROM car WHERE color='blue' ORDER BY sqm ASC", $conn);  
      $rs_result = mysql_query ($sql); 

// get the entry from the result
   while ($row = mysql_fetch_assoc($rs_result)) {

// Print out the contents of each row into a table 
   echo "<option value=\"".$row['carname']."\">".$row['carname']."</option>";
    }
?>
    </select>
</td></table>
</form> 
```

在此先感谢您的帮助:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T00:50:49.940

你有 2 个 mysql 查询命令正在运行......

```
<?php
$sql       = mysql_query("SELECT * FROM car WHERE color='blue' ORDER BY sqm ASC", $conn);  
$rs_result = mysql_query ($sql); // <-- $sql here is the result of the first query (ie. not a sql command) 
```

应该

```
<form name="form" method="post" action="review.php">
<table><td>
    <select>
    <option value="">--Select--</option>
<?php
    $sql = "SELECT * FROM car WHERE color='blue' ORDER BY sqm ASC";
    $rs_result = mysql_query( $sql, $conn );

    // get the entry from the result
    while ($row = mysql_fetch_assoc($rs_result)) {
        // Print out the contents of each row into a table 
        echo "<option value=\"".$row['carname']."\">".$row['carname']."</option>";
    }
?>
    </select>
</td></table>
</form> 
```

祝你好运！

# c++ - 使用 g++4.5.2 编译时对类的引用不明确

> ID：13408724
> 
> 赞同：2
> 
> 时间：2012-11-16T00:38:02.450
> 
> 标签：c++, compiler-errors, g++, systemc

我需要一些帮助：当使用 g++ 4.1 构建我的代码时，没有关于“对类的引用不明确”的错误。仅在使用 g++4.5.2 编译相同代码时才会发生，代码片段如下：

```
#include "tlm_utils/simple_initiator_socket.h"

using tlm_utils::simple_initiator_socket;

class HvEcu : public sc_module {
public:
           ......
    simple_initiator_socket<HvEcu> initiator_socket;
//object instantiated here, also problem happend here....
            ......
}; 
```

我真的不确定为什么会发生这种情况，因为命名空间的语法肯定是有效的。有一个解决方法可以消除该消息，而不是“使用 tlm_utils::simple_initiator_socket;” 只需输入“tlm_utils::simple_initiator_socketinitiator_socket；” 在上面显示的类的主体中。但是我不明白为什么上面的代码不起作用，因为唯一的变化是编译器版本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T00:42:01.240

尝试使用显式调用：

```
class HvEcu : public sc_module {
    tlm_utils::simple_initiator_socket<HvEcu> initiator_socket; 
```

**每日一课：**及时了解编译器更改并使用最新的稳定版本。否则，你最终会写出旧的错误代码；并遇到编译器的其他副作用。

# shell - 画一棵圣诞树

> ID：13408728
> 
> 赞同：3
> 
> 时间：2012-11-16T00:39:16.297
> 
> 标签：shell, for-loop, drawing

我正在尝试以下列形式绘制一棵树

```
 *    
   ***
  *****
 *******
********* 
```

如您所见，我需要两个空格和每行中的“*”星，但我无法按照我想要的方式得到它

```
#!/bin/bash

display_tree() {
    local rows=$1
    local columns=$2

    for ((i=0; i<$rows; i++))
    do
        #spaces loop
        for ((j=0; j<$columns; j++))
        do
            echo -n " "
            #drawing tree loop
            for ((a=0; a<$(($i + 1)); a++))
            do
                echo -n "*"
            done
        done
    echo 
    done
}

if [ $# -eq 2 ]; then
    display_tree $1 $2
else
    echo "Usage: $0 rows columns"
fi 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T08:10:45.887

这似乎对我有用。推荐用于“列”参数的奇数。当 columns = 2*rows - 1 时看起来最漂亮。代码中最长的行执行一些基本代数，特别是线性插值，用于计算在给定行中显示的星数。

```
#!/bin/bash
# Christmas tree ASCII drawer
# works nicest for odd integers

spaces() {
  for ((i=0; i<$1; i++)) ; do
    echo -n " "
  done 
}

stars() {
  for ((i=0; i<$1; i++)) ; do
    echo -n "*"
  done
  echo ""
}

display_tree() {
    local rows=$1
    local columns=$2

    # render
    for (( r=1; r <= $rows; r++ )); do
      s=$(( (((columns-1) * (r-1)/(rows-1) + 1)/2)*2 +1 ))
      spaces $(((columns-s)/2))
      stars $s
    done
}

if [ $# -eq 2 ]; then
    display_tree $1 $2
else
    echo "Usage: $0 rows columns"
fi 
```

示例输出：

```
./display_tree.sh 5 21
          *
       *******
     ***********
  *****************
*********************

./display_tree.sh 30 59
                             *
                            ***
                           *****
                          *******
                         *********
                        ***********
                       *************
                      ***************
                     *****************
                    *******************
                   *********************
                  ***********************
                 *************************
                ***************************
               *****************************
              *******************************
             *********************************
            ***********************************
           *************************************
          ***************************************
         *****************************************
        *******************************************
       *********************************************
      ***********************************************
     *************************************************
    ***************************************************
   *****************************************************
  *******************************************************
 *********************************************************
*********************************************************** 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-05-24T12:38:42.107

这个解决方案的逻辑非常简单，可能最好的解释方法是在文本编辑器中绘制几层树，并计算每次迭代的星数和空格数。你很快意识到它涉及到生成一组数字。例如： `3 1 2 3 1 5 0 7`

您现在所要做的就是设置一个起点（$COLUMNS/2）。$(eval ...) 部分只是在不使用循环的情况下打印空格和星号的技巧。需要 Eval 是因为括号壳扩展 {1..$var} 没有它就无法工作。

```
spaces=$(($COLUMNS/2)); 
for ((i=1; i < $LINES; i+=2)); 
    do echo "$(eval printf '\ %.0s' {1..$spaces}) $(eval printf '*%.0s' {1..$i})"; 
    ((spaces--));
done; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-23T06:43:46.977

```
letters=( \" \');while true;do clear; letter=${letters[$[RANDOM%${#letters[@]}]]}; [[ $letter == \" ]] && color=35 || color=32;m=2;i=77;p=$(($i/2-1)); while [[ $m -le $i ]];do printf "%${p}s" ;printf "\e[4;${color}m${letter}%.0s\e[m" $(seq $m);echo;m=$[m+2];((p--));done;sleep 1;done 
```

# seo - 让搜索引擎抓取网站的最佳方式

> ID：13408729
> 
> 赞同：0
> 
> 时间：2012-11-16T00:39:20.383
> 
> 标签：seo, search-engine, web-crawler

感谢您阅读我的问题。我正在建立一个网站，将列出每个制造商的产品。我计划将 URL 构造为以下变体：

www.mysite.com/manufacturer_name/product_name/product_id

www.mysite.com/product_name/product_id

www.mysite.com/manufacturer_name

有数百万种产品，我希望所有主要搜索引擎都能抓取它们。这样做的最佳方法是什么？

只需将网站提交给所有搜索引擎就足够了吗？我假设如果我提交列出所有制造商名称作为链接的制造商页面，搜索引擎将点击每个链接并点击每个制造商链接中显示的所有产品（我将对产品进行分页），因此搜索引擎可以继续在网站上爬取每个制造商的更多产品，直到页码用完。

这足以在每个搜索引擎上列出每个产品吗？还是有一种新的更好的方法来做到这一点？可能有我不知道的新的 SEO 技巧。我希望你能指出我正确的方向。

我以前使用robot.txt 来告诉搜索引擎要抓取哪些页面，这似乎工作正常。

谢谢，bad_at_coding

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T00:45:46.533

提交 XML 站点地图。最简单的方法是在您的 robots.txt 文件中链接到它。

示例 robots.txt 文件：

```
Sitemap: http://example.com/sitemap_location.xml 
```

请参阅[提交站点地图](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=183669)以从 Google 获取有关此主题的更多信息

# objective-c - 在 iOS SDK 3.1.1 中为 FBSession 手动设置访问令牌

> ID：13408734
> 
> 赞同：4
> 
> 时间：2012-11-16T00:40:03.543
> 
> 标签：objective-c, facebook, session

我有一个访问令牌，我希望 FBSession 使用该特定访问令牌打开一个活动会话。如何使用新的 Facebook SDK 做到这一点？似乎访问令牌是只读的。

这里的问题是当我离线或没有互联网连接时。但是有人连接了他/她的 Facebook 帐户。然后我需要以某种方式知道这一点。但是目前还没有办法用当前的 SDK 做到这一点

# objective-c - uiwebview 完成加载后的 pushviewcontroller

> ID：13408735
> 
> 赞同：0
> 
> 时间：2012-11-16T00:40:04.127
> 
> 标签：objective-c, ios, xcode, cocoa-touch

我正在正确地`viewController`从 A 推 B 使用`navigationController`. 但是，我想`uiwebview`从`viewController`B 完成加载一次，而不是立即执行。我首先尝试初始化 B 并在加载结束时推送 A 但没有成功，控制器没有被查看。如何做呢？谢谢你。

从控制器A，

```
self.controllerB = [[BViewController alloc] initWithNibName:@"BViewController" bundle:nil anUser:self.idUser aLang:self.lang];

//[[self navigationController] pushViewController:controllerB animated:NO]; working if pushed directly here

[self.controllerB view]; 
```

然后，controllerB 被初始化、`viewDidLoad`触发，当 时`webviewDidFinishLoad`，B 必须现在被推或在前面查看。

```
- (void)webViewDidFinishLoad:(UIWebView*)theWebView
{
    AViewController *theInstance = [[AViewController alloc] init];
    [theInstance pushBcontroller]; } 
```

上`AViewController`，

```
-(void)pushBcontroller{

    [[self navigationController] pushViewController:self.controllerB animated:NO];

} 
```

不工作...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T13:18:07.980

该行`AViewController *theInstance = [[AViewController alloc] init];`创建了 a 的**新**实例`AViewController`。由于它是**新**的，它不是视图控制器层次结构的一部分，因此没有连接到导航控制器。

提供`BViewController`对前一个控制器的引用并使用它而不是创建不同的控制器。或者，也许更好的是，在加载完成时发送一个通知，以便原始`AViewController`用户知道何时更改显示。

# objective-c - 使用 cocos2d 进行拖拽游戏会更容易吗？

> ID：13408737
> 
> 赞同：0
> 
> 时间：2012-11-16T00:40:39.633
> 
> 标签：objective-c, ios, cocos2d-iphone, game-engine

我对制作游戏很陌生，但我对 iOS 编程非常熟悉。我正在创建一个形状匹配游戏，因此会有一系列不同的形状，用户会将形状拖动到正确的相应形状，如果他们做对了，它会留下来，如果他们做错了，它会反击。现在我的问题是，使用 cocso2d 或任何游戏引擎会更容易，还是不使用一个，只使用触摸事件也一样容易？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T01:29:36.473

由于您描述的游戏不是图形密集的 - 我建议使用 UIKit。我会在 cocos2d 上使用 UIKit 的几个原因：

*   界面构建器/故事板很棒。您可以在屏幕上布置屏幕和游戏元素。（我知道存在使用 CocosBuilder 之类的 cocos 来执行此操作的工具，但在 IMO 中，它们与直接在 XCode 中工作相比无法比较）
*   UIKit 动画再简单不过了，你可以用最少的代码做一些非常强大的事情。
*   您可以直接访问元素，例如 UITableView、UICollectionView、UIScrollView 等。有模仿这些的 cocos 节点，但它们在响应和行为方面并不匹配。

对于图形更密集的游戏，我仍然会使用 cocos2d。使用它的一些场景：

*   你有大量带有大量动画的精灵（opengl 很快）
*   您想使用基于 opengl 的效果，如粒子、光照等。
*   你需要一个物理引擎
*   您想使用预构建的游戏引擎（有很多，例如 levelvg、kobold2d、line starter kit 等）

希望这对您有所帮助。

# ruby-on-rails - 未初始化常量 ShopifyAPI::CustomerGroup::Customers 错误

> ID：13408740
> 
> 赞同：0
> 
> 时间：2012-11-16T00:41:14.277
> 
> 标签：ruby-on-rails, shopify

毫无疑问，我在这里做错了什么，但我正在按照[此处](https://stackoverflow.com/questions/13398762/how-to-access-customers-in-a-customer-group-using-shopify-api-with-rails-gem)的新提交说明进行操作。

我收到以下错误

```
uninitialized constant ShopifyAPI::CustomerGroup::Customers
00:33:56 web.1    | /Users/matt/.rvm/gems/ruby-1.9.3-p0/gems/shopify_api-3.0.3/lib/shopify_api/resources/customer_group.rb:4:in `customers'' 
```

运行此代码时

```
 group = ShopifyAPI::CustomerGroup.find(5614012)
            customers = group.customers 
```

这是上面提到的[gem文件](https://github.com/Shopify/shopify_api/blob/master/lib/shopify_api/resources/customer_group.rb)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T20:37:41.187

版本 3.0.3 应该可以解决问题，我将不得不研究为什么它不是。

与此同时，以下将做你想做的事：

```
group = ShopfiyAPI::CustomerGroup.find(123)
customers = group.get(:customers) 
```

# vb.net - IndexOf a ComboBox 对我不起作用

> ID：13408741
> 
> 赞同：5
> 
> 时间：2012-11-16T00:41:24.730
> 
> 标签：vb.net, dictionary, combobox, enumeration, indexof

VB2010。我正在尝试使用单位枚举的内容填充 ComboBox。我设法用字典做到了这一点。就像是

```
Dim dUnits As New Dictionary(Of String, Integer)
Dim da As String

For Each enumValue As eUnits In System.Enum.GetValues(GetType(eUnits))
   da = ConvertEnumToCommonName 'gets unique name for an enumeration
   dUnits.Add(da, enumValue)
Next

cbo.DisplayMember = "Key"   'display the the common name
cbo.ValueMember = "Value"   'use the enumeration as the value
cbo.DataSource = New BindingSource(dUnits, Nothing) 
```

当我加载我的表单时效果很好。现在用户可以选择要显示的默认单位。那我试试

```
Dim defUnits As eUnits = eUnits.Feet
Dim idx As Integer = cbo.Items.IndexOf(defUnits) 'doesnt work, returns a -1
cbo.SelectedIndex = idx 
```

我已经做了一段时间的研究，并且相当确定这与`ComboBox`将值存储为字符串有关，实际上我正在寻找一个整数枚举。不知道我有没有这个权利。无论如何，我似乎无法选择默认项目。我可以尝试另一种方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T00:46:44.580

首先，您有一个整数集合，并且您正在搜索枚举值。为此，请尝试以下方法之一：

1.  将枚举值存储在字典中而不是字符串中：

    ```
    Dim dUnits As New Dictionary(Of String, eUnits) 
    ```

2.  将整数保留在 Dictionary 中，但在搜索 ComboBox 时使用枚举的整数值：

    ```
    Dim idx As Integer = cbo.Items.IndexOf(CInt(defUnits)) 
    ```

* * *

但这**还行不通**。您是数据绑定到 a `Dictionary`，这意味着其中的项目`cbo.Items`不是枚举类型，而是*Dictionary 中元素的类型*（`KeyValuePair(Of String, eUnits)`假设上面的＃1）。

最简单的解决方案就是设置`SelectedValue`组合框的属性而不是`SelectedIndex`. 假设您使用了上面的选项#1，这将是：

```
cbo.SelectedValue = defUnits 
```

如果您改用选项 #2，则必须先将其转换为整数：

```
cbo.SelectedValue = CInt(defUnits) 
```

# iphone - iOS 将坐标从 iPhone 转换为 iPad 兼容性

> ID：13408742
> 
> 赞同：2
> 
> 时间：2012-11-16T00:41:27.460
> 
> 标签：iphone, objective-c, ios, ipad, cocos2d-iphone

当我第一次开始为 iOS 编程（使用 Cocos2d）时，我为 iPhone 使用了一堆基于 320x480 屏幕尺寸的硬编码坐标。我刚刚意识到我需要至少包含一个基本版本的 iPad 和 iPad mini。

我读过这些：

cocos2d（但我不确定这是否是最好的方法？） [cocos2d:Convert iPhone App to Universal App](https://stackoverflow.com/questions/3741160/cocos2dconvert-iphone-app-to-universal-app)

转换坐标： [将坐标从 iPhone 屏幕尺寸转换为 iPad 屏幕尺寸](https://stackoverflow.com/questions/9872916/convert-coordinates-from-iphone-screen-size-to-ipad-screen-size)

将 iphone 转换为 ipad：http: [//iphonedevelopment.blogspot.com/2010/04/converting-iphone-apps-to-universal.html](http://iphonedevelopment.blogspot.com/2010/04/converting-iphone-apps-to-universal.html)

Apple 关于创建通用应用程序的文档：http: [//developer.apple.com/library/ios/#documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/AdvancedAppTricks/AdvancedAppTricks.html#//apple_ref/doc/uid/TP40007072-CH7-SW24](http://developer.apple.com/library/ios/#documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/AdvancedAppTricks/AdvancedAppTricks.html#//apple_ref/doc/uid/TP40007072-CH7-SW24)

1.  有没有一种简单的方法可以将图形显示从 iPhone 转换为 iPad，而无需编辑我使用硬编码值的代码的每一部分？（50 个点，全部在 1 个文件中）
2.  未来使用 iOS/Cocos2D 坐标编码的最佳实践是什么？我应该怎么做

    `#define SPACE_SHIP_X_IPAD 384`

    `#define SPACE_SHIP_X_IPHONE 160`

    `if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone){`

    ```
    `[ship.setPosition ccp:(SPACE_SHIP_X_IPHONE,0)];` 
    ```

    `} else {`

    ```
    `[ship.setPosition ccp:(SPACE_SHIP_X_IPAD,0)];` 
    ```

    `}`

    （顺便问一下，有谁知道如何用“#”号格式化这段代码，请教我如何格式化上面的代码？）

3.  是否建议我创建 2 个不同的应用程序 - 一个用于 iphone，一个用于 iPad？还是这种只有 1 个应用程序的通用方法，然后在我提交到 Appstore 时选择分发类型？

4.  Mac 版本的应用程序与 iPhone 和 iPad 的应用程序商店的分发渠道相同吗？在 Mac 上分发还有哪些优点或缺点？（我猜这不好，因为图形必须适应像大型 iMac 一样的东西？）
5.  只是为了确保 - 我的应用程序文件（不使用任何特定于 iphone 的任何东西，如呼叫）将在 iPod 和 iPad Mini 上运行，而无需任何额外的工作，对吗？

任何帮助将不胜感激。我会赞成所有好的尝试

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T01:22:28.070

看起来您的方法过于复杂。制作通用应用程序通常不涉及对位置值进行硬编码，而是根据设备的边界计算这些位置值。

例如：

```
//Button in center for universal
CGPoint buttonOffset = CGPointMake( ([[UIScreen mainScreen] bounds].size.width - button.frame.size.width) / 2, ([[UIScreen mainScreen] bounds].size.height - button.frame.size.height) / 2);

button.frame = CGRectMake(buttonOffset.x, buttonOffset.y, button.frame.size.width, button.frame.size.height); 
```

使用类似的概念来创建位置相对于屏幕边界的按钮（或船）。这将为您节省大量时间和悲伤。

需要注意的一件事是屏幕的“边界”不会影响设备方向。如果您想支持多个方向，您会发现创建一个实用方法来为您处理该逻辑很有用。

就像是：

```
+ (CGSize) deviceSize {
    CGSize size;
    if(UIDeviceOrientationIsLandscape([[UIDevice currentDevice] orientation])){
        size = CGSizeMake([[UIScreen mainScreen] bounds].size.height, [[UIScreen mainScreen] bounds].size.width);
    } else {
        size = CGSizeMake([[UIScreen mainScreen] bounds].size.width, [[UIScreen mainScreen] bounds].size.height);        
    }
    return size;
} 
```

我知道您想要一个简单的解决方案，因此您不必更改所有值，但我建议您硬着头皮更改值。从长远来看，它将对您有很大帮助。不仅对于这个应用程序，而且实践将有助于您将来创建的任何应用程序。

**是否建议您为通用创建两个不同的应用程序？** 不，不推荐。您可以在创建 xcode 项目时选择“通用”，也可以在现有项目中进行更改。您也不需要创建两个构建或二进制文件。Apple 将承认它是通用的，并在商店中为所有设备提供。但是，您需要创建多个版本的初始屏幕以适应不同的屏幕尺寸和像素密度。

**Mac 版本的应用程序与 iPhone 和 iPad 的应用程序商店的分发渠道相同吗？**有点...您可以部署到应用商店并获得更多自由，因为您可以自己打包和分发 OSX 二进制文件——但您必须创建一个单独的应用程序，因为您很可能会使用不是在 mac 上支持。您将希望保留不使用 CocoaTouch 的功能，例如您的渲染和游戏逻辑。如果您正在部署到 OSX，那么大屏幕尺寸将是您最不关心的问题。优点：受众更广。缺点：在构建应用程序/游戏时需要进行大量规划，以便您可以尽可能多地重用代码并满足所有屏幕的需求。

**只是为了确保 - 我的应用程序文件（不使用任何特定于 iphone 的任何东西，如呼叫）将在 iPod 和 iPad Mini 上运行，而无需任何额外的工作，对吗？** 嗯...*一些*额外的工作 有了一些用于主屏幕图标和启动屏幕的额外图像资产，你会很高兴。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T02:17:22.963

我使用通过 iCloud 共享的数据文件执行此操作，以便数据出现在两个设备上的正确位置... X *= 768 / 320 和 Y *= 1024 / 480。要从 iPad 分辨率返回 iPhone，只需除以乘。它简单而精确。然后，如果需要，记录您的数据配置的坐标集。

# windows - 有没有办法用 OllyDbg 调试 .COM 文件？

> ID：13408745
> 
> 赞同：1
> 
> 时间：2012-11-16T00:41:50.447
> 
> 标签：windows, debugging, ollydbg

有什么方法可以用 OllyDbg 调试 .COM 可执行文件？它似乎只接受EXE。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T07:31:51.927

COM 文件是 16 位 DOS 程序，并且不能在 Windows 下本机运行（它们通过 MS-DOS 子系统运行，请参阅[wikipedia](http://en.wikipedia.org/wiki/COM_file)），因此 ollydbg 既不能附加到它也不能调试它（作为 32 位*Windows*调试器）。

# ruby-on-rails - Rails：检查 Formtastic CSS（在 Bootstrap 上）

> ID：13408747
> 
> 赞同：0
> 
> 时间：2012-11-16T00:41:53.133
> 
> 标签：ruby-on-rails, twitter-bootstrap, sass, formtastic

**问题：**我在哪里可以找到/编辑原始 css 文件以用于 formtastic？

**原因：**我无法更改文本表单的“宽度”，因为它们似乎自动设置为某个值。我想检查原始 css 文件是否强制所有文本表单的宽度。

**环境：**

```
group :assets do
 gem 'sass-rails',   '~> 3.2.3'
 gem 'coffee-rails', '~> 3.2.1'
 gem 'bootstrap-sass'
 gem 'formtastic-bootstrap' 
```

如果有人知道为什么我不能更改文本表单的宽度（大小、cols 属性不起作用）的直接答案，我会更感激这个答案。谢谢您的帮助！

**图片：**

![在此处输入图像描述](../Images/20786c0fdb23eddd7653157e253f195c.png)

**_form.html.erb**

```
 <% @post = Post.new %>
 <%= semantic_form_for @post do |f| %>
  <%= f.inputs do %>
    <%= f.input :name, :hint => "enter your name", :input_html => { :rows => 10, :width => 10 } %>
    <%= f.input :content, :hint => "enter the content", :input_html => { :rows => 10, :width => 100000 } %>

<% end %>
<%= f.actions do %>
    <%= f.action :submit, :as => :button %>
    <%= f.action :cancel, :as => :link %>
<% end %><% end %></div> 
```

**HTML：**

```
<form accept-charset="UTF-8" action="/posts" class="formtastic post" id="new_post" method="post" novalidate="novalidate"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /><input name="authenticity_token" type="hidden" value="wFcjDR0nzm2B3yl2XtUxzlQz0CWplYf2nKiq+xgDpXo=" /></div>

<fieldset class="inputs">
<div class="string input required stringish control-group" id="post_name_input"><label class=" control-label" for="post_name">Name<abbr title="required">*</abbr></label><div class="controls"><input id="post_name" maxlength="255" name="post[name]" rows="10" type="text" width="10" /><span class="help-block">enter your name</span></div></div>

<div class="text input required control-group" id="post_content_input"><label class=" control-label" for="post_content">Content<abbr title="required">*</abbr></label><div class="controls"><textarea id="post_content" name="post[content]" rows="10" width="100000"></textarea><span class="help-block">enter the content</span></div></div></fieldset> 
```

**摘要：**为什么会这样，在哪里可以找到formtastc.css文件？它不在资产文件夹中，但页面以某种方式加载了 CSS。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T09:22:49.207

Formtastic.css 文件位于开发人员的资产中（它位于 gem 中，因此您无法在 Windows 资源管理器中检查它。

[形式化的.css](https://github.com/justinfrench/formtastic/blob/master/app/assets/stylesheets/formtastic.css)

在这里，下面的代码引起了麻烦

```
/* TEXTAREA OVERRIDES
---------------------------------------------------------------------------------*/
.formtastic .text textarea {
  width:72%;
}

.formtastic .text textarea[cols] {
  width:auto;
  max-width:72%;
} 
```

我只是通过使用类**跨度**而不是尝试修复宽度来解决问题。但是您可以添加自己的 css 来更改宽度，我认为这会带来相同的结果。

```
<%= f.input :content, :label => 'content', :input_html => {  :rows => 5, :class => 'span10' } %> 
```

# java - 数组复制了最后一行

> ID：13408750
> 
> 赞同：0
> 
> 时间：2012-11-16T00:42:06.577
> 
> 标签：java, arrays, duplication

我遇到的问题是当我打印出来时，`horizontalLine(1, 1, 3, 1)`它会在它之前添加水平线到控制台中。有什么办法可以阻止复制吗？

```
public class Array {

static String arrayPicture[][];

public static void main (String[] args) {

    arrayPicture = new String [5][5];

    for (int i = 0; i < 5; i ++) {

        for (int j = 0; j < 5; j ++) {
            arrayPicture [i][j] = " ";
    }
}
        horizontalLine (0, 0, 4, 0);
        horizontalLine (1, 1, 3, 1);
}
public static void horizontalLine (int x1, int y1, int x2, int y2) {

            for (int k = x1; k < x2; k ++) {
                arrayPicture [y1][k] = "*";
            }
            picture();
            System.out.println ();
}
public static void picture () {
            for (int i = 0; i < 5; i ++) {

            for (int j = 0; j < 5; j ++) {
                System.out.print (arrayPicture[i][j]);
                }
            }
        }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T00:51:39.370

一切都发生在该`picture()`方法中，因为为了打印第二个数组，您的索引重新开始`0`...

这里有一个解决方案，注意`picture()`方法的参数：（即使代码最初可读性不好）

```
class Array {

    static String arrayPicture[][];

    public static void main(String[] args) {

        arrayPicture = new String[5][5];

        for (int i = 0; i < 5; i++) {

            for (int j = 0; j < 5; j++) {
                arrayPicture[i][j] = " ";
            }
        }
        horizontalLine(0, 0, 4);
        horizontalLine(1, 1, 3);
    }

    public static void horizontalLine(int x1, int y1, int x2) {

        for (int k = x1; k < x2; k++) {
            arrayPicture[y1][k] = "*";
        }
        picture(y1);
        System.out.println();
    }

    public static void picture(int startIndex) {
        for (int i = startIndex; i < 5; i++) { // start from startIndex, not necessary 0 !
            for (int j = 0; j < 5; j++) {
                System.out.print(arrayPicture[i][j]);
            }
        }
    }
} 
```

输出：

```
****                     
 ** 
```

（我删除了`y2`参数，因为没有在您的实际代码中使用）

# overflow - jqMobi - Carousel 内的滚动 div？

> ID：13408753
> 
> 赞同：0
> 
> 时间：2012-11-16T00:42:27.590
> 
> 标签：overflow, mobile-website, jqmobi

因此，我正在为一个允许人们在视图之间水平滑动的 Web 应用程序构建框架。我正在寻找类似于 ubersocial 的布局，这是一个适用于 android 的应用程序。在过去的几天里，我尝试了一些不同的框架（包括自定义框架的开始，由于溢出差而无法工作：移动设备上的自动支持）。JqMobi 似乎离我最近。

这是一些代码：

```
<script>
    //jqMobi & jqUI scripts omitted for brevity
    var carousel;
    var scroller;
    function init_carousel ()
    {
        carousel = $("#carousel").carousel({
            preventDefaults: false
        });

        scroller = $('newContainer').scroller();
    }
    window.addEventListener("load", init_carousel, false);
</script>

<div id="jQUi">
    <div id="header"></div>
    <div id="content">
        <!--scrolling="no" because I don't want the whole carousel to move-->
        <div title="Main" id="main" class="panel" data-tab="navbar_home" scrolling="no">
            <div id="carousel" style="height:100%;width:100%;">
            <div id="View1" class="MainView" style="background: yellow;">
                    <div id="newContainer" style="width: 100%;height: 100%; overflow: auto;>
                        <!--Lots of Content-->
                    </div>
                </div>
                <div id="View2" class="MainView" style="background: green;"></div>
                <div id="View3" class="MainView" style="background: blue;"></div>
                <div id="View4" class="MainView" style="background: pink;"></div>
                <div id="View5" class="MainView" style="background: orange;"></div>
            </div>
        </div>
    </div>
</div> 
```

所以我已经让我的轮播适用于所有设备，并且我能够在 iOS 5 中获得完美的功能。但是，Android（2.2、2.3 和 4.0）没有为我的 .MainView 元素提供可滚动的 div，也没有更旧的iOS 设备。我能得到的最好的结果是面板上的轮播可以滚动，但面板中的元素不会一起滚动。这让我想知道我所取得的 iOS 5 的成功是否只是对溢出：自动的支持。

无论如何，我查看了以下文档：

*   jqMobi CheatSheet = (http://www.appmobi.com/amdocs/lib/jqMobi_Cheat.pdf?r=9170)
*   jqMobi 厨房水槽 = (http://jqmobi.com/testdrive/#webslider)
*   jqMobi API 文档 = (http://api.jqmobi.com/#jqUi)

但我很难真正得到我正在寻找的答案。使用记录在案的方法，我似乎无法真正到达任何地方。似乎如果我可以在不破坏轮播的情况下将独立可滚动的 div 放入 .MainView 元素中，我会很高兴。建议？

/ ***** ** *** ** *** ** *** ** *** *******固定****** ** *** ** *** ** *** ** *** ****** /

在纠结和沮丧之后，我最终通过向 .MainDiv 元素添加第二个缓冲区来让它工作，这样滚动条就不会影响轮播。

我在 iOS 5 上也遇到了不好的磨合（你可能还记得，它以前工作过），这可能可以通过简单地添加 overflow:auto 到 .MainView 元素并给它们一个固定的高度来解决。我尝试先禁用 nativeTouchScroll，滚动实际上非常好，所以我会坚持使用它而不是添加浏览器检测条件。

```
<script>
//Native touch disabled or iOS 5 breaks.
$.feat.nativeTouchScroll = false;

var carousel;
//var scroller;
function init_carousel ()
{
    carousel = $("#carousel").carousel({
        preventDefaults: false
    });
}

$.ui.ready(init_carousel);

var scroller;
$.ui.ready(function ()
{
    //Fetch the scroller from cache
    scroller = $("#containerContainer").scroller();
});
</script>

<style>
.MainView
{
    height: 100%;
    overflow: hidden;
}
</style>

<div id="carousel" style="height:100%;width:100%;">
    <div id="View1" class="MainView" style="background: yellow;">
        <div id="containerContainer"><div id="newContainer"></div></div>
        </div>
    <div id="View2" class="MainView" style="background: green;"></div>
    <div id="View3" class="MainView" style="background: blue;"></div>
    <div id="View4" class="MainView" style="background: pink;"></div>
    <div id="View5" class="MainView" style="background: orange;"></div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T13:12:01.027

发布在 appMobi 的论坛上——但我们是一家位于美国东部标准时区的公司——所以我们在你做这个的时候睡着了......很高兴你写了以下内容:)

> 似乎没有人在乎

# beanstalkd - 如果队列很大并且需要一段时间来处理，如何将就绪队列中的 beanstalkd 作业移到前面？

> ID：13408760
> 
> 赞同：2
> 
> 时间：2012-11-16T00:43:34.913
> 
> 标签：beanstalkd

我有一个关于 beantalkd 队列的快速问题。

所以假设我在 beanstalk 队列中有 500,000 个准备好的作业，它们正在等待处理，同时更多的作业被添加到这个队列中。所有这些工作都具有相同的优先级。

是否可以在就绪队列中移动一个作业，以便在该队列中的所有其他作业之前对其进行处理？

我刚刚开始使用豆茎，我想知道这是否可以在豆茎中完成？

我在linux环境下。

我想我可以删除那个特定的作业并重新插入它，优先级允许它首先被处理，但我想避免这样做，除非有一个命令允许我这样做。

如果需要更多信息，请告诉我，我提前感谢您的帮助。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T23:17:15.160

目前 Beanstalkd 中没有这样的命令。

这就是不同优先级的用途。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-02-23T21:07:14.177

Beanstalk 从 1.12 版开始有一个新命令：`reserve-job`.

> 可以通过其 ID 保留作业。为客户端保留作业后，客户端在作业超时之前运行 (TTR) 作业的时间有限。当作业超时时，服务器会将作业放回就绪队列。该命令如下所示：
> 
> `reserve-job <id>\r\n`
> 
> `<id>`是要保留的作业 ID
> 
> 这应该立即返回以下响应之一：
> 
> `NOT_FOUND\r\n`如果工作不存在或被客户保留，或者没有准备好、埋没或延迟。 `RESERVED <id> <bytes>\r\n<data>\r\n`. 请参阅reserve 命令的说明。

假设您知道需要调整优先级的作业的 ID，您可以连接到 beanstalk，保留该特定作业，然后`release`使用新的优先级：

`release <id> <pri> <delay>`

# java - How to make a string 'invokable' then convert it to integer (Android)

> ID：13408764
> 
> 赞同：1
> 
> 时间：2012-11-16T00:44:01.607
> 
> 标签：java, android, drawable, android-view

I was trying to save time by using a for loop to initialize all the sprites i wanted on screen. I had a couple of images on my drawable folder. So I renamed them accordingly. I wanted to concatenate the `i` to the expression, then it had to be called/invoked somehow! At first I thought about doing this:

```
Integer.parseInt("R.drawable.scoredisplay" + i) 
```

Then, of course you cant parse that into an integer, also the result of that expression returns an integer anyway. How can I make the concatenation of the expression with `i` and then call it? is it possible?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T00:47:44.407

It's possible, you need to do the following:

```
Context x = getApplicationContext();
int myId  = x.getResources().getIdentifier("R.drawable.scoredisplay" + i, "drawable",x.getPackageName()); 
```

Where the first parameter is the id as `String` of the `View` you want to get, the second one is the type of resource in this case "drawable", and the third one the package name which we obtain also from the context, calling `getPackageName()` method. Then afterwards you can get the view with the following code:

```
View myView = findViewById(myId); 
```

Casting the string to an integer as you were thinking makes no sense, since the id is not a string (although it has a workaround like I'm showing you).

**Update**

Since you are using this code outside of an `Activity` class the calls to the `Context` methods are not valid. You need to create a way of accessing the **Activity Context** from outside of the activity (you mention calling `.getContext()` from your class, but that will get that classes context, not the activity). A way of achieving this would be modifying your constructor, lets say you have a class named `myClass`:

```
class myClass{
    //Declase a Context variable inside your class
    Context x;

    //You implement a constructor for this class that accepts a Context as 
    //a parameter (feel free to add more if you are using a constructor already)
    public myClass(Context applicationContext){
        //Assign the passed value to your local Context
        x = applicationContext;
    }

    //Afterwards, on a different part of your class, you could invoke activity 
    //related methods by using the Context you have 'x'
    public void otherMethod(){
       int myId  = x.getResources().getIdentifier("R.drawable.scoredisplay" + i, "drawable",x.getPackageName());
    }
} 
```

The last part in ensuring you are passing your value correctly from your `Activity`, you should see something similar to this somewhere in your code:

```
myClass i = new myClass(); 
```

Since we now have a constructor, or have modified the existing one, you can add `this` to pass the activity context right into your game or whatever class your creating:

```
myClass i = new myClass(this);//'this' can be 'getApplicationContext()' 
```

# c++ - c++排序算法持续时间

> ID：13408765
> 
> 赞同：4
> 
> 时间：2012-11-16T00:44:16.677
> 
> 标签：c++, algorithm, sorting, time, duration

我一直在计算这些排序算法的持续时间。我将所有排序方法循环了 2000 次，然后将总持续时间除以 2000 以获得适当的持续时间值。问题是; 它没有显示排序方法的特定代码部分所花费的确切时间值。我的意思是`duration`变量显示通过程序流增加的值。例如，对于`N = 10000`，`insertionSort()`给出 0.000635，`mergeSort()`给出 0.00836 并`heapSort()`给出 0.018485，当我改变这些的顺序时，`duration`仍然通过程序上升，不管算法类型如何。我尝试为每个过程提供不同的持续时间值，但这不起作用。有人可以帮我理解这个问题还是有其他时间测量风格？

对不起，如果这是一个愚蠢的问题并且我的语法不好。

```
int main(){

    srand(time(NULL));

    int N, duration;

    cout << endl << "N : ";
    cin >> N; // N is array sze.
    cout << endl;

    // a4 would be the buffer array (for calculating proper duration).
    int *a1 = new int[N];
    int *a2 = new int[N];
    int *a3 = new int[N];
    int *a4 = new int[N];

    cout << endl << "Unsorted array : " << endl;

    for (int i = 0; i < N; i++){

        a4[i] = rand() % 100;
        cout << a4[i] << " ";
    }

/*------------------------------------------------------------------------------*/

    cout << endl << endl <<"Sorting with Insertion Sort, please wait..." << endl;

    for(int i = 0; i < 2000; i++){

        a1 = a4;

        duration = clock();
        insertionSort(a1, N - 1);
        duration += clock() - duration;
    }

    cout << endl << "Insertion sort : " << endl;

    print(a1, N);

    cout << endl << endl << "Approximate duration for Insertion Sort : ";
    cout << (double) (duration / 2000) / CLOCKS_PER_SEC;
    cout << " s." << endl;

/*------------------------------------------------------------------------------*/

    cout << endl << endl << "Sorting with Merge Sort, please wait..." << endl;

    for(int i = 0; i < 2000; i++){

        a2 = a4;

        duration = clock();
        mergeSort(a2, 0, N - 1);
        duration += clock() - duration;
    }

    cout << endl << "Merge sort : " << endl;

    print(a2, N);

    cout << endl << endl << "Approximate duration for Merge Sort : ";
    cout << (double) (duration / 2000) / CLOCKS_PER_SEC;
    cout << " s."<< endl << endl;

/*------------------------------------------------------------------------------*/

    cout << endl << endl << "Sorting with Heap Sort, please wait..." << endl;

    for(int i = 0; i < 2000; i++){

        a3 = a4;
        duration = clock();
        heapSort(a3, N);
        duration += clock() - duration;
    }

    cout << endl << "Heap sort : " << endl;

    print(a3, N);

    cout << endl << endl << "Approximate duration for Heap Sort : ";
    cout << (double) (duration / 2000) / CLOCKS_PER_SEC;
    cout << " s."<< endl << endl;

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-16T00:49:19.877

程序中的错误是您在整个循环中重置了持续时间。处理时间的一种更简洁的方法是将`duration`变量修改放在 for 循环之外。例如：

```
duration = clock();
for(int i = 0; i < 2000; i++){
    a2 = a4;
    mergeSort(a2, 0, N - 1);
}
duration = clock() - duration 
```

编辑：忘记删除循环内的部分。现在修好了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T01:11:53.477

第一，你似乎没有`duration`在不同类型的运行之间重置。这意味着单个迭代持续时间的总和将通过每个排序阶段向下传播（如果下一个点也不是问题）。

接下来，您需要设置一个单独的变量，调用它并在迭代后在摘要阶段`durationSum`使用它。`duration`目前，您在每次迭代中都花光了您的总和。

例如：

```
clock_t durationSum = 0;
clock_t duration = 0;

for(int i = 0; i < 2000; i++){

    a1 = a4;

    duration = clock();
    insertionSort(a1, N - 1);
    durationSum += clock() - duration;
} 
```

接下来，您在 amortizing 时会出现类型错误`duration`。你有：

```
cout << (double) (duration / 2000) / CLOCKS_PER_SEC; 
```

通过最少的编辑，这将更精确地工作（但应该使用`durationSum`）：

```
cout << (double) (duration / 2000.0) / CLOCKS_PER_SEC; 
```

之前，您说“使用整数除法除以`duration`2000，然后将其提升为 a`double`并除以`CLOCKS_PER_SEC`（这次使用浮点除法，因为操作数之一是 a`double`和一个整数）。使用`2000.0`强制`duration`提升为 double用于除以 2000 的浮点除法。

最后，与单次排序迭代相比，最好考虑循环开销可以忽略不计，并且每 2000 次排序迭代只调用两次clock()。

例如：

```
clock_t insert_sort_start = clock();

for(int i = 0; i < 2000; i++){
    a1 = a4;
    insertionSort(a1, N - 1);
}

double duration_sec = (clock() - insert_sort_start) / 2000.0 / CLOCKS_PER_SEC; 
```

最后，请注意，您使用`duration`的是 as ，而`int`实际上它`clock_t`是`clock()`一个 32 位整数`int`。使用`clock_t`.

# javascript - 如何使用 JavaScript 将文本从一个字段复制到另一个字段？

> ID：13408766
> 
> 赞同：0
> 
> 时间：2012-11-16T00:44:15.663
> 
> 标签：javascript, forms, input, copy, field

当页面首次自动加载时，有没有办法将输入文本值或字段数据复制到同一页面上的另一个字段？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T00:47:37.803

怎么样： `document.getElementById('secondField').value = document.getElementById('firstField').value`

没有 jQuery =)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T01:03:26.150

使用 jQuery：

```
$( 'input[name="fieldone"] ).val( $( 'input[name="fieldtwo"]' ).val() ); 
```

有关详细信息，请参阅[http://api.jquery.com/val/](http://api.jquery.com/val/)和[http://api.jquery.com/attribute-equals-selector/](http://api.jquery.com/attribute-equals-selector/)。

在不使用 jQuery 的情况下，您可以尝试（在支持的浏览器中）：

```
document.querySelectorAll('input[name$="fieldone"]').value = document.querySelectorAll('input[name$="fieldtwo"]').value; 
```

# c++ - 如何引用 C++ 中的函数？

> ID：13408767
> 
> 赞同：1
> 
> 时间：2012-11-16T00:44:25.583
> 
> 标签：c++, algorithm, linked-list

我想知道 C++ 中是否有办法知道什么叫做函数？就像 Java 或 JavaScript 中的 this 关键字一样。

例如，我有一个名为 insert 的函数，它将一个项目插入到链表中，我希望调用这些函数 insert 的链表调用另外两个函数。我该怎么做？

我现在有这个，有效吗？

```
bool linked_list::insert( int i )
{
    bool inserted = false;

    if( this.is_present(i) ) /* function is_present is defined earlier checks if an int is already in the linked-list. */
    {
        inserted = true // already inside the linked-list
    }
    else
    {
        this.Put( 0, i ); /* function Put is defined earlier and puts an int in a linked-list at a given position (first param.). */
        inserted = true; // it was put it.

    }
return inserted;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T00:47:34.853

由于[历史原因](http://www.stroustrup.com/bs_faq2.html#this)，`this`是一个指针。使用`->`而不是`.`.

```
bool linked_list::insert(int i) {
    bool inserted = false;

    if(this->is_present(i)) {
        inserted = true; // fixed syntax error while I was at it.
    } else {
        this->put(0, i); // fixed inconsistent naming while I was at it.
        inserted = true;
    }
    return inserted;
} 
```

通常根本不需要使用`this->`；你可以做`if(is_present(i))`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T00:48:45.340

`this`在 c++ 中的工作方式与在 Java 中的工作方式相同。唯一的区别是您需要使用指针`this->`而不是`this.` `this`指针，因此您不能使用点运算符来访问它的成员。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T00:47:21.453

你为什么不直接调用其他函数`linked_list::insert(int)`呢？不，它是无效的，你应该把`this -> something`而不是`this.something`

# regex - 正则表达式从字符串中提取前三个字符

> ID：13408768
> 
> 赞同：29
> 
> 时间：2012-11-16T00:44:57.730
> 
> 标签：regex

使用正则表达式如何从字符串中提取前 3 个字符（无论字符如何）？另外使用单独的表达式我想从字符串中提取最后 3 个字符，我该怎么做？我在网上找不到任何有效的例子，所以如果你知道的话，谢谢。

谢谢史蒂文

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-11-16T00:53:12.747

任何编程语言都应该有比使用正则表达式（即某种`substring`函数或`slice`字符串函数）更好的解决方案。但是，这当然可以使用正则表达式来完成（如果您想将它与文本编辑器之类的工具一起使用）。您可以使用[锚点](http://www.regular-expressions.info/anchors.html)来指示字符串的开头或结尾。

```
^.{0,3}
.{0,3}$ 
```

这最多匹配一个字符串的 3 个字符（尽可能多）。我添加了“0 到 3”语义而不是“恰好 3”，这样这也适用于较短的字符串。

请注意，`.`通常匹配**除**换行符以外的任何字符。通常有一个`s`or`singleline`选项可以改变这种行为，但是没有选项设置的替代方案是这样的，（它真正匹配**任何**3 个字符）：

```
^[\s\S]{0,3}
[\s\S]{0,3}$ 
```

但正如我所说，如果你想在一些提供其他字符串操作函数的代码中使用这种方法，我强烈建议不要使用这种方法。另外，您应该真正深入研究[教程](http://www.regular-expressions.info/tutorial.html)。

# html - 尽管有内容，但缩小表格单元格的高度

> ID：13408769
> 
> 赞同：0
> 
> 时间：2012-11-16T00:45:02.960
> 
> 标签：html, css

我希望有一种方法可以缩小 td 的高度，以便高度正是我想要的，例如当它包含 11px 文本时为 6px。我设想能够看到单元格内容的上半部分。

我不想只设置 div 高度的原因是我希望每一行都具有相同的高度，并且有跨行的单元格，因此当 div 应该能够扩展到两个细胞。我希望这有点道理...

```
<table>
    <thead>
        <tr>
            <th style="height: 0px; width: 0px;">
            </th>
            <th style="width: 25px;">
            </th>
            <th style="width: 25px;">
            </th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td style="height: 6px;">
            </td>
            <td>
                <div>
                    Some table data</div>
            </td>
            <td rowspan="2">
                <div>
                    Some data that is two rows high</div>
            </td>
        </tr>
        <tr>
            <td style="height: 6px;">
            </td>
            <td>
                <div>
                    Some more data</div>
            </td>
        </tr>
    </tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T01:03:58.287

您不能限制表格单元格的高度，但可以在立即`<div>`s 上强制执行高度：

```
td > div {
    overflow: hidden; 
    height: 6px;
} 
```

# java - 漂亮的 GUI 控件阻止我的应用程序的其余部分呈现

> ID：13408777
> 
> 赞同：1
> 
> 时间：2012-11-16T00:45:41.357
> 
> 标签：java, opengl, lwjgl, nifty-gui

我一直在尝试使用漂亮的 gui 向 openGl（通过 LWJGL）应用程序添加一些基本的 gui 元素，虽然我已经成功地在应用程序图形之上渲染面板和静态文本，但使用内置的漂亮控件（例如可编辑的文本字段）导致应用程序的其余部分不呈现。奇怪的是，我什至不必渲染 gui 控件，只需声明它似乎会导致此问题。

显示问题基本布局的编译器就绪代码：

```
import static org.lwjgl.opengl.GL11.*;

import org.lwjgl.LWJGLException;
import org.lwjgl.opengl.*;

import de.lessvoid.nifty.Nifty;
import de.lessvoid.nifty.builder.LayerBuilder;
import de.lessvoid.nifty.builder.ScreenBuilder;
import de.lessvoid.nifty.builder.TextBuilder;
import de.lessvoid.nifty.controls.textfield.builder.TextFieldBuilder;
import de.lessvoid.nifty.nulldevice.NullSoundDevice;
import de.lessvoid.nifty.renderer.lwjgl.input.LwjglInputSystem;
import de.lessvoid.nifty.renderer.lwjgl.render.LwjglRenderDevice;
import de.lessvoid.nifty.screen.Screen;
import de.lessvoid.nifty.tools.TimeProvider;

public class NiftyBreaksRendering {
    private Nifty nifty;
    private Screen screen;
    public NiftyBreaksRendering() throws Exception{
            //init display
            Display.setDisplayMode(new DisplayMode(640,480));
            Display.create();

            //init nifty gui
              LwjglInputSystem inputSystem = new LwjglInputSystem();
              inputSystem.startup();
              nifty = new Nifty(
                new LwjglRenderDevice(),
              new NullSoundDevice(),
                inputSystem,
              new TimeProvider());
            // load default styles
            nifty.loadStyleFile("nifty-default-styles.xml");
            // load standard controls
            nifty.loadControlFile("nifty-default-controls.xml");
            screen = new ScreenBuilder("start") {{
                  layer(new LayerBuilder("baseLayer") {{
                    childLayoutHorizontal();
                    text(new TextBuilder("test"){{
                        font("aurulent-sans-16.fnt");
                        color("#f00f");
                        backgroundColor("#33af");
                        text("l33t");
                    }});

                    //begin: lines that break the rendering
                    control(new TextFieldBuilder("input","asdf") {{
                        width("200px");
                    }});
                    //end: lines that break the rendering
                  }});
                }}.build(nifty);
                nifty.gotoScreen("start");

        //init opengl
        glMatrixMode(GL_PROJECTION);
        glLoadIdentity();
        glOrtho(0,640,480,0,1,-1);
        glMatrixMode(GL_MODELVIEW);

        while(!Display.isCloseRequested())
        {
            //render

            glClear(GL_COLOR_BUFFER_BIT);

            glBegin(GL_QUADS);
                glVertex2i(400,400); //Upper left
                glVertex2i(450,400);//upper right
                glVertex2i(450,450);//bottom right
                glVertex2i(400,450);//bottom left
            glEnd();

            glBegin(GL_LINES);
                glVertex2i(100,100);
                glVertex2i(200,200);
            glEnd();

            nifty.render(false);
            Display.update();
            Display.sync(60);
        }
        Display.destroy();
    }

    public static void main(String[] args) throws Exception {
        new NiftyBreaksRendering();

    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T23:22:49.553

真正有助于诊断此类问题的是指向[http://sscce.org/的链接](http://sscce.org/)

我猜这与 Nifty 更改的 OpenGL 状态或 Nifty 控件正在加载的纹理有关，这可能会弄乱应用程序的其余部分。

如果您可以提供更多或完整的代码，我很确定我们可以找到问题所在。

**提供完整示例代码后的修改答案：**

感谢您提供完整的示例！

正如预期的那样，问题是，Nifty 改变了 OpenGL 状态，并使 OpenGL 基本上处于未定义状态。解决方案是在调用 Nifty 之前保存 OpenGL 状态，然后再恢复。这是一些可以做到这一点的代码。我还添加了对 nifty.update() 的调用，以便 Nifty 实际上更新 GUI（并使键盘和鼠标事件起作用）：

```
 // update nifty
        nifty.update();

        // save your OpenGL state
        // (assuming you are in glMatrixMode(GL_MODELVIEW) all the time)
        glPushMatrix();
        glPushAttrib(GL_ALL_ATTRIB_BITS);

        // render Nifty (this will change OpenGL state)
        nifty.render(false);

        // restore your OpenGL state
        glPopAttrib();
        glPopMatrix(); 
```

通过对原始代码的更改，您的示例现在对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T23:28:30.390

NiftyGUI（作为非基于着色器的渲染）将在某些时候修改模型视图矩阵。您是否通过使用身份对其进行初始化来清除它对模型视图矩阵造成的损害？你知道，像这样：

```
glMatrixMode(GL_PROJECTION);
glLoadIdentity();
GLU.gluOrtho2D(0f,(float)VIEWPORT_DIMENSIONS[0],0f,(float)VIEWPORT_DIMENSIONS[1]);
glMatrixMode(GL_MODELVIEW);
glLoadIdentity();
glTranslatef(translation[0],translation[1],0);
glRectf(-1,-1,1,1); 
```

# jquery - 具有溢出的 Div：隐藏、边界半径和画布作为子项。取决于尺寸画布的溢出错误

> ID：13408782
> 
> 赞同：1
> 
> 时间：2012-11-16T00:46:06.577
> 
> 标签：jquery, canvas, overflow, css

今天我遇到了一个重大问题。“错误”似乎取决于圆形 div 内画布的大小。谁能解释这种小提琴行为并在firefox 16.0.2./chrome中有解决这个“错误”的方法检查FF，IE和chrome的小提琴......

```
overflow not hidden in firefox 16
<div class="round"  >
<canvas  width="300px" height="300px">
    Your browser needs canvas support</canvas>
</div>
overflow hidden in firefox 16
<div class="round"  >
<canvas  width="12000px" height="7200px">
    Your browser needs canvas support</canvas>
</div> 
```

[小提琴](http://jsfiddle.net/kasperfish/m3jtc/31/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T01:20:57.867

我对画布了解不多，但你的内联`width="300px" height="300px"`让我觉得不正确。如果您将这些推迟到样式表或内联`style`属性，您应该得到您想要的结果：

```
<canvas style="width:300px; height: 300px;"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T15:35:39.903

由于这是一个错误，我没有找到任何其他解决方案，然后为画布元素设置一个巨大的宽度，目前这个问题没有正确的答案。

# ruby-on-rails - cloudfoundry worker 是与服务器相同的应用程序实例

> ID：13408784
> 
> 赞同：0
> 
> 时间：2012-11-16T00:46:11.180
> 
> 标签：ruby-on-rails, file-upload, resque, cloud-foundry

resque worker 和 resque server 应用程序是否可能是 cloudfoundry 中的同一个应用程序实例。我的服务器应用程序保存了一个文件，worker 实例是一个独立的 ruby​​ 类，它必须从服务器实例中读取文件。

两者都是 ruby​​ rails 应用程序。我尝试将其保存在 postgres bytea 中，但 activerecord 无法保存并出现内存错误。它可能是我微薄的开发机器。

有人告诉我使用 Mongodb，但我的应用程序需要 postgres ......而且 box.net 不是免费的。理想情况下，我需要一种共享文件的免费方式，或者两个让它们在同一个应用程序实例上运行，或者三个找到其他低内存方式让工作 ruby​​ 独立类读取从 rails 服务器上传存储的文件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T00:58:57.690

我建议使用 Amazon S3 来存储文件，它很便宜，而且我认为您在第一年几乎可以免费获得它！查看 Paperclip gem 以集成到 Rails 项目中。

# javascript - 更改所有页面中一个字母的字体和大小

> ID：13408789
> 
> 赞同：0
> 
> 时间：2012-11-16T00:46:33.533
> 
> 标签：javascript, jquery, html

我有一个问题，我的字体没有显示一个丹麦字母，我需要像整个文本一样更改那个字母的字体和大小。也许有可能使用 jquery、css 等？如果可能的话，我有文本区域，用户可以在其中输入文本，如果他输入那个字母，也许也可以更改它？（如果丹麦字母是 ø 或 ø 有帮助的话）。PS对不起，我没有正确描述问题。其他丹麦字母显示正常，但我的字体不只支持一个字母，我想更改它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T00:51:42.023

为了解决这个问题，您可能会遇到不必要的麻烦。听起来您的页面的字符编码错误。

[http://en.wikipedia.org/wiki/Character_encodings_in_HTML](http://en.wikipedia.org/wiki/Character_encodings_in_HTML)

尝试将其添加到 html 的 head 部分：

```
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T06:28:29.190

使用 jQuery 将每个出现的字符更改为某个表达式是可能的，并且相对容易（在纯 JavaScript 中也不是很困难）。表达式可以是一个`span`（或`font`）元素，其中包含字符和所需的样式。参照。更改[字符的颜色](https://stackoverflow.com/questions/8881171/change-color-of-a-character)

在 CSS 中，您可以使用`@font-face`with`unicode-range`随处更改字符的字体系列。但不是字体大小。

但正如@dqhendricks 所暗示的那样，真正的问题可能是别的。可能是编码问题。也可能是字体问题：您页面上建议的主要字体可能不包含字母“ø”。您可以通过在简单的文本编辑器中尝试使用该字体输入“ø”来检查这一点。在这种情况下，最好的解决方案是找到更好的字体。

# google-chrome - 如何使用 Chrome 的新 `console.log()` 输出？

> ID：13408790
> 
> 赞同：8
> 
> 时间：2012-11-16T00:46:39.783
> 
> 标签：google-chrome, console, google-chrome-devtools, developer-tools

Chrome 24 有一种在`console.log()`.

例如，`console.log($("p"));`在[这个 jsFiddle](http://jsfiddle.net/brentonstrine/QBunn/)示例中输出这种疯狂：

```
▼[<p>, <p>, <p>, prevObject: jQuery.fn.jQuery.init[1], context: #document, selector: "p"]
  ► 0: <p>
  ► 1: <p>
  ► 2: <p>
  ► context: #document
    length: 3
  ► prevObject: jQuery.fn.jQuery.init[1]
    selector: "p"
  ► __proto__: Object[0] 
```

我可以看到它将 DOM 元素的集合放在开头。但是，如果您尝试扩展一个`<p>`大部分为空的简单标签，它会在您身上抛出：

```
▼ 0: <p>
   accessKey: ""
   align: ""
 ► attributes: NamedNodeMap
  ...
  [stopping here for sanity's sake] 
```

那么我该如何使用所有这些信息呢？我的第一直觉是把[它驯服](https://stackoverflow.com/questions/13268015/console-log-not-outputting-html-of-jquery-selection-object)到它过去的样子，但再想想，里面确实有很多我可能想要访问的信息。但我很难理解我在看什么。其中大部分看起来像 jQuery 值。这是对象具有（或不具有）的每个 jQuery 值的列表吗？

`► context:`然后是事情和事情的整个问题`► __proto__:`。一旦你开始深入研究，`__proto__`你将永远不会停止。我认为它会无限下降！

我怎样才能开始学习如何使用这个新的输出？

**编辑**：我实际上刚刚意识到我仍在使用 Chrome 23，这不是 24 中引入的东西。[这个帖子](https://stackoverflow.com/questions/13268015/console-log-not-outputting-html-of-jquery-selection-object)中有人说这是 Chrome 24 的问题，但也许它是 23 中的新问题？无论如何，我最近才开始在 jQuery 对象上注意到这一点。

**编辑2**：如果您只是在寻找如何记录旧方式，试试这个：（[帽子提示](http://code.google.com/p/chromium/issues/detail?id=162570)）

```
 console.log.apply(console, $("div")); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T18:50:11.393

在您的演示小提琴中，您正在记录 NodeLists 或 HTMLCollections。NodeList 中的每个元素都表示为数字索引 0、1、2 等。如果其中存在任何元素，0 是 NodeList 中的第一个。

当您展开元素时，您会看到 DOM Core 3 规范中定义的 HTML 元素的所有可用属性。有关此[http://domenlightenment.com/#3.2](http://domenlightenment.com/#3.2)的更多信息，请参阅此处，并在此处查看所有属性及其用途的列表：[https](https://developer.mozilla.org/en-US/docs/DOM/element) ://developer.mozilla.org/en-US/docs/DOM/element 。这些在 Chrome 中都不是新的。

最新 Chrome 版本中的新功能是顶级记录对象，因此如果您刚刚打开控制台并输入：

```
console.log(window) 
```

对我来说，当我刚刚这样做时，它记录了它在记录它时提供的扩展窗口对象的预览。因此，例如，您应该看到如下内容：

```
Window {is_minor: 5, bmi_ie6: false, careers_adselector: "div.hireme, div#hireme"...} 
```

列表元素下方列出的其他 NodeLists 属性：

*   context - 选择的上下文 - [http://domenlightenment.com/#4.4](http://domenlightenment.com/#4.4)
*   length - HTMLCollection 中元素的数量
*   selector - 用于选择 Element 或 NodeList 的选择器
*   `__proto__`- 对象的`__proto__`属性引用与其内部 [[Prototype]] 相同的对象（通常称为“原型”），它可能是对象或 null（在 的情况下`Object.prototype.__proto__`）。有关这方面的更多信息，请参阅：[https ://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/proto](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/proto)

我稍微修改了小提琴，当您查看控制台时应该显示对象的预览[http://jsfiddle.net/jaredwilli/H3YWq/2/](http://jsfiddle.net/jaredwilli/H3YWq/2/)

您也无法真正摆脱这些东西，它们是 DOM 的一部分，并且将始终存在，否则您正在查看的 NodeType 将不是 ElementNode。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T04:42:57.753

你想要第一个元素，所以使用 [0]

作为另一种选择，请查看 Firefox 中的 Firebug。我知道，我也喜欢 chrome 并且每天都在使用它，但是 Firebug 是一个很棒的插件，我从来没有遇到过它的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T05:31:19.247

我和你一样对这种变化感到恼火。我知道这并不理想，但希望对您有所帮助。

```
console.log($('p')[0]); 
```

您之前可能已经看过该解决方案，然后发现如果您处于循环中它不起作用，例如：

```
$('p').each(function(){
 console.log($(this)[0]);
}); 
```

这最终不会给你你习惯的结果，所以我不得不使用`['context']`而不是`[0]`这样：

```
$('p').each(function(){
 console.log($(this)['context']);
}); 
```

同样，我自己也在寻找更好的解决方案，但我想我会与你分享我的发现。

# java - Java / JUnit - 比较两个多项式对象

> ID：13408797
> 
> 赞同：3
> 
> 时间：2012-11-16T00:47:23.263
> 
> 标签：java, object, junit, equals, polynomial-math

我有一个名为 Term 持有多项式的 Java 类，如下所示

```
public Term(int c, int e) throws NegativeExponent {
    if (e < 0) throw new NegativeExponent();
    coef = c;
    expo = (coef == 0) ? 1 : e;
} 
```

我在同一个类中也有一个 equals 方法，如下所示

```
@Override
public boolean equals(Object obj) {

} 
```

我坚持如何编写代码如何比较这两个 Term 对象

在我的 JUnit 测试文件中，我使用下面的测试来尝试测试 equals 方法

```
import static org.junit.Assert.*;

import org.junit.Test;

public class ConEqTest
{
    private int min = Integer.MIN_VALUE;
    private int max = Integer.MAX_VALUE;

@Test
public void eq01() throws TError { assertTrue(new Term(-10,0).equals(new Term(-10,0))); }

@Test
public void eq02() throws TError { assertTrue(new Term(0,0).equals(new Term(0,2))); } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T00:52:31.373

有什么问题

```
@Override
public boolean equals(Object obj) {
    if (! (obj instanceof Term))
        return false;
    Term t = (Term)obj;
    return coef == t.coef && expo == t.expo; 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T04:45:31.717

```
import static org.junit.Assert.*;
import org.junit.*;
@SuppressWarnings("serial") class NegativeExponentException extends Exception {}
class Term {
    @Override public int hashCode() {
        final int prime=31;
        int result=1;
        result=prime*result+coefficient;
        result=prime*result+exponent;
        return result;
    }
    @Override public boolean equals(Object obj) {
        if(this==obj)
            return true;
        if(obj==null)
            return false;
        if(getClass()!=obj.getClass())
            return false;
        Term other=(Term)obj;
        if(coefficient!=other.coefficient)
            return false;
        if(exponent!=other.exponent)
            return false;
        return true;
    }
    public Term(int c,int e) throws NegativeExponentException {
        if(e<0)
            throw new NegativeExponentException();
        coefficient=c;
        exponent=(coefficient==0)?1:e;
    }
    int coefficient,exponent;
}
public class So13408797TestCase {
    @Test public void eq01() throws Exception {
        assertTrue(new Term(-10,0).equals(new Term(-10,0)));
    }
    @Test public void eq02() throws Exception {
        assertTrue(new Term(0,0).equals(new Term(0,2)));
    }
    private int min=Integer.MIN_VALUE;
    private int max=Integer.MAX_VALUE;
} 
```

# java - 什么是 java.util.InputMismatchException

> ID：13408799
> 
> 赞同：0
> 
> 时间：2012-11-16T00:47:32.970
> 
> 标签：java

我很好奇 java.util.InputMismatchException 错误是什么意思以及为什么我得到它。该程序是一个名为 Dog.java 的文件的驱动程序类，该文件获取狗的信息并将其存储为字符串。该文件是直接获取信息并稍后将信息打印出来的文件。

我输入的数据是：

```
Disco Bandito  
4  
Sally Struthers  
5  
Moosen  
87 
```

这是我的代码：

```
import java.util.Scanner;

public class Kennel {

    public static void main(String[] args) {

    String value1 = null;
    int value2 = 0;
    String value3 = null;
    int value4 = 0;
    String value5 = null;
    int value6 = 0;

        //takes the input from a text file

    Scanner scanner = new Scanner(System.in);

        while (scanner.hasNextLine()){

        value1 = scanner.nextLine();
        value2 = scanner.nextInt();
        value3 = scanner.nextLine();
        value4 = scanner.nextInt();
        value5 = scanner.nextLine();
        value6 = scanner.nextInt();
    }

        //the three "dogs" in a kennel

    Dog Dog1 = new Dog();

    Dog1.setName(value1);
    Dog1.getName();
    Dog1.setAge(value2);
    Dog1.getAge();
    Dog1.toString();

    Dog Dog2 = new Dog();

    Dog2.setName(value3);
    Dog2.getName();
    Dog2.setAge(value4);
    Dog2.getAge();
    Dog2.toString();

    Dog Dog3 = new Dog();

    Dog3.setName(value5);
    Dog3.getName();
    Dog3.setAge(value6);
    Dog3.getAge();
    Dog3.toString();

    System.out.println(Dog1.toString());
    System.out.println(Dog2.toString());
    System.out.println(Dog3.toString());

    }
} 
```

谢谢，杰克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T00:53:41.963

来自[InputMismatchException 的文档](http://docs.oracle.com/javase/6/docs/api/java/util/InputMismatchException.html)：

> 由 Scanner 抛出以指示检索到的令牌与预期类型的​​模式不匹配，或者令牌超出预期类型的​​范围。

这几乎说明了所有需要说的。检查您的文件是否有意外输入。

# apache - 带有 ActiveMQ 的 JMS 不想通过 http 互联网连接

> ID：13408805
> 
> 赞同：2
> 
> 时间：2012-11-16T00:48:10.127
> 
> 标签：apache, http, jms, uri, activemq

我拼命尝试通过 http 使用 JMS 客户端连接到我的本地 ActiveMQ 代理。

可以通过我的动态 IP 地址访问 ActiveMQ Web 控制台。

我认为 xml 配置中的传输连接器应该是正确的吗？

```
 <transportConnectors>
        <!-- DOS protection, limit concurrent connections to 1000 and frame size to 100MB -->
    <transportConnector name="http1" uri="http://localhost:8080"/>
 </transportConnectors> 
```

虽然通过“http://localhost:8080”连接是有效的。

但是如果我使用我的网络 IP 连接到我的路由器并通过（端口正确）转发到我的电脑，则连接不起作用。

```
 public static String curIPurl = "http://{currentIP:port}";
ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory(curIPurl);
        TopicConnection connection = connectionFactory.createTopicConnection();
        connection.start(); 
```

如果我调试 jvm 卡在 createTopicConnection 方法中，并且在一段时间后跳过其余代码并且 main 方法完成而没有任何消息异常或其他任何内容。

任何猜测我做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T01:41:35.523

改变

```
<transportConnector name="http1" uri="http://localhost:8080"/> 
```

至

```
<transportConnector name="http1" uri="http://0.0.0.0:8080"/> 
```

我没有使用 http 传输 - 仅使用 tcp 传输，但这就是我希望远程 JMS 客户端能够连接时指定地址的方式。当您绑定到本地主机时，您只能从本地主机连接。当您绑定到 0.0.0.0 时，您仍然可以从 localhost 进行连接，但您也可以从任何远程地址进行连接。

# c# - 移动和最大化 QuickTime Player 窗口

> ID：13408813
> 
> 赞同：0
> 
> 时间：2012-11-16T00:48:56.040
> 
> 标签：c#, quicktime

我想知道如何从 C# 移动和最大化 QuickTime 窗口，我可以将此代码用于常规窗口，如资源管理器窗口

```
SetWindowPos(handle, 0, 0, 0, 500, 400, SWP_NOZORDER | SWP_NOSIZE | SWP_SHOWWINDOW);             
ShowWindow(handle, SW_SHOWMAXIMIZED); 
```

但 QuickTime 似乎有不同类型的窗口系统。

# oracle - Oracle：如何减去两个日期并获得结果的分钟数

> ID：13408819
> 
> 赞同：18
> 
> 时间：2012-11-16T00:49:18.790
> 
> 标签：oracle, date, plsql

我写了这个函数来获取一个日期的分钟数，但是我不能得到两个日期之间的分钟数，如何得到呢？

```
FUNCTION get_minute(p_date DATE)
RETURN NUMBER
IS
BEGIN
    IF p_date IS NOT NULL THEN
        return  EXTRACT(MINUTE FROM TO_TIMESTAMP(to_char(p_date,'DD-MON-YYYY HH:MI:SS'),'DD-MON-YYYY HH24:MI:SS'));
    ELSE
        RETURN 0;
    END IF;
END get_minute; 
```

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-11-16T01:05:33.727

当您在 Oracle 中减去两个日期时，您会得到*两个值之间的天数*。所以你只需要乘以在几分钟内得到结果：

```
SELECT (date2 - date1) * 24 * 60 AS minutesBetween
FROM ... 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2017-06-16T10:46:15.047

对于那些想要减去两个时间戳（而不是日期）的人，有一个类似的解决方案：

```
SELECT ( CAST( date2 AS DATE ) - CAST( date1 AS DATE ) ) * 1440 AS minutesInBetween
FROM ... 
```

或者

```
SELECT ( CAST( date2 AS DATE ) - CAST( date1 AS DATE ) ) * 86400 AS secondsInBetween
FROM ... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-01-13T16:14:09.303

我认为您可以调整该函数以减去两个时间戳：

```
return  EXTRACT(MINUTE FROM 
  TO_TIMESTAMP(to_char(p_date1,'DD-MON-YYYY HH:MI:SS'),'DD-MON-YYYY HH24:MI:SS')
-
  TO_TIMESTAMP(to_char(p_date2,'DD-MON-YYYY HH:MI:SS'),'DD-MON-YYYY HH24:MI:SS')
); 
```

我认为你可以通过使用来简化它`CAST(p_date as TIMESTAMP)`。

```
return  EXTRACT(MINUTE FROM cast(p_date1 as TIMESTAMP) - cast(p_date2 as TIMESTAMP)); 
```

请记住，日期和时间戳在 Oracle 内部是大而难看的数字，而不是我们在屏幕上看到的；我们不需要告诉他如何阅读它们。还要记住时间戳可以定义一个时区；在这种情况下不是。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-31T09:26:43.337

我可以这样处理：

```
select to_number(to_char(sysdate,'MI')) - to_number(to_char(*YOUR_DATA_VALUE*,'MI')),max(exp_time)  from ... 
```

或者，如果您想更改小时，只需更改 MI；

```
select to_number(to_char(sysdate,'HH24')) - to_number(to_char(*YOUR_DATA_VALUE*,'HH24')),max(exp_time)  from ... 
```

其他人不适合我。祝你好运。

# scala - 存储少量元素的合适集合类型是什么？

> ID：13408820
> 
> 赞同：1
> 
> 时间：2012-11-16T00:49:46.740
> 
> 标签：scala, collections, enums

在 Scala 支持的不同集合类型（列表、映射、哈希映射、集合等）中，什么是合适的集合类型，用于实现可以通过下面的 C 代码完成的事情

```
typedef enum { GOOD BAD MAX_QUALITY } quality

struct student_data s_data[MAX_QUALITY]; 
```

集合大小很小...... 2 或 3 个元素，但在对数据执行类似操作时，拥有一个集合有助于保持代码优雅。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T00:57:56.087

`List`或`Seq`不同的`case classes`应该做的伎俩。当我说不同的案例类别时，我的真正意思是：

```
case class CaseClass1(arg1: String, arg2: Int, arg3: OtherCaseClass)
case class OtherCaseClass(arg1: String, arg2: String)

val foo: List[CaseClass1] = ... 
```

然后 的实例`CaseClass1`被组合并存储在您的列表中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T14:54:47.637

如果您的目标是创建一个提供快速索引查找的类似枚举的数据结构，我会选择：

```
sealed trait Quality { val index: Int }
case class BAD() extends Quality { val index = 0 } 
case class GOOD() extends Quality { val index = 1 } 
case class MAX_QUALITY() extends Quality { val index = 2 } 
```

这允许在任意情况下使用模式匹配，`quality: Quality`并且详细的语法`quality.index`明确表明质量被用作`Int`该点的索引。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T10:15:33.757

您能否进一步详细说明？如果您的意图是创建与某种类型`quality`的数据结构相关联的结构，`student_data`那么您可以使用 Map

根据您是否需要可变访问，或者您只是创建结构然后访问是只读的，您将使用可变或不可变映射。

在您的情况下，我建议使用不可变的地图。Scala 集合库为小型映射提供了专门的版本，最多可插入 5 个键值对，与非专业类型的映射相比，它们提供了更好的性能和内存占用。

```
val x = Map(1 -> 2, 2 -> 3)
println(x.getClass)
>> class scala.collection.immutable.Map$Map2 
```

您还可以定义别名，以便更轻松地使用您的结构

```
type StudentStruct = Map[Quality, StudentData] 
```

用法：

```
val studentStruct = Map(Bad -> studentData)
val studentStruct2 = studentStruct + (Good -> studentData2) 
```

希望能帮助到你。

# c# - 将 C# 键值对列表排序为另一个键值对列表

> ID：13408821
> 
> 赞同：0
> 
> 时间：2012-11-16T00:49:51.683
> 
> 标签：c#, list, sorting, c#-4.0

这是我的清单

```
List<KeyValuePair<string, int>> lstRodsMonsterPool = new List<KeyValuePair<string, int>>(); 
```

现在我正在尝试像这样对其进行排序，但它给出了错误

```
lstRodsMonsterPool = (from entry in lstRodsMonsterPool 
                      orderby entry.Value ascending 
                      select entry)
          .ToList<new KeyValuePair<string,int>(pair => pair.Key, pair => pair.Value)>; 
```

C# 4.0

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T00:51:31.930

`.ToList()`不带参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T00:55:07.343

```
lstRodsMonsterPool  = lstRodsMonsterPool.OrderBy(x => x.Value).ToList(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T00:56:51.340

看起来您正在尝试对列表进行排序，因此您可以使用[以下`Comparison<T>`重载`List.Sort`](http://msdn.microsoft.com/en-us/library/w56d4y5z.aspx)：

```
lstRodsMonsterPool.Sort((l,r) => l.Value.CompareTo(r.Value)) 
```

# actionscript-3 - 对于 Kinematic 实体，在 box2d 中使用 SetLinearVelocity 还是 SetPosition 更好？

> ID：13408822
> 
> 赞同：1
> 
> 时间：2012-11-16T00:49:55.803
> 
> 标签：actionscript-3, box2d

基本上就是标题，因为我在将 SetLinearVelocity 与我的运动体一起使用时遇到了很多麻烦，所以我决定改用 SetPosition。关于触发接触事件等，最好使用 SetLinearVelocity 移动它们还是 SetPosition 也可以。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T03:10:51.983

如果您只想让运动体四处移动并触发传感器，那么您可以使用 SetLinearVelocity 或 SetPosition 获得相同的结果。

当您的运动物体与动态物体发生碰撞时，您**会得到不同的结果。**如果您使用 SetPosition 手动驱动位置，那么求解器显然不会获得身体的速度信息来正确计算诸如摩擦力之类的东西。

# objective-c - segue 和 EKEventViewController 刷新

> ID：13408823
> 
> 赞同：3
> 
> 时间：2012-11-16T00:50:24.213
> 
> 标签：objective-c, uitableview, storyboard

我有一个使用此代码选择一行的`UITableViewController`推送：`EKEventViewController`

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender{
     if([segue.identifier isEqualToString:@"eventHandler"]){
         if (_currentPanel.event_identifier != nil) {
             self.event = [[[CalendarHelper sharedInstance] store] eventWithIdentifier:_currentPanel.event_identifier];
    } else {
        EKEventStore *store = [[CalendarHelper sharedInstance] store];
        self.event = [EKEvent eventWithEventStore:store];
        _event.startDate = self.qualifyDate;
        _event.endDate = self.qualifyDate;

        _event.title = @"test identifier" ;
        _event.calendar = [[CalendarHelper sharedInstance] calendar];
    }
    self.eventDatailController =  (EKEventViewController *)[segue destinationViewController];

    self.eventDatailController.event = self.event;
    self.eventDatailController.allowsEditing = YES;
    self.eventDatailController.allowsCalendarPreview = YES;
    self.eventDatailController.delegate = self;
}
} 
```

事件显示良好，但在`EKEventViewController`通过编辑按钮编辑事件并完成点击完成按钮后，事件`EKEventViewController`没有相应刷新。

工作正常，`SimpleEKDemo`但不使用

```
prepareForSegue:sender: 
```

但

```
tableView:didSelectRowAtIndexPath: 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T13:52:08.103

您总是可以通过执行以下操作从 didSelectRowAtIndexPath 调用 prepareForSegue 方法：

```
[self prepareForSegue:@"EKEventViewController" sender:self]; 
```

# java - RelativeLayout 中的 ImageView 与父级不匹配

> ID：13408827
> 
> 赞同：1
> 
> 时间：2012-11-16T00:50:51.000
> 
> 标签：java, android, android-layout, view, imageview

因此，我正在尝试将相机预览作为背景查看，并在其上添加 imageview。看看我问过的这个[问题](https://stackoverflow.com/questions/13388572/how-to-set-camera-view-as-background-with-views-over-it)，以更好地了解我想要完成的工作。但是，我发现不是使用 FrameLayout，而是使用 RelativeLayout 更容易（因为可以将视图放置在屏幕上我想要的位置）。问题是我无法让图像视图（在表面视图上）占据整个屏幕。无论我如何重新调整图像大小，它仍然显示在中心而不填满屏幕。

所以，我的问题是，如何让图像视图在表面视图上填满整个屏幕？也许，我犯了一个简单的错误，但如果是这种情况，请指出。任何帮助将不胜感激！谢谢！

这是 XML 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:id="@+id/relative" >

<ImageView
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:id="@+id/image"
    android:src="@drawable/background" >
</ImageView>

<Button
    android:id="@+id/scan"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    android:layout_margin="10dp"
    android:text="Scan"
    android:textSize="20dp"
    android:textStyle="bold"
    android:onClick="Scan" />

<Button
    android:id="@+id/search"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/scan"
    android:layout_centerHorizontal="true"
    android:layout_margin="10dp"
    android:text="Search"
    android:textSize="20dp"
    android:textStyle="bold"
    android:onClick="Search" />

<Button
    android:id="@+id/importing"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/search"
    android:layout_centerHorizontal="true"
    android:layout_margin="10dp"
    android:text="Import"
    android:textSize="20dp"
    android:textStyle="bold"
    android:onClick="Import" />

</RelativeLayout> 
```

这是我放置视图的代码（放在前面，以便它们在表面视图中可见）：

```
 mPreview = new CameraPreview(this, mCamera);
    relative.addView(mPreview);
    layout.bringToFront();
    scan.bringToFront();
    search.bringToFront();
    friendImport.bringToFront(); 
```

**编辑：** 这是我正在谈论的示例图像（我试图让白色透明图像覆盖整个屏幕）：

![图像未全屏显示](../Images/b2a0ad91dc50208f1888791a6be9cdb5.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T02:11:27.180

我是否正确您想将 android:id="@+id/image" 拉伸到整个布局中？首先在布局视图中检查 ImageView 占用了应有的整个空间。如果是这样，则将正确的缩放类型添加到您的 ImageView 属性列表中：

```
android:scaleType="fitXY" 
```

或者作为替代方案，将图像资源应用为“src”而不是“背景”：

```
android:background="@drawable/background" 
```

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T18:48:05.317

经过一段时间的实验，我似乎找到了解决问题的方法。我的图像显示类似于这张照片：

![9 补丁说明](../Images/0e7a31311de362cc84298f2f72e09f6d.png)

这很奇怪，因为这就是 9-patch 图像的工作方式，而我没有将我的图像声明为 9-patch。但即使我调用了 match_parent（甚至是 fill_parent），它也只会填充到我发布的图像中的填充区域。

所以，经过大量的反复试验，我去掉了图像上的所有边框，并去掉了所有的模糊效果。由于某种原因，该图像的文件大小要小得多。然后，我试着把它作为背景，然后……成功了！

我不太确定为什么它一开始就不起作用，但是，我有一个理论，也许是因为图像上有一个 1px 的边框，它将它保存为 9-patch PNG 而不是普通的 PNG文件。或者可能是由于图像上的模糊效果。我不太确定，但是，我确实知道，一旦我取消了模糊效果并移除了边框，它确实有效。

我希望这对任何可能面临类似问题的人有用！

# qt - https://service.oneaccount.com/onlineV2_B/OSV2?event=login&pt=3 上的 QtNetwork SSL 握手错误

> ID：13408829
> 
> 赞同：2
> 
> 时间：2012-11-16T00:51:34.627
> 
> 标签：qt, ssl, qtnetwork

当我使用我的 QT 应用程序下载此页面时：[https](https://service.oneaccount.com/onlineV2_B/OSV2?event=login&pt=3) ://service.oneaccount.com/onlineV2_B/OSV2?event=login&pt= 3 with QNetworkAccessManager->get(url)，出现网络错误 (QNetworkReply::NetworkError)在回复对象中。错误字符串是 SSL 握手失败。但是，sslErrors 信号没有被触发，所以我什至没有机会忽略这个错误。我在 Mac 和 Windows 版本上遇到了同样的问题。

如果我对 QT 4.74 做同样的事情。它工作正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T08:04:57.850

使用`QSslSocket::setProtocol(QSsl:SslV3)`可以解决问题。

# django - 重置 DJANGO_SETTINGS_MODULE 值

> ID：13408833
> 
> 赞同：1
> 
> 时间：2012-11-16T00:51:54.840
> 
> 标签：django

我出于某种愚蠢的原因更改了我的 DJANGO_SETTINGS_MODULE，现在我的 manage.py 命令都不起作用。我在我的 OSX 机器上做了这个

```
export DJANGO_SETTINGS_MODULE = myproj.settings 
```

我可以重置它以便它再次工作。我想我不太确定这是怎么发生的。这是我得到的错误

```
ImportError: Could not import settings 'project.path.settings' (Is it on sys.path?): 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-16T01:00:35.923

我认为你只需要这样做：

`export DJANGO_SETTINGS_MODULE = django.conf.global_settings`

[这是设置文档](https://docs.djangoproject.com/en/dev/topics/settings/)。

此外，导出功能只会为您当前的 shell 会话保留这些设置，如果您没有设置 = 或编辑任何配置，您应该能够终止会话并重新开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-25T20:31:48.443

可以做的一件事是关闭当前终端并重新启动它。我在更改变量时犯了同样的错误，但我找到了这个替代解决方案。希望这对你有用。

# zope - Zope 导入：“模块”对象没有属性“_dt_reconstructor”

> ID：13408838
> 
> 赞同：3
> 
> 时间：2012-11-16T00:52:13.613
> 
> 标签：zope, python-import

当尝试从另一台机器（mac）上的服务器（debian）导入一些对象时，我收到此错误：

```
Traceback (innermost last):
  Module ZPublisher.Publish, line 126, in publish
  Module ZPublisher.mapply, line 77, in mapply
  Module ZPublisher.Publish, line 46, in call_object
  Module OFS.ObjectManager, line 620, in manage_importObject
  Module OFS.ObjectManager, line 638, in _importObjectFromFile
  Module ZODB.ExportImport, line 92, in importFile
  Module transaction._transaction, line 260, in savepoint
  Module transaction._transaction, line 257, in savepoint
  Module transaction._transaction, line 690, in __init__
  Module ZODB.Connection, line 1123, in savepoint
  Module ZODB.Connection, line 587, in _commit
  Module ZODB.ExportImport, line 176, in _importDuringCommit
AttributeError: 'module' object has no attribute '_dt_reconstructor' 
```

两台机器上的 Zope 和 Python 版本完全相同（Zope 2.13.19 和 Python 2.7.3）。在同一台机器上重新导入工作正常。

我找到了导致问题的对象，它是我的一个自定义类的一个实例。我的问题是我不知道在哪里寻找修复错误。

该类的基类之一使用 DateTime，但这不会对继承自该基类的其他类造成任何问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T11:01:42.220

检查你的[`DateTime`鸡蛋](https://pypi.python.org/pypi/DateTime)版本。

`DateTime`2.12.7 添加了该功能`_dt_reconstructor`，您需要至少使用 2.12.x 系列中的该版本，或者使用 3.0.x 系列中的 3.0.1 或更高版本才能再次取消提取 DateTime 实例。

3.0.x 系列使用更高效的内部结构，从而显着节省内存。但是，3.0.x DateTime 代码可以读取 2.x 系列泡菜，但是一旦移至 3.x，您将无法返回 2.x，因为格式不向后兼容。

# c# - 如何将自定义 TextBox 样式应用于内置控件？

> ID：13408847
> 
> 赞同：0
> 
> 时间：2012-11-16T00:53:26.397
> 
> 标签：c#, .net, wpf, xaml, textbox

**背景：**

在标准 WPF 应用程序中，右键单击 TextBox 会显示一个包含三个命令的 ContextMenu：剪切、复制和粘贴。我的愿望是向我的应用程序中的所有 TextBox ContextMenus 添加一个全选命令。

**问题：**

我的标准方法是创建一个以 TextBox 为目标并提供新 ContextMenu 的样式。这样，所有 TextBox 控件都会继承样式并接受更改。

问题是我的样式没有被包含 TextBoxes 的控件继承。例如，在编辑 DataGridTextColumn 单元格时，我知道使用了 TextBox，但它不继承我的样式。我的应用程序使用的一些第 3 方控件也是如此。

**问题：**

是否有其他方法可以让控件（例如 DataGridTextColumn 的单元格）获取我的样式更改，或者我是否坚持更改他们的模板？

**附录：**

这是风格：

```
<Style 
    TargetType="{x:Type TextBox}"
    BasedOn="{StaticResource {x:Type TextBox}}"
    >
    <Setter
        Property="ContextMenu"
        >
        <Setter.Value>
            <ContextMenu>
                <MenuItem
                    Header="Cu_t"
                    Command="ApplicationCommands.Cut"
                    InputGestureText="Ctrl+X"
                    />
                <MenuItem
                    Header="_Copy"
                    Command="ApplicationCommands.Copy"
                    InputGestureText="Ctrl+C"
                    />
                <MenuItem
                    Header="_Paste"
                    Command="ApplicationCommands.Paste"
                    InputGestureText="Ctrl+V"
                    />
                <Separator
                    />
                <MenuItem
                    Header="Select _All"
                    Command="ApplicationCommands.SelectAll"
                    InputGestureText="Ctrl+A"
                    />
            </ContextMenu>
        </Setter.Value>
    </Setter>
</Style> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T06:56:05.220

您的文本框样式将反映到未应用任何样式的文本框。因此，如果您有任何第三方文本框并且它已经应用了键样式。你的风格会失败。您可能需要使用表达式混合来打开控件模板并更改样式或了解文本框样式如何应用在那里。

干杯..

# xml - 让 XML 目录与 wsimport 一起工作。JDK 6 中的 JAX-WS RI 2.1.6

> ID：13408853
> 
> 赞同：2
> 
> 时间：2012-11-16T00:54:08.187
> 
> 标签：xml, schema, catalog, wsimport

我的目录中没有使用 xjc 或诸如氧气和 eclipse xml 插件之类的工具的问题，但似乎找不到与 wsimport 命令一起使用的风格。

使用命名空间进行解析，以下条目适用于 xjc，但不适用于 wsimport。

> <public publicId="http://schemas.ticomgeo.com/2010/geonet/common/ServiceMessageTypes/v0" uri="./MessageTypes/ServiceMessageTypes.xsd"/>

这是我发出的命令

> xjc /data/catalog.work/wsdefs/HSTypes/HealthAndStatusV1.xsd -catalog /data/catalog.work/wsdefs/catalog3.xml
> 
> wsimport -verbose /data/catalog.work/wsdefs/HealthAndStatusServiceV1.wsdl -catalog /data/catalog.work/wsdefs/catalog5.xml

我在 wsimport 中得到的错误表明它没有映射架构位置。它只查找相对于目录或 wsdl 主目录的它（它们是相同的）。

> [错误] /data/catalog.work/wsdefs/ServiceMessageTypes.xsd（没有这样的文件或目录）

这是 wsdl 中的导入语句

```
 <xs:schema>
        <xs:import
           namespace="http://schemas.ticomgeo.com/2010/geonet/common/ServiceMessageTypes/v0"
            schemaLocation="ServiceMessageTypes.xsd"/>
    </xs:schema> 
```

再次使用目录文件中的以下条目处理适用于 xjc

> <systemSuffix systemIdSuffix="ServiceMessageTypes.xsd" uri="./MessageTypes/ServiceMessageTypes.xsd"/>

但是，使用 wsimport 我在每个元素上都会收到类似于以下内容的错误。第一个错误行号是指endpointStatusEnumType 之后元素开始的行号，第二个错误行号是指EndpointStatusEnumType 元素的开始。请注意，它正在解析文件位置以获取架构。

> [错误] 'EndpointStatusEnumType' 已在文件的第 38 行定义：/data/catalog.work/wsdefs/MessageTypes/ServiceMessageTypes.xsd
> 
> [错误]（与上述错误相关）第一个定义出现在文件的第 23 行：/data/catalog.work/wsdefs/MessageTypes/ServiceMessageTypes.xsd
> 
> 23 <xs:simpleType name="EndpointStatusEnumType"> Web 服务端点的当前状态。>
> 
> ```
>  </xs:annotation>
>    <xs:restriction base="xs:string">
>      <xs:enumeration value="NORMAL"/>
>       <xs:enumeration value="COMMS_ERROR"/>
>         <xs:enumeration value="DISABLED"/>
>     </xs:restriction>
> </xs:simpleType>
> 
> <!-- Complex Types -->
> <!-- --> 
> ```
> 
> 38 <xs:complexType name="HeaderType">"

除了与 xjc 一起使用外，这两种格式还可以与 OXYGEN 和 Eclipse XML 编辑器和验证器一起使用。

我假设 wsimport 调用与 xjc 相同的代码，所以我猜测在将模式导入 wsdl 文件的方式中存在一些问题，但这是一个非常简单的问题，或者是我正在使用的 wsimport 版本中的错误。

wsimport -版本 JAX-WS RI 2.1.6 在 JDK 6

xjc 版本“JDK 6 中的 JAXB 2.1.10”用于 XML 绑定 (JAXB) 参考实现的 JavaTM 架构，（在 JDK 6 中构建 JAXB 2.1.10）

有人对如何让目录与 wsimport 一起工作有建议吗？

# javascript - 仅适用于浏览器测试器的正则表达式

> ID：13408854
> 
> 赞同：1
> 
> 时间：2012-11-16T00:54:09.600
> 
> 标签：javascript, regex

我已经在正则[表达式测试](http://www.dailycoding.com/Utils/javascript/regexp_tester_javascript.html)器上测试了我的正则表达式并且它有效，但我没有让它在我的代码上工作。

```
var mail = "chdelfosse@gmail.com";
var regExp = new RegExp("@(.*?)\.");
document.write(regExp.exec(mail)) ; 
```

我得到这个结果：

> @G，

我试图在点之前添加一个反斜杠，我得到了这个：

> @gmail.,gmail

我还想删除“@”和“。” 从电子邮件中，所以我尝试使用“ (?:@) ”，但我没有让它工作（在正则表达式测试器上）。

这是我第一次尝试使用正则表达式，但我不明白。为什么有逗号？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T01:04:16.053

您可以使用此正则表达式来获取域名：

```
/@(.+)\./ 
```

[**现场演示**](http://jsfiddle.net/QFzS7/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T01:03:27.870

做一些不同的事情：

1.  您需要对字符串中的反斜杠进行双重转义，以便 RegExp 构造函数仍保留一个反斜杠或切换到`/regex here/`语法。
2.  如果您只需要括号中的子组，则需要引用该特定子组。

这是代码：

```
var mail = "chdelfosse@gmail.com";
console.log(mail.match(/@(.*?)\./)[1]); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T01:06:30.357

比正则表达式更快：

```
var emailAddress = "my.email@gmail.com";
var array_email = emailAddress.split("@");​​
alert('Account: ' + array_email[0] +'; Domain: ' + array_email[1]);​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

# android - 如何设置布局换行缩放内容

> ID：13408855
> 
> 赞同：0
> 
> 时间：2012-11-16T00:54:22.063
> 
> 标签：android, android-layout, android-imageview, android-image

我的代码如下，当 FrameLayout layout_height 来自

```
android:layout_height="wrap_content" 
```

至

```
android:layout_height="120dp" 
```

布局变成

![在此处输入图像描述](../Images/f08cc19387c8fe9f7b47d87a5de1fa28.png)

我希望图像的高度将变为 120dp，并保持比例。而且布局的宽度也会随之变化，正如wrap_content所描述的，但它似乎只适应原始图像的大小。

我能做些什么？

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/item_thumbnail_container"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:background="@color/white" >
    <ImageView
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:src="@drawable/network_3" />
</FrameLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T01:16:23.103

分别指定`layout_width`和`layout_height`到 120dp 怎么样？像下面

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
 android:id="@+id/item_thumbnail_container"
 android:layout_width="120dp"
 android:layout_height="120dp"
 android:layout_gravity="center"
 android:background="@color/black" >
 <ImageView
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:src="@drawable/ic_launcher" />
</FrameLayout> 
```

# java - 套接字连接意外关闭

> ID：13408861
> 
> 赞同：0
> 
> 时间：2012-11-16T00:55:13.993
> 
> 标签：java, sockets, object

所以我只是在测试一些客户端-服务器的东西（我在一个更大的项目中处理它，但它一直在抛出错误，所以我决定确保我做对了。结果我不是）这涉及 ObjectOutput和输入流。当我在 localhost 上运行客户端和服务器时，它可以完美运行，但是如果我在我的 linux 服务器上运行服务器并在我的计算机上运行客户端，那么当我到达获取对象的行时，连接已经重置。这是代码：

客户：

```
 public static void main(String[] args){
    String[] stuff = {"test", "testing", "tester"};
    Socket s = null;
    ObjectOutputStream oos = null;
    try {
        s = new Socket("my.server.website", 60232);
        oos = new ObjectOutputStream(s.getOutputStream());
        oos.writeObject(stuff);
    } catch (UnknownHostException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    } finally{
        try {
            s.close();
            oos.close();
        } catch (IOException e) {}

    }
} 
```

服务器：

```
 public static void main(String[] args){
    ServerSocket ss = null;
    Socket s = null;
    ObjectInputStream ois = null;
    try {
        ss = new ServerSocket(60232);
        s = ss.accept();
        System.out.println("Socket Accepted");
        ois = new ObjectInputStream(s.getInputStream());
        Object object = ois.readObject();
        System.out.println("Object received");
        if (object instanceof String[]){
        String[] components = (String[]) object;
        for (String string : components){
            System.out.println(string);
        }
        }
    } catch (IOException e) {
        e.printStackTrace();
    } catch (ClassNotFoundException e) {
        e.printStackTrace();
    }finally{
        try {
            ss.close();
            s.close();
            ois.close();
        } catch (IOException e) {}
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T00:59:22.573

在客户端中，您将在关闭输出流之前关闭底层套接字。试试这个：

```
try {
    oos.close();
    s.close();
} catch (IOException e) {} 
```

oos.close() 应该导致对象输出流将其所有数据刷新到套接字，然后关闭对象流。然后您可以关闭底层套接字。

# java - 双精度数组中的过滤器元素

> ID：13408862
> 
> 赞同：-5
> 
> 时间：2012-11-16T00:55:33.027
> 
> 标签：java, algorithm

给定一个双精度数组

```
1.0 2.0 3.0 ... 10.0 
```

输出

```
filter(3,7)  should produce 3.0,4.0,5.0,6.0,7.0

filter(5,7.5) should produce 5.0,6.0,7.0,8.0

filter(6.6,6.7) should produce 6.0,7.0 
```

基于一种`filter`方法

```
public List<Double> filter(double start, double end){
    List<Double> list = Arrays.asList(1.0,2.0,3.0,4.0,5.0,6.0,7.0,8.0,9.0,10.0);
    List<Double> resultList = new ArrayList<Double>(); 

     //search in list for elements such that it includes the lower bounds and upper bound of search
     //i.e. 6.6 should also include 6.0 and 7.0 from the array. 

   return resultList;

} 
```

这看起来很简单，但我一直无法想出一个令我满意的解决方案，因此提出了这个问题。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T01:10:31.297

for-loop 解决方案应该是最简单的，因为您可以使用该`Math.floor`函数来获取所需列表的开始：

```
for (double d = Math.floor(start); d <= Math.ceil(end); d += 1.0)
    list.add(d); 
```

# php - jquery 添加的额外输入不起作用

> ID：13408864
> 
> 赞同：0
> 
> 时间：2012-11-16T00:56:20.793
> 
> 标签：php, jquery, forms, codeigniter

嗨，我正在尝试使用 Jquery 添加动态输入，但是当我尝试获取代码时它不起作用

codeigniter 中的代码捕获所有 POST 但少于 jquery 添加的代码

这是代码：

```
<script type="text/javascript">
 $(document).ready(function(){
    var value = parseFloat($("#subtotal").val());
    $('.subtotal').html(value);
    $('#subtotal').val(value);
    $('input[name="phprop"]').change(function(event){
        if($('input[name="phprop"]:checked').val() == 'Yes'){
            $('#sections').show();
        }else if($('input[name="phprop"]:checked').val() == 'No'){ $('#sections').hide();}
        });
        $('input[name="xsst"]').change(function(event){
        if($('input[name="xsst"]:checked').val() == 'Yes'){
            $('#xtraphotos').show();
            $('<input type="text"  name="extraid'+i+'" id="extraid'+ i +'" style="width:80px;margin-left:4px;"/>').appendTo('#xtrabox');
            var num = value + 9.95;
            value = parseFloat(num.toFixed(2));
            $('.subtotal').html(value);
            $('#subtotal').val(value);
            $('#extrass').val(i);               i++;

        }else if($('input[name="xsst"]:checked').val() == 'No'){ 
            $('#xtraphotos').hide();
            $('#xtraphotos input[type="text"]').remove();
            var num = value - 9.95 * (i - 1);
            value = parseFloat(num.toFixed(2));
            $('.subtotal').html(value);
            $('#subtotal').val(value);
            $('#extrass').val(0);
            i = 1;
            }
        });
        var scntDiv = $('#xtrabox');
        var i = 1;

    $('#addScnt').live('click', function() {
            $('<input type="text"  name="extraid'+i+'" id="extraid'+ i +'" style="width:80px;margin-left:4px;"/>').appendTo(scntDiv);
            num = value + 9.95;
            value = parseFloat(num.toFixed(2));
            $('.subtotal').html(value);
            $('#subtotal').val(value);
            $('#extrass').val(i);
            i++;                
            return false;
      });       
 });
 </script> 
```

这是HTML

```
 <div style="margin-left: 50px;">
<label><b>Do you need more photos for your web?</b> </label>Yes<input type="radio"     name="xsst" id="xsst" value="Yes"/>No<input type="radio" name="xsst" id="xsst" value="No"/> (Each aditional photo has a cost of <b>$9.95</b>)
    <div id="xtraphotos" style="display:none;"><a href="#" id="addScnt">Add another picture box</a><div id="xtrabox"></div></div></div> 
```

这是 Codeigniter 代码：

```
 if($_POST['extrass'] !=0){
        for($i=1;$i<=$_POST['extrass'];$i++){
            $names = "extraid".$i;
            $extras .= $_POST[$names];
            if($i!=$_POST['extrass']){
            $extras .= "-";
                }
        } 
```

这是完整的 HTML（只是表单部分）：

```
 <?php echo form_open_multipart(base_url() . 'purchase/confirmation')?>
    <p style="float:left">Image ID of the Photos for your Website</p><div style="float:left;margin: 13px 0 0 110px;width: 450px;"><?php 
   if($idtype == 4){$x=3;}elseif($idtype == 1){$x=5;}elseif($idtype == 2){$x=10;}elseif($idtype == 3){$x=13;}
    for($i=1;$i<=$x;$i++){?><input type="text"  name="ssid[]" id="ssid_<?=$i?>" value="" style="width:80px; margin-left:4px;"/><?php }?></div>
 </div>
  <div style="margin-left: 50px;">
  <label><b>Do you need more photos for your web?</b> </label>Yes<input type="radio"  name="xsst" id="xsst" value="Yes"/>No<input type="radio" name="xsst" id="xsst" value="No"/> (Each aditional photo has a cost of <b>$9.95</b>)
  <div id="xtraphotos" style="display:none;"><a href="#" id="addScnt">Add another picture box</a><div id="xtrabox"></div></div></div>

  <br />
    <div id="choose_your_template" style="background-image:url(<?=base_url()?>images/step_4.png)"><div style="padding-left:5px; float:left">
<span style=" position: relative; top: 14px; left: 210px; font-size: 18px; color: gray; ">Step 4: Do you have Photos? Upload the pictures for your website.</span></div>

    </div>
     <div style="margin-left: 50px;">
     <label>Do you have photos of your property? </label>Yes<input type="radio" name="phprop" id="phprop" value="Yes"/>No<input type="radio" name="phprop" id="phprop" value="No"/><br />
   <div id="sections" style="display:none;">
    <p>Upload the photos in the theme that they should be used. The photos should be in jpge.format. Otherwise the system will not accept. them.</p><br/>
   <?php 
    if($idtype == 4){$x=1;}elseif($idtype == 1){$x=3;}elseif($idtype == 2){$x=4;}elseif($idtype == 3){$x=5;}
   for($i=1;$i<=$x;$i++){?>
      <label>Section</label><select name="section[]" id="section"><option value="">Choose Section</option><option value="home">Home</option><option value="about-us">About Us</option><option value="contact-us">Contact Us</option></select><?php   for($j=1;$j<=4;$j++){?><input type="file"  name="userphoto<?=$i?><?=$j?>" /><?php }?><br />   <br />
  <?php }?>
     <p>I certify that the photos that i am uploading for the website development are of my entire property and that I have all the copyrights.</p></div>
   </div><br /> 
```

```
 <input type="hidden" id="domain" name="domain" value="<?=$domain?>" />
  <input type="hidden" id="payment_plan" name="payment_plan" value="<?=$poption?>" />
  <?php if($ownamedomain){?>
  <input type="hidden" name="ownamedomain" id="ownamedomain" value="<?=$ownamedomain?>" />
  <?php }?>
   <input type="hidden" name="idtype" id="idtype" value="<?=$idtype?>" />
  <input type="hidden" name="templateid" id="templateid" value="<?=$templateid?>" />
 <input type="hidden" name="extrass" id="extrass" value="0" />
 <input type="hidden" name="subtotal" id="subtotal" value="<?=$subtotal?>" />
 <div style="padding-left:45px; padding-top:15px;">
 <hr style=" width: 868px; margin: 0 0 16px; "/>
 <div align="center">
 <p>Subtotal: USD$<span class="subtotal"><?=$subtotal?></span> </p></div>
 </div>
 <div style="background:url(<?=base_url()?>images/bottombar.png) no-repeat;display: block;height: 16px;margin: 0 36px 10px;width: 902px;"></div>
 <input type="submit" name="continue" id="continue"/><input type="button" value="Back" onClick="history.back();" class="back">
  </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T01:37:41.890

你的 HTML 有标签形式吗？

当您没有将表单元素放在表单中时，onload，一些browser添加表单以纠正代码语法......但是当您使用DOM添加nes元素时，也许这些元素不包含在这个表单中......

# asp.net - 使用 TabContainer OnDemand 功能延迟加载 UserControl，何时执行工作？

> ID：13408866
> 
> 赞同：2
> 
> 时间：2012-11-16T00:56:50.327
> 
> 标签：asp.net, tabs, webforms, ajaxcontroltoolkit, mvp

我正在尝试 ASP.NET Ajax Control Toolkit TabContainer 的 OnDemand 功能，以延迟执行昂贵的操作，直到加载选项卡。

在我的页面上有几个选项卡，每个选项卡的内容由一个用户控件组成

```
<ajaxToolkit:TabContainer ID="TabContainer1" ActiveTabIndex="0" OnDemand="True" runat="server">
    <ajaxToolkit:TabPanel ID="TabPanel1" HeaderText="tab 1" runat="server" >
        <ContentTemplate>
            <UC:Tab1 runat="server" />
        </ContentTemplate>
    </ajaxToolkit:TabPanel>
    <ajaxToolkit:TabPanel ID="TabPanel2" HeaderText="tab 2" runat="server">
        <ContentTemplate>
            <UC:Tab2 runat="server" />
        </ContentTemplate>
    </ajaxToolkit:TabPanel>
</ajaxToolkit:TabContainer> 
```

然后，这些用户控件中的每一个都使用我继承的自定义 MVP 框架连接到演示者。Presenter 在 OnLoad 中执行

```
// In user control
protected override void OnLoad(EventArgs e)
{
    base.OnLoad(e);
    presenter.BuildView();  // this is what I want to delay until the tab is active
} 
```

由于总是调用 OnLoad，无论选项卡是否处于活动状态，我都知道这是要附加到的适当事件。附加的正确事件是什么，这样我可以达到与[此处提供的示例](http://stephenwalther.com/archive/2011/11/16/ajax-control-toolkit-november-2011-release.aspx)相同的效果，SqlDataSource 的选择事件仅在加载选项卡时触发。

也许覆盖渲染？还是 CreateChildControls？

# ruby - Rails 应用程序在带有 Ubuntu 的新戴尔上比在旧 Mac 上慢

> ID：13408868
> 
> 赞同：2
> 
> 时间：2012-11-16T00:56:58.773
> 
> 标签：ruby, macos, ubuntu

两年来，我一直在使用 MacBook Pro 从事客户项目。该项目是我们正在升级的 Rails 2.1.2 应用程序，并且有很多单元/功能/集成/黄瓜测试。完整的测试套件在新戴尔机器上的运行速度比在旧 Mac 上慢。这正常吗？

Mac 的规格如下：

*   2008 MacBook Pro，Lion 10.7.2。
*   8GB RAM，2.53Ghz Core2Duo，250HD。

戴尔的规格是：

*   新的戴尔 XPS 15（今年推出的新型号）。
*   8GB RAM，IntelCore™ i7-3632QM，720HD。
*   它有 UBUNTU 12.10 64 位。

我在两台笔记本电脑上都安装了带有 RVM 的 Ruby ree。它们具有使用捆绑器管理的相同 gems 版本。

Mac 测试时间：

```
unit

real  9m23.025s
user  3m42.044s
sys 1m40.441s

cucumber

real  13m3.981s
user  8m46.322s
sys 1m24.287s 
```

戴尔测试时间：

```
unit

real 35m4.003s
user 2m52.155s
sys  0m58.388s

cucumber

real 28m54.349s
user 6m32.773s
sys  0m44.751s 
```

戴尔时代很慢。有什么我想念的吗？这是正常的吗？会不会是ree？Ubuntu？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T01:23:07.303

实际数字更高，但 sys/user 更低。这意味着戴尔要么忙于其他进程，要么花费更多时间等待 I/O。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T04:38:23.047

您的应用程序的后备数据库是否以相同的方式配置？您可能在 Ubuntu 上使用了糟糕的库存配置，这导致您的测试完全拖了后腿。

甚至可能是测试正在等待不可用的网络资源，或者由于 DNS 配置错误或类似原因而接受连接非常缓慢的网络资源。

[由于修复了一个require 错误](http://www.rubyinside.com/ruby-1-9-3-faster-loading-times-require-4927.html)， Ruby 1.9.3 应该比 ree-1.8.7 快很多。可能是 Ubuntu 构建的 Ruby 在加载可能会减慢测试速度的依赖项时会遭受更多的损失。

测试 Ruby 速度的更好方法是查看 Rails 2.x`script/console`启动需要多长时间。这不会影响数据库，因此您可以单独测试 Ruby。

# javascript - Sencha Touch 2：将数据从控制器传递到视图

> ID：13408871
> 
> 赞同：3
> 
> 时间：2012-11-16T00:57:18.037
> 
> 标签：javascript, model-view-controller, mobile, sencha-touch, sencha-touch-2

我正在尝试从列表中加载项目披露的详细视图，但不使用 NavigationView 和“push()”命令。

**控制器**：

```
Ext.define('App.controller.MyPlans', {
    extend: 'Ext.app.Controller',
    requires: ['App.view.EventDetail',
        'App.view.PlansContainer'],

    config: {
        refs: {

        },
        control: {
            'MyPlansList': {
                disclose: 'onDisclose'
            }
        }
    },

    onDisclose: function (view, record) {
        console.log("My Plans list disclosure " + record.get('id'));
        var eventDetailView = Ext.create('App.view.EventDetail');
        eventDetailView.setRecord(record);
        Ext.Viewport.setActiveItem(eventDetailView);
    }
}); 
```

**看法：**

```
Ext.define('App.view.EventDetail', {
    extend: 'Ext.Panel',
    xtype: 'EventDetail',

    config: {

        items: [{
            xtype: 'toolbar',
            docked: 'top',
            title: 'Event Name',
            items: [{
                xtype: 'button',
                id: 'addRunBackBtn',
                ui: 'back',
                text: 'Back'
            }]
        }, {
            xtype: 'panel',
            styleHtmlContent: true,
            itemTpl: [
                '<h1>{name}</h1>',
                '<h2>{location}</h2>',
                '<h2>{date}</h2>']
        }],

    }
}); 
```

我基本上是在尝试使用“setRecord()”命令将数据传递给视图，但视图中似乎没有加载任何内容。有什么想法吗？？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T07:18:34.020

而不是 ItemTpl，只写 Tpl。我怀疑没有列表 xtype 的 itemTpl 是否存在。

另一件事是将 Tpl 放入配置中：

```
{tpl:['<div class="ListItemContent">{descriptionddata}</div>']} 
```

我之前/上面的答案很好，但是如果您打算将格式保留在视图中而不是在控制器中，则可以使用 setData 而不是 setRecord

```
detailview.setData({title:record.get('title'), description:record.get('descriptiondata')}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T07:16:17.820

我在这里发现了问题：

面板没有 itemTpl

```
{
    xtype: 'panel',
    styleHtmlContent: true,
    itemTpl : [
        '<h1>{name}</h1>',
        '<h2>{location}</h2>',
        '<h2>{date}</h2>'
    ]
} 
```

一种可能的方法是：

更改视图：

```
{
    xtype: 'panel',
    id: 'thePanel',
    styleHtmlContent: true
} 
```

更改控制器：

```
onDisclose: function(me, record, target, index, e, eOpts) {
  ... 
  Ext.getCmp('thePanel').setHtml('<h1>'+record.get('name')+'</h1><h2>'+record.get('location')+'</h2><h2>'+record.get('date')'</h2>'); //For setting the Data
  ...
} 
```

希望这会有所帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-31T11:31:57.860

而不是面板尝试列表如下

```
Ext.define('App.view.EventDetail', {
    extend: 'Ext.TabPanel',
    xtype: 'EventDetail',
    config: {
        items: [{
            xtype: 'toolbar',
            docked: 'top',
            title: 'Event Name',
            items: [{
                xtype: 'button',
                id: 'addRunBackBtn',
                ui: 'back',
                text: 'Back'
            }]
        }, {
            xtype: 'list',
            styleHtmlContent: true,
            itemTpl: [
                '<h1>{name}</h1>',
                '<h2>{location}</h2>',
                '<h2>{date}</h2>']
        }],
    }
}); 
```

# asp.net-mvc - 具有嵌套类的 Foreach ViewModel 以更新复选框列表

> ID：13408873
> 
> 赞同：2
> 
> 时间：2012-11-16T00:57:35.417
> 
> 标签：asp.net-mvc, razor, checkbox

我需要根据以下 ViewModel 更新复选框列表：

```
namespace ViewModels
{
    public class MemberProfileListViewModel
    {
        public IList<MemberProfileDetailViewModel> MemberProfileDetails { get; set; }
    }

    public class MemberProfileDetailViewModel
    {
        public int Id { get; set; }
        public string Name { get; set; }
        public bool Selected { get; set; }
    }
} 
```

风景：

```
@model ViewModels.MemberProfileListViewModel

@using (Html.BeginForm()) {

    <fieldset>

    @foreach (var item in ??????)
    {
        <p>@Html.CheckBoxFor(????)</p>
    }
    <p>
        <input type="submit" value="Save" />
    </p>

    </fieldset>
} 
```

控制器：

```
 public virtual ActionResult EditProfiles()
    {
        var memberProfileListDto = _memberProfileService.ListByMember(WebSecurity.CurrentUserId);

        var memberProfileListViewModel = Mapper.Map<MemberProfileListDto, MemberProfileListViewModel>(memberProfileListDto);

        return View(memberProfileListViewModel);
    } 
```

如何使用 Id 制作复选框列表以将更新返回到控制器？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T03:54:51.583

目前`foreach`在此上下文中不支持。尝试使用`for`构造，

```
@for (int i=0; i < blah.count; i++ )
{
    <p>@Html.CheckBoxFor(model => model.blah[i].foo)</p>
} 
```

# python - Django/Python - 列表的 max() 返回一个元组

> ID：13408874
> 
> 赞同：0
> 
> 时间：2012-11-16T00:57:35.440
> 
> 标签：python, django

嗨，我有一个 Django 函数：

```
def get_spans(angle):
    spans = Spans.objects.values_list('span').filter(
        max_roof_angle=angle,
    )
    try:
        max_span = max(spans)
    except ValueError:
        max_span = 0
    return max_span 
```

我的问题是 - 为什么这会返回一个元组？如何确保我得到一个单一的整数值？

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T01:00:32.273

从[文档中](https://docs.djangoproject.com/en/1.4/ref/models/querysets/#values-list)：您可以使用 arg flat=True 获得一个平面列表。如果您尝试从列表中获取最大值，您将获得您需要的单个值

```
def get_spans(angle):
    spans = Spans.objects.values_list('span', flat=True).filter(
        max_roof_angle=angle,
    )
    max_span = max(spans)
    return max_span 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T01:12:57.313

Raunak 已经给出了如何使用 获取整数的正确答案`value_list()`，但我想我可能会补充一点，它返回元组的原因是您可以查询多个字段。因为 Python 不会将单元素元组视为标量，所以在某些情况下返回标量但在其他情况下返回元组是不一致的。

而且，获得最大值的更好方法是让数据库为您计算它，使用[聚合](https://docs.djangoproject.com/en/dev/topics/db/aggregation/)。这样，您可以添加`db_index=True`到模型中的跨度字段，并让数据库在 O(1) 时间内计算最大值。我无法真正测试它，但我认为这样的事情应该可以解决问题：

```
from django.db.models import Max
def get_spans(angle):
    return Spans.objects.filter(max_roof_angle_exact=angle).aggregate(Max('span'))['span__max'] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T01:00:45.123

你可以`return max_span[0]`

我建议检查它是否不是空元组。所以也要进行适当的异常处理。

# c# - 如何使用表单的构造函数使用数组中的数据填充列表框

> ID：13408879
> 
> 赞同：0
> 
> 时间：2012-11-16T00:58:20.807
> 
> 标签：c#, arrays, forms

如何`Listbox`在 C# 中使用 Form 的构造函数从数组中填充数据？到目前为止，这就是我在 Name Class 中所拥有的

```
String[,] strSpecialCakeName = {
                               {"Holiday Cake at", "$18"},
                               {"Birthday Cake at", "$25"},
                               {"Wedding Cake at", "$40"},
                               {"Super Hero Cake at", "$30"}
                               }; 
```

这就是我的表格

```
public partial class frmLabSeven : Form
{
    private string[,] strSpecialCakeName = new string[4, 2];

    public frmLabSeven()
    {
        InitializeComponent();

        strSpecialCakeName [0, 0] = "Holiday Cake at $18";
        strSpecialCakeName [1, 1] = "Birthday Cake at $25";
        strSpecialCakeName [2, 2] = "Wedding Cake at $40";
        strSpecialCakeName [3, 3] = "Super Hero Cake at $30";
    }
} 
```

我知道我可以在表单上直接使用 Collection in Item，但这不是我想要做的。我只是不知道如何使用数组让数据显示在列表框中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T01:20:07.547

您需要注意的第一件事是您的数组如下所示：

```
strSpecialCakeName[0,0] = "Holiday Cake at"
strSpecialCakeName[0,1] = "$18"
strSpecialCakeName[1,0] = "Birthday Cake at"
strSpecialCakeName[1,1] = "$25"
strSpecialCakeName[2,0] = "Wedding Cake at"
strSpecialCakeName[2,1] = "$40"
strSpecialCakeName[3,0] = "Super Hero Cake at"
strSpecialCakeName[3,1] = "$30" 
```

您可以使用 for 语句将其添加到列表框中：

```
for (int i = 0; i < 4; i++)
{
    listBox1.Items.Add(strSpecialCakeName[i, 0] + " " + strSpecialCakeName[i, 1]);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T01:22:32.950

遍历这两个维度会相当简单，但我不确定它是否会给你你所想的。注意@Mark Hall 评论。

```
for (int i = 0; i < strSpecialCakeName.GetLength(0); i++)
    lstTest.Items.Add(strSpecialCakeName[i, 0]);
for (int i = 0; i < strSpecialCakeName.GetLength(1); i++)
    lstTest.Items.Add(strSpecialCakeName[0, i]); 
```

另外，请注意，由于索引超出了声明数组的范围，构造函数中的赋值会出错。

# c++ - 不存在默认构造函数

> ID：13408884
> 
> 赞同：1
> 
> 时间：2012-11-16T00:58:58.033
> 
> 标签：c++, constructor

我在一个工作正常的班级遇到了一些麻烦，现在似乎根本不想工作。

错误是`"No appropriate default constructor available"`

我在两个地方使用该类，我正在列出它们并进行初始化，然后将它们添加到列表中。

**顶点3f.h**

```
#pragma once 
#include "Vector3f.h"

// Vertice3f hold 3 floats for an xyz position and 3 Vector3f's 
//  (which each contain 3 floats) for uv, normal and color

class Vertice3f{
private:
    float x,y,z;
    Vector3f uv, normal, color;

public:
    // If you don't want to use a UV, Normal or Color 
    //  just pass in a Verctor3f with 0,0,0 values
    Vertice3f(float _x, float _y, float _z, Vector3f _uv, 
              Vector3f _normal, Vector3f _color);
    ~Vertice3f();
}; 
```

**Vertice3f.cpp**

```
#include "Vertice3f.h"

Vertice3f::Vertice3f(float _x, float _y, float _z, 
                     Vector3f _uv, Vector3f _normal, Vector3f _color){
    x = _x;
    y = _y;
    z = _z;
    uv = _uv;
    normal = _normal;
    color = _color;
} 
```

它在我的 OBJModelLoader 类中使用如下：

```
list<Vertice3f> vert3fList;

Vertice3f tvert = Vertice3f(
            x = (float)atof(
            vertList[i].substr(
                vertList[i].find("v") + 1,
                vertList[i].find(" ", vertList[i].find("v") + 2, 10)
                ).c_str()
            ),
            y = (float)atof(
                vertList[i].substr(
                    vertList[i].find(" ", vertList[i].find("v") + 4, 10) + 1,
                    vertList[i].find(" ", vertList[i].find("v") + 13, 10)
                ).c_str()
            ),
            z = (float)atof(
                vertList[i].substr(
                vertList[i].find(" ", vertList[i].find("v") + 13, 10) + 1,
                vertList[i].find(" ", vertList[i].find("v") + 23, 10)
                ).c_str()
            ),
            ::Vector3f(0.0f,0.0f,0.0f),::Vector3f(0.0f,0.0f,0.0f),::Vector3f(0.0f,0.0f,0.0f)
        );

        vert3fList.push_back(
            tvert
        ); 
```

我已经尝试自己定义一个默认构造函数，所以在 .h 我放

```
Vertice3f(); 
```

并在 cpp

```
Vertice3f::Vertice3f(){
x = 0.0f;
y = 0.0f;
z = 0.0f;
uv = Vector3f(0.0f,0.0f,0.0f);
normal = Vector3f(0.0f,0.0f,0.0f);
color = Vector3f(0.0f,0.0f,0.0f);
} 
```

所以，我不确定为什么它找不到默认构造函数或如何安抚编译器。我确定这是用户错误，因为编译器可能知道它在做什么。非常感谢您的帮助，我会回答您的任何其他问题，请尽管提问。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T01:20:27.780

我猜想缺少的默认构造函数是`Vector3f`类的默认构造函数，而不是`Vertice3f`类的默认构造函数。您的构造函数`Vertice3f`尝试默认构造其`Vector3f`成员，这会导致错误。

这就是为什么您尝试为`Vertice3f`不更改任何内容提供默认构造函数的原因。问题再次在于`Vector3f`.

要修复它，要么提供所有必要的默认构造函数（假设它与您的设计一致），要么`Vertice3f`使用初始化列表而不是体内赋值重写构造函数

```
Vertice3f::Vertice3f(float _x, float _y, float _z, 
                     Vector3f _uv, Vector3f _normal, Vector3f _color) :
    x(_x), y(_y), z(_z), uv(_uv), normal(_normal), color(_color)
  {} 
```

此版本不再尝试默认构造任何内容。在任何情况下，使用初始化列表而不是体内赋值都是一个好主意。

# facebook - Facebook App Like 服务器错误？

> ID：13408887
> 
> 赞同：3
> 
> 时间：2012-11-16T00:59:37.980
> 
> 标签：facebook, facebook-graph-api, facebook-like

我有一个带有“喜欢”按钮的示例应用程序。它以前有效，但现在无效。我之前在 jsfiddle.net 上测试过它，它也可以工作。但是在我将文件上传到服务器后，它有一个错误。'Like'按钮弹出，然后出现此错误：

> [https://www.facebook.com/plugins/error/confirm/like?iframe_referer=https%3A%2F%2Fns2383.hostgator.com%2F~caryucla%2Fbpcontest%2FHTML%2FContestHome.php%2F&secure=true&plugin=like&return_params= %7B%22api_key%22%3A%22301719366592208%22%2C%22locale%22%3A%22en_US%22%2C%22sdk%22%3A%22joey%22%2C%22ref%22%3A%22.UKWNYwbFB-8 .like%22%2C%22channel_url%22%3A%22https%3A%2F%2Fs-static.ak.facebook.com%2Fconnect%2Fxd_arbiter.php%3Fversion%3D17%23cb%3Df13bb8c95%26origin%3Dhttps%253A%252F %252Fns2383.hostgator.com%252Ff2bf9f920%26domain%3Dns2383.hostgator.com%26relation%3Dparent.parent%22%2C%22href%22%3A%22https%3A%2F%2Fwww.facebook。com%2Fpages%2FDummy-Page-for-Testing%2F375795832160%22%2C%22node_type%22%3A%22link%22%2C%22width%22%3A%2290%22%2C%22font%22%3A%22arial% 22%2C%22layout%22%3A%22button_count%22%2C%22colorscheme%22%3A%22light%22%2C%22action%22%3A%22like%22%2C%22show_faces%22%3A%22false%22% 2C%22send%22%3A%22false%22%2C%22extended_social_context%22%3A%22false%22%2C%22ret%22%3A%22sentry%22%2C%22act%22%3A%22connect%22%7D](https://www.facebook.com/plugins/error/confirm/like?iframe_referer=https%3A%2F%2Fns2383.hostgator.com%2F~caryucla%2Fbpcontest%2FHTML%2FContestHome.php%2F&secure=true&plugin=like&return_params=%7B%22api_key%22%3A%22301719366592208%22%2C%22locale%22%3A%22en_US%22%2C%22sdk%22%3A%22joey%22%2C%22ref%22%3A%22.UKWNYwbFB-8.like%22%2C%22channel_url%22%3A%22https%3A%2F%2Fs-static.ak.facebook.com%2Fconnect%2Fxd_arbiter.php%3Fversion%3D17%23cb%3Df13bb8c95%26origin%3Dhttps%253A%252F%252Fns2383.hostgator.com%252Ff2bf9f920%26domain%3Dns2383.hostgator.com%26relation%3Dparent.parent%22%2C%22href%22%3A%22https%3A%2F%2Fwww.facebook.com%2Fpages%2FDummy-Page-for-Testing%2F375795832160%22%2C%22node_type%22%3A%22link%22%2C%22width%22%3A%2290%22%2C%22font%22%3A%22arial%22%2C%22layout%22%3A%22button_count%22%2C%22colorscheme%22%3A%22light%22%2C%22action%22%3A%22like%22%2C%22show_faces%22%3A%22false%22%2C%22send%22%3A%22false%22%2C%22extended_social_context%22%3A%22false%22%2C%22ret%22%3A%22sentry%22%2C%22act%22%3A%22connect%22%7D)

我已经阅读了[这篇](https://stackoverflow.com/questions/13356228/like-button-confirm)关于 SO 的文章并遵循了答案，但仍然没有用。对此错误有何看法？

PS：总的来说，我对此很陌生。

这是我正在使用的示例代码：

```
 <?php  
include_once("../incs/dbcon.php");
require_once('AppInfo.php');
require_once('utils.php');
require_once('../sdk/src/facebook.php');

//This gets the signed_request from FB which checks the 'liked' status on the current page
$signed_request = $_REQUEST["signed_request"];
list($encoded_sig, $payload) = explode('.', $signed_request, 2);
$data = json_decode(base64_decode(strtr($payload, '-_', '+/')), true);
$app_data = isset($data["app_data"]) ? $data["app_data"] : '';
$_REQUEST["fb_page_id"] = $data["page"]["id"];
$access_admin = $data["page"]["admin"] == 1;
$has_liked = $data["page"]["liked"] == 1;

$facebook = new Facebook(array(
'appId'  => AppInfo::appID(),
'secret' => AppInfo::appSecret(),
));

$user_id = $facebook->getUser();
if ($user_id) {
try {
// Fetch the viewer's basic information
$basic = $facebook->api('/me');
} catch (FacebookApiException $e) {
// If the call fails we check if we still have a user. The user will be
// cleared if the error is because of an invalid accesstoken
if (!$facebook->getUser()) {
header('Location: '. AppInfo::getUrl($_SERVER['REQUEST_URI']));
exit();
}
}

// This fetches some things that you like . 'limit=*" only returns * values.
// To see the format of the data you are retrieving, use the "Graph API
// Explorer" which is at https://developers.facebook.com/tools/explorer/
$likes = idx($facebook->api('/me/likes?limit=4'), 'data', array());

// This fetches 4 of your friends.
$friends = idx($facebook->api('/me/friends?limit=4'), 'data', array());

// And this returns 16 of your photos.
$photos = idx($facebook->api('/me/photos?limit=16'), 'data', array());

// Here is an example of a FQL call that fetches all of your friends that are
// using this app
$app_using_friends = $facebook->api(array(
'method' => 'fql.query',
'query' => 'SELECT uid, name FROM user WHERE uid IN(SELECT uid2 FROM friend WHERE uid1 = me()) AND is_app_user = 1'
));
}

// Fetch the basic info of the app that they are using
$app_info = $facebook->api('/'. AppInfo::appID());

$app_name = idx($app_info, 'name', '');
?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns:fb="http://ogp.me/ns/fb#">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
<title><?php echo he($app_name); ?></title>

<head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# bpapptestbpapptest: http://ogp.me/ns/fb/bpapptestbpapptest#">
<meta property="fb:app_id" content="301719366592208" /> 
<meta property="og:type"   content="bpapptestbpapptest:video" /> 
<meta property="og:url"    content="Put your own URL to the object here" /> 
<meta property="og:title"  content="Sample Video" /> 
<meta property="og:image"  content="https://ns2383.hostgator.com/~caryucla/bpcontest/Images/BPIcon.png" />      

<head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# object: http://ogp.me/ns/object#">
<meta property="fb:app_id" content="301719366592208" /> 
<meta property="og:type"   content="object" /> 
<meta property="og:url"    content="Put your own URL to the object here" /> 
<meta property="og:title"  content="Sample Object" /> 
<meta property="og:image"  content="https://ns2383.hostgator.com/~caryucla/bpcontest/Images/BPIcon.png" /> 
<link href="https://ns2383.hostgator.com/~caryucla/bpcontest/CSS/style.css" rel="stylesheet" type="text/css">
<script type="text/javascript">
function logResponse(response) {
if (console && console.log) {
console.log('The response was', response);
}
}

$(function(){
// Set up so we handle click on the buttons
$('#postToWall').click(function() {
FB.ui(
{
method : 'feed',
link   : $(this).attr('data-url')
},
function (response) {
// If response is null the user canceled the dialog
if (response != null) {
logResponse(response);
}
}
);
});

$('#sendToFriends').click(function() {
FB.ui(
{
method : 'send',
link   : $(this).attr('data-url')
},
function (response) {
// If response is null the user canceled the dialog
if (response != null) {
logResponse(response);
}
}
);
});

$('#sendRequest').click(function() {
FB.ui(
{
method  : 'apprequests',
message : $(this).attr('data-message')
},
function (response) {
// If response is null the user canceled the dialog
if (response != null) {
logResponse(response);
}
}
);
});
});
</script>
<script src="http://code.jquery.com/ui/1.9.1/jquery-ui.js"></script>
<script type="text/javascript">
window.fbAsyncInit = function() {
FB.init({
appId      : '301719366592208', // App ID
channelUrl : '  https://ns2383.hostgator.com/~caryucla/bpcontest/HTML/channel.html', // Channel File
status     : true, // check login status
cookie     : true, // enable cookies to allow the server to access the session
oauth        : true,
xfbml      : true // parse XFBML
});

// Listen to the auth.login which will be called when the user logs in using the Login button
//FB.Event.subscribe('auth.login', function(response) {
// We want to reload the page now so PHP can read the cookie that the
// Javascript SDK sat. But we don't want to use
// window.location.reload() because if this is in a canvas there was a
// post made to this page and a reload will trigger a message to the
// user asking if they want to send data again.
//window.location = window.location;});
//FB.Canvas.setAutoGrow();

FB.Event.subscribe('auth.authResponseChange', function(response) {
alert('The status of the session is: ' + response.status);});
};
</script>

<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=301719366592208";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>

<link rel="stylesheet" href="https://ns2383.hostgator.com/~caryucla/bpcontest/CSS/jquery-ui.css" /><!--http://code.jquery.com/ui/1.9.1/themes/base/jquery-ui.css-->
<script src="https://ns2383.hostgator.com/~caryucla/bpcontest/javascript/jquery-1.8.2.js"></script><!--http://code.jquery.com/jquery-1.8.2.js-->

<script src="https://ns2383.hostgator.com/~caryucla/bpcontest/javascript/jquery-ui.js"></script><!--http://code.jquery.com/ui/1.9.1/jquery-ui.js-->
<script src="https://ns2383.hostgator.com/~caryucla/bpcontest/javascript/jquery.bgiframe-2.1.2.js"></script>
<link rel="stylesheet" href="/resources/demos/style.css" />
<script>
    FB.Event.subscribe('edge.create',
    function(response) {
        $(function onclick() {
        $( "#dialog-confirm" ).dialog({
            resizable: false,
            height:250,
            modal: true,
            buttons: {
                "Register?": function() {
                 window.location="https://ns2383.hostgator.com/~caryucla/bpcontest/HTML/RegForm.php"; 
                    $( this ).dialog( "close" );
                },
                Cancel: function() {
                    $( this ).dialog( "close" );
                }
            }
        });
    });
    }
);      
    </script>
</head>

<body>
<div id="Content">

<div id="header">
<div id="LogoDiv">
<img id="logo" src="  https://ns2383.hostgator.com/~caryucla/bpcontest/Images/Bp logo.png"></div><!--end of LogoDiv-->

<div id="LogoTextDiv">
<p id="LogoText">Fashion & Compassion Contest</p></div><!--end of LogoTextDiv-->
</div><!--end of header-->

<div id="DummyRow1"></div><!--end of DummyRow-->

<div id="BGForm">

<div id="Home">
<div id="Welcome">
<h1 id="WelcomeText">Welcome to Banana Peel's Fashion and Compassion Contest App!</h1>
</div><!--end of Welcome-->

<div id="HomeMechanics">
<h2>Contest Mechanics:</h2>

<div id="FBLogIn" class="fb-login-button" data-show-faces="true" data-width="200" data-max-rows="1" autologoutlink="true" onlogin="OnRequestPermission();"></div><!--end of FBLogIn div-->

<p id="Mec">To join the contest, Participants must first Log In through Facebook and LIKE Banana Peel's Facebook Fan Page. After liking the page you will be able to click the registration link button.</p>

<div id="LikeBox"> 
<div class="addthis_toolbox addthis_default_style ">
<a class="addthis_button_facebook_like" fb:like:layout="button_count" addthis:url="https://www.facebook.com/pages/Dummy-Page-for-Testing/375795832160" addthis:title="Banana Peel Page" onclick="onclick()"></a>
<a class="addthis_button_tweet"></a>
<a class="addthis_button_pinterest_pinit"></a>
<a class="addthis_counter addthis_pill_style"></a>
</div> 
<div id="dialog-confirm">
<p><span class="ui-icon ui-icon-alert" style="float:left; margin: 0 7px 20px 0;"></span>Thank you for liking our page!</p>
</div><!--end of dialog-confirm div--><!--end of class addthis_toolbox addthis_default_style-->
<script type="text/javascript" src="https://ns2383.hostgator.com/~caryucla/bpcontest/javascript/addthis_widget.js"></script>
</div><!--end of LikeBoxhttp://s7.addthis.com/js/300/addthis_widget.js#pubid=xa-50a0584951afe01c--> 
</div><!--end of HomeMechanics-->

<div id="ContestantsBG">
<img src="https://ns2383.hostgator.com/~caryucla/bpcontest/Images/BPpic.jpg"/>
</div><!--end of ContestantBG-->

<div id="GalleryButton">
<a id="BackLink" href="../HTML/ContestantGallery.php"><input type="button" value="VIEW GALLERY OF CONTESTANTS"></a>
</div><!--end of GalleryButton-->

</div><!--end of Home-->
</div><!--end of BGForm-->

</div><!--end of Content-->

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-05T16:32:33.357

这条消息是 Facebook 用来阻止 Like-jacking 和防止垃圾邮件的。如果“赞”按钮首次添加到网站/域，它也会出现。给它一点时间，一旦 Facebook 确信您的网站没有执行上述任何操作，该消息就会消失。

# apache - 将 https://www.subdomain.domain.com/ 重定向到 https://subdomain.domain.com

> ID：13408891
> 
> 赞同：0
> 
> 时间：2012-11-16T01:00:10.123
> 
> 标签：apache, .htaccess, mod-rewrite

我想将 https://www.subdomain.domain.com/ 重定向[到](https://www.subdomain.domain.com/)https://subdomain.domain.com [，](https://subdomain.domain.com)我们已将其包含在 htaccess 文件中，但它不起作用：

```
RewriteCond %{HTTPS_HOST} ^www\.([^.]+)\.domian\.com$
RewriteRule ^(.*)$ https:// %1.domian.com/$1 [L,R] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T01:04:42.933

这会将所有 https 和 www 重定向到非 www 等效项：

```
RewriteCond %{HTTPS}=on
RewriteCond %{HTTP_HOST} ^www\.(.+)$ [NC]
RewriteRule ^ https://%1%{REQUEST_URI} [R,L] 
```

# c# - 数据集和自引用关系插入异常

> ID：13408892
> 
> 赞同：1
> 
> 时间：2012-11-16T01:00:23.787
> 
> 标签：c#, sql, sql-server, dataset, foreign-keys

我正在使用带有 MSSQL 后端的 c# 数据集。我有一个引用自身的表。当我添加一个父行然后添加一个子行时，没有在两者之间调用更新，我得到一个约束异常。我认为这是因为插入的执行顺序与添加实体的顺序不同。有没有办法解决这个问题？我希望用户能够添加项目，然后在最后提交到数据库（当他们确认一切正确时）。

这是我的表定义和示例应用程序：

```
CREATE TABLE [dbo].[AssetServiceItems] (
    [ServiceItemID] [int] IDENTITY(1, 1) NOT NULL,
    [Description] [nvarchar](50) NOT NULL,
    [Parent] [int] NULL,
    CONSTRAINT [PK_AssetServiceItems] PRIMARY KEY CLUSTERED ([ServiceItemID] ASC) WITH (
        PAD_INDEX = OFF,
        STATISTICS_NORECOMPUTE = OFF,
        IGNORE_DUP_KEY = OFF,
        ALLOW_ROW_LOCKS = ON,
        ALLOW_PAGE_LOCKS = ON
        ) ON [PRIMARY]
    ) ON [PRIMARY]

ALTER TABLE [dbo].[AssetServiceItems]
    WITH CHECK ADD CONSTRAINT [AssetServiceItems_parent] FOREIGN KEY ([Parent]) REFERENCES [dbo].[AssetServiceItems]([ServiceItemID])

ALTER TABLE [dbo].[AssetServiceItems] CHECK CONSTRAINT [AssetServiceItems_parent] 
```

和程序...

```
public static void Main(string[] args)
{

  RelTestTableAdapters.AssetServiceItemsTableAdapter adapter = new RelTestTableAdapters.AssetServiceItemsTableAdapter();
  RelTest dataSet = new RelTest();

  var parent =  dataSet.AssetServiceItems.NewAssetServiceItemsRow();
  parent.Description = "Parent";
  dataSet.AssetServiceItems.AddAssetServiceItemsRow(parent);

  var child = dataSet.AssetServiceItems.NewAssetServiceItemsRow();
  child.Description = "child";
  child.SetParentRow(parent);
  dataSet.AssetServiceItems.AddAssetServiceItemsRow(child);

  adapter.Update(dataSet);

    Console.ReadKey(true);
} 
```

> INSERT 语句与 FOREIGN KEY SAME TABLE 约束“AssetServiceItems_parent”冲突。冲突发生在数据库“RelTest”、表“dbo.AssetServiceItems”、列“ServiceItemID”中。

# ruby-on-rails - 主机名与服务器证书不匹配 - 无法发送电子邮件

> ID：13408898
> 
> 赞同：8
> 
> 时间：2012-11-16T01:01:34.123
> 
> 标签：ruby-on-rails, email, pony

我正在使用 Pony 邮件发送电子邮件（因为我永远无法让 ActionMailer 在我的本地 Windows 机器上工作）。

我的 user_mailer.rb 文件中的代码包括对 Pony.mail 方法的调用：

```
Pony.mail({
  :to => email_address, 
  :from => 'MyChairSales <support@mychairsales.com>', 
  :subject => subject, 
  :body => email_body, 
  :html_body => html_body,
  :via => :smtp,
  :via_options => {
    :address              => 'mail.mychairsales.com',
    :port                 => '25',
    :enable_starttls_auto => true,
    :user_name            => 'mychairs',
    :password             => 'thepassword',
    :domain               => "mychairsales.com" # the HELO domain provided by the client to the server
  } 
 }) 
```

这有效（我已使用此方法收到电子邮件），但现在失败并出现错误“主机名与服务器证书不匹配”。

这是堆栈跟踪的顶部：

```
["/usr/lib64/ruby/1.9.3/openssl/ssl-internal.rb:121:in `post_connection_check'",
"/usr/lib64/ruby/1.9.3/net/smtp.rb:585:in `tlsconnect'", "/usr/lib64/ruby/1.9.3
/net/smtp.rb:560:in `do_start'", "/usr/lib64/ruby/1.9.3/net/smtp.rb:519:in `start'", 
"/home4/mychairs/ruby/gems/gems/mail-2.4.4/lib/mail/network/delivery_methods
/smtp.rb:144:in `deliver!'", "/home4/mychairs/ruby/gems/gems/mail-2.4.4/lib
/mail/message.rb:245:in `deliver!'", "/home4/mychairs/ruby/gems/gems/pony-1.4/lib
/pony.rb:166:in `deliver'", "/home4/mychairs/ruby/gems/gems/pony-1.4/lib
/pony.rb:138:in `mail'", "/home4/mychairs/rails_apps/chairsales/app/mailers
/user_mailer.rb:32:in `send_mail'", "/home4/mychairs/rails_apps/chairsales/app/mailers
/user_mailer.rb:23:in `send_password_reset_email'",... 
```

任何指导将不胜感激！

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-10T20:18:58.340

有点晚了，但我也遇到了这个错误，但是使用了 Ruby Mail gem。如果您的 SMTP 服务器支持 TLS，它将尝试使用 TLS 并验证 SSL 证书。如果证书是为使用的主机名以外的主机名颁发的，或者如果证书无法通过身份验证（例如，如果它是自签名的并且您不信任 CA），那么它将失败并出现错误“主机名不匹配服务器证书”。

要绕过它，请使用 :openssl_verify_mode 选项。这可以设置为 OpenSSL::SSL::VERIFY_NONE 以不验证证书 - 但它仍会加密 SMTP 会话。或者 OpenSSL 库中还有其他可用选项。

使用您的示例，它将是：

```
Pony.mail({
  :to => email_address, 
  :from => 'MyChairSales <support@mychairsales.com>', 
  :subject => subject, 
  :body => email_body, 
  :html_body => html_body,
  :via => :smtp,
  :via_options => {
    :openssl_verify_mode => OpenSSL::SSL::VERIFY_NONE, 
    :address              => 'mail.mychairsales.com',
    :port                 => '25',
    :enable_starttls_auto => true,
    :user_name            => 'mychairs',
    :password             => 'thepassword',
    :domain               => "mychairsales.com" # the HELO domain provided by the client to the server
  } 
 }) 
```

这也适用于 Mail gem。

# python - 无法更改 StackedWidget 内的小部件

> ID：13408910
> 
> 赞同：-1
> 
> 时间：2012-11-16T01:03:30.610
> 
> 标签：python, qt, widget, pyqt

我正在尝试将一个小部件替换为另一个小部件。我正在使用 StackedWidget。我有以下。

首先，我注册添加一些小部件到 StackedWidget：

```
 self.stackedWidget.addWidget(w1)
    self.stackedWidget.addWidget(w2)
    self.stackedWidget.addWidget(w3) 
```

我绑定了w1的一个按钮的点击：

```
 QObject.connect(w1.pushButton,SIGNAL("clicked()"),self.stackedWidget,SLOT(self.stackedWidget.setCurrentWidget(w2))) 
```

对于插槽，我也尝试过“setCurrentIndex”。我检查了是否收到信号，没问题。

最后，我展示了 w1。

```
self.stackedWidget.setCurrentWidget(w1) 
```

尽管按下 w1 的按钮时会收到“clicked()”信号，但小部件 w2 从未出现在 StackedWidget 中。

更新：

我在做

```
 QObject.connect(w1.pushButton,SIGNAL("clicked()"),self.stackedWidget,SLOT('w1Clicked()')) 
```

按照建议；但是，我得到

```
Object::connect: No such slot QStackedWidget::w1Clicked()
Object::connect:  (sender name:   'pushButton')
Object::connect:  (receiver name: 'stackedWidget') 
```

我想我必须以某种方式创建插槽“w1Clicked”，但我正在使用我无法弄清楚的设计器。

我有一个带有 StackedWidget 的主窗口和带有按钮的单独表单，所以我看不到如何建立连接或创建插槽。

另外，我发现我的做法存在问题：

```
 QObject.connect(w1.pushButton,SIGNAL("clicked()"),self.stackedWidget,SLOT(self.stackedWidget.setCurrentWidget(w2))) 
```

是“self.stackedWidget.setCurrentWidget(w2)”立即执行，它不等待信号！这就是 w2 从未显示的原因。

我还是不知道。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T01:29:24.190

你的`connect`电话是错误的。当您建立连接时，您无法定义将哪些值传递给您的插槽。相反，您需要创建自己的插槽并根据需要处理信号（如果我的 python 语法关闭，请道歉）：

```
QObject.connect(w1.pushButton,SIGNAL("clicked()"),self,SLOT("w1Clicked()"))

def w1Clicked(self):
    self.stackedWidget.setCurrentWidget(w2) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T14:37:07.443

最后，它以这种方式工作：

```
w1.pushButton.clicked.connect(self.w1Clicked) 
```

至少接收到信号并正确调用方法。

# css - 更改moodle的聊天模块css

> ID：13408912
> 
> 赞同：0
> 
> 时间：2012-11-16T01:03:54.543
> 
> 标签：css, moodle

我最近刚在一个使用moodle的地方开始工作。他们有一个他们已经实施的主题。但是，在气泡主题下的聊天室中，消息 div 周围有一个轻微的灰色边框。我可以在 chrome 中打开它，并且可以关闭一些与 td、th 相关的 css，然后它们就会消失，但我似乎无法弄清楚在我的文件结构中覆盖 css 的位置。我已经成功覆盖了网站其他部分的一些 css，但聊天模块似乎没有加载到我的一些 css 中。我正在使用 Moodle 2.3 。如果这很重要，请在 LAMP 上。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T16:55:35.477

我们遇到了同样的问题，但使用了正式的白色主题。解决方案是编辑文件“\theme\formal_white\layout\embedded.php”。

# facebook - 发布链接出现在我的墙上，但不是我的新闻提要

> ID：13408916
> 
> 赞同：0
> 
> 时间：2012-11-16T01:04:27.067
> 
> 标签：facebook, facebook-graph-api, hyperlink

我正在尝试发布指向我的新闻提要的链接，尽管目前它只出现在我的墙上。它确实出现在我想要的朋友的新闻提要中，只是没有显示在我的新闻提要中。

我已经尝试向我/提要和我/链接发布

我指定的字段是消息和链接，其中消息只是一些文本，例如“测试”，链接是指向我要共享的页面的链接。

我已经让它出现在我的新闻提要中几次，但在随后的帖子中它不再出现。有没有人有一些关于可能发生的事情或需要测试的信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T01:49:07.530

也许这与他们在共享方面所做的改变有关。他们插入了隐式/显式共享的概念。

请看[这里](https://developers.facebook.com/docs/opengraph/explicit_sharing/)

# javascript - jQuery - 悬停时定位以前的（相同的）div？

> ID：13408917
> 
> 赞同：0
> 
> 时间：2012-11-16T01:04:34.057
> 
> 标签：javascript, jquery

我连续有5个div。他们在页面加载时都有 1 个背景。我想改变悬停的div的BG，以及之前所有相同的div。我不知道该怎么做

```
div { style="background: url(images/red)"}

<div class="myDiv">One</div>
<div class="myDiv">Two<div>
<div class="myDiv">Three</div>
<div class="myDiv">Four</div>
<div class="myDiv">Five</div> 
```

所以当上面的 div 3 悬停时，我希望 div ONE、TWO 和 THREE 有蓝色背景。

如果我这样做了

```
$('.myDiv').hover(function(){
    $(this).prev('.myDiv').css({...});
}); 
```

它只会影响前一个。谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T01:06:35.237

这是Javascript：

```
$('.myDiv').hover(function(){
    $(this).prevAll('.myDiv').andSelf().css({...});
}); 
```

而且您的标记也有错误，第二个 div 没有关闭。：

```
<div class="myDiv">One</div>
<div class="myDiv">Two</div>
<div class="myDiv">Three</div>
<div class="myDiv">Four</div>
<div class="myDiv">Five</div> 
```

工作示例：http: [//jsfiddle.net/snynL/](http://jsfiddle.net/snynL/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T01:29:19.793

kmb385 有正确的答案...要解释他的答案，您可以取消设置 mouseout 的背景。

[**小提琴**](http://jsfiddle.net/videsignz/snynL/2/)

```
$('.myDiv').on({
    mouseover: function(){
    $(this).prevAll().andSelf().css("background", "red");
    },
    mouseout: function(){
    $('.myDiv').css("background", "");
    }
}); 
```

# python - 按任意键排序元组列表

> ID：13408919
> 
> 赞同：10
> 
> 时间：2012-11-16T01:04:45.210
> 
> 标签：python

```
order = ['w','x','a','z']
[(object,'a'),(object,'x'),(object,'z'),(object,'a'),(object,'w')] 
```

如何根据'order'提供的键列表按第二个元素对上述元组列表进行排序？

2013 年 11 月 18 日更新：

我发现了一个更好的方法来解决这个问题的变体，其中键肯定是唯一的，在这个问题中有详细说明：[Python: using a dict to speed sort of a list of tuples](https://stackoverflow.com/questions/20059427/python-using-a-dict-to-speed-sorting-of-a-list-of-tuples)。

我上面的问题不太适用，因为给定的元组列表有两个元组，其键值为`'a'`.

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-16T01:08:41.443

您可以使用`sorted`, 并给出一个函数，该函数返回列表`key`中每个元组的第二个值的索引。`order`

```
>>> sorted(mylist,key=lambda x: order.index(x[1]))

[('object', 'w'), ('object', 'x'), ('object', 'a'), ('object', 'a'), ('object', 'z')] 
```

请注意，只要列表中不存在元组中的值，此操作就会失败`order`。

**编辑：**

为了更安全一点，您可以使用：

```
sorted(mylist,key=lambda x: x[1] in order and order.index(x[1]) or len(order)+1) 
```

这会将列表中缺少的键的所有条目放在`order`结果列表的末尾。

# asp.net - 实例的显示项

> ID：13408923
> 
> 赞同：0
> 
> 时间：2012-11-16T01:05:15.180
> 
> 标签：asp.net, instance

我通过从我的数据库中检索数据来创建类型竞争的实例。函数 selectCompetitionById 返回一行数据。

```
Competition competition = BLLc.selectCompetitionById(competitionId); 
```

如何在我的页面上显示此实例的项目？（中继器不工作）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T01:14:22.037

如果您想创建一个自动生成的表单，那么您可以使用[`DetailsView`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.detailsview.aspx)：

```
<asp:DetailsView ID="competitionDetails" RunAt="Server" AutoGenerateColumns="true" /> 
```

创建一个虚拟数组（只有一项）作为数据源：

```
competitionDetails.DataSource = new Competition[] { competition }; 
```

* * *

另一种方法是使用引用您的对象的标准 HTML 模板。首先使其成为页面的属性：

```
<script runat="Server">
    public Competition competition { get; set; }

    void Page_Load()
    {
        competition = BLLc.selectCompetitionById(competitionId);;
        this.DataBind();
    }
</script> 
```

然后根据需要在标记中引用它：

```
<div>
    <span>Title</span>
</div>
<div>
    <span><%# competition.Title %></span>
</div>
<div> etc ... </div> 
```

# php - 如何判断整个文件是否已使用 stream_copy_to_stream 下载？

> ID：13408925
> 
> 赞同：0
> 
> 时间：2012-11-16T01:05:30.887
> 
> 标签：php, sockets

[http://php.net/stream_copy_to_stream](http://php.net/stream_copy_to_stream) `$maxlength`参数允许限制要复制的字节数。

如何判断是否违反了限制，即。不是整个文件都下载了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T01:10:29.610

关于 Yousuf Memon 的评论 (http://mattgemmell.com/2008/12/08/what-have-you-tried/)，我解决这个问题的方法很简单：

```
public function download($size_limit)
{
    if($this->temp_file)
    {
        throw new UploadRemoteImageException('Resource has been downloaded already.');
    }

    $this->temp_file    = tempnam(sys_get_temp_dir(), $this->temp_file_prefix);

    $src    = fopen($this->url, 'r');
    $dest   = fopen($this->temp_file, 'w+');

    stream_copy_to_stream($src, $dest, $size_limit+1000);

    if(filesize($dest) > $size_limit)
    {
        // The file size limit has been breached.
    }

    // [..]
} 
```

这可以通过在用户定义的限制之上简单地添加更多字节来实现。然后当流关闭时，它会检查文件是否大于用户定义的大小限制（这可能是因为我们在顶部添加了 1000 字节）。

但是，我无法确定这是否总是有效，因为我认为它也取决于块大小。

# android - CAB“检查”按钮

> ID：13408929
> 
> 赞同：2
> 
> 时间：2012-11-16T01:06:18.857
> 
> 标签：android, android-actionbar, android-menu

我们如何处理 CAB 菜单中的检查按钮？

该项目是否与某个内部 id（如 android.R.id.checkbox）相关联？

我读过它可以在 SherlockActionBar CAB 中处理，但它可以与本机 ActionBar CAB 相同吗？

有没有办法检测这个项目的交互？**onActionModeFinished()**是不够的，因为我多次调用它，因为之前发生的更改需要 CAB 存在。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T21:39:54.443

好的，在尝试了一些事情后终于找到了解决方案。在下面的方法中放置您想要的复选框或onbackpressed代码

```
 public void onDestroyActionMode(ActionMode mode) 
{
     //place the code you want for the checkbox or back icon here.  If you don't want
     // this code run if other selections are used, then just create a boolean value that
    //you earlier on and check the value in this section before implementing the code
} 
```

};

# dropbox - 如何从 Dropbox 选择器获取文件的直接链接

> ID：13408932
> 
> 赞同：3
> 
> 时间：2012-11-16T01:06:34.403
> 
> 标签：dropbox

在[Dropbox Chooser 的文档中，](https://www.dropbox.com/developers/chooser)我们可以从 获取分享页面 url `files[0].link`，但我们需要直接下载链接。我如何得到它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T01:06:34.403

我在[论坛](https://forums.dropbox.com/topic.php?id=93129#post-511071)中找到了解决方案。

为 Dropbox 选择器按钮添加`data-link-type="direct"`了属性。

```
<input type="dropbox-chooser" name="selected-file" data-link-type="direct" style="visibility:hidden"/> 
```

# ios - MPMoviePlayerNotification 播放进度通知？

> ID：13408934
> 
> 赞同：0
> 
> 时间：2012-11-16T01:06:38.837
> 
> 标签：ios, mpmovieplayercontroller

是否有到达 MPMoviePlayerController 中某个点的通知？

类似于 MPMoviePlayerPlaybackDidFinishNotification 的东西，但进度在 0.0 和 1.0 之间而不是 1.0（视频结尾）

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T11:04:24.400

不，MediaPlayer 框架内没有这样的东西。

您将需要实例化一个定期检查当前播放位置的计时器。

# php - 如何将 android 客户端连接到笔记本电脑内的 Apache 服务器 (php) 的 localhost？

> ID：13408935
> 
> 赞同：9
> 
> 时间：2012-11-16T01:06:53.367
> 
> 标签：php, android, apache, client-server, xampp

我正在尝试创建能够通过 wifi 连接将数据发送到我的笔记本电脑 Apache 服务器和 MySQL 数据库的 android 应用程序。我使用三星 Galaxy Tab 10.1 作为我的移动设备。我使用的协议是 HttpGet 或 HttpPost。我使用 XAMPP（与 Apache 和 SQL）来做服务器和处理 php。但是，由于 android 无法从笔记本电脑检测到 adhoc 网络，我使用虚拟路由器（用于窗口 7）来创建虚拟接入点并使平板电脑能够连接到我的笔记本电脑。但问题是：

1.  在我的应用程序（client-android）中，httpget 或 httppost 指向哪个 url？我的笔记本电脑中的 localhost - 127.0.0.1 或 android 10.0.0.1 中的 localhost？还是虚拟路由器的IP地址？

2.  那么，如果我想从 android 访问 localhost(laptop-Apache) 来调用 php 运行？哪个港口？我需要在 android 应用程序（httpget）中放入哪个 IP 地址/url？我需要为 XAMPP 修改 httpconfig 中的任何内容吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T03:49:15.520

使用 ipconfig 在您的笔记本电脑中找出您的 IP 地址。在电话中使用该地址而不是 127.0.0.1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-24T22:35:45.753

只要您知道上面装有 Apache 的计算机的 IP 地址，由于外部 MySQL 访问设置 id 非常棘手，因此建议将 JSON 请求发送到您的 PHP 脚本并通过 Java 获取返回值，那么您想用输出由你决定。

# php - PHP PCRE 匹配文本“块”

> ID：13408937
> 
> 赞同：0
> 
> 时间：2012-11-16T01:07:56.387
> 
> 标签：php, regex

我有一个 PHP 应用程序，它应该解析上传的文本文件，其格式类似于：

```
|                  |                |                  |
| -----------------------------------------------------|
| Sample           | Data           |                  |
| -----------------------------------------------------|
| Sample           | Data           |                  |
| -----------------------------------------------------|
| Sample           | Data           |                  |
| -----------------------------------------------------|

| Accepts                    |                            |
| --------------------------------------------------------|
| All                        | Yes                        |
| --------------------------------------------------------|
| More                       | Yes                        |
| --------------------------------------------------------|

|            |            | Years      |            |            |
| ---------------------------------------------------------------|
| 1998       | 1999       | 2000       | 2001       | 2002       |
| ---------------------------------------------------------------|
| 2003       | 2004       | 2005       | 2006       | 2007       |
| ---------------------------------------------------------------|
| 2008       | 2009       | 2010       | 2011       | 2012       |
| ---------------------------------------------------------------| 
```

我需要做的基本上是以相同的顺序单独隔离每个“块”，这样我就可以一个一个地循环它们。一个“解决方案”可能正在做

```
preg_split("/\n{4,}/", $text); 
```

但是，如果提交文本的人认为不必要的换行符不属于并删除它们，那么这将产生意想不到的结果。我尝试使用 preg_match_all()，但是自从我做任何真正的正则表达式以来已经有好几年了，所以我想不出一个可用的解决方案。

“块”的第一行总是包含 | 和空格，但字段可能包含文本。“块”的最后一行始终是一个管道，后跟一个空格，用破折号填充行，以 | 结尾。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T01:52:41.473

要匹配可选的换行符，请尝试使用`'/\n(\n{1,})?/'`. 这匹配第一个换行符，然后匹配任何附加行（如果存在）。

考虑到这一点，您的答案将是：

`preg_split("/\n(\n{1,})?/", $text)`.

这将用换行符分割文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T01:53:13.043

您的问题无法解决，因为您没有可靠的方法来区分块的法线与块的第一行或最后一行。

我完全[赞成稳健性原则](http://en.wikipedia.org/wiki/Robustness_principle)，但这是您只需要训练您的用户不要破坏数据的情况之一。您不能接受来自用户任意删除逗号的 CSV 格式数据，这里的场景基本相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T02:48:36.413

如果这是文本文件内容的样子，我会写类似

```
$pat = '~
    (?<=^|\r{3}|\n{3}|(\r\n){3})    # beginning of string or following 3 newline chars
        \|[ ]                       # a pipe and a space
        (
            [ \S]+                      # 1 or more space or non space char
            \|                          # a pipe
        )+                          # 1 or more of this group

        (\n|\r\n?)                  # a newline
        \|[ ]-+\|                   # a pipe, a space, multiple dashes and a pipe
        (\n|\r\n?)                  # a newline
        .*?                         # anything between newlines above and below
        (\n|\r\n?)                  # a newline
        \|[ ]-+\|                   # a pipe, a space, multiple dashes and a pipe
    (?=$|\r{3}|\n{3}|(\r\n){3})     # end of string or followed by 3 newline chars
~sx';
preg_match_all($pat,$str,$res);
$blocks = $res[0];
print_r($blocks); 
```

不过，我不确定这是否是最优雅甚至最可靠的方式，因为很难猜测内容到底是什么样子。

# windows - 如何在 C++/Cx 和 XAML 中创建和使用 AttachedProperty？

> ID：13408938
> 
> 赞同：0
> 
> 时间：2012-11-16T01:07:56.023
> 
> 标签：windows, xaml, visual-c++, dependency-properties, c++-cx

我想在我的 C++/Cx WinRT 项目中创建一个附加属性。当我这样做时，XAML 编译器会抱怨我正在使用未知属性。

我在 cpp 文件中声明我的附加属性：

```
/*--------------------------------------------------------------------
    Forward Declarations
--------------------------------------------------------------------*/
namespace
{
    void
    StateChanged(
        DependencyObject^ target,
        DependencyPropertyChangedEventArgs^ args);
}

/*--------------------------------------------------------------------
    DependancyProperty setup for the view model
--------------------------------------------------------------------*/
namespace
{
DependencyProperty^ _stateProperty =
    DependencyProperty::RegisterAttached(
        "State",
        TypeName(Platform::String::typeid),
        TypeName(VisualStateManagerBindingHelper::typeid),
        ref new PropertyMetadata(nullptr, ref new PropertyChangedCallback(&StateChanged)));
}

namespace
{
    void
    StateChanged(
        DependencyObject^ target,
        DependencyPropertyChangedEventArgs^ args)
    {
        if (args->NewValue != nullptr)
        {
            VisualStateManager::GoToState(safe_cast<Control^>(target), safe_cast<String^>(args->NewValue), true);
        }
    }
} 
```

在我的 XAML 文件中，我尝试使用附加的属性：

```
<UserControl
    xmlns:local="using:MyCustomNamespace"
    ...

    <Grid Grid.Column="1" local:VisualStateManagerBindingHelper.State="{Binding Path=SomeViewModelProperty, Mode=TwoWay}">
        ... 
```

当我编译时，我遇到了这个错误：

**XamlCompiler 错误 WMC0010：元素“网格”上的未知可附加成员“VisualStateManagerBindingHelper.State”**

在我看来，好像 XAML 编译器应该在某处获得允许此附加属性的提示，但我不知道如何给出该提示。[这篇](http://blogs.msdn.com/b/bencon/archive/2006/07/24/677520.aspx)关于同一主题的文章建议 DependancyProperty 应该是公开的。我不完全确定如何在 C++ 中做到这一点。

我的最终目标是将视觉状态组的状态绑定到某个视图模型属性。[此问题](https://stackoverflow.com/questions/6002046/binding-visualstatemanager-view-state-to-a-mvvm-viewmodel/6002107#comment18302395_6002107)的已接受答案中概述了执行此操作的方法。不幸的是，那里提供的代码是 C#，我似乎无法正确地将其转换为 C++。

最后，我注意到 Visual Studio 的新项目模板附带的 SuspensionManager 几乎和我一样定义了一个附加属性，但它们没有显示任何使用它的示例。这让我觉得自己走上了正轨，但错过了一小部分拼图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T06:51:38.787

我找到了一个回答我问题的网站！正如我所怀疑的，您需要以非常特定的方式定义您的类，以便 XAML 预处理器了解您的附加属性。[此处](http://msdn.microsoft.com/en-us/library/windows/apps/hh965327.aspx)提供了所有要求以及代码示例。

# jquery - 如何在 Meteor 框架中安全地使用 jQuery UI 小部件？

> ID：13408940
> 
> 赞同：4
> 
> 时间：2012-11-16T01:08:36.403
> 
> 标签：jquery, jquery-ui, meteor, jquery-droppable, jquery-draggable

jQuery UI 还不是 Meteor 的“包”，即使它最终成为一个“包”，也会有更新的 jQuery 和 jQuery UI 版本，以及其他可能想要与 Meteor 一起使用的 jQuery 插件。会出现各种各样的问题：

1.  通过标签加载`<script>`，或者将js文件放在客户端或根目录中？
2.  如果从 CDN 采购脚本有什么问题吗？最好在本地存储（例如在“公共”目录中）？
3.  由于`$(document).ready()`可能在渲染模板之前调用，那么调用通常可能从 .ready() 调用的各种设置函数的最佳位置在哪里？是否应该调用它们`Templates.<Name>.rendered`，以便如果在模板渲染期间 DOM 发生变化，各种事件处理程序将重新附加到新的 DOM 节点？这是否会导致旧处理程序的内存泄漏，这些处理程序仍然存在以处理已从 DOM 中删除的虚拟节点？
4.  如果您尝试基于来自 jQuery UI 小部件的事件回调来更改模型数据（并且 Meteor 模板事件本身不支持该事件，例如“click”或“dblclick”），那么识别在回调期间与相关小部件关联的集合数据？您是否应该在 Template..rendered 期间将对象的 _id 加载到 DOM 中，然后在关联的 jQuery UI 事件处理程序期间将其读回？还有其他方法吗？

请注意[，根据这个问题，问题自 0.5.0 以来](https://stackoverflow.com/questions/10453291/how-to-trigger-jquery-draggable-on-elements-created-by-templates)发生了变化，因此一些现有的类似 StackOverflow 问题可能已过时（[也](https://stackoverflow.com/questions/10618159/how-to-properly-bind-jquery-ui-behaviors-in-meteor)，[也](https://stackoverflow.com/questions/10453291/how-to-trigger-jquery-draggable-on-elements-created-by-templates)，[也](https://stackoverflow.com/questions/10573789/is-there-something-strange-about-the-way-meteor-loads-jquery)）。

如果一个例子可以帮助你回答，这里是一个工作（？）Meteor 项目，它集成了 jQuery Draggable 和 Droppable： [http](http://products-jqueryui.meteor.com/) ://products-jqueryui.meteor.com/ 与[Source Here](https://github.com/jpeskin/products-jqueryui) 基于[Tutorial Here](http://net.tutsplus.com/tutorials/javascript-ajax/whats-this-meteor-thing/)

（在我的问题中“安全地”，我的意思是不会在 Meteor 框架中造成破坏性错误（或导致 Meteor 破坏 jQuery/jQuery UI），并且尽可能高效：避免过度的 DOM 操作/渲染，过多的客户端/服务器流量，或导致内存泄漏。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T21:17:43.327

1.  将它们放在 /client 文件夹中。任何 javascript 文件都将由 Meteor 自动加载，并且在 Meteor.startup 发生时应该可用。
2.  请参阅我对问题 1 的回答。
3.  使用 Meteor.startup 而不是 $(document).ready()，因为当 Meteor 和文档准备好时会调用它。如果要执行模板所依赖的逻辑，请使用 Template.rendered，因为每次 Meteor 触及模板时，您都需要重新执行逻辑。
4.  在回调中，`this`将引用当前对象。

# sql-server - 存储过程会导致内存泄漏吗？

> ID：13408945
> 
> 赞同：2
> 
> 时间：2012-11-16T01:09:06.347
> 
> 标签：sql-server, stored-procedures, memory-leaks, scheduled-tasks

我们有一个 sql server 2008 盒子。在这台服务器上，我们有一个计划的作业，它调用一个打开 xml 文件并将它们加载到表中的大型存储过程。

经过一段较​​长的正常运行时间后，SQL 服务器实际上会消耗所有可用内存。（实际上页面文件几乎吃掉了所有的磁盘空间）

存储过程是否有可能泄漏内存？SSIS 包是否有可能泄漏内存？

提前致谢！！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-16T01:13:30.027

是的，如果您忘记调用[`sp_xml_removedocument`](http://msdn.microsoft.com/en-us/library/ms190353%28v=sql.105%29.aspx)（对于每个匹配项`sp_xml_preparedocument`），可能会发生内存泄漏：

> 已分析的文档存储在 SQL Server 的内部缓存中。MSXML 解析器 (Msxmlsql.dll) 使用 SQL Server 可用总内存的八分之一。为避免内存不足，请运行 sp_xml_removedocument 以释放内存。

示例用法：

```
DECLARE @xml_text VARCHAR(4000), @i INT

SELECT @xml_text = '<root>
                      ... some valid xml ... 
                    </root>'

EXEC sp_xml_preparedocument @i OUTPUT, @xml_text

....

EXEC sp_xml_removedocument @i 
```

另一种形式的内存泄漏是忘记关闭*和*释放[游标](http://msdn.microsoft.com/en-us/library/ms180169.aspx)：

```
DECLARE c CURSOR   
  LOCAL STATIC FORWARD_ONLY READ_ONLY   
  FOR SELECT ...

    ....

CLOSE c; 
DEALLOCATE c; 
```

[注意：我很少使用游标。在可能和适当的情况下，我总是尝试以基于集合的方式进行]

只是为了记录，即使我总是喜欢看到一个明确的`CLOSE`和`DEALLOCATE`用于游标：

> LOCAL 游标在创建它们的存储过程、触发器或批处理终止时被隐式释放，除非游标已作为参数传回。当调用过程的代码中引用游标的参数或变量超出范围时，将隐式释放 LOCAL 游标。 [参考](http://msdn.microsoft.com/en-us/library/ms180169.aspx)。

# math - 在不同横截面中看起来像圆形、正方形和三角形的物体？

> ID：13408946
> 
> 赞同：0
> 
> 时间：2012-11-16T01:09:09.677
> 
> 标签：math, geometry, puzzle

物体或形状的横截面必须是圆形的，从另一个方向的横截面是三角形的，从第三方向的横截面是方形的（或矩形）？知道这个物体可能是什么样子吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T01:17:14.323

像这样：http: [//i.imgur.com/5Bh6o.jpg](http://i.imgur.com/5Bh6o.jpg)

这是一些填充物，因为没有足够的字符来提交我的答案。

# php - 如何删除尾随的#！来自 YouTube ID？

> ID：13408947
> 
> 赞同：0
> 
> 时间：2012-11-16T01:09:29.107
> 
> 标签：php, regex, preg-match

我注意到我的一些用户发布的 YouTube 链接带有尾随

`#!`

例如

[http://youtu.be/VYh9cmCOL5w#](http://youtu.be/VYh9cmCOL5w#)！

但是，我当前的正则表达式并没有删除`#!`导致视频缩略图中出现许多问题的内容。

```
preg_match("#(?<=v=)[a-zA-Z0-9-]+(?=&)|(?<=v\/)[^&\n]+|(?<=v=)[^&\n]+|(?<=youtu.be/)[^&\n]+#", $url, $match); 
```

任何人都对如何修改我当前的代码以忽略`#!`?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T01:11:11.280

你可以使用[`rtrim()`](http://us2.php.net/manual/en/function.rtrim.php)：

```
$url = rtrim($url, '#!'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T01:14:11.490

正则表达式将是

```
\^\(.*?\)\#\!$/ 
```

那么替换将很简单

```
\1 
```

# perl - ($a,$b,$c) = @array 在 Perl 中是什么意思？

> ID：13408952
> 
> 赞同：4
> 
> 时间：2012-11-16T01:10:37.413
> 
> 标签：perl, syntax

如果可以的话，我会用谷歌搜索它，但老实说，我不知道要搜索什么（符号繁重的语言的固有问题）！

```
($aSvnRemote, $aSvnLocal, $aSvnRef, $aSvnOptions) = @{$aSvnPair}; 
```

我的猜测是这`$aSvnPair`是一个由 4 个值组成的数组（在这种情况下，它是一个命名非常糟糕的变量！），而这只是将其拆分为特定的变量身份......？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-16T01:18:49.473

这只不过是一个列表作业。RHS 的第一个值分配给 LHS 上的第一个 var，依此类推。这意味着

```
($aSvnRemote, $aSvnLocal, $aSvnRef, $aSvnOptions) = @{$aSvnPair}; 
```

是相同的

```
$aSvnRemote  = $aSvnPair->[0];
$aSvnLocal   = $aSvnPair->[1];
$aSvnRef     = $aSvnPair->[2];
$aSvnOptions = $aSvnPair->[3]; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-16T01:16:26.790

该变量`$aSvnPair`是对数组的引用。添加`@`印记会导致数组被引用。在这个例子中，数组被解包，它的元素被分配给右边的变量。

这是正在发生的事情的一个例子：

```
$aSvnPair= [ qw(foo bar baz xyxxy) ];

($aSvnRemote, $aSvnLocal, $aSvnRef, $aSvnOptions) = @{$aSvnPair}; 
```

执行此操作后，您将获得以下信息：

```
$aSvnRemote  = "foo";
$aSvnLocal   = "bar";
$aSvnRef     = "baz";
$aSvnOptions = "xyxxy"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T01:13:57.763

`$aSvnPair`应该是*对数组*的引用，因此`@{$aSvnPair}`取消引用它。（“引用”是指针的 Perl 等价物。）

然后，该语句将该数组的值按顺序分配给左侧的四个变量。

有关一些示例，请参阅本教程：[在 perl 中取消引用](http://www.perlmeme.org/howtos/using_perl/dereferencing.html)

# wordpress - ezpublish 后端推送到 wordpress 前端

> ID：13408954
> 
> 赞同：1
> 
> 时间：2012-11-16T01:10:55.073
> 
> 标签：wordpress, push, ezpublish

我有这个问题，我们的主要新闻网站已经在 wordpress 上运行。由于编辑工作流程和一些新项目，我正在检查 ezpublish。但我想保留 wordpress 前端并将其附加到 ezpublush。因此，在 ezpub 中生成的内容可以实时发布到 wordpress 中。我发现扩展非常有限，所以想知道在这个方向上有什么工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T06:58:49.437

很抱歉，如果很明显，但我建议您对将设计和内容移动到 ez 进行估计，以便确定您可以承担多少工作来融入这个推动理念。

我认为您应该查看 ez 和 onpublish 触发器中的工作流支持。这将让您在 ez 中发布内容并推送到 wp 中时挂钩内容。由于 ez 中的内容结构非常灵活，因此该模型将有一些边缘情况。例如，您将需要对相关内容、嵌入内容和图像做出一些选择。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T09:53:19.523

如果您真的想继续在前端使用 Wordpress，那么使用 REST API 从其内容存储库中检索内容怎么样？

eZ Engineering 提供的 REST API 非常棒，因此您的大部分工作将是在 Wordpress 端开发一些能够连接到该 API 的东西（我对 WP 的了解不足以说明它是否容易或不是）。

如果您不想使用 REST API，另一种解决方案是使用 XML 模板代替默认的 HTML 模板。这样，eZ Publish 将通过 XML 公开其内容，这比纯 HTML 更有用...

REST API 的优点：非常快（与使用 XML 解决方案相比） REST API 的缺点：需要在 WP 端开发专用于这个 WP/eZ 桥的东西

用于 XML 解决方案的 Pro：可能更简单，因为我很确定 WP 端有一些扩展能够基于 XML 导入内容：请参阅 REST API 的 Pro

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-16T14:32:09.813

最简单的选择是从 eZ 配置 rss 导出并将该 rss 导入 WP 对象。但是，我同意 Doug 的观点，您最好将其用作临时解决方案，并计划用 eZ 前端替换 Wordpress 前端。

# c++ - 编译程序给出“未定义的引用”

> ID：13408961
> 
> 赞同：3
> 
> 时间：2012-11-16T01:11:56.020
> 
> 标签：c++

我在这里迷路了。我一直在我的 Mac 上的 LLVM 上成功编译我的程序，但是当我转到 Linux 服务器并尝试使用 g++ 进行编译时，我遇到了大量的链接器错误。

这是一段摘录：

```
/tmp/ccGbgd6T.o: In function `Scene::setBackgroundImage(String)':
Project.cpp:(.text+0x166): undefined reference to `Graph_lib::Image::Image(Point, String, Graph_lib::Suffix::Encoding)'
/tmp/ccGbgd6T.o: In function `Graph_lib::Window::~Window()':
Project.cpp:(.text._ZN9Graph_lib6WindowD2Ev[_ZN9Graph_lib6WindowD5Ev]+0xc): undefined reference to `vtable for Graph_lib::Window'
/tmp/ccGbgd6T.o: In function `Graph_lib::Shape::~Shape()':
Project.cpp:(.text._ZN9Graph_lib5ShapeD2Ev[_ZN9Graph_lib5ShapeD5Ev]+0xb): undefined reference to `vtable for Graph_lib::Shape'
/tmp/ccGbgd6T.o: In function `Graph_lib::Text::Text(Point, String const&)':
Project.cpp:(.text._ZN9Graph_lib4TextC2E5PointRK6String[_ZN9Graph_lib4TextC5E5PointRK6String]+0xe): undefined reference to `Graph_lib::Shape::Shape()'
Project.cpp:(.text._ZN9Graph_lib4TextC2E5PointRK6String[_ZN9Graph_lib4TextC5E5PointRK6String]+0x17): undefined reference to `vtable for Graph_lib::Text'
Project.cpp:(.text._ZN9Graph_lib4TextC2E5PointRK6String[_ZN9Graph_lib4TextC5E5PointRK6String]+0x67): undefined reference to `Graph_lib::Shape::add(Point)'
/tmp/ccGbgd6T.o: In function `Graph_lib::Button::Button(Point, int, int, String const&, void (*)(void*, void*))':
Project.cpp:(.text._ZN9Graph_lib6ButtonC2E5PointiiRK6StringPFvPvS5_E[_ZN9Graph_lib6ButtonC5E5PointiiRK6StringPFvPvS5_E]+0x40): undefined reference to `vtable for Graph_lib::Button' 
```

这让我很害怕，但后来我注意到所有错误都来自同一个类：`Graph_lib`. 这是一个非常剪裁的版本`Graph.h`：（注意，这不是我的课）

```
#ifndef GRAPH_GUARD
#define GRAPH_GUARD 1

#include <...system stuff...>

namespace Graph_lib {
// lots of other classes in here
// this is just one
    struct Image : Shape {
        Image(Point xy, string file_name, Suffix::Encoding e = Suffix::none);
    //rest of class
    }
} 
```

这里可能出了什么问题？

编辑：这是我用来编译的命令：

```
g++-4.6 -std=c++0x *.cpp -lfltk -lfltk_images 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T01:14:37.260

似乎您忘记将项目与 链接`Graph.cpp`，或者任何包含`Graph_lib`类方法实现的文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T01:15:22.600

看起来您的图形库丢失了。

使用链接时`g++, use -l <Graph lib>`

# c# - C# 防止写入或删除目录

> ID：13408963
> 
> 赞同：0
> 
> 时间：2012-11-16T01:12:00.903
> 
> 标签：c#, .net, file-locking

我正在开发一个类似于 Dropbox 但在本地为我的业务工作的程序。我设置了一些用户无法写入某些文件/目录但他们仍然可以在本地写入的地方。这不是一个大问题，我可以重新下载文件/目录，但如果我可以锁定它会很好。（尽管他们仍然需要阅读）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T01:23:48.993

我可以想到几个解决方案：

*   让您的应用程序保持文件以只读方式打开。如果文件数量变大，这可能会导致一些问题，您可能会遇到一些天花板，无论是在内存中还是在处理限制中。

    有关句柄限制的一些信息，请参阅这个优秀的 technet 博客[http://blogs.technet.com/b/markrussinovich/archive/2009/09/29/3283844.aspx](http://blogs.technet.com/b/markrussinovich/archive/2009/09/29/3283844.aspx)

*   使用 NTFS 权限。如果您以其他用户身份运行您的应用程序，获取文件的所有权并允许其他用户只读访问，它应该会有所帮助。由于您处于业务环境中，因此您可能具有将应用程序作为服务运行或在启动时运行的那种级别的控制。

    关于 NTFS 权限的一篇不错的 SO 帖子 [在 C#.NET 中设置 NTFS 权限](https://stackoverflow.com/questions/7451861/setting-ntfs-permissions-in-c-net)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T01:38:53.587

我建议您使用 File.SetAttributes 方法设置[只读属性。](http://msdn.microsoft.com/en-us/library/system.io.file.setattributes.aspx)

要将文件设置为只读：

```
File.SetAttributes(@"C:\Users\Owner\Desktop\file.txt", FileAttributes.ReadOnly); 
```

要将文件恢复正常：

```
File.SetAttributes(@"C:\Users\Owner\Desktop\file.txt", FileAttributes.Normal); 
```

您可以检查文件是否为只读文件，然后抛出错误：

```
System.IO.FileInfo fileInfo = new System.IO.FileInfo(@"C:\Users\Owner\Desktop\file.txt");
if (fileInfo.IsReadOnly)
{
    //...Alert user that this file cannot be deleted
}
else
{
    //... Delete the file here
} 
```

# php - 表中的隐藏字段

> ID：13408967
> 
> 赞同：0
> 
> 时间：2012-11-16T01:12:15.460
> 
> 标签：php, html, mysql

我有一个奇怪的问题，我有一个由数据库中的信息填充的表。

当我从数据库中选择时，信息完全符合我的预期。

出于某种原因，在我的 HTML 表中，我有一个奇怪的字段，我看不到源代码。

我的表格标题行：

```
echo "<tr>\n";
echo "<th><h3>ID</h3></th>\n";
echo "<th><h3>First Name</h3></th>\n";
echo "<th><h3>Last Name</h3></th>\n";
echo "<th><h3>Odd additional field</h3></th>\n";
echo "<th><h3>Country</h3></th>\n";
echo "<th><h3>Room type</h3></th>\n";
echo "<th><h3>Number</h3></th>\n";
echo "<th><h3>Checkin Date</h3></th>\n";
echo "<th><h3>Nights</h3></th>\n";
echo "</tr>\n"; 
```

我称之为“奇怪的附加字段”的字段即使我取出它也会出现，它只是没有命名。

我填充表格的代码：

```
while($row = $sth->fetch()){
echo "<tr url=\"edit.php?id=" . $row['id'] . "\">\n";
echo "<td>" . $row['id'] . "</td>\n";
echo "<td>" .  $row['firstName'] . "</td>\n";
echo "<td>" . $row['lastName'] . "</h3><td>\n";
echo "<td>" .  $row['country'] . "</td>\n";
echo "<td>" . $row['roomtype'] . "</td>\n";
echo "<td>" . $row['roomnumber'] . "</td>\n";
echo "<td>" . $row['checkin'] . "</td>\n";
echo  "<td>" . $row['nights'] . "</td>\n";
echo "</tr>\n";
} 
```

转到浏览器的结果 HTML：

```
<table width = "80%" align="center" id="example">
<tr>
<th><h3>ID</h3></th>
<th><h3>First Name</h3></th>
<th><h3>Last Name</h3></th>
<th><h3>Country</h3></th>
<th><h3>Room type</h3></th>
<th><h3>Number</h3></th>
<th><h3>Checkin Date</h3></th>
<th><h3>Nights</h3></th>
</tr>
<tr url="edit.php?id=1">
<td>1</td>
<td>Joe</td>
<td>Schmoe</h3><td>
<td>canada</td>
<td>mdorm</td>
<td></td>
<td>2012-11-16</td>
<td>5</td>
</tr>
</table> 
```

这一切看起来都很好，但是在浏览器中查看时，这就是我所看到的。

![在此处输入图像描述](../Images/85b87f4e0790ee05cccae57843f7678c.png)

我该如何追踪这个神秘的领域？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T01:16:52.293

`echo "<td>" . $row['lastName'] . "</h3><td>\n";`

应该

`echo "<td>" . $row['lastName'] . "</td>";`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T21:06:20.993

OP 询问了一个关于为他的示例编写 html 的首选方式的示例。请不要将此视为对他问题的实际答案：

```
<?php while($row = $sth->fetch()): ?>
<tr data-url="edit.php?id=<?php echo $row['id']; ?>">
    <td><?php echo $row['id'] ; ?></td>
    <td><?php echo $row['firstName']; ?></td>
    <td><?php echo $row['lastName']; ?></h3><td>
    <td><?php echo $row['country']; ?></td>
    <td><?php echo $row['roomtype']; ?></td>
    <td><?php echo $row['roomnumber']; ?></td>
    <td><?php echo $row['checkin']; ?></td>
    <td><?php echo $row['nights']; ?></td>
</tr>
<?php endwhile; ?> 
```

这就是首选的原因，尽管意见可能因人而异： 可维护性：如果代码更易于阅读，则更易于维护。当您在 php 中回显 html 时，您会受到转义 html 的影响，使其阅读起来更加混乱......

```
<?php echo "<div class=\"someclass\">" . $content . "</div>"; ?> 
```

实际上与以下内容相同：

```
<?php echo '<div class="someclass">' . $content . '</div>'; ?> 
```

除了第二个示例（单引号是字符串文字）不需要转义双引号。然而，在任何一种情况下，任何必须维护它的人都会更喜欢这个：

```
<div class="someclass"><?php echo $content; ?></div> 
```

因为它更干净。为什么？就是这样。此外，人们使用的许多编辑器会针对每种语言以不同的方式突出显示语法，从而在一定程度上使其更易于阅读。

在某些情况下，在 php 中回显 html 是有意义的，但要非常谨慎地对待它。任何在你之后阅读你的代码的人都会欣赏它。

旁注 - 您可能希望将示例中的 html 属性“url”更改为“data-url”，因为这是您应该用来让人们开心的另一个约定。支持自定义属性，但随手制作它们并不是一个好主意。但如果必须， data- 是自定义属性的标准前缀。

# cuda - 未合并的 float2 CUDA 内核

> ID：13408968
> 
> 赞同：1
> 
> 时间：2012-11-16T01:12:27.283
> 
> 标签：cuda, coalescing

我在优化下面示例的网格和块大小时遇到​​问题。当我进行分析时，内核代码中的内存写入操作似乎没有合并。

我在互联网上找到了一些解决方案，但他们建议我将 c_image 的结构更改为`[x1, x2, x3...] [y1, y2, y3...]`

但是我需要这个结构，`[x1, y1] [x2, y2]...`因为我在其他地方的代码上使用了 CUFFT 库，这需要这种精确的形式。

在 c_image 结构中是否有一种合并的方式来执行操作？

我的代码：

```
void main()
{
    float2 *c_image;  // x1 y1 x2 y2 x3 y3 x4 y4 .. .. .. .. x2048 y2048
    cudamalloc(c_image, 2048*2048*8);

    //warp size = 32
    //max thread count = 1024
    dim3 blocksize(1024, 1);
    dim3 gridsize(2048, 2);
    test<<<gridsize, blocksize>>(C_image);  
}

__global__ void test(float2 *o) 
{
    int x = threadIdx.x + blockIdx.y*1024;
    int y = blockIdx.x;

    int index = x + 2048*y;

        o[index].x = x;
        o[index].y = y;
} 
```

非常感谢！

PS：我试过这个，但没有运气！[CUDA float2 合并](https://stackoverflow.com/questions/4391053/cuda-float2-coalescing)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T01:34:17.407

使用临时 float2 变量将其减少为单个赋值应该会导致 64 位写入。

```
_global__ void test(float2 *o) 
{
    int x = threadIdx.x + blockIdx.y * 1024;
    int y = blockIdx.x;
    int index = x + 2048 * y;
    float2 tmp = float2(x, y);
    o[index] = tmp;
} 
```

更多详细信息可在

*   [CUDA float2 合并](https://stackoverflow.com/questions/4391053/cuda-float2-coalescing)
*   [https://devtalk.nvidia.com/default/topic/482370/cuda-programming-and-performance/float2-coalescing/#entry1158150](https://devtalk.nvidia.com/default/topic/482370/cuda-programming-and-performance/float2-coalescing/#entry1158150)

# python - Pip 安装的依赖项对应用程序文件不可用

> ID：13408977
> 
> 赞同：0
> 
> 时间：2012-11-16T01:13:54.143
> 
> 标签：python, heroku, flask

我在 Heroku 上安装依赖项时遇到问题。我有一个要部署的 Python 应用程序，但每次尝试加载站点时，我都会得到烧瓶和 sqlalchemy 的 ImportError。如果我运行，我会得到同样的错误：heroku run python 并尝试以交互方式导入模块。我很困惑，似乎无法解决这个问题，我希望其他人知道解决方案。相关文件的详细信息如下。

轮廓：

```
web: python app.py 
```

要求.txt：

```
Flask==0.9
Jinja2==2.6
SQLAlchemy==0.7.9
Werkzeug==0.8.3 
```

应用程序.py：

```
import os, flask, sqlalchemy
from gateway import server

if __name__ == '__main__':
    # Bind to PORT if defined, otherwise default to 5000.
    port = int(os.environ.get('PORT', 5000))

    server.app.run(host='0.0.0.0', port=port) 
```

**编辑：**我最终按照 Heroku 的说明一步一步地重新启动了我的应用程序，然后复制了我所有的旧代码。这似乎为我解决了问题，所以我的问题似乎是一个奇怪的边缘情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T01:38:44.633

我认为您的错误可能出在“从网关导入服务器”中。我不清楚那条线在做什么，当我尝试在我的机器上本地运行它时，该代码不起作用。

这是类似的代码，但格式对我来说更熟悉 - 我过去曾成功地将其部署到 Heroku：

```
import os
from flask import Flask
from flask import render_template

app = Flask (__name__)

@app.route('/')
def index():
    return render_template('index.html')

if __name__ == '__main__':
    port = int(os.environ.get('PORT', 5000))
    app.run(host='0.0.0.0', port=port) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T01:45:03.080

您可以在本地运行此代码吗？

查看 Heroku Flash 教程

[https://devcenter.heroku.com/articles/python](https://devcenter.heroku.com/articles/python)

# android - Android开发中的线性布局

> ID：13408978
> 
> 赞同：0
> 
> 时间：2012-11-16T01:13:56.357
> 
> 标签：android, android-layout, android-xml

我正在尝试使用线性布局开发一个计算器应用程序，但是我不熟悉 android 开发，所以我不知道由谁来编写它......我如何制作它，例如一个中有 3 个按钮单行（它们占据了整个水平空间），然后第二行也包含 3 个按钮？

例子：

```
 [ 7   8   9 ]
 [ 4   5   6 ]
 [ 1   2   3 ] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T01:27:22.157

我建议使用[TableLayout](http://developer.android.com/reference/android/widget/TableLayout.html)，因为在[LinearLayout](http://developer.android.com/reference/android/widget/LinearLayout.html)中您可能会遇到警告“嵌套权重对性能不利”。您需要在其中使用大量[android:weightSum](https://stackoverflow.com/questions/7452741/what-is-androidweightsum-in-android-and-how-does-it-work)来填充所有空格。试试下面的那个。

```
<TableLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:weightSum="3"
    >
    <TableRow
        android:layout_width="fill_parent"
        android:layout_height="0dp"
        android:layout_weight="1"
        android:weightSum="3">
        <Button
            android:layout_width="0dp"
            android:layout_height="fill_parent"
            android:layout_weight="1"
            android:text="7"
            />
        <Button
            android:layout_width="0dp"
            android:layout_height="fill_parent"
            android:layout_weight="1"
            android:text="8"
            />
        <Button
            android:layout_width="0dp"
            android:layout_height="fill_parent"
            android:layout_weight="1"
            android:text="9"
            />
    </TableRow>
    <TableRow
        android:layout_width="fill_parent"
        android:layout_height="0dp"
        android:layout_weight="1"
        android:weightSum="3">
        <Button
            android:layout_width="0dp"
            android:layout_height="fill_parent"
            android:layout_weight="1"
            android:text="4"
            />
        <Button
            android:layout_width="0dp"
            android:layout_height="fill_parent"
            android:layout_weight="1"
            android:text="5"
            />
        <Button
            android:layout_width="0dp"
            android:layout_height="fill_parent"
            android:layout_weight="1"
            android:text="6"
            />
    </TableRow>
    <TableRow
        android:layout_width="fill_parent"
        android:layout_height="0dp"
        android:layout_weight="1"
        android:weightSum="3">
        <Button
            android:layout_width="0dp"
            android:layout_height="fill_parent"
            android:layout_weight="1"
            android:text="3"
            />
        <Button
            android:layout_width="0dp"
            android:layout_height="fill_parent"
            android:layout_weight="1"
            android:text="2"
            />
        <Button
            android:layout_width="0dp"
            android:layout_height="fill_parent"
            android:layout_weight="1"
            android:text="1"
            />
    </TableRow>

</TableLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T02:49:55.630

我建议使用 GridLayout。（[http://developer.android.com/reference/android/widget/GridLayout.html](http://developer.android.com/reference/android/widget/GridLayout.html)）

由于 GridLayout 在 android 4 及更高版本上可用，您可能需要检查其他问题以添加旧版本的兼容性：

[如何使 Android GridLayout 与旧版本兼容？](https://stackoverflow.com/questions/9126780/how-to-make-android-gridlayout-compatible-to-older-version)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T01:21:25.360

如果您想坚持使用 LinearLayout，您可能会想要这样的东西。正如其他人指出的那样， TableLayout 可能更健壮。我发现 LinearLayouts 非常简单。鉴于您的应用程序的简单性，我很难相信它会对任何 android 设备造成压力，除非正在屏幕上做动画和事情。另外，我确定您需要为计算器的其他组件留出空间，这应该很容易放入此布局中。您可以添加另一层嵌套或更改权重以容纳较小的行显示方程式/答案的顶部。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >
    <LinearLayout  android:layout_width="match_parent" 
      android:layout_height="0dp" android:layout_weight="1"
      android:orientation="horizontal">
       <Button android:layout_width="0dp" 
         android:layout_height="match_parent"
         android:layout_weight="1" 
         android:text="7"
       />
       <Button android:layout_width="0dp" 
         android:layout_height="match_parent"
         android:layout_weight="1" 
         android:text="8"
       />
       <Button android:layout_width="0dp" 
         android:layout_height="match_parent"
         android:layout_weight="1" 
         android:text="9"
       />
    </LinearLayout>
    <LinearLayout  android:layout_width="match_parent" 
      android:layout_height="0dp" android:layout_weight="1"
      android:orientation="horizontal">
       <Button android:layout_width="0dp" 
         android:layout_height="match_parent"
         android:layout_weight="1" 
         android:text="4"
       />
       <Button android:layout_width="0dp" 
         android:layout_height="match_parent"
         android:layout_weight="1" 
         android:text="5"
       />
       <Button android:layout_width="0dp" 
         android:layout_height="match_parent"
         android:layout_weight="1" 
         android:text="6"
       />
    </LinearLayout>

    <LinearLayout  android:layout_width="match_parent" 
      android:layout_height="0dp" android:layout_weight="1"
      android:orientation="horizontal">
       <Button android:layout_width="0dp" 
         android:layout_height="match_parent"
         android:layout_weight="1" 
         android:text="1"
       />
       <Button android:layout_width="0dp" 
         android:layout_height="match_parent"
         android:layout_weight="1" 
         android:text="2"
       />
       <Button android:layout_width="0dp" 
         android:layout_height="match_parent"
         android:layout_weight="1" 
         android:text="3"
       />
    </LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T01:18:18.473

不要使用线性布局。请尝试在 RelativeLayout 中使用 RelativeLayouts。

您也可以使用 TableLayout，但我发现 RelativeLayout 可以更好地适应不同的屏幕几何形状。

# java - 如何在 JUNG 图中强制执行自定义布局？

> ID：13408980
> 
> 赞同：1
> 
> 时间：2012-11-16T01:13:58.650
> 
> 标签：java, swing, jung

我有以下三组整数，如下所示：

```
set0 = {1} //this will always be a singleton set.
set1 = {2, 3, 4, 5}
set2 = {6, 7} 
```

我有一个图，它的边要么从 set1 到 set2 要么从 set2 到 set3，从而形成清晰的树状顶点层次结构。

```
 Set0 -- Set1  -- Set2 
```

为了显示这个树状图，我创建了一个`DelegateForest`和`TreeLayout`

```
package Test;

import java.util.HashSet;
import java.util.Set;

import javax.swing.JFrame;
import javax.swing.JPanel;

import edu.uci.ics.jung.algorithms.layout.Layout;
import edu.uci.ics.jung.algorithms.layout.TreeLayout;
import edu.uci.ics.jung.graph.DelegateForest;
import edu.uci.ics.jung.graph.Forest;
import edu.uci.ics.jung.graph.Graph;
import edu.uci.ics.jung.visualization.VisualizationViewer;
import edu.uci.ics.jung.visualization.decorators.ToStringLabeller;

class Main{
    public static void main(String[] args){

    Set<Integer> set0 = new HashSet<Integer>();
    Set<Integer> set1 = new HashSet<Integer>();
    Set<Integer> set2 = new HashSet<Integer>();

    set0.add(1);

    set1.add(2);
    set1.add(3);
    set1.add(4);
    set1.add(5);

    set2.add(6);
    set2.add(7);

    JFrame frame = new JFrame();
    frame.add(createGraphPanel(set0, set1, set2));
    frame.pack();
    frame.setVisible(true);

    }

    private static JPanel createGraphPanel( Set<Integer> setZero, Set<Integer> firstSet, Set<Integer> secondSet) {
            // create a graph
            Graph<Integer, String> graph = new DelegateForest<Integer, String>();

                Integer vertex1 = setZero.iterator().next();
            for (Integer i : firstSet) {
                graph.addEdge(vertex1+"-"+i, vertex1, i);
            }

            Layout<Integer, String> layout = new TreeLayout<Integer, String>((Forest<Integer, String>) graph);
            VisualizationViewer<Integer, String> vv = new  VisualizationViewer<Integer,String>(layout);

            vv.getRenderContext().setVertexLabelTransformer(
                    new ToStringLabeller<Integer>());

            return vv;
        }
    } 
```

但是，我得到的图（目前，只包含 set1 和 set2）看起来像这样 ![在此处输入图像描述](../Images/ad9a5d6e59da6672fdd6366edc926637.png)

我想对这张图做几件事：

1.  我希望它们不是从上到下流动的节点，而是从左到右流动。（类似于将其旋转 90 度）
2.  目前，布局算法确保没有重叠，从而以线性方式分布 set2 的节点。如果 set2 很大，它将超出面板的范围。我不介意重叠，并希望这些节点作为允许部分重叠的集群紧密排列在一起。

我怎样才能达到这两个要求？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T17:16:38.087

回答问题（1）：有一个演示（L2RTreeLayoutDemo）可以做到这一点。

回答问题（2）：更改布局中的 x 和/或 y 间距；这可以在构造函数中设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T20:40:25.703

我扩展了 TreeLayout 类并交换了所有的 x / y 变量。这应该水平显示树。但是，您必须添加自己的代码以防止将顶点放置在一条线上（也许使用边界框并在您越过它时从顶部开始）。

```
public class HorizontalOverlappingTreeLayout<V, E> extends TreeLayout<V, E> {

    public static void main(String[] args) {
        Set<Integer> set0 = new HashSet<Integer>();
        Set<Integer> set1 = new HashSet<Integer>();
        Set<Integer> set2 = new HashSet<Integer>();
        set0.add(1);
        set1.add(2);
        set1.add(3);
        set1.add(4);
        set1.add(5);
        set2.add(6);
        set2.add(7);

        JPanel panel = new JPanel();
        Graph<Integer, String> graph = new DelegateForest<Integer, String>();
        Integer vertex1 = set0.iterator().next();
        for (Integer i : set1) {
            graph.addEdge(vertex1 + "-" + i, vertex1, i);
        }

        Layout<Integer, String> layout = new HorizontalOverlappingTreeLayout<Integer, String>(
                (Forest<Integer, String>) graph);
        VisualizationViewer<Integer, String> vv = new VisualizationViewer<Integer, String>(layout);
        vv.getRenderContext().setVertexLabelTransformer(new ToStringLabeller<Integer>());
        panel.add(vv);

        JFrame frame = new JFrame();
        frame.add(panel);
        frame.pack();
        frame.setVisible(true);
    }

    public HorizontalOverlappingTreeLayout(Forest<V, E> g) {
        super(g);
    }

    @Override
    protected void buildTree() {
        this.m_currentPoint = new Point(0, 20);
        Collection<V> roots = TreeUtils.getRoots(graph);
        if (roots.size() > 0 && graph != null) {
            calculateDimensionY(roots);
            for (V v : roots) {
                calculateDimensionY(v);
                m_currentPoint.y += this.basePositions.get(v) / 2 + this.distY;
                buildTree(v, this.m_currentPoint.y);
            }
        }
        // TODO: removed code here
    }

    @Override
    protected void buildTree(V v, int y) {
        if (!alreadyDone.contains(v)) {
            alreadyDone.add(v);

            // go one level further down
            this.m_currentPoint.x += this.distX;
            this.m_currentPoint.y = y;

            this.setCurrentPositionFor(v);

            int sizeYofCurrent = basePositions.get(v);

            int lastY = y - sizeYofCurrent / 2;

            int sizeYofChild;
            int startYofChild;

            for (V element : graph.getSuccessors(v)) {
                sizeYofChild = this.basePositions.get(element);
                startYofChild = lastY + sizeYofChild / 2;
                buildTree(element, startYofChild);
                lastY = lastY + sizeYofChild + distY;
            }
            this.m_currentPoint.x -= this.distX;
        }
    }

    private int calculateDimensionY(V v) {
        int size = 0;
        int childrenNum = graph.getSuccessors(v).size();

        if (childrenNum != 0) {
            for (V element : graph.getSuccessors(v)) {
                size += calculateDimensionY(element) + distY;
            }
        }
        size = Math.max(0, size - distY);
        basePositions.put(v, size);

        return size;
    }

    private int calculateDimensionY(Collection<V> roots) {
        int size = 0;
        for (V v : roots) {
            int childrenNum = graph.getSuccessors(v).size();

            if (childrenNum != 0) {
                for (V element : graph.getSuccessors(v)) {
                    size += calculateDimensionY(element) + distY;
                }
            }
            size = Math.max(0, size - distY);
            basePositions.put(v, size);
        }

        return size;
    }

} 
```

# liferay - 从 Velocity 模板访问 Liferay 自定义字段

> ID：13408982
> 
> 赞同：2
> 
> 时间：2012-11-16T01:14:18.250
> 
> 标签：liferay, velocity, liferay-6

我正在尝试从 Liferay 模板之一中发出自定义字段的值。

使用管理 UI，我定义了一个名为“org-home-page”的新组织级自定义字段，默认值为“tom rules”。

我想在 portal_normal.vm 中发出这个值

我根据同事发送的一些帖子和示例以及我自己的大量实验将这段代码拼凑在一起：

```
$page.getGroup().getExpandoBridge().getAttribute("org-home-page") 
```

不幸的是，Velocity 无法解析表达式，并且保持不变。

以下表达式*确实*在 portal_normal 中求值，但显然这些语句都没有完成全部工作：

```
$page                               ## seems to represent the current page
$page.getGroup()                    ## seems to represent the current Org
$page.getGroup().getExpandoBridge() ## seems to give me an "Expando bridge" object 
```

只有最后一步——我通过名称识别我想要检索其值的特定自定义字段——失败了。

我不允许编写任何自定义 Java 来促进这一点，所以不要费心启动 Eclipse。8) 只有可以完全在 Velocity 模板中实现的解决方案才可接受。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T06:32:36.283

我能够在 Liferay Portal 6.1.0 中使用以下方法获得组织的自定义字段的值。也许它太冗长，但至少它有效。:)

### init_custom.vm

```
...
## Null variable
#set($null = $some-never-used-variable-name)
...
#set($organization = $null)
#if ($layout.getGroup().isOrganization())
    ## Get organization by id
    #set($organizationLocalService = $serviceLocator.findService("com.liferay.portal.service.OrganizationLocalService"))
    #set($organizationId = $layout.getGroup().getOrganizationId())
    #set($organization = $organizationLocalService.getOrganization($organizationId))
#end
... 
```

### portal_normal.vm

```
...
#if ($organization != $null)
    ## Use value of custom field of organization
    $organization.getExpandoBridge().getAttribute("org-home-page")
#end    
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-13T21:14:15.977

在 Liferay 7+ 中为我工作：

创建自定义字段类型“站点”，将数据填充到站点设置中，并使用主题模板将此数据调用到 liferay 主题中：

如果是 VM 文件：

```
#set ($site_custom_field = $layout.getGroup().getExpandoBridge().getAttribute("site_custom_field_key"))
<h1>$site_custom_field</h1> 
```

如果是 FTL 文件：

```
<#assign site_custom_field = layout.getGroup().getExpandoBridge().getAttribute("site_custom_field_key")>
<h1>${site_custom_field}</h1> 
```

# ruby - 对于继承的 Circle 类，我的 to_s 方法有什么问题？

> ID：13408984
> 
> 赞同：0
> 
> 时间：2012-11-16T01:14:32.503
> 
> 标签：ruby, oop, inheritance

我正在编写一个包含 4 个类（点、形状、矩形、圆）的程序。Rectangle 和 Circle 继承自 Shape，其中包含形状中心的信息（字段）。我正在尝试为 Circle 类编写一个 to_s 方法，它应该像下面这样打印出来：

> 圆圈：[(1, 2), 3]

(1,2) 是中心，3 是半径。这就是我的 to_s 方法：

```
def to_s
  "Circle: [(" + super.x.to_s + ", " + super.y.to_s + "), " + 
    radius.to_s + "]"
end 
```

我收到一个错误“没有这样的方法 'x' 错误”，我知道这是因为 Shape 没有“x”方法（它在 Point 中）。我尝试了一些像 super.center.y.to_s 这样的长方法链接，但这有其自身的问题。这样做的正确方法是什么。即，良好的编程风格、面向对象的方式和 ruby​​ 方式？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T01:22:06.680

调用`super`发送父类的`to_s`方法，然后发送结果（字符串）`x`，`y`等等，这些方法不存在于字符串中。

尝试这个：

```
def to_s
  "Circle: [(#{x},#{y}) #{radius}]"
end 
```

Ruby 具有隐式字符串插值，这意味着在双引号字符串中，内部的任何内容都`#{...}`将自动呈现为字符串。

如果在or`x`中没有`x`定义，期望得到什么？继承自?`Shape``Circle``Shape``Point`

**编辑：**

`@center`要访问保存`x`和值的实例变量`y`，您有几个选择。这是最基本的：

```
class Shape
  attr_accessor :center

  def initialize(point)
    @center = point
  end
end

class Circle

  def initialize(point, radius)
    super(point) # this runs Shape's initialize method
    @radius = radius
  end

  def to_s
    "Circle: [(#{center.x},#{center.y}) #{radius}]"
  end
end 
```

另一种选择是使用内置的 Forwardable 模块：

```
require 'forwardable'
class Shape
  extend Forwardable
  def_delegators :@center, :x, :y
  #...
end 
```

然后在您的实例中，您可以直接调用`x`and `y`，它们将自动转发到`@center`，在这种情况下，“Circle: [(#{x},#{y}) #{radius}]” 字符串将起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T01:46:58.980

在 ruby​​ 中， super 只是一个表示重写方法的方法，而不是超类本身。

例子：

```
class A
    def to_s
        'A'
    end
end

p A.new.to_s #=> returns 'A'

class B < A
    def to_s
        super + 'with' + 'B'
    end
end

p B.new.to_s #=> returns 'A with B' 
```

如果你不明白，`super`只调用调用`A.to_s`而不是调用`A`本身，所以如果`A`有一个属性`x`调用`super.x`将失败，因为`super`只表示它被调用的当前覆盖的方法，而不是整个超类。现在，要访问超类的属性，您只需调用`@x.to_s`或`self.x.to_s`因为超类的属性属于子类。

# python - 在python中用字符串平均文本文档

> ID：13408989
> 
> 赞同：0
> 
> 时间：2012-11-16T01:14:59.663
> 
> 标签：python

我需要制作一个表格，从文本文件中提取一个或多个人的姓名和在各种游戏中的得分，然后找到每个人得分的平均值、最小值和最大值并显示它们。

编辑-这是我当前的代码：

```
 while name!='':
    floor=text_file.readline().rstrip()
    rings=text_file.readline().rstrip()
    p_bars=text_file.readline().rstrip()
    p_horse=text_file.readline().rstrip()
    h_bar=text_file.readline().rstrip()

    floor_int=int(floor)
    rings_int=int(rings)
    p_bars_int=int(p_bars)
    p_horse_int=int(p_horse)
    h_bar_int=int(h_bar)

    score_sum=floor_int+rings_int+p_bars_int+p_horse_int+h_bar_int
    avg=score_sum/5 
```

我如何能够对具有数字的行进行数学运算并排除具有名称的行？

编辑：运行该代码给了我这个： TypeError: Can't convert 'float' object to str implicitly

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T01:26:23.917

如果您的数字是十进制数字，您可以这样做：

```
if line.isdigit():
    my_number = int(line) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T01:31:50.613

假设 'rings' 是一个有数字的行，您可以通过创建 int 或 float 对象来添加所有这些，例如：

```
rings=rings.rstrip('\n')
rings_int = int(rings)
sum_of_rings += rings_int 
```

如果一行中混合了数字和其他文本，请先使用正则表达式提取数字部分：

```
import re

m = re.search('\d+', rings)
if m:
    rings_int_str = m.group()
    rings_int = int( rings_int_str )
    sum_of_rings += rings_int 
```

我使用了很多单独的变量来澄清这一点，但是这些步骤可以组合起来，例如：

```
sum_of_rings += int( text_file.readline() ) 
```

PS如果您收到该错误，则可能是在您尝试打印 avg 而不以某种方式将其转换为字符串的打印语句中。这些工作中的任何一个：

```
avg=score_sum/5.0
print "%f" % (avg)
print str(avg) 
```

# c - 如何在C中生成随机浮点数

> ID：13408990
> 
> 赞同：45
> 
> 时间：2012-11-16T01:15:14.110
> 
> 标签：c, random, floating-point

我找不到任何解决方案来生成范围内的随机浮点数`[0,a]`，其中`a`是用户定义的一些浮点数。

我尝试了以下方法，但似乎无法正常工作。

```
float x=(float)rand()/((float)RAND_MAX/a) 
```

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-11-16T01:35:23.270

尝试：

```
float x = (float)rand()/(float)(RAND_MAX/a); 
```

要了解其工作原理，请考虑以下内容。

```
N = a random value in [0..RAND_MAX] inclusively. 
```

上面的等式（为了清楚起见去掉了铸件）变为：

```
N/(RAND_MAX/a) 
```

但是除以分数相当于乘以所述分数的倒数，所以这相当于：

```
N * (a/RAND_MAX) 
```

可以重写为：

```
a * (N/RAND_MAX) 
```

考虑到`N/RAND_MAX`始终是介于 0.0 和 1.0 之间的浮点值，这将生成介于 0.0 和 之间的值`a`。

Alternatively, you can use the following, which effectively does the breakdown I showed above. I actually prefer this simply because it is clearer what is actually going on (to me, anyway):

```
float x = ((float)rand()/(float)(RAND_MAX)) * a; 
```

Note: the floating point representation of `a` must be *exact* or this will never hit your absolute edge case of `a` (it will get close). See [this article](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html) for the gritty details about why.

**Sample**

```
#include <stdio.h>
#include <stdlib.h>
#include <time.h>

int main(int argc, char *argv[])
{
    srand((unsigned int)time(NULL));

    float a = 5.0;
    for (int i=0;i<20;i++)
        printf("%f\n", ((float)rand()/(float)(RAND_MAX)) * a);
    return 0;
} 
```

**Output**

```
1.625741
3.832026
4.853078
0.687247
0.568085
2.810053
3.561830
3.674827
2.814782
3.047727
3.154944
0.141873
4.464814
0.124696
0.766487
2.349450
2.201889
2.148071
2.624953
2.578719 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2017-05-22T05:15:07.807

You can also generate in a range [min, max] with something like

```
float float_rand( float min, float max )
{
    float scale = rand() / (float) RAND_MAX; /* [0, 1.0] */
    return min + scale * ( max - min );      /* [min, max] */
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T01:17:20.517

这会在两个浮点数之间生成一个随机浮点数。

```
float RandomFloat(float min, float max){
   return ((max - min) * ((float)rand() / RAND_MAX)) + min;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-10-09T20:23:22.447

while it might not matter now here is a function which generate a float between 2 values.

```
#include <math.h>

float func_Uniform(float left, float right) {
    float randomNumber = sin(rand() * rand());
    return left + (right - left) * fabs(randomNumber);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-02-06T12:23:43.350

If you want to generate a random float in a range, try a next solution.

```
#include <stdio.h>
#include <stdlib.h>
#include <time.h>

float
random_float(const float min, const float max)
{
    if (max == min) return min;
    else if (min < max) return (max - min) * ((float)rand() / RAND_MAX) + min;

    // return 0 if min > max
    return 0;
}

int
main (const int argc, const char *argv[])
{
    srand(time(NULL));

    char line[] = "-------------------------------------------";

    float data[10][2] = {
        {-10, 10},
        {-5., 5},
        {-1, 1},
        {-0.25, -0.15},
        {1.5, 1.52},
        {-1700, 8000},
        {-0.1, 0.1},
        {-1, 0},
        {-1, -2},
        {1.2, 1.1}
    };

    puts(line);
    puts("     From    |    Result    |      To");
    puts(line);

    int i;
    for (i = 0; i < 10; ++i) {
        printf("%12f | %12f | %12f\n", data[i][0], random_float(data[i][0], data[i][1]), data[i][1]);
    }

    puts(line);

    return 0;
} 
```

**A result (values is fickle)**

```
-------------------------------------------
     From    |    Result    |      To
-------------------------------------------
  -10.000000 |     2.330828 |    10.000000
   -5.000000 |    -4.945523 |     5.000000
   -1.000000 |     0.004242 |     1.000000
   -0.250000 |    -0.203197 |    -0.150000
    1.500000 |     1.513431 |     1.520000
-1700.000000 |  3292.941895 |  8000.000000
   -0.100000 |    -0.021541 |     0.100000
   -1.000000 |    -0.148299 |     0.000000
   -1.000000 |     0.000000 |    -2.000000
    1.200000 |     0.000000 |     1.100000
------------------------------------------- 
```

# c++ - 当使用 ctypes 的 long 被截断时，Python 整数传递给 C++ 函数

> ID：13408993
> 
> 赞同：1
> 
> 时间：2012-11-16T01:16:00.500
> 
> 标签：c++, python, macos, ffi

我正在使用 MacOSX 10.8.2 和最新的 xcode 和股票 python 解释器在 Mac 上开发。

这是我放入的一些代码`fails.cpp`

```
#include <iostream>

using namespace std;

extern "C" {

void mysort(long *data, long data2) {
    cout << hex << *data << ' ' << data2 << endl;
}

} 
```

这是一些从我放入的python中调用它的代码`fails.py`：

```
import ctypes

sort_dll = ctypes.CDLL("fails.dylib")
mysort = ctypes.CFUNCTYPE(None, ctypes.POINTER(ctypes.c_long), ctypes.c_long)(sort_dll.mysort)

a = ctypes.c_long(0x987654321)
mysort(ctypes.byref(a), 0x123456789) 
```

我编译并运行

```
c++ -arch x86_64 -o fails.o -c fails.cpp && g++ -o fails.dylib -dynamiclib fails.o && python fails.py 
```

结果是：

```
987654321 23456789 
```

为什么按值传递的 64 位整数被截断为 32 位？令人惊讶的是，指向 64 位 long 的指针没有被截断。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T02:42:04.120

我怀疑这是因为 Python ctypes 库已决定 c_long 的大小为 32 位。[文档](http://docs.python.org/2/library/ctypes.html)中有一些提示：

表示 C 有符号 int 数据类型。构造函数接受一个可选的整数初始化器；没有进行溢出检查。**在 sizeof(int) == sizeof(long) 的平台上，它是 c_long 的别名**。

这段代码会告诉你 c_long 实际上有多大：

```
import ctypes
print ctypes.sizeof(ctypes.c_long()) 
```

指针引用的值不会被截断，因为 ctypes 只需编组指针本身。指针可能被截断，但这并不重要，因为无论如何高位都为零。ctypes 也可能决定 ctypes.POINTER 是 64 位的。你可以通过稍微修改上面的例子来发现。

# c++ - 在 C++ 中使用对象名称前向声明 typedef 结构

> ID：13408994
> 
> 赞同：1
> 
> 时间：2012-11-16T01:16:01.407
> 
> 标签：c++, winapi, struct, typedef, forward-declaration

考虑 WinAPI 中的这个类：

```
typedef struct tagRECT
{
    LONG    left;
    LONG    top;
    LONG    right;
    LONG    bottom;
} RECT, *PRECT, NEAR *NPRECT, FAR *LPRECT; 
```

我在一个名为的类中对其进行了增强，该类`Rect`允许您乘/加/减/比较两个`Rect`s，以及其他功能。我需要我的`Rect`班级了解的唯一真正原因`RECT`是因为该班级具有转换运算符，允许将 a`Rect`作为 a 传递`RECT`，并分配给 a `RECT`。

但是，在文件`Rect.h`中，我不想包含`<Windows.h>`，我只想包含`<Windows.h>`在源文件中，这样我可以保持我的包含树很小。

我知道可以像这样前向声明结构：`struct MyStruct;` 但是，结构的实际名称是`tagRECT`并且它有一个对象列表，所以我对如何前向声明它有点困惑。这是我的课的一部分：

```
// Forward declare RECT here.

class Rect {
    public:
        int X, Y, Width, Height;

        Rect(void);
        Rect(int x, int y, int w, int h);
        Rect(const RECT& rc);

        //! RECT to Rect assignment.
        Rect& operator = (const RECT& other);

        //! Rect to RECT conversion.
        operator RECT() const;

        /* ------------ Comparison Operators ------------ */

        Rect& operator <  (const Rect& other);
        Rect& operator >  (const Rect& other);
        Rect& operator <= (const Rect& other);
        Rect& operator >= (const Rect& other);
        Rect& operator == (const Rect& other);
        Rect& operator != (const Rect& other);
}; 
```

这有效吗？

```
// Forward declaration
struct RECT; 
```

我的想法是否定的，因为`RECT`它只是`tagRECT`. 我的意思是，如果我这样做，我知道头文件仍然有效，但是当我创建源文件`Rect.cpp`并包含`<Windows.h>`在其中时，我担心这就是我会遇到问题的地方。

我怎么能转发声明`RECT`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T01:20:26.763

您可以多次声明 typedef 名称，也可以同时转发声明结构名称：

```
typedef struct tagRECT RECT; 
```

[https://ideone.com/7K7st7](https://ideone.com/7K7st7)

请注意，您不能调用返回不完整类型的函数，因此`operator RECT() const`如果`tagRECT`仅前向声明，则无法调用转换。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-16T01:20:48.417

在实际取消引用类型之前，您不需要知道函数定义。

所以你可以在你的*头*文件中转发声明（因为你不会在这里做任何取消引用）然后包含`Windows.h`在你的*源*文件中。

**[编辑]**没有看到它是 typedef。但是，另一个答案是错误的：[有一种方法可以（某种）转发声明 typedef](https://stackoverflow.com/questions/804894/forward-declaration-of-a-typedef-in-c)。

# javascript - 在 javascript Date 对象中获取当前文档的 Last-Modified 日期

> ID：13408995
> 
> 赞同：11
> 
> 时间：2012-11-16T01:16:00.940
> 
> 标签：javascript, date, browser

浏览器[提供了一种通过查看来确定文档的最后修改日期](https://developer.mozilla.org/en-US/docs/DOM/document.lastModified)的方法`document.lastModified`。此属性由 HTTP`Last-Modified`标头确定，并以字符串形式返回。

我的目标是将此属性转换为 Javascript`Date`对象。目前我正在使用

```
var date = new Date(document.lastModified); 
```

它成功地解析了字符串。但是，我很好奇这是否适用于跨浏览器和跨语言环境。

对我来说非常有趣的是`document.lastModified`表示与给定 HTTP 标头相同的日期`Last-Modified`，但字符串不相同。在我看来，浏览器会解析`Last-Modified`标题，将其转换为其内部日期表示，然后`document.lastModified`基于此设置为字符串。如果是这种情况，`document.lastModified`可能会以某种方式对其进行格式化，以便 Javascript`Date`构造函数对其进行解析，因为它们都可能使用相同的语言环境和格式化规则。但我一直无法确定这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T04:49:22.500

你不能`var anotherDateObject = new Date(Date.parse(document.lastModified));` 仅仅因为javascript不会将字符串解析为日期对象，直到它包含任何分隔符（如日期部分`'/'`或`'-'`其他`empty space`日期部分（时间部分没有问题`':'`）。Javascript可以解析带有空格作为分隔符的有效日期字符串。这里它是

```
<html>
<body>
<script>
    var dt = document.lastModified;    
    dt = dt.replace("/", " ");
    dt = dt.replace("/", " ");
    dt = dt.replace("-", " ");
    dt = dt.replace("-", " ");
    // '/' or '-' replcae these separtors with empty space
    // Now your string can be parsed to Date Object
    var anotherDateObject = new Date(Date.parse(dt));
    alert(anotherDateObject + " -- " + anotherDateObject.getHours());        
</script>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-09T17:36:53.920

尝试这个 ？`

```
function getLastMod() {
    var lastMod = Date.parse(document.lastModified);
    var now = new Date();
    var diff = (new Date(now.toLocaleString())).getTimezoneOffset() - now.getTimezoneOffset();
    if (!diff) diff = now.getTimezoneOffset() * 60000;
    else diff = 0;
    return lastMod - diff;
} 
```

`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-23T20:57:21.457

我想说在 HTML5 规范最终确定之前，您需要为基于 Webkit 的浏览器提供一个特殊情况。

根据[HTML5 草案](http://dev.w3.org/html5/spec//dom.html#dom-document-lastmodified)，`document.lastModified`对实现有非常明确的要求：

> lastModified 属性在获取时必须返回文档源文件最后修改的日期和时间，在用户的本地时区中，格式如下：
> 
> 1.  日期的月份部分。
> 2.  一个“/”（U+002F）字符。
> 3.  日期的日部分。
> 4.  一个“/”（U+002F）字符。
> 5.  日期的年份部分。
> 6.  一个 U+0020 空格字符。
> 7.  时间的小时部分。
> 8.  一个“：”（U+003A）字符。
> 9.  时间的分钟部分。
> 10.  一个“：”（U+003A）字符。
> 11.  时间的秒部分。

简而言之，就是`"MM/DD/YYYY hh:mm:ss"`在用户的*本地时区*。这意味着如果有相同的要求，当 HTML5 最终确定时，Webkit 会做错。

此外，修改日期的来源必须符合

> 文档的源文件的最后修改日期和时间必须来自所使用的网络协议的相关特性，例如来自文档的 HTTP Last-Modified 标头的值，或者来自本地文件的文件系统中的元数据。如果上次修改日期和时间未知，则该属性必须以上述格式返回当前日期和时间。

目前，我认为，标准本身，每个浏览器都可以做他们喜欢的任何事情，因为我在 HTML4、XHTML、DOM 2 或 DOM 3 中找不到任何东西`document.lastModified`。我相信它只在 HTML5 中定义。

一旦每个人都符合标准，即使一个浏览器无法解析也没有问题`"MM/DD/YYYY hh:mm:ss"`，您可以随时将其重构为ECMAScript标准所接受的ISO 8601。但我认为当前主流浏览器可以将格式正确解析为本地时间，这在 ECMAScript 中也是预期和标准的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-16T03:46:21.573

据我所知，今天使用的所有主要浏览器都支持此属性。存储的值是本地时间的格式`MM/dd/yyyy HH:mm:ss`。

我认为您可以在所有浏览器和语言环境中使用此属性。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-02-19T11:34:31.327

**这是一个例子：**

```
<!--
        function makeArray() {
          for (i = 0; i < makeArray.arguments.length; i++)
            this[i] = makeArray.arguments[i];
        }

        function getFullYear(d) {
          var y = d.getYear();
          if (y < 1000) {
            y += 1900
          };
          return y;
        }

        var days = new makeArray("Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday");
        var months = new makeArray("January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December");

        function format_time(t) {
            var Day = t.getDay();
            var Date = t.getDate();
            var Month = t.getMonth();
            var Year = getFullYear(t);
            timeString = "";
            timeString += days[Day];
            timeString += " ";
            timeString += months[Month];
            timeString += " ";
            timeString += Date;
            timeString += ", ";
            timeString += Year;
            return timeString;
          }
// -->

        m = new Date(document.lastModified);
        d = new Date();
        $(function() {
          $('.timestamp').html(format_time(m))
        });
```

```
.timestamp-wrap { font-size : 22px; font-family : 'Open Sans'; }
.timestamp { color: green; }
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<div class="timestamp-wrap">
  Updated on <span class="timestamp"></span>
</div>
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-04-24T20:02:13.880

Vis-á-vis livibetter 的评论，“现在，我认为，就其本身而言，每个浏览器都可以做他们喜欢做的任何事情，因为我在 HTML4、XHTML、DOM 2 或 DOM 3 中找不到关于 document.lastModified 的任何内容。我相信它只在 HTML5 中定义”

我相信“document.lastModified”已经存在了一段时间。我已经在一个网站上使用它几年了（在 HTML5 之前）。并不是说它真的很重要。如果有人关心（在 Windows XP SP3 下）我保留的浏览器来检查页面：

· Chrome 34 仍然坚持返回 UTC 时间（但没有添加本地时间）
· Firefox 28 只是忽略语句“javascript:alert(document.lastModified)”！:D
·IE8 返回本地时间（正如其他人指出的那样）
·Opera 12.16 返回本地时间
·Safari 5.1.7 返回 UTC 时间

至少他们的日期是正确的；他们都在我的主页上返回了 11/17/09（除了 Firefox，它只是继续忽略）！哈哈

[如果像 W3Schools ( http://www.w3schools.com/jsref/prop_doc_lastmodified.asp](http://www.w3schools.com/jsref/prop_doc_lastmodified.asp) ) 这样的参考资源会在这些方面添加一些措辞，这样人们就知道当结果很时髦时会发生什么，那就太好了。

更新：如果您激活工具 | 网页开发者 | DOM Inspector，Firefox 28 愉快地执行“javascript:alert(document.lastModified)”并返回本地时间！什么杂烩。哈哈

# c# - MonoTouch 中的 Unescape System.Uri

> ID：13408997
> 
> 赞同：0
> 
> 时间：2012-11-16T01:16:15.760
> 
> 标签：c#, xamarin.ios, uri

在开发我最初的**MonoTouch iOS 应用程序**时，我尝试使用 System.Uri 实例从私有 Web 服务下载受保护的资源，但由于所有实例总是返回未转义的 URL，因此在检查其签名时我的请求失败。

一个好的请求的例子：

```
http://example.com/folder%2Ftest?signature=000%3D 
```

错误请求的示例：

```
http://example.com/folder/test?signature=000= 
```

为了正确下载我的资源，我需要将一个好的 URL 从一个简单的字符串转换为一个好的 Uri 实例。我刚刚开始了这个过程，但我无法得出结论：

```
string urlStringVersion = "http://example.com/folder%2Ftest?signature=000%3D";
//
// urlStringVersion == http://example.com/folder%2Ftest?signature=000%3D

Uri urlUriVersion = new Uri (urlStringVersion);
//
// urlUriVersion == http://example.com/folder/test?signature=000=

var fi = typeof (Uri).GetField ("host", BindingFlags.NonPublic | BindingFlags.Instance);
fi.SetValue (urlUriVersion, "example.com");
//
// urlUriVersion.AbsoluteUri is now == http://example.com/folder/test?signature=000%3D

<Another C# command here>

//
// urlUriVersion.AbsoluteUri is now == http://example.com/folder%2Ftest?signature=000%3D 
```

最后，为了让我的最终**urlUriVersion.AbsoluteUri**指向相同的初始**urlStringVersion**描述的 URL ，我可以使用哪个命令来替换**此处的另一个 C# 命令？**

 ****我需要这种转换工作，否则我将被迫在我的私人网络服务上公开我的资源。

我还测试了一些替代方案：

1.  来自其他问题，例如：[GETting a URL with an url-encoded slash](https://stackoverflow.com/questions/781205/getting-a-url-with-an-url-encoded-slash/784937#784937)但发生了一些异常：

    System.NullReferenceException：对象引用未设置为对象的实例

2.  使用配置文件，但在这种情况下，由于移动设备在技术上没有应用程序域，因此它们不可用。

3.  通过用编码的百分号替换百分号来对 URL 进行双重编码（因此 '%' 变为 '%25'）。

我的尝试都没有解决我的问题。

提前致谢，

皮瓦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T12:33:35.090

您正在使用的[Uri 构造函数](http://msdn.microsoft.com/en-us/library/z6c2z492.aspx)采用未转义的 url 字符串，而不是转义的 url 字符串。

在创建 Uri 实例之前尝试[取消转义](http://msdn.microsoft.com/en-us/library/system.uri.unescapedatastring.aspx)url 字符串：

```
string urlStringVersion = "http://example.com/folder%2Ftest?signature=000%3D";
urlStringVersion = Uri.UnescapeDataString (urlStringVersion);

Uri urlUriVersion = new Uri (urlStringVersion); 
```

如果要将 Uri 转换为（未）转义的字符串，请使用[GetComponents](http://msdn.microsoft.com/en-us/library/system.uri.getcomponents.aspx)方法：

```
var unescaped = urlUriVersion.GetComponents (UriComponents.HttpRequestUri, UriFormat.Unescaped);
var escaped = urlUriVersion.GetComponents (UriComponents.HttpRequestUri, UriFormat.UriEscaped); 
```

**不要更改私有字段的值**，这势必有一天会破坏您的应用程序。您正在规避 Uri 类的每一个测试（您正在以一种非设计的方式使用该类，也未经过测试），此外，实现可能随时更改。****