# StackOverflow 问答 14763000-14763999

# java - eclipse 和 JRE/JDK 的问题

> ID：14763004
> 
> 赞同：1
> 
> 时间：2013-02-07T23:21:10.453
> 
> 标签：java, android, eclipse

我已经下载了所有东西。我已经从开发者网站正确下载了 ADT 包。我也下载并正确安装了 SDK 工具。当我启动 Eclipse 时，它​​告诉我它找不到 JRE 或 JDK 文件。

一开始，我回到网站，它说运行SDK工具可执行文件，它会自动找到并安装JDK文件。当你执行时，它会弹出一个小框，在框中它说它实际上检测到了一个 JDK，它也会安装它。

我已经尝试以多种不同的方式重新安装和重做，但没有任何效果。有人可以指出我另一个方向或告诉我解决方案吗？

先谢谢了。

****编辑****

我已经解决了这个问题，但我现在遇到了不同的错误消息。当我启动 eclipse 时，它​​会给出一个消息框，上面写着：

无法加载 JNI 共享库“列出的路径”

伙计，伙计，伙计，我该怎么办？这是非常令人沮丧的。我不知道为什么我的软件会这样。在学校，在课堂上——今天早些时候——我所做的只是按照开发者网站上的说明，将 SDK 包安装到桌面类计算机上的一个文件夹中，一切正常——就像预期的那样。

请，请帮助我，有人！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T00:41:43.817

检查你的 eclipse.ini 文件 -vm arg 必须指向一个有效的 jvm.dll

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T23:38:33.543

你在 Windows 上工作？

您是否在环境变量中设置了[JAVA_HOME ？](https://confluence.atlassian.com/display/DOC/Setting+the+JAVA_HOME+Variable+in+Windows)

# java - 安卓版KYCircleMenu

> ID：14763005
> 
> 赞同：0
> 
> 时间：2013-02-07T23:21:15.563
> 
> 标签：java, android

我该如何创建 iOS KYCircleMenu 项目的 Android 版本，该项目位于：

[https://github.com/Kjuly/KYCircleMenu](https://github.com/Kjuly/KYCircleMenu)

它不需要完全相同，但我想找到某种教程来创建类似的效果，即围绕中心图像或按钮在圆圈中显示按钮。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T00:16:06.563

不完全是您想要的，但下一个示例可能很有用，您可以根据需要对其进行调整：

[http://www.androidviews.net/2012/10/radial-menu-widget/](http://www.androidviews.net/2012/10/radial-menu-widget/)

[http://developer.samsung.com/s-pen-sdk/samples/Circle-Launcher](http://developer.samsung.com/s-pen-sdk/samples/Circle-Launcher)

[http://www.androidviews.net/2012/12/arcmenu/](http://www.androidviews.net/2012/12/arcmenu/)

[http://www.androidviews.net/2012/11/glowpadview-lockring/](http://www.androidviews.net/2012/11/glowpadview-lockring/)

作为旁注，我建议避免使用圆形菜单，因为当您触摸屏幕时，很难看到所有项目，因为手指/手隐藏了其中的一部分。

# sql-server - 使用每个事件的不同过滤器跟踪多个 TSQL 事件

> ID：14763008
> 
> 赞同：0
> 
> 时间：2013-02-07T23:21:39.310
> 
> 标签：sql-server, tsql

我想跟踪两个事件，SP:Completed 和 SP:StmtCompleted。我想要 ALL SP:Completed 但是如果 ObjectName 列为 NULL，我只想要 SP:StmtCompleted。

我要做的是跟踪所有网站调用以进行调试。我想查看所有存储过程、函数调用等以及来自网站的所有直接查询（手写或 linq 等）。SP：Completed 给了我几乎所有的东西。当我使用 SP:StmtCompleted 时，它提供了太多信息，因为它提供了来自过程和函数内的所有调用，所以我只想要 NULL ObjectNames 如果事件是 SP:StmtCompleted 但想要 SP:Completed 的所有内容（null 而不是 null对象名）。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T20:44:32.527

看起来这不可能直接进行，因为跟踪过滤条件只能[引用一列，而不是两列，并且只能引用一个比较](http://msdn.microsoft.com/en-us/library/ms174404.aspx)。所以你不能构造一个“复杂”的过滤条件，比如`(Event = A and ObjectName is NULL) OR (Event = B)`.

有几个选择是：

*   将跟踪输出保存到表并使用[SQL Profiler](http://msdn.microsoft.com/en-us/library/ms190633%28v=sql.105%29.aspx)或查询表[`fn_trace_gettable()`](http://msdn.microsoft.com/en-us/library/ms188425.aspx)
*   使用扩展事件（应该替换跟踪，尽管我从未使用过它们）

# favicon - 每页新建/更新图标

> ID：14763010
> 
> 赞同：11
> 
> 时间：2013-02-07T23:22:00.110
> 
> 标签：favicon

以为有人可能知道那里的脚本，或者知道如何更新站点的每个部分的图标。我正在处理的构建的每个部分都有强烈的颜色，我认为根据您所在的部分更新图标的颜色可能是一个不错的 UI 触摸。这些可能是一组图标，但会强制进行更改，而不仅仅是在每个部分中添加 favicon 链接 rel。

我知道 Gmail 可以使用未读/新电子邮件更新网站图标。

任何帮助/想法将不胜感激。

干杯，R

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-07T23:29:44.090

您在每个页面上使用链接 rel 是正确的，但强制图标文件刷新的技巧是在图标文件的末尾附加一个数字作为始终变化的参数（时间是最安全的选择）。

以 php 为例：

```
<?php
    echo '<link rel="shortcut icon" href="http://www.yoursite.com/favicon.ico?t=' . time() . '" />';
?> 
```

这样做会使浏览器在每次看到文件时都认为文件是新的，从而避免了缓存问题。我希望这能为您指明正确的方向！

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-07T23:30:38.047

每页可以有不同的网站图标。您只需将以下代码添加到每个 HTML 文件中：

```
<link rel="shortcut icon" href="/YourIcon.ico" type="image/x-icon" /> 
```

# ios - VoiceOver 在 UITextView 的两侧找到“空行”

> ID：14763013
> 
> 赞同：6
> 
> 时间：2013-02-07T23:22:06.517
> 
> 标签：ios, uitextview, voiceover

我有一个表格视图，其中每个单元格仅包含一个 UITextView，设置如下：

```
UITableViewCell *cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:nil];
// Declare and set text & frame
...
UITextView *textView = [[UITextView alloc] initWithFrame:frame];
textView.backgroundColor = [UIColor clearColor];
textView.editable = NO;
textView.font = font;
textView.scrollEnabled = NO;
textView.text = text;
[cell.contentView addSubview:textView]; 
```

当我打开 VoiceOver 进行测试时，我可以在文本视图中文本的左右边缘找到两个地方，它们只是小的空项目，VoiceOver 会说“空行”。如果我有一个多行字符串，例如`@"multiple\nlines"`，那么第一行的右边缘有一个“空行”，第二行的左边缘有另一个。我在第一行左侧或第二行右侧找不到“空行”，但据我所知，它们很难找到。

为什么 VoiceOver 会找到这些“空行”？我该如何摆脱它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-29T06:31:47.267

这是我们今天提出的[这个错误](http://openradar.io/12430939)的解决方法。

子类 UITextView 并覆盖：

```
- (BOOL)isAccessibilityElement {
    return NO;
} 
```

返回`NO`选择退出 VoiceOver。然后，让一个容器添加 textview 并在容器视图上设置一个自定义的 accessibilityLabel ：

```
containerView.accessibilityLabel = textview.text 
```

这显然不适用于某些情况（我还没有研究过太多编辑），但它至少可以让您到达文本视图不显示相关行为的地方。

# mongodb - Cloud Foundry：“应用程序无法启动”与猫鼬

> ID：14763018
> 
> 赞同：0
> 
> 时间：2013-02-07T23:22:49.037
> 
> 标签：mongodb, mongoose, cloud-foundry

我有一个简单的快递应用程序`mongoose`。当我尝试使用 vmc push 将其上传到 cloudfoundry 时，部署过程失败：

```
Checking savenswap... GAVE UP
Application failed to start. 
```

我的问题是当我使用这条线时：

```
var mongoose = require('mongoose'); 
```

它失败了，因为当我不使用时`mongoose`，但`mongoDB`通常情况下，它会成功上传应用程序。我必须在我的`cloudfoundry`实例上像 npm install 一样运行吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T21:37:35.900

Cloud Foundry 应该处理 npm 模块的安装。您是否有列出您的依赖项的有效 package.json 文件？你有在本地运行 npm install 和 shrinkwrap 吗？

有关更多信息，请参阅[http://blog.cloudfoundry.com/2012/12/19/recent-changes-in-node-js-modules-support/](http://blog.cloudfoundry.com/2012/12/19/recent-changes-in-node-js-modules-support/)。

# maven - 安装或部署失败的自定义 Maven 插件

> ID：14763024
> 
> 赞同：1
> 
> 时间：2013-02-07T23:23:16.720
> 
> 标签：maven, plugins, deployment

我编写了一个自定义 maven 插件，它使用 svnkit 来检测是否有未提交的本地更改或者您的工作副本是否与 svn 存储库不同步，然后使 mvn 部署失败。

这是执行代码：

```
public void execute() throws MojoExecutionException, MojoFailureException {

    PluginDescriptor pd = (PluginDescriptor)getPluginContext().get("pluginDescriptor");
    MavenProject p = (MavenProject)getPluginContext().get("project");

    //init log
    Log log = getLog();
    SVNHelper.initLogger(log);

    //Throws MojoFailureException if there are uncommitted changes
    checkForUncomittedChanges(p.getBasedir(), log);

    //Throws MojoFailureException if the working copy is not up to date
    checkForWorkingCopyUpToDate(p.getBasedir(), log);
} 
```

然后在使用插件的 pom.xml 中，我将它绑定到部署

该插件被正确调用，但在部署已经发生后构建失败。我可以移动要在安装阶段执行的插件，但在这种情况下我不希望安装显示构建失败，我只想停止部署。

有什么我想念的吗。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T20:25:53.767

给你两个建议：

1.  （我们这样做的方式）在 SVN 检查和配置 Nexus 安全性之后使用 Jenkins 进行构建，*只*让 Jenkins 用户进行部署。这种方法不需要自定义插件（用户可以从 pom.xml 中删除）。

2.  修改默认生命周期。

我猜你可能所做的只是使用@phase 配置Mojo 以使其在部署阶段触发。确保部署阶段的两个目标（deploy:deploy 和 your:goal）在同一个地方定义，然后确定执行顺序。

为此，您需要定义一个自定义生命周期 ( [http://www.sonatype.com/books/mvnref-book/reference/writing-plugins-sect-plugins-lifecycle.html](http://www.sonatype.com/books/mvnref-book/reference/writing-plugins-sect-plugins-lifecycle.html) ) 并在 . 从来没有这样做过，我不知道您是否可以简单地覆盖默认/jar 生命周期，或者您是否必须创建自己的新包装类型。

如有疑问，请认真考虑建议 1。

# php - 并非所有行都输出 PHP Mysql

> ID：14763027
> 
> 赞同：0
> 
> 时间：2013-02-07T23:23:20.390
> 
> 标签：php, mysql

在这段代码中，我试图用我搜索的标签输出所有图像。我创建了 2 张具有相同标签“嗨”的图像。

该程序仅输出其中一张图像。但是当我回显 $rows 数字时，它等于 2。当我在 MYSQL 中运行查询时，它也返回了 2 行。我不明白为什么要显示所有图像。

```
 $input = ($_GET['input']);
$query = "SELECT * FROM `photo`.`photo` WHERE `tags` LIKE '%$input%'";
$result = mysql_query($query);
$data = mysql_fetch_array($result) or die (mysql_error());
$rows = mysql_num_rows($result);
$image = $data['image'];
     header('Content-type: image/jpeg');
     echo $image; 
```

这不是我的全部代码，但这是我认为必要的全部。这是另一个页面中显示的内容。

```
echo "<img src='photolarge.php?input=$input'>" 
```

当我回显 $rows 它输出数字 2 所以我知道查询正在工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T23:24:57.247

您需要使用循环来遍历结果数组。

```
$query = "SELECT * FROM `photo`.`photo` WHERE `tags` LIKE '%$input%'";
$result = mysql_query($query);
while($rows = mysql_fetch_array($result)) {
    echo $rows[image];
} 
```

正如我在评论中提到的，请不要使用`mysql_`函数。您还需要清理您的参数，因为您的代码容易受到 SQL 注入的影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T23:25:10.293

您需要获取第 4 行中所有返回的行，而不仅仅是第一行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T23:27:02.173

尝试这个

```
 $query = "SELECT * FROM `photo`.`photo` WHERE `tags` LIKE '%$input%'";
   $result = mysql_query($query);
   while($row = mysql_fetch_array($result)) {
   echo $row['image'];
   } 
```

提示：尝试改成`MYSQLI`or `PDO`，MYSQL不再维护

# java - bean 属性上的错误日期格式

> ID：14763029
> 
> 赞同：-1
> 
> 时间：2013-02-07T23:23:39.150
> 
> 标签：java, jsf, primefaces

我正在尝试从 p:calendar (2013-02-14) 获取日期并将其传递给 bean 属性。它有效，但日期格式与我通过它的日期格式不同。

代码：

```
<h:outputLabel value="Start date:"></h:outputLabel>
<p:calendar pattern="yyyy-MM-dd" showButtonPanel="true" navigator="true"  id="startDate" value="#{dodajanjeProjekta.start}" >
    <f:convertDateTime pattern="yyyy-MM-dd"/>
</p:calendar> 
```

* * *

值必须为 2013 年 2 月 14 日，但为 2013 年 2 月 14 日星期四 01:00:00 CET

![调试时](../Images/9f7abb18f4ac51b41e68082dfbef12d8.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T23:42:17.613

`Date`对象将日期存储为`long`基于纪元的毫秒数。那就是`fastTime`你可以看到的。

当它显示为`2013-02-14`或`Thu Feb 14 01:00:00 CET 2013`两者具有相同的值时，它们只是以不同的方式格式化，您必须考虑时区。

```
<f:convertDateTime pattern="yyyy-MM-dd"/> 
```

告诉在**显示**`jsf`日期时使用特定的格式化程序，它仍将以相同的方式存储它。另一方面，调试器在显示对象时只会使用对象的默认格式。

 **尝试使用

```
new SimpleDateFormatter("yyyy-MM-dd").format(this.start) 
```

在您的表达式窗口中，您应该可以看到想要查看的日期。**

# c++ - 在 Visual Studio 2012 (C++) 中使用 .lib

> ID：14763031
> 
> 赞同：2
> 
> 时间：2013-02-07T23:24:06.710
> 
> 标签：c++, static-libraries, using, function-call, .lib

我有一个 .lib 静态库。我已在链接器设置“附加库目录”和“附加依赖项”下链接它，并使用`pragma comment (lib, "mylib").`. 所有这些都编译得很好。

我要问的是，我似乎只能在查看时找到链接解决方案，即如何实际使用其中的功能。如果我的静态库中引用了一个函数“MyFunc”，我该如何调用它？Visual Studio 当前无法识别库中定义的任何命名空间或函数。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T23:26:36.983

您需要获取该库的头文件，该文件通常随库一起提供。之后，您需要将它包含在要使用其中的函数的文件中，并使用声明的原型调用函数。

您的编译器需要了解函数的原型——因为它无法读取/解析 lib 文件——这是链接器的工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T23:28:49.887

如果我理解你的要求，你需要为你的函数声明一个原型：

说你的库有：

```
int Foo(int bar) { ... } 
```

在您`pragma`的库所在的“消费者”中，您需要以下内容：

```
extern int Foo(int bar); 
```

甚至只是：

```
int Foo(int bar); 
```

通常，您通过头文件（`.h`文件）来执行此操作，对于库，它们通常被称为“包含文件”

# clojure - 您如何为 Leiningen 配置专有依赖项？

> ID：14763039
> 
> 赞同：5
> 
> 时间：2013-02-07T23:25:16.223
> 
> 标签：clojure, leiningen, clojure-java-interop

我们正在开发一个有一些 Clojure-Java 互操作的项目。至此，我们有一个具有各种依赖关系的类，我们将其放入 Eclipse 中的用户库中进行开发，但当然这在使用 Leiningen (2.x) 时无济于事。我们的大多数依赖项都是专有的，因此它们不在某个存储库中。

最简单/正确的方法是什么？

我见过[leiningen - 如何为本地 jar 添加依赖项？](https://stackoverflow.com/questions/2404426/leiningen-how-to-add-dependencies-for-local-jars)，但它似乎已经过时了？

**更新：所以我按照**[这些说明](http://www.pgrs.net/2011/10/30/using-local-jars-with-leiningen/)和[github 上的 lein 部署文档](https://github.com/technomancy/leiningen/blob/master/doc/DEPLOY.md)为我的 jar 创建了一个本地 maven 存储库，并像这样编辑了我的 project.clj 文件：

```
:dependencies [[...]
               [usc "0.1.0"]]
:repositories {"usc" "file://maven_repository"} 
```

其中 maven_repository 位于项目目录下（因此不使用`file:///`）。当我运行“lein deps”时——我收到了这条消息：

```
Retrieving usc/usc/0.1.0/usc-0.1.0.pom from usc
Could not transfer artifact usc:usc:pom:0.1.0 from/to usc (file://maven_repository): no supported algorithms found
This could be due to a typo in :dependencies or network issues.
Could not resolve dependencies 
```

“找不到支持的算法”是什么意思，我该如何解决？

**Update2：在**[这里](https://gist.github.com/stuartsierra/3062743)找到答案的最后一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T00:53:41.247

将它们作为依赖项添加到您的 leiningen 项目中。您可以编造名称和版本。然后运行 ​​lein deps 并在找不到时显示错误消息，它将为您提供运行的确切命令，以便您可以**将 jar 安装到本地存储库**，然后您决定使用共享存储库，您可以使用相同的过程来放置您的那里的依赖。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T02:43:06.450

@Arthur 的回答很好，但我想我会更充实一点，因为它缺少一些细节。

1.  始终牢记[可重复性](https://github.com/technomancy/leiningen/wiki/Repeatability)。如果您没有做到让需要访问工件的任何人都可以以标准方式访问工件，那么您就是在寻求支持。

2.  [部署文档](https://github.com/technomancy/leiningen/blob/master/doc/DEPLOY.md)是了解部署工件所需了解的所有信息的好地方。由于您处于多语言环境中，因此您可能无法`lein`负责部署所有工件，但至少您可以将您的 clojure 特定 jar 放到 S3 甚至文件共享中（如果您愿意的话）。您的其余工件必须直接使用 Maven 或 Ant 将工件上传到文件服务器或 S3 上的 Maven 存储库。在我目前的公司，我们正在使用 technomancy 的优秀[s3 wagon private](https://github.com/technomancy/s3-wagon-private)来托管我们的封闭源代码工件和[clojars](https://clojars.org/)来托管我们可以开源的任何东西。

3.  @Arthur 指的是做一个`lein install`. 所做的只是将当前项目的副本安装到您​​的本地`.m2`目录中，以便您盒子上的其他项目可以引用它们。除非您已将 maven 安装配置为使用文件夹的共享目录`.m2`（在您的环境中可能不是一个坏主意？），否则这将意味着签出您的项目的任何其他人*都无法构建它*。如果您想走这条路，您需要将您的`localRepository`节点设置`$M2_HOME/conf/settings.xml`为团队其他成员可以访问的共享位置。有关更多信息，请参阅[文档](http://maven.apache.org/settings.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T02:35:36.207

YMMV，但我发现当您使用 Polyglot Clojure / Java 项目时，最好使用 Maven 而不是 Leiningen。

这主要是因为基于 Java 的工具（Eclipse 等）理解 Maven 项目但并不真正理解 Leiningen 项目。优秀的逆时针 Clojure 插件正在慢慢变得更好，但是对于基于 IDE 的高效工作流程来说，集成仍然不够好。

在存储库方面，我建议设置一个私有共享 Maven 存储库。如果您计划在团队中管理一组复杂的依赖项，您迟早会需要它：不妨咬紧牙关，现在就完成它。

# ios - 每个 UIViewController 有多个“笔尖”

> ID：14763046
> 
> 赞同：0
> 
> 时间：2013-02-07T23:25:46.880
> 
> 标签：ios, uiviewcontroller, controller, uiimageview, segue

我正在使用情节提要，我希望两个 UIViewControllers 共享同一个控制器类。我已经完成了这项工作，并将我的 UIImageViews 连接到了他们的 IBOutlets。

当我打电话`[day3 setImage:[UIImage imageNamed: @"1.png"]];`

它不会改变图像。这与它与另一个视图共享相同的控制器类有什么关系吗？

这个打开 UIImageViews 的视图是通过 push segue 从同一个控制器类控制的另一个视图打开的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T02:12:40.140

您的问题是，虽然两个视图都使用相同的 UIViewController，但它们连接到它们的不同实例。让我们将 ViewController 称为 myViewController。当新视图被推送时，它实际上创建了一个全新的 myViewController。因此，您的应用程序中现在有两个处于活动状态。myViewController 的一个实例用于第一个视图，另一个用于第二个视图。因此，您不能直接从该控制器的其他视图实例中操作视图。

为了设置属性，您需要在 myViewController 的两个实例之间进行通信，就像它们是完全不同的 ViewController 一样。如果您需要进一步的帮助或解释，请告诉我。

# html - nokogiri 移动一个标签，如果它破坏了父节点文本

> ID：14763048
> 
> 赞同：0
> 
> 时间：2013-02-07T23:26:12.520
> 
> 标签：html, ruby, nokogiri

我检查每个终端节点的文本。A 标记破坏了文本，因此文本与 /PART/ 不匹配。是否可以移动A标签的位置：

```
<P><FONT SIZE=3><B>PA<A NAME="name"></A>RT</B></FONT></P> 
```

至

```
<P><FONT SIZE=3><B><A NAME="name"></A>PART</B></FONT></P> 
```

但是如果 A 标签没有破坏父节点的文本，我将保持原样。

我不知道如何判断标签是否破坏了父节点的文本。

这是我尝试过的代码，不考虑标签是否破坏了文本。

```
require 'nokogiri'
require 'awesome_print'

html = '<P><FONT SIZE=3><B>PA<A NAME="name"></A>RT II</B></FONT></P>
<P><FONT SIZE=3><B><A NAME="name"></A>PART II</B></FONT></P>'

doc = Nokogiri::HTML(html)

doc.search('a').each do |n|
    text = n.parent.text
    n.parent.replace n
    n.parent.content = text
end 
```

输出

```
 <p><font size="3">PART II</font></p>
 <p><font size="3">PART II</font></p> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T04:04:34.617

要将先前的文本移动到 a 的另一侧，您可以执行以下操作：

```
a.add_next_sibling(a.previous) if a.previous && a.previous.text? 
```

# iphone - sendAsynchronousRequest NSURLConnectionRequest

> ID：14763050
> 
> 赞同：0
> 
> 时间：2013-02-07T23:26:18.113
> 
> 标签：iphone, ios, objective-c, ipad

在下面的方法中，如果我在completionHandler中进行数据处理，这是否会阻塞主线程？换句话说，completionHandler 中执行的任何操作是在主线程上完成的，还是在后台线程上完成的？

```
+ (void)sendAsynchronousRequest:(NSURLRequest *)request
                          queue:(NSOperationQueue*) queue
              completionHandler:(void (^)(NSURLResponse*, NSData*, NSError*)) handler NS_AVAILABLE(10_7, 5_0); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T23:30:16.500

根据[文档](http://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSURLConnection_Class/Reference/Reference.html#//apple_ref/occ/clm/NSURLConnection/sendAsynchronousRequest%3aqueue%3acompletionHandler%3a)，`queue`是：

> 当请求完成或失败时，处理程序块被分派到的操作队列。

所以`handler`将在那里进行。值得注意的是，对于实际的 URL 连接将在哪里完成，都没有做出任何承诺，所以如果你想在主线程上完成，你应该只指定`[NSOperationQueue mainQueue]`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T03:16:17.903

这取决于您支持的操作系统版本。根据[文档](http://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSURLConnection_Class/Reference/Reference.html#//apple_ref/occ/clm/NSURLConnection/sendAsynchronousRequest:queue:completionHandler:)，完成处理程序块在 NSOperationQueue 上执行。

```
+(void)sendAsynchronousRequest:(NSURLRequest *)request
                      queue:(NSOperationQueue*) queue
          completionHandler:(void (^)(NSURLResponse*, NSData*, NSError*)) handler NS_AVAILABLE(10_7, 5_0); 
```

进入 NSOperationQueue[文档](http://developer.apple.com/library/ios/#documentation/Cocoa/Reference/NSOperationQueue_class/Reference/Reference.html#//apple_ref/doc/c_ref/NSOperationQueue)的几行，你会看到这句话：

> 操作队列通常提供用于运行其操作的线程。在 OS X v10.6 及更高版本中，操作队列使用 libdispatch 库（也称为 Grand Central Dispatch）来启动其操作的执行。因此，操作总是在单独的线程上执行，无论它们被指定为并发操作还是非并发操作。然而，在 OS X v10.5 中，只有当它们的 isConcurrent 方法返回 NO 时，操作才会在单独的线程上执行。如果该方法返回 YES，则操作对象应创建自己的线程（或启动一些异步操作）；队列没有为它提供线程。
> 
> 注意：在 iOS 4 及更高版本中，操作队列使用 Grand Central Dispatch 来执行操作。在 iOS 4 之前，它们为非并发操作创建单独的线程，并从当前线程启动并发操作。有关并发和非并发操作之间的区别以及它们如何执行的讨论，请参阅 NSOperation 类参考。

如果您的应用程序支持 OSX v10.6 及更高版本，则完成处理程序应在单独的线程上执行。在 OS X v10.5 中，您必须指定它。对于 iOS，它也使用 GCD，因此操作也可以在 iOS 4 及更高版本的单独线程上执行。希望这比汤米的回答更清楚。

# c++ - C++，三元运算符操作数求值规则

> ID：14763054
> 
> 赞同：10
> 
> 时间：2013-02-07T23:26:38.063
> 
> 标签：c++

可以说我有以下代码：

```
std::vector<T> R;
if (condition) R = generate();
...
for (int i = 0; i < N; ++i) {
    const auto &r = (R.empty() ? generate() : R);
} 
```

似乎无论`R.empty()`. 这是标准行为吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-07T23:33:34.753

来自 C++ 11 标准的第 5.16/1 段：

> 条件表达式从右到左分组。第一个表达式根据上下文转换为 bool（第 4 条）。它被评估，如果为真，则条件表达式的结果是第二个表达式的值，否则是第三个表达式的值。**仅计算第二个和第三个表达式中的一个**。与第一个表达式关联的每个值计算和副作用在与第二个或第三个表达式关联的每个值计算和副作用之前排序。

# android - android - 通知而不提醒用户

> ID：14763059
> 
> 赞同：0
> 
> 时间：2013-02-07T23:26:54.300
> 
> 标签：android

我目前有一个持续的通知，显示有关我的应用程序的一些信息。虽然此信息很有用，但用户无需实际看到我已创建通知。它基本上在那里告诉他们“嘿，我的应用程序正在后台执行操作，单击此处返回它”。

我的通知工作正常，但是每当我调用“.notify()”时，我的通知都会在屏幕顶部的通知栏中显示我的通知中的文本，就像短信一样。

我想默默地做，所以当我打电话通知时，它不会在做“卷起”动画之前在小通知栏中显示我的通知文本。

```
 Context context = getApplicationContext();
    Intent notificationIntent = new Intent(this, AudioPlayer.class);
    PendingIntent contentIntent = PendingIntent.getActivity(this, 0,
            notificationIntent, 0);
    Notification notification = new Notification(R.drawable.ic_launcher,
            title, System.currentTimeMillis());

    RemoteViews contentView = new RemoteViews(getPackageName(),
            R.layout.note_layout);

    ~~~ remote views stuff ~~~

    contentView.setTextViewText(R.id.notification_title, title);
    contentView.setTextViewText(R.id.notification_text, author);
    notification.contentView = contentView;
    notification.contentIntent = contentIntent;
            notification.flags |= Notification.FLAG_ONGOING_EVENT; 
    mNotificationManager.notify(8675309, notification); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T23:36:22.893

我不确定操作系统是否允许这样做。

您要隐藏的内容称为 Ticker。

您可以尝试设置一个空的 Ticker Text：

```
Notification notification = new Notification(R.drawable.ic_launcher,
            "", System.currentTimeMillis()); 
```

# jquery - jQuery 使用数字 (#) 符号传递字符串参数

> ID：14763060
> 
> 赞同：0
> 
> 时间：2013-02-07T23:26:54.547
> 
> 标签：jquery, asp.net, numbers, jquery-ui-dialog, symbols

我正在从 ASP.Net 调用一个 jQuery 模态对话框函数，并且我正在向它传递一些参数。其中一个参数包含一个# 符号，因此，jQuery 模态对话框调用不会执行。

解决这个问题的方法是什么？我尝试通过用这个 '\#' 替换字符串 '#' 来转义字符，但仍然没有成功。

谢谢。

从我的头顶代码..

```
String var1 = "#3 and #4 should be on the list.";
lnkDetails.OnClientClick = "openDialog('" + var1 + "'); 
```

和正常的 jQuery 对话框功能：

```
function openDialog(varPassed) {
            $("#divModal").dialog({
                width: 600,
            });

            $('#<%= label1.ClientID %>').text(varPassed); 
```

更新：由于这条线，模态似乎没有出现：

```
$('#<%= label1.ClientID %>').text(varPassed); 
```

当值被分配给模态对话框本身的 div 内的标签时，模态窗口不会显示。

这是模态窗口。

```
<div id="divMaterialDetails" title="Material Details" style="display:none" >
    <asp:Label ID="label1" runat="server" CssClass="formLabel"/>
</div> 
```

如果我注释掉值的分配，模式就会出现。

那么我如何能够将传递给模态的值分配给标签，以便模态显示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T01:12:32.743

**#**符号根本不是问题。`dialog`方法不是 jQuery 本身的一部分，但它是[jQuery UI](http://jqueryui.com/)的一部分。你是否也包含了 jQuery UI 库，作为 jQuery 的兼容版本？注释掉/删除`$("#divModal").dialog`电话，看看是否一切正常。我在有和没有这部分的情况下对此进行了测试，并且在这一行中，它没有在导致错误的那一行之后执行该行。当我包含 jQuery UI 时，它开始工作。

一般来说，如果您不确定您的代码可能有什么问题，请尝试注释掉一些您认为可能会导致问题的部分，只要注释掉/删除某些内容就能解决问题。通过逐一排除可能的“麻烦制造者”，更容易找出发生了什么。当然，使用调试器 - 对于 Firefox，带有 JavaScript 控制台的[Firebug](https://getfirebug.com/)扩展非常有用。您可以阅读可以引导您找到问题真正根源的错误消息。

顺便说一句，如果您不希望浏览器跟随点击的链接，请考虑添加`return false;`以下`OnClientClick`内容：

```
lnkDetails.OnClientClick = "openDialog('" + var1 + "');return false;"; 
```

检查[此问题](https://stackoverflow.com/questions/128923/whats-the-effect-of-adding-return-false-to-an-onclick-event)以获取有关此的更多信息。

**编辑：**

我的版本在线可用：

*   [CodeRun 的源代码](http://www.coderun.com/ide/?w=eoKTQxL5R0-0xxLNxPyp1w)

一切都在`Default.aspx`其中，`Default.aspx.cs`文件、控件都在`Default.aspx.designer.cs`. 您可以通过[CodeRun](http://www.coderun.com/)发布您的版本，向我们展示可能导致问题的上下文和其他元素。

# java - Cloud Endpoints 集合参数

> ID：14763061
> 
> 赞同：5
> 
> 时间：2013-02-07T23:27:00.967
> 
> 标签：java, google-app-engine, google-cloud-endpoints

我正在使用 Google App Engine Cloud Endpoints 并尝试接收一个集合参数。不确定我是否可以做到这一点。我知道我可以返回一个列表或任何集合。

这：

```
 public List<Pair> initializationSetup(Pair pPair){} 
```

工作正常，但如果我尝试接收对列表，则不会创建 .api 文件。

```
 public List<Pair> initializationSetup(List<Pair> pPairs){ 
```

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-21T16:59:00.137

Cloud Endpoints 仅处理具有 bean 标准的类。

因此，我创建了一个名为 ObjectListContainer 的新类：

```
public class ObjectListContainer {
    public List<Object> getObjectsList() {
        return ObjectsList;
    }
    public void setObjectsList(List<Object> objectsList) {
        ObjectsList = objectsList;
    }
    private List<Object> ObjectsList;
} 
```

如果你试图返回一个字符串，同样的问题，你不能。您必须制作一个 StringContainer。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-27T05:13:05.437

经过长时间思考后，我使用了类似的解决方案。试试这个：

```
public class JsonList<T> { 
private List<T> listItens;

public List<T> getListItens() {
    return listItens;
}

public void setListItens(List<T> listItens) {
    this.listItens = listItens;
}} 
```

并在您的方法中：

```
@ApiMethod(
        name = "name",
        path = "path",
        httpMethod = ApiMethod.HttpMethod.POST)
public CollectionResponse<Information> getInformation(JsonList<String> listOfItens) {} 
```

# c++ - 在 C++ 中将粒子可视化为边缘

> ID：14763067
> 
> 赞同：1
> 
> 时间：2013-02-07T23:27:21.817
> 
> 标签：c++, opengl

我是一名新手程序员，正在学习 C++。我正在做一个计算生物学项目，我将细胞表示为粒子。我已经开设了一门课`Cell`，我在其中跟踪 x 和 y 位置、速度和加速度。

我有一个问题有 2 分：1）现在，我只跟踪我的细胞的质心，所以它只是点。但是，我需要为所有这些粒子制作具有相同边缘的细长粒子（细胞都是相同的）。我想不出一种方法来初始化一个位于我的质心中间的固定边缘，并用“简单”的 C++ 代码跟踪它的每个时间步（也使边缘“跟随”我的质心）（意思是我目前的知识）。我的粒子应该是[这样](http://postimage.org/image/q3oue0lkn/)的。

我现在的可视化有点愚蠢......我为每个时间步导出文件中点的坐标，然后我制作了一个脚本来`PNGs`为每个时间步`gnuplot`生成使用，并`PNGs`使用`ffmpeg`. 这导致了我的实际问题。

2）为了解决第一点，我意识到我需要一种更好的可视化方法。我已经研究了 OpenGL 和其他可能的方法来做到这一点，但我觉得有点失落。另外，我猜有一种直接的可视化方法，而不必输出到文件会更快。尽管至少到目前为止，速度对我来说不是问题。

我在 Windows 下，使用 Visual Studio 2010。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T23:58:48.820

至于表示粒子，看起来你可以使用一条线。一种方法是使用端点 A = (x1, y1) 和 B = (x2, y2)。那么“重心”就是中点 M = ((x1 + x2) / 2, (y1 + y2) / 2)。

使用这种表示将使可视化变得非常容易。OpenGL 直接支持在给定端点的情况下绘制线。

# javascript - 需要提取额外数据：如何在不进行 AJAX 调用的情况下做到这一点？

> ID：14763068
> 
> 赞同：0
> 
> 时间：2013-02-07T23:27:22.833
> 
> 标签：javascript, html, ruby-on-rails-3

这应该是一个非常简单的问题。我的应用程序是基于 Ruby on Rails 构建的（我怀疑这是否非常重要——我注意到这一点，所以你们都理解下面的语法）

我有这两个 div：

```
<div id = "1"><%= user.Name %></div>
<div id = "2">Placeholder</div> 
```

当有人将鼠标悬停在 id 为 1 的 div 上时，我想用 id 2 替换 div 的内容。

问题是我要替换 div 2 的内容包含在用户对象中。所以理想情况下，我想在 div 上设置一些附加标签，以便在 JavaScript 鼠标悬停时查找。否则，我将不得不进行 AJAX 调用，这将导致数据库查询以提取相关数据。

我不知道那个标签会是什么......关于我能做什么的任何提示？

谢谢！林戈

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T23:31:43.990

如果可能，您可以使用 html5 'data-*' 属性来存储您想要的任何内容以进行进一步操作。了解有关[此属性](http://html5doctor.com/html5-custom-data-attributes/)的更多信息| [浏览器兼容性](http://caniuse.com/#search=data-)

# ios - 如何确保 iOS 应用不会无限期地在后台挂起？

> ID：14763070
> 
> 赞同：-1
> 
> 时间：2013-02-07T23:27:26.897
> 
> 标签：ios, objective-c, ipad

我们的 iOS 应用程序每次新启动（即未从后台恢复）时都会检索新的应用程序数据。应用程序数据每隔几个月通过网络服务定期更新，所以这通常很好。

但是，在某些极端情况下，用户的 iOS 设备 - 特别是 iPad - 可能会使应用程序在后台暂停很长一段时间 - 可能是无限期的。

是否可以通过告诉 iOS“如果该应用程序已暂停超过几个小时，请释放此应用程序”来缓解这种边缘情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T23:34:28.513

您描述的问题是由于糟糕的应用程序设计或对应用程序架构的理解不足。如果您需要在应用程序激活时刷新应用程序数据，您可以简单地从[UIApplicationDelegate](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIApplicationDelegate_Protocol/Reference/Reference.html)事件（或注册通知）中调用更新函数，特别是：

> applicationDidBecomeActive:
> 
> 告诉代理应用程序已激活。- (void)applicationDidBecomeActive:(UIApplication *)application 参数
> 
> 应用
> 
> ```
> The singleton application instance. 
> ```
> 
> 讨论
> 
> 调用此方法是为了让您的应用程序知道它已从非活动状态变为活动状态。这可能是因为您的应用程序是由用户或系统启动的。如果用户选择忽略将应用程序暂时发送到非活动状态的中断（例如来电或短信），应用程序也可以返回到活动状态。
> 
> 您应该使用此方法重新启动在应用程序处于非活动状态时暂停（或尚未启动）的任何任务。例如，您可以使用它来重新启动计时器或提高 OpenGL ES 帧速率。如果您的应用程序以前在后台，您还可以使用它来刷新应用程序的用户界面。
> 
> 调用此方法后，应用程序还会发布 UIApplicationDidBecomeActiveNotification 通知，让感兴趣的对象有机会响应转换。可用性

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T23:38:33.440

当应用程序暂停时，它不应该刷新。根据 Apple 的文档，除非您的应用程序已注册特定后台进程之一，否则该应用程序基本上会被冻结，直到它恢复。不应该进行任何网络调用。

但是，如果您确实想在应用程序暂停时间过长后将其终止，您可以实施一个 hack，将后台计时器注册 10 分钟，然后在 10 分钟后调用一些您知道会崩溃的垃圾代码。问题解决了 ：）

# eclipse - Eclipse EclEmma 错过了指令

> ID：14763073
> 
> 赞同：5
> 
> 时间：2013-02-07T23:27:39.907
> 
> 标签：eclipse, code-coverage, sts-springsourcetoolsuite, emma

我正在使用 Eclipse-STS + EclEmma 插件来查看我的代码的覆盖率。在我所有的抽象实用程序类（只有静态方法）中，我`Instructions Counter`在类定义行看到 3 条遗漏的指令（报告）：

![在此处输入图像描述](../Images/1ef301a36be2cbbf418b231f76a4250e.png)

红线左侧没有可用的标记，所以我不知道这些说明到底是什么。也许一些构造函数？我能做些什么来覆盖它们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T19:42:05.697

我发现实现 100% 覆盖的一种方法是编写如下测试方法：

```
@Test
public void coverage(){
    KeyEscaper a = new KeyEscaper() {
    };
} 
```

只要问题只涉及具有所有静态方法的 utils 类，以这种方式匿名实例化它们就不是问题。

# css - IE 中下划线粗细不一致

> ID：14763077
> 
> 赞同：0
> 
> 时间：2013-02-07T23:28:12.747
> 
> 标签：css, internet-explorer, cross-browser

我希望我的锚链接的内容始终是粗体和下划线，但锚标签内的跨度不应该是粗体。

示例标记：

```
<a>Hello, <span>fooooo</span> bar</a> 
```

款式：

```
 a {
        font-weight: bold;
        text-decoration: underline;
    }

    span {
        font-weight: normal;
    } 
```

![在此处输入图像描述](../Images/207f488988d5535f7286a5d6c33d1ce2.png) *（右键单击图像并选择查看/在新选项卡中打开以获得更好的视图）*

在 IE8+ 中，下划线粗细不一致：显然它是由链接内粗体文本的百分比决定的。*有没有办法让页面上每个*链接的下划线看起来完全相同？

小提琴：http: [//jsfiddle.net/FfBGn/](http://jsfiddle.net/FfBGn/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T23:34:26.483

Kinda hack-ish，但`text-decoration:underline`你可以使用它来代替 ，而不是：

```
border-bottom:1px solid #000; 
```

[***演示***](http://jsfiddle.net/UrztG/)

* * *

或者，如果您必须使用`text-decoration:underline`，您可以将粗体**加粗**。

```
font-weight:800; 
```

[***演示***](http://jsfiddle.net/aJSNj/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T23:33:14.033

也许更简单的方法是设置锚的边框而不是下划线？这样你可以自己决定厚度吗？

```
border-bottom: 1px solid #000000; 
```

# java - 启动JVM时-Xms和-Xmx参数是什么？

> ID：14763079
> 
> 赞同：1286
> 
> 时间：2013-02-07T23:28:20.607
> 
> 标签：java, memory-management, parameters, jvm

请解释 JVM 中`Xms`和`Xmx`参数的使用。它们的默认值是什么？

* * *

## 回答 #1

> 赞同：1666
> 
> 时间：2013-02-07T23:29:31.977

该标志`Xmx`指定 Java 虚拟机 (JVM) 的最大内存分配池，同时`Xms`指定初始内存分配池。

这意味着您的 JVM 将以`Xms`一定数量的内存启动，并且能够使用最大`Xmx`数量的内存。例如，像下面这样启动 JVM 将使用 256 MB 内存启动它，并允许进程使用最多 2048 MB 内存：

```
java -Xms256m -Xmx2048m 
```

内存标志也可以指定为不同的大小，例如千字节、兆字节等。

```
-Xmx1024k
-Xmx512m
-Xmx8g 
```

该`Xms`标志没有默认值，`Xmx`通常默认值为 256 MB。这些标志的常见用途是当您遇到`java.lang.OutOfMemoryError`.

使用这些设置时，请记住这些设置是针对 JVM 的*堆*的，并且 JVM 可以并且将使用比仅分配给堆的大小更多的内存。来自[Oracle 的文档](http://docs.oracle.com/cd/E13150_01/jrockit_jvm/jrockit/geninfo/diagnos/garbage_collect.html)：

> 请注意，JVM 使用的内存不仅仅是堆。例如，Java 方法、线程堆栈和本机句柄被分配在与堆分开的内存中，以及 JVM 内部数据结构中。

* * *

## 回答 #2

> 赞同：364
> 
> 时间：2013-11-28T11:03:24.147

运行命令`java -X`，您将获得所有`-X`选项的列表：

```
C:\Users\Admin>java -X
-Xmixed           mixed mode execution (default)
-Xint             interpreted mode execution only
-Xbootclasspath:<directories and zip/jar files separated by ;>
                      set search path for bootstrap classes and resources
-Xbootclasspath/a:<directories and zip/jar files separated by ;>
                      append to end of bootstrap class path
-Xbootclasspath/p:<directories and zip/jar files separated by ;>
                      prepend in front of bootstrap class path
-Xdiag            show additional diagnostic messages
-Xnoclassgc       disable class garbage collection
-Xincgc           enable incremental garbage collection
-Xloggc:<file>    log GC status to a file with time stamps
-Xbatch           disable background compilation
-Xms<size>        set initial Java heap size.........................
-Xmx<size>        set maximum Java heap size.........................
-Xss<size>        set java thread stack size
-Xprof            output cpu profiling data
-Xfuture          enable strictest checks, anticipating future default
-Xrs              reduce use of OS signals by Java/VM (see documentation)
-Xcheck:jni       perform additional checks for JNI functions
-Xshare:off       do not attempt to use shared class data
-Xshare:auto      use shared class data if possible (default)
-Xshare:on        require using shared class data, otherwise fail.
-XshowSettings    show all settings and continue
-XshowSettings:all         show all settings and continue
-XshowSettings:vm          show all vm related settings and continue
-XshowSettings:properties  show all property settings and continue
-XshowSettings:locale      show all locale related settings and continue 
```

**-X 选项是非标准的，如有更改，恕不另行通知。**

我希望这将帮助您理解`Xms`，`Xmx`以及许多其他最重要的事情。:)

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2015-02-17T09:50:42.757

您可以在 IDE 中指定它。例如，对于*运行配置*→ *VM 参数*中的 Eclipse 。您可以输入`-Xmx800m -Xms500m`为

![在此处输入图像描述](../Images/47e2df1c339f51e914eed8862198d12f.png)

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2020-01-02T07:04:01.507

**-Xms**启动时的初始堆大小，但是，在工作过程中， 由于用户不活动或 GC 迭代，堆大小可能小于**-Xms 。**这不是所需的最小堆大小。

**-Xmx**最大堆大小

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2014-02-07T13:43:06.637

这个问题本身已经在上面讨论过了。只需添加部分默认值。

根据[http://docs.oracle.com/cd/E13150_01/jrockit_jvm/jrockit/jrdocs/refman/optionX.html](http://docs.oracle.com/cd/E13150_01/jrockit_jvm/jrockit/jrdocs/refman/optionX.html)

Xmx 的默认值取决于平台和系统中可用的内存量。

# svn - 如何删除工作区？

> ID：14763080
> 
> 赞同：2
> 
> 时间：2013-02-07T23:28:29.967
> 
> 标签：svn

如何删除在错误位置创建的工作区？

我对svn完全陌生。刚刚安装了 svnslik 并且足够远，可以创建一个存储库，然后是一个工作区。但是，它比我预期的多添加了一级目录，所以我想删除工作区并重新创建它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T02:12:52.720

没问题。只需使用当前操作系统的命令删除工作区目录即可。使其成为*Subversion 工作区*的所有信息都嵌入在`.svn`工作区根目录中。

与 Perforce 或 ClearCase 不同，Subversion 存储库服务器不跟踪工作空间。

# terminal - 紧凑型 cygwin 终端

> ID：14763081
> 
> 赞同：0
> 
> 时间：2013-02-07T23:28:35.893
> 
> 标签：terminal, cygwin

我正在寻找一种使 cygwin 终端更紧凑的方法，或者更紧凑的替代终端。目前，我输入的每个命令上面都有一个带有用户名和密码的标题行，每个命令后面都有一个空行。例如：

```
username ~
$ cd tmp

username ~/tmp
$ 
```

每 1 行命令 3 行。我经常在小屏幕上工作，这让所有这些浪费的空间非常烦人。有没有我可以更改的设置来防止所有这些浪费的空间？或者，也许是另一个终端？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T23:32:49.070

这是 Cygwin 设置的默认 shell 提示符。

要在当前终端中使用较小的提示：

```
PS1='$ ' 
```

要使更改永久生效，请将该命令放入您的`~/.bashrc`文件中。

您可以将提示设置为您喜欢的任何内容，如[bash 手册](http://www.gnu.org/software/bash/manual/bashref.html#Printing-a-Prompt)中所述（有几个变量控制不同的提示；`$PS1`是主要的）。

重要的是要记住，在 Cygwin 中（如在 Linux 和 Unix 中），终端程序是一个独立于在其中运行的 shell 的程序。提示由shell控制；bash 是默认值。图形显示由终端仿真器控制，它可以是`rxvt`、`mintty`、`xterm`，甚至是通常运行类似 DOS 的 shell 的 Windows 终端。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T23:33:44.113

您看到的是提示，存储在环境变量 PS1 中

```
echo $PS1 
```

将向您展示它是如何创建的。顺便说一句，该提示由 bash shell 管理，而不是由终端管理。

```
export PS1=$ 
```

只会给你一个 $ 提示

```
export PS1="$ " 
```

将在提示后面留下一些空间。还有更多的可能性，[这里](http://www.cyberciti.biz/tips/howto-linux-unix-bash-shell-setup-prompt.html)有一个很好的教程。

`~/.bashrc`bash 从您的主目录中名为 .bashrc 的文件中读取其设置。请注意，由于名称 ls 中的初始点默认情况下不会显示文件，因此 ls -a 或 ls -la 会。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-27T17:49:33.323

我建议我们使用 Cygwin-X 使用现代终端，​​如下面的交互式菜单所示

[![在此处输入图像描述](../Images/57c66a415ac7147766fadcfabe11683f.png)](https://i.stack.imgur.com/buCbf.png)

我喜欢**Xfce Terminal**，它允许使用字体选项和颜色选项创建选项卡和新窗口

# c - 有没有办法测试 C 标准库中是否提供线程安全函数？

> ID：14763083
> 
> 赞同：3
> 
> 时间：2013-02-07T23:28:41.577
> 
> 标签：c, libc

关于较新版本的 C 标准库中的[线程安全函数](http://pubs.opengroup.org/onlinepubs/009695299/help/codes.html#TSF)，是否有一种跨平台的方法可以通过预处理器定义来判断这些函数是否可用？我指的是诸如`localtime_r()`.

如果没有标准的方式，GCC中可靠的方式是什么？[编辑] 还是带有 unistd.h 的 posix 系统？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T00:01:21.787

没有标准的方法来测试它，这意味着没有办法在所有平台上测试它。类似的工具`autoconf`将创建一个调用此函数的微型 C 程序，然后尝试编译和链接它。它有效，看起来该函数存在，如果不存在，则它可能不存在（或编译器选项错误，`CFLAGS`需要设置适当的）。

所以你基本上有6个选择：

1.  要求他们存在。您的代码只能在它们存在的平台上运行；时期。如果它们不存在，编译将失败，但这不是您的问题，因为平台违反了您的最低要求。

2.  避免使用它们。如果您使用非线程安全的，可能受全局锁（例如互斥锁）保护，它们是否存在并不重要。当然，您的代码只能在具有 POSIX 互斥锁的平台上工作，但是，如果平台没有 POSIX 互斥锁，它也不会有 POSIX 线程，如果它没有 POSIX 线程（我猜你可能正在使用 POSIX 线程 w /o 支持任何替代方案），你为什么要首先担心线程安全？

3.  在运行时决定。根据平台，要么做一个“弱链接”，所以你可以在运行时测试是否找到了函数（指向函数的指针将指向`NULL`如果它不是）或者使用类似的东西动态解析符号`dlsym()`（这也不是真正可移植的，但在 Linux/UNIX 世界中得到广泛支持）。但是，在这种情况下，如果在运行时未找到该函数，则需要回退。

4.  使用类似的工具`autoconf`、其他具有类似功能的工具或您自己的配置脚本在开始编译之前确定这一点（并且可能根据结果设置预处理器宏）。在这种情况下，您还需要一个备用解决方案。

5.  限制使用知名平台。这个功能在某个平台上是否可用通常是已知的（一旦可用，以后也不会消失）。大多数平台都公开了预处理器宏来测试这是什么类型的平台，有时甚至是哪个版本。例如，如果您知道 GNU/Linux、Android、Free/Open/NetBSD、Solaris、iOS 和 MacOS X 都提供此功能，请测试您是否正在为这些平台之一进行编译，如果是，请使用它。如果代码是为另一个平台编译的（或者如果您无法确定是哪个平台），它可能会或可能不会提供此功能，但由于您无法确定，最好安全并使用后备。

6.  让用户决定。要么总是使用后备，除非用户已经表示支持或者反过来做（这可能更有意义），总是假设它在那里，万一编译失败，提供一种用户可以强制你的代码进入“兼容性”的方法mode”，通过某种方式指定线程安全函数不可用（例如，通过设置环境变量或使用不同的 make 目标）。当然，对于（可怜的）用户来说，这是最不方便的方法。

# wpf - WPF 页面中的 ListBox 在我的 PC 上看起来不错，但数据在较小的分辨率下会缩小

> ID：14763084
> 
> 赞同：0
> 
> 时间：2013-02-07T23:28:44.943
> 
> 标签：wpf, xaml, listbox, alignment

我已经尝试了几乎所有对齐和边距的组合，但没有成功。ListBox 位于 WPF 页面上，该页面绑定到主窗口上的框架。

ListBox 本身很好。它就像我预期的那样对齐。我的 ListBoxItem 包含一个图像和一个文本块。TextBlock 被切断。

从下图中可以看出，事情大多都很好。

![在此处输入图像描述](../Images/b2710eb01ac144a6565bcd474a413d02.png)

ListBox 与蓝色框的左边缘和顶部有适当的偏移。内容 Image 和 TextBlock 相当居中，ListBoxItem 轮廓也是如此。这是在我的开发机器上。

我认为使用网格、网格线和对齐属性的全部原因是我们不必设置硬编码大小。我们的控件会自行调整大小。这实际上对其他一切都很好。

但是当我把它放在一个小屏幕上时，我得到了这个：

![在此处输入图像描述](../Images/bc3a63c8b04818b0c7942d3d71dd5091.png)

ListBox 本身仍然正确对齐。但是现在 ListBoxItem 被强制关闭。它的顶部对齐仍然很好，但是底部被推下，所以我们看不到 TextBlock 或 ListBoxItem 的底部。

这是我的 XAML：

```
<Grid VerticalAlignment="Stretch" HorizontalAlignment="Stretch" Margin="1">
    <Grid.RowDefinitions>
        <RowDefinition Height="292*" />
        <RowDefinition Height="30*"/>
    </Grid.RowDefinitions>

    <ListBox Grid.Row="1" Name="lbButtons" Margin="2,0,0,1.5" VerticalAlignment="Stretch" HorizontalAlignment="Stretch" Visibility="Visible" >
        <StackPanel Name="spListBoxItems" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Orientation="Horizontal">
            <ListBoxItem Margin="0,0,0,0" VerticalAlignment="Stretch" HorizontalAlignment="Stretch" >
                <StackPanel Orientation="Vertical" HorizontalAlignment="Center" Margin="10,5,10,5">
                    <Image Source="/COBAN.CobanConsole.UI;component/Images/Buttons/Light/record48_light.png" />
                    <TextBlock Text="Record" Margin="5,5,0,0"></TextBlock>
                </StackPanel>
            </ListBoxItem>
        </StackPanel>
    </ListBox>
</Grid> 
```

没什么。关于发生了什么的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T00:10:32.767

您在网格行定义中使用 * 单位。这些是相对度量：它们只是告诉您行可以占用的空间比例。如果您需要列表框具有特定高度，则应将第二行更改为具有绝对大小，如下所示：

```
<Grid.RowDefinitions>
    <RowDefinition Height="*" />
    <RowDefinition Height="30"/>
</Grid.RowDefinitions> 
```

# java - Android 服务未收到来自 Activity 的消息

> ID：14763088
> 
> 赞同：0
> 
> 时间：2013-02-07T23:28:56.660
> 
> 标签：java, android, android-service

我已经创建了需要能够相互通信的服务和活动。Activity 应该向 Service 发送 Message，Service 应该回复一个结果。

问题是消息似乎没有进入服务。这是代码的日志输出：

```
02-07 18:26:37.057: I/Task Timer(8850): Service bound
02-07 18:26:37.097: V/Task Timer(8850): Service connected: ComponentInfo{com.gawdl3y.android.tasktimer/com.gawdl3y.android.tasktimer.TaskService}
02-07 18:26:37.097: I/Task Timer(8850): Activity sent message: { what=1 when=-1d11h33m57s160ms }
02-07 18:26:37.167: I/ActivityManager(482): Displayed com.gawdl3y.android.tasktimer/.TaskListActivity: +166ms 
```

应用程序中没有其他任何内容被记录。这是我的相关代码：

任务服务.java

```
public class TaskService extends Service {
    public static String TAG = null;

    private final IBinder binder = new ServiceBinder();
    private Messenger messenger = new Messenger(new IncomingHandler()), activityMessenger;

    @Override
    public void onCreate() {
        Log.i(getString(R.string.app_name), "Service started");
        TAG = getString(R.string.service_label);
    }

    @Override
    public IBinder onBind(Intent intent) {
        return binder;
    }

    @Override
    public void onDestroy() {
        Log.i(TAG, "Service destroyed");
    }

    public class ServiceBinder extends Binder {
        TaskService getService() {
            return TaskService.this;
        }
    }

    private final class IncomingHandler extends Handler {
        @Override
        public void handleMessage(Message msg) {
            activityMessenger = msg.replyTo;
            Log.i(TAG, "Service received message: " + msg);

            switch(msg.what) {
            case TaskListActivity.MSG_GET_TASKS:
                // Create the response message and send it
                Message response = Message.obtain(null, 1, tasks);
                try {
                    activityMessenger.send(response);
                    Log.i(TAG, "Service sent message: " + response);
                } catch(android.os.RemoteException e) {
                    Log.i(TAG, "Service failed to send message: " + response + " (" + e.getLocalizedMessage() + " caused by " + e.getCause() + ")");
                }

                // Return the message to the global pool
                response.recycle();

                break;
            default:
                super.handleMessage(msg);
            }
        }
    }
} 
```

任务列表活动.java

```
public class TaskListActivity extends SherlockActivity {

    public static final int MSG_GET_TASKS = 1;

    private TaskService service;
    private Messenger messenger = new Messenger(new IncomingHandler()), serviceMessenger;
    private boolean connected = false;

    private ServiceConnection serviceConnection = new ServiceConnection() {
        public void onServiceConnected(ComponentName name, IBinder service) {
            Log.v(TAG, "Service connected: " + name);

            // Set the service messenger and connected status
            TaskListActivity.this.serviceMessenger = new Messenger(service);
            TaskListActivity.this.connected = true;

            // Create a new message to send to retrieve the tasks
            Message msg = Message.obtain(null, MSG_GET_TASKS);
            msg.replyTo = messenger;

            // Send the message
            try {
                serviceMessenger.send(msg);
                Log.i(TAG, "Activity sent message: " + msg);
            } catch(android.os.RemoteException e) {
                Log.i(TAG, "Activity failed to send message: " + msg + " (" + e.getLocalizedMessage() + " caused by " + e.getCause() + ")");
            }

            // Return the message to the global pool
            msg.recycle();
        }

        public void onServiceDisconnected(ComponentName name) {
            Log.v(TAG, "Service disconnected: " + name);

            // Reset the service messenger and connection status
            TaskListActivity.this.serviceMessenger = null;
            TaskListActivity.this.connected = false;
        }
    };

    @Override
    protected void onStart() {
        super.onStart();

        // Show the loading indicator
        //setSupportProgressBarIndeterminateVisibility(true);

        // Start and bind the service
        Intent intent = new Intent(this, TaskService.class);
        startService(intent);
        if(bindService(intent, serviceConnection, Context.BIND_ABOVE_CLIENT | Context.BIND_ADJUST_WITH_ACTIVITY)) {
            Log.i(TAG, "Service bound");
        } else {
            Log.i(TAG, "Service not bound");
            Toast.makeText(this, "Task Service couldn't be bound", Toast.LENGTH_SHORT).show();
            finish();
        }
    }

    @Override
    protected void onStop() {
        super.onStop();

        // Unbind service
        unbindService(serviceConnection);
        Log.i(TAG, "Service unbound");
    }

    private final class IncomingHandler extends Handler {
        @Override
        public void handleMessage(Message msg) {
            switch(msg.what) {
            case MSG_GET_TASKS:
                Log.i(TAG, "Activity received message: " + msg);
                onTasksLoaded((ArrayList<Task>) msg.obj);
                break;
            default:
                super.handleMessage(msg);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T18:57:35.233

在您的 onBind 方法中，您可以尝试返回 messenger.getBinder() 而不是活页夹吗？

# iphone - Apple 元标记和启动图像不起作用

> ID：14763089
> 
> 赞同：0
> 
> 时间：2013-02-07T23:29:08.890
> 
> 标签：iphone, ruby-on-rails, web-applications, media-queries

我有一个 Rails 应用程序，它使用响应式 Boostrap 布局来缩小移动设备。我想要一个启动画面并隐藏 iphone 上的任务栏

我有以下代码：

```
<head>
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= content_for?(:title) ? yield(:title) : "KegTracker" %></title>
    <%= csrf_meta_tags %>

    <!-- iPhone -->
    <link href="/assets/apple-touch-startup-image-320x460.png"
          media="(device-width: 320px) and (device-height: 480px)
             and (-webkit-device-pixel-ratio: 1)"
          rel="apple-touch-startup-image">
    <!-- iPhone (Retina) -->
    <link href="/assets/apple-touch-startup-image-640x920.png"
          media="(device-width: 320px) and (device-height: 480px)
             and (-webkit-device-pixel-ratio: 2)"
          rel="apple-touch-startup-image">
    <!-- iPhone 5 -->
    <link href="/assets/apple-touch-startup-image-640x1096.png"
          media="(device-width: 320px) and (device-height: 568px)
             and (-webkit-device-pixel-ratio: 2)"
          rel="apple-touch-startup-image">

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.6.1/html5shiv.js" type="text/javascript"></script>
    <![endif]-->

    <%= javascript_include_tag "application" %>
    <%= stylesheet_link_tag "application", :media => "all" %>
    <%= favicon_link_tag 'apple-touch-icon-144x144-precomposed.png', :rel => 'apple-touch-icon-precomposed', :type => 'image/png', :sizes => '144x144' %>
    <%= favicon_link_tag 'apple-touch-icon-114x114-precomposed.png', :rel => 'apple-touch-icon-precomposed', :type => 'image/png', :sizes => '114x114' %>
    <%= favicon_link_tag 'apple-touch-icon-72x72-precomposed.png', :rel => 'apple-touch-icon-precomposed', :type => 'image/png', :sizes => '72x72' %>
    <%= favicon_link_tag 'apple-touch-icon-precomposed.png', :rel => 'apple-touch-icon-precomposed', :type => 'image/png' %>
    <%= favicon_link_tag 'favicon.ico', :rel => 'shortcut icon' %>

    <link href='http://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>

    <script type="text/javascript"
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCDh4VYHZ56mUlwkE6gE16cDRxCaCLjJQE&sensor=false">
    </script>
    <script type="text/javascript"
    src="http://jawj.github.com/OverlappingMarkerSpiderfier/bin/oms.min.js">
    </script>

  </head> 
```

所有图像都正确链接。触摸图标工作正常，但 touch-startup-image 和 apple-mobile-web-app-capable 标签在运行 6.1 的 iPhone 4S 上的 Safari 或 Chrome 上似乎根本不起作用

有没有人有任何想法？Bootstrap 是否覆盖了标签？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T00:27:59.160

正如 Justinavery 所说，您必须添加到主屏幕才能使其正常工作，然后单击该图标。

此外，要使所有链接在生成的“无头视图”内工作，您需要将这段 JS 添加到您的代码中。

```
<!-- to stop the links loading in another window -->
<script>(function(a,b,c){if(c in b&&b[c]){var d,e=a.location,f=/^(a|html)$/i;a.addEventListener("click",function(a){d=a.target;while(!f.test(d.nodeName))d=d.parentNode;"href"in d&&(d.href.indexOf("http")||~d.href.indexOf(e.host))&&(a.preventDefault(),e.href=d.href)},!1)}})(document,window.navigator,"standalone")</script> 
```

取自[这里](https://stackoverflow.com/a/8173161/678849)

# javascript - 寻求使用 jQuery 的 addClass() 函数在悬停和鼠标按下时更改按钮的 CSS

> ID：14763090
> 
> 赞同：0
> 
> 时间：2013-02-07T23:29:11.697
> 
> 标签：javascript, jquery, html, css

我想专门为我的按钮创建悬停和单击效果，但是以一种不同于悬停按钮的方式将其更改为不同的按钮，因此我需要使用 JavaScript，而不是 CSS。

我有以下 jQuery：

```
 // Highlights Browse button when the user hovers over div.upload
    $(".upload").hover(
        function() {
            $("input[type='button']").addClass("browse-hover");
        },
        function() {
            $("input[type='button']").removeClass("browse-hover");
        }
    );

    // Darkens Browse button when user clicks on div.upload
    $(".upload").mousedown(function() {
        $("input[type='button']").addClass("browse-active");
    });

    $(".upload").mouseup(function() {
        $("input[type='button']").addClass("browse-active");
    }); 
```

添加了我的主 CSS 文件中的以下类：

```
.browse-hover {
    background: #9972ad; /* Old browsers */
    background: -moz-linear-gradient(top,  #9972ad 0%, #7a3e99 100%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#9972ad), color-stop(100%,#7a3e99)); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top,  #9972ad 0%,#7a3e99 100%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(top,  #9972ad 0%,#7a3e99 100%); /* Opera 11.10+ */
    background: -ms-linear-gradient(top,  #9972ad 0%,#7a3e99 100%); /* IE10+ */
    background: linear-gradient(to bottom,  #9972ad 0%,#7a3e99 100%); /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#9972ad', endColorstr='#7a3e99',GradientType=0 ); /* IE6-8 */
}

.browse-active {
    background: red;
} 
```

HTML：

```
<div class="upload-form">
            <form action="" method="post" enctype="multipart/form-data">
                <div class="upload">
                    <input type="file" name="file-input">
                     <span class="input-filename">Select a file...</span>
                     <input type="button" value="Browse">
                </div>

                <input type="submit" name="submit" value="Upload">
                <span class="valid-formats">Valid input: .txt files &lt;= 512 KB</span>
            </form>
        </div> 
```

我使用 addClass() 的方式应该覆盖以前的值，因为在（渐变）之前设置了一个背景，我在悬停时会改变它。它根本不起作用。它已正确连接，如果我单击警报集，它将正确执行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T23:37:44.117

按钮是上传的孩子，因此您可以使用完整的 CSS 并尝试：

```
.upload:hover input[type='button'] { /* style */ } 
```

[http://jsfiddle.net/bLXAy/2/](http://jsfiddle.net/bLXAy/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T23:40:12.597

Try running all this code when the DOM is ready by nesting it in `(function() { YOUR CODE });`

# java - Selenium - 10 秒后离开 webdriver 点击

> ID：14763094
> 
> 赞同：1
> 
> 时间：2013-02-07T23:29:26.913
> 
> 标签：java, selenium, webdriver

你知道在有限的时间内执行一个动作的方法吗？就我而言，我使用的是 webdriver。当我验证表单操作做得很好但页面循环运行时。我想在点击后等待 10 秒，然后强制刷新页面。

```
// action that I would leave after 10 seconds
driver.findElement(By.id("submit")).click();    

driver.manage().timeouts().implicitlyWait(10, TimeUnit.SECONDS);
driver.navigate().refresh(); 
```

点击后，我会在 10 秒后进入下一步，因为治疗被阻止，因为没有答案，我希望它即使没有答案也能进入下一行。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T13:00:16.283

仅使用 Thread.sleep(10000) 用于等待点击提交后刷新下一个要执行的动作，因为当你使用隐式等待或显式等待时，它不会等待 10 秒。它等到下一个操作按钮对其可见。它可能是 2 秒、5 秒或 8 秒，具体取决于服务器的响应时间。所以最好使用 Thread.sleep(10000)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T05:34:58.783

我的建议是使用`Thread.sleep()`不是一个可取的。您可以使用 Selenium`Implicit Wait`和`Explicit Wait`.

请参阅帖子以供[参考](https://stackoverflow.com/questions/14700123/selenium-webdriver-ruby-how-to-wait-for-images-to-be-fully-loaded-after-clic/14701534#14701534)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T00:32:02.467

如果您只是在执行刷新后等待页面上的元素加载，那将是更可取的。这意味着您并不**总是**等待 10 秒，而只会在页面重新加载后继续您的操作。
或者， Thread.Sleep(10000) 将按照 Smit 在评论中的建议等待 10 秒。

# iphone - 当某些东西异步运行时是否意味着它不在主线程上？

> ID：14763100
> 
> 赞同：1
> 
> 时间：2013-02-07T23:29:41.367
> 
> 标签：iphone, ios, objective-c, ipad

我对异步加载和主线程的概念有点困惑。当某些东西异步加载时，是否意味着它不在主线程上运行？据我所知，这是两个不同的概念，可以在主线程上异步运行，也可以在后台/辅助线程上异步运行。如果我错了，请纠正我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-07T23:41:56.773

Not quite. Running asynchronously means that it doesn't stop execution from continuing on the current thread. This is an important difference because it's totally possible to do something asynchronously such that it ends up on the main thread (for example: dispatch_async(dispatch_get_main_queue(), ^{ some block });), which would mean that it's not stopping *some other* thread from continuing, but is blocking the main thread.

Because the main thread is so important to applications, the most common *use* of asynchronous code is to avoid blocking it, but it's not the only use.

(edited to add)

It's more useful, perhaps, to think of it in terms of "async with respect to x". If you do this, for example:

```
dispatch_async(aSerialQueue, ^{
    work();
    work();
}); 
```

Then the two invocations of work are synchronous with respect to each other, and synchronous with respect to all other work on aSerialQueue, but asynchronous with respect to everything else.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T23:45:52.490

异步运行只是意味着调用可能会在任务完成之前返回。这可能是因为它在后台线程上运行。可能是因为它稍后会在当前线程上发生。

同步运行并不意味着它会发生在主线程上；这意味着在任务完成之前调用不会返回。那可能是因为它发生在同一个线程上。可能是因为它发生在另一个线程上，但您希望当前线程等待另一个线程完成。

*此外，请注意主*线程和*当前*线程之间存在差异。在后台线程上调用的同步任务将阻止该后台线程继续运行，直到任务完成，但根本不会阻塞主线程。

当然，在 iOS 中大部分时间，您的代码将在主线程上运行。但是您可以将工作推送到后台线程（例如使用`dispatch`API），因此区别很重要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T23:45:30.177

主线程是执行大部分代码的地方，包括所有 UI。还有其他线程，例如网络线程和网络线程，您可以创建自己的线程。

同步与异步是您的代码何时执行的问题。您可以在主线程或任何其他线程上执行同步或异步代码块。如果它是同步的，它将阻塞线程的其余部分，直到它完成。如果它是异步的，它将在线程从当前正在执行的任何事情中释放出来时运行。

# javascript - 给定javascript语法会做什么？

> ID：14763102
> 
> 赞同：2
> 
> 时间：2013-02-07T23:29:52.223
> 
> 标签：javascript, jquery

我上个月开始 JavaScript 编程，我知道对象、函数、类、字符串、数组、属性等基本语法。现在我对给定的语法感到困惑。

句法：

```
(function(){

 "use strict";

})(); 
```

我的问题是，为什么定义中包含两个括号（一个包含 'function' 和另一个 "empty" ）？有人可以帮我为什么我们使用它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T23:31:31.880

这将创建一个匿名函数，然后立即执行它。

在这种情况下，该函数只有一行`"use strict"`......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T23:31:46.373

该代码对世界没有任何净影响。会发生什么：

*   括号内的函数被实例化；
*   `()`调用该函数的最终原因；
*   “use strict”常量开启“strict”模式；
*   函数返回。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T23:34:50.053

你有一个*自我调用的*功能。

几乎就是这样，一个立即被调用的函数。为此，我们**需要**一个*函数表达式*，而不是*函数声明*。为此，我们可以做一些事情，其中​​之一是将整个表达式放在*括号中*

```
(function() {}); 
```

此语句创建一个*函数表达式*。现在我们要做的就是通过附加额外的*函数括号*来调用该函数，就像我们对任何函数所做的那样

```
(function() {})(); 
```

你也可以把*函数括号*放在整个语句中，没有区别

```
(function() {}()); 
```

*将函数*带入*表达式形式*的另一种选择是在其前面使用`!`或`+`标记

```
!function(){}() 
```

任何事情都会发生，只要我们创建一个表达式，我们就不能调用这样的函数*声明*

```
function foo(){}() // syntax error 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-07T23:31:55.003

这是一个*自调用的匿名函数*（或*立即调用的函数表达式*，也称为 IIFE），在这种情况下，这种模式的存在只是为了产生一个封闭的作用域。

显然，他们不想`"use strict";`为整个文件打开严格模式，或者在缩小并连接到其他文件时，在包含的库上打开严格模式等。亚马逊不久前就遇到了这个问题。从那时起，建议将最佳实践保留`"use strict"`在函数范围内，并且此函数仅用于此目的。

# java - 为什么这个循环无限工作？

> ID：14763106
> 
> 赞同：3
> 
> 时间：2013-02-07T23:30:15.737
> 
> 标签：java

```
class kk{
    public static void main(String args[]){
        int n=0;
        for (byte i = 0; i<=255; i++) 
        { 
             n++;
        }
        System.out.println(n);
    }
} 
```

上面的 for 循环无限地进行。如果有人能回答为什么，我将不胜感激？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-07T23:31:59.867

因为默认情况下 Java 中的任何数值都是有**符号**的。

所以 a`byte`在 range 中保存值`[-128, 127]`，一个始终满足`for`循环条件的范围。任何时候`i == 127`，加进去`1`就`i`变成了`-128`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-07T23:32:58.810

这

```
for (byte i = 0; i<=255; i++) 
```

是一个无限循环，因为`i`将永远是`<= 255`.

由于 Java`byte`是有符号的，它们的值范围可以从`-2^8`(is -128) 到`(2^8)-1`(is 127)。

一次`i`是127，加一会变成-128，明显小于`255`。所以这个循环将永远运行。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-07T23:32:42.353

### 因为字节值在`[-128, 127]`.

因此，当字节 127 递增时，它会溢出到 -128，并且您的循环会无限期地继续。

# c# - C#读取文本文件并搜索字符串

> ID：14763109
> 
> 赞同：0
> 
> 时间：2013-02-07T23:30:32.717
> 
> 标签：c#, string, text

在 C# 中，如何打开文本文件，搜索字符串“mystring”，如果存在字符串，则设置变量**Vara** = 1 否则**Vara** = 0。

提前致谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-07T23:32:45.277

快速而肮脏的使用[`System.IO.File.ReadAllText`](http://msdn.microsoft.com/en-us/library/system.io.file.readalltext.aspx)：

```
int Vara = File.ReadAllText(path).Contains("mystring") ? 1 : 0; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T23:35:31.600

不会做所有的练习来给你留下一些乐趣，但这里有一个开始的方法：

要将文件的所有文本放入字符串变量中，请尝试以下操作：

```
using System.IO;

string fileContent = File.ReadAllText(@"C:\file.txt"); 
```

然后在这里检查你的字符串是否在里面：

```
bool present = fileContent.IndexOf("mystring") >= 0; 
```

# jquery - Fullcalendar 更新事件和新事件 ajax 调用

> ID：14763111
> 
> 赞同：-1
> 
> 时间：2013-02-07T23:30:40.793
> 
> 标签：jquery, fullcalendar

嗨，伙计们，我有一点问题。我正在设置我的 Fullcalendar，与数据库连接并且一切都显示良好，现在我在更新和添加新事件方面没有什么问题（以 24 小时格式和 allday:false

而不是 alert(event.id + ' wasmoved ' + delta + ' days\n' + '(应该可能更新你的数据库)'); 我需要调用我的 createevent.php?id=$id&start=$star&end=$end

我的json：

```
[{"id":"2","title":"hair cut Mike","start":"2013-02-02T13:30:00+01:00","end":"2013-02-02T15:30:00+01:00","color":"blue","allDay":false},{"id":"1","title":"hair cut Steve","start":"2013-02-02T09:30:00+01:00","end":"2013-02-02T10:30:00+01:00","color":"red","allDay":false}] 
```

我也需要这个来创建新事件，我被放置了可选择的 jQuery，然后工作（输入对话框）。

```
<script type='text/javascript'>
$(document).ready(function () {

    $('#calendar').fullCalendar({
        header: {
            left: 'prev,next today',
            center: 'title',
            right: 'month,agendaWeek,agendaDay'
        },
        editable: true,

        allDaySlot: true,
        allDayText: 'Volledige dag',
        firstHour: 8,
        slotMinutes: 30,
        defaultEventMinutes: 120,
        axisFormat: 'HH:mm',
        timeFormat: {
            agenda: 'H:mm{ - h:mm}'
        },
        dragOpacity: {
            agenda: .5
        },
        minTime: 0,
        maxTime: 24,

        selectable: true,
        selectHelper: true,
        select: function (start, end, allDay) {
            var title = prompt('Event Title:');
            if (title) {
                calendar.fullCalendar('renderEvent', {
                    title: title,
                    start: start,
                    end: end,
                    allDay: false
                },
                true // make the event "stick"

                );
            }
            calendar.fullCalendar('unselect');

        },

        events: "json-events.php",

        eventDrop: function (event, delta) {
            alert(event.id + ' was moved ' + delta + ' days\n' +
                '(should probably update your database)');
        },
        timeFormat: 'H:mm',

        loading: function (bool) {
            if (bool) $('#loading').show();
            else $('#loading').hide();
        }

    });

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T09:47:35.603

只需在事件处理程序中使用有据可查的[jQuery Ajax 函数！](http://api.jquery.com/category/ajax/shorthand-methods/)

```
 eventDrop: function (event, dayDelta, minuteDelta) {
        // message to end user
        alert(event.id + ' was moved ' + dayDelta + ' days\n' +
            '- database will be updated now');

        /**
         * perform ajax call for db update
         */            
        jQuery.post(
            'createevent.php'
            , { 
                id: event.id
                , start: event.start
                , end: event.end
            }
        );                    
    } 
```

您还应该查看完整日历拖放回调的[文档](http://arshaw.com/fullcalendar/docs/event_ui/)

# php - Mod Rewrite 和 Facebook $_GET 变量

> ID：14763112
> 
> 赞同：0
> 
> 时间：2013-02-07T23:30:57.350
> 
> 标签：php, .htaccess, mod-rewrite

在编写我的登录系统时，我在使用 Facebook 授权用户时遇到了一个小问题......

在有人单击“使用 Facebook 登录”按钮并登录/授权我的应用程序后，Facebook 会像往常一样使用一系列`$_GET`变量重定向回我的网站。唯一的问题是我想检查是否设置了其中一个变量以检查 Facebook 登录的状态。

当我尝试拉`$_GET`变量时，它“说”它不存在。问题在于我使用 mod_rewrite 来清理我的网址的外观：

```
#RewriteRule ^([A-Za-z0-9]+)/?$ ?a=b&content=$1 [L]
#RewriteRule ^([A-Za-z0-9]+)/([A-Za-z0-9]+)/?$ ?a=b&content=$1&page=$2 [L] 
```

这变成：
`www.mysite.com?content=login&page=2`变成
`www.mysite.com/login/2`

所以我的 url`www.mysite.com/content?state=[...]&code=[...]&...etc`必须混淆 Facebook 分配的变量和要重写的`$_GET`变量。

包含内容和页面集的 url 也会发生同样的事情。例如： `www.mysite.com/content/page?state=......`

解决这个问题的最佳方法是什么？我知道我可以找到另一种方式来显示已确认的 Facebook 登录信息，但我敢肯定，这在未来的其他情况下仍将是一个问题。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T23:33:05.157

尝试使用`[L,QSA]`而不仅仅是`[L]`.

# c# - 尝试... 捕获块感染

> ID：14763114
> 
> 赞同：2
> 
> 时间：2013-02-07T23:31:14.800
> 
> 标签：c#, excel, debugging, testing, try-catch

我正在为一家公司开发一套 Excel 插件。我以前没有做过加载项，所以我对一些错综复杂的东西不是很熟悉。在交付我的第一个产品后，用户遇到了我在测试期间没有遇到/遇到/注意到的错误。此外，我很难从 Visual Studios 调试环境中复制它们。

我最终编写了一个轻量级的日志类，它从程序的各个部分接收消息。该程序并不庞大，因此并不是很多工作。但我最终得到的几乎每一行代码都包含在 Try...Catch 块中，这样我就可以记录用户环境中发生的事情。

我认为我实现得足够体面，我尽量避免包装对其他类或模块的调用，而是将块放在调用中，这样我可以更准确地识别谁在扔，而且我没有吞下任何东西，我总是扔记录我感兴趣的信息后出现异常。

我的问题是，基本上，这样可以吗？有没有更好的方法来解决这个问题？我离开基地了吗？

快速编辑：重要的是，它确实有效。我能够确定错误并解决它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T08:46:45.240

不，你不是离谱。我相信这是编写插件时处理错误的唯一方法。我自己正在销售一个使用这种模式的 Outlook 加载项。不过有几点注意事项：

1.  您只需要包装顶级方法，直接暴露给用户界面或由其他事件触发。

2.  确保您的日志记录例程递归遍历异常树，同时记录 InnerExceptions。

3.  您可以考虑显示某种错误表单，而不是重新抛出异常。

然后是对这些笔记的一些评论：

1.  我相信你明白这一点，但你的评论“几乎每一行代码都被包装（...）”让我想强调这一点。但是，是的，您的*所有*代码最终都应该以`catch (System.Exception)`-block 结尾，以便您可以记录您的异常。我完全不同意格雷格说这是“危险的”。危险的是不处理您的异常。

2.  如果你这样做，我认为你不需要“避免包装对其他类和模块的调用”，如果我理解正确的话。[我发布了一个方便的扩展方法 GetAsString，它允许我在 github](https://gist.github.com/Nilzor/4737502)上记录我需要的内容。

3.  在 Outlook 中，如果异常出现在 Outlook 本身，如果它发生在后台线程上，您的加载项可能会被禁用，甚至导致 Outlook 崩溃。Excel中不一样吗？因此，我竭尽全力不让我的申请出现*任何*异常。当然，您需要确保您的应用程序在此之后可以继续运行，或者允许正常关闭。

# rsyslog - 在 rsyslog 中，如何在我们的一个日志中触发每小时电子邮件聚合条目？

> ID：14763128
> 
> 赞同：2
> 
> 时间：2013-02-07T23:32:02.923
> 
> 标签：rsyslog

我们的一个应用程序已配置为使用 rsyslog 将某些错误记录到远程服务器上的日志中。我被要求提供每小时一封电子邮件，其中列出了过去一小时内记录的错误。我看过 ommail ，但它似乎并没有完全做到这一点。关于如何最好地做到这一点的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-25T15:20:53.010

我会在这方面采用低技术：

*   将错误消息放在单独的文件中，例如

> ```
> *.error /var/log/error.log 
> ```

*   然后通过[logrotate每小时旋转一次](http://linux.die.net/man/8/logrotate)

从 logrotate，您可以在*prerotate*或*postrotate*部分运行脚本，您可以在其中获取文件的内容并通过电子邮件发送它们。

[ommail](http://www.rsyslog.com/doc/ommail.html)更多的是用于发送匹配某个过滤器的日志，所以让它发送这样的“摘要”会很麻烦。

# batch-file - 如何自动化 jcl 在大型机上运行 cobol 程序

> ID：14763132
> 
> 赞同：0
> 
> 时间：2013-02-07T23:32:20.990
> 
> 标签：batch-file, automation, mainframe, jcl

我们有一个 COBOL 批处理程序，可以从 JCL 手动执行。我们希望使这个过程自动化，以便它可以每 15 分钟执行一次。

有没有办法在大型机上自动执行批处理程序？

我是一名 PC 用户，我知道在 Windows 中我可以创建一个 .BAT 文件并在任务计划程序中将其设置为每 15 分钟运行一次。我基本上是在尝试在大型机上做同样的事情。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-08T03:25:56.527

> 有没有办法在大型机上自动执行批处理程序？

是的。

[许多大型机商店都有作业调度程序](https://www.ibm.com/docs/en/zos-basic-skills?topic=processing-mainframes-working-after-hours-batch)。BMC的Control-M就是其中之一，ASG有Zeke，还有其他的。

话虽如此，听起来有问题的应用程序是为了定期轮询某些事件而编写的。大型机通常有更好的方法来完成人们通常通过轮询解决的任务。例如，事件监控。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-08T19:24:44.533

BMC 的 Control-M 等大型机调度软件就是其中之一，ASG 有 Zeke、CA 的 CA7 和 IBM TWS for ZOS，以前的 OPCA 可用于每 15 分钟调度一次作业。

您可以每 15 分钟添加一个作业，或者让作业的第一步是添加将在接下来的 15 分钟内运行的 1。

优点
操作员将收到作业失败的通知
缺点
最终会在 ZOS 的 TWS 计划中分配相同的作业（据我所知），您将需要添加近 96 个作业并为其设置相应的时间

我推荐的选项是使用自动化产品，例如 IBM 的 System Automation、BMC 的 Control-O 或 CA 的 OPS。

使用上述任何自动化产品，您都可以设置启动任务并让他们每 15 分钟启动一次。例如，使用 System Automation 中的 1 个面板将其设置为每 15 分钟运行一次启动任务要容易得多

如果您想知道它是否失败，您可以使用自动化产品在上述任何调度程序中进行调度。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-09-05T00:17:51.133

有很多解决方案，这实际上取决于您监控的内容。除了标准“使用像 CA7 这样的作业调度程序”（缺点是白天运行的作业太多，有点乱）。

您可以定义一个调用 COBOL 代码的地址空间（已启动的任务），并在您的 COBOL 代码中让它休眠（即等待计时器）15 分钟，唤醒检查任何内容并返回休眠。或者，在 JES2 上运行作业，但您可能需要多做一点，以便 JES 让作业整天保持活跃！

如果此代码发现问题，那么它还可以发出控制台消息（也许，您可能需要编写一些汇编代码来发出 WTO 或 WTOR），因此操作员要么知道 (WTO)，要么知道并拥有回复 (WTOR)（写信给操作员并回复）。

# terminal - JRuby 停止通过 RVM 安装中间进程

> ID：14763133
> 
> 赞同：-1
> 
> 时间：2013-02-07T23:32:28.243
> 
> 标签：terminal, rvm, jruby, osx-mountain-lion

我目前正在尝试通过 RVM 在 Mac OS X Mountain Lion 上安装 JRuby。但是，在安装过程中，该过程似乎突然停止而没有错误。我不确定安装是否完成，所以我尝试使用该`jruby`命令。我收到一条错误消息，指出没有这样的命令可用。我也尝试过几次重新安装 JRuby。

RVM 的输出如下所示（这是重新安装）：

```
MacBook-Pro:~ USER$ rvm reinstall jruby
/Users/USER/.rvm/src/jruby-1.7.2 has already been removed.
Removing /Users/USER/.rvm/rubies/jruby-1.7.2...
http://jruby.org.s3.amazonaws.com/downloads/1.7.2/jruby-bin-1.7.2.tar.gz - #configure
jruby-1.7.2 - #download
jruby-1.7.2 - #extract
jruby-1.7.2 - #validate
jruby-1.7.2 - #setup
Saving wrappers to '/Users/USER/.rvm/bin'.
jruby-1.7.2 - #importing default gemsets (/Users/USER/.rvm/gemsets/), this may take time ...
Making gemset jruby-1.7.2 pristine.
Making gemset jruby-1.7.2@global pristine. 
```

此时，安装似乎突然结束，我又回到`MacBook-Pro:~ USER$`.

有任何想法吗？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T00:52:49.107

这是正确的流程，一切都按预期进行，它没有中途停止 - 它成功完成。

# vb.net - 我可以在没有 Microsoft Interop 的情况下从 Excel 获取信息吗

> ID：14763135
> 
> 赞同：0
> 
> 时间：2013-02-07T23:32:41.123
> 
> 标签：vb.net, excel

所以，我在工作中可以用 vb 做的事情非常有限。他们为我设置的 vb.net 版本没有使用 microsoft.office 的文件，他们不会授予我下载它们的权限。有没有其他方法可以提取电子表格 E 列中的所有信息？

感谢您提供的任何见解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T23:45:29.297

您可以使用[`late binding`](http://support.microsoft.com/kb/304661/en-us). 从链接页面：

```
Private Sub Button1_Click(ByVal sender As System.Object, _
 ByVal e As System.EventArgs) Handles Button1.Click
    Dim objApp As Object
    Dim objBook As Object
    Dim objBooks As Object
    Dim objSheets As Object
    Dim objSheet As Object
    Dim range As Object

    ' Instantiate Excel and start a new workbook.
   objApp = CreateObject("Excel.Application")
    objBooks = objApp.Workbooks
    objBook = objBooks.Add
    objSheets = objBook.Worksheets
    objSheet = objSheets.Item(1)

    range = objSheet.Range("A1")

    'Set the range value.
    range.Value = "Hello, World!"

    'Return control of Excel to the user.
    objApp.Visible = True
    objApp.UserControl = True
End Sub 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T10:17:45.930

@KenWhite 给出了关于没有 Interop 的 Excel 的正确答案，但您真正需要做的就是更改目标框架以访问库。

你可以这样做。首先，在解决方案资源管理器中右键单击您的项目，然后转到**Properties**。此时，您应该会看到一个项目属性页面，其中包含一个**目标框架**下拉框，将其从**.NET Framework xx (Client Profile** ) 更改为**.NET Framework xx**。

现在，您只需在“属性”窗口中选择“**引用**”选项卡，单击“**添加**”并添加**Microsoft.Office.Interop.Excel**。

# mysql - 用于excel的mysql

> ID：14763141
> 
> 赞同：6
> 
> 时间：2013-02-07T23:32:58.727
> 
> 标签：mysql, excel, export-to-excel, mysql-workbench, excel-2013

我不确定这是否是问这个问题的正确地方，但我面临安装 MySQL 无法识别 Office 2013 并安装 MySQL for Excel 的问题。

基本上是 MySQL [https://dev.mysql.com/downloads/](https://dev.mysql.com/downloads/)

有一个用于 excel 的插件，可让您自动连接到数据库并进行更改。在 MySQL 安装期间，它会检查要求，其中之一是 Excel 2007 或更高版本。我没有满足这个要求。我正在运行 Office 2013 Pro Plus（64 位）并安装 MySQL（64 位）

有人可以帮忙吗？您还有其他推荐的应用程序吗？我不想手动导入和导出数据或文件。我需要一个可以在单独的工作表中打开所有表格的应用程序，我可以手动更改这些表格并自动保存到数据库中。

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T23:35:40.067

看起来这是一个[已知的错误](http://forums.mysql.com/read.php?172,578515,578629#msg-578629)：

> 现在请尝试以下解决方法：
> 
> 1.  启动 MySQL 安装程序（如果已经安装，从开始菜单 > MySQL > MySQL 安装程序启动它）。
> 2.  尝试进行完整安装（但您不必实际安装它们）。
> 3.  转到 C:\Program Data\MySQL\MySQL Installer\Product Cache
> 4.  查看您是否有 MySQL for Excel MSI 并手动启动它。

我会在[Google](https://www.google.com/search?q=mysql+office+2013)上查看这些其他主题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-17T22:53:23.327

从 MySQL for Excel 1.2.1 开始，此错误已修复。但是，由于此错误的性质，您必须在安装 v1.2.1+ 之前手动卸载 MySQL for Excel 的早期版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-05T15:38:43.840

我遇到了同样的问题。您可以在此处下载`mysql_for_excel`独立`.msi`文件：[https ://dev.mysql.com/downloads/windows/excel/](https://dev.mysql.com/downloads/windows/excel/)

之后将 .msi 复制到`C:\Program Data\MySQL\MySQL Installer\Product Cache` 并执行它。重新启动excel。完毕

然后在数据选项卡中你可以看到这个

[![在此处输入图像描述](../Images/35989f972808ecf7f99cba6a31e22e65.png)](https://i.stack.imgur.com/hUIWk.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-07-16T22:08:31.600

我在 Mysql 8.0.17 中遇到了同样的问题，并且 Mysql for excel 没有显示在数据选项卡中，经过多次安装和卸载后，终于在我的 windows 用户的加载项中发现了问题。您必须通过 [以管理员身份打开] Mysql for excel 打开 excel 应用程序之后出现。

# html - 内联块对象无法使用动态大小的图像正确调整大小

> ID：14763147
> 
> 赞同：1
> 
> 时间：2013-02-07T23:33:30.503
> 
> 标签：html, image, css

我正在尝试将一组包含动态缩放的图像的浮动块居中。但是我遇到了一个问题，我用来输入浮动块的内联块没有缩小到图像的新大小。相反，它将换行到图像的原始大小，留下一个很大的空白空间。

[http://jsbin.com/ewonas/1/](http://jsbin.com/ewonas/1/)

```
body {
    text-align: center;
}

.inlineblock {
    background: red;
    display: inline-block;
}

.constrainer {
    width: 20%;
    float: left;
}

.constrainer img {
    width: 100%;
}

<body>
    <div class="inlineblock">
        <div class="constrainer">
            <img src="http://upload.wikimedia.org/wikipedia/commons/thumb/8/85/Smiley.svg/500px-Smiley.svg.png">
            <h1>Product title</h1>
        </div>
        <div class="constrainer">
            <img src="http://upload.wikimedia.org/wikipedia/commons/thumb/8/85/Smiley.svg/500px-Smiley.svg.png">
            <h1>Product title</h1>
        </div>
    </div>
</body> 
```

有人可以帮我解决这个问题吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T23:54:34.597

`.constrainer`您将两个div的宽度设置为`20%`. 这意味着宽度是 parent 的 20% `.inlineblock`。所以当你有两个时，加起来就是父级的 40%。这意味着您还有 60% 的剩余空间，或者还有 3 个`.constrainer`div 的空间。

要使`.inlineblock`元素缩小，您需要将`.constrainer`div 的宽度设置为独立于其父级的数字，例如固定宽度，`300px`而不是百分比。

现场示例：http: [//jsbin.com/ewonas/6](http://jsbin.com/ewonas/6)

# javascript - 更改表格单元格值 jquery

> ID：14763148
> 
> 赞同：2
> 
> 时间：2013-02-07T23:33:31.413
> 
> 标签：javascript, jquery, html

我需要找到一个包含特定文本值的表格单元格并将其更改为其他内容。

```
 <table><tr>
<td>You are nice</td>
<td>I hate you</td>
</tr></table> 
```

找到包含“我恨你”的表格单元格并将其更改为“我爱你”。

我如何在 Jquery 中做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T23:39:08.620

使用`:contains`选择器：

```
$('td:contains("I hate you")').text('....'); 
```

使用`filter`方法：

```
$('td').filter(function(){
   // contains
   return $(this).text().indexOf("I hate you") > -1;
   // exact match
   // return $(this).text() === "I hate you";
}).text('...'); 
```

或者：

```
$('td').text(function(i, text){
   return text.replace('I hate you', 'I love you!');
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T23:38:54.720

一个简单的`contains`选择器应该可以解决问题，然后设置文本值

```
$("td:contains('I hate you')").text('I love you'); 
```

[包含选择器参考](http://api.jquery.com/contains-selector/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T23:36:29.063

使用 querySelectorAll("td")，遍历所有返回的元素并检查 textNode 的值。

```
var tds = document.querySelectorAll("td");
for (var i = 0; i < tds.length; i++) {
    if (tds[i].firstChild.nodeValue == "I hate you"){
        tds[i].firstChild.nodeValue = "I love you";
    }
} 
```

# php - 按 seriq asc 排序显示错误的结果

> ID：14763149
> 
> 赞同：0
> 
> 时间：2013-02-07T23:33:32.213
> 
> 标签：php, mysql, database

为什么当我使用`order by seriq asc`并有像“10000”“100000”“97000”这样的数字时

脚本显示结果：

```
1: 10000
2: 100000
3: 97000 
```

?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T23:34:57.110

因为它们作为字符串存储在您的列中

1-尝试将列`seriq`从更改`VARCHAR/CHAR`为`INT`。

2-您可以使用[CAST()](http://dev.mysql.com/doc/refman/5.0/en/cast-functions.html#function_cast)将字符串转换为 int。例如`SELECT CAST('123' AS SIGNED);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T23:38:07.703

您的`seriq`列必须是数字列，才能对值进行数字排序。如果它是文本列，则值将按照 collat​​ion 按字母顺序[排序](https://stackoverflow.com/questions/341273/what-does-character-set-and-collation-mean-exactly)。例如：

```
CREATE TABLE Test
(
   Foo int  
);

INSERT INTO Test VALUES (10000);
INSERT INTO Test VALUES (100000);
INSERT INTO Test VALUES (97000);

select * from Test order by Foo asc; 
```

[小提琴](http://www.sqlfiddle.com/#!2/6bf043/1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T23:39:21.287

快速修复是让 MySQL 在 ORDER BY 子句中将字符串转换为数值。

将您的查询更改为：

```
ORDER BY seriq+0 ASC 
```

请注意，MySQL 将尝试将任何字符串转换为数值，读取字符直到第一个“无效”字符，例如 '123A' 将被转换为数值 123。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T23:41:24.743

将列类型更改为 int 是最佳解决方案，因为它将为您提供最佳的数据存储和性能。但是，如果这不是一个选项，则可以使用以下解决方法：

```
select * from foo order by seqid+0 
```

这会强制将按列排序的类型转换为 int，并且排序以数字方式进行。

# javascript - jQuery Mobile：控制添加到 URL 栏的内容

> ID：14763152
> 
> 赞同：0
> 
> 时间：2013-02-07T23:33:43.147
> 
> 标签：javascript, jquery-mobile

我正在使用 jquery mobile 构建一个移动网站。它将包含一些用于设置等的静态内部页面，但主要是加载/链接外部页面。

我有两个要求。

*   我不希望内部页面影响 URL 栏或添加到 urlHistory（作为哈希，即 index.html/#settings）

*   当用户加载一个新的外部页面时，我确实希望它显示在 URL 栏中并添加到 urlHistory。

这听起来很简单，但我似乎无法让它工作。

我在mobileinit中尝试了以下内容。这只是从不修改内部和外部链接的 URL。

```
$.mobile.changePage.defaults.changeHash = false; 
```

非常感谢任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T18:26:22.057

好的，在测试了各种东西之后，我遇到了一个不涉及 mobileinit 的可能解决方案。对于我不想在 url 栏中反映的所有链接，我以编程方式设置：

```
$.mobile.changePage("#home", {changeHash: false, transition:'fade'}); 
```

这里的关键是将changeHash设置为false。这将转换到页面“主页”，但不会在 URL 栏中进行任何更改。

我不确定我是否可以在 href 标记中做同样的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T08:43:06.600

你很接近，mobilinit 是一个棘手的事件，它必须在加载 jQuery Mobile 之前触发，这里有一个例子：

```
<!DOCTYPE html>
<html>
<head>
    <title>jQM Complex Demo</title>
    <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1.0"/>
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
    <script src="http://code.jquery.com/jquery-1.8.3.min.js"></script>    
    <script>
        $(document).bind("mobileinit", function(){
            $.mobile.changePage.defaults.changeHash = false;
        });
    </script>       
    <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>  
        <script src="operations.js"></script>       
</head>
<body>
    <div data-role="page" id="index">
        <div data-theme="a" data-role="header">
            <h3>
                First Page
            </h3>
            <a href="http://www.google.com" class="ui-btn-right" rel="external">Next</a>
        </div>

        <div data-role="content">
            <ul data-role="listview" data-theme="a" id="test-listview">
                <li><a href="page2.html?id=1">Link 1</a></li>
                <li><a href="page2.html?id=2">Link 2</a></li>
                <li><a href="page2.html?id=3">Link 3</a></li>
                <li><a href="page2.html?id=4">Link 4</a></li>
                <li><a href="page2.html?id=5">Link 5</a></li>
            </ul>    
        </div>

        <div data-theme="a" data-role="footer" data-position="fixed">

        </div>
    </div>    
</body>
</html> 
```

测试一下，你会发现它满足你的每一个要求。

# php - 使用 Cake 的电子邮件类发送电子邮件时出现内部错误

> ID：14763164
> 
> 赞同：0
> 
> 时间：2013-02-07T23:34:48.913
> 
> 标签：php, email, cakephp, gmail

我正在尝试使用 Gmail 帐户使用 CakePHP 的[电子邮件库](http://book.cakephp.org/2.0/en/core-utility-libraries/email.html)发送电子邮件。

在`app/Config/email.php`我有以下条目：

```
public $default = array(
    'host' => 'smtp.gmail.com',
    'port' => 465,
    'username' => 'testaccount@gmail.com',
    'password' => 'mypaswsword',
    'transport' => 'Smtp',
    'tls' => true
); 
```

在我的控制器中，我已经把`App::uses('CakeEmail', 'Network/Email');`它放在了我的操作中：

```
 $email = new CakeEmail();
    $email->from(array('me@example.com' => 'My Site'))
          ->to('you@example.com')
          ->subject('About')
          ->send('My message'); 
```

当我加载页面时，我收到一条非常难以描述的错误消息`Error: An Internal Error Has Occurred.`，这并没有给我任何关于哪里出了问题的线索。我知道 Gmail 帐户设置是正确的，我正在使用它，就像 Cake 文档告诉我的那样。打印到页面的堆栈跟踪告诉我错误来自以下行`CORE\Cake\Network\Email\MailTransport.php`：

```
$this->_mail($to, $email->subject(), $message, $headers, $params); 
```

有谁知道这里可能出了什么问题？

编辑：我也尝试过使用以下配置：

```
public $default = array(
    'host' => 'ssl://smtp.gmail.com',
    'port' => 465,
    'username' => 'testaccount@gmail.com',
    'password' => 'mypassword',
    'transport' => 'Smtp'
); 
```

但无济于事。我得到完全相同的错误信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T04:04:58.550

您是否检查过您的连接并且 GMAIL 信息是否正确？

# java - 排除的工件显示依赖：树

> ID：14763169
> 
> 赞同：9
> 
> 时间：2013-02-07T23:35:14.400
> 
> 标签：java, maven

我的项目依赖于`org.apache.pig:pig`但我不想要`org.mortbay.jetty:jetty`and的传递依赖`org.mortbay.jetty:servlet-api`。我添加了这两个工件，`<excludes>`但这似乎不起作用：

```
mvn dependency:tree -Dincludes=org.mortbay.jetty:servlet-api
[INFO] Scanning for projects...
[INFO] Searching repository for plugin with prefix: 'dependency'.
[INFO] ------------------------------------------------------------------------
[INFO] Building Unnamed - myGroupp:myArtifact:jar:1.0-SNAPSHOT
[INFO]    task-segment: [dependency:tree]
[INFO] ------------------------------------------------------------------------
[INFO] [dependency:tree {execution: default-cli}]
[INFO] myGroupp:myArtifact:jar:1.0-SNAPSHOT
[INFO] \- org.apache.pig:pig:jar:0.10.0:compile
[INFO]    \- org.mortbay.jetty:jetty:jar:6.1.26:compile
[INFO]       \- org.mortbay.jetty:servlet-api:jar:2.5-20081211:compile 
```

### 简单展示 pom.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>myGroupp</groupId>
  <artifactId>myArtifact</artifactId>
  <version>1.0-SNAPSHOT</version>
  <packaging>jar</packaging>

  <dependencies>
    <dependency>
      <groupId>org.apache.pig</groupId>
      <artifactId>pig</artifactId>
      <version>0.10.0</version>
      <exclusions>
        <exclusion>
          <artifactId>org.mortbay.jetty</artifactId>
          <groupId>jetty</groupId>
        </exclusion>
        <exclusion>
          <artifactId>org.mortbay.jetty</artifactId>
          <groupId>servlet-api</groupId>
        </exclusion>
      </exclusions>
    </dependency>
  </dependencies>
</project> 
```

我试过这个：`mvn --version`

*   Apache Maven 2.2.1 (rdebian-8)
*   阿帕奇 Maven 3.0.4 (r1232337; 2012-01-17 00:44:56-0800)

有人可以帮我排除这个吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-08T01:27:55.940

您已转置了 artifactId 和 groupId 元素值。

请尝试以下排除项：

```
<exclusions>
  <exclusion>
    <groupId>org.mortbay.jetty</groupId>
    <artifactId>jetty</artifactId>
  </exclusion>
  <exclusion>
    <groupId>org.mortbay.jetty</groupId>
    <artifactId>servlet-api</artifactId>
  </exclusion>
</exclusions> 
```

# jquery - 悬停延迟的jQuery动画3个div

> ID：14763175
> 
> 赞同：0
> 
> 时间：2013-02-07T23:35:50.543
> 
> 标签：jquery, html, hover

我正在尝试创建一种效果，其中我将鼠标悬停在一个 div 上（使用“hover”类）和 3 个其他 div（“agent”、“fav”和“more_details”）向上移动但在 3 个之间有短暂的延迟他们。然后，当我悬停时，所有 3 个 div 同时向下移动。这是我目前正在尝试的代码，

```
jQuery(document).ready(function() {
jQuery(".hover").hover(
    function(){
    jQuery(".agent").animate({top: '-=32px'},400);
    },
    jQuery(".fav").animate({top: '-=32px'},400).delay(800);
    },
    jQuery(".more_details").animate({top: '-=32px'},400).delay(1600);
    },

    function(){
    jQuery(".agent,.fav,.more_details").animate({top: '+=32px'},400);
    }
);                              
}); 
```

谁能帮我在这里正确地编写我的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T23:38:59.597

`.delay`延迟链接到它的 fx 操作，而不是链接到它的操作：

```
jQuery(".fav").delay(800).animate({top: '-=32px'},400);
jQuery(".more_details").delay(1600).animate({top: '-=32px'},400); 
```

# three.js - 如何使用 Three.js 基于按钮单击替换场景中的对象？

> ID：14763179
> 
> 赞同：1
> 
> 时间：2013-02-07T23:36:11.393
> 
> 标签：three.js

**移除场景中的旧对象并使场景可用于添加新对象**

我开发了一个应用程序，其中将 3D 自定义对象添加到网格中，然后将网格添加到场景中。我的页面上还有一个按钮，当我单击它时，应该从作为场景子节点的网格中删除已经创建的对象，并且场景应该准备好添加新对象，就像第一次一样。我的意思是，如果可能的话，可以移除整个网格，并且应该将具有新对象集的新网格添加到场景中。

```
function xyz() // Button click function
{
  // should remove the objects in the scene if exists and make scene available to add 
  // new objects
  for ex: scene.remove(mesh)....???
  // Also needed to clear the renderer??
   .
   .
   .
   do something
 }
 function init()
 {
   // adds the objects to the scene and instantiate renderer
    mesh = New THREE.Mesh({// some material});
    cube = new THREE.CubeGeometry(1,1,1);
    object = new THREE.Mesh(cube,material);
    mesh.add(object);
    scene.add(mesh);
 }
 function animate()
 {
        requestAnimationFrame(animate);
        render();
 }
 function render()
 {
   renderer.render(scene, camera);
 } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T10:36:36.517

我根据您包含的代码段对您的代码做出了很多假设，所以也许可以尝试：

```
function xyz() {

    var l = scene.children.length
        ;

    //remove everything
    while (l--) {

        if(scene.children[l] instanceof THREE.Camera) continue; //leave camera in the scene

        scene.remove(scene.children[l]);

    }

    //reinitialise your stuff
    init();

} 
```

# arrays - 将数组列名作为键的 Perl 哈希

> ID：14763180
> 
> 赞同：2
> 
> 时间：2013-02-07T23:36:12.840
> 
> 标签：arrays, perl, hash

我正在尝试使用 sql 查询的结果创建数组哈希：例如。

第 1 列：

```
1                                         
2
3
4 
```

第 2 列：

```
A 
B 
C 
D 
```

期望的结果：

```
my %by_col = (
    'Column1'=>['1','2','3','4'],
    'Column2'=>['A','B','C','D'],
); 
```

我可以使用以下方法将结果作为哈希数组获得：

```
while ($hash_ref = $sth->fetchrow_hashref()) {
    push @$hash_array_ref, { %$hash_ref };
} 
```

但是反过来想不通。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T23:41:53.090

```
while (my $row = $sth->fetchrow_hashref()) {
   for my $col_name (keys(%$row)) {
      push @{ $by_col{$col_name} }, $row->{$col_name};
   }
} 
```

# django - Python27下的Django-trunk文件夹

> ID：14763189
> 
> 赞同：0
> 
> 时间：2013-02-07T23:36:33.447
> 
> 标签：django, powershell

目前我正在尝试在 PowerShell 和 Windows Vista 中使用 Django。根据[这个博客](http://www.thebitguru.com/blog/view/244-Running%20django-admin%20in%20PowerShell)，我需要在 PowerShell 中添加一个 .ps 文件，其中包含以下文本：

```
$env:PYTHONPATH=“R:\django\packages\django-trunk”
$env:PATH=$env:PATH + “;D:\Programs\Python25\;R:\django\packages\django-trunk\django\bin”
function django-admin {python (gcm django-admin.py | resolve-path) $args} 
```

但是，我在 Python27 目录下的任何地方都找不到“django-trunk”文件夹。我是否忽略或误解了什么？我将 Python 2.7 与 Django 1.4.2 一起使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T23:54:07.593

`django-trunk`意味着您的 django 安装路径。[如果您使用的是 Django 的开发版本（根据 Django 文档](https://docs.djangoproject.com/en/dev/topics/install/?from=olddocs#installing-the-development-version)）`django-trunk`，它将是目录的名称。

您的 Django 安装可能在`...python2.7/site-packages/django/`.

# c - 重复符号错误 - 全局变量

> ID：14763190
> 
> 赞同：3
> 
> 时间：2013-02-07T23:36:38.590
> 
> 标签：c, linker, linker-errors

所以我有三个文件：

```
jarvismarch.c
jarvismarchtools.c
jarvismarchtools.h 
```

运行后`make`，我收到以下错误：

```
Andrew-Carpenters-Laptop:Independent Study ahcarpenter$ make
cc    -c -o jarvismarch.o jarvismarch.c
cc    -c -o jarvismarchtools.o jarvismarchtools.c
cc -o jarvismarch jarvismarch.o jarvismarchtools.o
ld: duplicate symbol _string1 in jarvismarchtools.o and jarvismarch.o for architecture x86_64
clang: error: linker command failed with exit code 1 (use -v to see invocation)
make: *** [all] Error 1 
```

`string 1`内声明`jarvismarchtools.c`。`jarvismarchtools.h`包含在`jarvismarchtools.c`以及 中`jarvismarch.c`。

关于如何解决此错误的任何想法？

内`jarvismarchtools.h`：

```
/*
    FILENAME: jarvismarchtools.h
    AUTHOR: Andrew H. Carpenter
    DATE: 2 Feb 2013
    DESCRIPTION: This is a header file containing tools for running Jarvis' March.
*/
#include <stdio.h>
#include <stdlib.h>
#include <math.h>
#include <string.h>

extern int string1 = 1;

typedef struct Point {
    double x, y;
    char *label;
} point;

/*
    DESCRIPTION: A function that determines the angle (in degrees) between two points.
    INPUT: Requires two points as input. 
```

内`jarvismarchtools.c`：

```
/*
    FILENAME: jarvismarchtools.c
    AUTHOR: Andrew H. Carpenter
    DATE: 2 Feb 2013
    DESCRIPTION: This is an implemenetation file containing tools for running Jarvis' March.
*/
#include "jarvismarchtools.h"

int string1 = 1;

float getAngle(point p1, point p2){ 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-07T23:38:27.477

如果应该共享变量：

*   让它`extern`在标题中
*   在没有的 C 文件之一中定义它`extern`

如果不应该共享变量，请`static`在前面添加一个。

# android - 快速连续的点击被解释为单个移动的触摸事件？（在 Nexus 10 上测试）

> ID：14763196
> 
> 赞同：1
> 
> 时间：2013-02-07T23:36:53.813
> 
> 标签：android, hardware, android-hardware, nexus-7, nexus-10

我正在开发一个 Android 应用程序，用户可能会用多根手指快速点击。在 Nexus 10 平板电脑上进行的初步测试表明，在附近快速点击另一个点击通常被解释为一次触摸和滑动动作，两个触摸点都归因于一个指针索引。这似乎是硬件问题，或者至少是 Android 中某些低级触摸处理的问题。

类似地，我看到同时将两根手指放在一起的敲击被解释为一根大手指的单次触摸。

有没有人遇到过类似的困难，因为快速的一对触摸被错误地解释为单次触摸？我希望有人有一些聪明的解决方法，或者巧妙地推断出移动触摸实际上可能来自单次触摸的方法？

需要明确的是，我的观察是基于通过从开发人员设置中打开“指针位置”来可视化触摸，因此与我的应用程序无关。

# wordpress - Zurb Foundation 顶栏“最小高度”错误

> ID：14763202
> 
> 赞同：1
> 
> 时间：2013-02-07T23:37:44.127
> 
> 标签：wordpress, responsive-design, zurb-foundation

我正在使用Foundation创建一个网站，我遇到了一个我似乎也找不到解决方案的问题。我注意到，当展开时，我的一些下拉菜单在顶部栏的移动版本中被截断，我想知道是否有人遇到过这个问题，或者有修复它。我在 CSS 中做了什么使 JS 不再正确计算所有元素吗？

你可以在这里看到我在说什么。 [http://www2.100foldstudio.org](http://www2.100foldstudio.org)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T06:19:26.170

只需通过添加 css 来尝试。

```
.jScrollPaneDrag {
height:0px!important;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T06:26:56.617

我认为链接在主题中中断

从更新链接

```
http://www2.100foldstudio.org/wp-content/themes/100foldstudio/_/js/functions.js 
```

到

```
http://www2.100foldstudio.org/wp-content/themes/100foldstudio/js/functions.js 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T06:00:09.817

发现如果我在“移动”模式下在主顶栏部分的末尾添加一个列表项，并为其添加一个 clearfix 类，js 就会启动并开始正确计算高度。

多谢你们，

# android - setOrientationHint 在某些手机的前置摄像头 (HTC) 上逆时针旋转视频

> ID：14763204
> 
> 赞同：9
> 
> 时间：2013-02-07T23:37:48.147
> 
> 标签：android, android-camera, android-mediarecorder, htc-android

**问题：**某些 Android 设备（列在问题底部）在使用`setOrientationHint(int degrees)`前置摄像头拍摄的视频功能时会出现意外行为。预期的行为是视频顺时针旋转，但这些设备逆时针旋转视频。

**我的目标：**在相机设置或硬件方向中识别一个变量，让我可以预见地知道何时会发生这种情况。具体来说，*我想避免在我的代码中对这些手机进行特殊封装！*

**进一步说明：**我正在使用标准`MediaRecorder`对象录制视频，并且在准备录制时，我使用[`setOrientationHint()`](http://developer.android.com/reference/android/media/MediaRecorder.html#setOrientationHint%28int%29). 在 的文档中`setOrientationHint()`，为参数指定了以下内容`degrees`：

> *度* ——以度为单位顺时针旋转的角度。支持的角度为 0、90、180 和 270。

该函数旨在添加包含旋转角度的合成矩阵，以便视频播放器可以按预期显示视频。所以，我所做的是使用[该类](http://developer.android.com/reference/android/hardware/Camera.CameraInfo.html#orientation)[获取相机硬件的方向，`CameraInfo`](http://developer.android.com/reference/android/hardware/Camera.CameraInfo.html#orientation)并将其用作fn中的`degrees`参数。`setOrientationHint`（我已经尝试使用 AOSP 作为指南对这段代码进行变体，但我得到了完全相同的结果。）

**一个真实的例子：**三星 Galaxy S3 前置摄像头（实际上是大多数其他摄像头）的硬件方向为 270，所以我在录制时使用它，并且生成的视频可以正确显示。HTC Vivid 同样会为同一个相机返回 270 的硬件方向，但只有在我使用 90 作为fn中的`degrees`参数时才能正确显示。`setOrientationHint`如果我像其他手机一样使用硬件方向的270，视频会颠倒。

**注意：**该`setOrientationHint()`功能包括警告：

> 请注意，某些视频播放器可能会选择在播放期间忽略视频中的合成矩阵。

但是，这*不是*正在发生的事情，因为如果我伪造它并输入 90 而不是 270，我可以轻松地在这些手机上解决这个问题。

**我见过的手机特别出现此问题：**运行 Android 4.0.3 的 HTC Vivid (PH39100)、运行 Android 4.0.3 的 HTC EVO 4G (PG86100)、运行 Android 2.3.4 的 HTC Thunderbolt (ADR6400L)。请注意，它们都是 HTC 手机。也许 HTC 的某个人将顺时针方向误认为逆时针方向。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T04:57:13.437

是的，HTC 手机的前置摄像头旋转方向错误。我最终没有尝试猜测，而是添加了一个设置屏幕，该屏幕将拍摄两张照片，第二张照片旋转 90 度。然后用户可以继续点击下一个，因为我循环通过不同的旋转方向和角度组合，直到两张图片出现相同的方向。

# jquery - jquery dataTables - 类属性随列排序而变化

> ID：14763208
> 
> 赞同：1
> 
> 时间：2013-02-07T23:38:04.793
> 
> 标签：jquery, datatables

我创建了一个具有特定类属性的表，其中的背景颜色取决于类属性。我使用静态内联 css 来定义背景颜色。

我构建表格，然后使用 dataTables 为我提供搜索/排序功能。一切看起来都不错。然后，当我单击其中一个列排序箭头（dataTables 中的本机排序功能）时，排序工作但所有背景颜色都消失了。

dataTables 是否将类属性修改为排序的副产品？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T13:38:18.277

在特定列上激活排序时，dataTables 插件会向`<td>`(.sorting1) 和`<tr>`(.sorting_desc/.sorting_asc) 元素添加一些类。

这些将对您有用：

*   [数据表样式](http://www.datatables.net/styling/custom_classes)
*   [sClass 属性](http://www.datatables.net/usage/columns)

# c++ - 比较 const 和非 const 指针？

> ID：14763212
> 
> 赞同：4
> 
> 时间：2013-02-07T23:38:21.270
> 
> 标签：c++, pointers

比较 const 和非常量指针。比较合法吗？对这种比较的任何特殊照顾。谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-07T23:56:44.520

指向的指针`T`可以隐式转换为指向的 const 指针`T`；类似地，指向的指针`T`可以隐式转换为指向的指针`const T`。当您尝试将指针与 const 指针进行比较时，编译器将根据需要执行这些转换中的任何一个，或两者都执行。没有什么比比较两个非常量指针或两个常量指针更危险的了。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-02-08T00:02:21.170

const 的目的如下

> 常量字符* p

就是承诺你不会改变它。理论上，非常量指针永远不应该指向同一代码中的同一位置，这是良好的编码习惯。在实践中，您最终可能会制作一些 const 内容，因为它让您的生活更轻松，但从概念上讲，它并不是真正的 const。在这种情况下，您可能需要进行比较。如前所述，根据您使用的编译器及其设置，它可能会或可能不会喜欢这样的比较。以防万一，在比较这是否困扰您之前，强制强制转换为非常量，例如：

> if ((char*)const_p == non_const_p)

# javascript - 从 xml 节点检索所有子节点的值，然后将 javascript 函数应用于每个节点

> ID：14763226
> 
> 赞同：0
> 
> 时间：2013-02-07T23:39:11.447
> 
> 标签：javascript, xml

如果我将xml更改为：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<events>
<event>
    <date>
        <weekday>ven</weekday>
        <day>15</day>
        <month>feb</month>
    </date>
    <place>
        <name>Blue Sound</name>
        <city>Nola</city>
        <address>Corso Italia 7</address>
    </place>
    <band>
        <name>Random Jazz 6some</name>
        <link>http://randomjazz6.ran</link>
        <members>
            <drummer> Random Drummer </drummer>
            <vocal> Random Vocalist </vocal>
            <bass>Random Bassist</bass>
            <guitar>Random Guitar</guitar>
            <keys>Random keyboarder</keys>
            <other>Random otherist</other>
        </members>
    </band>
    <description>this is the event number 1, ven 15 feb</description>
</event>
<event>
    <date>
        <weekday>ven</weekday>
        <day>1</day>
        <month>mar</month>
    </date>
    <place>
        <name>Dada</name>
        <city>Chicago</city>
        <address>Random Street 7</address>
    </place>
    <band>
        <name>Random Jazz band 2</name>
        <link>http://randomjazzband2.ran</link>
        <members>
            <drummer> Random Drummer </drummer>
            <vocal> Random Vocalist </vocal>
            <bass>Random Bassist</bass>
            <guitar>Random Guitar</guitar>
            <keys>Random keyboarder</keys>
            <other>Random otherist</other>
        </members>
    </band>
    <description>this is the event number 2, ven 1 mar</description>
</event>
</events> 
```

和以下javascript：

```
$(document).ready(function () {
    var day = xmlDoc.getElementsByTagName("day")[0].childNodes[0].nodeValue;
    var weekday = xmlDoc.getElementsByTagName("weekday")[0].childNodes[0].nodeValue;
    var month = xmlDoc.getElementsByTagName("month")[0].childNodes[0].nodeValue;
    var sideVoice = '<a class="date" onclick="showEv()">' + weekday + day + month + '</a>';
    document.getElementById("side_dates").innerHTML = sideVoice;
});

function showEv() {
    document.getElementById("event_content").innerHTML = xmlDoc.getElementsByTagName("description")[0].childNodes[0].nodeValue;
} 
```

我如何为 XML 中的每个添加一个包含子项和该子项值`<event>`的 rispective ？`<a class="date" onclick="ShowEV()">``<date>``<date>``</a>`

[你可以在http://campaniajazz.altervista.org/#events](http://campaniajazz.altervista.org/#events)上看到这个

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T00:22:59.997

您应该使用 jQuery 作为事件侦听器。此外，您将需要一个[闭包](https://stackoverflow.com/q/750486/1048572)来将事件保存在变量中。

```
var sideDates = $("#side_dates");
var events = xmlDoc.getElementsByTagName("event");
for (var i=0; i<events.length; i++) {
    var event = events[i];

    // you might use something better to get these variables:
    var day = event.getElementsByTagName("day")[0].childNodes[0].nodeValue,
        weekday = event.getElementsByTagName("weekday")[0].childNodes[0].nodeValue,
        month = event.getElementsByTagName("month")[0].childNodes[0].nodeValue,
        description = event.getElementsByTagName("description")[0].childNodes[0].nodeValue;

    var sideVoice = $('<a class="date">' + weekday + day + month + '</a>');
    sideVoice.on("click", makeShowFunction(description));
    sideDates.append(sideVoice);
}
function makeShowFunction(texttoshow) {
     // this closure preserves the variable "texttoshow";
     return function eventHandler(e) {
         $("#event_content").text(texttoshow);
     };
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T00:45:23.020

我不知道，您如何访问源代码（xml），但我制作了一个 jsFiddle 并希望它对您有所帮助......

[http://jsfiddle.net/Nrzh8/](http://jsfiddle.net/Nrzh8/)

“HTML”

```
<?xml version="1.0" encoding="ISO-8859-1"?>

<hr/>Your source:<hr/>

<events>
<event>
<date>
    <weekday>ven</weekday>
    <day>15</day>
    <month>feb</month>
</date>
<place>
    <name>Blue Sound</name>
    <city>Nola</city>
    <address>Corso Italia 7</address>
</place>
<band>
    <name>Random Jazz 6some</name>
    <link>http://randomjazz6.ran</link>
    <members>
        <drummer> Random Drummer </drummer>
        <vocal> Random Vocalist </vocal>
        <bass>Random Bassist</bass>
        <guitar>Random Guitar</guitar>
        <keys>Random keyboarder</keys>
        <other>Random otherist</other>
    </members>
</band>
<description>event description here</description>
</event>    
</events>

<hr/>The result (click it!):<hr/>

<div id="side_dates"></div>
<div id="event_content"></div> 
```

JS

```
$(document).ready(function () {

var xmlsrc = jQuery('event');

whole_date = xmlsrc.find('weekday').html() + ' '
           + xmlsrc.find('day').html() + ' '
           + xmlsrc.find('month').html();

var sideVoice = '<a class="date">' + whole_date + '</a>';

jQuery("#side_dates").html(sideVoice).on('click',   
  function() { jQuery('#event_content').html(xmlsrc.find('description').html());
  }
);
}); 
```

# java - Java concurrency support using java.util.concurrent semantics

> ID：14763229
> 
> 赞同：2
> 
> 时间：2013-02-07T23:39:24.833
> 
> 标签：java, concurrency

I'm trying to support modification (deactivate() function call) of the following data structure in a thread safe manner -

```
 private static Map<String, Set<Integer>> dbPartitionStatus = new HashMap<String, Set<DBPartitionId>>();

 public void deactivate(DBPartitionId partition) throws Exception {
    synchronized (dbPartitionStatus) {
        Set<DBPartitionId> partitions = dbPartitionStatus.get(serviceName);
        if (partitions == null) {
            partitions = new HashSet<DBPartitionId>();
        }
        partitions.add(partition);
        dbPartitionStatus.put(serviceName, partitions);
    }
} 
```

If I were to replace the synchronization with ConcurrentHashMap & ConcurrentSkipListSet duo, there would be some race condition.

I was wondering if there was a cleaner way of achieving synchronization here (using java.util.concurrent)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T04:27:15.133

应该是没有以下实现的竞争条件：

```
private final static ConcurrentMap <String, Set <DBPartitionId>> dbPartitionStatus = 
    new ConcurrentHashMap <String, Set <DBPartitionId>> ();

public void deactivate (DBPartitionId partition) {
    Set <DBPartitionId> partitions = dbPartitionStatus.get (serviceName);
    if (partitions == null)
    {
        partitions = new ConcurrentSkipListSet <DBPartitionId> ();
        Set <DBPartitionId> p = 
            dbPartitionStatus.putIfAbsent (serviceName, partitions);
        if (p != null) partitions = p;
    }
    partitions.add (partition);
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-08T00:00:09.533

我个人看不到这种方法的问题：

```
private static ConcurrentHashMap<String, ConcurrentSkipListSet<DBPartitionId>> dbPartitionStatus = new ConcurrentHashMap<>();

public bool deactivate(DBPartitionId partition) throws Exception {
  ConcurrentSkipListSet<DBPartitionId> partitions = dbPartitionStatus.get(serviceName);
  if (partitions == null) {
    // Create a new set
    partitions = new ConcurrentSkipListSet<DBPartitionId>();
    // Attempt to add, if we add, ev will be null.
    ConcurrentSkipListSet<DBPartitionId> ev  = dbPartitionStatus.put(serviceName, partitions);
    // If non-null, someone else has added it, so now use it.
    if (ev != null)
      partitions = ev;
  }
  // will return true if added succesfully...
  return partitions.add(partition);
} 
```

`putIfAbsent()`map 中还有一个方法可以在“原子”操作中对地图进行获取/放置，但是在这种情况下它有额外的开销，你必须每次都构造一个空集才能传入。

# php - Codeigniter making image upload optional in a form

> ID：14763231
> 
> 赞同：0
> 
> 时间：2013-02-07T23:39:35.647
> 
> 标签：php, codeigniter

I have a form with three fields- one input field, one textarea and an image upload. The form works fine for uploading image when I fill everything and select an image to upload but when I do not select an image it shows select and image. I want the form to submit even if the user does not upload an image. I am sure I had a solution yesterday for this but it stopped working today. Controller :

```
 function store()
{
$this->output->enable_profiler(TRUE);

        $this->load->model('campus_m');
                    $config['upload_path'] = './uploads/';
                    $config['allowed_types'] = 'gif|jpg|png|jpeg';
                    $config['max_size'] = '100';
                    $config['max_width']  = '1024';
                    $config['max_height']  = '768';
                    $config['file_name'] = preg_replace('/[^a-z0-9]+/i','-',iconv('UTF-8','ASCII//TRANSLIT',$this->input->post('name')));
                    $config['file_name'] = trim($config['file_name'],'-').now().'.jpg';                         

                    $this->load->library('upload', $config);

                            $this->load->helper(array('form', 'url'));

                        $this->load->library('form_validation');

                        $this->form_validation->set_rules('goods', 'Goods', 'required');
                        $this->form_validation->set_rules('name', 'Name', 'required|max_length[12]');
                        if ($this->form_validation->run() == FALSE)
                        {
                                $this->load->view('campus_write_v');
                        }
                        else
                        {
                                    if (empty($_FILES['userfile'])) {
                    print_r($_FILES['userfile']);
                                if(!$query = $this->campus_m->create_review("Marla-overdoses1360186300.jpg")){
                                    $data['write_campus'] = 'The answer has not been stored.';
                                    $this->load->view('campus_write_v', $data);
                                    }
                                else {
                                    $data['write_campus'] = 'The answer has been stored. ';
                                    $this->load->view('campus_write_v', $data);
                                }   
                                    }
                                    else{
                                         if($this->upload->do_upload()){
                                if(!$query = $this->campus_m->create_review($config['file_name'])){
                                    $data['write_campus'] = 'The answer has not been stored.';
                                    $this->load->view('campus_write_v', $data);
                                    }
                                else {
                                    $data['write_campus'] = 'The answer has been stored. ';
                                    $this->load->view('campus_write_v', $data);
                                }                                               
                                    }
                            else
                            {
                                 $error = array('error' => $this->upload->display_errors());
                                 foreach ($error as $rows => $r) {
                                 echo $r ;                                 
                                 }
                                    $this->load->view('campus_write_v');                             
                            }
                            }
                        }
                    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T01:37:44.610

```
 if(isset($_FILES))
    {

          if(empty($_FILES['file']['name']))
          {
            //logic here    
          }else{
                if(//validation here )
                {
                   //logic here
                }

          }

    } 
```

# regex - How do I replace double quotes within csv fields but not add a trailing double quote to each line?

> ID：14763232
> 
> 赞同：1
> 
> 时间：2013-02-07T23:39:36.667
> 
> 标签：regex, csv, sed

I have a csv file named data_export_20130206-F.csv. It contains data that contains double quotes (") which is making it very messy to parse.

File looks kind of like this (but with more fields)

```
"stuff","zipcode"
"<?xml version="1.0" encoding="utf-8" ?>","90210" 
```

I want to "escape" the quotes that are within the fields so it will look like this (Note: the quotes within the xml have been doubled):

```
"stuff","zipcode"
"<?xml version=""1.0"" encoding=""utf-8"" ?>","90210" 
```

But when I run this:

```
cat data_export_20130206-F.csv| sed -E 's@([^,])(\")([^,])@\1""\3@g' 
```

Unfortunately, It adds an additional double quote at the end of each line making the document invalid.

```
"stuff","zipcode""
"<?xml version=""1.0"" encoding=""utf-8"" ?>","90210"" 
```

**How do I replace double quotes within csv fields but not add a trailing double quote to each line?**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T23:48:58.890

另一种方法是在第二遍中去掉外部双引号：

```
sed -E 's@([^,])(\")([^,])@\1""\3@g' data_export_20130206-F.csv | sed 's,"\("$\),\1,' 
```

或者简单地通过压缩所有引用重复`tr`（但如果任何字段以引号结尾，这将中断）：

```
sed -E 's@([^,])(\")([^,])@\1""\3@g' data_export_20130206-F.csv | tr -s '"' 
```

如果由于某种原因您仍然会删除换行符，请在替换时读取它们：

```
sed -E 's@([^,])(\")([^,])@\1""\3@g' data_export_20130206-F.csv | sed 's,""$,"\n,' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T12:01:16.817

这是一个脆弱的解决方案，但它适用于您提供的输入。

```
perl -pe 's/(?:^"|"(?=,)|"$|(?<=,)")//g;s/"/""/g;s/^/"/;s/$/"/;s/(?:(?=,)|(?<=,))/"/g' FILENAME 
```

注意引号内的逗号会破坏这一点。鉴于您的输入，产生了以下输出。

```
"stuff","zipcode"
"<?xml version=""1.0"" encoding=""utf-8"" ?>","90210" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T23:46:26.553

确保在 final 之前没有尾随空格，`"`否则您的替换将匹配它。您也可以使用`sed`修剪尾随空格：

```
sed 's/\s\+$//' x.csv | sed -E 's@([^,])(\")([^,])@\1""\3@g' 
```

# apache - RewriteRule matches (.*), but not specific path

> ID：14763235
> 
> 赞同：0
> 
> 时间：2013-02-07T23:40:04.633
> 
> 标签：apache, mod-rewrite, url-rewriting

Banging my head against the wall on this one. Url I'm working with [http://example.com/test/somewhere](http://example.com/test/somewhere)

```
RewriteCond %{HTTP_HOST} ^example\.com [NC]
RewriteRule ^(.*)$ http://%{SERVER_NAME}/sample/somewhere-else [R=301,L] 
```

Works fine, and routes all traffic out to example.com/sample/somewhere-else as to be expected

However...

```
RewriteCond %{HTTP_HOST} ^example\.com [NC]
RewriteRule ^test/somewhere$ http://%{SERVER_NAME}/sample/somewhere-else [R=301,L] 
```

This doesn't seem to match and does nothing. Am I writing this very basic regular expression wrong?

# php - records come one by one very slowly and incomplete

> ID：14763239
> 
> 赞同：0
> 
> 时间：2013-02-07T23:40:17.857
> 
> 标签：php, http, csv, fwrite

I have an issue with my code This script writes the variable to a csv file. I m getting the parameter trough via HTTP GET, the problem is each records comes one by one very slowly. It should be able to take a batch of thousands of records. I also noticed it's incomplete because it's missing about half the record when comparing to the full report downloaded from my vendor. Here is the script:

```
<?php

error_reporting(E_ALL ^ E_NOTICE);

// setting the default timezone to use.
date_default_timezone_set('America/New_York');

//setting a the CSV File
$fileDate = date("m_d_Y");
$filename = "./csv_archive/" . $fileDate . "_SmsReport.csv";

//Creating handle
$handle = fopen($filename, "a");
//$handle = fopen($directory.$filename, 'a')
//These are the main data field
$item1 = $_REQUEST['item1'];
$item2 = $_REQUEST['item2'];
$item3 = $_REQUEST['item3'];

$mydate = date("Y-m-d H:i:s");

$csvRow = $item2 . "," . $item1 . "," . $item3 . "," . $mydate . "\n";
//writing to csv file
// just making sure the function could wrtite to it
if (!$handle = fopen($filename, 'a')) {
    echo "Cannot open file ($filename)";
    exit;
}
//writing the data 
if (fwrite($handle, $csvRow) === FALSE) {
    echo "Cannot write to file ($filename)";
    exit;
}
fclose($handle);
?> 
```

I rewrote it twice but the issue still persist. This goes beyond the scope of my knowledge so I am hoping someone tell me a better approach. My boss blaming PHP, help me prove him wrong!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T01:05:07.030

当请求从 BulkSMS 进入您的服务器时，每个请求都试图打开并写入同一个文件。

这些请求没有排队，并且在开始另一个请求之前不要等待前一个完成，这意味着许多将失败，因为服务器发现文件已被前一个请求使用。

对于此应用程序，最好将每个请求的数据存储在 SQLite 等数据库中，并编写单独的脚本来按需生成 CSV 文件。

我对 SQLite 不是特别熟悉，但我知道它很容易实现并且似乎有[据可查](http://www.php.net/manual/en/book.sqlite3.php)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T07:34:47.360

因为多个请求将同时到达，并发请求将尝试访问同一个输出文件并阻止其他请求访问。

正如我在评论中指出的那样，您**应该**使用一个不错的数据库。PostgreSQL 或 MySQL 是开源数据库，对 PHP 有很好的支持。

以我的经验，PostgreSQL 是一个更可靠的数据库，并且在许多同时用户的情况下表现更好（尤其是在“写入”数据库时），虽然更难学习（它更“严格”）。

MySQL 更容易学习并且可能就足够了，具体取决于请求/流量的总数。

PostgreSQL： [http ://www.postgresql.org](http://www.postgresql.org)

MySQL： [http ://www.mysql.com](http://www.mysql.com)

不要为此**使用**SQLite 作为数据库，因为 SQLite 是一个基于文件的数据库，设计为单用户数据库，不用于客户端/服务器目的。尝试同时将其用于多个请求会给您带来当前遇到的相同类型的问题

[http://www.sqlite.org/whentouse.html](http://www.sqlite.org/whentouse.html) [SQLite 的可扩展性如何？](https://stackoverflow.com/questions/54998/how-scalable-is-sqlite)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T00:01:30.003

我认为有更好的方法来做到这一点。尝试先将所有数据放入一个数组中，CSV 文件中的每一行本身就是一个数组，然后将其输出。这是我不久前写的一些代码的示例：

```
class CSV_Output {

    public $data = array();
    public $deliminator;

    function __construct($data, $deliminator=",") {
        if (!is_array($data)) {
            throw new Exception('CSV_Output only accepts data as arrays');
        }
        $this->data = $data;
        $this->deliminator = $deliminator;
    }

    public function output() {
        foreach ($this->data as $row) {
            $quoted_data = array_map(array('CSV_Output', 'add_quotes'), $row);
            echo sprintf("%s\n", implode($this->deliminator, $quoted_data));
        }
    }

    public function headers($name) {
        header('Content-Type: application/csv');
        header("Content-disposition: attachment; filename={$name}.csv");
    }

    private function add_quotes($data) {
        $data = preg_replace('/"(.+)"/', '""$1""', $data);
        return sprintf('"%s"', $data);
    }

}   

// CONSTRUCT OUTPUT ARRAY
$CSV_Data = array(array(
    "Item 1",
    "Item 2",
    "ITem 3",
    "Date"
));

// Needs to loop through all your data..
for($i = 1; $i < (ARGUMENT_TO_STOP_LOOP) ; $i++) {

    $CSV_Data[] = array($_REQUEST['item1'], $_REQUEST['item2'], $_REQUEST['item3'], $_REQUEST['itemdate']);

}

$b = new CSV_Output($CSV_Data);
$b->output();
$b->headers("NAME_YOUR_FILE_HERE"); 
```

# javascript - trying to replicate css/javascript of page

> ID：14763242
> 
> 赞同：0
> 
> 时间：2013-02-07T23:40:23.577
> 
> 标签：javascript, css

So I'm trying to replicate a page layout, it's an image that is the full height of a page with text to the right of it. The text width seems to adjust depending on the the image, I'm just not exactly sure how it's done. [http://mcgarrybowen.com/en/People/Bill-Borrelle](http://mcgarrybowen.com/en/People/Bill-Borrelle) that's the page, any thoughts on how this was done?

this is what I tried but isn't quite working right, looks like this [http://www.klossal.com/klossviolins/about.html](http://www.klossal.com/klossviolins/about.html) :

```
<div style="width:100%;padding-top:40px;padding-bottom:40px;">
<div style="width:920px;position:relative;">
    <div style="float:left;">
        <img style="height:100%;" src="http://www.klossal.com/klossviolins/elements/horst.jpg" alt="">
    </div>
    <div style="float:left;">
    <p style="color: #b9b8b4;
      font-family: 'Source Sans Pro' , sans-serif;
      font-size: 24px;
      text-align: left;   
      position:relative;
      width:auto;">About</p>            

    <p style="color: #b9b8b4;
      font-family: 'Source Sans Pro' , sans-serif;
      font-size: 14px;
      text-align: left;      
      position:relative;
      width:auto;">
        Mittenwald-trained, Master Violin Maker, Horst Kloss, has worked with fine stringed instruments and bows for over three decades. The Kloss Shop specializes in the repair, restoration, appraisal and sale of historic instruments and bows. Mr. Kloss further offers acoustic adjustment tailored to the individual musician's requirements, the application of museum conservation standards to preserve instrument integrity and maintain value as well as baroque conversion. Mr. Kloss is experienced in providing musicians with custom instrument set up designed to prevent overuse syndrome while maintaining maximal adjustment of tonal color, clarity and projection.<br><br>

        Since 1972, Horst Kloss has cared for collections of note along the East Coast of the United States, including the Boston Museum of Fine Art's collection of historic stringed instruments. He is one of under a hundred makers, nation-wide, whose extensive training and high caliber skills qualified him for full membership status in the American Federation of Violin and Bow Makers.<br><br>

        Raised among musicians and makers, Horst Kloss was imbued with a love of music and a profound sense of stewardship in caretaking for stringed instruments. At the age of 14, he began an apprenticeship in his hometown of Mittenwald, a center for violin-making since the 1600's. He received his formal training at the Bavarian State School of Violin Making in Southern Germany where he earned his Journeyman's diploma in 1964 and his Master's degree in 1972 under the tutelage of Josef Kantuscher. He moved to the United States in 1964 following the exodus of finer instruments from Europe and gained exposure to many of them while working for Carl Becker at Lewis & Sons. Mr. Kloss instructs the courses offered in instrument repair and restoration at the University of New Hampshire's Violin Craftsmanship Institute. He established shops in Houston and Boston before settling in Needham, Massachusetts.<br><br>

        Horst Kloss has attracted an international clientele, including many distinguished concert performers, who value his consistently high quality restoration and sound adjustments. His experienced eye and broad client base make him especially well-suited to bring buyers and sellers of fine stringed instruments together.</p>
        </div>
        <br class="clear">

</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T23:49:24.937

只是为了让您从这里开始，这是一个如何在图像旁边显示文本的简单示例：

[http://jsfiddle.net/g5wpt/](http://jsfiddle.net/g5wpt/)

```
<img class="SomeImage"  src="http://www.klossal.com/klossviolins/elements/horst.jpg" alt="">
<span class="SomeText">Some text next to the image</span> 
```

以下应该进入你的css文件

```
.SomeImage{
    max-width:80%;/*give some room for your text*/

}
.SomeText{
    vertical-align:top;
} 
```

请注意，css 在 css 类中，而不是内联。此外，你的不工作的原因是因为你有块元素彼此相邻，这将导致它换行到下一行。

另一种选择是使用表格。[http://jsfiddle.net/g5wpt/2/](http://jsfiddle.net/g5wpt/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T23:49:31.383

如果您宁愿避免一些棘手的 css，或者发布运行 js。如果可能的话，我可能会建议使用一个包含两列的表格。

表格单元格将根据内容自行调整大小，并且在所有浏览器中都是可靠的。因为文本可以缩小或增长，并且渲染器不会将其视为具有固定宽度，所以固定宽度的图像会将其单元格推出，结果文本单元格将变得更小。

你唯一需要做的就是给表格一个宽度，这样它就可以填满必要的空间，而不是更多或更少。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T00:01:19.017

无论如何，为了让你开始，在这个页面中，当你调整窗口大小时，花花公子会相应地增长和缩小（如果你问我，这有点令人毛骨悚然）。

无论如何，他们正在使用 javascript 来计算图片的宽度。但是，您可以单独使用 HTML+CSS 完成类似的操作。

您只需将图片容器和文本容器的宽度设置为 50%。

这是一个例子：

```
<!DOCTYPE HTML>
<html>
    <head>
        <title>test</title>
        <style>
            #container {
                width: 100%;
            }

            #text {
                width: 48%;
                float: left;                
            }

            #pic-container {
                float: left;
                height: 50%;
            }

            #pic {
                height: 100%;
            }

        </style>
    </head>
    <body>
        <div id="container">
            <div id="pic-container">
                <img id="pic" src="http://mcgarrybowen.com/~/media/A6896FA26F97436E899BCE3307FFC1C2.ashx?as=0"/>
            </div>
            <div id="text">
                Some really cool text lorem ipsum
            </div>
            <div style="clear: both"></div>
        </div>
    </body>
</html> 
```

# java - Why Aren't My Cards Random?

> ID：14763245
> 
> 赞同：1
> 
> 时间：2013-02-07T23:41:01.403
> 
> 标签：java

I created this program in my quest to learn Java but every time I run it I get the same cards over and over again. I can't really find the problem, so why aren't my cards random? I don't really get what I'm missing, is my shuffle method incorrect?

```
package blackjack;

import java.util.Scanner;

public class BlackJack {

 public static void main(String[] args) {

      System.out.println("Are you ready to play BlackJack?");
      System.out.println();

      playBlackjack();
      System.out.println("Thanks for playing!");

   } 

   static boolean playBlackjack() {

      Deck deck;                  
      Hand dealerHand;   
      Hand playerHand;    

      deck = new Deck();
      dealerHand = new Hand();
      playerHand = new Hand();

      dealerHand.addCard( deck.dealCard() );
      playerHand.addCard( deck.dealCard() ); 
      dealerHand.addCard( deck.dealCard() );
      playerHand.addCard( deck.dealCard() );

      System.out.println();

      if (dealerHand.getBlackjackValue() == 21) {
           System.out.println("The dealer have the " + dealerHand.getCard(0)
                                   + " and the " + dealerHand.getCard(1) + ".");
           System.out.println("You have the " + playerHand.getCard(0)
                                     + " and the " + playerHand.getCard(1) + ".");
           System.out.println();
           System.out.println("The dealer has Blackjack! The dealer wins!");
           return false;
      }

      if (playerHand.getBlackjackValue() == 21) {
           System.out.println("Dealer has the " + dealerHand.getCard(0)
                                   + " and the " + dealerHand.getCard(1) + ".");
           System.out.println("User has the " + playerHand.getCard(0)
                                     + " and the " + playerHand.getCard(1) + ".");
           System.out.println();
           System.out.println("You have Blackjack.  You win.");
           return true;
      }
      while (true) {

           // User decides whether to hit or stand

           System.out.println();
           System.out.println();
           System.out.println("Your cards are:");
           for ( int i = 0; i < playerHand.getCardCount(); i++ )
              System.out.println("    " + playerHand.getCard(i));
           System.out.println("The total of your hand is " +     playerHand.getBlackjackValue());
           System.out.println();
           System.out.println("The dealer is showing the " + dealerHand.getCard(0));
           System.out.println();
           System.out.println("Do you hit(type 0) or stand(type 1)? ");
           Scanner input = new Scanner(System.in);
           int choice = input.nextInt();
              if (choice != 0 && choice != 1){
                 System.out.println("0 or 1 must be inputted to continue ");}
            while (choice != 0 && choice != 1);

           if ( choice == 1 ) {
               break;
           }
           else {
               Card newCard = deck.dealCard();
               playerHand.addCard(newCard);
               System.out.println();
               System.out.println("You hits and your card is the " + newCard);
               System.out.println("The total of the hand is now " + playerHand.getBlackjackValue());
               if (playerHand.getBlackjackValue() > 21) {
                   System.out.println();
                   System.out.println("Fool of a Took! You went over 21 and busted!");
                   return false;  
               }
           }

      }
      //User has stood at this point. Poor fool

      System.out.println();
      System.out.println("You stand. Wouldn't it be nice to sit sometime?");
      System.out.println("The dealer's cards are "+ dealerHand.getCard(0) + " and the " + dealerHand.getCard(1));
      while (dealerHand.getBlackjackValue() <= 16) {
         Card newCard = deck.dealCard();
         System.out.println("The dealer hits and gets the " + newCard);
         dealerHand.addCard(newCard);
         if (dealerHand.getBlackjackValue() > 21) {
            System.out.println();
            System.out.println("The dealer busted! You win!");
            return true;
         }
      }
      System.out.println("The dealer's total is " + dealerHand.getBlackjackValue());
      System.out.println();
      if (playerHand.getBlackjackValue() == dealerHand.getBlackjackValue()) {
         System.out.println("The house always wins on a tie. You lose :(");
         return false;
      }
      else if (dealerHand.getBlackjackValue() >= playerHand.getBlackjackValue()) {
         System.out.println("The dealer wins as he has " + dealerHand.getBlackjackValue() 
                          + " points to your " + playerHand.getBlackjackValue() + "!");
         return false;
      }
      else {
         System.out.println("You win because you had " + playerHand.getBlackjackValue() 
                          + " points while the dealer only had " + dealerHand.getBlackjackValue() + "!");
         return true;
      }

   }
}

package blackjack;

public class Card {

private int suit;
private int rank;
public final static int SPADES = 0,       // Codes for the 4 suits.
                        HEARTS = 1,
                        DIAMONDS = 2,
                        CLUBS = 3;

public final static int ACE = 1,          
                  JACK = 11,            
                  QUEEN = 12,
                  KING = 13;

public Card(int cRank, int cSuit) {
    rank = cRank;
    suit = cSuit;
}

public int getSuit() {
    return suit;
}

public int getRank() {
    return rank;
}

public String getSuitString() {
        // Return a String representing the card's suit.
        // (If the card's suit is invalid, "??" is returned.)
    switch ( suit ) {
       case SPADES:   return "Spades";
       case HEARTS:   return "Hearts";
       case DIAMONDS: return "Diamonds";
       case CLUBS:    return "Clubs";
       default: return "I don't even know";

    }
}

public String getRankString() {
    switch ( rank ) {
       case 1:   return "Ace";
       case 2:   return "2";
       case 3:   return "3";
       case 4:   return "4";
       case 5:   return "5";
       case 6:   return "6";
       case 7:   return "7";
       case 8:   return "8";
       case 9:   return "9";
       case 10:  return "10";
       case 11:  return "Jack";
       case 12:  return "Queen";
       case 13:  return "King";
       default: return "This is impossible!";
    }

}

@Override
public String toString() {
    return getRankString() + " of " + getSuitString();
}

}

package blackjack;

public class Deck {
private Card[] deck;   
private int cardsUsed; 

public Deck() {
   deck = new Card[52];
   int l = 0;
   for ( int suit = 0; suit <= 3; suit++ ) {
      for ( int value = 1; value <= 13; value++ ) {
         deck[l] = new Card(value,suit);
         l++;
      }
   }
   cardsUsed = 0;
}

public void shuffle() {
    for ( int i = 51; i > 0; i-- ) {
        int rand = (int)(Math.random()*(i+1));
        Card temp = deck[i];
        deck[i] = deck[rand];
        deck[rand] = temp;
    }
    cardsUsed = 0;
}

public int cardsLeft() {
    return 52 - cardsUsed;
}

public Card dealCard() {
    if (cardsUsed == 52){
       shuffle();}
    cardsUsed++;
    return deck[cardsUsed - 1];

}
}

package blackjack;

import java.util.*;

public class Hand {

private ArrayList hand; 

public Hand() {
   hand = new ArrayList();
}

public void clear() {
  hand.clear();
}

public void addCard(Card c) {
  if (c != null){
     hand.add(c);
  }
}

public void removeCard(Card c) {
  hand.remove(c);
}

public void removeCard(int location) {
  if (location >= 0 && location < hand.size()){
     hand.remove(location);
  }
   }

public int getCardCount() {
  return hand.size();
}

public Card getCard(int location) {
  if (location >= 0 && location < hand.size()){
     return (Card)hand.get(location);}
  else{
     return null;
  }
 } 
public void sortBySuit() {
  ArrayList newHand = new ArrayList();
  while (hand.size() > 0) {
     int pos = 0; 
     Card c = (Card)hand.get(0); 
     for (int i = 1; i < hand.size(); i++) {
        Card c1 = (Card)hand.get(i);
        if ( c1.getSuit() < c.getSuit() ||
                (c1.getSuit() == c.getSuit() && c1.getRank() < c.getRank()) ) {
            pos = i;
            c = c1;
        }
     }
       Object remove = hand.remove(pos);
     newHand.add(c);
  }
  hand = newHand;
 }

   public int getBlackjackValue() {

     int val;      
     boolean ace;  
     int cards;    

     val = 0;
     ace = false;
     cards = getCardCount();

     for ( int i = 0;  i < cards;  i++ ) {

         Card card;     
         int cardVal;  
         card = getCard(i);
         cardVal = card.getRank();  
         if (cardVal > 10) {
             cardVal = 10;   
         }
         if (cardVal == 1) {
             ace = true;     
         }
         val = val + cardVal;
      } 

      if ( ace == true  &&  val + 10 <= 21 ){
          val = val + 10;

      }
      return val;
 }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T23:48:25.103

无法判断，因为您没有向我们展示相关代码。但是，如果您的结果不是随机的，那可能是因为`Deck.dealCard()`不是随机的。

**更新**

阅读您发布的新代码后。创建套牌后，您不会对其进行洗牌。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T23:45:14.123

这不是随机的，因为`Deck::dealCard()`不是随机的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T00:01:00.100

dealCard 很奇怪：当创建一个新的 Deck 时，cardsUsed 为 0，但只有当 cardsUsed 为 52 时才洗牌。

```
public Card dealCard() {
    if (cardsUsed == 52){
       shuffle();}
    cardsUsed++;
    return deck[cardsUsed - 1];

} 
```

我认为您应该在构建牌组之后立即将 shuffle 调用移至构造函数。

# javascript - Chrome 24 与 IE10 滚动可怕的滞后

> ID：14763246
> 
> 赞同：7
> 
> 时间：2013-02-07T23:41:04.147
> 
> 标签：javascript, html, google-chrome, internet-explorer-10

我目前正在开发一个主要针对 Chrome 24.01312.57 和 IE10 的 Web 应用程序。在以前的浏览器中，我遇到了大量的延迟。然而，后者几乎没有滞后，这与每个人声称的完全相反。

为了向您展示差异，我正在使用 iPhone 记录上网本的屏幕，同时向下滚动 Chrome 网上商店——这是 Google 自己创建的。

**检测设备**

1.  2 岁的 Gateway 上网本 - 单核 Intel Atom - 1GB RAM - Win7
2.  iPhone 摄像头（不是很好的录制解决方案，但很容易发现差异）
3.  网站：[https](https://chrome.google.com/webstore/category/home) ://chrome.google.com/webstore/category/home （对于那些担心 AJAX 加载的内容会减慢渲染速度的人开始测试之前，我为这两种浏览器向下滚动了相当多的时间）

**结果**

1.  Google Chrome 24（无扩展）向下滚动 Webstore： [http ://www.youtube.com/watch?v=njkRqiNJPIY](http://www.youtube.com/watch?v=njkRqiNJPIY)
2.  Internet Explorer（无插件）10 在同一页面上：[http ://www.youtube.com/watch?v=B_E_9OzPers](http://www.youtube.com/watch?v=B_E_9OzPers)

*注意：查看鼠标光标和滚动拇指 - 在 IE10 上，鼠标始终在拇指上，而 Chrome 则到处都是，表明鼠标移动和实际渲染之间的延迟很高。*

**底线：**

在我总结之前，请务必意识到，随着网站变得更加复杂和/或规格降低，Google Chrome 上的这些滞后会**越来越大。**然而，即使在这些条件下，IE10 也将 FPS 推得相当高。我还对 Chrome 时间线进行了一些分析。In 显示，当您缩小到渲染需要大约 900 毫秒/帧（在 Google Webstore 上）的点时，FPS 会下降，而 IE10 仍然流畅（更好的是它在 atom 上网本上保留了这种平滑度）

1.  作为 Web 开发人员，是否有一些 CSS 属性导致 Chrome 呈现延迟的页面？
2.  为什么 Internet Explorer 渲染速度如此之快？
3.  有哪些步骤可以让 Chrome 像 IE10 一样快速渲染？

PS：错误报告：[http](http://code.google.com/p/chromium/issues/detail?id=163092) ://code.google.com/p/chromium/issues/detail?id=163092但目前没有这方面的最新进展。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-21T10:26:26.343

Chrome 在绘画方面遇到了困难，尤其是在 2560x1440 及以上的高分辨率下。许多网站，如 Chrome Web Store、Facebook 等，都表现出明显的滚动延迟。在这些网站上滚动时，IE10 在我的显示器上保持 120 fps。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-16T02:11:41.313

我刚刚解决了一个类似的问题。

显然 Chrome 对样式的重新计算不太聪明，除了速度非常慢，所以我专注于防止它重新计算任何东西。

每当触发滚动事件时，我都添加了“滚动”类，但如果它已经存在，Chrome 无论如何都会不断重新计算新样式。当我将其修改为：

```
if (!body.hasClass('scrolled')) { body.addClass('scrolled'); } 
```

Chrome 突然经历了显着的加速（仍然没有 IE 或 FF，但比以前好多了）

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-02-08T00:08:55.850

这是上网本上的视频卡！您将在屏幕上移动的几乎所有东西上体验到类似的效果。我有一个上网本...

直到不久前，您正在测试的网络崩溃了 Chrome 浏览器......

# ruby-on-rails - ruby on rails 内联错误验证

> ID：14763249
> 
> 赞同：0
> 
> 时间：2013-02-07T23:41:19.723
> 
> 标签：ruby-on-rails, forms, jquery

我试图在模式窗口中使用 ajax 表单来允许我的用户编辑/创建新对象，我遇到的问题是错误没有被显示。

在我的控制器中，我有以下内容

```
 def create
    @user = User.find(current_user)
    @players = User.where(:team_id => current_user[:team_id]).all
    #params[:event][:datetime] = "#{params[:event][:date]} #{params[:event][:time]}"
    @event = Event.new(params[:event])
    respond_to do |format|
      if @event.save
        #Notifier.event_added(@event,@user).deliver
        format.html { redirect_to(events_url,
                                  :notice => "#{event_display_c(@event.event)} vs #{@event.opponent.name} was successfully created.") }
        format.js { @events = Event.all }
      else
        format.html { render :action => "new" }
        format.js { render :json => @event.errors, :status => :unprocessable_entity }
      end
    end
  end 
```

在我的 create.js.erb 我有

$("#events_list").replaceWith("<%= escape_javascript render('events_list') %>");

在我的部分我有

```
 - if @event.errors.any?
  .alert-box.error
    %a.close{:href => ''} ×
    %strong Error:
    = pluralize(@event.errors.count, 'error')
    prohibited event from being saved:
    %ul
      - @event.errors.full_messages.each do |msg|
        %li= msg
%h5 Schedule Form
= form_for(@event, :html => { :class => "custom"}, :remote => true, :validate => true) do |f|
  .row
    .two.columns
      = f.label :event_type, :class =>'control-label'
    .four.columns
      = f.select :event, Event::EVENT_TYPES
    -if current_user.admin?
      .two.columns
        = f.label :team, :class =>'control-label'
      .four.columns
        = select("event", "team_id", Team.all.collect { |p| [truncate(p.name, :length => 18, :omission => '...'), p.id] }, {:prompt => 'Select a team'})
    - else
      =f.hidden_field :team_id, :value => current_user.team_id
  .row
    .two.columns
      = f.label :name, :class =>'control-label'
    .ten.columns
      = f.text_field :result_id, :class => "required"
  .row
    .two.columns
      = f.label :date_and_time, :class =>'control-label'
    .ten.columns
      .input-prepend
        %span.add-on
          %i.icon-schedule
      = f.text_field :time, :id => 'datepicker', :class => "hasDatepicker", "data-date-format" => "dd/mm/yyyy"
  .row
    .two.columns
      = f.label :duration, :class =>'control-label'
    .four.columns
      = f.number_field :duration, :placeholder => 'Time in Minutes'
    .two.columns
      = f.label :arrival_time, :class =>'control-label'
    .four.columns
      = f.number_field :arrival_time, :placeholder => 'Time in Minutes'
  .row
    .two.columns
      = f.label :location, :class =>'control-label'
    .four.columns
      = select("event", "location_id", Location.all.collect { |p| [p.name, p.id] }, {:include_blank => 'None'})
    .two.columns
      = f.label :opponent, :class =>'control-label'
    .four.columns
      = select("event", "opponent_id", Opponent.all.collect { |p| [p.name, p.id] }, {:include_blank => 'None'})
  .row
    .two.columns
      = f.label :players, :class =>'control-label'
    .four.columns
      = select(:event, :selected_players, @players.map { |p| [full_name(p), p.id] }, {:include_blank => false}, "data-placeholder" => 'Add Players to Lineup', :prompt => 'Add Players to Lineup', :multiple => "multiple", "data-customforms"=>"disabled")
    .two.columns
      = f.label :home_or_away, :class =>'control-label'
    .four.columns
      = f.select :home_or_away, Event::HOME_OR_AWAY, {:include_blank => 'None'}
  .row
    .two.columns
      = f.label :scores, :class =>'control-label'
    .three.columns
      = f.number_field :score_for, :placeholder => 'Our Score'
    .two.columns
      %label vs.
    .three.columns
      = f.number_field :score_against, :placeholder => 'Opponents Score'
  .row
    = f.submit :class => 'button success', :disable_with => "Saving Event..."
    = link_to 'Cancel', 'javascript:void(0);', :class => 'button alert close-reveal-modal' 
```

控制台输出什么

```
 Started POST "/events" for 168.186.239.50 at 2013-02-08 06:59:47 +0100
Processing by EventsController#create as JS
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"CBiKEQN+Q2Dkhgt7MSJbjU7WzuUPgW0/z6m71KdDpnU=", "event"=>{"event"=>"1", "team_id"=>"", "time"=>"", "duration"=>"", "arrival_time"=>"", "location_id"=>"", "opponent_id"=>"", "selected_players"=>[""], "home_or_away"=>"", "score_for"=>"", "score_against"=>""}, "commit"=>"Create Event"}
  User Load (1.4ms)  SELECT "users".* FROM "users" WHERE "users"."id" = 38 LIMIT 1
  User Load (1.1ms)  SELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 38]]
  User Load (1.4ms)  SELECT "users".* FROM "users" WHERE "users"."team_id" = 1
   (0.4ms)  BEGIN
   (0.6ms)  ROLLBACK
  Event Load (0.9ms)  SELECT "events".* FROM "events" 
  Rendered events/_events_list.html.haml (1.1ms)
  Rendered events/create.js.erb (3.7ms)
Completed 200 OK in 516ms (Views: 13.3ms | ActiveRecord: 17.5ms) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T03:32:56.497

`respond_to`将块更改为

```
respond_to do |format|
  if @event.save
    #Notifier.event_added(@event,@user).deliver
    format.html { redirect_to(events_url,
                              :notice => "#{event_display_c(@event.event)} vs #{@event.opponent.name} was successfully created.") }
    format.js { @events = Event.all }
  else
    format.html { render :action => "new" }
    format.js
  end
end 
```

并更改`create.js.erb`为

```
`$("#events_list").html("<%= escape_javascript render('events_list') %>")` 
```

因为你没有`#events_list`那个部分的 div

# ios - 为什么滚动 UIWebView *感觉*与滚动任何其他 UIScrollView 有很大不同？

> ID：14763255
> 
> 赞同：33
> 
> 时间：2013-02-07T23:41:50.910
> 
> 标签：ios, cocoa-touch, uiwebview, uiscrollview

我正在构建一个应用程序，它将少量简单的 HTML（本地）加载*到*单个全屏 UIWebView 中。我注意到滚动此 Web 视图的*感觉*与滚动任何其他 UIScrollView 明显不同。本质上，这似乎不是性能或响应能力问题......这只是当您上下拖动和轻弹 Web 视图时动力如何发挥作用的问题。它只是感觉不是很“原生”（因为没有更好的词）。这就像滚动糖蜜或布丁……有点“粘”而不是像你想要的那样“光滑”。

有谁知道这是什么原因？有什么办法可以修复它，或者至少让滚动 UIWebView 感觉更“原生”？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-02-08T00:18:40.767

我也有同样的看法。一定和webView的scrollView减速率有关。刚刚运行了这个测试，1) 它证实了我们的怀疑，2) 提出了修复建议。

我在我的 UI 中添加了一个 scrollView 和一个 webView，然后记录了以下内容：

```
NSLog(@"my scroll view's decel rate is %f", self.scrollView.decelerationRate);
NSLog(@"my web view's decel rate is %f", self.webView.scrollView.decelerationRate);
NSLog(@"normal is %f, fast is %f", UIScrollViewDecelerationRateNormal, UIScrollViewDecelerationRateFast); 
```

输出证实了关于 webView 更具摩擦性的猜测：

```
my scroll view's decel rate is 0.998000
my web view's decel rate is 0.989324
normal is 0.998000, fast is 0.990000 
```

并建议修复：

```
self.webView.scrollView.decelerationRate = UIScrollViewDecelerationRateNormal; 
```

# sccm - c:\programme and c:\program files in SCCM environment

> ID：14763259
> 
> 赞同：0
> 
> 时间：2013-02-07T23:42:00.537
> 
> 标签：sccm

When installing a specific software (cheops) via SCCM to german PC's we are facing an issue with the language of the operating system.

It seems that the installpackage is searching for a map which is named "Program Files". On German staged pc's where the operating system is most of the time in German, the map is called "programme"

Is it possible that this might cause a problem? How can we fix this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T16:20:17.093

几个想法：

1.  向软件供应商投诉。他们应该使用环境变量而不是硬编码路径。叹息...不过，我怀疑您对此没有太多控制权。
2.  许多安装程序允许通过命令行传递参数。也许您可以为这些用户传递特定于德语的路径。请参阅[此示例](http://www.codeproject.com/Articles/16767/How-to-Pass-Command-Line-Arguments-to-MSI-Installe)或[此处](https://stackoverflow.com/questions/6305301/pass-command-line-variables-into-wix-based-windows-installer-msi)。

# ios - iOS 6-：Facebook API

> ID：14763260
> 
> 赞同：0
> 
> 时间：2013-02-07T23:42:02.713
> 
> 标签：ios, facebook-graph-api, ios6

我正在开发一个与 Facebook 集成的应用程序。我读到了关于在 ios 6 中集成的信息，好的。我下载了 SDK 并附带了示例。我打开了`"Scrumptious"`，但它适用于 iOS 4.3！

所以，两个问题：

1.  有 iOS 6 的示例吗？
2.  如何使用 Facebook SDK 开发与 iOS 6 和其他 iOS 集成的应用程序？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T02:00:20.090

最新版本的 Facebook SDK 适用于所有 Apple 支持的 iOS 版本，即 4.3+。如果设备使用的是 iOS 6，并且您以适当的方式请求您的权限（即先读，后写），那么它将使用 Apple 的内置 Facebook 支持以及用户在其他地方提供的用户名/密码。但是，它也可以在不支持该支持的 iOS 4 和 5 设备上运行，提供适当的应用内提示或在适当的情况下暂时向 Facebook 应用分页。

因此，使用 Facebook SDK 从 iOS 6 访问 Facebook 是可选的，但这可能是一个好主意，因为：

*   它也适用于 iOS 4 和 5；和
*   它为常见的 Facebook 任务提供了许多预先构建的对话。

因此，尽管 Scrumptious 可以在 iOS 4.3 上运行，但它使用的是最新版本的 SDK，并且如果可用，将使用操作系统级别的支持。

最新版 SDK 与旧版 SDK 的显着特点之一是`FBSession`现在有了`activeSession`. [这是去年六月](https://github.com/facebook/facebook-ios-sdk/blob/e82ebec7eab5261335ece7f65542c8bff645abd0/src/FBSession.h)公开添加的。Scrumptious 利用了该功能，例如在 SCAppDelegate.m 的第 94、130、144、152 和 159 行。

所以直接回答你的问题：你很可能已经下载了正确的 SDK。在 iOS 4、5 或 6 下，您将编写完全相同的代码来使用它。像 Scrumptious 这样的示例是一个很好的起点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T01:16:50.237

如果你想要一个很棒的教程，你可以从 Ray Wenderlich 的网站开始。他们有一个很好的使用社交框架的入门教程。我实际上是通过教程购买了他的书 iOS 6。它帮助我为朋友制作了一个集成了 Facebook 和 twitter 的应用程序。它确实可以帮助您了解社交框架。

[http://www.raywenderlich.com/](http://www.raywenderlich.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T00:20:50.363

您是否正在尝试与 ios6 SocialKit 集成？您无需为此下载 SDK，它已内置在操作系统中。如果您想支持较旧的 ios 版本，我建议您使用 Share Kit。

# bash - 在 ubuntu 上的文件中换行

> ID：14763265
> 
> 赞同：-1
> 
> 时间：2013-02-07T23:42:31.967
> 
> 标签：bash, ubuntu, grep, uniq

我有 2 个文本文件

```
$ cat com.txt
user1@myskype.com
user3@myskype.net
user5@myskype.net
user4@myskype.net
user2@myskype.net

$ cat net.txt
user1@myskype.net
user3@myskype.net
user5@myskype.net
user2@myskype.net
user4@myskype.net 
```

现在我想阅读 2 个文本文件并将匹配的用户名包装成如下格式

```
user1@myskype.net : user1@myskype.com 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T23:47:44.993

试试这个单行：

```
awk -F'@' 'NR==FNR{a[$1]=$0;next}$1 in a{print a[$1]" : "$0}' net.txt com.txt 
```

# jsp - 通过 servlet 将 .jsp 代码添加到 .jsp 文件

> ID：14763266
> 
> 赞同：0
> 
> 时间：2013-02-07T23:42:55.387
> 
> 标签：jsp, servlets

我试图将一个小型网上商店作为学校项目的一部分进行编程。我们必须在 java 中使用 servlet，因此也必须使用 .jsp 页面。我的问题是我想检查用户是否登录。如果没有，我想显示一个登录表单，如果他们登录，我想显示他们的购物篮。这里的主要问题是，当我尝试通过我的 servlet 将 .jsp 代码发送到我的主 .jsp 页面时，它不会翻译代码，它只是简单地打印出来：

这是我的servlet代码：

```
package coreservlets;

import java.io.*;
import java.io.IOException;
import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.http.HttpSession;
import javax.servlet.*;
import javax.servlet.http.*;

@WebServlet({"/loggedIn"})
public class LoggedIn extends HttpServlet
{
   protected void doGet(HttpServletRequest request, HttpServletResponse response)
     throws ServletException, IOException
   {
     doPost(request, response);
   }

   protected void doPost(HttpServletRequest request, HttpServletResponse response)         throws ServletException, IOException {
 HttpSession session = request.getSession();

 PrintWriter pw = response.getWriter();

 if (session.getAttribute("loggedInName") == null) 
 {
   pw.println("<tr><td>" + 
     "<%@include file=\"messages.jsp\"%> </td>" + 
     "<td>"
     + "<form action=\"login\" method=\"POST\">"
        + "<table>"
            + "<tr>"
                + "<td>Username</td>"
                + "<td><input type=\"text\" name=\"username\" />"
                + "</td>"
            + "</tr>"
            + "<tr>"
                + "<td>Password</td>"
                + "<td><input type=\"password\" name=\"password\" />"
                + "</td>"
            + "</tr>"
            + "<tr>"
                + "<td></td>"
                + "<td><input type=\"submit\" value=\"login\" /> or" 
                + " <ahref=\"register.jsp\">register here!</a>"
                + "</td>"
            + "</tr>"
        + "</table>"
    + "</form> </td>" +  
     "</tr>");
 }
 else 
 {
     pw.println("<%@include file=\"shoppingBasket.jsp\"%>");

 }
   }
} 
```

在 index.jsp 中，我使用以下方法简单地加载上面的 servlet：

有没有一种聪明的方法来解决这个问题，而不会使它变得复杂，并且不添加单独的登录页面（知道其他人这样做了，但我认为这只会带来很多额外的麻烦来检查人们是否在结帐之前登录等等

请记住这只是一个学校项目，所以我知道它可能不是最聪明的做事方式，也不是最安全的，但它只是一个虚构的网上商店 :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T07:22:08.400

这是错误的方式。

JSP 将被编译为在运行时生成 HTML 的纯 Java-Servlet。你不能用Java 生成JSP 生成Java 生成HTML。

尝试使用

```
package coreservlets;

import java.io.*;
import java.io.IOException;
import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.http.HttpSession;
import javax.servlet.*;
import javax.servlet.http.*;

@WebServlet({"/loggedIn"})
public class LoggedIn extends HttpServlet
{
   protected void doGet(HttpServletRequest request, HttpServletResponse response)
     throws ServletException, IOException
   {
     doPost(request, response);
   }

   protected void doPost(HttpServletRequest request, HttpServletResponse response)         throws ServletException, IOException {
 HttpSession session = request.getSession();

 PrintWriter pw = response.getWriter();

 if (session.getAttribute("loggedInName") == null) 
 {
   pw.println("<tr><td>");
   request.getRequestDispatcher().include("/messages.jsp");  
   pw.println("<td>"
     + "<form action=\"login\" method=\"POST\">"
        + "<table>"
            + "<tr>"
                + "<td>Username</td>"
                + "<td><input type=\"text\" name=\"username\" />"
                + "</td>"
            + "</tr>"
            + "<tr>"
                + "<td>Password</td>"
                + "<td><input type=\"password\" name=\"password\" />"
                + "</td>"
            + "</tr>"
            + "<tr>"
                + "<td></td>"
                + "<td><input type=\"submit\" value=\"login\" /> or" 
                + " <ahref=\"register.jsp\">register here!</a>"
                + "</td>"
            + "</tr>"
        + "</table>"
    + "</form> </td>" +  
     "</tr>");
 }
 else 
 {
     pw.println("<%@include file=\"shoppingBasket.jsp\"%>");

 }
   }
} 
```

而不是线

```
"<%@include file=\"messages.jsp\"%> </td>" + 
```

问候

# c# - C# 中的最佳 2D 平铺渲染

> ID：14763270
> 
> 赞同：0
> 
> 时间：2013-02-07T23:43:15.140
> 
> 标签：c#, image, graphics, system.drawing

所以我在 C# 中制作了一个简单的 2D Sidescrolling 游戏，但是我发现使用 Graphics.drawImage 并不能特别允许我按照我的意愿更新图块。例如，我告诉它绘制图像并且它停留在我告诉它的位置。我希望能够将整个场景从左向右移动。如果我必须使用 for 循环或其他东西并在每次绘制图像时定义它的位置，这会更容易。

这可能会令人困惑，我确信有办法做到这一点，我只是不知道如何。

所以我的问题是：如何控制在表单上绘制的每个矩形的位置，以便我可以在需要时将整个场景向左滚动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T23:48:08.660

我当然不是游戏/图形专家，所以对此持保留态度。

我想到了几件事。

首先，您可以将整个关卡预渲染为一个位图，然后将相关部分绘制到您的图片框中。

其次，Graphics 类有一个 Transforms 属性（我可能名字错了）。您可以向图形对象添加线性变换，这样您的瓷砖的绘画坐标就不会改变，但图形对象会滑动，或者我认为图形术语是“翻译”输出整体。

# iphone - 放置在辅助视图中时，UIWebView 卡在纵向模式

> ID：14763275
> 
> 赞同：0
> 
> 时间：2013-02-07T23:43:37.043
> 
> 标签：iphone, uiwebview, xcode4.2

我有一个奇怪的问题。当我在单个视图应用程序中运行 UIWebView 时，它运行良好，例如，当手机旋转时，webView 会旋转以保持视图直立。但是，如果我向应用程序添加新视图并使用主视图上的按钮打开该视图，则辅助视图中的 webView 会卡在纵向模式。当我旋转手机时，它不会保持直立。UIViewController 之间的唯一区别是一个是主视图，一个是主视图调用的新视图。

这是我切换到第二个视图的代码：

```
- (IBAction) nextPlotButton:(id)sender
{
    NSLog(@"Next Plot");
    NextViewController *subClass = [[NextViewController alloc] initWithNibName:@"NextViewController" bundle:nil];
    subClass.view.frame = self.view.frame;
    subClass.view.autoresizingMask = self.view.autoresizingMask;
    [self.view.superview addSubview:subClass.view];

    //ARC
    nextView = subClass;

} 
```

这是加载第二个视图后的代码

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.

    NSString *localFilePath = [[NSBundle mainBundle] pathForResource:@"scatterPlot" ofType:@"html"] ;
    NSURLRequest *localRequest = [NSURLRequest requestWithURL:
                              [NSURL fileURLWithPath:localFilePath]] ;
    [webView2 loadRequest:localRequest] ;
    [self.view addSubview:webView2];
} 
```

谢谢您的帮助！干杯，杰森

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T18:10:36.403

调用`-presentViewController:`而不是 addSubview 应该可以解决问题。界面方向由根视图控制器处理，因此添加子视图不会有正确的旋转。

# php - 无法使用 $.post 通过 ajax 发送表单

> ID：14763277
> 
> 赞同：0
> 
> 时间：2013-02-07T23:43:43.653
> 
> 标签：php, jquery, jquery-ui-dialog

我试图通过 ajax 将表单发送到 php 页面，并带有 jQ​​uery 对话框中的按钮。因为，表单中没有按钮我在按钮定义中有一个发送整个表单的函数

这是我正在使用的声明

//JS文件

```
$( "#showInfo_dialog" ).dialog({
 autoOpen: false,
  height: 240,
  width:300,
  modal: true,
  buttons: [
{text:"Edit",click: function(){ //Add edit button to dialog box
  alert("edit");

    //FOR SOME REASON IT DOESNT NEED ";"
    $('#title').removeAttr('disabled')
    $('#description').removeAttr('disabled')
    $('#director').removeAttr('disabled')
    $('#producer').removeAttr('disabled')
    $('#category').removeAttr('disabled')
  }},

  {text:"Update",click: function(){//Add update button to dialog box
//  alert("update");
  **$.post("save_show.php",  $("#show_form").serialize() ,function(data){
    alert(data);**
  });
  }}]
}); 
```

//PHP 文件 //这是我在 php.ini 中创建的表单。当我得到并附加没有问题。我//可以看到数据。我这样做是因为它更方便我 echo "

### “.$show_info['show_title']。”

标题
类别
描述
Director
Producer
"; echo $_POST['category'];

每次我运行它时，返回的数据都是一个错误，说明该类别在表单中。所以我想知道这有什么问题

# xna - HLSL 和 Pix 问题数

> ID：14763278
> 
> 赞同：0
> 
> 时间：2013-02-07T23:43:55.367
> 
> 标签：xna, hlsl, pixel-shader

我在 HLSL 和 Pix 上有很多问题。

1) 你能在 HLSL 3 中单独声明一个像素着色器而没有顶点着色器吗？如果没有，我该怎么做才能解决这个问题？

2) 为什么 Pix 会跳过代码？我有一个相当长的着色器方法，但 Pix 似乎阻止我调试，直到方法进行到一半，然后跳过该块的其余部分。我将 Pix 设置为在按下 F12 时收集信息并选中禁用 D3DX 分析复选框。我必须这样做，因为我使用的是 XNA。

3) 我可以在实验运行时调试着色器吗？

干杯，

# javascript - 在客户端和服务器之间共享模板

> ID：14763280
> 
> 赞同：0
> 
> 时间：2013-02-07T23:44:04.477
> 
> 标签：javascript, node.js, templates, backbone.js

我正在构建一个应用程序 - 前端 = 主干，服务器 = node.js。为了提高性能，我正在考虑使用一些模板引擎从节点/快递服务器渲染第一页。在客户端上，我想通过 ajax 请求（接收 json）进行所有迭代，并再次使用模板来呈现数据（实际上它是同一个模板）。有没有办法在客户端和服务器上重用相同的模板？维护/缓存会更容易。在服务器上首次加载模板具有其他优点，例如服务器路由 + 用于根据用户代理确定返回哪个模板的选项。谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T00:20:55.527

您可以使用[ECT](http://ectjs.com)模板引擎。ECT 专为在客户端和服务器上使用而设计，无需对模板和代码进行任何修改。也是目前 ECT[最快](http://ectjs.com/#benchmark)的模板引擎。

# php - php include_once 以字母顺序反转？

> ID：14763281
> 
> 赞同：2
> 
> 时间：2013-02-07T23:44:08.320
> 
> 标签：php

我目前正在使用这段代码通过为每篇文章添加一个新的 html 文件来将新闻提要加载到我的网页上。

```
<?php 
   foreach (glob("news/*.html") as $filename)
{
    include_once $filename;
}  ?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T23:46:17.253

```
$files = glob('news/*.html');
rsort($files);
foreach ($files as $f) {
    include $f;
} 
```

这实际上进行了反向字典排序（因为文件名是字符串），但幸运的是在这种情况下有效，因为日期是从最高到最低的数量级。更多信息：[rsort](http://php.net/rsort)。

注意：我假设您的日期格式为 YYYY-MM-DD。如果它们的格式没有前导零，则此解决方案将不起作用。您必须从每个文件名中提取日期，将其更改为某种中间类型（unix 时间戳或按字典顺序排序的字符串），然后对其进行排序。例如`'2013-3-1' > '2013-12-1'`被认为是真的，但是`'2013-03-01' > '2013-12-01'`是假的。

# c# - LINQ 请求多对多

> ID：14763283
> 
> 赞同：2
> 
> 时间：2013-02-07T23:44:26.340
> 
> 标签：c#, linq, many-to-many

我有以下表格

```
Users
 - ID
 - FirstName
 - LastName

MultiplyItems
 - ItemID
 - Title

UserMultiplyItems
 - UserID
 - ItemID 
```

我有一个变量

```
List<int> delegateList = {1, 3, 5}; 
```

其中 1、3、5 是 ItemID

我想选择所有用户，其中至少有一个 ItemID 链接可选用户。我尝试以下方法：

```
 var result = from i in _dbContext.Users
                     where 
                     ((delegateList == null) || i.MultiplyItems.Any(p=> delegateList.Any(a => a == p.ItemID)))

                     select new UserModel()
                     {
                         ....
                     }; 
```

但它不起作用。错误：

> 无法比较“System.Collections.Generic.List`1”类型的元素。仅支持原始类型、枚举类型和实体类型。

如何正确执行？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T00:35:05.157

我会写这个：

```
var filteredUsers = delegateList == null 
    ? _dbContext.Users
    : _dbContext.Users.Where(user => user.MultiplyItems
        .Any(item => delegateList.Contains(item.Id)));

var result = filteredUsers.Select(user => new UserModel
        {
            //the UserModel initialization
        }); 
```

您不应检查查询中的以下行：

```
delegateList == null 
```

它被翻译成 SQL，SQL 不知道什么是 List 以及如何将它与 null 进行比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T00:10:00.487

```
 var result = from i in _dbContext.Users
    from mi in i.multiplyItems
    select new yourClass();

    if(delegateList!=null)
    {
       result = result.Where(delegateList.contains(mi.ItemID));
    }

    result.ToList(); 
```

我没有开放测试的视觉工作室，但它应该很像那样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T00:41:26.143

我不确定这是否是您想要的，但我认为最好尝试并提供帮助。

这将从用户表中输出所有用户，其中 ItemID 包含在 delegateList 中。魔力在于 Contains 运算符，您可以从包含在列表 b 中的列表 a 中获取元素

```
var selection = from a in db.UserMultiplyItems
                from b in db.Users
                where delegateList.Contains(a.ItemID) && a.UserID == b.ID
                select b; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-08T00:17:58.993

尝试将其更改为：

```
var result = from u in _dbContext.Users
where 
((delegateList == null) || u.MultiplyItems.Any( mi => delegateList.Contains(mi.ItemID)))

select new UserModel()
{
 ....
}; 
```

注意我还将你的“i”和“p”重命名为“u”和“mi”，以便于阅读。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-08T00:30:03.043

或者，您根本不能使用 LINQ，而只能使用 lambda 表达式：

```
List<UserModel> usersWithItems =
    context
    .Users
    .Where(u => u.MultiplyItems.Any(mi => (delegateList == null) || (delegateList.Contains(mi.ItemID))))
    .Select(um => (new UserModel() { ...  } ) )
    .ToList(); 
```

我个人更喜欢哪个，这意味着您根本不需要了解 linq。

# android - Android SDK 打不开

> ID：14763288
> 
> 赞同：0
> 
> 时间：2013-02-07T23:44:59.910
> 
> 标签：android, sdk

我已经尝试了很多我在这里看到的这个问题的解决方案，但似乎没有一个对我有用。基本上，当我运行 Android 批处理文件时，一个 CMD 框会弹出一毫秒然后再次关闭。我可以看到它说：“此时 find_java.exe 出乎意料”。

我不知道为什么会这样。我认为这可能是因为我没有将它安装到我的操作系统所在的主硬盘驱动器上，这是一个 SSD，而是将它安装到第二个驱动器上。

所以JDK的文件路径是：F:\Program Files (x64)\Java\jdk1.7.0_11

有人知道我该如何解决这个问题吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-09T01:49:38.957

我遇到了同样的问题。我找到了修复它的方法。转到 System32 文件夹并将 java 更改为 java.exe，希望这会起作用。还要确保您已安装 jdk 和 jre。就这样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T23:59:19.570

假设您正在运行 Windows，请确保您有一个名为 JAVA_HOME 的系统变量设置为指向您的 Java 主目录

JAVA_HOME = F:\Program Files (x64)\Java\jre6 （或您的 JRE 的任何版本）

并添加

F:\Program Files (x64)\Java\jdk1.7.0_11\bin 到 PATH 系统变量

注意添加到末尾的 \bin

# python - 将上下文添加到 django userena 视图

> ID：14763290
> 
> 赞同：1
> 
> 时间：2013-02-07T23:45:09.173
> 
> 标签：python, django

非常简单的问题需要一个非常简单的解决方案。我需要向名为 profile_detail 的配置文件视图添加额外的上下文，同时仍包含原始上下文。这是 userena 视图。

```
def profile_detail(request, username,
    template_name=userena_settings.USERENA_PROFILE_DETAIL_TEMPLATE,
    extra_context=None, **kwargs):
    .........................
    .........................
    user = get_object_or_404(User,
                             username__iexact=username)

    profile_model = get_profile_model()
    try:
        profile = user.get_profile()
    except profile_model.DoesNotExist:
        profile = profile_model.objects.create(user=user)

    if not profile.can_view_profile(request.user):
        return HttpResponseForbidden(_("You don't have permission to view this profile."))
    if not extra_context: extra_context = dict()
    extra_context['profile'] = user.get_profile()
    extra_context['hide_email'] = userena_settings.USERENA_HIDE_EMAIL
    return ExtraContextTemplateView.as_view(template_name=template_name,
                                            extra_context=extra_context)(request) 
```

我被告知这会奏效。首先，我将 userena 视图导入为`userena_views`. 然后我尝试创建我的上下文，然后使用 userena 视图发送请求，并将我的 url 更改为指向该视图。

```
def profileview(request,username):
    user=User.objects.get(username=username)
    usergigs=Gig.objects.filter(user.id)
    extra_context['usergig']=usergigs
    return userena_views.profile_detail(request) 
```

这不起作用，这是正确的方法吗？有没有一种优雅的方式来做到这一点？还是我唯一的选择是将视图复制到我的视图中并从那里编辑？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-20T16:06:43.343

你能像这样编辑你的代码吗？

```
def profileview(request,username):
    user=User.objects.get(username=username)
    usergigs=Gig.objects.filter(user.id)
    extra_context['usergig']=usergigs
    return userena_views.profile_detail(request, extra_context=extra_context) 
```

# xcode - 主应用程序窗口上的控件委托不正确

> ID：14763297
> 
> 赞同：2
> 
> 时间：2013-02-07T23:45:31.590
> 
> 标签：xcode, delegates, interface-builder

我正在 XCode 4.6 中开发一个应用程序。

要从 NSTextField 控件获取文本更改通知，我：

*   将 NSTextField 控件放在窗口上。
*   通过在 IB 中右键单击将控制委托连接到文件所有者，从委托拖动到文件所有者。
*   在窗口类中实现 controlTextDidChange。

对于应用程序，窗口类是我的 AppDelegate，文件的所有者是 NSApplication。对于模态对话框，窗口类 NSWindowController 和 File's Owner 属于同一类型。

如果我在 AppDelegate 类中的 controlTextDidChange 中放置断点，它永远不会触发。如果我使用模态对话框执行相同的过程，它可以正常工作。

我知道在主应用程序窗口的情况下，控件的委托不是我的 AppDelegate。

在主窗口中连接我的控制委托时我做错了什么？我一定错过了一些简单的东西。文件所有者是为控件设置的正确代表吗？

任何帮助，将不胜感激。

这是一些要求的代码。

```
// AppDelegate.h  
// SimpleApplication  

#import <Cocoa/Cocoa.h>  
#import "SimpleTest/SimpleTest.h"  

@interface AppDelegate : NSObject <NSApplicationDelegate>  

@property (assign) IBOutlet NSWindow *window;  

@property (assign) IBOutlet NSTextField *textField;  

@end  

// AppDelegate.m  
//  SimpleApplication  

#import "AppDelegate.h"  

@implementation AppDelegate  

- (void)applicationDidFinishLaunching:(NSNotification *)aNotification  
{  
  // Not much to do here for now.  
}  

// Breakpoint set in this function never fires.  
- (void)controlTextDidChange:(NSNotification *)obj  
{  
  NSMutableString* description= [[NSMutableString alloc] init];  
  id aDelegate= [_textField delegate];  
  Class delegateClass= [aDelegate class];  
  [description setString:[delegateClass description]];  
  [description release];  
}  

// To provide some information about the delegates.  
- (IBAction)textChange:(id)sender  
{  
  NSTextField* theTextField= (NSTextField*)sender;  
  NSMutableString* description= [[NSMutableString alloc] init];  
  id aDelegate= [theTextField delegate];  
  Class delegateClass= [aDelegate class];  
  [description setString:[delegateClass description]];  
  [description release];  
}  

@end 
```

这是主窗口上 NSTextField 的右键单击信息截图 -

[![](../Images/82d48995bc005c1d319c748f6309107a.png "由 imgur.com 主办")](https://imgur.com/0Yc9bQr)

身份检查器将*File's Owner*显示为**NSApplication**，当我在 textChange 中放置断点并在文本字段中点击 return 时，这是我在调试器中看到的。然而， controlTextDidChange 的实现者*self*是**AppDelegate**。相比之下，在模态对话框中，*self*和*File's Owner*是同一个对象，派生自*NSWindowController*。

所以，结果是我没有为主窗口中的控件分配正确的委托 - 我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T04:28:04.630

你能发布一些代码吗？

使用委托时，请确保您指定一个类实现所需的协议。

`@interface MyClass : NSObject <SomeProtocol>`

还要确保您正在创建一个属性来存储委托。

`@property (strong, nonatomic) id<SomeProtocol> delegate;`

回复这个：

> 请注意，虽然 NSControl 定义了委托方法，但它本身并没有委托。任何使用这些方法的子类都必须有一个委托以及获取和设置它的方法。此外，一个正式的委托协议 NSControlTextEditingDelegate Protocol 还定义了控制委托使用的委托方法。...
> 
> 其中包括：controlTextDidBeginEditing:、controlTextDidChange: 和 controlTextDidEndEditing:

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T14:55:32.807

哦，哇 - 在为我的问题添加更多细节时，我想我找到了答案。无需从文本字段委托拖动到文件所有者，只需拖动到代表 App Delegate 的蓝色立方体！

# php - 如何将 AJAX 提交添加到 PHP 验证并返回消息？

> ID：14763299
> 
> 赞同：0
> 
> 时间：2013-02-07T23:45:45.367
> 
> 标签：php, javascript, jquery, ajax, validation

我一直在努力验证表单并让 JS 和 PHP 验证正常工作，但我仍然很难添加 ajax（带或不带 JQUERY）以提交到 php 文件并返回成功消息。

我的带有 CSS 和 JS 验证的表单：

```
<html>
<head>
<style type="text/css">
#nameerror {
color:red;
}
#emailerror{
color:red;
}
</style>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
<script type="text/javascript">

function Validate()  {

var email = document.forms['form']['email'].value;
var atpos = email.indexOf('@');
var dotpos = email.lastIndexOf('.');
var name = document.forms['form']['name'].value;

if (name == null || name == ""){
document.getElementById('nameerror').innerHTML="Please enter your name";
return false;
} else if (atpos < 1 || dotpos < atpos+2 || dotpos+2 >= email.length) {

document.getElementById('emailerror').innerHTML="Please enter a valid email";
return false;
} else {

}   
}

</script>

</head>
<body>
<div>Sign Up</div>
    <form name="form" action="form_validation.php" id="form" onsubmit="return Validate();" method = 'post'> 
<label>Name:</label><br/>
<input id='name' type="text" name='name' /><br/>
<span id="nameerror"></span><br/>
<label>Email:</label><br/>
<input type='text' name='email' id = 'email'/> <br/>
<span id= "emailerror"></span><br/>
<label>Comments:</label><br/>
<textarea name='comments' id ='comments'></textarea><br/>
<span id="comerror"></span>
<input type="submit" name="submit" value="Submit"/>  
<span id="success" style="display:none">Your message has been sent successfully.</span>

</form>  
</body>
</html> 
```

这是 form_validation.php：

```
<?php

if(isset($_POST['submit'])){
if($_POST['name']){
    $name = $_POST['name'];
}
if(!preg_match('/^[a-zA-Z\s]+$/', $name)){
    echo "Name can only contain letters.";
    return false;
} else {
        echo "Name accepted";
}   

if($_POST['email']){
    $email = $_POST['email'];
}
$pattern = '/^[_a-z0-9-]+(\.[_a-z0-9-]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,3})$/';
if(!preg_match($pattern, $email)){
    echo "Please enter a valid email address.";
    return false;
} else {
    echo "Email Valid";
}
if($_POST['comments']){
    $comments = $_POST['comments'];     
}
if (strlen($comments) > 100){
    echo "please enter less than 100 characters.";
    return false;
} 
}

?> 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T23:53:58.437

```
$('form').on('submit',function() {

$.ajax({
       url: 'form_validation.php',
       data: $(this).serialize(),
       type: 'POST'
            }).done(function(data){

                  // you can append a success message to your document here

            });

                                  }); 
```

# clojure - 使用 var-quote 语法调用 Clojure 函数

> ID：14763301
> 
> 赞同：18
> 
> 时间：2013-02-07T23:45:51.897
> 
> 标签：clojure, eval, var

有时，在查看其他人的 Clojure 代码时，我会看到一个通过定义的函数`defn`，然后使用 var-quote 语法调用，例如：

```
user> (defn a [] 1)
#'user/a
user> (a)   ; This is how you normally call a function
1
user> (#'a) ; This uses the var-quote syntax and produces the same result
1 
```

对于我的生活，我无法弄清楚这两种调用函数的方式之间的区别。[我在评估](http://clojure.org/evaluation)文档中找不到任何内容来说明当呼叫的操作员是 var 时会发生什么，这可能表明为什么首选第二种形式。`binding`他们似乎都对分配和语法引用做出了相同的反应。

那么，有人可以提供一个代码示例来说明两者之间的区别`(a)`吗`(#'a)`？

**编辑：**我知道 var-quote 可用于获取被`let`词法绑定遮蔽的 var，但在我正在查看的代码中似乎并非如此。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-08T00:25:05.057

`(#'a)`总是指*var* `a`，而`(a)`可以被本地绑定遮蔽：

```
user> (defn a [] 1)
#'user/a
user> (let [a (fn [] "booh")] [(a) (#'a)])
["booh" 1] 
```

但是 var-quote / function call 的大多数实际用途并不是直接调用 var-quote 表达式，而是缓存它的值，以便高阶构造在传入时引用 var a 的当前值而不是它的值：

```
(defn a [] 1)
(defn my-call [f] (fn [] (+ 1 (f))))
(def one (my-call a))
(def two (my-call #'a))
(defn a [] 2)

user> (one)
2
user> (two)
3 
```

这对于交互式开发非常有用，在这种开发中，您正在更改一些包装在其他包中的一堆其他功能中的功能。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-08T10:50:17.153

第二种形式允许您规避 clojure 设置的隐私限制。

因此，例如，如果您开发了一个带有私有函数的库，但想从单独的命名空间测试它们，则不能直接引用它们。但是您可以使用 var quote 语法来获取它们。这对此非常有用。

隐私是 clojure 本质上是一种自动文档形式，与您在 Java 中看到的隐私相反。你可以绕过它。

```
user> (defn- a [] 1)
#'user/a
user> (ns user2)
nil
user2> (user/a)
CompilerException java.lang.IllegalStateException: var: #'user/a is not public,    compiling:(NO_SOURCE_PATH:1) 
user2> (#'user/a)
1
user2> 
```

# google-provisioning-api - 组 Provisioning-api 只读的正确范围是什么？

> ID：14763306
> 
> 赞同：0
> 
> 时间：2013-02-07T23:46:11.107
> 
> 标签：google-provisioning-api

我在尝试以只读模式使用配置 api 组范围时遇到了问题。

我已在具有以下范围的谷歌应用程序域中授权我的服务帐户

```
https://apps-apis.google.com/a/feeds/group/#readonly 
```

根据[本文档](https://developers.google.com/google-apps/marketplace/manifest#supported_scopes)，这是正确的范围。

请求具有以下任一范围的身份验证令牌：

```
`https://apps-apis.google.com/a/feeds/group/#readonly`, or `https://apps-apis.google.com/a/feeds/group/` 
```

导致`invalid_scope`错误。

如果我们查看[https://developers.google.com/google-apps/provisioning/auth](https://developers.google.com/google-apps/provisioning/auth)上的实际配置文档，则范围列为`https://apps-apis.google.com/a/feeds/groups/`.

在 google 应用程序管理面板中使用此范围 ( `https://apps-apis.google.com/a/feeds/groups/#readonly`) 的只读版本会导致以下错误：

*   为 请求身份验证令牌`https://apps-apis.google.com/a/feeds/groups/#readonly`会引发`invalid_scope`错误。
*   请求 auth 令牌`https://apps-apis.google.com/a/feeds/groups/`，引发`access_denied`. 我相信这是预期的行为，因为我们没有授权范围的读/写版本。

我们尝试了所有不同的范围组合，但都没有运气。一切按预期工作的唯一方法是，如果我们都授权并请求具有`https://apps-apis.google.com/a/feeds/groups/`范围的访问令牌。在我们的用例中，我们不能允许此 API 的读/写权限。

文档中不一致的其他示例：

*   英文版 ( [http://support.google.com/a/bin/answer.py?hl=en&answer=162105](http://support.google.com/a/bin/answer.py?hl=en&answer=162105) ) 将范围列为`https://apps-apis.google.com/a/feeds/group/#readonly`
*   西班牙语版本 ( [http://support.google.com/a/bin/answer.py?hl=es&answer=162105](http://support.google.com/a/bin/answer.py?hl=es&answer=162105) ) 将范围列为`https://apps-apis.google.com/a/feeds/groups/#readonly`

组配置 api 的官方支持的只读范围是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T00:06:37.360

只读范围仅适用于 Marketplace 应用程序和 2-legged OAuth。

您可以创建一个仅具有读取权限的委派管理员，而不是创建、更新或删除组的权限。然后使用读/写范围。范围不会阻止写入操作，但用户委派的权限会。

# python - python twisted中动态广播配置更改

> ID：14763307
> 
> 赞同：1
> 
> 时间：2013-02-07T23:46:16.710
> 
> 标签：python, configuration, singleton, twisted

我即将重构一个建立在twisted 之上的python 项目的代码。到目前为止，我一直在使用一个简单的`settings.py`模块来存储常量和字典，例如：

```
#settings.py
MY_CONSTANT='whatever'
A_SLIGHTLY_COMPLEX_CONF= {'param_a':'a', 'param_b':b} 
```

大量的模块导入`settings.py`来完成他们的工作。

我要重构项目的原因是因为我需要动态更改/添加配置参数。我即将采取的方法是将所有配置收集在一个单例中，并在需要时访问它的实例。

```
import settings.MyBloatedConfig

def first_insteresting_function():
    cfg = MyBloatedConfig.get_instance()
    a_much_needed_param = cfg["a_respectable_key"]
    #do stuff

#several thousands of functions later

def gazillionth_function_in_module():
    tired_cfg = MyBloatedConfig.get_instance()
    a_frustrated_value = cfg["another_respectable_key"]
    #do other stuff 
```

这种方法有效，但感觉不合时宜且臃肿。另一种方法是将`cfg`模块中的对象外部化，如下所示：

```
CONFIG=MyBloatedConfig.get_instance()

def a_suspiciously_slimmer_function():
    suspicious_value = CONFIG["a_shady_parameter_key"] 
```

`MyBloatedConfig`不幸的是，如果我要更改另一个模块中的实例条目，这将不起作用。由于我使用的是反应器模式，因此将人员存储在*本地线程*上以及使用队列是没有问题的。

为了完整起见，以下是我用来实现单例模式的实现

```
instances = {}
def singleton(cls):
    """ Use class as singleton. """
    global instances

    @wraps(cls)
    def get_instance(*args, **kwargs):
        if cls not in instances:
            instances[cls] = cls(*args, **kwargs)
        return instances[cls]
    return get_instance

@singleton
class MyBloatedConfig(dict):
    .... 
```

是否有其他更 Pythonic 的方式来广播不同模块的配置更改？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T01:35:43.757

大的、全局的（通常是单例的）配置对象是一种反模式。

无论您有`settings.py`、 风格的单例`MyBloatedConfig.get_instance()`，还是您在此处概述的任何其他方法，您基本上都在使用相同的反模式。确切的拼写无关紧要，这些都是让整个项目中的所有代码共享一个真正的全局（不同于 Python 模块级全局）的方法。

这是一种反模式，原因有很多：

*   它使您的代码难以进行单元测试。任何基于此全局更改其行为的代码都将需要某种黑客攻击 - 通常是猴子补丁 - 以便让您在不同配置下对它的行为进行单元测试。将此与编写为接受参数（如函数参数）并根据传递给它的值更改其行为的代码进行比较。
*   它使您的代码的可重用性降低。由于配置是全局的，如果您想在两种不同的配置下使用依赖于该配置对象的任何代码，您将不得不跳过障碍。你的单例只能代表一种配置。因此，您必须来回交换全局状态才能获得所需的不同行为。
*   它使您的代码更难理解。如果您查看一段使用全局配置的代码，并且想知道它是如何工作的，那么您将不得不查看配置。但是，比这更糟糕的是，如果您想更改配置，则必须查看整个代码库以查找可能会影响的任何代码。这会导致配置随着时间的推移而增长，因为您向其中添加新项目并且很少删除或修改旧项目，因为害怕破坏某些东西（或没有时间正确追踪旧项目的所有用户）。

上述问题应该向您暗示解决方案是什么。如果你有一个函数需要知道某个常量的值，让它接受那个值作为参数。如果您有一个需要大量值的函数，则创建一个可以将这些值包装在一个方便的容器中的类，并将该类的一个实例传递给该函数。

这个解决方案经常困扰人们的部分是他们不想花时间输入所有这些参数传递的部分。之前你的函数可能需要一个或两个（甚至零个）参数，而现在你将拥有可能需要三个或四个参数的函数。而且，如果您正在转换以 `settings.py`.

我不会质疑这是一个潜在的问题，但应该主要将其视为现有代码的结构和组织的问题。最终得到很长签名的函数*依赖于之前的所有数据*. 你只是掩盖了这个事实。与大多数对您隐藏程序方面的编程模式一样，这是一件坏事。一旦你明确地传递了所有这些值，你就会看到你的抽象需要在哪里工作。也许这 10 个参数函数做得太多了，作为三个不同的函数会更好。或者您可能会注意到这些参数中有一半实际上是相关的，并且始终作为容器对象的一部分属于一起。也许您甚至可以将与这些参数的操作相关的一些逻辑放到该容器对象上。

# css - 有没有办法让这个 CSS 更简洁？

> ID：14763311
> 
> 赞同：1
> 
> 时间：2013-02-07T23:46:20.713
> 
> 标签：css

下面的 CSS 似乎正在做我想要的。只是想知道它是否可以修剪并仍然做同样的事情。

```
.qr-setup {
  text-align: center  ;
  margin-left: auto  ;
  margin-right: auto  ; 
  width:40%  ;}

.qr-setup table {
  text-align: center  ;
  margin-left: auto  ;
  margin-right: auto  ; 
  width:80%  ;
}

.qr-setup table tr td {
  border: none;
  text-align: center  ;
  margin-left: auto  ;
  margin-right: auto  ; 
  width:80%  ;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T23:47:43.103

你只需要这个：

```
.qr-setup {
    width:40%;
}

.qr-setup table, .qr-setup table tr td {
    width:80%;
}

.qr-setup table tr td {
    border: none;
}

.qr-setup, .qr-setup table, .qr-setup table tr td {
    text-align: center;
    margin-left: auto;
    margin-right: auto; 
} 
```

您可以使用逗号重复列出所有内容的 css。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T23:48:34.713

```
.qr-setup, .qr-setup table, .qr-setup tr td {
  text-align: center  ;
  margin-left: auto  ;
  margin-right: auto  ; 
  width: 80%;}

.qr-setup {
  width:40%  ;
}

.qr-setup table tr td {
 border: none; 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-09T15:50:06.360

甚至还有一个简写形式

```
margin-left: auto;
margin-right: auto; 
```

即

```
margin:0 auto; 
```

此代码将 margin-top 和 margin-bottom 设置为 0，将 margin-left 和 margin-right 设置为 auto。

# css - 这两个 CSS 选择器有什么区别？

> ID：14763313
> 
> 赞同：1
> 
> 时间：2013-02-07T23:46:36.380
> 
> 标签：css

这两个选择器有什么区别，我以为它们会产生相同的效果，但事实并非如此？有人可以解释一下吗？

```
 #parent-div #child-div

    #parent-div#child-div 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-07T23:48:08.953

CSS 选择器中的（空格）是“后代选择器”。

1.  选择具有 ID 且`child-div`其祖先为`parent-div`
2.  选择一个 id 为`parent-div`and的元素`child-div`（这是不可能的）

*只是为了好玩*:`parent-div#child-div`是一个有效的 ID，但作为 CSS 语法的一部分，您必须`#`在规则集中转义：

[http://jsfiddle.net/ExplosionPIlls/xdWNV/1/](http://jsfiddle.net/ExplosionPIlls/xdWNV/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T23:48:30.500

我相信第二个是错误的，因为这意味着您的元素有 2 个 id，称为 (1) parent-div 和 (2) child-div

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T23:48:58.070

第一个选择 id 为 child-div 的项目，它是 id 为 parent-div 的项目的后代，第二个将不起作用，因为它选择了 ID 为 parent-div 和 child-div 的项目

# javascript - 在 ember 应用程序中设置焦点

> ID：14763318
> 
> 赞同：2
> 
> 时间：2013-02-07T23:47:05.730
> 
> 标签：javascript, focus, ember.js, handlebars.js

由于鼠标单击不在该任务区域中，我希望能够将焦点设置到文本区域。

作为一个最小的例子，假设我从一个文本开始，如果你点击它，它会被一个文本字段替换。我可以通过把手脚本来实现这一点：

```
<script type="text/x-handlebars">
  {{#if isActive}}
  {{view Ember.TextField}}
  {{else}}
  <p {{action foo}}> Click Here to Enter text  </p>
  {{/if}}
</script> 
```

与控制器

```
App.ApplicationController = Ember.Controller.extend({
    isActive: false,
    foo: function(){
       this.set("isActive", true);
    }
}); 
```

这可以在单击时创建文本字段，但不会将焦点放在该文本区域（需要第二次单击才能实际输入文本）。

有没有达到这个目的的好方法？我可以通过在模板中设置一个 ID 并使用 jquery 选择它来做一些 hacky，但这似乎不优雅。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-08T01:07:08.767

此外，为了减少看起来好像您正在将 jQuery 混合到您的 Ember 模块中的`didInsertElement`和`this.$().focus();`—— 这是我讨厌做的事情，您可以使用 Ember.JS 的方式为`Ember.TextField`.

我们可以指定我们对 HTML5`autofocus`属性感兴趣：

```
Ember.TextSupport.reopen({
  attributeBindings: ["autofocus"]
}); 
```

然后我们可以将标准放置`Ember.TextField`到我们的页面上，而无需创建另一个视图来扩展`Ember.TextField`：

```
{{view Ember.TextField autofocus="autofocus"}} 
```

见 JSFiddle：http: [//jsfiddle.net/MdzhN/](http://jsfiddle.net/MdzhN/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-08T00:19:31.657

考虑扩展 Ember.TextField 如下：

```
App.FocusedTextField = Em.TextField.extend({
  didInsertElement: function() {
    this.$().focus();
  }
}); 
```

然后更改您的车把模板以使用它：

```
<script type="text/x-handlebars">
  {{#if isActive}}
    {{view App.FocusedTextField}}
  {{else}}
    <p {{action foo}}> Click Here to Enter text  </p>
  {{/if}}
</script> 
```

# ios - 具有两个一对多关系的 CoreData NSPredicate

> ID：14763320
> 
> 赞同：0
> 
> 时间：2013-02-07T23:47:10.677
> 
> 标签：ios, core-data, many-to-many, nspredicate, any

我有一个这样的 CoreData 模型数据结构，用于根据用户所属的组来限制信息：

类别 <->> 信息 <->> 组。

我有一个用户组对象的 NSSet。我希望能够根据 Group 对象的 NSSet 过滤类别，这样如果一个类别不包含任何在我的 NSSet 中有任何组的信息，它们将不会被我的谓词返回。

有关我可以做的信息

```
[NSPredicate predicateWithFormat:@"ANY groups in (%@)",groups]; 
```

对于类别，我尝试了以下操作，但只有一次崩溃：

```
[NSPredicate predicateWithFormat:@"ANY information.groups in (%@)",groups]; 
```

但我需要在类别级别编写一个谓词。我在假设我的数据集中的信息足够大以至于我无法将它们全部提取并处理它们以找到我的类别的假设下进行编程。我想创建一个谓词，它只根据用户的组获取与用户相关的类别。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T06:14:51.110

以下关于*Category*的谓词应该起作用（假设这是从*Category*到*Information*`information`的一对多关系）：

 **```
[NSPredicate predicateWithFormat:@"SUBQUERY(information, $i, ANY $i.groups in %@).@count > 0",groups]; 
```

或者，您可以使用反向关系：

```
 // your set of Group objects:
 NSSet *groups = ...;
 // all Information objects that are related to any group object:
 NSSet *information = [groups valueForKey:@"information"] ;
 // all Category objects that are related to any information object:
 NSSet *categories = [information valueForKey:@"category"]; 
```

可以结合到

```
 NSSet *categories = [groups valueForKeyPath:@"information.category"]; 
```

这种替代解决方案的缺点可能是它还在内存中创建了中间组集。**

# java - 简化的 Java 库？

> ID：14763322
> 
> 赞同：-6
> 
> 时间：2013-02-07T23:47:20.587
> 
> 标签：java

我的大部分问题是我不知道我要完成的工作的确切工作。

我和我的朋友正在尝试编写 Java 游戏；我熟悉 Java/Python/C++，他只使用过 Python（所以没有使用类和点运算符的经验）。

我想做的是编写一些“可导入库”（？）来帮助他。一个非常非常简单的例子是，如果他可以输入：

`print(String);`

在图书馆里有一些定义`print(String)`=`System.out.println(String)`

当然，它实际上更像是`createGrass(coord_x, coord_y);`，然后 createGrass 实际上将引用具有所有适当的 get/set 方法的构造函数。

我意识到我可以制作一个 Landscape 类，然后他可以使用`Landscape.createGrass(...);`，但我希望有一些不会弄乱工作空间的东西，也希望我可以导入到任何需要类似工作的项目中。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T23:52:10.793

[静态导入](http://docs.oracle.com/javase/1.5.0/docs/guide/language/static-import.html)怎么样？

```
// No promises this is compilable Java 
import static Landscape.createGrass;

public class Wtv {
    public static void main(String[] argv) {
        int coord_x = 4;
        int coord_y = 7;
        createGrass(coord_x, coord_y);
    }
} 
```

# javascript - jQuery 自动完成“焦点”事件触发，但没有反向等效。我悬停离开，但变化仍然存在

> ID：14763327
> 
> 赞同：2
> 
> 时间：2013-02-07T23:47:44.357
> 
> 标签：javascript, jquery, jquery-ui, autocomplete

简而言之，jQuery-ui 自动完成有一个“焦点”事件（实际上是一个悬停事件），当用户将鼠标悬停在自动完成菜单选项上时会触发该事件。但是，如果用户在不进行选择的情况下继续键入，则无法消除效果。

这是一个[小提琴](http://jsfiddle.net/NeilMillikin/j98FG/2/)，如果有帮助的话。

* * *

问题已编辑以给出完整的解决方案的简短版本（以及下面的小提琴）

此解决方案在用户移出菜单（通过鼠标或键盘）时反转焦点功能，并且每当用户首先进行选择然后更改输入字段时反转焦点功能。

* * *

```
$( "#id-input" ).autocomplete({
.....
focus: function( event, ui ) {
    .... do foo ......
    $('li.special-class').one ("mouseleave", function() {
        .... undo foo .....
    });
},
select: function( event, ui ) {
    $('li.special-class').off("mouseleave");
    .... do foo ....
    $( "#id-input" ).one ("keypress", function (e) {
        if (e.keyCode !== 13) {
        // Keyboard select is ignored, otherwise messing with input undoes foo
            .... undo foo ....
        }
        else {
            $( "#id-input" ).one ("keypress", function (e) {
            // Re-establish key binding if original select was keyboard
                if (e.keyCode !== 13) {
                    .... undo foo ....
                }
            })

        }
    })
}
});
// override the built-in _renderItem to put a special class in all menu items
$( "#id_input" ).data("uiAutocomplete")._renderItem = function( ul, item ) {
return $( "<li class='special-class'></li>" )
.append( "<a>" + item.label + "</a>" )
.appendTo( ul );
};
// override the built-in _move function for keyboard up/down that leaves the menu
$( "#id_input" ).data( "uiAutocomplete" )._move = function( direction, event ) {
if ( !this.menu.element.is( ":visible" ) ) {
    this.search( null, event );
    return;
}
if ( this.menu.isFirstItem() && /^previous/.test( direction ) ||
        this.menu.isLastItem() && /^next/.test( direction ) ) {
    this._value( this.term );
    .... undo foo ....
    return;
}
this.menu[ direction ]( event );
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T21:06:30.080

这是[解决方案的小提琴](http://jsfiddle.net/R68jf/5/)。

代码在底部

[http://jsfiddle.net/R68jf/5/](http://jsfiddle.net/R68jf/5/)

感谢红色十月的 Marco Ramius 上尉让我意识到解决原始发布问题的方法。“仅 One Ping”.... 如下所述。

这个[http://jsfiddle.net/R68jf/5/](http://jsfiddle.net/R68jf/5/) fiddle 提供了一个可行的解决方案，并演示了一些有用的自定义 ui-autocomplete 小部件，这也可能有助于解决其他问题。具体来说，该解决方案满足以下要求：

1) 每当用户使用鼠标或键盘浏览自动完成菜单项时，都会触发“焦点”回调，在这种情况下会显示附加信息和链接图像。这是正常的自动完成行为，在 API 中公开并记录在案。

2) 每当用户导航离开或离开菜单时，'focus' 回调的效果应该是可逆的。这不是默认行为，目前没有提供“模糊”API 来消除“焦点”的副作用。因此，“僵尸”图像仍然存在，尽管菜单项不再是焦点。原始问题小提琴显示了这个默认值和相关的“僵尸”效果。要查看它，只需键入“垃圾邮件”，然后在菜单中上下滚动。滚动时，副作用会更新。现在将鼠标从菜单上移开......僵尸留下来！

3) 如果用户使用鼠标单击或返回键在焦点项目上进行选择，则与该项目的焦点相关联的副作用应该持续存在。这很容易，通过使用文档化 API 中公开的“选择”方法。

4) 如果在进行菜单选择后，用户返回搜索输入并更改搜索，则副作用应该是相反的。这在默认情况下不会发生，而是我们有僵尸！

为了达到这些要求，我最终采用了以下方法。对于我们当中更高级的人来说，这些可能看起来很初级，但对于我的薪酬级别的其他人来说，这可能是 ui-autocomplete 自定义的有用演示：

1) 重写自动完成的_renderItem 方法来自定义菜单展示。

2) 覆盖 _move 方法以更改使用键盘导航离开菜单时的行为。

3) 使用一些受“红色十月”启发的“仅 One Ping”回调，以反转焦点副作用，然后将系统返回到其原始就绪状态。这使用 jQuery .one() 方法。

这里的代码被大量注释，但有几点值得一提：

1) 一些事件，例如从菜单中选择一个项目，然后关闭菜单，将自动触发菜单上的模糊和鼠标移出事件，作为其自然行为的一部分。This can be a problem, because, in the current example, I wanted to have a 'blur' function to kill all the zombies, but when an item is selected, that same blur function would kill the legitimate data that I wanted to persist. GRRRRRR！！！

2）当您执行 $('#mySelector').autocomplete({blah:blah, blah:blah}) 时，会创建一个名为 'uiAutocomplete' 的 ui.autocompete() 类的对象和该对象存储为 $('#mySelector') 元素中的数据。因此，要从自动完成类访问数据、选项、方法等，您只需查看 $('#mySelector').data() 就可以了！

这非常漂亮，因为这意味着像 $('#mySelector').data('uiAutocomplete') 这样的东西会让你得到整个 enchilada，如果你想覆盖任何自动完成功能，你可以通过调用 $( '#mySelector').data('uiAutocomplete').myFavoriteFunction = function (){... 做一些漂亮的事情 ..}。

您无需担心原型、子类化或其他任何事情。玩这个的一个好方法是从 ui-autocomplete 源代码中复制确切的函数，然后将其粘贴到您的实例上，然后使用它。您不能破坏任何东西，因为您没有更改原始源（类）代码，您只是在更改实例的代码。好玩，嗯？

3）当你做 $('#mySelector').autocomplete({ foo: function (event, ui) {.. do stuff here..} 你几乎可以用这种方式发明任何你想要的函数，然后调用它这样做._trigger('foo', event)。

这意味着“关闭”、“打开”、“焦点”、“选择”等“官方”方法只是“提供建议”，如果需要，您可以编写自己的函数，而无需实现特殊魔法他们。您的特殊职能可以作为“一等公民”坐在官方职能旁边，没有人会知道其中的区别。唯一的区别是“内置”函数在源代码中被调用，您必须手动调用函数。您可以从代码中的任何位置调用它们，因为它们可以通过 $('#mySelector').data('uiAutocomplete').myFunctionName() 访问

4) 此外，像“ui-menu”和“uiAutocompetemenuItem”这样的对象作为数据存储在它们各自的对象中。通常情况下，这些对象在页面首次加载时不存在，但您可以使用 on() 将事件绑定到将来创建的对象。例如，这会将 mouseenter 事件绑定到所有未来创建的 'li.spam' 对象，并导致它们在鼠标悬停时变为红色，另外从对象的 .data() 字典中获取一个值并将其分配给 $('#mySelector '）。：

```
$('body').on( {
mouseenter: function() {
    $(this).children('a').css("color", "red");
    var currentItem = $(this).data('uiAutocompleteItem');
    $('#mySelector').value(currentItem.someValue);
}
}, "li.spam"); 
```

整个 enchilada 的代码（自包含，如果评论过多，请道歉）：

```
<!DOCTYPE html>
<head>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
<script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.10.0/jquery-ui.min.js"></script>
<link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1/themes/smoothness/jquery-ui.css" type="text/css" />
<title>fiddle</title>
<script>
(function ($) {

var quoteList = [
    { 'id': "1",
      'label': "We're here to preserve democracy.",
      'value': "We're here to preserve democracy, not practice it.",
      'description': "Capt. Ramsey to Lt. Commander Hunter",
      'title': "Gene Hackman as Capt. Ramsey, Denzel Washington as Lt. Cmdr. Hunter",
        'stub' : "Crimson Tide",
        'image': "http://2.bp.blogspot.com/_nY72TdvmuKk/S0aoHWh0LeI/AAAAAAAABjY/Yu4krTxxboM/s400/crimsontide.jpg"
    },
    {   'id': "2",
        'label': "Well, don't like [that cigar] too much.",
       'value': "Capt. Ramsey: How do you like that cigar? Hunter: It's good, sir. Capt. Ramsey: It's your first? Hunter: [coughing] Yeah. Capt. Ramsey: Well, don't like it too much. They're more expensive than drugs. ",
       'description': "Capt. Ramsey to Lt. Commander Hunter",
        'title': "Gene Hackman as Capt. Ramsey, Denzel Washington as Lt. Cmdr. Hunter",
        'stub' : "Crimson Tide",
        'image': "http://www.vimbly.com/blog/wp-content/uploads/2012/11/26-e1352860345409.jpg"
      },
    {   'id': "3",
        'label': "I expect and demand your very best.",
       'value': "I expect and demand your very best. Anything less, you should have joined the Air Force.",
       'description': "Ramsey to the crew of the Crimson Tide",
        'title': "Gene Hackman as Capt. Ramsey, Denzel Washington as Lt. Cmdr. Hunter",
        'stub' : "Crimson Tide",
        'image': "http://i2.cdnds.net/12/34/618x405/movies_tony_scott_films_8.jpg"
      },
     { 'id': "4",
        'label': "The Kirby Silver Surfer is the only true Silver Surfer.",
       'value': "Everybody knows that the Kirby Silver Surfer is the only true Silver Surfer.",
       'description': "Hunter to Petty Officer First Class Danny Rivetti (Danny Nucci)",
         'title': "Gene Hackman as Capt. Ramsey, Denzel Washington as Lt. Cmdr. Hunter",
         'stub' : "Crimson Tide",
         'image': "http://www.empireonline.com/images/features/a-z/quentin-tarantino/4.jpg"
      },
    {   'id': "5",
        'label': "I don't trust air I can't see.",
       'value': "I don't trust air I can't see.",
       'description': "Ramsey to Hunter",
        'title': "Gene Hackman as Capt. Ramsey, Denzel Washington as Lt. Cmdr. Hunter",
        'stub' : "Crimson Tide",
        'image': "http://images3.cinema.de/imedia/1853/2211853,JSg9qf_ICg9XI70_mnk+0YKnEwjDCNvEJ135zZiOOG51Em+3vDb9zfon3uv_jNxJfz3ogxTr3jHE26akqhRXcA==.jpg"
      },
    {   'id': "6",
        'label': "Mr Hunter. I've made a decision.",
       'value': "Mr Hunter. I've made a decision. I'm Captain of this boat. NOW SHUT THE FUCK UP!",
       'description': "Ramsey to Hunter",
        'title': "Gene Hackman as Capt. Ramsey, Denzel Washington as Lt. Cmdr. Hunter",
        'stub' : "Crimson Tide",
        'image': "http://images.static-bluray.com/reviews/271_1.jpg"
      },
    {   'id': "7",
        'label': "Mr. Vossler, this is Captain Kirk!",
       'value': "Mr. Vossler, this is Captain Kirk! I need warp speed on that communications unit!",
       'description': "Hunter to Petty Officer Third Class Russell Vossler (Lillo Brancato)",
        'title': "Gene Hackman as Capt. Ramsey, Denzel Washington as Lt. Cmdr. Hunter",
        'stub' : "Crimson Tide",
        'image': "http://www.livedash.com/thumb_v5/20091130/crimson%20tide-2009-11-30-0/2_crimson%20tide-2009-11-30-0.jpg"
      },
    {   'id': "8",
        'label': "I will marry a round American woman and raise rabbits.",
       'value': "I will live in Montana. And I will marry a round American woman and raise rabbits, and she will cook them for me. And I will have a pickup truck... maybe even a recreational vehicle. And drive from state to state. Do they let you do that? ",
       'description': "Capt. Vasili Borodin (Sam Neill) to Ramius",
        'title': "Sean Connery as Capt. Ramius, Alec Baldwin as Jack Ryan",
        'stub' : "Crimson Tide",
        'image': "http://1.bp.blogspot.com/-08wMMkx53XQ/TrNoK0ykLzI/AAAAAAAAkK0/p5Q_F6EOrvI/s360/Crimson-Tide.jpg"
      },
    {   'id': "9",
        'label': "We will lay off their largest city, and listen to their rock and roll!",
       'value': "We will pass through the American patrols, past their sonar nets, and lay off their largest city, and listen to their rock and roll... while we conduct missile drills.",
       'description': "Ramius to the crew of the The Hunt for Red October",
        'title': "Sean Connery as Capt. Ramius, Alec Baldwin as Jack Ryan",
        'stub' : "The Hunt for Red October",
        'image': "http://libcom.org/files/images/library/alec_baldwin1%5B1%5D.jpg"
      },
    {   'id': "10",
        'label': "You're afraid. Well, you should be. Personally, I'd give us one chance in three. More tea anyone?",
       'value': "You're afraid of our fleet. Well, you should be. Personally, I'd give us one chance in three. More tea anyone? ",
       'description': "Ramius to the officers of the The Hunt for Red October",
        'title': "Sean Connery as Capt. Ramius, Alec Baldwin as Jack Ryan",
        'stub' : "The Hunt for Red October",
        'image': "http://i77.photobucket.com/albums/j60/bluinkalchemist/hunt-for-red-october_480_poster.jpg"

      },
    {   'id': "11",
        'label': "Hey, Ryan, be careful what you shoot at. Most things in here don't react too well to bullets.",
       'value': "Hey, Ryan, be careful what you shoot at. Most things in here don't react too well to bullets.",
       'description': "Ramius to Ryan",
        'title': "Sean Connery as Capt. Ramius, Alec Baldwin as Jack Ryan",
        'stub' : "The Hunt for Red October",
        'image': "http://wodumedia.com/wp-content/uploads/2012/10/Sean-Connery-and-Alec-Baldwin-in-Paramounts-The-Hunt-For-Red-October-1990-0.jpg"

      },
    {   'id': "12",
        'label': "When he reached the New World, Cortez burned his ships. As a result his men were well motivated.",
       'value': "When he reached the New World, Cortez burned his ships. As a result his men were well motivated.",
       'description': "Remius to the officers of the The Hunt for Red October",
        'title': "Sean Connery as Capt. Ramius, Alec Baldwin as Jack Ryan",
        'stub' : "The Hunt for Red October",
        'image': "http://content.internetvideoarchive.com/content/photos/070/002974_25.jpg"

      },
    {   'id': "13",
        'label': "Russians don't take a dump, son, without a plan.",
       'value': "'The average Ruskie, son, don't take a dump without a plan.' Wait a minute. We don't have to figure out how to get the crew off the sub. He's already done that, he would have had to. All we gotta do is figure out what he's gonna do. So how's he gonna get the crew of the sub. ",
       'description': "Ryan reliving a comment by Admiral Josh Painter (Fred Thompson)",
        'title': "Sean Connery as Capt. Ramius, Alec Baldwin as Jack Ryan",
        'stub' : "The Hunt for Red October",
        'image': "http://toddmpost.files.wordpress.com/2010/12/admiralpainter.jpg?w=640"

      },
    {   'id': "14",
        'label': "At that speed, they could run right over my daughter's stereo and not hear it.",
       'value': "They're pinging away with their active sonar like they're looking for something, but nobody's listening... they're moving at almost forty knots. At that speed, they could run right over my daughter's stereo and not hear it.",
       'description': "Capt. Davenport (Daniel Davis) to Ryan",
        'title': "Sean Connery as Capt. Ramius, Alec Baldwin as Jack Ryan",
        'stub' : "The Hunt for Red October",
        'image': "http://libcom.org/files/images/library/alec_baldwin1%5B1%5D.jpg"

      },
    {   'id': "15",
        'label': "I would like to have seen Montana.",
       'value': "I would like to have seen Montana.",
       'description': "Capt. Vasili Borodin (Sam Neill) to Capt. Ramius",
        'title': "Sean Connery as Capt. Ramius, Alec Baldwin as Jack Ryan",
        'stub' : "The Hunt for Red October",
        'image': "http://img.geocaching.com/track/display/ad4047d5-a1f9-4a39-86c9-8a7a0873f1ef.jpg"

      },
    {   'id': "16",
        'label': "Next time, Jack, write a goddamn memo.",
       'value': "Next time, Jack, write a goddamn memo.",
       'description': "Ryan (talking to himself)",
        'title': "Sean Connery as Capt. Ramius, Alec Baldwin as Jack Ryan",
        'stub' : "The Hunt for Red October",
        'image': "http://www.wearysloth.com/Gallery/ActorsB/860-9042.gif"

      },
    {   'id': "17",
        'label': "Give me a ping, Vasili. One ping only, please.",
       'value': "Re-verify our range to target... one ping only. Give me a ping, Vasili. One ping only, please.",
       'description': "Ramius to Capt. Vasili Borodin (Sam Neill)",
        'title': "Sean Connery as Capt. Ramius, Alec Baldwin as Jack Ryan",
        'stub' : "The Hunt for Red October",
        'image': "http://25.media.tumblr.com/tumblr_ma1prrCDn81qkcj94o1_1280.jpg"

      },
    {   'id': "18",
        'label': "Come up right behind his propellor and he'll be deaf as a post!",
       'value': "Not if we stay in his baffles, Seaman Beaumont. Not if we stay in his baffles. Come up right behind his propellor and he'll be deaf as a post!",
       'description': "Seaman 'Jonesy' Jones (Courtney Vance) to Seaman Beaumont (Ned Vaughn)",
        'title': "Sean Connery as Capt. Ramius, Alec Baldwin as Jack Ryan",
        'stub' : "The Hunt for Red October",
        'image': "http://cdn3.hark.com/images/000/375/672/375672/original.jpg"

      },
    {   'id': "19",
        'label': "Andrei, you've lost another submarine?",
       'value': "One of our submarines, an Alfa, was last reported in the area of the Grand Banks. We have not heard from her for some time..... Andrei, you've lost another submarine?",
       'description': "Dr. Jeffrey Pelt (Richard Jordan) to Russian Ambassador Andrei Lysenko (Joss Ackland)",
        'title': "Sean Connery as Capt. Ramius, Alec Baldwin as Jack Ryan",
        'stub' : "The Hunt for Red October",
        'image': "http://www.wearysloth.com/Gallery/ActorsJ/8969-9042.gif"
      }
 ];

$(document).ready (function () {

    $( "#id_quote" ).autocomplete({
        minLength: 2,
        delay: 2,
        source: quoteList,
        open: function(event, ui) {
            // defines the character of the ui-menu
            $(".ui-autocomplete")
            .css("width", "300px")
            .css("max-height", "200px")
            .css("overflow-y", "scroll")
        },
        focus: function( event, ui ) {
            // This causes ancillary fields to populate whenever a menu choice is hovered
            // also works if menu choices are navigated with keyboard up and down arrows
            $( "#id_stub" ).val( ui.item.stub );
            $( "#id_title" ).val( ui.item.title );
            $( "#id_description" ).val( ui.item.description );
            $( "#id_dialog" ).val( ui.item.value );
            $( '#id_image').html("<img style='width:100%; height:100%;' src='" + ui.item.image + "' />");
                // Ensures that when mouse leaves the manu, that the ancillary fields are emptied
                // This is a 'one ping only' event, because 'mouseout' is triggered by the closing of the
                // menu when a true choice is made (either by mouse click or return key).
                // Making this 'one ping only' ensures that the ancillary fields don't empty
                // when the menu closes after a valid selection is made.
                // Of course, if there is a new focus, the 'one ping only' rule must be re-established,
                // so it is put here, in the focus callback:
            $('li.one-ping-only').one ("mouseleave", function() {
                $( "#id_stub" ).val("");
                $( "#id_title" ).val("");
                $( "#id_description" ).val("");
                $( "#id_dialog" ).val("");
                $( '#id_image').empty();
            });
        },
        select: function( event, ui ) {
            // Takes off the 'one ping only' mouse event binding,
            // otherwise it would cause the ancillary fields to empty
            // due to the 'mouseout' that happens automatically when
            // the menu closes.
            // In some cases, the mouseout binding has already been removed, but
            // in other cases not (by a true mouseout event).  This is a safe
            // way to make sure before a selection event fills the fields.
            $('li.one-ping-only').off("mouseleave");
            $( "#id_stub" ).val( ui.item.stub );
            $( "#id_title" ).val( ui.item.title );
            $( "#id_description" ).val( ui.item.description );
            $( "#id_dialog" ).val( ui.item.value );
            $( '#id_image').html("<img style='width:100%; height:100%;' src='" + ui.item.image + "' />");
            $( "#id_quote" ).val( ui.item.value )
                // In general, we want to make sure that if the user goes back and types
                // again or backspaces in the autocomplete input, AFTER making a selection, then the
                // ancillary fields will blank, to avoid zombie data persistence.
                // Unfortunately, making a selection with the return key (vs. a mouse click)
                // sends (or propagates?) a return key event to the original input field, AFTER the select
                // event has been called.  Thus, though a valid select event populates the fields (by the
                // actions immediately above), the ancillary data is them immediately erased
                // by this key event that arrives a split second later.
                // To counter this, we make an exception so that in the event that the first key event arriving
                // after a select event happens to be a return key, (the selection was made with the keyboard)
                // then that single key event is exempted from blanking the field.
            .one ("keypress", function (e) {
                if (e.keyCode !== 13) {
                    $( "#id_stub" ).val("");
                    $( "#id_title" ).val("");
                    $( "#id_description" ).val("");
                    $( "#id_dialog" ).val("");
                    $( '#id_image').empty();
                }
                else {
                    // The 'one ping only' event above is REMOVED if any key event takes place, even if it was
                    // as 'disqualified' return key event.   So,  even though nothing happened visibly,
                    // we need to re-establish our 'one ping only' protection from 'real editing' key event.
                    $( "#id_quote" ).one ("keypress", function (e) {
                        if (e.keyCode !== 13) {
                            $( "#id_stub" ).val("");
                            $( "#id_title" ).val("");
                            $( "#id_description" ).val("");
                            $( "#id_dialog" ).val("");
                            $( '#id_image').empty();
                        }
                    })
                }
            });
        }
    }).data("uiAutocomplete")._renderItem = function( ul, item ) {
        // The uiAutocomplete object is stored as part data in the input field it is attached to.
        // When we call .data("uiAutocomplete") here, it relates back to data attribute of the $( "#id_quote" ) that the
        // autocomplete widget function was attached to.  It's helpful to realize that the uiAutocomplete object is part of the
        // $( "#id_quote" ).data() and can be called at any time, not just here right after autocomplete is called.
        // This can be confusing, but just remember that once you do $( "#id_quote" ).autocomplete({blah blah}), then forever
        // .data() attribute of the $( "#id_quote" ) will contain a 'uiAutocomplete' object, the properties of which are the
        // properties defined in the jQuery-ui class autocomplete, as instantiated by you.
        // Anyway, we want to override one of the autocomplete methods, specifically the _renderItem method
        // that makes the items in the menu.
        // Here, we specify the nature of the presentation, giving it first the traditional label, and also another line
        // that in this case is item.description.
        // In addition, we perform a regular expression match on the label, and highlight the letters/words
        // that match the search term we have typed into our search input.
        var regxpmatch = new RegExp(this.term, "ig");
        // Note the 'g' in 'ig' means global to catch any place the letters match, otherwise the default is to match only the first
        // instance in any item.label.
        // Also note the 'i' in 'ig' makes the match case insensitive.
        var formatted_quote = item.label.replace(regxpmatch,"<span style='font-weight:bold;color: red;'>" + this.term + "</span>");
        return $( "<li class='one-ping-only'></li>" )
        // the 'one-ping-only' class is the hook for our callbacks that erase ancillary fields when a user edits the original
        // input after making a selection, and also is used for another callback that erases ancillary fields if the menu loses
        // focus by moving the mouse out of the menu, or alternatively using the up or down key on the keyboard to leave
        // the menu.
        .append( "<a><div class='subquote'>" + formatted_quote + "</div><div class='subtitle'>" + item.description + "</div></a><hr>" )
        // makes the menu item have two lines, and puts a horizontal line between each item pair.
        .appendTo( ul );
    };
    $( "#id_quote" ).data( "uiAutocomplete" )
    ._move = function( direction, event ) {
        // here we are using a similar logic to override the _move method, ensuring that if the user exits the menu
        // using the keyboard, the ancillary fields will clear, just as they do with the 'one ping only' mouseout function
        // described above.
        if ( !this.menu.element.is( ":visible" ) ) {
            this.search( null, event );
            return;
        }
        if ( this.menu.isFirstItem() && /^previous/.test( direction ) ||
                this.menu.isLastItem() && /^next/.test( direction ) ) {
            this._value( this.term );
            $( "#id_stub" ).val("");
            $( "#id_title" ).val("");
            $( "#id_description" ).val("");
            $( "#id_dialog" ).val("");
            return;
        }
        this.menu[ direction ]( event );
    };
});

})(jQuery);
</script>
<style type="text/css">
    div.subquote {font-size: 11px;}
    div.subtitle {font-size: 9px; color: blue;}
    #id_quote {width: 250px; height:100px;}
    #id_stub {width: 250px;}
#id_title, #id_description {width: 250px;}
#id_dialog {width: 250px; min-height: 100px;}
</style>
</head>
<body>
<form action="#" method='POST'>
<div style="float:left; width: 300px;">
    <h4>Search submarine movie quotes...</h4>
    <h4>...or simply write in your own!</h4>
    <div>
        <textarea name="quote"  type="text" id="id_quote" placeholder="Start typing here...." ></textarea>
    </div>

</div>
<div style="float:left; margin-left: 50px;">
    <div style="margin: 5px 0 5px 10px;">
        <input name="stub"  type="text" id="id_stub" />
    </div>
    <div style="margin: 5px 0 5px 10px;">
        <textarea name="title"  type="text" id="id_title" ></textarea>
    </div>
    <div style="margin: 5px 0 5px 10px;">
        <textarea name="description"  type="text" id="id_description"></textarea>
    </div>
    <div style="margin: 5px 0 5px 10px;">
        <textarea name="dialog"  type="text" id="id_dialog"></textarea>
    </div>
    <button type="submit" id="id_button">Submit your Favorite!</button>
    <div name="image" id="id_image" style="width: 250px; height:250px;">
    </div>
</div>
</form>
</body> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T00:30:29.503

在您的具体示例中，您可以只收听文本输入上的“keyup”事件。每次触发事件时，您都可以检查 .ui-autocomplete 元素并检查具有“ui-state-active”类的列表项。如果这是 0，那么您知道没有选择任何内容。

[http://jsfiddle.net/UVauY/3/](http://jsfiddle.net/UVauY/3/)

```
$("#id_main_course").on('keyup',function(){
     if($(".ui-autocomplete a.ui-state-active").length === 0){
         clearall();
     }
}); 
```

这适用于您所描述的内容，但存在一些问题。如果用户将鼠标悬停在列表中的某个项目上，然后将鼠标悬停在该项目之外，则不会清除输入。这会导致在大约 1 秒延迟后取消选择该项目。如果不是因为这个延迟，您可以在该项目上监听 mouseout 事件并使用上述相同的逻辑。但是，就像您说的那样，除了自己修改 jquery UI 源以添加该功能之外，没有一个很好的解决方案。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-08T01:04:01.170

你可以尝试覆盖 _renderItem 函数，一旦你建立了列表项，使用你的“unhover”函数为它添加一个适当的悬停事件。

可能工作...

[更多关于 renderItem](https://stackoverflow.com/search?q=jquery%20autocomplete%20renderItem)

# google-chrome-extension - getElementById 不适用于 Gmail 上的扩展程序

> ID：14763331
> 
> 赞同：0
> 
> 时间：2013-02-07T23:48:07.560
> 
> 标签：google-chrome-extension, gmail

我正在尝试为 Gmail 开发 Chrome 扩展，并尝试执行以下内容脚本：

`document.getElementById("gbqfq").value = "foobar";`

但它总是失败并显示以下错误消息：

`Uncaught TypeError: Cannot set property 'value' of null`

虽然，当我使用控制台并运行相同的代码时，它可以正常工作。

我已经`"all_frames": true, "run_at": "document_end"`在 manifest.json 文件中使用了参数。这里有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T23:52:19.533

不熟悉 Chrome 扩展可能与 iframe 的范围有关。如果您使用 JQuery，请尝试以下操作：

```
$('iframe').find("#YOUR-ID") 
```

# android - 如何知道哪些安卓设备支持视频播放？

> ID：14763335
> 
> 赞同：1
> 
> 时间：2013-02-07T23:48:16.430
> 
> 标签：android, android-emulator, video-streaming, android-videoview

我制作了一个应用程序来在 Android 设备上查看 vine 视频。这些基本上是将 .mp4 视频加载到 .mp4 文件中`VideoView`。从以下文档 ( [http://developer.android.com/guide/appendix/media-formats.html](http://developer.android.com/guide/appendix/media-formats.html) ) 来看，Android 版本 3+ 设备支持 mp4 视频播放。

我已经`android:minSdkVersion="11"`在清单文件中添加了一个从下载应用程序中过滤掉较旧的 Android 版本，但我仍然收到运行较新版本 Android（例如 4.1、4.2）的用户的反馈，他们抱怨“视频不能被播放”错误信息。

由于没有办法（我知道，如果我错了，请纠正我）使用模拟器测试视频播放，我真的不知道发生了什么。

有没有办法检查设备播放视频的能力，或者至少让模拟器播放视频，这样我才能正确解决这个问题？

PD。对于那些感兴趣的人，这是我在 Google Play 中的应用程序的链接。如您所见，我被负面评论压垮了：https: [//play.google.com/store/apps/details?id=com.thirtymatches.vineflow](https://play.google.com/store/apps/details?id=com.thirtymatches.vineflow)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T00:17:09.183

如果您仔细查看 Google 兼容性矩阵，您会发现对 MP4/H264*编码*的支持始于 Android 3.0 版本。 *回到 Android 1.0 的所有 Android 设备都支持 MP4/H.264 的播放*，因此您无需将可用性限制为更新的 Android 版本（除非您有其他 API 兼容性需求）。

通过 VideoView，所有这些设备上的视频播放都是使用手机芯片组提供的硬件解码器完成的。因此，为了保证兼容性，必须将视频编码为最低公分母。Google 在您链接的页面底部提供“视频编码建议”；[我还写了一个答案](https://stackoverflow.com/questions/6364190/what-h-264-format-loads-on-android-and-ios/6364801#6364801)，描述了我们如何转码为可在所有 Android 设备上播放的 MP4/H264 格式。

不知道 Vine 对他们的视频剪辑做了什么，可能是视频没有全部使用统一的编码器参数进行编码。他们可能会直接从手机上获取视频并在没有任何额外的服务器端处理的情况下进行流式传输，以确保广泛的兼容性；我不知道。如果是这种情况，您可能会发现开发一个可以显示内容的 Android 应用程序具有挑战性，而无需 a) 实现您自己的软件编解码器（如 RockPlayer、MX Player 或 VLC 等应用程序所做的那样）或 b) 在服务器上对视频进行转码（这可能会违反 Vine 的服务条款）。

# c - C 程序未从命令行读取 .dat 文件

> ID：14763340
> 
> 赞同：0
> 
> 时间：2013-02-07T23:48:45.717
> 
> 标签：c, command-line-arguments

我有以下程序称为`Scorecommandline`：

```
int main (int argc, char *argv[]) {
    if (argc!=15) {
        usage();
        exit(1);
    }

    int iArray[14];
    int i = 0;
    while(1){
        if(scanf("%d",&iArray[i]) != 1){
        break;
        }
        i++;
        if(i == 14) {
        i = 0;
        }
    }

    int age = atoi(iArray[1]);
    int b_AF = atoi(iArray[2]);
    int b_ra = atoi(iArray[3]);
    int b_renal = atoi(iArray[4]);
    int b_treatedhyp = atoi(iArray[5]);
    int b_type2 = atoi(iArray[6]);
    double bmi = atof(iArray[7]);
    int ethrisk = atoi(iArray[8]);
    int fh_cvd = atoi(iArray[9]);
    double rati = atof(iArray[10]);
    double sbp = atof(iArray[11]);
    int smoke_cat = atoi(iArray[12]);
    int surv = atoi(iArray[13]);
    double town = atof(iArray[14]);

    double score = cvd_femal(age,b_AF,b_ra,b_renal,b_treatedhyp,b_type2,bmi,ethrisk,fh_cvd,rati,sbp,smoke_cat,surv,town,&error,errorBuf,sizeof(errorBuf));
    if (error) {
        printf("%s", errorBuf);
        exit(1);
    }
    printf("%f\n", score);
} 
```

我在其中有一个 .dat 文件，打算用于该程序中的 args，但是如果我键入：

```
cat testscandata.dat | ./ScorecommandLine 
```

该程序不会将文件作为程序的参数读入。我该如何解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T23:53:38.793

您混淆了将输入传递到程序的两种不同方式。您可以通过`main`从命令行调用命令并列出参数来将参数传递给程序。例如：

```
./ScoreCommandLine 1 2 3 4 5 6 7 8 9 10 11 12 13 14 
```

这些参数将被传递到`main`through `argv`。

`stdin`您还可以通过使用管道和重定向将数据发送到程序中：

```
SomeCommand | ./ScoreCommandLine 
```

这将获取 的输出`SomeCommand`并将其`stdin`用作`ScoreCommandLine`. 您可以使用`scanf`等来阅读它。

在您的情况下，您应该重写程序，以便您不希望通过命令行传递所有参数，或者您应该使用该`xargs`实用程序转换`stdin`为命令行参数：

```
xargs ./ScoreCommandLine < testscandata.dat 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T23:51:35.020

这不会作为参数传递给程序，但会通过管道传递到`stdin`程序中`./ScorecommandLine`- 您将能够通过`scanf`类似的函数读取它，但不能作为命令行参数。

您需要创建将读取文件（或`stdin`）的新脚本，它将执行另一个程序，将其作为可执行参数传递。

检查您的程序后，我可以建议删除`if (argc!=15)`，因为您正在阅读`stdin`，`scanf`而不是在任何地方解析命令行参数。

# html - 围绕几个浮动 div 的 div 上的奇怪中心格式

> ID：14763345
> 
> 赞同：0
> 
> 时间：2013-02-07T23:49:08.053
> 
> 标签：html, css

我遇到了一个问题，我试图拥有一个由三个 div 组成的 div，其中有一个左浮动列、右浮动列和中间的主要内容。我已经尽我所能做到这一点，我想出了这个：

![一个错误！](../Images/6ac4f6f213a8e2f401d4ec5d3a53d251.png)

出于某种原因，中间 div 位于第一列的末尾和右列的末尾之间，而不是右侧的开头。

```
<div id="main">
            <div id="left">
                <img src="/pic1.jpg" alt="Example work" height="250px" width="250px" />
                <br />
                <img src="/pic2.jpg" alt="Example work" height="250px" width="250px" />
            </div>
            <div id="content">
                words
            </div>
            <div id="right">
                <img src="/pic3.jpg" alt="Example work" height="250px" width="250px" />
                <br />
                <img src="/pic4.jpg" alt="Example work" height="250px" width="250px" />
            </div>
</div> 
```

CSS：

```
#main {
        margin: 0 auto;
        width: 80%;
}

#left {
        float: left;
        padding: 5px;
        border: 2px ridge;
}

#right {
        float: right;
        padding: 5px;       
        border: 2px ridge;
}

#content {
        text-align: center;
} 
```

关于这里发生了什么的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T23:57:19.240

右浮动元素需要在标记中排在首位。

[http://jsfiddle.net/Vv4yA/](http://jsfiddle.net/Vv4yA/)

```
<div id="main">
    <div id="right">
        <img src="http://placehold.it/150x150" />
        <br />
        <img src="http://placehold.it/150x150" />
    </div>
    <div id="left">
        <img src="http://placehold.it/150x150" />
        <br />
        <img src="http://placehold.it/150x150" />
    </div>
    <div id="content">words words words words words words words words words words words words words words words words words words words words words words words words words words words words words words words words words words words words words words </div>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T23:53:25.247

您的内容被推向左元素，因为左元素是浮动的。你的右元素是向右浮动的，IE 对着父元素。它不与内容元素交互，它们本质上是重叠的。您真正想要的是向左浮动的三个元素，因此每个元素都从另一个停止的地方开始。

我会在左右元素上设置 10% 的宽度，这样它们加起来就是 100%，无论如何都要使用 box-sizing。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T23:56:30.737

使用脚手架加快开发速度。试试[Twitter 的 Bootstrap](http://twitter.github.com/bootstrap/customize.html)

如果您愿意，您可以仅使用脚手架对其进行自定义。

# java - 第一次使用 JBoss Netty

> ID：14763346
> 
> 赞同：0
> 
> 时间：2013-02-07T23:49:12.133
> 
> 标签：java, networking, jboss

对不起，如果我在浪费你们的时间，但这是我第一次使用 netty(jboss)，我不知道我在做什么。这是我的服务器，我想写一个双精度：

```
public final class UpdateServer extends SimpleChannelHandler {

private static ChannelGroup channels;

private static final int PORT = 55555;
private static final double VERSION = 1.66;

public static void main(String[] args) {
    init();
}

public static final void init() {
    new UpdateServer();
}

/*
 * throws exeption so if cant handle channel server closes
 */
private UpdateServer() {
    ChannelFactory factory = new NioServerSocketChannelFactory(Executors.newCachedThreadPool(), Executors.newCachedThreadPool());

    ServerBootstrap bootstrap = new ServerBootstrap(factory);

    ChannelPipeline pipeline = bootstrap.getPipeline();
    pipeline.addLast("handler", this);

    bootstrap.setOption("child.tcpNoDelay", true);
    bootstrap.setOption("child.keepAlive", true);

    bootstrap.bind(new InetSocketAddress(PORT));
    System.out.println("Listening for connections on port: "+PORT);
}

@Override
public void channelOpen(ChannelHandlerContext ctx, ChannelStateEvent e) {
    channels.add(e.getChannel());
}

@Override
public void channelClosed(ChannelHandlerContext ctx, ChannelStateEvent e) {
    channels.remove(e.getChannel());
}

@Override
public void channelConnected(ChannelHandlerContext ctx, ChannelStateEvent e) {
    System.out.println("Connected!");
    e.getChannel().write(VERSION);
    ctx.getChannel().write(VERSION);
}

@Override
public void channelDisconnected(ChannelHandlerContext ctx, ChannelStateEvent e) {

}

@Override
public void messageReceived(ChannelHandlerContext ctx, MessageEvent e) {
    System.out.println("Message Recieved");
}

@Override
public void exceptionCaught(ChannelHandlerContext ctx, ExceptionEvent ee) throws Exception {

}

} 
```

但是当我运行客户端时，我读取的双精度值为 0.0：

```
public class UpdateChecker {

public static void main(String[] args) throws Exception {
    SocketChannel socketChannel = SocketChannel.open(new InetSocketAddress(InetAddress.getByName("127.0.0.1"), 55555));
    socketChannel.configureBlocking(false);
    ByteBuffer buffer = ByteBuffer.allocateDirect(8);
    socketChannel.read(buffer); 
    double value = buffer.getDouble();
    System.out.println(value);
}

} 
```

我不确定为什么它以 0.0 打印，因为那不是我写的，我该如何解决这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T23:54:43.743

尝试将服务器套接字显式绑定到“127.0.0.1”

# r - 使用 MLE 确定每日计数数据的分布峰值

> ID：14763352
> 
> 赞同：1
> 
> 时间：2013-02-07T23:49:57.873
> 
> 标签：r, distribution, data-fitting

我试图从点数来估计一个迁移期的丰度峰值日期。之前的一项研究使用了以下方法：

> 将截断的正态分布拟合到每 5 天间隔的捕获密度。使用迭代算法来获得分布平均值的最大似然估计（对应于估计的峰值通道）及其标准误差。

我可以弄清楚如何做大部分事情，但我被困在也许是最简单的问题上。我的数据采用以下格式：日期列和该日期的计数列。

在其他程序中，我可以使用我的分布日期和计数作为分布的频率。这将使我能够将分布拟合到计数中。

但是，我无法弄清楚如何在 R 中执行此操作。fitdistr 或 dnorm 等函数只允许使用向量字符串。

是否有任何函数可以让我拥有一个频率向量和一个感兴趣变量的向量并使用它来拟合分布？

数据如下所示：

> 头（FR.Counts）
> 
> Day.of.Year 计数
> 
> ```
>  112     13780
> 
>      122     76727
> 
>      123     55458
> 
>      125     36746
> 
>      126     30079
> 
>      127     20715 
> ```

112-127 是一年中的一天，其余的是计数。

谢谢

# g++ - 与 glibcxx 和 glibc 的静态链接相关的错误

> ID：14763354
> 
> 赞同：0
> 
> 时间：2013-02-07T23:49:59.440
> 
> 标签：g++

我正在尝试使用 g++ 为 alpha 交叉编译 x86 程序。为此，在将目标文件与库链接以生成二进制文件时，我尝试了“-static-libgcc”和“--static”选项。交叉编译成功，但是当我在 alpha 机器上运行二进制文件时出现以下错误：

./word_count: /lib/libc.so.6.1:`GLIBC_2.4' not found (required by ./word_count) ./word_count: /usr/lib/libstdc++.so.6: version`未找到版本 GLIBCXX_3.4.10'（./word_ 需要

这些错误不应该发生，因为我使用的是静态链接！所以，我无法弄清楚为什么我会收到这些错误！任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T23:56:02.700

您需要链接标准 C 和 C++ 库。（[来源](http://www.trilithium.com/johan/2005/06/static-libstdc/)）

# python - Python 如果 valuea 相等并且 valueb 不相等

> ID：14763357
> 
> 赞同：-1
> 
> 时间：2013-02-07T23:50:46.967
> 
> 标签：python, xbmc

我制作了与 xbmc 一起使用的小脚本，但我无法让它工作。这里的代码：

```
import xbmcgui
import xbmc

while (not xbmc.abortRequested):

    win = (xbmcgui.getCurrentWindowId())
    menu = 0

    if win == 10000 and menu != 10000:
        print ("Home menu")
        menu = 10000 
```

我想要的是，当主菜单在那里时，写入日志（但只有​​一次）现在它总是在菜单上时写入日志

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T23:55:21.947

设置在循环`menu = 0` *之外；*`while`否则每次都将其重置为 0：

```
menu = 0

while (not xbmc.abortRequested):
    win = (xbmcgui.getCurrentWindowId())

    if win == 10000 and menu != 10000:
        print ("Home menu")
        menu = 10000 
```

# iphone - 当 AVAudioPlayer 循环回到开头时如何得到通知？

> ID：14763360
> 
> 赞同：2
> 
> 时间：2013-02-07T23:51:21.687
> 
> 标签：iphone, ios, avaudioplayer

我正在循环播放声音文件，每次循环从头开始时都需要用它重新启动动画。

我在文档中找不到它的委托方法。有没有办法在玩家循环到开头时得到通知？

我的方法是使用一个计时器，每隔几毫秒检查一次当前播放时间，但这听起来像是一个可怕的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-13T15:05:22.100

不，AFAIK 您的解决方案是唯一有效的解决方案。循环时不会调用 finishedPlaying 方法，因此对位置进行采样是唯一的技术。

我正在更新一些继承的代码以添加循环，并在 iOS8 下得出了这个结论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T00:03:42.990

您可以为 avaudioplayer 实例设置[委托](http://developer.apple.com/library/ios/#DOCUMENTATION/AVFoundation/Reference/AVAudioPlayerClassReference/Reference/Reference.html#//apple_ref/doc/uid/TP40008067-CH1-SW13)。然后，只要声音成功播放完毕，就会通知代理。然后您可能可以重新启动播放器以再次播放并重新启动动画。就在我的头上。[在这里](http://developer.apple.com/library/ios/#DOCUMENTATION/AVFoundation/Reference/AVAudioPlayerDelegateProtocolReference/Reference/Reference.html#//apple_ref/doc/uid/TP40008068-CH1-SW5)查看更多信息。

# ubuntu - 尝试托管服务器以进行外部访问 - Apache、VirtualBox 和端口转发

> ID：14763361
> 
> 赞同：2
> 
> 时间：2013-02-07T23:51:27.670
> 
> 标签：ubuntu, web-hosting, virtualhost, router, portforwarding

在这个阶段把我的头撞到墙上......试图用 VirtualBox 在 Ubuntu 12.10 上托管我的 Apache 站点。运行 Windows 8 主机。

我做过的事情：

*   确保 Apache 正在侦听端口 80、443 和 8080（为了彻底）

> ```
> tcp 0 0 0.0.0.0:443 0.0.0.0:* LISTEN 3355/httpd
> 
> tcp 0 0 0.0.0.0:8080 0.0.0.0:* LISTEN 3355/httpd
> 
> tcp 0 0 0.0.0.0:80 0.0.0.0:* LISTEN 3355/httpd
> 
> tcp 0 0 0.0.0.0:22 0.0.0.0:* LISTEN 681/sshd 
> ```

*   VM 正在使用桥接网络连接

*   为我的 Ubuntu VM 分配了一个静态 IP，可以从网络内正常访问。

*   在我的路由器上的 VM 的静态 IP 上转发 TCP 端口 80、8080、443

*   给我的虚拟机一个静态 NAT 地址
*   关闭 Ubuntu 防火墙和路由器防火墙
*   在论坛上阅读我的 ISP (Eircom) 允许使用端口 80

而且我仍然无法使用 WAN/外部 IP 访问我的站点（内部检查并使用[CanYouSeeMe.org](http://CanYouSeeMe.org)）。它说我提到的所有端口都已关闭。

我真的不知道接下来要尝试什么......我在这里错过了什么愚蠢的东西吗？

注意：我没有在路由器内分配静态 IP 地址，在 VM 内。并且启用了 DHCP 服务器。那不好吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T01:41:55.470

知道了！我在 Ubuntu (eth0) 中的连接没有使用正确的默认网关。它应该设置为您的路由器的 IP 地址。希望这可以节省其他人一天的头痛。

# css - 如何在纯 CSS 中创建等高列

> ID：14763363
> 
> 赞同：13
> 
> 时间：2013-02-07T23:51:43.677
> 
> 标签：css, css-float, html, multiple-columns

如何让你的 div 一直向下到达？如何填满父div的垂直空间？如何在不使用背景图像的情况下获得等长的列？

我花了几天时间在谷歌上搜索和剖析代码，以了解如何尽可能简单高效地完成等长列。这是我想出的答案，我想在一个小教程中与社区复制和粘贴样式分享这些知识。

对于那些认为这是重复的人来说，事实并非如此。我受到了几个网站的启发，其中包括[http://matthewjamestaylor.com/blog/equal-height-columns-cross-browser-css-no-hacks](http://matthewjamestaylor.com/blog/equal-height-columns-cross-browser-css-no-hacks)，但下面的代码是独一无二的。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-02-08T00:00:30.770

对于更简单的解决方案，您可以给 parent`display: table`及其 children `display: table-cell`，如下所示：

```
.parent {
  display: table;
}
.child {
  display: table-cell;
} 
```

见[演示](http://jsfiddle.net/vtajZ/186/)。

请注意，这在 IE7 中不起作用，因此如果需要 IE7 支持，则需要更详细的解决方案。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-07T23:51:43.677

现代网页设计中的一件棘手的事情是创建一个两列（或更多）列的布局，其中所有列的高度相同。我开始寻求在纯 CSS 中找到一种方法来做到这一点。

您可以通过在包含两个列（或页面背景）的 wrap-div 中使用背景图像来最简单地完成此操作。

您也可以使用 CSS 表格单元格来做到这一点，但不幸的是，浏览器对此的支持仍然很糟糕，因此它不是首选解决方案。继续阅读，有更好的方法。

我从网上的两个页面中找到了灵感，虽然我更喜欢我的解决方案，因为它让我可以更自由地使用圆角和精确的宽度或百分比布局，并且更容易编辑，你的最终布局持有 div 不会强迫你做负数运算。

**==诀窍：==**

首先创建背景设计列，然后放置一个可以容纳常规内容的全宽 div。诀窍在于列中的浮动列，当内容长度延长时，对所有父列产生推动效果，无论哪一列最长。

在这个例子中，我将在一个带圆角的居中 wrap-div 中使用一个 2 列网格。我试图保持绒毛，以便于复制粘贴。

**== 第 1 步 ==**

创建您的基本网页。

```
<!DOCTYPE HTML>
<html>
<head>
</head>
<body>
</body>
</html> 
```

**== 第 2 步 ==**

在另一个浮动 div 中创建一个浮动 div。然后在内部 div 上应用负边距，以直观地将其弹出框架。为了说明目的，我添加了虚线边框。要知道，如果您将外部 div 向左浮动并给内部 div 向左负边距，则内部 div 将位于页面边缘下方，而不会给您滚动条。

```
<!DOCTYPE HTML>
<html>
<head>
<style>
#rightsideBG{
    float:right;
    background:silver;
    width:300px;
    border: 3px dotted silver; /*temporary css*/
}
#leftsideBG{
    float:left;
    background:gold;
    width:100px;
    margin-left:-100px;
    border: 3px dotted gold; /*temporary css*/
}
</style>
</head>
<body>
<div id="rightsideBG">
    <div id="leftsideBG">
        this content obviously only fits the left column for now.
    </div>
</div>
</body>
</html> 
```

**== 第 3 步 ==**

在内部 div 中：创建一个没有背景的 div，其中包含所有列的组合。它将推过内部 div 的边缘。我添加了一个虚线边框用于说明目的。这将是您内容的画布。

```
<!DOCTYPE HTML>
<html>
<head>
<style>
#rightsideBG{
    float:right;
    background:silver;
    width:300px;
    border: 3px dotted silver; /*temporary css*/
}
#leftsideBG{
    float:left;
    background:gold;
    width:100px;
    margin-left:-100px;
    border: 3px dotted gold; /*temporary css*/
}
#overbothsides{
    float:left;
    width:400px;
    border: 3px dotted black; /*temporary css*/
}
</style>
</head>
<body>
<div id="rightsideBG">
    <div id="leftsideBG">
        <div id="overbothsides">
            this content spans over both columns now.
        </div>
    </div>
</div>
</body>
</html> 
```

**== 第 4 步 ==**

添加您的内容。在此示例中，我放置了两个位于布局上方的 div。我还去掉了虚线边框。普雷斯托，就是这样。如果您愿意，可以使用此代码。

```
<!DOCTYPE HTML>
<html>
<head>
<style>
#rightsideBG{
    float:right;
    background:silver;
    width:300px;
}
#leftsideBG{
    float:left;
    background:gold;
    width:100px;
    margin-left:-100px;
}
#overbothsides{
    float:left;
    width:400px;
}
#leftcol{
    float:left;
    width:80px;
    padding: 10px;
}
#rightcol{
    float:left;
    width:280px;
    padding: 10px;
}
</style>
</head>
<body>
<div id="rightsideBG">
    <div id="leftsideBG">
        <div id="overbothsides">
            <div id="leftcol">left column content</div>
            <div id="rightcol">right column content</div>
        </div>
    </div>
</div>
</body>
</html> 
```

**== 第 5 步 ==**

为了使它更好，你可以将整个设计集中在一个 wrap div 中，并给它圆角。除非您为此使用特殊修复，否则圆角不会在旧 IE 中显示。

```
<!DOCTYPE HTML>
<html>
<head>
<style>
#wrap{
    position:relative;
    width:500px;
    margin:20px auto;    
    -webkit-border-bottom-right-radius: 20px;
    -moz-border-radius-bottomright: 20px;
    border-bottom-right-radius: 20px;
}
#rightsideBG{
    float:right;
    background:silver;
    width:300px;
}
#leftsideBG{
    float:left;
    background:gold;
    width:100px;
    margin-left:-100px;
}
#overbothsides{
    float:left;
    width:400px;
}
#leftcol{
    float:left;
    width:80px;
    padding: 10px;
}
#rightcol{
    float:left;
    width:280px;
    padding: 10px;
}
</style>
</head>
<body>
<div id="wrap">
    <div id="rightsideBG">
        <div id="leftsideBG">
            <div id="overbothsides">
                <div id="leftcol">left column content</div>
                <div id="rightcol">right column content</div>
            </div>
        </div>
    </div>
</div>
</body>
</html> 
```

**== 灵感来源 ==**

*   [http://www.pmob.co.uk/pob/equal-columns.htm](http://www.pmob.co.uk/pob/equal-columns.htm)
*   [http://matthewjamestaylor.com/blog/equal-height-columns-2-column.htm](http://matthewjamestaylor.com/blog/equal-height-columns-2-column.htm)

# macos - 直接从网站安装 Mac Dashboard Widget

> ID：14763372
> 
> 赞同：1
> 
> 时间：2013-02-07T23:52:35.223
> 
> 标签：macos, mac-dashboard-widget

我们有一个用于 Mac 的仪表板小部件，我们想提供给我们的客户。似乎典型的交付方法是让用户将小部件下载为 zip 文件，然后双击 zip 内的小部件。有没有办法直接下载小部件而无需采取 zip 步骤？换句话说，是否有可能让他们单击一个按钮，该按钮会导致弹出如下内容：“您要安装此仪表板小部件吗？”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T16:43:02.613

不，这是不可能的。小部件由多个文件组成，因此必须将它们作为某种存档（无论是 a`.zip`还是其他）下载并由用户提取。

# java - EJB3 客户端回调？

> ID：14763374
> 
> 赞同：2
> 
> 时间：2013-02-07T23:52:41.543
> 
> 标签：java, callback, ejb, ejb-3.0

由于我是 EJB3 新手，因此出于学习目的，我将棋盘游戏 Risk 实现为一个客户端-服务器应用程序，在服务器端使用 EJB3。目的是让多个用户登录并一起玩游戏。目前，我正在考虑将 JSF 用于前端。

在多个实例中，某个客户端“A”的操作需要导致某个其他客户端“B”被通知。例如，如果 A 攻击 B 拥有的国家，B 需要知道这件事，例如考虑要掷多少个骰子以及他们是否想打牌。

我有一个`@Stateless`会话 bean ，它使用名为and`PlayBean`的方法调用，由 a或接口公开。如果被玩家 A 调用，我需要通知被攻击的玩家 B，以便 B 可以决定调用什么参数。具体来说，这相当于 A 调用 PlayBean 的托管 bean，然后 PlayBean 调用 B 的托管 bean。如何执行此会话 bean 到托管 bean 回调？（一旦我可以“访问”托管 bean，我就可以从那里查看 JSF 的服务器推送功能以直接发送给用户）`attack()``defend()``@WebService``@Remote``attack()``defend()`

我的直觉是让页面 bean 提供一个回调对象作为会话 bean 的参数......但这是否适用于 EJB3？

```
@Stateless
public class PlayBean implements Play {
    @Override
    public void attack(OccupiedTerritory from, OccupiedTerritory to, int battalions, Set<Leader> leader) {
    int attackDice = battalions;
    Die die = new Die(6); // TODO read number of sides from cfg
    Iterator<Leader> leaderIt = leader.iterator();
    int[] roll = new int[attackDice];
    for (int i = 0; i < attackDice; i++) {
        int bonus = leaderIt.hasNext() ? leaderIt.next().getAttackBonus() : 0;
        roll[i] = die.roll(bonus);
    }
    Arrays.sort(roll);
    Player victim = to.getOccupier(); // ...but how do I nudge this player (NOT the player that invoked this method) to act, i.e. to choose how many defence dice to use? I need to get a reference to "victim"'s JSF managed bean.
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T10:12:28.980

也许您应该重新考虑您对成熟 EAR 的看法以及不同组件的角色。如果您正在使用 EJB，您应该将应用程序视为一个事务系统。如果你愿意的话，很多问题都可以转化为交易问题。

在您的情况下，您应该将 JSF 托管 bean 视为控制器扩展或页面的支持 bean。除了向 EJB 显示信息或隧道操作外，其中没有任何逻辑或状态。这表示不需要从 EJB 回调它们。

那么你的数据模型在哪里呢？（即谁攻击谁。）对于这个例子来说，拥有这个数据的 Singleton EJB 可能就足够了。然后您可以使用您的 PlayBean 来修改 Singleton Data Model Bean 的数据。

现在是时候为您的最后一个问题找到解决方案了。如何通知玩家数据的变化。（这就是“你被攻击了”的事情）。如果您使用任何 html 前端（如 JSF），问题总是相同的。没有像真正推动网页这样的事情。我看到两个选择：

1.  轮询（如元刷新）或用户手动刷新

2.  使用像 Comet 2 这样的东西。

因此，您的问题不是关于 EJB 或 JAF 托管 bean，而是关于 HTML 前端推送通知；-)

只是我的2美分..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T00:30:13.183

我认为这在很大程度上取决于您未提供的信息。

例如，如果客户端是胖客户端（Java 或其他），您可以在服务器中使用 JMS 设置消息传递方法。客户端在连接时只需设置一个侦听事件的消息传递客户端。服务器可以使用消息启动事件。如果客户端使用Java，客户端也可以使用JMS。但是如果需要，使用 Messaging 会使客户端和服务器组件使用不同的语言构建。

如果客户端是一个瘦 Web 应用程序，那么您实际上是在查看 Web 框架提供的内容（以及更少的 EJB ......尽管 JMS 仍然可以在服务器中用于触发事件）。ICEfaces 和 Primefaces 等 JSF 框架支持服务器推送，这允许服务器将更新推送到客户端。我认为 ZK 也支持这一点，因此它不仅限于 JSF。

无论哪种方式，我认为这个问题的答案不仅仅由 EJB 描述。希望这可以帮助。

# mysql - Linux + MySQL：如何使输出/响应可见？

> ID：14763375
> 
> 赞同：1
> 
> 时间：2013-02-07T23:52:52.213
> 
> 标签：mysql, linux, webserver, debian

我在 linux 中的水平很低，并尝试在控制台中列出所有数据库（使用 putty）。

这就是我要发送的内容：

```
> mysql -u root -p
> [password]
> CREATE DATABASE [dbname]
> SHOW DATABASES 
```

这就是回应：

```
> 
```

这很奇怪，我得到的只是一条新线路作为回应。我如何告诉 linux/mysql 给我更多信息（失败/成功）？

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T23:54:25.437

在行尾添加分号：`SHOW DATABASES;`

# ios - 从 ViewController 传递 URL

> ID：14763376
> 
> 赞同：0
> 
> 时间：2013-02-07T23:52:55.727
> 
> 标签：ios, xcode, uiwebview

我有一个带有 2 个按钮的 ViewController1。还有一个带有 UIWebView 的第二个 ViewController2。

我正在尝试做的事情：

1-当我单击 ViewController1 中的 Button1 时，它会转到 ViewController(2) 中的 UIWebView 并打开 @"www.google.com"。

2 - 当我单击 ViewController1 中的 Button2 时，它会转到 ViewController2 中的同一个 UIWebView 并打开 @"www.apple.com"。

如何将按钮 1 和 2 中的 URL 传递给 ViewController2 中的 UIWebView？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T23:56:19.593

在表单的第二个 UIViewController（子类）上有一个属性

```
@property (strong, nonatomic) NSURL *url; 
```

按下按钮时，根据需要进行设置，然后将 UIViewController 推送到 UINavigationController 上。

在第二个 UIViewController 的 viewDidLoad 方法中，指示 UIWebView 打开`self.url`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T23:59:26.133

假设您有一个由两个按钮触发的操作，您将执行以下操作：

```
- (IBAction)buttonPushed:(UIButton*)sender
{
    ViewController2 *vc2 = [[ViewController2 alloc] initWithNibName:nil bundle:nil];
    switch (sender.tag) {
        case 1:  // button one tapped
            vc2.url = [NSURL URLWithString:@"url for button 1 here";
            break;
        case 2:  // button one tapped
            vc2.url = [NSURL URLWithString:@"url for button 2 here";
            break;
    [self.navigationController pushViewController:vc2 animated:YES];
} 
```

如您所见，这个想法是让第一个视图控制器传递第二个视图控制器在创建第二个视图控制器时需要的任何信息。

# ruby-on-rails - 如何在 Rails 项目中导入 ruby

> ID：14763377
> 
> 赞同：0
> 
> 时间：2013-02-07T23:53:00.573
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1

我正在尝试导入其他人在 1 年前构建的项目，现在我的 mac 已经安装了以下所有内容，其中包括：

*   `ruby, rails and mysql`

*   `paperclip`

*   `dragonfly`

*   `authlogic`

*   `sqlite3-ruby`

*   `uuid`

*   `rmagick`

*   `thin or mongrel`

*   `nokogiri`

*   `rack-cache`

*   `pony`

*   `tiny_mce`

谁能告诉我如何导入项目，或者任何在线链接可以帮助我？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T04:20:38.300

没有所谓的导入 Rails 项目，如果你安装了 ruby​​，你可以使用它`bundler`来管理你的 gems`Gemfile`

如果您的项目是使用 rails >= 3 构建的，[请阅读此内容](http://gembundler.com/)

如果您的项目是使用 rails < 3 构建的，[请阅读此内容](http://gembundler.com/rails23.html)

一旦你准备好安装运行

```
bundle install 
```

这将安装所有必要的 gem，如果你已经有一个`Gemfile`，那么只需运行

```
bundle update 
```

# wpf - 如何阻止 WPF DataGrid TextColumn 单元格由于换行而变高？

> ID：14763381
> 
> 赞同：0
> 
> 时间：2013-02-07T23:53:12.137
> 
> 标签：wpf, wpfdatagrid

**背景：**

我有一个带有多个 TextColumns 的 DataGrid。一列是只读的，并且绑定到 DataGrid 之外的 TextBox 的文本。此 TextBox 是一个多行文本框，这意味着 AcceptsReturn = true 且 TextWrapping = Wrap。

**问题：**

当用户在多行 TextBox 中输入多行时，绑定的 DataGridCell（及其行）会垂直增长，以便显示所有文本。

**问题：**

1.  当应该出现多行时，有没有办法让垂直滚动条出现在单元格内？
2.  通常，由于多行内容，还有哪些其他技术可以规避 DataGridCell 及其行的增长？

**研究：**

我知道我可以通过强制设置它的高度来防止 DataGridRow 的增长。但是，这不会触发滚动条。

我确认 DataGridCell 中的 TextBlock 的 WordWrap 已关闭。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T11:37:36.567

你试过在里面使用 a`DataGridTemplateColumn`和 a`ScrollViewer`吗？例如：

```
<DataGridTemplateColumn Header="MyText">
 <DataGridTemplateColumn.CellTemplate>
  <DataTemplate>
   <ScrollViewer MaxHeight="30" VerticalScrollBarVisibility="Auto">
    <TextBlock TextWrapping="Wrap" Text="{Binding YourText}" />
   </ScrollViewer>
  </DataTemplate>
 </DataGridTemplateColumn.CellTemplate>
</DataGridTemplateColumn> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T17:59:32.323

我最终对我的要求有点灵活，并提出了这种风格：

```
<Style
    TargetType="{x:Type DataGridCellsPresenter}"
    BasedOn="{StaticResource {x:Type DataGridCellsPresenter}}"
    >
    <Setter
        Property="MaxHeight"
        Value="25"
        />
</Style> 
```

通过在我的 DataGridCellsPresenters 上设置 MaxHeight，我可以触发垂直滚动条，而不会直接干扰行高。而且我可以在我的应用程序中一致地应用它，而不是每列。

# javascript - D2L translateResult() 时间偏差和 Javascript

> ID：14763383
> 
> 赞同：1
> 
> 时间：2013-02-07T23:53:21.123
> 
> 标签：javascript, desire2learn

在对 D2L SDK 的 API 调用中，我得到“时间戳超出范围”和一个数字。文档说这是来自服务器和客户端之间的时间戳偏差。我在 Java SDK 中看到调用使用[解释结果（）](http://docs.valence.desire2learn.com/externaldocs/javadocs/javaclientlib/com/d2lvalence/idkeyauth/ID2LUserContext.html#interpretResult%28int,%20java.lang.String%29)来处理这个问题。如何从 javascript 执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T14:01:03.893

从历史上看，D2L Javascript 客户端使用 JSONP 是为了在传统的“同源策略”所施加的限制范围内工作。不幸的是，使用这种技术不会让客户端请求者直接访问响应正文，而不是 HTTP 200/OK 结果。

D2L 最近对 Javascript 客户端库进行了改进，因此现在，如果您将调用 Javascript 托管在与 LMS 相同的域+端口上，则调用 Javascript 可以使用 AJAX 而不是 JSONP，并且应该能够处理非 200 结果，检测时间偏差，并进行相应调整。请注意，您的脚本必须托管在与 LMS 相同的域、相同的端口并使用相同的 HTTP 方案（HTTP 或 HTTPS）。因此，请确保您使用的是最新版本的 D2L Javascript 客户端库。

现在，在时钟偏差的特殊情况下（导致 403 响应），您可以将响应正文从 ajax/xmlhttprequest 传递给`D2L.Util.calculateSkew()`它，它会给您返回一个偏差值。然后当您调用`D2L.ApplicationContext.createUserContext()`or`.createUserContextWithValues()`时，采用可选参数（默认 0）来容纳时钟偏差值。

# import - LESS 严格进口

> ID：14763392
> 
> 赞同：2
> 
> 时间：2013-02-07T23:53:50.573
> 
> 标签：import, less

我有一个编译几个较少文件的构建（实际上所有文件都导入到一个 master.less 文件中）。构建的选项之一是**strictImports**，这表明它强制评估导入。有谁知道这是否与导入文件中的操作有关，还是我完全错过了重点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-08T02:41:18.463

控制编译器`strictImports`是否允许`@import` *内部*块或`@media`（稍后添加）其他*选择器*块。[请参阅此已关闭问题](https://github.com/cloudhead/less.js/issues/656)的一些评论。

因此，将其设置为`true`这些是***不允许***的：

```
@media screen {
   @import somefile.less;
}
.mySelector {
   @import somefile.less;
} 
```

# html - 根据设备分辨率分配视口宽度

> ID：14763393
> 
> 赞同：1
> 
> 时间：2013-02-07T23:53:51.950
> 
> 标签：html, css, media-queries

我知道我可以定义视口大小：

```
<meta name="viewport" content="width=330, user-scalable=no, initial-scale=1, maximum-scale=1"> 
```

而且我知道我可以将视口调整为设备的：

```
<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1, maximum-scale=1"> 
```

**有没有办法（没有 JavaScript）来检测设备宽度并分配视口：**

例如，

如果设备宽度在 (0-450px) 范围内设置：

```
<meta name="viewport" content="width=400, user-scalable=no, initial-scale=1, maximum-scale=1"> 
```

如果设备宽度在 (451-900px) 范围内设置：

```
<meta name="viewport" content="width=700, user-scalable=no, initial-scale=1, maximum-scale=1"> 
```

我无法在网上找到任何详细说明这一点的参考资料。我非常感谢任何帮助或参考。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T02:31:02.077

我发现我试图用 JavaScript 做的事情是通过 W3C 标准化方法实现的。

结合媒体查询根据分辨率更改某些元素的样式，只需定义：

```
<meta name="viewport" content="width=width, user-scalable=no"> 
```

并且视口将自动假定您的页面大小。

# hbase - Hbase：仅使用一个过滤器扫描与使用过滤器和列扫描

> ID：14763394
> 
> 赞同：0
> 
> 时间：2013-02-07T23:53:53.853
> 
> 标签：hbase

当我使用 SingleColumnValueFilter 进行 hbase 扫描并且没有添加其他参数时，它会返回 40000 行。

> 示例：table.scan(filter="SingleColumnValueFilter('info','collection',=,'substring:tweets_brazilFire')")
> 
> 示例：table.scan(filter="SingleColumnValueFilter('info','collection',=,'substring:tweets_brazilFire')", columns=['field:body_s'])

当我将列添加到扫描中时，它会产生 1967178 行。

我在这里很困惑。该列存在于其他行中，但它没有我指定的列值。扫描不应该只应用返回通过过滤器的列和行的条件吗？

我为此使用 python happybase。

请让我知道你的建议。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T09:23:20.060

首先从 API 的角度来看，Apache Thrift 以另一种语法应用 SingleColoumnValueFilter

```
Syntax: SingleColumnValueFilter(<compare operator>, ‘&lt;comparator>’, ‘&lt;family>’, ‘&lt;qualifier>’,<filterIfColumnMissing_boolean>, <latest_version_boolean>)

Syntax: SingleColumnValueFilter(<compare operator>, ‘&lt;comparator>’, ‘&lt;family>’, ‘&lt;qualifier>)

Example: "SingleColumnValueFilter (<=, ‘abc’,‘FamilyA’, ‘Column1’, true, false)"

Example: "SingleColumnValueFilter (<=, ‘abc’,‘FamilyA’, ‘Column1’)" 
```

第一种语法似乎适合您。`filterIfColumnMissing_boolean`为真，因此只有那些存在这样列的行才会返回。版本由您决定。希望这会有所帮助。

谢谢

# jquery - 缓慢移动 jquery 滑块

> ID：14763397
> 
> 赞同：1
> 
> 时间：2013-02-07T23:54:04.457
> 
> 标签：jquery, jquery-ui, uislider

我有一个滑块，当我到达某个 div 时我想移动它。当它发生时，我希望在执行预期的交互时让滑块向下移动。

[http://jsfiddle.net/7gk2C/](http://jsfiddle.net/7gk2C/)

这是一个例子，问题是调用`$("#secrets-slider").slider("value", $("#secrets-slider").slider("option", "min") );`确实移动了滑块，但它立即移动了，它没有做滑块应该做的事情（移动 div）。

我需要打电话给`$( "#magic" ).css('top', ui.value + 'px');`它，还是有其他方法？有没有一种简单的方法可以以变速缓慢地做到这一点？

* * *

为了大家的利益。我发现可行的解决方案似乎是......

[http://jsfiddle.net/7gk2C/3/](http://jsfiddle.net/7gk2C/3/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T23:59:49.357

您正在使用调用重新初始化滑块`.slider()`，这就是未触发事件的原因（从技术上讲，它没有被移动）。

更新：

这是关于 SO（[以编程方式设置值时的 jQuery-ui 滑块动画](https://stackoverflow.com/questions/10608314/jquery-ui-slider-animation-when-setting-value-programmatically)）的类似问题的答案，[还有一个小提琴](http://jsfiddle.net/exXLV/8/)，但这是相关代码：

```
$("#slider").slider({
        value:100,
        min: 0,
        max: 500,
        step: 1,
        animate: "slow",
        slide: function( event, ui ) {
            $( "#slider-value" ).html( ui.value );
        }
});

$( "#slider-value" ).html(  $('#slider').slider('value') );

$("button").click( function(){
    $("#slider").slider('value', 150);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T00:03:38.563

您可以设置[`animate`](http://api.jqueryui.com/slider/#option-animate)选项

```
$( "#secrets-slider" ).slider({
    orientation: "vertical",
    min: 0,
    max: 200,
    value: 10,
    animate: "slow",
    slide: function( event, ui ) { 
        $( "#magic" ).css('top', ui.value + 'px');
    }
}); 
```

对于`div`不动，请参阅[`slide(event, ui)`](http://api.jqueryui.com/slider/#event-slide)

> 在滑动期间每次鼠标移动时触发。

因此，以编程方式设置滑块时，似乎不会触发此事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T23:57:31.380

你需要看看[$.animate()](https://www.google.com.au/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CDQQFjAA&url=http://api.jquery.com/animate/&ei=Fz8UUaDEMJGyiQfA_4DYDA&usg=AFQjCNEbtYj_CVrTF4Rx7m_-wysrfpbSQw&sig2=DZAZD6inrvtCDYmJ5tVdtw&bvm=bv.42080656,d.aGc)

这将允许您将滑块设置为您希望的位置，并且您可以设置以毫秒为单位的时间长度。

另外，我认为触发器没有移动 div 的原因是您没有与滑块对象中的滑动控件进行交互。

# php - 我的 foreach 循环有问题

> ID：14763402
> 
> 赞同：0
> 
> 时间：2013-02-07T23:54:21.320
> 
> 标签：php, forms, validation, foreach

所以我正在尝试验证 php 的表单。

我的联系表格是您的典型表格

```
<form method="post" action="contact.php">
   <table class="contact">
     <tr>
      <th>
      <label for="name">Name</label>
      </th>
     <td>
      <input type="text" name="name" id="name">
     </td>
    </tr>   
    <tr>
     <th>
     <label for="email">Email</label>
   </th>
    <td>
     <input type="text" name="email" id="email">
   </td>
  </tr> 
  <tr>
   <th>
   <label for="message">Message</label>
   </th>
    <td>
    <textarea name="message" id="message"></textarea>
    </td>
   </tr>    
 </table>   
   <input type="submit" value="Send"> 
```

现在我想为此添加 php 验证，所以我创建了以下内容：

```
if (empty($_POST) === false) {
$errors = array();

$name       = $_POST['name'];
$email  = $_POST['email'];
$message    = $_POST['message'];

if(empty($name) === true || empty($email) === true || empty($message) === true) {
    $errors[] = 'Please fill out all the required forms!';
} else {
    if (filter_var($email, FILTER_VALIDATE_EMAIL) === false) {
        $errors[] = 'Sorry please enter a valid email address';
    }
    if (ctype_alpha($name) === false) {
        $errors[] = 'Sorry, name must contain only letters!';
    }
}
print_r ($errors); 
```

现在我尝试将其打印出来，数组显示正在输入字段的数据，并且所有验证都正常工作。我遇到的问题是下一步我添加 php 以在列表中回显数组。

我在表单上方添加的代码是一个 foreach 循环，它应该列出任何验证失败时显示的错误：

```
<?php 
if (empty($errors) === false) {
echo '<ul>';
foreach($errors as $error) {
echo '<li>' , $error ,'</li>';
}
echo '</ul>';
}   
?> 
```

但现在问题是这样的：现在我每次填写表格时，错误不会产生列表，如果没有看到 foreach，它们只会产生原始数组。

任何建议或帮助都会很棒！

多谢你们，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T23:55:58.300

```
if (count($errors)) echo '<ul><li>'.implode('</li><li>', $errors).'</li></ul>';
else echo 'No errors'; 
```

有了这个，你看到“没有错误”吗？

除此之外，没有必要这样做

```
if(empty($name) === true) 
```

empty($name) 为真或假。然后无需将其与真实进行比较。

```
if(empty($name)) 
```

完全没问题，否则就像问

```
if ((count(12)>0)==true)!=false) 
```

这太荒谬了。而实际上

```
if(empty($name.$email.$message)) 
```

字符少得多，结果与

```
if(empty($name) === true || empty($email) === true || empty($message) === true) 
```

# ruby-on-rails - 如何在 Rails 中为不同的用户建模

> ID：14763406
> 
> 赞同：5
> 
> 时间：2013-02-07T23:54:42.557
> 
> 标签：ruby-on-rails, database-design, model, single-table-inheritance

# 问题

我有一个带有授权和身份验证逻辑的用户模型。

现在我意识到我有三种不同类型的用户。我想存储关于他们每个人的不同信息。

在 Rails 中处理这个问题的最佳方法是什么？

# 基于当前阅读的想法

我看过 STI，但从我读过的内容来看，这是不合适的，因为我的数据库中最终会出现很多 NULL 字段。

理想情况下，我不想为三种用户类型中的每一种重复身份验证/授权逻辑。

每个用户在应用程序中也将具有不同的功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T00:15:18.983

您可以尝试使用[多态关联](http://guides.rubyonrails.org/association_basics.html#polymorphic-associations)并使用所有类型的用户拥有的数据创建表`users`，并将其他数据放在单独的表中。涵盖此主题的[Railscast Epizode 。](http://railscasts.com/episodes/154-polymorphic-association)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T00:07:08.770

有很多方法可以做到这一点。这是一种方法：

您可以考虑用户拥有的*角色*，而不是考虑不同类型的用户。

例如，如果用户可能是屠夫、面包师或烛台制造商，您可以有四个表：`users`、`butchers`、`bakers`、`candlestick_makers`。后三个角色表各有一`user_id`列；他们“属于”用户。

如果您需要强制特定用户只有一个角色，则必须在应用程序中执行此操作（因为此数据库模式将允许单个用户具有多个角色）。

如果这些角色表中有很多内容，则此方法很好。如果没有，在表上留下一些 NULL 列`users`可能不会杀死你。

# bash - grep ls 跨选项卡输出

> ID：14763413
> 
> 赞同：2
> 
> 时间：2013-02-07T23:56:07.000
> 
> 标签：bash, ls

如果我`ls -l`在一个目录中并得到：

```
-rwxr-x---  1 user1  admin        0  8 Aug  2012 file.txt
-rwxr-x---  1 user1  admin  1733480 26 Jul  2012 Archive.pax.gz
drwxr-x---@ 7 user1  admin      238 31 Jul  2012 Mac Shots
-rwxr-x---@ 1 user3  admin   598445 31 Jul  2012 Mac Shots.zip
-rwxr-x---@ 1 user1  admin      380  6 Jul  2012 an.sh
-rwxr-x---  1 user2  admin       14 30 Jun  2012 analystName.txt
-rwxr-x---  1 user1  admin       36  8 Aug  2012 apple.txt
drwxr-x---@ 7 user1  admin      238 31 Jul  2012 iPad Shots
-rwxr-x---@ 1 user1  admin  7372367 31 Jul  2012 iPad Shots.zip
-rwxr-x---  1 user2  admin      109 30 Jun  2012 test.txt
drwxr-x---  3 user1  admin      102 26 Jul  2012 usr 
```

但只想列出“user1”拥有的文件，这些文件在“Aug”中被修改以获得

```
-rwxr-x---  1 user1  admin        0  8 Aug  2012 file.txt
-rwxr-x---  1 user1  admin       36  8 Aug  2012 apple.txt 
```

最好的方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-08T00:03:29.000

解析`ls`输出从来都不是一个好的可靠的解决方案。`ls`是一种交互式查看文件信息的工具。它的输出是为人类格式化的，并且会导致脚本中的错误。使用 glob 或 find 代替。了解原因： http: [//mywiki.wooledge.org/ParsingLs](http://mywiki.wooledge.org/ParsingLs)

相反，您可以尝试：

```
find . -type f -user 'user1' -maxdepth 1 
```

或者

```
find . -type f -printf '%u %f\n' -maxdepth 1 # if you want to show the username 
```

或者

```
stat -c '%U %f' * | cut -d" " -f2- 
```

看

```
man find
man stat 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T00:01:53.337

或者您可以更明确一点，因为 Michael 的 grep 还会找到 user1 拥有的名为“August iPad Shots”的文件，无论何时修改：

```
ls -l | awk '($3=="user1" && $7=="Aug")' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T00:17:24.863

我认为最安全的方法是这样的：

```
touch --date "2012-08-01" /tmp/start
touch --date "2012-09-01" /tmp/stop
find . -maxdepth 1 -type f -user user1 -newer /tmp/start -not -newer /tmp/stop -print0 | xargs -0 ls -l {}
rm /tmp/start /tmp/stop 
```

或作为*一个班轮*

```
touch --date "2012-08-01" /tmp/start; touch --date "2012-09-01" /tmp/stop; find . -maxdepth 1 -type f -user user1 -newer /tmp/start -not -newer /tmp/stop -print0 | xargs -0 ls -l {}; rm /tmp/start /tmp/stop 
```

优点：

*   你[不解析 ls](http://mywiki.wooledge.org/ParsingLs)
*   它适用于其中包含*Aug的文件名*

缺点

*   有点长

解释：

*   *-maxdepth 1*：将结果限制在当前目录
*   *-type f*：将结果限制为文件
*   *-user user1*：将结果重新字符串到属于*user1的文件*
*   *-newer /tmp/start*：将结果重新字符串到比*更新*`/tmp/start`的文件，该文件是使用所需日期创建的
*   *-not -newer /tmp/stop* : 将结果重新字符串到*不*晚于 的文件`/tmp/stop`，该文件是使用所需日期创建的
*   *-print0*：因此它可以处理名称中带有换行符的文件名！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T23:59:01.727

怎么样`ls -l | grep user1 | grep Aug`？

或者您可以结合正则表达式：`ls -l | grep 'user1.*Aug'`

# php - 使用 Ajax 访问其他目录中的文件时遇到问题，我是否指定了错误的路径？

> ID：14763416
> 
> 赞同：0
> 
> 时间：2013-02-07T23:56:17.070
> 
> 标签：php, javascript, ajax, path, wamp

在 WAMP 中，我将根目录从 更改`C:\wamp\www`为`C:\wamp\www\public`. 我有一个名为`username.html`它的文件，它通过 Ajax 与`simple.php`. `simple.php`如果在其中，这可以正常工作，`C:\wamp\www\public`但是如果我将其移至`C:\wamp\www\private`没有任何反应。

注意我选择不使用 jquery 并使用纯 javascript 执行此操作。

```
xmlhttp.open("GET", "simple.php?suite="+top,true);//works when simple.php is in same folder

xmlhttp.open("GET", "..\private\simple.php?suite="+top,true);//doesn't work

xmlhttp.open("GET", "../private/simple.php?suite="+top,true);//doesn't work

xmlhttp.open("GET", "..//private//simple.php?suite="+top,true);//doesn't work 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T00:05:39.367

那是因为现在，public 是您的 webroot，并且您正在从 web 服务器请求该站点。“私人”目录超出了您的网络服务器的范围，因为它超出了网络根目录。您可以直接从您的 PHP 脚本中访问它（例如，通过 fopen()、include、require、...，如果在安全设置中允许的话），但网络服务器不能直接提供它。

# ruby-on-rails - 如果我将 CanCan 与 Devise 一起使用，为什么不会出现 flash 消息？

> ID：14763423
> 
> 赞同：1
> 
> 时间：2013-02-07T23:56:46.870
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise, cancan

假设我没有登录。
在这种情况下，它会在访问 mails_controller 中的操作时显示此 Flash 通知。

```
You need to sign in or sign up before continuing. 
```

但是，它不会显示在 community_controller 中。
为什么？我该如何解决？

**mails_controller.rb**

```
class MailsController < ApplicationController
    before_filter :authenticate_user!
    ....
end 
```

**社区控制器.rb**

```
class CommunitiesController < ApplicationController
    load_and_authorize_resource :find_by => :id
    before_filter :authenticate_user!
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T00:22:28.387

尝试`load_and_authorize_resource`在`before_filter`. 当线路在您到达线路`load_and_authorize_resource`之前找不到可能发生的成员操作的资源时，线路将引发异常`before_filter`

# web - 没有 php.ini 文件

> ID：14763425
> 
> 赞同：1
> 
> 时间：2013-02-07T23:57:19.153
> 
> 标签：web, download, fopen, php

我正在制作一个请求下载文件的 PHP 表单。我的脚本有错误，做了一些搜索发现这是因为我的 php.ini 文件需要`allow_url_fopen = On`，所以我去更改设置，我的网站没有 php.ini 文件。我真的不知道如何制作一个 php.ini 文件。我将如何创建这个文件？我的虚拟主机说我需要创建它。放入此文件的默认设置是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T00:02:29.420

*   首先，试着弄清楚你是否真的没有这个文件。php.ini的位置可以在[phpinfo](http://php.net/manual/en/function.phpinfo.php) ()中找到；输出。
*   其次，如果有这样的文件，编辑那个。如果没有，请从 php.net 下载 ZIP 包，其中至少有[php.ini.recommended](http://fts.ifac.cnr.it/cgi-bin/dwww/usr/share/doc/php5/examples/php.ini-recommended)，其中包含基本指令。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T14:15:42.307

好吧，如果您没有 php.ini 文件，您可以根据需要创建它，其中包含尽可能少的行。只需放入`allow_url_fopen = On`一个 ascii 文件并将其命名为 php.ini，将其复制到工作目录或公共根目录。请记住，无论如何，托管人员可以在您无权访问的地方覆盖此值。要查看应用的最终和实际设置是什么，请使用 phpinfo()。
附注：.htaccess 文件在某些​​情况下可以管理和覆盖 php 设置，因此还要查看所有这些文件（您可以访问），看看您是否可以在那里设置您的偏好。请注意 systax 与 php.ini [.htaccess 示例不同](http://support.tigertech.net/php-value)

# html - 当我悬停css菜单时出现水平滚动条

> ID：14763428
> 
> 赞同：2
> 
> 时间：2013-02-07T23:57:24.283
> 
> 标签：html, css

正如标题所说。

我在 中制作了一个 CSS 悬停菜单`<body>`，我总是希望它位于浏览器的右上角。但是当我悬停菜单时，水平滚动条会出现在浏览器中。

有人知道为什么吗？？以及如何解决？

这里有一个示例链接：http: [//jsfiddle.net/pdbYz/24/](http://jsfiddle.net/pdbYz/24/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T00:07:07.853

你溢出你肮脏的子菜单......试试看：

```
div#sub_menu div.sub_menu_top {
    width:150px;
} 
```

[http://jsfiddle.net/pdbYz/25/](http://jsfiddle.net/pdbYz/25/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T00:01:07.827

这是因为子菜单的框阴影，你必须以某种方式剪辑它

编辑：这是因为`<div class="sub_menu_top"></div>`，您必须将其位置设置为`right:0`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T00:10:03.627

```
div#sub_menu div.sub_menu_top {
    width:250px;
    height:13px;
    background-image:url(../images/arrow_up.png);
    background-repeat:no-repeat;
    background-position:109px bottom;
    position:absolute;
    top:-13px;
} 
```

删除`position:absolute;`，滚动条消失。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-09T15:25:30.467

在[http://jsfiddle.net/pdbYz/24/](http://jsfiddle.net/pdbYz/24/)上的 HMTL 代码中，如果您更改该行

```
<div class="drop_down_block" id="sub_menu"> 
```

到

```
<div class="drop_down_block" id="sub_menu" style="position:fixed; right:0px;"> 
```

当您将鼠标悬停在菜单上时，滚动条不会显示。

You still need to figure out where to put the added CSS in your CSS file, but I guess you can do that pretty easily. If not, let me know and I will try and add more info.

# cocos2d-iphone - (UIApplicationDidBecomeActiveNotification) 直到 cocos2d 帧间隔从 15 降到 1 才被调用？

> ID：14763429
> 
> 赞同：0
> 
> 时间：2013-02-07T23:57:28.417
> 
> 标签：cocos2d-iphone, xcode4.5, nsnotificationcenter, nsnotifications

当我的应用程序从后台运行打开时，我试图显示 UIAlert 视图，但是直到 cocos2d 帧间隔从 15 下降到 1 才调用通知。我不明白这意味着什么。有人可以启发我。关闭应用程序时，它会在调试器中显示。

`-[CCDirectorDisplayLink startAnimation] : cocos2d: Frame interval: 15`

然后，当我重新打开应用程序时，它会显示相同的内容。

```
-[CCDirectorDisplayLink startAnimation] : cocos2d: Frame interval: 15 
```

但大约 1 或 2 秒后，我收到此消息`

`-[CCDirectorDisplayLink startAnimation] : cocos2d: Frame interval: 1`

在调试器中然后它调用通知？

# python - C++ 到 python 初学者

> ID：14763430
> 
> 赞同：3
> 
> 时间：2013-02-07T23:57:29.433
> 
> 标签：python, python-3.x

我对 python 完全陌生，我有这个 c++ 代码片段：

```
do
    {
    cout << "Make sure the number of digits are exactly 12 : ";
    cin >> input ;
    } while((input.length()) != 12 ); 
```

如何将此部分更改为 python ？到目前为止，我已经尝试过了，我不知道正确的语法或逻辑流程是什么。这就是我所拥有的：

```
while True:
  print("Make sure the number of digits are exactly 12 : ")
  input = raw_input()
  check = len(input)
  if check != 12
  break 
```

**以上部分解决！**

此外，另一个 c++ 片段是：**输入是字符串**

```
for (int i = 0; i < 12 ; i++)
    {
     code[i] = input.at(i) - '0';
    } 
```

我不知道如何将此部分更改为 python 代码

```
code[i] = input.at(i) - '0'; 
```

所以，我遇到的问题是我不知道如何初始化数组

```
int code[12] ; 
```

那应该如何在 python 中，以便我可以执行这段代码！如给定的：

```
 int code[12] ;
    for (int i = 0; i < 12 ; i++)
      {
        code[i] = input.at(i) - '0';
      } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T00:03:25.230

首先，[do..while 不在 Python 中](https://stackoverflow.com/questions/743164/do-while-loop-in-python)

对于你的第一个问题：

```
while True:
  print "Make sure the number of digits are exactly 12 : "
  x = input()

  if len(str(x)) == 12:
    break 
```

Python 对空格很敏感，方法是使用制表符和空格而不是括号来管理的。你也错过了一个冒号。

对于您的第二个问题，代码看起来像是您正在获取字符并将其转换为数字。您可以简单地进行类型转换：

```
for i in range(12):
  code[i] = int(x[i]) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-08T00:03:09.320

对于第一个代码片段，您可以更改：

```
print("Make sure the number of digits are exactly 12: ")
input = raw_input() 
```

至：

```
input = raw_input("Make sure the number of digits are exactly 12: ") 
```

您也不需要该`check`变量，只需执行以下操作：

```
if len(input) == 12:
  break 
```

请注意，在 IF 语句之后我如何包含一个`:`（相等性测试也必须是`==`，而不是`!=`）。然后，如果条件为 ，则执行决定后进一步缩进的任何内容`True`。

`int()`对于第二个代码片段，您可以使用and`str()`函数将整数转换为字符串（并将字符串转换为整数） 。例如

```
>>> a = '012345678912'
>>> len(a) == 12
True
>>> b = int(a)
>>> print b
12345678912
>>> str(b)
'12345678912' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-05T13:11:20.897

```
do
    {
    cout << "Make sure the number of digits are exactly 12 : ";
    cin >> input ;
    } while((input.length()) != 12 );

int code[12] ;
    for (int i = 0; i < 12 ; i++)
        {
        code[i] = input.at(i) - '0';
        } 
```

翻译成

```
while True:
    input = raw_input("Make sure the number of digits are exactly 12 : ")
    if len(input) == 12:
         break
code = []
for ind in range(0,12):
    code.append(ord(input[ind]) - ord('0')) 
```

在 python 中有更简单的方法可以将一串数字解析为它们的组成值，例如

```
code.append(int(input[ind])) 
```

我提供的翻译与代码的目的无关[可能包括字母等]

python中的变量'code'当然是一个列表而不是一个数组

# java - 从属性文件访问 Maven Pom 变量

> ID：14763431
> 
> 赞同：7
> 
> 时间：2013-02-07T23:57:30.473
> 
> 标签：java, maven, pom.xml, maven-plugin-development

我正在开发一个自定义的 Maven 插件。当我写：

```
${project.version} 
```

在我的 pom 文件中，我可以获得它的值但是如果我写入属性文件有没有办法：

```
project.version = ${project.version} 
```

这将正确设置 project.version 值，我如何在我的 Java 代码中实现它？

**PS：**我不在我的 Mojo 中使用注释，我不想在我的 Java 代码中使用变量，因为用户应该像在属性文件中一样定义我的变量，并且我不能更改我的核心 Java 代码来更改内容.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-08T00:11:08.483

您可以使用[Maven 资源过滤](http://maven.apache.org/plugins/maven-resources-plugin/examples/filter.html)，只需`<resources>`在内部添加`<build>`并为您想要的任何内容打开过滤即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-20T23:42:47.617

您可以`pom.xml`像我在此函数中一样读取并保存您的任何属性：

```
/**
 * Save a property in a pom.xml
 *
 * @param propertyName Name of the property
 * @param value New value for the property
 */
public static void saveProjectProperty(String propertyName, String value)
{
    Model model = null;
    FileReader reader = null;
    MavenXpp3Reader mavenreader = new MavenXpp3Reader();
    try
    {
        reader = new FileReader("pom.xml");
        model = mavenreader.read(reader);
        MavenProject project = new MavenProject(model);
        while (project.getParent() != null)
        {
            project = project.getParent();
        }
        project.getProperties().put(propertyName, value);
        try (FileWriter fileWriter = new FileWriter("pom.xml"))
        {
            project.writeModel(fileWriter);
        }
    }
    catch (IOException ex)
    {
        LOG.severe("Error saving pom.xml");
    }
    catch (XmlPullParserException ex)
    {
        LOG.warning("Error reading pom.xml");
    }
} 
```

为了能够在 JVM 中使用非本机类，您应该添加以下依赖项：

```
<dependency>
  <groupId>org.apache.maven</groupId>
  <artifactId>maven-model</artifactId>
  <version>2.0</version>
</dependency>

<dependency>
  <groupId>org.apache.maven</groupId>
  <artifactId>maven-project</artifactId>
  <version>2.0</version>
</dependency 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T00:01:39.487

如果使用注释，请在您的 mojo 中查看[http://maven.apache.org/plugin-tools/maven-plugin-plugin/examples/using-annotations.html](http://maven.apache.org/plugin-tools/maven-plugin-plugin/examples/using-annotations.html) 使用

```
@Component
protected MavenProject project; 
```

带 doclet

```
/**
 * The Maven project to act upon.
 * 
 * @parameter expression="${project}"
 * @required
 */
private MavenProject project; 
```

然后 project.getVersion()

# java - 如何在不删除 while(true) 的情况下避免 100% CPU 利用率

> ID：14763434
> 
> 赞同：1
> 
> 时间：2013-02-07T23:57:34.233
> 
> 标签：java, multithreading

我正在开发一个需要一段时间（true）的系统，其中循环不断侦听队列并增加内存中的计数。

数据不断地进入队列，所以我无法避免 while(true) 条件。但自然它会将我的 CPU 利用率提高到 100%。

那么，我怎样才能让一个线程保持活动状态，它监听队列尾部并执行一些操作，但同时将 CPU 利用率降低到 100%？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-08T00:02:51.893

[阻塞队列](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/BlockingQueue.html)正是为此目的而发明的。

另请参阅：[Java 中阻塞队列的优点是什么？](https://stackoverflow.com/questions/827831/what-are-the-advantages-of-blocking-queue-in-java)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T00:29:06.783

根据您对另一个答案的评论，您希望有一个基于 hsqldb 更改的队列

一些快速的谷歌搜索出现了：

[http://hsqldb.org/doc/guide/triggers-chapt.html](http://hsqldb.org/doc/guide/triggers-chapt.html)

看来您可以对其进行设置，以便更改导致发生触发器，该触发器将通知您编写的实现`org.hsqldb.Trigger`接口的类。让该类包含对`LinkedBlockingDequeue`Java 中 Concurrent 包中的 a 的引用，并让触发器将更改添加到队列中。

您现在有一个阻塞队列，您的读取线程将阻塞该队列，直到 hsqldb 触发触发器（来自写入器的更新），该触发器会将某些内容放入队列中。然后等待的线程将解除阻塞并将项目从队列中移出。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-08T00:03:13.657

LinkedBlockingQueue.take() 是您应该使用的。这等待条目到达队列，不需要额外的同步机制。

（Java，IIRC 中还有一两个其他阻塞队列，但它们的特性使其不适用于一般情况。不知道为什么如此重要的机制在神秘的类中被埋得如此之深。）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-08T00:03:21.643

通常，队列有办法从中检索项目，并且您的线程将被取消调度（因此使用 0% cpu），直到有东西到达队列...

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-08T01:35:45.707

lbalazscs 和 Brain 有很好的答案。我无法分享我的代码，他们很难为我的问题提供确切的解决方案。并且有一段时间（true）不断地轮询队列肯定是错误的方法。所以，这就是我所做的：

1.  我使用`ScheduledExecutorService`了 10 秒的延迟。
2.  我阅读了一组消息（比如 10k）并处理这些消息
3.  再次调用线程并继续“循环”。

这大大减少了我的 CPU 使用率。欢迎提出建议。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2019-07-27T20:21:53.300

阅读书籍并且只在学校浪费时间的人提供了很多愚蠢的答案，而不是我看到的直接逻辑或答案。

while(true) 将设置您的程序以使用基本上由 Windows 算法“分配”给它的所有 CPU 能力来运行循环中的内容，通常一遍又一遍地尽可能快地运行。这并不意味着如果它在您的应用程序上显示 100%，如果您运行游戏，您的空循环 .exe 将占用您所有的操作系​​统 CPU 资源，游戏仍应按预期运行。它更像是一个视觉错误，类似于windows空闲进程和其他一些进程。解决方法是添加 Sleep(1)（至少 1 毫秒）或更好的 Sleep(5)，以确保其他东西可以运行并确保 CPU 不会尽可能快地不断循环您的 while(true)。这通常会将视觉队列中的 CPU 使用率降至 0% 或 1%，因为 1 毫秒对于更老的 CPU 来说是一个很大的休息时间。

很多时候，while(trues) 或通用的无限循环是糟糕的设计，并且可以大大减慢到甚至 Sleep(1000) - 1 秒间隔检查或更高。无限循环并不*总是*糟糕的设计，但通常可以改进它们。

有趣的是，当我像 12 岁时学习 C 弹出并给出所有“愚蠢”的答案时，我学到了这个错误。

只要知道您是否尝试过，除非您学会使用的脚本化较慢的语言本身已将其固定在某个位置，否则当操作系统实际上有空闲资源时，Windows 会声称在执行空循环时会使用大量 CPU花费。

# javascript - 消除从表中提取并插入数组的重复元素

> ID：14763437
> 
> 赞同：0
> 
> 时间：2013-02-07T23:58:03.380
> 
> 标签：javascript, jquery, arrays, duplicates

我在stackoverflow中遇到了很多问题，但似乎没有一个对我有帮助。我知道有很多这样的帖子，但我需要帮助。

我正在尝试将表的列放入数组中，然后尝试删除重复的元素。[这个](http://jsfiddle.net/9sbPg/2/)jsfiddle 说明了这种情况。这是代码：

```
//sorry for the language 
var days2 = ["Pazartesi", "Salı", "Pazartesi", "Çarşamba"];
var days = jQuery.makeArray($(".dersprg tr td:nth-child(6)"));

//the function works just fine on days2 array, but not on days array
function eliminateRepeat(array){
  var i, j;
  for(i=0 ; i<array.length ; i++){
      for(j=i+1 ; j < array.length ; j++){
          if(array[i] == array[j])
              array.splice(j,1);
       }
  }
}
eliminateRepeat(days);
$(days).clone().appendTo(document.getElementById("test")); 
```

我在这里使用的表有点大，你最好从 jsfiddle 看到它。

注意：我使用了许多函数来回答其他问题，但似乎没有一个对我有用。我最终编写了自己的函数，该函数在基于字符串的数组上运行良好，但是仍然无法使用**选定的基于 html 元素的**数组完成工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T00:09:35.093

> 该函数在 days2 数组上工作得很好，但在 days 数组上却不行

是的，因为元素列表中没有重复项。可能有一些文本相同，但它们是不同的节点，与运算符不相等`==`。你需要改变

```
if(array[i] == array[j]) 
```

至

```
if($(array[i]).text() == $(array[j]).text()) 
```

* * *

顺便说一句，您`splice`从数组中删除了一个元素，以便所有索引都发生变化。然而，通过转到下一个索引，您将跳过一个项目。利用`array.splice(j--,1);`

# java - 混合类型 java 多态性。预期不输出

> ID：14763449
> 
> 赞同：2
> 
> 时间：2013-02-07T23:59:30.710
> 
> 标签：java

在以下代码中：

```
class Payment {   }
class CashPayment extends Payment{   }

class Store{    
    public void acceptPayment (Payment p)
    {System.out.println ("Store::Payment");}

}
class FastFoodStore extends Store {
    public void acceptPayment (CashPayment c)
    {System.out.println ("FastFoodStore::CashPayment");}

    public void acceptPayment (Payment p)
    {System.out.println ("FastFoodStore::Payment");}

}

//
public class Example {  

    public static void main(String [] args){

        Store store1 = new Store();
        FastFoodStore sandwitchPlace = new FastFoodStore ();
        Store store2 = new FastFoodStore();

        Payment p1 = new Payment();
        CashPayment cp = new CashPayment();
        Payment p2 = new CashPayment();

        store1.acceptPayment (p1);
        store1.acceptPayment (cp);
        store1.acceptPayment (p2); 

        sandwitchPlace.acceptPayment (p1);
        sandwitchPlace.acceptPayment (cp);
        sandwitchPlace.acceptPayment (p2);

        store2.acceptPayment (p1);
        store2.acceptPayment (cp);
        store2.acceptPayment (p2);

    }   
} 
```

我真的不明白为什么

```
store2.acceptPayment (cp); 
```

将显示 FastFoodStore::Payment 但不显示 FastFoodStore::CashPayment？store2 基本上会在运行时调用 FastFoodStore 中的方法并传递一个 CashPayment 类型的参数。在这种情况下，将显示 FastFoodStore::CashPayment。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T00:16:21.383

在决定调用哪个方法时，编译时间和运行时间之间存在复杂的工作分工。有关这方面的完整故事，请参阅[方法调用表达式](http://docs.oracle.com/javase/specs/jls/se5.0/html/expressions.html#15.12)。

在您的示例中，当目标表达式的类型为 Store 时，编译器将只看到 Store acceptPayment 方法，该方法需要一个 Payment 参数。这承诺调用一个接受 Payment 参数的方法。

在运行时，只考虑`public void acceptPayment (Payment p)`FastFoodStore 中的方法，即目标对象的类。

# php - Symfony2 功能测试 - GeomFromText / SQLite

> ID：14763450
> 
> 赞同：2
> 
> 时间：2013-02-07T23:59:42.853
> 
> 标签：php, mysql, sqlite, symfony, doctrine-orm

我有一种情况，我需要对依赖 MySQL 空间函数的实体编写功能/单元测试。但是，我的测试环境使用 SQLite 进行测试（使用 LiipFunctionalTestBundle）。SQLite有一个[SpatiaLite](http://www.gaia-gis.it/gaia-sins/%20SpatiaLite)扩展，但不确定是否可以将它与 wampserver 一起使用？有没有人有类似情况的经验？

谢谢！

**编辑：** 与此同时，我已经切换到 MySQL 的测试用例。

# java - OpenLayers 安卓

> ID：14763458
> 
> 赞同：1
> 
> 时间：2013-02-08T00:00:16.070
> 
> 标签：java, android, map, openlayers, marker

我目前正在为 Android 开发一个地图/导航项目，我选择了 OpenLayers，因为它声称支持移动开发，并且这些示例在我的 Android 手机上运行良好。

我用一个标记、一个标记弹出窗口和一个图层切换控件制作了一个基本地图原型。所有这一切都在我的 PC 和我的 Android 上按预期工作，除了 Android 的一个奇怪问题。我是 .html 文件和通过我的应用程序中的 WebView 的所有依赖项，并且出现了一些奇怪的问题。一方面，每当我点击我的标记或缩放控制器之类的东西时，它周围会短暂出现一个橙色框，有时它不会记录点击。

澄清一下，我在我的地图上启用了触摸导航，并且弹出窗口的所有事件都是触摸式的，并且大部分时间都在工作。但是橙色框和偶尔无法注册点击确实破坏了该应用程序的任何程度的润色。只是想知道是否有其他人以前遇到过这种情况，并且可能有解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T16:58:25.517

每当我看到这种类型的行为，即 openlayers 中的橙色纵横交错框时，很多时候都是由于无法找到图标图形文件造成的。尝试创建一个标记，其图标文件在应有的位置不存在，并查看这是否是您描述的“橙色框”。

如果是这样，那么您应该检查任何损坏的链接（尤其是鼠标悬停）。

# html - 通过响应式设计容纳更大的屏幕

> ID：14763462
> 
> 赞同：0
> 
> 时间：2013-02-08T00:00:51.623
> 
> 标签：html, css

我设计的网页在更大的屏幕（27 英寸）上查看时，有很多空白区域无法填充。我将如何处理这个问题？我已经使用媒体查询来适应最常见的分辨率。我应该如何设计更大的屏幕？我是否也应该有一个流畅的布局，以获得更面向未来的解决方案并处理这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T00:03:31.943

您可以使布局灵活，或使用@media 查询为更大的显示构建新的响应式布局

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T04:25:50.020

您可以使用最小宽度媒体查询来定位更大的屏幕。

```
/* Target 1200px wide and above */
@media (min-width: 1200px) {
    body {
        color: red;
    }
} 
```

如果屏幕宽于 1200 像素，这将改变正文上的字体颜色，它不适用于 1199 像素及以下的屏幕。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T02:15:59.977

将背景纹理添加到包装 div 以填充空间，或者如果您愿意，添加甚至可以是 3000 像素 + 宽的背景，只需简单地将其居中，这样如果屏幕变大它会继续向外但仍然可以对于较小的分辨率。

通常，您还可以有一个响应式布局，可以处理@media 查询等。

这里有几个例子：

*   [http://www.maxdesign.com.au/articles/resolution/](http://www.maxdesign.com.au/articles/resolution/)
*   [http://www.html5rocks.com/en/mobile/high-dpi/](http://www.html5rocks.com/en/mobile/high-dpi/)
*   [http://css-tricks.com/perfect-full-page-background-image/](http://css-tricks.com/perfect-full-page-background-image/)

# java - MsgPack 第三方对象序列化

> ID：14763463
> 
> 赞同：2
> 
> 时间：2013-02-08T00:00:58.377
> 
> 标签：java, serialization, jodatime, msgpack

我正在尝试使用 MsgPack (Java) 序列化对象。这个对象（除其他外）包含 JodaTime 的 LocalDate 用于表示 - 以及 - 日期。MsgPack 无法反序列化来自 .NET 客户端对应的消息，因为它是非标准类型。我可以想到一种非常简单的方法来实现有效行为 - 自定义序列化为一组整数左右。但是，由于缺少 MsgPack 的文档（对于这么好的库来说这是一种耻辱），我无法找到，是否有这样的选项（我希望它是，...）。

有人可以给我一两个关于在哪里看的指针吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-01T20:01:17.403

使用开源，您可以查看并可能复制一些代码片段。在这种情况下，我建议您查看精心设计的 MessagePack 并复制模板。

使用 MessagePack 的 Joda DateTime 自定义模板示例。以下模板将 DateTime 序列化为 Long（1970 年的 Millis）并将其反序列化回 UTC（DateTimeZone.UTC）。如果您希望保持正确的时区，可以轻松扩展：

```
public class DateTimeSerializerTemplate extends AbstractTemplate<DateTime> {
    private DateTimeSerializerTemplate() {

    }

    public void write(Packer pk, DateTime target, boolean required) throws IOException {
        if (target == null) {
            if (required) {
                throw new MessageTypeException("Attempted to write null");
            }
            pk.writeNil();
            return;
        }
        pk.write(target.getMillis());
    }

    public DateTime read(Unpacker u, DateTime to, boolean required) throws IOException {
        if (!required && u.trySkipNil()) {
            return null;
        }
        return new DateTime(u.readLong(), DateTimeZone.UTC);
    }

    static public DateTimeSerializerTemplate getInstance() {
        return instance;
    }

    static final DateTimeSerializerTemplate instance = new DateTimeSerializerTemplate();

} 
```

在您的班级中只需注册上面的模板：

```
msgpack = new MessagePack();
msgpack.register(DateTime.class, DateTimeSerializerTemplate.getInstance()); 
```

# android - 在 Android 中插入联系人

> ID：14763479
> 
> 赞同：0
> 
> 时间：2013-02-08T00:02:12.807
> 
> 标签：android, contacts, contactscontract

我正在为 Android 开发一个备份应用程序，主要是联系人和 SMS 消息。备份不是问题，但将联系人写回 Android 数据库是有问题的。

这是我到目前为止所拥有的：

```
ArrayList<ContentProviderOperation> ops = new ArrayList<ContentProviderOperation>(); 
ops.add(ContentProviderOperation.newInsert(ContactsContract.RawContacts.CONTENT_URI) 
    .withValue(ContactsContract.RawContacts.ACCOUNT_TYPE, null) 
    .withValue(ContactsContract.RawContacts.ACCOUNT_NAME, null)
    .build()); 

ops.add(ContentProviderOperation.newInsert(Data.CONTENT_URI)
    .withValueBackReference(Data.RAW_CONTACT_ID, 1) 
    .withValue(Data.MIMETYPE, StructuredName.CONTENT_ITEM_TYPE) 
    .withValue(StructuredName.GIVEN_NAME, "Joe") 
    .withValue(StructuredName.FAMILY_NAME, "Bloggs") 
    .build()); 

ops.add(ContentProviderOperation.newInsert(Data.CONTENT_URI)
    .withValueBackReference(Data.RAW_CONTACT_ID,1)
    .withValue(ContactsContract.Data.MIMETYPE,ContactsContract.CommonDataKinds.Phone.CONTENT_ITEM_TYPE)
    .withValue(ContactsContract.CommonDataKinds.Phone.NUMBER, "086555555")
    .withValue(ContactsContract.CommonDataKinds.Phone.TYPE,ContactsContract.CommonDataKinds.Phone.TYPE_MOBILE)
    .build());

try{ 
    ctx.getContentResolver().applyBatch(ContactsContract.AUTHORITY, ops); 
}catch(Exception e){ 
    e.printStackTrace(); 
} 
```

这一切似乎都取决于 RAW_CONTACT_ID。我正在使用模拟器，一开始没有联系人。它适用于第一个联系人创建（RAW_CONTACT_ID = 0），但在最初的联系人之后似乎没有创建任何联系人，其中 RAW_CONTACT_ID 为 1 向上。有人对这种情况有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T00:59:47.697

我所做的是我首先创建了我的联系人，然后获取了那个新创建的联系人的 ID，并将所有其他联系人详细信息添加到该 ID

这是我的第一步，创建新联系人，然后找到该联系人的 ID

```
ArrayList<ContentProviderOperation> ops = new ArrayList<ContentProviderOperation>();
        ops.add(ContentProviderOperation.newInsert(ContactsContract.RawContacts.CONTENT_URI)
                .withValue(ContactsContract.RawContacts.ACCOUNT_TYPE, null)
                .withValue(ContactsContract.RawContacts.ACCOUNT_NAME, null)
                .build());
        ops.add(ContentProviderOperation.newInsert(ContactsContract.Data.CONTENT_URI)
                .withValueBackReference(ContactsContract.Data.RAW_CONTACT_ID, 0)
                .withValue(ContactsContract.Data.MIMETYPE, ContactsContract.CommonDataKinds.StructuredName.CONTENT_ITEM_TYPE)
                .withValue(ContactsContract.CommonDataKinds.StructuredName.PREFIX, prefix)
                .withValue(ContactsContract.CommonDataKinds.StructuredName.GIVEN_NAME, givenName)
                .withValue(ContactsContract.CommonDataKinds.StructuredName.MIDDLE_NAME, middleName)
                .withValue(ContactsContract.CommonDataKinds.StructuredName.FAMILY_NAME, familyName)
                .withValue(ContactsContract.CommonDataKinds.StructuredName.SUFFIX, suffix)
                .build());

        resolver.applyBatch(ContactsContract.AUTHORITY, ops);

        Cursor cursor = null;
        try
        {
            cursor = resolver.query(ContactsContract.Contacts.CONTENT_URI, baseProjection, ContactsContract.Contacts.DISPLAY_NAME + " = ? ", new String[] {displayname}, __DEFAULT_SORT_ORDER);

            if (cursor.moveToFirst())
            {
                String val;
                val = cursor.getString(cursor.getColumnIndex(ContactsContract.Contacts._ID));
                return val;
            }
        }
... 
```

然后我向我想要的联系人添加任何详细信息，如下所示：

```
ArrayList<ContentProviderOperation> ops = new ArrayList<ContentProviderOperation>();
                ops.add(ContentProviderOperation.newInsert(ContactsContract.Data.CONTENT_URI)
                        .withValue(ContactsContract.Data.CONTACT_ID, contactId)
                        .withValue(ContactsContract.Data.MIMETYPE, ContactsContract.CommonDataKinds.StructuredPostal.CONTENT_ITEM_TYPE)
                        .withValue(ContactsContract.Data.DATA5, poBox)
                        .withValue(ContactsContract.Data.DATA4, street)
                        .withValue(ContactsContract.Data.DATA7, city)
                        .withValue(ContactsContract.Data.DATA8, region)
                        .withValue(ContactsContract.Data.DATA9, postCode)
                        .withValue(ContactsContract.Data.DATA10, country)
                        .withValue(ContactsContract.Data.DATA2, type)
                        .withValue(ContactsContract.Data.DATA3, label)
                        .build()); 
```

# android - 边距动画慢吗？

> ID：14763480
> 
> 赞同：1
> 
> 时间：2013-02-08T00:02:18.890
> 
> 标签：android, animation, view

我想在 ViewPager 滚动时移动视图。我在视图寻呼机中找到了滚动监听器，带有参数 positionOffset，我用它来调整要移动的视图的左边距。

它有效，但滚动不再流畅。如果我将滚动侦听器注释掉，它会再次变得流畅。我制作动画的视图非常简单——只有一个纯色的小方块。requestLayout() 调用仅在此视图上完成。编码：

```
pager.setOnPageChangeListener(new ViewPager.OnPageChangeListener() {
    @Override
    public void onPageSelected(int position) {
    }
    @Override
    public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) {
        if (positionOffset != 0 || (positionOffset == 0 && position == 0)) {
            pars.leftMargin = (int)(scrollablePart * positionOffset);
            tabBG.requestLayout();
        }

    }

    @Override
    public void onPageScrollStateChanged(int state) {
    }
}); 
```

我不知道有什么问题，我有其他地方有一个视图，我以类似的方式制作动画（根据 -not pager-slider 调整边距）并且它很流畅。我也见过一个应用，其中一些视图的位置是根据寻呼机的滚动动态调整的，而且非常流畅。

任何想法？提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-08T01:21:14.570

任何涉及的动画`requestLayout()`都会很慢。如果您要做的只是移动视图，请使用 a`TranslateAnimation`或`View.offsetLeftAndRight()`or`View.setTranslationX()`等​​。不要使用`requestLayout()`或任何与布局相关的内容。

# android - 带有嵌入式 youtube 视频的 Android WebView，全屏按钮冻结视频

> ID：14763483
> 
> 赞同：31
> 
> 时间：2013-02-08T00:02:26.673
> 
> 标签：android, html, webview, youtube

我有一个加载 wordpress 博客的 android webview。一些博客文章包含 youtube 视频，我希望用户能够根据需要制作全屏。问题是 HTML5 全屏按钮在单击时什么都不做，而是冻结视图。有任何想法吗？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-02-28T03:43:05.007

This is something I've spent the last day or so tearing my hair out over. Based on various bits of code from around the web I've managed to get it working.

First, you need to create a custom `WebChromeClient` class, which implements the `onShowCustomView` and `onHideCustomView` methods.

```
private class MyWebChromeClient extends WebChromeClient {
    FrameLayout.LayoutParams LayoutParameters = new FrameLayout.LayoutParams(FrameLayout.LayoutParams.MATCH_PARENT,
            FrameLayout.LayoutParams.MATCH_PARENT);

    @Override
    public void onShowCustomView(View view, CustomViewCallback callback) {
        // if a view already exists then immediately terminate the new one
        if (mCustomView != null) {
            callback.onCustomViewHidden();
            return;
        }
        mContentView = (RelativeLayout) findViewById(R.id.activity_main);
        mContentView.setVisibility(View.GONE);
        mCustomViewContainer = new FrameLayout(MainActivity.this);
        mCustomViewContainer.setLayoutParams(LayoutParameters);
        mCustomViewContainer.setBackgroundResource(android.R.color.black);
        view.setLayoutParams(LayoutParameters);
        mCustomViewContainer.addView(view);
        mCustomView = view;
        mCustomViewCallback = callback;
        mCustomViewContainer.setVisibility(View.VISIBLE);
        setContentView(mCustomViewContainer);
    }

    @Override
    public void onHideCustomView() {
        if (mCustomView == null) {
            return;
        } else {
            // Hide the custom view.  
            mCustomView.setVisibility(View.GONE);
            // Remove the custom view from its container.  
            mCustomViewContainer.removeView(mCustomView);
            mCustomView = null;
            mCustomViewContainer.setVisibility(View.GONE);
            mCustomViewCallback.onCustomViewHidden();
            // Show the content view.  
            mContentView.setVisibility(View.VISIBLE);
            setContentView(mContentView);
        }
    }
} 
```

Basically, what is happening here is when the full screen button gets pressed, we're creating a new view to hold the video and hiding the main view. And then when full screen is closed, we do the opposite - get rid of the new view and display the original view.

You'll need to also add all those properties to your activity class:

```
private MyWebChromeClient mWebChromeClient = null;
private View mCustomView;
private RelativeLayout mContentView;
private FrameLayout mCustomViewContainer;
private WebChromeClient.CustomViewCallback mCustomViewCallback; 
```

And you probably want to make it close the fullscreen video when the back button is pressed:

```
@Override
public void onBackPressed() {
    if (mCustomViewContainer != null)
        mWebChromeClient.onHideCustomView();
    else if (myWebView.canGoBack())
        myWebView.goBack();
    else
        super.onBackPressed();
} 
```

Then it's just a matter of using your new class when you create your webview:

```
myWebView = (WebView) findViewById(R.id.webView1);
mWebChromeClient = new WMWebChromeClient();
myWebView.setWebChromeClient(mWebChromeClient); 
```

This works for me on Android 4.x. Not sure about earlier versions as my app isn't targeting them.

I found these links particularly useful: [WebView and HTML5 <video>](https://stackoverflow.com/questions/3815090/webview-and-html5-video) and [http://code.google.com/p/html5webview/source/browse/trunk/HTML5WebView/src/org/itri/html5webview/HTML5WebView.java](http://code.google.com/p/html5webview/source/browse/trunk/HTML5WebView/src/org/itri/html5webview/HTML5WebView.java)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-24T09:28:07.527

如果在应用程序中直接显示 YouTube 视频并不重要，您可以在包含视频信息 URL 时启动外部 YouTube 应用程序。

要捕获视频信息 URL，您需要使用 owerride`onLoadResource`方法：

```
new WebViewClient() {

    @Override
    public void onLoadResource(WebView view, String url) {

        if (url.startsWith("http://www.youtube.com/get_video_info?")) {
            try {
                String path = url.replace("http://www.youtube.com/get_video_info?", "");

                String[] parqamValuePairs = path.split("&");

                String videoId = null;

                for (String pair : parqamValuePairs) {
                    if (pair.startsWith("video_id")) {
                        videoId = pair.split("=")[1];
                        break;
                    }
                }

                if(videoId != null){
                    startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse("http://www.youtube.com"))
                            .setData(Uri.parse("http://www.youtube.com/watch?v=" + videoId)));
                    needRefresh = true;

                    return;
                }
            } catch (Exception ex) {
            }
        } else {
            super.onLoadResource(view, url);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-11-21T04:12:17.477

感谢@Mark Parnell 的回复，但他正在艰难地进行大量的 UI 更改，也许这种方式更干净、更容易理解：

单击全屏按钮时，chrome 客户端会为我们提供全屏视图，然后我们应该将其添加到我们的活动视图中：

在我们的活动中定义这个全局变量来保存全屏视图引用：

```
public class MyAmazingActivity extends AppCompatActivity {
    private View fullscreenView;
    //...
} 
```

然后 web chrome 客户端将通知我们在`onShowCustomView`和`onHideCustomView`方法中显示和隐藏全屏视图：

```
WebChromeClient webChromeClient = new WebChromeClient() {

            private ViewGroup rootView;
            private WebChromeClient.CustomViewCallback customViewCallback;

            @Override
            public void onShowCustomView(View view, CustomViewCallback callback) {

                //Destroy full screen view if already exists
                if (fullscreenView != null) {
                    callback.onCustomViewHidden();
                    return;
                }

                //Layout params to fit fullscreen view in our activity
                ViewGroup.LayoutParams layoutParams = 
                        new ViewGroup.LayoutParams(ViewGroup.LayoutParams.MATCH_PARENT,
                                ViewGroup.LayoutParams.MATCH_PARENT);
                //Catch root of current activity to add fullscreen view
                rootView = (ViewGroup) WebViewBaseActivity.this.webView.getRootView();

                //Store full screen view, we need it to destroy it out of scope
                fullscreenView = view;

                customViewCallback = callback;
                rootView.addView(fullscreenView, layoutParams);
            }

            @Override
            public void onHideCustomView() {
                //Make sure fullscreen view exists
                if (fullscreenView != null) {

                    //Remove fullscreen view from activity root view
                    rootView.removeView(fullscreenView);
                    fullscreenView = null;

                    //Tell browser we did remove fullscreen view
                    customViewCallback.onCustomViewHidden();
                }
            }

        }; 
```

最后在按下时删除全屏视图（用户期望这种行为）：

```
@Override
public void onBackPressed() {
    if (fullscreenView != null) {
        webChromeClient.onHideCustomView();
    }
} 
```

# xcode - 如何复制没有红色文本的 xcode 项目？

> ID：14763486
> 
> 赞同：0
> 
> 时间：2013-02-08T00:02:34.730
> 
> 标签：xcode

我最近复制了我的 Xcode 项目，以制作一个具有大约 80% 相同编码的项目，但左侧有红色文本的文件。这是什么意思，我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T00:08:58.217

项目所在目录中缺少显示为红色的文件。换句话说，它们存在于项目中，但不在磁盘上的预期位置。

解决方案，因为您说您的项目不相同（80% 重叠），如果您实际上不需要它们，只需从项目中删除红色文件。或者，在适当的位置向 Xcode 提供丢失文件的副本会将其颜色改回黑色。

# php - 查询禁止国家

> ID：14763488
> 
> 赞同：0
> 
> 时间：2013-02-08T00:02:54.477
> 
> 标签：php, mysql

Mysql & Php 问题：所以我有两个表（用户和设置），它们的结构是：

```
==> table_users
---->userid (10001)
---->username (miketyson)
---->usercountry (us)

==> table_settings
---->userkey (10002)
---->disallowcountries (us) 
```

那么，如果用户“miketyson”登录并且不允许来自“miketyson”的同一国家/地区的用户的所有记录不显示，那么查询是什么？（因为用户 10002 不允许来自国家“我们”的用户）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T00:20:11.103

```
SELECT
    userkey
FROM
    table_settings
    LEFT JOIN table_users ON (
        username = 'miketyson'
        AND disallowcountries = usercountry
    )
WHERE
    userid IS NULL 
```

# java - 将对象移向一个点 android

> ID：14763498
> 
> 赞同：1
> 
> 时间：2013-02-08T00:03:28.820
> 
> 标签：java, android

我在子弹对象的初始化中有这个：

```
 x = startX;
    y = startY;
    double distance = Math.sqrt(((endX - x) ^ 2) + ((endY - y) ^ 2));
    speedX = (6 * (endX - x)) / distance;
    speedY = (6 * (endY - y)) / distance; 
```

它会到我在屏幕上触摸的地方，但我触摸得越远，它走得越快。这在纸上效果很好，我已经尝试过不同的长度，它应该可以工作，但是子弹需要在从玩家到每一步触摸的点的线上移动 6 个像素。它的更新方法当然会移动。但是为什么子弹以不同的速度移动呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T00:27:47.727

如果我记得我的 Java 运算符...

代替

```
double distance = Math.sqrt(((endX - x) ^ 2) + ((endY - y) ^ 2)); 
```

和

```
double distance = Math.sqrt(Math.pow(endX - x, 2) + Math.pow(endY - y, 2)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T00:30:35.863

假设所有测量值都以像素为单位，并且您希望速度为每步 6 个像素，那么您可以使用一点点三角函数来计算速度：

```
double theta = Math.atan2(endY - startY, endX - startX);
velX = 6 * Math.cos(theta);
velY = 6 * Math.sin(theta); 
```

请注意，我像物理学家一样使用术语“速度”和“速度”；speed 是一个标量值，velocity 是一个具有大小和方向的向量。

# ruby-on-rails - 在 Rails 应用程序中使用 mongoid 的 Mongo 查询导致光标超时错误

> ID：14763503
> 
> 赞同：12
> 
> 时间：2013-02-08T00:03:35.560
> 
> 标签：ruby-on-rails, mongodb, mongoid

我的 Rails 应用程序中有一个 mongo 查询超时，因为集合很大。

```
FbCheckin.where(ext_fb_place_id: self.ext_fb_place_id).all 
```

我从文档中读到，您可以添加一个`timeout`选项来防止光标超时，并显示以下消息：

```
Moped::Errors::CursorNotFound: The operation: "GET MORE" failed with error 
```

我尝试了几种方法，包括

```
FbCheckin.where(ext_fb_place_id: ext_fb_place_id, {:timeout=>false}).all 
```

和

```
FbCheckin.find(ext_fb_place_id: ext_fb_place_id, {:timeout=>false}).all 
```

但这些都不能阻止光标超时。

有谁知道我如何进行此查询并在`FbCheckins`没有光标提前超时的情况下收集所有信息？

谢谢

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-11-14T20:27:48.723

您想要的是在查询 mongodb 时将游标超时设置为 false。

这是您可以使用 mongoid 3 执行的操作：

```
FbCheckin.where(...).no_timeout.each do |fb_checkin|
  "do something with fb_checkin"
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-02-23T13:13:42.150

在使用Mongo Ruby 驱动程序时，将**“no_cursor_timeout”**选项与查找查询一起使用。

这将禁用所有游标超时。默认情况下，MongoDB 会尝试杀死所有处于非活动状态超过 10 分钟的游标。

更多信息可以在[这里](https://itisatechiesworld.wordpress.com/2017/02/23/mongoerroroperationfailure-cursor-not-found/)找到。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-03-04T05:18:38.760

mongoid 默认会终止长时间查询，然后引发此错误

您可以更改 mongoid.yml 中的 raise_not_found_error 选项以避免此错误

例如：

```
production:
  sessions:
   default:
     database: local
     hosts:
      - localhost:27017
     options:
       allow_dynamic_fields: true
       raise_not_found_error: false 
```

# c++ - Lambda 捕获和内存管理

> ID：14763507
> 
> 赞同：6
> 
> 时间：2013-02-08T00:03:49.150
> 
> 标签：c++, memory-management, c++11, lambda

当我在 C++11 lambda 中通过引用捕获对象时，让对象超出范围，然后执行 lambda，它仍然可以访问该对象。当我执行以下代码时，lambda 调用仍然可以访问该对象，尽管已经调用了析构函数！有人可以解释为什么这有效以及为什么我没有收到运行时错误吗？

```
#include <iostream>

class MyClass {
public:
    int health = 5;
    MyClass() {std::cout << "MyClass created!\n";}
    ~MyClass() {std::cout << "MyClass destroyed!\n";}
};

int main(int argc, const char * argv[])
{
    std::function<bool (int)> checkHealth;
    if(true) {
        MyClass myVanishingObject;
        checkHealth = [&myVanishingObject] (int minimumHealth) -> bool {
            std::cout << myVanishingObject.health << std::endl;
            return myVanishingObject.health >= minimumHealth;
        };
    } // myVanishingObject goes out of scope

    // let's do something with the callback to test if myVanishingObject still exists.
    if(checkHealth(4)) {
        std::cout << "has enough health\n";
    } else {
        std::cout << "doesn't have enough health\n";
    }
    return 0;
} 
```

这是输出：

```
MyClass created!
MyClass destroyed!
5
has enough health 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-08T00:11:57.563

根据[cppreference.com 网站的 lambda 函数文档](http://en.cppreference.com/w/cpp/language/lambda)

> **悬空引用**
> 
> 如果一个实体被隐式或显式引用捕获，并且在实体的生命周期结束后调用闭包对象的函数调用运算符，则会发生未定义的行为。C++ 闭包不会延长捕获的引用的生命周期。

换句话说，您已经通过引用捕获了对象，然后让对象的生命周期结束，这意味着调用 lambda 会导致未定义的行为。由于 UB 可能工作的一种可能方式是“即使对象死了，对象似乎还活着并且很好”，我怀疑您看到未定义的行为表现为似乎没有出现任何问题。

我怀疑如果编译器为临时变量分配了一个唯一的堆栈位置，就会出现这种情况。这意味着在对象的生命周期结束后，在`main`返回之前，内存不会被任何东西触及。因此，您会看到变量`5`像以前一样保存该值，因为在它上面没有写任何其他内容。

希望这可以帮助！

# jdbc - DB2 JDBC 驱动程序中的无限循环

> ID：14763508
> 
> 赞同：2
> 
> 时间：2013-02-08T00:04:06.250
> 
> 标签：jdbc, db2, spring-batch

我正在使用 Spring Batch、DB2 和 JDBC v9.5 FP0 驱动程序，有时在从数据库读取进程的任何步骤中，我都会收到下一个错误

> org.springframework.batch.core.step.AbstractStep execute 在 com 的 java.util.HashMap.getEntry(Unknown Source) at java.util.HashMap.get(Unknown Source) 处执行步骤 java.lang.StackOverflowError 时遇到错误。 ibm.websphere.rsadapter.DB2DataStoreHelper.findMappingClass(DB2DataStoreHelper.java:529) 在 com.ibm.websphere.rsadapter.DB2DataStoreHelper.findMappingClass(DB2DataStoreHelper.java:545) 在 com.ibm.websphere.rsadapter.DB2DataStoreHelper.findMappingClass(DB2DataStoreHelper.爪哇：545）
> 
> ...
> 
> 无限循环
> 
> ...
> 
> 在 com.ibm.websphere.rsadapter.DB2DataStoreHelper.findMappingClass(DB2DataStoreHelper.java:545) 在 com.ibm.websphere.rsadapter.DB2DataStoreHelper.findMappingClass(DB2DataStoreHelper.java:545) 在 com.ibm.websphere.rsadapter.GenericDataStoreHelper.isConnectionError (GenericDataStoreHelper.java:433) 在 com.ibm.ws.rsadapter.AdapterUtil.isConnectionError(AdapterUtil.java:1221) 在 com.ibm.ws.rsadapter.jdbc.WSJdbcStatement.executeBatch(WSJdbcStatement.java:731) 在 org. springframework.jdbc.core.JdbcTemplate$4.doInPreparedStatement(JdbcTemplate.java:881) at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:591) at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate .java:619) 在 org.springframework.jdbc.core.JdbcTemplate.batchUpdate(JdbcTemplate.java:866) 在 org.springframework.jdbc.core。simple.SimpleJdbcTemplate.doExecuteBatchUpdateWithNamedParameters(SimpleJdbcTemplate.java:287) at org.springframework.jdbc.core.simple.SimpleJdbcTemplate.batchUpdate(SimpleJdbcTemplate.java:261) at org.springframework.batch.item.database.JdbcBatchItemWriter.write(JdbcBatchItemWriter.爪哇：177）

解决我只是重新运行这个过程，一切都很好，但无限循环很奇怪。我能做些什么来避免它？

# grep - 为什么 cygWin grep 会出错？

> ID：14763511
> 
> 赞同：0
> 
> 时间：2013-02-08T00:04:13.727
> 
> 标签：grep, cygwin

我正在尝试在我的所有 C# 文件中递归搜索以下字符串。为什么我gettig这个错误？我花了很长时间来安装 CygWin，我一直在使用 Unix，但这不像 Unix 的 grep。值得注意的是，我将 Cygwin 用于我的 WINdows7。谢谢

```
grep -R 'new IIntf' *.*
grep: *.*: No such file or directory

grep -R 'new IIntf' *.cs
grep: *.cs: No such file or directory 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T00:08:18.830

`*.*`当前目录中可能没有匹配的文件。也许你的意思是`grep -R 'new IIntf' .`

# c - 为什么我的 ICMP 序列号没有增加？（C 套接字编程）

> ID：14763513
> 
> 赞同：0
> 
> 时间：2013-02-08T00:04:34.553
> 
> 标签：c, sockets, ping, icmp, traceroute

是否有人可以帮助我解决为什么我的 ICMP 序列号不会在每个请求上增加，当它用作 ping 程序时，它会在每次 ping 时增加序列号。还有人知道为什么我的往返时间显示为负数吗？当这是一个 ping 程序时，这也可以正常工作。

请假设所有代码“有效”，我删除了一些代码以便于阅读。

```
void
respond (int signum) {
   struct sockaddr_storage peer_addr;
   socklen_t               peer_addrlen;
   struct sockaddr_in      addr;
   struct sockaddr_in      dstaddr;
   struct iphdr   *        ip;
   struct icmphdr *        icmp;
   struct timeval *        sent;
   int skt;
   int sequence = 0;
   long int length;
   fd_set rdfds;
   int ready;
   int rtt;
   char buff [BUF_SIZE];

   /* Create and check Socket Number */
   skt = socket (AF_INET, SOCK_RAW, IPPROTO_ICMP);

    int ttl = 0;
    setsockopt(skt, IPPROTO_IP, IP_TTL, &ttl, sizeof(ttl)) < 0;

       /* Check Socket */
       if (skt < 0) {
          perror ("socket()");
          exit (1);
       }

       /* Set IP Addresses */
       addr.sin_family      = AF_INET;
       addr.sin_port        = 0;
       addr.sin_addr.s_addr = INADDR_ANY;

       /* Check Socket Bind */
       if (bind (skt, (struct sockaddr *)&addr, sizeof(struct sockaddr_in))) {
          perror ("Can't bind socket");
          exit (1);
       }

/* START SEND LOOP*/
int i;
for (i = 0; i < 7; i++){
        ttl+=1;
        setsockopt(skt, IPPROTO_IP, IP_TTL, &ttl, sizeof(ttl));

        /* IP Buffer */
       ip = (struct iphdr *)buff;
       peer_addrlen = (socklen_t) sizeof (struct sockaddr_storage);
       memset (&dstaddr, 0, sizeof(struct sockaddr_in));
       dstaddr.sin_addr.s_addr = inet_addr(HOSTADDR);
       dstaddr.sin_family = AF_INET;

       /* ICMP Buffer */
       memset (buff, 0, sizeof(buff));
       icmp = (struct icmphdr *) buff;
       icmp->type   = ECHO_REQ;
       icmp->id     = htons(getpid( ) & 0xffff);
       icmp->seqNum = htons(sequence++);

       /* Check Send Time */
       if (gettimeofday ((struct timeval *)icmp->data, NULL)) {
          perror ("Can't establish send time");
          exit (1);
       }

       /*Calculating packet size*/
       length = sizeof(struct icmphdr) + sizeof(struct timeval);
       icmp->checksum = ~(sum (0, buff, length));

       /* Packet too small, ERROR
       SEND Request             */
       if (sendto (skt, buff, length, 0,
             (struct sockaddr *) &dstaddr, sizeof(struct sockaddr_in)) <= 0) {
          perror ("sendto()");
          exit (1);
        }

       /* Define File Descriptor */
       timeout.tv_sec  = 1;
       timeout.tv_usec = 1;
       FD_ZERO(&rdfds);
       FD_SET (skt, &rdfds);

       /* Select Data from File Descriptor */
       ready = select (skt + 1, &rdfds, NULL, NULL, &timeout);
       if (ready < 0) {
          perror ("Select()");
          exit (1);
       }

        /* Recieve Reply */
        memset (buff, 0, sizeof(buff));
       if (recvfrom (skt, buff, sizeof(buff), 0,
            (struct sockaddr *) &peer_addr, &peer_addrlen) <= 0) exit (1);

       /* Check Time Stamp */
       if (gettimeofday (&end, NULL)) {   // Timestamp reception
          perror ("Can't establish time of receipt");
          exit (1);
       }

       /* Check IP Protocol */
       if (ip->version != 4 ||
           sum (0, buff, sizeof(struct iphdr)) != 0xffff ||
           ip->protocol != ICMP)
          exit(1);

       /* Get IP Payload legth and ICMP Address*/
       length = ntohs(ip->length) - ip->hdrlen * 4;       // Length of IP payload
       icmp = (struct icmphdr *)((uint32_t *)ip + ip->hdrlen);   // Find ICMP hdr

       /* Check ICMP response type*/
       if (icmp->type == 11){
           printf("");
           }

      /* if (icmp->type != ECHO_REPL || sum (0, icmp, length) != 0xffff) {
          fprintf (stderr, "Received %s\n", messages[icmp->type]);
          //exit (1);
       } */

       /*   Find the difference between sent and end times in 10s of ms */
       sent = (struct timeval *)icmp->data;
       if ((rtt = (end.tv_usec - sent->tv_usec) / 10) < 0)
          rtt += 10000;  // We've cycled to a new second
       rtt += (end.tv_sec - sent->tv_sec) * 10000;  // Add any seconds

       /* PRINT ICMP REPLY*/
       printf ("%ld bytes from %s: icmp_req=%d ttl=%d time= %0.1f ms\n",
      length,
      iptos(ntohl(ip->srcip)),
      ntohs(icmp->seqNum),
      ip->ttl,
      ((float)rtt) / 10);

} /*END SEND LOOP

   /* 3 Second Probe */
   alarm (5);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T00:18:56.273

在此代码中，您永远不会将*序列*设置为 0，只是声明它是一个 int。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T00:33:46.453

在这段代码中：

```
 /* IP Buffer */
   ip = (struct iphdr *)buff;
   peer_addrlen = (socklen_t) sizeof (struct sockaddr_storage);
   memset (&dstaddr, 0, sizeof(struct sockaddr_in));
   dstaddr.sin_addr.s_addr = inet_addr(HOSTADDR);
   dstaddr.sin_family = AF_INET;

   /* ICMP Buffer */
   memset (buff, 0, sizeof(buff));
   icmp = (struct icmphdr *) buff;
   icmp->type   = ECHO_REQ;
   icmp->id     = htons(getpid( ) & 0xffff);
   icmp->seqNum = htons(sequence++); 
```

您将缓冲区`buff`视为以 IP 标头和 ICMP 标头开头。我相信您需要将`icmphdr`指针偏移 IP 标头的大小，除非您的`icmphdr`结构在其开头包含一个`iphdr`（Linux 版本没有）：

```
icmp = (struct icmphdr*)(buff + sizeof(iphdr)); 
```

此外，在将 IP 标头`memset (buff, 0, sizeof(buff));`写入缓冲区之后，您将覆盖 IP 标头。

# r - ggplot2 中基于标准的“Bin”连续值以获得更多不同的颜色（如因子级别着色）？

> ID：14763514
> 
> 赞同：4
> 
> 时间：2013-02-08T00:04:58.867
> 
> 标签：r, ggplot2

现在，我只是使用这样的东西：

```
test_data$level <- rep("", nrow(test_data))
test_data[test_data$value <= 1, ]$level <- "1"
test_data[test_data$value > 1 & test_data$value <= 2, ]$level <- "2"
...
test_data[test_data$value > 4 & test_data$value <= 5, ]$level <- "5" 
```

只是想知道在 R 中是否有更好的方法可以做到这一点，或者只是`scale`通过应用一些参数`ggplot2`来进行分类。

* * *

可能有几种方法可以解决这个问题，所以很难准确地表达我的问题。这是要点......我有这样的数据：

```
 set.seed(123)
 test_data <- data.frame(var1 = rep(LETTERS[1:3], each = 5),
   var2 = rep(letters[1:5], 3),
   value = runif(30, 1, 5))
 test_data
   var1    value
1     A 2.150310
2     B 4.153221
3     C 2.635908
4     D 4.532070
5     E 4.761869
6     F 1.182226
7     G 3.112422
8     H 4.569676
9     I 3.205740
10    J 2.826459 
```

我有更多的数据点，并且正在绘制这样的图：

```
library(ggplot2)
p <- ggplot(test_data, aes(x = var1, y = var2, colour = value))
p <- p + geom_jitter(position = position_jitter(width = 0.1, heigh = 0.1))
p 
```

这给出了这样的东西：

![在此处输入图像描述](../Images/3cbf6339b3a36d7ab172bc46b62d51ec.png)

我的实际数据来自 1-5 个评分的主观评估，但我将类似的问题捆绑在一起并将它们平均在一起，因此它们不再是整数。

我正在绘制每个因素组合的评分，以可视化哪些组合产生了更高的评分。默认的连续比例并没有真正“流行”，我想让颜色比例来处理这些值（0-1、1-2、... 4-5）的“箱”，就像`scale_colour_discrete`这样为因素。

所以，我的问题：

1) ggplot2 是否可以通过某种方式“bin”这些，`scale_colour_continuous`这样即使这是连续数据，我也可以应用默认因子级别着色方案？

2）如果没有，有没有更简单的方法来创建一个新的向量，我根据标准用数字/字母代替我的值？我有点 R 新手，所以我不确定除了一堆`if()`或条件语句（`test_data[test_data > 0 & test_data < 1, "values"] <- "a"`或类似的东西）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T00:12:17.047

最简单的解决方案是

```
ggplot(transform(test_data, Discrete=cut(values, seq(0,5,1), include.lowest=T),... 
```

现在，您`data.frame`将根据该列包含一列因素`values`，因此您可以`aes(..., color=Discrete,...)`在`ggplot`. `test_data`完成绘图后，将保留的格式。

当然，要保留一个离散列，最好的选择是：

```
test_data$Discrete <- cut(values, seq(0,5,1), include.lowest=T) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T00:15:56.220

您可以从彩条图例切换到`discrete`- 样式图例。

```
library(RColorBrewer) # for brewer.pal
ggplot(test_data, aes(x = var1, y = var2, colour = value)) +
   geom_jitter(position = position_jitter(width = 0.1, heigh = 0.1)) + 
    scale_colour_gradientn(guide = 'legend', colours = brewer.pal(n = 5, name = 'Set1')) 
```

![在此处输入图像描述](../Images/b19df73ff29808a9fe297a9c65d5e921.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T00:19:55.353

从字面上看，当我使用当前方法发布更新时，我想到了另一种方法来做到这一点......

```
p <- ggplot(test_data, aes(x = var1, y = var2, colour = factor(value)))
p <- p + geom_jitter(position = position_jitter(width = 0.1, height = 0.1))
p <- p + scale_colour_discrete(breaks = 1:5)
p 
```

愚蠢的简单；只需强制将连续值视为单个因子水平，然后通过`breaks`ggplot2 控制色标。我看到还有其他一些答案，虽然我不熟悉这些方法，所以我想我会让投票决定最佳答案。

# c# - 在 C# Datatable 中检索特定的数据行

> ID：14763518
> 
> 赞同：0
> 
> 时间：2013-02-08T00:05:21.187
> 
> 标签：c#, asp.net

我在 C# 中有一个名为“table”的数据表，如下所示：

```
 ID   Value
 10    A
 20    B
 30    C 
```

（它确实有大约 1200 行，但我试图简化它）我的目标是能够在这个数据表中打印特定的行。例如，如果我想打印第二行（行索引 1），我将使用以下内容：

```
Response.Write(table.Rows[1]["Value"].ToString()); 
```

这会打印出我想要的值“B”，但是有没有办法使用“ID”列来打印该特定值而不是使用行索引 1。我希望能够链接 ID 10和价值 B 以某种方式在一起。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T00:09:17.430

如果`ID`被定义*为主键*，这应该`B`通过它的`ID`键查找：

```
Response.Write(table.Rows.Find(20).["Value"].ToString()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T00:10:46.687

你可以使用 for each 循环遍历你的数据表，当 ID 等于 10 时，你就可以做你想做的事

会是这样的：

```
for each row as datarow in datatable.rows
   if row.Items["ID"] = 10 Then
    //do something
   end if 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T00:12:48.273

如果 ID 未设置为 PK（或者您想查询另一个字段），您可以使用 Linq 查询

```
var chosenRow = (from row in table.AsEnumerable()
                    where row.Field<int>("ID") == 10
                    select row).First(); 
```

`chosenRow`是第一个`DataRow`满足`where`子句中设置的标准的对象。所以你可以：

```
Response.Write(chosenRow["Value"].ToString()); 
```

# cognos - 如何在 Cognos Report Studio 中编写 SQL 查询以显示范围内的值

> ID：14763521
> 
> 赞同：1
> 
> 时间：2013-02-08T00:05:39.687
> 
> 标签：cognos

我有一个列 days ，其中包含 1,2,3,............365,433,892,1200,1600 ......

我想写一个查询来显示天数范围.. 0-30 31-60 61-90 91-180 181-365 1-2 年

> 2年全部

谁能帮我看看他的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T22:05:44.880

您可以在报告逻辑中对其进行硬编码（如果天数介于 0 到 30 之间，那么 days_range = '0-30' 当天数介于 31 到 60 之间时...），但更好的解决方案是设置一个参考表来存储您的范围及其标签。类似于包含 RANGE_LABEL、RANGE_FROM、RANGE_THROUGH 列的表，然后执行类似的操作

```
select base_query.*, Range_Types.RANGE_LABEL
from base_query 
join Range_Types on base_query.days between RANGE_FROM and RANGE_THROUGH 
```

# 3d - Youtube：更改 3D 观看方式的参数？

> ID：14763532
> 
> 赞同：0
> 
> 时间：2013-02-08T00:06:37.877
> 
> 标签：3d, youtube-api

我正在寻找允许我设置 3D 观看方法的 Youtube 嵌入式播放器参数。我在 Youtube 文档中找不到这样的参数。

是否有一些未记录的参数？如果没有，这将是不久的将来的一个不错的功能。

这个想法是向人们发送绿色/品红色立体眼镜（而不是红色/青色）和 3D 视频的链接。收件人必须手动更改设置会很麻烦，所以我想让它尽可能简单，以便增加观看视频的机会。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T21:08:49.360

我们目前在 iframe 播放器 API 中没有此功能。您能否使用此处描述的流程提交功能请求：http: [//apiblog.youtube.com/2012/09/the-youtube-api-on-stack-overflow.html](http://apiblog.youtube.com/2012/09/the-youtube-api-on-stack-overflow.html)？

# replication - 使用 nservicebus 进行 ravendb 索引复制

> ID：14763533
> 
> 赞同：0
> 
> 时间：2013-02-08T00:06:53.523
> 
> 标签：replication, ravendb, nservicebus

为了在 RavenDB 最新的稳定版本中使索引复制更加健壮，我希望将 NServiceBus 引入自定义索引复制包中，这样`ReplicateToSqlIndexUpdateBatcher`当它使命令出队并打开与 sql 的连接以执行时，我宁愿将它们放在总线上，稍后以容错的方式进行处理。我已将相关配置条目放在 上`raven.server.exe.config`，给定`IStartableBus`ctor ，在我从 中获取`ReplicateToSqlIndexUpdateBatcher`的 dispose 方法中，使命令出队，将其映射到消息和它，但有些方法我一直没有收到指定为的消息目的地乌鸦工作室的错误。我已将消息映射添加到配置中，并尝试在获取`ReplicateToSqlIndexUpdateBatcher``IBus``IStartableBus``Bus.Send``IStartableBus`，但无济于事。我在这里想念什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T06:17:57.157

没有必要这样做。我们有一个新的 SQL 复制包，可以稳健地处理这种情况。

# excel - Excel VBA：在另一个工作表中设置不连续范围（多行/列）等于连续范围（多行/列）

> ID：14763534
> 
> 赞同：0
> 
> 时间：2013-02-08T00:06:59.630
> 
> 标签：excel, vba, loops, set, range

目标：编写 VBA 子程序，它将设置一个不连续的范围，特别是 13 列 - 每隔一列 - 等于点击事件时 13 列宽和 132 行长的连续数据范围。

我有两个财务报表，我希望能够并排比较。单击活动的 x 按钮，在财务报表 1 的列之间插入列，然后从财务报表 2 中提取列（包含在另一张表中）并将它们显示在财务报表 1 中相应列的旁边。

仅使用 VBA 代码。采取什么是

总计|一月|二月|三月....

总计|总计|一月|一月|二月|二月|三月|三月.....

我开发的当前代码运行速度非常慢，并且由于某种原因在每列之间插入了一个“June”列。

帮助！

```
Sub BudgetBudgetCheck_Click()

If BudgetActual.Value = "True" And BudgetBudgetCheck.Value = "True" Then
    For colx = 6 To 36 Step 2
    Columns(colx).Insert shift = xlRight
    Next
    End Sub

Private Sub BudgetActual_Click()
For i = 4 To 28 Step 2
For j = 2 To 14
Columns(i).Value = Worksheets("P&L - Monthly Budget").Columns(j).Value
Next
Next
End If
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T01:37:18.180

```
Dim rngOne as range, rngTwo as range, x as long, col_offset

Set rngOne = worksheets("statement1").Range("A1").resize(132,13)
Set rngTwo = worksheets("statement2").Range("A1").resize(132,13)

with worksheets("summary")
    .usedrange.clearcontents
    for x=1 to 13
        col_offset = (x-1)*2      
        rngOne.columns(x).copy .cells(1,col_offset+1)
        rngTwo.columns(x).copy .cells(1,col_offset+2)
    next x
end with 
```

# javascript - 三星 SDK 中对象 ID 的奇怪错误

> ID：14763535
> 
> 赞同：1
> 
> 时间：2013-02-08T00:07:07.273
> 
> 标签：javascript, html, samsung-smart-tv

对于下面的第二行代码，我收到一条奇怪的 HTML 错误消息。我正在为三星 SMART TV SDK 编写应用程序。这使用 Eclipse IDE 并使用三星智能电视模拟器。

```
<object id="pluginPlayer" classid="clsid:SAMSUNG-INFOLINK-PLAYER"></object>
<object id="pluginAudio" classid="clsid:SAMSUNG-INFOLINK-AUDIO"></object> 
```

我真的很困惑，因为错误消息指出“具有相同的 id：clsid”。这来自视频教程。有没有我不包括的特定库？需要这些插件才能使用低级电视功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T21:01:29.073

不要混淆。我也是，直到我意识到这只是 Eclipse 术语中的一个错误......它实际上与应用程序无关。忽略它并继续使用您的应用程序 - 它会很好。我浪费了一整天，直到我意识到情况确实如此。

# php - __autoload() 等效于非类函数？

> ID：14763539
> 
> 赞同：0
> 
> 时间：2013-02-08T00:07:16.043
> 
> 标签：php

我一直遇到想使用`str_getcsv()`or之类的有用函数的问题`quoted_printable_encode()`，但发现它仅在 PHP 5.3 之间出现。我希望我正在编写的这段代码至少与 5.2 兼容，但我不想编写一堆专门的代码。

我已经养成了从 PHP.net 注释中获取替代函数的习惯，将它们存储在有用的命名文件中，如`func.quoted_printable_encode.php`，并在每个我想调用它们的地方编写如下所示的块。

```
if( ! function_exists('quoted_printable_encode') ) {
    $funcfile = 'func.quoted_printable_encode.php';
    if( file_exists($funcfile) && is_readable($funcfile) ) {
        require('func.quoted_printable_encode.php');
    } else {
        Throw new Exception('Cannot invoke function: quoted_printable_encode');
    }
} 
```

这似乎与`__autoload()`类和`__call()`对象方法非常相似，但我找不到任何关于全局函数的信息。这样的事情是否存在，还是我必须将所有这些额外的功能硬塞到某个头文件中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T00:25:51.633

没有办法在 PHP 中自动加载函数。有[一个 RFC](https://wiki.php.net/rfc/autofunc)，但尚未实施（可能不会实施）。

如果你真的想自动加载函数，那么创建一个帮助类将函数实现为静态方法可能是有意义的。在框架中这样做是[很](http://kohanaframework.org/3.3/guide-api/Arr) [常见的。](http://ellislab.com/codeigniter/user-guide/helpers/array_helper.html)

# jquery - 使用 jQuery 将容器滚动到特定的 DIV

> ID：14763541
> 
> 赞同：1
> 
> 时间：2013-02-08T00:07:39.573
> 
> 标签：jquery, html, scroll

我正在使用以下 jQuery 函数：

```
$(document).ready(function () {  
    var top = $('.aside').offset().top - parseFloat($('.aside').css('marginTop').replace(/auto/, 0));
    $(window).scroll(function (event) {
        // what the y position of the scroll is
        var y = $(this).scrollTop();

        // whether that's below the form
        if (y >= top) {
            // if so, ad the fixed class
            $('.aside').addClass('fixed');
        } else {
            // otherwise remove it
            $('.aside').removeClass('fixed');
        }
    });
}); 
```

现在我希望固定的 DIV (.aside) 停止在特定的 DIV 处。

请看我的CSS。它是一个 2 列布局，左侧有一个主 .content 列，右侧有一个 .aside 栏。我希望 .aside 栏滚动到 .content 列的末尾。至少当 .aside 栏到达页脚时。希望你能理解我=）

```
.content {
  float:left;
}

.container.sticky .row {
  position: relative;
  background: #fff;
}

.aside-wrapper { /* required to avoid jumping */
  left: 640px;
  position: absolute;
}

.aside {
  position: absolute;
  top: 0;
}

.aside.fixed {
  position: fixed;
  top: 0;
} 
```

我怎样才能做到这一点？

# methods - 如何通过其他方法调用私有方法？

> ID：14763543
> 
> 赞同：0
> 
> 时间：2013-02-08T00:08:17.377
> 
> 标签：methods, call, private, invoke

我对通过属于同一类的另一个方法（公共）调用私有方法感到困惑，`class.Once`我被告知我必须创建该类的一个对象，然后通过该对象调用私有方法，但是在这个论坛的一个问题中，我有被告知我不需要使用对象。

```
public class Train() {

    private void method1{......method definition..... }

    public void method2{......how to invoke method1??}

} 
```

我可以通过使用简单地调用第二个方法中的第一个方法，`method1();` 还是应该通过创建类的对象来调用它和`Object_of_Train.method1();`.

我应该使用哪一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T00:11:16.417

在类中，您应该能够调用 method1();

在类之外，您需要从该类的实例中调用它，并且只能访问公共方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T00:16:04.287

用于`this.method1();`从 method2() 或类中的任何其他非静态方法调用。

# asp.net-web-api - web-api中的细粒度访问控制

> ID：14763545
> 
> 赞同：0
> 
> 时间：2013-02-08T00:08:23.787
> 
> 标签：asp.net-web-api, user-permissions

这更像是一个架构问题。假设我们有不同类型的用户登录到系统，并且我们有一个“客户”实体。根据用户的权限，我可能想要返回不同的“客户”属性子集。我也可能希望只允许编辑某些属性。

关于走哪条路有什么建议吗？以下是我迄今为止想到的选项：

1.  对于每个权限级别，扩展模型 - 并根据用户权限返回最远的后代。在输入端，接受最远的后代并仅将其转换为正确的后代。（似乎有很多隐含的逻辑 - 似乎不是很优雅）
2.  创建不同的方法（杂乱的 API，意味着比我想公开的更多的功能）

还有其他建议吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T12:16:28.423

您所描述的是 XACML 的一个明确的用例。XACML 是可扩展访问控制标记语言。它允许您使用属性（关于用户、资源、环境......）定义细粒度的访问控制。

它是基于策略的，这意味着您可以编写如下内容：

*   用户可以查看与用户在同一区域的客户记录
*   用户可以编辑他们直接分配到的客户记录
*   审核员可以查看整个业务部门的客户记录，敏感字段除外

有几个 XACML 引擎（WSO2，Java 的 Heras AF；[.NET 的 Axiomatics](http://www.axiomatics.com/policy-decision-points.html)）。

我在 .NET 4.0 框架中开发了很多 ASP .NET Web 应用程序，并设法在表示层、WCF 层和数据层应用授权。请随时 ping 我以获取更多信息。

# javascript - 链接到动态锚点

> ID：14763546
> 
> 赞同：0
> 
> 时间：2013-02-08T00:08:35.703
> 
> 标签：javascript, anchor, deep-linking, dynamic-content

我有一个讲师数据的 json 数组，该数组输入模板并为每个讲师生成一张“卡片”。每个讲师都包含一个命名的锚点，我希望能够从外部页面链接到各种生成的锚点。IE`instructors.htm#MrsTaylorGreen`

似乎当卡片有机会生成时，浏览器的所有跳转到锚点行为都已完成。

[我正在考虑从这里](https://stackoverflow.com/questions/6677035/jquery-scroll-to-element)派生的这部分 jQuery

```
// page load, draw instructor cards then...
// scroll to the named anchor if there is one
var anchor = document.location.href.split("#")[1];
if($("#" + anchor).length)
    $('html, body').animate({
        scrollTop: $("#" + anchor).offset().top
    }, 2000); 
```

这是必要的吗？还是有更有效的替代链接到动态锚点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T01:28:09.813

改用它来获取哈希（用于您的锚点）：

```
var anchor = window.location.hash; 
```

进而：

```
if ($(anchor).length > 0)
    $('html, body').animate({
    scrollTop: $(anchor).offset().top
}, 2000); 
```

`document.location.href.split("#")[1];`如果 URL 中没有散列，那么获取散列的方式可能（并且将会）产生错误；因为在这种情况下，数组（来自拆分）将只有一个元素。

# jpa - 选择一个实体在哪里包含一个列表，哪些元素不在另一个列表中

> ID：14763566
> 
> 赞同：1
> 
> 时间：2013-02-08T00:10:24.923
> 
> 标签：jpa, jpql

我的问题是基于另一个问题：[Selecting where an entity contains a list thats that is a subset of another list](https://stackoverflow.com/questions/4638543/selecting-where-an-entity-contains-a-list-thats-a-subset-of-another-list)

但我想做的是：

我正在编写一个 JPQL 查询，我有以下场景。我有一个包含标签列表的问题实体。我想选择列表中**不包含任何**给定标签的所有问题。我如何用 JPA 做到这一点？

我想做类似 SELECT x FROM Question x WHERE x.tags 'do not contains any' :tags

我尝试使用“NOT IN”，但它不起作用。在这种情况下，它至少返回一个标签不在“标签”列表中的所有问题。我只想返回所有标签不在“标签”列表中的问题。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T12:40:19.887

尝试在列表中查找具有项目的员工的子选择，然后在主查询中使用不存在。就像是

```
SELECT x FROM Question x WHERE not exists( select tag from x.tags tag where tag in  :tags ) 
```

# windows-phone-7 - 启用 Windows Phone 7.8？与 2010 年相比？

> ID：14763582
> 
> 赞同：0
> 
> 时间：2013-02-08T00:12:10.803
> 
> 标签：windows-phone-7

我下载[了适用于 Windows Phone 7.8 的 Windows Phone SDK 更新](http://www.microsoft.com/en-ca/download/details.aspx?id=36474)并安装了它。但是，我没有看到他们正在谈论的这两个新模拟器。我必须做些什么才能得到它们。

我在一个 Windows 8 盒子上，上面有 VS 2010 和 Vs 2012，并且没有显示这些 7.8 的模拟器。我只能选择 7.0 和 7.1。

![在此处输入图像描述](../Images/d3482c63a093dd6ceb70f463aea56a49.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T05:07:55.237

这是安装 WP 7.8 SDK 更新后的样子。

![在此处输入图像描述](../Images/aa7e21b822d2127004893319958cf09f.png)

现在，向我们展示它在您的 VS 中的样子。以便清楚地了解您的问题。

你在安装 7.8 更新之前安装了[WP 7.1.1更新吗？](http://www.microsoft.com/en-in/download/details.aspx?id=29233)

你说，它显示 7.0 和 7.1 ？它在哪里显示？几个月前，微软停止了对 7.0 设备的支持。

注意：虽然这不是一个真正的答案，但我将其添加为答案以添加屏幕截图。用更多细节更新您的问题。

# ruby-on-rails-3.1 - Rails 3.1.10 升级导致一致的 [GET /] 未命中

> ID：14763584
> 
> 赞同：0
> 
> 时间：2013-02-08T00:12:23.123
> 
> 标签：ruby-on-rails-3.1, routes, upgrade

将应用程序从 Rails 升级`3.0.20`到 Rails`3.1.10`后，我在渲染任何路线时遇到了一些麻烦；所有请求都会导致一个空主体，状态为“Success 200”，但 rails 日志报告：

`cache: [GET /route] miss`

即使在清除 rails 缓存后，我也会得到相同的结果。

我目前正在调试`ApplicationController`控制器和后续控制器，目的是找出响应出错的地方。

任何进一步调试的指针将不胜感激:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T06:13:14.597

似乎`query_reviewer`是这个问题的根源。

快速`git stash`和之后`bundle update`，我发现有几个宝石已经更新，即`query_reviewer`从`0.1.6`到`0.1.7`。似乎这些版本之间的显着变化导致了一些回归，即我的问题中描述的回归。

解决方案：`query_reviewer`从恢复`0.1.7`到`0.1.6`.

# xml - w3c xml 命名标准

> ID：14763589
> 
> 赞同：1
> 
> 时间：2013-02-08T00:13:57.430
> 
> 标签：xml, w3c

w3c 在哪里声明 xml 标签不能以数字开头？

我浏览了[http://www.w3.org/TR/REC-xml/#uniqattspec](http://www.w3.org/TR/REC-xml/#uniqattspec)文档，但没有看到。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T00:23:02.957

[这](http://www.w3.org/TR/xml/#NT-NameStartChar)是您正在寻找的规范的一部分。

# scala - scala冒号右箭头键与仅冒号

> ID：14763591
> 
> 赞同：2
> 
> 时间：2013-02-08T00:14:18.647
> 
> 标签：scala, playframework-2.0

在 Play scala html 模板中，可以指定

> @（标题：字符串）（内容：Html）

或者

> @（标题：字符串）（内容：=> Html）

有什么区别？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T07:56:40.677

写作`parameter: => Html`被称为“按名称参数”。

例子：

```
def x = {
  println("executing x")
  1 + 2
}

def y(x:Int) = {
  println("in method y")
  println("value of x: " + x)
}

def z(x: => Int) = {
  println("in method z")
  println("value of x: " + x)
}

y(x)
//results in:
//executing x
//in method y
//value of x: 3

z(x)
//results in:
//in method z
//executing x
//value of x: 3 
```

使用时按名称执行参数。这样做的问题是它们可以被多次评估。

if 语句就是一个很好的例子。假设如果是这样的方法：

```
def if(condition:Boolean, then: => String, else: => String) 
```

`then`在执行方法之前和之前进行评估是一种浪费`else`。我们知道只有一个表达式会被执行，条件是`true`or `false`。这就是原因`when`，并被`else`定义为“按名称”参数。

这个概念在 Scala 课程中进行了解释：[https ://www.coursera.org/course/progfun](https://www.coursera.org/course/progfun)

# sql - 其他语言的数据库、列名

> ID：14763594
> 
> 赞同：1
> 
> 时间：2013-02-08T00:14:55.097
> 
> 标签：sql, database

请问一下设置除英文以外的列名有什么注意事项吗？

在相同的代码 utf8 中，我尝试将列名设置为其他语言，它可以创建并且看起来运行没有问题。但是，我想知道它是否是常见的粒子或我应该考虑的任何注意事项？

非常感谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T01:33:49.887

除了关键字和禁止字符，列名可以是任何你想要的。

```
CREATE TABLE Test
(Column1 int,
 Column2 float,
 kjsdahflskayfabvfalkhhg varchar(20)) 
```

是一个完全有效的表模式。它在很大程度上也是无用的。

计算机对此很好，因为它们只处理*语法*。另一方面，人们也必须处理*语义*（即它是什么*意思*）。

```
The apple ate the man. 
```

和

```
The man ate the apple. 
```

*在句法上*都是正确的英语，但只有第二个在*语义*上是正确的，因为第一个描述了一种不可能的情况。

对于您的问题，表名和列名应该对使用它们的人有意义。如果您的数据库的大多数**用户**说斯瓦希里语，则使用斯瓦希里语单词。让表示层的人担心如何以他们的母语向**应用程序的用户显示这个。**高级编程语言有专门用于此的整个库。

如果你强迫数据库程序员使用他们的母语以外的语言工作，那么你就增加了另一个机会，让人们在将他们的想法转化为代码时犯错误。

**但是**，如果有充分的理由使用*通用语*，例如：

*   这是合同义务
*   该计划适用于说英语的客户
*   该计划拥有全球劳动力

那么英语可能是你最好的选择。

# opengl - 什么程序负责计算机图形中的投影

> ID：14763597
> 
> 赞同：0
> 
> 时间：2013-02-08T00:15:11.490
> 
> 标签：opengl, graphics, directx, projection

通过投影，我的意思是，获取 3d 模型数据、相机数据等，并将场景投影到将要显示的平面 2d 图像中。

directx / opengl 会这样做吗？他们实际上是为游戏/图形设计师做的，还是您必须使用 opengl / directx 实现 3d 到 2d 投影？这就是我感到困惑的地方。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T01:16:49.613

嗯，这取决于我们谈论的是哪种计算机图形。例如，您通常可以在视觉效果（如 ILM、Digital Domain、Weta Digital）和计算机动画电影（如皮克斯、梦工厂动画、迪士尼动画、蓝光天空）中看到的图像是由专用渲染器软件离线生成的。这种离线渲染器可以通过多种方式实现。可能有光栅器（与 OpenGL 或 DirectX 3D 不同）或光线追踪器（完全不同），甚至还有混合。

OpenGL 和 DirectX 3D 是用于通过*光栅化*生成实时图像的 API ，我将对其进行解释。首先您必须了解的是，从 OpenGL 和 DirectX 3D 的角度来看，没有 3d 模型、没有相机、没有场景。对于他们来说，只有一个帧缓冲区（一个 2d 画布），他们只将点、线或三角形栅格化（=绘制）到该帧缓冲区。当光栅化这些*图元*时，各种输入数据都会影响该过程，例如控制模拟照明过程的图像（纹理）或参数。

在当前系统中，该过程是 4 折的。

1.  几何数据被转换为所谓的剪辑空间中的位置。这是由称为顶点着色器的阶段完成的。实际上它所做的是，对于图元的每个角，它需要一个输入向量（可以是任何东西）并从中计算剪辑空间中的位置。*你问的投影发生在这一步——但整个事情还有很多。请继续阅读。*

2.  （可选）镶嵌着色应用于由上一步中生成的位置定义的图元。镶嵌可以被认为是一种程序控制的细化，使事物看起来更平滑或具有更高的细节。

3.  （可选）几何着色可以将目前生成的图元转换为新的图元。例如，这对于生成模拟头发很有用

4.  片段着色计算被光栅化的基元覆盖的每个片段的最终颜色。一个像素至少有一个片段，但使用抗锯齿可能会有更多。

现在 OpenGL 和 DirectX 3D 在哪里输入图片？好吧，在 OpenGL-2 和 DirectX-8 之前，上述步骤被硬编码到它们中，所以实际上*他们做到了*。如今，现代 OpenGL 和 DirectX 3D 更像是一个多功能的图形工具包，熟练的程序员可以使用它来实现自己的图形生成管道。步骤 1 到 4 由所谓的*着色器程序*完成，这些程序**必须**由使用 OpenGL 或 DirectX 3D 的程序员编写才能使整个工作正常进行。

# heroku - 我需要将裸域和 www 域都添加到我的 heroku 应用程序吗？

> ID：14763601
> 
> 赞同：0
> 
> 时间：2013-02-08T00:15:39.657
> 
> 标签：heroku

[从文档](https://devcenter.heroku.com/articles/custom-domains#dns-setup)中我仍然不清楚，如果我想要我的网站，说“joe.com”通过“joe.com”和“www.joe.com”（我正在使用 DNSimple）在 heroku 上工作，是吗？需要将它们都放在我的应用程序的域中吗？

例如，我的应用程序是否应该在“设置/域”字段中同时包含“joe.com”和“www.joe.com”？还是只是“joe.com”？

文档说，对于 apex 域，我只需要创建一个 DNSimple 别名......而无需将该 apex 域添加到我的应用程序中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T01:22:29.217

您需要将 www 和 apex 添加到您的应用程序中。

就您的 DNS 设置而言，您可以这样做：

> joe.com 别名 {应用名称}.herokuapp.com
> 
> www.joe.com CNAME joe.com

或者

> joe.com 别名 {应用名称}.herokuapp.com
> 
> www.joe.com 别名 {应用名称}.herokuapp.com

不过，我个人会采用第一种方法。我希望这有帮助。

# python - Scrapy Link Extractor 拒绝以前抓取的链接

> ID：14763602
> 
> 赞同：1
> 
> 时间：2013-02-08T00:15:39.180
> 
> 标签：python, scrapy, web-crawler

我正在使用 Scarpy 中的 CrawlSpider 类构建爬虫。我怀疑链接提取器一遍又一遍地循环相同的链接。有没有办法限制链接提取器并拒绝已经被抓取的链接？这可以在拒绝输入中没有正则表达式的情况下完成吗？

```
My Rules look like this: 
```

{

```
rules = (
    #Rule(SgmlLinkExtractor((allow='profile')), follow=True),
    Rule(SgmlLinkExtractor(deny='feedback\.html'),callback='parse_item', follow=True),
    )

}
And my parse_item is: 
```

{

```
def parse_item(self, response):
    hxs = HtmlXPathSelector(response)
    element = hxs.select('//table[@id="profilehead"]/tr/td/a/@href').extract()
    try:
        open('urls.txt', 'a').write(element[0])
        open('urls.txt', 'a').write('\n')
    except IndexError:
        # Site doesn't have link to another website
        pass 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T01:24:07.700

我认为scrapy不关注已经访问过的链接。但是，如果您想限制某些部分不被遵循，那么您可以尝试这样的事情

`restrict_xpaths=('//a[starts-with(@title,"Next ")]')),`

[http://doc.scrapy.org/en/latest/topics/link-extractors.html](http://doc.scrapy.org/en/latest/topics/link-extractors.html)

# linux - 在 bash 脚本中使用条件来检查字符串参数

> ID：14763608
> 
> 赞同：28
> 
> 时间：2013-02-08T00:16:08.487
> 
> 标签：linux, bash, shell, terminal, sh

我正在尝试编写我的 shell 脚本`thing.sh`，以便使其成为可执行文件并使用单个字母“A”运行它，如下所示：

```
$ ./thing.sh A 
```

我得到输出

```
A 
```

如果参数 1 不是 A，我想要输出

```
Not A 
```

到目前为止，这是我的代码：

```
#!/bin/bash

if [ "$1" -eq "A"]
then echo "A"
else echo "Not A"
fi 
```

无论我输入什么，它都会返回，

```
./thing.sh: line 3: [:missing `]'
Not A 
```

我正在尝试我希望用一个或几个字母检查某些内容并将其与字母 A 进行比较；有人能告诉我让这个工作我缺少什么吗？谢谢

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-02-08T00:17:47.013

较短的呢：

```
#!/bin/bash

[[ $1 == A ]] && echo "A" || echo "not A" 
```

?

还有一个初学者版本（相同的逻辑）：

```
#!/bin/bash

if [[ $1 == A ]]; then
    echo "A"
else
    echo "not A"
fi 
```

就像斯科特说的那样，你有一个语法错误（缺少空格）。

## 解释

*   我在这里使用布尔逻辑。`[[ $1 == A ]]`被执行，然后如果它为真，`echo "A"`则执行，如果为假，`echo "not A"`则执行，见[http://mywiki.wooledge.org/BashGuide/TestsAndConditionals](http://mywiki.wooledge.org/BashGuide/TestsAndConditionals)
*   `[[`是一个与命令类似（但比`[`命令更强大）的 bash 关键字。请参阅[http://mywiki.wooledge.org/BashFAQ/031](http://mywiki.wooledge.org/BashFAQ/031)和[http://mywiki.wooledge.org/BashGuide/TestsAndConditionals](http://mywiki.wooledge.org/BashGuide/TestsAndConditionals)除非您正在编写 POSIX sh，否则我建议使用`[[`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-08T00:21:16.900

将第一行更改为：

```
if [ "$1" == "A" ] 
```

-eq 运算符用于整数。正如其他人提到的，“]”之前的空间确实很重要。

见这里：[http ://tldp.org/LDP/abs/html/comparison-ops.html](http://tldp.org/LDP/abs/html/comparison-ops.html)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-08T00:17:44.640

`"A"`尝试在和之间放置一个空格`]`。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-02-08T00:18:03.187

“A”后面需要一个空格

```
if [ "$1" -eq "A" ] 
```

# visual-studio-2012 - VS2012-预构建事件失败

> ID：14763612
> 
> 赞同：0
> 
> 时间：2013-02-08T00:16:43.303
> 
> 标签：visual-studio-2012

在 VS2012 中。我只是将预构建事件设置如下。

md "$(TargetDir)Strings"

它第一次工作正常并创建目录。在那之后。当我建造它时，它会显示错误：

错误 1 ​​错误 MSB3073：命令 "md "C:\FIT\Tech\Programmer365\Projects\SDR\Debug\Strings" :VCEnd" 以代码 1 退出。C:\Program Files (x86)\MSBuild\Microsoft.Cpp\ v4.0\V110\Microsoft.CppCommon.targets 124 5 SDR-UI

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T00:22:53.870

创建目录后，再次尝试创建将失败。MSBuild 无法真正区分它失败是因为该目录已经存在（而不是您无法写入该位置或类似内容），因此构建失败。

您需要有条件地创建目录。在这里看看如何做到这一点：[使用批处理创建文件夹，但前提是它尚不存在](https://stackoverflow.com/questions/4165387/create-folder-with-batch-but-only-if-it-doesnt-aready-exist)

# objective-c - 什么会导致块在 ARC 下不保留引用的 Objective-C 对象？

> ID：14763614
> 
> 赞同：4
> 
> 时间：2013-02-08T00:16:56.623
> 
> 标签：objective-c, automatic-ref-counting, objective-c-blocks

我收到了这样的崩溃报告：

> *** 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[__NSMallocBlock__ CGImage]：无法识别的选择器发送到实例 0x1fb17f90”

这通常发生在一个对象已被解除分配并且另一个对象现在与被解除分配的对象位于同一地址时。

这是我的代码（我的应用程序中唯一调用该`CGImage`方法的地方）：

```
@implementation UIImageView (MyApp)

- (void) setImageWithObject:(id)object
{
    NSURLRequest *imageRequest = [NSURLRequest requestWithURL:[object URL]];
    __typeof__(self) __weak weakSelf = self;
    [self setImageWithURLRequest:imageRequest placeholderImage:nil success:^(NSURLRequest *request, NSHTTPURLResponse *response, UIImage *image) {
        dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
            CGImageRef imageRef = [image CGImage];
            CGRect rect = CGRectMake(0.f, 0.f, CGImageGetWidth(imageRef), CGImageGetHeight(imageRef));
            CGContextRef bitmapContext = CGBitmapContextCreate(NULL, (size_t)roundf(CGRectGetWidth(rect)), (size_t)roundf(CGRectGetHeight(rect)), CGImageGetBitsPerComponent(imageRef), CGImageGetBytesPerRow(imageRef), CGImageGetColorSpace(imageRef), CGImageGetBitmapInfo(imageRef));
            UIImage *decompressedImage = image;
            if (bitmapContext)
            {
                CGContextDrawImage(bitmapContext, rect, imageRef);
                CGImageRef decompressedImageRef = CGBitmapContextCreateImage(bitmapContext);
                decompressedImage = [UIImage imageWithCGImage:decompressedImageRef scale:image.scale orientation:image.imageOrientation];
                CGImageRelease(decompressedImageRef);
                CGContextRelease(bitmapContext);
            }
            dispatch_async(dispatch_get_main_queue(), ^{
                weakSelf.image = decompressedImage;
            });
        });
    } failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error) {
        NSLog(@"%@", error);
    }];
}

@end 
```

我假设该`image`对象应该由块自动保留（我正在使用 ARC），以便在`image`使用它的代码在默认优先级队列上执行之前无法释放该对象。崩溃似乎意味着它没有被保留。

我的假设是错误的还是我错过了其他东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T14:56:56.300

这不是类似于 ARC 下的 UIColor 和 CGColorRef 的行为吗？如此处所述：http : [//blog.bignerdranch.com/296-arc-gotcha-unexpectedly-short-lifetimes/](http://blog.bignerdranch.com/296-arc-gotcha-unexpectedly-short-lifetimes/)

所以你在哪里：

```
CGImageRef imageRef = [image CGImage]; 
```

我认为您需要在块中显式保留它，然后显式释放它，这样 ARC 就不会释放图像引用。

所以：

```
CGImageRef imageRef = CGImageRetain([image CGImage]);
...
CGImageRelease(imageRef); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-28T09:48:29.480

您的块本身可能没有问题。有人调用该块；调用者可能已经传递了一个已释放的对象。我会在块的第一行做一个 NSLog (@"%@", image) 并查看调用代码。

# vbscript - 错误：带有 Shell.RegWrite 的“注册表项中的根无效”

> ID：14763625
> 
> 赞同：2
> 
> 时间：2013-02-08T00:18:01.893
> 
> 标签：vbscript, registry

运行此代码时：

```
CreateObject("WScript.Shell").RegWrite "HKLM\Whatever\", "MyValue", "REG_SZ" 
```

我`.RegWrite`只在出现错误的 Windows 8 上遇到问题：

> “注册表项中的根无效”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T01:11:16.093

好吧，由于错误描述如此无益，我需要做一些测试以找出这是权限问题。但是，提升脚本可以解决这个问题。为了做出这个真正的答案，我应该发布我所做的，对吧？

```
Call ElevateUAC

' ---------------------------
' my duty task goes here...
' ---------------------------

Sub ElevateUAC
    If Not WScript.Arguments.Named.Exists("elevated") Then
        'Launch the script again as administrator
        With CreateObject("Shell.Application")
        .ShellExecute "wscript.exe", """" & _
            WScript.ScriptFullName & """ /elevated", "", "runas", 1
            WScript.Quit
        End With
    End If
End Sub 
```

# xna - Phyre 引擎到 xna

> ID：14763628
> 
> 赞同：0
> 
> 时间：2013-02-08T00:18:10.340
> 
> 标签：xna, xbox, steam, ps3

如果我用 phyre 引擎构建游戏/程序，我可以在 xna 上使用它而无需重新编码的工作量吗？可以在 xna 是 c# 时用 c++ 编码 phyre，然后再到 Steam 上。

需要有一个游戏通过 psn、xbox 和 steam 发布。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T00:19:50.933

您将无法做到，它们是两个完全不同的引擎。

# c# - ASP.NET C# 嵌套控件访问

> ID：14763629
> 
> 赞同：1
> 
> 时间：2013-02-08T00:18:12.877
> 
> 标签：c#, asp.net

我有类似的东西

```
<asp:ListView ID="lv" runat="server">
  <LayoutTemplate>
    <asp:Literal ID="litControlTitle" runat="server" />
      <label id="test" runat="server">dw</label>
    <asp:PlaceHolder ID="itemPlaceHolder" runat="server" />
  </LayoutTemplate>
  <ItemTemplate>
  </ItemTemplate>
</asp:ListView> 
```

有人可以告诉我，我应该如何使用 C# 代码更改标签文本？我的主要问题是 - 如何从 c# 代码访问嵌套控件（标签、文字）？

编辑：

```
<SelectedItemTemplate>

                    <asp:HiddenField ID="NumberEdit" runat="server"
                        Value='<%# Bind("numbers") %>' />

                    <label for="NameEdit">Name:</label>
                    <asp:TextBox ID="NameEdit" Width="160px" runat="server" AutoPostBack="true" OnTextChanged="NameEdit_TextChanged"
                        Text='<%# Bind("Name") %>'  />
                    <br />

                                    <label for="ShortcutEdit">Shortcut:</label>
                    <asp:TextBox ID="ShortcutEdit" Width="80px" runat="server"
                        Text='<%# Bind("Shortcut") %>' />
                    <br /> 
```

并且我想在用户更改名称时自动生成快捷方式文本（快捷方式 = 来自 NameEdit 的 2 个首字母）？你能解释一下，我该怎么做？——</p>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T00:28:40.110

您可能希望有一个[ItemDataBound](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listview.itemdatabound.aspx)事件处理程序来访问列表视图中该特定项目的控件。我链接的页面上的示例应该可以帮助您。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T00:29:26.440

首先，您需要一个与此`ListView`控件绑定的数据源，例如`SqlDataSource`，或您需要的任何其他允许的类型：

```
<asp:SqlDataSource ID="SqlDataSource1" runat="server" 
                ConnectionString="<%$ ConnectionStrings:YourConnectionString %>" 
                SelectCommand="SELECT [Title], [id] FROM [Articles]"></asp:SqlDataSource>

    <asp:ListView ID="lv" runat="server" DataSourceID="SqlDataSource1" >
        // rest of the code
    </asp:ListView> 
```

第二件事是`LayoutTemplate`只有在有任何数据要显示时才会呈现来自模板的控件。因此，如果您有数据源，但它是空的，则不会应用此模板。但是，当数据源中没有要显示的内容时，您可以使用它`EmptyDataTemplate`来显示信息。

然后，当您已经定义了数据源并绑定到您的数据源并且`ListView`将显示数据时，将`LayoutTemplate`呈现数据源。然后你可以`FindControl`使用`ListView`. 例如获取这个文字：

```
Literal l = (Literal)lv.FindControl("litControlTitle"); 
```

它为您返回 null，因为您没有要显示的数据，因此根本不会呈现控件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T00:33:40.573

```
((Label)ListView1.FindControl("test")).Text = "Hello!"; 
```

# http - “q=0.9,*/*;q=0.8”是什么意思

> ID：14763630
> 
> 赞同：20
> 
> 时间：2013-02-08T00:18:27.857
> 
> 标签：http, http-headers, httpwebrequest

我正在研究http协议。当我使用提琴手捕捉请求时，我发现一些参数很特别。

http请求的一部分：

```
Content-Type: multipart/form-data; boundary=----WebKitFormBoundaryiUs1bDxxBwTvwCxS
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,\*/\*;q=0.8
Accept-Encoding: gzip,deflate,sdch
Accept-Language: zh-CN,zh;q=0.8
Accept-Charset: GBK,utf-8;q=0.7,*;q=0.3 
```

`q=0.9,\*/\*;q=0.8`Accept-header、`q=0.8`Accept-Language-header 和`q=0.7,*;q=0.3`Accept-Charset-header 中的参数是什么意思？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-08T00:21:11.423

本页摘录[http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html)：

> 注意：使用“q”参数名称将媒体类型参数与接受扩展参数分开是由于历史惯例。尽管这会阻止任何名为“q”的媒体类型参数与媒体范围一起使用，但鉴于 IANA 媒体类型注册表中缺少任何“q”参数并且很少使用任何媒体类型，这种事件被认为不太可能发生接受中的参数。不鼓励未来的媒体类型注册任何名为“q”的参数。

这基本上是一种为浏览器提供一种指示对某种媒体类型的偏好的方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-10-10T10:22:38.367

我认为

> [https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Accept-Language](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Accept-Language)

对这个问题有更好的解释。

引自网站：

## 接受语言：en-US,en;q=0.5

;q=（q 因子加权）

*任何按优先顺序排列的值，使用称为权重的相对质量值表示。*

# python - 获取“没有名为 django_messages 的模块”

> ID：14763631
> 
> 赞同：1
> 
> 时间：2013-02-08T00:18:29.297
> 
> 标签：python, django, ubuntu, pip

我正在使用一个名为[DjangoBB](http://djangobb.org/)的 Django 应用程序。我正在尝试将它安装在我的服务器上，但我遇到了消息插件/应用程序。

这个输出对我没有任何意义......

```
# pip install django-messages
Requirement already satisfied (use --upgrade to upgrade): django-messages in /usr/local/lib/python2.7/dist-packages
Cleaning up...
# python manage.py runserver
Error: No module named django_messages 
```

我对其他模块也有同样的问题，比如 django-registration 和 django_notifications，但我只是将它们弹出`pip`，然后再次通过并得到一个新的缺失依赖项。虽然它被困在这里。有任何想法吗？

* * *

我的 INSTALLED_APPS：

```
INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'django.contrib.sitemaps',
    'django.contrib.admin',
    'django.contrib.admindocs',
    'django.contrib.humanize',
    'registration',
    'pagination',
    'django_authopenid',
    'djangobb_forum',
    'haystack',
    'django_messages',
) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T01:15:51.860

实际的应用程序称为`'messages'`. 确保将其添加到您的`INSTALLED_APPS`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T00:55:49.383

您可能需要将 'django_messages' 添加到 settings.py 中的 INSTALLED_APPS 列表中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T06:35:58.887

在我的服务器上，我有 0.4.4 版本。在我的本地机器上，我有 0.5.0.pre 版本。

无法通过 pip 获得该代码，但 BB 应用程序需要它。我以某种方式[从这里](https://github.com/arneb/django-messages)下载并运行了`python setup.py install`.

现在消息模块不可用，但`django_messages`已暴露。

# javascript - jQuery奇数悬停事件

> ID：14763633
> 
> 赞同：2
> 
> 时间：2013-02-08T00:18:40.047
> 
> 标签：javascript, jquery

这是我当前的代码，[http://jsfiddle.net/AW5BK/2/](http://jsfiddle.net/AW5BK/2/)

```
 $(".feedback").hover(function(){
   $(this).animate({marginLeft : "25px"},500);
  },function(){
    $(this).animate({marginLeft : "-25px"},500);
 }); 
```

它运作良好，但每当鼠标快速移出和移出对象时，它就会反复滑动打开和关闭。有没有办法阻止这种情况发生？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T00:20:05.553

使用[stop()](http://api.jquery.com/stop/)防止重复动画冲突：

```
$(".feedback").hover(function(){
    $(this).stop().animate({marginLeft : "25px"},500);
},function(){
    $(this).stop().animate({marginLeft : "-25px"},500);
}); 
```

[这是工作的jsFiddle。](http://jsfiddle.net/AW5BK/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T00:30:12.273

更好地使用本机方法：

```
$(".feedback").hover(function(e){
  e.stopPropagation();
  $(this).animate({marginLeft : "25px"},500);
},function(){
  e.stopPropagation(e);
  $(this).animate({marginLeft : "-25px"},500);
}); 
```

甚至更好——CSS 过渡：

```
.feedback {
  transition: all 600ms ease-in-out;
}

.feedback:hover {
  transform: translate3d(-25px, 0, 0);
} 
```

这两个属性都需要前缀：-webkit-、-moz-、-o- 和一个没有前缀

# delphi - 我可以使用默认的 WriteComponent 操作将 Delphi TPersistent 序列化为 TComponent 的字段吗？

> ID：14763635
> 
> 赞同：2
> 
> 时间：2013-02-08T00:18:45.043
> 
> 标签：delphi, serialization, tpersistent, tcomponent

我对如何从具有 TPersistent 字段的 TComponent 中写出属性感到非常困惑。例如我有：

```
 TChildObj = class( TPersistent )
  PRIVATE
    FVisible: boolean;
    FColor: TColor;
  PUBLIC
  PUBLISHED
    property Visible : boolean
               read FVisible
               write FVisible;
    property Color : TColor
               read FColor
               write FColor;
  end;

  TTest = class( TComponent )
    constructor Create( AOwner : TComponent ); override;
    destructor Destroy; override;
  private
    FChildObj : TChildObj;
    FOne: integer;
  published
    property One : integer
               read FOne
               write FOne;
    property ChildObj : TChildObj
               read FChildObj;
  end; 
```

当我使用以下编写器代码时：

```
procedure TForm1.Button5Click(Sender: TObject);
var
  MS : TMemoryStream;
  SS : TStringStream;
  Test : TTest;
begin
  Test := TTest.Create( Self );
  MS := TMemoryStream.Create;
  SS := TStringStream.Create;
  try
    MS.WriteComponent( Test );
    MS.Position := 0;
    ObjectBinaryToText( MS, SS );
    SS.SaveToFile( 'c:\scratch\test.txt' );
  finally
    MS.Free;
    SS.Free;
  end;

end; 
```

我只得到以下内容：

```
object TTest
  One = 0
end 
```

即缺少 TPersistent TChildObj。

[这篇](http://delphi-kb.blogspot.co.uk/2011/05/component-serialization.html)关于组件序列化的文章指出“默认情况下，组件将流式传输任何非 TComponent 类型的 TPersistent 属性。我们的 TPersistent 属性像组件一样被流式传输，并且它可能具有其他将被流式传输的 TPersistent 属性。” 但是，当我进入 System.Classes 时，在第 12950 行（XE3）附近进行了测试：

```
 if (PropInfo^.GetProc <> nil) and
     ((PropInfo^.SetProc <> nil) or
     ((PropInfo^.PropType^.Kind = tkClass) and
      (TObject(GetOrdProp(Instance, PropInfo)) is TComponent) and
      (csSubComponent in TComponent(GetOrdProp(Instance, PropInfo)).ComponentStyle))) then 
```

这似乎表明只有组件和子组件被序列化。如果我让 TChildObj 从 TComponent 下降（并给它一个名字），我会得到它的名字出现在书面文件中（但仍然没有属性）。

我真正不明白的是，TControl（一个组件）具有 Font 属性（TPersistent），例如，当您编写 TLabel 时，它会很好地流出。

还是这与默认属性有关？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-08T01:03:31.653

当 RTL 决定是否需要流式传输`TPersistent`属性时，请更仔细地查看需求列表：

```
if (PropInfo^.GetProc <> nil) and
 ((PropInfo^.SetProc <> nil) or
 ((PropInfo^.PropType^.Kind = tkClass) and
  (TObject(GetOrdProp(Instance, PropInfo)) is TComponent) and
  (csSubComponent in TComponent(GetOrdProp(Instance, PropInfo)).ComponentStyle))) then 
```

你的`ChildObj`属性是只读属性，所以不满足`PropInfo^.SetProc <> nil`要求，也不是`TComponent`-派生的子组件，所以不满足is`is TComponent`和`csSubComponent`要求。这就是 DFM 中缺少您的财产的原因。

最简单的解决方案是使您的`ChildObj`属性为读/写而不是只读（`TComponent`除非必须，否则不要使用，在这种情况下您不需要）。

您还缺少一个析构函数`TTest`来释放`TChildObj`对象。为了更好地衡量，您应该提供`TChildObj`一个可以分配处理程序的`OnChange`事件，以便它可以对子属性`TTest`的更改做出反应。`TChildObj`

尝试这个：

```
type
  TChildObj = class(TPersistent)
  private
    FVisible : Boolean;
    FColor : TColor;
    FOnChange : TNotifyEvent;
    procedure Changed;
    procedure SetVisible(Value : Boolean);
    procedure SetColor(Value : TColor);
  public
    procedure Assign(Source : TPersistent); override;
    property OnChange : TNotifyEvent read FOnChange write FOnChange;
  published
    property Visible : Boolean read FVisible write SetVisible;
    property Color : TColor read FColor write SetColor;
  end;

  TTest = class(TComponent)
  private
    FChildObj : TChildObj;
    FOne : integer;
    procedure ChildObjChanged(Sender : TObject);
    procedure SetChildObj(Value : TChildObj);
  protected
    procedure Loaded; override;
  public
    constructor Create(AOwner : TComponent); override;
    destructor Destroy; override;
  published
    property One : integer read FOne write FOne;
    property ChildObj : TChildObj read FChildObj write SetChildObj;
  end; 
```

.

```
procedure TChildObj.Assign(Source: TPersistent);
begin
  if Source is TChildObj then
  begin
    FVisible := TChildObj(Source).Visible;
    FColor := TChildObj(Source).Color;
    Changed;
  end else
    inherited;
end;

procedure TChildObj.Changed;
begin
  if Assigned(FOnChange) then
    FOnChange(Self);
end;

procedure TChildObj.SetVisible(Value : Boolean);
begin
  if FVisible <> Value then
  begin
    FVisible := Value;
    Changed;
  end;
end;

procedure TChildObj.SetColor(Value : TColor);
begin
  if FColor <> Value then
  begin
    FColor := Value;
    Changed;
  end;
end;

constructor TTest.Create(AOwner : TComponent);
begin
  inherited;
  FChildObj := TChildObj.Create;
  FChildObj.OnChange := ChildObjChanged;
end;

destructor TTest.Destroy;
begin
  FChildObj.Free;
  inherited;
end;

procedure TTest.ChildObjChanged(Sender : TObject);
begin
  if csLoading in ComponentState then Exit;
  // use ChildObj values as needed...
end;

procedure TTest.Loaded;
begin
  inherited;
  ChildObjChanged(nil);
end;

procedure TTest.SetChildObj(Value : TChildObj);
begin
  if FChildObj <> Value then
    FChildObj.Assign(Value);
end; 
```

如果您采用这种`TComponent`方法，请尝试以下方法：

```
type
  TChildObj = class(TComponent)
  private
    FVisible : Boolean;
    FColor : TColor;
    FOnChange : TNotifyEvent;
    procedure Changed;
    procedure SetVisible(Value : Boolean);
    procedure SetColor(Value : TColor);
  public
    procedure Assign(Source : TPersistent); override;
    property OnChange : TNotifyEvent read FOnChange write FOnChange;
  published
    property Visible : Boolean read FVisible write SetVisible;
    property Color : TColor read FColor write SetColor;
  end;

  TTest = class(TComponent)
  private
    FChildObj : TChildObj;
    FOne : integer;
    procedure ChildObjChanged(Sender : TObject);
    procedure SetChildObj(Value : TChildObj);
  protected
    procedure Loaded; override;
  public
    constructor Create(AOwner : TComponent); override;
  published
    property One : integer read FOne write FOne;
    property ChildObj : TChildObj read FChildObj write SetChildObj;
  end; 
```

.

```
procedure TChildObj.Assign(Source: TPersistent);
begin
  if Source is TChildObj then
  begin
    FVisible := TChildObj(Source).Visible;
    FColor := TChildObj(Source).Color;
    Changed;
  end else
    inherited;
end;

procedure TChildObj.Changed;
begin
  if Assigned(FOnChange) then
    FOnChange(Self);
end;

procedure TChildObj.SetVisible(Value : Boolean);
begin
  if FVisible <> Value then
  begin
    FVisible := Value;
    Changed;
  end;
end;

procedure TChildObj.SetColor(Value : TColor);
begin
  if FColor <> Value then
  begin
    FColor := Value;
    Changed;
  end;
end;

constructor TTest.Create(AOwner : TComponent);
begin
  inherited;
  FChildObj := TChildObj.Create(Self);
  FChildObj.SetSubComponent(True);
  FChildObj.OnChange := ChildObjChanged;
end;

procedure TTest.ChildObjChanged(Sender : TObject);
begin
  if csLoading in ComponentState then Exit;
  // use ChildObj values as needed...
end;

procedure TTest.Loaded;
begin
  inherited;
  ChildObjChanged(nil);
end;

procedure TTest.SetChildObj(Value : TChildObj);
begin
  if FChildObj <> Value then
    FChildObj.Assign(Value);
end; 
```

# oracle - Oracle 10g：为什么在这种情况下，Oracle 会进行全表扫描而不是使用低基数的 B-tree 索引？

> ID：14763649
> 
> 赞同：1
> 
> 时间：2013-02-08T00:19:58.287
> 
> 标签：oracle, oracle10g, indexing, b-tree

我正在研究 Oracle 10g 中的索引以加快特定查询。我一遍又一遍地读到索引低基数列（具有很少唯一值的列，例如员工表中的性别列）很少有助于加快查找速度。如果该低基数列中的数据是均匀分布的，则这是有道理的，例如约 50% 的员工记录的性别 = 'M'，其他约 50% 的性别 = 'F'。但是，如果数据不是均匀分布的，并且您要搜索的记录与大多数记录的键不同，那该怎么办？如果对上面的性别列进行索引，员工表是针对一家有 2% 男性员工和 98% 女性员工的公司，我们只对男性员工进行查询。这种低基数的经验法则仍然成立吗？

我现在处理的情况是一个具有非空二进制列的表，每条记录总是存储 1 或 0。在这个表中，有 99,999 条记录为 0 和一条记录为 1。当我在这个二进制列上有一个 b 树索引时，Oracle 选择了全表扫描。

我想我不理解的部分是当大多数键是重复的时，b-tree 会是什么样子，以及为什么它不能快速找到一组不重复的少数记录。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-05-16T07:41:15.793

担，

答案就在下面的问题中。Oracle 中存在哪些各种类型/种类的索引（例如）？

当存在具有更多冗余（低基数）的列时，位图索引是最佳选择。

例如，假设一个表的列名称为“Employee_status”.. Values (YES | NO) Select * from emp where Employee_Status='Regular';

如果您有 B-Tree 索引、哈希索引……除了位图索引，尽管使用过滤器和索引，这将很少有帮助。

谢谢 Prashant Dixit www.oracleant.com

# python - Django中的高级数据库查询

> ID：14763654
> 
> 赞同：1
> 
> 时间：2013-02-08T00:20:28.450
> 
> 标签：python, django, orm, django-models, django-views

我的数据库中有一个表（模型），如下所示：

名称|变量|评价

马可| 9.6 | 1

马可| 9.3 | 2

凯文 | 8.8 | 1

凯文 | 9.4 | 2

所以我需要以这种方式获取这些数据以在模板中显示表格：

姓名 | 评估1 | 评估2

马可 | 9.6 | 9.3

凯文 | 8.8 | 9.4

如何在我的视图中进行查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T00:39:12.873

仅使用 ORM 没有简单的方法可以做到这一点。尝试使用[`itertools.groupby`](http://docs.python.org/2/library/itertools.html#itertools.groupby)：

```
from itertools import groupby

results = ModelCls.objects.order_by("name")

grouped = groupby(results, lambda r: r.name) 
```

现在，您的模型按名称分组：

```
for name, objects in grouped:
    # process model objects in each group
    for obj in objects:
        # do something with each object 
```

将 groupby 对象传递给模板应该可以正常工作，但请注意它是一个*生成器*，并且在您迭代它之后会耗尽。

# java - 尝试在 Hadoop 中开始工作时出错

> ID：14763655
> 
> 赞同：0
> 
> 时间：2013-02-08T00:20:27.887
> 
> 标签：java, configuration, hadoop

我一直在尝试将 pagerank 算法与 hadoop 一起使用，但我在作业初始化方面遇到了一些问题。

当我尝试使用 Job 类进行初始化时，编译时出现以下错误：

线程“main”中的异常 java.lang.NoClassDefFoundError: org.apache.hadoop.mapreduce.Job.(Job.java:89) 的 org/apache/commons/logging/LogFactory 在 Pagerank.main(Pagerank.java:244)

这是代码：

```
Job job;
job = new Job();
job.setJarByClass(Pagerank.class);      // In what class are our map/reduce functions for this job found?
job.setMapperClass(PRMap.class);        // What is our map function for this job?
job.setReducerClass(PRReduce.class);    // What is our reduce function for this job?

job.setOutputKeyClass(Text.class);              // What are the (hadoop.io compliant) datatype for our
job.setOutputValueClass(Text.class);            // reducer output's key-value pairs?
job.setInputFormatClass(TextInputFormat.class);     // How will the mapper distinguish (key value) record inputs?
FileInputFormat.addInputPath(job, new Path(args[0])); // First command line argument
FileOutputFormat.setOutputPath(job, new Path("temp0"));
job.waitForCompletion(true); 
```

当我尝试使用 JobConf 类进行初始化时，我收到一个关于所使用的某些方法的争论的错误。

这是代码：

```
 JobConf conf = new JobConf(Pagerank.class);
     conf.setJobName("pagerank");

     conf.setOutputKeyClass(Text.class);
     conf.setOutputValueClass(Text.class);

     conf.setMapperClass(PRMap.class);
     conf.setReducerClass(PRReduce.class);

     conf.setInputFormat(TextInputFormat.class);
     conf.setOutputFormat(TextOutputFormat.class);

     FileInputFormat.setInputPaths(conf, new Path(args[0]));
     FileOutputFormat.setOutputPath(conf, new Path(args[1]));

     JobClient.runJob(conf); 
```

根据错误：

JobConf 类中的方法 setMapperClass 不能应用于给定类型；

必需：类？扩展映射器

找到：类 PRMap

原因：实参 Class PRMap 不能转换为 Class ?extends Mapper 通过方法调用转换

即使我编写的 PRMap 类遵循 Hadoop 的 Map 函数标准，我似乎也无法在 setMapperClass 中将 PRMap.class 作为参数传递

```
public static class PRMap extends Mapper<LongWritable, Text, Text, Text>
{ ... } 
```

对这两种方法有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T04:22:02.807

尝试将包含 org.apache.commons.Logging.LogFactory jar 的 jar 放入每台机器的 HadoopHome 的 Lib 目录中，然后重新启动集群。

或者您可以尝试使用 libjars 选项通过命令行添加 jar。作为：

> hadoop jar myjar.jar package.classname -libjars mypath/common-loggings.jar

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T05:52:15.690

在您的主要方法中添加这一行。

```
DistributedCache.addFileToClassPath(new Path("<Absolute Path>/common-loggings.jar"), conf); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T09:17:47.707

那是因为 Mapper 无法找到`LogFactory`，这是`common-loggings.jar`. 为此，您必须让每个客户端映射器都可以访问它，通过将 jar 复制到所有机器或其他有效的方法是复制到分布式缓存中。

```
$bin/hadoop fs -copyFromLocal mylib.jar /myapp/mylib.jar
And accessing it from you code
DistributedCache.addFileToClassPath(new Path("/myapp/mylib.jar"), job); 
```

更多可以在[这里找到](http://hadoop.apache.org/docs/current/api/org/apache/hadoop/filecache/DistributedCache.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T04:26:35.963

看起来 PRMap 类扩展了 org.apache.hadoop.mapreduce.Mapper [http://hadoop.apache.org/docs/mapreduce/current/api/org/apache/hadoop/mapreduce/Mapper.html](http://hadoop.apache.org/docs/mapreduce/current/api/org/apache/hadoop/mapreduce/Mapper.html)和需要的类通过 JobConf 传递的应该是 org.apache.hadoop.mapred.Mapper 的子类。

要解决 java.lang.NoClassDefFoundError 的问题，请将 commons-logging-xxxjar 添加到您的 classpath 中。

运行 hadoop classpath 以确认您是否看到 jar 出现。

# android - Android：文件读取 - OutOfMemory 问题

> ID：14763656
> 
> 赞同：1
> 
> 时间：2013-02-08T00:20:33.487
> 
> 标签：android, android-assets, android-memory

我正在创建一个涉及从文件中读取数据的应用程序。该文件相对较大 (1.8 MB)，正在从 onCreate 中的异步线程读取。应用程序第一次启动时，它加载得很好。但是，如果单击后退按钮然后再次加载它，它会耗尽内存并崩溃（抛出 OutOfMemory 错误）。

如何让它使用尽可能少的内存和/或在完成后释放该内存？

文件读取代码（在`doInBackground()`异步类的方法中执行）：

```
public ArrayList<String> createDataList() {
    dataList = new ArrayList<String>();
    BufferedReader br = null;
    try {
        br = new BufferedReader(new InputStreamReader(getAssets().open(
                    "text.txt")));
        String data;
        while ((data = br.readLine()) != null) {
            dataList.add(data);
        }                           
    } catch (IOException e) {
        e.printStackTrace();
    } finally {
        try {
            br.close(); // stop reading
        } catch (IOException ex) {
            ex.printStackTrace();
        }
    }

    return dataList;
} 
```

编辑*异步类：

```
private class loadData extends AsyncTask<Void, Void, ArrayList<String>> {

    @Override
    protected ArrayList<String> doInBackground(Void... arg0) {
        dataList = createDataList();
        return dataList;
    }

    protected void onPostExecute(ArrayList<String> result) {
        super.onPostExecute(result);
        // display first element in ArrayList in TextView as a test

    }

} 
```

我曾尝试根据我想如何组织数据并将每个文本文件中的数据存储到单独的文件中来拆分文件，`ArrayList`但我也遇到了内存问题。我还将所有数据存储到一个“主”`ArrayList`中，然后在该“主”上调用一个方法将数据添加到适当的位置`ArrayList`（一旦复制，就从“主”中删除/清除数据）。

关于如何简化和减少内存影响的任何想法？

编辑**

日志猫：

![在此处输入图像描述](../Images/17f634fe88d2f80997c4830cf02f3360.png)

那是从您单击后退按钮然后再次加载活动时开始的。以下只是生成的消息之一（详细）：

![在此处输入图像描述](../Images/06e75a51c327dd544145e0c086f39da9.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T00:35:15.730

您可以尝试添加`android:largeHeap="true"`清单，但 Android API-8 不支持。据我了解，您正在读取数据并将其存储到堆内存中，这通常非常有限，其大小取决于您运行应用程序的设备。

您可能还想在这里调查：[android - 内存不足](https://stackoverflow.com/questions/7282334/android-out-of-memory)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T02:04:47.357

首先，确保内存中没有数据的两个副本。您可以在开始创建新的 ArrayList 之前取消对旧 ArrayList 的引用，尽管您必须小心地执行此操作——`ArrayList.clear()`首先调用会更彻底。

`hprof`其次，通过使用Eclipse MAT之类的工具来确定 ArrayList 占用了多少内存。如果它使用大量空间，您可能需要考虑更紧凑的数据表示。

所以......从代码片段中，看起来您只是从文件中读取一堆文本字符串，使用字节到字符的转换。如果源材料是纯 UTF-8（即本质上是 ASCII），那么您将获得 UTF-16 的 2 倍扩展，加上分配 char[] 对象来保存它，加上包装它的 String 对象的大小，加上 ArrayList 中条目的开销。根据文件中平均字符串的长度，这可能是 1.8MB 的重要倍数。

避免这种情况的一种方法是将文件读入内存`byte[]`，扫描它以找出每个字符串的开始位置，并保留一个整数数组以及每个字符串的起始偏移量。当您需要字符串 N 时，将其从`byte[]`a解码`String`并返回。这大大减少了您的开销。您可以通过不加载文件并根据需要仅读取单个字符串（使用 a `RandomAccessFile`）来进一步减少它，但这可能会减慢速度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T02:59:15.927

似乎您可能[对 Strings 的不变性](http://developer.android.com/reference/java/lang/String.html)有些麻烦。

为什么不尝试更改代码以便使用 StringBuilder ？当然，您必须更改不止一件事，但它与您的代码足够相似，并且不会很快填满您的内存。

# php - PHP MySQL查询语法错误？

> ID：14763661
> 
> 赞同：0
> 
> 时间：2013-02-08T00:21:07.167
> 
> 标签：php, mysql, database, syntax, unity3d

我认为我在这里做错了，我对 PHP 很陌生，只使用它通过 WWW 调用将我的数据库与我的客户端软件接口，我有一个插入脚本，它可以工作，但至于我的更新脚本我难倒......这是我尝试过的查询：

最新的：

```
$query = "UPDATE accounts SET moonscore= ' " . $moonscore . " ', sunscore = ' " . $sunscore . " ' WHERE name = ' " . $name . "';"; 
```

我也试过了，过了一会儿我发现这是错误的。

```
$query = "UPDATE accounts SET moonscore = $moonscore, sunscore = $sunscore WHERE name =$name; 
```

非常感谢所有 PHP 专家的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T00:37:26.973

查看准备好的语句，以避免考虑使用一些花哨的功能来保护您的查询免受注入。[http://php.net/manual/en/pdo.prepared-statements.php](http://php.net/manual/en/pdo.prepared-statements.php)

这是一个视频，可以让您作为初学者更深入地了解：[http ://www.youtube.com/watch?v=_bw54BqS2UE](http://www.youtube.com/watch?v=_bw54BqS2UE)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T00:23:39.770

尝试，

```
$query = "UPDATE accounts
          SET    moonscore = '$moonscore', 
                 sunscore = '$sunscore'
          WHERE  name ='$name'"; 
```

作为旁注，[`SQL Injection`](http://bobby-tables.com/)如果变量的值（*s*）来自外部，则查询很容易受到攻击。请看下面的文章，了解如何预防。通过使用`PreparedStatements`，您可以摆脱在值周围使用单引号。

*   [如何*防止*PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T00:23:57.523

你应该在变量周围使用单引号，试试这个

```
 $query = "UPDATE accounts SET moonscore = '$moonscore' , sunscore = '$sunscore' WHERE name ='$name'; 
```

提示：尝试使用`PDO`or`MYSQLI`代替`mysql`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T00:26:37.277

您的查询对 SQL 注入开放。我添加了一个简单的功能，它总是很适合我。

```
function inject($value)
{
    // Stripslashes
    if (get_magic_quotes_gpc()) {
        $value = stripslashes($value);
    }
    // Quote if not integer
    if (!is_numeric($value)) {
        $value = "'" . mysql_real_escape_string($value) . "'";
    }
    return $value;
}

$query = "UPDATE accounts SET moonscore = ".inject($moonscore).", sunscore = ".inject($sunscore)." WHERE name =".inject($name); 
```

# perl - 无法在 tuxlite LAMP 堆栈（Debian 6 Squeeze）上运行 perl 脚本（500 内部服务器错误）

> ID：14763662
> 
> 赞同：0
> 
> 时间：2013-02-08T00:21:09.853
> 
> 标签：perl, debian, lamp

有使用 Tuxlite 经验的人知道如何让 Perl 脚本工作吗？我在网上的教程中尝试了很多很多关于让 Perl 脚本与 Apache 一起工作但没有成功的方法。我不断收到 500 内部服务器错误。我允许 .htaccess 中的 .cgi 和 .pl 脚本。

我的脚本是一个 hello world 脚本

`#!/usr/bin/perl print "Content-Type: text/html\n\n"; print "Hello World.";`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T09:24:12.607

我认为这不是 apache/web 问题。

在 shell 上尝试你的脚本并检查输出。（我假设它不在 shell 中运行。）

可能是您的 perl 未设置或缺少模块。

如果可行，请将您的脚本添加到您的问题中。

# cocos2d-x - 访问子 ccb 文件 cocos2d-x 中的变量

> ID：14763673
> 
> 赞同：0
> 
> 时间：2013-02-08T00:22:44.753
> 
> 标签：cocos2d-x

**如何从主“ccb”文件（cocos2d-x）的自定义层类访问子ccb中定义的成员变量？**

这是这个问题的基本场景，

* * *

我有一个名为“ladybirds_page.ccb”的 CCB 文件，并将自定义加载器类关联如下（根是 CCLayer）

*   瓢虫_pageLayerLoader.h
*   瓢虫_pageLayer.h
*   瓢虫_pageLayer.cpp

我有另一个名为“ladybird.ccb”的CCB文件，并将自定义加载器类关联如下（根是CCNode）

*   瓢虫加载器.h
*   瓢虫变种h
*   瓢虫.cpp

“ladybirds_page.ccb”文件包含多个“ladybird.ccb”实例。并且它们与相关的成员变量相关联（mLadyBird_1,mLadyBird_2,..）

和“ladybird.ccb”它自己包含几个与成员变量关联的CCSprite（mDotSprite_1，mDotSprite_2，...）

我想为它的每个实例获取这些子 ccb(ladyBird) 的成员变量的访问权限。喜欢

*   mLadyBird_1->mDotSprite_1
*   mLadyBird_1->mDotSprite_2

* * *

到目前为止，这是我的编码方法，

在 ladyBird.cpp 中创建一个方法名称 setNumber(int num) 如下

```
void ladybird::setNumber(int num)
{
    .......
    .........
    mDotSprite_1->setVisible(false);
    mDotSprite_1->setVisible(false);
    ......

} 
```

mDotSprite_1 和 mDotSprite_1 是使用 CCB_MEMBERVARIABLEASSIGNER_GLUE 宏分配的

```
CCB_MEMBERVARIABLEASSIGNER_GLUE(this, "mDotSprite_1", CCSprite *, this->mDotSprite_1);
CCB_MEMBERVARIABLEASSIGNER_GLUE(this, "mDotSprite_1", CCSprite *, this->mDotSprite_1); 
```

使用其自定义加载器类加载ladybirds_page.ccb 文件

```
void intro_pageLayer::loadNextPage()
{

    /* Create an autorelease CCNodeLoaderLibrary. */
    CCNodeLoaderLibrary * ccNodeLoaderLibrary = CCNodeLoaderLibrary::newDefaultCCNodeLoaderLibrary();

    ccNodeLoaderLibrary->registerCCNodeLoader("ladybird", ladybirdLoader::loader());
    ccNodeLoaderLibrary->registerCCNodeLoader("ladybirds_pageLayer", ladybirds_pageLayerLoader::loader());

    /* Create an autorelease CCBReader. */
    cocos2d::extension::CCBReader * ccbReader = new cocos2d::extension::CCBReader(ccNodeLoaderLibrary);

    /* Read a ccbi file. */
    CCNode * node = ccbReader->readNodeGraphFromFile("ccb/ladybirds_page.ccbi", this);

    ccbReader->release();

    CCScene * scene = CCScene::create();
    if(node != NULL) {
        scene->addChild(node);
    }

    /* Push the new scene with a fancy transition. */

    CCDirector::sharedDirector()->pushScene(CCTransitionPageTurn::create(0.5f, scene, false));
} 
```

为ladybirds_pageLayer.cpp中的ladyBirds实例分配成员变量

```
 CCB_MEMBERVARIABLEASSIGNER_GLUE(this, "mLadyBird_1", ladybird *, this->mLadyBird_1);
 CCB_MEMBERVARIABLEASSIGNER_GLUE(this, "mLadyBird_2", ladybird *, this->mLadyBird_2); 
```

最后，尝试在 mLadyBird_1 和 mLadyBird_2 上调用方法 setNumber()，如下所示

```
mLadyBird_1->setNumber(1);
mLadyBird_2->setNumber(2); 
```

* * *

我打开了 EXC_BAD_ACCESS

```
mDotSprite_1->setVisible(false); 
```

显然，我的方案没有在我的代码中实现。那么有人可以告诉我正确的方法吗？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-21T06:15:52.157

I have the same problem loading CCSprite through

```
CCB_MEMBERVARIABLEASSIGNER_GLUE 
```

macro.

I solved it using

```
CCB_MEMBERVARIABLEASSIGNER_GLUE_WEAK 
```

macro.

Hope that helps.

**EDIT**

A better solution is use however

```
CCB_MEMBERVARIABLEASSIGNER_GLUE 
```

and initialize to NULL the variable

```
variableName = NULL; 
```

and gently release into destructor

```
CC_SAFE_RELEASE(variableName); 
```

# bash - Bash sed 实现用分号替换

> ID：14763675
> 
> 赞同：1
> 
> 时间：2013-02-08T00:22:54.130
> 
> 标签：bash, shell

我正在尝试自动化 New Relic 的安装脚本，在我的 bash 文件中，我有以下内容：

```
_APPNAME="Test Application"

_OLD=";newrelic.appname = \"PHP Application\""
_NEW="newrelic.appname = \"${_APPNAME}\""

sed -i 's/$_OLD/$_NEW/g' /etc/php.d/newrelic.ini 
```

由于某种原因， sed 命令根本不会触发，有人能看出这个逻辑有什么问题吗？

注意我也尝试过`${_OLD}`，`${_NEW}`但无济于事。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T00:25:13.543

`$_OLD`并且`$_NEW`不在单引号内展开。`'`

改用双引号`"`：

```
sed -i "s/$_OLD/$_NEW/g" /etc/php.d/newrelic.ini 
```

# android - 如何将数据从多个表（db.sqlite）发送到 php

> ID：14763681
> 
> 赞同：0
> 
> 时间：2013-02-08T00:23:41.503
> 
> 标签：android

使用此代码，我将本地 sqlite 数据库中的信息发送到我的服务器（mysql），它工作正常。但我只从 table1 发送数据。如果我想将我所有的 sqlite 表的数据发送到我的服务器，我该怎么做？

```
public class sendInformation  {
public SQLiteDatabase newDB;
JSONObject jObject;
JSONArray jArray = new JSONArray();

public void getValues()
{
    try
    {
        newDB = SQLiteDatabase.openDatabase("/data/data/com..../databases/...db",null,SQLiteDatabase.CONFLICT_NONE);    
    }catch(SQLException e)
    {
        Log.d("Error","Error while Opening Database");
        e.printStackTrace();
    }
    try
    {
        Cursor c = newDB.rawQuery("Select * from table1",null);
        if (c.getCount()==0) 
        {
            c.close();
            Log.d("","no items on the table");              
        }else
        {
            c.moveToFirst();    

            while(c.moveToNext()) {
                jObject = new JSONObject();
                jObject.put("ID", c.getString(c.getColumnIndex("ID")));
                jObject.put("Notes", c.getString(c.getColumnIndex("Notes")));
                jObject.put("Cellphone", c.getString(c.getColumnIndex("Cellphone")));
                jObject.put("Date", "null");
                jObject.put("Address", "null");
                jArray.put(jObject);
            }

            c.close();
            Log.d("","ALL the data in the DB"+jArray.toString());
            int arrayLength=jArray.length();
            Log.d("","Lenght of the jArray"+arrayLength);
            HttpParams httpParams = new BasicHttpParams();
            HttpConnectionParams.setConnectionTimeout(httpParams,9000);
            HttpConnectionParams.setSoTimeout(httpParams, 9000);

            HttpClient client = new DefaultHttpClient(httpParams);

            String url = "http://ipaddress/..../test.php?arrayLength="+arrayLength;

            HttpPost request = new HttpPost(url);
            request.setEntity(new ByteArrayEntity(jArray.toString().getBytes("UTF8")));      
            request.setHeader("json", jArray.toString());

            HttpResponse response = client.execute(request);
            HttpEntity entity = response.getEntity();
            // If the response does not enclose an entity, there is no need

            if (entity != null) {
                InputStream instream = entity.getContent();

                String result =  RestClient.convertStreamToString(instream);
                Log.i("Read from server", result); 
            }
        }       
    } catch (UnsupportedEncodingException uee) {
        Log.d("Exceptions", "UnsupportedEncodingException");
        uee.printStackTrace();
    }catch (Throwable t) {
        Log.d("","request fail"+t.toString());
    }

    this.newDB.close(); 
  }
} 
```

如您所见，我从中获取所有数据`table1`并创建了一个 jsonObject。

*   我将它传递给 test.php 文件，但如果我从 table2、table3... 进行另一个查询，我必须将第二个和第三个表的值放在同一个 JsonObject 中？
*   如果我这样做，我怎么知道哪些数据来自哪个表？
*   如果我可以发送多个 jsonobject，我该怎么做以及如何在我的 test.php 文件中接收该数据。

现在我用`$json = file_get_contents('php://input');`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T00:42:40.593

你已经有了一半的解决方案。只需复制为每个附加表创建和填充 JsonObject 的代码，然后将它们添加到您的 JsonArray。您可以使用另一个 JsonObject 而不是 JsonArray - 它可以包含其他 JsonObject。

在服务器上，只需使用 json_decode($json, true) 即可将数据作为数组数组获取 - 使用 print_r() 将结果转储到文件中，以便查看数据的结构。

# scala - Scala：reduce 和 fold 之间函数类型推断的差异 - 可以做些什么吗？

> ID：14763682
> 
> 赞同：4
> 
> 时间：2013-02-08T00:23:45.357
> 
> 标签：scala, type-inference

假设我有一张空地图
`val map = Map[Int, Int]()`

我很困惑，因为虽然以下代码可以正确编译：

```
map.foldLeft((0,0)){case((k1, v1), (k2, v2)) => (-1, -1)} 
```

以下看似准确的代码片段会导致编译错误：

```
map reduceLeft {case((k1, v1), (k2, v2)) => (-1, -1)} 
```

错误是：

```
scala> map reduceLeft {case((k1, v1), (k2, v2)) => (k1, v1)}
<console>:9: error: missing parameter type for expanded function
The argument types of an anonymous function must be fully known. (SLS 8.5)
Expected type was: (?, (Int, Int)) => ?
              map reduceLeft {case((k1, v1), (k2, v2)) => (k1, v1)} 
```

这不是一个大问题，但显然不必处理这个问题会很好。你对我可以做些什么不同的想法有什么想法，还是我必须学会接受它？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-08T01:04:38.533

发生这种情况的原因是它`foldLeft`有两个参数列表（第一个是初始的“启动”值，第二个是函数）并且`reduceLeft`只有一个（函数）。

Scala 的类型推断一次操作*一个参数列表。*此外，在一个参数列表中推断的类型可用于指导或约束后面的（更右边的）类型推断，它们无法帮助指导或约束给定参数列表中的类型推断。在这种情况下，Scala 无法正确推断`reduceLeft`签名中的 B 类型：

```
def reduceLeft[B >: (A, B)](op: (B, (A, B)) ⇒ B): B 
```

在折叠情况下：

```
def foldLeft[B](z: B)(op: (B, (A, B)) ⇒ B): B 
```

它通过单独查看您的初始值 ( `(0, 0)`) 将类型绑定到 B ，然后它可以用于推断函数中的参数类型（无需您明确说明它们）。

# mongodb - 如何在 MongoDb 中为这样的链接帐户建模？

> ID：14763685
> 
> 赞同：0
> 
> 时间：2013-02-08T00:24:13.500
> 
> 标签：mongodb, performance, database-design, data-modeling, database

我的应用程序同时拥有 facebook 和 twitter 用户。现在用户可以将两个帐户合并在一起，这意味着他们可以使用 facebook 或 twitter 帐户登录。

现在，我有一个这样的模型。

```
 { "_id" : ObjectId("51103a3e69931d2f03000001"), "email" : "email", "id" : "twitter_id", "token" : "token", "secret" : "secret"}

{ "_id" : ObjectId("51103a3e69931d2f03000001"), "email" : "email", "id" : "facebook_id", "token" : "token", "secret" : ""} 

```

现在，如果这两个帐户相同，并且用户决定将他的帐户之一合并或连接到其他帐户。我应该如何有效地改变这个模型和性能。我正在考虑有另一个对象称为

`{"linked_ids" : ["facebook_id", "linkedin_id" ]}`

在这两个帐户中。所以，数据应该是这样的。一旦合并。

```
 { "_id" : ObjectId("51103a3e69931d2f03000001"), "email" : "email", "id" : "twitter_id", "token" : "token", "secret" : "secret", "linked_id" : ["facebook_id"] }

{ "_id" : ObjectId("51103a3e69931d2f03000001"), "email" : "email", "id" : "facebook_id", "token" : "token", "secret" : "", "linked_id" : ["twitter_id"] } 

```

不确定这是否是提高性能和可扩展性的最佳方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T19:47:19.150

Why not have one user document in a user collection from the start? You could model it this way instead:

```
 {
   "_id" : ObjectId("..."),
   "username" : "bob123",
   "accounts" : [
      {
         "email": "email",
         "id": "twitter_id",
         "token": "token",
         "secret": "secret",
         "type" : "Twitter"
      },
      {
         "email": "email",
         "id": "facebook_id",
         "token": "token",
         "secret": "",
         "type" : "Facebook"
      }
   ]
} 

```

Mongo has plenty of operations to deal with arrays. You can add to them, update one item in the array only, etc.

Doing joins with Mongo introduces complexity that it isn't good at handling as of now. You'd have to do that "join" in your application.

Also this model means you can add any other forms of authentication in one document.

# wpf - WPF 应用程序执行路径

> ID：14763686
> 
> 赞同：0
> 
> 时间：2013-02-08T00:24:25.670
> 
> 标签：wpf

我开发了一个 WPF 应用程序并将可执行文件放在网络路径上。我已将应用程序的快捷方式分发给用户。现在，用户可以通过运行快捷方式来启动 WPF 应用程序。在 WPF 应用程序中，我想知道应用程序是从哪个客户端驱动器执行的。换句话说，我想知道放置快捷方式的驱动器的盘符。是否有可能获得这些信息？如果是，如何？

顺便说一句，我知道“Assembly.GetExecutingAssembly().Location”，但这会返回应用程序的路径，而不是快捷方式的路径。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T00:36:54.333

据我所知，没有办法找到这一点。但是，您可以做的是在说明驱动器的快捷方式中添加一个命令行参数。

# linux - cron 提示“crontab 文件中的错误，无法安装”

> ID：14763687
> 
> 赞同：3
> 
> 时间：2013-02-08T00:24:40.073
> 
> 标签：linux, bash, cron

我正在尝试执行以下一系列命令来创建 MySQL 数据库的备份。

当我尝试使用将命令添加到我的 crontab 时，`crontab -e`我收到错误“crontab 文件中的错误，无法安装”并询问我是否要重试。

```
mkdir /home/mysql-backup/`date '+%m-%d-%Y'`; mysql -s -r -e 'show databases' | while read db; do mysqldump $db -r /home/mysql-backup/`date '+%m-%d-%Y'`/${db}.sql; done; rm -r -f `date --date="1 week ago" +%m-%d-%Y`; du -k |sort -n > output; mail -s "MySQL Backups" "steven@brightbear.net" < output 
```

我应该在这个文件中更改什么吗？或者我应该考虑创建一个脚本文件并从 cron 调用它。

提前感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-08T00:40:44.027

如果你给了那个脚本，`crontab -e`它当然会不同意。crontab 文件中的一行应以 5 个字段开头，指示您希望脚本何时运行，这[可以在 crontab 的手册页中阅读](http://www.manpagez.com/man/5/crontab/)。

另一方面，现在大多数 Linux 发行版都为应该每小时（/etc/cron.hourly）、每天（/etc/cron.daily）等执行的事情预先设置了功能。只需放置脚本就容易多了在相应目录中的文件中，它将在选定的时间栅格中执行。另一个优点是，在这些文件中，您不会被迫将所有内容都塞进一行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T00:40:01.167

是的; 作为风格问题，如果没有别的，我鼓励将 SQL 命令放入 shell 脚本，然后从`cron`. （而且，正如 Anew 所指出的，如果命令序列被分成多行并带有注释，则它更易于维护/调试。）但是——这就是你要输入的全部内容`crontab`吗？查看`man crontab`并添加指定您希望命令何时运行的字段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T00:51:34.353

From the [crontab(5)](http://unixhelp.ed.ac.uk/CGI/man-cgi?crontab+5) man page, it looks like percent signs (%) have a special meaning, so that is probably where you're running into trouble.

Yes, you should put your commands into a separate shell script and just call that from the crontab line. This will also make it much easier to read the crontab file, and you can format your script nicely so that it's easier to maintain. And you can test it separately from the crontab that way.

# iphone - 保持对 IOS 地址簿条目的长期引用

> ID：14763688
> 
> 赞同：16
> 
> 时间：2013-02-08T00:24:46.533
> 
> 标签：iphone, ios, objective-c

鉴于 ABRecordID 可以在云同步之间以及在我无法控制的其他情况下更改，我如何才能保持对 IOS 通讯录记录的长期引用？

Apple 提供以下指导：

“保持对特定记录的长期引用的推荐方法是存储名字和姓氏，或名字和姓氏的哈希值，以及标识符。当您通过 ID 查找记录时，比较将记录的名称与您的存储名称匹配。如果它们不匹配，请使用存储的名称查找记录，并为记录存储新的 ID。

但我不明白这个指导。如果地址簿中可以有重复的名称，并且由于用户可以修改记录中的名称，那么这个建议如何工作？

例如，如果用户修改了地址簿记录的名称，我的例程将无法通过 ABRecordID 找到它，所以如果我认为按我存储的名称哈希搜索我找不到重复的名称而不是新的 ABRecordID我之前引用的记录？

最后，获得对 IOS 地址簿记录的长期引用的最佳方法是什么？如果上述建议确实有效，我错过了什么？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-11T16:44:46.783

最强大（但不是完全故障保护）的方法是对 ABRecord 字段进行优先级排序，并将该列表中可用的尽可能多的内容与 ABRecordID 一起存储到您自己的（散列的）私有记录格式中。在检索私人记录时（或在其他方便的时间），您可以验证私人记录是否与 ABRecord 匹配，并通过一系列后备检查来确保其准确无误。

优先级排序示例：

1.  ABRecordID
2.  名
3.  姓
4.  电话号码
5.  邮政编码

检索记录时，您可以先匹配`ABRecordID`. 如果没有返回结果，您可以搜索`FirstName + LastName`. 然后，您可以将这些结果与`PhoneNumber`... 等进行匹配。通过这种方式，您可以潜在地区分 2 个 Bob Smith，因为它们可能有不同的电话号码（或者一个可能没有电话号码）。当然，根据你的优先级列表有多长，这个机制会越健壮。

最后的手段是提示用户将 2 Bob Smiths 与其他记录相同的全新 Bob Smiths 区分开来`ABRecordID`——毕竟，这样不方便的提示比允许用户联系错误的 Bob Smith（和正如我所说，将是最后的手段）。

但是，此 AB 解决方案可能涉及一些同步问题。

对于使用过 iOS 媒体播放器的任何人来说，这都是一个熟悉的问题。特别`MPMediaItems`是在用户的音乐库中有一个属性`MPMediaItemPropertyPersistentID`，文档描述为：

> 不保证该值在同步/非同步/同步周期内保持不变。

换句话说，`PersistentID`不保证是持久的。`MediaItem`解决方案包括对属性进行类似的后备检查。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-29T10:41:56.247

RecordID 仅在删除或重置时更改，完成此操作后，所有新记录也将具有新的 createdProperty 和 modifiedProperty。

1.  当我第一次阅读地址簿时，我会将记录的所有条目连同 RecordID 一起保存在我的数据库中。

2.  我将保存联系人上次从联系人同步到我的数据库的时间（将其命名为：lastSyncedTime）并将其存储在某个位置。

我已经完成了第一次同步联系人的工作，现在请执行以下操作以便将来随时同步。

在遍历所有记录时，

1.  检查 createdTime(kABPersonCreationDateProperty) 与 lastSyncedTime。如果 createdTime > lastSyncedTime，将 recordID 存储在“newRecords”NSArray 中。

2.  如果！（步骤 1）然后检查 modifiedDate(kABPersonModificationDateProperty) 与 lastSyncedTime。如果 modifiedDate > lastSyncedTime，则将 recordID 存储在“modifiedRecords”NSArray 中。

3.  if !(1) && !(2) 将所有 recordID 存储在“unModifiedRecords”中。

现在我将从本地数据库中读取所有联系人，

1.  我将删除在“modifiedRecords”或“unModifiedRecords”中找不到的所有本地数据库记录。

2.  我将更新本地数据库中的所有“modifiedRecords”。

3.  我将为“newRecords”中的所有记录创建新记录。

4.  相应地更新 lastSyncedTime。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T06:11:48.450

该文档正在与您沟通，您不能将 ABRecordID 视为永久标识符。

考虑这种情况：用户有“Bob Smith”的记录。然后用户删除他的“Bob Smith”记录，然后通过 iTunes 同步从他的计算机导入他的联系人（创建一个新 ID）。

因此，如果您想保留对现有联系人的永久引用，您可以保留对姓名和 ID 的引用，以暗示它与您之前使用的记录相同——但**没有真正的永久引用**。

如果您保留对地址簿联系人的永久引用，则您必须始终准备好处理这样一个事实，即它可能与您以前使用的联系人不同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-02T13:20:32.137

参考： [https ://developer.apple.com/library/ios/documentation/ContactData/Conceptual/AddressBookProgrammingGuideforiPhone/Chapters/DirectInteraction.html#//apple_ref/doc/uid/TP40007744-CH6-SW2](https://developer.apple.com/library/ios/documentation/ContactData/Conceptual/AddressBookProgrammingGuideforiPhone/Chapters/DirectInteraction.html#//apple_ref/doc/uid/TP40007744-CH6-SW2)

清楚地告诉你如何处理它。

# ruby-on-rails-3 - 在传递给部分时确定块是否有任何内容

> ID：14763692
> 
> 赞同：0
> 
> 时间：2013-02-08T00:25:17.720
> 
> 标签：ruby-on-rails-3

```
<%= render :layout => "some_layout" do %>
  <p>Some stuff</p>
<% end %> 
```

在“some_layout”中

```
<%= yield %> 
```

有没有办法检测 yield 块是否有任何内容？例子：

```
<% if block_has_content? %>
   <%= yield %>
<% else %>
  <p>Default content</p>
<% end %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T00:35:11.203

我认为你应该看看这个文档： [http ://apidock.com/rails/ActionView/Helpers/CaptureHelper/content_for](http://apidock.com/rails/ActionView/Helpers/CaptureHelper/content_for)

您可以在某处定义：

```
 <% content_for :some_layout do %>
     some content
 <% end %> 
```

在代码的另一部分：

```
<%= content_for(:some_layout) || 'Default content' %> 
```

如果 :some_layout 的内容未定义，它将采用默认值。

# php - sendgrid php 示例 - 如何添加发件人姓名？

> ID：14763693
> 
> 赞同：4
> 
> 时间：2013-02-08T00:25:28.623
> 
> 标签：php, sendgrid

[在http://sendgrid.com/docs/Code_Examples/php.html](http://sendgrid.com/docs/Code_Examples/php.html)的 sendgrid php 示例中，您可以添加发件人的电子邮件，但不能添加发件人的姓名。例如，如果发件人的姓名被分配了变量 $name，我怎样才能正确地将其添加到示例中，以便发件人的姓名显示为例如 Bob 而不仅仅是 bob@email.com？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-08T04:58:58.490

原来答案是

```
setFromName($name) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-08T01:00:31.137

根据[php mail function 的文档](http://php.net/manual/en/function.mail.php)，设置*From*标头。对于 SendGrid 类，我认为它可能是这样的：

```
$mail->addHeader("From", $name); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-18T03:22:42.687

内联图像的完整示例，请看（查看**cid:myimagecid**的使用方式）

```
$sg = new \SendGrid("<YOUR API KEY>");
$from = new SendGrid\Email("Somebody", "etc@example.com");
$subject = "Bla bla";
$to = new SendGrid\Email("Somebody Else", "dest@example.com");
$content = new SendGrid\Content("text/html", 'Your html <img src="cid:myimagecid">');
$mail = new SendGrid\Mail($from, $subject, $to, $content);

$file = 'path/file.jpg';
$file_encoded = base64_encode(file_get_contents($file));
$attachment = new SendGrid\Attachment();
$attachment->setContent($file_encoded);
$attachment->setType("image/jpeg");
$attachment->setContentID("myimagecid");
$attachment->setDisposition("inline");
$attachment->setFilename("filename.jpg");

$mail->addAttachment($attachment);

try {
    $response = $sg->client->mail()->send()->post($mail);
} catch (Exception $e) {
    echo 'Caught exception: ', $e->getMessage(), "\n";
}
var_dump($response); 
```

使用模板时的工作方式相同。

# php - 在 URI jquery 中传递一个对象并在 php 中访问它

> ID：14763699
> 
> 赞同：0
> 
> 时间：2013-02-08T00:26:19.410
> 
> 标签：php, jquery, object, uri, param

我在这里有一个快速的问题。我想通过uri传递一个对象。

所以这里有一组我正在使用的数据，如下所示：

```
a = 'a';
b = 'b';

obj = {
 d : 'd',
 c : 'c'
}

//so now URLencode
var data = '?a=' + URLEncode(a);
var data += '&b=' + URLEncode(b);
var data += '&obj=' + $.param(obj);

loadPage(url, data); 
```

因此，当我在我的 PHP 中加载它时，我希望能够以`obj`数组的形式访问它，如下所示：

```
<?php
...
$_obj =  $this->_request->getParam('obj');

 echo $_obj[d];
 echo $_obj[c]; 
```

输出当然是这样的：

```
d
c 
```

所以，总而言之，您将如何进行并执行此操作以使我的 php 如上所示工作？我非常感谢您的帮助，并提前感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T00:29:50.773

```
$.each(obj, function (key, value) {
    data += "&obj[" + encodeURIComponent(key) + "]=" + encodeURIComponent(value);
}); 
```

# javascript - django Javascript 下拉菜单

> ID：14763701
> 
> 赞同：2
> 
> 时间：2013-02-08T00:26:43.660
> 
> 标签：javascript, python, django, django-forms, dom-events

我是 Python 和 Javascript 编程的新手，我已经学习 Python 几个月了，我很喜欢它。我一直在玩 django，这很酷我想知道如何使这个模型与 Iavascript 一起工作。我希望有人尽可能多地解释所涉及的代码，就像我要全面了解从 django 到 Javascript 的过程一样。

我想动态地是`CarModel.objects.filter(make ='somename')`或只是'somename'。

这是一个正在使用的测试模型，因为它类似于我用于在线教程 (YouTube) 的 Javascript，脚本也如下所示：

```
class Make(models.Model):
    name  = models.CharField(max_length=50,blank=True,null = True)
    #so so so so

class CarModel(models.Model):
    name  = models.CharField(max_length=50,blank=True,null = True)
    make = models.ForeignKey(Make,blank=True,null = True) 
```

现在，您将如何将这样的内容传递给您的 Javascript？

```
class Model(ModelForm):
    make = forms.ModelChoiceField(queryset= Model.objects.none(), required=True)

    def __init__(self, somemake,*args, **kwargs):
        super(Model, self).__init__(*args, **kwargs)
        self.fields['property'].queryset = Model.objects.filter(make = somemake)

    class Meta:
        model = Model
        exclude= ('make')

<script type="text/javascript">
function populate(s1,s2){
var s1 = document.getElementById(s1);
var s2 = document.getElementById(s2);
s2.innerHTML = "";
if(s1.value == "Chevy"){var optionArray = ["|","camaro|Camaro","corvette|Corvette","impala|Impala"];
    } 
else if(s1.value == "Dodge"){
    var optionArray = ["|","avenger|Avenger","challenger|Challenger","charger|Charger"];
    } else if(s1.value == "Ford"){
    var optionArray = ["|","mustang|Mustang","shelby|Shelby"];
    }
    for(var option in optionArray){
    var pair = optionArray[option].split("|");
    var newOption = document.createElement("option");
    newOption.value = pair[0];
    newOption.innerHTML = pair[1];
    s2.options.add(newOption);
    }
    }
</script> 
```

和这里的html

```
Choose Car Make:
    <select id="slct1" name="slct1" onchange="populate(this.id,'slct2')">
          <option value=""></option>
          <option value="Chevy">Chevy</option>
          <option value="Dodge">Dodge</option>
          <option value="Ford">Ford</option>
    </select>

   Choose Car Model:
  <select id="slct2" name="slct2"></select> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T01:39:50.980

你不需要 javascript 来做一些花哨的下拉菜单。你可以使用 Django Forms 来为你做这件事。您所需要的只是提供 forms.py 一些关于用户可以做出的选择的信息，并且您将呈现您的表单，而无需您做更多的事情。

查看我的[forms.py](https://github.com/creativepsyco/panex-web/blob/master/service/forms.py)以了解我是如何做到的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T05:03:09.183

如果你想在 JS 中做，这就是我解决问题的方法。

首先为 2 个选择列表创建一个包含以下内容的模板。

```
<html>
<head>
<script>
var json = {
    "Chevy": ["chev1", "chev2", "chev3"],
    "Dodge": ["dodge1", "dodge2", "dodge3"],
    "Ford": ["ford1", "ford2", "ford3"]
};

function carMake () {
    select = document.getElementById('slct1');
    select.options.length = 0;
    for(make in json) {
        select.options[select.options.length] = new Option(make, make);
    }
}

function carModel(sel) {
    var car_make = sel.options[sel.selectedIndex].value
    select = document.getElementById('slct2');
    select.options.length = 0;
    for(var i=0;i<json[car_make].length;i++) {
        select.options[select.options.length] = new Option(json[car_make][i], i);
    }
}
</script>
</head>

<body>
Choose Car Make:
<select id="slct1" onchange="carModel(this)"></select>
<script> carMake(); </script>

Choose Car Model:
<select id="slct2" name="slct2"></select>
</body>
</html> 
```

上面的 JS 将读取 JSON 对象并在动态填充的 Car Model 选择字段发生更改时更新 Car Make。

要使用您提供的模型生成 JSON 对象，您需要执行以下操作：

在 view.py 文件中：

```
from <your-app>.models import Make
from <your-app>.models import Model
import json

json_dict = {}
for car_make in Make.objects.all():
    json_dict[car_make] = Model.objects.filter(make=car_make)
json_data = json.dumps(json_dict) 
```

然后您将`json_data`其添加到您的响应渲染上下文中。

最后更改上面的模板，以便 JS 变量 json 将被渲染以包含从视图传递到模板的 JSON 对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-10-05T13:57:59.847

您应该在使用 json.dumps 之前将查询集转换为列表，否则它会给您一个错误，即“NOT JSON SERIALIZABLE”

```
from <your-app>.models import Make
from <your-app>.models import Model
import json

json_dict = {}
for car_make in Make.objects.all():
    json_dict[car_make] = list(Model.objects.filter(make=car_make).value())
json_data = json.dumps(json_dict) 
```

# html - 如何将此导航栏向右移动

> ID：14763702
> 
> 赞同：4
> 
> 时间：2013-02-08T00:26:52.500
> 
> 标签：html, css

我是 CSS 新手，我正在尝试使用此代码 - 如果您想查看它的外观，请访问此链接：[https ://www.servage.net/blog/wp-content/uploads/2009 /03/css-menu.html](https://www.servage.net/blog/wp-content/uploads/2009/03/css-menu.html) 这是代码：

```
<html>
    <head>
        <title>CSS based drop-down menu</title> 
    <style type="text/css">

        ul {
            font-family: Arial, Verdana;
            font-size: 14px;
            margin: 0;
            padding: 0;
            list-style: none;
        }
        ul li {
            display: block;
            position: relative;
            float: left;
        }
        li ul { display: none; }
        ul li a {
            display: block;
            text-decoration: none;
            color: #ffffff;
            border-top: 1px solid #ffffff;
            padding: 5px 15px 5px 15px;
            background: #2C5463;
            margin-left: 1px;
            white-space: nowrap;
        }

        ul li a:hover { background: #617F8A; }
        li:hover ul { 
            display: block; 
            position: absolute;
        }
        li:hover li { 
            float: none;
            font-size: 11px;
        }
        li:hover a { background: #617F8A; }
        li:hover li a:hover { background: #95A9B1; }

    </style>        
    </head>
    <body>

        <ul id="menu">
            <li><a href="">Home</a></li> 
            <li><a href="">About</a> 
              <ul>
                <li><a href="">The Team</a></li>
                <li><a href="">History</a></li> 
                <li><a href="">Vision</a></li> 
              </ul> 
            </li> 
            <li><a href="">Products</a> 
              <ul> 
                <li><a href="">Cozy Couch</a></li> 
                <li><a href="">Great Table</a></li> 
                <li><a href="">Small Chair</a></li> 
                <li><a href="">Shiny Shelf</a></li> 
                <li><a href="">Invisible Nothing</a></li> 
              </ul> 
            </li>
            <li><a href="">Contact</a> 
              <ul> 
                <li><a href="">Online</a></li> 
                <li><a href="">Right Here</a></li> 
                <li><a href="">Somewhere Else</a></li> 
              </ul> 
            </li> 
        </ul>   

    </body>
</html> 
```

我对此有 2 个问题：如何在页面右侧制作此导航栏？一些选项卡有下拉列表，当我添加这个 margin-top: 50px 来更改导航栏的位置时，下拉列表会像这样向下移动 ![在此处输入图像描述](../Images/1c726694662d1dbc6d4af6c386638c6a.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-08T00:39:14.347

要`#menu`向右和`50px`向下移动，请添加这些属性

```
#menu {
    position: absolute;
    top: 50px;
    right: 0px;
} 
```

[JSFiddle](http://jsfiddle.net/hnCaz/)

如果要使用`float`and `margin-top`，则必须将边距限制为`#menu`

```
#menu {
    float: right;
    margin-top: 50px;
} 
```

[JSFiddle](http://jsfiddle.net/zCcV4/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T00:31:29.237

您似乎同时针对父 ul 和子 ul

试试看：

```
ul {
margin-top:50px;
}

ul#menu {
float:right;
margin-top:0;
} 
```

通过在 ul 之后添加#menu，您可以定位特定的 UL，因此覆盖其基本 ul 属性

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T00:30:50.203

将 float 属性添加到您的列表中：

```
#menu {
  float: right;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-24T06:04:12.360

如果您使用的是 WordPress 或静态网站，则必须放置此代码才能将导航栏移动到右侧。

```
position: static;
top: 50px;
right: 0px;
color: black;
display: inline-block;
margin-right: 45em; 
```

}

您可以根据您的网站设计改变边距。如果您仍然无法在右侧移动导航，请更改位置：如静态、绝对、相对和继承。

# ruby-on-rails-3 - sort_by 或从关联模型中按行排序

> ID：14763705
> 
> 赞同：0
> 
> 时间：2013-02-08T00:27:32.610
> 
> 标签：ruby-on-rails-3

我正在尝试对提交的索引进行排序。

每次提交`has_one :score`和分数`belongs_to :submission`提交`belongs_to :contest`和比赛`has_many :submissions`

我要排序的行在`submission.score.subtotal`提交>索引中

我试过这个：

```
 @submissions = submission.find(:all, :include => :score).sort_by { |s| s.scores.sub_total }.paginate(:per_page => 10, :page => params[:page]) 
```

我已经为第一场比赛的所有提交分配了分数，但是当我尝试为第一场比赛调出提交>索引（通过参数分配）时，我收到一个错误：

```
NoMethodError at /submissions
undefined method `sub_total' for nil:NilClass 
```

我很确定我需要在某个地方检查 nil ，但我错过了那个地方。

更多信息：

```
def index
  contest_id = params[:contest_id]
  @contest = Contest.find(contest_id)
  submission = Submission.where(:contest_id => params[:contest_id])
  if params[:search].blank?
   @submissions = submission.find(:all, :include => :score).sort_by { |s| s.score.sub_total }.paginate(:per_page => 10, :page => params[:page])
  else 
   @submissions = submission.search(params[:search]).paginate(:per_page => 10, :page => params[:page])
  end
   @search = params[:search] 
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T00:41:46.523

这段代码应该做你需要的：

```
@submissions = Submission.find(:all, :joins => :score, :order => 'scores.sub_total DESC').paginate(:per_page => 10, :page => params[:page]) 
```

我希望这对你有帮助

# php - 测试特定元素节点中的字符串

> ID：14763706
> 
> 赞同：2
> 
> 时间：2013-02-08T00:27:40.207
> 
> 标签：php, html, xpath, selenium, phpunit

在 PHP 单元（使用 Selenium 服务器）中，我试图检查 xpath 中的特定元素节点是否具有某个字符串值，例如

```
<table>
<thead></thead>
<tbody>
    <tr>
        <th>1</th>
        <td>value 1</td>
        <td>value 2</td>
        <td>value c</td>
    </tr>
    <tr>
        <th>2</th>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
    </tr>
</tbody> 
```

使用上面的代码，使用 xpath

```
isElementPresent('//table/tbody/tr[last()-0]/td[last()-1]'); 
```

它会返回真，如果我改成它仍然会返回真`tr[last()-0]`，`tr[last()-1]`

自然地，`isElementPresent`将在循环中生成的 xpath 也将在循环中（用整数替换循环中使用的`$i`和），这很好，但是，我要检查的是里面什么都没有`$j``for()`

使用上面相同的 html 代码，如果我更改 xpath

```
isElementPresent('//table/tbody/tr[last()-$i]/td[last()-1 and text()="${nbsp}"]'); 
```

你会认为它会返回 true`//table/tbody/tr[last()-0]/td[last()-1 and text()="${nbsp}"]`和 false`//table/tbody/tr[last()-1]/td[last()-1 and text()="${nbsp}"]`但是这里是踢球者

使用 Selenium IDE 1.10.0 Plugin for Firefox 通过将 xpath 放入 Target Box 并点击 find 来检查 xpath（检查它是否会在应该找到 xpath 时，`//table/tbody/tr[last()-0]/td[last()-1 and text()="${nbsp}"]`不会突出显示倒数第二个`td`，`tr`它突出显示`td`在最后一个，`tr`就好像 xpath 是`//table/tbody/tr[last()-0]/td[last()-2]`

从我的实验来看，它似乎正在处理 xapth `//table/tbody/tr[last()-0]/td[text()="${nbsp}"]`，这只是第一个文本是空格的实例，如果第二个 tr 像这样就不好了

```
 <tr>
            <th>2</th>
            <td>cows are my friends</td>
            <td>let's go to my room pig!</td>
            <td>&nbsp;</td>
        </tr> 
```

我要使用`isElementPresent('//table/tbody/tr[last()-0]/td[last()-1 and text()="${nbsp}"]');`它仍然会返回true，因为它没有看`last()-1`但是`last()-0`

所以我的问题是，我如何检查特定元素节点是否具有特定字符串

注意 1：我`last()-#`在此页面上使用原因[http://www.w3schools.com/xpath/xpath_syntax.asp](http://www.w3schools.com/xpath/xpath_syntax.asp)它说 IE5，后来说 [0] 是第一个不是，而不是 [1]，就像 Firefox 或 Chrome 一样，在某种意义上这是有道理的，因为这就是数组索引的工作方式，为了完全兼容，我从最后一个节点开始并向后工作，这`last()`将适用于 IE5 及更高版本，并且虽然节点应该相同，但向后移动的逻辑应该是相同的（除非微软想要重新定义它逻辑）

注意 2：我很清楚，一个简单的解决方法是向表中添加标题或 id 属性，但是我正在对其进行测试的页面是由其他人完成的，我想避免为了适应测试用例而修改页面

注意 3：我正在测试的表是使用 JSON 字符串填充的，所以我的测试是当表没有数据时，它是否为空白，如果不是，那么 JSON 字符串在不应该向表中添加数据时

* * *

编辑 1： 似乎 ${nbsp} 在 php 中不起作用，仅在 Selenium IDE 1.10.0 插件中似乎可以识别它，但是通过按住 Alt 并输入 0160 插入空格也可以正常工作

编辑 2：目前我已经在标签中添加了 id 属性以使其正常工作，并且通过检查 @id=[VALUE] 和 text()=[VALUE] 可以很好地工作，但得到这个问题仍然很好回答为当我将 id、title 和/或 class 属性添加到我的所有 html 标签时，最初制作我正在测试的表格的人显然没有，正如我在注释 2 中所说，'我想避免修改页面只是以适应测试用例'

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T04:47:07.077

@Memor-X 使用[SimpleXML](http://php.net/manual/en/book.simplexml.php)加载 xml。那么在phpunit中测试应该很容易。如果我是你，我会在测试内容之前构建依赖测试来验证 xml 结构。

# .htaccess - 在htaccess中重定向重复的url

> ID：14763707
> 
> 赞同：1
> 
> 时间：2013-02-08T00:27:40.937
> 
> 标签：.htaccess, redirect, duplicates

我有重复的网址，我需要在 htaccess 中做一些重定向

例子：

原始网址是：

```
www.mywebsite.com/listofgames/pacman.html  
www.mywebsite.com/listofgames/nintendo.html  
www.mywebsite.com/listofgames/snake.html 
```

我有大约 1000 个游戏名称

重复网址示例：

```
www.mywebsite.com/listofgames/1/pacman.html
www.mywebsite.com/listofgames/1521/pacman.html
www.mywebsite.com/listofgames/52154/pacman.html
www.mywebsite.com/listofgames/abc/pacman.html
www.mywebsite.com/listofgames/opq/pacman.html
www.mywebsite.com/listofgames/opq/1/2/35/pacman.html
www.mywebsite.com/listofgames/154/3562/snake.html
www.mywebsite.com/listofgames/2541/snake.html
www.mywebsite.com/listofgames/524/snake.html
www.mywebsite.com/listofgames/absc/gtar/15/nintendo.html
www.mywebsite.com/listofgames/nije/nintendo.html 
```

我需要将它们重定向到原始网址

所以

```
www.mywebsite.com/listofgames/anynumber/mygamesname.html  
www.mywebsite.com/listofgames/anyword/mygamesname.html  
www.mywebsite.com/listofgames/anyword/anynumber/anyword/mygamesname.html 
```

必须重定向到

```
www.mywebsite.com/listofgames/mygamesname.html 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T01:03:51.500

你可以试试这个：

```
Options +FollowSymlinks
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_URI} ^/listofgames/.*/([^\.]+)\.html/?  [NC]
RewriteRule .*    listofgames/%1.html                    [R=301,L] 
```

永久重定向

`http://www.mywebsite.com/listofgames/any/number/of/folders/mygamesname.html`

带或不带斜杠。

至：

`http://www.mywebsite.com/listofgames/mygamesname.html`

`/listofgames/`有效删除文件夹和 HTML 文件之间的段路径。

假定字符串`listofgames`和扩展名`html`是固定的，而`mygamesname`假定是可变的。

必须保留传入的 URL 结构以使规则集起作用： URL 中的最后一个字符串必须是 HTML 文件。

对于静默映射，`R=301`从`[R=301,L]`

# android - 我们可以更改Android中标签的颜色吗

> ID：14763712
> 
> 赞同：2
> 
> 时间：2013-02-08T00:28:05.510
> 
> 标签：android

我想更改每个选项卡的颜色。例如，我想让第一个标签变成红色，第二个标签是绿色，第三个是蓝色等等。（如下所示）我的标签中不会有任何文字，我只会放图标。

![在此处输入图像描述](../Images/b1c5c0d58ca918a4f15dc09c409f7f2f.png) ![在此处输入图像描述](../Images/eaaf61a0e6bef1b6ebc41efa00714238.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T02:37:54.643

smali 中应该有一些代码（如果你在 smali 中编码？ - 如果不编译你的应用程序然后使用 apktool 反编译）应该引用颜色和一些引用“从父级继承”的代码。这是对它自己的框架的引用。在某些情况下，您可以通过在特定于颜色的行的 > 符号之后提供对指定十六进制代码颜色的引用来覆盖。

您需要为每个选项卡 smali 类指定不同的十六进制代码。您可能还需要检查是否存在将始终引用回框架的“全局”覆盖。这些将优先于您可能指定的任何十六进制。当我尝试将三星 Galaxy S2 上的弹出菜单设置为当时当前 Galaxy S3 的蓝绿色时，我自己也遇到了麻烦。它可能会变得非常棘手，但请耐心等待。

# web-services - 调用另一个控制器的操作 - 文件上传器的设计注意事项 - MVC 4

> ID：14763713
> 
> 赞同：6
> 
> 时间：2013-02-08T00:28:06.570
> 
> 标签：web-services, asp.net-mvc-4, command-pattern

我有一种情况，我正在讨论如何构建我的控制器。

考虑以下控制器：

```
 public class FileSharingController : Controller
    {

        private readonly ICommandBus commandBus;

        public FileSharingController(ICommandBus commandBus)
        {
            this.commandBus = commandBus;
        }

        [HttpPost]     
        public ActionResult PrepareMetadata(int blocksCount, string fileName, long fileSize)
        {
             ...
        }

        [HttpPost]
        public ActionResult ClearFileMetadata(string fileName){
            ...
        }

        [HttpPost] [ValidateInput(false)] //$.ajax({ data: html5FormDataFileChunk , processData: false ... })
        public ActionResult UploadBlock(string fileName, int blockId){

             var fileUploadCommand = (FileUploadCommand)ExtractFromSessionData(fileName);
             var result = commandBus.Submit(fileUploadCommand);
             ...
        }

        public ActionResult CommitFileUploads(string[] filesToCommit){
             var commitFileUploadCommand = (CommitFileUploadCommand)ExtractFromSessionData(fileName);
             var result = commandBus.Submit(commitFileUploadCommand );
             ...
        } 
```

在这个控制器中，我使用命令模式并将模型传递给与我的域接口的 commandBus。控制器上的前三个`[HttpPost]`方法用于处理来自响应式文件上传 UI 的 jQuery ajax 调用。

考虑用户填写表格（采访）并上传一些文件的情况。尽管用户可以在提交表单之前上传文件，但我不希望在提交表单并通过验证之前提交上传的文件。这就是为什么控制器上的最后一个方法不是 http 端点的原因。因此，我有以下控制器：

```
 public class InterviewController : Controller
    {
        [HttpGet] 
        public ActionResult UserInterview()
        {
            InterviewViewModel viewModel = new InterviewViewModel ();
            return PartialView(viewModel);
        }

        [HttpPost] [AllowAnonymous]
        public ActionResult UserInterview(InterviewViewModel viewModel)
        {
            if(ModelState.IsValid)
            {
                var fileSharingController = new FileSharingController();
                fileSharingController.CommitFileUploads(viewModel.Files);
            }

            return PartialView(viewModel);
        }

    } 
```

问题是我正在使用 IoC 将 a`commandBus`注入到 FileSharingController 中，所以我不能像我正在做的那样使用默认构造函数来实例化它。

我要考虑的选择：

*   创建一个自定义控制器工厂以允许在代码中的任何位置实例化我的控制器。
*   在 WebAPI 控制器中打开我的 FileSharingController 并将其视为服务

对于这种情况，哪种设计路径更好？如果是后一种情况，我怎样才能保持`CommitFileUploads()`方法私有？我不希望它被暴露为可以在不首先验证表单的其余部分的情况下触发的端点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T18:56:12.640

你可以像这样实例化你的控制器：

```
ICommandBus commandBus = DependencyResolver.Current.GetService<ICommandBus>();
var fileShareController = new FileSharingController(commandBus); 
```

通用 GetService() 方法是扩展方法，因此请确保您有“使用 System.Web.Mvc;” cs 文件中的行。

但是，最好有一个帮助类来负责保存/存储已上传的文件，并从两个控制器调用它，而不是手动实例化控制器。

例如：

```
public class FileUploadManager
{
    public FileUploadManager(ICommandBus commandBus, HttpSessionStateBase sessionState)
    {
         //....
    }
} 
```

然后你称之为：

```
ICommandBus commandBus = DependencyResolver.Current.GetService<ICommandBus>();
var fileShareController = new FileUploadManager(commandBus, this.HttpContext.Session); 
```

或者，如果您不想使用 DependencyResolver，则将 ICommandBus 传递给两个控制器的构造函数，并使用该引用来实例化帮助程序类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T10:20:41.943

只需创建另一个控制器的对象并使用其所有公共方法。

# qt - Qt Creator 无法构建调试器助手

> ID：14763714
> 
> 赞同：1
> 
> 时间：2013-02-08T00:28:14.987
> 
> 标签：qt, clang++

我在 Qt 论坛上问过这个问题，但这些天他们似乎很安静。

我正在运行相对较新的 Qt Creator 2.6.2（带有 Qt 5.0.1）。当我尝试构建调试器助手时，我收到以下错误：

> 使用工具链“GCC（x86 64 位）”构建帮助程序...在 /Developer/Applications/Qt/5.0.1/clang_64//qtc-debugging-helper/ 中构建帮助程序“GDB 助手”
> 
> 运行 /Developer/Applications/Qt/5.0.1/clang_64/bin/qmake -spec macx-clang dumper.pro -nocache CONFIG+=x86_64 ...
> 
> 运行 /usr/bin/make all -k ... 在 /Developer/Applications/Qt/5.0.1/clang_64//qtc-debugging-helper/ 中运行“/usr/bin/make all -k”时出错：进程返回退出代码 2：clang++ -c -pipe -mmacosx-version-min=10.6 -O2 -Wall -W -fPIC -DUSE_QT_CORE=1 -DUSE_QT_GUI=1 -DQT_NO_DEBUG -DQT_WIDGETS_LIB -DQT_GUI_LIB -DQT_CORE_LIB -I../mkspecs/macx -clang -I。-I../include -I../include/QtWidgets -I../lib/QtWidgets.framework/Versions/5/Headers -I../include/QtGui -I../lib/QtGui.framework/Versions /5/Headers -I../include/QtCore -I../lib/QtCore.framework/Versions/5/Headers -I. -I/System/Library/Frameworks/OpenGL.framework/Versions/A/Headers -I/System/Library/Frameworks/AGL.framework/Headers -o dumper.o dumper.cpp make: clang++: No such file or directory make : *** [dumper.o] 错误 1 ​​制作：由于错误，目标“全部”未重新制作。构建失败。

所以，我看到它正在寻找一个我显然没有的名为“clang++”的文件。有人可以向我解释一下解决方法是什么吗？我习惯于只使用 Qt 的预构建安装包。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T02:10:28.840

您需要为 Xcode 安装命令行工具包，其中包括“clang++”编译器。

您可以[在](https://developer.apple.com/xcode/)`Looking for additional developer tools?`链接下找到它们。

# php - PHP array() 构造函数创建什么数据结构？

> ID：14763716
> 
> 赞同：1
> 
> 时间：2013-02-08T00:28:37.820
> 
> 标签：php, arrays, data-structures

虽然我发现大多数 PHP 批评充其量是迂腐的，但缺乏清晰的数据结构排列正在成为我日常工作的实际限制。array() 构造函数创建了声称可以做所有事情的数据结构，但实际上我最终缺乏为了有效使用它而需要的相关信息。具体来说，我不知道它到底是什么数据结构。是清单吗？什么样的清单？指针数组？一棵树？哈希图？

查找是如何执行的？由于相同的数据结构具有数字和“关联”查找，我假设不能像在 C 数组中那样执行基于偏移量的查找。

对于少量的数据，我自然不会太在意这样的性能优化。但是，我开发的软件开始用于中等大的数据结构会稍微减慢速度的场景。

此外，是否可以显式创建每个提到的数据结构？如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T00:55:51.110

在 PHP 中，数组在内部表示为双向链表。有一些 SPL 类可以让您创建[其他数据结构](http://www.php.net/manual/en/spl.datastructures.php)。

PHP 的部分魔力在于不必选择不同的数据结构，但正如您所观察到的，它也有性能限制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T02:07:35.557

我建议最好主要将数组视为哈希表实现，就像您花一点时间研究源代码一样，您会注意到虽然 Zend HT 可以作为 DLL 遍历，但您可能有兴趣比较大多数操作（添加，随机访问）是典型的 HT 实现。

在我们纯粹处理数字键的情况下，它本质上是对 C 数组的传递，而不涉及哈希函数，在这种情况下，每个键将恰好有一个 HT 存储桶。当然，动态扩展数组的能力是通过周期性的内存重新分配来实现的，所以你会在那里受到惩罚（如果你没有在 C++ 中预先分配一个大的 std::vector 可能会受到影响）。

HTH。

# java - 如何在 Java 中封装枚举

> ID：14763719
> 
> 赞同：2
> 
> 时间：2013-02-08T00:28:42.310
> 
> 标签：java, oop, enums, encapsulation

我正在尝试创建一个 StandardCard 类，该类将枚举用于西装和数字。我有代码，因为它目前在下面。

我的问题是，将卡片添加到卡片组的 Driver 类应该可以访问枚举。最近阅读了设计模式，我觉得我应该有一个 StandardCardEnums 类，并在 StandardCard 类中创建该类的一个对象以增加模块化。这是要走的路吗？感觉很笨拙，因为我需要做类似的事情

```
StandardCardEnum myEnums = new StandardCardEnum;
private StandardCardEnum.Suit suit;
etc..... 
```

我当前的代码如下，我看到的问题是 1) 枚举在卡片类中是硬编码的，重复肯定会发生 2) Driver 类需要了解枚举以填充卡片组中的卡片，因此违反对象封装。

任何有更多经验的人都可以为我指出一个好的标准来开始适用于这些类型的情况吗？我正试图从编程转向软件开发。我希望能够创建一个模块化的纸牌游戏框架，让我能够以最少的努力添加不同的纸牌游戏，甚至是套牌组合和纸牌类型。

```
public class StandardCard extends Card
{
public enum Suit {CLUBS, DIAMONDS, HEARTS , SPADES };
public enum Number {ACE, TWO, THREE, FOUR, FIVE, SIX, SEVEN, EIGHT, NINE, TEN, JACK, QUEEN, KING};

private Suit suit;
private Number number;

public StandardCard(StandardCard.Suit suit, StandardCard.Number number)
{
    this.suit = suit;
    this.number = number;
}

public StandardCard()
{
}

public Suit getSuit()
{
    return suit;
}

public Number getNumber()
{
    return number;
}

public void setSuit(Suit s)
{
    this.suit = s;
}

public void setNumber(Number n)
{
    this.number = n;
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T00:31:04.747

将枚举作为顶级类放入它们自己的文件中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T00:51:00.583

You should rather make your enums `static`:

```
public static enum Suit {CLUBS, DIAMONDS, HEARTS , SPADES };
public static enum Number {ACE, TWO, THREE, FOUR, FIVE, SIX, SEVEN, EIGHT, NINE, TEN, JACK, QUEEN, KING}; 
```

This way you can access them as `StandardCard.Suit.CLUBS` from anywhere in your code (e.g. from `Driver`), but they're still encapsulated into `StandardCard` - they have no meaning outside this world.

# mouse - Processing.js：不会跟踪 mouseMoved()？

> ID：14763720
> 
> 赞同：0
> 
> 时间：2013-02-08T00:28:43.357
> 
> 标签：mouse, processing

当移植到 Javascript 时，我在处理草图中跟踪鼠标的移动时遇到问题。据我所知，该程序运行良好，只是它不会激活 mouseMoved，无论是作为事件还是作为逻辑操作。我也试过 pMousex != mouseX 也没有用。有什么帮助吗？

```
color[] palette = new color[5];
color c1;
color c2;
color c3;
color c4;
color c5;
color bgColor;

int swarmSize;
int xVariance;
int yVariance;
int maxSize;
int maxOpacity;
int maxStroke;

//Non-definables for swarm gen
int sideMod;
int sSize;
int opacity;
int stroke;

void setup() {
size(600, 400);

c1= #BF2633;
c2= #A6242F;
c3= #D9CEAD;
c4= #C0B18F;
c5= #011C26; 

bgColor = color(23, 76, 79);

palette[0] = c1;
palette[1] = c2;
palette[2] = c3;
palette[3] = c4;
palette[4] = c5;

swarmSize = 1;
xVariance = 60;
yVariance = 60;
maxSize = 30;
maxOpacity = 255;
maxStroke = 4; 
```

}

```
void draw() { //tried tracking pMouse != mouse here, no dice
}

void drawSwarm() {
  for (int i = 0; i < swarmSize; i++)
{
 if (random(1, 10) < 5) {
  sideMod = -1;
} 
else {
  sideMod = 1;
}
stroke = int(random(1, maxStroke));
sSize = int(random(1, maxSize));
opacity = int(random(0, maxOpacity));

strokeWeight(stroke);
stroke(palette[int(random(1, 5))], opacity);
fill(palette[int(random(1, 5))], opacity);

// strokeWeight(int(random(1, 7)));
ellipse(mouseX + int(random(1, xVariance)) * sideMod, mouseY+ int(random(1, yVariance)), sSize, sSize); 
```

} }

```
void mouseMoved() { //Doesn't work in processing.js
drawSwarm();
}

void keyPressed() {
background(bgColor);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T13:45:21.303

下面的代码工作得很好（见[http://jsfiddle.net/qPpRQ/](http://jsfiddle.net/qPpRQ/)）

```
int x,y;
void draw() {
  point(x,y);
}
void mouseMoved() {
  x = mouseX;
  y = mouseY;
  redraw();
} 
```

通常，鼠标处理程序中的绘制指令不能很好地工作，您通常希望根据鼠标位置设置您的状态，然后调用 redraw()，并调用实际将内容绘制到屏幕的代码绘制，而不是从您的事件处理程序。

# node.js - 猫鼬删除文档中的数组元素并保存

> ID：14763721
> 
> 赞同：103
> 
> 时间：2013-02-08T00:28:56.787
> 
> 标签：node.js, mongoose

我的模型文档中有一个数组。我想根据我提供的键删除该数组中的元素，然后更新 MongoDB。这可能吗？

这是我的尝试：

```
var mongoose = require('mongoose'),
    Schema = mongoose.Schema;

var favorite = new Schema({
    cn: String,
    favorites: Array
});

module.exports = mongoose.model('Favorite', favorite, 'favorite');

exports.deleteFavorite = function (req, res, next) {
    if (req.params.callback !== null) {
        res.contentType = 'application/javascript';
    }
    Favorite.find({cn: req.params.name}, function (error, docs) {
        var records = {'records': docs};
        if (error) {
            process.stderr.write(error);
        }
        docs[0]._doc.favorites.remove({uid: req.params.deleteUid});

        Favorite.save(function (error, docs) {
            var records = {'records': docs};
            if (error) {
                process.stderr.write(error);
            }
            res.send(records);

            return next();
        });
    });
}; 
```

到目前为止，它找到了文档，但删除或保存都有效。

* * *

## 回答 #1

> 赞同：158
> 
> 时间：2015-01-13T08:01:32.543

您也可以直接在 MongoDB 中进行更新，而无需加载文档并使用代码对其进行修改。使用`$pull`or`$pullAll`运算符从数组中删除项目：

```
Favorite.updateOne({ cn: req.params.name }, {
    $pullAll: {
        favorites: req.params.deleteUid,
    },
}); 
```

**然后从数组中删除对象**

```
Favorite.updateOne({ cn: req.params.name }, {
    $pullAll: {
        favorites: [{_id: req.params.deleteUid}],
    },
}); 
```

（您也可以对多个文档使用 updateMany）

[http://docs.mongodb.org/manual/reference/operator/update/pullAll/](http://docs.mongodb.org/manual/reference/operator/update/pullAll/)

* * *

## 回答 #2

> 赞同：79
> 
> 时间：2014-07-24T20:18:43.550

检查的答案确实有效，但在 MongooseJS 最新版本中，您应该使用**pull**。

```
doc.subdocs.push({ _id: 4815162342 }) // added
doc.subdocs.pull({ _id: 4815162342 }) // removed 
```

[https://mongoosejs.com/docs/api.html#mongoosearray_MongooseArray-pull](https://mongoosejs.com/docs/api.html#mongoosearray_MongooseArray-pull)

我也只是在查这个。

**请参阅丹尼尔的答案以获取正确答案。好多了。**

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2018-10-12T06:51:23.557

上面的答案显示了如何删除数组，这里是如何从数组中拉出对象。

参考：[https ://docs.mongodb.com/manual/reference/operator/update/pull/](https://docs.mongodb.com/manual/reference/operator/update/pull/)

```
db.survey.update( // select your doc in moongo
    { }, // your query, usually match by _id
    { $pull: { results: { $elemMatch: { score: 8 , item: "B" } } } }, // item(s) to match from array you want to pull/remove
    { multi: true } // set this to true if you want to remove multiple elements.
) 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-02-08T09:19:44.420

由于收藏夹是一个数组，您只需将其拼接起来并保存文档。

```
var mongoose = require('mongoose'),
    Schema = mongoose.Schema;

var favorite = new Schema({
    cn: String,
    favorites: Array
});

module.exports = mongoose.model('Favorite', favorite);

exports.deleteFavorite = function (req, res, next) {
    if (req.params.callback !== null) {
        res.contentType = 'application/javascript';
    }
    // Changed to findOne instead of find to get a single document with the favorites.
    Favorite.findOne({cn: req.params.name}, function (error, doc) {
        if (error) {
            res.send(null, 500);
        } else if (doc) {
            var records = {'records': doc};
            // find the delete uid in the favorites array
            var idx = doc.favorites ? doc.favorites.indexOf(req.params.deleteUid) : -1;
            // is it valid?
            if (idx !== -1) {
                // remove it from the array.
                doc.favorites.splice(idx, 1);
                // save the doc
                doc.save(function(error) {
                    if (error) {
                        console.log(error);
                        res.send(null, 500);
                    } else {
                        // send the records
                        res.send(records);
                    }
                });
                // stop here, otherwise 404
                return;
            }
        }
        // send 404 not found
        res.send(null, 404);
    });
}; 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-09-23T10:45:24.633

这对我有用，真的很有帮助。

```
SubCategory.update({ _id: { $in:
        arrOfSubCategory.map(function (obj) {
            return mongoose.Types.ObjectId(obj);
        })
    } },
    {
        $pull: {
            coupon: couponId,
        }
    }, { multi: true }, function (err, numberAffected) {
        if(err) {
            return callback({
                error:err
            })
        }
    })
}); 
```

我有一个模型，它的名称是`SubCategory`，我想从这个类别数组中删除优惠券。我有一系列类别，所以我使用了`arrOfSubCategory`. 所以我在运算符的帮助下使用 map 函数从这个数组中获取每个对象数组`$in`。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-06-06T04:58:18.730

```
keywords = [1,2,3,4];
doc.array.pull(1) //this remove one item from a array
doc.array.pull(...keywords) // this remove multiple items in a array 
```

如果你想使用`...`你应该`'use strict';`在你的 js 文件的顶部调用；:)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2021-08-18T04:02:04.737

我在我的项目中使用了这种格式并且它有效

```
router.delete('/dashboard/participant/:id', async (req, res, next) => {
    try {
        const participant = await Participant.findByIdAndDelete({ _id: req.params.id });
        // { $pull: { templates: { _id: templateid } } },
        const event = await Event.findOneAndUpdate({ participants: participant._id }, { $pull: { participants: participant._id } }, { new: true });
        res.status(200).json({ request: 'Deleted', participant, event });
    } catch (error) {
        res.json(error)
    }
}); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2022-02-18T12:49:58.100

```
Favorite.update({ cn: req.params.name }, { "$pull": { "favorites": { "_id": favoriteId } }}, { safe: true, multi:true }, function(err, obj) {
    //do something smart
}); 
```

# python - Python 对浮点数取模

> ID：14763722
> 
> 赞同：48
> 
> 时间：2013-02-08T00:29:05.320
> 
> 标签：python, modulo

谁能解释模运算符在 Python 中的工作原理？我不明白为什么`3.5 % 0.1 = 0.1`。

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2013-02-08T00:44:16.777

实际上，事实并非`3.5 % 0.1`如此`0.1`。您可以很容易地对此进行测试：

```
>>> print(3.5 % 0.1)
0.1
>>> print(3.5 % 0.1 == 0.1)
False 
```

实际上，在大多数系统上，`3.5 % 0.1`是`0.099999999999999811`. 但是，在某些版本的 Python 上，`str(0.099999999999999811)`是`0.1`：

```
>>> 3.5 % 0.1
0.099999999999999811
>>> repr(3.5 % 0.1)
'0.099999999999999811'
>>> str(3.5 % 0.1)
'0.1' 
```

现在，您可能想知道为什么`3.5 % 0.1`is`0.099999999999999811`而不是`0.0`. 这是因为通常的浮点舍入问题。如果您还没有阅读[What Every Computer Scientist Should Know About Floating-Point Arithmetic](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)，那么您应该——或者至少是该特定问题的简短[维基百科](http://en.wikipedia.org/wiki/Floating_point#Accuracy_problems)摘要。

还要注意`3.5/0.1`不是`34`，它是`35`。所以，`3.5/0.1 * 0.1 + 3.5%0.1`is `3.5999999999999996`，它甚至不*接近*`3.5`。这对于模数的定义非常重要，在 Python 和几乎所有其他编程语言中都是错误的。

但是 Python 3 来拯救那里。大多数知道的人都`//`知道这是你如何在整数之间进行“整数除法”，但没有意识到这是你如何在*任何*类型之间进行模数兼容的除法。`3.5//0.1`是`34.0`，所以`3.5//0.1 * 0.1 + 3.5%0.1`是（至少在一个小的舍入误差内）`3.5`。这已被向后移植到 2.x，因此（取决于您的确切版本和平台）您可以依赖它。而且，如果没有，您可以使用`divmod(3.5, 0.1)`，它会一直返回（在舍入误差内）`(34.0, 0.09999999999999981)`回到时间的迷雾中。当然，您仍然希望这是`(35.0, 0.0)`，不是`(34.0, almost-0.1)`，但由于舍入错误，您不能拥有它。

如果您正在寻找快速修复，请考虑使用以下[`Decimal`](http://docs.python.org/2/library/decimal.html)类型：

```
>>> from decimal import Decimal
>>> Decimal('3.5') % Decimal('0.1')
Decimal('0.0')
>>> print(Decimal('3.5') % Decimal('0.1'))
0.0
>>> (Decimal(7)/2) % (Decimal(1)/10)
Decimal('0.0') 
```

这不是灵丹妙药——例如，当运算的确切值不能以 10 为基数有限表示时，你仍然必须处理舍入误差——但舍入误差更符合人类直觉的预期有问题。（还有一些优势`Decimal`在于`float`您可以指定显式精度、跟踪有效数字等，并且它实际上在从 2.4 到 3.3 的所有 Python 版本中都是相同的，而有关的详细信息同时`float`更改了两次。它是只是它并不完美，因为那是不可能的。）但是当您事先知道您的数字都可以精确地以 10 为底表示，并且它们不需要比您配置的精度更多的数字时，它将起作用。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-02-08T00:56:39.797

模数为您`rest`提供一个除法。`3.5`除以`0.1`应该给你`35`剩下的`0`。但由于浮点数基于 2 的幂，因此数字并不*准确*，并且会出现舍入错误。

如果您需要对十进制数进行精确除法，请使用十进制模块：

```
>>> from decimal import Decimal
>>> Decimal('3.5') / Decimal('0.1')
Decimal('35')
>>> Decimal('3.5') % Decimal('0.1')
Decimal('0.0') 
```

* * *

当我被抨击我的回答具有误导性时，整个故事就来了：

Python 浮点数`0.1`略大于十分之一：

```
>>> '%.50f' % 0.1
'0.10000000000000000555111512312578270211815834045410' 
```

如果将浮点数`3.5`除以这样的数字，您将得到几乎`0.1`.

让我们从数字开始`0.11`，继续在两位数之间添加零，`1`以使其更小，同时保持大于`0.1`。

```
>>> '%.10f' % (3.5 % 0.101)
'0.0660000000'
>>> '%.10f' % (3.5 % 0.1001)
'0.0966000000'
>>> '%.10f' % (3.5 % 0.10001)
'0.0996600000'
>>> '%.10f' % (3.5 % 0.100001)
'0.0999660000'
>>> '%.10f' % (3.5 % 0.1000001)
'0.0999966000'
>>> '%.10f' % (3.5 % 0.10000001)
'0.0999996600'
>>> '%.10f' % (3.5 % 0.100000001)
'0.0999999660'
>>> '%.10f' % (3.5 % 0.1000000001)
'0.0999999966'
>>> '%.10f' % (3.5 % 0.10000000001)
'0.0999999997'
>>> '%.10f' % (3.5 % 0.100000000001)
'0.1000000000' 
```

最后一行给人的印象是我们终于达到了`0.1`，但改变格式字符串揭示了真正的本质：

```
>>> '%.20f' % (3.5 % 0.100000000001)
'0.09999999996600009156' 
```

python 的默认浮点格式根本没有显示足够的精度，因此`3.5 % 0.1 = 0.1`和`3.5 % 0.1 = 35.0`. 确实是`3.5 % 0.100000... = 0.999999...`和`3.5 / 0.100000... = 34.999999....`。在除法的情况下，您甚至会得到最终四舍五入的*确切*结果。`34.9999...``35.0`

* * *

有趣的事实：如果您使用一个略小于 的数字`0.1`并执行相同的操作，您最终会得到一个略大于 的数字`0`：

```
>>> 1.0 - 0.9
0.09999999999999998
>>> 35.0 % (1.0 - 0.9)
7.771561172376096e-15
>>> '%.20f' % (35.0 % (1.0 - 0.9))
'0.00000000000000777156' 
```

* * *

使用 C++，你甚至可以证明`3.5`除以浮点数`0.1`只是`35`更小的东西。

```
#include <iostream>
#include <iomanip>

int main(int argc, char *argv[]) {
    // double/float, rounding errors do not cancel out
    std::cout << "double/float: " << std::setprecision(20) << 3.5 / 0.1f << std::endl;
    // double/double, rounding errors cancel out
    std::cout << "double/double: " << std::setprecision(20) << 3.5 / 0.1 << std::endl;
    return 0;
} 
```

[http://ideone.com/fTNVho](http://ideone.com/fTNVho)

在 Python`3.5 / 0.1`中为您提供了确切的结果，`35`因为舍入误差相互抵消。真的是`3.5 / 0.100000... = 34.9999999...`。并且`34.9999...`最终如此之长，以至于您最终得到`35`. C++ 程序很好地展示了这一点，因为您可以混合使用 double 和 float 并使用浮点数的精度。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T00:37:38.403

它与浮点运算的不精确性有关。`3.5 % 0.1`得到我`0.099999999999999811`，所以 Python 认为 0.1 最多分为 3.5 34 次，剩下 0.099999999999999811。我不确定到底使用了什么算法来实现这个结果，但这就是要点。

# data-binding - Coldfusion：需要禁用或阻止“Error invoking CFC - server error”错误弹出消息

> ID：14763726
> 
> 赞同：0
> 
> 时间：2013-02-08T00:29:24.777
> 
> 标签：data-binding, coldfusion, cfc, server-error, cfgrid

我有一个 .cfm 和 .cfc 用于在 .cfm 上的 cfgrid 中编辑数据，它可以工作，但是 10% 的时间我会收到以下错误消息：

“**调用 CFC /test/editCFgrid.cfc 时出错：内部服务器错误**”

我尝试使用调试建议，但没有运气。

这是 CFM 代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
</head>

<body>
<cfform name="artistform">
            <cfgrid format="html" name="artistgrid" pagesize=11
            striperows="yes" 
            bind="cfc:editCFgrid.getArtists({cfgridpage},{cfgridpagesize},{cfgridsortcolumn},{cfgridsortdirection})"
            delete="yes" insert="yes" selectmode="edit"
            onchange="cfc:editCFgrid.saveArtist({cfgridaction},{cfgridrow},{cfgridchanged})">
                <cfgridcolumn name="firstname" header="First Name" />
                <cfgridcolumn name="lastname" header="Last Name" />
                <cfgridcolumn name="address" header="Address" />
                <cfgridcolumn name="city" header="City" />
                <cfgridcolumn name="state" header="State" />
                <cfgridcolumn name="postalcode" header="Postal Code" />
                <cfgridcolumn name="email" header="Email" />
                <cfgridcolumn name="phone" header="Phone" />
                <cfgridcolumn name="fax" header="Fax" />
                <cfgridcolumn name="thepassword" header="Password" />
</cfgrid>
</cfform>
</body>
</html> 
```

这是CFC代码：

```
<cfcomponent output="FALSE">
    <cffunction name="getArtists" hint="I extract artists from the database" access="remote" output="FALSE" returntype="struct">
        <cfargument name="page" required="TRUE" hint="the page the grid is on" />
        <cfargument name="pagesize" required="TRUE" hint="records displayed per page" />
        <cfargument name="gridsortcolumn" required="TRUE" hint="selected column to sort" />
        <cfargument name="gridsortdirection" required="TRUE" hint="the sort direction" />
        <cfset var qArtists = "" />

        <cfif arguments.gridsortcolumn eq "">
            <cfset arguments.gridsortcolumn = "lastname" />
            <cfset arguments.gridsortdirection = "asc" />
        </cfif>

            <cfquery name="qArtists" datasource="test_database">
                SELECT *
                FROM Artists
                ORDER BY #arguments.gridsortcolumn# #arguments.gridsortdirection#
            </cfquery>

        <cfreturn QueryConvertForGrid( qArtists, arguments.page, arguments.pagesize ) />
    </cffunction>

    <cffunction name="saveArtist" type="any" hint="I insert, update or delete an artist" access="remote" output="FALSE" returntype="void">
        <cfargument name="gridaction" type="any" required="TRUE" hint="I for insert, U for update and D for delete" />
        <cfargument name="gridrow" type="any" required="TRUE" hint="the rows being inserted or updated" />
        <cfargument name="gridchanged" type="any" hint="the changes" />
        <cfset var qInsertArtist = "" />
        <cfset var qUpdateArtist = "" />
        <cfset var qDeleteArtist = "" />

        <cfif IsStruct( arguments.gridrow ) and IsStruct( arguments.gridchanged )>
            <cfif arguments.gridaction eq "I">
                <cfquery name="qInsertArtist" datasource="test_database">
                    INSERT INTO Artists
                        (firstname, lastname, address, city, state, postalcode, email, phone, fax, thepassword)
                    VALUES
                        (<cfqueryparam cfsqltype="cf_sql_varchar" value="#arguments.gridrow.firstname#" />, 
                        <cfqueryparam cfsqltype="cf_sql_varchar" value="#arguments.gridrow.lastname#" />, 
                        <cfqueryparam cfsqltype="cf_sql_varchar" value="#arguments.gridrow.address#" />, 
                        <cfqueryparam cfsqltype="cf_sql_varchar" value="#arguments.gridrow.city#" />, 
                        <cfqueryparam cfsqltype="cf_sql_varchar" value="#arguments.gridrow.state#" />, 
                        <cfqueryparam cfsqltype="cf_sql_varchar" value="#arguments.gridrow.postalcode#" />, 
                        <cfqueryparam cfsqltype="cf_sql_varchar" value="#arguments.gridrow.email#" />, 
                        <cfqueryparam cfsqltype="cf_sql_varchar" value="#arguments.gridrow.phone#" />, 
                        <cfqueryparam cfsqltype="cf_sql_varchar" value="#arguments.gridrow.fax#" />, 
                        <cfqueryparam cfsqltype="cf_sql_varchar" value="#arguments.gridrow.thepassword#" />)
                </cfquery>

            <cfelseif arguments.gridaction eq "U">
                <cfset var colname = StructKeyList( arguments.gridchanged ) />
                <cfset var value = StructFind( arguments.gridchanged, colname ) />
                    <cfquery name="qUpdateArtist" datasource="test_database">
                        UPDATE Artists
                        SET #colname# = <cfqueryparam value="#value#" />
                        WHERE artistid = <cfqueryparam cfsqltype="cf_sql_integer" value="#arguments.gridrow.artistid#" />
                    </cfquery>

            <cfelseif arguments.gridaction eq "D">
                <cfquery name="qDeleteArtist" datasource="test_database">
                DELETE FROM Artists 
                WHERE artistid = <cfqueryparam cfsqltype="cf_sql_integer" value="#arguments.gridrow.artistid#" />
                </cfquery>
            </cfif>
        </cfif>
    </cffunction>
</cfcomponent> 
```

每个功能（编辑、插入、删除等）都有效，但它会随机产生错误。最终，我正在寻找一个可以忽略/阻止/“确定”错误消息的代码，这样用户就不会看到它。

任何帮助将不胜感激！我花了一整天（9 个小时）在谷歌上搜索答案，但我没有找到任何答案。我无权访问 CF 管理日志，我只是一个普通的开发人员。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T01:04:42.960

Google chrome、firefox 中的 firebug、IE 开发者工具都可以帮助您。

在谷歌浏览器（我的偏好）中，右键单击您的页面 > 检查元素。然后转到网络选项卡。您必须刷新您的网页。然后您将在文件列表中看到您的 cfc（可能是 RED）。右键单击 > 在新选项卡中打开，您将直接打开 cfc 并调用所有参数。然后您应该能够看到您的错误。

没有忽略/阻止/确定。您需要修复错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T14:08:25.043

可能是超时或 SQL 错误。要获得完整的错误，请使用：cferror，此标记显示完整的调试信息（比调试服务器信息更好）我通过邮件发送给我：

把它放在你的应用程序文件上：

```
<cferror type="exception" template="error.cfm" />
<cferror type="request" template="error.cfm" /> 
```

创建一个“error.cfm”文件：

```
"Error message"
<cfsavecontent variable="errorContent">
<cfoutput>
An error occurred: http://#cgi.server_name##cgi.script_name#?#cgi.query_string#<br />
Time: #dateFormat(now(), "short")# #timeFormat(now(), "short")#<br />

<h2>Error:</h2>
<cfdump var="#error#" label="Error">
<h2>Form:</h2>
<cfdump var="#form#" label="Form">
<h2>URL:</h2>
<cfdump var="#url#" label="URL">
<h2>SESSION:</h2>
<cfdump var="#SESSION#" label="SESSION">

</cfoutput>
</cfsavecontent>

<cfmail to="mail@mymail.com" from="mail@mymail.com" subject="Error on #cgi.server_name#: #error.message#" type="html">
#errorContent#
</cfmail> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T20:46:42.367

有一种方法可以使用以下脚本忽略/阻止/确定“错误”消息：

```
<script>ColdFusion.setGlobalErrorHandler(function (error) 
{mygrid = ColdFusion.Grid.refresh ('artistgrid', false);
}
);
</script> 
```

将此脚本插入 CFM 文件中，您就可以开始了！因为我遇到的错误没有影响 cfgrid 的功能（编辑单元格）（弹出消息比其他任何东西更令人讨厌）。希望这个解决方案可以帮助其他人！

您不需要在脚本中使用“Grid.refresh”命令，您可以使用任何您想要的命令。

感谢所有试图回答我问题的人！

# android - 为什么 TabWidget/TabHost 不工作？

> ID：14763735
> 
> 赞同：0
> 
> 时间：2013-02-08T00:30:19.133
> 
> 标签：android, android-layout, tabs, keyboard, layout-inflater

我是 android 开发的菜鸟，我正在尝试制作自定义标签。但是，当我运行我的应用程序时，选项卡会填满屏幕的整个高度，并且由于某种原因，在 OnCreate 期间会出现软键盘。我无法确定这是否是因为 tabhost 未能设置内容、布局充气器的参数错误，或者是我缺少的其他东西。我使用[本](http://nitin-dhar.blogspot.com/2012/01/creating-custom-android-tabs.html)教程作为我的指南，所以我不明白我为什么会遇到这个问题。任何帮助是极大的赞赏。

我的代码；

```
inflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);        
    th = (TabHost)findViewById(R.id.tabhost);

    calTab = inflater.inflate(R.layout.tab, th.getTabWidget(), false);
    calTab.setLayoutParams(params);
    label = (TextView) calTab.findViewById(R.id.tabLabel);
    label.setText("CALC");
    divider = (TextView) calTab.findViewById(R.id.tabSelectedDivider);
    divider.setVisibility(View.VISIBLE);        

    newsTab = inflater.inflate(R.layout.tab, th.getTabWidget(), false);
    newsTab.setLayoutParams(params);
    label = (TextView) newsTab.findViewById(R.id.tabLabel);
    label.setText("NEWS");

    fdTab = inflater.inflate(R.layout.tab, th.getTabWidget(), false);
    fdTab.setLayoutParams(params);
    label = (TextView) fdTab.findViewById(R.id.tabLabel);
    label.setText("FIND");

    pTab = inflater.inflate(R.layout.tab, th.getTabWidget(), false);
    pTab.setLayoutParams(params);
    label = (TextView) pTab.findViewById(R.id.tabLabel);
    label.setText("PORT");

    th.setup();

    specs1 = th.newTabSpec("tag1");
    specs1.setContent(R.id.tab1);
    specs2 = th.newTabSpec("tag2");
    specs2.setContent(R.id.tab2);
    specs3 = th.newTabSpec("tag3");     
    specs3.setContent(R.id.tab3);
    specs4 = th.newTabSpec("tag4");     
    specs4.setContent(R.id.tab4);
    if(android.os.Build.VERSION.SDK_INT>10){ 
        specs1.setIndicator(calTab);
        specs2.setIndicator(newsTab);
        specs3.setIndicator(fdTab);
        specs4.setIndicator(pTab);
    }else{
        specs1.setIndicator("CAL",getResources().getDrawable(R.drawable.calculatortab));
        specs2.setIndicator("NEWS",getResources().getDrawable(R.drawable.news));
        specs3.setIndicator("FIND ", getResources().getDrawable(R.drawable.maptab));
        specs4.setIndicator("PORT", getResources().getDrawable(R.drawable.portfoliotab));
    }
    th.addTab(specs1);
    th.addTab(specs2);
    th.addTab(specs3);
    th.addTab(specs4); 
    th.setOnTabChangedListener(Activity.this); 
```

制表符 XML

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<TextView
    android:id="@+id/tabLabel"
    android:layout_width="fill_parent"
    android:layout_height="43dp"
    android:gravity="center_vertical|center_horizontal"
    android:textColor="#FFF"
    android:textSize="12dp"/>

<TextView
    android:id="@+id/tabSelectedDivider"
    android:layout_width="fill_parent"
    android:layout_height="5dp"
    android:layout_alignParentBottom="true"
    android:background="#3366CC"
    android:visibility="gone" />

<TextView
    android:id="@+id/tabDivider"
    android:layout_width="fill_parent"
    android:layout_height="2dp"
    android:layout_alignParentBottom="true"
    android:background="#3366CC" />

<TextView
    android:id="@+id/tabSplitter"
    android:layout_width="1px"
    android:layout_height="23dp"
    android:layout_alignParentRight="true"
    android:layout_marginTop="10dp"
    android:background="#333" /> 
```

带有 TABHOST 的主要 XML

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"

android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<TabHost
    android:id="@+id/tabhost"
    android:layout_width="match_parent"
    android:layout_height="match_parent" > <!-- changed from match parent -->

    <LinearLayout
        android:id="@+id/linearLayout1"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical" >

        <TabWidget
            android:id="@android:id/tabs"
            android:layout_width="match_parent"
            android:layout_height="wrap_content" >
        </TabWidget>

        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="match_parent"
            android:layout_height="match_parent" >

            <FrameLayout 
xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:sat="http://schemas.android.com/apk/res/com.bryanjrichardson.GSCC"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

            <LinearLayout
                android:id="@+id/tab1"
                android:layout_width="match_parent"
                android:layout_height="match_parent" >

...and so forth 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T03:30:19.333

你需要给你的tabwidget一个明确的高度。因此，您应该输入一个值，例如 60dp 或任何美观的值，而不是为小部件高度包装内容。

# iphone - 如何使用 ruby motion 制作“侧边栏菜单”？

> ID：14763738
> 
> 赞同：0
> 
> 时间：2013-02-08T00:30:27.433
> 
> 标签：iphone, rubymotion

哪些库可用于 RubyMotion 中的侧边栏菜单功能？

![侧边栏菜单](../Images/44db15113f06189aa3f616643bf6d355.png)

与此应用程序设计非常相似的东西，我想知道是否可以使用 RubyMotion。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T03:24:47.940

我会尝试这里详述的一些答案：

[开发像 Facebook 新 iOS 应用程序中的侧滑菜单的最佳方法是什么？](https://stackoverflow.com/questions/7989020/whats-the-best-way-to-develop-a-sideswipe-menu-like-the-one-in-facebooks-new-i)

一些建议的：

*   [https://github.com/Inferis/ViewDeck](https://github.com/Inferis/ViewDeck)
*   [http://www.cocoacontrols.com/platforms/ios/controls/jtrevealsidebar](http://www.cocoacontrols.com/platforms/ios/controls/jtrevealsidebar)
*   [https://github.com/mikefrederick/MFSideMenu](https://github.com/mikefrederick/MFSideMenu)

其中一些可能是 CocoaPods，我建议使用这些版本。只需运行`pod search X`（X 是库的名称）即可找出答案。

# html - 使用 selenium 和 Java 测试 HTML 代码

> ID：14763744
> 
> 赞同：-1
> 
> 时间：2013-02-08T00:30:50.407
> 
> 标签：html, selenium

我不确定如何用 java 编写代码来测试 HTML 代码。

我必须匹配 HTML 页面上的几个字符串。我的 HTML 页面看起来像

```
name: xyzfoo
standard: 5
division: C 
```

但这一切都是硬编码的

```
<tr>... 
</tr> 
```

并且不与任何元素 id 关联。因此，我不确定如何通过将 selenium 与 Java 结合使用来测试字符串是否与我期望的字符串匹配。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T04:39:27.260

使用 Selenium 的[WebDriver](http://seleniumhq.org/docs/03_webdriver.jsp)，您可以使用 XPath 或 CSS 选择器来定位元素。此时，您可以检索所需元素中的文本并将其与您自己的进行比较。

如果您正在测试路径并使用 Visual Studio/Microsoft 产品，那么您可能需要阅读[Coded UI Tests](http://msdn.microsoft.com/en-us/magazine/hh875174.aspx)。这只是一种选择，因为那里有替代测试包。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-05-05T11:53:46.197

据我了解，您正在尝试检查`<tr>`名称：“xyzfoo”标准：5 除法：C`</tr>`元素。

如果是，那么您可以尝试使用以下代码 -

```
Webdriver elem = driver.findelement(By.cssSelector("tr[name = 'xyzfoo']")); 
```

如果没有，请告诉我您要使用的元素。我很乐意帮助你。

# c# - 为 MVVM 选择了多个列表框/集合项

> ID：14763745
> 
> 赞同：3
> 
> 时间：2013-02-08T00:30:54.107
> 
> 标签：c#, wpf, mvvm, observablecollection, multipleselection

我有一个绑定到名称的 ObservableCollection 的列表框。列表中的某些项目将具有一个可打开/关闭的复选框，表明该项目已被选中。

如何根据 Master-Details 概念从第一个列表框的选定项目创建 ObservableCollection？

（我计划使用我的 MasterViewModel 作为我的 DetailsView 的 DataContext，它显示所选项目集合。）

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T00:44:37.607

是的，我以前也遇到过这种情况。ListBoxes 等具有称为“SelectedItem”的依赖属性，但“SelectedItems”（带有“s”）属性没有作为一个实现。

我发现的最干净的解决方案就是对列表框进行子类化，并创建我自己的名为“SelectedItems”的依赖属性。不好玩，但这是我认为最好的解决方案。

**更新**

首先是我们的 ViewModel：

```
class ViewModel : INotifyPropertyChanged
{
    // Set up our collection to be read from the View
    public ObservableCollection<String> Collection { get; private set; }

    // This collection will maintain the selected items
    public ObservableCollection<String> SelectedItems { get; private set; }

    public ViewModel()
    {
        // Instantiate
        this.Collection = new ObservableCollection<String>();
        this.SelectedItems = new ObservableCollection<String>();

        // Now let's monitor when this.SelectdItems changes
        this.SelectedItems.CollectionChanged += SelectedItems_CollectionChanged;

        // Fill our collection with some strings (1 to 10).
        // (1) Generate the numbers 1 - 10
        // (2) Convert each number to a string
        // (3) Cast into a list so we can use foreach 
        // (4) Add each item to the collection.
        Enumerable.Range(1, 10)
            .Select(number => number.ToString())   
            .ToList()                              
            .ForEach(this.Collection.Add);

        // Remember! Never reset the ObservableCollection.
        // That is, never say this.Collection = new... (or you'll break the binding).
        // instead use this.Collection.Clear(), and then add the items you want to add
    }

    void SelectedItems_CollectionChanged(object sender, System.Collections.Specialized.NotifyCollectionChangedEventArgs e)
    {
        if (e.Action == System.Collections.Specialized.NotifyCollectionChangedAction.Add)
        {
            foreach (String str in this.SelectedItems)
                System.Diagnostics.Debug.WriteLine("New item added {0}", str);

        }
    }

    public event PropertyChangedEventHandler PropertyChanged;
} 
```

然后是我们扩展的 ListBoxEx：

```
class ListBoxEx : ListBox
{
    // Use the 'new' keyword so that we 'hide' the base property.
    // This means that binding will go to this version of SelectedItems
    // rather than whatever the base class uses. To reach the base 'SelectedItems' property
    // We just need to use base.SelectedItems instead of this.SelectedItems
    // Note that we register as an observable collection.
    new DependencyProperty SelectedItemsProperty = 
        DependencyProperty.Register("SelectedItems", typeof(ObservableCollection<String>), typeof(ListBoxEx));

    // Accessor. Again, note the 'new'.
    new public ObservableCollection<String> SelectedItems
    {
        get { return (ObservableCollection<String>) GetValue(SelectedItemsProperty); }
        set { SetValue(SelectedItemsProperty, value); }
    }

    protected override void OnSelectionChanged(SelectionChangedEventArgs e)
    {
        // Guard against ViewModel being null
        if (this.SelectedItems != null)
        {
            // Clear the list
            this.SelectedItems.Clear();

            // (1) On selection changed. Get the new base.SelectedItems
            // (2) Cast each item to a String ("Make a string collection")
            // (3) Cast to list, and use foreach to add each item to 
            // this.SelectedItems (note this is different from the original base.SelectedItems)
            base.SelectedItems.Cast<String>()
                .ToList()
                .ForEach(this.SelectedItems.Add);
        }
    }
} 
```

最后是我们的观点：

```
<Window.DataContext>
    <lol:ViewModel />
</Window.DataContext>
<Grid>
    <lol:ListBoxEx ItemsSource="{Binding Collection}" SelectedItems="{Binding SelectedItems}"
                   SelectionMode="Multiple"/>
</Grid> 
```

# iphone - Xcode 中的 OpenGL ES 2.0 渲染问题

> ID：14763754
> 
> 赞同：0
> 
> 时间：2013-02-08T00:31:24.807
> 
> 标签：iphone, ios, xcode, opengl-es, opengl-es-2.0

我对 iPhone 上的 OpenGL ES 2.0 相当陌生，我正在尝试制作一个简单的环形碰碰车动画。出于某种原因，我目前无法在屏幕上渲染任何东西（仅显示 glClear() 设置颜色而不是任何 3D 对象），我认为这与我的基本效果或可能与我的绑定/渲染有关。我目前不确定问题是什么，并且已经被难住了很长一段时间。任何人都可以浏览我的项目并尝试指导我吗？在调试这个问题时，我只需要一个正确的方向。只需单击附加的链接并转到文件 -> 下载即可获取整个项目。

编辑：我确实在 SceneMesh.h 下发现了一个问题，其中 SceneMeshVertex 有 GLKVector2 texCoords0; 声明为 GLKVector3 texCoords0；这是错误的。因此，这已得到纠正和更新。

[Xcode 项目](https://docs.google.com/file/d/0B_1MmjVEMIQnTDd4dDJHaXdaR2M/edit?usp=sharing)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T00:22:50.940

在 SceneModel.m 中，我犯了一个错误。在 -(id)initWithName:(NSString *)modelName 网格：(SceneMesh *)meshReference numberOfVertices:(GLsizei)count；我不小心引用了 numberOfVertices 而不是 count .... 哎呀。那解决了这个问题。

# jquery - 在附加元素中查找目标以调用点击事件

> ID：14763757
> 
> 赞同：1
> 
> 时间：2013-02-08T00:31:33.807
> 
> 标签：jquery, events, toggle, user-defined-functions, targeting

我试图让暂停按钮分别在每个跨度中工作。每次用户单击“添加”按钮（代码未显示）时，都会将一`<span class="emailform">`组新元素附加到`<div class="email">`. 我不知道如何将单击事件处理程序附加到新添加的元素范围中的暂停按钮。我附上了图片，以便您可以看到我正在尝试做的事情。（我错误地使用 trigger() 以及尝试调用我自己的函数。）

我还在[这里包含了一个小提琴](http://jsfiddle.net/Chris22/vVG3x/)。

谢谢你的帮助！

**html:**

```
<div class="email">
     <span class="emailform">
              <label for="vs-email" class="use-email" >Via email:</label>
              <input type="text" class="text-input" />
              <input type="button" class="pause" />
              <input type="button" class="remove"  value="remove" />
      </span>
</div> 
```

**jQuery：**

```
$(".pause").on('click', function(e){
     $(e.target).closest("span").trigger(pauseRestore());   
});

function pauseRestore(){
     var oddClick = $(this).data("oddClick");
     $(this).data("oddClick", !oddClick);
     if(!oddClick) {
          pauseAction(); 
     }else {
          restoreAction();
     }
} 
```

原创开始**（好）**

![原始状态](../Images/6528c61153889a176426c6fa6ffc7e45.png)

单击“添加”按钮后添加的另一个**（好）**

![添加了一个新的跨度](../Images/1531a56198b4be986cb4e6ed49585f1c.png)

只能先点击暂停**（好）**

![选择暂停第一个跨度](../Images/2b416ac17dca539972764180eb48e5d6.png)

单击以暂停新添加**（坏，没有任何反应）**

![选择暂停新添加](../Images/1923ec920dcc58ceb3827a95137aa124.png)

单击第一个跨度中的暂停按钮**（坏 - 现在都被选中并暂停）**

![都选择了](../Images/b0d9f51583e58203371edd484e7aa9ec.png)

**这就是我想要的结果。** 当用户点击**新**添加的 span 中的暂停按钮时，只有这个被暂停，而不是任何其他的。每一个都是分开的。

![个人行为](../Images/22c13e5d4f00bfc030d58ee3deff5efa.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T01:25:12.783

您的方法存在许多问题，您使它们过于复杂。

我将首先尝试逐项列出问题：

1.  `$(".use-email")`将包含该类的页面中的所有元素。您想根据单击的按钮隔离单个实例。
2.  `trigger()`不能用于调用命名函数。建议您查看 jQuery API 并更好地了解如何使用事件和自定义事件。
3.  建议您更改类而不是更改内联 css。通常代码更少，更容易撤消
4.  `$(".pause").removeClass("btn-pause").addClass("btn-pause");`- 删除类然后再次添加，没有意义
5.  您可以委托事件处理程序来处理未来的元素。
6.  应使用`prop()`方法不`attr()`更改属性，例如`disabled`

以下是我认为您需要的并显着减少代码：

```
$(".add").click(function(){
        addItem();
    });
/* delegate handler for future elements*/
$(document).on('click','.pause', function(e){      
    /* using "this" to isolate instance*/
    var $pauseButton=$(this);
    var $emailForm=$pauseButton.closest('.emailform').toggleClass('paused');

   /* clear other paused elements*/
    $('.emailform.paused').not($emailForm)
                          .removeClass('paused')
                          .find( ".text-input").prop("disabled", false) ; 

    var isPaused=$emailForm.hasClass('paused');
    /* use "find()" to look within instance only*/
    $emailForm.find(".text-input").prop("disabled", isPaused);  

});

function addItem(){
   $('div.email').append('html string....'); 
} 
```

演示：http: [//jsfiddle.net/vVG3x/3/](http://jsfiddle.net/vVG3x/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T01:12:21.583

你在这里有几个问题：

1) `trigger()`用于执行事件处理函数（如'click'），而不是调用任意函数。如果要调用函数并传递对象，只需在函数定义中使用参数调用函数即可：

```
$(".pause").on('click', function (e) {
    myspan = $(e.target).closest("span");
    pauseRestore(myspan);
});

...

function pauseRestore(myspan) {
    var oddClick = myspan.data("oddClick");
    myspan.data("oddClick", !oddClick);
    ...
} 
```

2）您使用的方式`.on`仅适用于`.pause`您调用时存在的项目`.on`。要应用于项目的*所有*未来实例`.pause`，您必须将处理程序附加到父对象，并过滤您想要的选择器：

```
$(".email").on('click', '.pause', function (e) {
    ....
} 
```

3）同样，您对*所有* `.use-email`项目使用选择器，而不是您关心的跨度中的选择器，因此您正在修改所有项目：

```
$(".use-email").css("color", "#b1b1b1"); 
```

相反，您需要以下内容，其中`myspan`包含`span`对象：

```
myspan.find(".use-email").css("color", "#b1b1b1"); 
```

把它们放在一起，你会得到这个小提琴：

[http://jsfiddle.net/umukT/](http://jsfiddle.net/umukT/)

# sql-server-2008 - SQL Server 2008 空间查询性能

> ID：14763760
> 
> 赞同：2
> 
> 时间：2013-02-08T00:31:43.233
> 
> 标签：sql-server-2008, spatial-index, spatial-query, sqlgeography

我有一个应用程序，用户将他们的通勤路线存储在我们的数据库中。

路线存储为折线（线串）。数据库还存储事故、交通事故之类的东西。我们需要定期查询一条路线，以查看该路线 1k 半径内是否有任何事件。

查询的连接结构如下：

```
 Route r left outer join Incident i on
    r.PolyLine.STDistance(i.Location) < 1000 
```

现在我也尝试了这样的事情：

```
Route r left outer join Incident i on   
r.PolyLine.STBuffer(1000).STIntersects(i.Location) = 1 
```

**到目前为止，我们为提高速度所做的尝试是：**

1.  减少沿线串的点数
2.  添加空间索引（虽然我不知道如何调整它）

1）上述工作但还不够好，这让我相信该事件正在与路线上的每个点进行比较，这似乎真的效率低下。

我们正在考虑将长纬度作为几何与地理的对比，因此我们可以访问 Bounding Box 并获得 STContains。

还考虑在检查事件之前在 PolyLine 上调用 reduce。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T15:41:39.173

我建议几何存储。在这种情况下，去地理的好处似乎并没有超过成本。

空间索引**非常重要**。通过使用适当调整的空间索引，我使用空间查询的一个过程从约 15 分钟到约 1 分钟。但是，我还没有找到关于自动获得最佳设置的好方法的文档。我*已经*回答了[关于空间索引调整的类似问题](https://stackoverflow.com/a/15842694/2250424)。我为每个数据集提供的存储过程需要一段时间，但可以在您做其他工作时在后台运行。

就您的查询而言，我设置了一个不同的查询并将其性能与您在上面提供的两个进行比较。通过将路线缓冲区放入几何变量并在空间比较中使用该变量，性能似乎有所提高。我这样做的原因是它只需要创建一次缓冲区（或评估距离），而不是为其比较的每一行创建一次。你可以试试这个，看看你会得到什么结果。

```
DECLARE @routeBuff geometry
SET @routeBuff = (SELECT r.PolyLine.STBuffer(1000) FROM route r WHERE recordID = 2778) --how ever you select the particular route

SELECT
    *
FROM
    incident i
WHERE
    i.location.STIntersects(@routeBuff) = 1 
```

# python - 在 Python 中导入变量？

> ID：14763765
> 
> 赞同：1
> 
> 时间：2013-02-08T00:32:06.570
> 
> 标签：python, import, sympy

我正在使用 sympy 使用`pretty_print`命令编写上标。这需要与一些变量（代数（x，y 等））一起导入，以使 pretty_print 命令起作用。如果您不从 sympy.abc 导入变量（代数），则需要将这些字母放在引号`''`中，其中 pretty_print 命令不起作用。

因此，例如，如果我`x²`在屏幕上打印，我需要导入`x`以便可以在程序中使用它。像这样：

```
import sympy  
from sympy import pretty_text as exp   
from sympy.abc import x

equation= x**2

exp(equation) 
```

这将在屏幕上打印 x²。问题是如果我给 x 赋值，那么它将不再等于它自己。如果我在从 sympy.abc 导入后直接打印 x，它会这样做-

（假装这是空闲）>

```
>>> import sympy  
>>> from sympy import pretty_text as exp   
>>> from sympy.abc import x

>>> x
x 
```

但是，如果 a make x 1

```
>>> import sympy  
>>> from sympy import pretty_text as exp   
>>> from sympy.abc import x

>>> x
x 
>>> x = 1
>>>x
1 
```

然后我需要`x`再次平方，

```
>>> import sympy  
>>> from sympy import pretty_text as exp   
>>> from sympy.abc import x

>>> x
x 
>>> x = 1
>>>x
1 
>>> equation = x**2
>>> exp(equation)
1 
```

它只会平方 1。即使它尝试再次制作它也不相同，因为它周围`x = 'x'`会有。`''`我只能通过再次导入来解决这个问题。但是，在我的程序中，我最终可能需要再次导入任何字母，所以我需要导入一个变量。我试过了

```
from sympy.abc import x[0] 
```

但这是无效的。那么，有什么办法可以导入不同的字母吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T00:40:18.577

如果您想保留符号，请不要为它们分配任何值 - 继续使用符号，直到您真正需要解决方案。

例如：

```
In [15]: equation=sympy.sin(x**2)

In [16]: exp(equation)
   ⎛ 2⎞
sin⎝x ⎠

In [17]: result = equation.subs({'x': 2})

In [18]: result
Out[18]: sin(4)

In [19]: result.evalf()
Out[19]: -0.756802495307928 
```

这不会改变`x`本身 - 稍后：

```
In [23]: exp(sympy.log(x**.5))
   ⎛ 0.5⎞
log⎝x   ⎠ 
```

只要需要，就可以将您的方程式保持在符号形式中，并且不要担心值本身。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T17:52:55.963

您不需要在 SymPy 中导入符号名称。abc 模块只是为了方便单字母符号名称而存在。

只需使用您想要的任何名称创建 Symbol 对象（可以是任何字符串，包括动态创建的字符串）。

```
>>> x = Symbol('x')
>>> x
x 
```

另请注意，您为符号指定的名称与保存该符号的 Python 变量的名称不必相关。实际上，符号不知道它绑定到什么 Python 变量名（这就是 Python 中的一切工作方式，而不仅仅是 SymPy）

```
>>> x = Symbol('y')
>>> x
y 
```

您还可以使用`symbols`一次创建多个符号

```
>>> x, y, z = symbols('x y z') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T00:36:49.920

如果您改为：

```
import sympy.abc
x = sympy.abc.x 
```

然后，每当您需要原始值时，只需使用`sympy.abc.x`. 如果需要动态获取名称：

```
getattr(sympy.abc, "x") 
```

文字可以用任何变量替换。

# javascript - 当我需要大小时运行带有动态内容的 jQuery

> ID：14763766
> 
> 赞同：0
> 
> 时间：2013-02-08T00:32:12.313
> 
> 标签：javascript, jquery, dynamic, flot

我的网络应用程序中有一个页面可以动态加载包含 html 和一些 javascript 的视图。javascript 基本上将图表呈现到已检索到的视图中。问题是我正在使用的图表库（flot）要求它被渲染到的容器具有宽度和高度。

执行 javascript 时，CSS 规则尚未应用于容器并且它没有大小。我怎样才能等到在 javascript 运行之前应用了 CSS？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T00:42:09.630

原来我只是一个彻头彻尾的白痴！我将容器 ID 传递给没有“#”的浮动，所以它根本找不到容器。返回视图时已应用 CSS 规则，现在可以正常工作了 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T00:38:23.760

在 JQuery 中，你可以做

```
 $(window).load(function()
    {
      //code fires after the layout has been calculated/rendered
    }); 
```

如果您在页面加载后更改 CSS 的 javascript 将不起作用...所以请确保任何 JS 更改 CSS 发生在您即将做的任何其他事情之前

# javascript - 使用 JavaScript 在数组中查找最多重复值

> ID：14763768
> 
> 赞同：0
> 
> 时间：2013-02-08T00:32:25.137
> 
> 标签：javascript, jquery, underscore.js

我有一个重复值的数组：

```
[0, 1, 6, 0, 1, 0] 
```

返回特定值重复的最高数量的有效方法是什么？

在示例数组中，我希望脚本返回 3，因为数字 0 重复次数最多，并且重复了 3 次。我已经在使用 jQuery 和 Underscore。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T00:58:22.093

如果你使用[lodash](http://lodash.com/docs#countBy) ...

```
_.max(_.countBy(a,_.identity)) 
```

更多关于 lodash: [http://lodash.com/](http://lodash.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T00:49:35.227

这类似于基本方法，但使用了下划线`reduce`和`max`函数。如果您有一个非常非常大的数组，我希望很清楚如何在 reduce 之前将其与 map 阶段并行化。

```
var arr = [1,0,2,3,4,0,3,0];
var counts = _.reduce(arr, function(counts, val) {
    if (counts[val]) {
        counts[val]++;
    } else {
        counts[val] = 1;
    }
    return counts;
}, {});
return _.max(counts); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T00:37:42.013

是的，这就像一个谷歌面试问题哈哈。我建议您在数组中循环一次，并在增加计数器时在遇到每个元素时维护一个关联数组。

例如：

[http://jsfiddle.net/btKjX/](http://jsfiddle.net/btKjX/)

```
var a = [0, 0 , 2, 2, 3, 3, 3, 3];
var counts = {};

for(var i = 0, il = a.length; i < il; i++){
    var num = a[i];

    if(typeof counts[num] === 'undefined'){
        counts[num] = 0;
    }

    counts[num]++;
}

var max = -1;

for(var c in counts){
    if(counts[c] > max){
        max = counts[c];
    }
}

console.log(max); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T00:41:08.310

一个 hacky 方法可能是对其进行排序，在每次值更改时对其进行拆分，然后查看每个字符串的长度，但让我们尝试一些更合理的方法：

```
var nums = [0, 1, 6, 0, 1, 0]
var occurence = {}
$.each(nums, function(a, num_id) {
  if (occurence[num_id] != null) {
    occurence[num_id]++;
  } else {
    occurence[num_id] = 1;
  }
}); 
```

然后，occurrence 将具有 nums 中每个值的出现次数，数字本身就是键。

# php - 带有预加载选项的辅助下拉菜单

> ID：14763770
> 
> 赞同：0
> 
> 时间：2013-02-08T00:33:06.400
> 
> 标签：php, javascript, sql, ajax, cakephp

我有与主类别相关的子类别。我的子 cat 表有主类别 id 作为外键。我想使用 javascript 预加载所有子类别，并尽可能避免额外的 php 文件或 db 查询。

两个下拉列表都列出了所有记录，但是...我希望我的第二个子类别下拉列表根据第一个下拉列表的值（即主猫 ID）动态更改第一个下拉列表的 onChange（选择）。

例子，

```
$data = $this->Category->MainCategory->findall();
$this->set('data',$data);

$data2 = $this->Category->SubCategory->findall();
$this->set('data2',$data2); 
```

我的数组如下所示：

```
var_dump ($data) = 
array(5) { 
[0]=> array(1) { ["MainCategory"]=> array(3) { ["id"]=> string(1) "1" ["name"]=> string(10) "Accounting" ["doctype"]=> string(1) "2" } } 
[1]=> array(1) { ["MainCategory"]=> array(3) { ["id"]=> string(1) "2" ["name"]=> string(15) "Human Resources" ["doctype"]=> string(1) "2" } } 
[2]=> array(1) { ["MainCategory"]=> array(3) { ["id"]=> string(1) "4" ["name"]=> string(5) "Clubs" ["doctype"]=> string(1) "2" } } 
[3]=> array(1) { ["MainCategory"]=> array(3) { ["id"]=> string(1) "8" ["name"]=> string(16) "Service" ["doctype"]=> string(1) "2" } } 
[4]=> array(1) { ["MainCategory"]=> array(3) { ["id"]=> string(2) "10" ["name"]=> string(9) "Safety" ["doctype"]=> string(1) "2" } } }

var_dump($data2) = 
array(20) {
[0]=> array(1) { ["SubCategory"]=> array(3) { ["id"]=> string(1) "1" ["name"]=> string(17) "Application Forms" ["main_category_id"]=> string(1) "2" } } 
[1]=> array(1) { ["SubCategory"]=> array(3) { ["id"]=> string(1) "2" ["name"]=> string(19) "Benefit Claim Forms" ["main_category_id"]=> string(1) "2" } } 
[2]=> array(1) { ["SubCategory"]=> array(3) { ["id"]=> string(1) "3" ["name"]=> string(22) "Evaluations" ["main_category_id"]=> string(1) "2" } } 
[3]=> array(1) { ["SubCategory"]=> array(3) { ["id"]=> string(1) "4" ["name"]=> string(11) "Leave Forms" ["main_category_id"]=> string(1) "2" } } 
[4]=> array(1) { ["SubCategory"]=> array(3) { ["id"]=> string(1) "5" ["name"]=> string(13) "Payroll" ["main_category_id"]=> string(1) "2" } } 
[5]=> array(1) { ["SubCategory"]=> array(3) { ["id"]=> string(1) "6" ["name"]=> string(17) "Recruitment" ["main_category_id"]=> string(1) "2" } } 
[6]=> array(1) { ["SubCategory"]=> array(3) { ["id"]=> string(1) "7" ["name"]=> string(24) "Training" ["main_category_id"]=> string(1) "2" } } 
[7]=> array(1) { ["SubCategory"]=> array(3) { ["id"]=> string(1) "8" ["name"]=> string(10) "Accounting" ["main_category_id"]=> string(1) "1" } } 
[8]=> array(1) { ["SubCategory"]=> array(3) { ["id"]=> string(1) "9" ["name"]=> string(13) "Staff" ["main_category_id"]=> string(1) "2" } } 
[9]=> array(1) { ["SubCategory"]=> array(3) { ["id"]=> string(2) "10" ["name"]=> string(14) "Codes" ["main_category_id"]=> string(2) "3" } } 
[10]=> array(1) { ["SubCategory"]=> array(3) { ["id"]=> string(2) "11" ["name"]=> string(28) "Reports" ["main_category_id"]=> string(2) "3" }
[11]=> array(1) { ["SubCategory"]=> array(3) { ["id"]=> string(2) "12" ["name"]=> string(14) "Plan" ["main_category_id"]=> string(2) "4" } } 
[12]=> array(1) { ["SubCategory"]=> array(3) { ["id"]=> string(2) "13" ["name"]=> string(21) "Charts" ["main_category_id"]=> string(2) "4" } } 
[13]=> array(1) { ["SubCategory"]=> array(3) { ["id"]=> string(2) "14" ["name"]=> string(11) "Travel" ["main_category_id"]=> string(1) "4" } } 
[14]=> array(1) { ["SubCategory"]=> array(3) { ["id"]=> string(2) "15" ["name"]=> string(15) "Financials" ["main_category_id"]=> string(1) "4" } } 
[15]=> array(1) { ["SubCategory"]=> array(3) { ["id"]=> string(2) "16" ["name"]=> string(19) "Event Planning" ["main_category_id"]=> string(1) "4" } } 
[16]=> array(1) { ["SubCategory"]=> array(3) { ["id"]=> string(2) "17" ["name"]=> string(14) "Resources" ["main_category_id"]=> string(1) "4" } } 
[17]=> array(1) { ["SubCategory"]=> array(3) { ["id"]=> string(2) "18" ["name"]=> string(11) "Basics" ["main_category_id"]=> string(1) "4" } } 
[18]=> array(1) { ["SubCategory"]=> array(3) { ["id"]=> string(2) "19" ["name"]=> string(9) "News" ["main_category_id"]=> string(1) "4" } } 
[19]=> array(1) { ["SubCategory"]=> array(3) { ["id"]=> string(2) "20" ["name"]=> string(12) “Funding" ["main_category_id"]=> string(1) "4" } } } 
```

--html 表单...。

```
<td>Category: </td>
<td><select id="main_cat">
<option value=""> </option>
<?php foreach($data as $row){
    echo "<option value=".$row['MainCategory']['id'].">" .$row['MainCategory']['name']. "</option>";
} ?>
</select></td>
<td>Sub Category: </td>
<td><select id="sub_cat">
<option value=""> </option>
<?php foreach($data2 as $row){
    echo "<option value=".$row[‘SubCategory']['id'].">" .$row['SubCategory']['name']. "</option>";
} ?>
</select></td> 
```

……

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T19:43:23.580

创建一个按类别 id 加载子类别的二维 javascript 数组，然后在第一个更改时重新加载第二个下拉列表。高度简化[的 jsfiddle 示例](http://jsfiddle.net/kgpvS/1/)。

对于 php，您只需要担心生成`subCats`数组。类似于以下内容：

```
<script type="text/javascript>
    var subCats = [
    <?php foreach($data2 as $row){
        echo "[";
        foreach($row as $subcat) {
            echo "\"" . $subcat . "\",";
        }
        echo "]";
    } ?>
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T22:57:14.077

just.another.programmer 让我走上了正确的道路，还有来自 Jonathan Kuhn 的其他一些例子，这就是结果[http://jsfiddle.net/wprLD/9/](http://jsfiddle.net/wprLD/9/)

```
<script type="text/javascript">
var subCats = 
<?php 
$js = array();
foreach($data2 as $sub){

    //get the parent id (main_category_id)
    $parent = $sub['SubCategory']['main_category_id'];
    //if the parent doesn't exist, add it
    if(!isset($js[$parent])){
        //add array with name and id
        $js[$parent] = array(array('id'=>$sub['SubCategory']['id'],'name'=>$sub['SubCategory']['name']));
    //parent does exist
    } else {
        //append this entry name and id
        $js[$parent][] = array('id'=>$sub['SubCategory']['id'],'name'=>$sub['SubCategory']['name']);
    }
}
$js = array_values($js);
echo json_encode($js);
?>
;

function makeSubCatHtml(catId) {
    var subCatHtml = "",
        i;
    //check if the subcats object has this cat Id.
    if(subCats.hasOwnProperty(catId)){
        for (i in subCats[catId]) {
            subCatHtml += "<option value='"+subCats[catId][i].id+"'>" + subCats[catId][i].name + "</option>";
        }
    }

    return subCatHtml;
}

$(document).ready(function () {
    $("#MainCategory").bind("change", function () {
        $("#SubCategory").html(
        makeSubCatHtml(this.selectedIndex));
    });
});
</script> 
```

# listview - kendoui：在编辑模式下启动 listView

> ID：14763771
> 
> 赞同：0
> 
> 时间：2013-02-08T00:33:15.103
> 
> 标签：listview, kendo-ui

我有一个 kendoui 列表视图，我想在编辑模式下加载它，以便立即编辑。这是我的列表视图

```
var claimListView = $("#formClaim").kendoListView({
      dataSource: claimData,
      template: kendo.template($("#viewTemplate").html()),
      editTemplate: kendo.template($("#formTemplate").html())
  }).data("kendoFormClaim"); 
```

我试过这个放我得到一个参考错误

```
claimListView.edit(claimListView.element.children().first()); 
```

我究竟做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T11:30:34.027

你在最后一个“.data(...”部分有一个代码错字。

它必须是：

```
.data("kendoListView"); 
```

不是：

```
.data("kendoFormClaim"); 
```

这就是为什么你得到引用错误的原因，该变量由于类型而未被识别为列表视图，并且它没有编辑方法。

# perl - 在 perl 中获取 mongo db 的 fsynclock 状态

> ID：14763773
> 
> 赞同：1
> 
> 时间：2013-02-08T00:33:18.213
> 
> 标签：perl, mongodb, locking

我正在尝试构建一个 nagios 检查以检查 mongoDB 已使用 fsyncLock() 锁定多长时间以用于备份目的（例如，如果 iSCSI 快照脚本崩溃并且 mongo 未解锁）

我正在考虑使用一个简单的

```
 $currentLock->run_command({currentOp => 1})
    $isLocked = $currentLock->{fsyncLock} 
```

但似乎 run_command() 还不支持 currentOp。（在那里看到：[https](https://github.com/MLstate/opalang/blob/master/lib/stdlib/apis/mongo/commands.opa) ://github.com/MLstate/opalang/blob/master/lib/stdlib/apis/mongo/commands.opa ）

Woudl 有人对如何检查 mongo 是否被 perl 脚本锁定有建议吗？如果没有，我想我会去参加一些狂欢。我正在考虑使用 db.eval('db.currentOp()') 但我有点迷路了。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T05:07:01.657

你是对的，`run_command`不支持`currentOp`直接做a。但是，如果我们查看 shell 中的实现`db.currentOp`，`mongo`我们可以看到它在幕后是如何工作的：

```
> db.currentOp
function (arg) {
    var q = {};
    if (arg) {
        if (typeof arg == "object") {
            Object.extend(q, arg);
        } else if (arg) {
            q.$all = true;
        }
    }
    return this.$cmd.sys.inprog.findOne(q);
} 
```

因此，我们可以在 Perl 端查询特殊集合`$cmd.sys.inprog`，以获取`inprog`将在 shell 中返回的相同数组。

```
use strict;
use warnings;

use MongoDB;

my $db = MongoDB::MongoClient->new->get_database( 'test' );
my $current_op = $db->get_collection( '$cmd.sys.inprog' )->find_one; 
```

当服务器*未*锁定时，它将返回一个`$current_op`如下所示的结构：

```
{
      'inprog' => [
                  {
                    'connectionId' => 53,
                    'insert' => {},
                    'active' => bless( do{\(my $o = 0)}, 'boolean' ),
                    'lockStats' => {
                                   'timeAcquiringMicros' => {
                                                            'w' => 1,
                                                            'r' => 0
                                                          },
                                   'timeLockedMicros' => {
                                                         'w' => 9,
                                                         'r' => 0
                                                       }
                                 },
                    'numYields' => 0,
                    'locks' => {
                               '^' => 'w',
                               '^test' => 'W'
                             },
                    'waitingForLock' => $VAR1->{'inprog'}[0]{'active'},
                    'ns' => 'test.fnoof',
                    'client' => '127.0.0.1:50186',
                    'threadId' => '0x105a81000',
                    'desc' => 'conn53',
                    'opid' => 7152352,
                    'op' => 'insert'
                  }
                ]
    }; 
```

在 an 期间`fsyncLock()`，您将获得一个空`inprog`数组，但您将拥有一个有用的`info`字段和预期的`fsyncLock`布尔值：

```
 {
      'info' => 'use db.fsyncUnlock() to terminate the fsync write/snapshot lock',
      'fsyncLock' => bless( do{\(my $o = 1)}, 'boolean' ),   # <--- that's true
      'inprog' => []
    }; 
```

所以，把它们放在一起，我们得到：

```
use strict;
use warnings;

use MongoDB;

my $db = MongoDB::MongoClient->new->get_database( 'fnarf' );
my $current_op = $db->get_collection( '$cmd.sys.inprog' )->find_one;

if ( $current_op->{fsyncLock} ) {
    print "fsync lock is currently ON\n";
} else {
    print "fsync lock is currently OFF\n";
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T17:39:39.250

我实际上决定切换到 bash 中的解决方案（以后我想对数据做的事情更容易）：

```
currentOp=`mongo --port $port --host $host --eval "printjson(db.currentOp())"` 
```

然后某种`grep -Po '"fsyncLock" : \d'`

不过感谢 Perl 的见解，它运行良好

# php - 来自另一个 CDbCriteria 的 CDbCriteria 条件

> ID：14763774
> 
> 赞同：0
> 
> 时间：2013-02-08T00:33:19.813
> 
> 标签：php, yii

我不知道我想做的事是否可行，我有两个模型我想使用另一个模型的条件从一个模型获取数据。

```
 $criteria1=new CDbCriteria;
        $paramIds = $s['param_id'];
        $stress = model1::model()->find($criteria1);
        $mycondition= ($stress->stress_value);

        echo $mycondition ; // I get this value and I want to use it as  
                                        // condition for the next cdbcreteria

        $criteria2=new CDbCriteria;

                     // condition
        $criteria2->addcondition(array('pressure_value' >  $mycondition));

                      // I can't  perform this condition       

        $criteria2->order = "pressure_value desc";
        $pressure = model2::model()->find($criteria2); 
```

任何想法 ？我的代码是错误的，或者我想做的事情是不可能的？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T13:28:05.137

谢谢@Örs

你的解决方案对我有用，在条件之后在 cdbcreteria 中进行比较语句

```
$criteria2->params = array(':value' => $mycondition) 
```

# asp.net-mvc - 实体框架自动将新实例实体分配为已删除

> ID：14763781
> 
> 赞同：1
> 
> 时间：2013-02-08T00:33:49.813
> 
> 标签：asp.net-mvc, entity-framework

当我在做一个 ASP.NET MVC 项目时，我看到了一个奇怪的 EF 行为，这让我延迟了（确切地说，我至少在一个月内仍然被这个问题困住......直到现在我才意识到我的 DDD 架构代码没有损坏，它是我所拥有的与 EF 相关的代码错误）。

我的网站有帖子。每个帖子都有一组属性 ( `PostAttributeValue`)，每个属性值都有一个相关的`PostAttributeDefinition`，其中包含有关它的数据 - 例如标题、验证规则、原始值（二进制序列化）、数据类型等。

这是我的帖子模型：

```
public class Post
{
    #region Settings

    /// <summary>
    /// Maximum linked images
    /// </summary>
    public static int MaximumLinkedImages
    {
        get { return Properties.Settings.Default.MaximumPostsLinkedImages; }
    }

    /// <summary>
    /// Maximum linked image size in MB
    /// </summary>
    public static int MaximumLinkedImageSize
    {
        get { return Properties.Settings.Default.MaximumPostLinkedImageSize; }
    }

    /// <summary>
    /// Delay hours between posts bumping
    /// </summary>
    public static int BumpPostDelayHours
    {
        get { return Properties.Settings.Default.BumpPostDelayHours; }
    }

    #endregion

    #region ctor

    public Post()
    {
        this.Attributes = new List<PostAttributeValue>();
        this.LinkedImages = new List<string>();
    }

    #endregion

    /// <summary>
    /// The parent category that this post was posted into
    /// </summary>
    [Required]
    public virtual Category ParentCategory { get; set; }

    /// <summary>
    /// The post unique identifier
    /// </summary>
    [Key]
    public Guid PostIdentifier { get; set; }

    /// <summary>
    /// The post title (e.g. "Great vila!")
    /// </summary>
    [Required]
    public string Title { get; set; }

    /// <summary>
    /// The post title url alias (e.g. "great-vila")
    /// </summary>
    public string TitleUrlAlias { get; set; }

    /// <summary>
    /// Post extra notes and information written by the author
    /// </summary>
    [Required]
    public string Description { get; set; }

    /// <summary>
    /// The post item city
    /// </summary>
    [Required]
    public virtual City City { get; set; }

    /// <summary>
    /// The post item location
    /// </summary>
    public string Location { get; set; }

    /// <summary>
    /// Is the post was published and marketed by brokerage (Tivuuch)
    /// </summary>
    [Required]
    public bool Brokerage { get; set; }

    /// <summary>
    /// Post custom attributes
    /// </summary>
    public virtual ICollection<PostAttributeValue> Attributes { get; set; }

    /// <summary>
    /// The post assigned price
    /// </summary>
    [Required]
    public int RequestedPrice { get; set; }

    /// <summary>
    /// List of images linked with the post (includes only the name of the picture, a.k.a "foo.png", "bar.jpg" etc.)
    /// </summary>
    public virtual ICollection<string> LinkedImages { get; set; }

    public string LinkedImagesSerialized
    {
        get
        {
            if (this.LinkedImages == null)
            {
                this.LinkedImages = new List<string>();
            }

            return string.Join(",", this.LinkedImages);
        }
        set
        {
            if (this.LinkedImages == null)
            {
                this.LinkedImages = new List<string>();
            }

            if (string.IsNullOrEmpty(value))
            {
                return;
            }

            this.LinkedImages = value.Split(new char[] { ',' }, StringSplitOptions.RemoveEmptyEntries).ToList();
        }
    }

    /// <summary>
    /// Cached generated cached url using IShorterUrlService
    /// </summary>
    public string GeneratedShorterUrl { get; set; }

    /// <summary>
    /// Is this post marked as hot
    /// </summary>
    public bool IsHotPost { get; set; }

    /// <summary>
    /// The post publish status
    /// </summary>
    public PostPublishStatus PublishStatus { get; set; }

    /// <summary>
    /// The post author
    /// </summary>
    public virtual Account Author { get; set; }

    /// <summary>
    /// The author IP address (collected to determine different IPs)
    /// </summary>
    public string AuthorIPAddress { get; set; }

    /// <summary>
    /// The creation date of the post
    /// </summary>
    public DateTime CreationDate { get; set; }

    /// <summary>
    /// The last post modification date
    /// </summary>
    public DateTime LastUpdatedDate { get; set; }

    /// <summary>
    /// The date that the post was bumped at, used to sort the posts in category.
    /// </summary>
    public DateTime LastBumpDate { get; set; }
} 
```

这是`PostAttributeValue` public class PostAttributeValue { /// /// 属性值 id /// [Key] public int AttributeValueId { get; 放; }

```
 /// <summary>
    /// The value owner post
    /// </summary>
    public virtual Post OwnerPost { get; set; }

    /// <summary>
    /// The value attribute definition id
    /// </summary>
    //public int RelatedAttributeDefinitionId { get; set; }

    /// <summary>
    /// The value attribute definition
    /// </summary>
    public virtual PostAttributeDefinition Definition { get; set; }

    /// <summary>
    /// The stored raw value
    /// </summary>
    public byte[] RawValue { get; set; }
} 
```

这是`PostAttributeDefinition` public class PostAttributeDefinition { /// /// 过滤器名称 /// [Key] public int DefinitionId { get; 放; }

```
 /// <summary>
    /// The owner category
    /// </summary>
    [Required]
    public virtual Category OwnerCategory { get; set; }

    /// <summary>
    /// The filter title
    /// </summary>
    [Required]
    public string Title { get; set; }

    /// <summary>
    /// Metadata enum that provides extra data about the data type
    /// </summary>
    public PostAttributeTypeMetadata TypeMetadata { get; set; }

    /// <summary>
    /// Bitwise metadata that provides data about the object in display mode
    /// </summary>
    public PostAttributeDisplayModeMetadata DisplayModeMetadata { get; set; }

    public PostAttributeEditorType EditorType { get; set; }

    /// <summary>
    /// The attribute raw default value
    /// </summary>
    [Required]
    public byte[] RawDataValue { get; set; }

    /// <summary>
    /// The attribute raw associated validation attributes
    /// </summary>
    public byte[] RawValidationRules { get; set; }

    /// <summary>
    /// Is this field required
    /// </summary>
   public bool IsRequired { get; set; }
} 
```

我的问题是，当我尝试添加新帖子时，我遇到了关系错误（[来自 AssociationSet 的关系处于“已删除”状态](https://stackoverflow.com/questions/14007928/a-relationship-from-the-associationset-is-in-the-deleted-state)），即

```
A relationship from the 'PostAttributeValue_Definition' AssociationSet is in the 'Deleted' state. Given multiplicity constraints, a corresponding 'PostAttributeValue_Definition_Source' must also in the 'Deleted' state. 
```

现在，我发现问题在于，当我为 PostAttributeValue 分配一个定义时，它会自动变为已删除 - 即使我正在分配一个我现在从数据库中获取的定义。

我已经测试了上面的代码：

```
 var db = ServiceLocator.SharedInstance.GetInstance<MyDbContext>();
        List<PostAttributeValue> v = new List<PostAttributeValue>();

        var entity =  db.PostAttributesDefinitions.Where(d => d.DefinitionId==1).Include(d => d.OwnerCategory).First();
        v.Add(new PostAttributeValue() { Definition = entity });

        Post post = new Post()
        {
            Title = "foo",
            Description = "bar",
            City = new City { },
            Brokerage = false,
            Location = "",
            RequestedPrice = 500,
            ParentCategory = new Category() { },
            AuthorIPAddress = "",
            Attributes = v
        };

        db.Posts.Add(post);

        var deletedValuesStore = ((System.Data.Entity.Infrastructure.IObjectContextAdapter)db) 
```

.ObjectContext.ObjectStateManager.GetObjectStateEntries(System.Data.EntityState.Deleted);

并看到 deletedValuesStore 包含 1 项 - 定义。当我评论这条线时，商店里没有商品。

你有什么想法可以解决吗？谢谢你的时间！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T15:52:25.243

好的，所以我想通了。以防万一有人感兴趣，我错误地将我的 DbContext 配置为Required().WithOptional() 关系而不是一对多-Required().WithMany()。因此，当我将已经分配给一个值的现有属性定义分配给一个新值时，它会自动将其标记为已删除。

# asp-classic - 如何将 header 和 body 标签添加到 header.asp 和 default.asp？

> ID：14763782
> 
> 赞同：0
> 
> 时间：2013-02-08T00:33:50.937
> 
> 标签：asp-classic

我试图这样做，但我得到了一个错误。

这是标题：

```
<head>
<link href="styles.css" rel="stylesheet" type="text/css">
<!--#include file="functions.asp"-->
</head>
<body>
<div>etc... 
```

这是default.asp：

```
<html>
<head>
<title>jh</title>
<link href="JHstyles.css" rel="stylesheet" type="text/css">
</head>
<body>
<!--#include file="/header.asp"-->
<!--#include file="header-jh.asp"-->
<table... etc 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T18:35:18.097

虽然我不习惯经典 ASP（这与较新的 ASP.NET 不同），但看起来您正在创建文档结构错误 - 组合文档如下所示：

```
<html>
<head>
<title>jh</title>
<link href="JHstyles.css" rel="stylesheet" type="text/css">
</head>
<body>
<head>
<link href="styles.css" rel="stylesheet" type="text/css">
<!--#include file="functions.asp"-->
</head>
<body>
<!-- div content etc. -->
<!--#include file="header-jh.asp"-->
<!-- Table and other content -->
</body>
</html> 
```

请注意，head 和 document 元素出现两次，这是无效的 - 在任何文档中，head 和 body 元素应该只出现一次，head 作为 html 元素的第一个子元素。请参阅[https://developer.mozilla.org/en-US/docs/HTML/Element/head](https://developer.mozilla.org/en-US/docs/HTML/Element/head)和[https://developer.mozilla.org/en-US/docs/HTML/Element/body](https://developer.mozilla.org/en-US/docs/HTML/Element/body)

HTML5 中有一个新的*header*元素，它表示 body 中的页眉内容，作为一个新的语义元素，但是 head 元素永远不应该作为 body 的子元素，或者 body 作为 head 的子元素。

在 PHP 中，我使用的最接近经典 ASP 的结构，我通常会创建一个 header.php 文件，其中包括 doctype、打开 HTML 标记和整个 head 元素 - 使用变量传递页面标题和任何自定义脚本/样式表。我不知道这种方法是否适用于经典 ASP，但从概念上讲没有理由不应该，您只需要具有更多经典 ASP 经验的人来为您提供建议。

就目前而言，您要么需要从 header.asp 文件中删除除样式表和 functions.asp 包含引用之外的所有内容，然后将 include 移到 default.asp 文件的头部内，或者启动头部元素在 default.asp 中（以允许标题）并在 header.asp 中完成它（从 default.asp 中删除关闭头和打开正文标记）。

参考 HTTP 500 错误，这是一个服务器错误，我希望它是由于服务器未能找到您包含的一个或多个文件的结果。确保在与 default.asp 相同的目录中有文件 functions.asp、header.asp 和 header-jh.asp - 我也会从 header.asp 中删除前导 / - 在其他语言中，对文件的引用是相对的到包含该文件的目录，例如 ../header.asp 如果 header.asp 文件包含在 default.asp 的父目录中，并且不使用指向网站域根目录的 HTML 相对路径。

我希望这有帮助。

# struts2 - Tile 3 在 struts2 上不起作用

> ID：14763784
> 
> 赞同：1
> 
> 时间：2013-02-08T00:34:09.230
> 
> 标签：struts2, tiles, struts2-tiles-plugin

我正在尝试在我的 struts2 应用程序中使用 Tile 插件，但收到以下错误，

“部署期间发生错误：加载应用程序时出现异常：java.lang.IllegalStateException：ContainerBase.addChild：开始：org.apache.catalina.LifecycleException：java.lang.IllegalArgumentException：java.lang.ClassNotFoundException：org.apache.struts2。 tiles.StrutsTilesListener。有关详细信息，请参阅 server.log。”

我有以下 jar 文件：

```
tiles-api-3.0.1.jar
tiles-autotag-core-runtime-1.1.0.jar
tiles-compat-3.0.1.jar
tiles-core-3.0.1.jar
tiles-el-3.0.1.jar
tiles-extras-3.0.1.jar
tiles-freemarker-3.0.1.jar
tiles-jsp-3.0.1.jar
tiles-mvel-3.0.1.jar
tiles-ognl-3.0.1.jar
tiles-request-api-1.0.1.jar
tiles-request-freemarker-1.0.1.jar
tiles-request-jsp-1.0.1.jar
tiles-request-mustache-1.0.1.jar
tiles-request-servlet-1.0.1.jar
tiles-request-servlet-wildcard-1.0.1.jar
tiles-request-velocity-1.0.1.jar
tiles-servlet-3.0.1.jar
tiles-template-3.0.1.jar
tiles-velocity-3.0.1.jar
commons-beanutils-1.8.0.jar
commons-digester-2.0.jar
jcl-over-slf4j-1.5.8.jar
slf4j-api-1.5.8.jar 
```

Web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
    <context-param>
        <param-name>org.apache.tiles.impl.BasicTilesContainer.DEFINITIONS_CONFIG</param-name>
        <param-value>/WEB-INF/tiles.xml</param-value>
    </context-param>
    <listener>
        <listener-class>org.apache.struts2.tiles.StrutsTilesListener</listener-class>
    </listener>
    <filter>
        <filter-name>struts2</filter-name>
        <filter-class>org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter</filter-class>
    </filter>
    <filter-mapping>
        <filter-name>struts2</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>
    <session-config>
        <session-timeout>
            30
        </session-timeout>
    </session-config>
    <welcome-file-list>
        <welcome-file>index.jsp</welcome-file>
    </welcome-file-list>
</web-app> 
```

Struts.xml

```
<!DOCTYPE struts PUBLIC
"-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
"http://struts.apache.org/dtds/struts-2.0.dtd">

<struts>
    <!-- Configuration for the default package. -->
    <package name="default" extends="struts-default">

        <result-types>
            <result-type name="tiles" class="org.apache.struts2.views.tiles.TilesResult"/>
        </result-types>
        <action name="register">
            <result type="tiles">register</result>
        </action>
    </package>

</struts> 
```

我的 struts 库文件

```
Struts 2.3.4 Core Libraries - xwork-core-2.3.4.jar
Struts 2.3.4 Core Libraries - struts2-core-2.3.4.jar
Struts 2.3.4 Core Libraries - struts2-convention-plugin-2.3.4.jar
Struts 2.3.4 Core Libraries - ognl-3.0.5.jar
Struts 2.3.4 Core Libraries - javassist-3.11.0.GA.jar
Struts 2.3.4 Core Libraries - freemarker-2.3.19.jar
Struts 2.3.4 Core Libraries - commons-lang3-3.1.jar
Struts 2.3.4 Core Libraries - commons-io-2.0.1.jar
Struts 2.3.4 Core Libraries - commons-fileupload-1.2.2.jar
Struts 2.3.4 Core Libraries - asm-tree-3.3.jar
Struts 2.3.4 Core Libraries - asm-commons-3.3.jar
Struts 2.3.4 Core Libraries - asm-3.3.jar 
```

# internet-explorer-9 - TestComplete 8 和 IE 9：处理两个进程

> ID：14763785
> 
> 赞同：0
> 
> 时间：2013-02-08T00:34:14.823
> 
> 标签：internet-explorer-9, testcomplete

使用 URL 启动 IE9 我发现启动了两个进程；父子进程。在 TestComplete 的 ObjectBrowser 中，两个进程都有一个 Page 节点和相关的子节点。

在我的 Silverlight AUT（被测应用程序）中有一个数据网格，我需要滚动它。在尝试滚动网格之前，我会检查滚动条。

但是，根据我使用的过程，我会得到不同的结果。

```
aqObject.IsSupported(
    Sys.Process("iexplore", 1).Page("https://localhost/url/" ).Panel("silverlightContainer" ).Object(0 ).UIAObject("Popup" ).UIAObject("x" ).UIAObject("tab" ).UIAObject("TabItem", 2 ).UIAObject("StepList" )
, "VerticalScrollPercent")

aqObject.IsSupported(
    Sys.Process("iexplore", 2).Page("https://localhost/url/" ).Panel("silverlightContainer" ).Object(0 ).UIAObject("Popup" ).UIAObject("x" ).UIAObject("tab" ).UIAObject("TabItem", 2 ).UIAObject("StepList" )
, "VerticalScrollPercent") 
```

其中一个将返回 true，另一个将返回 false。`Sys.Refresh`我刷新世界或控件的多少似乎无关紧要`Sys.Process...UIAObject("StepList").Refresh`，一个总是失败而另一个通过。

这真的很奇怪，但如果它是可预测的，我可以解决它，但事实并非如此。有时父进程树有效，有时子进程树有效。

我的问题是..

*   到底是怎么回事？
*   我如何在启动应用程序时决定使用哪个流程进行自动化？
*   在不遇到这个问题的情况下，我还能如何实现滚动列表的目标（这样我就可以找到我想要的行）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T05:04:47.177

这是因为 Internet Explorer 的**LCIE**功能（松耦合 Internet Explorer）。它使 Internet Explorer 对每个打开的网页都有一个主进程和一个单独的进程。[您可以在准备 Internet Explorer 以进行 Web 测试](http://support.smartbear.com/viewarticle/30382/)帮助主题中找到有关此功能的更多信息以及有关如何禁用它的详细信息。

此外，您可以将该工具的实例升级到 TestComplete 9。此版本允许访问页面对象，而不管浏览器的类型及其实例的索引如何。例如：

```
var page = Sys.Browser().Page("http://www.google.com"); 
```

# r - 在R中对数据帧进行矢量化循环

> ID：14763789
> 
> 赞同：5
> 
> 时间：2013-02-08T00:34:35.283
> 
> 标签：r, coding-style

我有一个包含三列的数据框：参考、目标、距离。每个参考都具有到同一组目标的测量距离，我想获得每个参考的最小距离向量。现在我正在使用 for 循环执行此操作，但似乎应该有一种方法可以对其进行矢量化。

这是我的代码：

```
refs <- levels(data$ref)

result <- c()
for (ref in refs) {
    # Find the minimum distance for observations with the current ref
    # but be sure to protect against ref == target!
    best_dist <- min(data[data$ref == ref & data$target != ref,]$distance)
    result <- c(result, best_dist)
} 
```

我注定要以这种方式设置我的数据框，还是有一种很好的方法来矢量化它？谢谢您的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-08T00:54:18.280

`c`永远不要在循环中使用, `cbind`,来增长对象`rbind`。每次都会复制该对象。而是预先分配到正确的大小（或者如果结果是流动的，则高估）。

话虽如此，这里不需要循环

我喜欢`data.table`s 的内存效率和编码优雅。

```
 library(data.table)
 DT <- data.table(data)

 DT[ref != target, list(bestdist = min(distance)), by = ref] 
```

* * *

如果 ref 和 target 是具有不同级别的因子列（如评论中所建议的那样），则要么使它们具有相同的级别，要么转换为字符

```
 DT[as.character(ref) != as.character(target),  list(bestdist = min(distance)), by = ref] 
```

# javascript - 确定扩展文本是否会超过最大宽度/导致省略号显示？

> ID：14763791
> 
> 赞同：3
> 
> 时间：2013-02-08T00:34:49.620
> 
> 标签：javascript, css

我想确定一段文本是否被截断/显示省略号，以便我可以有条件地在`[more]`其后添加一个链接。

这是我正在使用的 CSS：

```
.more-text-collapse {
    display:inline-block;
    max-width:400px;
    height:1.2em;
    overflow:hidden;
    text-overflow:ellipsis;
    white-space:nowrap;
} 
```

我适用于`<div>`. 当里面的文本超过 400px 时，它会在末尾显示一个省略号。在那种情况下，我想添加一个`[more]`链接来扩展文本。

如何确定是否需要显示链接？

[示例小提琴](http://jsfiddle.net/mnbayazit/wxvRf/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T01:02:10.517

根据[这个答案](https://stackoverflow.com/questions/1582534/calculating-text-width-with-jquery)，这里有代码：

```
$.fn.textWidth = function(){
  var html_org = $(this).html();
  var html_calc = '<span>' + html_org + '</span>';
  $(this).html(html_calc);
  var width = $(this).find('span:first').width();
  $(this).html(html_org);
  return width;
};

var elmW = $('.more-text').width(),
    txtW = $('.more-text').textWidth();
if(elmW < txtW) $('.more-text').after('[more]'); 
```

[http://jsfiddle.net/Sergiu/EvD3J/1/](http://jsfiddle.net/Sergiu/EvD3J/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T00:49:31.427

Looks like I can do what I want using these styles:

```
.more-text {
    line-height: 1.2em;
    display:none;
    white-space: nowrap;
}

.more-text-collapse {
    display:inline-block;
    max-width:400px;
    height:1.2em;
    overflow:hidden;
    text-overflow:ellipsis;
    white-space:nowrap;
}

.more-text-expand {
    display:inline;
    white-space: pre-wrap;
} 
```

I give each of `<divs>` just the `more-text` class which lets them spread to their full width but hides them so they don't muck up the interface, then I compute their width and override class:

```
$('.more-text').each(function(i,el) {
    var width = $(this).width();
    $(this).addClass('more-text-collapse');
    if(width > 400) {
        $('<a>', {href:'#',class:'more-link'}).text('[more]').insertAfter(this);
    }
}); 
```

* * *

Actually, we can take the width out of the CSS entirely so that we only have to define it in one place:

```
var maxWidth = 400;
$('.more-text').each(function(i,el) {
    var width = $(this).width();
    if(width > maxWidth) {
        $(this).addClass('more-text-collapse').css('max-width',maxWidth);
        $('<a>', {href:'#',class:'more-link'}).text('[more]').insertAfter(this);
    } else {
        $(this).addClass('more-text-expand');
    }
}); 
```

Would be nice if I could animate the text expanding...

# java - 从不同的项目访问属性文件

> ID：14763792
> 
> 赞同：1
> 
> 时间：2013-02-08T00:34:50.593
> 
> 标签：java, properties, maven-plugin-development

我正在开发一个自定义的 Maven 插件。当我阅读自定义插件的属性文件时，一切都很好，但是当我在不同的项目中将它作为插件运行时，我如何才能获得该项目的属性文件，它总是像往常一样查看自身的资源目录，因为：

我有这个：

```
Properties allProperties = new Properties();
allProperties.load(this.getClass().getResourceAsStream("/tokens.properties")); 
```

我试过了：

```
Properties allProperties = new Properties();
ClassLoader loader = Thread.currentThread().getContextClassLoader();
allProperties.load(loader.getResourceAsStream("/tokens.properties")); 
```

但没有用。有任何想法吗？

**PS：**当我运行它时，它从插件属性文件中读取。我的属性文件在

```
src/main/resources 
```

我在我的 poms 中使用它：

```
<build>
     ...
    <resources>
        <resource>
            <directory>src/main/resources/</directory>
            <filtering>true</filtering>
        </resource>
    </resources>
     ...
</build> 
```

和我的属性文件：

```
project.version = ${project.version} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-10T02:13:31.127

```
Properties allProperties = new Properties();
ClassLoader loader = Thread.currentThread().getContextClassLoader();
allProperties.load(loader.getResourceAsStream("/tokens.properties")); 
```

你很亲密。这确实是正确的类加载器，但路径错误。删除前导斜杠。

```
allProperties.load(loader.getResourceAsStream("tokens.properties")); 
```

# php - 在 PHPMyAdmin 中更改 Magento 订单 ID/发票号码

> ID：14763800
> 
> 赞同：0
> 
> 时间：2013-02-08T00:35:24.313
> 
> 标签：php, magento, phpmyadmin

好的，所以我很难弄清楚我需要将下一个订单号从 100XXX 更改为我想要的我该怎么做？

我对这一切都很陌生，所以如果你能给我详细的说明，我将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T01:21:38.093

更改订单号

`increment_last_id`在`eav_entity_store`表中更新。为订单找到正确的 entity_type_id

**查找订单的 entity_type_id**

`SELECT entity_type_id FROM eav_entity_type WHERE entity_type_code = 'order';`

看

*   [更改 Magento 订单、发票和发货编号](http://chilipepperdesign.com/2009/07/09/changing-magento-order-invoice-and-shipping-numbers/)

*   [如何在 Magento 中更改订单增量 ID 和前缀](http://www.warpconduit.net/2012/04/18/how-to-change-the-order-increment-id-and-prefix-in-magento/)

*   [如何在 Magento 中更改订单起始编号](https://stackoverflow.com/questions/9419592/how-to-change-order-starting-number-in-magento)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T20:52:54.950

有一个免费的扩展程序可以为您完成。`Aschroder_SetStartOrderNumber`安装起来比我找到它的名字并给出这个答案要快。

# java - 复杂的 Mongo DB 查询 - 子文档

> ID：14763802
> 
> 赞同：0
> 
> 时间：2013-02-08T00:35:30.943
> 
> 标签：java, mongodb, spring-data-mongodb

我的文档结构如图所示![这里](../Images/8b8f70c500026924d48dfd25d5fd3267.png)

我想获得一个版本大于 0 的 moduleDataItems 集合。

这是我的尝试：

```
 Query qu = Query.query(Criteria.where("appKey")
                    .is("MOCK_APP").and("modules._id")
                    .is("APP_1_MOD_1")
                    .and("modules.moduleDataItems.version")
                    .gt(0));

            List<DataItem> dList = mongoTemplate.find(qu,
                    DataItem.class,
                    ApplicationConstants.MONGO_APPLICATION_COLLECTION_NAME); 
```

我很确定我没有做正确的事。我在结果中没有得到任何 DataItem。

这些类代表 json 结构。

任何帮助表示赞赏。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T02:10:02.393

最后用这个解决了 -

```
 DBObject unwindParam = new BasicDBObject("$unwind","$dataItems");
    DBObject matchParam = new BasicDBObject("$match",
                                         new BasicDBObject("dataItems.version",
            new BasicDBObject("$gt",requestedModule.getVersion())));                                       
    DBObject fields = new BasicDBObject("dataItems", 1);
    DBObject projectParam = new BasicDBObject("$project", fields);
    AggregationOutput output = mongoTemplate.getCollection(
                                    "appModules").aggregate(
                                     unwindParam, matchParam,projectParam);
    CommandResult updatedData = output.getCommandResult();
    BasicDBList resList = (BasicDBList) updatedData.get("result"); 
```

# c# - 如何最好地处理意外的套接字错误？

> ID：14763803
> 
> 赞同：0
> 
> 时间：2013-02-08T00:35:43.770
> 
> 标签：c#, sockets, system.reactive

我有一个聊天客户端类

```
class ChatClient
{
    Task ConnectAsync(string server);
    Task SendMessageAsync(string message);
    Task DisconnectAsync();
} 
```

一旦用户连接了 ConnectAsync，他们就可以调用 SendMessageAsync 向其他用户发送消息。

在底层有一个 Connection 类，它是 Socket 类的一个非常基本的包装器。主要区别之一是它有一个 OnError 事件。

我还使用了一个可观察的消息流（反应式扩展），它从连接中读取并从服务器生成传入命令流。

我的问题是——当套接字产生错误时，我最好从哪里处理这个错误？我应该在 OnError 事件处理程序中处理它，还是应该从可观察流中截取错误并在那里处理？

无论哪种方式，我都看不到任何好处或坏处，所以我想知道最佳实践是什么？

关于在连接类上举办活动的事情总是让我觉得有点 hacky，但我不知道为什么。

有什么建议么？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T10:27:49.090

我不得不说，最好的解决方案是对最终用户最透明的解决方案。如果错误以某种方式影响用户，则应通知他们或让他们选择如何继续。如果无法通知用户，则以便于将来改进的方式处理错误。

# gcc - 在 CentOS 上构建整个工具链的教程

> ID：14763805
> 
> 赞同：5
> 
> 时间：2013-02-08T00:35:53.157
> 
> 标签：gcc, centos, glibc, binutils, centos6

我正在使用 CentOS 6 机器，它有非常旧的 GCC/GlibC 版本。我想用最新或至少最近的版本构建整个 glibc、binutils、gcc 工具链，以便在最新的 gcc 中使用 c++11 支持，在最近的 binutils 中使用 ld.gold，并可能在最近的 glibc 中进行改进。

我想将整个工具链放在某个单独的目录中，而不是影响任何现有的系统文件。我还想用 --sys-root 构建 gcc，这样在使用 gcc 时，我不需要指定 -I/some/directory/include 和 -L/some/directory/lib 或任何其他参数。此外，生成的可执行文件将自动使用新的 ld-linux-xxxxx 程序加载器，它会自动找到新的 libc.so。

任何人都知道是否有关于此任务的教程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T12:50:26.167

编译器非常依赖 glibc，尽管您设法在 chrooted 系统或等效系统中构建编译器，但您还需要构建您将使用这个新编译器构建的程序所需的所有库。您能做的最好的事情是使用全新的系统（vm 或其他）或升级您现有的系统

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-24T05:45:33.573

您可以从 Openembedded 或 Yocto 下载最新的工具链。在这里，您不必对当前系统进行任何软件包安装。只需下载工具链，获取环境，就可以检查 c++11 支持了。下载工具链的位置：http: [//downloads.yoctoproject.org/releases/yocto/yocto-1.7/toolchain/](http://downloads.yoctoproject.org/releases/yocto/yocto-1.7/toolchain/)（根据您的机器支持选择32位或64位的架构）

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-08T01:20:48.183

如果你需要最新的工具链，你最好迁移到 Fedora。

如果你不能/不愿意，最好的办法是将这些片段作为 CentOS 和 Fedora 的源 RPM，解压缩它们并通过从 Fedora 窃取源代码和补丁来修复 CentOS，注意它不会推翻系统包，正确的版本和修复安装在别处（不要把你的系统搞得太乱！`/usr/local`想到了）。这些部分至少是binutils，gcc。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-08T08:20:20.760

我不知道你为什么需要这个？如果需要为另一台计算机编译，我建议使用运行与目标相同的操作系统的虚拟机。更容易！

# highcharts - Google Apps 脚本中的 Highcharts

> ID：14763809
> 
> 赞同：0
> 
> 时间：2013-02-08T00:36:52.553
> 
> 标签：highcharts, google-apps-script

有没有人让 Highcharts 在 Google Apps 脚本中工作。 [http://www.moxiegroup.com/moxieapps/gwt-highcharts/download.jsp](http://www.moxiegroup.com/moxieapps/gwt-highcharts/download.jsp)

我知道您可以通过以下方式在 GWT 中进行操作： [http ://www.moxiegroup.com/moxieapps/gwt-highcharts/quickstart.jsp](http://www.moxiegroup.com/moxieapps/gwt-highcharts/quickstart.jsp)

有没有人知道如何将此应用到 Google Apps 脚本环境？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T04:16:20.967

如果您使用 HtmlService 发布您的 Web 应用程序，您当然可以使用`<script>`标签将 Highcharts javascript 文件添加到您的页面，但请注意 Google Caja 在将 HTML 代码显示给用户之前会对其进行清理。这是什么意思？好吧，由于 highcharts js 文件很大，清理它需要一段时间（在几秒钟的范围内）。

您最好使用 Apps Script [Charts 服务](https://developers.google.com/apps-script/service_charts)。

# javascript - preventDefault 和提交表单的困难

> ID：14763811
> 
> 赞同：0
> 
> 时间：2013-02-08T00:36:56.840
> 
> 标签：javascript, html, form-submit, preventdefault

我正在使用动态形式。当我在第一个文本字段中输入我的姓名并按 Enter 时，会弹出下一个文本字段，请求我的电子邮件。但是，我可以多次单击输入，并且下一个文本字段不断弹出，我只想弹出一次。另一个问题是，如果我按两次 Enter 键，我的下一个请求我的电子邮件的文本字段会提交表单，我也想阻止这种情况。有什么解决办法吗？

Javascript

```
function addEvent(element, eventType, theFunction, capture) {
if (element.addEventListener) {
    element.addEventListener(eventType, theFunction, capture);
}
else if (element.attachEvent) {
    element.attachEvent("on" + eventType, theFunction);
}
}

function createEmailField() {
if ((window.event && window.event.keyCode == 13) || event.keyCode == 13) {

    var name = document.getElementById("name").value;

    if (name == "") {
        window.alert("Mata in ditt namn");
    }
    else if (name.search(/^[A-Za-z]+$/) == -1) {
        window.alert("Mata in ett namn med bokstäver");
    }
    else {

        var newDiv = document.createElement("div");

        var br = document.createElement("br");
        newDiv.appendChild(br);

        newDiv.appendChild(document.createTextNode("Hej " + name + "!"));

        var br = document.createElement("br");
        newDiv.appendChild(br);

        newDiv.appendChild(document.createTextNode("Hur når vi dig?"));

        var br = document.createElement("br");
        newDiv.appendChild(br);

        newDiv.appendChild(document.createTextNode("Epost:"));

        var br = document.createElement("br");
        newDiv.appendChild(br);

        var input = document.createElement("input");
        input.setAttribute("type", "text");
        input.setAttribute("id", "email");
        input.setAttribute("name", "email");
        newDiv.appendChild(input);

        var form = document.getElementById("form");
        form.appendChild(newDiv);

        var email = document.getElementById("email");
        addEvent(email, "change", createTextArea, false);

    }
}
}

function createTextArea() {

var email = document.getElementById("email").value;

if (email == "") {
    alert("Mata in ditt email");
}
else if (email.search(/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/) == -1) {
    window.alert("Mata in ett korrekt email");
}
else {
    var newDiv = document.createElement("div");

    var br = document.createElement("br");
    newDiv.appendChild(br);

    newDiv.appendChild(document.createTextNode("Vad har du för fråga om vår verksamhet?"));

    var br = document.createElement("br");
    newDiv.appendChild(br);

    var textArea = document.createElement("textArea");
    textArea.setAttribute("id", "question");
    textArea.setAttribute("name", "question");
    textArea.cols = "30";
    textArea.rows = "5";
    newDiv.appendChild(textArea);

    var br = document.createElement("br");
    newDiv.appendChild(br);

    newDiv.appendChild(document.createTextNode("Vi kommer att svara dig via: " +   email));

    var br = document.createElement("br");
    newDiv.appendChild(br);

    var button = document.createElement("input");
    button.setAttribute("type", "submit");
    button.setAttribute("value", "Skicka");
    button.setAttribute("name", "Skicka");
    button.setAttribute("id", "submit");
    newDiv.appendChild(button);

    var form = document.getElementById("form");
    form.appendChild(newDiv);

}
}

function prevent(event) {
if ((window.event && window.event.keyCode == 13) || event.keyCode == 13) {
    if (window.event) {
        window.event.returnValue = false;
    } else if (event.preventDefault) {
        event.preventDefault();
    }
}
}

function init() {
var name = document.getElementById("name");
addEvent(name, "keyup", createEmailField, false);
name.onkeypress = prevent;
}

window.onload = init; 
```

HTML

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">

<html>

<head>
<title>Inl1-3</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<script type="text/javascript" src="Uppg3.js" >
</script>

</head>

<body>

<h2> Frågeformulär </h2>
<form id="form" method="post"     action="http://student.ts.mah.se/da123aht11/echoscript.php">
<div>
    Vad heter du?... 
    <br /><input type="text" name="name" id="name" /> 
</div>
</form>

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T00:58:40.770

一种解决方案是保留一个状态变量来检查电子邮件字段/文本区域是否创建，`var emailCreated = false, textareaCreated = false;`并检查状态并在操作完成后更新它们。

```
function addEvent(element, eventType, theFunction, capture) {
if (element.addEventListener) {
    element.addEventListener(eventType, theFunction, capture);
}
else if (element.attachEvent) {
    element.attachEvent("on" + eventType, theFunction);
}
}

function createEmailField() {
if ((window.event && window.event.keyCode == 13) || event.keyCode == 13) {
    if(emailCreated){
        return;
    }

    var name = document.getElementById("name").value;

    if (name == "") {
        window.alert("Mata in ditt namn");
    }
    else if (name.search(/^[A-Za-z]+$/) == -1) {
        window.alert("Mata in ett namn med bokstäver");
    }
    else {

        var newDiv = document.createElement("div");

        var br = document.createElement("br");
        newDiv.appendChild(br);

        newDiv.appendChild(document.createTextNode("Hej " + name + "!"));

        var br = document.createElement("br");
        newDiv.appendChild(br);

        newDiv.appendChild(document.createTextNode("Hur når vi dig?"));

        var br = document.createElement("br");
        newDiv.appendChild(br);

        newDiv.appendChild(document.createTextNode("Epost:"));

        var br = document.createElement("br");
        newDiv.appendChild(br);

        var input = document.createElement("input");
        input.setAttribute("type", "text");
        input.setAttribute("id", "email");
        input.setAttribute("name", "email");
        newDiv.appendChild(input);

        var form = document.getElementById("form");
        form.appendChild(newDiv);

        var email = document.getElementById("email");
        addEvent(email, "change", createTextArea, false);

        emailCreated = true;

    }
}
}

function createTextArea() {
    if(textareaCreated){
        return;
    }

var email = document.getElementById("email").value;

if (email == "") {
    alert("Mata in ditt email");
}
else if (email.search(/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/) == -1) {
    window.alert("Mata in ett korrekt email");
}
else {
    var newDiv = document.createElement("div");

    var br = document.createElement("br");
    newDiv.appendChild(br);

    newDiv.appendChild(document.createTextNode("Vad har du för fråga om vår verksamhet?"));

    var br = document.createElement("br");
    newDiv.appendChild(br);

    var textArea = document.createElement("textArea");
    textArea.setAttribute("id", "question");
    textArea.setAttribute("name", "question");
    textArea.cols = "30";
    textArea.rows = "5";
    newDiv.appendChild(textArea);

    var br = document.createElement("br");
    newDiv.appendChild(br);

    newDiv.appendChild(document.createTextNode("Vi kommer att svara dig via: " +   email));

    var br = document.createElement("br");
    newDiv.appendChild(br);

    var button = document.createElement("input");
    button.setAttribute("type", "submit");
    button.setAttribute("value", "Skicka");
    button.setAttribute("name", "Skicka");
    button.setAttribute("id", "submit");
    newDiv.appendChild(button);

    var form = document.getElementById("form");
    form.appendChild(newDiv);

    textareaCreated = true;

}
}

function prevent(event) {
if ((window.event && window.event.keyCode == 13) || event.keyCode == 13) {
    if (window.event) {
        window.event.returnValue = false;
    } else if (event.preventDefault) {
        event.preventDefault();
    }
}
}

function init() {
var name = document.getElementById("name");
addEvent(name, "keyup", createEmailField, false);
name.onkeypress = prevent;
}

var emailCreated = false, textareaCreated = false;
window.onload = init; 
```

演示：[小提琴](http://jsfiddle.net/WNftG/1/)

另一种方法是使用`removeEvent()`函数

```
function removeEvent(element, eventType, theFunction, capture) {
if (element.removeEventListener) {
    element.removeEventListener(eventType, theFunction, capture);
}
else if (element.detachEvent) {
    element.detachEvent("on" + eventType, theFunction);
}
} 
```

然后分别添加电子邮件字段和文本区域后调用`removeEvent(document.getElementById("name"), "keyup", createEmailField, false);`和。`removeEvent(document.getElementById("email"), "change", createTextArea, false);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T00:51:45.543

创建电子邮件字段后，您似乎没有删除事件侦听器，因此它仍然处于活动状态。创建第二个字段后，您需要从第一个字段中删除事件侦听器。

# jquery - 使用 Postgresql 9.2 Json 的 jQuery 自动完成

> ID：14763812
> 
> 赞同：1
> 
> 时间：2013-02-08T00:37:07.537
> 
> 标签：jquery, autocomplete, postgresql-9.2

我想使用返回 Json-Array 的 Postgresql (9.2) 查询来使用标签和值填充 Jquery 自动完成字段。

我的 sql 查询返回一个如下所示的数组：

```
[{value:"ki_ln_biganoir",label:"LN Bigarreau noir"},{value:"ki_ln_bigonnoir",
label:"LN Bigon noir"}, ... }] 
```

当我将此字符串存储在文本文件中时，我可以将其用作数据源来填充自动完成脚本。我无法将查询结果传递给自动完成脚本。

我尝试了以下方法：

```
<?php
require("connect.php");
$query = "select array_to_json(array_agg(row_to_json(s))) from (select art, id_sort as value, 
sorte_de as label from sorten) s;";
$result = pg_exec($db_handle, $query) or die('Abfrage fehlgeschlagen: ' . pg_last_error());
$list = pg_fetch_array($result, NULL, PGSQL_ASSOC);
pg_free_result($result);
?> 
```

稍后在我的脚本中，我想将查询结果传递给 javascript：

```
<script type="text/javascript">
    var jsonlist = JSON.stringify(<?php echo $list ?>);
    $( "#sortefrm" ).autocomplete({
        source: jsonlist,
        minLength: 2,
    });
</script> 
```

我认为脚本可以像处理平面 json 文件一样处理 $list。

但事实并非如此。

据我所知，我不需要调用 ab ajax 请求。它也应该与 Postgresql-query 返回的 json 一起使用。

# php - 使用 cakephp 上传文件

> ID：14763813
> 
> 赞同：1
> 
> 时间：2013-02-08T00:37:09.547
> 
> 标签：php, cakephp, cakephp-2.0

我只想使用 cakephp 上传一个 pdf 文件，这是我的观点`pdfadd.ctp`：

```
<?php echo $this->Form->create('pdfadd1', array('enctype' => 'multipart/form-data'));?>
    <fieldset>
    <?php
        echo $this->Form->file('Document.submittedfile');
    ?>
    </fieldset>
<?php echo $this->Form->end(__('Submit'));?> 
```

这是我的控制器：

```
 public function pdfadd(){
     if ($this->request->is('post') || $this->request->is('put')) {
         //die();
         $file = $this->request->data['Document']['submittedfile'];
         //$this->pdfadd1->save($this->request->data);
         move_uploaded_file($this->data['Document']['submittedfile']['tmp_name'], $_SERVER['DOCUMENT_ROOT'] . '/app/webroot/files/' . $this->data['Document']['submittedfile']['name']);
     } 
```

它给了我这个错误：

```
Warning (2): move_uploaded_file(D:/Program Files D/xampp/htdocs/app/webroot/files/Functions Package for email (1).pdf): failed to open stream: No such file or directory [APP\Controller\PagesController.php, line 29]
Warning (2): move_uploaded_file() [function.move-uploaded-file]: Unable to move 'D:\Program Files D\xampp\tmp\php862.tmp' to 'D:/Program Files D/xampp/htdocs/app/webroot/files/Functions Package for email (1).pdf' [APP\Controller\PagesController.php, line 29] 
```

而且我想将文件重命名为`1.pdf`. 该文件应保存在`webroot/files`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T02:37:15.670

替换这个：

```
$_SERVER['DOCUMENT_ROOT'] . '/app/webroot/files/' . $this->data['Document']['submittedfile']['name'] 
```

有了这个：

```
WWW_ROOT . 'files' . DS . '1.pdf' 
```

但是，您确实应该进行更多验证，例如使用[PHP 的`is_uploaded_file`函数](http://php.net/manual/en/function.is-uploaded-file.php)，确保文件确实是 PDF 等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-04T12:35:15.173

```
move_uploaded_file($this->data['Document']['submittedfile']['tmp_name'],      $_SERVER['DOCUMENT_ROOT'] . '/app/webroot/files/' . $this->data['Document']['submittedfile']['name']); 
```

1.根据目录2.c:xampp/htdocs(这是cakephp中默认上传的位置)更改此代码，然后将您的上传文件位置

```
 move_uploaded_file($this->data['Document']['submittedfile']['tmp_name'], $_SERVER['DOCUMENT_ROOT'] . 'cakephp/app/webroot/files/' . $this->data['Document']['submittedfile']['name']); 
```

3.上传前可以重命名

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-17T11:11:41.940

此行仅获取文件名，而不是文件。

```
$file = $this->request->data['Document']['submittedfile']; 
```

你可以用这个。

```
$file = $_FILES ['Document'] ['submittedfile']; 
```

# php - PHP Youtube API：使用特定语言搜索视频

> ID：14763816
> 
> 赞同：0
> 
> 时间：2013-02-08T00:37:21.387
> 
> 标签：php, youtube-api

我正在使用 zend 在 youtube 上搜索视频。我的问题是，有没有办法将结果限制为仅限英文视频？这是我到目前为止的代码明智的：

```
$yt = new Zend_Gdata_YouTube();
$yt->setMajorProtocolVersion(2);
$query = $yt->newVideoQuery();
$query->setOrderBy('viewCount');
$query->setSafeSearch('none');
$query->setVideoQuery($keyword); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T01:01:47.563

我认为您不能按语言搜索，但可以按 RegionId（或 v3 中的 RegionCode）搜索。根据用例，通过所有英语国家并以这种方式过滤可能就足够了。

# c# - 遍历对象列表并在组合框中显示属性

> ID：14763817
> 
> 赞同：0
> 
> 时间：2013-02-08T00:37:25.907
> 
> 标签：c#

我有 2 个组合框，第一个让您选择一个接口，第二个应该根据您选择的接口显示适当的地址，我有一个对象列表，每个对象都是一个具有关联地址的接口。在用户选择要连接的接口后，我需要将这些地址显示到组合框中。

这是我到目前为止所拥有的，问题是它总是显示第一个接口的地址。AddressCnt 是每个接口的地址数。

```
 private void cboInterface_SelectedIndexChanged(object sender, EventArgs e)
    {
        lblAddress.Text = cboInterface.SelectedItem.ToString();
        cboAddress.Items.Clear();

        for (int x = 0; x < Interface[0].AddressCnt; x++)
        {
            cboAddress.Items.Add(Interface[0].AddressBuff[x].ToString());
        }

    } 
```

# git - 试图恢复提交现在我分歧了

> ID：14763822
> 
> 赞同：0
> 
> 时间：2013-02-08T00:37:34.003
> 
> 标签：git

好的，我是新手，所以请温柔。我提交了一个文件，然后我试图恢复它，因为它是错误的。我使用 git 在这个网站上使用了一个教程`reset --soft HEAD~1`

现在它说我的分支和源/主已经分歧，并且每个有 2 和 13 个不同的提交。它列出了我最初提交后最近提取的一些文件。

仅供参考，我从未推送过文件，我只是提交了它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T02:18:09.883

做`git reset --hard origin/master`会成功。但这会破坏您的所有更改。如果您再次遇到这种情况并希望继续提交，您有几个选择。

1)`git pull` 这会将来自 origin/master 的更改合并到您的本地。会有一个合并提交说你有“将主合并到主”。

2）`git pull --rebase` 这会将您的提交回滚到与 origin/master 的最后一个共享提交。应用远程更改，最后应用您的更改。这可能会导致冲突，但历史记录中没有合并提交。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T00:49:57.493

If you want to just throw away your divergent commits, you can just `git reset --hard origin/master`.

# javascript - 在 java 脚本中找不到成员错误

> ID：14763825
> 
> 赞同：0
> 
> 时间：2013-02-08T00:37:52.340
> 
> 标签：javascript

以下用于打开和关闭窗口的代码会引发 java 脚本错误“未找到成员”。这不会发生在所有机器上，但对于某些使用 IE 8 的用户。以下代码中的 winobject.blur() 会引发错误。

```
var winobject=null;   
winobject = window.open('URL','Name',"width=1,height=1,top=2000,left=2000");
if(winobject!=null){
    winobject.blur();
    self.resizeTo(screen.availWidth,screen.availHeight);
    winobject.close();
    ...
} 
```

有什么帮助或建议来解决这个问题吗？

一些额外的观察 - 此问题仅在具有“名称”的窗口已经存在时发生。假设用户已经关闭了已经打开的弹出窗口，那么代码将运行良好。此外，如果我在当前窗口下再添加一个 window.open，则调用 blur() 时不会引发异常。不知道为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T00:43:53.690

~~`if (typeof winobject != "undefined")`~~

~~我今天在工作中遇到了这样的问题。试试看，你应该很高兴。~~

编辑：

我已经找到[以下链接](http://support.microsoft.com/kb/973528)似乎可以解释发生了什么。因为您是`window`自己创建的，所以 IE8 的“安全性”会阻止对其执行许多常见操作。

作为解决方法，我的下一个建议是同时包含`winobject.blur()`and `winobject.close()`with`if (winobject.blur)`和`if (winobject.close())`条件句。请注意，后面没有括号`blur``close`请注意，在's 之后和`if`，因为您正在寻找方法的存在而不是调用方法。

不幸的是，我不确定您可以使用哪些替代方案来获得相同的效果。但这应该有望防止错误被抛出。

# java - 小程序按钮填充区

> ID：14763827
> 
> 赞同：2
> 
> 时间：2013-02-08T00:37:58.080
> 
> 标签：java, user-interface, button, applet

我正在创建一个小程序，但我的按钮大小的定位存在问题。我添加了两个按钮，但“确定”按钮似乎正确定位和调整大小，但“清除”按钮填充了“确定”按钮后面的整个小程序区域。关于问题的任何建议？

```
@Override
public void init() 
{
    super.init();

    setSize(J_WIDTH, J_HEIGHT);
    setLayout(new BorderLayout());

    btn_OK = new Button("OK");
    btn_CLEAR = new Button("CLEAR");

    btn_OK.setBounds(50, 450, 75, 50);
    btn_CLEAR.setBounds(125, 50, 75, 50);

    add(btn_OK);
    add(btn_CLEAR);

    btn_OK.addActionListener(this);
    btn_CLEAR.addActionListener(this);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T00:45:32.520

使用 时`BorderLayout`，您应该指定要放置组件的位置。如果不这样做，则默认为`BorderLayout.CENTER`. 此外，每个位置只能包含一个组件。因此，当您调用 时`add(btn_OK)`，OK 按钮将添加到面板的中心。但随后您通过调用 将其替换为清除按钮`add(btn_CLEAR);`。

此外，每个位置都`BorderLayout`占用一定的空间。该位置的组件将拉伸以填充该空间。特别是，CENTER 占据了其他位置未使用的所有剩余空间。

我认为这`BorderLayout`不是你想要的。查看[布局管理器的视觉指南以](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)获取有关每个 LayoutManager 的更多信息。您还可以按照教程的其余部分了解有关如何实现它们的详细信息。

您还应该收藏并熟悉[Java API 文档](https://stackoverflow.com/questions/14763827/applet-button-filling-area/14763905#14763905)。这些是每个 Java 程序员必不可少的工具，可以帮助您自己回答许多问题。

# android - 为什么此指令中存在运行时错误

> ID：14763828
> 
> 赞同：0
> 
> 时间：2013-02-08T00:38:06.063
> 
> 标签：android

```
SQLiteDatabase db = this.openOrCreateDatabase("students", MODE_PRIVATE, null);

/* db.execSQL("create table info (" +
    "id integer PRIMARY KEY autoincrement," +
    "name text);" );*/

//   db.execSQL("insert into info (name) values ('Ahmed');");

//   db.execSQL("insert into info (name) values ('Ali');");

Toast.makeText(this, "databse done and informations inserted succesfully", Toast.LENGTH_LONG).show();

Cursor c1 = db.rawQuery("select * from info where name = 'ahmed';", null);

//this line gives runtime error
String x = c1.getString(c1.getColumnIndex("name"));

Toast.makeText(this, x, Toast.LENGTH_LONG).show(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T03:34:06.607

`c1.moveToFirst();`在行前添加

```
String x = c1.getString(c1.getColumnIndex("name")); 
```

此外，请考虑使用`getColumnIndexOrThrow`而不是`getColumnIndex`确保您指定了正确的列名（否则您将获得异常）

一般来说，最好使用`query`而不是`rawQuery`特别在您执行简单查询的示例中

# python - 返回先返回的表达式

> ID：14763829
> 
> 赞同：0
> 
> 时间：2013-02-08T00:38:07.473
> 
> 标签：python, multithreading, concurrency

我有两个不同的函数`f`，`g`用不同的算法计算相同的结果。有时一个或另一个需要*很长时间*，而另一个很快就会终止。我想创建一个同时运行每个函数的新函数，然后从第一个完成的函数返回结果。

我想用高阶函数创建那个函数

```
h = firstresult(f, g) 
```

在 Python 中完成此任务的最佳方法是什么？

我怀疑解决方案涉及线程。我想避免讨论 GIL。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T01:14:08.143

我会为此简单地使用[队列](http://docs.python.org/2/library/queue.html#queue-objects)。启动线程，第一个有结果的线程写入队列。

## 代码

```
from threading import Thread
from time import sleep
from Queue import Queue

def firstresult(*functions):
    queue = Queue()
    threads = [] 
    for f in functions:
        def thread_main():
            queue.put(f())
        thread = Thread(target=thread_main)
        threads.append(thread)
        thread.start()
    result = queue.get()
    return result

def slow():
    sleep(1)
    return 42 

def fast():
    return 0

if __name__ == '__main__':
    print firstresult(slow, fast) 
```

## 现场演示

[http://ideone.com/jzzZX2](http://ideone.com/jzzZX2)

## 笔记

停止线程是一个完全不同的话题。为此，您需要向`state`需要定期检查的线程添加一些变量。由于我想保持这个例子简短，我只是假设这部分，并假设所有工人都有时间完成他们的工作，即使结果从未被读取。

按照提问者的要求跳过关于 Gil 的讨论。;-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T00:58:50.387

在一个新的工作线程中运行每个函数，两个工作线程将结果发送回一个 1 项队列或类似的东西中的主线程。当主线程从获胜者那里收到结果时，它会杀死（python 线程是否支持杀死？哈哈）两个工作线程以避免浪费时间（一个函数可能需要几个小时，而另一个只需要一秒钟）。

如果需要，将单词 thread 替换为 process。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T01:00:09.677

您将需要在另一个进程（使用多处理）或不同的线程中运行每个函数。如果两者都受 CPU 限制，那么多线程将有很大帮助——正是由于 GIL——所以多处理是一种方式。

如果返回值是一个可腌制（可序列化）对象，我创建了这个装饰器，它只是在后台运行该函数，在另一个进程中：

[https://bitbucket.org/jsbueno/lelo/src](https://bitbucket.org/jsbueno/lelo/src)

这并不完全是您想要的 - 因为两者都是非阻塞的并且立即开始执行。这个装饰器的问题是当你尝试*使用*返回值时它会阻塞（并等待函数完成）。

但另一方面 - 它只是一个完成所有工作的装饰器。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-08T04:36:48.203

现在 - 与我对其他答案的建议不同，这段代码完全符合您的要求：

```
from multiprocessing import Process, Queue

import random
import time

def firstresult(func1, func2):
    queue = Queue()
    proc1 = Process(target=func1,args=(queue,))
    proc2 = Process(target=func2, args=(queue,))
    proc1.start();proc2.start()
    result = queue.get()
    proc1.terminate(); proc2.terminate()
    return result

def algo1(queue):
    time.sleep(random.uniform(0,1))
    queue.put("algo 1")

def algo2(queue):
    time.sleep(random.uniform(0,1))
    queue.put("algo 2")

print firstresult(algo1, algo2) 
```

# mysql - 如果存在则更新记录，否则插入

> ID：14763834
> 
> 赞同：0
> 
> 时间：2013-02-08T00:38:19.153
> 
> 标签：mysql

如果记录存在，我需要更新它，否则插入它。我知道这已被问过几次，但我认为我的问题有点棘手。

我有一张表（tbl_settings）：

```
setting_id   |    token   |   setting_value   |   setting_for
1                 1           on                  background
2                 1           off                 vibrate
3                 2           on                  vibrate 
```

ETC

这是一个移动应用程序，我会将用户设置保存在远程数据库中，以便以后可以在需要时检索。

Setting_id 是唯一的并且自动递增。

令牌将成为设备令牌 ID（特定于用户）

Setting_value 是该特定设置的值（开/关）

setting_for 是实际设置的名称

现在有 4 个可供用户使用的设置选项，可以在单独的时间（当用户更改设置开/关时）或一起写入数据库，如果更好的话。

因此，如果用户更改振动设置，我需要一个查询来检查振动和令牌是否存在更新该特定记录，否则插入令牌、setting_value 和 setting_for。

希望它可能在一个查询中。如果不是，我将只使用多个查询，一个用于检查它是否存在，另一个用于插入或更新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T00:46:14.987

MySQL为此提供了两种选择：

*   [`replace into`](https://dev.mysql.com/doc/refman/5.0/en/replace.html)
*   [`insert ... on duplicate update`](https://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html)

请注意，在这两种情况下，您都必须放弃`setting_id`（无论如何这似乎毫无意义）并使用复合主键。

# jquery - jQuery 缩略图轮播的问题

> ID：14763837
> 
> 赞同：1
> 
> 时间：2013-02-08T00:38:36.530
> 
> 标签：jquery, carousel, flickr

创建一个从 flickr 加载图像的 jQuery 轮播。我的大部分工作都在工作，但似乎无法弄清楚如何阻止轮播滚动超过图像的末尾。我一直在尝试计算缩略图所在列表的宽度，但我似乎只能获得可见区域的宽度。

这是小提琴：http: [//jsfiddle.net/Eku5K/](http://jsfiddle.net/Eku5K/)

这是滚动功能...

```
var change = "250px";
$(".scroll.left").click(function () {
    var thumbLeft = thumbs.css("left");
    if ((parseInt(thumbLeft) * -1) < parseInt(change)) {
        $(".thumbs ul").animate({
            'left': "0"
        });
    } else {
        $(".thumbs ul").animate({
            'left': "+=" + change
        });
    }
});

$(".scroll.right").click(function () {
    var thumbLeft = thumbs.css("left");

    $(".thumbs ul").animate({
        'left': "-=" + change
    });

}); 
```

有什么帮助吗？或者有什么改进的建议？

# .net - 与使用 Mac 的前端开发人员协作处理 .NET 项目

> ID：14763839
> 
> 赞同：0
> 
> 时间：2013-02-08T00:39:11.890
> 
> 标签：.net, windows, macos, development-environment

我目前正在开发一个需要 .NET 后端的项目。我在 Windows 上并使用 Visual Studio 2010。

我们使用 Subversion 进行源代码控制。

这就是问题所在。我是我所在机构中**唯一**使用 Windows 的人。其他人都在 Mac 上。

如果前端开发人员甚至无法在本地运行 Web 应用程序，我如何能够与他合作开展项目？

有没有办法在 Mac 上模拟 Visual Studio？

我是否只是让他构建所有的 HTML，然后我会将其剪切到视图/布局中？如果只有在 QA 期间才发现错误/调整，他将如何更改他的前端代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T00:41:35.347

Mac 用户将需要使用[MonoDevelop](http://monodevelop.com/)之类的东西，而不是 Visual Studio。

> MonoDevelop 是一个主要为 C# 和其他 .NET 语言设计的 IDE。MonoDevelop 使开发人员能够在 Linux、Windows 和 Mac OSX 上快速编写桌面和 ASP.NET Web 应用程序。MonoDevelop 使开发人员可以轻松地将使用 Visual Studio 创建的 .NET 应用程序移植到 Linux，并为所有平台维护单一代码库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T00:44:19.617

我有相反的情况——我们是一家微软商店，我使用的是 Mac。

我实际上得到了两者的最好的，因为我运行 Visual Studio（和 SQL Server 以及通过 Parallels for Mac 的 MS 堆栈的其余部分）。我真的很喜欢 Coherence 模式。它让我看起来像是直接在 OS X 桌面中运行 VS。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T00:48:58.040

> How am I able to collaborate on a project with the front end developer if he can't even run the web application locally?
> 
> Is there a way to emulate Visual Studio on a Mac?

Do the front end developers need to only run the web application locally to compile it? If it is former then they don't need to run Visual Studio.

In any case, one recommendation I have is to run a Windows VM on Mac.

# php - 可以对关联多维数组上的每个函数使用一些关于 jQuery 的建议

> ID：14763843
> 
> 赞同：0
> 
> 时间：2013-02-08T00:39:21.170
> 
> 标签：php, jquery, multidimensional-array, associative-array

我正在开发一个 jQuery `.get`，它将向服务器发送一个值以与一个数组进行比较，然后将其编码为 json 格式作为响应。下面是代码（jQuery 和 PHP zend）。我不确定我的问题是识别键和值还是语法。是否可以查看我的 php 控制器回显的原始 json 数据？

```
 $.get( 
    "/ed/macro",
       {value: singleValues},
         function(data) {
             $.each(data, function(key,value1){
         $.each(data.value1[0], function(key,value2){

           $('#stage').html("data");; 
       });
   });
    },"json");

   $select = $this->getDbTable()->select();
   $select->from('sub');
   $resultSet = $this->getDbTable()->fetchall($select);
   $data   = array();

   foreach ($resultSet as $row) {
        $entry = new Application_Model_Subdiscipline();
        $entry->setIdSub($row->idsubdiscipline)
              ->setSub($row->subdiscipline)
              ->setDescription($row->description);

        $data[] = $entry;
   }

   return $data;
}

public function macAction()
{
    $request = $this->getRequest()->getParam('value');

    // acti
    $sub = new Application_Model_Sub();
    $fetch = $sub->fetchAll($request);
    $jsonObject = Zend_Json::encode($fetch);
    echo $jsonObject;  
      // action body
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T00:43:45.953

`print_r`在 PHP 和`console.log`Javascript中查看对象。或者正如 Sam 所说，在 JS 调用它之后，在 Net 中查看发送的内容。

假设您在告诉您的服务器告诉浏览器它是 json 之后回显一个 json 字符串，`header("Content-type: application/json");`您的问题可能就在这里

```
$.each(data, function(key,value1){
     $.each(data.value1[0], function(key,value2){ 
```

`data.value1`不是你在那里处理的，它是`value1`. 我假设`value1` **IS 是**一个数组，并且您要选择其中的第一个元素`value1[0]`然后进行迭代？

```
$.each(data, function(key,value1){
     $.each(value1[0], function(key,value2){ 
```

或者，也许你在追求

```
$.each(data, function(key,value1){
     $.each(value1, function(key,value2){ 
```

请回显该对象并将其展示给我们。

# html - 动态但受限的元素宽度？

> ID：14763845
> 
> 赞同：2
> 
> 时间：2013-02-08T00:39:37.560
> 
> 标签：html, css

[http://jsbin.com/upohag/1/edit](http://jsbin.com/upohag/1/edit)

蓝色 div 应该占据绿色和紫色 div 之间的空间。我不知道绿色 div 的宽度，但随着它变大，蓝色的宽度应该变小。

编辑：我想在没有表格或 javascript 的情况下执行此操作。

在此处的示例中（带有表格，但只是为了说明我的意思）：[http://jsbin.com/upohag/2/edit](http://jsbin.com/upohag/2/edit)，蓝色矩形紧贴在其他两个之间。然而，一个问题是左边的矩形并没有占据它需要的所有空间。左边的矩形应该能够完全展开。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T01:06:59.547

您可以使用`display: table-cell`来获得正确的自动调整大小行为：

```
.left{
  display:table-cell;
} 
.center{
  display:table-cell;
}
.right{
  display:table-cell;
  width: 200px;
} 
```

演示：http: [//jsbin.com/upohag/12/edit](http://jsbin.com/upohag/12/edit)

# hash - 散列非约简分数

> ID：14763846
> 
> 赞同：0
> 
> 时间：2013-02-08T00:39:43.337
> 
> 标签：hash, fractions

如何编写一个适用于任意大小分数的哈希函数，并且对于以相同方式减少的不同分数是相等的？

*   我尝试将其转换为一个`double`，但减少到相同数字的两个分数可能会略微偏离，因此具有完全不同的哈希值。

*   GCD 将使散列函数的 O(1) 时间变得无用，并且使所有分数总是减少会显着减慢我的程序。

# watir - 无法调试在 watir-classic (3.4.0) 下运行的 Watir 脚本

> ID：14763847
> 
> 赞同：1
> 
> 时间：2013-02-08T00:39:53.370
> 
> 标签：watir, rubymine, ruby-debug

我正在 Watir 4.0.2 下开发 Ruby 脚本，以便我可以在 Watir-classic 下测试 Internet Explorer，在 Webdriver 下测试其他浏览器（例如 FireFox）。

如果我设置环境变量“WATIR_DRIVER=webdriver”，我可以使用 RubyMine 5.0 调试器（使用 ruby​​-debug-base19x、ruby-debug-ide）断点/调试我的代码（使用 IE 或 FireFox）。但是，当我设置“WATIR_DRIVER=classic”（使用 IE 进行测试）时，调试器进程会提前终止我的会话，并显示以下消息：

快速调试器（ruby-debug-ide 0.4.17.beta16，ruby-debug-base19x 0.11.30.pre11）侦听 127.0.0.1:51303 .... 进程以退出代码 -1073741819 结束

我正在使用当前 Ruby 环境的 Windows 7、IE 9 下运行：

*   红宝石 5.0 (RM-125.52)
*   红宝石 1.9.3p194 (2012-04-20) [i386-mingw32]
*   ***当地宝石***
*   调试器-ruby_core_source (1.1.7)
*   ruby-debug-base19x (0.11.30.pre11, 0.11.30.pre10)
*   ruby-debug-ide (0.4.17.beta16, 0.4.17.beta14)
*   硒客户端（1.2.18）
*   selenium-webdriver (2.29.0, 2.27.0)
*   瓦蒂尔（4.0.2 x86-mingw32）
*   水经典（3.4.0）
*   watir-webdriver (0.6.2, 0.6.1)

有谁知道这里可能发生什么？

问题可能出在 ruby​​-debug-* gems 上吗？

是否有其他选项可以在 watir-classic 下可靠地调试 Watir 脚本？

提前感谢您的任何见解或建议。

鲍勃·巴恩哈特，上汽

# asp.net-mvc-4 - Visual Studio MVC 4 Internet 模板和 OpenAuth 引发 JS 错误

> ID：14763849
> 
> 赞同：1
> 
> 时间：2013-02-08T00:40:06.467
> 
> 标签：asp.net-mvc-4, oauth-2.0

我正在尝试让标准的 Visual Studio 2012 MVC4 Internet 模板和 oAuth 工作，但它不会！

所以这里是重新创建的简单步骤。

1.  创建新的 MVC4 Inernet 应用程序
2.  在包管理器控制台中执行：update-package
3.  在文件 AuthConfig.cs 中取消注释 OAuthWebSecurity.RegisterGoogleClient() （我的印象是 Google oAuth 不需要密钥，因此在 AuthConfig.cs 文件中取消注释这一行将启用它。）
4.  F5 运行应用

此时我看到以下错误：

```
Error when entering login page:

Unhandled exception at line 115, column 5 in http://localhost:63180/Scripts/jquery.unobtrusive-ajax.js

0x800a01b6 - Microsoft JScript runtime error: Object doesn't support property or method 'live' 
```

1.  点击主页上的登录链接
2.  点击谷歌按钮

此时我收到此错误：

```
ProtocolException was unhandled by user code
No OpenID endpoint found 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T00:53:59.033

错误原因及解决方法

原因是 jquery-unobtrusive-ajax.js 负责使用 jQuery live 方法在 ASP.NET MVC 中支持不显眼的 ajax。但是这个方法在 jQuery 1.7 中被弃用并且在 1.9 中被移除了。

此方法允许与当前或未来的任何 DOM 元素关联的事件。当前要使用`live`的方法是 method `on`。

但是语法有点不同，因为该方法在 jQuery 上有更多用途。

```
$ ("form [data-ajax = true].") live ("submit", function (e) { ... } 
```

使用对 的调用修改对`live`的调用`on`。

`on`就像我们碰巧活了3 个参数一样：`on`事件（比如 live，将“提交”） 一个选择器（元素“children”）是基于选择器的，它必须始终存在 处理函数（比如 live）。

在这种情况下，我们的行看起来像：

```
$ ("body"). on ("submit", "form [data-ajax = true]", function (e) { ... } 
```

我将选择器移至第二个参数，`on`并为您制作了一个基本的选择器“body”（不是最优化的，但我确信始终存在）。

这个想法是最后一个函数与`form [data-ajax = true]`选择器基（主体）内的所有当前和未来类型的元素相关联。

对于所有其他的 live 调用（还有 3 个）进行相同的替换，如下所示：

```
$ ("body"). on ("click", "form [data-ajax = true]: submit", function (e) { ... }
$ ("body"). on ("click", "a [data-ajax = true]", function (e) { ... }
$ ("body"). on ("click", "form [data-ajax = true] input [type = image]", function (e) { ... } 
```

准备好了！有了这个，我们恢复了 ajax 功能，MVC 不显眼，您的应用程序应该再次正常工作！

翻译自： http: [//geeks.ms/blogs/etomas/archive/2013/01/18/jquery-1-9-y-el-unobtrusive-ajax-de-asp-net-mvc.aspx](http://geeks.ms/blogs/etomas/archive/2013/01/18/jquery-1-9-y-el-unobtrusive-ajax-de-asp-net-mvc.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T01:00:24.823

NuGet 中不显眼的库尚未更新，并且不适用于 jQuery 1.9。

请参阅[将 jQuery 更新到 1.9.0 后 Unobtrusive Ajax 停止工作](https://stackoverflow.com/questions/14391867/unobtrusive-ajax-stopped-working-after-update-jquery-to-1-9-0#14391905)

# c# - Lotus Notes 复制文档 - 保留文件夹和未读

> ID：14763850
> 
> 赞同：1
> 
> 时间：2013-02-08T00:40:10.183
> 
> 标签：c#, com, lotus-notes, lotus-domino, lotus

我用 C# 构建了一个应用程序，它将文档从源 NSF 复制到目标 NSF。目标 NSF 是一个空壳，保留了基于源 NSF 的所有设计元素。我使用的是 Lotus Notes 8.5.3，但没有连接到 Domino 服务器。

我使用此应用程序将源 NSF 拆分为更小的块。目标是创建可以由我们的自动化（电子发现）系统有效处理的目标 NSF。我需要确保保留尽可能多的元数据。

我现有的代码满足了这些目标，除了 (1) 我丢失了文件夹信息。复制文档后，所有文件夹都是空的。(2) 所有文档都标记为已读，即使它们在源中未读。

代码 C#

```
//Establish session
NotesSession ns = new Domino.NotesSessionClass();
ns.Initialize("");

//Open source NSF
NotesDatabase nd = ns.GetDatabase("", "test.nsf", false);
//Open destination NSF.
//Assume that all design elements of nd2 are identical to those of nd
NotesDatabase nd2 = ns.GetDatabase("", "test2.nsf", false);

//Create view that returns all documents.
NotesView nView2 = nd.GetView("$All");
nd.CreateView("All-DR", "SELECT @ALL", nView2, false);
NotesView nView = NotesConnectionDatabase.GetView("All-DR");

//Loop through entries in the new view
NotesViewEntry nvec = nView.AllEntries;
nve = nvec.GetFirstEntry();

for (int j = 1; j <= intEntryCount; j++)
{
     if (j == 1)
     {
          nve = nvec.GetFirstEntry();
     }
     else
     {
          nve = nvec.GetNextEntry(nve);
     }

     //Copy document to second database.
     NotesDocument ndoc = nd.GetDocumentByUNID(nve.UniversalID);         
     ndoc.CopyToDatabase(nd2);
 }
 //End loop.
 //All documents are copied. 
```

结果是我最终得到了一个目标 NSF，它复制了所有文档。假设所有文件夹也都在那里。但是，文件夹中没有任何文档。每个文档都标记为已读。

如何解决文件夹和未读问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T01:22:01.053

`FolderReferences`后端类中的 NotesDocument 类中有一个属性。我不能 100% 确定该属性是否在 COM 类和 C# 互操作中公开，但如果是，您可以将其与`PutInFolder()`方法一起使用来解决部分问题。

就已读/未读标记而言，关键问题是您是否只关心自己的已读/未读状态，或者您是否试图为数据库的所有用户保留它。如果您只关心自己的未读标记，那么您也许可以使用该类的`getAllUnreadDocuments()`方法`NotesDatabase`——但这需要 Notes/Domino 8 或更高版本（在您的代码运行的机器上），而且我不是确定此方法（或其`NotesNoteCollection`返回的类）是否通过 C# 的 COM/互操作接口公开。如果它可用，那么您可以遍历集合并使用该`MarkUnread()`方法。如果您关心所有用户的未读标记，那么我不确定是否有办法做到这一点——但如果有，则需要使用来自 Notes C API 的调用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T01:55:03.430

关于移动到文件夹的另一个想法，特别是如果数据库没有设置为[FolderReferences](http://publib.boulder.ibm.com/infocenter/domhelp/v8r0/topic/com.ibm.designer.domino.main.doc/H_FOLDERREFERENCES_PROPERTY_1349_ABOUT.html)工作：

您可以遍历从 NotesDatabase 对象的 Views 属性获得的 NotesView 对象数组。每个 NotesView 都有一个属性，告诉您它是否是一个文件夹。

了解所有文件夹后，您可以在每个文件夹中进行迭代并收集其中包含的 NotesDocument 列表。然后通过将这些信息存储在字典中，您可以在处理每个文档时将其用作查找以确定需要将其放置在哪个文件夹中。

像这样的东西（未经测试）：

```
object oViews = nd.Views;
object[] oarrViews = (object[])oViews;
Dictionary<string, List<string>> folderDict = new Dictionary<string, List<string>>();
for (int x=0; x < oarrViews.Length - 1; x++)
{
    NotesView view = viewArray[x];
    if (view.IsFolder) 
    {
        NotesDocument doc = view.GetFirstDocument();
        while (doc != null)
        {
            // Populate folderDict Dictionary by setting
            // document's UNID as Key, and adding folder name to List
        }
    }
} 
```

然后在你的循环中：

```
//Copy document to second database.
NotesDocument ndoc = nd.GetDocumentByUNID(nve.UniversalID);  
NotesDocument newDoc = ndoc.CopyToDatabase(nd2);

if (folderDict.ContainsKey(nve.UniversalID)) {
    foreach (var folderName in folderDict[nve.UniversalID]) {
        newDoc.PutInFolder(folderName, true);
    }
} 
```

# javascript - 如何从两个可用的 jQuery 中获得二等

> ID：14763854
> 
> 赞同：1
> 
> 时间：2013-02-08T00:41:05.863
> 
> 标签：javascript, jquery, class, attr

我需要从一个有两个不同类的元素中获取第二个类，所以我尝试了这个`split`方法，但是出了点问题，你能帮我吗？

```
js_kp_main_list.find('li#kp_r_04').addClass('class_01 class_02');
setTimeout(function(){
    var class_two = js_kp_main_list.attr("class").split(' ')[2];
    console.log(class_two);
},20); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T00:44:47.537

您可以使用 className 本机 JS：

```
js_kp_main_list[0].className.split(' ')[1]; // holds second class 
```

* * *

编辑：另一个人为的例子 [http://jsfiddle.net/KqXmN/](http://jsfiddle.net/KqXmN/)

HTML

```
<div id="mydiv" class="class1 class2"></div> 
```

JS

```
var $mydiv = $('#mydiv');

//logs "class2"
console.log($mydiv[0].className.split(' ')[1]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T00:44:06.443

索引从`0`JavaScript 开始，您需要使用`className`属性：

## HTML

```
<div id="test" class="foo bar"></div> 
```

## JavaScript

```
var elem = document.getElementById('test');

var classes = elem.className.split(' ');
console.log(classes);

var firstClass = classes[0];
var secondClass = classes[1];
// ... 
```

## JSFiddle

[http://jsfiddle.net/9Nu9G/](http://jsfiddle.net/9Nu9G/)

# javascript - Highcharts 动态且单独地更改标记

> ID：14763858
> 
> 赞同：0
> 
> 时间：2013-02-08T00:41:23.693
> 
> 标签：javascript, dynamic, colors, highcharts, marker

我正在使用 Highcharts，我想知道如何根据它们是否更大（或不是）阈值来更改一定数量值的一些标记设置（如`symbol`、`lineWidth`和）。`lineColor``fillColor`

例如：http: [//jsfiddle.net/danielmorim/sxgL6/19/](http://jsfiddle.net/danielmorim/sxgL6/19/)

我想更改所有温度数据的所有此标记设置大于 20°C 且小于 10°C。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T13:58:47.747

您可以通过访问图形对象来修改 lineCOlor / lineWidth 并通过 attr() 函数对其进行修改。

```
chart.series[0].graph.attr('stroke', 'red');
chart.series[0].graph.attr('stroke-width', 10); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-23T15:43:57.070

遵循文档。你可以有你的系列： `serie = [1, 2, 4, 5, 6, 7, 8];`

此外，您可以使用对象而不是数字。此对象可以具有多个属性，例如：`fillColor`, `radius`, `symbol`.

因此，您可以通过以下方式修改 serie 中的特定元素：

```
serie[i] =  {
  y: serie1[i],         // This is the number 
  marker: {
    fillColor: 'red',
    radius: 5,
    symbol: 'url(https://www.highcharts.com/samples/graphics/snow.png)'
  }
} 
```

您可以在此处找到文档： [https ://api.highcharts.com/highcharts/plotOptions.series.marker](https://api.highcharts.com/highcharts/plotOptions.series.marker) [https://www.highcharts.com/demo/spline-symbols](https://www.highcharts.com/demo/spline-symbols)

# c# - OnRowDatabound 方法不执行

> ID：14763863
> 
> 赞同：2
> 
> 时间：2013-02-08T00:41:36.463
> 
> 标签：c#, .net

我有一个在特定条件下修改 CSS 的 GridView。在开发中工作正常，但似乎无法在服务器上执行。

.net 4.0

想法？

网格视图：

```
GridView ID="gridViewCalendar" runat="server" 
AutoGenerateColumns="False" 
CssClass="calendarGrid" 
OnRowDataBound="GridViewCalendar_RowDataBound"> 
```

代码背后

```
public partial class _Default : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    if (!IsPostBack)
        {
            gridViewCalendar.DataBind();
        }
}

protected void GridViewCalendar_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.DataRow)
    {
        string b0field = e.Row.Cells[0].Text;
        string b1field = e.Row.Cells[1].Text;

        if (b0field == "&nbsp;")
        {
            e.Row.Cells[0].BackColor = Color.FromName("#C0C0C0");
            e.Row.Cells[1].BackColor = Color.FromName("#C0C0C0");
        }

        else if (b1field != "&nbsp;")
        {
            e.Row.CssClass = "calendarNormal";
        }

        else
        {
            e.Row.CssClass = "calendarBold";
        }
    } 
} 
```

谢谢

# vb.net - 读取资源中文件的扩展名

> ID：14763867
> 
> 赞同：2
> 
> 时间：2013-02-08T00:42:03.630
> 
> 标签：vb.net, resources, embedded-resource, .net-assembly

如何编写代码来读取文件的**扩展**名`My.Resources`？

**例子：**

`IMG.JPEG`如果我的资源中有一个名为的文件

如何让 msgbox 显示扩展名`.JPEG`？

我可以显示文件名但没有扩展名

```
For Each Fe In My.Resources.ResourceManager.GetResourceSet _
(System.Globalization.CultureInfo.CurrentCulture, False, True)
        MsgBox(Fe.Key)
Next 
```

任何帮助将不胜感激

**编辑：**

我可以获得文件的扩展名，但与此代码一样`.BYTE[]`和图片一样`.Bitmap`

```
GT = Path.GetExtension(My.Resources.ResourceManager.GetObject(Fe.Key).ToString)
MsgBox(GT) 
```

我怎样才能获得原始扩展名？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T08:02:21.270

如果你有你只需要的文件名：

```
sExt = System.IO.Path.GetExtension(sFileName) 
```

或者：

```
sExt = sFileName.SubString(sFileName.LastIndexOf("."c)) 
```

# nginx - 如何增加nginx请求超时？

> ID：14763871
> 
> 赞同：14
> 
> 时间：2013-02-08T00:42:22.097
> 
> 标签：nginx

我的网络服务器正在处理一个巨大的文件，然后发送响应。我已经尝试了各种 nginx 超时参数，但没有运气。我已经尝试了[这个问题](https://stackoverflow.com/questions/561946/how-do-i-prevent-a-gateway-timeout-with-nginx)中推荐的参数，但是，我仍然在 nginx 错误日志中看到带有错误的超时页面。

```
1 upstream prematurely closed connection while reading response header from upstream,client: 10.0.42.97, server: 
```

这是我的 nginx.conf

```
http {
     include       /etc/nginx/mime.types;
     default_type  application/octet-stream;

     access_log    /var/log/nginx/access.log;

     sendfile on;
     tcp_nopush on;
     tcp_nodelay on;

     keepalive_timeout  65;

     client_header_timeout 600;
     client_body_timeout 600;
     send_timeout 600;
     proxy_read_timeout 600;

     fastcgi_buffers 8 16k;
     fastcgi_buffer_size 32k;
     fastcgi_read_timeout 600;

     gzip  on;
     gzip_http_version 1.0;
     gzip_comp_level 2;
     gzip_proxied any;
     gzip_types text/plain text/html text/css application/x-javascript text/xml application/xml application/xml+rss text/javascript application/javascript application/json;

     server_names_hash_bucket_size 64;

     include /etc/nginx/conf.d/*.conf;
     include /etc/nginx/sites-enabled/*;
     } 
```

我仍然不时看到 502 Bad gateway，出现上述错误。关于什么可能是错误的任何指示？我的输入文件是一个 csv 文件，如果有帮助的话。有什么指示或建议吗？

我怎样才能解决这个问题？如何增加超时时间？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-02-26T22:56:56.817

Nginx 不是这里的问题，它是处理您上传的文件的脚本。如果您使用 PHP，则必须更改 php.ini 中的设置以允许更长的超时和更大的上传。可能增加的设置可能是：

```
max_execution_time
max_input_time
memory_limit
post_max_size
upload_max_filesize 
```

如果您使用不同的脚本语言，您应该寻找控制最大上传大小、最大脚本执行时间和内存限制的设置。只要 Nginx 返回错误的网关错误，通常您的处理后端就有问题。

# php - 从子ajax调用父窗口中的javascript函数

> ID：14763872
> 
> 赞同：0
> 
> 时间：2013-02-08T00:42:22.670
> 
> 标签：php, ajax, function, parent-child

一直在新网站上工作，遇到了问题。

我的主页上有一个 ajax 加载器，它每秒加载一个脚本来检查后台进程是否完成（通常是 20 秒左右）

但是，一旦 ajax 脚本执行（20 秒后），它仍然会每秒刷新一次。

一旦 ajax 脚本完成其工作，我需要将父页面重定向到新的 url。

我的ajax代码：

```
<script type="text/javascript">
function myFunction()
{
var ajaxRequest;  // The variable that makes Ajax possible!

try{
    // Opera 8.0+, Firefox, Safari
    ajaxRequest = new XMLHttpRequest();
} catch (e){
    // Internet Explorer Browsers
    try{
        ajaxRequest = new ActiveXObject("Msxml2.XMLHTTP");
    } catch (e) {
        try{
            ajaxRequest = new ActiveXObject("Microsoft.XMLHTTP");
        } catch (e){
            // Something went wrong
            alert("Your browser broke!");
            return false;
        }
    }
}
// Create a function that will receive data sent from the server
ajaxRequest.onreadystatechange = function(){
    if(ajaxRequest.readyState == 4){

document.getElementById("txtHint").innerHTML=ajaxRequest.responseText;
    }
}
ajaxRequest.open("GET", "code/timer.php?file='.$file.'", true);
ajaxRequest.send(null); 
}
</script>

<script type="text/javascript">
function forward(){

location.href=\'http://domain/newpage.html\';

}

function setTimer(){

set = setInterval( "myFunction()", 1000 );

}
</script> 
```

forward() 中的反斜杠；是因为我的代码是从 php 中回显的。

我尝试了一些代码，但应该工作的主要代码（在子 ajax 元素中）是：

```
window.opener.forward(); 
```

将非常感谢你们可以提供的任何帮助...谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T00:55:34.303

opener 仅在使用 javascript 打开的窗口中可用，只需调用

```
forward(); 
```

但是你应该为函数使用另一个名字，有一个预定义的方法[`window.forward()`](https://developer.mozilla.org/en-US/docs/DOM/window.forward)

# compact-framework - 为什么 Zebra QL 220 打印机在我与它通话时会关闭？

> ID：14763873
> 
> 赞同：1
> 
> 时间：2013-02-08T00:42:27.827
> 
> 标签：compact-framework, windows-ce, zebra-printers

我有在手持设备（摩托罗拉 MC3100）上运行的 C# CE CF 代码，这应该会导致它所连接的 Zebra QL220 带式打印机打印一些东西（代码附加到这篇文章）。

当我启动我的应用程序时，我打开了 QL 220（通过其底部或顶部的绿色大按钮，取决于您的视角），但打印机在我的代码执行过程中自行关闭，因此没有打印任何内容（我'我假设这就是没有打印任何内容的原因）。

如果我对打印机静音的原因是正确的，我必须怎么做才能使其“打开”按钮“粘滞”？

我也尝试捣碎 QL 220 上的蓝色按钮（滚轮图标和从中弹出的纸张），但所做的只是“实时”吐出一些胶带/打印纸。

```
. . .
using (SerialPort serialPort = new SerialPort())
            {
                serialPort.BaudRate = 19200;
                serialPort.Handshake = Handshake.XOnXOff; // Handshake AKA Flowcontrol?
                serialPort.DataBits = 8;
                serialPort.Parity = Parity.None;
                serialPort.StopBits = StopBits.One;
                serialPort.PortName = "COM1:";
                serialPort.ReadTimeout = 500;
                serialPort.WriteTimeout = 500;
                serialPort.StopBits = StopBits.One;

                serialPort.Open(); 

                Thread.Sleep(2500); // I don't know why this is needed, or if it really is...

                // Try this first:
                serialPort.WriteLine("! 0 200 200 210 1");
                serialPort.WriteLine("TEXT 4 0 30 40 Bonjour la Monde"); //Hola el Mundo --- Hallo die Welt
                serialPort.WriteLine("FORM");
                serialPort.WriteLine("PRINT");
                // or (if WriteLine does not include a carriage return and line feed):
                //              serialPort.Write("! 0 200 200 210 1\r\n");
                //              serialPort.Write("TEXT 4 0 30 40 Bonjour la Monde\r\n"); //Hola el Mundo --- Hallo die Welt
                //              serialPort.Write("FORM\r\n");
                //              serialPort.Write("PRINT\r\n");

                serialPort.Close();
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T16:28:46.927

除了将冒号附加到“COM1”之外，因为 ctacke 在另一个 SO 帖子上显示是必需的，我还需要将 WriteLine 行交换为 Write 行，并在每行附加“\r\n”，这样它们现在是：

```
serialPort.Write("! 0 200 200 210 1\r\n");
serialPort.Write("TEXT 4 0 30 40 Bonjour la Monde\r\n"); //Hola el Mundo --- Hallo die Welt
serialPort.Write("FORM\r\n");
serialPort.Write("PRINT\r\n"); 
```

成功打印出“Bonjour la Monde”，尽管浪费了太多纸张（打印线上下约一英里）。

# c++ - aam-opencv 编译失败，OpenCVConfig.cmake

> ID：14763874
> 
> 赞同：2
> 
> 时间：2013-02-08T00:42:34.300
> 
> 标签：c++, ubuntu, opencv, makefile, cmake

以下是项目的链接[http://code.google.com/p/aam-opencv/](http://code.google.com/p/aam-opencv/)

我正在尝试使用 OpenCV 2.4.9 在 Ubuntu 12.04 上编译这个项目。我已经成功生成了 CMake 文件，但是当我开始使用 make 编译它时，我得到了编译错误。我正在使用从 /usr/local/share/OpenCV 文件夹中复制的新 OpenCVConfig.cmake 进行编译。我也在 CMakeLists.txt 中进行了必要的更改。任何帮助将不胜感激。我在编译时得到以下转储。

```
[  5%] Building CXX object CMakeFiles/qt-aamtrainer.dir/src/main.cpp.o
In file included from /home/aam-opencv-read-only/include/lkFitting.h:22:0,
                 from /home/aam-opencv-read-only/src/main.cpp:34:
/home/aam-opencv-read-only/include/delaunay.h:130:44: error: ‘CvSubdiv2DEdge’ has not been declared<br>
/home/aam-opencv-read-only/include/delaunay.h:135:5: error: ‘CvSubdiv2D’ does not name a type<br>
/home/aam-opencv-read-only/include/delaunay.h:137:5: error: ‘CvSubdiv2D’ does not name a type<br> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T01:28:51.760

OpenCV 2.4.3 是当前的官方稳定版本，而不是 2.4.9。

要解决该编译错误，只需编辑`delaunay.h`并添加：

```
#include "opencv2/legacy/legacy.hpp" 
```

# php - Phil Sturgeon 的主题模板库

> ID：14763877
> 
> 赞同：5
> 
> 时间：2013-02-08T00:42:51.757
> 
> 标签：php, codeigniter

尽管 PyroCMS 是一个优秀的 CMS 使用，我强烈推荐任何人和每个人在情况允许时使用它。

然而，我的情况需要一个定制的 CMS，它只是有相当多的差异，我正在使用我看到的一些免费使用的库来开发我的 CMS。我目前主要使用的是 Phil Sturgeon 的模板库。

现在，由于显然他将它用于 PyroCMS，我正试图匹配尽可能接近文件结构的文件结构，以便模板系统能够顺利运行而不会出现任何问题。

我现在很困惑，因为我的登录表单没有找到部分，我不太清楚为什么。当我的仪表板调用元数据部分时，它会很好地加载它，但是当我在登录表单中调用它时，有些东西在其中并且没有加载它。

这是我当前的登录控制器、登录表单视图以及确保正确设置的文件结构。

```
if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class Login extends Backend_Controller 
{
    public function __construct()
    {
        parent::__construct(); 
    }

public function index()
{ 
    $this->template
           ->set_layout(FALSE)
           ->build('login');
    }
}

<head>

    <!-- metadata needs to load before some stuff -->
    <?php file_partial('metadata'); ?>

</head> 

applications/
    themes/
        supr(my custom theme from template)/
            views/
                login.php
                partials/
                    metadata.php 
```

任何人的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T16:35:20.577

在您的控制器中：

```
$this->template
    ->set_layout(FALSE)
    ->set_partial('metadata', 'partials/metadata.php')
    ->build('login');
} 
```

请注意添加的对 set_partial 的调用。

在您看来：

```
<?php echo $template['partials']['metadata']; ?> 
```

# sharepoint - 如何添加与 MSLB 字段相关的输入数量字段？

> ID：14763878
> 
> 赞同：0
> 
> 时间：2013-02-08T00:43:01.990
> 
> 标签：sharepoint, infopath

我在 SP Server 2010/InfoPath 2010 上。我在一个表单中有一个 MSLB 字段，该字段从一个简单的 SP 列表中提取，以便用户可以选择多个项目，这就完成了。但是如何为每件商品的数量添加一个相应的字段？

例如，该列表包含：

项目 A 项目 B 项目 C 项目 D 项目 E

用户选择项目 A 和 D，但希望项目 A 的数量为 5，项目 D 的数量为 3。这可能吗？我应该使用不同的功能吗？

谢谢你，乔尼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T07:50:06.370

听起来你应该拥有一个重复表而不是 MSLB，它具有：

*   列出列表中所有项目的下拉列表
*   数量字段

这样，用户可以为他们想要选择的每个项目添加一行，最后输入数量。

# python - SWIG：没有定义类型映射

> ID：14763882
> 
> 赞同：5
> 
> 时间：2013-02-08T00:43:22.017
> 
> 标签：python, numpy, swig

我有一个 c++ 类，我正在尝试使用 SWIG 为 Python 包装。我在尝试包装将数组作为输入的函数之一时遇到了麻烦。

这是头文件，

```
class dyndiff_data_t
    {
    private:    

        double H[3];
        double GAMMA;
        double k;
        double P;
    public:
        dyndiff_data_t(double H_[3],
                        const double GAMMA_,
                        const double k_,
                        const double P_);

        void test();
    }; 
```

这是 swig 接口文件，

```
%module twowave
%{
  #define SWIG_FILE_WITH_INIT
  #include <twowave.h>
%}

%include "numpy.i"
%init %{
import_array();
%}

%apply (double IN_ARRAY1[3]) {(double H_[3])};

%include <twowave.h> 
```

问题是对于数组输入，SWIG 抱怨没有类型映射。我不明白为什么。numpy.i 文件取自[此处](https://raw.github.com/numpy/numpy/master/doc/swig/numpy.i)，我使用的类型图[在此处进行了描述](http://docs.scipy.org/doc/numpy-dev/reference/swig.interface-file.html)

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T10:22:53.877

问题是 numpy.i 中的类型映射定义了两个参数类型映射，并且您试图将其应用于单个参数。如果您的函数中有参数 int len1 和 double* vec1，这将起作用：

```
%apply (int DIM1, double* IN_ARRAY1) {(int len, double* H_)} 
```

无需编写自己的类型图，只需使用[carrays.i 即可](http://www.swig.org/Doc2.0/SWIGDocumentation.html#Library_carrays)。

如果你要编写一个类型映射，例如将一个双精度元组作为输入，它看起来像：

```
%typemap(in) double TUPLE[ANY]
{
   ...
} 
```

在这种情况下，您将以您期望的方式将其应用于您的功能。

```
%apply double TUPLE[3] {double H_[3]} 
```

尝试找出为什么不能使用类型映射时，一个很好的起点是使用该`-tmsearch`选项运行 SWIG。它会告诉您在尝试匹配您的函数参数时它在寻找什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-02-21T13:19:28.840

这对我有用：

为了

```
void get_position(double outarray[3]) 
```

采用

```
%apply (double ARGOUT_ARRAY1[ANY]) {(double outarray[3])}; 
```

（注意 [ANY] 和 [3]）

导致

```
a.get_position()
Out[2]: array([0., 0., 0.]) 
```

# actionscript-3 - 在 Actionscript 3 中使用数组运算符访问类

> ID：14763883
> 
> 赞同：0
> 
> 时间：2013-02-08T00:43:22.587
> 
> 标签：actionscript-3, flash, actionscript

我的库中有一堆用于 MovieClips 的类，例如

```
ship_3000aa
ship_3000ab
ship_3001aa 
```

等等。

我需要像这样访问它们：

```
var image_key:String = "3000aa";
var ship:MovieClip = new _root["ship_"+image_key](); 
```

所有这些都发生在一个类中，并且所有的 MovieClip 都被导出到第 2 帧，这是发生这种情况的类被实例化的地方。

*root 是基础根。没有找到没有“”的“root”*。_root 上的属性为空。_stage 上也不存在该属性。

是否有正确的方法来使用类中的数组访问运算符来实例化库 MovieClip 类？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T00:51:55.353

Either you can instantiate an object by keeping the classes in an Array:

```
var classArray:Array = [ship_3000aa, ship_3000ab, ship_3001aa];
var ship:MovieClip = new classArray[2](); 
```

or instantiate an object by the class name by using `flash.utils.getDefinitionByName` (probably more useful in your case):

```
var imageKey:String = "3000aa";
var ShipClass:Class = getDefinitionByName("ship_" + imageKey) as Class;
var ship:MovieClip = new ShipClass(); 
```

# jquery - 大规模 MVC Web 应用程序 - 使用 Knockout 和 Razor

> ID：14763889
> 
> 赞同：3
> 
> 时间：2013-02-08T00:44:11.570
> 
> 标签：jquery, asp.net-mvc, architecture, knockout.js, knockout-mapping-plugin

我正在开发一个大型 Web 应用程序，并且在使用淘汰赛和 MVC 正确构建它时遇到问题。

我目前有一个基本视图模型，我将它传递到我的所有视图中，其中包含有关当前登录用户的基本数据

```
//Example Code
public class BaseViewModel {
    public String FullName;
    public String Email;

    //A bunch of other similar values
} 
```

然后，我拥有特定于站点上每个页面（即配置文件）的视图模型，它们继承了 BaseViewModel 类

```
//profile.cshtml
public class UserProfileViewModel : BaseViewModel {
    public String Address;
    public String PhoneNumber;

    //Other similar values
}

//entity.cshtml
public class UserEntityViewModel : BaseViewModel {
    public String EntityValue;
    public Int32 EntityNumber;

    //Other similar values
} 
```

我已经使用 knockout observables 在 javascript 中重新定义了我的整个数据模型，这样我就可以创建我在 MVC 模型中拥有的任何类型的对象。然后，我在 javascript 中定义了几个与我的 MVC 视图模型基本相同的视图模型，以允许加载、创建、编辑、删除功能。

例如，我发现这在我想从个人资料页面创建新实体的情况下非常有用。我可以创建视图模型的一个新实例并将其绑定到一个新的 jquery 对话框，当单击确定按钮时，我可以在我的淘汰视图模型中调用一个将保存或创建实体的事件。

当我想将数据加载到特定页面（即，我想使用我的淘汰数据模型填充配置文件页面）时，这种架构效果并不好。我遇到了需要确定我所在的页面并将特定视图模型绑定到该页面的问题。我真的不认为下面的代码很优雅。

```
$(function() {
    if ($('.tweak-list').length) {
        var id = $('.tweak-list').attr('data-songid');
        var vm = new my.tweaksviewmodel({ songid: id });
        ko.applyBindings(vm);
    }
}); 
```

有人对我应该如何构建它有任何建议吗？我认为最好在 javascript 中创建一个 BaseViewModel 并使用敲除映射插件[http://knockoutjs.com/documentation/plugins-mapping.html](http://knockoutjs.com/documentation/plugins-mapping.html)来自动创建我的各种数据模型。也就是说，它并没有真正解决确定模型从哪个页面绑定的问题，以便它可以加载适当的数据。

**编辑 1**

这种架构也有一个限制，我不能利用模式弹出窗口来添加数据，因为我需要将视图模型重新绑定到每个模式。

有人有想法么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T03:31:22.787

我建议按照以下方式构建它：

为每个页面创建具有特定 KnockOut ViewModel 的不同 JavaScript 模块：

```
var app = app || {};
app.pages = app.pages || {};

app.pages.userProfile = (function () {

    function UserProfileViewModel() {
        //view model specific code
    };

    function init() {
        ko.applyBindings(new UserProfileViewModel());
    };

    return {
        init: init
    };
}()); 
```

指定应该在剃刀视图中使用哪个 JS 模块：

```
@model dynamic

@{
    ViewBag.CurrentPageJsHandler = "app.pages.userProfile";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<p>Page specific content</p> 
```

将页面特定模块初始化代码添加到布局文件：

```
<html>
<body>   
    <div id="content">
        @RenderBody()
    </div>      
    @if (@ViewBag.CurrentPageJsHandler != null)
    {
        <script>
            $(function() {
                app.currentPage = @ViewBag.CurrentPageJsHandler;
                app.currentPage.init();
            });
        </script>
    }    
</body>
</html> 
```

这样您就可以将所有与页面相关的代码封装在不同的模块中。由于每个 JS 模块都有唯一的名称，您可以将它们绑定在一起并包含在布局中。

# asp.net - 如何正确增加 aspnet 中的特定变量？

> ID：14763890
> 
> 赞同：0
> 
> 时间：2013-02-08T00:44:12.467
> 
> 标签：asp.net, vb.net, visual-studio-2010

我试图在 ASPnet 中增加这个特定元素。用户在下拉框中选择一个特定的项目，它会随着用户的选择而增加数量。

```
If DropDownList1.SelectedIndex = 1 Then
        DropDownList1.SelectedIndex = 0
        intDonutqty += 1
        txtDonut.Text = intDonutqty

    End If 
```

其他一切工作正常，但由于某种原因，它只是保持在 1 而不增加。

谢谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T00:53:37.787

页面中的变量是`Page`类实例的局部变量，实例只用于处理一个请求。当您进行回发并且下一个请求来自该页面时，将创建 Page 类的一个新实例，因此您将获得一个从零开始的全新变量。

要在请求之间保留值，您必须将其存储在会话变量、ViewState、cookie 或表单中的隐藏字段中。

# c++ - C ++ 11中的空格不仅仅是预处理令牌分离？

> ID：14763892
> 
> 赞同：3
> 
> 时间：2013-02-08T00:44:17.513
> 
> 标签：c++, c++11

在 C++11 2.5 预处理标记 [lex.pptoken] 中：

> 如第 16 条所述，在翻译阶段 4 的某些情况下，空白（或不存在）不仅仅是预处理令牌分离。

这是指什么情况？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-08T01:56:59.490

在第 4 阶段，有几次空白很重要：

*   每个预处理指令都以`#`“源文件中的第一个字符......或者包含至少一个换行符的空格”开头。每个预处理指令都以换行符结尾。

*   在类似函数的宏定义中，开始参数列表的左括号必须紧跟在命名宏的标识符之后。它们之间不能有空格。

    例如，该指令`#define F()`定义了一个扩展为空的类似函数的宏，而该指令`#define F ()`定义了一个扩展为`()`.

*   `#`当在宏替换期间对运算符进行评估时，在字符串化期间会考虑空格。要字符串化的标记之间的空格序列在生成的字符串文字中折叠为单个空格。

    例如，字符序列`f(x)`被字符串化为`"f(x)"`，但字符序列`f ( x )`被字符串化为`"f ( x )"`，即使宏替换后两者在语义上没有区别。

请注意，在第 2 阶段消除了转义的换行符，并且在第 3 阶段将每个注释替换为单个空格字符。这两者都发生在第 4 阶段之前，因此在第 4 阶段期间，转义的换行符不算作新的-line 和注释与空格字符无法区分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T00:56:26.733

[第 16 条](http://www.unl.csi.cuny.edu/faqs/g++-faq/wp/sep96/cpp.html#cpp)规定：

> *除了在预处理期间的某些情况下，所有空格都是等效的（例如，请参见cpp.stringize*中的 # 字符串文字创建运算符 ）。

您可以在此处阅读有关[# 运算符 [ccp.stringize] 的信息](http://www.unl.csi.cuny.edu/faqs/g++-faq/wp/sep96/cpp.html#cpp.stringize)。以下是相关信息：

> 如果在替换列表中，一个参数前面紧跟一个 `#`预处理标记，则两者都被一个字符串文字预处理标记替换，该预处理标记包含对应参数的预处理标记序列的拼写。参数的预处理标记之间每次出现的空白都会成为字符串文字中的单个空格字符。删除第一个预处理标记之前和包含参数的最后一个预处理标记之后的空白。否则，参数中每个预处理标记的原始拼写将保留在字符串文字中，但生成字符串文字和字符文字的拼写的特殊处理除外：`\`在字符文字或字符串文字（包括定界字符）的每个字符`"`之前插入字符。如果导致的替换不是有效的字符串文字，则行为未定义。和运算符的评估顺序未指定。`\``"``#``##`

# ruby-on-rails - 在辅助方法中返回数组

> ID：14763895
> 
> 赞同：0
> 
> 时间：2013-02-08T00:44:41.810
> 
> 标签：ruby-on-rails, arrays, helpermethods

为什么我不能在辅助方法中返回数组？

```
def childrenOf(a)
    @children = Post.find_by_parent_id(a.id)        
    return @children 
end 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T00:47:38.887

你可以。

改为使用`find_all_by_parent_id`。

而且你不需要第二行。

以下就足够了。

```
def childrenOf(a)
  @children  = Post.find_all_by_parent_id(a.id)        
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T04:17:43.937

在 Rails 3 中，而不是使用`find_all_by`use `where`：

```
def childrenOf(a)
  @children  = Post.where(:parent_id => a.id)        
end 
```

# cocoa - characterAtIndex 转换为 NSString

> ID：14763896
> 
> 赞同：0
> 
> 时间：2013-02-08T00:44:42.287
> 
> 标签：cocoa, nsstring

我在`Incompatible integer to pointer conversion sending 'unichar' (aka 'unsigned short') to parameter of type 'NSString *'`此代码的最后一行收到错误消息。

```
NSMutableString *sp = [[NSMutableString alloc] initWithString:@"             "];
NSArray *deals=@[@[sp, sp, sp, sp], @[sp, sp, sp, sp]];
NSString* suits = @"NESW";
[deals[0][3] replaceCharactersInRange:NSMakeRange(1, 1) withString:[suits characterAtIndex:2]]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T00:48:28.447

As the error says, `characterAtIndex:` returns a unichar while `replaceCharactersInRange:withString:` needs an NSString. Try `substringWithRange:NSMakeRange(2,1)` instead if you want an NSString with the character at index 2.

# emacs - 在 Emacs 拆分窗口中，如何浏览另一个窗口？

> ID：14763900
> 
> 赞同：1
> 
> 时间：2013-02-08T00:45:21.007
> 
> 标签：emacs

我使用 Cx 3 拆分为左右窗口。光标在左侧窗口中，我可以使用 Cn、Cp 来移动光标。我怎样才能留在左侧窗口并上下移动右侧窗口中的代码？

我以前做过，但我丢失了所有的 emacs 文件。所以我现在无法弄清楚。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T03:10:21.770

我已经用谷歌搜索了答案，[回复：如何向后滚动其他窗口？CMv 转发](http://lists.gnu.org/archive/html/help-gnu-emacs/2010-12/msg02096.html)

不过，使用`scroll-other-window`函数并为其添加参数。以下是详细信息：

```
(defun scroll-other-window-up-line ()
  "Scroll the other window one line up."
  (interactive)
  (scroll-other-window -1))
(defun scroll-other-window-down-line ()
  "Scroll the other window one line down."
  (interactive)
  (scroll-other-window 1))
(global-set-key (kbd "M-p") 'scroll-other-window-up-line)
(global-set-key (kbd "M-n") 'scroll-other-window-down-line) 
```

希望它可以提供帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T01:00:33.150

`scroll-other-window`是你的朋友，默认绑定`C-M-v`。

# php - 使用简码生成自动嵌入代码

> ID：14763902
> 
> 赞同：0
> 
> 时间：2013-02-08T00:45:25.103
> 
> 标签：php, wordpress

我已经开始编写一个 wordpress 主题，因为旧内容有一个**短**代码，例如；

```
[youtube]http://www.youtube.com/watch?v=4MhsnuHvZoI[/youtube] 
```

但是，此代码使用***插件*****生成自动嵌入**区域。实际上，我不想在我的新项目中**使用任何插件。**出于这个原因，我创建了一个像这样的简单短代码；

 ***```
<?php

    //  YoutubeEmbed

    function youtubekod($atts,$content = null ) {
    return '<iframe width="100%" height="315" src="http://www.youtube.com/embed/'.$content.'?rel=0" frameborder="0" allowfullscreen></iframe>'; 
    }
    add_shortcode('youtube', 'youtubekod');

?> 
```

但是，如果您检查短代码返回行；你会看到我试图做什么。但是，问题是我如何才能**在***[youtube] 标签**之间获取*****视频 ID ？***我会很高兴有你的帮助。*

 *谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T06:32:12.083

尝试这个

```
function youtubekod($atts, $content="") {
    parse_str( parse_url( $content, PHP_URL_QUERY ), $youtube_id ); 
    return '<iframe width="100%" height="315" src="http://www.youtube.com/embed/'.$youtube_id[v].'?rel=0" frameborder="0" allowfullscreen></iframe>'; 
}
add_shortcode('youtube', 'youtubekod'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T12:49:07.403

尝试这个。

```
<?php

    //  YoutubeEmbed

    function youtubekod($atts,$content = null ) {

        $url = get_the_content($post->post_content);
        $id=0;
        preg_match('%(?:youtube(?:-nocookie)?\.com/(?:[^/]+/.+/|(?:v|e(?:mbed)?)/|.*[?&]v=)|youtu\.be/)([^"&?/ ]{11})%i', $url, $matches);
        if(isset($matches[1])) $id = $matches[1];
        if(!$id) {
            $matches = explode('/', $url);
            $id = $matches[count($matches)-1];
        }
        $code = '<iframe width="100%" height="315" src="http://www.youtube.com/embed/{id}?rel=0" frameborder="0" allowfullscreen></iframe>';

        $code = str_replace('{id}', $id, $code);

        return $code;

    }
    add_shortcode('youtube', 'youtubekod');

?> 
```****

# java - 将值分配给任何函数之外的成员变量是否被认为是一种好习惯？

> ID：14763903
> 
> 赞同：3
> 
> 时间：2013-02-08T00:45:24.797
> 
> 标签：java, styles

例如：

```
public class App {

   private Car car = new Car();

   public static void main(String[] args) {
       // TO DO
   } 
} 
```

如果不好，有什么解决办法？你将如何重写这段代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T05:06:39.423

如果程序“总是”需要对象的实例并且创建实例的成本不太高（时间、资源），则可以在声明中初始化对象。那么是的，可能需要这种类型的“急切初始化”。

但是，这种设计在保持类松散耦合并增加单元测试难度方面确实与 OO 设计背道而驰。

在示例中：

```
public class App {
  private Car car = new Car();
} 
```

你是说：

1.  应用程序将“始终”需要一个 Car 对象。
2.  在 App 实例化之后，Car 总是会被实例化。（如果 Car 的实例化是昂贵的 IE，这可能会出现问题。它还有几个在实例化时创建的对象，比如说，它从某种类型的远程调用加载数据）

理想情况下，您只想在实际需要时创建对象。或者在构造函数（默认或重载）中提供一些灵活性。

```
public class App {
    private Car car;

    App() {
    }        

    // overloaded constructor
    App(Car car) {
        this.car = car;
    }

    public void setCar(Car car) {
        this.car = car;
    }

    public Car getCar() {
        return car;
    }

    public static void main(String[] args) { 
        // default constructor, lightweight, no car initialization happening;
        App ap1 = new App();

       // Ok, now I want a car, and it should be red.
        Car redCar = new Car("red");
        ap1.setCar(redCar);

        // Using overloaded constructor, now I can control aspects of "car"
        Car blueCar = new Car("blue");
        App ap2 = new App(blueCar);
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T00:56:59.833

在我看来，一切都取决于您正在处理的应用程序的设计。对于提供的示例，我认为这是可以接受的。但对于其他更明确的数据类型，我更喜欢构造函数初始化。主要是因为构造函数重载是可能的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T01:35:48.077

我一直被教导你在上面声明并在里面初始化。在构造函数内部初始化东西更有效，因为如果您需要在构造时使用传入的参数更改它，那么您正在初始化并分配何时可以初始化。

例如：

```
public class TestClass{
   //Declared but uninitialized
   Object obj;

   //Makes no difference but easier to read
   public TestClass(){
      this.obj = new Object();
   }

   //In this constructor however the object being passed in is what is initializing obj
   //-so if you were to initialize it above and then change it down here you are writing 
   //-to the mem twice and it is less efficient.  
   public TestClass(Object arg){
      this.obj = (Object)arg;
   }
} 
```

需要注意的是，这些天的内存真的很便宜。这样做的唯一真正目的（除了不想看起来像个菜鸟）是让它可以被其他人管理。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T00:50:33.317

If you want your code to be easier to test it's a bad practice. The reason why is that creating `App` will also create a `Car` whether you want it or not. Now, if `Car` has code that connects to a database, oops, now when you test `App` you need to have a database available you can connect to or your test will fail.

The solution is Dependency Injection aka Inversion of Control. You'd write it like this:

```
public class App {

   private Car car;

   public App(Car car) {
       this.car = car;
   }

   public static void main(String[] args) {
       // TO DO
   } 
} 
```

Now creating `App` doesn't necessarily create a `Car` and they are coupled less.

Now, I'm being very pedantic here. I probably use your example all the time in my code. I'm just pointing out a downside. This isn't ALWAYS bad and isn't ALWAYS good.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-08T00:51:53.963

> private Car car = new Car();

This perfectly ok IMHO. A couple of reasons for *not* doing it:

1.  `Car.<init>` requires arguments that are only available in `App.init`
2.  `App` has many fields and others are need to be initialized in `App.<init>` and for consistency you want to keep them all together.

In any case, don't do the following:

> private Car car = null;

Because every java developer knows that instance fields are initialized to `null`.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-08T01:09:00.073

使用 Init() 方法进行所有初始化。

公共类应用程序{

```
private Car car;

public App() {
    this.car = null;
}

public void Init() {
    this.car = new Car();
}

public void Shutdown() {
    this.car = null;
}

public static void main(String[] args) {
    App app = new App();
    app.Init();
    app.Shutdown();
    app = null;
} 
```

}

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-08T00:52:38.240

除了 tieTYT 写的内容之外，可能值得考虑的是，如果您在构造函数中实例化所有成员，它会使其更具可读性。您需要了解的有关该类型的新对象的所有信息都可以通过阅读构造函数来了解。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-02-08T00:54:55.077

请注意，以下之间的含义有所不同：

```
public class App {

   private Car car = new Car();

   public static void main(String[] args) {
       // TO DO
   } 
} 
```

和

```
public class App {

   private Car car;
   public App(){
     car = new Car();
   } 
} 
```

例如，如果 new Car() 首先失败，那么您肯定会在调试时玩得很开心。如有必要，第二个更具可读性和可调试性。如果您将字段视为类蓝图的一部分，那么在它们的声明中初始化它们就没有什么意义了。由于这里有 main，这可能是您的入口点，但对于其他类，如果您将它们视为对象的蓝图，那么构造函数的想法很有意义：

```
public class App{
  private Car car;
  public Car getCar(){
    return car;
  }
  public void setCar(Car car){
    this.car = car;
  }
  public App(Car car){
    this.car = car;
  }
} 
```

我想，这是 oop 类最常见的结构。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-02-08T00:57:29.320

执行此代码的完美方法是在 main 方法中创建一个 App 类型的 Object，该方法将调用 Car 类的构造函数。因此代码将如下所示。

公共类应用程序{

```
 private Car car;

    public static void main(String[] args)
    {
      App app=new App(); //
      app.car.  //Followed by the method or the member variable that you would like to
                //access

    } 
```

}

# java - 在android应用中显示大宽度的图片

> ID：14763906
> 
> 赞同：0
> 
> 时间：2013-02-08T00:45:36.493
> 
> 标签：java, android, scrollview, drawable, timeline

我目前正在为博物馆做一个应用程序，在这个应用程序中，必须有一个时间线。我把时间线做成了一个jpg文件。我试图在一个图像视图中显示这个文件（图片 1993x239 像素），它是一个滚动视图，但是：

*   在我的手机 LG Optimus L3 (e400) 上运行良好
*   在我的 Nexus 7 平板电脑上，图片没有出现

我该怎么做才能让它工作？

```
<?xml version="1.0" encoding="utf-8"?>
<HorizontalScrollView xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="wrap_content"
android:layout_height="fill_parent" >

<LinearLayout
    android:layout_width="wrap_content"
    android:layout_height="fill_parent" >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:contentDescription="@string/frise"
        android:src="@drawable/frise" />
</LinearLayout>
</HorizontalScrollView> 
```

# html - 当我向下滚动时，左列 100% 为空

> ID：14763910
> 
> 赞同：0
> 
> 时间：2013-02-08T00:46:02.300
> 
> 标签：html, css, scrollbar

当我将一`<div>`列设为 100% 并用内容填充它然后向下滚动时，背景是空的。

但是当它`<div>`为空时，我也希望它的高度为 100%，以便您从上到下看到背景。

有人知道为什么以及如何解决这个问题吗？

*   [此处带有滚动的示例](http://jsfiddle.net/KfjGU/122/)
*   [这里没有滚动的例子](http://jsfiddle.net/KfjGU/132/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T01:14:24.987

您想让页面高度为 100%，并确保`div`至少与页面一样高。所以，使用这个：

```
html, body {
    height: 100%;
}

#fullheight {
    min-height: 100% !important;
    width: 250px;
    background: blue;
} 
```

这确保了`fullheight`div 不会被限制为仅 100%，并且页面至少是全高。

小提琴： http: [//jsfiddle.net/KfjGU/138/，http](http://jsfiddle.net/KfjGU/138/) : [//jsfiddle.net/KfjGU/139/](http://jsfiddle.net/KfjGU/139/)

# ruby - 在Ruby中转换纪元时间

> ID：14763912
> 
> 赞同：8
> 
> 时间：2013-02-08T00:46:03.003
> 
> 标签：ruby, linux

有没有一种简单的方法可以使用 Ruby 将 Epoch 时间转换为标准格式？如果是这样，我可以自定义它的显示方式吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-08T01:16:42.930

使用`Time.at`方法：

```
Time.at(1234567890) #=> 2009-02-13 16:31:30 -0700 
```

要显示时间，您可以[`strftime`](http://www.ruby-doc.org/core-1.9.3/Time.html#method-i-strftime)在结果对象上使用该方法。

例如：

```
Time.at(1234567890).strftime("%m/%d/%Y") #=> "02/13/2009" 
```

# php - 一切都堆叠在一起？

> ID：14763920
> 
> 赞同：0
> 
> 时间：2013-02-08T00:46:54.727
> 
> 标签：php, content-management-system, blogs, styling

我又遇到了一个问题。[:S] 一切都堆积在一起！这是代码：

```
while ($row = mysql_fetch_array($data)) {
   echo "<div id='blPost'>".
        "<a href='read.php?pageid={$row['id']}'>".
        "{$row['title']}</a> | Date: {$row['date']}".
        "<div class='sep' />";
   $sbstS = substr($row['data'],0,500);
   echo $sbstS;
   echo '</div>'; 
```

问题是，一切都堆积在一起！如果有人可以提供帮助，这是我的测试服务器。[这是我正在使用的开发服务器。](http://raymonft.no-ip.info/blog/ "开发服务器")我已经摆弄了几次了。这是 CMS 的 1 天过时版本。它使用相同的功能和一切，但缺少图像，例如土豆。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T00:55:46.577

由于 CSS 中 .sep 类中的 height 属性，它被捆绑在一起

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T00:52:59.383

您的第一个 blPost div 永远不会关闭。

```
<div class="sep" /> 
```

无效。您需要正确关闭 div。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T00:55:56.443

你应该使用

```
 mysql_fetch_assoc($data) 
```

用于使用

```
$row['id'] 
```

那个语法。 [http://php.net/manual/en/function.mysql-fetch-assoc.php](http://php.net/manual/en/function.mysql-fetch-assoc.php)

# sql - 在灵活范围内计数事件

> ID：14763922
> 
> 赞同：1
> 
> 时间：2013-02-08T00:47:16.960
> 
> 标签：sql, teradata

我正在尝试计算每个人在特定目标日期的前一年和后一年的事件（即 event_table 中的行）。例如，假设我有一个人 100，目标日期是 10/01/2012。我想计算 9/30/2011-9/30/2012 和 10/02/2012-9/30/2013 的事件。

我的查询看起来像：

```
select * 
from (
    select id, target_date
    from subsample_table
    ) as i
left join (
   select id, event_date, count(*) as N
        , case when event_date between target_date-365 and target_date-1 then 0 
               when event_date between target_date+1 and target_date+365 then 1
               else 2 end as after 
   from event_table
   group by id, target_date, period
   ) as h
on   i.id = h.id 
 and i.target_date = h.event_date 
```

输出应该类似于：

```
id  target_date  after  N
100 10/01/2012   0      1000
100 10/01/2012   1      0 
```

有些人可能在之前或之后（或两者）没有任何事件，在这种情况下最好有零。我不关心730天之外的事件。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T14:08:33.870

我认为以下内容可能会接近您要完成的工作。

```
 select id
         , target_date
         , event_date
         , count(*) as N
         , SUM(case when event_date between target_date-365 and target_date-1 
                    then 1
                    else 0
                end) AS Prior_ 
         , SUM(case when event_date between target_date+1 and target_date+365 
                    then 1
                    else 0
               end) as After_              
      from subsample_table i
      left join 
           event_table h
        on i.id = h.id 
       and i.target_date = h.event_date
     group by id, target_date, period 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T01:09:55.850

这是一个通用的答案。我不知道 teradata 有哪些日期函数，所以我将使用 sql server 语法。

```
select id, target_date, sum(before) before, sum(after) after, sum(righton) righton
from yourtable t
join (
select id, target_date td
, case when yourdate >= dateadd(year, -1, target_date) 
  and yourdate < target_date then 1 else 0 end before
, case when yourdate <= dateadd(year, 1, target_date) 
  and yourdate > target_date then 1 else 0 end after
, case when yourdate = target_date then 1 else 0 end righton

from yourtable
where whatever 
group by id, target_date) sq on t.id = sq.id and target_date = dt
where whatever
group by id, target_date 
```

这个答案假设一个 id 可以有多个目标日期。

# pdf - 在 PDF 中有 2 个位图分辨率

> ID：14763926
> 
> 赞同：3
> 
> 时间：2013-02-08T00:47:53.437
> 
> 标签：pdf, pdf-generation

有没有办法在 PDF 中为单个图像放置 2 个位图实例？一个在屏幕上查看时显示，另一个在打印时显示？

我们遇到的问题是将图表渲染为位图。如果我们使用 300 dpi，那么轴线、边框等就会消失。如果我们使用 96 dpi，那么打印它看起来很糟糕。

谢谢 - 戴夫

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T08:33:29.083

您可以使用可选内容来执行此操作。为使用应用程序字典提供“打印”事件会导致内容适合打印。（请注意，并非所有打印应用程序都会遵守这一点）。

请参阅我的 1.7 版第 4.10 节“可选内容”中的 PDF 参考手册，从第 364 页开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T10:34:35.047

您可以添加一个**备用图像字典**（[PDF Spec](http://wwwimages.adobe.com/www.adobe.com/content/dam/Adobe/en/devnet/pdf/pdfs/PDF32000_2008.pdf)，第 8.9.5.4 节），它可以指定要用于打印的图像。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T00:50:01.753

是的，有办法，虽然我不知道。我们用它作为同事的恶作剧，在打印文件时，出现了一些完全不同的图片

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T10:23:23.417

您还可以使用 2 个只读文本框字段并在字段外观上绘制图像。然后对于一个字段，您将其可见性设置为 VisibleNonPrintable，而将另一个字段设置为 HiddenButPrintable。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-24T15:35:22.983

我实现了这个（使用 iText）。对于需要这些的其他人，这是代码。你[可以在我的博客上下载源代码](http://blogs.windward.net/davidt/2013/02/24/one-bitmap-for-viewing-another-for-printing-pdf/)。

```
 static void Main(string[] args)
    {
        Document document = new Document(new Rectangle(0, 0, 8.5f * 72.0f, 11 * 72));
        PdfWriter writer = PdfWriter.GetInstance(document, new FileStream(Path.GetFullPath(@"..\..\test_dotnet.pdf"), FileMode.OpenOrCreate, FileAccess.ReadWrite));
        document.Open();

        document.Add(new Paragraph("Visibility test"));

        // not displayed on printer
        PdfLayer layer = new PdfLayer("screen", writer);
        layer.OnPanel = false;
        layer.SetPrint("Print", false);
        layer.View = true;

        PdfContentByte cb = writer.DirectContent;
        cb.BeginLayer(layer);

        Image img = Image.GetInstance(Path.GetFullPath(@"..\..\building_01.png"));
        img.SetAbsolutePosition(72, 72 * 7);
        cb.AddImage(img);

        cb.EndLayer();

        // not displayed on screen
        layer = new PdfLayer("print", writer);
        layer.OnPanel = false;
        layer.SetPrint("Print", true);
        layer.View = false;

        cb = writer.DirectContent;
        cb.BeginLayer(layer);

        img = Image.GetInstance(Path.GetFullPath(@"..\..\building_02.png"));
        img.SetAbsolutePosition(72, 72 * 3);
        cb.AddImage(img);

        cb.EndLayer();

        document.Close();

        Console.Out.WriteLine("all done");
    } 
```

# vba - 从文件夹中的所有工作簿中删除 VBA 代码

> ID：14763930
> 
> 赞同：3
> 
> 时间：2013-02-08T00:48:46.817
> 
> 标签：vba, excel

我正在尝试构建代码以远程循环通过具有 .xls 文件的文件夹并删除其中包含的宏。到目前为止，我的各个组件都在工作，但是在激活各种工作簿然后以编程方式确保在每个文件中引用“Microsoft Visual Basic for Application Extensibility 5.3”时遇到了困难。

谢谢！

```
Sub LoopFiles()

Application.ScreenUpdating = False
Application.DisplayAlerts = False
Application.EnableEvents = False

strPath = ' enter path here

Set objExcel = CreateObject("Excel.Application")
objExcel.Visible = True
objExcel.DisplayAlerts = False

Set objFso = CreateObject("Scripting.FileSystemObject")
Set objFolder = objFso.GetFolder(strPath)

For Each objfile In objFolder.Files

If objFso.GetExtensionName(objfile.Path) = "xls" Then
   Set Objworkbook = objExcel.Workbooks.Open(objfile.Path)
    ' Include your code to work with the Excel object here
    Objworkbook.Activate

    AddReference (objfile)

   Objworkbook.Close True 'Save changes
End If

Next

Application.ScreenUpdating = True
Application.DisplayAlerts = True
Application.EnableEvents = True
End Sub

Sub AddReference(FileRequired)

     FileRequired.Activate
     'MsgBox "Sheet: " & ActiveWorkbook.Name

     ActiveWorkbook.VBProject.References.AddFromGuid _
     GUID:="{0002E157-0000-0000-C000-000000000046}", _
     Major:=5, Minor:=3
End Sub

Sub DeleteAllVBACode()

        Dim VBProj As VBIDE.VBProject
        Dim VBComp As VBIDE.VBComponent
        Dim CodeMod As VBIDE.CodeModule
        Set VBProj = ActiveWorkbook.VBProject

        For Each VBComp In VBProj.VBComponents
            If VBComp.Type = vbext_ct_Document Then
                Set CodeMod = VBComp.CodeModule
                With CodeMod
                    .DeleteLines 1, .CountOfLines
                End With
            Else
                VBProj.VBComponents.Remove VBComp
            End If
        Next VBComp
    End Sub 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T01:39:58.180

就像我在评论中提到的那样，您无需添加引用即可`Microsoft Visual Basic for Application Extensibility 5.3`从文件中删除代码。考虑这个小练习。

**1** )。创建 Excel 文件

**2** )。将此代码粘贴到模块中

```
Sub Sample1()
    MsgBox "A"
End Sub 
```

**3**）。将上述文件另存为`C:\Sample.xls`

**4**）。关闭文件

**5**）。打开一个新的 excel 文件并将此代码粘贴到模块中

```
Option Explicit

'~~> Trust Access To Visual Basics Project must be enabled.
Sub Sample2()
    Dim wb As Workbook
    Dim i As Long

    '~~> Replace this with the relevant file
    '~~> We can open the files in a loop as well
    Set wb = Workbooks.Open("C:\Sample.xls")

    On Error Resume Next
    With wb.VBProject
        '~~> Remove the components
        For i = .VBComponents.Count To 1 Step -1
            .VBComponents.Remove .VBComponents(i)
        Next i
        '~~> Remove the code lines
        For i = .VBComponents.Count To 1 Step -1
            .VBComponents(i).CodeModule.DeleteLines _
            1, .VBComponents(i).CodeModule.CountOfLines
        Next i
    End With
    On Error GoTo 0
End Sub 
```

**6** ) 确保启用“信任对 Visual Basics 项目的访问”

**7** ) 运行`Sample2()`

你会看到里面的代码`Sample.xls`被删除了，我们甚至还没有设置对`Microsoft Visual Basic for Application Extensibility 5.3`.

# ruby-on-rails-3 - Delegate or instantiate additional class?

> ID：14763931
> 
> 赞同：1
> 
> 时间：2013-02-08T00:48:57.057
> 
> 标签：ruby-on-rails-3, refactoring, delegation

Let's say I have an Account class and an AccountReport class. In accounts#show I want to show a report of an account. Both Account and AccountReport have a number of public methods. Which technique of the following techniques is better?

1) Instantiate an Account and an AccountReport, initializing the AccountReport with the account data.

```
class AccountsController < ActionController::Base
  def show
    @account = current_user.account
    @account_report = AccountReport.new(@account.orders)

    respond_with(@account)
  end

  # ...
end 
```

2) Allow an instance of Account to instantiate AccountReport and delegate method calls

```
class Account < ActiveRecord::Base
  attr_reader :account_report

  delegate :method_a, :method_b, :method_c, :method_d, :to => :account_report

  after_initialize :setup_account_report

  def setup_account_report
    @account_report = AccountReport.new(orders)
  end

  # ...
end 
```

Option 2 seems to be a cleaner approach to me but loading up Account with lots of methods makes it feel like a God class.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T01:19:48.500

好吧，我认为你必须混合使用这两种选择。

第一个很好，如果您只使用展示报告。第二个很好，如果您为您的帐户使用所有时间报告。

对于第二个，您的报告将一直被实例化，并且可能会降低性能。

你也许应该尝试这样的事情：

```
class Account < ActiveRecord::Base
  # ...

  @report = nil
  def report
    if @report.nil?
       @report = AccountReport.new(self.orders)
    end
  end

  # ...
end 
```

该解决方案的好处是仅在需要时才加载报告，但不会每次都加载。此解决方案的坏处是，如果您添加一些订单，您的报告将不会是最新的。

**更新：** 为了改善这一点，您可以用这个替换条件

```
if @report.nil || self.created_at_changed? 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T02:12:58.350

我喜欢第一个选项，因为它保持低耦合。第二个选项以一种可能不必要的方式将 Account 和 AccountReport 联系在一起。每当您收到另一种类型的报告时会发生什么？您可能需要更改 Account 中的许多内容，这很可悲，因为它们看似无关。

您可以通过将这两个东西组合在一个服务对象中并将其交给您的视图来保持控制器中的逻辑/详细程度较低。`AccountReporting`服务可以处理将这两个类组合在一起的逻辑，例如：

```
class AccountReporting
    def initialize(account)
       @account = account
    end
    def report
       AccountReport.new(account.orders)
    end
end 
```

然后，在控制器中使用它：

```
AccountReporting.new(current_user.account) 
```

这有意义吗？

# scala - 了解 Play 的请求生命周期！应用

> ID：14763934
> 
> 赞同：7
> 
> 时间：2013-02-08T00:49:28.043
> 
> 标签：scala, playframework, playframework-2.0, bootstrapping

我是新来的游戏！web 框架，为了了解它是如何工作的，以及它与其他 web 框架的比较，我希望能够在 Play! 源代码，从开始到结束的请求生命周期。我将使用 Play! 的 Scala 实现。

因为我的大部分经验都是使用 PHP 框架，所以我习惯于从 web 根目录中的 index.php 文件开始，然后向下阅读任何包含的配置/引导脚本、依赖注入处理、请求路由、动作调度，最后是视图/响应渲染。

我无法确定 Scala/Play 的类似入口点！应用程序，我非常感谢朝着正确的方向前进。请求生命周期的演练当然会非常慷慨，但我真正需要的只是显示入口点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T10:31:34.360

默认情况下，Play 框架使用内置的 HTTP 服务器（基于[Netty](https://netty.io/)）。因此，与 PHP 最接近的类比是 Play 既是 Apache 又是 PHP。

PHP 使用传统的“CGI-like”范例：为单个 HTTP 请求提供服务，您的程序启动，并在完成服务请求后终止。在 CGI 中为 HTTP 请求提供服务，网络服务器启动外部程序——您的脚本——并返回其输出。旧版本的 PHP 只为 CGI 设计，在后来的版本中以其他方式与服务器交互，因为 CGI 很慢，但核心原理保持不变。

大多数 Web 应用程序技术使用另一种方法：您的 Web 应用程序启动一次然后保持运行，因此一个正在运行的 Web 应用程序实例继续为请求提供服务（并且可以并行处理多个请求）。它不会像在 PHP 中那样在服务一个请求后死掉。这允许每次启动应用程序所需的资源消耗更少，并且使用起来稍微困难一些，因为大多数请求处理隐藏在框架内部，并且您的应用程序只需要公开请求到达和返回时调用的控制器方法回复。

它还允许更大的灵活性，例如后台处理可以直接在 Web 应用程序内部启动，无需外部服务器进程。Play 有非常方便的 Akka 库。

随着越来越多的 Web 应用程序使用 Ajax 和 REST 方法，而不是每次都提供重量级网页，它变得更加重要。而且几乎不可能使用 PHP 创建具有良好性能的实时消息传递后端，无论请求技术如何（轮询、长轮询、带有多部分的 iframe）。

但如果与 PHP MVC 框架相比，从创建视图、模型和控制器的开发人员的角度来看，Play 非常相似。在 PHP MVC 框架和 Play 框架中都调用控制器方法或函数，并且该方法应该返回响应，视图通常是模板，模型通常是 ORM 绑定到关系数据库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T07:45:21.477

我认为这是您的意思的文件：

[https://github.com/playframework/playframework/blob/master/framework/src/play-netty-server/src/main/scala/play/core/server/NettyServer.scala](https://github.com/playframework/playframework/blob/master/framework/src/play-netty-server/src/main/scala/play/core/server/NettyServer.scala)

Play 是一个在给定端口开始侦听的 Java 应用程序。使用 Netty 库完成侦听，该库了解不同类型的网络协议（最重要的是 HTTP）。一旦 Netty 知道发生了什么，它将控制 Play 框架。

然后 Play 框架将使用全局文件与路由组合来确定要调用的操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T03:05:21.290

Play 更像是一个安静的框架（请阅读[http://en.wikipedia.org/wiki/Representational_state_transfer](http://en.wikipedia.org/wiki/Representational_state_transfer)），而不是典型的基于模板的框架，如带有请求生命周期概念的 jsp jsf 等，尽管它也支持模板。基本思想也是基于json等纯数据与服务器进行交互，并且大部分用于更新dom结构的代码都是用javascript编写的，并且只在客户端完成，这实际上更灵活，更简单有效。

在游戏中，您只需在 scala 类中定义一个方法并将其映射到**路由**文件中，即可轻松地创建用于向浏览器发送数据的方法。就像在典型的 Web 开发过程中一样，您还将 html 文件放在公共资源文件夹（或创建模板）中，这通常会在浏览器中执行时对该方法进行 ajax 调用。

# javascript - How to get the relevant 'this' object in jquery?

> ID：14763935
> 
> 赞同：0
> 
> 时间：2013-02-08T00:49:31.200
> 
> 标签：javascript, jquery

here's the snippet of code I have:

```
$(".block").mouseover(function() {
  $("#block_title").html("title"));
}); 
```

Each div of class .block has a data-title attribute (value of each data-title attribute is different). I want to be able to access this data-title attribute inside my anonymous function.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T00:51:12.180

You can access it using the `.data` method:

```
$(".block").mouseover(function() {
    ...
    $("#block_title").html($(this).data('title'));
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T00:52:22.247

您可以在 jQuery 中使用 .data() 函数

```
$(".block").mouseover(function() {
  $("#block_title").html($(this).data('title'));
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T01:00:07.530

如果你的意思是你有一个**[HTML5`data-`属性](http://www.w3.org/html/wg/drafts/html/master/dom.html#embedding-custom-non-visible-data-with-the-data-%2a-attributes)**：

```
$(".block").mouseover(function() {
    $("#block_title").html( $(this).attr("data-title") ); //data-title value
}); 
```

或者，如果您的意思是您在**[jQuery 任意数据](http://api.jquery.com/jQuery.data/)**`title`中有一个属性：

```
$(".block").mouseover(function() {
    $("#block_title").html( $(this).data("title") ); //title value in the data object
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T00:55:08.713

您可能指的是此代码。

```
$('.block').attr('data-title', 'This is a random value'); 
```

根据[jQuery API 文档](http://api.jquery.com/attr/)：

> 获取匹配元素集中第一个元素的属性值，或为每个匹配元素设置一个或多个属性。

我希望这回答了你的问题。

# android - Is Android canvas.drawBitmap documentation wrong?

> ID：14763939
> 
> 赞同：0
> 
> 时间：2013-02-08T00:49:43.087
> 
> 标签：android, android-maps

Is the Android documentation for [canvas.drawBitmap](http://developer.android.com/reference/android/graphics/Canvas.html#drawBitmap%28android.graphics.Bitmap,%20float,%20float,%20android.graphics.Paint%29) wrong? It says:

> public void drawBitmap (Bitmap bitmap, float left, float top, Paint paint)
> 
> Draw the specified bitmap, with its top/left corner at (x,y), using the specified paint, transformed by the current matrix.

Well, x and y don’t seem to be floats, they’re ints; is that correct? Say I want to overlay the bitmap (which is the size of the available screen, and is bound to a canvas of the same) over the whole available screen. It seems sensible I would: `canvas.drawBitmap(myBitmap, 0, 0, mPaint);` doesn’t it? But that doesn’t work. What does seem to work is: `canvas.drawBitmap(myBitmap, 2000000, 1000000, mPaint)`. Now that statement seems to me to tell the bitmap that it should draw itself a huge distance Outside the screen! What am I missing here?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T01:14:37.360

在这种方法中`x`，and`y`是浮点数，而不是整数。但就像文档中提到的那样，位图的`x`和`y`坐标将受到当前在`Canvas`. 例如，在a`ScrollView`的情况下，矩阵很可能包含非常大的平移。

这意味着坐标`0, 0`将在当前原点绘制位图`Canvas`。该原点由您可以使用查询的矩阵定义`getMatrix()`。

# c++ - QGLWidget refuses to draw anything

> ID：14763940
> 
> 赞同：2
> 
> 时间：2013-02-08T00:49:53.267
> 
> 标签：c++, qt, opengl, qt4, qglwidget

I've looked at a ton of articles and SO questions about OpenGL not drawing, common mistakes, etc. This one is stumping me.

I've tried several different settings for `glOrtho`, different vertex positions, colors, etc., all to no avail.

I **can confirm** the OpenGL state is valid because the clear color *is* purple in the code (meaning the window *is* purple). gDEBugger is also confirming frames are being updated (so is Fraps).

Here is the code. Lines marked as "didn't help" were not there originally, and were things that I tried and failed.

```
QTWindow::QTWindow( )
{
    // Enable mouse tracking
    this->setMouseTracking(true);
}

void QTWindow::initializeGL()
{
    // DEBUG
    debug("Init'ing GL");
    this->makeCurrent(); ///< Didn't help
    this->resizeGL(0, 0); ///< Didn't help
    glDisable(GL_CULL_FACE); ///< Didn't help
    glClearColor(1, 0, 1, 0);
}

void QTWindow::paintGL()
{
    // DEBUG
    debug("Painting GL");
    this->makeCurrent(); ///< Didn't help
    glLoadIdentity();
    glClear(GL_COLOR_BUFFER_BIT);
    glColor3f(0,1,1);
    glBegin(GL_TRIANGLES);
    glVertex2f(500,100);
    glVertex2f(100,500);
    glVertex2f(0,0);
    glEnd();
    this->swapBuffers(); ///< Didn't help
}

void QTWindow::resizeGL(int width, int height)
{
    // DEBUG
    debug("Resizing GL");
    this->makeCurrent(); ///< Didn't help
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    glOrtho(0, 1000, 0, 1000, -1, 1);
    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity();
} 
```

The triangle is not being displayed at all, even with culling turned off. However, all three debug logs are called exactly how they should be.

What am I missing?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T22:26:49.773

尝试在 QTWindow::resizeGL() 函数的最开始调用 glViewport() 函数：

```
glViewport(0, 0, width, height); 
```

并且永远不要调用 resizeGL() 并将*宽度*和*高度*设置为 0 ;) 除此之外，您不必直接调用 resizeGL() ，因为每当调整窗口大小时 Qt 都会调用它。

您可以删除对 swapBuffers() 函数的所有调用 - 它是由 Qt 在内部调用的。

makeCurrent() 函数应该在所有其他 GL 调用之前被调用，所以最好在 initializeGL() 中调用它，但您不必在 paintGL() 函数中调用它（除非正在调用 paintGL()从另一个线程调用，但我敢打赌它不在你的代码中）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T03:45:36.357

问题最终成为版本。`glGetString(GL_VERSION)`正在使用带有指示的 4.2 兼容性上下文返回的版本字符串。

由于`paintGL`方法中的三角形调用在 3.1 中被删除（如果我没记错的话），很明显为什么它们没有绘制任何东西。此外，没有抛出错误，因为它是兼容的。模式。

因为我无法在 QGLWidget 上将版本降至 3.0 以下（由于 QT 需要 2.1，正如我在另一个留言板上获悉的那样），我将版本设置为 3.0 并尝试使用一些 3.0 绘图调用并结束起来工作。

# breeze - Issue using executeQueryLocally without server metadata

> ID：14763945
> 
> 赞同：0
> 
> 时间：2013-02-08T00:50:16.763
> 
> 标签：breeze

I'm not using EF, so have followed the NoDb sample to successfully load data from my WebApi without using the server side metadata. After the initial load, I was hoping to use the local data cache in the EntityManager while the user interacts with the page. The problem is when I call executeQueryLocally, the cached data set is empty. I stepped through the code to see why the data wasn't being saved to the cache, and there were two issues:

1.  in _getEntityType, metadataStore.isEmpty() was returning true.
2.  in _getEntityType, metadataStore._getEntityTypeNameForResourceName was returning nothing

To get around the this, I added calls in my code to metadataStore.addDataService and metadataStore._setEntityTypeForResourceName. After adding these, the cache was saved properly and executeQueryLocally worked. I'm assuming this was not the intended way to get this to work... Is there something else I am doing wrong? Or is this a bug that can be fixed?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T01:35:14.183

很抱歉花了这么长时间才回到这个。

我们刚刚在微风 v.1.1.3 中公开了 metadataStore.setEntityTypeForResourceName。（我们重命名了删除第一个“_”的方法。

否则，你做了完全正确的事。接得好。

# memory-management - Requesting memory more than available

> ID：14763947
> 
> 赞同：1
> 
> 时间：2013-02-08T00:50:28.277
> 
> 标签：memory-management, dynamic, virtual-memory

Suppose there is 50 MB to allocate and there is this for loop which allocates memory in each iteration. What happens when the following for loop runs.

for(int i=0; i < 20; i++) {

```
int *p = malloc(5MB); 
```

}

I was asked this question in an interview. Can someone guide me on this and direct me to the necessary topics which I must learn in order to understand such situations.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T06:01:58.707

如果这是一个使用虚拟内存的系统，那么情况显然比 malloc 简单地失败并返回空指针更复杂。在这种情况下，malloc 调用将导致在虚拟地址空间中分配内存页面。当访问此内存时，将导致页面错误，控制权将交给 os 内存管理器，这会将虚拟内存页面映射到物理内存页面。当可用的物理内存已满时，内存管理器通常会通过将当前在物理内存中的数据写入磁盘支持（或者如果它已经由磁盘文件支持，则简单地丢弃该数据），然后重新映射它来处理进一步的页面错误现在可用于最初导致页面错误的虚拟内存页面的物理内存。

Wikipedia 包含此过程的相当基本的概述（[http://en.wikipedia.org/wiki/Paging](http://en.wikipedia.org/wiki/Paging)），包括不同操作系统的一些实现细节。更详细的信息可从许多其他来源获得，例如。英特尔架构软件开发手册（[http://www.intel.com/content/www/us/en/processors/architectures-software-developer-manuals.html](http://www.intel.com/content/www/us/en/processors/architectures-software-developer-manuals.html)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T16:03:44.047

根据 malloc 的文档（例如[http://www.cplusplus.com/reference/cstdlib/malloc/](http://www.cplusplus.com/reference/cstdlib/malloc/)），您将获得一个指向 5MB 内存块的指针（注意 malloc 的参数应该是所需的字节数，而不是 MB ..）前 10 次（如果存在与从 50MB 可用空间中取出的 malloc 空间相关的开销，则可能是 9 次），并且将返回指向该空间的指针。在这之后，5MB 的内存块将不可用，并且 malloc 将失败，返回一个空指针。

# java - 如何有一个分布式参数？

> ID：14763949
> 
> 赞同：0
> 
> 时间：2013-02-08T00:50:45.790
> 
> 标签：java, authentication

目前，我正在从服务器集群的服务器部分对身份验证服务进行 POST 调用，当我收到带有身份验证令牌的响应时，我将该令牌保存在该服务器中应用程序的内存中。但是当下一个调用进来并且我尝试使用相同的令牌时，不能保证我在具有令牌的同一台服务器中，或者我是否在集群内的不同服务器中，所以调用失败，因为有没有令牌。

知道如何保存该令牌以便所有服务器都可以使用相同的令牌而不会使其他服务器无效吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T00:56:49.150

不要将进程中的密钥存储在单个服务器的内存中，而是使用共享的东西，如[memcached](http://memcached.org/)或[Hazelcast](http://www.hazelcast.com/) - 或者只使用常规的 ol' 数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T01:12:41.613

我通过在同一台服务器内使所有调用顺序来修复它，所以所有调用都具有相同的令牌......谢谢

# windows-phone-7 - Windows Phone 添加到列表问题

> ID：14763950
> 
> 赞同：1
> 
> 时间：2013-02-08T00:50:45.827
> 
> 标签：windows-phone-7, listbox, add

（Windows Phone 7 SDK）您好，我有一个名为**CTransactionList**的列表框，并通过使用数据绑定将一些项目添加到此列表框中。在这里我有一个类来评估数据绑定。（我认为这里不需要我的列表框的 XAML 代码，因为我的问题是由于一些编码问题而出现的）

```
public class CTransaction
    {
        public String Date1 { get; set; }
        public String Amount1 { get; set; }
        public String Type1 { get; set; }
        public CTransaction(String date1, String amount1, String type1)
        {
            this.Date1 = date1;
            this.Amount1 = amount1;
            switch (type1)
            {
                case "FR":
                    this.Type1 = "Images/a.png";
                    break;

                case "TA":
                    this.Type1 = "Images/b.png";
                    break;

                case "DA":
                    this.Type1 = "Images/c.png";
                    break;
            }
        }
    } 
```

这里我有一个函数，当一个移动完成时，这个函数运行；（这个函数应该在函数运行时添加新项目）

```
List<CTransaction> ctransactionList = new List<CTransaction>();//Define my list

    public void movecompleted()
    {

        String DefaultDate = "";
        String DefaultAmount = "";
        String RandomType = "";

        DefaultDate = nameend.Text;
        DefaultAmount = diffend.Text;
        RandomType = "FR";

        ctransactionList.Add(new CTransaction(DefaultDate, DefaultAmount, RandomType));

        CTransactionList.ItemsSource = ctransactionList;
    } 
```

第一次移动完成时，它会将所需的元素添加到我的列表中。但是下次，它不会添加到我的列表中。旧的保留它的存在。我还通过将列表定义放入我的函数中来尝试这种格式，例如：

```
 public void movecompleted()
    {

        List<CTransaction> ctransactionList = new List<CTransaction>(); //List definition in function
        String DefaultDate = "";
        //...Same 
```

}

这一次，它用新的替换了我当前的项目。不要附加在列表的末尾。（两种方式，我的列表中只有一项，而不是更多）我如何每次都追加到列表中？我哪里错了？

**这是我的调试报告。根据我在调试观察器中的观察，ctransactionList 对象和 CTransactionList ListBox 都有所需的项目。唯一的问题是，即使 CTransactionList 具有从 ctransactionList 对象检索到的资源，它也无法正确刷新自身。**

这是我的相关列表框的 XAML 代码。**（如果需要的话）**

```
<Grid>
                <ListBox Name="CTransactionList" Margin="0,0,0,0"  >
                    <ListBox.ItemTemplate >
                        <DataTemplate>
                            <Button Width="400" Height="120"  >
                                <Button.Content >
                                    <StackPanel Orientation="Horizontal" Height="80" Width="400">
                                        <Image Source="{Binding Type1}" Width="80" Height="80"/>
                                        <StackPanel Orientation="Vertical" Height="80">
                                            <StackPanel Orientation="Horizontal" Height="40">
                                                <TextBlock Width="100" FontSize="22" Text="Name:" Height="40"/>
                                                <TextBlock Width="200" FontSize="22" Text="{Binding Date1}" Height="40"/>

                                            </StackPanel>
                                            <StackPanel Orientation="Horizontal" Height="40">
                                                <TextBlock Width="100" FontSize="22" Text="Difficulty:" Height="40"/>
                                                <TextBlock Width="200" FontSize="22" Text="{Binding Amount1}" Height="40"/>
                                            </StackPanel>
                                        </StackPanel>
                                    </StackPanel>
                                </Button.Content>
                            </Button>
                        </DataTemplate>
                    </ListBox.ItemTemplate>
                </ListBox>

            </Grid> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T07:59:56.310

正如您正确提到的，它与您的 XAML 无关。问题出在您的代码中。

第一个简单的修复可能会在设置新源之前清除 ItemsSource，像这样

```
CTransactionList.ItemsSource = null;
CTransactionList.ItemsSource = ctransactionList; 
```

这样，您将清除现有的数据绑定并将新列表强制到 ListBox 中。

另一个建议的解决方法是，

“将您更改`List`为`ObservableCollection`. 因为，`ObservableCollection`扩展了 INotifyPropertyChanged，因此能够自动更新 ListBox”

```
List<CTransaction> ctransactionList = new List<CTransaction>();//Change this to below

ObservableCollection<CTransaction> ctransactionList = new ObservableCollection<CTransaction>();//Define my collection 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T01:42:48.287

但是之前有个断点

```
CTransactionList.ItemsSource = ctransactionList; 
```

并运行该功能两次。你现在有两个项目`ctransactionList`吗？我怀疑绑定失败并且`ctransactionList`实际上正在增加

# c++ - 对二维字符数组进行排序？C++

> ID：14763962
> 
> 赞同：1
> 
> 时间：2013-02-08T00:52:03.980
> 
> 标签：c++, arrays, sorting

我正在尝试对一个 10X15 的字符数组进行排序，其中每一行都是一个单词。我的目标是按降序对它进行排序，从顶部的最大值单词到数组 [第 0 行] [第 0 列到第 14 列] 位置，以及底部数组 [第 9 行] [第 0 列的最小值通过 14]。每一行都是一个单词（是的，它们看起来不像单词，但这是为了测试程序的排序能力）。

**澄清一下：** 我需要做的是......考虑到每一行都是一个完整的单词，我需要从顶部的最高值单词和底部的最低值单词对行进行排序。

编辑：

现在一切正常。对于任何有类似问题的人，请查看下面的评论，有几个很棒的解决方案，我只是选择了一个我创建自己的排序函数来了解更多关于排序的解决方案。并感谢大家帮助我！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T01:01:43.490

您正在使用 c++，因此请退出使用数组并从 stl 类型开始：

将每一行转换为字符串：

```
string tempString
for (int i = 0; i < rowSize; ++i) {
    tempString.pushBack(array[foreachrow][i])
} 
```

将它们添加到向量中

```
std::vector<std::string> sorter;
sorter.push_back(tempString); 
```

对每一行都这样做。

```
std::vector<std::string> sorter;
for each row {
    for each coloumn {
        the string thing

    }
    push back the string
} 
```

然后对向量进行排序并将向量`std::sort`写回数组（如果你必须但不要因为数组很烂）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T02:01:59.600

像往常一样，您需要`qsort`：

```
void qsort( const void *ptr, size_t count, size_t size,
            int (*comp)(const void *, const void *) ); 
```

这需要一个指向您的起始地址的 void 指针、要排序的元素数量、每个元素的大小以及一个比较函数。

你可以这样称呼它：

```
qsort( array, ROWS, COLS, compare_word ); 
```

您将 compare_word 定义为反向排序的位置：

```
int compare_word( const void* a, const void* b )
{
    return strncmp( b, a, COLS );
} 
```

现在，鉴于每个单词的长度为 15 个字符，因此可能需要处理填充。我不知道数组将被打包为 10 x 15 而不是 10 x 16。但如果你怀疑是这样，你可以`(&array[1][0] - &array[0][0])`作为元素大小而不是`COLS`.

如果您不允许使用`qsort`并且必须编写自己的排序算法，请执行一些简单的操作，例如选择排序。您可以使用`strncmp`来测试字符串。查找函数（谷歌很容易，或者如果你使用 Linux，`man 3 strncmp`）。要交换字符，您可以使用一个临时`char`长度数组，`COLS`然后调用 3 次`memcpy`来交换单词。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-08T03:19:00.330

您的新代码使用`string`and的问题`vector`是一个简单的错字：

`sorter[count] = array[count+1];`应该`sorter[count] = sorter[count+1];`

# c# - How can I catch a C# AppCrash because of a native C++ DLL fail

> ID：14763964
> 
> 赞同：2
> 
> 时间：2013-02-08T00:52:09.153
> 
> 标签：c#, c++, .net, try-catch, crash

I have a DLL created from native c++(say XYZ.dll). I link against that DLL in a wrapper that is C++ .NET. An object of this wrapper is used in my highest level C# code.

My question is: sometimes a function in my DLL crashes and my highest level C# code crashes with AppCrash; crash module: XYZ.dll. I am trying to figure our where it is crashing my native C++ code, but that is proving to be fruitless. I was wondering if there was a way for me to catch this crash in my C# code and move on.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T00:59:21.363

我认为这不是您正在寻找的答案，但至少它有助于解决问题。查看 AppDomain.UnhandledException... 您应该能够捕获并记录堆栈跟踪。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T02:07:04.027

这是您在 Visual Studio 中调试的东西吗？如果没有，请考虑安装 Windows 调试器并在 cdb.exe 下运行您的应用程序。确保您的非托管组件具有符号 (.pdb)。如果您在调试器（即 Visual Studio 或 cdb/windbg）下运行您的应用程序并且可以重现崩溃，那么您应该能够获得堆栈跟踪。既然你暗示你拥有非托管库，我可以假设你有资源吗？如果您在 VS 中，请确保禁用 Debug Just My Code 设置。如果您在 windbg 中，那么一旦您遇到第一次机会异常，崩溃点应该会显示您的堆栈跟踪。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T02:23:44.660

您绝对可以“赶上”这次崩溃。

在您的 C++ .NET Wrapper/Handler 中，将所有调用封装到第 3 方 DLL 中，使用 C++ try/catch 块封装所有调用。这很可能会奏效。

如果没有，请切换到使用 Windows 结构化异常处理。这将捕获本机 Win32 异常并杀死它们。[你可以在这里](http://msdn.microsoft.com/en-us/library/windows/desktop/ms681409%28v=vs.85%29.aspx)找到 Win32 文档。

# ruby-on-rails-3 - How to test for deleting an association in FactoryGirl?

> ID：14763965
> 
> 赞同：0
> 
> 时间：2013-02-08T00:52:16.600
> 
> 标签：ruby-on-rails-3, factory-bot

I have the following factory:

```
factory :store do
  room
  factory :store_with_items do
    ignore do
      items_count 4
    end

    after(:create) do |store, evaluator|
      FactoryGirl.create_list(:equippable_item, evaluator.items_count, store: store)
    end
  end
end 
```

Next, I create an object:

```
@store = FactoryGirl.create :store_with_items 
```

My problem is that when I "delete" one of the store's items, the store still shows that it has 4 items.

```
@store.items[0].store_id = nil
@store.save!
puts @store.items.size 
```

The puts is 4\. How do I properly delete an item? Isn't this how you would do it in rails?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T08:03:48.037

我以前更喜欢这种方法，但现在我避免了；让工厂变得简单并在运行时填充 has_many 关联更容易、更灵活。

## 尝试这个

商店工厂（相同）：

```
factory :store do
  room
end 
```

项目工厂：

```
factory :item do
  store # will use the store factory
end 
```

然后在我的测试中，我将填充适合手头案例的内容：

```
@store = FactoryGirl.create :store
@item1 = FactoryGirl.create :item, store: @store
@item2 = FactoryGirl.create :equippable_item_or_whatever_factory_i_use, store: @store 
```

## 解释

通过显式传入 store 实例，将为您设置关联。这是因为当您显式传入某些内容`FactoryGirl.create`或`FactoryGirl.build`它会覆盖工厂定义中定义的任何内容时。它甚至适用于零。这样，您将拥有为您提供所有真实功能的真实对象实例。

## 测试破坏

我认为您示例中的代码不好；它破坏了商店和商品之间的关联，但实际上并没有删除商品记录，因此您留下了孤儿记录。我会这样做：

```
@store.items[0].destroy
puts @store.items.size 
```

## 奖金

您可能还希望将您的子关联设置为在父级被销毁时被销毁（如果尚未销毁）。这意味着当您说`@store.destroy`属于它的所有项目也将被销毁（从数据库中删除。）

```
class Store < ActiveRecord::Base
  has_many :items, dependent: :destroy
  .....
end 
```

# android - 使用 BroadcastReceiver 时出现 NullPointerException

> ID：14763969
> 
> 赞同：2
> 
> 时间：2013-02-08T00:52:47.463
> 
> 标签：android

我在安卓屏幕上有一条错误消息。这是Logcat -

```
02-08 09:33:42.471: E/AndroidRuntime(11592): java.lang.RuntimeException: Unable to start receiver something.MainActivity$CancelReceiver: java.lang.NullPointerException 
```

为什么程序在错误日志后正常工作？（程序没有被杀死）当它第一次抛出广播时，就会出现这个错误。

这是我的代码的一部分

```
public static class CancelReceiver extends BroadcastReceiver{

    @Override
    public void onReceive(Context context, Intent intents) {

            intents.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
            String OKorNOT = intents.getExtras().getString("OKorNOT");
            String str = intents.getExtras().getString("something");

            if(OKorNOT.equals("OK")){
                //OKの場合

                tv2.setText(str);
                //this line may throws error.tv means TextView object findview already.
            }else if(OKorNOT.equals("NOT")){
                //NOTの場合
                tv.setText("yeah");//this line also throws error
                pushB.setText("NO!");   
                tv2.setText("");
            } 
```

怎么了？

编辑。这个 onReceive 在静态类中。

和关于电视的oncreate，tv2是

```
public class MainActivity extends Activity {

   static TextView tv;
   static TextView tv2;
   static Button pushB;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

         pushB = (Button)findViewById(R.id.button2);
         tv = (TextView)findViewById(R.id.textView6);
         tv2 = (TextView)findViewById(R.id.textView7);
}
} 
```

我确实在 onCreate 中定义了对象。

# javascript - 仅从函数的第一个实例中删除 jQuery 幻灯片过渡？

> ID：14763971
> 
> 赞同：1
> 
> 时间：2013-02-08T00:52:58.083
> 
> 标签：javascript, jquery, parent-child, transition, slidedown

好的，我正在为 Wordpress 使用 UberMenu 插件。当您单击菜单中的父项时，子菜单会向下滑动到下面的位置并保持不动。单击子菜单链接后，正常的功能是子菜单消失并通过再次单击父项重新激活。

因此，我希望子菜单在转到子页面后保持可见，然后在第一个实例之后继续使用原始功能。奇迹般地，我已经成功地走到了这一步。

您可以在此处查看工作菜单/子菜单：http: [//goo.gl/MC8Aw](http://goo.gl/MC8Aw)

我将此代码添加到 UberMenu.dev.js：

```
jQuery('document').ready( function($){
    var id = $( '#megaMenu ul.megaMenu > li.current-menu-item, #megaMenu ul.megaMenu > li.current-menu-parent, #megaMenu ul.megaMenu > li.current-menu-ancestor' ).live().first().attr( 'id' );
    uberMenu_openMega( '#' + id );
}); 
```

您可以在此处查看整个 .js 文件：http: [//goo.gl/xZd6g](http://goo.gl/xZd6g)

好吧，唯一的问题是当子页面加载并且子菜单被上面的代码立即触发时，它会保留主要功能的幻灯片过渡。这为我想要避免/最小化的子菜单提供了延迟的外观/体验。

是否可以修改上面的代码（似乎已经设置为只影响菜单的第一次出现），以便它也忽略插件其余部分所需的幻灯片转换？

# unix - 按相同出现次数对列进行排序 - 使用 awk、sort、tr 还是 uniq？

> ID：14763975
> 
> 赞同：1
> 
> 时间：2013-02-08T00:53:15.157
> 
> 标签：unix, sorting, awk, tr, uniq

假设我有一些制表符分隔的数据：

```
Peter   5
Joe     8
Peter   7
Peter   8
Joe     4
Laura   3 
```

我想按名称在第一列中出现的次数（最大到最小）对其进行排序，所以我们有彼得（3 次出现）乔（2 次出现）和劳拉（1 次出现）。

```
Peter   5
Peter   7
Peter   8
Joe     8
Joe     4
Laura   3 
```

它只需要按第一列排序，而不是第二列。我一直在阅读 sort 的文档，但我认为它没有这个功能。谁有简单的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T01:06:46.303

不性感，但适用于您的示例：

```
 awk  'NR==FNR{a[$1]++;next}{ print a[$1],$0}' file file|sort -nr|sed -r 's/[0-9]* //' 
```

用你的数据测试：

```
kent$  cat n.txt
Peter   5
Joe     8
Peter   7
Peter   8
Joe     4
Laura   3

kent$  awk  'NR==FNR{a[$1]++;next}{ print a[$1],$0}' n.txt n.txt|sort -nr|sed -r 's/[0-9]* //'
Peter   8
Peter   7
Peter   5
Joe     8
Joe     4
Laura   3 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T01:22:39.830

这有效：

```
for person in $(awk '{print $1}' file.txt | sort | uniq -c | sort -dnr | awk '{print $2}');
do grep -e "^$person[[:space:]]" file.txt;
done 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T03:06:33.747

这是使用`GNU awk`. 像这样运行：

```
awk -f script.awk file 
```

内容`script.awk`：

```
BEGIN {
    FS="\t"
}

{
    c[$1]++
    r[$1] = (r[$1] ? r[$1] ORS : "") $0
}

END {

    for (i in c) {
        a[c[i],i] = i
    }

    n = asorti(a)

    for (i=1;i<=n;i++) {
        split(a[i], b, SUBSEP)
        x[++j] = b[2]
    }

    for (i=n;i>=1;i--) {
        print r[x[i]]
    }
} 
```

结果：

```
Peter   5
Peter   7
Peter   8
Joe     8
Joe     4
Laura   3 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T05:06:05.900

这是一个令人惊讶的硬排序标准。这段代码有效，但非常难看：

```
data=${1:-data}
awk '{ print $1 }' $data |
sort |
uniq -c |
sort -k2 |
join -1 2 -2 2 -o 1.1,2.1,2.2,2.3 - <(awk '{ print NR, $0 }' $data | sort -k2) |
sort -k1,1nr -k3,3 -k2n |
awk 'BEGIN{OFS="\t"} { print $3, $4 }' 
```

它假定`bash`4.x 用于“进程替换”，但不使用内置的任何排序`awk`（与 POSIX 相比，这是 GNU 扩展`awk`）。使用显式临时文件，它可以在没有进程替换的情况下在 shell 中工作。

```
data=${1:-data}                  # File named on command line, or uses name 'data'
awk '{ print $1 }' $data |       # List of names
sort |                           # Sorted list of names
uniq -c |                        # Count occurrences of each name
sort -k2 |                       # Sort in name order
join -1 2 -2 2 -o 1.1,2.1,2.2,2.3 - <(awk '{ print NR, $0 }' $data | sort -k2) |
# The process substitution numbers each record in sequence and sorts in name order
# The join matches the names (column 2) and outputs the frequency, record number, name, value
sort -k1,1nr -k3,3 -k2n |        # Sort on frequency reversed, name, original line number
awk 'BEGIN{OFS="\t"} { print $3, $4 }'   # Print name and value 
```

`awk`使用带有内置排序的GNU ，或者 Perl 或 Python，可能比这更好。

对于原始数据，输出为：

```
Peter   5
Peter   7
Peter   8
Joe     8
Joe     4
Laura   3 
```

鉴于此数据的扩展版本：

```
Peter   5
Joe     8
Peter   7
Peter   8
Joe     4
Laura   3
Peter   50
Joe     80
Peter   70
Peter   80
Joe     40
Laura   30
Peter   700
Peter   800
Peter   7002
Peter   8002
Peter   7000
Peter   8000
Peter   7001
Peter   8001
Pater   50
Jae     80
Pater   70
Pater   80
Jae     40
Laura   30 
```

输出是：

```
Peter   5
Peter   7
Peter   8
Peter   50
Peter   70
Peter   80
Peter   700
Peter   800
Peter   7002
Peter   8002
Peter   7000
Peter   8000
Peter   7001
Peter   8001
Joe     8
Joe     4
Joe     80
Joe     40
Laura   3
Laura   30
Laura   30
Pater   50
Pater   70
Pater   80
Jae     80
Jae     40 
```

该`-k3,3`数据集需要排序项；它在 Pater 的条目之前对 Laura 的条目进行排序（如果省略，则这两个列表交错排列）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-08T05:15:54.353

这是另一个使用 awk 的：

> awk '{ a[ $1, ++b[$1] ]=$0 ; 如果(b[$1]>max) 最大=b[$1] }
> 
> ```
>  END{ for(x=max;x>=1;x--)
>          for( k in b )
>            if( a[k,x] )
>               for(y=1;y<=x;y++) {
>                     print a[k,y]
>                     delete a[k,y]
>                }
>    }' filename 
> ```

它适用于 gawk 和 POSIX awk。END 语句中存在三个循环可能会影响大文件的性能。

# asp.net-mvc - 如何在查看函数导入复杂结果或存储过程中显示？

> ID：14763978
> 
> 赞同：0
> 
> 时间：2013-02-08T00:53:30.827
> 
> 标签：asp.net-mvc, entity-framework, stored-procedures

我正在寻求有关 MVC 和实体框架的帮助。我已将一个存储过程导入到我的实体框架中，它返回一个复杂名称结果的集合。

如何调用复杂结果并将其绑定到视图页面？使用普通表导入模型，我可以遍历页面并引用模型

```
@model IEnumerable<Project.Models.ImportedTableName> 
```

但是当我说

```
@model IEnumerable<Project.Models.ComplexName_Result> 
```

我收到一个错误

```
The model item passed into the dictionary is of type 'System.Collections.Generic.List`1[Project.Models.ImportedTableName]', but this dictionary requires a model item of type 'System.Collections.Generic.IEnumerable`1[Project.Models.ComplexName_Result]'. 
```

有什么建议吗？提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T07:35:45.917

您需要将正确的模型类型传递给视图。由于您的视图是强类型`IEnumerable<Project.Models.ComplexName_Result>`的，因此您应该从控制器操作传递给它：

```
public ActionResult SomeAction()
{
    IEnumerable<Project.Models.ComplexName_Result> model = ...
    return View(model);
} 
```

# php - 如何在 PHP 中访问 MongoDB 配置文件？

> ID：14763979
> 
> 赞同：1
> 
> 时间：2013-02-08T00:53:31.267
> 
> 标签：php, mongodb

我正在尝试使用在 mongo 客户端中使用的相同查询来访问 PHP 中的 MongoDB 分析器：

```
$db = $mongo->selectDB('myapp_db');
$array = $db->execute('return db.system.profile.find();');
echo '<pre>' . print_r($array, true); 
```

但我明白了：

```
Array
(
    [retval] => Array
        (
            [value] => DBQuery: myapp_db.system.profile -> undefined
        )

    [ok] => 1
) 
```

分析已启用并在客户端中正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T01:17:24.347

方法[MongoDB::setProfilingLevel](http://www.php.net/manual/en/mongodb.setprofilinglevel.php) — 设置此数据库的分析级别

```
<?php

$dbname = 'students';
$mongo = (new MongoClient());
$db = $mongo->$dbname;

# 0 (off), 1 (queries > 100ms), and 2 (all queries)
$db->setProfilingLevel(2);

# …
# Some queries 
# …

$response = $db->system->profile->find();
foreach ($response as $query) {
    print_r($query);
} 
```

还：

*   方法 [MongoDB::getProfilingLevel](http://www.php.net/manual/en/mongodb.getprofilinglevel.php) — 获取此数据库的分析级别
*   方法[MongoCursor::explain](http://php.net/manual/en/mongocursor.explain.php) — 返回查询的解释，通常对优化和调试有用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T21:23:22.740

当您可以使用 PHP 本身时，无需在 JavaScript 中执行查询，这会阻塞服务器/数据库：

```
$mongo = new MongoClient();

// Alternatively, use selectCollection from $mongo->myapp_db
$collection = $mongo->selectCollection('myapp_db', 'system.profile');

foreach ($collection->find() as $document) {
   print_r($document);
} 
```

这可以更有效地利用内存，因为您可以遍历结果而不是在单个数组中获取整个[MongoDB::execute()响应。](http://www.php.net/manual/en/mongodb.execute.php)

此外，您的原始代码从 JavaScript 返回游标（一个 DBQuery 对象）。为了确保与其他驱动程序的兼容性，您应该在返回之前调用[cursor.toArray() 。](http://docs.mongodb.org/manual/reference/method/cursor.toArray/)这在 Sammaye 对类似问题的回答中进行了[讨论](https://stackoverflow.com/questions/15552991/executing-mongodb-find-queries-in-php#comment22045776_15552991)。

# xcode - xCode 在调试时执行随机操作

> ID：14763983
> 
> 赞同：0
> 
> 时间：2013-02-08T00:53:40.850
> 
> 标签：xcode, debugging, random

我正在调试一些代码，并注意到 xCode 做了一些随机的事情：

1）有一个`if`块我绝对确定我的程序不应该进入，但出于某种原因它确实如此。

2）当我在该块内放置一个断点时`if`，执行就停在那里（如预期的那样），但是如果我使用“跳过”按钮，程序来回移动，然后进入下一个`else if`块。

代码：

```
 if(self.position.x > 1.0 * firstPage * kAdvance)
        power = (self.position.x - firstPage * kAdvance) / 20.0;
    else if(self.position.x < 1.0 * lastPage * kAdvance)
        power = (self.position.x + lastPage * kAdvance) / 20.0;` 
```

（firstPage、lastPage 和 kAdvance 是`int`）

有什么问题？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T17:12:58.507

解决了

Rofl，这个问题真的很愚蠢：

几天前我正在玩我的计划，并将所有内容设置为“释放”。

我的错。我将分析、测试和运行设置回调试，现在它可以正常工作了。

# javascript - 如何使用 Backbone.js 增强多语言网站导航？

> ID：14763985
> 
> 赞同：8
> 
> 时间：2013-02-08T00:53:47.030
> 
> 标签：javascript, backbone.js, internationalization, seo, friendly-url

我有一个多语言网站，显示几个（十几个）内容页面，漂亮的网址如下：

```
example.com              <- home for default language (french)
example.com/biographie   <- page 1
example.com/en           <- home for english language
example.com/en/biography <- page 1 english translation 
```

我想将页面合并在一起并提供完整的 ajax 导航，就像[Pitchfork](http://pitchfork.com/)所做的那样。最重要的是保留非 JavaScript 客户端（SEO、社交网络和其他）的页面视图。

服务器提供完整的网页，然后在 Backbone 初始化时，它会预取其他页面并将其注入 DOM 以加快导航速度。当我导航到另一个页面时，我使用 Backbone 内置的 History API 在历史记录中记录新 URL，并更改视图以显示请求的页面。

```
var Navigator = Backbone.Router.extend({

  routes: {
    "*page":                "showPage",
  },

  showPage: function(page) {
    this.pages[page].show();
  }

} 
```

我遇到的问题是管理 i18n（我的意思是翻译页面）。如何设置我的路由器来处理语言？我应该如何处理语言切换？

```
routes: {
  "*page":                "showPageFr",
  "en/*page":             "showPageEn",
},

showPageFr: function(page){
  showPage(page, 'fr');
},

showPageEn: function(page){
  showPage(page, 'en');
},

showPage: function(page, lang) {
  // How should I manage 'lang' parameter here ?
  this.pages[page].show();
} 
```

我查看了 i18n JS 框架，但我认为我不需要它，因为我想翻译整个页面内容，而不是一些 UI 元素。所有翻译部分都在服务器端进行管理。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T16:28:08.687

感谢 DashK 把我带到了好路上。解决方案是在检测到英语时更改历史根。

```
var Router = Backbone.Router.extend({
    language: null,

    initialize: function(options){

        this.language = options.language;
        Backbone.history.start({pushState: true, root:'/'+ (this.language ? this.language : '')});
    },

    routes: {
        ":chapter(/*subpage)": "go",
        "" : "go" // match home route
    },

    go: function(chapter, subpage) {

    }
});

// wait for the document to be ready
$(function(){
    var lang;
    if($.url().segment(1) === 'en') { lang = 'en'; }

    new Router({language: lang});
}); 
```

`router.navigate("some-chapter")`然后，当我在代码中使用时，我不必关心语言。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-08T22:40:31.847

首先，这是您可以设置路由器以使其保持清洁的方法，希望如此。

您已经`BaseRouter`可以为法语提取内容，如果您想添加其他语言，则必须`BaseRouter`使用不同的语言代码覆盖。（见`EnglishRouter`）

```
// This is the base Router
var BaseRouter = Backbone.Router.extend({
    language: null,
    routes: {
        '*page': 'showPage'
    },

    _bindRoutes: function() {
        // this._bindRoutes() is called in Backbone.Router before
        // initialize(). Overriding native _bindRoutes method to
        // accomodate the custom logic in changing route.
        var me = this;

        if (this.language) {
            console.log('Updating routes for ' + this.language);

            _.each(_.keys(this.routes), function(key) {
                me.routes[me.language + '/' + key] = me.routes[key];
                delete me.routes[key];
            });
        }

        // Call native _bindRoutes method.
        Backbone.Router.prototype._bindRoutes.apply(this, arguments);
    },

    getLanguage: function() {
        return this.language || 'fr';
    },

    showPage: function(page) {
        console.log('Showing ' + page + ' in ' + this.getLanguage());
    }
});

var EnglishRouter = BaseRouter.extend({
    language: 'en'
}); 
```

这是与之配套的小提琴：http: [//jsfiddle.net/dashk/yTS33/](http://jsfiddle.net/dashk/yTS33/)

在为不同页面制定内容策略方面 - 根据您所描述的内容（所有内容而不是正常的特定字符串），可以选择单个字典。（虽然我不认为它很优雅。）但是，当您向网站添加更多语言时，您可能需要考虑根据需要动态加载语言，而不是仅仅将所有语言放在一个文件中。

这是字典的示例：

```
var PageContent = {
    'fr': {
        'happyPage': 'Happy Page Content in French',
        'fridayPage': 'Friday page Content in French'
    },
    'en': {
        'happyPage': 'Happy Page Content in English',
        'fridayPage': 'Friday page Content in English'
    }
}; 
```

# php - php从文本区域读取字符串

> ID：14763991
> 
> 赞同：0
> 
> 时间：2013-02-08T00:54:29.407
> 
> 标签：php, string, textarea

```
$data = explode("\n", trim($_GET['names']));
while($i < count($data)) {
  if(!in_array($data[$i], $unique_names)){
    $unique_names[] = $names[$i];
   }
   $i = $i + 1;
 } 
```

我正在尝试使用此 php 代码仅接受来自 textarea 的唯一结果。它不起作用，因为每个字符串都有一个额外的空格，除了最后一个。

即“杰夫”“弗雷德”“比尔”“杰夫”

所以杰夫将被添加两次。

我的问题是：我如何摆脱那个空间？我试过修剪，它不会按预期执行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T00:57:21.503

用于`trim(string)`从开头和结尾删除空格。[http://php.net/manual/en/function.trim.php](http://php.net/manual/en/function.trim.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T01:03:57.457

首先，您不需要手动查找唯一值，您可以使用`array_unique()`. 其次，`trim()`不适用于数组。

尝试：

```
$raw_names = explode("\n", $_GET['names']);
$trimmed_names = array_map('trim', $raw_names);
$unique_names = array_unique($trimmed_names); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-08T01:03:15.697

灵感来自[kba](https://stackoverflow.com/users/453331/kba)：

```
$data = explode("\n", trim($_GET['names']));
foreach ($data as &$e) {
    $e = trim($e);
}
$unique_names = array_unique($data); 
```

# iphone - 添加 eventViewController 不显示任何内容

> ID：14763993
> 
> 赞同：0
> 
> 时间：2013-02-08T00:54:42.027
> 
> 标签：iphone, ios, objective-c, ipad, eventkit

我目前正在研究应用程序的议程部分。我设法展示了我的所有活动，并从中找到了详细信息并进行了编辑。但是当我想添加一个事件时，它会显示一个空视图。我应该提到我的日历有一个自定义数据源。

要编辑事件，我只需在我的 ViewController 中执行此操作。

```
 EKEventViewController *vc = [[EKEventViewController alloc] init];
        vc.event = [dataSource eventAtIndexPath:indexPath];
        vc.allowsEditing = YES;
       [calendar.navigationController pushViewController:vc animated:YES]; 
```

这向我展示了具有正确事件的正确 VC。现在这是我添加事件的代码。

```
EKEventEditViewController *addController = [[EKEventEditViewController alloc]init];

    // set the addController's event store to the current event store.
    addController.eventStore = self.eventStore;
    addController.editing = YES;
    // present EventsAddViewController as a modal view controller
    [self presentModalViewController:addController animated:YES];

    addController.editViewDelegate = dataSource; 
```

但是当我运行它时，我得到一个空的 viewController。有人可以帮我吗？

亲切的问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T01:53:14.250

我猜你没有创建事件存储。我查看了 Apple 的演示程序，我可以消除除 4 行之外的所有内容，并且仍然可以显示该编辑控制器：

```
#import <EventKitUI/EventKitUI.h>

@implementation ViewController

-(IBAction)doStuff:(id)sender {
    EKEventEditViewController *addController = [[EKEventEditViewController alloc]init];
    addController.eventStore = [[EKEventStore alloc] init]; 
    [self presentViewController:addController animated:YES completion:nil];

} 
```

# javascript - Javascript 数组到句子

> ID：14763997
> 
> 赞同：14
> 
> 时间：2013-02-08T00:55:06.223
> 
> 标签：javascript, jquery

如何在 Javascript 中转换数组，例如`["Susy", "John", "Mary"]`to ？`"Susy, John, and Mary"`我无法摆脱 Ruby 的 to_sentence 方法。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2018-12-05T22:10:35.617

使用最新的 JavaScript (Chrome 72+):

```
new Intl.ListFormat().format(["Susy", "John", "Mary"]); 
```

这将导致：

```
"Susy, John, and Mary" 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-02-08T00:59:25.840

加入除最后一项之外的所有项目，然后添加：

```
var s = arr.slice(0, arr.length - 1).join(', ') + ", and " + arr.slice(-1); 
```

演示：http: [//jsfiddle.net/JYKcK/1/](http://jsfiddle.net/JYKcK/1/)

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2014-02-20T14:24:31.063

使用 的另一个选项`Array.prototype.reduce`是：

```
var arr = [1,2,3];
arr.reduce(
  function(prev, curr, i){ 
    return prev + curr + ((i===arr.length-2) ? ' and ' : ', ')
  }, '')
.slice(0, -2); 
```

产生`"1, 2 and 3"`.

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-04-12T05:56:20.683

这其中有几个额外的案例：

1.  我们想在“和”之前有一个逗号吗（Oxford Comma）
2.  无论哪种方式，如果只有 2 个元素，我们不想要逗号
3.  如果只有 1 个元素，我们只希望返回那个词

我认为这适合所有这些用例：

```
function joinSentence( array, oxford_comma ){
  if( array.length > 1 ){
    var lastWord = " and " + array.pop();
    if( oxford_comma && array.length > 1 ){
      lastWord = "," + lastWord;
    }
  }else{
    var lastWord = "";
  }
  return array.join(", ") + lastWord;
} 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2014-06-24T01:14:01.417

```
toSentence = function(arr){ return arr.join(", ").replace(/,\s([^,]+)$/, ' and $1');};

toSentence(['dogs', 'cats']);           // => dogs and cats

toSentence(['dogs', 'cats', 'snakes']); // => dogs, cats and snakes 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-02-08T01:22:54.653

另一个解决方案：

```
(function(a) {
    var b = (a||(a=[])).pop(); 
    return (b ? a.length ? [a.join(", "),b] : [b] : a).join(" and ");
})(["Susy", "John", "Mary"]); 
```

或者只是在数组的原型中定义类似 ruby​​ 的语句方法：

```
Array.prototype.sentence = function(comma,and) {
    var b = this.pop();
    return (b ? this.length ? [this.join(comma||", "),b] : [b] : this).join(and||" and ");
};

["Susy", "John", "Mary"].sentence(); 
//"Susy, John and Mary"

["Susy", "John", "Mary"].sentence(" and ", " as well as "); 
//"Susy and John as well as Mary"

["Susy", "John", "Mary", "Helmut"].sentence(); 
//"Susy, John, Mary and Helmut" 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-02-08T01:01:17.457

修改最后一个然后加入

```
var source = ["Susy", "John", "Mary"];
source.push( 'and ' +source.pop());
console.log(source.join(', '))// Susy, John, and Mary 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-02-08T01:01:24.273

试试看：

```
var array = ['susy', 'john', 'mary'];
var last = array.pop();
var string = array.join(', ') + " and " + last; 
```

我没试过，但你应该明白

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-02-08T00:56:28.690

您可以使用 .join() 并在最后一个值前面加上“and”

```
var array = ['susy', 'john', 'mary'];

array[array.length-1] = 'and '+array[array.length-1];

//string is "susy, john, and mary"
var string = array.join(', '); 
```

* * *

## 回答 #10

> 赞同：-2
> 
> 时间：2013-02-08T00:57:24.377

```
var arr = ["Susy", "John", "Mary"];
var str = arr.join(", "); 
```

# html - 将html文本区域限制为mx长度？

> ID：14763998
> 
> 赞同：-2
> 
> 时间：2013-02-08T00:55:07.787
> 
> 标签：html

我有一个 html 文本区域，格式如下：

```
<form>
<input type="textarea" maxlength="20">
</form> 
```

我已将字符数限制为 20，但是用户仍然可以在表单文本区域中的字符之间使用过多的间距和中断。

基本上我在文本区域的右下角有一个按钮，我限制字符长度的全部目的是让文本不会溢出并越过按钮。

我不想使用填充或溢出：隐藏，因为这不是我想要做的。但是有没有办法可以限制文本区域中的字符数，包括间距？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T03:18:32.030

`<textarea name='text' style="max-width:20px;" placeholder='write text here'></textarea>`
你应该检查标签的`rows`和`cols`属性`<textarea>`