# StackOverflow 问答 15102000-15102999

# jquery - Jquery Select2，如何在 on(change) 函数中访问 ajax 数据？

> ID：15102000
> 
> 赞同：9
> 
> 时间：2013-02-27T00:20:32.787
> 
> 标签：jquery, jquery-select2

我将 Select2 与 ajax 一起使用。一切正常，当用户单击他们想要的项目时，我使用文档指定的 on(change) 函数来做一些事情。

```
 $("#e6").on("change", function(e) {          
        $('input#Destination').val(e.val); 
          });

}); 
```

返回值（e.val）是来自 ajax 调用的**data.id值，但我的数据对象有“** **name** ”、“ **id** ”和“ **type** ”。

我可以向 dataFormatSelection() 添加代码，但这听起来不合逻辑并且令人困惑。

```
 function dataFormatSelection(data) {
    console.log(data.name + "|" data.id + "|" + data.type);
     return data.name;
 } 
```

如何在 on("change".. 事件中访问整个**数据**对象（而不仅仅是**data.id ）？**

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-14T07:33:14.123

```
$("#e6").on('change', function(e) {
    // Access to full data
    console.log($(this).select2('data'));
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T21:56:14.387

根据[Select2 文档](http://ivaynberg.github.com/select2/)，更改事件应具有 3 个属性：事件对象包含以下自定义属性：

*   val：当前选择（考虑到更改的结果）- id 或 ids 数组
*   added：添加的元素，如果有的话 - 完整的元素对象，而不仅仅是 id
*   移除：移除的元素，如果有的话 - 完整的元素对象，而不仅仅是 id

甚至还有例子：

```
$("#e11").select2({
    placeholder: "Select value ...",
    allowClear: true,
    data: [{id: 0, text: 'story'},{id: 1, text: 'bug'},{id: 2, text: 'task'}]
});

$("#e11_2").select2({
    placeholder: "Select value ...",
    multiple: true,
    data: [{id: 0, text: 'story'},{id: 1, text: 'bug'},{id: 2, text: 'task'}]
});

$("#e11").on("change", function(e) { 
    console.log(JSON.stringify({val:e.val, added:e.added, removed:e.removed})); 
}).on("open", function() { 
    console.log("open"); 
});

$("#e11_2").on("change", function(e) { 
    console.log(JSON.stringify({val:e.val, added:e.added, removed:e.removed})); 
}).on("open", function() { 
    console.log("open"); 
}); 
```

但我注意到只有在打开时才会出现`added`和`removed`属性`multiple: true`。我不知道这是设计使然还是错误。无论如何，我都会报告它，因为绝对需要在更改时使用选定的元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-27T04:47:42.260

我有疑问...如何获取控制台日志中显示的值并使用它？

如果我采用这些值并将每个值放入一个var中是正确的吗？因为如果我对创建的任何 var 使用 console.log(var) ，则会显示该值，但如果执行 alert(var) 则永远不会显示警报。

我需要使用 AJAX 调用 PHP 函数所选择的选项的值。

```
$("#e11").on('change', function(e) {
   //I create a var data and works it like an Array
   var data = $(this).select2('data');
   //Then I take the values like if I work with an array
   var value = data.id;
   var text = data.text;
   //If I use console.log(var) the values are displayed but not with an alert
} 
```

谢谢！！！

# internet-explorer-8 - 在页面上加载 IE 8 上的下载链接，而不是打开保存/另存为对话框

> ID：15102002
> 
> 赞同：0
> 
> 时间：2013-02-27T00:20:45.653
> 
> 标签：internet-explorer-8, download, content-type

在包含文件链接的页面上工作，例如 doc、excel、PDF。

在 IE 8 上，如果用户单击链接（例如`www.examplesite.com/files/somefile.doc`），页面开始从链接加载 URL，并打开保存对话框。此行为在 IE 9 和 Firefox 中不存在。浏览器只需打开一个保存对话框，无需离开初始页面。

我不希望浏览器加载下载链接并离开初始页面。用户访问。我找到的一种解决方案是`target='blank'`在链接上添加一个属性。但这会打开一个新窗口，这很好，但不是我想要的最佳解决方案。

有什么方法可以模仿 IE 8 中的相同行为，使用户能够在不离开当前页面的情况下打开对话。

Firefox 中捕获的 Http 标头响应如下所示。

```
HTTP/1.1 200 OK
Content-Type: application/msword
Last-Modified: Thu, 21 Feb 2013 17:29:08 GMT
Accept-Ranges: bytes
Content-Length: 556544 
```

# java - 如何使用回调在 java 中实现发布/订阅。我必须使用 JMS 吗？

> ID：15102004
> 
> 赞同：0
> 
> 时间：2013-02-27T00:20:59.883
> 
> 标签：java, jms, publish

我需要从网上获取信息并在我的应用程序中使用它。我必须制作一个服务器和一个从我的服务器获取信息的客户端。服务器必须从网络上检索信息。如果我必须使用 JMS，你们有任何示例项目吗？

# c# - 在每次调用中重用或创建 Analyzer、IndexSearcher、IndexWriter 更好吗？

> ID：15102007
> 
> 赞同：4
> 
> 时间：2013-02-27T00:21:45.297
> 
> 标签：c#, .net, lucene, lucene.net

我是一个 Lucene.net 新手，并试图[从这里调整搜索代码，](http://www.codeproject.com/Articles/320219/Lucene-Net-ultra-fast-search-for-MVC-or-WebForms)这基本上会在每个方法中创建一个新的`Analyzer`,`IndexSearcher`和`IndexWriter`对象，并且只有 FSDirectory 对象被重用。

**问题：**这里有推荐的最佳实践来重用这些对象吗？

Lucene.Net 优化的先前结果是多年前的结果，根据个人经验，Lucene.Net 库已经改变：下载示例并使用 3.0.3 编译它们在不更改代码的情况下无法正常工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T04:31:24.683

来自官方 wiki 的[BestPractices](http://wiki.apache.org/lucene-java/BestPractices)怎么样？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T20:14:00.283

在我们的项目中，我们重用`Analyzer`并将其注入预定义`Version`的`IndexWriter`和`IndexReader`。建议`Analyzer`索引和搜索时相同，因此至少该模式适用。

由于最后两个是实际 Lucene 索引访问的包装器，因此每次使用它们时都需要实例化一个索引流，并且重用它们几乎没有意义，因为它们会阻塞并发调用（`read`s 和`write`s）。

[这个项目](http://codeclimber.net.nz/archive/2010/02/26/lucene.net-is-powering-subtext-2.5-search.aspx)中有一些“最佳实践”和模式可供您利用。

# reporting-services - 使用可选的多值文本框作为数据集过滤器

> ID：15102010
> 
> 赞同：3
> 
> 时间：2013-02-27T00:22:16.807
> 
> 标签：reporting-services, optional-parameters

我有一份报告，它返回产品名称和其他产品规格列表。该报告目前有不同的搜索选项。我的用户现在还希望能够通过输入多个产品编号来按产品编号进行搜索。

如何按产品编号添加过滤器，这是可选的多值文本框？我试图添加一个多值文本框。当没有输入值时，报告似乎不起作用。如果我在文本框中输入一个或多个产品编号，它似乎可以正常工作。有没有办法告诉报告没有过滤 Null 值参数？或者任何其他使用可选多值参数的想法？

这是我的多值文本框的设置

```
 Name = ProductNumber
    Prompt = Product Number
    Data Type = Text
    Allow Blank Value (checked)
    Allow Null value (not checked)
    Allow Multiple Values (checked) 
```

这是数据集过滤器

```
 Expression = [ProductNumber]
    Operator = In
    Value = [@ProductNumber] 
```

谢谢

TL

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T09:27:37.463

我认为您应该通过以下方式欺骗数据集过滤器：

1.  表达式应该检查参数是否为空，如果是，则给表达式 1 否则字段。
2.  值应该进行相同的检查，如果参数为空白，则将值设置为 1，否则将其设置为参数。

但请保留您的运营商。

* * *

或者，您可以在 SQL 中类似地执行此操作，并且具有更大的灵活性和性能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T09:31:48.517

因此，正如您在自己的测试中看到的那样，必须使用多值参数选择至少一个值。您不能`Allow null value`在设计时设置为 true，如果您在未选择任何值的情况下运行报告，则会引发错误消息。

因此，您不能真正拥有一个报告，用户可以在不选择任何值的情况下运行它。

退后一步，您在忽略参数时试图实现的是默认包含所有*产品编号*。那么为什么不将参数设置为选择所有*产品编号*的默认值呢？这样，如果用户不想按*Product Numbers*过滤，他们可以忽略并全部勾选。对我来说似乎是一个很好的解决方法。

为此，请使用填充参数的相同数据集设置参数的默认值：

![在此处输入图像描述](../Images/2f2100dd566470213111ef6944d291a8.png)

现在选择了所有*产品编号，用户只需要在他们想要返回其中的一个子集时采取行动。*

# java - 根据输入答案对学生的测试进行评分

> ID：15102023
> 
> 赞同：-4
> 
> 时间：2013-02-27T00:23:55.260
> 
> 标签：java, arrays, for-loop, while-loop, user-input

我今天早些时候曾问过有关该程序的问题，并且能够完成我需要完成的大部分工作，但似乎人们不再关注它了， [这是](https://stackoverflow.com/questions/15100873/grading-a-students-test-based-on-user-input-answers)它的链接。

这是我现在拥有的：

```
import java.util.*;
import java.text.*;

public class Lab4 {
public static void main(String[] args){
    Scanner s= new Scanner(System.in);
    String input;
    int students;
    int correctAnswers=0;

    char [] answerKey= { 'B' , 'D' , 'A' , 'A' , 'C' , 'A' , 'B' , 'A' , 'C' , 'D' , 'B' , 'A' };
    char [] userAnswers = new char[answerKey.length];

    DecimalFormat df = new DecimalFormat("#0.0");

    System.out.print("how many students are in your class?");
    input = s.nextLine();
    students=Integer.parseInt(input);

    String [] name = new String[students];

    int j=1;
    while(students>=j)
    {
        System.out.print("Enter name of student" + j + ": ");
        name[j] = s.nextLine();

        System.out.print("Enter quiz score answers");
        userAnswers[answerKey.length] = s.next().charAt(0);

        for (int i = 0; i < userAnswers.length; ++i)
        {
            if(userAnswers[i]==answerKey[i]);
            correctAnswers++;
        }

        System.out.print((df.format(correctAnswers/answerKey.length)) + "%");
    j++;

    }

}

    } 
```

但是在输入用户的答案后，我不断收到此错误：

> 线程“main”中的异常 java.lang.ArrayIndexOutOfBoundsException: 12 在 Lab4.main(Lab4.java:29)

我不确定这意味着什么或如何解决它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T00:26:29.323

这意味着您的数组索引可能超过数组中的元素数。从您的代码中，您似乎展示了一个[Off-by-one error](http://en.wikipedia.org/wiki/Off-by-one_error)。请注意，Java 数组是从零开始的，即数组索引以 0 开始并以`array.length - 1`.

（注意：未经测试的代码，我已经`Scanner`好几个月没有使用了......）

改变

```
int j=1;
while(students>=j) 
```

到

```
int j = 0;
while (students > j) 
```

而且，这条线

```
userAnswers[answerKey.length] = s.next().charAt(0); 
```

这是一个逻辑错误。不仅是根据@Creakazoid 的答案写入越界，即使它是固定的，您也会将所有答案写入数组的最后一个元素，这意味着您将所有学生的答案作为用户的最后一个字符输入。

~~这应该是~~

 ~~```
for (int i = 0; i < answerKey.length; ++i) {
    userAnswers[i] = s.next().charAt(0);
} 
```~~  ~~**编辑：**看起来您需要阅读一行充满答案的输入。因此，阅读整行，然后将行分成字符。（未经测试）

```
String line = s.nextLine();
for (int i = 0; i < answerKey.length; ++i) {
    userAnswers[i] = line.charAt(i);
} 
```

此外，

```
if(userAnswers[i]==answerKey[i]); 
```

注意到行尾的分号了吗？您正在编写一个空语句（由分号组成）并且`correctAnswers++;`无论此条件是否为真都会运行

将其更改为

```
if (userAnswers[i] == answerKey[i]) 
```

你可能需要改变

```
System.out.print("Enter name of student" + j + ": "); 
```

到

```
System.out.print("Enter name of student" + (j + 1) + ": "); 
```

这样输出不受影响，虽然

* * *

实际上，您的 while 循环可以替换为 for 循环 - 它更易于阅读：

```
for (int j = 0; j < students; ++j) {
    // .. your code
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T00:30:23.533

```
userAnswers[answerKey.length] = s.next().charAt(0); 
```

数组索引是从零开始的，所以最后一个可寻址索引是`answerKey.length - 1`.~~

# iis-7 - 如何在 IIS 中添加服务器变量

> ID：15102024
> 
> 赞同：4
> 
> 时间：2013-02-27T00:23:55.270
> 
> 标签：iis-7

我对 IIS7 不是很熟悉，我需要创建一个服务器变量，以便可以在我的 PHP 代码中访问它。我可以通过使用以下方法在 Apache 中轻松完成此操作：

SETENV 变量名变量值

在 .htaccess 文件中。然而，在 IIS 中实现这一点似乎有点秘密。我已经在网上查找了信息，并且使用以下步骤使用 URL 重写模块可以找到最接近的状态：

1.  单击查看服务器变量
2.  单击添加链接并输入变量名称
3.  返回规则并单击查看重写映射
4.  单击添加重写映射并输入默认值。
5.  重新启动了服务器。

完整文档可在以下位置找到：[http ://www.iis.net/learn/extensions/url-rewrite-module/setting-http-request-headers-and-iis-server-variables](http://www.iis.net/learn/extensions/url-rewrite-module/setting-http-request-headers-and-iis-server-variables)

我跟着那个，但它仍然不起作用。任何想法如何做到这一点？甚至可以在 IIS 中执行此操作吗？我要做的就是设置一个具有静态值的服务器变量。

示例：$_SERVER['MY_VARIABLE']

谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-01-14T17:09:34.773

在 IIS 管理器中单击您的计算机，从“IIS”图标组中打开“URL 重写”图标。

在“操作”下（在最右边）单击无害的小“查看服务器变量”链接，忽略“管理服务器变量”

在“查看服务器变量”屏幕的“操作”（在最右侧）中，单击“添加...”

[![在此处输入图像描述](../Images/9a306299264687139a6293e655d0f10b.png)](https://i.stack.imgur.com/DbG6q.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T21:47:46.127

我通过使用 PHP auto_prepend_file 指令解决了这个问题。更多信息可以在这里找到：[http ://www.php.net/manual/en/ini.core.php#ini.auto-prepend-file](http://www.php.net/manual/en/ini.core.php#ini.auto-prepend-file)

只需创建一个将所需值添加到 $SERVER 数组的文件，将其设置为 auto_prepend_file 即可。这适用于任何服务器，而不仅仅是 IIS。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2021-06-19T19:32:39.917

其他答案显然有效，但似乎比我发现的方式更混乱。

转到 FastCGI 设置，您在其中配置了 PHP exe（根据原始问题）

右键单击...\php-cgi.exe，选择“编辑” [![如果您在 IIS 上使用 PHP，则必须在此之前进行设置...](../Images/a9e22e67f7af5bc84896e0d980117b29.png)](https://i.stack.imgur.com/NIhKr.png)

然后选择“环境变量”旁边的省略号

[![这里是隐藏魔法的地方！](../Images/bf0b2c110f36a52ab8ef2af835fcc8b5.png)](https://i.stack.imgur.com/DOR7X.png)

然后您可以单击添加/删除并编辑您的变量。

[![添加/删除变量](../Images/6c416903bd891961ec6aa4d82e18bde9.png)](https://i.stack.imgur.com/QqQw9.png)

# java - 如何将参数传递给 BroadcastReceiver 的子类？

> ID：15102028
> 
> 赞同：13
> 
> 时间：2013-02-27T00:24:27.887
> 
> 标签：java, android, broadcastreceiver, android-audiomanager

我设法让我的[耳机按钮](https://stackoverflow.com/q/15057291/636571)在按下时被我的应用程序识别，但是其中一个按钮需要调用 MyCustomActivity 中的方法。问题是 onReceive 的第一个参数是一个不能转换为 Activity 的 Context 并且使用 MyCustomActivity 的*内部类* [在 Android 4.1 中将无法工作，](https://stackoverflow.com/a/13576130/636571)除非它是静态的（同样的问题是无法访问 MyCustomActivity 的方法。

所以留给我的唯一选择（为了同时支持 2.x 和 4.1）是将活动作为参数传递给[RemoteControlReceiver](https://stackoverflow.com/q/15057291/636571)。

但是，当实例化它的唯一方法是通过以下方式时，我该怎么做：

```
private ComponentName mRemoteControlReceiver = new ComponentName(this, RemoteControlReceiver.class); 
```

哪个不接受任何附加参数？

知道如何解决这个限制吗？

**注意：**如果我尝试将构造函数定义`RemoteControlReceiver`为带参数的构造函数，则会收到以下异常：

```
E/AndroidRuntime(2836): java.lang.RuntimeException: Unable to instantiate receiver com.example.RemoteControlReceiver: java.lang.InstantiationException: can't instantiate class com.example.RemoteControlReceiver; no empty constructor

Caused by:
E/AndroidRuntime(2836): Caused by: java.lang.InstantiationException: can't instantiate class com.example.RemoteControlReceiver; no empty constructor
E/AndroidRuntime(2836):     at java.lang.Class.newInstanceImpl(Native Method)
E/AndroidRuntime(2836):     at java.lang.Class.newInstance(Class.java:1319)
E/AndroidRuntime(2836):     at android.app.ActivityThread.handleReceiver(ActivityThread.java:2205) 
```

所以很明显，这个新的 registerMediaButtonEventReceiver 要求（在 Android 4.1 中引入）需要一个**空的构造函数**。

有没有办法解决这个问题？

例如，有没有办法获得对实际 RemoteControlReceiver 对象的引用（通过 间接实例化`mAudioManager.registerMediaButtonEventReceiver()`）？这样我就可以在实例化*后使用访问器设置 RemoteControlReceiver 的数据成员吗？*

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-27T06:06:34.850

[registerMediaButtonEventReceiver](http://developer.android.com/reference/android/media/AudioManager.html#registerMediaButtonEventReceiver%28android.content.ComponentName%29)要求在应用程序清单中声明 BroadcastReceiver。这意味着接收器必须是一个独立的类，这意味着它对您当前的活动或服务一无所知。

为了将此消息发送给您的活动或服务，您有多种选择：

*   为活动或服务使用静态全局，以便接收者可以将消息转发给它。这通常不是一个好主意，因为它会导致泄漏，并且在您以后想要更改代码时不是很适应。通常要避免静电。

*   将消息重新广播到特定类，该类恰好是您要调用的活动或服务的内部类。例如，在 registerMediaButtonEventReceiver 的 BroadcastReceiver 中：

    ```
    // Standalone class, declared in the manifest
    public class ButtonReceiver extends BroadcastReceiver {
        @Override
        public void onReceive(final Context context, final Intent intent) {
            Intent intent = new Intent();
            intent.setAction("com.foo.ACTION");

            // Rebroadcasts to your own receiver. 
            // This receiver is not exported; it'll only be received if the receiver is currently registered.
            context.sendBroadcast(intent); 
        }
    } 
    ```

在您的活动中：

```
 class MyActivity extends Activity {
        private BroadcastReceiver myReceiver = new BroadcastReceiver() {
            @Override
             public void onReceive(final Context context, final Intent intent) {
                MyActivity.this.onMessageReceived();
             }
        }
        @Override
        protected void onResume() {
            registerReceiver(myReceiver, new IntentFilter("com.foo.ACTION"));
        }

        @Override
        protected void onPause() {
            unregisterReceiver(myReceiver);
        }

        private void onMessageReceived() {
        }
    } 
```

*   与上述方法类似，它不一定是广播，它可以是传递给活动的 Intent，具体取决于您的用例。要做到这一点，而不是使用 sendBroadcast，您将使用 startActivity（或 startService，如果您正在使用服务）。

# ruby - 如何总结整周的 Redis 密钥？

> ID：15102030
> 
> 赞同：1
> 
> 时间：2013-02-27T00:24:31.733
> 
> 标签：ruby, statistics, redis

我有以下 redis 键：

```
REDIS.del "weekly:activity"
REDIS.del "2013-02-27:activity"
REDIS.del "2013-02-28:activity"

REDIS.sadd "2013-02-27:activity", 1
REDIS.sadd "2013-02-27:activity", 2
REDIS.sadd "2013-02-27:activity", 3
REDIS.sadd "2013-02-28:activity", 4
REDIS.sadd "2013-02-28:activity", 1
REDIS.sadd "2013-02-28:activity", 1
REDIS.sadd "2013-02-28:activity", 6

REDIS.sunionstore "weekly:activity", "2013-02-27:activity", "2013-02-28:activity"
REDIS.scard "weekly:activity" 
```

如何识别当前一周的第一天和当前一周的总和统计数据的最佳方式。

我可以使用 Redis 做到这一点吗？还是我应该用 Ruby 来做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T00:54:26.903

我建议您不要定期汇总，而是收集更多数据并创建数周和月的密钥。

因此，每次用户登录时，您：

```
REDIS.incr "{today}:activity"
REDIS.incr "{this week}:weekly:activity"
REDIS.incr "{this month}:monthly:activity" 
```

这样一来，就不用汇报了。我将由你来计算`this week`和`this month`。

# python - __mapper_args__ 的 SQLAlchemy 类装饰

> ID：15102031
> 
> 赞同：0
> 
> 时间：2013-02-27T00:24:33.263
> 
> 标签：python, python-2.7, sqlalchemy, polymorphism

我有很多类是我的数据库模式多态性的一部分。对于他们中的大多数，我（需要）做：

```
__mapper_args__ = {'polymorphic_identity': unique_integer}
# unique_integer is a unique integer different for each class ex: 10 
```

而不是这个，我想使用装饰器，即：

```
@polid(10)
class ClassName(Inherited):
    # instead of repeating for each class the following:
    # __mapper_args__ = {'polymorphic_identity': 10}
    # I would like to have above decorator or something to do the trick.
    pass 
```

我怎样才能做到这一点？我需要使用什么样的装饰器？以下不起作用（不注册）：

```
def polid(v):
    def x(f):
        f.__mapper_args__ = {'polymorphic_identity': v}
        return f
    return x 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T00:34:10.807

使用[混合](http://docs.sqlalchemy.org/en/rel_0_8/orm/extensions/declarative.html#mixin-and-custom-base-classes)。通常它们是一场噩梦，但将公共状态注入声明性类似乎是一种合理的用途。

```
class PolyMixin(object):
    __mapper_args__ = {'polymorphic_identity': 10}

class SomeTable(Base, PolyMixin):
    __tablename__ = "something"

class SomeOtherTable(Base, PolyMixin):
    __tablename__ = "something_else" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T02:08:11.423

您的装饰器不起作用，因为它在构建类后尝试修改类，并且此时映射器已经设置。

```
def polid(value):
    return type("mixinclass", (object,), {"__mapper_args__": {'polymorphic_identity': value}})

class ClassName(polid(10), Inherited):
    pass 
```

这会在每次调用 polid 时创建一个全新的类，使用您需要的任何自定义映射器参数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T11:06:29.133

也许到目前为止获得的更好，更少神奇的解决方案可能是：

```
def PID(value):
    ''' Mixin Class Generator For Polymorphic Identity Inheritance '''
    class MixinClassForPolymorphicIdentityInheritance: 
        __mapper_args__ = {'polymorphic_identity': value}
    return MixinClassForPolymorphicIdentityInheritance 
```

用法：

```
class InheritingClass(PID(pidv), Parent): pass 
```

（很遗憾）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-18T14:19:01.330

元类方法到底有什么问题？

```
class PolyMeta(DeclarativeMeta):
    def __new__(cls, clsname, bases, namespace, value=None, **kwargs):
        if value is not None:
            namespace['__mapper_args__'] = dict(polymorphic_identity=value)
        return super().__new__(cls, clsname, bases, namespace, **kwargs)

class Inherited(Base, metaclass=PolyMeta): ...

class ClassName(Inherited, value=10): ... 
```

当然，在 Py2 中，您必须找到一些其他方式来向元类发送信息，但这是使用遗留语言所要付出的代价。:-P 它不应该那么难：使用一个特殊的属性`_value`，或者有一个外部字典将类名映射到值，或者甚至创建一个虚构的“基础”来记住这个值，这样你就可以编写

```
class ClassName(Inherited, Value(10)): ... 
```

事实上，我认为最后一种方法是最好的（如果你仍然停留在 Py2 上）。如果您需要帮助，请询问，我会尽力写出来。

# java - 并排同步两个 ListViews Android

> ID：15102034
> 
> 赞同：7
> 
> 时间：2013-02-27T00:24:52.397
> 
> 标签：java, android, android-listview, scroll, motionevent

我试图让两个并排的 ListView 在某种程度上像 GridView 一样。我不使用 GridView 的原因是因为不支持交错外观。无论如何，到目前为止，我有以下代码：

<- 旧的，现在不相关的代码->

**编辑：**

我按照@Sam 的建议做了，并使用了以下代码：

```
lv1.setOnTouchListener(new OnTouchListener() {
            @Override
            public boolean onTouch(View v, MotionEvent event) {
                if (touchSource == null) {
                    touchSource = v;
                }

                if (v == touchSource) {
                    lv2.dispatchTouchEvent(event);
                    if (event.getAction() == MotionEvent.ACTION_UP) {
                        clickSource = v;
                        touchSource = null;
                    }
                }

                return false;
            }
        });

        lv1.setOnItemClickListener(new OnItemClickListener() {
            @Override
            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {
                if (parent == clickSource) {
                               //my own code here

                }
            }
        });

        lv1.setOnScrollListener(new OnScrollListener() {
            @Override
            public void onScroll(AbsListView view, int firstVisibleItem,
                    int visibleItemCount, int totalItemCount) {
                if (view == clickSource) {

                }
                boolean loadMore = /* maybe add a padding */
                firstVisibleItem + visibleItemCount + 10 >= totalItemCount;

                if (loadMore) {
                    //add items, load more
                }
            }

            @Override
            public void onScrollStateChanged(AbsListView view, int scrollState) {
            }
        });

        lv2.setOnTouchListener(new OnTouchListener() {
            @Override
            public boolean onTouch(View v, MotionEvent event) {
                if (touchSource == null) {
                    touchSource = v;
                }

                if (v == touchSource) {
                    lv1.dispatchTouchEvent(event);
                    if (event.getAction() == MotionEvent.ACTION_UP) {
                        clickSource = v;
                        touchSource = null;
                    }
                }

                return false;
            }
        });
        lv2.setOnItemClickListener(new OnItemClickListener() {
            @Override
            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {
                if (parent == clickSource) {
                }
            }
        });

        lv2.setOnScrollListener(new OnScrollListener() {
            @Override
            public void onScroll(AbsListView view, int firstVisibleItem,
                    int visibleItemCount, int totalItemCount) {
                if (view == clickSource) {

                }
                boolean loadMore = /* maybe add a padding */
                firstVisibleItem + visibleItemCount + 2 >= totalItemCount;

                if (loadMore) {

                }

            }

            @Override
            public void onScrollStateChanged(AbsListView view, int scrollState) {
            }
        }); 
```

我还在其中一个列表上使用*标题*来创建交错效果，我需要不惜一切代价保持这种交错。这主要是有效的（上面的代码），但它很多时候不同步。我发现这只是当我有小的短刷时。我不知道为什么，我找不到一个好的解决方案。在我看来，上述逻辑应该有效。

另外，以防万一，我使用 UniversalImageLoader 加载照片和一个简单的 EndlessScroll 逻辑来加载更多照片（直接调用 adapter.notifyDataSetChanged()）。不过，这东西似乎不太相关。即使加载了照片，我仍然可以看到它不同步。

我想明确一点：如果我进行短滑动（有时只是一般重复滚动），我可以随意取消同步列表。

任何帮助表示赞赏。谢谢。

**编辑2：**

还没有找到好的解决方案。以下是我发现不太奏效的解决方案：

*   上述解决方案：不同步太频繁
*   [Pinterest 列表视图](https://github.com/vladexologija/PinterestListView)：没有 OnScrollListener/onItemClick 区分
*   [StaggeredGridView](https://github.com/maurycyw/StaggeredGridView)：没有 onScrollListener
*   [雄鹿项目](https://github.com/morganbelford/stagger)：没有 onItemClick 监听器
*   [线性布局方法](https://stackoverflow.com/questions/11736658/android-heterogeneous-gridview-like-pinterest/13899107#)：无 onItemClick 监听器

有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T04:11:24.033

好的，所以我最终使用`Linear Layout Method`（请参阅问题）并使用 setTag 让 onItemClickListener 工作，并使用 CustomScrollView 实现来让无限 List 工作。

基本上，两个线性布局在滚动视图内水平堆叠。它工作得很好，加载速度更快。

此外，如果有帮助，加载我的图像[SmartImageView 。](http://loopj.com/android-smart-image-view/)

如果有人想要代码，我可能会发布其中的一部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T21:15:31.223

而不是听 onTouch 为什么不在 ListViews 的 onScroll 监听器中滚动列表。这就是我在那个库中使用的类似跟踪 ListView 滚动的东西，它就像一个魅力。看看这个文件。[https://github.com/JlUgia/list_moving_container/blob/master/src/com/ugia/listmovingcontainer/fragment/BottomListMovingContainerFragment.java](https://github.com/JlUgia/list_moving_container/blob/master/src/com/ugia/listmovingcontainer/fragment/BottomListMovingContainerFragment.java)

特别注意81（不要忘记添加全局布局更新监听器）和89（带有onScroll监听器）。这样你也可以忘记点击黑客。

更新

我会按照以下方式对其进行编码。

```
lv1.getViewTreeObserver().addOnGlobalLayoutListener(new ViewTreeObserver.OnGlobalLayoutListener() {
    @Override
    public void onGlobalLayout() {
        updateListPosition(lv2, lv1);
    }
});

lv1.setOnScrollListener(new AbsListView.OnScrollListener() {

    @Override
    public void onScrollStateChanged(AbsListView view, int scrollState) {
    }

    @Override
    public void onScroll(AbsListView view, int firstVisibleItem, int visibleItemCount, int totalItemCount) {
        updateListPosition(lv2, lv1);
    }
});

lv2.getViewTreeObserver().addOnGlobalLayoutListener(new ViewTreeObserver.OnGlobalLayoutListener() {
    @Override
    public void onGlobalLayout() {
        updateListPosition(lv1, lv2);
    }
});

lv2.setOnScrollListener(new AbsListView.OnScrollListener() {

    @Override
    public void onScrollStateChanged(AbsListView view, int scrollState) {
    }

    @Override
    public void onScroll(AbsListView view, int firstVisibleItem, int visibleItemCount, int totalItemCount) {
        updateListPosition(lv1, lv2);
    }
});

private void updateListPosition(ListView updatedList, ListView scrolledList){
    updatedList.setScrollY(scrolledList.getScrollY());

} 
```

** setScrollY 已经使您的列表无效。

** 请注意，我没有测试代码。虽然它应该足够简单。

# delphi - 在 Delphi 中正确验证 TPageControl

> ID：15102037
> 
> 赞同：1
> 
> 时间：2013-02-27T00:25:16.597
> 
> 标签：delphi, validation, tabs, delphi-7

我正在使用 Delphi 7 代码，以确保在用户切换选项卡之前已保存在选项卡上输入的注释。

选项卡位于 a 上`TPageControl`，并触发此代码`OnExit`

```
procedure TfCallerInfo.tsChaplainExit(Sender: TObject);
begin
  { Compare the saved DB value with the text in the comments field }
  if (dmMain.qChaplainCOMMENTS.AsString <> dbmChapComments.Text) then
    begin
      ShowMessage ('Please save the comments before proceeding.');
      pcDetail.ActivePage := tsChaplain;      // Remain on the Current Page
      tsChaplain.SetFocus;
    end;
end; 
```

例如，当用户单击另一个选项卡`tsInfoRequest`时，验证确实会触发，但 Active Page 变为`tsInfoRequest`而不是剩余`tsChaplain`。

知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-27T00:41:59.480

可能有更好的方法来做你想做的事情。请改用`TPageControl.OnPageChanging`事件。

```
procedure TfCallerInfo.pcDetailPageChanging(Sender: TObject; 
  NewPage: TTabSheet; var AllowChange: Boolean);
begin
  if pc.ActivePage = tsChaplain then
  begin
    AllowChange := (dmMain.qChaplainCOMMENTS.AsString = dbmChapComments.Text);
    if not AllowChange then
      ShowMessage(...);
  end;
end; 
```

顺便说一句，更好的测试可能是

```
AllowChange := not dmMain.gChaplainCOMMENTS.Modified; 
```

`TField.Modified``True`当它的 DataSet 处于`dsEdit`or`dsInsert`模式时，设置为当字段的内容发生变化时，`False`当它的状态变回时设置为`dsBrowse`。

# c# - 构建组合矩阵

> ID：15102038
> 
> 赞同：6
> 
> 时间：2013-02-27T00:25:16.723
> 
> 标签：c#, algorithm, matrix, permutation, combinations

我敢肯定这已经被问了一百万次了，但是当我搜索所有的例子时，都不太合适，所以我想我还是应该问一下。

我有两个数组，每个数组总是包含 6 个项目。例如：

```
string[] Colors=
    new string[] { "red", "orange", "yellow", "green", "blue", "purple" };

string[] Foods=
    new string[] { "fruit", "grain", "dairy", "meat", "sweet", "vegetable" }; 
```

在这两个数组之间，有 36 种可能的组合（例如“红色水果”、“红色谷物”）。

现在我需要将它们进一步分组为六个唯一值的集合。

例如：

```
meal[0]=
    new Pair[] { 
        new Pair { One="red", Two="fruit" }, 
        new Pair { One="orange", Two="grain" }, 
        new Pair { One="yellow", Two="dairy" }, 
        new Pair { One="green", Two="meat" }, 
        new Pair { One="blue", Two="sweet" }, 
        new Pair { One="purple", Two="vegetable" } 
    }; 
```

吃饭在哪里

```
Pair[][] meal; 
```

**我的“膳食”清单中没有任何元素可以重复**。所以只有一个“红色”项目，一个“肉”项目，等等。

我可以根据前两个数组轻松创建对，但我对如何最好地将它们分组为独特的组合持空白。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T01:22:38.577

好的，您想要一个包含所有 720 个可能序列的序列。这有点棘手，但可以做到。

基本思想与我之前的答案相同。在那个答案中，我们：

*   随机产生一个排列
*   用未排列的第一个数组压缩排列的第二个数组
*   从查询中生成一个数组

现在我们将做同样的事情，除了随机产生一个排列，我们将产生所有排列。

从获取这个库开始：

[http://www.codeproject.com/Articles/26050/Permutations-Combinations-and-Variations-using-CG](http://www.codeproject.com/Articles/26050/Permutations-Combinations-and-Variations-using-C-G)

好的，我们需要对六个项目进行所有排列：

```
Permutations<string> permutations = new Permutations<string>(foods); 
```

我们想对每个排列做什么？我们已经知道了。我们想先用颜色数组压缩它，把它变成一个对的序列，然后我们把它变成一个数组。相反，让我们把它变成一个`List<Pair>`，因为，相信我，它会更容易。

```
IEnumerable<List<Pair>> query = 
    from permutation in permutations
    select colors.Zip(permutation, (color, food)=>new Pair(color, food)).ToList(); 
```

现在我们可以将该查询转换为结果列表；

```
List<List<Pair>> results = query.ToList(); 
```

我们完成了。我们有一个包含 720 个项目的列表。每个项目都是一个列表，其中包含 6 对。

显然，繁重的工作是由库代码完成的；放在它上面的查询很简单。

（一段时间以来，一直想写一篇关于如何在 LINQ 中生成排列的博客文章；我可能会以此为例！）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-27T00:53:03.827

有 720 种可能的组合可以满足您的需求。从您的问题中不清楚您是要*枚举所有 720*还是*随机选择一个*或什么。我将假设后者。

更新：根据评论，这个假设是不正确的。我将开始一个新的答案。

* * *

首先，产生第二个数组的排列。您可以使用 Fischer-Yates-Knuth shuffle 就地完成；StackOverflow 上有很多关于如何做到这一点的例子。或者，您可以通过使用随机键进行排序来使用 LINQ 生成排列。

即使项目数量很大，前一种技术也很快，但是会改变现有数组。第二种技术速度较慢，尤其是在项目数量非常大的情况下，事实并非如此。

人们在使用第二种技术时最常犯的错误是根据指南进行排序。Guid 保证是*唯一的*，不保证是*随机*的。

无论如何，产生一个查询，当执行时，置换第二个数组：

```
Random random = new Random();
IEnumerable<string> shuffled = from food in foods 
                               orderby random.NextDouble() 
                               select food; 
```

其他一些注意事项：

*   请记住，查询表达式的结果是*一个查询*，而不是*一组结果*。直到您在另一端实际将事物转换为数组时，才会发生排列。
*   如果你在同一毫秒内创建两个 Random 实例，你会从它们中得到相同的序列。
*   随机是伪随机，而不是真正随机。
*   随机不是线程安全的。

现在您可以将排列后的序列压缩连接到第一个数组：

```
IEnumerable<Pair> results = colors.Zip(shuffled, (color, food)=>new Pair(color, food)); 
```

同样，这仍然是一个查询，表示将两个序列压缩在一起的动作。除了构建一些查询之外，什么都没有发生。

最后，把它变成一个数组。这实际上执行了查询。

```
Pair[] finalResults = results.ToArray(); 
```

十分简单。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T00:31:29.857

根据要求，我将具体说明我如何看待排序方面的问题。我知道，由于 C# 是一种高级语言，因此有大量快速简便的库和对象可用于将其减少到最少的代码。这个答案实际上是通过实现排序逻辑来尝试解决问题。

最初阅读这个问题时，我想起了整理一副纸牌。这两个数组非常类似于西装数组和面值数组。由于解决洗牌的一种方法是将数组随机化，然后选择一张将两者结合的牌，因此您可以在此处应用相同的逻辑。

## 排序作为一种可能的解决方案

**Fisher-Yates**排序算法本质上循环遍历数组的所有索引，将当前索引与随机索引交换。这创建了一种相当有效的排序方法。那么这如何适用于手头的问题呢？一种可能的实现可能是......

```
 static Random rdm = new Random();
    public string[] Shuffle(string[] c)
    {
        var random = rdm;
        for (int i = c.Length; i > 1; i--)
        {
            int iRdm = rdm.Next(i);
            string cTemp = c[iRdm];
            c[iRdm] = c[i - 1];
            c[i - 1] = cTemp;
        }
        return c;
    } 
```

资料来源：[Fisher-Yates Shuffle](http://www.dotnetperls.com/fisher-yates-shuffle)

上面的代码随机化了字符串数组中值的位置。如果您将 Colors 和 Food 数组传递给此函数，您将通过引用两者的特定索引来为您的 Pairs 获得唯一的配对。

由于数组是混洗的，索引 0、1、2 等处的两个数组的配对是唯一的。然而，问题要求创建对。然后应该创建一个 Pair 类，该类在 Colors 和 Foods 的特定索引处接收一个值。即...颜色[3] 和食物[3]

```
 public class Pair
{
     public string One;
     public string Two;
     public Pair(string m1, string m2)
     {
         One = m1;
         Two = m2;
     }
} 
```

由于我们已经对数组和一个类进行了排序以包含唯一的配对，因此我们只需创建膳食数组并使用 Pairs 填充它。

如果我们想创造一对新的，我们会...

```
Pair temp = new Pair(Colors[0],Foods[0]); 
```

有了这些信息，我们终于可以填充进餐数组了。

```
 Pair[] meal = new Pair[Colors.Length - 1];
    for (int i = 0; i < Colors.Length - 1; i++)
    {
        meal[i] = new Pair(Colors[i],Foods[i]);
    } 
```

这部分代码创建膳食数组并通过颜色的长度定义其索引数。然后代码循环遍历颜色值的总数，同时创建新的配对组合并将它们放入餐中。此方法假设数组的长度相同，可以轻松检查最小的数组。

## 完整代码

```
private void Form1_Load(object sender, EventArgs e)
        {
            string[] Colors = new string[] { "red", "orange", "yellow", "green", "blue", "purple" };
            string[] Foods = new string[] { "fruit", "grain", "dairy", "meat", "sweet", "vegetable" };
            Colors = Shuffle(Colors);
            Foods = Shuffle(Foods);
            Pair[] meal = new Pair[Colors.Length - 1];
            for (int i = 0; i < Colors.Length - 1; i++)
            {
                meal[i] = new Pair(Colors[i],Foods[i]);
            }
        }
        static Random rdm = new Random();
        public string[] Shuffle(string[] c)
        {
            var random = rdm;
            for (int i = c.Length; i > 1; i--)
            {
                int iRdm = rdm.Next(i);
                string cTemp = c[iRdm];
                c[iRdm] = c[i - 1];
                c[i - 1] = cTemp;
            }
            return c;
        }
    }
    public class Pair
    {
         public string One;
         public string Two;
         public Pair(string m1, string m2)
         {
             One = m1;
             Two = m2;
         }
     } 
```

## -原帖-

您可以简单地打乱数组。这将允许使用相同的方法来填充膳食，但结果不同。有一篇关于Fisher-Yates shuffle [Here的帖子](https://stackoverflow.com/questions/13606855/fisher-yates-shuffle-on-a-single-string-vs-using-an-equal-length-permutation)

# ios - didReceiveLocalNotification 在 iOS6 中未激活

> ID：15102040
> 
> 赞同：0
> 
> 时间：2013-02-27T00:25:20.667
> 
> 标签：ios, uilocalnotification

最近我正在尝试创建一个闹钟，当我使用 UILocalNotification 时，会出现问题。当应用程序在后台时它会显示一个横幅，但是当应用程序处于活动状态时，即使我使用了didReceiveLocalNotification，也没有任何反应。为什么？

```
- (void)application:(UIApplication *)application didReceiveLocalNotification:(UILocalNotification *)notification {

UIApplicationState state = application.applicationState;

if (state == UIApplicationStateActive) {
    NSLog(@"RingRingRing~~~~~");
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Remind" message:notification.alertBody delegate:self cancelButtonTitle:@"Sure" otherButtonTitles:nil, nil];
    [alert show];
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T01:23:19.203

远程或本地通知都不会唤醒 iOS 中的应用程序。它需要用户对通知执行操作以启动应用程序。

# objective-c - 设置 UITableView ContentInset

> ID：15102043
> 
> 赞同：3
> 
> 时间：2013-02-27T00:25:35.377
> 
> 标签：objective-c, uitableview

我正在手动更改内容插入底部值。

```
literatureTableView.contentInset = UIEdgeInsetsMake(0, 0, 100, 0); 
```

这工作正常，但我想根据表格内容的高度设置值。我用 tableView.bounds.size.height 等尝试了一些东西，但没有任何效果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T01:10:04.480

如果您需要在显示重新加载的数据之前知道计算出的底部插图，那么您必须手动计算高度。

但是，如果您的应用程序允许您调用 reloadData 然后调整插图，您可以通过执行以下操作更简单地达到它：

```
CGFloat trueContentHeight;

CGFloat heightWithInsets = self.tableView.contentSize.height;
UIEdgeInsets insets = self.tableView.contentInset;

trueContentHeight = heightWithInsets - (insets.top + insets.bottom); 
```

然后，您可以使用 trueContentHeight 和 tableView 边界的高度来计算底部插图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T01:01:34.930

您需要将单元格和标题的高度相加（如果有的话）。您可以使用 `tableView:heightForRowAtIndexPath:`from`self`手动获取高度，如果它们不完全相同，则将它们相加。

# mongodb - Dotcloud + MongoDB 和 pymongo 身份验证失败

> ID：15102047
> 
> 赞同：1
> 
> 时间：2013-02-27T00:25:44.893
> 
> 标签：mongodb, pymongo, bottle, dotcloud

我已经在 dotcloud 中的 mongoshell 上尝试过这段代码，但它没有对 root 用户进行身份验证。

dotcloud 运行数据 mongo

使用管理员 db.auth("root", "SecurePasswordGoesHere");

错误：{ errmsg：“身份验证失败”，正常：0.0 } 0

我怎样才能让它工作？我正在尝试从 pymongo 访问 mongodb，它也返回身份验证错误。

# c++ - 如何在 C++ 中将 pid 转换为 const char 指针？

> ID：15102049
> 
> 赞同：1
> 
> 时间：2013-02-27T00:25:57.623
> 
> 标签：c++

我正在尝试将 pid 类型转换为 const char 指针，以便可以将它们作为参数传递给 execlp 函数。

例如。`execlp("/bin/ps", "-f", "--ppid", "9340,9345,9346,9342");`

我知道您可以将 pid 转换为字符串，例如。`const std::string my_pid(str_pid.str());`

还有一个指向 const char 指针的字符串，例如。`my_pid.c_str();`

但是如何将多个 pid 连接成一个 const char 指针，以便我可以使用它们运行 execlp 命令？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T00:28:09.173

`ostringstream`可能是你想要的。

例如，

```
std::ostringstream ostr;
for (int i=0; i<pids.count(); i++)
{
    if (i > 0) ostr << ',';
    ostr << pids[i];
}

execlp("/bin/ps", "-f", "--ppid", ostr.str().c_str()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T00:29:02.030

字符串[流](http://www.cplusplus.com/reference/sstream/stringstream/)将是一种很好的 C++ 方法。

```
std::stringstream myStream;
myStream << "a c string" << aStringObject << std::endl; // operate on the stream
std::string myNewString = myStream.str(); // create a string object 
```

将数据视为流是一种相当通用的方法，可让您序列化和反序列化自定义或内置类型。自定义类型可以包括`operator<<`并`operator>>`允许分别插入和提取。

与使用临时字符串对象和操作它们相比，这种方法还应该具有速度优势。stingstream（或其任何基类）将在幕后使用缓冲区。带有临时字符串的循环每次迭代都会调用更多的构造函数/分配/析构函数。这也取决于底层的字符串表示。写入时复制 ( [COW](http://en.wikipedia.org/wiki/Copy-on-write) ) 字符串实现将具有更少的分配，并且可能只更新一个引用，但更新工作字符串仍然需要一个新字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T00:30:31.813

您可以将所有值连接在一起`std::string`，首先将最终`std::string`值传递给`execlp()`，例如：

```
std::string pids;
for (however many pids you have)
{
    if (!pids.empty())
        pids += ",";
    pids += std::string(str_pid.str());
}

execlp("/bin/ps", "-f", "--ppid", pids.c_str()); 
```

# python - 更好/更快地循环遍历集合或列表？

> ID：15102052
> 
> 赞同：40
> 
> 时间：2013-02-27T00:26:45.627
> 
> 标签：python, list, loops, set

如果我有一个包含许多重复项的 python 列表，并且我想遍历每个项目，而不是重复项，那么最好使用一个集合（如`set(mylist)`，或者找到另一种方法来创建一个没有重复项的列表？我正在考虑只循环遍历列表并检查重复项，但我认为这`set()`就是初始化时所做的。

因此，如果`mylist = [3,1,5,2,4,4,1,4,2,5,1,3]`我真的只想循环遍历`[1,2,3,4,5]`（顺序无关紧要），我应该使用`set(mylist)`还是其他？

在最后一个示例中可以使用另一种方法，因为列表包含其最小值和最大值之间的每个整数，我可以循环遍历`range(min(mylist),max(mylist))`或遍历`set(mylist)`. 在这种情况下，我通常应该尽量避免使用 set 吗？此外，找到`min`and`max`会比创建`set`吗？

* * *

在最后一个示例中，`set`速度更快：

```
from numpy.random import random_integers
ids = random_integers(1e3,size=1e6)

def set_loop(mylist):
    idlist = []
    for id in set(mylist):
        idlist.append(id)
    return idlist

def list_loop(mylist):
    idlist = []
    for id in range(min(mylist),max(mylist)):
        idlist.append(id)
    return idlist

%timeit set_loop(ids)
#1 loops, best of 3: 232 ms per loop

%timeit list_loop(ids)
#1 loops, best of 3: 408 ms per loop 
```

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-02-27T00:29:28.647

只需使用`set`. 它的语义正是您想要的：独特项目的集合。

从技术上讲，您将遍历列表两次：一次用于创建集合，一次用于您的实际循环。但是你会用任何其他方法做同样多的工作或更多。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-27T01:38:36.933

`set`是你想要的，所以你应该使用`set`. 试图变得聪明会引入一些微妙的错误，比如忘记添加一个到`max(mylist)`! 防守代码。当您确定它太慢时，担心什么更快。

```
range(min(mylist), max(mylist) + 1)  # <-- don't forget to add 1 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-11-20T05:04:01.370

虽然 a`set`可能是你想要的结构，但问题是什么更快。列表更快。您的示例代码无法准确比较`set`vs`list`因为您正在从列表转换为集合*in* `set_loop`，然后您正在创建`list`您将循环通过*的 in* `list_loop`。您迭代的集合和列表应该提前构造并在内存中，并简单地循环以查看哪个数据结构在迭代时更快：

```
ids_list = range(1000000)
ids_set = set(ids)
def f(x):
    for i in x:
         pass

%timeit f(ids_set)
#1 loops, best of 3: 214 ms per loop
%timeit f(ids_list)
#1 loops, best of 3: 176 ms per loop 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-02-27T00:31:23.307

为简单起见：`newList = list(set(oldList))`

但是，如果您想获得速度/排序/优化，还有更好的选择：[http ://www.peterbe.com/plog/uniqifiers-benchmark](http://www.peterbe.com/plog/uniqifiers-benchmark)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-11-03T08:03:25.100

我的列表变化很大，循环两次将花费大量时间，并且第二次循环一个集合而不是列表时会花费更多时间，并且我们知道迭代一个集合比列表慢。

`generator`我认为你需要and的力量`set`。

```
def first_test():

    def loop_one_time(my_list):
        # create a set to keep the items.
        iterated_items = set()
        # as we know iterating over list is faster then list.
        for value in my_list: 
            # as we know checking if element exist in set is very fast not
            # metter the size of the set.
            if value not in iterated_items:  
                iterated_items.add(value) # add this item to list
                yield value

    mylist = [3,1,5,2,4,4,1,4,2,5,1,3]

    for v in loop_one_time(mylist):pass

def second_test():
    mylist = [3,1,5,2,4,4,1,4,2,5,1,3]
    s = set(mylist)
    for v in s:pass

import timeit

print(timeit.timeit('first_test()', setup='from __main__ import first_test', number=10000))
print(timeit.timeit('second_test()', setup='from __main__ import second_test', number=10000)) 
```

输出：

```
 0.024003583388435043
   0.010424674188938422 
```

注意：此技术顺序是有保证的

# salesforce - SFDC 报告显示错误的货币

> ID：15102054
> 
> 赞同：0
> 
> 时间：2013-02-27T00:27:04.093
> 
> 标签：salesforce, currency

我在自定义对象中有自定义货币字段。我在其中存储了一些货币价值。当我在报告中显示它时，它显示正确的值但显示的货币名称不正确。例如`AED 0.64`，但它应该显示`EUR 0.64`.

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T07:46:33.317

如果您有自定义`currency__c`（选择列表？）报告不知道这一点。所有“货币”类型的字段将继续显示为记录的“真实”货币（`CurrencyIsoCode`字段）。这种行为在标准页面布局、VF 页面上是一致的（只要`<apex:outputField>`在报告中使用过，所以我怀疑您只有在达到制作报告的地步时才意识到这一点。

如果您看到“AED 0.64”，则表示`CurrencyIsoCode`是 AED。您可以使用显示（您选择图表的位置旁边的菜单栏）将报告翻转为欧元 -> 使用货币 -> 欧元。但是，这将使用您当前的汇率转换价值。并且您必须放入报告“我的货币字段（已转换）”而不是常规的“我的货币字段”）。

如果您想要“原始”值 - 将它们存储在数字类型而不是货币类型的字段中？但是，您将无法更改标准字段的类型...

如果不知道您为什么决定需要自定义货币字段以及为什么不探索这样的限制，我认为我们无法为您提供更多帮助。

# android - GCM 重复消息

> ID：15102055
> 
> 赞同：8
> 
> 时间：2013-02-27T00:27:04.837
> 
> 标签：android, google-app-engine, google-cloud-messaging

我有一个基于 Google Cloud Messaging 的应用程序，它运行良好。现在（今天）突然之间它开始出现我们以前从未见过的问题。对于设备之间发送的每条消息，接收设备将获得两次。第一个将几乎立即到达（在发送后不到 3 秒内）。第二个在几分钟后到达。测试中有两台设备，无论哪一台是发送方/接收方，问题都是一样的。因此，如果一个设备向另一个设备发送一些消息，另一个设备将立即收到它们 - 但稍后，它将收到一连串消息，这是它收到的消息的第二个副本。

我设置了断点以确保发送设备不是罪魁祸首：消息只发送了一次（即发送的网络服务只调用了一次——以及在 Google App Engine 上运行的后端代码，很久没有改变了。）但是，消息以某种方式被传递到接收设备两次。通过使用断点，我还确保我们自己的接收端代码不负责：已验证`GCMIntentService::onMessage()`确实为每个发送的消息调用了两次。

我们还确保我们数据库中的注册 ID 是最新的。在这一点上，我很困惑，需要想法来取得进一步的进展。那么有什么想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T11:22:24.257

[https://groups.google.com/forum/#!topic/android-gcm/EHZUTEJMeyw](https://groups.google.com/forum/#!topic/android-gcm/EHZUTEJMeyw)

检查上面的官方 GCM 线程。每个人都在经历这个问题。谷歌的错！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T11:05:15.290

我们也有同样的问题，我们确定我们不会两次发送消息。这可能是与此处解释的“规范 ID”相关的问题：http: [//developer.android.com/google/gcm/adv.html](http://developer.android.com/google/gcm/adv.html)

> [...] 但是，如果应用程序中的错误触发同一设备的多个注册，则可能很难协调状态，并且您最终可能会收到**重复的消息**。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T11:39:01.913

这里同样的问题。我们有许多与 MyMalcom 和 Urban Airship 集成的应用程序，自周一以来，它们都获得了两次推送。我们还检查了 Ferran 建议的 canonicalId 更改，但传递给 GCM 的消息是正常的（没有 cannonical Id 更改）。

# android - 如何在 2 个活动之间传递位图数组

> ID：15102057
> 
> 赞同：2
> 
> 时间：2013-02-27T00:27:19.773
> 
> 标签：android, android-intent, bitmap

我一直试图将位图数组传递给另一个活动一周，但我仍然做不到

```
public class HomePage extends Activity {
private GridView gridView;
public Bitmap[] mBitArray;
public Bitmap[] mBitArray5;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_home_page);
    gridView = (GridView) findViewById(R.id.GridView1);
    mBitArray = new Bitmap[7];
    try
    {
        //these images are stored in the root of "assets"
        mBitArray[0] = getBitmapFromAsset("Gallary/g1p1.jpg");
        mBitArray[1] = getBitmapFromAsset("Gallary/g1p2.jpg");
        mBitArray[2] = getBitmapFromAsset("Gallary/g1p3.jpg");
        mBitArray[3] = getBitmapFromAsset("Gallary/g1p4.jpg");
        mBitArray[4] = getBitmapFromAsset("Gallary/g1p5.jpg");
        mBitArray[5] = getBitmapFromAsset("Gallary/g1p6.jpg");
        mBitArray[6] = getBitmapFromAsset("Gallary/g2p1.jpg");
       mBitArray[7] = getBitmapFromAsset("g2p2.jpg");
        mBitArray[8] = getBitmapFromAsset("hd-01.jpg");
        mBitArray[9] = getBitmapFromAsset("hd-02.jpg");
        mBitArray[10] = getBitmapFromAsset("hd-03.jpg");
        mBitArray[11] = getBitmapFromAsset("hd-04.jpg");
    }
    catch (IOException e)
    {
        e.printStackTrace();
    }

     gridView.setAdapter(new ImageAdapter(this, mBitArray));
      gridView.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View view, int       position,
                long id) {

            Intent i = new Intent(getApplicationContext(),       FullImageActivity.class);
            i.putExtra("id", position);
            startActivity(i);           
            // TODO Auto-generated method stub

        }
    });
}

public Bitmap getBitmapFromAsset(String strName) throws IOException {
    AssetManager assetManager = getAssets();
    InputStream istr = assetManager.open(strName);
    Bitmap bitmap = BitmapFactory.decodeStream(istr);
    istr.close();
    return bitmap;

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_home_page, menu);
    return true;
}

}

 public class ImageAdapter extends BaseAdapter {
 private Context mContext;
 private Bitmap[] mImageArray;

public ImageAdapter(Context context, Bitmap[] imgArray)
{
    mContext = context;
    mImageArray = imgArray;
}

public int getCount() {

    return mImageArray.length;
}

public Object getItem(int position) {
    // TODO Auto-generated method stub
    return mImageArray[position];
}

public long getItemId(int position) {
    // TODO Auto-generated method stub
    return position;
}

public View getView(int position, View convertView, ViewGroup parent) {         
    ImageView imageView = new ImageView(mContext);
    imageView.setImageBitmap(mImageArray[position]);
    imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
    imageView.setLayoutParams(new GridView.LayoutParams(153, 150));
    return imageView;
}

public Bitmap getView1(int position) throws IOException {   

    AssetManager am = mContext.getAssets();
    String[] list = am.list("Gallary");
     BufferedInputStream buf = new               BufferedInputStream(am.open(list[position]));

     Bitmap bitmap = BitmapFactory.decodeStream(buf);

 buf.close();
    return bitmap;
} 
```

}

公共类 FullImageActivity 扩展 Activity{

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.fullimage);
    ImageView imageView = (ImageView) findViewById(R.id.full_image_view);
     Intent i = getIntent();
     int position = i.getExtras().getInt("id");

     ImageAdapter imageAdapter = new ImageAdapter(this , null);

    //imageView.setImageBitmap(mBitArray[position]);
    trying to get mBitarray to fullscreenactivity to display a certain picture from the bitmap array 
```

**所以我想将 MbitArray 变量传递给 Fullactivity 类我试图通过 Intent 来做，但我不能通过构造函数或内部类发送位图数组？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T00:37:12.673

由于[Bitmap](https://developer.android.com/reference/android/graphics/Bitmap.html)实现 Parcelable，并且您有一个 Bitmap 数组，您应该能够传递它们：

```
Intent i = new Intent(getApplicationContext(), FullImageActivity.class);
i.putExtra("bitmaps", mBitArray);
startActivity(i); 
```

然后通过检索[`getParcelableArrayExtra()`：](http://developer.android.com/reference/android/content/Intent.html#getParcelableArrayExtra%28java.lang.String%29)

```
Intent i = getIntent();
Bitmap [] bitmaps = (Bitmap[]) i.getParcelableArrayExtra ("bitmaps"); 
```

您还可以将 String 数组中的路径传递给`FullImageActivity`，然后在那里重新制作它们，就像您在第一个 Activity 中所做的那样。为了节省代码，如果您选择这种方法，通过将其设为静态来共享方法将是一个好主意，只需记住传递一个 Context 实例以便`getAssets()`仍然可以使用：

```
public static Bitmap getBitmapFromAsset(Context context, String strName) throws IOException {
    AssetManager assetManager = context.getAssets();
    InputStream istr = assetManager.open(strName);
    Bitmap bitmap = BitmapFactory.decodeStream(istr);
    istr.close();
    return bitmap;
} 
```

然后调用，从`HomePage`

```
mBitArray[0] = getBitmapFromAsset(this,"Gallary/g1p1.jpg"); 
```

并从`FullImageActivity`

```
otherBitmapArray[0] = HomePage.getBitmapFromAsset(this, bitmapPaths[0]); 
```

# jquery - 防止 iframe 键盘事件滚动保持页面

> ID：15102060
> 
> 赞同：2
> 
> 时间：2013-02-27T00:27:35.453
> 
> 标签：jquery, html

经过大量研究（在这里和其他地方），我找到了一种防止键盘按下滚动 HTML 页面的方法：

```
var ar=new Array(33,34,35,36,37,38,39,40);
var prevent_acc = function(e) {                    
     var key = e.which;
      console.log(key);
      //if(key==35 || key == 36 || key == 37 || key == 39)
      if($.inArray(key,ar) > -1) {
          console.log("preventing")
          e.preventDefault();
          return false;
      }
      return true;                
}

$(document).keydown(prevent_acc);
$(document).keyup(prevent_acc);                
$(document).keypress(prevent_acc); 
```

当焦点在主页上时，这一切都很好。但是，当 iframe 容器获得焦点时，我遇到了一个问题 - 然后，整个页面被滚动并且该功能没有被触发。

我是否需要在每个 iframe 中插入一些代码，或者有没有办法捕捉从中冒泡的事件并阻止它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T03:15:20.203

我发现一个很好的解决方案是倾听焦点发生然后改变它......所以

```
$('iFrame').click(function(){
 window.focus();
}); 
```

这仍然会让 iframe 内的点击发生，但之后会立即将焦点返回到您的窗口。

# c - char** args 和 char* args 之间的区别

> ID：15102061
> 
> 赞同：1
> 
> 时间：2013-02-27T00:27:53.110
> 
> 标签：c, pointers

```
char** args = (char**)malloc(MAX_ARGS*sizeof(char*)); 
```

和

```
char* args = (char*)malloc(MAX_ARGS*sizeof(char*)); 
```

请解释这两种声明之间的区别。为什么我们需要 2 星，为什么需要 1 星？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T01:00:06.323

在这两种情况下，强制转换都是不必要的，并且可以掩盖错误；我将在下面删除演员表。（`malloc()`返回 a `void*`，它可以隐式转换为指向任何对象的指针。）

```
char **args = malloc(MAX_ARGS*sizeof(char*)); 
```

这定义`args`为一个指向字符的指针，并将其初始化为指向一块足够大的内存来保存`MAX_ARGS`元素，每个元素都是一个`char*`. 完成此操作后，您将需要为这些`char*`元素分配值，可能使它们指向字符串。

```
char *args = malloc(MAX_ARGS*sizeof(char*)); 
```

这是*合法*的，但几乎可以肯定是一个逻辑错误。 `args`是一个指向字符的指针，这意味着它可以指向单个`char`对象，也可以指向元素数组的第一个`char`元素。但是您正在分配可以容纳`MAX_ARGS` *指针*的内存。

更有可能做的是：

```
char *s = malloc(MAX_LEN); 
```

这将导致`s`指向可以保存`MAX_LEN` `char`元素的内存区域（长度为 的字符串`MAX_LEN - 1`）。（请注意，`sizeof (char) == 1`根据定义。）

有一个有用的技巧可以避免类型不匹配。`FOO*`对于任何类型，类型的指针都`FOO`需要指向一块足够大的内存，以容纳旧的一个或多个类型的元素`FOO`。如果你写：

```
ptr = malloc(count * sizeof *ptr); 
```

and `ptr`is a `FOO*`, then与 --`sizeof *ptr`相同，`sizeof (FOO)`但如果您稍后更改`ptr`为`pointer to`BAR`，则不必更新该行。

在您的情况下，指向的类型本身就是一个指针，因此您可以编写：

```
char **args = malloc(MAX_ARGS * sizeof *args); 
```

当你调用 时`malloc`，你应该*总是*检查它是否成功，如果失败则采取一些行动——即使那个行动是用错误信息终止程序：

```
if (args == NULL) {
    fprintf(stderr, "malloc failed\n");
    exit(EXIT_FAILURE);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T00:31:39.370

两颗星表示指向指针类型到数据类型的指针。所以在 char** 的情况下，这意味着创建一个 char*[MAX_ARGS] 数组。

因此，对于这种情况，以下内容将是有效的，因为**args[n]**是**char***：

```
args[0] = (char*)strdup("aaa");
args[1] = (char*)strdup("bbbb");
args[2] = (char*)strdup("ccccc"); 
```

注意：您应该记住在释放 args 之前释放数组的每个成员，否则指针会丢失。

使用单个星，它只是一个指向数据的指针，本质上您正在编写 char[MAX_ARGS*sizeof(char*)]

对于这个**args[n]**是一个**char**类型：

```
args[0] = 'a';
args[1] = 'b';
args[2] = 'c'; 
```

使用这个 char 数组，您将创建一个简单的字符数组，也称为 c 样式字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T00:37:47.947

2 颗星就像矩阵（或二维数组）。第一个 malloc 只为第一行获取内存（您必须遍历其元素，使第二个 malloc 为其他的保留空间）。

# c# - 是否有 WCF 服务请求队列性能计数器？

> ID：15102063
> 
> 赞同：3
> 
> 时间：2013-02-27T00:27:57.490
> 
> 标签：c#, .net, wcf, performancecounter, perfmon

有一个很好的 ASP.NET 性能计数器类别和一组计数器，可用于在性能测试运行期间跟踪请求队列。**但是，对于不是**通过 IIS 托管的 WCF 服务，我找不到类似的设置。我们的 WCF 服务使用 net-tcp 协议作为 Windows 服务运行。我了解到有几个绑定参数可以控制排队（`Binding.MaxConnections`和`Binding.ListenBacklog`）。这不是一个很容易找到的。所以我想知道，为什么要在 PerfMon 中跟踪这两个值？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T00:51:48.790

在**ServiceModelService**性能计数器类别下，您可以找到以下一组队列性能计数器：

*   队列丢弃的消息
*   每秒队列丢弃的消息数
*   排队的毒药消息
*   每秒排队的毒药消息
*   排队拒绝的消息
*   每秒排队拒绝的消息数

这些都没有提供您正在寻找的信息。我可以找到与您想要的更密切相关的性能计数器是：

*   最大并发调用的百分比

它提供了并发调用数占最大并发调用数的百分比。

要查看可用 WCF 性能计数器的完整列表，请[单击此处](http://msdn.microsoft.com/en-us/library/ms735098.aspx)。

# r - 在没有“with”的情况下对 data.table 进行键控查找

> ID：15102068
> 
> 赞同：7
> 
> 时间：2013-02-27T00:28:36.123
> 
> 标签：r, indexing, data.table

我有一个`data.table`这样的结构（除了我的真的很大）：

```
dt <- data.table(x=1:5, y=3:7, key='x') 
```

*我想通过另一个*变量来查找该结构中的行，该变量的名称为`x`（注意 - 与键的名称相同`dt`）：

```
x <- 3:4
dt2 <- dt[ J(x) ] 
```

这不起作用，因为查找首先看到列名，并且局部变量被遮挡：

```
dt2
#    x y
# 1: 1 3
# 2: 2 4
# 3: 3 5
# 4: 4 6
# 5: 5 7 
```

我考虑了 的`with`论点`[.data.table`，但这仅适用于`j`论点，而不适用于`i`论点。

`i`这个论点有类似的东西吗？

如果没有，当我使用局部变量并且我不知道 中的列名的完整列表时，这样的事情会很方便`dt`，以避免冲突。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-27T00:37:42.340

1.8.2 的 NEWS 中有一项建议`..()`将在某个时候添加语法，从而允许这样做

> 新的 DT[.(...)] 语法（采用 plyr 包的样式）与 DT[list(...)]、DT[J(...)] 和 DT[data.table(.. .)]。我们还计划添加 ..()，以便 .() 和 ..() 类似于文件系统的 ./ 和 ../；即， .() 在父范围内的 DT 和 ..() 框架内进行评估。

同时，您可以`get`从适当的环境中

```
dt[J(get('x', envir = parent.frame(3)))]
##    x y
## 1: 3 5
## 2: 4 6 
```

或者你可以`eval`打电话给`list(x)`或`J(x)`

```
dt[eval(list(x))]
dt[eval(J(x))]
dt[eval(.(x))] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T00:57:42.577

新答案，现在我想我明白了要求的内容：

```
> X <- data.table(x=x)
> merge(dt, X)
   x y
1: 3 6
2: 4 7 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-10-12T20:13:32.453

不需要设置密钥，而且速度更快：

```
dt[eval(dt[, x %in% ..x])]

   x y
1: 3 5
2: 4 6 
```

使用之前发布的答案进行基准测试

```
microbenchmark(dt[eval(dt[, x %in% ..x])],
               dt[J(get('x', parent.frame(3)))],
               dt[eval(list(x))],
               dt[eval(J(x))],
               dt[eval(.(x))],
               merge(dt, data.table(x)),
               times = 100L)

Unit: microseconds
                                  expr    min      lq     mean  median      uq    max neval
      dt[eval(dt[, x %in% ..x])]  486.1  500.60  518.529  503.70  512.65 1238.0   100
dt[J(get("x", parent.frame(3)))]  837.3  853.25  891.424  860.00  868.30 1675.3   100
               dt[eval(list(x))]  831.8  842.70  929.521  851.95  859.85 3878.3   100
                  dt[eval(J(x))]  833.8  845.50  948.535  856.00  870.00 4599.2   100
                  dt[eval(.(x))]  828.6  846.40  871.054  851.75  859.35 1985.6   100
        merge(dt, data.table(x)) 1766.0 1804.70 1907.617 1819.95 1870.95 3123.1   100 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T23:11:08.203

根据要求添加一些基准测试结果。

`dt`是一个 53080731 x 5 的`data.table`对象，由一个具有大约 100 个唯一值的数字列作为键，分布相当均匀。 `x`是包含其中 5 个值的向量。

```
library(microbenchmark)
> mb <- microbenchmark(
+     dt[eval(J(x))],
+     merge(dt, data.table(x)),
+     times=10
+ )
> mb
Unit: milliseconds
                     expr      min       lq    median       uq      max neval
           dt[eval(J(x))]  127.324  127.549  133.5305  154.410  159.433    10
 merge(dt, data.table(x)) 5028.349 5083.792 5129.6590 5170.451 5250.255    10 
```

@Tyler，如果您可以帮助我了解如何使用`qdap::lookup()`多列来处理这种情况，我也可以添加它。

# ios - iPad Mini 的最大视频输出分辨率？

> ID：15102071
> 
> 赞同：2
> 
> 时间：2013-02-27T00:28:49.830
> 
> 标签：ios, uiscreen, ipad-mini

我正在开发一个可以使用外接显示器的 iPad 应用程序。当我将 iPad 3 插入外接显示器时，我会从包括 1920x1080 的外部 UIScreen 对象返回分辨率列表。

当我用 iPad mini 做同样的事情时，我得到的最大分辨率是 1600x900。

这会让我觉得 iPad mini 不支持全高清外部视频，但 Apple 规格是这样说的：

> 视频镜像和视频输出支持：通过 Lightning 数字 AV 适配器和 Lightning 至 VGA 适配器最高 1080p（适配器单独出售）

...这似乎很明确，它应该支持全高清。

有谁知道这里发生了什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T01:19:15.637

iPad mini 没有 1080p 的分辨率（它有 1024x768 的屏幕分辨率，而 1080p 是 1920x1080，正如你所提到的），因此，镜像没有意义。

另一方面，视频播放应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-01T13:04:59.610

电视分辨率可以在设置>常规>电视输出中设置。

该菜单中显示的最大分辨率是您的 iPhone 或 iPad 的屏幕分辨率。

# javascript - 在 iframe 中捕获 javascript:window.close()

> ID：15102075
> 
> 赞同：5
> 
> 时间：2013-02-27T00:29:04.933
> 
> 标签：javascript, iframe, event-handling

我在我无法控制的**iframe**中运行第三方 HTML 内容，并且在某些情况下，它们具有直接调用**javascript:window.close()**的链接。像这样的东西：

```
<input type="button" onclick="javascript:window.close()" value ="CLOSE"> 
```

我无法找到该元素的 ID 或数组位置。

自然，它在 iframe 中会被忽略，但是有没有办法在触发此事件时捕获？我试过了

```
window.addEventListener("close", closeHandler, false);
window.addEventListener("onbeforeunload", closeHandler, false); 
```

但它完全忽略了它。有没有办法以某种方式捕获所有 JavaScript 事件/调用？欢迎任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-06T12:43:56.073

据我所知，您需要在框架内捕获事件。如果您无法修改框架内容，那么您可能不走运。如果您可以修改 iframe 内容，那么您可以在其上添加该事件侦听器并将其用于调用父窗口的全局函数。或者您可以尝试使用 postMessage。

# ios - 调试时在 Xcode 中查看对象/属性状态

> ID：15102082
> 
> 赞同：8
> 
> 时间：2013-02-27T00:29:34.220
> 
> 标签：ios, objective-c, xcode, debugging

因此，我是 Xcode 的新手，正在开发一个 iOS 项目，并且我在进行最基本的调试方面度过了一段愉快的时光。具体来说，我需要能够在单步执行代码时查看对象的状态（这不是很疯狂吗？），但我终其一生都无法弄清楚如何在 Xcode 中执行此操作。

每当我尝试时，似乎我得到的最远的是一个无法扩展以显示其客观内容的内存地址。我也想不出任何方法来手动取消引用调试控制台中的指针以查看该对象的状态。

在这里，我试图查看`store.storeHours`数组的内容，但没有任何运气。事实上，左边的视图告诉我数组中有 0 个对象，当我尝试扩展它时不会显示任何内容，但是当我`po store.storeHours`控制台显示 7 个对象时，尽管被无用地描绘为内存地址。

![在此处输入图像描述](../Images/37a5d41884e00b68da95bba15adea5af.png)

请告诉我我没有疯，我只是错过了一些东西！

**更新：**所以事情变得更奇怪了！当我突然将变量显示切换到“本地”而不是“自动”时，`self.store.storeHours`变得完全可导航！我想知道访问正确的“storeHours”实例是否存在故障或其他什么，因为当我现在查看它时，它清楚地识别了数组中的 7 个对象！更不用说这些对象可以像我最初希望的那样扩展。

![在此处输入图像描述](../Images/84aa4ab5af6541278ff5a18d7540f678.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-27T00:34:18.070

实例实际上是在自己提供这些信息。您需要为您的自定义类实现[`description`](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Protocols/NSObject_Protocol/Reference/NSObject.html#//apple_ref/doc/uid/20000052-SW7)继承自 的方法，`NSObject`以便它们能够将自己打印为内存地址以外的东西（这是`NSObject`的实现所做的）。

我不知道你的`Hours`类有什么属性，但这就像这样简单：

```
- (NSString *)description
{
    return [NSString stringWithFormat:@"Open: %i Close: %i", self.openTime, self.closeTime];
} 
```

该方法只需要返回一个`NSString`包含您认为在检查对象时需要查看的任何重要信息。

这也是当您`%@`在`NSLog()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T00:35:13.593

在您的示例中，store.storeHours 是一个空的 NSArray。所以，当然，你不能看里面。

为了使调试器更加清晰，请尝试添加一个方法（继承自 NSObject）

```
 - (NSString*) description 
```

这样的对象`Hours`可以告诉您有关其内容的更多信息。另请参阅`debugDescription`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T00:35:06.227

实施

```
-(NSString*)description{
    //Return a string in whatever way you like to describe this instance. That is what xcode debugger reads. 
    //This is implemented in the parent to return the address, that's why you see that way.
} 
```

# java - 使用 JavaFX 将视频循环到 JPanel 时的线程

> ID：15102084
> 
> 赞同：0
> 
> 时间：2013-02-27T00:29:38.403
> 
> 标签：java, javafx-2, runnable, java.util.concurrent

目前我正在为学校做一个项目，我正在尝试创建一个图片库和视频播放器。在欢迎窗口中，我创建了两个带有 MouseListeners 的 JPanel，一个用于保存图像，一个用于保存大约 5 秒的循环视频。起初我用这个：

```
public class WelcomeVideoLoader extends JPanel implements Runnable {

Media media;
MediaPlayer player;
MediaView view;
JFXPanel jfxPanel;
Dimension d;
DoubleProperty width;
DoubleProperty height;
Group root;

public WelcomeVideoLoader(File file, Dimension d) {

    this.d = d;
    media = new Media(file.toURI().toString());

    jfxPanel = new JFXPanel();

    playAndLoopVideo();

}

private void playAndLoopVideo() {

    root = new Group();

    player = new MediaPlayer(media);
    player.play();
    player.setMute(true);
    view = new MediaView(player);

    DoubleProperty width = view.fitWidthProperty();
    DoubleProperty height = view.fitHeightProperty();

    width.bind(Bindings.selectDouble(view.sceneProperty(), "width"));
    height.bind(Bindings.selectDouble(view.sceneProperty(), "height"));

    view.setPreserveRatio(true);
    root.getChildren().add(view);
    player.setOnEndOfMedia(this);

    PlatformImpl.runLater(
            new Runnable() {
                @Override
                public void run() {
                    Scene scene = new Scene(root, d.getWidth(), d.getHeight());
                    jfxPanel.setScene(scene);
                }
            });

    super.add(jfxPanel);
}

@Override
public void run() {
    player.stop();
    playAndLoopVideo();
}
} 
```

这是堆栈跟踪：

```
Exception in runnable
java.lang.IllegalArgumentException: Group@4d714a77[styleClass=root]is already set as root     of another scene
at javafx.scene.Scene$10.invalidated(Scene.java:991)
at javafx.beans.property.ObjectPropertyBase.markInvalid(ObjectPropertyBase.java:129)
at javafx.beans.property.ObjectPropertyBase.set(ObjectPropertyBase.java:163)
at javafx.scene.Scene.setRoot(Scene.java:953)
at javafx.scene.Scene.<init>(Scene.java:291)
at javafx.scene.Scene.<init>(Scene.java:260)
at se.theshahin.gallery.utils.WelcomeVideoLoader$1.run(WelcomeVideoLoader.java:69)
at com.sun.javafx.application.PlatformImpl$4$1.run(PlatformImpl.java:179)
at com.sun.javafx.application.PlatformImpl$4$1.run(PlatformImpl.java:176)
at java.security.AccessController.doPrivileged(Native Method)
at com.sun.javafx.application.PlatformImpl$4.run(PlatformImpl.java:176)
at com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:76)

Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
at javafx.embed.swing.JFXPanel$HostContainer$1.run(JFXPanel.java:741)
at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:251)
at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:727)
at java.awt.EventQueue.access$200(EventQueue.java:103)
at java.awt.EventQueue$3.run(EventQueue.java:688)
at java.awt.EventQueue$3.run(EventQueue.java:686)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
at java.awt.EventQueue.dispatchEvent(EventQueue.java:697)
at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:242)
at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:161)
at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:150)
at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:146)
at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:138)
at java.awt.EventDispatchThread.run(EventDispatchThread.java:91) 
```

这可能适用于 6-7 个循环，但我得到每个循环的 IllegalArgumentException，表示 Group 已在另一个场景中使用。所以我尝试创建一个 Group 对象的 ArrayList 并创建 100 个，看看是否可行。它没有。事实证明，我的线程彼此独立工作，一段时间后它们变得混乱。

我还是编程新手，似乎找不到太多我能理解的主题，一切似乎都是为有多年经验的人写的。我已经连续工作了 16 个小时，但无济于事，如果有人能指出我正确的方向，我将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-31T18:37:02.057

对于那些偶尔收到上述例外情况的人：

```
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
at javafx.embed.swing.JFXPanel$HostContainer$1.run(JFXPanel.java:741)... 
```

这发生在 Java 7 中，但在 Java 8 中没有。传播错误的原因似乎有所不同。

错误来源在 JFXPanel.java 中。在 Java 8[中 JFXPanel.java](http://grepcode.com/file_/repo1.maven.org/maven2/net.java.openjfx.backport/openjfx-78-backport/1.8.0-ea-b96.1/javafx/embed/swing/JFXPanel.java/?v=source)被更改为添加一个空指针检查：

```
if (scenePeer != null) 
```

Java 7[反编译](http://blog.jetbrains.com/idea/2014/07/intellij-idea-14-eap-138-1029-is-out/)版本（开源不可用）如下所示：

```
 public void setEmbeddedScene(EmbeddedSceneInterface var1) {
        JFXPanel.this.scenePeer = var1;
        if(JFXPanel.this.scenePeer != null) {
            if(JFXPanel.this.pWidth > 0 && JFXPanel.this.pHeight > 0) {
                JFXPanel.this.scenePeer.setSize(JFXPanel.this.pWidth, JFXPanel.this.pHeight);
            }

            SwingUtilities.invokeLater(new Runnable() {
                public void run() {
                    JFXPanel.this.scenePeer.setDragStartListener(JFXPanel.this.dnd.getDragStartListener());
                }
            });
        }
    } 
```

Java 8 中的[JFXPanel 类](http://grepcode.com/file_/repo1.maven.org/maven2/net.java.openjfx.backport/openjfx-78-backport/1.8.0-ea-b96.1/javafx/embed/swing/JFXPanel.java/?v=source)已通过额外的 null 检查得到修复

```
public void setEmbeddedScene(EmbeddedSceneInterface embeddedScene) {
    scenePeer = embeddedScene;
    if (scenePeer == null) {
        return;
    }
    if (pWidth > 0 && pHeight > 0) {
        scenePeer.setSize(pWidth, pHeight);
    }

    // DnD-related calls on 'scenePeer' should go from AWT EDT.
    SwingUtilities.invokeLater(new Runnable() {

        @Override
        public void run() {
            if (scenePeer != null) {
                scenePeer.setDragStartListener(dnd.getDragStartListener());
            }
        }
    });
} 
```

# flash - Flash：一个文件中的字体较大，而另一个文件中的字体较小

> ID：15102090
> 
> 赞同：1
> 
> 时间：2013-02-27T00:31:08.513
> 
> 标签：flash, fonts, size

我有两个文件。两者都有一些动态字段和一些静态字段。他们都使用相同的两种字体。我需要嵌入两种字体。当我生成大小报告时，一种字体比另一种字体大 15K。两个嵌入之间的唯一区别是 % 符号。我把它拿出来，它并没有产生明显的变化。

我注意到，在修复这些文件时，原始开发人员从属性下拉菜单中选择了“图形”而不是 MovieClip。我相信我已将它们全部更改为 Movie Clip，但似乎没有什么不同。为什么一个文件比另一个大很多？

这是两个尺寸报告。

```
字体名称字节字符
------------- ---------- ----------
Gotham-Medium 22727 ,.0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz '
Gotham-Bold 4828 .0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz 

字体名称字节字符
------------- ---------- ----------
Gotham-Medium 20986 ,.0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz '
Gotham-Bold 20945 %.0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz 

```

谢谢你

# android - Eclipse 没有上传新的项目更改

> ID：15102091
> 
> 赞同：0
> 
> 时间：2013-02-27T00:31:12.533
> 
> 标签：android, build

我有一个几个月前在做的 android 项目，今天我决定拿起它并继续前进。我意识到的第一件事是我的照片对于屏幕来说太小了，所以我继续将它完全删除并重新运行程序；但是，当它上传到我的设备时，照片仍然存在。我觉得我做错了什么，所以我一直在玩它。过了一会儿，我想也许有不同的问题，所以我做了一个更彻底的改变，改变了将我的应用程序发送到不同页面的意图；但是，当我重新运行它时，该应用程序仍将我带到旧页面。我不明白为什么会这样，网上的其他人似乎有一个不同的问题，其中 eclipse 没有注意到他们的变化并且没有 t 重建，以便他们能够通过添加和删除一行来解决这个问题；但是我的问题更加激烈。

这是控制台所说的：

```
[2013-02-26 19:39:18 - Para Raiders] Android Launch!

[2013-02-26 19:39:18 - Para Raiders] adb is running normally.

[2013-02-26 19:39:18 - Para Raiders] Performing com.synlight_development.para_raiders.Main activity launch

[2013-02-26 19:39:18 - Para Raiders] Automatic Target Mode: using device 'eb1f246c'

[2013-02-26 19:39:18 - Para Raiders] Uploading Para Raiders.apk onto device 'eb1f246c'

[2013-02-26 19:39:19 - Para Raiders] Installing Para Raiders.apk...

[2013-02-26 19:39:22 - Para Raiders] Success!

[2013-02-26 19:39:22 - Para Raiders] Starting activity 
com.synlight_development.para_raiders.Main on device eb1f246c

[2013-02-26 19:39:23 - Para Raiders] ActivityManager: Starting: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] cmp=com.synlight_development.para_raiders/.Main } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T00:41:50.153

据我所知，您的应用程序似乎未部署到您的设备上。这可能是由于以下原因（非税收）

*   您的项目无法编译，因此不会向设备发布新的 APK。
*   您的项目包含导致无法打包到 APK 中的错误。
*   您的项目现在使用不同的签名密钥 - Android 可能不会用新的应用程序覆盖现有应用程序。

我建议，查看 Eclipse 的控制台输出（原因将在那里打印）以及从设备中卸载您的应用程序（设置 => 应用程序 => "您的应用程序" => "卸载" 或从 CLI `adb uninstall com.my.package`）。然后，您将获得一个干净的环境（用户数据也被删除），这使开发更容易。

此外，请确保您部署/运行正确的项目（如果您的工作区中有多个项目） - 为确保这一点，请右键单击项目资源管理器中的 MainActivity，选择“运行方式”并选择“Android 应用程序”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T00:50:51.773

删除应用程序并在应用程序管理器中检查它实际上已被删除。然后在重新安装之前清理并重建您的项目。

# c# - 从字符串转换为唯一标识符时转换失败

> ID：15102092
> 
> 赞同：2
> 
> 时间：2013-02-27T00:31:16.003
> 
> 标签：c#, sql, sql-server-2008, tsql, ado.net

请注意，目前我正在尝试通过 C# ADO.NET 执行以下 INSERT 命令，但收到上述错误：

```
INSERT INTO tblStampAnnotation ([StampAnnotationID],[Title],[Subject],[Content],[Author],[Date],[LinkedDocumentsID],[PageNumber],[Colour]) VALUES('{6b15a625-b967-4d3b-9ee3-34f64633f469}','test title','test subject','test content','test author',GETDATE(),'{475f30a1-142f-4fd5-b783-598d838559de}',1,Null) 
```

在这里找到一个小程序来检查 GUID 是否正确：http: [//www.devx.com/vb2themax/Tip/18293](http://www.devx.com/vb2themax/Tip/18293)

当我运行程序时，它表明 {6b15a625-b967-4d3b-9ee3-34f64633f469} 和 {475f30a1-142f-4fd5-b783-598d838559de} 都是 GUID。有没有人有任何建议来确定我收到此错误的原因？TIA。

更新：

谢谢你的建议，鲍勃；但是，当我使用以下命令时，我仍然得到同样的错误：

```
INSERT INTO tblStampAnnotation ([StampAnnotationID],[Title],[Subject],[Content],[Author],[Date],[LinkedDocumentsID],[PageNumber],[Colour]) VALUES('6b15a625-b967-4d3b-9ee3-34f64633f469','test title','test subject','test content','test author',GETDATE(),'475f30a1-142f-4fd5-b783-598d838559de',1,Null) 
```

更新 2：请注意，我使用的是 SQL Server 2008。

更新3：这越来越奇怪了。当我使用 NEWID() 时，我仍然收到同样的错误：

```
INSERT INTO tblStampAnnotation ([StampAnnotationID],[Title],[Subject],[Content],[Author],[Date],[LinkedDocumentsID],[PageNumber],[Colour]) VALUES(NEWID(),'test title','test subject','test content','test author',GETDATE(),NEWID(),1,Null) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T00:33:07.200

您应该从 GUID 值中删除大括号 {}。

```
'6b15a625-b967-4d3b-9ee3-34f64633f469' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-27T19:12:55.010

事实证明，我已经使用右键单击数据库 -> 任务... -> 导入数据从另一个数据库复制了这个表，然后我得到了 uniqueidentifier 错误。为了解决这个问题，我删除了表，并使用“New Table ...”设计器重新创建它，在我尝试了相同的第一个 INSERT 命令后它工作正常，所以当我使用 import 复制它时发生了一些奇怪的事情. 谢谢大家的建议。

# knockout.js - Knockout.js 选项自定义数据的东西

> ID：15102095
> 
> 赞同：0
> 
> 时间：2013-02-27T00:31:25.540
> 
> 标签：knockout.js, knockout-mapping-plugin

在 Knockoutjs 绑定中有什么方法可以指定自定义数据输入选项吗？

```
<select data-bind="options: filtered, value: value, optionsText: 'Text', optionsValue: 'Value', 'data-something': 'Description' }"></select> 
```

结果：

```
<option value="foo" data-something="description">Text</option> 
```

请回复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T09:22:53.373

[自定义绑定](http://knockoutjs.com/documentation/custom-bindings.html)

```
<select data-bind="createDropDown: filtered"></select> 
```

然后添加这个自定义绑定方法，在这里你可以自己处理数组并手动将每个选项添加到选择中：

```
ko.bindingHandlers.yourBindingName =
{
    update: function(element, valueAccessor, allBindingsAccessor, viewModel, bindingContext)
    {
        ko.utils.arrayForEach(valueAccessor(), function (item)
        {
            $(element).append('<option value="' + item[value] + '" data-something="' + item[description] + '">' + item[text] + '</option>');
        });
    }
}; 
```

我没有对此进行测试，但你应该明白这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T20:11:16.807

也许这就是你要找的？

```
<select data-bind="foreach: filtered">
    <option data-bind="text: Text, attr: {value: Value, 'data-something': Description}"></option>
</select> 
```

# c# - 在 MVC 项目中，哪些类应该与工作单元交互？

> ID：15102097
> 
> 赞同：0
> 
> 时间：2013-02-27T00:31:39.243
> 
> 标签：c#, asp.net-mvc, model-view-controller, domain-driven-design, unit-of-work

在 .NET 解决方案中，我创建了 2 个项目：

*   域，该项目使用使用 edmx 模型创建的自动生成的 dbContext 类。除了这个类之外，我还有一些带有业务规则的部分类。
*   WebApp，它是一个 mvc 4 项目。

话虽如此，我将在哪些类中放置如下代码：

```
using(var ctx = new ModelContext())
{
    var user = new User(email, score);
    ctx.Users.Add(user);
    ctx.SaveChanges();
} 
```

这段代码会在模型中吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T00:39:36.637

我建议您使用更多的间接级别，它允许更清洁/更快的单元测试），并将代码放在存储库类中。有关存储库模式的更多信息，请参阅[http://huyrua.wordpress.com/2010/07/13/entity-framework-4-poco-repository-and-specification-pattern/ 。](http://huyrua.wordpress.com/2010/07/13/entity-framework-4-poco-repository-and-specification-pattern/)

# asp.net - 如何声明其他 Web 表单也可以在 ASP.NET 中使用的全局变量

> ID：15102101
> 
> 赞同：5
> 
> 时间：2013-02-27T00:32:07.360
> 
> 标签：asp.net, global-variables, webforms

这是一个示例全局声明变量：

```
Public Shared str as String 
```

但是这个全局声明仅适用于一个 Web 表单。是否可以声明其他 Web 表单可以使用的全局变量？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T00:58:02.050

Web 编程，即：asp.net，是无状态的。这意味着与传统的桌面编程不同，一个页面请求与另一个页面请求无关。

在页面之间共享信息有几种标准方式：全局、会话、Cookie、缓存、数据库、查询字符串参数和表单发布参数。

**全局**- 数据存储在 global.asax 文件中声明的全局变量中。此数据在所有用户/页面中都可用，并且在 IIS 进行重置或您有意将其清除之前将一直存在。通常是一个非常非常糟糕的主意，因为当值发生变化并且您通常不会在所有用户/会话之间共享可变值时，您很容易遇到线程问题。

**会话**- 数据存储在服务器端（或 Web 服务器的内存或状态服务器中）。这是每个用户。适用于单个 Web 服务器实现；然而，对于这篇关于负载平衡 Web 服务器的简单帖子来说，这些缺点过于复杂。在应用程序重启期间，内存中的会话可能会被清除；状态服务器将允许在该事件中保留会话值。但是，状态服务器通常需要数据库往返，这通常会抵消使用它而不是进行常规数据库调用的所有优势。

**Cookies** - 数据存储在浏览器中并在每个页面请求时发送。这是每个用户。适用于少量数据，一般小于 4KB。但是，数据被发送到浏览器，并且最终用户当然可以检查。通常你会希望数据加密。负载平衡的 Web 服务器没有问题；但是会导致客户端和服务器之间来回发送的数据量稍大一些。也没有关于 Web 服务器重启的问题。可以设置为关闭浏览器后自动清除。

**缓存**- 数据存储在像 memcache 这样的缓存机制中，它可能与 Web 服务器在同一台机器上，也可能不在同一台机器上。通常用于更高级的分布式应用程序。做你的研究。

**数据库**- 数据存储在某种类型的数据库中，例如 MS SQL Server。非常适合需要长期生存的持久数据。缺点是它需要调用数据库来按需提取数据；通用硬件和网络速度可以缓解这种情况。请注意，会话状态服务器具有完全相同的缺点。

**查询字符串**- 在页面之间传输一些数据的简单方法。例如在一个页面上显示帐户列表并在另一个页面上链接到单个帐户视图。对于在整个应用程序中保留一条数据通常没有用处。可以轻松地为网站上的特定视图添加书签。

**表单发布**- 类似于查询字符串。主要区别在于数据是从一个页面发布到另一个页面，而不是在查询字符串行上；这也不是书签。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T00:36:35.247

您可以通过使用网络表单的类型名称来访问它，类似于这样

```
Dim thisstr = MainPage.str
lblSomeLabel.Text = thisstr 
```

但是，您应该注意，每次加载页面时，都会重新构建整个 ASP.Net 堆栈。（这比这要复杂一些，但现在已经足够了）。因此，变量不会在页面请求之间持续存在。

您可能想研究使用 Session 变量。

# visual-studio-2010 - 远程调试 shell 扩展

> ID：15102110
> 
> 赞同：1
> 
> 时间：2013-02-27T00:33:38.760
> 
> 标签：visual-studio-2010, remote-debugging, windows-shell

众所周知，调试 shell 扩展并不容易。当 Visual Studio 支持从一台计算机到另一台计算机的远程调试时，我可以使用此功能在远程计算机上调试 shell 扩展吗？如果是，我如何使用 VS 将其部署到远程机器上。

# c++ - 模板类的内部类不会在 XCode 4.5.2 上编译

> ID：15102111
> 
> 赞同：1
> 
> 时间：2013-02-27T00:33:39.123
> 
> 标签：c++, xcode, templates, stl, iterator

在 XCode 4.5.2 中`Proxy`，下面定义的类无法编译。如有必要，我可以提供有关特定编译器的更多详细信息，尽管它应该是默认值，因为我没有更改 XCode 配置中的任何内容。它在 VStudio Express 中编译。

```
#include <list>
#include <boost/thread/tss.hpp>

template <typename T>
class Cache
{
public:
    class Proxy : public T
    {
        friend class Cache;

    private:
        std::list<Proxy> & m_refList;
        typename std::list<Proxy>::iterator m_clsPosition;

        Proxy(std::list<Proxy> & refList) : m_refList(refList) {}
    };

private:
    std::list<Proxy> m_clsList;
    typename std::list<Proxy>::iterator m_clsCurrent;

    static void Release(Proxy * ptrProxy)
    {
        ptrProxy->m_refList.splice(ptrProxy->m_refList.m_clsCurrent,
                                   ptrProxy->m_refList,
                                   ptrProxy->m_clsPosition);
        if ( ptrProxy->m_refList.m_clsCurrent == ptrProxy->m_refList.end() )
            --(ptrProxy->m_refList.m_clsCurrent);
    }

public:
    Cache() {m_clsCurrent = m_clsList.end();}
    ~Cache()
    {
        if ( m_clsList.size() && m_clsCurrent != m_clsList.begin() )
        {
            // ERROR - Cache not empty
        }
    }

    typedef boost::shared_ptr<Proxy> Ptr;

    static Ptr Get()
    {
        static boost::thread_specific_ptr<Cache> clsCache;
        if ( clsCache.get() == NULL )
            clsCache.reset(new Cache());

        Proxy * ptrProxy;
        if ( clsCache->m_clsCurrent == clsCache->m_clsList.end() )
        {
            clsCache->m_clsList.push_front(Proxy(clsCache->m_clsList));
            ptrProxy = &(clsCache->m_clsList.front());
            ptrProxy->m_clsPosition = clsCache->m_clsList.begin();
        }
        else
        {
            ptrProxy = &(*(clsCache->m_clsCurrent));
            ptrProxy->m_clsPosition = clsCache->m_clsCurrent++;
        }
        return Ptr(ptrProxy, Release);
    }
}; 
```

编译错误就行了`typename std::list<Proxy>::iterator m_clsPosition`：

```
No type named 'iterator' in 'std::__1::list<ASW::Cache<std::__1::basic_string<char>>::Proxy, std::__1::allocator<ASW::Cache<std::__1::basic_string<char>>::Proxy>>' 
```

（缓存的模板参数是`std::basic_string<char>`）

我了解正在发生的事情 - 我在`Proxy`完全定义之前引用它。但是为什么编译`iterator`需要定义呢？`Proxy`

数据结构的原因有两个：1）回收对象而不是销毁它们，2）通过将缓存对象中的迭代器保持在列表中的位置来加速回收。如果有人对如何实现这些有更好的了解（假设无法修复此错误），我很想听听。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T04:58:56.170

`std::list`您的代码具有未定义的行为，因为您正在使用不完整的类型进行实例化（`Proxy`尚未在其定义中定义）。`[res.on.functions]/2`：

> ...效果是未定义的...如果在实例化模板组件时将不完整的类型用作模板参数，除非该组件特别允许。

尝试使用[适用于不完整类型](http://www.boost.org/doc/libs/release/doc/html/container/containers_of_incomplete_types.html)`list`的实现，例如[boost::container::list](http://www.boost.org/doc/libs/release/doc/html/boost_container_header_reference.html#header.boost.container.list_hpp)。

# javascript - JavaScript setInterval 只运行一次

> ID：15102114
> 
> 赞同：1
> 
> 时间：2013-02-27T00:33:48.223
> 
> 标签：javascript, image, setinterval

```
function smoothTransition(o,n)
{
    o.style.opacity = 0;
    o.src = n;
    var timer = setInterval(function(){
        if (o.style.opacity == 1){
            clearInterval(timer);
        }
        o.style.opacity += 0.01;
    }, 10);
} 
```

这里 o 是对象（在这种情况下是一个 img）， n 是将替换当前图像的新图像的名称。但是当我运行此代码时，它只运行一次并为新图像提供 0.01 的不透明度，然后停止。这可能是什么原因造成的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T00:43:44.680

`style.opacity`是字符串，不是数字。当你这样做时`o.style.opacity += 0.1`，结果实际上是`'00.1'`，这是有效的，但在下一次迭代中它变成`00.10.1`，而不是，所以不透明度被重置为`0`。

这很容易通过`style.opacity`在添加时转换为数字来解决。

[http://jsfiddle.net/TZ9Vd/1/](http://jsfiddle.net/TZ9Vd/1/)

# javascript - HTML选择中的选取框文本

> ID：15102119
> 
> 赞同：0
> 
> 时间：2013-02-27T00:34:08.373
> 
> 标签：javascript, html, html-select, marquee

我有一个 HTML 选择菜单，其中的选项来自动态列表。我想要的是，如果选项的长度大于选择框，则选项文本应该像在选取框中一样向右移动，但在遇到文本结尾时立即停止。

我正在选择框内使用选取框尝试此操作，但无法获得结果。

请指教！

# java - LWJGL 3.2.0+ 字体

> ID：15102120
> 
> 赞同：4
> 
> 时间：2013-02-27T00:34:09.433
> 
> 标签：java, lwjgl, slick

我使用 lwjgl 已经有一段时间了，最​​近我决定从固定功能管道切换到着色器。所以，当我开始我的程序时，我首先设置了 ContextAttrib(3, 2)，所以我将使用 GL 3.2+。问题是当我打开更高版本的 GL 时，许多功能变得不受支持。在切换到更高的 GL 之前，我使用 Slick 的字体 (TrueTypeFont) 来渲染我需要的文本，但现在 TrueTypeFont 的 drawString 方法本身具有不受支持的功能。我试图用谷歌搜索解决方案，但没有任何结果。

有谁知道在使用 GL 3.2+ 版或其他库时是否可以使用 slick-util 库渲染文本？或有关该主题的任何链接。我将不胜感激任何帮助或建议。

编辑：启动 OpenGL 3.2 和更新版本的代码形成了 wiki 上的教程

```
try
    {
        PixelFormat pixelFormat = new PixelFormat();
        ContextAttribs contextAtrributes = new ContextAttribs(3, 2)
            .withForwardCompatible(true)
            .withProfileCore(true);

        Display.create(pixelFormat, contextAtrributes);
    } catch (LWJGLException e){
        e.printStackTrace();
        return;
    } 
```

通过使用 openGL 3.2 或更新版本，您被迫只使用着色器。在 UnicodeFont 或 TrueTypeFont 或任何其他固定函数管道函数如 GL11.glMatrixMode(GL11.GL_PROJECTION); 上调用 drawString 时出现的异常：

```
Exception in thread "Thread-0" java.lang.IllegalStateException: Function is not supported
at org.lwjgl.BufferChecks.checkFunctionAddress(BufferChecks.java:58)
at org.lwjgl.opengl.GL11.glColor4f(GL11.java:881)
at org.newdawn.slick.opengl.renderer.ImmediateModeOGLRenderer.glColor4f(ImmediateModeOGLRenderer.java:127)
at org.newdawn.slick.Color.bind(Color.java:182)
at org.newdawn.slick.UnicodeFont.drawDisplayList(UnicodeFont.java:443)
at org.newdawn.slick.UnicodeFont.drawString(UnicodeFont.java:551)
at org.newdawn.slick.UnicodeFont.drawString(UnicodeFont.java:559)
at org.newdawn.slick.UnicodeFont.drawString(UnicodeFont.java:555)
at application.Controller.render3D(Controller.java:163)
at Engine.Engine.renderScene3D(Engine.java:230)
at Engine.Engine.render(Engine.java:334)
at Engine.Engine.gameLoop(Engine.java:306)
at Engine.Engine.access$1(Engine.java:246)
at Engine.Engine$1.run(Engine.java:154) 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-11T21:36:23.247

A similar question popped up on the GameDevSE as well you might want for check it out [here](https://gamedev.stackexchange.com/questions/71578/why-do-i-get-function-not-supported-exceptions-for-opengl-3-2-functions-using)

Citing:

> It sounds like you probably didn't [actually request an appropriately-versioned OpenGL context](http://lwjgl.org/wiki/index.php?title=Version_selection) (that is, one with 3.2 support). To do so, you must provide context attributes requesting the desired version when you call Display.create()

```
PixelFormat pixelFormat = new PixelFormat();
ContextAttribs contextAtrributes = new ContextAttribs(3, 2)
    .withForwardCompatible(true)
    .withProfileCore(true);

try {
      Display.setDisplayMode(new DisplayMode(320, 240));
      Display.setTitle("Version selection");
      Display.create(pixelFormat, contextAtrributes);
} catch (LWJGLException e) {
    e.printStackTrace();
    System.exit(-1);
} 
```

# html - 本地计算机上的 Img Src

> ID：15102122
> 
> 赞同：3
> 
> 时间：2013-02-27T00:34:15.663
> 
> 标签：html, image, local

我想这是一个常见的初学者问题，但我没有找到完全涵盖我的问题的答案：我无法链接到本地​​计算机上的图像。

我正在为 wordpress 安装制作主题（在使用 Xampp 运行 Windows 7 的戴尔上）。我的`index.php`文件位于：

```
C:\xampp\htdocs\tutorials\wordpress\wp-content\themes\LeftColumn\index.php 
```

我要展示的图片位于：

```
C:\xampp\htdocs\tutorials\wordpress\wp-content\themes\LeftColumn\images\pmsplogo.jpg 
```

...虽然我尝试了很多变化，但不知何故，我放的任何东西`<img src=""/>`似乎都不起作用。谁能解释一下针对我的情况进行编码的正确方法是什么？

请注意，它将正确显示来自外部网站的图像（例如： http: [//littlewebhut.com/images/eightball.gif](http://littlewebhut.com/images/eightball.gif)）

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T00:44:18.437

通常 IE 可以使用类似的路径`C:\`，但其他浏览器需要更多的东西。以路径开头`file:///C:/`，然后通过 Windows 资源管理器填写文件路径的其余部分。

但最好考虑相对路径——`../../images/src="img.gif"`例如。这将是从当前位置向上的两个目录，然后进入图像目录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T00:35:32.040

HTML 中文件的路径来自 Web 根目录。`\tutorials\wordpress\wp-content\themes\LeftColumn\images\pmsplogo.jpg`在您的本地计算机和远程服务器上也是如此。如果它不工作，那么你需要确保你的路径是正确的，并且你已经正确地设置了两个服务器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-02T04:02:49.833

您应该`<?php bloginfo('template_url');?>`在实际路径之前添加。假设您在主题中`logo.png`调用的文件夹中有一张图片。`images`要将其链接到 Wordpress 主题（index.php 或其他 wordpress 模板页面）中，您可以执行以下操作：

```
<img src="<?php bloginfo('template_url');?>/images/logo.png" alt="Logo"/> 
```

上面的 php 函数 ( `bloginfo`) 正在调用您的模板 url。对于此模板 url，您需要添加文件实际文件在您的主题中的位置（在本例中`/images/logo.png`）。

希望这是有道理的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T00:50:16.397

没有**必要**在模板框架中**写入整个路径**。这应该足够了：`\images\pmsplogo.jpg`

这是我的 WordPress 模板的屏幕，上面描述的条目工作得很好：

*   [http://stepolabs.com/upload/path.png](http://stepolabs.com/upload/path.png)

如果您正在移动模板，则无需更改每个 img 的路径。是很大的优势。

# android - 电池更换广播接收器在某些手机上崩溃的应用程序

> ID：15102124
> 
> 赞同：4
> 
> 时间：2013-02-27T00:34:18.790
> 
> 标签：android

每当手机插入电源时，我都会激活我的应用程序。这是我的清单

```
<receiver android:name=".PowerConnectionReceiver">
      <intent-filter>
        <action android:name="android.intent.action.ACTION_POWER_CONNECTED"/>
        <action android:name="android.intent.action.ACTION_POWER_DISCONNECTED"/>
      </intent-filter>
    </receiver> 
```

这是我的广播接收器

```
 @Override
    public void onReceive(Context context, Intent intent) {
        Log.w("TAG", "Just received connection broadcast");

        IntentFilter ifilter = new IntentFilter(Intent.ACTION_BATTERY_CHANGED);
        Intent batteryStatus = context.registerReceiver(null, ifilter); //this line is causing the crash

        int status = batteryStatus.getIntExtra(BatteryManager.EXTRA_STATUS, 0); 
```

现在，导致我朋友手机崩溃的线路（在我的手机上一切正常）是这条线路

```
Intent batteryStatus = context.registerReceiver(null, ifilter); 
```

有人可以告诉我是什么原因以及如何解决吗？我的手机是带有最新安卓 JB 的 Galaxy nexus，他的手机是带有姜饼的 LG 擎天柱

这是日志猫

```
 02-27 01:25:19.399: D/AndroidRuntime(5326): Shutting down VM
02-27 01:25:19.399: W/dalvikvm(5326): threadid=1: thread exiting with uncaught exception (group=0x40018560)
02-27 01:25:19.419: E/AndroidRuntime(5326): FATAL EXCEPTION: main
02-27 01:25:19.419: E/AndroidRuntime(5326): java.lang.RuntimeException: Unable to start receiver com.doublep.wakey.PowerConnectionReceiver: android.content.ReceiverCallNotAllowedException: IntentReceiver components are not allowed to register to receive intents
02-27 01:25:19.419: E/AndroidRuntime(5326):     at android.app.ActivityThread.handleReceiver(ActivityThread.java:1926)
02-27 01:25:19.419: E/AndroidRuntime(5326):     at android.app.ActivityThread.access$2400(ActivityThread.java:123)
02-27 01:25:19.419: E/AndroidRuntime(5326):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:989)
02-27 01:25:19.419: E/AndroidRuntime(5326):     at android.os.Handler.dispatchMessage(Handler.java:99)
02-27 01:25:19.419: E/AndroidRuntime(5326):     at android.os.Looper.loop(Looper.java:130)
02-27 01:25:19.419: E/AndroidRuntime(5326):     at android.app.ActivityThread.main(ActivityThread.java:3835)
02-27 01:25:19.419: E/AndroidRuntime(5326):     at java.lang.reflect.Method.invokeNative(Native Method)
02-27 01:25:19.419: E/AndroidRuntime(5326):     at java.lang.reflect.Method.invoke(Method.java:507)
02-27 01:25:19.419: E/AndroidRuntime(5326):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:864)
02-27 01:25:19.419: E/AndroidRuntime(5326):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:622)
02-27 01:25:19.419: E/AndroidRuntime(5326):     at dalvik.system.NativeStart.main(Native Method)
02-27 01:25:19.419: E/AndroidRuntime(5326): Caused by: android.content.ReceiverCallNotAllowedException: IntentReceiver components are not allowed to register to receive intents
02-27 01:25:19.419: E/AndroidRuntime(5326):     at android.app.ReceiverRestrictedContext.registerReceiver(ContextImpl.java:151)
02-27 01:25:19.419: E/AndroidRuntime(5326):     at android.app.ReceiverRestrictedContext.registerReceiver(ContextImpl.java:145)
02-27 01:25:19.419: E/AndroidRuntime(5326):     at com.doublep.wakey.PowerConnectionReceiver.onReceive(PowerConnectionReceiver.java:46)
02-27 01:25:19.419: E/AndroidRuntime(5326):     at android.app.ActivityThread.handleReceiver(ActivityThread.java:1915)
02-27 01:25:19.419: E/AndroidRuntime(5326):     ... 10 more 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T00:52:25.653

你得到一个[`ReceiverCallNotAllowedException`](http://developer.android.com/reference/android/content/ReceiverCallNotAllowedException.html).

> 当从 BroadcastReceiver 组件使用这些方法时，`registerReceiver(BroadcastReceiver, IntentFilter)`会引发此异常。`bindService(Intent, ServiceConnection, int)`在这种情况下，组件在接收 Intent 返回后将不再处于活动状态，因此使用异步 API 无效。

这意味着，您不能`BroadcastReceiver` *在*a 中注册a `BroadcastReceiver`。

**编辑：**`ACTION_BATTERY_CHANGED`监听Intent 的 BroadcastReceiver 的工作示例：

```
 private int mBatteryLevel;
    private IntentFilter mBatteryLevelFilter;

    BroadcastReceiver mBatteryReceiver = new BroadcastReceiver() {
        @Override
        public void onReceive(Context context, Intent intent) {
            mBatteryLevel = intent.getIntExtra(BatteryManager.EXTRA_LEVEL, -1);
            Toast.makeText(context, "Current Battery Level: " + mBatteryLevel, Toast.LENGTH_LONG).show();
        }
    };

    private void registerMyReceiver() {
        mBatteryLevelFilter = new IntentFilter(Intent.ACTION_BATTERY_CHANGED);
        registerReceiver(mBatteryReceiver, mBatteryLevelFilter);
    } 
```

现在您只需调用`registerMyReceiver()`.

# c++ - 基于链表的向量

> ID：15102127
> 
> 赞同：1
> 
> 时间：2013-02-27T00:34:57.890
> 
> 标签：c++, containers

我在考虑使用`std::vector`容器的缺点，并且想知道使用分块链表作为后端是否可以避免在向量扩展时发生的复制。

像[这样](https://docs.google.com/a/polynomic3d.com/file/d/0B2_dEKzRxdQnc0p1QTRZb0tlYjA/edit)的东西。

我想我的问题是，这是一个实用的想法吗？我是否可以假设从容器中读取的运行时间与基于数组的向量相似，而“增长”时间会大大减少？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T00:36:19.020

您可以使用 做一些实验`std::deque`，这只是您的描述。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T00:38:47.403

您的解决方案的运行时（随机）访问将大于`std::vector`.

为了访问 element `N`，您可能必须通过许多链接才能到达相应的块，然后通过该块访问一个元素。

可以通过预先分配更大的大小来降低大向量的性能。

如果插入和删除频繁，则向量可能是错误的数据结构。

# java - Spring 3.1 REST @PathVariable 依赖项

> ID：15102134
> 
> 赞同：1
> 
> 时间：2013-02-27T00:35:44.097
> 
> 标签：java, spring, rest, spring-mvc

我正在使用**Spring MVC 3.1创建一个****RESTful API**。我有一个唯一的数据库，所以我的 REST url必须包含，所以我知道要连接到哪个数据库。 **`Project``Collection``Project`**

 **我已经习惯`registerCustomEditor`了`@InitBinder`自动神奇地解决`@PathVariable Project project` *（太棒了！）*。

但是现在我变得贪婪了，我想自动解决`@PathVariable Collection collection`而不是在这个控制器的每个动作中一遍又一遍地做同样的事情。问题在于，这`Collection`取决于`Project`得到解决。那么如何使用这种依赖项进行设置呢？

谢谢你的帮助！！

```
@Controller
@RequestMapping(value = "/project/{project}/collection", produces = {"application/json", "application/xml"})
public class CollectionController {

    private static final Logger log = LoggerFactory.getLogger(CollectionController.class);  

    @Autowired protected ProjectRepository projectRepository;
    @Autowired protected CollectionService collectionService;
    @Autowired protected PermissionService permissionService;

    @RequestMapping(method = RequestMethod.GET)
    public @ResponseBody List<CollectionResponse> query(@ActiveAccount Account account, @PathVariable Project project) {

        if (!permissionService.hasProjectAccess(account, project)) {
            throw new AccessDeniedException("Access Denied");
        }

        CollectionRepository collectionRepository = collectionService.getCollectionRepository(project);
        List<Collection> collections = collectionRepository.findByProjectId(project.getId());

        List<CollectionResponse> response = new ArrayList<>();
        for (Collection collection : collections) {
            response.add(new CollectionResponse(collection));
        }

        return response;
    }

    @RequestMapping(value = "/{collection}", method = RequestMethod.GET)
    public @ResponseBody CollectionResponse get(@ActiveAccount Account account, @PathVariable Project project, @PathVariable String collection) {

        if (!permissionService.hasProjectAccess(account, project)) {
            throw new AccessDeniedException("Access Denied");
        }

        CollectionRepository collectionRepository = collectionService.getCollectionRepository(project);

        return new CollectionResponse(collectionRepository.findOne(collection));
    }

    @InitBinder
    public void initBinder(WebDataBinder binder) {
        binder.registerCustomEditor(Project.class, new PropertyEditorSupport() {

            @Override
            public String getAsText() {
                return ((Project) this.getValue()).getId();
            }

            @Override
            public void setAsText(String text) throws IllegalArgumentException {
                setValue(projectRepository.findOne(text));
            }
        });
    }   

} 
```**

# iphone - 如何根据坐标过滤数据？

> ID：15102137
> 
> 赞同：-3
> 
> 时间：2013-02-27T00:35:57.570
> 
> 标签：iphone, ios, objective-c, mkmapview

在我的应用程序中，我有很多位置，根据当前位置，我需要过滤结果并仅显示半径 5 英里内的结果。有没有办法做到这一点？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T00:41:22.573

CLLocation 有 distanceFromLocation，可以这样调用

```
CLLocation dist = [locationA distanceFromLocation:locationB]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T00:41:45.843

试试这个功能。这将对您有所帮助。

```
-(void)distanceBetween{

double latitude1 = [merchant.latitude doubleValue];
double longitude1 = [merchant.longitude doubleValue];

NSUserDefaults *userLocation = [NSUserDefaults standardUserDefaults];
float lat = [userLocation floatForKey:@"latitude"];
float lon = [userLocation floatForKey:@"longitude"];

CLLocation *locA = [[CLLocation alloc] initWithLatitude:latitude1 longitude:longitude1];
CLLocation *locB = [[CLLocation alloc] initWithLatitude:lat longitude:lon];

CLLocationDistance distanceTo = [locA distanceFromLocation:locB];
NSLog(@"locaA is %f", locA);
NSLog(@"locaB is %f", locB);
NSLog(@"locdistnace is %f", distanceTo);
[[self distance] setText:[NSString stringWithFormat:@"%0.2f miles", distanceTo/1609.34]];

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T00:48:40.767

像这样的东西应该可以工作，但还没有测试过：

```
- (NSArray *)filterArrayOfLocations:(NSArray *)array byDistance:(CLLocationDistance)distance toCurrentLocation:(CLLocation*)currentLocation
{
    NSArray *filteredArray = [array filteredArrayUsingPredicate:[NSPredicate predicateWithBlock:^BOOL(id evaluatedObject, NSDictionary *bindings) {
        return [currentLocation distanceFromLocation:(CLLocation *)evaluatedObject] < distance;
    }]];
    return filteredArray;
} 
```

# c++ - boost::any and templates

> ID：15102139
> 
> 赞同：5
> 
> 时间：2013-02-27T00:36:03.140
> 
> 标签：c++, templates, boost-any

I'm writing a library which involves a good amount of both template trickery and boost::any. I've run into a situation where I essentially have this:

```
boost::any a1, a2, a3, a4; 
```

... and I need to call a function which looks like this:

```
template <typename A1, typename A2, typename A3, typename A4>
void somefunc (A1 a1, A2 a2, A3 a3, A4 a4); 
```

I could resort to an obscenely nested series of if statements, but assuming I'm handling 10 distinct types, that's 10,000 if statements! Boost preprocessor could help here, but this is still a horrible solution.

Is there a better way to call a templated function with the contents of a boost::any without resorting to this sort of madness? As far as I can tell, there is not.

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-27T01:26:08.023

If all your `any` objects can be set at the same time, you can just hard-code the type for the function pointer then and there. Stuff it all into a seperate object and you're good to go. This is basically a double-take on [type-erasure](https://stackoverflow.com/q/5450159/500104), and could also be implemented through virtual functions (like how `boost::any` works internally), but I like this version more:

```
// note that this can easily be adapted to boost::tuple and variadic templates
struct any_container{
  template<class T1, class T3, class T3>
  any_container(T1 const& a1, T2 const& a2, T3 const& a3)
    : _ichi(a1), _ni(a2), _san(a3), _somefunc(&somefunc<T1, T2, T3>) {}

  void call(){ _somefunc(_ichi, _ni, _san); }

private:
  boost::any _ichi, _ni, _san;
  // adjust to your need
  typedef void (*func_type)(boost::any&, boost::any&, boost::any&);
  func_type _somefunc;

  template<class T1, class T2, class T3>
  void somefunc(boost::any& a1, boost::any& a2, boost::any& a3){
    // access any objects with 'boost::any_cast<TN>(aN)'
  }
}; 
```

# c# - Windows：如何将路径较长的文件移动到回收站？

> ID：15102146
> 
> 赞同：5
> 
> 时间：2013-02-27T00:36:37.800
> 
> 标签：c#, python, windows, winapi, recycle-bin

我正在使用 Python，但我认为 C# 中存在同样的问题。

我希望能够支持扩展路径（len > 260 的路径，表示为 //?/c:/blah/blah）。看起来将文件移动到回收站的标准方法是通过 SHFileOperationW 或 SHFileOperation。

在 python 中，有用的 xplatform 库 move2trash 使用 SHFileOperationW。一些关于 C# 的文章说要使用相同的东西。

SHFileOperationW 的问题在于它不支持扩展路径。这是 SH 工具的一般限制。

有没有人有任何处理回收站和扩展路径的技巧？

参考链接：[C#版](https://stackoverflow.com/questions/3282418/send-a-file-to-the-recycle-bin)、[Python版](https://stackoverflow.com/questions/3628517/how-can-i-move-file-into-recycle-bin-trash-on-different-platforms-using-pyqt4)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T01:12:22.490

如果您想查看一些 C# 解决方案，快速搜索“PathTooLongException”会在 Stack Overflow 上引发很多讨论。您可能可以检索“短名称”并使用它来移动它。[此外，您可以通过http://bcl.codeplex.com/wikipage?title=Long%20Path](http://bcl.codeplex.com/wikipage?title=Long%20Path)上的解决方法查看并查看他们在此 C# 库中如何处理它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T01:34:12.957

你没有。不能将路径超过 259 个字符的文件放入回收站。

# javascript - 拖放时JQuery列表项链接丢失

> ID：15102148
> 
> 赞同：2
> 
> 时间：2013-02-27T00:36:41.560
> 
> 标签：javascript, jquery, drag-and-drop

下面的代码将一个列表项拖放到一个框中。但是，当我将链接作为列表项放入时，一旦拖放，这些项目就不再显示为链接（它们只是显示为文本）。请帮忙。这将很快用于一个项目。我将不胜感激。

///// JAVASCRIPT-------------------------------------------------------- -----------------

```
a = 0;
num = 1;

$(document).ready(function() {
        $('li').draggable({ containment: 'document', revert: true,
    start: function() {
        contents = $(this).text();
    }
});
    $('#list').droppable({ hoverClass: 'border', accept: '.item',
    drop: function() {

    if(a % 4 == 0) {
        $('#list').append('<br / >');
    }
     $('#list').append(num + '. ' + contents + '&nbsp;' + '&nbsp;' + '&nbsp;' + '&nbsp;');
        a = a + 1;
        num = num + 1;

    }
    }); 
}); 
```

///// HTML-------------------------------------------- ------------------------------------------- JQuery 教程

```
</head>

<body>
<table>
<td>
<tr>
Create Your Own Playlist <br />
Simply Drag and Drop the Lessons You'd Like to View
</tr>
</td>
<td>

    <ul>
        <li class="item">Agility</li>
        <li class="item">Broadband</li>
        <li class="item">Cloud</li>
        <li class="item"> <a href="facebook.com">Link text</a> </li>
    </ul>

    </td>

    <td>
    <ul>
        <li class="item">Flexibility</li>
        <li class="item">Hybrid</li>
        <li class="item">Interoperability</li>
        <li class="item"> <a href="facebook.com">Link text</a> </li>
    </ul>
    </td>

    <td>
    <ul>
        <li class="item">Community</li>
        <li class="item">Portability</li>
        <li class="item">Elasticity</li>
        <li class="item"> <a href="facebook.com">Link text</a> </li>
    </ul>
    </td>

    <td>
    <ul>
        <li class="item">Infrastructure</li>
        <li class="item">Migration</li>
        <li class="item">Multi-Tenancy</li>
        <li class="item"> <a href="facebook.com">Link text</a> </li>
    </ul>
    </td>

    <td>
    <ul>
        <li class="item">Navigation</li>
        <li class="item">Optimization</li>
        <li class="item">Private</li>
        <li class="item"> <a href="facebook.com">Link text</a> </li>
    </ul>
    </td>

    <td>
    <ul>
        <li class="item">Provisioning</li>
        <li class="item">Public</li>
        <li class="item">Risk</li>
        <li class="item"> <a href="facebook.com">Link text</a> </li>
    </ul>
    </td>

    <td>
    <ul>
        <li class="item">Security</li>
        <li class="item">Smart Phones</li>
        <li class="item">Social Media</li>
        <li class="item"> <a href="facebook.com">Link text</a> </li>
    </ul>
    </td>

    <td>
    <ul>
        <li class="item">Standards</li>
        <li class="item">Storage</li>
        <li class="item">Virtual Machines</li>
        <li class="item"> <a href="facebook.com">Link text</a> </li>
    </ul>
    </td>

    </table>

    <div id="list"></div>
        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.5.0/jquery.min.js"></script>
        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.9/jquery-ui.min.js"></script>
        <script type="text/javascript" src="ui.js"></script>
</body>
</html> 
```

///// CSS-------------------------------------------------------- ------------------------------------- @charset "utf-8"; /* CSS 文档 */

```
ul {
    width: 100px;
    padding: 0px;
    list-style: none;

}

#list {
    width: 800px;
    height: 150px;
    background-color: #f0f0f0;
    border: 1px solid #000;
    overflow: auto;
}

#list.border {
    border-width: 2px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T06:00:21.323

这：

```
contents = $(this).text(); 
```

只是发送文本。如果您改用 html：

```
contents = $(this).html(); 
```

您将通过拖放事件发送整个 html 块。您可以保持其余代码相同。

工作示例：http: [//jsfiddle.net/MLhgk/](http://jsfiddle.net/MLhgk/)

更多关于 JQuery .html() - [http://api.jquery.com/html/](http://api.jquery.com/html/)

# android - 如何确定设备上默认 Home 启动器的包名称是什么？

> ID：15102150
> 
> 赞同：1
> 
> 时间：2013-02-27T00:37:04.313
> 
> 标签：android, android-launcher

我试图找出如何检测给定设备上的实际包名称，该设备用于其库存 Home 启动器。

在大多数设备上，这很明显，但我有几个（Galaxy Note 2 和 LG Spectrum）我一辈子都无法推断出他们的 Home 是什么应用程序包。

我需要这个的原因是我正在制作一个将自身安装为 Home 应用程序的应用程序，并且我想让用户能够返回到本机 Home，所以我想为他们手动启动它。

有什么方法可以从设备本身获取这些信息，或者有什么程序化的方式来检测它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T17:29:09.613

这会测试我目前正在测试的所有设备...如果 if 子句不涵盖某些设备，您需要查看日志以查看包名称是什么并将其名称的一些相关部分添加到字符串匹配器。

```
void getDefaultLauncher() {

    final Intent intent = new Intent(Intent.ACTION_MAIN); 
    intent.addCategory(Intent.CATEGORY_HOME); 
    final List<ResolveInfo> list = ((PackageManager)getPackageManager()).queryIntentActivities(intent, 0);      

    //String className = null;
    for(ResolveInfo ri : list){
        L.d("FOUND NATIVE LAUNCH ACTIVITY " + ri.activityInfo.packageName);
        if(ri.activityInfo.packageName.contains("com.lge") ||  ri.activityInfo.packageName.contains("android") || ri.activityInfo.packageName.contains("motorola.homescreen")  || ri.activityInfo.packageName.contains("htc.launcher") ){
            L.d("LAUNCHING " + ri.activityInfo.packageName);
            startSpecificActivity(ri);
            return;
        }
    }

    L.d("DIDN'T FIND MATCHING HOME APP");       
}

public void startSpecificActivity(ResolveInfo launchable) {

         ActivityInfo activity=launchable.activityInfo;

         ComponentName name=new ComponentName(activity.applicationInfo.packageName,   activity.name);

        Intent i=new Intent(Intent.ACTION_MAIN);
        i.addCategory(Intent.CATEGORY_LAUNCHER);
        i.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK |
                        Intent.FLAG_ACTIVITY_RESET_TASK_IF_NEEDED);
        i.setComponent(name);
        startActivity(i);    
    } 
```

# azure - 服务总线通知中心：如何从后端进行注册管理

> ID：15102151
> 
> 赞同：1
> 
> 时间：2013-02-27T00:37:12.003
> 
> 标签：azure, push-notification, azure-notificationhub

我正在尝试将 Azure 通知中心用于推送通知。根据[MSDN 文章](http://msdn.microsoft.com/en-us/library/jj927170.aspx)，注册管理有两种方法。在教程中，它解释了第一种方法 - 客户端应用程序中的注册管理。但是，它看起来更适合我的需要第二种方法 - 应用后端中的注册管理。

我找不到任何文档或示例如何做到这一点。具体来说，我对与 iOS 移动应用程序的集成感兴趣。
据我了解，注册流程应该是这样的：

1.  原生应用程序在启动期间向后端发送 HTTP 请求，传递设备 ID 和应用程序名称。
2.  后端假设在通知中心注册设备（我猜使用 CreateAppleTemplateRegistration 进行模板通知）
3.  一旦注册过期，后端负责更新注册

这是正确的吗？有人知道后端注册管理的示例或文档吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T18:52:35.763

## 更新

该方案现在已在以下位置进行了充分解释： http: [//www.windowsazure.com/en-us/manage/services/notification-hubs/notify-users-aspnet/](http://www.windowsazure.com/en-us/manage/services/notification-hubs/notify-users-aspnet/)

下面的解决方案不再起作用，因为通知中心不在预览版中，并且 .NET SDK 中有一些重大更改。

## 旧答案

您概述的解决方案是正确的。需要注意的是，从应用程序后端进行注册管理时，您必须将当前注册的令牌存储在某处（通常在设备应用程序中，但在后端的安装表中也可以）。

假设您将“旧”令牌存储在设备上，您必须实现以下逻辑。

**在后端**

一个接受两个参数的端点：“oldToken”、“newToken”。基本上，这要么创建一个新注册（根据需要更改模板/本机或标签），要么更新当前注册。

```
var hubClient = NotificationHubClient.CreateClientFromConnectionString(connectionString, "<notification hub name>");
if (hubClient.RegistrationExists("oldDeviceToken"))
{
    hubClient.UpdateRegistrationsWithNewPnsHandle("oldDeviceToken", "newDeviceToken");
} else
{
    hubClient.CreateAppleNativeRegistration("newDeviceToken", new string[] {"myTag"});
} 
```

在您修改当前注册、添加标签、修改模板的情况下，可能会有更多场景……在 hubClient 上，您拥有所有这些方法，它们是不言自明的。[本文](http://msdn.microsoft.com/en-us/library/jj927168.aspx)末尾提供了一些高级信息。

**在设备应用程序中**

实现以下逻辑：

*   如果没有存储旧令牌，则使用新令牌（backendEndpoint（newToken，newToken））联系后端，当它返回时将令牌存储在本地
*   如果有旧令牌，并且它与新令牌不同，请使用新旧令牌（backendEndpoint（oldToken，newToken））联系后端，当调用完成时将新令牌存储在本地。
*   如果有旧token和新token没有区别，但最后一次注册发生在30多天前，用旧token调用后端(backendEndpoint(oldToken, oldToken))。

我们将尽快为此场景添加一个示例。

# c# - 自定义 Linq-to-SQL 映射源

> ID：15102152
> 
> 赞同：4
> 
> 时间：2013-02-27T00:37:11.457
> 
> 标签：c#, .net, linq, linq-to-sql, orm

我有一个项目，它将编译的实体框架域与动态定义的外部数据库混合在一起。用户可以在运行时提供连接字符串、表名和列名来访问外部系统。我之前一直在使用动态生成的 SQL 来访问外部系统（当然要小心地避免 SQL 注入），并将感兴趣的表读入`DataTable`'s 并将它们具体化为 POCO's。

现在，我 90% 的视图使用`IQueryable`对象来检查数据库查询的结构和格式/页面/有效地操作视图。*这使我可以在执行查询之前*对查询进行大量工作。对于涉及外部系统记录的视图，我只是咬紧牙关使用`IEnumerable.AsQueryable()`.

我非常想使用不同的解决方案。我倾向于 Linq-to-SQL（我愿意接受其他建议），但我坚持创建一个动态的`MappingSource`. 此外，有些列是可选的，如果我不为每一列提供映射，我不知道 Linq-to-SQL 是否会崩溃。

```
public class ExternalMappingSource : MappingSource
{
    public string[] KeyColumns { get; set; }

    public string NameColumn { get; set; }

    public string DescriptionColumn { get; set; }

    public string TimestampColumn { get; set; }

    protected override MetaModel CreateModel(Type dataContextType)
    {
        // ???
    }
} 
```

我一直无法在网上找到任何好的资源。我如何冲出这门课？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T00:52:01.570

如果您事先知道相关结构（表和字段值），则可以基于该数据输入自定义映射源，而无需事先获得对象。对我来说，出于不同的原因，我最终使用了 XmlMappingSource 对象，因为它有一个 .FromXml() 方法，您可以使用它来输入任意 Xml。如果您查看 sqlmetal 生成的映射文件，您可以了解所需的 Xml 的结构：

*   打开 VS 命令提示符（它位于开始菜单的 Visual Studio 工具文件夹中）。
*   将目录更改为您的项目。
*   输入命令“sqlmetal /map:whatever.map /code yourlinqtosql.dbml”。这会生成一个带有格式化 Xml 的whatever.map 文件。

根据需要以编程方式更改以输入 XmlMappingSource.FromXml() 方法。然后，您可以使用相关的连接字符串和更改的映射源创建您的上下文。

# java - 在 Java 中使用正弦/余弦定律需要帮助

> ID：15102155
> 
> 赞同：1
> 
> 时间：2013-02-27T00:37:25.030
> 
> 标签：java, trigonometry

我正在做一个项目，我必须在给定边长的情况下找到三角形的角度，并且我认为编写程序可以简化事情。但是，我的代码不起作用。

```
int a, b, c; // distance lengths
double A, B, C; // angle measurements

public FootprintSet(int sideA, int sideB, int sideC) {
    a = sideA;
    b = sideB;
    c = sideC;  
    computeAngles();
}

private void computeAngles() {
   A = Math.acos((b * b + c * c - a * a)/(2.0 * b * c)); // law of cosines
   B = Math.asin((Math.sin(A) * b)/a); // law of sines
   C = 180 - (A + B); 
}

public int getPacing() {
    return (int)(A+0.5);
}

public int getStride() {
    return (int)((C + B)/2.0 + 0.5); // average of two stride angles
} 
```

对于我创建的任何对象，getStride() 总是返回一个舍入为 89 的值，而 getPacing() 总是返回一个舍入为 2 或 3 的值。我做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-27T00:41:39.370

```
C = 180 - (A + B); 
```

这告诉我你正在使用学位。

但是，`Math.sin`需要弧度。

尝试`Math.sin(Math.toRadians(A))`改用。

# python - Pandas：为什么 DataFrame.drop(labels) 返回带有已删除标签名称的 DataFrame

> ID：15102158
> 
> 赞同：0
> 
> 时间：2013-02-27T00:37:52.500
> 
> 标签：python, pandas

当我从 DataFrame 中删除一些变量时，除了 index.name 被删除时，dataframe 会按预期返回。为什么会这样？

例子：

```
test = pd.DataFrame([[1,2,3],[3,4,5],[5,6,7]], index=['a','b','c'], columns=['d','e','f'])
test

Out[20]:
second  d   e   f
first           
a   1   2   3
b   3   4   5
c   5   6   7
#test.index.name = first
#test.columns.name=second
In [27]:

test.drop(['b'])

Out[27]:
second  d   e   f
a   1   2   3
c   5   6   7 
```

删除“b”后，返回的数据帧`(index.name)`不再是“第一”，而是“无”。

Q1。是因为该`.drop()`方法返回一个数据框，该数据框具有一个默认没有名称的新索引对象吗？
Q2。无论如何要保留`index.name`删除操作期间的操作，因为 newindex 仍然正确命名 - 它只是原始索引的一个子集

预期输出将是：

```
 Out[20]:
    second  d   e   f
    first           
    a   1   2   3
    c   5   6   7 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T00:56:03.497

实现预期行为的一种方法是：

```
row_name = test.index.name
test = test.drop('b')
test.index.name = row_name 
```

但这并不理想。

# asp.net - 直到重新启动 IIS 才重新初始化单例列表

> ID：15102159
> 
> 赞同：0
> 
> 时间：2013-02-27T00:38:06.757
> 
> 标签：asp.net, sql, singleton, initialization

我对我的 asp.net 网站中的单例列表有疑问。根据设计，单例列表用于存储所有自定义信息，所以第一个用户访问网站，单例列表被调用，如果为空则初始化（调用select sql脚本并从数据库中获取数据）。

然后在后端站点上，我们有一个页面，用于清除单例列表中的所有数据，仅在我们更新数据库中的一些自定义信息时使用。

这个逻辑很清楚，并且可以正常工作。但是，昨天我刚刚添加了一条新的自定义记录，然后我清除了单例列表后，我仍然看不到新添加的自定义信息。我试了很多次，就是没用。所以我在我们的测试环境上做了同样的事情，效果很好。最后，我偶尔尝试命令**iisreset**，它开始工作。我的意思是这很奇怪，我试图弄清楚为什么，有人能给我一些线索吗？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T00:48:10.893

有一些配置更改需要在提交之前重新启动 IIS。我养成了一种习惯，并且在对启动或初始化时所做的更改进行更改后重新启动 IIS 是非常标准的做法。

基本上，必须这样做并不罕见。除非它没有被重建或类似的东西，否则不要担心它，但如果它在它应该的时候被建造，那是一件好事。

这是[IIS](http://www.iis.net)站点的链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T01:46:38.330

可能是应用程序隔离模式的方向，也可能是您的代码中完全不同的问题。用于应用程序隔离模式。请阅读[这里](http://www.microsoft.com/technet/prodtechnol/WindowsServer2003/Library/IIS/67e39bd8-317e-4cf6-b675-6431d4425248.mspx?mfr=true)。

我正在根据对 OP 的评论做出的一些判断来查看 IIS 中的应用程序隔离级别。

*   1.) 一旦应用程序更改并部署在测试服务器和生产服务器上，假定应用程序已重新启动

*   2.）在生产环境中它不起作用，但在测试环境中它起作用

*   3.）但是在生产环境中，一旦 IIS 重新启动它就可以工作

鉴于上述 3 个事实，自从上次对生产进行应用程序更新（基于 OP 的附加评论）以来，怀疑应用程序隔离在生产环境中已发生更改（基于 OP 的附加评论）我可能完全错误，但假设是合乎逻辑的。

# php - preg_match 可以用作已设置变量的一部分吗？

> ID：15102164
> 
> 赞同：0
> 
> 时间：2013-02-27T00:38:49.833
> 
> 标签：php, preg-match

希望我措辞正确。

如果我有一些变量称为`$foo_bar` `$foo_barbar` `$foo_barbarbar`

无论如何使用 preg_match`/[A-Z]|[0-9]/i`来替换 bar、barbar、barbarbar？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T00:52:41.783

您可以通过循环 $GLOBALS 来做到这一点

但请注意，这是详尽无遗的

```
foreach($GLOBALS as $name => $val){

if(preg_match('/foo[A-Za-z0-9_]*bar/',$name)){
   if(is_array($val)){
     print_r($val);
   }
   else{
    echo $val;
   }
}

} 
```

# c - libusb_claim_interface 在 Mac OS X Mountain Lion 上失败

> ID：15102168
> 
> 赞同：7
> 
> 时间：2013-02-27T00:39:10.567
> 
> 标签：c, macos, libusb, libusb-1.0

我已经搜索了几个小时无济于事。我`libusb_detach_kernel_driver`在 Mac OS X 不支持的任何地方都看到了它，但我无法找到它的补丁或替代品。

`libusb_claim_interface`返回这个：`libusb: 0.863377 error [darwin_claim_interface] USBInterfaceOpen: another process has device opened for exclusive access`

如何从内核中分离 USB 设备？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-04-29T05:23:04.117

许多设备自动将驱动程序附加到 OSX 识别的 USB 设备，除非您强制系统在运行代码并声明设备之前手动分离设备，否则您将无法声明该设备。例如，如果它将 AppleUSBCDC 设备连接到您插入的某个独特的 USB 设备上，则必须执行以下操作：

```
sudo kextunload -b com.apple.driver.AppleUSBCDC 
```

在运行试图声明接口的应用程序之前。

# python - TypeError：'datetime.timedelta' 对象不可迭代-BaseHttpServer 问题

> ID：15102171
> 
> 赞同：0
> 
> 时间：2013-02-27T00:39:37.200
> 
> 标签：python, postgresql, basehttpserver

我使用 BaseHttpServer 设置了一个基本的 python 网络服务器，并且正在练习从 postgresql 数据库中查询数据。一切都很顺利，但是在解析 SQL 结果时出现错误。这是我的代码：

```
cur=con.cursor()
cur.execute(('select * from stop_times as a, stop_times as b where a.train_id=b.train_id and a.station_name = %s and b.station_name= %s and a.arrival_time < b.arrival_time'), (origin_name, dest_name))

self.wfile.write("Train Number &nbsp &nbsp  Starting Station &nbsp &nbsp  Destination Station &nbsp &nbsp Departure Time &nbsp &nbsp Arrival Time <br />")

while True:
    row=cur.fetchone()
    if row==None:
        break

    print row[0], row[1], row[2], row[3], row[4], row[5], row[6], row[7], row[8]

    for item in row[0]:
        self.wfile.write("%s"% item)
    self.wfile.write(" &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp")
    for item in row[3]:
        self.wfile.write("%s"% item)
    self.wfile.write(" &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp")

    for item in row[8]:                         
        self.wfile.write("%s"% item)
    self.wfile.write("&nbsp &nbsp &nbsp &nbsp")

    for item in row[2]:
        self.wfile.write("%s"% item)
    self.wfile.write("&nbsp &nbsp") 
```

打印语句用于调试控制台，并提供正确的输出：

```
427 10:23:00 10:23:00 San Antonio 6 427 11:08:00 11:08:00 Millbrae
429 11:23:00 11:23:00 San Antonio 6 429 12:08:00 12:08:00 Millbrae
431 12:23:00 12:23:00 San Antonio 6 431 13:08:00 13:08:00 Millbrae 
```

我只是想将某些列输出到网页，当我到达最后一个 for 循环 for row[2] 时，我收到此错误：

```
File "./caltrainServer.py", line 129, in performQuery
for item in row[2]:
TypeError: 'datetime.timedelta' object is not iterable 
```

我检查了一下，我数据库中的那些列是间隔类型的。如何像处理其他类型为 varchar 的列一样遍历它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T00:45:55.857

您不必要地迭代行值的内容。像这样的行：

```
for item in row[0]:
    self.wfile.write("%s"% item) 
```

可能会更改为

```
self.wlfile.write(row[0]) 
```

你在做什么，什么时候`row[x]`一个字符串实际上是迭代每个字母并写它。但是`row[2]`是一个 datetime.datetime 对象。而且由于 datetime.datetime 对象不可迭代，因此您会收到该错误消息。

试试类似的东西：

```
self.wlfile.write((row[2])) 
```

这会将日期时间对象放在可以迭代的元组中。

# c - Gwan 处理程序状态

> ID：15102173
> 
> 赞同：2
> 
> 时间：2013-02-27T00:39:38.817
> 
> 标签：c, url-rewriting, handler, restful-url, g-wan

我正在尝试为我的脚本实现一个宁静的处理程序来替换`/`，`&`这样我就可以将 url 像这样：`?script.c&things`变成 this: `?script/things`。目前我只有一个基于Gil[这篇文章的测试脚本。](https://stackoverflow.com/questions/13479044/g-wan-url-rewrite-for-home-page-not-working)

```
 // ============================================================================
  // Handler C script for the G-WAN Web Application Server (http://gwan.ch/)
  // ----------------------------------------------------------------------------
  // main.c: basic rewrite example
  // ============================================================================
  #include "gwan.h"    // G-WAN exported functions

  #include <stdio.h> // puts(), printf()
  // ----------------------------------------------------------------------------
  // init() will initialize your data structures, load your files, etc.
  // ----------------------------------------------------------------------------
  // init() should return -1 if failure (to allocate memory for example)
  int init(int argc, char *argv[])
  {
     // define which handler states we want to be notified in main():
     // enum HANDLER_ACT { 
     //  HDL_INIT = 0, 
     //  HDL_AFTER_ACCEPT, // just after accept (only client IP address setup)
     //  HDL_AFTER_READ,   // each time a read was done until HTTP request OK
     //  HDL_BEFORE_PARSE, // HTTP verb/URI validated but HTTP headers are not 
     //  HDL_AFTER_PARSE,  // HTTP headers validated, ready to build reply
     //  HDL_BEFORE_WRITE, // after a reply was built, but before it is sent
     //  HDL_HTTP_ERRORS,  // when G-WAN is going to reply with an HTTP error
     //  HDL_CLEANUP };
     u32 *states = (u32*)get_env(argv, US_HANDLER_STATES);
     *states =  (1 << HDL_AFTER_READ);
     return 0;
  }
  // ----------------------------------------------------------------------------
  // clean() will free any allocated memory and possibly log summarized stats
  // ----------------------------------------------------------------------------
  void clean(int argc, char *argv[])
  {}
  // ----------------------------------------------------------------------------
  // main() does the job for all the connection states below:
  // (see 'HTTP_Env' in gwan.h for all the values you can fetch with get_env())
  // ----------------------------------------------------------------------------
  int main(int argc, char *argv[])
  {
     // HDL_HTTP_ERRORS return values:
     //   0: Close the client connection
     //   2: Send a server reply based on a custom reply buffer
     // 255: Continue (send a reply based on the request HTTP code)
     const long state = (long)argv[0];
     printf("Catching Gwan State: %i\n", (long)argv[0] );
     if(state != HDL_AFTER_READ)
        return 255;

     xbuf_t *read_xbuf = (xbuf_t*)get_env(argv, READ_XBUF);
     printf("req_1: %.20s\n", read_xbuf->ptr);
     xbuf_replfrto(read_xbuf, read_xbuf->ptr, read_xbuf->ptr + 16, "/", "&");
     printf("req_2: %.20s\n-------------------\n\n", read_xbuf->ptr);

     return 255; // continue G-WAN's default execution path
  }
  // ============================================================================
  // End of Source Code
  // ============================================================================ 
```

在这个脚本中，我有`printf("Catching Gwan State: %lu\n", (long)argv[0] );`一行应该打印它得到的状态（0-8，我猜），但它一直在打印

```
Catching Gwan State: -38241808 
```

我不知道 -38241808 是什么

有什么帮助吗？我的操作系统是 Linux Mint 14，Gwan 版本 4.2.19

[编辑] 即使使用 Gwan 附带的 main_generic.c 处理程序示例也会给出这些奇怪的状态值

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T08:52:25.527

> 我正在尝试为我的脚本实现一个宁静的处理程序，将 / 替换为 & 所以我可以将 url 像这样：`?script.c&things`变成 this: `?script/things`。

G-WAN*自动*完成。绝对不需要处理程序。该`RESTful`功能记录在 PDF 手册*和*时间线中。

您甚至可以定义哪种编程语言是默认语言（不需要在 URI 中显式文件扩展名的语言）。请参阅下面的操作方法（此处来自处理程序）：

```
int init(int argc, char *argv[])
{
   // the QUERY_CHAR character can be chosen from the following set: 
   //  - _ . ! ~ * ' ( ) 
   // (see RFC 2396, section "2.3\. Unreserved Characters")
   //   
   u8 *query_char = (u8*)get_env(argv, QUERY_CHAR);
   *query_char = '!'; // use "/!hello.c" instead of "/?hello.c"

   // by default, DEFAULT_LANG = LG_C (ANSI C)
   // LG_C, LG_CPP, LG_JAVA, etc. are defined in /gwan/include/gwan.h
   // and in http://gwan.com/api#env
   //
   u8 *lang = (u8*)get_env(argv, DEFAULT_LANG);
   *lang = LG_CPP; // use "/!hello" instead of "/!hello.cpp"
   return 0;
} 
```

只需使用`/?argv.c&123&456`G-WAN 示例对其进行测试，`/?argv/123/456`而不是使用...

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-27T02:15:11.027

我在我的身上测试过。如果你喜欢这样
`u32 *states = (u32*)get_env(argv, US_HANDLER_STATES);`
`*states = (1L << HDL_AFTER_ACCEPT)`
`| (1L << HDL_AFTER_READ)`
`| (1L << HDL_BEFORE_PARSE)`
`| (1L << HDL_AFTER_PARSE)`
`| (1L << HDL_HTTP_ERRORS)`
`| (1L << HDL_BEFORE_WRITE);`

它将产生0-8。

# apache - 网站加载缓慢

> ID：15102177
> 
> 赞同：0
> 
> 时间：2013-02-27T00:40:10.493
> 
> 标签：apache, zen-cart

当我进行搜索或只是在我的网站上浏览时，它真的很慢。我正在使用 Zen Cart 进行新的网上购物。

我的网站是：[http ://shopfarmacia.it](http://shopfarmacia.it)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T00:46:40.667

一个好的起点是使用一些工具检查页面，例如[Google Pagespeed](https://developers.google.com/speed/pagespeed/insights#url=http_3A_2F_2Fshopfarmacia.it_2Fstore_2F&mobile=false)、[Yahoo Y!Slow](http://yslow.org/)和[Pingdom Tools](http://tools.pingdom.com/fpt/#!/q74eYwpQP/http://shopfarmacia.it/store/)，并按照他们的建议来加快您的网站速度。

Zen Cart 似乎不是什么大问题，您查看的每个页面都需要您下载 700k 的数据，其中大部分没有缓存。

# jquery-plugins - 谷歌应用脚 本没有从 Github 加载 JQuery Masonry

> ID：15102179
> 
> 赞同：0
> 
> 时间：2013-02-27T00:40:26.187
> 
> 标签：jquery-plugins, github, google-apps-script, jquery-masonry, google-sites

我正在尝试查看是否可以在 Google Sites 上的小工具中包含 JQuery 插件 Masonry ...通过使用 HtmlService 从 HTML 文件呈现 HTML 来从 Google App 脚本创建：

```
<script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
<script src="https://github.com/desandro/masonry/blob/master/jquery.masonry.min.js"></script> 
```

但是......这只会呈现这个结果：

无效的脚本或 HTML 内容：[https](https://github.com/desandro/masonry/blob/master/jquery.masonry.min.js:4+1) ://github.com/desandro/masonry/blob/master/jquery.masonry.min.js :4+1 - 2: Unexpected token <.

我是 Google App Scripts 的新手并对其进行了测试。但在我看来，它抱怨砌体文件中的令牌无效？还是我解释错了？谁能告诉我这是否可行。我读过一些地方说 Google App Script 是限制性的，但我不知道在这种情况下要寻找什么来看看这是否是原因。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T00:47:38.180

您当前使用的 URL 指向有关该文件的 GitHub 信息页面。将其更改为文件的直接链接应该可以解决您的错误：

```
https://raw.github.com/desandro/masonry/master/jquery.masonry.min.js

```

# android - 以编程方式在 ListView 中插入自定义 LinearLayout

> ID：15102183
> 
> 赞同：0
> 
> 时间：2013-02-27T00:41:01.867
> 
> 标签：android, android-layout

我知道这个问题仍然在许多帖子中得到回答。理论上我知道答案，但在这种情况下我无法让它工作。

我有一个自定义 BaseAdapter

```
@Override
public Row getView(int position, View convertView, ViewGroup parent)
{
    ...

    Row view = (Row) convertView;
    LayoutInflater mInflater = (LayoutInflater) context.getSystemService(Activity.LAYOUT_INFLATER_SERVICE);

    if (view == null)
    {
        view = (JVxDataRow) mInflater.inflate(R.layout.row_base, null);;
        ...
    }
    ...
}
    return view;
} 
```

这工作正常，row_base.xml 正确膨胀，我的列表视图获取所有条目。row_base.xml 仅包含：

```
<?xml version="1.0" encoding="utf-8"?>
<mh.android.ui.Row
xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/datarow"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:paddingLeft="20dp"
android:paddingTop="20dp"
android:paddingBottom="20dp"
android:paddingRight="20dp" /> 
```

因此我想删除该文件，而是以编程方式实例化它。我的代码 - 不起作用 - 如下：

```
@Override
public Row getView(int position, View convertView, ViewGroup parent)
{
    ...

    Row view = (Row) convertView;
    LayoutInflater mInflater = (LayoutInflater) context.getSystemService(Activity.LAYOUT_INFLATER_SERVICE);

    if (view == null)
    {
        view = new Row(context);
        ...
    }
    ...
}
    return view;
} 
```

为了让它工作，我必须在 Row 的构造函数中放置一些布局参数，并将 inflate 从 onFinishInflate 移动到构造函数：

```
public Row(Context context)
{
    super(context);
    AbsListView.LayoutParams params = new AbsListView.LayoutParams(AbsListView.LayoutParams.WRAP_CONTENT, AbsListView.LayoutParams.WRAP_CONTENT);

    this.setLayoutParams(params);
    this.setPadding(20, 20, 20, 20);
    this.setOrientation(LinearLayout.VERTICAL);

    inflater = (LayoutInflater) this.getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    container = inflater.inflate(R.layout.datarow3, this, true);

    this.addView(container);
} 
```

datarow3.xml 看起来：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/table_row_container"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<mh.android.ui.DataItem
    android:id="@+id/dataitem_slot1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:singleLine="true" >
</mh.android.ui.DataItem>
<mh.android.ui.DataItem
    android:id="@+id/dataitem_slot2"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:singleLine="true" >
</mh.android.ui.DataItem>
</LinearLayout> 
```

当我从膨胀 xml 更改为以编程方式实例化时，问题出在 BaseAdapter 中，listview 在 LinearLayout 内。

现在例外：

```
E/AndroidRuntime(13203): FATAL EXCEPTION: main
E/AndroidRuntime(13203): java.lang.ClassCastException:     android.widget.LinearLayout$LayoutParams cannot be cast to android.widget.AbsListView$LayoutParams
E/AndroidRuntime(13203):    at android.widget.ListView.measureScrapChild(ListView.java:1170)
E/AndroidRuntime(13203):    at android.widget.ListView.measureHeightOfChildren(ListView.java:1252)
E/AndroidRuntime(13203):    at android.widget.ListView.onMeasure(ListView.java:1162)
E/AndroidRuntime(13203):    at android.view.View.measure(View.java:15288)
E/AndroidRuntime(13203):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4876)
E/AndroidRuntime(13203):    at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1396)
E/AndroidRuntime(13203):    at android.widget.LinearLayout.measureVertical(LinearLayout.java:681)
E/AndroidRuntime(13203):    at android.widget.LinearLayout.onMeasure(LinearLayout.java:574)
E/AndroidRuntime(13203):    at android.view.View.measure(View.java:15288)
E/AndroidRuntime(13203):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4876)
E/AndroidRuntime(13203):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
E/AndroidRuntime(13203):    at android.view.View.measure(View.java:15288)
E/AndroidRuntime(13203):    at android.widget.LinearLayout.measureVertical(LinearLayout.java:833)
E/AndroidRuntime(13203):    at android.widget.LinearLayout.onMeasure(LinearLayout.java:574)
E/AndroidRuntime(13203):    at android.view.View.measure(View.java:15288)
E/AndroidRuntime(13203):    at 
```

那里出了什么问题？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T12:05:25.933

为什么所有评论都不见了？我的问题的解决方案：

```
container = inflater.inflate(R.layout.datarow3, this, true);
this.addView(container); 
```

变成

```
inflater.inflate(R.layout.datarow3, this, true); 
```

充气后不需要添加布局。

# weblogic - Weblogic 的 plan.xml 未显示在管理控制台中

> ID：15102184
> 
> 赞同：0
> 
> 时间：2013-02-27T00:41:10.183
> 
> 标签：weblogic, war

我阅读了很多关于 Weblogic 在部署期间更改 web.xml 的能力。

功能性，这很好用：在我的`web.xml`我有一堆 env 条目：

```
<env-entry>
    <env-entry-name>config/fileservice/outputCharacterSet</env-entry-name>
    <env-entry-type>java.lang.String</env-entry-type>
</env-entry> 
```

并在`plan.mxl`：

```
<variable>
    <name>config/fileservice/outputCharacterSet</name>
    <value>UTF-8</value>
    <description>Specify the output character set to be used for dumping the JMS messages.
</variable> 
```

再往下

```
<variable-assignment>
    <name>config/fileservice/outputCharacterSet</name>
    <xpath>/web-app/env-entry/[env-entry-name="config/fileservice/outputCharacterSet"]/env-entry-value</xpath>
    <operation>replace</operation>
</variable-assignment> 
```

在部署期间，它就像一个魅力。

但无论我做什么，在 Weblogics 管理控制台中，这些条目永远不会出现：在部署 (WAR) > 部署计划 > 调整参数中没有显示任何内容。

甚至

```
<value xsi:nil="true"></value> 
```

导致应用程序仅部署 - 之后未设置该值。但是从文档 [1] 来看，我希望在部署期间会出现某种用户对话，迫使部署者输入一些合理的值。

[1] [http://docs.oracle.com/cd/E15523_01/web.1111/e13702/export.htm](http://docs.oracle.com/cd/E15523_01/web.1111/e13702/export.htm)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-20T15:15:55.553

它仅用于“调整参数”，而不是用于修改 web.xml 本身。这只能通过 plan.xml

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T16:31:42.363

部署前是否创建了如下目录

```
c:\my_app_root\plan\Plan.xml
c:\my_app_root\app\xyz.war 
```

在部署期间，您应该将 c:\my_app_root 指定为路径。据我了解，这是推荐的部署目录结构 [http://docs.oracle.com/cd/E15523_01/web.1111/e13702/config.htm](http://docs.oracle.com/cd/E15523_01/web.1111/e13702/config.htm)

至于您提到的空值问题，文档说它仅适用于外部资源，例如数据源的 JDNI 名称。您是否尝试在部署描述符和 Plan.xml 中将 JNDI 值设为空？此外，WLS 在部署过程中不提供任何用户对话框来强制部署者输入正确的值。它只是使部署失败。这就是我害怕的“力量”的意思。当然，我会为这种用户对话功能投赞成票。:-)

# python - 有没有办法在一个文件夹中对 ugo-rw 12 个不同的 gif 和 jpg 文件进行 chmod，而无需对每个单独的文件进行 chmod？

> ID：15102191
> 
> 赞同：-1
> 
> 时间：2013-02-27T00:41:50.197
> 
> 标签：python, bash, chmod

我需要 chmod ugo-rw 12 个不同的 gif 和 jpg 文件，以便 python 终端可以访问它们我必须为每个人都这样做吗？是否可以一次授予多个文件的 rw 权限？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T00:46:14.033

您可以通过在选项之后将所有文件作为附加参数提供给 chmod 来一次完成所有操作，例如：

```
chmod ugo+rw file1 file2 file3 file4 ... 
```

# python - finally 子句中的 Python 异常会吃掉先前的异常

> ID：15102193
> 
> 赞同：3
> 
> 时间：2013-02-27T00:41:53.777
> 
> 标签：python, exception, finally, try-finally, try-except

在我的真实情况下，a`Segmentation fault`出现在`finally`我无能为力的子句中，因为它源于通过 ctypes 使用的外部库。实际上，我并不关心这个段错误，因为脚本无论如何都完成了。

但是，finally 中的段错误会吃掉之前发生的所有异常。因此，首先`NameError`从调试开始`iDontExist`变得很痛苦。它不会在任何地方发生。目前没有办法看到在段错误之前引发的任何异常。

```
def f1():
    try:
        while True:
            pass
    except KeyboardInterrupt:
        print iDontExist

if __name__=="__main__":
    try:
        f1()
    finally:
        raise Exception("segfault here")
        print "finally" 
```

你觉得我能做些什么呢？修复外部库不是一种选择。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T00:47:19.867

您可以尝试在 finally 之前捕获异常：

```
try:
    f1()
except NameError as error:  # Change as needed
    print "Error caught:", error  # Or simply "raise", in order to raise the error caught
finally:
    raise Exception("segfault here")
    print "finally" 
```

也就是说，abamert 是对的：分段错误也不例外，因此您可能正在寻找其他东西。

# magento-1.7 - 在 magento 中获取所有属性列表以创建新的可配置产品

> ID：15102195
> 
> 赞同：0
> 
> 时间：2013-02-27T00:41:57.503
> 
> 标签：magento-1.7

我想列出所有检查为可用于创建可配置产品的属性。（例如选择“创建可配置产品”后的复选框列表。

我试过了 ：

```
$attributes = Mage::getResourceModel('eav/entity_attribute_set_collection')->setEntityTypeFilter(Mage::getModel('catalog/product')->getResource()->getConfigurableId());` 
```

但没有检索到任何集合。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T14:49:39.417

我试过这个，它的工作原理：

```
$product = Mage::getSingleton("catalog/product");
$attributes = $product->getTypeInstance(true)->getSetAttributes($product);
foreach ($attributes as $attribute) {
  if (($attribute->getIsConfigurable()) && ($attribute->getIsVisible()) && ($attribute->usesSource()) && ($attribute->getIsGlobal() == Mage_Catalog_Model_Resource_Eav_Attribute::SCOPE_GLOBAL)){
    ... do some things ...
  }
} 
```

也许不是列出这些属性的最佳方式！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T09:14:52.777

尝试这个：

```
$collection = Mage::getResourceModel('catalog/product_type_configurable_attribute_collection'); 
```

或者，如果您希望将可配置属性分配给特定产品：

```
$collection = Mage::getResourceModel('catalog/product_type_configurable_attribute_collection')
    ->setProductFilter($product)
; 
```

# html - Twitter Bootstrap 网格徽标和导航栏与导航对齐到行底部的同一行

> ID：15102202
> 
> 赞同：0
> 
> 时间：2013-02-27T00:42:34.457
> 
> 标签：html, node.js, twitter-bootstrap, express, pug

![在此处输入图像描述](../Images/f3d796fd159f24dc47b7875b15610751.png) 我试图在引导导航菜单的左侧放置一个圆形徽标，并使菜单与行的底部对齐，但它总是希望与顶部对齐。我用玉写了这个，但希望其他语言的人至少可以理解它是如何工作的（缩进表示嵌套而不是结束标签）。有没有办法我可以轻松地使用 css 或在引导程序中使用网格系统来做到这一点？

```
doctype 5
html
    head
    title= title
    link(rel='stylesheet', href='/css/bootstrap.min.css')
    link(rel='stylesheet', href='/stylesheets/style.css')

    body
        .container
            .row

                .span3
                    img(id='add-razaoSocial', src='KSUB_PLATTER_Full.png', width=100)
                .row

                        .span9
                            .navbar(class="pull-left")
                                    .navbar-inner
                                        a(class='brand')
                                        ul(class="nav nav-tabs")
                                            li 
                                                a(href='#') About
                                            li 
                                                a(href='#') Schedule
                                            li 
                                                a(href='#') Events
                                            li 
                                                a(href='#') Gallery
            block content
            script(src='http://code.jquery.com/jquery.js')
            script(src='/js/bootstrap.min.js') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T01:07:57.157

我认为问题来自于在导航栏内创建您想要的选项卡（以及在 navbar-inner 内，它包装了您的选项卡）。您尝试实现的选项卡不需要包裹在导航栏内（设计得非常好，可以固定/静态到顶部或底部）。请参阅他们的导航标签文档[http://twitter.github.com/bootstrap/components.html#navs](http://twitter.github.com/bootstrap/components.html#navs)

独立的`<ul class="nav nav-tabs">`应该更容易包装和设置边距/填充。还可以将图像下方行的 CSS 位置属性设置为绝对值。和内容相对。

# c - u-boot编译错误

> ID：15102205
> 
> 赞同：0
> 
> 时间：2013-02-27T00:42:59.017
> 
> 标签：c, compilation, u-boot

我觉得这可能是一个过于宽泛的问题，但我希望有些人可能是 u-boot 专家，所以我要试一试......

在为类似于 redwood 的基于 powerpc 的设置进行编译时，出现错误：nand.c:91: undefined reference to `board_nand_init'

函数在ndfc.c中，它没有.h文件，原型在nand.h中定义，我不明白ndfc.c中的函数如何被另一个模块调用。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T01:01:16.420

这种错误通常是由于没有定义所有需要的编译变量造成的。

请参阅[U-Boot 自述文件](http://git.denx.de/cgi-bin/gitweb.cgi?p=u-boot.git;a=blob_plain;f=README;hb=HEAD)。有些是使用 Makefile 设置的：例如`make TQM823L_config`，它定义了通常用于 TQM823L 板的所有变量。

其他配置设置需要手动编辑头文件来完成。

# cocoa - glEnableVertexAttribArray 给出无效操作

> ID：15102206
> 
> 赞同：2
> 
> 时间：2013-02-27T00:43:00.937
> 
> 标签：cocoa, opengl

我正在尝试通过 OS X 上的 ArcSynthesis 教程，并且在调用 glEnableVertexAttribArray 后出现 OpenGL 错误“无效操作”。[根据glEnableClientState 和 glEnableVertexAttribArray](https://stackoverflow.com/questions/8827926/glenableclientstate-and-glenablevertexattribarray)的讨论，我已经检查了我确实有一个 VBO 绑定，并且不确定接下来要检查什么。

我正在使用 OS X 10.8、OpenGL 3.2 配置文件和 Xcode 4.6。

我正在尝试编写一个将加载到教程中使用的 XML 模型文件中的类，并且我*认为*我正在按照与绘制编码模型的早期程序相同的顺序执行相同的操作。但我一定是在做一些不同或错误的事情，而且不知道是什么。参考 OpenGL 3.2 文档说，通过发送超过 OpenGL 实现允许的最大值的索引值，您会得到一个无效的操作，但我使用的是我以前使用过的 0 和 1。

这是代码，为了清楚起见，所有的 OpenGL 错误检查都被编辑了：

```
 glBindBuffer(GL_ARRAY_BUFFER, vertexBufferObject);
    for (int iAttribLoop = 0; iAttribLoop < [attributeAnalyzers count]; iAttribLoop++) {
        AttributeAnalyzer *theAnalyzer = [attributeAnalyzers objectAtIndex:iAttribLoop];
        GLuint theIndex = [theAnalyzer index];
        NSLog(@"theIndex is %d", theIndex);
        glEnableVertexAttribArray(theIndex);
        glVertexAttribPointer(theIndex, [theAnalyzer size], theType, GL_FALSE, 0, dataOffset);
        dataOffset += sizeof(theType)*[theAnalyzer size]*[theAnalyzer vertexCount];
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-27T01:01:34.827

> 参考 OpenGL 3.2 文档说，您通过发送超过 OpenGL 实现允许的最大值的索引值来获得无效操作

不，它没有。这样做会给你`GL_INVALID_VALUE`。仅[当您调用它并且没有绑定 VAO](http://www.opengl.org/wiki/GLAPI/glEnableVertexAttribArray#Errors)`GL_INVALID_OPERATION`时才给出。`glEnableVertexAttribArray`

所以你可能应该这样做。

# c# - 如何格式化文本框中的文本布局

> ID：15102208
> 
> 赞同：0
> 
> 时间：2013-02-27T00:43:04.173
> 
> 标签：c#, textbox, string-formatting

我在字符串数组中有一些数据，我想将其显示在文本框中，格式化为出现在整齐的列中。字符串值的长度不同，就像名称一样，因此简单地使用“\t”不会产生预期的效果。

这是我从数组中写入文本框的示例字符串：

```
MyArray[thecount] = thearrayLine.GetValue(0).ToString() + " "
    + thearrayLine.GetValue(1).ToString() + ", "
    + thearrayLine.GetValue(2).ToString() + " "
    + myRemainingvalues + " "
    + thearrayLine.GetValue(4).ToString(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T01:24:55.423

如果您想要整齐的列，那么您需要使用不依赖于字体的布局。意思是，你不能把所有的东西都扔到一个文本框中，然后希望事情总是出现在屏幕上的同一点上。

相反，我看到了三种可能性：

1.  使用网格
2.  在一行的列中使用带有各种文本框的 html 表格。
3.  使用浮动 div 布局，再次为该行使用各种文本框。

其中，我通常会选择#1 或#2。如果我的布局需要能够在浏览器太小时下降到其他行，我会使用＃3。

无论如何，单个文本框的字体将决定其中包含的信息的间距。您必须使用等宽字体才能尝试将其拉下来，但是您仍然受到每个“列”数据量不同的限制。简而言之，我永远不会考虑这种方法，因为有更好的方法更容易控制。

# javascript - 从 URL 参数中删除 %20

> ID：15102209
> 
> 赞同：6
> 
> 时间：2013-02-27T00:43:29.643
> 
> 标签：javascript

我知道你需要使用 decodeURIComponent() 的一些变体来做这样的事情，但是由于我对编码和使用我在网上找到的一些代码还是很陌生，我不知道该怎么做改变它以满足我的需要。

我拥有的是一个函数，它可以从 URL（其中有很多）中获取我需要的每个 URL 参数。我必须将这些变量用作其他函数的参数并显示在页面上，并且我无法让 %20 消失。

```
function getUrlVars() {
            var vars = {};
            parts = window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi, function(m,key,value) {
            vars[key] = value;
            });
            return vars;
        } 
```

我使用以下方法获取每个变量的位置：

```
var markname = getUrlVars()["mname"]; 
```

我试图将 decodeURIComponent() 放在该函数的不同位置，但我似乎无法让它工作。我也不确定它是否需要使用 value 或 vars。

```
value = decodeURIComponent(value); 
```

或类似的东西...

任何帮助，将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-27T01:02:24.203

`decodeURIComponent`正如您发布的那样，应该可以正常工作。您不妨用空格替换加号，并且不要忘记解码`key`：

```
function getUrlVars() {
    var url = window.location.href,
        vars = {};
    url.replace(/[?&]+([^=&]+)=([^&]*)/gi, function(m, key, value) {
         key = decodeURIComponent(key);
         value = decodeURIComponent(value);
         vars[key] = value;
    });
    return vars;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-07-25T09:45:20.033

当您通过 url 使用 `str_replace(" ","-",$name)` 并对其进行解码时 `str_replace("-"," ",$p->property_name)`

它将删除空格并在 url 中添加 -

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-18T21:36:13.887

只需这样做`("your string here").replaceAll(" ", "-")`

# matlab - 在matlab中重塑矩阵

> ID：15102216
> 
> 赞同：1
> 
> 时间：2013-02-27T00:44:47.580
> 
> 标签：matlab

我在 matlab 中有一个 28x28x10000 的矩阵。我希望将其重塑为 10000*784 的矩阵，每个 28x28 子矩阵都被压缩成一行。所以我尝试了

```
reshape(mat, 10000, 784) 
```

虽然这确实给了我一个正确形状的矩阵，但这些值是不正确的。有谁知道另一种方法来做到这一点，最好没有 for 循环？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T00:52:59.443

`reshape`从矩阵中按列取元素。出于您的目的，这意味着如果您重新排列原始矩阵的尺寸（使用[permute](http://www.mathworks.com/help/matlab/ref/permute.html)），您可以像已经使用的那样使用 reshape ：

```
reshape(permute(mat,[3 1 2]), 10000, []); 
```

的`[3 1 2]`参数`permute`意味着使用第 3 维作为第 1 维，然后将原始第 1 维作为新的第 2 维，将原始第 2 维作为新的第 3 维，给您一个`10000x28x28`矩阵。每列包含 10000 个元素，因此像 reshape 那样逐列获取可以满足您的需求。

# python - 如何在 Python 中使用 print 显示特殊字符

> ID：15102222
> 
> 赞同：12
> 
> 时间：2013-02-27T00:45:10.850
> 
> 标签：python, printing

在我正在编写的 Python 程序中，我需要打印 ©（版权）符号。是否有捷径可寻？还是 Python 不支持它？这是一个例子。

```
print ("\(copyright symbol here\)") 
```

只是一个非常简单的问题。谢谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-27T00:52:53.647

在 Python 中，您可以通过三种方式将 Unicode 字符放入字符串中。（如果您使用的是 2.x 而不是 3.x，则使用 Unicode 字符串更简单——例如 in`u"…"`而不是`"…"`——而且你必须使用`unichr`instead of `chr`，否则一切都是一样的。）

*   '©'：直接输入。
    *   这意味着您可能必须为您的源代码选择一个字符编码——例如，将文件显式保存为 UTF-8，并在其顶部放置一个编码头。（对于 3.3，UTF-8 是默认设置，因此如果您使用的是编码标头，则不需要。）
    *   在 Mac OS X 下，在大多数语言的默认键盘设置中，这是 opt-G。
    *   在 Windows 下，我相信你可以使用 0169 的 alt-numeric-keypad 技巧来输入它，虽然这看起来并不容易。
    *   如果您不知道如何用键盘输入“©”，请从其他地方复制并粘贴（谷歌“版权标志”，您应该找到一个可以复制的页面——或者，就此而言，从这里） .
    *   或者，您的计算机可能有一个字符查看器或类似的东西，可以让您指向和单击特殊字符。
*   '\u00a9'：使用 Unicode 数字转义序列。
    *   谷歌搜索“unicode版权标志”，你很快就会看到它是U+00A9。在 Python 中，它是 ''\u00a9'。
    *   对于基本多语言平面之外的任何内容（即超过 4 个十六进制数字），请使用大写字母`U`和 8 个数字。
*   `'\N{COPYRIGHT SIGN}'`: 使用 Unicode 实体名称转义序列。
    *   同样，您可能需要使用 google 来找到实体的正确名称。
    *   它没有完全记录您可以使用和不能使用的名称。但它通常会在您期望的时候起作用，并且`COPYRIGHT SIGN`显然比`00a9`.

你也可以间接地做一些事情——例如，`unicodedata.lookup('COPYRIGHT SIGN')`或者`chr(0xa9)`将返回与上面的文字相同的字符串。但是真的没有理由不使用文字。

Python 文档中的[Unicode HOWTO](http://docs.python.org/3/howto/unicode.html)对此有更多详细信息 - 如果您不愿意阅读整个内容，则[字符串类型](http://docs.python.org/3/howto/unicode.html#the-string-type)描述了不同类型的转义序列（以及 unicode 和字节字符串之间的编码/解码问题，这在 2.x 中尤为重要），而[Python 源代码中的 Unicode Literals](http://docs.python.org/3/howto/unicode.html#unicode-literals-in-python-source-code)描述了如何指定编码声明。

如果你想要一份你可以使用的所有字符的官方列表，而不是仅仅搜索它们，查看[`unicodedata`](http://docs.python.org/3/library/unicodedata.html)你的 Python 版本的文档，其中包含指向适当版本的 Unicode 字符数据库的链接。（例如，3.3.0 中的 6.1.0、2.7.3 中的 5.2.0 等）您必须浏览几个链接才能到达实际列表，但这是您唯一的方法得到一些可以保证完全是编译成 Python 的东西。（而且，如果你不关心这个，你也可以用谷歌搜索它，或者使用维基百科或你电脑的字符查看器。）

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-27T01:01:47.510

在python 2中：

```
>>> print u"\u00a9"
©
>>> print u"\N{COPYRIGHT SIGN}"
© 
```

在python 3中：

```
>>> print("\u00a9")
©
>>> print("\N{COPYRIGHT SIGN}")
©
>>> print("©")
© 
```

在 python 2 中，您必须在字符串前面加上 au ( `u"..."`) 来告诉 python 它是一个 unicode 字符串。但是，在 python 3 中，所有字符串都是 unicode 字符串，因此您不必（实际上在 3.0-3.2 中也不允许）在字符串前面加上 u。

您可以在此处查看字符列表及其名称/ unicode 值：[http](http://www.fileformat.info/info/charset/UTF-16/list.htm) ://www.fileformat.info/info/charset/UTF-16/list.htm 并以与此处使用的版权符号相同的方式使用它们

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-27T00:46:15.113

当然！键入版权符号：

```
print("©") 
```

（Python 中没有字符实体，比如 HTML。）

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-27T00:50:22.657

版权标志是一个 unicode 字符。如果您的终端支持包含此字符的字符编码（例如 utf-8 或 cp1252），则可以打印它：

这依赖于 Python 检测终端的字符编码：

```
In [64]: print(u'\N{COPYRIGHT SIGN}')
© 
```

这使用了显式编码（由于我的终端设置为使用 utf-8 字符编码，这恰好可以工作）：

```
In [65]: print(u'\N{COPYRIGHT SIGN}'.encode('utf-8'))
© 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-02-27T00:59:26.247

```
print u"\u00A9" 
```

其中“ [\u00A9](http://www.fileformat.info/info/unicode/char/a9/index.htm) ”是版权符号的 unicode 字符。

# python - 数组数组的平均值

> ID：15102225
> 
> 赞同：1
> 
> 时间：2013-02-27T00:45:41.957
> 
> 标签：python, numpy

我有这样的结构：

```
a = np.array([[np.array([1,2,3]), np.array([2])], [np.array([0,1,2,3,4]), np.array([0,4])]]) 
```

它是一个 2x2 结构，每个元素都可以有任意维度

我想得到每个元素的平均值`a`：

```
np.mean(a)

ValueError: operands could not be broadcast together with shapes (3) (5) 
```

我试着玩`axis`，但它不起作用。我想得到一个新的`np.array`等于`[[2, 2], [2, 2]`。

一般来说，我希望能够以`a`相同的方式运行任何矢量化函数。

怎么做？我需要快速代码，所以请避免显式循环。

我能做的最好的是：

```
f = np.mean
result = np.zeros(a.shape)
for i in np.ndindex(a.shape):
  result[i] = f(a[i]) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T01:05:52.743

我猜你想要[numpy.vectorize](http://docs.scipy.org/doc/numpy/reference/generated/numpy.vectorize.html)，它基本上就像`map`ndarrays 的内置函数。

```
>>> a = np.array([[np.array([1,2,3]), np.array([2])], [np.array([0,1,2,3,4]), np.array([0,4])]])
>>> vmean = np.vectorize(np.mean)
>>> vmean(a)
array([[ 2.,  2.],
       [ 2.,  2.]]) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-27T00:54:27.260

这是我能做的最好的：

```
a = np.array([[np.array([1,2,3]), np.array([2])], [np.array([0,1,2,3,4]), np.array([0,4])]])
np.array([ np.mean(b) for b in a.ravel()]).reshape(a.shape) 
```

输出

```
array([[ 2.,  2.],
       [ 2.,  2.]]) 
```

可以概括为其他功能：

```
def ravel_func(func,arr):
    return np.asarray([ func(part) for part in arr.ravel()]).reshape(arr.shape) 
```

速度测试，感谢[Jaime](https://stackoverflow.com/users/110026/jaime)

```
In [82]: timeit vmean(a)
10000 loops, best of 3: 65 us per loop

In [83]: timeit ravel_func(np.mean,a)
10000 loops, best of 3: 67 us per loop 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-27T18:48:37.413

根据您的评论：您拥有相对较少的相当大的元素。这意味着外循环的迭代速度无关紧要，而内循环的迭代速度至关重要。

让我们在这上面放一些实际的数字。您的外部数组最多有 4 个维度，最大大小为 10。这意味着最多有 10000 个元素。同时，元素“相当大”——让我们保守地解释为只有 50 个。所以，你有 510000 次循环迭代。您为提高 10000 次外部迭代的速度所做的任何事情都会使您的代码产生不到 2% 的差异。事实上，它远低于这个数字——2% 的人假设除了迭代本身之外没有其他工作要做，这显然是不正确的。

所以，你专注于错误的地方。只有 500000 次内部迭代很重要。如果您可以用单个高一维数组替换数组数组并在 中完成所有操作`numpy`，它可能会更快，但会使您的代码更加复杂且难以理解，以获得大约 1 的分数% 是愚蠢的。只需使用`vectorize`简单明了的答案或理解答案即可。

* * *

同时：

> 可能我应该尝试并行化评估，对每个矩阵元素使用一个线程。

并行性在这里是个好主意。但不使用线程，也不是每个元素一个。

例如，如果您有一台 8 核机器，使用 8 个硬件线程意味着您完成工作的速度几乎快 8 倍。但是使用 10000 个硬件线程并不意味着您完成任务的速度是 10000 倍，甚至是 8 倍——您可能会花费大量时间进行上下文切换、分配和释放线程堆栈等，实际上它比顺序执行花费的时间更长版本。因此，您想创建一个由 8 个硬件线程组成的工作池，并将 10000 个任务放在一个队列中以由该池运行。

此外，10000 可能太细了。每项工作都有一点开销，如果你的工作太小，你就会在开销上浪费太多时间。批量处理的明显方法是每个轴——有 1000 个作业，每个作业执行一行 10 个元素，或 100 个作业，每个作业执行一个包含 100 个元素的二维数组。测试 0、1、2 和 3 轴的批量大小，看看哪个提供了最佳性能。如果差异很大，您可能需要尝试更复杂的批处理，例如拆分为 3x10x10 和 4x10x10 的 3D 数组。

最后，虽然 Python 线程是真正的操作系统（因此也是硬件）线程，但 GIL 会阻止其中多个线程同时运行 Python 代码。`numpy`做了一些工作来解决这个问题，但它并不完美（特别是如果你在`numpy`调用之间有很多开销）。解决这个问题的最简单方法是使用`multiprocessing`，它可以让您拥有一个由 8 个独立进程组成的池，而不是 1 个进程中的 8 个线程。这会显着增加开销——您要么需要复制子数组（隐式地，作为任务函数的参数和返回值，要么显式地通过管道）或将它们放在共享内存中。但是，如果您的任务规模足够大，这通常不是问题。

* * *

以下是如何并行化现有代码的示例：

```
f = np.mean
result = np.zeros(a.shape)
future_map = {}
with futures.ProcessPoolExecutor(max_workers=8) as executor:
    for i in np.ndindex(a.shape):
        future_map[executor.submit(f, a[i])] = i
    for future in futures.as_completed(future_map):
        i = future_map[future]
        result[i] = future.result() 
```

显然，您可以简化它（例如，用`dict`理解替换提交循环），但我想让您需要更改的内容尽可能明显。

另外，我正在使用[`futures`](http://docs.python.org/3/library/concurrent.futures.html)（需要 3.2+；如果您使用的是 2.7，请从 PyPI 安装[backport](https://pypi.python.org/pypi/futures)），因为它使代码更简单一些；如果您需要更大的灵活性，则需要更复杂的[`multiprocessing`](http://docs.python.org/2/library/multiprocessing.html)库。

最后，我没有做任何批处理——每个任务都是一个元素——所以开销可能会非常糟糕。

但是从这个开始，尽可能简化它，然后将其转换为使用 1、2 和 3 轴等批次，如前所述。

# email - 您如何找到有关用于打开电子邮件的客户端的信息？

> ID：15102227
> 
> 赞同：0
> 
> 时间：2013-02-27T00:45:48.527
> 
> 标签：email, tracking

您如何在不使用 Google Analytics 或其他软件的情况下实时跟踪用户使用哪些客户端（设备、浏览器、电子邮件客户端等）打开电子邮件？

您是否嵌入图像然后检查标题？还是有其他解决方案。

我知道这只有在用户激活了 html 的情况下才有可能，但让我们以他们这样做为前提。

# java - Java 编程 - 需要插入逗号

> ID：15102228
> 
> 赞同：0
> 
> 时间：2013-02-27T00:45:53.163
> 
> 标签：java, number-formatting

我刚开始学习java，需要基础知识的帮助。我编写了将光速转换为每秒公里数的代码。代码如下所示：

```
public class LightSpeed
{
    private double conversion;

    /**
     * Constructor for objects of class LightSpeed
     */
    public LightSpeed()
    {
        conversion = (186000 * 1.6); //186000 is miles per second and 1.6 is kilometers per mile
    }

    /**
     * Print the conversion
     */
    public void conversion()
    {
        System.out.println("The speed of light is equal to " + conversion + " kilometers per second");
    }
} 
```

我需要在转换中包含逗号，这样数字就不会全部一起运行。而不是看起来像 297600.0 的数字，我需要它看起来像 297,600.0。有人请帮忙！谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T00:51:00.200

您需要格式化数字。其中一种方法是[`DecimalFormat`](http://docs.oracle.com/javase/7/docs/api/java/text/DecimalFormat.html)在 java.text 中。

```
DecimalFormat df = new DecimalFormat("#,##0.0");
System.out.println("The speed of light is equal to " + df.format(conversion) + " kilometers per second"); 
```

另一种方法是使用`printf`. 使用逗号标志并输出小数点后一位。这是[有关 printf 标志的更多信息](http://docs.oracle.com/javase/7/docs/api/java/util/Formatter.html#syntax)。

```
System.out.printf("The speed of light is equal to %,.1f kilometers per second\n", speed); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T00:53:18.417

将您的转换方法更改为

```
/**
 * Print the conversion
 */
public void conversion() {
    DecimalFormat myFormatter = new DecimalFormat("###,###.##");
    System.out.println("The speed of light is equal to "
            + myFormatter.format(conversion)
            + " kilometers per second");
} 
```

# c# - 如何在 url 加载时立即运行 aspx.cs 文件

> ID：15102243
> 
> 赞同：0
> 
> 时间：2013-02-27T00:46:40.663
> 
> 标签：c#, asp.net, service, web

抱歉，我不确定如何问这个问题。

我要做的是创建一个 Web 服务，当 URL 被点击时（一个 .swf 文件将发送请求并发送信息），Web 服务会发送一封电子邮件。

所以基本上，如果浏览器点击一个 url，比如 mywebsite.com/smtp/，它会加载一个发送电子邮件的 aspx.cs 文件。我不想让浏览器打开 mywebsite.com/smtp/sendemail.aspx。

基本上我只想通过点击链接在我的网络服务器上运行一个 .cs 文件。

我假设我只需要 .aspx 文件中的一些代码即可立即加载 aspx.cs 文件。

有什么想法或帮助吗？抱歉，我做了研究，只是不确定如何在谷歌中表达这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T00:51:17.240

有很多方法可以做到这一点。我认为最简单的是 HTTPHandler。

[http://support.microsoft.com/kb/308001](http://support.microsoft.com/kb/308001)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T00:51:40.040

首先，我建议您为此使用一个处理程序（以 .ashx 结尾）

现在，没有像cs第一运行，aspx第二这样的想法。有一个完整的页面运行，做一些事情（可以是发送电子邮件），呈现并返回一个 html 页面。

在该部分中，您可以通过发送无内容来简单地取消 html 的返回：

```
Response.TrySkipIisCustomErrors = true;
Response.Status = "204 No Content";
Response.StatusCode = 204; 
```

并用 , 结束页面循环`Response.End();`，或者使用我说你不需要的处理程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T00:56:44.170

如果我理解这个问题，您可以通过在该目录上设置一个默认页面（在 IIS 设置中）来做到这一点。因此，您可以将 sendemail.aspx 设置为 smtp 虚拟目录中的默认页面，而对 /smtp/ 的请求将由 sendemail.aspx 处理。

# ios - 为非用户创建 iOS 应用的邀请队列？

> ID：15102244
> 
> 赞同：0
> 
> 时间：2013-02-27T00:46:49.060
> 
> 标签：ios

我有一个客户希望我建立一个共享功能。这是用例：

*   用户邀请非用户下载该应用程序并同时共享私人资料。
*   当用户提交邀请时，系统会在数据库中创建一个状态为 0 的临时帐户 ID。
*   受邀用户从系统收到一封电子邮件，其中包含下载应用程序的链接，并获得激活密钥和有关如何激活帐户的说明。
*   用户输入电子邮件地址、名字、姓氏和激活密钥后，系统将提示他们填写密码字段以创建新密码。
*   完成这些步骤后，用户就可以查看邀请

本质上，这会为用户创建一个帐户，而无需他们明确这样做。你对此有什么看法？这是否超出了 Apple 的指导方针？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T00:58:52.547

没有人能够确定地告诉您什么是可以接受的，但是如果您查看 Apple 的指南，您会发现要求用户输入个人信息（在您的情况下为电子邮件和姓名）以使应用程序正常运行是不允许的。

通过将帐户创建全部发生在网络上，您也许可以摆脱它。（即，如果您的第一个步骤之后的所有步骤都发生在网络上），然后简单地允许用户登录到他们在应用程序中已经创建的帐户。（因此，它类似于 Facebook，您只需要求用户在使用该应用程序之前拥有一个帐户，而不是强迫他们创建一个帐户并提供个人详细信息。）

# ruby-on-rails-3 - Rails - 可以在命名空间控制器之间共享视图（部分、模板和布局）？

> ID：15102245
> 
> 赞同：3
> 
> 时间：2013-02-27T00:46:50.170
> 
> 标签：ruby-on-rails-3

我想在不同命名空间的控制器之间共享视图，包括局部视图、布局和模板。

### 问题

而不是把我的观点放进去

```
app/views/#{namespace}/#{controller}/...
app/views/layouts/#{namespace}/... 
```

我想表达我的观点

```
app/views/#{controller}/... 
app/views/layouts/... # as normal, without namespaces 
```

我也希望这是可选的。例如，如果有布局，`app/views/layouts/#{namespace}/...`则使用它，否则`app/views/layouts/...`照常使用。

### 我尝试过的一些事情：

1.  在这里使用类似的东西[`prepend_view_path`](http://apidock.com/rails/ActionController/Base/prepend_view_path)是行不通的，因为它仍然会在任何视图路径中`admin/courses#index`寻找模板。`admin/courses/index`

2.  使用该[`layout`](http://apidock.com/rails/ActionController/Layout/ClassMethods/layout)方法可能有效，但可能不适用于模板和部分。

3.  我试过覆盖 render 方法，但这似乎有点*hacky*。而且我不能只在 中执行此操作`ApplicationController`，因为它不处理视图中的渲染部分。所以我不得不在`ApplicationHelper`课堂上再次覆盖渲染方法，这很尴尬，不是干的，也不是那么直截了当。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T01:33:52.413

我喜欢铁轨。它是自动完成的，有点像。

我有从基本控制器扩展的控制器，即`Admin::CoursesController`正在扩展`BaseCoursesController`等。

所以我只需要把我的观点放进去

```
app/views/base_courses/index... 
```

我仍然可以选择将我的观点放入

```
app/views/admin/courses/index... 
```

瞧！

# .net - 自动生成预先生成的视图

> ID：15102246
> 
> 赞同：1
> 
> 时间：2013-02-27T00:47:02.177
> 
> 标签：.net, entity-framework, ef-power-tools

EF Power Tools 有一个不错的选项，此处解释：“生成 EF 运行时使用的预编译视图以提高启动性能。将生成的视图文件添加到包含项目。如果您更改模型，那么您将需要通过再次运行此命令重新生成预编译视图。”

这个特性非常棒，因此我们可以在引导过程中节省多达 15 秒。现在我的问题是：我可以在重建上下文时强制自动生成吗？据此，我对分离实体程序集的传播方法有同样的问题（entities.tt 和 edmx 在不同的程序集中）。在这两种情况下，我都必须手动执行这些步骤......

# r - 如何在 R 中添加不同的趋势线？

> ID：15102254
> 
> 赞同：23
> 
> 时间：2013-02-27T00:47:54.247
> 
> 标签：r, trendline

我知道如何使用`lm`和`abline`函数添加线性趋势线，但是如何添加其他趋势线，例如对数、指数和幂趋势线？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-02-27T00:53:21.067

这是我之前准备的一个：

```
# set the margins
tmpmar <- par("mar")
tmpmar[3] <- 0.5
par(mar=tmpmar)

# get underlying plot
x <- 1:10
y <- jitter(x^2)
plot(x, y, pch=20)

# basic straight line of fit
fit <- glm(y~x)
co <- coef(fit)
abline(fit, col="blue", lwd=2)

# exponential
f <- function(x,a,b) {a * exp(b * x)}
fit <- nls(y ~ f(x,a,b), start = c(a=1, b=1)) 
co <- coef(fit)
curve(f(x, a=co[1], b=co[2]), add = TRUE, col="green", lwd=2) 

# logarithmic
f <- function(x,a,b) {a * log(x) + b}
fit <- nls(y ~ f(x,a,b), start = c(a=1, b=1)) 
co <- coef(fit)
curve(f(x, a=co[1], b=co[2]), add = TRUE, col="orange", lwd=2) 

# polynomial
f <- function(x,a,b,d) {(a*x^2) + (b*x) + d}
fit <- nls(y ~ f(x,a,b,d), start = c(a=1, b=1, d=1)) 
co <- coef(fit)
curve(f(x, a=co[1], b=co[2], d=co[3]), add = TRUE, col="pink", lwd=2) 
```

添加描述性图例：

```
# legend
legend("topleft",
    legend=c("linear","exponential","logarithmic","polynomial"),
    col=c("blue","green","orange","pink"),
    lwd=2,
    ) 
```

结果：

![在此处输入图像描述](../Images/43a532150a705a01517a31b8a294dcb1.png)

绘制曲线的一种通用且不那么繁琐的方法是将`x`系数列表传递给`curve`函数，例如：

```
curve(do.call(f, c(list(x), coef(fit)) ), add=TRUE) 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-02-27T02:18:48.727

一种`ggplot2`使用`stat_smooth`, 使用与 thelatemail 相同的数据的方法

```
DF <- data.frame(x, y)

ggplot(DF, aes(x = x, y = y)) +
  geom_point() +
  stat_smooth(method = 'lm', aes(colour = 'linear'), se = FALSE) +
  stat_smooth(method = 'lm', formula = y ~ poly(x,2), aes(colour = 'polynomial'), se= FALSE) +
  stat_smooth(method = 'nls', formula = y ~ a * log(x) + b, aes(colour = 'logarithmic'), se = FALSE, method.args = list(start = list(a = 1, b = 1))) +
  stat_smooth(method = 'nls', formula = y ~ a * exp(b * x), aes(colour = 'Exponential'), se = FALSE, method.args = list(start = list(a = 1, b = 1))) +
  theme_bw() +
  scale_colour_brewer(name = 'Trendline', palette = 'Set2') 
```

![在此处输入图像描述](../Images/27d8532d3defea7b2053002e3f9fffcb.png)

`glm`您还可以像使用对数链接函数一样拟合指数趋势线

```
glm(y ~ x, data = DF, family = gaussian(link = 'log')) 
```

* * *

为了一点乐趣，您可以`theme_excel`使用[ggthemes](https://github.com/jrnold/ggthemes)

```
library(ggthemes)

ggplot(DF, aes(x = x, y = y)) +
  geom_point() +
  stat_smooth(method = 'lm', aes(colour = 'linear'), se = FALSE) +
  stat_smooth(method = 'lm', formula = y ~ poly(x,2), aes(colour = 'polynomial'), se= FALSE) +
  stat_smooth(method = 'nls', formula = y ~ a * log(x) + b, aes(colour = 'logarithmic'), se = FALSE, method.args = list(start = list(a = 1, b = 1))) +
  stat_smooth(method = 'nls', formula = y ~ a * exp(b * x), aes(colour = 'Exponential'), se = FALSE, method.args = list(start = list(a = 1, b = 1))) +
  theme_excel() +
  scale_colour_excel(name = 'Trendline') 
```

![在此处输入图像描述](../Images/9d8e5b2f0562e086e20c3a8eb6b7db1e.png)

# bash - 如何制作多维数组 Bash

> ID：15102255
> 
> 赞同：0
> 
> 时间：2013-02-27T00:47:59.217
> 
> 标签：bash

所以我一直在网上寻找并寻找如何制作二维数组。就像我有点理解单线线性阵列一样。但是当我上网时，我看到的只是一堆代码，我什至不明白代码的每个组件是做什么的。谢谢谁回答。

您能否向我解释一下代码的重要部分以及那里的功能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T00:54:04.717

多维数组只是 bash 4 中关联数组的一个特例：

```
# Make myarray an associative array
declare -A myarray 

# Assign some random value
myarray[3,7]="foo"

# Access it through variables
x=3 y=7
echo "${myarray[$x,$y]}" 
```

它之所以有效，是因为“3,7”只是一个字符串，就像其他字符串一样。它也可以是“warthog”或“ThreeCommaSeven”。只要代码中的所有其他内容将索引 3 和 7 转换为字符串“3,7”，它就可以像多维数组一样工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-08-22T00:20:45.510

如果您想在事先不知道其编号的情况下列出元素，一个非常方便的解决方案：

```
a=()
a+=( Mexico,2000 )
a+=( Canada,3000 )

for row in ${a[@]};
do
    echo place: ${row%%,*} airplanes: ${row##*,}
done 
```

# javascript - Javascript：循环后打开 URL 给出正确答案

> ID：15102261
> 
> 赞同：0
> 
> 时间：2013-02-27T00:48:54.237
> 
> 标签：javascript, while-loop, do-while

我想不通：

```
var right = {"Google" :1, "Bing" :1}

        do {
            var website = prompt("Where should I redirect you: Google, Yahoo!, ebay or CCSF?", "");         
        } while (!right[website]);

        if (website == "Google") {
            var url = "https://www.google.com/";
            window.location(url, '_blank');
            window.focus();
        } else if (website == "Bing") {
            var url = "http://www.bing.com/";
            window.location(url, '_blank');
            window.focus();
        } else {
            ;
        } 
```

循环应该保留一个人，直到他输入正确的单词（在我的示例中是 Google 或 Bing）。但是，打开此 url 的下一个功能无法正常工作。（我不想使用选择/选项）。此外，结束“else”对我来说也很可疑。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T00:50:28.247

`window.location`不是函数。你的意思是使用`window.open`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T01:01:33.963

您应该使用以下内容：

```
window.open( url ); 
```

或者

```
location.href = url; 
```

# c++ - 在源文件中定义方法时出错

> ID：15102264
> 
> 赞同：1
> 
> 时间：2013-02-27T00:49:17.567
> 
> 标签：c++, constructor, header

我正在尝试创建一个使用头文件（.h）文件和源文件（.cpp）的类。我遇到了这个似乎无法解决的错误：

> 错误：“Menu::Menu(int w, int h)”没有为以下内容提供初始化程序：

这是我的代码：
标题：

```
//Menu.h:
#ifndef MENU_H
#define MENU_H

#include <StdAfx.h>
#include <objidl.h>
#include <gdiplus.h>
#include <windows.h>

using namespace Gdiplus;
#pragma comment (lib,"Gdiplus.lib")

class Menu
{
public:
    Menu(int w, int h);
    void render();
    void checkInput(int x, int y, int message);
    void setWidth(int w);
    void setHeight(int h);
    void setOpenWidth(int w);
    void setOpenHeight(int h);
    void setPosX(int x);
    void setPosY(int y);
    void setDraggablePaneColor(Color c);
    void setContentPaneColor(Color c);
    void setCornerButtonColorInactive(Color c);
    void setCornerButtonColorActive(Color c);
    void setTextColor(Color c);
    void setBorderColor(Color c);

private:

    //Position variables:

    //window position variables
    int posX;
    int posY;

    //drag offset variables
    int dragX;
    int dragY;

    //Width and height variables:

    //width and height of draggable pane
    int width;
    int height;

    //width and height of content pane
    int widthOpen;
    int heightOpen;

    //States

    //menu open states
    bool menuOpen;

    //corner button hover states
    bool cornerButtonHover;
    bool cornerButtonWasHovering;

    //dragging state
    bool dragging;
    //left mouse button down state
    bool lmbDown;

    //Colors

    //draggable pane color
    Color draggablePaneColor;
    //content pane color
    Color contentPaneColor;
    //inactive button color (not hovering)
    Color cornerButtonColorInactive;
    //active button color (hovering)
    Color cornerButtonColorActive;
    //text color
    Color textColor;
    //border color
    Color borderColor;

    //Constants

    //corner button text
    const wchar_t cornerButtonText[][3];
    //corner button length
    const int cornerButtonLength;

    //Content

    //element content[];
};
#endif 
```

资源：

```
//Menu.cpp
#include "Menu.h"

Menu::Menu(int w, int h)
{

}

int posX = 0;
int posY = 0;

//drag offset variables
int dragX = 0;
int dragY = 0;

//Width and height variables:

//width and height of draggable pane
int width = 150;
int height = 20;

//width and height of content pane
int widthOpen = 150;
int heightOpen = 200;

//States

//menu open states
bool menuOpen = true;

//corner button hover states
bool cornerButtonHover = false;
bool cornerButtonWasHovering = false;

//dragging state
bool dragging = false;
//left mouse button down state
bool lmbDown = false;

//Colors

//draggable pane color
Color draggablePaneColor = Color(60, 60, 60);
//content pane color
Color contentPaneColor = Color(80, 80, 80);
//inactive button color (not hovering)
Color cornerButtonColorInactive = Color(60, 60, 60);
//active button color (hovering)
Color cornerButtonColorActive = Color(70, 70, 70);
//text color
Color textColor = Color::White;
//border color
Color borderColor = Color::Black;

//Constants

//corner button text
const wchar_t cornerButtonText[][3] = {L"+", L"-", L"X"};
//corner button length
const int cornerButtonLength = height - 4;

//Content

//element content[];
void Menu()
{

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T01:17:42.567

`const`成员必须在构造函数中显式初始化。你可能认为你已经在这样做了，但事实并非如此。你的代码：

```
Menu::Menu(int w, int h)
{

}

int posX = 0;
int posY = 0;
... 
```

定义一个*空*的构造函数，然后在文件范围内定义新变量。`posX`created by与`int posX = 0;`无关`Menu::posX`。要在构造函数中正确初始化成员变量，您需要使用以下内容：

```
Menu::Menu(int w, int h)
{
   posX = 0;
   posY = 0;
   ...
} 
```

# makefile - makefile 中的嵌套循环，与“-j n”兼容

> ID：15102267
> 
> 赞同：3
> 
> 时间：2013-02-27T00:50:08.143
> 
> 标签：makefile, gnu-make

在 bobbogo 对 Stack Overflow 问题的回答中[How to write loop in makefile?](https://stackoverflow.com/questions/1490949/how-to-write-loop-in-makefile) ，展示了如何在 makefile 中编写与以下伪代码等效的代码：

```
For i in 1, ..., n:
  Add the following rule "job_$i: ; ./a.out $i > output_$i" 
```

正如答案本身所指出的，bobbogo 解决方案的优点在于，如果您指定“-j num_threads”，作业将并行运行。其他明显且更简单的解决方案不具有此属性。

我的问题：我怎么能做同样的事情，但对于嵌套循环，即：

```
For i in 1, ..., n:
  For j in 1, ..., m:
    Add the following rule "job_$i_$j: ; ./a.out $i $j > output_$i_$j" 
```

我只期望使用 GNU Make。提前致谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-27T10:54:47.993

@Michael 做对了。唯一棘手的一点是在作业的配方中导出 $i 和 $j。在最初的解决方案中，我使用了静态模式规则，其中`$*`shell 命令扩展为规则中匹配的字符串`%`。*不幸的是，当您想匹配目标名称中的两个*字段时，它就不太方便了。宏有很大帮助。草图：

```
jobs := $(foreach i,1 2 3 4 5,$(foreach j,1 2 3,job-$i-$j))

.PHONY: all
all: ${jobs} ; echo $@ Success

i = $(firstword $(subst -, ,$*))
j = $(lastword $(subst -, ,$*))

.PHONY: ${jobs}
${jobs}: job-%:
    echo i is $i j is $j 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T03:02:31.917

经过一番挖掘，我发现了这个：

```
NUM1 := $(shell seq 1 5)
NUM2 := $(shell seq 1 3)
A := $(addprefix job_,$(NUM1))
B := $(foreach a,$(A),$(addprefix $(a)_,$(NUM2))) 
```

这形成了规则，然后你只需要添加你的任务。像这样的东西：

```
all: $(B)
$(B):
    @echo $@ 
```

# sql - 将伪 24 小时时钟时间转换为 12 小时时钟时间

> ID：15102276
> 
> 赞同：0
> 
> 时间：2013-02-27T00:50:52.667
> 
> 标签：sql, ms-access

我有一个显示订单周转时间的 MS Access 查询。两个问题：

1.  时间是 24 小时制时间（例如：0105），因此当您从 CPOE 时间中减去验证时间时，您会得到一个既不是分钟也不是小时的值，因此您不能简单地将其转换为分钟（即: 0701 – 0527 = 174, 实际相差 94 分钟),
2.  如果 CPOE 时间在午夜之前，而验证时间在午夜之后，则差异非常扭曲（即：2351 – 0024 = 2327，实际差异为 33 分钟）。

有谁知道如何解决这个问题？这是 SQL 查询：

```
 SELECT 
    BI.PTNAME, 
    PHM_POE_HIST.FUNCTION, 
    PHM_ORDERS.VALIDATED_DATE, 
    PHM_ORDERS.VALIDATED_BY, 
    SAT.USER_NAME, 
    PHM_ORDERS.VALIDATED_TIME, 
    Right([TRAN_DATE_TIME],4) AS CPOE_TIME, 
    Abs([validated_time]-[CPOE_TIME]) AS Diff, 
    PHM_POE_HIST.TRAN_DATE_TIME, 
    PHM_POE_HIST.EFF_DATE_TIME, 
    PHM_POE_HIST.HIST_SEQ, BI.NRS_STATION, 
    SITE.NAME, PHM_ORDERS.PMP, 
    PHM_ORDERS.PRIORITY, 
    Trim([GENERIC_NAME] & " " & [STRENGTH] & " " & [STRENGTH_UNIT] & " " & [DOSAGE_FORM] & " " & [LATIN_DIR_ABBR]) AS DESCRIPTION 
FROM 
    ((BI LEFT JOIN 
            (PHM_ORDERS LEFT JOIN PHM_POE_HIST ON (PHM_ORDERS.POE_ORDER_NUMBER = PHM_POE_HIST.POE_ORDER_NUMBER) AND (PHM_ORDERS.ITN = PHM_POE_HIST.ITN))
        ON BI.ITN = PHM_ORDERS.ITN) 
    LEFT JOIN SAT
         ON PHM_ORDERS.VALIDATED_BY = SAT.USER_INITIALS)
    LEFT JOIN SITE 
        ON BI.SITE = SITE.SITE
WHERE 
    (((BI.PTNAME) Is Not Null) 
    AND ((PHM_POE_HIST.FUNCTION)="NW") 
    AND ((PHM_ORDERS.VALIDATED_DATE)=datereltoday(-1)) 
    AND ((PHM_ORDERS.PRIORITY)="STAT")); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T01:01:17.067

只是不要在日期或时间上做数学......永远。军用时间是一种视觉格式，因此请解析出小时和分钟：

假设数据类型是 char(4)

```
LEFT(MilitaryTimeColumn, 2) => hours
RIGHT(MilitaryTimeColumn, 2) => minutes 
```

然后转换为数字

```
CInt(LEFT(MilitaryTimeColumn, 2)) --> hours as integers
CInt(RIGHT(MilitaryTimeColumn, 2)) --> minutes as integers 
```

计算总分钟数

```
CInt(LEFT(MilitaryTimeColumn, 2)) * 60 + CInt(RIGHT(MilitaryTimeColumn, 2)) 
```

然后添加到原始日期

```
DateAdd("n", 
    CInt(LEFT(MilitaryTimeColumn, 2)) * 60 + CInt(RIGHT(MilitaryTimeColumn, 2)), 
    DateColumn) --> Complete datetime 
```

然后用于[`DateDiff`](http://www.techonthenet.com/access/functions/date/datediff.php)获取日期之间的距离。

# jquery-mobile - jQuery Mobile Android 2.x 幻灯片转换支持

> ID：15102277
> 
> 赞同：0
> 
> 时间：2013-02-27T00:50:56.387
> 
> 标签：jquery-mobile, css-transitions, slide, android-2.3-gingerbread, polyfills

jQuery Mobile 不支持 3D 过渡，例如适用于 Android 2.3 及更低版本的幻灯片。有一些 polyfill/widget/plugin/方式让它工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T01:26:49.910

不幸的是，对于旧版本的 android，这些功能被禁用的原因是 android 浏览器本身缺乏对 3-D 过渡的支持。尝试通过一些解决方法来实现这一点可能会给您带来绝对令人沮丧的性能。我最好的建议：坚持淡化。可能有用也可能没有用的辅助建议，请查看 jQTouch 以查看它是否可以实现您正在寻找的转换。[jQTouch网站](http://jqtouch.com/)

# google-chrome-extension - 如何在 Chrome 扩展程序的后台页面上执行脚本

> ID：15102282
> 
> 赞同：0
> 
> 时间：2013-02-27T00:51:17.887
> 
> 标签：google-chrome-extension

我正在开发 Chrome 扩展。我的 manifest.json 是：

```
"page_action": {
    "default_icon": {
        "19": "icons/icon19.png",
        "38": "icons/icon38.jpg"
    },
    "default_popup": "options.html"
}, 
```

在我的扩展中，我试图执行试图在实际网页上运行/到达的脚本：

```
// in options.html
chrome.tabs.executescript(null,{code:"alert('hello!');"}) ; 
```

但是 Chrome 扩展调试器会输出这个错误：

```
Uncaught TypeError: Object #<Object> has no method 'executescript' 
```

**我想立即反映对 content_script 或实际网页的选项的任何更改。**

在 page_action 范围内，我怎样才能到达“chrome”对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T05:50:01.063

现在尝试更改`executescript`为`executeScript`大写“S”很重要。

`executeScript`并且`insertCSS`主要用于将 js 或 css 文件注入给定选项卡而不是原始代码。当您想在非常特定的情况下注入该代码时使用它们。在您的代码中，您没有指定`id`将代码注入到哪个选项卡中，因此它只是在给定的上下文中注入它。如果您在消息传递中使用`chrome.tabs.query`like，您应该能够将代码注入到实际的选项卡中。

当您更改弹出窗口中的选项时，您似乎正试图影响给定选项卡上的某种更改，`Page Action`我个人建议您`jQuery`在使用从另一个问题传递的消息将消息发送到给定的标签。您可以尝试以编程方式注入`css`or来执行此操作`Javascript`，但选项中的连续更改可能会产生不良结果。

我不知道您要进行哪些更改的确切细节。如果它们是纯粹的`css`，那么您可以将一个样式表注入页面，只需在您想要更改的内容上切换一个类，并为每个场景设置一个类。如果您更详细地描述您正在尝试做的事情，我可以提供更详细的建议。

# android - Asynctask 位图和 sqlite 问题

> ID：15102283
> 
> 赞同：0
> 
> 时间：2013-02-27T00:51:19.703
> 
> 标签：android, sqlite, bitmap, android-asynctask

我使用一个将 bimap 设置为 ImageView 的库：

**库：** [https ://github.com/nostra13/Android-Universal-Image-Loader](https://github.com/nostra13/Android-Universal-Image-Loader)

```
imageLoader.displayImage(urlString, imageView,  options); 
```

它做一个异步任务做下载并将这个位图设置到imageView中。问题是，在它之后，我需要使用 sqlite 进行存储：

```
 BitmapDrawable bitmapDrawable = (BitmapDrawable) imageView.getDrawable();
    Bitmap photo = bitmapDrawable.getBitmap();
    ByteArrayOutputStream stream = new ByteArrayOutputStream();
    photo.compress(Bitmap.CompressFormat.JPEG, 100, stream);
    byte[] imageInByte = stream.toByteArray();
    db.updateUser(imageInByte);
    db.close(); 
```

因此，当 imageLoader 执行任务时，程序会存储默认图像而不是下载的图像。此外，将此代码放入 Asyntask 中并尝试将位图存储在 onPostexecute(); 在图书馆里给我一个错误。

我不想使用另一个库，也许循环应该很好，我试过：

```
while (((BitmapDrawable)imageView.getDrawable()).getBitmap() == BitmapFactory.decodeResource(getResources(), R.drawable.ic_stub)) {
Log.d("MyApp", "whileloop");
} 
```

那么，如何创建一个“等待”/循环来检查图像何时下载并存储呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T03:52:05.260

这不就行了吗？

```
imageLoader.loadImage(imageUri, targetSize, displayOptions, new SimpleImageLoadingListener() {
    @Override
    public void onLoadingComplete(String imageUri, View view, Bitmap loadedImage) {
        ByteArrayOutputStream stream = new ByteArrayOutputStream();
        loadedImage.compress(Bitmap.CompressFormat.JPEG, 100, stream);
        byte[] imageInByte = stream.toByteArray();
        db.updateUser(imageInByte);
        db.close();
    }
}); 
```

# java - 没有为 Rectangle() 找到合适的构造函数

> ID：15102284
> 
> 赞同：-1
> 
> 时间：2013-02-27T00:51:34.283
> 
> 标签：java

我是 VBA 的老粉丝，刚刚开始学习 Java。一切都很顺利，直到我到达`Point`and `Rectangle`。我的代码如下：

```
// Point demo

import java.awt.Point;  
import java.awt.Rectangle; 

class PointDemo {

    public static void main(String[] args) {
        Point originOne = new Point(25,50);
        Rectangle R1 = new Rectangle(originOne, 100, 200); //        Line 9
        System.out.println("OriginOne X = " + originOne.getLocation());
    }
} 
```

如果我省略第 9 行，则没有错误。但是，一旦插入第 9 行并重新编译，就会出现以下错误：

> ...错误：找不到合适的构造函数 Rectangle(Point, int, int) Rectangle R1 = new Rectangle(originOne, 100, 200); // 第 9 行.....

在 new 下有一个插入符号，然后是同一行的一系列其他错误描述。

但是，如果我用实际值 25、50 代替 originOne（第 9 行），就可以了。

其他信息：

我所有的源文件和类文件都在目录中 `C:\Java\`。所有其他文件和子文件夹 ( `jdk1.7.0_13`, `JRE7`) 都在`C:\Program Files\Java`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T00:53:54.013

`Rectangle`表示一个二维盒子，它需要 4 个参数，`x`, `y`,`width`和`height`

有可用的简写构造函数，带有 1 到 2 个参数，但基本要求是上面提到的 4 个参数。

查看[JavaDocs](http://docs.oracle.com/javase/7/docs/api/java/awt/Rectangle.html#Rectangle%28int,%20int,%20int,%20int%29)以获取更多信息

你可以`new Rectangle(originOne, new Dimension(100, 200))`改用...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T00:56:17.727

如果您查看[java 文档](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/Rectangle.html)

您将看到没有接受 Point 和 2 个整数的 rectangle 构造函数。

虽然有一个构造函数接受 4 个整数，但也有一个接受一个点和一个维度的构造函数。

所以你可以选择做：

```
Rectangle myRectangle = new Rectangle(originOne.X, originOne.Y, 100, 200); 
```

或者

```
import java.awt.Dimension;
Dimension myDimension = new Dimension(100,200);
Rectangle myRectangle = new Rectangle(originOne, myDimension); 
```

取决于哪一个更适合您的目的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T00:55:01.160

`Rectangle`不能接受 3 个参数。您可以将代码更改为以下内容：

```
import java.awt.Point;  
import java.awt.Rectangle;
import java.awt.Dimension;

class PointDemo {

    public static void main(String[] args) {
        Point originOne = new Point(25,50);
        Rectangle R1 = new Rectangle(originOne, new Dimension(100, 200)); // No error
        System.out.println("OriginOne X = " + originOne.getLocation());
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-27T00:57:01.467

该类`Rectangle`有许多构造函数，但没有一个具有点、宽度和高度的构造函数。

```
Point originOne = new Point(25,50);
Rectangle r1 = new Rectangle(100, 200); //        Line 9
r1.setLocation(originOne); 
```

...是一种方法。

查阅该类的 javadoc ( [http://docs.oracle.com/javase/6/docs/api/java/awt/Rectangle.html](http://docs.oracle.com/javase/6/docs/api/java/awt/Rectangle.html) ) 以查看所有允许的方法。

（注意：我已将您的变量小写，因为这是 java 约定。）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-27T00:54:39.367

查看[Rectangle 类的 Javadocs](http://docs.oracle.com/javase/6/docs/api/java/awt/Rectangle.html)。你会看到没有构造函数需要 a`Point`和 two `ints`。您将需要找到一个不同的构造函数来满足您的需求。

# silverlight - silverlight telerik radgridview 组标题不换行

> ID：15102286
> 
> 赞同：0
> 
> 时间：2013-02-27T00:51:39.490
> 
> 标签：silverlight, radgridview

我有一个带有组的 RadGridView，在组的标题中，我正在设置一个数据模板，其中 TextBlock 绑定到一个包含大字符串（小于 500 个字符）的属性。我已将 TextBlock 设置为包装其文本，但无论我尝试什么，文本都会向右滚动，但如果我向右滚动网格，组标题不会随之滚动，所以我无法阅读信息。

我唯一能做的就是将 TextBlock 的宽度设置为固定宽度，然后换行，但由于它是固定宽度，所以当我更改浏览器窗口的大小时效果不佳。

有任何想法吗？

这是 XAML：

```
<telerik:RadGridView x:Name="grdNotams" Grid.Row="1" AutoGenerateColumns="False" RowIndicatorVisibility="Collapsed" ShowGroupPanel="False" GroupRowIsExpandedChanging="grdNotam_GroupRowIsExpandedChanging">
    <telerik:RadGridView.Columns>
        <telerik:GridViewDataColumn Header="Status" UniqueName="colStatus" DataMemberBinding="{Binding Model.Status}" HeaderTextAlignment="Center" TextAlignment="Center" IsFilterable="False" IsSortable="False"/>
        <telerik:GridViewDataColumn Header="Trip #" UniqueName="colTripNumber" DataMemberBinding="{Binding Model.TripNumber}" HeaderTextAlignment="Center" TextAlignment="Center" IsFilterable="False" IsSortable="False"/>
    </telerik:RadGridView.Columns>
    <telerik:RadGridView.GroupHeaderTemplate>
        <DataTemplate>
            <TextBlock Text={Binding BigText} TextWrapping="Wrap" />
        <DataTemplate>
    </telerik:RadGridView.GroupHeaderTemplate>
</telerik:RadGridView> 
```

我也尝试过这样的事情：

```
<DataTemplate>
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinitions></ColumnDefinitions>
            <ColumnDefinitions Width=20></ColumnDefinitions>
        </Grid.ColumnDefinitions>
        <TextBlock Text={Binding BigText} TextWrapping="Wrap" />
        <Ellipse Fill="Red" Width="10" Height="10" Margin="5" Grid.Column="1"/>
    </Grid>
</DataTemplate> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T09:15:19.270

GroupHeaderTemplate 最终应用于`GridViewGroupRow`.

您应该能够`define an implicit style`为该类型`HorizontalContentAlignment`设置为`Stretch`.

```
<Style TargetType="telerik:GridViewGroupRow">
    <Setter Property="HorizontalContentAlignment" Value="Stretch" />
</Style> 
```

# matlab - Matlab GUI：如何在用户界面中打印出绘图？

> ID：15102288
> 
> 赞同：1
> 
> 时间：2013-02-27T00:51:40.040
> 
> 标签：matlab, user-interface, printing, plot

我在 MATLAB 中有一个界面，它通过按 button2 绘制曲线。现在我无法打印出这个数字。更准确地说，我想添加另一个按钮来打印出情节。这是我的一段代码：

```
% --- Executes on button press in pushbutton2.
function pushbutton2_Callback(hObject, eventdata, handles)
% hObject    handle to pushbutton2 (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    structure with handles and user data (see GUIDATA)
%clear
%linkdata on
fileName = handles.fileName;

n_var=str2num(get(handles.n_var,'string'));

[x] = readColumns(fileName, n_var);

axes(handles.axes1);
hold on
plot(handles.axes1,x(1:n),'b','LineWidth',2)
hold off 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T22:51:14.320

看起来您使用 GUIDE 来制作 GUI，因此您应该以相同的方式添加新按钮（通过 GUIDE）。假设你已经这样做了，在它的回调函数中你会想要有这样的东西：

```
function printButton_Callback(hObject, eventdata, handles)
    fileName = handles.fileName;
    im = getframe(handles.axes1);
    %saves the image in variable "im" to a PNG file 
    imwrite(im.cdata, fileName, 'PNG')
end 
```

函数 getframe 获取输入句柄参数（在本例中为坐标区句柄）的快照，并返回包含图像数据（“cdata”）和用于帧的颜色图的结构。然后你用 imwrite 将图像数据写入磁盘，其中 fileName 大概是一个包含你想要的文件名的字符串，'PNG' 告诉 imwrite 你想要的扩展名（你也可以使用 BMP/GIF/JPEG 或其他）

同样作为一个轻微的挑剔，在您的问题中，您可以互换使用图形和绘图，但图形可能与情节不同；也就是说，您的图形将是您的整个 GUI，而情节将在您的轴上，这将是您的 GUI 的子级。

编辑：要保留轴标签，您可能必须使用不同的方法。相反，您可以做的是：

```
function printButton_Callback(hObject, eventdata, handles)
    fileName = handles.fileName;
    f_tmp = figure('visible', 'off');
    copyobj(handles.axes1,f_tmp);
    print(f_tmp, '-dpng', fileName);
    close(f_tmp);
end 
```

这将创建一个隐藏图形 f_tmp，将您在 handles.axes1 上的绘图复制到隐藏图形，然后将其打印到一个由字符串 fileName 命名的 PNG 文件（由标志“-dpng”指定，您可以使用其他扩展名）。最后它关闭了隐藏的人物。我认为这会起作用，如果不起作用，请告诉我

# jquery - 在 twitter bootstrap v2.3.0 上的最后一张幻灯片上停止轮播

> ID：15102291
> 
> 赞同：2
> 
> 时间：2013-02-27T00:51:50.910
> 
> 标签：jquery, twitter-bootstrap, carousel

我一直在寻找，似乎无法得到明确的答案。我有 5 张图片，我希望它在最后一张幻灯片的末尾停止。

这是代码：

```
<!-- begin: carousel -->
        <section id="carousel">
              <div id="myCarousel" class="carousel slide">
                <div class="carousel-inner">
                  <div class="item active">
                    <img src="img/slider/fake1.jpg" alt="">
                    <div class="carousel-caption">
                      <h4>First Thumbnail label</h4>
                      <p>Cras justo odio, dapibus ac facilisis in, egestas eget quam. Donec id elit non mi porta gravida at eget metus. Nullam id dolor id nibh ultricies vehicula ut id elit.</p>
                    </div>
                  </div>
                  <div class="item">
                    <img src="img/slider/fake2.jpg" alt="">
                    <div class="carousel-caption">
                      <h4>Second Thumbnail label</h4>
                      <p>Cras justo odio, dapibus ac facilisis in, egestas eget quam. Donec id elit non mi porta gravida at eget metus. Nullam id dolor id nibh ultricies vehicula ut id elit.</p>
                    </div>
                  </div>
                  <div class="item">
                    <img src="img/slider/fake3.jpg" alt="">
                    <div class="carousel-caption">
                      <h4>Third Thumbnail label</h4>
                      <p>Cras justo odio, dapibus ac facilisis in, egestas eget quam. Donec id elit non mi porta gravida at eget metus. Nullam id dolor id nibh ultricies vehicula ut id elit.</p>
                    </div>
                  </div>
                  <div class="item">
                    <img src="img/slider/fake4.jpg" alt="">
                    <div class="carousel-caption">
                      <h4>Third Thumbnail label</h4>
                      <p>Cras justo odio, dapibus ac facilisis in, egestas eget quam. Donec id elit non mi porta gravida at eget metus. Nullam id dolor id nibh ultricies vehicula ut id elit.</p>
                    </div>
                  </div>
                  <div class="item">
                    <img src="img/slider/fake5.jpg" alt="">
                    <div class="carousel-caption">
                      <h4>Third Thumbnail label</h4>
                      <p>Cras justo odio, dapibus ac facilisis in, egestas eget quam. Donec id elit non mi porta gravida at eget metus. Nullam id dolor id nibh ultricies vehicula ut id elit.</p>
                    </div>
                  </div>
                </div>
              </div>
        </section>
        <!-- end: carousel --> 
```

这是我的 JS

```
<script>
  !function ($) {
    $(function(){
      // carousel demo
      $('#myCarousel').carousel(
        {
            interval: 3000,
            pause: 'hover'
        }
      )
    })
  }(window.jQuery)
</script> 
```

提前致谢..

我尝试添加`cycle: true`，`clycle: 'true'`但它仍然会继续，第三张幻灯片再多两次（显然是幻灯片 4 和 5）然后它又回到 1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T06:59:49.167

获取轮播的“滑动”事件（滑动后触发）的钩子，当最后一张幻灯片处于活动状态时暂停轮播，例如：

```
$('#myCarousel').bind('slid', function(e) {
    var c = e.target;
    if($(c).find('.item:last').hasClass('active')) {
        $('#myCarousel').carousel('pause');
    }
}); 
```

这是一个[小提琴](http://jsfiddle.net/xQupa/)

# ruby - Sinatra 和 Grape API 在一起？

> ID：15102293
> 
> 赞同：9
> 
> 时间：2013-02-27T00:52:15.917
> 
> 标签：ruby, heroku, rubygems, sinatra, grape-api

我一直在阅读，我发现了这个名为 Grape for ruby[​​ 的微框架。](https://github.com/intridea/grape)我目前正在使用[Sinatra](http://www.sinatrarb.com/)来处理 Web 界面，但我也想实现 Grape 来处理应用程序的 API 方面。我找不到对这个主题有帮助的建议。Grape 文档说“Grape 是一个用于 Ruby 的类似 REST 的 API 微框架。它旨在通过提供简单的 DSL 来轻松开发 RESTful API，从而在 Rack 上运行或补充现有的 Web 应用程序框架，例如 Rails 和 Sinatra。” 所以听起来应该有一种将两者结合起来的官方方式吗？这个应用程序也将在 Heroku 上运行。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-27T19:19:25.813

您正在寻找的短语是：

*   多个机架应用程序
*   机架中间件
*   映射 url 机架 sinatra

那种事。Grape、Sinatra 和 Rails 都是[Rack](http://rack.github.com/)应用程序。这意味着您可以构建您的 Grape 应用程序、您的 Sinatra 应用程序和您的 Rails 应用程序，然后您可以使用 Rack 运行它们，因为它们都与**Rack 兼容**，因为它们共享一个*接口*。

这在实践中意味着您编写应用程序，然后将它们放在一个*机架*文件中以运行它们。一个使用 2 个 Sinatra 应用程序的简短示例（但它们可以是任意数量的任何类型的 Rack 应用程序）：

```
# app/frontend.rb
require 'sinatra/base'
# This is a rack app.
class Frontend < Sinatra::Base
  get "/"
    haml :index
  end
end

__END__

@@ layout
%html
  = yield

@@ index
%div.title This is the frontend.

# app/api.rb
# This is also a rack app.
class API < Sinatra::Base

  # when this is mapped below,
  # it will mean it gets called via "/api/"
  get "/" do
    "This is the API"
  end
end

# config.ru
require_relative "./app/frontend.rb"
require_relative "./app/api.rb"

# Here base URL's are mapped to rack apps.
run Rack::URLMap.new("/" => Frontend.new, 
                     "/api" => Api.new) 
```

如果您想从 Grape README 添加 Twitter API 示例：

```
# app/twitter_api.rb
module Twitter
  # more code follows

# config.ru
require_relative "./app/twitter_api.rb" # add this

# change this to:
run Rack::URLMap.new("/" => Frontend, 
                     "/api" => API,
                     "/twitter" => Twitter::API) 
```

希望这足以让你开始。一旦你知道在哪里看，就会有很多例子。您还可以使用`use`（请参阅[http://www.sinatrarb.com/intro#Rack%20Middleware](http://www.sinatrarb.com/intro#Rack%20Middleware)）在 Sinatra 应用程序中运行其他应用程序，我看到 Grape`mount`也提供了关键字。有很多可用的方法，一开始可能会有点混乱，但只要尝试一下，看看它们的作用和你最喜欢的方法。其中很大一部分是*偏好*，所以不要害怕选择感觉正确的东西。Ruby 更适合人类而不是计算机 :)

* * *

编辑：“内部”带有 Grape 应用程序的 Sinatra 应用程序

```
class App < Sinatra::Base
  use Twitter::API
  # other stuff…
end

# config.ru
# instead of URLMap…
map "/" do
  run App
end 
```

我相信它会是这样的。

# c# - 从文件中合并2列或更多列并在c#中获取结果

> ID：15102294
> 
> 赞同：0
> 
> 时间：2013-02-27T00:52:18.070
> 
> 标签：c#

我的文件是：

```
outlook temperature Humidity Windy PlayTennis 

sunny hot high false N

sunny hot high true N

overcast hot high false P

rain mild high false P

rain cool normal false P 
```

我从文件中发现了独特的元素：

```
element:occurence

suny :2 

overcast:1 

rain:2

mild:1

cool:1

hot :4

normal:1

high:2

false:4

true:1 

n:2

p:3 
```

然后我删除了出现次数小于 1 的元素。

输出如下：

```
suny : 2
rain: 2
hot :3
high:4
false:4
n:2 
p:3 
```

现在我想要输出为（从第一个输出开始，它应该与所有其他元素循环以形成一组两个频繁集）

```
element:occurence

sunny,hot:2
sunny,high:2
sunny,false:1
sunny,n:2
sunny,p:0
rain,hot:0
rain,high:1
rain,false:2
rain,n:0
rain,p:2
hot,high:2
hot,false:1
hot,n:2
hot,p:0
and so on.. 
```

这是我的代码：

```
var occurences = File.ReadAllLines(file)
    .Skip(1)
    .SelectMany(l => l.Split(new []{' '},StringSplitOptions.RemoveEmptyEntries))
    .GroupBy(w => w)
    .ToDictionary(g => g.Key, g => g.Count());

foreach(var pair in occurences)
    label1.Text += String.Format("{0}: {1}\n", pair.Key, pair.Value); 
```

我实现了这个来找到第一个频繁集。

对于第二个我该怎么办？

我还需要找到第三组。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T01:30:57.693

我将从重构开始。1）创建一个类来保存数据项

```
public class WeatherForecast
{
    public string Outlook { get; set; }
    public string Temperature { get; set; }
    public string Humidity { get; set; }
    public bool Windy { get; set; }
    public string PlayTennis { get; set; }
} 
```

然后创建你的对象；

```
var forecasts = new List<WeatherForecast>();
foreach(var line in File.ReadLines(file).Skip(1))
{
    var values = line.Split(' ');
    forecasts.Add(new WeatherForecast
                      {
                          Outlook = values[0],
                          Temperature = values[1],
                          Humidity = values[2],
                          Windy = Convert.ToBoolean(values[3]),
                          PlayTennis = values[4]
                      });
} 
```

然后，您也许能够弄清楚您想如何使用 Linq 查询数据。

有关分组帮助，请参阅[LINQ Group By Multiple fields -Syntax help](https://stackoverflow.com/questions/1869001/linq-group-by-multiple-fields-syntax-help)

```
//Group by 1 key
forecasts.GroupBy(f => new { f.Outlook }, (key, group) => new { Key1 = key.Outlook, Count = group.Count() });

//Group by 2 keys
forecasts.GroupBy(f => new { f.Outlook, f.Temperature }, (key, group) => new { Key1 = key.Outlook, Key2 = key.Temperature , Count = group.Count()});

//Group by 3 keys
forecasts.GroupBy(f => new { f.Outlook, f.Temperature, f.Humidity }, (key, group) => new { Key1 = key.Outlook, Key2 = key.Temperature, Key3 = key.Humidity, Count = group.Count()}); 
```

结果：

![在此处输入图像描述](../Images/6f2b4f1738864f0acea0f77fc1f89713.png)

# php - 网站如何在不重新加载页面的情况下检查登录凭据？

> ID：15102305
> 
> 赞同：3
> 
> 时间：2013-02-27T00:53:05.713
> 
> 标签：php, javascript, ajax, authentication, optimization

一些网站，例如[Yahoo](https://login.yahoo.com/config/login_verify2?.intl=ca&.src=ym)和[Google](https://accounts.google.com/ServiceLogin?service=mail&passive=true&rm=false&continue=https://mail.google.com/mail/&ss=1&scc=1&ltmpl=default&ltmplcache=2&hl=en)，使用 Ajax 来检查用户名/密码是否错误。显然必须有服务器端身份验证，因为任何人都可以更改本地 JavaScript 并欺骗它认为用户名/密码是正确的。我想知道这是如何有效地完成的，因为服务器不会两次检查相同的用户名/密码吗？考虑以下用户登录网站的场景：

1.  用户来到登录页面
2.  用户输入用户名/密码并点击提交
3.  如果输入的用户名/密码正确，服务器通过 Ajax 与客户端通信
4.  服务器回复说用户名/密码是否正确 - 在这个例子中是
5.  提交后，`<form>`间歇性页面将输入的值通过`POST`并在服务器端再次处理以验证用户名/密码是否正确以及是否在会话中设置了变量

在第 5 步中，服务器会第二次检查与第 3 步中相同的用户名/密码是否正确。有没有办法缓存第 3 步的结果或提高流程效率？此外，服务器已经在第 3 步中发送了用户名/密码。但我不确定这是否会加速该过程。

我正在使用 MySQL 数据库来存储用户名和密码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T01:18:39.453

在第 3 步，您的`onsubmit`处理程序会将您的 AJAX 请求发送到服务器以验证凭据***并***阻止正常的表单提交（通过调用`.preventDefault()`处理程序或从处理程序返回 false），因此第 5 步将永远不会发生。如果禁用了 javascript，那么您将没有 onsubmit 处理程序，而是将进行正常的表单提交。

在您的第 4 步中，如果您收到“正确”响应，则您的 AJAX 处理程序可以重定向到新页面；如果它是一个“不正确”的响应，你会留在登录页面，清除表单，并提出你的错误消息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T00:59:04.257

在第 3 点，JS 应该将您的表单提交给服务器端处理并等待响应。如果 JS 被禁用，那么表单将正常提交。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T01:08:09.167

正如我的评论所说，不确定我是否完全同意您的流程，这就是我的想象

1.  用户来到登录页面
2.  用户输入用户名/密码并点击提交
3.  Jquery 触发 onclick 操作，获取用户输入，向 php 发送 ajax 请求，php 清理并查询是否找到凭据。
4.  如果它们是 php 设置 session 和 cookie 并返回 ajax 结果。
5.  如果凭据不正确，php 也会处理该问题。

**或者** *如果你不想使用 ajax*

1.  用户来到登录页面
2.  用户输入用户名/密码并点击提交
3.  表单路由到 php 页面查询数据库以获取用户凭据，如果它们正确，则设置会话和 cookie 并重定向到 correctLogin.php
4.  如果没有重定向到不正确的Login.php

# javascript - 将所有 Backbone 模板放在一个 JS 文件中以便可以放在 CDN 上的最佳方法是什么？

> ID：15102308
> 
> 赞同：1
> 
> 时间：2013-02-27T00:53:29.053
> 
> 标签：javascript, ruby-on-rails, backbone.js, underscore.js

我想将所有 Backbone 模板放在一个 JS 文件中，以便我可以轻松地通过 CDN 分发它。理想情况下，它还应该与 Rails 资产编译工作流程一起使用。

**可能的解决方案#1：**

包含所有模板的单个 JS 文件声明如下：

```
app.templates.view = " \
<h3>something code</h3> \
"; 
```

太乱了 缺乏突出。

**可能的解决方案#2：**

包含所有内联模板的单个 html 文件。在我的主文档中包含部分内容。

```
<script type="text/template" id="list-item">
    <li><%= item %></li>
</script> 
```

我不能使用通过我的 CDN 分发的缩小 JS 文件的好处。模板将与我的 HTML 文件内联。

**可能的解决方案#3：**

使用 Require.js 但它似乎不能解决将所有模板包含在单个 JS 文件中的需要。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T12:02:34.630

看看[线人](https://github.com/testdouble/lineman)。它为您提供了一个非常好的开发 JavaScript 客户端的工作流程。它实际上只是聚合成一个超级简单的工作流的 Grunt 任务的集合。它所做的一件事就是将所有的 Underscore（或 Handlebars）模板编译成 JST（如 Rails）。它使用“grunt-contrib-jst”来执行此操作并将模板输出到“generated/template/underscore.js”。然后它将所有 JS 编译到一个文件中，尽管您可以轻松地单独引入 .js 文件。

它可能会为您指明正确的方向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-16T06:57:04.673

感谢您的回复。我以可能的解决方案 #2 结束，其中我有一堆模板并使用 Rails 部分包含在主文件中。目前，通过 CDN 分发模板并没有太大的好处。

*我没有选择使用 Grunt，因为我认为它增加了工作流程的额外复杂性，考虑到团队中的所有开发人员都必须采用新的工作流程。

# regex - 如何正确匹配 Python 字符串文字和正则表达式？

> ID：15102309
> 
> 赞同：0
> 
> 时间：2013-02-27T00:53:33.700
> 
> 标签：regex

这是课堂项目的一部分。我使用 Java 构建了一个扫描 Python 代码的扫描仪。现在我必须将运行时间与 Python 扫描仪的 Flex 实现进行比较。

所以我正在尝试使用 Flex 匹配 Python 字符串文字。我正在尝试将[字符串文字规范](http://docs.python.org/2/reference/lexical_analysis.html#string-literals)从 Python 文档转换为 C 正则表达式。

这是我到目前为止所拥有的：

`[r|u|ur|R|U|UR|Ur|uR|b|B|br|Br|bR|BR]?('(([^\\]|[^\n]|[^'])|\\.)*'|\"(([^\\]|[^\n]|[^'])|\\.)*\"|'''([^\\]|\\.)*'''|\"\"\"([^\\]|\\.)*\"\"\")`

但是当我将它应用于以下文本时：

```
r'' lol
r'' 
```

它匹配两条线。我希望它分别匹配每个`r''`并忽略引号之外的任何内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T01:32:31.827

“除“\”或换行符或引号之外的任何源字符都转换为`[^\\\n\']`而不是我之前在上面写的，`[^\\]|[^\n]|[^']`.

发现[regex101.com](http://regex101.com/)的错误。它有一个非常有用的正则表达式分析工具。

# javascript - 使用 jquery ajax 和地理位置解析 xml

> ID：15102311
> 
> 赞同：1
> 
> 时间：2013-02-27T00:53:47.290
> 
> 标签：javascript, xml, ajax, jquery

`lat`我想使用地理定位来获取我当前的位置并且它可以工作，然后我想解析`lon`应该是我的位置的 xml。但是我的代码在这里似乎有些问题：

`url: "http://**/festivalapi.php? method=getPhotos&returntype=xml&lat=" + mylat + "&lon="+ mylong ",`

但是如果我直接使用 lat 和 lon 就可以了。像这样：

```
url: http://**/festivalapi.php? method=getPhotos&returntype=xml&lat=54.911859&lon=-1.343404` 
```

所以我认为这里一定是一些语法错误..

这是整个jquery：

```
$(document).ready(function () {

if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(displayPosition, errorFunction, { enableHighAccuracy: true, maximumAge: 30000, timeout: 27000 });
} else {
    alert('It seems like Geolocation, which is required for this page, is not enabled in your browser. Please use a browser which supports it.');
}

function displayPosition(pos) {
    var mylat = pos.coords.latitude;
    var mylong = pos.coords.longitude;
    var thediv = document.getElementById('locationinfo');
    thediv.innerHTML = '<p>Your latitide is :' +
        mylat + ' and your longitude is ' + mylong + '</p>';
}

// Error callback function
function errorFunction(pos) {
    alert('Error!');
}

$.ajax({
    type: "GET",
    url: "http://**/festivalapi.php? method=getPhotos&returntype=xml&lat=" + mylat + "&lon="+ mylong ",
    dataType: "xml",
    success: function (xml) {
        $(xml).find('photo').each(function () {
            var name = $(this).find('name').text();
            var url = $(this).find('url').text();

            $('<li></li>').append("<img src='" + url + "'/>").appendTo('#photos');

        });
    },
    error: function () {
        alert('Sorry, an error occured loading the XML file');
    }
}); 
```

});

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T00:57:01.080

您的`mylat`和`mylong`变量是`var`在函数内部声明的`displayPosition()`，但您在 AJAX 调用中在该函数外部使用它们。那时它们没有设置，所以你没有将它们传递给你的 AJAX 调用。

将您的 AJAX 调用移入`displayPosition()`，看看是否可以为您解决问题。

# eclipse - 指向本地主机的 Intalio Ajax 表单

> ID：15102320
> 
> 赞同：0
> 
> 时间：2013-02-27T00:54:27.763
> 
> 标签：eclipse, business-process-management

有人在使用 Intalio|BPMS 吗？

我正在尝试使用社区版实现一个流程，但我遇到了一个似乎无法解决的问题。

该进程有一个 AJAX 表单，如果我使用 localhost 转到服务器中的 ui-fw，一切正常，但如果我尝试使用 url 远程访问服务器，它不会。

AJAX 表单的 iframe 指向 localhost 而不是 url。

从 Intalio 非常糟糕的论坛中，我检查了/尝试过：

*   使用 url 从设计器部署
*   在流程部署目录中以及在 var/conf 中查找对 localhost 的所有提及

仍然没有运气。

任何想法任何人？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T00:23:56.517

Ricardo, IIRC 表单根据您在部署清单中使用的设置进行部署。我相信您也可以在部署清单中设置其他主机名以部署到本地主机，但为表单和流程声明不同的主机名。

# python - 如何使用 Selenium WebDriver 和 python 获取 Web 元素的颜色？

> ID：15102323
> 
> 赞同：10
> 
> 时间：2013-02-27T00:54:51.003
> 
> 标签：python, selenium, automation, selenium-webdriver

如何以十六进制格式定位 web 元素的背景颜色？使用我当前的 selenium webdriver python 代码，它以 RGB 格式返回背景颜色。

**这是我正在查看的 html 元素**

```
div class="bar" style="background-color: #DD514C; background-image: -moz-linear-gradient(center top , #EE5F5B, #C43C35); background-image: -webkit-linear-gradient(top , #EE5F5B, #C43C35); background-image: -ms-linear-gradient(top , #EE5F5B, #C43C35); filter: progid:DXImageTransform.Microsoft.gradient(startColorstr=#EE5F5B, endColorstr=#C43C35, GradientType=0); background-repeat: repeat-x; color: #ffffff; width: 11.5%" 
```

**我的 webdriver python 代码是：**

```
find_element_by_class_name("bar").get_attribute("style") 
```

它以 rgb 格式返回具有颜色的样式。我想专门获取十六进制格式的背景颜色，以便我可以将它与我的预期值进行比较。我现在得到以下输出：

```
background-color: rgb(221, 81, 76); background-image: -moz-linear-gradient(center top , rgb(238, 95, 91), rgb(196, 60, 53)); background-repeat: repeat-x; color: rgb(255, 255, 255); width: 11.5%; 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-27T16:53:00.850

您正在寻找`value_of_css_property('background-color')`：

```
rgb = find_element_by_class_name("bar").value_of_css_property('background-color') 
```

但是，这将返回字符串`rgb(221, 81, 76)`。为了获得它的十六进制值，您可以使用@unutbu 的答案：

```
import re
...
rgb = find_element_by_class_name("bar").value_of_css_property('background-color')

r,g,b = map(int, re.search(
             r'rgb\((\d+),\s*(\d+),\s*(\d+)', rgb).groups())
color = '#%02x%02x%02x' % (r, g, b) 
```

你的十六进制`color`是字符串`#dd514c`。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2018-04-14T04:18:12.527

要转换颜色，可以直接使用 selenium 的 Color 类：

```
from selenium.webdriver.support.color import Color

rgb = find_element_by_class_name("bar").value_of_css_property('background-color')
hex = Color.from_string(rgb).hex 
```

[硒文档](https://seleniumhq.github.io/selenium/docs/api/py/webdriver_support/selenium.webdriver.support.color.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-03-04T13:54:10.520

由于返回的格式与元组匹配，因此无需使用“re”即可实现，其中返回是“rgba”字符串：

```
import ast

rgba = element.value_of_css_property("background-color")
r, g, b, alpha = ast.literal_eval(rgba.strip("rgba"))
hex_value = '#%02x%02x%02x' % (r, g, b)
return hex_value, alpha 
```

字符串是 'rgb' 的地方只是省略了“alpha”

```
import ast

rgb = element.value_of_css_property("background-color")
r, g, b = ast.literal_eval(rgb.strip("rgb"))
hex_value = '#%02x%02x%02x' % (r, g, b)
return hex_value 
```

由于提出了原始问题，现在首选的方法是使用硒颜色支持模块：

一个简单的指南在[这里](https://selenium-python.readthedocs.org/api.html#module-selenium.webdriver.support.color)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-27T02:22:56.670

```
import re

# style = find_element_by_class_name("bar").get_attribute("style")

style = 'background-color: rgb(221, 81, 76); background-image: -moz-linear-gradient(center top , rgb(238, 95, 91), rgb(196, 60, 53)); background-repeat: repeat-x; color: rgb(255, 255, 255); width: 11.5%;'

r,g,b = map(int, re.search(
    r'background-color: rgb\((\d+),\s*(\d+),\s*(\d+)\)', style).groups())
print('{:X}{:X}{:X}'.format(r, g, b)) 
```

产量

```
DD514C 
```

# r - 将每日数据平均为每周数据

> ID：15102327
> 
> 赞同：4
> 
> 时间：2013-02-27T00:55:07.427
> 
> 标签：r, dayofweek

我想知道是否有办法将每日数据平均为每周数据。我称之为 CADaily 的数据框如下所示：

```
 > CADaily[1:10, ]
          Climate_Division       Date      Rain
      885                1 1948-07-01 0.8750000
      892                1 1948-07-02 2.9166667
      894                1 1948-07-03 0.7916667
      895                1 1948-07-04 0.4305556
      898                1 1948-07-05 0.8262061
      901                1 1948-07-06 0.5972222
      904                1 1948-07-17 0.04166667
      905                1 1948-07-18 0.08333333
      907                1 1948-07-20 0.04166667
      909                1 1948-07-22 0.12500000
      910                1 1948-07-21 NA 
```

我的目标类似于聚合函数，根据日期（当然）和气候分区（范围从 1 到 7）将每日降雨的平均值转换为每周降雨值。我在网上搜索时发现了一个可以使用但与我的目标不太相符的代码：

```
 apply.weekly(xts(CADaily[,-2], order.by= CADaily[,2]), FUN = mean) 
```

这是我想做的，但是我的专栏 Climate_Division 也是平均的。我只想对 Rain 进行平均，然后根据 Climate_Division 和 Date 对其进行排序。有没有办法我可以这样做：

```
 aggregate(CADaily, by =list(CADaily$Climate_Division, CADaily$Date), FUN = mean, na.rm = TRUE) 
```

日期在哪里以某种形式的周？还是有其他方法？

* * *

编辑：

各位，

感谢您的帮助。也许使用聚合并不是我最初认为的最好的方法。在输出方面，我想获得数据（1948 - 1995 年）所有年份的每周平均降雨量。换句话说，我想获得一种很好的格式，我可以将它输入到具有周末日期形式的时间序列中。我正在寻找的输出（请记住，可能存在 NA 值）是：

```
 Climate_Division     Date          Rain
      1                    1948-07-03    1.527778
      1                    1948-07-10    0.6179946
      1                    1948-07-17    0.04166667
      1                    1948-07-24    0.08333333
      ...
      1                    1995-12-23    0.24513245
      1                    1995-12-30    0.12450545 
```

或者有没有更好的方法来表达由日期表示的每周数据？

感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T01:02:57.300

### 更新的答案

根据 OP 对请求的更新，我修改了代码以聚合每周定义的日期（星期六）的数据。这次我只使用基础 R 中可用的函数。它忽略了 NA（如果给定的 End_of_Week-Climate_Division 只有 NA，你会得到 NaN，而不是数字）。

```
# Data with another Climate division as example (same daily values and dates)
CADaily <-
structure(list(Climate_Division = c(1, 1, 1, 1, 1, 1, 1, 1, 1, 
1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2), Date = structure(c(1L, 2L, 
3L, 4L, 5L, 6L, 7L, 8L, 9L, 10L, 1L, 2L, 3L, 4L, 5L, 6L, 7L, 
8L, 9L, 10L), .Label = c("01/07/1948", "02/07/1948", "03/07/1948", 
"04/07/1948", "05/07/1948", "06/07/1948", "17/07/1948", "18/07/1948", 
"20/07/1948", "22/07/1948"), class = "factor"), Rain = c(0.875, 
2.9166667, 0.7916667, 0.4305556, 0.8262061, 0.5972222, 0.04166667, 
0.08333333, 0.04166667, 0.125, 0.875, 2.9166667, 0.7916667, 0.4305556, 
0.8262061, 0.5972222, 0.04166667, 0.08333333, 0.04166667, 0.125
), week = c(27, 27, 27, 27, 27, 27, 29, 29, 29, 30, 27, 27, 27, 
27, 27, 27, 29, 29, 29, 30)), .Names = c("Climate_Division", 
"Date", "Rain", "week"), row.names = c(NA, 20L), class = "data.frame")

# Coerce to Date class
CADaily$Date <- as.Date(x=CADaily$Date, format='%d/%m/%Y')

# Extract day of the week (Saturday = 6)
CADaily$Week_Day <- as.numeric(format(CADaily$Date, format='%w'))

# Adjust end-of-week date (first saturday from the original Date)
CADaily$End_of_Week <- CADaily$Date + (6 - CADaily$Week_Day)

# Aggregate over week and climate division
aggregate(Rain~End_of_Week+Climate_Division, FUN=mean, data=CADaily, na.rm=TRUE)

# Output
#   End_of_Week Climate_Division       Rain
# 1  1948-07-03                1 1.52777780
# 2  1948-07-10                1 0.61799463
# 3  1948-07-17                1 0.04166667
# 4  1948-07-24                1 0.08333333
# 5  1948-07-03                2 1.52777780
# 6  1948-07-10                2 0.61799463
# 7  1948-07-17                2 0.04166667
# 8  1948-07-24                2 0.08333333 
```

### 附加操作

此外，使用此代码，您可以从其他聚合函数获取结果，假设结果是每个周除对的相同长度的原子向量。

```
# Aggregate over week and climate division, and show the total number of
# observations per week, the number of observations which represent missing
# values, the average, and the standard deviation.
aggregate(Rain~End_of_Week+Climate_Division, data=CADaily,
          FUN=function(x) c(n=length(x),
                            NAs=sum(is.na(x)),
                            Average=mean(x, na.rm=TRUE),
                            SD=sd(x, na.rm=TRUE)))

# Output. You get NA for the standard deviation if there is only one observation.
#   End_of_Week Climate_Division     Rain.n   Rain.NAs Rain.Average    Rain.SD
# 1  1948-07-03                1 3.00000000 0.00000000   1.52777780 1.20353454
# 2  1948-07-10                1 3.00000000 0.00000000   0.61799463 0.19864151
# 3  1948-07-17                1 1.00000000 0.00000000   0.04166667         NA
# 4  1948-07-24                1 3.00000000 0.00000000   0.08333333 0.04166667
# 5  1948-07-03                2 3.00000000 0.00000000   1.52777780 1.20353454
# 6  1948-07-10                2 3.00000000 0.00000000   0.61799463 0.19864151
# 7  1948-07-17                2 1.00000000 0.00000000   0.04166667         NA
# 8  1948-07-24                2 3.00000000 0.00000000   0.08333333 0.04166667 
```

### 原始答案

试试这个`lubridate`包。加载它，然后聚合（作为原始答案的一部分保留记录，这反映了 OP 按周聚合的请求）。

```
# Load lubridate package
library(package=lubridate)

# Set Weeks number. Date already of class `Date`
CADaily$Week <- week(CADaily$Date)

# Aggregate over week number and climate division
aggregate(Rain~Week+Climate_Division, FUN=mean, data=CADaily, na.rm=TRUE)

# Output
#   Week Climate_Division       Rain
# 1   27                1 1.07288622
# 2   29                1 0.05555556
# 3   30                1 0.12500000
# 4   27                2 1.07288622
# 5   29                2 0.05555556
# 6   30                2 0.12500000 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T01:20:39.570

`xts`非常适合此类操作。用于`endpoints`对数据进行子集化，然后`sapply`每周对其进行处理。

```
CADaily <- read.table(text ='     Climate_Division       Date      Rain
      885                1 1948-07-01 0.8750000
      892                1 1948-07-02 2.9166667
      894                1 1948-07-03 0.7916667
      895                1 1948-07-04 0.4305556
      898                1 1948-07-05 0.8262061
      901                1 1948-07-06 0.5972222
      904                1 1948-07-17 0.04166667
      905                1 1948-07-18 0.08333333
      907                1 1948-07-20 0.04166667
      909                1 1948-07-22 0.12500000',head=T)
dat.xts <- xts(CADaily[,-2], order.by= as.POSIXct(CADaily[,2]))
INDEX <- endpoints(dat.xts, 'weeks')

lapply(1:(length(INDEX) - 1), function(y) {
    y <- dat.xts[(INDEX[y] + 1):INDEX[y + 1]]
    data.frame(y$Climate_Division,mean(y$Rain))

  }) 
```

我的结果是按周列出的：

```
[[1]]
           Climate_Division mean.y.Rain.
1948-07-01                1     1.168019
1948-07-02                1     1.168019
1948-07-03                1     1.168019
1948-07-04                1     1.168019
1948-07-05                1     1.168019

[[2]]
           Climate_Division mean.y.Rain.
1948-07-06                1    0.5972222

[[3]]
           Climate_Division mean.y.Rain.
1948-07-17                1       0.0625
1948-07-18                1       0.0625

[[4]]
           Climate_Division mean.y.Rain.
1948-07-20                1   0.08333334
1948-07-22                1   0.08333334 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T06:02:22.617

我从我之前的回答中回溯。我认为这个要简单得多。

您只需要找到每一行即将到来的周末日期，然后聚合

```
CADaily <- read.table(text = "Climate_Division       Date      Rain\n1 1948-07-01 0.8750000\n1 1948-07-02 2.9166667\n1 1948-07-03 0.7916667\n1 1948-07-04 0.4305556\n1 1948-07-05 0.8262061\n1 1948-07-06 0.5972222\n1 1948-07-17 0.04166667\n1 1948-07-18 0.08333333\n1 1948-07-20 0.04166667\n1 1948-07-22 0.12500000\n2 1948-07-01 0.8750000\n2 1948-07-02 2.9166667\n2 1948-07-03 0.7916667\n2 1948-07-04 0.4305556\n2 1948-07-05 0.8262061\n2 1948-07-06 0.5972222\n2 1948-07-17 0.04166667\n2 1948-07-18 0.08333333\n2 1948-07-20 0.04166667\n2 1948-07-22 0.12500000", 
    head = T)

CADaily$weekend <- as.POSIXlt(CADaily$Date) + (7 - as.POSIXlt(CADaily$Date)$wday) * 24 * 60 * 60

aggregate(Rain ~ weekend + Climate_Division, data = CADaily, FUN = mean)
##      weekend Climate_Division       Rain
## 1 1948-07-04                1 1.52777780
## 2 1948-07-11                1 0.61799463
## 3 1948-07-18                1 0.04166667
## 4 1948-07-25                1 0.08333333
## 5 1948-07-04                2 1.52777780
## 6 1948-07-11                2 0.61799463
## 7 1948-07-18                2 0.04166667
## 8 1948-07-25                2 0.08333333 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-02T01:06:06.533

做就是了：

```
library(tidyverse)
library(lubridate)

df <- df %>% 
  group_by(week = week(Date)) %>% #make sure 'Date' is a Date.object
  mutate("rain_mean" = mean(Rain)) 
```

# c - fork() 是如何工作的？

> ID：15102328
> 
> 赞同：19
> 
> 时间：2013-02-27T00:55:09.380
> 
> 标签：c, fork

我对分叉真的很陌生，这段代码中的pid在做什么？有人可以解释一下 X 行和 Y 行的结果吗？

```
#include <sys/types.h>
#include <stdio.h>
#include <unistd.h>
#define SIZE 5
int nums[SIZE] = {0,1,2,3,4};
int main()
{
    int i;
    pid_t pid;
    pid = fork();
    if (pid == 0) {
        for (i = 0; i < SIZE; i++) {
            nums[i] *= -i;
            printf("CHILD: %d ",nums[i]); /* LINE X */
        }
    }
    else if (pid > 0) {
        wait(NULL);
        for (i = 0; i < SIZE; i++)
            printf("PARENT: %d ",nums[i]); /* LINE Y */
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-02-27T01:39:34.693

`fork()`重复该过程，因此在调用 fork 之后实际上有 2 个程序实例正在运行。

您如何知道哪个进程是原始（父）进程，哪个是新（子）进程？

在父进程中，子进程的 PID（将是一个正整数）从`fork()`. 这就是`if (pid > 0) { /* PARENT */ }`代码有效的原因。在子进程中，`fork()`只返回`0`.

因此，由于`if (pid > 0)`检查，父进程和子进程将产生不同的输出，您可以[在此处](http://ideone.com/DasYqa)看到（由@jxh 在评论中提供）。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2015-12-17T17:14:22.743

fork() 的最简单示例

```
printf("I'm printed once!\n");
fork();
// Now there are two processes running one is parent and another child.
// and each process will print out the next line.
printf("You see this line twice!\n"); 
```

fork() 的返回值。返回值-1=失败；0=在子进程中；正=在父进程中（返回值为子进程id）

```
pid_t id = fork();
if (id == -1) exit(1); // fork failed 
if (id > 0)
{ 
// I'm the original parent and 
// I just created a child process with id 'id'
// Use waitpid to wait for the child to finish
} else { // returned zero
// I must be the newly made child process
} 
```

子进程与父进程有什么不同？

*   当子进程完成时通过信号通知父进程，反之则不然。
*   孩子不会继承挂起的信号或计时器警报。有关完整列表，请参见[fork()](http://man7.org/linux/man-pages/man2/fork.2.html)
*   这里进程id可以通过getpid()返回。getppid() 可以返回父进程ID。

现在让我们可视化您的程序代码

```
pid_t pid;
pid = fork(); 
```

现在操作系统制作了两个相同的地址空间副本，一个用于父级，另一个用于子级。

[![在此处输入图像描述](../Images/4d27007d136507f1839449ac59bfc4ed.png)](https://i.stack.imgur.com/rtvbx.jpg)

父进程和子进程都在系统调用 fork() 之后立即开始执行。由于两个进程具有相同但独立的地址空间，因此在 fork() 调用之前初始化的那些变量在两个地址空间中具有相同的值。每个进程都有自己的地址空间，因此任何修改都将独立于其他进程。如果父进程改变了其变量的值，修改只会影响父进程地址空间中的变量。由 fork() 系统调用创建的其他地址空间不会受到影响，即使它们具有相同的变量名。

[![在此处输入图像描述](../Images/04c38d832df943d3c1051dd3c20e6ca9.png)](https://i.stack.imgur.com/Jt0hw.jpg)

这里父 pid 非零，它调用函数 ParentProcess()。另一方面，子进程的 pid 为零，它调用 ChildProcess()，如下所示： [![在此处输入图像描述](../Images/03b34b25074cd6c93059df89d0961376.png)](https://i.stack.imgur.com/PmDI2.jpg)

在您的代码父进程调用`wait()`中，它会在该点暂停，直到子进程退出。所以孩子的输出首先出现。

```
if (pid == 0) {                    
    // The child runs this part because fork returns 0 to the child
    for (i = 0; i < SIZE; i++) {
        nums[i] *= -i;
        printf("CHILD: %d ",nums[i]); /* LINE X */
    }
} 
```

**子进程的输出**

> 第 X 行出现了什么

```
 CHILD: 0 CHILD: -1 CHILD: -4 CHILD: -9 CHILD: -16 
```

然后在子进程退出后，父进程从 wait() 调用之后继续，然后打印其输出。

```
else if (pid > 0) {
        wait(NULL);
        for (i = 0; i < SIZE; i++)
            printf("PARENT: %d ",nums[i]); /* LINE Y */
    } 
```

**父进程的输出：**

> Y线出来的东西

```
PARENT: 0 PARENT: 1 PARENT: 2 PARENT: 3 PARENT: 4 
```

最后，由子进程和父进程组合的输出将显示在终端上，如下所示：

```
 CHILD: 0 CHILD: -1 CHILD: -4 CHILD: -9 CHILD: -16 PARENT: 0 PARENT: 1 PARENT: 2 PARENT: 3 PARENT: 4 
```

有关更多信息，[请参阅此链接](http://www.csl.mtu.edu/cs4411.ck/www/NOTES/process/fork/create.html)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-12-14T14:32:57.793

该`fork()`函数很特别，因为它实际上返回了两次：一次返回父进程，一次返回子进程。在父进程中，`fork()`返回子进程的pid。在子进程中，返回0。如果发生错误，不创建子进程，返回-1给父进程。

成功调用后`fork()`，子进程基本上是父进程的完全副本。两者都有自己的所有局部和全局变量的副本，以及自己的任何打开文件描述符的副本。两个进程同时运行，并且因为它们共享相同的文件描述符，每个进程的输出可能会相互交错。

仔细看看问题中的例子：

```
pid_t pid;
pid = fork();
// When we reach this line, two processes now exist,
// with each one continuing to run from this point
if (pid == 0) {                    
    // The child runs this part because fork returns 0 to the child
    for (i = 0; i < SIZE; i++) {
        nums[i] *= -i;
        printf("CHILD: %d ",nums[i]); /* LINE X */
    }
}
else if (pid > 0) {
    // The parent runs this part because fork returns the child's pid to the parent
    wait(NULL);     // this causes the parent to wait until the child exits
    for (i = 0; i < SIZE; i++)
        printf("PARENT: %d ",nums[i]); /* LINE Y */
} 
```

这将输出以下内容：

```
CHILD: 0 CHILD: -1 CHILD: -4 CHILD: -9 CHILD: -16 PARENT: 0 PARENT: 1 PARENT: 2 PARENT: 3 PARENT: 4 
```

因为父进程调用`wait()`它会在该点暂停，直到子进程退出。所以孩子的输出首先出现。然后在子进程退出后，父进程从`wait()`调用后继续，然后打印其输出。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-12-19T06:18:53.853

在最简单的情况下，它的行为`fork()`非常简单——如果在你第一次遇到它时有点令人兴奋。它要么返回一次错误，要么返回两次，一次在原始（父）进程中，一次在与原始进程（子进程）几乎完全相同的全新副本中。返回后，这两个进程虽然共享大量资源，但名义上是独立的。

```
pid_t original = getpid();
pid_t pid = fork();
if (pid == -1)
{
    /* Failed to fork - one return */
    …handle error situation…
}
else if (pid == 0)
{
    /* Child process - distinct from original process */
    assert(original == getppid() || getppid() == 1);
    assert(original != getpid());
    …be childish here…
}
else
{
    /* Parent process - distinct from child process */
    assert(original != pid);
    …be parental here…
} 
```

子进程是父进程的副本。例如，它具有相同的一组打开文件描述符；在父级中打开的每个文件描述符 N 在子级中打开，并且它们共享相同的打开文件描述。这意味着如果其中一个进程改变了文件中的读取或写入位置，也会影响另一个进程。另一方面，如果一个进程关闭了一个文件，这对另一个进程中的文件没有直接影响。

这也意味着，如果在父进程的标准 I/O 包中缓冲了数据（例如，一些数据已从标准输入文件描述符（`STDIN_FILENO`）读取到数据缓冲区中）`stdin`，则该数据对父进程都可用和孩子, 两者都可以读取缓冲数据而不影响另一个, 这也将看到相同的数据. 另一方面, 一旦缓冲数据被读取, 如果父级读取另一个缓冲区已满, 则移动当前文件位置对于父母和孩子，因此孩子将看不到父母刚刚读取的数据（但如果孩子也读取了一个数据块，则父母不会看到）。这可能会令人困惑。因此，通常最好确保在分叉之前没有挂起的标准 I/O —`fflush(0)`是一种方法。

^(在代码片段中，`assert(original == getppid() || getppid() == 1);`考虑到当子进程执行语句时，父进程可能已经退出，在这种情况下，子进程将被系统进程继承——它通常具有 PID 1（我知道没有POSIX 系统，其中孤儿由不同的 PID 继承，但可能有一个）。)

其他共享资源，例如内存映射文件或共享内存，在两者中继续可用。内存映射文件的后续行为取决于用于创建映射的选项；MAP_PRIVATE 意味着两个进程拥有独立的数据副本，MAP_SHARED 意味着它们共享相同的数据副本，并且一个进程所做的更改将在另一个进程中可见。

然而，并不是每个分叉的程序都像目前所描述的那样简单。例如，父进程可能已经获得了一些（建议）锁；孩子不会继承这些锁。父级可能是多线程的；孩子有一个执行线程——并且对孩子可以安全地做些什么有限制。

POSIX 规范[`fork()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/fork.html)详细说明了差异：

> 该`fork()`函数应创建一个新进程。新进程（子进程）应是调用进程（父进程）的精确副本，以下详述除外：
> 
> *   子进程应具有唯一的进程 ID。
>     
>     
> *   子进程 ID 也不应与任何活动进程组 ID 匹配。
>     
>     
> *   子进程应该有一个不同的父进程ID，它应该是调用进程的进程ID。
>     
>     
> *   子进程应拥有自己的父文件描述符副本。每个子文件描述符都应与父文件描述符对应的打开文件描述相同。
>     
>     
> *   子进程应该有它自己的父打开目录流的副本。子进程中的每个打开的目录流可以与父进程对应的目录流共享目录流定位。
>     
>     
> *   子进程应该有它自己的父消息目录描述符的副本。
>     
>     
> *   `tms_utime`、`tms_stime`、`tms_cutime`和的子进程值`tms_cstime`应设置为 0。
>     
>     
> *   距闹钟信号发出的剩余时间应归零，如有报警，应取消；见报警。
>     
>     
> *   [XSI] ⌦ 清除所有 semadj 值。⌫</p>
>     
>     
> *   父进程设置的文件锁不能被子进程继承。
>     
>     
> *   子进程的未决信号集应初始化为空集。
>     
>     
> *   [XSI] ⌦ 间隔计时器应在子进程中重置。⌫</p>
>     
>     
> *   在父进程中打开的任何信号量也应在子进程中打开。
>     
>     
> *   [ML] ⌦ 子进程不应继承父进程通过调用`mlockall()`或建立的任何地址空间内存锁`mlock()`。⌫</p>
>     
>     
> *   在父进程中创建的内存映射应保留在子进程中。从父级继承的 MAP_PRIVATE 映射也应是子级中的 MAP_PRIVATE 映射，并且父级在调用之前对这些映射中的数据所做的任何修改`fork()`都应对子级可见。返回后由父级对 MAP_PRIVATE 映射中的数据进行的任何修改`fork()`都应仅对父级可见。子进程对 MAP_PRIVATE 映射中数据的修改应仅对子进程可见。
>     
>     
> *   [PS] ⌦ 对于 SCHED_FIFO 和 SCHED_RR 调度策略，子进程在一个`fork()`函数期间要继承父进程的策略和优先级设置。对于其他调度策略，策略和优先级设置`fork()`由实现定义。⌫</p>
>     
>     
> *   父进程创建的每进程计时器不应被子进程继承。
>     
>     
> *   [MSG] ⌦ 子进程应拥有自己的父级消息队列描述符副本。子节点的每个消息描述符都应与父节点的相应消息描述符引用相同的打开消息队列描述。⌫</p>
>     
>     
> *   子进程不得继承任何异步输入或异步输出操作。对父级创建的异步控制块的任何使用都会产生未定义的行为。
>     
>     
> *   应使用单个线程创建进程。如果多线程进程调用`fork()`，新进程应包含调用线程及其整个地址空间的副本，可能包括互斥锁和其他资源的状态。因此，为避免错误，子进程只能执行异步信号安全操作，直到调用其中一个 exec 函数。可以通过该`pthread_atfork()`函数建立分叉处理程序，以便在`fork()`调用之间保持应用程序不变量。
>     
>     
> *   当应用程序`fork()`从信号处理程序和任何注册的分叉处理程序`pthread_atfork()`调用一个非异步信号安全的函数时，行为是未定义的。
>     
>     
> *   [OB TRC TRI] ⌦ 如果同时支持 Trace 选项和 Trace Inherit 选项：
>     
>     
>     
>     如果在其继承策略设置为 POSIX_TRACE_INHERITED 的跟踪流中跟踪调用进程，则应将子进程跟踪到该跟踪流中，并且子进程应继承父进程的跟踪事件名称到跟踪事件类型标识符的映射。如果正在跟踪调用进程的跟踪流将其继承策略设置为 POSIX_TRACE_CLOSE_FOR_CHILD，则不应将子进程跟踪到该跟踪流中。继承策略是通过调用`posix_trace_attr_setinherited()`函数来设置的。⌫</p>
>     
>     
> *   [OB TRC] ⌦ 如果支持 Trace 选项，但不支持 Trace Inherit 选项：
>     
>     
>     
>     子进程不应被跟踪到其父进程的任何跟踪流中。⌫</p>
>     
>     
> *   [OB TRC] ⌦ 如果支持 Trace 选项，则跟踪控制器进程的子进程不应控制其父进程控制的跟踪流。⌫</p>
>     
>     
> *   [CPT] ⌦ 子进程的 CPU 时钟初始值应设置为零。⌫</p>
>     
>     
> *   【TCT】子进程单线程的CPU时钟初始值要设置为零。⌫</p>
>     
>     
>     
>     POSIX.1-2008 定义的所有其他进程特征在父进程和子进程中应相同。POSIX.1-2008 未定义的进程特征的继承在 POSIX.1-2008 中未指定。
>     
>     
>     
>     之后`fork()`，父进程和子进程都应能够在任一进程终止之前独立执行。

这些问题大部分不会影响大多数程序，但是 fork 的多线程程序需要非常小心。值得阅读 POSIX 定义的基本原理部分`fork()`。

在内核内部，系统管理上述定义中突出显示的所有问题。内存页映射表必须被复制。内核通常会将（可写的）内存页面标记为 COW（写时复制），以便在一个或另一个进程修改内存之前，它们可以访问相同的内存。这最大限度地降低了复制过程的成本；内存页面只有在修改时才会变得不同。但是，许多资源（例如文件描述符）必须被复制，因此`fork()`是一项相当昂贵的操作（尽管没有`exec*()`函数那么昂贵）。请注意，复制文件描述符会使两个描述符都引用相同的打开文件描述 - 请参阅[`open()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/open.html)和[`dup2()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/dup2.html)系统要求讨论文件描述符和打开文件描述之间的区别。

# matlab - Matlab：元素3D矩阵乘法

> ID：15102331
> 
> 赞同：2
> 
> 时间：2013-02-27T00:55:14.423
> 
> 标签：matlab

我有两个矩阵：`B`with size`9x100x51`和`K`with size `34x9x100`。我想将所有的`K(34)`与每一个相乘，`B(9)`以便得到一个`G`大小为的最终矩阵`34x9x100x51`。

例如：元素`G(:,5,60,25)`组成如下

`G(:,5,60,25)=K(:,5,60)*B(5,60,25).`

我希望这个例子有助于理解我想要做什么。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T06:26:45.123

每当您发现自己在 matlab 中编写嵌套循环时，很有可能使用函数的内置向量化形式加快速度。代码通常也会变得相当短（但通常对读者来说不太清楚，所以评论你的代码！）。

在这种情况下，避免嵌套循环会有所不同吗？绝对地！让我们开始工作吧。@slayton 提供了一个三环解决方案。我们可以变得更快。

稍微重述一下这个问题，`B`有 51 个`9x100`矩阵和`K`34个`9x100`矩阵。对于 的每个组合，您希望将和中的各个矩阵`51x34`逐元素相乘。`9x100``B``K`

逐元素乘法对于 来说是一项很好的工作`bsxfun`，因此我们可以在概念上将此问题简化为沿二维（ 的第三维`B`， 的第一维`K`）工作：

初始的两环解决方案：

```
B = rand(9,100,51);
K = rand(34,9,100);
G = nan(34,9,100,51);

for b=1:size(B,3)
    for k=1:size(K,1)
        G(k,:,:,b) = bsxfun(@times,B(:,:,b), squeeze(K(k,:,:)));
    end
end 
```

好的，两个循环正在取得进展。我们能做得更好吗？好吧，让我们认识到矩阵`B`和`K`可以沿适当的维度复制，然后按元素一次全部相乘。

```
B = rand(9,100,51);
K = rand(34,9,100);

B2 = repmat(permute(B,[4 1 2 3]), [size(K,1) size(B)]);
K2 = repmat(K, [size(K) size(B,3)]);

G = bsxfun(@times,B2,K2); 
```

那么，解决方案如何比较速度呢？我测试了 octave 在线实用程序，并没有包括生成初始值`B`和`K`矩阵的时间。我确实包括了`G`为需要预分配的解决方案预分配矩阵的时间。代码如下。

3 个循环（@slayton 的回答）：4.024471 s
2 个循环解决方案：1.616120 s
0-loop repmat/bsxfun 解决方案：1.211850 s
0-loop repmat/bsxfun 解决方案，无临时：0.605838 s

警告：时间可能在很大程度上取决于您的机器，我不相信在线实用程序可以进行出色的时间测试。更改执行循环的顺序（即使注意不要重用变量和弄乱分配时间）确实改变了一些事情，即 2 循环解决方案有时与存储临时文件的无循环解决方案一样快。但是，您可以获得的矢量化越多，您就会越好。

这是速度测试的代码：

```
B = rand(9,100,51);
K = rand(34,9,100);

tic
G1 = nan(34,9,100,51);

for ii = 1:size(B,1)
  for jj = 1:size(B,2);
    for kk = 1:size(B,3)
      G1(:, ii, jj, kk) = K(:,ii,jj) .* B(ii,jj,kk);
    end
  end
end
t=toc;
printf('Time for 3 loop solution: %f\n' ,t)

tic
G2 = nan(34,9,100,51);

    for b=1:size(B,3)
        for k=1:size(K,1)
            G2(k,:,:,b) = bsxfun(@times,B(:,:,b), squeeze(K(k,:,:)));
        end
    end
t=toc;
printf('Time for 2 loop solution: %f\n' ,t)
tic

B2 = repmat(permute(B,[4 1 2 3]), [size(K,1) 1 1 1]);
    K2 = repmat(K, [1 1 1 size(B,3)]);

    G3 = bsxfun(@times,B2,K2);
t=toc;
printf('Time for 0-loop repmat/bsxfun solution: %f\n' ,t)

tic

    G4 = bsxfun(@times,repmat(permute(B,[4 1 2 3]), [size(K,1) 1 1 1]),repmat(K, [1 1 1 size(B,3)]));
t=toc;
printf('Time for 0-loop repmat/bsxfun solution, no temporaries: %f\n' ,t)

disp('Are the results equal?')
isequal(G1,G2)
isequal(G1,G3)

Time for 3 loop solution: 4.024471
Time for 2 loop solution: 1.616120
Time for 0-loop repmat/bsxfun solution: 1.211850
Time for 0-loop repmat/bsxfun solution, no temporaries: 0.605838
Are the results equal?
ans =  1
ans =  1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T01:02:56.410

您可以使用嵌套循环来执行此操作，尽管它可能不会非常快：

```
B = rand(9,100,51);
K = rand(34,9,100);

G = nan(34,9,100,51)

for ii = 1:size(B,1)
  for jj = 1:size(B,2);
    for kk = 1:size(B,3)
      G(:, ii, jj, kk) = K(:,ii,jj) .* B(ii,jj,kk);
    end
  end
end 
```

这是漫长的一天，我的大脑有点炸了，感谢任何可以改善这一点的人！

# c# - 如何相交多个 IEnumerable？

> ID：15102332
> 
> 赞同：3
> 
> 时间：2013-02-27T00:55:43.263
> 
> 标签：c#, asp.net-mvc, linq, linq-to-sql, ienumerable

我不明白为什么我的变量`selected`不包含所有`TempX`变量的内容。例如，在我的情况下，变量`TempX`包含一个 SuperObject 但一旦我到达第一个相交，它就丢失了，我的视图总是显示一个空列表......

顺便说一句， blablabla.ToList() 是真实而复杂的 linq 查询。我放这个是为了更清楚。

谢谢，这里是代码：

```
 public ActionResult Search(string q)
        {
            ViewBag.q = q;

            String[] strQueries = q.Split(' ');

            IEnumerable<SuperObject> selected = new List<SuperObject>();

            foreach (string str in strQueries)
            {  
                //Query 1
                IEnumerable<SuperObject> Temp1 = blablabla.ToList();

                //Query 2
                IEnumerable<SuperObject> Temp2 = blablabla2.ToList();

                //Query 3
                IEnumerable<SuperObject> Temp3 = blablabla3.ToList();

                //Query 4
                IEnumerable<SuperObject> Temp4 = blablabla4.ToList();

                selected = selected.Intersect(Temp1);
                selected = selected.Intersect(Temp2);
                selected = selected.Intersect(Temp3);
                selected = selected.Intersect(Temp4);
            }

            return View("Search", selected);
        } 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-27T01:11:59.010

您可能想使用`Union`而不是`Intersect`. 这就是区别，我认为这是不言自明的： ![并、交、差比较。](../Images/7aed529e9e75203f21ace747f1a8895c.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T01:01:39.683

您正在与 Temp 1-4 相交一个空列表。这不会产生任何结果。

编辑：详细地说，一个 intersect 获取两个集合共有的所有元素。由于您相交的第一个集合是空的，因此结果总是空的。所以答案真的取决于你想要做什么。您是否只想找到所有 4 个列表共有的元素？如果是这样，请按照 BurundukXP 所说的：

```
selected = Temp1.Intersect(Temp2);
selected = selected.Intersect(Temp3);
selected = selected.Intersect(Temp4); 
```

您是否试图获得每个列表中所有元素的唯一列表？做这样的事情：

```
selected.AddRange(Temp1);
selected.AddRange(Temp2);
selected.AddRange(Temp3);
selected.AddRange(Temp4);
selected.Distinct(); 
```

# iphone - 如何解析 JSON 并拥有 2 个最终数据数组

> ID：15102335
> 
> 赞同：1
> 
> 时间：2013-02-27T00:56:01.350
> 
> 标签：iphone, ios, xcode, json

我正在使用 JSON 解析 iTunes RSS 提要，但遇到了问题。以下代码对于movieName 输出之一运行正常，但我仍然没有得到movieSummary 输出。

```
-(void)connectionDidFinishLoading:(NSURLConnection *)connection {

    allDataDictionary = [NSJSONSerialization JSONObjectWithData:webData options:0 error:nil];
    feed = [allDataDictionary objectForKey:@"feed"];
    arrayOfEntry = [feed objectForKey:@"entry"];

    for (NSDictionary *dictionTitle in arrayOfEntry) {

        NSDictionary *title = [dictionTitle objectForKey:@"title"];
        NSString *labelTitle = [title objectForKey:@"label"];

        [arrayLable addObject:labelTitle];

        NSDictionary *summary = [dictionTitle objectForKey:@"summary"];
        NSString *labelSummary = [summary objectForKey:@"label"];

        [arraySummary addObject:labelSummary];
    }

    movieName.text = [arrayLable objectAtIndex:0];
    movieSummary.text = [arraySummary objectAtIndex:0]; //This is not displaying 
} 
```

这是我正在解析的链接：http: [//itunes.apple.com/us/rss/topmovies/limit=300/json](http://itunes.apple.com/us/rss/topmovies/limit=300/json)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T22:13:35.263

问题是，当我将字符串添加到有时包含 NULL 的数组时，因此以下代码帮助了我

```
 if ([[arrayName objectAtIndex:0] isKindOfClass:[NSNull class]]) {
    labelName.text = @"This is NULL";
} else {
    [arrayName addObject:labelName];
}

    if ([[arraySummary objectAtIndex:0] isKindOfClass:[NSNull class]]) {
    labelSummary.text = @"This is NULL";
} else {
    [arraySummary addObject:labelSummary];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T22:23:19.067

我经常遇到这种情况。我用这样的东西。替换你的代码

```
NSString *labelTitle = [title objectForKey:@"label"];
[arrayLable addObject:labelTitle]; 
```

和

```
NSString * labelTitle = [ [ title objectForKey:@"label" ] ifNullThenNil ] ;
[ arrayLabel addObject:labelTitle ? labelTitle : @"" ] ; // you could also use @"<unknown>" or similar instead of @"" 
```

其中`-ifNullThenNil`通过类别提供：

```
@implementation NSObject (IfNullThenNil)
-(id)ifNullThenNil { return self ; }
@end

@implementation NSNull (IfNullThenNil)
-(id)ifNullThenNil { return nil ; }
@end 
```

# filtering - 在 Verilog 中实现 FIR 滤波器

> ID：15102337
> 
> 赞同：3
> 
> 时间：2013-02-27T00:56:10.567
> 
> 标签：filtering, signal-processing, verilog

我正在尝试在 Verilog 中实现 FIR 滤波器。我已经在 MATLAB 中预先确定了系数。但我不确定寄存器是否会使用此代码正确传播。

```
module fir_filter(
  input clock,
  input reset,
  input wire[15:0] input_sample,
  output reg[15:0] output_sample);

parameter N = 13;
reg signed[15:0] coeffs[12:0];
reg [15:0] holderBefore[12:0];
wire [15:0] toAdd[12:0];

always @(*)
begin
    coeffs[0]=6375;
    coeffs[1]=1;
    coeffs[2]=-3656;
    coeffs[3]=3;
    coeffs[4]=4171;
    coeffs[5]=4;
    coeffs[6]=28404;
    coeffs[7]=4;
    coeffs[8]=4171;
    coeffs[9]=3;
    coeffs[10]=-3656;
    coeffs[11]=1;
    coeffs[12]=6375;
end

genvar i;

generate
for (i=0; i<N; i=i+1)
    begin: mult
        multiplier mult1(
          .dataa(coeffs[i]),
          .datab(holderBefore[i]),
          .result(toAdd[i]));
    end
endgenerate

always @(posedge clock or posedge reset)
begin
    if(reset)
        begin
            holderBefore[12]    <= 0;
            holderBefore[11]    <= 0;
            holderBefore[10]    <= 0;
            holderBefore[9]     <= 0;
            holderBefore[8]     <= 0;
            holderBefore[7]     <= 0;
            holderBefore[6]     <= 0;
            holderBefore[5]     <= 0;
            holderBefore[4]     <= 0;
            holderBefore[3]     <= 0;
            holderBefore[2]     <= 0;
            holderBefore[1]     <= 0;
            holderBefore[0]     <= 0;
            output_sample       <= 0;
        end
    else
        begin               
            holderBefore[12]    <= holderBefore[11];
            holderBefore[11]    <= holderBefore[10];
            holderBefore[10]    <= holderBefore[9];
            holderBefore[9]     <= holderBefore[8];
            holderBefore[8]     <= holderBefore[7];
            holderBefore[7]     <= holderBefore[6];
            holderBefore[6]     <= holderBefore[5];
            holderBefore[5]     <= holderBefore[4];
            holderBefore[4]     <= holderBefore[3];
            holderBefore[3]     <= holderBefore[2];
            holderBefore[2]     <= holderBefore[1];
            holderBefore[1]     <= holderBefore[0];
            holderBefore[0]     <= input_sample;
            output_sample <= (input_sample + toAdd[0] + toAdd[1] + 
                              toAdd[2] + toAdd[3] + toAdd[4] + toAdd[5] +
                              toAdd[6] + toAdd[7] + toAdd[8] + toAdd[9] + 
                              toAdd[10] + toAdd[11] + toAdd[12]);
        end
end

endmodule 
```

这是实现这一点的最佳方法吗？有没有更好的方法来做加法？

任何帮助是极大的赞赏！

也非常感谢有帮助的资源。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T09:06:42.820

面积和功率高效的 FIR/IIR 滤波器是某些人的圣杯。

使用生成语句，您已经实例化了 13 个乘法器。乘法器占用了相当多的区域。通常只实例化一个并对其进行时分复用 (TDM)。在这种情况下，提供比所需输出速率快 13 倍的时钟（滴答声）。

您的加法器链虽然看起来再次有效，但将非常大，并且可能导致时序问题，因为可能存在很长的波纹链。在多个周期内将其分解可能会导致较小的面积和功耗。

如果将样本的乘法与加法相结合，您将拥有更典型的 MAC 架构（乘法累加）。

我也会避免在参数中初始化常量，`always @*`因为参数的右侧没有更改，这可能不会触发敏感度列表。

对于这些我会使用`localparams`，或者如果沿着 TDM 路线走，我会创建一个查找表 (LUT)。

```
always @* begin
  case( program_counter )
    0 : coeff = 6375;
    1 : coeff = 1   ;
    ...
  endcase
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T10:57:29.780

假设您选择的滤波器响应是合理的（5.2dB 纹波！）

然后一种方法是通过使用规范符号数字表示 [http://en.wikipedia.org/wiki/Canonical_signed_digit] 来近似每个系数来权衡一些响应精度以减少芯片资源。这种强度减少[http://en.wikipedia.org/wiki/Strength_reduction]（编译器术语）允许有效的转变，即使用路由和添加来代替昂贵的乘法。

然后由于系数的对称性，可以在应用系数之前对各个样本求和，这大大降低了所需的芯片资源。 [1]

但是在实现的系数中可能存在共同因素，对于芯片目标可能会得到一些优化，但对于固件可以做出重大改进。

[1] = DSP 技巧：构建简化 FIR 滤波器结构的奇怪方法 Richard G. Lyons

试试[http://www.embedded.com/design/embedded/4008837/DSP-Tricks-An-odd-way-to-build-a-simplified-FIR-filter-structure](http://www.embedded.com/design/embedded/4008837/DSP-Tricks-An-odd-way-to-build-a-simplified-FIR-filter-structure)

# android - Android JSON 异常输入结束

> ID：15102347
> 
> 赞同：0
> 
> 时间：2013-02-27T00:56:45.710
> 
> 标签：android, html, json, parsing, input

很长一段时间以来，我一直在尝试解析 JSON 对象。这里有很多类似的问题，但是没有一个有效的答案。我的代码都不是机密的，所以我在这里发布。

公共类 JSONParser {

```
static InputStream is = null;
static JSONObject jObj = null;
static String json = "";

// constructor
public JSONParser() {

}

public JSONObject getJSONFromUrl(String url) {

    // Making HTTP request
    try {
        // defaultHttpClient
        DefaultHttpClient httpClient = new DefaultHttpClient();
        //HttpPost httpPost = new HttpPost(url);
            HttpGet httpget = new HttpGet(url);
        HttpResponse httpResponse = httpClient.execute(httpGet);
        HttpEntity httpEntity = httpResponse.getEntity();
        is = httpEntity.getContent();

    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

    try {
        BufferedReader reader = new BufferedReader(new InputStreamReader(is, "UTF-8"));
              //  is, "iso-8859-1"), 8);
        StringBuilder sb = new StringBuilder();
        String line = null;

        while ((line = reader.readLine()) != null) {

            sb.append(line);
        }
        is.close();

        json = sb.toString();
    } catch (Exception e) {
        Log.e("Buffer Error", "Error converting result " + e.toString());
    }

    // try parse the string to a JSON object
    try {
        JSONTokener tokener = new JSONTokener(json);
        jObj = new JSONObject(tokener);
    } catch (JSONException e) {
        Log.e("JSON Parser", "Error parsing data " + e.toString());
    }

    // return JSON String
    return jObj;

} 
```

}

*edited Get 是必需的，而不是 Post

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T05:23:23.550

我做了一个小测试应用程序并运行它。HTTPPost 不返回任何内容，但如果将其切换到 HTTPGet，则会得到有效响应。

之后，数组中的第一个元素缺少“名称”，因此当您调用时`c.getString("name")`，会生成一个 JSONException，看起来您只是在外部块中捕获。您需要为每个`getString`调用添加一些异常处理，可能类似于：

```
String name = null;
try {
name = c.getString("name");
} catch(JSONException e) {
//name is missing!
name = "";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T05:24:35.620

我不明白你为什么要获取实体，将其转换为一次读取实体的 BufferedReader，将其转换为字符串，将字符串转换为 JSONTokener，然后最后使用标记器创建 JSONObject。

这是一个更简单的方法：

```
String entityString = EntityUtils.toString(httpResponse.getEntity(), HTTP.UTF_8);
JSONObject json = new JSONObject(entityString); 
```

如果抛出异常，则使用输出捕获它：

```
} catch (Exception e) {
    e.printStackTrace();
} 
```

并向我们​​展示那条痕迹。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T02:52:13.033

不知道你的有什么问题，但也许与我一直在使用它的作品进行比较。我会说我有输入字符 0 错误，这是一个**服务器**端错误，而不是我的解析。这意味着返回的数据可能无法在 JSON 对象中编码。如果我没记错的话，我认为我的服务器没有返回任何内容，我基本上是在尝试解析`nothing`. 我会验证你从你的服务器得到什么。

```
String result;
ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
nameValuePairs.add(new BasicNameValuePair("key", "value");
nameValuePairs.add(new BasicNameValuePair("key2", "value2");

try
{
    HttpClient httpclient = new DefaultHttpClient();

            // URL to POST to
    HttpPost httpreq = new HttpPost("www.sample.com/file.php");
    httpreq.setEntity(new UrlEncodedFormEntity(nameValuePairs));
    HttpResponse response = httpclient.execute(httpreq);
    HttpEntity entity = response.getEntity();
    InputStream is = entity.getContent();

    BufferedReader reader = new BufferedReader(new InputStreamReader(is, "iso-8859-1"), 8);
    StringBuilder sb = new StringBuilder();
    String line = null;
    while ((line = reader.readLine()) != null)
    {
        sb.append(line + "\n");
    }
    is.close();

    result = sb.toString();
            /* if you print 'result' you should see valid data 
               if your server is working */
            // System.out.println(result); 
}
catch (Exception e)
{
    // handle what went wrong
}

JSONArray jArray = new JSONArray(result);

if (jsonArray != null)
{
   for (int i = 0; i < jsonArray.length(); i++)
   {
       JSONObject json_data;
       try
       {
           json_data = jsonArray.getJSONObject(i);
           String value = json_data.getString("json_key_here");                
       }
       catch (JSONException e)
       {
            // handle what went wrong
       }
   }
} 
```

# web-services - Quickbooks qbmxl 报告请求仅针对一位客户挂起

> ID：15102348
> 
> 赞同：0
> 
> 时间：2013-02-27T00:56:48.230
> 
> 标签：web-services, quickbooks, qbxml

我有一个通过 webconnector 的集成应用程序，可以完美地为大约 20 个客户工作。它添加客户、供应商并更新 AP 和 AR，并为我的**所有**客户顺利接收付款。

我的应用程序还向 QB 请求 AP 和 AR 时效，它适用于除一位客户之外的所有客户。我已经能够复制他们的文件并在实验室中重现问题。我已经包含了 XML 请求和 quickbooks 日志。欢迎任何帮助、建议、线索等。

要求：

```
<?xml version="1.0" encoding="utf-8"?>
<?qbxml version="5.0"?>
<QBXML>
    <QBXMLMsgsRq onError="stopOnError">
        <AgingReportQueryRq>
            <!-- AgingReportType may have one of the following values: APAgingDetail, APAgingSummary, ARAgingDetail, ARAgingSummary, CollectionsReport -->
            <AgingReportType >APAgingDetail</AgingReportType>
            <ReportPeriod>
                <FromReportDate >2013-02-01</FromReportDate>
                <ToReportDate >2013-02-28</ToReportDate>
            </ReportPeriod>
            <IncludeColumn >Name</IncludeColumn>
            <IncludeColumn>RefNumber</IncludeColumn>
            <IncludeColumn>Date</IncludeColumn>
            <IncludeColumn>OpenBalance</IncludeColumn>
            <IncludeColumn>Memo</IncludeColumn>
            <IncludeColumn>Account</IncludeColumn>
            <IncludeColumn>NameAccountNumber</IncludeColumn>
            <IncludeColumn>TxnID</IncludeColumn>
        </AgingReportQueryRq>
    </QBXMLMsgsRq>
</QBXML> 
```

日志是：

```
Log file initialized at Wednesday, February 27, 2013 - 12:15 AM UTC  
Timestamp format used: YYYYMMDD.HH:MM:SS UTC
QBWebConnector 2.0 has been initialized with its logging status to level = VERBOSE.
Please restart QBWebConnector for any change in log level to take effect. Use file menu to clear log.

20130227.00:15:06 UTC   : QBWebConnector.SOAPWebService.do_receiveResponseXML() : hresult=""
20130227.00:15:06 UTC   : QBWebConnector.SOAPWebService.do_receiveResponseXML() : message=""
20130227.00:15:07 UTC   : QBWebConnector.SOAPWebService.do_receiveResponseXML() : QBWC1042: ReceiveResponseXML failed
Error message: The request failed with HTTP status 404: Not Found.
More info:
StackTrace =    at System.Web.Services.Protocols.SoapHttpClientProtocol.ReadResponse(SoapClientMessage message, WebResponse response, Stream responseStream, Boolean asyncCall)
   at System.Web.Services.Protocols.SoapHttpClientProtocol.Invoke(String methodName, Object[] parameters)
   at QBWebConnector.localhost.WCWebServiceDoc.receiveResponseXML(String ticket, String response, String hresult, String message)
   at QBWebConnector.localhost.WCWebService.receiveResponseXML(String ticket, String response, String hresult, String message)
   at QBWebConnector.SOAPWebService.receiveResponseXML(String wcTicket, String response, String hresult, String message)
   at QBWebConnector.WebService.do_receiveResponseXML(String wcTicket, String response, String hresult, String message, Boolean& success, Boolean& timeout)
Source = System.Web.Services
20130227.00:15:07 UTC   : QBWebConnector.CompanyFileLock.Send_CompanyQueryRqXML() : XML dump follows: -

<?xml version="1.0"?><?qbxml version="10.0"?><QBXML><QBXMLMsgsRq onError="stopOnError"><CompanyQueryRq requestID="1"><OwnerID>{ADB06C95-6FC7-4D8D-AC30-6A28E24AAB22}</OwnerID></CompanyQueryRq></QBXMLMsgsRq></QBXML>

20130227.00:15:07 UTC   : QBWebConnector.CompanyFileLock.Send_CompanyQueryRqXML() : XML dump follows: -

<?xml version="1.0" ?>
<QBXML>
<QBXMLMsgsRs>
<CompanyQueryRs requestID="1" statusCode="0" statusSeverity="Info" statusMessage="Status OK">
<CompanyRet>
<IsSampleCompany>false</IsSampleCompany>
<CompanyName>DFW JAVV BUS INC</CompanyName>
<LegalCompanyName>DFW JAVV BUS INC</LegalCompanyName>
<Address>
<Addr1>105 101TH Street #501</Addr1>
<City>Little Prairie</City>
<State>CA</State>
<PostalCode>95050</PostalCode>
<Country>US</Country>
</Address>
<AddressBlock>
<Addr1>105 108TH Street #501</Addr1>
<Addr2>Little Prairie, CS  95050</Addr2>
</AddressBlock>
<LegalAddress>
<Addr1>1010 A N Davis Dr</Addr1>
<City>Lomita</City>
<State>CA</State>
<PostalCode>96012</PostalCode>
<Country>US</Country>
</LegalAddress>
<Phone>972-522-1500</Phone>
<FirstMonthFiscalYear>January</FirstMonthFiscalYear>
<FirstMonthIncomeTaxYear>January</FirstMonthIncomeTaxYear>
<CompanyType>other</CompanyType>
<EIN>20-3726264</EIN>
<TaxForm>Form1120S</TaxForm>
<SubscribedServices>
<Service>
<Name>QuickBooks Online Banking</Name>
<Domain>banking.qb</Domain>
<ServiceStatus>Never</ServiceStatus>
</Service>
<Service>
<Name>QuickBooks Online Billing</Name>
<Domain>billing.qb</Domain>
<ServiceStatus>Never</ServiceStatus>
</Service>
<Service>
<Name>QuickBooks Online Billing Level 1 Service</Name>
<Domain>qbob1.qbn</Domain>
<ServiceStatus>Never</ServiceStatus>
</Service>
<Service>
<Name>QuickBooks Online Billing Level 2 Service</Name>
<Domain>qbob2.qbn</Domain>
<ServiceStatus>Never</ServiceStatus>
</Service>
<Service>
<Name>QuickBooks Online Billing Payment Service</Name>
<Domain>qbobpay.qbn</Domain>
<ServiceStatus>Never</ServiceStatus>
</Service>
<Service>
<Name>QuickBooks Bill Payment</Name>
<Domain>billpay.qb</Domain>
<ServiceStatus>Never</ServiceStatus>
</Service>
<Service>
<Name>QuickBooks Online Billing Paper Mailing Service</Name>
<Domain>qbobpaper.qbn</Domain>
<ServiceStatus>Never</ServiceStatus>
</Service>
<Service>
<Name>QuickBooks Payroll Service</Name>
<Domain>payroll.qb</Domain>
<ServiceStatus>Never</ServiceStatus>
</Service>
<Service>
<Name>QuickBooks Basic Payroll Service</Name>
<Domain>payrollbsc.qb</Domain>
<ServiceStatus>Never</ServiceStatus>
</Service>
<Service>
<Name>QuickBooks Basic Disk Payroll Service</Name>
<Domain>payrollbscdisk.qb</Domain>
<ServiceStatus>Never</ServiceStatus>
</Service>
<Service>
<Name>QuickBooks Deluxe Payroll Service</Name>
<Domain>payrolldlx.qb</Domain>
<ServiceStatus>Never</ServiceStatus>
</Service>
<Service>
<Name>QuickBooks Premier Payroll Service</Name>
<Domain>payrollprm.qb</Domain>
<ServiceStatus>Never</ServiceStatus>
</Service>
<Service>
<Name>Basic Plus Federal</Name>
<Domain>basic_plus_fed.qb</Domain>
<ServiceStatus>Never</ServiceStatus>
</Service>
<Service>
<Name>Basic Plus Federal and State</Name>
<Domain>basic_plus_fed_state.qb</Domain>
<ServiceStatus>Never</ServiceStatus>
</Service>
<Service>
<Name>Basic Plus Direct Deposit</Name>
<Domain>basic_plus_dd.qb</Domain>
<ServiceStatus>Never</ServiceStatus>
</Service>
<Service>
<Name>Merchant Account Service</Name>
<Domain>mas.qbn</Domain>
<ServiceStatus>Never</ServiceStatus>
</Service>
</SubscribedServices>
<AccountantCopy>
<AccountantCopyExists>false</AccountantCopyExists>
</AccountantCopy>
<DataExtRet>
<OwnerID>{ADB06C95-6FC7-4D8D-AC30-6A28E24AAB22}</OwnerID>
<DataExtName>AppLock</DataExtName>
<DataExtType>STR255TYPE</DataExtType>
<DataExtValue>LOCKED:QAXP1JV_VM:634975201418013380</DataExtValue>
</DataExtRet>
<DataExtRet>
<OwnerID>{ADB06C95-6FC7-4D8D-AC30-6A28E24AAB22}</OwnerID>
<DataExtName>FileID</DataExtName>
<DataExtType>STR255TYPE</DataExtType>
<DataExtValue>{714E8016-F6D4-4530-AFC3-995A34F3F7CE}</DataExtValue>
</DataExtRet>
</CompanyRet>
</CompanyQueryRs>
</QBXMLMsgsRs>
</QBXML>

20130227.00:15:07 UTC   : QBWebConnector.CompanyFileLock.getLock() : Got Lock = LOCKED:QAXP1JV_VM:634975201418013380
20130227.00:15:07 UTC   : QBWebConnector.CompanyFileLock.Send_DataExtModRqXML() : XML dump follows: -

<?xml version="1.0"?><?qbxml version="10.0"?><QBXML><QBXMLMsgsRq onError="stopOnError"><DataExtModRq requestID="1"><DataExtMod><OwnerID>{ADB06C95-6FC7-4D8D-AC30-6A28E24AAB22}</OwnerID><DataExtName>AppLock</DataExtName><OtherDataExtType>Company</OtherDataExtType><DataExtValue>UNLOCKED:QAXP1JV_VM</DataExtValue></DataExtMod></DataExtModRq></QBXMLMsgsRq></QBXML>

20130227.00:15:08 UTC   : QBWebConnector.CompanyFileLock.Send_DataExtModRqXML() : XML dump follows: -

<?xml version="1.0" ?>
<QBXML>
<QBXMLMsgsRs>
<DataExtModRs requestID="1" statusCode="0" statusSeverity="Info" statusMessage="Status OK">
<DataExtRet>
<OwnerID>{ADB06C95-6FC7-4D8D-AC30-6A28E24AAB22}</OwnerID>
<DataExtName>AppLock</DataExtName>
<DataExtType>STR255TYPE</DataExtType>
<DataExtValue>UNLOCKED:QAXP1JV_VM</DataExtValue>
</DataExtRet>
</DataExtModRs>
</QBXMLMsgsRs>
</QBXML>

20130227.00:15:08 UTC   : QBWebConnector.CompanyFileLock.unsetLock() : Company file has been unlocked for ownerID = <{ADB06C95-6FC7-4D8D-AC30-6A28E24AAB22}>
20130227.00:15:08 UTC   : QBWebConnector.SOAPWebService.update() : Company file has been unlocked.
20130227.00:15:08 UTC   : QBWebConnector.SOAPWebService.update() : Ending session to QuickBooks.
20130227.00:15:08 UTC   : QBWebConnector.SOAPWebService.DisconnectFromQB() : Session ended and connection closed
20130227.00:15:08 UTC   : QBWebConnector.SOAPWebService.do_closeConnection() : *** Calling closeConnection() with following parameter:<wcTicket="03dfdb40-3588-4d1b-b51f-000b3d2de071">
20130227.00:15:10 UTC   : QBWebConnector.SOAPWebService.do_closeConnection() : Received from closeConnection() following parameter:<ccResponse="OK">
20130227.00:15:10 UTC   : QBWebConnector.SOAPWebService.do_closeConnection() : CloseConnection called to application.
20130227.00:15:10 UTC   : QBWebConnector.SOAPWebService.do_closeConnection() : Response received from application = OK
20130227.00:15:10 UTC   : QBWebConnector.RegistryManager.setUpdateLock() : HKEY_CURRENT_USER\Software\Intuit\QBWebConnector\UpdateLock has been set to False
20130227.00:15:10 UTC   : QBWebConnector.RegistryManager.setUpdateLock() : ********************* Update session unlocked *********************
20130227.00:15:10 UTC   : QBWebConnector.SOAPWebService.update() : update completed.
20130227.00:15:10 UTC   : QBWebConnector.WebServiceManager.DoUpdateSelected() : Update for application = 'jvQBWebSyncApplication' has COMPLETED
20130227.00:15:10 UTC   : QBWebConnector.WebServiceManager.DoUpdateSelected() : Update session has ended. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T01:20:50.587

为什么您的 Web 服务器返回 404 Not Found 错误？

> 20130227.00:15:07 UTC：QBWebConnector.SOAPWebService.do_receiveResponseXML()：QBWC1042：ReceiveResponseXML 失败错误消息：请求失败，HTTP 状态 404：未找到。更多信息：

此外，您应该发布整个日志 - 这仅显示响应，请求在哪里？

# visual-studio-2012 - 发布文件后运行命令

> ID：15102349
> 
> 赞同：8
> 
> 时间：2013-02-27T00:56:58.023
> 
> 标签：visual-studio-2012, msbuild, clickonce, publish

我试图在发布后运行命令。

```
<Target Name="AfterPublish" AfterTargets="MSDeployPublish">
  <Exec Command="echo @@@@@ AfterPublish @@@@@ " />
</Target> 
```

但正如您在下面看到的，它在调用此目标后复制已发布的输出。

```
------ Publish started: Project: ClickOnceTest, Configuration: Debug Any CPU ------
2>  @@@@@ AfterPublish @@@@@ 
Connecting to 'C:\temp\Debug\'...
Publishing files...
Publish success. 
```

“发布文件”步骤完成后，如何让它发生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T14:10:44.210

你有任何挥之不去的“DependsOnTargets”吗？

[http://freetodev.wordpress.com/2009/06/24/msbuild-4-0-beforetargets-and-aftertargets/](http://freetodev.wordpress.com/2009/06/24/msbuild-4-0-beforetargets-and-aftertargets/)

有一些“执行规则”......当这种情况发生时。

我认为您没有提供足够的 msbuild 内容。

# javascript - 如何确定使用哪一个 - next(); 或出队（）；？

> ID：15102352
> 
> 赞同：9
> 
> 时间：2013-02-27T00:57:14.620
> 
> 标签：javascript, jquery, optimization

如果我这样做有什么区别：

```
$queue.queue(function(next){
   //...
   next();
}).queue(function(next){
   //...
   next();
}); 
```

相对

```
$queue.queue(function(){
   //...
   $(this).dequeue();
}).queue(function(){
   //...
   $(this).dequeue();
}); 
```

他们做同样的事情吗？

有什么区别，我应该使用哪个？

这很奇怪，因为 jQuery 文档并没有真正提到`.next()`，他们总是说要使用`.dequeue()`，但在我的工作场所人们使用该`.next()`功能，所以这让我很困惑。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-27T01:06:59.887

据我所知，没有区别。我不确定为什么一个比另一个更可取，或者为什么提到它们，因为这让我感到困惑。

查看[http://code.jquery.com/jquery-1.9.1.js](http://code.jquery.com/jquery-1.9.1.js)我们看到：

```
1915 next = function() {
         jQuery.dequeue( elem, type );
     }; 
```

...在`jQuery.dequeue`方法中。稍后（在第 1936 行）将其称为`fn.call(elem, next, hooks)`. 您会看到这`next`是`queue`回调中的第一个参数，并且`fn`是`queue`在那个时候。

展望未来，我们看到

```
1983 dequeue: function( type ) {
         return this.each(function() {
             jQuery.dequeue( this, type );
         });
     }, 
```

这是在 上定义的`jQuery.fn`，所以这是由 调用的函数`$(this).dequeue`。但是，这完全一样。唯一的区别是出队的元素。它在`fn.dequeue`集合中循环，但这只是`$(this)`.

如果我们回头看，我们会看到`elem`：

```
1908 dequeue: function( elem, type ) { 
```

...嘿，等一下 .. 它是`this`（从 调用时`$(this).dequeue`）！因此，您可以看到它们做的事情完全相同。 `$("some other collection").dequeue`不过，工作方式会有所不同。

通话`next()`可以为您节省一个额外的`.each`电话，所以我想这会更快。

顺便说一句，您不必`next`在回调中调用它，因为您可以将参数重命名为您想要的任何名称。

`next()`编辑：根据我与杰出同事@FabrícioMatté 的小型讨论，实际上和之间的功能可能存在差异`$(this).dequeue()`，特别是在不使用标准`fx`队列时。创建`next`函数时，它被设置为`$.dequeue`使用从`queue`已经获取的类型调用，但`$.fn.dequeue`将类型作为参数。这可能是坚持使用的更多动力`next()`，尽管我实际上从未见过有人实际使用标准效果队列以外的任何东西。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-27T01:04:06.153

两者[`jQuery.fn.dequeue`](https://github.com/jquery/jquery/blob/1.9-stable/src/queue.js#L96)和[`next`](https://github.com/jquery/jquery/blob/1.9-stable/src/queue.js#L28)函数都是简单的包装器[`jQuery.dequeue`](https://github.com/jquery/jquery/blob/1.9-stable/src/queue.js#L21)，在两个示例中传递相同的参数集。

* * *

（截至 jQuery 1.9.1 是最新的）

对于下一个函数参数：`type`是一个可选参数，表示队列，默认`fx`是jQuery的默认动画队列。`element`是一个 DOM 元素引用。

`$.fn.dequeue`：

```
dequeue: function( type ) {
    return this.each(function() {
        jQuery.dequeue( this, type );
    });
} 
```

`$().dequeue`只需调用`$.dequeue`包含在 jQuery 对象中的每个元素。

您的用例`$(this).dequeue()`将使用最初引用的元素调用`$.dequeue`一次`this`。

类似地，`next`将传递一个对 的元素引用`$.dequeue`，它是队列出队的当前元素：

```
next = function() {
    jQuery.dequeue( elem, type );
}; 
```

换句话说，这些本质上是相同的。`next`更直接一点，因为它没有迭代包装器，因此`next()`应该比`$.fn.dequeue()`.

主要区别在于您可以调用`.dequeue()`多个元素，它将使每个元素出队，而`next()`直接与队列出队的元素相关联。

对于`$(this).dequeue()`回调内部的用例，这是无关紧要的。`$.fn.dequeue`在开始使一个或多个元素出队时很有用。`$(this).dequeue()`具有与 等效的结果`next()`，但在这种情况下，后者将提供微秒的增益。

* * *

正如**@Explosion Pills**`fx`在评论中指出的那样，在处理非队列时还有一个特殊之处：

`$(this).dequeue()`没有`type`参数将使默认队列（`fx`）出队，因此非`fx`队列需要将名称作为参数传递给`.dequeue()`，同时`.next()`查找其创建范围的链并自动检索创建函数对象`type`的范围内。`$.dequeue()``next`

因此，当使用非`fx`队列时，您必须将队列名称传递给`$().dequeue(queueIdentifier)`，而`.next()`始终在回调所属的队列中出列。

# facebook - 如何从 Facebook 删除 Facebook 应用程序？

> ID：15102353
> 
> 赞同：1
> 
> 时间：2013-02-27T00:57:33.137
> 
> 标签：facebook, facebook-apps

使用 Facebook 开发者应用仪表板从 Facebook 永久删除应用的流程是什么？

我只找到了一个答案，我不知道它是否有效：将其置于*沙盒模式*并等待 Facebook 将其删除。这似乎不对。显然，对于没有经验的人来说，用空的应用程序向 Facebook 发送垃圾邮件非常容易，而且没有明显的删除方法。

知道我自己确实尝试过这样做，但找不到“永久删除此应用程序”按钮之类的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T01:02:07.073

1.  转到[应用仪表板](https://developers.facebook.com/apps)
2.  从应用列表中选择要删除的应用
3.  单击页面主要部分中间的“编辑设置”
4.  点击左侧栏中的“删除应用程序”
5.  当弹出消息要求您确认时单击“确认”

![删除应用链接的屏幕截图](../Images/2291082eba6a37a7556ffef6b61c7330.png)

# java - 这个资源在什么情况下会泄露？

> ID：15102359
> 
> 赞同：5
> 
> 时间：2013-02-27T00:58:24.303
> 
> 标签：java, eclipse

Eclipse 4 给出了一个警告，指出`stmt`可能没有关闭并导致资源泄漏：

```
class Test {
    public void test() {
        PreparedStatement stmt = null;
        try {
            stmt = HibernateSession.instance().connection().prepareStatement("");
        } catch (final SQLException e) {
            e.printStackTrace();
        } finally {
            if (stmt != null)
                try {
                    stmt.close();
                } catch (final SQLException e) {
                    e.printStackTrace();
                }
        }
    }
} 
```

什么情况下会出现这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T03:21:59.093

我想这里的结论是：这是一个 Eclipse 错误？

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-27T01:24:46.530

`stmt.close()`如果在`finally`块中调用时抛出异常，则可能发生泄漏。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-27T01:55:45.530

问题是在您的`finally`块中可能会发生异常，这将阻止`stmt`关闭。

一种解决方法是您可以将`finally`块中的所有内容替换为：

```
JDBCUtilities.close(stmt); 
```

请[参阅](http://www.athenasource.org/docs/javadoc/org/athenasource/framework/unidbi/JDBCUtilities.html#close%28java.sql.Statement%29)`JDBCUtilities.close`. _ 如您所见，使用此实用方法不会引发异常，因此您无需担心资源泄漏。另一个好处是实用程序方法也可以处理这种`null`情况，`stmt`因此我们不需要自己编写代码。

实际上，[使用](http://www2.sys-con.com/itsg/virtualcd/java/archives/0504/ashmore/index.html)`JDBCUtilities`.

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-02-27T01:23:01.947

您需要使用 Java 7 的 try 资源或 try-finally 块：

```
try(stmt = HibernateSession.instance().connection().prepareStatement("")) {

} 
```

`AutoCloseable`将在继承自不保证关闭的类型上生成此警告。（或者可能`Closeable`，我忘记了）。

现在我明白了您的要求，只需编写不太复杂的代码即可。

```
Foo f = null; // don't do this, but it's what you're doing
f = new Foo(); 
```

是您正在做的事情，并且您发现了您实际上必须为这项无关工作支付罚款的几种情况之一。

此外，你`try/finally`应该是干净的。 `.close()`不能扔，为什么要抓？

```
try { // don't do this
    stmt.close();
}
catch(SQLException exc) {

} 
```

应该生成一个 Eclipse 警告，告诉您您正在捕捉不会抛出的东西。这甚至可能是一个编译错误，不确定，但听起来你会受益于 Eclipse > Preferences > Compiler 并查看哪些警告是智能的。如果您不理解警告，请在 Google 上搜索，看看它是否对您有帮助，不要只是跳过它。（有点像你对这个做的）。

# scripting - 如何在网络上编写自动操作脚本？

> ID：15102364
> 
> 赞同：1
> 
> 时间：2013-02-27T00:59:08.550
> 
> 标签：scripting, automation

这是一个非常普遍的问题：）例如，我希望能够自动检查页面是否已更新，或者在线进行一些日常操作...我将从哪里开始？可以使用哪些语言/程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T13:28:46.290

我也用这个工具。我喜欢盖布！但是你可以试试 Java + Selenium。您的选择取决于您需要完成的任务以及是否了解该工具是否适合您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T02:52:41.837

我会选择这个很棒的 Groovy 库- [Geb。](http://www.gebish.org/)

# java - Java 分配不工作

> ID：15102367
> 
> 赞同：0
> 
> 时间：2013-02-27T00:59:40.970
> 
> 标签：java, prepared-statement, variable-assignment, resultset

我有一个功能，允许用户在用户类中登录系统。登录后 - 从数据库中检索他们的名字和姓氏，并将其作为私有变量存储在 User 类中。

```
private String username = "";
private String forename = "";
private String surname = "";

public User(){}

public boolean loginButtonAction(String user, String pass) {
    try {
        String statement = "SELECT PUNAME, PPASS, PFNAME, PSNAME FROM APP.PERSON WHERE PUNAME = ? AND PPASS = ?";
        PreparedStatement ps = Main.getPreparedStatement(statement);
        ps.setString(1, user);
        ps.setString(2, pass);
        ResultSet rs = ps.executeQuery();
        if (rs.next()) {
            System.out.println("Logged in");
            username = user;
            forename = rs.getString("PFNAME");
            surname = rs.getString("PSNAME");
            return true;
        }
        rs.close();
        ps.close();
    } catch (SQLException e) {
        System.out.println(e.getMessage());
    }
    System.out.println("Incorrect login details");
    return false;
} 
```

我的 User 类中有公共方法来返回这些变量。

```
public String getUsername() {
    return username;
}

public String getForename() {
    return forename;
}

public String getSurname() {
    return surname;
} 
```

我在我的 Main 类和方法中创建一个新的 User 实例用于测试目的，并且在成功登录后简单地打印用户的名字和姓氏：

```
User u = new User();
u.loginButtonAction("johnny", "arsenal");
System.out.println("Forename: " + u.getForename()); 
```

用户名工作正常，但当然不是从数据库中提取的。结果如下：

```
run:
Logged in
Forename: 
```

这是我在 APP.PERSON 中的数据库值：

![在此处输入图像描述](../Images/deda1abe448681d18beb7574d4fdf3ae.png)

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T01:11:47.567

在调试方面，您应该做的第一件事是替换：

```
forename = rs.getString("PFNAME"); 
```

和：

```
forename = rs.getString("PFNAME");
System.out.println ("forename set to [" + forename + "]"); 
```

这将告诉您在放置`forname`位置的位置放置了什么。

如果那是空白的，那么您的问题在于来自数据库的数据。

* * *

而且，根据您的最新更新，`PFNAME`和`PSNAME`列`johnny/arsenal`确实是空白的。

所以看起来您的代码运行良好，只是您的数据库没有像您预期的那样填充。

`select`是区分大小写的，因此和`johnny/arsenal`之间存在差异`Johnny/arsenal`。也许您认为您想要大写变体，在这种情况下您应该使用：

```
u.loginButtonAction("Johnny", "arsenal"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T01:18:18.117

您的数据库中有两个值。一个是大写的 Johnny，一个是小写的 johnny。

您正在查询小写字母 johnny，它没有 PFNAME 或 PSNAME 值。

在查看代码之前，请务必尝试测试您的 SQL。

# notepad++ - 将列表粘贴到另一个列表旁边

> ID：15102374
> 
> 赞同：0
> 
> 时间：2013-02-27T01:01:24.150
> 
> 标签：notepad++

记事本++中有没有办法将项目列表粘贴到预先存在的列表旁边？或者其他可以帮助我的东西？

所以 ...

项目 1
项目 2
项目 3

项目a
项目b
项目c

必须变成：

项目 1 项目 a
项目 2 项目 b
项目 3 项目 c

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T07:30:08.500

秘密是使用 Alt 键（在列模式下）选择右侧列文本。

1/ 按住 Alt 并从第 1 列开始选择项目 a、b、c，然后向下和向外拖动，直到选择 3 个 alpha 项目行。

2/ 将其复制到剪贴板。

3/ 在项目 1,2,3 末尾添加空格

4/ 将光标移动到第 1 行的末尾（“item 1”）并粘贴。

你应该完成了。

# ajax - ajax错误不刷新

> ID：15102383
> 
> 赞同：0
> 
> 时间：2013-02-27T01:02:10.420
> 
> 标签：ajax

我的 .jsp 页面部分代码

```
function runAjax(){
    $.ajax({
        type: "POST",
        url: "Test.html",
        data: { testparam1,testparam2},
        success: function(data){
            document.getElementById("processdata").innerHTML="Success";
        },
        error: function(e){
            document.getElementById("processdata").innerHTML="Error";
        }
        });
} 
```

在我处理帖子的控制器中，我故意引发错误以进行测试。客户端代码显示消息“错误”。在同一个会话中，我刷新我的页面并运行它，这样就不会引发错误。尽管我知道控制器按预期工作，但我仍然看到“错误”而不是“成功”。

我应该这样做吗

```
function runAjax(){
    $.ajax({
        type: "POST",
        url: "Test.html",
        data: { testparam1,testparam2},
        success: function(data){
            document.getElementById("processdata").innerHTML="Success";
        },
        error: function(request){
            document.getElementById("processdata").innerHTML="Error";
        }
        });
} 
```

然后在控制器中

```
try{
...
}catch(Exception e)
{
 response.getWriter().print("An error occured");
} 
```

如果在我的原始代码中缓存了错误，每次调用我的控制器时如何清除它？

# java - Java：构造函数初始化和静态方法初始化的区别？

> ID：15102384
> 
> 赞同：5
> 
> 时间：2013-02-27T01:02:16.710
> 
> 标签：java, methods, constructor, workflow, bukkit

这可能只是个人品味和工作流程的问题，但如果不止于此，我觉得无论如何我都应该问。

在 Java 中，通过构造函数创建实例和通过静态方法（返回实例）之间有什么区别？例如，从我正在处理的项目中获取这段代码（在发布时手工编写，因此采取了一些捷径和自由）：

```
Plugin main;
Map<int, int> map;

public Handler(Plugin main) {
    this.main = main;
}

public static Handler init(Plugin main) {
    Handler handler = new Handler(main);
    handler.createMap();
}

public void createMap() {
    this.map = Maps.newHashMap();
} 
```

在这种情况下，使用之间有什么区别

```
Handler handler = new Handler(this); 
```

和

```
Handler handler = Handler.init(this); 
```

在 Plugin 类中，除了`createMap()`只在后者中运行，因为它没有在构造函数中调用？

为了澄清，在这种情况下，`Plugin`被认为是主类。

我知道足够多的 Java 语法来编写中级插件，但对 Java 本身还不够了解，无法知道这两种方式之间的区别。

编辑：例如，`Maps`我用来创建的类`Map`使用静态工厂方法（我希望我正确使用该术语）使用类而不是对象调用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-27T01:54:43.047

静态工厂方法既有优点也有缺点。

**好处**

*   描述性的、有意义的名称。
*   当被调用时，他们可以决定是否返回一个新实例
*   它们可以返回返回类型的任何子类型的对象
*   它们减少了创建参数化类型实例的冗长性

**缺点**

*   如果只提供静态工厂方法，则不能对没有公共或受保护构造函数的类进行子类化
*   它们不容易与其他静态方法区分开来

*资料来源：Effective Java，第二版。*

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-27T01:14:27.077

不同的是静态工厂方法更灵活。它可以有各种方式来返回一个实例。它可以做其他方面的事情。它可以有一个更具描述性的名称。它可以`foo(args)`通过静态导入或继承通过其简单名称（例如）调用。

构造函数调用更加确定——调用者确切地知道发生了什么——创建了该确切类的新实例。

# text - 用空格分隔的数字的文件类型？

> ID：15102387
> 
> 赞同：0
> 
> 时间：2013-02-27T01:02:24.307
> 
> 标签：text, file-type

我正在考虑在我的一个应用程序中使用由空格分隔的数字文件类型（作为文本）。任何类型的空格（空格、换行符等）都可以。我很好奇这是否是标准文件类型？如果是这样，它叫什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T01:07:58.323

大多数程序似乎都将其实现为`txt`，并且对于足够简单的格式，我认为这很好。

如果您的意图是允许从 excel 或 ilk 访问文件，我建议使用制表符（`\t`或`0x0b`）来分隔字段，并用换行符分隔记录。将其命名为 .tsv 或 .txt ，您就有了[Tab 分隔值](http://en.wikipedia.org/wiki/Tab-separated_values)。

# python - 如何在 openERP 7 中添加功能？

> ID：15102388
> 
> 赞同：1
> 
> 时间：2013-02-27T01:02:29.967
> 
> 标签：python, function, field, openerp

我正在尝试在 openERP 版本 7 中创建一个新模块。在我的课堂上我有这个代码：

```
_columns = {
'hour_from' : fields.float('Work from', required=True),
    'hour_to' : fields.float("Work to", required=True),
     'totalhour': fields.function(_total, method=True, string='Total Attendance', multi="_total"),
} 
```

我没有找到在我的班级中添加函数的任何解决方案。我需要它的函数返回和的`hour_from`总和`hour_to`。任何人都可以帮忙吗？

我在声明我的 _columns 之前尝试了这段代码：

```
def _total(self, cr, uid, ids, name, args, context=None):

  res = {}

    res['totalhour'] = hour_from + hour_to

return res 
```

当我重新启动服务器时，我收到此错误：

```
No handler found. 
```

**（从其他帖子更新）**

好吧，这是我的代码：

```
def _total(self, cr, uid, ids, name, args, context=None):
res = {}
for record in self.browse(cr, uid, ids, context=context):
    res['totalhour'] = record.hour_from + record.hour_to
return res

class hr_analytic_timesheet(osv.osv):
_name = "hr.analytic.timesheet"
_inherit = "hr.analytic.timesheet"

_columns = {
'hour_from' : fields.float('Work from', required=True, help="Start and End time of working.", select=True),
    'hour_to' : fields.float("Work to", required=True),

     'totalhour' : fields.function(_total, type='float', method=True, string='Total Hour'),
}

hr_analytic_timesheet() 
```

我的 xml：

```
 <record id="view_ov_perf_timesheet_line_tree" model="ir.ui.view">
        <field name="name">hr.analytic.timesheet.tree</field>
        <field name="model">hr.analytic.timesheet</field>
        <field name="inherit_id" ref="hr_timesheet.hr_timesheet_line_tree"/>
        <field name="arch" type="xml">
                  <field name="unit_amount" position="replace">

                    <field name="hour_from" widget="float_time" string="Heure début"/>
                    <field name="hour_to" widget="float_time" string="Heure fin" />
                     <field name="totalhour"  widget="float_time"/>

                   </field>

        </field>
    </record> 
```

当我想添加或编辑一行时，我有这个错误：

```
File "C:\Program Files\OpenERP 7.0-20130205-000102\Server\server\.\openerp\osv\orm.py", line 3729, in _read_flat
KeyError: 53 
```

你能帮帮我吗

* * *

这是我的代码：

```
def _total(self, cr, uid, ids, name, args, context=None):
res = {}
for record in self.browse(cr, uid, ids, context=context):
    res['totalhour'] = record.hour_from + record.hour_to
return res

class hr_analytic_timesheet(osv.osv):
_name = "hr.analytic.timesheet"
_inherit = "hr.analytic.timesheet"

_columns = {
'hour_from' : fields.float('Work from', required=True, help="Start and End time of working.", select=True),
    'hour_to' : fields.float("Work to", required=True),

     'totalhour' : fields.function(_total, type='float', method=True, string='Total Hour'),
}

hr_analytic_timesheet() 
```

我的 xml：

```
 <record id="view_ov_perf_timesheet_line_tree" model="ir.ui.view">
        <field name="name">hr.analytic.timesheet.tree</field>
        <field name="model">hr.analytic.timesheet</field>
        <field name="inherit_id" ref="hr_timesheet.hr_timesheet_line_tree"/>
        <field name="arch" type="xml">
                  <field name="unit_amount" position="replace">

                    <field name="hour_from" widget="float_time" string="Heure début"/>
                    <field name="hour_to" widget="float_time" string="Heure fin" />
                     <field name="totalhour"  widget="float_time"/>

                   </field>

        </field>
    </record> 
```

当我想添加或重新编辑一行时，我遇到了这个错误：

```
File "C:\Program Files\OpenERP 7.0-20130205-000102\Server\server\.\openerp\osv\orm.py", line 3729, in _read_flat
KeyError: 53 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T10:08:52.763

你能像这样定义你的功能并再次检查：

```
def _total(self, cr, uid, ids, name, args, context=None):
    res = {}
    for record in self.browse(cr, uid, ids, context=context):
        res[record.id] =  record.hour_from + record.hour_to
    return res 
```

或像这样：

```
def _total(self, cr, uid, ids, name, args, context=None):
    res = {}
    for record in self.browse(cr, uid, ids, context=context):
        res[record.id] = {'totalhour' : 0.0}
        res[record.id]['totalhour'] = record.hour_from + record.hour_to
    return res 
```

问候，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T05:05:49.250

你可以像这样定义你的函数：

```
def _total(self, cr, uid, ids, name, args, context=None):
    res = {}
    for record in self.browse(cr, uid, ids, context=context):
        res[record.id] = record.hour_from + record.hour_to
    return res 
```

这是如何定义功能字段的链接，希望对您有所帮助。

[http://doc.openerp.com/trunk/developers/server/03_module_dev_02/](http://doc.openerp.com/trunk/developers/server/03_module_dev_02/)

# java - 我是否在 EDT 之外更新 Swing 组件？

> ID：15102389
> 
> 赞同：8
> 
> 时间：2013-02-27T01:02:35.007
> 
> 标签：java, multithreading, swing, swingworker, event-dispatch-thread

我已经阅读了很多关于 Swing、线程、invokeLater()、SwingWorker 等的内容，但我似乎无法完全理解这一切，所以我试图创建一个非常简单的程序来说明。我看过很多例子，但似乎都没有显示出我正在尝试做的事情。

这就是我在我的示例中尝试做的事情。我有一个按钮和一个标签，当我单击按钮时，我希望程序暂停 3 秒钟，然后在标签的文本中添加一个句点。在这 3 秒内，我希望 GUI 正常显示并继续响应额外的点击。这是我写的：

```
import javax.swing.SwingWorker;

public class NewJFrame extends javax.swing.JFrame
{
    private javax.swing.JButton jButton1;
    private javax.swing.JLabel jLabel1;

    public NewJFrame()
    {
        initComponents();
    }
    private void initComponents()
    {
        jButton1 = new javax.swing.JButton();
        jLabel1 = new javax.swing.JLabel();
        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
        jButton1.setText("Button");
        jButton1.addActionListener(new java.awt.event.ActionListener()
        {
            public void actionPerformed(java.awt.event.ActionEvent evt)
            {
                jButton1ActionPerformed(evt);
            }
        });
        getContentPane().add(jButton1, java.awt.BorderLayout.CENTER);
        jLabel1.setText("Text");
        getContentPane().add(jLabel1, java.awt.BorderLayout.PAGE_END);
        pack();
    }

    private void jButton1ActionPerformed(java.awt.event.ActionEvent evt)
    {
        SwingWorker worker=new SwingWorker()
        {
            protected Object doInBackground()
            {
                try{Thread.sleep(3000);}
                catch (InterruptedException ex){}
                return null;
            }
        };
        worker.execute();
        jLabel1.setText(jLabel1.getText()+".");
    }

    public static void main(String args[])
    {
        java.awt.EventQueue.invokeLater(new Runnable()
        {
            public void run(){ new NewJFrame().setVisible(true); }
        });
    }
} 
```

使用此代码，如果我单击按钮，句点会立即附加到标签上，这对我来说很有意义，因为我正在创建和休眠一个后台线程，让 EDT 可用于立即更新标签。所以我尝试了这个：

```
private void jButton1ActionPerformed(java.awt.event.ActionEvent evt)
{
    Thread thread = new Thread();
    try{ thread.sleep(3000);}
    catch (InterruptedException ex){}
    jLabel1.setText(jLabel1.getText()+".");
} 
```

这几乎可以工作，只是它阻止了 EDT，导致按钮在将句点附加到标签文本之前变为蓝色三秒钟。我不希望按钮看起来像是被按下了整整三秒钟，而实际上它只是被快速点击了，所以我尝试了这个：

```
private void jButton1ActionPerformed(java.awt.event.ActionEvent evt)
{
    SwingWorker worker=new SwingWorker()
    {
        protected Object doInBackground()
        {
            try{Thread.sleep(3000);}
            catch (InterruptedException ex){}
            jLabel1.setText(jLabel1.getText()+".");
            return null;
        }
    };
    worker.execute();
} 
```

这似乎可行，但我不是从后台线程而不是 EDT 调用 jLabel1.setText(...)，因此打破了“Swing 单线程规则”吗？如果是这样，有没有更好的方法来达到预期的效果？如果不是，你能解释一下为什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T01:07:09.730

你真的很亲近...

试试这样的东西。

```
SwingWorker worker=new SwingWorker()
{
    protected Object doInBackground()
    {
        try{
            Thread.sleep(3000);
        }catch (InterruptedException ex){}
        return null;
    }

    // This is executed within the context of the EDT AFTER the worker has completed...    
    public void done() {
        jLabel1.setText(jLabel1.getText()+".");
    }
};
worker.execute(); 
```

您可以通过使用检查您是否在 EDT 中运行`EventQueue.isDispatchingThread()`

**更新**

您也可以使用`javax.swing.Timer`可能更容易的...

```
Timer timer = new Timer(3000, new ActionListener() {
    public void actionPerformed(ActionEvent evt) {
        jLabel1.setText(jLabel1.getText()+".");
    }
});
timer.setRepeats(false);
timer.start(); 
```

# java - 如何确定将哪个类发送到方法？

> ID：15102391
> 
> 赞同：-1
> 
> 时间：2013-02-27T01:02:39.207
> 
> 标签：java, polymorphism

我有一个名为Register的方法，我需要找出将哪个类对象发送到该方法，我的代码如下，无法编译

错误是找不到符号

符号：T级

*   请注意我有两种类型的类 UserTypeA 和 UserTypeB

代码

```
 public class UserTypeA {
      private int SSN;
      private int Name;
         .... Getter and setters go here....
   }

   public class UserTypeB {
      private int Name;
        ... Getter and setters go here ....
   }

   public void mymethod(){

     UserTypeA usera = new UserTypeA();
     usera.setName("Jack");
     register(usera);

     UserTypeB userb = new UserTypeB();
     userb.setName("Daniel");
     register(userb);
   }

   public void register(Class<T> type){

      type.registerUser(type.getName());

   } 
```

正如 Jayamohan 在他的回答中所建议的那样，我尝试了以下方法，但它无法访问 getName 方法。

```
 public void register(Object obj) throws ClassNotFoundException {
    if(obj instanceof UserTypeA)
    { 
        System.out.println(obj.getName());
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T01:11:42.567

更改您的注册方法以使用`instanceof`以下关键字

```
public void register(Object obj) {
    if (obj instanceof UserA) {
        // Do something related to UserA
    } else if (obj instanceof UserB) {
        // Do something related to UserB
    }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-27T01:07:14.217

我怀疑你只需要一个`User` *类*，而不是`UserA`和`UserB`类。然后，您可以从该类创建两个`User` *对象。*然后，您可以简单地将代码更改为以下内容：

```
 public void mymethod(){

     User jack = new User();
     jack.setName("Jack");
     register(jack);

     User dan = new User();
     dan.setName("Dan");
     register(dan);
   }

   public void register(User newUser){

      // Do something here to register the newUser

   } 
```

请注意，此代码仍不会自行编译。您还需要`User`在单独的文件中创建类本身。我不知道您的要求是什么，所以我无法就您需要为这部分做什么提供任何建议。

# jpa - 为映射超类创建表时出现 NullPointerException

> ID：15102393
> 
> 赞同：0
> 
> 时间：2013-02-27T01:02:57.463
> 
> 标签：jpa, datanucleus

我将其追溯到将空数据存储类返回给 createPerImplementationColumnsForReferenceField 的 getDatastoreClass。

我已经尝试了 3.1.1 和现在使用 3.2.0-m4 版本，希望能解决我的问题。

```
RDBMSStoreManager#getDatastoreClass(String className, ClassLoaderResolver clr); 
```

它正在向

```
ReferenceMapping#createPerImplementationColumnsForReferenceField(boolean pk, boolean nullable, boolean serialised, boolean embedded, int fieldRole, ColumnMetaData[] columnMetaData, ClassLoaderResolver clr) 
```

我正在使用 orm 来注释映射超类，而这个映射超类没有表定义，并且我的两个映射超类都抛出了这个异常。

```
499170 [http-bio-8080-exec-8] DEBUG DataNucleus.Datastore.Schema  - Field [com.hp.vf.server.domain.AlertDefinition.isPublic] -> Column(s) ["ALERTDEFINITION"."ISPUBLIC"] using mapping of type "org.datanucleus.store.rdbms.mapping.java.BooleanMapping" (org.datanucleus.store.rdbms.mapping.datastore.SmallIntRDBMSMapping)
551964 [http-bio-8080-exec-8] DEBUG DataNucleus.Persistence  - Managing Persistence of Class : com.hp.vf.analytics.shared.metric.Metric [Table : (none), InheritanceStrategy : subclass-table]
561964 [http-bio-8080-exec-8] ERROR DataNucleus.Datastore.Schema  - An exception was thrown while adding/validating class(es) : null
java.lang.NullPointerException
    at org.datanucleus.store.rdbms.mapping.java.ReferenceMapping.createPerImplementationColumnsForReferenceField(ReferenceMapping.java:452)
    at org.datanucleus.store.rdbms.mapping.java.ReferenceMapping.prepareDatastoreMapping(ReferenceMapping.java:214)
    at org.datanucleus.store.rdbms.mapping.java.ReferenceMapping.initialize(ReferenceMapping.java:110)
    at org.datanucleus.store.rdbms.mapping.java.InterfaceMapping.initialize(InterfaceMapping.java:54) 
```

在参考映射中，尝试执行 getIdMapping() 时 dc 为空，我已在调试器中验证了这一点。

```
 try
            {
                DatastoreClass dc = storeMgr.getDatastoreClass(implClass.getName(), clr);
                m = dc.getIdMapping(); // DC is null 
            }
            catch (NoTableManagedException ex)
            {
                // TODO Localise this message
                throw new NucleusUserException("Cannot define columns for " + mmd.getFullFieldName() + 
                    " due to " + ex.getMessage(), ex);
            } 
```

这是有问题的类文件。

```
public abstract class Metric implements IMetric {

    /**
     * Serialization ID
     */
    private static final long serialVersionUID = 3806479436166940035L;

    private Long id;

    /**
     * The name of the metric, this is not mandatory we have some metrics that
     * may come back without names.
     */
    protected String name;

    /**
     * This is an optional metric value that can be set by the script in order
     * to add context to the execution of the metric.
     */
    protected String context;

    /**
     * The list of violations associated with this metric.
     */
    protected List<Violation> violations = null;

    public Metric() {
        violations = new ArrayList<Violation>();
    }

    /**
     * Constructor that takes the name of the object and the value that it
     * represents.
     * 
     * @param name
     * @param value
     */
    public Metric(String name) {
        this();
        this.name = name;
    }

    /* (non-Javadoc)
     * @see com.hp.vf.taskengine.shared.metric.IMetric#getName()
     */
    @Override
    public String getName() {
        return name;
    }

    /* (non-Javadoc)
     * @see com.hp.vf.taskengine.shared.metric.IMetric#setName(java.lang.String)
     */
    @Override
    public void setName(String name) {
        this.name = name;
    }

    /**
     * This is the context that represents the metric. This could have come from
     * R and would be a Key:Value; pair of values used to calculate the value.
     * For example if a metric was calculated for a product in houston for ISS
     * the context may look like "ProdNum:1234;Factory:Houston;BUnit:ISS". This
     * context is useful when chaining together tasks.
     * 
     * @return String context used when chaining tasks together.
     */
    public String getContext() {
        return context;
    }

    /* (non-Javadoc)
     * @see com.hp.vf.taskengine.shared.metric.IMetric#toString()
     */
    public String toString() {
        String debugString = "";
        debugString += "Metric: " + name;

        return debugString;
    }

    /* (non-Javadoc)
     * @see com.hp.vf.taskengine.shared.metric.IMetric#hasMetricViolations()
     */
    @Override
    public boolean hasMetricViolations() {
        return (violations != null && violations.size() > 0) ? true : false;
    }

    /* (non-Javadoc)
     * @see com.hp.vf.taskengine.shared.metric.IMetric#getViolations()
     */
    @Override
    public List<IViolation> getViolations() {
        return violations;
    }

    /* (non-Javadoc)
     * @see com.hp.vf.taskengine.shared.metric.IMetric#setViolations(java.util.List)
     */
    @Override
    public void setViolations(List<IViolation> violations) {
        this.violations = violations;
    }

    @Override
    public Long getId() {
        return id;
    }
} 
```

这是我的 orm.xml 文件的摘录

```
<access>FIELD</access>

<mapped-superclass class="com.hp.vf.analytics.shared.metric.Metric" access="FIELD">
    <attributes>
        <basic name="name" />
        <basic name="context" />
        <one-to-many name="violations">
            <cascade>
                <cascade-all />
            </cascade>
        </one-to-many>
    </attributes>
</mapped-superclass> 
```

我做错了什么还是这是一个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T14:31:36.823

我能够使用 Datanucleus 的提示解决问题。我有多个问题

**问题**
对我来说最明显和最愚蠢的

**如果您有一个使用接口的一对多或一对一，您必须指定目标实体。**

```
 /**
     * The list of violations associated with this metric.
     */
    protected List<IViolation> violations = null;
...
    <one-to-many name="violations"
      target-entity="com.vf.analytics.shared.metric.Violation">
       <cascade>
          <cascade-all />
       </cascade>
    </one-to-many> 
```

**不要使用泛型，jpa 规范不支持它们**
*不确定 datanucleus 是否支持泛型，但可能不推荐。*

```
public MetricNumber< T extends Number> extends Metric implements IMetric {
  T value;
} 
```

**如果您扩展一个未注释的实体，请确保将其添加到您的 orm.xml**

我没有测试某些对象，所以我认为 datanucleus 会忽略它们，但事实并非如此。我扩展了未注释但尚未将它们添加到 orm.xml 的第三方类，这也导致我得到的空指针异常为 null。

# python - 模块组织、继承和@classmethods

> ID：15102397
> 
> 赞同：2
> 
> 时间：2013-02-27T01:03:33.963
> 
> 标签：python, class, inheritance

我正在尝试编写一个类似于内置函数和我见过的其他一些“成熟的”Python 东西的类。我的 Pythonic 教育在课堂方面有点参差不齐，我担心我把这一切都搞混了。

我想创建一个用作一种存储库的类，其中包含未处理文件（及其名称）的字典和已处理文件（及其名称）的字典。我想实现一些其他（子？）类来处理诸如打开和处理文件之类的事情。文件处理类应该能够更新主类中的字典。我还希望能够直接调用各种子模块，而不必单独实例化所有内容，例如：

```
import Pythia
p = Pythia()
p.FileManager.addFile("/path/to/some/file") 
```

甚至

```
Pythia.FileManager.addFile("/path/to/some/file") 
```

我一直在寻找诸如此类的东西`@classmethod`，`super`但我不能说我完全理解它。我也开始怀疑我可能有整个继承链向后 - 我认为我的主类实际上应该是处理和处理类的子类。我也想知道这是否会作为一个包更好地工作，但这是一个单独的、非常令人生畏的问题。

到目前为止，这是我的代码：

```
#!/usr/bin/python

import re
import os
class Pythia(object):
    def __init__(self):
        self.raw_files = {}
        self.parsed_files = {}
        self.FileManger = FileManager()
    def listf(self,fname,f):
        if fname in self.raw_files.keys():
            _isRaw = "raw"
        elif fname in self.parsed_files.keys():
            _isRaw = "parsed"
        else:
            return "Error: invalid file"
        print "{} ({}):{}...".format(fname,_isRaw,f[:100])

    def listRaw(self,n=None):
        max = n or len(self.raw_files.items())
        for item in self.raw_files.items()[:max]:
            listf(item[0],item[1])

    def listParsed(self,n=None):
        max = n or len(self.parsed_files.items())
        for item in self.parsed_files.items()[:max]:
            listf(item[0],item[1])

class FileManager(Pythia):
    def __init__(self):
        pass
    def addFile(self,f,name=None,recurse=True,*args):
        if name:
            fname = name
        else:
            fname = ".".join(os.path.basename(f).split(".")[:-1])
        if os.path.exists(f):
            if not os.path.isdir(f):
                with open(f) as fil:
                    Pythia.raw_files[fname] = fil.read()
            else:
                print "{} seems to be a directory.".format(f)
                if recurse == False:
                    return "Stopping..."
                elif recurse == True:
                    print "Recursively navingating directory {}".format(f)
                    addFiles(dir,*args)
                else:
                    recurse = raw_input("Recursively navigate through directory {}? (Y/n)".format(f))
                    if recurse[0].lower() == "n":
                        return "Stopping..."
                    else:
                        addFiles(dir,*args)
        else:
            print "Error: file or directory not found at {}".format(f)
    def addFiles(self,directory=None,*args):
        if directory:
            self._recursivelyOpen(directory)
        def argHandler(arg):
            if isinstance(arg,str):
                self._recursivelyOpen(arg)
            elif isinstance(arg,tuple):
                self.addFile(arg[0],arg[1])
            else:
                print "Warning: {} is not a valid argument...skipping..."
                pass
        for arg in args:
            if not isinstance(arg,(str,dict)):
                if len(arg) > 2:
                    for subArg in arg:
                        argHandler(subArg)
                else:
                    argHandler(arg)
            elif isinstance(arg,dict):
                for item in arg.items():
                    argHandler(item)
            else:
                argHandler(arg)
    def _recursivelyOpen(self,f):
        if os.path.isdir(f):
            l = [os.path.join(f,x) for x in os.listdir(f) if x[0] != "."]
            for x in l:
                _recursivelyOpen(x)
        else:
            addFile(f) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T01:16:47.897

首先：遵循[PEP8](http://www.python.org/dev/peps/pep-0008/)的指导方针。模块名、变量名和函数名应该是`lowercase_with_underscores`; 只有类名应该是`CamelCase`. 否则，遵循您的代码有点困难。:)

您在这里混淆了 OO 概念：您有一个包含子类实例的父类。

a`FileManager`主要做 a`Pythia`所做的事情，并进行一些修改或扩展？鉴于两者只能一起工作，我猜不会。

我不太确定你最终希望它是什么样子，但我认为你根本不需要继承。 `FileManager`可以是它自己的类，`self.file_manager`在一个`Pythia`实例上可以是 的一个实例`FileManager`，然后`Pythia`可以在必要时委托给它。这与您已经使用此代码的方式相去甚远。

构建小的、独立的部分，*然后*考虑如何将它们相互连接。

* * *

此外，一些错误和风格细节：

*   你打电话`_recursivelyOpen(x)`但忘记了`self.`。

*   逗号后的单个空格。

*   注意`max`作为变量名：它也是内置函数的名称。

*   `isinstance`如果可以，请避免类型检查 ( )。当根据参数类型执行十几种不同的事情时，要遵循您的代码是非常困难的。具有非常清晰的参数类型，并在必要时创建接受不同参数的辅助函数。

*   你有`Pythia.raw_files[fname]`inside `FileManager`，但`Pythia`它是一个类，它无论如何都没有`raw_files`属性。

*   你检查 if `recurse`is `True`, then `False`, then... 别的东西。什么时候是别的东西？此外，您应该使用`is`而不是`==`像这样针对内置单例进行测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T01:23:35.547

这里有很多东西，你可能最好对自己进行更多的教育。

对于您的预期用途：

```
import Pythia
p = Pythia()
p.file_manager.addFile("/path/to/some/file") 
```

像这样的类结构会起作用：

```
class FileManager(object):
    def __init__(self, parent):
        self.parent = parent

    def addFile(self, file):
        # Your code
        self.parent.raw_files[file] = file

    def addFiles(self, files)
        # Your code
        for file in files:
            self.parent.raw_files[file] = file

class Pythia(object):
    def __init__(self):
        self.file_manager = FileManager(self) 
```

但是有很多选择。您应该首先编写一些客户端代码来确定您想要什么，然后实现您的类/对象以匹配它。我从不倾向于在 python 中使用继承，由于 python 的鸭子类型，它并不是真正需要的。

此外，如果您希望在不实例化类的情况下调用方法，请使用静态方法，而不是类方法。例如：

```
class FileManager(object):
    @staticmethod
    def addFiles(files):
        pass 
```

# javascript - 使用 Firefox Add-on SDK 在页面上下文中调用函数

> ID：15102399
> 
> 赞同：0
> 
> 时间：2013-02-27T01:03:37.153
> 
> 标签：javascript, function, firefox-addon, invoke, firefox-addon-sdk

我是 Firefox 扩展开发的新手（试图开发一个控制 youtube 播放器的扩展）。我正在使用 SDK 并使用[pageMod](https://addons.mozilla.org/en-US/developers/docs/sdk/latest/modules/sdk/page-mod.html)我能够访问注入我的脚本并访问 DOM。但我无法调用该页面内的任何函数（包括 Flash 播放器的函数）。如何允许我的*contentScriptFile*调用特定页面中的任意函数？

**注意：**我真的不关心安全性，而且我已经在 Stackoverflow 上看到了一些答案（包括[this](https://stackoverflow.com/questions/151555/how-do-i-execute-a-page-defined-javascript-function-from-a-firefox-extension)），但它们会暴露我的 JS 文件或注入脚本标签。有没有更清洁的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T05:46:58.737

SDK 通过向内容脚本的作用域添加一个名为“unsafeWindow”的变量来允许进入页面的后门。unsafeWindow 是对文档窗口对象的直接引用，从名称可以看出它本质上是*unsafe*。要注意的主要问题是您*永远*不应信任从 unsafeWindow 返回的数据。

# mysql - 如何从遗留 MySQL 数据库 int MongoDB 的 ObjectID 转换整数 PK s？

> ID：15102400
> 
> 赞同：0
> 
> 时间：2013-02-27T01:03:37.187
> 
> 标签：mysql, mongodb, objectid

我想从 MySQL 迁移到 MongoDB。

在 MySQL 中，PK 是整数。我想将它们转换为 ObjectID

当我尝试：

```
mongo.ObjectID(theInteger) 
```

尽管整数相同，但结果不同。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T03:26:13.787

`ObjectId`是来自 MongoDB 的十六进制 24 字节字符类型。换句话说，您不能从 int 中强制转换。

维护 MySQL 数据结构的最佳方法是在`_id`字段中使用 MySQL PK，这不会有任何问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T03:21:28.077

ObjectId 是 mongodb 的一种特殊类型，但是如果你只是想迁移，可以将 mysql 的整数 id 存储到 mongodb 的 '_id' 中。

# jfreechart - 根据 jFreeChart 中数据点的密度，数字轴中的不同刻度单位（间隔）

> ID：15102405
> 
> 赞同：1
> 
> 时间：2013-02-27T01:04:13.980
> 
> 标签：jfreechart, axis

我想用 JfreeChart 的 XYLineChart 展示我的模拟结果，Number Axis 的范围在 time =0 到 time =3000 之间，但是不同时间间隔数据点的密度不同，

例如，直到时间 1000 只有几个数据点，然后时间间隔 (1000 - 2000) 的密度太高，而且我在时间间隔 (2000 -3000) 中的数据点也很少，所以，我想要不同的刻度根据数据点的密度自动单位，我使用的唯一代码是：

NumberAxis xAxis = (NumberAxis) plot.getDomainAxis();

xAxis.setAutoRange(true);

xAxis.setAutoTickUnitSelection(true);

它必须自动完成，因为数据点是在我的模拟过程中生成的，我不知道密度在哪个区间高或低

# c++ - 如何有序遍历 Boost.Heap 优先级队列并更新给定元素？

> ID：15102406
> 
> 赞同：1
> 
> 时间：2013-02-27T01:04:30.367
> 
> 标签：c++, boost, priority-queue

我正在寻找一种可以*保持*其元素排序的良好数据结构。目前我正在尝试[Boost.Heap](http://www.boost.org/doc/libs/1_53_0/doc/html/heap.html)。

我经常需要有序地遍历数据结构，并在到达基于某些属性的元素时，更新其优先级。Boost.Heap 优先级队列提供有序和无序迭代器。元素更新通过节点句柄发生，句柄可以从普通的无序迭代器中获取，但不能直接从有序迭代器中获取，如下例所示：

```
#include <iostream>
#include <algorithm>
#include <boost/heap/fibonacci_heap.hpp>

using namespace boost::heap;

int main()
{
    fibonacci_heap<int> fib_heap;

    fib_heap.push(1);
    fib_heap.push(2);
    fib_heap.push(3);

    for(auto i = fib_heap.ordered_begin(); i != fib_heap.ordered_end(); ++i)
    {
        // no viable conversion here
        auto h = fibonacci_heap<int>::s_handle_from_iterator(i);

        if(*h == 2) // dumb test
        {
            fib_heap.increase(h, *h + 2);
            break;
        }
    }

    std::for_each(fib_heap.ordered_begin(), fib_heap.ordered_end(),
    [](const int &e)
    {
        std::cout << e << std::endl;
    });
} 
```

如何有序地遍历队列并更新遍历中的元素？

请注意，我在更新后离开了遍历。

（欢迎为此目的提供替代库的建议）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T04:35:47.303

如果找不到更好的选择，我需要将句柄保存在每个相应元素内以供以后使用（c++1y 代码）：

```
#include <iostream>
#include <algorithm>
#include <boost/heap/fibonacci_heap.hpp>

using namespace boost::heap;

template<typename T>
struct heap_data
{
    typedef typename fibonacci_heap<heap_data>::handle_type handle_t;
    handle_t handle;
    T data;

    heap_data(const T &data_) : data(data_) {}

    bool operator<(heap_data const & rhs) const
    {
        return data < rhs.data;
    }
};

void setup_handle(fibonacci_heap<heap_data<int>>::handle_type &&handle)
{
    (*handle).handle = handle;
}

int main()
{
    fibonacci_heap<heap_data<int>> heap;

    setup_handle(heap.emplace(1));
    setup_handle(heap.emplace(2));
    setup_handle(heap.emplace(3));

    std::find_if(heap.ordered_begin(), heap.ordered_end(),
    [&heap](const heap_data<int> &e)
    {
        if(e.data == 2)
        {
            const_cast<heap_data<int> &>(e).data += 2;
            heap.increase(e.handle);
            return true;
        }
        return false;
    });

    std::for_each(heap.ordered_begin(), heap.ordered_end(),
    [](const heap_data<int> &e)
    {
        std::cout << e.data << std::endl;
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T08:01:02.343

你的要求对我来说不是很清楚。但是 std::multimap 或 std::multiset 怎么样？更新操作是 O(log n)。我认为遍历应该是 O(n)（[BST 遍历](http://en.wikipedia.org/wiki/Binary_search_tree#Traversal)），但它没有记录在我的标准 C++ 参考（cppreference.com、cplusplus.com）中。看起来[boost::heap 遍历](http://www.boost.org/doc/libs/1_53_0/doc/html/heap/concepts.html#heap.concepts.iterators)是摊销的 O(n log n)。

# c++ - C++ Unicode 问题

> ID：15102407
> 
> 赞同：0
> 
> 时间：2013-02-27T01:04:49.227
> 
> 标签：c++, unicode, stdstring, widechar, wofstream

我在处理 unicode 转换时遇到了一些麻烦。

以下代码将其输出到我的文本文件中。你好??O

```
std::string test = "HELLO"; 
std::string output;
int len = WideCharToMultiByte(CP_OEMCP, 0, (LPCWSTR)test.c_str(), -1, NULL, 0, NULL, NULL);
char *buf = new char[len];
int len2 = WideCharToMultiByte(CP_OEMCP, 0, (LPCWSTR)test.c_str(), -1, buf, len, NULL, NULL);
output = buf;
std::wofstream outfile5("C:\\temp\\log11.txt");
outfile5 << test.c_str();
outfile5 << output.c_str();
outfile5.close(); 
```

但正如您所见，输出只是测试变量的 unicode 转换。这怎么可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T01:12:11.660

在第一次测量呼叫后检查 LEN 是否正确。通常，您不应将 test.c_str() 转换为 LPCWSTR。'test' 是 'char'-string 而不是 'wchar_t'-wstring。您可以将其转换为 LPCSTR - 请注意缺少“W”。WinAPI 对此有区别。如果你想在其中保留宽字符，你真的应该使用`wstring`它。是的，在重新阅读你的代码之后，`test`应该是一个 wstring，然后你可以安全地将它转换为 LPCWSTR。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T01:10:22.677

阅读此 [Microsoft wstring 参考后](http://msdn.microsoft.com/en-us/library/wt3s3k55%28v=vs.80%29.aspx)

我变了

```
std::string test = "HELLO"; 
```

到

```
std::wstring test = L"HELLO"; 
```

字符串输出正确，我得到了

你好你好

# c# - 如何添加定期条目谷歌日历

> ID：15102409
> 
> 赞同：1
> 
> 时间：2013-02-27T01:05:01.807
> 
> 标签：c#, google-calendar-api, recurring

我想用 C# 添加一个循环事件。我在网上发现以下应该可以工作。当我运行插入条目的方法时，它在 EventEntry 上失败了 insertEntry = service.Insert(calendarUri, entry); 陈述 ！

我收到此错误：“请求执行失败： [https](https://www.google.com/calendar/feeds/user@gmail.com/private/full?gsessionid=6eGsOTuhQ-YUVWp2BV_25g) ://www.google.com/calendar/feeds/user@gmail.com/private/full?gsessionid=6eGsOTuhQ-YUVWp2BV_25g ”

当我删除重复代码时，一切正常！我注意到这段代码很老了！如何使用 .NET 库在 Google 日历上简单地添加定期事件？

```
EventEntry entry = new EventEntry();
entry.Title.Text = "Hello World !";

// Recurring event:   

String recurData =
"RRULE:FREQ=WEEKLY;WKST=SU;UNTIL=20131010;BYDAY=SU\r\n";

Recurrence recurrence = new Recurrence();
recurrence.Value = recurData;
entry.Recurrence = recurrence;

string htmlDescription = "Woww, really ?";

if (htmlDescription != null && htmlDescription.Length > 0)
{
    entry.Content.Type = "html";
    entry.Content.Content = htmlDescription;
}

Where eventLocation = new Where();
eventLocation.ValueString = "Somewhere";
entry.Locations.Add(eventLocation);

DateTime start = DateTime.Now;

When eventTime = new When();
eventTime.StartTime = start;

DateTime endTime = DateTime.Now.AddHours(2);
eventTime.EndTime = endTime;

entry.Times.Add(eventTime);

eventTime.AllDay = true;
EventEntry insertedEntry = service.Insert(calendarUri, entry); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T02:12:03.393

您的重复字符串告诉它何时结束需要一个全职条目。您只是说 UNTIL=20131010。问题是20131010在哪里？我们可以假设你想要午夜，但是……午夜在哪里？

```
String recurData =
"RRULE:FREQ=WEEKLY;WKST=SU;UNTIL=20131010T000000-05:00;BYDAY=SU\r\n"; 
```

上述更改应该会使您的活动重复到 2013 年 10 月 10 日美国东部时间午夜。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T01:56:25.740

直接来自 Google（如果没有默认出现，请单击 .NET 示例）：[创建重复事件](https://developers.google.com/google-apps/calendar/recurringevents)

如果不能正确回答您的问题，希望这会给您一些想法。

干杯。

# android - 为什么这行代码强制我每次构建它时都要清理它？

> ID：15102410
> 
> 赞同：1
> 
> 时间：2013-02-27T01:05:03.927
> 
> 标签：android, coding-style, transitions

你好，

我对 Android 编码还是很陌生，但这让我有点困惑。

我已经编写了一些应用程序，在此之前我可以相当定期地构建而无需先进行清理。在最终发布之前，我当然会一直这样做，但在开发过程中，只有在发生我没想到的事情时才会这样做。

一切正常，我遇到了一些影响转换的代码，因此屏幕会逐渐淡入另一个，并且效果很好但是当我添加一行时，该行执行应用程序在运行之前需要清理的功能一个开发设备。

```
overridePendingTransition(R.anim.fadein, R.anim.fadeout); 
```

如果我添加此行并且我不清理它会导致此行失败，但如果我先清理，则构建成功并且一切正常。

这是淡入：

```
<?xml version="1.0" encoding="utf-8"?>
<alpha xmlns:android="http://schemas.android.com/apk/res/android"
    android:duration="1000"
    android:fromAlpha="0.0"
    android:interpolator="@android:anim/accelerate_interpolator"
    android:toAlpha="1.0" /> 
```

这是淡出：

```
<?xml version="1.0" encoding="utf-8"?>
<alpha xmlns:android="http://schemas.android.com/apk/res/android"
    android:duration="1000"
    android:fromAlpha="1.0"
    android:interpolator="@android:anim/accelerate_interpolator"
    android:toAlpha="0.0" /> 
```

我通常将这条线放在附近`onCreate()`：

```
public void onCreate(Bundle savedInstanceState) {
    String status;
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    setContentView(R.layout.introalev);
    overridePendingTransition(R.anim.fadein, R.anim.fadeout);

    // ...
} 
```

关于如何解决这个问题的任何想法，所以我不必每次都清理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T02:08:25.760

我实际上找到了一个答案，尽管它可能不会被编码人员算作正确答案，但它解决了我所问的主要问题是没有发生。我可能不得不使用 API 级别，它说需要 5，而我的最低要求是 4，所以我不确定

但是在那里我看到了一个快速编辑，在我选择的这个项目中不搜索这个问题.....

这冒犯了我认识的人。

在我的辩护中，它似乎只是检查没有找到它并给出错误的东西，但是一旦我进行清理，代码运行良好，所以如果它是一个严重错误，它应该再次停止它，但这不会发生所以我在想类似于警告错误的东西。所以我的问题得到了解决，尽管可能不是最好的方式。

# javascript - datatables - 在加载完整数据集时预加载第一页数据

> ID：15102412
> 
> 赞同：3
> 
> 时间：2013-02-27T01:05:07.353
> 
> 标签：javascript, jquery, datatables

我正在寻找以前做过类似事情的人的一些建议：

我正在使用 datatables.js 来显示一个大约 10,000 行的完整表格，因此它加载缓慢（5-7 秒）并给出“脚本没有响应”弹出窗口 - 不是一个好的用户体验

我希望加载完整的数据集以使用内置的搜索过滤器以及一些自定义过滤器，因此 ajax 抓取分页、过滤器等数据是不可取的。（我们喜欢活泼，一旦加载数据，过滤可能会非常激烈）

我做了一些实验并认为也许：

-- 加载只有几条记录的第一页 -- 同时，在页面加载时执行后台 ajax 调用以构建第二个完整表 -- 最后，当数据存在时，用 ajax 构建的表替换初始表一——prolly需要重新绑定一些东西

在花费所有时间进行设置和检查之前，有没有人这样做过或者可以提供不同的建议？

TIA,

杰夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-12T10:26:07.703

正如@yuwang 所说，这就是 DataTables 的工作方式。我们自己也遇到过这个问题——问题是 DataTables 的初始化速度很慢，大约 4000 条记录似乎是大多数浏览器的障碍。在我们的应用程序中，我只是将限制设置为 4000 - DataTables 视图主要是为了方便，人们可以进行更窄的搜索。服务器端处理不是真正的解决方案。

关于“*加载只有几条记录的第一页 - 同时，在页面加载时执行后台 ajax 调用以构建第二个完整表*”，试试这个：

**server.php，`brief=yes`如果只加载前 100 条记录，则调用**

```
<table id="test-table">
<thead>
  <th>id</th>
  <th>date</th>
  <th>text</th>
</thead>
<tbody>
<?
function getColumn() {
    $row='<tr>';
    $row.='<td>'.rand(1, 100000).'</td>';
    $row.='<td>'.date("Y-m-d H:i:s", mt_rand(1232055681, 1762855681)).'</td>';
    $row.='<td>'.str_shuffle('abcdefghijklmnopqr').'</td>';
    $row.='</tr>';
    return $row;
}
$count=(isset($_GET['brief'])) ? 100 : 10000;
for ($i=0;$i<$count;$i++) {
    echo getColumn();
}
?>
</tbody>
</table> 
```

**完整的工作示例（复制和粘贴）**

```
<!DOCTYPE html>
<html lang="en">
<head>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js" ></script>
    <link rel="stylesheet" type="text/css" href="http://ajax.aspnetcdn.com/ajax/jquery.dataTables/1.9.4/css/jquery.dataTables.css">
    <script type="text/javascript" charset="utf8" src="http://ajax.aspnetcdn.com/ajax/jquery.dataTables/1.9.4/jquery.dataTables.min.js"></script>
<script>
$(document).ready(function() {
    $.ajax({
        url: 'server.php?brief=yes',
        success : function(html) {
            $('#table-container').html(html);
            $("#test-table").DataTable();
            $.ajax({
                url: 'server.php',
                success : function(html) {
                    $('#table-container').html(html);
                    $("#test-table").DataTable();
                }
            });
        }
    });
});
</script>
</head>
<body>
  <div id="table-container"></div>
</body>
</html> 
```

当然，在 server.php 中，记录的内容总是会发生变化，当您从数据库（或其他）加载记录时，情况并非如此

# c# - 初始化下拉列表 - 使其保持不变

> ID：15102413
> 
> 赞同：2
> 
> 时间：2013-02-27T01:05:27.987
> 
> 标签：c#, asp.net, asp.net-mvc-4

在我的 mvc4 应用程序中，我在页面上设置了下拉列表，像这样注册

在 AccountModel.cs 的 HttpGet Register 方法中，我用这段代码初始化了它的数据

```
public ActionResult Register()
{
   MyModel mm=new MyModel();
   mm.mydropdown=new []
   { 
      new SelectListItem{Value="value", Text="text"}
      ////...
   };
} 
```

只有当此页面加载时，该代码才会运行；但是在任何地方我都可以插入必须编译的代码片段并`mydropdown`始终在应用程序中进行初始化，这样我就不必在`[HttpPost]`方法中重写它？

**[更新]** 这是`mymodel`课程

```
public class Register
{
   [Required(ErrorMessage="Option is required")]
   public string option;

   public IEnumerable<SelectListItem> Options;
} 
```

就我而言，我`option`像这样在cshtml中使用

`@Html.DropDownListFor(m=>m.option, Model.Options,"Select an item")`

在`HttpPost`注册方法中，我必须重新初始化选项，否则我会遇到错误“ `Option is of type string but it must be IEnumerable<SelectListItem> instead`”，否则

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T01:14:44.850

你可以扩展`IEnumerable<SelectListItem>`并这样做

```
public class MyDropDownList : IEnumerable<SelectListItem> 
{
    public MyDropDownList()
    { 
          SelectedListItem item = new SelectListItem{Value="value", Text="text"};
          this.Add(item);
    }
} 
```

或者，您可以将其写入`MyModel`

```
public class Register
{
    [Required(ErrorMessage="Option is required")]
    public string option;

    public IEnumerable<SelectListItem> Options;
    public Register()
    {
         this.Options = new []
         { 
            new SelectListItem{Value="value", Text="text"}
            ////...
         };
    }
}
public ActionResult Register()
{
   Register mm = new Register();
} 
```

# java - 为什么DelayQueue没有Delayed的默认java实现？

> ID：15102414
> 
> 赞同：1
> 
> 时间：2013-02-27T01:05:35.080
> 
> 标签：java, events, delay, runnable, future

我想要一个[`DelayQueue`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/DelayQueue.html)预定`Runnable`的 s，其中每个`Runnable`s 应该只在预先指定的某个时间点之后运行。因此，一个线程可以继续从该队列中删除可运行对象并处理一系列事件。为什么没有好的默认实现[`Delayed`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Delayed.html), 也就是`Runnable`, 为此？

唯一`Delayed`看起来合理的子接口是[`RunnableScheduledFuture`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/RunnableScheduledFuture.html)，它有一大堆随机的东西需要实现。必须有一种更简单的方法来做到这一点，对吧？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T01:19:19.870

DelayQueue 更像是一个基础设施类，应用程序不直接使用。

您可能最好使用 ScheduledExecutorService（它在内部使用 DelayQueue 的变体）

# javascript - 通过自定义排序脚本保留字符串值位置所需的 Javascript 帮助

> ID：15102417
> 
> 赞同：0
> 
> 时间：2013-02-27T01:05:58.390
> 
> 标签：javascript, string, variables, split, sorting

我有一个字符串变量，定义如下：

`Jane's Account-123456789-Bob's Account-123456-Fred's Account-246802-Lily's Account-13579-Jim's Account-46748764-`

为了这个问题，假设等于`var value1;`

我正在尝试获取此字符串并运行一个查询，该查询将找到匹配的帐号，然后显示关联的帐户名称。为此，我首先将变量拆分为一个数组：

`var value2=value1.split("-");`

当我这样做时，排序功能通过增加数字然后按字母顺序重新排序列表。

`value2 = ,123456789,13579,246802,46748764,46748764,Bob's Account,Fred's Account,Jane's Account,Jim's Account,Lily's Account`

我想知道如何将字符串分解成一个数组并仍然保持拆分材料的顺序。

这将是所需的输出：

`,Jane's Account,123456789,Bob's Account,123456,Fred's Account,246802,Lily's Account,13579,Jim's Account,46748764`

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T01:41:34.727

我想知道是否可以更好地格式化该数据字符串。它来自哪里？它不能只以 JSON 格式传递给您吗？那将是A计划。

B计划是自己解析，把结构变成对象数组之类的东西：

```
var value1 = "Jane's Account-123456789-Bob's Account-123456-Fred's Account-246802-Lily's Account-13579-Jim's Account-46748764-";

// get rid of the last hyphen
value1 = value1.replace(/-$/, '');

// split up the input
var parts = value1.split('-');

// build the new structure
var accounts = [];
for (var i=0; i < parts.length; i+=2) {
    accounts.push({'name': parts[i], 'number': parts[i + 1]});
}

alert(JSON.stringify(accounts));

// sort accounts by name
accounts.sort(function (a, b) {
    if (a.name == b.name) return 0;
    if (a.name > b.name) return 1;
    return -1;
});

alert(JSON.stringify(accounts)); 
```

[jsfiddle](http://jsfiddle.net/Eh6Dk/1/)

# c# - 如何从 DependencyResolver 引用 X DI 框架中的命名绑定？

> ID：15102421
> 
> 赞同：1
> 
> 时间：2013-02-27T01:06:26.627
> 
> 标签：c#, .net, dependency-injection, autofac

我正在使用 Autofac 使用命名绑定将多个具体类型注册到单个接口：

```
var builder = new ContainerBuilder();

builder.RegisterType<AlphaProvider>().Named<IProvider>("A");
builder.RegisterType<BetaProvider>().Named<IProvider>("B");

var container = b.Build();

DependencyResolver.SetResolver(new AutofacDependencyResolver(container)); 
```

现在，我需要按名称（“A”或“B”）引用具体类型，但看不到使用 .NET 的方法`DependencyResolver`。

```
DependencyResolver.Current.GetServices<IProvider>() //<-- How do I get via name? 
```

有没有办法使用名称来获取绑定`DependencyResolver`？

# macos - MAC 上有哪些编程语言可用于 Web 编程

> ID：15102423
> 
> 赞同：0
> 
> 时间：2013-02-27T01:06:48.750
> 
> 标签：macos

我正在从 PC 转换到 MAC，并想知道我仍然需要哪些选项来开发网站。我通常使用 c# 创建网站，但除了 C#，我在 macintosh 上还有哪些其他选项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T01:10:27.993

我想说Ruby（Ruby on Rail）很常见。你还有 PHP、Python。如果您想要一些示例，请尝试[CodeCademy](http://www.codecademy.com/#!/exercises/0)或[CodeSchool](http://codeschool.com)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T01:16:33.443

MAC 是比 Windows 更好的开发环境（Web）。这是因为它是`nix`。我使用 PC 多年，我在 MAC 上感觉更舒服。例如，您可以轻松地手动设置 PHP（appache、mysql）的工作环境，并且您可以更好地控制您所做的一切。默认情况下，Mac 已安装 Python，因此您可以轻松创建 Web 工作环境。还有Ruby等。

Git + Editor(Textmate, Sublime) + Web = 完美组合。

# java - 编译错误：“找不到符号”

> ID：15102424
> 
> 赞同：0
> 
> 时间：2013-02-27T01:06:53.677
> 
> 标签：java

我正在为一堂课编写抛硬币程序。我在使文本在每个网格中居中时遇到问题。网格布局为 3 x 3，但每个网格中的文本“H”或“T”左对齐。这是创建网格的代码。

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;

class Lab3Panel extends JPanel {

    Lab3Panel() {
        setLayout(new GridLayout(3, 3, 1, 1));

        Lab3Label[] label = new Lab3Label[9];
        label.setHorizontalTextPosition(SwingConstants.CENTER);
        label.setVerticalTextPosition(SwingConstants.CENTER);

        for (int i = 0; i < 9; i++) {
            label[i] = new Lab3Label(i);
            add(label[i]);
        }
    }
} 
```

我得到的错误是：

```
Lab3Panel.java:15: error: cannot find symbol label.setHorizontalTextPosition(SwingConstants.CENTER);
                                                  ^ 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T01:08:54.730

您正在调用`setHorizontalTextPosition`数组对象的方法，而您应该在其条目之一上调用它。

就像是：`label[0].setHorizontalTextPosition`

但是为了能够编译上述语句，该类`Lab3Label`必须从它的超类之一定义或继承该方法`setHorizontalTextPosition`。

我认为这是你需要的：

```
Lab3Label[] label = new Lab3Label[9];
for (int i = 0; i < 9; i++) {
    label[i] = new Lab3Label(i);
    label[i].setHorizontalTextPosition(SwingConstants.CENTER);
    label[i].setVerticalTextPosition(SwingConstants.CENTER);
    add(label[i]);
} 
```

# jquery - 搜索数组 inArray 但忽略大小写

> ID：15102429
> 
> 赞同：2
> 
> 时间：2013-02-27T01:07:22.287
> 
> 标签：jquery, input, case-insensitive

希望我提供了一个明确的标题。

我正在创建一个包含所有选项、修剪空白和存储的数组。（如果我在我的过程中错了，请纠正我）。在输入更改时，如果选项数组返回 false，则清除下一个字段，否则，存储唯一的新值并放置在下一个字段中。

如果数组包含：

```
blue
black
brown 
```

我搜索 BLUE 或 Blue 或 BLue...等，结果返回 false。我想我要求不区分大小写的逻辑，但不确定如何合并。

我已经在反复试验中完成了这一切，所以如果您的时间分配，请随时改进。此外，这需要在 jquery 1.3 的规范内

[http://jsfiddle.net/arkjoseph/dRpmq/2/](http://jsfiddle.net/arkjoseph/dRpmq/2/)

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T01:11:58.257

由于看起来您可以控制这些值（并将它们设为小写），因此您可以从以下位置进行非常简单的更改：

`if (($.inArray((this.value), option) > 0)`

至

`if (($.inArray((this.value.toLowerCase()), option) > 0)`

演示在[http://jsfiddle.net/dRpmq/3/](http://jsfiddle.net/dRpmq/3/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-10-30T12:03:49.073

从[数组中不区分大小写的搜索](http://www.codeplussoft.com/Snippets/javascript-search-inarray)JavaScript 提供了一个方法 indexOf() 用于从数组中搜索对象，但这是区分大小写的。

Jquery 提供了一个方法 jQuery.inArray() 来搜索数组中的对象，但这也是区分大小写的，即“a”不等于“A”。所以我们必须创建自己的函数，以下是一个小的 javascript 函数，如果在数组中找到对象，则返回对象的索引，否则返回 -1，这是不区分大小写的方法

# java - 处理 draw() 方法使用不工作

> ID：15102432
> 
> 赞同：0
> 
> 时间：2013-02-27T01:07:51.393
> 
> 标签：java, processing

我有代码可以改变 PShape 的颜色和不透明度，我正在调试它，我 99% 确定所有方法都有效。我做了一个延迟方法，因为处理不再有一个内置的延迟方法。当我调试它时，我注意到它只会在所有延迟调用完成后绘制它应该绘制的内容（当没有更多延迟时，它会绘制最新版本的 PShape）。所以我查看了我的延迟方法，我弄乱了它，但仍然没有正确的结果。有人可以向我解释为什么 PShape 没有更新吗？

编辑* 我收到一个告诉我使用 noLoop() 的答案，我用谷歌搜索了如何使用它，但我似乎找不到正确的放置位置。我已经在设置中尝试了 flash 方法的第一行（但后来我意识到我有没有更新的实时按钮）

下面的代码使 PShape 闪烁两次：

```
 noLoop();      
root.setVal(newVal);
root.highlight(0,255,0);
root.setopacity(200);
redraw();
try {Thread.sleep((long)1500);} 
catch (InterruptedException ex) {println("Error!");}
root.setopacity(0);
redraw();
try {Thread.sleep((long)1500);} 
catch (InterruptedException ex) {println("Error!");}
root.setopacity(200);
root.clearHL();//just to make sure I repeated these methods
root.highlight(0,255,0);
redraw();
try {Thread.sleep((long)1500);} 
catch (InterruptedException ex) {println("Error!");}
root.clearHL();
redraw();
loop();
return root; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T01:10:32.523

您需要显示更多代码（例如`setup`函数），
但是您的问题似乎源于您`noLoop();`在尝试手动重绘对象之前可能没有调用的事实。

这将导致对象在被处理自动重绘覆盖之前闪烁一帧。

顺便说一句，如果您愿意，您可以将 a`Timer`用于诸如延迟之类的事情。

或使用`Sleep`：

```
import java.lang.Thread.*;

noLoop();
root.setVal(newVal);
root.highlight(0,255,0);
root.setopacity(200);
redraw();
Thread.sleep(1500);;
root.setopacity(0);
redraw();
Thread.sleep(1500);
root.setopacity(200);
root.clearHL();//just to make sure I repeated these methods
root.highlight(0,255,0);
redraw();
Thread.sleep(1500);
root.clearHL();
redraw(); 
```

# mysql - 如何在整个 MySQL 脚本上假设一个表前缀？

> ID：15102436
> 
> 赞同：2
> 
> 时间：2013-02-27T01:08:10.663
> 
> 标签：mysql, sql, prefix

我有一个脚本要在我的数据库中运行。但问题是这个脚本假设表上没有前缀并且所有数据库都有一个前缀（我们称之为**prefix_**）。

是否有命令或方法让 MySQL 尝试运行

```
INSERT INTO prefix_mytable ... 
```

代替

```
INSERT INTO mytable... 
```

对于脚本中的所有 sql 查询（UPDATE、INSERT 和 DELETE）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T01:38:24.847

MySQL 中无法按照您描述的方式自动为表添加前缀。@MichaelBerkowski 是正确的。

我能建议的最好的方法是创建第二个具有可更新视图的数据库，使用不带前缀的名称作为前缀表名的前端。

这是一个例子：

```
mysql> CREATE DATABASE test;
mysql> CREATE TABLE test.prefix_mytable (id INT PRIMARY KEY, x VARCHAR(20));
mysql> CREATE DATABASE test2;
mysql> CREATE VIEW test2.mytable AS SELECT * FROM test.prefix_mytable; 
```

现在您可以使用不带前缀的名称插入：

```
mysql> INSERT INTO test2.mytable (id, x) VALUES (123, 'abc'); 
```

并验证数据是否已插入到您的原始表中：

```
mysql> SELECT * FROM test.prefix_mytable; 
```

一旦你这样做了，你就可以对数据库运行你的 SQL 脚本，`test2`并且所有的 INSERT 都应该可以正确地到达你的原始表。

如果您有很多需要为其创建视图的表，则可以自动创建 CREATE VIEW 语句：

```
mysql> SELECT CONCAT('CREATE VIEW test2.', REPLACE(TABLE_NAME, 'prefix_', ''), 
  ' AS SELECT * FROM test.', TABLE_NAME, ';') AS _sql 
  FROM INFORMATION_SCHEMA.TABLES 
  WHERE TABLE_SCHEMA='test' AND TABLE_NAME LIKE 'prefix\_%'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-11T08:35:39.137

这是将 WordPress 表前缀从 wp_ 替换为不同的指南，像这样您可以更新任何 mysql 表。[如何重命名 WordPress 表前缀？](http://www.w3update.com/cms/wordpress/how-to-rename-wordpress-tables-prefix.html)

# algorithm - 如何计算就地外部合并排序的时间？

> ID：15102438
> 
> 赞同：1
> 
> 时间：2013-02-27T01:08:38.740
> 
> 标签：algorithm, bigdata, external-sorting

原来的问题是这样的：
你要对 1PB 大小的整数进行排序，范围是 -2^31 ~ 2^31 - 1 (int)，你有 1024 台机器，每台机器有 1TB 磁盘空间和 16GB 内存空间。假设磁盘速度为 128MB/s (r/w)，内存速度为 8GB/s (r/w)。CPU时间可以忽略。为简单起见，可以忽略网络传输时间。计算所需的近似时间。

我知道通过外部排序，我们可以在大约 10 小时内对单台机器上的 1TB 数据进行排序，计算如下：

磁盘访问（2r2w）：1T * 4 / 128MB/s = 2 ^ 15 sec ~ 9 hrs
内存访问：
将 2^48 个整数分成 64 个部分（每个 2 ^ 42 个）大约需要 1.3 分钟。所以总共1.4小时。
63 路合并需要几秒钟，因此被忽略。

但是下一步呢：1024T数据的组合呢？我不知道这是如何计算的。那么有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T01:20:41.693

2^31 = 20 亿（2“千兆”）。因此，您正在查看大量重复数字和固定范围。所以考虑基数排序（[http://en.wikipedia.org/wiki/Radix_sort](http://en.wikipedia.org/wiki/Radix_sort)）。

每个处理器，对于一个子集 od 数据）创建“计数”数组（x[0] 包含 0 的计数等）。然后您可以将所有结果合并到一个数组中。稍后您可以“构造”排序后的数组。

# sql - 如何在 SQL Server 中选择特定的列名

> ID：15102439
> 
> 赞同：2
> 
> 时间：2013-02-27T01:08:45.307
> 
> 标签：sql, sql-server, select, columnname

这是我之前关于如何在 SQL Server 中迭代字符串的问题：

现在我该如何专门选择列名？这是我选择列的代码：

```
SELECT 'Field '+CAST(ROW_NUMBER() OVER (ORDER BY ordinal_position) AS varchar(5))+': ' + 
COLUMN_NAME
FROM information_schema.columns 
WHERE table_Name = 'SystemDefined' and table_schema = 'schemaAsset' 
```

这是输出：

```
Field 1: Asset_No
Field 2: AssetCategory
Field 3: AssetClassification
Field 4: PurchaseType
Field 5: Department
Field 6: RespPerson
Field 7: Status
Field 8: Location 
```

这是我在选择特定列名时想要的输出：

```
Field 1: Asset_No
Field 2: AssetCategory
Field 3: AssetClassification
Field 4: PurchaseType
Field 5: Department
Field 6: RespPerson
Field 7: Status 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T01:13:33.343

如何使用`NOT IN`可以在`WHERE`子句上使用的来指定另一个条件。

```
SELECT...
FROM..
WHERE  table_Name = 'SystemDefined' AND 
       table_schema = 'schemaAsset' AND
       COLUMN_NAME NOT IN ('Status',....) --  specify the list of names you
                                          -- don't want to show 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T01:14:16.477

除非我遗漏了什么，否则您可以只使用一个`WHERE`子句来排除您不想要的列：

```
SELECT 'Field '
  + CAST(ROW_NUMBER() OVER (ORDER BY ordinal_position) AS varchar(5))+': ' 
  + COLUMN_NAME
FROM information_schema.columns 
WHERE table_Name = 'SystemDefined' 
  and table_schema = 'schemaAsset'
  and COLUMN_NAME <> 'Location' 
```

如果您有多个列，那么您可以使用`NOT IN ('Location', 'etc')`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T03:05:03.430

推荐`sys.columns`而不是`INFORMATION_SCHEMA`（[这就是为什么](https://sqlblog.org/2011/11/03/the-case-against-information_schema-views)）。

```
SELECT 'Column ' 
  + CONVERT(VARCHAR(5), ROW_NUMBER() OVER (ORDER BY column_id))
  + ': ' + name
FROM sys.columns
WHERE [object_id] = OBJECT_ID(N'schemaAsset.SystemDefined')
AND name NOT IN ('Location' /* , ... other columns ... */)
ORDER BY column_id; -- because you never know how SQL Server might order 
```

# excel - 从 Excel 导入到 MS Project

> ID：15102440
> 
> 赞同：0
> 
> 时间：2013-02-27T01:08:53.317
> 
> 标签：excel, vba, sharepoint-2010, ms-project

首先是问题：我只是想将一个 MS Project 计划导出到 excel，然后将其导入回项目中。大多数情况下一切正常（我根据任务 ID 创建了一个带有主键的映射）。但是，如果我有一项任务在 % 完成字段中说 20%，则在导入 MS Project 时将其标记为 100% 完成。当我查看导出时，它在 % complete 字段中包含 .2000000001 我尝试将其更改为 .2、20% 等，但我认为这个字段甚至没有什么不同。

我认为问题在于有一个带有日期值的实际开始日期，但完成日期是 12:00:00 AM（与其他没有值的实际日期相同）。出于某种原因，MS Project 添加了实际完成日期以匹配计划的完成日期。如果我将值更改为 0、空白或“NA”，它不会提取实际开始日期并将任务标记为 0% 完成。我在想 % complete 值实际上并没有导入，只是根据实际日期计算出来的。任何帮助或解释将不胜感激！

关于我正在尝试做的事情的背景，以防万一有人对此有更好的想法：我的团队有一个用于跟踪可交付成果的 SharePoint 列表。在此列表中，有不同类型审核（同行、团队负责人、签字）的计划日期和实际日期。我想在这些列表项之间创建一个映射，提取此列表的 Excel 提取物，提取项目计划的 Excel 提取物，使用 VBA 更新任务完成百分比，然后将 Excel 项目计划重新导入 MS 项目。

（顺便说一句，所有软件都是2010版本）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T23:48:21.437

找到答案，您需要将项目任务导出到 Excel，至少包括实际持续时间、唯一任务 ID 和完成百分比字段。最好以编程方式执行此操作，以便您可以在 excel 工作簿中包含一个公式，以便更改完成百分比将正确更新实际持续时间。然后，将任务列表导入回项目中。

导入时：

1.  合并任务
2.  使唯一的任务 ID 成为关键
3.  仅导入实际持续时间

您的完成百分比是根据实际持续时间计算的，因此现在应该更新。

# android - 更改操作栏阴影渐变的颜色

> ID：15102443
> 
> 赞同：0
> 
> 时间：2013-02-27T01:09:03.173
> 
> 标签：android, actionbarsherlock, android-xml, android-theme

我想更改出现在底部的阴影渐变的颜色`Action Bar`。我正在使用`ActionBarSherlock`.

我查看了 XML 资源，试图确定这个形状的定义位置，但我感觉有点不知所措。有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T01:12:04.770

> 我查看了 XML 资源，试图确定这个形状的定义位置

它们未定义为 XML 形状。ActionBar/ABS 使用 9Patches。

您可以使用[ActionBar 样式生成器](http://jgilfelt.github.com/android-actionbarstylegenerator/)。它将为您生成所有样式和 9Patches。

# redis - 与 redis 的连接超时

> ID：15102446
> 
> 赞同：6
> 
> 时间：2013-02-27T01:09:18.730
> 
> 标签：redis

```
$ redis-cli -h ec2-75-101-204-XXX.compute-1.amazonaws.com
Could not connect to Redis at ec2-75-101-204-XXX.compute-1.amazonaws.com:6379: Operation timed out 
```

这就是我从我的主机得到的。我将该机器上的安全组设置为对端口 6379 开放。

当我在 redis 服务器上运行 netstat 时，我看到它正在监听：

```
$ netstat -nlp
(No info could be read for "-p": geteuid()=1000 but you should be root.)
Active Internet connections (only servers)
Proto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name
tcp        0      0 127.0.0.1:6379          0.0.0.0:*               LISTEN      -               
tcp        0      0 0.0.0.0:22              0.0.0.0:*               LISTEN      -               
tcp6       0      0 :::22                   :::*                    LISTEN      -               
udp        0      0 0.0.0.0:68              0.0.0.0:*                           -               
Active UNIX domain sockets (only servers) 
```

我的`redis.conf`样子：

```
daemonize yes
pidfile /var/run/redis.pid
port 6379
timeout 300
loglevel notice
logfile /var/log/redis.log
databases 16

save 900 1
save 300 10
save 60 10000

stop-writes-on-bgsave-error yes
rdbcompression yes 
```

那么为什么我会从另一台机器超时呢？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-27T01:45:29.977

redis 仅在 localhost 端口上侦听：`127.0.0.1:6379`.

你需要配置 redis 来绑定`0.0.0.0`。

在 redis.conf 中（最有可能在`/etc/redis/redis.conf`，替换（或添加，如果不存在）

```
bind 127.0.0.1 
```

和

```
bind 0.0.0.0 
```

# php - 来自 smarty 模板的表单发布操作

> ID：15102451
> 
> 赞同：1
> 
> 时间：2013-02-27T01:09:56.727
> 
> 标签：php, jquery, forms, post, smarty

我有以下问题...

我的应用程序使用 php、smarty 模板和 jQuery。

在 smarty 模板中定义了一个带有 POST 方法的表单。表单的action参数定义如下：

动作={if isset($search_place)} {link->somePhpFunction($search_place) {/if}

...因为我需要根据 POSTED 参数更改操作。

具有“search_place”名称的输入（文本）在表单内定义。

提交按钮链接到 jQuery 函数，因为我需要在客户端执行一些操作（值检查、自动完成等）。

单击按钮时，我需要
问题是当我通过jQuery按钮发布表单时，表单不会采取

单击按钮时，将调用 jQuery 处理程序，执行一些检查/更正，然后显示带有表单的页面。

问题是，在从表单定义 action 参数之前，search_place 变量是未知的，并且根本没有调用 php 函数。我还尝试在按钮处理程序中设置一个 cookie，并将表单操作设置为 {$smarty.cookies.search_place} 值，但问题变成了另一个问题 - 表单始终执行上一个按钮单击的操作，所以它需要两次单击按钮才能获得正确的结果。

还需要提到的是，由于 php 函数从数据库中的大表中选择了正确的参数，因此无法将所需的操作参数传递给 jQuery 事件处理程序。如果这是可能的，那么很容易从 jQuery 函数中更改 action 参数......

我知道的唯一方法是使用 AJAX 获取正确的参数并从按钮事件处理程序分配正确的操作参数，但这对我来说不是正确的解决方案，因为我的许多网站访问者都没有启用浏览器 javascipt。

解决方案也可以是（以编程方式）从 jQuery 事件处理程序中再单击一次按钮，但我不知道该怎么做......

任何帮助或想法如何解决这个问题将不胜感激......

先感谢您。果酱

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T01:13:14.520

尝试以下操作：

```
<form onsubmit="return validationFunction()"> 
```

并让此函数验证数据，如果正确则返回 true，否则返回 false。

现在为js。不要打电话给类似的东西

```
$("#someForm").submit(); 
```

改为使用：

```
if(validationFunction()){
   $("#someForm").submit();
} 
```

**更新**

最后，如果您的 validationFunction 将做一些服务器端工作

然后取而代之的是一些变量，例如

var formSubmitted = false;

然后 onSubmit 返回 false；并将formSubmitted设置为true，然后进行ajax调用，当ajax调用完成后，检查formSubmitted是否为true，如果不是则提交表单，然后显示一些错误......

# .net - 批量操作后 DbContext 非常缓慢

> ID：15102454
> 
> 赞同：0
> 
> 时间：2013-02-27T01:10:14.327
> 
> 标签：.net, entity-framework, entity-framework-5, dbcontext

似乎 EntityFramework 中的 DbContext 越来越慢，您在其上执行的操作（添加、删除、修改、查询）越多。几次操作后定期调用 SaveChanges() 不会解决该问题。唯一的解决方法是释放上下文并重新生成它。

向您传达一个想法：使用一个 DbContext 的过程大约需要 4 小时，而带有变通方法的代码只需要大约 45 分钟，所以这真的很重要！是否有我不知道的原因或开关？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T04:24:58.780

[这是EF5 性能注意事项](http://msdn.microsoft.com/en-us/data/hh949853)的有用链接。

您是否使用更改跟踪代理？如果没有，您也许可以加快速度。从链接：

> 当 POCO 实体没有更改跟踪代理时，通过将实体的内容与先前保存的状态的副本进行比较来找到更改。当您的上下文中有许多实体时，或者当您的实体具有大量属性时，这种深度比较将成为一个漫长的过程，即使自上次比较以来它们都没有改变。

否则，您可以`DbContextConfiguration.AutoDetectChangesEnabled = false`按照评论和链接中的建议进行设置。`DetectChanges()`在完成一些通常会自动调用它的密集 DbSet/DbContext 方法调用后，您仍然可以显式调用。

您还可以减少上下文中的实体数量吗？如果您有一些不需要由 ObjectStateManager 跟踪的实体，也许可以使用 AsNoTracking() 查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T04:33:30.940

> 似乎 EntityFramework 中的 DbContext 越来越慢，您在其上执行的操作（添加、删除、修改、查询）越多。

绝对可以 - 您的 DbContext（以及它所基于的 ObjectContext）保存了它曾经接触、加载、更新、保存的每个实体。

[MSDN 博客文章](http://blogs.msdn.com/b/alexj/archive/2009/05/07/tip-18-how-to-decide-on-a-lifetime-for-your-objectcontext.aspx)的快速摘录：

> 您使用 ObjectContext 的次数越多，它通常就越大。这是因为它包含对它所知道的所有实体的引用，基本上是您查询、添加或附加的任何内容。所以你应该重新考虑无限期地共享同一个 ObjectContext。

由于您说该过程大约需要 4 个小时，我假设您有数千个正在修改的实体。Save Changes 不会转储对象图，您只是在创建越来越多的对象以供跟踪。每次进行更改时，都必须遍历图形，因此图形越大，所需的时间就越长。

您的解决方法真的是糟糕的代码吗？是否有一种方法可以拆分您的流程，以便每个部分创建和处理它自己的 DbContext 而不是共享一个？

# java - GWT/Mysql/Java 连接到数据库

> ID：15102458
> 
> 赞同：0
> 
> 时间：2013-02-27T01:10:38.460
> 
> 标签：java, mysql, gwt

我对 gwt 还很陌生，弄清楚与 mysql 数据库的连接让我很难过。由于很少有直接的教程，我一直在这里讨论另一个 stackoverflow 问题。

```
http://stackoverflow.com/questions/8335322/java-gwt-mysql-connection-refused/8388422#8388422 
```

虽然我不能正确。很少有事情，这个项目没有使用 GAE，只是 GWT，正如在另一个问题中的先前答案所建议的那样。是的，我可以通过另一个示例程序连接到我的数据库，所以到数据库的链接是打开的。我还将我的 mysql 驱动程序导入到 /WEB-INF/lib，并将其添加到我的 java 构建路径中。

关键是，我不知道为什么我无法连接，而且我的控制台也没用，如果有人能立即看到我做错了什么，那就太好了，或者如果有办法打印出更多的错误消息，这会很棒，而且我不知道如何查看服务器端资源的控制台（我在某处读到，错误可能比显示的更多？）谢谢。

这是我的 GreetingServiceImpl.java 相关代码

```
 private final Connection connect() {
    String driver = "com.mysql.jdbc.Driver";
    String dblink = "jdbc:mysql://localhost:3306/";
    String dbname = "gwttest";
    String dbuser = "user";
    String dbpass = "test";
    try {
      Class.forName(driver).newInstance();
    } catch (InstantiationException e) {
      e.printStackTrace();
    } catch (IllegalAccessException e) {
      e.printStackTrace();
    } catch (ClassNotFoundException e) {
      e.printStackTrace();
    }
    Connection conn = null;
    try {
      conn = DriverManager.getConnection(dblink + dbname, dbuser, dbpass);

    } catch (SQLException e) {
      System.err.println("mysql connection error: ");
      e.printStackTrace();
    }
    return conn;
  } 
```

这是我的 helloserver.java 相关代码

```
Button b = new Button("test");
vPanel.add(b);
b.addClickHandler(new ClickHandler() {
  @Override
  public void onClick(ClickEvent event) {
      GreetingServiceAsync testservice= (GreetingServiceAsync) GWT.create(GreetingService.class);
    testservice.echo("test", new AsyncCallback<String>() {

        @Override
        public void onFailure(Throwable caught) {
            // TODO Auto-generated method stub
             vPanel.add(new Label("error"));
             //vPanel.add(new Label(caught.printStackTrace());
             caught.printStackTrace();
        }

        @Override
        public void onSuccess(String result) {
            // TODO Auto-generated method stub
            vPanel.add(new Label(result));
        }

    });
  }
}); 
```

这是我在运行并单击按钮时收到的错误消息（除了在我的 html 中弹出的“错误”）

```
 com.google.gwt.user.client.rpc.StatusCodeException: 404 <html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"/>
<title>Error 404 NOT_FOUND</title>
</head>
<body><h2>HTTP ERROR: 404</h2><pre>NOT_FOUND</pre>
<p>RequestURI=/helloserver/greet</p><p><i><small><a href="http://jetty.mortbay.org/">Powered by Jetty://</a></small></i></p><br/>                                                
</body>
</html>
at com.google.gwt.user.client.rpc.impl.RequestCallbackAdapter.onResponseReceived(RequestCallbackAdapter.java:209)
at com.google.gwt.http.client.Request.fireOnResponseReceived(Request.java:287)
at com.google.gwt.http.client.RequestBuilder$1.onReadyStateChange(RequestBuilder.java:395)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at com.google.gwt.dev.shell.MethodAdaptor.invoke(MethodAdaptor.java:103)
at com.google.gwt.dev.shell.MethodDispatch.invoke(MethodDispatch.java:71)
at com.google.gwt.dev.shell.OophmSessionHandler.invoke(OophmSessionHandler.java:172)
at com.google.gwt.dev.shell.BrowserChannelServer.reactToMessagesWhileWaitingForReturn(BrowserChannelServer.java:338)
at com.google.gwt.dev.shell.BrowserChannelServer.invokeJavascript(BrowserChannelServer.java:219)
at com.google.gwt.dev.shell.ModuleSpaceOOPHM.doInvoke(ModuleSpaceOOPHM.java:136)
at com.google.gwt.dev.shell.ModuleSpace.invokeNative(ModuleSpace.java:571)
at com.google.gwt.dev.shell.ModuleSpace.invokeNativeObject(ModuleSpace.java:279)
at com.google.gwt.dev.shell.JavaScriptHost.invokeNativeObject(JavaScriptHost.java:91)
at com.google.gwt.core.client.impl.Impl.apply(Impl.java)
at com.google.gwt.core.client.impl.Impl.entry0(Impl.java:242)
at sun.reflect.GeneratedMethodAccessor23.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at com.google.gwt.dev.shell.MethodAdaptor.invoke(MethodAdaptor.java:103)
at com.google.gwt.dev.shell.MethodDispatch.invoke(MethodDispatch.java:71)
at com.google.gwt.dev.shell.OophmSessionHandler.invoke(OophmSessionHandler.java:172)
at com.google.gwt.dev.shell.BrowserChannelServer.reactToMessages(BrowserChannelServer.java:293)
at com.google.gwt.dev.shell.BrowserChannelServer.processConnection(BrowserChannelServer.java:547)
at com.google.gwt.dev.shell.BrowserChannelServer.run(BrowserChannelServer.java:364)
at java.lang.Thread.run(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T02:15:25.227

该错误表明 RPC 存在问题。数据库连接问题应该导致异常被序列化到客户端，而不是给出 404。检查 web.xml 和 servlet 是否配置正确。请参阅：[https](https://developers.google.com/web-toolkit/doc/latest/tutorial/RPC) ://developers.google.com/web-toolkit/doc/latest/tutorial/RPC 。

如果有任何 JDBC 错误，那么它们应该在 DevMode 窗口中可见，如果在服务器上运行，它们应该在服务器的日志目录中可见。看起来 GreetingServiceImpl 类根本没有到达，所以那里看不到任何东西。

将 JDBC 代码提取到单独的类中并与 GWT 分开测试可能更容易。在将所有内容组合在一起之前先做一件事。通过 main 方法或 JUnit 测试运行它，然后您就知道问题出在 JDBC 代码上还是其他地方。

# c++ - GLUT_ICON 在左上角窗口不起作用

> ID：15102459
> 
> 赞同：1
> 
> 时间：2013-02-27T01:10:41.007
> 
> 标签：c++, freeglut

我正在尝试添加一个使用 freeglut 的图标应用程序，根据[此处](http://freeglut.sourceforge.net/docs/api.php)的文档，拥有一个图标资源 GLUT_ICON 似乎就足够了。虽然它有效，但它只出现在控制台窗口的图标和 Windows 资源管理器中的可执行文件上，但主窗口仍保留默认的 Windows 图标（如图所示）。我尝试在没有控制台窗口模式的情况下进行构建，但我得到了相同的行为，这是它假设的工作方式还是出现了错误的行为？ ![没有图标的主窗口](../Images/de70c51e0eab687d33ee278f3860669c.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-09-26T09:27:46.917

这可能有助于解决其他遇到相同问题的人：

[https://www.gamedev.net/forums/topic/151647-opengl-glut-icon/](https://www.gamedev.net/forums/topic/151647-opengl-glut-icon/)

基本上，在添加ico资源后出现的“file.rc”资源文件（右键查看代码）中，你应该有

```
MAINICON ICON "compiler_assets\\icon-name.ico" //set main icon to "file" 
```

您应该添加另一行

```
GLUT_ICON ICON DISCARDABLE "compiler_assets\\icon-name.ico" 
```

这基本上是设置`GLUT_ICON`为特定的 .ico 文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T21:34:34.207

终于解决了这个问题。此问题是否来自 VStudio2012 环境尚不确定。但是像这样生成资源ID；GLUT_ICON 创建一个未定义的行为。该 exe 无法将此标记识别为有效标记，因此无法索引和找到任何图标。只需将字符串更改为小写，所有问题都会得到解决。我手动完成了这个过程，修复似乎在 PC 之间是一致的。

# node.js - 成熟的 WebSocket / Socket.io 服务器端实现？

> ID：15102461
> 
> 赞同：0
> 
> 时间：2013-02-27T01:10:55.673
> 
> 标签：node.js, websocket, socket.io, comet

我有通过 TCP 与专有消息通信的闭源服务器端软件。

我想为这个在 Safari 网络浏览器（iPad）中运行的服务器编写一个客户端。

我相信最好的方法是创建一个中间件程序，在 WebSocket 或 Socket.io 协议和服务器使用的专有格式之间进行转换。

我最喜欢用 C/C++ 或 Java 编写中间件，但其他可在 linux 上轻松使用的语言也可以。与服务器的连接不能在调用之间关闭，我们需要维护状态，所以像 php 这样的语言可能不合适。

我已经查看了六种服务器端 Socket.io 实现，但没有任何东西能够为黄金时段做好准备。

有哪些成熟的服务器端平台/库用于浏览器套接字实现？对我来说最重要的事情是：

1.  稳定性......它应该运行几个月而不重新启动
2.  维护和社区...没有死项目

虽然在这个领域似乎没有什么是真正成熟的，但任何关于生产系统最佳路径的提示都将受到赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T10:13:26.030

很难掌握您真正想从我们这里了解的内容。

> 我已经查看了六种服务器端 Socket.io 实现，但没有任何东西能够为黄金时段做好准备。

我相信node.js 的[http://socket.io/](http://socket.io/)相当稳定，被很多人使用，拥有庞大的社区，而且到目前为止还没有死。

# c++ - 如何重命名我不知道扩展名的文件？

> ID：15102463
> 
> 赞同：0
> 
> 时间：2013-02-27T01:11:16.760
> 
> 标签：c++, windows, rename

我有一个包含这些文件的目录：

```
one.txt
two.mp3
three.bmp 
```

有没有办法使用[MoveFile()](http://msdn.microsoft.com/en-us/library/aa365239%28VS.85%29.aspx)重命名文件但不指定文件的扩展名（所有文件都有不同的文件名）？

如果没有，当我只知道

```
one
two
three 
```

?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T01:18:11.083

您必须使用底层 OS API 来扫描目录中的文件并将每个文件名与所需的前缀进行比较。[这是另一个问题，它向您展示了如何在 Windows 中列出目录的内容。](https://stackoverflow.com/questions/2314542/listing-directory-contents-using-c-and-windows)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T01:13:01.877

一旦你知道前缀读取目录的文件列表并找到具有该前缀的有效文件名，并将该文件名与函数一起使用。

# php - 文章类别 - 多对多，一个 MAIN

> ID：15102465
> 
> 赞同：0
> 
> 时间：2013-02-27T01:11:36.403
> 
> 标签：php, jquery, model

我的客户需要为他的文章选择多个类别，但一个类别应该作为主要类别。

将关系建模为多对多并将列标志“is_main”添加到 article_category 表或使用一对多作为主类别会更好吗？

我也试图找到一些 jquery 小部件来轻松实现这样的功能。

我考虑过使用 jquery ui dragable 让他在 3 个 div 之间移动类别：文章主类别、文章常规类别和 cms 中可用的所有类别。

或者，我可以将选择用于主要类别，将复选框用于其余部分？

也许有一些现成的解决方案？

# c - 即使我输入正确的数据，为什么如果条件不起作用？

> ID：15102473
> 
> 赞同：1
> 
> 时间：2013-02-27T01:12:13.080
> 
> 标签：c

```
#include < stdio.h > 
#include < process.h > 
rec();
main() {
    int a, fact;
    char question, n, y;

    do {
        printf("\nEnter any number ");
        scanf("%d", & a);
        fact = rec(a);
        printf("Factorial value = %d\n", fact);
        printf("do you want to exit.....(y/n):");
        scanf("%s", & question);
    }
    while (question == n);
    exit(0);
}
rec(int x) {
    int f;
    if (x == 1) return 1;
    else f = x * rec(x - 1);
    return f;
} 
```

在这个程序中，我想得到输入数字的阶乘，我得到了。但我也希望用户说出是退出还是获取另一个数字的阶乘，这是我做不到的。它询问用户，但当我输入“n”时它退出。

错误在哪里？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T01:15:19.253

你要

```
while (question == 'n'); 
```

或者

```
char question, n = 'n', y = 'y'; 
```

虽然我发现第二个版本有点多余。

无论哪种方式你都需要改变

```
scanf("%s" 
```

到

```
scanf("%c" 
```

正确读取单个`char`而不是字符串。谢谢愤怒

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T01:21:57.197

一个问题是：

```
char question, n, y;

scanf("%s", &question); 
```

您正在使用`%s`将一个以空字符结尾的字符串读入单个字符。即使您点击“y”并返回，您也将覆盖变量末尾之外的内容。不是很好。（好消息是`"%s"`跳过空格，包括数字后的换行符）。

您要么需要使用`"%c"`以下格式：

```
char question;
scanf(" %c", &question);  // NB: The leading space is important! 
```

或者您需要使用字符串格式和字符串变量（并且没有`&`）：

```
char question[10];
scanf("%9s", question); 
```

如果使用数组，则需要考虑是否使用`strcmp()`，或者是否比较输入的第一个字符：

```
while (strcmp(question, "n") == 0);
while (question[0] == 'n'); 
```

编译器可能告诉您您没有声明变量`n`，所以您添加了它。您可能需要循环以`while (question == 'n'`);结尾。`and then get rid of the (now) unused variable`n `(and the currently unused variable`y`）。

请注意，如果您使用省略`" %c"`格式字符串中的空格：

scanf("%c", &question);

那么它通常会在数字之后获得换行符，而不是`'n'`，因此您的循环每次都会退出，显然无需等待您输入任何内容。您可以`scanf(" %c", &question);`在读取字符之前使用它跳过空格。

您应该`scanf()`在每次使用时测试是否收到了预期的输入。单项输入的正确测试是：

```
if (scanf(" %c", &question) != 1)
    ...input failed... 
```

如果您需要区分 EOF 和转换失败，您可以捕获返回 from `scanf()`：

```
int rc;
if ((rc = scanf(" %c", &question)) != 1)
    ...rc == EOF on EOF; rc == 0 on 'conversion failure'...
    ...a single character input can't easily fail...
    ...but if someone types 'a' instead of '9' when you're looking for a number... 
```

正确使用 I/O`scanf()`非常困难。许多有经验的程序员根本不使用它；很难做到正确。相反，我们使用`fgets()`or POSIX`getline()`读取一行数据，然后使用`sscanf()`它来解析它。这样做有很多优点，但一个主要优点是换行符已被吃掉，因此您不会遇到变量`question`不包含您期望的答案的问题。

# list - 我的 Prolog“翻译器”脚本返回一个空列表

> ID：15102474
> 
> 赞同：1
> 
> 时间：2013-02-27T01:12:16.587
> 
> 标签：list, prolog

我正在尝试编写一个简单的翻译器，您可以在其中输入数字列表并返回它们的字符串值，如下所示：

翻译（[1,2,3]，X）。X=[一、二、三]。

我编写的代码有效......除了它返回一个空列表。这是我的代码和跟踪：

```
means(1, one).
means(2, two).
means(3, three).
means(4, four).
means(5, five).
means(6, six).
means(7, seven).
means(8, eight).
means(9, nine).
means(10, ten).

translate([], X).
translate([H|T], []):-
    means(H, X),
translate(T, X).

translate([H|T], X):-
    means(H, Y),
    translate(T, [X|Y]).

[trace] 1 ?- translate([1,2,3], X).
    Call: (6) translate([1, 2, 3], _G2219) ? creep
    Call: (7) means(1, _G2301) ? creep
    Exit: (7) means(1, one) ? creep
    Call: (7) translate([2, 3], one) ? creep
    Call: (8) means(2, _G2301) ? creep
    Exit: (8) means(2, two) ? creep
    Call: (8) translate([3], [one|two]) ? creep
    Call: (9) means(3, _G2304) ? creep
    Exit: (9) means(3, three) ? creep
    Call: (9) translate([], [[one|two]|three]) ? creep
    Exit: (9) translate([], [[one|two]|three]) ? creep
    Exit: (8) translate([3], [one|two]) ? creep
    Exit: (7) translate([2, 3], one) ? creep
    Exit: (6) translate([1, 2, 3], []) ? creep
X = [] . 
```

我的另一个问题是：为什么我的列表连接为 [[one|two]|three]？而不是[一，二，三]？

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T01:27:27.960

由于`translate([H|T], [])`子句，您得到空列表。

整个程序（`means`事实除外）可以这么简单：

```
translate([], []).

translate([NumH | NumT], [WordH | WordT]) :-
    means(NumH, WordH),
    translate(NumT, WordT). 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T04:56:17.580

手动执行 Sergey 的方式是一种很好的做法，但您可以进一步简化`maplist/3`：

```
translate(Numbers, Words) :- maplist(means, Numbers, Words). 
```

# php - php序列化属性进化的对象（对象进化）

> ID：15102479
> 
> 赞同：5
> 
> 时间：2013-02-27T01:12:48.997
> 
> 标签：php, object, serialization, properties

这是我关于 SO 的第一个问题，尽管我已经进行了大量搜索；如果这已经被触及，我很抱歉。

问题/问题与 PHP 的 serialize() 功能有关。我正在使用序列化将对象存储在数据库中。例如：

```
class Something {
  public $text = "Hello World";
}

class First {

  var $MySomething;

  public function __construct() {
    $this->MySomething = new Something();
  }
}

$first_obj = new First();
$string_to_store = serialize($first_obj);

echo $string_to_store

//  Result:  O:5:"First":1:{s:11:"MySomething";O:9:"Something":1:{s:4:"text";s:11:"Hello World";}} 
```

现在，在项目生命的后期，我想修改我的类，首先，拥有一个新属性：$SomethingElse，它也将对应于 Something 对象。

问题是，对于我的旧/现有对象，当我反序列化到我的 First 类的新版本时，似乎初始化新属性 (SomethingElse) 的唯一方法是在 __wakeup() 方法中查找它。在这种情况下，我需要在那里记录*任何*新属性。**这个对吗？**属性需要像在构造函数中一样对待，设置它们的初始值（最终复制代码）。

我发现如果我在声明它时初始化变量，那么它将被反序列化拾取，例如，如果我将Something类更改为：

```
class Something {
  public $text = "Hello World";
  public $new_text = "I would be in the unserialized old version.";
}

...

$obj = unserialize('O:5:"First":1:{s:11:"MySomething";O:9:"Something":1:{s:4:"text";s:11:"Hello World";}}');

print_r($obj);

//  Result:  First Object ( [MySomething] => Something Object ( [text] => Hello World [new_text] => I would be in the unserialized old version. ) ) 
```

但是在声明对象时不能初始化对象的新属性，*必须*在构造函数中完成（和 __wakeup()？）。

我希望我解释得足够好。我想知道是否有一些我遗漏的编程模式，或者是否在 __wakeup() 中复制初始化代码（或引用 init 方法）是典型的，或者我是否只需要准备将旧对象迁移到新版本通过。迁移脚本。

谢谢。

* * *

更新：在考虑到目前为止评论者所说的内容时，我想我会使用 init() 方法发布更新后的 First 类：

```
class Something {
  public $text = "Hello World2";
  public $new_text = "I would be in the unserialized old version.2";
}

class First {

  var $MySomething;
  var $SomethingElse;

  public function __construct() {
    $this->init();
  }

  public function __wakeup() {
    $this->init();
  }
  private function init() {
    if (!isset($this->MySomething)) {
      $this->MySomething = new Something();
    }
    if (!isset($this->SomethingElse)) {
      $this->SomethingElse = new Something();
    }
  }
}

$new_obj = unserialize('O:5:"First":1:{s:11:"MySomething";O:9:"Something":1:{s:4:"text";s:11:"Hello World";}}');

print_r($new_obj);

//  Result:  First Object ( [MySomething] => Something Object ( [text] => Hello World [new_text] => I would be in the unserialized old version.2 ) [SomethingElse] => Something Object ( [text] => Hello World2 [new_text] => I would be in the unserialized old version.2 ) ) 
```

所以我真的不确定，因为这对我来说似乎是一个可行的模式。随着类获得新属性，它们在第一次恢复时采用默认值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T01:26:29.380

好问题！一般无法回答。我想说，这不仅仅与 serialize() 相关。当你有一个 SQL 数据库，并且你的代码发生变化时，它也不适用于旧数据。*这是使用数据（基础）*进行版本管理的常见问题。

将旧软件版本中的数据集成到新版本中时，您通常会遇到必须将旧数据转换为新格式的问题。配置文件等也是如此......

在这种情况下，通常会编写一个将旧数据转换为新格式的脚本。在为服务器产品的 PHP“固件”创建升级包时，我已经做了几年的工作。:) Linux 发行版上的大多数包管理器也是如此。

*注意*：如果您可以安全地避免升级之间的数据丢失，您必须在开发过程中小心并牢记数据的“可升级性”。

* * *

更新：我认为序列化数据会使数据的更新过程更加糟糕。如果你序列化一个类并重命名它会怎样？将很难检索数据。我从没想过这一点，但这听起来像是版本升级*的问题*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T01:20:07.670

上次我有一个更改属性的类时，我将所有数据存储在一个名为 $classVar 的关联数组中。如果您这样做，那么无论您添加多少变量，都将通过一个简单的序列化调用跟踪您添加的所有变量。

使用时，只需检查变量是否已初始化，如果没有，则设置默认值。您甚至可以序列化一个 classversion 变量来处理更复杂的情况，例如不再使用的变量或需要转换的变量

# html - 如何使父 div 自动调整为其子 div 的宽度

> ID：15102480
> 
> 赞同：95
> 
> 时间：2013-02-27T01:12:54.923
> 
> 标签：html, css

我正在尝试使父 div 仅与子 div 一样宽。自动宽度使父 div 适合整个屏幕。子 div 将根据其内容具有不同的宽度，因此我需要父 div 进行相应调整。

```
<div style='width:auto;'>
  <div style="width: 135px; float: left;">
    <h4 style="padding-right: 5px; padding-left: 15px;">Column1</h4>
    <dl style="padding-right: 5px; padding-left: 15px; margin-top: -8px; overflow-x: hidden;">
      <dd style="white-space: nowrap;">1</dd>
      <dd style="white-space: nowrap;">2</dd>
    </dl>

    <h4 style="padding-right: 5px; padding-left: 15px;">Column1</h4>
    <dl style="padding-right: 5px; padding-left: 15px; margin-top: -8px; overflow-x: hidden;">
      <dd style="white-space: nowrap;">1</dd>
      <dd style="white-space: nowrap;">2</dd>
    </dl>
  </div>

  <div style="width: 135px; float: right;">
    <h4 style="padding-right: 5px; padding-left: 10px;">Column2</h4>
    <dl style="padding-right: 5px; padding-left: 15px; margin-top: -8px; overflow-x: hidden;">
      <dd style="white-space: nowrap;">1</dd>
      <dd style="white-space: nowrap;">2</dd>
      <dd style="white-space: nowrap;">3</dd>
    </dl>
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：110
> 
> 时间：2013-02-27T01:15:28.760

你的内部`<div>`元素应该都是`float:left`。Divs 大小自动调整为其容器宽度大小的 100%。尝试在容器 div 上使用`display:inline-block`而不是。`width:auto`或者可能`float:left`是容器并且也适用`overflow:auto`。取决于你究竟追求什么。

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2013-02-27T01:16:55.820

父 div（我假设最外层的 div）正在`display: block`并且将填满其容器（在本例中为主体）的所有可用宽度。使用不同的显示类型——`inline-block`可能是你想要的：

[http://jsfiddle.net/a78xy/](http://jsfiddle.net/a78xy/)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2021-12-17T13:51:40.513

这是让父 div 继承其子宽度的最简单方法。

```
.container-fluid {
  border: 1px solid black;
  /*the needed css class to make your parent div responsive to it's children's max-width
  */
  width: max-content
}
.wrapper {
  border: 1px solid red;
  width: 300px
}
```

```
<div class="container-fluid">
  <div class="wrapper">xxx</div>
</div>
```

我希望有人觉得这很有用

# sorting - Extjs 网格排序

> ID：15102483
> 
> 赞同：1
> 
> 时间：2013-02-27T01:13:17.290
> 
> 标签：sorting, extjs, grid

我`Company`在**ExtJs gridPanel**中有一个专栏。

在后端我提出了一个条件 -

```
{id:'Company',header: "Company",  sortable: true, dataIndex: 'comp', 
     renderer: function(value, cell) {
   if(status='unemployed') 
      {  return 'n/a';}
} 
```

现在，如果该列具有, , ,等值`'Apple'`，则它没有按正确的顺序排序。分拣时应该如何处理？`'Google'``'n/a'``'Microsoft'``'n/a'`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T08:13:45.060

我建议在 n/a 案例中只使用空白值。它会出现在列表的顶部。您还可以在“n”之前放置一个空格，例如`' n/a'`.

# relational-database - 将关系分解为 BCNF

> ID：15102485
> 
> 赞同：29
> 
> 时间：2013-02-27T01:13:35.700
> 
> 标签：relational-database, database-normalization, decomposition

我无法确定关系何时处于 Boyce-Codd 范式以及如何将其分解为信息 BCNF（如果不是）。给定这个例子：

R(A, C, B, D, E) 具有函数依赖关系：A -> B, C -> D

我该如何分解它？

我采取的步骤是：

```
A+ = AB  
C+ = CD  
R1 = A+ = **AB**  
R2 = ACDE (since elements of C+ still exist, continue decomposing)  
R3 = C+ = **CD** 
```

R4 = **ACE**（此关系中没有 FD 闭包）

所以现在我知道 ACE 将组成整个关系，但分解的答案是：AB、CD、ACE。

我想我正在努力解决如何将关系正确分解为 BCNF 形式以及如何判断何时完成。非常感谢任何能在解决这些问题时引导我完成他们的思考过程的人。谢谢！

* * *

## 回答 #1

> 赞同：117
> 
> 时间：2013-08-23T09:13:35.873

尽管这个问题很老，但其他问题/答案似乎并没有就确定和分解与 BCNF 的关系提供非常清晰的逐步一般性答案。

**1\. 确定 BCNF：**
要使关系 R 在 BCNF 中，R 中所有的函数依赖（FD）需要满足行列式 X 都是 R 的超键的性质。即如果 X->Y 在 R 中成立，则 X必须是 R 的超键才能在 BCNF 中。

在您的情况下，可以证明唯一的候选键（最小超级键）是 ACE。因此，两个 FD：A->B 和 C->D 都违反了 BCNF，因为 A 和 C 都不是超级键或 R。

**2\. 将 R 分解为 BCNF 形式：**
如果 R 不在 BCNF 中，我们将 R 分解为在 BCNF 中的一组关系 S。
这可以通过一个非常简单的算法来完成：

```
Initialize S = {R}
While S has a relation R' that is not in BCNF do:   
   Pick a FD: X->Y that holds in R' and violates BCNF
   Add the relation XY to S
   Update R' = R'-Y
Return S 
```

在您的情况下，迭代步骤如下：

```
S = {ABCDE}       // Intialization S = {R}
S = {ACDE, AB}    // Pick FD: A->B which violates BCNF
S = {ACE, AB, CD} // Pick FD: C->D which violates BCNF
// Return S as all relations are in BCNF 
```

因此，R(A,B,C,D,E) 被分解为一组关系：满足 BCNF 的 R1(A,C,E)、R2(A,B) 和 R3(C,D)。

另请注意，在这种情况下，保留了功能依赖性，但对 BCNF 的规范化并不能保证这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-30T21:06:45.590

1NF -> 2NF -> 3NF -> BCNF

根据给定的 FD 集“ACE”形成密钥。显然 R(A,B,C,D,E) 不在 2NF 中。2NF 分解给出 R1(A,B)、R2(C,D) 和 R3(A,C,E)。这种分解分解的关系在 3NF 和 BCNF 中。

# magento - Magento “Shop By” URL 使用“#%21”而不是“?”

> ID：15102486
> 
> 赞同：0
> 
> 时间：2013-02-27T01:13:46.677
> 
> 标签：magento, search

我正在使用新的 Magento 安装并使用商店链接给我

```
example.com/catalogsearch/result/#%21color=1&q=shirt 
```

代替

```
example.com/catalogsearch/result/?color=1&q=shirt 
```

我不确定我应该从哪里开始解决这个问题。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-19T22:05:57.357

我们遇到了同样的问题，发现一个插件正在用 str replace 更改 url

改变？对于 #%21

该插件更改了 url，以便它可以被 javascript 文件识别并通过 ajax 更新。

我们案例中的插件是 vingento，似乎与其他插件有一些冲突。禁用此插件并编码后，我们的过滤器和分页链接再次工作，尽管不是通过 ajax。

希望这可以帮助你

# c# - 相关子实体（实体框架 4）已加载，但我无法绑定到它们

> ID：15102489
> 
> 赞同：1
> 
> 时间：2013-02-27T01:14:14.543
> 
> 标签：c#, entity-framework-4, datagrid, parent-child

我将以下 SQL 表映射到两个实体（具有相同的属性）

```
 Two Tables look like:

 MasterPartNumbers (parent) many  -> many     MasterPartsLists (children)
 (PK) pnID                                   (PK)(FK) parentPnID
      pn                                     (PK)     pnID   
      pnDesc                                          qty
                                                      price
                                                      isAssembly 
```

注意：这些 SQL 表只是简单地添加到我的模型中，映射保持原样。所以它们每个都有主/外键属性作为导航属性。

我有一个`ObservableCollection`i 用作`ItemsSource`绑定，它看起来像：

```
 public ObservableCollection<MasterPartNumber> SelectedAssyBOMLineItems
    {
        get
        {

            if (this._selectedTopLevelAssyPN != null)
            {
                var bomItems = (from childMpn in this._context.MasterPartNumbers
                                from childMpl in this._context.MasterPartsLists
                                where childMpl.parentPnID == this._selectedTopLevelAssyPN.pnID //this._selectedTopLevelAssyPn.pnID is simply the selected "Parent" part number in an adjacent ListBox on my View (usercontrol). It is of type MasterPartNumber
                                where childMpl.pnID == childMpn.pnID
                                select childMpn
                                );

                return this._selectedAssyBOMLineItems = new ObservableCollection<MasterPartNumber>(bomItems);
            }
            return this._selectedAssyBOMLineItems;
        }
        set
        {
            this._selectedAssyBOMLineItems = value;
            RaisePropertyChanged("SelectedAssyBOMLineItems");
        } 
```

到目前为止一切顺利——我能够绑定到 MasterPartNumbers 的所有属性，并且我正在查看我的 DataGrid 中的查询提供的预期数据子集。但是，我无法绑定到任何 MasterPartNumbers.MasterPartsLists 属性。当我单步调试调试器时，我可以看到它们已加载。我错过了什么？

我希望通过`_context.MasterPartNumbers.Include("MasterPartsLists")`在查询中使用类似 a 的内容从上下文中加载相关实体，将绑定路径引用为 {Binding MasterPartsList.isAssy}。

我正在寻找的行为类似于在[此处找到的答案](https://stackoverflow.com/questions/14461526/unable-to-load-related-entities-in-a-wcf-service?rq=1)

提前致谢！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T03:34:58.897

在这种情况下，您很可能希望第二个控件使用类似的东西绑定到第一个控件

```
<DataGrid ItemSource="{Binding MasterPartNumbers}" x:Name="MasterControl" />
<DataGrid ItemSource="{Binding ElementName=MasterControl, Path=SelectedItem.Children} /> 
```

假设您的 MasterPartNumbers 类具有以下形式

```
class MasterPartNumbers 
{
    IEnumerable<MasterPartsLists> Children { get; }
{ 
```

足够简单

```
 var bomItems = this._context.MasterPartNumbers.Include(x => x.Children); 
```

您可能需要从 EntityFramework 5.x 程序集中导入 System.Entity。否则，您将需要使用字符串而不是 lambda。

# java - 如何将 TextView 设置为长值？

> ID：15102493
> 
> 赞同：4
> 
> 时间：2013-02-27T01:14:38.123
> 
> 标签：java, android, variables

我正在尝试为我正在制作的反应 android 应用程序创建一个倒数计时器（只是为了了解线程和东西），并且在我正在创建的代码的初始 3、2、1 部分遇到问题。

```
long gameStart, elapsed, cdElapsed, countdownStart, cdDisplay;
TextView timerDisplayBottom, timerDisplayTop;

private void countdown() {
    for(int i=1; i<10; i++) {
        timerDisplayBottom.setText(cdDisplay);
        timerDisplayTop.setText(cdDisplay);
        cdElapsed = System.currentTimeMillis();
        cdElapsed = (countdownStart - cdElapsed);
        cdDisplay = (3 - cdElapsed);
    }

} 
```

我需要将 timerDisplayBottom 和 Top 的文本设置为 cdDisplay 生成的数字。

提前致谢！:)

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-27T01:16:34.497

你可能应该使用`String.valueOf()`这样你得到一个字符串表示`long`

```
timerDisplayTop.setText(String.valueOf(cdDisplay)); 
```

# arrays - 使用 R 将多个文件加载到矩阵中

> ID：15102499
> 
> 赞同：4
> 
> 时间：2013-02-27T01:15:20.887
> 
> 标签：arrays, r, csv, matrix, import

我是编程世界的新手，需要帮助将文件加载到 R 并用它创建矩阵。我可以导入单个文件并从中创建单个矩阵。如何对多个文件执行此操作？我有 21 个文件，每个文件包含 100 行和 100 列，我需要导入每个文件并将所有内容放在一个数组中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T01:28:50.067

1.  我会用`list.files`模式列出我的文件。
2.  `lapply`遍历文件列表并创建一个列表 data.frame`read.csv`
3.  `rbindlist`将所有内容绑定在一个大矩阵中。

    ```
    temp = list.files(pattern="*.csv")
    named.list <- lapply(temp, read.csv)
    library(data.table)
    files.matrix <-rbindlist(named.list) 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T01:57:31.183

目前尚不清楚您想要什么结构。您可以在 2100x100 矩阵或 2100x100 数据帧或 100x 100x 21 数组或具有 21 个条目的列表之间进行选择，每个条目为 100 x 100。（在 R 中，数组是用于具有列的常规 3 维结构的术语所有相同的类型。（当然还有 agstudy 建议您使用 data.table。）

从某种意义上说，agstudy 的代码已经为您提供了 21 项数据框列表，每个维度：100x100：

```
temp = list.files(pattern="*.csv")
named.list <- lapply(temp, read.csv) 
```

要获得 100 x 100 x 21 阵列，请继续：

```
require(abind)
arr <- abind(named.list) 
```

要获取 2100 x 100 数据帧，请继续：

```
longdf <- do.call(rbind, named.list) 
```

要获得 2100 x 100 矩阵，请从最后一行继续：

```
longmtx <- data.matrix(longdf) 
```

# jquery - 如果过了一定时间，如何强制第二天？

> ID：15102501
> 
> 赞同：1
> 
> 时间：2013-02-27T01:15:44.277
> 
> 标签：jquery, jquery-ui

我有一个小问题，我允许人们选择从今天到 +1 个月的任何一天。

我这样做：

```
$('#book_table_calendar').datepicker(
    {
        minDate: 0,
        maxDate: "+1M",
        dateFormat: "dd/mm/yy",
        firstDay: 1
    }
); 
```

我如何告诉 datepicker 如果当前时间是 21:00（24 小时时间格式），那么我们从明天开始 +1 个月？

*示例：*
今天的日期时间：25/08/2013 21:00
日期选择器应显示第一个活动日为 26/08/2013

我应该使用某种数学函数并将其返回给 minDate 还是有其他方法？

希望它是可以理解的。如果不是，请询问具体情况。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T01:28:29.163

我想你可以找到它是否超过晚上 9 点并将 minDate 设置为 1 而不是 0。例如，

```
var startDate = 0;   //default
//get current time from the server preferably
//using js here for demo
var currentTime = new Date();
var currentHour = currentTime.getHours();
if(currentHour > 20) startDate = 1;  //set currentHour == 21 if you want this only if its 9pm 
```

然后在您的初始化中：

```
$('#book_table_calendar').datepicker(
    {
        minDate: startDate,
        maxDate: "+1M",
        dateFormat: "dd/mm/yy",
        firstDay: 1
    }
); 
```

# java - GitHub 在不同的分支上工作，但在同一个类上。我们将如何合并它？

> ID：15102502
> 
> 赞同：0
> 
> 时间：2013-02-27T01:15:46.710
> 
> 标签：java, git, github, merge, branch

我们目前有 2 个人在做一个项目。我们使用 github，我们有一个 master 分支。每个开发人员有 2 个子分支。因此，我们总共有 3 个带有 master 的分支。

假设我们有一个文件 hello.class。两位开发人员都在各自的分支中对文件进行了更改。如果我现在将我的子分支与主分支合并。另一个子分支落后了，需要拉master，然后用他的子分支rebase。

现在问题出现了，因为如果他 rebase 的 master 发生变化，他会覆盖他在 hello.class 中的工作。我们将如何解决这个问题？有没有办法拉主，然后自动合并更改到子分支而不覆盖文件中完成的工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T01:23:39.493

合并是 git 的*一半*。如果更改发生冲突，git 将中止合并/变基并要求您在继续之前修复它们；如果更改位于文件的不同部分，git 将自己进行合并。你必须竭尽全力才能失去工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T01:21:30.030

Git 不会覆盖更改。当你做一个变基时它会合并它们（你也可以做一个合并，即`git merge master`）。如果你们都更改了同一行代码，那么 git 会感到困惑并要求您修复合并冲突。但是如果你没有更改完全相同的行，git 足够聪明来合并更改。

我假设您正在提交 .java 文件，因为您不应该提交 .class 文件。

# c++ - 没有构造函数可以采用源类型

> ID：15102506
> 
> 赞同：0
> 
> 时间：2013-02-27T01:16:19.813
> 
> 标签：c++, hashmap, overloading

我不断收到错误，没有构造函数可以采用源类型或构造函数重载解析。

在我的代码开头，我声明了一个无序地图。

```
unordered_map<char * , a_dictionary * > Mymap;

    unsigned char hash[20];
    char hex_str[41];
    string answer, line;
    int yes=0;
    cout<<"Press 1 if you would like to use the default file(d8.txt) or press 2 if you want your own file"<<endl;
    getline(cin,answer);
    stringstream(answer)>> yes;

    if(yes == 1 )
    {
        ifstream myfile("d8.txt");
        if (myfile.is_open())
        {
            while ( myfile.good() )
            {
                getline (myfile,line);
                //cout<<line<<endl;
                a_dictionary * dic = new dictionary();
                dic->word = line;

                const char * c= line.c_str();
                sha1::calc(c,line.length(), hash);
                sha1::toHexString(hash,hex_str);
                Mymap.insert(hex_str, dic); // 
```

这条线就在这里“mymap.insert”不断给我错误 error C2664: 'std::_List_iterator<_Mylist> std::_Hash<_Traits>::insert(std::_List_const_iterator<_Mylist>,_Valty) 即使我通过正确的价值观对吗？

这是调用 toHeXString 的函数

```
void toHexString(const unsigned char* hash, char* hexstring)
{
    const char hexDigits[] = { "0123456789abcdef" };

    for (int hashByte = 20; --hashByte >= 0;)
    {
        hexstring[hashByte << 1] = hexDigits[(hash[hashByte] >> 4) & 0xf];
        hexstring[(hashByte << 1) + 1] = hexDigits[hash[hashByte] & 0xf];
    }
    hexstring[40] = 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T01:21:35.020

您需要将其成对插入。

```
Mymap.insert(std::make_pair(hex_str, dic)); 
```

或者使用 C++11 Initializer 列表

```
Mymap.insert({hex_str, dic}); 
```

[在此处](http://www.cplusplus.com/reference/unordered_map/unordered_map/insert/)查看示例

或者，您可以使用[`operator[]`](http://en.cppreference.com/w/cpp/container/unordered_map/operator_at)，产生更清晰的代码

```
Mymap[hex_str] = dic; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T01:23:07.360

[http://cplusplus.com/reference/unordered_map/unordered_map/insert/](http://cplusplus.com/reference/unordered_map/unordered_map/insert/) 检查插入的声明。你想要 std::pair。

# android - 无法使用 Android AudioTrack 正确播放声音

> ID：15102507
> 
> 赞同：0
> 
> 时间：2013-02-27T01:16:23.540
> 
> 标签：android, audiotrack

我正在运行这个程序，它使用 AudioTrack 从资源文件夹播放声音文件。有输出，但声音不正确。

项目文件已上传。

[http://www.mediafire.com/?995mxc87hf28fxk](http://www.mediafire.com/?995mxc87hf28fxk)

```
 package com.self.AudioTrack;

  import java.io.IOException;

   import android.app.Activity;
   import android.content.Context;
 import android.os.Bundle;

public class AudioTrack2Activity extends Activity {
/** Called when the activity is first created. */
Context ctx;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    ctx=getApplicationContext();
    new Thread( new Runnable( ) 
    {
      // private Object context;

    public void run( )
       {                

          AudioDevice device = new AudioDevice(ctx);
         // String filepath="R.raw.cheerapp.mp3";
         // InputStream cheerSound = this.getResources().openRawResource(R.raw.cheerapp);
          //InputStream cheerSound = this.getContext().getResources().openRawResource(R.raw.cheerapp);
          try {
            device.PlayShortAudioFile();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
       }

    } ).start();

} 
```

}

```
 package com.self.AudioTrack;

  import java.io.BufferedInputStream;
  import java.io.ByteArrayOutputStream;
  import java.io.DataInputStream;
  import java.io.File;
  import java.io.FileInputStream;
  import java.io.FileNotFoundException;
  import java.io.IOException;
  import java.io.InputStream;

  import android.content.Context;
  import android.media.AudioFormat;
  import android.media.AudioManager;
  import android.media.AudioTrack;

  public class AudioDevice 
```

{

```
 AudioTrack track;
   short[] buffer = new short[1024];
   Context context;

   public AudioDevice(Context context_)
   {
      int minSize =AudioTrack.getMinBufferSize( 44100, AudioFormat.CHANNEL_CONFIGURATION_MONO, AudioFormat.ENCODING_PCM_16BIT );        
      track = new AudioTrack( AudioManager.STREAM_MUSIC, 44100, 
                                        AudioFormat.CHANNEL_CONFIGURATION_MONO, AudioFormat.ENCODING_PCM_16BIT, 
                                        minSize, AudioTrack.MODE_STREAM);
      context=context_;
      track.play();        
   }

   public void PlayShortAudioFile() throws IOException
   {
     InputStream in=context.getResources().openRawResource(R.raw.cheerapp);   

    byte[] music = null;
     music = new byte[in.available()];

     music=convertStreamToByteArray(in);
     in.close();

      track.play();
      track.write(music, 0, music.length); 
     track.stop();
     track.release();
   } //Play

   public static byte[] convertStreamToByteArray(InputStream is) throws IOException {
        ByteArrayOutputStream baos = new ByteArrayOutputStream();
        byte[] buff = new byte[10240];
        int i = Integer.MAX_VALUE;
        while ((i = is.read(buff, 0, buff.length)) > 0) {
            baos.write(buff, 0, i);
        }

        return baos.toByteArray(); // be sure to close InputStream in calling function
    } 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T07:12:42.000

抱歉，但这些音频文件是 mpeg 文件，其中包含标题。您使用的方法仅适用于没有标题的原始音频文件。如果您想播放 mp3 文件，请使用 Mediaplayer（[http://developer.android.com/参考/android/media/MediaPlayer.html](http://developer.android.com/reference/android/media/MediaPlayer.html) )

# sql-server - 使用非对称密钥更新程序集

> ID：15102511
> 
> 赞同：-1
> 
> 时间：2013-02-27T01:16:53.223
> 
> 标签：sql-server, sql-server-2005, .net-assembly, encryption-asymmetric

我之前使用 VS 2010 创建了一个程序集并使用密钥对其进行了签名。我在下面运行了一个这样的脚本：

```
USE master; 
GO  

CREATE ASYMMETRIC KEY SQLCLRPSBatch20Key FROM EXECUTABLE FILE = 'C:\Unsafe\MyDLL.dll';   
CREATE LOGIN SQLCLRPSBatch20Login FROM ASYMMETRIC KEY SQLCLRPSBatch20Key;  
GRANT UNSAFE ASSEMBLY TO SQLCLRPSBatch20Login;
GO

use MyDB;
GO

// create assembly script here to install unsafe assembly 
```

现在，每次我将程序集放到数据库上并重新安装以更新它时，我是否需要这样做并创建一个新密钥并登录？

当我这样做时，我得到：

```
Msg 15396, Level 16, State 1, Line 2
An asymmetric key with name 'SQLCLRPSBatch20Key' already exists or this asymmetric key already has been added to the database.
Msg 15151, Level 16, State 1, Line 3
Cannot find the asymmetric key 'SQLCLRPSBatch20Key', because it does not exist or you do not have permission.
Msg 15151, Level 16, State 1, Line 4
Cannot find the login 'SQLCLRPSBatch20Login', because it does not exist or you do not have permission. 
```

所以我想既然程序集是以相同的方式创建和签名的，我只需要安装它。这个对吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T03:45:36.727

不。从非对称密钥创建登录（或更准确地说，服务器主体）是一种说“嘿......有权做这种事情的人可能查看了您的 CLR 代码并给出了它竖起大拇指”。创建服务器主体后，使用支持它的密钥签名的任何程序集都可以运行。

# ruby-on-rails - 使用 Rails 在文本字段内提交链接

> ID：15102515
> 
> 赞同：0
> 
> 时间：2013-02-27T01:17:07.890
> 
> 标签：ruby-on-rails, ruby-on-rails-3, forms

我有一个带有 Rails 3.1 的简​​单搜索表单，而不是提交按钮，我想要一个放大镜图像，当您单击它时，它是一个用于在文本框 (text_field_tag) 内提交表单的链接。一个例子是在 Firefox 浏览器中，所有搜索引擎的输入框。我试着用谷歌搜索如何做到这一点没有成功。到目前为止，我有这个：

```
 = form_tag("/search", :method => "get", :class => "search-forum") do
  = label_tag "Search for:"
  = text_field_tag :search
  = submit_tag "Search", :class => "search-submit" 
```

实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T02:56:40.150

不知道我理解的好不好，告诉我是不是你要找的。

您希望通过单击文本字段内的图像或其他元素来执行提交，而不是使用提交按钮。要实现这一点，您可以使用 jquery 和 ajax 使用不显眼的 javascript，在这种情况下，您不需要表单：

假设这是您为 text_field 拥有的 html

```
<input id="search_bar" type="text" placeholder="Search..." name="q">
<span class="search-image"></span> 
```

现在要执行搜索，您需要的是这样的（在 js 文件中）：

```
$(document).ready(function() {
$(".search-image").click(function(){
  var query = $('#search_bar').val() # Get the text on the text field
  $.get('/route?q=' + query, function(data){
    #Perform some actions with the data returned by the server
    $('#some_container').html(data)
  }).success(function(){
     #Here you can perform other actions if the request is successful
     alert('successful request')
  }).error(function{
    #In case the request fail
    alert('request failed')
  })
});
} 
```

# ios - iOS 6 旋转到 Portrait Upside Down 不适用于 UITableViewController，iOS 5 很好

> ID：15102517
> 
> 赞同：1
> 
> 时间：2013-02-27T01:17:10.883
> 
> 标签：ios, ios6, uitableview, uiinterfaceorientation

我有一个支持所有四个方向的应用程序，它在**iOS 5**上运行良好。

但是，在**iOS 6**上，我的所有**UIViewController**类都可以正确旋转，但我的**UITableViewController**类不会旋转到**PortraitUpsideDown**。

该应用程序支持的方向包括所有四个选项。

AppDelegate 支持所有方向：

```
- (NSUInteger)application:(UIApplication *)application supportedInterfaceOrientationsForWindow:(UIWindow *)window
{
    //return (UIInterfaceOrientationMaskAll);
    return (UIInterfaceOrientationMaskPortrait | UIInterfaceOrientationMaskLandscapeLeft | UIInterfaceOrientationMaskLandscapeRight | UIInterfaceOrientationMaskPortraitUpsideDown);
} 
```

我所有的视图类都实现了必要的方法，包括为 iOS 6 引入的方法：

```
- (NSUInteger)supportedInterfaceOrientations
{
    //return (UIInterfaceOrientationMaskAll);
    return (UIInterfaceOrientationMaskPortrait | UIInterfaceOrientationMaskLandscapeLeft | UIInterfaceOrientationMaskLandscapeRight | UIInterfaceOrientationMaskPortraitUpsideDown);
}

- (BOOL)shouldAutorotate
{
    BOOL bReturn = [self shouldAutorotateToInterfaceOrientation:self.interfaceOrientation];
    return (bReturn);
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (YES);
} 
```

我能找到的唯一区别是视图的显示方式。

**UIViewController**

```
InfoViewController *infoController = [[InfoViewController alloc] initWithNibName:@"InfoViewController" bundle:[NSBundle mainBundle]];
[self presentModalViewController:infoController animated:YES]; 
```

**UITableViewController**

```
MenuViewController *menuController = [[MenuViewController alloc] initWithNibName:@"MenuViewController" bundle:[NSBundle mainBundle]];
UINavigationController *navigationController = [[UINavigationController alloc] initWithRootViewController:menuController];
[self presentModalViewController:navigationController animated:YES]; 
```

不完全确定实施会对轮换产生什么影响，更不确定该怎么做。

任何指导将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T03:02:42.627

根据我上面的评论，我创建了一个继承自**UINavigationController**的新类，并添加了识别支持的方向的方法。

```
- (NSUInteger)supportedInterfaceOrientations
{
    //return (UIInterfaceOrientationMaskAll);
    return (UIInterfaceOrientationMaskPortrait | UIInterfaceOrientationMaskLandscapeLeft | UIInterfaceOrientationMaskLandscapeRight | UIInterfaceOrientationMaskPortraitUpsideDown);
} 
```

然后，当我需要为**UITableViewController呈现****ModalViewController**时，我创建了一个新的**RotationNavigationController**类的对象。

 ****似乎解决了我所有的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-17T15:45:32.683

```
 override func supportedInterfaceOrientations() -> UIInterfaceOrientationMask {
            if UIDevice.currentDevice().userInterfaceIdiom == .Phone {
                return  UIInterfaceOrientationMask(rawValue: UIInterfaceOrientationMask.Portrait.rawValue | UIInterfaceOrientationMask.PortraitUpsideDown.rawValue)
            } else {
                return .All
            }
    } 
```****

# iphone - iOS In App Purchase 不退回所有产品

> ID：15102518
> 
> 赞同：0
> 
> 时间：2013-02-27T01:17:33.120
> 
> 标签：iphone, ios, in-app-purchase, storekit

在我能够让我的 In App Purchase 帮助程序类为 1 个产品工作后，我尝试向我的应用程序添加其他产品。已经超过 2 天了，代码（在沙盒中）仍然从这个调用返回 1 个产品

```
- (void)productsRequest:(SKProductsRequest *)request didReceiveResponse:(SKProductsResponse *)response 
```

我做的一件事可能会触发此问题，但我不确定如何解决它。我为我的第一个 IAP 产品关闭了“使用 Apple 托管内容”选项，因为我意识到我不需要这个（我已经上传了 .pkg 并且能够让它工作，然后我删除了它）。然后，我在关闭相同设置的情况下创建了另外 2 个产品...我是否需要上传一个虚拟 pkg 才能让这 2 个其他产品也能正常工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T03:42:19.280

确保将所有潜在产品传递给 SKProductsRequest initWithProductIdentifiers:。

# jquery - jQuery：过滤多个类

> ID：15102519
> 
> 赞同：14
> 
> 时间：2013-02-27T01:17:33.550
> 
> 标签：jquery, filter

有没有一种很好的方法可以将选定的元素过滤到几个类？我知道我可以一次做一个，但这似乎是 jQuery 允许的。

这些是用 ajax 提供的，我无权定义实际的 html。

```
$('.val>td').each(function () {
    $(this).filter('.price,.quantity,.remove').children().children().addClass('hidetaxfields');
}); 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-27T01:25:23.953

从您给出的示例中，您所问的内容并不清楚...

这将生成与具有类`one`OR的初始选择器匹配的元素的子集`two`：

```
$(selector).filter('.one, .two'); 
```

这将生成与初始选择器匹配的元素的子集，这些元素具有两个类`one`AND `two`：

```
$(selector).filter('.one.two'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T01:25:20.867

使用该`.is()`方法应该有效：

```
$('.val>td').each(function () {
    var $this = $(this);
    if( $this.is('.price, .quantity, .remove') ){
        $this.children().children().addClass('hidetaxfields');
    }
}); 
```

但这更好：

```
$('.val>td.price, .val>td.quantity, .val>td.remove').each(function () {
    $(this).children().children().addClass('hidetaxfields');
}); 
```

或这个：

```
var $tds = $('.val>td').filter('.price, .quantity, .remove');
$tds.each(function () {
    $(this).children().children().addClass('hidetaxfields');
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-27T01:25:30.557

使用过滤器，您可以编写一个过滤器函数，可以像这样（[演示](http://jsfiddle.net/sperske/8PZza/1/)）：

```
$('.val>td').filter(function () {
    var that = $(this);
    return that.hasClass('price') || that.hasClass('remove') || that.hasClass('quantity');
}).addClass('hidetaxfields'); 
```

# c# - 在 C# 中，如何在一定长度后删除数组中的项目？

> ID：15102523
> 
> 赞同：2
> 
> 时间：2013-02-27T01:17:58.927
> 
> 标签：c#, collections

如果我有一个对象数组并且我想在一定长度后删除所有项目

例如，如果数组的起始长度为 10，我只想保留数组中的前 5 个项目，然后删除所有内容。注意：数组可能小于 5，这不会做任何事情。

```
 int startLength = 10;
  int maxLength = 5;
  List<MYObject> myList = CreateListofObjects(startLength); 
```

我想要像“RemoveAfter”这样的东西，其中“RemoveAfter”会做这样的事情：

```
 myList = myList.RemoveAfter(maxLength);

  Assert.IsTrue(myList.Count() ==5); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-27T01:20:22.913

```
myList = myList.Take(maxLength).ToList(); 
```

[注意：这会创建一个新列表，我们将其分配给原始列表占位符 (myList)，而不是更改原始列表。]

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T01:21:39.230

`Take`并且`ToList`可以工作（它也会创建新列表）

```
 myList = myList.Take(maxLength).ToList(); 
```

如果您需要保留列表 - [RemoveRange 也在](http://msdn.microsoft.com/en-us/library/y33yd2b5.aspx)那里：

```
 myList.RemoveRange(maxLength, myList.Count - maxLenght); 
```

注意：确保示例适用于列表中的项目少于 maxLength 的情况。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-27T01:22:43.593

你正在寻找[`RemoveRange`](http://msdn.microsoft.com/en-us/library/y33yd2b5.aspx)

例子：

```
if(myList.Count() > maxLength) {
    myList.RemoveRange(maxLength, (mylist.Count()-maxLength));
} 
```

# java - 如何解析 WSDL 文件以提取特定节点的内容

> ID：15102526
> 
> 赞同：2
> 
> 时间：2013-02-27T01:18:16.690
> 
> 标签：java, xml, parsing, wsdl, wsdl2java

这是我的 wsdl 文件的一部分：

```
<wsdl:definitions xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:tm="http://microsoft.com/wsdl/mime/textMatching/" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/" xmlns:mime="http://schemas.xmlsoap.org/wsdl/mime/" xmlns:tns="http://tempuri.org/" xmlns:s="http://www.w3.org/2001/XMLSchema" xmlns:soap12="http://schemas.xmlsoap.org/wsdl/soap12/" xmlns:http="http://schemas.xmlsoap.org/wsdl/http/" targetNamespace="http://tempuri.org/" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/">
- <wsdl:types>
- <s:schema elementFormDefault="qualified" targetNamespace="http://tempuri.org/">
- <s:element name="BinaryConversion">
- <s:complexType>
- <s:sequence>
  <s:element minOccurs="0" maxOccurs="1" name="Binary" type="s:string" /> 
  </s:sequence>
  </s:complexType>
  </s:element>
- <s:element name="BinaryConversionResponse">
- <s:complexType>
- <s:sequence>
  <s:element minOccurs="0" maxOccurs="1" name="BinaryConversionResult" type="s:string" /> 
  </s:sequence>
  </s:complexType>
  </s:element>
- <s:element name="Qos">
- <s:complexType>
- <s:sequence>
  <s:element minOccurs="1" maxOccurs="1" name="Availabilty_10" type="s:int" /> 
  </s:sequence>
  </s:complexType>
  </s:element>
- <s:element name="QosResponse">
  <s:complexType /> 
  </s:element>
- <s:element name="GetQosParameters">
  <s:complexType /> 
  </s:element>
- <s:element name="GetQosParametersResponse">
- <s:complexType>
- <s:sequence>
  <s:element minOccurs="1" maxOccurs="1" name="GetQosParametersResult" type="tns:QoSParameters" /> 
  </s:sequence>
  </s:complexType>
  </s:element>
- <s:complexType name="QoSParameters">
- <s:sequence>
  <s:element minOccurs="0" maxOccurs="1" name="Availability" type="s:string" /> 
  <s:element minOccurs="0" maxOccurs="1" name="Accuracy" type="s:string" /> 
  <s:element minOccurs="0" maxOccurs="1" name="Accessibility" type="s:string" /> 
  <s:element minOccurs="0" maxOccurs="1" name="Latency" type="s:string" /> 
  <s:element minOccurs="0" maxOccurs="1" name="Reliability" type="s:string" /> 
  </s:sequence>
  </s:complexType>
  </s:schema>
  </wsdl:types> 
```

现在我想提取名称可用性、准确性、延迟等。我该怎么做。我使用 Document Builder 进行解析，但我只能提取 wsdl:operations 而不是 wsdl:types

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T01:25:05.353

这是一个很好的 Java/XML 教程（其中之一）：

*   [http://www.vogella.com/articles/JavaXML/article.html](http://www.vogella.com/articles/JavaXML/article.html)

向下滚动到他谈到[XPath](http://www.w3schools.com/xpath/)的部分。这就是获取子节点（例如“QoSParameters”）和其中的所有内容（例如“可用性”、“准确性”等）所需的语法。

# java - 有没有办法在 Spring 安全 MVC 应用程序的属性文件中配置角色

> ID：15102528
> 
> 赞同：0
> 
> 时间：2013-02-27T01:18:18.100
> 
> 标签：java, spring, spring-mvc, spring-security

我有一个弹簧安全 MVC 应用程序。在几个 JSP 文件中，我的代码如下所示：

```
<sec:authorize access="hasAnyRole('ROLE_FOO', 'ROLE_BAR')">
  <!--do something here-->  
</sec:authorize> 
```

`ROLE_FOO`将应用程序部署到生产环境时，我必须进行代码更改（更改为其他内容），因为它具有不同的角色名称。所以我想知道是否有一种方法可以在属性文件中配置这些角色名称，然后在`<sec:authorize>`标签中选择它们。

所以代码看起来像这样：

属性文件：

```
Admin_Roles = ROLE_FOO ROLE_BAR 
```

和 JSP

```
<sec:authorize access="hasAnyRole(<get roles from Admin_Roles in prop file>)">
  <!--do something here-->  
</sec:authorize> 
```

顺便说一句，我使用 Active Directory 进行身份验证，因此这些角色已在 Active Directory 中预先配置用于测试和生产。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T03:40:27.213

不确定如何为可变数量的角色执行此操作，但对于固定数量的角色，您是否尝试过类似的操作？

JSP：

```
<sec:authorize access="hasAnyRole('${adminRole1}', '${adminRole2}')">
  <!--do something here-->  
</sec:authorize> 
```

控制器：

```
@Value("#{myprops.admin_role_1}"}
private String adminRole1;
@Value("#{myprops.admin_role_2}"}
private String adminRole2;
...
@RequestMapping("/hello")
public String hello(final Model model) {
  model.addAttribute("adminRole1", adminRole1);
  model.addAttribute("adminRole2", adminRole2);
  ...
} 
```

和配置 XML：

```
<bean id="myprops"
  class="org.springframework.beans.factory.config.PropertiesFactoryBean">
  <property name="locations">
    <list>
      <!-- External property files -->
      <value>file:${somepathvar}/adminroles.properties</value>
    </list>
  </property>
</bean> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T02:36:49.223

不确定这是最简单的方法。但是您可以编写自己的表达式。

这个链接应该非常有用。[关联](https://stackoverflow.com/questions/14185070/spring-securityintercept-url-pattern-access-id-1/14199105#14199105)

由于每个版本之间存在一些差异。您最好看一下源代码，`DefaultWebSecurityExpressionHandler`以确保在覆盖时不会遗漏任何内容`createSecurityExpressionRoot`

# mongodb - Mongo，通过 id 列表查找

> ID：15102532
> 
> 赞同：80
> 
> 时间：2013-02-27T01:18:53.977
> 
> 标签：mongodb

我有一个返回字符串 MongoDB id 列表的进程，

```
[512d5793abb900bf3e20d012, 512d5793abb900bf3e20d011] 
```

我想向 Mongo 发起一个查询，并以与列表相同的顺序获取匹配的文档。

执行此操作的 shell 符号是什么？

* * *

## 回答 #1

> 赞同：131
> 
> 时间：2013-02-27T04:44:50.083

将字符串转换为 ObjectId 后，您可以使用[`$in`](http://docs.mongodb.org/manual/reference/operator/in/#_S_in)运算符获取列表中的文档。没有任何查询符号可以让文档按您的列表顺序返回，但请参阅[此处](https://stackoverflow.com/questions/22797768/does-mongodbs-in-clause-guarantee-order)了解一些处理方法。

```
var ids = ['512d5793abb900bf3e20d012', '512d5793abb900bf3e20d011'];
var obj_ids = ids.map(function(id) { return ObjectId(id); });
db.test.find({_id: {$in: obj_ids}}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2020-08-16T20:12:56.307

这对我来说在 Robo 3T 中效果很好。无需创建任何对象，只需使用 id 列表。

```
db.getCollection('my_collection').find({'_id':{$in:['aa37ba96']}}) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-03-12T12:51:27.607

// 请求中的 categoryId 逗号分隔“5c875c27d131b755d7abed86,5c875b0ad131b755d7abed81”

```
var ids= req.body.categoryId.split(','); 

db.test.find({ categoryId: { $in: ids } }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T03:14:48.277

如果您的最终目的是通过预先获取的 ids 列表获取具有顺序的文档，您可以将查询结果转换为 mapping(id as key, doc as value) ，然后遍历 ids 列表获取文档。

# replace - 如何使用 perl/shell 脚本替换文本？

> ID：15102535
> 
> 赞同：0
> 
> 时间：2013-02-27T01:19:04.320
> 
> 标签：replace, sed

我有一个模式

猫样本.text

```
\newline</Text> 
```

我正在使用以下命令：

```
sed ':a; N; $!ba; s|\newline</Text>|</Text>|g' sample.text 
```

但以下命令不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T14:53:12.597

你只是想摆脱之前的换行符`</Text>`吗？这只是一个简单的替换：

```
gawk -vRS='\0' -vORS= '{gsub(/\n<\/Text>/,"</Text>")}1' file 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T07:51:16.780

这可能对您有用（GNU sed）：

```
sed '$!N;s/\n\(<\/Text>\)/\1/;P;D' file 
```

或者

```
sed -r '$!N;s|\n(</Text>)|\1|;P;D' file 
```

但是，如果`\newline`是文字：

```
sed 's/\\newline\(<\/Text>\)/\1/g' file 
```

或者

```
sed -r 's|\\newline(</Text>)|\1|g' file 
```

也可以。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T06:50:04.297

我自己找到了解决方案，所以想与大家分享。

```
 sed ':a; N; $!ba; s|\\newline<\/Text>|</Text>|g' sample.text 
```

# c - 扩展 postgresql 代码

> ID：15102536
> 
> 赞同：2
> 
> 时间：2013-02-27T01:19:09.920
> 
> 标签：c, eclipse, function, postgresql, development-environment

继上[一个问题](https://stackoverflow.com/questions/15019257/calling-a-user-defined-function-located-in-postgres-c-in-postgresql-using-a-gu)之后： 在 PostgreSQL 源代码中有一个名为`postgres.c`in的文件`src/backend/tcop`。里面有一个函数叫做`exec_simple_query()`. 我想添加一个调用的行，该调用`start_create_profile()`位于`test.c`与`postgres.c`.

我在 linux (kubuntu/ubuntu) 上使用 eclipse。我按照本教程创建环境[http://wiki.postgresql.org/wiki/Working_with_Eclipse](http://wiki.postgresql.org/wiki/Working_with_Eclipse)

这是test.c：

```
#include "postgres.h"

#ifndef PROGPROFILE_H_
#define PROGPROFILE_H_

/* interfaces */
extern void start_create_profile(List *querytree_list);
extern void create_profile();
extern void check_anomaly(List *querytree_list);

#endif /* Test ProgProf */

void start_create_profile(List *querytree_list){

    ListCell *l;
    ListCell *tl;
    FILE *f;

    //if the file exist just open and write
    //else create and write
    f = fopen ("QueryParsed.txt", "a+");

    Query *query_idr = (Query *)linitial(querytree_list);

    // CMD_SELECT=0 CMD_INSERT=1 CMD_UPDATE=2
    switch (query_idr->commandType)
    {
        case CMD_SELECT:
            fputs("CMD_SELECT, ", f);
        break;

        case CMD_INSERT:
            fputs("CMD_INSERT, ", f);
            break;

        case CMD_UPDATE:
            fputs("CMD_UPDATE, ", f);
        break;

        default:
            break;
    }

    //to have the ID of the table
    foreach(l, query_idr->rtable){
        Oid tab_idT = ((RangeTblEntry *) lfirst(l)) ->relid;
        //char temp1[10];
        char *tab_idTConverted = itoa(tab_idT);
        /* This is not a table */
        if (tab_idT == 0)
            continue;

        fputs(" tab_id:  , ", f);
        fputs(tab_idTConverted, f);

    }

    //to have the name of the targer list
    foreach(tl, query_idr->targetList){
        TargetEntry *tle = (TargetEntry *) lfirst(tl);
        Oid tab_id = tle->resorigtbl;
        int tab_idCast=(int)tab_id;
        //char temp[10];
        char *tab_idConverted = itoa(tab_idCast);
        char *resname=tle->resname;

        fputs("Name of column:  ", f);
        fputs(resname, f);
        fputs(" ID:  ", f);
        fputs(tab_idConverted, f);
        fputs("\n", f);
    }

    //close the file that we write
    fputs("$", f);
    fclose (f);
}

void create_profile(){

}

void check_anomaly(List *querytree_list){

} 
```

但是，当我单击构建时，出现此错误：

```
Description Path    Resource    Location    Type
make: *** [all] Error 2     pgsql       C/C++ Problem
make[1]: *** [all] Error 2      pgsql       C/C++ Problem
make[2]: *** [postgres] Error 1     pgsql       C/C++ Problem
undefined reference to `start_create_profile'   /pgsql/src/backend/tcop postgres.c      C/C++ Problem 
```

我认为问题必须与修改 postgres 源代码有关。任何的想法？？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T04:06:26.813

您可以解决`test.o`在 OBJECT 中添加 makefile的问题`src/backend/tcop`。

一个距离可以

```
subdir = src/backend/tcop
top_builddir = ../../..
include $(top_builddir)/src/Makefile.global

OBJS= dest.o fastpath.o postgres.o pquery.o utility.o test.o

ifneq (,$(filter $(PORTNAME),cygwin win32))
override CPPFLAGS += -DWIN32_STACK_RLIMIT=$(WIN32_STACK_RLIMIT)
endif

include $(top_srcdir)/src/backend/common.mk 
```

# java - gerrit 和 OpenID_SSO

> ID：15102540
> 
> 赞同：1
> 
> 时间：2013-02-27T01:19:29.200
> 
> 标签：java, openid, single-sign-on, gerrit

我设置了一个gerrit服务器。对于身份验证，gerrit 允许[OpenId 和 OpenId_SSO](http://gerrit-documentation.googlecode.com/svn/Documentation/2.5.2/config-gerrit.html#_a_id_auth_a_section_auth)等。第一个工作正常，但需要我输入整个长 OpenId。因为我只想允许一个提供者，所以第二个选项听起来很完美。

要使用它，我必须提供`auth.openIdSsoUrl`“SSO 入口点 URL”参数。

如何找到正确的 URL 以输入？

我已经尝试在正常的 OpenId 登录期间使用wireshark 来监控http 对话。但是那里涉及的 URL 似乎不是正确的。

在这种情况下，“入口点”到底是什么？

顺便说一句：我目前使用自己的 Atlassian Crowd 作为 OpenId 服务器。

编辑：所涉及的java代码可以在[这里](https://gerrit.googlesource.com/gerrit/+/master/gerrit-gwtui/src/main/java/com/google/gerrit/client/auth/openid/)找到。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T14:21:08.663

“入口点”是一个 OpenID 端点 URL。使用它进行身份验证允许 OpenID 服务器说明哪个用户已通过身份验证，而不是要求用户提供他们自己的标识符。除非您提供它，否则它不会在 OpenID 进程中使用，因此它不会显示在 Wireshark 日志中。

从[Crowd 2.6](https://confluence.atlassian.com/display/CROWD/Crowd+2.6+Release+Notes)开始，有一个[端点 URL](https://confluence.atlassian.com/pages/viewpage.action?pageId=59277403#id-1.3WhatisanOpenIDURLoridentifier?-EndpointURLs)，它将以`openidserver/op`.

# c++ - c++ atomic vs lock

> ID：15102553
> 
> 赞同：4
> 
> 时间：2013-02-27T01:20:57.903
> 
> 标签：c++, pthreads, atomic

假设我有一个类 foo：

```
class foo {
    static uint32 count_;
    pthread_mutex_t mu;

    void increase() {
      pthread_mutex_lock(&mu);
      count_++;
      pthread_mutex_unlock(&mu);
    }
} 
```

如果我不使用互斥体，而只有一个 std::atomic 作为 count_，有什么区别吗？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-27T01:29:46.437

这是个很大的差异。`pthread_mutex_lock`可能非常昂贵，因为它可能包含系统调用*。原子增量产生[`lock xadd`](http://en.wikipedia.org/wiki/Fetch-and-add#x86_implementation).

另一个优点是[`std::atomic<...>`](http://en.cppreference.com/w/cpp/atomic/atomic)可能更好的可移植性，因为它是 C++ 标准的一部分。Pthread 调用很可能在 Windows 中不起作用。

^(*) 如果锁已被其他线程持有，则让当前线程休眠。但很可能只会发生[自旋锁](http://en.wikipedia.org/wiki/Spinlock)。)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-27T01:42:05.973

互斥锁很可能实际上是作为一个原子增量实现的，如果你运气不好，在锁上发生争用，还涉及系统调用[当然，假设它不是一个系统无论哪种方式都可以打电话！]。

x86 上的原子解决方案将是一个简单的“加锁”操作。在其他处理器上它可能更复杂，但即便如此，原子是互斥体所需的最低限度，所以无论如何你至少有这么多的工作量。

然后添加互斥锁解锁，它可能没有那么复杂，但它不会完全免费。

所以，是的，选择原子。

但就像所有与性能有关的事情一样，测量“之前”和“之后”，看看它确实提高了性能。

请注意，我看到有人解释说，最初的 gnu C++ 标准库实现实际上是在操作周围使用某种互斥锁完成的，但我相信如果你有一个相当新的 g++ 版本，它应该没问题（至少对于 x86 类型的处理器） ）。微软长期以来一直支持适当的原子操作作为内置，所以应该没问题。其他处理器架构可能会有所不同。

# regex - 如何通过 sed 提取这些字段？

> ID：15102554
> 
> 赞同：1
> 
> 时间：2013-02-27T01:21:00.247
> 
> 标签：regex, sed

我正在尝试在这样的行中查找单个数量：

```
foo=24.587 bar=88 fox=jobs 
```

并提取所有“88”值。列数不一致，因此 awk 后跟一个 cut 不会削减它。

我尝试像这样使用 sed：

```
sed -e 's/.*\s\(bar=.+\)\s.*/\1/g' 
```

这只是转储了整条生产线。我不确定如何更正这个正则表达式，更重要的是为什么这个正则表达式没有达到我的预期？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T01:25:27.310

使用`-r`（扩展正则表达式）。这往往更像您所期望的那样使用正则表达式。但是，您必须从括号中删除反斜杠：

```
$ echo "foo=24.587 bar=88 fox=jobs" | sed -r 's/.*\s(bar=.+)\s.*/\1/g'
bar=88 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T01:23:41.787

```
sed -r 's/.*\s(bar=.+)\s.*/\1/g' 
```

# shapes - 如何绘制立方体以外的形状？

> ID：15102557
> 
> 赞同：1
> 
> 时间：2013-02-27T01:21:08.590
> 
> 标签：shapes, x3dom

如何使用 x3dom 绘制除立方体以外的形状？例如，我要绘制的一种形状是半圆形/圆柱体。我只能找到文档来绘制我已经做过的立方体。我还没有为 x3dom 找到好的文档。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T11:44:20.673

X3DOM actually just wraps X3D. So you may better start with the X3D [documentation](http://www.web3d.org/files/specifications/19775-1/V3.2/Part01/components/geometry3D.html). A quite good overview can be found here: [X3D Slides](http://x3dgraphics.com/slidesets/index.php).

There are some other primitives provided like:

```
<Shape>
  <Sphere radius='1'/>
  <Appearance>
    <Material/>
  </Appearance>
</Shape> 
```

Also the [examples](http://www.x3dom.org/?page_id=5) provide a good [starting point](http://x3dom.org/x3dom/example/x3dom_geoPrimitives.xhtml).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T22:27:06.860

要使用圆柱体，只需在形状节点中使用它

```
<Cylinder /> 
```

正如 misapink 所说，查看 x3d 文档，有一些基本的 x3d 基元，例如球体盒圆柱体锥体。

任何更精细的东西都需要您使用点集等，或者您可以对自己的对象进行建模并通过许多 3d 应用程序、blender、3d max、lightwave 等导出到 x3d

# jquery - 将带有 RJS 的原型 AJAX 调用转换为仅 jQuery

> ID：15102561
> 
> 赞同：0
> 
> 时间：2013-02-27T01:21:35.037
> 
> 标签：jquery, ruby-on-rails, ajax, prototypejs

我正在运行带有 Prototype 和 RJS 的 Rails 3.0 应用程序。我想转换为只使用 jQuery。

我的问题是

**1\. 使用jQuery时是否可以完全摆脱RJS？**

和

**2.如果不是，我如何转换以下内容：**

我的**index.html.erb**中有以下 DIV 元素：

```
<div id="students"></div> 
```

我有一个**ajaxCalls.js.erb**包含以下内容：

```
$.ajax({
    url: '<%=populate_students_path()%>',
    type: 'POST',
    data: 'authenticity_token=' + AUTH_TOKEN,
    dataType: 'html', // Consider changing to HTML if this doesnt work
    beforeSend: function (xhr) {
      xhr.setRequestHeader("Accept", "text/javascript");
    }
  }).done(function (data) {

    // TODO Populate table with populate function
    var users_table = $('#students').dataTable({
      'aData': data
    });
  }); 
```

我得到以下回复：

```
try {
populate("{\"54\":{\"section\":\"-\",\"filter_table_row_contents\":\"<td>\\n  c5leharf\\n</td>\\n<td>\\n  Lehar\\n</td>\\n<td>\\n  Franz}")
} 
```

我有一个**populate.rjs**，其中包含：

```
page.call "populate", @students.to_json 
```

这*可能会*调用以下内容，但我不确定：

```
function populate(json_data) {
  users_table.populate(json_data);
  users_table.render();
} 
```

所以，这里的问题是**

## 如何使我的响应正确呈现？如何从 AJAX 调用检索的数据中删除填充函数？如何获得纯 JSON？

**编辑：Kaeros 的回答有效，我的控制器看起来像：**

```
respond_to do |format|
  format.json { render :json => @students_data } 
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T02:24:50.020

您可以使用类似于您正在使用的 ajax 方法（期望来自服务器的 json）：

```
$.ajax({
    url: '<%=populate_students_path()%>',
    type: 'POST',
    data: 'authenticity_token=' + AUTH_TOKEN,
    dataType: 'json',
    beforeSend: function (xhr) {
      xhr.setRequestHeader("Accept", "text/javascript");
    }
  }).done(function (data) {
    //Do something with the data received as json
  }); 
```

在你的控制器方法中，你只需要返回 json。

```
respond_to do |format|
  format.json { render json: @some_instance_variable }
end 
```

# ruby - 测试红宝石代码

> ID：15102563
> 
> 赞同：-1
> 
> 时间：2013-02-27T01:21:55.403
> 
> 标签：ruby, testing

我用 Ruby 写了正则表达式。我创建了一个文件夹名称“test”并在其中添加了 2 个文件。

*第一个文件：*

```
require 'test/unit'
class MyFirstTest < Test::Unit::TestCase
  def test_for_truth
  end
end 
```

*第二个文件：*

```
require 'my_math'
require 'test/unit'

class MyMathTest < Test::Unit::TestCcase
  def test_addition

  end

  def test_subtraction

  end
end 
```

现在，当我尝试使用命令在 ruby​​ 命令行上运行它时`ruby my_math_test.rb`。

它说

> 没有这样的文件或目录 --ruby

我正在使用红宝石 1.9.3

你知道如何运行这段代码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T01:39:35.973

测试单元测试可以通过输入：

```
rake test 
```

见： http: [//guides.rubyonrails.org/testing.html](http://guides.rubyonrails.org/testing.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T17:35:41.540

我想，我找到了答案

添加完整路径。

例子：

需要“测试/单元”需要“c:/sites/cons/bets”

bets 是我的 .rb 文件所在的目录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T02:53:46.183

不知道你的`my_math`脚本在哪里。但我猜它不在你的`$LOAD_PATH`.

尝试以下操作：

```
require_relative 'my_math' 
```

# php - 在 JS 和/或 PHP 中从 $html 生成 JPEG

> ID：15102565
> 
> 赞同：1
> 
> 时间：2013-02-27T01:21:58.993
> 
> 标签：php, jpeg, screenshot

想要从 PHP 中的 $html 变量获取图像（JPEG）。

脚步：

1.  将我的代码转换为 HTML5 中的画布
2.  在图像中转换我的画布。

我知道这些步骤，但我不知道如何编码。

我不想使用 wkhtmltopdf。

谢谢你的帮助。

PS：看到了（[使用 PHP 的网站截图](https://stackoverflow.com/questions/757675/website-screenshots-using-php)），但它不是 HTML5。

--

编辑：尝试使用它但不工作......

```
var c=document.getElementById("myCanvas");
var ctx=c.getContext("2d");
var img=document.body;
ctx.drawImage(img,10,10); 
```

# c# - ASMX 服务共享单个类实例

> ID：15102569
> 
> 赞同：2
> 
> 时间：2013-02-27T01:22:35.017
> 
> 标签：c#, iis, asmx

我有一个带有 .asmx 扩​​展名的 Web 服务，它指向我的 Web 应用程序中的一个类。添加一些代码以在应用程序启动时输出调试日志后，我可以看到每次用户访问该页面时都会创建一个新的调试日志。

我希望我可以将此 Web 服务配置为只使用一个实例。

这意味着，当第一个用户访问该站点时，它会创建我的 Web 服务的实例，然后之后的所有请求都通过同一类路由，共享相同的状态。

这甚至可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T01:31:20.810

网站本质上是无状态的。这意味着，每个请求通常与任何其他请求无关。

也就是说，您可以在 global.asax 文件中将日志设置为静态变量。注意线程问题。

或者，您可以查看[Elmah](https://code.google.com/p/elmah/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T02:56:58.913

你似乎有很多问题。

首先，ASMX 技术已经过时，不应该用于新的开发。应改为使用 WCF。

接下来，是的，您可以对服务进行多次调用，共享同一个类实例。但是，除非它是线程安全的，否则您必须防止同时访问此类。您应该期望多个服务调用同时调用同一个类实例。

最后，ASMX 不支持单例 Web 服务。您可以做的最好的事情是让多个服务调用都共享同一个对象（小心锁定）。

# winapi - QueryPerformanceCounter() 何时（如果有的话）重置为零？

> ID：15102571
> 
> 赞同：2
> 
> 时间：2013-02-27T01:22:39.963
> 
> 标签：winapi, timing

我找不到任何明确的指示是否/何时 QueryPerformanceCounter() 返回的 64 位值被重置，或者溢出并重置回零。希望它永远不会溢出，因为 64 位为数十年的千兆赫速率计算提供了空间。但是...除了重新启动计算机之外，还有什么可以重置它的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-01-04T06:22:07.093

根据经验，QPC 在系统启动时被重置。

请注意，您不应**依赖**此行为，因为 Microsoft 没有明确说明 QPC 的“零点”是什么，只是说它是一个单调递增的值（模 2^64），可用于高精度计时。

因此，他们完全有权随时修改其行为。例如，它们可以使其返回与`FILETIME`调用产生的值相匹配的值`GetSystemTimeAsFileTime()`，具有相同的分辨率，100ns 滴答率。在这种情况下，它永远不会重置。至少在你或我的有生之年不会。

也就是说，以下程序在运行时`Windows 10 [Version 6.3.16299]`会产生一对相同的值，它们是以秒为单位的系统正常运行时间。

```
#include <windows.h>
#include <iostream>

int main()
{
    LARGE_INTEGER performanceCount;
    LARGE_INTEGER performanceFrequency;

    QueryPerformanceFrequency(&performanceFrequency);

    for (;;)
    {
        QueryPerformanceCounter(&performanceCount);
        DWORD const systemTicks = timeGetTime();
        DWORD const systemSeconds = systemTicks / 1000;
        __int64 const performanceSeconds = performanceCount.QuadPart / performanceFrequency.QuadPart;
        std::cout << systemSeconds << " " << performanceSeconds << std::endl;
        Sleep(1000);
    }
    return 0;
} 
```

适用标准免责声明，您的实际里程可能会有所不同，等等等等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-15T19:02:47.340

似乎在 VirtualBox 中运行的某些 Windows 可能每 20 分钟左右重置一次 QueryPerformanceCounter：[请参见此处](https://www.virtualbox.org/ticket/11951#comment:2)。

随着时间的推移，QPC 更可靠，但为了更好的便携性，应该使用低精度计时器，例如[GetTickCount64](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724411%28v=vs.85%29.aspx)。

# android - 以编程方式更改在另一个 xml 中用作背景的border.xml 的 startColor？

> ID：15102573
> 
> 赞同：1
> 
> 时间：2013-02-27T01:22:41.693
> 
> 标签：android, xml, shape

我在可绘制文件夹中有一个名为border.xml 的xml 文件。在这个 xml 我有

```
<!-- +++++++++++++++++++++  BORDER  +++++++++++++++++++ -->
<item> 
    <shape android:shape="rectangle">
        <solid
            android:id="@+id/shape_border_color" 
            android:color="@color/black" /> 
        <gradient 
            android:id="@+id/shapre_border_gradient" 
            android:startColor="@color/BurlyWood" 
            android:endColor="@color/Blue" 
            android:angle="270"
        /> 
<!-- ++++++++++++++++++++ ROUND CORNERS ++++++++++++++++++++++++++++ -->
        <corners
            android:id="@+id/shape_border_corners" 
            android:bottomRightRadius="7dp" 
            android:bottomLeftRadius="7dp" 
            android:topLeftRadius="7dp" 
            android:topRightRadius="7dp"
    /> 
    </shape>
</item>   

<!-- +++++++++++++++++++++++  BACKGROUND ++++++++++++++++++++++++++ -->
<item 
    android:left="5dp" 
    android:right="5dp"  
    android:top="5dp" >  
    <shape android:shape="rectangle"> 
        <gradient 
            android:id="@+id/shape_background" 
            android:id="@+id/hr_design_background_gradient" 
            android:startColor="@color/DarkOrchid" 
            android:endColor="@color/LawnGreen" 
            android:angle="270"/>
    </shape>
</item> 
```

我使用上面的 xml 文件作为`LinearLayout`main.xml 文件中的背景，使用以下代码

```
<LinearLayout 
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_weight="1"
    android:padding="0dp"
    android:background="@drawable/border_o2"> 
```

在我的 Main.java 活动中，我有兴趣更改边框`start and end colors`以及角的`background`和`Radius`角

例如，如果我使用 TextView，我知道如何更改某个 id 的背景。但我不确定如何更改项目/形状/渐变值。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T01:44:22.833

一种方法是定义第二个可绘制资源，称为 drawable/alternate_background.xml。在此文件中，您可以对替代颜色、半径值等进行编码。

然后您以编程方式加载备用资源。

```
linearLayout.setBackgroundResource(R.drawable.alternate_background); 
```

FWIW，这种方法的一个优点是您的视图仍然是外部化的。因此，您可以使用 Eclipse 布局编辑器来预览更改，而不是等到运行时才能看到更改的效果。

# css - Firefox 使用浮动和溢出隐藏的意外换行

> ID：15102575
> 
> 赞同：14
> 
> 时间：2013-02-27T01:22:49.820
> 
> 标签：css, firefox, css-float, overflow

我有一个包含两个项目的容器 div：a`.button`和 a`.box`里面有文本。`.button`首先出现并向右浮动。`.box`没有浮点数[这是一个约束 - 由于其他类似的结构依赖于没有浮点数，我无法将其浮动]。`.box`必须`overflow: hidden;`建立一个新的块格式化上下文。这允许`.box`跨越“100% 到”先前的浮动元素`.button`.

`.outer-container`容纳所有这些并且浮动正确。

[http://jsfiddle.net/6qAwA/5/](http://jsfiddle.net/6qAwA/5/)

在 Chrome（26.0.1410.12 beta-m PC、25.0.1364.99 Mac）、Safari（6.0.2 Mac）和 IE8-9 中，这将以所需的方式运行。`.box`的文本保持在一行上，并且由于`.outer-container`' 的正确浮动，将恰好是它需要的大小。然而，在 Firefox 中，文本被分成另一行。

![](../Images/099799aa55923249252f50932a76db04.png)

`.button`当is 向左浮动时，我也发现了一个类似的问题- 除了 Firefox 之外，我在所有东西中都得到了想要的行为。

我已经看到了适用于 PC 的 Firefox 16.0.1 和 19.0，以及适用于 Mac 的 18.0.1 和 19.0。这是一个错误吗？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-08-07T11:02:43.457

我今天遇到了这个问题，即使在将其设置为之后，**浮动节点**也只会在 Firefox 中换行，原因是**容器节点**的样式设置为set to 。因此，在**容器节点**上重置to的值为我解决了这个问题。`display``inline-block`**`white-space``nowrap``white-space``normal`**

 ***** * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-27T01:32:32.167

添加`display: inline-block;`到`.box`：

[演示](http://jsfiddle.net/6qAwA/14)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T02:16:17.593

实际上，当您寻求像 [http://jsfiddle.net/Volker_E/x5rPd/](http://jsfiddle.net/Volker_E/x5rPd/)这样的解决方案时，您 不需要一秒钟`div`来获得所需的行为。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-30T12:20:53.103

`white-space: normal`没有为我做这个把戏。起作用的是`white-space: nowrap;`直接文本容器。****

# macos - “ps aux”有效，但“ps -aux”无效

> ID：15102576
> 
> 赞同：14
> 
> 时间：2013-02-27T01:22:55.063
> 
> 标签：macos, unix, terminal, command

这似乎是一个愚蠢的问题，但我一直无法找到明确的答案。

[该网站](http://www.linfo.org/ps.html)声明破折号是可选的

```
ps aux 
```

但是，`ps aux`有效但`ps -aux`会引发错误`no user named 'x'`。有什么想法可能是这里的问题吗？运行 Mac 10.8.2。谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-27T01:26:06.230

```
man ps 
```

会给你这个：

> ```
>  The biggest change is in the interpretation of the -u option, which now
>  displays processes belonging to the specified username(s).  Thus, "ps
>  -aux" will fail (unless you want to know about user "x").  As a conve-
>  nience, however, "ps aux" still works as it did in Tiger. 
> ```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-27T01:37:43.877

回到过去（从 1970 年代后期），基本上有两种 UNIX，贝尔实验室的 AT&T 版本和加州大学伯克利分校的 BSD 版本。ps 的选项在两个版本中是不同的。OS X 现在主要符合现代 UNIX 标准，该标准遵循 AT&T 对 ps 的选项。但由于 BSD ps 不需要前导“-”选项，而且很多人习惯于键入“ps aux”，Apple 决定保留其原始 BSD 解释的序列。

# javascript - 如何最大化部署在 USB 驱动器上的视频播放 web 应用程序的兼容性？

> ID：15102584
> 
> 赞同：2
> 
> 时间：2013-02-27T01:23:37.857
> 
> 标签：javascript, html, flash, internet-explorer-7, jwplayer

我目前正在使用带有 JWPlayer 6 的基于 HTML/Javascript 的 Web 应用程序，该应用程序具有章节选择菜单并播放相应的视频。该网络应用程序将部署在 USB 驱动器上并交付给各种客户端，因此我选择了 HTML5 路线以获得最佳兼容性和最少的麻烦……但后来我发现许多客户端可能正在使用 IE7 和类似时代浏览器。

由于 Adob​​e Flash 的安全协议限制应用程序从 USB 驱动器访问本地 SWF 和视频文件，我遇到了问题。也就是说，用户必须授予 Flash 权限才能访问 USB 驱动器中的文件——这对客户端来说是不切实际的需求（许多人在计算机上接受培训仅用于特定用途）。

有没有办法绕过 Flash 的安全协议以确保闪存驱动器的 IE7+ 兼容性？还是我必须另辟蹊径为过时的硬件提供视频？

# menu - 在不弄乱间距的情况下移动菜单

> ID：15102589
> 
> 赞同：0
> 
> 时间：2013-02-27T01:24:22.673
> 
> 标签：menu, navigation

这是我正在开发的网站：

[http://artificialmarketingsolutions.com/](http://artificialmarketingsolutions.com/)

我想将导航菜单移到左侧，使其与内容对齐。但是当我更改页边距时，它会将菜单全部压缩到同一个单词上。

有小费吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T01:32:44.260

在您的 317 行`style.css`的`#nav ul`声明下，更改`padding: 0 0 0 10px;`为`padding: 0`。它解决了你的问题吗？

# php - PHP MySQL 表单插入

> ID：15102592
> 
> 赞同：0
> 
> 时间：2013-02-27T01:24:38.660
> 
> 标签：php, mysql

我正在为一个项目创建一个任务管理列表。我创建了一个表单来添加每个任务并将其回显到列表中。

我想在表单中添加一个选择标签，允许用户选择任务的大小（小、中、大或特大）。

我的数据库设置了 3 列，一个自动递增的唯一键、描述和状态。

我想在输入描述的同时操纵状态的值。例如，从下拉列表中选择“小”将使输入的任务值为“1”，并且列表中的外观与状态为“2”的描述不同。

非常感谢任何反馈！

这是我的代码：

```
<?php
    mysql_connect('localhost', 'root', 'root');
    $query = "INSERT INTO `project1`.`tasklist` (
    `key` ,
    `description` ,
    `status`    
    )
    VALUES (
    NULL , '".$_GET["newToDo"]."', '".$_GET["status"]."'    
        );";
    mysql_query($query);
    header('Location: index.php');
?>

<?php
    mysql_connect('localhost', 'root', 'root');
    foreach($_GET['toDone'] as $toDoKey) {
        $query = "UPDATE `project1`.`practice` SET `status` = '0' WHERE `tasklist`.`key` =".$toDoKey.";";
        mysql_query($query);
    }
        header('Location: index.php');
?>

<h1>Get stuff done!</h1>

<form action = "secondary.php" method="GET">
    <label for="newToDo">New To Do:</label>
    <input type="text" name="newToDo" id="newToDo" />

    <select name="taskSize">
    <option value="small" selected="selected">Small</option>
    <option value="medium">Medium</option>
    <option value="large">Large</option>
    <option value="extraLarge">X-Large</option>
    </select>

    <input type="submit" />
    </form>

<h2>to do</h2>
<form action="toDone.php" method="GET">
<ul>    
   <?php 
    mysql_connect('localhost', 'root', 'root');
    $query = "SELECT * FROM  `project1`.`tasklist` WHERE `status` = 1";
    $result = mysql_query($query);
    while ($row = mysql_fetch_assoc($result)) {
        echo $row['description'];
        echo "</li>";
    }
   ?>
    </ul>
<input type="submit" />

    <h2>done</h2>

    <ul id="dunzo"> 
       <?php 
        $query = "SELECT * FROM  `project1`.`tasklist` WHERE `status` = 0";
        $result = mysql_query($query);
        while ($row = mysql_fetch_assoc($result)) {
            echo "<li>";
            echo $row['description'];
            echo "</li>";
        }
       ?>
        </ul> 
```

我想要的是根据下拉列表中选择的内容更改列表中每个新行的外观。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T05:21:22.023

伙计，只需将一件事添加到您的代码中..

[不推荐使用 mysql_ 函数](https://stackoverflow.com/tags/mysql/info)

# c++ - 如何将每个顶点的属性传递给 GLSL 着色器

> ID：15102593
> 
> 赞同：0
> 
> 时间：2013-02-27T01:24:45.487
> 
> 标签：c++, opengl, shader

如果可能的话，如何将自定义顶点属性发送到着色器并访问它？请注意，模型将使用 VBO 进行渲染。例如，假设我有一个顶点结构如下：

```
struct myVertStruct{
    double x, y, z; // for spacial coords
    double nx, ny, nz; // for normals
    double u, v; // for texture coords
    double a, b; // just a couple of custom properties 
```

例如，要访问法线，可以调用着色器：

```
varying vec3 normal; 
```

这将如何为自定义属性完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T17:26:31.120

首先，您不能使用双精度浮点数，因为几乎任何 GPU 都不支持这些浮点数。因此，只需将结构的成员更改为浮点数...

在 glsl 中定义相同的结构。

```
struct myVertStruct
{
    float x, y, z; // for spacial coords
    float nx, ny, nz; // for normals
    float u, v; // for texture coords
    float a, b; // just a couple of custom properties
} myStructName; 
```

然后，在 c/c++ 中实例化结构数组，创建 vbo，为其分配内存，然后将其绑定到着色器：

```
struct myVertStruct
{
    float x, y, z; // for spacial coords
    float nx, ny, nz; // for normals
    float u, v; // for texture coords
    float a, b; // just a couple of custom properties
};

GLuint vboID;
myVertStruct myStructs[100]; // just using 100 verts for the sake of the example
// .... fill struct array;

glGenBuffers(1,&vboID); 
```

然后当你绑定属性时：

```
glBindBuffer(GL_ARRAY_BUFFER, vboID);
glVertexAttribPointer(0, sizeof(myVertStruct) * 100, GL_FLOAT, GL_FALSE, 0, &struct);
glBindBuffer(GL_ARRAY_BUFFER, 0); 
```

...然后将您的 vbo 绑定到您使用上面使用的 glsl 段创建的着色器程序。

# ios - 如何在 UITableView 中仅显示数据源的子集？

> ID：15102596
> 
> 赞同：0
> 
> 时间：2013-02-27T01:24:48.060
> 
> 标签：ios, uitableview, datasource

我想换出表格视图的内容。数据源的元素带有一个标志，表示是否应该显示它们。

最终，我希望能够根据标志交换显示的内容。不过，就目前而言，我将确定以下问题的答案。

**我的表如何只显示数据源的子集？**

我*不是*要求 [tableView 重新加载]，这似乎是我的大多数搜索结果。我想根据标准（在本例中为标志）一次只显示一些数据源项。

为了清楚起见，这里是一个功能示例。

* * *

我们在一个数组中有 50 个 Friend 元素。它是我们表的数据源。当我们加载应用程序时，会显示所有 50 个朋友。

其中 20 个朋友在 Friend 类中被标记为“真棒”。当您点击 Awesome 按钮时，这 20 个将显示在表格中。

其中 10 个在 Friend 类中被标记为“Lame”。当您点击 Lame 按钮时，这 10 个将显示在表格中。

* * *

我需要查看哪些方法来实现这一目标？TableView 的讨论非常广泛，到目前为止，我一直在查看错误和错误，但没有令人满意的结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T01:30:28.860

您可以设置一个`NSPredicate`来过滤 fetchResults 将返回的值：

```
- (NSFetchedResultsController *)fetchedResults {
...

NSPredicate *predicate = [NSPredicate predicateWithFormat:@"flag == %@", @"Awesome"];
    [fetchRequest setPredicate:predicate];  

... 
```

这将只返回那些符合条件的记录`NSPredicate`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-27T01:31:12.897

保留两个数据结构。第一个是主数据集。第二个仅包含您要显示的数据。将表格指向第二组数据。

基本上，当您想用不同的子集重新加载表时，创建一个新数组，迭代主数据集并将您想要的对象添加到新数组中。

由于第二个数组只引用了主数组中的原始对象，因此几乎没有额外的开销。

**更新**：为了扩展 Rob Napier 的评论，我提到的主数据结构将是“模型”，第二个数据结构将是支持表数据源的数据。

# forms - Magento 管理员表单时间字段

> ID：15102597
> 
> 赞同：1
> 
> 时间：2013-02-27T01:24:51.910
> 
> 标签：forms, magento, magento-1.7, timefield

我正在尝试将时间字段添加到管理表单，但它不起作用：

```
 $fieldset->addField('sched_time', 'time', array(
      'label'     => Mage::helper('servicemanager')->__('Scheduled Time'),
      'style'     => 'width:45px',
      'class'     => 'required-entry',
      'required'  => true,
      'name'      => 'sched_time',
      'value'  => '09,00,00',
    )); 
```

问题如下：

1.  数据未存储在数据库中（'sched_time' 是 mysql 时间字段）
2.  “价值”不做任何事情。我需要将默认值设置为 09:00:00（上午 9 点）

参考：[http ://www.excellencemagentoblog.com/magento-admin-form-field](http://www.excellencemagentoblog.com/magento-admin-form-field)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-29T09:35:22.777

您需要在控制器的`saveAction()`方法中手动编写一些代码，如下所示：

```
public function saveAction(){
    $id = $this->getRequest()->getParam('id');
    $model = Mage::getModel('module/model')->load($id);
    $time = $this->getRequest()->getParam('sched_time');
    $sched_time = $time[0] . ':' . $time[1] . ':' . $time[2]; //HH:MM:SS
    $model->setData('sched_time', $sched_time);
    $model->save();
} 
```

希望这将有助于未来的游客！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T17:26:30.553

你需要做一个观察者，经过几个小时试图自己找到这个我遇到了这个链接[magento weight 属性没有小数点](https://stackoverflow.com/questions/15401771/magento-weight-attribute-without-decimal-points)

希望这会有所帮助，因为它帮助了我

# java - 字符串数组到二维字符串数组

> ID：15102598
> 
> 赞同：0
> 
> 时间：2013-02-27T01:24:54.863
> 
> 标签：java, arrays, multidimensional-array

我有一个字符串数组， map[] 看起来像......

“####”

“#GB#”

“#BB#”

“####”

所以 map[1] = "#GB#"

如何将其转换为 2D 数组，以便 newMap[1][1] 给我“G”？

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T01:28:53.603

如果你真的需要它，你可以[`String.toCharArray`](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#toCharArray%28%29)在每个元素数组上使用它来将它们转换成一个数组。

```
String[] origArr = new String[10];

char[][] charArr = new char[10][];

for(int i = 0; i< origArr.length;i++)
    charArr[i] = origArr[i].toCharArray(); 
```

如果你想把它分解成`String[]`，你可以使用（感谢 Pshemo）

```
String[] abc = "abc".split("(?!^)"); //-> ["a", "b", "c"] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T01:52:37.003

这不会是动态的。需要 O(n) + m 才能到达字符串的一个字符。一种更快、更动态的方法是 Hashmap，其中键是字符串，值是 char 数组。有点不必要的复杂，但您无需经历调整原始数组大小的繁琐过程即可获得查找和单独的字母字符。

# c# - Monotouch UICalendar 在自定义数据库中存储事件

> ID：15102602
> 
> 赞同：2
> 
> 时间：2013-02-27T01:25:19.133
> 
> 标签：c#, iphone, xamarin.ios, icalendar

我正在使用[https://github.com/Clancey/UICalendar](https://github.com/Clancey/UICalendar)

我想将它添加为一行的事件存储在我的自定义数据库表中。但是，我目前没有看到 UICalendar 库实际上公开了任何事件来执行此操作。将使用 UICalendar 添加的事件存储到自定义数据库中的最佳方法是什么？或者至少可以参加活动？

非常感谢任何帮助！

[编辑]

看起来我需要用来`EKEvent`查找当前保存的值。我如何从当前被触发的事件中获取值以从我的应用程序中保存？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T10:24:32.260

似乎 UICalendar 只是视觉组件。您应该通过自己的代码处理存储/加载事件。例如，通过 SQLite-net ORM 库 ( [http://code.google.com/p/sqlite-net/](http://code.google.com/p/sqlite-net/) )。

如果您想使用 UICalendar 在系统日历中显示/编辑事件，请使用`EKEvent`和其他`EventKit`框架类来获取该信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T00:32:28.527

我实际上将 UICalendar 项目导入到我的项目中，并对`CalendarViews.cs`line进行了更改，`258`这就是有趣的开始。

下面您可以确切地看到我为拦截事件所做的工作，以便他们可以将我需要存储的一些自定义数据与应用程序的事件关联起来。基本上这将拦截事件并呈现`DVC`或`DialogViewController`处理一些额外的用户交互。从这里你可以相应地保存东西。

```
 private void portriatNavBar ()
        {
            //  _leftButton = new UIBarButtonItem("Calendars", UIBarButtonItemStyle.Bordered, HandlePreviousDayTouch);
            NavigationItem.LeftBarButtonItem = _orgLefButton;
            NavigationItem.Title = "Calendar";
            _rightButton = new UIBarButtonItem (UIBarButtonSystemItem.Add, delegate {
                addController = new EKEventEditViewController ();   
                // set the addController's event store to the current event store.
                addController.EventStore = Util.MyEventStore;
                addController.Event = EKEvent.FromStore(Util.MyEventStore);
                addController.Event.StartDate = DateTime.Now;
                addController.Event.EndDate = DateTime.Now.AddHours(1);

                addController.Completed += delegate(object theSender, EKEventEditEventArgs eva) {
                    switch (eva.Action)
                    {
                        case EKEventEditViewAction.Canceled :
                        case EKEventEditViewAction.Deleted :
                        case EKEventEditViewAction.Saved:
                        this.NavigationController.DismissModalViewControllerAnimated(true);

                        break;
                    }
                };

                // Going to create a precursor to actually displaying the creation of a calendar event so we can grab everything correctly
                RootElement _ctRoot = new RootElement ("Task Details") {
                    new Section () {
                        new RootElement ("Clients") {
                            AppSpecificNamespace.TaskController.GetClientsForCalendar ()
                        },
                        new RootElement ("Task Types") {
                            AppSpecificNamespace.TaskController.GetTypesForCalendar ()
                        }
                    },
                    new Section () {
                        new StyledStringElement ("Continue", delegate {
                            this.NavigationController.PopViewControllerAnimated (true);
                            this.NavigationController.PresentModalViewController (addController, true);
                        }) { Alignment = UITextAlignment.Center, TextColor = UIColor.Blue }
                    }
                };
                DialogViewController AppSpecificDVC = new DialogViewController (_ctRoot);
                this.NavigationController.PushViewController (AppSpecificDVC, true);
                //this.NavigationController.PresentViewController (AppSpecificDVC, true, null);
            });

            NavigationItem.RightBarButtonItem = _rightButton;
        } 
```

希望这对其他人有帮助。

# ms-access - MS Access 日期比较宏

> ID：15102607
> 
> 赞同：1
> 
> 时间：2013-02-27T01:25:35.307
> 
> 标签：ms-access, macros

我正在尝试为小型 Access DB 编写一个宏，因此每次有人打开表时，都会检查到期日期列，以及消息框是否在日期警报上留下一周或更短的时间。

就像是：

```
 if(ExpiryDate <= NOW()+7) SHOW ERROR 
```

有什么简单的方法可以做到这一点？！

我使用 SQL，但以前从未对 Access 做过任何事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T02:12:03.520

您的代码非常正确。也许你可以使用

```
 if(ExpiryDate <= NOW()+7) 
  then
 msgbox("Expiration Date too long")
 end if 
```

Access 数据库实际上并没有触发器，因此您需要将其放入该字段的“更新后”事件中。

或者，您可以为该字段提供验证规则。为此，请在设计视图中转到您的表，选择您的 ExpiryDate 字段，单击“...”对话框以打开您的表达式构建器，然后输入

```
 <= now() +7 
```

您可以提供验证文本，当用户违反您的规则时，该文本会自动提醒用户。

# android - 如何用自定义对象打包散列集

> ID：15102608
> 
> 赞同：4
> 
> 时间：2013-02-27T01:25:38.320
> 
> 标签：android, hashmap, hashset, parcelable

我正在 android 中实现一个应用程序，我需要让我的 objets parcelables 在活动之间移动。我在服务器中使用休眠，所以我的类有哈希集作为属性，我不知道如何打包。

这是我的代码和我的尝试......但我不知道它是否可以，我不知道要写信给包裹。另外我想知道我是否在 DATE 的包裹和我的其他对象作为属性方面做得很好

```
public class Incidencia implements Parcelable {

// Atributos
private String id_incidencia;
private String estado;
private double latitud;
private double longitud;
private Date fecha_creacion;
private Date fecha_cierre;

private Puesto puesto;
private SubTipo subtipo;

private Set<iTarea> iTareas = new HashSet<iTarea>();

// Constructores
public Incidencia() {}

public Incidencia(String id, String est, double lat, double lon, Date f_cre, Date f_cie, Puesto pue, SubTipo sub, Set<iTarea> iTa) {
    this.id_incidencia = id;
    this.estado = est;
    this.latitud = lat;
    this.longitud = lon;
    this.fecha_creacion = f_cre;
    this.fecha_cierre = f_cie;
    this.puesto = pue;
    this.subtipo = sub;
    this.iTareas = iTa;
}

// Necesarios para que sea Parcelable
public Incidencia(Parcel in) {
    this.id_incidencia = in.readString();
    this.estado = in.readString();
    this.latitud = in.readDouble();
    this.longitud = in.readDouble();
    this.fecha_creacion = new Date(in.readLong());
    this.fecha_cierre = new Date(in.readLong());
    this.puesto = (Puesto)in.readParcelable(Puesto.class.getClassLoader());
    this.subtipo = (SubTipo)in.readParcelable(SubTipo.class.getClassLoader());
    this.iTareas = (Set<iTarea>) in.readHashMap(iTarea.class.getClassLoader());

}

public void writeToParcel(Parcel dest, int flags) {
    dest.writeString(this.getId_incidencia());
    dest.writeString(this.getEstado());
    dest.writeDouble(this.getLatitud());
    dest.writeDouble(this.getLongitud());
    dest.writeLong(this.getFecha_creacion().getTime());
    dest.writeLong(this.getFecha_cierre().getTime());
    dest.writeParcelable((Parcelable) this.puesto, flags);
    dest.writeParcelable((Parcelable) this.subtipo, flags);
}

public int describeContents() {
    return 0;
}

public static final Parcelable.Creator<Incidencia> CREATOR = new Parcelable.Creator<Incidencia>() {
    public Incidencia createFromParcel(Parcel in) {
        return new Incidencia(in);
    }

    public Incidencia[] newArray(int size) {
        return new Incidencia[size];
    }
}; 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-27T02:18:09.167

我相当肯定它不会起作用，主要是因为 a`Set`不是 a `Map`。更好的方法是让您使用 方法从集合中获取对象数组，`Set.toArray`并使用 将[`Parcel.writeTypedArray`](http://developer.android.com/reference/android/os/Parcel.html#writeTypedArray%28T%5B%5D,%20int%29)其写入包裹。然后您可以在重新创建对象时读取数组并自己填充 Set 。这也需要你的`iTarea`类实现`Parcelable`，但它是一个更好的解决方案，然后尝试将 a`HashSet`作为`HashMap`.

顺便说一句，你的其他对象和日期应该没问题。

# php - 空帖错误

> ID：15102609
> 
> 赞同：1
> 
> 时间：2013-02-27T01:25:55.040
> 
> 标签：php, jquery, pdo

如果帖子为空，我需要让我的脚本检测到，以便它会发布错误。现在，当我的帖子为空时，它会发布所有结果。

我的代码

```
$query = $db->prepare("SELECT `media`.`id`, `media`.`title` FROM `media` WHERE `media`.`title` LIKE :keywords");

$keywords = (isset($_POST['keywords']) === true) ? $_POST['keywords'] : '';
$query->bindValue(':keywords', '%' . $keywords . '%', PDO::PARAM_STR);

$arr = array();
$query->execute();
while( $row = $query->fetch(PDO::FETCH_ASSOC) ) {
    $arr[] = array( "id" => $row["id"], "title" => $row["title"]);
}
echo json_encode( $arr );

?> 
```

和我的剧本

```
$(document).ready(function(){
    $(".search").click(function(){
        $.post("search.php", { keywords: $(".keywords").val() }, function(data){
            $("div#search").empty()
            $.each(data, function(){
                $("div#search").append("- <a href='#?id=" + this.id + "'>" + this.title + "</a><br>");
            });
        }, "json");
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T01:30:39.673

添加这个：

```
if(empty( $keywords ) ) {
     // Show some error
}
else{

   // your search code here ...
} 
```

**但最好在发布之前也检查 JS**

# symfony - Symfony2，$form->bind() 不调用实体的加法器方法

> ID：15102613
> 
> 赞同：3
> 
> 时间：2013-02-27T01:26:11.927
> 
> 标签：symfony, doctrine-orm, many-to-many

对不起，我的英语不好，我不是母语人士。如果需要，请随时更正我的文字。

这个问题真的很简单（它在本文的末尾），但我已经写了一些研究和测试的理由。

## 基本原理

如果你愿意，你可以跳过这个理由，直接跳到问题本身。

我已经尝试了几个小时，试图在 Symfony2 控制台上使用`doctrine:generate:entities`和从反面保持多对多关系。`doctrine:generate:crud`

从拥有方，关系保存在数据库中，生成的 crud 开箱即用，但不是从反面（这是预期的： http: [//docs.doctrine-project.org/en/2.0.x/参考/关联映射.html#owning-side-and-inverse-side](http://docs.doctrine-project.org/en/2.0.x/reference/association-mapping.html#owning-side-and-inverse-side) )

我想要的是让它从反面工作，而不改变自动生成的控制器；我只想更改模型（实体）。

简单的方法是向控制器添加几个自定义代码行：

```
// Controller that works the way I want
// Controller/AlunoController.php

...

public function createAction(Request $request)
{
    $entity  = new Aluno();
    $form = $this->createForm(new AlunoType(), $entity);
    $form->bind($request);

    if ($form->isValid()) {
        $em = $this->getDoctrine()->getManager();

        // begin custom code
        foreach ($entity->getResponsaveis() as $responsavel) {
            $responsavel->addAluno($entity);
        }
        // end custom code

        $em->persist($entity);
        $em->flush();

        return $this->redirect($this->generateUrl('aluno_edit', array('id' => $entity->getId())));
    }

    return array(
        'entity' => $entity,
        'form'   => $form->createView(),
    ); 
}

... 
```

前面的代码有效，但这不是我想要的，因为那些自定义代码行引用关系逻辑，并且应该集中在实体本身中（如果没有，它必须在更新这个的控制器中复制实体）。

因此，我接下来要做的是更改 Entity 文件中的加法器和删除器以执行所需的逻辑，添加代码以自动更新反向和拥有方（如[http://docs.doctrine-project.org/中的建议） en/2.0.x/reference/association-mapping.html#picking-owning-and-inverse-side](http://docs.doctrine-project.org/en/2.0.x/reference/association-mapping.html#picking-owning-and-inverse-side)和[https://stackoverflow.com/a/7045693/1501575](https://stackoverflow.com/a/7045693/1501575)）

```
// Entity/Aluno.php

...

/**
 * Add responsaveis
 *
 * @param \MyBundle\Entity\Responsavel $responsaveis
 * @return Aluno
 */
public function addResponsavei(\MyBundle\Entity\Responsavel $responsaveis)
{

    /* begin custom code */
    //var_dump('addResponsavei');
    $responsavel->addAluno($this);
    /* end custom code */

    $this->responsaveis[] = $responsaveis;
    return $this;
}

... 
```

这应该有效，因为当控制器中有相同的代码时它确实有效，但实际上却没有。

问题是在控制器中运行`Aluno##addResponsavei()`时永远不会调用该方法`$form->bind($request)`（那里的第一个代码示例）（我通过 var_dump() 行实现了这一点。我还将 var_dumps 放在其他一些 getter 中，并且那些其他方法被称为普通的）。

所以，所有的常规 setter 确实都被调用 inside `$form->bind($request)`，但不是这个。这很奇怪，因为方法名称是由 `doctrine:generate:entities' 自动生成的，我认为这会使 $form->bind() 知道如何调用所有的 setter、getter 和 adders。

## 问题

为什么 $form->bind() 不调用加法器方法 (Aluno##addResponsavei())？

是否有不遵循的特殊命名约定`doctrine:generate:crud`阻止该方法被找到和执行？

## 解决方案

感谢 user1452962 的评论以及后来 Elnur Abdurrakhimov 的回答，我已经开始工作了，它实际上非常简单。

我所要做的就是在持有关系反面的属性中将选项'by_reference'添加为false，然后突然`addResponsavei()`开始被调用。

```
// Form/AlunoType.php

...

$builder
        ->add('nome')
        ->add('cidade_natal')
        ->add('nascimento')
        ->add('email')
        ->add('endereco')
        ->add('nome_sem_acento')
        ->add('data_hora_cadastro')
        ->add('responsaveis', null, array('by_reference' => false))
        ->add('turmas', null, array('by_reference' => false))

... 
```

这样，关系逻辑就从控制器中消失了，这正是我所寻找的。谢谢你们。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-27T10:18:32.497

您需要将[`by_reference`选项](http://symfony.com/doc/master/reference/forms/types/collection.html#by-reference)设置为`false`才能调用加法器。

# c# - SaveFileDialog 保存按钮事件

> ID：15102614
> 
> 赞同：2
> 
> 时间：2013-02-27T01:26:13.770
> 
> 标签：c#, asp.net, events, savefiledialog

好的，我这里有这个场景。我将一个 URL 指向用户以允许他们开始下载。下载按钮有一个类似 www.mydomainname/files/abc.mp3 的 navigateURL。所以当用户点击它时，它会自动弹出 SaveFileDialog 让用户选择他们的保存目的地。我的问题是，我们是否可以访问 SaveFileDialog 中的按钮单击事件？喜欢 FileOk 事件？我想要实现的是我想跟踪文件被下载的次数。任何指针将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T01:44:17.697

您可以检查 FileName 属性是否为空。如果可能的话，也可能值得使用服务器日志来监控是否允许热链接，因为跟踪对话框不会跟踪下载文件的所有可能方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T03:54:26.900

发送文件的流完成后，将日志添加到数据库中，这将帮助您生成报告或执行简单的 SQL 以获取下载歌曲的次数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T16:49:25.693

[在 ASP.Net 中跟踪文件下载点击次数/计数](https://stackoverflow.com/questions/3154856/track-file-download-hits-count-in-asp-net)

看看这个问题的答案。这似乎是一种更合适的方法。

# haskell - 如何处理 Haskell 中的表达式？

> ID：15102615
> 
> 赞同：9
> 
> 时间：2013-02-27T01:26:14.470
> 
> 标签：haskell, expression

假设我有：

```
f :: Double -> Double
f x = 3*x^2 + 5*x + 9 
```

我想计算这个函数的导数并写

```
derivate f 
```

以便

```
derivate f == \x -> 6*x + 5 
```

但如何定义`derivate`？

```
derivate :: (a -> a) -> (a -> a)
derivate f = f' -- how to compute f'? 
```

我知道没有本地方法可以做到这一点，但是有没有图书馆可以做到这一点？

我们是否必须依靠“元”数据类型来实现这一点？

```
data Computation = Add Exp Expr | Mult Expr Expr | Power Expr Expr -- etc 
```

那么，为每个函数做一个对应的构造函数是不是很痛苦呢？但是，数据类型不应代表函数（解析器除外）。

由于其术语重写功能，[Pure](https://en.wikipedia.org/wiki/Pure_%28programming_language%29)是一个很好的选择吗？它不是也有它的缺点吗？

清单负担得起吗？

```
f :: [Double]
f = [3, 5, 9]

derivate :: (a -> [a])
derivate f = (*) <$> f <*> (getNs f)

compute f x = sum $
    ((*) . (^) x) <$> (getNs f) <*> f

getNs f = (reverse (iterate (length f) [0..])) 
```

Haskell 现在看起来它依赖于 LISP，但语法不太合适。等待一起使用的函数和参数完全存储在数据类型中。另外，这不是很自然。

它们似乎不够“灵活”，无法实现`derivate`多项式以外的函数，例如单应函数。

例如，现在我想在游戏中使用衍生品。角色在使用函数制作的地板上奔跑，如果地板足够陡峭，我希望他滑行。

我还需要为各种目的求解方程。一些例子：

我是一艘宇宙飞船，我想打个盹。在我睡觉的时候，如果我不小心放置自己，我可能会因为重力而坠毁在一个星球上。我没有足够的气体远离天体，我也没有地图。所以我必须把自己放在这个区域的物体之间，这样它们对我的引力影响的总和就会被抵消。 `x`是我的`y`坐标。`gravity`是一个函数，它接受两个对象并返回它们之间的引力矢量。如果有两个物体，比如说地球和月球，除了我之外，我需要做的就是找到去哪里解决：

```
gravity earth spaceship + gravity moon spaceship == (0, 0) 
```

它比从头开始创建一个新函数要简单和快速得多`equigravityPoint :: Object -> Object -> Object -> Point`。

如果除了我之外还有 3 个对象，那还是很简单的。

```
gravity earth spaceship + gravity moon spaceship + gravity sun spaceship == (0, 0) 
```

4 和 n 相同。以这种方式处理对象列表比使用`equigravityPoint`.

其他例子。我想编写一个射杀我的敌人机器人。如果他只是针对我当前的位置射击，如果我跑向我，他会抓住我，但如果我跳起来摔倒在他身上，他会想念我。一个更聪明的机器人会这样想：“嗯，他从墙上跳了下来。如果我瞄准他现在所在的位置射击，子弹不会射中他，因为他会一直移动到那时。所以我要预测他会去哪里几秒钟后到那里射击，这样子弹和他同时到达这一点”。基本上，我需要计算轨迹的能力。例如，对于这种情况，我需要 的解`trajectoryBullet == trajectoryCharacter`，它给出了直线和抛物线相交的点。

一个不涉及速度的类似且更简单的示例。我是消防员机器人，有一栋建筑物着火了。另一队消防员正在用水枪灭火。我在，还有人从. 当我的朋友们在射水时，我拿着蹦床。我需要先到人们会跌倒的地方。所以我需要轨迹和方程求解。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-02-27T05:16:46.510

这样做的一种方法是进行[自动微分](http://en.wikipedia.org/wiki/Automatic_differentiation)而不是符号微分；这是一种在一次计算中同时计算*f* ( *x* ) 和*f* ′( *x* ) 的方法。[我从Dan“sigfpe”Piponi 的关于自动微分的优秀博文](http://blog.sigfpe.com/2005/07/automatic-differentiation.html)中了解到，有一种使用[双数](http://en.wikipedia.org/wiki/Dual_numbers)的非常酷的方法。你可能应该去读一下，但这是基本的想法。不是使用实数（或者，我们最喜欢的（？）它们的复制品），而是定义一个新集合，我将称之为 D，通过将新元素*ε*连接到 ℝ 使得*ε* ²`Double`**^(= 0。这很像我们定义复数 ℂ 的方式，通过将新元素*i*连接到 ℝ 使得*i* ² = -1。（如果你喜欢代数，这与说 D = ℝ[x]/⟨x ² ⟩ 相同。）因此，D 的每个元素都是*a* + *bε*的形式，其中*a*和*b*是实数。对偶数的算术如您所料：)**

 ***   (*一*+ *bε* ) ± ( *c* + *dε* ) = (*一*+ *c* ) ± ( *b* + *d* ) *ε* ; 和
*   ( *a* + *bε* )( *c* + *dε* ) = *ac* + *bcε* + *adε* + *bdε* ² = *ac* + ( *bc* + *ad* ) *ε*。

（由于*ε* ² = 0，除法更复杂，尽管您对复数使用的共轭相乘技巧仍然有效；有关更多信息，请参阅[Wikipedia 的解释](http://en.wikipedia.org/wiki/Dual_numbers#Division)。）

现在，为什么这些有用？直观地说，*ε*就像一个无穷小，允许你用它计算导数。事实上，如果我们用不同的名字重写乘法规则，它就变成了

*   ( *f* + *f* ′<i>ε)( *g* + *g* ′<i>ε) = *fg* + ( *f* ′<i>g + *fg* ′) *ε*

*那里的ε*系数看起来很像微分函数[乘积的乘积规则](http://en.wikipedia.org/wiki/Product_rule)！

那么，让我们来看看一大类函数会发生什么。由于我们忽略了上面的除法，假设我们有一些函数*f* : ℝ → ℝ 由幂级数定义（可能是有限的，所以任何多项式都是可以的，就像 sin( *x* )、cos( *x* ) 和*e* ^(*x*)）。然后我们可以用显而易见的方式定义一个新函数*f* [D] : D → D：我们不加实数，而是加对偶数等。然后我声明*f* [D] ( *x* + *ε* ) = *f* ( *x* ) + *f* ′( *x* ) *ε*. 首先，我们可以通过归纳证明对于任何自然数*i*，情况是 ( *x* + *ε* ) ^(*i*) = *x* ^(*i*) + *ix* ^(*i* -1) *ε*；*这将为f* ( *x* ) = *x* ^(*k*)的情况建立我们的导数结果。在基本情况下，当*i* = 0 时，这个等式显然成立。然后假设它对*i*成立，我们有

*   ( *x* + *ε* ) ^(*i* +1) = ( *x* + *ε* )( *x* + *ε* ) ^(*i*)通过分解出一份 ( *x* + *ε* )
*   = ( *x* + *ε* )( *x* ^(*i*) + *ix* ^(*i* -1) *ε* ) 通过归纳假设
*   = *x* ^(*i+1*) + ( *x* ^(*i*) + *x* ( *ix* ^(*i* -1) )) *ε*由双数乘法的定义
*   = *x* ^(*i+1*) + ( *i+1* ) *x* ^(*i*) *ε*通过简单代数。

事实上，这正是我们想要的。现在，考虑到我们的幂级数*f*，我们知道

*   *f* ( *x* ) = *a* [0] + *a* [1] *x* + *a* [2] *x* ² + ... + *a* [*i*] *x* ^(*i*) + ...</li>

然后我们有

*   *f* [D] ( *x* + *ε* ) = *a* [0] + *a* [1] ( *x* + *ε* ) + *a* [2] ( *x* + *ε* ) ² + ... + *a* [*i*] ( *x* + *ε* ) ^(*i*) + ...</li>
*   = *a* [0] + ( *a* [1] *x* + *a* [1] *ε* ) + ( *a* [2] *x* ² + 2 *a* [2] *xε* ) + … + ( *a* [i] *x* ^(*i*) + *ia* [*i*] *x* ^(*i* -1) *ε* ) + … 通过上述引理
*   = ( *a* [0] + *a* [1] *x* + *a* [2] *x* ² + ... + *a* [i] *x* ^(*i*) + ...) + ( *a* [1] *ε* + 2 *a* [2] *xε* + ... + *ia* [*i*] *x* ^(*i* -1) *ε* + ...) 通过交换律
*   = ( *a* [0] + *a* [1] *x* + *a* [2] *x* ² + … + *a* [i] *x* ^(*i*) + …) + ( *a* [1] + 2 *a* [2] *x* + … + *ia* [*i*] *x* ^(*i* -1) + …) *ε*通过分解*ε*
*   = *f* ( *x* ) + *f* ′( *x* ) *ε*根据定义。

伟大的！所以对偶数（至少对于这种情况，但结果通常是正确的）可以为我们做微分。我们所要做的就是将我们的原始函数应用于，不是实数*x*，而是对偶数*x* + *ε*，然后提取*ε*的结果系数。我敢打赌，你可以看到如何在 Haskell 中实现这一点：

```
data Dual a = !a :+? !a deriving (Eq, Read, Show)
infix 6 :+?

instance Num a => Num (Dual a) where
  (a :+? b) + (c :+? d) = (a+c) :+? (b+d)
  (a :+? b) - (c :+? d) = (a-c) :+? (b-d)
  (a :+? b) * (c :+? d) = (a*c) :+? (b*c + a*d)
  negate (a :+? b)      = (-a) :+? (-b)
  fromInteger n         = fromInteger n :+? 0
  -- abs and signum might actually exist, but I'm not sure what they are.
  abs    _              = error "No abs for dual numbers."
  signum _              = error "No signum for dual numbers."

-- Instances for Fractional, Floating, etc., are all possible too.

differentiate :: Num a => (Dual a -> Dual a) -> (a -> a)
differentiate f x = case f (x :+? 1) of _ :+? f'x -> f'x

-- Your original f, but with a more general type signature.  This polymorphism is
-- essential!  Otherwise, we can't pass f to differentiate.
f :: Num a => a -> a
f x = 3*x^2 + 5*x + 9

f' :: Num a => a -> a
f' = differentiate f 
```

然后，你瞧：

```
*Main> f 42
5511
*Main> f' 42
257 
```

[正如 Wolfram Alpha 可以证实](http://www.wolframalpha.com/input/?i=derivative+of+3*x%5E2+%2B+5*x+%2B+9+at+42)的那样，这正是正确的答案。

关于这些东西的更多信息肯定是可用的。我不是这方面的专家。我只是觉得这个想法真的很酷，所以我借此机会模仿我所阅读的内容并得出一两个简单的证明。Dan Piponi 写了更多关于对偶数/自动微分的文章，包括[一篇文章，其中除其他外，他展示了一个更一般的结构，它允许偏导数](http://blog.sigfpe.com/2006/09/practical-synthetic-differential.html)。Conal Elliott 有[一篇文章，他展示了如何以类似的方式计算导数*塔*( *f* ( *x* ), *f* ′( *x* ), *f* ″( *x* ), ...)](http://conal.net/blog/posts/beautiful-differentiation)。上面链接的关于自动微分的[维基百科文章](http://en.wikipedia.org/wiki/Automatic_differentiation)进入更多细节，包括其他一些方法。（这显然是“正向模式自动微分”的一种形式，但“反向模式”也存在，而且显然可以更快。）

最后，有[一个关于自动区分的 Haskell wiki 页面](http://www.haskell.org/haskellwiki/Automatic_Differentiation)，它链接到一些文章——而且，重要的是，**一些 Hackage 包**！我从来没有使用过这些，但似乎[Edward Kmett](http://hackage.haskell.org/cgi-bin/hackage-scripts/package/ad)[的`ad`](http://hackage.haskell.org/cgi-bin/hackage-scripts/package/ad)包是最完整的，它处理了多种不同的自动微分方式——事实证明，他[在编写一个包以正确回答另一个包之后上传了该包 Stack Overflow问题](https://stackoverflow.com/a/2842605/237428)。

* * *

我确实想添加另一件事。你说“但是，数据类型不应该代表函数（解析器除外）。” 我不得不不同意——将你的函数具体化为数据类型对于这方面的各种事情都是很好的。（无论如何，是什么让解析器特别？）任何时候你有一个想要内省的函数，将它具体化为一种数据类型可能是一个很好的选择。例如，这里是符号微分的编码，很像上面的自动微分的编码：

```
data Symbolic a = Const a
                | Var String
                | Symbolic a :+: Symbolic a
                | Symbolic a :-: Symbolic a
                | Symbolic a :*: Symbolic a
                deriving (Eq, Read, Show)
infixl 6 :+:
infixl 6 :-:
infixl 7 :*:

eval :: Num a => (String -> a) -> Symbolic a -> a
eval env = go
  where go (Const a) = a
        go (Var   x) = env x
        go (e :+: f) = go e + go f
        go (e :-: f) = go e - go f
        go (e :*: f) = go e * go f

instance Num a => Num (Symbolic a) where
  (+)         = (:+:)
  (-)         = (:-:)
  (*)         = (:*:)
  negate      = (0 -)
  fromInteger = Const . fromInteger
  -- Ignoring abs and signum again
  abs         = error "No abs for symbolic numbers."
  signum      = error "No signum for symbolic numbers."

-- Instances for Fractional, Floating, etc., are all possible too.

differentiate :: Num a => Symbolic a -> String -> Symbolic a
differentiate f x = go f
  where go (Const a)             = 0
        go (Var   y) | x == y    = 1
                     | otherwise = 0
        go (e :+: f)             = go e + go f
        go (e :-: f)             = go e - go f
        go (e :*: f)             = go e * f + e * go f

f :: Num a => a -> a
f x = 3*x^2 + 5*x + 9

f' :: Num a => a -> a
f' x = eval (const x) $ differentiate (f $ Var "x") "x" 
```

再一次：

```
*Main> f 42
5511
*Main> f' 42
257 
```

这两种解决方案（或其中的一部分）的美妙之处在于，只要您的原件`f`是多态的（类型`Num a => a -> a`或类似的），您就不必修改`f`！唯一需要放置导数相关代码的地方是新数据类型的定义和微分函数；您可以免费获得现有功能的衍生产品。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-27T01:32:07.990

数值导数可以很容易地完成：

```
derive f x = (f (x + dx) - f (x - dx)) / (2 * dx) where dx = 0.00001 
```

但是，对于符号导数，您需要创建一个 AST，然后通过匹配和重写 AST 来实现派生规则。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-27T04:35:14.003

我不明白您使用自定义数据类型的问题

```
data Expr = Plus Expr Expr 
           | Times Expr Expr 
           | Negate Expr 
           | Exp Expr Expr 
           | Abs Expr
           | Signum Expr
           | FromInteger Integer
           | Var

instance Num Expr where
   fromInteger = FromInteger
   (+) = Plus
   (*) = Times
   negate = Negate
   abs = Abs
   signum = Signum

toNumF :: Num a => Expr -> a -> a
toNumF e x = go e where
  go Var = x
  go (FromInteger i) = fromInteger i
  go (Plus a b) = (go a) + (go b)
  ... 
```

然后，您可以像使用它一样使用它，`Int`或者`Double`一切都会正常工作！你可以定义一个函数

```
deriveExpr :: Expr -> Expr 
```

然后让您定义以下（RankN）函数

```
derivate :: Num b => (forall a. Num a => a -> a) -> b -> b
derivate f = toNumF $ deriveExpr (f Var) 
```

您可以扩展它以与数字层次结构的其他部分一起使用。**

# javascript - 添加的元素可防止代码向表中添加新行

> ID：15102616
> 
> 赞同：-1
> 
> 时间：2013-02-27T01:26:19.010
> 
> 标签：javascript, html, asp.net-web-api

由于其中有另一个标签，我在将行添加到 div 标签中的表时遇到了一些问题。

我知道如果我可以更改表的 id 会很好，但是因为它是生成的，所以我无法更改它们。我只能更改包含表格的 div 的 ID。

```
<!--Adding does not work on this table -->
<h3>Wednesday</h3>
<button type="button" onclick="displayResult('wed')">Insert new row</button>
<div id="wed">
<strong>Even this stops it from adding</strong> <!--This is the problem -->
<table id="myTable" border="1">
  <tr>
    <td>cell 1</td>
    <td>cell 2</td>
  </tr>
</table>
<div>   

<!--Adding works on this table -->
<h3>Thursday</h3>
<button type="button" onclick="displayResult('thu')">Insert new row</button>
<div id="thu">
<table id="myTable" border="1">
  <tr>
    <td>cell 1</td>
    <td>cell 2</td>
  </tr>
</table>
<div>   

function displayResult(number) {
    var elemList=document.getElementById(number).childNodes;
    var table=elemList[1];
    var row=table.insertRow(-1);
    var cell1=row.insertCell(0);
    var cell2=row.insertCell(1);
    cell1.innerHTML="New";
    cell2.innerHTML="New";
} 
```

[这是 jsFiddle 说明我遇到的问题](http://bit.ly/13SYyPc)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T03:45:44.793

我会假设通过索引获取元素是问题所在（没有看到生成表格的代码，很难确定），并建议一旦你有了 div，你`getElementsByTagName('table')[0]`看看你是否可以'从那里开始工作。

我还建议您使用 jquery 做的大部分事情都容易得多，如果您有能力将其添加到项目中，我会推荐它。

# node.js - 如何创建一个可以通过插件扩展的网站

> ID：15102619
> 
> 赞同：1
> 
> 时间：2013-02-27T01:26:30.133
> 
> 标签：node.js, plugins

我很好奇是否有构建 Node.JS 应用程序的最佳实践、库或好主意，以便可以通过插件扩展其功能。这些插件的行为与它们在 Wordpress 等常见 CMS 中的行为非常相似，即用户以某种方式将文件获取到插件目录，然后启用它们而无需重新启动服务器。

谢谢你能给我的任何方向。我不怕重新发明轮子（这很有趣），但我很懒，很想找到一些对我来说很辛苦的东西。:)

# zend-framework - Zend 从多个表中选择数据

> ID：15102620
> 
> 赞同：0
> 
> 时间：2013-02-27T01:26:37.237
> 
> 标签：zend-framework, phpmyadmin, zend-db-select

我无法从两个不同的表中提取数据。我正在尝试首先获取具有给定名称的所有地址（选择`tom`表中具有名称的所有地址）。然后使用地址，在另一个表（table2）中查看这些地址并从 col 中提取所有数据`number`。有没有比我的代码更好的方法：

控制器：

```
this->table = new Address();  
$getaddress = $this->table->getAddress($name); //grabbing all address associated with a given name

$address = $getaddress->toArray();

foreach ($addy as $address)
{
   this->table2 = new Number();
   $numbers = $this->table2->getNumber($address['numberColumn']);
   $this->view->numbers = $numbers->toArray();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T09:15:44.870

`table`我会建议你定义和之间的关系`table2`。当然，您需要 table2 中的外键，这将是与第一个表的关系。请研究此文档： http: [//framework.zend.com/manual/1.12/en/zend.db.table.relationships.html](http://framework.zend.com/manual/1.12/en/zend.db.table.relationships.html)

# performance - 在 Matlab 中预分配结构数组以提高效率

> ID：15102627
> 
> 赞同：1
> 
> 时间：2013-02-27T01:27:19.930
> 
> 标签：performance, matlab, data-structures

在 Matlab 中，我希望预先分配一个名为 P 的 1x30 结构数组，其中包含以下结构字段：

```
 imageSize: [128 128]
orientationsPerScale: [8 8 8 8]
        numberBlocks: 4
          fc_prefilt: 4
   boundaryExtension: 32
                   G: [192x192x32 double] 
```

G 不一定是 192x192x32，例如它可能是 128x128x16（尽管它有 3 个双精度类型的维度）。

我正在通过以下方式进行预分配：

```
P(30) = struct('imageSize', 0, 'orientationsPerScale', [0 0 0 0], ...
'numberBlocks', 0, 'fc_prefilt', 0, 'boundaryExtension', 0, 'G', []); 
```

这是预分配这种结构的正确方法，还是会出现与 G 设置为空 [] 相关的性能问题？如果有更好的方法来分配这个结构，请提供一个例子。

此外，上述方法似乎有效（除了性能问题），但是，字段名称/值对的顺序似乎很重要，因为重新排列它们会导致在预分配后分配错误。为什么如此考虑到项目/值是按名称（而不是位置）引用的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T01:49:01.040

如果 G 设置为 Empty，则解释器无法知道稍后将分配给它的数据大小，因此它可能会将数组项紧紧地打包在内存中，并且在它不适合时必须全部重做。

预先定义 G 的尺寸上限并将其设置为该尺寸可能更有效。zeroes 功能可能会有所帮助。

# ruby-on-rails - has_many as：产生意外 SQL 的源关系（Railcast #364）

> ID：15102628
> 
> 赞同：0
> 
> 时间：2013-02-27T01:27:21.083
> 
> 标签：ruby-on-rails, railscasts

我正在实施[Railscast 364](http://railscasts.com/episodes/364-active-record-reputation-system?view=asciicast)中描述的 Active Record Reputation System 。

我已经完成了大部分工作，包括投票和总计（每个用户和每个帖子）。

当用户已经投票时，我在尝试隐藏投票选项时遇到问题。Railscast 使用一个函数`voted_for?`来进行这种隐藏。我四处寻找答案，但要么没有其他人遇到过这个问题（不太可能），要么我无法将他们的问题转回给我（可能）。

我的修改后的代码有 4 行单独运行，内容如下：

```
# snippet of User.rb:

has_many :evaluations, class_name: "RSEvaluation", as: :source
has_reputation :votes, source: {reputation: :votes, of: :microposts}, aggregated_by: :sum

def voted_for?(micropost)
  evaluations.where(target_type: micropost.class, target_id: micropost.id).present? #1.
  evaluations.exists?(target_type: micropost.class, target_id: micropost.id)        #2.
  true                                                                              #3.
  evaluations.exists?(target_type: "Micropost", target_id: 1)                       #4.
end 
```

1-4 行的解释：

1.  改编自 Railscast，不隐藏投票选项
2.  显然更有效，但产生同样的问题
3.  证明其余代码有效：此选项运行时所有链接都隐藏
4.  生成此 SQL（取自`development.log`）：

    ```
    SELECT COUNT(*) FROM "rs_evaluations"
    WHERE "rs_evaluations"."target_id" = 1           # this should be "source_id"
    AND "rs_evaluations"."target_type" = 'User'      # this should be "source_type"
    AND "rs_evaluations"."target_type" = 'Micropost' # correct
    AND "rs_evaluations"."target_id" = 302           # correct 
    ```

所以我发现了问题所在。如果我使用正确的列名运行 SQL，它将按预期工作。

如何在我的 Rails 代码中解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T13:53:50.457

由于是您的 SQL 出现错误，请仔细检查您的模型中是否包含所有正确的关联。确保 User`has_many :microposts`并确保 Micropost 类似于以下内容。

```
class Micropost < ActiveRecord::Base
  belongs_to :user

  has_reputation :votes, source: :user, aggregated_by: :sum
end 
```

此外，请仔细检查您是否已迁移数据库，并且它具有这些关联所需的所有正确列。

# sql - DISTINCT 有两个 array_agg （或一个 array_agg 里面有元组）？

> ID：15102630
> 
> 赞同：5
> 
> 时间：2013-02-27T01:27:37.137
> 
> 标签：sql, arrays, postgresql, optimization, aggregate-functions

**我有以下查询：**

```
SELECT DISTINCT ON (ps.p)
  m.groundtruth, ps.p, ARRAY_AGG(m.anchor_id), ARRAY_AGG(m.id)
FROM
  measurement m
JOIN
  (SELECT unnest(point_array) AS p) AS ps
  ON ST_DWithin(ps.p, m.groundtruth, distance)
GROUP BY ps.p, m.groundtruth
ORDER BY ps.p, RANDOM() 
```

**输出如下所示：**

```
groundtruth | p           | anchor_array | id_array
------------------------------------------------------
G1          | P1          | {1,3,3,3,4}  | {1,2,3,4,5}
G2          | P1          | {1,5,7}      | {6,7,8}
G1          | P2          | {1,3,3,3,4}  | {1,2,3,4,5} 
```

**替代查询：**

```
SELECT DISTINCT ON (ps.p)
  m.groundtruth, ps.p, ARRAY_AGG(row(m.anchor_id, m.id))
... 
```

**输出：**

```
groundtruth | p           | combined_array
-----------------------------------------------------------
G1          | P1          | {(1,1),(3,2),(3,3),(3,4),(4,5)}
G2          | P1          | {(1,6),(5,7),(7,8)}
G1          | P2          | {(1,1),(3,2),(3,3),(3,4),(4,5)} 
```

**我想要达到的目标：**

*   摆脱anchor_array中的重复条目
*   并且对于每个已删除的项目：从 id_array 中删除具有相同索引的项目

或者对于替代查询和输出：

*   使每个元组*与元组的第一个条目相关*

**结果应该是什么样子：**

```
groundtruth | p           | anchor_array | id_array
------------------------------------------------------
G1          | P1          | {1,3,4}      | {1,2,5}
G2          | P1          | {1,5,7}      | {6,7,8}
G1          | P2          | {1,3,4}      | {1,2,5} 
```

或者对于替代查询和输出：

```
groundtruth | p           | combined_array
-----------------------------------------------------------
G1          | P1          | {(1,1),(3,2),(4,5)}
G2          | P1          | {(1,6),(5,7),(7,8)}
G1          | P2          | {(1,1),(3,2),(4,5)} 
```

PS 我忽略了示例输出中的随机化部分以获得更好的概述。

* * *

# 真实结果集：

```
p                                           ; groundtruth                                ; ids
---------------------------------------------------------------------------------------------
"0101000000EE7C3F355EF24F4019390B7BDA011940";"010100000094F6065F98E44F40A930B610E4A01B40";"{"(29,250)","(30,251)","(31,241)","(32,263)","(33,243)","(34,264)","(35,277)"}"
"0101000000EE7C3F355EF24F40809F71E140681940";"010100000094F6065F98E44F40A930B610E4A01B40";"{"(29,250)","(30,251)","(31,257)","(32,276)","(33,272)","(34,264)","(35,249)"}"
"0101000000EE7C3F355EF24F40E605D847A7CE1940";"0101000000EE7C3F355EF24F4019390B7BDA011940";"{"(30,194)","(31,181)","(32,168)","(33,124)","(34,141)","(35,4)"}"
"0101000000EE7C3F355EF24F404C6C3EAE0D351A40";"010100000014D044D8F0DC4F4073BA2C2636DF1C40";"{"(30,281)","(31,278)","(32,297)","(33,284)","(34,294)","(35,303)"}"
"0101000000EE7C3F355EF24F40B3D2A414749B1A40";"0101000000DE9387855AEB4F4062670A9DD7581A40";"{"(30,235)","(31,214)","(32,220)","(33,221)","(34,217)","(35,232)"}"
"0101000000EE7C3F355EF24F4019390B7BDA011B40";"0101000000AF94658863D54F40A7E8482EFF211E40";"{"(27,316)","(31,329)","(32,334)","(33,340)","(34,327)","(35,324)"}"
"0101000000EE7C3F355EF24F40809F71E140681B40";"0101000000DE9387855AEB4F4062670A9DD7581A40";"{"(30,224)","(31,210)","(32,220)","(33,230)","(34,226)","(35,213)"}"
"0101000000EE7C3F355EF24F40E605D847A7CE1B40";"010100000014D044D8F0DC4F4073BA2C2636DF1C40";"{"(30,281)","(31,304)","(32,288)","(33,293)","(34,306)","(35,295)"}"
"0101000000EE7C3F355EF24F404C6C3EAE0D351C40";"010100000094F6065F98E44F40A930B610E4A01B40";"{"(29,250)","(30,256)","(31,257)","(32,271)","(33,254)","(34,260)","(35,277)"}"
"0101000000EE7C3F355EF24F4019390B7BDA011D40";"010100000007F0164850C44F405F46B1DCD24A2040";"{"(31,383)","(32,409)","(33,390)","(34,411)","(35,407)"}" 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-27T02:13:37.203

类似于我在您[之前的问题](https://stackoverflow.com/a/15102921/939860)中回答的内容，`ARRAY of rows`就像您建议的那样和更短的位置符号：

```
SELECT DISTINCT ON (1)
       p, groundtruth, array_agg(ROW(anchor_id, id)) AS ids
FROM (
   SELECT DISTINCT ON (1, 2, 3)
          ps.p, m.groundtruth, m.anchor_id, m.id
   FROM  (SELECT unnest(point_array) AS p) AS ps
   JOIN   measurement m ON ST_DWithin(ps.p, m.groundtruth, distance)
   ORDER  BY 1, 2, 3, random()
   ) x
GROUP  BY 1, 2
ORDER  BY 1, random(); 
```

但我更喜欢带有二维数组的另一个版本。

# javascript - 奇怪的 JavaScript 滚动/渲染问题

> ID：15102632
> 
> 赞同：0
> 
> 时间：2013-02-27T01:27:58.107
> 
> 标签：javascript, jquery, css, css-transitions

今天我面临一个非常奇怪的问题。

我创建了一个包含大约 10 个复杂元素的 div。这些元素包含更多带有 CSS3 过渡、动画和翻译的 div。

外部 div 很宽，在一个滚动容器内：

```
<div id="container">
    <div id="scroller">
        <div class="animated-element">
            [...]
        </div>
        <div class="animated-element">
            [...]
        </div>
        [...]
    </div>
</div> 
```

我现在正在使用 jQuery（我也尝试过纯 JSS）在容器内移动滚动条：

```
document.getElementById('scroller').style.left = "-150px";
// or
$('#scroller').animate({"left" : "-150px"}, 500); 
```

奇怪的事情现在正在发生。滚动元素后，没有任何变化。首先，我认为这可能是脚本中的错字或其他内容。

但随后我将光标移到滚动条上，只要我来回移动它，我所做的更改（使用 JS）就会显示出来。

我搜索了很多重新渲染，但找不到任何有用的东西。

我建造了数千次这种滑块。这就是为什么这个问题让我如此困惑。

明天我回到办公室时，我会试着整理一个小提琴。但我希望有人可能有一个想法甚至解决方案。

**编辑 2**

这是[小提琴](http://jsfiddle.net/julian_weinert/ryrrY/)。

我发现如果我从单个s中删除`perspective` `perspective-origin` **and** `position:relative`属性，滚动就会起作用。`.moreitem`在完整的上下文中，某些东西似乎被打断了。*无论如何，切口都有效*。

**编辑 1**这是滚动条的 CSS：

```
-webkit-box-align:center;
-webkit-box-orient:horizontal;
-webkit-box-pack:start;
display:-webkit-box;
height:100%;
position:absolute; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T14:15:05.827

Safari 容易出现无法重新呈现动态内容的故障。我昨天在 CSS3 专栏中遇到了这个问题。

不确定这是否是您的问题的核心，或者只是分散了真正问题的注意力的小故障，但请尝试在动画后强制重新渲染：

```
$('.morecontainer').toggle().toggle(); 
```

或者，作为动画的一部分，您可以移动（或以其他方式制作动画）位于下方的透明 div `position:absolute`，这可能会在动画的每个步骤中强制重新渲染。`z-index:-1``.morecontainer`

# php - PHP if...else... 语句返回错误

> ID：15102635
> 
> 赞同：0
> 
> 时间：2013-02-27T01:28:18.777
> 
> 标签：php, if-statement

下面是我的代码

```
 <?php
//Vars
$alreadylogged = 0;
$username = 0;
//End Var
//Start Script
print 'Welcome to CraftedList!</br>'
if ($alreadylogged=="1") *Side note, this line is line 34*
{
    print 'You are currently logged in as'. $username .'!';
}
else
{
    print 'You are not logged in!'
}
    ?> 
```

但是当我在 localhost XAMPP 客户端上执行它时，它会返回此错误。

> 解析错误：语法错误，第 34 行 C:\xampp\htdocs\phptest\index.php 中的意外 'if' (T_IF)

我检查了 W3 Schools，我的代码与他们的相似。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-27T01:29:22.397

你错过了一个`;`

```
print 'Welcome to CraftedList!</br>';
                                    ^ here 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T01:32:47.897

失踪**;**

这里：

```
print 'Welcome to CraftedList!</br>' 
```

和这里：

```
print 'You are not logged in!' 
```

# ssrs-2008 - ReportViewer 11.0.0.0 和 SubreportProcessing 事件未触发

> ID：15102638
> 
> 赞同：0
> 
> 时间：2013-02-27T01:28:38.227
> 
> 标签：ssrs-2008, reporting-services

我有许多带有子报表的报表与 ReportViewer 10.0.0 配合良好，一旦我升级到 ReportViewer 11.0.0.0，子报表处理事件就不会触发。

有没有人有过类似的经历。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T10:57:31.000

在升级 Microsoft.ReportViewer.WinForms (9.0 => 11.0) 后，在我们的例子中，事件正在触发。但是为第一个子报表提供的数据源用于呈现所有其他子报表...

如果 SubreportProcessing 处理程序未执行，请尝试不使用事件的取消映射指令。

AddHandler Me.ReportViewer1.LocalReport.SubreportProcessing, AddressOf LocalReport_SubreportProcessing

Me.ReportViewer1.LocalReport.DataSources.Add(New Microsoft.Reporting.WinForms.ReportDataSource("dsToto", ...))

Me.ReportViewer1.RefreshReport()

'使用以下行，取消映射发生在渲染结束之前：不调用事件处理程序

'RemoveHandler Me.ReportViewer1.LocalReport.SubreportProcessing, AddressOf LocalReport_SubreportProcessing

# height - 具有不同行高的 Infragistics XamGrid

> ID：15102641
> 
> 赞同：0
> 
> 时间：2013-02-27T01:28:58.613
> 
> 标签：height, row, infragistics, xamgrid

我有一个 XamGrid，它显示了几个动态生成的列，其中一个列可以有一个列表框，它根据里面有多少项目来调整大小（但有最大高度限制）。我希望 XamGrid 的每一行基本上只需要它需要的那么大 - 它们最初是这样的，但是在稍微上下滚动网格的内容之后，我发现列表框中几乎没有任何值的行（所以高度应该相当小）现在与我之前滚动到视图中的最大行的高度相同。结果是浪费了大量空间，所以我想知道是否有人知道一种方法来使行不会自动调整自身大小以匹配已加载的最大行。我'

PS 我会在 Infragistics 自己的支持论坛上发布此内容，但即使使用我的 IG 帐户登录，我终其一生都无法找到任何方法在其中发布新主题……很棒的设计。

谢谢克里斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-09-10T09:23:42.327

将`RowHeight`属性设置为`Dynamic`。那应该为您解决问题。

```
<ig:XamGrid RowHeight="Dynamic" ... > 
```

# go - 在理解缓冲通道方面需要帮助

> ID：15102643
> 
> 赞同：3
> 
> 时间：2013-02-27T01:29:18.677
> 
> 标签：go

我很难理解缓冲通道是如何工作的。基于以下示例，我尝试一次使用 2 个线程来打印当前时间，每 2 个 go 调用之间大约有 2 秒的延迟：

```
package main
import "fmt"
import "time"

func main() {
    returnCurrentTime := func() string  {
        return time.Now().String()
    }

    c := make(chan string, 2)

    asyncReturnCurrentTime := func(c chan string) {
        time.Sleep(2001 * time.Millisecond)
        c <- returnCurrentTime()
    }

    for i := 1; i != 7; i++ {
        go asyncReturnCurrentTime(c)
        if(i % 3 == 0) {
            fmt.Println(<- c)
            fmt.Println(<- c)
            fmt.Println(<- c)
            fmt.Println()
        }
    }
} 
```

这产生

```
2013-02-27 03:17:50
2013-02-27 03:17:50
2013-02-27 03:17:50

2013-02-27 03:17:52
2013-02-27 03:17:52
2013-02-27 03:17:52 
```

我对秒数的期望是两次 go 调用之间的 2 秒延迟，在这种情况下，结果如下

```
2013-02-27 03:17:50
2013-02-27 03:17:50
2013-02-27 03:17:52 <- 3rd call with 2 buffer slots

2013-02-27 03:17:54
2013-02-27 03:17:54
2013-02-27 03:17:56 <- 3rd call with 2 buffer slots 
```

显然我误解了缓冲通道的概念，请有人解释一下我的逻辑错误以及如何达到预期的结果？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T02:29:54.020

实际上，您正在运行：

```
package main

import (
    "fmt"
    "time"
)

func main() {
    returnCurrentTime := func() string {
        return time.Now().String()
    }

    c := make(chan string, 2)

    asyncReturnCurrentTime := func(c chan string) {
        time.Sleep(2001 * time.Millisecond)
        c <- returnCurrentTime()
    }

    go asyncReturnCurrentTime(c)
    go asyncReturnCurrentTime(c)
    go asyncReturnCurrentTime(c)
    fmt.Println(<-c)
    fmt.Println(<-c)
    fmt.Println(<-c)
    fmt.Println()
    go asyncReturnCurrentTime(c)
    go asyncReturnCurrentTime(c)
    go asyncReturnCurrentTime(c)
    fmt.Println(<-c)
    fmt.Println(<-c)
    fmt.Println(<-c)
    fmt.Println()
} 
```

输出：

```
2013-02-26 21:28:22.069581655 -0500 EST
2013-02-26 21:28:22.069688722 -0500 EST
2013-02-26 21:28:22.069695217 -0500 EST

2013-02-26 21:28:24.070985411 -0500 EST
2013-02-26 21:28:24.070999309 -0500 EST
2013-02-26 21:28:24.071002661 -0500 EST 
```

> [发送报表](http://golang.org/ref/spec#Send_statements)
> 
> 通道和值表达式都在通信开始之前进行评估。通信阻塞，直到发送可以继续。

在`returnCurrentTime()`尝试发送之前，立即评估表达式（时间戳）。这不是发送的时间戳。如果缓冲区已满，发送可能会在稍后发生。

此外，测量实际发送和接收时间，缓冲延迟`chan c`将是无关紧要的：发送、发送、阻塞、接收、解除阻塞、发送。例如，

```
c <-;  2013-02-26 23:29:34.505456624 -0500 EST
c <-;  2013-02-26 23:29:34.505467030 -0500 EST
<- c;  2013-02-26 23:29:34.505468497 -0500 EST
c <-;  2013-02-26 23:29:34.505518015 -0500 EST

c <-;  2013-02-26 23:31:36.506659943 -0500 EST
c <-;  2013-02-26 23:31:36.506664832 -0500 EST
<- c;  2013-02-26 23:31:36.506669302 -0500 EST
c <-;  2013-02-26 23:31:36.506696540 -0500 EST 
```

# javascript - 是否有可靠的跨浏览器方式来使用带有敲除的 polyfill？

> ID：15102651
> 
> 赞同：5
> 
> 时间：2013-02-27T01:30:31.060
> 
> 标签：javascript, html, knockout.js, internet-explorer-7, polyfills

我们有一个几乎完全淘汰淘汰的网站，我们需要支持所有主流浏览器，包括回到 IE7（而不是 IE6）的 Internet Explorer。

Chrome 已经支持几乎所有我们真正关心的 HTML 5 功能，Modernizr 像冠军一样处理 CSS hack。但有时我们仍然不得不求助于 polyfill，两个值得注意的例子是`placeholder`属性和最近的`<details>`元素。

大多数 polyfill 都是或依赖于 jQuery 插件，这在理论上很好。不幸的是，它们在处理动态加载的内容方面也往往效率低下——*当*您使用淘汰赛（或任何模板引擎，真的）时，这种情况很多。更复杂的事情是我们使用淘汰赛作为真正的 MVVM，所以在一堆 JS hack 中没有合适的地方来重新加载插件（就我们的架构而言，这可能是一件好事，但令人沮丧的是正面）。

`DOMNodeInserted`我们能够为 Firefox 和 IE9 使用事件（我知道已弃用）提出了一个半可靠的实现。不幸的是，它在 IE8 中不起作用，因为[旧版 IE 不支持它](https://stackoverflow.com/q/2143929/38360)，而且在那些浏览器中复制似乎几乎不可能。`onreadystatechange`一开始似乎很有希望，但该事件往往触发得太早 - 即使`readyState`已明确检查 - 并且 polyfills 可以说没有达到目标。

我们尝试过的唯一在 IE7/IE8 中真正可靠工作的选项是使用重复超时以每 50 毫秒重新运行一次 polyfill。不幸的是，这也不断消耗整个 CPU，甚至将其提高到 100 毫秒都会导致 UI 延迟太明显，因此不太适合生产使用。

那么：**是否有任何可靠的方法可以将传统的 polyfill 技术与动态内容和模板引擎（如 knockoutjs）相结合，至少在 IE7 等主流浏览器中都可以使用？**

*（FWIW，我们最终确实使用淘汰赛的`afterRender`绑定管理了一个解决方法，但是这种方法将“poly”从“polyfill”中取出。我希望我们可以写一次然后忘记的东西。）*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T00:20:13.910

我解决相同问题的方法是将我的大部分 jQuery 插件和一般行为包装在敲除绑定 ( [http://knockoutjs.com/documentation/custom-bindings.html](http://knockoutjs.com/documentation/custom-bindings.html) ) 中。因此，例如，我有一个占位符“绑定”，我在每个输入上都使用了这样的占位符“绑定”，`<input data-bind="placeholder:'Some Placeholder Text'"/>`它要么简单地设置`placeholder`属性，要么根据需要进行一些 IE 破解。

更广泛的解决方案是增加敲除绑定提供程序（[http://www.knockmeout.net/2011/09/ko-13-preview-part-2-custom-binding.html](http://www.knockmeout.net/2011/09/ko-13-preview-part-2-custom-binding.html)）。绑定提供者是遍历 DOM（加载时和动态加载时）并识别绑定的东西。默认情况下，这实际上意味着它只是在寻找数据绑定属性和 ko 注释，但您可以更改它以查找占位符、日期或数字输入的输入类型等属性，并添加您的 IE hack。

# vb.net - 调用委托后无法使用图形

> ID：15102654
> 
> 赞同：-1
> 
> 时间：2013-02-27T01:31:02.077
> 
> 标签：vb.net, multithreading, graphics, delegates, callback

我正在开发一个大型程序的功能。该功能需要调用一些计算密集型的东西，并且可能需要很长时间。从菜单项触发的计算结果将向当前图形添加一些内容。

还有许多其他选项可以更改当前图形。我不是在这里讨论它们。可以这么说，我希望我创建的“处理”是异步的，这样用户就不必盯着一个无响应的屏幕 5 分钟以为程序坏了，但能够点击其他地方...

所以：处理将是异步的，但最后，我将不得不绘制结果。

问题：我不会画画。

如果我在没有异步调用的情况下运行我的代码，当然一切都会完美运行。但是如果我在 BeginInvoke 上调用处理，就会出现一些问题：

1）我调用的方法立即返回，所以在主线程中，如果我调用“draw”，结果还没有生成

2) 如果我尝试在 EndInvoke 之后进行绘图，则它位于错误的线程上，因此 myGraphics 中的每个项目都显示“参数无效”。

3）即使我在 BeginInvoke 之后保持通话（并以某种方式重新调用它），myGraphics 似乎仍然转到了另一个线程，我似乎有错误的信息。

为了获得最佳结果，我应该能够在 EndInvoke 之后从线程返回，以某种方式关闭它们......我只是不知道如何。

以下代码是一个片段，旨在显示对“处理”的调用，然后是“绘制”。（编辑：我已经从代码中删除了更多内容，因此人们不会尝试输入它并认为我的问题是基本的编译错误，例如拼写错误或其他东西）

```
Public Sub mine(ByVal myGraphics As System.Drawing.Graphics)
  a_call()
 ' use results from the finished call to process graphics
  my_draw(myGraphics)
 ' if I add my_draw here, previous call only had BeginInvoke... more complicated to prevent my_draw... 
 ' but it is not horrible to have first draw empty, and later draw correctly (if there is a way to trigger it - which I don't really have)
 ' The bigger problem is, myGraphics becomes defective (its VisibleClipbounds change, most points are not drawn anymore - or it becomes undefined)
 ' I don't understand why myGraphics changes or how to fix it
end sub

Public Sub a_call()      
  Dim c As New ADelegate(AddressOf A)    ' which is the processing call
  c.BeginInvoke(cb, Nothing)
End Sub

Private Sub A_Callback(ByVal ia As IAsyncResult)      
  ...EndInvoke(ia)
  A_Finish()
End Sub
Private Sub A_Finish()
  If Me.InvokeRequired Then
     Invoke(New ADelegate(AddressOf A_Finish))
  Else
   ' call my_draw because I should be done with the Invoke ?
   ' If I add my_draw here, it is undefined
End Sub 
```

当我说 myGraphics 被修改时......我真的看不出有什么可以改变它......

我一直在努力理解线程和委托......任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T16:11:26.900

我发现 System.Drawing.Graphics 不能被任何函数“拥有”，因此像球一样传递是没有意义的。

由于它属于 UI 类 - 并且使用 Paint 事件正确创建 - 我的解决方案是将绘图过程与计算过程断开连接。

我没有在绘制之前等待计算完成，而是在我有新信息要绘制时单独绘制（由绘制事件触发），并且我异步计算 - 完全无视 UI 中发生的任何事情。

# c - 如何在 C 中从文件中读取特定行？

> ID：15102659
> 
> 赞同：2
> 
> 时间：2013-02-27T01:31:34.773
> 
> 标签：c

好吧：所以我有一个文件，我必须处理它。过度简化，该文件具有以下格式：

```
n
first name
second name
...
nth name
random name
do x⁽¹⁾, y⁽¹⁾ and z⁽¹⁾
random name
do x⁽²⁾, y⁽²⁾, z⁽²⁾
...
random name
do x⁽ⁿ⁾, y⁽ⁿ⁾, z⁽ⁿ⁾ 
```

所以，实际的细节并不重要。问题是：我必须声明一个变量 n，我有一个数组 name[MAX]，我将用名称填充这个数组，从 name[0] 到 name[n-1]。

好吧，问题是：如果我以前不知道我有多少个名字，我怎么能得到这个输入？

例如，如果这是来自键盘的用户输入，我可以做得很好：我会这样做：

```
int n; char name[MAX];
scanf( "%d", &n);
int i; for (i = 0; i < n; i++)
    scanf( "%s", &N[i]); 
```

我可以继续，做整个代码，但你明白了。但是，我的输入现在来自一个文件。我不知道如何获取输入，我所能做的就是 fscanf() 整个文件，但由于我不知道它的大小（第一个数字将确定它），所以我不能这样做。据我所知（如果这不是真的，请纠正我，我对此很陌生），我们不能使用命令“for”并逐渐获取数字，就好像它来自键盘一样，对吧？

所以，我看到的唯一出口是找到一种从文件中读取特定行的方法。如果我能做到这一点，剩下的就很容易了。问题是，我该怎么做？我用谷歌搜索了它，我什至在那里发现了一些问题，尽管它根本没有任何意义。显然，从文件中读取特定行非常复杂。

这是来自初学者的问题集，所以我怀疑它是否复杂。我一定错过了一些非常简单的东西，虽然我只是不知道它是什么。

所以，问题是：例如，你会怎么做？

如何扫描文件中的第一个数字 n，然后扫描其他“n”个名称，将每个名称分配给数组中的一个元素（名字 = 名称 [0]，姓氏 = 名称 [n - 1]） ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T01:48:19.843

我建议调查文件结束。

```
while(!eof(fd))
{
...code...
} 
```

请注意，我的 C 知识已生疏，但这应该可以帮助您入门。

IIRC eof 返回一个值（-1），这就是为什么您需要将其与某物进行比较的原因。这里 fd 是您正在阅读的文件的文件描述符。然后在解析文本或行数之后，你就有了'n'。

**编辑：**因为我显然比我想的更累（没有注意到顶部的'n'）。
读取第一行 malloc for 'n' size array for loop 以迭代名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T01:45:46.903

由于给定的格式似乎暗示名称的数量`n`作为文件中的第一个条目给出，因此可以使用 OP 在从标准输入读取时描述的读取方式。用于`fscanf`从文件 ( `n`) 中读取第一个整数，然后用于`malloc`为名称分配数组，然后使用`for`循环 up to`n`来读取名称。

但是，我不确定`do x⁽¹⁾, y⁽¹⁾ and z⁽¹⁾`格式后面的示例数据的含义。也许我不理解问题的一部分。如果这意味着可能有多个`n`名称，那么您可以使用`realloc`来增加数组的大小。一种常见的增加数组的方法是每次将长度加倍。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T01:59:04.687

给你..我将编译和调试作为学生的练习。

如果你的文件总是很小，这个想法是把整个文件放入一个数组中。这比 scanf() 高效得多。

```
字符缓冲区[100000]，*bp，*N[1000]；// 很大

memset( buf, '\0', sizeof buf );
if ( fgets( buf, sizeof(buf), fd ) )
{
    诠释 n = 0;
    字符 *bp;
    如果 ( buf[(sizeof buf)-2)] != '\0' )
    { // 文件对于缓冲区来说太长了
        printf(stderr, "问题: 文件太大: %d\n", (int)(sizeof buf));
        退出（EXIT_FAILURE）；
    }
    // 现在用 \0 替换每个 \n，记住每一行的位置。
    for ( bp = buf, bp = strchr( bp, '\n' ); bp++ )
        N[n++] = bp;
}
```

如果要读取任何大小的文件，则需要以块的形式读取文件，在读取之前对每个块进行 calloc() 处理，并仔细处理留在当前缓冲区末尾的行片段以将它们移动到下一个缓冲区和然后正确地继续阅读。除非您对可以读取的行数有限制，否则 N 可能还需要分块设置，但这次 remalloc() 可能是您的朋友。

# html - 带有网络代码的 iTunes 应用程序？

> ID：15102660
> 
> 赞同：-1
> 
> 时间：2013-02-27T01:31:38.520
> 
> 标签：html, itunes, itunes-app

最近我开始在一个针对移动网络浏览器（iOS、3DS、DSi、Android 等）的网站上工作。我想在 iTunes 上制作一个应用程序来配合这个网站。问题是，我*不*知道从哪里开始，甚至不知道我的特定编码知识是否可行。

我可以使用 HTML、CSS、PHP 等编写 iTunes 应用程序，还是您必须了解更复杂的代码类型？如果我可以用网络代码来做，我是否需要某种许可证才能发布到应用商店？这一切如何运作？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T01:35:08.273

你不能用 PHP 编写 iOS 应用程序（我相信这就是你所说的 iTunes）。

[http://developer.apple.com/library/ios/referencelibrary/GettingStarted/RoadMapiOS/chapters/Introduction.html](http://developer.apple.com/library/ios/referencelibrary/GettingStarted/RoadMapiOS/chapters/Introduction.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T01:45:03.557

如果您正在谈论使用服务器后端将内容从 PHP 传递到用 HTML/Javascript 编写的用户客户端，那么使用 iOS 很容易做到这一点。您可以使用 UIWebKit 来显示 HTML 并执行 Javascript 代码。如果你想要 Obj-C 和 JS 之间的跨语言支持，Objective-C 可以使用以下方式与 Javascript 对话：

> [UIWebView stringByEvaluatingJavaScriptFromString:(NSString *)];

对于 Javascript 与 Objective C 的对话，这可以使用委托（特别是 UIWebViewDelegate）来完成，[这里](http://blog.techno-barje.fr//post/2010/10/06/UIWebView-secrets-part3-How-to-properly-call-ObjectiveC-from-Javascript/)有详细介绍。

# django - 获取与放置 http 请求对象

> ID：15102662
> 
> 赞同：1
> 
> 时间：2013-02-27T01:31:51.917
> 
> 标签：django, http

我有一些关于http get vs post的常见问题，如果有人能用例子澄清一下，那就太好了......

例子：-

这是我的看法

视图.py

```
def search(request):
    if request.method == 'POST':
        print 'request.post=', request.POST
        print 'request.get=', request.GET
        print 'request.method=', request.META.get('REQUEST_METHOD')
        if 'q' in request.GET:
            message = 'You searched for :%r' % request.POST['q']
        else:
            message = 'You submitted an empty form'
        return render(request, 'search_form.html', {'message': message})
    return render(request, 'search_form.html') 
```

search_form.html

```
<body>
    {% if message %}
        <div> {{ message }} </div>
    {% else %}
        <form action="/polls/search/" method="post">{% csrf_token %}
            <input type="text" name="q">
            <input type="submit" value="Search">
        </form>
    {% endif %}
</body> 
```

1.  POST 请求是否仅用于 HTML 表单？如果没有，还有什么其他方法可以做到这一点？
2.  任何没有表单的请求总是一个 GET 请求？
3.  如何使用表单处理 GET 和 POST..

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T01:40:08.280

> POST 请求是否仅用于 HTML 表单？如果没有，还有什么其他方法可以做到这一点？

您也可以发布 json 或 xml。比如jquery使用json或者xml数据类型的ajax post

> 任何没有表单的请求总是一个 GET 请求？

http 方法有 4 种类型，GET、POST、DELETE 和 PUT。根据您的使用方式，您可以使用其中任何一种。

更多关于此的文章。[http://bradley-holt.com/2009/07/html-5-http-methods-rest/](http://bradley-holt.com/2009/07/html-5-http-methods-rest/)

.

# sql - Visual Studio 2012 - 架构比较

> ID：15102666
> 
> 赞同：0
> 
> 时间：2013-02-27T01:32:10.140
> 
> 标签：sql, visual-studio-2012, schema, compare

我正在使用 Visual Studio 2012 将我的开发数据库项目与现有数据库进行比较。现有的数据库有一些自定义的表、存储过程和函数，我希望它们被忽略。

我的第一个想法是使用安全架构，我发现了这个解决方法： [Visual Studio 2010 - 架构比较 - 指定数据库（安全）架构](https://stackoverflow.com/questions/3249274/visual-studio-2010-schema-compare-specify-database-security-schema)

还有其他解决方案吗？

有没有办法自动化任务以生成具有差异的脚本？像 TFS 自动构建之类的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-03T15:43:02.917

你问这个问题显然已经有几个月了，但据我所知，模式比较/SSDT 还不可能。

使用 redgates Sql Compare 等第三方工具（通过使用过滤器），这种功能是可能的，但我知道这不是你问的问题。

如果您在此期间发现了如何操作，请告诉我！:)

# .net - 渲染窗口镶边控制框的“后面”

> ID：15102667
> 
> 赞同：2
> 
> 时间：2013-02-27T01:32:12.757
> 
> 标签：.net, wpf, .net-4.5, window-chrome

我有一种风格，它去除了通常的窗户镀铬并用航空效果玻璃代替它（代码在底部）。

如果您查看指示的线，我正在使用黑盒来使玻璃变暗但保持半透明（我从中获取的示例使用白盒用于类似目的）。我遇到的问题是黑框出现在控制框上方。带有和不带有黑框的窗口的屏幕截图...

![在此处输入图像描述](../Images/e6bf646ff19ce0ba7ca164d1bc3ca19f.png) ![在此处输入图像描述](../Images/22853f536d734f89cf97c937b8d7bac4.png)

（包括记事本供参考）。我想让窗口变暗，但这会使控件无法使用我当前的方法。另外，请注意悬停在我的表格上的红色光芒`X`在我的表格之外是明亮的，但在里面是黑暗的。

所以，我的具体问题是......如何让控制框呈现在“背景”层之上？

更一般地说，感觉必须有更好的方法来做到这一点？我倾向于不喜欢过多地模仿，因为边缘情况太多了。

我想要实现的是一个窗口（*如果它现在正在工作）：

*   黑暗（不是真的工作）
*   通常的 3 个控制按钮（如果不是上述情况，可能会起作用）
*   可调整大小 *
*   使用标题栏区域可拖动 *
*   半透明 *
*   chrome 和我的窗口之间没有“控制”边框 *

我提到那份洗衣单只是为了让你知道我需要用任何解决方案做什么。我正在使用 .Net 4.5，这意味着`System.Shell.ChromeWindow`它包含在框架中，但似乎与我能找到的每个教程中提到的旧版本略有不同。

有人可以指出我正确的方向吗？

```
<Application.Resources>
    <BitmapImage x:Key="MainIcon"
                 UriSource="./Resources/MainIcon.png" />
    <Style x:Key="Chromeless"
           TargetType="{x:Type Window}">
        <Setter Property="WindowChrome.WindowChrome">
            <Setter.Value>
                <WindowChrome GlassFrameThickness="-1"
                              ResizeBorderThickness="4"
                              CaptionHeight="36" />
            </Setter.Value>
        </Setter>
        <!--pack://application:,,,/Resources/Search.png-->
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type Window}">
                    <Grid>
                        <!-- This is the ContentPresenter that displays the window content. -->
                        <Border Margin="0,40,0,25">
                            <ContentPresenter Content="{TemplateBinding Content}" />
                        </Border>

                        <!--This is the transparent white rectangle that goes behind the window content.-->
                        <!-- Window Border Content -->
<!-- HERE ---->             <Border Margin="0"
                                BorderBrush="Gray"
                                BorderThickness="0,1,0,1"
                                Grid.ZIndex="-1">
                            <Rectangle Fill="Black"
                                       Opacity="0.5" />
                        </Border>
                        <!-- System Button -->
                        <Button VerticalAlignment="Top"
                                HorizontalAlignment="Left"
                                Style="{StaticResource {x:Static ToolBar.ButtonStyleKey}}"
                                WindowChrome.IsHitTestVisibleInChrome="True"
                                Command="{x:Static SystemCommands.ShowSystemMenuCommand}"
                                CommandParameter="{Binding ElementName=LibraryWindow}"
                                BorderThickness="0">
                            <Image Source="{StaticResource MainIcon}"
                                   Width="64"
                                   Height="64"
                                   WindowChrome.IsHitTestVisibleInChrome="True"
                                   />

                        </Button>
                        <!-- Window Title -->
                        <TextBlock VerticalAlignment="Top"
                                   TextAlignment="Left"
                                   FontSize="15"
                                   Padding="40,8,0,0"
                                   Foreground="White"
                                   Text="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=Title}" />
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

</Application.Resources> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-03-26T22:27:23.753

据我了解，您正试图通过在所有内容之上渲染一个黑色大矩形来使整个玻璃区域变暗，但您希望窗口控制按钮不受影响。遗憾的是，这种方法不起作用，因为如果您使用自定义窗口镶边，那么您将无法有选择地决定在玻璃顶部或下方渲染什么；它将始终呈现在顶部。据我所知，这样做的唯一方法是重新实现按钮，因为它们是半透明的，所以无论您更改航空玻璃的颜色还是仅使用矩形，按钮将始终是做作的。这在 Windows 10 中尤为明显；如果您更改航空玻璃颜色，按钮的背景也会发生变化，但在 windows 8、7 和 vista 中也是如此。

# ember.js - 操作 RecordArray

> ID：15102668
> 
> 赞同：3
> 
> 时间：2013-02-27T01:32:14.557
> 
> 标签：ember.js, ember-data

我有一个从 App.ModelName.find() 返回的 RecordArray。

我想用它做一些事情，比如：

*   对内的记录集进行分页
*   将另一个 findQuery 中的记录添加到数组中

我可能会感到困惑，但似乎很难（或至少没有记录）如何处理从 find()/findAll()/findQuery() 返回的记录，而不是循环遍历集合并正常显示它们.

从 all() 返回的数组使这更加复杂，这似乎更接近于一个恒等映射，也许。

这一切都不可能，但如果不是，我可以打开问题并自己开始处理。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T03:11:59.917

Ember Data 返回的`RecordArray`s 并不真正用于修改。特别是，`Model.find()`(sans-argument) 并`Model.all()`返回随着新匹配记录可用而不断更新的实时数组。

如果要操作模型数组，最好使用`Model.find({})`（参数使其使用`findQuery()`）并观察`isLoaded`属性。像这样的东西：

```
query: null,

init: function() {
  // should really do this in the route
  this.set('query', Model.find({}));
},

content: function() {
  var query = this.get('query');
  return query && query.get('isLoaded') ? query.toArray() : [];
}.property('query.isLoaded') 
```

现在 content 返回一个普通的旧数组，您可以随心所欲地使用它（尽管您仍然需要等待记录加载才能开始修改数组）。

如果问题是您希望查询不断更新，请考虑使用`Model.filter()`，它返回一个类似于 的实时数组`find()`，但接受匹配函数。请注意，令人困惑但有意为之的是`find()`，`all()`, 和`filter()`都没有`isLoaded`属性。

至于分页，你可以尝试[一个简单的 mixin 方法](https://gist.github.com/tchak/1559628)，或者更复杂[的基于 rails 的解决方案](https://github.com/mathieul/page_wrapper)。

# iphone - Cocos2D中的坐标系

> ID：15102669
> 
> 赞同：0
> 
> 时间：2013-02-27T01:32:26.547
> 
> 标签：iphone, ios, objective-c, cocos2d-iphone, sprite

我在检测 Cocos2D 中的碰撞时遇到问题，因为我用来查看对象是否碰撞的坐标总是错误的。

我有以下对象：

1.  平铺地图图层中的所有精灵，包含所有障碍物；
2.  一个精灵，它是另一个精灵的子精灵，它是 hello world 图层的子精灵（我正在使用的主图层，它返回场景）。这个精灵在地图中不断移动，它可能会与障碍物发生碰撞。

为了检测碰撞，我只看到了 2 个精灵边界框之间的距离：

```
inline BOOL collision(CGRect r1, CGRect r2)
{
    CGPoint c1= RectCenter(r1);
    CGPoint c2= RectCenter(r2);
    BOOL result= (fabs(c1.x-c2.x)<MAX(r1.size.width/2.0,r2.size.width/2.0)) && (fabs(c1.y-c2.y)<MAX(r1.size.height/2.0,r2.size.height/2.0));
    return result;
} 
```

我使用 boundingBox 属性来获取每个精灵的坐标和大小。但是坐标是错误的，它不能正确检测到碰撞。

我很确定我做错了什么，有人可以告诉我如何管理所有精灵以拥有相同的坐标系吗？我也尝试过使用 convertToWordSpace，但没有运气。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T01:41:54.237

您可以取消碰撞方法，转而使用内置函数来查看两个 CGRects 是否相交：

```
CGRectIntersectsRect(r1, r2); 
```

# applescript - Apple Script：将文件移动到适当的文件夹

> ID：15102676
> 
> 赞同：1
> 
> 时间：2013-02-27T01:32:52.200
> 
> 标签：applescript, filenames, move

我对 Apple Script 相当陌生，我希望能在完成这项简单但多余的任务时获得一些帮助。

假设我有一个包含这些文件夹的文件夹

贾巴 Foo Biggie

我想将文件放入此文件夹，并让它自动按文件名对 4 个选项中的 1 个进行排序。如果文件名包含 jabba，则转到 Jabba 文件夹，如果 foo 然后 Foo 文件夹，... 如果没有，不要做任何事情，让它保持不变。

谢谢

我有 OSX 10.7.5

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T04:38:31.127

尝试：

```
on adding folder items to theFolder after receiving theFiles
    repeat with aFile in theFiles
        tell application "Finder"
            if aFile's name contains "Jabba" then
                move aFile to (first folder of theFolder whose name = "Jabba")
            else if aFile's name contains "Foo" then
                move aFile to (first folder of theFolder whose name = "Foo")
            else if aFile's name contains "Biggie" then
                move aFile to (first folder of theFolder whose name = "Biggie")
            end if
        end tell
    end repeat
end adding folder items to 
```

# javascript - 如果列的所有单元格都为空，则 exjts 隐藏列

> ID：15102677
> 
> 赞同：0
> 
> 时间：2013-02-27T01:33:41.217
> 
> 标签：javascript, extjs

如果列中的所有单元格都是空的，我试图隐藏该列。我试图通过遍历商店在列侦听器中执行此操作，但我猜当时没有填充商店。有什么建议可以实现这个功能吗？

```
Ext.define('com.abc.MyGrid' , {
    扩展：'Ext.grid.Panel'，
        商店：'我的商店'，
    列 ： [{
        文本：'col1'，
        可排序：真，
        数据索引：'col1'
    }, {
        文本：'col2'，
        可排序：真，
        数据索引：'col2'，
                听众：{
            “之前”：函数（）{
                console.log(this.up('grid').store);
                this.up('grid').store.each(function(record,idx){
                                        // 如果record.get('col1')全部为空
                                        //隐藏列
                     console.log(record.get('col1'));
                });
            }
        }
    }

})

```

但这是行不通的。基本上，列侦听器“渲染之前”中的存储循环没有执行，因为上面的 console(this.up('grid').store) 使用值打印存储。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T05:41:31.860

给你，它不能处理所有事情，但应该足够了。

```
Ext.define('HideColumnIfEmpty', {
    extend: 'Ext.AbstractPlugin',
    alias: 'plugin.hideColumnIfEmpty',

    mixins: {
        bindable: 'Ext.util.Bindable'
    },

    init: function(grid) {
        this.grid = grid;
        this._initStates();
        this.grid.on('reconfigure', this._initStates, this);
    },

    _initStates: function(store, columns) {
        var store = this.grid.getStore(),
            columns = this.grid.columns;

        this.bindStore(store);
        this.columns = columns;

        if(store.getCount() > 0) {
            this._maybeHideColumns();
        }
    },
    /**
     *@implement
     */
    getStoreListeners: function() {
        return {
            load: this._maybeHideColumns
        };
    },

    _maybeHideColumns: function() {
        var columns = this.columns,
            store = this.store,
            columnKeysMc = new Ext.util.MixedCollection();

        Ext.Array.forEach(columns, function(column) {
            columnKeysMc.add(column.dataIndex, column);
        });

        Ext.Array.some(store.getRange(),function(record){
            //don't saw off the branch you are sitting on
            //eachKey does not clone
            var keysToRemove = [];

            columnKeysMc.eachKey(function(key) {
                if(!Ext.isEmpty(record.get(key))) {
                    keysToRemove.push(key);
                }
            });

            Ext.Array.forEach(keysToRemove, function(k) {
                columnKeysMc.removeAtKey(k);
            });

            return columnKeysMc.getCount() === 0;
        });

        columnKeysMc.each(function(column) {
            column.hide();
        });
    }
}); 
```

这是一个例子：

```
Ext.create('Ext.data.Store', {
    storeId:'simpsonsStore',
    fields:['name', 'email', 'phone'],
    data:{'items':[
        { 'name': 'Lisa',  "email":"lisa@simpsons.com",  "phone":"555-111-1224"  },
        { 'name': 'Bart',  "email":"bart@simpsons.com",  "phone":"555-222-1234" },
        { 'name': 'Homer', "email":"home@simpsons.com",  "phone":"555-222-1244"  },
        { 'name': 'Marge', "email":"marge@simpsons.com", "phone":"555-222-1254"  }
    ]},
    proxy: {
        type: 'memory',
        reader: {
            type: 'json',
            root: 'items'
        }
    }
});

Ext.create('Ext.grid.Panel', {
    title: 'Simpsons',
    store: Ext.data.StoreManager.lookup('simpsonsStore'),
    columns: [
        { text: 'Name',  dataIndex: 'name' },
        { text: 'Email', dataIndex: 'email', flex: 1 },
        { text: 'Phone', dataIndex: 'phone' },
        { text: 'Says Doh', dataIndex: 'saysDoh'}
    ],
    plugins: {ptype: 'hideColumnIfEmpty'},
    height: 200,
    width: 400,
    renderTo: Ext.getBody()
}); 
```

您可以在示例中看到 sayDoh 列被隐藏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T08:48:39.967

如果要遍历商店，则需要在商店的`load`事件上放置一个侦听器。beforerender 并不意味着您的商店已经加载。

我会将您的创建存储在 initComponent 中。像这样的东西：

```
Ext.define('com.abc.MyGrid', {
    extend: 'Ext.grid.Panel',
    columns: [{
        text: 'col1',
        sortable: true,
        dataIndex: 'col1'
    }, {
        text: 'col2 ',
        sortable: true,
        dataIndex: 'col2'
    },

    initComponent: function () {
        var me = this;
        //Create store
        var myStore = Ext.create('MyStore');
        myStore.load(); // You can remove this if autoLoad: true on your store.
        //Listen to load event (fires when loading has completed)
        myStore.on({
            load: function (store, records, success) {
                store.each(function (record, idx) {
                    console.log(record.get('col1'));
                });
            }
        });

        //Apply the store to your grid
        Ext.apply(me, {
            store: myStore
        });

        me.callParent();
    }
}); 
```

# ios - IOS 让故事板更快

> ID：15102679
> 
> 赞同：1
> 
> 时间：2013-02-27T01:33:53.310
> 
> 标签：ios, storyboard, psd, fireworks

我有一个更有经验的 ios 开发人员，所以我只是想简化故事板的创建过程。我不是 UI 大佬，我更愿意在代码中而不是界面构建器中。

有谁知道可以加快这个过程的解决方案？

我看过 appcelerator 和 mosync 之类的应用程序创建者，但它们对于我最近参与的项目来说不够灵活。我主要得到烟花设计，但有时我会外包一些 PSD 的成像，如果有帮助的话。有什么建议吗？

# c - Redirecting stdout to socket

> ID：15102680
> 
> 赞同：1
> 
> 时间：2013-02-27T01:33:54.133
> 
> 标签：c, sockets, stdout, stdio, dup2

I am trying to redirect stdout to a socket. I do something like this:

```
dup2(new_fd, STDOUT_FILENO); 
```

After doing so all `stdio` functions writing to the stdout fail. I have tried to reopen stdout this way:

```
fclose(stdout);
stdout = fdopen(STDOUT_FILENO, "wb"); 
```

But `printf` and other functions still don't work.

EDIT:

I am affraid that I misunderstood the problem at the first place. After some more debugging I've figured out that this is a real issue:

```
printf("Test"); // We get Broken pipe here
// Reconnect new_fd
dup2(new_fd, STDERR_FILENO);
printf("Test"); // This also returns Broken pipe despite that stdout is fine now 
```

Thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T02:07:59.530

1: on `dup2(src, dst)`

A number of operating systems track open files through the use of file descriptors. `dup2` internally duplicates a file descriptor from the `src` to `dst`, closing `dst` if its already open.

What your first statement is doing is making every write to `STDOUT_FILENO` to go to the object represented by `new_fd`. I say object because it could be a socket as well as a file.

I don't see anything wrong with your first line of code, but I don't know how `new_fd` is defined.

2: on reopening `stdout`

When you close a file descriptor, the OS removes it from its table. However, when you open a file descriptor, the OS sets the smallest available file descriptor as the returned value. Thus, to reopen `stdout`, all you need to do is reopen the device. I believe the device changes depending on the OS. For example, on my Mac the device is `/dev/tty`.

Therefore, to reopen the stdout, you want to do the following:

```
close(1);
open("/dev/tty", O_WRONLY); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T15:51:21.893

I've solved the problem by clearing a stdio's error indicator after fixing `stdout`:

```
clearerr(stdout); 
```

Thanks for your help.

# javascript - 如何为每个对象独立启动动画（KineticJS）

> ID：15102682
> 
> 赞同：0
> 
> 时间：2013-02-27T01:34:35.960
> 
> 标签：javascript, kineticjs

我正在使用动力学

```
 for(var i = 0; i < playerData.length; i++)
        {
            (function(i){
                data = playerData[i];

                group = stage.get('#' + data.user_id)[0];

                    var anim = new Kinetic.Animation(function(frame){

                                        dx = group.getX() - data.posX;
                                        dy = group.getY() - data.posY;

                                        var dist = Math.sqrt(dx * dx + dy * dy);

                                        var angle = Math.atan2(dy, dx);

                                        var speedX = Math.cos(angle) * moveSpeed;
                                        var speedY = Math.sin(angle) * moveSpeed;
                                        group.setX(parseInt(group.getX()) - speedX);
                                        group.setY(parseInt(group.getY()) - speedY);
                                        console.log(dist);

                    }, mainLayer);
                    console.log('animation started');
                    anim.start();

            })(i)
        } 
```

我在为每个对象执行动画时遇到问题，每次从服务器获取新数据时，我都会循环所有对象以在新坐标处移动，但我不明白如何正确执行动画，我的对象不运行同时，它们开始卡住，所以问题是：我怎样才能开始一个新的 Kinetic.Animation 然后成功地为每个对象停止它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T03:16:39.887

因此，如果我正确理解您的代码，您希望同时为多个对象设置动画，所有对象都在同一层中。

您遇到减速的原因是因为您有多个动画对象。因此，每次移动一个对象时，您都在重新绘制整个图层。

所以你真正想做的是重组为：

```
var anim = new Kinetic.Animation(function(frame){ // one animation on outside controlling logic for playerData
    for(var i = 0; i < playerData.length; i++)
    {
        (function(i){
            var data = playerData[i];

            group = stage.get('#' + data.user_id)[0];

            var dx = group.getX() - data.posX;
            var dy = group.getY() - data.posY;

            var dist = Math.sqrt(dx * dx + dy * dy);

            if(dist > 1){ //this takes care of the stop you are looking for
                var angle = Math.atan2(dy, dx);

                var speedX = Math.cos(angle) * moveSpeed;
                var speedY = Math.sin(angle) * moveSpeed;
                group.setX(parseInt(group.getX()) - speedX);
                group.setY(parseInt(group.getY()) - speedY);
                console.log(dist);
            }
            else{
                console.log(group.getName() + 'stopped moving');
                //this.stop(); // maybe use this to stop animation?
            }
        })(i)
    }
}, mainLayer);

console.log('animation started');
anim.start(); 
```

这样，您只需重绘一次图层，速度就会更高。另外，我不确定您是否需要在 for 循环中使用匿名函数。

# javascript - 如何触发选择的更改事件（jQuery）

> ID：15102685
> 
> 赞同：22
> 
> 时间：2013-02-27T01:35:19.693
> 
> 标签：javascript, jquery, jquery-chosen

在我点击重置按钮之前，我在选择（下拉列表）中选择“公司”。单击重置后，该事件通常会发生。我再次选择“公司”，但`change`下拉列表中的事件没有发生。

谁能告诉我如何在单击重置按钮然后单击相同元素后触发下拉列表的更改事件？

我到目前为止的代码：

```
$("#mainMenu").change(function(e){
    e.preventDefault();
    loadFirstManu(true);
}); 
```

重置按钮的代码：

```
$("#btn_reset").click(function() {
  CKEDITOR.instances.ckeditor.setData('');
  $('.mchosen').each(function() {
     $(this).val('').trigger('liszt:updated');
     $('#submenu').attr('disabled', 'disabled').html('');
     $('#secondsubmenu').attr('disabled', 'disabled').html('');
     $('#s-menu').removeClass('required').html('');
     $('#secondsubmenu').removeClass('validate[required]');
     $('#tabmenu').attr('disabled', 'disabled').html('');
     $('#tab').removeClass('required').html('');
  }); 
```

});

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-05-21T21:30:05.297

这就是我想出的：

```
$('#my-select').val(5).trigger("liszt:updated") 
```

`liszt:updated`不再在选择的新版本中工作，而是在下面使用[Alexandru Cojan 的](https://stackoverflow.com/a/25934664/1723893)回答建议

```
 trigger("chosen:updated"); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-09-19T13:06:48.590

对于选择的较新版本的事件是“选择：更新”

```
$(selector).trigger("chosen:updated") 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2016-07-02T14:30:33.453

如果我只需要刷新所选选择中的值 -`.trigger('chosen:updated')`就足够了。但是如果我有更改处理程序并希望它被调用 - 我需要做`.trigger('chosen:updated').change()`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T01:42:06.940

我不知道这是否是您的情况，但是您上面的代码应该可以工作，

```
$("#mainMenu").change(function(e){
        e.preventDefault();
        loadFirstManu(true);
    }); 
```

但请注意，当您**取消**选择输入时，大多数浏览器都会发生“更改”事件

因此，当您单击**reset**时，就在执行重置操作之前触发**onchange 。**

现在尝试在更改选择后单击选择输入外部，看看它是否仍然有效

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-27T01:42:48.967

也许你应该尝试使用 .on，因为你的 $('#mainMenu') 可能在某个地方发生了变化（没有例子就不能说）。尝试这样做：

```
$("body").on('change','#mainMenu',function(){ 
  ...
}); 
```

或任何父选择器而不是“重”体

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-27T01:54:07.137

如果我对您的理解没有错，那么您想在单击重置按钮后触发事件更改。你可以通过简单地在你的代码中添加一行来做到这一点 //code

```
 $("#btn_reset").click(function(){
       // your code here
       $("#mainMenu").trigger('change'); 
       //you can write this as per your requirements ie. at start or end.

      }); 
```

# haskell - 找出一些例子的 lambda 演算/haskell 类型

> ID：15102689
> 
> 赞同：0
> 
> 时间：2013-02-27T01:35:59.063
> 
> 标签：haskell, lambda, lambda-calculus

假设函数输入两个不同类型的变量（例如，一个变量是 C 语言的 int，一个变量是 C 语言的 char）并返回一个 in 的变量`Int`。

如果将此函数编码为 Haskell 或 lambda 演算代码，该函数的类型将如何？

所以假设函数有 type `Int -> (Char -> Char) -> Int`。这意味着什么？这是否意味着它接收 int 变量作为输入并运行函数`(Char -> Char)`并输出`Int`变量？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-27T02:11:10.387

一个类型`Int -> (Char -> Char) -> Int`意味着该函数接受一个`Int`和一个类型的函数`Char -> Char`作为输入，并输出一个`Int`。

该函数不必实际*使用*其输入本身。例如，

```
meetoosFunction :: Int -> (Char -> Char) -> Int
meetoosFunction _ _ = 42

*Main Data.Char> meetoosFunction 1 toUpper
42 
```

# authentication - 致命：远程端通过连接到 GitHub 意外挂断

> ID：15102690
> 
> 赞同：4
> 
> 时间：2013-02-27T01:36:50.997
> 
> 标签：authentication, github, ssh, connection

[我已经设置了我的本地系统，以便在“生成 SSH 密钥](https://help.github.com/articles/generating-ssh-keys)”操作指南中描述如何与 GitHub 一起工作。

密钥文件和 known_hosts 已创建，公钥已添加到 GitHub 帐户，我收到消息“Hi ***！您已成功验证，但 GitHub 不提供 shell 访问权限。”

![在此处输入图像描述](../Images/405c5f01dd8df799e3d3bc35bbe492c2.png)

但是我所有尝试做某事，需要连接到服务器的东西（编辑：具有写入访问权限）——git clone、git push 等——以错误结束：

> 致命：远端意外挂断

编辑：

我可以克隆，但只能通过 HTTP ( [https://github.com/account/reponame.git](https://github.com/account/reponame.git) ) 或 Git 只读 (git://github.com/account/reponame.git)。

编辑：

```
***@**** ~/.ssh
$ ssh-add -l
Could not open a connection to your authentication agent. 
```

虽然 ssh-agent 守护进程 ( `ssh-agent.exe`) 正在运行。

大概这就是问题所在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T15:57:20.547

有用！

我已经启动了**Pageant**（PuTTY SSH 身份验证代理）并向其中添加了我的 PuTTY 私钥（使用**PuTTYgen**（PuTTY 密钥生成器）从中`id_rsa.pkk`导出）。现在我可以写我的回购了。**`id_rsa`**

 **给遇到我同样烦恼的每个人的小方法：

0) 设置本地系统以使用 GitHub，如何在“[生成 SSH 密钥](https://help.github.com/articles/generating-ssh-keys)”操作指南中描述。

1）打开**PuTTYgen**，加载/导入（OpenSSH）私钥`id_rsa`并将其（按钮`Save private key`）保存为`id_rsa.pkk`（在同一文件夹中，`id_rsa`保存位置，-- `~/.ssh`）。**您需要使用Pageant**和（如果使用的话）TortoiseGit进行 PuTTY 身份验证的密钥的 PuTTY 变体。

![在此处输入图像描述](../Images/62f77853e1ced669c5ccd336a075ab2e.png)

2a）打开**Pageant**（在我的电脑上`C:\Program Files (x86)\PuTTY\pageant.exe`）并添加PuTTY私钥。**或者只需使用Pageant**打开 PuTTY 私钥文件 ( `id_rsa.pkk`) 。

 **2b) 对于**TrtoiseGit**，我只需在全局 TrtoiseGit 设置中设置`SSH client`( )。`C:\Program Files (x86)\Git\bin\ssh.exe`

![在此处输入图像描述](../Images/d2f8b1349a5c316c27c9f3fee8a3a18b.png)

而已。

> 我已经让它工作了，但我对这个主题没有深入的了解，无法提供解决方案和这个问题的原因的低层次解释（例如为什么它在某些客户中工作而不是在其他一些）。因此，如果您能更好地解释这一切，请随时编辑/评论这篇文章。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T07:38:44.443

当 GitHub 正确记录您的公共 ssh 密钥时，弹出该错误消息的唯一实例是

*   您尝试使用错误的案例或不正确的 ssh url 克隆 repo。
    它应该是：

```
git clone git@github.com:user/repo.git
```

*   您尝试克隆一个您没有写入权限（公共回购）或任何访问权限（私人回购）的回购。
    从 GitHub 页面“[我应该使用哪个远程 URL？](https://help.github.com/articles/which-remote-url-should-i-use) ”

> 要使用这些 URL，**您必须具有对公共存储库的写入权限或对私有存储库的任何访问权限**。
> 这些 URL 不适用于您没有写入权限的公共存储库。

*   私钥受密码保护，您的身份验证代理无法正常运行：

```
$ ssh-添加 -l
无法打开与您的身份验证代理的连接。
```

对于最后一种情况，请考虑“[如何运行 (git/ssh) 身份验证代理？](https://stackoverflow.com/a/10077302/6309) ”或“ [ssh-add 抱怨：无法打开与您的身份验证代理的连接](https://unix.stackexchange.com/a/48868)”****

# webkit - 为什么 WebKitGTK 使用 mozilla 插件和 xulrunner？

> ID：15102691
> 
> 赞同：0
> 
> 时间：2013-02-27T01:37:16.630
> 
> 标签：webkit, media-player, gstreamer, webkitgtk

我有一个简单的应用程序`WebKitGTK 1.6.0`，它只是在窗口中显示一个网页。

当我使用它浏览包含 Ogg/Theora 视频和 HTML5 视频元素的页面时，似乎这个简单的应用程序正在使用一些 mozilla 插件，甚至是 xulrunner。有人能告诉我这是为什么吗？

这是[程序使用 lsof 打开的文件列表](http://pastebin.com/YNNZX09p)。

我构建`WebKitGTK 1.6.0`了它的大部分依赖项，包括源代码`gstreamer-0.10`和`gstreamer plugins`. 我不记得在哪里配置`WebKitGTK`为使用任何 mozilla 插件或 xulrunner。

什么可能导致加载 mozilla 插件、libtotem 和 xulrunner？我提供了应用程序正在使用的文件的链接，希望它可以提供线索。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T01:57:46.533

呵呵，找到原因了。我的系统上安装了 FireFox、totem 和 totem-mozplugin。一旦我删除了 totem 和 totem-mozplugin，`WebKitGTK`使用适当的 Gstreamer 插件来渲染视频和音频。

# c# - 我无法在 C# 中进行队列同步

> ID：15102692
> 
> 赞同：0
> 
> 时间：2013-02-27T01:37:24.973
> 
> 标签：c#

我正在使用 unity3d 在 c# 中创建游戏。这有点像“交通狂热”。我需要将汽车排入队列并在它们过马路时将它们排入队列。当我将其排入队列时，它工作正常.. 但是当我将其排入队列时，我有这个例外：

**“InvalidOperationException：由于对象的当前状态，操作无效”**

这是我的队列代码：

```
public Queue UD_queue;

public int score;

void Awake(){
    InitQueues();
        score = 0;
}

public void InitQueues(){
    DU_queue = new Queue();
    Debug.Log("queue initialized");
}

private Queue syncQ(Queue q){
    Queue sync_q = Queue.Synchronized(q);
    return sync_q;
}

public void DoEnqueue(GameObject go){
    lock(DU_queue)
        DU_queue.Enqueue(go);
}

public void DoDequeue(){
    lock(DU_queue)
        DU_queue.Dequeue();
        score +=500;
} 
```

在其他类中，我调用方法 DoEnqueue() 和 DoDequeue()

谁能告诉我为什么 lock(){} 不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T02:17:19.747

如何使用[ConcurrentQueue](http://msdn.microsoft.com/en-us/library/dd267265.aspx)。您不再需要使用任何锁。

# c# - 不仅可以将 HTMLHelper 用于属性值，还可以用于属性名称？

> ID：15102696
> 
> 赞同：2
> 
> 时间：2013-02-27T01:37:52.917
> 
> 标签：c#, asp.net-mvc, html-helper, asp.net-webpages, razor-2

我想根据我传递带有他的值的特定属性来生成。这就是我想使用帮助器的方式：

```
<sometag @PossibleHelper(parameter)/> 
```

在 PossibleHelper 做他的事情之后，这可能是结果：

```
<sometag attributeName="attributeValue"/> 
```

我如何在助手中表达这一点？

```
@helper PossibleHelper(someType){

    if(condition){
      attributeName="attributeValue"      //this is wrong
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T01:47:47.163

当您使用助手时，它只是常规的剃刀语法。

```
@helper PossibleHelper(SomeType something) {
    if (condition) {
        <span attributeName="attributeValue">blah</span>
    }
} 
```

您可以设置这样的属性。

```
@helper PossibleHelper(int something) {
    var attrValue = string.Empty;
    if (true) {
        attrValue = "attributeValue";
    }
    @(string.Format("attribute={0}", attrValue))
} 
```

用法：

```
<sometag @PossibleHelper(parameter)/> 
```

`HtmlHelper`仅供参考，如果代码在视图之间共享或有大量逻辑，您还可以创建一个扩展方法可能会更好。

```
public static class HtmlHelperExtensions
{
    public static MvcHtmlString SomeExtension(this HtmlHelper htmlHelper)
    {
        // ...
    }
} 
```

# java - 显示大量阻塞进程的线程转储

> ID：15102699
> 
> 赞同：0
> 
> 时间：2013-02-27T01:38:12.290
> 
> 标签：java, multithreading, gwt, visualvm

我正在调试一个 GWT Web 应用程序，该应用程序在运行一段时间后已经耗尽 permgen 空间，并在 VisualVM 的线程转储中注意到有 248 个进程等待锁定相同的 StringBuffer，例如：

```
2013-02-27 10:56:30
Full thread dump Java HotSpot(TM) 64-Bit Server VM (23.3-b01 mixed mode):

"Attach Listener" daemon prio=10 tid=0x00007f3bdc00f000 nid=0x3bee waiting on condition [0x0000000000000000]
   java.lang.Thread.State: RUNNABLE

   Locked ownable synchronizers:
    - None

"1301161716@qtp-1875293347-251" prio=10 tid=0x00007f3ba8209800 nid=0x301f waiting for monitor entry [0x00007f3b6a15f000]
   java.lang.Thread.State: BLOCKED (on object monitor)
    at org.mortbay.log.StdErrLog.warn(StdErrLog.java:128)
    - waiting to lock <0x0000000087b405c8> (a java.lang.StringBuffer)
    at org.mortbay.jetty.handler.ContextHandler$SContext.log(ContextHandler.java:1424)
    at com.google.gwt.user.server.rpc.RPCServletUtils.writeResponseForUnexpectedFailure(RPCServletUtils.java:389)
    at com.google.gwt.user.server.rpc.AbstractRemoteServiceServlet.doUnexpectedFailure(AbstractRemoteServiceServlet.java:110)
    at com.google.gwt.user.server.rpc.AbstractRemoteServiceServlet.doPost(AbstractRemoteServiceServlet.java:67)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:727)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:820)
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:401)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:766)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:450)
    at org.mortbay.jetty.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:230)
    at org.mortbay.jetty.handler.HandlerCollection.handle(HandlerCollection.java:114)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.Server.handle(Server.java:326)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
    at org.mortbay.jetty.HttpConnection$RequestHandler.content(HttpConnection.java:945)
    at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:756)
    at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:218)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
    at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:410)
    at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582)

   Locked ownable synchronizers:
    - None

"182760474@qtp-1875293347-250" prio=10 tid=0x00007f3ba8207800 nid=0x2ff7 waiting for monitor entry [0x00007f3b6a260000]
   java.lang.Thread.State: BLOCKED (on object monitor)
    at org.mortbay.log.StdErrLog.warn(StdErrLog.java:128)
    - waiting to lock <0x0000000087b405c8> (a java.lang.StringBuffer)
    at org.mortbay.jetty.handler.ContextHandler$SContext.log(ContextHandler.java:1424)
    at com.google.gwt.user.server.rpc.RPCServletUtils.writeResponseForUnexpectedFailure(RPCServletUtils.java:389)
    at com.google.gwt.user.server.rpc.AbstractRemoteServiceServlet.doUnexpectedFailure(AbstractRemoteServiceServlet.java:110)
    at com.google.gwt.user.server.rpc.AbstractRemoteServiceServlet.doPost(AbstractRemoteServiceServlet.java:67)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:727)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:820)
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:401)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:766)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:450)
    at org.mortbay.jetty.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:230)
    at org.mortbay.jetty.handler.HandlerCollection.handle(HandlerCollection.java:114)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.Server.handle(Server.java:326)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
    at org.mortbay.jetty.HttpConnection$RequestHandler.content(HttpConnection.java:945)
    at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:756)
    at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:218)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
    at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:410)
    at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582)

   Locked ownable synchronizers:
    - None

"1468146634@qtp-1875293347-249" prio=10 tid=0x00007f3ba8205800 nid=0x2f89 waiting for monitor entry [0x00007f3b6a361000]
   java.lang.Thread.State: BLOCKED (on object monitor)
    at org.mortbay.log.StdErrLog.warn(StdErrLog.java:128)
    - waiting to lock <0x0000000087b405c8> (a java.lang.StringBuffer)
    at org.mortbay.jetty.handler.ContextHandler$SContext.log(ContextHandler.java:1424)
    at com.google.gwt.user.server.rpc.RPCServletUtils.writeResponseForUnexpectedFailure(RPCServletUtils.java:389)
    at com.google.gwt.user.server.rpc.AbstractRemoteServiceServlet.doUnexpectedFailure(AbstractRemoteServiceServlet.java:110)
    at com.google.gwt.user.server.rpc.AbstractRemoteServiceServlet.doPost(AbstractRemoteServiceServlet.java:67)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:727)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:820)
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:401)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:766)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:450)
    at org.mortbay.jetty.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:230)
    at org.mortbay.jetty.handler.HandlerCollection.handle(HandlerCollection.java:114)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.Server.handle(Server.java:326)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
    at org.mortbay.jetty.HttpConnection$RequestHandler.content(HttpConnection.java:945)
    at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:756)
    at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:218)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
    at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:410)
    at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582)

   Locked ownable synchronizers:
    - None

...etc... 
```

这是一个问题吗？这可能是什么原因造成的？该应用程序正在开发机器上运行，我是唯一一个查看它的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T05:30:14.453

简短回答：您的应用程序发生了一些内部异常，您需要检查服务器日志（码头日志、访问日志、应用程序日志等）以确定根本原因。

* * *

**分析：**

被`StringBuffer`定义为实例变量`org.mortbay.log.StdErrLog`：

```
public class StdErrLog implements Logger {    
  // ...
  StringBuffer _buffer = new StringBuffer();
  //...
} 
```

它的使用被包装在一个`synchronized`块中：

```
public void warn(String msg,Object arg0, Object arg1)
{
    String d=_dateCache.now();
    int ms=_dateCache.lastMs();
    synchronized(_buffer)
    {
        tag(d,ms,":WARN:");
        format(msg,arg0,arg1);
        System.err.println(_buffer.toString());
    }
} 
```

因此，如果有多个线程试图调用此方法，则只有一个线程会通过，其他线程将不得不等待（如在您的线程堆栈中）。

我们可以看到这个方法是从 调用的`com.google.gwt.user.server.rpc.AbstractRemoteServiceServlet.doUnexpectedFailure()`，这意味着你的内部代码中有一个内部异常。[以下是从该方法的 JavaDoc](http://google-web-toolkit.googlecode.com/svn-history/r9475/javadoc/2.0/com/google/gwt/user/server/rpc/AbstractRemoteServiceServlet.html#doUnexpectedFailure%28java.lang.Throwable%29)中引用的：

> 此方法仅针对不属于服务方法签名的异常或错误，或者由 SecurityExceptions、SerializationExceptions 或 RPC 框架内的其他故障导致的异常或错误调用。

由于此方法有太多线程阻塞，并且您是唯一访问服务器的客户端，我猜您的客户端代码中可能存在错误，它会向服务器发送一堆意外请求。您需要检查服务器日志（码头日志、访问日志、应用程序日志等）以确定根本原因。

# grails - Grails集成测试控制器不能重用？

> ID：15102706
> 
> 赞同：0
> 
> 时间：2013-02-27T01:39:02.960
> 
> 标签：grails, grails-controller, grails-2.2

在 grails 集成测试中，我有类似这样的代码：

```
def ctrlA = new MyController()
... make some request that returns 'ok' ...
assert ctrlA.response.json.status == 'ok'

def ctrlB = new MyController()
... make some request that returns 'error' ...
assert ctrlB.response.json.status == 'error' // fails; status still equals 'ok' 
```

问题：即使`ctrlB`实际上确实返回了一个看起来像的 json 响应`{ status: 'error' }`，我实际上也看到`{ status: 'ok' }`了`ctrlA.response.json`!! 我在控制器中的日志表明肯定会返回“错误”。

为什么是这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T01:56:33.570

啊。根本不需要单独的`ctrlA`和`ctrlB`。中间打个电话就行`ctrl.response.reset()`了。

# php - 使用 echo 使用 php 变量设置 html 文本字段的值

> ID：15102709
> 
> 赞同：1
> 
> 时间：2013-02-27T01:39:31.823
> 
> 标签：php, html

我正在尝试从数据库中获取一个名称，然后创建一个文本字段，其值预设为该名称。我通过用 php 回显它并将值设置为名称来创建文本字段。但是，我放入值的变量没有运行，它只是打印为 {$c->prod_name} 而不是实际名称。

这是我的查询：

```
function name_id($id) {
    global $pdo;

    $stmt = $pdo->prepare("
        SELECT prod_name
        FROM products
        WHERE id = '$id'
        LIMIT 50");

    $stmt->execute();

    return $stmt->fetchAll( PDO::FETCH_OBJ );   
} 
```

这是我回显文本字段的地方：

```
<?php

    $name = name_id($id);

    foreach($name as $c){

        echo '<input name="prod_name" type="text" size="50" value="{$c->prod_name}" ?>';

    }

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T01:47:40.220

您的代码中有两个故障

解决您的问题`it's just printing out as {$c->prod_name}`：：

对于您的`echo`陈述，您使用单引号`'`。变量和转义序列（`\'`和`\\`除外）不在单引号内展开。这意味着，`$`and`{}`没有特殊含义，并且作为纯文本输出，而不是作为变量（参见[doc](http://www.php.net/manual/en/language.types.string.php)）。如果要使用单引号，则需要将变量移出字符串并使用连接，如下所示：

```
echo '<input name="prod_name" type="text" size="50" value="' . {$c->prod_name} . '" ?>'; 
```

函数中的故障 #2 `name_id`：将行更改为以下内容：

```
$stmt = $pdo->prepare("
    SELECT prod_name
    FROM products
    WHERE id = ?
    LIMIT 50");

$stmt->execute(array($id)); 
```

如果您将变量导入准备字符串，则无法防止 XSS 攻击等 - 请参阅[php.net PDO::prepare](http://php.net/manual/en/pdo.prepare.php)了解更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T01:44:55.893

用双引号替换所有出现的单引号 '

反之亦然

改变这个：

```
 echo '<input name="prod_name" type="text" size="50" value="{$c->prod_name}" />'; ?> 
```

对此：

```
echo "<input name='prod_name' type='text' size='50' value='{$c->prod_name}'/>"; ?>'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T01:46:39.333

像这样的字符串语句中变量的“回显”仅适用于`"`（双引号）。因此，您可以`escape`像这样使用很多双引号：

```
echo "<input name=\"prod_name\" type=\"text\" size=\"50\" value=\"{$c->prod_name}\">"; ?> 
```

`concatenate`但是像这样只使用字符串要容易得多：

```
echo '<input name="prod_name" type="text" size="50" value="'.$c->prod_name.'">'; ?> 
```

最简单的答案是：当你“内联”一个变量时，它**必须**是双引号：

`echo "{$c->prod_name}";`

# asp.net-mvc-4 - jqGrid 不显示数据... JSON 字符串是真正的 JSON... 我需要一个 jsonReader

> ID：15102712
> 
> 赞同：1
> 
> 时间：2013-02-27T01:39:35.380
> 
> 标签：asp.net-mvc-4, jqgrid

这只是我的 JSON 数据字符串的一部分，因为它非常广泛......

```
{
    "total": 2,
    "page": 1,
    "records": 15,
    "rows": [
        {
            "id": 2148,
            "cell": {
                "MRN": "840134833",
                "Hospital_Fin": "987141516",
                "First_Name": "YELLOW",
                "Last_Name": "CRAYON",
                "Date_of_birth": "/Date(1253160000000)/"}
         }
      ]} 
```

这就是我设置jqGrid的方式......

```
 $(document).ready(function () {
        jQuery("#frTable").jqGrid ({
            cmTemplate: { sortable: false },
            caption: '@TempData["POPNAME"]' + ' Population',
            datatype: 'json',
            mtype: 'GET',
            url: '@Url.Action("GetAjaxPagedGridData", "Encounters", new { popId = TempData["POPULATIONID"] })',//'/Encounters/GetAjaxPagedGridData/'+ '',                
            pager: '#pager',
            loadonce: true,
            height: 450,
            gridview: true,
            viewrecords: true,
            rowNum: 15,
            shrinkToFit: false,
            autowidth: true,
            colNames: [
                   'MRN',
                   'Hospital Fin',
                   'First Name',
                   'Last Name',
                   'Date of birth'
            colModel: [
                   { name: 'MRN', width: 125, align: 'left' },
                   { name: 'Hospital_Fin', width: 145, align: 'left' },
                   { name: 'First_Name', width: 115, align: 'left' },
                   { name: 'Last_Name', width: 115, align: 'left' },
                   { name: 'Date_of_birth', width: 145, align: 'left', formatter:'date', formatoptions: {newformat: 'm/d/Y'}}] 
```

现在......我浏览了 JSfiddle，我确实以正确的格式恢复了 Json 字符串。事实上，这就是我能够复制并粘贴到这个精美网站的方式。那么我错过了什么？看起来一切都应该是正确的？

**更新** 我的 col 模型和单元格中的列名称是否必须 100% 匹配？也许那会是一个可以看看的地方？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T06:39:38.400

您使用了错误格式的 JSON 数据。将您的数据与[文档](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3aretrieving_data#json_data)中描述的 jqGrid 预期的数据进行比较。要修复 JSON 数据，您可以将其更改为例如以下

```
{
    "total": 2,
    "page": 1,
    "records": 15,
    "rows": [
        {
            "id": 2148,
            "MRN": "840134833",
            "Hospital_Fin": "987141516",
            "First_Name": "YELLOW",
            "Last_Name": "CRAYON",
            "Date_of_birth": "/Date(1253160000000)/"
        }
    ]
} 
```

您需要另外包含`jsonReader: {repeatitems: false}`在 jqGrid 选项列表中。

# iphone - 为什么当键盘弹出时我的 UIScrollView 滚动错误？

> ID：15102714
> 
> 赞同：1
> 
> 时间：2013-02-27T01:39:38.170
> 
> 标签：iphone, xcode, uiscrollview, uikeyboard

因此，正如希望在键盘出现时将视图向上推的人们经常建议的那样，我使用 UIScrollView。我从这个页面复制并粘贴了信息——http: [//developer.apple.com/library/ios/#documentation/StringsTextFonts/Conceptual/TextAndWebiPhoneOS/KeyboardManagement/KeyboardManagement.html#//apple_ref/doc/uid/TP40009542- CH5-SW7——](http://developer.apple.com/library/ios/#documentation/StringsTextFonts/Conceptual/TextAndWebiPhoneOS/KeyboardManagement/KeyboardManagement.html#//apple_ref/doc/uid/TP40009542-CH5-SW7)要做到这一点……

但发生的情况是，当我点击文本字段时，键盘弹出，但视图实际上向下滚动，顶部显示黑色。之后，我实际上可以手动向上滚动视图并显示隐藏的文本字段......显然，这不是我想要做的！

有任何想法吗？我在 viewDidLoad() 方法中有以下内容：- (void)viewDidLoad

```
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardWasShown:) name:UIKeyboardDidShowNotification object:nil];

    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardWillBeHidden:) name:UIKeyboardWillHideNotification object:nil];
} 
```

我试过这个版本的keyboardWasShown：

```
- (void) keyboardWasShown:(NSNotification *)aNotification
{
    NSDictionary * info = [aNotification userInfo];
    CGSize keyboardSize = [[info objectForKey:UIKeyboardFrameBeginUserInfoKey] CGRectValue].size;

    UIEdgeInsets contentInsets = UIEdgeInsetsMake(0, 0,keyboardSize.height, 0);
    [[self introScroll] setContentInset:contentInsets];
    [[self introScroll] setScrollIndicatorInsets:contentInsets];

    CGRect ltdRect=[[self view] frame];
    ltdRect.size.height=keyboardSize.height;
    if (!CGRectContainsPoint(ltdRect,[self activeField].frame.origin))
    {
        CGPoint scrollPoint = CGPointMake(0,[self activeField].frame.origin.y-keyboardSize.height);
        [[self introScroll] setContentOffset:scrollPoint animated:YES];
    }
    NSLog(@"Keyboard out!");
} 
```

以及这个版本的keyboardWasShown：

```
- (void)keyboardWasShown:(NSNotification*)aNotification {

    NSDictionary* info = [aNotification userInfo];
    CGSize kbSize = [[info objectForKey:UIKeyboardFrameBeginUserInfoKey] CGRectValue].size;
    CGRect bkgndRect = [[[self activeField] superview ]frame];
    bkgndRect.size.height += kbSize.height;

    [[[self activeField] superview] setFrame:bkgndRect];

    [[self introScroll] setContentOffset:CGPointMake(0.0, [self activeField].frame.origin.y-kbSize.height) animated:YES];

} 
```

两者都给了我完全相同的结果。

这是怎么回事？？我正在使用 Xcode 4.6。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T01:53:46.047

我有一个类似的问题，我的文本字段没有滚动到视图中。
苹果代码并不完美，我不得不修改它：尝试通过在行中添加活动字段的高度来解决这个问题：

```
frame.origin.y + frame.size.height - keyboardSize.height 
```

如果这不起作用，请将 44 添加到 scrollpoint.y （导航栏的大小）

**ios7更新：**

我改进了 ios7 中文本字段的不需要和错误的滚动，这些文本字段已经在视图中

```
if (scrollPtY < 0) {
        return;
} 
```

# jquery - Jquery .toggle() 导致元素在页面加载时淡出

> ID：15102715
> 
> 赞同：3
> 
> 时间：2013-02-27T01:39:40.310
> 
> 标签：jquery, toggle

我正在尝试创建一种效果，当您单击一个元素时，它的大小会增加，而当再次单击它时，它会恢复到原始大小。出于某种原因，当我使用 JQuery 的切换方法时，它会导致页面加载时元素（在此示例中为 div）缩小。这是我创建的 JSFiddle 的链接：http: [//jsfiddle.net/6HNkF/](http://jsfiddle.net/6HNkF/)这是我的 JavaScript：

```
 $(document).ready(function(){
        $('#mainImg').toggle(
            function(){
                $('#mainImg').animate({
                    width: '1000',
                    height: '1000'
                }, 500);
            },
            function(){
                $('#mainImg').animate({
                    width: '100',
                    height: '100'
                }, 500);
            }
        );
    }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T01:43:19.817

[`toggle`](http://api.jquery.com/toggle-event/)因为 click 事件在 1.8 中已被弃用。最后在 1.9 版中删除。

**[.toggle(function, function, ... ) 已移除](http://jquery.com/upgrade-guide/1.9/#toggle-function-function-removed)**

> 这是 .toggle() 的“单击元素以运行指定的函数”签名。它不应与 .toggle() 的“更改元素的可见性”相混淆，后者未被弃用。前者被删除以减少混淆并提高库中模块化的潜力。jQuery Migrate 插件可用于恢复功能。

[如您所见](http://jsfiddle.net/6HNkF/9/)，它适用于 1.8 版。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-27T01:47:11.077

该`toggle`功能在 jQuery 1.9+ 中不再可用。你想要完成的事情可以通过 CSS 转换和一个类方便地完成：

**JS：**

```
$(document).ready(function () {
    $('#mainImg').click(function () {
        $(this).toggleClass("wide");
    });
}); 
```

**CSS：**

```
#mainImg{
    width:100px;
    height:100px;
    transition: all 0.5s;
}
#mainImg.wide{
    width:1000px;
    height:1000px;
} 
```

你可以在这里找到一个演示：http: [//jsfiddle.net/WCwXm/](http://jsfiddle.net/WCwXm/)

作为一般解决方案，您可以以`toggle`不同的名称重新引入该方法的替代方法：

```
(function( $ ) {
$.fn.alternate = function() {
    var args = arguments,
        currIndex = 0;
    function toggler(e) {
        e.preventDefault();
        return args[(currIndex++) % args.length].apply(this);
    }
    return this.click(toggler);
};
})( jQuery ); 
```

[你可以在这里](http://jsfiddle.net/FLrUk/)找到一个演示。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T01:45:00.707

您正在使用的[`.toggle()`](http://api.jquery.com/toggle/)jQuery 1.9 中已删除。您可以包含[jquery-migrate](https://github.com/jquery/jquery-migrate)，它将这些旧方法添加回新的 jQuery 版本：

```
<script src="http://code.jquery.com/jquery-latest.js"></script>
<script src="http://code.jquery.com/jquery-migrate-1.1.1.js"></script> 
```

我不确定他们为什么要摆脱它。这是一个有用的方法。

# web-services - 将复杂数据发送到 Restful Web Service——API 设计

> ID：15102716
> 
> 赞同：1
> 
> 时间：2013-02-27T01:39:43.427
> 
> 标签：web-services, rest, restful-url, restful-architecture

我正在尝试将一些基于 SOAP 的 Web 服务转换为 Restful Web 服务。在我们现有的一个基于 SOAP 的 Web 服务中，我们传入一个 RequstDTO，Web 服务返回一个 ResponseDTO。RequestDTO 和 ResponseDTO 都是复杂的 Java 类，其中包含其他自定义 JavaBean 类。它是一个“READ”操作，因此它自然映射到`"GET"`REST 操作。将 ResponseDTO 转换为 XML 或 JSON 没有问题。但我不确定如何将 RequestDTO 转换为 RESTful API。

1.  如果我将 RequestDTO 中的所有数据转换为查询字符串，URL 将会很长。RESTful Web 服务通常由应用程序使用，因此浏览器 URL 长度限制实际上并不适用。但在大多数情况下，短 URL 仍然是首选。
2.  RequestDTO 中的某些属性可能包含 PHI 敏感信息，我不想将它们放在 URL 中。

一种解决方案是将请求数据嵌入到请求正文中，即使它是 GET 操作。但根据我的研究，不鼓励这种方式 [http://tech.groups.yahoo.com/group/rest-discuss/message/9962](http://tech.groups.yahoo.com/group/rest-discuss/message/9962)

那么替代方案是什么？设计这个的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T01:49:25.083

我不确定为什么需要传递 requestDTO 来进行 REST 调用。

通常你只是做这样的事情

GET /Resource/id 现在，如果您想要的资源类似于辅助资源。例如，您有一个用户和属于用户的信用卡。

获取/用户/{user_id}

获取 /User/{user_id}/CreditCards/{credit_card_id}

当然，这可以嵌套任意多次。

# assembly - 在汇编语言中，你可以在 textequ 中有多个语句吗？

> ID：15102717
> 
> 赞同：0
> 
> 时间：2013-02-27T01:39:44.707
> 
> 标签：assembly

```
sample_thingy textequ <mov,eax 0 add,eax 10>

sample_thingy
call writedec 
```

（当你这样做时它叫什么？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T01:51:26.143

有趣的问题。假设您的意思是`masm`，我实际上从未见过它以这种方式使用。

我见过的所有东西都按预期使用它，作为一个明显的常量，例如：

```
format_string textequ <[bp+6]>
              :
              mov     ax, format_string   ; becomes: mov ax, [bp+6] 
```

对于像你的问题中的整行这样的非常数，我可能会使用宏而不是清单常量，比如（我已经有一段时间没有使用了，`masm`所以这*可能*不是最新的）：

```
sample_thingy macro
              mov    eax, 0
              add    eax, 10
              endm 
```

清单常量方法是否适用于您的场景归结为三件事：

1.  该语句`mov,eax 0 add,eax 10`在单行上有效吗？我怀疑不是。
2.  您可以将换行符（可能还有制表符）嵌入到清单常量中以强制换行和格式化吗？我不知道。
3.  当你尝试它时发生了什么？:-)

# jquery - jqPlot 饼图 - 删除数据标签背景

> ID：15102723
> 
> 赞同：0
> 
> 时间：2013-02-27T01:40:31.183
> 
> 标签：jquery, jqplot

见下图；目标是删除标签的背景（即透明背景）。我一直在上下 jqPlot 文档和 API，尝试各种设置组合......甚至试图覆盖我认为是源 CSS 类的内容：

![jqPlot 饼图](../Images/d5d43d903edd29105b134d2a35f9d841.png)

有一点是，这只发生在我尝试渲染饼图时……任何其他类型的图表都会自动显示没有背景的标签。这是我的代码的基本迭代，从所有实验中清除：

**相关的包括：**

```
// excanvas.js
// jquery.jqplot.min.js
// plugins/jqplot.pieRenderer.min.js
// jquery.jqplot.css 
```

**JQ:**

```
$.jqplot('PIE', [[["CE",14],["CNB",0],["CD",10],["BD",197],["PD.",9],["AO",68]]],
{
grid:
    {
    drawBorder:false,
    shadow:false,
    },
gridPadding:{top:0,right:0,bottom:0,left:0},
seriesColors:[\"#2D8659\",\"#862D2D\",\"#2D8686\",\"#2D2D86\",\"#59862D\",\"#B4B43C\"],
legend:{show:true},
seriesDefaults:
    {
    renderer:$.jqplot.PieRenderer,
    rendererOptions:
        {
        showDataLabels:true,
        dataLabelPositionFactor:.75,
        shadowOffset:0,
        lineWidth:3,
        sliceMargin:4,
        startAngle:-90,
        highlightMouseOver:false,
        padding:10
        }
    }
}); 
```

提前感谢所有有用的回复！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T02:50:43.260

看到这个

有用

[**小提琴**](http://jsfiddle.net/NYewy/269/)

代码

```
$.jqplot('pieChart', [[["CE",14],["CNB",0],["CD",10],["BD",197],["PD.",9],["AO",68]]],
{
grid:
    {
    drawBorder:false,
    shadow:false

    },
gridPadding:{top:0,right:0,bottom:0,left:0},
seriesColors:["#2D8659","#862D2D","#2D8686","#2D2D86","#59862D","#B4B43C"],
legend:{show:true},
seriesDefaults:
    {
    renderer:$.jqplot.PieRenderer,
    rendererOptions:
        {
        showDataLabels:true,
        dataLabelPositionFactor:.75,
        shadowOffset:0,
        lineWidth:3,
        sliceMargin:4,
        startAngle:-90,
        highlightMouseOver:false,
        padding:10
        }
    }
}); 
```

# iphone - 您如何使用已在 if 语句中作为条件调用的 IBAction 方法。XCODE

> ID：15102736
> 
> 赞同：-1
> 
> 时间：2013-02-27T01:42:19.310
> 
> 标签：iphone, objective-c, xcode, calculator

我需要帮助。

```
-(IBAction) equalsPressed:(id)sender{

if(((IBAction) dividePressed) = YES){
    int equals = labelsNumber.text.intValue;
    labelsNumber.text = @"";
    int ans = divide / equals;
    NSString *answer = [NSString stringWithFormat:@"%d", ans];
    labelsNumber.text = answer; 
```

我正在构建一个计算器，错误是“预期表达式”。

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T01:49:34.087

我假设您正在尝试确定是否已经调用了 dividePressed。你可以这样做：

```
BOOL dividePressed;

-(IBAction) dividePressed:(id)sender{
  dividePressed = YES;
}

-(IBAction) equalsPressed:(id)sender{
  if(dividePressed) {

  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T01:49:14.883

我认为你是在倒退。在`equalsPressed`您进行计算的方法中。在`dividePressed`您将存储运算符：

```
-(IBAction) equalPressed:(id)sender {
int equals = labelsNumber.text.intValue;
    int ans;
    labelsNumber.text = @"";
    switch(operator) {
    case DIVIDE:
    ans = op1 / op2;
    break;
    }
    NSString *answer = [NSString stringWithFormat:@"%d", ans];
    labelsNumber.text = answer;
}

-(IBAction) dividePressed:(id)sender {
  operator = DIVIDE;
} 
```

我会对操作数（op1，op2）做同样的事情，存储它们并在 equals 方法中对它们进行操作

# c++ - 射线平面相交：结果不准确 - 舍入误差？

> ID：15102738
> 
> 赞同：2
> 
> 时间：2013-02-27T01:42:23.067
> 
> 标签：c++, collision-detection, linear-algebra, game-physics, floating-accuracy

我已经使用 C++ 和 OpenGL 设置了一个简单的 3d 第一人称演示，它似乎工作得相当好。我的目标是：当用户将相机指向一个平面并单击鼠标左键时，我想绘制一条从玩家位置指向相机所面对方向的射线与该平面的交点。

因此，我从两个向量`Vector position`和开始`Vector rotation`，其中向量是一个非常标准的三维向量类：

```
class Vector
{
  public:
    GLfloat x, y, z;

    Vector() {};

    Vector(GLfloat x, GLfloat y, GLfloat z)
    {
      this->x = x;
      this->y = y;
      this->z = z;
    }

    GLfloat dot(const Vector &vector) const
    {
      return x * vector.x + y * vector.y + z * vector.z;
    }

    ... etc ... 
```

并且`Plane p`，Plane 是一个存储平面法线和 d 的简单结构。我直接从 Christer Ericson 的“实时碰撞检测”一书中复制了这个结构：

```
struct Plane 
{
  Vector n; // Plane normal. Points x on the plane satisfy Dot(n,x) = d
  float d; // d = dot(n,p) for a given point p on the plane
}; 
```

首先，我将`position`其作为射线的起点，我称之为`a`. 我使用那个点`rotation`来找到射线的终点，`b`. 然后我使用一种算法从同一本书中找到射线和平面的交点。实际上，我自己也实现了相同的方法，但我在这里直接使用书中的代码，以确保我没有搞砸任何事情：

```
void pickPoint()
{
    const float length = 100.0f;

    // Points a and b
    Vector a = State::position;
    Vector b = a;

    // Find point b of directed line ab
    Vector radians(Math::rad(State::rotation.x), Math::rad(State::rotation.y), 0);
    const float lengthYZ = Math::cos(radians.x) * length;

    b.y -= Math::sin(radians.x) * length;
    b.x += Math::sin(radians.y) * lengthYZ;
    b.z -= Math::cos(radians.y) * lengthYZ;

    // Compute the t value for the directed line ab intersecting the plane
    Vector ab = b - a;

    GLfloat t = (p.d - p.n.dot(a)) / p.n.dot(ab);

    printf("Plane normal: %f, %f, %f\n", p.n.x, p.n.y, p.n.z);
    printf("Plane value d: %f\n", p.d);
    printf("Rotation (degrees): %f, %f, %f\n", State::rotation.x, State::rotation.y, State::rotation.z);
    printf("Rotation (radians): %f, %f, %f\n", radians.x, radians.y, radians.z);
    printf("Point a: %f, %f, %f\n", a.x, a.y, a.z);
    printf("Point b: %f, %f, %f\n", b.x, b.y, b.z);
    printf("Expected length of ray: %f\n", length);
    printf("Actual length of ray: %f\n", ab.length());
    printf("Value t: %f\n", t);

    // If t in [0..1] compute and return intersection point
    if(t >= 0.0f && t <= 1.0f) 
    {
        point = a + t * ab;
        printf("Intersection: %f, %f, %f\n", point.x, point.y, point.z);
    }
    // Else no intersection
    else
    {
        printf("No intersection found\n");
    }

    printf("\n\n");
} 
```

当我用 OpenGL 渲染这个点时，它看起来非常接近光线和平面的交点。但是通过打印出实际值，我发现对于特定的位置和旋转，交点最多可以偏离 0.000004。这是交点不准确的示例 - 我知道交点不在平面上，因为它的 Y 值应该是 0，而不是 0.000002。我也可以将其分回平面方程并得到一个不等式：

```
Plane normal: 0.000000, 1.000000, 0.000000
Plane value d: 0.000000
Rotation (degrees): 70.100044, 1.899823, 0.000000
Rotation (radians): 1.223477, 0.033158, 0.000000
Point a: 20.818802, 27.240383, 15.124892
Point b: 21.947229, -66.788452, -18.894285
Expected length of ray: 100.000000
Actual length of ray: 100.000000
Value t: 0.289702
Intersection: 21.145710, 0.000002, 5.269455 
```

现在，我知道浮点数只是实数的近似值，所以我猜测这种不准确性只是浮点舍入的影响，尽管我可能在代码的其他地方犯了错误。我知道交叉点只偏离了非常小的量，但我仍然关心它，因为我计划使用这些点通过将它们捕捉到任意方向的网格来定义模型或关卡的顶点，所以我实际上想要这些点在那个网格上，即使它们有点不准确。这可能是一种被误导的方法——我真的不知道。

所以我的问题是：这种不准确性只是工作中的浮点舍入，还是我在其他地方犯了错误？

如果只是浮点舍入，有什么办法处理吗？我尝试以各种方式舍入旋转和位置向量的值，这显然会导致交点不太准确，但有时我仍然会得到不在平面上的交点。我确实阅读了一个类似问题的答案（[这个平面射线相交代码是否正确？](https://stackoverflow.com/questions/13517872/is-this-plane-ray-intersection-code-correct)），其中提到保持尺寸很大，但我不确定这到底意味着什么。

抱歉，如果之前有人问过这个问题 - 我搜索过，但我没有看到任何我遇到的麻烦。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T02:56:30.630

你的数学似乎是正确的，这绝对看起来像一个舍入错误。我有一种强烈的感觉，就是这条线：

```
GLfloat t = (p.d - p.n.dot(a)) / p.n.dot(ab); 
```

也就是说，我没有看到任何其他计算 t 的方法。您可以通过在 printf 语句中使用“%.12f”（或更多）来验证是否丢失了精度。查明罪魁祸首的另一种方法是尝试逐步进行 t 计算并沿途打印结果以查看是否在某处丢失了精度。

如果精度对您来说真的那么重要，您是否尝试过使用双精度浮点？

# c# - 将当前类实例引用为超类的子类类型

> ID：15102740
> 
> 赞同：0
> 
> 时间：2013-02-27T01:42:43.170
> 
> 标签：c#

有没有办法在超类中获取当前类实例（相当于'this'），除了作为子类的类型？

当我做类似的事情时（显示实际代码太大太复杂，我只是希望这同样适用）提供给 C.DoStuff() 的类型是 A 的实例，而不是 B。我正在对一个类的属性进行反射工作，因为它是 AI 类型，所以没有从 A 类型获取属性

```
class A
{
  public void DoStuff()
  {
    C.DoStuff(this); 
  }
}

class B : A
{

}

class C
{
  public static void main(string[] args)
  {
    A inst = new B();
    inst.DoStuff();
  }

  public static void DoStuff<T>(T obj) {//do reflection on generic type}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T01:44:51.240

如果您将功能更改为

```
public static void DoStuff<T>(T obj)
        {
            Console.WriteLine(typeof(A).IsInstanceOfType(obj));
            Console.WriteLine(obj.GetType());
        } 
```

你会看到它仍然是 B 类型，它不是你声称的 A 类型，但它是 A 的一个实例，所以是的，你仍然可以将它视为 B

你也可以在

```
public void DoStuff()
  {
    Console.WriteLine(typeof(A).IsInstanceOfType(this));
    Console.WriteLine(this.GetType());
    C.DoStuff(this); 
  } 
```

仍然是 B。但仍然是 A 的实例

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T01:51:19.290

你可能可以摆脱这个：

```
Type subclass = typeof(B); 
```

然后按预期对子类执行反射。

# javascript - 从文件中获取延迟加载的 JS 文件的路径？

> ID：15102744
> 
> 赞同：0
> 
> 时间：2013-02-27T01:43:34.240
> 
> 标签：javascript, dom

如果我正在使用类似的东西加载脚本

`document.getElementsByTagName("head")[0].appendChild(scriptElement);`

...我可以在加载的 JS 文件中放入什么代码来获取其自身的 URL？

换句话说：我使用 dom 注入来加载[http://foo.com/foo.js](http://foo.com/foo.js)。从 foo.js 中，如何获取 URL [http://foo.com/foo.js](http://foo.com/foo.js)？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T17:33:37.433

我在这里找到了适合我的解决方案：

[javascript - 获取调用函数的脚本标记的节点引用](https://stackoverflow.com/questions/1917836/javascript-get-node-reference-to-script-tag-that-calls-a-function)

要求您在加载的文件中抛出错误，捕获它，然后将其传递给加载页面中的全局函数的答案就成功了。（它在 IE 中不起作用，但对于我当前的项目来说，这不是问题。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T06:46:17.563

如果您在 dom 中包含了 scriptElement 对象，那么您应该知道“scriptElement.src” - 所以在 foo.js 中您应该知道来源：

```
 alert(scriptElement.src); 
```

# javascript - NodeJS、express 和 mongoDB - 映射逻辑

> ID：15102750
> 
> 赞同：0
> 
> 时间：2013-02-27T01:44:31.070
> 
> 标签：javascript, node.js, mobile, pug, express

**这一段没有什么重要的**——我对编程和掌握 nodejs 仍然很陌生，所以对于这个问题，我只是要求有人解释我应该采取的逻辑过程。我可以从那里弄清楚，我觉得这对于像我这样的初学者来说是一个很好的例子，所以我将发布最终解决方案的代码。

**情况** - 我有一个包含客户的 mongo 数据库（有 100 位客户。它有 3 个字段（First、Last、Age）-客户接受每月服务。公司每天都会随机分配给他们的少数员工这些客户的列表要照顾。-我已经在 mongo 数据库中创建了第二个 Schema，它有四个字段；分配给每日列表的员工、日期、一个填充了许多客户 ID 字段的数组和一个布尔值（员工、日期、数组、布尔值） - {我需要第二个模式用于存档}

**问题 -** 我需要在员工列表（第二个）数据库中查询不完整的列表（也就是错误的布尔值）；然后为每个不完整列表创建、显示或激活指向视图的链接，将通过查询客户数据库（第一个数据库）通过我从第二个数据库中的数组中检索到的 ID 字段的争论来填充各个视图. 我需要创建该链接并为每个不完整列表填充视图。我正在使用 NodeJS、Express 和 Jade，但就像我在段落中所说的那样，如果你可以绘制出我可以开始的逻辑并发布我的最终结果，你就跳过了。

感谢您的任何尝试。现在几乎是美国东部标准时间晚上 9 点，如果有人需要任何澄清，我将监控我的帖子，至少到美国东部标准时间晚上 11 点。明天早上再来一次-Steven R

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T03:55:13.983

据我了解，他们有 2 个数据库。Parese 对我来说更简单一点。将 ObjectId 与字段“布尔”或数字一起使用，此字段应修改或更改与数据库的连接。所以解决拥有多个数据库的问题，你就可以关联起来。如果您使用 ObjectId，您可以在其他集合中进行研究，在这种情况下，可以在其他数据库中进行研究。使用[Mongoose](http://mongoosejs.com/docs/guide.html)这将帮助您建立更好的数据库，并在不同级别上进行搜索。

# olap-cube - 电信数据的 OLAP Cube 设计问题

> ID：15102752
> 
> 赞同：2
> 
> 时间：2013-02-27T01:44:45.080
> 
> 标签：olap-cube, telecommunication

**背景：**我正在分析通话详细记录 (CDR) 数据，以便根据通话时长、通话时间（节假日通话或非节假日通话、商务通话或非商务通话）、用户年龄组对客户进行细分和性别。数据来自两个表名`cdr (include card_number, service_key, calling, called, start_time, clear_time, duration column)`，`subscriber_detail (include subscriber_name, subscriber_address, DOB, gender column)` 我设计了 OLAP，如下所示。

![在此处输入图像描述](../Images/3ce7722057d1f31f8c1da460a9e67105.png)

Call_date 包括带有年、月和日的通话日期。Call_time 是以秒为单位的通话时间。

**问题：-**如果我们以秒为单位取 call_time，那么它每天有 86400 列（可能是维度的诅咒），所以我们认为通过采取 30 秒时间脉冲来减少它的维度（电信根据脉冲和 30是我们上下文的脉冲持续时间）。**第一个问题是：-**用脉冲持续时间代替时间是最好的方法吗？**第二个**是：-如果一个用户在脉冲范围内进行超过 2 次通话，则可能会导致问题，即第一次通话从 21:01:00 开始，到 21:01:05 结束，他在 21:01:15 开始第二次通话并于 21:01:20 结束。如何解决这些类型的问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T07:06:57.313

如果我是你，我会将时间划分为 10 分钟的时间段，并使用链接列表在给定的时间段内存储多个持续时间，因此时间的总维度为 144（限制最多只能滚动到 10 分钟）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T06:43:12.433

我会以秒为单位保留 start_call_time、end_call_time 和 ellapsed_call_time。

那么拥有 ellapsed_time 并不意味着多维数据集的维度为 86400 个成员；您可以设置一个“范围/带状”维度：即，使用间隔而不是瞬间构建的维度。这是可能的，例如 icCube ( [www](http://www.iccube.com/support/documentation/user_guide/schemas_cubes/dim_ranged.html) )。

# php - 如何从下拉列表中获取选定的用户名作为 URL 的 var

> ID：15102756
> 
> 赞同：0
> 
> 时间：2013-02-27T01:44:55.963
> 
> 标签：php, html

如何让选定的变量显示在来自 `<select>`...的 URL 中

我的代码是：

```
print "<select name=\"assignedby\" multiple size=\"10\">";

while ($data = dbResult($qh)) {
        print "<option name=\"$data[name]\"";
        print ">$data[name]</option>\n";
}
print "</select>";
print "<br><a href='".$_SERVER['PHP_SELF']."?action=add'>Add</a> || <a href='".$_SERVER['PHP_SELF']."?origname=$data[name]'>Edit</a>\n"; 
```

当有人单击“编辑”链接时，它显示为：[http](http://www.site.com?origname=) ://www.site.com ?origname= 我希望它显示下拉列表中实际选择的原始名称...例如： [http:// www.site.com?origname=](http://www.site.com?origname=) $selecteduser-fromdroplist

请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T02:05:49.143

你为什么不让表单方法=获取？

```
<form id="select_name" action="" method="get">
    <select name="origname">
    <?php while ($data = dbResult($qh)): ?>
        <option value="<?php echo $data[name]; ?>"><?php echo $data[name]; ?></option>
    <?php endwhile; ?>
    </select>
    <a href="<?php echo $_SERVER['PHP_SELF']; ?>?action=add">Add</a> || <input type="submit" name="submit" value="Edit">
</form> 
```

但是至于为什么您的代码不起作用，您是在 while 循环之外调用 $data[name'] 项。

# php - 各种媒体的数据库布局和查询

> ID：15102759
> 
> 赞同：0
> 
> 时间：2013-02-27T01:45:01.267
> 
> 标签：php, mysql, database-design, laravel

我正在开发一个允许用户提交视频、图像和其他指南（包括文本和图像的多个步骤）的网站。

在网站的主页上，将列出最近上传的 5-10 个左右的项目。

最初，我打算为每个人准备一张桌子，所以“视频”、“图像”和“指南”。“guides”表将有另一个表“steps”，因此每个步骤都是它自己的行，带有“guide_id”。

在主页上，这些元素中的每一个都需要不同的代码来呈现（视频的 iframe，图像的 img 标签等......）。

有没有更好的方法来为此创建数据库？也许是一个内容项表，其中包含所有不同的内容以及“类型”列？

如果不是，那么编写查询以从所有三个表中选择 5-10 件并能够判断结果的每一行是什么类型的内容以便可以使用正确的代码呈现它的最佳方法是什么？

顺便说一句，如果这会影响答案，我正在使用 Laravel PHP 框架。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T01:50:27.997

将两者放在一个表示例中，将其命名为**media**并添加诸如 media **type之类的列**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T04:14:18.913

使用 2 张桌子。**媒体**和**media_type**。

**媒体**表：

```
id       name     uploaded_at                  media_type_id
-------------------------------------------------------
1        aaa      2012-11-17 11:17:13            1
2        bbb      2012-11-17 11:20:11            2
3        ccc      2012-11-17 11:32:12            1
4        ddd      2012-11-17 11:45:10            3 
```

**media_type**表：

```
id       name
----------------------
1        video
2        image
3        guide 
```

这是模型的基本规范化数据库结构。您可以添加媒体表所需的额外列描述等。此外，您可以根据需要添加、删除媒体类型并更改对媒体表的引用。有了这个结构，就可以查询如下。

最近上传的 5 个媒体：

```
SELECT id, name FROM media ORDER BY uploaded_at DESC LIMIT 5; 
```

特定媒体类型的最后 5 个媒体：

```
SELECT media.id, media.name FROM media INNER JOIN media_type ON media.media_type_id = media_type.id 
  WHERE media_type.name = 'video' ORDER BY uploaded_at DESC LIMIT 5; 
```

# php - 来自 SQL 表的 PHP 邮件数据

> ID：15102765
> 
> 赞同：0
> 
> 时间：2013-02-27T01:45:45.597
> 
> 标签：php, mysql, email, cron

我不是 php/mysql 专家，但我通常可以通过一些研究和试验来解决问题，但是这个我似乎无法像我想要的那样工作......

我经营一个分类广告网站，我计划设置一个 cron 作业（我可以做 cron 作业）并向已发布 30 天广告的用户发送提醒电子邮件。我使用 date_sub 和 curdate 使日期运行良好。我的查询从广告已存在 30 天的数据库中提取了我想在电子邮件中使用的所有表格。

我可以使用海报名称、电子邮件和 html 消息发送电子邮件，但它只发送到它查询的第一个电子邮件地址。我假设这是一个循环问题？但我似乎无法弄清楚。

我的脚本发布在下面 - 我为混乱道歉，因为我说我不是这方面的专家，但我主要是按照我想要的方式工作，除了它只会发送到出现的第一个广告。

sql 查询中的大多数表名都包含我计划在 html 消息中使用的数据。

```
 <?php
        header("Content-type: text/plain");

    // OPEN DATABASE
        define('DB_HOST','localhost');
        define('DB_USER','');
        define('DB_PASS','');
        define('DB_NAME','');

        mysql_connect(DB_HOST, DB_USER, DB_PASS) or die("Connetion to database failed!");
        mysql_select_db(DB_NAME); 

        joinDateFilter();

    // WHOSE AD IS 30 DAYS OLD
        function joinDateFilter(){
            $query = mysql_query("SELECT name,title,email,idPost,password FROM oc_posts WHERE DATE_SUB(CURDATE(),INTERVAL 30 DAY) = CAST(insertDate AS date)");
            $mail_to = "$email";
            while ($row = mysql_fetch_array($result)){
                echo $row['name']." - ".$row['title']." - ".$row['email']."\n";
                echo $mail_to = $row['email'].", ";
                echo $title=$row["title"];
                echo $name=$row["name"];
                echo $idPost=$row["idPost"];
                echo $password=$row["password"];
            }
            if (!empty($mail_to)){
                sendEmail($mail_to,$email,$name,$title,$idPost,$password);
            }
        }

    // SEND EMAIL
        function sendEmail($mail_to,$email,$name,$title,$idPost,$password) {
            $mail_to ="$mail_to";
            $email ="$email";
            $name = "$name";
            $title = "$title";
            $idPost = "$idPost";
            $password = "$password";
            $from    = "no-reply@2tradeit.com";
                //begin of HTML message
        $message = "<html>
      <body bgcolor=\"#FFFFFF\">
            Hello, $name, your ad $title is 30 days old etc...
      </body>
    </html>";
       //end of message 
            $headers = 'From: '.$from."\r\n" .
            'Reply-To:'.$_POST['email']."\r\n" .
            "Content-Type: text/html; charset=iso-8859-1\n".
            'X-Mailer: PHP/' . phpversion();
            mail($mail_to, "Your ad is 30 days old", $message, $headers);
        }
    ?> 
```

任何帮助都感激不尽！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T01:56:06.720

您需要在 while 内执行 sendEmail 函数。现在发生的事情是它遍历所有返回的行，设置变量，覆盖变量，然后发送一次电子邮件。尝试这样的事情。请注意 if 语句现在位于您的 while 块中。

```
while ($row = mysql_fetch_array($result)){
            echo $row['name']." - ".$row['title']." - ".$row['email']."\n";
            echo $mail_to = $row['email'].", ";
            echo $title=$row["title"];
            echo $name=$row["name"];
            echo $idPost=$row["idPost"];
            echo $password=$row["password"];
            if (!empty($mail_to)){
                sendEmail($mail_to,$email,$name,$title,$idPost,$password);
            }
} 
```

现在它将发送电子邮件，然后处理下一行。这意味着它将立即为每一行发送电子邮件。

# ios - Facebook 登录后无法推送到 PFQueryTableViewController

> ID：15102770
> 
> 赞同：0
> 
> 时间：2013-02-27T01:46:18.400
> 
> 标签：ios, objective-c, facebook, parse-platform

我使用 Facebook 成功登录。登录视图是一个 UIViewController。我只能通过使用访问 Parses 的登录功能

```
@interface LoginViewController : UIViewController <PFLogInViewControllerDelegate, PFSignUpViewControllerDelegate> 
```

问题是，一旦我成功登录，我希望用户看到一个 PFQueryTableViewController。该应用程序全部基于列表，因此推送到此是有意义的。

我试过这个：

```
- (void)logInViewController:(PFLogInViewController *)logInController didLogInUser:(PFUser *)user
{
    [self dismissViewControllerAnimated:YES completion:^{ 
        NSLog(@"Successfully logged in.");
        MyPFQueryTableViewController *controller = [[MyPFQueryTableViewController alloc] init];

        //Not sure what to do here...

       }];

} 
```

最初我推到了TableView。我已经删除了那个代码，坦率地说我不知道​​我是怎么做到的。

但发生的事情是我看到 UIViewController 片刻，然后 PFQueryTableViewController 出现了。

不仅如此，PFQueryTableViewController 没有显示导航栏，即使表格嵌入在导航控制器中。

这是我的 LoginViewController.m 的代码

```
#import "LoginViewController.h"
#import <Parse/Parse.h>
#import "MyPFQueryTableViewController.h"

@interface LoginViewController ()

@end

@implementation LoginViewController

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

 - (void)viewDidLoad
 {
 [super viewDidLoad];
     PFLogInViewController *login = [[PFLogInViewController alloc] init];
     login.fields = PFLogInFieldsFacebook;
     // Need to set the delegate to be this controller.
     login.delegate = self;
     login.signUpController.delegate = self; //signUpController is a property on the login view controller
     [self presentModalViewController:login animated:NO];

 // Do any additional setup after loading the view.
 }

/*
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    UINavigationController *navigationController = segue.destinationViewController;
    MyPFQueryTableViewController *controller = (MyPFQueryTableViewController *)
    navigationController.topViewController;

}

- (void)viewDidAppear:(BOOL)animated
{

    MyPFQueryTableViewController *controller =
    [[MyPFQueryTableViewController alloc] initWithClassName:@"Lists"];
    [self presentViewController:controller animated:NO completion:nil];

}
*/

//Four delegation methods below.

- (void)logInViewController:(PFLogInViewController *)logInController didLogInUser:(PFUser *)user
{
    [self dismissViewControllerAnimated:YES completion:^{ 
        NSLog(@"Successfully logged in.");
        MyPFQueryTableViewController *controller = [[MyPFQueryTableViewController alloc] init];

        //Not sure what to do here...
    }];

} 
```

我想也许我需要使用 segue 方法，但我不太确定。

**更新：**

根据以下答案，我正在尝试通过 MyPFQueryTableViewController.m 文件中的 presentModalViewController 推送登录。

```
- (void)viewDidLoad {
    [super viewDidLoad];

    // Uncomment the following line to preserve selection between presentations.
    // self.clearsSelectionOnViewWillAppear = NO;

    // Uncomment the following line to display an Edit button in the navigation bar for this view controller.
    PFLogInViewController *login = [[PFLogInViewController alloc] init];
    login.fields = PFLogInFieldsFacebook;
    login.delegate = self;
    login.signUpController.delegate = self;
    [self presentModalViewController:login animated:NO];

    //self.navigationItem.rightBarButtonItem = self.editButtonItem;
} 
```

有关我收到的警告，请参阅我的以下评论。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T03:17:44.957

一种选择是将 PFQueryTableViewController 作为初始视图控制器，并在应用程序启动时以模态方式呈现 LoginViewController。这就是我在我的一个应用程序中使用 Parse 时所做的

# php - Sphinx 和可变短语搜索。

> ID：15102777
> 
> 赞同：1
> 
> 时间：2013-02-27T01:47:03.380
> 
> 标签：php, database, full-text-search, sphinx

我会在一切正常的情况下作为序言，但我想我会问是否有更好的方法来做到这一点。

我正在使用 sphinx 进行关键词搜索。基本上我有一个充满短语的数据库。例如。

朝鲜 朝鲜核试验 哥伦比亚广播公司新闻

例如，我正在使用短语搜索该数据库。

朝鲜核试验只是针对美国哥伦比亚广播公司新闻的“第一反应”

该短语作为变量传递给 sphinx，因此实际上没有机会为扩展搜索添加布尔运算符。

这让我使用 SPH_MATCH_ANY 作为我的匹配模式只是为了能够获得结果。

有没有办法更有效地做到这一点？我希望狮身人面像能够挑选出短语（比如北朝鲜），而不仅仅是让我找到单词。

非常感谢。布鲁斯

# android - Python XML解析器破坏AndroidManifest.xml

> ID：15102778
> 
> 赞同：0
> 
> 时间：2013-02-27T01:47:03.753
> 
> 标签：android, python

我正在尝试解析 Android 项目中的 AndroidManifest.xml 文件，以便在构建时以编程方式更改其某些值。（使用 xml.dom.minidom）

不幸的是，解析器吐出了格式错误的 XML（即使我没有对从 XML 输入构造的 DOM 进行任何更改）

这是一个非常简单的 AndroidManifest.xml

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="net.npike.android.sampleapp"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="14"
        android:targetSdkVersion="17" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="net.npike.android.sampleapp.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

这是我非常简单的 python 脚本，它只是加载文件、解析它，然后将其写回：

```
#!/usr/bin/python
import os
from xml.dom.minidom import parse
dom1 = parse("AndroidManifest.xml")

f = os.open("AndroidManifest.xml", os.O_RDWR)
os.write( f, dom1.toxml() ) 
```

不幸的是，在上面共享的 AndroidManifest 上运行脚本后，以下输出被写入磁盘：

```
<?xml version="1.0" ?><manifest android:versionCode="1" android:versionName="1.0" package="net.npike.android.sampleapp" xmlns:android="http://schemas.android.com/apk/res/android">

    <uses-sdk android:minSdkVersion="14" android:targetSdkVersion="17"/>

    <application android:allowBackup="true" android:icon="@drawable/ic_launcher" android:label="@string/app_name" android:theme="@style/AppTheme">
        <activity android:label="@string/app_name" android:name="net.npike.android.sampleapp.MainActivity">
            <intent-filter>
                <action android:name="android.intent.action.MAIN"/>

                <category android:name="android.intent.category.LAUNCHER"/>
            </intent-filter>
        </activity>
    </application>

</manifest>tent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

这里发生了什么？有没有更好的方法来解析 Python 中的 AndroidManifest？

编辑：我可能应该补充一点，格式错误的部分是第一个标签之后的所有内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T02:00:29.367

如果你想用 Python 解析 XML，只需使用`etree`：

```
import xml.etree.ElementTree as etree

etree.register_namespace('android', 'http://schemas.android.com/apk/res/android')

with open('AndroidManifest.xml', 'r') as handle:
    root = etree.parse(handle)

root.find('application').set('android:allowBackup', 'false')
root.write('parsed.xml', encoding='utf-8', xml_declaration=True) 
```

语法是可以理解的，它包含在标准库中，并且可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T02:05:13.563

看起来这是因为输出比输入短，所以它不会覆盖整个内容。

尝试写入另一个文件？

# c++ - 从字符数组更改为字符串时出现“字符串下标超出范围”错误？

> ID：15102779
> 
> 赞同：1
> 
> 时间：2013-02-27T01:47:10.383
> 
> 标签：c++

我开始使用字符串代替字符数组，当我将定义为大小为 5 的字符数组之一更改为字符串时遇到错误。尝试运行程序时，我得到的错误是“表达式：字符串下标超出范围”。

“newWord” 最初是一个字符数组，但在将其更改为字符串后，我收到了这个错误。我不明白是什么原因造成的，当使用字符数组时，程序运行良好。

```
int main() {
fstream inputFile;
fstream outputFile;
string newWord;
int i, k;
string word;
inputFile.open( "H:\\word.txt" );
outputFile.open( "H:\\newword.txt" );
if( inputFile )
{
    while( getline( inputFile, word ) )
    {
        for( i = 0; i < (word.length()- 3); ++i )
        {
            for( k = 0; k < 4; ++k )
                newWord[k] = word[i+k];
            cout << newWord << endl;
            outputFile << newWord << endl;
        }
    }
}
return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T01:50:40.997

```
newWord[k] 
```

字符串的大小`newWord`为零。`std::string`未定义超出 a 结尾的索引行为。

您可能需要调整字符串的大小，因此：

```
newWord.resize(5); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T01:51:25.483

该错误是因为`newWord[k] = word[i+k];`没有为 newWord 中的字符串分配空间。字符串长度为 0，这样做是未定义的行为。请改用 .append。

来自[cplusplus.com](http://www.cplusplus.com/reference/string/string/operator%5B%5D/)：

> 如果 pos 不大于字符串长度，则该函数永远不会抛出异常（无抛出保证）。否则，它会导致未定义的行为。

在 newWord[k] 的情况下，pos 是 k。

这很容易通过使用字符串库中的 append 函数来避免。

从[cplusplus.com](http://www.cplusplus.com/reference/string/string/append/)再次：

> 字符串&追加（常量字符串&str）；//附加一个str的副本。

# return-value - 无法返回post ajax请求的数据

> ID：15102782
> 
> 赞同：0
> 
> 时间：2013-02-27T01:47:34.537
> 
> 标签：return-value, jquery-post, postdata

我目前有以下代码：

```
function Parse_Error(ErrMsg) {

$.post("ajax/errormsg.php", {
    errmsg: ErrMsg} 
    , function(data) {
    alert (data);
                return (data);
});
} 
```

警报将向我显示正确的消息，但该函数不返回该消息。该函数不断返回“未定义”，但警报工作正常。我尝试添加以下内容：

```
var tmp = data;
return tmp; 
```

没有成功..我哪里出错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T02:18:27.373

问题是 Parse_Error 函数的 return 语句没有返回。它返回您声明的所谓匿名函数 ( `function(data){...}`)，该函数将数据提供给 JQuery，它实际上忽略了它。相反，您需要执行以下操作：

```
// your code that does the query
do_error_query('The Error Message');

function do_error_query(ErrMsg) {
    $.post("ajax/errormsg.php", {errmsg: ErrMsg} , function(data){

        alert(data);
        // here you need to call a function of yours that receives the data.
        // executing a return statement will return data to jquery, not to the calling
        // code of do_error_query().
        your_function(data);

    });
}

function your_function(data){
    // process the data here
} 
```

`do_error_query()`问题是，在 PHP 页面的结果返回之前，调用就完成了。所以不可能返回结果。换句话说，`your_function(data)`将在`do_error_query()`返回后很好地调用。我希望这是有道理的。

实际上，`do_error_query()`只是设置一个事件处理程序。它无法返回值，因为事件尚未完成。这就是事件处理程序`your_function(data)`的用途。它处理事件，从您的 PHP 页面返回数据。虽然活动尚未完成，`do_error_query()`但早就结束了。

# r - ggplot2 中的 scale_x_date

> ID：15102786
> 
> 赞同：1
> 
> 时间：2013-02-27T01:48:00.900
> 
> 标签：r, ggplot2

我对 R 比较陌生，但我试图`scale_x_date`在`ggplot2`包中使用来为我的论文创建一个水位线。水位线由预测值和实际值组成，它们是我正在研究的河流的深度。我希望能够更改日期标签和休息时间。这就是我所拥有的。

```
library(ggplot2)
library(scales)
LowerHydro<-data.frame(LowerHydrology)
LowerHydro$date <- as.Date(LowerHydro$Date, format = "%m/%d/%y")
attach(LowerHydro)
p<-ggplot(data=LowerHydro,aes(x=date,y=Depth,group=Group,color=Group))
p+geom_line()+scale_x_date(labels=date_format("%b-%y"),breaks=date_breaks("3 months")) 
```

但在最后一行代码之后，我收到以下错误：

```
Error in get(x, envir = this, inherits = inh)(this, ...) : 
unused argument(s) (labels = function (x) 
```

如果我只是在没有标签=的情况下按如下方式运行最后一行代码，只使用breaks =，我仍然会收到错误消息：

```
p+geom_line()+scale_x_date(breaks=date_breaks("3 months"))
Error in cut.default(days, c(0, 10, 56, 365, 730, 5000, Inf), labels = FALSE) :
'x' must be numeric 
```

这是我的 str(LowerHydro)

```
data.frame':    712 obs. of  3 variables:
$ Depth: num  5.24 5.14 5.42 5.27 5.27 ...
$ Group: Factor w/ 2 levels "Actual","Predicted": 2 2 2 2 2 2 2 2 2 2 ...
$ date : Date, format: "2010-10-01" "2010-10-02" ... 
```

会话信息（）

```
R version 2.13.0 (2011-04-13)
Platform: x86_64-pc-mingw32/x64 (64-bit)

locale:
[1] LC_COLLATE=English_United States.1252  LC_CTYPE=English_United States.1252   
[3] LC_MONETARY=English_United States.1252 LC_NUMERIC=C                          
[5] LC_TIME=English_United States.1252    

attached base packages:
[1] grid      stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] ggplot2_0.8.9 proto_0.3-9.2 reshape_0.8.4 plyr_1.5.2    scales_0.2.0 

loaded via a namespace (and not attached):
[1] colorspace_1.1-0   dichromat_1.2-4    digest_0.5.0       munsell_0.3       
[5] RColorBrewer_1.0-5 stringr_0.4        tools_2.13.0 
```

谢谢。

# scheme - 随机程序

> ID：15102789
> 
> 赞同：1
> 
> 时间：2013-02-27T01:48:04.673
> 
> 标签：scheme, racket

我正在尝试编写一些代码，但我的回复程序有问题。忽略前两个随机数的过程，但问题出`else`在调用`pick-random`过程时。这是代码：

```
(define earlier-responses '()) 

(define (doctor-driver-loop name earlier-responses)
  (newline)
  (write '**)
  (let ((user-response (read)))
    (cond 
      ((equal? user-response '(goodbye))
         (write-line (list 'goodbye name))
         (write-line '(see you next week)))
      (else 
         (list user-response earlier-responses)                    
         (write-line (reply user-response earlier-responses))
         (doctor-driver-loop name earlier-responses)))))

(define (reply user-response earlier-responses)
  (cond 
    ((= (random-of-three) 0)
      (append (qualifier)
              (change-person user-response)))
    ((= (random-of-three) 1)
      (hedge))
    (else
      (append (write-line '(earlier you said that))
              (pick-random earlier-responses)))))

(define (random-of-three)
  (random 3))

(define (pick-random lst)
  (nth (+ 1 (random (length lst))) lst)) 
```

它突出了

```
 (random (length lst))) lst)) 
```

它抛出这个错误：

```
  随机：违反合同
  预期：（或/c（integer-in 1 4294967087）伪随机生成器？）
  给定：0

```

我不确定这个错误是什么意思或如何解决它......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T01:57:01.427

错误只是说明列表的长度为零，并且`random`需要一个介于 1 和 4294967087 之间的值。调用时传递一个非空列表`pick-random`。这就是正在发生的事情：

```
(random 0)

=> random: contract violation expected: (or/c (integer-in 1 4294967087)
   pseudo-random-generator?) given: 0 
```

尝试`earlier-responses`在开头使用非空列表进行定义。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T05:01:25.193

Oscar 正确回答了您提出的问题，但是您还没有意识到一个更严重的错误：您应该在进入 cond 表达式之前计算一次随机数，而不是在每个 cond 子句中重新计算它。使用您的方法，您不会以相同的概率选择三种可能性中的每一种。第一个选项将被选中大约 1/3 的时间，第二个选项将被选中大约剩余 2/3 时间的 1/3，或 2/9，第三个选项将被选中剩余的 4/ 9 次。您可能希望所有三个选择以相等的概率发生。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T17:08:24.007

I think you know what time it is.

[dons [code-review](https://codereview.stackexchange.com/) hat /]

Firstly, before we get to anything else, what version of Racket are you using?

I've got 5.2.1 here, so I may be a bit behind, but `nth` and `write-line` don't seem to be defined functions here. I think what you want is `list-ref` and `write`. Note that `list-ref` has a different argument order, and expects a zero-indexed reference into the list. In other words `(list-ref (list 1 2 3) 0) => 1`. You therefore probably want to define `pick-random` as

```
(define (pick-random lst)
  (list-ref lst (random (length lst)))) 
```

You also have a couple of undefined functions there which I assume you define elsewhere in your program (`hedge`, `qualifier` and `change-person`). I'll elide these in further comments.

* * *

As Óscar mentions, `random` takes an integer in the range of 1 to 4294967087\. Which means that you want to account for that before passing a number to it. As a note, `(random n)` seems to return an integer between `0` and `(- n 1)` inclusive, so you don't need to add or subtract things yourself to get a random element out of a list.

```
(define (pick-random lst)
  (if (null? lst)
      lst
      (list-ref lst (random (length lst))))) 
```

* * *

As user448810 mentions, you don't want to re-calculate `random-of-three` because that won't give you equal probabilities of each choice being made. Since you'll be pre-calculating it, you probably don't need the `random-of-three` function at all.

```
(define (reply user-response earlier-responses)
  (let ((rand (random 3)))
    (cond ((= rand 0)
           (append (qualifier)
                   (change-person user-response)))
          ((= rand 1)
           (hedge))
          (else
           (append (write '(earlier you said that))
                   (pick-random earlier-responses)))))) 
```

* * *

`write` doesn't actually return anything. It just prints something to the REPL, so the `else` clause of your `reply` function can't be what you mean unless `write-line` does something fundamentally different from `write`.

```
(else
 (append (write '(earlier you said that))
         (pick-random earlier-responses))) 
```

You either want

```
(else
   (write '(earlier you said that))
   (write (pick-random earlier-responses))) 
```

if you just want printed output, or

```
(else
   (let* ((res (list '(earlier you said that) (pick-random earlier-responses))))
     (write res)
     res)) 
```

if you meant to preserve the return value for future use somewhere.

* * *

Next, and this is probably the biggest bug I see as well as the easiest for Scheme newbies to make (so don't feel bad), you're not changing `earlier-responses` anywhere. The else clause in your `doctor-driver-loop`

```
(else (list user-response earlier-responses)                    
      (write (reply user-response earlier-responses))
      (doctor-driver-loop name earlier-responses)) 
```

creates a new list with your `user-response` as the head and `earlier-responses` as the tail, but you don't do anything with it. You also don't pass a different value into the next call to `doctor-driver-loop`. If you actually wanted to track input history, you would want that to look something like

```
(else (write (reply user-response earlier-responses))
      (doctor-driver-loop name (list user-response earlier-responses))) 
```

* * *

**But** that wouldn't quite do what you seem to want it to either. The above would always pass a two-element list to the next iteration of your driver loop; the first element would be the most recent response and the second element would be `earlier-responses`.

```
> (list '(I need a perscription) '((how are you doing?) (hello))) 
((I need a perscription) ((how are you doing?) (hello)))

> (list '(are you even listening?) '((I need a perscription) ((how are you doing?) (hello))))
((are you even listening?) ((I need a perscription) ((how are you doing?) (hello)))) 
```

What you'd *really* want, if you want to be able to pick a random past response using `pick-random`, is a flat list of all responses. That means `cons`ing new responses rather than `list`ing them.

```
> (cons '(I need a perscription) '((how are you doing?) (hello)))
((I need a perscription) (how are you doing?) (hello)))

> (cons '(are you even listening?) '((I need a perscription) (how are you doing?) (hello)))
((are you even listening?) (I need a perscription) (how are you doing?) (hello)) 
```

So your `else` clause should be

```
(else (write (reply user-response earlier-responses))
      (doctor-driver-loop name (cons user-response earlier-responses))) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-01-22T12:09:18.607

(define random-4-digits (foldr (λ (n result) (cons n (map (λ (y) (if (>= yn) (add1 y) y)) result))) '() (map random' (10 9 8 7))))

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-27T23:23:28.427

`(or/c (integer-in 1 4294967087) pseudo-random-generator?)`

是[一个“或”合约](http://docs.racket-lang.org/reference/data-structure-contracts.html#%28def._%28%28lib._racket%2Fcontract%2Fprivate%2Fmisc..rkt%29._or%2Fc%29%29)——意思是，要被这个合约接受，值（[`random`函数](http://docs.racket-lang.org/reference/generic-numbers.html?q=random#%28def._%28%28quote._~23~25kernel%29._random%29%29)的一个参数）必须是以下之一：或者是一个介于和[之间的整数](http://docs.racket-lang.org/reference/data-structure-contracts.html#%28def._%28%28lib._racket/contract/private/misc..rkt%29._integer-in%29%29) ，包括在内，[**或者**](http://docs.racket-lang.org/reference/data-structure-contracts.html#%28def._%28%28lib._racket%2Fcontract%2Fprivate%2Fmisc..rkt%29._or%2Fc%29%29)一个这样的返回。`1``4294967087`[](http://docs.racket-lang.org/reference/data-structure-contracts.html#%28def._%28%28lib._racket%2Fcontract%2Fprivate%2Fmisc..rkt%29._or%2Fc%29%29)**`object`[`(pseudo-random-generator? object)`](http://docs.racket-lang.org/reference/generic-numbers.html?q=random#%28def._%28%28quote._~23~25kernel%29._pseudo-random-generator~3f%29%29)`#t`**

# javascript - 表单提交：如何提交动态多部分数据列表

> ID：15102792
> 
> 赞同：1
> 
> 时间：2013-02-27T01:48:30.330
> 
> 标签：javascript, jquery, html, google-app-engine, python-2.7

我有一个 HTML 表单，其中包含一些静态字段和一些使用 javascript 动态添加的字段。它看起来有点像这样

```
StaticField1: [textfield]
StaticField2: [textfield]

DynamicSet1: [textfield1.1] [textfield1.2]
DynamicSet2: [textfield2.1] [textfield2.2] [add_another_button]
... 
```

原谅格式。基本上，这个想法是用户单击“添加更多按钮”并将一组新字段动态添加到表单中。我想将每个集合拼凑在服务器端的单个数据结构中。我可以很巧妙地为每个字段命名并手动将它们拼凑在一起，但这似乎需要付出很多努力：S。还有另一种方法可以做到这一点吗？

一个通用的解决方案是完美的，但如果有任何特定于 google appengine (python 2.7) 和 jquery 的解决方案，那也很好。

谢谢！

# javascript - 未捕获的 SyntaxError：意外的令牌错误

> ID：15102794
> 
> 赞同：1
> 
> 时间：2013-02-27T01:48:50.057
> 
> 标签：javascript, jquery, html

`Uncaught SyntaxError: Unexpected token Error`从 切换 到 后，`input box`我遇到以下问题`textarea`。提交后尝试删除输入到 textarea 中的文本时会发生此错误。

文本区域：

```
<textarea name="chatter"></textarea> 
```

函数调用：

```
<a href='javascript:void(0);' 
 onClick='deletecmnt(this, '".$val['id']."', '".BASE_URL."');' 
  title='Delete Chatter'>X</a>; 
```

删除功能：

```
function deletecmnt(obj, cmt_id, baseurl){
    var lg_chk = loginchk();
    if(lg_chk){
        var object = $(obj).parent().parent();
        $.ajax({
            type: "GET",
           // error: function(error){console.log("Error:");console.log(error);},
            url:baseurl+'deletechatter.php?id='+cmt_id,
            dataType:'json',
            success:function(response){
                object.remove();
            }
        });
    }
    else
        location.href=baseurl;
} 
```

好的，所以在 Chrome 中我收到上述错误，但在 Firefox 中我收到以下内容：

```
 SyntaxError: syntax error      

 deletecmnt(this, 
```

但是，我看不出它有什么问题，并且在我使用输入框时它起作用了。我什至将它切换回来并且它工作了那么它喜欢的 textarea 是什么？请让我知道我做错了什么。

这是我到目前为止得到的：

```
<a data-id='".$val['id']."' data-base-url='".BASE_URL."' href='javascript:void(0);' title='Delete Chatter'>x</a>

<script>$("a[title='Delete Chatter']").on('click', deletecmnt);</script>

function deletecmnt(obj, cmt_id, baseurl){
var lg_chk = loginchk();
if(lg_chk){
    var object = $(this).parent().parent();
    $.ajax({
        type: "GET",
       // error: function(error){console.log("Error:");console.log(error);},
        url:baseurl+'deletechatter.php?id='+cmt_id,
        dataType:'json',
        success:function(response){
            object.remove();
        }
    });
}
else
    location.href=baseurl; 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T01:50:42.223

引号是错误的：

```
onClick='deletecmnt(this, "'.$val['id'].'", "'.BASE_URL.'");' 
```

看看你如何打开和关闭单引号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T01:52:51.797

您过早地关闭撇号：

```
deletecmnt(this, 
```

...成为整个`onclick`. 由于您使用的是 jQuery，因此与它绑定会更有意义（即使您不是，我仍然建议使用 JS 进行绑定）。

```
$("a[title='Delete Chatter']").on('click', deletecmnt); 
```

您可以更新`deletecmnt`以使其引用`this`，这将是锚点。此外，更新锚点以将 ID 和 BASE_URL 存储为 DOM 的一部分，可能使用：

```
<a data-id='".$val['id']."' data-base-url='".BASE_URL."' 
```

# php - 何时使用 filter_input()

> ID：15102796
> 
> 赞同：29
> 
> 时间：2013-02-27T01:48:53.453
> 
> 标签：php, security

*这个问题最初是在[此处](https://stackoverflow.com/questions/768442/php-filter-input#comment-580014)的评论中提出的。*

如果在打印任何用户提供的数据之前使用参数化查询和[htmlspecialchars()](http://php.net/manual/en/function.htmlspecialchars.php) ，是否仍然需要[filter_input()](http://www.php.net/manual/en/function.filter-input.php)？

这对我来说似乎没有必要，但我一直被告知要“过滤输入，转义输出”。那么，除了数据库（或其他形式的存储）之外，是否需要过滤输入的数据？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-02-27T03:14:50.027

好吧，会有不同的意见。

我的看法是你应该总是使用它（或者，`filter`一般的扩展）。这至少有3个原因：

1.  清理输入是您应该始终做的事情。由于该功能为您提供了此功能，因此实际上没有理由寻找其他方法来清理输入。由于它是一个扩展，过滤器也将比那里的大多数 PHP 解决方案更快并且最有可能更安全，这当然不会受到伤害。唯一的例外是如果您需要更专业的过滤器。即使这样，您也应该使用`FILTER_UNSAFE_RAW`过滤器获取值（参见#3）。

2.  `filter`扩展中有很多好东西。它可以节省您编写清理和验证代码的时间。当然，它并没有涵盖每一种情况，但已经足够让您可以更专注于特定的过滤/验证代码。

3.  在调试/审核代码时使用该功能非常有用。使用该功能时，您确切知道输入将是什么。例如，如果您使用`FILTER_SANITIZE_NUMBER_INT`过滤器，那么您可以确定输入将是一个数字——没有 SQL 注入、没有 HTML 或 Javascript 代码等。另一方面，如果您使用类似的东西，`FILTER_UNSAFE_RAW`那么您就知道它应谨慎对待，而且很容易引起安全问题。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2013-12-04T20:31:37.610

正如 Sverri M. Olsen 所说，对此有不同的看法。

我非常同意***Filter Input, Escape Output***的哲学。

> 如果在打印任何用户提供的数据之前使用参数化查询和 htmlspecialchars()，是否仍然需要 filter_input()？

**简短回答：** IMO，不。这不是必需的，但在某些情况下可能很有用。

* * *

该`filter_input`函数有许多有用的过滤器，我确实使用了其中的一些（即 FILTER_VALIDATE_EMAIL）。[验证过滤器](http://php.net/manual/en/filter.filters.validate.php)对于*验证*输入很有用。但是，IMO，那些*转换*数据的应该只用于输出。

有些人鼓励逃避输入。实际上，[filter_input](http://php.net/manual/en/function.filter-input.php)手册页上给出的示例似乎也鼓励了这一点。

```
$search_html = filter_input(INPUT_GET, 'search', FILTER_SANITIZE_SPECIAL_CHARS);
$search_url = filter_input(INPUT_GET, 'search', FILTER_SANITIZE_ENCODED); 
```

唯一的例子是*escaping*。结合函数名称（filter_input *）*似乎表明转义**输入**是一种好习惯。转义是必要的，但是，IMO，应该在输出之前完成，而不是在输入时。至少返回值被存储在适当命名的变量中。

 ***我强烈不同意转义*input***。我已经遇到过过早转换数据是一个问题的现实世界情况。

例如，Google Analytics 处理输入的方式会导致我的编码 & 符号 (%26) 在查询参数被排除之前被解码。结果是我的 URL 中实际上不存在的查询参数的统计信息。请参阅[我](https://stackoverflow.com/q/19945673/1862009)关于这个仍未解决的问题的问题。

您可能还想阅读[Why escape-on-input is a bad idea](http://lukeplant.me.uk/blog/posts/why-escape-on-input-is-a-bad-idea/)。这里有一些我同意的摘录，以防文章消失[强调原文]。

> [...] 输入时转义**是错误**的[...] 这是一个分层违规——它将输出格式问题混合到输入处理中。分层违规使您的代码更难理解和维护，因为您必须考虑其他层，而不是让每个组件和层各司其职。

和

> 默认情况下，您已损坏数据。系统 [...] 现在对输入的数据撒谎。

和

> 对输入进行转义不仅无法处理多个输出的问题，而且实际上会使您的数据对于许多输出**不正确**。

和

> PHP 曾经有一个称为魔术引号的功能。这是一个输入时转义功能，[...] 导致了各种问题。[...] 根据 Lerdorf 的说法，更新的 PHP 'filter' 扩展是“magic_quotes done right”。但它仍然受到这里描述的几乎所有问题的困扰。

那么*过滤器*扩展如何比魔术引号更好（除了它有许多不同的过滤器的事实）？**过滤器会导致许多与魔术引号相同的问题。**

* * *

**以下是我使用的编码约定：**

*   $_POST、$_GET、$_REQUEST 等中的值不应被转义，并且应始终被视为不安全
*   值应在写入数据库或存储在 $_SESSION 之前验证¹
*   预期为数字或布尔值的值应在写入数据库或存储在 $_SESSION 之前进行清理²
*   相信来自数据库和 $_SESSION 的数字和布尔值确实是数字或布尔值
*   字符串值在直接用于任何 SQL 查询之前应进行 SQL 转义（非字符串值应进行清理²）或使用准备好的语句
*   字符串值在用于 HTML 输出之前应该被 HTML 转义（非字符串值应该被清理²）
*   字符串值应在用于查询字符串之前进行百分比编码（非字符串值应进行清理²）
*   使用变量命名约定（例如 *_url、*_html、*_sql）来存储转换后的数据

**术语**

出于我的目的，这就是我定义上面使用的术语的方式。

1.  验证意味着确认对数据所做的任何假设，例如具有特定格式或具有值的必填字段
2.  to sanitize 意味着确认值*完全*符合预期（即 $id_num 应该只包含数字）

**概括**

一般来说（可能有一些例外），我建议如下：

*   在*输入*上使用[验证过滤器](http://php.net/manual/en/filter.filters.validate.php)
**   在*输出*上使用[净化过滤器](http://php.net/manual/en/filter.filters.sanitize.php)**   记住 TIMTOWDI - 例如，**我更喜欢 htmlspecialchars()**（有更多选项）而不是 FILTER_SANITIZE_FULL_SPECIAL_CHARS 或 FILTER_SANITIZE_SPECIAL_CHARS （转义换行符）***

# ruby - 解析与操作的变量范围和顺序：“if”中的赋值

> ID：15102804
> 
> 赞同：4
> 
> 时间：2013-02-27T01:49:52.357
> 
> 标签：ruby, variable-assignment, conditional-statements

我的理解是，`if`行尾的语句在行首的代码之前进行评估：

```
'never shown' if (false) 
```

并且可以在`if`语句中进行赋值。

```
'shown' if (value = 'dave is king')
value #=> "dave is king" 
```

而且，当分配一个不存在的变量时，它就会被创建。没有必要预先存在。这是真的？

如果所有这些假设都是正确的，为什么会失败？

```
error_array << error if (error = import_value(value))
#=> undefined local variable or method `error' for 
```

它在数组推送之前分配给错误吗？我想了解何时评估事物。

这个确实有效：

```
if (error = import_value(value))
  error_array << error
end 
```

现在我真的很困惑。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T02:04:38.547

仅当您尝试分配文字值时才会发生这种情况，如果您调用它可以工作的函数。

```
def foo(a)
  a
end

p 'not shown' if(value = foo(false))
p 'shown' if(value = foo(true))

# This outputs a Warning in IRB
p 'shown' if(value = false)
(irb):2: warning: found = in conditional, should be == 
```

如果您打开调试 (-d)，您将看到有关已使用变量的警告`value`

```
warning: assigned but unused variable - value 
```

这“有效”是因为该语句确实评估了`true`if ，允许它之前的代码运行。

这里发生的是 if() 用作修饰符时具有自己的绑定范围或上下文。因此，该分配永远不会在 if 之外看到，因此执行起来毫无意义。这与 if 控制结构不同，因为 if 语句所采用的块也在与赋值相同的范围内，而 if 修饰符之前的行不在 if 的范围内。

换句话说，这些不是等价的。

```
if a = some(value)
  puts a
end

puts a if(a = some(value)) 
```

前者`puts a`在 if 的范围内，后者`puts a`在范围之外，因此具有不同的绑定（ruby 称之为上下文）。

[Ruby 操作顺序](http://romhack.wikia.com/wiki/Ruby_operators)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-27T12:16:33.087

在 Ruby 中，局部变量由解析器在第一次遇到赋值时定义，然后从那时起就在作用域内。由于 Ruby 的解析方式类似于英语，从左到右，从上到下，因此当您使用它时，局部变量还不存在，因为用法离赋值更远。

这是一个小演示：

```
foo # NameError: undefined local variable or method `foo' for main:Object

if false
  foo = 42
end

foo # => nil 
```

如您所见，局部变量*确实*存在于第 7 行，即使第 4 行的赋值从未执行过。然而，它被*解析*了，这就是局部变量`foo`存在的原因。但是因为从未执行过赋值，所以变量未初始化，因此计算结果为`nil`and not `42`。

现在让我们来看看你的案例的最简单版本：

```
bar if bar = true
# warning: found = in conditional, should be ==
# NameError: undefined local variable or method `bar' for main:Object

bar # => true 
```

该变量是在解析赋值时创建的，这里是：

```
bar if bar = true
       ^^^^^^^^^^ 
```

但它在这里使用：

```
bar if bar = true
^^^ 
```

这是*在*分配之前。*赋值在使用之前执行*的事实是无关紧要的，因为在这里*解析*是相关的，并且赋值在使用*之后*被解析，这意味着在使用点解析器仍然认为它是一个没有参数列表和隐式的方法调用接收者（即等同于`self.bar()`）而不是局部变量。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-27T02:22:56.340

我的猜测是解析顺序与（逻辑）执行顺序不同。特别是，给定

```
array << error if (error = some_function) 
```

然后从逻辑上讲，执行应该类似于

1.  称呼`some_function`
2.  如果`error`没有定义，定义`error`
3.  将返回值分配给`some_function`to`error`
4.  评估`if`
5.  如果`if`计算结果为`true`，则附加`error`to的值`array`

然而，解析明智（假设典型的 LR 解析器），它去

1.  得到令牌`array`（标识符）。这是定义的吗？是的。它是一个变量吗？是的。
2.  得到令牌`<<`（操作员）。有`array`回应`<<`吗？是（否则，输出“未定义方法”错误）。
3.  得到令牌`error`（标识符）。这是定义的吗？否。输出“未定义的局部变量或方法”。

# php - 对多维数组进行排序并保留兄弟姐妹

> ID：15102806
> 
> 赞同：1
> 
> 时间：2013-02-27T01:49:54.657
> 
> 标签：php, arrays, multidimensional-array

我怎样才能按顺序排列以下数组`type`，`url`然后`doc`？`page`

```
$array = array(
    0 => array(
        'id' => '14',
        'position' => '0',
        'type' => 'related-url'
    ),
    1 => array(
        'id' => '2367',
        'position' => '0',
        'type' => 'related-doc'
    ),
    2 => array(
        'id' => '99',
        'position' => '0',
        'type' => 'related-page'
    ),
    4 => array(
        'id' => '180',
        'position' => '2',
        'type' => 'related-doc'
    ),
    5 => array(
        'id' => '10',
        'position' => '3',
        'type' => 'related-doc'
    )
); 
```

结果将是

```
$array = array(
    0 => array(
        'id' => '14',
        'position' => '0',
        'type' => 'related-url'
    ),
    1 => array(
        'id' => '2367',
        'position' => '0',
        'type' => 'related-doc'
    ),
    4 => array(
        'id' => '180',
        'position' => '2',
        'type' => 'related-doc'
    ),
    5 => array(
        'id' => '10',
        'position' => '3',
        'type' => 'related-doc'
    ),
    2 => array(
        'id' => '99',
        'position' => '0',
        'type' => 'related-page'
    )
); 
```

保持键关联并不重要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T02:03:32.123

好吧，这很丑陋，但它有效）

```
$doc = array();
$url = array();
$page = array();

foreach($array as $v)
    switch($v['type']){
        case 'related-url': $url[] = $v;break;
        case 'related-doc': $doc[] = $v;break;
        case 'related-page': $page[] = $v;break;
    }

$array = array_merge($url, $doc, $page); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T02:13:21.277

给你

```
function cmp($a, $b) {

    $v1 = $a['type'];
    $v2 = $b['type'];   
    $v1 = str_replace("related-", "", $v1);
    $v2 = str_replace("related-", "", $v2); 
    $firstChar = abs(ord(substr($v1,0,1)) - ord("u"));
    $firstChar2 = abs(ord(substr($v2,0,1)) - ord("u"));

    return $firstChar<=$firstChar2?-1:1; 

}

usort ( $array, "cmp" ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T17:37:07.523

```
function cmp($a, $b) {

    $sortOrder = array(
        "related-url"   => 1,
        "related-doc"   => 2,
        "related-page"  => 3
    );

    return $sortOrder[$a['type']] - $sortOrder[$b['type']];
}

usort($array, "cmp"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T02:09:38.907

为此使用 usort，这是一个简单的示例。我很确定这个逻辑有效，但毫无疑问有更好的方法来做到这一点。

```
usort($your_array, function ($elem1, $elem2) {
  if($elem1['type'] == 'related-url')
    return true;

  elseif($elem2['type'] == 'related-url' )
    return false;

  elseif($elem1['type'] == 'related-doc')
    return true;

  else
    return false;
}); 
```

如果 element1 是 url 它总是返回 true，如果它不是并且 element2 是 url 它总是 false。如果这些语句都不为真并且 element1 是文档，则返回 true，因为 element2 是文档或页面。最后，如果 element1 是页面，则始终返回 false，因为 element2 是文档或页面。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-27T02:09:56.520

这应该工作

```
$urls = $docs = $pages = array();
foreach ($array as $sub) {
    switch($sub['type']) {
        case 'related-url':
            $urls[] = $sub;
        break;
        case 'related-doc':
            $docs[] = $sub;
        break;
        case 'related-page':
            $pages[] = $sub;
        break;
   }
}
$result = array_merge($urls, $docs, $pages);
echo '<pre>', var_dump($result), '</pre>'; 
```

# assembly - 为什么 NASM 程序分为 3 个部分？

> ID：15102807
> 
> 赞同：2
> 
> 时间：2013-02-27T01:50:00.727
> 
> 标签：assembly, nasm, conceptual

NASM 程序分为三个“部分”的技术原因是什么？.data、.bss 和 .text ？幕后究竟发生了什么？为什么汇编程序需要提前知道是否有常量，为什么不直接在程序运行时获取它们呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T22:23:21.873

首先，您并不总是需要使用这些部分。您可以在大量系统的数据部分中包含说明，在文本部分中包含数据。

不过，有一些很好的理由拥有它们。

1.  如果您的操作系统和硬件足够复杂，您可以将某些页面映射为“不可执行”，这样您就可以提供一些保护，防止您意外跳入数据部分的错误。

2.  同样，您可以将文本部分标记为“只读”，这样您就不会意外地使用错误的指针修改您的代码。

3.  最后，bss 部分仅包含零初始化数据，因此在汇编时将其标记为这样可以减少可执行文件的大小 - 加载程序可以在跳转到程序之前仅 memset 正确数量的零，而不是占用一堆字节的存储只是为了保存一堆零。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T22:22:34.070

我不能代表 NASM 的设计，但 .text、.bss 和 .data 这三个部分分别保存代码、初始化变量和未初始化变量，并在生成的二进制文件中使用适当的访问标志进行映射。

# javascript - 谷歌地图街景图块最初不会在 Firefox 中加载，只有在拖动之后

> ID：15102808
> 
> 赞同：2
> 
> 时间：2013-02-27T01:50:23.290
> 
> 标签：javascript, google-maps, google-maps-api-3, twitter-bootstrap, google-street-view

我对谷歌地图街景有疑问（在引导主题中，如果这与它有关）。

我通过单击按钮将街景设置为可见，它可以在 IE 和 Chrome 中运行，但在 Firefox 中，街景保持灰色（即它不加载初始图块），直到您用鼠标拖动视图。

我创造了一个关于它的小提琴，尝试你的自我并感到惊讶：

[http://jsfiddle.net/wK5Hq/22/](http://jsfiddle.net/wK5Hq/22/)

任何人都猜到为什么会发生这种情况？

编辑：现在当我在小提琴中尝试它时，瓷砖根本没有用 Firefox 加载，在 chrome 上加载很好。在我的真实环境中，第一次拖动视图后，瓷砖也会在 Firefox 中加载。

EDIT2：因为我忘记添加样式来修复引导程序与谷歌地图画布的混乱，所以这些瓷砖根本没有显示在小提琴中。我在 CSS 中添加了“.map-canvas img”规则，现在它显示了最初的问题。在 Firefox 中拖动街景之前，瓷砖不会加载。更新了上面的小提琴链接。

这是小提琴的代码

```
<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Google maps streeview issue - jsFiddle demo</title>

  <script type='text/javascript' src='http://code.jquery.com/jquery-1.8.3.js'></script>
  <link rel="stylesheet" type="text/css" href="/css/normalize.css">

  <link rel="stylesheet" type="text/css" href="/css/result-light.css">

      <script type='text/javascript' src="http://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/2.1.0/bootstrap.min.js"></script>

      <script type='text/javascript' src="http://maps.google.com/maps/api/js?v=3.11&sensor=false&foo=.js"></script>

  <style type='text/css'>
    @import url('http://twitter.github.com/bootstrap/assets/css/bootstrap.css');

.container {
    margin-top: 10px;
}

.map-canvas img {
    border: none !important;
    max-width: none !important;
}

.panorama-activated-map-canvas {
  width: 50%;
  float:left;
  -webkit-border-top-left-radius: 6px;
  -moz-border-top-left-radius: 6px;
  border-top-left-radius: 6px;
  -webkit-border-bottom-left-radius: 6px;
  -moz-border-bottom-left-radius: 6px;
  border-bottom-left-radius: 6px;
}

.panorama-activated-panorama-canvas {
  width: 50%;
  float:left;
  -webkit-border-top-right-radius: 6px;
  -moz-border-top-right-radius: 6px;
  border-top-right-radius: 6px;
  -webkit-border-bottom-right-radius: 6px;
  -moz-border-bottom-right-radius: 6px;
  border-bottom-right-radius: 6px;
}

.panorama-disabled-map-canvas {
  width: 100%;
  border-radius: 6px 6px 6px 6px;
}

.panorama-disabled-panorama-canvas {
  display: none;
}
  </style>

<script type='text/javascript'>//<![CDATA[ 
$(window).load(function(){
var data = "{success:true, data:{\"schoolMarker\":{\"lat\":62.759379214514,\"lng\":22.840391666132},\"polylines\":[{\"path\":[{\"lat\":62.768091219265,\"lng\":22.841507465082},{\"lat\":62.767678823231,\"lng\":22.841421634393},{\"lat\":62.767168229676,\"lng\":22.841292888361},{\"lat\":62.766569252889,\"lng\":22.840928107935},{\"lat\":62.765842608979,\"lng\":22.840456039148},{\"lat\":62.76528288457,\"lng\":22.839919597345},{\"lat\":62.764772249527,\"lng\":22.839576274591},{\"lat\":62.764340166815,\"lng\":22.839533359247},{\"lat\":62.764016100627,\"lng\":22.839490443903},{\"lat\":62.763623288351,\"lng\":22.839554816919},{\"lat\":62.762660876165,\"lng\":22.839919597345},{\"lat\":62.761885031233,\"lng\":22.840220004755},{\"lat\":62.761020774875,\"lng\":22.840498954492},{\"lat\":62.760303815724,\"lng\":22.840820819574},{\"lat\":62.759655591079,\"lng\":22.841035396295},{\"lat\":62.759439513032,\"lng\":22.840541869836}]}]}}";
var map = null;
var schoolmarker = null;
var polyBounds = null;
var panorama = null;
var streetViewService = null;
var g = google.maps;
var response = eval( "(" + data + ")" );
if (response.success) {
    initMap('#map_canvas', '#panorama_canvas', response.data);
}
function initMap(mapSelector, panoramaSelector, data) {
    var mapOptions = {
      scrollwheel: false,
      zoom: 5,
      minZoom: 5,
      streetViewControl: false,
      mapTypeControl: false,
      mapTypeControlOptions: {
        mapTypeIds: [g.MapTypeId.ROADMAP, g.MapTypeId.SATELLITE]
      },
      center: new g.LatLng(65.567, 25.303),
      mapTypeId: g.MapTypeId.ROADMAP,
      draggableCursor: 'auto',
      draggingCursor: 'move',
      disableDoubleClickZoom: true,
      scaleControl: true
    };
    map = new g.Map($(mapSelector).get(0), mapOptions);
    mapSelector = null;
    mapOptions = null;

    schoolmarker = new google.maps.Marker({
      animation: g.Animation.DROP,
      draggable: true,
      icon: 'http://www.mapsmarker.com/wp-content/uploads/leaflet-maps-marker-icons/dancinghall.png',
      map: map,
      position: new g.LatLng(data.schoolMarker.lat, data.schoolMarker.lng)
    });

    polyBounds = new g.LatLngBounds();
    $.each(data.polylines, function(index, polyline) {
        var path = [];
        $.each(polyline.path, function(index, position) {
            var point = new g.LatLng(position.lat, position.lng);
            polyBounds.extend(point);
            path.push(point);
        });
        var polyLineObj = new g.Polyline({
            strokeColor: "#00BA03",
            strokeOpacity: 0.8,
            strokeWeight: 4,
            path: path,
            clickable: false
        });
        polyLineObj.setMap(map);
    });
    map.fitBounds(polyBounds);
    map.setCenter(schoolmarker.getPosition());

    panorama = new google.maps.StreetViewPanorama($(panoramaSelector).get(0));
    panorama.setVisible(false);
    streetViewService = new g.StreetViewService();
    map.setStreetView(panorama);
  }

$('#thebutton').click(function () {
    $('#map_canvas').removeClass('panorama-disabled-map-canvas').addClass('panorama-activated-map-canvas');
    $('#panorama_canvas').removeClass('panorama-disabled-panorama-canvas').addClass('panorama-activated-panorama-canvas');
    g.event.trigger(map, 'resize');
    map.fitBounds(polyBounds);
    map.setCenter(schoolmarker.getPosition());
    streetViewService.getPanoramaByLocation(schoolmarker.getPosition(), 50, function(panoramaData, status) {
        if (status == google.maps.StreetViewStatus.OK) {
            var heading = g.geometry.spherical.computeHeading(panoramaData.location.latLng, schoolmarker.getPosition());

            var panoOptions = {
                position: panoramaData.location.latLng,
                addressControl: false,
                linksControl: false,
                panControl: false,
                zoomControlOptions: {
                style: g.ZoomControlStyle.SMALL
            },
            pov: {
                heading: heading,
                pitch: 10,
                zoom: 2
            },
            enableCloseButton: false,
            visible:true
            };
            panorama.setOptions(panoOptions);
            g.event.trigger(panorama, 'resize');
        }
    });
});
});//]]>  

</script>

</head>
<body>
  <div class="container">
    <div class="container" id="infocontainer" style=""><a href="#" class="btn btn-primary" id="thebutton" onclick="return false;">Click here</a></div>        
  <div id="mapcontainer" class="container" style="position: relative">
    <div class="container hero-unit" style="padding:0;">
                <div class="map-canvas panorama-disabled-map-canvas" id="map_canvas" style="height: 480px;"></div>
        <div class="map-canvas panorama-disabled-panorama-canvas" id="panorama_canvas" style="height: 480px;"></div>
    </div>      
  </div>
  <div id="bottomcontainer" style="">        

  </div>      
  <div id="log"></div>    
</div>

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T15:57:17.743

我解决了。

当我第一次创建街景时，它开始工作。

请参阅小提琴中的固定代码：

[http://jsfiddle.net/wK5Hq/23/](http://jsfiddle.net/wK5Hq/23/)

```
<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Google maps streeview issue - jsFiddle demo</title>

  <script type='text/javascript' src='http://code.jquery.com/jquery-1.8.3.js'></script>
  <link rel="stylesheet" type="text/css" href="/css/normalize.css">

  <link rel="stylesheet" type="text/css" href="/css/result-light.css">

      <script type='text/javascript' src="http://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/2.1.0/bootstrap.min.js"></script>

      <script type='text/javascript' src="http://maps.google.com/maps/api/js?v=3.11&sensor=false&foo=.js"></script>

  <style type='text/css'>
    @import url('http://twitter.github.com/bootstrap/assets/css/bootstrap.css');

.container {
    margin-top: 10px;
}

.map-canvas img {
    border: none !important;
    max-width: none !important;
}

.panorama-activated-map-canvas {
  width: 50%;
  float:left;
  -webkit-border-top-left-radius: 6px;
  -moz-border-top-left-radius: 6px;
  border-top-left-radius: 6px;
  -webkit-border-bottom-left-radius: 6px;
  -moz-border-bottom-left-radius: 6px;
  border-bottom-left-radius: 6px;
}

.panorama-activated-panorama-canvas {
  width: 50%;
  float:left;
  -webkit-border-top-right-radius: 6px;
  -moz-border-top-right-radius: 6px;
  border-top-right-radius: 6px;
  -webkit-border-bottom-right-radius: 6px;
  -moz-border-bottom-right-radius: 6px;
  border-bottom-right-radius: 6px;
}

.panorama-disabled-map-canvas {
  width: 100%;
  border-radius: 6px 6px 6px 6px;
}

.panorama-disabled-panorama-canvas {
  display: none;
}
  </style>

<script type='text/javascript'>//<![CDATA[
$(window).load(function(){
var data = "{success:true, data:{\"schoolMarker\":{\"lat\":62.759379214514,\"lng\":22.840391666132},\"polylines\":[{\"path\":[{\"lat\":62.768091219265,\"lng\":22.841507465082},{\"lat\":62.767678823231,\"lng\":22.841421634393},{\"lat\":62.767168229676,\"lng\":22.841292888361},{\"lat\":62.766569252889,\"lng\":22.840928107935},{\"lat\":62.765842608979,\"lng\":22.840456039148},{\"lat\":62.76528288457,\"lng\":22.839919597345},{\"lat\":62.764772249527,\"lng\":22.839576274591},{\"lat\":62.764340166815,\"lng\":22.839533359247},{\"lat\":62.764016100627,\"lng\":22.839490443903},{\"lat\":62.763623288351,\"lng\":22.839554816919},{\"lat\":62.762660876165,\"lng\":22.839919597345},{\"lat\":62.761885031233,\"lng\":22.840220004755},{\"lat\":62.761020774875,\"lng\":22.840498954492},{\"lat\":62.760303815724,\"lng\":22.840820819574},{\"lat\":62.759655591079,\"lng\":22.841035396295},{\"lat\":62.759439513032,\"lng\":22.840541869836}]}]}}";
var map = null;
var schoolmarker = null;
var polyBounds = null;
var panorama = null;
var streetViewService = null;
var g = google.maps;
var response = eval( "(" + data + ")" );
if (response.success) {
    initMap('#map_canvas', '#panorama_canvas', response.data);
}
function initMap(mapSelector, panoramaSelector, data) {
    var mapOptions = {
      scrollwheel: false,
      zoom: 5,
      minZoom: 5,
      streetViewControl: false,
      mapTypeControl: false,
      mapTypeControlOptions: {
        mapTypeIds: [g.MapTypeId.ROADMAP, g.MapTypeId.SATELLITE]
      },
      center: new g.LatLng(65.567, 25.303),
      mapTypeId: g.MapTypeId.ROADMAP,
      draggableCursor: 'auto',
      draggingCursor: 'move',
      disableDoubleClickZoom: true,
      scaleControl: true
    };
    map = new g.Map($(mapSelector).get(0), mapOptions);
    mapSelector = null;
    mapOptions = null;

    schoolmarker = new google.maps.Marker({
      animation: g.Animation.DROP,
      draggable: true,
      icon: 'http://www.mapsmarker.com/wp-content/uploads/leaflet-maps-marker-icons/dancinghall.png',
      map: map,
      position: new g.LatLng(data.schoolMarker.lat, data.schoolMarker.lng)
    });

    polyBounds = new g.LatLngBounds();
    $.each(data.polylines, function(index, polyline) {
        var path = [];
        $.each(polyline.path, function(index, position) {
            var point = new g.LatLng(position.lat, position.lng);
            polyBounds.extend(point);
            path.push(point);
        });
        var polyLineObj = new g.Polyline({
            strokeColor: "#00BA03",
            strokeOpacity: 0.8,
            strokeWeight: 4,
            path: path,
            clickable: false
        });
        polyLineObj.setMap(map);
    });
    map.fitBounds(polyBounds);
    map.setCenter(schoolmarker.getPosition());

    streetViewService = new g.StreetViewService();
    streetViewService.getPanoramaByLocation(schoolmarker.getPosition(), 50, function(panoramaData, status) {
        if (status == google.maps.StreetViewStatus.OK) {
            var heading = g.geometry.spherical.computeHeading(panoramaData.location.latLng, schoolmarker.getPosition());

            var panoOptions = {
                position: panoramaData.location.latLng,
                addressControl: false,
                linksControl: false,
                panControl: false,
                zoomControlOptions: {
                style: g.ZoomControlStyle.SMALL
            },
            pov: {
                heading: heading,
                pitch: 10,
                zoom: 2
            },
            enableCloseButton: false,
            visible:false
            };
            panorama = new google.maps.StreetViewPanorama($(panoramaSelector).get(0), panoOptions);
        }
    });
    map.setStreetView(panorama);
  }

$('#thebutton').click(function () {
    $('#map_canvas').removeClass('panorama-disabled-map-canvas').addClass('panorama-activated-map-canvas');
    $('#panorama_canvas').removeClass('panorama-disabled-panorama-canvas').addClass('panorama-activated-panorama-canvas');
    g.event.trigger(map, 'resize');
    map.fitBounds(polyBounds);
    map.setCenter(schoolmarker.getPosition());
    streetViewService.getPanoramaByLocation(schoolmarker.getPosition(), 50, function(panoramaData, status) {
        if (status == google.maps.StreetViewStatus.OK) {
            var heading = g.geometry.spherical.computeHeading(panoramaData.location.latLng, schoolmarker.getPosition());

            var panoOptions = {
                position: panoramaData.location.latLng,
                addressControl: false,
                linksControl: false,
                panControl: false,
                zoomControlOptions: {
                style: g.ZoomControlStyle.SMALL
            },
            pov: {
                heading: heading,
                pitch: 10,
                zoom: 2
            },
            enableCloseButton: false,
            visible:true
            };
            panorama.setOptions(panoOptions);
            g.event.trigger(panorama, 'resize');
        }
    });
});
});//]]>

</script>

</head>
<body>
  <div class="container">
    <div class="container" id="infocontainer" style=""><a href="#" class="btn btn-primary" id="thebutton" onclick="return false;">Click here</a></div>
  <div id="mapcontainer" class="container" style="position: relative">
    <div class="container hero-unit" style="padding:0;">
                <div class="map-canvas panorama-disabled-map-canvas" id="map_canvas" style="height: 480px;"></div>
        <div class="map-canvas panorama-disabled-panorama-canvas" id="panorama_canvas" style="height: 480px;"></div>
    </div>
  </div>
  <div id="bottomcontainer" style="">

  </div>
  <div id="log"></div>
</div>

</body>

</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-17T15:33:33.873

我有同样的问题。

有时街景可以工作，而在其他时候它只是显示为灰色。

这取决于位置。

让我澄清一下解决方案...

我不可靠的代码是这样的：

```
function showStreetView(lat, lng)
{
    var pos = new google.maps.LatLng(lat, lng);

    var panoramaOptions =
    {
        position: pos,
        pov: {
            heading: 0,
            pitch: 0
        }
    };

    var streetViewService = new google.maps.StreetViewService();

    var STREETVIEW_MAX_DISTANCE = 100;

    streetViewService.getPanoramaByLocation(pos, STREETVIEW_MAX_DISTANCE, function(streetViewPanoramaData, status)
    {
        if (status === google.maps.StreetViewStatus.OK)
        {
            var panorama = new google.maps.StreetViewPanorama(document.getElementById('streetView'), panoramaOptions);

            map.setStreetView(panorama);
        }
        else
        {
            // no street view available in this range, or some error occurred
            map.getStreetView().setVisible(false);
        }
    });
} 
```

...也就是说，'panoramaOptions' 接近开头并包含我计算的位置。

我将其更改为在调用 streetViewService.getPanoramaByLocation() 之后放置“panoramaOptions”，并将其中的位置设置为“streetViewPanoramaData.location.latLng”中返回的值，即全景图的实际位置，而不是我计算的位置。然后它起作用了。

更新后的代码如下所示：

```
function showStreetView(lat, lng)
{
    var pos = new google.maps.LatLng(lat, lng);

/*  var panoramaOptions =
    {
        position: pos,
        pov: {
            heading: 0,
            pitch: 0
        }
    };
*/
    var streetViewService = new google.maps.StreetViewService();

    var STREETVIEW_MAX_DISTANCE = 100;

    streetViewService.getPanoramaByLocation(pos, STREETVIEW_MAX_DISTANCE, function(streetViewPanoramaData, status)
    {
        if (status === google.maps.StreetViewStatus.OK)
        {
            var panoramaOptions =
            {
                position: streetViewPanoramaData.location.latLng,  // here is the important change !!!!
                pov: {
                    heading: 0,
                    pitch: 0
                }
            };

            var panorama = new google.maps.StreetViewPanorama(document.getElementById('streetView'), panoramaOptions);

            map.setStreetView(panorama);
        }
        else
        {
            // no street view available in this range, or some error occurred
            map.getStreetView().setVisible(false);
        }
    });
} 
```

所以它显示“灰色”，因为我试图强制它在我计算的位置显示全景图，而不是使用 getPanoramaByLocation(...) 的第三个参数中的函数返回的全景图的实际位置

# java - 插入 ArrayList mongodb

> ID：15102809
> 
> 赞同：1
> 
> 时间：2013-02-27T01:50:23.850
> 
> 标签：java, mongodb

我试图批量插入 100 个文档对象。我是否错误地使用了插入语句？

```
Mongo mongoClient = new Mongo( "localhost" , 27017 );
    DB db = mongoClient.getDB( "user" );    
    DBCollection coll = db.getCollection("test");
    BasicDBObject doc = new BasicDBObject("userName","James").append("random1", "feeof").append("random2", "ofeijfefe");

    List<DBObject> postsList = new ArrayList<DBObject>(); 
    for ( int i = 0; i != 100; i++)
    {

        postsList.add(doc);
    }

    coll.insert(postsList); 
```

它没有插入任何东西，当我检查最后一行时，它显示的值为*N/A*。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T05:18:53.053

我认为这就是这里正在发生的事情。

该对象`doc`被添加到`postsList`100 次。请记住，在列表中的所有这 100 个位置中，它都是同一个对象。

`_id`如果文档不存在，Mongo 会为文档创建一个属性。一旦它将这个属性放在列表的第一个`BasicDBObject`，列表中的每个其他条目都会被修改为相同的`_id`.

我相信因为这个`_id`属性对于列表中的所有条目都是相同的（就像一个主键），所以只有第一个条目被插入。

您可以通过将 的副本添加`doc`到列表来解决此问题。尝试这个：

```
for (int i = 0; i < 100; i++) {
    postsList.add((BasicDBObject) doc.copy());
} 
```

# powershell-2.0 - 使用 try 和 `catch { throw }` 背后的想法是什么？

> ID：15102815
> 
> 赞同：4
> 
> 时间：2013-02-27T01:50:45.610
> 
> 标签：powershell-2.0

如果我这样做，在 PowerShell v2.0 中：

```
gc function:\mkdir 
```

我得到一些包含以下内容的代码：

```
try {
    $steppablePipeline.End()
} catch {
    throw
} 
```

这里有什么想法`try/catch/throw`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T09:37:54.563

当您创建代理函数时，该函数是另一个（或 cmdlet）的包装器，使用内置工具（参见[此处](http://blogs.technet.com/b/heyscriptingguy/archive/2011/03/01/proxy-functions-spice-up-your-powershell-core-cmdlets.aspx)的示例）生成的代码包含该代码。它旨在允许轻松修改，但如果生成的代码足够，那么为什么要更改它呢？

# hdl - Bluespec $display 函数内

> ID：15102820
> 
> 赞同：0
> 
> 时间：2013-02-27T01:51:38.327
> 
> 标签：hdl, bluespec

当我尝试在函数定义中使用 $display 时，Bluespec 会抱怨。

它只允许在规则定义中。

有没有办法可以在函数中显示变量名？

我认为它可能正在使用 ActionValue# 但我无法正确使用语法。我也无法在网上找到示例。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-07T22:10:38.017

一种正确的语法是 -

```
function ActionValue#(rtype) func(...)
= actionvalue
    do something;
    $display(...);
    return val;
endactionvalue; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-27T21:33:53.280

默认情况下，Bluespec 函数是纯函数。如果你想调试它，把它分成几部分，把函数结果保存在一个字段中，然后用一个方法把它提取到你的测试台上。

查看[Bluespec by Example](http://csg.csail.mit.edu/6.S078/6_S078_2012_www/resources/bsv_by_example.pdf)一书。

$display 是一个有副作用的函数，所以它必须在“action”块中调用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-21T13:32:44.200

`$display`Bluespec 函数是在编译时静态详细说明的，因此通常在其中使用语句是没有意义的。但是，如果函数返回一个`Action`or `ActionValue`，它返回的动作*可以*包含一个`$display`语句，然后将在调用它的任何规则或方法中详细说明。

创建一个的语法`ActionValue`是：

```
actionvalue
    //Anything that can go in a rule body can go here.
    $display(...);
    return value;
endactionvalue 
```

普通的语法`Action`是类似的，但有`action`/`endaction`和没有`return`语句。

然后可以在函数定义中使用，如下所示：

```
function ActionValue#(Type) funcName(Type arg);
    ...
    return actionvalue
        ...
    endactionvalue;
endfunction 
```

如果只需要 return 语句，还可以使用替代语法：

```
function ActionValue#(Type1) funcName(Type2 arg) =
actionvalue
    ...
endactionvalue; 
```

One final point, if you actually want to generate output from functions at compile time, you can use the `message` function. However, note that this only takes a simple `String` argument, rather than handling formatting like `$display` does.

# c++ - 为 C++ 配置 Eclipse Juno

> ID：15102822
> 
> 赞同：0
> 
> 时间：2013-02-27T01:52:23.903
> 
> 标签：c++

我有一台装有 Eclipse Juno 的 64 位 Windows 笔记本电脑，但我无法让 C++ 运行它。

```
#include <iostream>
#include <string>
using namespace std;

int main()
{
cout << "hello World!" << endl;
return 0;
} 
```

我收到的错误是“启动失败。找不到二进制文件”

我已经尝试过其他人在偏好中所说的做法，但我没有相同的偏好，所以我有点卡住了。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T01:59:04.820

要让 C++ 在 eclipse 上工作，首先需要安装[CDT 插件](http://www.eclipse.org/cdt/)。我认为缺少选项意味着它没有安装。您可以按照链接中的说明进行安装，然后重试。

或者，您可以[为 C/C++ 开发人员下载 Eclipse，](http://www.eclipse.org/downloads/)它应该预装。

# c# - 如何从列表中提取值 用更少的代码行简洁地进入 M x 1 double[,] 数组？

> ID：15102823
> 
> 赞同：1
> 
> 时间：2013-02-27T01:52:36.457
> 
> 标签：c#, multidimensional-array, transformation, performance

是否可以简洁地将值从 a 提取`List<T>`到*M x 1* double[,] 数组中，从而减少代码行数？

我有一个类型定义为：

```
public class Trajectory
{
    public Vector3 Position { get; set; }
    // ... more codes
} 
```

Vector3 定义为：

```
 public struct Vector3
    {
        public float X;
        public float Y;
        public float Z;

        public Vector3(float x, float y, float z)
        {
            X = x;
            Y = y;
            Z = z;
        }
        // ... more vector3 operators
     } 
```

目前我有`List<Trajectory> trajectory`。它最多有 80 个条目。我只想将每个条目的 X、Y、X 值存储`trajectory`为*240 x 1* `double[,]`数组（按 X、Y、Z 值的顺序）。

我目前的解决方案相当冗长且丑陋。它是这样的：

```
 // take a snapshot of current trajectory
            List<Entry> tempEntry = new List<Entry> (Entries);

            // create a temporary vector3Values
            List<Vector3> vector3Values = new List<Vector3>();

            foreach (Entry e in tempEntry)
            {
                vector3Values.Add(new Vector3(e.Position.X, e.Position.Y, e.Position.Z));
            } 

            /* Start an index at 0.
             * This is for foreach iteration to extract the value of x, y, and z from each vector3
             */
            int index = 0;

            // find the size of the list, in case max limit is changed
            int listCount = inputVector3.Count;

            /* set the length of the new array by multiplying the size of the list by 3.
             * We want:
             * [x1 x2 x3...xn y1 y2 y3...yn z1 z2 z3...zn]'.
             * Therefore, the size of the reshaped array is three times of the original array             *
             */
            int maxRowLength = listCount * 3;

            // create double[,] variable to store the reshaped data, three times the length of the actual list. 
            double[,] result = new double[maxRowLength, 1];

            // start going for each vector, then store the x components in the double[,] array.
            foreach (Vector3 vector3 in inputVector3)
            {
                result[index, 0] = vector3.X;
                index++;
            }

            /* continuing from the previous index value, start going for each vector, 
             * then store the z components in the double[,] array.
             */
            foreach (Vector3 vector3 in inputVector3)
            {
                result[index, 0] = vector3.Y;
                index++;
            }

            /* continuing from the previous index value, start going for each vector, 
             * then store the z components in the double[,] array.
             */
            foreach (Vector3 vector3 in inputVector3)
            {
                result[index, 0] = vector3.Z;
                index++;
            } 
```

在一天结束时，我得到了我想要的。*M x 1*双 [,] 数组。我使用 double[,] 与我现在需要的 Matlab 的 MWArray 对象进行互操作。

所以，问题是，有没有一种简洁的方法来完成我在这里所做的事情？

**已编辑：**每秒需要多次进行此转换（感谢 Chris Sinclair 提出此问题），但是，目前这不是问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T02:32:51.257

您可以执行以下操作以避免循环三次：

```
var result = new double[entries.Count * 3, 1];

for (int i = 0; i < entries.Count; i++)
{
    result[i, 0] = entries[i].Position.X;
    result[i + entries.Count, 0] = entries[i].Position.Y;
    result[i + entries.Count * 2, 0] = entries[i].Position.Z;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T02:34:45.527

如果您想要一种“快速/高效”的方法来执行此操作，则可以考虑避免使用 Linq 的一般枚举。虽然你说你最多只有 80 个条目，但我怀疑这是一个问题，除非你每秒执行这么*多、很多、很多*次。

无论如何，这是使用标准 for 循环的单次迭代，同时还最小化了元素查找和结构复制（我希望）：

```
int length = inputVector3.Count;

double[,] result = new double[length * 3, 1];

for (int i = 0; i < length; i++)
{
    var vector = inputVector3[i];
    result[i, 0] = vector.X;
    result[i + length, 0] = vector.Y;
    result[i + length * 2, 0] = vector.Z;
}

return result; 
```

如果这比其他选项更快（主要考虑数学和部分），我不*肯定；*最好只是尝试一下。`i + length``i + length * 2`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T02:14:34.460

我根本不喜欢我的回答，但你可以写一个这样的 linq 语句。我不能保证它会更快，但这是一种不同的尝试方法：

```
 List<Vector3> vectors = new List<Vector3>();
 //Select() will isolate the float value [X/Y/Z] of each type from the collection
 //Concat() will merge the selected float[]'s to make 
 //  one large array containing [x1,x2,x3...y1,y2,y3...z1,z2,z3...]
 float[] values = vectors.Select(e => e.X)
                         .Concat(vectors.Select(e => e.Y)
                         .Concat(vectors.Select(e => e.Z))).ToArray();
 for (int i = 0; i < values.Length; i++)
 {
      result[i, 0] = values[i];
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T02:19:19.463

听起来 LINQ 命令 SelectMany 正是您正在寻找的。

给定列表轨迹，这就是我要做的：

```
double[] result = trajectory.SelectMany(t => new double[] { t.Position.X, t.Position.Y, t.Position.Z }).ToArray(); 
```

这就是说：从轨迹列表中，将 XY 和 Z 组成一个数组，然后将它们全部连接成一个大数组。我已经验证这可以保留顺序，但我不知道这是否会提高性能。

# perl - 如何获取 perl 哈希中的键数？

> ID：15102825
> 
> 赞同：-2
> 
> 时间：2013-02-27T01:52:50.557
> 
> 标签：perl, hash, key, hash-of-hashes

我想获得每个组的条目数，但它似乎给了我错误的答案。每个组中都有可能重复的元素。我得到的结果没有意义。我究竟做错了什么？

```
my %hash;
while(<>)
{
    chomp($_);
    if(/(\d+)\t(\d+)/)
    {
        my $group = $1;
        my $element = $2;
        $hash{$group}{$element}=1;
    }
}

foreach my $curr(keys %hash)
{
    my $numElementsInCurr = keys %{$hash{$curr}};
    print "$curr\t$numElementsInCurr\n";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T03:06:03.647

如果组中的元素可以重复，并且您需要计数以包括这些重复项，则需要执行以下操作：

```
my %hash;
while(<>)
{
    chomp($_);
    if(/(\d+)\t(\d+)/)
    {
        my $group = $1;
        my $element = $2;
        ++$hash{$group}{$element};
    }
}

use List::Util 'sum';

foreach my $curr(keys %hash)
{
    my $numElementsInCurr = sum values %{$hash{$curr}};
    print "$curr\t$numElementsInCurr\n";
} 
```

# sass - SASS/Compass：Sprite 图像尺寸（宽度、高度）

> ID：15102827
> 
> 赞同：1
> 
> 时间：2013-02-27T01:52:50.917
> 
> 标签：sass, compass-sass, css-sprites

我有一堆不同尺寸的图像。Compass 非常适合将所有文件编译成单个精灵，从它们的文件名生成类并将背景位置应用于它们。

是否可以让 Compass 也将宽度和高度属性应用于这些生成的类？

```
$iconsWithDifferentDimensions-layout: smart;
@import "iconsWithDifferentDimensions/*.png";
@include all-iconsWithDifferentDimensions-sprites; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T18:44:16.217

是的。在 @import 行之前设置这个魔法变量：

```
$iconsWithDifferentDimensions-sprite-dimensions: true; 
```

Compass 将包含精灵中每个图标的宽度和高度。

# javascript - 多个 javascripts 不能正确协作

> ID：15102831
> 
> 赞同：1
> 
> 时间：2013-02-27T01:53:35.503
> 
> 标签：javascript, jquery

我是新来的，我是一个自学成才的网页设计师，坦率地说，他对任何 javascript 或 jquery 都一无所知。但是，我当然可以按照说明使用插件 :)

我一直在尝试为我目前遇到的问题寻找解决方案。

我有多个 js 插件，我认为其中一些目前正在重叠并相互抵消。

以下是我在 </body> 和 </html> 之间的内容

*抱歉，我尝试发布代码，但收到一条警告，告诉我它们来自另一个域，该域被阻止/加载失败。所以这是一个截图图像文件！

```
http://i.imgur.com/QHBCNjM.jpg 
```

在我添加 Content Switcher 插件之前，所有这些都正常工作（来源：[https](https://github.com/cheynewallace/jquery-content-panel-switcher/tree/master/demo%20and%20instructions) ://github.com/cheynewallace/jquery-content-panel-switcher/tree/master/demo%20and%20instructions ）

当我加载页面时，MouseOn 字幕插件和 Lytebox 插件工作正常。但是在我触发 Content Switch 插件的那一刻，上述插件就被禁用了。

我应该放弃内容切换器吗？我已经尝试过其他插件和非javascript方法，但是到目前为止，这很有效并且最符合我的目的..所以我有点激动:(

如果有人可以提供帮助，那将节省我的时间。

非常感谢！

# nasm - 如何将 NASM 程序分成几部分......？

> ID：15102833
> 
> 赞同：0
> 
> 时间：2013-02-27T01:53:46.717
> 
> 标签：nasm

我目前正在学习 NASM，有很多东西在教科书中无法解释。我已经习惯了教授的“这就是它的方式，所以接受它”的回答以及我对其他一些问题的回答，但我也更善于知道哪些答案更有可能获得真实答案

NASM 程序分为三个部分的技术原因是什么`.data`——`.bss`和`.text`？幕后究竟发生了什么？为什么汇编程序需要提前知道是否有常量，为什么不直接在程序运行时获取它们呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T03:03:45.497

该`data`部分是所有初始化数据所在的位置。字符串、DWORDS、WORDS、BYTES、QWORDS 等，程序启动时需要有值的任何内容。这部分是读/写的。此外，这里的任何东西都会**增加**最终的 exe 大小，所以如果你有一个很长的字符串；比如说 200 字节，你的程序将比没有这个字符串时大 200 字节。

该`bss`部分是您所有未初始化的数据在程序启动时不需要值的地方。此处添加的任何内容**都不会**添加到最终的 exe 大小。您放在这里的内容是告诉 exe 加载程序为某些变量分配内存，因为它们在程序执行期间需要内存空间。这部分是读/写的。

该`text`部分是所有程序代码所在的位置。此部分是只读的。

如果需要，您可以更改每个部分的属性，如果需要，您可以创建自己的部分。

这一切都可以通过研究发现。

# xpath - Web Config 转换：如果不存在则插入

> ID：15102834
> 
> 赞同：52
> 
> 时间：2013-02-27T01:53:57.463
> 
> 标签：xpath, web-config, web-config-transform

*当且仅当目标中不*存在匹配的元素时，我想应用转换。[使用http://webconfigtransformationtester.apphb.com/](http://webconfigtransformationtester.apphb.com/)尝试各种 xpath 表达式，但到目前为止没有运气。

例如，如果目标 web.config 看起来像这样：

```
<configuration>
  <system.web>
    <compilation debug="true" />
  </system.web>
</configuration> 
```

那么输出应该是这样的：

```
<configuration>
  <connectionStrings>
    <add name="MyCs" provider="System.Data.SqlClient" connectionString="" />
    <add name="SomeOtherCs" provider="System.Data.SqlClient" connectionString="" />
  </connectionStrings>
  <system.web>
    <compilation debug="true" />
  </system.web>
</configuration> 
```

但如果目标看起来像这样：

```
<configuration>
  <connectionStrings>
    <add name="MyCs" provider="System.Data.IChangedIt" connectionString="my connection string here" />
  </connectionStrings>
  <system.web>
    <compilation debug="true" />
  </system.web>
</configuration> 
```

那么转换的结果应该是这样的：

```
<configuration>
  <connectionStrings>
    <add name="MyCs" provider="System.Data.IChangedIt" connectionString="my connection string here" />
    <add name="SomeOtherCs" provider="System.Data.SqlClient" connectionString="" />   
  </connectionStrings>
  <system.web>
    <compilation debug="true" />
  </system.web>
</configuration> 
```

换句话说，我只是想将命名的连接字符串添加到配置中，但让管理员用他自己的值填充它。我认为这很简单`xdt:Transform="Insert" xdt:Locator="XPath(count(/configuration/connectionStrings)=0)"`（如果不存在，则添加一个 cs 配置部分）但显然不是。

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2013-05-21T20:49:28.913

与VS2012 中`xdt:Transform="InsertIfMissing"`的任务一起使用。`XmlTransform`微软似乎还没有更新他们的文档来反映这一点。

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2014-11-13T02:10:04.783

在我的情况下`xdt:Transform="InsertIfMissing"`没有工作`xdt:Locator="Match(name)"`

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2015-02-11T21:31:52.303

*为xdt:Transform="InsertIfMissing"*尝试这种替代转换：

```
<?xml version="1.0"?>
<configuration xmlns:xdt="http://schemas.microsoft.com/XML-Document-Transform">
  <nodeToInsertIfMissing xdt:Transform="Insert" />
  <nodeToInsertIfMissing xdt:Transform="Remove" xdt:Locator="XPath(/configuration/nodeToInsertIfMissing[2])" />
</configuration> 
```

它应该遵循[MSDN 文档](https://msdn.microsoft.com/en-us/library/dd465326%28v=vs.110%29.aspx)：

***插入****- 将转换文件中定义的元素添加为选定元素的同级元素。新元素将**添加到任何集合的末尾**。*

所以，如果节点已经存在，我们添加第二个，然后删除这个节点（第二个）。否则，我们添加新的唯一节点，但删除操作将失败。

注意：它似乎不适用于 NuGet **.(un)install.xdt*转换。*InsertIfMissing*也是。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-06-24T01:45:54.433

确认在 VS2015 和包管理器控制台主机版本 3.4.4.1321 中工作（您可以在打开包管理器控制台时找到它）。

**如果 'configuration\connectionStrings\add\@name' 不存在，这将插入。**

app.config.install.xdt：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration xmlns:xdt="http://schemas.microsoft.com/XML-Document-Transform">
    <connectionStrings xdt:Transform="InsertIfMissing">
        <add name="MyCs" provider="System.Data.SqlClient" connectionString="" xdt:Transform="InsertIfMissing" xdt:Locator="Match(name)"/>
    </connectionStrings>
</configuration> 
```

.nu​​spec 文件：

```
<files>
    <file src="app.config.install.xdt" target="content\app.config.install.xdt" /> 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-11-07T05:59:47.717

使用`xdt:Transform="Remove"`后跟`xdt:Transform="Insert"`变换。其他地方的`xdt:Transform="InsertIfMissing"`建议对我不起作用，看起来像是它的特定版本。

# matlab - 当我使用 malloc 而不是 mxMalloc 时，MATLAB 崩溃

> ID：15102835
> 
> 赞同：2
> 
> 时间：2013-02-27T01:53:57.953
> 
> 标签：matlab, malloc, mex

我在 MATLAB 中编写了以下代码：

```
#include <string.h>
#include <stdlib.h>
#include "mex.h"
#include "matrix.h"

void mexFunction(int nlhs, mxArray *plhs[],
                 int nrhs, const mxArray *prhs[]){

    double* x = (double*)malloc(5 * sizeof(*x));
    int k;
    for(k=0;k<5;k++)
        x[k] = k;
    mxArray* p1 = mxCreateDoubleMatrix(5, 1, mxREAL);
    mxSetPr(p1, x);
} 
```

我在没有输入或输出的情况下调用该函数。除了初始化一些向量之外，代码实际上什么都不做。我知道代码存在严重的内存泄漏，但除了内存泄漏之外，当我调用该函数时，MATLAB 会关闭。

如果我替换`malloc`为`mxMalloc`，代码将毫无问题地执行。我知道最好使用 mx* 来分配内存，但我确信 malloc 和 calloc 以及 free 可以毫无问题地在 MEX 中使用。

我也删除了（双*），但它仍然崩溃。

如果让我知道为什么提到的代码会导致 MATLAB 崩溃，我们将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-27T02:03:18.727

首先，*不要*`malloc`强制转换（在 C 中，C++ 是另一回事）的返回值，*特别是*如果你不包括 stdlib.h - 你会在你的整数和环境中遇到各种问题指针大小不同。

取下演员表，看看它是否抱怨将 a 分配`int`给 a `double *`。

如果是这样，请确保包含`stdlib.h`以获取`malloc`原型。

* * *

无论如何，[文档](http://www.mathworks.com.au/help/matlab/apiref/mxsetpr.html)很清楚：

> 数组必须在动态内存中；调用`mxCalloc`分配此内存。不要使用 ANSI C`calloc`函数，这会导致内存对齐问题导致程序终止。

尽管这仅特别提到了`calloc`功能，但[`mxMalloc`文档](http://www.mathworks.com.au/help/matlab/apiref/mxmalloc.html)指出：

> `mxMalloc`分配足以容纳`n`字节的连续堆空间。在 MATLAB 应用程序中使用`mxMalloc`而不是 ANSI C`malloc`函数来分配内存。

因此，文档明确禁止您所做的事情。别这样了。不要让我过来:-)

* * *

有关更多信息，有关 MatLab 使用诸如 SIMD 之类的东西进行高速数学运算的信息很多。

SIMD 可能需要比常规 C 数据类型更严格的对齐（因此比`malloc`保证更严格）。

这很可能是导致您的问题的原因，并且得到了文档中“可能导致内存对齐问题”评论的支持。我不*完全*确定是这种情况（因为我无法访问 MatLab 的源代码），但至少这是一个可行的解释。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-01-06T17:55:30.613

贴出的代码实际上有两个问题：

```
double* x = (double*)malloc(5 * sizeof(*x));
   :
mxArray* p1 = mxCreateDoubleMatrix(5, 1, mxREAL);
mxSetPr(p1, x); /* This leaks memory AND causes a crash */ 
```

第一个问题是其他人已经发布的内容。您永远不能将本机 C/C++ 内存（malloc、calloc、realloc、new 等）附加到 mxArray。这样做会搞砸 MATLAB 内存管理器，并最终在 MATLAB 尝试释放此内存时导致崩溃。您只能将内存从 MATLAB API 函数附加到 mxArray。

第二个问题是内存泄漏。mxCreateDoubleMatrix(5, 1, mxREAL) 调用在 mxArray 中的数据指针后面分配内存。该数据指针不在垃圾回收列表中。当您随后调用 mxSetPr(p1, x) 时，您会清除该数据指针并将其替换为 x，因此您对该数据指针的唯一访问权限将丢失并且您会泄漏内存。由于这个数据指针不在垃圾回收列表中，所以当 mex 函数返回给调用者时，它不会被释放。它只能通过重新启动 MATLAB 来恢复。以下是一些在不导致崩溃和内存泄漏的情况下正确编码的方法：

更改为 mxMalloc 和 mxFree 原始数据指针：

```
double* x = (double*)mxMalloc(5 * sizeof(*x));
   :
mxArray* p1 = mxCreateDoubleMatrix(5, 1, mxREAL);
mxFree(mxGetData(p1)); /* Free the original data pointer */
mxSetPr(p1, x); /* Attach MATLAB API generated pointer */ 
```

更改为 mxMalloc 并从空矩阵开始：

```
double* x = (double*)mxMalloc(5 * sizeof(*x));
   :
mxArray* p1 = mxCreateDoubleMatrix(0, 0, mxREAL);
mxSetPr(p1, x); /* Attach MATLAB API generated pointer */
mxSetM(p1, 5); /* Set row size */
mxSetN(p1, 1); /* Set column size */ 
```

根本不要单独分配......只需使用原始数据指针：

```
mxArray* p1 = mxCreateDoubleMatrix(5, 1, mxREAL);
double* x = (double*)mxGetData(p1);
/* Then use x downstream in your code */ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-12-06T02:04:28.800

为了避免其他人潜在的痛苦，在输入参数 x 上使用 mxMalloc(x) 的函数只有在 x 被声明为 const int x 时才有效，而不仅仅是 int x。

# listview - Wicket - 添加新实例时，ListView 没有得到更新

> ID：15102838
> 
> 赞同：0
> 
> 时间：2013-02-27T01:54:12.457
> 
> 标签：listview, model, wicket, detach

在我的面板中，我将 listView 添加到具有可拆卸模型的表中：

**编辑：**

```
public class TaskDetailsPanel extends Panel {
    ...

  public TaskDetailsPanel(String id, CompoundPropertyModel<LongRunningTask> model) {
    super(id, model);
    Task task = (LongRunningTask) getDefaultModelObject();

    List<Timeframe> testList = task.getTimeframes();

   DetachableTimeframeModel dtm = new DetachableTimeframeModel(new Model<Task>(task));
    ListView frames = new ListView("frame", dtm) {
        @Override
        protected void populateItem(ListItem item) {
            Timeframe tf = (Timeframe) item.getModelObject();
            item.add(new Label("time", "von - bis"));
            item.add(new Label("sentFiles", String.valueOf(tf.getSentFiles())));
            item.add(new Label("receivedFiles", String.valueOf(tf.getReceivedFiles())));
            item.add(new Label("missingMsgIds", String.valueOf(tf.getMissingMsgIds())));
            item.add(new Label("receivedMsgIds", String.valueOf(tf.getReceivedMsgIds())));
        }
    };
        frames.setOutputMarkupId(true);
        add(frames);

       ...
    }
} 
```

这是我的自定义 detable 模型：

```
class DetachableTimeframeModel extends LoadableDetachableModel {

    LongRunningTask task;

    public DetachableTimeframeModel(LongRunningTask t) {
        task = t;
    }

    @Override
    protected List<Timeframe> load() {
        return task.getTimeframes();
    }
} 
```

当我在面板内定义一个新的列表List（例如ArrayList）并向其中添加项目时，它就可以工作了。但是当列表来自另一个 javabean 时，它会失败。

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T06:55:01.910

将包含 longRunningTask 的模型传递给 DetachableTimeframeModel。

在 Wicket 中，你永远不应该从一个模型中拉出一些东西只是为了把它放到另一个模型中：

```
class DetachableTimeframeModel extends LoadableDetachableModel {

    IModel<LongRunningTask> task;

    public DetachableTimeframeModel(IModel<LongRunningTask> t) {
        task = t;
    }

    @Override
    protected List<Timeframe> load() {
        return task.getObject().getTimeframes();
    }

    public void detach() {
        super.detach(),

        task.detach();
    }
} 
```

请注意，传递给 TaskDetailsPanel 的构造函数的模型应该能够从某处加载实际任务，而不仅仅是持有对它的引用。Wicket 组件和模型被序列化到会话/页面存储。

# javascript - 带有 AJAX 轮询的 jQuery .live() 和 .each()

> ID：15102840
> 
> 赞同：3
> 
> 时间：2013-02-27T01:54:28.087
> 
> 标签：javascript, ajax, jquery, each

我有一个简单的函数，它遍历页面并向每个匹配的元素添加一个 CSS 类，使用`.each()`. 我也在不断地用 AJAX 更新页面，在第一次改变事情的 AJAX 更新之后，该功能不再适用。

代码：

```
$("div.col-conversation span.label-sticky").each(function () {
    $(this).closest('li').addClass('stickyhighlight');
}); 
```

我理解为什么它在第一个 AJAX 事件之后不起作用并尝试使用`.live()`，或者`.delegate()`但似乎您不能绑定不是事件的东西（即您只能绑定到单击、悬停等）使用这种方法，所以`.each()`行不通。

有没有一种简单的方法来执行这个函数而不将它包含在 AJAX 成功回调中并且不使用像 livequery 这样的插件，这可能是矫枉过正？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T02:06:56.040

可能比为每个匹配项附加事件处理程序更好的是使用带有选择器参数的 jQuery.on() 附加事件。它允许您执行以下操作：

```
$('#container').on('click', '.yourClass', function(event){ doStuff(); }); 
```

和

```
<div id="container">
    <span class="yourClass">...</span>
    <div class="yourClass">...</div>
    <anything class="yourClass">...</anything>
</div> 
```

这意味着只需要激活一个事件侦听器，而不是类中的每个项目一个事件。这也意味着如果您将项目添加到容器中，则无需更新侦听器。它的性能更好，更容易处理。

查看[jQuery.com](http://api.jquery.com/on/)了解更多关于 .on() 的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T02:14:35.490

我认为这对你有用：

```
$('body').on('mychange','div.col-conversation span.label-sticky',function () {
   $(this).closest('li').addClass('stickyhighlight');
}); 
```

将此添加到您的 ajax 成功函数中：

```
$('body').trigger('mychange'); 
```

**或者，如果您真的不想（或不能）修改 ajax 成功函数：**

```
setInterval(function() {
   $('div.col-conversation span.label-sticky').each(function () {
       $(this).closest('li').addClass('stickyhighlight');
   });
},100); 
```

# c# - 如何从另一个网格内的剑道网格中获取字段

> ID：15102845
> 
> 赞同：0
> 
> 时间：2013-02-27T01:55:39.357
> 
> 标签：c#, asp.net-mvc, telerik, kendo-ui

我的 .net mvc 应用程序的详细模板中有一个剑道网格和另一个网格。子网格具有 Id、Name、Total 和 Score 字段。我希望能够定义这样的列

```
columns.Template(@<text></text>).ClientTemplate("<a href=\"#\" onclick=\"myFunction(#=Id#)\">LinkText</a>"); 
```

有趣的部分是`myFunction(#=Id#)`，当我这样做时，我收到一个错误，说 Id 未定义。它适用于主网格但不适用于子网格，有没有办法访问子网格的字段？谢谢。

这是我的看法：

```
@( Html.Kendo().Grid<WinStream.WebUI.Models.ServiceItemGridModel>()
    .Name("ManageSIGrid")
    .Columns(columns =>
    {
        columns.Template(@<text></text>).ClientTemplate(
            "#=showSIFlag(Flagged)#" +
            "#=showSILock(Locked)#" +
            "#=showSIDeactive(Activated)#"
        ).Width(75);
        columns.Bound(o => o.Id).Width(50);
        columns.Bound(o => o.Name).Width(160);
        columns.Bound(o => o.Customer).Width(150);
        columns.Bound(o => o.Location).Width(150);
        columns.Bound(o => o.City);
        columns.Bound(o => o.State).Width(60);
        columns.Bound(o => o.Type);
        columns.Bound(o => o.Style);
        columns.Bound(o => o.Material);
    })
    .DataSource(dataSource => dataSource
        .Ajax()
        .ServerOperation(true)
        .Read(read => read.Action("ReadServiceItems", "Bids", new { bidId = Model.BidID }))
        .Model(model => model.Id(c => c.Id))
    )
    .Sortable()
    .Filterable(f => f
        .Extra(false)
    )
    .ClientDetailTemplateId("biditemgrid")
    .Navigatable()
    .Pageable(page => page.Refresh(true).PageSizes(true))
    .Scrollable(scroll => scroll.Virtual(true).Height(300))
    .Selectable(select => select.Mode(GridSelectionMode.Multiple))
    .AutoBind(true)
    .Events(events => events.DataBound("dataBound")) 
```

)

```
<script id="biditemgrid" type="text/kendo-tmpl">
    @( Html.Kendo().Grid<WinStream.WebUI.Models.BidItemGridModel>()
            .Name("BidItemGrid")
            .Columns(columns =>
            {
                columns.Bound(o => o.Id).Width(50);
                columns.Bound(o => o.Name).Width(160);
                columns.Bound(o => o.Total).Width(75).Title("Total Price");
                columns.Bound(o => o.Score).Width(75);
            .Sortable()
            .Filterable(f => f
                .Extra(false)
            )
            .Navigatable()
            .Pageable()
            .Selectable(select => select.Mode(GridSelectionMode.Multiple))
            .ToolBar(toolbar => toolbar.Template(
                "<p class=\"float-left big-text no-margin-bottom\">Vendors</p>" 
            ))
            .DataSource(data => data
                .Ajax()
                .ServerOperation(false)
                .PageSize(5)
                .Read(read => read.Action("ReadBidItems", "Bids", new { bidId = Model.BidID, siId = "#=Id#" }))
                .Model(model => model.Id(c => c.Id))
            )
            .ToClientTemplate()
    )
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T07:37:36.653

尝试用斜线避开尖锐的符号。目前它由外部 Grid 评估，并且由于主 Grid 没有这样的字段，因此会引发此错误。

```
myFunction(\\#=Id\\#) 
```

# css - 砌体 16 列布局，内容跨越 2、3、4 或 6 列

> ID：15102846
> 
> 赞同：1
> 
> 时间：2013-02-27T01:55:40.463
> 
> 标签：css, jquery-masonry

我正在使用 Vanilla Masonry ( [http://vanilla-masonry.desandro.com](http://vanilla-masonry.desandro.com) ) 创建类似于 jean-georges.com 的照片马赛克

基本上我需要添加额外的列，开箱即用的 css 只有 3 列，流体宽度为 16%、36% 和 56%，我认为内容周围有 2% 的填充/边距。我不想要任何排水沟或填充，需要 16 列，所以我将 css 更改为 6.25%、12.5%、18.75%、25%、31.25% 和 37.5%。请记住，我希望内容跨越 2、3、4 或 6 列，因此这些列的大小并不完全相同。我已将图像更改为正确的纵横比和大小以协同工作，而且我正在使用 columnWidth 函数返回 container/16 并将列设置为该大小。

它似乎无法正常工作，我的许多 col6 矩形正在调整为 col4。我不知道发生了什么，当我调整窗口大小时，照片会自行调整大小，但它们之间的大小并没有保持一致。这可能是 dpi 问题，我今天下午要重做图形，但是它仍然应该根据纵横比工作并告诉它要跨越多少列。

编辑：我已经让它适用于非常特定的浏览器窗口大小，我调整了开发人员工具的大小，并将它推到了一起。我想知道是否添加了一些百分比填充/边距但找不到！另一种可能性是容器高度正在影响它。

![马赛克砌体几乎可以工作](../Images/1cbe4e74b6361afa5b99c4580fe45945.png)

# github - 成为 github pull request 的参与者

> ID：15102854
> 
> 赞同：1
> 
> 时间：2013-02-27T01:57:05.467
> 
> 标签：github

有没有办法让我在 github 上“关注”拉取请求。如果有人评论或更新拉取请求，我希望得到通知。我相信当我通过评论拉取请求成为参与者时，这是自动完成的。但在这种情况下，这似乎不是一个好的选择，因为我目前没有任何有用的信息要说。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T02:05:18.443

每个问题页面的底部都有一个“观看线程”按钮。

# javascript - 如何将 JSON 字符串清晰地组织到数组中

> ID：15102861
> 
> 赞同：0
> 
> 时间：2013-02-27T01:57:58.843
> 
> 标签：javascript, json

我现在正在使用 HTMLV 功能，我想将有关 DOM 元素的信息存储到 JSON 文件中。

因此，我创建了一个这样的 JSON 文件：

```
var pages= 
 [  
    {
            "img_data_url": "test",
        "stamp":
        [
        {"src": "../pic/cake.png",
         "pos_x": 1,
         "pos_y": 1,
         "id_name": "stamp00"           
        },
        {"src": "../pic/egg.png",
         "pos_x": "2",
         "pos_y": "2",
         "id_name": "stamp01"
        },
        {"src": "../pic/sugar.png",
         "pos_x": "3",
         "pos_y": "3",
         "id_name": "stamp02"
        },
        {"src": "../pic/potato.png",
         "pos_x": "4",
         "pos_y": "4",
         "id_name": "stamp03"
        },
        {"src": "../pic/banana.png",
         "pos_x": "5",
         "pos_y": "5",
         "id_name": "stamp04"
        }       
        ]    
    }
    ,
    {
        "img_data_url": "test",
        "stamp":
        [
        {"src": "../pic/f.png",
         "pos_x": "1",
         "pos_y": "1",
         "id_name": "stamp10"           
        },
        {"src": "../pic/g.png",
         "pos_x": "2",
         "pos_y": "2",
         "id_name": "stamp11"
        },
        {"src": "../pic/h.png",
         "pos_x": "3",
         "pos_y": "3",
         "id_name": "stamp12"
        },
        {"src": "../pic/i.png",
         "pos_x": "4",
         "pos_y": "4",
         "id_name": "stamp13"
        },
        {"src": "../pic/j.png",
         "pos_x": "5",
         "pos_y": "5",
         "id_name": "stamp14"
        }
        ]       
    }        
] 
```

我检索存储在 DOM 元素中的数据以创建每个“{}”段。

通过写作：

```
var json_obj={};
json_obj["src"] = "../pic/cake.png";
json_obj["pos_x"] = 1;
json_obj["pos_y"] = 1;
json_obj["id_name"] = "stamp00";
var json_string= JSON.stringify( json_obj ); 
```

我有 ：
`"{"src":"../pic/cake.png","pos_x":1,"pos_y":1,"id_name":"stamp00"}"`

但是我怎样才能像这样组织数据结构：
`"stamp": [] <-- An array consists of lots of JSON strings I created above."`
问题：
1\. 两个双引号字符（在第一个和最后一个位置）“是
`"{"src":"../pic/cake.png","pos_x":1,"pos_y":1,"id_name":"stamp00"}"` 多余的吗？
为什么会出现？
它们会影响我在 JSON 文件中检索数据的操作吗？
2.我想要一种替代方法而不是写作：

```
var str= "\"stamp\":[";
str += json_string; 
```

要得到
`""stamp":[{"src":"../pic/cake.png","pos_x":1,"pos_y":1,"id_name":"stamp00"}"`

有什么更聪明更正确的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T02:01:51.133

永远不要直接弄乱 JSON 字符串。只需创建您想要的结构并将其字符串化。

```
var json_obj={};
json_obj["src"] = "../pic/cake.png";
json_obj["pos_x"] = 1;
json_obj["pos_y"] = 1;
json_obj["id_name"] = "stamp00";

var json_document = {
    stamp: [ json_obj ],  // you probably want to build this array separately
};
JSON.stringify(json_document); 
```

您看到的外部引号现在表明它是一个 JavaScript 字符串。内引号（您应该看到转义，带有`\`?）是 JSON 格式的一部分。

# actionscript-3 - 基本 as3 语法/错误

> ID：15102864
> 
> 赞同：0
> 
> 时间：2013-02-27T01:59:03.423
> 
> 标签：actionscript-3, flash

```
 package
    {
include flash.events.* //1084: Syntax error: expecting stringliteral before flash.
include flash.ui.*

public class tank () //1068: Unable to open included file: /Volumes/scottthreet/Documents/FLASH/tankdrive/leftbrace. 1084: Syntax error: expecting rightbrace before leftbrace.
    this.addEventListener(Event.ENTER_FRAME, update);
    stage.addEventListener(KeyBoardEvent.KEY_DOWN, onKeyDown);
    stage.addEventListener(KeyBoardEvent.KEY_UP, onKeyUp);

    var keys:Array = []; 

    function update(e:Event):void
    {
        var rotang:Int = 0;
        var speed:Int;
        if(keys[Key.I])
        {
            rotang = rotang + 1;
        }
        if(keys[Key.J])
        {
            rotang = rotang - 1;
        }
        if(keys[Key.W])
        {
            rotang = rotang - 1; 
        }
        if(speed > 0)
        {
            speed = speed - 1;
        }
        if(speed < 0)
        {
            speed = speed + 1;
        }
        if(keys[Key.S])
        {
            rotang = rotang + 1;
        }
        if(keys[Key.I] && keys[Key.W])
        {
            speed = speed + 3;
        }
        if(keys[Key.K] && keys[Key.S])
        {
            speed = speed - 3;
        }
        if(speed > 30)
        {
            speed = 30;
        }
        if(speed < -30)
        {
            speed = -30;
        }
        public function degreesToRadians(param1:Number) : Number
        {
            return param1 * Math.PI / 180;
        }
        this.vy +=  Math.sin(this.degreesToRadians(rotang)) *speed;
        this.vx += Math.cos(this.degreesToRadians(rotang))*speed;
        this.y = tank.y + tank.vy;
        this.x = tank.x + tank.vx;
        this.rotation = rotang * Math.PI / 180;
    }

    function onKeyDown(e:Event):void
    {
        keys[e.keyCode] = true;
    }

    function onKeyUp(e:Event):void
    {
        keys[e.keyCode] = false;
    }

}
    } 
```

评论是我遇到错误的地方，我不明白它有什么问题......我通过谷歌搜索这些错误一无所获，只是其他形式的错误......

有人有一些基本的示例 as3 代码吗？出于某种原因，它希望我添加细节；没有太多要补充的细节...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T02:05:45.510

首先，检查您的代码是否在类（.as）或 fla 中。ActionScript 3.0 基于类和基于脚本的语言。在 .fla 中只有可用的脚本。你曾经用fla写过吗？如果正确，你必须写成 .as

As3 类包含语法不是`include`，但是`import`

`include flash.events.*`->`import flash.events.*`

在 Class 中，您的`function()`语法将被限定为默认命名空间：internal。它在这个包之外是不可见的。适合您的功能目的的设置。

`function bar();`方法`internal function bar();`

> *   **公共**访问修饰符允许每个类访问
> *   **internal**访问修饰符允许共享此包访问的类
> *   **protected**访问修饰符允许子类访问
> *   **私有**访问修饰符不允许外部访问

并且构造函数必须与 .as 文件名相同，如下所示：

// MyClass.as

```
package 
{
  import flash.display.Sprite;
  public class MyClass extends Sprite 
  {
       public function MyClass() 
       {

       }
  }
} 
```

这是示例类球。

//球.as

```
package
{
    import flash.display.Sprite;

    public class Ball extends Sprite
    {
        private var _color:uint;
        private var _radius:Number;
        private var _vx:Number = 0;
        private var _vy:Number = 0;

        public function Ball(radius:Number, color:uint = 0xffffff)
        {
            _radius = radius;
            _color = color;
            draw();
        }

        private function draw():void
        {
            graphics.clear();
            graphics.lineStyle(0);
            graphics.beginFill(_color, 1);
            graphics.drawCircle(0, 0, _radius);
            graphics.endFill();
            graphics.drawCircle(0, 0, 1);
        }

        public function update():void
        {
            x += _vx;
            y += _vy;
        }

        public function set color(value:uint):void
        {
            _color = value;
            draw();
        }

        public function get color():uint
        {
            return _color;
        }

        public function set radius(value:Number):void
        {
            _radius = value;
            draw();
        }

        public function get radius():Number
        {
            return _radius;
        }

        public function set vx(value:Number):void
        {
            _vx = value;
        }

        public function get vx():Number
        {
            return _vx;
        }

        public function set vy(value:Number):void
        {
            _vy = value;
        }

        public function get vy():Number
        {
            return _vy;
        }

    }
} 
```

如果你想在 Flash 中使用，你的 .fla 文件和 Ball.as 文件位于同一目录。

并运行这个脚本

```
var ball:Ball = new Ball(10,0x0000ff);
addChild(ball); 
```

如果您想在 Flash Builder 中使用 Ball.as 文件，该文件位于您的 src 文件夹中。

并建立这个类。如果你做一个项目，会自动创建同名的类。例如）我的班级

//MyClass.as

```
package {

    import flash.display.Sprite;

        public class MyClass extends Sprite
        {
            public function MyClass() 
            {

                var ball:Ball = new Ball(10,0xff0000);
                ball.x = 10;
                ball.y = 10;
                addChild(ball);
            } 

        }
} 
```

`package blah.blah { }`表示您的工作目录或文档 src 的相对路径。例如，`import flash.display.Sprite`按如下语法打包：`package flash.display.sprite`. 在 Flash 中，可能也已经设置了 Flash builder ActionScript 3.0 通用类。已经链接了，所以它可以从任何文件夹中获得，我们会的。如果您想检查此设置，请参阅`File-ActionScript Settings - Library path`. 默认路径如下：`$(AppConfig)/ActionScript 3.0/libs.`

# objective-c - 在 NSKeyedArchiver 中查找不同的实例

> ID：15102867
> 
> 赞同：2
> 
> 时间：2013-02-27T01:59:06.317
> 
> 标签：objective-c, memory, nsarchiving

我目前正在使用这个博客，它使用与 NSKeyedArchiver 一起使用的自定义类。一切似乎都是正确的，但我想知道如何获得“学生”的不同实例。

[http://keeptheseinmind.blogspot.com/2011/10/nskeyedarchiver-tutorial.html](http://keeptheseinmind.blogspot.com/2011/10/nskeyedarchiver-tutorial.html)

在本教程中，每次终止应用程序时都会创建自定义类“students”的新实例。而且我假设在 NSKeyedArchiver 中有许多这样的“学生”实例，但我只能访问其中一个。

保存到磁盘

```
- (void)saveDataToDisk {
    NSString *path = @"~/Documents/data";
    path = [path stringByExpandingTildeInPath];

    NSMutableDictionary *rootObject;
    rootObject = [NSMutableDictionary dictionary];

    [rootObject setValue:student forKey:@"student"];

    [NSKeyedArchiver archiveRootObject:rootObject toFile:path];
} 
```

从磁盘加载

```
- (void)loadDataFromDisk {
    NSString *path = @"~/Documents/data";
    path = [path stringByExpandingTildeInPath];

    NSMutableDictionary *rootObject;
    rootObject = [NSKeyedUnarchiver unarchiveObjectWithFile:path];

    if ([rootObject valueForKey:@"student"]) {
        student = [rootObject valueForKey:@"student"];
    }
} 
```

**编辑：**

我弄错了，每次实例都相互覆盖，每次应用程序都被终止。有趣的...

但是，我的目标仍然是在一个或多个 NSKeyedArchiver 中创建许多“学生”实例。任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T08:45:20.087

您可以将其`NSKeyedArchiver`视为将对象（序列化）保存到磁盘的一种方式。在您的情况下，该对象是一个`NSDictionary`，它只有一个键，`student`（我使用 JSON-ish 表示法来显示数据结构；希望意图很明确）：

```
"student" : { "studentId" : 25,
              "studentName" : "John Smith"
            } 
```

正如您所注意到的，每次您调用 时`saveDataToDisk`，它只是覆盖了那个单一的“学生”键。要保存多个学生，您可以采取以下几种方法：您的选择将取决于您希望如何读取数据。

一种选择是存储数组，而不是`NSDictionary`：

```
"student" : [ { "studentId: 25, "studentName" : "John Smith" },
              { "studentId: 26, "studentName" : "Jane Doe" } ] 
```

如果您采用这种方法，您需要确保可以`saveDataToDisk`访问`NSArray`学生，并将该数组传递给`rootObject setValue:`：

```
[rootObject setValue:students forKey:@"students"]; 
```

或者，您可以想象只想向字典中添加更多键，每个键代表一个学生：

```
"student25" : { "studentId: 25, "studentName" : "John Smith" },
"student26" : { "studentId: 26, "studentName" : "Jane Doe" } 
```

在这种情况下，您将再次需要确保您的保存函数可以访问一组学生，但这次您将遍历该数组，并将每个人添加到 rootDictionary 中，并使用您构造的自己的键（例如示例）将“学生”与学生 ID 连接起来。

# database - 数据库缓存有什么用？

> ID：15102870
> 
> 赞同：0
> 
> 时间：2013-02-27T01:59:18.923
> 
> 标签：database, codeigniter, caching

我看到 Code Igniter 中有一个用于缓存数据库查询的库。

它有什么意义？我觉得这是一个愚蠢的概念，因为访问驱动器上的数据比访问数据库更重。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T02:01:21.433

数据库缓存通常发生在内存中，而不是磁盘上。当后续的同类型请求发出时，频繁的请求会立即从内存中返回。这非常适合可重复的查询，例如菜单和其他导航请求。

# java - 让用户输入姓名，然后回答 12 个多项选择测验，然后对其评分

> ID：15102873
> 
> 赞同：0
> 
> 时间：2013-02-27T01:59:34.090
> 
> 标签：java, arrays, for-loop, user-input, equality

这就是我所拥有的：

```
import java.util.*;
import java.text.*;

public class Lab4 {
    public static void main(String[] args) {
        Scanner s = new Scanner(System. in );
        Scanner keyboard = new Scanner(System. in );
        String input;
        int students;
        int correctAnswers = 0;

        char[] answerKey = {
            'B', 'D', 'A', 'A', 'C', 'A', 'B', 'A', 'C', 'D', 'B', 'A'
        };
        char[] userAnswers = new char[answerKey.length];

        DecimalFormat df = new DecimalFormat("#0.0");

        System.out.print("how many students are in your class?");
        input = s.nextLine();
        students = Integer.parseInt(input);

        String[] name = new String[students];

        for (int j = 0; j < students; ++j) {
            System.out.print("Enter name of student " + (j + 1) + ": ");
            name[j] = s.nextLine();

            System.out.print("Enter quiz score answers :");
            for (int k = 0; k < answerKey.length - 1; ++k) {
                userAnswers[k] = s.next().charAt(0);
            }

            for (int i = 0; i < userAnswers.length; i++) {

                if (userAnswers[i] == answerKey[i]) {
                    correctAnswers++;
                }

            }

            System.out.println((df.format((correctAnswers / answerKey.length) * 100)) + "%");

        }

    }

} 
```

但是每次我输入 12 个答案（甚至是正确的答案）时，它都会进入下一行并且不打印任何其他内容，我想知道它有什么问题，我想也许 userAnswers 没有正确分配？

无论如何，任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T02:49:58.807

[`Scanner.next()`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html#next%28%29)使用分隔符对输入字符串进行标记。如果您不使用 设置分隔符[`Scanner.useDelimiter`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html#useDelimiter%28java.lang.String%29)，则默认为空格。因此，您可以在输入答案时用空格分隔每个答案，也可以将分隔符设置为空字符串，以便单独获取每个字符。我怀疑这可能是该`Scanner keyboard = new Scanner(System. in );`行的用途-目前未使用它，但可以与空分隔符一起使用来解析没有空格的答案字符串。

要查看我在说什么，请尝试输入以空格分隔的每个答案。您还可以尝试为 12 个答案中的每一个输入“ab ab ab...”（即 12 x “ab”），您应该会看到您的代码将读取 12 个“a”作为答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T02:20:40.197

几件事：

1.  此行 `for (int k = 0; k < answerKey.length -1; ++k) {` 应更改为， `for (int k = 0; k < answerKey.length; ++k) {` 否则您将错过用户的一个答案

2.  执行此操作时使用了两个整数`correctAnswers/answerKey.length`，因此结果将被截断为 0。您应该使用 double 或 float 作为类型`correctAnswers`，然后使用它进行除法以获得十进制值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T02:20:47.887

首先，光标转到下一行，是的，下一行`println`不打印（引自您的评论）。`"Enter quiz score answers : "`发生这种情况是因为您只在循环外打印一次。

尝试更改此行：

```
 System.out.print("Enter quiz score answers :");
  for (int k = 0; k < answerKey.length - 1; ++k) {
       userAnswers[k] = s.next().charAt(0);
  } 
```

至 ：

```
 for (int k = 0; k < answerKey.length; ++k) {
          System.out.print("Enter quiz score answers : ");
          userAnswers[k] = s.next().charAt(0);                  
  } 
```

其次，您对此计算有疑问：

```
System.out.println((df.format((correctAnswers / answerKey.length) * 100)) + "%"); 
```

where `correctAnswers`and `answerKey.length`is `int`，所以结果`correctAnswers / answerKey.length`是 int。

如果`correctAnswers = 4`? 它会`4/12`先计算。由于两者都是`int`，因此结果为 0。

尝试将该行更改为：

```
 System.out.println((df.format((((float)(correctAnswers) / answerKey.length)) * 100)) + "%"); 
```

# mysql - 在远程主机上查询期间丢失与 MySQL 服务器的连接

> ID：15102878
> 
> 赞同：0
> 
> 时间：2013-02-27T02:00:34.480
> 
> 标签：mysql, cppcms

我正在使用带有 cppdb 和 mysql 的 cppcms 框架，并在尝试对远程数据库进行查询时出现“查询期间与 MySQL 服务器的连接丢失”错误。

我在本地也有相同的数据库，并且该应用程序可以与该数据库正常工作。

远程 mysql 版本：mysqld Ver 5.5.29-0ubuntu0.12.10.1 for debian-linux-gnu on i686 ((Ubuntu))

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T08:48:49.150

两个问题：

*   你使用连接池吗？
*   您是在使用完对象后销毁`cppdb::session`它还是一直保持它处于活动状态？

如果您一直保留`cppdb::session`，您可能不需要这样做，因为 MySQL 在特定时间段后关闭空闲连接。最好使用 CppDB 提供的连接池。

如果您已经在使用连接池，请尝试将`@pool_max_idle`参数更改为较小的值。

有关详细信息，请参阅：[http ://cppcms.com/sql/cppdb/connstr.html#speckeys](http://cppcms.com/sql/cppdb/connstr.html#speckeys)

# javascript - 按钮警报中有多个参数？

> ID：15102880
> 
> 赞同：0
> 
> 时间：2013-02-27T02:01:05.800
> 
> 标签：javascript, html, xml

我想制作一个可以传递参数的按钮，但是正如您所看到的，我将参数“Jason”赋予它，它结束了“onclick”值的行。我应该怎么办？

```
<script type="text/javascript">
    function greeting(name,age){
        alert("Hello, "+name+", you are "+age+" years old.");
    }
</script>
<form>
<input type="button" value="Click me" onclick="greeting("Jason",20)" /> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-27T02:03:03.470

在双引号内使用单引号，否则您将终止字符串：

```
onclick="greeting('Jason',20)"
                 -^-   -^- 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T02:08:14.790

您需要使用不同的引号。

```
<input type="button" value="Click me" onclick="greeting('Jason',20)" /> 
```

或者您可以使用 HTML 实体。

```
<input type="button" value="Click me" onclick="greeting(&quot;Jason&quot;,20)" /> 
```

但是`onclick`相当陈旧。我会做这样的事情。

HTML：

```
<button type="button" class="js-greeting" data-name="Jason" data-age="20">Click me</button> 
```

JS（加上 jQuery；你可以不这样做，但跨浏览器问题仍然很严重）：

```
$(function() {
    $('.js-greeting').click(function() {
        var name = $(this).data('name');
        var age = $(this).data('age');

        alert("Hello, " + name + "; you are " + age + " years old.");
    });
}); 
```

# android - Gson 自定义错误处理

> ID：15102888
> 
> 赞同：0
> 
> 时间：2013-02-27T02:02:16.207
> 
> 标签：android, gson

我正在尝试使用[Gson](http://code.google.com/p/google-gson/)库来解析一些 json 数据。来自服务器的响应可能是以下之一：

成功结果：

```
{myObject: {foo:"1", bar:"bleh"}} 
```

故障结果：

```
{error: {message:"invalid token", code:320} } 
```

似乎 Gson 只能处理一种返回类型，例如：

```
Gson gson = new Gson();
MyObject object = gson.fromJson(value, MyObject.class); 
```

如何使用 Gson 正确解析提要中的数据/（错误），而不仅仅是自己解析 JSON？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T22:53:36.663

因为你不知道你会得到什么，所以很难使用像 Gson 这样的东西并反序列化为 POJO。您实际上得到了一个带有“myObject”或“error”字段的对象。一种方法是简单地创建一个综合对象。Gson`null`在解析 JSON 时设置任何不存在的字段，所以这样的事情可以正常工作：

```
class JSONResponse {
    private MyObject myObject;
    private Error error;

    static class MyObject {
        String foo;
        String bar;
    }

    static class Error {
        String message;
        int code;
    }

    public boolean isError() {
        return error != null;
    }

    // Getters that access the fields of the objects
    // ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T23:29:53.857

谢谢@Brian。我最终只是像这样解析

```
JsonParser parser = new JsonParser();
    parser.parse(value).getAsJsonObject(); 
```

然后检查错误节点是否存在，以便我可以抛出服务器异常。如果节点不存在，那么我从那里使用 Gson。

```
Gson gson = new GsonBuilder().create();
    ArrayList<GridItemVo> list = gson.fromJson(value, new TypeToken<ArrayList<GridItemVo>>(){}.getType()); 
```

# batch-file - 从文本文件中读取问题

> ID：15102890
> 
> 赞同：0
> 
> 时间：2013-02-27T02:02:29.183
> 
> 标签：batch-file

我的目标是有一个程序在每次更新（成功）时将 6 个变量（q、d、n、p、tc、td）保存在一个文本文件中，并且在重新打开时会根据文本文件自动设置变量。因此，如果 tc 在上次关闭时等于 13，如果我在一周后打开它，它仍然等于 13。（假设文本文件未触及）当我尝试运行这段代码时会出现问题：

```
:Load
set v=0
FOR /F "usebackq delims=" %%a in ("SavedData.txt") do (
set /a var+=1
set var!v!=%%a
)
set q=%var1%
set d=%var2%
set n=%var3%
set p=%var4%
set td=%var5%
set tc=%var6%
goto main 
```

它给出了以下错误：

```
9 was unexpected at this time. 
```

有任何想法吗？（顺便说一句，当显示错误时，没有一个值等于 9）

**编辑：**我让它工作了，但现在每个变量最后都有一个额外的空间，我想删除它以便它可以正常工作。

我通过打字`set /a v+=1`而不是`set /a var+=1`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T02:29:30.527

我不认为错误消息出现在您认为的位置，但我确实在您的代码中看到了一个错误。`var`当您打算增加时，您正在增加`v`。我看不出该错误如何给出您描述的错误消息，但它显然会导致问题，并可能导致代码中其他地方的错误。

您的 Load 例程可能要简单得多。

```
:Load
<"SavedData.txt" (for %%V in (q d n p td tc) do set /p "%%V=") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T05:37:24.197

正如 dbenham 所说，您的加载程序可能要简单得多。这个答案不会讨论如何让它变得更简单，因为你可能应该只看一下（假设 debnham 的答案比我的得到更多的支持）。这个答案会告诉你为什么你的变量值中有额外的空格。

现在，我能想到为什么会发生这种情况的唯一原因是因为在您的代码（可能是`:save`序列）的某个地方，您的代码看起来像这样：

```
echo value_of_q >> "SavedData.txt"
::More stuff here... 
```

问题是语句结束前的空格 ( `echo value_of_q`) 和重定向 ( `>> "SavedData.txt"`)。这会将命令的输出（包括任何空格）附加到`SavedData.txt`.

现在，您可以通过两个选项之一（或两者）来避免这种情况。

选项 1。您修剪空格。用它`echo value_of_q>> "SavedData.txt`代替你所拥有的。

选项 2。假设变量的值在不同的行上，您可以`delims`在`for`循环中删除该选项（您也可以删除该`usebackq`选项）。

所以，你的`for`循环看起来更像......

```
for /f "usebackq" %%i in ("SavedData.txt") do (
    ::Rest of your code here...
    ::Oh, and your code blocks should be indented as well.
) 
```

如您所见，我将 更改`%%a`为`%%i`，这对于您的循环不是必需的，但这是一种很好的做法，因为它可能会在将来避免错误。

希望有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T06:29:30.547

一种更简单的方法是通过包含完整的命令而不是变量值来使保存文件成为`.bat`一个文件而不是文件；这样做的好处是加载代码不依赖于保存值的顺序（也不依赖于保存代码）。例如，这将是保存变量的代码：`.txt``set`

```
:Save
(for %%v in (q d n p td tc) do echo set %%v=!%%v!) > "SavedData.bat" 
```

这将是恢复保存值的代码：

```
:Load
call "SavedData.bat" 
```

安东尼奥

# c++ - 如果表面被锁定，访问 SDL_Surface 的俯仰数据成员是否安全？

> ID：15102893
> 
> 赞同：0
> 
> 时间：2013-02-27T02:02:57.090
> 
> 标签：c++, sdl

我的字体渲染测试中有以下代码：

```
SDL_Surface* image = SDL_CreateRGBSurface(SDL_SWSURFACE,
                                          face->glyph->bitmap.width,
                                          face->glyph->bitmap.rows,
                                          8,
                                          0, 0, 0,
                                          0);
if(!image)
{
  throw std::runtime_error("Failed to generate 8 bit image");
}

//There's no better way to do this, right? Being it just sets up a basic grayscale palette
SDL_Color colors[256];
for(int i=0; i<256; ++i)
{
  colors[i].r = i;
  colors[i].g = i;
  colors[i].b = i;
}
SDL_SetColors(image, colors, 0, 256);

SDL_LockSurface(image);

uint8_t* pixels = static_cast<uint8_t*>(image->pixels);
for(int i = 0; i<face->glyph->bitmap.rows; ++i)
{
  for(int j = 0; j<face->glyph->bitmap.width; ++j)
  {
    pixels[i * face->glyph->bitmap.width + j] = face->glyph->bitmap.buffer[
                                           i * face->glyph->bitmap.width + j];
  }
}
###############################################################################
#                           Here's the spotlight                              #
#                                    |                                        #
#                   _________________/                                        #
#                  /                                                          #
###############################################################################
image->pitch = image->w;
SDL_UnlockSurface(image); 
```

请注意，我将间距更改为宽度，有效地使每像素字节等于 1。这正是我所需要的，事实上，像我一样改变音高是我的信件是否歪曲的决定因素。

我的问题是：这是定义、安全和良好的做法吗？有没有我不知道的功能可以帮助我？有没有更安全的选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T23:39:13.927

你写 image->pitch 是错误的。它可能在某些情况下有效，但在其他情况下会导致显示损坏或段错误。这一切都取决于那块内存来自哪里。

我认为您将索引计算为像素 [] 是错误的，应该是：

像素[i * 图像-> 间距 + j] = ...

# python - 在 wxPython 中跨面板拖放图像

> ID：15102899
> 
> 赞同：4
> 
> 时间：2013-02-27T02:03:38.660
> 
> 标签：python, drag-and-drop, wxpython

我目前不确定如何实现跨面板拖放某些对象（在本例中为 png）。我查看了 wxPython 示例中提供的相关 DragImage 示例，这里的大部分代码都是从中派生的。但是，如果您运行下面的代码（您需要生成一个或两个示例 PNG），我有三个面板：顶部的面板，我希望在其中连续加载 PNG，然后是两个它下面的面板。将在顶部面板上排列 PNG 的代码行目前已被注释掉（在 MechanismPanel 类下，位于底部），因为它阻止了我获得任何鼠标事件。我不确定是否可以跨面板拖放图像，或者如果可以，我是否正确处理。

**编辑：**对我正在寻找的内容进行更简洁的解释。顶部面板中的图像，您可以将其中一个图像拖出并将其添加到下部面板之一。将顶部面板视为要从中绘制的一行小部件，将底部的两个面板视为排列小部件的位置。为了帮助区分问题，我还有一个关于在顶部面板中拖动和复制图像的[问题](https://stackoverflow.com/questions/15103576/dragging-and-copying-images-in-wxpython)。

```
import os
import glob

import wx
import wx.lib.scrolledpanel as scrolled

class MainWindow(wx.Frame):
    def __init__(self, parent, title):
        wx.Frame.__init__(self, parent)
        frm_pnl = MainPanel(self)

        self.Show()

class DragShape:
    def __init__(self, bmp):
        self.bmp = bmp
        self.pos = (0,0)
        self.shown = True
        self.text = None
        self.fullscreen = False

    def HitTest(self, pt):
        rect = self.GetRect()
        return rect.InsideXY(pt.x, pt.y)

    def GetRect(self):
        return wx.Rect(self.pos[0], self.pos[1], self.bmp.GetWidth(), self.bmp.GetHeight())

    def Draw(self, dc, op = wx.COPY):
        if self.bmp.Ok():
            memDC = wx.MemoryDC()
            memDC.SelectObject(self.bmp)

            dc.Blit(self.pos[0], self.pos[1],
                    self.bmp.GetWidth(), self.bmp.GetHeight(),
                    memDC, 0, 0, op, True)

            return True
        else:
            return False

class MainPanel(wx.Panel):
    def __init__(self, parent):
        wx.Panel.__init__(self, parent, -1, size = (900, 700))

        self.shapes = []

        #panel for mechanisms
        mechPnl = MechanismPanel(self)

        mechSzr = wx.BoxSizer(wx.HORIZONTAL)
        mechSzr.Add(mechPnl, 1)

        #panels for timeline
        posPnl = IdTimelinePanel(self)
        timelinePnl = TimelinePanel(self)

        mainSzr = wx.BoxSizer(wx.HORIZONTAL)
        mainSzr.Add(posPnl, 1, wx.EXPAND)
        mainSzr.Add(timelinePnl, 1, wx.EXPAND)

        selfSizer = wx.BoxSizer(wx.VERTICAL)
        selfSizer.Add(mechSzr, 0, wx.EXPAND)
        selfSizer.Add(mainSzr, 0, wx.EXPAND)
        selfSizer.Layout()
        self.SetSizer(selfSizer)

        self.dragImage = None
        self.dragShape = None
        self.hiliteShape = None

        self.SetCursor(wx.StockCursor(wx.CURSOR_ARROW))

        #self.Bind(wx.EVT_ERASE_BACKGROUND, self.OnEraseBackground)
        self.Bind(wx.EVT_PAINT, self.OnPaint)
        mechPnl.Bind(wx.EVT_LEFT_DOWN, self.OnLeftDown)
        mechPnl.Bind(wx.EVT_LEFT_UP, self.OnLeftUp)
        mechPnl.Bind(wx.EVT_MOTION, self.OnMotion)
        mechPnl.Bind(wx.EVT_LEAVE_WINDOW, self.OnLeaveWindow)
        timelinePnl.Bind(wx.EVT_LEFT_DOWN, self.OnLeftDown)
        timelinePnl.Bind(wx.EVT_LEFT_UP, self.OnLeftUp)
        timelinePnl.Bind(wx.EVT_MOTION, self.OnMotion)
        timelinePnl.Bind(wx.EVT_LEAVE_WINDOW, self.OnLeaveWindow)

    # The mouse is moving
    def OnMotion(self, evt):
        print "On motion!"

        # Ignore mouse movement if we're not dragging.
        if not self.dragShape or not evt.Dragging() or not evt.LeftIsDown():
            return

        # if we have a shape, but haven't started dragging yet
        if self.dragShape and not self.dragImage:

            # only start the drag after having moved a couple pixels
            tolerance = 2
            pt = evt.GetPosition()
            dx = abs(pt.x - self.dragStartPos.x)
            dy = abs(pt.y - self.dragStartPos.y)
            if dx <= tolerance and dy <= tolerance:
                return

            # refresh the area of the window where the shape was so it
            # will get erased.
            self.dragShape.shown = False
            self.RefreshRect(self.dragShape.GetRect(), True)
            self.Update()

            if self.dragShape.text:
                self.dragImage = wx.DragString(self.dragShape.text,
                                              wx.StockCursor(wx.CURSOR_HAND))
            else:
                self.dragImage = wx.DragImage(self.dragShape.bmp,
                                             wx.StockCursor(wx.CURSOR_HAND))

            hotspot = self.dragStartPos - self.dragShape.pos
            self.dragImage.BeginDrag(hotspot, self, self.dragShape.fullscreen)

            self.dragImage.Move(pt)
            self.dragImage.Show()

        # if we have shape and image then move it, posibly highlighting another shape.
        elif self.dragShape and self.dragImage:
            onShape = self.FindShape(evt.GetPosition())
            unhiliteOld = False
            hiliteNew = False

            # figure out what to hilite and what to unhilite
            if self.hiliteShape:
                if onShape is None or self.hiliteShape is not onShape:
                    unhiliteOld = True

            if onShape and onShape is not self.hiliteShape and onShape.shown:
                hiliteNew = True

            # if needed, hide the drag image so we can update the window
            if unhiliteOld or hiliteNew:
                self.dragImage.Hide()

            if unhiliteOld:
                dc = wx.ClientDC(self)
                self.hiliteShape.Draw(dc)
                self.hiliteShape = None

            if hiliteNew:
                dc = wx.ClientDC(self)
                self.hiliteShape = onShape
                self.hiliteShape.Draw(dc, wx.INVERT)

            # now move it and show it again if needed
            self.dragImage.Move(evt.GetPosition())
            if unhiliteOld or hiliteNew:
                self.dragImage.Show()

    # Left mouse button up.
    def OnLeftUp(self, evt):
        print "On left up!"

        if not self.dragImage or not self.dragShape:
            self.dragImage = None
            self.dragShape = None
            return

        # Hide the image, end dragging, and nuke out the drag image.
        self.dragImage.Hide()
        self.dragImage.EndDrag()
        self.dragImage = None

        if self.hiliteShape:
            self.RefreshRect(self.hiliteShape.GetRect())
            self.hiliteShape = None

        # reposition and draw the shape

        # Note by jmg 11/28/03 
        # Here's the original:
        #
        # self.dragShape.pos = self.dragShape.pos + evt.GetPosition() - self.dragStartPos
        #
        # So if there are any problems associated with this, use that as
        # a starting place in your investigation. I've tried to simulate the
        # wx.Point __add__ method here -- it won't work for tuples as we
        # have now from the various methods
        #
        # There must be a better way to do this :-)
        #

        self.dragShape.pos = (
            self.dragShape.pos[0] + evt.GetPosition()[0] - self.dragStartPos[0],
            self.dragShape.pos[1] + evt.GetPosition()[1] - self.dragStartPos[1]
            )

        self.dragShape.shown = True
        self.RefreshRect(self.dragShape.GetRect())
        self.dragShape = None

    # Fired whenever a paint event occurs
    def OnPaint(self, evt):
        print "On paint!"

        dc = wx.PaintDC(self)
        self.PrepareDC(dc)
        self.DrawShapes(dc)

    # Left mouse button is down.
    def OnLeftDown(self, evt):
        print "On left down!"

        # Did the mouse go down on one of our shapes?
        shape = self.FindShape(evt.GetPosition())

        # If a shape was 'hit', then set that as the shape we're going to
        # drag around. Get our start position. Dragging has not yet started.
        # That will happen once the mouse moves, OR the mouse is released.
        if shape:
            self.dragShape = shape
            self.dragStartPos = evt.GetPosition()

    # Go through our list of shapes and draw them in whatever place they are.
    def DrawShapes(self, dc):
        for shape in self.shapes:
            if shape.shown:
                shape.Draw(dc)

    # This is actually a sophisticated 'hit test', but in this
    # case we're also determining which shape, if any, was 'hit'.
    def FindShape(self, pt):
        for shape in self.shapes:
            if shape.HitTest(pt):
                return shape
        return None

    # Clears the background, then redraws it. If the DC is passed, then
    # we only do so in the area so designated. Otherwise, it's the whole thing.
    def OnEraseBackground(self, evt):
        dc = evt.GetDC()
        if not dc:
            dc = wx.ClientDC(self)
            rect = self.GetUpdateRegion().GetBox()
            dc.SetClippingRect(rect)
        self.TileBackground(dc)

    # tile the background bitmap
    def TileBackground(self, dc):
        sz = self.GetClientSize()
        w = self.bg_bmp.GetWidth()
        h = self.bg_bmp.GetHeight()

        x = 0

        while x < sz.width:
            y = 0

            while y < sz.height:
                dc.DrawBitmap(self.bg_bmp, x, y)
                y = y + h

            x = x + w

    # We're not doing anything here, but you might have reason to.
    # for example, if you were dragging something, you might elect to
    # 'drop it' when the cursor left the window.
    def OnLeaveWindow(self, evt):
        pass

class IdTimelinePanel(wx.Panel):
    def __init__(self, parent):
        wx.Panel.__init__(self, parent, -1, size = (400, 200))
        self.SetBackgroundColour((255, 0, 255))

        lbl1 = wx.StaticText(self, label="Position")
        lbl2 = wx.StaticText(self, label="Size")

        posPnlSzr = wx.BoxSizer(wx.VERTICAL)
        posPnlSzr.Add(lbl1, 1, wx.FIXED&wx.LEFT)
        posPnlSzr.Add(lbl2, 1, wx.FIXED&wx.LEFT)

        self.SetSizer(posPnlSzr)

        #wx.StaticText(self, -1, "This is the horizontal ID space for the timeline")
        self.SetAutoLayout(1)

class TimelinePanel(scrolled.ScrolledPanel):
    def __init__(self, parent):
        scrolled.ScrolledPanel.__init__(self, parent, -1, size = (300, 200))
        self.SetBackgroundColour((255, 0, 0))

        lbl12 = wx.StaticText(self, label="Position")
        lbl22 = wx.StaticText(self, label="Size")

        posPnlSzr2 = wx.BoxSizer(wx.VERTICAL)
        posPnlSzr2.Add(lbl12, 1, wx.GROW)
        posPnlSzr2.Add(lbl22, 1, wx.GROW)

        self.SetSizer(posPnlSzr2)

        #wx.StaticText(self, -1, "This is the horizontal scroll space for the timeline")
        self.SetAutoLayout(1)
        self.SetupScrolling(scroll_y = False)

class MechanismPanel(scrolled.ScrolledPanel):
    def __init__(self, parent):
        scrolled.ScrolledPanel.__init__(self, parent, -1, size = (400, 140))
        self.SetBackgroundColour((211, 211, 211))

        mechPnlSzr = wx.BoxSizer(wx.HORIZONTAL)

        os.chdir("./figures")
        for file in glob.glob("icon*.png"):
            print file
            imgIcon = wx.Image(file, wx.BITMAP_TYPE_PNG).ConvertToBitmap()
            staticBitmap = wx.StaticBitmap(self, -1, imgIcon, (0, 0), (50, 50))
            shape = DragShape(staticBitmap.GetBitmap())
            shape.pos = (50, 50)
            shape.fullscreen = True
            parent.shapes.append(shape)
            #mechPnlSzr.Add(staticBitmap, 0, wx.FIXED, border = 20)

        self.SetSizer(mechPnlSzr)

        self.SetAutoLayout(1)
        self.SetupScrolling(scroll_y = False)

app = wx.App(False)
frame = MainWindow(None, "Trading Client")
app.MainLoop() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-26T17:54:52.283

您的所有类都没有实现 wx.PyDropTarget 接口或包含对拖放所需的 wx.FileDataObject() 的引用。

我想你想看看演示中的 DragAndDrop 示例，而不仅仅是 DragImage。

# ios - iOS 6.1 Safari 没有设置 Accept-Encoding

> ID：15102901
> 
> 赞同：2
> 
> 时间：2013-02-27T02:03:49.880
> 
> 标签：ios, http, safari, nginx, http-headers

我的测试用例只是添加到头部的 HTML 脚本标记，但基本上 iOS Safari 上的每个 HTTP 请求都没有设置 Accept-Encoding 头部。

[我使用Paros](http://www.parosproxy.org/)跟踪 HTTP 请求，并验证该请求确实通过以下标头发送到我们的 Nginx 服务器。

HTTP 请求：

```
GET http://www.website.com/8EF47773B9E25308C1F124FF701E607A.cache.js HTTP/1.1
Host: www.website.com
Referer: http://www.website.com
Proxy-Connection: keep-alive
Accept: */*
Accept-Language: en-us
Connection: keep-alive
User-Agent: Mozilla/5.0 (iPad; CPU OS 6_1 like Mac OS X) AppleWebKit/536.26 (KHTML, like Gecko) Mobile/10B141 
```

HTTP 响应：

```
HTTP/1.1 200 OK
Accept-Ranges: bytes
Cache-Control: max-age=2592000
Cache-Control: private
Content-Type: application/x-javascript
Date: Tue, 26 Feb 2013 22:56:39 GMT
Expires: Thu, 28 Mar 2013 22:56:39 GMT
Last-Modified: Mon, 25 Feb 2013 17:54:27 GMT
Server: nginx/1.2.3
Content-Length: 1042909
Connection: keep-alive 
```

只需添加“Accept-Encoding: gzip,deflate”和上面完全相同的请求标头（使用 Curl）就会返回一个 gzipped 响应。

这也只发生在设备上；使用 iOS 模拟器将添加正确的 Accept-Encoding 标头。

这是 iOS Safari 的预期行为吗？我已经在互联网上搜索了更多关于这方面的信息，但结果很少。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-03T15:40:56.543

Paros 代理丢弃所有 Accept-Encoding 标头。

# jquery - 在提交按钮上使用 preventDefault

> ID：15102902
> 
> 赞同：6
> 
> 时间：2013-02-27T02:03:52.470
> 
> 标签：jquery, events, submit, preventdefault

我正在尝试解决 jQuery 教科书提供的问题。它读起来像这样

“即使没有输入数据也会提交数据，要解决此问题，您必须停止提交按钮的默认操作。为此，请在文件末尾的 if 语句中编写 event 对象的 preventDefault 方法，如图10-6

注意* 这是 10-6 中的代码，当我按照本书的建议将其标记到代码的末尾时，这对我不起作用。

```
if (isValid == false) { event.preventDefault(); } 
```

请记住，用于事件对象的名称必须与用于提交事件处理程序的参数名称相同。

注意*提交事件处理程序看起来像这样

```
 $("#email_form").submit(
    function() {
        var isValid = true;

                      // the script proceeds to validate each text field accordingly                    bla bla bla 
```

现在，用空字段再次测试。这应该在除邮政编码字段之外的每个字段的右侧显示“此字段是必需的”。

我的问题是我的 preventDefault 不起作用，无论我尝试什么，它仍然会提交。

解释图 10-6 的文本中的一个有趣注释可能会有所帮助，但我不太明白，如下所示。

“这里你看到一个最终的 if 语句，如果 isValid 变量为 false，则为 true，这意味着一个或多个字段无效。在这种情况下，执行 event 对象的 preventDefault 方法。这个对象被传递给函数提交事件处理程序作为参数存储在此处理程序的第一行的事件变量中。如果在将一个或多个字段提交到服务器时不使用 preventDefault 方法，则表单将提交到服务器，因为这是它的默认操作。”

任何见解将不胜感激。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-27T02:17:44.573

`event`变量是必须传递给您的处理程序的东西。您的匿名函数`function(){}`需要接受`event`变量：

```
$("#email_form").submit(function(event){
    var isValid = true;

    // do all your validation here
    // potentially if one of the fields is empty 
    // isValid will be set to false

    if (!isValid) {
        event.preventDefault();
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T20:08:17.520

我今天在课堂上了解到，答案实际上是这样的。

```
$("#email_form").submit(
function(event) {
    var isValid = true; 
```

在验证结束时需要我的功能（如下）......

```
if (isValid == false) { event.preventDefault(); } 
```

与我的提交按钮的事件处理程序中的事件进行交互。

# php - 来自另一个页面的 renderPartial 时 YII 搜索不起作用

> ID：15102903
> 
> 赞同：1
> 
> 时间：2013-02-27T02:04:02.493
> 
> 标签：php, search, filter, yii, cgridview

我在使用 Yii 搜索时遇到问题，直接访问页面（学生/管理员）时它工作正常，但是如果我从另一个页面（学生/注册）渲染部分相同页面，Yii 过滤器不会搜索结果..

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T08:22:50.793

您必须`actionReg`在`StudentsController`. 模型的这些值将被用于`CGridView`设置过滤器。

这可能是这样的：

```
public function actionReg($id) {
  $model = Students::model();
  $model->attributes = $_GET['Students'];

  $this->render('reg', array(
           'model' => $model,
        ));
} 
```

如果您在模型中有自定义值，则还必须设置它们，例如

```
 $model->calculatedAverage = $_GET['Students']['calculatedAverage']; 
```

然后在你的`RegView`你可以将这个模型传递给表。

要了解其工作原理，请尝试了解该`adminAction`方法中发生的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T02:09:16.677

如果我做对了，如果你没有正确使用它，renderPartial 不会处理内联 js。尝试做：

```
$this->renderPartial('view',array(...),false,true); 
```

它应该有帮助。最后一个参数 ( **true** ) 告诉 Yii 处理输出。

# ios - UILabel 在 iOS 模拟器中显示，但在设备上运行 .IPA 应用程序后不显示

> ID：15102904
> 
> 赞同：-1
> 
> 时间：2013-02-27T02:04:05.547
> 
> 标签：ios, xcode, xcode4, ios-simulator, uilabel

“iLabel”在模拟器中显示，但一旦归档并运行 IPA 文件，它就无法显示。我尝试清理代码，但没有做任何事情。iLabel 的想法是在 UIIndicator 动画时显示，当然当指示器消失时也会消失。

```
- (void)viewDidLoad
{
  [super viewDidLoad];

  [[self myTableView] setDelegate:self];
  [[self myTableView] setDataSource:self];
  array = [[NSMutableArray alloc] init];

  [self startActivity];
}

-(void)startActivity
{
  indicator.hidden=NO;
  [indicator startAnimating];

  [self uploadData];
  NSLog(@"VIEWDIDLOAD-INDICATOR-TURNING-ON: %@", indicator);
}

-(void)uploadData
{
  NSLog(@"Uploading...");

  [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(checkForReachability) name:kReachabilityChangedNotification object:nil];

  Reachability *reachability = [Reachability reachabilityForInternetConnection];
  [reachability startNotifier];

  NetworkStatus remoteHostStatus = [reachability currentReachabilityStatus];

  if(remoteHostStatus == NotReachable)
  {
    UIAlertView *alert = [[UIAlertView alloc]
                          initWithTitle: @"Oops..."
                          message: @"Network connection lost."
                          delegate: nil
                          cancelButtonTitle:@"OK"
                          otherButtonTitles:nil];
    [alert show];    }

  else if (remoteHostStatus == ReachableViaWiFi)
  {
    iLabel.text = @"Please be patient...";
  }
}

- (void) connectionDidFinishLoading:(NSURLConnection *)connection
{
  [self setString];

  NSDictionary *dic = [NSJSONSerialization JSONObjectWithData:responseData options:0 error:nil];
  NSString *string1 = [dic objectForKey:@"name"];
  NSString *string7 = [dic objectForKey:@"review_count"];
  NSString *string3 = [dic objectForKey:@"display_phone"];
  NSDictionary *location = [dic objectForKey:@"location"];
  NSArray *array2 = [location objectForKey:@"display_address"];
  NSDictionary *coordinate = [location objectForKey:@"coordinate"];

  lat = [coordinate objectForKey:@"latitude"];
  lon = [coordinate objectForKey:@"longitude"];
  mURL = [dic objectForKey:@"mobile_url"];

  NSString *string4 = [array2 objectAtIndex:0];
  NSString *string5 = [array2 objectAtIndex:1];
  NSString *img2String = [dic objectForKey:@"image_url"];

for (NSDictionary *diction in dic)
{
    NSString *string6 = [NSString stringWithFormat:@"Yelp Rating:                   "];
    NSString *string8 = [NSString stringWithFormat:@"Based on %@ Review(s)", string7];

    [array addObject:string1];
    [array addObject:string6];
    [array addObject:string8];
    [array addObject:string3];
    [array addObject:string4];
    [array addObject:string5];

    UIImage *image = [UIImage imageWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:img2String]]];
    imageView.image = image;
  }

  for (NSDictionary *diction in coordinate)
  {
    [array addObject:lat];
    [array addObject:lon];
  }

  [[self myTableView] reloadData];

  [indicator stopAnimating];
  indicator.hidden=YES;
  [indicator removeFromSuperview];

  iLabel.text = @"";
  [iLabel removeFromSuperview];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T03:01:59.850

从您发布的代码来看，如果无法访问远程主机，则您永远不会设置`iLabel`. *因此，如果标签未显示在设备上，请在设置标签时*检查远程主机是否可以从设备访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T04:03:17.610

不知道为什么我没有早点抓住它。问题如下：

```
 if(remoteHostStatus == NotReachable)
    {
      UIAlertView *alert = [[UIAlertView alloc]
                          initWithTitle: @"Oops..."
                          message: @"Network connection lost."
                          delegate: nil
                          cancelButtonTitle:@"OK"
                          otherButtonTitles:nil];
      [alert show];    }

    else if (remoteHostStatus == ReachableViaWiFi)
    {
      ilabel.text = @"Please be patient...";
    } 
```

我将底部更改为：

```
 else
    {
      ilabel.text = @"Please be patient...";
    } 
```

...现在一切都很好。

# android - 使用 GSON 解析 JSON 中的意外类型

> ID：15102905
> 
> 赞同：1
> 
> 时间：2013-02-27T02:04:12.417
> 
> 标签：android, json, gson

我有几类需要在 android 应用程序中解析的对象，多亏了 GSON，我已经很容易处理这些对象。然而，我刚刚遇到了一个需要更复杂的事情的场景，尽管我已经完成了大量的阅读和实验，但我一直无法解决。

这是我用来解析的类之一的精简示例：

```
public class MyClass
{
    public String id;
    public List<String> details;
    public Locations locations;
    public List<Timing> timing;
    public Image image;

    public class Locations {
       public List<Location> destinations;
       public List<Location> past;
    }

    public class Timing {
       public String start;
       public String end;
    }
} 
```

然后我有另一个包含这个类的类：

```
public class ResultObject
{
    //These represent the possible return values for a result object.
    public Location location;
    public List<MyClass> myClass;
    public List<OtherClass> otherClass;
} 
```

这些是我的类的非常简单的版本，无论如何 ResultObject 的 JSON 版本来自服务器，并且很容易解析，如下所示：

```
Type mapType = new TypeToken<ResultObject>(){}.getType();
result = gson.fromJson(httpResult.stream, mapType); 
```

这很好用，我整天都得到很好的解析对象。当我在任何类层次结构中的任何字段上收到意外类型时，就会出现问题，这会导致整个 JSON 解析失败，因此结果为空。例如，'locations.past' 最终可能会以字符串数组的形式返回，而不是像它们应该的那样完整的 JSON 对象，并且不仅该数组列表为空，整个 ResultObject 将因解析错误而被没收。我真的很想解决这个问题，我怀疑这在于使用自定义反序列化器，但没有例子甚至涉及这样的层次结构。

如果有人在解析这种大小的对象时对如何处理意外类型有很好的了解，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T03:31:29.010

我建议摆脱内部类定义。如果存在一些命名空间问题，则使用嵌套的静态类。使用 Gson 进行序列化和反序列化会更简单。

# css - CSS 背景图片 css/html

> ID：15102906
> 
> 赞同：2
> 
> 时间：2013-02-27T02:04:12.473
> 
> 标签：css, html, dreamweaver, mozilla

我正在为一位朋友开发一个网站，但我们的初稿遇到了麻烦。基本上我只是想得到一个适合的背景图像。当我在 Dreamweaver 中测试代码时，它按我想要的方式工作，但是当我在实时站点上测试它时，背景图像不会出现在 Firefox 中，尽管当我在自己的计算机上测试时它会出现，有什么帮助吗？此外，该网站似乎在 IE 中运行良好。

现场直播：**www.crookednosebeer.com**

CSS：

（我认为问题出现在 css 中，当我试图 root img 时）

```
body{
height: 100%; 
width: 100%;
background-color: #b2b2b2;
background: url(../images/trial2.gif) no-repeat center center fixed;
  -webkit-background-size: cover;
  -moz-background-size: cover;
  -o-background-size: cover;
  background-size: cover;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T02:11:15.070

正如@bfavaretto 评论的那样，您为要在 HTML 文件中使用的 CSS 文件设置了本地系统路径。您必须将其替换为相对于您的 WWW 根目录的 URI，以便远程客户端也可以读取它。将您的 HEAD 部分更改为：

```
<head>
<title>Crooked Nose</title>
<link href="css/style.css" rel="stylesheet" type="text/css"/>
<link rel="shortcut icon" href="" />
</head> 
```

（在 Chrome 中测试）

干杯!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T02:17:34.470

“链接rel”区域中css的url..尝试使用链接rel="stylesheet" href="../css/style.css" type="text/css"..ahm 在chrome中尝试..

快乐的编码...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T02:06:01.707

尝试引用网址

```
background: url("../images/trial2.gif") no-repeat center center fixed; 
```

# javascript - 如何让 KnockOutJS 识别具有数据绑定属性的动态 html？

> ID：15102907
> 
> 赞同：1
> 
> 时间：2013-02-27T02:04:34.807
> 
> 标签：javascript, knockout.js

我有一个应用程序，我在其中将内容动态加载到页面的某些部分。有时代码具有`data-bind`属性，这些属性似乎被 KnockOutJS 忽略了。

HTML：

```
<div data-bind="html: code">
    this text is replaced by the JavaScript
</div> 
```

```
function AppView() {
    var self = this;

    // This sets the code 
    self.code = ko.observable('<div>this shouldnt show</div>');
    self.stuff = ko.observable('this should show');
}

var app = new AppView();
ko.applyBindings(app);

// Later we override the code.  We're setting an observable, so the app should notice.
app.code('<div data-bind="text: stuff">this shouldnt show either</div>'); 
```

本质上，我需要初始化处理程序。我是否需要删除所有绑定并重新申请？

## [小提琴](http://jsfiddle.net/HJ5tg/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-08T10:23:43.487

这可以通过 knockuot 模板绑定来完成。

[在这个小提琴中](http://jsfiddle.net/MaurizioPiccini/QfLxM/13/)看到一个工作示例

在您的情况下，您必须执行以下操作：

```
<div data-bind="template: 'myTemplate'>
    this text is replaced by the JavaScript
</div>

<script id="myTemplate" type="text/html">
   <div data-bind="text: stuff">this shouldnt show either</div>
</script> 
```

检查它是否有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T04:50:45.150

无需删除所有绑定并重新申请。

您可以更改事件处理程序中的值

```
<div data-bind="html: code>
this text is replaced by the JavaScript
</div>
<span data-bind="click: changeClicked">Change</span> 
```

//模型内部

```
 self.changeClicked = function(){
 self.code('<div data-bind="text: stuff">this shouldnt show either</div>');
 } 
```

//您也可以使用视图模型实例从视图模型访问

[小提琴](http://jsfiddle.net/naveenkumarm/F68Sg/)

# c++ - enable_if boost::fusion 可调用

> ID：15102912
> 
> 赞同：0
> 
> 时间：2013-02-27T02:05:07.253
> 
> 标签：c++, boost-fusion, enable-if

有没有办法专门为 boost::fusion 可调用对象使用 enable_if？

```
template<typename F>
void do_something(F f, enable_if< is_fusion_callable_object<F> >::type * = 0)
{
    // how to define the "is_fusion_callable_object<> ?
} 
```

这里F是一个融合“融合函数”可以取任意序列作为参数

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-02T20:52:19.793

我尝试了类似的东西，直到现在没有成功。我的第一次成功尝试是通过 boost 预处理器 makros 为不同数量的模板参数创建不同的模板。在你的例子中，这将是

```
template <typename P1, ......>
do_something(boost::fusion::vector<P1, ....> const& v) 
```

由于我必须使用 VC10，我无法使用带有可变参数模板的解决方案。也许这可以进一步帮助您，即使这个问题已经很老了。

# ruby-on-rails - 更改heroku数据库上的属性值

> ID：15102913
> 
> 赞同：1
> 
> 时间：2013-02-27T02:05:08.330
> 
> 标签：ruby-on-rails, ruby-on-rails-3, heroku

在我的 Rails 应用程序中，我有一个属性“标题”，我想将数据库中“标题”的所有实例更改为“苹果派”，例如“苹果蛋糕”。有没有办法做到这一点，而不是像我有这么多一样单独修改和改变每一个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T02:13:09.327

您可以进行 rake 任务来进行更改：

```
namespace :update do

  desc "Update title"
  task :title_fix => :environment do
    MyClass.where(:title => 'old title').each do |t|
      t.update_attributes(title: 'new title')
    end
  end
end 
```

然后在命令行运行：

```
rake update:fix_title 
```

或者，如果你很勇敢，你可以在 rails 控制台中完成所有操作，例如：

```
MyClass.where(:title => 'old title').each { |t| t.update_attributes(title: 'new title') } 
```

但我讨厌以非记录方式进行数据库更改......

# c# - 防止调整列大小超出水平边界

> ID：15102916
> 
> 赞同：1
> 
> 时间：2013-02-27T02:05:20.970
> 
> 标签：c#, listview, resize, horizontal-scrolling, multiple-columns

在 C# Windows 应用程序中，我在表单上有一个 ListView。

当表单加载时，它会向 ListView 和一些项目添加 5 列。我以某种方式加载项目，以便所有列都适合 ListView 的边界。

这很好，但我需要它们始终保持在界限内，但同时让用户能够调整它们的大小。

问题是，每当我通过将列分隔条向右拖动来使列变大时，该列就会消失，我需要使用水平滚动条去找到它并将其带回边界内。

我想要发生的是，每当我使列变大时，通过将列分隔符向右拖动，此操作永远不会将右侧的其他列推到 ListView 的边界之外。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-31T17:48:08.600

我通过使用 DataGridView 而不是 ListView 解决了这个问题。使用 DataGridView，您可以设置要填充的列，使其永远不会水平滚动。

# c# - TableLayoutPanel 在列内放置标签控件

> ID：15102918
> 
> 赞同：2
> 
> 时间：2013-02-27T02:05:27.370
> 
> 标签：c#, winforms, tablelayoutpanel

有了 TableLayoutPanel 的所有属性，我不知道为什么这不能简单。

我有一个包含两列的 tableLayoutPanel。我试图在第一列中放置一个标签以将其用作标题。我想将它放置在相对于列的特定坐标中，但我不知道如何使用边距或填充属性。一定有比这更简单的方法。我曾尝试使用锚点和停靠属性，但无济于事。

有人可以告诉我如何做到这一点的例子吗？为什么我不能将标签拖到我想要的位置？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-27T08:07:27.237

在`TableLayoutPanel`任何单元格中只能放置一个控件，该控件将放置在单元格的左上角。如您所见，其中一个选项是设置控件的`Margin`属性。

另一种选择是将 a`Panel`放在单元格内，将其停靠以填充单元格，并将其他控件放置在面板内。这样您就可以完全控制控件的位置。

这增加了控件的层次结构级别，但这不是问题，除非它达到大约 10 级嵌套。那时您可能会开始遇到调整表单大小的缓慢，甚至是[一些奇怪的行为](http://support.microsoft.com/kb/953934)。

# java - 泛型和参数化构造函数

> ID：15102925
> 
> 赞同：1
> 
> 时间：2013-02-27T02:05:59.080
> 
> 标签：java

这是上一个关于参数化方法的[问题的扩展。](https://stackoverflow.com/questions/12130940/parameterized-methods-in-generic-class-type)我正在读同一本书。在上一题的例子之后，作者改进了

```
BinaryTree<T extends Comparable<? super T>> 
```

通过添加以下构造函数再次上课（这次他真的做到了）

```
public  <E extends T> BinaryTree(E[] items) {
    for(E item : items) {
        add(item);
} 
```

本着上一个问题的精神，我尝试了这个构造函数：

```
public BinaryTree(T[] items) {
    for(T item : items) {
        add(item);
    }
} 
```

并且示例代码无法使用我的构造函数编译：

```
public static void main(String[] args) {
    Manager[] managers = { new Manager("Jane", 1), new Manager("Joe", 3), new Manager("Freda", 3), new Manager("Bert", 2), new Manager("Ann", 2), new Manager("Dave", 2) };
    BinaryTree<Person> people = new BinaryTree<>(managers);
} 
```

更改上一个问题中的 add() 方法和更改此构造函数之间有什么区别？为什么我不能在构造函数中传递 T 的子类型？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T02:14:07.920

对于第二个构造函数，当编译器看到

```
new BinaryTree<>(managers) 
```

它需要推断`T`. `<>`在这种情况下，推理基于`managers`: `T[]=Manager[] => T=Manager`。

因此，表达式产生 a `BinaryTree<Manager>`，它不能分配给`BinaryTree<Person>`。

两种解决方法：

```
new BinaryTree<Person>(managers);

new BinaryTree((Person[])managers); 
```

* * *

对于第一个构造函数

```
<E extends T> BinaryTree(E[] items) 
```

我们现在有两件事要推断，`E`并且`T`, 在表达式中`new BinaryTree<>(managers)`

现在`E=Manager`推断；但是`T`还没有推断出来。然后编译器查看目标类型`Binary<Person>`，这有助于推断`T=Person`。

* * *

Java 类型推断非常混乱。为什么程序员会关心学习我刚刚描述的内容？教训是，当有疑问时，明确地提供类型参数。

在这两个构造函数之间，我肯定会选择`BinaryTree(T[] items)`. 该`E`版本只是更复杂而没有好处（尽管对于这个特定示例它恰好工作得更好）

# jquery - jquery/mysql 如果选中则从选择框中删除项目

> ID：15102927
> 
> 赞同：0
> 
> 时间：2013-02-27T02:05:59.747
> 
> 标签：jquery, mysql

设想：

当用户单击添加按钮时，我无法填写新的选择框。如果我选择一个用户并单击添加按钮，它会自动从选择框中删除。

我有两个表：用户课程

```
<select name="user" id="user">
    <option value="1">John</option>
    <option value="2">Doe</option>
    <option value="3">Fred</option>
    <option value="4">Mann</option> 
</select> 
```

**培训班**

数学

如果我点击添加：

约翰·多伊

选择框保持不变

```
<option value="3">Fred</option>
<option value="4">Mann</option> 
```

会计

如果我点击添加：

约翰·弗雷德

选择框保留

```
<option value="2">Doe</option>
<option value="4">Mann</option> 
```

我试过这个查询

```
SELECT `courses`.`userNumber` FROM `courses` 
left join user ON user.`userNumber` = `courses`.`userNumber`
WHERE `SchedcourseID` = 2 
```

所有在课程上注册的用户的结果。

我需要所有未注册此课程的用户。

# c# - 调用对象数组时出现空引用异常

> ID：15102929
> 
> 赞同：0
> 
> 时间：2013-02-27T02:06:06.247
> 
> 标签：c#, nullreferenceexception

我试图早些时候获得一些帮助，但我认为我没有提供足够的信息，尽管我很感激所有的建议。

目标只是将 Object Room 的新实例添加到数组并打印到列表框。当用户尝试输入已经存在的房间名称时，它应该简单地显示在数组中已经存在的房间的规范中。

我不断收到空引用异常。

这是我的代码：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace Room_Class
{
    public partial class Form1 : Form
    {
        Room[] roomArray = new Room[20];
        int count = 0;

        public Form1()
        {
            InitializeComponent();
        }

        private void btnAddRm_Click(object sender, EventArgs e)
        {
            double length, width, height;
            if (VerifyRoomName() == true)
            {

                if (txtRmLen.Text == "" || txtRmWid.Text == "" || txtRmHt.Text == "")
                {
                    for (int i = 0; i < roomArray.Length; i++)
                    {
                        if (txtRmName.Text == roomArray[i].getRoomName())
                        {
                            txtRmName.Text = roomArray[i].getRoomName();
                            txtRmLen.Text = roomArray[i].getLength().ToString();
                            txtRmHt.Text = roomArray[i].getCeilingHeight().ToString();
                            txtRmWid.Text = roomArray[i].getWidth().ToString();
                        }
                        else
                        {
                            roomArray[count] = new Room(roomName);
                            count++;
                        }
                    }
                }
                else
                {
                    try
                    {
                        length = double.Parse(txtRmLen.Text);
                        width = double.Parse(txtRmWid.Text);
                        height = double.Parse(txtRmHt.Text);
                        for (int i = 0; i < roomArray.Length; i++)
                        {
                            if (txtRmName.Text == roomArray[i].getRoomName())
                            {
                                txtRmName.Text = roomArray[i].getRoomName();
                                txtRmLen.Text = roomArray[i].getLength().ToString();
                                txtRmHt.Text = roomArray[i].getCeilingHeight().ToString();
                                txtRmWid.Text = roomArray[i].getWidth().ToString();
                            }
                            else
                            {
                                roomArray[count] = new Room(roomName, length, width, height);
                                count++;
                            }
                        }
                    }
                    catch (Exception ex)
                    {
                        MessageBox.Show(ex.Message + "\n\nPlease Enter Valid Values", "Error!");
                    }
                }  
                PrintList();
            }

        }

        private void PrintList()
        {
            double paintTotal = 0, feetTotal = 0;
            string RoomName;
            lstRoomList.Items.Clear();
            for (int i = 0; i < count; i++)
            {
                RoomName = roomArray[i].getRoomName() + "\t" + roomArray[i].SquareFeet().ToString("n1") + "\t" + roomArray[i].GallonsPaint().ToString("n1");
                lstRoomList.Items.Add(RoomName);
                paintTotal += roomArray[i].GallonsPaint();
                feetTotal += roomArray[i].SquareFeet();
                lblTtlGallons.Text = paintTotal.ToString("n1");
                lblTtlSqFt.Text = feetTotal.ToString("n1");
            }
        }

        private bool VerifyRoomName()
        {
            if (roomName == "")
            {
                MessageBox.Show("Please Enter a Room Name", "Error!");
                return false;
            }
            else
                return true;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T02:08:32.667

你的代码应该是

```
if (roomArray[i] != null) 
```

每当您创建一个数组时，您必须先初始化它的各个项目，然后才能访问它们。

```
Room[] roomArray = new Room[20];

roomArray[0] = new Room(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-27T02:22:28.353

因为 Room[] 中的 Room 元素我们没有被初始化。

尝试

```
public Form1()
{
    InitializeComponent();
    for(int i = 0; i < roomyArray.Length; i++) roomArray[i] = new Room();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T02:29:54.457

正如其他答案所说，您需要在开始使用它之前初始化数组。当你写：

```
Room[] roomArray = new Room[20]; 
```

你告诉计算机要做的是为你保留足够的内存来引用 20 个类型的对象`Room`。提出的其他解决方案很好，但如果您想要性能，请尝试以下操作：

根据[this](https://stackoverflow.com/questions/1897555/what-is-the-equivalent-of-memset-in-c) SO answer，使用以下功能将比迄今为止提供的其他解决方案性能更高。这也有来自[这篇博文的支持证据。](http://techmikael.blogspot.co.uk/2009/12/filling-array-with-default-value.html)

*注意：我已转换为使用泛型*

```
 /// <summary>
    /// Fills an array with a default value
    /// </summary>
    /// <typeparam name="T"></typeparam>
    /// <param name="array">The array to fill with a default value</param>
    /// <param name="value">The default value</param>
    public static void MemSet<T>(T[] array, T value)
    {
        if (array == null)
        {
            throw new ArgumentNullException("array");
        }

        int block = 32, index = 0;
        int length = Math.Min(block, array.Length);

        //Fill the initial array
        while (index < length)
        {
            array[index++] = value;
        }

        length = array.Length;
        while (index < length)
        {
            Buffer.BlockCopy(array, 0, array, index, Math.Min(block, length - index));
            index += block;
            block *= 2;
        }
    } 
```

**用法**

```
Memset<Room>(roomArray, new Room()); 
```

# mysql - 无脂肪框架 sql 清理

> ID：15102930
> 
> 赞同：3
> 
> 时间：2013-02-27T02:06:17.600
> 
> 标签：mysql, syntax, fat-free-framework

所以我正在尝试学习 f3，而数据库语法却让我望而却步。

查看[文档](https://github.com/bcosca/fatfree#databases)，您似乎传递了一个 sql 字符串和要替换的值数组。但我似乎无法让它工作。我试过只使用一个参数，使用数组，不使用数组等。最终我需要在查询中替换 5+ 个变量，所以我真的需要了解它是如何工作的。提前谢谢。

```
$db = new DB\SQL(
    $f3->get('db'), 
    $f3->get('dbuser'), 
    $f3->get('dbpass')
);
$x = $db->exec(
    "SELECT user_id, email, token FROM `user_primary` WHERE `first_name` = ':first' AND `last_name` = ':last';",
    array(
        ':first' => $f3->get('PARAMS.first'),
        ':last' => $f3->get('PARAMS.last')
    )
);
echo '<pre>'.print_r($x, true).'</pre>'; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T02:15:11.913

我犯的错误是引号。

`select * from table where name = ':name'`

是不正确的。你需要删除引号

`select * from table where name = :name`

所以如果你想使用多个只是数组嵌套它们

```
$db->exec(
    `select * from table where first_name = :fname and last_name = :lname`,
    array(
        ':fname' => 'xero',
        ':lname' => 'harrison'
    )
); 
```

也许这会帮助别人。

# android - 涉及声音池的应用程序的 BpMemoryHeap 问题

> ID：15102931
> 
> 赞同：2
> 
> 时间：2013-02-27T02:06:30.327
> 
> 标签：android, soundpool

我创建了一个包含大约 600 个小 ogg 文件的应用程序。总共大约 15MB。每个文件都会有 avg. 6秒的声音。这不是游戏应用程序，而是儿童学习应用程序。

我尝试在媒体播放器上加载声音。它工作正常一次，当连续播放时，我最终没有声音。它是空白的。

所以我尝试了声音池选项。只有在加载到 soundpool 加载程序后才会播放声音。因此我尝试在应用程序的开头加载声音。所以加载声音大约需要 30 秒，之后会显示主屏幕（我在后台使用异步加载声音，进度条显示在前面）。

当我添加一个超过 450 个声音时，此设置适用于大约 450 个 ogg 文件我在加载几个声音时出现堆错误，并且应用程序强制关闭并出现以下错误：

```
 02-27 07:13:02.614: I/Choreographer(27172): Skipped 35 frames!  The application may be doing too much work on its main thread.
 02-27 07:13:11.012: E/IMemory(27172): binder=0x56f0c430 transaction failed fd=-2147483647, size=0, err=-2147483646 (Unknown error 2147483646)
 02-27 07:13:11.012: E/IMemory(27172): cannot dup fd=-2147483647, size=0, err=-2147483646 (Bad file number)
 02-27 07:13:11.012: E/IMemory(27172): cannot map BpMemoryHeap (binder=0x56f0c430), size=0, fd=-1 (Bad file number)
 02-27 07:13:11.020: W/dalvikvm(27172): threadid=37: thread exiting with uncaught exception (group=0x40d75930)
 02-27 07:13:11.153: E/IMemory(27172): cannot dup fd=818, size=1048576, err=0 (Too many open files)
 02-27 07:13:11.153: E/IMemory(27172): cannot map BpMemoryHeap (binder=0x56f09e80), size=1048576, fd=-1 (Bad file number)
 02-27 07:13:11.403: E/IMemory(27172): cannot dup fd=972, size=1048576, err=0 (Too many open files)
 02-27 07:13:11.403: E/IMemory(27172): cannot map BpMemoryHeap (binder=0x56f09988), size=1048576, fd=-1 (Bad file number)
 02-27 07:13:11.450: E/IMemory(27172): cannot dup fd=873, size=1048576, err=0 (Too many open files)
 02-27 07:13:11.450: E/IMemory(27172): cannot map BpMemoryHeap (binder=0x56f0a500), size=1048576, fd=-1 (Bad file number)
 02-27 07:13:11.520: E/IMemory(27172): cannot dup fd=954, size=1048576, err=0 (Too many open files)
 02-27 07:13:11.520: E/IMemory(27172): cannot map BpMemoryHeap (binder=0x56efbde8), size=1048576, fd=-1 (Bad file number)
 02-27 07:13:11.614: W/dalvikvm(27172): threadid=35: thread exiting with uncaught exception (group=0x40d75930)
 02-27 07:13:11.677: E/IMemory(27172): cannot dup fd=903, size=1048576, err=0 (Too many open files)
 02-27 07:13:11.677: E/IMemory(27172): cannot map BpMemoryHeap (binder=0x56f09b30), size=1048576, fd=-1 (Bad file number)
 02-27 07:13:11.716: E/IMemory(27172): cannot dup fd=978, size=1048576, err=0 (Too many open files)
 02-27 07:13:11.716: E/IMemory(27172): cannot map BpMemoryHeap (binder=0x5d99add0), size=1048576, fd=-1 (Bad file number) 
 02-27 07:13:11.747: E/IMemory(27172): cannot dup fd=941, size=1048576, err=0 (Too many open files)
 02-27 07:13:11.747: E/IMemory(27172): cannot map BpMemoryHeap (binder=0x56efb710), size=1048576, fd=-1 (Bad file number)
 02-27 07:13:11.809: E/IMemory(27172): cannot dup fd=991, size=1048576, err=0 (Too many open files)
 02-27 07:13:11.809: E/IMemory(27172): cannot map BpMemoryHeap (binder=0x56efaa90), size=1048576, fd=-1 (Bad file number) 
```

我该如何解决这个问题？Heap 上的大部分问题是关于数据库游标而不是 soundpool。

如果这无法解决，当我有 600 个声音要加载时，使用 soundpool 的解决方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T02:11:57.350

有了这么多文件，您将想要延迟加载它们并转储一段时间未使用的文件。

Android 中有一个[LruCache](https://developer.android.com/reference/android/util/LruCache.html)可以帮助你。

# c++ - 在另一个模板类型中使用模板类型的参数化子类型

> ID：15102934
> 
> 赞同：0
> 
> 时间：2013-02-27T02:06:44.680
> 
> 标签：c++, templates

是否有可能实现以下行为？

```
template<typename T>
struct X {
    template<const bool Condition>
    struct Y;

    template<>
    struct Y<true> {
        typedef T Z;
    };
};

template<typename T>
struct A {
    typedef typename T::Y<true>::Z B;  // Error
};

int main() {
    X<float>::Y<true>::Z value = 5.0f;  // OK

    A<X<float>>::B value2 = 5.0f;  // Desired behaviour

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T06:23:51.593

尝试

```
typedef typename T::template Y<true>::Z B; 
```

它适用于 gcc 4.7.2

尽管 gcc 抱怨结构内部的完全专业化，但我不得不添加一个虚拟参数。

# c# - 访问 webbrowser 工具中的元素

> ID：15102939
> 
> 赞同：1
> 
> 时间：2013-02-27T02:07:02.330
> 
> 标签：c#

我正在开发一个 Windows 窗体应用程序，我想知道如何访问 webbrowser 中的元素。例如说有一个像这样的元素`<button class="btn btn_Roll">Roll Dice</button>`我如何获得那个elemenet并perdorm一个点击动作？

我知道你可以像这样通过 id 访问元素

```
HtmlDocument document = webBrowser1.Document;
HtmlElement example = document.GetElementById("some_id_here"); 
```

上课是怎么做的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T02:08:59.720

尝试：

```
var element = this.objWebBrowser.Document.GetElementsByTagName("button").
                  Cast<HtmlElement>().Where(e => 
                                            e.GetAttribute("class")).
                                            FirstOrDefault();

if(element == null) return;

element.InvokeMember("click"); 
```

# ruby-on-rails - 找不到 Rails 控制器路径

> ID：15102941
> 
> 赞同：1
> 
> 时间：2013-02-27T02:07:14.473
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2

我认为我的表单标签：

```
<%= form_tag view_all_rater_path, :method => 'get' do %>
  <p>
    <%= text_field_tag :search, params[:search], :placeholder => 'Search by Set # or date' %></br>
    <%= submit_tag "Search", :class => "btn btn-link", :name => nil %>
  </p>
<% end %> 
```

我的控制器动作：

```
 def view_all
    if params[:search]
      @ratings = RatingSet.find(:all, :conditions => ['id = ? or rating_date like ?', "%#{params[:search]}%"])
    else
      @ratings = RatingSet.all
    end
  end 
```

我的路线：

```
 resources :rater, :only => [:index] do
    collection do
      get :rater_csv
      get :view_all
    end
  end 
```

当我导航到 /rater/view_all 时，我得到一个`No route matches {:action=>"view_all", :controller=>"rater"}`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T02:19:37.780

这里的问题将是您的路线定义中的单数与复数。

您的路线提供以下输出`rake routes`：

```
rater_csv_rater_index GET    /rater/rater_csv(.:format)                                  rater#rater_csv
 view_all_rater_index GET    /rater/view_all(.:format)                                   rater#view_all
          rater_index GET    /rater(.:format)                                            rater#index 
```

因为您已经`resources`使用单数名称 ( ) 定义了复数资源 ( `rater`)。

如果您将其设为单一资源 ( `resource`)，则路线将自行清理。

并且永远记得使用`rake routes`！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T02:13:40.933

您是否尝试在控制台上“rake routes”以查看您的路线结构？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-12T12:27:43.353

2 各位：确保您呼叫正确的请求，`GET`或`POST`根据需要。

# python - 如何更新 Python？

> ID：15102943
> 
> 赞同：141
> 
> 时间：2013-02-27T02:07:40.610
> 
> 标签：python, python-2.7, installation, upgrade, windows-7-x64

我从 2012 年初安装了 2.7 版。我无法就是否应该在安装最新版本之前完全卸载并擦除此版本达成共识。

“软”——删除旧版本？硬删除/擦拭旧版本？安装在上面？

我在某处看到了一个特殊的安装/升级过程，它使用 Python 安装的“分段”方法，将不同的版本分开和分开，但可以正常工作。不确定这是否是标准的，事实上的方式。

我还想知道 Revo 是否过于热心，可能会导致清除仍然需要的残留物（如环境/PATH 变量）出现问题。

（Win7 x64，32 位 Python）

* * *

## 回答 #1

> 赞同：108
> 
> 时间：2013-07-30T18:20:15.977

**更新**：2018-07-06

这篇文章现在已经有将近 5 年的历史了！[Python-2.7 将在 2020 年停止接收来自 python.org 的官方更新](https://www.python.org/dev/peps/pep-0373/)。此外，[Python-3.7 已发布](https://www.python.org/downloads/release/python-370/)。查看[Python-Future](http://python-future.org/)，了解如何使您的 Python-2 代码与 Python-3 兼容。为了更新 conda，文档现在建议`conda update --all`在您的每个 conda 环境中使用来更新该版本的所有包和 Python 可执行文件。此外，由于他们将名称更改为 Anaconda，我不知道 Windows 注册表项是否仍然相同。

**更新**：2017-03-24

自 2015 年 6 月以来，Python(x,y) 没有任何更新，所以我认为可以安全地假设它已被放弃。

**更新**：2016-11-11

正如[下面的@cxw 评论](https://stackoverflow.com/questions/15102943/how-to-update-python/17954487#comment68062745_17954487)，这些答案适用于相同的位版本，并且我的位版本是指 64 位与 32 位。例如，这些答案将适用于从 64 位 Python-2.7.10 更新到 64 位 Python-2.7.11，*即*：**相同**的位版本。虽然可以同时安装两个不同位版本的 Python，但这需要一些技巧，所以我将把这个练习留给读者。如果您不想破解，我建议如果切换位版本，请先删除另一个位版本。

**更新**：2016-05-16

*   通过禁用更改 Windows和注册表的选项， [Anaconda](https://docs.continuum.io/anaconda/install#windows-install)和[MiniConda](http://conda.pydata.org/docs/install/quick.html#windows-miniconda-install)可以与现有的 Python 安装一起使用。提取后，在您的或从 PyPI 安装 conda中`PATH`创建一个符号链接。然后在Anaconda/Miniconda 根 bin 文件夹中创建另一个符号链接。现在 Anaconda/Miniconda 就像 Ruby RVM 一样。只需使用启用 Anaconda/Miniconda。`conda``bin``conda-activate``activate``conda-activate root`
*   不再开发或维护可移植 Python。

# TL;博士

*   使用[Anaconda 或 miniconda](https://www.anaconda.com/download/)，然后执行`conda update --all`以保持每个 conda 环境更新，
*   **[与官方 Python](https://www.python.org/)相同的*主要*版本**（*例如*2.7.5），只需安装旧版本（*例如*2.7.4），
*   **[官方 Python](https://www.python.org/)的不同*主要*版本**（*例如*3.3），与旧版本并排安装，将路径/关联设置为指向主导（*例如*2.7），指向其他的快捷方式（*例如*在 BASH 中`$ ln /c/Python33/python.exe python3`）。

### 答案取决于：

1.  如果 OP 有 2.7.x 并且想要安装更新版本的 2.7.x，那么

    *   如果使用[Python 官方网站](http://www.python.org/download/)的[MSI 安装程序](http://en.wikipedia.org/wiki/Windows_Installer)，只需安装旧版本，安装程序会发出警告，它将删除并替换旧版本；在“控制面板”中查看“已安装程序”前后确认旧版本已被新版本替换；较新版本的 2.7.x 是向后兼容的，因此这是完全安全的，因此恕我直言，永远不需要 2.7.x 的多个版本。
    *   如果从源代码构建，那么您可能应该在一个新的、干净的目录中构建，然后在新构建通过所有测试并且您确信它已成功构建后将您的路径指向新构建，但您可能希望保留旧的构建，因为从源代码构建可能偶尔会出现问题。请参阅我[的使用 SDK 7.0 在 Windows 7 上构建 Python x64 的指南](http://poquitopicante.blogspot.com/2015/03/building-python-x64-on-windows-7-with.html)。
    *   如果从[Python(x,y)](https://code.google.com/p/pythonxy/)等发行版安装，请查看他们的网站。**[Python(x,y)](http://python-xy.github.io/)已被放弃。** ~~我相信可以在 Python(x,y) 中使用他们的包管理器处理更新，但[更新也包含在他们的网站上](https://code.google.com/p/pythonxy/wiki/Downloads#Updates)。我找不到具体的参考资料，所以也许其他人可以谈论这个。类似于 ActiveState 并且可能是 Enthought，Python (x,y) 明确指出它与 Python 的其他安装不兼容：~~

        > 建议在安装 Python(x,y) 之前卸载任何其他 Python 发行版

    *   [Enthought Canopy](https://www.enthought.com/downloads/)使用 MSI 并将分别安装到`Program Files\Enthought`或`home\AppData\Local\Enthought\Canopy\App`为所有用户或每个用户安装。使用内置更新工具更新较新的安装。请参阅他们的[文档](http://docs.enthought.com/canopy/quick-start/install_windows.html)。
    *   [ActiveState](http://www.activestate.com/activepython/downloads)还使用 MSI，因此可以在较旧的安装之上安装较新的安装。查看他们的[安装说明](http://docs.activestate.com/activepython/2.7/installnotes.html#msi)。

        > 其他 Python 2.7 安装 在 Windows 上，ActivePython 2.7 不能与其他 Python 2.7 安装共存（例如，从 python.org 构建的 Python 2.7）。在安装 ActivePython 2.7 之前卸载任何其他 Python 2.7 安装。

    *   [Sage](http://www.sagemath.org/download-windows.html)建议您将其安装到虚拟机中，并提供可用于此目的的 Oracle VirtualBox 映像文件。通过发出命令在内部处理升级`sage -upgrade`。
    *   [Anaconda](https://store.continuum.io/cshop/anaconda/)可以[使用以下`conda`命令](http://docs.continuum.io/anaconda/install.html#updating-from-older-anaconda-versions)进行更新：

        ```
        conda update --all 
        ```

        Anaconda/Miniconda 允许用户创建*环境*来管理多个 Python 版本，包括 Python-2.6、2.7、3.3、3.4 和 3.5。根 Anaconda/Miniconda 安装当前基于 Python-2.7 或 Python-3.5。

        ~~Anaconda 可能会破坏任何其他 Python 安装。安装使用 MSI 安装程序。~~ [**更新**：2016-05-16] *Anaconda 和 Miniconda 现在使用`.exe`安装程序并提供禁用 Windows`PATH`和注册表更改的选项。*

        因此 Anaconda/Miniconda 可以在不中断现有 Python 安装的情况下安装，具体取决于它的安装方式和安装期间选择的选项。如果使用安装程序并且*没有*`.exe`禁用更改 Windows`PATH`和注册表的选项，则任何以前的 Python 安装*都将被禁用*，但只需卸载 Anaconda/Miniconda 安装即可恢复原始 Python 安装，可能 Windows 注册表项除外。**`Python\PythonCore`**

         **无论安装选项如何，Anaconda/Miniconda 都会进行以下注册表编辑：`HKCU\Software\Python\ContinuumAnalytics\`使用以下键：`Help`、`InstallPath`和- 官方 Python 也注册这些键，但`Modules`在. 还为 Anaconda\Miniconda 注册了卸载信息。除非您在安装过程中选择“使用 Windows 注册”选项，否则它不会创建，因此 Visual Studio 的 Python 工具等集成不会自动看到 Anaconda/Miniconda。如果启用了注册 Anaconda/Miniconda 的选项*，*那么我认为您现有的 Python Windows 注册表项将被更改，并且卸载可能不会恢复它们。`PythonPath``Python\PythonCore``PythonCore`** 
    ****   [我认为WinPython](https://winpython.github.io/)更新可以通过[WinPython 控制面板](https://github.com/winpython/winpython/wiki/Winpython-Control-Panel)来处理。*   [PortablePython](http://portablepython.com/)**不再被**开发。~~它没有更新方法。可能更新可以解压缩到一个新目录，然后`App\lib\site-packages`可以`App\Scripts`复制到新安装，但如果这不起作用，则可能需要重新安装所有软件包。用于`pip list`查看安装了哪些软件包及其版本。有些是由 PortablePython 安装的。`easy_install pip`如果未安装 pip，请使用它来安装。~~***
****   如果 OP 有 2.7.x 并且想要安装不同的版本，*例如*<=2.6.x 或 >=3.xx，那么并排安装不同的版本就可以了。您必须选择要与文件关联的 Python 版本（如果有）以及您希望在路径上使用的 Python 版本，但如果使用[BASH](http://tiswww.case.edu/php/chet/bash/bashtop.html)`*.py`，您应该能够设置具有不同路径的 shell 。AFAIK 2.7.x 与 2.6.x 向后兼容，因此恕我直言并排安装不是必需的，但是 Python-3.xx 不向后兼容，所以我的建议是将 Python-2.7 放在您的路径上并拥有Python-3 通过创建一个名为 python3 的可执行文件的快捷方式成为可选版本（这是 Linux 上的常见设置）。Windows 上的官方 Python 默认安装路径是

    *   C:\Python33 for 3.3.x (最新 2013-07-29)
    *   C:\Python32 用于 3.2.x
    *   ＆C。
    *   C:\Python27 用于 2.7.x（最新 2013-07-29）
    *   C:\Python26 用于 2.6.x
    *   ＆C。*   如果 OP 不更新 Python，而只是更新包，他们可能希望研究[virtualenv](https://pypi.python.org/pypi/virtualenv)以将特定于其开发项目的不同版本的包分开。[Pip](https://pypi.python.org/pypi/pip)也是更新软件包的好工具。如果软件包使用二进制安装程序，我通常会在安装新软件包之前卸载旧软件包。*** 

 **我希望这可以消除任何困惑。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-27T02:34:53.133

最好的解决方案是在多个路径中安装不同的 Python 版本。

例如。C:\Python27 用于 2.7，C:\Python33 用于 3.3。

阅读本文了解更多信息：[如何在 Windows 上运行多个 Python 版本](https://stackoverflow.com/questions/4583367/how-to-run-multiple-python-version-on-windows)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-05-31T03:48:19.267

*   官方 Python .msi 安装程序旨在替换：

    *   任何以前的微版本（在*xyz*中，*z*是“微”），因为它们保证向后兼容和二进制兼容
    *   任何微型版本的“快照”（从源代码构建）安装
*   快照安装程序旨在用较低的微版本替换任何快照。

（参见[2.x 的负责代码](https://github.com/python/cpython/blob/2.7/Tools/msi/msi.py#L274)，[对于 3.x](https://github.com/python/cpython/blob/master/Tools/msi/msi.props#L82)）

任何其他版本不一定兼容，因此与现有版本一起安装。如果您想卸载旧版本，则需要手动执行此操作。并卸载您拥有的任何第 3 方模块：

*   如果您从`bdist_wininst`包 (Windows `.exe`) 中安装了任何模块，请在卸载版本之前将其卸载，否则如果具有自定义逻辑，卸载程序可能无法正常工作
*   `setuptools`与/`pip`一起安装的模块`Lib\site-packages`可以在之后删除
*   您为每个用户安装的软件包（如果有）驻留在`%APPDATA%/Python/PythonXY/site-packages`其中并且同样可以删除

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-27T02:17:17.180

我一直只是在上面安装新版本，从来没有任何问题。请确保您的路径已更新以指向新版本。**

# asp.net-mvc-scaffolding - T4Scaffolding 访问泛型集合 T 属性

> ID：15102945
> 
> 赞同：0
> 
> 时间：2013-02-27T02:07:46.163
> 
> 标签：asp.net-mvc-scaffolding, t4scaffolding

给定以下课程：

```
public class Post
{
    public Post()
    {
        Tags = new List<Tag>();
    }

    public int Id { get; set; }

    // ...more properties...

    public virtual ICollection<Tag> Tags { get; set; }
} 
```

和我的 ps1 入口代码：

```
$model = Get-ProjectType $EntityName -Project $Project

Add-ProjectItemViaTemplate $controllerName -Template ControllerTemplate `
    -Model @{ Namespace = $namespace; T = [MarshalByRefObject]$model; } `
    -SuccessMessage "Added ControllerTemplate output at {0}" `
    -TemplateFolders $TemplateFolders -Project $Project -CodeLanguage $CodeLanguage -Force:$Force 
```

其中 $model 是 Post 类。

我将如何访问“标签”对象属性？

我有“标签”ICollection 作为 EnvDTE.CodeTypeRef。

我注意到大多数 mvcscaffolding 都使用 Get-RelatedEntities 来展开泛型 - 这是访问 Tag 属性的唯一方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T11:12:09.943

看这个视频的第一部分。它将向您展示如何从 Visual Studio 中的类中收集属性。

编辑：

如果您没有时间观看视频...只需在包管理器控制台中使用此代码段即可。

(Get-ProjectType 标记).Children | Where-Object{$ *.Kind -eq 4} | ForEach{$* }

我认为使用powershell查找所有属性然后将其发送到T4更容易，在T4中使用C#来收集信息是一项艰巨的工作。

[Visual Studio 中的 T4 脚手架](http://www.youtube.com/watch?v=6hrD5MAXuIg&feature=share&list=UUaCFN2DfemnttPoGH3LLDiQ)

问候乌夫

# c++ - 加载无序地图

> ID：15102953
> 
> 赞同：0
> 
> 时间：2013-02-27T02:08:41.877
> 
> 标签：c++, hashmap, fstream

我有一个包含很多单词的文件，我正在尝试读取和存储。我正在尝试创建排序地图。

我在程序的开头声明了一个结构，它应该用于存储每个条目的信息。

```
typedef struct dictionary{ std::string word; unsigned char * hash; char *hex; } a_dictionary;
unordered_map<char * , a_dictionary * > Mymap; 
```

这是我为保存单词而执行的代码，但由于某种原因 myMap 没有正确编写

```
if (myfile.is_open())
        {
            LARGE_INTEGER freq, before, after;
            QueryPerformanceFrequency(&freq);
            QueryPerformanceCounter(&before);
            while ( myfile.good() )
            {
                getline (myfile,line);

                a_dictionary * dic = new dictionary(); // after each line create
                dic->word = line;

                const char * c= line.c_str();
                sha1::calc(c,line.length(), hash);//encrypts the word

                dic->hash = hash;

                sha1::toHexString(hash,hex_str);//encrypts the word
                dic->hex = hex_str;

                Mymap.insert(std::make_pair(hex_str, dic));
            }
            QueryPerformanceCounter(&after);
            float fElapsed = static_cast<float>(after.QuadPart - before.QuadPart) / freq.QuadPart;
            cout<<"Finished in "<<fElapsed; 
```

我没有得到任何编译错误，当我在 while 循环中输出结构的变量时，它们会出现正常......但我的 unordered_map 永远不会被填充。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T02:40:14.253

正如我在上面评论的那样，看起来在循环的每次迭代中都重复使用了相同的*哈希*和*hex_str*缓冲区，因此您每次都使用相同的键（指针地址被用作键，而不是字符串内容）

在不知道*sha1::calc*和*sha1::hash*的签名或者你如何声明*hash*和*hex_str*的情况下，我假设你按原样正确使用它们（我猜它们是 c-arrays并且函数采用指向缓冲区的指针并且不会以空值终止输出），我要做的最小更改如下所示：

**定义：**

```
// no typedef necessary for struct in C++
struct dictionary {
    std::string word;
    std::vector<unsigned char> hash;
    // string instead of vector so it's hashable
    std::string hex;
};
std::unordered_map<std::string, dictionary*> Mymap; 
```

**执行：**

```
if (myfile.is_open())
{
    LARGE_INTEGER freq, before, after;
    QueryPerformanceFrequency(&freq);
    QueryPerformanceCounter(&before);
    while ( myfile.good() )
    {
        getline (myfile,line);

        dictionary * dic = new dictionary(); // after each line create
        dic->word = line;

        const char * c= line.c_str();

        dic->hash.resize(SIZE_OF_HASH_BUFFER);
        sha1::calc(c, line.length(), &(dic->hash[0]));//encrypts the word

        dic->hex.resize(SIZE_OF_HEX_STR_BUFFER);
        sha1::toHexString(&(dic->hash[0]), &(dic->hex[0]));//encrypts the word

        if(!(Mymap.insert(std::make_pair(dic->hex, dic)).second))
        {
            // handle collision somehow...
        }
    }
    QueryPerformanceCounter(&after);
    float fElapsed = static_cast<float>(after.QuadPart - before.QuadPart) / freq.QuadPart;
    cout<<"Finished in "<<fElapsed; 
```

根据您使用*Mymap*的方式，您可能希望将字典对象包装在智能指针中，或者只是让它们按值传递......如果没有更多上下文，真的不能说。现在，您肯定需要确保在完成*Mymap*的内容后释放与每个字典关联的内存......如果这是您真正想要的，而不是使用智能指针自动为您完成，您可以，但是要小心清理。

# python - Evernote XML 上的 Python LXML 解析错误

> ID：15102954
> 
> 赞同：2
> 
> 时间：2013-02-27T02:08:44.060
> 
> 标签：python, xml, lxml, evernote

我正在尝试在 Python 2.7 中使用 lxml 解析[Evernote 标记语言](http://dev.evernote.com/start/core/enml.php)（ENML）。ENML 是 XHTML 的超集。

```
from StringIO import StringIO
import lxml.etree as etree

if __name__ == '__main__':
    xml_str = StringIO('<?xml version="1.0" encoding="UTF-8"?>\r\n<!DOCTYPE en-note SYSTEM "http://xml.evernote.com/pub/enml2.dtd">\r\n\r\n<en-note style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">\nA really simple example. &nbsp;Another sentence.\n</en-note>')
    tree = etree.parse(xml_str) 
```

上面的代码出错了：

```
XMLSyntaxError: Entity 'nbsp' not defined, line 5, column 32 
```

如何成功解析 ENML？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T02:10:55.223

`&nbsp;`由 HTML 解析器而非 XML 解析器理解：

```
from StringIO import StringIO
import lxml.html as LH
if __name__ == '__main__':
    xml_str = StringIO('<?xml version="1.0" encoding="UTF-8"?>\r\n<!DOCTYPE en-note SYSTEM "http://xml.evernote.com/pub/enml2.dtd">\r\n\r\n<en-note style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">\nA really simple example. &nbsp;Another sentence.\n</en-note>')
    tree = LH.parse(xml_str)
    print(LH.tostring(tree)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T04:08:24.347

您可以尝试将实体名称替换为其数值。

[http://www.w3schools.com/tags/ref_entities.asp](http://www.w3schools.com/tags/ref_entities.asp)

# javascript - 模态不从顶部滑动

> ID：15102955
> 
> 赞同：0
> 
> 时间：2013-02-27T02:08:45.617
> 
> 标签：javascript, jquery, twitter-bootstrap, modal-dialog

我在我的网站上实现了引导模型.....模型工作正常，但模型并没有像实际的引导模型一样从顶部滑动......如何修复它......

实际型号

[http://jsfiddle.net/nJ6Mw/1/](http://jsfiddle.net/nJ6Mw/1/)

模型不从顶部滑动

[http://jsfiddle.net/y88WX/embedded/result/](http://jsfiddle.net/y88WX/embedded/result/)

```
<div id="example" class="modal hide fade in" style="display: block;" aria-hidden="false">
    <div class="modal-header"> <a class="close" data-dismiss="modal">×</a>
        <h3>This is a Modal Heading</h3>
    </div>
    <div class="modal-body">
        <h4>Text in a modal</h4>
        <p>You can add some text here.</p>
    </div>
    <div class="modal-footer"> <a href="#" class="btn btn-success">Call to action</a>
        <a href="#" class="btn" data-dismiss="modal">Close</a>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T04:05:53.863

你有太多的资源在你试图开始工作的小提琴中发生冲突，这个小提琴有效，所以如果你可以将此代码放入你试图加载它的页面中并且它不起作用，您知道问题不在于您的引导程序，另外，请发送指向您遇到问题的页面的链接，请不要发送附有许多不同资源的小提琴。

您需要通过 javascript 为模式定义选项：

```
$(function() {
    $('#event-modal').modal({
        backdrop: true;
    });
}); 
```

将站点中的所有 css 和链接/html 直接放入小提琴中并不容易让某人跳入并为您调试。

[http://jsfiddle.net/sfWBT/1/](http://jsfiddle.net/sfWBT/1/)

# android - Android 显示“除非您更新 google play 服务，否则此应用将无法运行”，但我的 Google play 服务是最新版本

> ID：15102961
> 
> 赞同：0
> 
> 时间：2013-02-27T02:09:24.473
> 
> 标签：android, google-play

我正在尝试使用 google map API v2 制作应用程序。当我完成我的应用程序后，我在运行 Android 4.1 的廉价 android Q88 平板电脑上运行它。但是，它显示“除非您更新您的 google play 服务，否则此应用将无法运行”和“更新”按钮。我试过了，但 Google play 说 Google play 服务与我的平板电脑不兼容。然后我发现有最新版本的google play服务（2.0.12（543433-10）——我写这篇文章时的最新版本）。不明白为什么我的应用坚持要更新google play服务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T02:52:08.223

我手机上的play store的版本是3.10.14，所以你落后了。

尝试进入应用设置，并清除 Google Play 商店和 Google 服务框架的数据。这可以触发更新检查。

# java - 如何在 Android 的 jar 文件中运行类活动？

> ID：15102962
> 
> 赞同：1
> 
> 时间：2013-02-27T02:09:32.467
> 
> 标签：java, android, android-layout, android-intent, android-emulator

我是Android新手，遇到了一些问题

我有 2 个包裹：

1.  fr.keuse.rightsalert.activity
2.  com.example.process

我将第一个包导出到 jar 文件 a 中，然后作为库添加到第二个包中。我喜欢这样：

1.  我将 jar 文件复制到第二个包中的 /libs
2.  我添加到构建路径

第二个包导入是这样的：

```
import fr.keuse.rightsalert.activity.ApplistActivity; 
```

这是我在 jar 文件中调用类时的问题代码（抛出`Nullpoiterexception`

```
private OnItemClickListener listlistener = new OnItemClickListener() {

    @Override
    public void onItemClick(@SuppressWarnings("rawtypes") AdapterView parent, View arg1, int position,long arg3) {
    //Toast.makeText(getApplicationContext(), "You have clicked on" + position +((Order)parent.getItemAtPosition(position)).getOrderName(), Toast.LENGTH_SHORT).show();

         //------------show new intent when clicked-----------------    
        switch (position){
            case 0:     
                **new fr.keuse.rightsalert.activity.ApplistActivity();
                Intent i = new Intent(System_app.this,ApplistActivity.class);
                startActivity(i);**
                break;

            case 1:
                Toast.makeText(getApplicationContext(), "You have clicked on number 2", Toast.LENGTH_SHORT).show();
                break;
        }   
    }
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T06:56:39.933

不要这样做：

```
new fr.keuse.rightsalert.activity.ApplistActivity(); 
```

您不会实例化这样的活动。开始一项活动所需要做的就是：

```
Intent i = new Intent(System_app.this,ApplistActivity.class);
startActivity(i); 
```

Android 将为您实例化活动。

确保您**没有**为`ApplistActivity`. 确保你有一个方法`onCreate()`在`ApplistActivity`. 确保您的 AndroidManifest.xml 中列出了此活动。

# java - 扫描仪 nextLine() 似乎没有改变字符串

> ID：15102963
> 
> 赞同：0
> 
> 时间：2013-02-27T02:09:37.720
> 
> 标签：java, java.util.scanner

所以我的问题是我正在尝试制作一个非常简单的程序来刷新我糟糕的编码技能，但是我遇到了一个我不明白的问题。该程序应该接受答案“是”并打印“耶”，只是为了检查它是否有效，但它不起作用。所以我想知道我做错了什么。

```
public class main {
    /**
     * @param args
     */
    public static void main(String[] args) {
        int playerTroops, computerTroops;
        String teamName, computerName = "Orcs", answer;
        Scanner listener = new Scanner(System.in);
        System.out
                .println("Welcome to the Battle Grounds, where you are responsible for winning a war \nAre you ready? \nYes or No");
        answer = listener.nextLine();

        if (answer == "Yes")
            System.out.println("Yayy");
        else
            System.out.println("Why");
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T02:11:14.710

对于 Java 字符串比较，您必须使用 .equals 运算符：

```
if(answer.equals("Yes")) 
```

如果你想忽略大小写，

```
if(answer.equalsIgnoreCase("Yes")) 
```

在 Java 中，运算符`==`检查引用是否相等。在正常情况下，*相等*的字符串不会自动具有相同的引用（IE：它们是不同的对象。这种区别在 Java 中非常重要）。

# mysql - Ruby 1.9.3 上 Rails 2.3 的编码错误

> ID：15102966
> 
> 赞同：2
> 
> 时间：2013-02-27T02:09:51.090
> 
> 标签：mysql, ruby-on-rails, ruby, unicode

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-02T20:13:42.003

I finally figured out what my issue was. While my databases were encoded with `utf8`, the app with the original `mysql` gem was injecting `latin1` text into the `utf8` tables.

What threw me off was that the output from the mysql comand line client looked correct. It is important to verify that your terminal, the database fields *and* the MySQL client are all running in `utf8`.

MySQL's client runs in `latin1` by default. You can discover what it is running in by issuing this query:

```
show variables like 'char%'; 
```

If setup properly for `utf8` you should see:

```
+--------------------------+----------------------------+
| Variable_name            | Value                      |
+--------------------------+----------------------------+
| character_set_client     | utf8                       |
| character_set_connection | utf8                       |
| character_set_database   | utf8                       |
| character_set_filesystem | binary                     |
| character_set_results    | utf8                       |
| character_set_server     | utf8                       |
| character_set_system     | utf8                       |
| character_sets_dir       | /usr/share/mysql/charsets/ |
+--------------------------+----------------------------+ 
```

If these don't look correct, make sure the following is set in the `[client]` section of your `my.cnf` config file:

```
default-character-set = utf8 
```

Add add the following to the `[mysqld]` section:

```
# use utf8 by default
character-set-server=utf8
collation-server=utf8_general_ci 
```

Make sure to restart the mysql daemon before relaunching the client and then verify.

NOTE: This doesn't change the charset or collation of existing databases, just ensures that any new databases created will default into `utf8` and that the client will display in `utf8`.

After I did this I saw characters in the mysql client that matched what I was getting from the `mysql2` gem. I was also able to verify that this content was `latin1` by switching to "`encoding: latin1`" temporarily in my `database.conf`.

One extremely handy query to find issues is using char length to find the rows with multi-byte characters:

```
SELECT id, name FROM items WHERE LENGTH(name) != CHAR_LENGTH(name); 
```

There are a lot of scripts out there to convert `latin1` contents to `utf8`, but what worked best for me was dumping all of the databases as latin1 and stuffing the contents back in as `utf8`:

```
mysqldump -u root -p --opt --default-character-set=latin1 --skip-set-charset  DBNAME > DBNAME.sql

mysql -u root -p --default-character-set=utf8  DBNAME < DBNAME.sql 
```

I backed up my primary db first, then dumped into a test database and verified like crazy before rolling over to the corrected DB.

My understanding is that MySQL's translation can leave some things to be desired with certain more complex characters but since most of my multibyte chars are fairly common things (accent marks, quotes, etc), this worked great for me.

Some resources that proved invaluable in sorting all of this out:

*   [Derek Sivers guide on transforming MySQL data latin1 in utf8 -> utf8](http://www.oreillynet.com/lpt/wlg/9022)
*   [Blue Box article on MySQL character set hell](http://www.bluebox.net/about/blog/2009/07/mysql_encoding/)
*   [Simple table conversion instructions on Stack Overlow](https://stackoverflow.com/questions/346092/utf8-mysql-problems-on-rails-encoding-issues-with-utf8-general-ci)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T03:15:57.493

You say it all looks OK in the command line client, but perhaps your Terminal's character encoding isn't set to show UTF8? To check in OS X Terminal, click Terminal > Preferences > Settings > Advanced > Character Encoding. Also, check using a graphical tool like MySQL Query Browser at [http://dev.mysql.com/downloads/gui-tools/5.0.html](http://dev.mysql.com/downloads/gui-tools/5.0.html).

# c - 如何从简单的 C 程序中清除屏幕？

> ID：15102976
> 
> 赞同：2
> 
> 时间：2013-02-27T02:11:13.507
> 
> 标签：c, coding-style, header

```
#include <stdio.h>
#include <cstdlib>

rec();

main() 
{
    int a, fact;
    char q, n, y;
    printf("\nEnter any number ");
    scanf("%d", & a);
    fact = rec(a);
    printf("Factorial value = %d\n", fact);
    printf("do you want to exit.....(y/n):");
    scanf("%s" ,&q);
    if (q == 'n')
    {
        system("cls");
        main();
    }
    else
        return 0;
}

rec(int x) 
{
    int f;
    if (x == 1) 
        return 1;
    else 
        f = x * rec(x - 1);

    return f;
} 
```

我正在使用代码块，但我不知道如何清除屏幕。我搜索然后`system("cls");`在头文件中找到`#include<cstdlib>`，但它显示错误`cstdlib: no such file of directory`。我该怎么办 ？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-27T02:13:26.433

改变

```
#include <cstdlib> 
```

到

```
#include <stdlib.h> 
```

`cstdlib`是**C++ 头文件**，因此**在 C 中将不可用**。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-27T05:27:18.303

清除屏幕超出了普通 C 程序的权限范围。这取决于操作系统。

对于 Windows，您应该查看[conio](/questions/tagged/conio "显示标记为“conio”的问题")。

对于 unix，请查看[curses](/questions/tagged/curses "显示标记为“诅咒”的问题")或[termios](/questions/tagged/termios "显示标记为“termios”的问题")。

`system()`总是启动一个子shell，它可能会对父程序的环境产生任何影响，也可能不会。您*确实*需要*系统调用*，但*不需要*调用`system()`。

* * *

我并不总是知道这一点。我曾经（很久以前）在 comp.lang.c 中建议有人应该尝试`system("exit");`关闭 DOS 程序周围的窗口。但这当然行不通。我很快被建议在发布之前测试我的代码。:)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-27T02:13:40.917

您的代码中有很多问题....

但对于具体问题，请尝试 `#include <stdlib.h>`

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-05-23T23:22:20.360

使用`#include<stdlib.h>`那是定义清除屏幕功能的地方。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-11-01T18:27:06.053

要使用`system("cls")`你需要 header `<iostream>`。这将允许所有`system()`类型执行。不确定它是否是 C++ 头文件，但它适用于我使用的编译器。

# ruby-on-rails - 映射到自定义路由

> ID：15102979
> 
> 赞同：0
> 
> 时间：2013-02-27T02:11:18.357
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

到目前为止，我的路线是这样的：（**出于学习目的，我很想将它与嵌套资源技术一起使用**，但如果您认为这会变得太复杂，请随时提出任何其他路由技术方式）

```
 resources :management, only: [:show] do
    resources :report, only: [:show], controller: 'report' do
      member do
         # hmm what to write in here?!
      end
    end
  end 
```

我的目标是拥有这样的网址：

```
/managment/SOME_ID_WE_PASS_/report
/managment/1/report 
```

但是仍然无法弄清楚如何编写该路线？你能看看吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T04:03:46.770

您不需要嵌套资源。

```
resources :crowd_management, only: [:show] do
  get :exec_report, on: :member
end 
```

这将产生：

`/crowd_management/:id`映射到`CrowdManagementController#show` `/crowd_management/:id/exec_report`映射到`CrowdManagementController#exec_report`

辅助方法将是：

```
crowd_management_path
exec_report_crowd_management_path 
```

您可以`rake routes`查看所有路线的详细列表。

# java - Eclipse 会编译出未使用的局部变量吗？

> ID：15102985
> 
> 赞同：4
> 
> 时间：2013-02-27T02:12:39.510
> 
> 标签：java, eclipse

考虑以下代码：

```
 public String foo(){
      String bar = doStuff();
      return bar;
 } 
```

然后后来：

```
 public void test(){
      doSomeLogicHere();
      String result = foo();
 } 
```

请注意，在`test`我得到一个`result`在函数末尾命名的字符串。Eclipse 知道这是一个未使用的变量，因为它会发出警告。我想知道的是，这些字符串是否被编译出来，就好像调用只是`foo()`没有保存返回的字符串一样？如果我在不使用它时注释掉`String result =`它，我会减少内存消耗还是因为仍然生成并返回字符串所以没关系`foo()`？

我在这样编写的应用程序中有一些调试逻辑，我想知道是否值得将所有字符串注释掉以进行发布/当我不使用它们时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T02:20:08.460

据我所知，编译器不会自动删除未使用的变量。这通常是优化器/混淆器的工作。

例如，在 Android [ProGuard](http://developer.android.com/tools/help/proguard.html)中，当您在发布模式下构建您的 android 应用程序时，它会删除所有未使用的变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T02:24:27.517

`result`赋值不会对性能产生任何影响：JVM 中的 Java JIT 在几乎所有情况下都会优化掉这些未使用的变量。

我个人修复这些事情只是为了保持我的代码干净和无警告。

# django - KeyError：访问令牌

> ID：15102986
> 
> 赞同：0
> 
> 时间：2013-02-27T02:12:42.210
> 
> 标签：django

我之前已经对此进行了测试，并且可以正常工作。现在错误又回来了，我没有对我的社交应用程序做任何更改。

这是我的代码：

```
def get_profile(request, token=None):
    args = {
        'client_id': settings.FACEBOOK_APP_ID,
        'client_secret': settings.FACEBOOK_APP_SECRET,
        'redirect_uri': request.build_absolute_uri(reverse('social:fb_callback')),
        'code': token,
    }

    target = urllib.urlopen('https://graph.facebook.com/oauth/access_token?' + urllib.urlencode(args)).read()
    response = cgi.parse_qs(target)
    access_token = response['access_token'][-1]

    return access_token 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T02:21:57.613

显然，您的请求不成功，并且响应没有访问令牌。根据 facebook 文档，当请求不好时，它会返回带有错误元素的响应，例如：

```
{
  error: {
    message: "Missing redirect_uri parameter.",
    type: "OAuthException",
    code: 191
  }
} 
```

因此，在您的功能中，您应该执行以下操作：

```
class FacebookAccessException(Exception): pass

def get_profile(request, token=None):
    ...
    response = json.loads(urllib_response)
    if 'error' in response:
        raise FacebookAccessException(response['error']['message'])

    access_token = response['access_token'][-1]
    return access_token 
```

**PS：**

尝试使用更好的 urllib。您应该尝试[Requests](http://docs.python-requests.org/en/latest/)。

# c++ - “测试发现器加载测试时发生异常”

> ID：15102991
> 
> 赞同：2
> 
> 时间：2013-02-27T02:13:18.810
> 
> 标签：c++, windows, unit-testing, visual-studio-2012, vs-unit-testing-framework

我正在编写一个桌面 Windows 8 应用程序，并且在构建项目时总是出现此错误：

> 测试发现器“MSAppContainerTestDiscoverer”加载测试时发生异常。例外：对象引用未设置为对象的实例。

我正在使用 Visual Studio 2012 中内置的 C++ 单元测试框架，该错误似乎不会影响我的构建或测试运行。我在网上没有找到任何关于此的信息；任何想法是什么导致了这个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T05:31:46.123

发布构建后，似乎 VS 将所有已安装的测试适配器（MSTest，et.all）触发到他们尝试刷新测试列表的发现阶段。如果在此过程中发生异常，则会显示上述一般错误消息。

我在 NUnit 上遇到了这个问题——但你似乎对 MSAppContainer 也有同样的看法。我不确定那是什么。它不会影响您的构建，但可能会导致找不到测试。

NUnit 适配器已修改为在发生故障时将详细信息记录到输出窗口（测试）。对于 MSTest，我认为[这个链接](http://blogs.msdn.com/b/aseemb/archive/2012/03/02/how-to-enable-ute-logs.aspx)应该有助于发现更多细节

# c - stdin 和 STDIN_FILENO 有什么区别？

> ID：15102992
> 
> 赞同：54
> 
> 时间：2013-02-27T02:13:20.527
> 
> 标签：c

`stdin`C和C之间的实际区别是什么（如果有的话）`STDIN_FILENO`？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2013-02-27T02:54:29.677

界面。就像其他人所说`stdin`的那样，是`FILE *`标准c库定义的。您可以使用一些更高级别的接口，例如`fread`、`fwrite`和`fprintf`。另一方面，`STDIN_FILENO`只是一个文件描述符（几乎可以肯定是0）。`read`这通过和之类的使用了一个稍低级别的接口`write`。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-02-27T02:16:22.113

`stdin`是一个默认的 FILE 指针，用于从标准输入中获取输入。

`STDIN_FILENO`是默认的标准输入文件描述符编号，即`0`. 它本质上是一个已定义的通用指令。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2017-10-09T02:51:46.167

从**`/usr/include/stdio.h`**,

```
/* Standard streams.  */
extern struct _IO_FILE *stdin;          /* Standard input stream.  */
extern struct _IO_FILE *stdout;         /* Standard output stream.  */
extern struct _IO_FILE *stderr;         /* Standard error output stream.  */
/* C89/C99 say they're macros.  Make them happy.  */
#define stdin stdin
#define stdout stdout
#define stderr stderr 
```

从**`/usr/include/unistd.h`**

```
/* Standard file descriptors.  */
#define STDIN_FILENO    0       /* Standard input.  */
#define STDOUT_FILENO   1       /* Standard output.  */
#define STDERR_FILENO   2       /* Standard error output.  */ 
```

例如，`stdin`（**`_IO_FILE`**定义在`/usr/include/libio.h`）是一个结构数据。`STDIN_FILENO`是一个宏常量，它指向内核使用的文件描述符。

```
#include <stdio.h>
#include <unistd.h>

void
stdin_VS_STDIN_FILENO(void)
{
    printf("stdin->_flags = %hd\n", stdin->_flags);
    printf("STDIN_FILENO  : %d\n", STDIN_FILENO);
}

int
main(void)
{
    stdin_VS_STDIN_FILENO();
    return 0;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-11-10T17:47:49.193

标准输入： 1\. 文件指针 (* FILE) 2\. 文件描述符表在进程创建时保存其地址。3\. 存在于 /usr/include/stdio.h

STDIN_FILENO : 1\. 它是一个宏 2\. 它只不过是文件描述符表的数组索引（默认为 0）。3.存在于/usr/include/unistd.h

**通过以下代码可以更清楚。**

```
#include<stdio.h> 
#include<unistd.h> 
int main() 
{    
     printf("%d\t\t%p ----- ",STDIN_FILENO,stdin);

return 0; 
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-06-30T14:26:52.200

当您使用 Linux 管道时，Linux 标头 #include "unistd.h" 中的 STDIN_FILENO 只是 0 的宏，它代表管道的标准输入。

# vb.net - VB.net 类结构

> ID：15102994
> 
> 赞同：-1
> 
> 时间：2013-02-27T02:13:21.340
> 
> 标签：vb.net

是否可以创建一个类，在其中我提供一个字符串以公开属性和方法，类似于：

```
Dim PayCheck as Double = 0
With Employee("Bob")
    .Age =  30
    .Position = Engineer
    .Department = Operations
    .Company = SPP
    .Wage = 30
    .HoursWorked = 45
    PayCheck = .CalculatePayCheck
End With 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T02:37:13.927

您可以将 Dictionary(Of Employee) 包装到一个类中，并在`CurrentEmployee`向其提供字符串时从字典中设置一个属性。

然后可以检索关于`CurrentEmployee`. 但是您必须复制员工类型中的每个属性并从 包装适当的属性`CurrentEmployee`，或者可能使用反射从 中按名称获取正确的属性`CurrentEmployee`。

这有帮助吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T18:01:19.483

是的，你应该使用一类类，它被称为集合，所以你有一些类似于......

```
Class Employee
  Property Id (a unique numeric identifier)
  Property Name
  Property Age
  Property Position
  Property Department
  Property Company
  Property Wage
  Property HoursWorked
  Property PayCheck
  Method  CalculatePayCheck()
End Class 
```

然后是您的员工集合

```
Class Employees
  Property AllEmployees as generic.list(of Employee)
  Property ThisEmployee(Id as Long) as Employee
  Property ThisEmployee(Name as string) as Employee
  Method AddEmployee(Name, Age, Position, Department, Company, Wage, HoursWorked, PayCheck)
  Method  RemoveEmployee(Name)
End Class 
```

Id 字段的想法是名称可以重复，例如可以使用两个“Steven Smith”

要访问员工，您可以像以前那样做

```
With ThisEmployee("Bob") 
```

或者

```
With ThisEmployee(6) 
```

它将提取第七名员工，因为大多数集合都是从零开始的（从零开始）

# 更新

参考上面的示例代码......是的，JoeB，因为它是一个通用集合，您可以使用 for/next 循环或 for/each 循环或 do/while 循环

就像是...

```
For Counter = 0 to Employees.Count -1
  'print name using the EMPLOYEES collection object
  Print AllEmployees(Counter).Name
  'print name using the EMPLOYEE object (single employee using the Id property)
  Print ThisEmployee(Counter).Name
Next 
```

在某些情况下，您可能需要在使用对象之前对其进行实例化......就像这样......

```
Dim TmpEmployee as Employee
For Counter = 0 to Employees.Count -1
  'get employee from collection
  TmpEmployee = AllEmployees(Counter)
  'print name using the EMPLOYEE object 
  Print TmpEmployee.Name
  TmpEmployee = nothing
Next 
```

# iphone - 在 iOS 上以编程方式获取列表 Internet 接入点

> ID：15102996
> 
> 赞同：1
> 
> 时间：2013-02-27T02:13:28.333
> 
> 标签：iphone, ios, iphone-privateapi

如何在 iOS 上以编程方式获取 Internet 接入点列表？

是否有任何公共或私有 API 可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T16:32:16.887

**此信息适用于 iOS 7，很可能不适用于较新的 iOS 版本。**

我认为拆解看两个地方是有意义的：

a) CoreTelephony 框架。

它有如下 API：

CTServerConnectionGetAttachAPNSettings

它还具有一些功能 kCTDeviceManagementAPNList 的键。我不确定它应该在哪里传递，但它看起来像是用来检索 APN 的列表

b) ManagedConfiguration 框架

您可以通过使用配置文件来设置 APN。因此，您可能可以在其中找到用于存储/检索它们的 API。

正如 AlexWien 正确指出的那样。这两件事都是私有 API。我不知道可以获取 APN 信息的公共 API。