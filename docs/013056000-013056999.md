# StackOverflow 问答 13056000-13056999

# iphone - 当 UITextField 成为第一响应者时如何使 UIScrollView 自动滚动

> ID：13056004
> 
> 赞同：39
> 
> 时间：2012-10-24T19:05:18.103
> 
> 标签：iphone, objective-c, ios, uiscrollview, uitextfield

我在[这里](https://stackoverflow.com/questions/4585718/disable-uiscrollview-scrolling-when-uitextfield-becomes-first-responder)看到过帖子建议如果子视图成为第一响应者，`UIScrollViews`应该自动滚动；`UITextField`但是，我不知道如何让它工作。

我所拥有的是一个`UIViewController`有一个`UIScrollView`并且在其中`UIScrollView`有多个文本字段。

如果需要，我知道如何手动执行此操作；但是，从我一直在阅读的内容来看，似乎可以让它自动滚动。请帮忙。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-10-24T21:10:17.133

我希望这个例子能帮助你你可以通过这段代码滚动到任何一点。

```
scrollView.contentOffset = CGPointMake(0,0); 
```

所以如果你有文本字段，它必须在视图中有一些 x,y 位置，所以你可以使用

```
CGPoint point = textfield.frame.origin ;
scrollView.contentOffset = point 
```

这应该可以解决问题，

但是如果你不知道什么时候调用这段代码，那么你应该学习**UITextFieldDelegate**方法

在您的代码中实现此方法

```
- (void)textFieldDidBeginEditing:(UITextField *)textField {
// Place Scroll Code here
} 
```

我希望你知道如何使用委托方法。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2015-10-21T10:11:36.277

我知道这个问题已经得到解答，但我想我会分享我从@Adeel 和@Basil 答案中使用的代码组合，因为它似乎在 iOS 9 上非常适合我。

```
-(void)textFieldDidBeginEditing:(UITextField *)textField {

    // Scroll to the text field so that it is
    // not hidden by the keyboard during editing.
    [scroll setContentOffset:CGPointMake(0, (textField.superview.frame.origin.y + (textField.frame.origin.y))) animated:YES];
}

-(void)textFieldDidEndEditing:(UITextField *)textField {

    // Remove any content offset from the scroll
    // view otherwise the scroll view will look odd.
    [scroll setContentOffset:CGPointMake(0, 0) animated:YES];
} 
```

我还使用了动画方法，它使过渡更加平滑。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2018-04-01T02:19:37.677

这是@Supertecnoboff 答案的Swift 4 更新。它对我很有用。

```
func textFieldDidBeginEditing(_ textField: UITextField) {
    scroll.setContentOffset(CGPoint(x: 0, y: (textField.superview?.frame.origin.y)!), animated: true)
}

func textFieldDidEndEditing(_ textField: UITextField) {
    scroll.setContentOffset(CGPoint(x: 0, y: 0), animated: true)
} 
```

确保扩展 UITextFieldDelegate 并将文本字段的委托设置为 self。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2015-04-01T17:44:29.467

您无需手动执行任何操作。这是默认行为。关于您看不到该行为的原因有两种可能性

1.  最可能的原因是键盘盖住了您的`UITextField`. 解决方法见下文
2.  另一种可能性是您`UIScrollView`在视图层次结构中的某个位置`UITextField`与`UIScrollView`您想要自动滚动的之间。这不太可能，但仍然会导致问题。

对于 #1，您希望实现类似于 Apple 建议的[移动位于键盘下方的内容](https://developer.apple.com/library/ios/documentation/StringsTextFonts/Conceptual/TextAndWebiPhoneOS/KeyboardManagement/KeyboardManagement.html#//apple_ref/doc/uid/TP40009542-CH5-SW7)。请注意，Apple 提供的代码不考虑轮换。要改进他们的代码，请查看[这篇博客文章](http://spin.atomicobject.com/2014/03/05/uiscrollview-autolayout-ios/)`keyboardDidShow`中使用窗口正确转换键盘框架的方法的实现。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2015-06-09T11:56:17.747

```
- (void)textFieldDidBeginEditing:(UITextField *)textField {
    CGRect rect = [textField bounds];
    rect = [textField convertRect:rect toView:self.scrollView];
    rect.origin.x = 0 ;
    rect.origin.y -= 60 ;
    rect.size.height = 400;

    [self.scrollView scrollRectToVisible:rect animated:YES];
} 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-07-28T06:00:02.727

您可以将此功能用于 UITextField 的 autoScroll

在`UITextFieldDelegate`

```
- (void)textFieldDidBeginEditing:(UITextField *)textField {

[self autoScrolTextField:textField onScrollView:self.scrollView];
}

- (void) autoScrolTextField: (UITextField *) textField onScrollView: (UIScrollView *) scrollView { 
 float slidePoint = 0.0f;
float keyBoard_Y_Origin = self.view.bounds.size.height - 216.0f;
float textFieldButtomPoint = textField.superview.frame.origin.y + (textField.frame.origin.y + textField.frame.size.height);

if (keyBoard_Y_Origin < textFieldButtomPoint - scrollView.contentOffset.y) {
    slidePoint = textFieldButtomPoint - keyBoard_Y_Origin + 10.0f;
    CGPoint point = CGPointMake(0.0f, slidePoint);
    scrollView.contentOffset = point;
} 
```

**编辑：**

我现在使用[IQKeyboardManager](https://github.com/hackiftekhar/IQKeyboardManager) 向这个开发者致敬，你需要试试这个。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2020-07-29T20:33:58.190

## 解决方案

```
extension UIScrollView {
    func scrollVerticallyToFirstResponderSubview(keyboardFrameHight: CGFloat) {
        guard let firstResponderSubview = findFirstResponderSubview() else { return }
        scrollVertically(toFirstResponder: firstResponderSubview,
                         keyboardFrameHight: keyboardFrameHight, animated: true)
    }

    private func scrollVertically(toFirstResponder view: UIView,
                                  keyboardFrameHight: CGFloat, animated: Bool) {
        let scrollViewVisibleRectHeight = frame.height - keyboardFrameHight
        let maxY = contentSize.height - scrollViewVisibleRectHeight
        if contentOffset.y >= maxY { return }
        var point = view.convert(view.bounds.origin, to: self)
        point.x = 0
        point.y -= scrollViewVisibleRectHeight/2
        if point.y > maxY {
            point.y = maxY
        } else if point.y < 0 {
            point.y = 0
        }
        setContentOffset(point, animated: true)
    }
}

extension UIView {
    func findFirstResponderSubview() -> UIView? { getAllSubviews().first { $0.isFirstResponder } }
    func getAllSubviews<T: UIView>() -> [T] { UIView.getAllSubviews(from: self) as [T] }
    class func getAllSubviews<T: UIView>(from parenView: UIView) -> [T] {
        parenView.subviews.flatMap { subView -> [T] in
            var result = getAllSubviews(from: subView) as [T]
            if let view = subView as? T { result.append(view) }
            return result
        }
    }
} 
```

## 完整样本

> 不要忘记在此处粘贴**解决方案代码**

```
import UIKit

class ViewController: UIViewController {

    private weak var scrollView: UIScrollView!
    private lazy var keyboard = KeyboardNotifications(notifications: [.willHide, .willShow], delegate: self)

    override func viewDidLoad() {
        super.viewDidLoad()
        let scrollView = UIScrollView()
        view.addSubview(scrollView)
        scrollView.translatesAutoresizingMaskIntoConstraints = false
        scrollView.topAnchor.constraint(equalTo: view.safeAreaLayoutGuide.topAnchor).isActive = true
        scrollView.leftAnchor.constraint(equalTo: view.safeAreaLayoutGuide.leftAnchor).isActive = true
        scrollView.rightAnchor.constraint(equalTo: view.safeAreaLayoutGuide.rightAnchor).isActive = true
        scrollView.bottomAnchor.constraint(equalTo: view.safeAreaLayoutGuide.bottomAnchor).isActive = true
        scrollView.contentSize = CGSize(width: view.frame.width, height: 1000)
        scrollView.isScrollEnabled = true
        scrollView.indicatorStyle = .default
        scrollView.backgroundColor = .yellow
        scrollView.keyboardDismissMode = .interactive
        self.scrollView = scrollView

        addTextField(y: 20)
        addTextField(y: 300)
        addTextField(y: 600)
        addTextField(y: 950)
    }

    private func addTextField(y: CGFloat) {
        let textField = UITextField()
        textField.borderStyle = .line
        scrollView.addSubview(textField)
        textField.translatesAutoresizingMaskIntoConstraints = false
        textField.topAnchor.constraint(equalTo: scrollView.topAnchor, constant: y).isActive = true
        textField.leftAnchor.constraint(equalTo: scrollView.leftAnchor, constant: 44).isActive = true
        textField.widthAnchor.constraint(equalToConstant: 120).isActive = true
        textField.heightAnchor.constraint(equalToConstant: 44).isActive = true
    }

    override func viewWillAppear(_ animated: Bool) {
        super.viewWillAppear(animated)
        keyboard.isEnabled = true
    }

    override func viewWillDisappear(_ animated: Bool) {
        super.viewWillDisappear(animated)
        keyboard.isEnabled = false
    }
}

extension ViewController: KeyboardNotificationsDelegate {
    func keyboardWillShow(notification: NSNotification) {
        guard   let userInfo = notification.userInfo as? [String: Any],
                let keyboardFrame = userInfo[UIResponder.keyboardFrameEndUserInfoKey] as? CGRect else { return }
        scrollView.contentInset.bottom = keyboardFrame.height
        scrollView.scrollVerticallyToFirstResponderSubview(keyboardFrameHight: keyboardFrame.height)
    }

    func keyboardWillHide(notification: NSNotification) {
        scrollView.contentInset.bottom = 0
    }
}

/// Solution

extension UIScrollView {
    func scrollVerticallyToFirstResponderSubview(keyboardFrameHight: CGFloat) {
        guard let firstResponderSubview = findFirstResponderSubview() else { return }
        scrollVertically(toFirstResponder: firstResponderSubview,
                         keyboardFrameHight: keyboardFrameHight, animated: true)
    }

    private func scrollVertically(toFirstResponder view: UIView,
                                  keyboardFrameHight: CGFloat, animated: Bool) {
        let scrollViewVisibleRectHeight = frame.height - keyboardFrameHight
        let maxY = contentSize.height - scrollViewVisibleRectHeight
        if contentOffset.y >= maxY { return }
        var point = view.convert(view.bounds.origin, to: self)
        point.x = 0
        point.y -= scrollViewVisibleRectHeight/2
        if point.y > maxY {
            point.y = maxY
        } else if point.y < 0 {
            point.y = 0
        }
        setContentOffset(point, animated: true)
    }
}

extension UIView {
    func findFirstResponderSubview() -> UIView? { getAllSubviews().first { $0.isFirstResponder } }
    func getAllSubviews<T: UIView>() -> [T] { UIView.getAllSubviews(from: self) as [T] }
    class func getAllSubviews<T: UIView>(from parenView: UIView) -> [T] {
        parenView.subviews.flatMap { subView -> [T] in
            var result = getAllSubviews(from: subView) as [T]
            if let view = subView as? T { result.append(view) }
            return result
        }
    }
}

// https://stackoverflow.com/a/42600092/4488252

import Foundation

protocol KeyboardNotificationsDelegate: class {
    func keyboardWillShow(notification: NSNotification)
    func keyboardWillHide(notification: NSNotification)
    func keyboardDidShow(notification: NSNotification)
    func keyboardDidHide(notification: NSNotification)
}

extension KeyboardNotificationsDelegate {
    func keyboardWillShow(notification: NSNotification) {}
    func keyboardWillHide(notification: NSNotification) {}
    func keyboardDidShow(notification: NSNotification) {}
    func keyboardDidHide(notification: NSNotification) {}
}

class KeyboardNotifications {

    fileprivate var _isEnabled: Bool
    fileprivate var notifications: [NotificationType]
    fileprivate weak var delegate: KeyboardNotificationsDelegate?
    fileprivate(set) lazy var isKeyboardShown: Bool = false

    init(notifications: [NotificationType], delegate: KeyboardNotificationsDelegate) {
        _isEnabled = false
        self.notifications = notifications
        self.delegate = delegate
    }

    deinit { if isEnabled { isEnabled = false } }
}

// MARK: - enums

extension KeyboardNotifications {

    enum NotificationType {
        case willShow, willHide, didShow, didHide

        var selector: Selector {
            switch self {
                case .willShow: return #selector(keyboardWillShow(notification:))
                case .willHide: return #selector(keyboardWillHide(notification:))
                case .didShow: return #selector(keyboardDidShow(notification:))
                case .didHide: return #selector(keyboardDidHide(notification:))
            }
        }

        var notificationName: NSNotification.Name {
            switch self {
                case .willShow: return UIResponder.keyboardWillShowNotification
                case .willHide: return UIResponder.keyboardWillHideNotification
                case .didShow: return UIResponder.keyboardDidShowNotification
                case .didHide: return UIResponder.keyboardDidHideNotification
            }
        }
    }
}

// MARK: - isEnabled

extension KeyboardNotifications {

    private func addObserver(type: NotificationType) {
        NotificationCenter.default.addObserver(self, selector: type.selector, name: type.notificationName, object: nil)
    }

    var isEnabled: Bool {
        set {
            if newValue {
                for notificaton in notifications { addObserver(type: notificaton) }
            } else {
                NotificationCenter.default.removeObserver(self)
            }
            _isEnabled = newValue
        }

        get { _isEnabled }
    }

}

// MARK: - Notification functions

extension KeyboardNotifications {

    @objc func keyboardWillShow(notification: NSNotification) {
        delegate?.keyboardWillShow(notification: notification)
        isKeyboardShown = true
    }

    @objc func keyboardWillHide(notification: NSNotification) {
        delegate?.keyboardWillHide(notification: notification)
        isKeyboardShown = false
    }

    @objc func keyboardDidShow(notification: NSNotification) {
        isKeyboardShown = true
        delegate?.keyboardDidShow(notification: notification)
    }

    @objc func keyboardDidHide(notification: NSNotification) {
        isKeyboardShown = false
        delegate?.keyboardDidHide(notification: notification)
    }
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-10-24T23:13:20.243

如果您有多个文本字段，请说`Textfield1`, `Textfield2`，`Textfield3`并且您想在 textfield2 成为第一响应者时沿 y 轴滚动滚动视图：

```
if([Textfield2 isFirstResponder])
{
    scrollView.contentOffset = CGPointMake(0,yourY);
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-01-09T06:39:25.937

正如 Michael McGuire 在上面的第 2 点中提到的，当滚动视图在文本字段和滚动视图之间包含另一个滚动视图时，系统的默认行为会出现异常。我发现当仅在文本字段*旁边*有一个滚动视图时也会发生不当行为（两者都嵌入在滚动视图中，需要调整以在文本字段想要开始编辑时将文本字段显示在视图中。这是在 iOS 12.1 上。

但我的解决方案与上述不同。在我的顶级滚动视图中，它是子类的，因此我可以添加属性和覆盖方法，我覆盖`scrollRectToVisible:animated:`. 它只是调用它`[super scrollRectToVisible:animated:]`，除非有一个属性集告诉它调整`rect`传入的值，即文本字段的框架。当属性为非零时，它是对有`UITextField`问题的引用，并且`rect`调整了 ，以便滚动视图比系统认为的更远。所以我把它放在`UIScrollView`的子类头文件中：

```
@property (nullable) UITextField *textFieldToBringIntoView; 
```

（在实现中适当`@synthesize textFieldToBringIntoView;`。然后我将此覆盖方法添加到实现中：

```
- (void)scrollRectToVisible:(CGRect)rect animated:(BOOL)how
{
    if (textFieldToBringIntoView) {
       // Do whatever mucking with `rect`'s origin needed to make it visible
       // based on context or its spatial relationship with the other
       // view that the system is getting confused by.

       textFieldToBringIntoView = nil;        // Go back to normal
       }
    [super scrollRectToVisible:rect animated:how];
} 
```

在`UITextField`for 即将开始编辑的委托方法中，只需设置`textFieldToBringIntoView`为有`textField`问题的：

```
- (BOOL)textFieldShouldBeginEditing:(UITextField *)textField
{
    // Ensure it scrolls into view so that keyboard doesn't obscure it
    // The system is about to call |scrollRectIntoView:| for the scrolling
    // superview, but the system doesn't get things right in certain cases.

    UIScrollView *parent = (UIScrollView *)textField.superview;
    // (or figure out the parent UIScrollView some other way)

    // Tell the override to do something special just once
    // based on this text field's position in its parent's scroll view.
    parent.textFieldToBringIntoView = textField;
    // The override function will set this back to nil

    return(YES);
} 
```

它似乎工作。如果 Apple 修复了他们的错误，它似乎仍然可以工作（手指交叉）。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-09-04T08:04:15.047

基于 Vasily Bodnarchuk 的回答，我创建了一个带有简单协议的要点，您可以实施该协议，它会为您完成所有工作。您需要做的就是调用 registerAsTextDisplacer()

我在我的项目中创建了一个 BaseViewController 并实现了它

[https://gist.github.com/CameronPorter95/cb68767f5f8052fdc70293c167e9430e](https://gist.github.com/CameronPorter95/cb68767f5f8052fdc70293c167e9430e)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-09-25T06:34:58.280

我看到的其他解决方案，让您将偏移量设置为原点，`textField`但这会使滚动视图超出其范围。我对偏移进行了此调整，而不是超出底部或顶部偏移。

将 设置`keyboardHeightConstraint`为页面底部。当键盘显示时，将其约束的常量更新为负键盘高度。然后滚动到`responderField`我们将在下面显示的。

```
@IBOutlet var keyboardHeightConstraint: NSLayoutConstraint?
var responderField: String?

@objc func keyboardNotification(notification: NSNotification) {
     guard let keyboardValue = notification.userInfo [UIResponder.keyboardFrameEndUserInfoKey] as? NSValue else { return }
     let keyboardHeight = keyboardValue.cgRectValue.height

     keyboardHeightConstraint?.constant = -keyboardHeight
     scroll(field: responderField!)
}

func textFieldDidBeginEditing(_ textField: UITextField) {
     responderField = textField
} 
```

现在我们要确保滚动不大于底部偏移量也不小于顶部偏移量。同时，我们要计算字段`maxY`值的偏移量。为此，我们`scrollView.bounds.size.height`从`maxY`值中减去 。

`let targetOffset = field.frame.maxY - scrollView.bounds.size.height`

我发现滚动键盘高度的额外距离会更好，但如果你想在字段的正下方滚动，你可以忽略这一点。

`let targetOffset = keyboardHeight + field.frame.maxY - scrollView.bounds.size.height`

`scrollView.contentInset.bottom`如果标签栏可见，请记住添加。

```
func scroll(field: UITextField) {
        guard let keyboardConstraintsConstant = keyboardHeightConstraint?.constant else { return }
        let keyboardHeight = -keyboardConstraintsConstant

        view.layoutIfNeeded()
        let bottomOffset = scrollView.contentSize.height - scrollView.bounds.size.height + scrollView.contentInset.bottom
        let topOffset = -scrollView.safeAreaInsets.top
        let targetOffset = keyboardHeight + field.frame.maxY + scrollView.contentInset.bottom - scrollView.bounds.size.height
        let adjustedOffset = targetOffset > bottomOffset ? bottomOffset : (targetOffset < topOffset ? topOffset : targetOffset)
        scrollView.setContentOffset(CGPoint(x: 0, y: adjustedOffset), animated: true)
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2022-02-15T10:59:19.930

如果您有 scrollView 和 tableView 与无效的 intrinsicContentSize 作为子视图，您可以在情节提要中禁用 tableView 滚动或在代码中将 tableView.isScrollEnabled 设置为 false。

[![故事板](../Images/26f0db10055d1154dabc2c8d619b0488.png)](https://i.stack.imgur.com/bMzTA.png)

# maven - 有一个批处理文件检查它自己的输出？

> ID：13056006
> 
> 赞同：4
> 
> 时间：2012-10-24T19:05:25.360
> 
> 标签：maven, command-line, batch-file

我想知道是否可以让批处理文件检查自己的字符串。

我正在使用批处理文件来运行 Maven 命令，并且我想通过在脚本末尾搜索“FAILURE”字符串来检查是否有任何失败

我知道你可以`FIND`在其他文件中，但你可以让它检查当前的输出，还是将批处理文件输出保存为文本然后搜索它的最佳解决方案？

例如，如果我有一个批处理文件`echo Hello World`，它会 print `Hello World`，那么我想搜索输出`Hello`并告诉我它找到了 string `Hello`。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-24T21:45:46.730

我喜欢 vane 对 mvn 提供的返回码采取行动的想法，但我喜欢使用`||`运算符，而不是使用 ERRORLEVEL。只有在前面的命令`||`失败时才会执行后面的命令。

```
::initialize error flag to undefined
set "mvnErr="

::run your Maven command and define the error flag if there was an error
call mvn {your arguments here} || set mvnErr=1

::You can now take action if there was an error
if defined mvnErr echo there was a Maven error 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-24T19:11:57.557

您可以通过`errorlevel`在每个 Maven 命令之后检查来做到这一点。例如

```
@ECHO OFF

set hasErrors=0

REM execute maven command here
if not errorlevel 0 set hasErrors=1

REM more batch command and similar checking ...

if %hasErrors%==1 (
    echo print your error info or do whatever
) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-09-06T22:26:22.583

基于前两个答案，我认为这是两全其美的。`||`语法简短易读，每个命令之前的语句`IF`确保仅在先前的操作成功时才​​进行处理。

```
set hasErrors=0
IF %hasErrors%==0 call mvn -f ./mycoservices/pom.xml install || set hasErrors=1
IF %hasErrors%==0 call mvn -f ./mycostatic/pom.xml install || set hasErrors=1
IF %hasErrors%==0 call mvn -f ./mycoweb/pom.xml install || set hasErrors=1
IF %hasErrors%==0 call mvn -f ./mycowebbundle/pom.xml install || set hasErrors=1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-28T02:28:42.317

为什么不只是在失败时退出批处理

```
if %ERRORLEVEL% NEQ 0 (
 echo exit /b %errorlevel%
 exit /b %errorlevel%
) 
```

# reporting-services - 在 SSRS 中打印支票？

> ID：13056008
> 
> 赞同：1
> 
> 时间：2012-10-24T19:05:32.097
> 
> 标签：reporting-services, reportingservices-2005

我正在研究 SSRS 2005 作为客户可能的报告解决方案，我的要求之一是打印支票。这样做的唯一方法是在 SSRS 中创建一个报告，其中包含正确放置数据字段的检查维度，还是有更好的方法来做到这一点？我已经用谷歌搜索了这个问题，但我得到了很多关于“复选框”、“检查 SSRS”等的结果，所以这没有帮助。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T20:36:47.280

是的，这是可以做到的，而且它可能会很好地工作。但 SSRS 并不是一个理想的答案：从 Web 报表打印取决于浏览器及其页面设置和边距的差异。生成 .pdf 然后打印似乎比期望的步骤更多。

如果您决定继续这样做，请使用矩形：即使内容的大小发生变化，它们也会尝试保持其位置。此外，在任何地方将 CanGrow 属性设置为 False。

# java - Glassfish 中的 lib 文件夹中的文件夹有哪些用途，应该如何使用它们？

> ID：13056010
> 
> 赞同：3
> 
> 时间：2012-10-24T19:05:40.647
> 
> 标签：java, jakarta-ee, glassfish

我刚刚下载了 Hibernate，因为我想将其用作持久性提供程序而不是 Eclipselink，并且您应该将它们放在 Glassfish 域中的 lib 文件夹中。但是那里还有 4 个其他文件夹。它们有什么用以及如何使用它们？

![在此处输入图像描述](../Images/a5224c4bacb51fd6c8c063b98dc9e2e9.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-25T07:29:28.593

请参阅[GlassFish 文档](http://docs.oracle.com/cd/E26576_01/doc.312/e24930/class-loaders.htm#beadk)：

> 可选包是 Java 类和相关的本地代码的包，应用程序开发人员可以使用它们来扩展核心平台的功能。
> 
> 要使用 Java 可选包机制，请将 JAR 文件复制到*domain-dir* `/lib/ext`目录中，或者使用`asadmin add-library` 带有`--type ext`选项的命令，然后重新启动服务器。

有关 GlassFish 使用的类加载器的完整文档，请参阅[类加载器一章](http://docs.oracle.com/cd/E26576_01/doc.312/e24930/class-loaders.htm#beade)。

# scala - 充分转义 HTML 和 Javascript

> ID：13056011
> 
> 赞同：1
> 
> 时间：2012-10-24T19:05:42.050
> 
> 标签：scala, playframework

从文档中，我认为`Html(value)`对 HTML 和 Javascript 进行转义就足够了。但是这段代码让 HTML 标签通过而不转义。

```
<ul>
@*here is the loop*@
@nodes.map{ n =>
<li> @Html( n) </li> }
</ul> 
```

在渲染视图之前，请提供**足以逃避**HTML 和 Javascript（以及所有其他危险的东西）的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T01:59:13.723

我相信情况正好相反。该`Html`函数输出原始字符串**而不**转义它。默认情况下，Play 会转义插入到模板中的动态内容。请参阅[文档中的转义部分](http://www.playframework.org/documentation/2.0.3/ScalaTemplates)。

# git - Cygwin 中的 git tfs clone 什么都不做

> ID：13056015
> 
> 赞同：0
> 
> 时间：2012-10-24T19:05:59.550
> 
> 标签：git, tfs, cygwin, git-tfs

我已经安装了 GitTfs 0.15.0 并试图在 Cygwin 下克隆。我做了以下事情：

*   解压到一个目录，GitTfs-0.15.0
*   chmod +x 用于 GitTfs-0.15.0 中的每个文件
*   在我的路径前面添加了 GitTfs-0.15.0
*   验证 git-tfs 找到 git-tfs.exe

现在我正在尝试克隆我们的项目，但我什么也没得到：

```
git tfs clone http://tfshost:8080/tfs/DefaultCollection '$/Project/branch' 
```

我很确定我的这些细节是正确的（相同的细节在 Eclipse 的 TFS 插件中起作用）。但是当我运行这个 git tfs clone 命令时，我什么也没得到。命令立即退出，退出状态为0，没有输出。

如何解决正在发生的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T20:50:37.497

git-tfs 不是独立的。除了提取它并将其放入您的路径之外，您还需要安装 .NET 4 和 2008 或 2010 版本的 Team Explorer。它在 git-tfs.com 主页上清楚地说明了这一点，所以我不确定我是如何错过的。

我确实了解到有一个 -d 选项可以传递给 git-tfs 以获取一些调试信息。通过从 cygwin 进行 strace，我还了解到有一些我没有的 .NET 库。

# primefaces - OverlayPanel + 日历 + Primefaces

> ID：13056016
> 
> 赞同：3
> 
> 时间：2012-10-24T19:06:05.950
> 
> 标签：primefaces, calendar

我使用的是 primefaces 3.4，我在 ap:overlaypanel 中有 ap:calendar。当我选择一个日期时，覆盖面板关闭（使用 Google Chrome 时），当我在日历中单击“关闭”时使用 Firefox，覆盖面板也会关闭。

我能做些什么来解决这个问题？

我的代码是这样的：

```
<p:overlayPanel for="btnOP" hideEffect="fade">

    <p:panel id="panelTest">

      <p:calendar id="calendarOne"  pattern="dd/MM/yyyy HH:mm"
          value="#{bean.value}" showOn="button" validator="dateValidator">
      </p:calendar> 

    </p:panel>

</p:overlayPanel> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-16T18:21:22.200

这可能现在必须解决，但无论如何这是我面对同样问题时的方法。我的标记几乎是相同`<div>`的（overlayPanel 周围只有一个额外的标记）并且通过一些挖掘我发现了这一点：在 overlayPanel 组件上，您取消绑定鼠标单击，因此它不会原生关闭：

```
onShow="$(document.body).unbind('mousedown.ui-overlay')" 
```

（来源：[点击时不要隐藏 OverlayPanel](https://stackoverflow.com/questions/12458100/dont-hide-overlaypanel-on-click)）

然后，我编写了一些自定义 Javascript 来检查单击事件所针对的元素以及日历组件是否可见，如下所示：

```
$(document).click(
    function(e) {
        var target = e.target;

        if (!$(target).parents().is('div#overlay-panel') && !$('div#ui-datepicker-div').is(':visible')) {
            $('div.overlay-panel-classname').hide('fade', 100);
        }

    }); 
```

结果证明工作顺利（我做了一些其他的改进，但基本上就是这样）。

编辑：

在 hide 事件中，我添加了一个 toggleClass 语句，这样就不会影响触发按钮的行为：

```
$('div.verlay-panel-classname').hide('fade', 300, function() {
     $(this).toggleClass('ui-overlay-hidden ui-overlay-visible');
}); 
```

# iphone - 如何为嵌入在 UITableViewCell 中的 UIView 设置动画

> ID：13056026
> 
> 赞同：0
> 
> 时间：2012-10-24T19:06:51.797
> 
> 标签：iphone, animation, uiview, uitableview, cakeyframeanimation

上`didSelectRowAtIndexPath`，我正在重新加载选定的行并进行更改`heightForRowAtIndexPath`，以便选定的 tableview 单元格可以展开。这工作正常。因此，一旦重新加载扩展完成，我必须为 UIImageView 后面的 UIView 设置动画。

动画应该像从 imageView 后面进来一样，像从图像中显示一样停在某个位置。应该很简单吧？通过更改 y 原点并在其中执行动画块。

但问题是它根本没有使用简单的 UIView beginAnimations 代码进行动画处理。我认为应该可以将 CAKeyframeAnimation 应用于 UIView 层。

我从来没有玩过图层。有人可以指导我吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T19:52:13.397

你可以尝试这样的事情：

```
CABasicAnimation *myViewAnimation = [CABasicAnimation animationWithKeyPath:@"position"];
[myViewAnimation setFromValue:[NSValue valueWithCGPoint:CGPointMake(INITIAL_X,INITIAL_Y)]];
[myViewAnimation setToValue:[NSValue valueWithCGPoint:CGPointMake(FINAL_X,FINAL_Y)]];
[myViewAnimation setDuration:0.5];
[myView.layer setPosition:CGPointMake(FINAL_X,FINAL_Y)];
[myView.layer addAnimation:myViewAnimation forKey:@"position"]; 
```

您需要将 QuartzCore 框架链接到您的项目并导入它 ( `#import <QuartzCore/QuartzCore.h>`)

# expressionengine - ExpressionEngine 更新未反映在站点上

> ID：13056033
> 
> 赞同：1
> 
> 时间：2012-10-24T19:07:16.903
> 
> 标签：expressionengine

一位客户要求我更新他们的 EE 网站。在主页上，有一个显示文本数据的小滑块。对于每张幻灯片，网站的原始创建者都会输入条目，并将所有这些条目作为一个名为 footerstats 的通道显示在滑块中。页脚模板引用此频道。

我去了每个条目，更改了信息，保存了。然后我更新了页脚模板和频道，只是为了它。我什至清除了所有缓存。尽管如此，旧信息仍显示在主页上。有小费吗？我是 EE 的新手。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T21:26:45.700

您是否直接清除缓存文件夹而不是通过 EE？有时我注意到，通过积极的浏览器缓存 (Chrome)，有时只是一般清除，它有助于实际手动删除缓存文件夹的内容，而不仅仅是使用 EE 界面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T12:25:40.833

查看附加组件 -> 模块列表以查看是否安装了 CE Cache 或 Template Morsels。这些是立即浮现在脑海中的两个第三方缓存附加组件，它们可能直接导致 EE 的“清除缓存”不会改变您在站点中看到的内容，因为它们缓存到数据库中。您还可以寻找 Stash - 它也可以在 EE 的本机缓存之外保存数据，但方式与 CE 缓存或模板 Morsels 不同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T19:36:38.407

我建议寻找 CE 缓存并清除所有缓存（如果已安装）。

# javascript - 在 Firefox 16.0.1 中启动 fancybox 时页面布局中断

> ID：13056039
> 
> 赞同：1
> 
> 时间：2012-10-24T19:07:33.217
> 
> 标签：javascript, jquery, css, firefox, fancybox

我在我的网站上添加了 fancybox 2 插件，当我在 Chrome 和 Safari 中测试它时它工作正常，但在 Firefox 中却没有。页面加载正常，但是当您单击缩略图打开精美框时，我的正文标记中的边距样式被取消（我使用萤火虫确定了这一点）并且我的整个布局完全转移到视口的右侧。当您单击花哨的框时，布局仍然被推到右侧。有没有人遇到过类似的问题，您对如何解决它有什么建议吗？我已经发布了我的 DOCTYPE 和 head bellow 以及我的身体 css 规则。如果需要更多信息，请告诉我。该站点尚未启动，因此我无法链接到它。如果我错过了任何明显的东西，我对此很抱歉。非常感谢任何认为他们可以提供帮助的人！！

```
<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Commercial</title>
<link href='http://fonts.googleapis.com/css?family=Lato:100' rel='stylesheet'       type='text/css'>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<!--[if lt IE 9]>
<script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
<link href="styles/commercial_new.css" rel="stylesheet" type="text/css">
<script type="text/javascript" src="Scripts/jquery-1.8.2.min.js"></script>
<script type="text/javascript" src="Scripts/fancyapps-fancyBox-e4836f7/source/jquery.fancybox.pack.js"></script>
<link href="Scripts/fancyapps-fancyBox-e4836f7/source/jquery.fancybox.css" rel="stylesheet" type="text/css">
</head>

body {
    width: 1050px;
    background: #c7c7c7;
    margin: 0 auto;
    overflow: scroll;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T19:11:16.480

我今天早上实际上遇到了同样的问题。我采用的解决方案（可能有更好的选择）是创建一个包含正文内容的 div 并在其上设置宽度，然后将正文宽度设置为 100%；

```
<body>

   <div id="container">
       // Page content
   </div>

</body> 
```

CSS：

```
body { width: 100%; }

#container { width: 1050px; margin: 0 auto; } 
```

似乎修复了 Firefox 的问题，我们将其测试回 IE7 没有任何问题。

# wpf - 如何在 WPF ListView 中包装内容？

> ID：13056040
> 
> 赞同：9
> 
> 时间：2012-10-24T19:07:35.903
> 
> 标签：wpf, listview

我有一个非常简单的 WPF ListView，用于列出文本块。我希望它垂直滚动，但文本应该换行以便没有水平滚动。我见过的所有示例都是过于复杂的 DataGridView 嵌套解决方案。然而，这似乎是一个简单的用例。这是我当前的代码：

```
<ListView  
        Height="Auto"
        Width="Auto"
        Margin="0"
        Name="mLogListView" 
        FontWeight="Bold"
        FontSize="16"
        SelectionMode="Single"
        ScrollViewer.HorizontalScrollBarVisibility="Disabled"
        HorizontalContentAlignment="Stretch"/> 
```

我已经尝试设置 ScrollViewer.Horizo​​ntalScrollBarVisibility 和 Horizo​​ntalContentAlignment 属性，但文本只是跑出了控件的末尾并且不换行。

每个项目都添加到`ListView.Items`集合中并且是一个`ListViewItem`对象。文本设置为项目的`Content`属性。

这是负责将文本时间添加到列表的代码：

```
ListViewItem item = new ListViewItem();            
item.Content = "Item text is set here, but refuses to wrap in list view!";
mLogListView.Items.Add(item); 
```

谢谢你。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-25T07:26:31.850

这应该是你需要的

```
<ListView Margin="12,23,309,191"
        Name="mLogListView" 
        FontWeight="Bold"
        FontSize="16"
        SelectionMode="Single"
        ScrollViewer.HorizontalScrollBarVisibility="Disabled"
        HorizontalContentAlignment="Stretch" >
<!-- here set the itemTemplate to a TextBlock that can wraps-->
        <ListView.ItemTemplate>
            <DataTemplate>
                <TextBlock Text="{Binding Path=.}" TextWrapping="Wrap"></TextBlock>
            </DataTemplate>
        </ListView.ItemTemplate>
</ListView> 
```

请注意`Text="{Binding Path=.}"`等效于`Text="{Binding}"`. 这称为**空绑定语法**。

在这种情况下`Text`绑定到整个 ListViewItem 对象。当您想要绑定到整个对象项而不是仅绑定到项的单个属性时，空绑定语法很有用。

这对于示例来说很方便，因为源对象（ListViewItem）是字符串类型，而您只想绑定到字符串本身。

有关详细信息，请参阅[msdn](http://msdn.microsoft.com/en-us/library/ms752347.aspx)在**指定值的路径部分**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-03-05T10:16:57.517

我想在 ListView 中查看图像，默认情况下它只显示一列。为了防止这种情况，您可以插入以下代码：

```
<ListView.ItemsPanel>
    <ItemsPanelTemplate>
        <WrapPanel Margin="0" />
    </ItemsPanelTemplate>
</ListView.ItemsPanel> 
```

现在显示 ListView，而不是一列，只显示一行 :-( 为了防止这种情况，您可以插入这行代码：

```
ScrollViewer.HorizontalScrollBarVisibility="Disabled" 
```

所以它可能看起来像这样：

```
<ListView ItemsSource="{Binding YourItemsSource...}"
            ScrollViewer.HorizontalScrollBarVisibility="Disabled">
    <ListView.ItemsPanel>
        <ItemsPanelTemplate>
            <WrapPanel />
        </ItemsPanelTemplate>
    </ListView.ItemsPanel>
    <ListView.ItemTemplate>
        <DataTemplate>
            <Border ... and so on ... 
```

我希望，它可以帮助某人;-)

# mysql - 选择不同列中没有几个值的行（ NOT IN ）

> ID：13056042
> 
> 赞同：0
> 
> 时间：2012-10-24T19:08:16.193
> 
> 标签：mysql, notin

所以首先，我设法做这样的事情：

```
SELECT * FROM `trades`
WHERE 15003 NOT IN (`slot1`, `slot2`, `slot3`, `slot4`) 
```

这工作正常，在任何这些列中给我没有产品'15003'的行。但是，如果我不想查询任何“15003”或“15004”或“15008”怎么办？我想这样做：

```
SELECT * FROM `trades`
WHERE 15003 NOT IN (`slot1`, `slot2`, `slot3`, `slot4`) AND
15004 NOT IN (`slot1`, `slot2`, `slot3`, `slot4`) AND
15008 NOT IN (`slot1`, `slot2`, `slot3`, `slot4`) 
```

它有效，但我认为它不合适......

## 我该如何优化呢？

编辑：每笔交易都有其 id 和 4 个插槽。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T19:38:03.323

这是一个非常糟糕的设计选择，您在使用此查询时遇到的困难就是例证。代替：

```
TABLE trades
  slot1 INT
  slot2 INT
  slot3 INT
  slot4 INT 
```

应该适当地规范化为：

```
TABLE trades
  trade_id INT

TABLE trades_slots
  trade_id INT
  slot_id INT 
```

这将为您提供*更大的*灵活性并使查询更容易编写。

```
SELECT *
FROM trades t INNER JOIN trades_slots s
  on t.trade_id = s.trade_id
WHERE s.slot_id NOT IN (15003, 15004, ...) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T19:45:51.753

使用这样的查询：

```
Select *, GROUP_CONCAT(product1,product2,product3,product4) as prods
from Trades
group by ID
having prods not regexp '15003|15004|15008' 
```

# javascript - 突出显示 flexslider 中特定序列幻灯片的控制选项卡链接

> ID：13056043
> 
> 赞同：3
> 
> 时间：2012-10-24T19:08:18.047
> 
> 标签：javascript, jquery, css, flexslider

我一直在实现 flex 滑块的代码，它允许 flex 滑块之外的链接/按钮使用 LJ902 提供的 rel 标签定位特定幻灯片： [jQuery FlexSlider hide Slider but retain visibility of Manual Controls](https://stackoverflow.com/questions/9744335/jquery-flexslider-hide-slider-but-retain-visibility-of-manual-controls)

现在我很好奇，当 flex 滑块位于幻灯片的一部分中时，我如何能够更改目标链接/按钮的 css 状态（给它一个不同颜色的背景以指示它的活动状态）。

因此，例如在下面的示例中，当滑块处于图像 images/section2-Image01.jpg 到 images/section2-Image03 之间的状态时，第 2 节的幻灯片拇指链接的 css 状态会更改，对于第 2 节中的幻灯片3 第 3 节的滑动拇指链接的 css 状态已更改，第 2 节的样式恢复到以前的状态。本质上，当用户滑动/点击进入下一部分时，创建类似于标签的功能

```
<a rel="0" class="slide_thumb" href="#">Section 1</a>
<a rel="3" class="slide_thumb" href="#">Section 2</a>
<a rel="6" class="slide_thumb" href="#">Section 3</a>

<div class="flexslider">
    <ul class="slides">
        <li>
            <img src="images/section1-Image01.jpg" />
            </li>
            <li>
            <img src="images/section1-Image02.jpg" />
            </li>
            <li>
            <img src="images/section1-Image03.jpg" />
            </li>
            <li>
             <img src="images/section2-Image01.jpg" />
            </li>
            <li>
            <img src="images/section2-Image02.jpg" />
            </li>
            <li>
            <img src="images/section2-Image03.jpg" />
            </li>
            <li>
             <img src="images/section3-Image01.jpg" />
            </li>
            <li>
            <img src="images/section3-Image02.jpg" />
            </li>
            <li>
            <img src="images/section3-Image03.jpg" />
            </li>
        </ul>
  </div> 
```

谁能帮我解决这个问题？在过去的一天左右，我平庸的开发技能被此难住了。谢谢！

# python - 如何在 SQLAlchemy 子查询中指定 FROM 表？

> ID：13056049
> 
> 赞同：1
> 
> 时间：2012-10-24T19:08:35.757
> 
> 标签：python, sql, sqlalchemy

我试图在单个查询中获取一组固定的行，以及子查询找到的其他一些行。我的问题是我的 SQLAlchemy 代码生成的查询不正确。

问题是SQLAlchemy生成的查询如下：

```
SELECT tbl.id AS tbl_id
FROM tbl
WHERE tbl.id IN
(
SELECT t2.id AS t2_id
FROM tbl AS t2, tbl AS t1
WHERE t2.id =
(
SELECT t3.id AS t3_id
FROM tbl AS t3, tbl AS t1
WHERE t3.id < t1.id ORDER BY t3.id DESC LIMIT 1 OFFSET 0
)
AND t1.id IN (4, 8)
)
OR tbl.id IN (0, 8) 
```

而正确的查询不应该有第二个`tbl AS t1`（此查询的目标是选择 ID 0 和 8，以及刚好在 4 和 8 之前的 ID）。

不幸的是，我找不到如何让 SQLAlchemy 生成正确的（见下面的代码）。

也欢迎使用更简单的查询来实现相同结果的建议（尽管它们需要高效——我尝试了一些变体，但在我的实际用例中有些变慢了）。

产生查询的代码：

```
from sqlalchemy import create_engine, or_
from sqlalchemy import Column, Integer, MetaData, Table
from sqlalchemy.orm import sessionmaker

engine = create_engine('sqlite:///:memory:', echo=True)
meta = MetaData(bind=engine)
table = Table('tbl', meta, Column('id', Integer))
session = sessionmaker(bind=engine)()
meta.create_all()

# Insert IDs 0, 2, 4, 6, 8.
i = table.insert()
i.execute(*[dict(id=i) for i in range(0, 10, 2)])
print session.query(table).all()
# output: [(0,), (2,), (4,), (6,), (8,)]

# Subquery of interest: look for the row just before IDs 4 and 8.
sub_query_txt = (
        'SELECT t2.id '
        'FROM tbl t1, tbl t2 '
        'WHERE t2.id = ( '
        ' SELECT t3.id from tbl t3 '
        ' WHERE t3.id < t1.id '
        ' ORDER BY t3.id DESC '
        ' LIMIT 1) '
        'AND t1.id IN (4, 8)')
print session.execute(sub_query_txt).fetchall()
# output: [(2,), (6,)]

# Full query of interest: get the rows mentioned above, as well as more rows.
query_txt = (
        'SELECT * '
        'FROM tbl '
        'WHERE ( '
        ' id IN (%s) '
        'OR id IN (0, 8))'
        ) % sub_query_txt
print session.execute(query_txt).fetchall()
# output: [(0,), (2,), (6,), (8,)]

# Attempt at an SQLAlchemy translation (from innermost sub-query to full query).
t1 = table.alias('t1')
t2 = table.alias('t2')
t3 = table.alias('t3')
q1 = session.query(t3.c.id).filter(t3.c.id < t1.c.id).order_by(t3.c.id.desc()).\
             limit(1)
q2 = session.query(t2.c.id).filter(t2.c.id == q1, t1.c.id.in_([4, 8]))
q3 = session.query(table).filter(
                               or_(table.c.id.in_(q2), table.c.id.in_([0, 8])))
print list(q3)
# output: [(0,), (6,), (8,)] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T20:16:48.420

您缺少的是最里面的子查询和下一级之间的相关性；如果没有相关性，SQLAlchemy 将`t1`在最里面的子查询中包含别名：

```
>>> print str(q1)
SELECT t3.id AS t3_id 
FROM tbl AS t3, tbl AS t1 
WHERE t3.id < t1.id ORDER BY t3.id DESC
 LIMIT ? OFFSET ?
>>> print str(q1.correlate(t1))
SELECT t3.id AS t3_id 
FROM tbl AS t3 
WHERE t3.id < t1.id ORDER BY t3.id DESC
 LIMIT ? OFFSET ? 
```

请注意，`tbl AS t1`现在查询中缺少。从[`.correlate()`方法文档](http://docs.sqlalchemy.org/en/rel_0_7/orm/query.html#sqlalchemy.orm.query.Query.correlate)：

> 返回一个 Query 构造，它将给定的 FROM 子句与封闭 Query 或 select() 的子句相关联。

因此，`t1`假定是封闭查询的一部分，并且未在查询本身中列出。

现在您的查询有效：

```
>>> q1 = session.query(t3.c.id).filter(t3.c.id < t1.c.id).order_by(t3.c.id.desc()).\
...              limit(1).correlate(t1)
>>> q2 = session.query(t2.c.id).filter(t2.c.id == q1, t1.c.id.in_([4, 8]))
>>> q3 = session.query(table).filter(
...                                or_(table.c.id.in_(q2), table.c.id.in_([0, 8])))
>>> print list(q3)
2012-10-24 22:16:22,239 INFO sqlalchemy.engine.base.Engine SELECT tbl.id AS tbl_id 
FROM tbl 
WHERE tbl.id IN (SELECT t2.id AS t2_id 
FROM tbl AS t2, tbl AS t1 
WHERE t2.id = (SELECT t3.id AS t3_id 
FROM tbl AS t3 
WHERE t3.id < t1.id ORDER BY t3.id DESC
 LIMIT ? OFFSET ?) AND t1.id IN (?, ?)) OR tbl.id IN (?, ?)
2012-10-24 22:16:22,239 INFO sqlalchemy.engine.base.Engine (1, 0, 4, 8, 0, 8)
[(0,), (2,), (6,), (8,)] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T20:45:19.277

我只是有点确定我理解你所要求的查询。不过，让我们分解一下：

> 此查询的目标是选择 ID 0 和 8，以及 4 和 8 之前的 ID。

看起来您想查询两种事物，然后将它们组合起来。正确的运算符是`union`. 做简单的查询，最后把它们加起来。我将从第二位开始，“X 之前的 ID”。

开始；让我们看看在某个给定值之前的所有 id。为此，我们将使用以下方法将表连接起来`<`：

```
# select t1.id t1_id, t2.id t2_id from tbl t1 join tbl t2 on t1.id < t2.id;
 t1_id | t2_id 
-------+-------
     0 |     2
     0 |     4
     0 |     6
     0 |     8
     2 |     4
     2 |     6
     2 |     8
     4 |     6
     4 |     8
     6 |     8
(10 rows) 
```

这无疑为我们提供了左侧小于右侧的所有行对。在所有这些中，我们希望给定 t2_id 的行尽可能高；我们将按 t2_id 分组并选择最大的 t1_id

```
# select max(t1.id), t2.id from tbl t1 join tbl t2 on t1.id < t2.id group by t2.id;
 max | id 
-----+-------
   0 |     2
   2 |     4
   4 |     6
   6 |     8
(4 rows) 
```

使用 a 的查询`limit`可以实现此目的，但当存在替代方法时避免使用此技术通常是一个好主意，因为分区在数据库实现之间没有良好的可移植支持。Sqlite 可以使用这种技术，但 postgresql 不喜欢它，它使用一种称为“分析查询”的技术（既标准化又更通用）。MySQL 两者都做不到。但是，上面的查询在所有 sql 数据库引擎中都可以一致地工作。

剩下的工作只是使用`in`或其他等效的过滤查询，在 sqlalchemy 中不难表达。样板...

```
>>> import sqlalchemy as sa
>>> from sqlalchemy.orm import Query
>>> engine = sa.create_engine('sqlite:///:memory:')
>>> meta = sa.MetaData(bind=engine)
>>> table = sa.Table('tbl', meta, sa.Column('id', sa.Integer))
>>> meta.create_all()

>>> table.insert().execute([{'id':i} for i in range(0, 10, 2)])

>>> t1 = table.alias()
>>> t2 = table.alias()

>>> before_filter = [4, 8] 
```

第一个有趣的地方是我们给“max(id)”表达式命名。这是必要的，以便我们可以多次引用它，并将其从子查询中取出。

```
>>> c1 = sa.func.max(t1.c.id).label('max_id')
>>> #                                ^^^^^^ 
```

查询的“繁重”部分，加入上述别名，分组并选择最大值

```
>>> q1 = Query([c1, t2.c.id]) \
...      .join((t2, t1.c.id < t2.c.id)) \
...      .group_by(t2.c.id) \
...      .filter(t2.c.id.in_(before_filter)) 
```

因为我们将使用联合，所以我们需要它来生成正确数量的字段：我们将它包装在一个子查询中并投影到我们感兴趣的唯一列。这将具有我们在上面给出的名称`label()`称呼。

```
>>> q2 = Query(q1.subquery().c.max_id)
>>> #                          ^^^^^^ 
```

工会的另一半要简单得多：

```
>>> t3 = table.alias()
>>> exact_filter = [0, 8]
>>> q3 = Query(t3).filter(t3.c.id.in_(exact_filter)) 
```

剩下的就是将它们组合起来：

```
>>> q4 = q2.union(q3)
>>> engine.execute(q4.statement).fetchall()
[(0,), (2,), (6,), (8,)] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-17T10:51:39.543

这里的回复帮助我解决了我的问题，但就我而言，我必须同时使用`correlate()`和`subquery()`：

```
# ...
subquery = subquery.correlate(OuterCorrelationTable).subquery()
filter_query = db.session.query(func.sum(subquery.c.some_count_column))
filter = filter_query.as_scalar() == as_many_as_some_param
# ...
final_query = db.session.query(OuterCorrelationTable).filter(filter) 
```

# excel - Excel 日期从 yyyymmdd 转换为 mm/dd/yyyy

> ID：13056051
> 
> 赞同：55
> 
> 时间：2012-10-24T19:08:40.327
> 
> 标签：excel, excel-2007, vba

我一直在寻找关于如何在 Excel 中执行此操作的大约一个小时。

我有一个从旧系统创建的 Excel 文件，我正在从 SQL Server 数据库中提取信息，我会将信息输入回 SQL Server 数据库并希望日期匹配。

我尝试过创建自定义格式，但我不确定我是否正确地做到了。我发现了几个他们想去的地方，`mm/dd/yyyy`但`yyyymmdd` 他们没有帮助。

我不熟悉在任何 Microsoft 产品中使用 VBA，否则我确信这将是一个简单的任务。

我有两个单独的列需要更改。

如何将整个列从 **`(float)`yyyymmdd**格式化为**`(Date)`mm/dd/yyyy**

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2012-10-24T19:19:54.773

您可以使用单元格旁边的公式将值转换为日期：

```
=DATE(LEFT(A1,4),MID(A1,5,2),RIGHT(A1,2)) 
```

其中 A1 是您需要转换的字段。

或者，您可以在 VBA 中使用此代码：

```
Sub ConvertYYYYMMDDToDate()
   Dim c As Range
   For Each c In Selection.Cells
       c.Value = DateSerial(Left(c.Value, 4), Mid(c.Value, 5, 2), Right(c.Value, 2))
       'Following line added only to enforce the format.
       c.NumberFormat = "mm/dd/yyyy"
   Next
End Sub 
```

只需突出显示您想要修复的任何单元格并运行代码。

请注意，正如[RJohnson](https://stackoverflow.com/users/7858537/rjohnson)在评论中提到的那样，如果您选择的单元格之一为空，则此代码将出错。如果 c.value 为空白，您可以在 c.value 上添加条件以跳过更新。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-10-24T19:33:55.183

您是否有您所说的数据行（水平）或列（垂直）？

如果是后者，您可以使用“文本到列”功能将整个列“原位”转换 - 这样做：

选择列>数据>文本到列>下一步>下一步>从下拉列表中选择“列数据格式”下的“日期”和“YMD”>完成

....否则您可以使用公式转换

`=TEXT(A1,"0000-00-00")+0`

并以所需的日期格式格式化

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-24T19:20:32.340

这是一个简单的版本：

假设您在单元格 A1 中有一个日期，格式为您描述的格式。例如：`19760210`。

然后这个公式会给你你想要的日期：

```
=DATE(LEFT(A1,4),MID(A1,5,2),RIGHT(A1,2)). 
```

在我的系统（Excel 2010）上，它适用于字符串或浮点数。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-01-31T02:25:48.300

转换`dd/mm/yyyy`为`mm/dd/yyyy`

```
=DATE(RIGHT(a1,4),MID(a1,4,2),LEFT(a1,2)) 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-07-18T13:11:32.217

找到了另一个对我有用的（手动）[答案](https://ccm.net/forum/affich-619870-how-to-change-date-format-from-yyyymmdd-to-mm-dd-yy-in-excel)

1.  选择列。
2.  选择数据选项卡
3.  文本到列 - 打开新框
4.  （选择分隔），下一步
5.  （取消选中所有框，使用“无”作为文本限定符），下一步
6.  使用日期下拉菜单中的 ymd 选项。
7.  点击完成

# php - PHP 和 MYSQL 选择 5 个表和多行作为单个数组

> ID：13056052
> 
> 赞同：-1
> 
> 时间：2012-10-24T19:08:46.497
> 
> 标签：php, mysql, select

想从下面的表结构中得到以下结果（MYSQL + PHP）

```
array[0][name]1,[desc]red,[title]hero,[desc]strong,[desc2]smells,[img][0]red1,[img][1]red2,[img][2]red3,ext[0].jpg,[ext][1].gif,[ext][2].png,[count][0]253,[count][1]211,[count][2]21,[count][3]121,[dist][0]5,[dist][1]5,[dist][2]12,[dist][3]2,[score][0]2,[score][1]3,[score][2]1,[score][3]5,[score][4]4,[val][0]5,[val][1]1,[val][2]4,[val][3]3,[val][4]4 
```

我使用简单的 SELECT、JOIN 和 GROUP_CONCAT 遇到的问题是选择所有图像后值重复。

我尝试了各种其他方法，例如按行选择数据并结合 PHP 中的 foreach 循环，但我最终得到了很多重复项，而且看起来非常混乱。

我也想把它分成多个选择而不是使用一个，但我真的很想知道它是否可以用一个选择来完成。

有人可以帮我做一个 MYSQL 选择吗？谢谢

```
game
+-----+----------+
| pid | name     |
+-----+----------+
|   1 |  red     |
|   2 |  green   |
|   3 |  blue    |
+-----+----------+

detail
+-----+------+--------+-------+--------+
|  id | pid  | title  |  desc | desc 2 |
+-----+------+--------+-------+--------+
|   1 |  1   | hero   |strong | smells |
|   2 |  2   | prince |nice   | tall   |
|   3 |  3   | dragon |big    | green  |
+-----+------+--------+-------+--------+

image
+-----+-----+-----+----+
|  id | pid | img |ext |
+-----+-----+-----+----+
|   1 |  1  | red1|.jpg|
|   2 |  1  | red2|.gif|
|   3 |  1  | red3|.png|
+-----+-----+-----+----+

devmap
+-----+-----+-------+------+
|  id | pid | count | dist |
+-----+-----+-------+------+
|   1 |  1  | 253   |  5   |
|   2 |  1  | 211   |  5   |
|   3 |  1  | 21    | 12   |
|   4 |  1  | 121   |  2   |
+-----+-----+-------+------+

stats
+-----+-----+-------+------+
|  id | pid | scrore| val  |
+-----+-----+-------+------+
|   1 |  1  | 2     |  5   |
|   2 |  1  | 3     |  1   |
|   3 |  1  | 1     |  4   |
|   4 |  1  | 5     |  3   |
|   5 |  1  | 4     |  3   |
+-----+-----+-------+------+ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T19:22:17.820

当您执行涉及表之间超过 1:1 映射的 JOIN 时，您将拥有重复的数据，并且无法在查询中解决这个问题。

您可以将其拆分为多个选择，或者您可以遍历结果集并删除您不想要的任何重复信息。

# svn - SVN 合并重新整合缺失的范围，但没有要合并的内容

> ID：13056057
> 
> 赞同：8
> 
> 时间：2012-10-24T19:09:12.887
> 
> 标签：svn, merge, branching-and-merging, svn-reintegrate

这是谜语：

```
C:\code\trunk> svn merge --reintegrate http://svn.e.com/repos/branches/lih --accept postpone --dry-run
svn: E195016: Reintegrate can only be used if revisions 11430 through 12384 were previously merged from http://svn.e.com/repos/trunk to the reintegrate source, but this is not the case:
  branches/lih
    Missing ranges: /trunk:11902 
```

但是，如果我进入分支目录并尝试合并该范围，则没有可合并的内容！

```
C:\code\branches\branch> svn merge -r 11901:11902 http://svn.e.com/repos/trunk --accept postpone --dry-run
C:\code\branches\branch> 
```

甚至`svn merge -r 11898:11903`显示没有什么可以合并的。

现在我似乎无法将我的分支重新整合到主干中！请帮忙！

PS lih 分支直到 11906 年才创建。它是从 hd 分支分支出来的，而 hd 分支是从 trunk 分支出来的（并且 hd 已经合并回 trunk）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-11-26T23:24:41.407

我刚刚遇到了类似的问题，问题是主干有两个取消修订（即主干上的 rev 20865 undid rev 20857）。因此，当我第一次从主干合并到分支时，这对修订没有任何要合并的内容，但没有将它们包含在相关文件的合并信息中。然后，当我尝试从分支合并回主干时，它反对缺少这两个修订。

我的解决方案（在手动验证为有问题的文件取消了修订之后）是将两个修订中的每一个明确合并到分支（通过 svn merge ^/trunk -c 20857 和 svn merge ^/trunk -c 20865），提交，然后将分支合并回主干。第二次，一切顺利。这是使用 Subversion 1.8.0 (r1490375)。

我之前可以使用 merge with --record-only 来解决类似的问题，以将更改标记为在分支上正确合并，但合并实际文件可能更安全（以防万一发生的更改不完全取消）。

看起来 Subversion 1.8 处理合并信息以取消对我的更改的方式中的错误。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-25T21:25:23.610

这似乎对我有用，但我不能声称理解它或保证这是解决我的问题的最佳方法。

首先，您的分支必须拥有所有对主干的最新提交，这一点很重要。所以同步它（从主干合并到分支）。

然后，您基本上可以通过在主干目录中执行此操作来强制重新集成：（ `svn merge http://svn.e.com/repos/trunk/@REV http://svn.e.com/repos/branches/lih/ . --dry-run`但将 REV 替换为最新版本 #）。

# android - 通知在用户单击之前不会关闭

> ID：13056059
> 
> 赞同：0
> 
> 时间：2012-10-24T19:09:13.343
> 
> 标签：android, android-notifications

我正在使用以下代码在我的应用程序中生成通知

```
@Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        mContext = MainActivity.this;

        notifManager = (NotificationManager) mContext.getSystemService(mContext.NOTIFICATION_SERVICE);

        mNotification = new NotificationCompat2.Builder(mContext).setSmallIcon(android.R.drawable.sym_def_app_icon)
                .setTicker("Launch download").setContentTitle("Downloader").setContentText(content)
                .setContentIntent(getPendingIntent());

        mNotification.setDefaults(Notification.DEFAULT_LIGHTS | Notification.DEFAULT_SOUND | Notification.DEFAULT_VIBRATE);
        mNotification.setAutoCancel(true); 
        notifManager.notify(UPDATE_PROGRESS, mNotification.build());

    }

    private PendingIntent getPendingIntent() {

        Intent i = new Intent(mContext, NotificationReceiver.class);
        //i.setFlags(FLAG_ACTIVITY_CLEAR_TOP);
        return PendingIntent.getActivity(mContext, 0, i, PendingIntent.FLAG_UPDATE_CURRENT);
    } 
```

注意：- 我使用的是 Jake Wharton 的[NotificationCompat2](https://github.com/JakeWharton/NotificationCompat2)。

现在这段代码可以正常工作，除非当新的通知到达时，即使用户没有阅读旧通知，它也会关闭旧通知。

**我的问题**

如何在状态滑动抽屉中显示所有通知，直到用户不阅读？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T19:12:52.497

如果它们具有相同的 id，则通知将被另一个替换。更改id

```
notifManager.notify(id, mNotification.build()); 
```

显示多个通知。

# javascript - 从同域 iframe 向父窗口添加新功能

> ID：13056062
> 
> 赞同：1
> 
> 时间：2012-10-24T19:09:25.467
> 
> 标签：javascript, jquery, iframe

我想从同一个域 iframe 创建一个新函数并将其附加到父窗口，然后从 iframe 或父窗口调用该函数。像这样的东西。

```
parent.myFunction = function(){ ... }; myfunction; 
```

有什么好的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T19:11:06.323

你几乎可以做你所做的

```
parent.myFunction = function(){ ... };
parent.myfunction(); // calling the function in parent window 
```

从父窗口中，您可以简单地做

```
myFunction(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T19:11:15.323

从子窗口调用函数使用`parent.myfunction();`

```
parent.myFunction = function(){ ... }; parent.myfunction(); 
```

# text - 用于修改按钮、标签或文本框上的文本的 asp 文本命令

> ID：13056065
> 
> 赞同：0
> 
> 时间：2012-10-24T19:09:33.920
> 
> 标签：text, asp-classic, tags, symbols

我不知道这叫什么，但是当您有时，`Text = "TEXT TEXT <br /> TEXT TEXT"` 我在哪里可以找到`"<br />"`修改符号类型的列表？

抱歉这个愚蠢的问题，只是不知道这叫什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T07:30:25.197

我认为你所追求的是 HTML*编码*，它将转换这样的字符串：

`TEXT TEXT <br /> TEXT TEXT`

对此：

`TEXT TEXT &lt;br /&gt; TEXT TEXT`

为了实现这一点，经典的 ASP 内置了方法调用，[这里](http://msdn.microsoft.com/en-us/library/ms525347%28v=vs.90%29.aspx)`Server.HTMLEncode`详细解释。

实际使用示例：

```
<%
strRawData = "TEXT TEXT <br /> TEXT TEXT"
strEncoded = Server.HTMLEncode(strRawData)
%> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T05:28:50.237

You are using break command.Instead br/ you can use only br (inside <> as a tag) for line break. There are more commands in vbscript which can be used in classic asp. Go [To this link](http://powerasp.net/content/new/vbscript-constants.asp)

# continuous-integration - 在 Jenkins / Hudson 中以自动化方式运行单元测试，从开发到构建服务器

> ID：13056067
> 
> 赞同：8
> 
> 时间：2012-10-24T19:10:05.993
> 
> 标签：continuous-integration, jenkins, hudson, automated-tests

我们目前正在运行 Jenkins (Hudson) CI 服务器来构建和打包我们的 .net Web 项目和数据库项目。一切都很好，但我想开始编写单元测试，然后只有在单元测试通过时才通过构建。我们正在使用内置的 msbuild 任务来构建 Web 项目。使用以下论点...

```
MsBuild Version           .NET 4.0
MsBuild Build File    ./WebProjectFolder/WebProject.csproj  
Command Line Arguments    ./target:Rebuild /p:Configuration=Release;DeployOnBuild=True;PackageLocation=".\obj\Release\WebProject.zip";PackageAsSingleFile=True 
```

我们需要对我们的代码运行自动化测试，这些代码在我们在机器上构建时会自动运行（可能是构建后事件），但也会在 Jenkins 为该项目进行构建时运行。

如果您像这样运行它，它不会构建单元测试项目，因为 Web 项目不引用测试项目。测试项目将引用 Web 项目，但我很确定这将扼杀我们的自动化构建，因为它们主要用于构建和打包我们的部署。运行这些测试应该是自动化构建和打包过程中的一个步骤。

## 选项 ...

1.  创建两个 Jenkins 作业。一个运行测试......如果测试通过另一个构建被触发，它构建和打包 web 项目。将构建后事件放在测试项目上。
2.  构建解决方案而不是项目（确保解决方案包含所需的测试）并将构建后事件放在将运行 nunit 控制台以运行测试的任何测试项目上。然后使用命令行将所有需要的文件从每个 bin 和 content 目录复制到一个包中。
3.  只需在 jenkins 中构建测试项目，而不是在 jenkins 中构建 web 项目。测试项目将引用 Web 项目（取决于您正在测试的内容）并构建它。

## 问题 ...

1.  有两份工作，没有一份。要调试的两件事不是一件。一种是查看测试是否通过，另一种是构建和编译 Web 项目。测试可以通过，但如果您正在测试的东西没有使用它，则构建可能会失败......
2.  这需要我们确切地知道构建中的内容。现在 msbuild 为我们完成了这一切。如果您有多个团队在每次创建一个额外的文件夹时都在处理一个项目，那么您必须担心可能脆弱的命令行语句。
3.  这似乎破坏了我们这里的主要目的。测试应该是这个过程中的一个步骤，而不是这个过程中最重要的事情。我也不是 100% 确定触发构建与正常构建相同，它是否与正常构建做所有相同的事情。以相同的方式移动所有正确的文件将它们全部移动到相同的目录等。

## 初始问题。

我们希望在构建主项目时运行我们的测试。但是将构建后事件添加到针对测试项目运行的 Web 项目不起作用，因为 Web 项目不引用测试项目并且不会触发该项目的构建。我可以继续……但这已经足够了……

我们花了大约一周的时间试图让这项工作很好地完成，但没有成功。如果您觉得可以得到更好的回应，请随时编辑此内容...

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-25T10:57:32.737

在 Jenkins/Hudson，有很多工作是很正常的。一些用于编译触发的版本控制更改，一些用于运行（单元）测试，由成功构建触发，一些用于执行更多测试（集成），由成功的早期测试触发，一些用于部署，由成功通过所有测试触发。

Look at plugins like join, build pipeline, parametrized trigger and more to help out with this.

This will also allow things to happen in parallel, by using multiple nodes. Trying to cram everything in one job is not the way to go.

# php - facebook 实时更新不会发布到 callback.php

> ID：13056069
> 
> 赞同：0
> 
> 时间：2012-10-24T19:10:13.430
> 
> 标签：php, facebook, callback, real-time-updates

我在这里订阅了[https://developers.facebook.com/apps/301135526661971/realtime?save=1](https://developers.facebook.com/apps/301135526661971/realtime?save=1)到实时更新成功“测试”没问题。我的“字段”设置为“online_presence”、“朋友”、“状态”、“状态”，但 Facebook 从不更新我！？这是我的回调.php：

```
<html><head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
        <script type="text/javascript" src="jquery-1-7-2.js"></script>
<style>
body{font-style:normal;font-size;12px/1.1em;font-family:"lucida grande",tahoma,verdana,arial,sans-serif;line-height:1.4em;font-size:62.5%;background-color:#FFFFFF;}
A.update:link {text-decoration:none;color:#DEE3ED;font-weight:bold;}
A.update:visited {text-decoration:none;color:#DEE3ED;font-weight:bold;}
A.update:active {text-decoration:none;color:#DEE3ED;font-weight:bold;}
A.update:hover {text-decoration:none;color:#FFF;font-weight:bold;}
.Bf{width:183px;height:34px;background-color:#FAFAFA;border-style:none;border-top-style:solid;border-top-width:1px;border-color:#D8DFEA;}
</style>

<script>
var NN = 0;
var Q; //FQL
var meid,me;//Qid is every one including me

window.fbAsyncInit = function(){
    FB.init({ appId:'0000000000',status:true,cookie:true,xfbml:true,oauth:true,hideFlashCallback:true});
    FB.getLoginStatus(function(response){
    if(response.status==='connected'){
        FB.api('/me',function(response){me=response.name;meid=response.id;getFriends();});
        }
    else{
        FB.login(function(response){if(response.authResponse){
        FB.api('/me',function(response){me=response.name;meid=response.id;getFriends();});
        }},{scope:'friends_online_presence,user_status,user_birthday,friends_birthday,publish_stream,user_photos,friends_photos'});
        }});};

var Pt1 = '<div class="Bf"value="';
var Pt2 = '"title="';
var Pt3 = '"><img width="30px"height="30px"style="margin:2px;"align="left"src="http://graph.facebook.com/';
var Pt4 = '/picture?type=square"/>';
var Pt0 = '<br><span id="BD"></span></div>';

function getFriends(){
    Q=FB.Data.query("SELECT name,uid,online_presence FROM user WHERE (online_presence=='active' OR online_presence=='idle') AND uid IN (SELECT uid2 FROM friend WHERE uid1 = me()) ORDER BY online_presence");
    Q.wait(function(rows){$.each(rows,function(index,f){
    //
    if(f.online_presence=='active'){    $('#non').append(Pt1+f.uid+Pt2+f.name+Pt3+f.uid+Pt4+'<a href="http://facebook.com/'+f.uid+'"target="_blank">'+f.name+'</a><br><img src="R/fbactive.png"></div>');}
    else if(f.online_presence=='idle'){ $('#non').append(Pt1+f.uid+Pt2+f.name+Pt3+f.uid+Pt4+'<a href="http://facebook.com/'+f.uid+'"target="_blank">'+f.name+'</a><br><img src="R/fbidle.png"></div>');}
    //
    $('.Bf').unbind().bind('hover',function(){$(this).css("background-color","#FFFFFF");},function(){$(this).css("background-color","#FAFAFA");}).bind('click',function(){});
    NN++;
    if(NN==rows.length){
            NN=0;$('#Flist').prepend('<img style="margin:2px;height:30px;"align="left"src="http://graph.facebook.com/'+meid+'/picture?type=square"/><b>'+me+'</b><br><br><br>');
            }});});}

</script>
</head><body>
<?php define('VERIFY_TOKEN','011235813');$method = $_SERVER['REQUEST_METHOD'];if($method=='GET' && $_GET['hub_mode']=='subscribe' && $_GET['hub_verify_token']==VERIFY_TOKEN) {echo $_GET['hub_challenge'];}else if($method=='POST'){$updates=json_decode(file_get_contents('php://input'),true);echo $updates;} ?>

<div id="fb-root"></div>

<div id="Flist"
     style="position:absolute;width:183px;left:0px;
     background-color:#F2F2F2;
     border-color:#D8DFEA;
     border-width:1px;
     border-style:solid;
     overflow:auto;
     overflow-x:hidden;">
    <div id="non"style="width:183px;"></div>
    <br>
</div>

<script type="text/javascript">
    /*END fbAsyncInit*/(function(){var e = document.createElement('script'); e.async = true;e.src = document.location.protocol + '//connect.facebook.net/en_US/all.js';document.getElementById('fb-root').appendChild(e);}());
</script>

</body></html> 
```

我所有的代码都在这里，我很难过为什么我什么也没听到？

更新！

我尝试只使用 php：

```
<?php
require "facebook.php";
$facebook = new Facebook(array('appId'  => '000000','secret' => '0000',));
$user = $facebook->getUser();
if($user){
    try{
        $me = $facebook->api('/me');
        echo 'logged in';
        define('VERIFY_TOKEN','011235813');
        $method = $_SERVER['REQUEST_METHOD'];
        if($method=='GET' && $_GET['hub_mode']=='subscribe' && $_GET['hub_verify_token']==VERIFY_TOKEN) {echo $_GET['hub_challenge'];}
        else if($method=='POST'){$updates=json_decode(file_get_contents('php://input'),true);echo $updates;}
        }catch(FacebookApiException $e){$user=null;}
}
?> 
```

但 facebook 仍然没有发布到我的回调中......

更新： ![online_presence 由 facebook 提供](../Images/ae09933013a1677b6e8c52c0374b93d8.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-04T13:12:29.223

`online_presence`无法通过实时更新获得，可能的字段是

*   喂养
*   朋友们
*   活动
*   兴趣
*   音乐
*   图书
*   电影
*   电视
*   喜欢
*   签到
*   地点
*   事件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-25T22:43:59.827

如果您想要用户状态消息的实时更新，您必须在订阅中启用“提要”（在“字段”下）。

# html - 让容器识别 css 浮动而不是自动调整高度

> ID：13056073
> 
> 赞同：1
> 
> 时间：2012-10-24T19:10:34.973
> 
> 标签：html, css, css-float

![例子](../Images/a78c44bb9779ca7a6d7ea4e9cb29ddea.png)

我正在尝试浮动多个 div（图中 2 个，稍后将添加另一个）。问题是站点容器在设置为自动时似乎忽略了它们。我不确定这是否是容器 css 或用于 div 的 css 有问题。我将如何让站点容器识别浮动？提前致谢。

相关HTML：

```
<div id="storehours">
    <div id="hoursheader"><p>Shop Hours</p></div>
</div> 
```

相关CSS：

```
#storehours {
    border: 1px solid black;
    -webkit-border-radius: 2px;
    -moz-border-radius: 2px;
    border-radius: 2px;
    margin-left: 11px;
    margin-bottom: 15px;
    width: 250px;
    height: auto;
    float: left;
} 
```

（该代码用于右侧的 div，左侧的代码相同，但包含表单，我认为这不是问题。）

编辑：更新了清除和固定的大写字母。仍然有同样的问题。

编辑2：为了澄清。html 位于还包含谷歌地图的容器中。如您所见，浮动导致容器忽略它们，它们从容器底部开始。我可以通过在容器上设置一个高度而不是让它自动来解决这个问题，但这是一个好的做法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T20:36:38.860

您应该添加`overflow:hidden;`容器的样式`<div id="storehours">` 。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T19:13:37.677

这是因为你没有清除你的浮动使用这个

```
<div style="clear: both;"></div> 
```

# c# - 如何在不循环的情况下通过给定字符串选择列表框中的字符串条目？

> ID：13056075
> 
> 赞同：-3
> 
> 时间：2012-10-24T19:10:40.873
> 
> 标签：c#, wpf, listbox

在 WPF 中没有 listbox.findString。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T19:12:28.337

```
var entries = listBox.Items.Where(item => item.ToString() == "something"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T19:16:14.773

假设我们有一个列表框：

```
ListBox b = new ListBox(); 
```

然后你可以使用 LINQ：

```
 int index = b.Items.IndexOf((
            from ListBoxItem a in b.Items
            where a.Content.ToString() == "something"
            select a).First()); 
```

或者您可以使用 foreach：

```
 foreach (ListBoxItem lbi in b.Items)
        {
            if (lbi.Content is string && (string)lbi.Content == "something")
            {
                index = b.Items.IndexOf(lbi);
                break;
            }
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T19:30:39.260

在大多数情况下，您希望将 ListBox 的 ItemsSource 绑定到实现 IEnumerable 的代码中的实际集合，然后使用 .Where().First() 语句查找字符串的第一次出现，如下所示：

```
List<string> lstb = new List<string>() { "StringA", "StringB", "StringC" };
string stringC = lstb.Where(s => s == "StringC").First(); 
```

然后，如果您想以编程方式选择列表中的项目：

```
yourListBox.SelectedItem = stringC; 
```

但是，我强烈建议您花时间了解数据绑定和 MVVM 模型，该模型大大简化了与 WPF 控件的交互。

# javascript - Easel.js stage.clear() 不工作

> ID：13056076
> 
> 赞同：10
> 
> 时间：2012-10-24T19:10:42.570
> 
> 标签：javascript, html, canvas, easeljs

非常简单的概念，但它似乎不起作用。这是我的代码：

```
stage.clear();
stage.update(); 
```

简单的东西——什么也没发生。文档没有帮助。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-05T21:57:19.097

这最终为我工作：

```
stage.removeAllChildren();
stage.update(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-20T07:02:01.113

如果你在那个舞台上只有一个形状的孩子并且不想使用 removeallchildren，你可以这样做：

```
myshape.graphics.clear();
stage.update(); 
```

如果超过一个，则循环其子项。

# playorm - 我可以按 playORM 中的嵌入字段进行索引吗？

> ID：13056078
> 
> 赞同：1
> 
> 时间：2012-10-24T19:11:03.583
> 
> 标签：playorm

我在 playORM 中映射了一个实体用户。该实体有一个嵌入字段：

```
@NoSqlEmbedded
private List<String> publisherIds = new ArrayList<String>(); 
```

我需要编写一个方法`findUsersByPublisher`，它将接收一个字符串`publisherId`作为参数并返回关联的用户。

有可能这样做吗？或者我是否需要创建另一个实体 Publisher 才能以我想要的方式索引？

在肯定的情况下，我会`@NoSqlIndexed`为这个字段添加注释吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T23:27:18.823

我们打算支持类似的东西，但现在不支持。我正在考虑类似 select u from Users as u where u.publisherIds contains("value1", "value2")

现在虽然还没有对此的支持。

院长

# java - 停止观看目录的更改（清理）

> ID：13056080
> 
> 赞同：5
> 
> 时间：2012-10-24T19:11:06.323
> 
> 标签：java, multithreading, swing, nio

我按照java教程实现了一个目录观察器：[https ://blogs.oracle.com/thejavatutorials/entry/watching_a_directory_for_changes](https://blogs.oracle.com/thejavatutorials/entry/watching_a_directory_for_changes)

我将它放在更新 JList 的单独线程上。一切似乎都运行良好，我想知道的是：我是否需要在某处进行某种类型的清理，如果是这种情况，最好的方法是什么。因为该线程基本上一直在等待以防万一发生某些事情，然后它又回到等待下一次更改。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T03:01:24.963

您应该关闭 WatchService。

[http://openjdk.java.net/projects/nio/javadoc/java/nio/file/WatchService.html#close](http://openjdk.java.net/projects/nio/javadoc/java/nio/file/WatchService.html#close) ()

显然，如果您要在程序执行期间观看相同的路径，您可以退出并依靠操作系统进行清理。

# vba - VBA 从共享驱动器的未打开工作簿中获取信息

> ID：13056081
> 
> 赞同：0
> 
> 时间：2012-10-24T19:11:07.773
> 
> 标签：vba, excel

我很好奇VBA中代码的格式是什么......

从特定文件夹子集中的特定工作簿中的特定工作表中获取特定行。

例如：从 Wkbk2 的 Sheet1 中的数据填充 Wkbk1 中的 Sheet1，该数据位于某个共享驱动器中....

有任何想法吗？

编辑：

我意识到这可能是一个模糊的帖子，所以我将尝试更详细地解释。

我正在寻找允许我执行以下操作的代码。

*   启用 WkBk 1 中的宏以从 WkBk 2 中提取数据。
*   WkBk 2 位于共享驱动器内并且已关闭。
*   我想从 WkBk 2 中提取特定数据并将该数据填充到 WkBk 1 中的特定行中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T19:25:53.357

下面的代码可以变得更准确或更高效，但它会让你开始：

```
Option Explicit

Sub PullFromFile()

Dim wkb as Workbook, wkbFrom as Workbook

Set wkb = ThisWorkbook '-> assuming the workbook you want to copy to has code in it
Set wkbFrom = Workbooks.Open("S:\Me\letsshare\thisfile.xlsx")

Dim wks as Worksheet
Set wks = wkbFrom.Sheets("mySpecificSheet")

Dim rng as Range
Set rng  = wks.Rows("1:3") '-> set your specific rows, here

rng.Copy wkb.Sheets("whichSheet").Range("A1") '-> adjust to your settings

wkbFrom.Close False

End Sub 
```

# ruby-on-rails - rspec - 为什么这个 assert_equal 比较测试适用于 Mac 而不是 Ubuntu？

> ID：13056086
> 
> 赞同：1
> 
> 时间：2012-10-24T19:11:28.997
> 
> 标签：ruby-on-rails, ruby, rspec, assert

> **可能重复：**
> [rspec - 为什么这个属性比较使用 assert_equal 当它们相同时会失败，仅在 ubuntu 上？](https://stackoverflow.com/questions/12791943/rspec-why-does-this-attribute-comparison-usng-assert-equal-fail-when-they-are)

```
Ruby: 1.9.3-p194  
Rails: 3.2.8  
Ubuntu: 12.04 
```

测试有很多设置，然后最终会：

```
assert_equal @iep_service.attributes, IepService.first.attributes 
```

在 mac 上工作，但在 ubuntu 上失败：

```
 2) Iep Service Spreadsheet A typical district With pre-existing students And a pre-existing Iep Service for one of those students And an Iep S[52/427$
SV Prevent importing
     Failure/Error: assert_equal @iep_service.attributes, IepService.first.attributes
     MiniTest::Assertion:
       <{"id"=>212,
        "duration"=>30,
        "frequency"=>3,
        "period"=>"week",
        "group_size"=>"group",
        "location"=>nil,
        "service"=>nil,
        "area_of_need"=>"speech",
        "created_at"=>Wed, 24 Oct 2012 18:59:47 UTC +00:00,
        "updated_at"=>Wed, 24 Oct 2012 18:59:47 UTC +00:00,
        "therapist_id"=>nil,
        "start_date"=>nil,
        "end_date"=>nil,
        "student_id"=>233,
        "adhoc"=>false}> expected but was
       <{"id"=>212,
        "duration"=>30,
        "frequency"=>3,
        "period"=>"week",
        "group_size"=>"group",
        "location"=>nil,
        "service"=>nil,
        "area_of_need"=>"speech",
        "created_at"=>Wed, 24 Oct 2012 18:59:47 UTC +00:00,
        "updated_at"=>Wed, 24 Oct 2012 18:59:47 UTC +00:00,
        "therapist_id"=>nil,
        "start_date"=>nil,
        "end_date"=>nil,
        "student_id"=>233,
        "adhoc"=>false}>.
     # (eval):2:in `assert_equal'
     # ./spec/models/iep_service_spreadsheet_spec.rb:71:in `block (6 levels) in <top (required)>' 
```

如果有帮助，完整的来源是：

```
context "A typical district" do
  before(:each) { set_up_district }

  context "With pre-existing students" do
    before(:each) { StudentSpreadsheet.new(@district, open_spec_fixture_file('sample-students.csv')) }

    context "And a pre-existing Iep Service for one of those students" do
      before(:each) { @iep_service = FactoryGirl.create(:iep_service, :student => @district.students.first) }

      context "And an Iep Service CSV" do
        before(:each) { @spreadsheet = IepServiceSpreadsheet.new(@district, open_spec_fixture_file('sample-ieps.c    sv')) }
        specify "Prevent importing" do
          # Leave database untouched
          assert_equal 1, IepService.count
          assert_equal @iep_service.attributes, IepService.first.attributes

          # Provide error report
          assert @spreadsheet.error_report.any?
        end
      end
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T21:04:43.730

assert_equal uses the operator/method ==.

You can read the documentation for assert_equal here: [http://ruby-doc.org/core/classes/Test/Unit/Assertions.html#M006665](http://ruby-doc.org/core/classes/Test/Unit/Assertions.html#M006665). It comes directly from Ruby, Rails don't overrides the definition.

So depending on the object type the == bahaves differently, and also as it comes from Ruby there may be a different implementation or slightly difference in the ruby code.

Anyways, it is better for you to compare value by value or live with the == comparison may bring to you.

# javascript - 如何在新的 javascript 函数中引用 self？

> ID：13056095
> 
> 赞同：3
> 
> 时间：2012-10-24T19:12:15.850
> 
> 标签：javascript, scope

我正在尝试使用 Javascript 创建一个“类”工厂，以便我可以创建不同类型的对象。

这是我正在使用的功能：

```
var Class = function(methods) {   
    var klass = function() {
        var self = this;
        this.initialize.apply(this, arguments);
    };  

    for (var property in methods) { 
       klass.prototype[property] = methods[property];
    }

    if (!klass.prototype.initialize) klass.prototype.initialize = function(){};

    return klass;    
}; 
```

然后我可以这样做：

```
var myObject = Class({
    initialize: function() { console.log(self);}
});
var createdObject = new myObject(); 
```

但是，console.log(self) 总是指的是窗口，我希望它指的是对象本身。

我知道这是一个范围问题，但我对如何创建对对象的引用感到困惑？

我正在尝试使用 Javascript 创建一个“类”工厂，以便我可以创建不同类型的对象。

这是我正在使用的功能：

```
var Class = function(methods) {   
var klass = function() {
    var self = this;
    this.initialize.apply(this, arguments);
};  

for (var property in methods) { 
   klass.prototype[property] = methods[property];
}

if (!klass.prototype.initialize) klass.prototype.initialize = function(){};

return klass; 
```

};

然后我可以这样做：

```
var myObject = Class({
    initialize: function() { console.log(self);}
});
var createdObject = new myObject(); 
```

但是，console.log(self) 总是指的是窗口，我希望它指的是对象本身。

我知道这是一个范围问题，但我对如何创建对对象的引用感到困惑？

例如，如果我想做：

```
var myObject = Class({
    initialize: function() { 
       $('#myDiv').click( function() {
           self.anotherFunction();
       });
    },

    anotherFunction: function() {
        alert('hi');
    }
}); 
```

我需要能够用自己引用“myObject”...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T19:15:12.290

使用`this`而不是`self`. self 将无法访问以`initialize`发挥作用，因为它是在范围之外定义的`klass self`

最好的选择是`self`在每个函数中定义为我提供的最后一个解决方案。

```
var myObject = Class({
    initialize: function() { console.log(this);}
}); 
```

或者

```
 var myObject = Class({
        initialize: function() { console.log(createdObject);}
    }); 
```

或者

```
var myObject = Class({
            initialize: function() { var self = this; console.log(self );}
        }); 
```

# visual-studio-2012 - CSS 区域在 Visual Studio 2012 中不起作用

> ID：13056096
> 
> 赞同：11
> 
> 时间：2012-10-24T19:12:23.377
> 
> 标签：visual-studio-2012

我的 css 文件中有以下内容，但 css 区域不起作用。没有可单击的折叠或展开图标。

但是 C# 区域正在工作，只是 css 区域没有。

```
/*#region shared styles */
.blah { background-color: red; }
.foo { line-height: 1.2em; }
/*endregion */ 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-12-27T16:48:08.357

Your missing the '#' between the '*' and 'endregion'

try

```
/*#region shared styles */

.blah { background-color: red; }

.foo { line-height: 1.2em; }

/*#endregion */ 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-10-24T19:36:05.637

不知道为什么，但是这样做之后，它现在可以工作了：

*   输入`region`css文件，然后按`tab`两次
*   它会自动插入 CSS 区域签名

之后，它适用于新创建的 CSS 区域。但我的旧 CSS 区域仍然无法正常工作。

![在此处输入图像描述](../Images/76f0cf196580d86eabe6709560243cd2.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T19:13:50.423

Visual Studio 不支持 CSS 区域。

您需要安装[Web Essentials 2012 扩展](http://visualstudiogallery.msdn.microsoft.com/07d54d12-7133-4e15-becb-6f451ea3bea6)，它添加了 CSS 区域以及许多其他不错的功能。

# c# - SelectSingleNode Html 文档

> ID：13056097
> 
> 赞同：1
> 
> 时间：2012-10-24T19:12:26.963
> 
> 标签：c#, html-agility-pack, nullreferenceexception

目前我正在处理来自网站的 c# 中的 HtmlDocument：

```
return doc.DocumentNode.SelectSingleNode("//span[@title=input]").InnerText; 
```

我想从标题为“输入”的跨度中获取内部文本。以上是我当前的代码，但在尝试运行它时收到 NullReferenceException。为了从“输入”中检索文本，我的隐式参数应该是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T19:14:15.730

您必须在 XPath 表达式中用引号分隔字符串：

```
return doc.DocumentNode.SelectSingleNode("//span[@title='input']").InnerText; 
```

Plain`input`将尝试按该名称匹配节点并替换其值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T19:28:09.880

确保`span`具有属性的元素`title`存在于您的`HtmlDocument`对象中，其值为“输入” `HtmlAgilityPack`。

为了正确检查，请尝试以下代码：

```
if (doc.DocumentNode != null)
{
    var span = doc.DocumentNode.SelectSingleNode("//span[@title='input']");

    if (span != null)
        return span.InnerText;
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-25T18:49:23.007

```
return doc.DocumentNode.SelectSingleNode("//span[@title='"+input+"']").InnerText; 
```

Because input is not a string, it has to be concatenated to fit the parameters. Thanks for all of you help!

# php - 如何从 .php 文件中检索数据

> ID：13056100
> 
> 赞同：0
> 
> 时间：2012-10-24T19:12:28.660
> 
> 标签：php, iphone, ios, xcode

我有一个查询 MySQL 数据库并获取行值的 .php 文件。*（一组名称）*我希望在 Xcode 中用这些值填充表格视图。（适用于 iOS）***我如何从我的应用程序中访问 .php 文件？***任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T19:18:04.493

您可以访问 url 以查看浏览器中的数据吗？这是第一步。先让它工作。设置好之后，在 xcode 中形成该 url。如果它是动态的（有参数），请确保正确创建了 url。然后只需通过 http 请求调用以获取该 url。确保服务器 (php) 和您的客户端 (应用程序) 使用相同的格式、json、xml、纯字符串等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T19:24:15.620

假设您对 obj-c 有所了解 - 您可以创建一个 url 处理程序来与您的服务器通信。然后，在制作正确的 .h 文件后，您将调用这样的函数，该函数从您的 php 脚本的 json 结果中返回一个 NSArray：

```
-(NSArray *) getUrl: (NSString *)myRequestString: (NSString *)jsonKey{
    NSError *error = nil;
    NSData *jsonData = [NSData dataWithContentsOfURL:[NSURL URLWithString:myRequestString]];

    if (jsonData) {

        id jsonObjects = [NSJSONSerialization JSONObjectWithData:jsonData options:NSJSONReadingMutableContainers error:&error];

        if (error) {
            NSLog(@"error is %@", [error localizedDescription]);

            // Handle Error and return
            return;

        }

        NSArray *jsonItems = [jsonObjects objectForKey:jsonKey];
        if(jsonItems == nil || [jsonItems count] > 0)
        {
            return [jsonObjects objectForKey:jsonKey];
        }

    } else {
        NSLog(@"not working");
    } 

    return [[NSArray alloc] init];
} 
```

您传递要调用的 url 以及该结果中预期的 json 键的位置。你不需要每个说的 json 密钥，但我用它来抽象请求出于某种原因。这几乎只是一个示例，因此除非您可以浏览代码并了解每个部分的作用，否则不要将其放入并期望它能够完美运行。

这不是一个很好的例子，但重要的部分是：

```
dataWithContentsOfURL 
```

如果您使用任何版本的 ios 进行谷歌搜索，您应该会找到至少六个完整工作的示例。

在阅读大量教程之前，我将停在那里，因为那里有很多很多。如果您有更具体的问题要问，请发表评论，我可能会更新我的答案。

# c# - 在每行中删除没有 char 的 Hexa

> ID：13056107
> 
> 赞同：1
> 
> 时间：2012-10-24T19:13:03.387
> 
> 标签：c#, line

我有来自 TextBox1 的数据

```
00 00 00 4E FF 53 4D 42 25 00 00 00 00 18 01 28  ...N.SMB%......(
00 00 00 00 00 00 00 00 00 00 00 00 00 08 12 8B  ................
01 08 7E 31 11 00 00 05 00 00 00 00 00 00 00 02  ..~1............ 
```

我试图在结果 TextBox2 上将其更改为这样

```
...N.SMB%......(
................
..~1............ 
```

我试过函数 *. remove 但只删除第一行，但不删除第二行，依此类推。有谁能够帮我？

我用这个代码

```
string test = rtText1.Text;
rtText2.Text = test.Remove(0, 48); 
```

然后这个结果 rtText2

```
...N.SMB%......(
00 00 00 00 00 00 00 00 00 00 00 00 00 08 12 8B  ................
01 08 7E 31 11 00 00 05 00 00 00 00 00 00 00 02  ..~1............ 
```

我怎样才能使命令“ *test.Remove (0, 48);* ”可以在每一行上完成？还是有其他功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T19:21:56.520

根据您发布的内容，很难准确地说出您需要什么，但正则表达式可能在这里工作得很好：

```
TextBox2.Text = System.Text.RegularExpressions.Regex.Replace(
                    TextBox1.Text, 
                    @"^.{49}", 
                    "", 
                    RegexOptions.Multiline ); 
```

这将简单地将每行的前 49 个字符替换为空字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T19:35:19.893

在我看来，好像您正在尝试删除右侧任何字符串的十六进制表示。

这对我有用：

```
// Initial data
string Data = @"00 00 00 4E FF 53 4D 42 25 00 00 00 00 18 01 28  ...N.SMB%......(
00 00 00 00 00 00 00 00 00 00 00 00 00 08 12 8B  ................
01 08 7E 31 11 00 00 05 00 00 00 00 00 00 00 02  ..~1............";
// An array containing each line of data
string[] lines = Data.Split('\n');
Data = "";
// Loop for each line, removing each "byte" + it's space, plus the trailing space
for (int i = 0; i < lines.Length; i++)
{
    Data += lines[i].Remove(0, (3 * 16) + 1);
    if (i != lines.Length - 1)
        Data += "\r\n";
}
Console.Write(Data); 
```

这是输出：

`...N.SMB%......(
................
..~1............`

[ideone链接](http://ideone.com/ZFdL3v)

# c++ - 仅当类型具有“<<”运算符时才重载？

> ID：13056108
> 
> 赞同：4
> 
> 时间：2012-10-24T19:13:08.107
> 
> 标签：c++, templates, c++11, operator-overloading, typetraits

我有一个为许多类型重载的函数。但我目前的问题是由于这个（LWS 这里：[lws](http://liveworkspace.org/code/70af7df0a40e16612591381c56535b0d)）：

```
#include <iostream>
#include <string>
#include <sstream>
#include <type_traits>

// First version
template<typename T, class = typename std::enable_if<std::is_fundamental<T>::value>::type> 
std::string f(const T& x)
{
    return std::to_string(x);
}

// Second version
template<typename... T> 
std::string f(const std::tuple<T...>& x)
{
    return std::to_string(sizeof...(T)); // It's just an example here
}

// Third version
template<typename T, class = typename std::enable_if<!std::is_fundamental<T>::value>::type, class = void> 
std::string f(const T& x)
{
    std::ostringstream oss;
    oss<<x;
    return oss.str();
}

// Main
int main(int argc, char* argv[])
{
   std::cout<<f(42)<<std::endl;
   std::cout<<f(std::string("Hello World"))<<std::endl;
   std::cout<<f(std::tuple<int, int, int, int, int, int>(4, 8, 15, 16, 23, 42))<<std::endl;
   return 0;
} 
```

我的问题是，当我们调用`f()`a时`std::tuple`，会执行第三个版本而不是第二个版本。

如何解决这个问题（一个解决方案是只允许第三个版本用于`<<`定义的类型，但我不知道该怎么做，如果这是解决问题的最佳方法）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T19:30:47.957

您唯一的问题是您忘记了`#include <tuple>`，这在 LWS 上的错误中显示。[这是一个可以正确编译的固定版本](http://liveworkspace.org/code/6df329fc40e39c4a7466694851978ecd)。第二个重载总是比第三个更好的匹配，因为它根据部分排序规则*更专业。*

如果您仍然想知道如何检查是否存在触发 SFINAE 的函数（如果它不存在），请在专门针对该主题的问题上查看[我的这个答案。](https://stackoverflow.com/a/9154394/500104):) 它甚至有一个非常符合你想要的例子。

# android - Android：运行时错误“无法创建目录”，使用类 DownloadManager，方法 setDestinationInExternalPublicDir

> ID：13056109
> 
> 赞同：5
> 
> 时间：2012-10-24T19:13:08.597
> 
> 标签：android, runtime-error, download-manager

我得到了这个例外：

```
10-24 17:08:19.711: E/AndroidRuntime(1379): FATAL EXCEPTION: main
10-24 17:08:19.711: E/AndroidRuntime(1379): java.lang.RuntimeException: Unable to start activity ComponentInfo{br.com.campusfqm.cfqm/br.com.campusfqm.cfqm.DownloadManagerActivity}: java.lang.IllegalStateException: Unable to create directory: /mnt/sdcard/Download
10-24 17:08:19.711: E/AndroidRuntime(1379):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1736)
10-24 17:08:19.711: E/AndroidRuntime(1379):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1752)
10-24 17:08:19.711: E/AndroidRuntime(1379):     at android.app.ActivityThread.access$1500(ActivityThread.java:123)
10-24 17:08:19.711: E/AndroidRuntime(1379):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:993)
10-24 17:08:19.711: E/AndroidRuntime(1379):     at android.os.Handler.dispatchMessage(Handler.java:99)
10-24 17:08:19.711: E/AndroidRuntime(1379):     at android.os.Looper.loop(Looper.java:126)
10-24 17:08:19.711: E/AndroidRuntime(1379):     at android.app.ActivityThread.main(ActivityThread.java:3997)
10-24 17:08:19.711: E/AndroidRuntime(1379):     at java.lang.reflect.Method.invokeNative(Native Method)
10-24 17:08:19.711: E/AndroidRuntime(1379):     at java.lang.reflect.Method.invoke(Method.java:491)
10-24 17:08:19.711: E/AndroidRuntime(1379):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)
10-24 17:08:19.711: E/AndroidRuntime(1379):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
10-24 17:08:19.711: E/AndroidRuntime(1379):     at dalvik.system.NativeStart.main(Native Method)
10-24 17:08:19.711: E/AndroidRuntime(1379): Caused by: java.lang.IllegalStateException: Unable to create directory: /mnt/sdcard/Download
10-24 17:08:19.711: E/AndroidRuntime(1379):     at android.app.DownloadManager$Request.setDestinationInExternalPublicDir(DownloadManager.java:466)
10-24 17:08:19.711: E/AndroidRuntime(1379):     at br.com.campusfqm.cfqm.DownloadManagerActivity.download(DownloadManagerActivity.java:51)
10-24 17:08:19.711: E/AndroidRuntime(1379):     at br.com.campusfqm.cfqm.DownloadManagerActivity.onCreate(DownloadManagerActivity.java:43)
10-24 17:08:19.711: E/AndroidRuntime(1379):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1048)
10-24 17:08:19.711: E/AndroidRuntime(1379):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1700)
10-24 17:08:19.711: E/AndroidRuntime(1379):     ... 11 more 
```

使用类 DownloadManager，代码如下：

```
DownloadManager.Request request = new DownloadManager.Request(Uri.parse("http://centraldemangas.com.br/forum/dbtech/vbshop/images/gifts/pidgey.gif"));
          request.setAllowedNetworkTypes(Request.NETWORK_MOBILE | Request.NETWORK_WIFI);
          request.setAllowedOverRoaming(false);
          request.setTitle("pidgey.gif");
          request.setDestinationInExternalPublicDir(Environment.DIRECTORY_DOWNLOADS,"pid.gif");
          id = downloadManager.enqueue(request); 
```

异常指向`request.setDestinationInExternalPublicDir(Environment.DIRECTORY_DOWNLOADS,"pid.gif");`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T19:31:21.200

问题出在

> 无法创建目录：/mnt/sdcard/Download

尝试这个：

```
String name = Environment.getExternalStorageDirectory().getAbsolutePath();

name += "/YourDirectoryName/" ; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T15:08:45.297

我认为您在创建模拟器时没有提供 sd 卡大小。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-24T19:15:41.583

您的清单中是否有适当的权限？

请参阅 [WRITE_EXTERNAL_STORAGE](http://developer.android.com/reference/android/Manifest.permission.html#WRITE_EXTERNAL_STORAGE)和 [READ_EXTERNAL_STORAGE](http://developer.android.com/reference/android/Manifest.permission.html#READ_EXTERNAL_STORAGE)权限

# windows - 如何访问 Windows 中监视器显示的大“识别”数字？

> ID：13056113
> 
> 赞同：1
> 
> 时间：2012-10-24T19:13:15.143
> 
> 标签：windows, multiple-monitors, monitors

设置多台显示器时，Windows 控制面板允许您通过在每台显示器上绘制一个大数字来识别每台显示器。“1”、“2”、“3”等

有没有办法以编程方式检索这个数字？

从 EnumDisplayMonitors 返回的订单不这样做。我也试过 EnumDisplayDevices，它返回不同的顺序。

有什么线索吗？

# php - 如何通过固定模板显示不同的数据而不制作多个稍微改变的“包含”文件？

> ID：13056116
> 
> 赞同：-2
> 
> 时间：2012-10-24T19:13:34.137
> 
> 标签：php, html, mysql, xml

我有一个不同商店的数据库。

当用户单击商店名称时，我希望 Ajax 函数运行在不同的 div 中显示有关商店的信息。

所有商店的信息类别将相同：所携带的产品、位置、一般信息等。

我可以很容易地做到这一点，以便每个不同的商店使用不同的文件名作为 ajax 函数的参数，并且所有文件都将具有相同的布局/格式但具有不同的数据。

但是我觉得这是一种不好的形式。我怎样才能做到这一点，以便我拥有一个固定的模板，而所有的变化都是输入到模板中的信息细节？

请注意，商店信息显示页面还需要能够拥有自己的可点击链接（即点击位置并弹出谷歌地图）。

它与XML有关吗？我对此了解不多。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T00:54:47.863

不是返回模板，而是返回数据。

所以它说`getstore.php?id=2`which 返回一个 json 字符串 `{"name":"my store", "info" :"blah"}`

然后，您使用 java 脚本插入一个新的`div`，填充了该数据。

# ruby - 使用 Ruby 的 Threesum 算法

> ID：13056117
> 
> 赞同：0
> 
> 时间：2012-10-24T19:13:35.213
> 
> 标签：ruby, algorithm

问题是 - 有多少三个数字（提供的）总和为零？

我想知道，如何在 ruby​​ 中实现这种蛮力方法（如下）？主要方面是：在 for 循环的地方使用什么更好？次？a - 是整数数组，即提供的数据

```
int N = a.length;
int count = 0;
for(int i = 0; i<N; i++)
  for(int j = i+1; j<N; j++)
    for(int k = j+ 1; k<N; k++)
      if (a[i] + a[j] + a[k] == 0 )
        count++;
return count; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T19:21:48.390

怎么样：

```
a.combination(3).count{|x,y,z| x+y+z==0} 
```

但是我在这里没有与 Rails 的联系；）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-04-15T16:25:38.567

```
def two_sum(nums, target)
    seen = Hash.new
    result = []
    nums.each_with_index do |e, i|
        if seen.has_key?(target-e)
            result << [seen[target-e], i]
        else
            seen[e] = i
        end
    end
    return result
end

def three_sum(nums)
    nums.sort!
    seen = Hash.new
    results = []
    nums.each_with_index do |e, i|
        if !seen.has_key?(e)
            two_sum(nums[i + 1 .. -1], 0 - e).each do |pair|
                results << [e] + pair.map{ |j| nums[j + i + 1] }
            end
            seen[e] = i
        end
    end
    return results.count
end 
```

# .htaccess - 使用 .htaccess 不重写具有特定 GET 参数的 URL

> ID：13056119
> 
> 赞同：1
> 
> 时间：2012-10-24T19:13:38.630
> 
> 标签：.htaccess, url-rewriting, seo

以下部分写入我的 .htaccess 文件。我正在使用 ZenCart“CEON URI Mapping”模块。我遇到了一个问题，因为 PHP 脚本的一部分会查找某个变量并在找到时显示一个 CSS 显示框。

我需要做的是让 htaccess 在设置时不使用“amznPmtsOrderIds”GET 参数重写 URL。

我将如何将其纳入以下内容：

```
# BEGIN CEON URI MAPPING
# Don't rewrite any URIs ending with a file extension (ending with .[xxxxx])
RewriteCond %{REQUEST_URI} !\.[a-z]{2,5}$ [NC]
# Don't rewrite admin directory
RewriteCond %{REQUEST_URI} !^/admin [NC]
# Don't rewrite editors directory
RewriteCond %{REQUEST_URI} !^/editors [NC]
# Don't rewrite cPanel directories
RewriteCond %{REQUEST_URI} !/cpanel [NC]
RewriteCond %{REQUEST_URI} !/frontend [NC]
RewriteCond %{REQUEST_URI} !\.mp4$ [NC]
RewriteCond %{REQUEST_URI} !/livehelp.*$ [NC]
RewriteCond %{REQUEST_URI} !/rest.php/
RewriteCond %{REQUEST_URI} !/restInterface\.php.*$
# Handle all other URIs using Zen Cart (index.php)
RewriteRule .* index.php?%{QUERY_STRING} [L]
# END CEON URI MAPPING 
```

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T04:50:27.717

就在这条线之前......

```
# Handle all other URIs using Zen Cart (index.php) 
```

...添加这个：

```
# Don't rewrite any URIs with a "amznPmtsOrderIds" GET parameter
RewriteCond %{QUERY_STRING} !amznPmtsOrderIds [NC] 
```

# javascript - 如何使用 jasmine maven 插件在浏览器中查看所有测试规范的结果

> ID：13056123
> 
> 赞同：0
> 
> 时间：2012-10-24T19:13:53.283
> 
> 标签：javascript, jasmine, jasmine-maven-plugin

我正在使用 jasmine maven 插件，我的 pom.xml 看起来像这样：

```
 <plugin>
            <groupId>com.github.searls</groupId>
            <artifactId>jasmine-maven-plugin</artifactId>
            <version>1.2.0.0</version>
            <extensions>true</extensions>
            <executions>
                <execution>
                <goals>
                    <goal>test</goal>
                </goals>
                </execution>
            </executions>
            <configuration>
                <preloadSources>
                    <source>${project.basedir}/src/main/webapp/resources/js/jquery.js</source>
                    <source>${project.basedir}/src/main/webapp/resources/js/angular.js</source>
                    <source>${project.basedir}/src/test/javascript/lib/angular-mocks.js</source>
                    <source>${project.basedir}/src/test/javascript/lib/jasmine-fixture.js</source>
                </preloadSources>
                <jsSrcDir>${project.basedir}/src/main/webapp/resources/js/</jsSrcDir>
                <jsTestSrcDir>${project.basedir}/src/test/javascript/unit/</jsTestSrcDir>
            </configuration>
        </plugin> 
```

在该`unit`目录中，我有多个 js 文件，其中包含我要运行的所有测试。当我运行`mvn jasmine:bdd`然后进入`localhost:8234`浏览器时，它只运行目录中第一个文件的测试。当我运行`mvn jasmine:test`它时，它会运行我的所有规格。我只想知道如何在浏览器窗口中获得所有规格的结果。我希望我只是在这里遗漏了一些明显的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T19:21:28.563

抱歉，我没有注意到控制台中的错误。我的第二个规范出错了，因此没有显示。不知道为什么当我运行它命令行时它通过了，但我的问题现在已经解决了。

# wix - 对 Wix 引导程序感到困惑

> ID：13056124
> 
> 赞同：0
> 
> 时间：2012-10-24T19:14:04.983
> 
> 标签：wix, wix3.6

我无法理解 wix 文档。我创建了一个简单的安装程序，允许用户为应用程序选择目标文件夹。它看起来像这样：

```
<?xml version="1.0" encoding="UTF-8"?>
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi">
<Product Id="*" Name="AppName" Language="1033" Version="1.0.0.0" Manufacturer="Manufacturer" UpgradeCode="guid">
    <Package InstallerVersion="200" Compressed="yes" InstallScope="perMachine" />

    <MajorUpgrade DowngradeErrorMessage="A newer version of [ProductName] is already installed." />
    <MediaTemplate />

    <Feature Id="ProductFeature" Title="SetupProjectFeature" Level="1">
        <ComponentGroupRef Id="ProductComponents" />
    </Feature>

    <Property Id="WIXUI_INSTALLDIR" Value="INSTALLFOLDER" />
    <UIRef Id="WixUI_InstallDir"/>

</Product>

<Fragment>
    <Directory Id="TARGETDIR" Name="SourceDir">
        <Directory Id="ProgramFilesFolder">
            <Directory Id="INSTALLFOLDER" Name="OeeCoach" />
        </Directory>
    </Directory>
</Fragment>

<Fragment>
    <ComponentGroup Id="ProductComponents" Directory="INSTALLFOLDER">
        <!-- TODO: Insert files, registry keys, and other resources here. -->
        <Component Id="EntityFramework" Guid="guid">
            <File Id="EntityFramework.dll" Source="../App/bin/Release/EntityFramework.dll" KeyPath="yes" />
        </Component>
        <Component Id="MvvmLight.Extras" Guid="guid">
            <File Id="GalaSoft.MvvmLight.Extras.WPF4.dll" Source="../App/bin/Release/GalaSoft.MvvmLight.Extras.WPF4.dll" KeyPath="yes" />
        </Component>
    </ComponentGroup>
</Fragment>
</Wix> 
```

现在我需要检查 .net 4 及其先决条件，但我不明白这样做很热。文档说我需要使用 Bundle 元素，但是当它与同一 wix 文件中的 Product 元素一起使用时，编译器似乎会抱怨。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T10:54:03.223

引导程序是与您的设置项目分开的项目。如果您使用的是 Visual Studio，请将新项目添加到您的解决方案并选择 Bootstrapper 项目（而不是安装项目）。

# r - 使用 zelig 创建模型时出现奇怪的错误

> ID：13056125
> 
> 赞同：1
> 
> 时间：2012-10-24T19:14:10.243
> 
> 标签：r, r-zelig

```
dput(t)
structure(list(Volume = c(2625941L, 4685483L, 3160694L, 2627816L, 
2430273L, 2498011L, 2632445L, 3224434L, 2531941L, 5043867L, 2788003L, 
3278796L, 3273977L, 3192613L, 3456297L, 2668175L, 2805861L, 2689392L, 
2733510L, 3285889L, 2957370L, 3420479L, 3868692L, 4353776L, 3134759L, 
2914727L, 3160491L, 3803716L, 3427911L, 2646258L, 3616962L, 3071943L, 
3013008L, 4024996L, 4357129L, 3110560L, 3063334L, 4537971L, 1902002L, 
2618413L, 2473005L, 2844029L, 2398462L, 3406776L, 3071573L, 3714231L, 
4276458L, 3825187L, 2652650L, 3040994L, 2695117L, 3038566L, 2695652L, 
2919113L, 2840214L, 2768958L, 5246649L, 3023172L, 3565584L, 2928450L, 
3503840L, 2948165L, 3512192L, 3409995L, 3511665L, 3155152L, 3020401L, 
2758133L, 2548245L, 3033309L, 2740213L, 2851881L, 3134557L, 4445879L, 
3173913L, 3720477L, 3753070L, 3609973L, 3826284L, 4864280L, 4159588L, 
3095322L, 3138732L, 3591433L, 3063357L, 3215559L, 3258059L, 3559727L, 
4886550L, 4025763L, 4108614L, 5720774L, 4075195L, 3322352L, 3048940L, 
3249172L, 3148053L, 3321660L, 3159642L, 3976820L, 3848960L, 3466783L, 
3811408L, 6033563L, 4114751L, 3181385L, 2926695L, 2866148L, 2692198L, 
3400891L, 2922295L, 3912049L, 3079066L, 2833293L, 3560196L, 3317644L, 
3151086L, 3776538L, 5479510L, 3954497L, 3594429L, 3088262L, 2778180L, 
3532457L), SLA = c(28L, 44L, 12L, 28L, 4L, 28L, 4L, 4L, 8L, 12L, 
8L, 4L, 8L, 4L, 8L, 8L, 32L, 4L, 36L, 8L, 4L, 8L, 20L, 8L, 32L, 
12L, 32L, 8L, 16L, 40L, 8L, 20L, 4L, 4L, 8L, 20L, 16L, 4L, 12L, 
8L, 4L, 8L, 4L, 4L, 8L, 12L, 12L, 16L, 28L, 28L, 12L, 16L, 16L, 
8L, 20L, 20L, 24L, 44L, 12L, 24L, 24L, 24L, 20L, 24L, 36L, 16L, 
40L, 24L, 4L, 44L, 8L, 16L, 12L, 8L, 32L, 12L, 20L, 16L, 28L, 
8L, 24L, 24L, 4L, 4L, 8L, 8L, 4L, 12L, 8L, 44L, 12L, 24L, 40L, 
8L, 4L, 8L, 12L, 12L, 8L, 16L, 24L, 8L, 36L, 48L, 36L, 12L, 36L, 
28L, 20L, 12L, 20L, 32L, 24L, 4L, 12L, 16L, 8L, 24L, 16L, 36L, 
44L, 12L, 8L, 4L), Duration = c(21L, 25L, 15L, 13L, 15L, 20L, 
17L, 20L, 12L, 15L, 31L, 12L, 24L, 16L, 25L, 13L, 13L, 20L, 21L, 
20L, 26L, 15L, 26L, 21L, 27L, 20L, 34L, 29L, 74L, 62L, 33L, 27L, 
26L, 23L, 30L, 26L, 26L, 18L, 19L, 13L, 25L, 18L, 20L, 18L, 37L, 
20L, 22L, 25L, 24L, 22L, 42L, 17L, 18L, 18L, 28L, 18L, 28L, 32L, 
23L, 31L, 12L, 30L, 40L, 30L, 18L, 18L, 19L, 27L, 21L, 31L, 23L, 
26L, 14L, 22L, 21L, 21L, 26L, 30L, 21L, 23L, 12L, 22L, 24L, 29L, 
36L, 19L, 21L, 25L, 24L, 29L, 26L, 34L, 33L, 17L, 17L, 24L, 19L, 
18L, 12L, 18L, 11L, 19L, 22L, 48L, 49L, 25L, 16L, 43L, 18L, 18L, 
19L, 15L, 38L, 19L, 22L, 28L, 28L, 34L, 16L, 53L, 38L, 23L, 27L, 
17L)), .Names = c("Volume", "SLA", "Duration"), class = "data.frame", row.names = c(2L, 
3L, 4L, 5L, 6L, 7L, 8L, 9L, 10L, 11L, 12L, 13L, 14L, 15L, 16L, 
17L, 18L, 19L, 20L, 21L, 22L, 23L, 24L, 25L, 26L, 27L, 28L, 29L, 
30L, 31L, 32L, 33L, 34L, 35L, 36L, 37L, 38L, 39L, 40L, 41L, 42L, 
43L, 44L, 45L, 46L, 47L, 48L, 49L, 50L, 51L, 52L, 53L, 54L, 55L, 
56L, 57L, 58L, 59L, 60L, 61L, 62L, 63L, 64L, 65L, 66L, 67L, 68L, 
69L, 70L, 71L, 72L, 73L, 75L, 76L, 77L, 79L, 80L, 81L, 82L, 84L, 
85L, 86L, 87L, 88L, 89L, 90L, 91L, 92L, 93L, 94L, 95L, 96L, 97L, 
98L, 99L, 100L, 101L, 102L, 103L, 105L, 106L, 107L, 108L, 110L, 
111L, 112L, 113L, 115L, 116L, 117L, 118L, 119L, 120L, 121L, 122L, 
123L, 124L, 125L, 126L, 127L, 128L, 129L, 130L, 131L)) 
```

当我这样做时：

```
z.out1 <- zelig(Duration ~ Volume, model = "logit", data = t) 
```

我收到此错误：

```
Error in `rownames<-`(`*tmp*`, value = c(1L, 0L)) : 
  attempt to set rownames on object with no dimensions 
```

有任何想法吗？

# ruby - 如何从 ARGF 读取 csv

> ID：13056131
> 
> 赞同：5
> 
> 时间：2012-10-24T19:14:33.797
> 
> 标签：ruby, csv

在 Ruby 1.9 中，我如何从 ARGF 读取 CSV？

我尝试了以下，但它什么也没打印：

```
require 'csv'
CSV(ARGF).read do |row|
    p row
end 
```

*   [http://www.ruby-doc.org/core-1.9.3/ARGF.html](http://www.ruby-doc.org/core-1.9.3/ARGF.html)
*   [http://ruby-doc.org/stdlib-1.9.2/libdoc/csv/rdoc/CSV.html](http://ruby-doc.org/stdlib-1.9.2/libdoc/csv/rdoc/CSV.html)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T19:41:43.963

如果您想偷懒，可以尝试：

```
CSV.new(ARGF.file).each do |row|
  ...
end 
```

来源：
[http ://www.ruby-doc.org/stdlib-1.9.3/libdoc/csv/rdoc/CSV.html#label-Wrap+an+IO+Object](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/csv/rdoc/CSV.html#label-Wrap+an+IO+Object)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-01-22T21:13:24.897

正如[http://www.ruby-doc.org/stdlib-1.9.3/libdoc/csv/rdoc/CSV.html#label-Wrap+an+IO+Object](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/csv/rdoc/CSV.html#label-Wrap+an+IO+Object)中所说的使用 IO（如 ARGF）你需要创建一个新的 cvs 对象：

```
csv = CSV.new(io, options) 
```

像这样的一个例子很好用：

```
#!/usr/bin/env ruby
#file : readCSV.rb
require "csv"
csv = CSV.new(ARGF, {:col_sep=>";", :headers=>:first_row})
csv.each do |line|
  p line.to_s
end 
```

然后可以通过两种方式使用它：

1.  `cat path/to/my.csv | ./readCSV.rb | less # for useless use of cat`
2.  `./readCSV.rb < path/to/my.csv`
3.  `./readCSV.rb path/to/my.csv | less`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T19:17:37.400

```
CSV.parse(ARGF.read) do |row| 
```

这行得通，尽管它并不懒惰。

# powershell - 尝试根据 Powershell 中的二进制值从哈希表中提取值

> ID：13056136
> 
> 赞同：1
> 
> 时间：2012-10-24T19:15:01.247
> 
> 标签：powershell, binary, hashtable, operations

好的，我在工作中有一个有趣的问题。我们正在将我们的用户、应用程序和共享存储迁移到一个完全不同的系统；但是 perms 是由本地组和域级别的全局组混合设置的。问题是本地组不能直接迁移过来，所以我必须使用一个全局组属于设备本地组的矩阵来更正这些权限。很简单，我有这个工作。

现在我遇到的问题是，用户可能拥有通过本地组授予的权限（例如读取和写入），然后是通过全局权限授予的一组单独的权限（例如修改和读取和执行）。所以我的解决方案是构建一个分配给二进制值的权限列表（即 1=Read、2=write、4=read 和 execute），然后给我一个值，我可以用它来执行二进制 OR 操作确保他们从各个组中获得应有的所有权利。

现在我的问题是，一旦我有了 ORed 二进制值，我如何将它用于现有列表来提取在 set-acl 调用中分配的个人权限？任何想法和指针都非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T20:34:55.173

给定哈希表：

```
$permissions = @{read=1;write=2;readAndExecute=4} 
```

以及二进制或运算的值：

```
$oredBinary = 7 # All permissions 
```

你可以这样检查：

```
$permissions.GetEnumerator() | Where-Object { ($_.Value -band $oredBinary) -ne 0} | Select @{n='Permissions';e={$_.Name}} 
```

# twig - Twig_Error_Syntax：函数“is_granted”不存在

> ID：13056139
> 
> 赞同：6
> 
> 时间：2012-10-24T19:15:11.717
> 
> 标签：twig, silex

我正在使用 Silex，无法在模板中使用 is_granted 函数。我在文档中找不到任何关于为什么这不起作用的信息。有什么提示吗？

```
$app->register(new Silex\Provider\SecurityServiceProvider());

$app->register(new Silex\Provider\TwigServiceProvider(), array(
    'twig.path' => __DIR__.'/../templates',
    'twig.options' => array('cache' => __DIR__.'/../cache'),
));

$app['debug'] = true;

$app['security.firewalls'] = array(
    'login' => array(
                'pattern' => '^/login$',
        ),
        'secured' => array(
                'pattern' => '^.*$',
                'form' => array('login_path' => '/login', 'check_path' => '/login_check'),
                'users' => array(
                        'admin' => array('ROLE_ADMIN', '5FZ2Z8QIkA7UTZ4BYkoC+GsReLf569mSKDsfods6LYQ8t+a8EW9oaircfMpmaLbPBh4FOBiiFyLfuZmTSUwzZg=='),
                ),
        ),
);

$app->get('/', function() use ($app) {
    return $app['twig']->render('index.html.twig');
});

$app->get('/login', function(Request $request) use ($app) {
    return $app['twig']->render('login.html.twig', array(
            'error'                 => $app['security.last_error']($request),
            //'last_username' => $app['session']->get('_security.last_username'),
    ));
}); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-24T20:27:46.733

显然，我还需要添加 symfony/bridge 组件：

将此添加到 composer.json 并更新。

```
"symfony/twig-bridge": "2.1.*", 
```

嘿......它会像预期的那样工作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-31T21:48:01.820

我不得不使用这个解决方法（还不知道是否有任何缺点）

```
$function = new Twig_SimpleFunction('is_granted', function($role) use ($app){
    return $app['security']->isGranted($role);
});
$app['twig']->addFunction($function); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-02-18T10:37:49.263

根据`Symfony\Component\Security\Core\SecurityContextInterface`我们必须提供第二个参数，我们正在尝试评估哪些权利。第二个参数将发送给投票者（例如用户）

```
$function = new Twig_SimpleFunction('is_granted', function($role, 
$object = null) use ($app){
    return $app['security']->isGranted($role, $object);
});
$app['twig']->addFunction($function); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-22T04:03:09.907

问题很可能是由注册课程的顺序引起的。顺序应该是 SecurityServiceProvider 然后启动您的应用程序，然后是 TwigServiceProvider 注册。TwigServiceProvider 检查 $app['security'] 以设置 Twig SecurityExtension。所以顺序很重要

```
// Security service
$app["security.firewalls"] = array();
$app->register(new Silex\Provider\SecurityServiceProvider());

// Boot your application to call SecurityServiceProvider()->boot()
$app->boot();

// Twig service
$app->register(new Silex\Provider\TwigServiceProvider(), array(
  'twig.path' => sprintf("%s/../views", __DIR__),
)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-10-30T20:19:08.200

如果你使用 Symfony 2.6 组件，它会变成**security.authorization_checker**而不是**security**，如下所示：

```
$function = new Twig_SimpleFunction('is_granted', function($role,$object = null) use ($app){
    return $app['security.authorization_checker']->isGranted($role,$object);
});
$app['twig']->addFunction($function); 
```

# c - 在视觉工作室组装

> ID：13056144
> 
> 赞同：0
> 
> 时间：2012-10-24T19:15:47.393
> 
> 标签：c, visual-studio, assembly

我在使用 Visual Studio 时遇到问题，它无法识别 asm 中的“byte ptr”。有谁知道我应该改用什么？我使用 Visual Studio 是因为我只想在 c++ 代码旁边做一点 asm 来加快速度。所以任何人都可以检查代码，因为我不确定返回（这只是一个测试）。这对 in 也适用于 uint 吗？

```
__declspec(naked) void bewerken(int letter)
{
    __asm
    {
        push ebp
        mov ebp, esp
        sub esp, 1      // ruimte maken voor 1 variabele van 1 byte
        mov byte ptr [eax], [ebp+8]
        mov esp, ebp
        pop ebp
        ret
    }
}

int _tmain(int argc, _TCHAR* argv[])
{
    char* bYte;
    int letter;
    printf_s("Voer een letter in:\n");
    letter = getchar();

    if (letter < 128)
    {
        __asm 
        {
            push letter
            call bewerken
            add esp, 4
            mov byte ptr bYte, eax
        }
    }
    else
    {
        printf_s("Te hoog.\n");
    }

    getchar();
    return 0;
} 
```

注意：“BYTE PTR”也不编译

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T19:23:01.000

没有有效的寻址模式`mov whatever [eax], [ebp+8]`

可以`mov al, [ebp+8]`或`mov ax,[ebp+8]`和`mov eax,[ebp+8]`并且 也`mov rax,[ebp+0x132220]`可以 将立即数移动到具有立即数偏移量的地址。那将是唯一需要显式宽度属性的情况：`mov byte ptr 0x01,[ebp+8]`至少在 debug.exe 时代它是这样工作的……

在所有其他情况下，操作的宽度应该是明确的。

# crystal-reports-xi - 在 Crystal XI 中替换

> ID：13056145
> 
> 赞同：1
> 
> 时间：2012-10-24T19:15:55.600
> 
> 标签：crystal-reports-xi

好的，这是我的问题，我的文本字段已填充并包含类似于此“大 >= 10%”的文本，但是因为我无法让我们的服务器接受 ≥ 符号。我可以以及如何使用替换功能

# javascript - 如何更改订阅函数内部的可观察值？

> ID：13056146
> 
> 赞同：4
> 
> 时间：2012-10-24T19:15:55.023
> 
> 标签：javascript, jquery, knockout.js, radio-button, subscribe

如何更改订阅函数内部的可观察值？例如

JS型号：

```
function Model(){
    self = this;
    self.Test = ko.observable(2);
    self.Test.subscribe(function (){
      if (/**Some bool expression**/) {
         self.Test(2);
      }
    });
} 
```

HTML：

```
<input type="radio" value="1" data-bind="checked:Test" />
<input type="radio" value="2" data-bind="checked:Test" />
<input type="radio" value="3" data-bind="checked:Test" /> 
```

默认情况下，检查第二个无线电输入。在我点击第一个收音机后，第一个和第二个都被选中。

![在此处输入图像描述](../Images/bcbc89302cb2f862c29daed581c9b6be.png)

**更新：** 当我同时包含 jQuery 和淘汰赛时会发生这种情况。如果删除 jquery 则一切正常。但这只是测试页面。在实际项目中我需要在某些地方使用 jQuery，在这种情况下我无法删除它。

[样品](http://jsfiddle.net/k0lpak/9S96U/)。测试页面来源：

```
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <script type="text/javascript" src="knockout-2.1.0.js"></script>
        <script type="text/javascript" src="jquery-1.6.4.js"></script>
        <script type="text/javascript">
            function Model(){
                self = this;
                self.Test = ko.observable(2);
                self.Test.subscribe(function (){
                  if (true) {
                     self.Test(2);
                  }
                });
            }
        </script>
    </head>
<body>
    <input type="radio" value="1" data-bind="checked:Test" />
    <input type="radio" value="2" data-bind="checked:Test" />
    <input type="radio" value="3" data-bind="checked:Test" />
</body>
<script type='text/javascript'>
    ko.applyBindings(new Model());
</script>
</html> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-24T22:41:53.320

更新（2015-02-27）：从 Knockout 3.1.0 开始，Knockout 不包含任何`click`事件的“解决方法”代码，处理问题中的示例应该没有问题。[http://jsfiddle.net/9S96U/3/](http://jsfiddle.net/9S96U/3/)

* * *

当包含 jQuery 时，Knockout 使用它来处理事件，包括`click`用于响应单选按钮的事件。它包含一些“解决方法”代码，以确保单击处理程序看到单选按钮的正确*选中*状态，但这似乎会干扰您尝试在中间重置选中值的代码。

一种解决方案是使用 setTimeout 更新值。这样它就会在点击处理程序完成后发生。

```
function Model(){
    var self = this;
    self.Test = ko.observable(2);
    self.Test.subscribe(function (){
        setTimeout(function() {
            self.Test(2);
        });
    });
} 
```

示例：http: [//jsfiddle.net/9S96U/1/](http://jsfiddle.net/9S96U/1/)

此外，您还需要在`var`之前包含，`self = this`以免覆盖`window.self`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T21:01:24.113

订阅/发布背后的想法是，您可以让一个观察者将结果发送给多个订阅者，他们自己进行测试。

我还没有真正使用过 knockout.js，但是我已经在委托/异步流/承诺/等方面做了很多工作——主要是针对特殊情况使用轻量级自定义实现。

您的目标是拥有一个控制器，它运行一次测试（您现在拥有的），然后遍历每个控制器，确保`i - 1`选中正确的一个（），并且所有其他的都未选中......

...或者以更传统的发布者/订阅者方式，让一个发布者（比如`fieldset`可能是所有无线电控件的父元素）侦听要更改的输入之一，然后通知每个订阅者值的输入，并让他们自己进行测试。

用伪语言：

```
var subscribers = []; // array of input "Model" callbacks
                      // (ie: tests to determine whether they're off or on)

parentElement.listen("click", function (e) {
        var self = this,
            selectedRadio = e.target,
            val = selectedRadio.value;

        subscribers.forEach(function (notify) { notify(val); });
}); 
```

要处理您当前的情况，您可以使用依赖注入：

```
new Model( value ); 
```

或者

```
new Model( subscription_test_for_element ); 
```

您在哪里缓存预期的测试值，或者您在每个实例内部缓存特定于输入的测试/成功/失败逻辑......

...或者您创建一个更大的控制器（不推荐）来处理每个输入的硬编码逻辑。

当然，更具体的帮助可以基于您的模型***是****什么*、您如何实例化、为什么要将订阅硬编码到构造中（如果它将成为通用模型）等等。

# plugins - Netbeans 仅列出了 91 个插件，而插件站点有 700 多个，如何将它们全部放在列表中以便可以轻松安装

> ID：13056147
> 
> 赞同：1
> 
> 时间：2012-10-24T19:16:08.847
> 
> 标签：plugins, netbeans

Netbeans 仅列出 98 个插件，而插件站点则有 700 多个如何在列表中获取所有插件。我知道它们可以手动安装，但这对我来说没有意义。我想我必须添加一些存储库，但即使我多次使用谷歌，我也无法找到它的网址。如何获取 netbeans 本身列出的所有 700 个插件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T20:15:58.783

那里列出了大约 700 个插件。但请尝试根据您的版本对其进行过滤。我想你的版本是 7.2。有 52 个社区贡献的插件。表示已针对该版本进行了验证。其他是经过认证的插件。所有这些都已在 netbeans 插件门户中列出。

# events - 使用 gtk.TreeStore 和 gtk.ComboBox 时的并发控制

> ID：13056149
> 
> 赞同：0
> 
> 时间：2012-10-24T19:16:10.583
> 
> 标签：events, concurrency, gtk, pygtk

我正在使用 gtk.TreeStore 的两个实例（在 pyGTK 2.10 中）来创建两个下拉菜单 ComboBox 小部件；称他们为*device*和*command*。在*设备*ComboBox 中选择的值将改变*命令*ComboBox 中可用的值。进行*命令*选择时，*设备*和*命令*选择的组合用于完成更多工作（显示其他可能的参数等）

通常应该发生这样的事情：

1.  填充和设置*设备*小部件的模型
2.  连接*设备*处理程序（用于“更改”事件）
3.  连接*命令*处理程序（用于“更改”事件）
4.  显示*设备*小部件
5.  显示*命令*小部件
6.  等待选择
7.  处理*设备*选择，清除/填充*命令*小部件的模型
8.  工艺*指令*选择
9.  前往 6

现在，假设在#8 的中间，用户真的很快并返回选择另一个*设备*，并且在处理第二个*设备*-selection 事件之前，他们选择了另一个*命令*（从初始*设备*选择中填充）。第二个*命令选择事件与处理第二个**设备*选择事件后可能不再有效的上下文一起出现。

*在设备*选择处理中执行以下操作的最佳做​​法是：

1.  隐藏*命令*小部件
2.  清除事件队列（通过对所有未决事件调用 gtk.gdk.event_get()，随时释放）
3.  清除*命令*小部件
4.  [重新]填充*命令*小部件的模型
5.  显示*命令*小部件

还是有另一种更优雅的方式？我的意思是，没有一些可以强制发生的自动事件清除，对吧？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T07:56:21.043

我认为您正在尝试解决一个不存在的问题。

没错，理论上，下一个输入事件可能已经在等待，而您仍在处理最后一个输入事件。毕竟，这些事件来自 X 进程，它不会等待你处理事件。但是，小部件的状态会在您自己的主循环中按顺序更新。这意味着下一个输入事件将被解释为好像它发生在您更改小部件的状态之后一样。

这意味着，如果用户在显示命令 1 的选项时单击了设备小部件顶部的某个位置，但在您处理对命令 2 的更改时，它最终会被您的循环解释为好像用户单击了对应于命令 2 的最顶层选项。

如果用户点击的速度比您处理的速度快，那么她有责任知道她的输入可能会被解释为与她的意图不同。假设您的处理不会阻止应用程序，这是合理的。

如果是这样，那么我想最好的做法是在另一个线程中重新填充它时使另一个小部件不敏感。我不明白为什么需要对事件进行任何杂耍/清除。

作为旁注：既然您说您正在“重新填充”小部件：您是否考虑过只`GtkTreeModel`为命令和使用几个 s `gtk_tree_view_set_model`？

# php - 从 QB PHP 包装查询中获取最后一条记录 ID

> ID：13056153
> 
> 赞同：0
> 
> 时间：2012-10-24T19:16:19.287
> 
> 标签：php, api, quickbase

我正在使用 PHP quickbase 包装器，我需要获取表的最新记录 ID。

从我阅读的教程和其他材料中，我认为您需要像这样设置查询：

```
$queries = array(
        array(
            'fid'   => '3',
            'ev'    => 'ex',
            'cri'   => '2')
         );

$results = $quickbase->do_query($queries, '', '', '3'); 
```

我知道我想要的 FID 是 3，我不确定要使用什么 ev，以及如何用我的 cri 来表达最后一个或最高计数的记录 id。

我已经尝试过针对其他数据的基本查询，并且得到了 0 个回报。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T10:15:21.370

[这个http://www.quickbase.com/api-guide/index.html#getrecordinfo.html](http://www.quickbase.com/api-guide/index.html#getrecordinfo.html)怎么样

在“响应值”上尝试获取元素名称“摆脱”，也许它会帮助你？！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T16:38:16.697

您需要指定排序列表以使用字段 3 (&slist=3)，并让 options 参数按降序排序并仅返回一条记录（具有最大 [Record ID#] 的记录）：

```
&slist=3&options=sortorder-D.num-1 
```

查询将是“某些字段包含某些内容”：

```
&query={'0'.CT.''} 
```

不幸的是，这不是我们正在处理的 SQL。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T21:01:41.590

我解决了我的问题。

当我在表中提交我的第一条记录时，AI 可以获取 rid xml 对象。

```
$results = $quickbase->add_record($fields);
$rid = $results->rid; 
```

# php - php正则表达式到不是特定格式的额外字符串

> ID：13056155
> 
> 赞同：0
> 
> 时间：2012-10-24T19:16:23.100
> 
> 标签：php, regex

> **可能重复：**
> [删除括号之间的文本 PHP](https://stackoverflow.com/questions/2174362/remove-text-between-parentheses-php)

我有一个查询字符串，例如

```
string="this is my string attributeone(values) attributetwo(values,valuestwo) more string" 
```

如何编写 PHP 正则表达式来检索`"this is my string more string"` 句子中任何位置的属性数量可能不同，其中的值数量可能不同。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T19:24:59.090

```
$str = preg_replace('/[a-z]+\(.*?\) ?/', '', $input); 
```

或者

```
$str = preg_replace('/[a-z]+\([^)]*\) ?/', '', $input); 
```

这假定您的属性名称仅由小写字母组成，并且您的值永远不能包含该`)`字符。另请注意，字符串末尾的属性可能会给您留下一个尾随空格。

# java - Java 列表，每个元素有 2 个值

> ID：13056157
> 
> 赞同：3
> 
> 时间：2012-10-24T19:16:28.457
> 
> 标签：java

我需要有一个列表，其中每个元素必须有 2 个值。我想知道实现它的最佳方法是什么。我应该使用`HashSet`，`HashMap`还是别的什么？

该列表应如下所示 -

`<Elem1_val1, Elem1_val2>, <Elem2_val1, Elem2_val2>, <Elem3_val1, Elem3_val2>, .... <Elemn_val1, Elemn_val2>,`

这里重要的一点是 val1 和 val2 属于同一个 Element。什么是实现这一点的好方法？

**更新：**

1.  任何人都可以评论实施 -`List<Map.Entry<ClassA, ClassB>>`
2.  我不想有新的类，因为我只想在一个列表中存储 2 个具有某种共同关系的对象。

谢谢 ！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-24T19:17:37.060

最好的方法是使用具有[Pair](http://www.java2s.com/Open-Source/Android/android-core/platform-sdk/com/android/util/Pair.java.htm)之类的类的 List作为元素。

如果您不知道您的 val 的类，您可以将其声明为

```
List<Pair> list = new ArrayList<Pair>(); 
```

如果您知道对象的类，则可以将列表声明为

```
List<Pair<ClassA, ClassB>> list = new ArrayList<Pair<ClassA, ClassB>>(); 
```

这[是通用 Pair 实现的示例](http://www.factsandpeople.com/facts-mainmenu-5/8-java/10-java-pair-class)。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-24T19:17:13.760

如何创建一个具有两个元素的类并创建`List`该类的一个

```
class DataHelper{
  String element1;
  String element2;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-08-14T21:02:03.627

如果您不介意使用 apache：您也可以使用

```
org.apache.commons.lang3.tuple.ImmutablePair<L, R> 
```

或者

```
org.apache.commons.lang3.tuple.MutablePair<L, R> 
```

有关这些类的更多信息，请参阅[http://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/tuple/Pair.html](http://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/tuple/Pair.html)。

# ruby - 如何让工头开始上帝

> ID：13056164
> 
> 赞同：0
> 
> 时间：2012-10-24T19:17:03.293
> 
> 标签：ruby, ruby-on-rails-3, foreman, god

我有一个这样的 Procfile：

```
web: bundle exec unicorn -c config/unicorn.rb -E production
god: god -c services.god 
```

但`foreman start god`没有开始......它只是这样说：

```
17:14:32 god.1  | started with pid 29506
17:14:32 god.1  | exited with code 0
17:14:32 system | sending SIGTERM to all processes
SIGTERM received 
```

如果我运行`god -c services.god`，所有服务都运行良好......有
什么想法吗？
谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T08:51:37.407

你不应该和工头一起跑神。foreman 用于指定应用程序中的所有后台（和 web）进程，而 god 是这些进程的进程监控框架。

通常，您应该：

1.  `Procfile`直接在您的（而不是）中指定所有进程`services.god`，并用于`foreman start`在开发中运行它们。
2.  使用上帝来监控生产中的过程。我使用我的[foreman_god](https://github.com/embarkmobile/foreman_god) gem 直接用上帝加载 Procfile。或者，您可以[导出一个上帝配置文件](https://github.com/otherinbox/foreman-export-god/)。

* * *

也就是说，如果你真的想从工头运行上帝：上帝默认作为守护进程运行，而守护进程不能与工头一起工作（请参阅[此 wiki 页面](https://github.com/ddollar/foreman/wiki/Process-immediately-terminating)）。如果您将 -D（不守护进程）选项传递给上帝，它应该可以工作：

```
god: god -D -c services.god 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T12:38:54.310

如果您将上帝与 rvm 一起使用，您可能应该使用类似的东西，

```
god: rvmsudo god -c /path_to_yourgod_file.god 
```

但是为什么您需要两个不同的监控系统，而您可以使用其中任何一个来完成您的工作？

# java - Maven 如何找到要使用的依赖项？

> ID：13056166
> 
> 赞同：1
> 
> 时间：2012-10-24T19:17:04.577
> 
> 标签：java, jakarta-ee, maven

[当我从http://mvnrepository.com/artifact/org.hibernate](http://mvnrepository.com/artifact/org.hibernate)下载 Hibernate entitymanager 时，您会发现它还依赖于 4.2 版中的验证器。但是最新的是4.3。如果我只添加对验证器的另一个依赖项，我最终会使用 4.3 还是 4.2？你应该如何处理这样的场景？你应该手动覆盖吗？还是只使用“主要”依赖项所依赖的依赖项？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T19:33:52.830

根据[依赖机制介绍](http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html)

> 依赖中介——这决定了当遇到工件的多个版本时将使用哪个版本的依赖。目前，Maven 2.0 仅支持使用“最近定义”，这意味着它将使用依赖树中与您的项目最接近的依赖版本。您始终可以通过在项目的 POM 中明确声明来保证版本。

所以回答你原来的问题：

> 如果我只添加对验证器的另一个依赖项，我最终会使用 4.3 还是 4.2？

如果您显式添加了 4.3 版本的依赖项，它应该选择 4.3，因为您的 pom 中的任何内容都比任何传递依赖项“更接近”。

> 你应该如何处理这样的场景？你应该手动覆盖吗？还是只使用“主要”依赖项所依赖的依赖项？

如果我对使用哪个依赖项有任何疑问，我会选择最新/最稳定的版本并将其显式添加到我的 pom.xml 中。但这只是我。

# asp.net-mvc - 在 ASP.NET.MVC 中扩展 Html.TextBoxFor 和 Html.PasswordFor 以显示工具提示，而不是用于验证

> ID：13056172
> 
> 赞同：0
> 
> 时间：2012-10-24T19:17:35.213
> 
> 标签：asp.net-mvc, asp.net-mvc-3

目前我的观点如下：

```
@Html.PasswordFor(m => m.Password, new { Title = "Passwords must be at least 6 characters long" }) 
```

工作正常，但让我烦恼的是，能够将视图模型中的工具提示作为属性获取真的很棒，因为所有其他信息都在那里，而且将它放在我的视图中似乎很乱。

有什么方法可以让我通过这个属性的值，以便我的代码类似于：

```
@Html.PasswordFor(m => m.Password, new { Title = m.Password.Tooltip }) 
```

请注意：这不是应根据输入显示/隐藏的验证消息，将其视为帮助文本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T21:37:52.507

您可以创建自己的属性，将工具提示添加到模型元数据，然后让自定义帮助器方法呈现适当的 html。

例如

属性

```
[AttributeUsage(AttributeTargets.Property, AllowMultiple = false, Inherited = true)]
public class ToolTipAttribute : Attribute, IMetadataAware
{
    public string Message { get; set; }

    public ToolTipAttribute(string message)
    {
        Message = message;
    }

    public void OnMetadataCreated(ModelMetadata metadata)
    {
        metadata.AdditionalValues["ToolTip"] = Message;
    }
} 
```

辅助方法

```
public static MvcHtmlString PasswordForWithToolTip<TModel, TEnum>(this HtmlHelper<TModel> htmlHelper,
                                                                 Expression<Func<TModel, TEnum>> expression)
{
    var metadata = ModelMetadata.FromLambdaExpression(expression, htmlHelper.ViewData);
    var htmlAttributes = new Dictionary<string, object>();
    if (metadata.AdditionalValues.ContainsKey("ToolTip"))
    {
        var toolTip = metadata.AdditionalValues["ToolTip"] as string;

        if (!string.IsNullOrEmpty(toolTip))
                htmlAttributes.Add("title", toolTip);
    }

    return htmlHelper.PasswordFor(expression, htmlAttributes);
} 
```

然后，用属性装饰你的`ToolTip`属性，并使用`@Html.PasswordFor WithToolTip( x => x.Password)`它应该呈现适当的 HTML。

# java - Java按字符子串对字符串数组进行排序

> ID：13056178
> 
> 赞同：3
> 
> 时间：2012-10-24T19:17:48.870
> 
> 标签：java, arrays, sorting

我需要按字符的子字符串对字符串数组进行排序，如下所示：

```
[0] = "gtrd3455";
[1] = "wsft885";
[2] = "ltzy96545";
[3] = "scry5558";
[4] = "lopa475"; 
```

我需要按以下“3455、885、96545、5558、475”进行排序，我需要从数组的前 4 个字符中提取子字符串，对其进行排序并显示在一个数组中，如下面的输出。

输出应该是一个数组，如：

```
[0] = "ltzy96545";
[1] = "scry5558";
[2] = "gtrd3455";
[3] = "wsft885";
[4] = "lopa475"; 
```

我如何在 Java 中做到这一点的示例？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-24T19:23:10.360

您可以使用[`Comparator`](http://docs.oracle.com/javase/7/docs/api/java/util/Comparator.html), 并使用[`Array#sort`](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#sort%28T%5b%5d,%20java.util.Comparator%29)它的方法，根据您的需要对其进行排序：-

```
String[] yourArray = new String[3];
yourArray[0] = "gtrd3455";
yourArray[1] = "ltzy96545";
yourArray[2] = "lopa475";

Arrays.sort(yourArray, new Comparator<String>() {
    public int compare(String str1, String str2) {
        String substr1 = str1.substring(4);
        String substr2 = str2.substring(4);

        return Integer.valueOf(substr2).compareTo(Integer.valueOf(substr1));
    }
});

System.out.println(Arrays.toString(yourArray)); 
```

**输出**： -

```
[ltzy96545, gtrd3455, lopa475] 
```

# java - 为什么上传的图片在 IE 中不显示？

> ID：13056180
> 
> 赞同：1
> 
> 时间：2012-10-24T19:18:00.980
> 
> 标签：java, internet-explorer, servlets

我正在使用简单的 HTML 页面将图像上传和发布到 servlet，然后我将图像转换为 byte[] 并使用`doPost()`方法保存在会话中：

```
 response.setContentType("text/html");
        items = upload.parseRequest(request);
    byte[] byteArray = item.get();
    request.getSession().setAttribute("image1", byteArray);

    out.println("<html>");
    out.println("<body onload='javascript:callParent()'>File uploaded successfully.");
    out.println("<img src='/ImageUpload' alt='' id='img2' name='img2' />");
    out.println("</body>");
    out.println("</html>"); 
```

在 img 标签的 src 中我调用相同的 servlet 并在 doGet() 中获取存储在会话中的字节 [] 并将它们发送回如下：

```
 response.setContentType("image/jpeg");
    byte[] byteArray =(byte[])request.getSession().getAttribute("image1");
    OutputStream output = response.getOutputStream(); 
    output.write(byteArray);
    output.close(); 
```

此代码在 Mozilla 中运行良好，但在 IE 中无法运行，仅显示红色 X，但`img`标签根据图像大小变宽，但未显示任何内容。同样，当我单击提交按钮两次时，表单将在 IE 中提交，而其他表单将一键提交。

我使用的是 IE-8，图像类型为 .JPEG。是否有任何设置问题我试图在网上搜索但没有任何结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T20:59:43.277

你的问题是你关闭了输出流，所以它不能继续加载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T06:18:09.540

实际上我是在使用 body 标签的 onload() 事件来自动打开浏览按钮。

```
 <body onload='frm1.imgUpload.click()'>
 <form action="ImgUpload" method="POST" enctype="multipart/form-data" name="frm1"  id="frm1">
    <input type='file' id = 'imgUpload' name = 'imgUpload'  onchange='frm1.submit()' />
</form>
   </body> 
```

但是当我删除通过 java 脚本打开浏览的代码时，它开始在 IE 上正常工作我不知道 IE 和 java 脚本有什么问题，现在我手动单击浏览按钮，一切正常。

# ruby-on-rails - rabl 重用模板

> ID：13056182
> 
> 赞同：3
> 
> 时间：2012-10-24T19:18:19.567
> 
> 标签：ruby-on-rails, rabl

我有这个`show.json.rabl`用于控制器的显示操作以在我的 Rails 应用程序中呈现一些 JSON，我认为该`edit`操作的 JSON 响应与我的显示没有不同，所以我想知道是否有一种方法可以使用`show.json.rabl`该`edit`操作。

我知道我可以`users/show`在我`edit.json.rabl`的`edit.json.rabl`.

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-12-30T16:28:34.070

如果您使用的是 rabl >= '0.11.6'，则必须提供 view_path 参数（也就是说，如果它尚未在您的 rabl.rb 配置文件中全局设置），如下所示：

```
render :inline => Rabl::Renderer.json(@user, 'users/show', :view_path => 'app/views') 
```

否则你会得到以下错误：

```
RuntimeError (Cannot find rabl template 'users/show' within registered ([]) view paths!): 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T19:49:48.887

不知道有没有更好的方法，但是可以直接用 Rabl 渲染 JSON

```
render :inline => Rabl::Renderer.json(@user, 'users/show') 
```

# regex - 需要指导处理 TCL 正则表达式

> ID：13056183
> 
> 赞同：2
> 
> 时间：2012-10-24T19:18:21.700
> 
> 标签：regex, tcl

我需要处理一个中间有字符“..”的随机字符串。就像下图一样

```
a..b/c..de/fg..xyz..abc..def..123..
```

如何使用正则表达式获取这些“..”之间的数据？（此字符串可以是任意长度，我需要获取每个中间数据集以进行进一步处理）。请指导我。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T19:30:33.937

如果字符串中没有 pe 换行符，您可以使用以下命令获取字符串列表：

```
set in a..b/c..de/f-g..xyz..abc..def..123..
set out [split [string map {.. \n} $in] \n]] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T08:37:40.763

对于这类事情要考虑的一个工具是[Tcllib中](http://tcllib.sourceforge.net/doc/textutil_split.html)[的`textutil::split`](http://tcllib.sourceforge.net/doc/textutil_split.html)包，特别是如果拆分项比问题中的那个更复杂。这使您可以通过正则表达式拆分字符串，如下所示：

```
package require textutil::split

set sample "a..b/c..de/f-g..xyz..abc..def..123.."
set RE {\.\.};  # “.” is an RE metacharacter, and so needs to be escaped
set pieces [textutil::split::splitx $sample $RE] 
```

上面也会在`pieces`列表末尾产生一个空元素，因为有一个终止分隔符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T20:01:37.910

你可以使用这个正则表达式：

```
[^..] 
```

这将匹配所有不是`..`.

# jquery - ul li中的jquery属性选择器

> ID：13056186
> 
> 赞同：-2
> 
> 时间：2012-10-24T19:18:50.987
> 
> 标签：jquery, selector

我有一个这样的 ul：

```
<ul class = "abc">
<li>
  <span class = "X">
     <a href="" title="alpha">alpha</a>
  </span>
  <span class = "Y"> 
  </span>
  <span class = "Z"> 
  </span>
</li>
<li>
  <span class = "X">
     <a href="" title="beta">beta</a>
  </span>
  <span class = "Y"> 
  </span>
  <span class = "Z"> 
  </span>
</li>
</ul> 
```

在类为 abc 的 ul 中，我想选择具有 title="alpha" 的 li。我怎样才能使用 jquery 做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T19:20:43.480

干得好...

```
$('ul.abc').find('a[title=alpha]').closest('li'); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-24T19:27:38.307

```
 $("ul.abc a[title=alpha]").closest('li') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T19:21:57.253

尝试这个：

```
$( 'ul.abc li' ).find( 'a[title=alpha]' ); 
```

# binary-tree - 从给定的中序和前序遍历中获取后序 BT 遍历

> ID：13056187
> 
> 赞同：1
> 
> 时间：2012-10-24T19:18:50.863
> 
> 标签：binary-tree, tree-traversal

谁能帮我把后序遍历作为gven两次遍历的输出：

> 按顺序：A、B、C、D、E、F、G、H、J、K、L、M、P、Q、N。
> 
> 预购：C、D、E、B、G、H、F、K、L、P、Q、M、N、J、A。

如果答案是图形的，那将更有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-07T15:35:37.080

非递归算法；如何计算中序和前序之间的变化 ؟؟

```
#include<stdio.h>                          
#include<conio.h>
#include <iostream>
using namespace std;
int find(int *p,int s,int f)
{
    int k=0;
    if (f==0)
        return -1;
    for(;k<s;k++)
        if(*(p+k)==f)
            return k;
    return -1;
}

int main()
{
    int n=15;
    int in[] = {'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'J', 'K', 'L', 'M', 'P', 'Q', 'N'};
    int pre[] = {'C', 'D','E','B', 'G', 'H', 'F', 'K', 'L', 'P', 'Q', 'M', 'N', 'J', 'A'};
    int i,k,hed,chld,s=0;
    int *j=(int *)malloc(sizeof(int)*n);
    int *p=(int *)malloc(sizeof(int)*n);
    for(k=0;k<n;k++)
       j[k]=1;
          for(k=0;k<n;k++){
        chld=find(in,n,pre[k]);
        if(1!=j[chld])
        {
            int o=chld,t=chld;
            while(j[chld]==j[--t])
                j[t]=j[chld]*2;
            while(j[chld]==j[++o])
                j[o]=j[chld]*2+1;
        }
                  else{
            int t;
            for(t=0;t<n;t++)
                if(t<chld)
                    j[t]++;
                else if(t>chld)
                    j[t]+=2;
                     }
    }
    k=1,s=0;
    while(1){   hed=find(j,n,k);
    if(s>0&&*(p+s-1)==k)
    {
        for(chld=0;chld<n;chld++)
            if(j[chld]==k)
                break;
        cout<<(char)in[chld]<<" ";
        if(k==1)
            break;
        s--;
        hed=-1;
    }
    if(hed>-1)
    {
        *(p+s)=k;
        s++;
        k*=2;
    }
    else if(k%2==0)
    { 
        k++;
        continue;
    }
    else {
        k=k/2;
        continue;
    }
    }
    getch();
    return 0;
} 
```

# c# - 在不牺牲索引使用的情况下，在 SQLite LIKE 中转义通配符（％，_）？

> ID：13056193
> 
> 赞同：10
> 
> 时间：2012-10-24T19:19:19.057
> 
> 标签：c#, .net, performance, sqlite, indexing

我对 SQLite 查询有几个问题。实际上我开始认为 SQLite 不是为超过 10 行的表设计的，真的，SQLite 是一场噩梦。

以下查询

```
SELECT * FROM [Table] WHERE [Name] LIKE 'Text%' 
```

它工作正常。`EXPLAIN`表示使用了索引，并且在 about 之后返回了结果`70ms`。

现在我需要从 .NET SQLite 驱动程序运行这个查询，所以我正在更改查询

```
SELECT * FROM [Table] WHERE [Name] LIKE @Pattern || '%' 
```

不使用索引。当我在任何 SQLite 工具中运行以下查询时，也不会使用索引

```
SELECT * FROM [Table] WHERE [Name] LIKE 'Text' || '%' 
```

所以我猜 SQLite 没有实现任何类型的预处理逻辑。

好的。让我们尝试解决它，我仍然绑定变量并执行以下操作

```
SELECT * FROM [Table] WHERE [Name] LIKE @Pattern 
```

但是现在我将`%`通配符附加到我的模式字符串的末尾，就像这样

```
command.Parameters.Add(new SQLiteParameter("@Pattern", pattern + '%')); 
```

它工作得很慢。我不能说为什么，因为当我从 SQLite 工具运行这个查询时它工作正常，但是当我从 .NET 代码绑定这个变量时它工作得很慢。

好的。我仍在努力解决这个问题。我正在摆脱模式参数绑定并动态构建此条件。

```
pattern = pattern.Replace("'", "''");
pattern = pattern.Replace("%", "\\%");
where = string.Format("LIKE '{0}%' ESCAPE '\\'", pattern); 
```

索引不再使用。它没有被使用，因为`ESCAPE`. 当我跑步时，我看到了

```
EXPLAIN QUERY PLAN SELECT * FROM [Table] WHERE [Name] LIKE 'Text%' ESCAPE '\' 
```

一旦我删除`ESCAPE`它，它就会再次开始使用索引，并且查询会在 60-70 毫秒内完成。

**更新**

这是结果。

```
EXPLAIN QUERY PLAN
SELECT * FROM [RegistryValues]
WHERE
     [ValueName] LIKE 'windir%' ESCAPE '\' 
```

`SCAN TABLE RegistryValues (~3441573 rows)`

和一个没有`ESCAPE`

```
EXPLAIN QUERY PLAN
SELECT * FROM [RegistryValues]
WHERE
     [ValueName] LIKE 'windir%' 
```

`SEARCH TABLE RegistryValues USING INDEX IdxRegistryValuesValueNameKeyIdKeyHiveFileId (ValueName>? AND ValueName<?) (~31250 rows)`

**更新**

刚发现这个

[http://www.sqlite.org/optoverview.html](http://www.sqlite.org/optoverview.html)

**4.0 LIKE优化**

`The ESCAPE clause cannot appear on the LIKE operator`

那我该怎么办呢？

我理解正确吗？我无法使用`LIKE`运算符 in搜索包含通配符的字符串`SQLite`。通过说通配符，我的意思是`_` `%` `^` `!`

这是不可能的，因为我无法逃脱他们。其实我可以，但是在这种情况下我不能使用索引，所以查询效率不高。

我对吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-25T07:12:37.743

索引只能`LIKE`在 is 结尾时与子句一起使用，`%`以便 SQLite 可以将其重写为两个简单的比较（如`EXPLAIN`输出所示）。

因此，要获得相同的效果，请自己编写比较。这要求您构造一些保证比较“大于”任何匹配值的字符串（注意非 ASCII 字符）。代替：

```
... WHERE Name LIKE 'Text%' 
```

采用：

```
... WHERE Name BETWEEN 'Text' AND 'Textzzzzzzzzzzzzz' 
```

或者，作为参数：

```
... WHERE Name BETWEEN @Pattern AND @Pattern || 'zzzzzzzzzz' 
```

（这个构造永远不需要转义。:)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-24T20:45:18.647

确保将查询包装在事务中。我一直在通过没有它的库进行一些查询，并添加它使速度提高了 10 倍。

可能是关于性能问题的最佳资源：[提高 SQLite 的每秒插入性能？](https://stackoverflow.com/questions/1711631/how-do-i-improve-the-performance-of-sqlite)

# php - 我怎样才能得到一个在课堂上定义的变量并在其他地方使用它

> ID：13056196
> 
> 赞同：1
> 
> 时间：2012-10-24T19:19:31.270
> 
> 标签：php, class, codeigniter

我正在使用codeignighter。

我有一个类有一些我需要在其他地方使用的变量。

例如：

```
 class details{

public $username;
public $current_uID;
public $member_status;

    public function __construct(){
         $this->username = 'username';
         $this->current_uID = 21;
         $this->member_status = 1;
    }
} 
```

现在我的问题是我如何访问这些变量 - 如果我这样做，它们会具有构造中定义的值吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T19:22:06.957

只需创建类并使用创建的实例的属性：

```
$details = new details();
echo $details->username;  // will put 'username' on the screen 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T19:22:05.480

```
$details = new details();

$username = $details->username; 
```

# java - 打印 ArrayList 的最有效方法

> ID：13056199
> 
> 赞同：2
> 
> 时间：2012-10-24T19:19:55.543
> 
> 标签：java, performance, arraylist, primes

我正在尝试打印一个包含数千个条目的 ArrayList（它必须找到 1 到 1000000 之间的所有素数）。在程序结束时，我调用了这个方法：

```
println(myArrayList); 
```

虽然这仅适用于几百个条目，但一旦有更多条目，打印数组列表要比查找素数花费更多的时间。

迭代它会更有效吗？或者使用不同的类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T19:22:29.583

迭代它可能会更有效。 `println`只会做 a `toString()`，这会产生很多串联垃圾，您可以通过直接打印而不是先在内存中`String`构建整个垃圾来避免这些垃圾。`String`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T19:22:32.500

我相信 StringBuffer 是一种更高效、更快捷的打印方式。只需在循环中构建一个并在最后打印它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T20:24:00.253

您要打印到控制台吗？如果是，控制台操作比任何其他输出操作（文件、套接字等）都要慢得多。打印的行越多，这种速度差异就越明显。

如果您需要打印到控制台，那么“加速”您无能为力，但打印到文件会快得多。更改您的程序，使其打印到文件中，您会发现速度有所提高。

# css - 文本框 CSS 悬停/焦点

> ID：13056207
> 
> 赞同：4
> 
> 时间：2012-10-24T19:20:40.750
> 
> 标签：css, textbox, styles

我在焦点上的文本框中添加了一个漂亮的框轮廓，但想在悬停时添加一个灰色轮廓，但我遇到了一个问题。当未选择文本框时，我需要在悬停时显示该框。有什么办法可以做到这一点？谢谢。=)

```
input:focus{
    outline: none;
    box-shadow: 0px 0px 5px #61C5FA;
    border-color: #5AB0DB;
}

input:hover {
    border: 1px solid #999;
    border-radius: 5px;
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-24T19:25:08.550

```
input[type="text"]:focus{
outline: none;
box-shadow: 0px 0px 5px #61C5FA;
border:1px solid #5AB0DB;
}

input[type="text"]:hover{
border: 1px solid #999;
border-radius: 5px;
}

input[type="text"]:focus:hover{
outline: none;
box-shadow: 0px 0px 5px #61C5FA;
border:1px solid #5AB0DB;
border-radius:0;

}    ​ 
```

[http://jsfiddle.net/calder12/jCaGp/1/](http://jsfiddle.net/calder12/jCaGp/1/)

我强烈建议按上述方式设置类型，否则每个输入元素（按钮、选择等）都会产生这些效果。

# c# - 如何获取声明的变量和其他定义

> ID：13056208
> 
> 赞同：4
> 
> 时间：2012-10-24T19:20:39.980
> 
> 标签：c#, scripting, roslyn

我在嵌入式 REPL 中使用 Roslyn 脚本 API，有时我需要知道当前会话中定义了哪些变量，以及所有其他定义（类、接口...）以及哪些引用和导入的命名空间。

我在 API 中找不到任何可以给我那种信息的东西，我知道它就在某个地方。

Dose Scripting API 使用了一些不寻常的实现，比如每次都更新内存中的程序集？如果是这样，如何访问该程序集。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T21:44:41.363

我不知道是否有 Roslyn 特定的 API，但看起来您可以使用 Reflection 获取信息。这有点麻烦。我在 Visual Studio 中使用 REPL 来近似您的情况。

```
using System.Reflection;

Assembly.GetExecutingAssembly().DefinedTypes 
```

显示循环的每次迭代都有一个类型，以及定义的类的一些附加类型。幸运的是，这些`Submission`类型被编号，后面的提交具有更高的编号，即`Submission#11`紧随其后`Submission#5`。

REPL 中定义的变量显示为会话类型中的字段，对应于定义它的循环的执行。查看类型中所有已定义变量的调用如下：

```
chosenType.GetFields(BindingFlags.Instance | BindingFlags.Public) 
```

Roslyn REPL 允许您重新声明变量，将先前声明的变量屏蔽给新的调用者。现在将“会话”视为所有提交的堆栈（最旧的在底部）。如果您向下遍历堆栈，给定字段名称的第一次出现将是 REPL 中具有该名称的活动变量。检索到的字段信息除了名称之外还提供类型。

这是一个示例会话（包括输出），展示了如何查看会话中声明的所有变量。

```
> using System.Reflection;
> var a = 1; 
> var b = "c";
> var c = from type in Assembly.GetExecutingAssembly().DefinedTypes.Reverse()
      from variable in type.GetFields(BindingFlags.Instance | BindingFlags.Public)
      select variable;
> foreach (var info in c ) { 
     if (info.FieldType != typeof(Roslyn.Services.InteractiveHostObject)) {
         Console.WriteLine(info);
     }
  }
System.Collections.Generic.IEnumerable`1[System.Reflection.FieldInfo] c
System.String b
Int32 a 
```

如果相同的名称出现两次，则列出的第一个名称是会话中可用的名称。以上利用了返回的类型恰好按从旧到新排序的事实。您可能希望自己对其进行排序以确定。

无论出于何种原因（可能是错误？）我必须在 foreach 循环中使用 if 语句，使用 LINQ where 子句不会给出预期的结果。

根据您想要查找的所有内容，还有更多可能有用的反射方法，例如`GetMethods`和`GetEvents`。如果你想要一切，那么有一个`GetMembers` See [Type Methods](http://msdn.microsoft.com/en-us/library/x4bk3ae4%28v=vs.110%29.aspx)。

我希望有人可以提供一种更简单的方法。

# algorithm - 矩阵中的方式数

> ID：13056211
> 
> 赞同：1
> 
> 时间：2012-10-24T19:20:44.197
> 
> 标签：algorithm

我们得到一个 nxn 方阵，其中包含 0 和 1。0 表示封闭的单元格，1 表示机器人可以行走的开放单元格。如果您的机器人最初位于 (0,0)，那么到达 (n-1,n-1) 的路径数是多少。
您的机器人可以向左、向右、向上和向下移动。路径需要不同。如果你有一个循环，那么你可以将路径计算为 1 而不是无限的。例如 7x7 矩阵的答案。

1 1 0 1 1 0 1
0 1 0 0 1 1 1
1 1 1 1 0 1 0
0 1 0 1 1 1 1
0 1 0 0 1 0 1
0 1 1 1 1 0 1
0 0 0 0 1 1 1

是4

这 4 条路径是：
_ _ 0 1 1 0 1
0 _ 0 0 1 1 1
1 _ 1 1 0 1 0
0 _ 0 1 1 1 1
0 _ 0 0 1 0 1
0 _ _ _ _ 0 1
0 0 0 0 _ _ _

_ _ 0 1 1 0 1
0 _ 0 0 1 1 1
1 _ 1 1 0 1 0
0 _ 0 1 _ _ _
0 _ 0 0 _ 0 _
0 _ _ _ _ 0 _
0 0 0 0 1 1 _

_ _ 0 1 1 0 1
0 _ 0 0 1 1 1
1 _ _ _ 0 1 0
0 1 0 _ _ 1 1
0 1 0 0 _ 0 1
0 1 1 1 _ 0 1
0 0 0 0 _ _ _

_ _ 0 1 1 0 1
0 _ 0 0 1 1 1
1 _ _ _ 0 1 0
0 1 0 _ _ _ _
0 1 0 0 1 0 _
0 1 1 1 1 0 _
0 0 0 0 1 1 _

当机器人只被允许向右和向下移动时，我已经使用 dp 解决了问题。请仅针对相同的算法帮助我。我是否必须将其转换为图表并应用一些算法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T20:57:33.063

我认为你应该做一个[DFS](http://en.wikipedia.org/wiki/Depth-first_search)并记住所遵循的路径。在伪代码中，它看起来像这样：

```
DFS(matrix, path):
   /* End conditions */
   If path.last is [n-1, n-1]
      print path /* Hooray! Found a path! */
   If path.last has already been visited in path
      Discard solution
   If path.last is out of bounds (coordinates < 0 or > n-1)
      Discard solution
   If matrix[path.last] value is 0
      Discard solution

   /* We're in the middle of a path: continue exploring */
   For direction in [1, 0], [0, 1], [-1, 0], [0, -1]
      Add [path.last + direction] to path // Move north, south, east, west
      DFS(matrix, path)
      Remove last element from path

/* Call the algorithm */
DFS(matrix, [1, 1]) 
```

在此算法中，您可以传递对矩阵和路径的引用，这为您提供了一个常量内存算法（您只有一个`path`around 实例）。至于时间复杂度，这将**与可能路径的数量**呈线性关系（因为您探索了每条可能的路径一次，甚至是被忽略的路径），并且与它们的**长度**呈二次方关系（因为您对每个点进行测试，如果它已经存在于具有线性搜索的路径）。请记住，**路径的数量可以在 上呈指数增长** `n`，并且路径的长度在最坏的情况下是`n^2`。非常慢的蛮力算法。

该算法的**最坏情况**将是一个仅由具有指数复杂度的矩阵填充的矩阵。

**最好**的情况是在`[1, 1]`和之间只有一个可能路径的矩阵`[n-1, n-1]`。在这种情况下，路径长度会很复杂，可能介于`O(n)`和之间`O(n^2)`。

# python - Python/Django：这条线是做什么的？

> ID：13056212
> 
> 赞同：1
> 
> 时间：2012-10-24T19:20:46.963
> 
> 标签：python, django, django-templates

Django 新手

此代码将用户提交的项目添加到表中。我能得到关于 return 语句在做什么的完整解释吗？它基本上是返回一个列表项并说替换`%s`为`item.text`？

```
def add(request):
  item = LineItem(text=request.POST["text"])
  item.save()
  return HttpResponse("<li>%s</li>" % item.text) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T19:23:05.600

文本`"<li>%s</li>" % item.text`是一个 python[字符串格式化表达式](http://docs.python.org/library/stdtypes.html#string-formatting)。

字符串的`%s`一部分是占位符字符串，为了填充它，python 将用`str(item.text)`.

结果作为 HTTP 响应返回，可能会被 AJAX 调用使用（它不是完整的 HTML 页面）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T19:25:14.290

是的 - "string %s" % string 构造只是一种编写带有变量的字符串的方法。%s 是插入到字符串中的变量 item.text 的占位符。

这是一个字符串格式化操作。在此处查看详细信息：

[http://docs.python.org/library/stdtypes.html#string-formatting](http://docs.python.org/library/stdtypes.html#string-formatting)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T19:22:53.420

> 它基本上是返回一个列表项并说用 item.text 替换 %s

是的。

# java - 使用 HQL 在地图中搜索

> ID：13056216
> 
> 赞同：2
> 
> 时间：2012-10-24T19:21:07.143
> 
> 标签：java, hibernate, map, hql

我有一个 Java 类（我们称之为 BigClass），它有一个 Map 作为属性（Map< MyClass，Integer >），我想做的是进行 HQL 查询以根据此地图的值过滤这些类。

实际上，我想做的是恢复 BigClass 的所有实例 (b)，它们满足 MyClass b.map.get(m) > 0 的特定实例 (m)。

例如：我想恢复一个 BigClass 的实例，如果它的 map 有一个类似 < m, 2 > 的条目，我不想恢复一个 BigClass 的实例，如果它的 map 有一个类似 < m, 0 > 的条目或者如果 m 不属于映射键。

我一直在搜索，发现这篇文章与我的问题有关：

[使用 HQL 查询地图的值](https://stackoverflow.com/questions/10804664/using-hql-to-query-on-a-maps-values)

虽然，它没有给我一个解决方案。

* * *

这些是我一直在尝试但没有成功的一些查询：

```
org.hibernate.QueryException: No index value! 
[SELECT e FROM BigClass e WHERE ( map[(SELECT b FROM MyClass b WHERE b.id = ?)] > 0) ]

org.hibernate.QueryException: No index value! 
[SELECT e FROM BigClass e WHERE ( index(map) = (SELECT b FROM MyClass b WHERE b.id = ?) ) > 0) ] 
```

提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T11:44:49.043

如果条件是一个选项，这可能会起作用

```
session.createCriteria(BigClass.class)
    .joinAlias("map", "entry")
    .add(Restrictions.eq("entry", session.load(MyClass.class, id))
    .list(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T15:24:15.277

感谢您的回答。我已经通过删除括号之间的 SELECT 解决了这个问题，这是被禁止的！

我只是将对象添加为查询的参数，这很有效。

# asp.net-mvc - JQuery Post JSON 到 MVC 不重定向

> ID：13056224
> 
> 赞同：0
> 
> 时间：2012-10-24T19:21:59.797
> 
> 标签：asp.net-mvc, jquery, http-post

我正在尝试加载一个页面，该页面已将一些 JSON 作为 POST 传递。JSON 已发送并返回页面，但使用下面的 javascript 我仍保留在原始页面上。我需要重定向到页面

```
$("#searchForm").submit(function (event) {
                var jsonObjects = {
                    "SomeJson": "SomeData"
                };

                $.ajax({
                    type: "POST",
                    dataType: "json",
                    async: false,
                    data: JSON.stringify(jsonObjects),
                    beforeSend: function (x) {
                        if (x && x.overrideMimeType) {
                            x.overrideMimeType("application/json;charset=UTF-8");
                        }
                    },
                    url: 'Home'
                });
                event.preventDefault();
            }); 
```

这会发布 JSON 但页面但不会重定向。页面“主页”返回到浏览器。

成功后我无法重定向到主页，因为不会出现帖子参数

我尝试在没有 javascript 的情况下执行此操作并使用标准 html 提交，但似乎无法嵌入 JSON

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T19:29:11.123

如果您发出 ajax 请求并且服务器以 3xx 重定向响应，则发出请求的页面不会更改。这是因为任何 ajax 请求都不会更改浏览器中的当前位置，这正是您通常想要使用 ajax 的原因。

因此，您需要一个可以进行重定向的成功处理程序。将其传递给您的`$.ajax()`调用。

```
success: function() {
  window.location.href = '/Home'; // or something
} 
```

如果请求成功，这会将当前页面更改为您选择的 url。

# c# - 在 C# 中将位从 ulong 复制到 long

> ID：13056230
> 
> 赞同：12
> 
> 时间：2012-10-24T19:22:09.613
> 
> 标签：c#, .net, type-conversion

因此，[.NET 性能计数器类型](http://msdn.microsoft.com/en-us/library/system.diagnostics.performancecounter.aspx)似乎有一个烦人的问题：它`long`为计数器 RawValue 公开，而 Windows 中的实际性能计数器值是无符号的，不能为负数。例如，如果您有一个 NumberOfItems64 计数器，API 将非常乐意接受一个负值，然后默默地将其转换为一个非常大的数字。事实上，对于计数器值范围的一半，设置它的唯一方法是找到正确的负值来传递！

我假设这里发生的事情是他们从 中获取原始位`long`并将其视为无符号 64 位数字。二进制补码的负值仅作为计数器的直数读取。

所以我试图弄清楚如何强制 C# 将位从`ulong`直接放入 . `long`，因为这就是 API 想要的。但是 C# 在这里太有用了......你不能转换或使用`Convert.ToInt64(ulong)`，因为它会因为值太大而引发溢出异常。我偶然发现了这种转换方式：

`Convert.ToInt64(myULong.ToString("X"), 16)`

当它从非基数 10 中的字符串转换时，它假定该数字是二进制补码并执行我需要的操作。但这并不理想，因为它需要为每次转换分配一个对象并解析一个字符串，而且这个 API 将是性能关键的。在 C# 中有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-24T19:23:59.593

一个简单的演员像

```
ulong value1 = 0xFEDCBA9876543210UL;  // 18364758544493064720
long value2 = (long)value1;           // -81985529216486896
ulong value3 = (ulong)value2;         // 18364758544493064720 
```

准确地保留值中的位。

# objective-c - NSMutableAttributedString iOS6 中的可点击 URL

> ID：13056231
> 
> 赞同：2
> 
> 时间：2012-10-24T19:22:11.950
> 
> 标签：objective-c, ios, ios6

我正在开发一个有趣的应用程序，我可以在其中接收来自远程 Web 服务（如 Twitter）的消息。有时这些消息包含 URL:s，我想让这些消息可点击。我想知道哪种方法是最好的。我试过 NSLinkAttributeName 但它不适用于 iOS。是否可以创建一个透明按钮并将其放置在文本视图中正确位置的上方？我怎么能这样做？还是有更好/更简单的方法？url 的位置和长度可以变化。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T20:47:52.570

有两种很好的方法可以解决这个问题：

**1\. CoreText，或者更确切地说是围绕它的包装器，如[TTTAtributedLabel](https://github.com/mattt/TTTAttributedLabel)**

这是最强大的解决方案。它支持 Datadetectortypes（尽管您最好在显示它之前进行自己的性能检测）并且它相对流行。

但是，根据您的使用情况，它可能会影响您的 tableview 的滚动性能。

**2\. 在您的标签上方动态放置按钮，例如[IFTweetLabel](https://github.com/clawoo/IFTweetLabel)**

这是简单的解决方案。IFTweetLabel 基本上是 UILabel 的一个插件，它开箱即用的性能非常好。但是，如果您希望对其进行过多的自定义，您最终会遇到它的限制。更不用说它在 100% 的时间里都表现得不完美。YMMV。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T19:46:48.750

一种选择是使用`UIDataDetectorTypeLink`. 检查此[链接以获取更多详细信息。](http://mobiledevelopertips.com/user-interface/creating-clickable-hyperlinks-from-a-url-phone-number-or-address.html)

```
// Create textview, centering horizontally
UITextView *textView = [[UITextView alloc] initWithFrame:CGRectMake(0, 10, 320, 50)];

// Set font, background and alignment
[textView setFont:[UIFont boldSystemFontOfSize:16]];
[textView setBackgroundColor:[UIColor blackColor]];
[textView setTextAlignment:UITextAlignmentCenter];

// Unfortunately the link will show as blue even with this setting
//  [textView setTextColor:[UIColor greenColor]];

// Edit and scrolling off  
[textView setEditable:NO];
[textView setScrollEnabled:NO];

// Set data type to specify URL/link
[textView setDataDetectorTypes:UIDataDetectorTypeLink];

// Set text as URL
[textView setText:@"text.com"];  

[self.view addSubview:textView]; 
```

其他一些选项是 `UIWebview`与代表一起处理其中的 url 触摸。另一种选择是[花哨的 UILabels](http://furbo.org/2008/10/07/fancy-uilabels/)

对于您提出的其他问题，请查看[如何在 UI Web 视图中打开 UITextView URL？](https://stackoverflow.com/questions/1555294/how-to-open-a-uitextview-url-in-ui-web-view)， [有没有办法创建自定义 UIDataDetectorTypes？](https://stackoverflow.com/questions/2358343/is-there-a-way-to-create-custom-uidatadetectortypes)并[使用过滤器更改 UITextView 链接的颜色？](https://stackoverflow.com/questions/7256491/change-color-of-uitextview-links-with-a-filter)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-22T06:51:14.127

`NSLinkAttributeName`可以用 敲击**`UITextView`**，但不能用敲击`UILabel`。请注意，[它适用于 iOS 7+](https://developer.apple.com/documentation/uikit/nslinkattributename)，并且 UITextView 必须是`Selectable`（在 Storyboard 中）。

快速演示：

```
let attributedText = NSMutableAttributedString(string: "Hello world")
attributedText.addAttribute(.link, value: URL(string: "https://example.com")!, range: NSRange(location: 0, length: attributedText.length))
textView.attributedText = attributedText 
```

# string - 将字符串添加到没有换行符的文件中

> ID：13056232
> 
> 赞同：-1
> 
> 时间：2012-10-24T19:22:12.540
> 
> 标签：string, shell, unix

我搜索并发现“echo -n”和“printf”是解决这个问题的方法，但它们在我的机器上工作有点古怪。

这里：

```
[wadhwaso@nxnixd01 ~]$ echo "hello" >> test
[wadhwaso@nxnixd01 ~]$ cat test
hello
[wadhwaso@nxnixd01 ~]$ echo -n "world" >> test
[wadhwaso@nxnixd01 ~]$ cat test
hello
world
[wadhwaso@nxnixd01 ~]$ echo -n " seriously?" >> test
[wadhwaso@nxnixd01 ~]$ cat test
hello
world seriously? 
```

“printf”也是如此。它第 2 次第 3 次第 4 次等，但不是第一次。

我对 awk 和 sed 不太满意，这就是我想使用它们的原因。

如果我别无选择，有人可以告诉我如何通过 awk 或 sed 在 /etc/grub.conf 中添加“elevator=noop”吗？

答： `sed -i '$s/$/,string/' file`..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T19:24:14.963

该`-n`选项控制是否在回显*末尾*添加换行符。首先`echo "hello"`写入`hello\n`文件；这就是换行符的来源。

要添加内核选项，请尝试其中之一。他们每个人都在 grub.conf 中搜索该`kernel`行并将“电梯=noop”附加到末尾。

```
sed '/kernel/ s/$/ elevator=noop/' /etc/grub.conf

awk '$1 == "kernel" { $0 = $0 " elevator=noop" } { print } ' /etc/grub.conf 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T21:15:30.910

通常你的 shell 会有一个内置的回声。这可能会引起相当大的混乱。如果您看到奇怪的行为，您应该尝试回显的绝对路径，它可能会解决问题。

```
[user@host ]$ which echo
/usr/bin/echo
[user@host ]$ echo --version
--version
[user@host]$ /usr/bin/echo --version
echo (GNU coreutils) 8.15
... 
```

事实证明，我的回声，x64 linux 上的 8.15 和 bash 4.2.37 似乎“做正确的事”：

```
[user@host ]$ echo -n "Hi" > /tmp/hi
[user@host ]$ cat /tmp/hi
Hi[user@host ]$ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T23:49:04.373

使用 printf 而不是 echo。echo 不便携且使用不便

# php - 从数据库中获取用户的所有记录

> ID：13056234
> 
> 赞同：0
> 
> 时间：2012-10-24T19:22:20.217
> 
> 标签：php, mysql

在我的表'user_sightings'中，我允许每个用户有多个条目，所以它看起来如下......

```
------------------------
ID | user_ID | postcode
1     39       ab12cd
2     39       sk91ab
3     39       ab44ix 
```

运行查询后，我尝试使用以下内容打印出每个邮政编码......

```
echo $row["postcode"]; 
```

只有这只会打印出该用户的第一个实例，他们是一种我可以为用户获取所有实例并将它们动态设置为变量的方法吗？

* * *

询问：

```
$sth = $conn->prepare("SELECT * FROM directory, user_sightings WHERE directory.user_active != '' AND directory.ID = :uid AND user_sightings.user_ID = :uid");
$sth->execute(array(':uid' => $UID));

while ($row = $sth->fetch(PDO::FETCH_ASSOC)) {
      echo $row["postcode"];
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T19:26:23.300

您需要一个`while`循环来[获取行](http://php.net/manual/en/mysqli-result.fetch-assoc.php)，然后您可以使用PHP 中的变量[赋值](http://php.net/manual/en/language.variables.variable.php)为每个用户分配一个变量：

```
while($row ... {
    ${$row[user_ID]} = $row[postcode];
} 
```

您将需要一种唯一标识变量的方法，因为最后一个实例`user_ID`将是我建议使用数组的该变量的值。也许是这样的：

```
${'user_' . $row[user_ID]}[] = $row[postcode]; 
```

这样，`$user_39`将成为一个包含`(ab12cd, sk91ab, ab44ix)`.

或者您可以将所有数据放入数组中，如下所示：

```
$user_ID = $row[user_ID];
$array[$user_ID][] = $row[postcode]; 
```

这两个选项中的任何一个都将进入您的`while`循环。

**澄清**

如果要调用特定用户的邮政编码，首先将数据放入多维数组中：

```
while($row ... {
    $user_ID = $row[user_ID];
    $array[$user_ID][] = $row[postcode];
} 
```

然后将像这样存储邮政编码（以下示例）：

```
echo $array[39][0];
//ab12cd

echo $array[39][1];
//sk91ab

echo $array[39][2];
//ab44ix 
```

`[39]`代表`user_ID`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T19:27:59.587

使用 PDO

```
$sth = $conn->prepare("SELECT * FROM directory, user_sightings WHERE directory.user_active != '' AND directory.ID = :uid AND user_sightings.user_ID = :uid");
$sth->execute(array(':uid' => $UID));
$sth->setFetchMode(PDO::FETCH_ASSOC);  
while($row = $sth->fetch()) {  
echo $row['postcode'] . "\n";  
    } 
```

# c - 结构指针初始化 - 局部变量

> ID：13056244
> 
> 赞同：2
> 
> 时间：2012-10-24T19:22:42.640
> 
> 标签：c, pointers, structure

谁能告诉我这里是如何打印“你好”的？据我所知，局部变量未初始化。因此，我认为应该打印 else 部分，但它正在以其他方式发生。请帮忙。

```
struct buss{ 
int a;
char b;
};

void main(){

struct buss *p;

if(p==NULL) printf("hello");

else printf("hi");

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T19:24:30.483

你没有初始化`p`对象。它的价值是不确定的。

读取未初始化的对象是未定义的行为。未定义的行为意味着任何事情都可能发生。任何事情都意味着您的程序也可能会崩溃或打印`"nose demons"`。

**编辑：**根据评论中的要求，对于“读取未初始化的对象是否总是未定义的行为？”的问题：对于 C90，请参阅未定义行为定义中的 3.16，对于 C11，请参阅 6.3.2.1p2，对于 C99，请参阅 C委员会在[DR#338](http://www.open-std.org/jtc1/sc22/wg14/www/docs/dr_338.htm)中的回答。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T19:24:40.907

`p`是一个未初始化的指针，指向某个地方，恰好是`NULL`，因此`"hello"`被打印。@Ouah 解释了为什么你不应该访问`p`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T19:25:11.553

您的 *p 局部变量未初始化，因此它可以随机获取任何值（包括 NULL）

此外，在*某些*情况下，*一些*编译器*可能会*将此对象初始化为 NULL，但这不是标准所要求的。所以你最好初始化你的对象。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-24T19:33:58.940

严格来说，这是未定义的行为，因为`p`没有初始化。但出于安全原因，许多操作系统不会在堆栈或堆中提供原始（未初始化）内存块。*在这个简单的示例中，总是*如此`p`（如果您调用了许多子例程，它可能会有所不同）。*`NULL`*

# slideshow - 图层滑块自动播放视频不起作用

> ID：13056245
> 
> 赞同：2
> 
> 时间：2012-10-24T19:22:43.587
> 
> 标签：slideshow

我无法让 autoPlayVideos 和 autoPauseSlideshow 工作。我在下面粘贴了我的代码。该节目完美无缺，它不会自动播放视频或暂停节目。这是对这些参数的错误使用吗？或者有没有人听说过与其他脚本或库导致此问题的兼容性问题？

```
 $(document).ready(function(){
        $('#layerslider').layerSlider({
            navPrevNext         : false,
            skinsPath : 'assets/layerslider/layerslider/skins/',
            skin : 'fusionskin',
            autoPlayVideos : true,
            autoPauseSlideshow : true,
        });
    }); 
```

此外，如果我将 autoPauseSlideshow 从 true 更改为 auto，则幻灯片根本不起作用 - 只是空白。我究竟做错了什么？

# javascript - jsp保持复选框值，除非有变化

> ID：13056246
> 
> 赞同：0
> 
> 时间：2012-10-24T19:22:47.180
> 
> 标签：javascript, jsp

我的 jsp 页面上有一个复选框，我可以选中/取消选中它，并使用 onchange javascript 函数单击保存按钮后它会相应更新。目前它的问题是它总是会检查选中的值是什么（所以即使我不点击复选框，选中的值也是0，当我再次点击保存按钮而不触摸复选框时它会认为应该取消选中复选框，因为选中的值为 0。）我不希望对复选框值进行任何更改，除非复选框的值不同。

这是我目前所拥有的：

```
<input type="checkbox" name="CompletedCheck${count}" tabindex="40" id="CompletedCheck${count}" title="Complete" onchange="checkedFields(${count})" Checked/>
<input type="hidden" name="Completed${count}" value="">

                    function checkedFields(count) {
                    var checkedFieldID = document.getElementById('CompletedCheck'+count).checked;

                    var completeFieldToSubmit = "Completed"+count;

                    if (checkedFieldID==false)
                        {

                            document.getElementById(completeFieldToSubmit).value =0;
                        }
                    if(checkedFieldID==true)
                        {
                            document.getElementById(completeFieldToSubmit).value= 1;
                        }
                } 
```

# git - 在 git 中使用 osx 钥匙串

> ID：13056247
> 
> 赞同：4
> 
> 时间：2012-10-24T19:22:48.813
> 
> 标签：git, terminal, keychain

我正在尝试将 osx 钥匙串与 git 一起使用，但是当我输入时

```
sudo mv git-credential-osxkeychain /usr/local/bin 
```

然后我的密码出现错误： mv: git-credential-osxkeychain: No such file or directory

我的 git 安装位于 /usr/local/bin/git

我正在使用 Mac OSX Mountain Lion。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-29T03:24:39.953

对于这种情况，我发现最好的技巧之一是使用`locate`，一个非常强大的命令。在此示例`locate git-credential-osxkeychain`中，会生成几条路径，向您显示确切的查看位置。

此外，您可以使用其他有趣的 CLI 工具，例如将定位结果管道化到 grep 以优化搜索：`locate git-credential-osxkeychain | grep /usr`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-26T23:04:09.027

在我的 Mac OSX Mountain Lion 机器上，它位于 /usr/local/git/bin/git-credential-osxkeychain

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-06T17:45:09.803

对我来说，`cd usr/local/git/bin/` 那时`mv git-credential-osxkeychain /usr/local/bin`

# c# - 如何创建适用于任何引用类型的方法？

> ID：13056251
> 
> 赞同：-1
> 
> 时间：2012-10-24T19:23:00.577
> 
> 标签：c#, asp.net

如何将以下方法转换为适用于任何引用类型的泛型方法：

```
public string CheckNull(string value, string defaultvalue)
{ 
    return (value == null) ? defaultvalue : value; 
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T19:25:02.390

你可以使用类似的东西：

```
public T CheckNull<T> (T value, T defaultValue)
    where T : class
{
    return value ?? defaultValue;
} 
```

[虽然，直接使用空合并运算符](http://msdn.microsoft.com/en-us/library/ms173224.aspx)而不是将其包装在方法中通常是有意义的。

**编辑**

参考您的评论，您正在编写更多代码来执行已经内置到框架中的操作。

```
public void Foo (Bar bar)
{
    var myBaz = bar.Baz ?? new Baz ();
} 
```

这将与我上面的所有额外代码做同样的事情：

```
public void Foo (Bar bar)
{
    var myBaz = CheckNull (bar.Baz, new Baz ());
} 
```

更多的打字没有回报。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T19:27:47.083

寻找[Null Coalescing Operator](http://msdn.microsoft.com/en-us/library/ms173224.aspx)而不是泛型函数。

# javascript - 将子菜单指示器添加到 li 项目纯 javascript

> ID：13056256
> 
> 赞同：0
> 
> 时间：2012-10-24T19:23:18.460
> 
> 标签：javascript, jquery, submenu

我在stackoverflow上环顾四周，但只找到了一种用jQuery做我想做的事情的方法。我找到的代码是这样的：

```
$("li:has(ul)").each(function(){
    $(this).find(">a").addClass("hasSubmenu");
}); 
```

现在我想把它变成纯 Javascript。所以我不需要为这段简短的代码包含 jQuery 库。

有人可以帮我把它变成 JS 代码吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T19:45:23.230

我看到这里有两个答案。在现代浏览器中，您可以使用`querySelector`和`querySelectorAll`方法执行类似于 jQuery 的查询：

```
var ulChildrenOfLi = document.querySelectorAll('li>ul');
for (var u = 0, ulen = ulChildrenOfLi.length; u < ulen; u++) {
    var liParent = ulChildrenOfLi[u].parentElement,
        aChildOfLi = liParent.querySelector('li>a');
    if (aChildOfLi) {
        aChildOfLi.className = aChildOfLi.className.replace("hasSubmenu", '') + " hasSubmenu";
    }
} 
```

如果您必须支持 IE，则可以使用更多代码：

```
var lis = document.getElementsByTagName('li');
for (var i = 0, len = lis.length; i < len; i++) {
    var li = lis[i],
        uls = li.getElementsByTagName('ul'),
        children = li.children;
    if (uls.length !== 0) {
        for (var c = 0, cl = children.length; c < cl; c++) {
            var kid = children[c];
            kid.className = kid.className.replace("hasSubmenu", '') + " hasSubmenu";
        }
    }
} 
```

这是一个 jsFiddle：http: [//jsfiddle.net/ppxcy/1/](http://jsfiddle.net/ppxcy/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T19:47:00.293

你艾米试试这个

```
var nav=document.getElementById('nav'), lis=nav.getElementsByTagName('li');
for(i=0;i<lis.length;i++)
{
    if(lis[i].hasChildNodes())
    {
        var childUl=lis[i].getElementsByTagName('ul');
        if(childUl.length)
            lis[i].getElementsByTagName('a')[0].className+=" hasSubmenu";
    }
} 
```

[**演示**](http://jsfiddle.net/cKmyV/2/)。

# java - 在 Java 中检查数组元素中的字符

> ID：13056257
> 
> 赞同：0
> 
> 时间：2012-10-24T19:23:23.743
> 
> 标签：java, arrays

我有一个字符串类型的数组，其中包含一堆文本，这些文本在数组的不同元素中被分解。我想检查哪个元素包含字符串 Name: 在其中。我需要这样做的原因是因为 Name 在不同的数组上运行时可以在不同的元素中。我不能在数组上使用 .contains ，所以我不确定要使用什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T19:29:17.843

```
String []array = new String[]{"foo","bar","the_string_you_are_looking_for"};

int index = -1;
for (int i = 0; i < array.length; ++i)
{
   if (array[i].contains("the_string_you_are_looking_for"))
   {
       index = i;
       break;
   }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T19:30:58.927

```
int getIndexOfElementContainingName(String[] myStringArray) {
    for(int i=0; i<myStringArray.length; i++) {
        if(myStringArray[i].contains("Name:"))
            return i;
    }
    return -1;
} 
```

# spring - 通过 cxf 服务验证 javax.validation 注释对象

> ID：13056261
> 
> 赞同：4
> 
> 时间：2012-10-24T19:23:51.030
> 
> 标签：spring, validation, cxf, jax-ws, bean-validation

我有一个像这样的示例类

```
public class Log implements Serializable{

    @NotNull
    @Pattern(regexp="[a-z0-9]")
    private String controller;
} 
```

和一个 cxf 网络服务：

```
@WebService
@SOAPBinding(style=Style.DOCUMENT, use=Use.LITERAL)
@SchemaValidation
public interface LogService {

    @WebMethod BigInteger createLog(@NotNull String appName,@Valid Log log);
} 
```

这是我的spring ws配置：

```
<jaxws:endpoint id="logService" implementor="#logServiceEndpoint"
    address="/logService">
    <jaxws:properties>
        <entry key="schema-validation-enabled" value="true" />
    </jaxws:properties>
</jaxws:endpoint>

<bean id="logServiceEndpoint" class="it.trecube.logging.ws.LogServiceImpl">
    <property name="controller" ref="loggingController"></property>
</bean> 
```

我希望 Log 类得到验证，并且这些信息也被呈现到创建的 wsdl 和 appName 中验证，但我尝试在没有控制器的情况下传递 appName=null 和 Log 并且一切正常......

我使用弹簧、Maven 和 cxf

坦克回复，对不起我的英语不好

# api - 使用 paypal 自适应支付 api 如何将支付类型设置为个人？

> ID：13056262
> 
> 赞同：1
> 
> 时间：2012-10-24T19:23:54.560
> 
> 标签：api, paypal, paypal-adaptive-payments

我正在使用 Adaptive Payments API，并且我的付款作为服务付款进行 - 我可以通过在付款完成后查看 PaymentDetails 来判断这一点。我希望我的付款作为个人付款进行，因此需要知道如何在使用 PAY api 时设置 paymentType。

这甚至可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T05:40:01.360

在 Adaptive Payments Pay API 调用中 - 将 paymentType 设置为 PERSONAL。API参考这里：[https ://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_APPayAPI](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_APPayAPI)

# java - 为什么 Potochkin 的 EDT 检查器会标记此代码？

> ID：13056272
> 
> 赞同：0
> 
> 时间：2012-10-24T19:24:25.150
> 
> 标签：java, swing, user-interface, aspectj, event-dispatch-thread

我不明白为什么我的代码在这个实例中被标记。

```
myPlot.plot(serviceRef, frameMax, frameMin); 
```

该行是错误的源位置。它对我没有任何意义，因为代码行中没有 Swing 代码。为什么会发生这种情况呢？

我在下面附上了 Potochkin 的 EDT 违规检查代码：

```
 package testEDT;

import javax.swing.*;

/**
 * AspectJ code that checks for Swing component methods being executed OUTSIDE the Event-Dispatch-Thread.
 * 
 * (For info on why this is bad, see: http://java.sun.com/products/jfc/tsc/articles/threads/threads1.html)
 * 
 * From Alexander Potochkin's blog post here:
 * http://weblogs.java.net/blog/alexfromsun/archive/2006/02/debugging_swing.html
 * 
 */
aspect EdtRuleChecker{
    /** Flag for use */
    private boolean isStressChecking = true;

    /** defines any Swing method */
    public pointcut anySwingMethods(JComponent c):
         target(c) && call(* *(..));

    /** defines thread-safe methods */
    public pointcut threadSafeMethods():         
         call(* repaint(..)) || 
         call(* revalidate()) ||
         call(* invalidate()) ||
         call(* getListeners(..)) ||
         call(* add*Listener(..)) ||
         call(* remove*Listener(..));

    /** calls of any JComponent method, including subclasses */
    before(JComponent c): anySwingMethods(c) && 
                          !threadSafeMethods() &&
                          !within(EdtRuleChecker) {
        if ( !SwingUtilities.isEventDispatchThread() && (isStressChecking || c.isShowing())) {
            System.err.println(thisJoinPoint.getSourceLocation());
            System.err.println(thisJoinPoint.getSignature());
            System.err.println();
        }
    }

    /** calls of any JComponent constructor, including subclasses */
    before(): call(JComponent+.new(..)) {
        if (isStressChecking && !SwingUtilities.isEventDispatchThread()) {
            System.err.println(thisJoinPoint.getSourceLocation());
            System.err.println(thisJoinPoint.getSignature() + " *constructor*");
            System.err.println();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T15:25:45.807

“myPlot”变量是扩展 JPanel 的 AbstractPlot 的一个实例！这会导致 EDT 检查器标记在 EDT 之外对此实例进行的所有调用，即使我只是在计算一个执行 int i = 1 + 1 的私有函数。现在我明白了:)

# emacs - 仅当从某个其他函数调用时才触发对函数的建议

> ID：13056273
> 
> 赞同：2
> 
> 时间：2012-10-24T19:24:26.210
> 
> 标签：emacs, elisp, advising-functions, defadvice

我正在尝试解决`dired-do-shell-command`不能`!`在当前目录和父目录`.`和`..`'. 堆栈跟踪粘贴在底部。

我可以定义如下建议来绕过此错误：

```
(defadvice dired-get-filename (before h-no-error-if-not-filep activate)
  (ad-set-arg 1 t)) 
```

**但这会影响对`dired-get-filename`.** 我希望它仅在堆栈为`dired-do-shell-command -> dired-get-marked-files -> dired-get-filename`.

我能想到的唯一方法如下

*   `(with-output-to-string (backtrace))`在建议定义中搜索匹配项
*   将周围的建议添加到其他方法以设置一些可以在建议定义中测试的变量。

有更好的方法吗？我想我正在寻找对当前堆栈跟踪的访问作为数据结构而不是来自的字符串`(backtrace)`

```
Debugger entered--Lisp error: (error "Cannot operate on `.' or `..'")
  signal(error ("Cannot operate on `.' or `..'"))
  error("Cannot operate on `.' or `..'")
  dired-get-filename(t)
  dired-get-marked-files(t nil)
  (let ((files (dired-get-marked-files t current-prefix-arg))) (list (dired-read-shell-command (concat "! on " "%s: ") current-prefix-arg files) current-prefix-arg files))
  call-interactively(dired-do-shell-command nil nil) 
```

[为什么 dired-do-shell-command 不能对 '.' 进行操作 或者 '..'？](https://stackoverflow.com/questions/13055903/why-can-dired-do-shell-command-not-operate-on-or)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T21:07:29.543

You can access the stack trace, one layer at a time, via `backtrace-frame`. But this is really pushing the hack. I recommend you also `M-x report-emacs-bug` requesting for `!` to work on `.` and `..`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T19:44:19.710

我宁愿从那里复制调用`dired-do-shell-command`，该调用将使用第三个参数 t 调用。`my:dired-do-shell-command``my:dired-get-marked-files``dired-get-filename`

这样我复制/粘贴了两个函数，但我最大限度地减少了建议常用函数的副作用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T20:50:32.847

将堆栈作为列表访问会很棒，但不幸的是，这似乎无法从 elisp 访问。（编辑：啊，我是盲人；`backtrace-frame`提供了这个，我什至没有看它。谢谢斯特凡。）

与您的第二个选项（使用额外建议和标记变量）类似的方法是仅根据外部建议启用或禁用内部建议。这是一个例子：

[跨帧的emacs跟随模式](https://stackoverflow.com/questions/12755737/emacs-follow-mode-across-frames/12772622#12772622)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-25T01:05:27.210

绝对提交功能请求。

但是这意味着您可以通过仅在您的函数内重新绑定来制作自己的`my:dired-do-shell-command`代码，而无需“复制任何代码” 。这接近@oleg 的解决方案。`flet``dired-get-filename`

在这个[问题](https://stackoverflow.com/questions/9150569/save-original-function-locally-rebind-it-with-flet-and-call-original-function-f)中也讨论过：

这段代码未经测试，但你明白了。

```
(eval-when-compile (require 'cl))
(defun my:dired-do-shell-command (&rest args)
  (interactive)
  (let ((old-func (symbol-function 'dired-get-filename)))
    (flet ((dired-get-filename (&rest args)
                               (let ((file (funcall old-func 'verbatim)))
                                 (if (memberq file '("." ".."))
                                     (if (car args)
                                         file
                                       (expand-file-name file default-directory))
                                   (apply old-func args)))))
      (apply 'dired-do-shell-command args)))) 
```

Emacs 黑客滥用`defadvice`的太多了。它使事情变得非常模糊，只能作为最后的解决方案保留。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-25T02:14:39.947

使用`this-command`变量：

```
(defadvice dired-get-filename (before h-no-error-if-not-filep activate)
  (when (equal this-command 'dired-do-shell-command)
    (ad-set-arg 1 t))) 
```

# jquery - jQuery的一页动画框架

> ID：13056274
> 
> 赞同：1
> 
> 时间：2012-10-24T19:24:28.860
> 
> 标签：jquery, animation, navigation

我正在开发一个非常重的动画，一页网站 atm，我正在尝试找到有关该主题的教程和/或代码。

该网站基本上由几个部分组成，所有部分都位于画布上。用户应该能够滚动到画布上的不同部分并展开部分，以便它们占据整个视口。

它与那里的许多其他单页网站类似，但您应该能够向各种方向滚动，并且就像我说的某些部分应该是可扩展的。

理想情况下，我正在寻找一个允许这种类型动画的 jQuery 插件/框架。当然，我需要它是可访问的，最好是轻量级的（我不需要一堆内置的东西，只需要 URL 处理等）。

我已经用谷歌搜索并检查了其他网站，并考虑过自己编写这一切，但如果有人最近做了类似的事情或知道一个有前途的框架，我很想知道。

编辑：如果框架还支持部分本身的动画对象，那就太棒了。这样文本和图像就可以在滚动到某个部分后从侧面滑入。

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T19:33:05.650

也许将 KineticJS 之类的东西与[ZyngaScroller 之](http://www.kineticjs.com/)类的滚动画布结合[起来](https://github.com/TimHeckel/ZyngaScroller)可以实现您正在寻找的东西？

*免责声明*我编写了 ZyngaScroller jquery 插件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T04:00:28.613

如果有人感兴趣，我最终会使用 jQuery.scrollTo 和 jQuery.localScroll。我不得不对 localScroll 做一个小改动，以允许在最后点击的链接上使用 .selected-class。我还构建了一个小系统来处理水平部分。结果一切都很好。

# azure - 以编程方式重新启动 Azure 虚拟机生成 404 错误

> ID：13056276
> 
> 赞同：0
> 
> 时间：2012-10-24T19:24:33.043
> 
> 标签：azure

我正在尝试通过[REST interface](http://msdn.microsoft.com/en-us/library/windowsazure/jj157197.aspx)重新启动/重新启动 Azure 虚拟机。

我通过 Azure 门户创建了一个虚拟机，它在左侧的“虚拟机”选项卡下显示为正在运行。

我用于此操作的 url 如下：

[https://management.core.windows.net/](https://management.core.windows.net/) **{my-subscription-guid}** /services/hostedservices/ **cloudvm-test** /deployments/ **cloudvm-test** /roles/ **cloudvm-test** /Operations

您可以看到“cloudvm-test”作为托管服务名称、部署名称和角色名称重复出现，因为这就是它在调用[Get Hosted Service Properties](http://msdn.microsoft.com/en-us/library/windowsazure/ee460806.aspx)后返回的 xml 中的显示方式。尽管虚拟机不是经典的托管服务，但它出现在这个 xml 中，所以我只使用在那里找到的值。我担心的问题之一是我是否正确构建了 URL。

无论如何，使用上面的 URL，我按预期构建了我的请求，并发布了以下内容：

```
<RestartRoleOperation xmlns="http://schemas.microsoft.com/windowsazure" xmlns:i="http://www.w3.org/2001/XMLSchema-instance">
<OperationType>RestartRoleOperation</OperationType></RestartRoleOperation> 
```

我收到的错误是 404，指出“不支持资源服务名称托管服务”。

并不是说它真的很重要，但我正在用 Objective C 编写。如果你有 C# 中的示例，我可以很好地处理它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T19:34:27.317

而不是`.../roles/roleName/...`你必须使用（在 Uri 路径中用**roleInstances**`.../roleInstances/roleName ....`替换**角色）。**

 **VM 相关文档中充满了这样的小错误。

顺便说一句，为了拥有虚拟机，您需要拥有“托管服务”。因此，如果您尝试使用 REST API 创建 VM，您会发现必须指定现有的托管服务。因此，您首先必须创建托管服务，然后将虚拟机部署到该服务。这有点令人困惑，因为门户网站向我们隐藏了那个小细节。但是，如果您转到旧门户，您会看到您创建的每个虚拟 VM 背后实际上都有一个托管服务。在您删除其中的所有虚拟机之前，该托管服务不会在新门户中显示为“云服务”...**

# erlang - Erlang 负载均衡器

> ID：13056285
> 
> 赞同：5
> 
> 时间：2012-10-24T19:25:02.850
> 
> 标签：erlang, distributed

负载均衡器必须知道所有节点。客户端将与负载均衡器交互，然后负载均衡器将每个任务交给节点。

如果客户端总是访问相同的（单个）负载均衡器，怎么可能没有单点故障？你不能有两个负载均衡器，否则客户端怎么知道连接哪一个？

是否可以接受对于某些设计部分您无法避免单点故障？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-24T20:08:48.347

将多个负载均衡器作为高可用性解决方案的一部分是很常见的，负载均衡器没有必要成为单点故障。例如，负载平衡器可以放置在它们之间浮动的单个虚拟 IP 地址后面。如果其中一个出现故障，IP 将浮动到另一个接管的 IP。客户端只知道它始终连接到的单个虚拟 IP。

如果客户端是 Erlang 节点并且通过 Erlang 消息传递进行通信（在提供答案的第一部分时错过了这一点），您可以将负载平衡进程设置为属于进程组 (pg2) 并通过此路由。这将允许您有多个负载均衡器共享负载。如果所有请求都必须通过单个进程进行路由，您可以将一个进程注册为全局进程，并在其他节点上部署相同的进程作为备份。这些备份需要监控全局服务，并在全局进程丢失时接管。

# ruby - 使用gsub用链接替换单词时如何转义锚链接内容

> ID：13056303
> 
> 赞同：0
> 
> 时间：2012-10-24T19:26:56.427
> 
> 标签：ruby, ruby-on-rails-3.1, twitter-bootstrap

我有一组单词需要用链接替换句子中的单词。当我的锚链接中包含一个单词时，我遇到了错误。我正在使用循环遍历所有单词，因此如果第一个链接包含要替换的当前单词，它将在现有锚标记内再次被新链接替换。

例子：

我有一句话：敏捷的棕色狐狸跳过懒惰的狗。

我想将 'Fox' 替换为`<a href="#" data-content="A fox is not a dog">fox< /a>`，将 'Dog' 替换为：`<a href="#" data-content="A dog is a man's best friend">dog</a>`

我的代码：

```
<% text = "The quick brown fox jumps over the lazy dog." %>

<% @definition.each do |d| % ><br/>
<% text = text.gsub(d.word, link_to(d.word, '# ', :class => "popover-definition", :rel => "popover", :title => "<strong>#{d.word}</strong>", :"data-content" => d.meaning)).html_safe %><br/>
<% end %> 
```

**`@definition`包含单词和替换它的链接。

当循环第二次运行时，`<a>`来自 'fox' 的标签中的 'dog' 被替换为新链接。当单词包含在锚点中时，如何逃避字符串替换？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T00:03:34.007

在 Ruby 1.9.2 及更高版本中，您可以将哈希传递给`gsub`它，它会将哈希中的任何键与其值匹配。

从[文档](http://www.ruby-doc.org/core-1.9.3/String.html#method-i-gsub)中：

> 如果第二个参数是一个哈希，并且匹配的文本是它的一个键，那么对应的值就是替换字符串。

因此，如果您首先从以下位置创建哈希`@definition`：

```
hash = @definition.inject({}) { |h, d| h[d.word] = d.meaning; h }
#=> {"fox"=>"A fox is not a dog", "dog"=>"A dog is man's best friend"} 
```

然后你可以在一行中进行替换：

```
text.gsub(%r[#{hash.keys.join('|')}], hash)
#=> "The quick brown A fox is not a dog jumps over the lazy A dog is man's best friend." 
```

只需更新`hash`即可使用`link_to`，这应该适用于您的情况：

```
hash = @definition.inject({}) do |h, d|
  h[d.word] = link_to(d.word, '# ', :class => "popover-definition", :rel => "popover", :title => "<strong>#{d.word}</strong>", :"data-content" => d.meaning).html_safe
  h
end
text.gsub(%r[#{hash.keys.join('|')}], hash) 
```

# ruby-on-rails - 在 Ruby on Rails 的 Devise gem 中使用可锁定模块时，为什么我的 failed_attempts 字段没有增加？

> ID：13056305
> 
> 赞同：0
> 
> 时间：2012-10-24T19:27:10.050
> 
> 标签：ruby-on-rails, devise

在设计中使用可锁定模块时，为什么`failed_attempts`字段没有增加？我的设置有问题吗？`failed_attempts`当登录失败且密码错误时，不会从 0 开始移动。

**路线.rb**

```
devise_for :users, controllers: { registrations: 'users/registrations' }
devise_for :admins, controllers: { registrations: 'admins/registrations' }, skip: [:sessions] 
```

**架构.rb**

```
create_table "admins", :force => true do |t|
    ...
    t.integer  "failed_attempts",                       :default => 0
    t.string   "unlock_token"
    t.datetime "locked_at"
    ...
end

create_table "users", :force => true do |t|
    ...
    t.integer  "failed_attempts",                                  :default => 0
    t.string   "unlock_token"
    t.datetime "locked_at"
    ...
end 
```

**用户.rb**

```
devise :database_authenticatable, :registerable, :recoverable, :rememberable, :trackable, :validatable, :token_authenticatable, :lockable, remember_for: 4.weeks 
```

**管理员.rb**

```
devise :database_authenticatable, :registerable, :recoverable, :trackable, :validatable, :lockable, :timeoutable, timeout_in: 60.minutes 
```

**设计.rb**

```
config.lock_strategy = :failed_attempts
config.unlock_keys = [ :email ]
config.unlock_strategy = :both
config.maximum_attempts = 3
config.unlock_in = 1.hour 
```

**版本**

```
Rails 3.2.0
Ruby 1.9.3p194
Devise 2.1.2 
```

# insert - sybase 从同一服务器中的另一个数据库插入

> ID：13056307
> 
> 赞同：0
> 
> 时间：2012-10-24T19:27:16.397
> 
> 标签：insert, sybase

我正在尝试从一个数据库中获取所有额外数据并尝试插入另一个数据库。但我想省略列名，并试图只将表名设为硬编码来实现这一点。但是我们有一些字段是系统在表中生成的，例如 id，这不是必要的数据，但仍会产生完整性问题。我怎样才能插入只是想要的细节省略上面的那些列，要省略的列的名称也会改变..我不能做一个完整的插入，只是添加一些额外的数据。

到目前为止，我已经做到了这一点。

```
while 1=1
begin
if exists(select 1 from db1.table1 not in (select * from db2.table1)
begin
insert into db2.table1 (columns) select (columns) from db1.table1
end
if(rowCount=0)
break
end 
```

请告知我如何优化它以获得尽可能少的硬编码 故意留下 pk 部分，因为查询很大。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T10:43:28.937

如果你想要这样的东西：

```
insert into TAB
select * from TAB2 
```

或者

```
insert into TAB
select col1,col2 from TAB2 
```

或者

```
insert into TAB (col1,col2)
select * from TAB2 
```

其中 TAB1 和 TAB2 具有不同的列数或类型，这是不可能的，因为它会产生错误。

# python - 我在 python 代码分析方面需要帮助

> ID：13056311
> 
> 赞同：-3
> 
> 时间：2012-10-24T19:27:36.397
> 
> 标签：python

我必须在云上的 Java 上实现生物信息学算法。我已经获得了相同的 Python 代码。我非常了解 Java 和 Hadoop；

但是，我对Python一无所知。我正在寻找一种工具，以便我可以分析 Python 代码、理解算法并准备伪代码以在 Java 中实现它。我已经找了一些依赖分析器；但是，它并没有太大帮助。

我的方法错了吗？我必须学习 Python 才能完成这项任务吗？

我愿意为这个项目努力，我需要方向。我应该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T19:32:32.077

如果你想理解一个用python编写的程序，你应该学习python。如果没有对该算法的其他描述，这可能是最简单的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T19:33:22.993

Python 是一种非常容易学习的语言，而且你几乎不需要学习很多东西就可以阅读算法。Python 读起来像伪代码。

诀窍是，要学习哪个版本的 Python？有两个主要版本：Python 2 和 Python 3。为 Python 2 编写的代码可能无法在 Python 3 中运行，反之亦然。所以先弄清楚你要处理的是哪一个。找出问题的最佳方法可能是询问您获得 Python 代码的人。

官方的 Python 教程很容易理解，我建议你从这些开始。

*   Python 2：[http ://docs.python.org/tutorial/](http://docs.python.org/tutorial/)
*   Python 3：[http ://docs.python.org/py3k/tutorial/](http://docs.python.org/py3k/tutorial/)

不要担心学习一门新语言。Python 非常容易学习，你只需要学习它的一小部分。我在一个晚上学会了几乎所有的语法。

# ruby-on-rails-3 - 如何在rails中正确存储选定复选框的值？

> ID：13056318
> 
> 赞同：0
> 
> 时间：2012-10-24T19:27:52.003
> 
> 标签：ruby-on-rails-3, activerecord, checkbox, submit

经过长时间的搜索后，我无法找到有关如何最好地将选定复选框的值存储在 rails 中的任何信息。

我做类似的事情：

```
 = form_for @profile, :url => request.fullpath, :method => :get,  :html => { :class => 'form-  horizontal' } do |f|
      - @contacts.each do |contact|
        = check_box_tag "contact[#{ contact.slug }]", contact.id, true
        //= label_tag "contact[#{contact.id}]", contact.slug
     = f.submit t('forms.go') 
```

在表单提交时，这给了我参数：

```
Parameters: {"utf8"=>"✓", "contact"=>{"1"=>"bladadie", "2"=>"jolanteds03",
    "3"=>"jannie6674", "4"=>"henriette1305",
    "5"=>"amy6456", "6"=>"jacquelyn9001", "7"=>"florencio4872",
    "8"=>"angel410", "9"=>"rita558", "10"=>"chadd2684", "11"=>"ilene8219",
    "12"=>"sonny664", "13"=>"monique7912", "14"=>"merritt28103744",
    "15"=>"sunny80771258", "16"=>"lavinia31942066", "17"=>"jada29655747",
    "18"=>"johan16227289", "19"=>"cristobal9746087",
    "20"=>"meggie3447530"}, "commit"=>"Go »"} 
```

我将如何正确存储那些选中的复选框的值？

我找不到这方面的任何信息。希望有人可以提供一些启示！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T20:36:14.483

在您的示例中，您可以遍历参数：

```
params.each do |key, value|
   contact.create(:id => key, :slug => value
end 
```

创建将自动保存它们！

# c++ - Python 嵌入在 c 中。调用 PyRun_SimpleString 是同步的吗？

> ID：13056320
> 
> 赞同：2
> 
> 时间：2012-10-24T19:27:59.047
> 
> 标签：c++, python, translation, embedding

该应用程序的目的是将句子中存在的单词的词条从俄语翻译成英语。我是在 sdict 格式化词汇的帮助下完成的，该词汇由 c++ 程序调用的 python 脚本查询。

我的目的是获得以下输出：

> Выставка/exhibition::1 конгресс/congress::2 организаторами/组织者::3 которой/ which::4 являются/出现::5 РАО/NONE::6 ЕЭС/NONE::7 Росси/NONE::8 EESR/ *NONE* ::9 нефтяная/oil::10 компания/company::11 ЮКОС/NONE::12 YUKOS/NONE::13 и/and::14 администрация/administration::15 Томской/NONE::16 области/地区： :17 продлится/last::18 четыре/四::19 дня/day::20

该句子的以下代码成功，但是对于第二个句子，依此类推，我得到了错误的输出：

> Егор/ *NONE* ::1 Гайдар/NONE::2 возглавлял/NONE::3 первое/head::4 российское/first::5 правительство/NONE::6 которое/government::7 назмывали/which::8 правивое call::9 камикадзе/government::10

**注：** `NONE`用于缺少翻译的单词。

我正在运行以下实际调用的 C++ 代码摘录`PyRun_SimpleString`：

```
for (unsigned int i = 0; i < theSentenceRows->size(); i++){

  stringstream ss;
  ss << (i + 1);
  parsedFormattedOutput << theSentenceRows->at(i)[FORMINDEX] << "/";
  getline(lemmaOutFileForTranslation, lemma);

  PyObject *main_module, *main_dict;
  PyObject *toTranslate_obj, *translation, *emptyString;
  /* Setup the __main__ module for us to use */
  main_module = PyImport_ImportModule("__main__");
  main_dict   = PyModule_GetDict(main_module);

  /* Inject a variable into __main__, in this case toTranslate */
  toTranslate_obj = PyString_FromString(lemma.c_str());
  PyDict_SetItemString(main_dict, "start_word", toTranslate_obj);

  /* Run the code snippet above in the current environment */
  PyRun_SimpleString(pycode);
  **usleep(2);**
  translation = PyDict_GetItemString(main_dict, "translation");
  Py_XDECREF(toTranslate_obj);

  /* writing results */
  parsedFormattedOutput << PyString_AsString(translation) << "::" << ss.str() << " "; 
```

其中pycode定义为：

```
const char *pycode =
    "import sys\n"
    "import re\n"
    "import sdictviewer.formats.dct.sdict as sdict\n"
    "import sdictviewer.dictutil\n"
    "dictionary = sdict.SDictionary( 'rus_eng_full2.dct' )\n"
    "dictionary.load()\n"
    "translation = \"*NONE*\"\n"
    "p = re.compile('( )([a-z]+)(.*?)( )')\n"
    "for item in dictionary.get_word_list_iter(start_word):\n"
    "        try:\n"
    "            if start_word == str(item):\n"
    "                instance, definition = item.read_articles()[0]\n"
    "                translation = p.findall(definition)[0][1]\n"
    "        except:\n"
    "            continue\n"; 
```

我注意到第二句话的输出有些延迟，所以我添加了 usleep(2); 到 C++，同时认为它发生是因为调用`PyRun_SimpleString`不是同步的。但是，它没有帮助，我不确定这就是原因。延迟错误发生在后面和增加的句子中。

那么，调用是`PyRun_SimpleString`同步的吗？也许，在 C++ 和 Python 之间共享变量值是不对的？先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T20:02:39.253

根据[文档](http://docs.python.org/c-api/veryhigh.html#PyRun_SimpleString)，它是同步的。

我建议您将 python 代码与 C++ 代码分开测试，这将使调试变得更加容易。一种方法是将代码粘贴到交互式解释器中并逐行执行。在调试时，我会支持 Winston Ewert 的评论，即不要丢弃异常。

# zend-framework - Zend 框架和 PHP Cloud

> ID：13056323
> 
> 赞同：0
> 
> 时间：2012-10-24T19:28:02.027
> 
> 标签：zend-framework

我一直在玩这个： [https ://my.phpcloud.com/container/create](https://my.phpcloud.com/container/create)

除非您有开发帐户，否则上面的链接将不起作用。

我感到困惑的是在这里添加 Zend 框架。

容器的选择是：

```
Zend Server 5.6 – PHP 5.3
Zend Server 5.6 – PHP 5.4
Zend Server NextGen Sneak Peek 
```

如何创建一个配置了 Zend 框架的空容器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T22:11:39.027

容器是托管文件的环境。工作项目将是容器内的应用程序。创建 Zend Framework 项目后，您可以将其部署到容器中。这类似于我们在服务器中部署软件的方式。

创建一个包含 Zend Framework 应用程序的容器：

1.  使用以下任一选项创建容器：Zend Server 5.6 – PHP 5.3、Zend Server 5.6 – PHP 5.4 或 Zend Server NextGen Sneak Peek

2.  配置容器后，转到您的容器概述页面，如下所示 - [https://my.phpcloud.com/container/yourcontainername/overview](https://my.phpcloud.com/container/yourcontainername/overview)并单击“新建应用程序”。

3.  在创建新应用程序时，您可以选择一个空的 Zend Framework 应用程序。[在此处查看手册](http://www.phpcloud.com/help/pg-appman-generic)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T21:42:25.383

我对 phpcloud 不是很熟悉，但我认为您可能会混淆 Zend Framework 和 Zend Server。这是两个非常不同的东西。Zend Framework 并不真正需要安装，它只是 PHP 类的集合。我猜 ZF 通常会与您放在云上的应用程序一起上传。

# c# - C# LINQ 获取字段值与字符串数组黑名单不匹配的对象

> ID：13056324
> 
> 赞同：2
> 
> 时间：2012-10-24T19:28:03.017
> 
> 标签：c#, linq

我有以下代码：

```
public class MyObject {
  public string Name { get; set; }

  public MyObject(string name) {
    Name = name;
  }  
}

// caller method somewhere
public void myMethod() {
  List<MyObject> myObjects = new List<MyObject>();
  myObjects.Add(new MyObject("Jim"));
  myObjects.Add(new MyObject("David"));
  myObjects.Add(new MyObject("Richard"));
  myObjects.Add(new MyObject("Steve"));

  string[] namesToExclude = new string[] { "Jim", "Steve" };
  List<string> strings = myObjects.Select(m => m.Name).Except(namesToExclude).ToList();
  // replace the above line to result in List<MyObject> with 2 items (David, Richard)
} 
```

我想让最后一行正常工作，这样我就可以将列表作为 a`List<MyObject>`而不是作为`List<string>`.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-24T19:30:12.583

试试这个：

```
 var objects = 
      myObjects.Where(m => !namesToExclude.Contains(m.Name)).ToList(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T19:30:50.380

您可以使用原始列表并将`Except`结果`join`

```
var allowedObjNames = myObjects.Select(o => o.Name).Except(namesToExclude);
var allowedObject = from o in myObjects join a in allowedObjNames 
                    on o.Name equals a
                    select o;
var allowedObjList = allowedObject.ToList(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-24T19:30:17.097

这可能有点错误，因为我习惯于更多地使用 VB.NET，但类似......

```
(from m in myObjects where !namesToExclude.Contains(m.Name)).ToList() 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-24T19:30:49.270

```
var objs = myObjects.Where(m => !namesToExclude.Contains(m.Name)).ToList(); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-24T19:32:58.750

将最后一行替换为 -

```
List<MyObject> objects = myObjects.Where(o =>
                           !namesToExclude.Contains(o.Name)).ToList(); 
```

# visual-studio - 'nuget' 无法识别，但其他 nuget 命令正常工作

> ID：13056329
> 
> 赞同：134
> 
> 时间：2012-10-24T19:28:31.560
> 
> 标签：visual-studio, nuget-package

我正在尝试使用[http://docs.nuget.org/docs/creating-packages/creating-and-publishing-a-package#From_a_convention_based_working_directory](http://docs.nuget.org/docs/creating-packages/creating-and-publishing-a-package#From_a_convention_based_working_directory) 作为参考创建一个 nuget 包。Visual Studio 中的包管理器控制台不允许我使用“nuget”命令。我能够“获取帮助 nuguet”并显示：

包括以下 NuGet cmdlet。

```
 Cmdlet                  Description
    ------------------      ----------------------------------------------
    Get-Package             Gets the set of packages available from the package source.

    Install-Package         Installs a package and its dependencies into the project.

    Uninstall-Package       Uninstalls a package. If other packages depend on this package, 
                            the command will fail unless the –Force option is specified.

    Update-Package          Updates a package and its dependencies to a newer version.

    Add-BindingRedirect     Examines all assemblies within the output path for a project
                            and adds binding redirects to the application (or web) 
                            configuration file where necessary.

    Get-Project             Returns a reference to the DTE (Development Tools Environment) 
                            for the specified project. If none is specifed, returns the 
                            default project selected in the Package Manager Console.

    Open-PackagePage        Open the browser pointing to ProjectUrl, LicenseUrl or 
                            ReportAbuseUrl of the specified package.

    Register-TabExpansion   Registers a tab expansion for the parameters of a command. 
```

*   但是，每当我使用 nuget 开始命令时，都会给出：

术语“nuget”未被识别为 cmdlet、函数、脚本文件或可运行程序的名称。检查名称的拼写，或者如果包含路径，请验证路径是否正确并重试。

在 line:1 char:6 + nuget <<<< + CategoryInfo : ObjectNotFound: (nuget:String) [], CommandNotFoundException + FullyQualifiedErrorId : CommandNotFoundException

我尝试了以下解决方案：

1>关闭所有项目并重新启动

2>卸载并重新安装

3>创建一个powershell配置文件（这以前不存在，这实际上破坏了一切）

在我将 Visual Studio 2012 Ultimate 试用版升级为注册后，问题开始出现。我最初安装了 VS 12 Pro。我不知道这是否真的与它有关，但我注意到其他有类似问题的人安装了 vs 10 和 12。

我的问题是“有人知道还有什么可以尝试的吗？” 我的理论是缺少 nuget 命令的路径，但我找不到如何配置包管理器控制台使用的路径，而且我不确定 cmdlet nuget 的实际存储位置。

更新---尝试下载命令行工具，如下所示。这导致没有任何工作再次起作用。我试图卸载，现在我在 nuget 的 vs2010 扩展中有一个项目，它没有启用安装或卸载按钮。这让我相信它与通过 2010 年和 2012 年安装的扩展程序有关，这在我的小戏剧中有一部分。如果有人也知道如何对可卸载的扩展进行核攻击，也请提出建议，但我会为此尝试另一个问题。

* * *

## 回答 #1

> 赞同：166
> 
> 时间：2014-01-11T20:35:24.860

Nuget.exe 位于`.nuget`项目的文件夹中。它不能直接在 Package Manager Console 中执行，而是由 Powershell 命令执行，因为这些命令会为自己构建自定义路径。

我要解决的步骤是：

*   [从https://github.com/NuGet/NuGet.Client/releases](https://github.com/NuGet/NuGet.Client/releases)下载 NuGet.exe （[优先考虑最新版本](https://github.com/NuGet/NuGet.Client/releases/latest)）；
*   将 NuGet.exe 放入`C:\Program Files\NuGet\Visual Studio 2012`（或您的 VS 版本）；
*   `C:\Program Files\NuGet\Visual Studio 2012`在 PATH 环境变量中添加（或您的 VS 版本）~~（参见[http://www.itechtalk.com/thread3595.html](http://www.itechtalk.com/thread3595.html)作为操作方法）~~（[这里有说明](http://www.computerhope.com/issues/ch000549.htm)）。
*   关闭并打开 Visual Studio。

* * *

**更新**

NuGet 可以使用以下命令轻松安装到您的项目中：

> 安装包 NuGet.CommandLine

* * *

## 回答 #2

> 赞同：70
> 
> 时间：2014-12-16T07:07:46.337

在`[Package Manager Console]`尝试以下

```
Install-Package NuGet.CommandLine 
```

* * *

## 回答 #3

> 赞同：65
> 
> 时间：2014-07-23T23:54:36.547

有很多更好的方法可以做到这一点。

1.  在要打包的项目中安装 Nuget.Build 包。安装后可能需要关闭并重新打开解决方案。
2.  通过 Chocolatey 安装 nuget - 更好。安装 Chocolatey：[https](https://chocolatey.org/) ://chocolatey.org/ ，然后运行

    cinst Nuget.CommandLine

在您的命令提示符下。这将安装 nuget 并设置环境路径，因此 nuget 始终可用。

* * *

## 回答 #4

> 赞同：26
> 
> 时间：2013-02-22T00:13:54.697

您还可以尝试将系统变量路径设置为 nuget exe 的位置并重新启动 VS。

1.  打开您的系统`PATH`变量并添加您的 nuget.exe 的位置（对我来说这是`C:\Program Files (x86)\NuGet\Visual Studio 2013`：）
2.  重新启动 Visual Studio

我会将此作为对您的[答案](https://stackoverflow.com/a/13059577/2038222)@done_merson 的评论发布，但我没有这样做所需的声誉。

* * *

## 回答 #5

> 赞同：19
> 
> 时间：2012-10-24T19:39:03.447

nuget命令行工具不自带vsix文件，单独下载

[https://github.com/nuget/home](https://github.com/nuget/home)

* * *

## 回答 #6

> 赞同：19
> 
> 时间：2017-07-17T18:09:40.650

在 Visual Studio 中：

```
Tools -> Nuget Package Manager -> Package Manager Console. 
```

在下午：

```
Install-Package NuGet.CommandLine 
```

关闭 Visual Studio 并再次打开它。

* * *

## 回答 #7

> 赞同：13
> 
> 时间：2017-04-19T07:26:52.427

*   **在解决方案资源管理**器中右键单击您的项目。
*   选择**Manage NuGet Packages for Solution**。
*   搜索Microsoft 的**NuGet.CommandLine**并安装它。 [![搜索 Nuget.CommandLine](../Images/8141c7c51851711b8eb6db7f225f94df.png)](https://i.stack.imgur.com/Z7MPZ.png)
*   完成安装后，您将在项目中找到一个名为**packages**的文件夹。转到解决方案资源管理器并寻找它。 [![包](../Images/51ffa579fdec2cb412151dd52d86f29a.png)](https://i.stack.imgur.com/s4T43.png)
*   在包中查找名为**NuGet.CommandLine.3.5.0**的文件夹，此处 3.5.0 只是版本名称，您的文件夹名称将相应更改。 [![nuGet 命令行](../Images/baca4cb4d2d63cd0b9841da4be0e1b14.png)](https://i.stack.imgur.com/wQRCX.png)
*   在**NuGet.CommandLine.3.5.0 中**查找名为**tools**的文件夹。 [![工具](../Images/074d2518f8a05d588c089fb6404c9dea.png)](https://i.stack.imgur.com/5iD8C.png)
*   在**工具**里面你会得到你的**nuget.exe** [![nuget.exe](../Images/9a41b46ba49e0ea6322cbae8b0311302.png)](https://i.stack.imgur.com/33QvR.png)

* * *

## 回答 #8

> 赞同：9
> 
> 时间：2019-08-30T09:21:52.083

`nuget.exe`从中检索`https://www.nuget.org/downloads`。将其复制到本地文件夹并将该文件夹添加到`PATH`环境变量中。

这将使 nuget 在任何项目中都可以在全球范围内使用。

* * *

## 回答 #9

> 赞同：7
> 
> 时间：2012-10-24T23:47:57.260

我通过找到 nuget.exe 并移动到易于键入的路径 (c:\nuget\nuget) 然后使用此路径调用 nuget 来解决此问题。这似乎可以解决问题。包管理器控制台上的 c:\nuget\nuget 按预期工作。我试图找到控制台正在使用的路径并更改环境路径，但始终无法让它以这种方式工作。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2021-09-24T21:31:02.657

跟着这些步骤。

1.  在 Visual Studio 中，转到工具-> NuGet 包管理器-> 包管理器控制台

2.  运行以下命令

    安装包 NuGet.CommandLine

3.  关闭视觉工作室并重新打开

4.  重复步骤 1

5.  运行你的 nuget 命令，例如。nuget push C:\Users\syaads\Debug\Library.1.0.32.nupkg -Source Artifactory

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2022-02-21T08:43:43.730

您可以`nuget.exe`在您的个人资料文件夹中找到：

> C:\Users\YourProfileName.nuget\packages\nuget.commandline\6.0.0\tools

如果您想全局使用它，请在`PATH`环境变量中注册上述路径。

有关如何执行此操作的详细指南，请参阅[在 Windows 10 中添加到 PATH](https://www.architectryan.com/2018/03/17/add-to-the-path-on-windows-10/)

# html - 如何将输入定位在 iframe 的内部和底部？

> ID：13056330
> 
> 赞同：1
> 
> 时间：2012-10-24T19:28:34.427
> 
> 标签：html, css

```
<div>
    <iframe runat="server" id="iFrameMap">
    </iframe>
    <input type="button" runat="server" onclick="return false;" id="btnRedirect" class="button ttButton ttAjaxStateChange ui-button ui-widget ui-state-default ui-corner-all" value="Open View" />
</div> 
```

我想将我的输入标签放置在 iframe 的底部，整个输入标签都在 iframe 内，即使在结构上它在 iframe 之外。这可能吗？先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T19:31:50.653

是的。添加`position:relative`到包含，`<div>`然后穿上`position:absolute;bottom:0`。`<input/>`

# android - Android 自定义布局 - onDraw() 永远不会被调用

> ID：13056331
> 
> 赞同：54
> 
> 时间：2012-10-24T19:28:36.357
> 
> 标签：android, layout, view, viewgroup

```
public class MainActivity extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        TableView tv = new TableView(this);
        tv.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT,LayoutParams.MATCH_PARENT));
        setContentView(tv);      
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
}

public class TableView extends ViewGroup {
    private Paint oval;
    private RectF rect;

    public TableView(Context context) {
        super(context);
        oval= new Paint(Paint.ANTI_ALIAS_FLAG);
        oval.setColor(Color.GREEN);
    }

    public void onDraw(Canvas canvas) {
        super.onDraw(canvas);
        canvas.drawOval(rect , oval);
    }
    @Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
        super.onMeasure(widthMeasureSpec, heightMeasureSpec);
        int wspec = MeasureSpec.makeMeasureSpec(
                getMeasuredWidth(), MeasureSpec.EXACTLY);
        int hspec = MeasureSpec.makeMeasureSpec(
                getMeasuredHeight(), MeasureSpec.EXACTLY);
        for(int i=0; i<getChildCount(); i++){
            View v = getChildAt(i);
            v.measure(wspec, hspec);
        }
    }

    @Override
    protected void onLayout(boolean changed, int l, int t, int r, int b) {
        float w=r-l;
        float h=b-t;
        rect=new RectF(w/8,h/8,7*w/8,7*h/8);
        float theta = (float) (2 * Math.PI / getChildCount());
        for(int i=0; i< getChildCount(); i++) {
            View v = getChildAt(i);
            w = (rect.right-rect.left)/2;
            h = (rect.bottom-rect.top)/2;
            float half = Math.max(w, h)/2;
            float centerX = rect.centerX()+w*FloatMath.cos(theta);
            float centerY = rect.centerY()+h*FloatMath.sin(theta);
            v.layout((int)(centerX-half),(int)(centerY-half),(int)(centerX+half),(int)(centerY+half));
        }
    }
} 
```

好吧，几乎没有好的和深入的教程，几乎没有任何关于如何正确进行自定义布局的数据，所以我试图弄清楚它是如何完成的，我试图实现的是一个在中心绘制绿色椭圆的布局屏幕，我希望这个布局的每个孩子都围绕椭圆形布置。

你可以把那个椭圆形想象成一张扑克桌，我希望这种布局的孩子们坐在它周围。

这段代码目前发生的事情是我得到一个没有椭圆形的白色应用程序屏幕，所以我调试它并看到 onDraw 永远不会被调用......

3个问题：

1.  为什么 onDraw 没有被调用？
2.  sdk 警告我不应该在 onLayout 方法中分配新对象，那么我应该在哪里计算 RectF 以便为 onDraw 调用做好准备？
3.  调用 super.onDraw() 会让所有孩子自己画画吗？还是我应该明确调用他们的draw()？

如果我全都错了，你们可以指导我朝着正确的方向前进，或者提供与该主题相关的示例或教程的任何链接，这也会有所帮助！

* * *

## 回答 #1

> 赞同：163
> 
> 时间：2012-10-24T19:32:57.223

默认情况下，`onDraw()`不为`ViewGroup`对象调用。相反，您可以覆盖`dispatchDraw()`.

或者，您可以通过调用构造函数来启用`ViewGroup`绘图。`setWillNotDraw(false)``TableView`

编辑：

对于#2： - 在构造函数中初始化它，然后调用`rect.set()`你的`onLayout()`方法。

对于＃3： - 是的，据我所知，超级调用将处理它，除非您需要自定义绘制孩子的方式，否则您不必处理它。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2014-02-13T15:44:33.543

如果要重新绘制画布调用invalidate()，方法onDraw() 将被重新执行

# css - 绝对定位的 DIV 跨浏览器不一致

> ID：13056332
> 
> 赞同：0
> 
> 时间：2012-10-24T19:28:45.413
> 
> 标签：css, debugging, cross-browser, positioning

我对绝对定位的 DIV 有疑问 - 它在浏览器中的位置并不完全相同。问题是我的大部分内容都是由 JSP 文件生成的，我必须应用 CSS 并在该文件之外的 CMS 中创建我的内容。以下是代码的结构：

```
 <div id="automatic-container">
                 <div class="one">
                 <div class="oneWeird"></div>
                 <div id="content-container">
                     <div id="some-content1"></div>
                     <div id="some-content2"></div>
                 </div>
                <div id="absolutely-position">plain text is inserted here via JSP file, wrapped only in div tags. adding/styling p tags does not help</div>  
                </div>
                </div> 
```

除了“内容容器”之外的所有内容都由 JSP 文件自动生成。“绝对位置” div 中的内容应放在“内容容器”中的内容之上，并位于特定位置。oneWeird 是由 JSP 创建的 div 似乎没有任何用途，我可以告诉...

我已经应用了以下 CSS，并且绝对位置 DIV 在每个浏览器中都偏离了几个像素（我检查了 Chrome、IE7、8、9、FF、Safari）。它在 Chrome、Safari 和 IE8 中匹配。在 FF 中，它大约高 3 个像素，IE 9 高 5 个像素，而在 IE7 中，它下降了大约 10 个像素。

```
 #automatic-container{position: relative; padding: 0px; margin: 0px auto;}
                #automatic-container div.one {position: relative; padding: 0px; margin: 0px auto;}
                #automatic-container div.one div.oneWeird{display: none;}
                #content-container{margin: 0px auto; width: 848px; height: 354px; background:url('bkg_confirm.jpg') no-repeat; font-family: Helvetica,Arial,sans-serif; position: relative; padding: 0;}
                #some-content1{position: relative; margin: 0px; text-align: center; padding: 0; width: 490px; height: 354px; left: 343px; top: 30px;}
                #some-content2 {position: relative; width: 490px; height: 55px; border-top: 1px solid #cccccc; padding: 0px; margin: 60px 0 0 0; overflow:hidden;}
                #absolutely-position{height: 20px; left: 420px; position: absolute; text-align: center;top: 125px; width: 465px;font-weight: bold; padding: 0px; margin: 0px;} 
```

关于如何在浏览器中获得绝对位置 DIV 一致的任何想法？我在 SO 或其他地方找到的文章都没有帮助。我尝试将定位更改为相对并使用 z-index，但这也产生了不一致的结果。当我通过在线验证运行它时，我的代码也是干净的。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T20:57:02.087

在应用普通 css 之前，将重置： http: [//meyerweb.com/eric/tools/css/reset/](http://meyerweb.com/eric/tools/css/reset/)或 Normalize.css [http://necolas.github.com/normalize.css/应用到您的页面。](http://necolas.github.com/normalize.css/)我几乎可以保证您遇到的是不同浏览器使用的不同默认样式。

重置的作用是在您开始应用自己的样式之前将所有样式设置为基线。因此，如果 Chrome 对元素应用 x 数量的边距，而 IE 应用 Y 数量，则重置会将它们都设为 0。缺点是您使用的每个元素都必须重新设置样式。例如列表不再有默认样式，也没有块引号等。

Normalize.css 对新手来说更容易使用，因为它为所有东西设置基本样式，就像重置一样，但它为大多数东西提供了一种样式，而不仅仅是将它们设置为 0，所以你的列表仍然会用项目符号缩进，但它们在所有浏览器上看起来都一样（或应该。）

# c# - 使用 client.DownloadFile();

> ID：13056333
> 
> 赞同：3
> 
> 时间：2012-10-24T19:28:45.757
> 
> 标签：c#

我正在使用 client.DownloadFile(); 对于我的控制台项目..现在我的问题是：如果我的命令是这样的：

```
client.DownloadFile(http://url.com/random-name, "filename") 
```

我需要的是而不是下载文件并将其保存为“文件名”我希望文件名是“随机文件名是什么”这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T19:33:10.420

使用[Path.GetFileName](http://msdn.microsoft.com/en-us/library/system.io.path.getfilename.aspx)获取文件名。您可以获取`AbsoluteUri`URI 的属性，或者像您在帖子中所做的那样自己传递完整的 URI。

```
string filename = System.IO.Path.GetFileName(myUri.AbsoluteUri); 
client.DownloadFile(myUri, filename); 
```

# visual-studio-2010 - 在 VS2012 中编译 F# 2.0 项目

> ID：13056335
> 
> 赞同：4
> 
> 时间：2012-10-24T19:28:52.540
> 
> 标签：visual-studio-2010, f#, visual-studio-2012, fparsec

我有一个 VS2010 解决方案，其中包括一些针对 F# 2.0 编译器/SDK 的 F# 项目，利用 fparsec 和 fsharp powerpack。

然后我将我的主要开发机器升级到 VS2012，加载了解决方案并且能够正常编译。

但是，我刚刚用 Windows 8 和 VS2012 重新铺设了一台单独的机器，在该机器上加载解决方案会导致编译失败，因为该项目的目标是 F# 3.0，并且 fparsec/fsharp powerpack 似乎不再编译。

是否可以在这台新的 Windows 8 机器上安装 FSharp 2.0 SDK（如果是，我从哪里得到它？）并获得重新编译的解决方案，或者我需要做其他事情来让它在两者上都能正常工作旧机和新机？

**更新于 2012 年 10 月 25 日**

重新启动 VS2012 后编译现在可以工作，但是在执行代码时，我遇到了与我的 F# 代码相关的意外错误：

```
Method not found: 'ParserResult`2<!!0,Microsoft.FSharp.Core.Unit> FParsec.CharParsers.run(
Microsoft.FSharp.Core.FSharpFunc`2<FParsec.CharStream`1<Microsoft.FSharp.Core.Unit>,
FParsec.Reply`1<!!0>>, System.String)'. 
```

在首先使用 F# 安装 VS2010 然后升级到 vs2012 的机器上编译/执行相同代码时不会发生这种情况 - 仅在仅安装了 vs2012 的机器上发生。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T21:28:12.197

如果您将目标框架设置为“4.0”（或更低），它的编译应该与 F# 2.0 相同（具有一些新的不错的功能，例如自动属性）。我认为没有理由坚持忽略新功能，也绝对没有理由忽略 F# 3.0 附带的所有错误修复。

# java - CDI：beans.xml，我把你放在哪里？

> ID：13056336
> 
> 赞同：60
> 
> 时间：2012-10-24T19:28:57.373
> 
> 标签：java, jakarta-ee, maven, cdi, jboss-weld

我正在使用 Weld 作为 CDI 实现。我的集成测试，它试图组装对象图实例化 Weld 容器**运行良好**，当我在`src/test/java/META-INF/beans.xml`. 这是一个简单的测试：

```
public class WeldIntegrationTest {
    @Test
    public void testInjector() {
        new Weld().initialize();
        // shouldn't throw exception
    }
} 
```

现在，当我跑步时`mvn clean install`，我总是得到：`Missing beans.xml file in META-INF!`

我的根文件夹是“src”和“web”，其中包含 WEB-INF 文件夹，但我也尝试使用默认的 maven 结构并将“web”重命名为“webapp”并将其移至 src/main。我尝试了所有我能想到的合理位置：

```
 - src/main/java/META-INF/beans.xml
 - src/test/java/META-INF/beans.xml
 - web/WEB-INF/beans.xml
 - src/main/webapp/WEB-INF/beans.xml
 - src/main/webapp/META-INF/beans.xml
 - src/main/webapp/META-INF/(empty) and src/main/webapp/WEB-INF/beans.xml 
```

到目前为止没有任何效果：/

* * *

## 回答 #1

> 赞同：110
> 
> 时间：2012-10-24T20:27:59.777

对于 EJB 和 JAR 打包，您应该将`beans.xml`.`src/main/resources/META-INF/`

对于 WAR 包装，您应该将`beans.xml`.`src/main/webapp/WEB-INF/`

请记住，只有`.java`文件应该放在`src/main/java`和`src/test/java`目录中。文件之类的资源`.xml`应该在`src/main/resources`.

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2015-08-24T10:36:14.557

只是为了补充上述答案，这里有一个官方参考： [https ://docs.oracle.com/javaee/6/tutorial/doc/gjbnz.html](https://docs.oracle.com/javaee/6/tutorial/doc/gjbnz.html)

引用：

> 使用 CDI 的应用程序必须有一个名为 beans.xml 的文件。该文件可以是完全空的（它仅在某些有限的情况下具有内容），但它必须存在。对于 Web 应用程序，beans.xml 文件必须位于 WEB-INF 目录中。对于 EJB 模块或 JAR 文件，beans.xml 文件必须位于 META-INF 目录中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-05T16:32:51.510

[http://www.javamonamour.org/2017/11/cdi-in-java-se-8.html](http://www.javamonamour.org/2017/11/cdi-in-java-se-8.html) 在这里，您可以看到我成功放置的位置，即在 src/META-INF 下。该帖子包含 Java SE 中 CDI 的完整工作示例。

# java - 将 Web 界面 (Spring MVC) 添加到现有 Java 应用程序

> ID：13056341
> 
> 赞同：3
> 
> 时间：2012-10-24T19:29:15.717
> 
> 标签：java, spring, spring-mvc

我有一个现有的 Java 应用程序（基于 Spring），它目前没有 Web 界面，也没有在 Web 容器中运行。它与启动程序很好地打包在一起，并且可以正常工作。

我需要做的是为一些管理类型的东西添加一个管理 Web 界面，检索实时指标，也许还有一些图表，让用户有一种温暖的模糊感觉，知道一切正常。由于我们是一家 Spring 商店，并且我们的一些 Web 应用程序已经使用 Spring MVC，它只对我们有意义，但是，我对内部 Spring 人员关于我应该如何进行的建议并不满意。

使用此 Web 界面的理想方式是什么？

*   将我的应用程序转换为 Web 应用程序并让 Web 容器启动该应用程序。我不太喜欢这种方法，因为 Web 层实际上是次要应用程序。
*   创建一个单独的项目，将其打包为战争，将 Jetty 嵌入到我现有的应用程序中并让它加载战争。我想我可以使用上下文加载器侦听器使我的应用程序的根上下文成为 Web 应用程序 spring 上下文的父级。这将涉及将我的 Maven 项目分解为我认为的 2 个项目。我无法使用现有的 Web 技术在 Web 层和主应用程序之间进行通信，因为我的主应用程序没有启用 Web。
*   嵌入 Jetty 并将 Spring MVC 的东西直接放在我的应用程序中。虽然我以前做过这种方法，但它确实涉及一些丑陋 - 例如将 JSP 标记库爆炸到我的 jar 中。

对这里的一些干净分离有什么想法吗？

另外值得注意的是，我当前的 jar 包含一些实用程序应用程序，一些 shell 脚本会启动这些应用程序。走纯 WAR 路线会使这变得不那么容易，因为我不能将 java 指向我的 war 文件并选择要执行的类。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T19:40:33.327

如果 web 确实只是应用程序的一个小添加，那么将其迁移到 WAR 并部署在 servlet 容器中可能是一种矫枉过正的做法。嵌入 Web 服务器/servlet 容器看起来要简单得多，尽管它不必是 Jetty 或 Tomcat。[您可以使用 JDK 中内置的 Web 服务器，也可以在netty](/questions/tagged/netty "显示标记为“netty”的问题")甚至原始套接字之上编写一个。但这是一个地狱般的维护。

阅读时想到的另一种解决方案：

> 一些管理类型的东西的网络界面，检索实时指标，也许还有一些图表

也许您不需要接口，而是需要监控基础设施？查看 JMX（Spring[对 JMX 有很好的支持](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/jmx.html)） - 并编写第二个 Web 应用程序，它通过 JMX 简单地连接到您的独立 Java 应用程序并以奇特的方式显示指标。另一种方法是通过[Jolokia](http://www.jolokia.org/)公开 JMX ，它将 JMX 转换为 REST 服务。

这种方法有几个优点：

*   监控API通用，免费获取

*   您不必使用Web客户端，监控应用程序完全解耦，

*   最后，对原始应用程序的更改很少。看看这个概念证明：[1](http://nurkiewicz.blogspot.no/2011/03/jolokia-highcharts-jmx-for-human-beings.html) , [2](http://nurkiewicz.blogspot.no/2012/02/client-side-server-monitoring-with.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T23:22:17.843

这实际上取决于您现有 Java/Spring 应用程序的结构以及它提供了多少 API。我已经做了类似的事情，我通过创建一个单独的 Spring MVC 项目来接近它，然后将现有的 Java 应用程序指定为 JAR 依赖项。

这对于 Maven（或 Ivy 等）来说很容易，并且提供了很好的解耦。诀窍是能够在 Spring MVC 应用程序中编写服务类，然后通过一个简单的 DAO 类通过依赖的 Spring 应用程序访问数据。这就是为什么我一开始就说，这取决于您的原始 Java 应用程序的结构。它必须能够为数据访问提供 API，然后您可以将 DAO (impl) 插入其中。

如果这不容易做到，那么我建议的下一个选项就是将您的 Spring 应用程序转换为 Spring MVC 应用程序。我在另一个应用程序上工作过。使用 Maven，可以指定构建可以创建一个 war 文件或一个 jar 文件（或两者）。因此它可以部署为 webapp（通过 war）或普通应用程序（通过 jar）。是的，jar 版本有点臃肿，但值得妥协。

嵌入 Jetty 或通过 war 文件使用 Tomcat 的问题是一个完全独立的问题，各有利弊。它不应该首先影响您在构建 Web 应用程序时采用的方法。

# c# - 计时器有效吗？

> ID：13056349
> 
> 赞同：0
> 
> 时间：2012-10-24T19:29:46.820
> 
> 标签：c#, performance, timer

我创建了一个应用程序，用于以特定间隔读取邮箱。如果有新邮件，它会下载附件创建 pdf 文件，例如 100 + 将其合并并将其邮寄回特定列表。由于某些服务器策略可以将其转换为窗口服务。我使用了一个计时器，我的代码如下

```
private System.Threading.Timer timer;
timer = new System.Threading.Timer(TimerTick, null, TimeSpan.Zero, TimeSpan.FromMinutes(1));

void TimerTick(object state)
{
  var minute = DateTime.Now.Minute;
  if (minute != lastMinute && minute % 5 == 0)
  {
    //check mail here
  }
} 
```

实现这样的计时器是一种有效的方法吗？有没有更好的方法来处理这个？我担心性能，因为应用程序需要运行 24 x7，因此如果效率低下，最终可能会使用更多的 cpu 内存。

***在这种情况下，计时器是唯一的最佳选择吗？***

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T19:51:05.380

您应该监控服务的性能。如果您发现存在性能问题：

1.  测量它
2.  更改您的代码
3.  再次测量
4.  而不是比较你的测量结果

`System.Threading.Timer`是一个简单的轻量级计时器，它使用回调方法并由线程池线程提供服务。

*   您可能会考虑`System.Timers.Timer`使用基于服务器的计时器功能。

可维护性和调试提示：

*   使用 XML 配置文件设置间隔，无需更改代码。这只会让您或管理员控制服务。

使用代码轻松调试您的服务：

```
static void Main()
{
#if (!DEBUG)
    System.ServiceProcess.ServiceBase[] ServicesToRun;
    ServicesToRun = new System.ServiceProcess.ServiceBase[] { new Service1() };
    System.ServiceProcess.ServiceBase.Run(ServicesToRun);
#else
    // Debug code: this allows the process to run as a non-service.
    // It will kick off the service start point, but never kill it.
    // Shut down the debugger to exit
    Service1 service = new Service1();
    service.EntryMethodHere(); // Your method that activates your timer
    // Put a breakpoint on the following line to always catch
    // your service when it has finished its work
    System.Threading.Thread.Sleep(System.Threading.Timeout.Infinite);
#endif 
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T19:35:12.003

简单地给计时器一个 5 分钟的周期，而不是 1 分钟的周期并每 5 次检查一次邮件会更有效。

```
timer = new System.Threading.Timer(TimerTick, null, TimeSpan.Zero, TimeSpan.FromMinutes(5)); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-24T20:15:13.740

计时器非常高效，但也许您应该改用 TimeSpan.FromMinutes(5) 并删除 TimerTick 中效率低下的条件。由于 TimerTick 将在 ThreadPool 线程中运行，因此您必须在再次检查邮件服务器之前检查前一个事件是否已完成。

```
private System.Threading.Timer timer = new System.Threading.Timer(TimerTick, null, TimeSpan.Zero, TimeSpan.FromMinutes(5));

private bool FCheckingMails = false;
void TimerTick(object state)
{
    if (FCheckingMails) return;
    FCheckingMails = true;
    try
    {
        //check mail here
    }
    finally
    {
        FCheckingMails = false;
    }
} 
```

有人可能会说 FCheckingMails 不是线程安全的，但它确实不需要。

如果您担心效率，您应该检查运行数百万次/分钟的代码，而不是运行 12 次/小时的代码。

祝你的任务好运。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T13:21:12.103

System.Threading.Timer 在 CPU 和内存使用方面应该非常轻量级，所以我不会设想那里有任何问题。更一般地说，这种工作通常由调度程序触发，该调度程序可以配置更多的控制，并了解周末、一个月中的某天（例如，在每个月的第一天或最后一天进行处理）等。

如果您确实走这条路，那么请查看[Quartz.Net](http://quartznet.sourceforge.net/)，一个开源的 .net cron 作业调度程序。

# java - 将子类传递给方法但将超类作为参数？

> ID：13056350
> 
> 赞同：33
> 
> 时间：2012-10-24T19:30:09.083
> 
> 标签：java, oop

我有一个`Vehicle`带有 2 个已实现子类的抽象类`RedVehicle`和`YellowVehicle`.

在另一个类中，我有一个`List<Vehicle>`包含两个子类的实例。我希望能够将类类型传递给方法，然后使用该类型来决定我想要在`List`.

由于`Class`是通用的，我应该用一些东西对其进行参数化，但是将参数作为父类会`Vehicle`停止调用代码的工作，因为`exampleMethod`现在需要一种 Vehicle，而不是 or 的子`RedVehicle`类`YellowVehicle`。

我觉得应该有一种干净的方法来做到这一点，那么实现该功能的正确方法是什么？

nb 我不一定要传递`Class`类型，如果有更好的建议，我很乐意尝试这些。

调用代码：

```
service.exampleMethod(RedVehicle.class);
service.exampleMethod(YellowVehicle.class); 
```

字段/方法：

```
//List of vehicles
//Vehicle has 2 subclasses, RedVehicle and YellowVehicle
private List<Vehicle> vehicles;

//Having <Vehicle> as the Class parameter stops the calling code working
public void exampleMethod(Class<Vehicle> type) 
{
    for(Vehicle v : vehicles)
    {
        if(v.getClass().equals(type))
        {
            //do something
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-10-24T19:45:41.547

改为这样做：

```
public <T extends Vehicle> void exampleMethod(Class<T> type) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-24T21:43:59.133

为什么不使用[访问者模式](http://en.wikipedia.org/wiki/Visitor_pattern)？

这样你

*   不需要类型标记
*   让动态调度处理大小写区分（而不是`if(v.getClass().equals(type))`）
*   更灵活（遵循[OCP](http://en.wikipedia.org/wiki/Open/closed_principle)）

* * *

详细地：

你的抽象类`Vehicle`得到一个方法`accept(Visitor v)`，子类通过调用适当的方法来实现它`v`。

```
public interface Visitor {
  visitRedVehicle(RedVehicle red);
  visitYellowVehicle(YellowVehicle yellow);
} 
```

使用访客：

```
public class Example {

  public void useYellowOnly() {
    exampleMethod(new Visitor() {
        visitRedVehicle(RedVehicle red) {};
        visitYellowVehicle(YellowVehicle yellow) {
             //...action
        });
  }
  public void exampleMethod(Visitor visitor){
      for(Vehicle v : vehicles) {
          v.accept(visitor);
      }  
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-03T17:33:01.020

接受的答案有效，让我到达了我想去的地方。我想我会添加这个只是为了让任何可能需要它的人更清楚。

在这种情况下，RevisedExposure 是 Exposure 的子类。我需要使用其中任何一个的列表调用 GetMetadata()，这会产生相同的结果集。

```
private async Task<List<Metadata>> GetMetadata<T>(List<T> exposures) where T : Exposure 
```

现在我可以从两个具有不同版本的列表的地方调用这个方法，就像这样。

```
var metadata = await GetExposureMetadata(revisions); 
```

或者

```
var metadata = await GetExposureMetadata(exposures); 
```

效果很好！

# php - Cron 作业未运行但 http://file.php 在浏览器中运行良好？

> ID：13056353
> 
> 赞同：1
> 
> 时间：2012-10-24T19:30:16.900
> 
> 标签：php, command-line, cron

我在 Stackoverflow 上读到文件内的路径可能是一个问题，但它似乎在它读取的第一件事上就失败了......除此之外我不知道，即使在这里检查了许多问题/答案。在某些时候，我认为这是因为我使用了 PHP 标记的简写版本（“ `<? ?>`”而不是“ `<?php ?>`”）。

所以基本上，当我在浏览器“http://site.com/file.php”中输入 url 时，它运行良好（这是一个 mysql 备份 + 通过电子邮件发送）。但是当我尝试用 cron 运行同一个文件时，我得到了错误......

我的服务器在 MediaTemple 上，cron 是：

`php -c /home/xxxxxxx/domains/xxxxxxxxxxxxxx.com/html/777/fnc/filenamexxxxxx.php --'bckup=1'`

这是错误：

> PHP：语法错误，第 2 行 /nfs/c08/h02/mnt/xxxxxxx/domains/xxxxxxxxxxxxxxx.com/html/777/fnc/filenamexxxxxx.php 中的意外 '('

这是代码的第一部分（原样，没有编辑，除了网站地址+电子邮件）：

```
<?php
// envoi un courriel de tous les rv des 7 prochains jours pour chaque clinique à toutes les 30min (cron script lancé par cpanel)

session_start();
$bypass = 1;
//$_SESSION['rep'] = "777/";

include_once("inc_includes_principaux.php");
//error_reporting(E_ERROR);

// to send an automated backup by email, just link to this file like this with CRON:
if ($_GET['bckup']){

// va chercher les infos de connection
include_once('inc_bd_connexion.php');

// get cliniques
    $cliniques = _get_clinique_info();//_p($cliniques);_x();
    $date = date('Ymd');
    $date7jours = _get_x_days_before($date, 7, '+');//_e($date7jours);_x();

// iterate cliniques and send email
foreach ($cliniques as $cliniqueid => $v) {

    $emailthis = _get_rv_printformat($date, $date7jours, $cliniqueid);// start, end, id

    // send email to users
    _email('emailaddressxxxxxxxx', $emailthis, 'LCJG - Horaire de '.$v['A29'].' du '._date_en_texte($date).' au '._date_en_texte($date7jours),'emailaddressxxxxxxxx');
    sleep(1);//give a break to the server and let some other tasks execute
    _email('emailaddressxxxxxxxx', $emailthis, 'LCJG - Horaire de '.$v['A29'].' du '._date_en_texte($date).' au '._date_en_texte($date7jours),'emailaddressxxxxxxxx');
    unset($emailthis);

    echo 'LCJG - Horaire de <b>'.$v['A29'].'</b> pour les 7 prochains jours envoyé par courriel.<br>';
}
}

?>` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T19:39:18.303

您无法在 cli 环境中启动会话

所以要同时运行它添加

```
if (!isset($argc)) {
    //Not  CLI
    session_start();
} 
```

或者

```
if (PHP_SAPI === 'cli')
{
   // is cli
} 
```

您的 $_GET 也不起作用，该值将在 $argv 数组中。您需要了解脚本如何在 CLI 中与通过 Web 服务器运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T03:04:33.443

为了避免更改我的代码并且因为我想要一个易于实现的解决方案，我遵循 Dagon 的建议来使用 wget，但改为使用 CURL。所以我可以保持我的代码完全原样，只需调用我的文件以便在特定时间执行它。

在不更改我的脚本的情况下工作的代码是：

```
curl www.aaaaaaa.com/file-to-execute.php?arg=1 
```

有了这个，cron 运行得很好，现在一切都很好。感谢你的帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T19:36:16.803

而不是`-c`您的意思是使用`-f`CLI 参数？

```
$ php --help
-c <path>|<file> Look for php.ini file in this directory
-f <file>        Parse and execute <file>. 
```

看起来 php 可能会尝试将您的脚本解析为 INI 文件，然后从 STDIN 中查找您的脚本。（否则，我不确定为什么 php 会忽略`-c`并继续执行您的 PHP 文件作为目标脚本。）

# c - 结构的零初始化是否保证擦除填充区域？

> ID：13056364
> 
> 赞同：11
> 
> 时间：2012-10-24T19:30:50.920
> 
> 标签：c, struct, initialization

假设我有以下结构：

```
typedef struct
{
    unsigned field1 :1;
    unsigned field2 :1;
    unsigned field3 :1;
} mytype; 
```

前 3 位将可用，但`sizeof(mytype)`会返回`4`，这意味着 29 位填充。我的问题是，标准是否保证这些填充位由语句初始化为零：

```
mytype testfields = {0}; 
```

或者：

```
mytype myfields = {1, 1, 1}; 
```

这样`memcmp()`在第 4..29 位为零的假设下执行以下操作是安全的，因此不会影响比较：

```
if ( memcmp(&myfields, &testfields, sizeof(myfields)) == 0 )
    printf("Fields have no bits set\n");
else
    printf("Fields have bits set\n"); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-24T19:45:27.240

是和不是。实际标准 C11 规定：

> 如果具有静态或线程存储持续时间的对象未显式初始化，则：
> 
> *   ……
>     
>     
> *   如果是聚合，则根据这些规则（递归）初始化每个成员，并将任何填充初始化为零位；

因此，这仅适用于静态存储对象，乍一看。但后来它又说：

> 如果大括号括起来的列表中的初始值设定项少于聚合的元素或成员，或者用于初始化已知大小数组的字符串文字中的字符少于数组中的元素，则聚合的其余部分应隐式初始化与具有静态存储持续时间的对象相同。

因此，这意味着未显式初始化的子结构内的填充是零位初始化的。

总之，结构中的某些填充保证是零位初始化的，有些则不是。我不认为这种混淆是故意的，我会为此提交一份缺陷报告。

旧版本根本没有。因此，对于大多数现有的编译器，您必须更加小心，因为它们还没有实现 C11。但是 AFAIR, clang 已经代表了这一点。

另请注意，这仅适用于初始化。填充不一定在分配时复制。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-24T19:33:30.987

C99 标准未指定将填充位设置为零。事实上，它特别提到任何填充位的值都是未指定的，因此不需要在赋值中复制填充。

脚注 51 至 6.2.6.1 (6) (n1570)：

> 因此，例如，结构分配不需要复制任何填充位。

新的 C2011 标准 - 感谢[Jens Gustedt](https://stackoverflow.com/users/366377/jens-gustedt)分享该知识 - 指定静态或线程存储持续时间的对象中的填充位在没有显式初始化的情况下初始化为 0。

仍然不能保证分配。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-24T19:40:27.470

> 我的问题是，标准是否保证这些填充位由语句初始化为零：

不。

填充的值未指定：

> （C99，6.2.6.1p6）“当一个值存储在结构或联合类型的对象中时，包括在成员对象中，对应于任何填充字节的对象表示的字节采用未指定的值”

**编辑：**参见 Jens Gustedt的[回答](https://stackoverflow.com/a/13056569/1119701)，C11 现在保证`0`在（罕见的）某些情况下将填充设置为

# c++ - 我可以在 mem-initializer 中初始化联合吗？

> ID：13056366
> 
> 赞同：10
> 
> 时间：2012-10-24T19:30:53.953
> 
> 标签：c++

我很惊讶这不起作用：

```
union DlDatum
{
   float  mFloat;
   s32    mInteger;
};

class DlDbE
{
public:
   DlDbE( float f ) : mData.mFloat( f ) {};
private:
   DlDatum mData;
}; 
```

有没有办法在 c++ 构造函数 mem-initializer 列表中初始化联合？

更新：答案是为联合创建构造函数。不知道可以这样做。这是我所做的：

```
union DlDatum
{
   float  mFloat;
   s32    mInteger;
   bool   mBoolean;
   u32    mSymbol;
   u32    mObjIdx; 

   DlDatum(         ) : mInteger( 0 ) {}
   DlDatum( float f ) : mFloat( f )   {}
   DlDatum( s32   i ) : mInteger( i ) {}
   DlDatum( bool  b ) : mBoolean( b ) {}
   DlDatum( u32   s ) : mSymbol( s )  {} // this ctor should work for objIdx also
};

class DlDbE
{
public:
   DlDbE() {}
   DlDbE( float f ) : mData( f ) {}
   DlDbE( u32 i   ) : mData( i ) {}
   DlDbE( bool b  ) : mData( b ) {}
   ...etc..
private:
   DlDatum mData;
}; 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-24T19:52:10.943

在 C++03 和之前，您仅限于为您的联合编写构造函数。

在 C++11 中，*统一初始化*将聚合初始化的语法扩展到构造函数初始化器列表。这意味着好的旧聚合初始化器语法像

```
DlDatum d = { 3.0 }; 
```

我们都知道并喜欢从 C 中初始化联合的第一个成员，现在也可以在构造函数初始化列表中使用

```
union DlDatum
{
   float  mFloat;
   s32    mInteger;
};

class DlDbE
{
public:
   DlDbE( float f ) : mData{f} {}
private:
   DlDatum mData;
}; 
```

此功能仅允许您“定位”联合的第一个非静态成员进行初始化。如果您需要更灵活的东西，那么就回到编写构造函数。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-10-24T19:32:57.137

像任何其他成员一样，如果你想构造一个联合，你必须给联合一个构造函数并调用它。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-11-07T19:35:42.600

@AndreyT 给出了一个很好的答案，我将通过一些实用的建议进行扩展。

我倾向于使用联合来轻松访问位图值，而无需繁琐且丑陋的按位与/按位或。我认为这是一种相当普遍的做法。

我已经使用了一段时间以使该过程变得更加容易的一种技术是，如果我使用小于 32 位的位图，我将其声明为*联合*内的未命名*结构*以及伴随的*DWORD*数据成员。例如：

 **```
union UNICODECONTROL{
    DWORD           dwAccessor;
    struct{
        unsigned unicode_01 : 1;
        unsigned unicode_02 : 1;
        unsigned unicode_03 : 1;
        unsigned unicode_04 : 1;
        unsigned unicode_05 : 1;
        unsigned unicode_06 : 1;
        unsigned unicode_07 : 1;
        unsigned unicode_08 : 1;
        unsigned unicode_09 : 1;
        unsigned unicode_10 : 1;
    };  
}; 
```

有了它，它将像“访问器”功能一样工作。如果你想设置值，你可以通过为这个“访问器”分配一个带有适当位图的数字来一次性完成。您想将它们全部归零 - 也是小菜一碟。它特别适用于 Windows 注册表。为了存储联合位图的值，您只需将*DWORD*写入注册表！稍后检索它以进行重新初始化同样简单。

*DWORD*是注册表的本机类型之一，您不需要搞乱静态转换或编写手动转换函数。如果您的位图比 32 位更长，您可以声明一个 64 位大小的整数，它通常会以相同的方式工作 - 并且与注册表一样好，因为*QUADWORD*也是本机类型。

这与@AndreyT 提到的内容直接相关——如果你想以我的联合位图/ *DWORD*格式方便地初始化类数据成员，你所要做的就是——如示例所示——确保“访问器”是在联合中声明的第一个值。然后，您可以直接使用新的 C++11 '{}' 方案对其进行内存列表。根本不需要奇怪的联合构造函数！

一个警告。单独的位图位位于访问器 DWORD 的“内部”的位置将取决于结构的对齐设置。这是在编译器级别设置的，或者使用`__declspec(align(#))`MSVC++ 中的语句和其他编译器中的类似语法设置。

最后，最近在几个不同的场景中尝试这些想法时学到了一个更新。尽管 C++11 明确表示如上所述通过其第一个变量初始化联合是合法的，但 MSVC++ 似乎忽略了这个标准 - 或者“*不实现*”它，因为编译器错误输出状态。因此，如果您使用 Microsoft 编译器，如果您想初始化它，您将不得不为您的 union 实现一个凌乱的构造函数。遗憾的是，对 C++11 标准的合规性可能会在 VS2013 的进一步服务包中以及整个 IDE 的下一个 2014 迭代中得到改进。**

# livecycle - 使用来自 livecycle 表单文本字段的数据填充提交的电子邮件主题行

> ID：13056369
> 
> 赞同：1
> 
> 时间：2012-10-24T19:31:01.997
> 
> 标签：livecycle

我在 Livecycle 中创建了一个 pdf 表单，它设置了一个提交按钮，并将通过电子邮件提交表单的 pdf。

现在我想让电子邮件的主题行来自表单中填写的字段。例如：客户端名称字段将使用在客户端名称字段中键入的任何内容填充电子邮件主题行。

我还想知道如何减少当前 2mbs 的文件大小。

任何人都可以帮忙吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T15:32:27.620

使用即用型[电子邮件提交按钮](http://help.adobe.com/en_US/livecycle/9.0/designerHelp/000471.html#1584994)，您无法动态设置主题。

但是，您可以创建自己的按钮以通过电子邮件提交表单并使用脚本动态设置主题并发送电子邮件：

*   将常规按钮拖到表单中，
*   打开`click`事件的脚本编辑器（[更多信息](http://help.adobe.com/en_US/livecycle/9.0/designerHelp/000738.html#1582009)），
*   将语言设置为`JavaScript`和
*   使用如下脚本：

```
// Replace with actual path to the field which contains the subject:
var subject = path.to.field.rawValue;

var myDoc = event.target;
try {
    myDoc.mailDoc({
        bUI: false,
        cTo: 'receiver@domain.com', // Replace with actual receiver mail address.
        cSubject: subject,
        cSubmitAs: "PDF"
    });
} catch (e) {
    // exception handling...
} 
```

您可以在此处找到更深入的信息：http: [//acrobatusers.com/tutorials/dynamically-setting-submit-e-mail-address](http://acrobatusers.com/tutorials/dynamically-setting-submit-e-mail-address)。在本教程中，不是主题而是收件人邮件地址是动态设置的，但是您可以将相同的原则应用于`doc.mailDoc(...)`函数的任何参数。

关于您关于如何减小文件大小的问题：您的表单非常大，或者您的表单中嵌入了大文件大小的图像。在后一种情况下，寻找减小图像文件大小的方法。例如，检查您是否使用`.jpg`或`.gif`或`.png`文件而*不是* `.bmp`文件（未压缩，因此非常大）或使用分辨率较低的图像（屏幕显示可以使用 72 dpi）。

# c# - WPF ComboBox 忽略对 ItemsSource 对象的 ToString 覆盖

> ID：13056372
> 
> 赞同：1
> 
> 时间：2012-10-24T19:31:11.843
> 
> 标签：c#, wpf, combobox, overriding, tostring

我已将 WatchList 定义如下：

```
// a named list of VariableWatchers
public class WatchList : List<VariableWatcher>
{
    private string _name;

    public WatchList(string name) : base()
    {
        _name = name;
    }

    public override string ToString()
    {
        return _name;
    }
} 
```

我将 WatchLists 列表绑定到 ComboBox 的 ItemsSource 属性，如下所示：

```
<ComboBox x:Name="WatchListDropdown"
          ItemsSource="{Binding Path=WatchLists}"
          VerticalAlignment="Center"
          Margin="5"/> 
```

“WatchLists”指的是我的 DataContext 中的以下属性：

```
public IList<WatchList> WatchLists
{
    get { return _watchLists; }
} 
```

一切都很好，除了列表中的所有条目都显示为“（集合）”而不是 _name 变量。我在 ToString 中放置了一个断点，并确认它在某个时候被调用，并返回正确的值，但不知何故 ComboBox 仍然显示“（Collection）”。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T19:41:13.367

不知道为什么它不使用 ToString() 覆盖，但您是否考虑过使用 DisplayMemberPath 代替？

```
<ComboBox x:Name="WatchListDropdown"
      ItemsSource="{Binding Path=WatchLists}"
      VerticalAlignment="Center"
      DisplayMemberPath="Name"
      Margin="5"/> 
```

当然，您需要调整对象，因为绑定需要公共属性或依赖属性。

```
private string _name;
public string Name { get { return _name; } set { _name = value; } } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T19:37:10.123

WatchLists 不是 WatchList 的集合吗？因此 Collection.ToString() 将被调用并显示。

如何将 DisplayMemberPath 指定为“名称”？我希望它有效:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T19:39:58.270

如果 ItemsSource 绑定到单个`WatchList`类型`List<VariableWatcher>`，则实际显示的集合将是 的列表`VariableWatcher`。

如果 ItemsSource 绑定到`WatchList`.ToString() 的集合，则应覆盖默认显示。当然，您始终可以创建一个属性`Name`并将其设为 DisplayMember。

# objective-c - 如何在 iOS 中立即停止 APNS 远程通知音播放？

> ID：13056373
> 
> 赞同：4
> 
> 时间：2012-10-24T19:31:12.313
> 
> 标签：objective-c, apple-push-notifications

我们有一个接收远程 APNS 推送通知的 iOS 应用程序（软件电话）。我们的服务器知道当该用户有来电时发送 APNS 推送，而我们的软电话应用程序不是设备上的活动应用程序。APNS 到达，向用户显示来电，横幅或警报弹出显示，铃声开始播放。如果用户点击通知，通知消失，铃声停止，我们的应用程序启动并接听电话。到目前为止，一切都很好。但是，如果来电通知显示为横幅，用户可以通过点击应用程序图标直接启动我们的应用程序。在这种情况下，我们希望我们的应用程序立即隐藏/关闭来电通知。我们尝试发送这些命令（根据 [iOS 应用程序：如何清除通知？](https://stackoverflow.com/questions/8682051/ios-application-how-to-clear-notifications)）：

```
[[UIApplication sharedApplication] setApplicationIconBadgeNumber: 0];
[[UIApplication sharedApplication] cancelAllLocalNotifications]; 
```

问题是通知横幅消失了，但通知声音（25 秒 wav 铃声）继续播放到最后。有没有办法从我们的代码中立即停止这种通知音？

# c# - 手机浏览器和电脑浏览器的区别

> ID：13056377
> 
> 赞同：0
> 
> 时间：2012-10-24T19:31:24.733
> 
> 标签：c#, asp.net, .net, css, mobile

嗨，我有一个在 ASP.net 中构建的普通网站用于注册。一切正常。但我目前的问题是，即使通过手机浏览器浏览，我的网站看起来也类似于网络浏览器。我找到了以下代码来区分手机浏览器请求和普通网络浏览器请求。（C＃）

```
<%@ Page Language="C#" %> 
<%@ Import Namespace="System.Text.RegularExpressions" %>
<%
    string u = Request.ServerVariables["HTTP_USER_AGENT"];
    Regex b = new Regex(@"(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino", RegexOptions.IgnoreCase | RegexOptions.Multiline);
    Regex v = new Regex(@"1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-", RegexOptions.IgnoreCase | RegexOptions.Multiline);
    if ((b.IsMatch(u) || v.IsMatch(u.Substring(0, 4)))) {
        Response.Redirect("http://detectmobilebrowser.com/mobile");
    }
%> 
```

我的问题-

1.  我可以使用此代码在移动浏览器和 PC 浏览器之间进行最佳区分吗？
2.  我知道为了让我的网站以移动友好版本显示，我必须编写一个单独的 CSS 文件，任何人都可以建议我有关如何实现此移动 CSS 版本的资源/快速指南。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T19:35:50.577

在代码隐藏文件中，您可以使用`Request.Browser.IsMobileDevice`.

我认为它也可以在嵌入式代码中使用，我从未接触过。

# asp.net - ASP.Net QueryString 出现“输入字符串格式不正确”错误

> ID：13056378
> 
> 赞同：0
> 
> 时间：2012-10-24T19:31:33.373
> 
> 标签：asp.net, formview, request.querystring

伙计们，我现在在使用 ASP.Net QueryStrings 时遇到了一个恼人的错误。

我使用查询字符串在我的 ASP Web 应用程序中将值从一个页面传递到另一个页面。
这样，我就可以根据我的查询字符串值更改目标页面的表单查看模式。

重定向代码如下：

`Response.Redirect("~/Exams/Questions/ExamQuestionEntry.aspx?mode=1&examCode=" & examCode)`

当我加载 `ExamQuestionEntry`页面时，我会根据`mode`值更改 FormView。例如，0 是默认的只读模式，1 是插入模式，2 是编辑模式。
但是，奇怪的是……
当我将模式值设置为 1 时，将 FormView 设置为插入模式，一切都很好并且运行良好。但是，当我将模式设置为 0 或 2 时，我得到了错误...
`"Input string was not in a correct format."`

我已经尝试了我能想象到的所有替代方案和解决方案，最后我无法诚实地弄清楚为什么会发生这种情况。

# matlab - Matlab 和色点特定区域

> ID：13056379
> 
> 赞同：1
> 
> 时间：2012-10-24T19:31:39.930
> 
> 标签：matlab

我有一个带有固定点和随机生成的用户位置的网格。

每个点和用户的距离从轴 0.0 的起点开始测量。我想将每个用户与最近的固定点相关联。我计算了两个距离向量，每个用户的最小值都指向最近的固定点。

但我坚持寻找一种工作方式，以便每个固定点和相关用户在情节上都有相同的东西，pe相同的颜色和颜色区域。

所以我的问题是二维的：

1.  首先是设法将每个用户与其最近的固定点相关联
2.  如何为结果着色。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T21:27:33.117

For the point searching I would use [`dsearchn`](http://www.mathworks.co.uk/help/matlab/ref/dsearchn.html) for this kind of thing. You can use it with or without delaunay triangulation depending on the ratio of users to fixed sites. I tend to use it the quick and easy way, which in your case would be:

```
indices_of_closest_fixed_points = dsearchn(fixed_points, user_points) 
```

As for the colors I would suggest you define a color map using something like

```
mymap = lines(n) 
```

where `n` is the number of fixed points you have. You can then use `scatter` to plot the points with specific colors and sizes. Perhaps something like this to get you started:

```
x = user_points(1,:); 
y = user_points(2,:);
S = []; % point sizes, left empty for now
C = mymap(indices_of_closest_fixed_points,:); %colors

scatter(x,y,S,C); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T21:09:29.973

`user`要找到最近的点，只需计算每个点与完整点集之间的欧几里得距离`fixed`。那么最短距离的索引也将是该`fixed`点的索引。

```
dist = calc_dist(fixedPts, aSingleUserPt)
[~, idx] = min(dist); 
```

要解决颜色问题，您需要创建一个从`fixed`点索引到唯一颜色的颜色图。然后，当您`plot`指向用户时，您会将绘图的颜色设置为等于在`idx`

*注意*欧几里得距离很容易计算：

```
euc_dist = sqrt( (x1 - x2)^2 + (y1 - y2)^2 ); 
```

File Exchange 上有一些[功能](http://www.mathworks.com/matlabcentral/fileexchange/71-distance-m)可以让您快速计算。

# regex - 需要捕获单个字符，但忽略数字

> ID：13056380
> 
> 赞同：3
> 
> 时间：2012-10-24T19:31:40.310
> 
> 标签：regex

我正在解析航班信息。

这是示例数据：

```
E0.777 7     3:09
E0.319 N     1:43
E0.735 8     1:45
E0.735 N     1:48
E0.M80 9 3:21
E0.733       1:48 
```

我需要填充这样的字段：

```
Equipment: 735
On Time: N
Duration: 1:48 
```

我遇到的问题是捕获 Y 或 N 字符但忽略单个数字，然后捕获持续时间。

这是我尝试过的表达方式：

```
@"^.{3}(.{3})\s?([N|Y]?)?(?:[0-9]\s+)?(\w{4})" 
```

编辑：我更新了示例数据以澄清我的问题。设备并不总是三位数字，它可以是一个字符和两位数字。设备和持续时间之间的数据可以是布尔 N 或 Y、单个数字或空格。只应捕获布尔值。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T19:37:55.250

首先，您混淆了交替的概念，并且字符类`[Y|N]`将匹配 3 个不同的字符：`Y`or`|`或`N`。使用`(...)`或不使用管道。

其次，你`?`在角色课之后的替身并没有真正做任何事情。第三，最后你只匹配连续的空格，如果找到一个数字。但是如果没有数字，最后一个`?`将忽略子模式，因此也不允许空格。

最后，`\w`不匹配`:`。

尝试这个：

```
@"^.{3}(\d{3})\s?(?:([NY])|\d)\s+(\d:\d\d)" 
```

您还应该考虑`.`将开头的重复限制为更精确的字符类（即`\w{2}\.`，但我不知道那里的可能性）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T19:37:53.840

```
@"^..\.(\d{3})\s(?:([YN])|\d)\s*(\S{4})" 
```

*   更改`.{3}`为`..\.`更具体的关于`.`字符 3 的文字。
*   `(?:([YN])|\d)`匹配 Y/N 或数字，但仅捕获 Y 或 N。请注意，它`[YN]`不是`[Y|N]`.
*   更改`\w{4}`为`\S{4}`since`\w`不匹配冒号`:`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T19:39:18.693

这将捕获所有带有 Y 或 N 的行并忽略其他所有内容：

```
^...(\d{3})\s*([YN])\s*(\d+:\d+) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T19:42:54.790

这会做到...

```
^\w\d\.(\d{3})\s(?:([YN])|\d)\s*(\d:\d{2})$ 
```

我对您的正则表达式进行了一些其他更改，因为我更容易根据您的数据重写它，然后尝试修改您拥有的内容。

这将捕获 Y 或 N，否则不会捕获该组中的任何内容。我还尝试更具体地说明您的持续时间正则表达式。

更新：这适用于您的新要求...

```
^\w\d\.(\w{3})\s(?:([YN])|\d|\s)\s*(\d:\d{2})$ 
```

您可以在这里看到它对您的数据的处理... [http://regexr.com?32j1b](http://regexr.com?32j1b)

（将鼠标悬停在每一行上以查看匹配的组）

# licensing - GPL 和商业许可证可以在同一个软件中共存吗？

> ID：13056390
> 
> 赞同：0
> 
> 时间：2012-10-24T19:32:23.920
> 
> 标签：licensing, distribution, gpl

我一直在研究销售最初在 GPL 下分发的软件的整个问题，我想到了一个问题。如果我创建一个使用 GPL 库*ABC*的软件 X，我可以在商业许可下分发**我自己的代码，同时为***ABC*的代码维护 GPL吗？

我认为应该没问题，我不相信 GPL 许可可以在**使用**GPL 代码的软件上强制执行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T21:00:40.340

让我们澄清销售软件的第一点：GPL 许可不会阻止您销售使用它的软件，但它确实阻止您将其作为闭源软件销售。如果您是 GPL 的原始版权所有者，您可以选择在多个许可证下分发代码，并以商业许可证的形式出售。如果您不拥有代码中的所有 IP，那么您必须遵守分发您不拥有的代码的许可证。如果它是 GPL，您别无选择，只能将该许可转移到您将分发的代码中，因为它将被视为衍生作品。使用 GPL，你可以根据需要出售它，但你必须在交易中放弃来源。

请注意，对于某些语言，软件实际上以源代码形式（脚本语言）分发，因此如果使用 GPL，则“自动”强制执行。

至于第二点：如果你的软件和 GPL 软件都可以编译为独立程序，然后在运行时通过一些中间层相互交互（想想 2 个进程与 TCP 通信或通过文件交换数据），那么我猜它没关系，但其他人可能对此有更明智的意见。LGPL 是针对这种情况的特定情况设计的，即库（DLL 或静态库），这就是我有点不确定的原因。

如果您的软件包含 ABC 或相反，那么整个作品是衍生作品，并且必须是 GPL 的。

# r - 如果未分配则打印

> ID：13056392
> 
> 赞同：16
> 
> 时间：2012-10-24T19:32:30.750
> 
> 标签：r

如何在函数中写入一种方法来检测输出是否被分配（`<-`）给某物？原因是我想打印一条消息，如果它没有被分配，只是去控制台，但如果它被分配，我不希望它打印消息。

这是一个虚拟示例以及我希望它的行为方式：

```
fun <- function(x) {
    if (being_assigned) {
        print("message")
    }
    return(x)
}

#no assignment so message prints 
> fun(6)  
[1] "message"
[1] 6

#assignment so message does not prints
> x <- fun(6) 
```

函数中的`being_assigned`是我想检测但不知道如何检测的虚构未知条件。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-24T19:51:55.553

我认为你能做的最好的就是为函数返回的对象定义一个特殊的打印方法：

```
## Have your function prepend "myClass" to the class of the objects it returns
fun <- function(x) {
    class(x) <- c("myClass", class(x))
    x
}

## Define a print method for "myClass". It will be dispatched to 
## by the last step of the command line parse-eval-print cycle.
print.myClass <- function(obj) {
    cat("message\n")
    NextMethod(obj)
}

> fun(1:10)
message
 [1]  1  2  3  4  5  6  7  8  9 10
attr(,"class")
[1] "myClass"
>
> out <- fun(1:10)
> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-03T14:56:27.280

我喜欢 Josh 的想法，但对于未来的海报，我想展示我所做的，这是他方法的略微修改版本。他的方法打印出我唯一不喜欢的课程信息。他用`NextMethod`来避免无限递归打印。这导致

```
attr(,"class")
[1] "myClass" 
```

要打印。所以为了避免这种情况，我首先打印消息，然后通过类对象的长度打印 1（使用索引）。

```
fun <- function(x) {
    class(x) <- 'beep'
    comment(x) <- "hello world"
    return(x)
}

print.beep<- function(beep) {
    cat(paste0(comment(beep), "\n"))
    print(beep[1:length(beep)])
}

> fun(1:10)
hello world
 [1]  1  2  3  4  5  6  7  8  9 10 
```

再次感谢乔希的想法。

如果读者不想`[1]`打印小索引，他们可以`cat`在打印语句中输出如下：

```
print.beep<- function(beep) {
    cat(paste0(comment(beep), "\n"))
    cat(beep[1:length(beep)], "\n")
} 
```

# java - Jackson Generic Type References + enableDefaultTyping 问题

> ID：13056394
> 
> 赞同：0
> 
> 时间：2012-10-24T19:32:32.590
> 
> 标签：java, json, generics, jackson

我在使用 enableDefaultTyping 和提供泛型 TypeReference 时遇到了反序列化问题。杰克逊似乎无法决定哪种类型的信息更重要。这个测试用例证明了这个问题：

```
@Test
public void roundTripTest() throws JsonGenerationException,
        JsonMappingException, IOException {

    // 0 Value Test
    Integer[] integers = new Integer[] {};
    Wrap<Integer[]> beforeResult = new Wrap<Integer[]>(integers);

    File file = new File("/tmp/jsonTest");
    mapper.writeValue(file, beforeResult);

    TypeReference<Wrap<Integer[]>> typeRef = new TypeReference<JacksonMapperTest.Wrap<Integer[]>>() {
    };

    Wrap<Integer[]> afterResult = mapper.readValue(file, typeRef);

    assertNotNull(afterResult);

}

public static class Wrap<T> {

    private T wrapped;

    public Wrap() {
    }

    public Wrap(T wrapped) {
        this.wrapped = wrapped;
    }

    public T getWrapped() {
        return wrapped;
    }

    public void setWrapped(T wrapped) {
        this.wrapped = wrapped;
    }
} 
```

其中映射器是：

```
mapper = new ObjectMapper();
mapper.enableDefaultTyping(); 
```

例外是：

```
org.codehaus.jackson.map.JsonMappingException: No suitable constructor found for type [simple type, class JacksonMapperTest$Wrap<[Ljava.lang.Integer;>]: can not instantiate from JSON object (need to add/enable type information?) 
```

很奇怪，嗯？通过使用 beforeResult.getClass 而不是 TypeReference 可以省略该问题，但这仍然不是首选行为。

为了解决这个问题，我是否错过了任何一种选择？

我使用的是杰克逊 1.9.3

[编辑] 使用地图而不是数组作为包装对象按预期工作！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T22:19:39.350

这似乎是杰克逊的一个错误......但是它的作者可能更有能力判断它是否是一个错误......如果你可以自由地改变杰克逊，看看 genson [http://code.google .com/p/genson/](http://code.google.com/p/genson/)。

Gensons 等效于 enableDefaultTyping 是 setUseRuntimeTypeForSerialization（不完全相同，但在大多数情况下非常相似）。它在序列化期间使用运行时类型。这是一个例子：

```
Genson genson = new Genson.Builder().setUseRuntimeTypeForSerialization(true).create();
String json = genson.serialize(beforeResult);
System.out.println(json);
GenericType<Wrap<Integer[]>> type = new GenericType<Wrap<Integer[]>>() {};
Wrap<Integer[]> afterResult = genson.deserialize(json, type); 
```

**编辑** 如果您需要能够使用 genson 反序列化为多态或未知类型，请使用 Genson.Builder 的 setWithClassMetadata(true)。这个特性实际上只用于 json 对象（不管它是否是抽象类）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T15:59:34.983

我不是 100% 确定确切的根本原因，但我怀疑这与 Java 类型擦除有关，以及传递泛型感知信息并将其与默认类型信息混合的问题。类型信息实际上只基于非泛型类型；但是，它确实适用于特定种类的泛型类型（地图、集合）。

但在这种情况下，您有自定义泛型类型；我认为这就是杰克逊无法为动态类型指明属性的通用类型的原因。

通常的解决方法是尽可能尝试子分类；但幸运的是，您能够找到更好的解决方法。

# zend-framework2 - Zend Framework 2 (ZF2) 动态语言环境

> ID：13056395
> 
> 赞同：2
> 
> 时间：2012-10-24T19:32:38.110
> 
> 标签：zend-framework2, zend-locale

我正在寻找一种将翻译添加到我的 ZF2 应用程序的方法，在我的 URL 中使用全局变量。无论如何，是否可以一次为整个应用程序执行此操作？

典型的 URL 如下所示：[http ://domain.com/en_GB/user/index](http://domain.com/en_GB/user/index)

第一部分 (en_GB) 应该用于显示正确的翻译。

除此之外，如果可以将此路由器部分设置为可选，那就太好了。因此，如果我应该访问[http://domain.com/user/index](http://domain.com/user/index)（没有语言环境部分）到我的应用程序，它应该自动采用浏览器语言环境。

我希望我足够清楚，如果这个问题需要任何补充，请随时提出。

提前感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T19:17:51.563

@DrBeza，

谢谢您的回答。我不知道这是否是正确的方法，但我创建了下一个解决方案：

在 /config/global.php 我添加了这部分

```
'translator' => array(
        'locale' => 'nl_NL',        
        'translation_file_patterns' => array(
            array(
                'type'     => 'phpArray',
                'base_dir' => __DIR__ . '/../../language',
                'pattern'  => '%s.php',
            ),
        ),
    ), 
```

在 /module/[modulename]/config/module.config.php 我添加了这部分来设置包含语言环境的 URL 的第一部分

```
'router' => array(
        'routes' => array(
            'user' => array(
                'options' => array(
                    'route'    => '[/:lang]/user[/:action][/:id]',
                    'constraints' => array(
                        'lang'  => '([a-z]{2})+(_)+([A-Z]{2})',
                    ),
                ),
            ),
        ),
    ), 
```

在 /config/local.php 中，我添加了以下代码以从 URL 中获取语言环境：

*http://domain.com/[语言环境][模块][控制器]*

```
$_SERVER['REQUEST_URI_PATH'] = parse_url($_SERVER['REQUEST_URI'], PHP_URL_PATH);
$segment = explode('/', $_SERVER['REQUEST_URI_PATH']); 
```

我添加了这部分来动态加载语言环境：

```
return array(
   'translator' => array(
   'locale' => $segment[1],
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T22:25:30.300

如果缺少，我建议扩展 Segment 路由类并添加可选的语言环境约束和段部分。在应用程序范围内调用可选变量，例如“locale”。

然后在主模块引导程序中创建一个“路由”事件，一旦匹配到路由，该事件就会触发。触发的回调函数将可以通过传递的事件访问 RouteMatch 对象，让您可以访问“区域设置”值。然后您可以进行一些检查并设置应用程序区域设置。

# objective-c - 默认细胞附件

> ID：13056397
> 
> 赞同：1
> 
> 时间：2012-10-24T19:32:49.570
> 
> 标签：objective-c, tableview, checkmark

如何在应用程序启动时设置第一行表格视图的复选标记？我的意思是当我现在启动应用程序时，tableview 中的行数很少，当我点击其中一些时，它的附件更改为复选标记。当单击另一个时，另一个带有复选标记并且以前的复选标记消失。因此，现在我希望在启动应用程序时选中 tableview 的第一行，然后当我单击另一行时，它会“取消选中标记”和“选中标记”新行等...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T19:36:43.130

您可以将整数设置为类似于“checkedCell”的变量，将该值默认设置为单元格 0，并在`cellForRowAtIndexPath`检查中查看单元格是否已被检查，如果未更改附件以使其检查并更新您的变量。

```
-(void)viewWillAppear{
     currentCheckedCell = 0;
}

- (UITableViewCell *)tableView:(UITableView *)aTableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    //
    // Create cells -- if indexpath.row is equal to current checked cell reload the table with the correct acessories.
    //
    static NSString *cellIdentifier = @"RootMenuItemCell";
    MyCell *cell = (MyCell *)[tableView dequeueReusableCellWithIdentifier:cellIdentifier];

    if (cell == nil) {

        cell = [[MyCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:cellIdentifier];
        NSArray *nibContents = [[NSBundle mainBundle] loadNibNamed:@"MyCell" owner:self options:nil];
        for (UIView *view in nibContents) {
            if ([view isMemberOfClass:[MyCell class]]) {
                cell = (MyCell *)view;
                break;
            }
        }

        //OTHER CELL CREATION STUFF HERE

        // cell accessory
        UIImage *accessory = [UIImage imageNamed:@"menu-cell-accessory-default.png"];
        UIImage *highlighted = [UIImage imageNamed:@"menu-cell-accessory-selected.png"];
        if(indexPath.row == currentCheckedCell){
            //DEFAULT ACCESSORY CHECK 
            // cell.accessoryType = UITableViewCellAccessoryCheckmark;

            UIImageView *accessoryView = [[UIImageView alloc] initWithImage:accessory highlightedImage:highlighted];
        }else{
             //DEFAULT ACCESSORY NONE 
            // cell.accessoryType = UITableViewCellAccessoryNone;
              UIImageView *accessoryView = [[UIImageView alloc] initWithImage:accessory highlightedImage:accessory];
         }
        [cell setAccessoryView:accessoryView];

    } 
return cell;
}

- (void)tableView:(UITableView *)aTableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
      //UPDATE SELECTED CELL & RELOAD TABLE
      currentCheckedCell = indexPath.row;
      [self.tableview reloadData];
} 
```

另外值得注意的是，我的示例使用自定义图像作为配件。如果您查看@ACB 提供的链接，您会发现一个非常相似的概念。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T19:36:55.800

尝试这些帖子中建议的选项[如何使用objective c在iphone中的表格视图上应用复选标记？](https://stackoverflow.com/questions/1231427/how-to-apply-check-mark-on-table-view-in-iphone-using-objective-c) 或[iPhone :UITableView CellAccessory 复选标记](https://stackoverflow.com/questions/5959950/iphone-uitableview-cellaccessory-checkmark)

基本上，您需要使用字典来跟踪复选标记。并且 In `viewDidLoad`or`init`方法使第一个单元格在字典中被选中。绘制单元格时，请始终检查字典中的相应条目是否已选中，并相应显示复选标记。当用户点击一个单元格时，将字典中的值修改为选中/未选中。

**更新：** 这是一个示例代码。

在 .h 文件中将属性声明为

```
@property(nonatomic) NSInteger selectedRow; 
```

然后使用下面的代码，

```
- (void)viewDidLoad {
  //some code...

  self.selectedRow = 0; //if nothing should be selected for the first time, then make it as -1
  //create table and other things
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    // create cell and other things here

    if (indexPath.row == self.selectedRow)
    {
        cell.accessoryType = UITableViewCellAccessoryCheckmark;
    } else {
        cell.accessoryType = UITableViewCellAccessoryNone;
    }

    return cell;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    // some other code..

    if (indexPath.row != self.selectedRow) {
       self.selectedRow = indexPath.row;
    }

    [tableView reloadData];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T22:35:52.613

您可以使用，

```
if (firstCellSelected)
    {
        cell.accessoryType = UITableViewCellAccessoryCheckmark;
    } 
```

在方法中设置`firstCellSelected`标志。`viewDidLoad`

# haskell - 如何使用 cabal install 安装黑线鳕

> ID：13056398
> 
> 赞同：10
> 
> 时间：2012-10-24T19:32:55.760
> 
> 标签：haskell, documentation, cabal, haddock

我尝试`haddock`通过运行以下命令进行安装，`cabal install haddock`但遇到了以下问题。

```
leonzo@lion:~/opt$ cabal install haddock
Resolving dependencies...
Configuring haddock-2.11.0...
Building haddock-2.11.0...
Preprocessing library haddock-2.11.0...
unused terminals: 1
[ 1 of 31] Compiling Haddock.Backends.HaddockDB ( src/Haddock/Backends/HaddockDB.hs, dist/build/Haddock/Backends/HaddockDB.o )
[ 2 of 31] Compiling Haddock.Backends.Xhtml.Types ( src/Haddock/Backends/Xhtml/Types.hs, dist/build/Haddock/Backends/Xhtml/Types.o )
[ 3 of 31] Compiling Haddock.Convert  ( src/Haddock/Convert.hs, dist/build/Haddock/Convert.o )
[ 4 of 31] Compiling Paths_haddock    ( dist/build/autogen/Paths_haddock.hs,     dist/build/Paths_haddock.o )
[ 5 of 31] Compiling Haddock.GhcUtils ( src/Haddock/GhcUtils.hs, dist/build/Haddock/GhcUtils.o )
[ 6 of 31] Compiling Haddock.Version  ( src/Haddock/Version.hs, dist/build/Haddock/Version.o )
[ 7 of 31] Compiling Haddock.Lex      ( dist/build/Haddock/Lex.hs, dist/build/Haddock/Lex.o )
[ 8 of 31] Compiling Haddock.Types    ( src/Haddock/Types.hs, dist/build/Haddock/Types.o )
[ 9 of 31] Compiling Haddock.Utils    ( src/Haddock/Utils.hs, dist/build/Haddock/Utils.o )
[10 of 31] Compiling Haddock.Options  ( src/Haddock/Options.hs, dist/build/Haddock/Options.o )
[11 of 31] Compiling Haddock.Backends.Xhtml.Themes ( src/Haddock/Backends/Xhtml/Themes.hs, dist/build/Haddock/Backends/Xhtml/Themes.o )
[12 of 31] Compiling Haddock.Backends.Xhtml.Utils ( src/Haddock/Backends/Xhtml/Utils.hs, dist/build/Haddock/Backends/Xhtml/Utils.o )
[13 of 31] Compiling Haddock.Backends.LaTeX ( src/Haddock/Backends/LaTeX.hs, dist/build/Haddock/Backends/LaTeX.o )
[14 of 31] Compiling Haddock.Backends.Hoogle ( src/Haddock/Backends/Hoogle.hs, dist/build/Haddock/Backends/Hoogle.o )
[15 of 31] Compiling Haddock.Interface.AttachInstances ( src/Haddock/Interface/AttachInstances.hs, dist/build/Haddock/Interface/AttachInstances.o )
[16 of 31] Compiling Haddock.Interface.Rename ( src/Haddock/Interface/Rename.hs, dist/build/Haddock/Interface/Rename.o )
[17 of 31] Compiling Haddock.Doc      ( src/Haddock/Doc.hs, dist/build/Haddock/Doc.o )
[18 of 31] Compiling Haddock.Parse    ( dist/build/Haddock/Parse.hs, dist/build/Haddock/Parse.o )
[19 of 31] Compiling Haddock.Interface.ParseModuleHeader ( src/Haddock/Interface/ParseModuleHeader.hs, dist/build/Haddock/Interface/ParseModuleHeader.o )
[20 of 31] Compiling Haddock.Interface.LexParseRn ( src/Haddock/Interface/LexParseRn.hs, dist/build/Haddock/Interface/LexParseRn.o )

src/Haddock/Interface/LexParseRn.hs:67:52:
Not in scope: type constructor or class `SafeHaskellMode'
cabal: Error: some packages failed to install:
haddock-2.11.0 failed during the building phase. The exception was:
ExitFailure 1
leonzo@lion:~/opt$ 
```

有没有人知道如何处理这个烂摊子？

**编辑** 我的 ghc 版本是 7.4.1

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-24T20:27:25.957

如今，黑线鳕版本与 GHC 版本紧密绑定。对于 ghc-7.4.1，对应的 haddock 版本是 2.10.0。

错误消息中提到的`SafeHaskellMode`类型是在 ghc-7.4.2 中添加的，因此您无法使用 ghc-7.4.1 编译 haddock-2.11。

您的 GHC 可能应该有一个可以工作的 haddock-2.10。如果没有，您可以安装 haddock-2.10.0，或者升级您的 GHC（推荐，自 7.4.1 以来修复了一些错误）。

# jquery - 使用 JQUery 删除具有相同类的嵌套元素，保留最里面的元素

> ID：13056411
> 
> 赞同：1
> 
> 时间：2012-10-24T19:33:35.147
> 
> 标签：jquery

我有以下 html -

```
<ul>
   <li class=".item">
      <a href="test">
         <li class=".item">
            <a href="test">
               <li class=".item">
                  <a href="http://test">
                        Real content 1
                  </a>
                </li>
            </a>
         </li>
      </a>
   </li>
   <li class=".item">
      <a href="test">
         <li class=".item">
            <a href="test">
               <li class=".item">
                  <a href="http://test">
                       Real Content 2
                  </a>
                </li>
            </a>
         </li>
      </a>
   </li>
</ul> 
```

这是应用程序呈现的输出。li 嵌套在同一个类中。我只需要拥有最里面的一个并移除虚拟父母并得到这个 -

```
<ul>
   <li class=".item">
      <a href="test">
         Real Content 1
      </a>
   </li>
   <li class=".item">
      <a href="test">
         Real Content 2
      </a>
   </li>
</ul> 
```

知道如何使用 JQuery 实现这一目标吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T19:36:32.467

[jsfiddle](http://jsfiddle.net/rKxu5/7/)

```
$("ul >li").filter(function(){
      return $(this).text().trim() == ''
}).remove();

 $('ul li  a').filter(function(){
         return $(this).text().trim() == ''
}).remove(); 
```

​</p>

# java - 在 Java 中混合嵌套类型参数和通配符

> ID：13056421
> 
> 赞同：14
> 
> 时间：2012-10-24T19:34:26.057
> 
> 标签：java, generics

为什么尝试编译

```
public class GenericsFail {
    public static void main(String[] args) {
        accept(new HashMap<String, List<String>>());
    }

    public static void accept(Map<String, List<?>> multiMap) {}
} 
```

给出错误

```
GenericsFail.java:7: error: method accept in class GenericsFail cannot be applied to given types;
                accept(new HashMap<String, List<String>>());
                ^
  required: Map<String,List<?>>
  found: HashMap<String,List<String>>
  reason: actual argument HashMap<String,List<String>> cannot be converted to Map<String,List<?>> by method invocation conversion 
```

通配符仅在未嵌套在 . 中时才允许使用`List`。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-24T19:48:42.900

原因是`?`in`List<?>`可以是“任何东西”，但每个条目中的“任何东西”都*不同。*`Map`也就是说，它会`List<String>`在一个条目中接受 a，在另一个条目中接受 a `List<Integer>`。

但是您传入的 a在每个条目中都`Map`具有*相同*的类型`List`，因此该类型不会以相同的方式或相同的自由度绑定。

“修复”是将类型锁定为特定类型，但仍然是“任何东西” -通过键入方法，每个条目中的“任何东西*”都是*相同的：*

```
public static <T> void accept(Map<String, List<T>> multiMap) // complies 
```

或者如果您的方法确实不需要知道*哪种*类型，请使用通配符来包装类型：

```
public static void accept(Map<String, ? extends List<?>> multiMap) // compiles 
```

最后一个版本之所以有效，是因为列表的类型虽然是通配符，但在调用时固定为未知但*一致*的类型。

我发现类型化版本更易于阅读（和代码），并且如果您稍后决定您的方法需要知道类型，则可以使用该类型。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-24T20:32:09.963

更一般

```
void accept(Map<String, ? extends List<?>> multiMap) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-24T20:09:45.237

下面是一个简短的例子，说明编译器为什么不能接受这个参数：

```
 public static void main(String[] args) {
        //if this would be accepted here ...
        accept(new HashMap<String, List<String>>());
    }

    public static void accept(Map<String, List<?>> multiMap) {
        //this is valid considering the type of multiMap parameter,
        //but would not work with the actual passed parameter.
        multiMap.put("test", new ArrayList<Integer>());
    } 
```

# javascript - 在剑道 UI 中加载页面时隐藏详细信息表（k-detail-cell）

> ID：13056424
> 
> 赞同：0
> 
> 时间：2012-10-24T19:34:35.753
> 
> 标签：javascript, jquery, html, css, kendo-ui

我想在页面加载时隐藏详细信息表

但是当单击主行上的三角形时，它会显示

[http://demos.kendoui.c​​om/web/grid/detailtemplate.html](http://demos.kendoui.com/web/grid/detailtemplate.html)

那是我在萤火虫上检测到的元素。

![在此处输入图像描述](../Images/0d7f0b10bbb364406f78d2bd81298168.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T20:26:02.807

我怀疑您可以将 a 添加`style="display: none;"`到 的主容器中`detailTemplate`，但这可能会抛出 Master Row 三角形的行为。

```
<div class="tabstrip" style="display: none;">
    <ul>
        <li class="k-state-active">
           Orders
        </li>
        <li>
            Contact Information
        </li>
    </ul>
    <div>
        <div class="orders"></div>
    </div>
    <div>
        <div class='employee-details'>
            <ul>
                <li><label>Country:</label>#= Country #</li>
                <li><label>City:</label>#= City #</li>
                <li><label>Address:</label>#= Address #</li>
                <li><label>Home Phone:</label>#= HomePhone #</li>
            </ul>
        </div>
    </div>
</div> 
```

您可以改为在页面加载时隐藏它：

```
$('tr.k-master-row + tr.k-detail-row').hide(); 
```

或者，只是在数据绑定发生时使用隐藏的详细信息行初始化网格（可能是最好的解决方案）：

```
//...
detailTemplate: kendo.template($("#template").html()),
detailInit: detailInit,
dataBound: function() {
    this.collapseRow(this.tbody.find(">tr.k-master-row"));
},
//... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-05T18:34:17.543

```
 dataBound: function (e) {
                                var grid = e.sender;

                                items.each(function (e) {
                                    var dataItem = grid.dataItem(this);

                                    if (dataItem.SubGroups.length == 0)
                                        grid.tbody.find("tr[data-uid=" + dataItem.uid + "].k-master-row>.k-hierarchy-cell>a").hide();
                                }); 
```

# frameworks - Zurb's Foundation 3：更小的网格宽度

> ID：13056425
> 
> 赞同：2
> 
> 时间：2012-10-24T19:34:50.840
> 
> 标签：frameworks, responsive-design, compass-sass, sass

一直在使用[Zurb Foundation 3 框架](http://foundation.zurb.com/)。

我试图在 _settings.scss 中设置小于 1000px 的宽度，但出于某种原因，即使我输入的数字较小，它也只会下​​降到 770px。这是我所做的：

1.  执行指南针：`compass watch projectname`
2.  编辑_settings.scss：`$rowWidth: 660px;`
3.  将标记设置为：

    ```
    <div class="行">
            <div class="十二列">
                <h1>标题</h1>
                <p>这里有一些消息...</p>
            </div>
    </div>
    ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T20:05:29.383

这是我解决它的方法：

1.  创建了一个 _overrides.scss 文件：`sass/_overrides.scss`
2.  在 app.scss 中导入文件：`@import "overrides";`
3.  将此添加到 _overrides.scss 文件中：

    ```
    @media only screen and (min-width: $rowWidth) {
        。排 {
            最小宽度：$rowWidth；
        }
    }
    @media only screen and (max-width: 767px) {
        。排 {
            宽度：$行宽度；
            边距：0 自动；
        }
    }
    ```

4.  现在我可以`_settings.scss`通过更改 $rowWidth 来控制宽度，例如：`$rowWidth: 660px;`

只是一个小问题：如果 $columnGutter 小于 30px，如果屏幕尺寸小于 660px，则会出现水平滚动。

# iphone - iOS中的视频可以反卷积吗？

> ID：13056426
> 
> 赞同：4
> 
> 时间：2012-10-24T19:35:04.857
> 
> 标签：iphone, objective-c, ios, ipad

我想拍摄一个击球手在棒球上挥动的镜头，但击球棒是模糊的。视频为 30 fps。

通过研究，我发现反卷积似乎是最小化运动模糊的方法，但我不知道是否或如何在我的 iOS 应用程序后期处理中实现它。

我希望有人能指出我正确的方向，比如如何在 iOS 中应用反卷积算法，或者我可能需要做什么……或者是否有可能。我想它需要一些处理能力。

欢迎任何建议......

谢谢，这让我发疯了......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T16:29:24.877

经过大量研究并与开发人员就 iOS 上的去卷积进行了讨论（感谢 Brad Larson 抽出时间给我详细信息），我相信这是不可能的和/或不值得花时间。如果硬件可以处理计算（不保证），它会非常慢并且消耗设备的大部分电池。我还被告知，实现算法可能需要几个月的时间……如果可能的话。

这是我从Apple收到的回复......

> 反卷积算法通常难以实现，并且计算量非常大。我建议你从一个简单的锐化技术开始。根据视频中运动模糊的数量，它可能就足够了。
> 
> 锐化滤镜，包括 CISharpenLuminance 和 CIUnsharpMask，现在在 iOS 6 中可用，因此测试它们比较容易。
> 
> 核心图像过滤器参考 [https://developer.apple.com/library/mac/#documentation/graphicsimaging/reference/CoreImageFilterReference/Reference/reference.html](https://developer.apple.com/library/mac/#documentation/graphicsimaging/reference/CoreImageFilterReference/Reference/reference.html)
> 
> 来自今年 WWDC 会议 511“核心图像技术”的核心图像示例代码。它被称为“尝试3”。此示例演示了将 CIFilter 应用于 iPhone/iPad 摄像头拍摄的实时视频的最佳实践。您可以从以下页面下载会议视频：[https](https://developer.apple.com/videos/wwdc/2012/) ://developer.apple.com/videos/wwdc/2012/ 。

只是想传递这些信息。

# javascript - 通过 twitter api 1.1，通过客户端代码 (js) 获取公共推文

> ID：13056432
> 
> 赞同：15
> 
> 时间：2012-10-24T19:35:21.097
> 
> 标签：javascript, jquery, twitter, jsonp

我正在开发一个基本的个人主页，由一个 html 文档、一个 .css 和 jquery*.js 文件组成。我想通过从推文中获取页面内容来创建类似博客的外观。标准小部件不适合页面的外观。

我可以通过 API v1 从任何没有身份验证废话的帐户获取公共推文（这是废话，因为它无论如何都是公共数据）。但是使用 API v1.1，它会返回身份验证错误。它希望我进行身份验证以获取公共数据。尝试浏览 [此](https://api.twitter.com/1.1/statuses/user_timeline.json?callback=?&screen_name=java)网址。它显示`({"errors":[{"message":"Bad Authentication data","code":215}]});`。

我的问题是*有没有办法通过客户端 js 获取公共推文*？我不想创建一个只获取公共数据的应用程序。我不想不使用 identi.ca 或其他，但 Twitter 推动我这样做。

* * *

在 Zachary Kinebel 对 Norguard 的回答发表评论后，我想，作为 Norguard 的评论可能对其他人有帮助，我应该把它放在这里：

* * *

`/search.json?q=from:nerdswguitars`=== NerdsWGuitars最近的`/search.json?q=to:nerdswguitars`推文 === NerdsWGuitars 的最近推文`/search.json?q=from:nerdswguitars`或`to:nerdswguitars`=== 两者。`/search.json?q=@nerdswguitars`=== 涉及 NerdsWGuitars 的帖子。`/search.json?q=#nerdswithguitars`=== 发布趋势“nerdswithguitars”。但是您必须确保您正确地对查询进行了 URL 编码。在此处阅读更多信息：[https](https://dev.twitter.com/docs/using-search) ://dev.twitter.com/docs/using-search如果您找不到您正在寻找的内容，那么您需要更加具体

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-24T20:07:54.250

## ***编辑***

在坏主意的美妙世界中，Twitter 正在取消这个答案，截至 2013 年 5 月，并且至少要求你要么使用他们的一个小部件，然后硬塞进去，要么你设置一个应用程序并执行应用程序级别身份验证，即使对于公共时间线`GET`请求也是如此。

如果他们改变主意，或者延迟投掷开关，这至少会继续存在。

* * *

使用搜索 API：

```
"http://search.twitter.com/search.json?q=nerdswguitars" 
```

您可以使用 URL 编码`#`或`@`前面的搜索词。您还可以使用`from`or之类的关键字`to`，并指定限制等。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-07-22T00:46:38.463

您可以使用[Mooch](https://github.com/eloquent/mooch)，这是一个旨在解决这个确切问题的小型应用程序。设置一个新的*Mooch*服务非常简单，并且使用[Heroku](https://www.heroku.com/)。部署过程需要[Heroku Toolbelt](https://toolbelt.heroku.com/)应用程序。

## 第 1 步：创建 Twitter 应用程序

*   访问[https://dev.twitter.com/](https://dev.twitter.com/)。
*   使用 Twitter 帐户登录。
*   [创建一个新的应用程序](https://dev.twitter.com/apps/new)。

## 第 2 步：获取*Mooch*

*   克隆 Git 存储库 ( `git clone git@github.com:eloquent/mooch.git`)。
*   切换到*Mooch*根目录。

## 第 3 步：创建 Heroku 应用程序

*   使用[Heroku Toolbelt](https://toolbelt.heroku.com/) ( `heroku login`) 登录。
*   使用`heroku create`.

## 第 4 步：配置

*Mooch使用*[仅限应用程序的身份验证](https://dev.twitter.com/docs/auth/application-only-auth)方法对对 Twitter API 的请求进行身份验证。这需要步骤 1 中创建的 Twitter 应用程序中的使用者密钥和秘密。

### 示例身份验证配置

```
heroku config:set MOOCH_CONSUMER_KEY=xvz1evFS4wEEPTGEFPHBog
heroku config:set MOOCH_CONSUMER_SECRET=L8qq9PZyRg6ieKGEKhZolGC0vJWLw8iEJ88DRdyOg 
```

## 第 5 步：部署

*   `git push heroku master`

新的*Mooch*服务现在应该可以使用了。检查[Heroku 仪表板](https://dashboard.heroku.com/)以了解服务的位置。

有关更详细的配置说明、演示应用程序等，请查看GitHub 上的[Mooch 自述文件。](https://github.com/eloquent/mooch#readme)

# php - PHP插入数字不起作用？

> ID：13056434
> 
> 赞同：1
> 
> 时间：2012-10-24T19:35:30.613
> 
> 标签：php, mysql, arrays, insert, numbers

我正在将文本区域中的标签插入数据库，但问题是每当我尝试插入专辑 INT 或曲目 INT 时，它在数据库中显示为 0。如果您看到 PHP 输出值等于 1，那么当它使用四个单独的查询插入数据库时​​，它始终显示为 0。

```
<html>
<head><link type="text/css" rel="stylesheet" href="style.css" /></head>
<?php
include 'connect.php';
$tags = $_POST['tags'];
//$album = $_POST['album'];
//$track = $_POST['track'];
$data = preg_replace("~\s*[\r\n]+~", ', ', $tags);
$arr=explode(",",$data);
foreach ($arr as $value) {
$id = 'NULL';
$album = $_POST['album'];
$track = $_POST['track'];
echo $id;
echo "<br>";
echo $album;
echo "<br>";
echo $track;
echo "<br>";
echo $value;
echo "<br><br>";
//      echo "id ";
//      echo $album;
//      echo " ";
//      echo $track;
//      echo " ";
//      echo $value;
//      echo " inserted into the DB!<BR>";
//mysql_query("INSERT INTO tags (`id`, `album`, `track`, `tag`) VALUES (NULL, '$album', '$track', '$value')");
//mysql_query("INSERT INTO `tags` (`id`, `album`, `track`, `tag`) VALUES(NULL, '".$album."', '".$track."', '".$value."')") or die(mysql_error());
//mysql_query("INSERT INTO tags (id, album, track, tag) VALUES (NULL, '$album', '$track', '$value' )") or die(mysql_error());
mysql_query("INSERT INTO tags(id, album, track, tag) VALUES('$id' , '$album', '$track', '$value')") or die(mysql_error());
}
?>
</html> 
```

PHP浏览器输出：

```
NULL
1
1
this

NULL
1
1
is

NULL
1
1
a

NULL
1
1
test 
```

数据库在我尝试过的每个查询中显示以下条目

[http://i.stack.imgur.com/d6QQ9.png](http://i.stack.imgur.com/d6QQ9.png)

如果第一个失败，则辅助链接

[http://d4rkd0s.info/tags.png](http://d4rkd0s.info/tags.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T22:02:36.630

试试看 ：

```
 db_query("INSERT INTO tags(id, album, track, tag) VALUES('$id' , '$album', '$track', '$value')") or die(mysql_error());
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T19:48:24.463

您是否将数据转换为整数？

`mysql_query("INSERT INTO tags(album, track, tag) VALUES('(int)$album', '(int)$track', '$value')") or die(mysql_error());`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T19:36:39.750

这些变量的值是 string `NULL`，您希望将其设置为 null 值：

`$val = null;`

更好的是，最好`id`从 mysql 插入中删除该列：

```
mysql_query("INSERT INTO tags(album, track, tag) VALUES( '$album', '$track', '$value')") or die(mysql_error()); 
```

您不需要**在**一行中插入所有值，mysql 将为您省略的值放入默认值

最后，将插入构造为：

```
$sql = '<mysql insert statement here>';
//die($sql); //or use echo here if you want to see multiple
mysql_query($sql); 
```

在开发过程中取消注释`die`，这样您就可以看到发送到 mysql 的实际字符串

**另一个答案**

您在专辑和曲目栏中有什么类型。我想你想要一个字符串，看起来它们可能是`int`. 将其更改为`varchar(128)`，这应该为你做。

# php - 使用 PHP 的数组进行高效的数字运算

> ID：13056435
> 
> 赞同：-1
> 
> 时间：2012-10-24T19:35:45.927
> 
> 标签：php, matrix

我需要一种有效的方法来处理 PHP 中的 3D 矩阵。仅限数字索引，所有数据都将是双精度数，但如果确实需要，可以将其更改为整数。

有没有一种便携的方法可以有效地做到这一点？

是的 ！我知道 PHP 不是数字运算的明显选择，但这是一个硬约束，我无法改变它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T19:39:32.947

高效的数据表示和 PHP 通常不会出现在同一个句子中，所以走起来肯定不容易。

如果您只打算使用数字索引，那么[`SplFixedArray`](http://php.net/manual/en/class.splfixedarray.php)对内置数组类型有相当大的改进；好处将首先是内存占用，其次是性能。

您可以使用典型的嵌套数组方案来表示 3D 矩阵，也可以使用一维数组并手动在 (x, y, z) 到 (i) 之间进行转换。在后一种情况下，您应该预计内存占用会有所减少，但性能也可能会受到影响。

# jquery-ui - jQuery UI Multiple Droppable - 拖动整个 div 元素并克隆

> ID：13056438
> 
> 赞同：3
> 
> 时间：2012-10-24T19:35:52.190
> 
> 标签：jquery-ui, draggable, droppable

我刚刚开始使用 jQuery UI 将 div 拖到表格的列中。我有几个不同的可拖动 div，其中有不同的背景颜色和文本，我需要它们能够作为克隆拖动到放置区域。这通过使用 jQuery UI 的示例购物车代码可以正常工作，但是我已经对其进行了编辑，以便拖动整个对象而不仅仅是文本，但是由于某种原因这会消除克隆功能，即使我有 helper:clone。

这是我的代码：

```
<script>
$(function() {
    $( "ul li" ).draggable({
        appendTo: "body",
        helper: "clone"});
    $( ".day #drag" ).draggable({
        appendTo: "body"});
    $( ".day" ).droppable({
        activeClass: "ui-state-hover",
        hoverClass: "ui-state-active",
        accept: ":not(.ui-sortable-helper)",
        drop: function( event, ui ) {
            var targetElem = $(this).attr("id");

            $( this ).addClass( "ui-state-highlight" );
            $( ui.draggable ).appendTo( this );
        }
    }).sortable({
        items: "li:not(.placeholder)",
        sort: function() {
            $( this ).removeClass( "ui-state-default" );
        }
    });
});
</script> 
```

示例列：

```
<td>
   <div id="monday" class="day monday ui-widget-content"></div>
</td> 
```

可拖动元素：

```
<li><div style="background-color:#<?=$bgColor?>;color:<?=$textColor?>;" id="drag" class="<?=$subject?>"><?=$row['name']?></div></li> 
```

它本质上是一个时间表设置工具。感谢您的帮助

这是一个 jsFiddle 供参考：http: [//jsfiddle.net/x5T4h/](http://jsfiddle.net/x5T4h/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T08:25:28.147

不确定这是否正是您想要的，但这是您的良好开端：http: [//jsfiddle.net/x5T4h/2/](http://jsfiddle.net/x5T4h/2/)

基本上，我删除了第二个`draggable`对象声明，并添加了克隆函数来复制`drop`事件中的元素`$( ui.draggable ).clone().appendTo( this );`

```
$(function() {
    $( "ul li" ).each(function(){
        $(this).draggable({
            helper: "clone"
        });
    });

    $( ".day" ).droppable({
        activeClass: "ui-state-hover",
        hoverClass: "ui-state-active",
        accept: ":not(.ui-sortable-helper)",
        drop: function( event, ui ) {
            var targetElem = $(this).attr("id");
            $( ui.draggable ).clone().appendTo( this );
        }
    }).sortable({
        items: "li:not(.placeholder)",
        sort: function() {
            $( this ).removeClass( "ui-state-default" );
        }
    });
});​ 
```

# jquery - 如何仅在一系列动画动态完成后触发动画

> ID：13056441
> 
> 赞同：0
> 
> 时间：2012-10-24T19:36:14.160
> 
> 标签：jquery, animation

我是一个完整的初学者。我正在尝试创建可以根据来自 xml 文件的信息处理任意数量元素的动画的代码。我正在尝试完成四个步骤。

1.  一个一个地淡入容器 div 的所有子元素，直到所有元素都可见。
2.  延迟，然后一次性淡出容器 div 中的所有元素。
3.  移动到下一个容器 div 并对那里的子元素执行相同的操作......等等。
4.  环形。

到目前为止，我仍然停留在第 1 步。我可以让子元素按顺序淡入，但无论它们属于哪个容器 div，它们都会淡入。然后一切都消失了。直到我可以让第一个容器 div 淡入所有元素然后消失而不触发其他任何东西，我才能继续弄清楚其余部分。我已经尝试了很多不同的东西，但我不能完全到达那里，我不知道我做错了什么。到目前为止，这是我的代码：

```
$('.element').find('.inner').each(function(index){
    $(this).delay(2000*index).fadeIn(2000); 
});
$('.inner').promise().done(function() {
// my callback
    $('.element').delay(4000).fadeOut(2000);
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T20:50:41.763

对于 jQuery 中的时间问题和同步动画，有一个很酷的插件：[jquery-timing](http://creativecouple.github.com/jquery-timing/)。它提供了*非常简单的链接语法*。以下示例代码是一个单链：

```
// 1\. Fade in all child elements of a container div, one by one until all elements are visible.
// 2\. Delay, and then fade out all elements in the container div at once.
$('.someDiv .inner').each($).fadeIn(2000,$).all().wait(4000).fadeOut(2000); 
```

要为多个 div 循环该行为，您还需要该插件中的 repeat() 方法。同样，我们有一个单独的 jQuery 链，它自动完成所有动画的等待：

```
// Move on to the next container div and do the same with the child elements there...and so on.
// Loop.
$('.divs').repeat().each($).find('.inner')
    .each($).fadeIn(2000,$).all().wait(4000).fadeOut(2000,$); 
```

这是您的动画的全部代码。

玩得开心。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T20:00:45.677

对于第 1 步：您应该在 div 的第一个子元素和传递给 fad​​eIn 的完整回调函数中淡入淡出，获取元素的下一个兄弟元素并将其淡入，直到没有更多的下一个兄弟元素。像这样的东西（伪代码）：

```
var fadeInCallback = function(evt) {
  //this will reference the object that fadeIn was called on
  if( $(this).next().size() > 0 ) {
    $(this).next().fadeIn( 2000, fadeInCallback );
  }
};
$('.element div:first-child').fadeIn( 2000, fadeInCallback ); 
```

请参阅：[http](http://api.jquery.com/first-child-selector/) ://api.jquery.com/first-child-selector/和[http://api.jquery.com/next/](http://api.jquery.com/next/)

# html - 购物车增长到覆盖它下面的 div

> ID：13056447
> 
> 赞同：3
> 
> 时间：2012-10-24T19:36:49.717
> 
> 标签：html, css

我希望我在正确的区域发帖。这是我在此的头一篇博文。

我遇到了只发生在 IE7 中的问题。我很确定这是一个 CSS 问题，但它涉及我正在处理的网站左栏中的购物车。

随着物品被添加到购物车中，购物车会变得更高，但它下方的 div 不会向下移动。相反，购物车开始覆盖它下面的 div。

这只发生在 IE7 中。这几天我一直在努力解决这个问题。我已经尝试了所有我能想到的关于 CSS 的方法，但没有任何帮助。这是测试站点 www.palmsdining.com/ 的链接。请记住，这只发生在 IE7 中。任何帮助，将不胜感激。附件是显示问题的图像。![在此处输入图像描述](../Images/c350a63e72edae6027890c6531f33777.png)

这是一个 Joomla 网站。这是 index.php 代码：

* * *

```
<?php
/**
 * @version    $Id: index.php $
 * @package    test
 * @copyright  Copyright (C) 2012 test
     */
// No direct access.
defined('_JEXEC') or die;
JHTML::_('behavior.framework', true);

/* The following sets up for a modal system message pop-up window */
JHTML::_('behavior.mootools');
JHTML::_('behavior.modal');

/* The following line gets the application object for things like displaying the site name */
$app = JFactory::getApplication();
$tplparams  = $app->getTemplate(true)->params;
?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="<?php echo $this->language; ?>" lang="<?php echo $this->language; ?>" dir="<?php echo $this->direction; ?>">
<head>
<jdoc:include type="head" />

<!--[if lte IE 6]><script type="text/javascript" src="<?php echo $this->baseurl ?>/templates/<?php echo $this->template ?>/js/warning.js"></script><script>window.onload=function(){e("images/warning_imgs/")}</script><![endif]-->
<!-- The following line loads the general CSS file located in the template/css folder. -->
<link rel="stylesheet" href="<?php echo $this->baseurl ?>/templates/system/css/general.css" type="text/css" />
<!-- The following line loads the system CSS file located in the template/css folder. -->
<link rel="stylesheet" href="<?php echo $this->baseurl ?>/templates/system/css/system.css" type="text/css" />
<!-- The following line loads the main template CSS file "test styles" located in the template folder. -->
<link rel="stylesheet" href="<?php echo $this->baseurl ?>/templates/<?php echo $this->template ?>/css/test.css" type="text/css" />
<!-- The following line loads the test TopNav style sheet -->
<link rel="stylesheet" href="<?php echo $this->baseurl ?>/templates/<?php echo $this->template ?>/css/topnav_styles.css" type="text/css" />
<!-- The following line loads the test shopping modules style sheet -->
<link rel="stylesheet" href="<?php echo $this->baseurl ?>/templates/<?php echo $this->template ?>/css/frontend_default.css" type="text/css" />
<!-- The following line loads the social buttons  style sheet -->
<link rel="stylesheet" href="<?php echo $this->baseurl ?>/templates/<?php echo $this->template ?>/css/soc_btns_styles.css" type="text/css" />
<!-- The following line loads the ht_login mod style sheet -->
<link rel="stylesheet" href="<?php echo $this->baseurl ?>/templates/<?php echo $this->template ?>/css/ht_login.css" type="text/css" />

<script type="text/javascript" src="<?php echo $this->baseurl ?>/templates/<?php echo $this->template ?>/js/hotlogin.js"></script>
<script type="text/javascript" src="<?php echo $this->baseurl ?>/templates/<?php echo $this->template ?>/js/jquery-1.4.4.min.js"></script>
<script type="text/javascript">jQuery.noConflict();</script>
<!-- The following line adds the script for the new modal system message pop-up window-->

<script type="text/javascript">
window.addEvent('domready', function(){
 if( $('system-message') ){
 SqueezeBox.initialize();
 SqueezeBox.open( $('system-message'), {
 handler: 'adopt',
 shadow: true,
 overlayOpacity: 0.5,
 size: {x: 600, y: 100},
 onOpen: function(){
 $('system-message').setStyle('visibility', 'visible');
 }
 });
 }
});
</script>

<!--[if IE 7]>
      <link href="<?php echo $this->baseurl ?>/templates/<?php echo $this->template; ?>/css/ie7.css" rel="stylesheet" type="text/css" />
    <![endif]-->

</head>
<div id="maincont">

<body>
  <!-- no javascript warning -->
 <noscript><div id="noscript">
  <p class="noscriptnotice">IMPORTANT NOTICE</p><br />
  <p>You Have Javascript Disabled - Important Features Of The test Site Require Javascript To Work </p><br />
 <p>Please Enable Javascript - <a href="#" title="x">x</a></p></div></noscript>

<div id="container">
  <div id="ht_login">
    <jdoc:include type="modules" name="ht_login" style="xhtml"/>
        <jdoc:include type="modules" name="top_cart" style="xhtml"/>

  </div>
  <!-- end login -->

  <div id="header">
  <a href="http://www.test.com"> </a></div>
  <!-- end header -->
  <div id="topnav">
    <jdoc:include type="modules" name="topnav" style="xhtml"/>
  </div>
  <!-- end top nav -->
  <div id="subnav">
    <?php if( $this->countModules('position-0') ) : ?>
    <div id="searchbox">
      <jdoc:include type="modules" name="position-0" style="xhtml"/>
    </div>
    <?php endif; ?>

    <!-- end search box nav -->

    <?php if( $this->countModules('position-1') ) : ?>
    <div id="socialbuttons">
      <jdoc:include type="modules" name="position-1" style="xhtml"/>
    </div>
    <?php endif; ?>

    <!-- end social buttons nav -->
  </div>

  <!-- end sub nav -->
  <div id="breadcrumbs">
    <jdoc:include type="modules" name="breadcrumbs" style="xhtml"/>
  </div>
  <!-- end breadcrumbs -->
    <div id="leftcolcontwrap">
  <div id="leftcol">
    <?php if( $this->countModules('position-2') ) : ?>
    <div id="leftcoltop">
      <jdoc:include type="modules" name="position-2" style="xhtml"/>
    </div>
    <?php endif; ?>

    <!-- end left col top -->

    <?php if( $this->countModules('position-3') ) : ?>
    <div id="leftcolmid">
      <jdoc:include type="modules" name="position-3" style="xhtml"/>
    </div>
    <?php endif; ?>

    <!-- end left col mid -->
    <?php if( $this->countModules('position-4') ) : ?>
    <div id="leftcolbot">
      <jdoc:include type="modules" name="position-4" style="xhtml"/>
    </div>
    <?php endif; ?>

    <!-- end left col bot -->
    <?php if( $this->countModules('position-5') ) : ?>
    <div id="leftcolbot2">
      <jdoc:include type="modules" name="position-5" style="xhtml"/>
    </div>
    <?php endif; ?>

    <!-- end left col bot2 -->
  </div>
  <!-- end left col -->

  <div id="content">
    <jdoc:include type="message" />
    <jdoc:include type="component" />
  </div>
    <!-- end content -->
<div class="clr"></div>    </div>

  <!-- end left_col_cont_wrap -->
  <div id="footer">

<ul class="top">
            <li></li>
            <li></li>

      </ul>  

<ul class="bot">
            <li><</li>
            <li></li>
            <li></li>
            <li></li>

      </ul>  
      </div>
  <!-- end footer -->

</div>
<!-- end container -->
        <jdoc:include type="modules" name="debug" />
</body>
  </div>

</html> 
```

* * *

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T19:40:13.857

IE7 可能在解析您的标记时遇到问题...

```
<div id="maincont">

<body> 
```

您正在打开一个 DIV 然后开始您的 BODY 标签。

# .net - 为什么我应该在 MSDTC 上使用事务而不是 System.Data.SqlClient.SqlTransaction？

> ID：13056448
> 
> 赞同：2
> 
> 时间：2012-10-24T19:36:51.267
> 
> 标签：.net, transactions, msdtc

假设我只使用一个 sql server 数据库

为什么要选择事务而不是 MSDTC 而不是 SqlTransaction？

我的感觉是有某种“显而易见的”选择 msdtc 而不是 SqlTransactions 我无法想象......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T19:40:09.390

MSDTC 允许您跨**多个**资源进行事务处理，例如多个 SQL Server 加上 Web 服务（通过 WS-Transaction）+ 事务性 NTFS + MSMQ + ... 全部在一个事务中进行一次原子提交。

不过，它会带来性能和可用性成本。

# hosting - Roundcube 作为整个服务器的默认 webmail 应用程序

> ID：13056454
> 
> 赞同：1
> 
> 时间：2012-10-24T19:36:56.490
> 
> 标签：hosting, webmail, roundcube

我有一个小的 cPanel Web 服务器，作为我向客户提供的 Web 开发/设计服务的方便补充。

他们在访问他们的网络邮件时都使用圆形立方体，因此最好跳过 cpanel 的邮件应用程序选择页面。

我知道如何通过创建子域 webmail.domainname.com 并将其重定向到 roundcube 来为单个帐户执行此操作，但我想知道是否有办法为服务器上的所有帐户执行此操作，而不是手动执行.

# memcached - 带有 memcached 集成的开源 url 缩短器？

> ID：13056455
> 
> 赞同：0
> 
> 时间：2012-10-24T19:36:59.127
> 
> 标签：memcached, url-shortener

是否有一个开源 url 缩短器解决方案，它在 db 之上具有缓存级别（通过 memcached）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T19:39:42.697

试试[这个](http://briancray.com/posts/free-php-url-shortener-script/)

它没有 memcache 集成，但它使用本地存储。通过一些工作，您可以将其更改为与 memcache 适配器一起使用。

# jquery - 自动调整大小和粘性（顶部和底部）div jQuery

> ID：13056456
> 
> 赞同：2
> 
> 时间：2012-10-24T19:37:04.137
> 
> 标签：jquery, css

我有一个挑战要解决。我正在制作一个自动调整大小和粘性（顶部和底部）的 div。您可以在此处查看示例[http://www.sixplus1.com/inventmx/sixplus1_b.html](http://www.sixplus1.com/inventmx/sixplus1_b.html)

问题是当我将窗口滚动到底部（div 必须停止的位置）时，div 消失了，我认为这是由于边缘顶部问题，所以我需要解决它的想法。请查看示例并将窗口滚动到最后一行。任何帮助都将受到高度赞赏。

我需要尽快完成这项工作

希望你能帮助我和。这是代码..

**注意：名为#content_derecha 的代码上的 div 具有粘性类**

```
<script src="jquery-1.7.1.min.js" type="text/javascript"></script>
<script>
  $(document).ready(function(){

//I make the div with elastic properties
var bottomPosition = $(window).height();
$('#content_derecha').height(bottomPosition); //in this example #content_derecha is the div that has to be elastic and sticky

$(window).resize(function(){
  var bottomPositionN = $(window).height();
  $('#content_derecha').height(bottomPositionN); //the same div resizing its position when the window is resized

});

//Here starts the evaulation to make the div sticky

var footerFreno = $('.stop').offset().top; // returns the stop on top
var stickyTop = $('.sticky').offset().top; // returns the stop on bottom. I have another div on footer with the class .stop

if (!!$('.sticky').offset()) { //first the code verify if the sticky class exists

//here I have a function to verify if the scroll position is between the values I need 

    function verificaRango(x, n, m){ 
      if (x >= n && x <= m) 
        { 
          return true; }else 
          { return false; 
          }

    }

    $(window).scroll(function(){ // Here I capture in a variable the position of the scroll

      //Here I calculate the bottom of the sticky and auto reize the div
      var arribaValor = $('.sticky').offset().top
      var altoValor = $('.sticky').height();
      var posicionFreno = arribaValor + altoValor;
      var windowTop = $(window).scrollTop(); // the position of the scrollbar 
      var posFreno = footerFreno-altoValor;

      var semaforo = verificaRango(windowTop,stickyTop,posFreno); // I store in a variable named "semaforo" the result of the range verification to finally compare it in an if statement...

      if (semaforo == true){ // I finally set the position fixed or static according the position nof the div...
          $('.sticky').css({ position: 'fixed', top: 0 }); 
          }
          else {
              $('.sticky').css('position','static');
          }

    });

  }

});

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T22:03:30.367

这是同时使 div 具有粘性和自动调整大小的说明。

我将在[http://rmz.sixplus1.com/blog/sticky.html上发布完整的代码和源代码](http://rmz.sixplus1.com/blog/sticky.html)

您必须包含 jquery 才能使其正常工作。

然后你需要 3 节课。

```
1.- .sticky = the div that will have the sticky an autoresizing functions.
2.- .head = the header of the page.
3.- .stop = The footer of the page where you want the div stops  

4.- Is important that the html and body tags was its margin and padding as 0, for example 

 html,body{
    //    margin:0;
    //    padding: 0; 
    //
    //  } 
```

这是代码

```
 $(document).ready(function(){
        //Se dimensiona el div segun el tamaño de la ventana inicial   
        var bottomPosition = $(window).height();
        var stickyAlto = bottomPosition;
        $('.sticky').height(stickyAlto);
        stickyAlto=$('.sticky').outerHeight(true);

    //Funcion para verificar el rango
        function verificaRango(x, n, m){
          if (x >= n && x <= m) 
            { 
              return true; }else 
              { return false; 
              }

        }

    var footerFreno = $('.stop').offset().top; 
    var stickyTop = $('.sticky').offset().top; 
    var headMargen = $('.head').height(); 
    var latosoStage = (footerFreno - stickyAlto) - headMargen ;
    var stageCompleto = $(document).height();
    var arribaValor;
    var altoValor;
    var posicionFreno;
    var windowTop;
    var posFreno;
    var semaforo;
    var bottomPositionN;

    if (!!$('.sticky').offset()) { 

        $(window).scroll(function(){ 

          //calcular la parte de abajo del sticky
          arribaValor = $('.sticky').offset().top
          altoValor = $('.sticky').height();
          posicionFreno = arribaValor + altoValor;
          windowTop = $(window).scrollTop(); // la posicion del scrollbar 
          posFreno = footerFreno-altoValor;
          semaforo = verificaRango(windowTop,stickyTop,posFreno);

          switch(semaforo){

            case true:
            $('.sticky').css({ position: 'fixed', top: 0 });
            break;

            case false:

              if(stickyTop > windowTop){
                $('.sticky').css({ position: 'static', top: 0 });

              }

              if(posicionFreno > footerFreno){
                $('.sticky').css({ position: 'absolute', top: latosoStage });

              }
            break;
          }
        });
      }

    $(window).resize(function(){
      bottomPositionN = $(window).height();
      $('.sticky').height(bottomPositionN);
      bottomPositionN=$('.sticky').outerHeight(true);
      latosoStage = (footerFreno - bottomPositionN) - headMargen ;
      $('#latoso').height(latosoStage);
      stageCompleto = $(document).height();
      $('.sticky').css({ position: 'absolute', top: latosoStage });
      $(window).trigger("scroll");

    });

  }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T09:07:41.827

查看您链接的实时版本，我确定您大部分时间都在那里......替换以下内容：

```
//operaciones para freno absoluto
var p =$('.sticky').position().top;
var frenoAbsoluto = p-700; 
```

和

```
//operaciones para freno absoluto
var p = $('#content').position().top;
var frenoAbsoluto = posFreno-p; 
```

因为您在`#content_derecha`相对定位的父级 ( `#content_derecha_superior`) 中给出了绝对位置，所以绝对定位将相对于该父级的顶部（方便地，与顶部的位置相同`#content`）。

您正在确定相对于整个页面顶部的绝对位置`posFreno`，所以我只是减去了顶部的偏移量`#content`。

顺便说一句，您还应该为您的`switch(semaforo)`:

```
case true:
  $('.sticky').css({ position: 'fixed', top: 0, 'margin-top': '0px' });
  break;
case false:
  if(stickyTop > windowTop){
    $('.sticky').css({ position: 'static', top: 0, 'margin-top': '5px' });
  } 
```

这将使您的`#content_derecha`div 更准确地适合窗口。或者，您可以更改调整大小功能：

> `$(window).resize(function(){`
> ```var bottomPositionN = $(window).height();`
> ```$('#content_derecha').height(bottomPositionN-10);`
> `});`````

# java - Tomcat 5.5.36 上的 HttpOnly cookie

> ID：13056460
> 
> 赞同：1
> 
> 时间：2012-10-24T19:37:42.353
> 
> 标签：java, tomcat, cookies, tomcat5.5, httponly

我在线程上看到了[How do you configure HttpOnly cookies in tomcat / java webapps?](https://stackoverflow.com/questions/33412/how-do-you-configure-httponly-cookies-in-tomcat-java-webapps) Tomcat 5.5.(>28) 应该支持元素`useHttpOnly`中指定的供应商特定属性`<Context>`。

我将此属性添加到我的 server.xml 中配置的所有上下文中。

但是，只有`JSESSIONID`附加了`"; httpOnly"`标志。所有其他 cookie 与我添加之前的完全一样`useHttpOnly="true"`。

```
Set-Cookie=
JSESSIONID=25E8F...; Path=/custompath; HttpOnly
mycustomcookie1=xxxxxxx; Path=/
mycustomcookie2=1351101062602; Path=/
mycustomcookie3=0; Path=/
mycustomcookie4=1; Path=/; Secure
mycustomcookie5=4000; Expires=Sat, 22-Oct-2022 17:51:02 GMT; Path=/ 
```

还有什么我需要改变的吗？

（升级到 tomcat 6 或 7 目前不是一个选项。我们的系统使用基于 tomcat 5.5 的第三方框架）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T19:42:52.123

服务器中的`useHttpOnly`配置确实适用于服务器控制的 cookie，例如`JSESSIONID`only。

对于 webapp 控制的 cookie，您必须自己手动创建整个 cookie 标头。该类`Cookie`不适合，因为该[`setHttpOnly()`](http://docs.oracle.com/javaee/6/api/javax/servlet/http/Cookie.html#setHttpOnly%28boolean%29)方法是在 Servlet 3.0 中引入的，但是您使用的是 Tomcat 5.5，因为 Servlet 2.4 容器在`Cookie`类中没有此方法。您需要至少升级到 Tomcat 7，它是与 Servlet 3.0 兼容的容器。

您可以手动创建问题中提到的 cookie，如下所示：

```
response.addHeader("Set-Cookie", "mycustomcookie1=xxxxxxx; Path=/; HttpOnly");
response.addHeader("Set-Cookie", "mycustomcookie2=1351101062602; Path=/; HttpOnly");
response.addHeader("Set-Cookie", "mycustomcookie3=0; Path=/; HttpOnly");
response.addHeader("Set-Cookie", "mycustomcookie4=1; Path=/; Secure; HttpOnly");
response.addHeader("Set-Cookie", "mycustomcookie5=4000; Expires=Sat, 22-Oct-2022 17:51:02 GMT; Path=/; HttpOnly"); 
```

这确实只是将`HttpOnly`属性添加到 cookie 标头值的问题，用 . 分隔`;`。

如果您想在*所有*cookie 上透明地应用它，那么您可能希望提供一个自定义[`HttpServletResponseWrapper`](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletResponseWrapper.html)，其中相应地覆盖`addHeader()`和`setHeader()`方法以检查是否`Set-Cookie`设置了标头，如果设置了，则在不存在时添加`;HttpOnly`到该值。这样您就可以继续使用`addCookie()`.

# c# - 实体表格上的 CRM2011 银光空白屏幕

> ID：13056465
> 
> 赞同：-1
> 
> 时间：2012-10-24T19:37:59.723
> 
> 标签：c#, silverlight, silverlight-4.0, dynamics-crm-2011

我尝试将我的 silverlight 应用程序（xap 文件和 html 文件）从网络资源上传到 crm 2011，如下例所示：http: [//geekswithblogs.net/Nilesh/archive/2011/08/30/hosting-silverlight-4.0-application -in-dynamics-crm-2011.aspx](http://geekswithblogs.net/Nilesh/archive/2011/08/30/hosting-silverlight-4.0-application-in-dynamics-crm-2011.aspx)，但是当我尝试打开它时看到一个空白页。在我的本地机器（Visual Studio）中一切正常。谢谢你的帮助 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T15:30:19.107

好吧，我解决了这个问题，在我的主机服务器上，我必须指定`<param name="source" value="http://myhostserver/CrmSilverlightApp.xap"/>`而不是 `<param name="source" value="ClientBin/CrmSilverlightApp.xap"/>`

# java - JSON对象字段中的MongoDB JSON数组删除

> ID：13056468
> 
> 赞同：0
> 
> 时间：2012-10-24T19:38:18.580
> 
> 标签：java, android, mongodb

我有一个json对象如下：

```
{ "_id" : ObjectId("508806803bb97dc546e6f307"), "user_name" : "user1", "user_id" : 45645645, "likes" : [ { "event_id" : NumberLong("4578541212") },{ "event_id" : NumberLong("4578541213") } ], "dislikes" : [ ] } 
```

我正在尝试通过 java 驱动程序删除 likes 数组中的特定事件，尝试首先在 shell 中执行此操作：

```
> db.users.update( {'likes.event_id' : 4578541212}, { '$unset':{'likes.event_id'
:1}}) 
```

没有运气......我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T20:14:10.517

如果您只想`event_id`从数组元素中删除该字段：

```
db.users.update( {'likes.event_id' : 4578541212}, {'$unset':{'likes.$.event_id' :1}}) 
```

使用[`$pull`](http://docs.mongodb.org/manual/reference/operator/pull/)运算符删除元素：

```
db.users.update({'likes.event_id': 4578541212}, {'$pull':{likes: {event_id: 4578541212}}}) 
```

# html - 是否可以使用 HTML5 打开用户本地文件进行读取？

> ID：13056471
> 
> 赞同：0
> 
> 时间：2012-10-24T19:38:28.440
> 
> 标签：html, html5-filesystem

我有用户本地系统上文件的路径。当用户单击该路径时，该文件应该打开以便用户可以查看它。

我知道这有很多限制，因为由于浏览器安全问题我们无法访问用户本地文件。

现在，我阅读了有关 HTML5 和它的 FileReader API 的信息，但是我在网上看到的所有代码示例都选择并上传了文件，我不太清楚是否可以用它来做我想做的事。

也许我还没有看过正确的地方，但有人知道吗？

# hadoop - 解决 Pig Udf 问题

> ID：13056477
> 
> 赞同：0
> 
> 时间：2012-10-24T19:39:03.867
> 
> 标签：hadoop, apache-pig

我正在尝试学习java和pig编程..所以基本上..不是一个理想的组合，但事情看起来不错..但我无法解决这个问题..

在我的本地环境中，我没有猪库……但在集群上……是的！

所以..当我这样做时

```
 import org.apache.pig.EvalFunc; 
```

它总是红线..出于显而易见的原因..

所以基本上，我只是忽略它并创建一个 jar 文件吗？

还是我做猪的本地下载..导入库..编写代码..然后创建一个jar文件..然后运行它？

任何建议..谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T19:59:59.390

为了编译和打包你的 jar，你必须下载 pig jar。确保下载与集群上相同的 pig 版本，它应该可以正常工作。

您还可以使用 Maven（或其他构建工具）来构建您的 UDF 并将 pig 作为依赖项引用，Maven 将负责下载依赖项。

# jena - 缺少 Pellet-2.3 包？

> ID：13056480
> 
> 赞同：0
> 
> 时间：2012-10-24T19:39:16.930
> 
> 标签：jena, owl, pellet

我`Pellet-2.3`从[这里](http://clarkparsia.com/pellet/download)下载并安装（包含 Pellet 和 Jena 以及许多其他插件）。在 Eclipse Jena 项目中，我无法访问以下包。

```
import org.mindswap.pellet.jena.ModelReader;
import org.mindswap.pellet.jena.OWLReasoner; 
```

即使已经设置了**构建路径。**看起来那是那些文件`ModelReader.class`并且`OWLReasoner.class`是错过的。

有人知道如何处理吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T12:03:54.763

您的问题已[在此处](http://answers.semanticweb.com/questions/19329/did-pellet-23-implement-modelreader-and-owlreasoner-for-jena-api)得到解答。

# android - 在android xml中转义特殊字符，如&

> ID：13056481
> 
> 赞同：48
> 
> 时间：2012-10-24T19:39:17.133
> 
> 标签：android

```
<string name="app_name">something & something</string> 
```

给出一个错误。我怎么能逃脱呢？

这个对吗

```
<string name="app_name">something &amp; something</string> 
```

或者，还有更好的方法？

* * *

## 回答 #1

> 赞同：104
> 
> 时间：2012-10-24T19:41:28.177

尝试阅读此页面：[http](http://www.xmlnews.org/docs/xml-basics.html) ://www.xmlnews.org/docs/xml-basics.html看起来它包含您正在寻找的答案。

总之，这里是转义字符列表和转义码

```
Character  Predeclared Entity
&          &amp;
<          &lt;
>          &gt;
"          &quot;
'          &apos; 
```

从链接引用。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-05-14T12:47:04.837

对我来说 没用，所以我使用了 \"" 并且这个字符被转义了。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-01-23T10:06:48.970

那么在Android XML中，简单地添加预声明实体在我的情况下不起作用，需要在它之前添加一个反斜杠。所以为了逃避`something & something`使用：

```
<string name="app_name">something \&amp; something</string> 
```

在撇号和引号的情况下，只需使用反斜杠也可以。就像逃避`"That's it"`你可以简单地使用的东西一样：

```
<string name="demo">\"That\'s it\"</string> 
```

而不是通常的

```
<string name="demo">\&quot;That\&apos;s it\&quot;</string> 
```

希望当像我这样的人偶然发现这个问题时，这会有所帮助。

# c# - 解码图像时出错

> ID：13056484
> 
> 赞同：2
> 
> 时间：2012-10-24T19:39:19.593
> 
> 标签：c#, asp.net, barcode-scanner

我正在尝试使用 MessagingToolkit 解码 C#/ASP.NET 中的图像。我已经设法使用这个包对 qr 进行编码，但是当我尝试解码时，使用下面的代码会出现 2 个错误（在页面底部）

我相信这是因为我在上传后没有正确获取图像，但有人可以准确指出我哪里出错了。谢谢。

```
 protected void CreateCode_OnClick(object sender, EventArgs e)
    {
        string path = "C:\\Users\\Wayneio\\Documents\\Visual Studio 2012\\Projects\\BAMSystem\\BAMSystem\\";
        if (QRUpload.HasFiles == true)
        {
            FileInfo fi = new FileInfo(QRUpload.FileName);
            string extA = fi.Extension;
            if (extA == ".jpg" || extA == ".png")
            {
               QRCodeDecoder decoder = new QRCodeDecoder();
               QRUpload.SaveAs(path + QRUpload.FileName);

               System.Drawing.Image myImg = System.Drawing.Image.FromFile(path + QRUpload.FileName);
               decoder.Decode(myImg);

            }
            else
            {
                error.Text = "You have uploaded a " + extA + " file. Please upload either a PNG or a JPG";
            }
        }
        else
        {
            error.Text = "You have not uploaded an image.";
        }
    } 
```

错误1：

```
Error   2   Argument 1: cannot convert from 'System.Drawing.Image' to 'MessagingToolkit.QRCode.Codec.Data.QRCodeImage'  c:\users\wayneio\documents\visual studio 2012\Projects\BAMSystem\BAMSystem\default.aspx.cs  38  35  BAMSystem 
```

错误2：

```
Error   1   The best overloaded method match for 'MessagingToolkit.QRCode.Codec.QRCodeDecoder.Decode(MessagingToolkit.QRCode.Codec.Data.QRCodeImage)' has some invalid arguments    c:\users\wayneio\documents\visual studio 2012\Projects\BAMSystem\BAMSystem\default.aspx.cs  38  20  BAMSystem 
```

PS，如果有人有关于这个 MessagingToolkit QR 包的文档，那将会很有用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T19:47:42.310

Decode accepts 'Bitmap' type image.

```
System.Drawing.Bitmap myImg = new System.Drawing.Bitmap(FileName);
Dictionary<DecodeOptions, object> decodingOptions = new Dictionary<DecodeOptions, object>();
List<BarcodeFormat> possibleFormats = new List<BarcodeFormat>(10);

                        possibleFormats.Add(BarcodeFormat.DataMatrix);
                        possibleFormats.Add(BarcodeFormat.QRCode);
                        possibleFormats.Add(BarcodeFormat.PDF417);
                        possibleFormats.Add(BarcodeFormat.Aztec);
                        possibleFormats.Add(BarcodeFormat.UPCE);
                        possibleFormats.Add(BarcodeFormat.UPCA);
                        possibleFormats.Add(BarcodeFormat.Code128);
                        possibleFormats.Add(BarcodeFormat.Code39);
                        possibleFormats.Add(BarcodeFormat.ITF14);
                        possibleFormats.Add(BarcodeFormat.EAN8);
                        possibleFormats.Add(BarcodeFormat.EAN13);
                        possibleFormats.Add(BarcodeFormat.RSS14);
                        possibleFormats.Add(BarcodeFormat.RSSExpanded);
                        possibleFormats.Add(BarcodeFormat.Codabar);
                        possibleFormats.Add(BarcodeFormat.MaxiCode);

 decodingOptions.Add(DecodeOptions.TryHarder, true);
 decodingOptions.Add(DecodeOptions.PossibleFormats, possibleFormats);
Result decodedResult = decoder.Decode(myImg, decodingOptions);

          if (decodedResult != null)
                        {
                          //.. success
                        } 
```

Also you can also omit the "decodingOptions" options parameter as decoder also has an overload Decode(Bitmap image).

```
System.Drawing.Bitmap myImg = new System.Drawing.Bitmap(FileName);
Result decodedResult = decoder.Decode(myImg);

          if (decodedResult != null)
                        {
                          //.. success
                        } 
```

If you want only QRCode decoding,

```
 System.Drawing.Bitmap myImg = new System.Drawing.Bitmap(FileName);
    Dictionary<DecodeOptions, object> decodingOptions = new Dictionary<DecodeOptions, object>();
    List<BarcodeFormat> possibleFormats = new List<BarcodeFormat>();
    possibleFormats.Add(BarcodeFormat.QRCode);                              
    decodingOptions.Add(DecodeOptions.TryHarder, true);
    decodingOptions.Add(DecodeOptions.PossibleFormats, possibleFormats);
    Result decodedResult = decoder.Decode(myImg, decodingOptions);
     if (decodedResult != null)
       {
          //.. success
       } 
```

You can find documentation and code here
[http://platform.twit88.com/projects/show/mt-barcode](http://platform.twit88.com/projects/show/mt-barcode)

Sample code ..download here ..has demo code also
[http://platform.twit88.com/projects/mt-barcode/files](http://platform.twit88.com/projects/mt-barcode/files)

Code project here
[http://www.codeproject.com/Articles/20574/Open-Source-QRCode-Library](http://www.codeproject.com/Articles/20574/Open-Source-QRCode-Library)

# php - 离线使用 PHP api 从谷歌日历事件中检索

> ID：13056487
> 
> 赞同：1
> 
> 时间：2012-10-24T19:39:28.553
> 
> 标签：php, google-api, google-calendar-api

我有一个网站，用户希望有他们的谷歌日历所有的例子似乎都有日历的所有者每次都进行身份验证。有没有办法验证我的应用程序以获取用户日历数据并显示它？

在他们接受我的应用程序后，我试图保存`access_token`所有者的，但过了一会儿我收到以下错误：

```
The OAuth 2.0 access token has expired, and a refresh token is not available. Refresh tokens are not returned for responses that were auto-approved. 
```

这是我正在尝试的代码（顺便说一句，config.php 填写了所有 api 内容）

```
$client = new Google_Client();
$client->setUseObjects(true); 
$client->setApplicationName("My Unit Calendar");
$client->setAccessType('offline');
$client->setAccessToken($row['access_token'] ); //from the DB

$calService = new Google_CalendarService($client);

$events = $calService->events->listEvents( $row['google_cal_id'] ); //from the DB

echo "events--><pre>".print_r($events,true)."</pre>"; 
```

但我得到以下异常：

```
Google_AuthException-->The OAuth 2.0 access token has expired, and a refresh token is not available. Refresh tokens are not returned for responses that were auto-approved. 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-27T11:49:17.127

在从 Google 获取/设置某些内容之前，您必须检查访问令牌是否未过期并使用刷新令牌刷新它，这是您在第一次授权后获得的（它由 返回`$client->getAccessToken()`）。我想，你想做一些事情，像这样：

```
$client = new Google_Client();
$client->setUseObjects(true); 
$client->setApplicationName("My Unit Calendar");
$client->setAccessType('offline');
$client->setAccessToken($row['access_token'] ); //from the DB

$calService = new Google_CalendarService($client);

checkToken($client, $row['refresh_token']); // Added function

$events = $calService->events->listEvents( $row['google_cal_id'] );

// Check if Access token is expired and get new one using Refresh token
function checkToken($client) {
    if($client->isAccessTokenExpired()) {
        $client->refreshToken( $refresh_token );
    }
} 
```

您必须将第一次授权时获得的数据库刷新令牌存储在数据库中，并检查访问令牌是否未过期，如果过期 - 刷新（例如在您的`google_callback.php`文件中）：

```
// Initialize access to Google
$client = new Google_Client();
$client->setClientId( *** );
$client->setClientSecret( *** );
$client->setRedirectUri( *** );
$client->setAccessType( *** );

// Initialize access to Calendar as service
$service = new Google_CalendarService($client);

// If isset code - set into session
if (isset($_GET['code'])) {
    $client->authenticate($_GET['code']);
    $_SESSION['google-api']['access_token'] = $client->getAccessToken();
    header('Location: http://' . $_SERVER['HTTP_HOST'] . $_SERVER['PHP_SELF']);
}

// If in session is set token
if (isset($_SESSION['google-api']['access_token'])) {
    $client->setAccessToken($_SESSION['google-api']['access_token']);
}

// If Access Token Expired (uses Google_OAuth2 class), refresh access token by refresh token
if($client->isAccessTokenExpired()) {
    $client->refreshToken( /* Get refresh token from DB */);
}

// If client got access token successfuly - perform operations
$access_tokens = json_decode($client->getAccessToken());

if ($access_tokens) {
    // Update refreshToken and save data if refresh token is received (logged in now)
    if(isset($access_tokens->refresh_token)) {
        // Store in DB refresh token - $access_tokens->refresh_token
    }
} 
```

# java - 限制时间表的计时器？

> ID：13056491
> 
> 赞同：0
> 
> 时间：2012-10-24T19:39:51.767
> 
> 标签：java, timer, schedule

基于：[http ://docs.oracle.com/javaee/6/tutorial/doc/bnboy.html](http://docs.oracle.com/javaee/6/tutorial/doc/bnboy.html)

如何限制我想每分钟运行一次的时间表，但仅限于工作时间，比如上午 8 点到下午 4 点。`@Schedule(minute="*", hour="*")`会连续运行。如何设置开始和结束时间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T19:42:27.997

从您的链接，尝试`@Schedule(minute="*", hour="8-16")`

# html - 使用旧 CSS 进行 HTML5 渲染

> ID：13056495
> 
> 赞同：0
> 
> 时间：2012-10-24T19:40:00.913
> 
> 标签：html, css

我正在使用一个使用 HTML5 和 CSS3 的菜单组件。

该组件仅在我在页面开头设置标签时才有效。好的！

但是，当我设置这个标签时，旧的 CSS 样式停止工作。颜色和字体没有改变

CSS 声明如下：

```
<link type="text/css" rel="stylesheet" href="cbpp.css" /> 
```

CSS是：

```
textoouro_pequeno {
font-family: "Times New Roman", Times, serif;
font-style: italic;
color: DED7A8;
font-weight: bold;
font-size: 15px;
} 
```

使用css的链接如下：

```
<a href="http://www.cartedaparati.com.br" class='textoouro_pequeno'>Página Principal</a> 
```

有没有改变我应该在css中做什么？

非常感谢

安德烈

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T19:41:47.920

您的 css 声明目前没有引用一个类——您需要将其更新为

```
.textoouro_pequeno { 
```

或者

```
a.textoouro_pequeno { 
```

否则，它会尝试指向名为 textoouro_pequeno 的标记，但没有该名称的 HTML 标记。

另外，上面的评论是正确的：颜色前面需要“#”。

# asp.net - 复选框不会转到 asp:Label 的右侧

> ID：13056501
> 
> 赞同：1
> 
> 时间：2012-10-24T19:40:21.107
> 
> 标签：asp.net

我有一个包含 asp:Label 和 asp:Checkbox 的 div 我试图将标签放在复选框的左侧，但它不会放在这里。我希望这两个都在页面的右侧

```
<div>
    <asp:Label runat="server" style="float:right;" >
        Conclude Case File</asp:Label>
    <input type="checkbox" class="concludeCBox" id="concludeNoteCBox" runat="server"
        style="float:right;" />
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T19:44:21.060

```
<div style="float:right;">
    <asp:Label runat="server" style="float:left;padding-right:10px;" >
        Conclude Case File</asp:Label>
    <input type="checkbox" class="concludeCBox" id="concludeNoteCBox" 
        runat="server" style="float:left;" />
</div> 
```

这有效：http: [//jsfiddle.net/](http://jsfiddle.net/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T19:44:11.497

asp:Label 呈现为 SPAN。asp:checkbox 呈现为 INPUT。SPAN 和 INPUT 都不是块元素，因此浮点数不适用。我的建议是定义将它们更改为 BLOCK 的 CSS 类，然后根据需要定位它们。

另请记住，当您浮动时：正确的东西似乎会“向后”呈现。也就是说，第一个向右浮动的元素将在最右边，依此类推。因此，如果您首先选择复选框，请将其放在您的标记中。

# css - 使用和 为带边距的文本创建背景

> ID：13056509
> 
> 赞同：0
> 
> 时间：2012-10-24T19:40:54.350
> 
> 标签：css, html

我目前正在使用它作为`<span>`样式文本。

```
.tag {
    background-color:rgba(0,0,0,0.6);
    font-weight: bold;
    padding: 5px;
} 
```

但是，当我在它下面添加一些时，所有边框都相互接触。因为它是 a `<span>`，所以我不能指望它们能够移动，但是如果我使用 a`<div>`或设置文本所在的原始样式`<p>`，则背景会延伸到整行。

这是一种两全其美的方法吗？

**编辑**

按照`display: inline`建议，我的代码现在是：

```
.tag {
    background-color:rgba(0,0,0,0.6);
    font-weight: bold;
    padding: 5px;
    margin-top: 10px;
    display: inline;
} 
```

[您可以在此页面](http://oxford.guestvibe.com)的右侧看到它的显示方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T19:42:37.840

`display:block`并且`display:inline`是不同的......默认情况下DIV是块......跨度是内联的。但是，您可以使用`display:`属性更改默认行为

# php - N-1 的会话变量而不是 N

> ID：13056510
> 
> 赞同：0
> 
> 时间：2012-10-24T19:41:10.907
> 
> 标签：php, jquery

我在 jquery 中有一个计时器，我想在刷新页面时保留该值。我正在使用带有一些 ajax 的 php 会话变量。但是当我刷新时，它会保留 N-1 而不是 N 的值。

例子 ：

我在 20 秒刷新时没有任何反应。然后当我在 18 秒刷新时，输出的就是 20 秒

这是代码：

```
<?php
session_start();
if (isset($_GET['number'])) {
$_SESSION['timer']=$_GET['number'];
}
?>
<!DOCTYPE html>
<html>
    <head>

 <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
  <link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css" rel="stylesheet" type="text/css"/>
  <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>
  <script src="cookie.js"></script>

        <script>

$(window).unload(function() {

var number = $('#test').text();
alert(number);
          $.get('divb.php',{number:number},function(resultat){
                        return false;                                                       
                });

});         

$(document).ready(function(){

var numb = 30 ;                 
var numba = 100 ; 

function comptage() {

setTimeout(comptage,1000);
$('#test').html(numb);
$("#progressbar").progressbar({ value: numba });

numb -- ;
numba = numba - (numba/numb) ;

if (numb < 0 )
{

numb = 0 ; 
numba = 0 ;
}

};

comptage();

    });     

            </script>   

<style >

#affichage_point

{
position:relative;
    background-color:  #FFFFFF;
 border: 1px solid  #7375D8;
width:450px ; 
height:5px ; 
    margin-left: 200px;
    margin-top: 100px;

   padding:30px;

}

   #progressbar  {

  width : 400px ;

  }

  #progressbar > div {

  background: #7375D8;

  }

#bardivs {
    width:400px; 
     position:absolute;
      top:12px;
      left: 50px;

     }

#test {
    position:absolute;
    top:5px;
    left:5px;
}

</style>

   </head>

    <body>

    <div id = "affichage_point">
    <div id="bardivs">
    <div id="progressbar"></div>
    <div id="test"></div>
    </div>
    </div>

<?php   if (isset($_SESSION['timer'])) { ?>
     <div id ="r6"><?php echo $_SESSION['timer'] ?> </div> <br/> 
     <?php } ?>

        </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T19:50:15.753

只需使用以下代码：

所以我们只保留第一次访问时间并生成经过时间。无需将此变量存储在查询（GET）中

```
session_start();

if (!isset($_SESSION['start_time'])) {
    $_SESSION['start_time'] = time();
}

$elapsedTime = time() - $_SESSION['start_time']; 
```

但是您必须以某种方式重置 start_time，猜测用户何时决定重新开始

# xcode - 如果应用程序在 iphone 5 上运行，如何以编程方式定义

> ID：13056513
> 
> 赞同：1
> 
> 时间：2012-10-24T19:41:22.777
> 
> 标签：xcode, height, scale

我从事图像缩放工作。如何确定应用程序是否在 iphone 5 上运行？需要知道屏幕高度是960还是1136..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T20:30:36.003

```
#define IS_IPHONE5 ([[UIScreen mainScreen] bounds].size.height == 568)

if (IS_IPHONE5) {
    NSLog(@"iPhone 5");
} else {
    NSLog(@"iphone 4s or lower");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T19:51:45.250

检查屏幕高度

```
int height =  [[UIScreen mainScreen] bounds].size.height;
if(height > 480){
    NSLog(@"iPhone 5");
}
else{
    NSLog(@"iPhone 4, 4s....");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T19:43:55.677

您可能想用来[`+[UIScreen mainScreen]`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIScreen_Class/Reference/UIScreen.html)获取屏幕尺寸。

# amazon-web-services - Cloudwatch 警报，指定维度的哪个值触发它

> ID：13056516
> 
> 赞同：1
> 
> 时间：2012-10-24T19:41:29.997
> 
> 标签：amazon-web-services, amazon-cloudwatch

这可能有点难以解释，但我会尝试：

我们希望对具有维度的指标发出警报，但让警报识别它触发的维度的哪个值。我不知道这是否可能。

例如，假设我们有 CPUUtilization 指标，维度是实例 ID，我们在这个维度中有 3 个值：i-1、i-2、i-3。（我正在设计这个，我并不是专门考虑真正的 cloudwatch 指标）。

我想做的是定义一个警报，上面写着“如果维度中任何一个值的 CPU 利用率超过 50%，则发出警报并告诉我维度的值”。例如，如果 i-2 超过 50%，警报会告诉我是 i-2 超过了阈值。

我要求太多了吗？

（潜在的挑战是我宁愿在添加和删除资源时不必更改警报；我很高兴警报触发只是告诉我其中一个项目已超过阈值，但理想情况下，我们的运营人员会就像警报一样，可以准确地告诉他们哪个维度值超过了它，而无需查看其他地方。）

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T15:19:54.783

fwiw，AWS 论坛中一名 AWS 员工的回复表明这是不可能的，但他们理解为什么它可能有用。

[https://forums.aws.amazon.com/message.jspa?messageID=394466](https://forums.aws.amazon.com/message.jspa?messageID=394466)

# c++ - 如何将数据存储在 C++ 可执行文件的资源部分？

> ID：13056517
> 
> 赞同：0
> 
> 时间：2012-10-24T19:41:29.613
> 
> 标签：c++, resources, executable

我正在努力寻找有关如何使用可执行文件中的资源部分来存储和检索数据的任何有用资源。

如果有人愿意解释它并可能提供一些示例代码，我将不胜感激。

编辑 - 使用 Windows Visual c++ 2008。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T21:31:18.610

有一种可移植的方式来对可执行文件中的文件进行编码：您将文件编码为特定结构。前任：

```
// header MyFile.h
static const int fileSizeInBytes = 42;
extern const unsigned char myFileContents[fileSizeInBytes];

// source MyFile.cpp
const unsigned char myFileContents[fileSizeInBytes] =
{
    0x0A, 0x35, 0x25, //...
    // ...
    0xAB, 0xCD, 0xEF
}; 
```

您可以找到一些自动生成这些文件的工具（例如，使用 Qt，有 rcc）。

此外，这里有一个[更具体的答案](https://stackoverflow.com/questions/4072455/windows-pe-resources)（Windows，PE 格式）。也可以[看这里](http://irrlicht.sourceforge.net/forum/viewtopic.php?f=9&t=34291)（虽然是针对Irrlicht Engine的，但代码还是比较清晰小巧，容易理解）（还是PE格式）。我不知道 ELF 格式。

# xml - 消除 我从标准 MVC 4 WebApi 项目中得到以下响应； <arrayofproduct xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><produ 4="" 12="" 5631="" 问问题="" 2012-10-24t19:41:32.057="" 次="" this="" question="" shows="" research="" effort;="" it="" is="" useful="" and="" clear="" does="" not="" show="" any="" unclear="" or="" bookmark="" question.="" activity="" on="" post.="" 我从标准="" mvc="" webapi="" 项目中得到以下响应；="" <arrayofproduct="" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><product><id>1</id> <name>Tomato Soup</name> <category>Groceries</category> <price>1</price></product></produ></arrayofproduct> 我正在努力使它返回 <products><product><id>1</id> <name>Tomato Soup</name> <category>Groceries</category> <price>1</price></product></products> 我发现了许多对据称可以解决此问题的各种方法的参考，但都不起作用； 更改默认序列化程序不起作用。 为其创建客户序列化程序Product不起作用。 创建List<product>具有适当 XmlRoot 和 XmlElement 属性的新类不起作用。 添加Datacontract属性不起作用。 添加CollectionDatacontract属性不起作用。 这对其他人来说似乎很简单，除了我！ 尝试使用 XmlSeriazlier 代替： config.Formatters.XmlFormatter.UseXmlSerializer = true; 然后尝试定义一个派生自 Product 集合的类，并使用 [XmlRoot("Products")] 将元素名称从“ArrayOfProduct”重命名为“Products”。 例如，不使用 List，而是使用类 Products： [XmlRoot("Products")] public class Products : List <product>{ } public class Product { public int Id { get; set; } public string Name { get; set; } public string Category { get; set; } public double Price { get; set; } } ApiController 的动作： public Products Get() { return new Products() { new Product() { Id = 1, Name = "Tomato Soup", Category = "Groceries", Price = 1 } }; } xmlasp.net-mvcasp.net-mvc-4asp.net-web-api 4 1 回答 1 This answer is useful 16 尝试使用 XmlSeriazlier 代替： config.Formatters.XmlFormatter.UseXmlSerializer = true; 然后尝试定义一个派生自 Product 集合的类，并使用 [XmlRoot("Products")] 将元素名称从“ArrayOfProduct”重命名为“Products”。 例如，不使用 List，而是使用类 Products： [XmlRoot("Products")] public class Products : List <product>{ } public class Product { public int Id { get; set; } public string Name { get; set; } public string Category { get; set; } public double Price { get; set; } } ApiController 的动作： public Products Get() { return new Products() { new Product() { Id = 1, Name = "Tomato Soup", Category = "Groceries", Price = 1 } }; } 于 2012-10-24T20:41:01.617 回答 Related 1 matlab - 如何在 Matlab 中用白色替换边框？ 1 javascript - Jquery UI 嵌套手风琴的问题；标题选项干扰嵌套手风琴 8 android - Android : 检查手机是否为双卡 4 python - 使用 Python dulwich 检查哪些分支包含特定的 git commit sha？ 3 linux - 设置jenkins进程的umask 2 php - Zend 框架表单助手 1 coldfusion - Coldfusion的未来是否有保障？ 4 iphone - 获取 iPhone 的物理屏幕尺寸（以英寸为单位） 1 freemarker - 无法在 freemarker 模板中加载图像 1 html - CSS3 background-size:cover 显示意外行为 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</product></product></product>

> ID：13056518
> 
> 赞同：12
> 
> 时间：
> 
> 标签：xml, asp.net-mvc, asp.net-mvc-4, asp.net-web-api

我从标准 MVC 4 WebApi 项目中得到以下响应；

```
<ArrayOfProduct xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
<Product>
<Id>1</Id>
<Name>Tomato Soup</Name>
<Category>Groceries</Category>
<Price>1</Price>
</Product>
</ArrayOfProduct> 
```

我正在努力使它返回

```
<Products>
<Product>
<Id>1</Id>
<Name>Tomato Soup</Name>
<Category>Groceries</Category>
<Price>1</Price>
</Product>
</Products> 
```

我发现了许多对据称可以解决此问题的各种方法的参考，但都不起作用；

更改默认序列化程序不起作用。

为其创建客户序列化程序`Product`不起作用。

创建`List<Product>`具有适当 XmlRoot 和 XmlElement 属性的新类不起作用。

添加`Datacontract`属性不起作用。

添加`CollectionDatacontract`属性不起作用。

这对其他人来说似乎很简单，除了我！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-24T20:41:01.617

尝试使用 XmlSeriazlier 代替：

```
config.Formatters.XmlFormatter.UseXmlSerializer = true; 
```

然后尝试定义一个派生自 Product 集合的类，并使用 [XmlRoot("Products")] 将元素名称从“ArrayOfProduct”重命名为“Products”。

例如，不使用 List，而是使用类 Products：

```
[XmlRoot("Products")]
public class Products : List<Product> { }

public class Product
{
    public int Id { get; set; }
    public string Name { get; set; }
    public string Category { get; set; }
    public double Price { get; set; }
} 
```

ApiController 的动作：

```
 public Products Get()
    {
        return new Products()
        {
            new Product() 
            {
                Id = 1,
                Name = "Tomato Soup", 
                Category = "Groceries",
                Price = 1
            }
        };
    } 
```

# javascript - JavaScript 新手，如何进行空值检查？

> ID：13056520
> 
> 赞同：3
> 
> 时间：2012-10-24T19:41:43.413
> 
> 标签：javascript, null

我正在尝试学习 JavaScript。第一天！我想连接名字和姓氏。这就是我到目前为止所拥有的。它工作正常，但如果我不输入其中一个字段，它只会显示为`null`. 我该如何避免呢？我会在下面的代码中将该子句放在哪里？提前感谢您的帮助！

```
function ShowFullName()
{
    var varFirstName = Xrm.Page.getAttribute("lauren_firstname").getValue();
    var varLastName = Xrm.Page.getAttribute("lauren_lastname").getValue();
    Xrm.Page.getAttribute("lauren_name").setValue(varFirstName + " "  + varLastName);
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T20:04:35.133

您可以利用 JavaScript 中[所有变量都是*真*或*假*](http://www.sitepoint.com/javascript-truthy-falsy/)的事实。换句话说，每个变量都可以被强制（转换）为`true`or `false`。

`null`是*假*的，有内容的字符串是*真的*。这意味着：

```
var a = null;
var b = 'hello';

if (a) {
    // does not run
} else {
    // runs
}

if (b) {
    // runs
} 
```

您也可以使用其他类型的表达式，例如[三元表达式](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Conditional_Operator)或[逻辑 OR 运算符](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Logical_Operators#Logical_OR_%28.7C.7C%29)：

```
alert(a ? 'yes' : 'no'); // => no
alert(b ? 'yes' : 'no'); // => yes

alert(a || b); // => hello 
```

在这种情况下，逻辑 OR 是我们最有趣的选择。使用运算符时，会发生以下情况：

1.  如果左侧计算*出truthy*，则返回该值。
2.  否则，返回右侧求值的值。

在上面的例子中，`a`is `null`，所以它是*falsy*。表达式返回右侧，即 的值`b`。所以我们可以通过编写来利用这种行为`varFirstName || ''`，这将返回名字（如果有的话），或者如果它为空，则右侧给我们一个空字符串。

```
function ShowFullName() {
    var varFirstName = Xrm.Page.getAttribute("lauren_firstname").getValue();
    var varLastName = Xrm.Page.getAttribute("lauren_lastname").getValue();

    Xrm.Page.getAttribute("lauren_name").setValue(((varFirstName || '') + " " + (varLastName || '')).trim());
} 
```

我添加了一个调用以[`trim`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/Trim)从结果中删除多余的空格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T19:55:29.577

尝试这个：

```
function ShowFullName()
    var varFirstName = Xrm.Page.getAttribute("lauren_firstname").getValue();
    var varLastName = Xrm.Page.getAttribute("lauren_lastname").getValue();

    if(varFirstName == null || varFirstName.ToLower() == "null") { 
        varFirstName = "";
    }

    if(varLastName == null || varLastName.ToLower() == "null") { 
        varLastName = "";
    }

    Xrm.Page.getAttribute("lauren_name").setValue(varFirstName + " "  + varLastName);
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T19:45:28.640

您可以检查某些内容是否为空，例如：

```
if (obj == null) { 
  // do this 
```

}

所以像

```
if (varFirstName == null) { varFirstname = "";} 
```

这会将 firstName 设置为空字符串

# c - NPAPI 插件不总是被调用

> ID：13056521
> 
> 赞同：0
> 
> 时间：2012-10-24T19:41:44.323
> 
> 标签：c, networking, browser, http-headers, npapi

我已经使用 firebreath 编写了 NPAPI 插件。它适用于所有已注册的 mime 类型。该插件也为 video/x-flv 注册。现在，每当我在地址栏中键入响应包含 video/x-flv 内容类型的 url 时，都会调用我的插件并处理响应。但我观察到，当我们在浏览器中播放任何 flash 视频时，假设在 youtube 中，firefox 发送许多请求，其响应包含 video/x-flv 作为内容类型，但我的插件没有被调用。为什么这些请求对我的插件保持透明？vlc web 插件也可以观察到同样的情况，它也注册了 video/x-flv 内容类型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T04:14:48.870

Flash 视频的`<object>`标签有 type `application/x-shockwave-flash`，Flash 可以处理，而您的插件没有。如果 Flash 插件本身请求子资源，则这些子资源不会反过来调用插件（这甚至会做什么？）；NPAPI 并非旨在作为拦截网络流量的通用方式。

# mysql - 选择两个不同值中的最小值

> ID：13056523
> 
> 赞同：8
> 
> 时间：2012-10-24T19:41:54.933
> 
> 标签：mysql, sql, aggregate-functions

我正在做一个 sql 选择，我需要获取一个 ID 的所有最小记录。我的问题是，虽然我认为我的代码正常工作，但它通常会为其他列返回不正确的值，这显然是因为我未能使用必须支持我的聚合 min 函数。这是我的代码。

```
SELECT *
FROM example_students
INNER JOIN
(SELECT  id, student, test, subject, MIN(score), semester
FROM example_student_scores
WHERE studentid=94
GROUP BY studentid, test, subject) as scores
ON example_students.id=scores.studentid 
```

这就是我想要我的代码做的事情。

> 从示例表中选择学生 id#94 的每个不同测试和科目组合的最低分数

这是示例的两个（经过大量修改的）表（我在这里和我的代码中都更改了所有列名。

```
example_students
id    name
----+-----------+
94    Bob
1023  Thomas 
```

.

```
example_students_scores
id    studentId     test       subject     score       semester
----+-----------+-----------+-----------+-----------+-----------

0    94          quiz        math        46          fall
1    94          quiz        math        71          fall
2    94          quiz        math        63          winter
3    94          midterm     math        94          winter
4    94          midterm     science     72          fall
5    94          quiz        math        50          spring
6    94          final       math        76          spring
7    1023        quiz        math        6           spring
8    1023        quiz        math        52          winter
9    1023        quiz        science     68          fall
..* 
```

结果应该是

```
results
id    studentId     test       subject     score       semester
----+-----------+-----------+-----------+-----------+-----------
0    94          quiz        math        46          fall
3    94          midterm     math        94          winter
4    94          midterm     science     72          fall
6    94          final       math        76          spring 
```

问题是，我会为学期专栏（以及我在现场工作中拥有的所有其他专栏）得到错误的值。

鉴于这花了我很长时间才无处可寻，这里是创建两个示例数据库的 sql：

```
drop table if exists example_students;
drop table if exists example_students_scores;
create table example_students(
    id int(10) primary key,
    name char(25)
);
create table example_students_scores(
    id int(10) not null,
    studentId int(10) not null,
    test char(20),
    subject char(20),
    score int(10) not null default '0',
    semester char(20),
    primary key (id),
    index studentid (studentid)
);
insert into example_students values ('94','Bob');
insert into example_students values ('1023','Thomas');
insert into example_students_scores values ('0'    ,'94'          ,'quiz'        ,'math'        ,'46'          ,'fall');
insert into example_students_scores values ('1'    ,'94'          ,'quiz'        ,'math'        ,'71'          ,'fall');
insert into example_students_scores values ('2'    ,'94'          ,'quiz'        ,'math'        ,'63'          ,'winter');
insert into example_students_scores values ('3'    ,'94'          ,'midterm'     ,'math'        ,'94'          ,'winter');
insert into example_students_scores values ('4'    ,'94'          ,'midterm'     ,'science'     ,'72'          ,'fall');
insert into example_students_scores values ('5'    ,'94'          ,'quiz'        ,'math'        ,'50'          ,'spring');
insert into example_students_scores values ('6'    ,'94'          ,'final'       ,'math'        ,'76'          ,'spring');
insert into example_students_scores values ('7'    ,'1023'        ,'quiz'        ,'math'        ,'6'           ,'spring'); 
```

我将不胜感激任何指示或提示，在上线一周后才发现您的工作是错误的，这是非常尴尬的！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T19:52:21.043

在 MySQL 中，当您在 select 中而不是在 group by 中包含一个字段时，您会得到一个任意值。在这种情况下，您不能简单地将学期和考试 ID 包含在 group by 中，因为您不会得到您想要的结果。

为了做到这一点，您必须找到每个学生、测试、科目的最低分数，然后将其重新加入原始表格

```
SELECT * 
FROM   example_students_scores ess 
       INNER JOIN (SELECT studentid, 
                          test, 
                          subject, 
                          Min(score) score 
                   FROM   example_students_scores 
                   WHERE  studentid = 94 
                   GROUP  BY studentid, 
                             test, 
                             subject) scores 
               ON ess.studentid = scores.studentid 
                  AND ess.test = scores.test 
                  AND ess.subject = scores.subject 
                  AND ess.score = scores.score 
```

[SQL 小提琴演示](http://sqlfiddle.com/#!2/f9b73/14)

另一种不太传统的方法是在不等式上进行自反连接。

```
SELECT 
    s.*
FROM
    example_students_scores s
    LEFT JOIN example_students_scores s2
    ON s.studentID = s2.studentID
      AND s.test = s2.test
      AND s.subject = s2.subject
      AND s.score > s2.score
WHERE 
     s.studentid = 94 
     AND 
     s2.score is null 
```

[SQL 小提琴演示](http://sqlfiddle.com/#!2/f9b73/29)

如果您有兴趣创建一个决胜局，只需添加一个 or 条件

```
SELECT 
    s.*
FROM
    example_students_scores s
    LEFT JOIN example_students_scores s2
    ON s.studentID = s2.studentID
      AND s.test = s2.test
      AND s.subject = s2.subject
      AND (s.score > s2.score
           or s.id > s2.id ) -- Added for tie breaker

WHERE 
     s.studentid = 94 
     AND 
     s2.score is null 
```

[SQL Fiddle Demo](http://sqlfiddle.com/#!2/dee89/7)注意：我修改了数据以包含平局情况

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T19:53:14.367

这应该适合你：

```
select ss2.id score_id,
  ss2.studentid,
  ss1.test,
  ss2.subject,
  ss1.score,
  ss2.semester
from example_students st
left join
(
  select min(score) score, test, subject, studentid
  from example_students_scores
  group by test, studentid, subject
) ss1
  on st.id = ss1.studentid
left join example_students_scores ss2
  on st.id = ss2.studentid
  and ss1.score = ss2.score
  and ss1.test = ss2.test
where st.id = 94
order by ss2.id 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/276c6/13)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T20:03:56.970

如果两个 example_student_scores 恰好具有相同的分数，则需要避免输出中出现重复。Min() 会导致重复。

执行该任务的一个极好的方法是使用窗口函数和 row_number()。

如果窗口函数不可用，则以下模拟“组中第一个”功能的方法可能是：

```
SELECT * 
FROM example_students es
JOIN example_student_scores ss ON ss.studentid= es.id
WHERE es.id = 94
AND NOT EXISTS (
        SELECT *
        FROM example_student_scores nx
        WHERE nx.studentid = ss.studentid
        AND nx.test = ss.test
        AND nx.subject = ss.subject
        AND ( nx.score < ss.score
                -- tie breaker
                OR ( nx.score == ss.score AND nx.id < ss.id)
                )
        )
        ; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-24T19:54:27.890

试试这个解决方案：

```
select es.name, e.studentid, e.test, e.subject, e.score as MinScore, e.semester 
from  example_students_scores e
join (
       select studentid, test, subject, min(score) as score
       from example_students_scores
        group by studentid, test, subject) e2 on  e.studentid=e2.studentid
                                              and e.test=e2.test 
                                              and e.subject=e2.subject
                                              and e.score=e2.score
join example_students es on e.studentid = es.id 
```

## [SQL 小提琴](http://sqlfiddle.com/#!2/01d36/12/0)演示

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-24T20:34:18.333

具有相关子查询

```
select 
   * 
from 
   example_students_scores s1 
where 
   studentId = 94 and 
   score  = (select 
                 min(score)
             from 
                 example_students_scores s2 
             where
                 s2.studentId = s1.studentId and 
                 s2.subject = s1.subject and 
                 s2.test = s1.test 
             group by 
                 studentId, test, subject
            ) 
```

[使用 SQL Fiddle 演示](http://sqlfiddle.com/#!2/6ca85/1/0)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-24T19:57:59.097

只需 SELECT 和 GROUP BY 您需要的列：

```
SELECT *
FROM example_students
INNER JOIN
(SELECT studentid, test, subject, MIN(score), semester
FROM example_student_scores
GROUP BY studentid, test, subject,semester) scores
ON example_students.id=scores.studentid
WHERE studentid=94 
```

当您对列使用聚合函数时，SELECT 子句中的所有其他属性必须出现在 GROUP BY 子句中。

其余的查询对我来说听起来不错。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-24T19:54:33.943

以下查询是否符合您的要求？

```
 SELECT  test, subject, MIN(score) as minscore
  FROM example_student_scores
  WHERE studentid=94
  GROUP BY test, subject 
```

# c - 如何在流上部分发送文本文件？

> ID：13056526
> 
> 赞同：1
> 
> 时间：2012-10-24T19:42:00.493
> 
> 标签：c, sockets, file-io

我是 C 套接字编程的新手，我想构建一个服务器/客户端应用程序，其中客户端从文本文件（46mb）读取部分数据并将其发送到服务器，我希望服务器打印接收到的部分文件到控制台。

我做错了吗？服务器此时将空行打印到控制台。我不知道为什么：/

这是客户端：

```
#include <stdio.h>
#include <sys/types.h>
#include <sys/socket.h>
#include <netinet/in.h>
#include <netdb.h>

void error(char *msg) {
  perror(msg);
  exit(1);
}

int main( int argc , char *argv[] ) {
  int sockfd , port_no , n;
  struct sockaddr_in server_addr;
  struct hostent *server;
  char buffer[256];
  FILE *fp;

  if(argc < 3) {
    fprintf(stderr , "usage %s hostname port" , argv[0] );
    exit(0);
  }

  port_no = atoi( argv[2] );
  sockfd = socket( AF_INET , SOCK_STREAM , 0);
  if( sockfd < 0 )
    error("ERROR opening socket");

  server = gethostbyname(argv[1]);
  if( server == NULL ) {
    fprintf(stderr , "ERROR, no such host.");
    exit(0);
  }

  bzero( (char *) &server_addr , sizeof(server_addr) );
  server_addr.sin_family = AF_INET;
  bcopy( (char *)server -> h_addr , (char *) &server_addr.sin_addr.s_addr , server -> h_length );
  server_addr.sin_port = htons(port_no);

  if( connect( sockfd , (char *) &server_addr , sizeof(server_addr)) < 0 ) {
    error("ERROR , connecting");
  }

  bzero(buffer , 256); 

  if( (fp = fopen("text.txt" , 'r')) != NULL ) {
    while(1) {
      if( (fgets(buffer , 255 , fp)) != NULL ) {
        n = write( sockfd , buffer , strlen(buffer) );
        if( n < 0 ) {
          error("ERROR writing to socket");
        }
      }
    }
    fclose(fp);
  }

} 
```

这是服务器：

```
#include <stdio.h>
#include <sys/types.h>
#include <sys/socket.h>
#include <netinet/in.h>

void error(char *msg) {
  perror(msg);
  exit(1);
}

int main(int argc , char *argv[]) {
  int sockfd , newsockfd , port_no , cli_length , n; 
  char buffer[256];
  struct sockaddr_in server_addr , client_addr;

  if(argc < 2) {
    fprintf(stderr , "ERROR , no port provided!");
    exit(1);
  }

  sockfd = socket(AF_INET , SOCK_STREAM , 0);

  if( sockfd < 0 )
    error("ERROR opening socket.");

  bzero( (char *) &server_addr , sizeof(server_addr) );
  port_no = atoi(argv[1]);

  server_addr.sin_family = AF_INET;
  server_addr.sin_port = htons( port_no );       
  server_addr.sin_addr.s_addr = INADDR_ANY;

  if( bind( sockfd , (struct sockaddr *) &server_addr , sizeof(server_addr)) < 0 ) {
    error("ERROR on binding.");
  }

  listen(sockfd , 5);

  cli_length = sizeof(&client_addr);
  newsockfd = accept( sockfd , (struct sockaddr *) &client_addr , &cli_length );
  if (newsockfd < 0 )
    error("ERROR on accept.");

  bzero(buffer , 256);
  while(1) {
    n = read(newsockfd , buffer , 255);
    if( n < 0 ) {
      error("ERROR reading from socket");
    }
    printf(" %s " , buffer);
  }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T22:37:18.077

我认为你的问题是缓冲区的 NULL 终止。尝试

```
printf( "%.256s" , buffer ); 
```

如果缓冲区可以包含合法的 \0 字符，我会尝试一次打印一个字符：

```
{ 
   for (int i=0; i<256; i++)
       printf("%c" , buffer[i]);
} 
```

乔金

# c - C - 如何通过引用将字符串数组传递给另一个函数？

> ID：13056527
> 
> 赞同：1
> 
> 时间：2012-10-24T19:42:22.913
> 
> 标签：c

这是我的代码：

```
void doSomething(){
    char arr[5][10];
    arr[1] = "Bob";
    arr[2] = "Steve";
    arr[3] = "Tim";
    arr[4] = "Ruth";
    arr[5] = "Heather";
    init(arr);

void init(char *array){
    int i;
    newArr[5][10];
    for(i=0; i<5; i++){
        newArr[i] = *(array + i);
    }
} 
```

我不断收到错误消息：

> 警告：从不兼容的指针类型传递 'init' 的参数 1 [默认启用] 注意：预期的 'char *' 但参数的类型是 'char (* )[10]'</p>

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T19:47:09.093

Your data is a 2-dimensional array, so your function needs to take an array of pointers account for this (i.e. `char (*array)[10]` or `char array[][10]`).

Also, in your init function, you can't just copy the strings in to arrays, you either need to copy all the data (as strings with a `strcpy` or character by character with a second loop) or just copy the pointers to the strings (so make your `newArr` variable a `char *newArr[5]`).

If none of this makes any sense, then you should probably brush up on your C Pointer knowledge by reading through the [C FAQ on this topic](http://c-faq.com/aryptr/index.html).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T19:50:53.340

1）在C语言中没有字符数组赋值，`strcpy()`数组从0而不是1开始：

```
#include <string.h>
void doSomething(){
    char arr[5][10];
    strcpy(arr[0], "Bob");
    strcpy(arr[1], "Steve");
    strcpy(arr[2], "Tim");
    strcpy(arr[3], "Ruth");
    strcpy(arr[4], "Heather");
    init(arr);
} 
```

2)`init()`获取一个指向 char 数组的指针；`newArr[][]`未声明，添加`char`. `init()`在源代码的开头添加声明。最后但并非最不重要的一点：再次用`strcpy()`.

```
void init(char (*array)[10]);

void doSomething() {...}

void init(char (*array)[10]){
    int i;
    char newArr[5][10];
    for(i=0; i<5; i++){
        strcpy(newArr[i], array[i]);
    }
} 
```

最后，这可能很无聊，但请查看[https://stackoverflow.com/tags/c/info](https://stackoverflow.com/tags/c/info)和[C 常见问题解答](http://c-faq.com/)并拿起一本书。这将为您提供比我更好和更长的服务。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-24T19:45:31.310

那不是错误。它是一个警告。如您所见，您`arr`在 doSomething 中是一个双数组（可以使用双指针表示），但在 init 中您只使用一个指针。将其更改为双指针`**array`或`array[][]*`

# objective-c - IBAction 不会拖到 UISearchBar

> ID：13056529
> 
> 赞同：1
> 
> 时间：2012-10-24T19:42:31.890
> 
> 标签：objective-c, ios, xcode, interface-builder, ibaction

所以我在我的标题中定义了一个 IBAction，在我的 main 中实现了它，我可以在 IB 中看到它 - 但是，当我拖动 UISearchBar 时，它没有连接。

这是我的标题代码：

```
#import <UIKit/UIKit.h>

@class DetailViewController;

@interface CustomerListViewController : UITableViewController
{
}

-(IBAction)filterTableData:(UISearchBar *)filterBar;

@property (strong, nonatomic) DetailViewController *detailViewController;
@property (retain) IBOutlet UISearchBar *searchBar;
@property (strong, nonatomic)NSArray *custs, *workingSet;

@end 
```

这是我的实现方法：

```
-(IBAction)filterTableData:(UISearchBar *)filterBar {

    //filter our search results
    NSString *filter;
    if (filterBar.text)
        filter = [filterBar.text stringByAppendingString:@"*"];
    else
        filter = @"*";

    NSPredicate *predicate = [NSPredicate predicateWithFormat:@"SELF LIKE[cd] %@", filter];
    self.workingSet = [self.custs filteredArrayUsingPredicate: predicate];

    [self.tableView reloadData];
} 
```

这是一张 IB 实际看到该方法并允许将其拖动的图像，而我尝试将其拖动到搜索栏但未成功：

[http://i.imgur.com/QLPMT.png](http://i.imgur.com/QLPMT.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T19:51:42.837

UISearchBar 不是 UIControl 的子类，这意味着您不能添加要在事件发生时调用的方法。

您要做的是将您的视图控制器设置为[UISearchBarDelegate](http://developer.apple.com/library/ios/#documentation/uikit/reference/UISearchBarDelegate_Protocol/Reference/Reference.html)并使用以下方法而不是您的`filterTableData:`方法。

`- (void)searchBar:(UISearchBar *)searchBar textDidChange:(NSString *)searchText`

然后在 IB 中，您需要单击并从搜索栏拖动到文件所有者并选择委托属性。

# java - 创建对象的列表/数组列表并对列表进行排序（Java）

> ID：13056531
> 
> 赞同：3
> 
> 时间：2012-10-24T19:42:47.067
> 
> 标签：java, arrays, object, arraylist

> **可能重复：**
> [根据姓名对联系人的 ArrayList 进行排序？](https://stackoverflow.com/questions/1814095/sorting-an-arraylist-of-contacts-based-on-name)

我有一个学生对象，然后创建 ArrayList 并将学生添加到列表中。

```
ArrayList<Student_Object> studentsList = new ArrayList<>(); 
```

现在，我想按 studentId fleid 对列表进行排序。我该怎么做？

有更好的解决方案吗？谢谢

* * *

所以我在 Student _Object 类中有这个方法

类是：

```
class Student_Object implements Comparator<Student_Object> 
```

方法是：

```
public int compare(Student_Object student1, Student_Object student2){
    String student1TUID = student1.getTUID();        
    String student2TUID = student2.getTUID();

return student1TUID.compareTo(student2TUID);   

} 
```

我从哪里运行语句？

```
Collections.sort(studentsList); 
```

如果我从我的主类运行它，我会在 netbeans 中得到错误：

```
no suitable method found for sort(ArrayList<Student_Object>)
    method Collections.<T#1>sort(List<T#1>,Comparator<? super T#1>) is not applicable
      (cannot instantiate from arguments because actual and formal argument lists differ in length)
    method Collections.<T#2>sort(List<T#2>) is not applicable
      (inferred type does not conform to declared bound(s)
        inferred: Student_Object
        bound(s): Comparable<? super Student_Object>)
  where T#1,T#2 are type-variables:
    T#1 extends Object declared in method <T#1>sort(List<T#1>,Comparator<? super T#1>)
    T#2 extends Comparable<? super T#2> declared in method <T#2>sort(List<T#2>)
----
(Alt-Enter shows hints) 
```

* * *

让它工作。我使用**Collections.sort(studentsList, new Student_Object());**

谢谢大家

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-24T19:43:59.297

一种方法是：

编写一个`comparator`和覆盖`compare`方法。然后通过比较器使用[Collections.sort() 。](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#sort%28java.util.List,%20java.util.Comparator%29)

例子：

```
class StudentComparator implements Comparator<Student> {

    public int compare(Student stud1, Student stud2){

        int stu1ID = stud1.getId();       
        int stu2ID = stud2.getId();

        if(stu1ID > stu2ID)
            return 1;
        else if(stu1ID < st21ID )
            return -1;
        else
            return 0;    
    }

} 
```

另一种风味可能是：

```
 class StudentComparator implements Comparator<Student> {

        public int compare(Student stud1, Student stud2){

            int stu1ID = stud1.getId();       
            int stu2ID = stud2.getId();

           return stud1ID-stu2ID;
        }

    } 
```

本[教程](http://www.javadeveloper.co.in/java-example/java-comparator-example.html)可能会对您有所帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-24T19:46:37.487

要进行排序，您需要实现`Comparable`接口。我还强烈建议您在其中实现 equals 和 hashCode。例子：

```
public class Student implements Comparable  
{  
    private String name;  
    private int id;  
    ...

    public int compareTo(Student otherStudent)  
    {  
       if(this.id < otherStudent.id)  
       {  
          return -1;
       }  
       else if(this.id > otherStudent.id)  
       {  
           return 1;
       }  
        else{
           return 0;  
        }  

    }  
} 
```

# buildr - 是否有使用 buildr 通过 ossrh 上传到 maven Central 的配方？

> ID：13056533
> 
> 赞同：1
> 
> 时间：2012-10-24T19:42:47.693
> 
> 标签：buildr

使用 maven，可以通过 ossrh 将工件推送到中央；除了核心 jar 的常用 maven-deploy-plugin 之外，这还需要 GPG 签名、源代码和 javadocs。

有没有办法用builder来安排这一切？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T12:02:13.973

我们在 Apache ODE 中执行此操作，以便工件符合 Apache 的发布策略并被 Nexus 接受。我认为 OSSRH 的工作方式类似。

ODE 中使用的 GPG 任务基于[Buildr How-to 文档](https://cwiki.apache.org/confluence/display/BUILDR/How+to+upload+signed+artifacts+with+GPG)，但略微扩展了工作。你可以在[这里](https://github.com/apache/ode/blob/trunk/tasks/gpg.rake)找到它。要在上传之前对所有工件进行签名，只需将一个添加`gpg_sign_before_upload`到您的顶级项目（参见[此处](https://github.com/apache/ode/blob/trunk/Rakefile#L625)的示例）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-28T10:45:09.490

我刚刚为我的几个项目实施了这个。这是我必须做的。

Buildr 包含一个内置的 gpg 插件，但是当工件没有 pom 时它似乎有一个错误，所以我不得不放入一个[补丁](https://github.com/realityforge/gelf4j/blob/master/tasks/gpg_patch.rake)来修复这个问题。然后我创建了一个自定义插件，它允许我生成一个 pom 作为构建过程的一部分，[这里](https://github.com/realityforge/gelf4j/blob/master/tasks/custom_pom.rake)提供。然后我只需将一些元数据添加到主构建文件中，如此[处所示](https://github.com/realityforge/gelf4j/blob/master/buildfile#L12-L18)。所以忽略错误修复补丁和自定义插件。下面演示了添加到构建文件所需的代码

```
pom.add_apache2_license
pom.add_github_project('realityforge/gelf4j')
pom.add_developer('realityforge', 'Peter Donald', 'peter@realityforge.org', ['Developer'])
pom.optional_dependencies.concat [:getopt4j, :slf4j_api, :log4j, :logback_core, :logback_classic]

...

package(:jar)
package(:sources)
package(:javadoc) 
```

然后，我倾向于将发布位置的配置直接添加到构建文件中，或者更有可能添加到与构建文件位于同一目录中的 _buildr.rb 文件中，其中包含类似于以下代码

```
repositories.release_to[:url] = 'https://oss.sonatype.org/service/local/staging/deploy/maven2/'
repositories.release_to[:username] = 'username'
repositories.release_to[:password] = 'password' 
```

希望有帮助。

# c# - 在 C# WinForms 应用程序的文本框中查找 2 个已知值之间的字符串

> ID：13056536
> 
> 赞同：-1
> 
> 时间：2012-10-24T19:42:58.343
> 
> 标签：c#

**示例：**我想在名为 target 的字符串中查找 1234：

```
string target = "55555>>><<[1234]<>>>788"; 
```

如何在不知道 []、之前 [ 或之后 ] 之间有多少位的情况下找到 [,] 之间的数字？我的项目需要一个小代码。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T19:46:37.363

```
using System.Text.RegularExpressions;

...

// Declare target
string target = "55555>>><<[1234]<>>>788";

// Declare the regular expression
Regex regex = new Regex(
    @"(?<=\[)[0-9]+(?=\])",
    RegexOptions.None
);

// Use regex to get value
string number = regex.Match(target).Value;

// Convert to number (optional)
int value = 0;
int.TryParse(number, out value);

// Note: value will be 0 if no matches are found. 
```

What this regex does:

The first bit `(?<=\[)` is a "look behind". It ensures that a bracket proceeds the numbers. You have to escape it with a backslash because brackets are special characters in a regex.

The middle bit `[0-9]+` looks for one or more of any digit. If you wanted zero or more, you could use a star instead of a plus: `[0-9]*`

The last bit `(?=\])` is a "look ahead" similar to the "look behind". Again the bracket is escaped.

The output will be only the numbers without the brackets but only when the numbers are surrounded by brackets.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T19:47:13.547

This sounds like a job for regular expressions

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Text.RegularExpressions;

namespace ConsoleApplication4
{
    class Program
    {
        static void Main(string[] args)
        {
            string str = "55555>>><<[1234]<>>>788";

            Regex r = new Regex(@"\[(\d*)\]");
            Match match = r.Match(str);
            Console.WriteLine(match.Groups[1].Value);
        }
    }
} 
```

the above code has the following output

```
1234
Press any key to continue . . . 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T19:48:01.463

Here is a regex which does the trick:

```
Console.WriteLine (Regex.Match("55555>>><<[1234]<>>>788", @"(?:\[)(?<Data>[^\]]+)(?:\])").Groups["Data"].Value);
// 1234 is outputed 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T19:55:41.993

以下应该足够了：

```
var match = Regex.Match("55555>>><<[1234]<>>>788", ".*\[(.+)\].*");

var value = match.Groups[1].Value; //= "1234" 
```

如果 value 应该始终是一个数字，您可以在其他答案中替换为`(.+)`。`(\d+)`

`.+`表示任何字符
`\d`表示任何数字 0 到 9。

# comparison - grep -v 在 solaris 10 中不起作用

> ID：13056537
> 
> 赞同：2
> 
> 时间：2012-10-24T19:42:59.157
> 
> 标签：comparison, grep

我有两个文件：

文件 1 包含

```
Roger 
Roger
Bob
Bob
Elliot
Matt 
```

文件 2 包含

```
Roger
Bob 
```

我需要比较两个文件并将不匹配的（Elliot 和 Matt）重定向到另一个文件。

我在 Solaris 10 中尝试了以下操作，但无法正常工作，但在 Linux 中可以正常工作：

```
grep -v File2 File1 
```

任何帮助将不胜感激，因为我已经在这个问题上浪费了很多时间。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T19:58:06.463

如果你`/usr/xpg4/bin/grep`在 11 上和我一样`Solaris`：

```
$ cat /tmp/file
Roger 
Roger
Bob
Bob
Elliot
Matt

$ cat /tmp/filter
Roger
Bob

$ /usr/xpg4/bin/grep -f /tmp/filter -v /tmp/file
Elliot
Matt 
```

# android - 无法获取 google play 授权的刷新令牌

> ID：13056538
> 
> 赞同：4
> 
> 时间：2012-10-24T19:43:02.603
> 
> 标签：android

我无法获得 Google Play 授权的刷新令牌。

我正在按照 Google Play Android 开发者 API 授权页面中的说明进行操作。我创建了一个 OAuth 2.0 客户端 ID。我成功获得了客户 ID。我将所有信息放在 URI 中以获取刷新令牌，我发送请求，系统提示我“允许访问”。当我单击“允许访问”时，出现无法连接错误。这是我的 URI：

[https://accounts.google.com/o/oauth2/auth?scope=https://www.googleapis.com/auth/androidpublisher&response_type=code&access_type=offline&redirect_uri=https://localhost/oauth2callback&client_id=345674341799.apps.googleusercontent。 com](https://accounts.google.com/o/oauth2/auth?scope=https://www.googleapis.com/auth/androidpublisher&response_type=code&access_type=offline&redirect_uri=https://localhost/oauth2callback&client_id=345674341799.apps.googleusercontent.com)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-13T00:49:50.293

当您创建“web”类型的客户端 ID 并调用 /o/oauth2/auth 服务时，您的用户代理 (/browser) 将尝试重定向 URI。如果它像您示例中的那样是假的（这是默认设置），那么用户代理当然会失败。授权代码仍将是失败 URL 的参数部分，但可能并不明显。

有了授权码，您需要使用正确字段的 POST 调用 /o/oauth2/token 服务。我不愿将您指向特定的 Google 说明页面，因为它们可能是出了名的不完整、矛盾和过时，但这是对整个过程的合理概述[https://developers.google.com/accounts/docs/OAuth2WebServer](https://developers.google.com/accounts/docs/OAuth2WebServer) .

要记住的一件事是，对给定客户端 ID 的第一次成功调用 /o/oauth2/token 将返回难以捉摸的刷新令牌，但除非您重试 /o/oauth2/auth 服务，否则它不会再次返回提供 URL 参数approval_prompt=force。那一点信息是您阅读本文的奖励，并将为您节省数小时毫无意义的挫败感。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T21:25:16.827

无法连接错误包含“代码”参数值。该值应用作对[https://accounts.google.com/o/oauth2/token](https://accounts.google.com/o/oauth2/token)的 POST 请求中的“代码”参数值。

# r - 如何遍历数据表中的列对以在 R 中创建新列

> ID：13056539
> 
> 赞同：0
> 
> 时间：2012-10-24T19:43:05.697
> 
> 标签：r, loops, paste, complex-numbers

我目前有以下形式的复数数据：

```
r1,i1,r2,i2,...
-1.74550E-0001,5.04828E-0002,7.37643E-0002,-1.70416E-0001,...
... 
```

并希望从这些复数的模中创建新列，我试图通过以下方式做到这一点：

```
data=read.table("umatrix.txt", header=T, sep=",")

for (i in 1:43){
  data$paste("m",toString(i), sep = "") = sqrt((data$paste("r",toString(i), sep = "")^2)+(data$paste("i",toString(i), sep = "")^2))
  } 
```

但这会得到错误：

> 错误：尝试应用非函数

大概是因为 paste() 不能以这种方式与 datatable$column 语法一起使用。一个人将如何实现这一目标？

编辑：没关系，使用其他语法修复，如下所示：

```
for (i in 1:43){
    data[1:43,paste("m",toString(i), sep = "")] = sqrt((data[1:43,paste("r",toString(i), sep = "")]^2)+(data[1:43,paste("i",toString(i), sep = "")]^2))
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T20:01:09.073

要提取列，您可以使用：

```
dat$column 
```

或者：

```
dat["column",] # Notice the " 
```

的结果`paste`是一个字符串，因此您需要使用第二种形式，即：

```
dat[paste(...),] 
```

当您像以前一样使用第一种形式时：

```
dat$paste(...) 
```

R 正在寻找一个名为 的函数`dat$paste`，该函数不存在导致错误。

注意`dat$column`实际上等于`dat[["column"]]`。这种形式将列提取为向量。或者，该`dat["column",]`表单生成的不是向量，而是`data.frame`一列。因此，最后一种形式也可用于提取多列：`dat[c("a","b"),]`

# android - 安卓|| 获取当前的谷歌地图路线信息

> ID：13056540
> 
> 赞同：5
> 
> 时间：2012-10-24T19:43:07.087
> 
> 标签：android, google-maps

想象一下用户在 Google 地图应用程序中选择路线的场景。然后他们开始沿着这条路线走。

是否有可以让您获取当前路线信息的 Google Maps API 功能？例如路线起点、路线终点、预计到达时间等？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T21:41:30.700

简短的回答：没有。

长答案：

本身没有官方的“API”，但有*办法*做到这一点。 [这](http://code.google.com/p/j2memaprouteprovider/source/browse/#svn/trunk/J2MEMapRouteAndroidEx/src/org/ci/geo/route/android)是一个谷歌代码项目，[这](http://csie-tw.blogspot.in/2009/06/android-driving-direction-route-path.html)是一个据说可以工作的例子，但英语很难理解。

相对于 Android/Java API，您始终可以使用他们的 Web API，众所周知，它在交通、行车路线和其他功能方面具有更好的灵活性。这样做的缺点是您必须将其嵌入到`WebView`或类似的 Web 界面中。

此外，还有一些地方可以将行车路线生成到 KML 文件中。 [这](http://blog.synyx.de/2010/06/routing-driving-directions-on-android-part-1-get-the-route/)是一篇关于从 OpenStreetMap 获取路线的精彩博文系列，[这里](http://wiki.openstreetmap.org/wiki/Main_Page)是官方的 OpenStreetMap wiki。这应该足以让您入门；您还可以在 Google 上找到比我在此处链接的更多的网站。

祝你好运！

# c - 结构数组作为参数传递给 read() 问题

> ID：13056541
> 
> 赞同：0
> 
> 时间：2012-10-24T19:43:22.140
> 
> 标签：c, file-io

我有一个结构定义为

```
struct my_struct {
    struct hdr_str hdr;
    char *content; 
}; 
```

我试图通过将其全部嵌套为 read() 的参数来传递 my_struct 中第一个元素的内容

我所拥有的是

```
struct my_struct[5]; 
```

读定义为

```
ssize_t read(int fd, void *buf, size_t count); 
```

我试图通过它作为

```
read(fd, my_struct[0].content, count) 
```

但我收到 -1 作为返回值，带有 errno = EFAULT（错误地址）

知道如何将 read 读入结构数组中的 char * 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T19:46:04.260

You'll need to allocate memory for `read` to copy data into.

If you know the maximum size of data you'll read, you could change my_struct to

```
struct my_struct {
    struct hdr_str hdr;
    char content[MAX_CONTENT_LENGTH]; 
}; 
```

where `MAX_CONTENT_LENGTH` is #define'd by you to your known max length.

Alternatively, allocate `my_struct.content` on demand once you know how many bytes to read

```
my_struct.content = malloc(count);
read(fd, my_struct[0].content, count); 
```

If you do this, make sure to later use `free` on my_struct.content to return its memory to the system.

# php - 文本未在 SVG 中排列

> ID：13056543
> 
> 赞同：2
> 
> 时间：2012-10-24T19:43:34.080
> 
> 标签：php, svg, gd, kerning

# 问题

如何正确匹配 PHP (5.2.17) 中 GD 库的字距调整与 SVG (1.1)？

## 问题

PNG 和 SVG 文件文本不相同。字距调整似乎已关闭。

## 情况

我有一个 Web 应用程序，它从一些文本和位置数据创建 SVG 文件和图像文件 (PNG)。

目前，这两种实现都“工作”，就像所有东西都在创建中一样。SVG 文件正常工作，PNG 正常工作。我遇到的问题是文本没有对齐。字距调整似乎已关闭。

PNG 将成为我们的基准（我们试图复制的内容）。

## 我想要的是

我希望“line”中的“l”与第二行的最后一个“L”对齐。 ![错误的可视化](../Images/f6e89443224ba3152bb5ce791b305c5a.png)

## 我试过的

*   我确保我对 SVG 和 PNG 文件使用相同的字体。
*   我用 SVG 对字体进行了 base64 编码，以确保它是相同的字体
*   我牺牲了一只山羊。

## 额外的

*   PHP 将提升到 5.3，在我尝试过的所有 PHP 5.3 服务器上，我有相同的输出。
*   SVG 版本也可以更改。
*   SVG 可以使用分组和视图框。我只是还没有牢牢掌握它们。

**演示**

[http://resurrectionwebdesign.com/demo/demo_text.php](http://resurrectionwebdesign.com/demo/demo_text.php)

**来源**
好的，这里有很多来源。我试图尽可能地简化它；然而，剩下的东西是必要的（至少为了让每个人都可以使用它）。

```
<?php
   // Prepare Background Image
   $image_width  =  300;
   $image_height =  200;
   $bg           = imagecreatetruecolor($image_width, $image_height);

   // Make it transparent
   imagesavealpha($bg, true);
   $transparent_color = imagecolorallocatealpha($bg, 0, 0, 0, 127);
   imagefill($bg, 0, 0, imagecolorallocatealpha($bg, 0, 0, 0, 127));

   // Prepare black for the color to use
   $black = imagecolorallocate($bg, 0x00, 0x00, 0x00);

   // Prepare two lines of text.
   $line1['text']     = "Multiple words in a line.";
   $line1['height']   = 22;
   $line1['width']    = 233;
   $line1['pt']       = 17;
   $line1['font']     = "ARIAL.TTF";
   $line1['font_fam'] = 'Arial';
   $line1['x']        = 24;
   $line1['y']        = 94;
   $line1['angle']    = 0;

   $line2['text']     = "Last up last L";
   $line2['height']   = 25;
   $line2['width']    = 160;
   $line2['pt']       = 20.25;
   $line2['font']     = "ARIAL.TTF";
   $line2['font_fam'] = 'Arial';
   $line2['x']        = 68;
   $line2['y']        = 118;

   imagettftext( $bg, 
                 $line1['pt'], 
                 $line1['angle'], 
                 $line1['x'],
                 $line1['y'],
                 $line1['color'],
                 $line1['font'],
                 $line1['text']);

   imagettftext( $bg, 
                 $line2['pt'], 
                 $line2['angle'], 
                 $line2['x'],
                 $line2['y'],
                 $line2['color'],
                 $line2['font'],
                 $line2['text']);

   // Save the PNG file.
   $im = imagepng($bg, 'text_align.png');
   imagedestroy($bg);

   // Prepare SVG
   $svg = <<< EOT
       <svg xmlns="http://www.w3.org/2000/svg"
         xmlns:xlink="http://www.w3.org/1999/xlink"
         xmlns:ev="http://www.w3.org/2001/xml-events" 
         width="{$image_width}px" 
         height="{$image_height}px"
         baseProfile="full"
         version="1.1">
EOT;

   // Line 1
   $svg .= "\r\n\t<text x='{$line1['x']}' y='{$line1['y']}'";
   $svg .= "font-size='{$line1['pt']}pt'  font-family='{$line1['font_fam']}'";
   $svg .= "fill='rgb(0,0,0)'>{$line1['text']}</text>";
   // Line 2
   $svg .= "\r\n\t<text x='{$line2['x']}' y='{$line2['y']}'";
   $svg .= "font-size='{$line2['pt']}pt'  font-family='{$line2['font_fam']}'";
   $svg .= "fill='rgb(0,0,0)'>{$line2['text']}</text>";

   // Close SVG
   $svg .= "\r\n</svg>";

   $file = fopen('text_align.svg', 'w');
   fwrite($file, $svg);
   fclose($file);   

   if(isset($_GET['download']) && !empty($_GET['download']))
   {
      if($_GET['download'] == 'SVG')
      {
         $file   = 'text_align.svg';
         $header = "Content-type: image/svg+xml";
      }
      elseif($_GET['download'] == 'IMAGE')
      {
         $file   = 'text_align.png';
         $header = "Content-type: image/png";
      }
      if(isset($header))
      {
         header($header);
         header('Content-Disposition: attachment; filename="'.$file.'"');
         echo file_get_contents($file);
      }
   }
   else
   {
?>   
<!doctype html>
<html>
   <body>
      Download Image: <a href="demo_text.php?download=IMAGE">Text Align PNG</a>
      <br /><img src='text_align.png' /><br />
      Download SVG: <a href="demo_text.php?download=SVG">Text Align SVG</a>
      <div style="border: 1px dotted blue;"><?echo $svg ?></div>
   </body>
</html>
<?
   }
?> 
```

## 更新/进展

**更新 1**

我不确定它是否与服务器上生成的图像以及客户端上呈现的文本有关。我目前正在运行 Windows 构建，但如果必须，我将抛出一个 CentOS VM，并在 VM 上测试映像以及从 VM 中的浏览器查看映像的样子。

**更新 2**

我已经尝试过以我知道的各种方式嵌入字体。到目前为止，结果都是一样的。我会考虑尝试转换，看看是否有效。

**更新 3**

好的！一些进步！我发现 SVG WG 委员会的人建议从 SVG 文档中删除 doctype。我做到了，现在我得到了一些不同的结果。我不确定它们有多好，但我现在肯定看到了不同的东西。所以这是一个优点。

**更新 4**
我尝试明确设置每个字符之间的间距（而不仅仅是句子），但仍然没有骰子。这似乎更抵消了一切。而且看起来更丑。尽管该功能运行良好并且对图像很有用（可能分析验证码？）

这是代码，如果有人感兴趣：

```
/**
* Function: Returns the space between letters, and the width of letters.
*           The first index is set to 0, as that is where it starts
*           Since spaces don't register (no pixels), strlen may not work.
* $image to analyze vertical gaps (from imagecreatetruecolor)
*/
function get_letter_dimensions($image)
{
   $bg           = imagecolorallocatealpha($image, 0, 0, 0, 127);
   $height       = imagesy($image) - 1; // was causing issues without
   $width        = imagesx($image);
   $bottom       = 0;
   $right        = 0;
   $letter_space = array(0=>0); // This holds the pixels between the letters
   $letter_width = array(0=>0); // This holds the width of the letters
   $y            = 0;
   $spacing      = 0;
   $lettering    = 0;
   $data         = array();

   for ($x = 0 ; $x < $width ; $x++) 
   {
      while((imagecolorat($image, $x, $y) == $bg) && ($y < ($height))) $y++;

      if($y == $height) 
      {
         if($lettering) $letter_width[] = $lettering;
         $lettering = 0;
         $spacing++;
      }
      else
      {
         if($spacing) $letter_space[] = $spacing;
         $spacing = 0;
         $lettering++;
      }
      $y = 0;
   }

   foreach($letter_space as $k=>$val) $data[$k] = $val + $letter_width[$k];

   return $data;      
} 
```

**更新 5**

名为“textLength”的强大属性对我有所帮助！我还没有让它完全工作，但这绝对是一个显着的改进。我仍然遇到一些缩放问题。我不确定它是否可以接受，但是，它非常接近。

**更新 6**

这是我发现 textLength 元素所做的事情：

![在此处输入图像描述](../Images/3072b57bed86cb7ad1c0a07439607b1e.png)

所以，正如你所看到的，第二行“Line up last L”看起来非常完美，就排队而言，没有 textLength。但是，第一行“一行中的多个单词”看起来很糟糕。一切都已经过去了。然而，与 textLength 相比，它似乎*更*合适。

**更新 7**

我想我解决了。我不只是执行“textLength”并将其设置为提供的长度，而是将其调整了 2px，它排列得很好。微小的差异可能仅仅是因为服务器上的像素宽度与 SVG 放置的粒度。我不知道我是否真的可以做更多的事情来改变它。我确定有，但我将回答我自己的问题并将其标记为已解决。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T17:47:48.530

OP，又是我，OP。我刚刚解决了我的问题，尽我所能，就是这样。

我修改了`text`SVG 部分的元素生成。

**之前**

```
$svg .= "fill='rgb(0,0,0)'>{$line2['text']}</text>"; 
```

**修改**

```
$line2['width'] = $line2['width'] + 2;
$svg .= "fill='#000' textLength='{$line2['width']}px'>$line2['text']}</text>"; 
```

这将是足够的。谢谢你，@feeela，你的帮助。非常感谢。

对于任何未来读到这个问题的人，我希望我的精神错乱也对你有益。

# c++ - 是否可以在关闭语言扩展的情况下编写 windows 和 directx 代码？

> ID：13056547
> 
> 赞同：0
> 
> 时间：2012-10-24T19:43:55.277
> 
> 标签：c++, windows, directx-9, language-extension

我在我的项目中关闭了扩展，但必须为任何包含 directx 或 windows 头文件的 cpp 文件打开它们。

如果我关闭这些 cpp 文件的扩展，它将无法编译。有没有办法让它工作？

使用语言扩展可以很好地编译。

我正在使用 VS2012 express、c++、directx9 和 Win7 64。

示例错误

```
1>c:\program files (x86)\windows kits\8.0\include\um\winnt.h(10907): error C2467: illegal declaration of anonymous 'struct'

1>c:\program files (x86)\windows kits\8.0\include\um\winnt.h(10918): error C2467: illegal declaration of anonymous 'struct'

1>c:\program files (x86)\windows kits\8.0\include\um\winnt.h(10930): error C2467: illegal declaration of anonymous 'struct'

1>c:\program files (x86)\windows kits\8.0\include\um\winnt.h(10940): error C2467: illegal declaration of anonymous 'struct'

1>c:\program files (x86)\windows kits\8.0\include\um\winnt.h(10950): error C2467: illegal declaration of anonymous 'struct'

1>c:\program files (x86)\windows kits\8.0\include\um\winnt.h(14764): error C2467: illegal declaration of anonymous 'struct'

1>c:\program files (x86)\windows kits\8.0\include\um\winnt.h(15404): error C2467: illegal declaration of anonymous 'struct'

1>c:\program files (x86)\windows kits\8.0\include\um\winnt.h(17421): error C2133: '_ACTIVATION_CONTEXT_COMPATIBILITY_INFORMATION::Elements' : unknown size

1>c:\program files (x86)\windows kits\8.0\include\um\wingdi.h(2202): error C2467: illegal declaration of anonymous 'struct'

1>c:\program files (x86)\windows kits\8.0\include\um\wingdi.h(2208): error C2467: illegal declaration of anonymous 'struct'

1>c:\program files (x86)\windows kits\8.0\include\um\wingdi.h(2256): error C2467: illegal declaration of anonymous 'struct'

1>c:\program files (x86)\windows kits\8.0\include\um\wingdi.h(2262): error C2467: illegal declaration of anonymous 'struct'

1>c:\program files (x86)\windows kits\8.0\include\um\wingdi.h(2807): warning C4309: 'initializing' : truncation of constant value

1>c:\program files (x86)\windows kits\8.0\include\um\wingdi.h(2809): warning C4309: 'initializing' : truncation of constant value

1>c:\program files (x86)\windows kits\8.0\include\um\wingdi.h(3008): error C2467: illegal declaration of anonymous 'struct'

1>c:\program files (x86)\windows kits\8.0\include\um\wingdi.h(3048): error C2467: illegal declaration of anonymous 'struct'

1>c:\program files (x86)\windows kits\8.0\include\um\winuser.h(14055): error C2467: illegal declaration of anonymous 'struct'

1>c:\program files (x86)\windows kits\8.0\include\um\winioctl.h(7277): error C2133: '_STORAGE_QUERY_DEPENDENT_VOLUME_RESPONSE::Lev1Depends' : unknown size

1>c:\program files (x86)\windows kits\8.0\include\um\winioctl.h(7278): error C2133: '_STORAGE_QUERY_DEPENDENT_VOLUME_RESPONSE::Lev2Depends' : unknown size

1>c:\program files (x86)\microsoft directx sdk (june 2010)\include\d3d9types.h(88): error C2467: illegal declaration of anonymous 'struct'

1>c:\program files (x86)\microsoft directx sdk (june 2010)\include\d3d9types.h(2070): error C2467: illegal declaration of anonymous 'struct' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T19:55:09.967

Windows 头文件是在考虑这些语言扩展的情况下编写的，如果它们被关闭，它们将无法编译。

您可以做的是重新定义您自己使用的函数和类型，您将能够使用*Windows API*，而无需包含其标头。然而，这样做是乏味和痛苦的。

# ios - 滚动视图中的分页和重用视图

> ID：13056549
> 
> 赞同：0
> 
> 时间：2012-10-24T19:43:59.950
> 
> 标签：ios, uiview, uiscrollview, pagination, lazy-loading

我必须在滚动视图中显示大约 100 页，每个页面包含 8 个图像视图和 8 个标签。图像视图的图像应该延迟加载。我创建的示例延迟加载图像并且分页也很好，但我正在加载所有 100 页，每个页面总共包含 8 个图像视图和 8 个标签。它在模拟器上运行良好，但我没有在设备上测试它，因为我很害怕看到它崩溃，因为我一次加载这么多视图。任何人都可以帮助我或指导我一些可以帮助我重用我的视图以及我可以执行图像视图的延迟加载的示例吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T19:53:29.907

我会推荐`UIPageViewController`，[这是一个很好的教程](http://www.techotopia.com/index.php/An_Example_iOS_5_iPhone_UIPageViewController_Application)如何实现它。

所以这个想法是你有一个控制器来显示页面上的所有图像和标签，所以当你转到下一页时，你只需启动另一个控制器并设置图像，你也会从内存中删除前一页。每个页面都由页面控制器的一个实例表示，而 UIPageViewController 负责。如果你不想，你不必做页面卷曲动画。

当然，您可以使用分页计算滚动视图中页面上每个项目的位置并移动项目和加载其他图像`UIScrollView`，但是如果您有数百页，为什么不使用`UIPageViewController`呢？

顺便说一句，您甚至不需要教程，您只需`Page Based Application`从 iOS 模板创建，然后将代码移动`Model Controller`到`DataViewController`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T19:48:14.523

Have a look at the post [UIScrollView and lazy loading](http://favo.asia/2010/06/uiscrollview-and-lazy-loading/), describing how to do lazy loading of images in `UIScrollView`.

This is exactly the kind of step-by-step intro to lazy loading with `UIScrollView` that you are looking for.

The idea is: you keep, e.g., 3 views in memory: the current, the previous one, and the next one; so you can move to the next one or previous one with no delay. When you move to one new view, you load the previous one and the next one (if necessary). If you plan on having fast scroll as an important feature, you would need to increase the number of views in memory to 5 or 7\. The more views you hold in memory, the seamless scrolling will be, but you will pay a price in terms of memory usage.

I would not suggest trying to keep all the views in memory because the device memory will fill up and your app will be killed. In any case, you can try and see if the device can handle all those views in memory at the same time.

One interesting option you might consider is showing an activity indicator while a page is being loaded. This would make scrolling feel more natural, although the view shall be loaded.

Having a look at your files, one thing I noticed is the

```
for (int i =0; i<loopTimes; i++) 
```

in `loadImagesForPage`.

You might try to split that method so that it's not executed on a single run (blocking the UI meanwhile). I mean:

```
for (int i =0; i<loopTimes; i++) {
    [self performSelector:@selector(loadSingleImageForPage:)
               withObject:[NSNumber numberWithInt:i]
               afterDelay:0.0];
} 
```

where `loadSingleImageForPage:` is a method which encapsulates the current body of the for loop. By doing like this (i.e., using the `afterDelay`) you load one page and return back to the run loop; then the next one and return back to the run loop; etc. When you return back to the run loop, you give the system a chance to deal with the UI, delegate calls, whatever...

I hope this could make a difference. Otherwise, my suggestion is just trying to comment out portions of your code (i.e., checking whether the app work correctly when displaying only the placeholders without attempting to download the images, etc.).

EDIT (7/9/2013)

Since the link above seems to be dead, here is the code:

**1 - Listen for scrollViewDidScroll on your delegate, like this:**

```
-(void)scrollViewDidScroll:(UIScrollView *)myScrollView {
} 
```

**2 - Calculate the current page using the known size of your images:**

```
/**
 *  calculate the current page that is shown
 *  you can also use myScrollview.frame.size.height if your image is the exact size of your scrollview
 */
int currentPage = (myScrollView.contentOffset.y / currentImageSize.height); 
```

**3 - Look if the image already exists, if not, add it:**

```
// display the image and maybe +/-1 for a smoother scrolling
// but be sure to check if the image already exists, you can do this very easily using tags
if ( [myScrollView viewWithTag:(currentPage +1)] ) {
    return;
}
else {
    // view is missing, create it and set its tag to currentPage+1
} 
```

**4 - And don’t forget to clean your memory:**

```
/**
 *  using your paging numbers as tag, you can also clean the UIScrollView
 *  from no longer needed views to get your memory back
 *  remove all image views except -1 and +1 of the currently drawn page
 */
for ( int i = 0; i < currentPages; i++ ) {
    if ( (i < (currentPage-1) || i > (currentPage+1)) && [myScrollView viewWithTag:(i+1)] ) {
        [[myScrollView viewWithTag:(i+1)] removeFromSuperview];
    }
} 
```

**5 - And the final combination of all steps:**

```
-(void)scrollViewDidScroll:(UIScrollView *)myScrollView {

    int currentPage = (myScrollView.contentOffset.y / currentImageSize.height);

    if ( [myScrollView viewWithTag:(currentPage +1)] ) {
        return;
    }
    else {
        // view is missing, create it and set its tag to currentPage+1
    }

    for ( int i = 0; i < currentPages; i++ ) {
        if ( (i < (currentPage-1) || i > (currentPage+1)) && [myScrollView viewWithTag:(i+1)] ) {
            [[myScrollView viewWithTag:(i+1)] removeFromSuperview];
         }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-24T05:12:06.783

或者其他一些人，你可以看看我在[VSScroller上的课程](https://github.com/iVishal/VSScroller.git)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-09T08:30:39.407

我写了一个简单的 UIScrollView 子类，它和 UITableView 一样实现了单元格可重用性，项目[MMHorizo​​ntalListView](https://github.com/manuelemaggi/MMHorizontalListView)在 gitHub 上，还有一个测试项目，所以你可以通过示例看到如何使用它，它也适用于 4.x 等旧 iOS 版本（可能更老了……）

# .htaccess - Mercurial 选择性地忽略 htaccess 文件

> ID：13056558
> 
> 赞同：5
> 
> 时间：2012-10-24T19:44:40.043
> 
> 标签：.htaccess, mercurial, hgignore

我正在使用 Mercurial 进行版本控制，并且在我的 Web 根目录中有一个 .htaccess 文件，其重写规则取决于它是我的本地主机还是我的开发服务器等。因此，我将“.htaccess”放入了我的 .hgignore 文件，因此它不是版本控制的一部分。

但是，我还有另一个 .htaccess 文件，位于 .hg/.htaccess，带有“全部拒绝”，因此我的 .hg 文件夹无法通过网络访问。我确实希望将此 htaccess 文件签入到版本控制中，这样我就不会忘记在新服务器上设置它等。

有没有办法做到这一点？似乎只是将“.htaccess”放入我的 hgignore 使它忽略位于任何地方的所有 .htaccess 文件。我尝试了“./.htaccess”，希望它会忽略根级别一级，但不是 .hg/.htaccess——虽然没有用。我试过做研究，但运气不佳。

谢谢，如果我在某处遗漏了一些明显的东西，我很抱歉！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T19:50:45.117

这不可能。不是因为忽略，而是因为`.hg`mercurial 无法跟踪来自的文件。

因此，您最好使用适合您大多数要求的模板创建和签入，`.htaccess.dist`并在特定机器上签出后 - 复制`.htaceccess.dist`到`.htaccess`其中并进行必要的更改。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T10:16:14.810

有一个（简单而优雅的）解决方案。看来您正在使用 glob 语法。使用简单的正则表达式，您可以只忽略存储库“根”中的文件。假设您只想忽略主 .htaccess，您必须将以下内容附加到 .hgignore：

```
syntax: regexp
^\.htaccess 
```

此外，注释掉或删除 .hgignore 中的 .htaccess。请注意，该行下方的所有模式`syntax: regexp`都必须采用 Perl/Python 风格的正则表达式，如 man hgignore 中所述。

希望这可以帮助！

# c++ - 与内存堆相关的 C++ 链表（std::list）是否使用新的？

> ID：13056559
> 
> 赞同：1
> 
> 时间：2012-10-24T19:44:47.650
> 
> 标签：c++, heap-memory

使用 Visual Studio for c++；std::list 是否使用 new 来分配节点？我问是因为我将内存堆编码为一项挑战，如果它使用新的，则会降低内存堆的有效性。

内存堆按照这个问题，第一个答案：[How to implement a memory heap](https://stackoverflow.com/questions/4495990/how-to-implement-a-memory-heap)

如果它确实使用了新的，我将如何修复它（关于使用链表作为上述问题的答案中概述的内存堆）？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T19:46:56.680

STL containers (so-called because the design is based on the STL) in the C++ Standard have a template parameter which specifies an allocator. That allocator is used. It defaults to a library-provided allocator, but you can pass your own that uses your custom heap.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-24T19:46:42.963

All standard template library containers use an abstraction (called an Allocator) to allocate memory, the default being a `std::allocator<T>`. This default allocator does use new, but that doesn't preclude you from using (writing) one that doesn't.

You can see from [this documentation](http://www.sgi.com/tech/stl/List.html) that the second template parameter is the allocator to use.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-24T19:46:32.697

Yes, it does use `new` indirectly via its `Allocator` parameter. You can write a *custom allocator* that uses your heap, and instantiate `list`s with it.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-24T19:48:01.230

Yes, std::list by default uses std::allocator, which uses `new`.

But you can write your own allocator class that uses any allocation scheme you want and pass it as the second template argument to std::list.

# javascript - 在 javascript 中解析 JSON 对象

> ID：13056563
> 
> 赞同：2
> 
> 时间：2012-10-24T19:45:06.037
> 
> 标签：javascript, json

我有以下 JSON 对象：

```
[{"id":"123","username":"test"}] 
```

我想`username`使用javascript解析所以我这样做了

```
var content = '[{"id":"123","username":"test"}]
obj = JSON.parse(content)
alert(obj.username) 
```

我收到警报：`undefined`

我试过在没有的情况下解析 JSON`[ ]`并且它有效

例如：

```
var content = '{"id":"123","username":"test"}'
obj = JSON.parse(content)
alert(obj.username) 
```

我的问题是我将如何解析带有 [ ] 标签的 JSON？谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-24T19:46:50.737

那是因为`[]`使它成为一个数组。试试`alert(obj[0].username)`。

如果您将 JSON 更改为如下所示...

```
[ {"id":"123","username":"test"}, {"id":"456","username":"test 2"}] 
```

那么`alert(obj[1].username)`将是`test 2`，并且`alert(obj[0].username)`将是`test`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T19:47:35.853

您在第一种情况下得到的未定义错误是因为 JSON 表示其中包含单个对象的 ARRAY。为了访问您需要的用户名`alert(obj[0].username)`

# linux - 在 Linux 上严格解析 YYYY-MM-DD 日期

> ID：13056573
> 
> 赞同：4
> 
> 时间：2012-10-24T19:45:36.667
> 
> 标签：linux, posix, strptime

POSIX 定义了一个方便的函数，`strptime`可用于解析日期和时间。因此，理论上，如果我有一个格式为“YYYY-MM-DD”的日期，我应该能够`strptime`像这样解析它：

```
char myDate[] = "2012-01-01";

struct tm result;
char *end = strptime(myDate, "%Y-%m-%d", &result); 
```

...并通过以下方式以规范表示形式将其恢复：

```
if (end != NULL)
{
    char outDate[11];
    strftime(outDate, sizeof(outDate), "%Y-%m-%d", &result);
    printf("%s\n", outDate);
}
else
    printf("Invalid date\n"); 
```

在 OS X 和 Linux 上，这会打印出 2012-01-01。到目前为止，一切都很好！但是，假设我的输入日期格式错误：01-01-2012。

如果我再次运行上面的代码，在 OS X 上，我会得到“无效日期”，这是预期的。但是，在 Linux 上，我得到 1-01-20 — 1 月 20 日，1（是的，第一年）。

OS X 严格遵循说明符，`%Y` *仅*将字符串解析为存在四位数年份的地方。不过，Linux 需要一些自由，并将两位数解释为一年——它甚至没有假设它是 2001 年，而是将其视为第 1 年！

这可以通过将我的`if`声明更改为类似的东西来解决

```
if (end != NULL && *end == '\0') 
```

……但这似乎是胡扯。有谁知道是否可以使`strptime`Linux 上的行为更加严格，并且`%Y`如果输入字符串没有四位数年份则失败？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T17:41:44.453

没有选项可以更改 strptime() 的行为或指定格式字符串中的长度。（我查看了 glibc-2.3 中的源代码，strptime 丢弃了格式修饰符和字段宽度，所以像 "%04Y" 这样的东西不会改变任何东西）。

但正如评论中已经指出的那样，没有任何问题`if (end != NULL && *end == '\0')`。我建议只使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T20:16:28.627

我想你最好的选择是找到第一个破折号的索引，并根据它的值使用一个或另一个掩码。

# javascript - V8 垃圾回收是否释放内存？

> ID：13056591
> 
> 赞同：1
> 
> 时间：2012-10-24T19:46:52.040
> 
> 标签：javascript, node.js, google-chrome, garbage-collection, v8

我正在阅读[V8 文档](https://developers.google.com/v8/design#garb_coll)，它说垃圾收集器“回收”内存。

我的问题是它是“回收”要在自己的堆中使用的内存还是释放它？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T19:53:13.640

垃圾收集器传递的目的是确定应用程序不再使用哪些内存。它被称为*回收*，因为 GC 重新断言内存可用于新分配。

内存是否立即释放取决于许多因素。通常*，*内存只是由 GC 拥有，并将用于程序的下一次分配。

# php - nesting elesif syntax

> ID：13056596
> 
> 赞同：1
> 
> 时间：2012-10-24T19:47:20.717
> 
> 标签：php, javascript, syntax, if-statement

I'm modifying a breadcrumb script to append a `'...'` if the title is over 40 characters long. I got that part worked out fine, but what I can't get right is how to nest it in this massive script to leave it along if it's under 40 characters long.

Do I even need an else here? I have never encountered a script where there were multiple `if`s without an `else` or `elseif`

```
 } elseif ( is_single() && !is_attachment() ) {
      if ( get_post_type() != 'post' ) {
        $post_type = get_post_type_object(get_post_type());
        $slug = $post_type->rewrite;
        echo '<a href="' . $homeLink . '/' . $slug['slug'] . '/">' . $post_type->labels->singular_name . '</a>';
        if ($showCurrent == 1) echo ' ' . $delimiter . ' ' . $before . substr(the_title('', '', FALSE), 0, 40) . $after;
      } else {
        $cat = get_the_category(); $cat = $cat[0];
        $cats = get_category_parents($cat, TRUE, ' ' . $delimiter . ' ');
        if ($showCurrent == 0) $cats = preg_replace("#^(.+)\s$delimiter\s$#", "$1", $cats);
        echo $cats;
        if (($showCurrent == 1) && (strlen($post->post_title) > 40)) echo $before . substr(the_title('', '', FALSE), 0, 40) . '...' . $after;
      } elseif {
        if (($showCurrent == 1) && (strlen($post->post_title) < 40)) echo $before . get_the_title() . $after;

      } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T20:02:36.517

逻辑不清楚。您还没有处理长度正好是 40 个字符的情况。

尝试构造您的代码，以便您只需要评估一次相同的表达式。也许这就是你的意思？

```
} elseif ( is_single() && !is_attachment() ) {
  if ( get_post_type() != 'post' ) {
   ...
  } else {
    ...
    echo $cats;

    if (($showCurrent == 1) && (strlen($post->post_title) > 40)) 
      echo $before . substr(the_title('', '', FALSE), 0, 40) . '...' . $after;
    } 
    else {
      echo $before . get_the_title() . $after;
    }
  }
}  // Close the elseif 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T19:54:13.927

最后一个`elseif`是无效的，因为它前面已经有一个 else。

我还要说，您应该养成使用标准化方式编写 if / if-else 语句的习惯。在我看来，您的代码可能搞砸了，因为您有一些没有花括号的 if 语句和一些带有花括号的语句。例如，如果您要在所有情况下都使用花括号，并为它们使用适当的缩进，那么您在 else 条件之后使用 and elseif 的问题就会很明显地被发现。

举个例子：

```
if ( get_post_type() != 'post' ) {
    $post_type = get_post_type_object(get_post_type());
    $slug = $post_type->rewrite;
    echo '<a href="' . $homeLink . '/' . $slug['slug'] . '/">' . $post_type->labels->singular_name . '</a>';
    if ($showCurrent == 1) {
         echo ' ' . $delimiter . ' ' . $before . substr(the_title('', '', FALSE), 0, 40) . $after;
    }
} else {
    $cat = get_the_category(); $cat = $cat[0];
    $cats = get_category_parents($cat, TRUE, ' ' . $delimiter . ' ');
    if ($showCurrent == 0) {
        $cats = preg_replace("#^(.+)\s$delimiter\s$#", "$1", $cats);
    }
    echo $cats;
    if (($showCurrent == 1) && (strlen($post->post_title) > 40)) {
        echo $before . substr(the_title('', '', FALSE), 0, 40) . '...' . $after;
    }
} else if {
    if (($showCurrent == 1) && (strlen($post->post_title) < 40)) {
        echo $before . get_the_title() . $after;
    }
} 
```

对我来说，尽管它稍微冗长一些，但阅读起来更清晰。很明显，最后一个 else-if 是没有意义的。

顺便说一句，当你修正你的逻辑时，一定要考虑如果字符串正好是 40 个字符长会发生什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T19:57:16.050

看起来您可能缺少一些大括号

```
} elseif ( is_single() && !is_attachment() ) {
      if ( get_post_type() != 'post' ) {
        $post_type = get_post_type_object(get_post_type());
        $slug = $post_type->rewrite;
        echo '<a href="' . $homeLink . '/' . $slug['slug'] . '/">' . $post_type->labels->singular_name . '</a>';

        if ($showCurrent == 1) { echo ' ' . $delimiter . ' ' . $before . substr(the_title('', '', FALSE), 0, 40) . $after; }

      } else {
        $cat = get_the_category(); $cat = $cat[0];
        $cats = get_category_parents($cat, TRUE, ' ' . $delimiter . ' ');

        if ($showCurrent == 0) { $cats = preg_replace("#^(.+)\s$delimiter\s$#", "$1", $cats);
        echo $cats; }

        if (($showCurrent == 1) && (strlen($post->post_title) > 40)) { echo $before . substr(the_title('', '', FALSE), 0, 40) . '...' . $after; }

      } elseif {

        if (($showCurrent == 1) && (strlen($post->post_title) < 40)) { echo $before . get_the_title() . $after; }

      } 
```

# ruby-on-rails - 尝试验证 ruby on rails 的两层唯一性

> ID：13056597
> 
> 赞同：0
> 
> 时间：2012-10-24T19:47:21.077
> 
> 标签：ruby-on-rails, ruby, validation, assert

我正在寻找可以验证复合验证的唯一性的测试（如果有意义的话）。验证本身如下：

validates_uniqueness_of :name, :scope => [:address_postcode]

我怎么做？我会简单地尝试创建两个同名的地方并尝试验证吗？例如（并且此代码不起作用）

```
test "name and postcode of a new place must be unique" do
  place = Place.new(description: "my favourite chinese", cuisine:"chinese", 
    address_state:"NSW", address_country:"Australia", address_postcode:"2209")
  place.name = "Masthai"
  assert place.valid?

  place2 = Place.new(description: "try a second restaurant", cuisine:"chinese", 
    address_state:"NSW", address_country:"Australia", address_postcode:"2209")
  place2.name = "Masthai"
  assert place2.invalid?
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T19:51:43.850

`place2`可能是有效的，因为您没有保存`place`到数据库中。我会试试这个：

```
test "name and postcode of a new place must be unique" do
  place = Place.create(description: "my favourite chinese", cuisine:"chinese", 
    address_state:"NSW", address_country:"Australia", address_postcode:"2209")
  place.name = "Masthai"
  assert place.valid?

  place2 = Place.new(description: "try a second restaurant", cuisine:"chinese", 
    address_state:"NSW", address_country:"Australia", address_postcode:"2209")
  place2.name = "Masthai"
  assert place2.invalid?
end 
```

另外，我想对格式/样式提出建议：

```
test "name and postcode of a new place must be unique" do
  place = Place.create(
    description: "my favourite chinese",
    cuisine: "chinese", 
    address_state: "NSW",
    address_country: "Australia",
    address_postcode: "2209",
    name: "Masthai"
  )
  assert place.valid?

  place2 = Place.new(
    description: "try a second restaurant",
    cuisine: "chinese", 
    address_state: "NSW",
    address_country: "Australia",
    address_postcode: "2209",
    name: "Masthai"
  )
  assert place2.invalid?
end 
```

另外，我建议您阅读一些有关数据库规范化的内容。您真的应该为 , 和 提供单独的表格`cuisine`，`state`而`country`不是将这些值存储为自由格式的文本。

# javascript - Detect Long Press in UIWebView using javascript (not objective-c)

> ID：13056598
> 
> 赞同：3
> 
> 时间：2012-10-24T19:47:23.180
> 
> 标签：javascript, ios, iphone, uiwebview, webkit

I'm looking for a way to detect a long press in javascript in a UIWebView.

For other reasons (don't ask) I need to do this in javascript (not detect in objective-c and fire a javascript method).

So basically use these:

```
document.getElementById('touchable').addEventListener('touchstart', function(ev) {
} 
```

and so forth (touchend, touchmove, touchcancel, etc).

But would like to use some standard or proven code that then determines if it is a long press. In other words the code has to check to see if there is another touch or recently ended touch (user was doing a two finger zoom or something), detect whether they moved their finger "too much" and thus are panning, not pressing, etc.

Seems like a lot of conditions and a lot that can be done differently, so it would be great if there was a standard way to do this, but I'll take any approaches that work.

# javascript - 行/列 JavaScript DHTML

> ID：13056599
> 
> 赞同：0
> 
> 时间：2012-10-24T19:47:23.683
> 
> 标签：javascript, dhtml

我正在寻找一个功能，当按下按钮时，该功能会生成行/列。

我一直在尝试使用以下代码

```
 function addTRTD(){ 
 var tbElm = document.getElementById("tbdy");

 var newRow = document.createElement("tr");

 var newCol1= document.createElement("TD");
 var newCol2= document.createElement("TD");

 newCol1.innerHTML = "Row 1 Cell 1";
 newCol2.innerHTML = "Row 1 Cell 2";;

 newRow.appendChild(newCol1);
     newRow.appendChild(newCol2);

 tbElm.appendChild(newRow);

     newCol1.innerHTML = "Row 1 Cell 1";
     newCol2.innerHTML = "Row 1 Cell 1";

     var newRow = document.createElement("tr");
     newRow.appendChild(newCol1);
     newRow.appendChild(newCol2);

     var newCol1= document.createElement("TD");
     var newCol2= document.createElement("TD");

     newCol1.innerHTML = "Row 2 Cell 1";
     newCol2.innerHTML = "Row 2 Cell 2";

 tbElm.appendChild(newRow);
 } 
```

但没有运气。单击按钮，我只得到以下输出 Row 1 Cell 1 Row 1 Cell 2

如何才能显示 Row2 的信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T20:00:47.390

我不确定我是否遵循您的代码，因为看起来您有一行有两列，但随后声明了一行有 5 列。

如果您有一致的行，我过去发现最简单的方法是创建一个隐藏行作为模板。这也允许应用您动态创建的任何样式。

而不是你可以做类似 var newRow = $('table.templaterow').clone(); 比设置每一列： newRow.find('td')

而不是附加到表格中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T21:48:38.530

我的解决方案是：

```
<html>
<head>
<title>Auto-Gen</title>

<script type="text/javascript">

var template = '</table>\
<div align="justify">\
<td>\
<select name="name{num}" title="25">\
<option value="1">1</option>\
<option value="2">2</option>\
<option value="3">3</option>\
<option value="4">4</option>\
<option value="5">5</option>\
<option value="6">6</option>\
<option value="7">7</option>\
<option value="8">8</option>\
<option value="9">9</option>\
<option value="10">10</option>\
<option value="11">11</option>\
<option value="12">12</option>\
<option value="13">13</option>\
<option value="14">14</option>\
<option value="15">15</option>\
<option value="16">16</option>\
<option value="17">17</option>\
<option value="18">18</option>\
<option value="19">19</option>\
<option value="20">20</option>\
<option value="21">21</option>\
<option value="22">22</option>\
<option value="23">23</option>\
<option value="24">24</option>\
<option value="25">25</option>\
<option value="26">26</option>\
<option value="27">27</option>\
<option value="28">28</option>\
<option value="29">29</option>\
<option value="30" selected="selected">30</option>\
<option value="31">31</option>\
<option value="32">32</option>\
</select>\
</td>\
<td>\
    {num}\
 </td>\
</div>';

var counter =0;

function addNew() {
    a = document.createElement('div');
    html = template.replace(/{num}/g, counter.toString());
    a.innerHTML = html;
    var mainContainer = document.getElementById('mainContainer');
    mainContainer.appendChild(a);
    counter++;
}

</script>
</head>
<body>

<div id="mainContainer"> </div>

<div align="justify"> <input value="Add" onclick="addNew()" type="button"> </div>

</body>
</html> 
```

非常感谢大家的意见和帮助

问候

# vb.net - Store date inside .accdb file

> ID：13056600
> 
> 赞同：0
> 
> 时间：2012-10-24T19:47:25.617
> 
> 标签：vb.net, ms-access, date

I am using vb.net to store value into .accdb file. In my form I have a box with date and it shows current date. Tried to print it out in a MsgBox and it shows the date correctly but when I store it inside .accdb file it says that the date is 1905-05-31 WTF??? I have no idea where it is coming from.

```
DateTimePickerIFT.Text (it is actually DateTimePicker IFT at the end is how I name it) 
```

This is how I get my date from DateTimePicker box. I have noticed if I move the date one day back the value stored is 1905-06-01 which is (2012-10-23 in a datepickerbox) and when I get 1905-05-31 selected date is (2012-10-24). I am not initializing date anywhere just getting it from the box and sending it directly to .accdb file.

I tried making .accdb filed value as [date/time] or [text] with same results.

Can somebody help me?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T21:01:09.950

apparently needed to put this outside the string value #" & DateTimePickerIFT.Value.ToShortDateString & "#

# php - How to make cURL function curl_exec to work under Server with restricted permissions?

> ID：13056601
> 
> 赞同：0
> 
> 时间：2012-10-24T19:47:28.863
> 
> 标签：php, curl, yii, bookmarklet

I have been developing a bookmarklet, and at some point this app has to load a webpage content.

For the last 8 months, i have been developing the app on a server that does not have limitations.

Now, i had to setup the app on another server, in order for the client to try it.

I got into trouble with cURL, with the following code, with the fetchContent function;

If you run my app under wamp, xamp, lamp, on localhost, it runs perfect;

On the new server, where i configured the app for the client, we cant use cURL, because of the function

```
$content = curl_exec($curl); 
```

And, the options array, does not load;

First, our new server did not allow us to send data, using $_GET method with JSON.stringify data;

We have deactivated a strange security plugin for our app, that did not allowed any JSON.stringify data to be passed as input , and now the server accepts the input;

We get a 52 error code, with value 1;

```
CURLE_GOT_NOTHING (52)

Nothing was returned from the server, and under the circumstances, getting nothing is considered an error. 
```

Then we found out about: [http://www.php.net/manual/en/function.curl-setopt.php#95027](http://www.php.net/manual/en/function.curl-setopt.php#95027) but this does not work, even after correcting the author little mistake and after i adapted the code;

And what's the role of open_basedir in all this cURl stuff ?

this is my code:

```
<?php

class CurlTool {

    public static $userAgents = array(
        'FireFox3' => 'Mozilla/5.0 (Windows; U; Windows NT 5.1; pl; rv:1.9) Gecko/2008052906 Firefox/3.0',
        'GoogleBot' => 'Mozilla/5.0 (compatible; Googlebot/2.1; +http://www.google.com/bot.html)',
        'IE7' => 'Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 6.0)',
        'Netscape' => 'Mozilla/4.8 [en] (Windows NT 6.0; U)',
        'Opera' => 'Opera/9.25 (Windows NT 6.0; U; en)'
    );
    public static $options = array(
        CURLOPT_USERAGENT => 'Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 6.0)',
        CURLOPT_AUTOREFERER => true,
        CURLOPT_FOLLOWLOCATION => true,
        CURLOPT_RETURNTRANSFER => true,
        CURLOPT_FRESH_CONNECT => true,
        CURLOPT_COOKIEJAR => "cookies.txt",
        CURLOPT_COOKIEFILE => "cookies.txt",
        CURLOPT_SSL_VERIFYPEER => false,
            //CURLOPT_COOKIESESSION => false,
    );
    private static $proxyServers = array();
    private static $proxyCount = 0;
    private static $currentProxyIndex = 0;
    public static $getinfo;

    public static function addProxyServer($url) {
        self::$proxyServers[] = $url;
        ++self::$proxyCount;
    }

    public static function fetchContent($url, $fields = null, $verbose = false) {
        //print '*'.$fields.'*';
        if (($curl = curl_init($url)) == false) {
            throw new Exception("curl_init error for url $url.");
        }
        if (self::$proxyCount > 0) {
            $proxy = self::$proxyServers[self::$currentProxyIndex++ % self::$proxyCount];
            curl_setopt($curl, CURLOPT_PROXY, $proxy);
            if ($verbose === true) {
                echo "Reading $url [Proxy: $proxy] ... ";
            }
        } else if ($verbose === true) {
            echo "Reading $url ... ";
        }
        //$verbose=TRUE;
        //print_r($fields);
//        debug_print_backtrace();
//url-ify the data for the POST
        $fields_string = '';
        if (is_array($fields))
            foreach ($fields as $key => $value) {
                if (empty($key))
                    continue;
                $fields_string .= $key . '=' . urlencode($value) . '&';
                if ($verbose === true) {
                    echo $key . ": " . $value;
                }
            }
        rtrim($fields_string, '&');

        if (count($fields) > 0) {
            curl_setopt($curl, CURLOPT_POST, count($fields));
            curl_setopt($curl, CURLOPT_POSTFIELDS, $fields_string);
        }

        if ($verbose === true) {
            echo "Fields string $fields_string ... ";
        }

        curl_setopt_array($curl, self::$options);

        $content = curl_exec($curl);
        self::$getinfo = curl_getinfo($curl);
        if ($content === false) {
            throw new Exception("curl_exec error for url $url " . curl_error($curl));
        }

        curl_close($curl);
        if ($verbose === true) {
            echo "Done.\n";
        }
        $content = preg_replace('#\n+#', ' ', $content);
        $content = preg_replace('#\s+#', ' ', $content);

        return $content;
    }

    public static function downloadFile($url, $fileName, $fields = null, $verbose = false) {
        if (($curl = curl_init($url)) == false) {
            throw new Exception("curl_init error for url $url.");
        }

        if (self::$proxyCount > 0) {
            $proxy = self::$proxyServers[self::$currentProxyIndex++ % self::$proxyCount];
            curl_setopt($curl, CURLOPT_PROXY, $proxy);
            if ($verbose === true) {
                echo "Downloading $url [Proxy: $proxy] ... ";
            }
        } else if ($verbose === true) {
            echo "Downloading $url ... ";
        }

        //url-ify the data for the POST
        $fields_string = '';
        if (is_array($fields))
            foreach ($fields as $key => $value) {
                if (empty($key))
                    continue;
                $fields_string .= $key . '=' . urlencode($value) . '&';
            }
        rtrim($fields_string, '&');

        curl_setopt($curl, CURLOPT_POST, count($fields));
        curl_setopt($curl, CURLOPT_POSTFIELDS, $fields_string);

        curl_setopt_array($curl, self::$options);

        if (is_file($fileName)) {
            $contents = file_get_contents($fileName, false, null, -1, 3 * 1024);
            $pattern = "__VIEWSTATE";
            if (strpos($contents, $pattern) === false) {
                return $fileName;
            }
        }

//        if (is_file($fileName)) {
//            // make a HEAD request and try to get the file size HEAD
//            // if they differ then redownload the file, otherwise no need
//            curl_setopt($curl, CURLOPT_NOBODY, true);
//            curl_setopt($curl, CURLOPT_HEADER, true);
//            $ret = curl_exec($curl);
//            //echo $fileName;
//            $size = curl_getinfo($curl, CURLINFO_CONTENT_LENGTH_DOWNLOAD);
//            if ($size == filesize($fileName)) {
//                return $fileName;
//            } else {
//                unlink($fileName);
//                return self::downloadFile($url, $fileName, $fields, $verbose);
//            }
//        }

        if (substr($fileName, -1) == '/') {
            $targetDir = $fileName;
            $fileName = tempnam(sys_get_temp_dir(), 'c_');
        }
        if (($fp = fopen('./files/'.$fileName, "w")) === false) {
            throw new Exception("fopen error for filename $fileName");
        }

        curl_setopt($curl, CURLOPT_FILE, $fp);

        curl_setopt($curl, CURLOPT_BINARYTRANSFER, true);

        $ret = curl_exec($curl);
        self::$getinfo = curl_getinfo($curl);

        if ($ret === false) {
            fclose($fp);
            unlink($fileName);
            throw new Exception("curl_exec error for url $url.");
        } elseif (isset($targetDir)) {
            $eurl = curl_getinfo($curl, CURLINFO_EFFECTIVE_URL);
            preg_match('#^.*/(.+)$#', $eurl, $match);
            fclose($fp);
            rename($fileName, "$targetDir{$match[1]}");
            $fileName = "$targetDir{$match[1]}";
        } else {
            fclose($fp);
        }

        curl_close($curl);
        if ($verbose === true) {
            echo "Done.\n";
        }
        return $fileName;
    }

} 
```

# asp.net - Sass and asp.net

> ID：13056611
> 
> 赞同：3
> 
> 时间：2012-10-24T19:48:06.850
> 
> 标签：asp.net, sass

is there a way to use Sass with asp.net where you can use variables that are stored in the database and then are compiled by Sass for the final css file?

# javascript - IntelliSense for JSON?

> ID：13056615
> 
> 赞同：2
> 
> 时间：2012-10-24T19:48:19.970
> 
> 标签：javascript, visual-studio-2010, intellisense

Is it possible to get IntelliSense in Visual Studio 2010 working for JSON data? I know there is a workaround for third party scripts which has come in very handy.

In asp.net mvc 3, I serialize data in a controller and then pass it in the view model. I access it like this:

```
var JSONData = @( Html.Raw( Model.JSON ) ); 
```

Inside of this `JSONData` is a complex object graph with several levels of nesting. I may want to get a list of happy campers like this:

```
var HappyCampers = JSONData.Foo.Bar.HappyCampers; 
```

Is there a way for IntelliSense to show that Foo is available to JSONData, that Bar is available to Foo, and that HappyCampers is available to Bar?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-11T09:39:45.393

[在 JSON 编辑器中为 JSON Schema](https://i.stack.imgur.com/AqvUv.png)引用Intellisense ：

> 在编辑器中打开`JSON`文件时`Visual Studio`，可以使用数据文件中的“$schema”属性在 JSON 文件中指定模式`JSON`。当您向项目添加新`JSON`文件时，将显示架构下拉框，`<No Schema Selected>`但您可以选择之前使用的架构。
> 
> 您还可以`JSON`使用架构文本框而不是使用文件中的`$schema`属性来指定文件的架构，这样会更快。但是，如果您需要将相同`JSON`的文件传递给另一个用户，或者在不同的项目中使用它，则架构文本框中指定的架构将不会被粘贴。您必须使用该`$schema`属性才能让 JSON 编辑器在当前项目之外拾取它。
> 
> 一旦您将`JSON`数据文件指向相应的模式，您将能够在`Output`窗口中看到是否`JSON editor`未能加载关联的模式。
> 
> [![在此处输入图像描述](../Images/10e18c3e61f7d1868199aa615a908a4c.png)](https://i.stack.imgur.com/AqvUv.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T19:58:03.813

JSON 不是强类型对象，因此我认为没有任何插件可以帮助您使用 IntelliSense。

您可以做的是反序列化对象中的 JSON，使其成为强类型，然后您可以使用 IntelliSense。

否则，为了帮助使用 javascript，有一些插件：

[Visual Studio Javascript 扩展功能比较](https://stackoverflow.com/questions/4204032/visual-studio-javascript-extensions-feature-comparison)

JSEnhancements 太棒了！

另请参阅此扩展程序：[http ://code.google.com/p/js-addin/](http://code.google.com/p/js-addin/)

它将您的脚本解析为可用于导航的对象树。

# heroku - My package manager broke when I installed Heroku

> ID：13056622
> 
> 赞同：8
> 
> 时间：2012-10-24T19:49:00.920
> 
> 标签：heroku, ubuntu-12.04, package-managers

```
sudo apt-get install <anything>

Reading package lists... Error!
E: Encountered a section with no Package: header
E: Problem with MergeList /var/lib/apt/lists/toolbelt.heroku.com_ubuntu_._en
E: The package lists or status file could not be parsed or opened. 
```

What are my next steps to troubleshoot this?

* * *

Update: I tried to reinstall and got the output below. It seems like it installed, but I get `command not found: heroku` when I try `heroku` from the command line. The install command hung up for a long time on `[Waiting for Headers]`.

What's my next step based on these error messages?

```
W: GPG error: http://us.archive.ubuntu.com precise Release: The following signatures were invalid: BADSIG 40976EAF437D05B5 Ubuntu Archive Automatic Signing Key <ftpmaster@ubuntu.com>
W: GPG error: http://us.archive.ubuntu.com precise-backports Release: The following signatures were invalid: BADSIG 40976EAF437D05B5 Ubuntu Archive Automatic Signing Key <ftpmaster@ubuntu.com>
W: A error occurred during the signature verification. The repository is not updated and the previous index files will be used. GPG error: http://extras.ubuntu.com precise Release: The following signatures were invalid: BADSIG 16126D3A3E5C1192 Ubuntu Extras Archive Automatic Signing Key <ftpmaster@ubuntu.com>

W: GPG error: http://dl.google.com stable Release: The following signatures were invalid: BADSIG A040830F7FAC5991 Google, Inc. Linux Package Signing Key <linux-packages-keymaster@google.com>
W: Failed to fetch http://extras.ubuntu.com/ubuntu/dists/precise/Release  

W: Some index files failed to download. They have been ignored, or old ones used instead.
Reading package lists... Done
Building dependency tree       
Reading state information... Done
heroku-toolbelt is already the newest version. 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-15T06:46:01.973

The following will fix this error:

```
sudo apt-get clean 
cd /var/lib/apt 
sudo mv lists lists.old 
sudo mkdir -p lists/partial 
sudo apt-get clean 
sudo apt-get update 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-04T08:41:01.243

You can try as follow:

> sudo rm /var/lib/apt/lists/* -vf
> 
> sudo apt-get update

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-20T00:02:53.047

This worked for me

```
sudo rm -r /var/lib/apt/lists
sudo mkdir -p /var/lib/apt/lists/partial
sudo aptitude update 
```

# vba - 复制工作表的数据源

> ID：13056625
> 
> 赞同：1
> 
> 时间：2012-10-24T19:49:26.203
> 
> 标签：vba, excel

我正在尝试将三张工作表（两张是数据透视表，一张是这些数据透视表的源数据）从一个工作簿复制到一个新工作簿。

下面的代码将所需的工作表复制到新工作簿并保存（修改后的[原始](http://www.vbaexpress.com/kb/getarticle.php?kb_id=359)工作表）：

```
Sub ExportFile()
    Dim NewName As String
    Dim nm As Name
    Dim ws As Worksheet

    With Application
        .ScreenUpdating = False
        On Error GoTo ErrCatcher

        ' Array of sheets to copy
        Sheets(Array("sourcedata", "pivot", "pivot2")).Copy
        On Error GoTo 0

        For Each ws In ActiveWorkbook.Worksheets
            ws.Cells.Copy
            ' Paste sheets
            ws.[A1].PasteSpecial

            ' Remove external links, hyperlinks and hard-code formulas
            ws.Cells.Hyperlinks.Delete
            Application.CutCopyMode = False

            ' Select A1 on sheet
            Cells(1, 1).Select
            ws.Activate
        Next ws
        Cells(1, 1).Select

        ' Save it in the same directory as original and close
        ActiveWorkbook.SaveCopyAs ThisWorkbook.Path & "\export.xls"
        ActiveWorkbook.Close SaveChanges:=False

        .ScreenUpdating = True
    End With
    Exit Sub

ErrCatcher:
    MsgBox "Specified sheets do not exist within this workbook"
End Sub 
```

但是，当我打开新工作簿时，数据透视表中的数据源仍指向原始工作簿。我的同事解释说，这是因为表格是一张一张地复制的，而不是一组复制的，并建议将表格复制为一个范围。我将如何将工作表复制为一个范围，或者将数据源更改为新复制的工作表是否更简单？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T01:22:39.560

您可以通过复制整个工作表而不是单元格来简化创建新工作簿部分。

至于将新轴点指向新源，您需要做的就是从 PivotSource 中删除外部引用。它采用格式`[oldworkbook]sourcedata!A1:Z100`，因此您只需截断括号内的部分。（这不是一个通用的解决方案，但在这种情况下，我们同时复制数据源选项卡和数据透视选项卡，因此我们知道新工作簿将有一个具有相同名称、相同大小、相同范围等的数据选项卡作为原始工作簿）

```
Sub CopyPivotsAndData()

Dim wb As Excel.Workbook, wbNew As Excel.Workbook
Dim ws As Excel.Worksheet
Dim pt As Excel.PivotTable
Dim s As String
Dim r As Integer

    Set wb = ThisWorkbook
    wb.Worksheets(Array("sourcedata", "pivot", "pivot2")).Copy
    Set wbNew = ActiveWorkbook

    Set ws = wbNew.Worksheets("pivot")
    Set pt = ws.PivotTables(1)
    s = pt.SourceData
    r = InStr(s, "]")
    pt.SourceData = Mid(s, r + 1)

    'repeat for pivot2, or loop if you have many worksheets

    wbNew.SaveAs "newworkbookname.xlsx"

    'close or clean up as necessary

End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T21:16:50.493

您可能想要“移动”（相当于剪切的工作表）工作表，而不仅仅是复制它们。在 excel 中复制任何内容都不会更改对复制数据的新位置的任何引用（它仍然使用原始数据）。但是将数据从一个地方剪切到另一个地方会改变对该数据新位置的任何引用。所以我会做这样的事情：

```
Sheets(Array("Sheet1", "Sheet2", "Sheet3")).Select
Sheets("Sheet3").Activate
Sheets(Array("Sheet1", "Sheet2", "Sheet3")).Move Before:=Workbooks("Book2").Sheets(2) 
```

这是被记录下来的——显然你会想根据你的具体情况适当地使用 .Move 命令。

或者，如果您对要使用的单元格执行此操作：

```
ws.Cells.Cut 
```

看起来您正在关闭原始工作簿而不保存，`ActiveWorkbook.Close SaveChanges:=False`所以我认为这不是问题 - 但仅供参考：除非您稍后保存，否则剪切不会影响您的原始副本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T18:07:27.817

我觉得最简单的选择是只更改枢轴上的数据源。不确定这是否是最简洁的语法或是否有快捷方式，但它对我有用。

```
' Change pivot table data source
ActiveWorkbook.Worksheets("pivot").PivotTables("PivotTable1").ChangePivotCache ActiveWorkbook. _
PivotCaches.Create(SourceType:=xlDatabase, SourceData:="stagePivotData", _
Version:=xlPivotTableVersion10) 
```

# macos - macports gcc4.7 找不到 pthread.h

> ID：13056626
> 
> 赞同：1
> 
> 时间：2012-10-24T19:49:28.733
> 
> 标签：macos, compilation, macports, ogre3d, gcc4.7

我已经用 macports 安装了 gcc4.7 并尝试构建 Ogre3d 1.8。

**问题是找不到 pthread.h。** 我在我的系统（Mac OSX 10.6.8）上的任何地方都找不到 pthread.h，而且我在 macports 上找不到任何用于 pthread 的端口。有谁知道 macports 的 gcc47 编译器是否损坏？我下载了 gcc4.7 编译器的源代码，zip 文件包含一个 pthread.h。

（正如您在日志中看到的那样，pthread.h 包含在系统头文件中，而不是 Ogre3d，所以我不能跳过依赖项）

错误输出：

```
In file included from /opt/local/include/gcc47/c++//x86_64-apple-darwin10/bits/gthr.h:150:0,
                 from /opt/local/include/gcc47/c++/ext/atomicity.h:34,
                 from /opt/local/include/gcc47/c++/bits/basic_string.h:41,
                 from /opt/local/include/gcc47/c++/string:54,
                 from /Users/parwrange/Documents/Blacksun/src/blacksun/3rdPartySrc/ogre_src_v1-8-1/OgreMain/include/OgrePrerequisites.h:33,
                 from /Users/parwrange/Documents/Blacksun/src/blacksun/3rdPartySrc/ogre_src_v1-8-1/OgreMain/include/OgreArchive.h:31,
                 from /Users/parwrange/Documents/Blacksun/src/blacksun/3rdPartySrc/ogre_src_v1-8-1/OgreMain/include/OgreStableHeaders.h:41,
                 from /Users/parwrange/Documents/Blacksun/src/blacksun/3rdPartySrc/ogre_src_v1-8-1/OgreMain/src/OgreAlignedAllocator.cpp:28:
/opt/local/include/gcc47/c++//x86_64-apple-darwin10/bits/gthr-default.h:41:21: fatal error: pthread.h: No such file or directory 
```

# php - 如何在我的 Web 应用程序中制作高亮功能？

> ID：13056628
> 
> 赞同：0
> 
> 时间：2012-10-24T19:49:38.177
> 
> 标签：php, jquery, html

我在我的 Web 应用程序中使用 jquery、php 和 html。我想添加一个突出显示功能，允许用户通过选择文本然后按“突出显示”按钮来突出显示任何文本。我该怎么做？

```
<span id="text">
highlighted text
</span>
<button type="submit" name="highlight"></button> 
```

当用户按下此按钮时，我想突出显示任何已选择的文本，然后为任何用户保存对文本的更改。我还希望用户能够选择突出显示颜色。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T20:16:07.863

这是一篇很长的文字，也许是你的答案，但这不适合评论区；

首先，一些论据，以帮助您决定应该开发什么，使用什么技术；

jQuery 还是 JavaScript？

JavaScript，因为如果您使用 jQuery，您要突出显示的网站可能没有 jQuery；

即使有 jQuery，它也可能是另一个版本，对于您和网站来说，事情会变得一团糟；

JavaScrpt 是一种通用语言，可以使用 Singleton 概念；

书签或扩展？

Bookmarklet，因为很容易在 DOM 中注入数据。

如果你开发一个扩展，那就是很多工作；您将不得不为 Chrome、Mozilla、Internet Exploder 开发扩展程序，我称之为（资源管理器）、safari ......而且工作量很大；

每个浏览器都有自己的bug，涉及扩展时的方法，所以使用书签；

您的应用程序很简单，但涉及大量代码；

首先，Bookmarklet 它是一个简单的按钮，所以它出现了 :))

这个按钮，当被点击时，它会将数据注入到 DOM 中；

这就是应用程序开始的地方；

您的应用程序将通过 javascript 请求与您正在查看的网页中的服务器进行通信；

此外，您必须附加/分离事件侦听器，例如鼠标按下；

此外，所有这些荧光笔过程都需要启动；这里可能涉及一些参数，以便通过使用唯一 ID 知道在表单中设置数据的位置；

这顶帽子是你想要的吗？

如果是，我会尽快发布代码；

我有没有提到你在使用 GEt 方法时有大约 2096 个字符的限制？

在将数据从 javascript 传递到服务器时，您还必须使用 JSON.stringify 方法；

这是一个使用 javascript 的典型书签按钮：

```
javascript:(function(){cas=document.createElement('SCRIPT');cas.type='text/javascript';cas.src=(window.location.protocol)+'<?= str_replace('http:', '', Yii::app()->createAbsoluteUrl('/api/v1/GetBookmarklet', array(), 'http')); ?>?version=<?= Yii::app()->getModule('api')->params['button_version']; ?>&url='+encodeURIComponent(location.href)+'&userAgent='+(JSON.stringify(navigator.userAgent))+((document.doctype)?('&doctype='+(document.doctype.name)):'')+'&x='+(Math.random());document.getElementsByTagName('head')[0].appendChild(cas);})(); 
```

我使用 Yii MCV 生成这个按钮，所以忽略 Yii 的东西......

我的书签代码很大，但这是一个简短的短版本： ps：此代码不起作用，因为它是部分的，它只是让您看到您想要做什么，以及它是如何完成的；这只是 js 部分，php 部分，您在其中捕获和处理数据，由您决定

```
<?php if (false) { ?><script><?php } ?>
    var Bookmarklet = Bookmarklet ? Bookmarklet : function(){

        var assetsURL = 'images and others url/ 3rd party url';
    var apiURL = 'server url';

    var imgsList = new Array();
    var ImgsListImgID = 0;
    //all the images found on the webpage
    var images = 0;
    var imgsListHeightWidth = [];
        var isHighlighting = false;

    var versionStatus;

        var flag1 = false;
        var flag2 = false;

        var precedentObj = null;

        var overlay,
        current,
        handler;

        var extractHL;
        var name=false,price=false,image=false;

    //do we save logs ?
    var consoleLog = true;

    var version_popup;

        var f  = function ()
        {

            var script = document.createElement("script");
            script.type = 'text/javascript';
            script.src = assetsURL+'/sizzle.js';
            var header = document.getElementsByTagName("head");
            header[0].appendChild(script);

            var popupdividreset = "reset";
            var DOCreset = document.getElementById(popupdividreset);

            if(DOCreset != null){
                return false;
            }

            var popupdivid = "details";
            var DOC = document.getElementById(popupdivid);

            if(DOC != null){
                return false;
            }

            //load css file, force a reload/recache
            addCSS(assetsURL+'/style.css?x=<?= $this->module->params['interface_version']; ?>');

            var divreset = document.createElement("div");
            divreset.id = popupdividreset;

            var div = document.createElement("div");
            div.id = popupdivid;

            //this will highlight the DOM element that you are hovering
            var divhighlight = document.createElement("div");
            divhighlight.id = "overlayhighlight";

            var divOutside = document.createElement("div");
            divOutside.id = "Overlay";

            var str = '<div id="divempty"></div>';

            str += divForm( 'none', div.id, images );              
            str += divLogin( 'none', div.id);            
            str += divDetails( 'none', div.id);
            str += divSuccess( 'none', div.id);
            str += divBroken( 'none', div.id);

            div.innerHTML = str;
            divreset.appendChild(div);
            document.body.insertBefore(divreset, document.body.firstChild);

            divOutside.innerHTML = "";
            document.body.insertBefore(divOutside, document.body.firstChild);

            //inserting the DOM div blank element imediatly after body tag
            divhighlight.innerHTML = "";
            document.body.insertBefore(divhighlight, document.body.firstChild);

            };

            function addCSS(url){
                var headID = document.getElementsByTagName("head")[0];
                var cssNode = document.createElement('link');
                cssNode.type = 'text/css';
                cssNode.rel = 'stylesheet';
                cssNode.href = url;
                cssNode.media = 'screen';
                headID.appendChild(cssNode);
            };

            function divForm( displayTarget, div_id, images )
            {

                return '<?php $this->renderHTMLtoJS('form', array('js' => array('displayTarget', 'div_id', 'images', 'assetsURL'), 'product' => $product, 'follower' => $follower)); ?>';

            };

            function createElementScript(src)
            {

                var script = document.createElement("script");
                script.type = 'text/javascript';
                script.src = src;
                //console.log("SRC: "+src);
                var header = document.getElementsByTagName("head");
                header[0].appendChild(script);

            };

            function hideAllDivs() {
                var a = ['ParrentLogin','ParrentDetails','ParrentForm'];
                for (x in a) {
                    var d=document.getElementById(a[x]);
                    if (d) {
                        d.style.display='none';
                    }
                }
            };

            function divGallery( displayTarget, div_id )
            {
                return '<?php $this->renderHTMLtoJS('gallery', array('js' => array('displayTarget', 'div_id', 'assetsURL'))); ?>';

            };

            f.prototype = {

                init : function() {
                            this.showDiv('ParrentForm');
                },

                showDiv: function(divId) {
                    var d=document.getElementById(divId);
                    if (d) {
                        hideAllDivs();
                        d.style.display=document.getElementById("divempty").style.display;
                    }
                },

                actionSubmit : function(formID,e)
                {
                    //alert(formID+'click');
                    if( formID == 1 )Bookmarklet.outBound("login");
                    if( formID == 2 )Bookmarklet.outBound("follow");
                    e.preventDefault();
                },
                toggleItem : function(id){
                    var item = document.getElementById(id);
                    if(item){
                        var parent = item.parentNode;
                        parent.removeChild(item);
                    }
                },
                hideDivs : function(){
                    hideAllDivs();
                },
                //all the data that has been send from the server to the bookmarlet passed thru this method
                //inBound has 2 parameters, because we need to know the action and the result value
                inBound : function(action,data)
                {

                    try {
                        //console.log(data);
                        if (parseInt(data.code) <0 ) {
                            //system error
                            alert('Internal error!');
                            return;
                        }
                        switch(action)
                        {
                            case 'bookmarklet':
                                alert('Bookmarklet error');
                                break;
                            case 'follow':
                                if(data.code!=0)
                                {
                                    document.getElementById('form_error').innerHTML = data.message;
                                }
                                else
                                {
                                    this.showDiv('ParrentSuccess');
                                }
                                break;
                            default:
                                alert('Unknown inBound action: '+action);
                                break;
                        }
                    } catch (err) {
                        if (consoleLog) {
                            //console.log(err.toString());
                        }
                        alert('Something went wrong, server returned invalid message!');
                    }
                },//end f inBound()
                //method used to transfer the data from the bookmarklet to the server
                //outBound needs to know only the action, the parameters will be contructed, ex. : ?action=x&...
                outBound : function(action)
                {
                    try {
                        switch(action)
                        {//start switch
                            case 'follow':
                                    createElementScript(apiURL+"/Follow?input="+encodeURIComponent(s));
                                break;
                            default:
                                alert('Unknown outBound action: '+action);
                                break;
                        }//end switch
                    }
                    catch (err) {
                        if (consoleLog) {
                            //console.log(err.toString());
                        }
                        alert('Something went wrong, couldn\'t prepare data!');
                    }

                }//end f outBound()
            }
            return f;
        }();
        var Bookmarklet = new Bookmarklet();    
        Bookmarklet.init(); 
```

# c++ - 使用向量和结构

> ID：13056633
> 
> 赞同：-1
> 
> 时间：2012-10-24T19:49:50.837
> 
> 标签：c++

如果我创建一个向量并用 64 个这样的结构填充它

```
struct movementType { int x, y , moves;};
vector<movementType> myVector(64); 
```

既然类型不是 int、double、string 等，我该如何使用算法？

让我们采用 fill_n 算法。如果你有

```
vector<int> someOtherVector(64); 
```

我们可以这样填充

```
fill_n (someOtherVector.begin(),64,20); 
```

如果我用我的 motionType 向量尝试这个​​，我会得到一个错误

```
MovementType empty;
empty.x = 5;
empty.y = 6;
empty.moves = 7;
fill_n (someOtherVector.begin(),64,empty); 
```

那么如何在向量中使用这些类型的 STL 算法呢？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T20:15:43.527

由于您实际上并没有说出您得到了什么错误，因此我们必须对解决方案进行猜测。另外，鉴于[此测试代码有效](http://ideone.com/EHbNu3)，我认为您一定在其他地方犯了错误。

您是否遇到运行时错误，例如分段错误？如果是这样，那么问题将是您尝试填充的向量`someOtherVector`中没有足够的元素。您实际上是否将其定义为`std::vector<movementType> someOtherVector(64)`或只是`std::vector<movementType> someOtherVector`. `std::fill_n`将给定值分配给您要填充的容器的每个元素，因此如果没有元素，您就会遇到问题。因此，请确保您的向量中有足够的元素。

这里的替代方法是用于`std::back_inserter`将元素添加到空向量：

```
std::vector<movementType> someOtherVector;
std::fill_n(std::back_inserter(someOtherVector), 64, empty); 
```

但是，你真的应该这样做：

```
std::vector<movementType> someOtherVector(64, empty); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T20:02:15.170

`fill_n (someOtherVector.begin(),64,empty);`没有多大意义，你正试图`vector<int>`用你的`movementType`. 如果您想填写`vector<movementType>`以下内容（假设您已经声明`vector<movementType> myVector(64);`）：

在 C++11 中：

```
fill_n(myVector.begin(), 64, movementType{1, 2, 3}); 
```

或 C++03：

```
movementType m = {1, 2, 3};
fill_n(myVector.begin(), 64, m); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T19:57:32.947

我的猜测是你需要为你的结构提供一个构造函数，它在 c++ 中的行为非常像一个类。有人想像

```
struct movementType 
{ 
  movementType(int X, int Y, int Moves) : x(X), y(Y), moves(Moves) { }  // Constructor with 3 int's
  movementType(const movementType &MT) : x(MT.x), y(MT.y), moves(MT.moves) { } // Copy constructor
  int x, y , moves; 
}; 
```

然后使用

```
fill_n(someOtherVector.begin(),64, movementType(5,6,7)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T19:54:32.853

您可以为您的类编写运算符，使其行为类似于您要使用的算法的原始类型，或者，在算法采用函数对象执行操作的情况下，编写 lambda 或仿函数类并将其传递给算法。

在这种情况下，运算符是`operator=`：

```
struct movementType
{
    int x;
    int y;
    int moves;

    movementType& operator=(int i)
    {
        // which member do you want to assign "i" to?
    }
}; 
```

# javascript - Foundation 中的 Google Map API 显示模态显示不正确

> ID：13056637
> 
> 赞同：3
> 
> 时间：2012-10-24T19:49:59.713
> 
> 标签：javascript, google-maps, zurb-foundation

> **可能重复：**
> [Reveal Modal 中的 Google Map API 未完全显示](https://stackoverflow.com/questions/13060779/google-map-api-inside-a-reveal-modal-not-showing-fully)

我有一个位于 Reveal Modal 中的 Google Map API。对于那些不知道那是什么的人来说，它基本上是一个隐藏的容器，当单击按钮时会弹出。我在这个显示模式中有谷歌地图 API，它正在显示，但没有显示所有地图，它只显示了三分之一。

如何让整个地图显示？

我的页面的链接： http: [//simplicitdesignanddevelopment.com/Fannie%20E%20Zurb/foundation/contact_us.html#](http://simplicitdesignanddevelopment.com/Fannie%20E%20Zurb/foundation/contact_us.html#)

单击 GOOGLE 地图按钮查看手头的问题

显示模态脚本：

```
<script type="text/javascript">
$(document).ready(function() {
$('#myModal1').click(function() {
$('#myModal').reveal();
});
});
</script> 
```

包含 Google Map API 的 Div

```
<div id="map_canvas" style="width:600px; height:300px;"></div>
<a class="close-reveal-modal">&#215;</a>
 </div> 
```

单击时显示谷歌地图的按钮

```
<div class="five columns">
  <ul class="button-group even three-up" id="contact-button-group">
    <li><a href="#" class="button" data-reveal-id="myModal">Google Map</a></li>
    <li><a href="#" class="button">Button 2</a></li>
    <li><a href="#" class="button">Button 3</a></li>
  </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T20:23:55.523

显示模态后，使用`google.maps.event.trigger(map, 'resize')`其中“地图”是地图的实例。

# delphi - Delphi - 隐藏控制台窗口

> ID：13056642
> 
> 赞同：5
> 
> 时间：2012-10-24T19:50:13.523
> 
> 标签：delphi

> **可能重复：**
> [Delphi 的 Profiler 和内存分析工具](https://stackoverflow.com/questions/291631/profiler-and-memory-analysis-tools-for-delphi)
> [如何隐藏控制台窗口？](https://stackoverflow.com/questions/13042036/how-do-i-hide-the-console-window)

我重新发布此内容以使其更清楚。所以，这是我的控制台应用程序：

![在此处输入图像描述](../Images/a5bc7ffda415dac992aef3f77c0ca437.png)

这会打开一个到 127.0.0.1:81 的套接字，当控制台应用程序可见时它工作正常，现在我如何让它作为控制台正常工作但使控制台不可见？

我正在使用 Delphi 2007 (7)。

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-24T20:01:31.750

您可以使用[`ShowWindow`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633548%28v=vs.85%29.aspx)和[`GetConsoleWindow`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683175%28v=vs.85%29.aspx)WinAPi 功能。

试试这个样本

```
{$APPTYPE CONSOLE}

uses
  Windows,
  SysUtils;

function GetConsoleWindow: HWND; stdcall; external kernel32;

begin
  try
    Writeln('Press enter to hide console the window');
    Readln;
    //hide the console window
    ShowWindow(GetConsoleWindow, SW_HIDE);

    //do something
    Sleep(5000);

    Writeln('Press enter to exit');
    //show the console window
    ShowWindow(GetConsoleWindow, SW_SHOW);
    Readln;
  except
    on E: Exception do
      Writeln(E.ClassName, ': ', E.Message);
  end;
end. 
```

# android - Emma 没有意识到正在测试匿名内部类

> ID：13056643
> 
> 赞同：1
> 
> 时间：2012-10-24T19:50:15.010
> 
> 标签：android, ant, emma

我有一个生成线程的类和一个验证结果的测试。Emma 没有报告线程的代码覆盖率，即使我可以在调试器中单步执行并看到它正在被测试。谁能看到为什么会发生这种情况并告诉我如何解决？

**产生线程的方法**

```
private static String deviceName = DEFAULT_DEVICE_NAME;
protected void initializeDeviceName() {
    if (deviceName.equals(DEFAULT_DEVICE_NAME)) {
        DeviceContext.execute(new Runnable() {
            @Override
            public void run() {
                deviceName = DeviceManager.getDeviceName();
            }
        });
    }
} 
```

**考试**

```
public void testGetDeviceName() {
    DeviceManager.setDeviceName(DEVICE_NAME);
    // constructor calls initializeDeviceName()
    iconListener = new HealthIconListener(view); 
    sleep(SHORT_SLEEP_TIME);
    assertEquals(DEVICE_NAME, HealthIconListener.getDeviceName());
} 
```

**DeviceContext中的相关方法**

```
private static ExecutorService getExecutor() {
    if (executor == null) {
        executor = Executors.newCachedThreadPool();
    }
    return executor;
}

public static void execute(Runnable task) {
    getExecutor().execute(task);
} 
```

# c++ - 跨多个类成员函数共享模板参数

> ID：13056647
> 
> 赞同：2
> 
> 时间：2012-10-24T19:50:38.827
> 
> 标签：c++, templates

对不起，如果这个问题有点令人困惑。我真的在问学习目的，看看是否有办法做到这一点。

在下面的类中，我必须为 CreateObject() 和 GetObject() 指定一个模板参数：

```
class ObjectManager
{
public:
    template <class T>
    void CreateObject(int id)
    {
        //Store pointer to newly created object in a map
    }

    template <class T>
    T* GetObject(int id)
    {
        //Find object using id and return a T* to it
    }
}; 
```

CreateObject() 使用模板参数创建正确类型的对象，然后将指向它的指针存储在映射中。GetObject() 使用模板参数返回所需类型的指针。对于某些对象，我希望 GetObject() 返回指向实际对象类型的指针。对于其他对象，我希望 GetObject() 返回一个指向父类型的指针。

截至目前，每当我调用 GetObject() 时，我都需要指定类型：

```
SomeType* pST = m_objectManager.GetObject<SomeType>(id);
AnotherType* pAT = m_objectManager.GetObject<AnotherType>(id); 
```

我的目标是在我的 CreateObject() 函数中指定实际的对象类型和所需的返回类型作为模板参数：

```
class ObjectManager
{
public:
    template <class T, class DesiredReturnType>
    void CreateObject(int id)
    {
        //Store pointer to newly created object of type T in a map
        //The DesiredReturnType would be used by GetObject() to return the correct type of pointer
    }

    //This isn't possible but would be ideal.
    DesiredReturnType* GetObject(int id)
    {
        //Return a DesiredReturnType* to the object
    }
};

m_objectManager.CreateObject<SomeType, ParentOfSomeType>(id);

//Now I don't need to specify a template argument when calling GetObject().
//CreateObject() will create a new SomeType.
//GetObject() will return a ParentOfSomeType* which is really pointing to a SomeType object
ParentOfSomeType* pPST = m_objectManager.GetObject(id); 
```

由于每个对象都有不同的类型和不同的期望返回类型，我将无法使用类模板参数。类型和所需的返回返回类型总是会根据我创建的对象类型而变化。

这样的事情可能吗？是否有某种设计模式可以在这种情况下有所帮助？

编辑：

设计选择的原因如下。我将调用另一个具有不同行为的函数，具体取决于接收的是 Parent* 还是 Child*。

通过取出模板参数，我认为我可以做这样的事情：

```
for(int id = 0; id < 10; id++)
MyFunction(m_objectManager.GetObject(id)); 
```

它可能不会改变这是一个糟糕的决定选择的事实，但我主要是出于好奇而询问。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T20:11:54.213

C++ 中的函数只能有一个返回类型，并且该类型必须在编译时已知。函数模板可以有一个依赖于它的模板参数的返回类型。由于 C++ 是静态类型的，因此必须在编译时解决依赖关系。这意味着您无法在运行时从映射中查找所需的返回类型。但是，您可以从模板参数派生它。

编辑：澄清：当您“使用”类似`FunctionTemplate<Type>()`or`FunctionTemplate(parameterThatsUsedToDeriveTheTemplateArguments)`的函数模板时，函数模板被实例化。这意味着将创建一个带有“名称”的普通函数`FunctionTemplate<ARG1, ARG2, ...>`- 参数 ARG1、ARG2 等的模板的所谓“特化”。这个函数就像一个普通函数，这意味着它也只能有一个固定的编译时必须知道的返回类型。/编辑

换句话说：`GetObject`必须至少有一个模板参数用于派生返回类型。可以工作的一件事 - 取决于您希望如何使用它 - 将在`id`参数类型中编码所需的返回类型。

例如像

```
template <class T>
struct ObjectId {
    typedef T ReturnType;
    ObjectId(int id) : m_id(id) {}
    int m_id;
};

class ObjectManager {
    ...
    template <class T, class ID> // ID type will be deduced
    void CreateObject(ID id) {
        ...
    }

    template <class ID> // ID type will be deduced
    typename ID::ReturnType* GetObject(ID id) {
        ...
    }
};

...
ObjectManager obman;
auto const idFoo = ObjectId<Foo>(1);
auto const idBar = ObjectId<BarBase>(2);

obman.CreateObject<Foo>(idFoo);
obman.CreateObject<Bar>(idBar);
Foo* foo = obman.GetObject(idFoo);
BarBase* bar = obman.GetObject(idBar); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T20:02:54.253

类模板呢：

```
class ObjectManager
{
public:
   /// reference to some internal object manager 
   template <class T, class DesiredReturnType>
   class ObjectRef {
   public:
     ObjectRef(ObjectManager& manager) {}
     DesiredReturnType* GetObject()
     {
     }
   };
    template <class T, class DesiredReturnType>
    ObjectRef<T,DesiredReturnType> CreateObject(int id)
    {
    }
};

auto ref = m_objectManager.CreateObject<SomeType, ParentOfSomeType>(id);

//Now I don't need to specify a template argument when calling GetObject().
//CreateObject() will create a new SomeType.
//GetObject() will return a ParentOfSomeType* which is really pointing to a SomeType object
ParentOfSomeType* pPST = ref.GetObject(); // no need to specify id... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T21:37:11.880

尝试访问者模式。[Ideone.com 上的实时示例](http://ideone.com/qhmLax)

```
struct ConcreteVisitor: IVisitor
{
    virtual void visit(int)
    {
        cout << "visiting int" << endl;
    }
    virtual void visit(double)
    {
        cout << "visiting double" << endl;
    }
    virtual void visit(SomeClass&)
    {
        cout << "visiting SomeClass" << endl;
    }
    // ..
};
int main(int argc,char *argv[])
{
    ObjectManager manager;
    ConcreteVisitor visitor;

    manager.create_object<int>(1);
    manager.create_object<double>(2);
    manager.create_object<SomeClass>(3);

    manager.apply(1,visitor);
    manager.apply(2,visitor);
    manager.apply(3,visitor);
    return 0;
} 
```

输出是：

```
SomeClass::SomeClass()
visiting int
visiting double
visiting SomeClass
SomeClass::~SomeClass() 
```

* * *

完整代码：

```
#include <boost/shared_ptr.hpp>
#include <boost/ptr_container/ptr_map.hpp>
#include <iostream>
#include <ostream>
#include <map>

using namespace std;
using namespace boost;
typedef int ID;

struct SomeClass
{
    SomeClass()
    {
        cout << "SomeClass::SomeClass()" << endl;
    }
    ~SomeClass()
    {
        cout << "SomeClass::~SomeClass()" << endl;
    }
};

struct IVisitor
{
    virtual void visit(int)=0;
    virtual void visit(double)=0;
    virtual void visit(SomeClass&)=0;
    // ..
};

struct ConcreteVisitor: IVisitor
{
    virtual void visit(int)
    {
        cout << "visiting int" << endl;
    }
    virtual void visit(double)
    {
        cout << "visiting double" << endl;
    }
    virtual void visit(SomeClass&)
    {
        cout << "visiting SomeClass" << endl;
    }
    // ..
};

struct ITypeStorage
{
    virtual void apply_visitor(void *obj,IVisitor &visitor)=0;
};

template<typename ObjectType> struct TypeStorage: ITypeStorage
{
    virtual void apply_visitor(void *obj,IVisitor &visitor)
    {
        visitor.visit( *(static_cast<ObjectType *>(obj)) );
    }
};

class ObjectManager
{
    map<ID,boost::shared_ptr<void> > objects;
    ptr_map<ID,ITypeStorage> types;
public:
    template <class T>
    void create_object(ID id)
    {
        objects[id].reset(new T());//shared_ptr will use right deleter
        types.insert(id,new TypeStorage<T>());
    }
    void apply(ID id,IVisitor &visitor)
    {
        types.find(id)->second->apply_visitor(objects[id].get(),visitor);
    }
};

int main(int argc,char *argv[])
{
    ObjectManager manager;
    ConcreteVisitor visitor;

    manager.create_object<int>(1);
    manager.create_object<double>(2);
    manager.create_object<SomeClass>(3);

    manager.apply(1,visitor);
    manager.apply(2,visitor);
    manager.apply(3,visitor);
    return 0;
} 
```

# php - json贾斯汀慢

> ID：13056654
> 
> 赞同：0
> 
> 时间：2012-10-24T19:51:22.353
> 
> 标签：php, json, justin.tv

人们开始抱怨我的网站速度很慢。我需要你的帮助来确定问题。在找到更好的解决方案后，我一直在疯狂地搜索互联网，但没有成功。我正在尝试从 justin.tv/twitch 获取流名称以及流媒体有多少访客。

目前我正在使用他们自己的 API wiki 页面中的入门代码。然而，它非常缓慢。我有 52 个流存储在我的 mySQL 数据库中，我将它们放入一个数组中，然后使用 json 来解析数据。

```
<?php
$result = mysql_query("SELECT streamname FROM streams") or die(mysql_error());

$ids=array(); 
while($row = mysql_fetch_assoc($result))  
{
    $ids[]=$row["streamname"]; 
}

$stream_list = implode(",", $ids);
$mycurl = curl_init();

curl_setopt ($mycurl, CURLOPT_HEADER, 0);
curl_setopt ($mycurl, CURLOPT_RETURNTRANSFER, 1); 

//Build the URL 
$url = "http://api.justin.tv/api/stream/list.json?channel=" . $stream_list; 
curl_setopt ($mycurl, CURLOPT_URL, $url);

$web_response =  curl_exec($mycurl);
$results = json_decode($web_response); 
foreach($results as $s) 
{   
 echo "<a href='stream.php?watch=" . $s->channel->login . "'>" . $s->channel->login . " " . $s->channel_count . " viewers</a><br />";
}
?> 
```

**更新。**是的，我使用我的 MySQL 来设置每个频道的类别类型。我也试过没有这个，速度差异不是很大。所以它仍然是需要时间加载的json。这是我如何使用 MySQL

```
 $result = mysql_query("SELECT streamname FROM streams WHERE race = 'terran' OR race = 'protoss' OR race = 'zerg'") or die(mysql_error());

$ids=array(); 
while($row = mysql_fetch_assoc($result))  
{
    $ids[]=$row["streamname"]; 
}

$stream_list = implode(",", $ids);
$mycurl = curl_init();

curl_setopt ($mycurl, CURLOPT_HEADER, 0);
curl_setopt ($mycurl, CURLOPT_RETURNTRANSFER, 1); 

//Build the URL 
$url = "http://api.justin.tv/api/stream/list.json?channel=" . $stream_list; 
curl_setopt ($mycurl, CURLOPT_URL, $url);

$web_response =  curl_exec($mycurl);
$results = json_decode($web_response); 
echo "<div id=\"tab1\">";
foreach($results as $s) 
{
    // get race
    $sql = mysql_query("SELECT race, streamname, name FROM streams WHERE streamname = '" . $s->channel->login . "'") or die(mysql_error());

    $row = mysql_fetch_array($sql, MYSQL_BOTH);
    $race = $row['race']; // race
    $streamername = $row['name'];

    echo "race: " . $race . " <a href='stream.php?watch=" . $s->channel->login . "'>" . $row['name'] . " " . $s->channel_count . " viewers</a><br />";

}
echo "</div>"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T19:59:17.093

最有可能的问题是，从 api.justin.tv 轮询数据需要很长时间（与您的代码的其余部分相比）。http 连接需要一些时间。在提取数据时，没有可以显示的内容，因此用户会经历很长的等待时间。

有几种解决方案。您不应该在每次用户打开网站时加载 api 信息，而是定期加载。您可以每 5 分钟下载一次数据，或者使用 cron 作业每隔几分钟或几秒钟将其拉入后台（取决于值更改的速度）并将数据存储在数据库表中。

如果数据存储在您的服务器上（即使在慢速文件系统上），它会快得多。

# image - EXTJS：如何在表单中插入图像

> ID：13056661
> 
> 赞同：0
> 
> 时间：2012-10-24T19:52:07.953
> 
> 标签：image, forms, extjs, extjs3

我在将图像插入表单时遇到问题。图像的地址托管在数据库中，我必须通过 JSON 动态加载。我在 PHP 中使用过 JSON。我必须留下一张照片，它成功但不是动态的。

[将图像插入表单](http://imageshack.us/a/img812/9996/picstark.jpg)

还留下了实现将图片加载到表单中的代码。它参考了我必须动态执行的操作

```
{
fieldLabel  : 'Icono',
xtype   : 'panel',
id      : 'panelIcon',
width: 400,
height: 48,
value: 'valorIdIcon',
autoScroll:true,
layout: {
    type: 'table',
    columns: 15
    },
 defaults: {
    // applied to each contained panel
    bodyStyle:'background-color:#0099FF',
    style: 'border-color:#b5b8c8'
    },
items: 
    [{
        id: 'acces.jpg',
        width: 32,
        html: '<img src="../../Images/IconSelect/acces.jpg" onclick="javascript:verID(this);"/>',
        listeners:{
            render: function(e){ 
            e.body.on('click',function(){
            valorIdIcon = e.body.parent().parent().id;
            });
                                                    },
    }
                                            }, 
```

有人帮我一把吗？感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T12:30:08.957

我用 PHP 从服务器端完成了它，从 PHP 编写代码并返回到前端并做了一个`eval()`.

# haskell - 为什么 Haskell 中没有 IO 转换器？

> ID：13056663
> 
> 赞同：56
> 
> 时间：2012-10-24T19:52:11.993
> 
> 标签：haskell, io, monads, monad-transformers

每个其他 monad 都带有一个转换器版本，据我所知，转换器的概念是 monad 的通用扩展。按照其他变压器的构建方式，`IOT`将类似于

```
newtype IOT m a = IOT { runIOT :: m (IO a) } 
```

为此我可以在现场编写有用的应用程序：`IOT Maybe`可以执行 IO 操作或不执行任何操作，`IOT []`可以构建一个以后可以使用的列表`sequence`。

那么为什么 Haskell 中没有 IO 转换器呢？

（注意：我[在 Haskell Cafe 上看到过这篇文章](http://www.haskell.org/pipermail/haskell-cafe/2004-December/008160.html)，但无法理解。此外，[ST 变压器的 Hackage 页面](http://hackage.haskell.org/packages/archive/STMonadTrans/0.2/doc/html/Control-Monad-ST-Trans.html)在其描述中提到了一个可能相关的问题，但没有提供任何细节。）

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-10-24T20:17:20.540

考虑具体的例子`IOT Maybe`。您将如何为此编写`Monad`实例？你可以从这样的事情开始：

```
instance Monad (IOT Maybe) where
    return x = IOT (Just (return x))
    IOT Nothing >>= _ = IOT Nothing
    IOT (Just m) >>= k = IOT $ error "what now?"
      where m' = liftM (runIOT . k) m 
```

现在你有了`m' :: IO (Maybe (IO b))`，但你需要一些类型`Maybe (IO b)`，其中——最重要的是——和之间的选择`Just`应该`Nothing`由`m'`. 那将如何实施？

当然，答案是它不会，因为它不能。你也不能证明`unsafePerformIO`隐藏在纯接口后面的 in 是合理的，因为从根本上说，你要求一个纯值——`Maybe`构造函数的选择——依赖于`IO`. Nnnnnope，不会发生。

在一般情况下情况甚至更糟，因为任意（普遍量化的）`Monad`比实际更不可能解开`IO`。

* * *

顺便说一句，`ST`您提到的变压器的实现方式与您建议的不同`IOT`。`ST`它使用as a `State`-like monad的内部实现，使用编译器提供的~~魔法精灵粉~~`StateT`特殊原语，并在此基础上定义 -like 转换器。`IO`在内部实现为更神奇`ST`的 ，因此`IOT`可以以类似的方式定义假设。

并不是说这真的会改变任何事情，除了可能让您更好地控制由`IOT`.

# c++ - Eclipse CDT 中未解决的包含路径名称不准确

> ID：13056667
> 
> 赞同：2
> 
> 时间：2012-10-24T19:52:30.777
> 
> 标签：c++, eclipse-cdt

我正在包含来自另一个项目的文件，但由于包含路径的细微差别，我遇到了问题。

```
#include "foo/Foo.h" 
```

找不到我要查找的文件，因为该文件实际上位于目录“foo/src/Foo.h”中

我已经在项目设置中使用了路径和符号引用选项卡，但还没有找到一种方法来将“src”部分附加到我搜索的内容中。我可以通过引用我的输出目录来解决这个问题，但显然我会打开标题的副本而不是原始文件。有什么想法还是我是 SOL？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T02:38:56.410

我明白为什么您尝试做的事情会有用。但是，我什至反对尝试。您正在规避 C 约定，而不是 Eclipse 约定。即使您可以让它工作（使用符号链接或其他文件系统间接机制），您也可能会在以后为此付出代价。

这两个选项之一怎么样？我会说最好的方法是`#include "foo/src/Foo.h"`.

如果您没有名称冲突，那么您可以`#include "foo.h"`添加`someplace/foo/src`到您的包含路径中，这将是最标准的做事方式。

# batch-file - 批处理文件计数器

> ID：13056669
> 
> 赞同：1
> 
> 时间：2012-10-24T19:52:42.930
> 
> 标签：batch-file

嗨，我想知道如何以 3 位格式打印 1 到 200 的列表。我可以打印 1 到 200，但不知道如何进行格式化。请帮忙

```
FOR /L %%A IN (1,1,200) DO (ECHO %%A) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T21:24:07.030

您必须在前面设置一个具有足够零的变量，然后取最后几个字符以给出正确的范围。延迟扩展意味着所使用的变量不会在`do`遇到时只计算一次，而是每次使用该变量。

此示例将打印 1-200

```
@echo off
setlocal enabledelayedexpansion

for /l %%a in (1,1,200) do (
set test1=00%%a
set test2=!test1:~-3!
echo !test2!
) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-25T12:33:33.067

```
@echo off
title Counter
SET /A XCOUNT=0

:loop
SET /A XCOUNT+=1
IF "%XCOUNT%" == "301" (
    GOTO end
) ELSE (
    IF %XCOUNT% LSS 100 (
        IF %XCOUNT% LSS 10 (
            echo 00%XCOUNT%
            GOTO loop
        ) ELSE (
            echo 0%XCOUNT%
            GOTO loop
        )
    ) ELSE (
    echo %XCOUNT%
    GOTO loop
    )
)
:end

pause 
```

我知道它很长，但是嘿，它有效！

# java - 如何交换数组中的两个整数，其中我的方法从 main 中获取两个整数和一个数组？

> ID：13056670
> 
> 赞同：0
> 
> 时间：2012-10-24T19:52:45.207
> 
> 标签：java, arrays, methods, integer, main

我在 main 中调用了我的 swap 方法，但它并没有改变任何东西。我究竟做错了什么？

```
public static void main(String[] args){

    int mainArr[] = new int[20];

    for(int i = 0; i<mainArr.length; i++){
    swapper(3, 14, mainArr);
    System.out.print(i + mainArr[i] + " ");
    }
}

public static void swapper (int a, int b, int[] mainArr){
    int t = mainArr[a];
    mainArr[a] = mainArr[b];
    mainArr[b] = t;
} 
```

我的代码产生

```
0, 1,  2, 3,...19 
```

以正常的升序排列，我希望它交换第 4 个和第 15 个元素。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T19:56:07.220

移动方法调用：-

```
swapper(3, 14, mainArr); 
```

在你的 for 循环之外。因为，如果您的循环运行`even`多次，它不会影响数组。

此外，在实际交换元素之前，您需要先初始化数组。在调用`swapper`.

```
for(int i = 0; i<mainArr.length; i++){
    mainArr[i] = i;
}

swapper(3, 14, mainArr);

for(int i = 0; i<mainArr.length; i++){
    System.out.print(i + mainArr[i] + " ");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T19:56:32.383

编写代码如下：

```
int mainArr[] = new int[20];  

for(int i =0; i <mainArr.length;i++)  
{  
    mainArr[i]=i;
}  

swapper(3,14,mainArr); 
```

将解决问题。问题是你碰巧调用了偶数次交换，所以它完全没有任何效果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T19:56:34.177

您调用 swapper 的次数与数组中的元素相同。

*   如果数组的长度是偶数，则什么都不会改变
*   如果数组的长度是奇数，它将改变

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-31T10:54:16.917

```
public class swapInt
{ 
public static void main(String args[])
{

swap(new int[]{2,3,5,6,8},1,3);

}
public static void swap(int[]a,int i,int j)
{
    int temp=a[i];
    a[i]= a[j];
    a[j]=temp;
    for(int b=0;b<a.length;b++)
    {

    System.out.println(a[b]);
    }
 }
} 
```

# sql - 从两个现有表中创建一个新表，并具有每种组合的可能性

> ID：13056673
> 
> 赞同：4
> 
> 时间：2012-10-24T19:53:08.577
> 
> 标签：sql, sql-server, sql-server-2012

我有两个临时表 #a 和 #b 都填充了整数值。假设它们都包含 10 行，值为 1-10。

我想创建第三个临时表#c，其中包含 a 和 b 的所有可能组合。所以它总共有 100 行，有 (1,1), (1,2) ... (10, 10)。我将如何在 SQL 中执行此操作。我正在使用的实现是 SQL Server 2012。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-24T19:56:41.027

交叉加入将获得所有组合

```
SELECT a.Col
, b.Col
FROM TableA a
CROSS JOIN TableB b 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-24T19:55:12.913

我*想*你可以做

```
SELECT * INTO #c FROM #a,#b 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T19:56:09.707

```
BEGIN
DECLARE @a TABLE(x INT)
DECLARE @b TABLE(x INT)
INSERT INTO @a VALUES (1), (2)
INSERT INTO @b VALUES (1), (2)
select * from @a,@b
END 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-24T20:14:19.753

这里肯定还有其他正确答案，但我会将它们中最好的元素添加在一起以完全回答这个问题：

```
select a.Col as ColA    -- Give the columns a name for the destination
    , b.Col as ColB
into #c                 -- Generates destination temp table #c
from #a as a
    cross join #b as b  -- Cross join is the preferred syntax
order by a.Col, b.Col   -- Optional but often helpful (aesthetic, identities, indexing, etc) 
```

所以是的，当您想要笛卡尔积时，请使用[交叉连接](http://msdn.microsoft.com/en-us/library/ms190690.aspx)。

# c# - DataGridView 列页脚 c#.net winforms

> ID：13056678
> 
> 赞同：5
> 
> 时间：2012-10-24T19:53:26.023
> 
> 标签：c#, .net, c#-4.0

有没有办法在`datagridview`没有数据绑定的情况下添加列页脚？我正在使用它来获取用户输入以添加库存。目前我正在使用标签来显示总数，但如果可能的话，我想将其更改为页脚。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-25T13:00:47.237

我之前遇到过同样的问题，经过长时间的搜索后我意识到；

1.  Winform Datagridview 不支持添加页脚。

2.  我尝试添加一个可以保存摘要的额外行，但仍然无法正常工作。

3.  您可以创建一个用户控件，该控件具有两个网格并且下方的网格包含摘要。

解决方案 - ![在此处输入图像描述](../Images/bb12fa5232a094d9e8b459470418153a.png)

4.  我使用数据绑定的解决方案。(1)-我创建一个具有（名称、成本）属性的抽象对象**项目**。(2)-我创建一个具体项目，即继承**项目的****ConcItem** (3)-我创建一个页脚项目，即**FooterItem**这也继承了**Item** (4) - Items 的集合，即 ItemList，您在其中实例化页脚项。(5) 最后，在您进行数据绑定之前，调用添加页脚项的方法。

     ******```
    public abstract class Item
    {
      public virtual string Name { get; set; }
      public virtual int Cost { get; set; }
    }
    public  class ConcItem:Item
    {
      public override string Name { get; set; }
      public override int Cost { get; set; }        
    }
    public  class FooterItem:Item 
    {
      public override string Name { get { return "Total"; } }
      public override int Cost { get; set; }
    }
    public class ItemList : List<Item>
    {
      private Item _footer;

      public void SetFooter()
      {
        _footer = new FooterItem();            
        foreach (var item in this)
        {
          _footer.Cost += item.Cost;              
        }
        this.Add(_footer);
      }
    }

    public partial class Form1 : Form
    {
      Item _item;
      ItemList _itemList;
      public Form1()
      {
        InitializeComponent();
        dgv.DataBindingComplete += dgv_DataBindingComplete;
        _itemList = new ItemList();

        SetSampleData();
      }
      private void SetSampleData()
      {
        _item = new ConcItem();
        _item.Name = "Book";
        _item.Cost = 250;
        _itemList.Add(_item);

        _item = new ConcItem();
        _item.Name = "Table";
        _item.Cost = 500;
        _itemList.Add(_item);

        _item = new ConcItem();
        _item.Name = "PC";
        _item.Cost = 700;
        _itemList.Add(_item);

        dgv.DataSource = null;
        _itemList.SetFooter();  //Add the footer item b4  data binding
        dgv.DataSource = _itemList;
      }
      void dgv_DataBindingComplete(object sender, DataGridViewBindingCompleteEventArgs e)
      {
        //If you want to do some formating on the footer row
        int rowIndex = dgv.Rows.GetLastRow(DataGridViewElementStates.Visible);
        if (rowIndex <= 0)
        {
          return;
        }
        dgv.Rows[rowIndex].DefaultCellStyle.BackColor = Color.Red;
        dgv.Rows[rowIndex].DefaultCellStyle.SelectionBackColor = Color.Red;        
        dgv.Rows[rowIndex].DefaultCellStyle.Font = new Font("Microsoft Sans Serif", 12f,    FontStyle.Bold);
      }
    } 
    ```****** 

 ******* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-07-23T18:53:45.987

在我的一个应用程序中，我通过像这样利用 DataGridView 的 NewRow 来解决它。

```
using System;
using System.Drawing;
using System.Windows.Forms;

namespace WindowsFormsApplication2
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();

            this.dataGridView1.CellFormatting += dataGridView1_CellFormatting;
            this.dataGridView1.CellValueChanged += dataGridView1_CellValueChanged;
        }

        void dataGridView1_CellValueChanged(object sender, DataGridViewCellEventArgs e)
        {
            if (e.RowIndex != this.dataGridView1.NewRowIndex && e.ColumnIndex == 2)
            {
                this.dataGridView1.InvalidateRow(this.dataGridView1.NewRowIndex);
            }
        }

        void dataGridView1_CellFormatting(object sender, DataGridViewCellFormattingEventArgs e)
        {
            if (e.RowIndex == this.dataGridView1.NewRowIndex)
            {
                e.CellStyle.Font = new Font(e.CellStyle.Font, FontStyle.Bold);
                e.CellStyle.ForeColor = Color.Red;
                switch (e.ColumnIndex)
                {
                    case 0:
                        e.Value = "Total";
                        break;

                    case 2:
                        var sum = 0.0d;
                        for (int i = 0; i < this.dataGridView1.NewRowIndex; i++)
                        {
                            var value = this.dataGridView1[2, i].Value;
                            if (value is double)
                            {
                                sum += ((double)value);
                            }
                        }
                        e.Value = Math.Round(sum, 2);
                        break;
                    // Single line version of case 2 would be
                    // e.Value = this.dataGridView1.Rows.Cast<DataGridViewRow>().Where(a => a.Index != a.DataGridView.NewRowIndex).Select(a => (double)a.Cells[2].Value).Sum().ToString("N2");
                }
            }
        }

    }
} 
```

这是它如何工作的实时屏幕截图。

[![在此处输入图像描述](../Images/3dc2a9d23f1b84ca5b64753c5027a193.png)](https://i.stack.imgur.com/B3tt0.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-01T03:20:50.140

有一个更好的解决方案。在这个解决方案中，每次单元格内容发生变化时，都会重新计算并显示该值。

我的数据网格视图如下所示。

[![数据网格](../Images/f2ee9f018dac7a74f7c1b1856f66ac43.png)](https://i.stack.imgur.com/ma0zC.png)

在此解决方案中，您可以拥有任意数量的列和任意数量的行。

```
private void updateDataGridViewTotal(DataGridView dgv)
    {
        DataTable dt = (DataTable)dgv.DataSource;
        int lastRow = (dgv.Rows.Count - 1);
        if (dt.Rows[lastRow][0].ToString() == "Total")
        {
            dt.Rows.RemoveAt(lastRow);
        }
        int[] tot = new int[dt.Columns.Count];
        Array.Clear(tot, 0, tot.Length);

        foreach (DataRow row in dt.Rows)
        {
            int rowSum = 0;
            for (int i = 1; i < dt.Columns.Count - 1; i++)
            {
                tot[i] += Convert.ToInt32(row[i]);
                rowSum += Convert.ToInt32(row[i]);
            }
            row["Total"] = rowSum;
        }
        DataRow newRow = dt.NewRow();
        newRow["Agent"] = "Total";
        for (int i = 1; i < tot.Length; i++)
        {
            newRow[i] = tot[i];
        }
        dt.Rows.Add(newRow);
        dgv.DataSource = dt;
    } 
```

只需将您的 datagridview 传递给该函数。******

# html - 带/不带引号的 HTML 属性

> ID：13056683
> 
> 赞同：28
> 
> 时间：2012-10-24T19:53:57.347
> 
> 标签：html, quotes

以下代码块之间有什么区别吗？

```
<iframe src="http://example.com" width=100%></iframe> 
```

```
<iframe src=http://example.com width="100%"></iframe> 
```

我都试过了，两者似乎都有效，但我问的是以防万一有什么我需要小心的？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-10-24T21:49:25.217

除了

1.  如果您验证您的页面，可能需要也可能不需要引号以避免错误消息，具体取决于所使用的文档类型
2.  如果您向浏览器提供具有 XML 内容类型的页面（这种情况很少见且很少有用），则需要引号 - 否则页面根本不会显示，只是一条错误消息
3.  如果页面是使用 XML 工具处理的，则引号是必需的。

否则，仅当属性值包含空格、换行符、Ascii 引号 (")、Ascii 撇号 (')、重音符 (`)、等号 (=)、小于号 (<) 或大于号 (>)。这样`style = width:20em`会起作用（尽管它可能看起来有些晦涩），而`style = width: 20em`不会——由于空间的原因，你需要写`style = "width: 20em"`.

为简单起见，许多人总是在所有属性值周围加上引号。其他人认为引号使代码有点混乱，所以他们尽可能省略它们。

完全独立于此，`src="www.example.com"`意味着相对 URL 引用，而不是人们期望的意思。你可能的意思是`src="http://www.example.com"`。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-24T20:01:45.597

根据**[W3C](https://www.w3.org/TR/html5/syntax.html#elements-attributes)**，有四种类型的属性语法：

1.  空属性语法
2.  不带引号的属性值语法
3.  单引号属性值语法
4.  双引号属性值语法

这些确实适用于 HTML5，但是当提到 < HTML5 时，**[W3C](http://www.w3.org/wiki/Doctypes_and_markup_styles)**表示根据使用的文档类型（例如，严格、过渡等）需要引号（单引号或双引号）。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-10-24T19:55:55.530

不是。。两个是一样的。。

在 HTML 5 中，属性周围的引号是**可选的。**（除非值有空格或特殊字符）

但我觉得将它们括在引号中是一种更好的做法。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2018-08-08T17:22:31.247

> # 不带引号的属性值语法
> 
> 属性名称，后跟零个或多个空格字符，后跟单个 U+003D 等号字符，后跟零个或多个空格字符，然后是属性值，除了上述对属性值的要求外，不得包含任何文字空格字符、任何 U+0022 引号字符 (")、U+0027 撇号字符 (')、U+003D 等号字符 (=)、U+003C 小于号字符 (<)、 U+003E GREATER-THAN SIGN 字符 (>) 或 U+0060 GRAVE ACCENT 字符 (`)，并且不能是空字符串。

来源：[W3 HTML5 规范 - 第 8.1.2.3 节。属性](https://www.w3.org/TR/html5/syntax.html#elements-attributes)

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2014-03-06T13:08:37.933

这是来自谷歌 - 最佳实践 - “最小化有效负载大小” [https://developers.google.com/speed/docs/best-practices/payload](https://developers.google.com/speed/docs/best-practices/payload) （我的重点）

为确保您的内容压缩良好，请执行以下操作： ... *对 HTML 标记属性使用一致的引号，即始终使用单引号、始终使用双引号**或**尽可能不使用引号。*

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-24T19:56:08.950

这完全是关于 HTML 标记的真正有效性。它是为 W3C（WWW 联盟）工作的。许多事情可能在 HTML 中起作用，但它们必须经过验证才能被 Web 浏览器更仔细地识别。您甚至可以省略开头和结尾的`<html>`and标签，但完全不推荐，没有人这样做，它被认为是“坏代码”。`</html>`

因此，将它们放在引号中更有效。

# objective-c - 离线使用 iOS 6 矢量地图渐进式细节

> ID：13056684
> 
> 赞同：5
> 
> 时间：2012-10-24T19:54:00.903
> 
> 标签：objective-c, maps, ios6, mkmapview

阅读[Apple Insider 的*Going Offline with Vector Maps*](http://appleinsider.com/articles/12/10/05/apples-new-ios-6-maps-support-automatic-offline-use-for-a-wide-area)关于无需手动配置即可离线使用的 iOS 6 地图的渐进式细节，如果互联网连接可用，是否可以在应用程序启动时以编程方式缓存地图？

例如，是否可以在不调用或需要与 MkMapView 交互的情况下缓存特定 GPS 坐标的地图以用于各种详细程度的离线内容？

或者，这是 MkMapView 的内置功能，需要用户交互来逐步提高指定位置的详细程度？

来自[Apple Insider 的*Vector Maps Going Offline*](http://appleinsider.com/articles/12/10/05/apples-new-ios-6-maps-support-automatic-offline-use-for-a-wide-area)：

> ![离线使用矢量地图](../Images/f66369470987df863b41d67e769edb24.png) 这种大大扩展的新功能允许旅行者为一个非常大的区域加载详细的地图并通过 GPS 导航，即使您关闭移动漫游（或该位置缺乏无线服务），它仍然保持活动状态。在 iOS 5 下，为单个城市的重要部分维护 2D 缓存地图图块是很棘手的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-25T05:49:04.697

[我对 iOS 应用程序中的离线地图功能也有类似的需求，我通过转向Altus Mapping Engine](http://ba3.us/)设法解决了这个问题。现在我会提前说，这将需要您在设置 PostGIS、编译 OSM 数据等方面进行大量学习（更不用说 API 不如 MapKit 友好），但它与使用 MapKit 相比，您将获得以下优势：

*   将完全自定义的矢量地图嵌入到您的应用程序二进制文件中，并具有您想要的详细程度。
*   由于您不需要从服务器获取地图图块，因此大大提高了性能。

它不适合所有人。但是对于正确的用例，它可能非常惊人。

# php - 访问令牌过期查询

> ID：13056685
> 
> 赞同：0
> 
> 时间：2012-10-24T19:54:05.160
> 
> 标签：php, facebook, facebook-graph-api

> **可能重复：**
> [如何访问 fb 访问令牌表单服务器运行程序（python）](https://stackoverflow.com/questions/12758961/how-to-access-fb-access-token-form-server-running-program-python)

是的，我知道访问令牌会在 2 小时或 60 天后过期，具体取决于它是服务器端还是客户端。我无法解决的是，某些应用程序不会在 2 小时或 60 天后通过应用程序控制面板要求重新授权访问令牌。那么，由于离线访问被删除，这怎么可能。这是适当的混乱。是否有可能在没有用户访问权限的情况下获得新的访问令牌，因为这是我唯一能想到的可能是解决方案。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T20:01:35.253

> 我无法解决的是，某些应用程序不会在 2 小时或 60 天后*通过应用程序控制面板要求重新授权访问令牌。*

（我想你的意思是这里的 Auth 对话框？）

只要用户授予必要的权限一次，就可以使用应用访问令牌执行某些操作——无论原始用户访问令牌是否已过期。

> 是否有可能在没有用户访问权限的情况下获得新的访问令牌

如果没有任何用户交互，就不可能获得新的用户访问令牌。

但是，让已经授予应用权限的用户访问嵌入了 JS SDK 的页面后，将获得新的用户访问令牌，而无需用户进一步主动贡献。

# sql - 无法弄清楚如何旋转和合并这些结果

> ID：13056688
> 
> 赞同：0
> 
> 时间：2012-10-24T19:54:10.807
> 
> 标签：sql, sql-server, pivot

我有一个查询返回看起来像的数据。

```
包名站点位置可见
Package1 SiteOne 1
包 1 站点二 0
Package1 SiteFour4 1
Package2 SiteThree 1
```

我想要的是看起来像的数据

```
包名站点一站点二站点三站点四
包 1 1 0 NULL 1
包 2 空 空 1 空
```

我在网站上做了一个支点，但我得到的结果看起来像

```
包名站点一站点二站点三站点四
Package1 1 NULL NULL NULL
包 1 NULL 0 NULL NULL
包 1 NULL NULL NULL 1
包 2 空 空 1 空
```

有没有办法在现场合并数据透视然后合并 PackageName 的结果？

返回此数据的查询是一个简单的查询，它只是将外键连接在一起以将 SiteLocation 变成有意义的东西，而不是 FK_Id

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T20:11:44.757

在没有看到您的实际查询的情况下，我猜您的查询中有其他字段会破坏您的`PIVOT`. 如果这些是您的查询返回的唯一字段，那么它应该可以工作：

```
select *
from
(
  select packagename,
    sitelocation,
    visible
  from yourquery
) x
pivot
(
  max(visible)
  for sitelocation in ([SiteOne], [SiteTwo], [SiteThree], [SiteFour])
) p 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/91096/2)

但是，如果您的结果中包含其他字段，`PIVOT`则将无法正常工作：

```
select *
from
(
  select packagename,
    sitelocation,
    visible, 
    breakit
  from yourquery
) x
pivot
(
  max(visible)
  for sitelocation in ([SiteOne], [SiteTwo], [SiteThree], [SiteFour])
) p 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/5cb78/2)

# c# - 输入十进制数字时不会提交表单

> ID：13056691
> 
> 赞同：1
> 
> 时间：2012-10-24T19:54:18.857
> 
> 标签：c#, asp.net-mvc, cultureinfo, culture, kendo-ui

当存在十进制数字时，我在提交表单时遇到问题，确切地说，如果小数分隔符后面有一个数字，它不会提交。我正在使用 Asp.NET MVC3、Kendo UI 和不同的文化“hr-HR”，其中小数点分隔符是逗号。如果我输入“en-US”文化（分隔符是点），一切都会顺利进行。我的猜测是它的验证问题，但我可能是错的。（因为美国文化的帖子）

我的 CurrentUICulture 也是“en-US”，而 CurrentCulture 是“hr-HR”

有没有人有类似的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T19:56:54.583

如果表单未在服务器上发布，主要原因是客户端验证。尝试暂时关闭它并尝试您的表单是否已提交。

[EnableClientValidation](http://msdn.microsoft.com/en-us/library/system.web.mvc.htmlhelper.enableclientvalidation%28v=vs.98%29.aspx)方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T19:08:51.633

我通过用 HTML 5 输入标签替换我的 Kendo NumericTextboxes 解决了这个问题。似乎 HTML 5 更灵活。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T19:57:25.447

要全球化客户端验证，请使用 jQuery 全球化插件。

[http://weblogs.asp.net/scottgu/archive/2010/06/10/jquery-globalization-plugin-from-microsoft.aspx](http://weblogs.asp.net/scottgu/archive/2010/06/10/jquery-globalization-plugin-from-microsoft.aspx)

# android - ICS/JB Android 模拟器没有轨迹球点击

> ID：13056695
> 
> 赞同：1
> 
> 时间：2012-10-24T19:54:41.617
> 
> 标签：android, emulation, trackball

我有一个问题，使用**ICS**和**JB**模拟器（但**不是**使用*旧版本 Android*的模拟器，例如`API 10 = Android 2.3.3`。）：

**在轨迹球模式（[F6] 或 [del]）**下，即使在主屏幕中，我也无法单击。

在`onTrackballEvent(MotionEvent event)`,`ACTION_MOVE`事件被触发，但不

`ACTION_DOWN`也不`ACTION_UP`。

**ICS**和**JB**仿真器是否存在（已知？）错误？我做错了什么吗？

谢谢你的帮助。

# javascript - Chrome“请匹配请求的格式”验证消息

> ID：13056697
> 
> 赞同：8
> 
> 时间：2012-10-24T19:54:45.590
> 
> 标签：javascript, html, asp.net-mvc-4

我正在玩 HTML 5 验证和本地化，并设法让一些代码工作，使我能够本地化 HTML 5 验证错误消息（见下文）。我的问题是，在 Chrome 中与模式匹配时，您仍然会弹出英语（或者我猜您设置了 Chrome 的任何语言）“请匹配请求的格式”。您如何抑制此弹出窗口，以便我可以使用自己的验证消息？

```
 $(document).ready(function () {

            var elementsInput = document.getElementsByTagName("input");
            var elementsTextArea = document.getElementsByTagName("textarea");

            for (var i = 0; i < elementsInput.length; i++) {
                elementsInput[i].oninvalid = function (e) {
                    e.target.setCustomValidity("");
                    if (!e.target.validity.valid) {

                        switch (e.target.name) {

                            case "Name":
                                if ("@Thread.CurrentThread.CurrentUICulture.Name.ToLower()" == "fi-fi") {
                                    e.target.setCustomValidity("Anna nimesi");
                                } else {
                                    e.target.setCustomValidity("Please enter a Name");
                                }
                                break;

                            case "EmailAddress":
                                if (e.target.validity.valueMissing) {
                                    if ("@Thread.CurrentThread.CurrentUICulture.Name.ToLower()" == "fi-fi") {
                                        e.target.setCustomValidity("Anna sähköpostiosoitteesi");
                                    } else {
                                        e.target.setCustomValidity("Please enter an Email Address");
                                    }
                                }
                                else if (e.target.validity.patternMismatch) {
                                    if ("@Thread.CurrentThread.CurrentUICulture.Name.ToLower()" == "fi-fi") {
                                        e.target.setCustomValidity("Virheellinen sähköpostiosoite");
                                    } else {
                                        e.target.setCustomValidity("Invalid Email Address");
                                    }
                                }
                                break;

                            case "PhoneNumber":
                                if (e.target.validity.valueMissing) {
                                    if ("@Thread.CurrentThread.CurrentUICulture.Name.ToLower()" == "fi-fi") {
                                        e.target.setCustomValidity("Anna puhelinnumerosi");
                                    } else {
                                        e.target.setCustomValidity("Please enter a Phone Number");
                                    }
                                }
                                else if (e.target.validity.patternMismatch) {
                                    if ("@Thread.CurrentThread.CurrentUICulture.Name.ToLower()" == "fi-fi") {
                                        e.target.setCustomValidity("Virheellinen puhelinnumero");
                                    } else {
                                        e.target.setCustomValidity("Invalid Phone Number");
                                    }
                                }
                                break;
                            }
                        }
                };
                    elementsInput[i].oninput = function (e) {
                        e.target.setCustomValidity("");
                    };
                }

            for (var j = 0; j < elementsTextArea.length; j++) {
                elementsTextArea[j].oninvalid = function (e) {
                    e.target.setCustomValidity("");
                    if (!e.target.validity.valid) {
                        switch (e.target.name) {
                            case "Details":
                                if ("@Thread.CurrentThread.CurrentUICulture.Name.ToLower()" == "fi-fi") {
                                    e.target.setCustomValidity("Täytäthän yksityiskohdat");
                                } else {
                                    e.target.setCustomValidity("Please enter Details");
                                }
                                break;
                        }
                    }
                };
                elementsTextArea[j].oninput = function (e) {
                    e.target.setCustomValidity("");
                };
            }
        }); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-30T19:31:42.030

默认浏览器操作是显示弹出消息。您应该使用`e.preventDefault();`它来防止它弹出。

```
 $(document).ready(function () {

        var elementsInput = document.getElementsByTagName("input");
        var elementsTextArea = document.getElementsByTagName("textarea");

        for (var i = 0; i < elementsInput.length; i++) {
            elementsInput[i].oninvalid = function (e) {
                e.target.setCustomValidity("");
                if (!e.target.validity.valid) {

                    switch (e.target.name) {

                        case "Name":
                            e.preventDefault();
                            if ("@Thread.CurrentThread.CurrentUICulture.Name.ToLower()" == "fi-fi") {
                                e.target.setCustomValidity("Anna nimesi");
                            } else {
                                e.target.setCustomValidity("Please enter a Name");
                            }
                            break;

                        case "EmailAddress":
                            e.preventDefault();
                            if (e.target.validity.valueMissing) {
                                if ("@Thread.CurrentThread.CurrentUICulture.Name.ToLower()" == "fi-fi") {
                                    e.target.setCustomValidity("Anna sähköpostiosoitteesi");
                                } else {
                                    e.target.setCustomValidity("Please enter an Email Address");
                                }
                            }
                            else if (e.target.validity.patternMismatch) {
                                if ("@Thread.CurrentThread.CurrentUICulture.Name.ToLower()" == "fi-fi") {
                                    e.target.setCustomValidity("Virheellinen sähköpostiosoite");
                                } else {
                                    e.target.setCustomValidity("Invalid Email Address");
                                }
                            }
                            break;

                        case "PhoneNumber":
                            e.preventDefault();
                            if (e.target.validity.valueMissing) {
                                if ("@Thread.CurrentThread.CurrentUICulture.Name.ToLower()" == "fi-fi") {
                                    e.target.setCustomValidity("Anna puhelinnumerosi");
                                } else {
                                    e.target.setCustomValidity("Please enter a Phone Number");
                                }
                            }
                            else if (e.target.validity.patternMismatch) {
                                if ("@Thread.CurrentThread.CurrentUICulture.Name.ToLower()" == "fi-fi") {
                                    e.target.setCustomValidity("Virheellinen puhelinnumero");
                                } else {
                                    e.target.setCustomValidity("Invalid Phone Number");
                                }
                            }
                            break;
                        }
                    }
            };

            elementsInput[i].oninput = function (e) {
                e.target.setCustomValidity("");
            };
        }

        for (var j = 0; j < elementsTextArea.length; j++) {
            elementsTextArea[j].oninvalid = function (e) {
                e.target.setCustomValidity("");
                if (!e.target.validity.valid) {
                    switch (e.target.name) {
                        case "Details":
                            e.preventDefault();
                            if ("@Thread.CurrentThread.CurrentUICulture.Name.ToLower()" == "fi-fi") {
                                e.target.setCustomValidity("Täytäthän yksityiskohdat");
                            } else {
                                e.target.setCustomValidity("Please enter Details");
                            }
                            break;
                    }
                }
            };

            elementsTextArea[j].oninput = function (e) {
                e.target.setCustomValidity("");
            };
        }
    }); 
```

从理论上讲，你真的可以把它放在`e.preventDefault()`后面，`if (!e.target.validity.valid) {`但我注意到你的 Switch 中没有 a `default:`，所以我假设你不想要它。在任何一种情况下，您都可以在您想要的`e.preventDefault()`每个人的内部使用`case:`它，或者您可以将它放在`if`语句之后。哪个更适合您的目的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-08-07T15:35:18.687

如果您正在运行自己的验证，您可以通过将表单的 novalidate 属性设置为“novalidate”来阻止任何内置的 HTML5 浏览器验证，例如

```
<form name='testForm' method='POST' action='#' novalidate="novalidate"> 
```

这将告诉浏览器阻止应用 HTML5 自动验证。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-04T12:34:04.383

使用 jQuery：

```
$('input').on("invalid", function(e) {
    e.preventDefault();
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-25T21:50:28.717

建立@michael-angstadt 答案。您可以通过添加此 jQuery 自动将`novalidate`属性添加到表单中：

```
$("form").attr('novalidate', 'novalidate'); 
```

# c# - 如何覆盖 datagrdiview col 单元格字符串 Winforms

> ID：13056698
> 
> 赞同：0
> 
> 时间：2012-10-24T19:54:51.150
> 
> 标签：c#, winforms, datagridview

实际上，我花了一些时间在互联网上寻找解决问题的方法。我试图查看“覆盖 datagrdiview col 单元格字符串”，但我没有找到任何直接解决这个问题的想法。

我读取了一个 xml 文件并以这种格式在 col[0] 中显示数据，它是一个列表（基于项目数，它将加载）：

`Config0 Config1 Config2 Config3 Config4 Config5` ..etc..形成文件。

我想在 GUI 中显示它，如下所示：

`Config1 Config2 Config3 Config4 Config5 Config6`等等......但是当我把它写回文件时，我想用原始数据文本来写。

如何覆盖 datagridview col 单元格字符串？请帮帮我，谢谢。

请不要给我投票，请给我一些例子......！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T20:50:29.173

您可以使用[DataColumn.Expression](http://msdn.microsoft.com/en-us/library/system.data.datacolumn.expression%28v=vs.110%29.aspx)属性来创建一个单独的计算列，只要您不在 DataGridView 中更改它。我自己从未使用过它，但它应该类似于以下内容：

```
yourNewColumn.Expression = "'config' + CONVERT(SUBSTRING(yourOriginalColumn, 7, 1),Int16)+1" 
```

可能需要调整此代码以考虑整数部分的可变长度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T21:02:56.907

您可以使用单元格的 Tag 属性。也许在标签中存储一些值并显示其他数据。

# jquery - 使用 jQuery 隐藏和显示 div

> ID：13056699
> 
> 赞同：0
> 
> 时间：2012-10-24T19:55:03.293
> 
> 标签：jquery, html

基本上我有一个带有 3 个选项和 3 个 div 的设置菜单，其中 2 个默认隐藏。整个事情在第一次点击时运行良好，它隐藏了正确的 div 并显示了正确的 div，同时从当前链接中删除了活动类并将其添加到被点击的链接中。但是，当我再次尝试单击不同的链接时，它会向下滑动正确的 div，但不会向上滑动另一个打开的 div。我被困住了。

代码：

html:

```
<ul class="nav nav-pills">
        <li class="settingLink active" data-tab="general"><a href="#">General</a></li>
        <li class="settingLink" data-tab="social" ><a href="#">Social</a></li>
        <li class="settingLink" data-tab="captcha"><a href="#">Captcha</a></li>
    </ul> 
```

div：

```
<div id="generalSettings">
</div>
<div id="socialSettings">
</div>
<div id="captchaSettings">
</div> 
```

JS：

```
function settingMenu(event)
{
$('.settingLink').bind('click', function(){
    //The tab value of the currently clicked element
    var tab = $(this).data('tab');
    //Current active element
    var current = $('.active, .settingLink').data('tab');

    //Slide the old div up
    $('#'+current+'Settings').slideUp('fast', function(){
        //Slide the new div down
        $('#'+tab+'Settings').slideDown();
    });

    //Remove active class from current link
    $('.active, .settingLink').removeClass('active');
    //Add active class to new link
    $(this).addClass('active');

});
} 
```

先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T20:05:56.760

没有逗号代替这个

```
$('.active, .settingLink') 
```

尝试这个

```
$('.active.settingLink') 
```

选择器

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T20:00:14.030

如果我没记错的话，这条线看起来像您想将 currentCliked 存储在当前权利中。如果它有两个类，那么你的选择器是错误的......

```
var current = $('.active, .settingLink').data('tab'); 
```

应该

```
var current = $('.active.settingLink').data('tab'); 
```

[检查小提琴](http://jsfiddle.net/sushanth009/p3PHe/)

分配事件处理程序而不是调用函数也是一种更好的做法，因为如果多次调用函数，则事件处理程序可能会重复。将事件附加到锚点而不是 li 的

# spring - Spring：是否可以将您的过滤器映射放在 application-security.xml 而不是 web.xml 中？

> ID：13056700
> 
> 赞同：0
> 
> 时间：2012-10-24T19:55:03.833
> 
> 标签：spring, web-applications

是否可以将您的过滤器映射放在 application-security.xml 而不是 web.xml 中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T20:00:07.723

不，过滤器映射是将 Spring 安全性与您的 servlet 容器/请求处理粘合在一起的方式。如果没有过滤器，Spring 安全性对您的请求一无所知。

不能修改的可以试试[网页片段](http://www.roseindia.net/servlets/servlet3/assembling_webfragments.shtml)`web.xml`，见alsp [[1]](http://weblogs.java.net/blog/mode/archive/2008/05/servlet_30_plug.html) , [[2]](https://blogs.oracle.com/arungupta/entry/totd_101_applying_servlet_3)。

# git - git svn 和 rebase 一个分支 rebases master

> ID：13056703
> 
> 赞同：2
> 
> 时间：2012-10-24T19:55:26.623
> 
> 标签：git, svn, branch, rebase

我的本地机器上有一个 git-svn 存储库。

我的工作流程如下：

```
git checkout master
<made bunch o' changes>
git add .
git checkout -b new_branch
git commit -a
git svn rebase
git checkout master 
```

当我签出 master 时，我很惊讶地看到 rebase 的结果已被应用（但减去我的更改）。

这是预期的行为吗？我原以为它会将最新的 SVN 拉入我的分支，而不是 master。就好像它首先在 master 上执行了“svn rebase”，然后用 master 重新设置了我的分支。

贾斯汀

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T07:33:14.583

如本[Git-svn 教程](http://trac.parrot.org/parrot/wiki/git-svn-tutorial)中所述：

> 您可以向此分支提交不会影响您的`master`分支的更改，并且您可以在本地分支和主分支之间来回切换。
> 此外，**这些分支中的每一个都连接到 SVN 存储库的主干**，因此从这些分支提交的任何更改都将自动合并到 SVN 主干中，并在您下次签出`git svn rebase`时出现在您的本地主干中。`trunk`

因此，虽然您的 new_branch HEAD 确实是基于 svn 更改的顶部，但表示 svn 更改已首先应用于主分支，`master`然后再进行更改`new_branch`（因为`new_branch`新提交是在新提交之上完成的`master`）。

如果短于：

```
(new_branch)$ git checkout master
(master)    $ git svn rebase
(master)    $ git checkout new_branch
(new_branch)$ git rebase master 
```

# android - 在 TabHost 中未调用 onActivityResult()

> ID：13056707
> 
> 赞同：3
> 
> 时间：2012-10-24T19:55:39.137
> 
> 标签：android, activitygroup, android-tabactivity

我有两个活动，一个是选择器活动，另一个是选择列表。单击选项后，数据将返回到选择器活动。

这两个活动是活动组的一部分，活动组是 TabHost 内的 TabSpec。

Everything works fine when the picker Activity is the launch activity. 当 ActivityGroup 是启动活动时，它也可以正常工作。当 TabHost 是启动活动时，它不起作用（但没有错误）。我需要做一些 Intent 标志或 getParent() 才能使其正常工作吗？

```
public class MyActivity extends Activity {
    static final int MY_REQUEST = 0;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.my_picker);
        Button button = (Button) findViewById(R.id.my_button);
        button.setOnClickListener(buttonOnClickListener);
    }

    private OnClickListener buttonOnClickListener = new OnClickListener() {
        @Override
        public void onClick(View view) {
            Intent intent = new Intent(MyActivity.this, SubActivity.class);
            startActivityForResult(inent, MY_REQUEST);
        }
    };

    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        if (requestCode == MY_REQUEST) {
            if (resultCode == RESULT_OK) {
                String item = data.getStringExtra("item");
                //do something
            }
        }
        if (resultCode == RESULT_CANCELED) {

        }
    }
}

public class SubActivity extends Activity {
    private ArrayAdapter<String> adapter;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.my_sublayout);
        ListView listView = (ListView) findViewById(R.id.list);
        String[] items = {"red", "blue", "black", "green"};
        adapter = new ArrayAdapter<String>(this, android.R.layout.simple_expandable_list_item_1, items);
        listView.setAdapter(adapter);
        listView.setOnItemClickListener(listOnItemClickListener);
    }

    private OnItemClickListener listOnItemClickListener = new OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
            Intent intent = new Intent();
            String item = adapter.getItem(position);
            intent.putExtra("item", item);
            setResult(RESULT_OK, intent);
            finish();
        }
    };
} 
```

在选项卡中启动活动的代码是相当标准的，但这里是：

```
public class TabsActivity extends TabActivity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.tabs);

        TabHost tabHost = getTabHost();

        Intent intent= new Intent().setClass(this, MyActivityGroup.class);
        TabSpec tabSpecMyActivity = tabHost
            .newTabSpec(getString(R.string.my_title))
            .setIndicator(getString(R.string.my_title))
            .setContent(intent);

        tabHost.addTab(tabSpecMyActivity );

        tabHost.setCurrentTab(0);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T05:57:40.473

您是否考虑过在进行其他活动时不要在 onItemClick() 方法中调用 finish() 方法，因为它可以终止此活动，然后如果我们返回此活动，它将从 onCreate() 重新开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T16:40:47.337

我在上面的评论中询问了您是如何从内部实例`MyActivity`化的，因为我认为您在运行. 所以在，而不是：`SubActivity``MyActivityGroup``MyActivityGroup``TabsActivity``TabsActivity.onCreate()`

```
 Intent intent = new Intent().setClass(this, MyActivityGroup.class); 
```

你可以这样做：

```
 Intent intent = new Intent().setClass(this, MyActivity.class); 
```

通过上述更改，您`MyActivity.onActivityResult()`应该按预期调用。

如果你真的需要`MyActivityGroup`在你的内部`TabsActivity`，让我知道，我将通过额外的修改（在`TabsActivity.onActivityResult()`和`MyActivityGroup.startActivityFromChild()`）更新这个答案以使其工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T13:48:50.040

您需要使用给定的父标签主机启动 startChildActivityForResult，这适用于我的应用程序

样本：

```
Intent intent = new Intent(getParent(), childActivity.class);
TabGroupActivity parentActivity = (TabGroupActivity)getParent();
parentActivity.startChildActivityForResult("childActivity", intent, RESULT_OK); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T16:13:05.880

`startActivityForResult`当我使用带有选项卡和 ActivityGroup的方法时，我遇到了和你一样的问题。

实际上的问题是，当您从那开始活动时，`ActivityGroup`您将不会`ActivityResult`在调用活动中收到，而是您将在父活动中获得结果，即。活动组。

尝试覆盖 的`onActivityResult`方法`ActivityGroup`并在那里打印结果，您将在那里得到响应。

# java - 尝试从 .jsp 页面上的数据库表中列出员工时，employeesRepo 为空

> ID：13056710
> 
> 赞同：0
> 
> 时间：2012-10-24T19:55:51.977
> 
> 标签：java, eclipse, jakarta-ee, nullpointerexception

我的小项目使用一个包含员工数据（姓名、电话、电子邮件）的数据库表。它通过网络浏览器提供员工列表的前端管理（插入新闻员工，编辑当前，删除现有）。

每当我从 Eclipse 在 Tomcat 服务器上运行我的项目（以显示所有员工的列表）时，我都会收到以下错误：

> java.lang.NullPointerException com.myproject.crud.EmployeesListServlet.doGet(EmployeesListServlet.java:24) javax.servlet.http.HttpServlet.service(HttpServlet.java:621) javax.servlet.http.HttpServlet.service(HttpServlet.java :722)

第 24 行：`request.setAttribute("employeess", employeesRepo.listEmployeess());`

**雇员列表Servlet**

```
package com.myproject.crud;

import java.io.IOException;

import javax.inject.Inject;
import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

@SuppressWarnings("serial")
@WebServlet("/employees/")
public class EmployeesListServlet extends HttpServlet {

    @Inject @JDBC
    private EmployeesRepository employeesRepo;

    public EmployeesListServlet() {
        super();
    }

    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        request.setAttribute("employeess", employeesRepo.listEmployeess());
        getServletContext().getRequestDispatcher("/WEB-INF/pages/employees-listing.jsp").forward(request, response);
    }

    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T20:14:45.430

您[之前的问题](https://stackoverflow.com/questions/13054258/jdbc-cannot-be-resolved-to-a-type)确认您正在尝试遵循[本教程](http://wiki4.caucho.com/Java_EE_Servlet/JSP_tutorial_:_Adding_MySQL_and_JDBC_to_bookstore_example)。然而，它针对的是[Caucho Resin](http://www.caucho.com/)，这是一个成熟的 Java EE 应用程序服务器，它支持所有的 Java EE 功能，无需添加更多的 JAR。

但是，您正在使用 Tomcat。Tomcat 是一个准系统 JSP/Servlet 容器，它不支持开箱即用的所有其他 Java EE 幻想。它只支持[JSP](https://stackoverflow.com/tags/jsp/info)和[Servlets](https://stackoverflow.com/tags/servlets/info)。是 CDI的`@Inject`一部分，首先不能在您的 Java servlet 代码中导入。你让它编译只能意味着你下载了一些包含 JAR`javax.inject.Inject`并将它放在运行时类路径中。

这不是在 Tomcat 中安装 CDI 的方式。你需要做更多的工作。另请参阅[Tomcat 上的 Weld（CDI 参考实现）文档](http://docs.jboss.org/weld/reference/1.0.0/en-US/html/environments.html#d0e4998)。

* * *

然而，我建议停止阅读该教程，它并不是对 Java EE 的一个很好的介绍（`@JDBC`注释本身也有点“wtf？”）并寻找另一个教程，或者更好的是，一本真正的书。如果您想认真学习 Java EE，那么我还建议您将 Tomcat 替换为真正的 Java EE 应用程序服务器，例如[TomEE](http://tomee.apache.org/)、[Glassfish](http://glassfish.java.net)、[JBoss AS](http://jboss.org/jbossas)等。它们都带有开箱即用的 CDI（以及 JPA 和 EJB比JDBC好得多）。

# php - PHP：如何在不同页面上使用此代码

> ID：13056713
> 
> 赞同：0
> 
> 时间：2012-10-24T19:55:58.097
> 
> 标签：php

我想将下面的代码用于多个页面。我试着把它放进去`$listloadpage`，`array("page-1", "page-2")`但`stristr()`不是那样工作的。

```
$currentpage = $_SERVER['REQUEST_URI'];
$listloadpage = "page-1";
if(stristr($currentpage, $listingloadpage) !== false)
{
    $database->query('SELECT id, name FROM table_1 ORDER BY name', array());
    $results = $database->statement->fetchAll(PDO::FETCH_ASSOC);
} 
```

我宁愿不必为“page-2”重复上面的代码。

网址看起来像`http://www.domain.com/index.php?action=page-1`

**编辑：**多亏了 Dagon，我才开始工作......

```
$listloadpage = array("page-1", "page-2");
if(in_array($_GET['action'], $listingloadpage) !== false)
{
    // Display content
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T19:58:48.253

`strstr()`和其他与字符串相关的函数用于**字符串**，而不是**数组**。如果要检查给定值是否在数组中，请`in_array()`改用。请参阅文档： http: [//pl1.php.net/in_array](http://pl1.php.net/in_array)

一般来说，我建议您通过[所有可用数组相关函数](http://pl1.php.net/manual/en/ref.array.php)的列表来找出 PHP 已经提供的功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T20:04:18.310

您可以使用包含方法（http://php.net/manual/en/function.include.php），或寻找 php 的“漂亮 url”功能

# html - 在外部单击或按下后退键时隐藏 div？

> ID：13056714
> 
> 赞同：0
> 
> 时间：2012-10-24T19:56:02.147
> 
> 标签：html, responsive-design

我正在尝试响应式网页设计。因此，在小屏幕上导航菜单会折叠成下拉菜单。用户可以触摸一个按钮来查看菜单。现在，只需按钮即可切换下拉可见性。我希望能够只按手机上的返回键或触摸外部来隐藏它。关于如何实现这一点的任何提示都会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T20:07:08.683

移动浏览器中的 BACK 按钮就像桌面应用程序中的一样：它不能直接编写脚本。

如果您想要在单击元素“外部”时执行操作，则必须在单击事件上嗅探光标位置并自行确定单击发生的位置。或者，您可以监听所有点击事件并确定被点击的标签。

# c# - 异步单元测试未按预期工作

> ID：13056716
> 
> 赞同：2
> 
> 时间：2012-10-24T19:56:03.507
> 
> 标签：c#, unit-testing, nunit, async-await

我在 Visual Studio 2012 中使用了最新版本的 NUnit (2.6.2)，同时使用了 resharper 和 Visual Studio 测试运行程序。我有以下示例测试，其中我试图验证在预期的异步方法调用上是否引发了异常。

不幸的是，这似乎没有按预期工作。第一个测试`AsyncTaskCanceledSemiWorking`只有效，因为我有 expectedexception 属性。实际的断言被完全忽略（正如您可以从 ArgumentOutOfRange 异常中看到的那样，这只是让它失败的假象）。

工作正常，`AsyncTaskCanceledWorking`但没有测试异常是否在指定的行上引发，因此用处不大。

第三个以下面的方式雄伟地失败了......

```
System.Threading.Tasks.TaskCanceledException : A task was canceled.
Exception doesn't have a stacktrace 
```

关于如何从特定行测试 TaskCanceledException 的任何想法都会非常有用。

谢谢

```
 [Test]
    [ExpectedException(typeof(TaskCanceledException))]
    public async Task AsyncTaskCanceledSemiWorking()
    {
        CancellationTokenSource cancellationTokenSource = new CancellationTokenSource();
        CancellationToken token = cancellationTokenSource.Token;

        cancellationTokenSource.Cancel();

        Assert.That(await LongRunningFunction(token), Throws.InstanceOf<ArgumentOutOfRangeException>());

    }

    [Test]
    [ExpectedException(typeof(TaskCanceledException))]
    public async Task AsyncTaskCanceledWorking()
    {
        CancellationTokenSource cancellationTokenSource = new CancellationTokenSource();
        CancellationToken token = cancellationTokenSource.Token;

        cancellationTokenSource.Cancel();

        int i = await LongRunningFunction(token);
    } 

    [Test]
    public async Task AsyncTaskCanceledFailed()
    {
        CancellationTokenSource cancellationTokenSource = new CancellationTokenSource();
        CancellationToken token = cancellationTokenSource.Token;

        cancellationTokenSource.Cancel();

        Assert.That(await LongRunningFunction(token), Throws.InstanceOf<TaskCanceledException>());

    }

    public async Task<int> LongRunningFunction(CancellationToken token)
    {
        token.ThrowIfCancellationRequested();

        await Task.Delay(1000, token);

        return 5;
    } 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-24T21:31:17.607

我假设您想检查是否`LongRunningFunction`会抛出`TaskCanceledException`.

我认为您所遇到的行为是完全正确的，而误解就在这句话中：

```
await LongRunningFunction(token) 
```

在这里，您正在有效地执行异步操作并等待它完成，这也将重新引发在其调用中发生的第一个异常。您基本上可以将其替换为：

```
throw new TaskCanceledException() 
```

因此，为什么前两个测试成功 - 你正在使用`ExpectedExceptionAttribute`- 而第三个失败 - 你并不期待异常。

的第一个参数`Assert.That`，当您稍后使用时`Throws`，应该是某种委托，因为 NUnit 必须调用它才能捕获从其调用中冒出的异常。如果你自己调用它，NUnit 除了使用`ExpectedExceptionAttribute`.

换句话说，理想的正确方法是：

```
// WARNING: this code does not work in NUnit <= 2.6.2
Assert.That(async () => await LongRunningFunction(token), Throws.InstanceOf<TaskCanceledException>()); 
```

我想告诉你，NUnit 支持异步方法的这种语法，这很自然，允许你在代码的特定部分测试异常，但它不支持，并且测试会失败，报告你是期待异常但没有发生异常。

原因是为了从该异步匿名方法的调用中获取异常，NUnit 必须等待它，而它目前没有。

我可以为您提供的一种替代方法是在异步操作返回的任务上使用非异步 lambda `Wait`，但不幸的是，语法不是很好，因为*等待*异步操作的行为方式与*等待*它的任务不同返回。具体来说，在异步操作引发异常的情况下，您将在第一种情况下获得实际异常，`AggregateException`在第二种情况下获得实际异常。无论如何，这里有一些适用于 2.6.2 的代码：

```
var aggregate = Assert.Throws<AggregateException>(() => LongRunningFunction(token).Wait());
Assert.IsInstanceOf<TaskCanceledException>(aggregate.InnerExceptions.Single()); 
```

总而言之，尽管 NUnit 2.6.2 确实引入了对异步测试方法的支持，它允许您编写`async [void|Task|Task<T>]`测试，但我们没有考虑将支持扩展到对这种断言有用的异步匿名方法，尽管我相信我们可以。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T21:53:32.260

如果您将 Resharper 7.1 或更高版本与 NUnit 2.6.2 或更高版本一起使用，则测试方法`public async void`将起作用。Resharper 7.1 于今天（2012 年 11 月 13 日）发布

Resharper 测试运行器的早期版本不等待测试完成，无需实际测试任何内容即可通过。

2.6.2 之前的 NUnit 版本也有同样的问题。

Resharper NUnit 测试运行器与 NUnit GUI 和命令行测试运行器的代码库不同，由 Jetbrains 单独更新。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-10-25T09:36:06.300

彼得 不幸的是，这似乎没有按预期工作。第一个测试 AsyncTaskCanceledSemiWorking 仅适用，因为我有 expectedexception 属性。实际的断言被完全忽略（正如您可以从 ArgumentOutOfRange 异常中看到的那样，这只是让它失败的假象）。

期望是错误的，因为属性优先于 Assert.Throws。

正如 Simone 所展示的，期望是“断言”异常是 InstanceOf，因此它属于 Assertion 而不是 throws。我认为您的期望可能是基于 Throws 在 Java 中的使用方式。

# user-interface - Tkinter 显示终端输出

> ID：13056723
> 
> 赞同：1
> 
> 时间：2012-10-24T19:56:17.420
> 
> 标签：user-interface, terminal, tkinter, output

我正在使用 Tkinter（Tk 版本 8.4）创建一个允许用户构建文本“输入”文件的 GUI。该文本文件可由另一个程序读取，该程序进行计算然后输出一个输出文件。我创建了一个菜单选项（使用 OptionMenu 小部件），通过单击“运行”选项从我的 GUI 运行计算程序。但是，为确保计算正确且程序正确运行，您需要密切关注终端。由于这个 GUI 的目的是使文本文件的构建和运行计算更容易，因此在我的 Tkinter GUI 中的文本框或框架中显示终端的输出会很有用。

我用谷歌搜索和谷歌搜索，但我似乎无法找到一个好的，一般的答案来解决这个问题。我想做的就是在我的 GUI 中显示终端。我该怎么做（我假设它只有几行代码）？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T20:14:05.273

您无法在程序中准确显示终端，但我认为这不是您真正想要的。听起来您只想在 GUI 中显示命令的输出。

你是如何进行计算的？你在用popen吗？如果是这样，您可以获取程序的输出并将其插入到文本小部件中，如下所示：

```
p = sub.Popen('./script',stdout=sub.PIPE,stderr=sub.PIPE)
output, errors = p.communicate()
self.text.insert("end", output) 
```

如果您使用线程或多处理，它会变得有点复杂，但概念是相同的：以一种允许您捕获输出的方式运行您的程序，然后在完成运行时将输出插入到文本小部件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-01T11:07:21.817

嗯，我绝对不是专家，但让我试一试。您可以做的是将所有终端输出重定向到一个文件，例如`calculation.py <userinput> >> text.txt`在您的计算代码中使用它，即：

```
while calculation: # <- your function 
    with open('text.txt', 'w') as f: # <- open a text file for ouput
        f.write(<calculation output>) # <- keep writing the output 
```

或者如果您的程序不是python `os.system('<terminal command i.e. "echo foo">')`，则使用第一种方法将输出定向到文件。

这样做之后，在您的 tkinter 代码中：

```
def cmdOutput():
    output = os.system('cat text.txt') # <- replace "cat" with "type" if windows.
    return output.split("\n")[-1] # <- return the last item in the list.

while cmdOutput() == "<calculating...>": # <- or something like that.
    tkinterUpdateMethodDeclaredSomewhere(cmdOutput())
else:
    tkinterUpdateMethodFinalAnswer(cmdOutput()) 
```

虽然我确信有更好的方法可以做到这一点，但这是一种方法......你也可以编写一个命令来删除末尾的文件`cmdOutput`，或者从中读取并将必要的位粘贴到日志文件或其他东西...

我希望这有帮助。

# jquery-ui - 如何使用 event.target 名称元素设置目标？

> ID：13056724
> 
> 赞同：-1
> 
> 时间：2012-10-24T19:56:21.470
> 
> 标签：jquery-ui, jquery

我将 UI 对话框用于 Ajax 表单。UI 对话框必须通过单击具有不同 ID 的两到六个链接出现。提交表单并隐藏 UI Dialog 后，Ajax 将提交的行从数据库返回并替换到单击链接的位置。我的脚本不工作。是否可以使用 jQuery 执行此功能？这是我对一个链接的默认功能：

```
$('#add').ajaxForm({
 target: '#start',
 success: function() {
  $('#start').fadeIn('slow');
 }); 
```

这是我的主意！对于多个链接：

```
$('#add').ajaxForm({
 var xx = '#'+$(event.target.name);
 target: xx,
 success: function() {
  $(xx).fadeIn('slow');
 }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T20:14:14.447

为此，您需要**事件**对象..

您试图在不可能的方法中访问事件对象。

如果您在方法中调用它，那将没有任何意义..

# c# - 比较文件修改时间失败

> ID：13056726
> 
> 赞同：0
> 
> 时间：2012-10-24T19:56:29.067
> 
> 标签：c#, .net, compact-framework

我正在开发基于.NET 的客户端-服务器应用程序。服务器端在 Windows XP 上运行，客户端在 Windows CE 设备上运行（摩托罗拉 Symbol 3100，这可能是相关的）。

客户端需要自动更新功能，我决定自己实施，因为有几个主题阻止我使用任何现成的自动更新解决方案。我的应用程序每次启动时都会检查更新，并按 LastModificationTime 比较远程站点上的文件。如果有，它将文件从远程服务器下载到临时目录，然后停止并运行另一个应用程序来替换更新的文件并运行主应用程序。

文件正在通过套接字下载，因此在下载文件后，我的应用程序将每个文件的 LastModificationTime 设置为远程站点提供的值。我正在使用[本主题](https://stackoverflow.com/questions/13036165/change-file-creation-time-on-compact-framework)中的时间更改解决方案，它运行良好，即文件修改时间更新得非常好，尽管其中一些文件的比较失败。可能相关的是，我的解决方案无法比较的那些文件是摩托罗拉符号 DLL。

问题是，尽管我做了很多工作，但每次我比较这些符号文件时，它们都有不同的修改时间戳。它总是相差 1 小时。例如，远程站点说文件时间是 1/24/2012 5:13:08，而在我的应用程序端它是 1/24/2012 6:13:08。任何其他文件都没有问题。那些“任何”是我的应用程序 exe、我的 DLL、第三方组件（如 OpenNETCF）提供的 DLL、MS .NET 相关文件等等。他们都没有给我带来麻烦 - 如果他们被更新，这只是一次，如果他们没有真正改变，那么就没有更新。在比较期间，我总是使用 ToUniversalTime() 以便不会发生与时区相关的差异（并且，正如我所提到的，这适用于其他文件）。所以我总是遇到这样的情况：

*   远程站点提供了许多文件，其中确实有更改的文件（我的应用程序、我的 DLL 等）以及那些符号 DLL（总是！）
*   文件已下载并更新
*   我的应用程序再次运行并再次检查更新
*   现在只有符号 DLL 被报告为已更改
*   应用程序陷入无限循环，因为符号 DLL 的修改时间总是相差 1 小时

我试图创建一个额外的应用程序来读取符号文件上的文件时间戳，然后再次设置它。我认为原始符号文件可能有一些“错误”的日期时间或其他东西。即使我将新时间设置为增加 1 秒，这也没有带来任何改进：在更新代码的比较期间，它又是 1 小时的差异。

最后，我决定从我的更新中删除这些符号文件。它们不经常更改，所以我有一些时间来发现这个问题，但如果摩托罗拉推出下一次更新 - 我会再次陷入我的问题。

我不知道问题的根源在哪里，如果有任何提示，我将不胜感激。我认为我的来源无关紧要，因为此问题仅发生在某些文件中，并且无论如何修改时间总是正确更改：我在我的设备上检查了它，在服务器部署文件夹中（从那里下载更新），无处不在。可能这是与时区相关的问题，但它如何只影响某些文件，而不是每个文件？

我将进一步解释。我的服务器在其更新文件夹中包含以下文件：

FliteDevice.dll

fliteDLL.dll

OpenNETCF.dll

OpenNETCF.AppSettings.dll

OpenNETCF.Configuration.dll

pdt.exe

PdtComm.dll

符号.dll

符号.xml

Symbol.Audio.dll

Symbol.Audio.xml

Symbol.Barcode2.dll

Symbol.Barcode2.xml

Symbol.StandardForms.dll

Symbol.StandardForms.xml

System.Data.OracleClient.dll

System.EnterpriseServices.dll

System.EnterpriseServices.Wrapper.dll

System.Transactions.dll

System.Web.dll

更新程序

考虑到这是我第一次运行更新，我的服务器将*所有*这些文件发送到客户端。我的客户端（pdt.exe）全部接收它们，运行 update.exe（并且存在，因此更新程序可以用较新的文件替换应用程序文件）替换更改的文件（此首次运行案例中的*所有*文件）。

然后更新程序运行我的应用程序（pdt.exe），我的应用程序再次检查其文件与服务器端的文件。现在要更新的文件是：

符号.dll

符号.xml

Symbol.Audio.dll

Symbol.Audio.xml

Symbol.Barcode2.dll

Symbol.Barcode2.xml

Symbol.StandardForms.dll

Symbol.StandardForms.xml

更新程序再次替换文件，并再次运行主应用程序。再一次，相同的文件（那些符号。*）被视为已更改、下载和替换。只有那些，在进一步的更新检查请求中不存在其他文件。绝不。正是这些文件有问题，不是我的代码，也不是其他文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T14:43:08.757

添加对 MD5 哈希的辅助检查。比无限循环好。

# security - 通过客户端或服务器或两者加密数据？

> ID：13056727
> 
> 赞同：0
> 
> 时间：2012-10-24T19:56:29.567
> 
> 标签：security, encryption, standards

我有一个关于数据加密的问题。我的问题是我在哪里加密数据，为什么？

注册

我目前在应用程序/游戏中加密数据并将数据发送到服务器以添加或更新到数据库。

登录

我要求服务器向我发送有关用户名的数据，包括密码。所以我收到加密的密码和用户名，然后解密密码，看看它是否与玩家输入的内容相符。

我的顾虑

我担心有人可能会拦截发送出去的内容并将其与他们输入的密码进行比较。

我对解决方案的想法是也加密服务器上的数据，但这只有在服务器/数据库被黑客入侵时才有用。

我找不到任何真正针对我的问题的东西。我找到了有关如何加密数据的文章，但没有发现任何风险和安全漏洞。

我还想知道与此相关的标准是什么以及不同方法的风险。

编辑：我担心我想多了，但觉得问起来会更安全。

我没有提供我使用的加密数据的方法，因为我不知道这是否会带来安全风险。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T21:15:01.783

如果数据非常敏感，您可以使用在线备份方式（如 Mozy、Carbonite 等），如果丢失密码或私钥，您将丢失数据。

如果不是那么敏感，您只需为所有帐户数据使用主密码，并允许他们重置密码。在服务器上，您只存储一个随机盐和加盐+散列的密码，在通信期间您只发送盐。客户端对其进行哈希处理，您只需比较哈希值，因此永远不会传输原始密码。无论哪种方式，如果他们入侵了您的服务器，他们也可能会获得主密码，除非您每次都必须插入它来启动应用程序。如果它与数据库服务器在物理上是分开的，那么至少在加密的情况下，违反这一点或硬盘驱动器丢失不会暴露你。

如果您担心流量嗅探和哈希重用，如果有人非常想要该帐户，这是一种可能性，您有两个很好的解决方案：更好的可能是使用 SSL 连接，这完全消除了任何暴露的可能性，但可能需要如果您扩展到多台服务器，则需要相当多的资金和设置。否则，您可以创建一个穷人的 Diffie-Hellman，如下所示：使用盐，发送另一个一次性使用密钥；客户端首先用盐对他们的密码进行哈希处理，然后用密钥对结果进行哈希处理并发送它。在服务器端，您将密钥保存在内存或数据库中，一旦它们通过身份验证，您就会忘记密钥。

但是，您永远无法通过加密来防御键盘记录器和 rootkit。这需要其他安全模型，例如让用户通过短信确认新客户端或 IP 登录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-30T06:05:22.533

[http://www.jcryption.org/](http://www.jcryption.org/)

您可以使用 jCryption 和 OpenSSL 库，jCryption 是用于加密的出色 javascript 库，您可以在客户端加密数据并将其发送到服务器，在服务器调用 openssl 库进行解密/加密，jCryption 现在与 OpenSSL 完全兼容

# php - 致命错误：调用时传递引用

> ID：13056733
> 
> 赞同：1
> 
> 时间：2012-10-24T19:56:53.227
> 
> 标签：php

我在注释行收到此错误。知道为什么吗？

```
Fatal error: Call-time pass-by-reference has been removed in myfile.php on line 301
Call Stack
#   Time    Memory  Function    Location
1   0.0002  245352  {main}( )   ../plugins.php:0
2   0.3016  7149968 plugin_sandbox_scrape( )    ../plugins.php:156 
```

代码如下...

```
function rseo_doTheParse($tag, $post){
    //headings
    $keyword = rseo_sanitize3(trim(strtolower(rseo_getKeyword($post))));
    $content = rseo_sanitize3($post->post_content);
    $match = 0;

            $token = '/<'.$tag.'[^>]*>(.*\b'.$keyword.'\b.*)<\/'.$tag.'>/siU';
            if(preg_match($token, &$content, $matches)) //THIS IS LINE 301
            {
                $match = 1;
            }
            return $match;
        } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T19:58:00.053

删除`&`from `&$content`，这是通过引用传递的调用时间。

PHP 长期以来一直支持[通过引用传递参数](http://php.net/manual/en/language.references.pass.php)；从历史上看，这可以通过声明函数通过引用接收参数来实现：

```
function foo(&$argument) { ... }

foo($value); // pass by reference 
```

或通过在调用站点使用传递引用：

```
function foo($argument) { ... }

foo(&$value); // call time pass by reference 
```

后一个选项已在 PHP 5.4 中删除，这就是错误的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T20:31:17.967

乔恩是对的，你必须删除'&'。为了更好的风格，PHP 只允许对定义它的函数进行传递引用，而不是代码调用该函数。[http://php.net/manual/en/language.references.pass.php](http://php.net/manual/en/language.references.pass.php)的更多详细信息 在您的情况下，您根本不需要它，因为无论如何执行结果都会被推送到此变量。这是不直观的，但一些核心 PHP 函数是这样操作的

# c# - 按实体计数和分组（不是实体的财产）

> ID：13056735
> 
> 赞同：0
> 
> 时间：2012-10-24T19:56:54.393
> 
> 标签：c#, entity-framework, entity-framework-5

我有以下实体模型。为了简洁起见，我省略了每个实体的很多属性。

```
public sealed class Platform {
    /// <summary>
    /// Get and Set Platform's Unique Identifier.
    /// </summary>
    public int Id { get; set; }

    /// <summary>
    /// Determine if an Object is Equal to This Platform.
    /// </summary>
    /// <param name="obj">
    /// An object to compare.
    /// </param>
    /// <returns>
    /// A boolean true if the object is equal to this platform. A boolean false otherwise.
    /// </returns>
    public override bool Equals(object obj) {
        bool isObjectPlatform = obj is Platform;
        bool isObjectIdEqual = isObjectPlatform && (obj as Platform).Id == this.Id;

        return isObjectIdEqual;
    }

    /// <summary>
    /// Get Platform's Hash Code.
    /// </summary>
    /// <returns>
    /// The platform's hash code, equalling the platform's unique identifier.
    /// </returns>
    public override int GetHashCode() {
        return this.Id;
    }
}

public sealed class Capture {
    /// <summary>
    /// Get and Set Capture's Unique Identifier.
    /// </summary>
    public int Id { get; set; }

    /// <summary>
    /// Get and Set Capture's Platform.
    /// </summary>
    public Platform Platform { get; set; }

    /// <summary>
    /// Determine if an Object is Equal to This Capture.
    /// </summary>
    /// <param name="obj">
    /// An object to compare.
    /// </param>
    /// <returns>
    /// A boolean true if the object is equal to this capture. A boolean false otherwise.
    /// </returns>
    public override bool Equals(object obj) {
        bool isObjectCapture = obj is Capture;
        bool isObjectIdEqual = isObjectCapture && (obj as Capture).Id == this.Id;

        return isObjectIdEqual;
    }

    /// <summary>
    /// Get Capture's Hash Code.
    /// </summary>
    /// <returns>
    /// The capture's hash code, equalling the capture's unique identifier.
    /// </returns>
    public override int GetHashCode() {
        return this.Id;
    }
} 
```

我基本上想要的是一个 LINQ 查询，当然，它由一个 EF 支持，这将使我得到按整个**平台**实体分组的**捕获计数。**我希望能够返回对每个**Platform**的引用，而不是它的一个属性，以及与之关联的每个**Capture**的计数。

 ******我做了这个查询，效果很好：

```
var query = this._defaultContext.Captures
                .Include(m => m.Platform)
                .GroupBy(m => m.Platform.Id)
                .Select(m => new {
                    PlatformId = m.Key,
                    Count = m.Count()
                }); 
```

但如您所见，我是按**平台的** *Id*属性分组的。我宁愿拥有的是：

```
var query = this._defaultContext.Captures
                .Include(m => m.Platform)
                .GroupBy(m => m.Platform)
                .Select(m => new {
                    Platform = m.Key,
                    Count = m.Count()
                }); 
```

这不起作用。它只是为数据库中的每条记录计数 1。看起来它不知道按整个实体分组。**我希望它可以通过GetHashCode**和**Equals**方法实现来区分每个**平台**，但没有运气。

 ****有人遇到过这样的场景吗？有什么办法吗？还是我必须手动完成。我讨厌这样，因为它可能会导致某种 N + 1 查询。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T20:12:00.250

```
var query = this._defaultContext.Captures
                    .GroupBy(m => m.Platform.Id)
                    .Select(m => new {
                        Platform = m.FirstOrDefault().Platform,
                        Count = m.Count()
                    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T21:03:03.843

我不确定您为什么采用这种方法。考虑在 Platform 和 Capture 之间实现双向导航（请参阅[使用 Fluent API 配置关系](http://msdn.microsoft.com/en-US/data/jj591620)），然后您可以包含 Captures 并且计数变得简单。

```
public sealed class Platform
{
    public ICollection<Capture> Captures { get; set; }
    // the rest of the stuff
} 
```

...

```
var query = this._defaultContext.Platforms.Include("Captures").Select(p => new { Platform = p, CaptureCount = p.Captures.Count() }); 
```

在转换为 SQL 时，这应该表示为：

```
SELECT Platform.Id, Platform.Name, COUNT(Captures.*)
FROM Platform LEFT OUTER JOIN Capture ON Capture.Platform_Id = Platform.Id
GROUP BY Platform.Id, Platform.Name 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T20:10:03.100

`GroupBy``EqualityComparer<T>.Default`如果您不指定，将默认使用。反过来，`EqualityComparer<T>.Default`看看是否`T`实现`IEquatable<T>`并使用它。

所以答案也是实现`IEquatable<T>`：

```
public sealed class Platform : IEquatable<Platform> {

    public override bool Equals(Platform obj) {
        return this.Equals((object)obj);
    }
    // rest of your code here 
} 
```

然而

我怀疑这是否可以翻译成 SQL。相反，您可能必须定义一个从`Platform`到 的列表的导航属性`Captures`，这将在一个查询中为您提供对象。

要指定 IEqualityComparer，只需在类中实现该接口：

```
public class PlatformComparer : IEqualityComparer<Platform>
{
    public bool Equals(Platform p1, Platform p2)
    {
        if(p1 == null !! p2 == null) return false;
        return p1.Id == p2.Id;
    }
    public int GetHashCode(Platform p)
    {   
        if(p==null) throw new ArgumentNullExceltion("p");
        return p.Id.GetHashCode();
    }
} 
```

并将其用于您的`GroupBy`：

```
.GroupBy(m => m.Platform, new PlatformComparer()) 
```**********

# xml - 如何在浏览器或文本文件中显示 XML 文件

> ID：13056736
> 
> 赞同：0
> 
> 时间：2012-10-24T19:56:56.470
> 
> 标签：xml, xml-parsing

我有一个 .xml 文件，我想简单地使其更具人类可读性，它不必具有高级格式，只需简单可读即可。我想在浏览器或文本文件中完成此操作。

我确实找到了一段“应该”以更易读的格式显示它的代码片段，但我无法让它这样做。我得到一个什么都不显示的浏览器。

这是我放在文件中的代码：

`<?xml-stylesheet type="text/xsl" href="the file name" ?>`

我目前正在使用 IE8 我无法更新浏览器，因为它是公司工作站。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T20:03:04.600

我找到了一个可以解决您问题的网站链接。如下：http: [//xmlgrid.net](http://xmlgrid.net)

它有网格和文本视图，使用起来非常简单。祝你好运。

# ruby-on-rails-3 - 几个客户端请求之间的rails API中的互斥锁

> ID：13056737
> 
> 赞同：3
> 
> 时间：2012-10-24T19:57:12.440
> 
> 标签：ruby-on-rails-3, mutual-exclusion

我在我的 Rails API 中遇到了互斥问题。我的数据库中有一些 Event 对象，其中包含将参加该活动的人数。

考虑我的 Event 方法，它将一个人添加到事件中：

```
class Event
    def add_person
        nb = self.number_of_person + 1
        # Some stuff
        self.number_of_person = nb
        self.save
    end
end 
```

现在，假设客户端 A 和 B 想要参与事件 E。Rails 将收到 2 个请求并将并行调用 add_person 方法。最后，事件 E 中的人数可能不是加 2 而是加 1。

这就是我希望能够做到的：

```
Client A                 | Client B                 | Possible in parallel
--------------------------------------------------------------------------
Event.find(1).show       | Event.find(1).show       | yes
Event.find(1).add_person | Event.find(1).add_person | no
Event.find(1).add_person | Event.find(2).add_person | yes 
```

我只想`add_person`在同一个对象上排队该方法。

有没有办法做到这一点 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T21:30:01.023

标准的 ActiveRecord 事务将防止死锁或其他争用。您可能不得不使用[悲观锁定策略](http://api.rubyonrails.org/classes/ActiveRecord/Locking/Pessimistic.html)。数据库旨在防止这种事情发生。

# php - 如何让 jQuery 从 mysql_fetch_array 中获取 PHP 参数？

> ID：13056738
> 
> 赞同：0
> 
> 时间：2012-10-24T19:57:13.607
> 
> 标签：php, jquery, mysql

如何让 jQuery 从中获取 PHP 参数`mysql_fetch_array()`？以下是我的代码的一部分，欢迎提出任何建议。

**PHP**

```
$query=mysql_query($sql) or die(mysql_error());
    while($list=mysql_fetch_array($query)){
            print"
<div id=\"#$list[id]\" class=\"f\"> 
```

**jQuery**

```
switch(id) {
case '#$list[id]': 
```

（我正在尝试通过这种方法使用 Fancybox [https://stackoverflow.com/a/7844043/1575921](https://stackoverflow.com/a/7844043/1575921)）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T20:15:49.907

为什么不为此使用 $.ajax() 呢？

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

```
$.ajax({
  url: 'yourphpcode.php',
  success: function(data) {
    // all your $list variables are saved in data
    // so you can work from here with your data array
  }
}); 
```

php:

```
$query = mysql_query($sql) or die(mysql_error());
    while($list = mysql_fetch_array($query)){
            echo $list['id'];
} 
```

你很可能从 php 得到类似的东西：

```
1
2
3
4
5
6
7
etc. 
```

使用 javascript，您可以将其拆分为：

```
dataArray = data.split(”\n“); 
```

所以你的最终代码是：

```
 $.ajax({
      url: 'yourphpcode.php',
      success: function(data) {
        dataArray = data.split("\n");
      }
 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T20:06:47.213

您不能在 JS 代码中使用 PHP 变量，这是一个完全不同的环境。PHP 代码在服务器上运行，JS 代码在浏览器中运行。

但是，您可以使用 PHP 打印变量的内容，也可以在 PHP 中“生成”JS 代码。

```
echo "<script type=\"text/javascript\">
  var myvar = '".$list[id]."';
</script>"; 
```

之后就可以在 JS 代码中使用 myvar

```
switch(id) {
case myvar: 
```

# google-apps-script - Google 协作平台中的 getFiles() 仅返回 250 个文件

> ID：13056746
> 
> 赞同：1
> 
> 时间：2012-10-24T19:57:46.053
> 
> 标签：google-apps-script

如何让 getFiles() 获取 Google Drive 文件夹中的所有文件。现在它只获取前 250 个文件并停止。

`var files = DocsList.getFolder('Mendeley Desktop').getFiles();`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T20:05:42.610

这就是它的工作原理......要获得剩余的项目，您应该使用[文档](https://developers.google.com/apps-script/class_docslist#getFiles)`getFiles(start, max)`中解释的方法

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T20:15:55.550

`DocsList.DEFAULT_RESULT_SIZE`当前为 250，因此默认情况下，您将获得最多 250 个结果作为来自`getFiles()`.

如果您需要更多结果，可以使用另`getFiles()`一种方法，一次[`getFiles(start, max)`](https://developers.google.com/apps-script/class_docslist#getFiles)获得最多`DocsList.MAX_RESULT_SIZE`（当前 500 个）结果，并将其与偏移量一起使用以获取下一个`DocsList.MAX_RESULT_SIZE`文件。

# java - 玩！框架：在模板中定义一个变量？

> ID：13056747
> 
> 赞同：20
> 
> 时间：2012-10-24T19:57:51.973
> 
> 标签：java, scala, playframework, playframework-2.0, template-engine

我正在向模板传递一个`Event`对象，我需要做的是检查`@event.getSeverity`值。如果值为正，我想将特定`<div>`的颜色涂成绿色。如果该值为负数，我想将特定`<div>`的颜色涂成红色。

我找不到定义变量的方法。可能吗？我认为应该是。
无论如何，最简单的方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-10-24T20:13:29.067

如[Play 文档](http://www.playframework.org/documentation/2.0.4/JavaTemplates)中所述，您可以使用`@defining`帮助程序。

```
@defining(if (event.getSeverity > 0) "green" else "red") { color =>
    <div style="background-color: @color">foo</div>
} 
```

或者你可以使用一个`reusable block`

```
@severityColor(event: Event) = @{
    if (event.getSeverity > 0) "green" else "red"
}

<div style="background-color: @severityColor(event)">foo</div> 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-02-04T08:29:26.517

另一种变体。如果在导入部分之后声明，则可以正常工作。否则可能会导致一些错误（“未找到值”）

```
@import play.i18n.Messages
@import models.Customers

@customers = @{Customers.allAccepted()}

...

@if(customers.size()>0) {
    <ul>
        @for(customer <- customers) {
            <li>
                <a href="/filters/customer/@customer.id">@customer.name</a>
            </li>
        } 
    </ul>
} 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-02-26T15:28:17.177

在 scala 模板中试试这个

```
@import java.math.BigInteger; var i=1; var k=1 
```

对于字符串

```
@import java.lang.String; val name="template" 
```

在问题方面

```
@import java.lang.String; var color="red"
@if(event.getSeverity>0){
@{color="green"}
}
<div style="background-color: @color">foo</div> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-12-10T20:32:07.213

" *for* " 推导式有时也很有用：
`@for(id <- products.keys; product = products(id); author = product.author.getOrElse("N/A")) {... @product.name ... @author`

# orchardcms - 如何以编程方式禁用 Orchard 模块？

> ID：13056752
> 
> 赞同：6
> 
> 时间：2012-10-24T19:58:05.817
> 
> 标签：orchardcms

在 Migrations.cs 中，如果启用了一个模块，我想禁用它，如果尚未启用，则启用另一个模块。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-24T20:18:38.840

好的，我通过查看 Orchard.Modules 中的 Controller 和 Command 类发现了这一点。首先，我必须添加对 Orchard.Modules 的项目引用，然后在 Migrations.cs 中：

```
 public int UpdateFrom2() {
        var features = _moduleService.GetAvailableFeatures().ToDictionary(m=>m.Descriptor.Id, m=>m);
        if (features.ContainsKey("TinyMce") && features["TinyMce"].IsEnabled) {
            _moduleService.DisableFeatures(new string[] { "TinyMce" });
        }

        if (features.ContainsKey("TinyMceDeluxe") && !features["TinyMceDeluxe"].IsEnabled) {
            _moduleService.EnableFeatures(new string[] { "TinyMceDeluxe" });
        }

        return 3; 
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T20:17:37.827

我认为您应该看一下 Orchard 工具：您可以启用和禁用功能并获取已启用功能的列表。查看 Orchard.Modules 项目中的 FeatureCommands.cs。希望这对您有所帮助。

# unix - 递归 Grep 命令特殊字符

> ID：13056756
> 
> 赞同：1
> 
> 时间：2012-10-24T19:58:33.383
> 
> 标签：unix, grep

我是 Unix 新手，无法理解 grep 命令，特别是添加到命令末尾的特殊字符。我做了很多研究，但找不到合适的术语来搜索。我的问题如下：

这两个命令有什么区别？

```
grep -r "Something" .

grep -r "Something" * 
```

命令末尾的特殊字符有名称吗？（即 * 和 .）

它们是正则表达式的一部分吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T20:00:53.450

```
. 
```

表示*当前目录*

和

```
* 
```

表示当前目录下的*所有文件*

*它与正则表达式*无关，但与`glob`s.

见[http://wiki.bash-hackers.org/syntax/expansion/globs](http://wiki.bash-hackers.org/syntax/expansion/globs)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T20:01:52.597

这些是搜索的*位置*；它们不是正则表达式的一部分。

在 Unix 中，`.`表示当前目录，而`*`表示当前目录中的所有文件。

# sass - 避免 SCSS 规则重复

> ID：13056757
> 
> 赞同：2
> 
> 时间：2012-10-24T19:58:46.123
> 
> 标签：sass, rule, repeat

我有一个文件，其中定义了一些用于边框阴影、渐变等的*CSS3*
规则。 为了可比性，我需要`behavior: url('/assets/css3pie.htc');`在 IE 中添加 for 支持。

```
@mixin box-shadow($props) {
  -webkit-box-shadow: #{$props};
     -moz-box-shadow: #{$props};
          box-shadow: #{$props};
  behavior: url('/assets/css3pie.htc');
} 
```

*为我的大多数CSS3*添加了行为规则，例如*边框阴影、渐变和边框半径*。

不幸的是，我注意到在输出中，当我使用两个或更多这些 CSS3 规则时，我最终也会得到**多个**`behavior: url('/assets/css3pie.htc');`给定对象的规则。

一个示例输出是：

```
button {
-webkit-border-radius: 4px;
  -moz-border-radius: 4px;
  border-radius: 4px;
  behavior: url("/assets/css3pie.htc"); # first time defined by the border-radius rule
  -webkit-box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
  -moz-box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
  behavior: url("/assets/css3pie.htc"); # second time, defined from the box-shadow rule
} 
```

哪个是最好的解决方案？有没有办法检查继承树以及是否已经定义了规则？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T10:49:26.067

看起来这是一个*SCSS*错误。

大多数属性会在类似情况下被覆盖，但有些属性可以定义多次，例如`background`.

这就是为什么它不是覆盖规则的*SCSS*默认行为。`behavior`属性没有像属性一样定义的原因`should be overwritten`是一个错误。

解决这个问题的最漂亮的方法是删除`behavior`定义属性并定义一个`css3pie`mixin，如下所示：

```
@mixin css3pie() {
  behavior: url('/assets/css3pie.htc');
} 
```

然后使用它，将以下行添加到每个启用*CSS3*的元素：

```
.css3-enabled-element {
  @include css3pie;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T12:37:57.990

在处理类似案例时，我想出了这个解决方案。

由于：

> IE 将行为属性的 URL 解释为相对于源 HTML 文档，而不是像其他所有 CSS 属性一样相对于 CSS 文件

（[更多信息](http://css3pie.com/documentation/known-issues/#relative-paths)），网址保存在一个变量中，可以根据项目轻松更改：

```
$pie-path: "/myproject/PIE.htc"; 
```

除非 2.1 Android 及更低版本和 3.2 iOS 及更低版本或 IE8 及更低版本的 CSS3PIE，否则不需要前缀，因此不再需要此 mixin –[更多信息](http://generatedcontent.org/post/37949105556/updateyourcss3)

```
@mixin border-radius ($val) {
    @each $prefix in '' {
        #{$prefix}border-radius: $val;
    }
    @extend %pie !optional;
} 
```

除非 3 Android 及更低版本和 4.3 iOS 及更低版本或 IE8 及更低版本的 CSS3PIE，否则不需要前缀 -[更多信息](http://generatedcontent.org/post/37949105556/updateyourcss3)

```
@mixin box-shadow ($val...) {
    @each $prefix in -webkit-, '' {
        #{$prefix}box-shadow: $val;
    }
    @extend %pie !optional;
} 
```

关于“ `!optional`”的注释：此标志是为了避免 SASS 在 @extend 不起作用时抛出错误（例如：占位符在 IE 的 .scss 文件中，而不是在一般文件中，但 mixin 由两者） -[更多信息](http://sass-lang.com/docs/yardoc/file.SASS_REFERENCE.html#the__flag)

占位符选择器：在文件的开头允许以下规则覆盖任何位置/固定属性。
关于“ `position:relative`”的注释：这里声明它是为了修复 z-index 问题（消失的背景/边框/阴影） -[更多信息](http://css3pie.com/documentation/known-issues/#z-index)。
根据 css 和项目，此规则可能会破坏布局

```
%pie {
    behavior: url($pie-path);
    position: relative;
} 
```

用法

```
.item1 {
    @include border-radius(10px);
}
.item2 {
    @include border-radius(5px);
    @include box-shadow(10px 10px 10px rgba(#000, .3));
}
.item3 {
    @include box-shadow(10px 10px 10px rgba(#F90, .8));
} 
```

输出

```
.item1,
.item2,
.item3 {
    behavior: url("/myproject/PIE.htc");
    position: relative;
}

.item1 {
    border-radius: 10px;
}
.item2 {
    border-radius: 5px;
    -webkit-box-shadow: 10px 10px 10px rgba(0, 0, 0, 0.3);
            box-shadow: 10px 10px 10px rgba(0, 0, 0, 0.3);
}
.item3 {
    -webkit-box-shadow: 10px 10px 10px rgba(255, 153, 0, 0.8);
            box-shadow: 10px 10px 10px rgba(255, 153, 0, 0.8);
} 
```

行为规则不重复，css更干净，属性只声明一次，便于IE和非IE的样式分离。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T22:55:02.720

传递另一个参数并使用`@for`指令来指定 mixin 是否应该输出额外的代码：

```
@mixin box-shadow($props, $css3pie: true) {
  -webkit-box-shadow: #{$props};
     -moz-box-shadow: #{$props};
          box-shadow: #{$props};
  @if $css3pie {
  behavior: url('/assets/css3pie.htc');
  }
}

@include box-shadow(2px 2px 2px black) // Include behavior
@include box-shadow(2px 2px 2px black, false) // Don't include behavior 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T05:18:53.123

我建议使用名为[Compass](http://compass-style.org/)的 SASS 库，而不是编写这些类型的 mixin。

这个库已经有一个完整的 css3 mixins 列表，如果你需要它也支持 css3pie。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-07-10T19:00:02.863

我通过为`content-type`网络浏览器提供正确的服务来让它工作。换句话说，我将以下行添加到我的 apache`.htaccess`文件中：

```
AddType text/x-component .htc 
```

# timezone - 我应该如何从 Noda Time 填充 IANA / Olson 时区列表？

> ID：13056759
> 
> 赞同：16
> 
> 时间：2012-10-24T19:58:49.703
> 
> 标签：timezone, nodatime

我在应用程序中使用 NodaTime，我需要用户从下拉列表中选择他们的时区。我有以下软要求：

1) 该列表仅包含对真实地点的当前和不久的将来合理有效的选择。应过滤掉历史、晦涩和通用的时区。

2) 列表应首先按 UTC 偏移量排序，然后按时区名称排序。这有望使它们按对用户有意义的顺序排列。

我编写了以下代码，它确实有效，但并不完全符合我的要求。过滤器可能需要调整，我宁愿让偏移量代表基本（非 dst）偏移量，而不是当前偏移量。

建议？建议？

```
var now = Instant.FromDateTimeUtc(DateTime.UtcNow);
var tzdb = DateTimeZoneProviders.Tzdb;
var list = from id in tzdb.Ids
           where id.Contains("/") && !id.StartsWith("etc", StringComparison.OrdinalIgnoreCase)
           let tz = tzdb[id]
           let offset = tz.GetOffsetFromUtc(now)
           orderby offset, id
           select new
           {
               Id = id,
               DisplayValue = string.Format("({0}) {1}", offset.ToString("+HH:mm", null), id)
           };

// ultimately we build a dropdown list, but for demo purposes you can just dump the results
foreach (var item in list)
    Console.WriteLine(item.DisplayValue); 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-06-13T23:29:50.463

Noda Time 1.1 具有[zone.tab 数据](http://noda-time.googlecode.com/hg-history/1.1.x/docs/api/html/T_NodaTime_TimeZones_TzdbZoneLocation.htm)，因此您现在可以执行以下操作：

```
/// <summary>
/// Returns a list of valid timezones as a dictionary, where the key is
/// the timezone id, and the value can be used for display.
/// </summary>
/// <param name="countryCode">
/// The two-letter country code to get timezones for.
/// Returns all timezones if null or empty.
/// </param>
public IDictionary<string, string> GetTimeZones(string countryCode)
{
    var now = SystemClock.Instance.Now;
    var tzdb = DateTimeZoneProviders.Tzdb;

    var list = 
        from location in TzdbDateTimeZoneSource.Default.ZoneLocations
        where string.IsNullOrEmpty(countryCode) ||
              location.CountryCode.Equals(countryCode, 
                                          StringComparison.OrdinalIgnoreCase)
        let zoneId = location.ZoneId
        let tz = tzdb[zoneId]
        let offset = tz.GetZoneInterval(now).StandardOffset
        orderby offset, zoneId
        select new
        {
            Id = zoneId,
            DisplayValue = string.Format("({0:+HH:mm}) {1}", offset, zoneId)
        };

    return list.ToDictionary(x => x.Id, x => x.DisplayValue);
} 
```

**替代方法**

[您可以使用基于地图的时区选择器](https://github.com/dosx/timezone-picker)，而不是提供下拉菜单。

![在此处输入图像描述](../Images/f365d5cb63047586bfb16b65e7b41a71.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-25T14:44:59.163

获得标准偏移很容易 - `tz.GetZoneInterval(now).StandardOffset`。这将为您提供“当前”标准偏移量（区域可能随时间变化）。

过滤*可能*适合您 - 我不想肯定地说。这当然不是*理想*的，因为 ID 并不是真正为显示而设计的。理想情况下，您会使用 Unicode CLDR“示例”位置，但目前我们在这方面没有任何 CLDR 集成。

# c# - Linq 中的互斥 group by

> ID：13056760
> 
> 赞同：-1
> 
> 时间：2012-10-24T19:58:51.963
> 
> 标签：c#, linq, grouping

我想相互排他地捕获重复项，即我需要证明第一项和第三项都是重复项，并且第一项和第四项是重复项。

```
public class Foo
{
    public String Name { get; set; }
    public String SName { get; set; }
}

class Program
{
    static void Main(string[] args)
    {
        var list = new List<Foo>();
        list.Add(new Foo { Name = "a", SName = "d" });
        list.Add(new Foo { Name = "b", SName = "e" });
        list.Add(new Foo { Name = "c", SName = "a" });
        list.Add(new Foo { Name = "a", SName = "f" });

        // only groups by 1 name
        var duplicates = list.GroupBy(i => i.Name).Where(g => g.Count() > 1).Select(g => g.Key);
    }
} 
```

我知道这可以用 foreach 轻松完成，我想学习。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T20:11:08.467

因此，我们将从任一列中获取所有重复的名称值开始，这相当容易：

```
IEnumerable<string> repeatedNames = list.SelectMany(foo => new[] { foo.Name, foo.SName })
    .GroupBy(name => name)
    .Where (g => g.Count () > 1)
    .Select(g => g.Key); 
```

接下来，我们获取每个名称并找到包含该值的所有项目。最终结果是每个不同名称的序列，其中序列是`Foo`包含该值的所有项目。

```
IEnumerable<List<Foo>> groupings = repeatedNames .Select(name =>
    list.Where(foo => foo.Name == name || foo.SName == name).ToList()); 
```

如果您希望它不是 Foos 列表的序列，而是具有不同值和序列的项目序列，那么添加它很容易：

```
var groupings = repeatedNames .Select(name => new
    {
        Name = name,
        Foos = list.Where(foo => foo.Name == name || foo.SName == name).ToList()
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T20:33:04.470

我想出了这个：

```
// Will return "a" - one which you already had
var duplicatesBetweenNames = list.GroupBy(i => i.Name)
    .Where(g => g.Count() > 1)
    .Select(g => g.Key).ToArray();

var duplicatedInSName = list.Select(x => x.Name)
    .Intersect(list.Select(x => x.SName));
// Will return "c" - represents Names where in SName is duplicate
var duplicatesBetweenNameAndSName = list
    .Where(f => duplicatedInSName.Contains(f.SName))
    .Select(x=>x.Name).ToArray(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T20:26:14.223

如果您只想要重复的值，而不是它们出现的索引，那么您可以`SelectMany`在进行分组之前将名称转换为单个字符串列表：

```
var duplicates2 = list.SelectMany(n => new string[] {n.Name, n.SName})
                      .GroupBy(g => g)
                      .Where (g => g.Count () > 1)
                      .Select(g => g.Key)
                      .ToList(); 
```

**编辑：** 如果您想要`Foo`对象而不仅仅是字符串，您可以像这样选择它们：

```
var duplicates3 = list.Where(n => duplicates2.Contains(n.Name) ||
                                  duplicates2.Contains(n.SName)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T20:52:15.047

有趣的线程，我只是认为在这种情况下查询语法非常有表现力：

```
var r = from l in list
        from s in new [] {l.Name,l.SName}
        group s by s into g
        where g.Count() > 1
        select g.Key into u
        from l in list
        where u.Contains(l.Name) || u.Contains(l.SName)
        select l; 
```

# sdk - Lua - 无限循环

> ID：13056761
> 
> 赞同：-4
> 
> 时间：2012-10-24T19:58:56.337
> 
> 标签：sdk, lua

这样的事情会奏效吗？

```
local a = 2
for i=0, a do
   i = i + 1
   a = a + 1
end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T20:01:29.043

定义“工作”。

这将从 0 循环到 2，因为 Lua 只*读取一次值*。它只评估表达式一次，即初始时间。之后，它将它们存储在您无法找到或更改的局部变量中，并从那里进行测试。

# javascript - Underscore.js - 使用正则表达式查找对象键的值？

> ID：13056762
> 
> 赞同：2
> 
> 时间：2012-10-24T19:58:56.610
> 
> 标签：javascript, underscore.js

我得到一个看起来像这样的对象数组：

```
var collection = [
  {
    name: 'hello',
    color: 'blue'
  },
  {
    name: 'world',
    color: 'brown'
  }, .... {thousands more}
]; 
```

使用下划线找出数组中是否有*任何*对象的“名称”键值等于某个正则表达式的正确方法是什么？

`_.contains(collection, '/goodbye/i'); <-- this won't work ->`

如何告诉它使用“名称”键进行搜索？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-24T20:04:47.357

你可以这样做：

```
filter = function (collection, key, regex) {
    return _.filter(collection, function(obj){ return obj[key].match(regex);});
}; 
```

# ruby - 如何使用 Selenium webdriver 在 Capybara 中打开一个新窗口？

> ID：13056763
> 
> 赞同：3
> 
> 时间：2012-10-24T19:59:05.520
> 
> 标签：ruby, selenium, capybara

我找到了一个代码：`page.driver.browser.switch_to.window`，它显然正在切换到已经打开的窗口。我们如何使用 page.driver.browser 对象打开一个新窗口？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2017-08-01T21:39:43.467

我最终来到了这里，即使是一个旧线程，也可能对某人有用，您可以像这样创建和使用窗口：

```
new_window = open_new_window
switch_to_window new_window 
```

或者：

```
within_window new_window do
end 
```

您还可以通过 windows 对象找到新窗口。

```
open_new_window
new_window = windows.last 
```

参考：

[http://www.rubydoc.info/github/jnicklas/capybara/Capybara/Session:open_new_window](http://www.rubydoc.info/github/jnicklas/capybara/Capybara/Session:open_new_window)

[http://www.rubydoc.info/github/jnicklas/capybara/Capybara%2FSession%3Aswitch_to_window](http://www.rubydoc.info/github/jnicklas/capybara/Capybara%2FSession%3Aswitch_to_window)

[https://github.com/teamcapybara/capybara#working-with-windows](https://github.com/teamcapybara/capybara#working-with-windows)

[使用 Capybara，如何切换到带有“_blank”目标的链接的新窗口？](https://stackoverflow.com/questions/7612038/with-capybara-how-do-i-switch-to-the-new-window-for-links-with-blank-targets)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T21:38:05.883

我最终使用 JavaScript 来做到这一点：

```
When /^I open a new window for "([^"]*)"$/ do |url|
str =
<<END_TAG
     window.open("#{url}", "window_name", "height=800,width=1000");
END_TAG
  page.execute_script(str)
end 
```

# javascript - onclientclick 验证不起作用

> ID：13056765
> 
> 赞同：1
> 
> 时间：2012-10-24T19:59:20.630
> 
> 标签：javascript, asp.net

提交按钮应该验证所有的txtboxes，所以我写了这段代码，
但它不起作用，**我还希望如果文本框不为空，那么它应该回发并且应该调用onclick，否则不会**

```
 function submit() {
      for( var i = 0, t = document.getElementsByName( "txt" ), l = t.length; i < l; i++ )     
         if( t[i].value)
            return true;

      return false;
   } 
```

**.aspx**

```
<asp:TextBox name="txt" runat="server" ID="email" CausesValidation="True"
                          ClientIDMode="Static"  ValidationGroup="email" ></asp:TextBox>

 <b>Password:</b><br />
                        <asp:TextBox ClientIDMode="Static" ID="pwd" runat="server" name="txt" TextMode="Password" CausesValidation="True"></asp:TextBox>

 <asp:LinkButton ID="Submit" runat="server" CssClass="button" Text="Login"
                             onclick="Submit_Click" OnClientClick="submit()" CausesValidation="False" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T20:27:51.543

首先，name 不是 ASP.NET TextBox 控件中的属性，为所有文本框使用一个通用的 CssClass 属性名称，在 javascript 中使用 document.getElementsByClassName 选择器来选择文本框。还要注意`return`在 OnClientClick 声明中的添加。

**ASPX**

```
<asp:TextBox CssClass="test" runat="server" ID="email" CausesValidation="True"
                          ClientIDMode="Static"  ValidationGroup="email" ></asp:TextBox>

 <b>Password:</b><br />
<asp:TextBox CssClass="test" ClientIDMode="Static" ID="pwd" runat="server" TextMode="Password" CausesValidation="True"></asp:TextBox>

 <asp:LinkButton ID="Submit" runat="server" CssClass="button" Text="Login"
                             onclick="Submit_Click" OnClientClick="return submit()" CausesValidation="False" /> 
```

**JAVASCRIPT**

```
function submit() {
      for( var i = 0, t = document.getElementsByClassName( "test" ), l = t.length; i < l; i++ )     
         if( t[i].value=="")
            return false;

      return true;
} 
```

# eclipse - 带有 Glassfish 的 Eclipse 调试器断点片断

> ID：13056775
> 
> 赞同：6
> 
> 时间：2012-10-24T19:59:58.917
> 
> 标签：eclipse, debugging, glassfish

在 Linux/Ubuntu 上使用 Glassfish 3.1.2 的 Eclipse Indigo 中。JDK 1.6.0_32。

**在 Glassfish 3.1.2.2 和带有最新 Eclipse Glassfish 插件的 Eclipse Juno 上**更新相同的结果。****

 **Eclipse 调试器在断点处停止，但不会将“调试”选项卡与当前线程/位置同步，并且不会在当前行显示光标。如果我手动展开每个线程的选项卡，我可以找出哪个线程被停止以及哪一行。如果我点击它，我可以在当前行上显示指针。但是，一旦我跨过/进入 (F5/F6)，当前行光标就会再次消失，我必须从头再来。

调试器*在*JUnit 和 Java SE 应用程序中运行良好。也是我*第*一次启动 Eclipse 和 Glassfish 时，一切正常。但是，如果我重新启动 Glassfish，调试器就会消失，直到我再次重新启动 Eclipse。

有人看到这个并找到了解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T20:10:08.040

我与**wrschneider99**描述的这个错误斗争了 2 天。我以为我找不到解决方案。我注意到，当我为我的 glassfish 服务器“打开启动配置”时，会显示错误消息“未选择服务器”。我发现了这个[Defect1](http://java.net/jira/browse/GLASSFISHPLUGINS-343?page=com.atlassian.jira.plugin.system.issuetabpanels%3aall-tabpanel)和[Defect2](http://java.net/jira/browse/GLASSFISHPLUGINS-361?page=com.atlassian.jira.plugin.system.issuetabpanels%3aall-tabpanel)的缺陷。按照建议，我通过在 eclipse 中安装新软件链接来安装 glassfish 服务器插件

```
http://dlc.sun.com.edgesuite.net/glassfish/eclipse/juno/ 
```

在“未选择服务器”的问题消失后，调试问题也得到了修复！我使用了 linux x64 和 eclipse indigo。看起来在 Eclipse 市场 glassfish 插件不是最新的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-09T22:00:31.003

我知道这篇文章很旧。但是，升级到 Eclipse Kepler 和 Glassfish 4 似乎已经解决了我的问题。**

# jquery - 如果父容器还包含“.foo2”，则将文本添加到“.foo”

> ID：13056778
> 
> 赞同：0
> 
> 时间：2012-10-24T20:00:04.380
> 
> 标签：jquery

我希望将“Hello World”添加到 .foo，但前提是容器（产品）还包含 .foo2。我已经完成了以下代码的一半，但是它将附加文本添加到 .foo 的所有实例，而不仅仅是也具有 .foo2 的指定产品容器。

```
<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Add text to foo if product contains foo2</title>
<style>
.product {
    width: 300px;
    border: 1px #333 solid;
    margin-bottom: 2%;
}
</style>

<script src="http://code.jquery.com/jquery-latest.min.js" type="text/javascript"></script>

<script>
$(function() {
    if($('.product > .foo2').length > 0){
        $(".foo").append("Hello World");
    }
});
</script>
</head>

<body>
<!-- Div 1 -->
<div class="product">
1
<div class="foo"></div>
</div>

<!-- Div 2 -->
<div class="product">
2
<div class="foo"></div>
<div class="foo2"></div>
</div>

<!-- Div 3 -->
<div class="product">
3
<div class="foo"></div>
</div>

</body>
</html> 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T20:03:34.210

您需要使用以下各项`.product`单独操作`.each()`：

```
$(".product").each(function() {
    var $foo = $(this).children(".foo");

    // using $something.length as a test to determine if it exists
    if ($foo.length && $(this).children(".foo2").length) {
        // so if this product has a .foo and it also has a .foo2,
        // append some text to the .foo
        $foo.append("Hello World");
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T20:09:14.853

你可以试试这个

```
​$(function(){
    $('.product:has("div.foo2")').find('.foo').append('Hello World');
});​ 
```

[**演示**](http://jsfiddle.net/5NSzU/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T20:09:24.240

最简单的方法是使用选择器定位：

```
$(".product:has(.foo2) > .foo").append("Hello World"); 
```

如果您需要拒绝将 foo2 作为间接子代的产品，这将不起作用，在这种情况下，您可以使用过滤器：

```
$(".product > .foo")
  .filter(function(){
    return $(this).parent().children(".foo2").length != 0
  }).append("Hello World"); 
```

Filter 是一个在每个元素上运行的函数。如果它返回 true，则保留该元素。如果它返回 false，则删除该元素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T20:16:03.493

这里的代码[jsfiddle.net/X8uUH/](http://jsfiddle.net/X8uUH/)只像你想要的那样将“hello world”添加到第二个 div

```
$(function() {
if($('.product > .foo2').length > 0){
  $(".product:has(.foo2) > .foo").append("Hello World");}});​ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-24T20:23:22.550

这是一种非常简单的方法，与您最初的方法相似

```
if($('.product').find(':contains(.foo2)')){
  $(".foo2"). siblings(".foo").append("Hello World");
} 
```

​这里有一个[小提琴](http://jsfiddle.net/9Ys3s/)

# javascript - IE7不返回下拉值

> ID：13056782
> 
> 赞同：2
> 
> 时间：2012-10-24T20:00:25.363
> 
> 标签：javascript, datetime, cross-browser, internet-explorer-7

我有一个小的 javascript 控件，允许用户选择日期和时间。

部分控件使用另一个日期选择器。此日期选择器按预期工作，并将所选值放入字段中。然后用户从下拉列表中选择小时、分钟（以 15 分钟为增量）和上午/下午。

数据看起来像这样：

```
followUpDate = 10/24/2012
hour = 06
minute = 30
ampm = AM 
```

但是，IE7 不会返回下拉列表的值。

我在用着

```
var hour = e.options[e.selectedIndex].value; 
```

并且小时（和后续变量）在 IE7 中仍未定义。但是，这些值在 IE8+ 和其他主要浏览器中是正确的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T20:42:33.410

我的问题是我正在使用：

```
var hour = e.options[e.selectedIndex].value; 
```

代替：

```
 var hour = e.options[e.selectedIndex].text; 
```

所以 IE7 不会得到下拉列表的值，保持未定义的值。但是，IE8+ 和其他浏览器接受 .value 并按预期工作。

# android - 如何使用正确的值放置一个 Edittext，而其他所有的都是错误的

> ID：13056783
> 
> 赞同：0
> 
> 时间：2012-10-24T20:00:28.260
> 
> 标签：android, android-edittext

我的意图是在下面放一个Edittext和一个按钮，当用户输入一个特定的单词并单击该按钮时，该值是正确的，而其他所有不同的单词都是错误的..如何用代码识别它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-04T16:37:48.667

首先你创建editText和按钮

```
<EditText
    android:id="@+id/editText1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:layout_marginLeft="80dp"
    android:layout_marginTop="59dp"
    android:ems="10" >

    <requestFocus />
</EditText>

<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    android:text="Button" /> 
```

然后剩下的很容易..

```
EditText txt = (EditText) findViewById(R.id.editText1);
String Answer = txt.getText().toString();

Button check = (Button) findViewById(R.id.button1);
check.setOnClickListener(new View.OnClickListener() {
                @Override
                public void onClick(View arg0) {
if(Answer.equals("your word")){
//correct
} else{
//wrong
}
                }
            }); 
```

我们定义我们的edittext和按钮，然后我们从edittext中获取文本并将其转换为字符串。之后，当我们的按钮被点击时，如果它等于它所做的事情，我们就会小鸡......

# cakephp - Cakephp $useTable 不起作用

> ID：13056786
> 
> 赞同：2
> 
> 时间：2012-10-24T20:00:51.743
> 
> 标签：cakephp, models, cakephp-model, cakephp-2.2

我正在CakePHP 2.2.3 上开发一个已经存在数据库（MySQL）的网络应用程序。这个数据库是西班牙语，所以我的应用程序是西班牙语，我收到错误“错误：在数据源默认值中找不到模型 orden 的表 orden”。

我的模型：

Orden.php

```
class Orden extends AppModel{
    public $name = 'Orden';
    public $useTable = 'ordenes';
    public $primaryKey = 'idorden';

} 
```

桌子：

```
CREATE TABLE IF NOT EXISTS `ordenes` (
  `idOrden` bigint(20) NOT NULL AUTO_INCREMENT,
  -- more columns --
  PRIMARY KEY (`idOrden`)
) 
```

APP/config/database.php

```
class DATABASE_CONFIG {

public $default = array(
    'datasource' => 'Database/Mysql',
    'persistent' => false,
    'host' => 'localhost',
    'login' => 'USER',
    'password' => 'PASS',
    'database' => 'DATABASE',
    'prefix' => '',
    //'encoding' => 'utf8',
); 
```

}

根据文档，我可以用相应的表声明 $useTable 但这不起作用。任何人都可以帮助我吗？

编辑：同样的问题，`$primaryKey`但变量`$name`具有正确的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T00:23:41.567

我找到了一个半而丑陋的解决方案。检查以下代码：

```
class OrdenesController extends AppController{

    public $name = 'Orden'; 
    public $uses = array('orden'); 
    public $helpers = array('Html', 'Form');

    public function index(){
        $this->orden->useTable = 'ordenes';
        $this->set('ord', $this->orden->find('all'));      
    }
} 
```

`$useTable`如果我在 中设置变量`OrdenesController`，我可以得到 Ordenes 的数组。谁能告诉我为什么？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-16T09:24:48.453

您找到了问题的答案，并提供了对您有效的部分解决方案，但实际上这是一种在任何情况下都不起作用的解决方法。

我想回答这个问题：

“如果我`$useTable`在 OrdenesController 中设置变量，我可以获得 Ordenes 数组。谁能告诉我为什么？”

您在自己的解决方案中提出的问题~~（还不能评论）~~.

第一个重要的注意事项 CakePHP 会抛出错误：

`Error: Table <table name> for model <model name> was not found in datasource default.`

1.  如果在数据源默认值中找不到`<table name>`模型表。（显然）`<model name>`
2.  但在某些情况下，如果 cakePHP 找不到模型`<modelname>`，这可能会很混乱。

您在模型中所做的工作的原因是因为在您的控制器中您编写：

```
public $uses = array('orden'); 
```

CakePHP 假定 $this->order 作为模型并尝试在文件夹 Model 中查找模型**顺序**（请注意，CakePHP 将要查找的文件是**order.php 而**不是**Order.php**它也期望该类被称为**order**而不是**Order**，即使您可以更改模型的类名设置`$name`）。

如果它找到模型，它会尝试从模型的默认设置或设置集（如您的情况中的`$useTable`and `$primaryKey`）中检索数据。
如果它找不到表，则会显示错误消息，正确指示它找不到表的事实。

但是如果它没有找到模型 cakePHP 尝试实例化模型，在这种情况下使用默认值，因为没有进行任何设置（模型是*“on fly”*实例化的）。这意味着它使用*default*作为数据源，并且是 orden 的英文复数*，ordens* cakePHP*尝试*查找*ordens*表（这是 cakePHP 为模型命名表的标准方式，而 orden 不是英文单词）。由于此表不在*默认*数据源中，因此会引发错误，但真正的错误是不存在的文件。

 ***当您更改`$useTable`模型中的值时，您认为它将被使用而不是标准，但是 cakePHP 没有使用您的模型*Orden*，而是*“动态”*实例化模型*orden*，因为它无法找到模型*orden*，因为错误消息是 sais（您的类是调用*Orden*而不是*orden*）。

因此，任何默认模型支持的任何默认操作（例如*find*等）都将起作用。
然后你调用`$this->orden->find('all')`它会完美地工作，但是如果你在你的模型中创建任何函数（你认为你正在使用*Orden的那个）并调用它，你会得到一个错误，因为它们在**“on fly”*版本中不存在。

出于这个原因，您的解决方法将起作用，但只是部分起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T20:08:29.303

您确定您的表存在于您的默认数据源中吗？CakePHP 可以使用多个数据源来处理多个连接（请参阅 参考资料`APP/config/database.php`）

不正确，但与您的问题无关，是`public $primaryKey = 'idorden';`. 查看您的 MySQL 代码，它应该说：`public $primaryKey = 'idOrden';`

你有调试模式吗？尝试将缓存刷新到`/APP/tmp/cache`.

也许您使用的表前缀和数据库中的表没有前缀？

您是否复制并粘贴了错误消息？模型不太可能用小型大写字母编写。

`$useTable`您还可以使用无关来定义您的单词的自定义单数和复数形式。见[http://book.cakephp.org/2.0/en/development/configuration.html#inflection-configuration](http://book.cakephp.org/2.0/en/development/configuration.html#inflection-configuration)

但是请查看您的数据库配置或向我们展示代码以让我们查看您是否使用多个数据源。否则，在 mysql 提示符或 phpMyAdmin 等工具的帮助下检查该表是否确实存在。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-05-15T16:03:21.750

我也遇到了这个问题。原因是我的模型 php 文件名`ScheduleAd.php`，但我写`"ScheduleAD"`的是使用数组。

```
public $uses = array('ScheduleAD'); 
```

所以，请检查您的模型文件名和模型类名和 $uses 数组中的名称，它们必须完全相等:)***

# doctrine-orm - 教义级联到具有 OneToMany 关系的子对象

> ID：13056792
> 
> 赞同：1
> 
> 时间：2012-10-24T20:01:01.927
> 
> 标签：doctrine-orm, one-to-many, cascade

我在坚持和反对拥有子对象时遇到了一些麻烦。更具体地说，我有一个拥有至少一个 PGPKey 对象的用户类。

以下代码段失败：

```
$user = new User("username","password");
$em->persist($user); 
```

出现错误：

> SQLSTATE [23000]：违反完整性约束：1048 列 'PGPKeys.owner' 不能为空

对我来说问题如下：对应于 PGPKey.owner 的 User.idUser 字段是 GeneratedValue ，因此在调用 persist 时仍然未定义。然后 Doctrine 首先尝试保存 PGPKey 但 SQL 不允许 owner 为空。如果首先保存用户，则生成的 id 可用于保存到 PGPkey 的所有者字段。

我原以为 Doctrine 在拥有之前保存了拥有对象，但事实并非如此，或者我遗漏了一些东西。

User.postPersist() 永远不会执行。

用户.php

```
/**
 * @HasLifecycleCallbacks
 * @Entity
 */
class user {
    /**
     * @Id
     * @Column(type="integer", nullable=false, columnDefinition="int(11) unsigned NOT NULL AUTO_INCREMENT");
     * @GeneratedValue(strategy="AUTO")
     */
    protected $idUser;

    /**
     * @Column(type="string", nullable=false, columnDefinition="VARCHAR( 255 ) NOT NULL")
     */
    protected $username;

    /**
     * @OneToMany(targetEntity="PGPKey", mappedBy="owner", cascade={"persist","remove"}, orphanRemoval=true)
     * @var PGPKey[]
     */
    protected $PGPKeys;

    public function __construct($username,$password)
    {
        $this->PGPKeys = new ArrayCollection();
        $this->username = $username;
        $this->setPassword($password);
    }

    /** @PostPersist */
    public function postPersist(){
        foreach ($this->PGPKeys as $key)
        {
            $key->setOwner($this->getId());
        }
    }
    public function setPassword($newPassword, $oldPassword = false)
    {
        if ($oldPassword === false || !count($this->PGPKeys))
        {
            $newkey = new PGPKey($newPassword);
            $newkey->setOwner($this->idUser);
            $this->PGPKeys[] = $newkey;
        }
        else
        {
            $this->PGPKeys[count($this->PGPKeys) - 1]->changePassword($oldPassword, $newPassword);
        }
    }
} 
```

PGPKey.php

```
/**
 * @Entity
 */
class PGPKey
{

    /**
     * @Id
     * @Column(type="integer", unique=true, columnDefinition="int(11) unsigned NOT NULL AUTO_INCREMENT");
     * @GeneratedValue(strategy="AUTO")
     */
    protected $idKey;

    /**
     * @Column(type="integer", columnDefinition="int(11) unsigned NOT NULL");
     * @ManyToOne(targetEntity="User", inversedBy="PGPKeys");
     */
    protected $owner;

    public function __construct($password)
    {
        //do RSA stuff
    }

    public function setOwner($ownerid)
    {
        $this->owner = $ownerid;
        return $this;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T18:40:53.690

在与学说 IRC 上的某人聊天后，我终于可以提出一个解决方案：

在类 PGPKey 而不是

```
/**
 * @Column(type="integer", columnDefinition="int(11) unsigned NOT NULL");
 * @ManyToOne(targetEntity="User", inversedBy="PGPKeys");
 */
protected $owner;
public function setOwner($ownerid)
{
    $this->owner = $ownerid;
    return $this;
} 
```

它应该读

```
/**
 * @var User
 * @ManyToOne(targetEntity="User", inversedBy="PGPKeys");
 * @JoinColumn(name="owner", referencedColumnName="idUser")
 */
protected $owner;

public function setOwner(User $owner)
{
    $this->owner = $owner;
    return $this;
} 
```

因此，该属性必须定义为 JoinColumn，并且您必须引用整个所有者对象，而不仅仅是 id。然后，Doctrine 将使用 JoinColumn 注释中的信息从用户那里提取 id。这样，用户首先存储到数据库中，给定一个自动 id，并且在执行时将此 id 传递给 PGPKey 子对象

```
$user = new User("username","password");
$em->persist($user) 
```

希望这对其他人也有帮助。

# java - 三次曲线 JavaFX

> ID：13056795
> 
> 赞同：8
> 
> 时间：2012-10-24T20:01:21.890
> 
> 标签：java, graphics, javafx

我很难使用 JavaFX 中的 CubicCurve。例如，如何绘制： y=x^3 ？绘制曲线的机制看起来非常笨拙。

也可以将曲线的一个端点连接到另一个节点，那么当该节点的位置发生变化时，曲线会适应它吗？

谢谢。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-24T23:07:02.350

我认为 JavaFX 中的 CubicCurves 并不像你想象的那样工作。JavaFX CubicCurve 是一条[贝塞尔曲线](http://math.fullerton.edu/mathews/n2003/BezierCurveMod.html)，它与您在高中数学中通常遇到的 y=x^3 等三次多项式完全不同。关于贝塞尔曲线你想知道的一切都[在这里](http://processingjs.nihongoresources.com/bezierinfo/)。

贝塞尔曲线通常用于在计算机图形中生成平滑曲线。它们由起点和终点以及一组用于操作曲线的控制点定义。您可以通过玩一个交互式示例来最好地了解它是如何工作的，您可以在起点、终点和控制点周围拖动以形成不同的曲线。

> 例如，如何绘制： y=x^3 ？

虽然有可能解决贝塞尔方程以减少到多项式，例如 y=x^3，但您可能想在[math.stackexchange.com](https://math.stackexchange.com/)上提出这个问题，其中数学家的能力将远高于，因为例如，我。

完成此操作的另一种方法是运行一个循环，通过将函数应用于 x 值来计算 x 值的小增量的 y 值，然后为路径中的每个计算点添加 LineTo。以下问题和答案演示了这种方法：

*   [在 JavaFX 中使用画布绘制笛卡尔平面图形](https://stackoverflow.com/questions/24005247/draw-cartesian-plane-graphi-with-canvas-in-javafx)

> 是否可以将曲线的一个端点连接到另一个节点，所以当该节点的位置发生变化时，曲线会适应它？

是的，请尝试下面的示例应用程序，其中曲线终点和控制点绑定到可拖动节点。当锚节点被拖动时，曲线会适应锚节点位置的变化。

```
import javafx.application.Application;
import javafx.beans.property.DoubleProperty;
import javafx.event.EventHandler;
import javafx.scene.*;
import javafx.scene.input.MouseEvent;
import javafx.scene.paint.Color;
import javafx.scene.shape.*;
import javafx.stage.Stage;

/** Example of how a cubic curve works, drag the anchors around to change the curve. */
public class CubicCurveManipulator extends Application {
  public static void main(String[] args) throws Exception { launch(args); }
  @Override public void start(final Stage stage) throws Exception {
    CubicCurve curve = createStartingCurve();

    Line controlLine1 = new BoundLine(curve.controlX1Property(), curve.controlY1Property(), curve.startXProperty(), curve.startYProperty());
    Line controlLine2 = new BoundLine(curve.controlX2Property(), curve.controlY2Property(), curve.endXProperty(),   curve.endYProperty());

    Anchor start    = new Anchor(Color.PALEGREEN, curve.startXProperty(),    curve.startYProperty());
    Anchor control1 = new Anchor(Color.GOLD,      curve.controlX1Property(), curve.controlY1Property());
    Anchor control2 = new Anchor(Color.GOLDENROD, curve.controlX2Property(), curve.controlY2Property());
    Anchor end      = new Anchor(Color.TOMATO,    curve.endXProperty(),      curve.endYProperty());

    stage.setTitle("Cubic Curve Manipulation Sample");
    stage.setScene(new Scene(new Group(controlLine1, controlLine2, curve, start, control1, control2, end), 400, 400, Color.ALICEBLUE));
    stage.show();
  }

  private CubicCurve createStartingCurve() {
    CubicCurve curve = new CubicCurve();
    curve.setStartX(100);
    curve.setStartY(100);
    curve.setControlX1(150);
    curve.setControlY1(50);
    curve.setControlX2(250);
    curve.setControlY2(150);
    curve.setEndX(300);
    curve.setEndY(100);
    curve.setStroke(Color.FORESTGREEN);
    curve.setStrokeWidth(4);
    curve.setStrokeLineCap(StrokeLineCap.ROUND);
    curve.setFill(Color.CORNSILK.deriveColor(0, 1.2, 1, 0.6));
    return curve;
  }

  class BoundLine extends Line {
    BoundLine(DoubleProperty startX, DoubleProperty startY, DoubleProperty endX, DoubleProperty endY) {
      startXProperty().bind(startX);
      startYProperty().bind(startY);
      endXProperty().bind(endX);
      endYProperty().bind(endY);
      setStrokeWidth(2);
      setStroke(Color.GRAY.deriveColor(0, 1, 1, 0.5));
      setStrokeLineCap(StrokeLineCap.BUTT);
      getStrokeDashArray().setAll(10.0, 5.0);
    }
  }

  // a draggable anchor displayed around a point.
  class Anchor extends Circle { 
    Anchor(Color color, DoubleProperty x, DoubleProperty y) {
      super(x.get(), y.get(), 10);
      setFill(color.deriveColor(1, 1, 1, 0.5));
      setStroke(color);
      setStrokeWidth(2);
      setStrokeType(StrokeType.OUTSIDE);

      x.bind(centerXProperty());
      y.bind(centerYProperty());
      enableDrag();
    }

    // make a node movable by dragging it around with the mouse.
    private void enableDrag() {
      final Delta dragDelta = new Delta();
      setOnMousePressed(new EventHandler<MouseEvent>() {
        @Override public void handle(MouseEvent mouseEvent) {
          // record a delta distance for the drag and drop operation.
          dragDelta.x = getCenterX() - mouseEvent.getX();
          dragDelta.y = getCenterY() - mouseEvent.getY();
          getScene().setCursor(Cursor.MOVE);
        }
      });
      setOnMouseReleased(new EventHandler<MouseEvent>() {
        @Override public void handle(MouseEvent mouseEvent) {
          getScene().setCursor(Cursor.HAND);
        }
      });
      setOnMouseDragged(new EventHandler<MouseEvent>() {
        @Override public void handle(MouseEvent mouseEvent) {
          double newX = mouseEvent.getX() + dragDelta.x;
          if (newX > 0 && newX < getScene().getWidth()) {
            setCenterX(newX);
          }  
          double newY = mouseEvent.getY() + dragDelta.y;
          if (newY > 0 && newY < getScene().getHeight()) {
            setCenterY(newY);
          }  
        }
      });
      setOnMouseEntered(new EventHandler<MouseEvent>() {
        @Override public void handle(MouseEvent mouseEvent) {
          if (!mouseEvent.isPrimaryButtonDown()) {
            getScene().setCursor(Cursor.HAND);
          }
        }
      });
      setOnMouseExited(new EventHandler<MouseEvent>() {
        @Override public void handle(MouseEvent mouseEvent) {
          if (!mouseEvent.isPrimaryButtonDown()) {
            getScene().setCursor(Cursor.DEFAULT);
          }
        }
      });
    }

    // records relative x and y co-ordinates.
    private class Delta { double x, y; }
  }  
} 
```

示例程序输出：

![三次曲线示例程序输出](../Images/a5658c015a7354e69f4f05b253030b4c.png)

# c++ - C++ 中的单元测试运算符<<

> ID：13056799
> 
> 赞同：10
> 
> 时间：2012-10-24T20:01:37.313
> 
> 标签：c++, unit-testing, iostream

我试图找出一种很好的方法来对我`operator<<`在 C++ 中的实现进行单元测试。我有一个实现运算符的类，并给定一个具有特定状态的实例，我想检查输出是否是我想要的。

这是我的代码（头文件）：

```
class Date {
    virtual int year() const { return 1970; };
    virtual int month() const { return 1; };
    virtual int day() const { return 1; };
    friend  std::ostream &operator<<(std::ostream &os, const Date &d);
};

std::ostream &operator<<(std::ostream &os, const Date &d) {
    os << d.year() << "-" << d.month() << "-" << d.day();
    return os;
}; 
```

现在，在我的单元测试方法中，我可以`Date d; cout << d;`在运行测试时验证输出是否正确。但是，我宁愿以编程方式验证这一点，所以我不必多看测试输出，而是查看最终报告（希望它说“0 个失败的测试！”）。

我对 C++ 还很陌生，所以除了输入和输出之外，我从来没有真正使用过流。

我该如何做到这一点？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-24T20:06:11.810

您可以使用 a[`std::stringstream`](http://www.cplusplus.com/reference/iostream/stringstream/)来保存结果，然后调用[`str()`](http://www.cplusplus.com/reference/iostream/stringstream/str/)它来获取字符串：

```
#include "Date.h"

#include <iostream>
#include <sstream>

int main() {
    Date d;
    std::stringstream out;
    out << d;
    if(out.str() == "1970-1-1") {
        std::cout << "Success";
    } else {
        std::cout << "Fail";
    }
} 
```

注意：我花了很长时间在 C++ 中寻找一个像样的单元测试框架，当时我发现最好的是[googletest——](http://code.google.com/p/googletest/)以防你还没有选择框架。

# php - 如何在我的类中获取调用者函数名称？

> ID：13056806
> 
> 赞同：0
> 
> 时间：2012-10-24T20:01:57.537
> 
> 标签：php

> **可能重复：**
> [如何在 PHP 中获取调用函数/方法的名称？](https://stackoverflow.com/questions/2110732/how-to-get-name-of-calling-function-method-in-php)

所以在 PHP 中，我正在尝试构建一个自定义错误处理程序类。这很简单：我给它一个代码，它会返回一个格式化的错误消息，我可以用它来发送到移动设备。

所以它现在看起来像这样：

```
class Errorhandler {
   private $errors = array(
       //here be error codes and messages
       100 => 'Missing input or parameter!'
  );

   public function __construct($code = 100){
        //return formatted output
   }
} 
```

所以我会使用上面的类：

```
public function someFunction(){
    //some conditions met, then throw an error
    $handler = new ErrorHandler();
    $this->response = $handler;        
} 
```

所以我需要在我的 Errorhandler 类中使用父函数的名称（someFunction），这样我就可以用格式化的错误消息返回它。附带说明：我不想为此使用参数，那里写得太多。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T20:05:10.677

`__FUNCTION__`

这是魔法。在此处查看更多信息：[http ://www.php.net/manual/en/language.constants.predefined.php](http://www.php.net/manual/en/language.constants.predefined.php)

至于在您的 ErrorHandler 类中实际获取它，您必须将它传递给构造函数。PHP 没有*那么*神奇。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T20:07:54.393

您可以使用`debug_backtrace()`获取已调用您的函数的函数。

`debug_backtrace()`返回当前调用堆栈。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T20:25:41.663

您可以解析`debug_backtrace()`函数输出。它返回所有调用的关联数组到最顶层（http://php.net/manual/en/function.debug-backtrace.php）

另请注意，致命错误将中断正常的脚本执行并捕获它，您需要从注册的回调中调用错误处理程序`register_shutdown_function()`（http://php.net/manual/ru/function.register-shutdown-function.php）

# jquery - 如何使用 AJAX 和 JQuery 实现对 JSON 数据的 PUT 调用？

> ID：13056810
> 
> 赞同：17
> 
> 时间：2012-10-24T20:02:23.173
> 
> 标签：jquery, ajax, json, put

我环顾四周并尝试了许多不同的方法，但似乎无法将实际数据传递给我的控制器功能。

这是一些代码：

```
 var URL = "/Timesheet/Timesheet/UpdateEntry";

        var dataObject = { 'newWeekEntry': newEntry, 'oldWeekEntry': oldEntry };

        alert(JSON.stringify(dataObject));

        $.ajax({
            url: URL,
            type: 'PUT',    
            data: JSON.stringify(dataObject),
            dataType: 'json',
            success: function(result) {
                alert("success?");
            }
        }); 
```

`newEntry`并且`oldEntry`都是对象。

该`alert`行输出此内容（为简洁起见，删除了一些属性）：

```
{"newWeekEntry":{"MondayHours":2,"TuesdayHours":2,"WednesdayHours":5,"ThursdayHours":5,"FridayHours":"4","SaturdayHours":0,"SundayHours":0},"oldWeekEntry":{"MondayHours":2,"TuesdayHours":2,"WednesdayHours":5,"ThursdayHours":5,"FridayHours":2,"SaturdayHours":0,"SundayHours":0}} 
```

当我调试我的控制器操作（“UpdateEntry”）时，这两个参数都填充了`TimesheetEntry`类默认参数（0）。

我是否正确传递了这个？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-10-24T20:15:29.747

该`dataType`属性仅在您从服务器获取数据时使用。您应该在向服务器发送数据时设置`contentType`为。`application/json`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-03-05T06:07:37.147

```
$.ajax({
        url: window.serverUrl + 'student/event/' + eventId,
        type: 'put',
        data: JSON.stringify(data),
        headers: {
            'x-auth-token': localStorage.accessToken,
            "Content-Type": "application/json"
        },
        dataType: 'json'
}) 
```

这对我有用

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-12-23T20:42:20.613

使用 headers:`{"X-HTTP-Method-Override": "PUT"}`并覆盖`POST`请求类型。它适用于我的项目......

```
$.ajax({
    type: 'POST', // Use POST with X-HTTP-Method-Override or a straight PUT if appropriate.
    dataType: 'json', // Set datatype - affects Accept header
    url: "http://example.com/people/1", // A valid URL
    headers: {"X-HTTP-Method-Override": "PUT"}, // X-HTTP-Method-Override set to PUT.
    data: '{"name": "Dave"}' // Some data e.g. Valid JSON as a string
}); 
```

# playorm - @NoSqlEmbedded 不工作

> ID：13056811
> 
> 赞同：2
> 
> 时间：2012-10-24T20:02:26.453
> 
> 标签：playorm

我的项目有两个课程如下：

```
@NoSqlEmbeddable
public class RequestTO2 {
 @NoSqlId
private String id;
private String jSon
getter(), setters() }

@NoSqlEntity
public class User {
@NoSqlId
 @NoSqlIndexed
private String id;
@NoSqlEmbedded
private List<RequestTO2> requests = new ArrayList<RequestTO2>();
getters(), setters() } 
```

在我的代码中，我正在尝试使用 request 进行用户插入：

```
User user = new User();
user.setId( "111" );
RequestTO2 req2 = new RequestTO2 ();
req2.setId("abc");
req2.setjSon("json:test");
user.getRequests().add(req2);
em.put( user );
em.flush( user ); 
```

用户已保存，没有出现错误，但有关请求的信息尚未与用户数据一起保存......（没有为请求插入任何内容）

知道我在做什么错吗？

谢谢，

安德烈

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T12:45:26.433

你没有做错任何事......你抓住我们的裤子。我们实际上是在那个中间。上周，我们刚刚提供了对这段代码的支持，它确实有效......

```
public class Car {
   @NoSqlEmbedded
   private List<String> cookies;
   @NoSqlEmbedded
   private List<LocalDate> dates;
} 
```

但我们还没有完成上述一项。目前它已经完成了一半，这就是为什么你没有收到错误的原因（以前，错误是“这还不支持”）

谢谢，院长

# api - Elliot Haughin Twitter Codeigniter API 用户访问令牌和访问秘密问题

> ID：13056814
> 
> 赞同：0
> 
> 时间：2012-10-24T20:02:40.117
> 
> 标签：api, codeigniter, twitter, twitter-oauth

我正在使用 Haughin 的 Twitter Codeigniter API 登录 twitter。现在我需要能够代表用户发布推文。问题是，我首先需要找到并获取用户的访问令牌和用户的密码，并将它们存储在我的数据库中以备后用。连接到 Twitter 后，我在哪里可以找到这些？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T20:08:01.510

嗨，它是一个旧图书馆，试试这个图书馆[新的推特图书馆](https://github.com/vixnet/codeigniter-twitter)

# asp.net - RadioButtonList 固定宽度问题

> ID：13056815
> 
> 赞同：0
> 
> 时间：2012-10-24T20:02:43.770
> 
> 标签：asp.net, visual-studio-2010, web-applications, radiobuttonlist, fixed-width

我搜索了这个问题，但找不到它......我的问题是这个单选按钮列表，我试图与它的标签对齐，但继续得到这个。

![在此处输入图像描述](../Images/57e3be021d184d762991e756f1db9bec.png)

如您所见，按钮列表具有我无法更改的固定宽度。红色圆圈是我要对齐单选按钮的位置。我试图 textalign="right" 但它与第二行重叠，因为名称（博士。先生......）之前的空间很宽，就像这样......你可以看到宽度是固定的...... ![在此处输入图像描述](../Images/3bbc5f99f1871dbe2c9de0bb84a98ece.png)

下面是我的代码......任何想法如何解决这个愚蠢的问题？？？谢谢

```
<div style="padding:5px;"><label>Prefix *</label>
<asp:RadioButtonList id="Prefix" runat="server" TextAlign="Left" RepeatDirection="Vertical">
    <asp:listitem id="Dr" runat="server" >Dr.</asp:listitem>
    <asp:listitem id="Mr" runat="server" >Mr.</asp:listitem>
    <asp:listitem id="Mrs" runat="server" >Mrs.</asp:listitem>
    <asp:listitem id="Miss" runat="server" >Miss</asp:listitem>
    <asp:listitem id="Ms" runat="server" >Ms.</asp:listitem>
</asp:RadioButtonList>
<asp:RequiredFieldValidator id="RequiredFieldValidator2" runat="server"
       ControlToValidate="Prefix"
       ErrorMessage="Prefix is required."
       ForeColor="Red">
    </asp:RequiredFieldValidator></div> 
```

更新 -

我有以下 css 假设对齐所有标签，如“前缀 *”......那么为什么它会影响单选按钮......并且是否有某种覆盖来修复它？

```
 label
    {
        width: 20em;
        float: left;
        text-align: right;
        margin-right: 0.5em;
        display: block;
        color: Black;
     } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T22:36:27.770

为单选按钮列表分配一个类名

```
<asp:RadioButtonList id="Prefix" runat="server" CssClass="radioButtonList" RepeatDirection="Vertical">
    <asp:listitem Value="Dr">Dr.</asp:listitem>
    <asp:listitem Value="Mr">Mr.</asp:listitem>
    <asp:listitem Value="Mrs">Mrs.</asp:listitem>
    <asp:listitem Value="Miss">Miss</asp:listitem>
    <asp:listitem Value="Ms">Ms.</asp:listitem>
</asp:RadioButtonList> 
```

并使用以下 CSS

```
.radioButtonList input
 {    
      float: left;
 }

 .radioButtonList label
 {    
      margin-left: 10px;
      display: block;
      text-align: left;
 } 
```

# ruby - 在 Mongo 文档（Ruby、mongoid）中缓存/存储聚合的模式？

> ID：13056817
> 
> 赞同：1
> 
> 时间：2012-10-24T20:02:48.000
> 
> 标签：ruby, mongodb, design-patterns, mongoid

我正在收集一组帐户中的推文，并希望进行这样的计算，例如每（给定）月的推文，或给定月份每条推文的平均推文长度。

一旦这个计算在过去一次完成（例如，2010 年 5 月用户 X 推文 4.2 次/天），它就不需要重新计算（大量删除过去的推文是一种极端情况）......所以在这种情况下，根据需要执行此聚合然后将其存储在 Mongo 文档中的基本模式是什么。

例子：

```
t = TwitterAccount.find_by(:screen_name=>'Bob')
puts t.tweet_rate(:month=>5, :year=>2010)
# ...

puts t.tweet_rate(:month=>5, :year=>2010)
# cached/memoized result is stored inside document 
```

我可以猜测如何编写自己的类来处理这个问题，但我认为这在 NoSQL 世界（我刚开始使用 MongoDB）中是一种足够常见的模式，可以随意添加新属性。

（我使用 Ruby 1.9 和 Mongoid 作为我的 ORM，但不要认为这在概念上很重要）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T21:41:41.557

是的，在数据​​库中记忆是一种常见的模式。使用 MongoDB，您可以使用 BSON 的丰富性来存储嵌入式数组，以便您可以通过一个 DB 请求轻松高效地获取数据。

MongoDB 中的嵌入式文档数组存在一些细微差别。以下测试显示了“$elemMatch”数组查询选择器和“$”更新数组运算符的用法。它还具有客户端和服务器端更新的示例。

[http://docs.mongodb.org/manual/reference/operators/](http://docs.mongodb.org/manual/reference/operators/)

虽然您的每月更新不频繁，但您可以预先分配以避免因增长文档而产生的开销。预分配需要几行额外的代码，并且您还必须处理年份纪元。

红宝石 1.9.3，Mongoid 3.0.15，轻便摩托车 1.3.1

```
class TwitterAccount
  include Mongoid::Document
  field :screen_name, type: String
  embeds_many :tweet_rates
end

class TweetRate
  include Mongoid::Document
  field :year, type: Integer
  field :month, type: Integer
  field :rate, type: Float
  embedded_in :twitter_account
end 
```

测试/单元/tweet_rate_test.rb

```
require 'test_helper'

class TweetRateTest < ActiveSupport::TestCase

  def setup
    TwitterAccount.delete_all
    TwitterAccount.create(:screen_name => 'Bob')
  end

  test "monthly append" do
    t = TwitterAccount.find_by(:screen_name => 'Bob')
    assert_equal('Bob', t.screen_name)
    t.tweet_rates.create(:year => 2010, :month =>5, :rate => 12.3)
    t.save!
    tr = TwitterAccount.find_by(:screen_name => 'Bob').tweet_rates
    assert_equal(1, tr.size)
  end

  test "prealloc for a year" do
    t = TwitterAccount.find_by(:screen_name => 'Bob')
    assert_equal('Bob', t.screen_name)

    # prealloc for a whole year
    year = 2012
    (1..12).each do |month|
      t.tweet_rates.create(:year => year, :month => month, :rate => -1.0)
    end
    t.save!
    t = TwitterAccount.find_by(:screen_name => 'Bob')
    assert_equal(12, t.tweet_rates.size)

    # update a rate using client-side Ruby
    month, rate  = 10, 12.3
    t.tweet_rates.detect{|tr| tr.year == year && tr.month == month}.rate = rate
    t.save!
    assert_equal(rate, TwitterAccount.find_by(:screen_name => 'Bob')
                                     .tweet_rates.detect{|tr| tr.year == year && tr.month == month}.rate) # used #detect NOT overloaded #find

    # update a rate using MongoDB server-side
    month, rate = 11, 4.56
    TwitterAccount.where({ :screen_name => 'Bob',
                           :tweet_rates => { '$elemMatch' => { :year => year, :month => 11 } } })
                  .update('$set' => { 'tweet_rates.$.rate' => rate })
    assert_equal(rate, TwitterAccount.where({ :screen_name => 'Bob'}).first
                                     .tweet_rates.detect{|tr| tr.year == year && tr.month == month}.rate) # use #detect and NOT overloaded #find
  end
end 
```

希望这会有所帮助。

# php - ZF2 如何或在哪里（）

> ID：13056820
> 
> 赞同：13
> 
> 时间：2012-10-24T20:02:59.637
> 
> 标签：php, zend-framework, zend-framework2

我试图弄清楚如何在 where 子句中使用 OR 来制作 Mysql Select。默认情况下，where 语句中的所有子句都是 ANDed，并且经过几个小时的尝试和失败，并且查看网络无法使其工作。在 ZF1 中它将是一个 orWhere() 但在 ZF2 中没有。

这是我在里面的代码`AbstracttableGateway`：

```
$resultSet = $this->select(function (Select $select) use ($searchstring) {
             $select->join('users','blog_posts.id_user = users.id',array('name'))
                    ->join('blog_categories','blog_posts.id_category = blog_categories.id', array(
                                           'cat_name'   => 'name',
                                           'cat_alias' => 'alias',
                                           'cat_image'  => 'icon'))
                    ->order('date DESC');
                    //->where("title LIKE '%" .$searchstring . "%' OR content LIKE '%". $searchstring ."%'")
            $select->where->like('content','%'.$searchstring.'%');
            $select->where->like('title','%'.$searchstring.'%');
        }
    );
    return $resultSet; 
```

带有 的行`$select->where->like`是 ANDed 的行，我希望它们带有 OR。我应该改变什么？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-24T20:29:30.133

ZF2中没有`orWhere`，但您可以使用任何`Zend\Db\Sql\Predicate`对象组合。`PredicateSet`对于 OR，在with中使用 2 个谓词`PredicateSet::COMBINED_BY_OR`。

它的文档不多，但您可以浏览源代码 - 现在。

**编辑**：示例

```
use Zend\Db\Sql\Predicate;

$select->where(array(
    // ...
    new Predicate\PredicateSet(
        array(
            new Predicate\Like('content', '%'.$searchstring.'%'),
            new Predicate\Like('title', '%'.$searchstring.'%'),
        ),
        Predicate\PredicateSet::COMBINED_BY_OR
    ),
    // ...
)); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-29T23:26:32.383

或者你云使用：

```
$select->where
    ->like('content','%'.$searchstring.'%')
    ->or
    ->like('title','%'.$searchstring.'%'); 
```

# javascript - 取消选中单选按钮是错误的

> ID：13056825
> 
> 赞同：0
> 
> 时间：2012-10-24T20:03:31.967
> 
> 标签：javascript, jquery, forms, radio-button

看看这个小提琴：http: [//jsfiddle.net/5rmEe/](http://jsfiddle.net/5rmEe/)

目标是在用户单击单选按钮时取消选中它，如果它被选中，如果它没有被选中，则检查它

但随后似乎点击事件触发了两次，使得检查/取消检查非常错误......

我尝试了

```
e.stopPropagation();
e.preventDefault(); 
```

命令，但它们中的每一个都会导致不同的错误......

我将如何实现这一目标并相应地修复该代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T20:19:31.430

我同意其他所有人的观点，即复选框会更好。

然而，话虽如此，这里有一些可能对你有用的东西。首先，单选按钮上的选中属性将其标记为选中。因此，要删除检查，您必须删除该属性。但是，当单击单选按钮时，它想把属性放回去。

我的解决方案实际上更像是一个 hack。我正在添加另一个属性并将其用作标志来确定是删除还是添加选中的属性。高温高压

```
$('input[type=radio]').each(function(){
  var input = $(this);
  input.click(function(e){
      if(input.attr('cval')==='1'){
          input.attr('cval', '0');
          input.removeAttr('checked');
      }
      else{
          input.attr('cval', '1');
          input.attr('checked', 'checked');
      }
  });
});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T20:23:35.233

为什么不将复选框设置为看起来像单选按钮。这样你就可以两全其美了。您正在按预期使用复选框，而您的老板仍然没有线索；）

[http://ryanfait.com/resources/custom-checkboxes-and-radio-buttons/](http://ryanfait.com/resources/custom-checkboxes-and-radio-buttons/)

如果您开始搜索这个概念，那里有很多例子。你会想在这里做相反的事情，但例子是一样的。

[您可以将 html 单选按钮设置为看起来像复选框吗？](https://stackoverflow.com/questions/279421/can-you-style-an-html-radio-button-to-look-like-a-checkbox)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T20:12:20.673

您需要一个复选框 - 这就是它们的用途。乱搞用户对标准控件行为方式的期望是一个坏主意。

# struts2 - Struts2多选列表：如何在动作类中获取值

> ID：13056828
> 
> 赞同：1
> 
> 时间：2012-10-24T20:03:37.157
> 
> 标签：struts2, multi-select

我对 Struts2 很陌生，受到多选标签的影响。我已经搜索了很多地方，但未能得到解决方案。这是我的问题：

在 JSP 中，我使用了这样的 struts2 选择标签

```
<s:form action="AjaxSaveSelectedStatus">
   <s:select label="Select Status" name="masterStatusLists" id="masterStatusLists" 
      list="#{'1':'status1','2':'status2','3':'status3','4':'status4'}" 
      multiple="true" required="true"/>
   <input type="submit" value="Save"/>
</s:form> 
```

在struts.xml 映射

```
<action name="Ajax*" class="com.mypackage.actions.forms.Ajax{1}">
        <result name="redirect">${redirectUrl}</result>
    </action> 
```

在 Action 课上我用过这样

```
public class AjaxSaveSelectedStatus extends BaseAjaxActionWithSession {
ArrayList<MasterStatusList> masterStatusLists;

@Override
public String execute(){

    for (MasterStatusList masterStatusList : masterStatusLists) {
        System.out.println(masterStatusList.getStatusId());
    }
    return SUCCESS;
}
public ArrayList<MasterStatusList> getMasterStatusLists() {
    return masterStatusLists;
}

public void setMasterStatusLists(ArrayList<MasterStatusList> masterStatusLists) {
    this.masterStatusLists = masterStatusLists;
}
} 
```

这是 MasterStatusList Bean 类

```
public class MasterStatusList implements java.io.Serializable {
   private int statusId;
   private String statusName;
   public MasterStatusList() {}
   public int getStatusId() {return this.statusId;}
   public void setStatusId(int statusId) {this.statusId = statusId;}
   public String getStatusName() {return this.statusName;}
   public void setStatusName(String statusName) {this.statusName = statusName;}
} 
```

现在我想在客户端获取所选项目的列表以执行操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T05:27:57.037

The value submitted by a multi select tag will be a List(or array or string of csv) of string(in your case integer 1,2,3..). So declare the List of Integers in you action class

```
List<Integer> masterStatusLists; //and its getter/setter 
```

This must solve the issue

# javascript - 在升序和降序之间切换对列进行排序

> ID：13056830
> 
> 赞同：7
> 
> 时间：2012-10-24T20:03:48.950
> 
> 标签：javascript, jquery, sorting, html-table

假设我有一个包含字段的表

> `Rank`,`Id`和`Name`

单击 后`Rank`，表格将使用此代码按等级升序排序

```
$(function() {
    $("#rank").click(function() {
        var rows = $("#rank_table tbody tr").get();
        rows.sort(sortTable);
        $.each(rows, function(index, row) {
            $("#rank_table").children("tbody").append(row);
        });
    });
});

function sortTable(a, b) {
    var A = parseInt($(a).children('td').eq(0).text());
    var B = parseInt($(b).children('td').eq(0).text());
    if (A < B) return -1;
    if (A > B) return 1;
    return 0;
} 
```

Rank 和 Id 分别是具有 id`rank`和的整数`st_id`。所以，我想要实现的是，当我单击 Rank 字段一次时，表格会按升序排序，再次单击它会按降序对表格进行排序。

我想对字段`rank`和`Id`. 对于降序，我是否需要使用不同于升序这个升序函数的其他函数。

如何使用 jQuery 和 this 实现这一点`sort() function(not plugins)`？

这是html

```
<!Doctype html>
<html>
<head>
    <style>
        #thead {
            cursor: pointer;
            text-decoration: underline;
            text-align: center;
        }

        #tbody {
            text-align: center;
        }
    </style>
    <script src="libs/jquery-1.5.1.js" type="text/javascript"></script>
    <script src="table_sort.js" type="text/javascript"></script>
</head>

<body>
    <table id="rank_table">
        <thead id="thead">
            <tr>
                <th id="rank">Rank</th>
                <th id="st_id">Student_id</th>
                <th id="st_name">Name</th>
            </tr>
        </thead>
        <tbody id="tbody">
            <tr>
                <td>3</td>
                <td>2</td>
                <td>Ted</td>
            </tr>
            <tr>
                <td>2</td>
                <td>1</td>
                <td>John</td>
            </tr>
            <tr>
                <td>5</td>
                <td>4</td>
                <td>Neil</td>
            </tr>
            <tr>
                <td>1</td>
                <td>5</td>
                <td>Alex</td>
            </tr>
            <tr>
                <td>4</td>
                <td>3</td>
                <td>Nave</td>
            </tr>
        </tbody>
    </table>

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-24T21:09:07.703

我可能会将其重写为这样的内容：http: [//jsfiddle.net/gQNPt/1/](http://jsfiddle.net/gQNPt/1/)

```
$(".sortable").click(function(){
    var o = $(this).hasClass('asc') ? 'desc' : 'asc';
    $('.sortable').removeClass('asc').removeClass('desc');
    $(this).addClass(o);

    var colIndex = $(this).prevAll().length;
    var tbod = $(this).closest("table").find("tbody");
    var rows = tbod.find("tr");

    rows.sort(function(a,b){
        var A = $(a).find("td").eq(colIndex).text();
        var B = $(b).find("td").eq(colIndex).text();

        if (!isNaN(A)) A = Number(A);
        if (!isNaN(B)) B = Number(B);

        return o == 'asc' ? A > B : B > A;
    });

    $.each(rows, function(index, ele){
        tbod.append(ele);
    });
}); 
```

HTML

```
<table id="fruits">
    <thead>
        <tr>
            <th class="sortable asc">ID</th>
            <th class="sortable">Name</th>
            <th class="sortable">Rank</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>0</td>
            <td>Banana</td>
            <td>15</td>
        </tr>
        <tr>
            <td>1</td>
            <td>Pear</td>
            <td>3</td>
        </tr>
        <tr>
            <td>2</td>
            <td>Orange</td>
            <td>6</td>
        </tr>
        <tr>
            <td>3</td>
            <td>Apple</td>
            <td>14</td>
        </tr>
        <tr>
            <td>4</td>
            <td>Mango</td>
            <td>99</td>
        </tr>
    </tbody>
</table>​ 
```

然后，您可以通过将“可排序”类添加到列标题来控制哪些列是可排序的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T20:05:45.520

如果您当前的函数按升序排序，您只需要更改 if 语句即可使其降序？

```
if (A > B) return -1;
if (A < B) return 1; 
```

这可以按照您想要的方式工作：

```
$(function() {
    $("#rank").on('click', function() {
        var rows = $("#rank_table tbody tr").get();
        rows.sort(sortTable);
        $.each(rows, function(index, row) {
            $("#rank_table").children("tbody").append(row);
        });
        if (ascending) {
            ascending = false;
        } else {
            ascending = true;
        }
    });
});

var ascending = false;

function sortTable(a, b) {
    var A = parseInt($(a).children('td').eq(0).text(), 10);
    var B = parseInt($(b).children('td').eq(0).text(), 10);

    if (ascending) {
        if (A > B) return 1;
        if (A < B) return -1;
    } else {
        if (A > B) return -1;
        if (A < B) return 1;
    }
    return 0;

} 
```

# php - CakePHP 查询需要按 JOIN 列排序

> ID：13056832
> 
> 赞同：1
> 
> 时间：2012-10-24T20:03:59.310
> 
> 标签：php, cakephp, join, cakephp-model

我正在开发一个 CakePHP 项目，在查询结果顺序方面给我带来了一些问题。这里使用了三个表：Buildings（关于建筑物的所有信息）、Lists 和 ListBuildings（用于构建和列表的链接表）。我没有构建应用程序，不幸的是无法更改数据库结构。我想`$arrBuildings`按顺序列出建筑物`ListBuildings.created`（意味着将建筑物添加到列表中的那一刻），而不是`Building.name`现在看起来的顺序。

```
function getList($list_id) {   
// Get buildings in the list
$building_ids = $this->_getBuildingsForList($list_id);
$conditions = array(
        'conditions'=>array('Building.id'=>$building_ids),
        'contain' => array(
                'List'=>array('conditions' => array ('List.id'=>$list_id))));

// Get the list information
$this->Building->List->recursive=-1;
$List=$this->Building->List->read(null,$list_id);

$options = array(
    'conditions' => array('Building.id'=>$building_ids),
    'contain' => array(
        'List'=>array('conditions' => array ('List.id'=>$list_id)),
        'Sqft'
    ),
);

$this->Building->myId=$this->getUserId();
$arrBuildings = $this->Building->find('all', $options);
print_r($arrBuildings);
} 
```

由于我使用的是 CakePHP，MVC 的模型部分似乎设置正确。使用上面的代码，`print_r`显示以下数组：

```
Array ( [0] => Array ( 
[Building] => Array ( 
    [id] => 105 
    [name] => Stark Tower 
    [address] => 123 Main St. 
) 
[Sqft] => Array ( 
    [0] => Array ( 
        [id] => 51 
        [list_id] => 113 
        [building_id] => 105 
        [sq_feet] => 2200.000 
    ) 
) 
[List] => Array ( 
    [0] => Array ( 
        [id] => 113 
        [title] => Awesome buildings 
        [ListBuilding] => Array ( 
            [id] => 95 
            [list_id] => 113 
            [building_id] => 105 
            [created] => 2012-10-18 09:40:00 )))) 
```

**重新声明：我如何对查询（和结果数组）进行排序** `ListBuildings.Created`**？** 我试图匿名化代码，并且可能搞砸了一些东西，所以如果有什么没有意义，请告诉我:) 提前感谢您的任何反馈！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T15:12:54.323

我发现当你在连接表上有额外的数据时，最好只是动态地做一些临时绑定，使其成为关联的 hasMany 和 belongsTo。所以Building有很多ListBuild和ListBuild都属于List。然后，您可以使用 contains 来过滤您需要的数据，还可以使用 contains 中的顺序来提供所需的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T15:30:13.250

再次查看您的功能后，我认为最好从头开始。

将您的模型关系更改为：

`Building belongsTo ListBuilding`, `ListBuilding hasMany Building`, `List belongsTo ListBuilding`, 最后`ListBuilding hasMany List`。

重写你的函数

```
 function getList($list_id) {   
    $options = array(
        'conditions' => array(
            'ListBuilding.list_id' => $list_id
        ),
        'contain' => array(
            'Sqft'
        ),
        'order' => 'ListBuilding.created',
    );

    $arrBuildings = $this->Building->find('all', $options);
    print_r($arrBuildings);
    } 
```

它真的不必比这更复杂。

# jquery - ASP.NET 跨域 Web 服务和会话状态

> ID：13056835
> 
> 赞同：0
> 
> 时间：2012-10-24T20:04:07.110
> 
> 标签：jquery, asp.net, ajax, web-services, cross-domain

这是一个非常重要的问题。我想使用 ASP.NET 实现一个共享页面，我可以从 Web 服务下载它以包含在任何域上的 ASP、ASP.NET 或 PHP 页面中。共享页面将托管在不同域的单独服务器上，因此我无权访问典型的 ASP.NET 页面方法。

此外，我需要能够使用 jQuery 向 Web 服务发送 AJAX GET 和 POST 请求，并且能够保留会话状态。

在 ASP.NET 中可以实现这样的实现吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T20:29:46.470

不要期望 cookie 传输域。您在这方面尝试使用 cookie 进行的任何操作都可能会被网络浏览器中的安全性阻止。

此外，尝试跨域 AJAX 请求有许多注意事项。请参阅[AJAX - 引入跨域请求 (XDR)](http://msdn.microsoft.com/en-us/library/dd573303%28v=VS.85%29.aspx)、[在 Internet Explorer 8 和更新版本中使用 jQuery 获取跨域 JSON](http://graphicmaniacs.com/note/getting-a-cross-domain-json-with-jquery-in-internet-explorer-8-and-later/)和[Ticket #8283 对 XDomainRequest 的内置支持](http://bugs.jquery.com/ticket/8283)。

您可能需要考虑以下替代方案之一：

*   将您的 Web 服务放在同一个站点上。
*   让站点代表用户对 Web 服务进行查询。

# javascript - Phonegap 写入 SQLite 表

> ID：13056838
> 
> 赞同：0
> 
> 时间：2012-10-24T20:04:33.807
> 
> 标签：javascript, sqlite, cordova

真的很抱歉不得不在论坛上提问，但我整天都在努力解决这个问题。

我有一个 phonegap 应用程序，它创建一个 SQLite 数据库，创建一个表，从 tinternet 获取 JSON 提要，然后将该数据输入表中。

一切似乎都很好，直到应该填充数据库的位置。“insertProperty”函数只是不运行。任何帮助都会非常棒！

以下是相关的代码片段。

```
x$(document).on('deviceready', function () {

    // CREATE DATABASE
var localDatabase = window.sqlitePlugin.openDatabase("localDB", "1.0", "Local DB", 5000000);
console.log("Database Loaded");
// CREATE properties TABLE
var query = "CREATE TABLE IF NOT EXISTS properties (propertyid INT, propertytype text, address text,  postcode text, clientid INT);"
db.transaction(function (trxn) {
    trxn.executeSql(query,  [],  callback,
    function (transaction, error) { //error callback
        console.log(error);
    });
});
}

function insertProperty(db, data) {
var query = "INSERT INTO properties (propertyid, propertytype, address, postcode, clientid) VALUES (?,?,?,?,?);"
db.transaction(function (trxn) {
    trxn.executeSql(query,[data.propertyid, data.propertytype, data.address, data.postcode, data.clientid],
    function (transaction, resultSet) {
        console.log('success');
    },
    function (transaction, error) {
        console.log(error);
    }
    );
});
}

x$().xhr("http://myurl.com", { // GET JSON FEED

    async: true,callback: function () { try {
        var dataArray = JSON.parse(this.responseText); // PARSE JSON FEED
        console.log("Loading live data");
        dataArray.forEach(function (thedata) { // LOOP DATA
            console.log(thedata.address);
            insertProperty(localDatabase, thedata);
        });
         console.log("Rendering Live Data");
        renderDataset(dataArray)
    } catch (e) { // failed to retrieve data
            console.log("There was a problem, Loading local data");
            getStoredProperties(localDatabase, function (offlineData) {
                renderDataset(offlineData);
            });
         }
    }
}); 
```

该脚本运行至“console.log(thedata.address);” 并向我显示了一个地址，但是一旦它尝试运行 insertProperty 函数，它就会退出并直接进入“console.log（“出现问题，正在加载本地数据”）；” 少量。

再次感谢您提供的任何帮助。担

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T20:34:58.777

显然，您在`localDatabase`“deviceready”函数的范围内定义了局部变量，因此当您在 xhr 回调函数中循环数据时，它无法访问。

# java - Eclipse 和 Mylyn：如何在资源管理器中禁用灰色文件？

> ID：13056844
> 
> 赞同：3
> 
> 时间：2012-10-24T20:04:47.720
> 
> 标签：java, eclipse, mylyn

我最近发现了 Mylyn：这是一个了不起的 Eclipse 功能！非常便利。
但是，在处理任务时，有没有办法在资源管理器中禁用灰色文件？

我与 Mylyn 的典型 Eclipse 编码会话如下所示：

![包浏览器](../Images/b770e44604c6e7e497764feca92c3e2b.png)

由于对比度较低，所有这些灰色使文件名难以阅读。当我必须在资源管理器中找到一个新文件时（这种情况经常发生），我必须睁大眼睛才能阅读名称......我受不了！

有没有办法禁用这种灰色？我在 Eclipse 选项和 Google 上进行了搜索，但无济于事。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T18:13:11.497

灰色表示资源对给定任务的上下文不太感兴趣。您可以从工作台首选项/常规/Appearange/标签装饰器/任务上下文装饰器中禁用此装饰器。

# vba - 将目录 (TOC) 转换为普通文本

> ID：13056845
> 
> 赞同：0
> 
> 时间：2012-10-24T20:04:56.520
> 
> 标签：vba, ms-word, tableofcontents

在 MS Word 中，可以使用 Ctrl-Shift-F9 手动将目录 (TOC) 转换为普通文本。

有没有办法以编程方式将 TOC 转换为普通文本？

Word VBA 具有 TableOfContents 类，但该类似乎没有提供任何可用于此类转换的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T20:47:13.703

好吧，这并不难。这是解决方案：

```
For Each nextTOC In ActiveDocument.TablesOfContents
    nextTOC.Range.Fields.Unlink
Next 
```

在上面的代码片段中，代码遍历活动文档中的所有目录，获取每个 TOC 的 Range 的 Fields 属性并对其调用 Unlink。

# php - PHP：如何将带有 BOM 的 UTF-8 文本/纯文本内容用于下载？

> ID：13056849
> 
> 赞同：7
> 
> 时间：2012-10-24T20:05:20.473
> 
> 标签：php, utf-8, byte-order-mark

我需要提供一个纯文本文件供下载。文本文件需要进行 UTF-8 编码，并且需要存在 BOM。我将我的 php 文件保存为没有 BOM 的 UTF-8 并发送以下标头：

```
header('HTTP/1.1 200 OK');
header('Content-Type: text/plain; charset=utf-8');
header('Content-Disposition: attachment; filename="test.txt"'); 
```

我在没有 BOM 的情况下保存脚本，因为它会干扰发送标头。所以我尝试通过以下方式手动放置 BOM：

```
echo chr(239).chr(187).chr(191); 
```

然后我发出了我的文字。如果没有手动 BOM，像 Notepad++ 这样的编辑器将识别文件为 ANSI 编码，使用假定的手动 BOM，它将被识别为 UTF-8，但将包含以下字符：

```
ï»¿ 
```

在开始时。所以我假设通过启发式方法检测到它是 UTF-8 并且我的手动 BOM 是错误的。

我该怎么做？

**编辑：**按要求提供十六进制内容。我只是将文本设为“某些文本”，然后得到：

```
C3 AF C2 BB C2 BF 53 4F 4D 45 20 54 45 58 54 
```

将“某些文本”保存为带有 BOM 的 UTF-8 会产生：

```
EF BB BF 53 4F 4D 45 20 54 45 58 54 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T20:57:59.410

您看到的是将 BOM 的各个字节解释为 IOS-8859-1，然后将结果编码为 UTF-8 的结果。至于为什么会发生这种情况，我怀疑这个`chr()`函数 - 尝试使用 char 文字，即

```
echo "\xEF\xBB\xBF"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T21:25:33.967

检查您的 mbstring 扩展的设置（可以设置为自动编码输出）

```
; This directive specifies the regex pattern of content types for which mb_output_handler()
; is activated.
; Default: mbstring.http_output_conv_mimetype=^(text/|application/xhtml\+xml)
; mbstring.http_output_conv_mimetype= 
```

* * *

`"\xEF\xBB\xBF"`&都`chr(239).chr(187).chr(191)`可以用来生成BOM，你可以`file_put_contents()`自己试试。

# ios - Brightcove iOS SDK 中的广告

> ID：13056850
> 
> 赞同：2
> 
> 时间：2012-10-24T20:05:23.430
> 
> 标签：ios, brightcove

有谁知道如何在新的 Brightcove iOS SDK 的 BCPlayerView / BCVideo / BCPlayerItem 中实现对广告的调用。在哪里可以指定广告服务器？这需要在 Brightcove Studio 中完成吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T18:23:32.557

3.0 Brightcove iOS 播放器目前没有内置的广告集成。通过 Brightcove 配置的广告策略目前仅适用于基于 Web 的播放器，因此您必须自己做一些工作才能将该广告配置集成到 iOS 应用程序中。

为此，您需要从广告合作伙伴处获取 iOS 库，并从 Studio 获取广告配置。然后，您可以在希望广告展示的位置设置提示点：

```
// create a "before" cue point to play a pre-roll advertisement
BCCuePoint *cuePoint = [BCCuePoint 
                        cuePointWithPosition:@"before" 
                        type:@"ad"
                        properties:@{ @"adId": @"some-ad-configuration" }];
[emitter emit:BCEventSetCuePoint withDetails:@{ @"cuePoint": cuePoint }]; 
```

在显示广告之前，您会聆听该提示点：

```
// Listen for a cue point to trigger an ad
[player.playbackEmitter on:BCEventCuePoint callBlock:^(BCEvent *event) {
    // Grab the cue point from the event
    BCCuePoint *cuePoint = [event.details objectForKey:@"cuePoint"];
    if ([cuePoint.type isEqualToString:@"ad"]) {
        [player pause];
        // Here's where you would call your native ad library to play an ad
        // This code will vary a lot depending on what ad library you're using
        [adLibrary playAd:cuePoint.properties[@"adId"]];
    }
}]; 
```

预构建的 IMA 和 FreeWheel 插件正在开发中，因此值得询问您是否正在使用这些提供商中的任何一个。

# ember.js - 如何实现多个元素的列表，其中一个元素可以通过点击展开？（动态插座名称？）

> ID：13056851
> 
> 赞同：2
> 
> 时间：2012-10-24T20:05:29.777
> 
> 标签：ember.js

我想实现以下概念。你能给我一些我应该看看的提示或关键字吗？

这些是我的要求：

*   我想渲染一个元素列表。
*   每个元素都应该包含一个按钮。单击按钮应显示与单击的元素相关的其他详细信息（我不想使用 jquery 进行简单的隐藏和显示，因为此单击会触发对我的后端服务器的额外调用）。

我的猜测是它可以像这样工作：

*   实现一个 ArrayController 来控制元素列表。
*   ArrayController 应该再次为每个元素包含一个控制器。
*   单击元素时，元素视图的出口应连接到控制器以获取更多详细信息。

这些是我对这种方法的问题：

1.  这是一个可行的方法吗？
2.  如何实例化多个控制器并在模板中将元素传递给它？
3.  如何访问元素的控制器，以便我可以为详细视图连接适当的控制器？

抱歉，我无法在描述中包含更多 Ember 术语。我刚刚完成了第一个教程，现在我需要有人给我正确的方向。谢谢！:-)

**- - -更新 - - -**

我在周末自己解决了这个问题，并提出了以下解决方案。 [http://jsfiddle.net/mavilein/SNte7/4/](http://jsfiddle.net/mavilein/SNte7/4/)

我认为 pangratz 提出的解决方案（第一个答案）很好，如果一个人有一个像他使用过的那样简单的模型。当我看到他的回答时，我意识到我没有足够详细地描述我的要求。其实我的要求是这样的：

列表的初始状态

1.  第一个元素
2.  第二元素
3.  第三要素

单击例如项目 3 后，它应该显示它的关联项目：

1.  第一个元素
2.  第二元素
3.  第三要素
    *   第三个元素的关联项目 1
    *   第三个元素的关联项目 2

因此，我希望有一个单独的控制器来控制列表中我的元素的关联项目。在我看来，网点是正确的选择。

实际上，我**必须修补 ember 框架**以实现所需的行为。目前我将此功能称为“动态插座名称”。目前可以在 HandleBars 模板中指定插座名称，但不能使用对象的属性动态生成这些名称。我修补了插座助手以评估 String 参数是否表示对象的属性：

```
Ember.Handlebars.registerHelper('outlet', function(property, options) {

  if(arguments.length === 3){      
      var optionsTemp = arguments[arguments.length - 1],
      context = arguments[0];
      var temp = Ember.Handlebars.get(this, context, optionsTemp);
      if(temp)
          property = temp;
      options = optionsTemp;
  }else if (property && property.data && property.data.isRenderData) {
     options = property;
     property = 'view';
  } 

  options.hash.currentViewBinding = "controller." + property;

  return Ember.Handlebars.helpers.view.call(this, Ember.ContainerView, options);
}); 
```

这样我就可以使用对象属性作为插座名称的值。

```
<script type="text/x-handlebars" data-template-name="items" >
    {{#each item in controller}}
        {{item.description}}
        <button {{action showAssociatedItems item}}>Show Associated Items</button>
        {{outlet item.id asd}}            
    {{/each}}
</script> 
```

在这里查看我的完整工作示例：http: [//jsfiddle.net/mavilein/SNte7/4/](http://jsfiddle.net/mavilein/SNte7/4/)

**我的问题：您如何看待这个解决方案？我可以在不修补框架的情况下实现它吗？正如我所说，第一个提出的解决方案适用于简单模型。但我的感觉是关联的项目应该实现为模型，因此应该由 Ember 控制器控制。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T12:25:10.390

我会使用一个`ArrayController`包含所有应该显示的元素。设置——无论是否显示对象的细节——在我看来应该由视图处理，所以我不会为每个项目创建一个控制器实例。显示单个项目的视图应保留书签，无论是否显示详细信息。因此，您可以按照以下方式做一些事情，请参阅[http://jsfiddle.net/pangratz666/ASHFa/](http://jsfiddle.net/pangratz666/ASHFa/)：

**车把**：

```
<script type="text/x-handlebars" data-template-name="items" >
    {{#each item in controller itemViewClass="App.ItemView"}}
        {{item.description}} <button {{action toggleDetail}}>{{view.toggleDetailText}}</button>
        {{#if view.showDetail}}
            <img {{bindAttr src="item.img"}}>
        {{/if}}        
    {{/each}}
</script>​ 
```

**JavaScript**：

```
App = Ember.Application.create({});

App.ItemsView = Ember.View.extend({
    templateName: 'items'
});

App.ItemView = Ember.View.extend({
    toggleDetailText: function() {
        return this.get('showDetail') ? 'hide' : 'show';
    }.property('showDetail'),

    toggleDetail: function() {
        this.toggleProperty('showDetail');
    }
});

App.itemsController = Ember.ArrayController.create({
    content: [{
        description: 'first item',
        img: 'http://25.media.tumblr.com/tumblr_ll3y1pZDVJ1qb08qmo1_250.jpg'
    }, {
        description: 'second item',
        img: 'http://24.media.tumblr.com/tumblr_lk7u170Ztt1qb33vho1_250.jpg'
    }, {
        description: 'third item',
        img: 'http://25.media.tumblr.com/tumblr_lj5367UKg11qzgqodo1_250.jpg'
    }]
});

App.ItemsView.create({
    controllerBinding: 'App.itemsController'
}).append(); 
```

​</p>

# yii - yiiframework 多个可选参数 RESTful 方式

> ID：13056856
> 
> 赞同：0
> 
> 时间：2012-10-24T20:05:49.710
> 
> 标签：yii, restful-url

我有一个查询界面，允许查询 4 ​​个可能的字段：姓名、出生年份、星座和出生状态。用户可以为这些字段中的任何一个字段提供值。我正在使用 AngularJS（此处为非物质）和 YiiFramework（物质）。

我已经看到了与此类似的问题的答案，但在大多数情况下，人们最终使用查询字符串参数。我可以在我的 urlManager 中解释这一点，但更愿意以“正确”的 RESTful 方式执行此操作。我已经看到了显示如何执行此操作的示例：

/myservice/index.php/names/jones?birthyears=&signs=leo&birthstates=maine - 表示他们没有提供出生年份

我的想法是完全通过跳过空白值的路径来做到这一点。这是一个合理的方法：

/myservice/index.php/api/modelname/names/jones/birthyears//signs/leo/birthstates/maine

如果是这样，那么我正在努力使用 urlManager 模式

array('api/find', 'pattern'=>'api/<model:\w+>/names/<names:(|\w+)>/birthyears/<birthyears:(|\d{4})>/标志/<标志:(|\w+)>/birthstates/<出生状态:(|\w+)>', 'verb'=>'GET')

当我通过上述路径时，我没有得到预期的分辨率。我相信有更好的方法来处理这个

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T20:52:02.450

我在这里测试了它并且它有效。

您如何设置 urlManager 的参数？

urlFormat 属性设置为“路径”？

```
'urlManager' => array(
    'urlFormat' => 'path', // You have to leave it like that.
 //   'urlSuffix' => '.html',
    'showScriptName' => false,
    'caseSensitive' => true,
    'useStrictParsing' => true,
    'rules' => array(
       array('api/find', 'pattern'=>'<model:\w+>/names/<names:(|\w+)>/birthyears/<birthyears:(|\d{4})>/signs/<signs:(|\w+)>/birthstates/<birthstates:(|\w+)>', 'verb'=>'GET'),
       // Other rules here
    ),
), 
```

# opencv - 使用 OpenCV 在整个图像中搜索 nxn 像素

> ID：13056857
> 
> 赞同：0
> 
> 时间：2012-10-24T20:05:53.697
> 
> 标签：opencv

如标题中所述，我试图找到迭代灰度图像并创建`nxn`内核以扫描像素值的最佳方法。主要目标是创建一个最小/最大过滤器，并将其扩展到自定义中值过滤器。

我已经为 3x3 创建了一个硬编码的解决方案，但是有很多代码，将其扩展到 5x5 将是一个痛苦的过程。

我想知道 OpenCV 是否有任何可以管理此类任务的功能？

minMaxLoc 可以[以](http://docs.opencv.org/modules/core/doc/operations_on_arrays.html?highlight=minmaxidx#minmaxloc)某种方式与矩形掩码一起使用吗？

编辑：我基本上想要的是以下

1.  将一个矩形从 复制`image`到`subImage`。
2.  确定/分析像素的最小值或最大值`subImage`。

编辑（测试）：

```
 for(int y = 1; y < image.rows - 1; y++) {
        for(int x = 1; x < image.cols - 1; x++) {
            if(int(image.at<uchar>(x,y)) == 0) {
                double maxValue = 0;
                Rect roi(y-1,x-1,3,3);
                Mat image_roi = image(roi);
                minMaxLoc(image_roi, NULL, &maxValue, NULL, NULL);
                if (maxValue > 0) {
                    image_new.at<uchar>(x,y) = uchar(maxValue);
                }
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T21:07:46.643

在 C++ API 中定义一个感兴趣的矩形区域非常容易。

```
cv::Mat subImage = image(cv::Rect(upper_left_x,upper_left_y,ROI_width,ROI_height)); 
```

应该允许您根据`subImage`需要进行处理。

如果您需要的是中值滤波器，OpenCV 也具有该功能：

```
cv::medianBlur(image, outputImage, n); 
```

对于 nxn 过滤器。可以在上面我的第一条评论中的链接中找到有关此功能的更多文档。

# python - Python解析IP地址和协议的日志文件

> ID：13056858
> 
> 赞同：6
> 
> 时间：2012-10-24T20:05:53.497
> 
> 标签：python, parsing, loops, hash

这是我在 stackoverflow 上提出的第一个问题，我真的很期待成为这个社区的一员。我是编程新手，python 是很多人最推荐的第一个程序。

**反正**。我有一个如下所示的日志文件：

```
"No.","Time","Source","Destination","Protocol","Info"
"1","0.000000","120.107.103.180","172.16.112.50","TELNET","Telnet Data ..." 
"2","0.000426","172.16.112.50","172.16.113.168","TELNET","Telnet Data ..." 
"3","0.019849","172.16.113.168","172.16.112.50","TCP","21582 > telnet [ACK]" 
"4","0.530125","172.16.113.168","172.16.112.50","TELNET","Telnet Data ..." 
"5","0.530634","172.16.112.50","172.16.113.168","TELNET","Telnet Data ..." 
```

我想使用 Python 解析日志文件，使其看起来像这样：

> **从 IP 135.13.216.191 协议计数：（IMF 1）（SMTP 38）（TCP 24）（总数：63）**

我真的很想得到一些帮助来解决这个问题，我应该使用列表并循环遍历它还是字典/元组？

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-24T20:12:46.313

[`csv`您可以使用模块](http://docs.python.org/library/csv.html)解析文件：

```
import csv

with open('logfile.txt') as logfile:
     for row in csv.reader(logfile):
         no, time, source, dest, protocol, info = row
         # do stuff with these 
```

我不太清楚你在问什么，但我认为你想要：

```
import csv
from collections import defaultdict

# A dictionary whose values are by default (a
# dictionary whose values are by default 0)
bySource = defaultdict(lambda: defaultdict(lambda: 0))

with open('logfile.txt') as logfile:
     for row in csv.DictReader(logfile):
         bySource[row["Source"]][row["Protocol"]] += 1

for source, protocols in bySource.iteritems():
    protocols['Total'] = sum(protocols.values())

    print "From IP %s Protocol Count: %s" % (
        source,
        ' '.join("(%s: %d)" % item for item in protocols.iteritems())
    ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T20:13:44.820

我首先将文件读入列表：

```
contents = []
with open("file_path") as f:
    contents = f.readlines() 
```

然后，您可以将每一行拆分为它自己的列表：

```
ips = [l[1:-1].split('","') for l in contents] 
```

然后我们可以将它们映射到一个字典中：

```
sourceIps = {}
for ip in ips:
    try:
       sourceIps[ip[2]].append(ip)
    except:
       sourceIps[ip[2]] = [ip] 
```

最后打印出结果：

```
for ip, stuff in sourceIps.iteritems():
   print "From {0} ... ".format(ip, ...) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T20:33:01.310

首先，您需要阅读文本文件

```
# Open the file
file = open('log_file.csv')
# readlines() will return the data as a list of strings, one for each line
log_data = file.readlines()
# close the log file
file.close() 
```

设置一个字典来保存你的结果

```
results = {} 
```

现在遍历您的数据，一次一行，并将协议记录在字典中

```
for entry in log_data:
    entry_data = entry.split(',')
    # We are going to have a separate entry for each source ip
    # If we haven't already seen this ip, we need to make an entry for it
    if entry_data[2] not in results:
        results[entry_data[2]] = {'total':0}
    # Now check to see if we've seen the protocol for this ip before
    # If we haven't, add a new entry set to 0
    if entry_data[4] not in results[entry_data[2]]:
         results[entry_data[2]][entry_data[4]] = 0
    # Now we increment the count for this protocol
    results[entry_data[2]][entry_data[4]] += 1
    # And we increment the total count
    results[entry_data[2]]['total'] += 1 
```

计算完所有内容后，只需迭代计数并打印结果

```
for ip in results:
    # Here we're printing a string with placeholders. the {0}, {1} and {2} will be filled
    # in by the call to format
    print "from: IP {0} Protocol Count: {1})".format(
        ip,
        # And finally create the value for the protocol counts with another format call
        # The square braces with the for statement inside create a list with one entry
        # for each entry, in this case, one entry for each protocol
        # We use ' '.join to join each of the counts with a string
        ' '.join(["({0}: {1})".format(protocol, results[ip][protocol] for protocol in results[ip])])) 
```

# c# - 获取域凭证

> ID：13056863
> 
> 赞同：0
> 
> 时间：2012-10-24T20:06:24.240
> 
> 标签：c#, asp.net, .net-4.0, ntlm

> **可能重复：**
> [来自 C# 的 Windows 模拟](https://stackoverflow.com/questions/559719/windows-impersonation-from-c-sharp)
> [如何获得用户身份？](https://stackoverflow.com/questions/12410953/how-do-you-get-a-user-identity)

我有一个从 Intranet 系统中提取数据并将其显示给员工的应用程序。我现在遇到的问题是一切都在我的凭据下运行，因此无法跟踪谁进行了更改等。

如何从访问脚本的人那里获取域凭据？它的 ASP.Net 与 C# (.Net 4.0)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T20:11:03.823

您正在寻找[冒充当前用户的身份](http://support.microsoft.com/kb/306158#3) 。请参见示例 #1 或 #3。

# javascript - Dojo Ellipsis 函数延迟错误？

> ID：13056865
> 
> 赞同：1
> 
> 时间：2012-10-24T20:07:00.747
> 
> 标签：javascript, xmlhttprequest, dojo, deferred

我对 JavaScript + dojo 中的一段代码有疑问。我正在制作一个给定高度和字符串的小部件，如果字符串溢出，小部件会在末尾显示带有省略号的字符串。有两种使用这个小部件的方法，你可以给它提供实际的字符串或者给它一个文本文件的 URL。

问题是，如果您将实际字符串提供给小部件，它会失败，但如果您给它提供 URL，它会完美运行。这是代码：

```
define(["dojo/_base/declare","dijit/_WidgetBase", "dijit/_TemplatedMixin", "dojo/text!./template/template.html", "dojo/_base/xhr", "dojo/dom-style", "dojo/_base/lang"],

function(declare, WidgetBase, TemplatedMixin, template, xhr, domStyle, lang){

 return declare([WidgetBase, TemplatedMixin], {

        templateString: template,

        textSrc: "",

        content: "",

        height: 100,

        ellipsis: "...",

        endPoint: "Read more...",

        postCreate: function(){
            this.inherited(arguments);

        },

        _setHeightAttr: function(av) {
            this._set("height", av);
            domStyle.set(this.domNode, "height", this.height +"px");
        },

        _setContentAttr: function(av) {
            this._set("content", av);
            if(this.content!=""){
            this._addText(this.content);
            }
        },

        _setTextSrcAttr: function(av) {

            this._set("textSrc", av);
            if(this.textSrc!=""){
                var articleText = xhr.get({
                    url: this.textSrc,
                    handleAs: "text"
                });
                var domNode = this;
                articleText.then( function(text){
                    domNode._addText(text);
                });
            }
        },

        _addText: function(text){
            var index = 0;

            while( this.measureNode.scrollHeight < this.height && index < text.length )
            {       
                this.containerNode.innerHTML += text.charAt(index);
                index++;
            }

            if(index < text.length){
                this.containerNode.innerHTML = text.substring(0,index-1);
            }
            else{
                this.ellipsisNode.innerHTML = "";
                this.endPointNode.innerHTML = "";
            }
        }   

    });
}) 
```

所以本质上这个小部件的工作原理是，如果我调用 content 而不是`textSrc`，则 content 中的字符串被发送到`addText()`以显示它。否则，xhr 会读取 的 URL 并将 URL 中`textSrc`的字符串发送到`addText()`. `addText()`从字符串中添加一个字符，直到`measureNode`高度超过所需高度（`containerNode`在 measureNode 中）或没有剩余字符。最后会有一个省略号和“阅读更多”锚点的空间。现在的问题是使用内容永远不会起作用，这里有一些“症状”

1.  即使有溢出也会显示整个字符串
2.  原因是 this.measureNode.scrollHeight 始终为 0。这很奇怪，因为当我将它与`textSrc`.

我只为 textSrc 和 content 提供了一个字符串，所以类似于`this._addText("blah blah blah blah ...")`in`_setContentAttr`和`domNode._addtext("etc")`in `textSrc`，结果是一样的。我还替换了当我使用`textSrc`内容调用这个小部件时的实例，反之亦然，只有 textSrc 成功。这意味着这不是 CSS 问题。我的猜测是它与 deferred 有关，因为 xhr 推迟了`textSrc` `addText`命令的执行，而 content 没有。谁能向我解释发生了什么以及如何解决这个问题？

编辑：所以我认为我将问题隔离为小部件`offsetHeight`中`clientHeight`domNode 的 , 未激活，因为可能尚未呈现 html。推迟 URL 是可行的，因为到那时，呈现已经完成。但是我仍然找不到合理的解决方案。该`postCreate`事件由于某种原因不起作用。有人知道解决方法吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T18:00:06.290

好吧，我想通了。因此，正如我怀疑`postCreate`并`_set(something)Attr`在您的小部件的变量创建过程中发生的那样。此小部件的容器使用`placeAt`命令将小部件放入其中。然而`_addText(...)`，在被调用之前被调用，因此当它甚至不存在于页面上时，`placeAt`小部件正在计算。`clientHeight`我所要做的就是`_addText(...)`在小部件的容器`placeAt` 调用之后移动调用，一切正常。

# android - 如何将 ArrayAdapter 用于 Horizo ntalListView

> ID：13056866
> 
> 赞同：0
> 
> 时间：2012-10-24T20:07:00.863
> 
> 标签：android

我目前正在使用 Horizo​​ntalListView，我使用 addView 方法向其中添加项目。有没有办法以与 ListView 相同的方式使用 ArrayAdapter 填充 Horizo​​ntalListView，它始终是垂直的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T20:19:05.553

我假设您的意思是您使用的是 Horizo​​ntalScrollView，因为没有 Horizo​​ntalListView 这样的东西。如果你想实现这一点，你最好的办法是自己创建那种类型的 ListView，即。通过子类化`AbsListView`or `AdapterView`。或者你可以只使用别人的代码，比如这个 Horizo​​ntal [ListView](http://www.dev-smart.com/archives/34) :)

# c# - 如何从 BackgroundWorker 访问 WebBrowser.Navigate()？

> ID：13056868
> 
> 赞同：4
> 
> 时间：2012-10-24T20:07:05.707
> 
> 标签：c#, winforms, webbrowser-control, backgroundworker

我选择为`BackgroundWorker`我目前正在开发的应用程序使用 a 的唯一原因是通过 a 将冗长耗时的浏览`WebBrowser`从 UI 线程中移开。

但不是`WebBrowser.Navigate()`访问 UI 吗？

换句话说，我经历了所有这些努力，只是落在了同一个地方（或者更糟！因为我不知道非 UI 线程在访问 UI 控件时会产生什么副作用）。

我很确定我不是第一个想要实现这样的东西的人，所以我的问题是：解决这个问题的可接受的方法是什么？即`WebBrowser.Navigate()`从`BackgroundWorker`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T07:16:50.827

`Navigate()`不是阻塞调用（参见[MSDN 文档](http://msdn.microsoft.com/en-us/library/system.windows.controls.webbrowser.navigate.aspx)中的第一行），但它确实更新了 UI，因此需要从 UI 线程调用。

你有几个选择：

1.  `Navigate()`通过调用将来自 BackgroundWorker 的调用编组到UI`Invoke`线程
2.  不要使用 BackgroundWorker - 只需`Navigate()`从您的 UI 调用（例如按钮单击事件处理程序）并监听 WebBrowser DocumentCompleted 事件。

有关 1 的示例 - 请参阅[https://stackoverflow.com/a/1862639/517244](https://stackoverflow.com/a/1862639/517244)

这是 2 的代码示例：

```
public partial class MainForm : Form
{
    public MainForm()
    {
        InitializeComponent();
    }

    private void _goButton_Click(object sender, EventArgs e)
    {
        _webBrowser.Navigate("http://google.com/");
        // Non-blocking call - method will return immediately
        // and page will load in background
    }

    private void _webBrowser_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
    {
        // Navigation complete, we can now process the document
        string html = _webBrowser.Document.Body.InnerHtml;
        // If the processing is time-consuming, then you could spin
        // off a BackgroundWorker here
    }
} 
```

# javascript - 显示来自下划线模板中链接的图像（尤其是来自 Dropbox 图像链接）

> ID：13056872
> 
> 赞同：0
> 
> 时间：2012-10-24T20:07:28.513
> 
> 标签：javascript, jquery, jquery-mobile, backbone.js, underscore.js

如何将图像链接插入下划线模板，以便显示图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T00:48:27.380

```
script type="text/template" class="imageViewTemplate">
      <img src=<%=imageUrl%> />
</script> 
```

然后，您必须解释将 url 传递给已编译模板的模板。例如，如果您正在使用主干，您将在主干视图渲染功能中执行如下操作。

```
render(){
      var compiledTemplate = _.template($("#imageViewTemplate").text()));
      var interpretedImageTemplate = compiledTemplate({url: "url to image service"});
      $(this.el).append( interpretedImageTemplate );
} 
```

这只是为了展示一个肮脏的例子，我们如何插入图片链接。最好有一个抽象类，它接受模板和模型，然后可以重用。

# c++ - 如何使用 ifstream 打开一个 .tab 文件

> ID：13056885
> 
> 赞同：0
> 
> 时间：2012-10-24T20:08:22.360
> 
> 标签：c++, ifstream

我确实尝试搜索但无济于事。我有可以打开我告诉它的输入文件的工作代码。它仅适用于 .txt 文件。我需要它能够打开并最终显示一个 .tab 文件。我错过了什么？

```
#include <iostream>
#include <fstream>
#include "Lexer.h"

using namespace std;

int main() 
{
    string fname, line;
    ifstream ifs; // input file stream
    int i;

    Token tok; Lexer lexer;
    cout << "Enter a file to open" << endl;
    while (getline(cin, fname)) // Ctrl-Z/D to quit!
    { 
        ifs.open(fname.c_str(), ios::binary);
        if (ifs.fail()) 
        {
            cerr << "ERROR: Failed to open file " << fname << endl;
            ifs.clear();
        } 
        else 
        {
            while (getline(ifs, line)) 
            {
                cout << line << endl;
            }
            ifs.close();
        }
    }   
    return 0;
} 
```

# c# - 如何从字符串数组中删除未知格式的字符串？

> ID：13056892
> 
> 赞同：-4
> 
> 时间：2012-10-24T20:08:51.657
> 
> 标签：c#, string, special-characters, stringcollection

我正在尝试从字符串集合中删除具有无法识别字符的字符串。实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T20:12:04.683

由于 Array（假设`string[]`）在删除项目时没有重新调整大小，因此无论如何您都需要创建新的。因此，基本的 LINQ 过滤`ToArray()`将为您提供新数组。

```
myArray = myArray.Where(s => !ContainsSpecialCharacters(s)).ToArray(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T20:13:48.443

要删除包含您不认识的任何字符的字符串：（例如：如果您想接受小写字母，则“foo@bar”将被拒绝”）

1.  创建一个正则表达式，它定义了一组“已识别”字符，并以 ^ 开头并以 $ 结尾。例如，如果您的“识别”字符是大写的 A 到 Z，它会是`^[A-Z]$`
2.  拒绝不匹配的字符串

*注意：*这不适用于包含换行符的字符串，但如果您需要支持它，您可以调整它

*要删除完全*包含您无法识别的字符的字符串：（例如：如果您想接受小写字母，那么“foo@bar”将被接受，因为它确实包含至少一个小写字母）

1.  创建一个正则表达式，它定义了一组“已识别”字符，但`^`在方括号内有一个字符，并以 ^ 开头并以 $ 结尾。例如，如果您的“识别”字符是大写的 A 到 Z，它会是`^[^A-Z]$`
2.  拒绝匹配的字符串

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T20:16:46.923

我会查看 Linq 的[where](http://msdn.microsoft.com/en-us/library/bb534803.aspx)方法，以及包含您要查找的字符的[正则表达式。](http://msdn.microsoft.com/en-us/library/e7sf90t3.aspx)在伪代码中：

```
return myStringCollection.Where(!s matches regex) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T20:17:12.430

这可以满足您的需求。

```
List<string> strings = new List<string>()
{
    "one",
    "two`",
    "thr^ee",
    "four"
};

List<char> invalid_chars = new List<char>()
{
    '`', '-', '^'
};

strings.RemoveAll(s => s.Any(c => invalid_chars.Contains(c)));
strings.ForEach(s => Console.WriteLine(s)); 
```

生成输出：

```
one
four 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-24T20:48:43.933

[这个问题](https://stackoverflow.com/questions/3210393/how-to-remove-all-non-alphanumeric-characters-from-a-string-except-dash)与我认为您正在寻找的内容有一些相似的答案。但是，我认为您希望包括所有字母、数字、空格和标点符号，但排除其他所有内容。那准确吗？如果是这样，这应该为你做：

```
char[] arr = str.ToCharArray();

arr = Array.FindAll<char>(arr, (c => (char.IsLetterOrDigit(c) || 
                      char.IsWhiteSpace(c) || char.IsPunctuation(c))));
str = new string(arr); 
```

# c++ - 在 Spirit:Qi 中构建自定义表达式树（没有 Utree 或 Boost::Variant）

> ID：13056893
> 
> 赞同：7
> 
> 时间：2012-10-24T20:09:01.530
> 
> 标签：c++, parsing, expression-trees, boost-spirit, boost-spirit-qi

首先，如果使用 Boost Variant 或 Utree 更容易，那么我将与他们达成和解，我将尝试在另一个主题中解决我的问题。但是，我非常希望能够像下面这样构建一棵树。

背景，如果您想直接解决问题，请忽略：我希望能够构建一个表达式树来解析类似

```
"({a} == 0) && ({b} > 5)" 
```

或标准数学表达式

```
"(2 * a) + b" 
```

然后，我将在评估我的树之前定义 a 和 b 是什么，如下所示：

```
a = 10;
double val = myExpression->Evaluate(); 
```

我的问题来自当我尝试构建尝试将字符串解析到我的表达式树中时。我正在使用一个抽象类“Expression”，然后派生“Variable”、“Constant”和“Binary”表达式（它也会做一元，但它不应该影响我的问题。我在使用我的规则添加到树时一直遇到问题，所以我显然做错了什么。我很难理解这些属性。

我的树如下（Tree.h）：

```
class BinaryExpression;
typedef double (*func)(double, double);

class Expression
{
public:
    virtual double Evaluate() = 0;
};

class BinaryExpression : public Expression
{
private:
    Expression* lhs;
    Expression* rhs;
    func method;

    double Evaluate();

public:
    BinaryExpression(void);
    BinaryExpression(char op, Expression* lhs, Expression* rhs);
    BinaryExpression(char op);
    void operator()(Expression* lhs, Expression* rhs);
};

class ConstantExpression : public Expression
{
private:
    double value;
public:
    ConstantExpression(void);
    ConstantExpression(char op);
    ConstantExpression(double val);

    double Evaluate();
};

// Require as many types as there are fields in expression?
static double a;
static double b;
class VariableExpression : public Expression
{
private:
    char op;

public:
    VariableExpression(char op);

    double Evaluate();
};

BOOST_FUSION_ADAPT_STRUCT(
    BinaryExpression,
    (Expression*, lhs)
    (Expression*, rhs)
    (func, method)
)

BOOST_FUSION_ADAPT_STRUCT(
    VariableExpression,
    (char, op)
)

BOOST_FUSION_ADAPT_STRUCT(
    ConstantExpression,
    (double, op)
) 
```

树.cpp

```
typedef double (*func)(double, double);

/////////////////////////////////////////////////////////////////////////////
// BINARY EXPRESSION
////////////////////////////////////////////////////////////////////////////

BinaryExpression::BinaryExpression(void) {}

BinaryExpression::BinaryExpression(char op, Expression* lhs, Expression* rhs)
{
    this->lhs = lhs;
    this->rhs = rhs;

    // Example, methods are held in another header
    if (op == '+')
        method = Add;
    else if (op == '-')
        method = Subtract;

}

double BinaryExpression::Evaluate()
{
    return method(lhs->Evaluate(), rhs->Evaluate());
}

BinaryExpression::BinaryExpression(char op)
{
    if (op == '+')
        method = Add;
    else if (op == '-')
        method = Subtract;
}

void BinaryExpression::operator()(Expression* lhs, Expression* rhs)
{
    this->lhs = lhs;
    this->rhs = rhs;
}

/////////////////////////////////////////////////////////////////////////////
// CONSTANT EXPRESSION
////////////////////////////////////////////////////////////////////////////

ConstantExpression::ConstantExpression() {}

ConstantExpression::ConstantExpression(char op)
{
    this->value = op - 48;
}
ConstantExpression::ConstantExpression(double val)
{
    value = val;
}

double ConstantExpression::Evaluate()
{
    return value;
}

/////////////////////////////////////////////////////////////////////////////
// VARIABLE EXPRESSION
////////////////////////////////////////////////////////////////////////////

VariableExpression::VariableExpression(char op)
{
    this->op = op;
}

double VariableExpression::Evaluate()
{
    // a and b are defined in the header, and are used to fill in the variables we     want to evaluate
    if (op == 'a')
        return a;
    if (op == 'b')
        return b;
    return 0;
} 
```

现在，如果我手动构建树，它一切正常，所以我认为它的结构方式没有问题。

这是 Grammar.h（很多评论来自我尝试过各种事情的地方，我可以删除它们，但我可能值得展示我尝试过的内容/我想用它去哪里）

```
#include "Tree.h"

#include <boost/spirit/include/qi.hpp>
#include <boost/spirit/include/phoenix_function.hpp>

namespace qi = boost::spirit::qi;
namespace ascii = boost::spirit::ascii;

qi::_1_type _1;
qi::_2_type _2;

// Pass functions to boost
boost::phoenix::function<BinaryExpression> plus = BinaryExpression('+');
boost::phoenix::function<BinaryExpression> minus = BinaryExpression('-');

template <typename Iterator>
struct ExpressionParser : qi::grammar<Iterator, BinaryExpression(), ascii::space_type>
{
    ExpressionParser() : ExpressionParser::base_type(expression)
    {
        qi::_3_type _3;
        qi::_4_type _4;

        qi::char_type char_;
        qi::uint_type uint_;
        qi::_val_type _val;
        qi::raw_type raw;
        qi::lexeme_type lexeme;
        qi::alpha_type alpha;
        qi::alnum_type alnum;
        qi::bool_type bool_;
        qi::double_type double_;

        expression = //?
            additive_expr                       [_val = _1]
            ;

        //equality_expr = 
        //      relational_expr >> 
        //      *(lit("==") > relational_expr)      [/*Semantice action to add to tree*/]
        //      ;

        additive_expr =
            primary_expr >>
            ( '+' > primary_expr)               [plus(_val, _1)]   
            | ( '-' > primary_expr)             [minus(_val, _1)]
            ;
        // Also tried "_val = plus(_1, _2)"

        primary_expr =
            constant                                [_val = _1]
            | variable                          [_val = _1]
            //| '(' > expression > ')'          [_val = _1]
            ;

        string %=
            '{' >> *(char_ - '}') >> '}'
            ;

        // Returns ConstantExpression
        constant =
            double_                                 [_val = _1];

        // Returns VariableExpression
        variable =
            char_                                   [_val = _1]
            ;
    }

    // constant expression = double
    // variable expression = string
    qi::rule<Iterator, BinaryExpression(), ascii::space_type>
        expression;

    qi::rule<Iterator, BinaryExpression(), ascii::space_type>
        // eventually will deal with all these rules
        equality_expr,
        relational_expr,        
        logical_expr,
        additive_expr,
        multiplicative_expr,
        primary_expr
            ;

    qi::rule<Iterator, ConstantExpression(), ascii::space_type>
        constant
        ;

    qi::rule<Iterator, VariableExpression(), ascii::space_type>
        variable
        ;

    qi::rule<Iterator, std::string(), ascii::space_type>
        string
        ;
}; 
```

所以这是一个真正的破解，但希望它会显示我试图实现的目标。任何建议或提示将不胜感激。有没有一个例子，有人在没有使用变体或 utree 的情况下构建了这样的树。

如果我违反了约定，也很抱歉，对于我的格式，我试图让它尽可能地可读。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-25T01:36:30.323

我不清楚您对（递归）变体的抱怨是什么，但这里有一个变体，与您希望使用动态分配的节点使用“老式”树构建相一致：

*   [http://liveworkspace.org/code/3VS77n$0](http://liveworkspace.org/code/3VS77n$0)

我故意回避了您语法中*运算符优先级的问题，因为*

*   你的语法不完整
*   我不知道所需的语义（毕竟，您似乎也支持布尔评估，但我不确定如何）
*   您可以在其他答案中了解这些：

    *   [C ++中的布尔表达式（语法）解析器](https://stackoverflow.com/questions/8706356/boolean-expression-grammar-parser-in-c/8707598#8707598)
    *   [Boost::Spirit 表达式解析器](https://stackoverflow.com/questions/8464969/boostspirit-expression-parser/8468822#8468822)
    *   [boost::spirit 解析器的编译错误](https://stackoverflow.com/questions/9453712/compilation-error-with-a-boostspirit-parser/9458029#9458029)显示了另一种方法

注意我是如何

*   使用 shared_ptr 消除了普遍存在的内存泄漏（如果您没有 TR1 库，则可以使用*Boost ）*
*   我删除了将特定 BinaryExpression 实例误用为*phoenix lazy actor*的错误。相反，我现在做了一个本地`makebinary`演员。
*   请注意现在如何支持运算符链 (1+2+5+6-10)：

    ```
    additive_expr =
        primary_expr                         [ _val = _1 ]
        >> *(char_("-+*/") >> primary_expr)  [ _val = makebinary(_1, _val, _2)]
        ; 
    ```

*   我添加了`{var}`, `/`,`*`和`(expr)`支持

*   为显示添加了序列化（`Print`虚拟方法，`operator<<`）（为了显示方便，BinaryExpression 现在存储的是`operator`而不是结果`method`）

*   因此，现在您可以使用 BOOST_SPIRIT_DEBUG （取消注释第一行）
*   我已重命名`Expression`为`AbstractExpression`（并使 de 构造函数*受保护*）
*   我已重命名`PrimaryExpression`为`Expression`（现在这是您的主要*表达式数据类型*）
*   我展示了如何在`static`地图 中简单地存储变量
    *   一定要看看`qi::symbols`和
    *   例如[，如何在语法<Iterator,double()> 中添加qi::symbols？](https://stackoverflow.com/questions/8780604/how-to-add-qisymbols-in-grammariterator-double/8781537#8781537)
*   使用更少的*融合结构适应*（仅`variable`现在）
*   使用模板化的构造函数技巧可以很容易地从不同的解析类型构造表达式：

    ```
    struct Expression : AbstractExpression {
        template <typename E>
        Expression(E const& e) : _e(make_from(e)) { } // cloning the expression
        // ...
    }; 
    ```

    足以*有效地*支持例如：

    ```
    primary_expr =
          ( '(' > expression > ')' )         [ _val = _1 ]
        | constant                           [ _val = _1 ]
        | variable                           [ _val = _1 ]
        ; 
    ```

*   为了好玩，还包括了一些测试用例：

    ```
    Input:                3*8 + 6
    Expression:           Expression(BinaryExpression(BinaryExpression(ConstantExpression(3) * ConstantExpression(8)) + ConstantExpression(6)))
    Parse success:        true
    Remaining unparsed:  ''
    (a, b):               0, 0
    Evaluation result:    30
    ----------------------------------------
    Input:                3*(8+6)
    Expression:           Expression(BinaryExpression(ConstantExpression(3) * BinaryExpression(ConstantExpression(8) + ConstantExpression(6))))
    Parse success:        true
    Remaining unparsed:  ''
    (a, b):               0, 0
    Evaluation result:    42
    ----------------------------------------
    Input:                0x1b
    Expression:           Expression(ConstantExpression(27))
    Parse success:        true
    Remaining unparsed:  ''
    (a, b):               0, 0
    Evaluation result:    27
    ----------------------------------------
    Input:                1/3
    Expression:           Expression(BinaryExpression(ConstantExpression(1) / ConstantExpression(3)))
    Parse success:        true
    Remaining unparsed:  ''
    (a, b):               0, 0
    Evaluation result:    0.333333
    ----------------------------------------
    Input:                .3333 * 8e12
    Expression:           Expression(BinaryExpression(ConstantExpression(0.3333) * ConstantExpression(8e+12)))
    Parse success:        true
    Remaining unparsed:  ''
    (a, b):               0, 0
    Evaluation result:    2.6664e+12
    ----------------------------------------
    Input:                (2 * a) + b
    Expression:           Expression(BinaryExpression(BinaryExpression(ConstantExpression(2) * VariableExpression('a')) + VariableExpression('b')))
    Parse success:        true
    Remaining unparsed:  ''
    (a, b):               10, 7
    Evaluation result:    27
    ----------------------------------------
    Input:                (2 * a) + b
    Expression:           Expression(BinaryExpression(BinaryExpression(ConstantExpression(2) * VariableExpression('a')) + VariableExpression('b')))
    Parse success:        true
    Remaining unparsed:  ''
    (a, b):               -10, 800
    Evaluation result:    780
    ----------------------------------------
    Input:                (2 * {a}) + b
    Expression:           Expression(BinaryExpression(BinaryExpression(ConstantExpression(2) * VariableExpression('a')) + VariableExpression('b')))
    Parse success:        true
    Remaining unparsed:  ''
    (a, b):               -10, 800
    Evaluation result:    780
    ----------------------------------------
    Input:                {names with spaces}
    Expression:           Expression(VariableExpression('names with spaces'))
    Parse success:        true
    Remaining unparsed:  ''
    (a, b):               0, 0
    Evaluation result:    0
    ---------------------------------------- 
    ```

## [完整代码](http://liveworkspace.org/code/3VS77n$0)

```
// #define BOOST_SPIRIT_DEBUG
// #define BOOST_RESULT_OF_USE_DECLTYPE
// #define BOOST_SPIRIT_USE_PHOENIX_V3

#include <cassert>
#include <memory>
#include <iostream>
#include <map>

struct AbstractExpression;
typedef std::shared_ptr<AbstractExpression> Ptr;

struct AbstractExpression {
    virtual ~AbstractExpression() {}
    virtual double Evaluate() const = 0;
    virtual std::ostream& Print(std::ostream& os) const = 0;

    friend std::ostream& operator<<(std::ostream& os, AbstractExpression const& e)
        { return e.Print(os); }

    protected: AbstractExpression() {}
};

template <typename Expr> // general purpose, static Expression cloner
    static Ptr make_from(Expr const& t) { return std::make_shared<Expr>(t); }

struct BinaryExpression : AbstractExpression 
{
    BinaryExpression() {}

    template<typename L, typename R>
    BinaryExpression(char op, L const& l, R const& r) 
        : _op(op), _lhs(make_from(l)), _rhs(make_from(r)) 
    {}

    double Evaluate() const {
        func f = Method(_op);
        assert(f && _lhs && _rhs);
        return f(_lhs->Evaluate(), _rhs->Evaluate());
    }

  private:
    char _op;
    Ptr _lhs, _rhs;

    typedef double(*func)(double, double);

    static double Add(double a, double b)      { return a+b; }
    static double Subtract(double a, double b) { return a-b; }
    static double Multuply(double a, double b) { return a*b; }
    static double Divide(double a, double b)   { return a/b; }

    static BinaryExpression::func Method(char op)
    {
        switch(op) {
            case '+': return Add;
            case '-': return Subtract;
            case '*': return Multuply;
            case '/': return Divide;
            default:  return nullptr;
        }
    }
    std::ostream& Print(std::ostream& os) const
        { return os << "BinaryExpression(" << *_lhs << " " << _op << " " << *_rhs << ")"; }
};

struct ConstantExpression : AbstractExpression {
    double value;
    ConstantExpression(double v = 0) : value(v) {}

    double Evaluate() const { return value; }

    virtual std::ostream& Print(std::ostream& os) const
        { return os << "ConstantExpression(" << value << ")"; }
};

struct VariableExpression : AbstractExpression {
    std::string _name;

    static double& get(std::string const& name) {
        static std::map<std::string, double> _symbols;
        return _symbols[name];
        /*switch(name) {
         *    case 'a': static double a; return a;
         *    case 'b': static double b; return b;
         *    default:  throw "undefined variable";
         *}
         */
    }

    double Evaluate() const { return get(_name); }

    virtual std::ostream& Print(std::ostream& os) const
        { return os << "VariableExpression('" << _name << "')"; }
};

struct Expression : AbstractExpression
{
    Expression() { }

    template <typename E>
    Expression(E const& e) : _e(make_from(e)) { } // cloning the expression

    double Evaluate() const { assert(_e); return _e->Evaluate(); }

    // special purpose overload to avoid unnecessary wrapping
    friend Ptr make_from(Expression const& t) { return t._e; }
  private:
    Ptr _e;
    virtual std::ostream& Print(std::ostream& os) const
        { return os << "Expression(" << *_e << ")"; }
};

//Tree.cpp

/////////////////////////////////////////////////////////////////////////////
// BINARY EXPRESSION
////////////////////////////////////////////////////////////////////////////

//#include "Tree.h"
#include <boost/spirit/include/qi.hpp>
#include <boost/spirit/include/phoenix.hpp>
#include <boost/fusion/adapted.hpp>

BOOST_FUSION_ADAPT_STRUCT(VariableExpression, (std::string, _name))

namespace qi    = boost::spirit::qi;
namespace ascii = boost::spirit::ascii;
namespace phx   = boost::phoenix;

// Pass functions to boost
template <typename Iterator>
struct ExpressionParser : qi::grammar<Iterator, Expression(), ascii::space_type> 
{
    struct MakeBinaryExpression {
        template<typename,typename,typename> struct result { typedef BinaryExpression type; };

        template<typename C, typename L, typename R>
            BinaryExpression operator()(C op, L const& lhs, R const& rhs) const 
            { return BinaryExpression(op, lhs, rhs); }
    };

    phx::function<MakeBinaryExpression> makebinary;

    ExpressionParser() : ExpressionParser::base_type(expression) 
    {
        using namespace qi;
        expression =
            additive_expr                        [ _val = _1]
            ;

        additive_expr =
            primary_expr                         [ _val = _1 ]
            >> *(char_("-+*/") >> primary_expr)  [ _val = makebinary(_1, _val, _2)]
            ;

        primary_expr =
              ( '(' > expression > ')' )         [ _val = _1 ]
            | constant                           [ _val = _1 ]
            | variable                           [ _val = _1 ]
            ;

        constant = lexeme ["0x" >> hex] | double_ | int_;
        string   = '{' >> lexeme [ *~char_("}") ] > '}';
        variable = string | as_string [ alpha ];

        BOOST_SPIRIT_DEBUG_NODE(expression);
        BOOST_SPIRIT_DEBUG_NODE(additive_expr);

        BOOST_SPIRIT_DEBUG_NODE(primary_expr);
        BOOST_SPIRIT_DEBUG_NODE(constant);
        BOOST_SPIRIT_DEBUG_NODE(variable);
        BOOST_SPIRIT_DEBUG_NODE(string);
    }

    qi::rule<Iterator, Expression()        , ascii::space_type> expression;
    qi::rule<Iterator, Expression()        , ascii::space_type> additive_expr;

    qi::rule<Iterator, Expression()        , ascii::space_type> primary_expr;
    qi::rule<Iterator, ConstantExpression(), ascii::space_type> constant;
    qi::rule<Iterator, VariableExpression(), ascii::space_type> variable;
    qi::rule<Iterator, std::string()       , ascii::space_type> string;
};

void test(const std::string input, double a=0, double b=0)
{
    typedef std::string::const_iterator It;
    ExpressionParser<It> p;

    Expression e;
    It f(input.begin()), l(input.end());
    bool ok = qi::phrase_parse(f,l,p,ascii::space,e);

    std::cout << "Input:                "  << input            << "\n";
    std::cout << "Expression:           "  << e                << "\n";
    std::cout << "Parse success:        "  << std::boolalpha   << ok << "\n";
    std::cout << "Remaining unparsed:  '"  << std::string(f,l) << "'\n";

    std::cout << "(a, b):               "  << a << ", " << b   << "\n";

    VariableExpression::get("a") = a;
    VariableExpression::get("b") = b;
    std::cout << "Evaluation result:    "  << e.Evaluate()     << "\n";
    std::cout << "----------------------------------------\n";
}

int main() 
{
    test("3*8 + 6"); 
    test("3*(8+6)"); 
    test("0x1b"); 
    test("1/3"); 
    test(".3333 * 8e12");
    test("(2 * a) + b",    10,   7);
    test("(2 * a) + b",   -10, 800);
    test("(2 * {a}) + b", -10, 800);
    test("{names with spaces}");
} 
```

# android - 从字节数组创建 typeFace

> ID：13056894
> 
> 赞同：3
> 
> 时间：2012-10-24T20:09:09.963
> 
> 标签：android, fonts, bytearray, typeface

在我的应用程序中，我从服务器动态下载字体并将它们保存到数据库中。有什么方法可以从 db 中的 blob 创建 Typaface？当然我可以创建临时文件并从中加载数据，但这不是最好的方法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T20:52:13.677

这是唯一的方法。您可以从资产文件或常规文件创建字体。我会将字体保存在设备上并在数据库中存储路径。然后只需获取路径，创建一个文件对象，然后创建一个字体。

# javascript - 将项目添加到视口而不显示它 extjs 4

> ID：13056897
> 
> 赞同：0
> 
> 时间：2012-10-24T20:09:27.897
> 
> 标签：javascript, extjs, window, extjs4

我该怎么做？如果我将项目添加到视口：

```
Ext.define('Me.view.Viewport', {
extend: 'Ext.container.Viewport',
layout: 'fit',

requires: [
    'Me.view.Params',
    'Me.view.DrawChart',
'Me.view.ParamsBtn'
    'Me.view.ChartWin'
],

initComponent: function() {
    this.items = {
       items : [{ xtype : params, align : center},{xtype : paramsbtn, align...}]}; 
```

好吧，如果我在“需要”中添加我的视图，我需要在我的视口中的某个地方实例化它们，否则它会给我这个错误：

```
Uncaught TypeError: Cannot read property 'isInstance' of undefined 
```

例如，我有一个窗口需要在单击按钮后显示，但我的应用程序无法识别它，除非它在视口中，但我不希望它在视口中，我只想显示它......我已经问过这个问题：[将项目添加到窗口 Extjs 4](https://stackoverflow.com/questions/12977076/adding-item-to-window-extjs-4) 中，您可以在其中看到我的 ChartWin 的代码，我在其中添加了一个项目，即视图 DrawChart。现在我只需要在单击按钮后显示 ChartWin。

请任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T20:36:22.557

如果它是您要显示的窗口，则根本不需要将其添加到视口中。Windows 是自动浮动的 Panel 组件的特例。因此，您所要做的就是通过从 Window 组件扩展来定义您的窗口。当您创建该窗口的实例时，您可以调用 show() 来显示它。他们的网站上有很多例子：[http ://docs.sencha.com/ext-js/4-1/#!/example/window/layout.html](http://docs.sencha.com/ext-js/4-1/#!/example/window/layout.html)

# osgi - 如何声明对 SCR 扩展器能力的要求？

> ID：13056898
> 
> 赞同：6
> 
> 时间：2012-10-24T20:09:29.370
> 
> 标签：osgi, declarative-services

OSGi Enterprise Release 5 规范引入了`osgi.extender`命名空间。这个命名空间使得假设 Blueprint 或 Declarative Services 等扩展器安装在框架中的捆绑包可以使用`Require-Capability`标头对这种依赖关系进行建模。

第 135.2 章*osgi.extender 命名空间*告诉我们，每个特定扩展器的能力值应该在相应的规范中指定。以蓝图为例：

```
Provide-Capability: osgi.extender;
  osgi.extender="osgi.blueprint";
  uses:="org.osgi.service.blueprint.container,org.osgi.service.blueprint.reflect"
  version:Version="1.0" 
```

但是，第 112 章*声明性服务规范*没有指定 SCR 实现提供的功能。

[Peter Kriens 在一篇关于需求和能力的博客文章](http://blog.osgi.org/2012/03/requirements-and-capabilities.html)中给出了一个例子，表明 SCR 的能力是`osgi.component`. 我假设最终这个值将在规范中正确定义。但在那之前我不能使用它。

由于`Require-Capability`和`Provide-Capability`标头是在 OSGi 核心版本 4.3 中引入的，因此该机制已经在框架实现中可用。所以，我希望我的包表达对 SCR 的要求，以便可以从 OBR 存储库中解析 SCR 实现。

我可以想象一个解决方案，我创建一个空包，一方面提供自定义功能，另一方面需要实现包。例如：

```
Provide-Capability: com.example.extender; extender=scr
Require-Bundle: org.apache.felix.scr; bundle-version=1.6.0 
```

然后，任何包含声明性服务的捆绑软件都可以表达对此功能的需求。例如：

```
Require-Capability: com.example.extender; filter:="(extender=scr)" 
```

当我部署包含声明性服务的包时，这是确保解决 SCR 的好方法吗？还有其他方法吗？

这个问题的一个好的解决方案是一个也可以应用于其他不提供功能的遗留包的解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T21:40:25.077

规范定义了 osgi.extender 命名空间，但需要更新各种扩展器规范（蓝图、DS）以强制实现提供适当的扩展器功能。现在，他们可能不会。

所以现在，您的 DS 包现在可以“要求”解析（甚至安装）DS 实现包。

OSGi 正在为 Blueprint 和 DS 的下一次更新进行工作，这些更新将要求 osgi.extender 功能。

# sql-server - 在 Transact SQL 视图中分解/重用复杂计算

> ID：13056899
> 
> 赞同：1
> 
> 时间：2012-10-24T20:09:30.047
> 
> 标签：sql-server, tsql, view

在 SQL 视图中，处理重用先前计算的问题的最佳方法是什么，以使它们不会变得复杂/不可读。

在存储过程中，我们可以存储/输出@variables 并使用它们进行计算，但我的问题是这必须在视图中完成。

解决这个问题的最佳方法是什么？（记住有几千行数据）。

```
SELECT  
        /* CALC 1 output to view row */
        (SELECT Act.ValueInContractCurrency/dbo.[Contract].Value * 
            (SELECT ISNULL(SUM(dbo.Invoice.ValueInContractCurrency),0)
             FROM dbo.Invoice 
             WHERE dbo.Invoice.StageId = Act.StageId)) AS InvoicedValueInContractCurrency, 

        /* CALC 2 wraps CALC1 inside it and outputs to view row */
        (SELECT Act.ValueInContractCurrency - 
            (SELECT Act.ValueInContractCurrency/dbo.[Contract].Value * 
                (SELECT ISNULL(SUM(dbo.Invoice.ValueInContractCurrency),0)
                 FROM dbo.Invoice 
                 WHERE dbo.Invoice.StageId = Act.StageId))) AS RemainingValueInContractCurrency,        

        /* CALC 3 wraps CALC2 inside it (which in turn wraps CALC1) and outputs to view row */
        (SELECT ConCurrency.CurrentExchangeRate / dbo.[Contract].CostedExchangeRate *
            (SELECT Act.ValueInContractCurrency - 
                (SELECT Act.ValueInContractCurrency/dbo.[Contract].Value * 
                    (SELECT ISNULL(SUM(dbo.Invoice.ValueInContractCurrency),0)
                     FROM dbo.Invoice 
                     WHERE dbo.Invoice.StageId = Act.StageId)))) AS RemainingValueInFacilityCurrency

        /* etc... for 10 more calcs that get increasingly long and unreadable via wrapping */

        FROM dbo.Activity AS Act
        JOIN dbo.Stage ON Act.StageId = dbo.Stage.Id       
        JOIN dbo.[Contract] ON dbo.Stage.ContractId = dbo.[Contract].Id
        JOIN dbo.Facility  ON dbo.[Contract].FacilityId = Facility.Id
        JOIN dbo.Currency AS FacCurrency ON dbo.Facility.CurrencyId = FacCurrency.Id
        JOIN dbo.Currency AS ConCurrency ON dbo.[Contract].CurrencyId = ConCurrency.Id 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T20:12:35.537

就个人而言，我只是对它们进行子查询。虽然老实说，SQL Server 看穿了“包装”并确实重用了表达式；您可以通过检查执行计划来验证这一点。

```
 /* etc... for 10 more calcs that get increasingly long and unreadable via wrapping */

SELECT  *,
        /* CALC 3 wraps CALC2 inside it (which in turn wraps CALC1) and outputs to view row */
        (SELECT CurrentExchangeRate / CostedExchangeRate *
            RemainingValueInContractCurrency) AS RemainingValueInFacilityCurrency
FROM (
SELECT  *,
        /* CALC 2 wraps CALC1 inside it and outputs to view row */
        (SELECT ValueInContractCurrency - 
            InvoicedValueInContractCurrency) AS RemainingValueInContractCurrency
FROM (
SELECT  *,  
        /* CALC 1 output to view row */
        (SELECT Act.ValueInContractCurrency/dbo.[Contract].Value * 
            (SELECT ISNULL(SUM(dbo.Invoice.ValueInContractCurrency),0)
             FROM dbo.Invoice 
             WHERE dbo.Invoice.StageId = Act.StageId)) AS InvoicedValueInContractCurrency
        FROM dbo.Activity AS Act
        JOIN dbo.Stage ON Act.StageId = dbo.Stage.Id       
        JOIN dbo.[Contract] ON dbo.Stage.ContractId = dbo.[Contract].Id
        JOIN dbo.Facility  ON dbo.[Contract].FacilityId = Facility.Id
        JOIN dbo.Currency AS FacCurrency ON dbo.Facility.CurrencyId = FacCurrency.Id
        JOIN dbo.Currency AS ConCurrency ON dbo.[Contract].CurrencyId = ConCurrency.Id
        ) A
        ) B 
```

# c# - 如何创建一个列表，其中的项目将是网站地址的随机树？

> ID：13056901
> 
> 赞同：-2
> 
> 时间：2012-10-24T20:09:29.877
> 
> 标签：c#, arrays

我的意思是该列表最终将带有一个离线网站地址，但作为一棵树。例如，该程序将创建网站地址的自动列表，例如第一个将是：

```
http://www.aaa.com 
```

下一个网站将是：

```
http://www.bbb.com 
```

这个想法是该程序将创建自动网站地址，并且每个下一个网站将是 hte 列表中上述网站的下一级。

```
If the user type : http://www.aaa.com
The next site will be http://www.bbb.com
So aaa.com is level 0 and bbb.com is level 1
http://www.ccc.com will be level 2 
```

之后我想添加另一个随机数，每个级别将是随机数量的站点。例如 ：

```
Level 0 http://www.aaa.com
Level 1 http://www.bbb.com http://www.bb1.com http://www.bb2.com
Level 2 http://www.ccc.con http://www.cc1.com 
```

级别 0 中的链接是用户输入的链接，因此它始终是级别 0 中的一个链接。其他级别每次可以有多个站点。

所以最后的列表将在索引 [0] [http://www.aaa.com](http://www.aaa.com)

```
index [1] will have more 3 indexs each one a site address.
index [2] will have more 2 indexs with two sites. 
```

我一般想做的是能够离线使用这个站点地址。因此，也许不是随机的，也许用户只需单击一个按钮，它将始终创建相同的列表，用户将只能设置要创建的级别。唯一随机的就是每个级别有多少个站点。

* * *

这是用于我拥有的网络爬虫程序，即使由于某种原因没有互联网连接，我也想使用它，所以我仍然可以在程序上工作并检查事情。现在今天，如果没有互联网连接，我将无法测试该程序。

这就是为什么我想在离线模式下以某种方式创建自动网站列表。

我能做到吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T20:14:48.653

所以听起来你想要一个锯齿状的数组。这很简单。您可以创建一个`List<List<string>>`例如：

```
List<List<string>> myList = new List<List<string>>();
myList.Add(new List<string>());
myList[0].Add("http://www.aaa.com");
myList.Add(new List<string>());
myList[1].Add("http://www.bbb.com");
myList[1].Add("http://www.bb1.com");
// and so on...

Console.WriteLine(myList[0][0]);   // displays http://www.aaa.com
Console.WriteLine(myList[1][0]);   // displays http://www.bbb.com
Console.WriteLine(myList[1][1]);   // displays http://www.bb1.com 
```

# java - 使用 db 表从一个位置控制 5 到数百个子程序调用

> ID：13056902
> 
> 赞同：1
> 
> 时间：2012-10-24T20:09:41.383
> 
> 标签：java, dynamically-generated

有一种想法是在 Java 应用程序中包含这样的代码。

```
Evaluate External Type Code
When 1 
  Call L.Services Parm1, Parm2, Parm3,Parm4, Parm5, Parm6
When 2 
  Call T.Services Parm1, Parm2, Parm3
When 3 
  Call C.Services Parm1, Parm2, Parm3,Parm4, Parm5, Parm6
When 4
  Call D.Services Parm1, Parm2
When 4
  Call X.Services Parm1, Parm2, Parm3,Parm4, Parm5
When other
  Call Invalid
End Evaluate 
```

在开发周期中可能会添加调用。我没有用 Java 开发过任何东西，我的经验是大型机汇编程序、COBOL、PL/1 和数据库应用程序。Parm 字段可以是 to/from，每个子例程会有不同数量的 parms。

我知道这可以在汇编程序、C 和 PL/1 但是 Java 中完成？

我的偏好是有一个小表，上面有被调用例程的名称和所有参数的列表。
这将允许使用 CALL ID 查询 CALL 表以返回例程名称和所有参数。（作为一个数组？）使用这种方法，控制模块中不会有任何代码更改来添加新功能，只需插入 CALL 表。

这可以用Java完成吗？

# perl - 使用 Perl 解析 excel 文件

> ID：13056905
> 
> 赞同：0
> 
> 时间：2012-10-24T20:09:49.377
> 
> 标签：perl, perl-module

我是 perl 的新手，所以我要求解决以下问题的提示：我有一个 excel 文件，我想在列标题（第一行）中搜索特定单词，然后如果匹配，我提取整个列并把它放在一个数组（或其他任何东西）中。

所以在我的数组中，我将有第一列，然后是第二列……直到搜索结束。

我打算在那之后逐行读取我的数组以按顺序处理数据（我对那部分很满意）。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T20:17:53.647

看看[Spreadsheet::Read](http://search.cpan.org/~hmbrand/Spreadsheet-Read-0.47/Read.pm)。它读取数组哈希引用中的整个 Excel 工作表，您可以对其进行搜索。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T20:34:50.793

`Save as->XML Spreadsheet 2003`就个人而言，我总是更喜欢使用和使用将 Excel 文件导出为 XML 格式`XML::Simple`。但是，也有一些 Excel 解析器。

[Spreadsheet::ParseExcel](http://search.cpan.org/dist/Spreadsheet-ParseExcel/lib/Spreadsheet/ParseExcel.pm)和[Spreadsheet::XLSX](http://search.cpan.org/~dmow/Spreadsheet-XLSX-0.13-withoutworldwriteables/lib/Spreadsheet/XLSX.pm)，您可能想要后者。

注意：我没有使用 ReadExcel，但它看起来也不错。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T20:26:55.423

查看电子表格::阅读。结果出来 $ref->{cell}->[arrayref_of_columns] 因此您可以匹配该数组 ref 的索引 [1]，如果匹配，则整个 arrayref 就是您的列。

# css - 具有非标准样式的 CSS 字体

> ID：13056907
> 
> 赞同：3
> 
> 时间：2012-10-24T20:09:54.077
> 
> 标签：css, uiwebview, fonts

使用具有非标准样式名称的字体系列，例如'Inline'或'Outline'，而不是'Bold'和'Italic'等标准样式，如何用css选择字体的不同样式？

设置`font-family`从系列中挑选一种样式，但设置字体样式或任何其他属性不起作用（除了斜体和斜体将从任意选择的样式中创建假斜体）。

特别是在这种情况下，我在 iOS 应用程序的 web 视图中显示字体。出于所有意图和目的，字体安装在机器上，而不是从任何外部服务或@font-face 加载。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T20:40:31.780

您需要检查字体的属性以找出“字体系列名称”和“字体子系列名称”。前者很可能是“Foobar Inline”或“Foobar Bold Outline”，而后者是“Regular”。那么字体将是字体规范和 CSS 方面的常规字体，并且您需要使用特定名称（使用诸如`font-weight`set 或 default之类的字体属性`normal`）。

找出字体属性可能非常困难，具体取决于环境。[DTL OTMaster Light](http://www.fontlab.com/font-utility/dtl-otmaster/dtl-otmaster/)是一个很棒的工具。使用它，打开一个字体，打开“Root”，然后在“'name' table”下打开“'name' records”，你会看到包括提到的名字的数据（如评论列中所述）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T20:13:22.110

你用的是什么字体？也许字体根本不提供任何用于斜体或粗体的自定义样式。

您的 CSS 代码中是否有任何印刷或语法错误？让我们看看。

# c# - 使用 Mindsqualls 和 C# 对 LEGO Mindstorms 进行编程

> ID：13056910
> 
> 赞同：2
> 
> 时间：2012-10-24T20:10:03.013
> 
> 标签：c#, dll, mindstorms

我正在开发一个从计算机运行 LEGO NXT 的程序。我找到了用于 LEGO NXT 的[MindSqualls](http://www.mindsqualls.net/Default.aspx) .NET 库，但我不知道如何处理 DLL 和/或 c# 库以使软件正常工作。

我首先下载了 DLL 版本，并在项目的所有不同文件夹中尝试了它们。然而，当我尝试使用代码时：

```
using NKH.MindSqualls; 
```

我得到错误

> 找不到类型或命名空间名称“NKH”（您是否缺少 using 指令或程序集引用？）

当我尝试下载 c# 项目并将它们包含在我的解决方案中时，我得到了同样的错误。

有谁知道我将如何以我可以使用它们的方式包含 DLL 或 c# 项目？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T20:11:25.067

您需要右键单击项目，单击添加引用，然后选择 DLL 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T20:14:33.603

此错误的另一个可能原因是引用的 DLL 与项目的目标 .Net 版本之间存在版本不匹配。

如果您尝试使用为比项目的目标 .Net 版本更新的 .Net 版本构建的 DLL 版本，例如尝试在 .Net 2.0 项目上使用 .Net 4.0 DLL，则可能会发生这种情况

# php - 如何在没有重定向循环的情况下将 index.php/controller/action 重定向到 controller/action？

> ID：13056911
> 
> 赞同：1
> 
> 时间：2012-10-24T20:10:05.300
> 
> 标签：php, .htaccess, mod-rewrite

**解决了 ：）**

```
RewriteCond %{THE_REQUEST} index.php
RewriteRule index.php(.*)$ http://%{HTTP_HOST}$1 [L,R=301]

RewriteCond %{REQUEST_FILENAME} !-d 
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

* * *

我配置了一个重定向，以便我可以打开[http://example.com/controller/action](http://example.com/controller/action)和 ModRewrite 将内部请求路由到 ...index.php/controller/action。

现在我想重定向一个用户，如果他自动打开[http://example.com/index.php/controller/action](http://example.com/index.php/controller/action)到 index.php/controller/action（301 重定向）。但现在我得到了无限循环的重定向。

是否有机会将内部重定向分离到引导 index.php 并防止一个用户可以使用 index.php 子路径打开 url？

我试过这个，但这不起作用（无循环）：

```
 RewriteCond %{REQUEST_URI} index.php/(.*)
 RewriteRule ^index.php/(.*)/$ http://%{HTTP_HOST}/$1/ [L,R=301]

 RewriteCond %{REQUEST_FILENAME} !-d 
 RewriteCond %{REQUEST_FILENAME} !-f
 RewriteRule ^(.*)$ /index.php/$1 [L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T20:21:12.600

在 PHP 端解决这个问题的常用方法是让计数器随着每次重定向而增加。例如：[https ://github.com/vjousse/symfony-1.4/blob/master/lib/controller/sfController.class.php](https://github.com/vjousse/symfony-1.4/blob/master/lib/controller/sfController.class.php)

```
if ($this->getActionStack()->getSize() >= $this->maxForwards)
{
  // let's kill this party before it turns into cpu cycle hell
  throw new sfForwardException('Too many forwards have been detected for this request.');
} 
```

# c++ - 如何在 C++ 中创建一个构造函数来创建线程开始运行时应该返回的 pthread

> ID：13056912
> 
> 赞同：1
> 
> 时间：2012-10-24T20:10:09.473
> 
> 标签：c++, constructor, c++11

我想为我的线程类创建一个构造函数，它可以创建一个线程，并且它应该在线程开始在入口点运行时返回

入口点将是一些将在运行时传递的类函数。派生类函数不能更改，它不会更新任何可以检查的共享变量。

如何确保我创建的 pthread 在我指定的入口点开始执行

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T20:20:29.510

这不是一个好主意。

首先运行基类的构造函数。因此，如果在线程到达入口点之前基类构造函数没有返回，那么线程正在一个构造函数尚未运行的对象内运行。因此完全是外行。

如果入口点是在派生类型中定义的虚拟方法，那么您肯定调用了未定义的行为。

这也是为什么大多数线程类不是这样设计的原因。通常你创建线程对象。然后调用一个方法，例如`start()`运行作为参数传递的函数/方法或可运行对象。这样您就知道代表线程的对象已完全构造，并且所有成员都已正确初始化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T20:14:36.610

您将需要使用同步原语来做到这一点，例如*屏障*。您可以简单地用一个不同的入口点包装您获得的入口点，该入口点发出此同步原语的信号，然后调用其基本入口点。

如果没有看到您要完成的任何实际代码，就没有什么可以说的了。

# php - 将用于 URL 安全文件名的 PHP 脚本转换为 JavaScript？

> ID：13056914
> 
> 赞同：2
> 
> 时间：2012-10-24T20:10:20.850
> 
> 标签：php, javascript

我正在开发一种一次性转换工具，用于将数十万个用户文件从一个托管环境迁移到另一个托管环境。作为迁移的一部分，我正在清理文件名以使其对 URL 安全。我的 PHP 脚本可以做到这一点（不能声称它是最优雅、最正确或最优化的代码，但它可以满足我的需要）。文件扩展名是单独处理的，所以在这里它们不是问题。

```
<?php
$fileName = $_POST['name'];
$swap_chars = array('%20'=>'-', '&'=>'and', '@'=>'at', '='=>'eq', '#'=>'num', '%'=>'pct', '+'=>'-', ' '=>'-', ','=>'-', '/'=>'-', ':'=>'-', ';'=>'-', '\\'=>'-', '|'=>'-', '~'=>'-', 'Š'=>'S', 'š'=>'s', 'Ð'=>'Dj', 'Ž'=>'Z', 'ž'=>'z', 'À'=>'A', 'Á'=>'A', 'Â'=>'A', 'Ã'=>'A', 'Ä'=>'A', 'Å'=>'A', 'Æ'=>'A', 'Ç'=>'C', 'È'=>'E', 'É'=>'E', 'Ê'=>'E', 'Ë'=>'E', 'Ì'=>'I', 'Í'=>'I', 'Î'=>'I', 'Ï'=>'I', 'Ñ'=>'N', 'Ò'=>'O', 'Ó'=>'O', 'Ô'=>'O', 'Õ'=>'O', 'Ö'=>'O', 'Ø'=>'O', 'Ù'=>'U', 'Ú'=>'U', 'Û'=>'U', 'Ü'=>'U', 'Ý'=>'Y', 'Þ'=>'B', 'ß'=>'ss', 'à'=>'a', 'á'=>'a', 'â'=>'a', 'ã'=>'a', 'ä'=>'a', 'å'=>'a', 'æ'=>'a', 'ç'=>'c', 'è'=>'e', 'é'=>'e', 'ê'=>'e', 'ë'=>'e', 'ì'=>'i', 'í'=>'i', 'î'=>'i', 'ï'=>'i', 'ð'=>'o', 'ñ'=>'n', 'ò'=>'o', 'ó'=>'o', 'ô'=>'o', 'õ'=>'o', 'ö'=>'o', 'ø'=>'o', 'ù'=>'u', 'ú'=>'u', 'û'=>'u', 'ü'=>'u', '†'=>'t', '°'=>'deg', '¢'=>'c', '£'=>'L', '§'=>'S', '•'=>'o', '¶'=>'P', '®'=>'R', '©'=>'C', '™'=>'TM', 'ý'=>'y', 'ý'=>'y', 'þ'=>'b', 'ÿ'=>'y', 'ƒ'=>'f');
$fileName = str_replace('\\\'', '', $fileName);             // strip escaped apostrophes
$fileName = str_replace('\\"', '', $fileName);              // strip escaped quotes
$fileName = strtr($fileName, $swap_chars);                  // swap special characters
$fileName = preg_replace("/[^0-9a-zA-Z._-]/","",$fileName); // strip remaining bad characters
$fileName = preg_replace("/--+/","-",$fileName);            // trim repeating dashes
$fileName = preg_replace("/\.\.+/",".",$fileName);          // trim repeating periods
$fileName = preg_replace("/__+/","_",$fileName);            // trim repeating underscores
$fileName = trim($fileName, '.-_');                         // remove leading or trailing punctuation
$fileName = substr($fileName, 0, 62);                       // truncate long filenames
echo $fileName;
?> 
```

该工具的大部分内容也在 JavaScript 中，如果可能的话，我想在那里进行清理。我想我可能可以`text.replace(old,new)`用来复制`str_replace()`和`preg_replace()`PHP 函数。

但是，PHP`strtr()`和`trim()`函数做了一些非常酷的事情（strtr 可以使用关联数组进行匹配/替换；修剪去除多个指定字符），我还没有找到任何 JS 等价物。

那么，有没有一种我忽略的更简单的方法，或者我应该深入研究并编写自己的函数？或者，PHP.js 是一个可行的选择吗？

**更新/解决方案：**

使用来自@Matt Winckler 的非常快速和有用的答案，我设法用 JavaScript 重写了我的清理代码。以下工作（至少对于我的用例）与下面接受的答案中提供的代码以及基于上面 PHP 数组的 JavaScript 对象“swapchars”一起工作。

```
function cleanname(name) {
    name = name.replace('\'', '');              // strip escaped apostrophes
    name = name.replace('\"', '');              // strip escaped quotes
    name = name.replace('%20', '-');            // replace encoded spaces
    name = strtr(name, swapchars);              // swap special characters
    name = name.replace(/[^0-9a-z_\.\-]/gi,''); // strip remaining bad characters
    name = name.replace(/-+/g,'-');             // trim repeating dashes
    name = name.replace(/\.+/g,'.');            // trim repeating periods
    name = name.replace(/_+/g,'_');             // trim repeating underscores
    name = trim(name, '.-_');                   // remove leading or trailing punctuation
    name = name.substr(0, 62);                  // truncate long names
    return name;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T21:22:01.553

替换Javasript中的`trim`and函数应该不会太难；`strtr`以下是我认为几乎符合要求的几个功能：

```
function strtr(str, swapChars) {
    var ret = '';
    for (var i = 0; i < str.length; i++) {
        ret += swapChars[str[i]] || str[i];
    }
    return ret;
}

function trim(str, chars) {
    var lowerIndex = 0;
    for (var i = 0; i < str.length; i++) {
        if (chars.indexOf(str[i]) === -1) {
            lowerIndex = i;
            break;
        }
    }
    for (var i = str.length - 1; i > -1; i--) {
        if (chars.indexOf(str[i]) === -1) {
            return str.substring(lowerIndex,i+1);
        }
    }
    return '';
} 
```

例子：

```
alert(trim('edcbabcde', 'cde'])); // 'bab'
alert(strtr('edcbabcde', {'e': 'E', 'd': 'D', 'c': 'C'})); // 'EDCbabCDE' 
```

需要注意的是，`strtr`上述实现仅适用于单个字符，因此不会捕获“%20”替换。如果您只有一个或两个多字符替换，那么我个人只需对它们进行正常替换，然后运行 ​​strtr，否则您可以重写 strtr 函数以迭代一系列替换而不是逐字符字符。

# arrays - Perl 数组快捷方式

> ID：13056915
> 
> 赞同：3
> 
> 时间：2012-10-24T20:10:51.047
> 
> 标签：arrays, perl

是否可以在 perl 中创建一个字符串变量数组，而不必指定数组中的每个字符串？就像使用字母和数字的“..”快捷方式一样。

例如：

```
$v1 = "hey";
$v2 = "hello";
$v3 = "bye";
$v4 = "welcome";

@f = ("$v1" .. "$v4"); 
```

这样打印 $f[2]; 等于“再见”...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T20:21:14.260

我对这种方法并不感到兴奋，但你可以这样做：

```
$v1 = "hey";
$v2 = "hello";
$v3 = "bye";
$v4 = "welcome";

@f = map{eval "\$v$_"}1..4; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T20:12:55.683

是你的意思吗？

```
my @v = qw/hey hello bye welcome/;

print join "\n", @v; 
```

创建`ARRAY`后，您可以访问任何项目

```
print $v[0]; 
```

在我们的例子中， : *hey*`0`的索引在哪里。`ARRAY`

 ** * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T20:13:16.720

我猜你可以用 eval 写一个程序来做这件事，但为什么要首先使用 $v1, $v2 呢？为什么不从数组开始？

或者，根据你真正需要做的事情，使用类似的东西

`@f = qw(hey hello bye welcome);`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-24T21:11:00.427

这可以（但可能不应该）通过使用来解决`no strict 'refs'`。而且巧合的是`no strict 'vars'`：

```
use strict;
use warnings;
use Data::Dumper;

{
    no strict 'vars';
    $v1 = "hey";
    $v2 = "hello";
    $v3 = "bye";
    $v4 = "welcome";

    no strict 'refs';
    my @f = map ${'v'.$_},1..4;
    print Dumper \@f;
} 
```

**输出：（无警告）**

```
$VAR1 = [
          'hey',
          'hello',
          'bye',
          'welcome'
        ]; 
```

我们需要`no strict 'vars'`，因为我们实际需要引用的变量是（真的）命名`$main::v1`的等等。我们实际上可以`no strict 'vars'`通过使用完整的名称来解决需要。如果你根本不使用严格，这甚至都不是问题。虽然不使用`strict`与通过在警告灯上贴标签来解决汽车发动机问题一样聪明：它不会挽救您的发动机故障。

你应该这样做吗？几乎不。总有办法绕过它。但这样做并没有大错特错，假设你不会因为这样的作弊而过火。

**正确的**方法是使用`$v1`, ...代替`$v1000`使用`$v[0]`, ... `$v[1000]`。也就是说，立即将值分配给数组。*

# objective-c - 核心绘图条形图 iPhone

> ID：13056918
> 
> 赞同：0
> 
> 时间：2012-10-24T20:11:02.293
> 
> 标签：objective-c, ios, cocoa-touch, core-plot

我已经按照这个链接[http://www.gilthonwe.com/2012/06/09/stacked-bar-chart-coreplot-ios/](http://www.gilthonwe.com/2012/06/09/stacked-bar-chart-coreplot-ios/)并成功地制作了我需要的条形图。但现在我想在这个图中做些改变，我想在单个 x 轴日期上有 2 条条形图线。我想要这样的条形图。

[![图表](../Images/358becc2081b3cae425080e4879e28ab.png)](https://i.stack.imgur.com/q4EAo.gif)
[（来源：[tqn.com](http://0.tqn.com/d/spreadsheets/1/0/V/1/-/-/bar_graph1.gif)）]

但我想要 2 个酒吧而不是 3 个。

我必须改变什么或如何才能制作这个条形图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T23:25:19.520

您应该使用两个条形图，一个用于具有相同填充的每组条形图。使用`barOffset`每个图上的 将一个向左移动一点，将另一个向右移动一点，以便它们在条形位置上方连接。有关示例代码，请参阅绘图库示例应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T20:35:24.500

如果它只是条形图，我认为您不需要链接中提供的代码。实现此类目标的最简单方法是简单地使用 CALayer 来表示图中的条形。您只需根据需要设置它们的框架和背景颜色，将它们作为子层添加到您的视图中并完成（除了创建轴和标签）

```
CALayer *layer = [[CALayer alloc] init];
layer.frame = /* ... */;
layer.backgroundColor = [[UIColor redColor] CGColor];

[someView.layer addSublayer:layer]; 
```

# python - Django模型：创建小值不动点

> ID：13056922
> 
> 赞同：2
> 
> 时间：2012-10-24T20:11:12.413
> 
> 标签：python, mysql, sql, django

**概括**

我正在 Django 中构建一个项目 - 并且将使用许多小范围的正十进制值（`1.25`,`0.01`等）。在数据库 (MySQL) 中，将它们存储为`value*10^precision`. 这意味着我可以不用存储一个`float`类型（4 个字节），而是使用一个`SmallInt`（2 个字节）。当它是兆字节的数据时，这是 rad。

**问题** 问题是当 Django 和它`PositiveSmallIntegerField()`制作一个自动检查“整数”值的小部件时！

*选项 1：*在模型代码中使用 DecimalField()，每当数据库发生变化时，我都会将 SQL 更新为 SMALLINT(3)。

```
PRECISION=2

class MyModule(models.Model):

    ...<fields>

    def readySave(self):
        pseudoDecimalField *= 10**PRECISION

    def setValues(self):
        pseudoDecimalField /= 10**PRECISION

    def save(self): 
        # pre-save things here
        self.readySave()
        super(MyModule, self).save()
        # post-save things here
        self.setValues() 
```

*选项 2：*推/拉值时使用原始 SQL 命令。

非常感谢您对此事的任何意见或经验。有没有人有任何其他方法来实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T18:54:01.570

问题仅在“前端”部分，因此必须有一种方法可以在不修改数据库的情况下解决问题。最简洁的方法是覆盖表单中字段的小部件。它应该是这样的：

```
class MyModuleForm(forms.Form):
    ....
    pseudoDecimalField = forms.PositiveSmallIntegerField(widget=forms.TextInput) 
```

[您可以在出色的 Django文档](https://docs.djangoproject.com/en/dev/ref/forms/widgets/)中阅读有关小部件的更多信息。

# c# - C# 使用 Regex.Match 从网站源中检索文件名

> ID：13056923
> 
> 赞同：1
> 
> 时间：2012-10-24T20:11:18.343
> 
> 标签：c#

我试图使用 Regex.Match 从网站源中检索文件名我有类似的东西来检索页面标题：

```
string title = Regex.Match(f, @"\<title\b[^>]*\>\s*(?<Title>[\s\S]*?)\</title\>", RegexOptions.IgnoreCase).Groups["Title"].Value; 
```

f 字符串正在重定向到我的页面..

所以我需要的是：从此源检索文件名：

```
<br><p><b>Download:</b> 24 hours<br><b>Time Left for Download:</b> <span id='cd'></span></p><p>Click on the file name to begin download.</p><div class='linkbox'><ul><li><a href="http://site.com/file/y8Qi2Bw8SXPX/51423">blabla.pdf</a></li></div></ul>
<a id="facebookbtn-link" title="send to Facebook" href="http://www.facebook.com/sharer.php?u=http://site.com/product/komM8k" onclick="return popup(this)" ><img src="http://site/img/facebook.png" alt="Facebook" />Post on Facebook</a> 
```

我需要检索 blabla.pdf 问题是，页面总是更新文件名，所以每次都不会是相同的名称，所以我真正需要的是检索 >blabla.pdf 之间的名称

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T20:37:17.533

详细说明 SLaks 的答案。有一个名为 HTML Agility 包的包。它可以作为 NuGet 包提供。

一个例子在这里[http://htmlagilitypack.codeplex.com/wikipage?title=Examples](http://htmlagilitypack.codeplex.com/wikipage?title=Examples)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T20:46:25.353

试试这个模式：

```
<a href="[^>]+>(.+?)</a> 
```

捕获的组 ($1) 应具有文件名

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T20:51:48.513

由于您不是在进行标记处理，而是在寻找特定的锚定模式，我相信 Regex 是*在这种情况下*使用的好工具。这是一个可以完成这项工作的模式。

```
string data = @"<br><p><b>Download:</b> 24 hours<br><b>Time Left for Download:</b>
<span id='cd'></span></p><p>Click on the file name to begin download.</p><div class='linkbox'><ul><li>
<a href=""http://site.com/file/y8Qi2Bw8SXPX/51423"">blabla.pdf</a></li></div></ul>
<a id=""facebookbtn-link"" title=""send to Facebook""
href=""http://www.facebook.com/sharer.php?u=http://site.com/product/komM8k""
onclick=""return popup(this)"" ><img src=""http://site/img/facebook.png"" alt=""Facebook"" />Post on Facebook</a>";

Console.WriteLine (Regex.Match(data, @"(?:\>)(?<PDF>[^\.]+\.pdf)(?:\<)").Groups["PDF"].Value);

// blabla.pdf is outputed 
```

**编辑**：匹配任何文件使用（*注意命名的分组更改远离 PDF*）

```
Regex.Match(data, @"(?:\>)(?<File>[^\.]+\.[a-z]{3})(?:\</a\>)").Groups["File"].Value 
```

# php - 正则表达式匹配名字与先生或夫人的称呼

> ID：13056924
> 
> 赞同：0
> 
> 时间：2012-10-24T20:11:22.397
> 
> 标签：php, regex, validation, preg-match, expression

谷歌没有太多帮助，所以我希望这里有人可以帮助我？

`preg_match(‘^(MR|MRS)./s[a-z]/s[a-z]$/i’, $_POST[‘fullname’])`

我需要一个正则表达式，它允许名字带有先生或夫人的称呼，后跟两个由任意数量的空格分隔的文本字符串。我的不工作，我不知道为什么。先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T20:15:57.280

正则表达式是无效的语法，它需要以相同的分隔符开始和结束：

```
preg_match(‘/^mrs?\.\s+[a-z]+\s+[a-z]+$/i’, $_POST[‘fullname’])
............^..........................^ 
```

但是要知道，这是一个脆弱的正则表达式使用 -有多个名字，使用中间名，或者有双桶姓氏，或者在你的名字中有重音 - 例如 Zöe*并不少见。*

## 正则表达式解释

```
/ - start regex
^mr - string starts with mr
s? - optional "s"
\. - period
\s+ - 0 or more whitespace chars (tabs or spaces)
[a-z]+ - 0 or more letters
\s+ - 0 or more whitespace chars (tabs or spaces)
[a-z]+ - 0 or more letters
$ - end of string
/ - end of regex
i - whole regex is case insensitive. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-11T17:30:05.600

> [AZ]?[a-zA-Z]{1,30}[ ]?[.]?[']?[ ]?[a-zA-Z]{1,30}[ ]?[.]?[ ']?[ ]?[a-zA-Z]{0,30}[ ]?[a-zA-Z]{0,30}

适用于以下名称：

*   詹姆斯·马修博士
*   詹姆斯·马修
*   博士。詹姆斯·马修·约翰
*   詹姆斯先生
*   真的吗

还有很多...

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-24T20:14:53.957

尝试这个 ：

```
preg_match("/^(MR|MRS)\.?(\s*\w*)+$/i", $_POST[‘fullname’]) 
```

如果点不是可选的..删除“？”

# linux - 意外“完成”附近的 shell 脚本语法错误

> ID：13056926
> 
> 赞同：0
> 
> 时间：2012-10-24T20:11:42.143
> 
> 标签：linux, bash

嗨，我是 linux 新手，需要关于我正在编写的 shell 脚本的帮助，以自动查找 ftp 服务器的 ip 并将文件复制到它们。这是我的代码，但运行时出错

```
USER=anonymous
PWD=any
PORTCHECK="1"
for IP in 'sqe 6 250';
do
PORTCHECK= nmap -p21 -oG - 192.168.1.$IP | grep '21/open'
if [$PORTCHECK != "1" ]; then
ftp -p -n -i -v 192.168.1.$IP
user $USER $PWD
cd "Mounted Volume"
put foo
put bar
bye
if
CHECKPORT="1"
done 
```

错误是

```
./newscrpt: line 19: syntax error near unexpected token `done'
./newscrpt: line 19: `done' 
```

这是用于在重新安装后将文件复制到多个 WinCE 媒体系统请帮助我无法解决

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T20:12:50.373

你的意思是说`fi`而不是我认为的`if`上面。`CHECKPORT`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T20:14:06.110

如果您查看[if](http://www.thegeekstuff.com/2010/06/bash-if-statement-examples/)语句的结构，您会注意到它们需要 a`then`和`fi`。见下图：

```
if [ conditional expression ]
then
    //stuff 
fi 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T20:18:01.293

而不是编写`for IP in 'sqe 6 250';`（用 破坏的代码`seq`），使用：

```
for IP in {6..250} 
```

# sql - 第 1 行第 4 列（年份）的批量加载数据转换错误（指定代码页的类型不匹配或无效字符）

> ID：13056929
> 
> 赞同：25
> 
> 时间：2012-10-24T20:11:49.860
> 
> 标签：sql, sql-server, tsql

当我尝试将文本文件导入数据库时​​出现转换错误。以下是我收到的错误消息：

第 1 行第 4 列（年份）的批量加载数据转换错误（指定代码页的类型不匹配或无效字符）。

这是我的查询代码：

```
CREATE TABLE Students
(
    StudentNo    Integer NOT NULL Primary Key,
    FirstName    VARCHAR(40) NOT NULL,
    LastName     VARCHAR(40) NOT NULL,
    Year         Integer,
    GPA          Float NULL
); 
```

这是来自文本文件的示例数据：

```
100,Christoph,Van Gerwen,2011
101,Anar,Cooke,2011
102,Douglis,Rudinow,2008 
```

我想我知道问题出在哪里。下面是我的批量插入代码：

```
use xta9354
bulk insert xta9354.dbo.Students
from 'd:\userdata\xta9_Students.txt' 
with (fieldterminator = ',',rowterminator = '\n') 
```

对于示例数据，Year 属性之后没有“，”，即使 Year 之后还有另一个属性 Grade 为 NULL

有人可以告诉我如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-10-24T20:54:25.360

尝试使用[格式文件](https://docs.microsoft.com/en-us/sql/relational-databases/import-export/create-a-format-file-sql-server?view=sql-server-2017)，因为您的数据文件只有 4 列。否则，请尝试`OPENROWSET`或使用临时表。

`myTestFormatFiles.Fmt`可能看起来像：

```
9.0
4
1 SQLINT 0 3 "," 1 学生号 ""
2 SQLCHAR 0 100 "," 2 名字 SQL_Latin1_General_CP1_CI_AS
3 SQLCHAR 0 100 "," 3 姓 SQL_Latin1_General_CP1_CI_AS
4 SQLINT 0 4 "\r\n" 4 年 "
```

[![](../Images/401cdb633a24c541d484359b7f0c67a4.png)](https://i.stack.imgur.com/W3Me6.gif)
[（来源：[microsoft.com](http://i.msdn.microsoft.com/dynimg/IC45684.gif)）]

关于跳过列的[本教程](https://web.archive.org/web/20170911131734/http://bidn.com:80/blogs/marcoadf/bidn-blog/2479/bulk-insert-format-file-skip-column)`BULK INSERT`也可能会有所帮助。

您的陈述将如下所示：

```
USE xta9354
GO
BULK INSERT xta9354.dbo.Students
    FROM 'd:\userdata\xta9_Students.txt' 
    WITH (FORMATFILE = 'C:\myTestFormatFiles.Fmt') 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2016-08-18T16:10:25.347

In my case, I was dealing with a file that was generated by hadoop on a linux box. When I tried to import to sql I had this issue. The fix wound up being to use the hex value for 'line feed' 0x0a. It also worked for bulk insert

```
bulk insert table from 'file' 
WITH (FIELDTERMINATOR = ',', ROWTERMINATOR = '0x0a') 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-09-25T15:14:31.280

我们也使用批量插入。我们上传的文件是从外部方发送的。经过一段时间的故障排除后，我意识到他们的文件中有带逗号的列。只是另一件事要寻找...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-05-01T06:47:55.120

上述选项也适用于 Google 大查询文件。我将表格数据导出到 goodle 云存储并从那里下载。在将相同的内容加载到 sql server 时遇到此问题，并且在将行分隔符指定为后可以成功加载文件

```
ROWTERMINATOR = '0x0a' 
```

还要注意标题记录并指定

```
FIRSTROW = 2 
```

我从 google bigquery 导出数据文件的最后一个块如下所示。

```
BULK INSERT TABLENAME
        FROM 'C:\ETL\Data\BigQuery\In\FILENAME.csv'
        WITH
        (
         FIRSTROW = 2,
         FIELDTERMINATOR = ',',  --CSV field delimiter
         ROWTERMINATOR = '0x0a',--Files are generated with this row terminator in Google Bigquery
         TABLOCK
        ) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-02-23T21:35:20.717

添加了对文件夹、diskadmin 和 bulkadmin 服务器角色的 MSSQLSERVER 完全访问权限。

在我的 c# 应用程序中，在准备批量插入命令时，

```
string strsql = "BULK INSERT PWCR_Contractor_vw_TEST FROM '" + strFileName + "' WITH (FIELDTERMINATOR = ',', ROWTERMINATOR = '\\n')"; 
```

我收到此错误 - 第 1 行第 8 列（状态）的批量加载数据转换错误（指定代码页的类型不匹配或无效字符）。

我查看了我的日志文件，发现终止符变成了 ' ' 而不是 '\n'。链接服务器“(null)”的 OLE DB 提供程序“BULK”报告了错误。提供者没有提供有关该错误的任何信息：

```
Cannot fetch a row from OLE DB provider "BULK" for linked server "(null)". Query :BULK INSERT PWCR_Contractor_vw_TEST FROM 'G:\NEWSTAGEWWW\CalAtlasToPWCR\Results\parsedRegistration.csv' WITH (FIELDTERMINATOR = ',', **ROWTERMINATOR = ''**) 
```

所以我为行终结符添加了额外的转义符 - 字符串 strsql = "BULK INSERT PWCR_Contractor_vw_TEST FROM '" + strFileName + "' WITH (FIELDTERMINATOR = ',', **ROWTERMINATOR = '\\n'** )";

现在它插入成功。

```
Bulk Insert SQL -   --->  BULK INSERT PWCR_Contractor_vw_TEST FROM 'G:\\NEWSTAGEWWW\\CalAtlasToPWCR\\Results\\parsedRegistration.csv' WITH (FIELDTERMINATOR = ',', ROWTERMINATOR = '\n')
Bulk Insert to PWCR_Contractor_vw_TEST successful...  --->  clsDatase.PerformBulkInsert 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-06-23T10:26:25.323

我的猜测是这是一个编码问题，例如您的文件是 UTF-8，但 SQL 不会以应有的方式读取它，因此它会尝试将 100ÿ 或类似这些行的内容插入您的表中。

可能的修复：

1.  指定代码页
2.  使用 Powershell 更改源的编码

代码示例：

```
1.
BULK INSERT myTable FROM 'c:\Temp\myfile.csv' WITH (
  FIELDTERMINATOR = '£',
  ROWTERMINATOR = '\n',
  CODEPAGE = 'ACP' -- ACP corresponds to ANSI, also try UTF-8 or 65001 for Unicode
);

2.
get-content "myfile.csv" | Set-content -Path "myfile.csv" -Encoding String
# String = ANSI, also try Ascii, Oem, Unicode, UTF7, UTF8, UTF32 
```

# android - 移动到另一个活动时如何关闭活动？

> ID：13056931
> 
> 赞同：1
> 
> 时间：2012-10-24T20:11:56.693
> 
> 标签：android, android-activity

我正在构建一个简单的应用程序，它通过按下按钮并按下消息在通知栏中创建一条消息，我正在运行一个新的`Activity`. 当我`Activity`通过按回关闭然后再次运行它时，按下按钮什么也不做。我还创建了一个单例`NotificationManager`，以在第二个活动的 onCreate 方法中自动从通知栏中删除消息图标。看来我的单例类仍然存在，不能`Object`创建新的。我需要强制关闭活动，我相信只有这样我的单身课程才会被释放。我尝试`android:noHistory="true"`在两个 activitied 上进行设置，`manifest.xml`并在以下位置创建了这个`MainActivity`：

```
public void onContextMenuClosed(Menu menu) {
        super.onContextMenuClosed(menu);
        this.finish();
    } 
```

并在活动中尝试了这个`MessageViewer`：

```
public void onBackPressed() {
        super.onBackPressed();
        this.finish();
    } 
```

这是我的代码：

```
public class NotifyManager {
    private static NotificationManager notificationManager=null;

    public static NotificationManager getInstance() {
        if(notificationManager==null) {
            throw new NullPointerException("NotificationManager has not been set yet.");
        }
        else {
            return notificationManager;
        }
    }

    public static void setNotificationManager(NotificationManager nm) throws NotificationManagerException {
        if(notificationManager==null) {
            notificationManager = nm;
        }
        else {
            throw new NotificationManagerException("NotificationManager has already been set.");
        }
    }
}

public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        Button b = (Button) findViewById(R.id.button1);
        b.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                try {
                    NotificationManager nm = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);
                    NotifyManager.setNotificationManager(nm);
                    Notification notify = new Notification(
                            R.drawable.icon,
                            "New message", System.currentTimeMillis());
                    Context context = MainActivity.this;
                    CharSequence title = "You have a new message";
                    CharSequence details = "";
                    Intent intent = new Intent(context, MessageViewer.class);
                    PendingIntent pending = PendingIntent.getActivity(context, 0, intent, Intent.FLAG_ACTIVITY_NEW_TASK);
                    notify.setLatestEventInfo(context, title, details, pending);
                    nm.notify(0, notify);
                }
                catch(Exception e) {
                    e.printStackTrace();
                }
            }
        });
    } 
```

顺便说一句，在我的第二个活动中，我所做的就是关闭当前通知：

```
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_message_viewer);

        NotifyManager.getInstance().cancel(0);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T20:30:37.987

好吧，您必须使用不同的 id 创建不同的通知。在`nm.notify(0, notify);`你不能给每个通知相同的 id。因此，只需尝试为您创建的每个通知提供不同的通知 ID。希望它会奏效

# ruby-on-rails - 找不到回形针文件错误

> ID：13056932
> 
> 赞同：12
> 
> 时间：2012-10-24T20:11:58.897
> 
> 标签：ruby-on-rails, ruby, imagemagick, paperclip

我刚刚从回形针导轨插件切换到回形针宝石。该项目是一个 rails 2.3 应用程序，我使用的是回形针 2.7.2 gem。

我收到以下奇怪的错误：

```
identify: unable to open image `file': No such file or directory @ error/blob.c/OpenBlob/2617.
identify: no decode delegate for this image format `file' @ error/constitute.c/ReadImage/544. 
```

好像回形针正在寻找一个名为“文件”的文件，但我不知道为什么。我没有更改我们之前的任何代码。它曾经可以工作，我所做的只是升级到新版本并在插件上使用 gem。

有任何想法吗？

***更新***

这是回形针中的一个错误，它无法正确解析命令的内容。我深入研究了回形针的来源以找到：

```
def run(cmd, arguments = "", local_options = {})
  if options[:image_magick_path]
    Paperclip.log("[DEPRECATION] :image_magick_path is deprecated and will be removed. Use :command_path instead")
  end
  command_path = options[:command_path] || options[:image_magick_path]
  Cocaine::CommandLine.path = [Cocaine::CommandLine.path, command_path].flatten.compact.uniq
  local_options = local_options.merge(:logger => logger) if logging? && (options[:log_command] || local_options[:log_command])

  Cocaine::CommandLine.new(cmd, arguments, local_options).run
end 
```

和

```
# Uses ImageMagick to determing the dimensions of a file, passed in as either a
# File or path.
# NOTE: (race cond) Do not reassign the 'file' variable inside this method as it is likely to be
# a Tempfile object, which would be eligible for file deletion when no longer referenced.
def self.from_file file
  file_path = file.respond_to?(:path) ? file.path : file
  raise(Paperclip::NotIdentifiedByImageMagickError.new("Cannot find the geometry of a file with a blank name")) if file_path.blank?
  geometry = begin
               Paperclip.run("identify", "-format %wx%h :file", :file => "#{file_path}[0]")
             rescue Cocaine::ExitStatusError
               ""
             rescue Cocaine::CommandNotFoundError => e
               raise Paperclip::CommandNotFoundError.new("Could not run the `identify` command. Please install ImageMagick.")
             end
  parse(geometry) ||
    raise(NotIdentifiedByImageMagickError.new("#{file_path} is not recognized by the 'identify' command."))
end 
```

Paperclip.run 命令由于某种原因无法替换 :file 占位符。我通过在命令行上运行以下命令来验证这一点：

```
identify :file 
```

Monkey 手动修补替换会在发生类似情况时产生其他错误。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-24T22:34:06.690

好的，我设法解决了。

这是可卡因的问题。似乎回形针对可卡因有依赖性，只说它必须是可卡因 > 0.02。最新版本的可卡因 0.4.2（在撰写本文时）有一个不向后兼容的新 API。您需要降级到可卡因 0.3.2。

只需在回形针之前将其放入您的 Gemfile 中：

```
gem "cocaine", "0.3.2" 
```

# c++ - 将 __attribute__ 与 typedef 一起使用

> ID：13056935
> 
> 赞同：6
> 
> 时间：2012-10-24T20:12:07.313
> 
> 标签：c++, visual-c++, macros, g++, typedef

如果问题看起来太明显或太简单，请道歉。不幸的是，在经历了一堆线程并在谷歌上搜索 typedef 加上**属性**前缀之后，我仍然无法弄清楚。

我在（据称）便携式应用程序中有以下代码片段 -

```
#ifdef WIN32
#define MY_PREFIX __declspec(dllexport)
#else
#define MY_PREFIX __attribute__((visibility("default")))
#endif

typedef MY_PREFIX bool some_func(void); 
```

所以我的问题是 -
1) typedef 到底在做什么？
2) 代码在 VS2008 上编译得很好，但在 G++ (gcc-4.1) 上，我收到警告“'visibility' 属性被忽略”
有什么办法可以删除该警告吗？（省略 -Wattributes 不是一种选择）

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-24T20:47:35.117

函数类型的 GCC`visibility`属性中的 AFAIK 不能“包装”到 typedef-ed 类型。编译器假定此`visibility`属性适用于 typedef-name 本身。并且 GCC 不支持`visibility`typedef 名称（而且它也不是你需要的）。

我想说的是，与其尝试将`declspec`/包装`attribute`到 typedef 中，不如在函数声明时明确指定它。如在

```
#ifdef WIN32
#define MY_PREFIX __declspec(dllexport)
#else
#define MY_PREFIX __attribute__((visibility("default")))
#endif

typedef bool some_func(void);

MY_PREFIX some_func foo; // <- actual declaration 
```

当然，这会使 make 不那么干净，因为`MY_PREFIX`现在应该在每个函数声明中指定它，而不是在 typedef 中指定一次。但这可能是使它工作的唯一方法，除非我错过了什么。

# java - 如何以编程方式更新 JSF 中的图表？

> ID：13056936
> 
> 赞同：0
> 
> 时间：2012-10-24T20:12:15.070
> 
> 标签：java, jsf, primefaces

我有一个 JSF 应用程序，在哪里

*   用户按下按钮，然后
*   一个新的数据项被添加到图表和
*   图表应重新绘制。

重新绘制图表的正确方法是什么？

目前，我在托管 bean 中有以下代码，它处理按钮按下事件：

```
public void simulateYearButtonAction() 
{
    // Update other UI elements here

    this.updateChart();
}

private void updateBirthsChart() {
    final FacesContext context = FacesContext.getCurrentInstance();
    final ChartBean bean =
            (ChartBean) context.getApplication().evaluateExpressionGet(
                    context, "#{chartBean}", ChartBean.class);
    final DataStore dataStore = (DataStore)this.simulationFacade;
    bean.addBirthsData(this.year-1, dataStore.getValue(DataStoreValueType.BIRTHS_LAST_YEAR));
} 
```

在`ChartBean`我向图表系列添加一个新数据项

```
public ChartBean() {  
    createCategoryModel();  
}  
private void createCategoryModel() {  
    categoryModel = new CartesianChartModel();  

    birthsSeries = new ChartSeries();
    birthsSeries.setLabel("Рождения");

    birthsSeries.set(2012, 0);
    categoryModel.addSeries(birthsSeries);
}  

public void addBirthsData(final int aYear, final double aNumberOfBirths) {
    this.birthsSeries.set(aYear, aNumberOfBirths);
} 
```

该页面`ChartBean`以这种方式使用：

```
<p:lineChart id="category" value="#{chartBean.categoryModel}"
    legendPosition="e" title="Демографическая динамика" minX="2012" maxX="2112"
    style="height:300px;margin-top:20px" /> 
```

我不知道如何告诉图表它现在应该更新（并显示新数据）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T20:52:01.897

当按下按钮时，将调用 backing bean 方法，该方法将重建您的图表。`update="category"`包含图表的操作完成后将更新：

```
<p:commandButton actionListener=#{chartBean.refreshCategoryModel()}
                 update="category"/> 
```

在你的支持bean中：

```
public void refreshCategoryModel() {
    createCategoryModel();
}

private void createCategoryModel() {  
    categoryModel = new CartesianChartModel();  

    birthsSeries = new ChartSeries();
    birthsSeries.setLabel("Рождения");

    birthsSeries.set(2012, 0);
    categoryModel.addSeries(birthsSeries);
} 
```

新生成的图表可能取决于一些动态值。当你`process`调用你的`<p:commandButton/>`.

您可能会发现以下帖子[https://stackoverflow.com/a/12929296/407466](https://stackoverflow.com/a/12929296/407466)很有用。

# c# - 使用 int 而不是没有十进制数的 float 有什么优势吗？

> ID：13056938
> 
> 赞同：5
> 
> 时间：2012-10-24T20:12:21.547
> 
> 标签：c#, floating-point, int

当您要存储的数字不是十进制数时，使用 int 而不是 float 有什么好处吗？

例如。

```
int number = 10;
float number = 10; 
```

为什么我要在这里使用 int 而不是 float？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-24T20:14:16.813

是的，有很多优点。

*   s上的算术运算`int`要快得多。
*   `int`s 永远不会遭受精度损失。
*   阅读您的代码的人会知道该变量实际上是一个整数。
*   不可能意外地将非整数放入变量中

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-24T20:14:33.310

一方面是因为 int 数学更快。一个更好的问题是为什么要使用类型 A 来表示你知道是类型 B 的东西？

一般来说，您应该使用与您要表示的内容相匹配的类型

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-24T20:46:02.467

1.  整数更快
2.  当您声明大量整数时，整数可能会节省内存（但这也取决于其他因素）
3.  概念性的，例如人数不能浮动对吧？！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-24T20:22:39.530

*   Int 计算速度更快
*   Int 在它适用的范围内是准确的
*   浮点数的可能值范围更大，精度更低（从 -2147483648 到 2147483647 的整数）（从 -3.402823E+38 到 3.402823E+38 的浮点数）

# c# - EF orderby / thenby 组合扩展方法

> ID：13056943
> 
> 赞同：5
> 
> 时间：2012-10-24T20:12:48.567
> 
> 标签：c#, linq, entity-framework, linq-to-entities, linq-expressions

我希望能够`firstby / thenby`按如下方式应用组合排序：

```
allOrders().sort(s => s.ProductName, s => s.OrderDate) 
```

所以以[这篇文章为灵感](https://stackoverflow.com/a/5376637/1711500)，我写了这个扩展方法，编译得很好：

```
public static IQueryable<T> sort<T>(this IQueryable<T> entities, params 
  Expression<Func<T, object>>[] predicates) where T : class 
{
  var sorted = entities.OrderBy(predicates[0]);
  for (int i = 1; i < predicates.Length; i++)
    sorted = sorted.ThenBy(predicates[i]);

  return sorted;
} 
```

而且我还尝试了这个简洁的版本，它也可以编译：

```
public static IQueryable<T> sort<T>(this IQueryable<T> entities, params 
  Expression<Func<T, object>>[] predicates) where T : class
{
  return predicates.Skip(1).Aggregate(
    entities.OrderBy(predicates[0]),
    (aggregate, currentPredicate) => aggregate.ThenBy(currentPredicate));
} 
```

但是，如果我尝试按 a 排序，则会`DateTime`收到此异常：

> *无法将类型“System.DateTime”转换为类型“System.Object”。LINQ to Entities 仅支持转换 EDM 基元或枚举类型。*

我究竟做错了什么？我正在使用 EF5。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T20:27:09.790

当您从返回 的 lambda 表达式返回值类型（例如`int`or ）时，编译器会生成一个调用以将该值类型转换为装箱对象。 `DateTime``object``Box()`

实体框架表达式解析器无法处理此框表达式。
唯一的解决方案是传递一个返回值类型的强类型 lambda 表达式。

为此，您可能会误用集合初始化器：

```
public class OrderingCollection<TEntity> : IEnumerable {
    public void Add<TProperty>(Expression<Func<TEntity, TProperty>>) {
        ...
    }
}

public static IQueryable<T> Sort<T>(this IQueryable<T> entities, 
                                    OrderingCollection<T> o) where T : class {
    ...
}

q = q.Sort(new OrderingCollection { s => s.ProductName, s => s.OrderDate }); 
```

集合初始值设定项允许您对任意数量的不同类型参数使用类型推断。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T20:29:39.650

我认为您的问题在于`Func<T, object>`. 这意味着无论您对什么进行排序，您都将返回一个对象，而 EF 无法将其映射到数据库列类型。

该`OrderBy()`函数同时接受 a`TSource`和 a `TKey`，因此您需要为每种排序提供键类型，这很快就会失控（请参阅 参考资料[`Tuple<T1,T2,T3,T4,T5,T6,T7,T8>`](http://msdn.microsoft.com/en-us/library/dd386921.aspx)）。

# java - 嵌入式资源（媒体文件）在 jmf ，Netbeans 中播放，但在制作项目的 jar 后，视频无法播放

> ID：13056944
> 
> 赞同：2
> 
> 时间：2012-10-24T20:12:48.273
> 
> 标签：java, swing, netbeans, embedded-resource, jmf

我在 jar 文件中嵌入资源（媒体文件）时遇到问题。`JButton`我所做的是我创建了一个 java 播放器，当我选择它时将播放`URL`媒体java文件位于，也就是说，当我制作一个jar并将其分发给我的客户时，他们也可以播放视频文件，因为所有资源都嵌入在jar中，所以当我在Netbeans中运行应用程序时一切正常，但是当我制作一个 jar 文件，当所有资源都打包在 jar 中时，它也不会播放媒体文件。

下面是我的源代码，其中包含 main

**Manish.java**

```
package javamedia;

import java.awt.Color;
import java.awt.event.ActionListener;
import java.net.URL;
import javax.swing.JButton;
import java.awt.event.ActionEvent;
import javax.swing.ImageIcon;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;

public class Manish implements ActionListener {

    JButton btn1, btn2, btn3, btn4, btn5, btn6, btn7, btn8, btn9, btn10, btn11, btn12;
    JFrame frame;
    JLabel label;
    JPanel panel;
    ImageIcon img1;
    boolean flag = true;

    public Manish() {
        frame = new JFrame();
        panel = new JPanel();
        panel.setLayout(null);
        frame.setSize(800, 500);
        frame.setTitle("Practical Video's");
        panel.setBackground(Color.GRAY);
        //label settng
        label.setBounds(0, 0, 785, 75);
        panel.add(label);
        btn1.setBounds(500, 100, 100, 25);
        panel.add(btn1);
        btn1.addActionListener(this);
        frame.add(panel);
        frame.setVisible(true);

    }

    public static void main(String[] args) {
        new Manish();
    }

    public void actionPerformed(ActionEvent evt) {
        Client2 cl;
        if (evt.getSource() == btn1) {
            cl = new Client2();

            URL mediaURL = this.getClass().getResource("resources/z.mpg");
            String file = mediaURL.toString();

            cl.show();
            cl.VedioAudioPlayer(file);
        }

    }
} 
```

**Client2.java**（播放器代码）

```
 package javamedia;

 import java.util.*;
 import java.net.*;
 import java.io.*;
 import javax.media.*;
 import javax.swing.*;

import java.awt.*;
 public class Client2 extends javax.swing.JFrame implements
        ControllerListener, Runnable {

    String filepath;
    Player player;
    Component visualComponent;
    Component controlComponent;
    Component progressBar;
    boolean firstTime;
    long CachingSize;
    int controlPanelHeight;
    int videoWidth;
    int videoHeight;

    /**
     * Creates new form Client2
     */
    public Client2() {
        initComponents();
// setBounds(50,50,880,600);
        setBounds(0, 0, 400, 325);

    }

    public void run() {
        while (true) {
        }
    }

    private void initComponents() {//GEN-BEGIN:initComponents
        jPanel1 = new javax.swing.JPanel();
        getFile = new javax.swing.JButton();
        panel = new java.awt.Panel();
        getContentPane().setLayout(null);
        setTitle("Falcon Video Player");
        addWindowListener(new java.awt.event.WindowAdapter() {
            public void windowClosing(java.awt.event.WindowEvent evt) {
                exitForm(evt);
            }
        });

        jPanel1.setLayout(null);
        jPanel1.setBackground(new java.awt.Color(51, 51, 51));
        getFile.setBackground(new java.awt.Color(204, 255, 204));
        getFile.setForeground(new java.awt.Color(51, 51, 255));
        getFile.setText("PlayFile");
        getFile.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                getFileActionPerformed(evt);
            }
        });

        getFile.setBounds(260, 130, 72, 26);
        panel.setLayout(null);
        panel.setName("panel");
        jPanel1.add(panel);
        panel.setBounds(15, 15, 700, 650);
        getContentPane().add(jPanel1);
        jPanel1.setBounds(0, 0, 880, 580);

        pack();
    }

    private void FilesActionPerformed(java.awt.event.ActionEvent evt) {
    }

    private void peersActionPerformed(java.awt.event.ActionEvent evt) {
    }

    private void ExitButtonActionPerformed(java.awt.event.ActionEvent evt) {
        System.exit(0);
    }

    private void getFileActionPerformed(java.awt.event.ActionEvent evt) {
    }

    /**
     * Exit the Application
     */
    private void exitForm(java.awt.event.WindowEvent evt) {//GEN-FIRST:event_exitForm
        player.stop();
        new Manish().frame.setVisible(false);

    }

    public void VedioAudioPlayer(String file) {

        System.out.println("The Asking File is ready to Play");
        player = null;
        visualComponent = null;
        controlComponent = null;
        progressBar = null;
        firstTime = true;
        CachingSize = 0L;
        controlPanelHeight = 0;
        videoWidth = 0;
        videoHeight = 0;
        filepath = file;
        init(filepath);

    }

    public void init(String filepath) {

        MediaLocator medialocator = null;
        Object obj = null;
        if (filepath == null) {
            Fatal("Invalid media file parameter");
        }
        try {
            if ((medialocator = new MediaLocator(filepath)) == null) {
                Fatal("Can't build URL for " + filepath);
            }
            try {
                player = Manager.createPlayer(medialocator);
                player.start();
                player.addControllerListener(this);
                player.realize();
            } catch (NoPlayerException noplayerexception) {
                System.out.println(noplayerexception);
                Fatal("Could not create player for " + medialocator);
            }

        } catch (MalformedURLException _ex) {
            Fatal("Invalid media file URL!");
        } catch (IOException _ex) {
            Fatal("IO exception creating player for " + medialocator);
        }
    }

    public synchronized void controllerUpdate(ControllerEvent controllerevent) {
        if (player == null) {
            return;
        }
        if (controllerevent instanceof RealizeCompleteEvent) {
            if (progressBar != null) {
                panel.remove(progressBar);
                progressBar = null;
            }
            int i = 320;
            int j = 0;
            if (controlComponent == null && (controlComponent = player.getControlPanelComponent())
                    != null) {
                controlPanelHeight = controlComponent.getPreferredSize().height;
                panel.add(controlComponent);
                j += controlPanelHeight;
            }
            if (visualComponent == null && (visualComponent = player.getVisualComponent()) != null) {
                panel.add(visualComponent);
                Dimension dimension = visualComponent.getPreferredSize();
                videoWidth = dimension.width;
                videoHeight = dimension.height;
                i = videoWidth;
                j += videoHeight;
                visualComponent.setBounds(0, 0, videoWidth, videoHeight);
            }
            if (controlComponent != null) {
                controlComponent.setBounds(0, videoHeight, i, controlPanelHeight);
                controlComponent.invalidate();
            }
        } else if (controllerevent instanceof CachingControlEvent) {
            if (player.getState() > 200) {
                return;
            }
            CachingControlEvent cachingcontrolevent = (CachingControlEvent) controllerevent;
            CachingControl cachingcontrol = cachingcontrolevent.getCachingControl();
            if (progressBar == null && (progressBar = cachingcontrol.getControlComponent()) != null) {
                panel.add(progressBar);
                panel.setSize(progressBar.getPreferredSize());
                validate();
            }
        } else if (controllerevent instanceof EndOfMediaEvent) {
            player.setMediaTime(new Time(0L));
            player.stop();
        } else if (controllerevent instanceof ControllerErrorEvent) {
            player = null;
            Fatal(((ControllerErrorEvent) controllerevent).getMessage());
        } else if (controllerevent instanceof ControllerClosedEvent) {
            panel.removeAll();
        }
    }

    void Fatal(String s) {
        System.err.println("FATAL ERROR: " + s);
        throw new Error(s);
    }

    public void destroy() {
        if (player != null) {
            player.close();
        }
    }

    public void start() {
        if (player != null) {
            player.start();
        }
    }

    public void stop() {
        if (player != null) {
            player.stop();
            player.deallocate();
        }
    }
    private javax.swing.JButton getFile;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JPanel jPanel1;
    public java.awt.Panel panel;
    // End of variables declaration//GEN-END:variables
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-28T21:46:11.983

首先确保您的资源确实正确打包在 jar 文件中。然后请记住，当从 jar 中读取文件时，情况可能会略有不同。我认为问题出在以下几行。

```
URL mediaURL = this.getClass().getResource("resources/z.mpg");
String file = mediaURL.toString(); 
```

mediaURL.toString() 可能不是一个合适的解决方案。也许您应该考虑将 InputStream 获取到文件中，例如：

```
URL mediaURL = getClass().getResource("/resources/z.mpg"); 
InputStream file = mediaURL.openStream(); 
```

然后尝试使用 String 的 InputStream 来引用你想要的资源

# xml - 为什么我的 OWL 推理器没有给我预期的结果？

> ID：13056952
> 
> 赞同：3
> 
> 时间：2012-10-24T20:13:43.353
> 
> 标签：xml, rdf, owl, inference-engine

嗨语义网的人，

`<rdf:type rdf:resource='#Tsunami'>`在推断以下 OWL 代码后，我不希望在 NamedIndividual: instance_Dromen 中有。不知何故，#Huis 和 #Auto 之间的不相交有问题，或者我没有以正确的方式使用补全？在推理器的结果中，NamedIndividual: instance_Dromen 具有以下输出：

--

```
<rdf:Description rdf:about="http://www.almfluss.com/rdf/0.1/Ontology.owl#instance_Dromen">
    <owl:sameAs rdf:resource="http://www.almfluss.com/rdf/0.1/Ontology.owl#instance_Dromen"/>
    <rdf:type rdf:resource="http://www.almfluss.com/rdf/0.1/Ontology.owl#Wielen"/>
    <rdf:type rdf:resource="http://www.almfluss.com/rdf/0.1/Ontology.owl#Auto"/>
    <rdf:type rdf:resource="http://www.almfluss.com/rdf/0.1/Ontology.owl#Onderstel"/>
    <rdf:type rdf:resource="http://www.almfluss.com/rdf/0.1/Ontology.owl#Tsunami"/>
    <rdf:type rdf:resource="http://www.w3.org/2002/07/owl#Thing"/>
    <rdf:type rdf:resource="http://www.almfluss.com/rdf/0.1/Ontology.owl#Dromen"/>
  </rdf:Description> 
```

* * *

我用作推理器输入的 OWL 代码是：

* * *

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>

<!DOCTYPE rdf:RDF [
    <!ENTITY owl "http://www.w3.org/2002/07/owl#" >
    <!ENTITY swrl "http://www.w3.org/2003/11/swrl#" >
    <!ENTITY swrlb "http://www.w3.org/2003/11/swrlb#" >
    <!ENTITY xsd "http://www.w3.org/2001/XMLSchema#" >
    <!ENTITY rdfs "http://www.w3.org/2000/01/rdf-schema#" >
    <!ENTITY rdf "http://www.w3.org/1999/02/22-rdf-syntax-ns#" >
    <!ENTITY Ontology201210 "http://www.almfluss.com/rdf/0.1/Ontology.owl#" >
]>

    <rdf:RDF    xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" 
                xmlns="http://www.almfluss.com/rdf/0.1/Ontology.owl#" 
                xmlns:Ontology201210="http://www.almfluss.com/rdf/0.1/Ontology.owl#" 
                xmlns:owl="http://www.w3.org/2002/07/owl#" 
                xmlns:rdfs="http://www.w3.org/2000/01/rdf-schema#" 
                xmlns:swrl="http://www.w3.org/2003/11/swrl#" 
                xmlns:swrlb="http://www.w3.org/2003/11/swrlb#" 
                xmlns:xsd="http://www.w3.org/2001/XMLSchema#" 
                xml:base="http://www.almfluss.com/rdf/0.1/Ontology.owl#">

    <owl:DatatypeProperty rdf:about="#hasValue"/>

    <owl:Class rdf:about="#Dromen">
        <owl:equivalentClass>
            <owl:Class>
                <owl:unionOf rdf:parseType="Collection">
                    <rdf:Description rdf:about="#Huis"/>
                    <rdf:Description rdf:about="#Auto"/>
                </owl:unionOf>
            </owl:Class>
        </owl:equivalentClass>
        <owl:equivalentClass>
            <owl:Class>
                <owl:complementOf rdf:resource="#Werkloos"/>
            </owl:Class>
        </owl:equivalentClass>
        <owl:equivalentClass>
            <owl:Class>
                <owl:complementOf rdf:resource="#Arbeidsongeschikt"/>
            </owl:Class>
        </owl:equivalentClass>

    </owl:Class>
    <owl:NamedIndividual rdf:about="#instance_Dromen">
                <rdf:type rdf:resource="#Wielen"/>
                <rdf:type rdf:resource="#Onderstel"/>
    </owl:NamedIndividual>

    <owl:Class rdf:about="#Huis">
        <owl:equivalentClass>
            <owl:Class>
                <owl:complementOf rdf:resource="#Tsunami"/>
            </owl:Class>
        </owl:equivalentClass>
    </owl:Class>
    <owl:NamedIndividual rdf:about="#instance_Huis"/>

    <owl:Class rdf:about="#Auto">
        <owl:equivalentClass>
            <owl:Class>
                <owl:intersectionOf rdf:parseType="Collection">
                    <rdf:Description rdf:about="#Wielen"/>
                    <rdf:Description rdf:about="#Onderstel"/>
                </owl:intersectionOf>
            </owl:Class>
        </owl:equivalentClass>
        <owl:disjointWith rdf:resource="#Huis"/>
    </owl:Class>
    <owl:NamedIndividual rdf:about="#instance_Auto"/>

    <owl:Class rdf:about="#Werkloos">
        <owl:equivalentClass>
            <owl:Class>
                <owl:unionOf rdf:parseType="Collection">
                    <rdf:Description rdf:about="#ZelfOntslag"/>
                    <rdf:Description rdf:about="#Ontslagen"/>
                </owl:unionOf>
            </owl:Class>
        </owl:equivalentClass>
    </owl:Class>
    <owl:NamedIndividual rdf:about="#instance_Werkloos"/>

    <owl:Class rdf:about="#Arbeidsongeschikt"/>
    <owl:NamedIndividual rdf:about="#instance_Arbeidsongeschikt"/>

    <owl:Class rdf:about="#Wielen"/>
    <owl:NamedIndividual rdf:about="#instance_Wielen"/>

    <owl:Class rdf:about="#Onderstel"/>
    <owl:NamedIndividual rdf:about="#instance_Onderstel"/>

    <owl:Class rdf:about="#Ontslagen"/>
    <owl:NamedIndividual rdf:about="#instance_Ontslagen"/>

    <owl:Class rdf:about="#ZelfOntslag"/>
    <owl:NamedIndividual rdf:about="#instance_ZelfOntslag"/>

    <owl:Class rdf:about="#Tsunami"/>
    <owl:NamedIndividual rdf:about="#instance_Tsunami"/>
    </rdf:RDF> 
```

* * *

我希望有人能帮助我。

提前致谢。

问候， Martijn van der Plaat

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T12:13:22.140

你的本体很乱，比如你说Auto和Huis是不相交的，但是Dromen相当于Huis和Auto的结合。

如果您是手写，请停止。去获取[Protege 4](http://protege.stanford.edu/)并用它来创作你的本体。除了更容易编写本体之外，它还与各种推理器集成，因此您可以直接在 GUI 中检查一致性和可满足性。您还可以使用解释工具来告诉您为什么做出特定的推论。

最后，几乎总是需要 subClassOf 而不是等价物。等价在关系中是双向的，这通常不是作者的意图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T21:17:25.527

我同意@Michael 写的。关于将 OWL 代码作为（Stackoverflow）问题的一部分呈现的一些一般要点：

*   使用人类可读的语法，即避免使用 XML 并避免使用 RDF（你同时使用了...），因为两者对于人际交流来说都是不必要的冗长
*   用简单的英语解释每个公理背后的意图
*   使用英文实体名称（Stackoverflow 用户中并未广泛使用荷兰语）
*   删除不相关的内容（例如，在这种情况下为 SWRL 命名空间前缀）

在这些更改之后，您可能只剩下几行代码，并且它的问题可能会立即显现出来......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T23:45:31.503

你的`instance_Dromen`（从现在起叫它`i`，为简洁起见）被定义为 type`Wielen`和 type `Onderstel`。导致它是 type`Tsunami`的原因如下：

1.  您已将类定义为与`Auto`的交集等价，因此推断为类型。`Wielen``Onderstel``i``Auto`
2.  因为`i`is 是 type `Auto`，我们知道它不是 type `Huis`（因为这两个类被定义为不相交的）。
3.  由于`Tsunami`被定义为`Huis`（即所有不是 a 的`Huis`都是 a `Tsunami`）的补集，并且`i`不属于 类型`Huis`，我们可以推断它`i`是 a `Tsunami`。

更简洁地说，你的本体建模方式导致每个`Auto`存在`Tsunami`.

# jquery - JQuery，按顺序加载图像

> ID：13056956
> 
> 赞同：1
> 
> 时间：2012-10-24T20:13:52.870
> 
> 标签：jquery, image, colorbox

我在我的照片博客中使用了 Colorbox、Masonry 和 Infinite-scroll。一切正常，但我想让它工作得更好......

我加载了一个链接到一些隐藏的 div 的缩略图列表，其中包含我用颜色框显示的更大的图像。像这样的东西：

```
<a href="colorbox"><img thumbnail></a>
<hidden div><img bigger image></div> 
```

所有缩略图都由 Masonry 排序，问题是我必须先加载所有较大的图像，然后 Masonry 才能对缩略图进行排序！有没有办法只在 colorbox 调用之后加载更大的图像？

该网站是这样的：[http ://www.photocracy.eu/](http://www.photocracy.eu/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T19:10:37.363

我以这种方式解决了：我使用`<img rel="url">`而不是生成页面的 html `<img src="url">`。当我必须加载大图像时，我将 src 替换为 rel 参数。通过这种方式，浏览器不会加载所有图像，而只会加载我想要加载的图像。

# c++ - C++：从图像的透明度创建多边形

> ID：13056959
> 
> 赞同：1
> 
> 时间：2012-10-24T20:14:08.643
> 
> 标签：c++, image, algorithm, polygon

好吧，伙计们..
我在这里不知所措。我一直在尝试将图像编码为多边形转换器，但无济于事，这真的让我很烦。它应该从图像的透明度创建一个多边形（非透明部分是多边形）。我见过这样做的程序，但它们是封闭源代码并且非常昂贵。这不仅仅是边缘检测，它也是多边形泛化和孔检测，所有这些都在 Box2D 兼容的三角多边形中。
请给我一些提示，或库名称，或算法或其他东西..
谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T20:22:00.137

我建议查看 openCV 库。它有几种有用的图像处理算法和工具。我认为你可以用它来实现你的目标。祝你好运。

# javascript - Jquery .append() 将输出截断到 div

> ID：13056960
> 
> 赞同：1
> 
> 时间：2012-10-24T20:14:09.263
> 
> 标签：javascript, jquery

在尝试将 html 代码转换为 SuperGenPass.com 源代码的符号时，我创建了一个小的 jquery 代码，只是为了对每个 %symbol 进行搜索并替换为八个 div，这将在每次传递后向我显示文本 - 请注意初始文本存储在底部（最后一个 div）：

```
<html>
  <head>
  <style type="text/css"><!--
    .hov {
        background:#FFFFFF;
    }

    .hov:hover {
        background:#FFFFDD;
        outline: 1px solid blue;
    }

    * html body {
        behavior:url(csshover3.htc);
    }
  --></style>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>   
<script type="text/javascript">
$(document).ready(function() {
   // do stuff when DOM is ready

     // get html content
    var content = $("#input").html();

    // make it print safe
    var safe = content.replace(/%20/g," ");
    $("#output1").append("%20 - ", safe);

    var safe = safe.replace(/%3C/g,"<");
    $("#output2").append("%3C - ", safe);

    var safe = safe.replace(/%3E/g,">");
    $("#output3").append("%3E - ", safe);

    var safe = safe.replace(/%2B/g,"+");
    $("#output4").append("%2B - ", safe);

    var safe = safe.replace(/%26/g,"&");
    $("#output5").append("%26 - ", safe);

    var safe = safe.replace(/%23/g,"#");
    $("#output6").append("%23 - ", safe);

    var safe = safe.replace(/%3F/g,"?");
    $("#output7").append("%3F -", safe);

    var safe = safe.replace(/%25/g,"%");
    $("#output8").append("%25 - ", safe);
});
</script> 

  </head>
  <body>
    <div id="output">http://jsfiddle.net/pWzWG/</div><div><br></div>
    <div id="output1" class="hov"></div><div><br></div>
    <div id="output2" class="hov"></div><div><br></div>
    <div id="output3" class="hov"></div><div><br></div>
    <div id="output4" class="hov"></div><div><br></div>
    <div id="output5" class="hov"></div><div><br></div>
    <div id="output6" class="hov"></div><div><br></div>
    <div id="output7" class="hov"></div><div><br></div>
    <div id="output8" class="hov"></div><div><br></div>
    <div id="input">(function(){function%20b64_md5(p){p=utf8_en(p);return%20binl2b64(core_md5(str2binl(p),p.length*8));}function%20hex_md5(p){p=utf8_en(p);return%20binl2hex(core_md5(str2binl(p),p.length*8));}function%20binl2b64(binarray){var%20tab='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz012345678998';var%20str='';for(var%20i=0;i%3Cbinarray.length*4;i+=3){var%20triplet=(((binarray[i%3E%3E2]%3E%3E8*(i%254))%260xFF)%3C%3C16)|(((binarray[i+1%3E%3E2]%3E%3E8*((i+1)%254))%260xFF)%3C%3C8)|((binarray[i+2%3E%3E2]%3E%3E8*((i+2)%254))%260xFF);for(var%20j=0;j%3C4;j++){str+=tab.charAt((triplet%3E%3E6*(3-j))%260x3F);}}return%20str;}function%20binl2hex(binarray){var%20hex_tab='0123456789abcdef';var%20str='';for(var%20i=0;i%3Cbinarray.length*4;i++){str+=hex_tab.charAt((binarray[i%3E%3E2]%3E%3E((i%254)*8+4))%260xF)+hex_tab.charAt((binarray[i%3E%3E2]%3E%3E((i%254)*8))%260xF);}return%20str;}function%20core_md5(x,len){x[len%3E%3E5]|=0x80%3C%3C((len)%2532);x[(((len+64)%3E%3E%3E9)%3C%3C4)+14]=len;var%20a=1732584193;var%20b=-271733879;var%20c=-1732584194;var%20d=271733878;for(var%20i=0;i%3Cx.length;i+=16){var%20olda=a;var%20oldb=b;var%20oldc=c;var%20oldd=d;a=md5_ff(a,b,c,d,x[i+0],7,-680876936);d=md5_ff(d,a,b,c,x[i+1],12,-389564586);c=md5_ff(c,d,a,b,x[i+2],17,606105819);b=md5_ff(b,c,d,a,x[i+3],22,-1044525330);a=md5_ff(a,b,c,d,x[i+4],7,-176418897);d=md5_ff(d,a,b,c,x[i+5],12,1200080426);c=md5_ff(c,d,a,b,x[i+6],17,-1473231341);b=md5_ff(b,c,d,a,x[i+7],22,-45705983);a=md5_ff(a,b,c,d,x[i+8],7,1770035416);d=md5_ff(d,a,b,c,x[i+9],12,-1958414417);c=md5_ff(c,d,a,b,x[i+10],17,-42063);b=md5_ff(b,c,d,a,x[i+11],22,-1990404162);a=md5_ff(a,b,c,d,x[i+12],7,1804603682);d=md5_ff(d,a,b,c,x[i+13],12,-40341101);c=md5_ff(c,d,a,b,x[i+14],17,-1502002290);b=md5_ff(b,c,d,a,x[i+15],22,1236535329);a=md5_gg(a,b,c,d,x[i+1],5,-165796510);d=md5_gg(d,a,b,c,x[i+6],9,-1069501632);c=md5_gg(c,d,a,b,x[i+11],14,643717713);b=md5_gg(b,c,d,a,x[i+0],20,-373897302);a=md5_gg(a,b,c,d,x[i+5],5,-701558691);d=md5_gg(d,a,b,c,x[i+10],9,38016083);c=md5_gg(c,d,a,b,x[i+15],14,-660478335);b=md5_gg(b,c,d,a,x[i+4],20,-405537848);a=md5_gg(a,b,c,d,x[i+9],5,568446438);d=md5_gg(d,a,b,c,x[i+14],9,-1019803690);c=md5_gg(c,d,a,b,x[i+3],14,-187363961);b=md5_gg(b,c,d,a,x[i+8],20,1163531501);a=md5_gg(a,b,c,d,x[i+13],5,-1444681467);d=md5_gg(d,a,b,c,x[i+2],9,-51403784);c=md5_gg(c,d,a,b,x[i+7],14,1735328473);b=md5_gg(b,c,d,a,x[i+12],20,-1926607734);a=md5_hh(a,b,c,d,x[i+5],4,-378558);d=md5_hh(d,a,b,c,x[i+8],11,-2022574463);c=md5_hh(c,d,a,b,x[i+11],16,1839030562);b=md5_hh(b,c,d,a,x[i+14],23,-35309556);a=md5_hh(a,b,c,d,x[i+1],4,-1530992060);d=md5_hh(d,a,b,c,x[i+4],11,1272893353);c=md5_hh(c,d,a,b,x[i+7],16,-155497632);b=md5_hh(b,c,d,a,x[i+10],23,-1094730640);a=md5_hh(a,b,c,d,x[i+13],4,681279174);d=md5_hh(d,a,b,c,x[i+0],11,-358537222);c=md5_hh(c,d,a,b,x[i+3],16,-722521979);b=md5_hh(b,c,d,a,x[i+6],23,76029189);a=md5_hh(a,b,c,d,x[i+9],4,-640364487);d=md5_hh(d,a,b,c,x[i+12],11,-421815835);c=md5_hh(c,d,a,b,x[i+15],16,530742520);b=md5_hh(b,c,d,a,x[i+2],23,-995338651);a=md5_ii(a,b,c,d,x[i+0],6,-198630844);d=md5_ii(d,a,b,c,x[i+7],10,1126891415);c=md5_ii(c,d,a,b,x[i+14],15,-1416354905);b=md5_ii(b,c,d,a,x[i+5],21,-57434055);a=md5_ii(a,b,c,d,x[i+12],6,1700485571);d=md5_ii(d,a,b,c,x[i+3],10,-1894986606);c=md5_ii(c,d,a,b,x[i+10],15,-1051523);b=md5_ii(b,c,d,a,x[i+1],21,-2054922799);a=md5_ii(a,b,c,d,x[i+8],6,1873313359);d=md5_ii(d,a,b,c,x[i+15],10,-30611744);c=md5_ii(c,d,a,b,x[i+6],15,-1560198380);b=md5_ii(b,c,d,a,x[i+13],21,1309151649);a=md5_ii(a,b,c,d,x[i+4],6,-145523070);d=md5_ii(d,a,b,c,x[i+11],10,-1120210379);c=md5_ii(c,d,a,b,x[i+2],15,718787259);b=md5_ii(b,c,d,a,x[i+9],21,-343485551);a=safe_add(a,olda);b=safe_add(b,oldb);c=safe_add(c,oldc);d=safe_add(d,oldd);}return[a,b,c,d];}function%20md5_cmn(q,a,b,x,s,t){return%20safe_add(bit_rol(safe_add(safe_add(a,q),safe_add(x,t)),s),b);}function%20md5_ff(a,b,c,d,x,s,t){return%20md5_cmn((b%26c)|((~b)%26d),a,b,x,s,t);}function%20md5_gg(a,b,c,d,x,s,t){return%20md5_cmn((b%26d)|(c%26(~d)),a,b,x,s,t);}function%20md5_hh(a,b,c,d,x,s,t){return%20md5_cmn(b^c^d,a,b,x,s,t);}function%20md5_ii(a,b,c,d,x,s,t){return%20md5_cmn(c^(b|(~d)),a,b,x,s,t);}function%20bit_rol(num,cnt){return(num%3C%3Ccnt)|(num%3E%3E%3E(32-cnt));}function%20utf8_en(str){return%20unescape(encodeURIComponent(str));}function%20safe_add(x,y){var%20lsw=(x%260xFFFF)+(y%260xFFFF);var%20msw=(x%3E%3E16)+(y%3E%3E16)+(lsw%3E%3E16);return(msw%3C%3C16)|(lsw%260xFFFF);}function%20str2binl(str){var%20bin=[];var%20mask=(1%3C%3C8)-1;for(var%20i=0;i%3Cstr.length*8;i+=8){bin[i%3E%3E5]|=(str.charCodeAt(i/8)%26mask)%3C%3C(i%2532);}return%20bin;}function%20gp2_generate_passwd(Passwd,Len){var%20i=0;while(i%3C10||!(gp2_check_passwd(Passwd.substring(0,Len)))){Passwd=b64_md5(Passwd);i++;}return%20Passwd.substring(0,Len);}function%20gp2_check_passwd(Passwd){return(Passwd.search(/[a-z]/)===0%26%26Passwd.search(/[0-9]/)%3E0%26%26Passwd.search(/[A-Z]/)%3E0)%3Ftrue:false;}function%20gp2_generate_hash(HashSeed){for(var%20i=0;i%3C=4;i++){HashSeed=hex_md5(HashSeed);}return%20HashSeed;}function%20gp2_validate_length(Len){Len=(parseInt(Len))%3FparseInt(Len):10;if(Len%3C4){Len=4;}else%20if(Len%3E24){Len=24;}return%20Len;}function%20gp2_process_uri(URI,DisableTLD){URI=URI.toLowerCase();var%20HostNameIsolator=new%20RegExp('^(http|https|ftp|ftps|webdav|gopher|rtsp|irc|nntp|pop|imap|smtp)://([^/:]+)');var%20HostName=URI.match(HostNameIsolator);if(HostName%26%26HostName[2]!=null){HostName=HostName[2];}else{HostNameIsolator=new%20RegExp('^([^/:]+)');HostName=URI.match(HostNameIsolator);HostName=(HostName[1]!=null)%3FHostName[1]:URI;}HostNameIsolator=new%20RegExp('^([0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3})$');HostName=(HostName.match(HostNameIsolator))%3F[HostName]:HostName.split('.');if(HostName[2]==null||DisableTLD){URI=HostName.join('.');}else{URI=HostName[HostName.length-2]+'.'+HostName[HostName.length-1];var%20TLDList=['ac.ac','com.ac','edu.ac','gov.ac','net.ac','mil.ac','org.ac','com.ae','net.ae','org.ae','gov.ae','ac.ae','co.ae','sch.ae','pro.ae','com.ai','org.ai','edu.ai','gov.ai','com.ar','net.ar','org.ar','gov.ar','mil.ar','edu.ar','int.ar','co.at','ac.at','or.at','gv.at','priv.at','com.au','gov.au','org.au','edu.au','id.au','oz.au','info.au','net.au','asn.au','csiro.au','telememo.au','conf.au','otc.au','id.au','com.az','net.az','org.az','com.bb','net.bb','org.bb','ac.be','belgie.be','dns.be','fgov.be','com.bh','gov.bh','net.bh','edu.bh','org.bh','com.bm','edu.bm','gov.bm','org.bm','net.bm','adm.br','adv.br','agr.br','am.br','arq.br','art.br','ato.br','bio.br','bmd.br','cim.br','cng.br','cnt.br','com.br','coop.br','ecn.br','edu.br','eng.br','esp.br','etc.br','eti.br','far.br','fm.br','fnd.br','fot.br','fst.br','g12.br','ggf.br','gov.br','imb.br','ind.br','inf.br','jor.br','lel.br','mat.br','med.br','mil.br','mus.br','net.br','nom.br','not.br','ntr.br','odo.br','org.br','ppg.br','pro.br','psc.br','psi.br','qsl.br','rec.br','slg.br','srv.br','tmp.br','trd.br','tur.br','tv.br','vet.br','zlg.br','com.bs','net.bs','org.bs','ab.ca','bc.ca','mb.ca','nb.ca','nf.ca','nl.ca','ns.ca','nt.ca','nu.ca','on.ca','pe.ca','qc.ca','sk.ca','yk.ca','gc.ca','co.ck','net.ck','org.ck','edu.ck','gov.ck','com.cn','edu.cn','gov.cn','net.cn','org.cn','ac.cn','ah.cn','bj.cn','cq.cn','gd.cn','gs.cn','gx.cn','gz.cn','hb.cn','he.cn','hi.cn','hk.cn','hl.cn','hn.cn','jl.cn','js.cn','ln.cn','mo.cn','nm.cn','nx.cn','qh.cn','sc.cn','sn.cn','sh.cn','sx.cn','tj.cn','tw.cn','xj.cn','xz.cn','yn.cn','zj.cn','arts.co','com.co','edu.co','firm.co','gov.co','info.co','int.co','nom.co','mil.co','org.co','rec.co','store.co','web.co','ac.cr','co.cr','ed.cr','fi.cr','go.cr','or.cr','sa.cr','com.cu','net.cu','org.cu','ac.cy','com.cy','gov.cy','net.cy','org.cy','co.dk','art.do','com.do','edu.do','gov.do','gob.do','org.do','mil.do','net.do','sld.do','web.do','com.dz','org.dz','net.dz','gov.dz','edu.dz','ass.dz','pol.dz','art.dz','com.ec','k12.ec','edu.ec','fin.ec','med.ec','gov.ec','mil.ec','org.ec','net.ec','com.ee','pri.ee','fie.ee','org.ee','med.ee','com.eg','edu.eg','eun.eg','gov.eg','net.eg','org.eg','sci.eg','com.er','net.er','org.er','edu.er','mil.er','gov.er','ind.er','com.es','org.es','gob.es','edu.es','nom.es','com.et','gov.et','org.et','edu.et','net.et','biz.et','name.et','info.et','ac.fj','com.fj','gov.fj','id.fj','org.fj','school.fj','com.fk','ac.fk','gov.fk','net.fk','nom.fk','org.fk','asso.fr','nom.fr','barreau.fr','com.fr','prd.fr','presse.fr','tm.fr','aeroport.fr','assedic.fr','avocat.fr','avoues.fr','cci.fr','chambagri.fr','chirurgiens-dentistes.fr','experts-comptables.fr','geometre-expert.fr','gouv.fr','greta.fr','huissier-justice.fr','medecin.fr','notaires.fr','pharmacien.fr','port.fr','veterinaire.fr','com.ge','edu.ge','gov.ge','mil.ge','net.ge','org.ge','pvt.ge','co.gg','org.gg','sch.gg','ac.gg','gov.gg','ltd.gg','ind.gg','net.gg','alderney.gg','guernsey.gg','sark.gg','com.gr','edu.gr','gov.gr','net.gr','org.gr','com.gt','edu.gt','net.gt','gob.gt','org.gt','mil.gt','ind.gt','com.gu','edu.gu','net.gu','org.gu','gov.gu','mil.gu','com.hk','net.hk','org.hk','idv.hk','gov.hk','edu.hk','co.hu','2000.hu','erotika.hu','jogasz.hu','sex.hu','video.hu','info.hu','agrar.hu','film.hu','konyvelo.hu','shop.hu','org.hu','bolt.hu','forum.hu','lakas.hu','suli.hu','priv.hu','casino.hu','games.hu','media.hu','szex.hu','sport.hu','city.hu','hotel.hu','news.hu','tozsde.hu','tm.hu','erotica.hu','ingatlan.hu','reklam.hu','utazas.hu','ac.id','co.id','go.id','mil.id','net.id','or.id','co.il','net.il','org.il','ac.il','gov.il','k12.il','muni.il','idf.il','co.im','net.im','org.im','ac.im','lkd.co.im','gov.im','nic.im','plc.co.im','co.in','net.in','ac.in','ernet.in','gov.in','nic.in','res.in','gen.in','firm.in','mil.in','org.in','ind.in','ac.ir','co.ir','gov.ir','id.ir','net.ir','org.ir','sch.ir','ac.je','co.je','net.je','org.je','gov.je','ind.je','jersey.je','ltd.je','sch.je','com.jo','org.jo','net.jo','gov.jo','edu.jo','mil.jo','ad.jp','ac.jp','co.jp','go.jp','or.jp','ne.jp','gr.jp','ed.jp','lg.jp','net.jp','org.jp','gov.jp','hokkaido.jp','aomori.jp','iwate.jp','miyagi.jp','akita.jp','yamagata.jp','fukushima.jp','ibaraki.jp','tochigi.jp','gunma.jp','saitama.jp','chiba.jp','tokyo.jp','kanagawa.jp','niigata.jp','toyama.jp','ishikawa.jp','fukui.jp','yamanashi.jp','nagano.jp','gifu.jp','shizuoka.jp','aichi.jp','mie.jp','shiga.jp','kyoto.jp','osaka.jp','hyogo.jp','nara.jp','wakayama.jp','tottori.jp','shimane.jp','okayama.jp','hiroshima.jp','yamaguchi.jp','tokushima.jp','kagawa.jp','ehime.jp','kochi.jp','fukuoka.jp','saga.jp','nagasaki.jp','kumamoto.jp','oita.jp','miyazaki.jp','kagoshima.jp','okinawa.jp','sapporo.jp','sendai.jp','yokohama.jp','kawasaki.jp','nagoya.jp','kobe.jp','kitakyushu.jp','utsunomiya.jp','kanazawa.jp','takamatsu.jp','matsuyama.jp','com.kh','net.kh','org.kh','per.kh','edu.kh','gov.kh','mil.kh','ac.kr','co.kr','go.kr','ne.kr','or.kr','pe.kr','re.kr','seoul.kr','kyonggi.kr','com.kw','net.kw','org.kw','edu.kw','gov.kw','com.la','net.la','org.la','com.lb','org.lb','net.lb','edu.lb','gov.lb','mil.lb','com.lc','edu.lc','gov.lc','net.lc','org.lc','com.lv','net.lv','org.lv','edu.lv','gov.lv','mil.lv','id.lv','asn.lv','conf.lv','com.ly','net.ly','org.ly','co.ma','net.ma','org.ma','press.ma','ac.ma','com.mk','com.mm','net.mm','org.mm','edu.mm','gov.mm','com.mn','org.mn','edu.mn','gov.mn','museum.mn','com.mo','net.mo','org.mo','edu.mo','gov.mo','com.mt','net.mt','org.mt','edu.mt','tm.mt','uu.mt','com.mx','net.mx','org.mx','gob.mx','edu.mx','com.my','org.my','gov.my','edu.my','net.my','com.na','org.na','net.na','alt.na','edu.na','cul.na','unam.na','telecom.na','com.nc','net.nc','org.nc','ac.ng','edu.ng','sch.ng','com.ng','gov.ng','org.ng','net.ng','gob.ni','com.ni','net.ni','edu.ni','nom.ni','org.ni','com.np','net.np','org.np','gov.np','edu.np','ac.nz','co.nz','cri.nz','gen.nz','geek.nz','govt.nz','iwi.nz','maori.nz','mil.nz','net.nz','org.nz','school.nz','com.om','co.om','edu.om','ac.om','gov.om','net.om','org.om','mod.om','museum.om','biz.om','pro.om','med.om','com.pa','net.pa','org.pa','edu.pa','ac.pa','gob.pa','sld.pa','edu.pe','gob.pe','nom.pe','mil.pe','org.pe','com.pe','net.pe','com.pg','net.pg','ac.pg','com.ph','net.ph','org.ph','mil.ph','ngo.ph','aid.pl','agro.pl','atm.pl','auto.pl','biz.pl','com.pl','edu.pl','gmina.pl','gsm.pl','info.pl','mail.pl','miasta.pl','media.pl','mil.pl','net.pl','nieruchomosci.pl','nom.pl','org.pl','pc.pl','powiat.pl','priv.pl','realestate.pl','rel.pl','sex.pl','shop.pl','sklep.pl','sos.pl','szkola.pl','targi.pl','tm.pl','tourism.pl','travel.pl','turystyka.pl','com.pk','net.pk','edu.pk','org.pk','fam.pk','biz.pk','web.pk','gov.pk','gob.pk','gok.pk','gon.pk','gop.pk','gos.pk','edu.ps','gov.ps','plo.ps','sec.ps','com.pt','edu.pt','gov.pt','int.pt','net.pt','nome.pt','org.pt','publ.pt','com.py','net.py','org.py','edu.py','com.qa','net.qa','org.qa','edu.qa','gov.qa','asso.re','com.re','nom.re','com.ro','org.ro','tm.ro','nt.ro','nom.ro','info.ro','rec.ro','arts.ro','firm.ro','store.ro','www.ro','com.ru','net.ru','org.ru','gov.ru','pp.ru','com.sa','edu.sa','sch.sa','med.sa','gov.sa','net.sa','org.sa','pub.sa','com.sb','net.sb','org.sb','edu.sb','gov.sb','com.sd','net.sd','org.sd','edu.sd','sch.sd','med.sd','gov.sd','tm.se','press.se','parti.se','brand.se','fh.se','fhsk.se','fhv.se','komforb.se','kommunalforbund.se','komvux.se','lanarb.se','lanbib.se','naturbruksgymn.se','sshn.se','org.se','pp.se','com.sg','net.sg','org.sg','edu.sg','gov.sg','per.sg','com.sh','net.sh','org.sh','edu.sh','gov.sh','mil.sh','gov.st','saotome.st','principe.st','consulado.st','embaixada.st','org.st','edu.st','net.st','com.st','store.st','mil.st','co.st','com.sv','org.sv','edu.sv','gob.sv','red.sv','com.sy','net.sy','org.sy','gov.sy','ac.th','co.th','go.th','net.th','or.th','com.tn','net.tn','org.tn','edunet.tn','gov.tn','ens.tn','fin.tn','nat.tn','ind.tn','info.tn','intl.tn','rnrt.tn','rnu.tn','rns.tn','tourism.tn','com.tr','net.tr','org.tr','edu.tr','gov.tr','mil.tr','bbs.tr','k12.tr','gen.tr','co.tt','com.tt','org.tt','net.tt','biz.tt','info.tt','pro.tt','int.tt','coop.tt','jobs.tt','mobi.tt','travel.tt','museum.tt','aero.tt','name.tt','gov.tt','edu.tt','nic.tt','us.tt','uk.tt','ca.tt','eu.tt','es.tt','fr.tt','it.tt','se.tt','dk.tt','be.tt','de.tt','at.tt','au.tt','co.tv','com.tw','net.tw','org.tw','edu.tw','idv.tw','gov.tw','com.ua','net.ua','org.ua','edu.ua','gov.ua','ac.ug','co.ug','or.ug','go.ug','co.uk','me.uk','org.uk','edu.uk','ltd.uk','plc.uk','net.uk','sch.uk','nic.uk','ac.uk','gov.uk','nhs.uk','police.uk','mod.uk','dni.us','fed.us','com.uy','edu.uy','net.uy','org.uy','gub.uy','mil.uy','com.ve','net.ve','org.ve','co.ve','edu.ve','gov.ve','mil.ve','arts.ve','bib.ve','firm.ve','info.ve','int.ve','nom.ve','rec.ve','store.ve','tec.ve','web.ve','co.vi','net.vi','org.vi','com.vn','biz.vn','edu.vn','gov.vn','net.vn','org.vn','int.vn','ac.vn','pro.vn','info.vn','health.vn','name.vn','com.vu','edu.vu','net.vu','org.vu','de.vu','ch.vu','fr.vu','com.ws','net.ws','org.ws','gov.ws','edu.ws','ac.yu','co.yu','edu.yu','org.yu','com.ye','net.ye','org.ye','gov.ye','edu.ye','mil.ye','ac.za','alt.za','bourse.za','city.za','co.za','edu.za','gov.za','law.za','mil.za','net.za','ngo.za','nom.za','org.za','school.za','tm.za','web.za','co.zw','ac.zw','org.zw','gov.zw','eu.org','au.com','br.com','cn.com','de.com','de.net','eu.com','gb.com','gb.net','hu.com','no.com','qc.com','ru.com','sa.com','se.com','uk.com','uk.net','us.com','uy.com','za.com','dk.org','tel.no','fax.nr','mob.nr','mobil.nr','mobile.nr','tel.nr','tlf.nr','e164.arpa'];for(var%20i=0;i%3CTLDList.length;i++){if(URI==TLDList[i]){URI=HostName[HostName.length-3]+'.'+URI;break;}}}return%20URI;}function%20gp2_genpass(Passwd,Domain,LenL,HashL,SaltL,DisableTLDL){Passwd=(Passwd)%3Funescape(Passwd):0;Salt=(SaltL)%3Funescape(SaltL):'';Len=LenL;Hash=HashL;DisableTLD=DisableTLDL;var%20CurrentPosition=gp2_get_scroll_position();if(Target.getElementById('gp2_pass_box')){Target.getElementById('gp2_pass_box').style.right=(0-CurrentPosition[0])+'px';Target.getElementById('gp2_pass_box').style.top=CurrentPosition[1]+'px';alert(Snippets[0]);return%20false;}var%20ScrollX=(ScrollPosition)%3FCurrentPosition[0]-ScrollPosition[0]:CurrentPosition[0];var%20ScrollY=(ScrollPosition)%3FCurrentPosition[1]-ScrollPosition[1]:CurrentPosition[1];var%20ScreenSize=gp2_get_window_size();var%20PasswdFieldRelocate=(ScrollPosition)%3Ffalse:true;var%20PasswdFieldBlocked=false,RunAgain=false;HashVerified=false;PasswdFields=[];for(var%20i=0;i%3CFrames.length;i++){for(var%20j=0;j%3CFrames[i].forms.length;j++){for(var%20k=0;k%3CFrames[i].forms[j].elements.length;k++){if(Frames[i].forms[j].elements[k].type=='password'){var%20PasswdField=Frames[i].forms[j].elements[k];var%20Visible=(PasswdField.style.display.toLowerCase()=='none'||PasswdField.style.visibility.toLowerCase()=='hidden')%3Ffalse:true;if(Visible){var%20PasswdFieldParent=PasswdField.parentNode;while(Visible%26%26PasswdFieldParent%26%26PasswdFieldParent.nodeName.toLowerCase()!='html'%26%26PasswdFieldParent.nodeName.toLowerCase()!='%23document'){if(gp2_get_computed_style(PasswdFieldParent,'display').toLowerCase()=='none'||gp2_get_computed_style(PasswdFieldParent,'visibility').toLowerCase()=='hidden'){Visible=false;}else{PasswdFieldParent=PasswdFieldParent.parentNode;}}}if(Visible){var%20PasswdFieldType=0;var%20PasswdFieldPosition=(PasswdFieldBlocked)%3Ffalse:gp2_get_object_position(PasswdField);if(PasswdField.value!=''){if(!(PrevPasswd)%26%26gp2_get_computed_style(PasswdField,'background-image').replace(/\\/,'')=='url('+FieldPopData+')'){if(RunAgain||confirm(Snippets[1])){RunAgain=true;}else{return%20false;}PasswdFieldType=2;}else%20if(PrevPasswdPop%26%26PrevPasswdPop==PasswdField.value)(PrevPasswd%26%26PrevPasswd!=GenPasswd)%3Ftrue:false;var%20PassMask='***********************{Target.getElementById('gp2_populate_text').style.display='none';}}e.preventDefault();return%20false;}function%20gp2_use_as_master(e){if(Target.getElementById('gp2_pass_box')){gp2_detach_method(this,'dblclick',gp2_use_as_master);gp2_close(e);gp2_genpass(this.value,0,Len,Hash,Salt,DisableTLD);}e.preventDefault();return%20false;}function%20gp2_react(e){if(e.keyCode==8||e.keyCode==32||(e.keyCode%3E45%26%26e.keyCode%3C91)||(e.keyCode%3E95%26%26e.keyCode%3C112)||(e.keyCode%3E185%26%26e.keyCode%3C223)){gp2_detach_method(this,'keydown',gp2_react);gp2_detach_method(this,'change',gp2_react);Populated--;Unpopulated++;if(GenPasswd%26%26Target.getElementById('gp2_pass_box')){if(Populated%3C1){Target.getElementById('gp2_show_pass').style.background='%23fff';Target.getElementById('gp2_offer_pass').style.background='%23fff';}if(Unpopulated%26%26Target.getElementById('gp2_populate_text')){Target.getElementById('gp2_populate_text').style.display='block';}gp2_attach_method(this,'dblclick',gp2_populate);this.style.background=FieldFoundStyle;}else{this.style.background='%23fff';}}return%20true;}function%20gp2_make(Name,Attributes,Styles,Methods,Children){var%20Element=Target.createElement(Name);for(var%20i=0;i%3CAttributes.length;i++){Element.setAttribute(Attributes[i][0],Attributes[i][1]);}for(var%20i=0;i%3CStyles.length;i++){eval('Element.style.'+Styles[i][0]+%22='%22+Styles[i][1]+%22'%22);}for(var%20i=0;i%3CMethods.length;i++){gp2_attach_method(Element,Methods[i][0],Methods[i][1]);}for(var%20i=0;i%3CChildren.length;i++){Element.appendChild(Children[i]);}return%20Element;}function%20gp2_attach_method(obj,type,fn){var%20handler=function(e){e=e||window.event;if(!e.stopPropagation){e.stopPropagation=function(){this.cancelBubble=true;}}if(!e.preventDefault){e.preventDefault=function(){this.returnValue=false;}}if(!e.stopEvent)(window.frames[i].innerHeight)%3Fwindow.frames[i].innerHeight*window.frames[i].innerWidth:window.frames[i].document.body.clientHeight*window.frames[i].document.body.clientWidth;if(Area%3EMaxArea){Target=window.frames[i].document;TargetWindow=window.frames[i];MaxArea=Area;}}Frames.push(window.frames[i].document);}catch(err){Debug.push('EXT_FRAME');}}var%20FontStyle=['font','13px%20Trebuchet%20MS,%20Helvetica,sans-serif'];var%20FontStyleSmall=['font','11px%20Trebuchet%20MS,%20Helvetica,sans-serif'];var%20FontStyleInput=['font','14px%20monospace'];var%20HashStyle=[['%23f00','%23fcc'],['%23060','%23cfc']];var%20FontStyleLink=[FontStyleSmall,['color','%23666'],['fontWeight','normal'],['textDecoration','underline'],['borderWidth','0'],['cursor','pointer']];var%20FontStyleToolbarLink=[FontStyleSmall,['color','%23ccc'],['fontWeight','normal'],['textDecoration','underline'],['borderWidth','0'],['cursor','pointer']];var%20RevealStyle=[['margin','8px%205px%202px%200'],['padding','5px%205px%203px%205px'],['width','auto'],['borderStyle','solid'],['borderWidth','1px'],FontStyleInput];var%20MessageStyle=[['margin','0%200%208px%200'],['padding','0'],FontStyle];var%20FieldPopData='data:image/gif;base64,R0lGODlhDQAOAJEAAAjOCPn%252B%252Bd343f%252F%252F%252FyH5BAEAAAMALAAAAAANAA4AAAIlhI83CRKhFoKAjouE0eBi81CdJ3ERWSWkx6ws4r5GLNOvzeJeAQA7';var%20FieldFoundData='data:image/gif;base64,R0lGODlhDQAOAIABAMzMzAAAACH5BAEAAAEALAAAAAANAA4AAAIchI8XyRDb1IvmzWgvyxrxXn2QJHqidlphurBWAQA7';var%20TestImage=new%20Image;TestImage.src=FieldPopData;var%20FieldFoundStyle=(TestImage.complete)%3F'%23fff%20url('+FieldFoundData+')%20no-repeat%20top%20right':'%23fff%20url(http://files.supergenpass.com/img/sgp0.gif)%20no-repeat%20top%20right';var%20FieldPopStyle=(TestImage.complete)%3F'%23fff%20url('+FieldPopData+')%20no-repeat%20top%20right':'%23fff%20url(http://files.supergenpass.com/img/sgp1.gif)%20no-repeat%20top%20right';delete%20TestImage;var%20Len=false,Hash=false,Salt=false,DisableTLD=false,GenPasswd=false,PrevPasswd=false,PrevPasswdPop=false,Populated=false,Unpopulated=false,ScrollPosition=false;var%20BoxPosition=[0,0];var%20Snippets=['You already have a SuperGenPass window open.','Are you sure you want to run SuperGenPass again?','Enter your master password.','Your generated password','Your master password','VERIFIED','INVALID','Regenerate password','Master password','Domain / URL','Disable subdomain removal','Password length','Submit','Double-click to populate','help','close','show/hide','220px'];if(Target%26%26TargetWindow){gp2_genpass(0,0,16,0,0,0);}else{if(confirm(Messages[3])){window.location='http://www.supergenpass.com/mobile/';}}})();</div>
 <body>
</html> 
```

每个**输出 div**应该在每次搜索和替换后显示结果 - 但我得到的结果不一致：例如，名为 output2 的 div 仅包含 10% 或初始文本！每个**输出 div**的长度应该相似！

我究竟做错了什么 ？

我准备了一个沙箱供您查看：http: [//jsfiddle.net/vMeq6/1/](http://jsfiddle.net/vMeq6/1/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T20:28:03.523

因为您使用的是 html，所以它认为 < 是 html 标记的开始！如果要调试，请使用 JavaScript 控制台，而不是 div 元素。

您基本上只是重新创建了unescape。

您的整个代码可以简化为

```
var content = $("#input").text();
console.log(unescape(content)); 
```

# bash - Bash 脚本：尝试使用 ls 通配符查找文件

> ID：13056966
> 
> 赞同：1
> 
> 时间：2012-10-24T20:14:18.950
> 
> 标签：bash, loops, scripting

这是我的问题：我必须解决用户可配置的各种文件名/位置（数据目录可能有子目录）。如果我可以在循环之前完全解析文件名，则以下脚本有效：

```
[提示] 更多 test.sh
#！/usr/bin/env bash

新文件=实际文件名

对于`find -L ${FILE_PATH}/data -type d`中的目录；做
    `ls -1 ${directory}/${newfile} 2>/dev/null` 中的文件名；做
        如果 [[ -r ${文件名} ]]; 然后
            echo "找到 ${filename}"
        菲
    完毕
完毕

[提示] ./test.sh
[提示] 找到 ${SOME_PATH}/actual-filename

```

但是，如果 newfile 中有任何通配符，则内部循环将不会运行。即使它只返回一个文件。

我会将 find 与一些正则表达式一起使用，但是要自动生成正确的表达式并替换某些东西会很棘手（例如 pgb.f0010{0930,1001}{00,06,12,18} 会与某些文件关联对于 2010 年 9 月 30 日和 10 月 1 日，第一个分组是由我的脚本为提供的日期计算的）。

```
pgb.f0010093000 pgb.f0010093006 pgb.f0010093012 pgb.f0010093018 pgb.f0010100100
pgb.f0010100106 pgb.f0010100112 pgb.f0010100118 
```

我正在运行 Fedora 15 64 位。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T20:32:44.767

```
新文件="*"
查找 -L ${FILE_PATH}/data -name "${newfile}" \
| 读取文件名时
  做
    如果 [[ -r ${文件名} ]]; 然后
      echo "找到 ${filename}"
    菲
  完毕

```

-或者-

```
新文件="*"
find -L ${FILE_PATH}/data -name "${newfile}" -readable -exec echo "Found {}" \;

```

-或使用正则表达式-

```
新文件='.*/pgb.f0010(0930|1001)(00|06|12|18)'
文件路径=。
找到 -L ${FILE_PATH}/。-regextype posix 扩展\
  -regex "${newfile}" - 可读 -exec echo "Found {}" \;

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T16:17:08.673

根本问题是损坏的脚本中存在对 shell 扩展的依赖。使用评估：

```
#！/usr/bin/env bash
文件路径=“。”
新文件=pgb.f0010{0930,1001}{00,06,12,18}

对于`find -L ${FILE_PATH}/data -type d`中的目录；做
    `eval ls -1 ${directory}/${newfile} 2>/dev/null` 中的文件名；做
        如果 [[ -r ${文件名} ]]; 然后
            echo "找到 ${filename}"
        菲
    完毕
完毕

```

# html - iframe 高度属性不适用于 Firefox

> ID：13056968
> 
> 赞同：4
> 
> 时间：2012-10-24T20:14:28.327
> 
> 标签：html, firefox, iframe, height

我的 Firefox（Ubuntu 上的版本 3.6.17）没有响应`height`我的 iframe 的属性。（我检查了它是否可以在我的谷歌浏览器上运行。）

```
<iframe src="www.example.com" width="100%" height="80%"></iframe> 
```

或者

```
<iframe src="www.example.com" width="100%" height="40%"></iframe> 
```

我怎样才能让它工作？

如果是因为我的 Firefox 版本太旧，我怎样才能让它适用于同样拥有旧版本 Firefox 的用户？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T20:53:42.613

我已经在 OS X 上的 Firefox 3.6 中检查了你的代码，这对我有用。为了让它工作，我添加了：

```
html, body { height:100%; } ​ 
```

[http://jsfiddle.net/XcdJ3/](http://jsfiddle.net/XcdJ3/)

但是，如果您在某个容器中有 iframe，它也必须具有`height:100%`属性。

就像在这个例子中一样：

[http://jsfiddle.net/XcdJ3/2/](http://jsfiddle.net/XcdJ3/2/)

如果您无法使用 html 和 css 扩展 iframe，请尝试在 JavaScript 中进行扩展，只需获取父元素高度并将其应用于 iframe 高度标签。

# android - 将所有内容的线性布局更改为深色

> ID：13056969
> 
> 赞同：2
> 
> 时间：2012-10-24T20:14:31.763
> 
> 标签：android, android-linearlayout

我想用 linearlayout 做同样的效果，就像你调用 showDialog 时一样。禁用线性布局的所有组件很容易，但是如何更改颜色？

是否可以在布局上投下一些阴影？

谢谢你的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T08:36:58.810

感谢 Asok 的建议，我发现了这个：

[设置布局的 Alpha/Opacity](https://stackoverflow.com/questions/4813995/set-alpha-opacity-of-layout)

它对我来说是正确的。

我如何将Clickable设置为所有孩子的方式：

```
TraverseChildren(GetChildren(_llRest), false); 
```

在哪里

```
private void TraverseChildren(ArrayList<View> childrenList, boolean b) {
    for (View view : childrenList) {

        view.setClickable(b);
        view.setEnabled(b);

        if (view instanceof ViewGroup)
            TraverseChildren(GetChildren((ViewGroup)view), b);
    }   
}

private ArrayList<View> GetChildren(ViewGroup view) {
    ArrayList<View> children = new ArrayList<View>();
        for (int i = 0; i < view.getChildCount(); i++) 
            if (view.getChildAt(i) != null)
                children.add(view.getChildAt(i));
    return children;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T20:41:51.847

我不认为我理解你想要做什么。如果您只想更改布局的颜色，您可以在 XML 声明中使用`android:background`属性或以编程方式使用该方法`setBackground`或`setBackgroundResource`在您的布局对象上进行。如果您想让要显示的活动看起来有点像对话框（具有半透明背景等），最简单的方法是像往常一样将所有内容保留在该布局上，并将主题应用于显现：

```
<activity android:theme="@android:style/Theme.Dialog"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T21:07:06.450

您可以`setAlpha`对父级应用透明度到所有视图子级。

这是我在创建视图以覆盖我的主要布局时采用的方法的示例：

```
RelativeLayout mainRelativeLayout = (RelativeLayout)findViewById(R.id.mainlayout);
mainRelativeLayout.setAlpha((float).45); 
```

My `mainRelativeLayout`，在这种情况下，包含许多`ImageViews`并且`TextViews`都继承了透明度。这给了我阴影的效果。

* * *

`setAlpaha`该类`View`的仅支持 API 11+ 或平台版本/Android OS Ver 3.0+

# http - Jquery XML POST 未正确设置请求

> ID：13056973
> 
> 赞同：1
> 
> 时间：2012-10-24T20:14:36.570
> 
> 标签：http, jquery, post

我有一个休息服务，我正在尝试通过 jquery 客户端调用它。当我通过 CURL 发送如下响应时，后端休息服务工作正常。

```
curl -H "Accept: text/plain" -X POST -d 'host=<type:hostDescription xmlns:type="http://schemas.airavata.apache.org/gfac/type"><type:hostName>testHost5</type:hostName><type:hostAddress>aaaa</type:hostAddress></type:hostDescription>' http://localhost:6060/airavata-registry-rest-services/registry/api/hostdescriptor/save 
```

此请求如下所示。

```
POST /airavata-registry-rest-services/registry/api/hostdescriptor/save HTTP/1.1
User-Agent: curl/7.22.0 (x86_64-pc-linux-gnu) libcurl/7.22.0 OpenSSL/1.0.1 zlib/1.2.3.4 libidn/1.23 librtmp/2.3
Host: 127.0.0.1
Accept: text/plain
Content-Length: 189
Content-Type: application/x-www-form-urlencoded

host=<type:hostDescription xmlns:type="http://schemas.airavata.apache.org/gfac/type">
   <type:hostName>testHost5</type:hostName>
   <type:hostAddress>aaaa</type:hostAddress></type:hostDescription> 
```

但问题是我的 jquery 客户端发送的请求如下所示。

```
POST /airavata-registry-rest-services/registry/api/hostdescriptor/save HTTP/1.1
Host: 127.0.0.1
Connection: keep-alive
Content-Length: 276
Origin: http://localhost:7080
User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/536.11 (KHTML, like Gecko) Ubuntu/12.04 Chromium/20.0.1132.47 Chrome/20.0.1132.47 Safari/536.11
Content-Type: application/x-www-form-urlencoded; charset=UTF-8
Accept: */*
Referer: http://localhost:7080/client-api-demo/x_host_descriptor_save.html
Accept-Encoding: gzip,deflate,sdch
Accept-Language: en-US,en;q=0.8
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3

host=%3Ctype%3Ahostdescription+xmlns%3Atype%3D%22http%3A%2F%2Fschemas.airavata.apache.org%2Fgfac%2Ftype%22%3E%3Ctype%3Ahostname%3Eutav%3C%2Ftype%3Ahostname%3E%3Ctype%3Ahostaddress%3Egatekeeper2.ranger.tacc.teragrid.org%3C%2Ftype%3Ahostaddress%3E%3C%2Ftype%3Ahostdescription%3E 
```

我的 jquery 代码片段如下所示；

```
$('[name="btn2"]').click(function(){
            var hostName = $("#hostName1").val();
            var hostAddress = $("#hostAddress1").val();

            var xml = $('<type:hostDescription xmlns:type="http://schemas.airavata.apache.org/gfac/type"><type:hostName>' + hostName + '</type:hostName><type:hostAddress>' + hostAddress + '</type:hostAddress></type:hostDescription>');

            var xmlData= $(xml);
            var xmlString;
            if (window.ActiveXObject){
                xmlString = xmlData.xml;
            } else {
                var oSerializer = new XMLSerializer();
                xmlString = oSerializer.serializeToString(xmlData[0]);
            }
            console.log(xmlString);

            $.post("http://localhost:6060/airavata-registry-rest-services/registry/api/hostdescriptor/save",
                    { host: xmlString} ,function(data,status){
                        alert("Data: " + data + "\nStatus: " + status);
                        alert("button2 post sent !");
                    });
        }); 
```

我应该如何更改我的客户以正确调用此服务。

# ios - AVAssetWriter 如何写下采样/压缩的 m4a/mp3 文件

> ID：13056978
> 
> 赞同：10
> 
> 时间：2012-10-24T20:14:49.027
> 
> 标签：ios, avfoundation, avassetwriter, avassetreader

我正在尝试获取本地 m4a 或 mp3 文件并压缩/向下采样该文件（为了制作更小的文件）。

最初，我使用 AVAssetExportSession 将 AVAsset 导出到临时目录，但我无法控制压缩/下采样（您只能使用预设，其中只有 .wav 文件格式支持质量下降） .

然后，按照 SO 上的几个示例，我尝试使用 AVAssetReader/AVAssetWriter 来执行此“导出”。

我这样创建我的读者/作者：

```
NSString *exportPath = [NSHomeDirectory() stringByAppendingPathComponent:@"out.m4a"];

NSURL *exportURL = [NSURL fileURLWithPath:outPath];

// reader
NSError *readerError = nil;
AVAssetReader *reader = [[AVAssetReader alloc] initWithAsset:asset
                                                       error:&readerError];

AVAssetTrack *track = [[asset tracksWithMediaType:AVMediaTypeAudio] objectAtIndex:0];    
AVAssetReaderTrackOutput *readerOutput = [[AVAssetReaderTrackOutput alloc] initWithTrack:track
                                                                          outputSettings:nil];
[reader addOutput:readerOutput];

// writer
NSError *writerError = nil;
AVAssetWriter *writer = [[AVAssetWriter alloc] initWithURL:exportURL
                                                  fileType:AVFileTypeAppleM4A
                                                     error:&writerError];

AudioChannelLayout channelLayout;
memset(&channelLayout, 0, sizeof(AudioChannelLayout));
channelLayout.mChannelLayoutTag = kAudioChannelLayoutTag_Stereo;

// use different values to affect the downsampling/compression
NSDictionary *outputSettings = [NSDictionary dictionaryWithObjectsAndKeys:
                                [NSNumber numberWithInt: kAudioFormatMPEG4AAC], AVFormatIDKey,
                                [NSNumber numberWithFloat:44100.0], AVSampleRateKey,
                                [NSNumber numberWithInt:2], AVNumberOfChannelsKey,
                                [NSNumber numberWithInt:128000], AVEncoderBitRateKey,
                                [NSData dataWithBytes:&channelLayout length:sizeof(AudioChannelLayout)], AVChannelLayoutKey,
                                nil];

AVAssetWriterInput *writerInput = [[AVAssetWriterInput alloc] initWithMediaType:AVMediaTypeAudio
                                                                 outputSettings:outputSettings];
[writerInput setExpectsMediaDataInRealTime:NO];
[writer addInput:writerInput]; 
```

然后我开始写...

```
[writer startWriting];
[writer startSessionAtSourceTime:kCMTimeZero];

[reader startReading];
dispatch_queue_t mediaInputQueue = dispatch_queue_create("mediaInputQueue", NULL);
[writerInput requestMediaDataWhenReadyOnQueue:mediaInputQueue usingBlock:^{

    NSLog(@"Asset Writer ready : %d", writerInput.readyForMoreMediaData);
    while (writerInput.readyForMoreMediaData) {
        CMSampleBufferRef nextBuffer;
        if ([reader status] == AVAssetReaderStatusReading && (nextBuffer = [readerOutput copyNextSampleBuffer])) {
            if (nextBuffer) {
                NSLog(@"Adding buffer");
                [writerInput appendSampleBuffer:nextBuffer];
            }
        } else {
            [writerInput markAsFinished];

            switch ([reader status]) {
                case AVAssetReaderStatusReading:
                    break;
                case AVAssetReaderStatusFailed:
                    [writer cancelWriting];
                    break;
                case AVAssetReaderStatusCompleted:
                    NSLog(@"Writer completed");
                    [writer endSessionAtSourceTime:asset.duration];
                    [writer finishWriting];

                    NSData *data = [NSData dataWithContentsOfFile:exportPath];
                    NSLog(@"Data: %@", data);
                    break;
            }
            break;
        }
    }
}]; 
```

当我写完后，我应该写入 exportURL 的数据为空，并且作者报告成功完成。有什么想法可能会出错吗？

**更新**调用后的写入器状态`appendSampleBuffer:`为 AVAssetWriterStatusFailed，虽然读取器状态是成功的，并且似乎读取了整个文件。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-25T16:47:11.757

I came across the solution:

Using NSHomeDirectory() in `NSString *exportPath = [NSHomeDirectory() stringByAppendingPathComponent:@"out.m4a"]` was causing the writer to not be able to create the file. Not exactly sure why, or what I would need to do to allow this to work, but changing `NSHomeDirectiory()` to `NSTemporaryDirectory()` has solved my problems in the meantime.

# java - 带有重定向的 HttpClient

> ID：13056980
> 
> 赞同：1
> 
> 时间：2012-10-24T20:15:02.167
> 
> 标签：java, apache-httpclient-4.x

> **可能重复：**
> [如何防止 apache http 客户端跟随重定向](https://stackoverflow.com/questions/1519392/how-to-prevent-apache-http-client-from-following-a-redirect)

我正在使用 httpclient 发出请求，收到响应后，我会自动重定向到另一个页面。我怎样才能阻止这种情况发生？

以下是更多细节：

我正在尝试使用 oAuth2.0 从 Google 获取令牌。我使用 httpclient 从服务器请求令牌，但由于`redirect_uri`我以某种方式重定向。我怎样才能阻止这个？

# php - MySQL 查询 - 连接两个产生重复结果的表

> ID：13056983
> 
> 赞同：4
> 
> 时间：2012-10-24T20:15:23.607
> 
> 标签：php, mysql, sql

我在 PHP 中运行以下 MySQL 查询。

```
"SELECT * 
FROM `challenges`,`verifications` 
WHERE (`challenges`.`user_id`='".$this->record['id']."' OR `challenges`.`opponent_id`='".$this->record['id']."') 
    AND `challenges`.`is_verified`='0' 
    AND (`challenges`.`status`='in-progress' OR `challenges`.`status`='pending') 
    AND 
    (
        (`verifications`.`user_id`='".$this->record['id']."' OR `verifications`.`opponent_id`='".$this->record['id']."') 
        AND (`verifications`.`user_verified`!=NULL AND `verifications`.`opponent_verified`=NULL) 
    ) 
LIMIT 100"; 
```

此查询由于某种原因返回重复记录。如果有人有任何见解，我将不胜感激。

这是两个表的结构（挑战和验证）：

挑战表：

```
CREATE TABLE `challenges` (
  `id` int(11) NOT NULL auto_increment,
  `wager` int(11) NOT NULL,
  `type` varchar(255) NOT NULL,
  `user_id` int(11) NOT NULL,
  `opponent_id` int(11) NOT NULL,
  `start_date` date NOT NULL,
  `date_created` timestamp NOT NULL default CURRENT_TIMESTAMP on update CURRENT_TIMESTAMP,
  `start_time` time NOT NULL,
  `is_verified` tinyint(1) NOT NULL default '0',
  `status` varchar(255) NOT NULL default 'pending',
  `winner_id` int(11) default NULL,
  PRIMARY KEY  (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=0 ; 
```

验证表：

```
CREATE TABLE `verify` (
  `id` int(11) NOT NULL auto_increment,
  `user_id` int(11) NOT NULL,
  `opponent_id` int(11) NOT NULL,
  `challenge_id` int(11) NOT NULL,
  `user_verified` int(11) default NULL,
  `opponent_verified` int(11) default NULL,
  PRIMARY KEY  (`id`),
  UNIQUE KEY `challenge_id` (`challenge_id`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=0; 
```

感谢您的帮助，如果您需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T20:21:53.087

您必须添加条件：

```
challenges.id = verify.challenge_id 
```

到 where 子句如下

```
"SELECT * 
 FROM `challenges`,`verifications` 
 WHERE `challenges`.`id` = `verify`.`challenge_id`
 AND (`challenges`.`user_id`='".$this->record['id']."' 
      OR `challenges`.`opponent_id`='".$this->record['id']."') 
 AND `challenges`.`is_verified`='0' 
 AND (`challenges`.`status`='in-progress' OR `challenges`.`status`='pending') 
 AND ( (`verifications`.`user_id`='".$this->record['id']."' 
         OR `verifications`.`opponent_id`='".$this->record['id']."') 
        AND (`verifications`.`user_verified`!=NULL 
              AND `verifications`.`opponent_verified`=NULL) 
     ) 
 LIMIT 100"; 
```

或使用`ANSI-92`

```
"SELECT * 
 FROM `challenges` as `challenges`
 JOIN `verifications` as `verifications` on `challenges`.`id` = `verify`.`challenge_id`    
 WHERE (`challenges`.`user_id`='".$this->record['id']."' OR `challenges`.`opponent_id`='".$this->record['id']."') 
        AND `challenges`.`is_verified`='0' 
        AND (`challenges`.`status`='in-progress' OR `challenges`.`status`='pending') 
        AND 
        (
            (`verifications`.`user_id`='".$this->record['id']."' OR `verifications`.`opponent_id`='".$this->record['id']."') 
            AND (`verifications`.`user_verified`!=NULL AND `verifications`.`opponent_verified`=NULL) 
        ) 
        LIMIT 100"; 
```

# php - 将不同的编码字符集转换为 UTF-8

> ID：13056985
> 
> 赞同：1
> 
> 时间：2012-10-24T20:15:42.980
> 
> 标签：php, mysql

我在客户数据库中有这个词（同样情况下还有 40 多个）：

1.  `Aclimaç&#227;o`
2.  `Aclima&ccedil&#227;o`

我需要将两者都转换为 UTF-8 并保存在 MySQL 数据库中：Aclimação。

我如何用 PHP 做到这一点？

**[编辑]**
观察：
我需要这样做，因为当用户找到特定的“区”时，它不可能转换为两种格式，例如：

1.  `Aclima&ccedil;&aatilde;o (correct)`
2.  `Aclimaç&#227;o (incorrect: utf8 + html number encode)`
3.  `Aclima&ccedil&#227;o (incorrect: iso + html number encode)`

在我的情况下，我只需要一种类型的编码：ISO-8859-1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T20:21:22.350

[在将html_entity_decode()](http://cl1.php.net/html_entity_decode)应用于字符串后，获取值并将它们插入数据库。

（您提供的第二个字符串看起来像是一个格式错误的 HTML 实体，对吗？）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T20:24:44.067

1.  使用 mysqldump 将数据库内容转储出去
2.  iconv 将数据转为 UTF8
3.  字符串替换格式错误的 html 实体以使其有效
4.  使用 html_entity_decode 将有效的 html 实体更改为应有的字符。请注意，您应该将其编码（UTF-8）作为参数，否则它将取决于 PHP 版本！
5.  在 mysql 中创建新的 UTF-8 数据库
6.  将数据导入mysql

例如，我认为 ã 不存在于 ISO-8859-1 中，因此您实际上确实需要 UTF-8。将其作为 是不正确的`&aatilde;`，这是 HTML 的表示方式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T21:23:45.397

以下解决方案如何使用函数转换数据库中的所有数据：

```
mb_convert_encoding (data, 'UTF-8', 'HTML-ENTITIES'); 
```

当我阅读记录时，请执行以下操作：

```
utf8_decode (data) 
```

当我查找一些记录时，根据站点（）的选择，我执行以下操作：

```
utf8_encode (data) 
```

到目前为止，工作完美。

# c# - 使用 foreach 无法在 ListItemCollection 上进行隐式键入，但可以使用 for 循环

> ID：13056988
> 
> 赞同：4
> 
> 时间：2012-10-24T20:15:44.290
> 
> 标签：c#, asp.net, implicit

ListBox 控件具有[ListItemCollection](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listitemcollection.aspx)`Items`类型的属性。

我有点明白为什么我不能写了

```
foreach (var item in ShipperListBox.Items)
{
    if (item.Selected) count++;
} 
```

但是必须写

```
foreach (ListItem item in ShipperListBox.Items)
{
    if (item.Selected) count++;
} 
```

它与`ListItemCollection`实施有关`IEnumerable`，而不是`IEnumerable<ListItem>`（如[本问题](https://stackoverflow.com/questions/2786727/why-does-var-evaluate-to-system-object-in-foreach-var-row-in-table-rows?lq=1)所述）。

但我不明白为什么以下没有问题。

```
for (int i = 0; i < ListBox1.Items.Count; i++)
{
    if (ListBox1.Items[i].Selected) count++;
} 
```

ListItemCollection 的哪一部分让编译器清楚的`ListBox.Items[i]`是 type `ListItem`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T20:21:11.017

因为`ListItemCollection`实现了一个[返回](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listitemcollection.item.aspx)`ListItem`.

这与`IEnumerable`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T20:22:00.000

这是明确存在的内容`.OfType<ListItem>()`的一部分：`.Cast<ListItem>()`

> Cast(IEnumerable) 方法通过提供必要的类型信息，可以在非泛型集合上调用标准查询运算符。例如，ArrayList 没有实现 IEnumerable，但是通过在 ArrayList 对象上调用 Cast(IEnumerable)，然后可以使用标准查询运算符来查询序列。[（资源）](http://msdn.microsoft.com/en-us/library/bb341406.aspx)

所以你可以写

```
foreach (var item in ShipperListBox.Items.OfType<ListItem>())
{
    if (item.Selected) count++;
} 
```

不过，我不能告诉你为什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T21:11:51.970

ListItemCollection.GetEnumerator 确实返回了一个自 .NET 1.0 以来使用的枚举器，它确实将对象作为值返回。[foreach 模式](http://blogs.msdn.com/b/ericlippert/archive/2011/06/30/following-the-pattern.aspx)（正如 Eric Lippert 详细解释的那样）需要对象通过 GetEnumerator 方法返回的 Enumerator。

当您使用 var 时，编译器将循环变量的类型推断为对象，因为 Enumerator 的 Current 确实只返回一个对象。

```
public interface IEnumerator
{
    bool MoveNext();
    object Current { get; }
    void Reset();
} 
```

但是，当您使用`foreach(ListItem item in xxx)`... 时，编译器会自动为您从对象添加到 ListItem 的强制转换。您可以在执行 foreach(string str in new object[] { "str", 1 }) 时尝试一下，这将导致 InvalidCastException。`var`关键字没有魔法。它只是简单地推断类型而不做任何额外的魔术。

当您期望`ListItem`循环中有 a 时，您应该清楚地写出来。从枚举器的方法签名中不清楚它将返回什么对象。您必须告诉编译器您期望的类型。不使用 var 关键字的另一个原因是代码的读者也无法推断出循环变量的类型。

# rtp - 捕获 Lync 视频流

> ID：13056991
> 
> 赞同：4
> 
> 时间：2012-10-24T20:15:48.080
> 
> 标签：rtp, lync, lync-2010, ucma, lync-server-2010

是否可以在 lync 2010 或 2013 中以某种方式捕获 lync 会议的视频流？我已经在我们的实验室中运行了测试版。UCMA 为 AudioVideoFlow 提供了钩子，但似乎只在音频端运行。是否有可能以某种方式获得指向 RTP 流的直接指针？我认为有一些规定，我看到其他声称这样做的产品，但我找不到任何有关方法的文档。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-25T11:24:20.183

在 UCMA 中没有办法做到这一点 - AudioVideoFlow 是目前唯一可用的流。

您必须查看 SIP 流量以确定流量，然后进行数据包捕获。我相信这就是第三方供应商的做法。

# c# - 使用不同的实体转换返回类型

> ID：13056997
> 
> 赞同：1
> 
> 时间：2012-10-24T20:16:01.387
> 
> 标签：c#, asp.net-mvc

这是我的方法，我想投我的回报 - 我这样做是为了防止改变我拥有的不同方法，并且还想知道如果投我的回报，这会产生任何负面影响吗？

```
public VisitEntry Get(Guid visitEntryId)
    {
        var visitEntry = _visitEntryRepository.Get(visitEntryId);
        VisitEntryDTO dto = AutoMapper.Mapper.Map<VisitEntry, VisitEntryDTO>(visitEntry);
        dto.CasePartyIds =
            _casePartyService.GetAllForHearingEntry(visitEntryId).Select(caseParty => caseParty.CasePartyId).ToList();
        return dto;
    } 
```

我得到的错误是：return dto。声明：我无法将 ...Entity.VisitEntryDTO 转换为 ...Entity.VisitEntry。

任何澄清都会很好。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T20:22:37.640

您可能无法直接从`VisitEntryDTO`to 转换`VisitEntry`。您需要自动映射回来。

但是，您的存储库似乎已经返回了`VisitEntry`对象，那么您为什么要首先映射到 a`VisitEntryDTO`呢？为什么不这样做：

```
public VisitEntry Get(Guid visitEntryId)
{
    var visitEntry = _visitEntryRepository.Get(visitEntryId);
    visitEntry.CasePartyIds =
        _casePartyService.GetAllForHearingEntry(visitEntryId).Select(caseParty => caseParty.CasePartyId).ToList();
    return visitEntry;
} 
```

除非我错过了你的`VisitEntry`课。