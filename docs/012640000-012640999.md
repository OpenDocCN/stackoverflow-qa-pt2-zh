# StackOverflow 问答 12640000-12640999

# javascript - 使用jquery更改矢量图形中节点的标题属性时出错

> ID：12640001
> 
> 赞同：-1
> 
> 时间：2012-09-28T12:25:40.283
> 
> 标签：javascript, jquery, svg, jquery-svg

我有一个 SVG 格式的图形，我想实现一个功能，当鼠标指针悬停在它上面时，它会更改任何节点的标题属性，并在指针移开时返回旧标题。为了实现这一点，我正在尝试使用 jQuery 库，我的代码如下所示：

```
var oldTitle;
$(document).ready(function() {
    $("g[class=node]").hover(funciton() {
        oldTitle = $(this).prop("title");
        $(this).prop("title", "New Title!");
    }, function() {
        $(this).prop("title", oldTitle);
        }
    );
}); 
```

但是，由于某种原因，代码无法正常运行，我看不到预期的效果。关于这里出了什么问题的任何想法？

编辑：我想我知道问题是什么，但仍在寻找解决方案。因此，在矢量图形 html 代码中，节点表示为：

```
<g id="node2" class="node"><title>SomeTitle</title>
        <ellipse fill="forestgreen" stroke="forestgreen" cx="243.017" cy="-678" rx="27" ry="18"/>
        <text text-anchor="middle" x="243.017" y="-674.3" font-family="Times New Roman,serif" font-size="14.00">b</text>
</g> 
```

现在，我希望悬停动作更改文本之间的文本，`<title> ... </title>`并在鼠标指针移开时将其更改回来。

关于如何实现这一点的任何帮助？

PS：$(this).prop("title") 返回 undefined，所以这里的 title 不是节点元素的属性......那么，它是什么？以及如何改变？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T12:28:54.713

这可能有效

```
var oldTitle;
    $(document).ready(function() {
        $("g[class=node]").hover(function() {
            oldTitle = $(this).attr("title");
            $(this).attr("title", "New Title!");
        }, function() {
            $(this).attr("title", oldTitle);
            }
        );
    }); 
```

此代码将起作用如果您有类似的东西

```
 <g id="node2" class="node" title="SomeTitle" >
            <ellipse fill="forestgreen" stroke="forestgreen" cx="243.017" cy="-678" rx="27" ry="18"/>
            <text text-anchor="middle" x="243.017" y="-674.3" font-family="Times New Roman,serif" font-size="14.00">b</text>
    </g> 
```

但是您使用的是`<title></title>` 比使用

```
var oldTitle;
        $(document).ready(function() {
            $("g[class=node]").hover(function() {
                oldTitle = $(this).find("title").text();
                $(this).find("title").html("New Title!");
            }, function() {
                $(this).find("title").html(oldTitle);
                }
            );
        }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T12:29:01.423

如果那是实际代码，则需要进行拼写检查

```
$("g[class=node]").hover(funciton() {  <--spelling error here 
```

你拼错了函数，注意`i`and `t`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T12:45:20.597

而不是使用`g[class=node]`use`g.node`作为选择器。如果 g 包含更多类，您的代码可能会失败。

```
var oldTitle;

$(document).ready(function() {
    $("g.node").hover(function() {
        oldTitle = $(this).find("title").text();

        $(this).find("title").text( "New Title!");
    }, function() {
        $(this).find("title").text(oldTitle);
        }
    );
});​ 
```

# razor - 具有不同实体模型的 linq 查询

> ID：12640011
> 
> 赞同：0
> 
> 时间：2012-09-28T12:26:05.803
> 
> 标签：razor, asp.net-mvc-4

实际上我有两个tableA，tableB 我在tableA 中有记录。TanleA 与一个实体相关，而 TableB 与另一个实体模型相关如果我在 tableB 中有相同的相关记录，那么如果记录没有插入到 tableB 中，我应该显示 TRUE，它应该显示 FALSE。最后我应该在网格显示中显示所有记录，所以请告诉我可以通过哪种方式继续。请给我发送示例代码...

我是这样写的，但它得到了空异常

```
var que = (from i in ContactsContext.My_schedule_categories
                         join j in profileContexton i.Usr_schedule_category_id equals j.sid into g
                        from j in g.DefaultIfEmpty()
                        where i.catid == j.Usr_contact_schedule_setting_cat_ID
                        select new
                       {

                           category = i.Usr_schedule_category,
                           catid = i.Usr_schedule_category_id,
                           ownerid = i.Usr_schedule_owner_usr_id,
                           sid = j.sid

                       }).ToArray(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T19:58:13.820

您的代码和您的问题一样不可读。但是，我可以做出一些假设并提出答案：

*   实体框架不支持不同上下文（`ContactsContext`和`profileContext`）上的 JOIN。有关详细信息，请参阅[http://social.msdn.microsoft.com/Forums/en/adodotnetentityframework/thread/7a6093d7-c7ea-43ce-bd01-19c4b1fba724](http://social.msdn.microsoft.com/Forums/en/adodotnetentityframework/thread/7a6093d7-c7ea-43ce-bd01-19c4b1fba724)。
*   您的使用`DefaultIfEmpty`不正确。有关详细信息，请参阅[LINQ](https://stackoverflow.com/questions/8854181/defaultifempty-in-linq)中的 DefaultIfEmpty。

# magento - 为 Magento 的 NGINX 服务器上的 CSS 和 JS 文件启用 GZIP

> ID：12640014
> 
> 赞同：59
> 
> 时间：2012-09-28T12:26:09.123
> 
> 标签：magento, nginx, gzip

我需要在 nginx 服务器上启用 gzip 压缩。正如我从 firfox firebug NET 工具中观察到的那样，我发现 html 文件是 gzip 压缩的。但不是 javascript 文件和 CSS 文件。

我已经检查了**Mime.types**和 nginx 配置文件**/etc/nginx/ngnix.conf**并没有发现任何问题。仍然无法看到 css 和 javascript Gzip 压缩。我的 NGINX.conf 条目如下

```
gzip on;
gzip_disable "msie6";

gzip_vary on;
gzip_proxied any;
gzip_comp_level 6;
gzip_buffers 16 8k;
gzip_http_version 1.1;
gzip_types text/plain text/css application/json application/x-javascript text/xml application/xml application/xml+rss text/javascript; 
```

* * *

## 回答 #1

> 赞同：164
> 
> 时间：2012-09-28T17:17:40.503

这是我目前在生产中使用的工作配置。

[http://pastie.org/10870547](http://pastie.org/10870547)

```
gzip on;
gzip_disable "msie6";

gzip_comp_level 6;
gzip_min_length 1100;
gzip_buffers 16 8k;
gzip_proxied any;
gzip_types
    text/plain
    text/css
    text/js
    text/xml
    text/javascript
    application/javascript
    application/json
    application/xml
    application/rss+xml
    image/svg+xml; 
```

此配置已通过 tools.pingdom.com 进行测试。

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2015-05-04T19:57:01.807

您可以从[html5 样板](https://github.com/darktable/html5-boilerplate-server-configs/blob/master/nginx.conf)代码中找到示例配置。

```
  # 启用 Gzip
  gzip打开；
  gzip_http_version 1.0；
  gzip_comp_level 2；
  gzip_min_length 1100；
  gzip_buffers 4 8k；
  gzip_proxied 任何；
  gzip_types
    # text/html 总是被 HttpGzipModule 压缩
    文本/CSS
    文本/javascript
    文本/xml
    文本/纯文本
    文本/x 组件
    应用程序/javascript
    应用程序/json
    应用程序/xml
    应用程序/rss+xml
    字体/真实类型
    字体/opentype
    应用程序/vnd.ms-fontobject
    图片/svg+xml；

  gzip_static 开启；

  gzip_proxied 过期无缓存无存储私有身份验证；
  gzip_disable "MSIE [1-6]\.";
  gzip_vary on；

```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-07-08T20:48:41.143

如果您的一些文件被压缩而另一些没有，那么您的 gzip 正在工作，但您可能错过了**gzip_types**中的定义。例如，javascript 文件可能会在标头中返回以下任何类型：

*   应用程序/javascript
*   应用程序/x-javascript
*   文本/javascript

要压缩所有 javascript 文件，所有三个定义都应包含在 gzip_types 中。

您需要在**响应标头**中检查此类未压缩文件返回的内容类型，然后确保它也在 gzip_types 中定义。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-12-04T15:32:30.510

您的 gzip 条目是否在 js、css 等的 nginx 配置“范围”内？正在服务资产？我问是因为如果您使用某种框架，有时会有不同的 location {...} 块来处理 html 请求和资产。

此外，当您在浏览器中进行测试时，请确保您进行硬刷新以强制服务器为您提供您正在查看的任何内容的“新副本”。

最后，您可以使用 gzip_types * 来允许对任何内容进行 gzip 压缩。如果这是一个好的做法，也许其他人可以插话。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-05-23T09:50:11.853

要压缩 SVG，此行是正确的：

```
image/svg+xml svg svgz; 
```

# c - 有符号、无符号、常量和易失的默认类型

> ID：12640015
> 
> 赞同：1
> 
> 时间：2012-09-28T12:26:14.840
> 
> 标签：c, sizeof

在运行以下代码时：

```
int main()
{
    int a = sizeof(signed) + sizeof(unsigned);
    int b = sizeof(const) + sizeof(volatile);

    printf("%d",a+++b);

    return 0;
} 
```

在 Visual c++ 中，我得到的输出为 16。默认数据类型是`signed`、和 ，`unsigned`是否考虑过？`const``volatile``int`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T12:27:31.177

不仅仅是这些限定符，C 语言的默认类型是**int**。因此，如果您不在某个地方指定数据类型，编译器将假定为**int**。

例如，如果你没有声明一个函数并使用它，编译器会给你一个警告并假设函数返回 int。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-28T12:27:58.093

首先：`sizeof`不是函数，而是运算符。如果它是一个函数，你将如何实现它？你不能，这就是重点。

是的，这些限定符的默认类型是`int`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T13:02:02.967

你的程序不是标准C：

```
int a = sizeof(signed) + sizeof(unsigned); 
```

is, ok, `signed`and`int`实际上是 a are`unsigned`和的同义词`unsigned int`。

```
int b = sizeof(const) + sizeof(volatile); 
```

这些在 C 中是不允许的。从历史上看，可能曾经有一段时间，这些也被解释为`int`，但你不应该依赖它，你的编译器应该哭泣。

```
printf("%d",a+++b); 
```

我什至拒绝看这应该如何解析以及结果应该是什么，因为这与问题无关。

# eclipse - 防止 Eclipse 在 Scala 匿名函数 (lambdas) 上设置断点

> ID：12640018
> 
> 赞同：0
> 
> 时间：2012-09-28T12:26:25.270
> 
> 标签：eclipse, debugging, scala, breakpoints

在 Eclipse Indigo 中为 Eclipse 版本 2.1 里程碑 2 使用 Scala 插件，如果我在包含匿名函数的行上设置断点，例如

```
myList.map((x: String) => foo(bar(x))) 
```

“the”断点不仅会在`map`被调用时被命中，而且在匿名函数被调用时也会被命中（它实际上是多个断点，但令人沮丧的是，它们只在 Eclipse 的断点选项卡中显示为一个断点）。我认为这是一种回归，因为我似乎记得您曾经在这种情况下出现多个断点。

如何阻止 Eclipse 将匿名函数视为同一断点的一部分？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T12:36:06.960

断点是基于行的，因此只需添加换行符，使其在语法上仍然有效，但您不想命中的 lambdas 现在位于单独的行上。例如

```
myList.map(
  (x: String) => foo(bar(x))) 
```

（在我的情况下，我仍然看到一个明显虚假的连击，但这似乎是一个不同的问题 - 它不再击中 lambdas。）

# java - JApplet 和 Django webServer 之间的 POST

> ID：12640022
> 
> 赞同：0
> 
> 时间：2012-09-28T12:26:39.020
> 
> 标签：java, django, post, http-status-code-403

我对 Django 和 Japplet 很陌生，这是我与他们合作的第一个项目。Japplet 从 django 静态文件夹中获取一些图像，并允许用户添加一些线条和标记。最后，当单击 JApplet 上的“保存”按钮时，它应该对 Django 服务器进行一些 POST 调用，以保存标记和行。其实我只是用标记测试，我做不到。

这是标记的模型：

```
class Point(models.Model):
    id_edificio = models.ForeignKey(Building)
    RFID = models.CharField(max_length=200)
    x = models.IntegerField()
    y = models.IntegerField()
    piano = models.IntegerField()
    ingresso = models.BooleanField() 
```

他的观点：

```
def point(request, id_edificio, RFID, x, y, piano):
    point = csrf_exempt(point)
    if request.method == 'POST':
        get_object_or_404(Building, pk=id_edificio)
        p = Point()
        p.id_edificio = id_edificio
        p.RFID = RFID
        p.x = x
        p.y= y
        p.piano = piano
        p.ingresso = True
        p.save() 
```

我还没有实现模板，因为我不需要使用 Web 浏览器访问此视图。

网址：

```
 url(r'^buildings/generate/point', 'buildings.views.point'), 
```

JApplet保存方法：

```
private void saveData(MarkerArrayList markers, PathArrayList paths) {
    String response;
    URL endpoint = null;
    try {
    endpoint = new URL("http://127.0.0.1:8000/buildings/generate/point");
    } catch (MalformedURLException e1) {
        e1.printStackTrace();
    }

    for(Marker m: markers) {
        Reader data = new StringReader("id_edificio="+id_building+"&"+m.toString());
        try {
            Post.postData(data, endpoint);
        } catch (Exception e) {e.printStackTrace();}
    }
} 
```

标记 toString() 方法：

```
public String toString() {
    return "RFID="+ RFID + "&" +
        "x=" + 
        "y=" + y + "&" + 
        "piano=" + floor + "&";
} 
```

我假设我的 java 方法 Post 是正确的。如果你想看，可以问我；）

来自 Django 服务器的 POST 错误：

```
[28/Sep/2012 07:21:46] "POST /buildings/generate/point HTTP/1.1" 403 2294 
```

我不知道要尝试知道，我在你的手中。

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T14:08:49.847

错误的数量令人难以置信。

所以这是标记的新视图，现在我将忽略 csrf 标记：

```
@csrf_exempt
def point(request):
    if request.method == 'POST': 
        p = Point()
        building = Building.objects.get(pk = request.POST["id_edificio"]) 
        p.id_edificio = building
        p.RFID = request.POST["RFID"]         
        p.x = request.POST["x"] 
        p.y= request.POST["y"]
        p.piano = request.POST["piano"] 
        p.ingresso = request.POST["ingresso"]
        p.save() 
```

它有效！Marker toString() 方法中也有一些小错误（作为 'X' 而不是 'x'），但它们只是小错误。

# c - 编译驱动程序时出错 - 在初始化程序中指定的未知字段

> ID：12640024
> 
> 赞同：3
> 
> 时间：2012-09-28T12:26:43.193
> 
> 标签：c, compilation, linux-device-driver

我正在尝试在 Ubuntu 10.04 LTS 上编译视频驱动程序，这是错误：

```
**************************************************************************
* Building Techwell TW686x driver...                                     *
* Type "make help" for a list of available targets.                      *
**************************************************************************

make -C /lib/modules/`uname -r`/build M="/home/v4/driver-686x-0.1.1" clean
make[1]: Entering directory `/usr/src/linux-headers-2.6.32-43-generic'
make[1]: Leaving directory `/usr/src/linux-headers-2.6.32-43-generic'
make -C /lib/modules/`uname -r`/build M="/home/v4/driver-686x-0.1.1" modules
make[1]: Entering directory `/usr/src/linux-headers-2.6.32-43-generic'
  CC [M]  /home/v4/driver-686x-0.1.1/tw686x-core.o
  CC [M]  /home/v4/driver-686x-0.1.1/tw686x-video.o
  CC [M]  /home/v4/driver-686x-0.1.1/tw686x-i2c.o
  CC [M]  /home/v4/driver-686x-0.1.1/tw686x-device.o
  CC [M]  /home/v4/driver-686x-0.1.1/i2c-sw.o
  CC [M]  /home/v4/driver-686x-0.1.1/tw686x-alsa.o
  CC [M]  /home/v4/driver-686x-0.1.1/videobuf-dma-contig-tw.o
/home/v4/driver-686x-0.1.1/videobuf-dma-contig-tw.c:341: warning: initialization from incompatible pointer type
/home/v4/driver-686x-0.1.1/videobuf-dma-contig-tw.c:343: warning: initialization from incompatible pointer type
/home/v4/driver-686x-0.1.1/videobuf-dma-contig-tw.c:344: error: unknown field ‘vaddr’ specified in initializer
/home/v4/driver-686x-0.1.1/videobuf-dma-contig-tw.c:344: warning: excess elements in struct initializer
/home/v4/driver-686x-0.1.1/videobuf-dma-contig-tw.c:344: warning: (near initialization for ‘qops’)
/home/v4/driver-686x-0.1.1/videobuf-dma-contig-tw.c: In function ‘videobuf_queue_dma_contig_init_tw’:
/home/v4/driver-686x-0.1.1/videobuf-dma-contig-tw.c:357: warning: passing argument 2 of ‘videobuf_queue_core_init’ discards qualifiers from pointer target type
include/media/videobuf-core.h:197: note: expected ‘struct videobuf_queue_ops *’ but argument is of type ‘const struct videobuf_queue_ops *’
make[2]: *** [/home/v4/driver-686x-0.1.1/videobuf-dma-contig-tw.o] Error 1
make[1]: *** [_module_/home/v4/driver-686x-0.1.1] Error 2
make[1]: Leaving directory `/usr/src/linux-headers-2.6.32-43-generic'
make: *** [modules] Error 2 
```

我的内核是 2.6.32-43。我的C很生锈，所以我问大师。据我所知，问题是指文件 videobuf-core.h 中的变量 videobuf_queue_ops，我在这些位置找到了它：

```
/usr/src/linux-headers-2.6.24-24/include/media/videobuf-core.h
/usr/src/linux-headers-2.6.32-43/include/media/videobuf-core.h
/usr/src/linux-headers-2.6.24-32/include/media/videobuf-core.h 
```

这是有问题的文件（提取）videobuf-dma-contig-tw.c：

```
static struct videobuf_qtype_ops qops = {
    .magic        = MAGIC_QTYPE_OPS,

    .alloc        = __videobuf_alloc,
    .iolock       = __videobuf_iolock,
    .mmap_mapper  = __videobuf_mmap_mapper,
    .vaddr        = __videobuf_to_vaddr,
}; 
```

头文件中 videobuf_qtype_ops 的定义如下所示：

```
struct videobuf_queue_ops {
    int (*buf_setup)(struct videobuf_queue *q,
             unsigned int *count, unsigned int *size);
    int (*buf_prepare)(struct videobuf_queue *q,
               struct videobuf_buffer *vb,
               enum v4l2_field field);
    void (*buf_queue)(struct videobuf_queue *q,
              struct videobuf_buffer *vb);
    void (*buf_release)(struct videobuf_queue *q,
                struct videobuf_buffer *vb);
};

#define MAGIC_QTYPE_OPS 0x12261003

/* Helper operations - device type dependent */
struct videobuf_qtype_ops {
    u32                     magic;

    void *(*alloc)      (size_t size);
    void *(*vmalloc)    (struct videobuf_buffer *buf);
    int (*iolock)       (struct videobuf_queue* q,
                 struct videobuf_buffer *vb,
                 struct v4l2_framebuffer *fbuf);
    int (*mmap)     (struct videobuf_queue *q,
                 unsigned int *count,
                 unsigned int *size,
                 enum v4l2_memory memory);
    int (*sync)     (struct videobuf_queue* q,
                 struct videobuf_buffer *buf);
    int (*video_copy_to_user)(struct videobuf_queue *q,
                 char __user *data,
                 size_t count,
                 int nonblocking);
    int (*copy_stream)  (struct videobuf_queue *q,
                 char __user *data,
                 size_t count,
                 size_t pos,
                 int vbihack,
                 int nonblocking);
    int (*mmap_free)    (struct videobuf_queue *q);
    int (*mmap_mapper)  (struct videobuf_queue *q,
                struct vm_area_struct *vma);
}; 
```

我应该更改此头文件吗？我不确定修复是什么，或者我是否应该更改 Linux 文件 - 可怕的东西！

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T12:36:26.973

仅此部分

> /home/v4/driver-686x-0.1.1/videobuf-dma-contig-tw.c:343：警告：从不兼容的指针类型初始化
> /home/v4/driver-686x-0.1.1/videobuf-dma-contig -tw.c:344：错误：在初始化程序
> /home/v4/driver-686x-0.1.1/videobuf-dma-contig-tw.c:344 中指定的未知字段“vaddr”：警告：结构初始化程序中的多余元素

告诉我们初始化器和结构使用不同的类型、不同的字段名称和不同数量的元素。

绝对不是正确的包含文件。:-)

您将必须弄清楚您应该使用哪个版本，并确保一个在包含路径中（而不是其他版本）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T12:38:30.560

由于某种原因，编译器不喜欢这部分：

```
static struct videobuf_qtype_ops qops = {
    .magic        = MAGIC_QTYPE_OPS,

    .alloc        = __videobuf_alloc,
    .iolock       = __videobuf_iolock,
    .mmap_mapper  = __videobuf_mmap_mapper,
    .vaddr        = __videobuf_to_vaddr,
}; 
```

编译器告诉你发生错误的行号：

videobuf-dma-contig-tw.c：**344**：错误：初始化程序中指定的未知字段“vaddr”

现在的问题是为什么`vaddr`. `struct videobuf_qtype_ops`它可能低于`#if`，但我不确定。`struct videobuf_qtype_ops`未在此文件中定义。

你应该自己看看这个。发布大量不相关的代码并不能很好地利用人们的时间。

# php - 我的对象包含自身的多个实例，我应该担心吗？

> ID：12640027
> 
> 赞同：4
> 
> 时间：2012-09-28T12:26:53.743
> 
> 标签：php, oop, object, multiple-instances

我有两个班级，`Quiz`并且`Question`：

```
class Quiz()
{

    public $quiz_id;
    public $quiz_name;

    // Arrays of objects
    public $questions;
    public $personalities;

    function __construct($quiz_id)
    {
        // Sets the basic data of the quiz
        $this->quiz_id = $quiz_id;
        $this->quiz_name = $quiz_name_from_db;
    }

    function LoadQuestions()
    {
        // Get question ids from database

        // Blank array to add questions to 
        $array_of_question_objects = array();

        foreach ($question_from_db AS $question_info)
        {

            // Create Question object, passing this Quiz object 
            $question_object = new Question($question_info["question_id"], $this);

            // Add the question to the array
            $array_of_question_objects += $question_object;

        }

        // Set the array within the Quiz object
        $this->questions = $array_of_question_objects;
    }

    function LoadPersonalities()
    {
        $this->personalities = $array_of_personalty_objects;
    }
}

class Question()
{

    public $question;

    // Quiz object within the question for access to personalities and quiz type
    private $quiz_object;

    function __construct($question_id, $quiz_object)
    {
        // Set the quiz object within the question
        $this->quiz_object;

        // Load the question information from the database and set the values of the class
        $this->question = $question_from_database;
    }

    function ShowQuestion()
    {
        // Show a question on the page and also
        // Loop through all of the personalities

        echo "<div id="question">";

        if ($quiz_object->quiz_type == "personality")
        {
            foreach ($quiz_object->personalities AS $quiz_personality)
            {

                // Show each personality
                echo $quiz_personality;
            }
        }
    }
} 
```

如您所见，我需要让我的 Question 对象访问我的`Quiz`对象值：`$quiz_type`和`$personalities`.

如果我希望加载所有问题及其可能的个性结果，我将使用以下代码：

```
$quiz_id = 1;

// Create a quiz object
$quiz_object = new Quiz($quiz_id);

// Load the questions in to the Quiz object
$quiz_object->LoadQuestions();

// Load all of the personalities
$quiz_object->LoadPersonalities();

// Show the questions
foreach ($quiz_object->questions AS $question)
{
    // Show the question
    $question->ShowQuestion();
} 
```

如果我只想显示一个问题（以及所有个性信息），我可以使用以下代码：

```
$quiz_id = 1;
$question_id = 40;

// Create a quiz object
$quiz_object = new Quiz($quiz_id);

// Load all of the personalities for the quiz object
$quiz_object->LoadPersonalities();

// Load the question as an object
$question_object = new Question($question_id, $quiz_object);

// Show the HTML for the question
$question_object->ShowQuestion(); 
```

**我担心我的每个 Question 对象都需要来自 Quiz 对象的信息才能发挥作用**。

当我将所有 Question 对象加载到我的 Quiz 中时（使用 $quiz_object->LoadQuestions），我的 quiz 对象本质上包含问题信息以及每个测验**问题**的多次实例。

所以看起来有点像

> `Quiz_object`{
> 
> ```
> Question_object:
> {
>     question information
>     instance of `Quiz_object`
> }
> 
> Question_object:
> {
>     question information
>     instance of `Quiz_object`
> }
> 
> Question_object:
> {
>     question information
>     instance of `Quiz_object`
> }
> 
> Question_object:
> {
>     question information
>     instance of `Quiz_object`
> }
> 
> Question_object:
> {
>     question information
>     instance of `Quiz_object`
> } 
> ```
> 
> }

所以我`Quiz`的对象在对象中被多次复制。

我应该担心这一点，还是 PHP 是否将我传递的实例作为对对象的“引用”来处理？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T14:06:04.740

即使您将*相同*的测验实例分配给多个变量，这根本不是问题，但完全可以。

因为您在这里有一个实例，并且每个变量都是访问*该*实例的一种方式，所以在您的示例中，问题*知道*它们属于哪个测验。

在您的设计中，问题需要知道它们属于哪个测验，这就是您所需要的，因此它通常适用。

这是标准的 1:n 关系：

```
 1:n

quiz:questions 
```

请注意将关系数量保持在应用程序正常工作所需的最低限度。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T12:30:06.857

别担心，因为 PHP 版本 5 传递对象是通过引用完成的。

# javascript - 在 ASP.NET 中输入文本框时运行 JSON

> ID：12640032
> 
> 赞同：0
> 
> 时间：2012-09-28T12:27:07.913
> 
> 标签：javascript, jquery, asp.net, json

我需要在键入时获取文本框的值，并执行 JSON 的功能，我尝试这样做：

```
$(document).ready(function () {
  $("#<%= txtBusca.ClientID %>").keypress(function () {
    $.ajax({
      type: "POST",
      data: "{ 'valor' : '" + $(this).val() + "'}",
      url: "Especialidades.aspx/Buscar",
      contentType: "application/json; charset=utf-8",
      dataType: "json",
      success: function () {
        alert('OK');
      }
    })
   });
}); 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T12:30:19.313

我认为下面的行导致了问题

```
data: "{ 'valor' : '" + $(this).val() + "'}", 
```

原因是**这个** 关键字。在您的代码中，它指的是 ajax 上下文。

我建议您在 Ajax 调用块之前将其分配给变量，并在内部引用它，如下所示：

```
$("#<%= txtBusca.ClientID %>").keypress(function () {

var enteredValue=$(this).val();

$.ajax({
  type: "POST",
  data: { 'valor' : enteredValue }, 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T12:30:29.073

您已经用双引号包裹了数据对象，请尝试删除它们：

```
data: { 'valor' : $(this).val() } 
```

# java - 'HIERARCHY_REQUEST_ERR：试图插入不允许的节点。| 当我复制 set:distinct 的结果时

> ID：12640039
> 
> 赞同：0
> 
> 时间：2012-09-28T12:27:41.970
> 
> 标签：java, eclipse, xslt, xalan

我尝试转换（在 Eclipse 中）下面的文档：

```
<doc>
   <city name="Paris"
         country="France" />
   <city name="Madrid"
         country="Spain" />
   <city name="Vienna"
         country="Austria" />
   <city name="Barcelona"
         country="Spain" />
   <city name="Salzburg"
         country="Austria" />
   <city name="Bonn"
         country="Germany" />
   <city name="Lyon"
         country="France" />
   <city name="Hannover"
         country="Germany" />
   <city name="Calais"
         country="France" />
   <city name="Berlin"
         country="Germany" />
</doc> 
```

使用 xslt：

```
<xsl:template match="/">
   <out>
      <all-countries>
            <xsl:copy-of select="//city" />
      </all-countries>
      <distinct-countries>
            <xsl:copy-of select="set:distinct(//@country/..)" />
      </distinct-countries>
   </out>
</xsl:template> 
```

我使用的是**Xalan 2.7.1**，它工作正常，但是当我使用**“JRE Instance Default”**处理器时出现错误：

```
16:07:20,642 ERROR [main] Main  - java.lang.RuntimeException: Run-time internal error in 'HIERARCHY_REQUEST_ERR: An attempt was made to insert a node where it is not permitted. ' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T20:14:50.083

这是猜测，但也许您可以尝试其他方法来获取不同的值。这里有两个建议，都是XSLT2.0的解决方案：

```
<distinct-countries>
    <xsl:copy-of select="distinct-values(//@country)" /> 
</distinct-countries>

<xsl:for-each-group select="//city" group-by="@country">
  <xsl:value-of select="current-grouping-key()" />
</xsl:for-each-group> 
```

如果您使用的是 XSLT1.0，那么在不使用扩展函数的情况下执行此操作的方法是使用一种称为 Muenchian Grouping 的技术。首先通过国家属性定义一个“分组”城市元素的键。

```
<xsl:key name="countries" match="city" use="@country" /> 
```

然后，您可以通过选择每个组中出现的第一个城市元素来挑选不同的国家。

```
<distinct-countries> 
   <xsl:for-each select="//city[generate-id() = generate-id(key('countries', @country)[1])]"> 
      <xsl:value-of select="@country" />
   </xsl:for-each>
</distinct-countries> 
```

# objective-c - 如何在多个 NIB 文件上共享 NSNumberFormatter？

> ID：12640043
> 
> 赞同：0
> 
> 时间：2012-09-28T12:27:55.910
> 
> 标签：objective-c, cocoa, binding

我正在开发一个`NSPersistentDocument`基于每个文档货币设置的应用程序。

最好，我想`NSNumberFormatter` `currencyFormatter`为我的所有 NIB 文件使用一个，但似乎没有任何简单的方法可以绑定`NSTextField` `formatter`到`document.currencyFormatter`或类似的东西。

我很确定可以使用代码手动添加绑定来做到这一点，但这是一项相当多的工作，因为我有很多使用货币格式化程序的字段。

在多个 NIB 文件中共享货币格式化程序的最佳选择是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T13:12:41.430

这里我建议两种方式：

1.  将 NSNumberFormatter 子类化并使其成为单例（每次调用 init 方法都返回相同的对象）。然后在每个 xib 文件中拖动一个对象并将其类设置为 NSNumberFormatter 子类的名称；
2.  只需使用绑定检查器将每个格式化程序绑定到 document.currencyFormatter。

PS：我不确定我是否完全理解您的要求，请告诉我其中一个是否对您有效。

# asp.net - 错误消息 401.2.：未经授权：由于服务器配置，登录失败。部署应用程序时

> ID：12640048
> 
> 赞同：24
> 
> 时间：2012-09-28T12:28:14.207
> 
> 标签：asp.net

我有一个在 cassini 下运行良好的 asp.net 4.0 应用程序，但是当我部署到 IIS 时出现上述错误。它在默认应用程序池下运行，许多其他应用程序使用并正常工作。这是我的网络配置的副本，可能是来源：

```
<!--
  For more information on how to configure your ASP.NET application, please visit
  http://go.microsoft.com/fwlink/?LinkId=169433
  -->

<configuration>
  <connectionStrings>
    <add name="FMLconnect" connectionString="Server=192.168.20.125;Port=;Database=FML;Uid=******;Pwd=*****;pooling=false;" providerName="MySql.Data.MySqlClient"  />
  </connectionStrings>

  <system.web>
    <httpHandlers>
      <add path="ChartImg.axd" verb="GET,HEAD,POST" type="System.Web.UI.DataVisualization.Charting.ChartHttpHandler, System.Web.DataVisualization, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" validate="false"/>
      <add path="ChartImage.axd" type="Telerik.Web.UI.ChartHttpHandler" verb="*" validate="false"/>
      <add path="Telerik.Web.UI.SpellCheckHandler.axd" type="Telerik.Web.UI.SpellCheckHandler" verb="*" validate="false"/>
      <add path="Telerik.Web.UI.DialogHandler.aspx" type="Telerik.Web.UI.DialogHandler" verb="*" validate="false"/>
      <add path="Telerik.RadUploadProgressHandler.ashx" type="Telerik.Web.UI.RadUploadProgressHandler" verb="*" validate="false"/>
      <add path="Telerik.Web.UI.WebResource.axd" type="Telerik.Web.UI.WebResource" verb="*" validate="false"/>
      <add path="Reserved.ReportViewerWebControl.axd" verb="*" type="Microsoft.Reporting.WebForms.HttpHandler, Microsoft.ReportViewer.WebForms, Version=10.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" validate="false"/>
      <add type="Telerik.ReportViewer.WebForms.HttpHandler, Telerik.ReportViewer.WebForms, Version=5.1.11.928, Culture=neutral, PublicKeyToken=a9d7983dfcc261be" path="Telerik.ReportViewer.axd" verb="*" validate="true"/>
    </httpHandlers>
    <compilation debug="true" targetFramework="4.0" >
      <assemblies>
        <add assembly="Microsoft.Build.Framework, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A"/>
        <!--<add assembly="Microsoft.ReportViewer.Common, Version=10.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A"/>
        <add assembly="Microsoft.ReportViewer.WebForms, Version=10.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A"/>-->
        <add assembly="System.Data.Linq, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
        <add assembly="System.Design, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A"/>
        <add assembly="System.Management, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A"/>
        <add assembly="System.Web.DataVisualization, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
      </assemblies>
    </compilation>

  </system.web>

  <system.webServer>
       <validation validateIntegratedModeConfiguration="false" />
    <modules runAllManagedModulesForAllRequests="true" />
  </system.webServer>
</configuration> 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-28T13:03:14.167

使用 IIS，这听起来就像您需要在 IIS Admin 中检查您的应用程序的身份验证设置。试试这个链接： http: [//support.microsoft.com/kb/253667](http://support.microsoft.com/kb/253667)

这是针对 IIS6 的，您没有提到您使用的是 IIS 6 还是 7。对于 IIS 7，请尝试以下操作：http: [//support.microsoft.com/kb/942043](http://support.microsoft.com/kb/942043)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-04-24T15:26:31.503

如果您使用 IIS Express，请检查 web.config

```
 <!--  AUTHENTICATION 
      This section sets the authentication policies of the application. Possible modes are "Windows", 
      "Forms", "Passport" and "None"
-->
    <authentication mode="Windows"/>
    <identity impersonate="true"/>
    <!--  AUTHORIZATION 
      This section sets the authorization policies of the application. You can allow or deny access
      to application resources by user or role. Wildcards: "*" mean everyone, "?" means anonymous 
      (unauthenticated) users.
-->
    <!--<authorization>
        <deny users="?"/>-->
        <!-- Allow all users -->
        <!--  <allow     users="[comma separated list of users]"
                         roles="[comma separated list of roles]"/>
              <deny      users="[comma separated list of users]"
                         roles="[comma separated list of roles]"/>
        -->
    <!--</authorization>--> 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-07-15T08:48:57.957

我将 VS2012 项目升级到 2013 并将项目属性从 Windows 身份验证从启用更改为禁用，然后我收到此错误。简单的改变解决了这个问题。转到解决方案并单击属性以更改此设置。

如果您使用的是 IISExpress，那么这些行应该类似于：

```
<IISExpressAnonymousAuthentication>disabled</IISExpressAnonymousAuthentication>
<IISExpressWindowsAuthentication>enabled</IISExpressWindowsAuthentication> 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2016-02-10T17:31:55.010

我刚才也有同样的问题。我发现的修复都没有奏效，所以我会在这里发布以防它对某人有所帮助。

对我来说，问题是这样解决的：

*   打开 IIS 管理器
*   选择“应用程序池”
*   右键单击您正在使用的应用程序池，然后选择“高级设置”
*   将“启用 32 位应用程序”设置为“真”
*   单击“确定”关闭对话框
*   再次右键单击应用程序池并选择“回收”

希望这会帮助别人！这让我发疯了。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2020-06-24T16:11:27.847

This *always* happens to our project after it's reloaded. [![enter image description here](../Images/ae9d191e47c2a66ff03e582f93c0f5ea.png)](https://i.stack.imgur.com/eHI1x.png)

If you're using **Windows Authentication**, the problem might be as simple as updating your project properties to **Enable** Windows Authentication.

In Visual Studio, get to your project properties (I usually right-click a file > properties to open the properties window. Then click on my project). Make sure Windows Authentication is set to **Enabled**

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2014-06-16T16:27:15.530

尝试这个：

*   打开 IIS 管理器
*   在连接栏中单击您的 Web 服务器（即服务器本身；不是站点）。
*   从 IIS 部分中选择身份验证。
*   根据需要启用协议。此处禁用的任何内容将无法用于此服务器上托管的站点；此处启用的任何内容都将使用各个站点的设置。
*   重新启动 IIS ( `start`, `run`, `cmd`(以管理员身份运行), `iisreset -noforce`)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-06-26T13:19:08.740

这可能是一个非常晚的答案，但我的问题是错误配置的发布配置文件（使用 Web 部署）。一旦我取消选择该`Precompile during publishing`选项（如下）并重新发布，它就会恢复正常并且我能够访问它。

我还尝试了几次激活/停用它，并确认这是唯一的原因。当我再次激活它时问题出现了，当我取消选中它时问题消失了。

![在此处输入图像描述](../Images/0d8dc7744ce8127155bb6bb3fd76c71e.png)

老实说，我仍然没有解释这个选项究竟有什么影响以及为什么它会导致这样的问题。我发现了这个[问题](https://stackoverflow.com/questions/16179519/what-effect-does-the-new-precompile-during-publishing-option-have-on-mvc4-applic)，但我仍在调查。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2019-12-18T18:07:10.293

如果您使用的是 Windows 身份验证，则可能是您的授权设置。打开 web.config 文件：

```
 <system.web>
    <authentication mode="Windows"></authentication>
    <identity impersonate="false" />
    <authorization>
        <allow roles="domain_name1\group_name1,domain_name2\group_name2" />
      <deny users="*" />
    </authorization> 
```

确保您分配了正确的角色。如果您需要包括所有用户，请使用：

```
<allow users="*" /> 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2018-07-24T15:11:48.653

对我来说，我不得不从“属性”面板更改设置来解决这个问题。选择项目并点击 F4（菜单：View->Properties Window）并相应地设置属性。

[Visual Studio 2015 - 属性面板屏幕截图](https://i.stack.imgur.com/ukNsB.png)

希望这可以帮助！

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2018-10-11T14:50:58.457

我通过使用以下说明将 BackConnectionHostNames 添加到注册表来解决 401.1 和 401.2 身份验证错误：https: [//support.microsoft.com/en-us/help/896861/you-receive-error-401-1-when-you-browse -a-web-site-that-uses-integrate](https://support.microsoft.com/en-us/help/896861/you-receive-error-401-1-when-you-browse-a-web-site-that-uses-integrate)（方法 1）

1.  单击开始，单击运行，键入 regedit，然后单击确定。
2.  在注册表编辑器中，找到并单击以下注册表项：
3.  HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Lsa\MSV1_0
4.  右键单击 MSV1_0，指向新建，然后单击多字符串值。
5.  键入 BackConnectionHostNames，然后按 Enter。
6.  右键单击 BackConnectionHostNames，然后单击修改。
7.  在数值数据框中，键入本地计算机上站点的主机名或主机名，然后单击确定。
8.  退出注册表编辑器，然后重新启动 IISAdmin 服务。

这些错误发生在运行版本 1803 的 Windows 10 Professional 安装上，该域的名称与我尝试验证的站点不同。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2018-12-18T06:24:29.153

我有一个类似的问题，并通过在 web.config 中将**optimizeCollections**设置为**false**并在验证它是否有效后立即*恢复更改来解决它。*

```
 <system.web>
    ..
    <compilation debug="true" targetFramework="4.7.1" optimizeCompilations="false" />
    ..
  </system.web> 
```

通过删除 asp.net 临时文件夹也许可以实现同样的事情。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2019-03-22T14:46:17.447

对我有帮助的是在 web.config 中注释掉以下行

```
<system.web>
    <compilation debug="true" targetFramework="4.5.2" />
    <httpRuntime targetFramework="4.5" />
    <!--  
    <authentication mode="Windows" /> 
    <authorization>
        <deny users="?" />
    </authorization>
    <identity impersonate="false" />
    -->
    <customErrors mode="Off" />
</system.web> 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2022-02-20T15:59:06.520

1.  在解决方案资源管理器中单击您的项目以选择该项目。

2.  按`F4`（对于属性）。

3.  在项目的“属性”窗格中：

    1.  将“匿名身份验证”设置为“禁用”。
    2.  将“Windows 身份验证”设置为“启用”。

然后运行项目。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2019-06-17T04:23:56.267

如果它是基于 Windows 身份验证的应用程序，则在 IIS 中为您的站点启用 Windows 身份验证并禁用匿名身份验证。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2015-11-17T02:59:00.800

**尝试在IIS Express**下运行现有的**ASP.NET WebForms**应用程序时，我也遇到了这个错误（但这可能也适用于**IIS**）。

 ****该应用程序在 applicationhost.config 中配置**为**使用**Clr4IntegratedAppPool**应用程序池。*将applicationPool*属性更改为**Clr4ClassicAppPool**为我解决了这个问题。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2020-11-17T09:34:28.670

我有同样的错误，应用程序在本地运行良好，但从 IIS 运行时出现未经授权的错误。我尝试了几种方法，但没有运气。我终于使用了以下方法：

我使用的是匿名身份验证，它无法正常工作，因为它无法找到代码文件的路径。因此，我将 Windows 身份验证设置为 True 和 VOILA！有效。

您可以通过单击左侧窗格中的应用程序名称来找到 Windows 身份验证 - 选择身份验证 - Windows 身份验证（设置为启用）。

此外，如果您无法在此处微调 Windows 身份验证，则需要从控制面板 - 程序功能 - 打开或关闭 Windows 功能 - IIS - 万维网服务 - 安全 - Windows 身份验证中选择它（检查它）。现在转到 IIS，你会找到它。****

# html - 如何使用 Galaxy S3 的视口元标记？

> ID：12640049
> 
> 赞同：5
> 
> 时间：2012-09-28T12:28:27.807
> 
> 标签：html, responsive-design, viewport, galaxy

我正在尝试在 Galaxy S3 上设置视口宽度，但结果是有线的。

```
<meta id="ctl00_meta" name="viewport" content="width=640" /> 
```

此视口适用于 iPhone 和其他设备，但不适用于 Galaxy S3。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-28T12:50:56.137

您需要添加`, target-densitydpi=device-dpi`到您的内容。

# python - nginx+uwsgi+django，如何配置404.html和502.html

> ID：12640058
> 
> 赞同：0
> 
> 时间：2012-09-28T12:29:00.543
> 
> 标签：python, django, nginx, uwsgi

我关闭调试模式，当我访问非退出页面时看到默认的 502 错误。

我已经在我的项目中放入了 404.html、403.html、502.html，但是我仍然看不到这些页面，项目除了这部分之外一切正常，我应该如何配置这个问题？

我的配置如下：

```
server{
listen 80;
server_name 119.254.35.221;
location /{
uwsgi_pass 127.0.0.1:8000;
include uwsgi_params;
uwsgi_param UWSGI_SCRIPT www.wsgi;
uwsgi_param UWSGI_CHDIR /root/www;
uwsgi_param UWSGI_PYHOME /root/www;
uwsgi_param SCRIPT_NAME "";
}
} 
```

项目树：

```
[root@vps616 www]# pwd
/root/www
[root@vps616 www]# ll
total 1036
drwxr-xr-x 2 root root    4096 Sep 28 11:05 books
-rwxr-xr-x 1 root root     246 Sep 27 13:29 manage.py
-rw------- 1 root root    6228 Sep 28 09:56 nohup.out
-rwxr-xr-x 1 root root      41 Sep 27 23:54 restart.sh
-rwxr-xr-x 1 root root      53 Sep 28 16:51 start.sh
drwxr-xr-x 2 root root    4096 Sep 28 20:18 static
-rw-rw-rw- 1 root root     217 Sep 28 14:05 uwsgi.ini
-rw-r--r-- 1 root root     272 Sep 27 23:16 uwsgi.xml.backup
drwxr-xr-x 3 root root    4096 Sep 28 20:27 www
-rw-r----- 1 root root 1009290 Sep 28 20:25 www.log
-rw-rw-rw- 1 root root       6 Sep 28 16:48 www.pid
[root@vps616 www]# ll www
total 48
-rw-r--r-- 1 root root    0 Sep 28 20:27 403.html
-rw-r--r-- 1 root root    0 Sep 28 20:18 404.html
-rw-r--r-- 1 root root  227 Sep 28 17:01 forms.py
-rw-r--r-- 1 root root    0 Sep 27 13:29 __init__.py
-rw-r--r-- 1 root root  112 Sep 28 08:46 __init__.pyc
-rw-r--r-- 1 root root 5247 Sep 28 20:20 settings.py
-rw-r--r-- 1 root root 2924 Sep 28 20:20 settings.pyc
drwxr-xr-x 2 root root 4096 Sep 28 17:04 templates
-rw-r--r-- 1 root root  630 Sep 28 16:47 urls.py
-rw-r--r-- 1 root root  641 Sep 28 11:03 urls.pyc
-rw-r--r-- 1 root root  625 Sep 28 17:22 views.py
-rw-r--r-- 1 root root  871 Sep 28 11:03 views.pyc
-rw-r--r-- 1 root root 1126 Sep 28 12:32 wsgi.py
-rw-r--r-- 1 root root 1000 Sep 28 12:32 wsgi.pyc
[root@vps616 www]# 
```

uwsgi 配置：

```
[root@vps616 www]# cat uwsgi.ini 
[uwsgi]  
uid = 500
listen=200
master = true  
profiler = true 
processes = 8 
logdate = true  
pidfile = /root/www/www.pid  
daemonize = /root/www/www.log  
enable-threads = true
memory-report = true
limit-as = 6048 
```

启动命令：

```
uwsgi --ini uwsgi.ini -s 127.0.0.1:8000 
```

多谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T12:50:34.497

尝试将 404.html 等文件移动到您的模板目录中（如果您有 base_site.html）

# android - 如何增加listview的高度？

> ID：12640061
> 
> 赞同：-1
> 
> 时间：2012-09-28T12:29:13.470
> 
> 标签：android

在我的应用程序中，我使用的是列表视图。我正在使用`ResourceCursorAdapter`自定义布局设计将列表视图中的值填充为数据库中的两个行列表项。数据填充正确，但我需要增加两个文本视图之间的差距以及列表视图的高度。![在此处输入图像描述](../Images/68b3de1227a9c9040997df787a067ea8.png)

我正在使用以下代码：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="40sp"
    android:orientation="horizontal" >

    <ImageView
        android:id="@+id/imageSettings"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:src="@android:drawable/btn_star" />

    <TextView
        android:id="@+id/list_apiname"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_marginLeft="10dp"        
        android:textColor="@android:color/white"
        android:textSize="20dp" />

    <TextView
        android:id="@+id/list_apiurl"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/list_apiname"
        android:layout_alignParentBottom="true"        
        android:textColor="@android:color/darker_gray"/>

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T12:51:01.690

试试这个

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal"
    android:gravity="center_vertical" >

     <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/list_apiname"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_alignParentTop="true"
            android:textColor="@android:color/white"
            android:text="jhf dnkldsklgkdfghngf"
            android:paddingLeft="10dip"
            android:textSize="20dp" />

        <TextView
            android:id="@+id/list_apiurl"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignLeft="@+id/list_apiname"
            android:layout_alignParentBottom="true"  
             android:text="jhf dnkldsklgkdfghngf"      
            android:textColor="@android:color/darker_gray"
            android:paddingLeft="10dip"
            android:layout_marginTop="5dip"/>

    </LinearLayout>
     <ImageView
            android:id="@+id/imageSettings"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_alignParentTop="true"
            android:src="@android:drawable/btn_star" />

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T12:38:42.887

将列表视图高度设置为 fill_parent 以填充整个视图：

```
android:layout_height="wrap_content" 
```

要在文本项之间获得一些间距，请在它们上设置一些填充：

```
android:padding="5dp" 
```

或者，如果您只想在某个方向上填充：

```
android:paddingBottom="5dp" 
```

... 等等。

# c# - 项目 ASP.net MVC 之间的调用事件

> ID：12640064
> 
> 赞同：0
> 
> 时间：2012-09-28T12:29:20.847
> 
> 标签：c#, asp.net-mvc, filter, layer

我有一个 ASP.NET 项目，它分为 3 层：Filter、Filter.Data 和 Filter.Task

Filter 有一个控制器，它调用 Filter.Task 调用 Data 中的模型。任务将数据返回给控制器。

当 Filter.Task 中的任何函数返回数据时，我想调用我的 DatabaseFilter 类。

这可能吗？

我使用 HttpApplication.BeginRequest 进行了测试，但无法检查代码是否来自 Task

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T14:26:31.257

你不能像这样使用动作过滤器：

```
public class DatabaseActionFilter : ActionFilterAttribute
{
    public override void OnActionExecuted(ActionExecutedContext filterContext)
    {
        var result = filterContext.Result;

        var model = result.ViewData.Model;
    }
} 
```

然后为您的数据类型的实例分析模型并相应地调用您的 DatabaseFilter 类？

然后，您可以将其作为属性添加到控制器方法的顶部：

```
[DatabaseAction]
public ActionResult MyControllerMethod() 
```

希望这会有所帮助，并且我正确地解释了您的问题。

# jsp - 保存对话框正在服务器端打开

> ID：12640065
> 
> 赞同：1
> 
> 时间：2012-09-28T12:29:21.070
> 
> 标签：jsp

我正在使用 JSP 编写基于 Web 的应用程序。我已经向客户提供了一些歌曲链接。当客户端单击链接时，该文件应保存在客户端计算机上。但是当客户端单击链接时，文件保存对话框会在服务器屏幕上打开。需要做什么才能在客户端计算机上打开...？我的代码片段如下：

```
fis=new FileInputStream(path);
bis=new BufferedInputStream(newProgressMonitorInputStream(null,"Downloading File : "+fileName,fis));    
JFileChooser chooser=new JFileChooser();
    chooser.showSaveDialog(null);
    if(chooser.getSelectedFile() != null)
    {
        String savePath=chooser.getSelectedFile().getPath();

        modifiedPath=(savePath.replace('\\','/')).concat(".mp3");

        fos=new FileOutputStream(modifiedPath);
        bos=new BufferedOutputStream(fos);
        int c;
        int i=1;
        try
        {
            while((c=bis.read())!=-1)
            {
                bos.write(c);
                i +=c;

            }
        } 
```

}

文件名是要下载的文件，而保存路径是客户端 m/c 上要保存文件的位置.... fis、bis、bos、fos 都是流。请提前帮助..thnx

# c# - 如何使用foreach添加父节点

> ID：12640070
> 
> 赞同：1
> 
> 时间：2012-09-28T12:29:28.977
> 
> 标签：c#, xml, nodes

我在使用 C# 的 Xml 生成器中遇到了大麻烦。我找不到如何添加包含元素名称的父节点。

信息来自数据库并插入到内存中的 Xml 文档中。我必须按名称获取这些节点，因为我需要转换其中的一些。

代码：

```
XmlElement xe = xd.CreateElement("xe");

foreach (XmlNode node in xd.DocumentElement.ChildNodes)
{
    XmlNode imported = xd.ImportNode(node, true);
    xe.AppendChild(imported["a"]);
    xe.AppendChild(imported["b"]);
    xe.AppendChild(imported["c"]);
    xe.AppendChild(imported["d"]);
} 
```

结果：

```
<node>
    <a>1</a>
    <b>2</b>
    <c>3</c>
    <d>4</d>
    <a>1</a>
    <b>2</b>
    <c>3</c>
    <d>4</d>
    <a>1</a>
    <b>2</b>
    <c>3</c>
    <d>4</d>
</node> 
```

我需要的：

```
<node>
    <ex>
        <a>1</a>
        <b>2</b>
        <c>3</c>
        <d>4</d>
    </ex>
    <ex>
        <a>1</a>
        <b>2</b>
        <c>3</c>
        <d>4</d>
    </ex>
    <ex>
        <a>1</a>
        <b>2</b>
        <c>3</c>
        <d>4</d>
    </ex>
</node> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T12:42:06.703

将子元素附加到名为“ex”的元素，然后将该元素附加到根

```
 foreach (XmlNode node in xd.DocumentElement.ChildNodes)
    {
        XmlNode imported = xd.ImportNode(node, true);
        XmlElement ex = xd.CreateElement("ex");
        ex.AppendChild(imported["a"]);
        ex.AppendChild(imported["b"]);
        ex.AppendChild(imported["c"]);
        ex.AppendChild(imported["d"]);
        xd.AppendChild(ex);
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T12:44:55.843

您可以使用此代码

```
 XmlElement xe = xd.CreateElement("xe");

    foreach (XmlNode node in xd.DocumentElement.ChildNodes)
    {
        XmlNode imported = xd.ImportNode(node, true);

        XmlElement child = xd.CreateElement("ex");

        child.AppendChild(imported["a"]);
        child.AppendChild(imported["b"]);
        child.AppendChild(imported["c"]);
        child.AppendChild(imported["d"]);

        xe.AppendChild(child); 

    } 
```

# c# - 在代码中包含 WebService app.config 设置

> ID：12640075
> 
> 赞同：1
> 
> 时间：2012-09-28T12:29:49.947
> 
> 标签：c#, web-services, ssis

我的代码包含对 Web 服务的引用，如果我希望它运行，我需要在我的 app.config 中添加以下部分：

```
 <client>
        <endpoint address="http://123.45.6.78:8080/ASPPO/StartASPPOCallBack"
            binding="basicHttpBinding" bindingConfiguration="StartASPPOCallBackPortBinding"
            contract="ASPPOCallBack.StartASPPOCallBack" name="StartASPPOCallBackPort" />
    </client> 
```

我现在的问题是，我的代码被 SSIS 包调用，并且没有任何 app.config。所以我需要在代码中直接包含我需要的所有设置，否则我会得到一个 System.Reflection.TargetInvocationException 。

但我实际上不知道把它放在哪里。你能给我一个提示吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T16:09:05.890

如果您的代码由 SSIS 调用（而不是通过外部应用程序），您必须修改`.config`将执行您的 SSIS 包的应用程序文件：`DTExec.exe`, `dtshost.exe`, `devenv.exe`, `DTExecUI.exe`. 在这里，您可以获得更多有关适当 .config 位置的信息：[http ://www.sqlis.com/post/Where-is-my-appconfig-for-SSIS.aspx](http://www.sqlis.com/post/Where-is-my-appconfig-for-SSIS.aspx)

`.config`或者，您可以使用类似于[http://blogs.msdn.com/b/dbrowne/archive/2010/07/08/how-to-configure-an-ssis-package-to](http://blogs.msdn.com/b/dbrowne/archive/2010/07/08/how-to-configure-an-ssis-package-to-access-a-web-service-using-wcf.aspx)的代码（而不是通过文件）配置端点[-access-a-web-service-using-wcf.aspx](http://blogs.msdn.com/b/dbrowne/archive/2010/07/08/how-to-configure-an-ssis-package-to-access-a-web-service-using-wcf.aspx)

# javascript - Android的电话间隙，创建数据库，插入值，在表视图中检索它

> ID：12640077
> 
> 赞同：0
> 
> 时间：2012-09-28T12:30:13.780
> 
> 标签：javascript, jquery, database, cordova

我是 Android Phone-gap 的新手。我想创建一个数据库并插入值并在表视图中显示这些值。请告诉我如何执行此操作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T12:37:39.467

我建议阅读 Phonegap 提供的[API 文档。](http://docs.phonegap.com/en/1.2.0/index.html)有关数据库和本地存储的查询，请查看[此](http://docs.phonegap.com/en/1.2.0/phonegap_storage_storage.md.html#SQLResultSet)内容。快乐的应用程序建设！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T07:32:17.657

我完成了这件事如下：

这是我的 JavaScript：

```
<script type="text/javascript">

            var firstNameBox=null;
            var lastNameBox=null;
            var=null;
            var dataTable=null; <!-- Called when phonegap javascript is loded -->

            function onDeviceReady()
            {
                var addButton = document.getElementById("add");
                firstNameBox = document.getElementById("firstName");
                lastNmaeBox = document.getElementById("lastName");
                dataTable = document.getElementById("data-table");

                db=Window.openDatabase("contactDB",1.0,"Contact Database,1000000"); <!--name,version,display name,size -->
                addButton.addEventListener("click",function(){
                    db..transaction(
                    <!-- SQL Statments -->
                    funnction(tx){
                        ensureTableExists(tx);
                        var firstName= firstNameBox.value;
                        var lastNameBox.value;

                        var sql='INSERT INTO Contacts(firstName,lastName) VALUES ("'+firstName+'","'+lastName+'")';
                        tx.executeSql(sql);
                    },
                    //error callback
                    function(err){
                        alert("error callback"+err.code);
                    },
                    //success callback
                    function(err){
                        loadFromDB();
                    });

                },false);
                loadFromDB();
            }

            loadFromDB();
            }

            function loadFromDB(){
                db.transaction(
                //function sql statements

                function(tx){
                    ensureTableExists(tx);
                    tx.executeExists('SELECT *FROM Contacts',[],function(tx,results){
                        var htmlStr="";
                        for(var index=0;index<results.rows.length;index++){
                            var item = result.rows.item(index);
                            htmlStr=htmlStr+"<tr><td>"+item.firstName+"</td><td>"+item.lastName+"</td><td><button onclick=\"deleteEntry('"+item.id+"');\">X</button></td></tr>";
                        }
                        dataTable.innerHTML=htmlStr;},function(err{
                            alert("Unable to fetch result from Contacts Table");
                        });
                },
                //error CallBack
                function(err){
                    alert("error callBack"+err.code+""+err.message);
                },
                //Success CallBack
                function(){
                    firstNameBox.value = "";
                    lastNameBox.value ="";
                });
                    }
                function deleteEntry(id){
                    db.transaction(
                    //function sql statements
                    function(tx){
                        ensureTableExists(tx);
                        tx.executeSql('Delete FROM Contacts where id'+id);
                    },
                    //eror callback
                    function(err){
                        alert("error callback"+err.code+" "+err.message);
                    },
                    //success callback
                    function(err){
                        loadFromDB();
                    });
                }   

                function ensureTableExists(tx){
                    tx.executeSql('CREATE TABLE IF NOT EXISTS Contacts(id INTEGER PRIMARY KEY,firstName,lastName)');
                }
                //Called when browers is loded
                function init(){
                    document.addEventListener("deviceready",onDeviceReady,false);
                }
        </script> 
```

这是我的 HTML 正文：

```
<body onload="init()">

    <h3>Database Table View</h3>

    <table border="1">
    <tr> <td> <b>First Name</b> </td>
         <td> <b>Last Name</b> </td>
         <td> <b>Action</b> </td>  
    </tr>
    </table>

   <table id="data-table"></table>

   <table> <tr> <td> <input id="firstName" type="text"></input></td>
   <td><button id="add">Add</button></td></tr></table>
    </body> 
```

# php - Access、ODBC 和 PHP 使用 WHERE 子句变慢

> ID：12640079
> 
> 赞同：4
> 
> 时间：2012-09-28T12:30:23.967
> 
> 标签：php, sql, ms-access, odbc, where-clause

`odbc_connect`我在 PHP 中通过 DSN 执行以下查询：

```
SELECT Orders.Brand, Orders.AdFolder
  FROM Orders
  LEFT JOIN MPC_Agents ON Orders.UserName = MPC_Agents.UserName
 WHERE  Orders.AdFolder = '$udf' 
```

当直接在 MS Access 中运行时，结果是即时的。通过`odbc_execute($conn, $query)`它运行时速度非常慢，但会在一段时间后执行。

当`WHERE`语句被取出时，它会相当快，尽管在 Access SQL 控制台中运行时与`WHERE`语句的速度相同。

任何人都可以帮助确定问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T12:35:48.240

为了防止整个表被查询拉取，拥有合适的索引很重要。

# c++ - 正则表达式和Boost

> ID：12640081
> 
> 赞同：1
> 
> 时间：2012-09-28T12:30:32.153
> 
> 标签：c++, regex, boost

我对 boost 中的以下正则表达式有疑问：

```
const boost::regex eComment("^\/\*[\s\S]*?\*\/|^\/\/"); 
```

当我使用此正则表达式运行程序时，它会因消息而中止：

```
terminate called after throwing an instance of 'boost::exception_detail::clone_impl<boost::exception_detail::error_info_injector<boost::regex_error> >'

what():  Invalid preceding regular expression prior to repetition operator.  
The error occured while parsing the regular expression: '^/*[sS]*?*>>>HERE>>>/|^//'. 
```

此正则表达式应在`*.cpp`文件中找到带有注释的行，但如果该行中有代码则应跳过。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T12:33:07.040

我认为问题在于您忘记转义反斜杠字符。每个反斜杠都应该像 \\s\\S 而不是 \s\S 那样加倍

希望能帮助到你

# php - 如何在 symfony 1.2 框架中将选择框更改为文本框？

> ID：12640086
> 
> 赞同：0
> 
> 时间：2012-09-28T12:31:05.103
> 
> 标签：php, symfony-1.2

我是 symfony 框架的新手。我在一个已经存在的项目上工作过，所以我想使用 symfony 1.2 将选择框更改为文本框。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T20:11:53.417

更多信息和代码片段会有所帮助，但是..

有几个地方可以做到这一点，我会选择最直接和最常见的两个。

1) 您的表单已经过定制，很可能会在`plugins/yourPlugin/lib/form/yourForm.class.php`

在这里会有类似的东西`$this->setWidget('my_input', new sfWidgetChoice(array([...])));`

它可能有许多“选择”小部件（如果它们来自数据库，则为 Doctrine 或 Propel）

您需要将其更改为`$this->setWidget('my_input', new sfWidgetFormInput());`

2）你的表单之前没有修改过，是生成的表单

您将需要进入您的`actions.class.php`（或`components.class.php`）并找到它说的位置`$this->form = new yourForm();`

制作一个新表格`plugins/yourPlugin/lib/form`并使其扩展您以前的表格。

```
class yourNewForm extends yourForm 
```

然后加

```
public function setup()
{
 $this->setWidget('my_input', new sfWidgetFormInput());
} 
```

您可能还必须更新验证器，否则它将需要“选择框”格式的数据。

[http://www.symfony-project.org/api/1_1/sfWidgetFormInput](http://www.symfony-project.org/api/1_1/sfWidgetFormInput)

# c# - 提高 REST 服务的性能

> ID：12640092
> 
> 赞同：0
> 
> 时间：2012-09-28T12:31:31.967
> 
> 标签：c#, performance, rest

我的方法在 for 循环中调用存储过程 300 次，每次存储过程返回 1200 条记录。我该如何改进呢？我无法消除 300 个电话，但有什么其他方法可以尝试。我正在使用通过 ASP.NET 实现的 REST 服务并使用 IBATIS 进行数据库连接

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T12:40:24.523

> 我无法消除 300 个电话

**消除 300 个电话。**

即使您所能做的只是添加另一个调用原始存储过程 300 次的存储过程，汇总结果，您应该会看到巨大的性能提升。

如果您可以编写一个复制原始功能但结构更适合您的特定用例的新存储过程，并且调用一次，那就更好了。

在代码和数据库之间进行 300 次往返非常简单，*即使代码和数据库位于同一系统上也是如此*。

一旦解决了这个可怕的问题，如果需要，您还可以考虑优化其他事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T12:49:59.973

好吧，如果您必须返回 360,000 条记录，则您必须返回 360,000 条记录。但是你真的需要返回 360,000 条记录吗？从那里开始，一路向下。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T12:40:37.500

措施。

衡量在服务器端代码中花费的时间。测量在存储过程中花费的时间量。测量在客户端部分花费的时间。做一些数学运算，您可以粗略估计网络时间和其他开销。

返回 1200 条记录，我*预计*网络带宽是主要问题之一；您也许可以调查不同的序列化引擎（具有相同的输出类型）是否有帮助，或者添加压缩（gzip / deflate）支持是否有益（意味着：减少带宽比增加所需的 CPU 更重要）。

如果您调用 REST 服务 300 次，延迟可能很重要；也许您可以稍微并行化，或者进行更少的大调用而不是大量的小调用。

您可以批处理 SQL 代码，因此您只需访问数据库几次（每次都重复调用 SP）——这是完全可能的；只需使用`EXEC`等（仍在使用参数化）。

您可以查看如何将数据从 ADO.NET 获取到 REST 层。您提到了 IBATIS，但是您是否检查过这与“dapper”相比是否快/慢？

最后，可以研究 SP 性能本身；索引或只是重新构建 SP 的 SQL 可能会有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-30T13:17:04.847

在不了解太多细节的情况下，该架构似乎存在缺陷。一方面，在使用单个 SP 执行检索 360,000 条记录所需的 6 秒内锁定表被认为是不合理的，但返回通过多个 SP 执行检索的可能不一致的 360,000 条记录集是可以的。这让我想知道您到底想实现什么，以及是否有更好的方法来设计客户端和服务器之间的集成。

例如，如果客户端正在检索自上次请求以来创建的一组记录，那么[分页的 ATOM 提要](http://www.ietf.org/rfc/rfc5005.txt)可能更合适。

无论您在做什么，360,000 条记录是在服务器和客户端之间移动的大量数据，我们应该查看该数据传输的架构和目的，以确保当前方法是合适的。

# java - java - 如何使用java获取活动/聚焦应用程序的窗口大小？

> ID：12640100
> 
> 赞同：0
> 
> 时间：2012-09-28T12:31:48.393
> 
> 标签：java, automation, printscreen

我有一个用 JAVA 编写的程序，只要按下 PRINTSCREEN，它就会在指定路径创建一个 JPG 文件。该程序在后台运行并使用 JIntellitype API。

我的问题是：

`screensize = new Rectangle(Toolkit.getDefaultToolkit().getScreenSize());`

是我能找到的唯一可用的函数来获取屏幕大小，我稍后用它来获取这样的缓冲图像：

`bf = screenRobot.createScreenCapture(screensize);`

where`bf`是`BufferedImage`数据类型。

有什么办法可以让我获得当前活动窗口的屏幕大小，这样不需要的内容就不会保存在 JPG 文件中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T12:37:37.080

```
Frame.getX()
Frame.getY()
Frame.getWidth()
Frame.getHeight() 
```

# java - android unicode 到可读字符串

> ID：12640106
> 
> 赞同：1
> 
> 时间：2012-09-28T12:32:05.823
> 
> 标签：java, android, string, unicode, textview

当我从网页阅读一些文本时，我在 TextView 中显示 unicode 字符时遇到了一些问题。

我正在使用以下代码检索 Web 内容：

```
try {
    HttpGet request = new HttpGet();
    request.addHeader("User-Agent", USER_AGENT);
    request.setURI(new URI(wwwlink));
    try {
        response4 = httpClient.execute(request);
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
} catch (URISyntaxException e) {e.printStackTrace();}   
try {
    in2 = null;
    String UTF8 = "UTF-8";
    in2 = new BufferedReader (new InputStreamReader(response4.getEntity().getContent(),UTF8));
} catch (IllegalStateException e) {Log.i(tag,e.toString());
} catch (IOException e) {Log.i(tag,e.toString());} 
```

我正在阅读的页面有这个 HTML 标题标签：

```
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/> 
```

现在的问题是：我阅读了行和一些我需要的文本包含这样的 unicode 字符：

```
20 \u00b0C (20 degree symbol C ) 
```

我正在尝试将其转换并在 TextView 中显示为度数符号。

以下是工作

```
textview.settext("\u00b0"); 
```

但是当我这样做时，该行包含 unicode 字符：

```
line = in2.readln;
textview.settext(line); 
```

TextView 会显示 fe：`some text \u00b0 some text`

我已经用模拟器和手机检查了所有内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T14:35:08.933

由于您的输入文本包含 unicode 的 java 表示，因此您需要手动替换这些字符来更正这些字符。在这里，我举一个例子，如何从字符串中替换一个字符，只是为了给出一个粗略的想法：

```
 String input = "some text \\u00b0 some text";
    Scanner scanner =  new Scanner(input);
    String unicodeCharStr = scanner.findWithinHorizon("\\\\{1}u[0-9a-fA-F]{4}", 0);
    char unicodeChar = (char)(int)Integer.valueOf(unicodeCharStr.substring(2, 6), 16);
    input = input.replace(unicodeCharStr, unicodeChar+""); 
```

# php - PHP数组，获取循环索引信息

> ID：12640107
> 
> 赞同：-4
> 
> 时间：2012-09-28T12:32:07.950
> 
> 标签：php, arrays, multidimensional-array, foreach

让我解释一下下面的数组：

1、2 和 3 代表星期一、星期二和星期三。

13、14 和 15 是一个月中的日子。

15:00 - 16:20 (..) 是电影放映的时间。

这意味着在 13 日星期一下午 3 点到 4 点 20 分，您可以观看“蝙蝠侠”。

同样在 13 日星期一下午 6:10 到晚上 7:30，您可以观看“苦难”……等等。

```
$myarray
: array = 
  1: array = 
    13: array = 
      15:00 - 16:20: array = 
        Movie: string = Batman                 
      18:10 - 19:30: array = 
        Movie: string = Misery                 
  2: array = 
    14: array = 
      15:00 - 16:20: array = 
        Movie: string = The Avengers                
      16:20 - 17:50: array = 
        Movie: string = The Hours                 
  3: array = 
    15: array = 
      18:10 - 19:30: array = 
        Movie: string = Gladiator 
```

您能否帮我回显这个数组，以便您可以按以下格式查看其中的信息？：

```
Monday - 13
15:00 - 16:20 - Batman
18:10 - 19:30 - Misery
Tuesday – 14 
15:00 - 16:20 - The Avengers                
16:20 - 17:50 - The Hours
Wednesday – 15
8:10 - 19:30  -  Gladiator 
```

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T12:37:38.690

我正在对数组的真实布局做出假设，以下将创建一个`$weekDays`数组来映射整数和星期几（我定义了键，以便您可以随时移动它们）：

```
$weekDays = (1=>'Monday', 2=>'Tuesday', 3=>'Wednesday', 4=>'Thursday', 5=>'Friday', 6=>'Saturday', 7=>'Sunday');

// loop through each week-day in the array
foreach ($myarray as $weekDay => $dates) {
    // loop through each "movie date" in the current week-day block
    foreach ($dates as $monthDate => $movies) {
        // output the day-of-the-week and the date-of-the-month
        echo $weekDays[$weekDay] . ' - ' . $monthDate . '<br />';

        // loop through all of the movies for the current date-of-the-month
        foreach ($movies as $movieTime => $movie) {
            // output the movie's time and name
            echo $movieTime . ' - ' . $movie . '<br />';
        }
    }
} 
```

这是假设您的示例中的数组确实采用以下格式：

```
$myarray = array(
    1 => array(
        13 => array(
            '15:00 - 16:20' => array(
                'Movie' => 'Batman'
            ),
            '18:10 - 19:30' => array(
                'Movie' => 'Misery'
            )
        ), // ... can repeat
    ), // ... can repeat
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T12:42:06.690

您可以尝试以下代码：[参见演示](http://codepad.viper-7.com/ss96s0)

```
$myarray = array(
    1 => array(
        13 => array(
            "15:00 - 16:20" => array(
                "Movie" => " Batman"
            ),
            "18:10 - 19:30" => array(
                "Movie" => " Misery"
            )
        )
    ),
    2 => array(
        14 => array(
            "15:00 - 16:20" => array(
                "Movie" => " The Avengers "
            ),
            "16:20 - 17:50" => array(
                "Movie" => " The Hours "
            )
        )
    ),
    3 => array(
        15 => array(
            "18:10 - 19:30" => array(
                "Movie" => " Gladiator"
            )
        )
    )
);

$days = array(1 => 'Monday',2 => 'Tuesday',3 => 'Wednesday');

echo "<pre>";
foreach ( $myarray as $key => $value ) {
    foreach ( $value as $valueKey => $info ) {
        echo $days[$key], " - ", $valueKey, PHP_EOL;
        foreach ( $info as $infoKey => $infoValue ) {
            echo $infoKey, " - ", $infoValue['Movie'], PHP_EOL;
        }
        echo PHP_EOL;
    }
} 
```

输出

```
Monday - 13
15:00 - 16:20 -  Batman
18:10 - 19:30 -  Misery

Tuesday - 14
15:00 - 16:20 -  The Avengers 
16:20 - 17:50 -  The Hours 

Wednesday - 15
18:10 - 19:30 -  Gladiator 
```

# orchardcms - 将 MVC 应用程序转换为 Orchard CMS

> ID：12640117
> 
> 赞同：0
> 
> 时间：2012-09-28T12:32:43.047
> 
> 标签：orchardcms

我是果园新手，我有一个新手问题。

我正在将现有的 mvc 应用程序转换为 Orchard，为了练习真实的东西，我正在尝试将 contoso 大学示例 MVC 应用程序转换为 Orchard 以学习基础知识。

我已经为它创建了一个模块，添加了菜单元素来访问应用程序，并且我还能够显示 Home\Index 操作的输出，以便我知道模块设置正确。

现在我正在尝试添加 Home\About 操作，它将显示从数据库查询生成的表。

这给了我以下错误：

> 服务器“DEV\SQLEXPRESS”上的 MSDTC 不可用。说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。
> 
> 异常详细信息：System.Data.SqlClient.SqlException：服务器“DEV\SQLEXPRESS”上的 MSDTC 不可用。
> 
> 源错误：
> 
> 第 17 行：第 18 行：第 19 行：@foreach（模型中的变量项）{ 第 20 行：第 21 行：
> 
> 源文件：c:\Users\dev1\Documents\My Web Sites\Orchard CMS\Modules\ContosoUniversity\Views\Home\About.cshtml 行：19
> 
> 源文件：c:\Users\dev1\Documents\My Web Sites\Orchard CMS\Modules\ContosoUniversity\Views\Home\About.cshtml 行：19

现在，经过一番谷歌搜索，我了解到这与抑制环境事务的需要有关。所以我添加一个**using (TransactionScope scope = new TransactionScope(TransactionScopeOption.Suppress))**到我的家庭控制器：

```
public class HomeController : Controller
    {
        private SchoolContext db = new SchoolContext();
  [Themed]
        public ActionResult Index()
        {
            ViewBag.Message = "Welcome to Contoso University!";
            return View();
        }
  [Themed]
        public ActionResult About()
        {
            using (TransactionScope scope = new TransactionScope(TransactionScopeOption.Suppress))

            {
                var query = "SELECT EnrollmentDate, COUNT(*) AS StudentCount "
                    + "FROM Person "
                    + "WHERE EnrollmentDate IS NOT NULL "
                    + "GROUP BY EnrollmentDate";
                var data = db.Database.SqlQuery(query);
                return View(data);
            }
        } 
```

但是，它没有帮助。我已经阅读了其他地方来用这个来*包围你的数据访问代码*，但是当我使用实体框架时，我没有明确地打开任何数据连接，因此我不确定在哪里放置 using 语句。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T19:39:08.513

我认为这里的问题是查询的实际执行被延迟，实际上并没有发生在事务范围块内。如果您只是在 SQL 查询上调用 ToList()，那可能会解决它。这也是一种很好的做法，因为您不希望实际查询发生在视图中。您当前发送到视图的不是数据，而是查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T14:05:02.710

什么类型的`db.Database.SqlQuery()`返回？您可以为您的视图和该视图使用的模型包含代码吗？

从这个错误消息看来，数据访问是从剃刀视图发生的。如果是这种情况，您可以通过`foreach (var item in Model) { ...}`用`using (TransactionScope scope = new TransactionScope(TransactionScopeOption.Suppress)) {...}`块包装来修复它。

您可能需要将正确的命名空间导入 razor 视图，以便 TransactionScope 的东西从那里工作。如果我没记错的话，我必须在 Orchard.Web\web.config`<add assembly="System.Data, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />`的块内添加。`<system.web> <compilation> <assemblies>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T09:28:08.383

感谢 Bertrand Le Roy 和 Giscard Biamby 将我推向了正确的方向。

我同意 Bertrand 的观点，即在控制器中添加 ToList 以强制执行查询是有意义的，但这并没有帮助。我必须做的是在视图中添加一个抑制子句，如下所示：

```
<table>
  <tr>
    <th>
      Enrollment Date
    </th>
    <th>
      Students
    </th>
  </tr>
  @using (TransactionScope scope = new TransactionScope(TransactionScopeOption.Suppress))
  {
    foreach (var item in Model)
    {
    <tr>
      <td>
        @String.Format("{0:d}", item.EnrollmentDate)
      </td>
      <td>
        @item.StudentCount
      </td>
    </tr>
    }
  }
</table> 
```

我还必须在视图的顶部添加一个 using 语句：

```
@model IEnumerable<ContosoUniversity.ViewModels.EnrollmentDateGroup>
@using System.Transactions 
```

最后，为了被允许使用引用，我必须在 web.config 中添加 System.Transactions 程序集：

```
<system.web>
    <compilation debug="true" targetFramework="4.0">
      <assemblies>
        <add assembly="System.Web.Abstractions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Web.Helpers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Web.Routing, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Web.WebPages, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly ="System.Transactions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"/>

      </assemblies>
    </compilation> 
```

现在我没有收到任何错误，但我也没有收到任何数据，但这是另一个问题。我相信这是朝着正确方向迈出的一步。

我希望有一种方法可以在更高的层次上做到这一点，以避免不得不改变我所有的观点，但至少我能够让它发挥作用。

# django - 为非属性模型字段创建设置器的正确方法是什么

> ID：12640119
> 
> 赞同：4
> 
> 时间：2012-09-28T12:32:54.853
> 
> 标签：django, django-models, setter

我想`setter`为 Django 模型字段定义一个函数，以验证输入并在值无效时立即引发错误。

由于我无法控制的事情，我不认为对我的问题[进行验证`save()`或者`pre_save()`](https://stackoverflow.com/questions/7913108/django-model-fields-custom-field-value-setter)是一个可行的解决方案。

还将该字段更改为属性并使用纯文本`field.getter`并且`field.setter`不可行，因为这将在该字段上破坏等，而且即使我更改为并覆盖了经理，它`.filter()`也需要更改方案*。*`.exclude()`*`field``_field`*

 *那么，我是被迫重写`__setattr__`还是有更好的方法呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T17:21:09.193

您可以将 Field 子类化并覆盖`to_python`。

```
class UnforgivingCharField(CharField):
    __metaclass__ = models.SubfieldBase

    def to_python(self, value):
        if not passes_my_test(value):
            raise Hell()
        return super(UnforgivingCharField, self).to_python(value) 
```

这用于设置值时以及期间`get_prep_value`等，因此它会在过滤时捕获无效值。

更多关于这个[here](https://docs.djangoproject.com/en/dev/howto/custom-model-fields/#the-subfieldbase-metaclass)。请注意链接部分底部的行告诉我们`to_python`将被调用。

编辑：以防万一您碰巧使用[South](http://south.areacode.org/) ，如果您实现自定义模型字段，则需要添加一些[自省规则。](http://south.readthedocs.org/en/latest/customfields.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T12:52:51.093

看到这张 django 票：

[https://code.djangoproject.com/ticket/3148](https://code.djangoproject.com/ticket/3148)

另外，请参阅此处进行讨论：

[Django 模型字段 getter / setter](https://stackoverflow.com/questions/2898711/django-model-fields-getter-setter)

而这篇博文：

[http://www.b-list.org/weblog/2006/aug/18/django-tips-using-properties-models-and-managers/](http://www.b-list.org/weblog/2006/aug/18/django-tips-using-properties-models-and-managers/)

另请注意，可以选择使用`filter` `kwargs`为您翻译的自定义管理器，使用`_name`字段，以及制作您自己的`@name.setter` `@name.getter`等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T14:37:49.923

你能定义一个提供正确功能并引发正确错误的函数吗？

```
class YourModel(models.Model):

   def add_your_value(self, value):
       # check if value is correct
       # raise exception if it isn't
       # set correct property 
```*

# r - R绘制列表的行

> ID：12640122
> 
> 赞同：3
> 
> 时间：2012-09-28T12:33:36.880
> 
> 标签：r, plot

最终编辑：使用 matplot() 的结果我会确保我使用 ~3 位数的值来获得更独特的结果，但基本上这就是我想要的 ![在此处输入图像描述](../Images/4cfa9afd51c880dd73855d35fba78798.png)

**原始问题**

* * *

我想创建一个看起来像所附图像的图表![图表应如下所示](../Images/14faacb5b616548c9164b1009d632655.png)

我得到的是 y 轴和 x 轴每行的值（代表不同的主题）。

接近我发现的 R 绘图示例，我尝试了以下操作：

```
arts=c(pt[1,])
g_range <- range(0, arts)
plot(arts, type="o", col="blue", ylim=g_range,axes=FALSE, ann=FALSE)
axis(1, at=1:23, lab=c(0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23))
box() 
```

这会导致错误

> xy.coords(x, y, xlabel, ylabel, log) 中的错误：“x”是一个列表，但没有组件“x”和“y”

所以显然艺术不是这里情节的正确参数，对吧？旁注：艺术向量中的值被排序以适合 0-23 比例

另外：这是pt的头长的样子![在此处输入图像描述](../Images/d9f8eeda328a7ac7fe169529b22eec25.png)

编辑：根据要求，这里是 dput(head(pt)) 的输出

```
 structure(list(`0` = c(2, 1, 0, 0, 0, 0), `1` = c(1, 0, 0, 0, 
0, 0), `2` = c(1, 0, 0, 0, 0, 0), `3` = c(0, 0, 0, 0, 0, 0), 
    `4` = c(0, 0, 0, 0, 0, 0), `5` = c(0, 0, 0, 0, 0, 0), `6` = c(1, 
    0, 0, 0, 0, 0), `7` = c(1, 0, 0, 0, 0, 0), `8` = c(1, 0, 
    0, 0, 0, 0), `9` = c(2, 0, 0, 0, 0, 0), `10` = c(2, 1, 0, 
    0, 0, 0), `11` = c(2, 1, 0, 0, 0, 0), `12` = c(2, 1, 0, 0, 
    0, 0), `13` = c(2, 1, 0, 0, 0, 0), `14` = c(2, 1, 0, 0, 0, 
    0), `15` = c(3, 1, 0, 0, 0, 0), `16` = c(3, 1, 0, 0, 0, 0
    ), `17` = c(3, 1, 0, 0, 0, 0), `18` = c(3, 1, 1, 1, 0, 0), 
    `19` = c(3, 1, 1, 1, 0, 0), `20` = c(3, 1, 1, 1, 0, 0), `21` = c(3, 
    1, 1, 1, 0, 0), `22` = c(3, 1, 1, 0, 0, 0), `23` = c(2, 1, 
    0, 0, 0, 0)), .Names = c("0", "1", "2", "3", "4", "5", "6", 
"7", "8", "9", "10", "11", "12", "13", "14", "15", "16", "17", 
"18", "19", "20", "21", "22", "23"), row.names = c(NA, 6L), class = "data.frame") 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-28T13:03:20.163

`matplot`可用于将矩阵的每一列绘制为图中的单独线。你只需要转置矩阵就可以了。有关要`matplot`查看的参数的详细信息`?matplot`以及`?par`控制一般图形参数的信息。

```
# Generate data
categories <- c("Entertainment", "Games", "Health", "Personal Finance",
    "Shopping", "Music", "USSites", "Porn")
colors <- c("green", "blue", "cyan", "yellow", "magenta", "orange",
    "red", "black")
markers <- 1:8
pt <- matrix(runif(length(categories)*23), length(categories), 23)

# Plot
matplot(1:23, t(pt), type="l", col=colors, lty=1, pch=markers,
        bty="n", las=1, main="Categorical Percent over Time")
legend("topright", col=colors, categories, bg="white", lwd=1, pch=markers) 
```

![在此处输入图像描述](../Images/dabdfdcc16db57b14d97739c2efc96f3.png)

它看起来非常混乱，因为我只是对均匀分布的随机数据进行了采样，但你的看起来会好得多。

# c# - ZedGraph：将“设置比例”的行为更改为默认值

> ID：12640124
> 
> 赞同：2
> 
> 时间：2012-09-28T12:33:48.953
> 
> 标签：c#, zedgraph

我使用 ZedGraphs 绘制了一些图表。现在，我有一个选项，用户可以使用不同的复选框绘制一些图表，也可以删除它们。但是，当用户制作这些图表时，我不会缩放图表，因为我不想改变图表的外观。

现在，如果用户缩放然后单击“将比例设置为默认值”，图表将被重置，因为我猜是调用了 AxisChange()。

但是，我想要我绘制的图形的原始外观，而不是完全改变视图的默认视图。

S，有什么方法可以改变 Set Scale to Default 功能的行为？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T17:21:29.520

您有 2 个选项可以尝试，

1.  摆脱默认上下文菜单项（将比例设置为默认值）并添加您自己的自定义上下文菜单项。

    为了删除：

    ```
    private void zedGraphControl1_ContextMenuBuilder(
        ZedGraphControl sender, ContextMenuStrip menuStrip, 
        Point mousePt, ZedGraphControl.ContextMenuObjectState objState)
    {
        foreach (ToolStripMenuItem item in menuStrip.Items)
        {
            if ((string)item.Tag == "set_default")
            {
                menuStrip.Items.Remove(item);
                break;
            }
         }
    } 
    ```

    并添加一个新项目：[http ://www.smallguru.com/2009/06/zedgraph-csharp-graph-data-export-to-cs/](http://www.smallguru.com/2009/06/zedgraph-csharp-graph-data-export-to-cs/)

2.  编辑源代码（这有点棘手但可行）

    我没有看到任何简单的方法来更改预构建选项的行为。

# wordpress - 前端登录并检查无法正常工作

> ID：12640128
> 
> 赞同：1
> 
> 时间：2012-09-28T12:34:19.990
> 
> 标签：wordpress

我使用下面的代码来允许前端登录，然后我有一个不同的菜单，具体取决于他们是否登录。

我遇到的问题是，一旦用户单击登录并且他们被重定向到另一个页面，那里显示的菜单是正确的，但是当他们单击另一个页面时，即使没有注销，它也会恢复到“未登录”菜单按钮已被点击。

```
<form name="loginform" id="loginform" action="<?php echo esc_url( site_url( 'wp-login.php', 'login_post' ) ); ?>" method="post">
  <p>
    <label for="user_login">
      <?php _e('Username') ?>
      <br />
      <input type="text" name="log" id="user_login" class="input" value="<?php echo esc_attr($user_login); ?>" size="20" tabindex="10" />
    </label>
  </p>
  <p>
    <label for="user_pass">
      <?php _e('Password') ?>
      <br />
      <input type="password" name="pwd" id="user_pass" class="input" value="" size="20" tabindex="20" />
    </label>
  </p>
  <?php do_action('login_form'); ?>
  <p class="forgetmenot">
    <label for="rememberme">
      <input name="rememberme" type="checkbox" id="rememberme" value="forever" tabindex="90"<?php checked( $rememberme ); ?> />
      <?php esc_attr_e('Remember Me'); ?>
    </label>
  </p>
  <p class="submit">
    <input type="submit" name="wp-submit" id="wp-submit" class="button-primary" value="<?php esc_attr_e('Log In'); ?>" tabindex="100" />
    <?php   if ( $interim_login ) { ?>
    <input type="hidden" name="interim-login" value="1" />
    <?php   } else { ?>
    <input type="hidden" name="redirect_to" value="<?php bloginfo('url'); ?>/dashboard" />
    <?php   } ?>
    <input type="hidden" name="testcookie" value="1" />
  </p>
</form> 
```

下面的代码是我在菜单周围使用的代码，根据他们是否登录或退出来显示不同的代码：

```
<?php if ( is_user_logged_in() ) {
} else {
} ?> 
```

* * *

看起来会话一旦登录就会被破坏。它最初会保存它，但单击任何其他链接都会破坏会话！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T13:14:21.130

尝试稍有不同，如下所示：

```
 <?php 

  if(!is_user_logged_in()) {
         //no user logged in
      } else {
        // Hello!
      }
 ?> 
```

编辑：看来 is_user_logged_in() 有一些问题：[http ://core.trac.wordpress.org/ticket/21043](http://core.trac.wordpress.org/ticket/21043)

当然，我们可以用不同的方法来做到这一点。让我们获取用户信息，并据此检查变量。

```
<?php
    global $current_user; // Make it global
    get_currentuserinfo(); // Get the current user info
    $userID = $current_user->ID; // Get the User ID

    if($userID) { // Logged in because there is a User ID. 

        echo "Hello Mate";

    } else { // Logged out

        echo "Tumbleweed";
    } 
?> 
```

当这在我的环境中不起作用时，我正在摸不着头脑，因此请确保您没有在同一浏览器中以管理员身份登录。

也欢迎您将其放入函数中，具体取决于您的目标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T02:09:15.253

尝试安装“主题我的登录”插件，除了将您的登录页面设置为前端页面外，它还会添加一个带有快速登录表单的小部件。

# css - css中不同的屏幕分辨率

> ID：12640129
> 
> 赞同：0
> 
> 时间：2012-09-28T12:34:21.527
> 
> 标签：css

大家好，我是 CSS 的新手。我的问题是如何使我的设计与不同的屏幕分辨率兼容。顺便说一句，我检查了 wc3 验证器没有错误。我定义了一个 div 标签，用于以不同的分辨率显示我的页面，这是我的标签：

```
.page {
    width: 964px;
    margin-left: auto;
    margin-right: auto;
    height:990px;
    background-image:url(../images/shadow.png);
    background-repeat:repeat-y;
} 
```

我的意思是当我用 17" 屏幕查看我的网站时，我的页面显示的与 19" 屏幕不同

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T12:36:37.927

您将需要搜索响应式设计 CSS，您可以让设计使用所有百分比量来调整大小，或者为特定分辨率创建样式表。

看一下：

[响应式线框](http://www.thismanslife.co.uk/projects/lab/responsivewireframes/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T12:43:54.753

您可以使用 CSS 3 媒体查询来实现

还要检查媒体查询的[响应式设计和技术](http://coding.smashingmagazine.com/2011/08/10/techniques-for-gracefully-degrading-media-queries/)

# java - 在java中复制不同操作系统的符号链接

> ID：12640130
> 
> 赞同：1
> 
> 时间：2012-09-28T12:34:26.113
> 
> 标签：java, symlink

是否可以在java中复制符号链接...基本上我想要的是只复制不包含文件的符号链接，其中符号链接指向..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T12:45:11.813

我没有尝试过，但我认为您可以在使用 Files.copy 时使用 LinkOption.NOFOLLOW_LINKS (Java SE 7)

[http://docs.oracle.com/javase/7/docs/api/java/nio/file/LinkOption.html](http://docs.oracle.com/javase/7/docs/api/java/nio/file/LinkOption.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T12:58:51.937

我明白了..首先我需要确定它是符号链接吗

```
Path file = ...;
boolean isSymbolicLink =
    Files.isSymbolicLink(file); 
```

然后我可以在目的地创建相同的符号链接

```
 Path newLink = ...;
Path existingFile = ...;
try {
    Files.createLink(newLink, existingFile);
} catch (IOException x) {
    System.err.println(x);
} catch (UnsupportedOperationException x) {
    // Some file systems do not
    // support adding an existing
    // file to a directory.
    System.err.println(x);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-08T21:06:40.613

你当然可以这样做。从类 Files 中检查方法 copy(Path source, Path target, CopyOption... options)。将 LinkOption.NOFOLLOW_LINKS 指定为复制选项将使复制方法执行您想要的操作。

在使用此处演示的链接时，此行为是普遍的：

```
Path target = Paths.get("c://a.txt");
Path symbolicLink = Paths.get("c://links//symbolicLink.txt");

// creates test link
Files.createSymbolicLink(symbolicLink, target);

BasicFileAttributes targetAttributes = Files.readAttributes(symbolicLink, BasicFileAttributes.class);
BasicFileAttributes linkAttributes = Files.readAttributes(symbolicLink, BasicFileAttributes.class, LinkOption.NOFOLLOW_LINKS);

System.out.println("File attribute - isSymbolicLink\tTarget: " + targetAttributes.isSymbolicLink() + "\t\t\t\tLink: " + linkAttributes.isSymbolicLink());
System.out.println("File attribute - size\t\tTarget: " + targetAttributes.size() + "\t\t\t\tLink: " + linkAttributes.size());
System.out.println("File attribute - creationTime:\tTarget: " + targetAttributes.creationTime() + "\tLink: " + linkAttributes.creationTime()); 
```

此代码输出：

```
File attribute - isSymbolicLink: Target: false                        Link: true
File attribute - size:           Target: 8556                         Link: 0
File attribute - creationTime:   Target: 2013-12-08T16:43:19.55401Z   Link: 2013-12-14T16:09:17.547538Z 
```

您可以访问我的帖子以获取有关[NIO.2 中链接的更多信息](http://jakubstas.com/links-nio-2)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T12:42:27.960

[来自本页](http://docs.oracle.com/javase/tutorial/essential/io/links.html#symLink)描述的框中的 JRE 中可用的符号链接的所有可能操作

# javadoc - Doxygen - 链接到外部文档

> ID：12640134
> 
> 赞同：6
> 
> 时间：2012-09-28T12:34:35.477
> 
> 标签：javadoc, doxygen

**简介**：

我有一个 Java 源文件，我在其中覆盖了父类的方法。你如何为 javadoc 评论这个：

```
/*
* (non-Javadoc)
* 
* @see org.eclipse.ui.editors.text.TextEditor#createActions()
*/
@Override
protected void createActions() {
    super.createActions();
} 
```

...然后 javadoc 知道如何链接引用的存档文档（例如来自[http://download.oracle.com/javase/6/docs/api](http://download.oracle.com/javase/6/docs/api)的 charsets.jar ）以提供继承的文档，这样您就没有再写一次。

例如，当我引用上面的 org.eclipse.ui.editors.text.TextEditor#createActions() 时，javadoc 为我生成了以下方法文档：

> 无效 sqltexteditor.SQLEditor.createActions()
> 
> @覆盖
> 
> 创建此编辑器的标准操作并将它们与全局工作台操作连接起来。子类可以扩展。
> **覆盖**：TextEditor 中的 createActions()

**问题**：我使用的是 doxygen 而不是 javadoc（出于多种原因，我不会在此提及）。doxygen 有没有办法链接到外部文档，就像上面的例子一样？如果有，如何通过配置和使用 doxygen 而不是 javadoc 来实现上述结果。

我希望我的例子比我更好地描述了我的目标。

# php - PHP - 更改电子邮件中的返回路径的要求

> ID：12640137
> 
> 赞同：0
> 
> 时间：2012-09-28T12:35:04.010
> 
> 标签：php, email

我需要通过 mail() 发送电子邮件。

我需要根服务器来更改`Return-Path`值吗？目前它是`www-data@mydomainname.com`，但我希望它具有相同的地址，例如`From`and `Reply-to`。

我设置`Return-Path`如下，但它保持不变`www-data@mydomainname.com`：

```
$headers.="Return-Path: $from\r\n"; 
```

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T12:38:04.967

也可以设置mail函数的第五个参数来调整返回路径

```
mail($to, $subject, $message, $headers, "-f email@wherever.com"); 
```

# c++ - 由于名称修改而无法解析的外部符号

> ID：12640139
> 
> 赞同：5
> 
> 时间：2012-09-28T12:35:07.700
> 
> 标签：c++, linker, name-mangling

我在将 XERCES 函数从 2.6 升级到 2.8 时遇到链接器错误

```
unresolved external symbol (?resolveEntity@HandlerBase@xercesc_2_8@@UAEPAVInputSource@2@QBG0@Z) 
```

我检查了 xerces-c_2.8.lib 并发现名称 lib 与我的 .obj 文件中的名称有点不同如图所示

```
?resolveEntity@HandlerBase@xercesc_2_8@@UAEPAVInputSource@2@QB_W0@Z 
```

所以我知道链接器不会找到匹配项并抛出错误。

但我无法理解为什么我的 .obj 文件包含不同的签名。

代码包括正确的头文件和名称仍然不正确的库。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-28T13:07:30.857

您可以使用 undname.exe 实用程序来恢复原始 C++ 声明。

?resolveEntity@HandlerBase@xercesc_2_8@@UAEPAVInputSource@2@QBG0@Z 转换为：

```
virtual class xercesc_2_8::InputSource * 
__thiscall xercesc_2_8::HandlerBase::resolveEntity(
    unsigned short const * const,
    unsigned short const * const) 
```

?resolveEntity@HandlerBase@xercesc_2_8@@UAEPAVInputSource@2@QB_W0@Z 转换为：

```
virtual class xercesc_2_8::InputSource * 
__thiscall xercesc_2_8::HandlerBase::resolveEntity(
     wchar_t const * const,
     wchar_t const * const) 
```

请注意参数类型`unsigned short`与`wchar_t`. 由于某种原因，您的编译器无法识别 wchar_t 类型。那可能是因为你有一个非常旧的编译器。或者它可能是一个选项设置错误，在 msvc 上它是 C/C++、语言、“将 wchar_t 视为内置类型”。或者你有一个宏可以将字符串类型破解为无符号短。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T13:12:13.953

C++ 允许函数重载，因此函数的参数记录在名称修饰中。您可能会尝试使用与 DLL 预期不同的参数类型来调用函数。

确保您的头文件与您的 DLL 的版本相匹配。

# javascript - 复选框检查/勾选未显示虽然选中的属性返回 true

> ID：12640140
> 
> 赞同：0
> 
> 时间：2012-09-28T12:35:07.993
> 
> 标签：javascript, checkbox

我有一段代码在循环中的表格中创建复选框并调用它们的 onclick 函数。在 onclick 函数中，我尝试填充一个全局数组，该数组将成为表格选中复选框的位置持有者。此外，如果选中一行，我必须对该行的文本字段中的数字求和（我将其添加到变量百分比中），如果变量超过 100，我必须提醒用户并要求他在复选框中输入值使得总和小于 100。

我的问题是，每次单击复选框时，都会填充全局数组，总和按预期存储在变量中，但**复选框上的“勾号”不会立即出现/消失**。

我该如何解决这个问题？

代码：

```
 {
var tabId=document.getElementById("AmnestyTransTbl"); 
var tabrows = tabId.getElementsByTagName('tr');

var percentage=0,c,n;
var ar=[];
for(var i=1,c=2;i<=tabrows.length-3;i++,c=c+2)
{
// Create CheckBox
ar[i]=c;
var checkBox = document.createElement("input");
checkBox.setAttribute("type", "checkbox");
checkBox.id='CB'.concat(i);
checkBox.onclick = function ()
{

var tabId1=document.getElementById("AmnestyTransTbl"); 
var rowInd=getRowIndex(this);

CBValue[rowInd]=this.checked;
 n=ar[rowInd-1];
 percentage=(parseInt(percentage) + parseInt(tabId1.getElementsByTagName("input")[n].value));
 if(parseInt(percentage)>100) 
 {
 alert("Amnesty Percentage,"+percentage+", greater than 0!. Plesase check again.");
 this.checked=false;
 }
 if(this.checked==false)
 percentage=parseInt(percentage)-parseInt(tabId1.getElementsByTagName("input")[n].value);
 }    }
var td = document.createElement("td");
td.appendChild(checkBox);
tabrows[i+1].cells[1].appendChild(td);
}

function getRowIndex(el)
{
while((el=el.parentNode) && el.nodeName.toLowerCase() != 'tr');
if (el)
return el.rowIndex;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T13:32:35.743

我猜是罪魁祸首

请尝试更换这个

```
 if(parseInt(percentage,10)>100) {
              this.checked=false;
          }

          if(this.checked=false)
          {
               percentage=parseInt(percentage)-parseInt(tabId1.getElementsByTagName("input")[n].value);
          } 
```

有了这个

```
if(parseInt(percentage,10)>100) {
              this.checked=false;
          }
          else
          {
              this.checked=true;
          }

          if(this.checked==false)
          {
               percentage=parseInt(percentage)-parseInt(tabId1.getElementsByTagName("input")[n].value);
          } 
```

# grails - 如果控制器中发生异常，如何将控制权传递给 grails 错误页面？

> ID：12640142
> 
> 赞同：0
> 
> 时间：2012-09-28T12:35:14.913
> 
> 标签：grails, groovy

我在控制器中有一种方法，当用户单击链接时将调用该方法

```
 <g:link controller="reporting" action="dataCenterNetworkReports">
    <g:message code="reports.data.center.network"/>
  </g:link> 
```

该方法将从网络服务获得响应。现在我的问题是，如果 WS 出现问题并返回错误，我需要通过控件并显示错误消息。当出现问题并遇到阻塞时如何显示常见错误页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T12:45:41.430

Grails 在`views/error.gsp`. 如果您查看代码，这需要一个异常，所以我认为这样的东西应该足够了（未经测试）：

**你的控制器方法**

```
def dataCenterNetworkReports() {
   String view = "myDefaultView"
   def model = [:]
   try {
     //call webservice
   }catch(e) {
     view = '/error' 
     model.exception = e
   }
   //when occur some exception view will be /error
   render(view: view, model: model)     
} 
```

但是，如果您需要显示一些自定义布局，则可以选择[flash 对象。](http://www.grails.org/doc/latest/ref/Controllers/flash.html)

# android - 如何在不延迟渲染的情况下使用 andengine 更改文本？

> ID：12640143
> 
> 赞同：1
> 
> 时间：2012-09-28T12:35:23.713
> 
> 标签：android, text, andengine

我想在我的游戏中引入倒计时。我正在使用这样的代码：

在`onCreateResources()`

```
this.font = FontFactory.create(this.getFontManager(), this.getTextureManager(), 256, 256, TextureOptions.BILINEAR, Typeface.create(Typeface.DEFAULT, Typeface.BOLD), 48);
this.font.load(); 
```

在`onCreateScene()`

```
this.countDownText = new Text(0, 0, this.font, "300", "300".length(), this.getVertexBufferObjectManager());
this.scene.attachChild(countDownText);

this.remain = 300;
this.timerHandler = new TimerHandler(1 / 10f, true, new ITimerCallback() {

    @Override
    public void onTimePassed(TimerHandler pTimerHandler) {
        remain--;
        countDownText.setText(remain + "");
    }
});
this.scene.registerUpdateHandler(timerHandler); 
```

我找到了有关此问题的信息以及对我不起作用的不同解决方案：

*   用途`ChangableText`：*Andengine 中不再有此类。*
*   预加载字符：*这对我不起作用。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T06:30:33.870

ChangeableText 是文本：[链接](https://github.com/nicolasgramlich/AndEngine/issues/46)

> “Text 具有旧 ChangeableText 的所有功能。”

# c++ - 替换大文件中的字符串

> ID：12640144
> 
> 赞同：0
> 
> 时间：2012-09-28T12:35:29.487
> 
> 标签：c++, io

我有一个服务器-客户端应用程序，客户端可以在其中编辑存储在服务器端的文件中的数据。问题是文件太大而无法将其加载到内存中（8gb+）。连接的客户端每秒可能会调用大约 50 个字符串替换。所以复制整个文件并用新的替换指定的字符串是没有问题的。

我正在考虑将所有更改保存在服务器端的缓存中，并在达到一定数量的数据后执行所有替换。在达到该数据量后，我将通过以小块复制文件并替换指定部分来执行更新。

这是我想出的唯一想法，但我想知道是否可能有另一种方法或这种方法会遇到什么问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T12:51:16.393

当您有超过 8GB 的​​数据由多个用户同时编辑时，您将远远超出平面文件所能处理的范围。

您非常需要将此数据移动到数据库中。关于您“文件内容不适合数据库”的评论：对不起，但我不相信您。特别是关于“很多人可以编辑它”的评论 - 这是使用数据库的另一个原因。在文件系统上，一次只有一个用户可以对文件具有写访问权。但是数据库允许多个用户同时进行写访问。

当您打开一个新问题，告诉我们您的数据是如何准确结构化以及您的用例是什么时，我们可以帮助您提出一个数据库模式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T12:59:09.827

您可以对数据使用某种形式的索引（在单独的文件中）以允许快速访问这个巨大文件的相关部分（我们已经成功地对大文件（~200-400gb）进行了此操作，但正如菲利普所说您应该将该数据移动到数据库，特别是对于读/写访问。一些框架（如[OSG](http://www.openscenegraph.org/projects/osg)）已经带有用于 3d 地形数据的数据库后端，因此您可以在那里查看它们是如何做到的。

# sql-server - T-SQL 查询中的 XPath

> ID：12640149
> 
> 赞同：2
> 
> 时间：2012-09-28T12:35:55.243
> 
> 标签：sql-server, xml, tsql, xpath, sqlxml

我有两张桌子，`XMLtable`和`filterTable`。

我需要其中数据包含的所有`XMLtable.ID`值，其中的内容与.`XMLtable``Col_X``MyElement``filterColumn``filterTable`

中每一行的 XML`Col_X`可能包含多个`MyElement`'s，`ID`如果这些元素中的任何一个与`filterColumn`.

问题是这些列实际上是`varchar(max)`数据类型，并且表本身很大（比如 50GB 巨大）。所以这个查询需要尽可能的优化。

这是我现在所在位置的示例，它仅返回第一个匹配元素等于我正在寻找的元素之一的行。由于过多的不同错误消息，我似乎无法将其更改为与我想要的所有相同命名的元素进行比较。

```
SELECT ID, 
   CAST(Col_X AS XML).value('(//*[local-name()=''MyElement''])', N'varchar(25)') 
FROM  XMLtable 
```

...然后将结果与`filterTable`. 这已经需要 5 分钟以上。

我想要实现的是：

```
SELECT ID
FROM XMLtable
WHERE CAST(Col_X AS XML).query('(//*[local-name()=''MyElement''])') 
   IN (SELECT filterColumn FROM filterTable) 
```

我目前能做到这一点的唯一方法是使用 LIKE 运算符，这需要大约一千倍的时间。

现在，显然它不是开始更改列的数据类型或其他任何东西的选项。这是我必须处理的。:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T15:31:32.790

尝试这个：

```
SELECT
  ID,
  MyElementValue
FROM 
  (
    SELECT ID, myE.value('(./text())[1]', N'VARCHAR(25)') AS 'MyElementValue'
    FROM XMLTable
      CROSS APPLY (SELECT CAST(Col_X AS XML)) as X(Col_X)
      CROSS APPLY X.Col_X.nodes('(//*[local-name()="MyElement"])') as T2(myE)
  ) T1
WHERE MyElementValue IN (SELECT filterColumn FROM filterTable) 
```

和这个：

```
SELECT
  ID,
  MyElementValue
FROM 
  (
    SELECT ID, myE.value('(./text())[1]', N'VARCHAR(25)') AS 'MyElementValue'
    FROM XMLTable
      CROSS APPLY (SELECT CAST(Col_X AS XML)) as X(Col_X)
      CROSS APPLY X.Col_X.nodes('//MyElement') as T2(myE)
  ) T1
WHERE MyElementValue IN (SELECT filterColumn FROM filterTable) 
```

**更新**

我认为您正在体验此处描述的[Compute Scalars, Expressions and Execution Plan Performance](http://web.archive.org/web/20180423042943/http://sqlblog.com:80/blogs/paul_white/archive/2012/09/05/compute-scalars-expressions-and-execution-plan-performance.aspx)。对 XML 的强制转换推迟到对`value`函数的每次调用。您应该进行的测试是将数据类型更改`Col_X`为`XML`。

如果这不是一个选项，您可以将所需的行从 XMLTable 查询到具有 XML 列的临时表中，然后对临时表执行上述查询，而无需转换为 XML。

```
CREATE TABLE #XMLTable
(
  ID int,
  Col_X xml
)

INSERT INTO #XMLTable(ID, Col_X)
SELECT ID, Col_X
FROM XMLTable

SELECT
      ID,
      MyElementValue
    FROM 
      (
        SELECT ID, myE.value('(./text())[1]', N'varchar(25)') AS 'MyElementValue'
        FROM #XMLTable
          CROSS APPLY Col_X.nodes('//MyElement') as T2(myE)
      ) T1
    WHERE MyElementValue IN (SELECT filterColumn FROM filterTable)

DROP TABLE #XMLTable 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T13:29:09.490

你可以试试这样的。我相信，它至少在功能上可以满足您的需求。您必须根据经验使用数据集探​​索其性能。

```
SELECT ID
FROM 
( 
   SELECT xt.ID, CAST(xt.Col_X AS XML) [content] FROM XMLTable AS xt
) AS src
INNER JOIN FilterTable AS f
ON f.filterColumn IN 
(
   SELECT 
      elt.value('.', 'varchar(25)')     
   FROM src.content.nodes('//MyElement') AS T(elt)
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T13:26:57.277

我终于得到了这个工作，并且性能比我预期的要好得多。下面是最终在 5 - 6 分钟内产生正确结果的脚本。

```
SELECT ID, myE.value('.', N'VARCHAR(25)') AS 'MyElementValue'
FROM (SELECT ID, CAST(Col_X AS XML) AS Col_X
    FROM XMLTable) T1
CROSS APPLY Col_X.nodes('(//*[local-name()=''MyElement''])' T2(myE)
WHERE myE.value('.', N'varchar(25)') IN (SELECT filterColumn FROM filterTable) 
```

感谢人们的帮助！

# xml - xmlstarlet 选择值

> ID：12640152
> 
> 赞同：22
> 
> 时间：2012-09-28T12:36:11.810
> 
> 标签：xml, xmlstarlet

这是 xml 数据：

```
<DATA VERSION="1.0">
  <TABLES>
    <ITEM>
      <identifyer V="1234"></identifyer>
      <property1 V="abcde"></property1>
      <Property2 V="qwerty"></property2>
    </ITEM>
    <ITEM>
      <identifyer V="5678"></identifyer>
      <Property1 V="zyxwv"></property1>
      <Property2 V="dvorak"></property2>
    </ITEM>
  </TABLES>
</DATA> 
```

我试图找到有价值`property2`的项目。我可以选择数据：`identifyer``1234`

```
$ xmlstarlet sel -t -c "/DATA/TABLES/ITEM/identifyer [@V=1234]" test.xml 
<identifyer V="1234"/> 
```

需要两种类型的输出：

```
$ xmlstarlet <some magic>
<identifyer V="1234"></identifyer>
<property1 V="abcde"></property1>
<Property2 V="qwerty"></property2> 
```

和：

```
$ xmlstarlet <some magic>
qwerty 
```

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-09-28T17:53:09.170

关键是从ITEM节点开始，而不是标识符：

```
$ xmlstarlet sel -t -c "/DATA/TABLES/ITEM[identifyer/@V=1234]" test.xml
<ITEM>
  <identifyer V="1234"/>
  <property1 V="abcde"/>
  <Property2 V="qwerty"/>
</ITEM> 
```

然后你可以挑选出你想要的位：

```
$ xmlstarlet sel -t -c "/DATA/TABLES/ITEM[identifyer/@V=1234]/*" test.xml
<identifyer V="1234"/><property1 V="abcde"/><Property2 V="qwerty"/>

$ xmlstarlet sel -t -v "/DATA/TABLES/ITEM[identifyer/@V=1234]/Property2/@V" test.xml
qwerty 
```

# java - 为存储在对象中的字符串数组中的小数设置比例

> ID：12640156
> 
> 赞同：2
> 
> 时间：2012-09-28T12:36:23.217
> 
> 标签：java, arrays, object

我在一个存储十进制值的对象中有一个字符串数组。

```
String [] array = "12345.123456789"; 
```

我希望它被格式化为`12345.1234`

我尝试了以下方法，但导致了数字格式异常。

```
BigDecimal value = new BigDecimal(array.toString()).setScale( 4, BigDecimal.ROUND_HALF_UP );
array = ( Object )value.toString(); 
```

我是java新手，所以任何人都可以帮助...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T12:38:26.023

`String [] array = "12345.123456789";`不是有效语句 - 它是字符串或数组，因此您需要在以下两个语句之间进行选择：

```
String s = "12345.123456789"; //a string
String[] array = {"12345.123456789"}; //an array 
```

如果您使用第一种形式，您可以将其四舍五入：

```
BigDecimal rounded = new BigDecimal(s).setScale( 4, BigDecimal.ROUND_HALF_UP );
String roundedStr = rounded.toString(); 
```

如果你使用第二种形式，你可以使用这个：

```
BigDecimal rounded = new BigDecimal(array[0]).setScale( 4, BigDecimal.ROUND_HALF_UP );
String roundedStr = rounded.toString(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-28T12:43:37.537

```
 String [] array = {"12345.123456789"};
        StringBuilder numbers = new StringBuilder();
        for(int i=0;i<array.length;i++)
        {
            BigDecimal digits = new BigDecimal(array[i]).setScale( 4, BigDecimal.ROUND_HALF_UP );
            numbers.append(digits.toString());

        }

        System.out.println(numbers); 
```

# android - 将库添加到现有项目后，aapt.exe 已停止工作

> ID：12640159
> 
> 赞同：2
> 
> 时间：2012-09-28T12:36:34.997
> 
> 标签：android

我在现有代码中添加了一个库，但在执行此操作时出现以下错误：
“aapt.exe 已停止工作”

我正在使用 eclipse indigo，Android 开发工具版本 20.0.2.v201207191942-407447 我已经完成了有关此问题的所有操作，
例如 1）更改窗口>>首选项>> android>>构建>>到静音
2）更新必要的软件
3 ）清理和构建项目

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-06T10:55:30.320

试试这个 Remove id from style like here @+id 然后再次构建你会成功......

```
<item name="android:id">@+id/calender</item> 
```

# javascript - 搜索充满html的jQuery变量

> ID：12640161
> 
> 赞同：0
> 
> 时间：2012-09-28T12:36:40.170
> 
> 标签：javascript, jquery, ajax, function, variables

这可能是一个奇怪的问题——现在我有一个充满 HTML 的变量，我想使用 jQuery（或 JS）在该变量中搜索带有复选框的输入，并返回信息。

所以：

```
alert($(this).parent().parent().html())
var thisIsThat = $(this).parent().parent().html();
alert(thisIsThat)
var Awesome = $(thisIsThat).find('input:checked'); 
```

然后在我获得该变量后，在成功调用 ajax 后，我想更改其中的特定属性，如下所示：

```
$(Awesome).attr('value', 'false'); 
```

现在，“真棒”没有返回任何内容，这不允许我像我想要的那样更改属性。我也可能走错了方向 - 任何建议表示赞赏！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T12:49:53.923

用这个

```
var thisIsThat = $(this).parent().parent();
alert(thisIsThat)
var Awesome = $(thisIsThat).find('input:checked'); 
```

在这种情况下`thisIsThat`是一个对象，您可以使用该对象找到任何东西

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T12:53:51.500

这是一个示例，显示了从字符串中运行的相同基本思想，该字符串发现复选框很好并取消选中它。

```
<div id="out"></div>​
<script>
    var htmlStr = '<div><input type="checkbox" checked="checked"/></div>';
    var temp = $(htmlStr);
    var cb = temp.find("input:checked");
    cb.attr("checked",false);
    jQuery("#out").append(cb);
</script> 
```

[jsfiddle](http://jsfiddle.net/uA6LK/)

我打赌的问题是您正在手动检查复选框。当你这样做时，它不会更新 DOM 属性。

这是一个向您展示问题的基本示例。

```
<div id="one">
    <input type="checkbox" />
</div>
<button>Tell</button>​

<script>
    function tellMe(){
        var myDiv = jQuery("#one");
        var html1 = myDiv.html();
        console.log(html1);
    }

    jQuery("button").click(tellMe);  
</script> 
```

看看上面代码的这个[小提琴](http://jsfiddle.net/uA6LK/1/)。

打开控制台，然后单击按钮。您将看到它未选中。选中复选框并再次单击按钮，即使选中了复选框，也会输出相同的 html。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-09-28T12:41:31.963

改变

```
var Awesome = $(thisIsThat).find('input:checked'); 
```

到

```
var Awesome = $(thisIsThat).find('input[type=checked]');

now loop over it

Awesome.each(function(){
  if($(this).is(':checked'))
    {
     $(this).attr('checked',false);
    }
}); 
```

# javascript - JS Lint：“_fnGetTrNodes”中意外悬空“_”

> ID：12640173
> 
> 赞同：0
> 
> 时间：2012-09-28T12:37:33.043
> 
> 标签：javascript, jquery, jslint

我的代码如下所示：

```
$.extend($.fn.dataTableExt.afnSortData, {
    'dom-text': function (oSettings, iColumn) {
        var aData = [];
        $('td:eq(' + iColumn + ') input', oSettings.oApi._fnGetTrNodes(oSettings)).each(function () {
            aData.push(this.value);
        });
        return aData;
    },
    'dom-data-rk': function (oSettings, iColumn) {
        var aData = [];
        $('td:eq(' + iColumn + ')', oSettings.oApi._fnGetTrNodes(oSettings)).each(function () {
            aData.push($(this).attr('data-rk'));
        });
        return aData;
    }
}); 
```

我使用了 JSLint，但出现了一个错误：

```
Warning 21  JS Lint: Unexpected dangling '_' in '_fnGetTrNodes'. 
```

有人可以解释这是什么意思吗？我根本不明白错误信息:-(

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T12:39:56.427

JSLint 根本不喜欢以下划线字符开头的标识符。更改标识符，警告将消失，或将以下指令添加到文件顶部：

```
/*jslint nomen: true */ 
```

它不喜欢它们的原因是人们经常用它来表示“私有”变量，但实际上并没有改变变量的行为。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T12:41:31.097

> 不要使用 _（下划线）作为名称的第一个字符。它有时用于表示隐私，但实际上并不提供隐私。如果隐私很重要，请使用提供私人成员的表格。避免表现出缺乏能力的惯例。

更多关于 JSLint 使用的代码约定[在这里](http://javascript.crockford.com/code.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T12:40:59.943

您可以简单地将“在标识符中容忍悬空 _”设置为 true 以忽略此错误。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-28T12:43:02.080

好吧，JSlint 不喜欢以下划线 ( `_`) 开头的变量名。

* * *

最好使用 JSHint.com 而不是 JSlint。它是 JSlint 的一个分支，为您提供更多配置选项，并且不会显示像这样的愚蠢错误。 [https://stackoverflow.com/a/10763615/1149495](https://stackoverflow.com/a/10763615/1149495)

# javascript - 获取之前的主干渲染

> ID：12640179
> 
> 赞同：0
> 
> 时间：2012-09-28T12:37:53.980
> 
> 标签：javascript, backbone.js

我正在使用主干 LayoutManager 来管理我的视图。

我在调用渲染之前获取模型数据时遇到问题，这显然会引发错误，因为 Ajax 成功回调尚未完成。

解决此问题的一种方法是在路由器中获取模型并将其`app.useLayout("main").render();`放入成功方法中。这是正确的方法还是有更好的解决方案？

路由器代码：

```
app.useLayout("main").setViews({
    ".place-detail": new Place.Views.Show({
      model: new Place.Model({ place_id: place_id })
    })
}); 

app.useLayout("main").render(); 
```

查看代码：

```
Views.Show = Backbone.View.extend({
    initialize: function(options) {
        _.bindAll(this,"render");
        this.model.on("change", this.render, this);
        this.model.fetch();
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T14:25:24.230

Backbone 的 fetch 接受成功和错误回调，所以如果你想在执行更多代码之前等待 fetch 完成，把它放在成功回调中：

```
Views.Show = Backbone.View.extend({
    initialize: function(options) {
        var _this = this;
        _.bindAll(this,"render");
        this.model.fetch({
          success: function(model, response) {
              _this.render();
              _this.model.on("change", _this.render, _this);
              _this.someOutsideFunctionCall();
          },
          error: function(model, response) {
              console.log("Error Fetching.");
          }
        });
    };
}); 
```

我在 CoffeeScript 中编写了很多代码，所以我不确定我是否得到了所有 ({}); 的正确性，但这是它的基本要点。注意 _this = this 的声明，因为如果你尝试在回调函数中引用 this，它不会知道你在说什么。

# sql - 我想编写一个摘要查询并将结果呈现在一个表中

> ID：12640180
> 
> 赞同：3
> 
> 时间：2012-09-28T12:37:57.540
> 
> 标签：sql, sql-server, tsql, ssms

我需要编写一份关于 3 个不同状态值的摘要报告，每个状态都有一个计数和一个金额列，结果显示在一个表中。例如，输出将如下所示：

![在此处输入图像描述](../Images/fb923b174d0571c2f8e6e3c017c99303.png)

生成每一行代码（在单独的输出中）的查询是：

```
select case when status_key = '2' then 'Paid' else '' end as 'Status'
, COUNT(BillNo) as [Count]
, SUM(amtpd) as [Amount Paid]
from billtable 
where client = 101
and status_key = '2'
group by status_key

select case when status_key = '1' then 'Queued' else '' end as 'Status'
, COUNT(BillNo) as [Count]
, SUM(amtpd) as [Amount Paid]
from billtable 
where client = 101
and status_key = '1'
group by status_key

select case when status_key = '4' then 'Hold' else '' end as 'Status'
, COUNT(BillNo) as [Count]
, SUM(amtpd) as [Amount Paid]
from billtable 
where client = 101
and status_key = '4'
group by status_key 
```

这会产生三个结果，例如：

![在此处输入图像描述](../Images/dd00d7f1111d3a87a3e218702afed1e6.png)

我正在使用 SQL Server 数据库和 SSMS 来开发查询。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-28T12:58:23.453

不需要联合。

使用 WHERE 仅过滤到您想要的 status_keys，然后扩展您的 CASE 语句以将数字重新编码为单词。

```
select
  case when status_key = '2' then 'Paid'
       when status_key = '1' then 'Queued'
       when status_key = '4' then 'Hold'
                             else 'Error!' end     AS [Status],
  COUNT(BillNo)                                    AS [Count],
  SUM(amtpd)                                       AS [Amount Paid]
from
  billtable
where
  client = 101
  AND status_key IN ('1','2','4')
group by
  status_key 
```

**编辑**使用维度表的修改示例

```
select
  status.description                                    AS [Status],
  COUNT(bill_table.BillNo)                              AS [Count],
  SUM(bill_table.amtpd)                                 AS [Amount Paid]
from
  billtable
inner join
  status
    on billtable.status_key = status.key
where
      bill_table.client      = 101
  AND bill_table.status_key IN ('1','2','4')
group by
  status.description 
```

然后，您可以从`status`to获得外键约束`billtable`。这将确保数据不能插入`billtable`，除非有相应的 key in `status`。

然后，您的查找将始终有效。`status`但是，如果没有正确填充表，则插入失败的“代价”是。

这`fact-table`和`dimension-table`构造是关系数据库设计的基础。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T12:41:35.740

你只需要联合所有

```
your first query
Union all
your Second query
union all
your third query 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T12:42:40.953

只需在您的查询之间添加 UNION 即可。

# android - 当我足够近时显示通知

> ID：12640182
> 
> 赞同：0
> 
> 时间：2012-09-28T12:38:09.630
> 
> 标签：android, google-maps, geolocation

我开始创建一个应用程序，当用户距离我的商店 1 公里范围内时，它会显示通知。

我有 xml 文件，其中显示了我的商店纬度和日志：

```
<SHOPS>
<SHOP LON="19.456865000000000000" LAT="51.765639000000000000" CITY="90-423 Łódź" STR="ul. Piotrkowska 95" PHOTO=""/>
<SHOP LON="18.564883000000000000" LAT="54.443416000000000000" CITY="81-759 Sopot" STR="ul. Bohaterów Monte Casino 26" PHOTO=""/>
<SHOP LON="19.455248000000000000" LAT="51.770487000000000000" CITY="90-125 Łódź" STR="ul. Narutowicza 41" PHOTO=""/>
<SHOP LON="20.930370000000000000" LAT="52.241939000000000000" CITY="01-460 Warszawa" STR="ul. Górczewska 124" PHOTO=""/>
</SHOPS> 
```

我该怎么做，如何指定纬度和经度的半径？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T12:44:58.523

我猜你正在寻找一个公式来计算两个纬度+经度坐标之间的距离？检查这个问题：[Working with latitude/longitude values in Java](https://stackoverflow.com/questions/120283/working-with-latitude-longitude-values-in-java)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T13:16:17.970

如果您想查找两个不同位置之间的距离（即用户位置和您的 shp 位置之一），您可以使用以下代码：

```
Location shopLoc = new Location("");    
shopLoc.setLatitude(shopLat); //get this value from your xml file
shopLoc.setLongitude(shopLon); //get this value from your xml file

Location userLoc = new Location("");
userLoc.setLatitude(userLat); //get this value from gps or other position device
userLoc.setLongitude(userLat); //get this value from gps or other position device

//Finaly get the distance with
float distance = userLoc.distanceTo(shopLocation) 
```

现在您可以将距离与 1 Km 进行比较并显示通知

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T18:58:38.677

Android为此有一个特定的功能：

[Android 接近警报教程](http://www.javacodegeeks.com/2011/01/android-proximity-alerts-tutorial.html) [addProximityAlert](http://developer.android.com/reference/android/location/LocationManager.html#addProximityAlert%28double,%20double,%20float,%20long,%20android.app.PendingIntent%29)

只需设置邻近圆的中心（必须等于您商店的坐标）及其半径（1 公里）。Android 将完成剩下的工作。无需计算任何东西。

# google-maps - 谷歌地图缩放后的方向

> ID：12640190
> 
> 赞同：8
> 
> 时间：2012-09-28T12:39:13.377
> 
> 标签：google-maps, google-maps-api-3

我正在使用谷歌地图来提供从一个点到另一个点的方向。

虽然，我已将地图的缩放设置为 15，但在响应方向请求后缩放会发生变化，以便可能将方向适合地图。

现在有没有人知道如何将变焦保持在 15 倍并聚焦在第一点？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-09-28T13:08:00.430

请参阅[DirectionsRenderer的文档](https://developers.google.com/maps/documentation/javascript/reference#DirectionsRendererOptions)

```
preserveViewport: true 
```

将阻止 DirectionsRenderer 更改缩放。

要将地图居中于第一个点，请使用 map.setCenter 函数。您将需要解析来自路线服务的响应并为第一点创建一个 google.maps.LatLng 对象。

此示例显示了一种解析响应的方法：

[http://www.geocodezip.com/v3_directions_custom_iconsC.html](http://www.geocodezip.com/v3_directions_custom_iconsC.html)

（你不需要一切，只需要你想要居中的点的位置）

# javascript - 图像周围可笑的灰色边框

> ID：12640191
> 
> 赞同：2
> 
> 时间：2012-09-28T12:39:16.693
> 
> 标签：javascript, html, css, border

正如您从代码中看到的那样，当单击图像时，它会在按钮下方打开一个内容窗格`border:none`：`border:0px`

似乎没有任何工作。CSS 可能非常令人沮丧。

下面是我正在使用的 css 和 html，因为它们似乎没有用，所以去掉了上面的修复尝试。我希望它像我忽略或搞砸一样简单。

任何帮助，将不胜感激。

```
#basemapbutton {
    position:absolute;
    top:5px;
    right:150px;
    width:20px;
    height:40px;
    z-index:100;
} 
```

和：

```
<!--Basemap Gallery-->      
<div id="basemapbutton">
    <button dojoType="dijit.form.Button" baseClass="tomButton" border="0" title="Switch Basemap">    
    <img src="images/imgBaseMap.png"/>     
    <script type="dojo/method" event="onClick">   
        toggler[(dojo.style("panel","display") == "none") ? 'show':'hide']();
    </script>
    </button>   
    <div id="panel" dojoType="dijit.layout.ContentPane" style="#900;display: none;">
        <span id="basemapGallery"></span>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T12:45:34.127

只需在主 CSS 文件的顶部添加以下内容：

```
img {

border: 0px !important;
outline: 0 !important;

} 
```

**!important**将覆盖所有可以由 javascript 添加的内联样式...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T12:47:28.180

问题是按钮元素和/或`<img>`.

```
#basemapbutton img, button img,
#basemapbutton:active img, button:active img
#basemapbutton:focus img, button:focus img {
  border: none;
  outline: 0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-01T07:30:31.323

尝试使用内容：“”；在 CSS 样式中。

```
#basemapbutton {
    content: "";

    position:absolute;
    top:5px;
    right:150px;
    width:20px;
    height:40px;
    z-index:100;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T12:47:09.527

这应该这样做：

```
#basemapbutton button {
    border: 0px;
    padding: 0px;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-28T12:50:15.697

像这样为按钮创建一个类`<button dojoType="dijit.form.Button" baseClass="tomButton" class="remove_border" title="Switch Basemap">`

只需将这一点包含在您的 css 中即可`.remove_border{ border-style:none; padding:0px;}`

# ios - 解析工具包在 xcode 4.5 上崩溃

> ID：12640193
> 
> 赞同：2
> 
> 时间：2012-09-28T12:39:37.407
> 
> 标签：ios, xcode

我在我的项目中使用了解析工具包，它工作正常。原始项目是在 xcode 4.2.1 中制作的。在 iphone 4s 和 iOS 5 上运行良好。

问题是当我在 xcode 4.5 中打开同一个项目并将其安装在设备上时，它在使用方法时崩溃了

```
t = [PKTokenizer tokenizerWithString:moveString]; 
```

它崩溃了。错误消息是 **dyld：惰性符号绑定失败：找不到符号：_objc_setProperty_nonatomic 引用自：/var/mobile/Applications/9BE9D9FB-278D-45FD-B5EB-62FC0A162DC6/Mchess.app/Mchess 预期在：/usr/lib/libobjc .A.dylib** 我仍在将其追踪到解析工具包中，但任何指导都会有所帮助

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T12:43:33.530

我认为您的部署目标设置不正确；看到[这个页面](https://github.com/PrimaryFeather/Sparrow-Framework/pull/1078)。

# javascript - 如何显示进度条，如长请求的增量状态更新

> ID：12640195
> 
> 赞同：0
> 
> 时间：2012-09-28T12:39:46.683
> 
> 标签：javascript, asp.net, c#-4.0

我必须在我的 Asp.net 应用程序中向服务器发送长时间请求，该请求我调用了 4 个服务，每个服务最多需要 1 分钟，所以我想显示进度条哪个服务已完成，我搜索了一个链接[示例](http://encosia.com/easy-incremental-status-updates-for-long-requests/)，它是正确的关于我的概念，但该链接使用 iframe 加载另一个页面，该页面写入方法如

```
protected void UpdateProgress(int PercentComplete, string Message)
{
  // Write out the parent script callback.
  Response.Write(String.Format(
    "<script>parent.UpdateProgress({0}, '{1}');</script>", 
    PercentComplete, Message));
  // To be sure the response isn't buffered on the server.
  Response.Flush();
} 
```

在此代码中调用父 aspx 页面中的 javascript 函数以更新详细信息，但我在同一页面中处理该概念，**我删除了“父”。在我的代码中获取预期的错误对象**如何在单页中编写代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T12:55:11.077

在 jQuery (http://jQuery.com) 的帮助下，您可以在 javascript 中执行以下操作：

```
function callServices() {
   var serviceUrls = ["http://yourdomain/svc1", "http://yourdomain/svc2", "http://yourdomain/svc3", "http://yourdomain/svc4"];
   for(i = 0; i < serviceUrls.length; i++) {
      $.ajax(serviceUrls[i], function(){ updateStatus("Service " + i); });
   }
}

function updateStatus(svc) {
    $("#statusBar").append("<span>" + svc + " has finished.</span>");
} 
```

干杯!

# asp.net-mvc - 在 MVC4 中使用资源进行本地化

> ID：12640196
> 
> 赞同：5
> 
> 时间：2012-09-28T12:39:52.173
> 
> 标签：asp.net-mvc, asp.net-mvc-3, localization, asp.net-mvc-4, globalization

我正在按照[这个问题的答案给出的](http://geekswithblogs.net/shaunxu/archive/2010/05/06/localization-in-asp.net-mvc-ndash-3-days-investigation-1-day.aspx)[本](https://stackoverflow.com/questions/7776868/localization-using-resources-file-not-working)教程，但是我一直在显示资源。

就像在教程中一样，我创建了两个文件

```
App_GlobalResources
   /Global.en.resx
   /Global.ru.resx 
```

我已经制作了可以正常工作的数据注释类，并添加了一个没有错误的 cookie，这意味着它将本地数据正确地注入到当前线程中。当我尝试输出资源时，它找不到它。

我试图像这样输出它，但这些都不起作用：

```
@Global.HomeHello
@Global.en.HomeHello
@Resources.Global.Homhello
// The name 'Resources/Global/etc...' does not exist in the current context 
```

此外，在本教程站点中，我看不到可以注入正确资源文件的逻辑，它如何执行类似（在教程中）的操作`@Global.HomeHello`，并且它会知道是否`/en/`需要使用url`Global.en.resx`

请帮助，第一次使用资源和实现多种语言，感觉比使用`*.yml`其他框架/语言中的文件困难 100 倍......

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-28T13:19:30.183

我猜你举了一个坏榜样。请查看以下文章：

[资源文件和 ASP.NET MVC 项目](http://odetocode.com/Blogs/scott/archive/2009/07/16/resource-files-and-asp-net-mvc-projects.aspx)

不要忘记更改`Custom Tool`to`PublicResXFileCodeGenerator`和`Custom Tool Namespace`to `Resources`。

希望这有帮助，祝你好运。

# ms-access - 在访问表中添加或更改记录

> ID：12640197
> 
> 赞同：1
> 
> 时间：2012-09-28T12:39:53.463
> 
> 标签：ms-access, ms-access-2007, vba

我正在制作一个相当简单的库存跟踪数据库。我想通过 ID 检索记录，并在金额中添加或删除指定的数字。如果它不存在，我想添加它。甚至可以在不绑定到表的情况下执行此操作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T19:38:38.760

听起来你有一个候选`ID`值。也许它包含在一个名为`MyID`. 并且您还有另一个数值`MyAmtChange`，它将添加到表中为字段值匹配`amount`的行命名的字段中的值中。 `ID``MyID`

一个复杂的问题是您的表中可能没有`ID`值匹配的行`MyID`。在这种情况下，您需要为其添加一行。

如果那是正确的，当一个不存在时，`INSERT`一行。`MyID`然后你可以简单地`UPDATE`在`amount`匹配的行中`MyID`。

```
Dim strInsert As String
Dim strUpdate As String
Dim db As DAO.Database

Set db = CurrentDb
If DCount("*", "YourTableNameHere", "ID = " & MyID) = 0 Then
    strInsert = "INSERT INTO YourTableNameHere (ID)" & vbCrLf & _
        "VALUES (" & MyID & ");"
    Debug.Print strInsert
    db.Execute strInsert, dbFailOnError
End If

strUpdate = "UPDATE YourTableNameHere" & vbCrLf & _
    "SET amount = Nz(amount, 0) + " & MyAmtChange & vbCrLf & _
    "WHERE ID = " & MyID & ";"
Debug.Print strUpdate
db.Execute strUpdate, dbFailOnError
Set db = Nothing 
```

如果这个猜测相当接近，则向该代码添加一个错误处理程序块，以处理`dbFailOnError`... 或任何其他错误出现的任何问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T12:28:57.680

我不知道你到底想要什么，但这段代码展示了如何使用 VB-Access 操作数据。

```
Sub fnStudent()
    On Error GoTo insertError
    Dim studentQuery As String
    'INSERTING INTO TABLE
        studentQuery = "INSERT INTO Students values ('10','YAHYA','02/10/2012')"
        CurrentDb.Execute studentQuery, dbFailOnError
    'UPDATING
        studentQuery = "UPDATE Students Set name='YAHYA OULD ABBA' WHERE stdID='10'"
        CurrentDb.Execute studentQuery, dbFailOnError
    'LISTING VALUES
    Dim studentsRS As Recordset
    Set studentsRS = CurrentDb.OpenRecordset("SELECT * FROM Students WHERE upper(name) like '%YAHYA%';")
    Do While Not studentsRS.EOF
        MsgBox "ID : " & studentsRS.Fields(0) & "Name : " & studentsRS.Fields(1) & "Birth Date : " & studentsRS.Fields(2)
        studentsRS.MoveNext
    Loop
    'DELETING
    studentQuery = "DELETE FROM Students WHERE stdID='10'"
    CurrentDb.Execute studentQuery, dbFailOnError
    Exit Sub 'exit if there was no error
    'UPDATE:
errorHandler:
    If Err.Number = 3022 Then
            MsgBox "Can't have duplicate key; index changes were unsuccessful",     vbMsgBoxRtlReading + vbCritical, "Error " & Err.Number
    Else : MsgBox "Error" & vbCrLf & Err.Description, vbMsgBoxRtlReading + vbCritical, "Error " & Err.Number
    End If
End Sub 
```

在这里您可以找到`vba`错误列表[http://www.halfile.com/vb.html](http://www.halfile.com/vb.html)

# svn - svn 仓库地址

> ID：12640201
> 
> 赞同：0
> 
> 时间：2012-09-28T12:40:05.950
> 
> 标签：svn, version-control, tortoisesvn

我将站点存储在 www/sitename/ 下的 wamp 文件夹中，现在我可以通过键入来访问它

```
    http://localhost/站点名称/

```

现在我想在这个文件夹中有一个文件存储库。当我尝试在 svn 中签出时，我在 url 存储库中给出了**http://localhost/sitename/ 。**

但它正在回复错误消息重定向完成

无法连接到 URL 'http://localhost/sitename/' 的存储库

**问题 1**：真的有可能使用 url 形成存储库吗？如果是的话，这将如何在虚拟主机中发生。

**问题2**：我该如何解决这个错误

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T12:46:16.247

`http://localhost/sitename/`不能同时是网站服务*和*SVN服务。它必须是其中之一。当您访问该 URL（假设 http 协议的端口为 80）时，Apache 进程会获取请求并响应网站*，或者*SVN 进程会获取请求并响应存储库。只有其中一个可以监听请求。

无论如何，您要达到的目标并不是好的做法。您的源代码控制存储库也不应该是生产应用程序。它应该是分开的。因此，您需要在类似`http://localhost/SVN`或任何其他非生产应用程序路径上创建一个 SVN 存储库。

虽然我*确实*很欣赏将持续部署作为目标，但完全跳过部署步骤并不是实现它的方法:) 您仍然应该将两个不同的关注点（源代码控制和生产应用程序）分开，并将从源代码部署到生产环境作为一个单独和离散的步。即使该步骤只是一个在签入时自动运行的脚本（希望在运行任何自动化测试以在部署之前验证签入之后）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T12:48:38.053

您需要同时配置 SVN 和 Apache。[文档在这里](http://svnbook.red-bean.com/en/1.7/svn.serverconfig.httpd.html)。但是，请阅读[大卫的评论](https://stackoverflow.com/a/12640305/215966)。我必须100%同意。

# winforms - 当自动缩放未按预期工作时，如何控制 Winforms 应用程序中的缩放？

> ID：12640203
> 
> 赞同：1
> 
> 时间：2012-09-28T12:40:14.070
> 
> 标签：winforms, .net-4.0

我有一个 .NET 2.0 Winforms 应用程序，它已转换为 .NET 3.5，随后又转换为 .NET 4.0。我不确定我在新应用程序中看到的行为是否存在于以前的版本中并且以前没有人注意到它，或者这对于 .NET 4.0 和 Windows 7 是否是新的。

当用户进入显示设置并将其字体大小从“小 - 100%（默认）”更改为“中 - 125%”或“大 - 150%”时，表单上的控件都会变大并变为表格太大而无法显示。奇怪的是，控件似乎被锁定在表单的大小上，所以即使用户调整表单的大小，控件也会随着表单的大小而增长——结果控件的某些部分总是被切断或完全丢失。即使控件未停靠，仅锚定“顶部，左侧”，全部设置为 AutoSize = False 和 AutoSizeMode = GrowOnly，情况也是如此。

我已经尝试过改变锚定和对接，但这并没有帮助。我也在[这里](http://msdn.microsoft.com/en-us/library/ms229594%28v=vs.100%29.aspx)试用了 MSDN 的代码。

在我看来，真正奇怪的部分是表单之间的行为不一致。某些表单在缩放时没有问题，无论是否有来自 MSDN 的附加自动缩放代码。我看不出有问题的共同因素。有些表格没有任何问题，而其他表格则没有。

我希望这是其他人看到的一些行为，并且可以为我指明正确的方向以寻求解决方案。提前感谢您提供的任何帮助。

# django - 外键相关表单保存在 Django

> ID：12640205
> 
> 赞同：3
> 
> 时间：2012-09-28T12:40:28.457
> 
> 标签：django, django-models, django-forms, django-templates

我的模型看起来像......

```
Student(models.Model):
    name = models.CharField(max_length = 60, blank = False)
    r_no = models.CharField(max_length = 60, blank = False)
    created_date = models.DateTimeField(null = False, blank = False, default = datetime.datetime.now())

StudentPotential(models.Model):
    aka_name = models.CharField(max_length = 60, blank = True)
    -----
    -----
StudentCorrespondence(models.Model):
    student = models.ForeignKey('Student', related_name = "Student_FK")
    student_p = models.ForeignKey('Student', related_name = "Student_FK")
    emailed_date = models.DateTimeField(null = True, blank = True)
    phoned_date = models.DateTimeField(null = True, blank = True) 
```

我在 form.py 中的表格

```
class StudentPotentialForm (forms.ModelForm):

    class Meta:
        model = StudentPotential

class StudentCorrespondenceForm(forms.ModelForm):
    class Meta:
        model = StudentCorrespondence
        exclude = ('student', 'student_p') 
```

最后我的观点.py

```
def add_student_company_potential(request, student_id):
    from cdradmin.forms import StudentPotentialForm, StudentCorrespondenceForm
    if request.method == 'POST':
            ### HOW TO SAVE THE two from for the student have its it 'student_id' ####

    else:

            StudentPotentialForm = StudentPotentialForm()
            StudentCorrespondenceForm = StudentCorrespondenceForm()
context = {'StudentCorrespondenceForm':StudentCorrespondenceForm, "StudentPotentialForm":StudentPotentialForm}
return render_to_response('cdradmin/studentform.html', context, context_instance = RequestContext(request)) 
```

将数据发布到视图后，我如何才能为学生保存这些数据，因为他/她的 id 是“student_id”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T13:03:17.037

你可以试试这个

```
if request.method == 'POST':
    spf = StudentPotentialForm(request.POST)
    if spf.is_valid():
        osp = spf.save()
    else :
       #raise error

    student = Student.objects.get(id=student_id)
    scf = StudentCorrespondenceForm(request.POST)
    if scf.is_valid():
        osc = scf.save(commit=False)
        osc.student = student
        osc.student_p = osp
        osc.save()
    else:
        # raise error. 
```

# python - Python 3：如何导入模块

> ID：12640206
> 
> 赞同：1
> 
> 时间：2012-09-28T12:40:28.037
> 
> 标签：python, python-3.x

我使用 Windows。不知何故，我无法导入自己的模块。

我准备了：

```
import sys
sys.path.append(r'C:\Users\Michael\PycharmProjects\timer')
#import timer
print(sys.path) 
```

打印内容的摘录：

```
site-packages', 'C:\\Users\\Michael\\PycharmProjects\\timer'] 
```

在 C:\Users\Michael\PycharmProjects\timer 我有一个名为 timer.py 的文件

为什么我的命令`import timer`不正确？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T13:13:44.293

您的 import 语句被注释掉了，在 python 中，您只需在前面`import timer`不`#`使用许多编译语言及其`include`语句所使用的前面即可导入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T19:10:55.887

导入命令被标记为注释。删除哈希标签，它应该没问题。

# entity-framework-4 - 将用户名设置为外键

> ID：12640214
> 
> 赞同：1
> 
> 时间：2012-09-28T12:41:02.433
> 
> 标签：entity-framework-4, asp.net-mvc-4, asp.net-web-api

我在 VS2012RC 中创建了一个 mvc4 webapi 项目，并在我的项目中使用了 EF4.3 作为 Code first。
我使用了默认的会员服务提供商。如何在另一个模型中使用 UserName 作为外键。

我试过这段代码，

```
 [ForeignKey("RegisterModel")]
    public string UserName { get; set; }
    public virtual RegisterModel User { get; set; } 
```

我的代码有什么问题吗？

请帮忙

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T17:23:02.890

您不能使用`UserName`，因为`UserName`它不是表中的主键`Users`。使用 EF 时，只有主表中的主键可以用作依赖表中的外键，因为 EF 不了解数据库中使用的唯一约束。

# javascript - JavaScript Array 的内存管理

> ID：12640216
> 
> 赞同：15
> 
> 时间：2012-09-28T12:41:15.097
> 
> 标签：javascript, arrays, memory, memory-management

> **可能重复：**
> [Javascript 数组是否稀疏？](https://stackoverflow.com/questions/1510778/are-javascript-arrays-sparse)

我目前正在学习 JavaScript，并且一直在阅读一些简单的介绍和教程。在查看 Array 对象时，我偶然发现了一些细节，这让我觉得很奇怪，来自其他语言，如 C/Java/Scala/...

* * *

所以让我们假设我们这样定义一个数组：

```
var arr = ['foo','bar','qux'] 
```

我们现在分配

```
arr[5] = 'baz' 
```

这导致我们的数组看起来像这样：

```
arr
>> ["foo", "bar", "qux", undefined, undefined, "baz"] 
```

而且长度符合预期

```
arr.length
>> 6 
```

* * *

JavaScript 已经将我们的数组扩展到所需的长度 - 六 - 并且新项目设置为未定义 - 除了我们实际分配值的那个。

从低层次的角度来看，这在记忆方面是可怕的。通常，数组将是内存中的连续范围 - 使数组更大通常涉及将整个数组复制到足够大小的新内存位置。这是一个非常昂贵的操作。

*现在，我确实意识到这可能**不是**JavaScript 引擎正在做的事情，因为围绕数组进行复制会非常昂贵，并且内存空间会浪费在所有这些“未定义”值上。*

谁能告诉我门后到底发生了什么？

*   数组实际上是某种类型的链表吗？
*   “未定义”的数组项是否真的存在？
*   使用大部分充满“未定义”的大型数组有多昂贵？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-28T13:05:02.740

在 JavaScript 的第一个版本中，没有数组。它们后来被作为*“所有对象之母”*的子类引入：`Object`。你可以通过这样做很容易地测试它：

```
var foo = [1,2,3,4];
for (var n in foo)
{//check if n is equal (value and type) to itself, coerced to a number
    console.log(n === +(n) ? 'Number' : 'String');
} 
```

这将`String`一次又一次地记录。在内部，所有数字键都转换为字符串。Length 属性仅获取最高索引，并将其加 1。而已。当你显示你的数组时，对象被迭代，并且对于每个键，相同的规则适用于任何对象：首先扫描实例，然后是原型......所以如果我们稍微改变我们的代码：

```
var foo = [1,2,3,4];
foo[9] = 5;
for (var n in foo)
{
    if (foo.hasOwnProperty(n))
    {//check if current key is an array property
        console.log(n === +(n) ? 'Number' : 'String');
    }
} 
```

你会注意到数组只有 5 个自己的属性，`undefined`键 4-8 是未定义的，因为在实例中没有找到对应的值，在任何底层原型中也没有。简而言之：数组并不是真正的数组，而是行为相似的对象。

正如 Tim 所说，您*可以*拥有一个具有未定义属性的数组实例，该属性*确实*存在于该对象中：

```
var foo = [1,2,undefined,3];
console.log(foo[2] === undefined);//true
console.log(foo[99] === undefined);//true 
```

但同样，有一个区别：

```
console.log((foo.hasOwnProperty('2') && foo[2] === undefined));//true
console.log((foo.hasOwnProperty('99') && foo[99] === undefined));//false 
```

*回顾一下，你的三个主要问题：*

*   数组是对象，允许您使用数字实例引用它们的属性

*   这些`undefined`值不存在，它们只是 JS 扫描对象和原型并且找不到您要查找的内容时的默认返回值：*“对不起，您问我的内容在我的书中未定义。”* 就是它所说的。

*   使用大部分未定义的数组不会影响对象本身的大小，但是访问未定义的键可能会非常*非常*慢，因为原型也必须被扫描。

*更新：*

只需[引用 Ecma std](http://www.ecma-international.org/publications/files/ECMA-ST/Ecma-262.pdf)：

> 15.4 数组对象
> 数组对象对某一类属性名称给予特殊处理。当且仅当 ToString(ToUint32(P)) 等于 P 并且 ToUint32(P) 不等于 2^32 1 时，属性名称 P（以字符串值的形式）是数组索引。属性名称为数组索引的属性也称为元素。每个 Array 对象都有一个长度属性，其值始终是小于 2^32 的非负整数。length 属性的值在数值上大于名称为数组索引的每个属性的名称；每当创建或更改 Array 对象的属性时，都会根据需要调整其他属性以保持此不变性。具体来说，每当添加名称为数组索引的属性时，都会更改长度属性，如有必要，比该数组索引的数值大一；并且每当更改长度属性时，所有名称为数组索引且值不小于新长度的属性都会被自动删除。此约束仅适用于 Array 对象的自身属性，不受可能从其原型继承的长度或数组索引属性的影响。
> 
> 如果以下算法返回 true，则称对象 O 是稀疏的：
> 1\. 设 len 为使用参数“length”调用 O 的 [[Get]] 内部方法的结果。
> 2\. 对于0≤i
>     a 范围内的每个整数i。令 elem 为使用参数 ToString(i) 调用 O 的 [[GetOwnProperty]] 内部方法的结果。
>      湾。如果 elem 未定义，则返回 true。
> 3\. 返回假。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-28T12:50:14.187

数组只是对象的有序列表。**在 JavaScript 中，一切都是对象**，因此数组并不是我们所知道的真正的数组 :)

[你可以在这里](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array?redirectlocale=en-US&redirectslug=Core_JavaScript_1.5_Reference/Global_Objects/Array)找到一些内部结构。

对于您对使用大型数组的疑问......好吧，请记住，您在“客户端”进行的计算越少，您的页面就会越快。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T12:59:34.933

答案：

1.  `length`JavaScript 中的数组与具有魔法属性和额外原型方法（`push()`等）的对象（即无序的属性集合）相同。
2.  不，未定义的项目不存在。JavaScript 有一个`in`运算符来测试是否存在可以用来证明这一点的属性。所以对于下面的数组：`var arr = ['foo']; arr[2] = 'bar';`，`2 in arr`返回`true`和`1 in arr`返回`false`。
3.  稀疏数组不应比密集数组占用更多内存，密集数组的长度是稀疏数组中实际定义的属性数。当您迭代其未定义的属性时，使用稀疏数组只会更加昂贵。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T13:07:35.510

大多数 javascript 实现将数组实现为某种形式的二叉树或哈希表，以数组索引作为键，因此大量未定义的对象不会占用任何内存。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-28T13:24:06.917

有人告诉我，数组分为两部分，[值，指针]。所以 arr[2] 的指针为空。当您添加 5 时，它会将地址从 null 更改为指向数字 3，该数字指向数字 4，该数字指向数字 5，该数字为 null（因此数组结束）。

我不确定这是多么真实，因为我从未真正检查过它。但这似乎是有道理的。

因此，您不能像在 ac 类型数组上那样进行数学运算（即，要达到值 4，只需执行起始内存点 + 4x（内存中的对象数量）），但是您可以通过逐个跟随数组来做到这一点

# iphone - NSMutableDictionary 没有正确排序

> ID：12640219
> 
> 赞同：1
> 
> 时间：2012-09-28T12:41:31.307
> 
> 标签：iphone, objective-c, xcode, nsmutabledictionary

让我有未排序的**NSMutableDictionary**

```
 {
        A = "3";
        B = "2"; 
        C = "4";
    } 
```

我需要结果是这样的：

```
 {
        B = "2";
        A = "3";
        C = "4";
    } 
```

我怎样才能在**目标 c**中实现这一结果。

一个简单的代码实现将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-28T12:43:02.623

NSMutableDictionary 不可能，它不是排序结构。您必须将其转换为 NSArray，然后对其进行排序。然后，您将没有字典结构。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-28T12:54:30.127

您不能将**NSMutableDictionary**按值排序为@joe 和@mavrick3 答案。但是，如果您将那里的键和值更改为**NSArray**，您可以做到。这是简单的实现。 NSMutableDictionary *results; //要排序的字典

> ```
>  NSMutableDictionary *results; //dict to be sorted
>     NSArray *sortedKeys = [results keysSortedByValueUsingComparator: ^(id obj1, id obj2) {
>         if ([obj1 integerValue] > [obj2 integerValue]) 
>             return (NSComparisonResult)NSOrderedDescending;
>         if ([obj1 integerValue] < [obj2 integerValue])
>             return (NSComparisonResult)NSOrderedAscending; 
>         return (NSComparisonResult)NSOrderedSame;
>     }];
>     NSArray *sortedValues = [[results allValues] sortedArrayUsingSelector:@selector(compare:)];
> 
>     //Descending order
>     for (int s = ([sortedValues count]-1); s >= 0; s--) {
>         NSLog(@" %@ = %@",[sortedKeys objectAtIndex:s],[sortedValues objectAtIndex:s]); 
>     }
>     //Ascending order
>     for (int s = 0; s < [sortedValues count]; s++) {
>         NSLog(@" %@ = %@",[sortedKeys objectAtIndex:s],[sortedValues objectAtIndex:s]); 
>     } 
> ```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T14:31:56.987

你可以试试这个来对你的字典进行排序。

```
 NSMutableDictionary *tmpDict = [NSMutableDictionary dictionaryWithObjectsAndKeys:@"6",@"A",@"3",@"B",@"5",@"C",@"2",@"D",@"21",@"F",@"20",@"G",nil];

NSArray *sortedArray = [tmpDict keysSortedByValueUsingComparator:^NSComparisonResult(id obj1,id obj2){

    return [obj1 compare:obj2 options:NSNumericSearch];

}];

NSLog(@"Sorted = %@",sortedArray); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T12:47:01.860

`NSDictionary`也`NSMutableDictionary`不能按值排序。您只能使用 a`NSArray`对它们进行排序。但是您必须使用自己的代码来完成此操作，并且您不会获得与您想要的相同的输出。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-28T12:52:09.223

这是最简单的方法

```
NSArray *arr = [NSArray arrayWithObjects:@"2", @"4", @"1", nil];
NSArray *sorted = [arr sortedArrayUsingSelector:@selector(compare:)];
NSLog(@"Pre sort : %@", arr);
NSLog(@"After sort : %@", sorted); 
```

如果你有 f.ex. 字典（或模型对象）数组，你可以这样做：

```
NSDictionary *dict1 = [NSDictionary dictionaryWithObject:@"Mannie" forKey:@"name"];
NSDictionary *dict2 = [NSDictionary dictionaryWithObject:@"Zannie" forKey:@"name"];
NSDictionary *dict3 = [NSDictionary dictionaryWithObject:@"Cannie" forKey:@"name"];
NSArray *peopleIKnow = [NSArray arrayWithObjects:dict1, dict2, dict3, nil];

NSSortDescriptor *sorty = [NSSortDescriptor sortDescriptorWithKey:@"name" ascending:YES];

NSArray *results = [peopleIKnow sortedArrayUsingDescriptors:[NSArray arrayWithObject:sorty]];

NSLog(@"Before : %@", peopleIKnow);
NSLog(@"After : %@", results); 
```

# knockout.js - 淘汰赛JS css“其他”条件

> ID：12640221
> 
> 赞同：5
> 
> 时间：2012-09-28T12:41:34.013
> 
> 标签：knockout.js

我想在 Knockout 中执行此操作。

```
 <span class="badge" data-bind="text: rank, css: {'badge-success': firstPlace, 
        'badge-warning': !firstPlace}"></span> 
```

我的javascript模型类有这个方法

```
 self.firstPlace = ko.computed(function() {
        return self.rank() == 1;
    }); 
```

这无法产生“徽章警告”类。我在 data-bind 属性中尝试了一些调用变体，例如`firstPlace == false`和`(!firstPlace)`。相反，我必须在我的模型中添加第二个逆方法：

```
 <span class="badge" data-bind="text: rank, css: {'badge-success': firstPlace, 
        'badge-warning': notFirstPlace}"></span>

    // YUCK
    self.notFirstPlace = ko.computed(function() {
        return self.rank() != 1;
    }); 
```

当然，这行得通。Knockout JS 万岁，使用起来真的很有趣。但这似乎是错误的。有人有更好的方法吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-28T12:46:15.733

当您在数据绑定属性中使用逻辑操作时，您应该放在`()`可观察或计算名称之后。

```
<span class="badge" data-bind="text: rank, css: {'badge-success': firstPlace, 
    'badge-warning': !firstPlace()}"></span> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-12-29T18:57:43.907

如果只想计算`firstPlace()`一次*，*可以将`css`绑定编写为内联函数：

```
<span class="badge" data-bind="text: rank, css: (firstPlace() ? 'badge-success' : 'badge-warning')"></span> 
```

# c# - 在没有 LINQ 的情况下订购 IEnumerable

> ID：12640232
> 
> 赞同：2
> 
> 时间：2012-09-28T12:41:58.873
> 
> 标签：c#, .net, .net-3.0

您能否建议任何有关如何`IEnumerable<byte> indexes`在 .NET 3.0（无 LINQ）中排序的解决方案？当然可以确定`indexes`长度，创建数组，逐个元素复制，然后调用`Array.Sort(array)`. 但也许你能提出其他建议吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-28T12:46:14.450

只要您不使用 2.0 编译器（例如：VS 2008 / 2010 / 2012），您就可以使用[LINQBridge](http://code.google.com/p/linqbridge/downloads/list)，并使用 .NET 2.0/3.0 代码中的 LINQ-to-Objects 。

另一个懒惰的解决方案是：

```
List<byte> list = new List<byte>(indexes);
list.Sort();
// list is now a sorted clone of the data 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T12:48:17.147

不要认为有任何其他解决方案，然后“手动”迭代，在`C# 2.0`

创建数组的另一种选择。

您可以创建一个`List<>`

```
var list = new List<byte>(indexes ); 
list.Sort(delegate(byte b1, byte b2)
{
      //your comparison logic here
}); 
```

`for`它比集合更简单或`foreach`迭代更紧凑。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T12:49:17.323

当你对它进行排序时，必须阅读整个`IEnumerable<>`内容，所以没有办法解决这个问题。甚至 Linq to Objects 方法也`Sort`将整个集合保存在内存中。

`List<byte>`从 中创建一个`IEnumerable<byte>`并对其进行排序：

```
List<byte> list = new List<byte>(indexes);
list.Sort(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T12:45:45.277

由于您无法真正更改 IEnumerable，因此您将不得不将数据复制到其他地方以对其进行排序。

但是，请注意您正在对字节进行排序，您可以使用[Bucket Sort](http://en.wikipedia.org/wiki/Bucket_sort)进行超高效的排序。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-28T12:47:23.863

[http://www.codeproject.com/Articles/80546/Comparison-Sorting-Algorithms-in-C-Explained](http://www.codeproject.com/Articles/80546/Comparison-Sorting-Algorithms-in-C-Explained)

当我正在寻找解决方案时，这派上了用场

# android - 来自 SharedPreferences 的 getString 总是返回一个值的默认值

> ID：12640233
> 
> 赞同：0
> 
> 时间：2012-09-28T12:42:03.913
> 
> 标签：android, sharedpreferences

我在活动中使用此代码

```
 protected void onResume() {
    super.onResume();
    prefs = PreferenceManager.getDefaultSharedPreferences(getBaseContext());
    System.out.println(connections);
    String dir = prefs.getString("download_directory", "Download");
    System.out.println(dir);        
 } 
```

我的preferences.xml

```
<?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android" >
    <PreferenceCategory android:title="Downloads">
        <EditTextPreference
            android:key="download_directory"
            android:title="@string/download_destination"
            android:summary="@string/download_description"
            android:defaultValue="FacebookPhotos"
            android:dialogTitle="@string/download_destination" />
        <CheckBoxPreference android:key="subdir_album"
            android:title="@string/download_album"
            android:summary="@string/download_album_description" />
     </PreferenceCategory>
  <PreferenceCategory android:title="Gallery">
     <EditTextPreference 
      android:key="connections"
      android:title="Concurrent connections"
      android:numeric="integer"
      android:maxLength="2" 
      android:defaultValue="7"
      android:dialogTitle="Concurrent connections" />
  </PreferenceCategory>
</PreferenceScreen> 
```

编辑者

```
public class Preferences extends PreferenceActivity
{
@Override
protected void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    addPreferencesFromResource(R.xml.preferences);
}
} 
```

问题是，当我得到“连接”值时，它给了我正确的 int，而不是键“download_directory”的 getString 总是给我默认值“下载”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T13:29:17.010

> 键“download_directory”的getString总是给我默认值“下载”

仅当根本没有设置“download_directory”时才会发生这种情况！

# xml - 公式 xml 到 csv 文件的转换

> ID：12640238
> 
> 赞同：0
> 
> 时间：2012-09-28T12:42:24.480
> 
> 标签：xml, parsing, csv

需要帮助在 php 文件中添加公式并从 xml 数据转换为 csv 文件。

这是我的施工数据：

XML 文件：

```
<PRODUCTS>
<PRODUCT code="012345" price="100"/>
<PRODUCT code="123456" price="200"/>
<PRODUCT code="123457" price="300"/>
<PRODUCTS/> 
```

这是PHP文件：

```
<?php
    $filexml = 'price.xml';
    if (file_exists($filexml))
    {
        $xml = simplexml_load_file($filexml);
        $file = fopen('price.csv', 'w');

        $header = array('code', 'price');
        fputcsv($file, $header, ',', '"');

        /** @var SimpleXMLElement $product */
        foreach ($xml->PRODUCT as $product)
        {
        $value1 = $product->attributes()->code;
        $value2 = $product->attributes()->price;
        $formula = $value2 * 0.95;
            fputcsv($file, $value1, $formula, ',', '"');
        }

        fclose($file);

    }
?> 
```

结果需要是：

CSV 文件：

```
code,price
012345,95
123456,190
123457,285 
```

问题是我的脚本只返回标题。如果有人可以帮助我纠正问题，我将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T13:21:54.213

你有没有尝试过

```
foreach ($xml->PRODUCTS->PRODUCT as $product) 
```

?

# html - 使用 Audio API 播放音频流

> ID：12640245
> 
> 赞同：4
> 
> 时间：2012-09-28T12:42:41.377
> 
> 标签：html, audio, audio-streaming

我正在使用 HTML5 音频 api 来播放声音。这适用于常规 mp3 文件，但是当使用诸如 的声音流时`http://95.173.167.24:8009`，它无法播放。

这是我正在使用的代码：

```
 if('webkitAudioContext' in window) {
    var myAudioContext = new webkitAudioContext();
    }

    request = new XMLHttpRequest();
    request.open('GET', 'http://95.173.167.24:8009', true);
    request.responseType = 'arraybuffer';
    request.addEventListener('load', bufferSound, false);
    request.send();

    function bufferSound(event) {
      var request = event.target;
      var source = myAudioContext.createBufferSource();
      source.buffer = myAudioContext.createBuffer(request.response, false);
      source.connect(myAudioContext.destination);
      source.noteOn(0);
    } 
```

谁能指出我正确的方向？

任何帮助表示赞赏。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T13:34:06.800

问题很可能是 SHOUTcast 将您的 User-Agent 字符串检测为浏览器。它会查找其中包含的任何字符串`Mozilla`，然后说“哦，那是一个浏览器！发送给他们管理面板。”

您需要强制使用音频流。幸运的是，这很容易通过在 URL 末尾添加分号来完成：

```
http://95.173.167.24:8009/; 
```

请注意，日志中的 User-Agent 字符串将为`MPEG OVERRIDE`.

这适用于大多数浏览器。一些浏览器可能仍然不喜欢来自 SHOUTcast 的类似 HTTP 的响应，但这至少可以帮助您入门。

# java - 如何查询集合的复合元素？（不能为非实体集合创建元素连接）

> ID：12640249
> 
> 赞同：3
> 
> 时间：2012-09-28T12:42:54.780
> 
> 标签：java, hibernate, collections

我有课货

```
 <class name="Goods">
        ...
    <map name="names" lazy="false" fetch="join">
        <key not-null="true" />
        <map-key column="LANGUAGE_CODE" type="language" length="2"/>
        <composite-element class="Goods$Names">
            <property name="name" not-null="true" type="text"/>
            <property name="description" type="text"/>
        </composite-element>
    </map>

    ...

</class> 
```

当我尝试像这样按名称搜索商品时出现问题：

```
session.createQuery("select g from Goods g where g.names[:lang].name = 'Some goods name'")

javax.servlet.ServletException: java.lang.IllegalArgumentException: Cannot create element join for a collection of non-entities! 
```

用Hibernate真的不可能吗？
我真的需要将商品名称设为具有自己 ID 的实体吗？有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-18T02:58:50.070

*如果你想用复合键创建实体类，那么你必须在 java 中使用内部类*，如果你在休眠中创建实体而不是你必须维护关系（比如多对多，一对多，一对多一个，多对一）在您的实体之间，然后 Hibernate 具有在内部执行连接的功能，您不需要自己执行，这是我这边的全部提示，请尝试一下，即使这会使您的设计很好别人可以理解。

# javascript - 覆盖 jQuery.mobile-1.1.0.js

> ID：12640251
> 
> 赞同：0
> 
> 时间：2012-09-28T12:42:59.567
> 
> 标签：javascript, jquery, jquery-mobile, overriding, appendto

我很难覆盖核心 jQuerymobile 功能。这是我使用的 JQM 库的链接：http: [//code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.js](http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.js)

我更改了第 5873 行

```
.appendTo( wrapper ) 
```

到以下代码：

```
.appendTo( *My own code*  ) 
```

但我知道直接在 JQM 库中更改代码并不是实现我需要的最佳方式。所以我想在自定义 js 文件中进行覆盖。为了覆盖最少的 JQM lib 代码，我该怎么做？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T16:28:50.113

该代码可在委托事件处理程序中找到，因此您可以使用您自己的外部文件中的事件处理程序覆盖该事件处理程序。

第 5788 到 5884 行（大部分代码已编辑）：

```
$( document ).delegate( ":jqmData(role='listview')", "listviewcreate", function() {
    ...
        .appendTo( wrapper )
    ...
}); 
```

因此，在您的外部 JS 代码中，您可以删除此事件处理程序并附加您自己的：

```
$(document).undelegate(":jqmData(role='listview')", "listviewcreate").delegate(":jqmData(role='listview')", "listviewcreate", function () {
    //your version of the above code here
}); 
```

请注意，如果您使用的是 jQuery 1.7 或更新版本`.delegate()`，应该将 and`.undelegate()`替换为`.on()`/ 。`.off()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T14:27:52.367

在 jquery 初始化后试试这个代码

```
jQuery.fn.extend({append: function() { **Your code here** } }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T23:36:50.330

只需在加载 jQuery 之后、但在引入 jQuery mobile 之前包含一个自定义 JavaScript 文件。

```
<script src="jquery.js"></script>  
<script src="custom-scripting.js"></script>  
<script src="jquery-mobile.js"></script> 
```

# git - 是否可以接受来自克隆/分叉存储库的拉取请求？

> ID：12640254
> 
> 赞同：0
> 
> 时间：2012-09-28T12:43:22.063
> 
> 标签：git, github, fork, pull-request, git-am

是否可以接受来自克隆仓库的拉取请求？

示例（回购的叉子）：

*   回购 #1：[https ://github.com/acme/original_project](https://github.com/acme/original_project)
*   回购 #2：[https](https://github.com/blah/original_project) ://github.com/blah/original_project (fork)

拉取请求凌波：

*   回购 #1 有新的拉取请求，但不接受/合并
*   Repo #2 想要来自 Repo #1 的新拉取请求

有没有办法接受从 Repo #1 到 Repo #2 的拉取请求？

这有意义吗？也许是一个 git 上游拉取请求？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T12:46:38.370

应用于 Repo #1 的拉取请求来自一个 fork（另一个存储库）。如果 Repo #2 想要应用拉取请求，只需将 fork 添加为远程，然后直接从该 fork 获取更改。

请参阅[https://help.github.com/articles/fork-a-repo](https://help.github.com/articles/fork-a-repo)和[https://help.github.com/articles/using-pull-requests](https://help.github.com/articles/using-pull-requests)，它们实际上对此进行了更详细的解释。

另一种方法是使用`git am`. `git am`在后面的链接中有一个使用示例。

# html - 章节或文章中的 HTML5 结构和标题

> ID：12640255
> 
> 赞同：5
> 
> 时间：2012-09-28T12:43:25.307
> 
> 标签：html

虽然我应该真的知道这一点，但我怕我没有完全明白。阅读了不同的文章、阅读书籍并与他人交谈后，我仍然不太了解 HTML5 的正确结构`section`。在每个和/或中都有一个`h1`标签是否合适？是否新的或构成重新开始处理？`section``article``section``article``h1``h2`

我的印象是每个“块”都应该被允许有自己的“标题”结构。

例如，这是正确的 HTML5 吗？：

```
<!doctype html>
<html>
  <head>
    <title>
    <!-- etc. etc. -->

    <body>
      <section> <!-- two or more <articles> within this section, both using <h1> tags -->
        <h1>Here is a section with articles in</h1>
        <article>
          <h1>Heading</h1>
          <h2>sub heading</h2>
          <p>A paragraph>
        </article>
        <article>
          <h1>Heading</h1>
          <h2>sub heading</h2>
          <p>A paragraph</p>
        </article>
        ...      
      </section>
      <section> <!-- two or more <articles> within this additional section, both using <h1> tags -->
        <h1>Here is a section with articles in</h1>
        <article>
          <h1>Heading</h1>
          <h2>sub heading</h2>
          <p>A paragraph>
        </article>
        <article>
          <h1>Heading</h1>
          <h2>sub heading</h2>
          <p>A paragraph</p>
        </article>
        ...      
      </section>                  
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T13:00:24.260

由于 s 中的每对`h1`和`h2`元素`article`分别代表一个标题和一个子标题，因此您需要在 中将这对组合成自己`header`的`article`，以便为每篇文章生成适当的文档大纲。

除此之外，您的部分的标题结构似乎很好。

# java - @RequestMapping 在渲染方法中有 2 个参数

> ID：12640265
> 
> 赞同：1
> 
> 时间：2012-09-28T12:44:05.503
> 
> 标签：java, spring, spring-mvc, annotations

我正在尝试在同一个控制器中管理 2 个操作，一切正常！唯一的事情是 doRender 方法。我正在尝试对这两个操作使用相同的渲染方法，如下所示：

```
private static final String ACTION_ALTA_TIPO_FACTURA = "action=" + ServletContextKeys.SC_ALTA_TIPO_FACTURA;
private static final String ACTION_BAJA_TIPO_FACTURA = "action=" + ServletContextKeys.SC_BAJA_TIPO_FACTURA;

@RequestMapping(params = {ACTION_BAJA_TIPO_FACTURA,ACTION_ALTA_TIPO_FACTURA})
public final String doRender(@ModelAttribute(value = "Factura") Factura justfactura, Errors errors, RenderRequest renderrequest) {
        ...
} 
```

但显然这不起作用。这是服务器日志所说的：

```
[#|2012-09-28T11:54:05.723+0000|SEVERE|sun-appserver2.1|debug.com.sun.portal.portletcontainer.impl|_ThreadID=21;_ThreadName=httpSSLWorkerThread-8080-0;sifo3economicoweb|SifoIIIweb|SifoIIIweb_WAR_sifo3economicoweb_INSTANCE_fu7M;org.springframework.web.portlet.NoHandlerFoundException: No matching handler method found for portlet request: mode 'view', phase 'RENDER_PHASE', parameters map['action' -> array<String>['altaFactura'], 'altaFactura_tabs' -> array<String>['factura']];_RequestID=7ffe667a-23c0-4599-b1f6-0a53d11a5cb7;|PSPL_PCCSPCPCI0001 : Exception thrown from EntityID: sifo3economicoweb|SifoIIIweb|SifoIIIweb_WAR_sifo3economicoweb_INSTANCE_fu7M, cause: org.springframework.web.portlet.NoHandlerFoundException: No matching handler method found for portlet request: mode 'view', phase 'RENDER_PHASE', parameters map['action' -> array<String>['altaFactura'], 'altaFactura_tabs' -> array<String>['factura']]|#] 
```

请问有什么帮助吗？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T11:14:01.303

做到这一点的唯一方法是定义多个方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T14:37:24.590

您可以使用每个方法映射的参数。看我的问题和答案：

*   [@RequestMapping 在不同类中的相同 URL 上使用“params”会导致 JUnit 中使用 SpringJUnit4ClassRunner 出现“IllegalStateException：无法映射处理程序”](https://stackoverflow.com/questions/14561691/requestmapping-with-params-on-same-url-in-different-classes-cause-illegalsta/)
*   [https://stackoverflow.com/a/14563228/173149](https://stackoverflow.com/a/14563228/173149)

**这由org.springframework.web.servlet.mvc.method.annotation.***包中的类归档...

# forms - Zend Framework 2 formInput 或 formElement ID 标签未呈现

> ID：12640270
> 
> 赞同：0
> 
> 时间：2012-09-28T12:44:33.130
> 
> 标签：forms, twitter-bootstrap, zend-framework2, zend-form2

在 Zend 框架 2 中，当我像这样使用视图的**formRow**方法时

```
$this->formRow($form->get('product_name')); 
```

它会生成这样的 HTML

```
<label for="product_name">
    <span>Name</span>
    <input type="text" id="product_name" name="product_name">
</label> 
```

但是如果我使用**formInput**

```
<div class="control-group">
    <?php echo $this->formLabel($form->get('product_name')->setLabelAttributes(array('class'=>'control-label'))); ?>
    <div class="controls">
        <?php echo $this->formInput($form->get('product_name')); ?>
    </div>
</div>

$this->formInput($form->get('product_name')); 
```

我没有拿到身份证

```
<input type="" name="product_name"> 
```

我尝试使用 formElement 获得相同的结果。

**我怎样才能让它只呈现具有所有属性和值的输入？**

这就是我的**Zend Framework 2 视图**的样子（简化）

```
<?php echo $this->form()->openTag($form); ?>    
<div class="control-group">
    <?php echo $this->formLabel($form->get('product_name')->setLabelAttributes(array('class'=>'control-label'))); ?>
    <div class="controls"><?php echo $this->formInput($form->get('product_name')); ?></div>
</div>
<div class="control-group">
    <div class="controls"><?php echo $this->formSubmit($form->get('submit')); ?></div>
</div>

<?php echo $this->form()->closeTag(); ?> 
```

和**Zend Framework 2 表单**

```
<?php
namespace Product\Form;

use Zend\Form\Form;

class ProductForm extends Form
{
    public function __construct($name = null)
    {
        // we want to ignore the name passed
        parent::__construct('product');
        $this->setAttribute('method', 'post');
        $this->setAttribute('class','form-horizontal');

        $this->add(array(
            'name' => 'product_name',
            'attributes' => array(
                'type'  => 'text',
            ),
            'options' => array(
                'label' => 'Name',
            ),
        ));

        $this->add(array(
            'name' => 'submit',
            'attributes' => array(
                'type'  => 'submit',
                'value' => 'Save',
                'id' => 'submitbutton',
                'class'=>'btn btn-success btn-large'
            ),
        ));
    }
}
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-29T09:19:19.063

改变：

```
 $this->add(array(
        'name' => 'product_name',
        'attributes' => array(
            'type'  => 'text',
        ),
        'options' => array(
            'label' => 'Name',
        ),
    )); 
```

到：

```
 $this->add(array(
        'name' => 'product_name',
        'attributes' => array(
            'type'  => 'text',
            'id'    => 'product_name',
        ),
        'options' => array(
            'label' => 'Name',
        ),
    )); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-21T04:16:06.410

其实这段代码：

```
 $this->add(array(
        'type' => 'Zend\Form\Element\Text',
        'name' => 'product_name',
        'attributes' => array(
            'id'    => 'product_name',
            'class' => 'span3',
        ),
        'options' => array(
            'label' => 'Your label',            
        ),
    )); 
```

可以被像 Bootstrap 这样的 css 渲染器正确使用，因为`$this->formRow(...)`表单助手会产生：

```
<label for="product_name">Your label</label><input type="text" name="product_name" class="span3" id="product_name" value=""> 
```

这比原始`formRow`输出更具可读性（没有 id 和类属性）

# linq-to-entities - EF 5.0、PredicateBuilder 和 LinqKit

> ID：12640274
> 
> 赞同：2
> 
> 时间：2012-09-28T12:44:48.863
> 
> 标签：linq-to-entities, entity-framework-5, predicatebuilder, linqkit

开始使用J. **Albahari**先生的 LinqKit，有谁知道发布**EF 5.0是否有一些****警告**或需要注意的事项？

 **EF 5.0 和 L2E 中是否会有任何重大变化意味着使用不同（或不再使用）**PredicateBuilder**类和**AsExpandable()**方法来构建动态查询？

感谢您的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-08-31T23:31:31.673

这是一个老问题，但在搜索中排名很高，因此需要注意：

*   您将在某些时候必须学习使用复杂的 System.Linq.Expressions 命名空间。
*   具有大量参数的复杂 SQL。我希望最新的更改会有所帮助，请参阅自述文件的末尾如何优化查询：[https ://github.com/scottksmith95/LINQKit](https://github.com/scottksmith95/LINQKit)
*   对于 EF6，异步现在位于 LinqKit.EntityFramework 组件中。
*   您将不得不分析您的 SQL 查询：您的动态连接实际上是否可以利用使用数据库的正确索引。**

# python - 在设置条件下退出测试

> ID：12640275
> 
> 赞同：1
> 
> 时间：2012-09-28T12:44:50.470
> 
> 标签：python, unit-testing

我有一组用 unittest 实现的测试，它们是自动运行的。我想最多每小时运行一次，我有一个检查这种情况的方法，并返回 True（如果可以运行它们）或 False（如果应该退出测试）。

如果检查函数返回 False，我如何将它与 unittest 集成，以便 setUpClass 或 setUp 方法退出（并且不会失败）？

PS：我用的是python 2.6，所以不能用[这些](http://docs.python.org/py3k/library/unittest.html#skipping-tests-and-expected-failures)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T13:23:11.770

1.  正如亚历克斯所提到的，您应该只记住最后一次测试运行的日期，然后运行测试或不从部署脚本中运行测试，而不是从单元测试中运行。

2.  如果您需要 python 2.6 上的现代单元测试类，您可以执行“pip install unittest2”。

3.  可以通过你自己的装饰器来做这样的事情，它将每个测试用例包装在函数中，这些函数要么运行它们，要么在某些条件下跳过，但这对你来说不是一个好的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T13:23:58.703

2.6 中的 unittest 不支持跳过测试（该功能已在 2.7 中添加：[http](http://docs.python.org/library/unittest.html?highlight=unittest#skipping-tests-and-expected-failures) ://docs.python.org/library/unittest.html?highlight=unittest#skipping-tests-and-expected-failures ），但你可以使用[unittest2](http://pypi.python.org/pypi/unittest2)，它是 2.7 功能到早期版本的反向移植。

您必须使用`unit2`包装脚本调用测试。

# java - 结合字母顺序和自然顺序（又名。用户理智排序）

> ID：12640280
> 
> 赞同：6
> 
> 时间：2012-09-28T12:45:07.820
> 
> 标签：java, sorting, collation, natural-sort

我认为这很容易找到预制的，但似乎我可以在网上找到的任何解决方案都只能解决部分问题。

我想对用户提供的*文件名*列表（并且文件大多以人员和/或地址命名）进行排序，有时使用不同的语言（主要是德语，这里和那里混合了一些法语和意大利语） ，很少有其他西方语言）。

我们的想法是以（德国）用户通常认为合理的方式呈现此列表。这意味着顺序应该遵循**Locale.GERMAN 的 java.text.Collat​​or**，但同时期望对字符串中的数字进行例外处理，因此“10”在“2”之后。

我在网上找到了进行自然排序的代码，但它依赖于逐个字符的比较（而 Collat​​or 不支持）。我可以用子字符串破解一些东西，但是在比较器内部，我认为在每个比较调用上创建多个子字符串并不是最聪明的主意。

任何想法如何有效地实现这一点（在执行时间和*实现*时间），或者更好的测试和准备使用的实现？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-28T15:29:49.857

这是已接受的答案中的改编代码（基于[The Alphanum Algorithm ）。](http://www.davekoelle.com/alphanum.html)该代码经过优化以减少垃圾创建并处理前导零 (01 < 001 < 2)。它也被泛型化了，现在更加灵活，因为它不再局限于 java.lang.String，而是现在需要 java.lang.CharSequence。玩得开心：

```
import java.text.Collator;
import java.util.Comparator;

/**
 * Comparator for ordering by Collator while treating digits numerically.
 * This provides a "natural" order that humans usually perceive as 'logical'.
 * 
 * It should work reasonably well for western languages (provided you
 * use the proper collator when constructing). For free control over the
 * Collator, use the constructor that takes a Collator as parameter.
 * Configure the Collator using Collator.setDecomposition()/setStrength()
 * to suit your requirements.
 */
public class AlphanumComparator implements Comparator<CharSequence> {

    /**
     * The collator used for comparison of the alpha part
     */
    private final Collator collator;

    /**
     * Create comparator using platform default collator.
     * (equivalent to using Collator.getInstance())
     */
    public AlphanumComparator() {
        this(Collator.getInstance()); 
    }

    /**
     * Create comparator using specified collator
     */
    public AlphanumComparator(final Collator collator) {
        if (collator == null)
            throw new IllegalArgumentException("collator must not be null");
        this.collator = collator;
    }

    /**
     * Ideally this would be generalized to Character.isDigit(), but I have
     * no knowledge about arabic language and other digits, so I treat
     * them as characters...
     */
    private static boolean isDigit(final int character) {
        // code between ASCII '0' and '9'?
        return character >= 48 && character <= 57;
    }

    /**
     * Get subsequence of only characters or only digits, but not mixed
     */
    private static CharSequence getChunk(final CharSequence charSeq, final int start) {
        int index = start;
        final int length = charSeq.length();
        final boolean mode = isDigit(charSeq.charAt(index++));
        while (index < length) {
            if (isDigit(charSeq.charAt(index)) != mode)
                break;
            ++index;
        }
        return charSeq.subSequence(start, index);
    }

    /**
     * Implements Comparator<CharSequence>.compare
     */
    public int compare(final CharSequence charSeq1, final CharSequence charSeq2) {
        final int length1 = charSeq1.length();
        final int length2 = charSeq2.length();
        int index1 = 0;
        int index2 = 0;
        int result = 0;
        while (result == 0 && index1 < length1 && index2 < length2) {
            final CharSequence chunk1 = getChunk(charSeq1, index1);
            index1 += chunk1.length();

            final CharSequence chunk2 = getChunk(charSeq2, index2);
            index2 += chunk2.length();

            if (isDigit(chunk1.charAt(0)) && isDigit(chunk2.charAt(0))) {
                final int clen1 = chunk1.length();
                final int clen2 = chunk2.length();
                // count and skip leading zeros
                int zeros1 = 0;
                while (zeros1 < clen1 && chunk1.charAt(zeros1) == '0')
                    ++zeros1;
                // count and skip leading zeros
                int zeros2 = 0;
                while (zeros2 < clen2 && chunk2.charAt(zeros2) == '0')
                    ++zeros2;
                // the longer run of non-zero digits is greater
                result = (clen1 - zeros1) - (clen2 - zeros2);
                // if the length is the same, the first differing digit decides
                // which one is deemed greater.
                int subi1 = zeros1;
                int subi2 = zeros2;
                while (result == 0 && subi1 < clen1 && subi2 < clen2) {
                    result = chunk1.charAt(subi1++) - chunk2.charAt(subi2++);
                }
                // if still no difference, the longer zeros-prefix is greater
                if (result == 0)
                    result = subi1 - subi2;
            } else {
                // in case we are working with Strings, toString() doesn't create
                // any objects (String.toString() returns the same string itself).
                result = collator.compare(chunk1.toString(), chunk2.toString());
            }
        }
        // if there was no difference at all, let the longer one be the greater one
        if (result == 0)
            result = length1 - length2;
        // limit result to (-1, 0, or 1)
        return Integer.signum(result);
    }

} 
```

编辑 2014-12-01：Konstantin Petrukhnov 在评论中指出的固定版本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T13:59:06.840

如果您使用@millimoose (http://www.davekoelle.com/alphanum.html) 建议的 Comparator，请修改它以通过 Collat​​or

```
public class AlphanumComparator implements Comparator
{
private Collator collator;
public AlphanumComparator(Collator collator) {
    this.collator = collator;
}
.....
    public int compare(Object o1, Object o2)
    {
......
result = thisChunk.compareTo(thatChunk); //should become
collator.compare(thisChuck, thatChuck);
.... 
```

这段代码似乎有问题，例如“01”比“2”大。但这取决于您的偏好，如果这很重要，请修改它以在数字比较之前跳过前导零。

# c++ - C ++将Boost Regex匹配结果转换为其他格式

> ID：12640284
> 
> 赞同：2
> 
> 时间：2012-09-28T12:45:20.463
> 
> 标签：c++, regex, boost-regex

> **可能重复：**
> [如何在 C++ 中将数字转换为字符串，反之亦然](https://stackoverflow.com/questions/5290089/how-to-convert-a-number-to-string-and-vice-versa-in-c)

我应该如何将 boost::regex 匹配结果转换为其他格式，例如带有以下代码的整数？

```
string s = "abc123";
boost::regex expr("(\\s+)(\\d+)");
boost::smatch match;
if(boost::regex_search(s, match, expr)) {
  string text(match[0]);
  // code to convert match[1] to integer
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T22:57:48.440

我确定你想拥有

```
string text(match[1]);
// convert match[2] to integer 
```

相反，`match[0]`与整个匹配的事物一样（此处为 abc123），因此子匹配索引从 1 开始。

至于转换成整数部分，[lexical_cast](http://www.boost.org/doc/libs/1_51_0/doc/html/boost_lexical_cast.html)用起来很方便：

```
string s = "abc123";
boost::regex expr("(\\s+)(\\d+)");
boost::smatch match;
if(boost::regex_search(s, match, expr)) {
  string text(match[1]);
  int num = boost::lexical_cast<int>(match[2]);
} 
```

# silverlight - 如何在silverlight应用程序中限制richtextbox中的文本长度？

> ID：12640286
> 
> 赞同：-1
> 
> 时间：2012-09-28T12:45:23.983
> 
> 标签：silverlight, richtextbox, silverlight-5.0

我正在开发一个silverlight 应用程序，但在richtextbox 中设置文本限制时遇到问题。

我该如何解决我的问题？？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T21:10:51.353

我认为richtextbox 没有文本的最大长度。您必须订阅富文本框的[OnTextInput](http://msdn.microsoft.com/en-us/library/system.windows.controls.richtextbox.ontextinput%28v=vs.95%29.aspx)事件，然后手动检查是否已达到文本限制。如果已达到限制，则将事件 args 的 Handled 属性设置为 true。

# php - .htaccess/php cleanURL's variable number of variables in a variable order

> ID：12640288
> 
> 赞同：2
> 
> 时间：2012-09-28T12:45:32.857
> 
> 标签：php, .htaccess, clean-urls

我在 stackoverflow 上找到了许多关于用可变数量的变量重写 url 的解决方案。但是在这些变量可以以可变顺序出现的情况下找不到任何东西。就我而言，我有一个包含 4 个潜在变量的页面：

```
www.domain.com/page.php?a=var1&b=var2&c=var3&d=var4 
```

我希望我的用户能够通过以下方式访问它：

```
www.domain.com/page/var1/var2/var3/var4 
```

到目前为止，我能够使用 htaccess 做到这一点。但问题是并非所有变量都随时发生。我希望像这样的 Url 是可能的：

```
www.domain.com/page/var1/var2/var4
www.domain.com/page/var1/var4
www.domain.com/page/var1/var3
etc. 
```

我认为这对于 htaccess 是不可能的。但是在这个上使用干净的 URL 的最优雅的解决方案是什么。

希望任何人有任何想法......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T12:53:44.010

我认为你最好的办法是稍微改变你的“漂亮”网址的设计。所以对于网址

```
www.domain.com/page.php?a=var1&b=var2&c=var3&d=var4 
```

你最好有以下

```
www.domain.com/page/a/var1/b/var2/c/var3/d/var4 
```

甚至

```
www.domain.com/page/a=var1/b=var2/c=var3/d=var4 
```

否则您的脚本将如何知道例如`b`并被`c`省略？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T12:52:54.870

一个非常好的、干净的 URL 已经是：

```
www.domain.com/page.php?a=var1&b=var2&c=var3&d=var4 
```

如果您不这么认为（我喜欢这些 URL，它们非常语义化），并且如果您现在需要保留有关哪个参数是什么的信息，您只需要保留名称：

```
www.domain.com/page/a/var1/b/var2/c/var3/d/var4 
```

与.htaccess 完美配合。

# extjs - 如何更改网格中检查列的值

> ID：12640290
> 
> 赞同：-2
> 
> 时间：2012-09-28T12:45:34.567
> 
> 标签：extjs, grid

我得到了带有列的网格：

...

```
 columns: [
        {
        xtype: 'rownumberer'
    }, {
        xtype: 'checkcolumn',
        sortable: false,
        header: 'done',
        dataIndex: 'status',
        flex: 2,
        width: 55,
        callback: function(success, model) {
            this.setRawValue(success); // DOESNT WORK
this.setValue(success); // DOESNT WORK
        },
}
... 
```

我想将复选框状态更改为选中或未选中。函数 setValue() 或 setRawValue() 对复选框无效 - 此外 - 小部件不可用。

extjs中是否有像setChecked（boolean）这样的简单函数用于checkcolumn？

我有实例'checkcolumn'但我找不到基本功能，这很荒谬。

我会很高兴任何提示。谢谢你。

虚假

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T03:32:59.470

使用“fieldName”检查列写入网格存储中的记录

```
record.set('fieldName',false) 
```

或者

```
record.set('fieldName',true) 
```

它使字段被选中/取消选中

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T12:48:41.687

最简单的方法是在商店中进行，您可以在商店中添加一个新的布尔字段，默认值为true，然后只需在商店中更改该布尔值，网格将随着更改而反映

# c++ - C++ 对 std::bitset 的位进行操作

> ID：12640294
> 
> 赞同：1
> 
> 时间：2012-09-28T12:45:49.463
> 
> 标签：c++, bytearray, bit-manipulation

我想将 4 个 4 位的 std::bitset<16> 相互与。我是说：

```
std::bitset<16> arr("1100 1100 1100 1100"); 
```

我想 AND 这些 4 位数组。

```
std::bitset<4> a; 
```

a= 1100 & 1100 & 1100 & 1100

我想以最有效的方式做到这一点。不使用 for 循环。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T12:52:52.783

切片位集没有捷径。只需按照自己的方式进行操作

```
a[0] = arr[0] & arr[4] & arr[8] & arr[12]; 
```

等等

计算机检查 16 位不会花费很长时间，但是您可以这样做！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T12:58:54.397

只要您知道目标和源有多少位，您就可以做到这一点。

```
std::bitset<16> arr("1100110011001100");
std::bitset<4> v (
    ((arr    ) & 
     (arr>>4 ) & 
     (arr>>8 ) & 
     (arr>>12)).to_ulong() 
     &   0x0f
); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T13:04:25.897

一种可能的解决方案是：

```
unsigned long i = arr.to_ulong();
i = (i & (i >> 4) & (i >> 8) & (i >> 12)) & 0xf;
a = std::bitset<4>(i); 
```

# c# - 使用 Sha256 或 Rfc2898DeriveBytes 创建 IC

> ID：12640296
> 
> 赞同：0
> 
> 时间：2012-09-28T12:45:55.813
> 
> 标签：c#, encryption, sha256

基于此：[http ://www.superstarcoders.com/blogs/posts/symmetric-encryption-in-c-sharp.aspx](http://www.superstarcoders.com/blogs/posts/symmetric-encryption-in-c-sharp.aspx)

我已经编写了字节数组的加密/解密：

```
public static byte[] EncryptFile(string password, byte[] bytes, string salt)
    {
        using (RijndaelManaged aesEncryption = new RijndaelManaged())
        {
            DeriveBytes rgb = new Rfc2898DeriveBytes(password, Encoding.Unicode.GetBytes(salt));
            byte[] rgbKey = rgb.GetBytes(aesEncryption.KeySize >> 3);
            byte[] rgbIV = rgb.GetBytes(aesEncryption.BlockSize >> 3);
            aesEncryption.KeySize = 256;
            aesEncryption.Mode = CipherMode.CBC;
            aesEncryption.Padding = PaddingMode.PKCS7;
            aesEncryption.IV = rgbIV;
            aesEncryption.Key = rgbKey;
            using (ICryptoTransform crypto = aesEncryption.CreateEncryptor())
            {
                return crypto.TransformFinalBlock(bytes, 0, bytes.Length);
            }
        }
    }

    public static byte[] DecryptFile(string password, byte[] bytes, string salt)
    {
        using (RijndaelManaged aesEncryption = new RijndaelManaged())
        {
            DeriveBytes rgb = new Rfc2898DeriveBytes(password, Encoding.Unicode.GetBytes(salt));
            byte[] rgbKey = rgb.GetBytes(aesEncryption.KeySize >> 3);
            byte[] rgbIV = rgb.GetBytes(aesEncryption.BlockSize >> 3);
            aesEncryption.KeySize = 256;
            aesEncryption.Mode = CipherMode.CBC;
            aesEncryption.Padding = PaddingMode.PKCS7;
            aesEncryption.IV = rgbIV;
            aesEncryption.Key = rgbKey;
            using (ICryptoTransform crypto = aesEncryption.CreateDecryptor())
            {
                return crypto.TransformFinalBlock(bytes, 0, bytes.Length);
            }
        }
    } 
```

但是在计算 IV 和密钥时，我应该使用 SHA256 而不是 SHA256`Rfc2898DeriveBytes`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T12:51:28.600

不，您不应该使用 SHA256，SHA256 是一种散列函数，`Rfc2898DeriveBytes`用于实现基于密码的密钥派生功能。

哈希函数可用于验证数据，其中`Rfc2898DeriveBytes`专门用于生成密钥。

通过 msdn [Rfc2898DeriveBytes](http://msdn.microsoft.com/en-us/library/system.security.cryptography.rfc2898derivebytes.aspx)和[SHA256](http://msdn.microsoft.com/en-us/library/system.security.cryptography.sha256.aspx)

# android - Android - Unity3D：setVisibility(View.VISIBLE) 崩溃

> ID：12640302
> 
> 赞同：1
> 
> 时间：2012-09-28T12:46:13.203
> 
> 标签：android, unity3d

我有一个统一项目，我使用 Android (java) 插件来获取相机数据。我在 TextureView 上画了这个。当我统一按下按钮时，我想隐藏/显示此视图。但是当我设置可见性时我的应用程序崩溃了

创建

```
UnityPlayer.currentActivity.addContentView(texView, new FrameLayout.LayoutParams(400, 400)); 
```

爪哇：

```
public void HideVideo()
{
    //Hide view
    _TextureView.setVisibility(View.INVISIBLE);
} 
```

我需要调用一个额外的函数，还是我只能在某些时候调用它？

这些都不起作用，它们都使我的应用程序崩溃。

```
 _TextureView.setVisibility(View.INVISIBLE);
    _TextureView.setActivated(false);
    _TextureView.setAlpha(0);
    _TextureView.setTranslationY(-1000); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T09:51:55.117

我已经解决了，现在我设置了一个布尔值，并在 onSurfaceTextureUpdated 回调中设置了 alpha。

```
public void onSurfaceTextureUpdated(SurfaceTexture surface)
{
    //Visibility changed
    if(_isVisibleChanged == true)
    {
        //Show video
        if(_isVisible)
            _TextureView.setAlpha(1);

        //Hide video
        else
            _TextureView.setAlpha(0);

        //Visibility updated
        _isVisibleChanged = false;
    }
} 
```

但是仍然不明白为什么不在此函数内时它会崩溃。有人对此有答案吗？

# bash - 在 FIND 命令中使用 CAT

> ID：12640309
> 
> 赞同：0
> 
> 时间：2012-09-28T12:46:26.157
> 
> 标签：bash

> **可能重复：**
> [bash：find -exec 和文件名](https://stackoverflow.com/questions/5810296/bash-find-exec-and-filenames)

我正在使用 find 命令查找一系列同名文件。然后，我想将文本文件的内容附加到我的 find 命令所在的每个文件的底部。我认为这很简单，但我似乎无法让它正常工作。这是我的命令：

```
find . -type f -name 'my_file.php' -exec cat new_include.txt >> {} \; 
```

当我使用 sudo 运行它时，我得到一个权限被拒绝的错误：

```
-bash: {}: Permission denied 
```

如果我 su 进入服务器并以 root 身份运行它，我不会收到错误消息，但实际上没有任何文件更新。我在这里错过了什么吗？（这是在 CentOS 6 服务器上完成的，如果有区别的话。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T13:07:06.427

我无法使用单个 find 命令完成此操作，但按顺序执行此操作：

```
for myFile in `find . -type f -name 'my_file.php' -print`
do 
    cat new_include.txt > ${myFile}
done 
```

# objective-c - UITableView 不会重新加载内容

> ID：12640312
> 
> 赞同：3
> 
> 时间：2012-09-28T12:46:29.363
> 
> 标签：objective-c, uitableview, uiviewcontroller

我在 a`UITableView`中嵌入了一个`UIViewController`，但遇到了一些问题。我已将表视图的委托设置为视图控制器。

1）数据源是一个从互联网上检索的数组。问题是当数据被下载并放入数组`[self.tipTableView reloadData]`并被调用时，它不会更新表。我可以看到它`numberOfRowsInSection:`被调用并且它返回正确的数字（不是 0）但它没有调用`cellForRowAtIndexPath:`. 但是，当数组中有数据时`viewDidLoad`，它会正确加载它。

2）我想让表格默认隐藏，然后在按下按钮时可见。将表格设置为隐藏`viewDidLoad`效果很好，但是当我尝试在按下按钮时将其设置为可见时它不起作用。我正在`self.tipTableView.hidden = NO;`为此努力，这似乎只适用于`viewDidLoad`其他方法。

表视图是在界面生成器中创建的，它连接到视图控制器，如下图所示：

![在此处输入图像描述](../Images/9e6bf62915e66d5f8f071e4e093405b7.png)

有谁知道为什么会发生这些问题？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T08:01:43.690

据我所知，对于当前在屏幕上可见的单元格调用了**cellForRowAtIndexPath方法。**我想当你重新加载你的表时它仍然是不可见的。所以也许你应该先尝试设置隐藏 NO，然后如果有数据要显示，然后立即重新加载数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T13:16:08.460

**1：**

您必须在日期源中至少实现以下方法：

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    return [yourarray count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
// that's up to you
} 
```

我想你忘了实现**numberoOfRowsInSection**。

**2：**

尝试：

```
[self.tableView setHidden:NO]; 
```

这应该可以工作，前提是您在显示后没有循环（ while (condition) do_something; ）。

如果您在主线程中从网络下载内容，也会出现这种情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T23:40:03.257

在我看来，您似乎没有连接正确启动操作的按钮，因为您说如果您从 viewDidLoad 方法运行它可以工作，但是当您将操作连接到按钮时它不起作用。

您是否在 IB 中正确连接按钮？

你是把它当作一个动作还是一个出口？

...或者您只是以编程方式创建按钮？

# android - 进一步理解 setRetainInstance(true)

> ID：12640316
> 
> 赞同：111
> 
> 时间：2012-09-28T12:46:46.773
> 
> 标签：android, android-fragments, android-activity, rotation

当你调用a时究竟会发生*什么*？文档几乎不存在，这似乎是一个非常重要的功能。具体来说，我想知道这个序列（我编造的）有多少是真的：`setRetainInstance(true)``Fragment`

> 1.  用户旋转设备。
> 2.  片段与 分离`Activity`并被`Fragment.onDetach()`调用。
> 3.  活动被破坏；`Activity.onDestroy()`叫做。
> 4.  java 对象被删除（如果`Activity`可能，由 GC）。
> 5.  创建了一个新的`Activity`java 对象；它的构造函数，并被`onCreate()`调用。
> 6.  在`Activity.onCreate()`我们要么`setContentView(...)`设置包含片段的布局，要么我们使用`FragmentTransaction` 添加片段。
> 7.  我真的不确定这一点，但我认为 android 足够聪明，可以找到旧片段，并调用`Fragment.onAttach()`将其重新附加到新片段`Activity`
> 8.  下一个（或之前？谁知道？）`Activity.onResume()`被调用。

那是正确的吗？即使我`FragmentTransaction.add(new MyFragment(), ...)`第一次明确使用，Android 是否足够聪明以找到旧片段？如果是这样，我该如何避免在其中添加*另一个*片段`onCreate()`？我需要做这样的事情吗？：

```
 if (getSupportFragmentManager().findFragmentByTag("foo") == null)
    {
        FragmentTransaction ft = getSupportFragmentManager().beginTransaction();
        ft.add(new FooFragment(), "foo").commit();
    } 
```

* * *

## 回答 #1

> 赞同：95
> 
> 时间：2012-09-28T14:44:59.780

好吧，也许我对 Android 文档有点太苛刻了，因为它确实有一些有用的信息，但遗憾的是没有一个链接来自`setRetainInstance()`. 从[关于片段的页面](http://developer.android.com/guide/components/fragments.html)

> 注意：每个片段都需要一个唯一标识符，如果活动重新启动，系统可以使用该标识符来恢复片段（并且您可以使用它来捕获片段以执行事务，例如删除它）。可以通过三种方式为片段提供 ID：
> 
> *   为 android:id 属性提供唯一 ID。
> *   为 android:tag 属性提供一个唯一的字符串。
> *   如果前两个都不提供，系统将使用容器视图的 ID。

这强烈暗示如果您`setContentView(R.layout.whatever)`在其中进行操作`Activity.onCreated()`并且该布局包含带有 的片段`setRetainInstance(true)`，那么当重新创建活动时，将使用其 id 或标签再次搜索它。

其次，对于无 UI 片段，它指出

> 要添加没有 UI 的片段，请使用 add(Fragment, String) 从活动中添加片段（为片段提供唯一的字符串“标签”，而不是视图 ID）。这会添加片段，但是，因为它没有与活动布局中的视图关联，所以它不会收到对 onCreateView() 的调用。所以你不需要实现那个方法。

文档链接到一个非常好的示例 -`FragmentRetainInstance.java`为了您的方便，我在下面复制了该示例。它完全符合我推测的问题（`if (...findFragmentByTag() == null) { ...`）中的答案。

最后，我创建了自己的测试活动，以查看究竟调用了哪些函数。当您从纵向开始并旋转到横向时，它会输出此信息。代码如下。

（这被编辑了一点，以使其更易于阅读。）

```
TestActivity@415a4a30: this()
TestActivity@415a4a30: onCreate()
TestActivity@415a4a30: Existing fragment not found.
TestFragment{41583008}: this() TestFragment{41583008}
TestFragment{41583008}: onAttach(TestActivity@415a4a30)
TestFragment{41583008}: onCreate()
TestFragment{41583008}: onCreateView()
TestFragment{41583008}: onActivityCreated()
TestActivity@415a4a30: onStart()
TestFragment{41583008}: onStart()
TestActivity@415a4a30: onResume()
TestFragment{41583008}: onResume()

<rotate device>

TestFragment{41583008}: onPause()
TestActivity@415a4a30: onPause()
TestFragment{41583008}: onStop()
TestActivity@415a4a30: onStop()
TestFragment{41583008}: onDestroyView()
TestFragment{41583008}: onDetach()
TestActivity@415a4a30: onDestroy()
TestActivity@415a3380: this()
TestFragment{41583008}: onAttach(TestActivity@415a3380)
TestActivity@415a3380: onCreate()
TestActivity@415a3380: Existing fragment found.
TestFragment{41583008}: onCreateView()
TestFragment{41583008}: onActivityCreated()
TestActivity@415a3380: onStart()
TestFragment{41583008}: onStart()
TestActivity@415a3380: onResume()
TestFragment{41583008}: onResume() 
```

**请注意，Android 文档是错误的：无 UI 片段*确实*收到了对的调用，`onCreateView()`但它可以自由地返回`null`。**

# `TestActivity`/的源代码`TestFragment`

```
import android.app.Activity;
import android.app.Fragment;
import android.app.FragmentTransaction;
import android.os.Bundle;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.TextView;

import com.concentriclivers.ss.R;

// An activity for understanding Android lifecycle events.
public class TestActivity extends Activity
{
    private static final String TAG = TestActivity.class.getSimpleName();

    public TestActivity()
    {
        super();
        Log.d(TAG, this + ": this()");
    }

    protected void finalize() throws Throwable
    {
        super.finalize();
        Log.d(TAG, this + ": finalize()");
    }

    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        Log.d(TAG, this + ": onCreate()");

        TextView tv = new TextView(this);
        tv.setText("Hello world");
        setContentView(tv);

        if (getFragmentManager().findFragmentByTag("test_fragment") == null)
        {
            Log.d(TAG, this + ": Existing fragment not found.");
            FragmentTransaction ft = getFragmentManager().beginTransaction();
            ft.add(new TestFragment(), "test_fragment").commit();
        }
        else
        {
            Log.d(TAG, this + ": Existing fragment found.");
        }
    }

    @Override
    public void onStart()
    {
        super.onStart();
        Log.d(TAG, this + ": onStart()");
    }

    @Override
    public void onResume()
    {
        super.onResume();
        Log.d(TAG, this + ": onResume()");
    }

    @Override
    public void onPause()
    {
        super.onPause();
        Log.d(TAG, this + ": onPause()");
    }

    @Override
    public void onStop()
    {
        super.onStop();
        Log.d(TAG, this + ": onStop()");
    }

    @Override
    public void onDestroy()
    {
        super.onDestroy();
        Log.d(TAG, this + ": onDestroy()");
    }

    public static class TestFragment extends Fragment
    {
        private static final String TAG = TestFragment.class.getSimpleName();

        public TestFragment()
        {
            super();
            Log.d(TAG,  this + ": this() " + this);
        }

        @Override
        public void onCreate(Bundle savedInstanceState)
        {
            super.onCreate(savedInstanceState);
            Log.d(TAG, this + ": onCreate()");
            setRetainInstance(true);
        }

        @Override
        public void onAttach(final Activity activity)
        {
            super.onAttach(activity);
            Log.d(TAG, this + ": onAttach(" + activity + ")");
        }

        @Override
        public void onActivityCreated(Bundle savedInstanceState)
        {
            super.onActivityCreated(savedInstanceState);
            Log.d(TAG, this + ": onActivityCreated()");
        }

        @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState)
        {
            Log.d(TAG, this + ": onCreateView()");
            return null;
        }

        @Override
        public void onViewCreated(View view, Bundle savedInstanceState)
        {
            super.onViewCreated(view, savedInstanceState);
            Log.d(TAG, this + ": onViewCreated()");
        }

        @Override
        public void onDestroyView()
        {
            super.onDestroyView();
            Log.d(TAG, this + ": onDestroyView()");
        }

        @Override
        public void onDetach()
        {
            super.onDetach();
            Log.d(TAG, this + ": onDetach()");
        }

        @Override
        public void onStart()
        {
            super.onStart();
            Log.d(TAG, this + ": onStart()");
        }

        @Override
        public void onResume()
        {
            super.onResume();
            Log.d(TAG, this + ": onResume()");
        }

        @Override
        public void onPause()
        {
            super.onPause();
            Log.d(TAG, this + ": onPause()");
        }

        @Override
        public void onStop()
        {
            super.onStop();
            Log.d(TAG, this + ": onStop()");
        }

        @Override
        public void onDestroy()
        {
            super.onDestroy();
            Log.d(TAG, this + ": onDestroy()");
        }
    }

} 
```

# `FragmentRetainInstance.java`（从 API 16 开始）的源代码：

```
/*
 * Copyright (C) 2010 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

package com.example.android.apis.app;

import com.example.android.apis.R;

import android.app.Activity;
import android.app.Fragment;
import android.app.FragmentManager;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.ProgressBar;

/**
 * This example shows how you can use a Fragment to easily propagate state
 * (such as threads) across activity instances when an activity needs to be
 * restarted due to, for example, a configuration change.  This is a lot
 * easier than using the raw Activity.onRetainNonConfiguratinInstance() API.
 */
public class FragmentRetainInstance extends Activity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        // First time init, create the UI.
        if (savedInstanceState == null) {
            getFragmentManager().beginTransaction().add(android.R.id.content,
                    new UiFragment()).commit();
        }
    }

    /**
     * This is a fragment showing UI that will be updated from work done
     * in the retained fragment.
     */
    public static class UiFragment extends Fragment {
        RetainedFragment mWorkFragment;

        @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container,
                Bundle savedInstanceState) {
            View v = inflater.inflate(R.layout.fragment_retain_instance, container, false);

            // Watch for button clicks.
            Button button = (Button)v.findViewById(R.id.restart);
            button.setOnClickListener(new OnClickListener() {
                public void onClick(View v) {
                    mWorkFragment.restart();
                }
            });

            return v;
        }

        @Override
        public void onActivityCreated(Bundle savedInstanceState) {
            super.onActivityCreated(savedInstanceState);

            FragmentManager fm = getFragmentManager();

            // Check to see if we have retained the worker fragment.
            mWorkFragment = (RetainedFragment)fm.findFragmentByTag("work");

            // If not retained (or first time running), we need to create it.
            if (mWorkFragment == null) {
                mWorkFragment = new RetainedFragment();
                // Tell it who it is working with.
                mWorkFragment.setTargetFragment(this, 0);
                fm.beginTransaction().add(mWorkFragment, "work").commit();
            }
        }

    }

    /**
     * This is the Fragment implementation that will be retained across
     * activity instances.  It represents some ongoing work, here a thread
     * we have that sits around incrementing a progress indicator.
     */
    public static class RetainedFragment extends Fragment {
        ProgressBar mProgressBar;
        int mPosition;
        boolean mReady = false;
        boolean mQuiting = false;

        /**
         * This is the thread that will do our work.  It sits in a loop running
         * the progress up until it has reached the top, then stops and waits.
         */
        final Thread mThread = new Thread() {
            @Override
            public void run() {
                // We'll figure the real value out later.
                int max = 10000;

                // This thread runs almost forever.
                while (true) {

                    // Update our shared state with the UI.
                    synchronized (this) {
                        // Our thread is stopped if the UI is not ready
                        // or it has completed its work.
                        while (!mReady || mPosition >= max) {
                            if (mQuiting) {
                                return;
                            }
                            try {
                                wait();
                            } catch (InterruptedException e) {
                            }
                        }

                        // Now update the progress.  Note it is important that
                        // we touch the progress bar with the lock held, so it
                        // doesn't disappear on us.
                        mPosition++;
                        max = mProgressBar.getMax();
                        mProgressBar.setProgress(mPosition);
                    }

                    // Normally we would be doing some work, but put a kludge
                    // here to pretend like we are.
                    synchronized (this) {
                        try {
                            wait(50);
                        } catch (InterruptedException e) {
                        }
                    }
                }
            }
        };

        /**
         * Fragment initialization.  We way we want to be retained and
         * start our thread.
         */
        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);

            // Tell the framework to try to keep this fragment around
            // during a configuration change.
            setRetainInstance(true);

            // Start up the worker thread.
            mThread.start();
        }

        /**
         * This is called when the Fragment's Activity is ready to go, after
         * its content view has been installed; it is called both after
         * the initial fragment creation and after the fragment is re-attached
         * to a new activity.
         */
        @Override
        public void onActivityCreated(Bundle savedInstanceState) {
            super.onActivityCreated(savedInstanceState);

            // Retrieve the progress bar from the target's view hierarchy.
            mProgressBar = (ProgressBar)getTargetFragment().getView().findViewById(
                    R.id.progress_horizontal);

            // We are ready for our thread to go.
            synchronized (mThread) {
                mReady = true;
                mThread.notify();
            }
        }

        /**
         * This is called when the fragment is going away.  It is NOT called
         * when the fragment is being propagated between activity instances.
         */
        @Override
        public void onDestroy() {
            // Make the thread go away.
            synchronized (mThread) {
                mReady = false;
                mQuiting = true;
                mThread.notify();
            }

            super.onDestroy();
        }

        /**
         * This is called right before the fragment is detached from its
         * current activity instance.
         */
        @Override
        public void onDetach() {
            // This fragment is being detached from its activity.  We need
            // to make sure its thread is not going to touch any activity
            // state after returning from this function.
            synchronized (mThread) {
                mProgressBar = null;
                mReady = false;
                mThread.notify();
            }

            super.onDetach();
        }

        /**
         * API for our UI to restart the progress thread.
         */
        public void restart() {
            synchronized (mThread) {
                mPosition = 0;
                mThread.notify();
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2012-09-28T14:05:02.290

`setRetainInstance()`in `Fragment`class 是`onRetainCustomNonConfigurationInstance()`of `Activity`class 的巧妙替代品，等等。

[文档中](http://developer.android.com/reference/android/app/Activity.html#onRetainNonConfigurationInstance%28%29)明确说明。

以下是发生情况的日志（按需添加 UI 片段，然后更改配置）：

**默认`setRetainInstance(false)`**

```
09-29 13:23:04.771: DEBUG/szipinf(4790): Initializing inflate state
09-29 13:23:04.801: INFO/TESTING - MYACTIVITY(4790): Instantiated - com.example.MyActivity@405196b0
09-29 13:23:04.851: DEBUG/dalvikvm(4790): GC_EXTERNAL_ALLOC freed 49K, 51% free 2686K/5379K, external 0K/0K, paused 45ms
09-29 13:23:04.881: INFO/TESTING - MYACTIVITY(4790): onCreate - com.example.MyActivity@405196b0
09-29 13:23:04.881: INFO/TESTING - MYACTIVITY(4790): onStart - com.example.MyActivity@405196b0
09-29 13:23:04.881: INFO/TESTING - MYACTIVITY(4790): onResume - com.example.MyActivity@405196b0
09-29 13:23:04.891: INFO/TESTING - MYACTIVITY(4790): onAttachedToWindow - com.example.MyActivity@405196b0
09-29 13:23:10.381: DEBUG/dalvikvm(4457): GC_EXPLICIT freed 8K, 51% free 2681K/5379K, external 0K/0K, paused 38ms
09-29 13:23:11.901: INFO/TESTING - MYFRAGMENT(4790): Instantiated - MyFragment{40530610}
09-29 13:23:11.911: INFO/TESTING - MYFRAGMENT(4790): onAttach - MyFragment{40530610 #0 MyFragment}
09-29 13:23:11.911: INFO/TESTING - MYACTIVITY(4790): onAttachFragment - com.example.MyActivity@405196b0
09-29 13:23:11.911: INFO/TESTING - MYFRAGMENT(4790): onCreate - MyFragment{40530610 #0 MyFragment}
09-29 13:23:11.911: INFO/TESTING - MYFRAGMENT(4790): onCreateView - MyFragment{40530610 #0 MyFragment}
09-29 13:23:11.921: INFO/TESTING - MYFRAGMENT(4790): onViewCreated - MyFragment{40530610 #0 MyFragment}
09-29 13:23:11.921: INFO/TESTING - MYFRAGMENT(4790): onActivityCreated - MyFragment{40530610 #0 MyFragment}
09-29 13:23:11.931: INFO/TESTING - MYFRAGMENT(4790): onStart - MyFragment{40530610 #0 MyFragment}
09-29 13:23:11.931: INFO/TESTING - MYFRAGMENT(4790): onResume - MyFragment{40530610 #0 MyFragment}
09-29 13:23:15.081: INFO/ActivityManager(1268): Config changed: { scale=1.0 imsi=404/45 loc=en_US touch=3 keys=1/1/2 nav=1/1 orien=2 layout=34 uiMode=17 seq=105 themeResource=null}
09-29 13:23:15.111: INFO/TESTING - MYACTIVITY(4790): onSaveInstanceState - com.example.MyActivity@405196b0
09-29 13:23:15.111: INFO/TESTING - MYFRAGMENT(4790): onPause - MyFragment{40530610 #0 MyFragment}
09-29 13:23:15.121: INFO/TESTING - MYACTIVITY(4790): onPause - com.example.MyActivity@405196b0
09-29 13:23:15.121: INFO/TESTING - MYFRAGMENT(4790): onStop - MyFragment{40530610 #0 MyFragment}
09-29 13:23:15.121: INFO/TESTING - MYACTIVITY(4790): onStop - com.example.MyActivity@405196b0
09-29 13:23:15.121: INFO/TESTING - MYACTIVITY(4790): onRetainCustomNonConfigurationInstance - com.example.MyActivity@405196b0
09-29 13:23:15.121: INFO/TESTING - MYFRAGMENT(4790): onDestroyView - MyFragment{40530610 #0 MyFragment}
09-29 13:23:15.121: INFO/TESTING - MYFRAGMENT(4790): onDestroy - MyFragment{40530610 #0 MyFragment}
09-29 13:23:15.121: INFO/TESTING - MYFRAGMENT(4790): onDetach - MyFragment{40530610 #0 MyFragment}
09-29 13:23:15.121: INFO/TESTING - MYACTIVITY(4790): onDestroy - com.example.MyActivity@405196b0
09-29 13:23:15.191: INFO/TESTING - MYACTIVITY(4790): onDetachedFromWindow - com.example.MyActivity@405196b0
09-29 13:23:15.201: INFO/TESTING - MYACTIVITY(4790): Instantiated - com.example.MyActivity@4053c438
09-29 13:23:15.201: INFO/TESTING - MYFRAGMENT(4790): Instantiated - MyFragment{4053cde0}
09-29 13:23:15.201: INFO/TESTING - MYFRAGMENT(4790): onAttach - MyFragment{4053cde0 #0 MyFragment}
09-29 13:23:15.201: INFO/TESTING - MYACTIVITY(4790): onAttachFragment - com.example.MyActivity@4053c438
09-29 13:23:15.201: INFO/TESTING - MYFRAGMENT(4790): onCreate - MyFragment{4053cde0 #0 MyFragment}
09-29 13:23:15.251: INFO/TESTING - MYACTIVITY(4790): onCreate - com.example.MyActivity@4053c438
09-29 13:23:15.251: INFO/TESTING - MYFRAGMENT(4790): onCreateView - MyFragment{4053cde0 #0 MyFragment}
09-29 13:23:15.261: INFO/TESTING - MYFRAGMENT(4790): onViewCreated - MyFragment{4053cde0 #0 MyFragment}
09-29 13:23:15.261: INFO/TESTING - MYFRAGMENT(4790): onActivityCreated - MyFragment{4053cde0 #0 MyFragment}
09-29 13:23:15.291: INFO/TESTING - MYFRAGMENT(4790): onStart - MyFragment{4053cde0 #0 MyFragment}
09-29 13:23:15.291: INFO/TESTING - MYACTIVITY(4790): onStart - com.example.MyActivity@4053c438
09-29 13:23:15.291: INFO/TESTING - MYACTIVITY(4790): onResume - com.example.MyActivity@4053c438
09-29 13:23:15.291: INFO/TESTING - MYFRAGMENT(4790): onResume - MyFragment{4053cde0 #0 MyFragment}
09-29 13:23:15.321: INFO/TESTING - MYACTIVITY(4790): onAttachedToWindow - com.example.MyActivity@4053c438 
```

因此，Fragment 被全新地重新创建，并再次显示，一直以来`setRetainInstance(false)`

**现在有了`setRetainInstance(true)`**

```
09-29 13:18:46.121: INFO/ActivityManager(1268): Starting: Intent { flg=0x10100000 cmp=com.example/.MyActivity } from pid 1268
09-29 13:18:46.141: INFO/TESTING - MYACTIVITY(4726): Instantiated - com.example.MyActivity@4056f2e0
09-29 13:18:46.161: INFO/TESTING - MYACTIVITY(4726): onCreate - com.example.MyActivity@4056f2e0
09-29 13:18:46.161: INFO/TESTING - MYACTIVITY(4726): onStart - com.example.MyActivity@4056f2e0
09-29 13:18:46.161: INFO/TESTING - MYACTIVITY(4726): onResume - com.example.MyActivity@4056f2e0
09-29 13:18:46.191: INFO/TESTING - MYACTIVITY(4726): onAttachedToWindow - com.example.MyActivity@4056f2e0
09-29 13:19:10.431: DEBUG/SntpClient(1268): request time failed: java.net.UnknownHostException: europe.pool.ntp.org
09-29 13:19:14.251: INFO/TESTING - MYFRAGMENT(4726): Instantiated - MyFragment{405288c0}
09-29 13:19:14.271: INFO/TESTING - MYFRAGMENT(4726): onAttach - MyFragment{405288c0 #0 MyFragment}
09-29 13:19:14.271: INFO/TESTING - MYACTIVITY(4726): onAttachFragment - com.example.MyActivity@4056f2e0
09-29 13:19:14.271: INFO/TESTING - MYFRAGMENT(4726): onCreate - MyFragment{405288c0 #0 MyFragment}
09-29 13:19:14.281: INFO/TESTING - MYFRAGMENT(4726): onCreateView - MyFragment{405288c0 #0 MyFragment}
09-29 13:19:14.281: INFO/TESTING - MYFRAGMENT(4726): onViewCreated - MyFragment{405288c0 #0 MyFragment}
09-29 13:19:14.281: INFO/TESTING - MYFRAGMENT(4726): onActivityCreated - MyFragment{405288c0 #0 MyFragment}
09-29 13:19:14.291: INFO/TESTING - MYFRAGMENT(4726): onStart - MyFragment{405288c0 #0 MyFragment}
09-29 13:19:14.291: INFO/TESTING - MYFRAGMENT(4726): onResume - MyFragment{405288c0 #0 MyFragment}
09-29 13:19:21.921: INFO/ActivityManager(1268): Config changed: { scale=1.0 imsi=404/45 loc=en_US touch=3 keys=1/1/2 nav=1/1 orien=2 layout=34 uiMode=17 seq=103 themeResource=null}
09-29 13:19:21.961: INFO/TESTING - MYACTIVITY(4726): onSaveInstanceState - com.example.MyActivity@4056f2e0
09-29 13:19:21.961: INFO/TESTING - MYFRAGMENT(4726): onPause - MyFragment{405288c0 #0 MyFragment}
09-29 13:19:21.961: INFO/TESTING - MYACTIVITY(4726): onPause - com.example.MyActivity@4056f2e0
09-29 13:19:21.961: INFO/TESTING - MYFRAGMENT(4726): onStop - MyFragment{405288c0 #0 MyFragment}
09-29 13:19:21.961: INFO/TESTING - MYACTIVITY(4726): onStop - com.example.MyActivity@4056f2e0
09-29 13:19:21.961: INFO/TESTING - MYACTIVITY(4726): onRetainCustomNonConfigurationInstance - com.example.MyActivity@4056f2e0
09-29 13:19:21.961: INFO/TESTING - MYFRAGMENT(4726): onDestroyView - MyFragment{405288c0 #0 MyFragment}
09-29 13:19:21.961: INFO/TESTING - MYFRAGMENT(4726): onDetach - MyFragment{405288c0 #0 MyFragment}
09-29 13:19:21.961: INFO/TESTING - MYACTIVITY(4726): onDestroy - com.example.MyActivity@4056f2e0
09-29 13:19:22.111: INFO/TESTING - MYACTIVITY(4726): onDetachedFromWindow - com.example.MyActivity@4056f2e0
09-29 13:19:22.111: INFO/TESTING - MYACTIVITY(4726): Instantiated - com.example.MyActivity@4054a0e8
09-29 13:19:22.111: INFO/TESTING - MYFRAGMENT(4726): onAttach - MyFragment{405288c0 #0 MyFragment}
09-29 13:19:22.111: INFO/TESTING - MYACTIVITY(4726): onAttachFragment - com.example.MyActivity@4054a0e8
09-29 13:19:22.131: INFO/TESTING - MYACTIVITY(4726): onCreate - com.example.MyActivity@4054a0e8
09-29 13:19:22.131: INFO/TESTING - MYFRAGMENT(4726): onCreateView - MyFragment{405288c0 #0 MyFragment}
09-29 13:19:22.131: INFO/TESTING - MYFRAGMENT(4726): onViewCreated - MyFragment{405288c0 #0 MyFragment}
09-29 13:19:22.131: INFO/TESTING - MYFRAGMENT(4726): onActivityCreated - MyFragment{405288c0 #0 MyFragment}
09-29 13:19:22.141: INFO/TESTING - MYFRAGMENT(4726): onStart - MyFragment{405288c0 #0 MyFragment}
09-29 13:19:22.141: INFO/TESTING - MYACTIVITY(4726): onStart - com.example.MyActivity@4054a0e8
09-29 13:19:22.141: INFO/TESTING - MYACTIVITY(4726): onResume - com.example.MyActivity@4054a0e8
09-29 13:19:22.141: INFO/TESTING - MYFRAGMENT(4726): onResume - MyFragment{405288c0 #0 MyFragment}
09-29 13:19:22.171: INFO/TESTING - MYACTIVITY(4726): onAttachedToWindow - com.example.MyActivity@4054a0e8
09-29 13:19:22.181: INFO/TESTING - MYFRAGMENT(4726): onPause - MyFragment{405288c0 #0 MyFragment}
09-29 13:19:22.181: INFO/TESTING - MYFRAGMENT(4726): onStop - MyFragment{405288c0 #0 MyFragment}
09-29 13:19:22.181: INFO/TESTING - MYFRAGMENT(4726): onDestroyView - MyFragment{405288c0 #0 MyFragment}
09-29 13:19:22.181: INFO/TESTING - MYFRAGMENT(4726): onDestroy - MyFragment{405288c0 #0 MyFragment}
09-29 13:19:22.181: INFO/TESTING - MYFRAGMENT(4726): onDetach - MyFragment{405288c0 #0 MyFragment} 
```

注意到效果了吗？片段实例（对象 405288c0）被保留，这很好。但是保留的实例很可能持有属于先前方向的资源、视图和对象，这可能会导致内存泄漏。

必须进一步注意编写代码以启动此片段的位置：您必须始终检查预先存在的实例。

故事寓意：`setRetainInstance()`最适合用于非视觉片段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-17T10:22:28.303

所以你可以在活动类的 protected void onCreate(Bundle savedInstanceState) 中编码

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    // add code findViewById...etc
    .....
    // add your fragment in code, IT WILL BE NOT CHANGE
    if(savedInstanceState==null){
        FragmentA a_fragment = new FragmentA();
        FragmentTransaction fragmentTransaction = getSupportFragmentManager().beginTransaction();
        fragmentTransaction.replace(R.id.your_layout_id, a_fragment);
        fragmentTransaction.addToBackStack(null);
        fragmentTransaction.commit();
    }

} 
```

代替

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    // add code findViewById...etc
    .....
    // add your fragment and not check savedInstanceState IT WILL BE CHANGE
    FragmentA a_fragment = new FragmentA();
    FragmentTransaction fragmentTransaction = getSupportFragmentManager().beginTransaction();
    fragmentTransaction.replace(R.id.your_layout_id, a_fragment);
    fragmentTransaction.addToBackStack(null);
    fragmentTransaction.commit();

} 
```

记住

```
public View onCreateView(...) {

 // Remember add this line
 setRetainInstance(true);

 return root;
 } 
```

# .htaccess - .htaccess 通配符重定向 301

> ID：12640317
> 
> 赞同：-1
> 
> 时间：2012-09-28T12:46:49.677
> 
> 标签：.htaccess, redirect, wildcard

我必须重定向许多网址

结构是这样的：

旧网址

```
/category/product-18-name.aspx 
```

新网址

```
product18name.php (is merely an example) 
```

我希望做一个正则表达式，如果用户类型`/anyword/product-18-name.aspx`我希望该用户会去`product18name.php`

简而言之，我希望两个第一个斜线中间的单词，例如：`/category/`那可能是一个真正的类别或任何进入正确页面的单词

所以一个用户类型：`/helloworld/product-18-name.apsx`去`product18name.php` 或`/sdjfkskfdns/product-18-name.apsx`去`product18name.php`

现在我的 .htaccess 充满了 301 重定向，比如

```
Redirect 301 /electronic/peacemaker2_a5f89948-9f15-4606-9d5c-051d84a4c070.aspx http://www.site.com/product.php?id_product=23580 
```

有什么帮助吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T19:56:33.950

尝试：

```
RedirectMatch 301 ^/([^/]+)/([^-]+)-([^-]+)-([^.]+)\.aspx$ /$2$3$4.php 
```

当然，您只要求 301 重定向，这就是重定向浏览器的全部功能。如果`product18name.php`实际上不是一个 php 文件，你只会得到一个 404。

# windows-8 - Metro 应用程序中的磁贴上有多个通知？

> ID：12640334
> 
> 赞同：1
> 
> 时间：2012-09-28T12:48:02.863
> 
> 标签：windows-8, microsoft-metro, winjs, badge

我正在使用 Metro 应用程序中的磁贴和徽章。这里可以一次在图块上显示一个图像或数字，但不能同时显示两者。谁能帮我如何在瓷砖上显示图像和一些数字？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T14:58:13.177

![瓦](../Images/a88ee2ea4e7aa678543a5244760dfc6d.png)

正如 MSDN 所说：

> 通知徽章传达有关和特定于您的应用程序的摘要或状态信息。它们可以是数字 (1-99)***或***一组 Windows 提供的字形之一。

[http://msdn.microsoft.com/en-us/library/windows/apps/hh779719.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh779719.aspx)

注意：当您达到这样的限制时，您可能会考虑构建一个自定义图像，其中包含您想要的任何内容。但是你会意识到在 WinRT 中渲染图像是不可能的。所以你会想要卸载到一些网络服务器......只是帮助你思考这个问题。

# java - Java 小程序无法启动

> ID：12640335
> 
> 赞同：0
> 
> 时间：2012-09-28T12:48:06.403
> 
> 标签：java, applet

我在 Eclipse 中有以下结构：

foo.bar.app 作为包，包含 Main.java 和 Applet.java（不确定是否需要 thie ifnormation...）

我可以在 Eclipse 中以 Java(swing) 应用程序或小程序的形式运行该应用程序。现在我正试图将它运行到一个浏览器中（必须只在 FireFox 中工作......）

所以我右键单击项目 -> 导出 -> jar（不是可运行的 jar！），并将其移动到文件夹 /home/user/Desktop/test

文件夹 test 包含以下 index.html：

```
<html> 
<head> 
</head> 
    <body> 
        <p> 
            <embed id = "test"  
            type="application/x-java-applet;version=1.6" 
            width="256" height="256" 
            archive="test.jar" 
            code="foo.bar.app.Applet.class" 
            /> 
        </p> 
</body> 
```

但我得到的只是一个灰色框... 在底部的 FireFox 说 Start: applet not initalized。

这是一个片段

```
public class Applet extends JApplet {

@Override
public void init() {
    super.init();

    // simulate properties file, empty properties should have no influence
    Properties p = new Properties();

    this.setLayout(new BorderLayout());
    this.setSize(1000, 600); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T13:10:44.100

启动小程序可能有错误。尝试打开“Java 控制台”（不是 Java**脚本**控制台）；[Mozilla 知识库告诉您如何](http://kb.mozillazine.org/Java).

您应该能够在控制台中看到堆栈跟踪。

# java - 假设下面是一个类中的方法头：public > tT 最大(T arg1, arg2)

> ID：12640342
> 
> 赞同：1
> 
> 时间：2012-09-28T12:48:35.057
> 
> 标签：java, generics

我的一些 Java 作业遇到了麻烦。我只是无法理解这些泛型的概念。

问题是：

假设以下是类中的方法头：

```
public <T implements Comparable <T>>T greatest(T arg1, T arg2) 
```

找出错误？

我真的不明白怎么走。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T12:53:27.527

要使这些东西编译，您必须按以下方式修改：

```
public <T extends Comparable <T>> T greatest(T arg1, T arg2) 
```

Comparable 是一个接口，但在这种情况下，extends 用于表示“扩展”（用于类）或“实现”（用于接口）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T13:02:00.127

错误是您不能在方法签名中使用关键字实现。仅在类声明中。这两个编译：

```
 public <T extends Comparable<T>>T greatest(T arg1, T arg2){
     return null;
    }

 public <T extends String>T greatest(T arg1, T arg2){
     return null;
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T13:02:09.800

> 我非常需要对此进行解释，因为我真的不明白该怎么走。

假设您希望我们解释签名的含义...

这可以分为两部分：

```
public <T ...> T greatest(T arg1, T arg2) 
```

这意味着这`greatest`是一个方法，它接受两个与某种类型兼容的赋值实例`T`，并返回一个相同类型的实例。（从名称`greatest`可以合理地猜测返回的值是两个参数中的较大者。）

第二部分是这样的（假设语法错误已更正）：

```
<T extends Comparable<T>> 
```

这意味着该类型`T`必须实现`Comparable`接口`T`作为其类型参数。现在，如果您查看 Comparable 的 javadocs，您会发现它只有一个方法：

```
public int compareTo(T other); 
```

它被指定为比较`this`并`other`返回一个小于零、零或大于零的数字，具体取决于`this`（分别）是否小于、等于或大于`other`。（阅读 javadoc！）

所以基本上这就是说`T`必须是一个有`compareTo`方法的类。显而易见的意图是该`greatest`方法将*使用*该`compareTo`方法来确定其 2 个参数中的哪个更大......并返回它。

* * *

至于*解释**语法*，有两种可能的答案：

*   语法规则就是语法规则。您只需服从它们，否则您的程序将无法编译。

*   JLS 设计者此时必须在使用`implements`或`extends`使用通用语法，或使用一些新的关键字或符号之间做出选择：

    *   添加新的关键字或符号对语言/工具链的其他部分影响太大，因此它们被“淘汰”。

    *   允许使用`implements`or`extends`是多余的，可能会导致不必要的混淆。

    *   根据`implements`or`extends`关键字的其他用法，（IMO）没有关于这些选择中哪个更好的令人信服的论据。如果他们基于抛硬币决定，我不会感到惊讶......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T13:00:41.773

纠正错字后，它编译得很好。

当然，您可以使用`Comparable<? super T>`.

我曾经写过一个非常相似的实用方法，你可以在这里找到：

[http://softsmithy.sourceforge.net/lib/current/docs/api/softsmithy-lib-core/org/softsmithy/lib/util/Comparables.html#max%28T,%20T%29](http://softsmithy.sourceforge.net/lib/current/docs/api/softsmithy-lib-core/org/softsmithy/lib/util/Comparables.html#max%28T,%20T%29)

# .net - 如何在 C++/CLI 项目中使用托管库

> ID：12640343
> 
> 赞同：0
> 
> 时间：2012-09-28T12:48:35.510
> 
> 标签：.net, c++-cli, pdf-generation, shared-libraries, static-libraries

我已经[`PDF Clown`](http://www.stefanochizzolini.it/en/projects/clown/index.html#Introduction)为 .NET 下载了。我想在`C++/CLI`项目中使用它。我试图搜索如何配置此库以准备在我的`C++/CLI`项目中使用。实际上，这是我第一次尝试在项目中添加`managed`库。`C++/CLI`我曾经以经典的方式在`C++/CLI`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T12:57:30.003

右键单击项目、属性、通用属性、框架和引用。单击添加新引用按钮。浏览选项卡并选择 DLL。大红箭：

![在此处输入图像描述](../Images/d17e5eaae0f44b8ad235157b17a49175.png)

# android - 从apk文件中提取应用程序图标

> ID：12640359
> 
> 赞同：10
> 
> 时间：2012-09-28T12:49:39.337
> 
> 标签：android, apk, embedded-resource, android-resources

我需要从 apk 文件中提取应用程序图标。我只需要一个图标，我不想提取 apk 中的所有其他内容。这些文件很容易保留，但我如何确定哪个图标文件是正确的应用程序图标。我猜这是存储在资源表中的？所以我想我实际上需要的是读取资源表，我希望从资源表中我可以确定我可以从应用程序中提取的图标文件名称。

我需要一个简单的工具，我知道可以提取整个 apk 文件的 apktool，但这不是我想要的，因为

*   它做了很多我不需要的其他东西（反编译，解压缩其他文件等）

*   运行需要很多时间

我可以使用其他任何工具来获取图标文件路径吗？

感谢所有建议

编辑：澄清一下，我不想在设备上这样做。我正在尝试在 PC 上执行此操作。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-23T16:48:31.137

`aapt`工具随 Android SDK 一起提供，可以在下面找到`platform-tools`您需要的详细信息。[apktool 附带 aapt](https://code.google.com/p/android-apktool/downloads/list)。

`aapt d --values badging payload.apk`

使用此输出，您可以从 apk（这是一个 zip 文件）中提取图标文件。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-23T15:58:34.283

*   将 .apk 文件重命名为 .zip
*   用7zip之类的工具解压
*   在以下位置找到图标为 png 文件： `/res/drawable-hdpi/icon.png`

编辑：请注意，此文件并非存在于所有 apk 文件中，而是存在于大多数文件中。除了提取所有 .png 文件并从列表中选择一个之外，我找不到更好的解决方案。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-02-19T13:35:53.227

```
//if your apk is not installed ..only having .apk on sdcard   
  String APKFilePath = "mnt/sdcard/myapkfile.apk"; //For example...
     PackageManager pm = getPackageManager();
     PackageInfo    pi = pm.getPackageArchiveInfo(APKFilePath, 0);

    // the secret are these two lines....
     pi.applicationInfo.sourceDir       = APKFilePath;
     pi.applicationInfo.publicSourceDir = APKFilePath;
    //

   Drawable APKicon = pi.applicationInfo.loadIcon(pm);
   String   AppName = (String)pi.applicationInfo.loadLabel(pm); 
```

你可以参考这个链接

[获取 apk 图标](https://stackoverflow.com/questions/5661418/get-apk-file-icon-version-name/14313280#14313280)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-09-28T12:59:52.413

据我所知（以及根据维基百科），*APK 文件是 ZIP 文件格式的包*。所以我认为您可以使用任何解压缩工具来解压缩 apk 文件并获取您想要的图标。对于启动器图标，只需打开文件`AndroidManifest.xml`并查看`android:icon`. `<application>`它可能看起来像这样：

`android:icon="@drawable/ic_launcher"`

然后图标文件将是`res/drawable-<dim>/ic_launcher.png`，其中`<dim>`任何一个都`ldpi, mdpi, hdpi, xhdpi`可以代表不同的分辨率。最大的图像将在`xhdpi`或中`hdpi`。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-06-01T17:35:34.463

## 软件

您还可以尝试这些 GUI 工具来轻松提取 Android 应用程序图标：

*   [APK 图标编辑器](https://qwertycube.com/apk-icon-editor/)- 简单直观。
*   [APK Editor Studio](https://qwertycube.com/apk-editor-studio/) – 更高级但仍然易于使用。

## 描述

虽然 Apktool 在后台使用，但 GUI 前端使得提取或更改 APK 图标变得非常简单。

正确的应用程序图标会自动从清单和内部结构中解析出来，因此无需手动搜索所需的资源文件。

[![APK 图标编辑器](../Images/87a2f4aba0535a360ad0098f6b93f3ad.png)](https://i.imgur.com/WXGdlt7.png)

*   这两种工具都可以帮助您通过用户友好的 GUI轻松编辑、替换或**提取图标。**
*   这两种工具都适用于**Windows**、**macOS**和**Linux**。
*   这两个工具都是[开源的](https://github.com/kefir500/apk-editor-studio)（用 C++/Qt 编写）。

## 免责声明

我是这些工具的作者。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-01-28T20:03:23.430

此`bash`函数将提取图标并用 显示`preview`。如果您不在 Mac 上，则可以使用[ImageMagick](http://www.imagemagick.org/)`display`中的命令。

```
preview-android-icon () { unzip -p $1 $(aapt d --values badging $1 | sed -n "/^application: /s/.*icon='\([^']*\).*/\1/p") > /tmp/$$.png && preview /tmp/$$.png; } 
```

像这样使用它：

```
preview-android-icon /path/to/your.apk 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-05-23T14:27:33.330

如果您像我一样是新手，您可以使用 Android 应用程序 Called My APK（[Google Play 链接](https://play.google.com/store/apps/details?id=com.andatsoft.myapk.fwa&rdid=com.andatsoft.myapk.fwa)）在您的 android 手机上提取应用程序图标，或者安装此应用程序，或者您刚刚从[apkMirror](https://www.apkmirror.com/)、[APKpure](https://apkpure.com)、[AppsAraby等外包下载了 apk 文件](https://appsaraby.com/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-09-28T12:54:12.793

apktool 的源代码可用。由于资源提取和代码反编译完全不同，我怀疑修改它以删除代码反编译以将其最小化到您需要的程度会很容易。

至于图标文件名的确定，可以根据 AndroidManifest.xml 的内容来确定，但可能需要根据屏幕密度、方向、语言配置等因素考虑到图标的多个版本。

# php - 如何在没有脚本但使用 $_GET 的情况下强制下载图像？

> ID：12640361
> 
> 赞同：0
> 
> 时间：2012-09-28T12:49:44.697
> 
> 标签：php, download, get, force-download

我已经看到这种方法现在在大约三个网站上使用，包括 Facebook、Dropbox 和微软的 Skydrive。它是这样工作的。假设您想在不下载的情况下查看图像，那么您只需执行此操作。

```
https://fbcdn-sphotos-a.akamaihd.net/hphotos-ak-xxxx/xxx_xxxxxxxxxxxxxxx_xxxxxxxxx_o.jpg 
```

但是如果我想下载它，我会添加**?dl=1**

```
https://fbcdn-sphotos-a.akamaihd.net/hphotos-ak-xxxx/xxx_xxxxxxxxxxxxxxx_xxxxxxxxx_o.jpg?dl=1 
```

很容易对吧？好吧，在服务器端可能并不容易，这就是我的问题所在。如果该 .jpg 文件是 PHP 脚本并且 $_GET 参数指向图像并且另一个参数将指定是否要下载图像，我会知道如何执行此操作。但事实并非如此。

那么，我尝试了哪些方法？没有任何。因为老实说，我不知道这是如何工作的，这对我来说就像魔术一样。也许这是您在 .htaccess 中所做的事情？这对我来说听起来很合理，但经过一段时间的谷歌搜索，我没有找到任何接近我要求的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T12:57:53.620

你有一些选择。

一种选择是使用 PHP 脚本而不是 .jpg 文件。因此，您的 URL 将指向一个 PHP 文件，并且在 PHP 文件中您将执行以下操作：

```
header('Content-Type: image/jpeg');

if ($_GET['dl'] == 1)
    header('Content-Disposition: attachment; filename="downloaded.jpg"');

$file = $_GET["file"];
// do some checking to make sure the user is allowed to get the file specified.
echo file_get_contents($file); 
```

另一种选择是[`mod_rewrite`](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)在您的 .htaccess 文件中使用以检查`?dl=1`，如果找到，则重定向到将下载该文件的 PHP 脚本（与上述相同）。

我敢肯定还有更多选择，但是这两个是我现在唯一想到的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T13:08:56.967

我会将所有图像重定向到一个 PHP 文件，该文件将根据它们的 URI 参数处理它们。

在 .htaccess 我会放：

```
Options +FollowSymLinks +ExecCGI

<IfModule mod_rewrite.c>

RewriteEngine On
RewriteCond %{REQUEST_URI} \.(jpg|png|gif)$
RewriteRule (.*)  images.php [QSA]

</IfModule> 
```

这将使对扩展名为 jpg、png 和 gif 的文件的所有请求重定向到您的 images.php 文件。

在 images.php 文件中，我会搜索 ?dl=1 的存在，然后决定如何提供图像：

```
$requestedImage = $_SERVER['REQUEST_URI']
if (strpos($requestedImage,'?dl=1') !== false) {
    // serve the image as attachment
}else{
    // just print it as usual
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T13:10:29.173

此类 facebook URL 上的显示响应标头：

```
HTTP/1.1 200 OK
Content-Type: image/jpeg
Content-Length: 5684
Last-Modified: Fri, 01 Jan 2010 00:00:00 GMT
X-Backend: hs675.ash3
X-BlockId: 157119
X-Object-Type: PHOTO_PROFILE
Access-Control-Allow-Origin: *
Cache-Control: max-age=1209600
Expires: Fri, 12 Oct 2012 13:07:08 GMT
Date: Fri, 28 Sep 2012 13:07:08 GMT
Connection: keep-alive 
```

以及下载响应标头：

```
HTTP/1.1 200 OK
Content-Type: image/jpeg
Content-Length: 5684
Last-Modified: Fri, 01 Jan 2010 00:00:00 GMT
X-Backend: hs675.ash3
X-BlockId: 157119
X-Object-Type: PHOTO_PROFILE
Content-Disposition: attachment
Access-Control-Allow-Origin: *
Cache-Control: max-age=1209600
Expires: Fri, 12 Oct 2012 13:07:17 GMT
Date: Fri, 28 Sep 2012 13:07:17 GMT
Connection: keep-alive 
```

看看`Content-Disposition: attachment`有什么不同的那条线。

因此，由于您已经从 PHP 脚本提供图像，如果设置了下载参数，请添加：

```
header('Content-Disposition: attachment'); 
```

你应该没事。

# oauth-2.0 - 在我的文档中找不到谷歌融合表

> ID：12640371
> 
> 赞同：2
> 
> 时间：2012-09-28T12:50:26.817
> 
> 标签：oauth-2.0, google-fusion-tables

我刚刚开始使用谷歌融合表 API，所以也许我错过了一些东西......

从一个google的简单例子开始

[https://code.google.com/p/google-api-java-client/source/browse/fusiontables-cmdline-sample/src/main/java/com/google/api/services/samples/fusiontables/cmdline/ FusionTablesSample.java?repo=samples](https://code.google.com/p/google-api-java-client/source/browse/fusiontables-cmdline-sample/src/main/java/com/google/api/services/samples/fusiontables/cmdline/FusionTablesSample.java?repo=samples)

而且我刚刚设法进行了帐户服务器身份验证（我已经使用我的帐户从 Google API 控制台下载了密钥文件）。该示例有效，创建并列出了新表，但我在文档中找不到它们。这些表在哪里，我如何访问它们？

M@rco

这是我的代码：

```
private static Credential authorize() throws Exception {
    GoogleCredential credential = new GoogleCredential.Builder()
        .setTransport(HTTP_TRANSPORT)
        .setJsonFactory(JSON_FACTORY)
        .setServiceAccountId("xxxxxx")
        .setServiceAccountPrivateKeyFromP12File(new File(FusionTablesSample.class.getResource("/privatekey.p12").toURI()))
        .setServiceAccountScopes(FusiontablesScopes.FUSIONTABLES)
        .build();
    return credential;
}
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T22:34:26.310

如果我正确理解了您的问题，那么您创建了一个服务帐户并下载了该帐户的密钥文件。然后，您使用了这个文件和服务帐户的 ID（类似于**123456789-fg8dhs8d7sjhsd7asdh76d6dui@developer.gserviceaccount.com**）。正确的？

如果是这种情况，那很简单：*该表属于**服务帐户**而不是您自己的帐户*。您有多种方式可以通过 Web UI 访问表格。最简单的方法可能是与您自己的 Google 帐户共享表格，以便在您的文档列表中查看它。

使用[Google Drive API](https://developers.google.com/drive/v2/reference/permissions#resource)更改 Fusion Table 的权限（[参见示例](https://developers.google.com/drive/v2/reference/permissions/insert#examples)）。

# iphone - 在 ios 应用程序中存储 .png 图像？

> ID：12640374
> 
> 赞同：0
> 
> 时间：2012-09-28T12:50:39.227
> 
> 标签：iphone, ios

我正在创建一个将使用超过 1200 个 .png 图像文件的 iphone 游戏，所有图像组合在一起的大小为 11mb，我想知道存储它们的最佳方式是什么，我打算使用 amazon 的 s3 存储，但我希望它们与资源文件夹中的应用程序分开，这样用户也可以离线玩。因此，我想就在缓存和优化与 IOS 应用程序一起使用的 .png 文件方面存储图像的最佳方式获得任何意见。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T12:54:14.947

只需将它们拖入 xcode 即可。11 MB 并不多，苹果已经提高了超过 3G/Edge 的下载限制。

一旦你把它们放在你的项目中，你就可以像这样称呼它们

```
UIImage *myImage1 = [UIImage imageNamed:@"1.png"]; 
```

它并没有变得更简单。

如果您没有将文件放在项目中并且必须下载它们，则将它们下载到您的 Documents 文件夹中。您可以在该目录中放置您想要的任何内容，因为它仅适用于您的项目，没有其他项目可以访问它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T12:55:38.723

现在 11MB 并不多，您的应用程序可以达到 50MB，并且仍然可以通过蜂窝网络下载，因此最好的解决方案是；

a) 别担心。将它们放在您的资源文件夹中。

如果您要拥有更多图像，那么最简单的解决方案是在应用程序具有网络连接时简单地下载它们。您可以将它们存储在 Documents 文件夹中并将它们标记为不备份，这样它们就不会与 iCloud 同步。您也可以将它们存储在 Caches 文件夹中，但这会使它们更容易在任何时候消失，因此您需要有一个稍微复杂一点的机制来识别它们不再在磁盘上并将它们重新拉入。

# php - php中的视口宽度

> ID：12640375
> 
> 赞同：0
> 
> 时间：2012-09-28T12:50:42.673
> 
> 标签：php, width, viewport, meta

我有一个需要修改的 php 文件，但我对 php 了解不多。一般来说，我需要达到的是这条线的效果：

```
 <meta name="viewport" content="width=480" /> 
```

但是用php写的。以上是html。我试图匹配分辨率以填满移动设备的整个屏幕，这就是为什么我将宽度设置为 480 像素。php中的这段代码有什么替代方法吗？提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T12:53:19.763

PHP 并没有真正来这里玩。你想要的是：

```
<meta name="viewport" content="width=device-width"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T12:58:13.163

PHP 将输出您从回显中指定的文本，但听起来您正试图从 PHP 中设置宽度。这必须通过查询用户代理服务器变量 $_SERVER['HTTP_USER_AGENT'] 来检测设备的正确格式来完成。

然而，我们使用的更好的方法是在 HTML 中进行检测（忽略 PHP），并从 JS 中动态添加 viewport 标签，如下所示：

```
<head>
<script>
if(iPhone)
{
      document.write("<meta name="viewport" content=\"width=480\""+"/>");
}
else // iPad
{
     document.write("<meta name="viewport" content=\"width=1024\""+"/>");
}
</script>
</head> 
```

这不需要服务器端处理，并允许您动态查询 DOM 的实际显示，这是 PHP 无法知道的。

# android - 如何加快 android ndk 构建

> ID：12640377
> 
> 赞同：19
> 
> 时间：2012-09-28T12:50:43.980
> 
> 标签：android, c++, performance, build, android-ndk

我们有一个相当大的 C++ 项目，我们为 Android 和 iOS 构建跨平台。Xcode 在编译时使用所有内核并且速度更快（4-5 倍，具体取决于机器）。有什么办法可以改善 NDK 的糟糕性能？任何多 CPU 选项？我们已经预编译了头文件，但在我看来，这是错误的资源使用。

因此，任何加快 android ndk 项目构建时间的提示或技巧将不胜感激！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-28T12:57:56.533

您不需要使用 Android 的构建系统进行编译；这些工具都可以在 Makefile 中使用（尽管您需要注意设置包含路径、库路径和编译器选项）。

由于您可以创建自己的 Makefile 而不是使用默认的构建脚本，因此您可以使用 th`-jN`选项来指定要执行的同时操作的数量。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-11-29T15:40:44.403

以下 bulid.gradle 片段显示了**-jN**和**abifilters**的示例：（请参阅[http://google.github.io/android-gradle-dsl/current/com.android.build.gradle.internal.dsl.ExternalNativeNdkBuildOptions.html](http://google.github.io/android-gradle-dsl/current/com.android.build.gradle.internal.dsl.ExternalNativeNdkBuildOptions.html)和[https://google.github.io/android-gradle-dsl/current/com.android.build.gradle.internal.dsl.NdkOptions.html](https://google.github.io/android-gradle-dsl/current/com.android.build.gradle.internal.dsl.NdkOptions.html)）

```
android {
compileSdkVersion 21
buildToolsVersion '25.0.3'

defaultConfig {
    applicationId "test"
    minSdkVersion 21
    targetSdkVersion 21

    ndk {
        moduleName "native_lib"
        abiFilters 'armeabi-v7a', 'arm64-v8a'
    }
    externalNativeBuild {
        ndkBuild {
            arguments '-j4'
        }
    }
    jackOptions {
        enabled true
    }
}..... 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-09-21T12:59:14.887

对于收到以下错误的每个人

> 在 com.android.build.gradle.internal.dsl.NdkBuildOptions 类型的对象上找不到参数 [-jx] 的方法 arguments()。

之间有区别

`android.externalNativeBuild` [（这里）](https://google.github.io/android-gradle-dsl/current/com.android.build.gradle.internal.dsl.NdkBuildOptions.html)和

`android.defaultConfig.externalNativeBuild` [（这里）](http://google.github.io/android-gradle-dsl/current/com.android.build.gradle.internal.dsl.ExternalNativeNdkBuildOptions.html#com.android.build.gradle.internal.dsl.ExternalNativeNdkBuildOptions:arguments)。

`android.defaultConfig.externalNativeBuild`接受`arguments`并可用于设置`-j`选项。

# asp.net-mvc-3 - 如何从数据库中获取信息？

> ID：12640378
> 
> 赞同：0
> 
> 时间：2012-09-28T12:50:45.323
> 
> 标签：asp.net-mvc-3

我有一个带有一些列（如里程或模型）`CarsDB`的表的数据库`Car`

我想从我写的控制器中的那个表中获取信息：

```
public ActionResult Index()
{
   return View(db.CarsDB.ToList()):
} 
```

但我收到一个错误（类似于*方法 CarsDB not found*）。错误很长，我不知道如何将其翻译成英文:(另外，当我写 db 时，我得到的唯一建议是“Equals”、“GetHashCode”和其他一些，而不是`CarsDB`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T12:52:53.417

尝试 `db.Cars.ToList()`

您需要查询表（汽车） - 现在您说的是“从 CarsDB 数据库中选择所有内容”，而不是“从 CarsDB 数据库中的 Cars 表中选择所有内容”。

澄清一下-您的`db`变量应该是数据上下文或实体的实例。

完整代码应如下所示：

```
public ActionResult Index()
{
    CarsDB db = new CarsDB();
    return View(db.Cars.ToList()):
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T12:55:52.027

如果您使用的是实体框架，您可以执行以下操作：

```
public ActionResult Index()
{
    using (CarsDB dataContext = new CarsDB())
    {
        return View(dataContext.Cars.ToList()):
    }
} 
```

这也将确保自动处理您的数据上下文。

# regex - 用正则表达式替换 Visual Studio 2010 中的指令

> ID：12640380
> 
> 赞同：1
> 
> 时间：2012-09-28T12:50:53.573
> 
> 标签：regex, visual-studio-2010

想知道是否有人可以帮我找到这个问题的正则表达式。我想使用 Visual Studio 2010 的内置查找/替换功能替换以下内容：

```
_batch.AddInstruction(InstructionType.Update, "LEG_RES_ID", "N") 
```

和

```
_batch.AddInstruction(InstructionType.Update, BpcFields.LegResId, "N") 
```

“LEG_RES_ID”是一个占位符，这里可以出现多个不同的字符串。对于该位置的任何字符串，BpcFields 的等效成员将是相同字符串的 Pascal 大小写版本，不带下划线，如上例所示。

提前谢谢了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T13:05:11.163

我会看看[这个](https://stackoverflow.com/questions/2743836/is-it-possible-to-replace-to-uppercase-in-visual-studio)答案并尝试使用宏。[除非您有另一个编辑器（例如根据此问题](https://stackoverflow.com/questions/1159343/convert-a-char-to-upper-case-using-regular-expressions-editpad-pro)的 EditPad pro），否则似乎无法仅使用 regexp 更改文本的大小写。

另一种解决方法是创建一个程序来执行您对文本文件所需的任务并在您的源代码上使用它。

# javascript - 原型模型中的构造函数变量在ajax调用后无法访问

> ID：12640396
> 
> 赞同：0
> 
> 时间：2012-09-28T12:51:34.907
> 
> 标签：javascript, prototype-programming

当我使用回调从异步调用返回时，我无法访问类的构造函数。

在这种情况下，我无法访问 Myclass1 构造函数中定义的测试变量

我找不到解决方案，我做错了什么？

```
var MyClass1 = function () {

    this.test = 5;
};
MyClass1.prototype = function () {
    //This is the function which calls another Myclass2 which contains the function for ajax //request
    test = function () {
        myClass2 = new MyClass2();
        myClass2.getRequest.call(this, callback);
    },
    //This is the call Back
    callback = function () {
        alert(this.test); /*<---Cannot access this,shows undefined.In firebug it show this.test is not defined*/
    };

    return {
        test: test,
        callback: callback
    }
}

MyClass2.prototype = function () {
    getRequest = function () {
        //make an async call set the success to the callback .I have propagated the data to //myclass1
        $.ajax({
            url: "test.html",
            success: callBack.call(this, data) //<--I call the callback using myClass1
        })
    }

    return {
        getRequest: getRequest;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T22:52:27.467

好的，所以有很多要点：

**第一的**

在原型创建时，请声明变量。现在您正在创建“test”、“callback”和“getRequest”全局变量，因为您不使用“var”

```
MyClass1.prototype = function () {
    var test = function () {
        // some code...
    };

    var callback = function () {
        // some code...
    };

    // And more code...
}; 
```

“测试”声明末尾的逗号是有效的，因为它是一个运算符，但我很确定它不是你想要做的。

或者你可以直接创建函数：

```
MyClass1.prototype = function () {
    function test() {
        // some code...
    }

    function callback() {
        // some code...
    }

    // And more code...
}; 
```

**第二**

您正在将“原型”属性分配给函数

```
MyClass1.prototype = function() { ... }; 
```

这意味着你的类的原型是一个函数，它有方法“call”、“apply”、“bind”，但没有“test”或“callback”。可能您想创建一个立即调用函数表达式 (IIFE)

```
MyClass1.prototype = (function() {
    function methodA() {
        // some code...
    }

    return {
        methodA: methodA
    };
})(); 
```

或者一个简单的对象：

```
MyClass1.prototype = {
    methodA: function() {
        // some code...
    },
    methodB: function() {
        // some code...
    }
}; 
```

**第三**

我不明白你的代码在做什么，“MyClass2”在哪里定义，它扩展了“MyClass1”？

**第四**

您正在将 MyClass1 原型上的“test”属性分配给一个函数，但是在构造函数上，您将“test”属性分配给一个数字，也许您想使用不同的属性。

**第五**

在这条线上：

```
success: callBack.call(this, data) 
```

您正在调用函数“回调”（我不知道它来自哪里），我再说一遍，您正在调用它，而不是将其设置为回调，您只是调用函数并告诉 $.ajax 而不是回调将是“callback.call(this, data)”返回的值，可能是“未定义”。

如果您想将“回调”函数设置为 ajax 请求的回调，您需要传递一个函数，并且在该函数内部，您可以在数组到达时执行任何您想做的事情，在这种情况下调用“回调”，但您必须保存“this”变量以使用它：

```
var self = this;
$.ajax({
    url: "test.html",
    success: function(data) {
        callBack.call(self, data);
    }
}) 
```

我想数据变量来自ajax请愿书......

如您所见，当代码未经测试时，很难给出准确的响应，所以下次请提供您的代码。

如果我所有的假设都是正确的：这是您需要的代码：http: [//jsfiddle.net/pw3hj/](http://jsfiddle.net/pw3hj/)

# iphone - 同时关闭多个屏幕时，dismissViewControllerAnimated 崩溃

> ID：12640397
> 
> 赞同：1
> 
> 时间：2012-09-28T12:51:38.430
> 
> 标签：iphone, ios5, ios6, presentmodalviewcontroller

我在 iOS 5 和 iOS 6 中遇到了一个问题。那就是我有 3 个视图控制器，A、B 和 C。A presentModalViewController B 和 B presentModalViewController C。现在在 CI 有一个按钮可以调用 AdismissViewControllerAnimated。这意味着 B 和 C 将被解雇。此工作流程在 iOS 4.3 中成功运行，但现在我在 iOS 5 和 6 中遇到问题。

任何人都可以帮助我吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T12:26:16.090

对于你要展示的 viewController，设置

```
vc.modalPresentationStyle =UIModalPresentationCurrentContext; 
```

从这个答案：[https ://stackoverflow.com/a/12746304/482533](https://stackoverflow.com/a/12746304/482533)

# java - 简单猜谜游戏中的记分牌

> ID：12640398
> 
> 赞同：1
> 
> 时间：2012-09-28T12:51:49.647
> 
> 标签：java

下面是我猜谜游戏的代码。

我正在尝试实现一个记分牌，在玩家输入他们的名字后显示。记分牌应该保存变量`playername`，`count`并且`totalTime`只要应用程序正在运行。

它也应该按猜测的数量排序（猜测的数量越少 = 记分板上的越高）。

如果两个玩家的猜测数量相同，那么它会按照谁的时间更快来排序。我试过制作一个数组列表，但没有任何运气。每次游戏重置时，我都试图让索引增加 1，因此变量不会被新变量覆盖。

我也无法让数组列表接受长字符串。

```
import java.util. *;

class Game {        

public void start() {

    int randomNumber = (int) (Math.random() * 1000);
    int number = -1, index, count;  
    String decision, guess, playername;
    long currentTime = 0, newTime, totalTime;
    boolean quitting = false;
    count = 0;
    System.out.println("Welcome to the Guessing Game");
    System.out.println("Type \"quit\" to quit at anytime.");
    Scanner scan  = new Scanner(System.in);
    System.out.println("Try to guess the number. Range is from 1 - 1000: ");
    guess = scan.nextLine();
    if ("quit".equals(guess)) {
        System.out.println("Quitting...");
        quitting = true;
    } else {
        number = Integer.parseInt(guess);
    }

    while (number != randomNumber && number > -1){
        if (number >= 1001 || number <= 1) {
            System.out.println("Number is not between 1 - 1000\. Enter another number");
        }

        if (number != randomNumber && number > randomNumber && number <= 1000 && number >= 1) {
            System.out.println("Number is too high. Try again!");
        }

        if (number != randomNumber && number < randomNumber && number < 1000 && number > 1) {
            System.out.println("Number is too low. Try again!");
        }

        if (number != randomNumber) {
            count = count + 1;
        }

        if (number != randomNumber) {
            Scanner scannew  = new Scanner(System.in);
            System.out.println("Enter a different number: ");
            guess = scannew.nextLine();
            if ("quit".equals(guess)) {
                System.out.println("Quitting...");
                quitting = true;
            } else {
                number = Integer.parseInt(guess);
            }
        }

        if (count == 1) {
            long lDateTime = new Date().getTime();
            currentTime = lDateTime / 1000;
        }

        if (quitting) {
            break;
        }
    }

    if (!quitting) {
        long DateTime = new Date().getTime();
        newTime = DateTime / 1000;
        totalTime = newTime - currentTime;

        System.out.println("You win! Your total amount of guesses was: " + count + " Total time (seconds): " + (totalTime));

        Scanner name  = new Scanner(System.in);
        System.out.println("Enter your name: ");
        playername = scan.nextLine();

        //ArrayList<Integer> score = new ArrayList<Integer>();
        //score.add(index, count);
        //System.out.println(score);
        //index++;

        Scanner decision1 = new Scanner(System.in);
        System.out.println("Do you want to play again? y/n");
        decision = decision1.nextLine();

        if ("y".equals(decision)) {
            Game one = new Game();
            one.start();
        }

        if ("n".equals(decision)) {
            System.out.println("Quitting...");
        }
    }
    scan.close();
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T21:01:36.150

`ArrayList`每次添加分数时都会重新初始化它，因此它永远不会包含一个以上的值。只需初始化一次，以及`randomNumber`等。

此外，您不需要`index`. 只是会在所有已经存在的分数*之后*`score.add(count)`添加一个新分数。

# spring - Spring、OpenJPA、多个持久化单元

> ID：12640400
> 
> 赞同：1
> 
> 时间：2012-09-28T12:51:55.940
> 
> 标签：spring, jpa, openjpa, james

有一个 Spring 无 Web 应用程序 Apache James（Java 邮件服务器）。

它使用openjpa。它有一个持久化单元和数据源以及实体管理器工厂定义。

我必须对其进行操作，以便为外部数据库再使用一个持久性单元。

我在 persistence.xml 中又添加了一个单元

```
<persistence-unit name="James" transaction-type="RESOURCE_LOCAL">
        <!-- Mailbox stuff-->
        <class>org.apache.james.mailbox.jpa.mail.model.JPAMailbox</class>
        <class>org.apache.james.mailbox.jpa.mail.model.JPAUserFlag</class>
        <class>org.apache.james.mailbox.jpa.mail.model.openjpa.AbstractJPAMessage</class>
        <class>org.apache.james.mailbox.jpa.mail.model.openjpa.JPAMessage</class>
        <class>org.apache.james.mailbox.jpa.mail.model.openjpa.JPAMessage</class>
        <class>org.apache.james.mailbox.jpa.mail.model.JPAProperty</class>
        <class>org.apache.james.mailbox.jpa.user.model.JPASubscription</class>
        <class>org.apache.james.domainlist.jpa.model.JPADomain</class>
        <class>org.apache.james.user.jpa.model.JPAUser</class>
        <class>org.apache.james.rrt.jpa.model.JPARecipientRewrite</class>

        <properties>
            <property name="openjpa.jdbc.SynchronizeMappings" value="buildSchema(ForeignKeys=true)"/>
            <property name="openjpa.jdbc.MappingDefaults" value="ForeignKeyDeleteAction=cascade, JoinForeignKeyDeleteAction=cascade"/>
            <property name="openjpa.jdbc.SchemaFactory" value="native(ForeignKeys=true)"/>
            <property name="openjpa.jdbc.QuerySQLCache" value="false"/>
        </properties>

    </persistence-unit>

    <persistence-unit name="myPU" transaction-type="JTA">
    <provider>org.hibernate.ejb.HibernatePersistence</provider>
    <class>package.EmailAddress</class>
    <class>package.Message</class>
       <properties>
            <property name="javax.persistence.jdbc.user" value="root" />
            <property name="javax.persistence.jdbc.password" value="root" />
            <property name="javax.persistence.jdbc.url" value="jdbc:mysql://localhost:3306/kepsDb" />
            <property name="javax.persistence.jdbc.driver" value="com.mysql.jdbc.Driver" />
            <property name="hibernate.hbm2ddl.auto" value="none" />
            <property name="hibernate.show_sql" value="false" />
            <property name="hibernate.dialect" value=" org.hibernate.dialect.MySQLDialect" />

            <property name="hibernate.max_fetch_depth" value="0"  />
            <property name="hibernate.cache.use_second_level_cache" value="true" />
            <property name="hibernate.cache.use_query_cache" value="false" />
            <property name="hibernate.cache.region.factory_class" value="org.hibernate.cache.ehcache.EhCacheRegionFactory" />

            <property name="hibernate.ejb.naming_strategy" value="web.app.persistence.util.AppImprovedNamingStrategy"/>

        </properties>

    </persistence-unit> 
```

我没有在 spring-server.xml 中定义第二个实体管理器工厂，而是生成我自己的内联实体管理器工厂：

```
EntityManagerFactory emf=Persistence.createEntityManagerFactory("myPU");
        EntityManager entityManager=emf.createEntityManager();
entityManager.getTransaction().begin(); 
```

但我得到了例外：

```
Caused by: org.springframework.beans.FatalBeanException: Unable to execute lifecycle method on beanmailetcontext; nested exception is <openjpa-2.1.0-r422266:1071316 nonfatal user error> org.apache.openjpa.persistence.InvalidStateException: This operation cannot be performed while a Transaction is active. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T16:06:32.750

以下代码解释了如何使用 JPA + spring 配置多个持久性单元：

首先，我们在persistence.xml中定义了两个持久化单元，我们分别称它们为unit1和unit2：

```
<persistence xmlns="http://java.sun.com/xml/ns/persistence"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_1_0.xsd"
  version="1.0">

  <persistence-unit name="Unit1" transaction-type="RESOURCE_LOCAL">
    <provider>org.hibernate.ejb.HibernatePersistence</provider>
    <properties>
      <property name="hibernate.archive.autodetection" value="class" />
      <property name="hibernate.connection.driver_class" value="oracle.jdbc.OracleDriver" />
      <property name="hibernate.connection.url" value="jdbc:oracle:thin:@my.company.com:1522:D1" />
      <property name="hibernate.connection.password" value="my_user" />
      <property name="hibernate.connection.username" value="my_password" />
    </properties>
  </persistence-unit>

  <persistence-unit name="Unit2" transaction-type="RESOURCE_LOCAL">
    <provider>org.hibernate.ejb.HibernatePersistence</provider>
    <properties>
      <property name="hibernate.archive.autodetection" value="class" />
      <property name="hibernate.connection.driver_class" value="oracle.jdbc.OracleDriver" />
      <property name="hibernate.connection.url" value="jdbc:oracle:thin:@my.company.com:1522:D2" />
      <property name="hibernate.connection.password" value="my_user" />
      <property name="hibernate.connection.username" value="my_password" />
    </properties>
  </persistence-unit>
</persistence> 
```

由于我们处理的是一个独立的 Java 应用程序，我们在 Spring 应用程序上下文中定义了我们的数据源，但对于 Web 应用程序，通常在 persistence.xml 文件本身中定义对这些数据源的 JNDI 引用。

在 application-context.xml 中，这些持久性单元的引用如下：

```
<?xml version="1.0" encoding="UTF-8"?>

<beans xmlns="http://www.springframework.org/schema/beans"
  xmlns:context="http://www.springframework.org/schema/context"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xmlns:tx="http://www.springframework.org/schema/tx"
  xmlns:p="http://www.springframework.org/schema/p"
  xsi:schemaLocation="http://www.springframework.org/schema/beans
  http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
  http://www.springframework.org/schema/context
  http://www.springframework.org/schema/context/spring-context-2.5.xsd
  http://www.springframework.org/schema/tx
  http://www.springframework.org/schema/tx/spring-tx.xsd">

  <context:annotation-config />
  <tx:annotation-driven />

  <bean id="dataSource1" class="com.mchange.v2.c3p0.ComboPooledDataSource">
    <property name="driverClass" value="oracle.jdbc.driver.OracleDriver" />
    <property name="jdbcUrl" value="jdbc:oracle:thin:@my.company.com:1521:D1" />
    <property name="user" value="my_user" />
   <property name="password" value="my_password" />
  </bean>

  <bean id="dataSource2" class="org.apache.commons.dbcp.BasicDataSource">
    <property name="driverClassName" value="oracle.jdbc.driver.OracleDriver" />
    <property name="url" value="jdbc:oracle:thin:@my.company.com:1521:D2" />
    <property name="username" value="my_user" />
    <property name="password" value="my_password" />
  </bean>

  <!-- DEFINITION OF BOTH ENTITY MANAGER FACTORIES -->

  <bean id="entityManagerFactory"
        class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
    <property name="dataSource" ref="dataSource1" />
    <property name="persistenceUnitName" value="Unit1" />
    <property name="persistenceUnitManager" ref="persistenceUnitManager" />
    <property name="jpaVendorAdapter">
      <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">
        <property name="databasePlatform"
                  value="org.hibernate.dialect.Oracle10gDialect" />
      </bean>
    </property>
  </bean>

  <bean id="entityManagerFactory2"
        class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
    <property name="dataSource" ref="dataSource2" />
    <property name="persistenceUnitName" value="Unit2" />
    <property name="persistenceUnitManager" ref="persistenceUnitManager" />
    <property name="jpaVendorAdapter">
      <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">
        <property name="databasePlatform"
                  value="org.hibernate.dialect.Oracle10gDialect" />
      </bean>
    </property>
  </bean>

  <!-- PERSISTENCE UNIT MANAGER and TRANSACTION MANAGERS -->

  <bean id="persistenceUnitManager"
        class="org.springframework.orm.jpa.persistenceunit.DefaultPersistenceUnitManager">
    <property name="dataSources">
      <map>
        <entry key="d1" value-ref="dataSource1" />
        <entry key="d2" value-ref="dataSource2" />
      </map>
    </property>
  </bean>

  <bean id="transactionManager"
        class="org.springframework.orm.jpa.JpaTransactionManager"
        p:entity-manager-factory-ref="entityManagerFactory" />

  <bean id="abwTransactionManager"
        class="org.springframework.orm.jpa.JpaTransactionManager"
        p:entity-manager-factory-ref="entityManagerFactory2" />
</beans> 
```

现在剩下要做的就是在你的 DAO 中表示 @PersistenceContext，如下所示：

```
@Required
  @PersistenceContext(unitName = "Unit1")
  public void setEntityManager(final EntityManager entityManager) {
      this.entityManager = entityManager;
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T13:59:21.303

`myPU`配置为使用 JTA 事务。使用 JTA 时调用[entityManager.getTransaction()](http://docs.oracle.com/javaee/6/api/javax/persistence/EntityManager.html#getTransaction%28%29)将导致异常，因为该方法应该与`RESOURCE_LOCAL`事务类型一起使用。

我不知道您发布的异常消息是否是由于这个原因，但您可以尝试将 of 更改`<persistence-unit>`为`myPU`：

```
<persistence-unit name="myPU" transaction-type="RESOURCE_LOCAL"> 
```

请注意，如果您必须在同一事务中访问两个数据库，则必须使用 JTA。

# php - 使用简单的 CMS - 如何处理用户拥有的访问权限？

> ID：12640407
> 
> 赞同：1
> 
> 时间：2012-09-28T12:52:15.107
> 
> 标签：php, mysql, database

我正在开发个人 CMS，但遇到了问题。我想将 CAN_DELETE_THREAD、CAN_EDIT_MESSAGE 或 CAN_CREATE_THREAD 等访问级别定义为二进制标志，但我不知道函数“has_flag”如何工作。例如，如果我从数据库中获取一个用户并想检查他是否可以编辑消息，我将如何去做呢？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T12:57:10.917

您需要按用户或按角色访问设置吗？

每个角色将更具可扩展性，特别是如果您的系统将对许多用户开放。

首先，我会定义用户可以执行的操作，按某个类别分组（“线程”与 [添加、编辑、删除、标记、存档、随便]），然后您可以创建一个列表来定义每个角色和每个动作是否被允许或拒绝。

如果您定义一个默认值，您可以减少该表中所需规范的数量（如果没有拒绝，则允许一切，反之亦然）。

需要更多细节以获得进一步的帮助；）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T13:03:48.713

您可以创建一个`permissions`数据库表和一个`permissions_users`将权限连接到用户的表，然后逐页检查登录用户是否可以查看该页面。

假设您有一个`User`模型和一个 ID 为 1 的权限：

```
if ($user->hasPermission(1)) {
    // show form or whatever
}
else {
    throw new ForbiddenException();
} 
```

你的`hasPermission()`方法可以很简单：

```
<?php
class User extends Model {

    public function hasPermission($permission_id) {
        $sql = "SELECT COUNT(*) FROM `permissions_users` WHERE `user_id` = :user_id AND `permission_id` = :permission_id";
        $stmt = $this->pdo->prepare($sql);
        $stmt->bindParam(':user_id', $this->id, PDO::PARAM_INT);
        $stmt->bindParam(':permission_id', $permission_id, PDO::PARAM_INT);
        return ($this->pdo->fetchColumn() > 0); // returns true if at least 1 result
    }
} 
```

显然，您需要调整它以适合您的应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T12:58:29.133

您可以通过多种方式做到这一点。您可以存储与用户关联的整数属性，然后将标志定义为 2 的整数幂：

```
define('CAN_CREATE_THREAD', 0x0010);
define('CAN_DELETE_THREAD', 0x0020); 
```

那么对你`hasFlag($flag)`来说可能是这样的

```
return ($this->BinaryFlags & $flag); 
```

否则，您可以将所有标志存储在数据库中：

```
CREATE TABLE flags
(
    id integer not null primary key auto_increment,
    name varchar(32)
);

CREATE TABLE has_flag
(
    user_id integer,
    flag_id integer
); 
```

并且您的 hasFlag 函数是对数据库的查询。

角色级别的访问权限是相同的，只是您不存储将标志与用户相关联，而是将用户与*角色*相关联（因此您有一个类似的表`(user_id, role_id)`），然后将标志与角色相关联，如上所示。

好处是可以将一个人定义为“部分XYZ管理员”，而不必一一记住和设置所有权限；缺点是您不能拥有中间状态（例如，可以编辑但不能创建的半管理员），除非您先创建角色。

# python - 在 GAE/P 中存储 > 1MB 的文本文件

> ID：12640409
> 
> 赞同：2
> 
> 时间：2012-09-28T12:52:19.193
> 
> 标签：python, google-app-engine, google-docs-api, blobstore, google-cloud-storage

我有一个 Google App Engine 应用程序，我需要在其中存储大于 1 MB（最大实体大小）的文本文件。

我目前将它们存储在 Blobstore 中，并使用 Files API 来读取和写入它们。当前操作包括从用户上传它们、读取它们以进行处理和更新，以及将它们呈现给用户。最终，我希望允许用户编辑它们（可能作为谷歌文档）。

将此类文本文件存储在 Google Cloud Storage、Google Doc 或其他位置而不是使用 Blobstore 是否有优势？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T20:16:40.740

这真的取决于你到底需要什么。使用[一种服务](https://developers.google.com/appengine/docs/billing#Billable_Resource_Unit_Costs)当然比[另](https://developers.google.com/storage/docs/pricingandterms#pricing)一种服务有优势，但最终这并不重要，因为所有解决方案的速度几乎都一样快，而且不那么昂贵。如果一段时间后您将拥有大量数据，您可能会考虑切换到另一种解决方案，只是因为您可能会节省一些钱。

话虽如此，我还是建议您继续使用[Blobstore API](https://developers.google.com/appengine/docs/python/blobstore/)，因为这不需要与外部服务的额外通信、更多密钥等。安全性和速度方面是完全一样的。当您达到 10K 或 100K 用户时，您就会知道将它们存储在其他地方是否真的值得。继续了解您最了解的内容，但只需确保在 Google App Engine 上构建时遵循正确的做法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T00:35:57.957

如果您已经在使用 Files API 来读取和写入文件，我建议您使用 Google Cloud Storage 而不是 Blobstore。GCS 提供了更丰富的 RESTful API（使访问控制等事情变得更容易），做许多事情来加速提供静态数据等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T13:51:15.033

在 Google Docs（现在的 Google Drive）和 Google Cloud Storage 中共享数据更加容易。使用 Google 驱动器，您还可以使用 Google Apps 脚本的强大功能。

# css - 使用onmouseover在元素旁边显示一个div？

> ID：12640415
> 
> 赞同：0
> 
> 时间：2012-09-28T12:52:51.377
> 
> 标签：css, onmouseover

我有一个 div，像这样：

```
<div id="div1" name="div1" style="display:none;">
    hello world
</div> 
```

那是在我页面的底部。现在，当将鼠标放在图像上时，我想在图像下方显示该 div。问题是，我有 10 个相邻的图像，并且 div 应该动态显示在每个图像下方，这意味着将鼠标放在图像 6 上应该显示图像 6 下方的 div。

我怎样才能做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T13:06:08.377

这只能通过 CSS 来完成，这是一个工作示例：

```
<html>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

    <style>

        *                   { margin: 0; padding: 0; }
        body                { font: 12px Helvetica, Sans-Serif; }

        img                 {width: 125px;}
        #page-wrap          { width: 125px; margin: 62px auto; }

        h1                  { font-size: 30px; letter-spacing: -1px; margin: 0 0 20px 0; } 

        .people             { position: relative; width: 125px;} 
        a                   { text-decoration: none; color: #222; display: block; outline: none; padding: 5px; }
        a img               { border: 1px solid #ccc; }
        a .name             { font: 12px Georgia, Serif; width: 125px; display: none;}
        a:hover .name       { color: #900; font-weight: bold; position: relative; display: block;} 
        a:hover img         { border: 1px solid #000; margin: 0px; }
        a .photo            { display: block; position: absolute; width: 125px; height: 125px; }
        #toby .photo        { top: 0; left: 0; position: relative;}

    </style>
</head>

<body>

    <div id="page-wrap">

        <div class="people">

            <a href="#toby" id="toby">
                <div class="photo">
                    <img src="http://www.style-makeover-hq.com/images/what-is-my-face-shape-and-what-is-the-best-haircut-for-it-21276689.jpg" alt="Toby Pic" />
                </div>
                <div class="name">Toby Yong<br />
                    Toby Young joins the fifth season of Top Chef to lend his culinary expertise to the judges table.
                </div>
            </a>

        </div>

    </div>

</body>

</html> 
```

这是它的jsfiddle：http: [//jsfiddle.net/Ek4Ej/](http://jsfiddle.net/Ek4Ej/)

代码基于这篇文章：[http ://css-tricks.com/remote-linking/](http://css-tricks.com/remote-linking/)

*   您可以轻松地在页面上添加更多具有此效果的图像或对其应用任何样式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T13:07:15.743

试试这个[演示](http://jsbin.com/ipurix/6/edit)

```
$(function() {

  $("#main").on("hover",".img img", function(){

    pos = $(this).offset();
    $(".box").css({"left":pos.left,"top":(pos.top + $(this).height())});
   $(".box").show();

  });

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T13:01:14.590

如果您想使用 jQuery 并希望在 DOM 中移动 div，这可能是一种方法：

```
$(function() {
    var div1 = $('#div1').remove();
    $('img')
        .bind('mouseenter', function() {
            $(this).parent().append(div1);
        })
        .bind('mouseleave', function() {
            div1.remove();
        });
}); 
```

# htmlunit - 使用 HtmlUnit 单击锚点时发生错误

> ID：12640416
> 
> 赞同：1
> 
> 时间：2012-09-28T12:52:52.010
> 
> 标签：htmlunit

使用 HtmlUnit 我可以为网页获取此图像元素

```
 <pre> <a onclick="return OnSubmitValidateSignUp();return ValidEmail();" id="lnkSave"    tabindex="10" class="create" href="javascript:__doPostBack('lnkSave','')"></a> </pre> 
```

使用

```
 <i> HtmlAnchor button = (HtmlAnchor) currentPage.getByXPath("//* [@id=\"lnkSave\"]").get(0);     
System.out.println(" anchor "+ button.getId());</i> 
```

但是当我把`button.click();`下面的错误发生了。

```
Sep 28, 2012 6:39:59 PM com.gargoylesoftware.htmlunit.IncorrectnessListenerImpl notify
WARNING: Obsolete content type encountered: 'application/x-javascript'.
Exception in thread "JS executor for com.gargoylesoftware.htmlunit.WebClient@f27a6e" java.lang.OutOfMemoryError: Java heap space
at java.util.Hashtable.put(Hashtable.java:458)
    at java.util.Properties.load0(Properties.java:392)
    at java.util.Properties.load(Properties.java:341)
    at java.util.PropertyResourceBundle.<init>(PropertyResourceBundle.java:130)
    at java.util.ResourceBundle$Control.newBundle(ResourceBundle.java:2610)
    at java.util.ResourceBundle.loadBundle(ResourceBundle.java:1436)
    at java.util.ResourceBundle.findBundle(ResourceBundle.java:1400)
    at java.util.ResourceBundle.findBundle(ResourceBundle.java:1354)
    at java.util.ResourceBundle.findBundle(ResourceBundle.java:1354) 
```

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T04:55:14.433

这是一个javascript问题。似乎您`OnClick`在按钮的事件中附加了一些 javascript。如果可能，首先尝试禁用 JS。第二次尝试看看这个答案：[HtmlUnit is throwing Out Of Memory and may leaking memory](https://stackoverflow.com/questions/7535243/htmlunit-is-throwing-out-of-memory-and-maybe-leaking-memory/7576572#7576572)，它可能会有所帮助。

# iphone - 如何从自身通过电子邮件发送 Iphone 应用程序的 sqlite 数据库？

> ID：12640420
> 
> 赞同：1
> 
> 时间：2012-09-28T12:52:55.560
> 
> 标签：iphone, ios, database, sqlite, export

在我当前的应用程序中，我正在添加数据备份和恢复功能。用户可以创建数据库备份并通过电子邮件发送。在恢复功能中，用户可以从电子邮件中导入数据库并且可以替换当前的。

我能够创建数据库文件的备份和恢复。在恢复中，我只是将文件从我的电子邮件复制到应用程序文档文件替换当前文件。问题是在我的数据库备份代码中，sqlite 数据库被转换为 NSData。我不想被转换并且需要通过电子邮件发送确切的 sqlite 文件。

这是我目前用于通过电子邮件发送 sqlite 数据库的代码

```
-(void)backUpData
{

NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];

NSString *txtPath = [documentsDirectory stringByAppendingPathComponent:@"/DemoApp.sqlite"];

NSURL *newUrl = [[NSURL alloc] initWithString:
[txtPath stringByAddingPercentEscapesUsingEncoding: NSUTF8StringEncoding]];

NSData *sqliteData = [[NSData alloc] initWithContentsOfURL:newUrl];

//send sqliteData to email composer delegate to attach it as attachment
[self showPicker:sqliteData];

} 
```

如何在不将其转换为 NSData 的情况下通过电子邮件发送 sqlite db？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T13:27:39.767

在创建提供路径而不是 url 的 NSData 对象时使用 dataWithContentsOfFile。例如：

```
NSString *dbPath = [[NSBundle mainBundle] pathForResource:@"Pubs" ofType:@"db"];
NSData   *myData = [NSData dataWithContentsOfFile:dbPath];

[mailComposeVC addAttachmentData:myData mimeType:@"application/x-sqlite3" fileName:@"Pubs.db"]; 
```

# performance - SSE 4.2 CSV 文件解析

> ID：12640421
> 
> 赞同：6
> 
> 时间：2012-09-28T12:53:14.823
> 
> 标签：performance, parsing, csv, sse

我目前正在研究如何使用 SSE 4.2 字符串和文本处理指令 STTNI (http://software.intel.com/en-us/articles/xml-parsing-accelerator-with-intel-streaming-simd-extensions- 4-intel-sse4/) 用于高效的 CSV 文件解析。

我的问题是，之前是否已经尝试过 CSV 文件/内存中的 CSV 解析，以及是否可以在线获取示例？到目前为止，我还没有成功找到关于如何使用 SSE 4.2 进行文本解析的好资源（除了上面提到的英特尔文章）。

我正在尝试的当前策略是，对于每 16 个字节，创建 4 个位掩码：

*   一个将每个字符与分隔符匹配
*   一个将每个字符与换行符匹配
*   一个将每个字符与引号字符（字符串）匹配；和
*   一个将每个字符与转义字符匹配（转义分隔符、换行符、引号）

通过位掩码获得的信息，很容易确定 CSV 中每个值的偏移量和长度。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T20:09:01.800

你为什么使用位掩码？用一条 STTNI 指令检查所有这些事件，然后使用返回的索引来处理返回的事件（如果有）不是更好吗？

（编辑）让我尝试更有帮助......

（我假设您使用的是 8 位字符的空终止字符串。如果不是这种情况，请告诉我。）

我认为您最好将分隔符、换行符、引号和转义符放入单个寄存器（作为空终止字符串）并使用[PCMPISTRI](https://github.com/HJLebbink/asm-dude/wiki/PCMPISTRI)而不是 PCMPISTRM 使用每个值。对于您要指示的控制字：无符号字节、相等任意、正极性、最小。（很确定我没看错。）

然后，您可以使用 JA 同时检查是否命中了 4 个特殊字符中的任何一个或是否到达了字符串的末尾。如果是这样，请退出循环以处理它。如果没有，将 ECX 添加到 xmm2/m128 指针并跳回 PCMPISTRI。

处理“命中”的第一条代码指令是将 ECX 添加到 xmm2/m128 指针，然后依次处理每种可能性。我建议从最可能到最不可能订购它们。

因此，asm 最终应该看起来像：

```
 XOR       ECX, ECX  

TAG1:
    ADD       EAX, ECX  
    PCMPISTRI XMM1, [EAX], 0x0     ; also writes ECX = index
    JA        TAG1  

ADD       EAX, ECX  
CMP       BYTE PTR[EAX], "delimiter"  
JE        "handle delimiter"  
CMP       BYTE PTR[EAX], "newline"  
JE        "handle newline"  
CMP       BYTE PTR[EAX], "quotation"  
JE        "handle quotation"  
CMP       BYTE PTR[EAX], "escape"  
JE        "handle escape"  
CMP       BYTE PTR[EAX], "end of string"  
JE        "handle end of string" 
```

我会让你决定测试分隔符的最佳顺序是什么。:)

当我开发指令时，我曾经能够让编译器使用内在函数生成上面的 asm 代码。自从我完成了这些指令的工作以来已经有一段时间了，所以不确定普通编译器是否会做得很好。（听到你得到什么结果会很有趣。）

* * *

顺便说一句，指令的掩码版本确实有各种用途，它们只是不是查找第一个或最后一个东西的最佳选择，因为指令的“I”版本将为您计算偏移量。面具版本适用于计数或仅处理某些项目以及其他更奇特的事物。现在我正在使用它们来计算 DNA 字符串中的 A、CG 和 T。

# mysql - Mysql 使用 Like 查询创建

> ID：12640422
> 
> 赞同：0
> 
> 时间：2012-09-28T12:53:17.250
> 
> 标签：mysql, sql, database

在 Mysql 中的以下查询中，

```
CREATE TABLE `t1` LIKE `student` 
```

从学生新创建的 t1 将具有与学生相同的模式和外键。这是我的疑问。

谁能解除我的疑惑？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T13:07:39.137

表 t1 具有与学生和外键相同的模式，但它是空表。[参考](http://dev.mysql.com/doc/refman/5.1/en/create-table.html)

**有关详细信息，**

*   您可以通过在 CREATE TABLE 语句的末尾添加**SELECT**语句来从另一个表创建一个表：

**> 创建表 new_tbl 选择 * FROM orig_tbl;**

在这种情况下，原始表中的所有数据都将复制到新表中，但不包括与模式相关的信息，例如主键对比。

* * *

*   使用**LIKE**根据另一个表的定义创建一个**空表，包括在原始表中定义的任何列属性和索引：**

**> 创建表 new_tbl LIKE orig_tbl;**

在这种情况下，新表与原始表具有相同的架构，但没有数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T13:08:13.450

[从这里](http://dev.mysql.com/doc/refman/5.1/en/create-table.html)引用：

> 使用 LIKE 根据另一个表的定义创建一个空表，包括在原始表中定义的任何列属性和索引：
> 
> 创建表 new_tbl LIKE orig_tbl;
> 
> 使用与原始表相同版本的表存储格式创建副本。原始表需要 SELECT 权限。
> 
> LIKE 仅适用于基表，不适用于视图。
> 
> CREATE TABLE ... LIKE 不保留为原始表或任何外键定义指定的任何 DATA DIRECTORY 或 INDEX DIRECTORY 表选项。

# java - Eclipse 和企业 Web 应用程序之间的 Java Chat (Messaging)

> ID：12640426
> 
> 赞同：2
> 
> 时间：2012-09-28T12:53:29.050
> 
> 标签：java, websocket, xmpp, chat

场景：我想向 Eclipse 插件和 Web 应用程序添加消息传递功能。客户端是 Eclipse 用户和 Web 应用程序用户。每当客户端向服务器发布带有特定主题的消息时，浏览该主题的 Web 应用程序用户应该立即知道传入的消息。

当前处理这种情况的 Java 技术是什么？我正在寻找一个干净的 API，解决方案。

PS。系统已经有spring依赖，服务器是Tomcat 7

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T13:35:59.937

您可以在 Eclipse 客户端上通过[Smack](http://www.igniterealtime.org/projects/smack/index.jsp)使用 XMPP ，并为您的 Web 界面使用现有[的基于 Web 的聊天客户端](http://xmpp.org/xmpp-software/clients/)或浏览器友好的[XMPP 客户端库](http://xmpp.org/xmpp-software/libraries/)。

由于您要发布到一个主题，我建议使用 XMPP 的多用户聊天或 pubsub 扩展。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T12:05:18.293

您可能想看看 Eclipse 通信框架： http: [//www.eclipse.org/ecf/](http://www.eclipse.org/ecf/)

# jquery - img 标签上的 FileStreamResult

> ID：12640427
> 
> 赞同：1
> 
> 时间：2012-09-28T12:53:35.323
> 
> 标签：jquery, asp.net-mvc-4

我的 MVC 控制器在我的 ajax 回调函数中将 FileStreamresult 作为 Image/png 返回，如下所示。同样需要分配给`<img src="Image here!!"/>`. 请让我知道我该怎么做。

```
fileResult=new FileStreamResult(new MemoryStream(byte), "image/png"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T13:00:21.750

您可以使用控制器和操作来返回`FileStreamResult`：

```
public class ImageController : Controller
{
  public ActionResult Avatar() 
  {
      return new FileStreamResult(new MemoryStream(byte), "image/png");
  }
} 
```

在您的`img`标签中，您可以指向该控制器：

```
<img src="/image/avatar"/> 
```

# java - Spring Transactions 以确保 2 个 REST 服务之间的一致性？

> ID：12640428
> 
> 赞同：6
> 
> 时间：2012-09-28T12:53:40.163
> 
> 标签：java, spring, rest, transactions, persistence

我有 2 个 REST api，我在“事务”中“持久化”数据。我很想听听有关如何确保如果第二个有问题第一个可以“回滚”的建议。

我目前有一个重试循环，如果失败，我会向第一个调用发送删除。

它工作得很好，我只是好奇是否可以使用 spring 事务来处理这个问题。

就此而言，还有其他选择吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T13:46:28.857

如果这样的事情是可能的，那将是非常有趣和有用的，但我认为这是不可能的，因为没有像 JDBC API 那样使用 REST API 进行提交/回滚的标准 API。使用 Spring，您永远不能简单地标记一个方法，`@Transactional`因为 Spring 不知道如何“回滚”您通过 REST 调用所做的任何事情，而无需显式声明它。

# java - 在有根的 Android 上运行 Oracle Java Embedded Suite 7.0（ARM Linux 版本）

> ID：12640436
> 
> 赞同：2
> 
> 时间：2012-09-28T12:54:03.483
> 
> 标签：java, linux, arm

我的目标是在我的手机上运行一个 Tomcat Web 服务器，但运行任何 Java 应用程序都可以。Oracle Java Embedded Suite 7.0 似乎是可以在 ARM 设备上运行的常规 Java SE（免责声明，我以前从未使用过 Java Embedded）。

我已经通过 ADB 将它复制到我的手机，但是当我尝试运行 java 可执行文件时，它说它找不到该文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T23:57:04.033

Android 没有经典的 Java 运行时环境 (JRE) 来运行 Java 应用程序。它不支持任何 Java Micro / Standard / Enterprise 版本，这意味着它不需要`java`可执行文件或任何其他必要的库。正因为如此，您不能只推送和运行*在任何地方*运行的 Java 应用程序。

如果你想在你的安卓手机上运行一个网络服务器，你可以试试[NanoHTTPD](http://elonen.iki.fi/code/nanohttpd/)。如果你想在 Android 上运行一个普通的 Java 应用程序，那么你需要使用[Android SDK](http://developer.android.com/sdk/index.html)和[参考文档](http://developer.android.com/reference/packages.html)来移植它，这可能并不简单。

将 Java SE Embedded 推送到 Android 手机也行不通，因为作为其[页面](http://www.oracle.com/technetwork/java/embedded/resources/se-embeddocs/index.html)列表，您至少需要**glibc 2.9 或更高版本**才能运行它，而 Android 堆栈不提供。

# c - 阻止 Linux read(2) 直到所有计数字节都到达

> ID：12640437
> 
> 赞同：4
> 
> 时间：2012-09-28T12:54:05.140
> 
> 标签：c, linux, file, system-calls, blocking

我`read (2)`用来从文件中读取数据（`/dev/random`数据到达非常缓慢）。

但是， read() 只读取几个字节后返回，而我希望它等到读取指定数量的字节（或发生错误），所以返回值应该始终是 count 或 -1 .

有没有办法启用这种行为？`open (2)`和`read (2)`手册页不包含有关该主题的任何有用信息，我也没有在 Internet 上找到有关该主题的任何信息。

我完全知道将`read()`内部放入一个while循环并调用它直到所有数据都被读取的解决方法。我只想知道这是否可以以产生确定性行为的适当方式实现，并且仅涉及 O(1) 系统调用，而不是在 while 循环解决方案的情况下的非确定性 O(n)。

以下最小示例重现了该问题。

```
#include <stdio.h>

#include <unistd.h>
#include <sys/types.h>
#include <sys/stat.h>
#include <fcntl.h>

int main() {
        int fd = open("/dev/random", 0);

        char buf[128];
        size_t bytes = read(fd, buf, sizeof(buf));

        printf("Bytes read: %lu\n", bytes); //output is random, usually 8.

        close(fd);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T13:00:59.337

虽然读取可以在接收到请求的数据之前被信号中断，但如果没有 while 就无法真正完成。

不幸的是，您必须检查返回值并计算字节数。是的，最简单的方法是编写一个包装函数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-29T02:51:19.843

正如大家所说，

*   无法保证在您的读取返回之前有 128 个字节的随机性可用，并且

*   与生成 8 个字节的摊销成本相比，一次获取 8 个字节的开销是微不足道的；所以，

*   您应该记住，熵需要付出巨大的代价，并在消耗它时考虑到这一点。

`man 4 random`尽管如此，如果不注意（在一个模糊的最近的 Linux 发行版上）你应该找到以下信息，这个问题的答案是不完整的：

```
The files in the directory /proc/sys/kernel/random
(present since 2.3.16) provide an additional interface
to the /dev/random device. 
```

...

```
The file read_wakeup_threshold contains the number of bits of
entropy required for waking up processes that sleep waiting
for entropy from /dev/random. The default is 64. 
```

也就是 64 *bits*，也就是八个字节。使用超级用户权限，您可以增加此值，但恕我直言，将其增加到 1024，然后期望您的机器继续正常工作可能是相当乐观的。我不知道所有需要一点熵的东西，但我当然注意到我的熵池会上下波动，所以我知道有些东西想要它，我强烈怀疑无论是什么东西都不会高兴不得不等待它的 1024 位可用。无论如何，你知道有一点绳子......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T13:01:29.020

从文档中，/dev/random 尽最大努力返回它可以返回的最可靠的随机数据，这限制了它在一次读取中返回的字节数。

但是读取 /dev/urandom（注意 'u'）将返回您请求的数据（缓冲区大小），有时随机数据较少。

这是[一个有用的链接](http://linux.about.com/library/cmd/blcmdl4_urandom.htm)

关于 read() 行为，我很确定这是无法更改的： read() 返回底层管道（例如磁盘+驱动程序+ ...）决定返回的数据量，这是一种设计行为。正如您所说，做事的方法是循环直到您收到与预期一样多的数据。

# .net - 在winforms中检测ComboBox.DropDownClosed中的用户选择

> ID：12640438
> 
> 赞同：1
> 
> 时间：2012-09-28T12:54:07.997
> 
> 标签：.net, winforms, combobox, click, dropdownbox

我在 UI 中有几个组合框，每个组合框都有一长串相似的条目（数字）。当用户从一个组合框中选择一个项目时，我知道用户会从其他组合框中选择一个具有相似值（但可能不相同）的条目。因此，在用户选择了一个值后，为了避免强迫用户进行大量滚动，我想将下一个组合框下拉菜单“预滚动”到最后一个选择的值附近（当这个下拉菜单没有已经有选择）。

到目前为止，我已经通过使用

```
combobox.SelectedItem = myLastSelectedItem; 
```

在 combobox.DropDown 事件处理程序中。

然后，当下拉菜单关闭时，我需要能够检测用户是否点击了下拉菜单中的项目。如果用户没有单击某个项目，那么我必须将所选值重置为之前的值（无）。用户可能单击了 myLastSelectedItem 或其他项目（因此，我不能只将当前选定的项目与 myLastSelectedItem 进行比较，因为即使用户确实单击了它们也可能相同）。SelectedValueChange、SelectedIndexChange、TextChanged 都在 DropDownClosed 事件之后被触发，因此我无法使用它们。MouseClick 事件根本不会被触发。

因此，我如何检测到用户点击了组合框下拉菜单中的项目（而不是因为用户点击了下拉菜单或按下了退出而关闭了下拉菜单）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T18:39:54.423

我尽我最大的努力看看我是否能完成这项工作，但如果我在 30 分钟后不拔掉头发，我会被诅咒的。如果您愿意进行一些更改，您可以尝试使用 ListBox 控件。它有一个“TopIndex”属性，可以滚动到您想要的索引，但实际上从不进行选择。见下面的代码：

```
 private void listBox_SelectedIndexChanged(object sender, EventArgs e) {
        ListBox lbx = sender as ListBox;
        if (lbx != null) {
            switch (lbx.Name) {
                case "listBox1": 
                    listBox2.TopIndex = lbx.SelectedIndex; 
                    listBox2.SelectedIndex = -1; 
                    listBox3.TopIndex = 0; 
                    listBox4.TopIndex = 0; 
                    break;
                case "listBox2": 
                    listBox3.TopIndex = lbx.SelectedIndex; 
                    listBox3.SelectedIndex = -1;
                    listBox4.TopIndex = 0;
                    break;
                case "listBox3": 
                    listBox4.TopIndex = lbx.SelectedIndex; 
                    listBox4.SelectedIndex = -1; 
                    break;
            }
        }
    } 
```

4 个不同的 ListBox 控件都在其 SelectedIndexChanged 事件中使用该控件。让我知道这是否有效。如果没有，我可以回到 ComboBoxes。

# java - 从相机获取信息

> ID：12640443
> 
> 赞同：0
> 
> 时间：2012-09-28T12:54:26.977
> 
> 标签：java, android, camera, android-camera

我的功能必须在我打电话给他的当前时间从相机拍照，并将其保存在我的缓冲区中，而不是其他任何地方。我不需要打开相机，按下它的“捕捉”按钮，我需要自动完成这一切。用户不能看到，该相机正在工作，并且在拍摄图像后，它必须仅将其复制到我的缓冲区中。不建议使用`camera.start()`，复制视频或图片后，请将其从图库中删除。有人可以帮助我吗？对不起英语:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T13:17:46.203

**[这](https://stackoverflow.com/questions/5991319/capture-image-from-camera-and-display-in-activity)**是您的问题的解决方案。稍微编辑一下。例如，您可以将位图存储在 ArrayList 中。

但是您知道这对性能不利，因为它会淹没内存？将其写入 sd 可能比使用内部存储器更好。

编辑：使用 API 时，您*必须*显示预览。但是，您可以将此预览设置为 1x1px 或将其隐藏在其他视图后面。你可以稍微修改一下代码，不要在按钮点击时开始捕获，而是在你想要的任何地方。我认为你可以做到这一点。

**[这](http://handycodeworks.com/?p=19)**也有很大帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T13:37:51.117

据我所知，在用户不知情的情况下，您将无法捕获打开相机应用程序的图像。

# ruby-on-rails - 缓存资产时，Rails (jruby) 缓存错误（无法使用默认 proc 转储哈希）

> ID：12640449
> 
> 赞同：1
> 
> 时间：2012-09-28T12:55:06.697
> 
> 标签：ruby-on-rails, jruby, asset-pipeline, actioncontroller, trinidad-gem

```
Ruby version: jruby-1.6.8
Rails version 3.2.6
Server: trinidad 
```

每当在未缓存的地方提供资产（图像、CSS 或 JS）时，我在生产模式下的日志中出现错误（即，当它在浏览器缓存中时，应用程序正在发送 304 并且错误没有发生） .

当我在 WEBrick 而不是 Trinidad 下运行应用程序时，它不会发生。

当我设置时，在开发模式下也会发生错误：

```
config.action_controller.perform_caching = true 
```

日志中出现的错误如下：

```
Started GET "/assets/pokervane_128-ade771fc66f43a240b500e874c6de23b.png" for 127.0.0.1        at Fri Sep 28 08:41:19 -0400 2012
2012-09-28 08:41:19 -0400 INFO: Served asset /pokervane_128-ade771fc66f43a240b500e874c6de23b.png - 200 OK (0ms)
2012-09-28 08:41:19 -0400 INFO: cache error: can't dump hash with default proc
org/jruby/RubyMarshal.java:101:in `dump'
/Users/mark/.rvm/gems/jruby-1.6.8/gems/actionpack-3.2.6/lib/action_dispatch/http/rack_cache.rb:25:in `write'
/Users/mark/.rvm/gems/jruby-1.6.8/gems/rack-cache-1.2/lib/rack/cache/metastore.rb:83:in `store'
/Users/mark/.rvm/gems/jruby-1.6.8/gems/rack-cache-1.2/lib/rack/cache/context.rb:267:in `store'
/Users/mark/.rvm/gems/jruby-1.6.8/gems/rack-cache-1.2/lib/rack/cache/context.rb:259:in `fetch'
/Users/mark/.rvm/gems/jruby-1.6.8/gems/rack-cache-1.2/lib/rack/cache/context.rb:185:in `lookup'
/Users/mark/.rvm/gems/jruby-1.6.8/gems/rack-cache-1.2/lib/rack/cache/context.rb:66:in `call!'
/Users/mark/.rvm/gems/jruby-1.6.8/gems/rack-cache-1.2/lib/rack/cache/context.rb:51:in `call'
/Users/mark/.rvm/gems/jruby-1.6.8/gems/railties-3.2.6/lib/rails/engine.rb:479:in `call'
/Users/mark/.rvm/gems/jruby-1.6.8/gems/railties-3.2.6/lib/rails/application.rb:220:in `call'
file:/Users/mark/.rvm/gems/jruby-1.6.8/gems/jruby-rack-1.1.10/lib/jruby-rack-1.1.10.jar!/rack/handler/servlet.rb:22:in `call' 
```

我的应用程序不使用活动记录（我在创建它时使用了 --skip-active-record）。为了排除这个事实是相关的，我制作了我的应用程序的副本，添加回：

```
require active_record/railtie 
```

到 application.rb，并创建了一个数据库。这并没有摆脱错误。

有没有人建议我可以做些什么来摆脱这个错误（当然，除了关闭缓存）。

# java - 当我使用泛型方法时抛出类转换异常

> ID：12640457
> 
> 赞同：2
> 
> 时间：2012-09-28T12:55:41.903
> 
> 标签：java, arrays, exception, generics, classcastexception

所以，我正在为我正在研究的平台物理系统使用 2D 数组。不幸的是，由于各种原因，二维数组需要泛型类型。

我正在使用一些 java 集合（准确地说是链表）动态构建表面，然后使用一些技巧将它们转换为 2D 数组。这目前有效，给了我适当的 2D 通用数组：*

```
LinkedList<PhysSurface<P>> leftSurfaces = new LinkedList<PhysSurface<P>>();
LinkedList<PhysSurface<P>> rightSurfaces = new LinkedList<PhysSurface<P>>();
LinkedList<PhysSurface<P>> topSurfaces = new LinkedList<PhysSurface<P>>();
LinkedList<PhysSurface<P>> bottomSurfaces = new LinkedList<PhysSurface<P>>();

// Add surfaces to the lists

GenericArray<PhysSurface<P>[]> base = new GenericArray<PhysSurface<P>[]>(4);
PhysSurface<P>[][] surfaces = base.elements();
surfaces[0] = leftSurfaces.toArray(new GenericArray<PhysSurface<P>>().elements());
surfaces[1] = rightSurfaces.toArray(new GenericArray<PhysSurface<P>>().elements());
surfaces[2] = topSurfaces.toArray(new GenericArray<PhysSurface<P>>().elements());
surfaces[3] = bottomSurfaces.toArray(new GenericArray<PhysSurface<P>>().elements()); 
```

但是，当我尝试将这一切都放入这样的通用静态方法中时：

```
@SuppressWarnings("unchecked")
public static <T> T[][] to2DArray(Collection<T>... collections)
{
    GenericArray<T[]> base = new GenericArray<T[]>(collections.length);
    T[][] array = base.elements();
    for(int i = 0; i < collections.length; i++)
        array[i] = collections[i].toArray(new GenericArray<T>().elements());
    return array;
} 
```

然后我这样调用方法：

```
PhysSurface<P>[][] surfaces = GenericsUtils.to2DArray(leftSurfaces, rightSurfaces, topSurfaces, bottomSurfaces); 
```

然后一切都崩溃了，给了我一个 ClassCastException，说它不能将类型 Object 转换为类型 PhysSurface。堆栈跟踪在这里：

```
Exception in thread "main" java.lang.ClassCastException: [[Ljava.lang.Object; cannot be cast to [[Lcom.meg.utils._2D.platformer.phys.environment.surface.PhysSurface;
    at com.meg.chaos_temple.test.world.PhysTestWorld$TestMap.<init>(PhysTestWorld.java:487)
    at com.meg.chaos_temple.test.world.PhysTestWorld$TestPlayer.<init>(PhysTestWorld.java:245)
    at com.meg.chaos_temple.test.world.PhysTestWorld.<init>(PhysTestWorld.java:95)
    at com.meg.chaos_temple.main.ChaosDebug.createWorld(ChaosDebug.java:72)
    at com.meg.jrabbit.engine.main.BaseGame.start(BaseGame.java:56)
    at com.meg.jrabbit.engine.loop.Loop.run(Loop.java:44)
    at com.meg.jrabbit.engine.main.BaseGame.run(BaseGame.java:40)
    at com.meg.jrabbit.engine.main.StandardGame.run(StandardGame.java:85)
    at com.meg.chaos_temple.main.ChaosDebug.main(ChaosDebug.java:19) 
```

据我所知，泛型方法没有使用泛型类型 T，而是默认创建一个 Object[][] 并在它返回时尝试强制转换。如果这是正在发生的事情，为什么在放入静态方法时这不起作用？如果不是，那到底是怎么回事？

* * *

*   （GenericArray 是一个自定义类，它使用可变长度参数来绕过制作泛型数组的常见障碍，然后包装结果。实际的构造函数是 GenericArray(T...elements)。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T14:24:43.997

不幸`T[][] array`的是，与`Object[][] array`运行时相同。泛型类型参数将在运行时删除；只有编译器知道它。

解决方案是传递对象的类：`Class<T>`.

```
import java.reflect.Array;

...

public static <T> T[][] to2DArray(Class<T> klazz, Collection<T>... collections)
{
    T[][] array = (T[][]) Array.newInstance(klazz, collections.length,
                                                   collections[0].size());
    //...
        array[i] = (T[]) Array.newInstance(klazz, collections[i].size());
    return array;
} 
```

Array.newInstance 的强制转换对于多维结果是必要的。没有了`@SuppressWarnings("unchecked")`！

而不是通过`collections[0].size()`它可能就足够了通过`0`。

# c# - 多个应用程序使用c#同时访问一个xml文件

> ID：12640459
> 
> 赞同：-3
> 
> 时间：2012-09-28T12:55:55.993
> 
> 标签：c#

我面临“同时从 2 个不同的应用程序访问一个 xml 文件”的问题。但它显示错误代码是“访问被拒绝，因为另一个进程正在使用该文件”。我应用了所有锁定方法，但没有用（同样的错误）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T13:00:25.393

`FileShare`在实例化底层时设置正确的枚举值`FileStream`允许您控制它。

参考：http: [//msdn.microsoft.com/en-us/library/system.io.fileshare.aspx](http://msdn.microsoft.com/en-us/library/system.io.fileshare.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T13:01:25.957

即使两个应用程序可以同时写入同一个文件，该文件也会损坏。我建议您改用数据库。

# memcached - Memcached 上的清漆缓存

> ID：12640460
> 
> 赞同：0
> 
> 时间：2012-09-28T12:56:11.303
> 
> 标签：memcached, varnish

我想知道是否可以使用 memcached 作为 Varnish 缓存的默认存储。在网上搜索我找到了[https://github.com/sodabrew/libvmod-memcached](https://github.com/sodabrew/libvmod-memcached)但到目前为止我发现的示例只是使用 VCL 规则手动存储/检索 memcached 上的内容。

我正在寻找的是 memcached 作为 Varnish 的默认存储，就像我们今天使用文件/内存一样。

有没有办法做到这一点？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T18:59:17.747

请查看 Varnish 的[架构文档](https://www.varnish-cache.org/trac/wiki/ArchitectNotes)。您可以看到设计者对后端有特定的想法（全部在内存中，让内核决定交换/磁盘的内容）。Memcache 并不适合那里。你能解释一下为什么 Varnish as-is 是不够的，你想让 memcache 作为 varnish 的后端吗？

如果您想要基于 memcache 的前端缓存，可能还有其他解决方案，或者您可以编写一个。我不会仅仅为 VCL 语言选择 Varnish，因为我认为它是一种完成正确缓存的复杂语言。

# mysql - 计算并最小化行大小以绕过有效的 MySQL 列限制

> ID：12640466
> 
> 赞同：1
> 
> 时间：2012-09-28T12:56:29.410
> 
> 标签：mysql

我已经阅读了对有多少列太多的问题的[更细致入微的回答](https://stackoverflow.com/questions/1473996/mysql-how-many-columns-is-too-many)，并想提出跟进。

我继承了一个相当混乱的项目（一个调查框架），但有人可能会争辩说数据库设计实际上是正确规范化的，即一个人的属性与问题的数量一样多。
我不会在辩论中为这个概念辩护，但更紧迫的一点是我的时间非常有限，我正在努力帮助这个框架的用户，我现在能想到的最快解决方法是减少行大小. 我怀疑我是否有能力在我拥有的时间内更改数据库模型。

现在的列数是 4661，但他们有望将其减少到至少 3244，可能更少（通过减少实际问题数）。硬列限制是 4096，但现在我什至没有成功添加 2500 列，大概是因为行大小限制为 65,535 字节。

但是，当我计算行大小时，我最终得到的值要低得多，因为几乎所有列都是 TINYINT（调查响应范围为 1-12）。它甚至不适用于 2000 个 TINYINT（[一个失败的示例查询](https://gist.github.com/3799625)）。

使用[文档中给出的公式，](http://dev.mysql.com/doc/refman/5.0/en/column-count-limit.html)我得到 4996 字节或更少。

```
column.lengths = tinyints * 1
null.columns = length(all.columns)
variable.lengths.columns = 0
(row.length = 1+
    (column.lengths)+ 
    (null.columns + 7)/8+ 
    (variable.lengths.columns)
)
## 4996 
```

我在该行长度计算中误解了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T14:48:03.347

我忽略了这[一段](http://dev.mysql.com/doc/refman/5.0/en/column-count-limit.html)

> 因此，使用长列名可以减少列的最大数量，包括 ENUM 或 SET 列，或者使用列或表注释。

我有很长的列名，用序列号替换它们可以让我有更多的列（约 2693），我必须看看增加是否足够。我不知道它们是如何保存的，大概是作为字符串，所以也许我可以使用字母进一步减少它们。

# c++ - C++ 继承的复制构造函数调用？

> ID：12640468
> 
> 赞同：7
> 
> 时间：2012-09-28T12:56:37.710
> 
> 标签：c++, constructor, copy, copy-constructor

我有从 A 类派生的 B 类。我调用了自己为 B 类的对象实现的复制构造函数。我还为自己实现了 A 类的构造函数。

当我为 B 类调用复制构造函数时，是否会自动调用此复制构造函数？或者如何做到这一点？这是好方法吗：

```
A::A(A* a)
{
    B(a);
    // copy stuff
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-28T13:00:03.503

您可以使用构造函数初始化列表来执行此操作，如下所示：

```
B::B(const B& b) : A(b)
{
    // copy stuff
} 
```

我对语法进行了相当多的修改，因为您的代码没有显示复制构造函数，并且与您的描述不符。

不要忘记，如果您自己实现复制构造函数，您应该遵循[三规则](http://en.wikipedia.org/wiki/Rule_of_three_%28C++_programming%29)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-28T13:03:10.803

复制构造函数具有签名：

```
A(const A& other)  //preferred 
```

或者

```
A(A& other) 
```

你的是一个转换构造函数。除此之外，您需要显式调用基类的复制构造函数，否则将调用默认构造函数：

```
B(const B& other) { } 
```

相当于

```
B(const B& other) : A() { } 
```

即不会自动调用来自 A 类的复制构造函数。你需要：

```
B(const B& other) : A(other) { } 
```

# python - 跨所有模型共享事件处理程序

> ID：12640469
> 
> 赞同：1
> 
> 时间：2012-09-28T12:56:37.947
> 
> 标签：python, sqlalchemy

我试图在我的所有模型（时间戳）中共享一个简单的功能，并采用 SQLA 文档中描述的“增强基础”方法。到目前为止，我这样做了：

```
import sqlalchemy as sa
from datetime import datetime as dt

class EntityBase(object):

    @declared_attr
    def __tablename__(cls):
        return cls.__name__.lower()

    id = sa.Column(sa.Integer, primary_key=True)
    last_update = sa.Column(sa.DateTime, default=dt.utcnow())

def update_entity(mapper, connection, target):
    target.last_update = dt.utcnow()

Entity = declarative_base(cls=EntityBase)

sa.event.listen(Entity, 'before_insert', update_entity)
sa.event.listen(Entity, 'before_update', update_entity) 
```

我所有的模型都是从`Entity`类派生的。但在运行时我得到`sqlalchemy.orm.exc.UnmappedClassError: Class 'sqlalchemy.ext.declarative.Base' is not mapped`. 我究竟做错了什么？

**更新** 我通过做简单的预处理绕过了这个问题，如下所示：

```
def setupEntities():
    ...
    for cls in Entity.__subclasses__():
        listen(cls, 'before_insert', update_entity)
        listen(cls, 'before_update', update_entity)
    ... 
```

...但我想听听正确的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T14:42:18.023

有趣的是，您在上面所做的方式可能*应该*有效。这会很方便。所以我为那个[http://www.sqlalchemy.org/trac/ticket/2585](http://www.sqlalchemy.org/trac/ticket/2585)添加了一张票。

目前，您可以这样做的一种方法是为新映射设置一个事件侦听器以及您的 Base：

```
Entity = declarative_base(cls=EntityBase):

from sqlalchemy.orm import mapper
@event.listens_for(mapper, 'mapper_configured')
def set_events(mapper, class_):
   if issubclass(class_, Entity):
        listen(class_, 'before_update', update_entity)
        listen(class_, 'before_insert', update_entity) 
```

事实上，如果我为#2585 实现该功能，我可能也必须这样做非常相似。

# android - Android：在 AsyncTask 上获取 RuntimeException

> ID：12640470
> 
> 赞同：1
> 
> 时间：2012-09-28T12:56:53.150
> 
> 标签：android, android-emulator, android-asynctask, runtimeexception

在代码中，我尝试使用 http 客户端从 Web 服务中读取数据。然后我想将http响应的响应短语写入文本视图。UI 是通过 onPostExecute() 访问的，所以我不知道为什么会出现这个异常。

这是代码：

```
public class CustomersScreen extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.customersscreen);
}

public void LoginClicked(View view) {
    new Get_data().execute("http://localhost:51982/WcfDataService1.svc/Genre");
}

private class Get_data extends AsyncTask <String, Void, String> {

    @Override
    protected String doInBackground(String... url) {
        //InputStream instream = null;
        HttpClient httpclient = new DefaultHttpClient();
        HttpGet request = new HttpGet(url[0]);
        HttpResponse response = null;
        try {
            response = httpclient.execute(request);
        } catch (ClientProtocolException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        String phrase = response.getStatusLine().getReasonPhrase();

        return phrase;
    }

    @Override
    protected void onPostExecute(String phrase) {
        TextView t = (TextView) findViewById(R.id.textView3);
        t.setText(phrase);
    }

} 
```

}

和日志猫：

```
09-28 09:43:34.239: E/AndroidRuntime(679): FATAL EXCEPTION: AsyncTask #1
09-28 09:43:34.239: E/AndroidRuntime(679): java.lang.RuntimeException: An error occured while executing doInBackground()
09-28 09:43:34.239: E/AndroidRuntime(679):  at android.os.AsyncTask$3.done(AsyncTask.java:278)
09-28 09:43:34.239: E/AndroidRuntime(679):  at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
09-28 09:43:34.239: E/AndroidRuntime(679):  at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
09-28 09:43:34.239: E/AndroidRuntime(679):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
09-28 09:43:34.239: E/AndroidRuntime(679):  at java.util.concurrent.FutureTask.run(FutureTask.java:137)
09-28 09:43:34.239: E/AndroidRuntime(679):  at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:208)
09-28 09:43:34.239: E/AndroidRuntime(679):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
09-28 09:43:34.239: E/AndroidRuntime(679):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
09-28 09:43:34.239: E/AndroidRuntime(679):  at java.lang.Thread.run(Thread.java:856)
09-28 09:43:34.239: E/AndroidRuntime(679): Caused by: java.lang.NullPointerException
09-28 09:43:34.239: E/AndroidRuntime(679):  at com.test.CustomersScreen$Get_data.doInBackground(CustomersScreen.java:46)
09-28 09:43:34.239: E/AndroidRuntime(679):  at com.test.CustomersScreen$Get_data.doInBackground(CustomersScreen.java:1)
09-28 09:43:34.239: E/AndroidRuntime(679):  at android.os.AsyncTask$2.call(AsyncTask.java:264)
09-28 09:43:34.239: E/AndroidRuntime(679):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
09-28 09:43:34.239: E/AndroidRuntime(679):  ... 5 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T13:02:15.207

```
Caused by: java.lang.NullPointerException
09-28 09:43:34.239: E/AndroidRuntime(679):  at com.test.CustomersScreen$Get_data.doInBackground(CustomersScreen.java:46) 
```

你在班级的第 46 行有一个 NPE。发布的代码显然缺少一些行，但我想如果出现任何问题，`String phrase = response.getStatusLine().getReasonPhrase();`就是这一行`response``null``httpclient.execute(request);`

因此，只需将该行也放入块中，并在方法的末尾`try/catch`添加一个简单的代替。`return null;`

# ruby - 在 ruby 中使用什么函数来模拟 for

> ID：12640471
> 
> 赞同：2
> 
> 时间：2012-09-28T12:56:53.283
> 
> 标签：ruby, for-loop

我需要一个可以模拟 C++`for`语句的函数。我想要一些可以给出起点、终点和另一个变量的东西，这些变量将说明一次增加多少。

例如，如果我告诉它从 开始`10`、结束`1`并一次递增`2`，它将生成`10, 8, 6, 4, 2`.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-28T13:03:41.103

你想要`step`。它是这样使用的：

```
10.step(1, -2) do |x|
    puts x
end 
```

这导致：

```
10
8
6
4
2 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-28T13:01:56.867

```
1.9.3p125 :007 > (1..10).step(2).reverse_each { |i| p i }
10
8
6
4
2 
```

# android - 为 ContentProvider 查询指定限制/偏移量

> ID：12640480
> 
> 赞同：19
> 
> 时间：2012-09-28T12:57:17.133
> 
> 标签：android, android-contentprovider

我正在尝试让我的 ContentResolver 运行此查询：

```
select * from myTable limit 1 offset 2 
```

ContentResolver 中唯一的**查询**方法是：

```
resolver.query(uri, projection, selection, selectionArgs, sortOrder); 
```

我试过了：

```
final Cursor c = resolver.query(
        MyTable.CONTENT_URI,
        MyTable.PROJECTION,
        " ? ?",
        new String[] {"1", "2"},
        null); 
```

这只会引发 IllegaLArgumentException。实现这一目标的正确方法是什么？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-09-28T13:31:27.923

我将 LIMIT 子句放在 sordOrder 参数中，我也看到其他人做过同样的事情，但不确定它是否 100% 正确：

```
final Cursor c = resolver.query(
        MyTable.CONTENT_URI,
        MyTable.PROJECTION,
        null,
        null,
        " limit 1 offset 2"); 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-11-21T17:53:13.360

*我使用语法 'limit = offset* , *limit* '将 limit 子句作为查询参数：

```
Cursor c = context.getContentResolver().query(
        MyTable.CONTENT_URI.buildUpon().encodedQuery("limit="+offset+","+limit).build(),
        MyTable.PROJECTION,
        null,
        null,
        null); 
```

它至少适用于 MediaStore uris。小心不要对“，”进行编码，否则它将不起作用。

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2014-06-05T08:39:54.900

如果您提供内容提供者，那么您可以使用[`android.net.Uri.Builder#appendQueryParameter`](http://developer.android.com/reference/android/net/Uri.Builder.html#appendQueryParameter(java.lang.String,%20java.lang.String))提供限制和偏移量作为查询参数，内容提供者可以在构建查询时使用这些参数。

```
public class MyProvider extends ContentProvider {
    public static final String QUERY_PARAMETER_LIMIT = "limit";
    public static final String QUERY_PARAMETER_OFFSET = "offset";

    public Cursor query(Uri uri, ...) {
        String limit = uri.getQueryParameter(QUERY_PARAMETER_LIMIT);
        String offset = uri.getQueryParameter(QUERY_PARAMETER_OFFSET);

        SQLiteQueryBuilder builder = new SQLiteQueryBuilder();

        // set the table name,...

        // leaving handling of null conditions as an exercise to the reader.
        String limitString = offset + "," + limit;

        Cursor c = qb.query(db, projection, selection, selectionArgs, null, null, sortOrder, limitString);

        //...

        return c;
    }
} 
```

在构建查询时：

```
private static final Uri CONTENT_URI = MyProvider.CONTENT_URI.buildUpon()
        .appendQueryParameter(MyProvider.QUERY_PARAMETER_LIMIT,
                    String.valueOf(limit))
        .appendQueryParameter(MyProvider.QUERY_PARAMETER_OFFSET,
                    String.valueOf(offset))
        .build(); 
```

请注意，[`android.net.Uri.Builder#appendQueryParameter`](http://developer.android.com/reference/android/net/Uri.Builder.html#appendQueryParameter(java.lang.String,%20java.lang.String))对值进行编码以防止 sql 注入。

### 参考：

1.  [http://laviefrugale.blogspot.com/2012/01/using-limit-with-android-contentprovider.html](http://laviefrugale.blogspot.com/2012/01/using-limit-with-android-contentprovider.html)
2.  [http://www.sqlite.org/lang_select.html](http://www.sqlite.org/lang_select.html)
3.  [https://stackoverflow.com/a/12476458/1523910](https://stackoverflow.com/a/12476458/1523910) + [@eocanha 的回答](https://stackoverflow.com/a/13499177/1523910)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-09T06:44:01.043

当我尝试使用以下限制字符串 [参见下面的限制字符串] 时：

```
 StringBuilder sbLimit = new StringBuilder().append(" ").append(i_offset).append(" , ").append(i_limit);
String limit = sbLimit .toString() 
```

结合选择查询、排序和分组，这给了我很好的结果。

# objective-c - UIButton CustomButton图像未出现

> ID：12640481
> 
> 赞同：1
> 
> 时间：2012-09-28T12:57:17.260
> 
> 标签：objective-c, ios, xcode

我有一个带有图像的自定义按钮。我不得不更改图像，因此我删除了旧图像，并将具有相同名称的新图像放入我的项目中。但是现在，该按钮没有出现任何图像，但是如果我单击该按钮，它就可以正常工作。这是代码：

```
//before @implementation 
static NSString *kdetailsIcon = @"details.png";

//in a helper method
UIButton *detailsButton = [UIButton buttonWithType:UIButtonTypeCustom];
[detailsButton setFrame:CGRectMake(276, 8, 44, 44)];
[detailsButton setImage:[UIImage imageNamed:kdetailsIcon] forState:UIControlStateNormal];
[detailsButton addTarget:self action:@selector(showDetailView) forControlEvents:UIControlEventTouchUpInside];
[infoBar addSubview:detailsButton]; 
```

我认为问题实际上是 xcode 而不是我的代码，但我尝试删除图像文件并重新添加它们，清理项目，在编译之前从手机中删除应用程序，删除派生数据，我能想到的一切的。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T13:06:22.520

-首先在您的项目中进行清洁，单击产品/清洁。

- 从 Xcode 中的项目目录中删除此图像。他们将此图像添加到您的粘贴项目中。再次转到 XCode，在您的项目中转到 File / Add Files to project_Name。

搜索并选择您的图像和成功。如果不成功，请再次关闭/打开项目。如果不成功，您的图像名称/扩展名又写错了！

# android - Android 按钮名称 - 它们的实际含义是什么？

> ID：12640482
> 
> 赞同：1
> 
> 时间：2012-09-28T12:57:17.447
> 
> 标签：android, button, dialog

这只是一个简单的语义问题，但我在任何地方都找不到答案！我们在对话框中有 BUTTON_POSITIVE、BUTTON_NEGATIVE 和 BUTTON_NEUTRAL，但是正面、负面和中性按钮的具体含义是什么？

如果我有一个“是/否”警报对话框，并且我希望“否”成为默认值，那是哪个？或者，默认按钮的概念可能不适用于 Android。（例如在 PC 上的 Visual C++ 中，默认按钮是按回车键激活的按钮。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T13:05:10.747

[http://developer.android.com/guide/topics/ui/dialogs.html#AlertDialog](http://developer.android.com/guide/topics/ui/dialogs.html#AlertDialog)

注意：您只能将每种按钮类型中的一种添加到 AlertDialog。也就是说，您不能拥有多个“肯定”按钮。这将可能的按钮数量限制为三个：正面、中性和负面。**这些名称在技术上与按钮的实际功能无关，但应该可以帮助您跟踪哪个按钮做了什么。**

您定义哪个按钮具有哪个功能和名称。

例子：

```
.setPositiveButton("Yes", new DialogInterface.OnClickListener() {
           public void onClick(DialogInterface dialog, int id) {
                MyActivity.this.finish();
           }
       }) 
```

如果您真的愿意，可以将肯定按钮设置为“否”。该链接显示了更详细的代码示例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T13:05:40.767

如果您在 UI 指南中查看[添加按钮，](http://developer.android.com/guide/topics/ui/dialogs.html#AddingButtons)它会说明

> “这些名称在技术上与按钮的实际功能无关，但应该可以帮助您跟踪哪个按钮做了什么。”

因此，您可以创建一个 onCLickListener 来取消您对按钮的操作并将其设置为积极按钮 - 它只会让阅读代码的人感到困惑。

* * *

此外，是的，没有默认按钮的概念，因为 Android 应用程序目标的许多设备都没有键盘。您可以以不同的方式突出显示一个按钮，以引导用户走向它。此外，您可以在 Dialog 中覆盖 onKey 并监听[KeyCode_Enter](http://developer.android.com/reference/android/view/KeyEvent.html#KEYCODE_ENTER)，以便对于具有硬件键盘的设备，您可以正常运行

# php - 服务器迁移后如何更改 Magento 中的语言？

> ID：12640490
> 
> 赞同：1
> 
> 时间：2012-09-28T12:57:36.680
> 
> 标签：php, magento, date, translation, locale

我的 Magento 1.6.2 是用法语配置的。由于我已经移动了我的 Magento 安装，一个模块，使用语言环境配置变量来显示星期和月份，以英语而不是法语显示日期和月份。

该模块的开发人员说它正在这里检索日期和月份：

```
<?php
class CJM_CustomStockStatus_Helper_Data extends Mage_Core_Helper_Abstract
{
    public function getHolidays()
    {
        $holidays =     explode(',',Mage::getStoreConfig('custom_stock/shipoptions/holidays', Mage::app()-    >getStore()->getId()));
        $holidays = array_filter(array_map('trim', $holidays));
        $theDates =     explode(',',Mage::getStoreConfig('custom_stock/shipoptions/movingholidays', Mage::app()-    >getStore()->getId()));
        $theDates = array_filter(array_map('trim', $theDates));
        $year = date('o', Mage::getModel('core/date')->timestamp(time()));
        $allDates = array();
        $formattedDates = array();
        ... 
```

我不明白为什么自从我移动服务器后这个模块以英文显示内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T22:45:21.733

使用`setlocale(LC_ALL, 'fr_FR');`并查看是否可以解决问题。

# magento - 将magento api用于电子商务网站

> ID：12640491
> 
> 赞同：4
> 
> 时间：2012-09-28T12:57:37.850
> 
> 标签：magento, e-commerce

我是magento的初学者，正在使用magento创建一个网站。我注意到 magento 有很多 api，它们公开了我创建电子商务网站所需的所有功能。所以，我想使用magento的api来获取数据，但是单独开发UI而不依赖magento。我发现了很多通过 magento 主题开发网站的参考资料，但不是那些 UI 是在单独的 MVC 中开发并且纯粹使用 magento 作为服务层的参考资料。我的方法有什么问题/问题吗？

编辑：我对 apis 中的 db 性能问题以及外部缓存如何缓解该问题有了很大的了解，但我仍然不明白将 magento 用作服务层（即通过使用 magento 的 api 为网站加油） ，他们还有其他问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T15:37:16.977

Magento API 很慢，尝试使用它运行站点时会遇到严重的性能问题。

由于 EAV 模型的复杂性，您可能会发现仅通过 API 管理产品很困难。

您对使用 Magento 自己的前端有什么特别的顾虑吗？一开始会让人望而生畏，但一旦你了解了布局系统，它实际上是非常强大且可定制的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T19:38:31.200

以下是我们克服 Magento API 缓慢的方法：

1.  在 J2EE 中创建了一个 Web 服务提供者，Spring MVC 充当 Magento 和最终用户之间的代理。
2.  J2EE Web 服务提供者公开了 Magento 拥有的几乎所有 API，但也支持带有 REST 的 JSON 以及 SOAP 和 RPC。
3.  J2EE Web 服务提供者使用基于文档的数据库 (MongoDB) 在 MongoDB 中存储产品目录的快照。
4.  J2EE Web 服务提供者使用本地 MongoDB 缓存来快速提供数据，而无需运行任何昂贵的 SQL 查询。
5.  为了避免脏缓存问题，我们在 Magento Admin 中创建了一个挂钩，以便在 Magento 中的数据更改时将数据推送到 MongoDB。

这对某些人来说可能听起来有点过头了，但我们已经能够在没有任何缓慢的情况下实现相当高的吞吐量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T15:24:58.263

从技术上讲，可以仅通过 API 运行站点。

您可能面临的问题是一个实际问题，而不是花时间尝试学习所有 API 调用，您可以学习如何在 Magento 中实现当前的 UI。

这种方法的优点是您还将更好地了解 Magento 在内部的工作方式，从而允许您利用它的功能来满足您独特的业务需求。

另一个问题是，当使用 API 时，您对事物的处理/计算方式的控制较少，而在 Magento 本身工作时，对细节的控制较多。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-28T20:30:24.980

通过 SOAP 和 XMLRPC 访问 Magento 的 API 时，我经常看到“会话过期”问题。我所有的调用都需要异常处理以避免停止执行。我想在 API 之上构建所有东西时，仅此一项就会造成一场噩梦。

您将获得的最佳答案是在开始编码之前对 API进行[负载测试。](http://en.wikipedia.org/wiki/Load_testing)广泛记录测试并查找错误。如果您在正常情况下看到错误，则应该回答您的问题。即使您找到说明可以执行您正在尝试的操作的文档，您仍然需要调整 API 以在运行商店所需的负载下正常工作。

在投入数小时进行开发之前了解您所面临的问题会很好。

# grails - Grails 按环境执行代码

> ID：12640492
> 
> 赞同：5
> 
> 时间：2012-09-28T12:57:46.040
> 
> 标签：grails

有没有办法做`Config.groovy`文件的工作，但是在代码执行期间......
像：

```
类控制器{
    定义方法（）{
        与环境{
            发展{
               println '这只是在开发中执行'
            }
            生产 {
               log.debug '这只是在生产中执行'
            }
         }
     }
}

```

我知道我可以使用 达到相同的效果`if (Environment.current == 'development')`，但是那个sintax有什么东西吗？？？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-28T13:27:22.463

发现[这篇博客文章](http://mrhaki.blogspot.co.uk/2010/05/grails-goodness-execute-code-for.html)显示了一种可能的解决方案[`Environment.executeForCurrentEnvironment`](http://grails.org/doc/2.1.0/api/grails/util/Environment.html#executeForCurrentEnvironment%28groovy.lang.Closure%29)：

```
import grails.util.Environment

class AController {
  def method() { 
    Environment.executeForCurrentEnvironment {
      development {
        println 'This is execute just on development'
      }
      production {
        log.debug 'This is execute just on production'
      }
    }
  }
} 
```

# c# - 编写通用 WCF 服务客户端配置/端点检查器？

> ID：12640503
> 
> 赞同：2
> 
> 时间：2012-09-28T12:58:50.440
> 
> 标签：c#, wcf

我有一个使用许多服务的客户端应用程序。当服务关闭或配置不正确时，这并不总是很明显。我拥有大部分服务的服务端代码和托管，但不是全部。这是一个真正的客户端代理混合包 - 不同的绑定 (basichttp/wshttp/nettcp)，一些是使用 svcutil.exe 生成的，而另一些是使用 ChannelFactory 以编程方式制作的，其中合约在一个公共程序集中。但是，我始终可以访问地址、绑定和合同。

我想在我的客户端应用程序中有一个组件，它可以对绑定/端点配置和服务可用性进行基本检查（显示在客户端的某些诊断面板中）。至少我只想知道在配置的地址上有一个端点，更好的是找出端点是否响应并支持客户端尝试使用的绑定。

我尝试使用谷歌搜索并惊讶于我没有找到一个示例（也许已经是一个不好的迹象），但我认为这不会那么难，我所要做的就是创建一个客户端通道并尝试 open() 和close() 捕获发生的任何异常，并在必要时中止()。

我错了 - 特别是对于使用 BasicHttpBinding 的客户端，我可以指定任何端点地址，并且能够毫无例外地打开和关闭。

这是我的实现的精简版本，实际上我返回的是关于异常类型和端点地址的更详细的信息，但这是基本结构。

```
public class GenericClientStatusChecker<TChannel> : ICanCheckServiceStatus where TChannel : class
{
    public GenericClientStatusChecker(Binding binding, EndpointAddress endpoint)
    {
        _endpoint = endpoint;
        _binding = binding;
    }

    public bool CheckServiceStatus()
    {
        bool isOk = false;
        ChannelFactory<TChannel> clientChannelFactory = null;
        IClientChannel clientChannel = null;

        try
        {
            clientChannelFactory = new ChannelFactory<TChannel>(_binding, _endpoint);
        }
        catch
        {
            return isOk;
        }

        try
        {
            clientChannel = clientChannelFactory.CreateChannel() as IClientChannel;
            clientChannel.Open();
            clientChannel.Close();
            isOk = true;
        }
        catch
        {
            if (clientChannel != null)
                clientChannel.Abort();
        }
        return isOk;            
    }
}

[Test]
public void CheckServiceAtNonexistentEndpoint_ExpectFalse()
{
    var checker = new GenericClientStatusChecker<IDateTimeService>(new BasicHttpBinding(), new Endpointaddress("http://nonexistenturl"));
    // This assert fails, because according to my implementation, everything's ok
    Assert.IsFalse(checker.CheckServiceStatus());
} 
```

我还尝试了一种类似的技术，使用一个虚拟的 testclient 类来实现 ClientBase 并获得相同的结果。我想如果我知道我的所有服务合同都实现了一个通用的 CheckHealth() 方法，那可能是可能的，但是由于某些服务不在我的控制范围内，我什至不能这样做。

那么，是否有可能编写这样一个简单的通用通用服务检查器？如果是这样怎么办？（如果没有，为什么不呢？）

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T16:53:35.583

你看过[WCF 发现](http://msdn.microsoft.com/en-us/library/dd456791.aspx)吗？

> WCF Discovery 允许客户端根据不同的条件搜索服务，包括合同类型、绑定元素、命名空间、范围和关键字或版本号。WCF Discovery 启用运行时和设计时发现。向您的应用程序添加发现可用于启用其他场景，例如容错和自动配置。

对于第一次尝试，您可以查询端点以查看它是否支持预期的合同。

最大的好处是您可以让客户端在运行时“发现”它想要与哪个服务通信。这消除了您可能习惯看到的许多客户端配置错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T13:01:34.853

您需要查看[SO-AWARE](http://www.google.com/url?sa=t&rct=j&q=soaware&source=web&cd=1&cad=rja&ved=0CB8QFjAA&url=http://www.tellagostudios.com/products/so-aware%25E2%2584%25A2&ei=GK9cUKT7HIWD0QGUvYCwDw&usg=AFQjCNECcwx6NYkqqRQUfVh3Cbw7LARn7w)。它是一个 Web 服务管理工具，可以在您的组织中管理基于 SOAP 或 REST WCF 的服务。此外，它还有一个测试工作台！

这里有几个视频也可以展示它：

*   [第1部分](http://channel9.msdn.com/Shows/Endpoint/endpointtv-Meet-SO-Aware-Part-1)
*   [第2部分](http://channel9.msdn.com/Shows/Endpoint/endpointtv-Meet-SO-Aware-Part-2)

换个角度来看，这太复杂了，以至于这些人以此为生，我不认为这是你想要自己真正建立的东西。

# java - 有没有办法在 Java 中获取应用程序目录？

> ID：12640511
> 
> 赞同：1
> 
> 时间：2012-09-28T12:59:12.610
> 
> 标签：java, command-line

这可能是不可能的，但我想我会问只是为了确定。我有一个批处理文件，它使用相对路径启动我的 java 应用程序。IE。我有：

应用程序\start.bat 应用程序\lib*.jar

我的应用程序在 Application 目录中创建了一个配置文件。我的批处理脚本使用相对路径指向 lib 目录 jar。这对我来说非常有效，因为我可以将程序移动到任何我想要的地方，它就会运行。但是现在我希望能够从命令行调用同一个应用程序，而不仅仅是从工作目录设置为应用程序的快捷方式。问题是我希望能够从命令行上的任何目录调用我的应用程序，但现在这不起作用，因为工作目录会有所不同。

我知道我总是可以在我的应用程序中为工作目录添加另一个参数，但是我仍然必须创建一个批处理脚本，其中包含指向我的应用程序的硬编码路径。在 Java 中有没有办法解决这个问题，例如获取我的主 java 文件所在的目录在工作目录之上？也许有启动器应用程序？

我无法将我的应用程序捆绑为 jar，因为它会创建我希望与应用程序位于同一目录中的配置文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T13:09:58.680

考虑只更改 start.bat 中的当前目录：

```
@cd /d %~dp0
java ... 
```

这会将其更改为脚本所在的文件夹。

[如果需要， pushd/popd](http://en.wikipedia.org/wiki/Pushd_and_popd)命令也可用于保留当前目录以调用脚本。

或者`getClass().getProtectionDomain().getCodeSource().getLocation()`，可以从 java 中使用来获取 jar/classes 的路径。

配置路径系统属性还有与路径无关的方法：

```
java "-DconfigDir=%~dp0" ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T13:22:58.963

没有适用于所有情况的便携式解决方案。事实上，应用程序目录的概念并不一定有意义。例如，考虑使用 WebStart 启动的小程序和应用程序。

如果应用程序或安装目录的概念确实有意义，那么支持它的最简单方法是让应用程序的启动器/启动脚本通过应用程序特定`-D`属性将其传递给应用程序 Java 代码。

# extjs - 以extjs形式解码textarea框值

> ID：12640513
> 
> 赞同：0
> 
> 时间：2012-09-28T12:59:22.493
> 
> 标签：extjs

我必须解码我的文本框值。我正在使用下面的代码

```
{
   xtype: 'textareafield',
   id: 'Reason',
   itemId: 'Reason',
   width: 100,
   name: 'Reason',
   fieldLabel: 'Reason / Comments ',
   displayField: 'Reason',
   allowBlank: false,
   anchor: '100%',
   listeners:{
      afterrender:function(value) {
          //alert(value);
          var reason = Ext.getCmp('Reason').getValue();
          //alert(reason);
          if(reason!='') {
              var reas = Ext.decode(reason);
              Ext.getCmp('Reason').setValue(reas);
          }
      }
   }
} 
```

如果我在这里取消注释警报（值），它会在
警报（原因）中返回值并解码我的文本框值但是如果我
评论警报（值），它会在警报（原因）中返回空，
所以不会解码我的文本框值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T16:39:32.257

因为**[afterrender](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.form.field.TextArea-event-afterrender)**事件作为第一个参数返回一个引用。如果您键入以下内容，它将起作用：`alert(value.getValue())`

但是你真的应该看看**[API](http://docs.sencha.com/ext-js/4-1/#!/api/)** A textarea has not `displayField`all

# c# - 在单独的线程中使用 Progressbar 以便在两个不同的任务中同时运行

> ID：12640516
> 
> 赞同：-3
> 
> 时间：2012-09-28T12:59:46.113
> 
> 标签：c#, .net, desktop-application

我想同时运行两个功能。

第一个函数将计算我计算机中的文件总数，并将结果显示在一个 DatagridView 中。

而在第二个函数中，会根据文件总数改变一个进度条的值，也就是说当DatagridView中绑定所有文件时，进度条的值将设置为100。

我想同步这两个函数的工作，我正在使用两个线程但结果没有显示，发生了异常。

我应该怎么办 ？

我的代码是

```
 ThreadStart threadstatr = new ThreadStart(Function_1);
 ThreadStart threaProgress = new ThreadStart(Function_2);
 Thread thread = new Thread(threadstatr);
 Thread threadpro = new Thread(threaProgress);
 thread.Start();
 threadpro.Start();
 thread.Join();
 threadpro.Join();

void Function_2()
    {
        int coun = ((Convert.ToInt32(label1.Text)) / 100); //here label1 represents total no. of files
        for (int i = 0; i < coun; i++)
        {
            backgroundWorker1.ReportProgress(i);
        }
    } 
```

例外是“输入字符串的格式不正确。” 因为标签没有机会自我更新

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T14:10:38.567

嗯，它似乎比它需要的要复杂一些。使用 BackgroundWorker 应该使您能够完全避免原始 Thread 对象（ThreadStart 等）。

您有一个主应用程序/ UI 线程，您的进度条在其中被实例化。
您想使用 a`BackgroundWorker`来启动线程来完成工作 - 通过将您的工作（搜索文件）方法连接到`BackgroundWorker.DoWork`事件。
该方法可以使用方法将进度报告回 UI 线程`BackgroundWorker.ReportProgress`。`BackgroundWorker.ProgressChanged`您的 UI 线程可以通过处理事件来响应进度（增量进度控制） 。在创建 BackgroundWorker 时
不要忘记设置。`BackgroundWorker.WorkerReportsProgress = true`

您可以通过查看 BackgoundWorker 的文档来获得更多详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T23:28:25.583

不要重复另一个答案和我的评论，但您似乎没有在听。

放下线程。您的代码中没有 ThreadStart。

并且不要从后台读取 UI 控件。
传递数据：

```
backgroundWorker1.RunWorkerAsync(numberToCompute); 
```

使用后台工作者。

如果您愿意，这正是您所需要的。

[BackgroundWorker 类](http://msdn.microsoft.com/en-us/library/4852et58%28v=vs.100%29.aspx)

# mysql - 从 PHP5.3.13 命令行界面连接 MySQL 4.1

> ID：12640522
> 
> 赞同：0
> 
> 时间：2012-09-28T13:00:07.727
> 
> 标签：mysql, php, my.cnf, mysqlnd

> **可能重复：**
> [无法使用旧身份验证连接到 MySQL 4.1+](https://stackoverflow.com/questions/1575807/cannot-connect-to-mysql-4-1-using-old-authentication)

我发布这个问题是因为我找不到任何可行的解决方案。所以请见谅。

我正在使用 mysql 5.5.24 和 PHP 5.3.13（都来自 WAMP2 安装）

虽然我能够通过网络服务器从 php 脚本连接到数据库，但相同的脚本会出现以下错误。

> 无法连接：mysqlnd 无法使用旧的不安全身份验证连接到 MySQL 4.1+。请使用管理工具通过命令 SET PASSWORD = PASSWORD('your_existing_password') 重置密码。这将在 mysql.user 中存储一个新的、更安全的哈希值。如果此用户在 PHP 5.2 或更早版本执行的其他脚本中使用，您可能需要从 my.cnf 文件中删除 old-passwords 标志

这里有几件事我已经：

1.  我尝试通过 mysql 控制台更改密码。
2.  实现了特权。
3.  将 phpMyAdmin 的 config.ini.php 中的以下行从

    $cfg['Servers'][$i]['extension'] = ' **mysqli** ' 到

    $cfg['Servers'][$i]['extension'] = ' **mysql** '

无济于事。

错误信息是指这个版本的 mysql 中不存在的**my.cnf文件。**所以我认为它一定是**my.ini**，但没有提到旧密码。

我怎样才能让这个东西工作？

# spring - 如何在 Spring MVC 中解析 JSP 并保存到文件？

> ID：12640532
> 
> 赞同：0
> 
> 时间：2012-09-28T13:00:38.747
> 
> 标签：spring, jsp, spring-mvc

我有一些模板：带有 JSTL 标记和一些 EL 的 JSP 文件，并希望将它们解析并保存到 app 文件夹中的文件中，如下所示：

**模板.jsp**

```
<html>
...
<p>Hello ${ person.name }.</p>
... 
```

**模板控制器.java**

```
public void parse (Template template, Person person, Model model) {

  model.addAttribute (person);

  String jspFileAsString = template.parse (person, model);

  saveToFile (jspFileAsString);
} 
```

结果应该像**myapp/parsed-templates/template.html**

```
<html>
...
<p>Hello Michael.</p>
... 
```

我应该创建一个`ViewResolver`? 谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T14:03:50.487

JSP 呈现通常超出了`Spring MVC`请求处理的范围。我认为如果您创建自定义[过滤器](http://docs.oracle.com/javaee/6/api/javax/servlet/Filter.html)和模拟[HttpServletResponse](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletResponse.html)会更容易：

代替原始响应，`Spring MVC`将写入此模拟响应。然后，您必须将结果作为字符串获取并写入文件，最后也写入原始响应。请记住，您必须包含所有标题、状态代码等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T13:44:43.037

只需保存参数，然后再次调用控制器方法。它将是相同的，它有点像它的用途。

保存已解析的 jsp 页面生成的 html 似乎是个坏主意。

# cordova - 当我尝试使用运行 Android 2.3.4 的 HTC Thunderbolt 共享内容时，电子邮件正文中没有任何文字

> ID：12640534
> 
> 赞同：1
> 
> 时间：2012-09-28T13:00:40.917
> 
> 标签：cordova, htc-thunderbolt

当我尝试共享内容时，我的电子邮件正文中没有任何文字。

*   我正在使用运行 Android 2.3.4 的 HTC Thunderbolt。
*   但是，我在三星手机中没有遇到这个问题。

我已经完成了应用程序的编程`Phonegap`。是否需要更改任何设置，以便我可以通过电子邮件共享页面内容（使用 HTC 时）？

# php - 解码 AJAX 编码的 JSON 对象

> ID：12640537
> 
> 赞同：0
> 
> 时间：2012-09-28T13:00:45.587
> 
> 标签：php, javascript, ajax, json

这可能很容易，但我真的可以用 Ajax 和 JSON 的方式使用更聪明的人来提供帮助。我有 Javascript 函数将 Ajax 请求传递给 PHP 后端。我将一个 javascript 对象作为“request_parameters”后变量传递。当这出现在 PHP 上时，我可以导航它，但对象结构已被数组替换。相反，我希望对象结构保持完整，因此作为足够聪明的危险类型，我决定对对象进行 JSON 编码：

```
 request_parameters: JSON.encode( requestObj ); 
```

与只是

```
 request_parameters: requestObj; 
```

在 PHP 方面，我现在将其作为“request_parameters”变量（又名 $_POST['request_paramenters']）的值：

> {\"forms\":[{\"formName\":\"main-form\",\"formClass\":\"lg-form main-form\",\"formFields\":[{\" id\":\"activity-app_id\",\"name\":\"activity-app_id\",\"value\":\"0\",\"type\":\"hidden\", \"startingValue\":null},{\"id\":\"activity-start_time\",\"name\":\"activity-start_time\",\"value\":\"\",\ "type\":\"hidden\",\"startingValue\":null},{\"id\":\"min-duration\",\"name\":\"min-duration\",\ "class\":\"span1 form-ignore\",\"value\":\"50\",\"type\":\"text\",\"startingValue\":null},{\" ID\”：\”activity-duration\",\"name\":\"activity-duration\",\"value\":\"3000000\",\"type\":\"hidden\",\"startingValue\": null},{\"id\":\"运动距离\",\"名称\":\"运动距离\",\"class\":\"输入span1 left\",\"value\ ":\"25\",\"type\":\"text\",\"startingValue\":null},{\"id\":\"exercise-distance-uom\",\"name\ ":\"exercise-distance_uom\",\"value\":\"miles\",\"type\":\"hidden\",\"startingValue\":null},{\"id\": \"exercise-pace_average\",\"name\":\"exercise-pace_average\",\"value\":\"2\",\"type\":\"hidden\",\"startingValue\":null},{\"id\":\"wp_posts-post_content\",\"name\":\"wp_posts-post_content\",\"class\":\"span5\" ,\"value\":\"super fast\",\"type\":\"textarea\",\"startingValue\":null}]}],\"action\":\"went-running\ ",\"post_type\":\"练习\",\"primaryForm\":0}0}0}

好的，所以这显然是经过编码的，这样数据就可以作为 POST/GET 变量传递而不会发生坏事。很公平。我想我可以在 PHP 端通过在运行 json_decode 函数之前使用解码来解决这个问题。我第一次尝试：

```
$request_parameters = json_decode( urldecode($request_parameters) ); 
```

确信这将是一个赢家。没有。它没有给出错误，但 $request_parameters 似乎没有设置任何东西。好的，然后我有点发疯了，想……“嘿，也许 javascript 使用了 base64 编码”……这导致我：

```
$request_parameters = json_decode( base64_decode($request_parameters) ); 
```

坏朱朱。我会把它留在那里。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T13:08:08.820

尝试`json_decode(stripslashes($_POST['request_parameters']));`

您可能已`magic_quotes`启用。

[已编辑]

If you have got Magic Quotes enabled, check the link provided in the comment below and disable it. If you use `stripslashes` blindly and later change the server settings or move to a different server, the above code will break.

If however disabling Magic Quotes is not a possible option in your case, then use the below code for stripping the slashes from this particular post parameter.

```
if (get_magic_quotes_gpc()) {
  $request_parameters = stripslashes($_POST['request_parameters']);
}
$request_parameters = json_decode($request_parameters); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-09-28T13:03:02.577

`json_decode($_POST['request_parameters']);`应该是你所需要的。

# ruby-on-rails - 更新数据库中的记录会使记录无效？

> ID：12640538
> 
> 赞同：0
> 
> 时间：2012-09-28T13:00:47.333
> 
> 标签：ruby-on-rails, model, console, record, updating

所以，这让我发疯，我发现自己既不能自己回答这个问题，也不能通过阅读其他问题和答案来回答这个问题。

当我尝试更新通过 web 应用程序创建的数据库中的记录时，我无法更改记录的值。在这种情况下，用户填写了一个表单，然后应用程序应该更新不同模型中的几个字段。

一、形式：

```
<%= form_for(@game) do |g| %>
  <%= g.label :player_1 %>
  <%= g.text_field :player_1 %>

  <%= g.label :player_2 %>
  <%= g.text_field :player_2 %>

  <%= g.label :faction_1 %>
  <%= g.text_field :faction_1 %>

  <%= g.label :faction_2 %>
  <%= g.text_field :faction_2 %>

  <%= g.label :caster_1 %>
  <%= g.text_field :caster_1 %>

  <%= g.label :caster_2 %>
  <%= g.text_field :caster_2 %>

  <%= g.label :point_level %>
  <%= g.text_field :point_level %>

  <%= g.label :winner %>
  <%= g.text_field :winner %>

  <%= g.submit "eintragen", class: "btn btn-large btn-primary" %>
<% end %> 
```

在 Games 控制器中，我有一个 create 方法

```
def create
    @game = Game.new(params[:game])
    if @game.save
      flash[:success] = "Spiel erfolgreich eingereicht"
      @player_1 = User.find_by_name(@game.player_1)
      @player_1.update_attributes(:games_played => @player_1.games_played + 1)
      redirect_to @game
    else
      render 'new'
    end
 end 
```

不用说，它没有像我预期的那样工作。令我烦恼的是：如果我尝试更改控制台中的记录，则会发生以下情况：

```
user = User.find_by_name("Example User")
User Load (0.2ms)  SELECT "users".* FROM "users" WHERE "users"."name" = 'Example User' LIMIT 1
=> #<User id: 1, name: "Example User", email: "example@railstutorial.org", created_at: "2012-09-28 11:48:10", updated_at: "2012-09-28 11:48:10", password_digest: "$2a$10$3GQnsHGAfp09v1v.csb6Ce8pCPwfY0Hl1nG2a09BvOo8...", remember_token: "MsRfXle0N67ws9otkeDP_w", admin: true, elo_rating: 1000, games_played: 0> 

user.valid?
  User Exists (0.2ms)  SELECT 1 AS one FROM "users" WHERE (LOWER("users"."name") = LOWER('Example User') AND "users"."id" != 1) LIMIT 1
  User Exists (0.1ms)  SELECT 1 AS one FROM "users" WHERE (LOWER("users"."email") = LOWER('example@railstutorial.org') AND "users"."id" != 1) LIMIT 1
=> false 
```

我不明白，为什么用户不应该是有效的。所有测试都通过（以 railstutorial 的方式制定）。我的用户模型：

```
# == Schema Information
#
# Table name: users
#
#  id              :integer          not null, primary key
#  name            :string(255)
#  email           :string(255)
#  created_at      :datetime         not null
#  updated_at      :datetime         not null
#  password_digest :string(255)
#  remember_token  :string(255)
#  admin           :boolean          default(FALSE)
#  elo_rating      :integer          default(1000)
#  games_played    :integer          default(0)
#

class User < ActiveRecord::Base
  attr_accessible :name, :email, :password, :password_confirmation, :games_played, :elo_rating
  has_secure_password

  before_save { |user| user.email = email.downcase }
  before_save :create_remember_token
  validates :name,  presence: true, 
                    uniqueness: true, 
                    length: { :maximum => 50 }

  # regex take from railstutorial by Michael Hartl (http://ruby.railstutorial.org)
  VALID_EMAIL_REGEX = /\A[\w+\-.]+@[a-z\d\-.]+\.[a-z]+\z/i
  validates :email, presence: true, 
                    format: { with: VALID_EMAIL_REGEX },
                    uniqueness: { case_sensitive: false }

  validates :password, presence: true, length: { minimum: 6 }
  validates :password_confirmation, presence: true
  validates :games_played, presence: true
  validates_numericality_of :games_played, greater_than_or_equal_to: 0
  validates_numericality_of :elo_rating, greater_than_or_equal_to: 0

  private

    def create_remember_token
      self.remember_token = SecureRandom.urlsafe_base64
    end
end 
```

我真的被困在这里，因为这个功能是必不可少的，我必须通过表单做更多的这些记录更新。我真的无法弄清楚为什么我的记录会变得无效。此外，我确信有更好的方法来更新这些记录，甚至可以完全避免这个问题？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T13:31:39.140

每当他们是 update_attributes 时，它都会尝试更新密码，这也会使记录无效

```
validates :password, presence: true, length: { minimum: 6 }, :if => :password
validates :password_confirmation, presence: true, :if => :password_confirmation 
```

现在试试

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T13:33:38.317

由于数据库中的数据不佳（某些用户具有相同的电子邮件或名称），它可能无效。如果是这种情况，请重新加载数据库

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T13:45:00.163

根据您的`user.errors`，您不想在每次保存用户时验证 :password 和 :password_confirmation ；仅当您实际创建用户或允许用户显式更新这些值时，例如从他们的帐户编辑页面。

如果您进行如下更改，您的用户模型验证逻辑可能会起作用：

```
class User < ActiveRecord::Base
  validates :password, presence: {if: :password_required?}, length: { minimum: 6, allow_blank: true }
  validates :password_confirmation, presence: { if: :password_required? }

  private

  def password_required?
    !persisted? || !password.nil? || !password_confirmation.nil?
  end
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T21:29:40.103

另一种写法。

```
with_options if: :password do |user|
  user.validates :password, presence: true, length: { minimum: 6 }
  user.validates :password_confirmation, presence: true
end 
```

# java - 如何使用java上传> 50gb的文件

> ID：12640539
> 
> 赞同：1
> 
> 时间：2012-09-28T13:00:46.610
> 
> 标签：java, file-upload

我们需要将 >=50GB 的文件上传到服务器，可能是文件系统。为了实现这一点，我们可以将文件分成块并在上传后合并它们。这是我在长时间谷歌搜索后得出的。

有没有最好的方法来上传这么大的文件？（记住性能问题）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T13:10:36.430

使用 FTP 协议可能被证明只有优点：

- 这是一个标准的

-我确定java中有很多库（我的答案基于.NET的存在）

- 它有一个“追加”方法，如果传输中断，您可以重新开始传输（您可以先检查部分上传文件的大小，然后知道从哪里重新开始阅读以完成丢失的部分）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T13:38:31.683

以下是一些需要考虑的选项：

*   HTTP 可能是最常用的上传和下载协议。

*   FTP 可能会快一点，但这更多地反映了 Web 服务器设计而不是协议。

*   显式压缩可能会缩短上传时间。

*   有一些不太知名的协议和框架可以通过各种方式提供更快的数据传输。 [本页](http://www.filecatalyst.com/open-source-fast-file-transfers)描述了 4 种开源替代方案。

*   有许多用于“快速”文件传输的商业工具。

但请注意：

1.  “更快”的机制倾向于通过垄断网络带宽来实现其速度；即，他们通常不是网络世界中的“好公民”。
2.  任何网络通信路径通常都存在瓶颈，这会限制您的上传时间。如果您谈论的是从人们的家庭系统上传，瓶颈可能是用户 ISP 链路上的上传数据速率……这通常比下载数据速率慢很多。

# c# - 如何将 RTF 转换为纯文本？

> ID：12640544
> 
> 赞同：4
> 
> 时间：2012-09-28T13:01:12.770
> 
> 标签：c#, format, rtf

我得到了一个相当大的 excel 文件，每行包含一个来自我们的 oracle 数据库的 clob 转储，其中一个可能如下所示：

```
{\rtf1\ansi\deff0\deftab708{\fonttbl{\f0\fnil\fcharset0 Courier New;}{\f1\fnil\fcharset0 Arial;}{\f2\fnil\fcharset0 MS Sans Serif;}{\f3\fnil\fcharset0 Times New Roman;}{\f4\fnil\fcharset238 Times New Roman CE;}{\f5\fnil\fcharset204 Times New Roman Cyr;}{\f6\fnil\fcharset161 Times New Roman Greek;}{\f7\fnil\fcharset162 Times New Roman Tur;}{\f8\fnil\fcharset186 Times New Roman Baltic;}}{\colortbl\red0\green0\blue0;\red255\green0\blue0;\red0\green0\blue255;\red0\green255\blue255;\red0\green255\blue0;\red255\green0\blue255;\red128\green0\blue128;\red255\green255\blue0;\red255\green255\blue255;\red0\green0\blue128;\red0\green128\blue128;\red0\green128\blue0;\red128\green128\blue0;\red128\green0\blue0;\red128\green128\blue128;\red255\green255\blue255;}\paperw11906\paperh16838\margl1417\margr1417\margt1417\margb1417{\*\pnseclvl1\pnucrm\pnstart1\pnhang\pnindent720{\pntxtb}{\pntxta{.}}}{\*\pnseclvl2\pnucltr\pnstart1\pnhang\pnindent720{\pntxtb}{\pntxta{.}}}{\*\pnseclvl3\pndec\pnstart1\pnhang\pnindent720{\pntxtb}{\pntxta{.}}}{\*\pnseclvl4\pnlcltr\pnstart1\pnhang\pnindent720{\pntxtb}{\pntxta{)}}}{\*\pnseclvl5\pndec\pnstart1\pnhang\pnindent720{\pntxtb{(}}{\pntxta{)}}}{\*\pnseclvl6\pnlcltr\pnstart1\pnhang\pnindent720{\pntxtb{(}}{\pntxta{)}}}{\*\pnseclvl7\pnlcrm\pnstart1\pnhang\pnindent720{\pntxtb{(}}{\pntxta{)}}}{\*\pnseclvl8\pnlcltr\pnstart1\pnhang\pnindent720{\pntxtb{(}}{\pntxta{)}}}{\*\pnseclvl9\pnlcrm\pnstart1\pnhang\pnindent720{\pntxtb{(}}{\pntxta{)}}}{\pard\ql\li0\fi0\ri0\sb0\sl\sa0 \plain\f3\fs24\cf0 FOO FOO FOO \'85\'85\. \'85\'85..}} 
```

现在，通过将这些数据放入 a 中`System.Windows.Forms.RichTextBox`，`.Rtf`然后读出它的`.Text`值，我得到了一个简单的转换。但是，不知何故，它带来了它的换行符。

我试过删除它们

`rtf.Replace("\n", "").Replace("\r", "").Replace(Environment.NewLine, "")`

但这似乎没有帮助。

有谁知道如何将富文本格式转换为**单行** *纯文本*？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-28T13:06:21.513

看看这个[例子](http://msdn.microsoft.com/en-us/library/cc488002.aspx)，代码提取保存。

**已更新**——从 VB.NET 程序中复制和粘贴错误——对不起各位。

```
class ConvertFromRTF
{
    static void Main()
    {

        string path = @"test.rtf";

        //Create the RichTextBox. (Requires a reference to System.Windows.Forms.dll.)
        using(System.Windows.Forms.RichTextBox rtBox = new System.Windows.Forms.RichTextBox());
        {

            // Get the contents of the RTF file. Note that when it is 
           // stored in the string, it is encoded as UTF-16\. 
            string s = System.IO.File.ReadAllText(path);

            // Convert the RTF to plain text.
            rtBox.Rtf = s;
            string plainText = rtBox.Text;

            // Now just remove the new line constants
            plainText = plainText.Replace("\r\n", ",");

            // Output plain text to file, encoded as UTF-8.
            System.IO.File.WriteAllText(@"output.txt", plainText);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T13:03:34.200

**[如何：将 RTF 转换为纯文本（C# 编程指南）](http://msdn.microsoft.com/en-us/library/cc488002.aspx)**

在 .NET Framework 中，您可以使用 RichTextBox 控件创建支持 RTF 的文字处理器，并使用户能够以所见即所得的方式将格式应用于文本。

您还可以使用 RichTextBox 控件以编程方式从文档中删除 RTF 格式代码并将其转换为纯文本。您无需将控件嵌入到 Windows 窗体中即可执行此类操作。

# javascript - Backbone.js 模型混合

> ID：12640546
> 
> 赞同：0
> 
> 时间：2012-09-28T13:01:16.763
> 
> 标签：javascript, backbone.js

如果主干模型（或集合）可能已经存在也可能不存在，你如何扩展或混合？

这是我尝试过的：

```
mymodels.A = ('A' in mymodels ? mymodels.A : Backbone.Model).extend({
 /* url, initialize, parse, etc... */ 
}); 
```

或者

```
mymodels.A = ('A' in mymodels ? mymodels.A.prototype : Backbone.Model).extend({
 /* url, initialize, parse, etc... */
}); 
```

或者

```
mymodels.A = _.extend('A' in mymodels ? mymodels.A : Backbone.Model, {
 /* url, initialize, parse, etc... */
}); 
```

想法？

**编辑：**

```
mymodels.A = (mymodels.A || Backbone.Model).extend({
 /* url, initialize, parse, etc... */
}); 
```

**编辑2：**

采取了不同的方法....见下面的答案

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T14:46:35.950

这完成了我想做的事情......这是创建模型。最后，我分段创建一个对象并将整个对象传递给 Backbone.Model.extend：

```
var mymodels = {};

mymodels.A = _.extend({}, mymodels.A, {
    url: "http://www.google.com"
});

mymodels.A = _.extend({}, mymodels.A, {
    initialize: function(){
        this.set('mixin', 'TRUE'); 
    }
});
mymodels.A = Backbone.Model.extend(mymodels.A);

var model = new mymodels.A({'new': 'TRUE'}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T13:31:43.647

尝试：

```
// ensure its created
mymodels.whatever = mymodels.whatever || Backbone.Model.extend({...; // create it empty if you need
// now if you want to extend do it knowing it's created
mymodels.whatever = mymodels.whatever.extend({... 
```

如果`mymodels.whaever`存在，那么它将重新分配变量（什么都不做）。如果它不创建 OR 将需要评估第二部分，`new`或`Backbone.Model`用于创建模型的表达式（甚至是空的，例如`{}`）。

# iphone - 为不同的客户定制ios应用

> ID：12640547
> 
> 赞同：2
> 
> 时间：2012-09-28T13:01:21.967
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我的应用已在应用商店获得批准，现在我的一个客户需要应用中的一些额外功能，我正在考虑为该客户提供不同的代码库，但如果我将来必须为更多客户定制应用怎么办，在实际代码库中的增强的情况下，我将不得不将实际代码库的更改合并到所有其他代码库（定制的），这将是费力的。任何帮助，建议将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T14:06:39.763

我们在我工作的公司这样做，我们为我们拥有的所有不同应用程序使用相同的代码库，我们甚至可以对它们进行不同的品牌化。我们为此编写了一个品牌系统，它基于应用程序中的品牌来执行它，因此我们可以设置不同`text`的 , `colors`，`images`然后可以在该品牌中设置需要特定于粒子品牌的东西。因此，最好的方法是为您需要的每个品牌创建不同的目标（每个目标都是自己的应用程序），并确保源正确链接。

您还可以创建一个包含所有共享代码的框架，然后将所有单独的代码放在应用程序中，或者将其添加到框架中，然后将其分离为单独的功能，例如为一个`Login Process`类提供一个`Emailing`类`Printing`类`Storing data`等等。然后，如果一个客户想要拥有另一个客户拥有的功能，那么您已经有了代码，您只需要调用它。这将节省开发时间和错误修复，并允许您花更多时间开发更多功能而不是修复旧功能。使用 SVN 或 GIT 也是存储代码的好方法，让您轻松创建应用程序。例如，您可以创建框架和模板应用程序的主干版本，并为框架的增量版本和您拥有的所有不同品牌的每个客户端创建分支。在开发应用程序时，源代码管理非常重要。

我的公司如何做到这一点的一个例子是，我们为一个客户制定了一个项目，然后他们为每个品牌制定了目标。因此，如果我们有 ClientA 并且他们想要同一个应用程序的 3 个不同版本，那么我们将创建项目并将其命名为 ClientA 之类的名称，然后调用 3 个目标`Brand1`，`Brand2`然后`Brand3`如果其中一个应用程序（目标）出现错误那么您知道它会出现在其他应用程序中，您只需修复一个问题即可为所有三个应用程序修复它。

这确实存在一些问题，因为您可以维护一个庞大的代码库，但它们都将集中在一个地方，因此更容易维护。如果您在代码库中有一个错误，它将出现在每个应用程序中，但它只是一个修复程序，而不是每个应用程序的修复程序。最后一个问题是您必须创建框架本身，这可能非常复杂，但这[可能](https://stackoverflow.com/questions/4465974/objective-c-create-a-framework-for-my-iphone-apps)会有所帮助。

我确实相信创建框架的所有优点都超过了缺点。因此，我建议创建一个所有应用程序都链接到的框架。也看看创建一个更简单的 CSS 系统，但适用于 iPhone、iPad 甚至 Mac OSX。在过去的两个月里，我一直在开发这样一个系统，它可以让应用程序可以很容易地被品牌化（样式化），而无需真正了解任何objective-c，所以目前我们可以将 UIElements 添加到我们的应用程序并设置所有元素属性无需开发人员与任何objective-c 交互。原因是我们团队中没有多少人知道objective-c，因为我们是一家互联网开发公司而不是移动开发公司，所以我们的团队很多人没有CSS，这也可以在Windows计算机上完成并使用我们的 Mac 服务器构建，然后构建 .

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T13:03:16.957

使用[源代码控制](http://en.wikipedia.org/wiki/Revision_control)系统，如 SVN 或 GIT。我推荐 Git，因为它可以在没有中央存储库的情况下在本地使用，并且受到 Xcode 的支持。

源代码控制允许您非常轻松地管理同一应用程序的不同版本。在您的情况下，您会将当前版本签入存储库。然后，您可以创建一个分支来为客户端实现新功能。稍后，您可以将更改合并到主代码库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T13:58:55.297

源代码控制是您尝试编写的任何代码的必备条件，但在这种情况下，为不同的功能维护多个代码库可能不是很有效。当两个代码库变得非常不同时，您将获得的冲突数量将是巨大的。

根据您的功能的重要性，我很可能会采用“恒定方式”。

这个想法是让每个人都有相同的代码，但基于一个常数，比如客户的名字，显示或隐藏这些功能。在编译和分发之前，您只需将常量更改为正确的客户，然后瞧。

**伪代码**

```
#define Customer = CUSTOMER_A

if (Customer in (CUSTOMER_A, CUSTOMER_B) {
  [self showButtonPickAContact]
} 
```

**上行空间**

*   只有一个代码库
*   易于维护
*   向旧客户端添加现有功能很容易
*   非常适用于小型功能集，例如为一个客户添加地图

**缺点**

*   每个人的代码库都更大
*   如果其中一项功能让您只为一位客户包含一个 50 mb 的文件，则您不能使用此系统。
*   代码和设计更难编写/设计

# c# - 如果我的配置文件缺少 log4net 配置部分，为什么我的应用程序会挂起？

> ID：12640553
> 
> 赞同：4
> 
> 时间：2012-09-28T13:01:39.487
> 
> 标签：c#, .net, log4net

[`XmlConfigurator.Configure()`](http://logging.apache.org/log4net/release/sdk/log4net.Config.XmlConfigurator.Configure_overload_5.html)我有一个应用程序（一个自托管 ASP.Net WebAPI 的控制台应用程序）作为其设置的一部分调用。

如果我的应用程序`app.config`文件如下所示，它可以正常工作：

```
<configuration>
    <configSections>
        <section name="log4net"
                 type="log4net.Config.Log4NetConfigurationSectionHandler, log4net"/>
    </configSections>

    <log4net>
    </log4net>
</configuration> 
```

如果我取出空`<log4net>`元素，它会挂起：

```
<configuration>
    <configSections>
        <section name="log4net"
                 type="log4net.Config.Log4NetConfigurationSectionHandler, log4net"/>
    </configSections>
</configuration> 
```

过去在使用 log4net 时，我在其他任何地方都没有看到这种行为（它通常只是将消息“log4net:ERROR XmlConfigurator: Failed to find configuration section 'log4net' in the application's .config file.”输出到控制台）。

我做错了什么，还是偶然发现了 log4net 中的错误？

* * *

我已经对此进行了广泛的调试。有两种行为：

1.  `XmlConfigurator.Configure()`当我跨过它时，呼叫无限期挂起
2.  `XmlConfigurator.Configure()`可以跳过调用，但随后应用程序似乎挂起。如果我暂停执行并查看活动线程，就会发现有一个卡在 log4net 方法中（类似于`ConfigureFromFile`）。

无论哪种方式，它都会挂起整个应用程序。

这是来自挂起线程的堆栈跟踪（在上面的第二种情况下）：

[![堆栈跟踪](../Images/7e2d5be7875e5efcb1fca84dad5ea657.png)](https://i.stack.imgur.com/f2MIz.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T23:37:48.753

多亏了[这篇博](http://blogs.microsoft.co.il/blogs/dorony/archive/2012/09/12/console-readkey-net-4-5-changes-may-deadlock-your-system.aspx)文，我终于找到了答案。

这基本上归结为我的机器上安装了.Net 4.5。尽管我的目标是 .Net 4.0，但由于 .Net 4.5 的直接替换性质，行为是不同的。

如果我的配置文件中没有空`<log4net>`元素，log4net 想要写入标准错误以通知该元素为空。如果没有该元素，则不会发生日志记录。当日志记录确实发生时（发生在与应用程序中使用的其他控制台不同的线程上），它会遇到死锁，这是由于 .Net 4.5 中控制台的初始化方式发生了变化（详见链接的博客文章）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T13:08:03.503

您的配置告诉 XmlConfigurator 管理器有一个名为 Log4Net 的部分。因此，您的 XmlConfigurator 会尝试加载该部分并抱怨。
我敢说这是意料之中的。
如果您删除在 configSections 中声明的任何部分，您将获得与任何派生配置类相同的行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T13:18:49.123

尝试这样的事情，我在我的 .config 文件中设置后

在您的页面中声明这样的内容

```
private static log4Net.ILog _logger = log4net.LogManager.GetLoggger(System.Reflection.MethodBase.GetCurrentMethod().DeclaringType);

  <log4net>
    <root>
      <level value="ALL"/>
      <appender-ref ref="LogFileAppender"/>
    </root>
    <appender name="LogFileAppender"  type="log4net.Appender.RollingFileAppender,log4net">
    <param name="File value="c:\Logs\SampleLog.txt"/>
    <param name="AppendToFile value="true"/>
    <rollingStyle value="Size"/>
    <maximumFileSize value="2MB"/>
    <staticLogFileName value="false"/>
    <datePattern value="yyyyMMdd"/>
      <layout type="log4net.Layout.PatternLayout">
        <conversionPattern value="%date [%thread] %-5level %logger -%message%newline"/>
      </layout>
    </appender>
  </log4net> 
```

# php - 如何在 PHP 中打印多个 JSON 数据？

> ID：12640554
> 
> 赞同：2
> 
> 时间：2012-09-28T13:01:42.903
> 
> 标签：php, facebook, json, facebook-fql

我试图将多个 JSON 数据打印到 php，但它不起作用。这是代码：

```
$fql = "SELECT uid, name FROM user WHERE uid in (SELECT uid2 FROM friend where uid1 =     $user)";
$ret_obj = $facebook->api(array(
                           'method' => 'fql.query',
                           'query' => $fql,
                         ));

foreach ($ret_obj as $name) {
  $friend = $name->name;
  echo "Name: " . $friend . "<br />;
} 
```

我想以以下格式显示我的 Facebook 好友列表：

```
Name: [friend's name]
Name: [friend's name]
Name: [friend's name] 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T13:05:15.753

那是一个数组，而不是一个对象，使用这个：

```
foreach ($ret_obj as $name) {
  $friend = $name['name'];
  echo "Name: " . $friend . "<br />";
} 
```

[*FQL 查询以数组形式返回结果*](http://developers.facebook.com/docs/reference/php/facebook-api/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T13:04:15.093

**显然 fql 不会返回与主题开启者在主题标题中暗示的内容相矛盾的 json 数据。因此，这个答案是没有实际意义的。**

如果它是您从 facebook 获取的 json，则需要对其进行解码才能将结果用作数组。为此使用[json_decode](http://php.net/json_decode)。尝试解码数据的[var_dump](http://php.net/var_dump)以查看您从 facebook 收到的结构。

```
$fql = "SELECT uid, name FROM user WHERE uid in (SELECT uid2 FROM friend where uid1 =     $user)";
$ret_obj = $facebook->api(array(
    'method' => 'fql.query',
    'query' => $fql,
));

var_dump(json_decode($ret_obj)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T13:05:18.187

也许你应该使用[`json_decode()`](http://php.net/manual/en/function.json-decode.php)函数。您还可以定义您想要获取的内容：对象或数组。

# gwt - 将股票图表添加到 GWT SimplePanel 时出现 Java 脚本类型错误

> ID：12640555
> 
> 赞同：2
> 
> 时间：2012-09-28T13:01:46.787
> 
> 标签：gwt, highcharts

我正在尝试将股票图表添加到 GWT 简单面板。股票图表具有类别 [以字符串表示的日期值] 和 YSeries 值 [数字 [] 数组列表]。我需要帮助来解决 Java 脚本类型错误。

代码如下所示：

```
 public void createStockChart(String[] categories,
            List<Number[]> Yseries, String[] seriesNames) {
        if (StkChart == null) {
            String xAxisTitle = "Date Range";
            String yAxisTitle = "Count Values";
            StkChart = new StockChart();
            StkChart.setTitle("Avg Performance");
            StkChart.setType(Series.Type.LINE);
            StkChart.getXAxis().setAxisTitleText(xAxisTitle, true);
            StkChart.getXAxis().setType(Axis.Type.LINEAR);
            StkChart.getYAxis().setAxisTitleText(yAxisTitle, true);
            StkChart.getXAxis().setCategories(true, categories);
            StkChart.setShadow(true);
            StkChart.setSize(550, 300);

            for (int index = 0; index < Yseries.size(); index++) {
                StkChart.addSeries(StkChart.createSeries()
                        .setPoints(Yseries.get(index))
                        .setName(seriesNames[index]));
            }

            StkChart.getXAxis().setLabels(new XAxisLabels().setStep(2));
            ChartPnl.add(StkChart); [Java Script Exception occurs here]
        }
} 
```

我收到以下错误：

```
17:46:58.437 [ERROR] [myapp] Uncaught exception escaped
com.google.gwt.core.client.JavaScriptException: (TypeError) @com.google.gwt.core.client.impl.Impl::apply(Ljava/lang/Object;Ljava/lang/Object;Ljava/lang/Object;)([JavaScript object(536), JavaScript object(199), JavaScript object(539)]): undefined is not a function

at com.google.gwt.dev.shell.BrowserChannelServer.invokeJavascript(BrowserChannelServer.java:249)
at com.google.gwt.dev.shell.ModuleSpaceOOPHM.doInvoke(ModuleSpaceOOPHM.java:136)
at com.google.gwt.dev.shell.ModuleSpace.invokeNative(ModuleSpace.java:570)
at com.google.gwt.dev.shell.ModuleSpace.invokeNativeObject(ModuleSpace.java:278)
at com.google.gwt.dev.shell.JavaScriptHost.invokeNativeObject(JavaScriptHost.java:91)
at com.google.gwt.core.client.impl.Impl.apply(Impl.java)
at com.google.gwt.core.client.impl.Impl.entry0(Impl.java:242)
at sun.reflect.GeneratedMethodAccessor63.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at com.google.gwt.dev.shell.MethodAdaptor.invoke(MethodAdaptor.java:103)
at com.google.gwt.dev.shell.MethodDispatch.invoke(MethodDispatch.java:71)
at com.google.gwt.dev.shell.OophmSessionHandler.invoke(OophmSessionHandler.java:172)
at com.google.gwt.dev.shell.BrowserChannelServer.reactToMessages(BrowserChannelServer.java:293)
at com.google.gwt.dev.shell.BrowserChannelServer.processConnection(BrowserChannelServer.java:547)
at com.google.gwt.dev.shell.BrowserChannelServer.run(BrowserChannelServer.java:364)
at java.lang.Thread.run(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T10:17:15.843

错过了以下步骤。

```
 <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
 <script type="text/javascript" src="js/highstock.js"></script> 
```

之前添加了错误的 JS 文件。

[http://www.moxiegroup.com/moxieapps/gwt-highcharts/apidocs/index.html](http://www.moxiegroup.com/moxieapps/gwt-highcharts/apidocs/index.html)

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T19:03:55.547

我怀疑您传递给 createStockChart 的变量之一是 null 或空。

# python - 在升级到新版本之前我需要卸载 Python 包吗？

> ID：12640557
> 
> 赞同：4
> 
> 时间：2012-09-28T13:01:55.313
> 
> 标签：python, windows, distutils

我在 Windows 上运行 Python，通常使用预构建的二进制文件安装包。当我升级软件包（例如从 matplotlib-1.0.0 到 matplotlib-1.1.1）时，我需要先卸载早期版本吗？

我在没有卸载以前版本的情况下进行了升级 matplotlib 的测试，一切似乎都很好。 `matplotlib.__version__`显示“1.1.1”。那么 distutils 是否只是覆盖了文件，可能会使旧文件弄乱我的站点包文件夹？还是安装程序查找以前的安装，先删除这些，然后安装新版本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T13:20:40.977

如果您正在使用`pip`，您可以这样做`pip install package --upgrade`，但您会发现它基本上与卸载后重新安装相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T13:10:38.383

你必须卸载它：

```
pip uninstall matplotlib 
```

这会使您的网站包混乱或更糟

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-07-16T08:19:56.870

是的，您需要全新安装。从 matplotlib 1.2.1 升级到 1.3.1 时，我已经打了我的腿，不先删除旧包。

# javascript - 我怎么知道用户是否点击了上一页的后退按钮

> ID：12640561
> 
> 赞同：3
> 
> 时间：2012-09-28T13:02:01.357
> 
> 标签：javascript, jquery, asp.net

我有一个页面，它只会根据某些参数将用户重定向到某个页面。因此，此页面将始终重定向访问者。

问题是当访问者使用后退按钮到达此页面时。他/她只会被重定向到他/她刚刚单击后退按钮的页面上。

**上下文**：三页：A、B 和 C

在页面 A 上，我单击链接转到页面 B。页面 B 将简单地将我重定向到页面 C。

**问题**：点击返回页面 C。我转到页面 B 几秒钟，但随后我被重定向回页面 C

**它应该是**：在页面 C 上，当我单击后退按钮时，我想转到页面 A。

我以为我可以使用 Request.UrlReferrer 但这包含页面 A 的 url

是否有任何跨浏览器解决方案可以让我这样做？

我更喜欢服务器端解决方案，但我也对客户端开放。

编辑：我只是想到，在访问者重定向到页面 C 的那一刻，可以将页面 B 的浏览器历史记录中的条目替换为页面 A。但我不知道这是否可行和允许.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T13:14:09.357

尝试这个

# 历史.js

History.js 在所有浏览器中优雅地支持 HTML5 History/State API（pushState、replaceState、onPopState）。包括对数据、标题、replaceState 的持续支持。支持 jQuery、MooTools 和原型。对于 HTML5 浏览器，这意味着您可以直接修改 URL，而无需再使用哈希。对于 HTML4 浏览器，它将恢复使用旧的 onhashchange 功能。

[https://github.com/browserstate/history.js](https://github.com/browserstate/history.js)

# ruby-on-rails - Ruby on Rails：编辑表单不保存新数据

> ID：12640579
> 
> 赞同：1
> 
> 时间：2012-09-28T13:03:15.577
> 
> 标签：ruby-on-rails, ruby, database, drop-down-menu

我有一个允许用户创建新项目的页面。他们可以选择从链接到表格列的下拉菜单中进行选择，以防他们正在寻找的选项已经在数据库中，以及他们可以输入新数据的另一个选项，即在提交项目时，该文件的新数据将保存到下一个人的数据库中。

这是我的新/编辑项目视图的一部分：

```
<div class="client">
<%= label_tag :new_client, "Client" %><br/>
<%= text_field_tag :new_client, nil, :maxlength => 30 %>
Or
<%= f.select( :client, Project.all.map {|p| [p.client]}.uniq, :prompt => "Select a previous Client") %>
</div> 
```

用户可以通过文本字段输入新数据，也可以从下拉列表中选择。如果用户将新数据放入文本框中并从下拉列表中选择某些内容，则新数据将与项目一起保存，因为它具有优先级。

我的问题在于编辑视图：

当用户单击编辑链接时，项目会显示他们输入的所有数据，但所有数据都保存在下拉菜单中。

如果他们尝试在文本框中输入新数据并保存项目，它将与下拉菜单中突出显示的内容一起保存，并忽略放入文本框中的新数据。

编辑视图与新视图完全相同。

谁能指出我正确的方向。我是 Rails 新手，所以在尝试提供帮助时请记住这一点。

提前致谢。

```
 # GET /projects/1/edit
      def edit
        @project = Project.find(params[:id])
   end

      # POST /projects
      # POST /projects.json
      def create
        @all_technols = Technol.all
        @project = Project.new(params[:project])

    @technol = Technol.new(params[:tech])

    params[:technols][:id].each do |technol|

    if !technol.empty?

        #@project.projecttechnols.build(:technol_id => technol)
    @project_technol = @project.projecttechnols.build(:technol_id => technol)

    end
    end
        @project.client = params[:new_client] unless params[:new_client].blank?

        @project.project_owner = params[:new_project_owner] unless params[:new_project_owner].blank?
        @project.tech = params[:new_tech] unless params[:new_tech].blank?
        @project.role = params[:new_role] unless params[:new_role].blank?
        @project.industry = params[:new_industry] unless params[:new_industry].blank?
        @project.business_div = params[:new_business_div] unless params[:new_business_div].blank?

        respond_to do |format|
          if @project.save
            format.html { redirect_to @project, notice: 'Project was successfully created.' }
            format.json { render json: @project, status: :created, location: @project }
          else
            format.html { render action: "new" }
            format.json { render json: @project.errors, status: :unprocessable_entity }
          end
        end
      end

      # PUT /projects/1
      # PUT /projects/1.json
      # PUT /projects/1
  # PUT /projects/1.json
  def update
    @project = Project.find(params[:id])
    [:client, :project_owner, :tech, :role, :industry, :business_div].each do |attribute|
  params[attribute] = params["new_#{attribute}".to_sym] unless params["new_#{attribute}".to_sym].blank?
end

    respond_to do |format|
      if @project.update_attributes(params[:project])
        format.html { redirect_to @project, notice: 'Project was successfully updated.' }
        format.json { head :no_content }
      else
        format.html { render action: "edit" }
        format.json { render json: @project.errors, status: :unprocessable_entity }
      end
    end
  end 
```

编辑视图：

```
<h1>Editing project</h1>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>

<%= stylesheet_link_tag "form" %>

<%= form_for(@project) do |f| %>

  <% if @project.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@project.errors.count, "error") %> prohibited this project from being saved:</h2>

      <ul>
      <% @project.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>
<BODY LANG="en-GB" TEXT="#000000" DIR="LTR">
<P LANG="en-US" CLASS="western" ALIGN=RIGHT STYLE="margin-bottom: 0in">
<BR>
</P>
<P LANG="en-US" CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>

<div class ="padding">
</div>
<CENTER>
    <TABLE WIDTH=624 CELLPADDING=2 CELLSPACING=0 >
        <COL WIDTH=283>
        <COL WIDTH=20>
        <COL WIDTH=152>
        <COL WIDTH=138>
        <COL WIDTH=9>
        <THEAD>
            <TR>
                <TD COLSPAN=5 WIDTH=618 HEIGHT=29 BGCOLOR="#999999" STYLE="border: 1px solid #00000a; padding: 0.02in 0.06in">
                    <H1 LANG="en-US" CLASS="western"><FONT COLOR="#003366"><FONT SIZE=4>
   <div id = "project_name">
<div class="project_name">
    <%= f.label :project_name %> : 
    <%= f.text_field :project_name,:maxlength => 30 %>
  </div>
</div>

</FONT></FONT></H1>
                </TD>
            </TR>
        </THEAD>
        <TBODY>
            <TR>
                <TD COLSPAN=2 WIDTH=307 HEIGHT=15 BGCOLOR="#e6e6e6" STYLE="border: 1px solid #00000a; padding: 0.02in 0.06in">
                    <H2 LANG="en-US" CLASS="western" ALIGN=LEFT>Database id:</H2>
                </TD>
                <TD COLSPAN=3 WIDTH=307 BGCOLOR="#e6e6e6" STYLE="border: 1px solid #00000a; padding: 0.02in 0.06in">
                    <H2 LANG="en-US" CLASS="western" ALIGN=LEFT>
   <div id ="smallbox">
<div id = "status">
  <div class="status"> 
    <%= f.label :status %> : 

    <%#= f.select :status, [['Active'],['Completed']], {:include_blank => true} %>
    <%= f.select :status, [['Active'],['Completed']] %>
  </div></div> 

</H2>
                </TD>
            </TR>
            <TR>

                <TD COLSPAN=5 WIDTH=618 HEIGHT=13 BGCOLOR="#ffffff" STYLE="border: 1px solid #00000a; padding: 0.02in 0.06in">
                    <P LANG="en-US" CLASS="western" STYLE="margin-bottom: 0in"><B>

<div class="client">
<%= label_tag :new_client, "Client" %><br/>
<%= text_field_tag :new_client, nil,:maxlength => 30 %>
Or
<%= f.select( :client, Project.all.map {|p| [p.client]}.uniq, :prompt => "Select a previous Client") %>
</div>

</B>
                    <P LANG="en-US" CLASS="western" STYLE="margin-bottom: 0in"><BR>
                    </P>
                    <P LANG="en-US" CLASS="western"><BR>
                    </P>
                </TD>
            </TR>
            <TR>
                <TD COLSPAN=2 WIDTH=307 HEIGHT=13 BGCOLOR="#ffffff" STYLE="border: 1px solid #00000a; padding: 0.02in 0.06in">
                    <P LANG="en-US" CLASS="western" STYLE="margin-bottom: 0in"><B>
   <div class="business_div">
<%= label_tag :new_business_div, "Business Division" %><br/>
<%= text_field_tag :new_business_div, nil,:maxlength => 30%>
Or
<%= f.select( :business_div, Project.all.map {|p| [p.business_div]}.uniq, :prompt => "Select Business Division") %>
</div>
</B>
                    </P>
                    <P LANG="en-US" CLASS="western"><BR>
                    </P>
                </TD>
                <TD COLSPAN=3 WIDTH=307 BGCOLOR="#ffffff" STYLE="border: 1px solid #00000a; padding: 0.02in 0.06in">
                    <P LANG="en-US" CLASS="western" STYLE="margin-bottom: 0in"><B>
  <div class="project_owner">
<%= label_tag :new_project_owner, "Project Owner" %><br/>
<%= text_field_tag :new_project_owner, nil,:maxlength => 30 %>
Or
<%= f.select( :project_owner, Project.all.map {|p| [p.project_owner]}.uniq, :prompt => "Select a previous Project Owner") %>
</div>  

</B></P>
                    <P LANG="en-US" CLASS="western"><BR>
                    </P>
                </TD>
            </TR>

            <TR>
                <TD WIDTH=283 HEIGHT=13 BGCOLOR="#ffffff" STYLE="border: 1px solid #00000a; padding: 0.02in 0.06in">
                    <P LANG="en-US" CLASS="western">
   <div class="start_date">
    <%= f.label :start_date %> : 
    <%= f.text_field :start_date, :class => 'datepicker', :style => 'width: 80px;' %>
  </div>  

</P>
                </TD>
                <TD COLSPAN=2 WIDTH=176 BGCOLOR="#ffffff" STYLE="border: 1px solid #00000a; padding: 0.02in 0.06in">
                    <P LANG="en-US" CLASS="western">
Entry Created by:<br> <%= @project.first_name %> <%= @project.last_name %>
  <%= f.hidden_field :first_name, :value => @project.first_name %>
<%= f.hidden_field :last_name, :value => @project.last_name %>
</P>
                </TD>
                <TD COLSPAN=2 WIDTH=151 BGCOLOR="#ffffff" STYLE="border: 1px solid #00000a; padding: 0.02in 0.06in">
                    <P LANG="en-US" CLASS="western">
   Entry date: <br>  <%= l DateTime.now.to_date %>

</P>
                </TD>
            </TR>
            <TR>
                <TD WIDTH=283 HEIGHT=13 VALIGN=TOP BGCOLOR="#ffffff" STYLE="border: 1px solid #00000a; padding: 0.02in 0.06in">
                    <P LANG="en-US" CLASS="western">
   <div class="end_date">
    <%= f.label :end_date %> :
    <%= f.text_field :end_date, :class => 'datepicker', :style => 'width: 80px;' %>
  </div>  

</P>
                </TD>
                <TD COLSPAN=2 WIDTH=176 BGCOLOR="#ffffff" STYLE="border: 1px solid #00000a; padding: 0.02in 0.06in">
                    <P LANG="en-US" CLASS="western">

Last Edited by: <br> <%= @project.edited_first_name %> <%= @project.edited_last_name %></P>

  <%= f.hidden_field :edited_first_name, :value => current_user.firstname %>
<%= f.hidden_field :edited_last_name, :value => current_user.lastname %>

                </TD>
                <TD COLSPAN=2 WIDTH=151 BGCOLOR="#ffffff" STYLE="border: 1px solid #00000a; padding: 0.02in 0.06in">
                    <P LANG="en-US" CLASS="western">
   Edited date:  <br> 

<% if !(@project.edited_date.blank?) %>

  <%= l @project.edited_date %>

<% end %>
 <%= f.hidden_field :edited_date, :value => DateTime.now.to_date %>
</P>
                </TD>
            </TR>
            <TR>
                <TD WIDTH=283 HEIGHT=13 VALIGN=TOP BGCOLOR="#ffffff" STYLE="border: 1px solid #00000a; padding: 0.02in 0.06in">
                    <P LANG="en-US" CLASS="western" STYLE="margin-bottom: 0in">

<div class="tech">
<%= label_tag :new_tech, "Technologies Used :" %><br/>
<%= text_field_tag :new_tech, nil,:maxlength => 30 %>
Or
<%= f.select( :tech, Project.all.map {|p| [p.tech]}.uniq, :prompt => "Select a previous Technology") %>
</div>  

</P>
                    <P LANG="en-US" CLASS="western" STYLE="margin-bottom: 0in"><BR>
                    </P>
                    <P LANG="en-US" CLASS="western" STYLE="margin-bottom: 0in"><BR>
                    </P>
                    <P LANG="en-US" CLASS="western"><BR>
                    </P>
                </TD>
                <TD COLSPAN=2 WIDTH=176 BGCOLOR="#ffffff" STYLE="border: 1px solid #00000a; padding: 0.02in 0.06in">
                    <P LANG="en-US" CLASS="western" STYLE="margin-bottom: 0in">
   <div class="role">
<%= label_tag :new_role, "Role" %><br/>
<%= text_field_tag :new_role, nil,:maxlength => 30%>
Or
<%= f.select( :role, Project.all.map {|p| [p.role]}.uniq, :prompt => "Select a previous role") %>
</div>  

</P>
                    <P LANG="en-US" CLASS="western" STYLE="margin-bottom: 0in"><BR>
                    </P>
                    <P LANG="en-US" CLASS="western" STYLE="margin-bottom: 0in"><BR>
                    </P>
                    <P LANG="en-US" CLASS="western"><BR>
                    </P>
                </TD>
                <TD COLSPAN=2 WIDTH=151 BGCOLOR="#ffffff" STYLE="border: 1px solid #00000a; padding: 0.02in 0.06in">
                    <P LANG="en-US" CLASS="western" STYLE="margin-bottom: 0in">
   <div class="industry">
<%= label_tag :new_industry, "Industry:" %><br/>
<%= text_field_tag :new_industry, nil,:maxlength => 30%>
Or
<%= f.select( :industry, Project.all.map {|p| [p.industry]}.uniq, :prompt => "Select an industry") %>
</div>  

</P>
                    <P LANG="en-US" CLASS="western" STYLE="margin-bottom: 0in"><BR>
                    </P>
                    <P LANG="en-US" CLASS="western" STYLE="margin-bottom: 0in"><BR>
                    </P>
                    <P LANG="en-US" CLASS="western"><BR>
                    </P>
                </TD>
            </TR>
            <TR>
                <TD COLSPAN=5 WIDTH=618 HEIGHT=15 BGCOLOR="#e6e6e6" STYLE="border: 1px solid #00000a; padding: 0.02in 0.06in">
                    <H2 LANG="en-US" CLASS="western">
   Summary Of Assignment:  

</H2>
                </TD>
            </TR>
            <TR>
                <TD COLSPAN=5 WIDTH=618 HEIGHT=13 BGCOLOR="#ffffff" STYLE="border: 1px solid #00000a; padding: 0.02in 0.06in">

                    <P LANG="en-US" CLASS="western" STYLE="margin-bottom: 0in"><BR>
                    </P>
<div class="summary">
    <%= f.label :summary %><br />
    <%= f.text_area :summary, :style => 'width: 500px;' 'height: 100px;' %>
  </div>

                    <P LANG="en-US" CLASS="western" STYLE="margin-bottom: 0in"><BR>
                    </P>

                </TD>
            </TR>
            <TR>
                <TD COLSPAN=5 WIDTH=618 HEIGHT=15 BGCOLOR="#e6e6e6" STYLE="border: 1px solid #00000a; padding: 0.02in 0.06in">
                    <H2 LANG="en-US" CLASS="western">Additional Informaton</H2>
                </TD>
            </TR>
            <TR>
                <TD COLSPAN=5 WIDTH=618 HEIGHT=13 BGCOLOR="#ffffff" STYLE="border: 1px solid #00000a; padding: 0.02in 0.06in">

                    <P LANG="en-US" CLASS="western" STYLE="margin-bottom: 0in">
   <div class="lessons_learned">
    <%= f.label :lessons_learned %><br />
    <%= f.text_area :lessons_learned, :style => 'width: 500px;' 'height: 100px;' %>
  </div>  

</P>
                    <P LANG="en-US" CLASS="western" STYLE="margin-bottom: 0in"><BR>
                    </P>

                </TD>
            </TR>
            <TR VALIGN=TOP>
                <TD COLSPAN=5 WIDTH=618 HEIGHT=67 BGCOLOR="#ffffff" STYLE="border: 1px solid #00000a; padding: 0.02in 0.06in">
                    <P LANG="en-US" CLASS="western">
   <div class="customer_benifits">
    <%= f.label :customer_benifits %><br />
    <%= f.text_area :customer_benifits,:style => 'width: 500px;' 'height: 100px;' %>
  </div>  

</P>
                </TD>

            </TR>
            <TR>
                <TD COLSPAN=5 WIDTH=618 HEIGHT=13 BGCOLOR="#ffffff" STYLE="border: 1px solid #00000a; padding: 0.02in 0.06in">
                    <P LANG="en-US" CLASS="western" STYLE="margin-bottom: 0in">
   <div class="financials">
    <%= label_tag :financials, "Financial Responsibility:" %><br />
    <%= f.select :financials, [['£0 - £99,999'],['£100,000 - £249,999'],['£250,000 - £499,999 '],['£500,000 - £999,999 '],['£1,000,000 +']], :prompt => "Select" %>
  </div>
<P LANG="en-US" CLASS="western" STYLE="margin-bottom: 0in"><BR>
                    </P>

<div class="keywords">
    Any other searchable keywords and tags?<br />
    <%= f.text_field :keywords %>
  </div>

</P>
                    <P LANG="en-US" CLASS="western" STYLE="margin-bottom: 0in"><BR>
                    </P>

                </TD>
            </TR>
            <TR>
                <TD COLSPAN=5 WIDTH=618 HEIGHT=14 BGCOLOR="#e6e6e6" STYLE="border: 1px solid #00000a; padding: 0.02in 0.06in">
                    <H2 LANG="en-US" CLASS="western"><A NAME="_GoBack"></A></H2>
                </TD>
            </TR>
        </TBODY>
    </TABLE>
</CENTER>
<P LANG="en-US" CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
</BODY>
</HTML>

<div class="create_button">
<div class="actions">
    <%= f.submit "Save Edit", :class => "button", :confirm => "Are you sure you want to save the edit?" %>
  </div>
</div>

</div> <%#= small div %>

<% end %>

<%#= button_to 'Show', @project, :class => "button" %> 

<%#= button_to "Back", projects_path , :class => "button", :method => "get" %> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T13:14:44.010

我认为问题出在您的更新方法中。您更改`params[attribute]`然后更新项目`params['project']`

所以你需要改变`params['project'][attribute]`

顺便说一句，您必须阅读有关虚拟属性的信息，您可以使用它们以更清晰的方式执行此操作。

例如

```
class Project < Activerecord::Base
#your code here

attr_accessor :new_client

before_save :assign_new_client

def assign_new_client
  if @new_client
       self.client = @new_client
       @new_client = nil 
  end
end

end 
```

结尾

它没有经过测试，但只是展示了如何使用它的想法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T13:23:58.433

看起来您没有从文本字段中获取值。您需要添加 f。在 text_field 标识符之前。

```
f.text_field_tag 
```

# iphone - 如何在 iphone 中处理主页键/事件

> ID：12640583
> 
> 赞同：0
> 
> 时间：2012-09-28T13:03:18.247
> 
> 标签：iphone

我正在使用 iphone 开发游戏。当按下主屏幕按钮时，我想让游戏处于暂停模式。如何处理主屏幕按钮和事件 ( `incoming and outgoing events`)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T13:11:34.557

您不处理主页按钮本身。但是 UIApplicationDelegate（很可能在您的 AppDelegate.m 中）将收到许多通知

进入后台时（需要保存时）：

```
- (void)applicationWillResignActive:(UIApplication *)application
- (void)applicationDidEnterBackground:(UIApplication *)application 
```

当用户回到您的游戏时：

```
- (void)applicationWillEnterForeground:(UIApplication *)application
- (void)applicationDidBecomeActive:(UIApplication *)application 
```

您查看[UIApplicationDelegate 参考](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIApplicationDelegate_Protocol/Reference/Reference.html)以了解何时调用其中的每一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T13:08:09.663

`- (void) applicationDidEnterBackground:(UIApplication*)application {}`在你使用`AppDelegate.m`

# javascript - 显示导航菜单水平镀铬问题

> ID：12640585
> 
> 赞同：0
> 
> 时间：2012-09-28T13:03:20.057
> 
> 标签：javascript, jquery, css, google-chrome, cross-browser

我正在使用[已回答的上一个问题](https://stackoverflow.com/questions/12112425/how-can-i-make-a-navigation-menu-fit-its-container-horizontally)水平显示菜单，但它似乎在 Google Chrome 中不起作用。

它在 Firefox、IE、Safari 中运行良好，看起来不同，但不会删除最后一个菜单项。

小提琴：http: [//jsfiddle.net/Nilpo/GGQ4V/3/](http://jsfiddle.net/Nilpo/GGQ4V/3/)

如上一个已回答的问题中所述，我需要菜单项以适应其所在容器的大小。但是，该解决方案在 Google Chrome 上不起作用，我不知道为什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T13:49:17.280

不给 display: table;

```
.menu-main-menu-container ul {
----------------------
} 
```

演示：[小提琴](http://jsfiddle.net/sselvamani22/GGQ4V/18/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T13:51:08.957

[我刚刚在 fiddle 上试过这个](http://jsfiddle.net/GGQ4V/17/)，并让它在 Chrome 22 中工作：

```
.menu a {
    padding:         5px 14px 5px 15px;
    text-decoration:none;
    color: #333;
    display: block;
    position:        relative;
    font: 15px 'DroidSerifBold', Arial, sans-serif;
    text-transform: uppercase;
} 
```

我完全禁用了Javascript。如果您的容器是固定宽度，并且菜单项没有改变，则不需要 JS。

# c# - loginview 更改数据源

> ID：12640587
> 
> 赞同：0
> 
> 时间：2012-09-28T13:03:28.200
> 
> 标签：c#, asp.net, mdf, loginview

我最近在 Visual Studio 2010 中创建了一个 asp.net 页面。我没有更改任何预构建的 loginview 代码。它创建允许登录用户和注册用户的 MDF 文件。但是，我不想使用 MDF 文件，我想使用我正在运行的 SQL Server 实例（我们称之为 MyServer）和数据库 MyDatabase。连接到 MDF 文件的代码在哪里，是否有更改数据源的干净方法？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T13:06:47.050

你可以修改你`string connection`的`config file` `(Web.config)`

修改此部分

```
<connectionStrings>
   <add name="ConnectionString" connectionString="Data Source=.\SQLEXPRESS;AttachDbFilename=../File.mdf; Integrated Security=True;Connect Timeout=30;User Instance=True;Trusted_Connection=Yes"/>
</connectionStrings> 
```

例如这个

```
<connectionStrings>
<add name="ConnectionString" connectionString="Data Source=myServerAddress;Initial Catalog=myDataBase;Integrated Security=SSPI;"/>
</connectionStrings> 
```

链接： http: [//www.connectionstrings.com/](http://www.connectionstrings.com/)

# java - 将 Web 服务部署为 jar 还是 war？

> ID：12640589
> 
> 赞同：4
> 
> 时间：2012-09-28T13:03:30.850
> 
> 标签：java, web-services, soap, jar, jax-ws

我正在使用 JAX-WS 制作一个肥皂网络服务。

这应该部署为战争还是罐子。

它可以作为战争部署吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T13:09:48.493

您可以将其部署为 .war，并可以将其部署在许多不同的服务器上（Tomcat 将是最简单的 HTTP servlet 容器之一）。

我建议您阅读以下有关在 Tomcat 上使用 JAX-WS 部署 Web 服务的教程。

[http://www.mkyong.com/webservices/jax-ws/deploy-jax-ws-web-services-on-tomcat/](http://www.mkyong.com/webservices/jax-ws/deploy-jax-ws-web-services-on-tomcat/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T13:06:00.467

Soap Web 服务部署为 .war，因为它是一个 Web 应用程序。你用什么应用服务器？例如，在 Glassfish 中，您可以简单地将其放在 domain1/autodeploy 目录中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T13:15:40.633

如果您使用的是 Glassfish，那么只需将您的应用程序构建为 .war（此处无法在两种类型之间进行选择）并使用管理控制台或复制自动部署或使用 IDE 中的“部署”按钮进行部署。

你是如何使用 Jar 做到这一点的？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T13:06:37.723

我相信您必须将其部署为战争才能让您的服务器正确处理它。

你用的是什么服务器？

# android - 是否可以使用正确的密钥从另一个发布帐户更新应用程序

> ID：12640596
> 
> 赞同：2
> 
> 时间：2012-09-28T13:04:11.250
> 
> 标签：android, google-play, publishing

假设发布者使用密钥在他的帐户上`publisherA`发布了一个应用程序。`AppA``KeyA`

如果他有密钥，是否可以`publisherB`更新`AppA`应用程序（具有相同的包名称） 。`KeyA`

`publisherA`并且`publisherB`未链接到同一个发布帐户。

我读过的所有来自 Google 的文档都在谈论密钥的重要性，但从不谈论发布帐户。

任何经过身份验证的答案将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T13:49:39.243

不，你不能这样做。`publisherB`不会在他们的开发者控制台上看到该应用程序，因此无法对其进行更新。

如果他们试图通过上传具有相同包名的 APK 来绕过它，它将被拒绝为非唯一。

如果您作为一个团队工作，或者有人接管了一个项目，您可能希望使用多用户帐户选项。您可以将其他用户链接到该帐户并设置他们拥有的权限。如果原始发布者无法访问，您将不得不更改包名称并以某种方式说服当前用户切换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T13:39:10.937

我认为您不能使用发布者 A 的密钥来更新发布者 B 帐户中的应用程序。密钥属于特定帐户。

# java - 用于从 URL 检索特定字符串和数字的正则表达式

> ID：12640602
> 
> 赞同：-2
> 
> 时间：2012-09-28T13:04:30.307
> 
> 标签：java, regex

我想从中检索`IndiaRoute`and 。`919820673883``URL`

我如何使用`Pattern`和 a来做到这一点`Matcher`？

如果还有其他方法可以做到这一点，那么建议我使用该片段。

这是我的网址

```
http://localhost:8080/IndiaRoute/servlet/SendSMPPClient?mno=919820673883&msg=xxx&sid=xxxx+&mt=0 
```

提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T13:21:19.020

```
 Pattern p = Pattern.compile("http://.+/(.+?)/.+/.+\\?mno=(.+?)&");
    String s = "http://localhost:8080/IndiaRoute/servlet/SendSMPPClient?mno=919820673883&msg=xxx&sid=xxxx+&mt=0";
    java.util.regex.Matcher m = p.matcher(s);
    if(m.find())
    {
        System.out.println(m.group(1));
        System.out.println(m.group(2));
    } 
```

这将完成工作，直到 url 中没有任何变化。

编辑：输出

```
IndiaRoute
919820673883 
```

# active-directory - 如何通过 gpo 使每个用户只运行一次脚本？

> ID：12640606
> 
> 赞同：0
> 
> 时间：2012-09-28T13:04:37.287
> 
> 标签：active-directory, wmi, wmi-query, group-policy, gpo

我一直在网上搜索，但我没有找到任何结果，虽然它看起来很方便！

背景信息：使用基本的 netlogon 批处理文件，我使用在临时文件夹中写入检查文件来检查此脚本是否已经运行，因此不会占用太多时间。但是这些天来，我们在政策上做所有事情。

不久前，我制作了一个小 vbs，它添加​​了一个带有来自 AD 的用户信息的 Outlook 签名。目前用户手动运行此脚本，因为它只能在 Outlook 配置文件创建后才能成功运行。我当然可以在每次登录时运行我的 VBS 脚本并检查签名文件是否已经存在，如果存在则退出......但必须有更好的方法！..我希望..

这就是我想做的：使用 GPO WMI 过滤来检查文件是否存在（即 Select * From CIM_Datafile Where Name <> '%APPDATA%\outlook.v1'）。如果为真：启动我的 vbs。在我的脚本中，我将检查 Outlook 配置文件是否存在并运行脚本的其余部分并在我的脚本末尾创建 Outlook.v1 文件。

这样，每次只有非常有限的没有 Outlook 的用户会运行这个 vba。

语法

```
Select * From CIM_Datafile Where Name <> '%APPDATA%\\outlook.v1'
or
Select * From CIM_Datafile Where Name <> 'c:\users\%use_the_username_of_the_one_currently_loggin in%\\outlook.v1' 
```

当然是错的..所以真正的问题是：我如何在 WMI 过滤中引用基于用户的设置..？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T21:38:26.587

如果您正在寻找某些东西，WMI 过滤非常有用，但不适用于排除项。

如果您没有软件部署系统，您可以：

*   使用组策略首选项。
*   使用主动设置。
*   使用版本控制创建登录脚本包装器。
*   继续使用标志文件。

# java - 连接池模式

> ID：12640608
> 
> 赞同：2
> 
> 时间：2012-09-28T13:04:49.543
> 
> 标签：java, connection, connection-pooling, design-patterns, pool

如何在 Java 中实现连接池？

有什么图案吗？

我应该使用一些连接并释放它。此连接应在几次后关闭。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-28T13:09:01.263

您可以使用一些库。对于 JDBC 连接池，请查看[bonecp](/questions/tagged/bonecp "显示标记为“bonecp”的问题")、[c3p0](/questions/tagged/c3p0 "显示标记为“c3p0”的问题")或[dbcp](/questions/tagged/dbcp "显示标记为“dbcp”的问题")。如果您需要通用池，请参阅构建[dbcp的](/questions/tagged/dbcp "show questions tagged 'dbcp'")[commons Pool](http://commons.apache.org/pool/)。

# c# - 如何从资源中的控件发送的事件中获取父控件

> ID：12640610
> 
> 赞同：0
> 
> 时间：2012-09-28T13:05:02.133
> 
> 标签：c#, wpf, xaml, contextmenu

我在 Datarid 的资源中定义了一个上下文菜单。在上下文菜单的 Click 事件中，我想检查父控件 (DataGrid) 的名称。我尝试了 VisualTreeHelper.GetParent() 和 LogicalTreeHelper.GetParent() 但都没有反映 xaml 中的层次结构。如何从 Click 事件中获取 DataGrid 控件？感谢您的回答。

代码：

```
private void datagridTargetDelete_Click(object sender, RoutedEventArgs e)
{
    // Check the name of the DataGrid here...
} 
```

XAML：

```
<DataGrid Name="datagridTarget">
    <DataGrid.Resources>
        <ContextMenu x:Key="DGTContextMenu">
            <MenuItem Header="Delete" Click="datagridTargetDelete_Click">
                <MenuItem.Icon>
                    <Image Height="16" Width="16" Source="{Binding ContextDeleteIcon}"/>
                </MenuItem.Icon>
            </MenuItem>
        </ContextMenu>
    </DataGrid.Resources>
    <DataGrid.Columns>
        <DataGridTemplateColumn Header="" Width="Auto" IsReadOnly="True">
            <DataGridTemplateColumn.CellTemplate>
                <DataTemplate>
                    <Image ContextMenu="{DynamicResource DGTContextMenu}" Height="16" Width="16" Source="{Binding ObjectImage}" />
                </DataTemplate>
            </DataGridTemplateColumn.CellTemplate>
        </DataGridTemplateColumn>
    </DataGrid.Columns>
</DataGrid> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T15:42:58.887

这将为您提供您想要的确切内容：

```
var parent = ((ContextMenu)((MenuItem)sender).Parent).PlacementTarget; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T17:36:00.993

在这种情况下，您可能需要考虑在父元素上使用 CommandBinding 的 RoutedCommand。我认为这实际上是 ContextMenu 应该被使用的方式。这样，WPF 将为您找到父对象，您不必搜索它的逻辑树。

# java - 通过java中的蓝牙将文件从PC发送到手机而无需配对

> ID：12640611
> 
> 赞同：3
> 
> 时间：2012-09-28T13:05:03.003
> 
> 标签：java, bluetooth, bluecove, obex

我正在开发一个使用 java 将文件发送到周围设备的桌面应用程序。已完成，但我有一个问题，当尝试开始发送操作时，移动设备中会出现一条配对消息。我的应用程序使用 bluecove 库。Bluecove 在其网站上有一个示例应用程序，用于通过蓝牙发送文件，发送时不需要配对文件。从这里下载它[http://www.bluecove.org/bluecove-examples/obex-install/push.jnlp](http://www.bluecove.org/bluecove-examples/obex-install/push.jnlp)

这是我将文件发送到蓝牙设备的代码：

```
Connection connection = Connector.open(btConnectionURL);
// connection obtained

// now, let's create a session and a headerset objects
ClientSession cs = (ClientSession) connection;

HeaderSet hsConnectReply = cs.connect(null);
if (hsConnectReply.getResponseCode() != ResponseCodes.OBEX_HTTP_OK) {
System.out.println("Error while connecting device");
    return;
}   
HeaderSet hs = cs.createHeaderSet();
hs.setHeader(HeaderSet.NAME, filename);
hs.setHeader(HeaderSet.TYPE,
        new MimetypesFileTypeMap().getContentType(new File(filen)));
hs.setHeader(HeaderSet.LENGTH, new Long(file.length));

Operation putOperation = cs.put(hs);

OutputStream outputStream = putOperation.openOutputStream();
outputStream.write(file);
// file push complete

outputStream.close();
putOperation.close();

cs.disconnect(null);

connection.close(); 
```

我的网址是：btgoep://001FDF08DEEC:9;authenticate=false;encrypt=false;master=false

我想知道我的应用程序和 bluecove 示例应用程序有什么区别。提前谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-03T08:40:47.660

基于[此](http://32feet.codeplex.com/wikipage?title=BluetoothWin32Authentication&referringTitle=Documentation)，您可以在 .net 中进行自动身份验证！

根据我在 bluecove 的经验，您需要覆盖 RemoteDevice.authenticate() 函数并为服务器提供一个硬编码的 pin 号，并使该号码可供客户端输入以进行身份​​验证！使用这种方法，您可以进行配对，但无需在服务器端手动输入！

# math - 将逆时针多边形转换为顺时针多边形

> ID：12640616
> 
> 赞同：0
> 
> 时间：2012-09-28T13:05:14.173
> 
> 标签：math, polygons, convex, concave

如果我有以下多边形顶点的数组结构（多边形既可以是凸的也可以是凹的）：

```
[ [x = 5, y = 5], [x = 10, y = 10], [x = 3, y = 15], [x = 0, y = 7] ] 
```

我可以很容易地判断多边形是顺时针还是逆时针。但是我该如何转换呢？如果我反转数组，它适用于我能想到的示例，但它适用于每个多边形吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T13:13:45.643

是的，反转顶点应该在每种情况下都有效......如果有序列表是一个有效的多边形（没有两条边，由相邻顶点定义，相互交叉，包括由最后一个顶点定义的边到第一个顶点），然后反转顶点的顺序只会将其从顺时针更改为逆时针，反之亦然。

# c - 将数组声明为指向数组的指针时何时分配内存

> ID：12640620
> 
> 赞同：2
> 
> 时间：2012-09-28T13:05:20.867
> 
> 标签：c, declaration, multidimensional-array, dynamic-allocation

在尝试分配 20x10 的 2D 数组时，在哪些步骤中分配了内存

第1步：`int (*p)[10];`

第2步：`p = malloc( 20 * sizeof(*p) );`

是在步骤 2 中分配了所有内存（20 x 10 x 4 字节）还是在步骤 1 中也分配了一些内存？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T13:10:30.230

第一步只是一个指针，除了单个指针之外不分配任何东西。请记住，它是指向数组的指针，而不是指针数组。

数组中使用的所有存储都由您的`malloc()`调用分配。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-28T13:16:56.830

步骤 1 创建一个指针作为自动变量。指向的类型是 array-of-10- `int`。

第 2 步为 20 个这样的数组分配内存（打印出来`sizeof(*p)`看看每个数组有多大——分配的块是那个的 20 倍），并将指向该内存块的指针分配给`p`.

所以，`p`现在指向一个包含 20 个 10 数组的数组的第一个元素`int`。

如果它有助于理解，代码相当于：

```
typedef int my_array[10];
my_array *p = malloc(20 * sizeof(my_array)); 
```

第二行可能看起来更像你习惯的`malloc`. 不过，您仍然可以（并且应该）使用`sizeof(*p)`而不是`sizeof(my_array)`。

`malloc`非常简单——它需要一个数字，然后分配那么多字节。它不关心内存的类型。因此，当您不确定要分配多少内存时，您总是可以简单地打印该数字（或在调试器中查看它）。

# extjs - 通过代码禁用按钮

> ID：12640621
> 
> 赞同：-2
> 
> 时间：2012-09-28T13:05:29.633
> 
> 标签：extjs, extjs4, extjs4.1

我需要知道如何通过代码启用/禁用按钮；

到目前为止我的工作；

```
 var button= Ext.ComponentQuery.query('#id> #button1')[0];
button.disable(); 
```

我也试过；

```
button.setDisable(true); 
```

没有任何效果。解决方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T13:06:53.360

你能隐藏按钮吗？
button.Visible = false;

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T13:11:01.000

```
button.set({disabled: 'disabled'}); 
```

# c# - 分组时将数据持久化到集合

> ID：12640638
> 
> 赞同：0
> 
> 时间：2012-09-28T13:07:01.460
> 
> 标签：c#, wpf, xaml, listview, grouping

我有一个集合，我在 ListView 中表示它，它按 OrderID 和 Expander 分组。

在 Expander Header 中，我显示了 OrderID 以及一个 Invoice TextBox。在实际的 ListView.View 中，我显示了 CustomerName、OrderID 和一个 Invoice TextBox。因此，每一行数据都有自己的发票文本框，每个分组标题都有一个发票文本框。

当我在 Group Header Invoice TextBox 中输入一个值时，它会自动更新它的成员 Invoice TextBoxes。但个别行不会更新分组发票文本框。

![截屏](../Images/f827bab2b81555d27fae6fe1869245a6.png)

从图像中可以看出（这描述得更好）

现在，当用户单击“处理选定项目”按钮时，我希望能够使用 TextBoxes 中的 InvoiceID 更新集合。所以不知何故，我需要将分组的行链接到 Collection 以及 GroupHeader 行。这可能吗？

这是代码：WPF

```
<UserControl x:Class="TestGrouping.MainWindowView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
     Height="350" Width="525"
     xmlns:cal="http://www.caliburnproject.org">

<UserControl.Resources>
    <CollectionViewSource x:Key='src' Source="{Binding NewOrders}">
        <CollectionViewSource.GroupDescriptions>
            <PropertyGroupDescription PropertyName="OrderID" />
        </CollectionViewSource.GroupDescriptions>
    </CollectionViewSource>
    <CollectionViewSource x:Key="OrderGroup" Source="{Binding Path=NewOrders}" />

    <Style x:Key="CustomListViewItemStyle" TargetType="{x:Type ListViewItem}">
        <Style.Triggers>
            <Trigger Property="ItemsControl.AlternationIndex" Value="0">
                <Setter Property="Background" Value="#f6f2f2"></Setter>
            </Trigger>
        </Style.Triggers>
    </Style>
</UserControl.Resources>

<Grid x:Name="LayoutRoot" ShowGridLines="False" >

    <Grid.RowDefinitions>
        <RowDefinition Height="Auto" />
        <RowDefinition Height="Auto" />

    </Grid.RowDefinitions>
    <Button Grid.Column="0" Grid.Row="0" x:Name="ProcessItems" Content="Process Selected Items" HorizontalAlignment="Left" MinWidth="80" cal:Message.Attach="ProcessItems($datacontext)"/>

    <ListView ItemsSource="{Binding Source={StaticResource src}}" BorderThickness="1" Grid.Column="0" Grid.Row="1" Height="580">
        <ListView.GroupStyle>
            <GroupStyle>
                <GroupStyle.ContainerStyle>
                    <Style TargetType="{x:Type GroupItem}">
                        <Setter Property="Margin" Value="0,0,0,5"/>
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="{x:Type GroupItem}">
                                    <Expander IsExpanded="{Binding Mode=TwoWay, Path=IsSelected, RelativeSource={RelativeSource AncestorType=ListBoxItem, Mode=FindAncestor}}" BorderBrush="#FFA4B97F" BorderThickness="1,1,1,1" >
                                        <Expander.Header>
                                            <DockPanel>
                                                <TextBlock FontWeight="Bold" Text="OrderID : "  Margin="5,0,0,0" />
                                                <TextBlock FontWeight="Bold" Text="{Binding Path=Name}"  Margin="5,0,0,0" Width="100"/>
                                                <TextBlock FontWeight="Bold" Text="Count : "  Margin="5,0,0,0" />
                                                <TextBlock FontWeight="Bold"  Text="{Binding Path=ItemCount}" Margin="5,0,0,0" Width="100"/>
                                                <TextBlock FontWeight="Bold"  Text="InvoiceID : " Margin="5,0,0,0" />
                                                <TextBox x:Name="GroupInvoiceID" Margin="5,0,0,0" Width="100" BorderThickness="1" BorderBrush="#FFA4C5E8" />
                                            </DockPanel>
                                        </Expander.Header>
                                        <Expander.Content>
                                            <ItemsPresenter />
                                        </Expander.Content>
                                    </Expander>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                    </Style>
                </GroupStyle.ContainerStyle>
            </GroupStyle>
        </ListView.GroupStyle>

        <ListView.View>
            <GridView AllowsColumnReorder="False" x:Name="GridView1">
                <GridViewColumn Header="Customer Name" DisplayMemberBinding="{Binding Path=Customer}" ></GridViewColumn>
                <GridViewColumn Header="Order ID" DisplayMemberBinding="{Binding Path=OrderID}" ></GridViewColumn>
                <GridViewColumn Header="Invoice ID">
                    <GridViewColumn.CellTemplate>
                        <DataTemplate>
                            <TextBox x:Name="InvoiceID" HorizontalAlignment="Stretch" Width="100" Text="{Binding ElementName=GroupInvoiceID, Path=Text, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}" BorderThickness="1" BorderBrush="#FFA4C5E8" />
                        </DataTemplate>
                    </GridViewColumn.CellTemplate>
                </GridViewColumn>

            </GridView>
        </ListView.View>

    </ListView>

</Grid> 
```

这是代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using Caliburn.Micro;
using System.Collections.ObjectModel;
using System.Windows;

namespace TestGrouping
{
public class MainWindowViewModel : Conductor<object>
{

    public MainWindowViewModel() {

        List<OrderViewModel> all = new List<OrderViewModel>();
        OrderViewModel ovm = new OrderViewModel();
        ovm.ID = 1;
        ovm.Customer = "cust1";
        ovm.OrderID = "0001";
        all.Add(ovm);
        ovm = new OrderViewModel();
        ovm.ID = 2;
        ovm.Customer = "cust2";
        ovm.OrderID = "0001";
        all.Add(ovm);
        ovm = new OrderViewModel();
        ovm.ID = 3;
        ovm.Customer = "cust3";
        ovm.OrderID = "0002";
        all.Add(ovm);
        ovm = new OrderViewModel();
        ovm.ID = 4;
        ovm.Customer = "cust3";
        ovm.OrderID = "0003";
        all.Add(ovm);

        this.NewOrders = new ObservableCollection<OrderViewModel>(all);
        this.NotifyOfPropertyChange(() => this.NewOrders);
    }

    public ObservableCollection<OrderViewModel> NewOrders { get; private set; }

    public void ProcessItems(object obj)
    {

    }

}

public class OrderViewModel 
{
    public OrderViewModel()
    {

    }

    int _ID;
    public int ID
    {
        get { return _ID; }
        set
        {
            if (value == _ID)
                return;

            _ID = value;

        }
    }

    string _Customer;
    public string Customer
    {
        get { return _Customer; }
        set
        {
            if (value == _Customer)
                return;

            _Customer = value;

        }
    }

    string _OrderID;
    public string OrderID
    {
        get { return _OrderID; }
        set
        {
            if (value == _OrderID)
                return;

            _OrderID = value;
        }
    }

    string _InvoiceNumber;
    public string InvoiceNumber
    {
        get { return _InvoiceNumber; }
        set
        {
            if (value == _InvoiceNumber)
                return;

            _InvoiceNumber = value;
        }
    }

}

} 
```

我知道这很长，但我试图提供尽可能多的信息。任何帮助都会很棒，或者任何指向正确方向的指针。如果我错过了任何信息，请大声喊叫。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T09:55:10.150

我已经设法解决了这个问题 - 可能不是最优雅的，但我认为它有效。

我向项目 TextBox 添加了一个 Change 事件，它将更新集合。所以我的 Listview.View 现在如下：

```
<ListView.View>
            <GridView AllowsColumnReorder="False" x:Name="GridView1">
                <GridViewColumn Header="Customer Name" DisplayMemberBinding="{Binding Path=Customer}" ></GridViewColumn>
                <GridViewColumn Header="Order ID" DisplayMemberBinding="{Binding Path=OrderID}" ></GridViewColumn>
                <GridViewColumn Header="Invoice ID">
                    <GridViewColumn.CellTemplate>
                        <DataTemplate>
                            <TextBox x:Name="InvoiceID" HorizontalAlignment="Stretch" Width="100" Text="{Binding ElementName=GroupInvoiceID, Path=Text, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}" BorderThickness="1" BorderBrush="#FFA4C5E8" 
                                     cal:Message.Attach="[Event TextChanged]=[Action InvoiceID_TextChanged($datacontext, $eventArgs)]" />
                        </DataTemplate>
                    </GridViewColumn.CellTemplate>
                </GridViewColumn>

            </GridView>
        </ListView.View> 
```

我将以下代码添加到 ModelView

```
public void InvoiceID_TextChanged(object obj, RoutedEventArgs e)
    {
        OrderViewModel ovm = obj as OrderViewModel;
        string invoiceIDText = (e.OriginalSource as TextBox).Text;
        foreach (OrderViewModel o in NewOrders)
        {
            if (o.ID == ovm.ID)
            {
                o.InvoiceNumber = invoiceIDText;
            }
        }
    } 
```

这将使用正确的 InvoiceNumber 更新集合“NewOrders”。单击“处理项目”按钮后，集合已更新，现在可以保存到数据库中。

我希望这可以帮助别人。

# php - 如何使用php测试mysql时间戳是否在白天（8:00到20:00之间）？

> ID：12640641
> 
> 赞同：0
> 
> 时间：2012-09-28T13:07:25.827
> 
> 标签：php, mysql, timestamp, strtotime

我正在制作一个在表格中显示一些信息的页面，并且我希望该表格在夜间的条目上具有较暗的背景。

我在想类似的东西：

```
 if ( ($timestamp < strtotime('2012-02-16 20:00:00') && ($timestamp > strtotime('2012-02-16 08:00:00') ){} 
```

但我希望它全年 24/7 运行。如何将日期设为任何日期 (* - * - *) ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T13:10:43.373

不确定是什么格式`$timestamp`，但如果它是 Unix 时间戳格式（纪元秒），你可以这样做：

```
$hour = date('H', $timestamp);
if ($hour >= 8 && $hour < 20) 
```

如果它不是 Unix 时间戳格式，也许你可以在你的查询中使用这个[`UNIX_TIMESTAMP()`](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_unix-timestamp)函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T13:12:22.920

```
$curtime = date('G', $timestamp);
if ($curtime >= 8 && $curtime <= 20)
{
  //do whatever
} 
```

我建议阅读[date()](http://php.net/manual/en/function.date.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T13:12:51.983

使用也可以使用[mktime()](http://php.net/manual/en/function.mktime.php/)函数来制作时间戳。

例如，今天晚上 8 点：

```
$mktime = mktime(20, 0, 0, date(n), date(j), date(Y)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T13:14:00.860

也许您可以仅使用小时组件格式化日期，例如

整数（日期（'H'，$时间戳））

并测试这个值

# macos - Applescript 运行检测显示器

> ID：12640643
> 
> 赞同：4
> 
> 时间：2012-09-28T13:07:31.473
> 
> 标签：macos, applescript

当我将外接显示器插入我的 Macbook 并唤醒它时，显示器的分辨率通常是错误的。在 Mountain Lion 之前，我能够运行以下 applescript 来检测显示器：

```
tell application "System Preferences" to activate
tell application "System Events"
    tell process "System Preferences"
        click menu item "Displays" of menu "View" of menu bar 1
        tell button "Detect Displays" of window 1 to click
    end tell
end tell
tell application "System Preferences" to quit 
```

但是，在 10.8 中，“检测显示器”按钮要求您按**Option**键才能显示它，因此脚本会出现以下错误：

> 错误“系统事件出现错误：无法获取进程“系统偏好设置”的窗口 1 的“检测显示器”按钮。” 来自进程“系统偏好设置”窗口 1 的按钮“检测显示器”的编号 -1728

我的 applescript 技能还不够初级，而且我的 google-fu 并没有让我偶然发现答案。

*如何修改脚本以单击现在隐藏的检测显示按钮？*

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-28T13:47:02.760

尝试这个...

```
tell application "System Preferences"
    activate
    reveal pane "com.apple.preference.displays"
end tell

delay 0.5

tell application "System Events"
    tell process "System Preferences"
        try --don't even consider not using a try block!
            key down option
            delay 0.2
            click button "Detect Displays" of window 1
            delay 0.2
            key up option
        on error --logging out is the only other way to clear these
            key up option
        end try
    end tell
end tell 
```

# ruby-on-rails - 如何让 `self` 引用 Mixin 模块中的我的类（即使它是在方法的上下文之外声明的）？

> ID：12640645
> 
> 赞同：0
> 
> 时间：2012-09-28T13:07:37.217
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, module, mixins

我正在使用 Ruby on Rails 3.2.2。我已经为模型类实现了一个 Mixin 模块`Article`，我想`self`引用它`Article`（即使，例如，如果它在方法的上下文之外声明）。也就是说，我正在尝试执行以下操作：

```
module MyModule
  extend ActiveSupport::Concern

  # Note: The following is just a sample code (it doesn't work for what I am 
  # trying to accomplish) since 'self' isn't referring to Article but to the
  # MyModule itself.
  include MyModule::AnotherMyModule if self.my_article_method?

  ...
end 
```

上面的代码会产生以下错误：

```
undefined method `my_article_method?' for MyModule 
```

如何`my_article_method?`在上面运行，以便`self`（或其他）引用`Article`模型类？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T13:10:53.957

你可以使用`self.included`钩子：

```
def self.included(klass)
  klass.include MyModule::AnotherMyModule if klass.my_article_method?
end 
```

我宁愿把逻辑放在实际的`Article`课堂上。该模块不需要知道它包含的类：

```
class Article
  include MyModule
  include MyModule::AnotherModule if self.my_article_method?
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T13:22:57.473

只需使用`Concern`'`included`方法：

```
module MyModule
  extend ActiveSupport::Concern

  included do
    include MyModule::AnotherModule if self.my_article_method?
  end
end 
```

# c# - 是否可以在不将值类型设置为零、false 或 null 的情况下清除列表？

> ID：12640648
> 
> 赞同：1
> 
> 时间：2012-09-28T13:07:58.993
> 
> 标签：c#, .net, clr

我用[ILSpy](http://ilspy.net/)反编译了 mscorlib 库，并注意到该`List.Clear`方法在`Array.Clear(this._items, 0, this._size)`内部使用。

```
// System.Collections.Generic.List<T>
/// <summary>Removes all elements from the <see cref="T:System.Collections.Generic.List`1" />.</summary>
public void Clear()
{
    if (this._size > 0)
    {
        Array.Clear(this._items, 0, this._size);
        this._size = 0;
    }
    this._version++;
} 
```

接下来，此`Array.Clear`方法将所有数组元素设置为零、false 或 null，如其描述的那样。也在`List.RemoveRange`用`Array.Clear`方法。

```
// System.Array
/// <summary>Sets a range of elements in the <see cref="T:System.Array" /> to zero, to false, or to null, depending on the element type.</summary>
/// <param name="array">The <see cref="T:System.Array" /> whose elements need to be cleared.</param>
/// <param name="index">The starting index of the range of elements to clear.</param>
/// <param name="length">The number of elements to clear.</param>
/// <exception cref="T:System.ArgumentNullException">
/// <paramref name="array" /> is null.</exception>
/// <exception cref="T:System.IndexOutOfRangeException">
/// <paramref name="index" /> is less than the lower bound of <paramref name="array" />.-or-<paramref name="length" /> is less than zero.-or-The sum of <paramref name="index" /> and <paramref name="length" /> is greater than the size of the <see cref="T:System.Array" />.</exception>
/// <filterpriority>1</filterpriority>
[ReliabilityContract(Consistency.WillNotCorruptState, Cer.Success), SecuritySafeCritical]
[MethodImpl(MethodImplOptions.InternalCall)]
public static extern void Clear(Array array, int index, int length); 
```

是否可以忽略`Array.Clear(this._items, 0, this._size)`值类型的第一个代码清单中的方法调用？我认为没有必要。我对吗？

这个问题不仅适用于 List，而且适用于其他通用集合。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T13:28:50.597

垃圾收集器不知道超出`_size`的元素在逻辑上是不可达的。它所看到的只是一个充满对象句柄的数组，因此它必须保持这些对象中的每一个都处于活动状态。出于这个原因，实际上将所有句柄设置`null`为清除容器的必要部分，以允许垃圾收集器清理刚刚从列表中删除的对象（如果程序的其他部分没有它们的句柄）。

对于原始类型 ( `List<int>`)，这不是必需的，但 .NET 不允许专门化泛型类型。值类型可以包含句柄，因此即使 .NET 有专门化，也无法对它们进行优化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T13:16:28.797

对于数组没有。对于列表，您可以。

请记住，数组会预先分配内存，因此您需要将这些元素设置为默认值（在数字的情况下，它是 0）。

现在，在列表的情况下，请记住您有一个指向列表第一个元素的标题指针，您可以做的就是将列表标题指向 null，如果需要，将长度变量设置为 0，这样您的列表将是空的（清除）而不触及所有元素。现在这是在[ADT](http://en.wikipedia.org/wiki/Abstract_data_type)链表上。

在 .NET CLR List 上，通过实现很清楚 Clear 操作是 O(N) 并且需要遍历[列表以释放引用](http://msdn.microsoft.com/en-us/library/dwb5h52a.aspx)，这是为什么呢？我认为 java[规范](http://www.docjar.com/docs/api/java/util/LinkedList.html)（尽管这是 .NET）可以让您了解原因：

> 清除节点之间的所有链接是“不必要的”，但是： - 如果丢弃的节点超过一代，则有助于分代 GC - 即使存在可访问的迭代器，也肯定会释放内存

# entity-framework - 如何检测实体是否添加到 DbContext？

> ID：12640650
> 
> 赞同：0
> 
> 时间：2012-09-28T13:08:00.727
> 
> 标签：entity-framework, ef-code-first, dbcontext, entity-framework-5, savechanges

> **可能重复：**
> [DBContext 添加/附加事件？](https://stackoverflow.com/questions/5407860/dbcontext-added-attached-event)

我在**EF 5****`ID-Generating`**中使用自定义策略。我重写了检测添加实体的方法并将它们设置为s。但是在调用之前无法访问新实体。我搜索 SO 并找到一些答案。[这里](https://stackoverflow.com/questions/9694696/dbcontext-changetracker-id-of-added-entity-for-auditing)和[这里](https://stackoverflow.com/questions/5407860/dbcontext-added-attached-event)。在第二个链接中，[的答案](https://stackoverflow.com/a/7409014/974276)显示了一种检测似乎有效的更改的方法。但它只有一张赞成票，没有被接受。我可以使用@KVerwold 建议的方式吗？你认为这可能会导致任何错误 - 逻辑或任何错误？**或者**你有什么其他建议吗？提前致谢。****`SaveChanges`**`ID``ID`**`SaveChanges`**[`@KVerwold`](https://stackoverflow.com/a/7409014/974276)**

 ***** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T18:18:01.493

我建议除非对自定义 ID 有强烈的业务需求，否则不要实施它们。我认为您提到的帖子只有一张赞成票，因为在我看来，没有太多人正在实施自定义 id 生成，因为它没有通过气味测试。****

# c# - ServiceStack Razor 身份验证

> ID：12640653
> 
> 赞同：7
> 
> 时间：2012-09-28T13:08:04.533
> 
> 标签：c#, asp.net-mvc, servicestack

我正在查看 Rockstars 示例和 ServiceStack.Razor。

我如何着手将身份验证安装到secure.cshtml 页面中。因此，如果需要，我可以将用户重定向到 Login.cshtml。

我只从 SocialBootstrapApi 示例中了解到，如果我混合 MVC hybird，我可以将 [authenticate()] 放在 ServiceStackController 中来实现这一点。

但是如果我只想要一个没有 .net MVC 的纯 SS 项目怎么办？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-28T14:21:23.463

[Authenticate](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.ServiceInterface/AuthenticateAttribute.cs)属性只是一个普通的 ServiceStack请求[过滤器属性](https://github.com/ServiceStack/ServiceStack/wiki/Filter-attributes)，即它在 MVC 和 ServiceStack 中都有效。

应用此过滤器将为所有非 HTML 请求返​​回**401 UnAuthorized响应。**例如，如果您使用 Ajax 调用它，您可以检测到此错误响应并在客户端上执行重定向。

从 ServiceStack v3.9.23+ 开始，默认情况下，该`[Authenticate]`属性将自动将所有身份验证错误重定向到`~/login`url。

您可以在注册 AuthFeature 时覆盖此 url，例如：

```
Plugins.Add(new AuthFeature(...) { HtmlRedirect = "/path/to/my/login" }); 
```

这将全局应用于所有`[Authenticate]`属性，或者您可以临时覆盖它：

```
[Authenticate(HtmlRedirect="/path/to/my/login")] 
```

注意：属性是可继承的，因此您可以将其添加到**SecuredService**类中，所有子类都将继承其行为。

## 手动重定向

要手动重定向未经授权的 HTML 请求，您可以使用以下方法进行自己的检查 + 重定向：

```
public object Secured(Request request) {
    if (!base.SessionAs<MyCustomSession>().IsAuthenticated)
        return new HttpResult(HttpStatusCode.Redirect, "Un Authorized") { 
           Headers = { {"Location", "/path/to/login" } } };
} 
```

上面的重定向还有一个 DRY 包装器，您可以使用它来代替：

```
public object Secured(Request request) {
    if (!base.SessionAs<MyCustomSession>().IsAuthenticated)
        return HttpResult.Redirect("/path/to/login");
} 
```

# php - PHP 简单 HTML DOM 单元格值

> ID：12640657
> 
> 赞同：1
> 
> 时间：2012-09-28T13:08:09.033
> 
> 标签：php, html-parsing, simple-html-dom

我在解析 PHP Simple HTML DOM -lib 时遇到问题。

HTML：

```
<td>
<span>text</span>
actual text i want to pick up
<span>text2</span>
</td> 
```

我不知道如何从中获取“我想要获取的实际文本”-部分。$node->innertext 和 $node->plaintext 在 span-tags 中也有文本。

编辑：我试过

```
$node->innertext // prints the whole thing
$node->plaintext // prints "textactual text i want to pick uptext"
$node->tag //prints td 
```

该手册似乎没有明确提及像我这样的案例。

如果有比该库更好的解析 html 的方法，我也愿意接受其他建议。通过那个图书馆，我大部分都得到了我想要的东西，但是我无法拿起这个文本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T10:24:41.640

好的，我想出了如何访问所需的信息。尝试了关于 $node->children($x)->innertext 的不同组合，但这没有帮助。这种方式感觉不“正确”，但在我的情况下有效。

```
foreach($node->nodes as $c) {
   if($c->tag == "text")
     $text = $c->innertext;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T13:23:45.657

您可以使用以下[str_get_html](http://simplehtmldom.sourceforge.net/)

```
$source = '<td>
<span>text</span>
actual text i want to pick up
<span>text2</span>
</td>';

$dom = str_get_html($source);
var_dump($dom->plaintext); 
```

输出

```
text actual text i want to pick up text2 
```

# c++ - 没有数据库连接的字符串转义

> ID：12640659
> 
> 赞同：2
> 
> 时间：2012-09-28T13:08:28.727
> 
> 标签：c++, libpqxx

我正在尝试使用字符串转义功能，而无需访问打开的 pqxx::connection。

考虑以下代码：

```
#include <pqxx/pqxx>
#include <iostream>

int main() {
    pqxx::connection c;
    std::cout << c.quote("this is a test") << std::endl;
} 
```

它抛出我的连接被打破了。如果有另一种方法可以实现这一点（希望没有数据库连接），有人可以给我一个标志吗？我忽略了什么吗？

### 更新：

[我在libpq](https://www.postgresql.org/docs/9.5/libpq-exec.html#LIBPQ-EXEC-ESCAPE-STRING)的文档中找到了为什么此功能可能需要活动连接的可能原因：

> 与 PQescapeStringConn 的唯一区别是 PQescapeString 不采用 PGconn 或错误参数。因此，它无法根据连接属性（例如字符编码）调整其行为，因此可能会给出错误的结果。此外，它无法报告错误情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2021-04-25T07:53:41.410

我遇到过同样的问题。我解决问题的方法如下所示。这是一个不能完全解决问题的技巧，但是，惰性部分它只在整个运行时执行中执行一次，并且最大限度地减少了它。真正的问题是 libpqxx 的编写方式。

```
std::string
quote(const std::string& str, const std::string& database_connection)
{
    try {
        static pqxx::lazyconnection C {database_connection};
        static bool disconnect = true;
        if(disconnect) {
            C.disconnect();
            disconnect = false;
        }
        return C.quote(str);
    } catch (const std::exception &e) { throw e.what(); }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T17:07:41.503

无需使用 pqxx 即可轻松使用字符转义序列。

```
std::cout << "\"This is a qoute\"" << std::endl; 
```

'\' 字符开始一个转义序列。对于 qoutes，您只需说 \"

其他序列： [http ://en.cppreference.com/w/cpp/language/escape](http://en.cppreference.com/w/cpp/language/escape)

# security - Lightswitch 2012 部署安全数据库

> ID：12640661
> 
> 赞同：0
> 
> 时间：2012-09-28T13:08:42.043
> 
> 标签：security, roles, visual-studio-lightswitch

我对 Lightswitch (2012) 相当陌生，如果使用指定角色的 Windows 身份验证，我对如何部署成员表感到困惑。我的困惑在于两个连接字符串，一个有一个名为 _intrinsic 的键，另一个有一个 guid 作为键。当我将我的应用程序部署为 OOB 时，我遇到连接问题并且应用程序失败。如果我在没有安全性的情况下进行部署，那么该应用程序可以正常工作。我试图找出我在部署设置中做错了什么，因为我有三个位置可以输入 conn 字符串值。任何人都可以帮我解决这个问题，并给我一个关于哪些连接用于应用程序数据以及哪些连接用于安全性的高级信息吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T14:04:56.010

如果您将用户/角色添加到您的应用程序，那么这些将存储在所谓的*内部*数据库中。两个连接字符串用于：

1.  管理员帐户，在目标 SQL Server 实例中具有***创建***内部数据库所需的权限*。*
**   一个*用户*帐户，在目标 SQL Server 实例中具有所需的权限，允许 LS 应用程序***连接***到部署的数据库（这还包括访问您在 LightSwitch 中创建的任何表/实体）。*

 *LS V1 (2011) 曾经让*管理*连接字符串出现在*用户连接字符串***上方**的发布向导中，但根据记忆，LS V2 (2102) 中的顺序已被切换。但是你的标签很清楚，所以现在你知道它们的用途，就不应该混淆哪个是哪个。

 *您可能会在向导（或 web.config 文件）中看到的唯一其他连接字符串用于任何**附加**的数据源。这些数据库已经存在，因此不需要管理连接字符串，因此只有一个连接字符串用于用户连接。**

# c# - 休息服务安全

> ID：12640662
> 
> 赞同：3
> 
> 时间：2012-09-28T13:08:45.740
> 
> 标签：c#, security, rest

我有各种 c# rest 服务在数据库上执行正常的 CRUD 任务，

例如，我有一个休息服务将客户添加到我的客户数据库表中，该表需要如下所示的 XML，

```
<CreateCustomerRequest>
    <Name>Customer name</Name>
    <Surname>Customer surname</Surname>
</CreateCustomerRequest> 
```

因此，任何知道 URL 和正确 XML 结构的人都可以调用 rest 服务并将客户插入到我的数据库中。确保不执行未经授权的插入的最佳方法是什么？也许一个密钥发送，请求计算为 MD%([name field] + [surname field] + [shared client/server key]??

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T13:25:21.317

您可以在 REST 服务中使用基本身份验证。每个调用都需要发送身份验证信息，否则调用将失败并返回 401。

基本上，需要将以下内容附加到请求的内容标头中：

```
Authorization: Basic YWRtaW46YWRtaW4x 
```

其中 YWRtaW46YWRtaW4x 是 base64 编码的用户名：密码

如果您需要该级别的安全性，您还可以实施 SSL 并让您的客户端随每个请求一起发送证书。

除非您是该领域的专家，否则不要试图发明自己的安全性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T13:31:12.313

如果您使用的是 c#，只需使用内置的 Asp.Net 身份验证提供程序。

您可以使用 asp.net 支持的任何类型的身份验证，甚至可以推出自己的提供程序。

使用框架支持的东西总是更好。

[http://www.asp.net/web-forms/tutorials/security](http://www.asp.net/web-forms/tutorials/security)

[http://msdn.microsoft.com/en-us/library/ms733071.aspx](http://msdn.microsoft.com/en-us/library/ms733071.aspx)

# c# - 以编程方式强制 TFS 工作项的字段值

> ID：12640672
> 
> 赞同：7
> 
> 时间：2012-09-28T13:09:16.717
> 
> 标签：c#, tfs, tfs-sdk, workitem

我正在编写一个实用程序来读取遗留错误跟踪系统中的所有缺陷，并将它们导入 TFS (2008/2010)。我正在使用 TFS API 创建新的 WorkItems，设置它们的字段，然后保存它们。但是，我无法修改“创建者”和“创建日期”字段，因为它们是由系统设置的。（还有其他字段我希望能够为其强制值，例如将提交者设置为不是有效 TFS 用户的人）

```
// these fail with "The value for the field 'Created By' cannot be changed."
defectWorkItem.Fields["Created By"].Value = defect.Submitter;
defectWorkItem.Fields["Created Date"].Value = defect.SubmitDate; 
```

显然，如果我不能设置这些字段，我最终会得到所有遗留错误，看起来它们是由同一个人在同一日期创建的。

有没有办法可以使用 API，但强制更改通常受保护的字段？我已经研究过直接访问 TFS 数据库表，但架构看起来很复杂，我认为尝试自己修改那里的数据会很冒险。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-28T23:59:38.423

如果您是服务帐户并打开绕过规则功能，则允许您设置`Created Date`和字段。`Created By`

`WorkItemStore`您可以在使用此标志创建类实例时选择绕过规则： `WorkItemStoreFlags.BypassRules`.

请注意，您只能为工作项的第一次修订设置这些字段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T13:21:54.453

只是一个建议：在迁移时在工作项描述的开头插入此文本：

*   从系统 XXX 迁移
*   原创作日期：2012年1月1日
*   原创作者：John Doe

# javascript - Android横向/纵向视口不同

> ID：12640673
> 
> 赞同：1
> 
> 时间：2012-09-28T13:09:20.020
> 
> 标签：javascript, android, iphone, html, css

我正在开发一个移动网站...为了测试这一点，我为 android 创建了不同的模拟器并使用 iphone 模拟器。问题是在iPhone上的方向更改上调用window.innerWidth，如果纵向320和横向480，视口会发生变化，但在android上，横向和纵向的视口是相同的（例如，在分辨率480x800中，视口在横向/横向为320/肖像）。我的视口元数据是：

```
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"> 
```

这是正确的行为吗？

提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T13:17:11.167

缺少您的视口元标记的发布。但无论如何，你是对的：innerWidth/Height 不适应方向。如果您想根据方向处理布局，我建议使用 CSS3 媒体查询。文档可以在这里找到：[点击](http://www.w3.org/TR/css3-mediaqueries/)

# c# - ASP.NET：DropDownList 中的 DataValueField

> ID：12640676
> 
> 赞同：0
> 
> 时间：2012-09-28T13:09:44.983
> 
> 标签：c#, asp.net

我正在尝试创建两个下拉列表，第一个带有用户列表，第二个只有当我单击“确定”按钮时才可见，显示用户的帐户列表。aspx 页面代码如下：

```
User:
<asp:SqlDataSource id="sourceUsers" runat="server" ConnectionString="<%$ ConnectionStrings:ct2012 %>"
    SelectCommand="SELECT name, id FROM users" />
<asp:DropDownList id="codUsers" runat="server" DataSourceID="sourceUsers"
    DataTextField="name" DataValueField="id" AutoPostBack="true" >
</asp:DropDownList>
<br />
Conto:
<asp:SqlDataSource id="sourceAccounts" runat="server" ConnectionString="<%$ ConnectionStrings:ct2012 %>" />
<asp:DropDownList id="accUsers" runat="server" DataSourceID="sourceAccounts"
    DataTextField="code" DataValueField="id" Visible="false" >
</asp:DropDownList>
<br />
<asp:Button ID="btOK" text="OK" OnClick="cmdNew_Click" runat="server" /> 
```

处理按钮事件的c#代码是：

```
protected void cmdNew_Click(object sender, EventArgs e)
    {
        sourceAccounts.SelectCommand = "SELECT code, id FROM accounts WHERE ID_user=" + codUsers.DataValueField;
        accUsers.Visible = true;
    } 
```

问题是 codUsers.DataValueField 返回字符串“id”而不是索引的值....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T13:12:30.547

利用：

```
`codUsers.SelectedValue` instead of  `codUsers.DataValueField` 
```

或者

```
codUsers.SelectedItem.Value 
```

或者

```
codUsers.Items[codUsers.SelectedIndex].Value 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-28T13:13:53.080

尝试

```
codUsers.SelectedValue; 
```

这个应该适合你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T13:11:59.763

尝试使用`codUsers.SelectedValue;`

```
sourceAccounts.SelectCommand = "SELECT code, id FROM accounts WHERE ID_user=" + 
codUsers.SelectedValue; 
```

您正在为可能的[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)做准备。（也许不是在这种特殊情况下，因为你得到一个预定义的值，但假设这个值来自文本框，你最好使用参数化查询：

```
 string myVariable = someTextBox.Text;
 string sqlString = "Select something from someTable where someField=@someVariable";
 oCmd.Parameters.AddWithValue("@someVariable", myVariable); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-28T13:14:59.713

它应该是`.SelectedValue`财产。

所以 SelectCommand 将是：

```
sourceAccounts.SelectCommand = "SELECT code, id FROM accounts WHERE ID_user=" + 
                                codUsers.SelectedValue; 
```

`DataValueField`将在将值字段分配给 DropDownList 时使用。

和

`DataTextField`用于文本字段。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-28T13:15:32.853

`codUsers.DataValueField` *是*`id`您在此处设置的字符串：`DataValueField="id"`

您正在寻找的是`codUsers.SelectedValue`.

另请注意，对 SQL 语句使用字符串连接是一个*非常*糟糕的主意。在 Google 上快速搜索“ADO .NET Parameterized Queries”，找到[了关于该主题的旧教程](http://www.4guysfromrolla.com/webtech/092601-1.shtml)。自从我使用纯 ADO.NET 进行数据访问以来已经有一段时间了，但我确信那里仍然有很多信息。

基本上，您想使用查询参数工具来构建查询，而不仅仅是字符串连接。（出于 SQL 注入原因和性能原因，以及一般而言更简洁的代码。）虽然我建议更进一步，并使用 LINQ to SQL 或实体框架之类的东西进行数据访问，这会为您在后面进行参数化场景并简单地为您提供一个可以使用的对象模型，而不是直接访问数据库。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-08-25T17:14:48.970

仅使用

```
codUsers.SelectedItem.Text 
```

它将返回，因为它是下拉列表字段数据

# apache-flex - Flex/Java 项目页面未重定向，url 末尾的主题标签

> ID：12640688
> 
> 赞同：1
> 
> 时间：2012-09-28T13:10:38.877
> 
> 标签：apache-flex, redirect, flex3

我有一个 Flex/Java 项目，当我单击应用程序上 html 内的链接时，它会将浏览器 url 更改为新 url，但页面不会重定向到链接，但是如果我转到浏览器 url 栏并按输入，它正确重定向。如果我在空白页面中打开链接，它也可以。

项目网址：[https ://myapp.application.com/#](https://myapp.application.com/#)

重定向网址：[https ://myapp.application.com/#contentId=123&versionId=123](https://myapp.application.com/#contentId=123&versionId=123)

为什么它不只是通过点击链接重定向？

它在 URL 的末尾有一个“#”（井号），这个“#”是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T17:04:12.227

这称为**深度链接**。**#**符号后面的参数实际上代表了你的应用程序的状态，改变它们并不意味着改变 url。此机制允许您管理应用程序的状态并启用历史记录。使用[BrowserManager](http://livedocs.adobe.com/flex/3/html/help.html?content=deep_linking_3.html)类来处理这些参数。

您还可以阅读有关[深度链接](http://livedocs.adobe.com/flex/3/html/help.html?content=deep_linking_2.html)的信息。

# scala - 递归整数分割算法

> ID：12640690
> 
> 赞同：1
> 
> 时间：2012-09-28T13:10:43.640
> 
> 标签：scala, partitioning

我试图计算有多少种方法可以对整数进行分区。到目前为止，我想出了以下功能：

```
def partition(num: Int): Int = {
    if(num == 1) return 1
    if(num <= 0) return 0
    return partition(num-1) + partition(num-(num-1))
}
partition(6) //6 instead of 7 
```

例如：`5 -> 4 + 1, 3 + 2, 2 + 2 + 1, 2 + 1 + 1 + 1, 1 + 1 + 1 + 1 + 1`

如果`num`是 1，它返回 1，因为我认为`partition(1)`是结束。

也许您可以发现其中的逻辑错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T15:44:39.870

我认为这有效：

```
def partition(n: Int): Int = {
  def inner(n: Int, max: Int): Int =
    if (n == 0) 1
    else if (n < 0) 0
    else ((1 to max) map (x => inner(n - x, x))).sum

  if (n == 0) 0
  else inner(n, n-1)
} 
```

一个整数`n`可以划分为`(n-1) + (any way of partitioning 1)`, `(n-2) + (any way of partitioning 2)`, ..., `1 + (any way of partitioning (n-1))`。然而，天真地计算`partition(m)`和`m = 1 to n-1`求和结果将计算一些划分`n`两次的方法，例如`1 + (n-1)`和`(n-1) + 1`。

我们可以通过将分区视为`i{j} < n`总和为的正整数序列来解决这个问题`n`，并且只考虑有序的*序列*。该`inner`方法有一个`max`参数，确保它只考虑带有`i{j} >= i{j+1}`. 所以它会考虑 eg `2 + 1`，但不会考虑`1 + 2`。

`n == 0`在上面的代码中是一个烦人的边缘情况，因为您实际上不想计算空序列。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T23:16:03.540

```
def partition(n: Int): Int = {
    def partDecr(n: Int, decr: Int): Int = {
        if (n == 0) 1
        else if (n < 0 || decr == 0) 0
        else partDecr(n - decr, decr) + partDecr(n, decr - 1)
    }
    partDecr(n, n)
} 
```

*   内部函数接受一个额外的参数来指定下一个可能的减量。
*   首先，它检查我们是否在一个有效的终点（找到了 1 个解决方案）。
*   然后它检查我们是否可以继续（正休息以进行分区，正减量以尝试下一步）。
*   然后它递归成2种方式：
    *   第一个“接受”当前的减量并减少 n ，
    *   第二个“跳过”当前递减，并尝试使用下一个较低的递减。

请注意，这不是尾递归，可以使用相当多的堆栈空间，但它太慢了，这并不重要。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T13:45:46.263

我认为没有“那么简单”的算法来计算你想要的。由于几个原因（我不会讨论），OP 中提出的算法不起作用。

但我将您引导至['Partition' 上的 Wikipedia 条目](http://en.wikipedia.org/wiki/Partition_%28number_theory%29#Partition_function_formulas)，其中还包括一个递归公式。

请注意，这个确切的公式在计算上比 OP 中提出的算法更复杂，也更复杂。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-28T15:24:28.077

我认为它需要另一个参数（可以构成分区的整数，称为它`madeOf`）。这样，您可以将问题分成 2 个*严格较小的*子集。的计数`partition(num, madeOf=(n, n-1, ..., 1))`是总和

*   `partition(num, madeOf=(n-1, ..., 1))`（所有不包含 n 的分区）
*   `partition(num-n, madeOf(n, n-1, ..., 1))`（至少有一个 n 的所有分区）

然后您可以使其更优化，因为`madeOf`只能从一个 int 构造：

```
def part(num: Int, madeOf: Int): Int =
  if (num == 0) 1 // we found a partition!
  else if (num < 0) 0 // no partition...
  else if (madeOf == 0) 0 // no more ways to make partition
  else part(num, madeOf - 1) +  // all the partitions that don't contain n
    part(num - madeOf, madeOf)  // all the partition that contain n

part(5, 4) // 6 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-28T14:10:49.247

您可以使用以下内部函数 - 您只需要创建一个列表，其中的数字<您要分区的数字。比如你要分区4，那么intNumber应该是(1,2,3,4)

```
 def partition(number: Int, intNumbers: List[Int]): Int = {    
if (number <= 0 || intNumbers.isEmpty) 
  0
else if ((number-intNumbers.head)==0) 
  1+partition(number-intNumbers.head,intNumbers)+partition(number,intNumbers.tail)
else 
  partition(number-intNumbers.head,intNumbers)+partition(number,intNumbers.tail) 
```

# macos - mac 上的 Firefox 中奇怪的 3d 渲染

> ID：12640692
> 
> 赞同：1
> 
> 时间：2012-09-28T13:10:45.673
> 
> 标签：macos, firefox, webgl, three.js

今天我遇到了一个奇怪的Firefox问题，与其他问题不同，这是一个非常大的问题。废话不多说，截图如下：

我们在 chrome 和任何其他浏览器（当然 IE 除外）中看到的内容，以及我们所期望的内容：

![动画开始](../Images/606eac1e34974cd182db7f76d4c456ce.png) ![动画中间](../Images/634934f330bde4b0b350fce95c6ddabc.png)

现在向你展示我闹鬼的 Firefox，似乎 mac 做到了：

![这是动画的开头](../Images/54614d15f6dddfb5e4242e358476dc98.png) 等等，还有更多！：

![在此处输入图像描述](../Images/308cf880e4d2ec729fb713b25dc61822.png)

如果我们稍微分析一下 firefox 是如何出错的，我们可以看到我的桌面图标、桌面壁纸、甚至渲染我的非活动 firebug 控制台等元素。即使我只是觉得有必要分享这个，我很好奇为什么，以及如何我可以解决这个“小”问题。谢谢您的考虑。

尊重，盲人

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T14:16:28.980

我不能说你的问题的真正原因是什么，无论是你的错误还是 Firefox 的错误，但以防万一它有帮助，我会说你看到的模式让我想起了我曾经得到的那种着色器输出在我的 MacBook Pro（“2011 年末”）上，当我忘记*在片段着色器**中写入`gl_FragColor`*时。我仍然可以隐约看到几何图形，但所有内容都充满了您在第二张屏幕截图中的那种卷曲图案（可能与 GPU 中的内存布局有关），并且随着相机方向的变化以奇怪的方式变化。

所以也许

*   你确实忘记写了，`gl_FragColor`但 Chrome 的解释恰好有效
*   Firefox 错误地编译了你的着色器
*   您的 GPU 错误地执行了 Firefox 的着色器编译，而不是 Chrome 的
*   由于某些扩展的存在，您在 Firefox 上使用了不同的损坏着色器
*   ...

# prolog - prolog 一阶逻辑

> ID：12640696
> 
> 赞同：5
> 
> 时间：2012-09-28T13:10:55.770
> 
> 标签：prolog, logic, theorem

我试图找到一种方法将以下一阶逻辑表达式放入 Prolog：

```
(p(0) or p(1)) and not (p(0) and p(1)) 
```

这意味着它应该以下列方式响应查询：

```
?- p(0)
Yes.
?- p(1)
Yes.
?- p(0),p(1).
No. 
```

我试图翻译逻辑表达式：

```
(p(0) or p(1)) and not (p(0) and p(1)) <=>
(not p(0) -> p(1)) and (p(0) -> not p(1)) <=>
p(0) <-> not p(1) 
```

使用 Clarks 补全（这表明每个定义理论都可以通过给出 if-halves 放入一个逻辑程序中），我可以获得：

```
p(0) :- not p(1). 
```

不幸的是，这个由此产生的理论只是合理的（它不会推导出错误的信息），而不是完整的（例如：p(1) 无法推导出）。这是克拉克定理的结果。

有谁知道是否有更好的解决方案？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T20:46:50.723

在 Prolog 中，如果两者都`p(0)`成功`p(1)`，则`p(0),p(1)`不能失败。

这意味着您必须构建自己的小型解释器，设计代表您的目标和规则的方法，并*在其中*提出您的问题，例如

```
?- is_true( (p(0),p(1)) ). 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-01T15:54:16.697

这很微妙，但实际上你错了。你不应该期望 p(0) 是必然的。蕴含要求 p(0) 在该理论的所有模型中都为真。但是这个理论有两个模型{p(1)}和{p(0)}。

这在文学中得到了广泛的研究。正如您正确指出的那样，克拉克的完成无法处理这些情况。更糟糕的是，SLDNF 陷入无限递归

```
p(0) :- not p(1). 
p(1) :- not p(0). 
```

哪个是您理论中明确条款的最合适的翻译。

我会为您提供有关不同语义定义的指示，但如果您想要一个快速实用的解决方案，我建议您切换到答案集编程。

这是我最喜欢的求解器的链接（该指南也很好且独立）： [http ://www.cs.uni-potsdam.de/clasp/](http://www.cs.uni-potsdam.de/clasp/)

享受！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-28T14:14:26.360

如果在“目标”逻辑中允许引入命名术语，则可以实现一个虚拟 t/0：

```
t :- p(0), p(1), !, fail.
t :- p(0).
t :- p(1). 
```

那么如果我们两者都有

```
p(0).
p(1). 
```

t/0 将失败。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-29T18:20:13.880

从逻辑上讲，已经在命题逻辑中，它不遵循 (A v B) |- A，也不遵循 (A v B) |- B。如果添加 ~(A & B)，情况也不会改变。

现在的问题是 clark 补全或其他东西是否可以添加更多默认信息，以便我们最终拥有 T |- A 和 T |- B。但按逻辑我们将拥有 T |- A&B。

所以我想在正常情况下不可能做你想做的事情。

再见

PS：非正常设置例如使用轻信后果关系而不是怀疑后果关系。怀疑后果关系是：

```
T |- A iff forall M (if M |- T then M |- A) 
```

轻信后果关系为：

```
T |~ A iff exists M (M |- T and M |- A) 
```

有可能有 T |~ A 和 T |~ B，但没有 T |~ A&B，你的 (A v B) & ~(A & B) 没有任何默认信息已经是这样的理论。

PSS：有一些方法可以滥用 Prolog 系统进行轻信推理，尽管 Prologs 的基础是怀疑推理。诀窍是使用恒等式 T |~ A = ~(T |- ~A)。

但在将其应用于您的示例之前，必须解决在 Prolog 中表示析取的问题。一些析取可以通过以下恒等式和[假设推理](https://stackoverflow.com/a/12651976/502187)来实现：

```
(A v B -> C) == (A -> C) & (B -> C) 
```

# xslt - 检查两个数组是否在 XSLT 中具有匹配项

> ID：12640697
> 
> 赞同：1
> 
> 时间：2012-09-28T13:10:56.030
> 
> 标签：xslt

我有这两个数组：

```
<xsl:variable name="array1" select="umbraco.library:Split($currentPage/websiteThemes, ',')//value"/>
<xsl:variable name="array2" select="umbraco.library:Split($currentPage/websiteThemes2, ',')//value"/> 
```

我想看看数组中哪些元素匹配。我怎样才能做到这一点？

这是 array1 和 array2 的副本的输出：

数组1：

```
<value>1087</value><value>1002</value><value>3202</value> 
```

数组2：

```
<value>1087</value><value>1577</value> 
```

在这个例子中，我想得到值 1087 作为我的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T13:23:51.777

这个问题不太清楚，但我希望这能回答所问的问题：

**这种转变**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:variable name="vArr1" select="/*/arr1/*"/>
 <xsl:variable name="vArr2" select="/*/arr2/*"/>

 <xsl:template match="/">
     <xsl:copy-of select="$vArr1[. = $vArr2]"/>
 </xsl:template>
</xsl:stylesheet> 
```

**应用于此 XML 文档时**（问题中未提供！）：

```
<t>
 <arr1>
  <value>1087</value>
  <value>1002</value>
  <value>3202</value>
 </arr1>
 <arr2>
  <value>1087</value>
  <value>1577</value>
 </arr2>
</t> 
```

**产生（我猜是）想要的结果**：

```
<value>1087</value> 
```

# c++ - Qt/C++：高效绘图

> ID：12640698
> 
> 赞同：18
> 
> 时间：2012-09-28T13:10:57.020
> 
> 标签：c++, qt, graphics, pixel, qpainter

我设计了一个程序，基本上，将几何形状切割成许多小三角形（在“左侧画布”中），对三角形束应用一些简单的数学变换，并以新的配置重新绘制它们。请参阅下面的屏幕截图。

![屏幕盖 1](../Images/9293d0102fc85650c5f060043c48bf2e.png)

为了绘制这些三角形，我使用`QPainter::drawPolygon`. 右边的每个三角形对应左边的一个三角形，所以我知道我想用什么颜色来绘制它。

到目前为止，很好。即使我画了比这更多的三角形（当我使用小得多的三角形来切割形状时），这也足够快了。

我在我的程序中添加了一个功能：我可以绘制从图片中提取的三角形而不是普通的三角形：请参阅以下屏幕截图。

![在此处输入图像描述](../Images/893c4c52a9aec0643c1b8c011ddb018a.png)

问题是我这样做的方式太慢了。这是我的做法：

1.  我穿过所有的三角形
2.  对于每个三角形，我计算将要显示的每个像素的坐标。
3.  对于这些像素中的每一个，我计算图片上相应像素的坐标（这是一个简单的数学运算），然后检索该像素的颜色。
4.  我使用`QPainter::setPen(QColor)`and`QPainter::drawPoint(QPoint)`来绘制像素。

我是 Qt 编程的新手，我对图形一无所知，所以这就是我能想到的。问题是它“不可接受”太慢了（`paintEvent`每个画布的 0.15 秒，而普通三角形的 0.01 秒）。

我运行了一个分析器试图了解发生了什么，我注意到在画布小部件`paintEvent`的

1.  58%的时间花在`QPainter::drawPoint`
2.  27% 的时间花在`QPainter::setPen`

这似乎`QPainter::drawPoint`太复杂和太慢了：我只想让它打印给定颜色的像素，就是这样。

我可能已经找到了解决我的问题的方法：存储一个`QImage`（作为我的画布小部件的成员变量），它代表我希望我的画布显示的全部内容，并在我`paintEvent`的逐像素中完全定义它，然后立即绘制它在我的`paintEvent`结尾`QPainter::drawImage`。我暗示这会快得多。但在我重新重写我的代码之前，我想知道这是否真的是我想要做的。

我希望我没有烦死你！非常感谢您的见解。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-28T13:15:10.037

OpenGL 很好地完成了图像（纹理）坐标映射。您可能想使用某种形式的 OpenGL。Qt 与 OpenGL 有一些绑定，可以帮助您。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-28T13:46:28.133

非 OpenGL 解决方案：

为目标图像使用 RGB 缓冲区。像以前一样完成前 3 个步骤。找到位置和像素颜色后，将其设置在此缓冲区上。然后你使用

```
QImage::QImage ( uchar * data, int width, int height, Format format ) 
```

根据前一个缓冲区构造图像。它接近您提供的解决方案，并且比您目前拥有的解决方案要快得多。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-28T13:31:16.860

一种方法是使用继承自 QGLWidget 的类而不是 QGraphicsScene/QGraphicsView 组合。不幸的是，OpenGL 的学习曲线开始有点陡峭。但是，它会非常快，因为它会直接发生在针对这种操作进行了优化的显卡上。
您将加载图像`QGLWidget::bindTexture()`。
您将图像中的点与三角形网格相关联，并将它们全部发送到您的图形卡。在旧版本的 OpenGL 中（在我看来，它比新的 API 更容易使用），它看起来像这样：

```
glEnable(GL_TEXTURE_2D);

glBegin(GL_TRIANGLES);
for (int ii=0;ii<triangle.size();++ii) {
  for (int jj=0;jj<3;++jj) {
    glTexCoord2d(triangle[ii].tex[jj][0],triangle[ii].tex[jj][1]);
    glVertex2d(triangle[ii].point[jj[0],triangle[ii].point[jj][1]);
  }
}
glEnd(); 
```

`triangle`您制作的将三角形顶点和相关映射保存到图像中的一些数据结构在哪里。显卡将为您处理像素插值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-28T14:13:00.837

除了 OpenGL 之外的另一个选择是使用 OpenCL，这对您来说可能更容易。您只需要将输入/输出位图内存映射到显卡，用 C 语言编写一个处理一个三角形的小内核，然后为每个三角形排队一个内核执行。这将是 CPU 上单核的 100 倍。

这里有一个 OpenCL 主机 api 的 Qt 包装器：

[http://doc.qt.digia.com/opencl-snapshot/index.html](http://doc.qt.digia.com/opencl-snapshot/index.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-22T09:45:35.590

另一种方法是利用光栅绘制引擎中已经有效实现的裁剪和转换。只要两个三角形之间的变换可以用一个 3x3 的增广变换矩阵来表示，你只需要在目标画家上设置它，然后在目标上绘制整个源图像。它将被剪裁和变换以填充目标三角形。如果分析显示出优势，您也可以仅绘制源三角形的边界矩形，而不是整个图像。

这可以并行化，以便您并行处理与 CPU 内核一样多的三角形。

# c# - 加载非托管 DLL，从 JAVA 到 C#

> ID：12640700
> 
> 赞同：1
> 
> 时间：2012-09-28T13:11:09.607
> 
> 标签：c#, java, dllimport

我有一个 Java 应用程序，它具有以下过程（精简到最低限度）：

```
public void connect()
{
   System.loadLibrary("asyncconn");

   pfcAsyncConnection.AsyncConnection_Connect(null, null, null, timeout);
} 
```

在另一个班级

```
package very.long.namespace.pfcAsyncConnection;

public class pfcAsyncConnection
{
  public static native AsyncConnection AsyncConnection_Connect(String paramString1, String paramString2, String paramString3, Integer paramInteger)
    throws jxthrowable;
} 
```

我想将 Java 代码转换为 C# 并这样做：

```
public void connect()
{
   pfcAsyncConnection.AsyncConnection_Connect(null, null, null, timeout);
}

public static class pfcAsyncConnection
{
    [DllImport("asyncconn.dll")]
    public static extern AsyncConnection AsyncConnection_Connect(String s1, String s2, String s3, Int32 i4);
} 
```

它给出了错误“无法在 DLL asyncconn.dll 中找到名为 'AsyncConncetion_Connect' 的入口点”

DLL 是用 C/C++ 编写的，我知道编译时方法名称可能会被破坏。谁能告诉我我是否遗漏了任何 C# 或者我只是真的加载了错误的 DLL？谢谢。

**更新：** 现在我可以在检查后调用该方法`dumpbin \exports asyncconn.dll`以获取损坏的名称`very_long_namespace_AsyncConnection_1Connect()`现在问题是，Java 使用什么机制来构建方法名称？

# android - 将android资源位图批量转换为不同密度的工具

> ID：12640701
> 
> 赞同：9
> 
> 时间：2012-09-28T13:11:10.907
> 
> 标签：android, android-layout, bitmap, resolution, android-resources

我需要在 Android 上发布后支持不同的显示密度

在开发过程中， **drawable-hdpi**已增长到 160 个 png（其中 20 个是 9 个补丁）资产

我现在需要将所有这些位图转换为**mdpi、ldpi**（布局和可绘制 XML 已经很好，**以避免在 LayoutInflater 上引发 OOM**

有没有适合批量转换所有这些位图的工具？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-28T13:15:51.123

这是一个简单的脚本，用于从高分辨率的 Android 绘图创建低分辨率的 Android 绘图。

例如，给定一批 -xhdpi 图像，它可以生成 -hdpi 和 -mdpi 图像。

使用此脚本，可以从创作工具中仅导出最高分辨率的图稿，然后使用一些批处理命令创建较低分辨率的版本。

脚本用法：

```
drawable_convert.py -d res/drawable-mdpi -d res/drawable-hdpi res/drawable-xhdpi-v14/*.png 
```

这将从 xhdpi 获取每个 png 文件，并将低分辨率版本放入 mdpi 和 hdpi 文件夹。

[http://kmansoft.com/2012/05/23/scale-android-drawables-with-a-script/](http://kmansoft.com/2012/05/23/scale-android-drawables-with-a-script/)
[原脚本，https://gist.github.com/2771791](https://gist.github.com/2771791)

* * *

脚本本身，以避免依赖 github gist/original blogpost。
名称**drawable_convert.py**

```
#!/usr/bin/python

import sys
import argparse
import os
import re

'''
A simple script to create lower-resolution Android drawables from higher-resolution ones.

For example, given a batch of -xhdpi images, you can generate -hdpi and -mdpi images.

This makes it possible to only export highest-resolution artwork from image authoring tools, and
automate the rest.

Usage:

   drawable_convert.py -d res/drawable-mdpi -d res/drawable-hdpi res/drawable-xhdpi-v14/select*.png

   ... will take select*.png from xhdpi and place versions into mdpi and hdpi folders.

   Correct resize ratios are computed based on resource directory names.

   Actual scaling is done by ImageMagick's convert command.
'''

class Converter:
    def __init__(self, dstList):
        print u'Dst list: {0}'.format(dstList)
        self.mDstList = dstList

    def convert(self, src):
        for dstpath in self.mDstList:
            (srcpath, srcname) = os.path.split(src)
            dst = os.path.join(dstpath, srcname)
            self.convertOne(src, dst)

    def convertOne(self, src, dst):
        print u'\n*****\n{0} to {1}\n*****\n'.format(src, dst)
        '''
        Determine relative density
        '''
        srcDpi = self.getDpi(src)
        dstDpi = self.getDpi(dst)

        if srcDpi < dstDpi:
            print u'NOT converting from {0}dpi to {1}dpi'.format(srcDpi, dstDpi)
        else:
            factor = dstDpi*100/srcDpi
            print u'Converting from {0}dpi to {1}dpi, {2}%'.format(srcDpi, dstDpi, factor)
            cmd = u'convert -verbose "{0}" -resize "{2}%x{2}%" "{1}"'.format(src, dst, factor)
            os.system(cmd)

    def getDpi(self, f):
        p = os.path.dirname(f)
        if re.match('.*drawable.*\\-mdpi.*', p):
            return 160
        elif re.match('.*drawable.*\\-hdpi.*', p):
            return 240
        elif re.match('.*drawable.*\\-xhdpi.*', p):
            return 320
        else:
            raise ValueError(u'Cannot determine densitiy for {0}'.format(p))

if __name__ == "__main__":
    '''
    Parse command line arguments
    '''
    parser = argparse.ArgumentParser(description='Converts drawable resources in Android applications')
    parser.add_argument('-d', dest='DST', action='append', required=True, help='destination directory')
    parser.add_argument('src', nargs='+', help='files to convert (one or more)')
    args = parser.parse_args()

    cv = Converter(args.DST)
    for src in args.src:
        cv.convert(src)

'''

if [ $# -lt 1 ] ; then
    echo "Usage: $0 file_list"
    exit 1
fi

for f in $*
do
    echo "File: ${f}"
    convert -verbose "${f}" -resize "75%x75%" "../drawable-hdpi/${f}"
    convert -verbose "${f}" -resize "50%x50%" "../drawable-mdpi/${f}"
done

''' 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-02-08T23:39:09.130

Final-Android-Resizer 为我完成了这项工作，使用简单，但拥有我需要的所有选项：[https ://github.com/asystat/Final-Android-Resizer](https://github.com/asystat/Final-Android-Resizer)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-28T13:13:57.473

[Android Asset Studio](http://android-ui-utils.googlecode.com/hg/asset-studio/dist/index.html)可能会有所帮助，尽管它并不完全符合您的要求。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-02-07T08:14:46.690

其他人制作了[这个非常好的工具](https://pypi.python.org/pypi/android-asset-resizer)，它可以从 iOS 资源或您拥有的任何最高分辨率的 Android 资源中自动调整大小。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-03-13T19:18:45.410

我创建了一个工具，可以批量调整不同类型的图像（png、jpg、gif、svg、psd、9-patch ..）。使用高质量的缩放算法并支持某些无损压缩工具，如 pngcrush。有一个 GUI 和命令行 ui。

[https://github.com/patrickfav/density-converter](https://github.com/patrickfav/density-converter)

[![截屏](../Images/001dd7ce600472649809a9d3213d99d2.png)](https://i.stack.imgur.com/gLCOU.jpg)

在您的情况下，您将源比例因子设置为 2 并检查“跳过升级”也将平台设置为 Android。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-08-26T08:50:43.073

看这个：

只需上传并返回所有像素。

[http://romanurik.github.io/AndroidAssetStudio/nine-patches.html](http://romannurik.github.io/AndroidAssetStudio/nine-patches.html)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-11-26T13:36:29.500

我会推荐[Respresso](https://respresso.io?so)，它是一个在线工具，能够为 Android（以及 iOS）创建所有需要的尺寸（从 xxxhdpi 到 mdpi）。

您必须（批量）上传图像，然后使用该[工具的 gradle plugin](https://github.com/pontehu/respresso-client-android)将调整大小/转换后的图像直接同步到您的项目。

**请注意，它需要您[创建一个帐户（免费）](https://app.respresso.io?so)**，因为它会直接将任何更改同步到您的项目。（因此您可以添加/更改图像（svg、pdf、png、jpeg），它会在下一次构建时自动添加/更改项目中转换后的文件。）

目前它不支持 9 个补丁图像。

（我应该注意到我在这个工具上工作，我认为它真的很酷，我个人使用它。我没有分享它。）

# android - 如何通过android将数据从嵌入式系统同步到云端

> ID：12640703
> 
> 赞同：0
> 
> 时间：2012-09-28T13:11:30.160
> 
> 标签：android, embedded, usb, cloud, sync

我有一个运行 Angstrom 的小型嵌入式系统。它不断生成大量数据，我需要这些数据才能到达云中的 MySql 服务器。我想将嵌入式系统的 USB 端口插入 android，将新数据从嵌入式系统拉到手机上，如果手机有 wifi 连接，则将其上传到云端，如果没有，则等到它有 wifi然后上传。

现在是否有任何工具/库可以执行这种类型的同步？

有什么工具可以让嵌入式系统和 android 相互通信？（这里有一些与此类似的问题，但我想我会根据我的独特情况重新提问）。

谢谢，

安东尼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T07:44:43.510

如果您想通过 USB 将数据从嵌入式系统获取到 android 设备，那么[libusb](http://www.libusb.org/)是一个很好的用于 USB 通信的轻量级库。可以在此处找到用于实现基于 Linux 的 Android 附件的 libusb 示例：[android.serverbox.ch](http://android.serverbox.ch/?p=262)。这至少应该让您开始将数据传递给 android 设备。

# java - 两个必需输入字段的 JSF 一条错误消息

> ID：12640705
> 
> 赞同：1
> 
> 时间：2012-09-28T13:11:35.573
> 
> 标签：java, jsf

我试图只显示一个用于两个必需的字段。目前，如果两个字段都为空，则会出现两条错误消息。如果两个或一个字段为空，我想实现只有一条消息。

代码如下所示：

```
<x:inputText
    value="#{bean.proxyUrl}"
    id="idProxyUrl"
    required="true"
    />
<x:outputText value=":" />
<x:inputText
    value="#{bean.proxyPort}"
    id="idProxyPort"
    required="true"
    />
<x:message for="idProxyUrl" errorClass="errorMessage" style="margin-left: 10px;" />
<x:message for="idProxyPort" errorClass="errorMessage" style="margin-left: 10px;" /> 
```

我能做些什么，无论一个或两个字段是否为空，我都只会收到一条消息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T14:35:28.027

您可以为检查第一个组件的 SubmittedValue 的第二个组件指定一个特殊的验证器。我为检查相应的确认密码字段的 PasswordValidator 做了类似的事情。

```
@FacesValidator("passwordValidator")
public class PasswordValidator implements Validator {    

    @Override
    public void validate(FacesContext context, UIComponent component,
            Object value) throws ValidatorException {

        String password = (String) value;

        UIInput confirmComponent = (UIInput) component.getAttributes().get("confirm");
        String confirm = (String) confirmComponent.getSubmittedValue();

        if (password == null || password.isEmpty() || confirm == null || confirm.isEmpty()) {
            FacesMessage msg = new FacesMessage(FacesMessage.SEVERITY_ERROR, "Please confirm password", null);
            throw new ValidatorException(msg);
        }

        if (!password.equals(confirm)) {
            confirmComponent.setValid(false); 
            FacesMessage msg = new FacesMessage(FacesMessage.SEVERITY_ERROR, "The entered passwords do not match", null);
            throw new ValidatorException(msg);
        }

    } 
```

您必须检查其他组件的提交值的原因是因为在生命周期的流程验证阶段调用了验证器。在此阶段完成并且每个提交的值都已通过验证之前，不会应用任何提交的值。

# javascript - Facebook 不会批准行动

> ID：12640706
> 
> 赞同：0
> 
> 时间：2012-09-28T13:11:44.403
> 
> 标签：javascript, facebook-opengraph

我正在尝试创建一个 Open Graph 操作，但我使用 Facebook 的任何操作都迫使我提交它以供批准。

他们要求我提供在我的网站上发布操作的说明。我有，但我收到了这条消息（如下）。我自己已经完成了说明，并且运行良好。

我认为 Facebook 想要的是包含 Facebook 测试帐户的说明，但 Facebook 只允许管理员和开发人员使用未发布的操作，所以这是不可能的。

更重要的是，动作是“分享”。所以我不太清楚为什么它甚至需要被批准。

任何建议都将不胜感激，因为 Facebook 似乎不想在该消息之外与我交流。

> 批准状态：需要更改 请在下面进行更改并重新提交以供审核。我们无法根据提供的使用说明测试此操作。请使用在提交过程中创建的名为 Auth Dialog Preview User 的测试用户测试您的操作。除非您能够通过提供的复制步骤始终如一地将操作发布到此测试用户的时间线，否则请勿提交以供批准。 [https://developers.facebook.com/docs/opengraph/authentication/](https://developers.facebook.com/docs/opengraph/authentication/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T13:18:54.627

在您的应用设置中有一个名为**Roles**的部分。
您可以在此处创建（并以身份登录）测试用户。**Auth Dialog Preview User**可能已经存在
。

# android - 检查 Android 文件系统是否已加密

> ID：12640708
> 
> 赞同：6
> 
> 时间：2012-09-28T13:11:50.767
> 
> 标签：android, security, encryption, filesystems

我们正在开发适用于 Android 的安全应用程序。用户需要对其设备的文件系统进行加密，但我们必须检查这一事实并禁止使用 app。是否可以检查文件系统是否已加密？还有一些 Android < 3.0 的设备支持加密，例如摩托罗拉 RAZR。了解此类设备上的加密会很有趣。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-05-23T22:57:34.280

只是为了澄清 CommonsWare 的答案，您可以在没有任何 Android 权限的情况下*读取设备加密状态。*

```
/**
 * Returns the encryption status of the device. Prior to Honeycomb, whole device encryption was
 * not supported by Android, and this method returns ENCRYPTION_STATUS_UNSUPPORTED.
 *
 * @return One of the following constants from DevicePolicyManager:
 * ENCRYPTION_STATUS_UNSUPPORTED, ENCRYPTION_STATUS_INACTIVE,
 * ENCRYPTION_STATUS_ACTIVATING, ENCRYPTION_STATUS_ACTIVE,
 * ENCRYPTION_STATUS_ACTIVE_DEFAULT_KEY, ENCRYPTION_STATUS_ACTIVE_PER_USER.
 */
@TargetApi(11)
private static int getDeviceEncryptionStatus(Context context)
{
    int status = DevicePolicyManager.ENCRYPTION_STATUS_UNSUPPORTED;

    if (Build.VERSION.SDK_INT >= 11) {
        final DevicePolicyManager dpm =
                (DevicePolicyManager) context.getSystemService(Context.DEVICE_POLICY_SERVICE);
        if (dpm != null) {
            status = dpm.getStorageEncryptionStatus();
        }
    }

    return status;
} 
```

请参阅[DevicePolicyManager](https://developer.android.com/reference/android/app/admin/DevicePolicyManager)和[加密状态标志](https://developer.android.com/reference/android/app/admin/DevicePolicyManager#ENCRYPTION_STATUS_ACTIVATING)的文档。

还值得一提的是，Android 已从全盘加密转向基于文件的加密，以支持直接启动等。请参阅[基于文件的加密](https://source.android.com/security/encryption/file-based)。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-28T13:16:01.310

如果您的应用已注册为[设备管理员](http://developer.android.com/guide/topics/admin/device-admin.html)，您可以调用`getStorageEncryptionStatus()`以`DevicePolicyManager`了解设备的加密状态，API 级别 11 及更高级别。

对于较低 API 级别的任何全设备加密，请联系设备制造商。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-02-09T13:45:01.323

当设备已加密但未启用密码时，澄清先前关于 API < 23`getStorageEncryptionStatus()`返回的答案。`ENCRYPTION_STATUS_INACTIVE`

在 API >= 23 上，它`ENCRYPTION_STATUS_ACTIVE_DEFAULT_KEY`在这种情况下返回。

# c# - C# 字典内部数组大小

> ID：12640711
> 
> 赞同：5
> 
> 时间：2012-09-28T13:12:05.180
> 
> 标签：c#, arrays, dictionary, hashcode, internal

我不确定这是否是在这里问的正确问题，但请不要杀了我:)

我和一个朋友就 C# 的字典发生了争执……她告诉我，如果我说字典有 1 个元素。并且键的哈希码是 100000，那么字典的内部数组将是 100000 的大小！

这是真的吗？我试图在谷歌上找到答案，但由于某种原因我没有找到那个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T13:18:24.520

[根据 MSDN](http://msdn.microsoft.com/en-us/library/x525za90.aspx)，Dictionary 的默认构造函数“具有默认初始容量” 。

它还指出：

> 如果您可以估计集合的大小，则使用指定初始容量的构造函数消除了在向 Dictionary 添加元素时执行许多调整大小操作的需要。

一个这样的构造函数只需要一个`Int32`，它初始化内部存储如下：

> Dictionary 可以包含的元素的初始数量。

字典的“默认初始容量”实际上是类的内部实现细节，因此不会在文档或公共 API 中公开。

反汇编`mscorlib`并`ilspy`检查默认构造函数表明它的实现如下：

```
public Dictionary() : this(0, null)
{
} 
```

该链式构造函数实现如下：

```
public Dictionary(int capacity, IEqualityComparer<TKey> comparer)
{
    if (capacity < 0)
    {
        ThrowHelper.ThrowArgumentOutOfRangeException(ExceptionArgument.capacity);
    }

    if (capacity > 0)
    {
        this.Initialize(capacity);
    }

    this.comparer = (comparer ?? EqualityComparer<TKey>.Default);
} 
```

ie`Initialize()`根本不被默认构造函数直接或间接调用。

`Initialize()`是设置内部存储的方法。

所以实际上，如果你调用默认构造函数，内部存储大小甚至不会初始化，直到你第一次添加一个项目。所以它的大小基本上为零。

`Initialize()`最终在您第一次调用时以零值调用`.Add()`，这设置了事情。

```
private void Initialize(int capacity)
{
    int prime = HashHelpers.GetPrime(capacity);
    this.buckets = new int[prime];
    for (int i = 0; i < this.buckets.Length; i++)
    {
        this.buckets[i] = -1;
    }
    this.entries = new Dictionary<TKey, TValue>.Entry[prime];
    this.freeList = -1;
} 
```

`GetPrime(0)`返回`3`，因此`this.buckets`设置为包含三个整数的数组。

分配值的行`this.entries`看起来有点奇怪，但我看不出 100000 的位置。

**简短的回答**
我认为你的同事错了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T13:25:20.250

哈希码（即`GetHashCode`）用于将项目放入字典使用的存储桶中。

实际使用的容量取决于字典中元素的数量。

用于什么的（可能不准确）伪代码`GetHashCode`就是这样。

```
List<List<KeyValuePair<T,J>>> buckets; // let's assume this get's allocated somewhere (the dictionary allocates this internally)
...
public J GetValueFromDictionary(T key)
{
    int bucketIndex = key.GetHashCode() % buckets.Length;
    return buckets[bucketIndex].Find(x => x.Key == key).Single().Value;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T13:17:34.660

只需使用反射器反编译代码并自行验证即可。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T13:16:30.653

不它不是。类的来源`Dictionary<,>`证明了这一点。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-28T13:22:52.487

这几乎不是这种情况，因为字典的存储比这复杂得多。此外，**可能**是键的哈希码的值**并没有以任何方式**定义字典的大小（我不知道它是如何被捏造的）。

现在，让我们分解字典的存储。

> 只要一个对象被用作字典中的键，它就不能以任何影响其哈希值的方式发生变化。根据字典的相等比较器，字典中的每个键都必须是唯一的。键不能是空引用（在 Visual Basic 中为 Nothing），但值可以是，如果值类型 TValue 是引用类型。
> 
> 字典需要一个相等的实现来确定键是否相等。您可以使用接受比较器参数的构造函数来指定 IEqualityComparer 通用接口的实现；如果未指定实现，则使用默认的通用相等比较器**EqualityComparer.Default**。如果类型 TKey 实现 System.IEquatable 泛型接口，则默认相等比较器使用该实现。

虽然很**可能**会使用哈希码，因为`EqualityComparer.Default`它是这样定义的：

> Default 属性检查类型 T 是否实现了 System.IEquatable 泛型接口，如果是，则返回使用该实现的 EqualityComparer。**否则，它返回一个使用 T 提供的 Object.Equals 和 Object.GetHashCode 覆盖的 EqualityComparer。**

决不能保证这将**是**密钥的生成方式。所以，我希望这对你的论点有所帮助。

最重要的是，哈希码无法确定字典的内部大小，字典是可变的，并且会随着Microsoft 所述的**项目的添加而增长：**

> Dictionary 的容量是 Dictionary 可以容纳的元素的数量。随着元素被添加到字典中，容量会根据需要通过重新分配内部数组来自动增加。

你的朋友在争论之前需要做她的研究。哇！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-06-05T20:00:00.403

作为更新，现在微软提供了 .NET 实现的参考代码，这使得事情比通过反编译更容易。这个问题具体请看

[https://referencesource.microsoft.com/#mscorlib/system/collections/generic/dictionary.cs](https://referencesource.microsoft.com/#mscorlib/system/collections/generic/dictionary.cs) [https://referencesource.microsoft.com/#mscorlib/system/collections/hashtable.cs](https://referencesource.microsoft.com/#mscorlib/system/collections/hashtable.cs)

您可以看到默认容量为 3，如前面的答案中所述。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-09-28T13:17:50.637

不，这不是真的。如果我有

```
Dictionary<int, object[]> dict = new Dictionary<int, object[]>() 
{
    {10000, new object[] { 1, 2, 3, 4 }}
}; 
```

这个字典将包含一个索引为 10000 的对象数组，而不是 9999 个空对象数组插槽，后面跟着我们上面输入的对象。答案是否定的，你朋友错了。

我希望这有帮助。

# sql-server-2008 - 如何让 Sql Server 接受 dd/mm/yyyy 格式？

> ID：12640715
> 
> 赞同：0
> 
> 时间：2012-09-28T13:12:26.297
> 
> 标签：sql-server-2008, visual-studio-2008

因此，我在名为“日期”的列上有一个值为 19/09/2011 的 Excel 文件。我在 Excel 中选择了整列 - 单元格格式 - 位置：英语（英国）并选择了“14/03/2011”的样本值，以便日期出现在月份之前。

现在，在 Visual Studio 中使用一个简单的导入包，将数据导入 Sql Server（我使用了向导生成的 3 个任务：删除表、在 Sql Server 中创建表结构和实际导入）。

在创建表任务中，我将日期列类型指定为日期。之后，为了测试结果，我在 Sql Server 表中选择了日期，按日期 desc 对其进行排序。

所以我明白了，一切都乱七八糟（这应该只是 9 月的数据，所以我们应该只有“09”年之后）：

```
2011-12-09
2011-11-09
2011-10-09
2011-09-30
2011-09-29
2011-09-28
2011-09-27
2011-09-26
2011-09-25
2011-09-24
2011-09-23
2011-09-22
2011-09-21
2011-09-20
2011-09-19
2011-09-18
2011-09-17
2011-09-16
2011-09-15
2011-09-14
2011-09-13
2011-09-09
2011-08-09
2011-07-09
2011-06-09
2011-05-09
2011-04-09
2011-03-09
2011-02-09
2011-01-09 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T13:15:49.513

要将数据放入日期时间列，您可以：

```
select cast(replace(date_col, '-', '') as datetime) 
```

作为 yyyymmdd 格式的字符串，`20120928`无论格式设置如何，都可以始终转换为 datetime（因为它们是某种 ISO 格式）。

要以特定格式从表格中获取数据，您可以使用`CAST`或`CONVERT`或 使用

```
SET DATEFORMAT 
```

例如

```
SET DATEFORMAT dmy
GO

SELECT GETDATE() 
```

**编辑**：使用转换看起来像这样：

```
SELECT CONVERT(VARCHAR(10), GETDATE(), 103) 
```

返回：

> 28/09/2012

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T13:24:15.820

使用功能`CONVERT (DATETIME, @sDateOfBirth,101)`

这是相同[http://msdn.microsoft.com/en-us/library/ms187928.aspx的链接](http://msdn.microsoft.com/en-us/library/ms187928.aspx)

# css - 将css类添加到多个元素

> ID：12640718
> 
> 赞同：40
> 
> 时间：2012-09-28T13:12:36.893
> 
> 标签：css, class

我创建了一个名为“按钮”的 CSS 类，并通过简单地使用将其应用于我的所有 INPUT 标签：

```
.button input
{
//css stuff here
}

<p class="button">
<input type="submit" Name='submit' value="Confirm Selection"/>
</p> 
```

效果很好，但是我随后添加了另一个按钮，但这不是我的表单的一部分，它只是一个用 javascript 触发的占位符，并打开一个 iFrame。因为我希望它看起来与我使用同一个类的所有“真实”按钮相同。

```
<p class="button" id="AddCustomer">
<a href="AddCustomer.php">Add Customer</a>
</p> 
```

我遇到的问题是，如果我离开班级，因为`.button input`标签`<a>`没有看到它。如果我删除了`input`CSS 的一部分，我的所有按钮都会在中间出现灰色方块。

所以我解决了`.button input,a`

这工作得很好。. . 直到我查看另一个页面，发现我所有的`<a>`标签现在都被格式化为“按钮”类，即使它们没有应用这个类。

那么我的问题是如何将相同的 CSS 类同时应用于`<input>`和`<a>`标签，但前提是我明确添加了`class="button"`.

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2012-09-28T13:14:43.027

您还需要限定`a`选择器的部分：

```
.button input, .button a {
    //css stuff here
} 
```

基本上，当您使用逗号创建一[组选择器](http://www.w3.org/TR/css3-selectors/#grouping)时，每个单独的选择器都是完全独立的。他们之间没有任何关系。

因此，您的原始选择器匹配“所有类型为 'input' 的元素，它们是类名为 'button' 的元素的后代，以及所有类型为 'a' 的元素”。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-28T13:15:10.650

尝试使用：

```
.button input, .button a {
    // css stuff
} 
```

另外，请阅读 CSS。

编辑：如果是我，我会将按钮类添加到元素，而不是父标签。像这样：

HTML：

```
<a href="#" class='button'>BUTTON TEXT</a>
<input type="submit" class='button' value='buttontext' /> 
```

CSS：

```
.button {
    // css stuff
} 
```

对于特定的 css 东西使用：

```
input.button {
    // css stuff
}
a.button {
    // css stuff
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-28T13:14:49.323

```
.button input,
.button a {
    ...
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-28T13:19:11.837

试试这个：

```
.button input, .button a {
//css here
} 
```

这会将样式应用于嵌套在其中的所有标签`<p class="button"></p>`

# c# - 在 WPF 中的 MediaElement 中淡入淡出视频

> ID：12640724
> 
> 赞同：2
> 
> 时间：2012-09-28T13:12:54.280
> 
> 标签：c#, wpf, visual-studio-2010

在我的 WPF 应用程序中，我有一个控制视频不透明度的滑块。我还希望能够单击一个按钮，视频会在一段时间内逐渐淡出（可能是 1 秒？）。

我知道如何控制视频的不透明度，但我正在努力解决的问题是淡入淡出。我想我需要某种东西，它会稍微增加不透明度，然后等待一小段时间然后再次增加它，直到不透明度等于一个？但我不确定如何在代码方面实现这一点？

你能帮忙吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T14:13:12.650

您可以为 MediaElement 的 Opacity 属性[设置动画：](http://msdn.microsoft.com/en-us/library/ms752312.aspx)

```
mediaElement.BeginAnimation(
    UIElement.OpacityProperty,
    new DoubleAnimation(0d, 1d, TimeSpan.FromSeconds(1d))); 
```

# php - 如何更改 Zend Studio 中的默认工作区位置？

> ID：12640727
> 
> 赞同：5
> 
> 时间：2012-09-28T13:13:09.597
> 
> 标签：php, location, default, workspace, zend-studio

这可能是我曾经问过任何人的最尴尬的问题。但我终生无法弄清楚如何更改 Zend Studio 9.0.3（操作系统：Windows 7 x64）中的默认工作区位置。在过去的整整一个小时里，我广泛使用了谷歌，并且我手动遍历了整个 Zend Studio 偏好页面（或者至少我是这么认为的）。此外，还有一个看起来很神秘的文件`config.ini`，`%Zend Studio installation folder%\configuration\`其中包含以下行：

> osgi.instance.area.default=@user.home/Zend/workspaces/DefaultWorkspace

而且无论我多么有创意地尝试重写该行或完全删除它，我都无法让 Zend Studio 停止挖掘我的“用户”主目录。所以，这是用颜色说明的问题：

![Zend Studio 默认工作区位置](../Images/234c0d7d5552ee4a2ca03086691de1d2.png)

每当我创建一个新的本地 PHP 项目时，我希望该默认位置是其他位置。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-28T13:21:06.130

您可以更改工作区

```
File > Switch Workspace > Other 
```

另请参阅[使用特定工作区启动 Eclipse](https://stackoverflow.com/questions/209789/starting-eclipse-w-specific-workspace)

切换（创建新）工作区后，您可以通过以下方式删除旧的工作区

```
Window > Preferences > General > Startup and Shutdown > Workspaces 
```

# android - 微调项目文本与剪切文本一起显示

> ID：12640728
> 
> 赞同：2
> 
> 时间：2012-09-28T13:13:12.357
> 
> 标签：android, spinner

我有一个微调器，我在其中通过`Adapter`. 问题是，当微调器在那个时候关闭时，它会以适当的大小将文本显示为完全可读。但是当我们单击微调器并显示文本时，该文本显示我不可读，这意味着带有剪切文本。

此问题仅在 Galaxy Tab 和 Galaxy s3 上发生。意味着屏幕尺寸高。那么请有人可以帮我解决这个问题吗？

微调器的屏幕截图是![文本切入微调器](../Images/c08a00605bee1a744c429681f9d66eae.png)，我实际上想要这个
![正确的微调器文本](../Images/e90d94df93b008f7e31a6a918c3b5968.png)

xml 中的 Spinner 代码是

```
<Spinner
    android:id="@+id/ddCountry"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
/> 
```

我已经设置了一种样式将textcolor设置为黑色，代码是这样的

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
   <style name="Theme.NoTitleBar.WithColoredSpinners" parent="@android:style/Theme.NoTitleBar">
        <item name="android:spinnerItemStyle">@style/SpinnerItem</item>
        <item name="android:spinnerDropDownItemStyle">@style/SpinnerItem.DropDownItem</item>
    </style>
    <style name="SpinnerItem" parent="@android:style/Widget.TextView.SpinnerItem">
        <item name="android:textColor">#000000</item>
    </style>

    <style name="SpinnerItem.DropDownItem" parent="@android:style/Widget.DropDownItem.Spinner">
        <item name="android:textColor">#000000</item>
     </style>

</resources> 
```

填充微调器中的值的代码如下：

```
ArrayAdapter<String> dataAdapter = new ArrayAdapter<String>(
                Registration.this, android.R.layout.simple_spinner_item, list);
        dataAdapter
                .setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        spinner1.setAdapter(dataAdapter); 
```

此代码适用于大多数设备，但是当屏幕尺寸像 Galaxy Tab 一样高时，问题就来了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T13:31:48.267

试试下面的代码：

```
 <Spinner
android:id="@+id/ddCountry"
android:layout_width="fill_parent"
android:layout_height="20dp"
 /> 
```

尝试更改 layout_height 以适合您的微调器

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T05:13:08.640

我得到了解决方案。这是我设置的错误`android:anyDensity="false"`。所以它在 Galaxy 选项卡中不起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T13:38:29.497

放`android:layout_height="wrap_content"`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T13:40:48.377

问题显然出在您的下拉布局中。

与其使用（三星可能已经针对他们的设备进行了修改）的库存下拉布局，不如`android.R.layout.simple_spinner_dropdown_item`创建自己的并设置文本大小以匹配关闭的微调器。

这可以像将默认值复制到布局目录、更改名称并通过添加/更改文本大小来调整布局本身一样简单。

# java - 新的临时目录访问被拒绝

> ID：12640729
> 
> 赞同：3
> 
> 时间：2012-09-28T13:13:20.800
> 
> 标签：java, file-io

我想创建一个临时目录，然后我应该在其中创建一个文件

尝试在临时文件中创建新文件时收到拒绝访问消息，因此代码如下：

```
public File createFile(InputStream inputStream,File tmpDir )
{ File file = null;
      try {
            file=new  File(tmpDir.getAbsolutePath());
            // write the inputStream to a FileOutputStream
            OutputStream out = new FileOutputStream(file);

            int read = 0;
            byte[] bytes = new byte[1024];

            while ((read = inputStream.read(bytes)) != -1) {
                out.write(bytes, 0, read);
            }

            inputStream.close();
            out.flush();
            out.close();

            System.out.println("New file created!");
            } catch (IOException e) {
            System.out.println(e.getMessage());
            } 
      return file;}

/**
 * Create a new temporary directory. Use something like
 * {@link #recursiveDelete(File)} to clean this directory up since it isn't
 * deleted automatically
 * @return  the new directory
 * @throws IOException if there is an error creating the temporary directory
 */
public static File createTempDir() throws IOException
{
    final File sysTempDir = new File(System.getProperty("java.io.tmpdir"));
    File newTempDir;
    final int maxAttempts = 9;
    int attemptCount = 0;
    do
    {
        attemptCount++;
        if(attemptCount > maxAttempts)
        {
            throw new IOException(
                    "The highly improbable has occurred! Failed to " +
                    "create a unique temporary directory after " +
                    maxAttempts + " attempts.");
        }
        String dirName = UUID.randomUUID().toString();
        newTempDir = new File(sysTempDir, dirName);
    } while(newTempDir.exists());

    if(newTempDir.mkdirs())
    {
        return newTempDir;
    }
    else
    {
        throw new IOException(
                "Failed to create temp dir named " +
                newTempDir.getAbsolutePath());
    }
} 
```

我得到这个：

```
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp\e18a5cdb-a975-46e7-874c-4ea21e2fb383 (Access denied)

 e18a5cdb-a975-46e7-874c-4ea21e2fb383 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T13:16:52.057

您应该在目录中打开一个文件。您正在尝试写入操作系统不允许的*目录本身。*相反，您应该写入*文件*。例如，这将使程序在 tmpDir 中创建 MyFile.txt：

```
file=new  File(tmpDir, "MyFile.txt"); 
```

顺便说一句，你为什么不使用[`File.createTempFile`](http://docs.oracle.com/javase/7/docs/api/java/io/File.html#createTempFile%28java.lang.String,%20java.lang.String%29)？

# ruby-on-rails - 在 Rails 上配置电子邮件自定义变量的最佳方法

> ID：12640737
> 
> 赞同：0
> 
> 时间：2012-09-28T13:13:48.310
> 
> 标签：ruby-on-rails, ruby

我正在构建一个向管理员收件人发送电子邮件的应用程序。在开发中，它的值为 dev@mydomain.com ，在生产中它的值为 prod@mydomain.com 。在 Rails 中配置这种东西的最佳方法是什么？我想使用这样的东西：

```
mail(to: my.delivery.mail, :subject "whatever") 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T13:22:40.070

有多种方法，但最简单的是：

```
recipient = Rails.env.production? ? 'prod@mydomain.com' : 'dev@mydomain.com'
mail(to: recipient, :subject "whatevs...") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T15:31:13.610

使用环境变量

```
mail(:to => ENV['ADMIN_ADDRESS'], :subject => "whatever") 
```

然后将它们设置为部署（通过 capistrano 或任何工具）。这些信息不是业务逻辑（所以它不属于应用程序）也不是业务数据（所以它不属于数据库）。这就是环境的用途。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T13:25:37.847

如果有多个环境，您可以设置一个方法（主要在邮件类中）并设置管理员收件人，或者写入环境文件`config.admin_mail =dev@mydomain.com`并在`mail(to: AppName::Application.config.admin_email,..)`

# java - JIRA TOMCAT6 找到我的 .JAR :(

> ID：12640740
> 
> 赞同：-1
> 
> 时间：2012-09-28T13:13:56.143
> 
> 标签：java, jsp, tomcat

我们正在使用*Tomcat6*服务器。我们已经在*webapp文件夹中部署了**.war*文件。

 *Tomcat 在里面找不到我们的*.jar*文件

```
C:\Program Files\Atlassian\JIRA\webapps\MYSITE\WEB-INF\lib\mycooljarfile.jar 
```

，但是如果我们把它放在里面，`C:\Program Files\Atlassian\JIRA\lib it can find mycooljarfile.jar`它会找到它并且我们的应用程序按预期工作。

我们在部署时收到的错误消息`war-root`是

```
"noclassdeffounderror could not initialize class" 
```

我们需要修改类路径吗？如果是这样，位置在哪里？我们在 windows 上使用了 jira 4.4 的 JIRA.exe。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T13:15:51.930

看起来您在同一级别上有 /WEB-INF 和 /lib。如果这是真的，它应该是 /WEB-INF/lib。*

# android - 在扩展文本视图滚动条中增加文本大小时截断文本

> ID：12640743
> 
> 赞同：1
> 
> 时间：2012-09-28T13:13:57.250
> 
> 标签：android, textview, marquee, scroller

我有一个从 Android TextView 派生的类来自定义一个基于此示例滚动文本的 TextView：[原始示例代码](http://bear-polka.blogspot.co.uk/2009/01/scrolltextview-scrolling-textview-for.html)

我的问题是，根据滚动期间文本的大小，文本在不同的位置被截断。例如，当文本大小小于 100 时，某些 90 个字符长的文本可以正常滚动，但如果文本大小设置为 240（因此它在横向模式下填充了我的手机高度），则文本在字符位置 83 处被截断。较大的文本大小越被截断。

好像有某种内存限制？

```
ScrollTextView scrolltext;
scrolltext.setTextSize(TypedValue.COMPLEX_UNIT_PX, xtextsize);
scrolltext.setDrawingCacheQuality(View.DRAWING_CACHE_QUALITY_HIGH);
scrolltext.setSingleLine(true);
scrolltext.setEllipsize(null);
scrolltext.setMaxLines(1);
scrolltext.startScroll(); 
```

并在课堂上

```
setHorizontallyScrolling(true);
mSlr = new Scroller(this.getContext(), new LinearInterpolator());
setScroller(mSlr);
int scrollingLen = calculateScrollingLen()
int duration = (new Double(((scrollstart.mRndDuration*10)/getWidth())*getText().length())).intValue();
setVisibility(VISIBLE);
mSlr.startScroll(mXPaused, 0, scrollingLen, 0, duration); 
```

如果有人想尝试重新创建问题，可以使用[原始示例代码重新创建问题。](http://bear-polka.blogspot.co.uk/2009/01/scrolltextview-scrolling-textview-for.html)

那么有没有人知道为什么文本会根据文本大小在不同的位置被截断？

我的布局

```
<LinearLayout
   android:id="@+id/ll"
   android:layout_width="match_parent"
   android:layout_height="match_parent"
   android:orientation="vertical" >
   <com.test.testing.ScrollTextView
        android:id="@+id/scrolltext"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_gravity="center"
        android:textSize="20sp"/>
</LinearLayout> 
```

提前致谢

进一步：当使用不同的字体时，当使用相同的文本大小时，截断开始的位置会改变。看起来仍然像资源问题，但在哪里增加缓冲区？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T13:46:36.957

检查横向/纵向模式期间的 textview 高度是否发生变化，并且您将其设置为高度的 fill_parent。这只会将控件填充为设备大小，如果内容大于大小，则不会滚动。您可以将此视图放在滚动视图中并将文本视图高度设置为 wrap_content。

# c# - 套接字与 HttpListener

> ID：12640746
> 
> 赞同：7
> 
> 时间：2012-09-28T13:14:02.840
> 
> 标签：c#, .net, sockets, tcp

我正在创建一个代理，它在特定端口上侦听传入连接。连接通常是 Http 请求 (GET/POST)。无法决定我应该选择 HttpListener 还是 Sockets。我将修改代理中的 HttpRequest，然后将其转发到最终目的地。

你什么时候更喜欢 HttpListener 而不是 Sockets。各有什么好处？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-09-28T23:34:05.793

*   HttpListener 的优点
    *   允许使用 http.sys 与其他进程共享端口（包括使用 HttpListener 或 IIS 的进程，只要前缀是唯一的）
    *   Http.sys 为您使用 I/O 完成端口；不使用 TcpListener 很难自己设置
    *   HttpListener 解析 HTTP 标头并为响应创建 HTTP 标头
    *   为您提供一组非常类似于 ASP.Net 中公开标头、cookie 等的类。
*   HttpListener 的缺点
    *   **主要**- 与 Windows 上的 TcpListener 或 Mono 的 HttpListener 相比，Localhost 客户端通过 HTTP 发送大型有效负载会导致这些有效负载的多个额外副本。如果需要每个 CPU 的最大吞吐量，则应避免在同一台机器上的进程之间发送大的（例如超过 5 MB）POST 正文。考虑改用内存映射文件（本质上是共享内存）。当客户端和服务器在不同的机器上时，这些额外的副本不是问题。
    *   不允许明确控制 TCP 套接字打开的时间；http.sys 为您管理这个（这通常不是一个巨大的缺点，但这只是需要注意的事情）
    *   标头/cookie 类中的任何错误都会咬你；例如设置多个 cookie 将导致 HttpListener 返回一个包含多个 cookie 的单个 Set-Cookie 标头的问题，IE 将处理但 Chrome 将完全忽略（然后您必须手动滚动 cookie 并添加您自己的 Set-解决此问题的 Cookie 标头）
*   TcpListener 的优点
    *   与 HttpListener 一样，它为您实现 I/O 完成端口
    *   如果您想为连接做一次事情（例如检查身份验证），您可以这样做，因为您知道套接字何时打开；但是，由于其他原因，您可能不想依赖它（代理和负载均衡器*可能*会通过同一个套接字发送来自多个用户的请求）
*   TcpListener 与 HttpListener 的缺点
    *   您必须提供 HTTP 标头解析器
    *   您必须验证 HTTP 请求是否有效
*   自己滚动 100% 的优势
    *   与使用 TcpListener 相比，我没有想到
*   自己滚动 100% 的缺点
    *   您可能会在网络层代码中引入许多不必要/错误的锁，这在一次测试单个请求的性能时不会造成任何问题，但会导致负载下的性能真正受到影响。找到这些并修复它们需要一段时间。
    *   我们确实在一个项目中自己实现了这一点，并且我们实现了与 HttpListener 相同的性能，但需要更多个月的编码和无法维护的代码库。我们将其删除并用 HttpListener 替换了所有自定义代码，而不会对性能产生任何负面影响，并且需要维护的代码也大大减少。

2016 年 11 月更新：HttpListener 在接收来自远程机器的流量时效果很好。但是，当客户端位于 localhost 上时，对于大型有效负载，从性能角度来看，HttpListener 是一个糟糕的选择。造成这种情况的部分原因是 HttpListener 使用 http.sys，它是一个内核模块，并且显然该实现导致需要制作几个额外的主体数据副本。例如，在 C# 中将 100 MB 从一个数组复制到另一个数组需要 35 毫秒，而将 100 MB 从本地客户端发布到 HttpListener 需要 350 毫秒（是的，长 10 倍）。在这种情况下切换到 Mono 的 HttpListener 会将时间减少到 250 毫秒。将 TcpListener 与 Socket 客户端一起使用需要 180 毫秒。使用 MemoryMappedFiles 将套接字的使用换成 CircularBuffer 需要 55 毫秒。因此 HttpListener 没有 从本地机器访问时，对于大型有效负载来说效果不佳。注意：如果您尝试重现此测试，则需要注意测量时间差。Stern 开始发送数据，并且当数组完成填充在接收过程中，因为一些 Send/Write 方法几乎立即返回而不发送任何数据（您可以通过发送一个零数组然后从其中写入一个来证明这一点数组的背面朝向前面；您将收到几乎所有的，证明数据直到函数返回后很久才发送）。

我的一位同事在此处提供了有关 HttpListener 与 Mono 的 HttpListener 的本地机器性能缺陷的更多详细信息： [https ://www.linkedin.com/pulse/http-inefficiency-dominika-blach](https://www.linkedin.com/pulse/http-inefficiency-dominika-blach)

# windows - 使用 TCL 在 Windows 上执行大量批处理文件

> ID：12640748
> 
> 赞同：0
> 
> 时间：2012-09-28T13:14:13.850
> 
> 标签：windows, batch-file, cmd, exec, tcl

在这里，我编写了一个脚本，该脚本应该执行当前目录中的所有文件。它们是批处理文件。

```
set path [pwd]
append path "/"
set files [glob *]
foreach file $files {
    exec cmd.exe /c ${path}$file
} 
```

但我收到以下错误：

```
The system cannot find the path specified. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T14:27:24.157

问题不在脚本中，而在批处理文件中。其中有一些使用路径的命令不存在。

# c - HTTP 通过 C 中的套接字：基本文件服务器无法正确返回文件

> ID：12640754
> 
> 赞同：0
> 
> 时间：2012-09-28T13:14:45.467
> 
> 标签：c, string, file, http, sockets

我正在尝试使用 C 中的套接字编写一个基本的 HTTP 文件服务器，但有两个主要问题。

首先，当我尝试通过浏览器访问“ip:port/”时，我得到了 index.html 文件，但它完全是乱码。但是，当我访问“ip:port/not_in_directory”时，我的小自定义 404 消息会正常返回。如果我将默认文件设置为现有的 pdf 文件，乱码也会回来（pdf 乱码的长度）。

其次，当我尝试访问“ip:port/file_that_exists”时，我得到的是 404 而不是正确的文件。在调试时，我确实看到 scratch_pad 具有正确的文件名，没有多余或丢失的字符，但是 !access(scratch_pad, R_OK) 仍然为 0。即使 access() 需要一个 char* 是否也有一些必要的转换为文件名？

编辑：第二个问题已解决（我使用指向已释放缓冲区的指针作为文件名）。但是，浏览器获取的所有内容都是胡言乱语。我正在删除更多非必要的代码。

```
#define FILE_NOT_FOUND "HTTP/1.0 404 FILE NOT FOUND\r\n"
#define FILE_FOUND "HTTP/1.0 200 OK\r\n"
#define SERVER_NAME "Server: Test Server\r\n"
#define CONTENT_TYPE "Content-Type: text/html\r\n"
#define DATE "Date: "
#define MESSAGE_BREAK "\r\n"
#define NOT_FOUND_HTML "<!DOCTYPE html>\n<html>\n<title>404 Not Found</title>\n<body>\n<p>Nope</p>\n</body>\n</html>\r\n"

  if(!access(pulled_name, R_OK | W_OK)) {
      printf("file found on server\n");
      server_file = fopen(pulled_name, "rb+");
      fseek(server_file, 0L, SEEK_END);
      file_size = ftell(server_file);
      fseek(server_file, 0l, SEEK_SET);
      printf("opened successfully and set file_size to %i\n", file_size);
      getting_time = time(NULL);
      c_time = localtime(&getting_time);
      current_time = asctime(c_time);
      printf("set time for message\n");

  message = malloc((int) strlen(FILE_FOUND)
                + (int) strlen(SERVER_NAME)
                + (int) strlen(CONTENT_TYPE)
                + (int) strlen(DATE)
                + (int) strlen(current_time)
                + (int) strlen(MESSAGE_BREAK));

  printf("malloc'ed message\n");

  message_size = (int)(strlen(message)*sizeof(char));     
  memset(message, 0, message_size);
  strcpy(message, FILE_FOUND);
  strcat(message, SERVER_NAME);
  strcat(message, CONTENT_TYPE);
  strcat(message, DATE);
  strcat(message, current_time);
  strcat(message, MESSAGE_BREAK);
  printf("built message\n");

  printf("set message_size to %i\n", message_size);
  while(total_sent < message_size) {
    n = send(new_socket_fd, message, message_size, 0);
    if (n==-1) {
      printf("error sending message\n");
      break;
    }
    total_sent += n;
    printf("sent %i\n", total_sent);
  }
  free(message);

  total_sent = 0;
  while(total_sent < file_size) {
    n = send(new_socket_fd, server_file, file_size, 0);
    if (n==-1) {
      printf("error sending file\n");
      break;
    }
    total_sent += n;
    printf("sent %i\n", total_sent);
  }
  fclose(server_file);
  close(new_socket_fd);
  printf("closed client connection!\n"); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T13:21:46.787

这个错误有几个例子：

```
memset(buffer, '\0', sizeof(buffer)); 
```

当第一个参数的类型是 a`char*`时，这意味着缓冲区不会填充空字符，而只会填充第一个`sizeof(char*)`字节（通常为 4 或 8）。在这种情况下，这意味着`buffer`不能以空值结尾（因为`recv()`不附加空字符）。两者都`printf()`要求`strtok()`字符串参数以空值结尾。通常会看到在`printf("%s", p);`使用非空终止字符串调用的字符串之后打印出垃圾字符。

`memset()`通过显式指定第一个参数指向的缓冲区的大小来修复所有调用：

```
const size_t BUFFER_SIZE      = 512;
const size_t SCRATCH_PAD_SIZE = 256;
buffer                        = malloc(BUFFER_SIZE);     /*Check return value*/
scratch_pad                   = malloc(SCRATCH_PAD_SIZE);/*to ensure success.*/
memset(buffer,      0, BUFFER_SIZE);
memset(scratch_pad, 0, SCRATCH_PAD_SIZE); 
```

`sizeof(char)`保证是，所以`1`它可以从`malloc()`参数中省略。

* * *

其他滥用`memset()`：

```
memset(message, '0', sizeof(message)); 
```

*   `'0'`是字符零，不为空
*   `sizeof(message)`是个`sizeof(char*)`

改成：

```
memset(message, 0, /* the actual size of message*/ ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T13:31:00.313

您的代码中有几处看起来不太好。

这里：

```
 buffer = malloc(sizeof(char)*512);
   scratch_pad = malloc(sizeof(char)*256); 
```

scratch_pad 是指向分配区域的指针。

但是随后您丢失了指向该区域的指针并将 scratch_pad 设置为指向缓冲区：

```
 printf("request:\n%s\n", buffer);
   scratch_pad = strtok(buffer, "/"); 
```

那么这里：

```
 if (!strncmp(scratch_pad, "HTTP", 4)) {
       scratch_pad = "index.html";
       printf("request was for root directory\n");
   } 
```

您将 scratch_pad 指向一个常量字符串。

当你做了

```
free(scratch_pad); 
```

我本以为所有的地狱都会放松。

你的标记化方法有点冒险。我看到的第一个结果是您会接受一个`GETLOST`方法作为 的同义词`GET`，并且您在处理路径时会遇到问题（例如`GET /js/main.js HTTP/1.0`）：

```
scratch_pad = strtok(buffer, "/");
printf("pulling request type\n");

if (!strncmp(scratch_pad, "GET", 3)) {
  printf("this is a Get\n");
  scratch_pad = strtok(NULL, " ");
  printf("pulling file name: >%s<\n", scratch_pad);
  if (!strncmp(scratch_pad, "HTTP", 4)) {
    scratch_pad = "index.html";
    printf("request was for root directory\n");
  }
  printf("requested file: %s\n", scratch_pad);
} 
```

至于`access()`，如果scratch_pad有正确的文件**并且服务器在web根目录下运行**，那么`access()`应该返回0。如果没有，验证的值`errno`。

**更新**

正如我在上面所写的，`scratch_pad`是（或可能是）*内部* `buffer`的指针。所以当你这样做时：

```
free(buffer);
if(!access(scratch_pad, R_OK)) { 
```

它*可能会*发生（不应该，至少不会持续几毫秒，但是嘿......）指向的区域`buffer`被破坏了。然后也`scratch_pad`将是任何点。

到那时，`access`（现在我想起来，这很可能是做垃圾处理的人）将处理垃圾，并拒绝继续。

要检查，只需执行以下操作：

if (access(scratch_pad, R_OK)) { printf("无法访问文件 '%s'\n", scratch_pad); } 别的 { ...

为避免这种情况，请以不同的方式标记化`buffer`。

例如：

字符 *空格；字符 *http;

// 缓冲区是 GET /this/path/to/file/name HTTP/1.0... if (!strncmp(buffer, "GET ", 4)) // 不是 GET if (NULL == (space = strchr( buffer+4, ' '))) // 错误：没有第二个空格。if (!strncmp(space + 1, 'HTTP/1.', 7)) // 错误：GET 不以 HTTP/1.something 结尾 // 现在 buffer+4 和空格之间的所有缓冲区都是文件名len = 空间缓冲区 4；strncpy(scratch_pad, 缓冲区 + 4, len); // 终止字符串 scratch_pad[len] = 0x0;

// 现在 scratch_pad 包含以 / 结尾的文件名，但它是相对的 // 到错误的路径；我们希望它从我们的文档根目录开始。// 所以与其

#define DOCUMENT_ROOT "./" len = space-buffer-4; strcpy(scratch_pad, DOCUMENT_ROOT); strncpy(scratch_pad + strlen(DOCUMENT_ROOT), 缓冲区 + 4, len); len += strlen(DOCUMENT_ROOT); // 终止字符串。现在是：.//path/to/file scratch_pad[len] = 0x0; // 我们实际上应该在这里运行 realpath()...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T13:22:28.330

看起来您的`Date: ...`标题没有换行终止，因此 MESSAGE_BREAK 被吞下。另外，我不确定为什么要为所有字符串长度添加 +1。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T16:03:08.560

有两件事对我来说很奇怪：

1.  为什么你总是在到达文件的真实内容之前发送 404 消息？
2.  第二个 send() 错误，为什么要发送文件描述符？你的缓冲区在哪里？您应该提供缓冲区指针并在每个循环中更新它。

提示：gcc -Wall 是你的朋友。

# c# - 在 C# Windows 应用程序上捕获全局触摸事件

> ID：12640755
> 
> 赞同：0
> 
> 时间：2012-09-28T13:14:47.397
> 
> 标签：c#, windows, background, touch, touchscreen

我需要开发一个在触摸屏 Windows 系统上在后台运行的应用程序。

当系统处于空闲状态时，另一个应用程序会显示一些图像，例如在diaporama 屏幕保护程序中。

我的应用程序必须在屏幕上的任何位置捕获触摸事件并执行一些操作，例如停止屏幕保护程序并运行另一个应用程序。

如何从后台捕获和处理这样一个无限制的全局触摸事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T13:19:16.770

您可以有一个透明的、始终在顶部的窗口并从中捕获触摸事件

# wpf - WPF中使用MVVM的数据输入过程

> ID：12640757
> 
> 赞同：1
> 
> 时间：2012-09-28T13:14:54.323
> 
> 标签：wpf, mvvm

我开始学习 MVVM 并且已经看到如何将数据列表与 ViewModel 中的相应 List<> 绑定。现在我需要实现一个具有不同字段的表单，当用户单击按钮时，我必须将数据保存到本地数据库。

哪种是“最 MVVM”方法？我想`SaveItem(Item){}`在 ViewModel 中实现一个方法，并在后面的代码中，为按钮单击做类似的事情

```
Item item = new Item();
item.field1 = txt1.Text;

...

item.fieldn = txtn.Text;
myViewModel.SaveItem(item); 
```

我认为必须有一种更清洁的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T13:21:15.710

A`Button`的`DependencyProperty`类型`ICommand`为，如果设置了该属性，则单击`CommandProperty`时将调用该命令。`Button`

通常在 MVVM 中，公开一个类型的属性`ICommand`（您需要创建一个实现或从框架中获取一个）并在 XAML 中绑定到它，如下所示：

```
<Button Content="My Button"
        Command="{Binding MyCommand}" /> 
```

视图模型：

```
public class MyViewModel : INotifyPropertyChanged
 {
    public ICommand MyCommand 
    {
        get { … }
    }

    …
 } 
```

现在你不需要代码隐藏了。

至于获取要保存的文本，您再次希望将数据绑定到您的视图模型而不是代码隐藏。

而不是阅读`TextBox.Text`，将该属性绑定到您的视图模型。

视图模型：

```
public class MyViewModel : INotifyPropertyChanged
{
  …

    private string _myText;
    public string MyText
    {
        get { return _myText; }
        set 
        {
            _myText = value;
            // raise property change notification
        }
} 
```

xml:

```
<TextBox Text="{Binding MyText, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" /> 
```

请注意，我们使用的是`TwoWay`绑定模式。这样，视图模型中的更改可以反映在`TextBox`（这就是您需要实现的原因`INotifyPropertyChanged`）中，并且`TextBox`将传播到视图模型中。

我还添加了设置，因为默认情况下，只有在失去焦点`UpdateSourceTrigger`时才会更新视图模型。`TextBox`这样，只要值更改，视图模型就会更新。在你的应用程序中使用任何有意义的东西。

# c# - 如何找出asp.net中的哪个函数有内存泄漏

> ID：12640761
> 
> 赞同：1
> 
> 时间：2012-09-28T13:15:22.323
> 
> 标签：c#, asp.net

我们有一个似乎使 IIS 7.0 崩溃的 asp.net Web 应用程序。我这么说的原因是应用程序可以工作 16 个小时，出现新问题，大约每 16 个小时，它需要 IIS RESET。

是否有任何工具或方法我们可以找出是什么（例如 ado.net、dll 等）导致 Web 应用程序中的内存泄漏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T13:17:58.110

像ANTS Profiler这样的东西：

[http://www.red-gate.com/products/dotnet-development/ants-memory-profiler/?utm_source=google&utm_medium=cpc&utm_content=brand_aware&utm_campaign=antsmemoryprofiler&gclid=CJDh64au2LICFeTKtAodMgYAbQ](http://www.red-gate.com/products/dotnet-development/ants-memory-profiler/?utm_source=google&utm_medium=cpc&utm_content=brand_aware&utm_campaign=antsmemoryprofiler&gclid=CJDh64au2LICFeTKtAodMgYAbQ)

我认为是你需要的。

您也可以下载免费试用版。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T13:17:29.183

可以用`Memory Profiler`也可以用`MiniProfiler`

链接： http://memprofiler.com/?gclid= [CJy414qu2LICFcPHtAodkkkABQ](http://memprofiler.com/?gclid=CJy414qu2LICFcPHtAodkkkABQ)

链接： http: [//miniprofiler.com/](http://miniprofiler.com/)

# coldfusion - 如何在 Coldfusion 10 中获取应用程序数据源名称？

> ID：12640763
> 
> 赞同：8
> 
> 时间：2012-09-28T13:15:33.233
> 
> 标签：coldfusion, coldfusion-10, application.cfc

在 Coldfusion 9 中，为了在 application.cfc 之外获取应用程序数据源，我使用了`application.getApplicationSettings().datasource`.

在 Coldfusion 10`getApplicationSettings()`中已替换为`ApplicationGetMetadata()`. 所以我很自然地尝试`ApplicationGetMetaData().datasource`了，但该`ApplicationGetMetaData()`功能目前不起作用......（请参阅[文档](http://help.adobe.com/en_US/ColdFusion/10.0/CFMLRef/WSf23b27ebc7b554b6c43bda313671e094bb-8000.html)和评论）。

那么如何从 CF10 中的 application.cfc 外部获取应用程序数据源名称（application.cfc 中的 this.datasource）？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-28T13:54:01.567

没有名为 ColdFusion 的函数`ApplicationGetMetaData`。正确的函数名称是`GetApplicationMetaData()`.

您可以`datasource`通过调用来获取应用程序的`GetApplicationMetaData().datasource`。

# perl - Perl 脚本运行正常，但作为 crontab 它不起作用

> ID：12640764
> 
> 赞同：3
> 
> 时间：2012-09-28T13:15:35.117
> 
> 标签：perl, cron, crontab, asterisk

我有一个 Perl 脚本，它将值插入到 Mysql 数据库中。在同一个脚本中，我检查一个条件，如果成功，则转到星号 CLI 并运行 origin 命令。当我在终端中运行它时，它工作正常。当我将其设置为 crontab 时，它会更新数据库，但 origin 命令不起作用。我是 Perl 新手，请帮我解决这个问题。提前致谢。

Perl 脚本：

```
if($temperature > 85){
    print `asterisk -rx "originate Dongle/dongle0/0123456789 extension 400\@out"`;
} 
```

crontab：

```
*/1 * * * *   /home/test/bin/insert_mysql.pl 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-28T13:20:31.090

**Cron**有不同的环境：他没有 PATH 环境变量，所以你必须始终使用命令的完整路径；并且，当前目录一般是未定义的，所以打开文件时一定要小心；此外，它没有语言环境设置，但我认为这不是你的情况。

所以你必须给出`asterisk`文件的完整路径`Dongle/dongle0/0123456789`（如果是文件）

# javascript - 如何清理 .innerHTML 的 HTML 内容？

> ID：12640765
> 
> 赞同：0
> 
> 时间：2012-09-28T13:15:35.003
> 
> 标签：javascript, html

> **可能重复：**
> [JavaScript 的 HTML 格式化程序/整洁/美化器](https://stackoverflow.com/questions/3913355/html-formatter-tidy-beautifier-for-javascript)

我想将 HTML 代码传递给 div：

```
myDiv.innerHTML = htmlCode; 
```

就像我试图使用 IFRAME 一样。`</div>`问题是，如果 htmlCode 的格式不正确（例如缺少），那么它会破坏所有页面。如何清洁那些？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T13:19:36.907

看看： [google-caja](http://code.google.com/p/google-caja/wiki/JsHtmlSanitizer) — 使第三方 HTML、CSS 和 JavaScript 可以安全嵌入的编译器

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T13:21:34.900

您可以首先使用[DOMParser](https://developer.mozilla.org/en-US/docs/DOM/DOMParser)对象将 HTML 代码转换为 DOM 结构。这将修复任何损坏的标记。然后，您可以将生成的 DOM 结构作为子项插入到您的 div 中。

不过要小心：从不受信任的来源嵌入 HTML 代码是非常危险的，因为它允许[跨站点脚本](http://en.wikipedia.org/wiki/Cross-Site-Scripting)攻击。

# json - 使用 1 个元素解析 Json 列表（Scala/liftweb）

> ID：12640778
> 
> 赞同：5
> 
> 时间：2012-09-28T13:16:15.383
> 
> 标签：json, scala, lift, lift-json

我遇到了从外部服务器检索一些 Json 的情况（我对该服务器没有任何控制权）。Json 有一个元素可能出现 1 次或多次。我正在尝试使用 net.liftweb.json 工具对其进行解析，并且仅当元素出现不止一次时才能正常工作。如果元素只出现一次，则解析失败。

这是一些示例代码：

```
import net.liftweb.json._
import net.liftweb.json.JsonDSL._

case class JSonListIssue(foo: List[String])

class JSonTest extends TestCase {

  implicit val formats = net.liftweb.json.DefaultFormats; 

  def testJsonList {
    val jsonStr2Foos = "{\"foo\": \"bar\", \"foo\": \"bar2\"}"
    val json = (parse(jsonStr2Foos).extract[JSonListIssue]) 
    assertEquals(2, json.foo.size)

    val jsonStr1Foo = "{\"foo\": \"bar\"}"
    val json2 = (parse(jsonStr1Foo).extract[JSonListIssue]) // Results in Json MappingException
    assertEquals(1, json2.foo.size)
  }

} 
```

上述代码中的第二个 parse 语句失败。如果我按如下方式定义案例类，则第二个解析将起作用，但第一个解析将失败。

```
 case class JSonListIssue(foo: String) 
```

关于如何以干净的方式解决这个问题的任何建议？我当然可以捕获 MappingException 然后使用另一个案例类对其进行解析，但是那很脏......

谢谢，格罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T03:16:19.687

因此，首先，虽然您无法控制编写该 API 的人，但如果您遇到他们，请不要因为他们做了这么愚蠢的事情而对他们开枪。:P

所以，这不是世界上最干净的解决方案，但我想我想出了一些对你有用的东西。可以直接查询使用`\`运算符解析JSON产生的JValue。

所以，这样的事情应该适合你。

```
case class JsonListIssue(foo: List[String])

def extractJsonListIssue(json: JValue) = {
  json \ "foo" match {
    case JString(foo) =>
      JsonListIssue(List(foo))

    case _ =>
      json.extract[JsonListIssue]
  }
} 
```

你可能需要也可能不需要括号`json \ "foo"`来编译。但！我认为这在大多数情况下对你有用。FWIW，如果你想成为真正的 Lift-y，你应该认真考虑在这里使用 Box 并使用 tryo 将提取的任何异常转换为可以在调用堆栈中更高位置的失败。所以，这看起来像这样：

```
// Add these guys to your existing imports
import net.liftweb._
  import common._
  import util.Helpers._

case class JsonListIssue(foo: List[String])

def extractJsonListIssue(json: JValue) = {
  json \ "foo" match {
    case JString(foo) =>
      Full(JsonListIssue(List(foo)))

    case _ =>
      // Will return a Full with the result of the method on
      // success and a Failure if extract throws an exception.
      tryo(json.extract[JsonListIssue])
  }
} 
```

然后，您可以在代码的其他地方使用它来理解。

如果这不起作用，请告诉我。如果我有什么更清洁的事情，我会告诉你的。队友的欢呼声！

# java - 如何在 java 中使用 opengl？

> ID：12640779
> 
> 赞同：2
> 
> 时间：2012-09-28T13:16:14.913
> 
> 标签：java, opengl, graphics

我如何在 java 中使用 opengl？我运行代码进行测试。我是opengl的新手。是从网上下载的demo代码。我知道opengl安装有问题，但不知道如何修复它。

```
package opengl;
// External imports
import java.awt.*;
import java.awt.event.*;

import com.sun.opengl.util.Animator;
import javax.media.opengl.GL;
import javax.media.opengl.GLCanvas;
import javax.media.opengl.GLCapabilities;
import javax.media.opengl.GLAutoDrawable;
import javax.media.opengl.GLDrawableFactory;
import javax.media.opengl.GLEventListener;

// Local imports
// None

/**
 * Example application that demonstrates how to put together a single-threaded
 * rendering system.
 *
 * @author Justin Couch
 * @version $Revision: 1.5 $
 */
public class HelloWorldDemo extends Frame
    implements GLEventListener
{
    public HelloWorldDemo()
    {
        super("Basic JOGL Demo");

        setLayout(new BorderLayout());

        setSize(400, 400);
        setLocation(40, 40);

        // Need to set visible first before starting the rendering thread due
        // to a bug in JOGL. See JOGL Issue #54 for more information on this.
        // http://jogl.dev.java.net
        setVisible(true);

        setupJOGL();
    }

    //---------------------------------------------------------------
    // Methods defined by GLEventListener
    //---------------------------------------------------------------

    /**
     * Called by the drawable immediately after the OpenGL context is
     * initialized; the GLContext has already been made current when
     * this method is called.
     *
     * @param drawable The display context to render to
     */
    public void init(GLAutoDrawable drawable)
    {
        GL gl = drawable.getGL();

        gl.glClearColor(0, 0, 0, 0);
        gl.glMatrixMode(GL.GL_PROJECTION);
        gl.glLoadIdentity();
        gl.glOrtho(0, 1, 0, 1, -1, 1);
    }

    /**
     * Called by the drawable when the surface resizes itself. Used to
     * reset the viewport dimensions.
     *
     * @param drawable The display context to render to
     */
    public void reshape(GLAutoDrawable drawable,
                        int x,
                        int y,
                        int width,
                        int height)
    {
    }

    /**
     * Called by the drawable when the display mode or the display device
     * associated with the GLDrawable has changed
     */
    public void displayChanged(GLAutoDrawable drawable,
                               boolean modeChanged,
                               boolean deviceChanged)
    {
    }

    /**
     * Called by the drawable to perform rendering by the client.
     *
     * @param drawable The display context to render to
     */
    public void display(GLAutoDrawable drawable)
    {
        GL gl = drawable.getGL();

        gl.glClear(GL.GL_COLOR_BUFFER_BIT);
        gl.glBegin(GL.GL_TRIANGLES);

        gl.glColor3f(1, 0, 0);
        gl.glVertex3f(0.25f, 0.25f, 0);

        gl.glColor3f(0, 1, 0);
        gl.glVertex3f(0.5f, 0.25f, 0);

        gl.glColor3f(0, 0, 1);
        gl.glVertex3f(0.25f, 0.5f, 0);

        gl.glEnd();
        gl.glFlush();
    }

    //---------------------------------------------------------------
    // Local methods
    //---------------------------------------------------------------

    /**
     * Create the basics of the JOGL screen details.
     */
    private void setupJOGL()
    {
        GLCapabilities caps = new GLCapabilities();
        caps.setDoubleBuffered(true);
        caps.setHardwareAccelerated(true);

        GLCanvas canvas = new GLCanvas(caps);
        canvas.addGLEventListener(this);

        add(canvas, BorderLayout.CENTER);

        Animator anim = new Animator(canvas);
        anim.start();
    }

    public static void main(String[] args)
    {
        HelloWorldDemo demo = new HelloWorldDemo();
        demo.setVisible(true);
    }
} 
```

**但它显示错误：**

```
run:
java.lang.NoClassDefFoundError: opengl/Opengl
Caused by: java.lang.ClassNotFoundException: opengl.Opengl
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:307)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:248)
Could not find the main class: opengl.Opengl.  Program will exit.
Exception in thread "main" Java Result: 1
BUILD SUCCESSFUL (total time: 26 seconds) 
```

# javascript - 表单提交的通用jquery函数

> ID：12640784
> 
> 赞同：0
> 
> 时间：2012-09-28T13:16:40.900
> 
> 标签：javascript, jquery

我有这个用 PHP/JavaScript 开发的小标签系统。

对于表单提交，我将 JQuery 函数绑定到向服务器发送 Ajax 查询的“提交”事件，避免重新加载页面（并丢失其他选项卡）。我为每个表单编写了一个函数，但意识到它们是相同的（获取输入、发送 Ajax 查询、显示返回消息），所以我决定使用定义每个表单的参数创建一个通用 jquery 函数）。

我有这个功能：

```
function submit_search(entity){
        $('#'+entity.name+'_searchform').submit(function(){
            var url = public_path+entity.name+'/search';
            var key = $('#'+entity.name+'_search_key').val();

            $.ajax({
                type: 'POST',
                url: url,
                data: {search_key: key},
                success: entity.submit_search(result)
            }); 

            return false;
    });
} 
```

`entity`带有实体名称和我要执行的成功函数的 JS 对象在哪里。该函数是在一个脚本中编写的，该脚本在加载主页时加载一次。加载选项卡后，我只需`submit_search()`使用实际实体进行调用。

这在我看来是合乎逻辑的。但它不起作用。问题是 jquery 无法识别元素，例如， after `var key = $('#'+entity.name+'_search_key').val();`， key 为空。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T13:32:58.393

您的成功函数将在请求之前执行

```
 $.ajax({
            type: 'POST',
            url: url,
            data: {search_key: key},
            success: *entity.submit_search(result)*
        }) 
```

我想 submit_search 不会返回指向函数的指针，因此您需要将指针传递给 submit_search

```
 $.ajax({
            type: 'POST',
            url: url,
            data: {search_key: key},
            success: *entity.submit_search*
        }) 
```

关于重新配置元素 - 请确保您编写了正确的选择器。尝试在浏览器的调试/监视工具中对预期的表达式进行硬编码，并检查它是否正常，例如

```
$('#EntityNameValue_search_key').length > 0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T13:40:45.400

如果你真的想以可重用的方式抽象所有这些，你可以使用类似的东西：

```
$(function() {
    $("body").on("submit", "form.ajax", function(event) {
        event.preventDefault();
        var $target = $(event.target);
        var successFunk = $target.attr("data-success") || "success";
        var url = $target.attr("action");
        $.post(url, $target.serializeObject(), {
            success: function(data) {
                window[successFunk](data);
            }
        });
    });
}); 
```

serializeObject is available here: [http://benalman.com/projects/jquery-misc-plugins/#serializeobject](http://benalman.com/projects/jquery-misc-plugins/#serializeobject)

Then you'd just create a form like:

```
<form class="ajax" action="url_i_want_to_post_to" data-success="successCallabck">
  <input type="text" name="search_key"/>
</form> 
```

Which would post a JSON object of `{search_key: ${value_of_search_key}}` to the form's destination and call the function `successCallback` or whatever you specify on return. Ideally you'd want to scope your callbacks better instead of latching on to `window`. You could use a registry, but otherwise using an object named something like FORM_CALLBACKS would keep things organized.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T13:24:35.667

不应该这样的工作吗？

```
$(document).ready(function() {
    $('#search_form').live("submit", function(event) {
        event.preventDefault();
        // do some magic
    });
}); 
```

然后，您需要将一些手动功能与 jquery 代码混合使用。

# php - Php - Ajax 喜欢/不喜欢按钮

> ID：12640786
> 
> 赞同：1
> 
> 时间：2012-09-28T13:16:45.347
> 
> 标签：php, ajax, social-media-like

我通过对我的脚本使用喜欢/不喜欢按钮从互联网搜索中找到了这个脚本

[http://wcetdesigns.com/view.php?dtype=tutorials&category=php&id=22](http://wcetdesigns.com/view.php?dtype=tutorials&category=php&id=22)

用于单个帖子时，一切都很好，但是，

我想对所有来自 while 循环的文档使用这个评级脚本

例如，我有新闻脚本并列出了所有新闻，并且在标题附近您会看到喜欢/不喜欢的按钮。（如 stackoverflow 网页），我想单独评价所有这些内容。在此脚本中，我无法在同一页面中分隔文章 ID

你能帮帮我吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-28T14:04:14.713

首先，您需要为每个按钮指定它用于哪个文章，您可以使用 data- 属性轻松完成

```
<button class="votebutton" data-article="1" data-vote="1">Up vote</button>
<button class="votebutton" data-article="1" data-vote="-1">Down vote</button>
<span class="votes" data-article="1"><?=//print the current number of votes of this article//?> 
```

现在你需要在点击按钮时做一些事情，所以你的 javascript 看起来像这样：

```
$('.votebutton').on("click", function(){
  vote = $(this).attr("data-vote");
  article = $(this).attr("data-article");
  rateArticle(vote, article);
}) 
```

现在您需要如下所示的 rateArticle() 函数：

```
function rateArticle(vote, article){ 
  var data = 'vote='+rating+'&articleID='+article;
  $.ajax({
     type: 'POST',
     url: 'rateArticle.php', 
     data: data,
     success: function(votes){
         $('.vote[data-article='+article+']').html(votes); 
     }
   });
} 
```

在服务器端，您将发布到的 rateArticle.php 文件看起来像这样：

```
$vote = $_POST['vote'];
$articleID = $_POST['articleID'];
$currentVotes = ; //fill it with the votes that the article currently have

if($vote != "-1" || vote != "1"){
  //goddamn script kids messing with us again, let's put them back where they belong
  header("Location: http://www.lemonparty.com"); //probably not this, but you can think of something
}

if(userHasAlreadyVoted()){ //if user has already voted we just return the current number of votes
  echo $currentVotes;
}else{
  $newVotes = $currentVotes + $vote;
  //save newVotes to db...
  echo $newVotes;
} 
```

就是这样……

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T04:43:16.663

我已经编写了这段代码，它适用于喜欢不喜欢在 php 代码中使用 ajax :)

我把它分成了三个页面，分别命名为 test1.php 、 test1.js 、 test1php.php

test1.php

```
<?php
    mysql_connect("localhost","root","");
    mysql_select_db("school");
?>
<html>
    <head>
        <script type="text/javascript" src="test1.js"></script>
    </head>
    <body>
        <form action="" method="post" enctype="">
            <table id="status_id">
            <?php
                $qry = mysql_query("SELECT * from s_user");
                while($row = mysql_fetch_array($qry)){
                    $uid = $row['u_id'];
                    $status = $row['u_status'];
                    $uname = $row['u_uname'] . "<br />";
            ?>
                <tr>
                    <td><?php echo $uname; ?></td>
                    <td><div id=""><?php echo $status; ?></div></td>
                    <td><input type="button" onclick="return change_status(this.value);" value="<?php echo $uid; ?>"></td>
                <?php } ?>
                </tr>
            </table>                    
        </form>
    </body>
</html> 
```

test1.js

```
function change_status(country)
{
  // alert("hellow");
if (country.length==0)
  {
   //alert("hellow"); 
  document.getElementById("status_id").innerHTML="";
  return;
  }
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("status_id").innerHTML=xmlhttp.responseText;
    }
  }
xmlhttp.open("GET","test1php.php?status_id="+country,true);
xmlhttp.send();
} 
```

test1php.php

```
 <?php
    mysql_connect("localhost","root","");
    mysql_select_db("school");
    $id = $_GET['status_id'];
    $q = mysql_query("SELECT * from s_user WHERE u_id = $id");
    $r = mysql_fetch_array($q);
    $fetch_status = $r['u_status'];
    if($fetch_status == 1){
        mysql_query("UPDATE s_user SET u_status = 0 WHERE u_id = '$id'");
    }else{
        mysql_query("UPDATE s_user SET u_status = 1 WHERE u_id = '$id'");
    }
?>
            <table id="status_id">
            <?php
                $qry = mysql_query("SELECT * from s_user");
                while($row = mysql_fetch_array($qry)){
                    $uid = $row['u_id'];
                    $status = $row['u_status'];
                    $uname = $row['u_uname'] . "<br />";
            ?>
                <tr>
                    <td><?php echo $uname; ?></td>
                    <td><div id=""><?php echo $status; ?></div></td>
                    <td><input type="button" onclick="return change_status(this.value);" value="<?php echo $uid; ?>"></td>
                <?php } ?>
                </tr>
            </table> 
```

# c - C 库生成/提取文件类型的元数据（音频或图像等）

> ID：12640787
> 
> 赞同：0
> 
> 时间：2012-09-28T13:16:47.063
> 
> 标签：c, metadata

目标是从文件类型中提取元数据。我知道这些：用于音频文件的 TagLib 用于图像的 Exiv2（但这是用于 C++）

1.  我不确定 TagLib 是否适用于 C 程序。我也找不到那种顺序的东西。
2.  Exiv2 是一个 C++ 库。

你知道我可以在 C 程序中使用的库吗？或者如果有其他库，我如何将它们与我的 C 程序接口？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T05:43:22.340

*   libexif **C EXIF**库是用纯可移植 C 语言编写的库。它从图像文件读取和写入 EXIF 元信息。
*   **GNU Libextractor**是一个用于从文件中提取元数据的库。GNU libextractor 使用辅助库（插件）来执行实际的提取。因此，GNU libextractor 可以简单地通过安装额外的插件来扩展。目前，libextractor 支持以下格式：HTML, MAN, PS, DVI, OLE2 (DOC, XLS, PPT), OpenOffice (sxw), StarOffice (sdw), FLAC, MP3 (ID3v1 and ID3v2), OGG, WAV, S3M ( Scream Tracker 3), XM (eXtended Module), IT (Impulse Tracker), NSF(E) (NES music), SID (C64 music), EXIV2, JPEG, GIF, PNG, TIFF, DEB, RPM, TAR(.GZ )、LZH、LHA、RAR、ZIP、CAB、7-ZIP、AR、MTREE、PAX、CPIO、ISO9660、SHAR、RAW、XAR FLV、REAL、RIFF (AVI)、MPEG、QT 和 ASF。此外，还会检测到各种其他 MIME 类型。
*   **元数据提取工具**由新西兰国家图书馆开发，以编程方式从 PDF 文档、图像文件、声音文件 Microsoft Office 文档等多种文件格式中提取保存元数据。
*   **TagLib**是一个用于读取和编辑几种流行音频格式的元数据的库。目前它支持 MP3 文件的 ID3v1 和 ID3v2、Ogg Vorbis 注释和 ID3 标签以及 FLAC、MPC、Speex、WavPack TrueAudio、WAV、AIFF、MP4 和 ASF 文件中的 Vorbis 注释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T23:50:24.503

这是一个非常模糊的问题。对于图像，一些常见的 C 库包括：用于读取 Exif 元数据的[LibExif](http://libexif.sourceforge.net/)，用于读取 TIFF 文件（及其元数据）的[Libtiff ，用于从 GeoTIFF 文件读取地理数据的](http://www.remotesensing.org/libtiff/)[libgeotiff](http://trac.osgeo.org/geotiff/)，等等。这在很大程度上取决于您尝试从中读取元数据的文件类型（以及您尝试读取的元数据类型）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-17T14:23:42.673

如果可能，应该使用 Adob​​e XMP 库在元数据世界的可怕碎片中实现可移植性。

Adobe 发布了一个源代码 SDK，不仅可以读取元数据，还可以修改元数据。

[https://en.wikipedia.org/wiki/Extensible_Metadata_Platform](https://en.wikipedia.org/wiki/Extensible_Metadata_Platform)

# php - 将第一个字母转换为大写字母，但仅适用于大写字符串 - PHP

> ID：12640790
> 
> 赞同：2
> 
> 时间：2012-09-28T13:16:59.137
> 
> 标签：php

任何人都可以帮我这样做吗？

例如我有一串

```
SOME of the STRINGS are in CAPITAL Letters 
```

我想要的输出是

```
Some of the Strings are in Capital Letters 
```

只有大写字母的首字母大写，其余字母小写。

如何使用 PHP 实现这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T13:18:13.167

您可以使用`preg_replace_callback`查找所有大写单词并用自定义回调函数替换它们

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-28T13:26:59.460

快速示例：

```
$input = "SOME of the STRINGS are in CAPITAL Letters";
$words = explode(" ",$input);
$output = array();
foreach($words as $word)
{
    if (ctype_upper($word)) $output[] = $word[0].strtolower(substr($word,1));
    else $output[] = $word;
}
$output = implode($output," "); 
```

输出：

> 一些字符串是大写字母

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T13:25:22.660

您可以使用`strtolower`和`ucwords`

```
$word = "SOME of the STRINGS are in CAPITAL Letters";
echo ucwords(strtolower($word)); 
```

输出

```
Some Of The Strings Are In Capital Letters 
```

如果你想要它完全按照你描述的方式

```
$word = "SOME of the STRINGS are in CAPITAL Letters";
$word = explode(" ", $word);
$word = array_map(function ($word) {return (ctype_upper($word)) ?  ucwords(strtolower($word)) : $word;}, $word);
echo implode(" ", $word); 
```

输出

```
 Some of the Strings are in Capital Letters 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-28T13:34:46.223

如果你想避免正则表达式

```
$text = "SOME of the STRINGS are in CAPITAL Letters";

$str_parts = explode(" ", $text);

foreach ($str_parts as $key => $str_part)
{
  if (ctype_upper($str_part) == strtolower(substr($str_part,1)))
  {
    $str_parts[$key] = ucfirst(strtolower($str_part));;
  }
}

$text = implode($str_parts, " ");

echo $text; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-28T13:33:00.830

感谢您的回答，真的很有帮助，它给了我一些想法。我也使用 preg_replace，只是分享给可能需要它的人。

```
preg_replace('/([A-Z])([A-Z ]+)/se', '"\\1" . strtolower("\\2")', $str); 
```

或者

```
preg_replace('/([?!]{2})([?!]+)/', '\1', $str); 
```

# mysql - Mysql数据库关于学生、班级、年级提升的方法

> ID：12640793
> 
> 赞同：0
> 
> 时间：2012-09-28T13:17:02.700
> 
> 标签：mysql, database

尽管我研究了有关该主题的其他一些解决方案，但我对如何在以下情况下使用 Mysql 数据库感到困惑。

在学校里，孩子们按班级分组。例如，最小的班级是 5 年级，第二个班级是 6 年级，以此类推，最后一个班级是 8 年级。每个班级大约有20名学生，并且由于每个年级的学生人数约为100人，因此形成了几个班级并使用标识符来唯一标识一个班级（例如：五年级班级：5A，5B，5C，5D， 5E) 。每年，课程都会升级到下一个递增年级。所以 5 级变成 6 级，以此类推。

请帮助我提供数据库设计理念/提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T13:37:21.917

为学生（学生）创建一张表，为班级（班级）创建一张表，并将它们链接到say ... classId。成绩将不是该表中的主键，因此当一年过去时，您可以在不更改 classId 的情况下对其进行更新。

```
mysql> create table Classes (classId int, grade varchar(5), primary key(classId));
Query OK, 0 rows affected (0.00 sec)

mysql> create table Students (studentId int, name varchar(30), classId int, primary key(studentId), foreign key (classId) references Classes(classId));
Query OK, 0 rows affected (0.01 sec) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T15:21:47.720

如果可能的话，我喜欢到处都有明确的数据。例如，我将创建单独的等级（5、6、7、8 等）和等级 ID（A、B、C 等）字段。这有很多好处。例如：

*   查询所有五年级班级不会像那样导致范围查询`SELECT * FROM table WHERE grade LIKE "5%";`。
*   同样的事情：您可以轻松查询所有“B”类而无需完全扫描（假设您有正确的索引）

另一件事是课程每年都在增加。5B变成6B然后是7B。所以这使得很难找到你正在寻找的课程。我会在现场创建一个开始。发现 2006 年开始的“B”类很容易和明确（再次明确的东西:)）

我的建议是：

```
CREATE TABLE school_class (
id smallint unsigned NOT NULL AUTO_INCREMENT,
start_in smallint unsigned NOT NULL,
grade tinyint unsigned NOT NULL,
grade_id CHAR(1),
PRIMARY KEY (id)
) ENGINE=InnoDB;

CREATE TABLE student (
id mediumint unsigned NOT NULL AUTO_INCREMENT,
class_id smallint unsigned NOT NULL,
name VARCHAR(255),
PRIMARY KEY (id),
FOREIGN KEY (class_id) references school_class(id)
) ENGINE=InnoDB; 
```

# java - 如何在 Dialog for Android 的中心做标题

> ID：12640796
> 
> 赞同：1
> 
> 时间：2012-09-28T13:17:15.300
> 
> 标签：java, android, dialog

如何在 android 的这个对话框中在中心制作今日广告标题。

**代码：**

```
final Dialog dialog = new Dialog(context);
    dialog.setTitle("Today Ad");
    dialog.setContentView(R.layout.custom);
Button dialogButton = (Button) dialog.findViewById(R.id.dialogButtonOK);
    // if button is clicked, close the custom dialog
    dialogButton.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            dialog.dismiss();
        }
    });

    dialog.show(); 
```

# android - zoomToSpan 使我的应用程序崩溃后的 Android Mapview 缩小

> ID：12640798
> 
> 赞同：0
> 
> 时间：2012-09-28T13:17:18.467
> 
> 标签：android, android-mapview

这是我的代码：

```
MapController cont = map.getController();
GeoPoint center = new GeoPoint((maxLat + minLat)/2,(maxLon+ minLon)/2 );
cont.zoomToSpan((maxLat- minLat),(maxLon- minLon));
cont.setCenter(center);
cont.zoomOut(); // this cause my app to crash 
```

我需要'cont.zoomOut();' 因为 android 的 zoomToSpan 几乎足够好。我仍然需要缩小（向上一级）以使我所有的叠加层/地理点等可见。

那么在 zoomToSpan 之后我在哪里 zoomOut ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T13:29:31.373

正确的解决方案是在使用 zoomToSpan 方法时使用一些填充： [Android MapView -setting zoom automatically until all ItemizedOverlay's are visible](https://stackoverflow.com/a/5242149/414969)

# android - Stocktwits API - AuthorizationCodeGrant HttpResponseException: 400 Bad Request

> ID：12640800
> 
> 赞同：2
> 
> 时间：2012-09-28T13:17:32.557
> 
> 标签：android, oauth-2.0, stocktwits

在 oauth2 舞蹈的第 1 步之后，我可以在重定向 URL 中检索代码。这工作正常。但是之后，

我有一个 'com.google.api.client.http.HttpResponseException: 400 Bad Request' 错误

试图获取 accessTokenResponse。知道为什么吗？

```
AuthorizationCodeGrant request = new AuthorizationCodeGrant(new NetHttpTransport(),
                                new JacksonFactory(),
                                OAuth2ClientCredentials.ACCESS_TOKEN_URL,
                                OAuth2ClientCredentials.CLIENT_ID, 
                                OAuth2ClientCredentials.CLIENT_SECRET,
                                code,
                                OAuth2ClientCredentials.REDIRECT_URI);

                        try {
                            AccessTokenResponse accessTokenResponse = request.execute();
                            CredentialStore credentialStore = new SharedPreferencesCredentialStore(prefs);
                            credentialStore.write(accessTokenResponse );
                        } catch (IOException e) {
                            Log.e(TAG, "error= "+e);
                            e.printStackTrace();
                        } 
```

这是触发错误的行：

```
AccessTokenResponse accessTokenResponse = request.execute(); 
```

我正在使用“com.google.api.client.auth.oauth2.draft10.AccessTokenRequest.AuthorizationCodeGrant”

我应该使用其他东西吗？有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T19:20:32.000

[请参阅授权流程](http://stocktwits.com/developers/docs/authentication)的第 5 步或[oauth/token 端点](http://stocktwits.com/developers/docs/api#oauth-token-docs)。

好像你错过了grant_type。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T08:18:23.857

这看起来有效：

```
// Create a new HttpClient and Post Header
                        HttpClient httpclient = new DefaultHttpClient();
                        HttpPost httppost = new HttpPost(OAuth2ClientCredentials.ACCESS_TOKEN_URL);

                        try {
                            // Add your data
                            List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(5);
                            nameValuePairs.add(new BasicNameValuePair("client_id", OAuth2ClientCredentials.CLIENT_ID));
                            nameValuePairs.add(new BasicNameValuePair("client_secret", OAuth2ClientCredentials.CLIENT_SECRET));
                            nameValuePairs.add(new BasicNameValuePair("code", code));
                            nameValuePairs.add(new BasicNameValuePair("grant_type", OAuth2ClientCredentials.TOKEN_GRANT_TYPE));
                            nameValuePairs.add(new BasicNameValuePair("redirect_uri", OAuth2ClientCredentials.REDIRECT_URI));
                            httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

                            Log.i(TAG, "httppost= "+inputStreamToString(httppost.getEntity().getContent()));

                            // Execute HTTP Post Request
                            HttpResponse response = httpclient.execute(httppost);
                            Log.i(TAG, "response= "+inputStreamToString(response.getEntity().getContent()));

                        } catch (ClientProtocolException e) {
                            Log.e(TAG, "error= "+e);
                        } catch (IOException e) {
                            Log.e(TAG, "error= "+e);
                        } 
```

重定向 url 包含我需要的访问令牌。

# sql - 从sql中的xml中删除第n个子节点之后的所有子节点

> ID：12640802
> 
> 赞同：0
> 
> 时间：2012-09-28T13:17:38.227
> 
> 标签：sql, xquery-sql

我有以下 XML 结构：

```
<Config>
  <DeviceFeatures>
    <IMEI>7844454564</IMEI>
    <PhoneNo>12354</PhoneNo>
    <ICCIDNo>455554</ICCIDNo>
    <IMSINo>87451</IMSINo>
    <UniqueDeviceId>360</UniqueDeviceId>
    <UserId>511154565@showcase.n</UserId>
    <Password>test123</Password>
    <Proxy>129.192.174.126</Proxy>
    <Proxy_Port>5060</Proxy_Port>
  </DeviceFeatures>
</Config> 
```

我想删除 node 之后的所有子节点`<UniqueDeviceId></UniqueDeviceId>`。

我想删除特定的 (UserId,Password,Proxy,Proxy_Port) 节点。

我已经尝试过以下方法：

```
DeviceFeatures.modify ('delete (/Config/DeviceFeatures/*)') 
```

但它会删除所有子节点。

我尝试了其他一些解决方案，但似乎根本不起作用，我不想编写多个更新语句来删除单个节点。

有人知道这种情况的可能解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T13:56:21.660

如果你知道顺序，你可以使用

```
 DeviceFeatures.modify ('delete /Config/DeviceFeatures/*[position()>=6]') 
```

# macos - Mac OS X Sandbox：共享访问用户选择的文件

> ID：12640807
> 
> 赞同：2
> 
> 时间：2012-09-28T13:17:58.343
> 
> 标签：macos, appstore-sandbox

我有一个安装代理的应用程序，我希望代理能够访问用户在应用程序中使用`NSOpenPanel`.

在 Mac OS Sandbox 中执行此操作的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-21T18:20:15.550

10.7.5 中并不真正支持组容器，因为 containerURLForSecurityApplicationGroupIdentifier 仅在 10.8+ 中受支持。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T12:53:43.490

让进程在用户登录时运行的推荐方法是使用 SMLoginItemSetEnabled()。您可以通过将代理捆绑包放入主应用捆绑包的登录项文件夹 (MainApp/Contents/Library/LoginItems/Agent) 来执行此操作。

然后，从 OS X 10.7.4 开始，可以使用[应用程序组权利](http://developer.apple.com/library/Mac/#documentation/Miscellaneous/Reference/EntitlementKeyReference/Chapters/EnablingAppSandbox.html)，以便您的主应用程序和代理可以共享此权利，允许它执行 IPC 并共享对组容器的访问（~/Library/Group Containers /。

然后，当用户使用 NSOpenPanel 选择文件时，您可以要求 UI 将所选文件复制到组容器中，以便代理可以处理它们。

# c++ - 嵌套模板和参数推导

> ID：12640808
> 
> 赞同：2
> 
> 时间：2012-09-28T13:18:00.733
> 
> 标签：c++, templates, gcc

> **可能重复：**
> [非推断上下文的解决方法](https://stackoverflow.com/questions/8308213/workaround-for-non-deduced-context)

GCC 无法推断此“简单”函数的参数。有什么方法可以帮助编译器吗？

```
template<int a> struct A
{
    template<int b> struct B
    {
    };
};

template<int a, int b> void test(typename A<a>::template B<b> param) { }

int main()
{
    A<1>::B<2> b;

    test<1,2>(b); // works
    test(b);      // doesn't work
} 
```

来自 GCC 4.7.1 的错误消息：

```
test.cpp: In function 'int main()':
test.cpp:15:8: error: no matching function for call to 'test(A<1>::B<2>&)'
test.cpp:15:8: note: candidate is:
test.cpp:8:29: note: template<int a, int b> void test(typename A<a>::B<b>)
test.cpp:8:29: note:   template argument deduction/substitution failed:
test.cpp:15:8: note:   couldn't deduce template parameter 'a' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T13:30:27.517

尽管这似乎是一个简单的推论，但您希望编译器执行的操作实际上会非常复杂且通常执行起来很慢，并且 C++ 不支持它。

解决此问题的一种方法是创建另一个非嵌套类，将所有模板参数放在一个位置。然后，您可以通过从它派生使它看起来是一个嵌套类：

```
template<int a,int b> struct A_B {
  /* define your class here */
};

template<int a> struct A
{
    template<int b> struct B : A_B<a,b> {/*nothing here*/};
};

template<int a, int b> void test(A_B<a,b> param) { }

int main()
{
    A<1>::B<2> b;

    test<1,2>(b); // works
    test(b);      // works too
} 
```

C++11 还支持模板别名，这使得它更简洁一些，尽管它还没有得到广泛的支持：

```
template<int a> struct A
{
    template<int b> using B = A_B<a,b>;
}; 
```

这个问题密切相关：

[非推断上下文的解决方法](https://stackoverflow.com/questions/8308213/workaround-for-non-deduced-context)

那里提供的答案对您的情况也很有用。如果你可以让你的函数成为朋友，那么你可以这样做：

```
template<int a> struct A
{
    template <int b>
    struct B
    {
    };

    template <int b>
    friend void test(B<b> param)
    {
    }
}; 
```

# c++ - 在没有预处理器或 stdint.h 的情况下检测 64 位整数类型

> ID：12640809
> 
> 赞同：-2
> 
> 时间：2012-09-28T13:18:04.707
> 
> 标签：c++, c++11

不使用`#if`, `stdint.h`,`inttypes.h`或特定于编译器的扩展（非标准内部类型除外），但可以自由使用所有其他 C++ 功能（例如包括 C++11 `type_traits`），是否可以编写具有以下效果的代码

```
typedef {some implementation-specific type} int_least64; 
```

当且仅当存在提供至少 64 位精度的特定于实现的类型，否则会产生编译时错误？

该构造应该检测可能具有所需属性的非标准内在类型（例如`__int64`在 MSVC++ 上）以及标准的内在类型（`long`, `long long`）。如果有几种类型符合要求，则应选择符合条件的最小的一种。`enable_if`理想情况下，使用 in和错误输出以及检测任意大的整数（例如，一些编译器现在提供）都是可推广的`__int128`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T15:02:39.810

不，你不能。程序没有工具可以内省实现中可用的类型，并且给定一个不合格的名称，没有办法在程序中以这样的方式使用它，即使名称不正确，程序仍然是格式良好的。表示一个类型。

这是添加`cstdint`到 C++ 以及 C99 兼容性的部分动机。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T15:11:22.777

如果问题是 MSVC 和`<cstdint>`，请至少升级到 MSVS2010 或为 Windows 自己编写。这并不难。

您可以使用一些模板技巧，但它仍然需要`long long`获取（和超过）64 位整数。

我从 SO C++ Lounge 的一个人（即@StackedCrooked）那里得到它：

[https://github.com/rubenvb/KISS/blob/master/include/types.hxx#L47](https://github.com/rubenvb/KISS/blob/master/include/types.hxx#L47)

# iphone - dismissmodalviewcontrolleranimated 被弃用 首先在 ios 6 中被弃用

> ID：12640810
> 
> 赞同：23
> 
> 时间：2012-09-28T13:18:08.093
> 
> 标签：iphone

我刚刚更新了 iOS 6，并运行了我在 iOS 4.3 中创建的旧代码。他们在我的应用程序中给了我一些警告。

我使用`presentModelViewController:`然后我将其关闭，但它给了我警告

> dismissModalViewControllerAnimated 在 iOS 6 中首先被弃用。

为什么他们对该代码显示警告？这是代码：

```
[picker dismissModalViewControllerAnimated:YES]; 
```

此行变为黄色并显示错误。请给我指导以删除警告。

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-10-04T08:59:18.310

现在在 ios 6 你可以使用

```
[[Picker presentingViewController] dismissViewControllerAnimated:YES completion:nil]; 
```

代替

```
[[Picker parentViewControl] dismissModalViewControllerAnimated:YES]; 
```

和

```
[self presentViewController:picker animated:YES completion:nil]; 
```

代替

```
[self presentModalViewController:picker animated:YES]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-04T14:00:19.137

如果您的部署目标设置为 iOS 6，您应该只收到弃用警告。所以我会检查您的部署目标，这可能设置为 Xcode 默认值。将其更改为 4.3 后，弃用警告应该会消失。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-28T21:18:36.410

您可以使用`dismissViewControllerAnimated:completion`iOS[开发者](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html#//apple_ref/occ/instm/UIViewController/dismissViewControllerAnimated%3acompletion%3a)文档中的 ,

> 解除视图控制器动画：完成：
> 
> 关闭接收者呈现的视图控制器。- (void)dismissViewControllerAnimated:(BOOL)标志完成:(void (^)(void))完成参数
> 
> 旗帜
> 
> ```
> Pass YES to animate the transition. completion
> 
> A block called after the view controller has been dismissed. 
> ```
> 
> 讨论
> 
> 呈现视图控制器负责关闭它呈现的视图控制器。如果您在呈现的视图控制器本身上调用此方法，它会自动将消息转发到呈现的视图控制器。
> 
> 如果您连续呈现多个视图控制器，从而构建一个呈现视图控制器的堆栈，则在堆栈中较低的视图控制器上调用此方法会解除其直接子视图控制器以及堆栈上该子视图控制器上方的所有视图控制器。发生这种情况时，只有最顶层的视图会以动画方式消失；任何中间视图控制器都简单地从堆栈中删除。最顶层的视图使用其模态转换样式被解除，这可能与堆栈中其他视图控制器使用的样式不同。
> 
> 如果要保留对接收者呈现的视图控制器的引用，请在调用此方法之前获取 presentViewController 属性中的值。
> 
> 在显示的视图控制器上调用 viewDidDisappear: 方法之后调用完成处理程序。可用性
> 
> ```
> Available in iOS 5.0 and later. 
> ```

# java - 以编程方式创建 IMAP/POP3 帐户

> ID：12640813
> 
> 赞同：3
> 
> 时间：2012-09-28T13:18:18.210
> 
> 标签：java, android, account

我可以在我的 Android 应用程序中使用**Accountmanager**通过代码添加 Gmail 帐户。但 IMAP/POP3 帐户略有不同。

如何通过编程添加 IMAP/POP3 帐户？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-28T13:28:37.503

[这与您上一个问题](https://stackoverflow.com/questions/12640496/how-to-get-imap-pop3-accounts)的答案几乎相同：

第 1 步：列出所有支持 IMAP/POP3 的 Android 电子邮件客户端。大概有几十个。

第 2 步：遍历该列表，联系每个开发人员，并询问他们是否有 API 可以为他们的应用程序操作帐户信息。

# rounded-corners - 边框半径不适用于 img 元素

> ID：12640815
> 
> 赞同：4
> 
> 时间：2012-09-28T13:18:29.637
> 
> 标签：rounded-corners, css, internet-explorer-10

我正在尝试在 IE 10 中设置一个不工作的边框半径，但在 IE 9 中可以工作。问题是当我只为图像的左上角定义半径时，图像不会被裁剪边界半径。

坏的：

```
<img style="border-radius: 14px 0px 0px 0px" alt="" src=""> 
```

现在，如果我在右上角或左下角添加第二个边界半径，则应用左上角半径。

好的：

```
<img style="border-radius: 14px 1px 0px 0px" alt="" src=""> 
```

此 URL 演示了该问题并为不使用 IE 10 的用户添加了参考图像。

[http://gamma.tiedtheleader.com/border-radius.htm](http://gamma.tiedtheleader.com/border-radius.htm)

更新 9/30：我在 Connect 网站上收到了 Microsoft 的回复，他们确认他们能够重现该问题并正在进一步调查。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-06T17:07:08.477

我只是在 IE 10 中没有在图像上应用圆角时遇到了同样的问题。最初我有这个：

```
border-radius: 45px 0 45px 0; 
```

结果根本没有边界，更改 0 边界半径之一使我的边界半径再次出现。

最后我应用了这种风格：

```
border-radius: 45px 0.1px 45px 0.1px; 
```

在其他浏览器中没有副作用，但我在 IE 10 中使用了圆角

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T13:24:59.097

试试`border-top-left-radius: 14px`。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-29T10:35:06.247

据我所知，大多数浏览器不会让您剪辑带有圆形边框的图像。（即使 IE10 可以，它在其他浏览器中也可能看起来很奇怪）。最简单的解决方案是使用嵌套的 div 并将图像设置为背景：

HTML

```
<div class="imageborder">
  <div id="image1"> </div>
</div> 
```

CSS

```
.imageborder {
  border-radius: 5px;
}
#image1 {
  background-image: (yourimage);
} 
```

您可能必须手动设置 div 的高度才能显示。

# sql - SQL查询效率

> ID：12640816
> 
> 赞同：2
> 
> 时间：2012-09-28T13:18:31.810
> 
> 标签：sql, oracle

我有一个有效的查询，不确定它是否有效。

表列：

1.  p_type: 可以是 STRING sell、cancelsell、bank、cancelbank
2.  ID
3.  菲德
4.  单元

要执行的操作：

1.  每种流程类型的 SUM（单位）sell、cancelsell、bank、cancelbank。
2.  SUM(UNIT for sell) - SUM(unit for cancelsell) , SUM(unit for bank) - SUM(unit for cancelbank)

注意：虽然我需要检查所有选择的相同值，但我也在检查每个选择中的 id 和 fid。

现有查询：

```
 select sell-cancelsell scount, bank-cancelbank bcount from

    (select sum(a.unit) as sell from table1 a where   
    a.p_type = 'Sell' and a.id=1 and a.fid=2 ),

    (select sum(c.unit) as cancelsell from table1  c where      
    c.p_type = 'CancelSell' and c.id=1 and c.fid=2),

    (select sum(b.unit) as bank from table1  b where     
    b.p_type = 'Bank' and b.id=1 and b.fid=2),

    (select sum(d.unit) as cancelbank from table1  d where  
    d.p_type = 'CancelBank' and d.id=1 and d.fid=2) 
```

够好吗？如果有人可以提出一种提高效率的方法，那就太好了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-28T13:22:19.857

你可以这样做

```
select 
sum(Case when a.p_type = 'sell' then a.unit else null end) as sellUnit, 
sum(Case when a.p_type = 'CancelSell' then a.unit else null end) as CancelSellUnit,
sum(Case when a.p_type = 'Bank' then a.unit else null end) as BankUnit ,
sum(Case when a.p_type = 'CancelBank' then a.unit else null end) as CancelBankUnit  
from table1 a where and a.id=1 and a.fid=2 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T13:34:30.343

试试这个：

```
SELECT 
        SUM(CASE WHEN P_TYPE = 'SELL' THEN UNIT END) - 
        SUM(CASE WHEN P_TYPE = 'CANCELSELL' THEN UNIT END) AS SCOUNT,
        SUM(CASE WHEN P_TYPE = 'BANK' THEN UNIT END) -
        SUM(CASE WHEN P_TYPE = 'CANCELBANK' THEN UNIT END) AS BCOUNT 
FROM    TABLE1  
WHERE   ID=1 AND FID=2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T13:51:03.060

```
select temp1.sumunit - temp2.sumunit,temp3.sumunit-temp4.sumunit from
(select p_type,sum(unit) as sumunit from table1
group by p_type) as temp1
inner join
(select p_type,sum(unit) as sumunit from table1
group by p_type) as temp2 on temp2.p_type = 'cancelsell' 
inner join
(select p_type,sum(unit) as sumunit from table1
group by p_type) as temp3 on temp3.p_type = 'bank'
inner join
(select p_type,sum(unit) as sumunit from table1
group by p_type) as temp4 on temp4.p_type='cancelbank'
where temp1.p_type='sell'
and temp1.id = 1 and temp1.fid = 2
and temp2.id = 1 and temp2.fid = 2
and temp3.id = 1 and temp3.fid = 2
and temp4.id = 1 and temp4.fid = 2 
```

# html - 如何自动化 Windows 8 HTML5 应用程序的单元测试？

> ID：12640817
> 
> 赞同：7
> 
> 时间：2012-09-28T13:18:31.463
> 
> 标签：html, windows-8, windows-runtime, winjs

我正在编写一个 Windows 8 应用程序，并为它编写单元测试。如何在 Windows 8 环境中以自动化方式运行它们？

如果我编写超级简单的 JavaScript 文件，不依赖于 Windows 8 环境或 DOM，我可以使用 Node.js 从命令行对它们进行单元测试。这非常快（不到一秒）。

如果我需要涉及 DOM，并且我将 DOM 的使用保持在不太新的功能上，我可以在 Node.js 中使用 jsdom 并获得相同的设置和相同的速度。

但是 jsdom 是不完整的，而且我经常想使用基本的 Windows 8 功能，如 WinJS 基础库（例如`WinJS.Promise`）或`Windows.*`枚举。理想情况下，我应该在与我的应用程序实际运行时相同的 JS 引擎和 DOM 环境中进行测试。

因此，理想情况下，我需要一个测试运行程序：一个轻量级的 Windows 8 HTML5 容器，它可以使用真实的 DOM 运行一些单元测试，并可以访问 WinJS 和 Windows 运行时 API。为了集成到构建过程中，我还需要能够将结果报告回命令行（stdout、stderr）并根据成功或失败更改测试运行器的返回代码。它应该是完全自动化的，可以在后台运行，而且速度非常快（不到 10 秒）。

我知道 WebKit 有这样的工具，例如[PhantomJS](http://phantomjs.org/)。Windows 运行时 HTML5 环境是否存在这种情况？如果没有，我应该研究哪些 API 来构建类似的东西？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-28T13:50:15.317

目前没有办法以无头方式运行 Win8/WinJS 测试套件。WinJS 应用程序所需的运行时不能独立运行，除非运行完整的 WinJS 应用程序。

运行测试（IME）的最佳方式是在您的解决方案中创建一个单独的 WinJS 项目来运行您的测试。

Christopher Bennage 有一篇博客文章描述了基本设置，这里是：[http ://dev.bennage.com/blog/2012/08/15/unit-testing-winjs/](http://dev.bennage.com/blog/2012/08/15/unit-testing-winjs/)

我有一些博客文章更进一步：

[http://lostechies.com/derickbailey/category/winjs/](http://lostechies.com/derickbailey/category/winjs/)

[http://lostechies.com/derickbailey/2012/08/17/asynchronous-unit-tests-with-mocha-promises-and-winjs/](http://lostechies.com/derickbailey/2012/08/17/asynchronous-unit-tests-with-mocha-promises-and-winjs/)

[http://lostechies.com/derickbailey/2012/08/21/a-winjs-specrunner-automating-script-tag-insertion-for-unit-tests/](http://lostechies.com/derickbailey/2012/08/21/a-winjs-specrunner-automating-script-tag-insertion-for-unit-tests/)

如果您不喜欢为测试运行单独项目的想法，或者如果您想要 QUnit 而不是 Jasmine 或 Mocha，请查看 QUnit-Metro：http://qunitmetro.github.com/QUnitMetro/ [-](http://qunitmetro.github.com/QUnitMetro/)它运行在-project 与您的真实应用程序，并在开发模式下为您提供一个上下文菜单来运行您所在页面的测试。

我不喜欢 QUnit 或 QUnit-Metro 在页面中的工作方式。但如果您不喜欢单独的项目，您可能会发现它很合适。

希望有帮助。

# java - 除了性能之外，包装器类型还有什么缺点吗？

> ID：12640826
> 
> 赞同：0
> 
> 时间：2012-09-28T13:19:03.107
> 
> 标签：java, database, wrapper

在我的工作中，我主要从事具有大量数据库代码的业务应用程序。我通常不写数字运算的科学逻辑。

这让我想知道 - 在我的实体类中始终使用包装器类型是个好主意吗？我发现自己经常将原语转换为包装器。相反，我想不出我不能没有原始人的情况。

如果我将实体中的字段声明为包装器，则从 db 读取的数据将由我的持久层自动映射到这些字段，从而省去了手动创建它们的麻烦。

有些事情只能通过经验来实现，所以我问你们，有没有人尝试过这种方法？有什么问题吗？

*我不关心性能，而是从良好实践/架构的角度提出这个问题。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T13:25:49.140

包装器与基元

优点

*   可以与泛型一起使用
*   支持许多其他方法。

缺点

*   使用更多的 CPU
*   使用更多内存
*   意味着该值可以是`null`
*   在某些情况下打字时间更长。

# jquery - 设置多选选择框的高度

> ID：12640828
> 
> 赞同：17
> 
> 时间：2012-09-28T13:19:10.327
> 
> 标签：jquery, jquery-chosen

我正在使用带有多选下拉菜单的 Chosen，并希望将所选框的高度设置为设定的大小。

我在一个带有溢出的对话框中有一个选择的框：隐藏，并且选择的框绝对位于容器之外（以便选择的下拉菜单正确弹出对话框。）不幸的是，“位置：绝对；” 将其从流程中删除，并导致没有高度...使对话框缩小并且多选似乎从中弹出。我可以将父容器设置为固定的高度，但是随着选择更多选项，多选择的扩展将扩展，并且我仍然会在长列表上遇到相同的问题。

有没有办法将选择的多选设置为特定高度？谢谢！

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-28T13:58:03.537

没关系......我自己用 CSS 想出来的：

```
.mycontainer {
    height: 120px;
}

.mycontainer .chzn-container-multi .chzn-choices {
    height: 120px !important;
    overflow-y: auto;
} 
```

.mycontainer 是保存所选下拉列表的 div。

* * *

**请停止编辑答案。** 这个答案与 2 年前我最初问这个问题时可用的 Chosen 版本一致。对于那些使用较新版本（即 1.4.2）的人，您可以尝试将上述 CSS 中的“chzn”前缀更改为“chosen”......但不能保证这会起作用（我没有看过他们的新造型。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-25T12:35:51.980

```
.chzn-container .chzn-results { max-height: 150px; } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-04-23T13:40:44.513

This is what did the trick for me:

```
.mycontainer .chosen-choices {
  max-height: 150px;
  overflow-y: auto;
} 
```

You basically want to limit the height of the ul that holds the options.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-21T14:32:21.473

我能够在下面的 css 类中解决列表高度：

```
.chzn-container .chzn-results {
height: 150px;} 
```

我得到了剩余列表的滚动条。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-06-13T15:52:27.693

所有其他答案都有效，但我相信这是最优雅的解决方案：为`.chzn-results`（例如`150px`）设置一个新的最大高度。所有相关的其他块将紧随其后。这样下拉列表不会太大，只有几个结果。

```
.chzn-results {
   max-height: 150px;
} 
```

If you really want a fixed height, even with few results, simply use the following code:

```
.chzn-results {
   height: 150px;
} 
```

(Add `!important` to line if you need to override `chosen.css`'s behaviour)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-11-25T15:11:48.463

as of v1.8.3, this works:

```
.chosen-container .chosen-results {
    max-height: 60vh;
} 
```

I'll recommend using `vh` instead of `px` : renders it as a % of available screen height, so it won't flow out of the screen.

# jquery - Struts 2 JQuery TreeTag 更改 JSP 中的所有 CSS

> ID：12640840
> 
> 赞同：0
> 
> 时间：2012-09-28T13:20:10.327
> 
> 标签：jquery, jquery-ui, struts2, tree, struts2-jquery

我正在尝试使用[com.jgeppert.struts2.jquery 的树插件将树](http://code.google.com/p/struts2-jquery/wiki/TreeTag)标签功能添加到我的 JSP 中。

问题是，当我添加标签时，页面其余部分的所有 css 样式都会更改为插件自己的 css。

关于如何解决这个问题的任何想法？

我只是尝试将此 div 添加到我的页面，但它会影响 JSP 中的所有内容：

```
<sj:div>

<sj:head locale="fr" jqueryui="true" jquerytheme="redmond" />

<sjt:tree id="treeStatic" jstreetheme="default"
    openAllOnLoad="false" id="treeDynamicCheckboxes"
    jstreetheme="apple" rootNode="nodes"
    childCollectionProperty="children" nodeTitleProperty="title"
    nodeIdProperty="id" openAllOnLoad="true" checkbox="true"
    checkboxCheckAllTopics="checkAllNodesTopic"
    checkboxUncheckAllTopics="uncheckAllNodesTopic"
    checkboxShowTopics="showCheckboxesTopic"
    checkboxHideTopics="hideCheckboxesTopic"
    onClickTopics="treeClicked">
    <sjt:treeItem title="Struts2">
        <sjt:treeItem title="General">
            <sjt:treeItem title="Struts2"
                href="http://struts.apache.org/2.x/index.html" />
            <sjt:treeItem title="Struts2 @ Facebook"
                href="http://www.facebook.com/pages/Struts2-Users/103890046351798" />
        </sjt:treeItem>
        <sjt:treeItem title="Plugins">
            <sjt:treeItem title="Struts2 Plugins"
                href="https://cwiki.apache.org/S2PLUGINS/home.html" />
            <sjt:treeItem title="Struts2 jQuery Plugin"
                href="http://code.google.com/p/struts2-jquery/" />
            <sjt:treeItem title="Struts2 Full Hibernate Plugin"
                href="http://code.google.com/p/full-hibernate-plugin-for-struts2/" />
        </sjt:treeItem>
        <sjt:treeItem title="Blogs">
            <sjt:treeItem title="Struts2 jQuery News"
                href="http://www.jgeppert.com/category/java/struts2-jquery/" />
        </sjt:treeItem>
        <sjt:treeItem title="AJAX Links">
            <s:url id="ajax1" value="/ajax1.action" />
            <sjt:treeItem title="Ajax 1" href="%{ajax1}" targets="result" />
            <s:url id="ajax2" value="/ajax2.action" />
            <sjt:treeItem title="Ajax 2" href="%{ajax2}" targets="result"
                effect="highlight" effectDuration="2500" />
            <s:url id="ajax3" value="/ajax3.action" />
            <sjt:treeItem title="Ajax 3" href="%{ajax3}" targets="result"
                onBeforeTopics="beforeLink" onCompleteTopics="completeLink" />
            <s:url id="ajax4" value="/ajax4.action" />
            <sjt:treeItem title="Ajax 4" href="%{ajax4}" targets="result"
                effect="bounce" effectDuration="1000" />
        </sjt:treeItem>
    </sjt:treeItem>
</sjt:tree>

<sj:submit formIds="treeForm" targets="result3" button="true" />
<sj:submit onClickTopics="checkAllNodesTopic"
    value="Check all Nodes" button="true" />
<sj:submit onClickTopics="uncheckAllNodesTopic"
    value="Uncheck all Nodes" button="true" />
<sj:submit onClickTopics="showCheckboxesTopic"
    value="Show Checkboxes" button="true" />
<sj:submit onClickTopics="hideCheckboxesTopic"
    value="Hide Checkboxes" button="true" />
<strong>Result Div :</strong>
<div id="result" class="result ui-widget-content ui-corner-all">Click
    on the AJAX Links above.</div>

</sj:div> 
```

# xcode - 有人在山狮上成功使用 OpenGL 分析器吗？

> ID：12640841
> 
> 赞同：4
> 
> 时间：2012-09-28T13:20:15.893
> 
> 标签：xcode, opengl, profiler, osx-mountain-lion

在 mac os X 山狮上运行 OpenGL 分析器时，**“附加到应用程序”列表保持为空**。

可以启动应用程序，但随后尝试打开 OpenGL 驱动程序监视器，我得到：“无法启动或附加到应用程序（空）”消息。

我正在使用 ：

*   代码 4.5
*   来自 Graphics Tools 的 openGL 分析器（从苹果开发网站下载）

我已经在 2 个不同的 macbook pro 上对此进行了测试。

编辑：我使用的 Xcode 图形工具版本似乎不是最后一个可用的版本。不幸的是，这是我在苹果开发下载中获得的唯一一个！[截屏](http://ourwip.com/images/capture-apple-dev-downloads.jpg)

我错过了什么？

已解决：我使用了错误（未更新）的苹果开发帐户来访问下载页面。我没有警告或错误消息，只是下载过时的文件。

我希望 Apple 添加一条简单的消息，例如：“警告：您使用过期帐户登录。请注意，您没有访问最新的资源”。

谢谢大家的帮助。我本可以在这个愚蠢的错误上度过整整一个星期。

Ps：我自己无法回答这个问题，因为我缺乏声誉。

编辑：**我设法获得了一个更新的文件，但现在在我看来它不是最后一个。**

编辑：**我终于得到了 Xcode 的 8 月版图形工具，**但我必须承认我不了解 Apple 开发帐户管理背后的逻辑。

[我在https://developer.apple.com/downloads/](https://developer.apple.com/downloads/)获得的文件版本：

*   新鲜的免费开发帐户 --> Xcode 的**March** *图形工具*
*   ios 付费程序开发帐户 --> **June** *Graphics Tools for Xcode*
*   旧开发帐户（未更新的 ios 付费程序）--> Xcode 的**August** *图形工具*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-28T14:16:53.683

我刚刚在带有 XCode 4.5 和 Mountain Lion 的新 MacBook Pro Retina 上安装了最新的 OpenGL Profiler（版本 4.7 (3)）（Xcode 图形工具 - 2012 年 8 月），它可以无缝运行。

图形工具可以在[https://developer.apple.com/resources/](https://developer.apple.com/resources/)找到（OSX -> 下载）：

![在此处输入图像描述](../Images/9032ff4b63ea4f0b964420283e354d1e.png)

我尝试使用 OpenGL 3.2（核心配置文件）和运行一些 WebGL 内容的 Google Chrome 来分析 GLFW。两种情况都按预期工作。

编辑：我现在已经成功尝试在另一个 MBP（2011 年末）上运行分析器，也使用 Mountain Lion 并再次成功。我没有按照 AmateurProgrammer 的建议按照 Apple 的指南设置环境，但我相信 OpenGL Profiler 在对下面的对话框回答“启用”时会在幕后执行此操作（在启动程序时出现）。一件小事是必须在启用 OpenGL Profiler Attaching 后启动要分析的程序。

我还能够分析运行 WebGL 的 Firefox，但 Safari 出现了一些问题。

![在此处输入图像描述](../Images/64298531518c54fce47ba7ea6a9d215c.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T14:28:09.687

按照 Apple 的[指南](https://developer.apple.com/library/mac/#documentation/GraphicsImaging/Conceptual/OpenGLProfilerUserGuide/GettedStarted/GettingStarted.html)设置使用 OpenGL Profiler 所需的环境。

# ruby-on-rails - rails 3.2 collection_select不加载值

> ID：12640844
> 
> 赞同：0
> 
> 时间：2012-09-28T13:20:31.037
> 
> 标签：ruby-on-rails, ruby

我在使用 collection_select 创建下拉菜单时遇到问题。所有的导游都说这个

```
<%= collection_select(:page, :user_id, @users, :id, :full_name) %> 
```

应该可以工作，但是当我运行服务器时，它不是出现的用户列表，而是一个空白列表。关联是页面属于一个用户并且一个用户有很多页面，并且当我调用@users = User.all时应该在控制器中获取数据库中的用户

关于如何填充下拉列表的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T13:40:47.317

我也浏览了apidocuments，

它在某处说如果您的调用方法为零，则不包括 :prompt 或 :include_blank 就不会进行选择，

尝试`<%= collection_select(:page, :user_id, @users, :id, :full_name, :prompt=>true) %>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T15:05:40.857

您是否将任何内容加载到`@users`您的变量中`PageController`？

如果它不属于（语义上）控制器，则使其成为辅助方法

```
module PagesHelper
  def users_for_select
    User.all
  end
end 
```

并且在视图中

```
<%= collection_select(:page, :user_id, users_for_select, :id, :full_name) %> 
```

还要在控制台中检查`:full_name`User 实例的正确方法

```
User.first.full_name 
```

编辑：关于`full_name`带有后备的方法的建议

```
class User < ActiveRecord::Base
  def full_name
    "#{first_name} #{last_name}".presence or name
  end
end 
```

# jquery - jQuery多个从不同的获取ID 我对 jQuery 很陌生，在页面上找到正确的选择时遇到了问题。当我搜索多项选择时，我知道如何选择一些选项，这不是我需要的。所以基本上这里是一个例子： Html 部分：<select class="nselect" id="1"><option value="1">test</option> <option value="2">test2< ID：12640845 赞同：2 时间：2012-09-28T13:20:33.167 标签：jquery, attributes, html-select, multiple-select 回答 #1 赞同：2 时间：2012-09-28T13:21:56.780 你只是错过了.你的类选择器，以及回调函数的左花括号： $(".nselect").change(function() { // ^ missed this ^ and this id = $(this).attr('id'); }); 旁注：您可以通过使用本机id属性而不是创建新的 jQuery 对象来使您的代码更有效率： $(".nselect").change(function() { id = this.id; }); 回答 #2 赞同：0 时间：2012-09-28T13:22:08.653 乍一看，作为nselect类名，您需要使用$(".nselect")而不仅仅是$('nselect') 回答 #3 赞同：0 时间：2012-09-28T13:23:21.123 你必须使用一个点来解决类 $(".nselect") 另外，我会使用 .blur() 而不是 .change() 回答 #4 赞同：0 时间：2012-09-28T13:24:01.817 var id;根据你想在哪里使用 id 变量，我相信你想把$(document).ready...</option></select>

# annotations - @XmlJavaTypeAdapter 未编组的对象为空

> ID：12640846
> 
> 赞同：1
> 
> 时间：2012-09-28T13:20:36.910
> 
> 标签：annotations, jaxb, jax-ws, unmarshalling, xmladapter

我的问题是：jax-ws 如何生成与@XmlJavaTypeAdapter 关联的解组代码？我在客户端代码中看不到适配器类（而是将它们分解为它们的适应对象）。因此，当调用 Web 服务方法时，**客户端如何知道如何解组返回的封送响应？**

细节：

我在另一个 @XmlJavaTypeAdapter 注释中使用 @XmlJavaTypeAdapter 注释，以便将 Map<> 转换为 ArrayList。编组的结果很好。我的 jax-ws 生成的客户端似乎无法解组结果。相反，我只得到一个空对象。

这是发送到客户端的 XML：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
   <soapenv:Body>
      <dlwmin:getRefTableResponse xmlns:dlwmin="http://service.web.test/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
       <wsRefDataObject>
        <map>
           <entry>
              <key>05</key>
              <value>
                 <columns>
                    <entry>
                       <key>state</key>
                       <value>CA</value>
                    </entry>
                    <entry>
                       <key>code</key>
                       <value>05</value>
                    </entry>
                 </columns>
              </value>
           </entry>
        </map>
     </wsRefDataObject>
  </dlwmin:getRefTableResponse> 
```

这是我的 WsRefDataOject 适配器类：

我对 ReferenceDataEntry 解组代码（地图对象）使用相同的逻辑。

```
public class MyMapAdapter extends XmlAdapter<MyMapType, Map<String,ReferenceDataEntry>> {      

public MyMapType marshal(Map<String,ReferenceDataEntry> bt) throws Exception {
    MyMapType myMapType =  new MyMapType();
    for(Map.Entry<String,ReferenceDataEntry> entry : bt.entrySet()) {   
        MyMapEntryType myMapEntryType = new MyMapEntryType();
        myMapEntryType.key = entry.getKey();
        myMapEntryType.value = entry.getValue();
        myMapType.entry.add(myMapEntryType);
    }
    return myMapType;
    }

public Map<String, ReferenceDataEntry> unmarshal(MyMapType v) throws Exception {
    Map<String, ReferenceDataEntry> map = new HashMap<String, ReferenceDataEntry>();
    for(MyMapEntryType myEntryType : v.entry){
        map.put(myEntryType.key, myEntryType.value);
    }
    return map;
} 
```

}

我可以在编组代码中设置断点并在服务中单步执行；但是，我不确定何时/何地存储/调用解组代码。适配器类不是在客户端生成的，所以我不确定客户端应该如何知道如何解组返回的 xml。

下面是生成的 WsRefDataObject 类和生成的 ReferenceDataEntry 类：

```
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "wsRefDataObject", namespace = "http://service.web.test/", propOrder = {
"map"})
public class WsRefDataObject {

protected MyMapType map;

/**
 * Gets the value of the map property.
 * 
 * @return
 *     possible object is
 *     {@link MyMapType }
 *     
 */
public MyMapType getMap() {
    return map;
}

/**
 * Sets the value of the map property.
 * 
 * @param value
 *     allowed object is
 *     {@link MyMapType }
 *     
 */
public void setMap(MyMapType value) {
    this.map = value;
}}

@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "referenceDataEntry", namespace = "http://service.web.test/", propOrder = {
"columns"})
public class ReferenceDataEntry {

protected RefMapType columns;

/**
 * Gets the value of the columns property.
 * 
 * @return
 *     possible object is
 *     {@link RefMapType }
 *     
 */
public RefMapType getColumns() {
    return columns;
}

/**
 * Sets the value of the columns property.
 * 
 * @param value
 *     allowed object is
 *     {@link RefMapType }
 *     
 */
public void setColumns(RefMapType value) {
    this.columns = value;
}} 
```

关于导致客户端中的空对象的任何想法？

# php - 如何将模型中的数据作为对象和数组传递到视图？

> ID：12640849
> 
> 赞同：1
> 
> 时间：2012-09-28T13:20:41.297
> 
> 标签：php, codeigniter, object, codeigniter-2

我有以下查询，它返回一行。

模型：

```
function get_guide_first(){
        $this->db
            ->select('*')
            ->from('guides_entries')
            ->order_by("guide_name", "asc")
            ->limit(1, 0)
            ->join('guides_content', 'guides_content.guide_id = guides_entries.guide_id'); 
        $query = $this->db->get();
        return $query->result_array();
    } 
```

这是我的控制器：

控制器：

```
public function get_first_guide(){
        $page_data['guide']=$this->guides_model->get_guide_first();
        $this->load->view('guidepage', $page_data);
    } 
```

然后我在我的视图（或控制器有时）中运行一个 foreach() 循环。

看法：

```
foreach($guide as $row){
    echo $row['guide_content'];
    $activecat=$row['guide_slug'];
 } 
```

现在我最想做的是从我的模型返回一个数组，但即使使用：

```
return $query->row(); 
```

返回一个对象而不是数组。

1）如何将此行作为二维数组返回？例如，这样我就可以在控制器中将结果显示为guide['col_name'] 而不是guide()->col_name。

2）我如何将对象传递给我的视图，以便我可以从那里使用 $guide->col_name （我需要将它与 $page_data 数组一起传递）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T13:31:54.897

如果我没看错你的问题：你可以使用`row_array`而不是`result_array`

我认为： `return $query->result_array();`

返回一个

```
array(
   0 => array(
      'blah' => 'blah',
      'smile' => 'smile'
   )

); 
```

只返回一个关联的数组。

行数组将返回

```
array(
  'blah' => 'blah',
  'smile' => 'smile'    
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T13:35:41.237

Use row_array() in your model.. that will retrun associated array.

```
function get_guide_first(){
    $this->db
        ->select('*')
        ->from('guides_entries')
        ->order_by("guide_name", "asc")
        ->limit(1, 0)
        ->join('guides_content', 'guides_content.guide_id = guides_entries.guide_id'); 
    $query = $this->db->get();
    return $query->row_array();
} 
```

# java - 可以找到一个字符串数组值是否等于任何随机类型的字符串？

> ID：12640851
> 
> 赞同：1
> 
> 时间：2012-09-28T13:20:52.480
> 
> 标签：java, arrays, loops

假设我得到了这个数组：

> 字符串[][]数组 = 新字符串[5][5];
> 
> > 数组[2][2] = 绝望；
> 
> 能不能查到
> 
> 字符串 s = "绝望"; - 等于任何数组元素而不使用 for 循环，并且不必手动输入分配值“绝望”的数组的行列组合？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T13:23:16.840

`while`循环而不是 for 循环

```
int i = 0;
int j = 0;  
while (i < n)  
{  
   while (j < m)  
   {  
      if (array[i][j].equals("..."))
      {  
         /// 
      }  
      j++;
   }   
   i++;    
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T13:28:19.787

使用增强的for循环：-

```
String [][] array = new String[2][2];
array[1][1] = "desperate";
array[0][1] = "despee";
array[1][0] = "despete";
array[0][0] = "dete";

for (String[] innerArr: array) {
    for (String value: innerArr) {
         if (value.equals("desperate")) {
             System.out.println(value + " == desperate");
         }
    }
} 
```

输出：-**绝望==绝望**

我建议的一个**更好**`ArrayList<String>`的方法是用来存储你的项目。然后你可以调用`contains()`方法来检查列表是否包含该元素。

```
List<String> listString = new ArrayList<String>(); 
listString.add("desperate");
listString.add("despe");

if (listString.contains("desperate")) {
     System.out.println("True");
} 
```

输出： -**真**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T13:38:14.347

假设您不能（出于任何原因）将数组更改为另一种集合类型：

```
String[][]array = new String[5][5];
array[2][2] = "desperate"; 

public boolean contains(String str){
  return new HashSet<String>((List<String>)Arrays.asList(array)).contains(str);
} 
```

比将其转换为 a 更好，`List`因为 HashSet 的`contains()`方法是**O(1)**，而 from`List`是 O(n)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T13:29:09.297

避免使用循环的唯一方法（不清楚为什么要这样做）是使用预先构建的包含所有字符串和索引的 Map。

# c# - 设计指南 - 如何将 MainViewModel 中的属性推送或引用到 ControlsViewModel

> ID：12640852
> 
> 赞同：0
> 
> 时间：2012-09-28T13:20:56.803
> 
> 标签：c#, wpf, mvvm, viewmodel

所以我有一个主要的 MainViewModel 收集和分发大量实时数据（每 0.1 秒更改一次）。目前我所有的控件都在引用我的 MainViewModel。

我正在使用 UserControl 控件来复制许多相同类型的数字仪表的对象。

我的问题是，是否有将 MainViewModel 中的数据“推送”或“引用”到 ControlViewModel 的最佳做法？我想到的目的是将我需要的 DependencyProperties 干净地隐藏在 ControlViewModel 中，并使 MainViewModel 尽可能干净整洁。

MVVMLight 消息传递是一种选择吗？活动合适吗？我可以设置从 ControlViewModel 到 MainViewModel 的绑定，以便在更新 MainViewModel 数据时，它会反映在 ControlViewModel 中吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T14:36:24.780

如果我正确理解了这个问题，我认为您可能只想创建一个`ControlViewModel`在您的 s 中公开一组 s的属性`MainViewModel`：

```
public class MainViewModel : INotifyPropertyChanged
{
    public IEnumerable<ControlViewModel> Controls { get; private set; }
} 
```

您可以在构造函数中使用所有必要的`ControlViewModel`对象来设置它。如果您可能添加或删除仪表，请更改`IEnumerable`为`ObservableCollection`.

然后对于您的仪表，您将使用 an`ItemsControl`和 set `ItemsSource="{Binding Controls}"`。这将自动使`DataContext`每个项目的`ControlViewModel`s 之一。

要使用仪表控件渲染项目，请`ItemTemplate`设置`ItemsControl`：

```
<ItemsControl.ItemTemplate>
    <DataTemplate DataType="{x:Type YourNamespace:ControlViewModel}">
        <YourNamespace:DigitalGauge />
    </DataTemplate>
</ItemsControl.ItemTemplate> 
```

# c# - 在 WinRT Metro 中将控件渲染为图像

> ID：12640855
> 
> 赞同：2
> 
> 时间：2012-09-28T13:21:09.993
> 
> 标签：c#, windows-8, microsoft-metro, rendering, windows-runtime

我正在为 Windows 8 Metro 创建一个应用程序，我需要将框架控件呈现为图像并将其保存到硬盘但不知道如何。我可以为此使用 SharpDX 吗？我能怎么做？在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-12-20T18:36:08.067

如果您不介意向 SharpDX 程序集添加依赖项，justin.m.chase 的方法肯定有效。RenderTargetBitmap 类可能非常适合您要完成的工作。

```
// Render XAML to bitmap
var bitmap = new  RenderTargetBitmap();
await bitmap.RenderAsync(elementToRender);

// get the pixels
IBuffer pixelBuffer = await bitmap.GetPixelsAsync();
byte[] pixels = pixelBuffer.ToArray();

// write the pixels to a InMemoryRandomAccessStream
var stream = new  InMemoryRandomAccessStream();
var encoder = await BitmapEncoder.CreateAsync(BitmapEncoder.BmpEncoderId, stream);
encoder.SetPixelData(BitmapPixelFormat.Bgra8, BitmapAlphaMode.Straight, (uint)bitmap.PixelWidth, (uint)bitmap.PixelHeight, 96, 96, pixels);

await encoder.FlushAsync();
stream.Seek(0); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T14:55:16.673

我很抱歉这是不可能的。WritableBitmap 类的 Render() 方法当前不足以完成您想要的。出于同样的原因，此时无法创建屏幕截图。但这些都是积压的事情！但是，现在你知道了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T15:15:15.930

如果您遵循[此](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/63dd9596-bf94-440b-847a-961cbf036e7b)线程，将解释 Metro 的局限性及其不起作用的原因。它的本质是：

> 抱歉，将 Xaml 渲染到元素或捕获您自己的应用程序的屏幕截图并未将其纳入发布版本。一个应用程序无法捕获另一个应用程序的屏幕截图是设计使然。

提到的解决方法是：

> 我的意思是——您可以使用 Direct2D 绘制形状、文本和图像。使用 XAML UI 绘制的相同形状。我并不是要暗示您可以呈现 XAML 控件 - 只是您可以使用 Direct2D 作为替代方案来获得相同的结果，尽管需要付出更多的努力。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-07-12T06:04:28.630

因为我认为这是一个更正确的答案，所以我想重申[Zeeshan](https://stackoverflow.com/users/483248/zeeshan)在原始问题中所做的评论。

> winrt xaml 工具包中有一个扩展方法。 [http://winrtxamltoolkit.codeplex.com/.../WriteableBitmapRenderExtensions.cs](http://winrtxamltoolkit.codeplex.com/SourceControl/changeset/view/512f5e79e2b6#WinRTXamlToolkit.Composition/WriteableBitmapRenderExtensions.cs)

通过 nuget 安装：

```
> Install-Package WinRTXamlToolkit.Composition 
```

添加使用：

```
using WinRTXamlToolkit.Composition; 
```

渲染您的 xaml：

```
var bitmap = await element.Render(); 
```

# delphi - Delphi DCrypt - 如何隔离 SHA256？

> ID：12640858
> 
> 赞同：1
> 
> 时间：2012-09-28T13:21:20.617
> 
> 标签：delphi, hash, components, vcl, sha

我在 Delphi XE2 中编写自己的组件，但我主要使用 C++ Builder。这就是为什么我需要一些关于 Delphi DCrypt 库的帮助。

我的新组件需要有一个方法（函数）来计算字符串的 sha256 哈希值。我知道 DCrypt 库并使用了一段时间，但这次我需要隔离 SHA256 哈希算法并将其添加到我的新组件中。

DCrypt 已将 SHA256 存储在 DCPsha256.pas 中，但由于我对 Delphi 不太熟练，我不知道该怎么做。我不需要安装 TDCP_sha256，我只需要能够在我的新组件中计算 SHA256。

想法？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T13:49:42.350

1.  一：不做。最好将 DCrypt 库与您的组件一起分发，并允许用户将其更新到更新的版本。如果 sha256 会出现问题，或者与较新的 Delphi 版本不兼容 - 你会怎么做？如果你使用 DCrypt，那么你只需下载它的新版本。如果您将其隔离 - 那么您必须自己修复它。您在 Delphi 和加密数学方面是否有足够的技能，以便在将来始终对 sha256 代码和新的 Delphi 版本进行所有修复？

2.  但是，如果您坚持-然后并排启动到Delphi。在一个打开的 DCrypt 源中，在另一个打开的新空单元中。将 sha256 生成程序从 DCrypt 复制到空单元并尝试编译。Delphi 会告诉你未知的标识符。查看 Dcrypt Delphi 并找到它们的声明。如果它们也来自 DCpypt - 然后将它们再次复制到新单元中。如果它们来自 RTL/VCL - 将单元添加到新单元的使用中。并尝试再次编译。重复此操作，直到所有标识符都由USES解析或从DCrypt复制到您的文件中。在它编译之后 - 获取一些文件并通过 DCrypt 和你的新库计算哈希 - 如果它们不同，那意味着你已经破坏了一些东西并且必须找到并修复它（你有足够的加密数学经验，不是吗）。

我为 Spring4D sha 代码进行了 Win64 asm 优化，所有代码都被单元测试覆盖，所以无论我的优化是否破坏了东西，我总是新的。如果没有这些全面的测试政策，我将无法做到。

我强烈建议你坚持使用 DCrypt 或 Lockbox3 或 Spring4D 或任何其他强大的生活库，不要孤立自己。与社区保持联系，您可以为自己使用他们的劳动力。隔离 - 每次出现新错误或不兼容时，您都必须重新执行此操作。

您无法从库中提取代码 - 为什么您认为您可以将该代码升级到 XE4/5/6... 并证明它没有损坏？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-28T18:16:03.450

手动创建对象。使用现有单位，不要修改 DCPCrypt。

如何创建对象：

```
var
  x:TDCP_sha256;

begin
  x := TDCP_sha256.Create(nil);
  try 
     // do stuff, create hash, whatever.
  finally
    x.Free;
  end;
end; 
```

You do not need to install any packages in order to provide access to the classes that you want to use, unless you wanted to drop them onto a form or data module. If you write code like the above code, you don't need to modify anything.

# c# - 使用 PInvoke 捕获远程机器的光盘信息

> ID：12640859
> 
> 赞同：1
> 
> 时间：2012-09-28T13:21:25.810
> 
> 标签：c#, powershell, wmi, pinvoke

我正在使用 C# 在远程机器上调用 GetVolumeInformation。我可以轻松访问远程硬盘，因为默认共享设置为 c$ 或其他。但是，CD/DVD 没有默认设置。如何使用 PInvoke 调用或其他方式读取远程 CD/DVD 驱动器？

如果我不能使用 C# 来完成，我总是可以使用 PowerShell 或 WMI。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T14:04:46.523

WMI允许您毫无问题地获取远程机器的系统信息，您只需要[在机器中设置远程WMI访问权限](http://msdn.microsoft.com/en-us/library/windows/desktop/aa389290%28v=vs.85%29.aspx)并使用有效的用户名和密码。在这种情况下，您可以使用[Win32_LogicalDisk](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394173%28v=vs.85%29.aspx)和[Win32_CDROMDrive](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394081%28v=vs.85%29.aspx) 类来检索您需要的信息。

试试这个 C# 示例。

```
using System;
using System.Collections.Generic;
using System.Management;
using System.Text;

namespace GetWMI_Info
{
    class Program
    {

        static void Main(string[] args)
        {
            try
            {
                string ComputerName = "localhost";//set the remote machine name here
                ManagementScope Scope;                

                if (!ComputerName.Equals("localhost", StringComparison.OrdinalIgnoreCase)) 
                {
                    ConnectionOptions Conn = new ConnectionOptions();
                    Conn.Username  = "";//user
                    Conn.Password  = "";//password
                    Conn.Authority = "ntlmdomain:DOMAIN";
                    Scope = new ManagementScope(String.Format("\\\\{0}\\root\\CIMV2", ComputerName), Conn);
                }
                else
                    Scope = new ManagementScope(String.Format("\\\\{0}\\root\\CIMV2", ComputerName), null);

                Scope.Connect();
                ObjectQuery Query = new ObjectQuery("SELECT * FROM Win32_CDROMDrive");
                ManagementObjectSearcher Searcher = new ManagementObjectSearcher(Scope, Query);

                foreach (ManagementObject WmiObject in Searcher.Get())
                {
                    Console.WriteLine("{0,-35} {1,-40}","DeviceID",WmiObject["DeviceID"]);// String
                    Console.WriteLine("{0,-35} {1,-40}","Drive",WmiObject["Drive"]);// String

                }
            }
            catch (Exception e)
            {
                Console.WriteLine(String.Format("Exception {0} Trace {1}",e.Message,e.StackTrace));
            }
            Console.WriteLine("Press Enter to exit");
            Console.Read();
        }
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T13:36:48.877

使用 Powershell 和 WMI。

试试这个：

```
 Get-WmiObject -computername MyremotePC Win32_CDROMDrive | Format-List * 
```

您需要远程计算机上的管理凭据。

您可以在 powershell 中 P/invoke`GetVolumeInfomation`使用 Add-Type 将其添加为类型（[这里](http://www.leeholmes.com/blog/2009/01/19/powershell-pinvoke-walkthrough/)有一些示例）。

如果您尝试读取未共享的远程 CD/DVD 磁盘上的数据，我不知道有什么办法。

# java - 使用 java 解析 HTML 中的数字

> ID：12640865
> 
> 赞同：0
> 
> 时间：2012-09-28T13:21:50.190
> 
> 标签：java, html, string, parsing, jsoup

我一直在尝试从 html 字符串中获取一个数字，但我无法想出正确的方法，我已经在寻找 Jsoup 的说明，但我并不真正了解它是如何工作的。

这是我必须解析的字符串之一：

```
<span class="b"><a href="/paline/linea/014?id_palina=76954&amp;nav=5#pal">014</a>:</span> 
```

我想要得到的输出是 014，即链接的名称。我需要获取字符串变量中的数字，而不是整数。

或这个

```
<span class="b"><a href="/paline/percorso/50268?id_palina=76954&amp;nav=5#pal">08</a>:</span> 
```

对于08。

我发现的主要问题是字符串中有两件事发生了变化，/paline/percorso/ 之后的数字和链接名称的数字。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T14:00:14.920

如果你所有的样本都是这样的，你可以用简单的字符串函数来做到这一点：

```
final String input = "<span class=\"b\"><a href=\"/paline/linea/014?id_palina=76954&amp;nav=5#pal\">014</a>:</span>";

final int i2 = input.lastIndexOf( "</a>" );
final int i1 = input.lastIndexOf( '>', i2 ) + 1;

final String result = input.substring( i1, i2 );

System.out.println( result ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T13:29:42.383

您可以尝试以下方法：

```
Elements resultLinks = doc.select("span.b > a");
for (Element e:resultLinks)
    String yourText=e.text(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T14:10:00.230

我可能会尝试一个简单的正则表达式。虽然取决于您的字符串，但它可能比简单的快速和肮脏的正则表达式更复杂。

```
String html = "<span class="b"><a href="/paline/linea/014?id_palina=76954&amp;nav=5#pal">014</a>:</span>"
html.replaceAll( ".*<a.*>([0-9]*)</a.*", "$1" ); 
```

# excel - 在 Excel 中，如果相邻列具有特定值，如何计算列中的空白单元格？

> ID：12640869
> 
> 赞同：1
> 
> 时间：2012-09-28T13:21:55.673
> 
> 标签：excel, excel-2007

我正在研究一个人数预测电子表格。左列有组，然后是已征用的职位。此列右侧的列是每个月的。当职位获得批准时，他们将获得一个 ID 号，然后当它被填写时，ID 将被替换为一个名称。我希望能够在工作表底部为每个职位和每个组创建总计。我正在尝试 SumProduct 但它不起作用。

例子：

```
 Groups (ColumnA)                  September(ColumnC)
    Admin - Admin                     228-1
    Admin - Admin                     Sam Jones
    Admin - Admin                     
    Admin - Met Data Analyst          John Smith
    Sales - Business Dev              
    Sales - Coordinator 
    MinPro - Technician               229-1
    MinPro - Technician               
    MinPro - Technician 
```

我尝试使用的公式是： =SUMPRODUCT(--(A5:A6=A120),--(C5:C6<>""))

A120 = 管理员 - 管理员在我的总计部分所在的底部附近。我希望这会告诉我 9 月份批准了 2 个职位，但它只返回 0。同样，它应该显示我们在 MinPro 中要求 3 名技术人员，因此 1 名已获得批准。

然后我会做一个类似的计数来计算那些已经申请但尚未批准的。

我也试图用 CountIfs 来做这件事，但它正在做我希望的事情。希望这是有道理的。任何帮助将不胜感激。我确定我以前做过，但我正在画空白。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T13:44:10.760

如果你追求的结果有点像这样......

![在此处输入图像描述](../Images/7ae3b31ffbcaef6639f23a4db4a7dd5d.png)

那么你需要的功能是......

**顶级表**

C 列 IsBlank 函数：=IF(ISBLANK(B2),1,0)

D 列不是空白函数：=IF(ISBLANK(B2),0,1)

**摘要（底部表格）**

来自 A 列原始数据的 a 列中事物的唯一列表

B 列函数：=SUMIF($A$2:$A$10,$A15,$C$2:$C$10)

C列函数：=SUMIF($A$2:$A$10,$A15,$D$2:$D$10)

这些可以组合成更少的函数，但本质上你想要一个带有函数来确定空白的原始数据表和一个汇总表，sumif 是这些函数的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-10T23:36:02.430

使用数据透视表（和额外的列）非常简单：

![SO12640869 示例](../Images/dd7b1d813c640b01a49812914025b098.png)

`Groups (ColumnA)`用于 ROWS，再次`September(ColumnC)`用于 VALUES（计数）。

# iphone - IOS 6强制设备方向为横向

> ID：12640870
> 
> 赞同：57
> 
> 时间：2012-09-28T13:22:00.647
> 
> 标签：iphone, objective-c, orientation, ios6

我给了一个带有 10 个视图控制器的应用程序。我使用导航控制器来加载/卸载它们。

除了一个以外，其他所有人都处于纵向模式。假设第 7 个 VC 在横向。我需要它在加载时以横向呈现。

**请建议一种在 IOS 6 中强制方向从纵向变为横向的方法**（并且在 IOS 5 中也能很好地工作）。

这是我在IOS 6**之前的做法：**

```
- (void)viewWillAppear:(BOOL)animated {
    [super viewWillAppear:animated];
    UIViewController *c = [[[UIViewController alloc]init] autorelease];
    [self presentModalViewController:c animated:NO];
    [self dismissModalViewControllerAnimated:NO];
}
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
} 
```

呈现和关闭模态 VC 会迫使应用程序重新审视其方向，因此`shouldAutorotateToInterfaceOrientation`被调用。

**我在 IOS 6 中尝试过的内容：**

```
- (BOOL)shouldAutorotate{
    return YES;
}
-(NSUInteger)supportedInterfaceOrientations{
    return UIInterfaceOrientationMaskLandscape;
}
- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation{
    return UIInterfaceOrientationLandscapeLeft;
} 
```

加载时，控制器保持纵向。旋转设备后，方向改变就好了。但我需要让控制器在加载时自动旋转为横向，因此用户必须旋转设备才能正确查看数据。

另一个问题：将设备旋转回纵向后，方向变为纵向，尽管我`supportedInterfaceOrientations`仅在`UIInterfaceOrientationMaskLandscape`. 为什么会发生？

此外，**以上**3 种方法都没有被调用。

**一些（有用的）数据：**

1.  在我的 plist 文件中，我指定了 3 个方向 - 几乎都是颠倒的。
2.  该项目是在 Xcode 4.3 IOS 5 开始的。包括 xibs 在内的所有类都是在 Xcode 4.5 IOS 6 之前创建的，现在我使用最后一个版本。
3.  在 plist 文件中，状态栏设置为可见。
4.  在 xib 文件（我想要横向的文件）中，状态栏为“无”，方向设置为横向。

任何帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-10-04T11:00:30.227

好的，伙计们，我将发布我的解决方案。

是）我有的：

1.  基于视图的应用程序，具有多个视图控制器。（它是基于导航的，但由于方向问题，我不得不使其基于视图）。
2.  所有视图控制器都是纵向的，除了一个 - LandscapeLeft。

任务：

1.  无论用户如何握住设备，我的视图控制器之一都必须自动旋转到横向。所有其他控制器必须是纵向的，并且在离开横向控制器后，应用程序必须强制旋转到纵向，无论用户如何握住设备。
2.  这必须像在 IOS 6.x 上一样在 IOS 5.x 上工作

去！

（**更新**删除了@Ivan Vučica 建议的宏）

**在您的所有 PORTRAIT 视图控制器中，都会覆盖这样的自动旋转方法：**

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation{
    return (toInterfaceOrientation == UIInterfaceOrientationPortrait);
}
-(BOOL)shouldAutorotate {
    return YES;
}
- (NSUInteger)supportedInterfaceOrientations {
    return UIInterfaceOrientationMaskPortrait;
} 
```

您可以看到 2 种方法：一种用于 IOS 5，另一种用于 IOS 6。

**您的 LANDSCAPE 视图控制器也是如此，但有一些添加和更改：**

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation{
    [image_signature setImage:[self resizeImage:image_signature.image]];
    return (toInterfaceOrientation == UIInterfaceOrientationLandscapeLeft);
}
-(BOOL)shouldAutorotate {
    return YES;
}
- (NSUInteger)supportedInterfaceOrientations {
    [image_signature setImage:[self resizeImage:image_signature.image]];
    return UIInterfaceOrientationMaskLandscapeLeft;
} 
```

**注意：要在****IOS 5**中强制自动旋转，您应该添加以下内容：

```
- (void)viewDidLoad{
    [super viewDidLoad];
    if ([[[UIDevice currentDevice] systemVersion] floatValue] < 6.0)
        [[UIApplication sharedApplication] setStatusBarOrientation:UIDeviceOrientationLandscapeLeft animated:NO];    
} 
```

类似地，在您离开 LANDSCAPE 控制器后，无论您加载什么控制器，您都应该再次强制 IOS 5 自动旋转，但现在您将使用`UIDeviceOrientationPortrait`，当您转到 PORTRAIT 控制器时：

```
- (void)viewDidLoad{
        [super viewDidLoad];
        if ([[[UIDevice currentDevice] systemVersion] floatValue] < 6.0)
            [[UIApplication sharedApplication] setStatusBarOrientation:UIDeviceOrientationPortrait animated:NO];    
    } 
```

**现在是最后一件事（这有点奇怪） - 您必须根据 IOS 更改从控制器切换到另一个控制器的方式：**

制作一个 NSObject 类“Schalter”（德语中的“Switch”）。

在 Schalter.h 中说：

```
#import <Foundation/Foundation.h>

@interface Schalter : NSObject
+ (void)loadController:(UIViewController*)VControllerToLoad andRelease:(UIViewController*)VControllerToRelease;
@end 
```

在 Schalter.m 中说：

```
#import "Schalter.h"
#import "AppDelegate.h"

@implementation Schalter
+ (void)loadController:(UIViewController*)VControllerToLoad andRelease:(UIViewController*)VControllerToRelease{

    //adjust the frame of the new controller
    CGRect statusBarFrame = [[UIApplication sharedApplication] statusBarFrame];
    CGRect windowFrame = [[UIScreen mainScreen] bounds];
    CGRect firstViewFrame = CGRectMake(statusBarFrame.origin.x, statusBarFrame.size.height, windowFrame.size.width, windowFrame.size.height - statusBarFrame.size.height);
    VControllerToLoad.view.frame = firstViewFrame;

    //check version and go
    if (IOS_OLDER_THAN_6)
        [((AppDelegate*)[UIApplication sharedApplication].delegate).window addSubview:VControllerToLoad.view];
    else
        [((AppDelegate*)[UIApplication sharedApplication].delegate).window setRootViewController:VControllerToLoad];

    //kill the previous view controller
    [VControllerToRelease.view removeFromSuperview];
}
@end 
```

**现在，这就是您使用 Schalter 的方式（假设您从 Warehouse 控制器转到 Products 控制器）：**

```
#import "Warehouse.h"
#import "Products.h"

@implementation Warehouse
Products *instance_to_products;

- (void)goToProducts{
    instance_to_products = [[Products alloc] init];
    [Schalter loadController:instance_to_products andRelease:self];
}

bla-bla-bla your methods

@end 
```

当然你必须释放`instance_to_products`对象：

```
- (void)dealloc{
     [instance_to_products release];
     [super dealloc];
} 
```

**嗯，就是这样。不要犹豫投反对票，我不在乎。这是给那些正在寻找解决方案的人，而不是为了声誉。干杯! 萨瓦马扎雷。**

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2012-10-01T15:14:22.533

这应该可以工作，它类似于 iOS 6 之前的版本，但带有`UINavigationController`：

```
UIViewController *portraitViewController = [[UIViewController alloc] init];
UINavigationController* nc = [[UINavigationController alloc] initWithRootViewController:portraitViewController];
[self.navigationController presentModalViewController:nc animated:NO];
[self.navigationController dismissModalViewControllerAnimated:NO]; 
```

在我推动下一个之前，我会打电话给这个`UIViewController`。`UIViewController`即使当前处于横向模式，它也会强制下一个推送以纵向模式显示`UIViewController`（也应该适用于纵向到横向）。适用于我的 iOS 4+5+6。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-11-13T11:39:47.833

我认为最好的解决方案是坚持苹果官方文档。因此，据此，我使用以下方法，并且在 iOS 5 和 6 上一切正常。在我的 VC 中，我覆盖了以下方法：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    // Return YES for supported orientations
    return UIInterfaceOrientationIsPortrait(interfaceOrientation);
} 
```

iOS 6 的方法，第一个方法返回支持的方向掩码（如其名称所示）

```
-(NSUInteger)supportedInterfaceOrientations{

    return UIInterfaceOrientationMaskPortrait;
} 
```

第二个就是告诉您的 VC，当 VC 将要显示时，哪个是首选界面方向。

```
- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation
{
    return UIInterfaceOrientationPortrait;
} 
```

只需将 Portrait 更改为您想要的方向 ;) 这个解决方案运行顺利，我不喜欢创建宏和其他东西的想法，围绕这个简单的解决方案。希望这有助于...

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-10-14T23:47:26.560

我遇到了同样的问题，我的应用程序中有 27 个视图，其中 26 个是纵向视图，而所有方向只有一个（图像查看器 :)）。在每个类上添加宏并替换导航并不是我喜欢的解决方案......

所以，我想在我的应用程序中保留 UINavigationController 机制，而不是用其他代码替换它。

该怎么办：

@1 在方法 didFinishLaunchingWithOptions 中的应用程序委托中

```
if ([[UIDevice currentDevice].systemVersion floatValue] < 6.0)
{
    // how the view was configured before IOS6
    [self.window addSubview: navigationController.view];
    [self.window makeKeyAndVisible];
}
else
{
    // this is the code that will start the interface to rotate once again
    [self.window setRootViewController: self.navigationController];
} 
```

@2 因为navigationController 只会以YES 响应自动旋转，所以我们需要添加一些限制：扩展UINavigationController -> YourNavigationController 并将其链接到Interface Builder。

@3 覆盖导航控制器中的“讨厌的新方法”。

由于此类仅针对此应用程序是自定义的，因此它可以对其控制器负责并在其位置做出响应。

```
-(BOOL)shouldAutorotate {

    if ([self.viewControllers firstObject] == YourObject)
    {
         return YES;
    }
    return NO;
}
- (NSUInteger)supportedInterfaceOrientations {
     if ([self.viewControllers firstObject] == YourObject)
    {
         return UIINterfaceOrientationMaskLandscape;
    }
    return UIInterfaceOrientationMaskPortrait;
} 
```

我希望这能帮到您，

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-09-28T13:55:08.750

从[iOS 6 发行说明](http://developer.apple.com/library/ios/#releasenotes/General/RN-iOSSDK-6_0/_index.html#//apple_ref/doc/uid/TP40012166-CH1-SW13)：

> 现在，iOS 容器（例如 UINavigationController）不会咨询它们的子容器来确定它们是否应该自动旋转。

您是否将消息向下`rootViewController`传递给您的 VC？`shouldAutoRotate``ViewController`

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-02-20T02:08:05.430

我使用与 OP pre-ios6 相同的方法（呈现和关闭模态 VC）以横向模式显示单个视图控制器（所有其他视图控制器以纵向模式）。它在 ios6 中中断，横向 VC 以纵向显示。

为了解决这个问题，我刚刚在景观 VC 中添加了 preferredInterfaceOrientationForPresentation 方法。现在似乎适用于 os 5 和 os 6。

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
return (interfaceOrientation == UIInterfaceOrientationLandscapeLeft);
}

- (BOOL)shouldAutorotate
{
return NO;
}

- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation
{    
return UIInterfaceOrientationLandscapeLeft;
} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-03-07T22:48:04.450

嘿伙计们，在尝试了很多不同的可能解决方案但没有成功后，我提出了以下解决方案，希望对您有所帮助！

我准备了一个食谱:)。

**问题：** 您需要在 ios 6 中使用导航控制器更改视图控制器的方向。

**解决方案：**

![建议导航](../Images/0f3413f4b9b4efcccb32d21f2ed9f754.png)

*步骤 1.*一个初始 UIviewcontroler 触发模式 segues 到横向和纵向 UInavigationControllers 如图所示....

在 UIViewController1 中更深入，我们需要根据 Appdelegate 处的全局变量进行 2 次 segues 操作....

```
-(void)viewDidAppear:(BOOL)animated{
    if([globalDelegate changeOrientation]==0){
        [self performSegueWithIdentifier:@"p" sender:self];
    }
    else{
        [self performSegueWithIdentifier:@"l" sender:self];
    }

} 
```

我们还需要回到肖像&| 景观....

```
- (IBAction)dimis:(id)sender {
    [globalDelegate setChangeOrientation:0];
    [self dismissViewControllerAnimated:NO completion:nil];
} 
```

*步骤 2.*每个 NavigationController 上的第一个 Pushed UiViewControllers 与...

```
-(NSUInteger)supportedInterfaceOrientations{
    return [self.navigationController supportedInterfaceOrientations];
}

-(BOOL)shouldAutorotate{
    return YES;
} 
```

*步骤 3.*我们在 UInavigationController 的子类中覆盖 supportedInterfaceOrientations 方法......

在您的 customNavigationController 我们有.....

```
-(NSUInteger)supportedInterfaceOrientations{
    if([self.visibleViewController isKindOfClass:[ViewController2 class]]){

        return UIInterfaceOrientationMaskPortrait;
    }
    else{
        return UIInterfaceOrientationMaskLandscape;

    }

} 
```

*步骤 4.*在情节提要或通过代码，将 WantsFullScreenLayout 标志设置为 yes，同时设置为纵向和横向 uinavigationcontrollers。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-09-28T14:03:29.050

尝试转到`UINavigationController`使用类别或子类以指定所需方向的 a，然后转到所需的 VC。[在这里](https://stackoverflow.com/questions/12600867/set-different-supportedinterfaceorientations-for-different-uiviewcontrollers/12602243#12602243)阅读更多。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-11-12T02:20:19.237

作为替代方案，您可以使用块执行相同的操作：

```
UIViewController *viewController    = [[UIViewController alloc] init];
viewController.modalTransitionStyle = UIModalTransitionStyleCoverVertical;
[self presentViewController:viewController animated:NO completion:^{
    [self dismissViewControllerAnimated:NO completion:nil];
}]; 
```

另外，在推送新视图之前调用它。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-08-02T21:59:14.277

转到您的 Info.plist 文件并进行更改![在此处输入图像描述](../Images/bc424c647c8e848086297a403375452f.png)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-09-17T11:27:39.167

我有同样的问题。如果您想强制特定视图控制器以横向显示，请在将其推送到导航堆栈之前立即执行此操作。

```
UIInterfaceOrientation currentOrientation = [[UIApplication sharedApplication] statusBarOrientation];
        if (currentOrientation == UIInterfaceOrientationPortrait ||
            currentOrientation == UIInterfaceOrientationPortraitUpsideDown)
            [[UIDevice currentDevice] setOrientation:UIInterfaceOrientationLandscapeLeft];

        UIViewController *vc = [[UIViewController alloc] init];
        [self.navigationController pushViewController:vc animated:YES];
        [vc release]; 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2014-02-14T23:08:11.697

我通过继承 UINavigationController 并覆盖导航控制器的 supportedInterfaceOrientations 来解决它，如下所示：

```
- (NSUInteger)supportedInterfaceOrientations
{
     return [[self topViewController] supportedInterfaceOrientations];
} 
```

所有控制器都实现了带有所需方向的supportedInterfaceOrientations。

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2013-07-11T17:01:20.173

我使用了以下解决方案。在一个方向与其他视图控制器不同的视图控制器中，我在**prepareForSegue**方法中添加了方向检查。如果目标视图控制器需要与当前显示的界面方向不同的界面方向，则会发送一条消息，强制界面在序列期间旋转。

```
#import <objc/message.h> 
```

...

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if(UIDeviceOrientationIsLandscape(self.interfaceOrientation))
    {
        UIInterfaceOrientation destinationOrientation;

        if ([[segue destinationViewController] isKindOfClass:[UINavigationController class]])
        {
            UINavigationController *navController = (UINavigationController *)[segue destinationViewController];
            destinationOrientation = [navController.topViewController preferredInterfaceOrientationForPresentation];
        } else
        {
            destinationOrientation = [[segue destinationViewController] preferredInterfaceOrientationForPresentation];
        }

        if ( destinationOrientation == UIInterfaceOrientationPortrait )
        {
            if ([[UIDevice currentDevice] respondsToSelector:@selector(setOrientation:)])
            {
                objc_msgSend([UIDevice currentDevice], @selector(setOrientation:), UIInterfaceOrientationPortrait );
            }
        }
    }
} 
```

# c# - 强制 Visual Studio 重建依赖项目

> ID：12640878
> 
> 赞同：8
> 
> 时间：2012-09-28T13:22:32.230
> 
> 标签：c#, c++, visual-studio, visual-studio-2012, projects-and-solutions

当项目更改时，如何强制 Visual Studio 2012 重建所有依赖项目？

我有两个项目：一个 C++ DLL 和一个 C# WPF 应用程序。C# 项目有一个构建后命令，用于将 DLL 复制到 Debug 文件夹中。

当我修改 C++ 项目时，DLL 会重新构建，但 C# 项目不会，因此 DLL 不会在 Debug 文件夹中更新。然后我需要清理并重建解决方案，然后才能看到更新的结果。

我想告诉 VS，每当我更新 C++ 项目时，它都应该重新构建 C# 项目（或者至少运行构建后命令）。C# 项目依赖于 C++ 项目，但不通过引用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-29T13:18:11.987

为了详细说明彼得的答案，这就是我所做的。

在解决方案资源管理器中右键单击 C# 项目，然后选择添加 > 现有项。

浏览到 C++ 输出文件夹，选择 DLL 文件，而不是使用添加按钮打开它，而是单击它旁边的下拉按钮，然后选择添加为链接。

我最初做的下一步是右键单击添加到 C# 项目的链接，然后选择属性，然后将复制到输出目录更改为复制（如果更新）。但后来我意识到这将复制调试版本（因为那是链接指向的位置），而不是当前配置。所以我把它留在了不要复制，因为我的命令行会自动选择正确的配置。

所以现在 C# 项目有一个指向 C++ 项目输出的链接，只要 C++ 项目发生更改，它就会触发重新构建，即使该链接与项目的输出无关。

作为记录，这是我在 C# 项目中的构建后命令行（foobar 是 C++ DLL）。

```
copy "$(SolutionDir)\$(Configuration)\foobar.dll" "$(TargetDir)" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-28T13:29:34.730

如果在您的解决方案中设置项目依赖项没有帮助，只是尝试将 C++ 项目中的 .dll 作为链接包含到另一个项目中，那么它应该识别出文件已更改并应该重新构建项目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-30T06:51:07.127

将以下代码插入到每个依赖项目中：

```
<ItemGroup>
    <None Include="$(MSBuildProjectDirectory)\Properties\Build\_buildforcer">
        <Visible>true</Visible>
    </None>
</ItemGroup>
<Target Name="ForceNextBuild"
        AfterTargets="PrepareForRun"
        Condition=" '$(BuildingInsideVisualStudio)' == 'true' ">

    <Touch Files="$(MSBuildProjectDirectory)\Properties\Build\_buildforcer"
           AlwaysCreate="true"/>
</Target> 
```

如果需要，您可以通过 an 来执行此操作`Import`。这迫使项目始终构建，而不仅仅是当它依赖的项目发生变化时。

但是，嘿，那些依赖项目通常是应用程序项目，它们通常是业务库之上的瘦包装器。此外，编译不会以这种方式强制执行。它只是`MSBuild`执行所有目标，只是为了发现一切都是最新的。因此，您的`F5`性能不会大幅下降。

我已将该`None`项目明确标记为`Visible`，因为该项目必须是可见的，此机制才能工作。在相关说明中，您可能必须在进行上述更改后重新加载您的解决方案。

# c# - 如何在三个 IEnumerables 上使用 Zip

> ID：12640881
> 
> 赞同：7
> 
> 时间：2012-09-28T13:22:41.873
> 
> 标签：c#, linq

> **可能重复：**
> [使用 Linq 从 3 个集合创建项目](https://stackoverflow.com/questions/5284315/create-items-from-3-collections-using-linq)

我已经执行了两个序列的压缩，如下所示。

```
IEnumerable<Wazoo> zipped = arr1.Zip(arr2, (outer, inner) =>
  new Wazoo{P1 = outer, P2 = inner}); 
```

现在，我刚刚意识到我将使用三个序列，而不是两个。所以我试图将代码重新设计成这样：

```
IEnumerable<Wazoo> zipped = arr1.Zip(arr2, arr3, (e1, e2, e3) =>
  new Wazoo{P1 = e1, P2 = e2, P3 = e3}); 
```

当然，它没有用。有没有办法部署`Zip`来整合我的目标？这种用法还有其他方法吗？我是否必须压缩其中两个序列，然后在第三个序列中解压缩它们？

在这一点上，我将创建一个简单的`for`-loop 和`yield return`请求的结构。我是不是该？我在.Net 4上。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-28T13:53:49.427

您可以使用两个调用现有的`Zip`（这会有点混乱，但它会工作），或者您可以自己制作`Zip`需要 3 个序列。

```
public static IEnumerable<TResult> Zip<TFirst, TSecond, TThird, TResult>
    (this IEnumerable<TFirst> source, IEnumerable<TSecond> second
    , IEnumerable<TThird> third
    , Func<TFirst, TSecond, TThird, TResult> selector)
{
    using(IEnumerator<TFirst> iterator1 = source.GetEnumerator())
    using(IEnumerator<TSecond> iterator2 = second.GetEnumerator())
    using (IEnumerator<TThird> iterator3 = third.GetEnumerator())
    {
        while (iterator1.MoveNext() && iterator2.MoveNext()
            && iterator3.MoveNext())
        {
            yield return selector(iterator1.Current, iterator2.Current,
                iterator3.Current);
        }
    }
} 
```

# javascript - jQuery UI 和 Rails

> ID：12640882
> 
> 赞同：0
> 
> 时间：2012-09-28T13:22:43.433
> 
> 标签：javascript, ruby-on-rails-3, jquery-ui

我安装了 jquery (gem 'jquery-rails') gem。我的 application.js 文件是正确的。UI（日期选择器）不显示。我在我的输入字段中更新了 HTML 代码 (id="datepicker")，但是当我点击它时什么也没有。所以我从网站上下载了带有自定义主题的 jQueryUI，但仍然没有。使用下载的自定义主题安装 jQuery-UI for rails 有什么帮助吗？

应用程序.js：

```
//= require jquery
//= require jquery-ui-1.8.23.custom.min
//= require jquery_ujs
//= require twitter/bootstrap
//= require_tree . 
```

jQuery 自定义主题带有一个 css 文件夹和一个 jquery 1.80 文件（我不需要，因为我已经有了）和我放入 vendor/javascript 文件夹的 jquery-ui-1.8.23.custom.min 文件。我不想使用这个[https://github.com/joliss/jquery-ui-rails](https://github.com/joliss/jquery-ui-rails)因为它不支持自定义主题。告诉我在哪里复制粘贴文件，这样我就可以快速完成

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T13:43:32.587

仅下载插件，将其放入资产中并更改输入的 id 是不够的。你必须像这样编写一些javascript：

```
$("#datepicker").datepicker(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-06T00:00:53.070

在我预编译资产之前，我无法让 jQuery ui 正常工作......

```
RAILS_ENV=production bundle exec rake assets:precompile 
```

这为我修好了。（我认为删除公共/资产的内容也可以。）

# cakephp - FormHelper - 预先填充的选择下拉菜单 - CakePHP

> ID：12640885
> 
> 赞同：0
> 
> 时间：2012-09-28T13:22:57.670
> 
> 标签：cakephp, formhelper

如果我有：

```
// Controller
$this->Model->id = $id;
$this->request->data['Model'] = $this->Model->read(); 
```

进而：

```
// View (input field)
$this->Form->input('some_field'); // THE FORM FIELD WILL BE PRE-POPULATED 
```

但是，如果我希望它成为一个选择框：

```
// View (with select)
$this->Form->select('some_field', $options); // THE SELECT BOX ISN'T PRE-POPULATED 
```

那么问题：

一种。为什么选择框不像输入字段那样预先填充？

湾。我真的必须像这样手动预填充吗？

```
// View (with select)
$this->Form->select('some_field', $options, array('value' => $this->request->data['Model']['some_field'])); // THE SELECT BOX IS PRE-POPULATED 
```

C。上述方法是预填充已经有值的选择框的最有效方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T13:52:12.153

不，如果您正确执行， some_field 将由您传递的表单数据预先填充。你调试过你在那里生产的东西吗？一个不是蛋糕标准的多级数组。

正确的方法是：

```
$this->request->data = $this->Model->read(); 
```

因为该数组已经包含 Model 键（其中 debug() 会显示！）。但要小心，只有在没有发布的情况下才这样做！

对于您的最后一个问题，不，如果可能，请使用控制器或至少`default`. `value`如果验证失败，将使您的表单丢失先前选择的值。

我的旧 cake1.3 帖子也可能对此有所了解：http: [//www.dereuromark.de/2010/06/23/working-with-forms/](http://www.dereuromark.de/2010/06/23/working-with-forms/)

# objective-c - 当 performWithSegue 时委托为空

> ID：12640887
> 
> 赞同：1
> 
> 时间：2012-09-28T13:23:05.990
> 
> 标签：objective-c, cocoa-touch, ios5

我试图将一些信息从模态视图发送到委托人。但似乎我的代表没有贯彻执行，它变成了空值。在 IB [http://i.imgur.com/7oaxb.png](http://i.imgur.com/7oaxb.png)中看起来像这样。 **但是，如果我删除模态视图之前的 navigationController 并使用视图中的按钮，它会起作用。** 请帮忙，我尝试了 5 个小时... :/

下面是 modalViewController 代码：#import #import "Link.h"

```
@protocol modalViewDelegate <NSObject>

-(void)closeview;
-(void)saveLink:(Link *)link;

@end

@interface modelViewController : UIViewController
@property (weak, nonatomic) IBOutlet UITextField *titel;
@property (weak, nonatomic) IBOutlet UITextField *url;

@property (nonatomic, weak) id <modalViewDelegate> delegate;

- (IBAction)exitModal:(id)sender;
- (IBAction)saveLink:(id)sender;

@end 
```

和.m：

```
#import "modelViewController.h"

@interface modelViewController ()

@end

@implementation modelViewController
@synthesize titel;
@synthesize url, delegate;

- (IBAction)exitModal:(id)sender {
    //[self.delegate closeview];
    [self dismissModalViewControllerAnimated:YES];
}

- (IBAction)saveLink:(id)sender {
    if (titel.text.length > 0 && url.text.length > 0) {

        NSString *urlen = [NSString stringWithFormat:@"%@", url.text];

        Link *linken = [[Link alloc] initWithURL:[NSURL URLWithString:urlen]];
        linken.title = titel.text;

        NSLog(@"%@", delegate); **//returns null when pressing button** it returns null if i put it in viewDidLoad to..

        [self.delegate saveLink:linken];

        [self dismissModalViewControllerAnimated:YES];

    } else {
        UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:nil message:@"warning" delegate:self cancelButtonTitle:@"ok" otherButtonTitles:nil, nil];
        [alertView show];
    }
}
@end 
```

MasterViewController .h（推动模态视图：

```
#import <UIKit/UIKit.h>
#import "modelViewController.h"

@class DetailViewController;

@interface MasterViewController : UITableViewController <modalViewDelegate>
.... 
```

和.m

```
#import "MasterViewController.h"
#import "DetailViewController.h"

@implementation MasterViewController

@synthesize detailViewController = _detailViewController;
@synthesize links;

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {

    if ([segue.identifier isEqualToString:@"linkPush"]) {
        // Skicka länken till detaljvyn
        DetailViewController *detailVC = segue.destinationViewController;
        detailVC.link = [self.links objectAtIndex:self.tableView.indexPathForSelectedRow.row];
        NSLog(@"%@", detailVC);
    }

    //this is the modalview "pusher"
    if ([segue.identifier isEqualToString:@"newLink"]) {

        modelViewController *mvc = segue.destinationViewController;
        mvc.delegate = self;
        NSLog(@"%@", mvc.delegate);
    }

}

- (void)closeview {
    [self dismissModalViewControllerAnimated:YES];
    //[self.tabBarController dismissModalViewControllerAnimated:YES];
}

-(void)saveLink:(Link *)link{

    NSLog(@"hello");
    [links insertObject:link atIndex:links.count]; //updates a Tableview and works fine if delegate is called

    [self.tableView reloadData];
    //[self dismissModalViewControllerAnimated:YES];
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-28T13:50:56.257

如果您的目标视图控制器被包装到导航控制器中，则您必须在以下内容中以不同方式引用它`prepareForSegue`：

```
UINavigationController *nav = segue.destinationViewController;
DetailViewController *dvc = [nav.viewControllers objectAtIndex:0]; 
```

现在设置属性，包括委托，应该可以工作了。

# python - 通过网络解析 xml 文件时出错

> ID：12640899
> 
> 赞同：0
> 
> 时间：2012-09-28T13:23:59.937
> 
> 标签：python, python-2.5

谁能告诉我为什么我会收到这些错误？

```
Script Error  tempAlert.py: <urlopen error timed out>
Script Error  Exception Traceback (most recent call shown last):

 tempAlert.py, line 16, at top level
 File "/System/Library/Frameworks/Python.framework/Versions/2.5/lib/python2.5/urllib2.py", line 124, in urlopen
   return _opener.open(url, data)
 File "/System/Library/Frameworks/Python.framework/Versions/2.5/lib/python2.5/urllib2.py", line 381, in open
   response = self._open(req, data)
 File "/System/Library/Frameworks/Python.framework/Versions/2.5/lib/python2.5/urllib2.py", line 399, in _open
   '_open', req)
 File "/System/Library/Frameworks/Python.framework/Versions/2.5/lib/python2.5/urllib2.py", line 360, in _call_chain
   result = func(*args)
 File "/System/Library/Frameworks/Python.framework/Versions/2.5/lib/python2.5/urllib2.py", line 1118, in http_open
   return self.do_open(httplib.HTTPConnection, req)
 File "/System/Library/Frameworks/Python.framework/Versions/2.5/lib/python2.5/urllib2.py", line 1093, in do_open
   raise URLError(err)
URLError: <urlopen error timed out> 
```

这是脚本：

```
import xml.etree.cElementTree as ET
from xml.etree.cElementTree import parse 
import urllib2
import string
import re
import socket
import time

socket.setdefaulttimeout(40)

#set prevTemp to last temp
prevAlertTemp = indigo.variables[77213772]
indigo.variable.updateValue(794594968, prevAlertTemp.value)

url = "http://10.0.1.2/xmlfeed.rb"
tree = parse(urllib2.urlopen(url))

#get all the port elements
for port in tree.findall("ports/port"):

if port.get('name') == 'Port 1': 
  currentTemp = port.find("condition/currentReading")
  indigo.variable.updateValue("tAlertTemp_", currentTemp.text)

elif port.get('name') == 'Port 2': 

currentTemp = port.find("condition/currentReading")
indigo.variable.updateValue("tAlertTemp2_", currentTemp.text)

indigo.variable.updateValue(865541269, time.strftime( "%H:%M %a %d %b")) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T05:31:59.617

Your connection times out, so there is probably no service listening at `http://10.0.1.2/xmlfeed.rb`

# python - 如何以数独格式输出

> ID：12640903
> 
> 赞同：0
> 
> 时间：2012-09-28T13:24:24.080
> 
> 标签：python, python-3.x

如何以类似于数独的行输出以下数据

```
p = [
    [-8, 0,  0,  0,  0,  0,   0,  0, 0],
    [0,  0, -3, -6,  0,  0,   0,  0, 0],
    [0, -7,  0,  0, -9,  0,  -2,  0, 0],
    [0, -5,  0,  0,  0, -7,   0,  0, 0],
    [0,  0,  0,  0, -4, -5,  -7,  0, 0],
    [0,  0,  0, -1,  0,  0,   0, -3, 0],
    [0,  0, -1,  0,  0,  0,   0, -6, -8],
    [0,  0, -8, -5,  0,  0,   0,  -1, 0],
    [0, -9,  0,  0,  0,  0,  -4,   0, 0]]
print ("Unsolved:")

w="\n".join(re.findall("(?p).{,9}", p))[:-1]
print (w) 
```

以下列方式获得输出

```
0 | 0 | 3 | 0 | 2 | 0 | 6 | 0 | 0
9 | 0 | 0 | 3 | 0 | 5 | 0 | 0 | 1
0 | 0 | 1 | 8 | 0 | 6 | 4 | 0 | 0
0 | 0 | 8 | 1 | 0 | 2 | 9 | 0 | 0
7 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 8
0 | 0 | 6 | 7 | 0 | 8 | 2 | 0 | 0
0 | 0 | 2 | 6 | 0 | 9 | 5 | 0 | 0
8 | 0 | 0 | 2 | 0 | 3 | 0 | 0 | 9
0 | 0 | 5 | 0 | 1 | 0 | 3 | 0 | 0 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T14:42:45.780

```
rows = ("|".join(map(" {:2d} ".format, row)) for row in p)
print("\n".join(rows)) 
```

### [输出](http://ideone.com/2GVu8)

```
-8 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0
  0 | 0 | -3 | -6 | 0 | 0 | 0 | 0 | 0
  0 | -7 | 0 | 0 | -9 | 0 | -2 | 0 | 0
  0 | -5 | 0 | 0 | 0 | -7 | 0 | 0 | 0
  0 | 0 | 0 | 0 | -4 | -5 | -7 | 0 | 0
  0 | 0 | 0 | -1 | 0 | 0 | 0 | -3 | 0
  0 | 0 | -1 | 0 | 0 | 0 | 0 | -6 | -8
  0 | 0 | -8 | -5 | 0 | 0 | 0 | -1 | 0
  0 | -9 | 0 | 0 | 0 | 0 | -4 | 0 | 0

```

# iphone - UIWebView pdf 内容在 iPhone 5（4 英寸）中未调整大小

> ID：12640904
> 
> 赞同：0
> 
> 时间：2012-09-28T13:24:29.493
> 
> 标签：iphone, xcode, pdf, uiwebview

我正在使用 UIWebView 加载本地 5 页 pdf 文件，页面内容在 iPhone（3.5 英寸）中是完美的，但在 4 英寸中没有适当调整大小，请查看屏幕截图。
我该如何解决？
谢谢

![在此处输入图像描述](../Images/b29e2fa42b1b06cd30ccfc8db80d3ca0.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T14:17:04.803

我不认为你可以解决它。UIWebView*缩小*pdf 以使其适合 iPhone 屏幕，但不会*拉伸*它们。

如果 pdf 是本地的，如您所说，您始终可以包含 2 个 pdf 文件，一个用于 iPhone 4 英寸，一个用于 3.5 英寸。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T13:26:49.057

您可以检查 4 英寸或 3.5 英寸的屏幕尺寸

```
 CGRect screenBounds = [[UIScreen mainScreen] bounds];
if (screenBounds.size.height == 568)
{
   //for iphone 5 
   //for 4 inch
}
else
{
  //for iphone 4
  //for 3.5 inch
} 
```

# c# - 调用公共方法时不运行 Form_Load 事件

> ID：12640906
> 
> 赞同：-1
> 
> 时间：2012-09-28T13:24:35.873
> 
> 标签：c#, winforms

我有一个包含 ListBox 的表单，它允许用户选择一个新值，单击保存，然后返回到主表单。使用具有 this.ShowDialog() 调用的公共方法调用它。ListBox 填充在表单的 Load 事件中，我遇到的问题是，当我尝试设置当前值时，它无法这样做，因为此时尚未填充 ListBox。它在表单出现在屏幕上时填充。

在 VBA 中，我总是可以依赖在我与表单进行任何交互时触发的 UserForm_Initialize 事件，所以我的问题是如何在 C# 中获得相同的结果？我是否需要有一个公共方法来填充我的表单并且每次使用表单时都必须记住调用它？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T13:34:50.083

您可以在表单的构造函数中初始化列表框

# flot - flot - 图例条目和堆积条的顺序相反

> ID：12640909
> 
> 赞同：4
> 
> 时间：2012-09-28T13:24:47.807
> 
> 标签：flot, legend, sorted, stacked

我遇到了另一个小的堆叠条问题：填充绘图时，flot 自上而下添加图例条目并自下而上堆叠条。这样，图例的顺序与条形图完全相反。

flot API 允许按照标签的添加顺序、字母顺序或提供自定义排序功能对标签进行排序。我尝试提供一个始终返回 -1 的排序函数，以便将原始排序反转，但由于某种原因，`sorted`在使用堆叠条时似乎根本不会评估该选项。至少我在那里尝试过的任何东西（我自己`ascending`的功能）都没有对实际的传说产生任何影响。`descending``false`

我在[http://jsfiddle.net/YvGZu/1/](http://jsfiddle.net/YvGZu/1/)上整理了一个测试用例，说明了问题。

*编辑*：经过更多的测试......可能是传说排序被一起破坏了吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T06:26:18.147

巧合的是，我在几天内遇到了与您相同的问题。经过一番折腾，我意识到处理图例排序的[提交](https://github.com/dnschnur/flot/commit/375c06aa785d46c1a388ed05f6beb8f3b50aeaaf)是最近的（2012 年 7 月），并且不包含在我使用的 jquery.flot.js 版本中。

通过检查 Fiddle 上的 flot 资源，您似乎也是如此。如果您将 flot js 文件更新为[包含排序算法的](https://raw.github.com/flot/flot/master/jquery.flot.js)文件，您的问题可能会像我的一样得到解决。（好吧，我手动修补了，因为我还有其他实验性更改。）

我猜你接下来会遇到和我一样的障碍，那就是它存在的排序代码仅按字母顺序排序，或者使用只能检查标签文本和颜色代码的比较器。这对我来说还不够好——我想分配一个任意的排序顺序服务器端。为了做到这一点，我在我的系列标签中添加了一个隐藏的排序顺序字符串：

```
label: '<a class="hiddenOrder">2</a>foo' 
```

然后`a`将 Flot 占位符中的这些块设置为隐藏（编辑：还需要将样式应用于**不**包含在 Flot 占位符中的工具提示）。

```
#flotPlaceholder a.hiddenOrder, 
#flotTooltip a.hiddenOrder
{display:none;} 
```

我[分叉了你的小提琴](http://jsfiddle.net/rjqfB/11/)并包含了我的排序技术，所以你可以尝试一下，但不幸的是，看起来我到 GitHub 的资源链接在小提琴中不起作用。不过，您应该能够让它在本地滚动。

祝你好运！

# pcap - libnids 是否有维护的替代方案？

> ID：12640913
> 
> 赞同：1
> 
> 时间：2012-09-28T13:24:59.610
> 
> 标签：pcap, libpcap, libnet

由于[libnids](http://libnids.sourceforge.net/)似乎已有两年历史并且没有当前更新，是否有人知道 libnids 的任何替代解决方案或比它更好的库，因为它似乎以超过 1G/每秒的速度丢弃数据包

而且它不支持 64 位 IP 地址。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T05:33:07.610

一个替代方案`libnids`是[Bro](https://zeek.org/)。它带有一个健壮的 TCP 重组器，多年来已经被网络安全监控社区彻底测试和使用。它附带了一组用于常见协议的协议分析器，例如 HTTP、DNS、FTP、SMTP 和 SSL。

Bro 是“网络处理的 Python”：它有自己的特定于域的脚本语言，具有一流的 IP 地址（v4 和 v6）、子网、端口类型和功能。编程风格具有基于异步事件的风格：用户为反映网络活动的事件编写回调函数。分析以连接粒度进行。这是一个例子：

```
event connection_established(c: connection)
{
    if ( c$id$orig_h == 1.2.3.4 && c$id$resp_p == 31337/udp )
        // IP 1.2.3.4 successfully connected to remote host at port 31337.
} 
```

此外，Bro 支持允许对 10 Gbps 链路进行线速监控的[集群模式。](https://web.archive.org/web/20121228131650/http://bro-ids.org:80/documentation/cluster.html)因为大多数分析不需要共享互连状态，Bro 可以很好地跨核心（使用`PF_RING`）以及多个节点进行扩展。存在 >= 140 个节点的 Bro 安装。典型的部署如下所示：

[![NIDS 集群](../Images/e1ae3c420e784a7b4a74ddb7ab354a12.png)](https://i.stack.imgur.com/GrKxG.png)
[（来源：[bro.org](https://www.bro.org/sphinx/_images/deployment.png)）]

由于高可扩展性，通常不再需要处理低级细节和微调 C 实现。或者换一种说法，与 Bro 一起，您将时间花在分析而不是实施上。

# copy - Google Apps 脚本失败

> ID：12640916
> 
> 赞同：0
> 
> 时间：2012-09-28T13:25:06.170
> 
> 标签：copy, google-apps-script

您的脚本 Copy of Send SMS - Techawakening.org 最近未能成功完成。故障摘要如下所示。要为此脚本配置触发器，或更改您的设置以接收未来的失败通知，请单击此处。

该脚本由文档 Copy of Get Free SMS alerts for New Incoming Emails on Gmail - Techawakening.org 使用。

摘要：执行该操作需要错误消息计数授权。1024

我收到过这样的邮件 我每次都必须授权吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T03:49:20.267

每次更改脚本时都必须（重新）授权。如果您不触摸它，则将保存授权并且设置触发器正常运行。

# geolocation - 根据经纬度查找最近的机场

> ID：12640920
> 
> 赞同：4
> 
> 时间：2012-09-28T13:25:20.373
> 
> 标签：geolocation, maps

如何使用经度和纬度找到最近的机场？

任何特定的网络服务和任何数据库来实现？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-02-26T17:32:01.547

我发现的一个 WebService 是 airports.pidgets.com

这是一个例子：

XML 格式 [http://airports.pidgets.com/v1/airports?near=45.3515,9.3753](http://airports.pidgets.com/v1/airports?near=45.3515,9.3753)

JSON 格式 [http://airports.pidgets.com/v1/airports?near=45.3515,9.3753&format=json](http://airports.pidgets.com/v1/airports?near=45.3515,9.3753&format=json)

[编辑] 在 Aviationweather.gov 上找到另一个网络服务（仅 XML 和 CSV）

[http://aviationweather.gov/adds/dataserver_current/httpparam?dataSource=stations&requestType=retrieve&format=xml&radialDistance=20;9.3753,45.3515](http://aviationweather.gov/adds/dataserver_current/httpparam?dataSource=stations&requestType=retrieve&format=xml&radialDistance=20;9.3753,45.3515)

您可以从这两个站点下载“静态”机场列表，以执行离线搜索。

问候

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T11:19:10.297

你在哪个平台上编码，Durga？是安卓吗？

在这种情况下，您可以使用 Google Maps API：

[https://developers.google.com/maps/](https://developers.google.com/maps/)

尤其是 Google 地方信息：

[https://developers.google.com/places/](https://developers.google.com/places/)

浏览他们的文档以获取详细信息。特别是，检查他们的许可证。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T13:30:04.233

1.  您需要一个包含机场纬度和经度字段的数据集
2.  使用下面链接的页面上概述的大圆距离 (GCD) 的计算

[维基百科关于 GCD 的文章](http://en.wikipedia.org/wiki/Great-circle_distance "在维基百科上")

如果您需要进一步和更具体的帮助，请提供示例代码/指定语言

**代码：**

取自另一个网页（现已失效，使用[waybackmachine](http://web.archive.org/web/20101228001530/http://www.codecodex.com/wiki/Calculate_Distance_Between_Two_Points_on_a_Globe#C.23)）

```
using System;  
namespace HaversineFormula  
{  
    /// <summary>  
    /// The distance type to return the results in.  
    /// </summary>  
    public enum DistanceType { Miles, Kilometers };  
    /// <summary>  
    /// Specifies a Latitude / Longitude point.  
    /// </summary>  
    public struct Position  
    {  
        public double Latitude;  
        public double Longitude;  
    }  
    class Haversine  
    {  
        /// <summary>  
        /// Returns the distance in miles or kilometers of any two  
        /// latitude / longitude points.  
        /// </summary>  
        /// <param name=”pos1″&gt;</param>  
        /// <param name=”pos2″&gt;</param>  
        /// <param name=”type”&gt;</param>  
        /// <returns></returns>  
        public double Distance(Position pos1, Position pos2, DistanceType type)  
        {  
            double R = (type == DistanceType.Miles) ? 3960 : 6371;  
            double dLat = this.toRadian(pos2.Latitude - pos1.Latitude);  
            double dLon = this.toRadian(pos2.Longitude - pos1.Longitude);  
            double a = Math.Sin(dLat / 2) * Math.Sin(dLat / 2) +  
                Math.Cos(this.toRadian(pos1.Latitude)) * Math.Cos(this.toRadian(pos2.Latitude)) *  
                Math.Sin(dLon / 2) * Math.Sin(dLon / 2);  
            double c = 2 * Math.Asin(Math.Min(1, Math.Sqrt(a)));  
            double d = R * c;  
            return d;  
        }  
        /// <summary>  
        /// Convert to Radians.  
        /// </summary>  
        /// <param name="val"></param>  
        /// <returns></returns>  
        private double toRadian(double val)  
        {  
            return (Math.PI / 180) * val;  
        }  
    }  
} 
```

**伪代码：**

这个伪代码应该会给你你正在寻找的答案。我没有对此进行测试，C# 可能会有语法错误，但它的要点应该很清楚。

```
/* Set parameters */
Position currentPosition = new Position();
Position airportPosition = new Position();
Double minDistance = Double.MaxValue;
String closestAirportName = "UNKNOWN";
Haversine hv = new Haversine();

/* Set current position, remains fixed throughout */
currentPosition.Latitude = 0.000;
currentPosition.Longitude = 0.000; 

/* Compare distance to each airport with current location
* and save results if this is the closest airport so far*/
Foreach (airport in airports) {
    airportPosition = new Position(airport.Lat, airport.Lon);
    Double distanceToAirport = hv.Distance(currentPosition, airportPosition, DistanceType.Kilometers)

    if (distanceToAirport < minDistance) {
        minDistance = distanceToAirport
        closestAirportName = airport.Name
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-26T12:05:15.593

```
this.nearestAirport = this.airports.find((airport) => {
              return (Math.round(airport.latitude) === Math.round(currentLocation.latitude) &&
                      Math.round(airport.longitude) === Math.round(currentLocation.longitude));
            }); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-07T12:10:59.733

**查找最近的机场并获取从指定点 (Lat,Lan) 到达那里的路线**

这是一个谷歌方法，**没有任何数据库**来实现这一点：

```
onclick="getNeighbourhood('<%= propLat %>','<%= propLan %>');" 
```

有关完整代码，请访问此处[FULL NEAREST AIRPORT SCRIPT AND STYLE](http://www.roomfortekki.com/airportScriptAndStyle.txt)

![查找最近的机场](../Images/8d3847889801ecc1441866e72b337ad7.png)

```
function getNeighbourhood(propLatQ,propLanQ) {
propLat=propLatQ;
propLan=propLanQ;
var myLatlng = new google.maps.LatLng(propLat,propLan);
var myOptions = {
  zoom: 8,
  center: myLatlng,
  mapTypeId: google.maps.MapTypeId.ROADMAP
}
map = new google.maps.Map(document.getElementById("map"), myOptions);
places = new google.maps.places.PlacesService(map);
google.maps.event.addListener(map, 'tilesloaded', tilesLoaded);
autocomplete = new google.maps.places.Autocomplete(document.getElementById('autocomplete'));
google.maps.event.addListener(autocomplete, 'place_changed', function() {
  showSelectedPlace();
}); 
```

# db4o - db4o 继承字段上的唯一字段

> ID：12640924
> 
> 赞同：1
> 
> 时间：2012-09-28T13:25:23.650
> 
> 标签：db4o

我试图通过对 db4o 对象的继承字段应用唯一约束来使子类唯一？可能吗？

例如：B类从A类继承字段f，我需要使f只对B类唯一。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T23:54:36.677

据我所知，这是不可能的。您只能使字段在定义它的类上唯一。在这种情况下，它是 A 类。

不能将继承自类 A 的字段标记为仅对于子类 B 是唯一的。

# displaytag - 如何输入 进入

> ID：12640925
> 
> 赞同：3
> 
> 时间：2012-09-28T13:25:23.527
> 
> 标签：displaytag

我有这样的消息

```
appSearch.urlApplicationInfo=http://localhost:8080/cgi-bin/snquery.pl?APPL_ID={0} 
```

然后我想阅读并将其放入 Application Number 列。因此，当用户单击记录时，他/她将被导航到其他页面。

```
<display:table id="row">
    <display:column title="Application Number" sortable="true" style="width=20%">
        <html:link href="<bean:message key='appSearch.urlApplicationInfo' arg0='${row.applicationNumber}' />"> ${row.applicationNumber}</html:link>
    </display:column>
</display:table> 
```

我的方法不起作用，它没有读取消息并放入`href`属性。期待收到你的消息。我非常感谢您的所有贡献！

**固定：**
改用`<a href>`：

```
<a href="<bean:message key='appSearch.urlApplicationInfo' arg0='${row.applicationNumber}'/>">${row.applicationNumber}</a> 
```

不管怎么说，还是要谢谢你！！！

# servicestack - ServiceStack OrmLite 封装一个错误

> ID：12640927
> 
> 赞同：1
> 
> 时间：2012-09-28T13:25:31.537
> 
> 标签：servicestack, ormlite-servicestack

做一个简单的

```
db.Dictionary("select Id, Name from \"Product\""); 
```

导致异常

```
"column "id" does not exists" 
```

正确的字段名称是“Id”——似乎 OrmLite 中的 Postgres 对“Id”字段做了一些事情。尝试使用一些混合大小写的随机字段名称，它们也最终出现异常，其中字段以全小写形式显示。

这可以以某种方式实现还是OrmLite中的错误？

这也是 db.List、db.Lookup 等中的问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T14:54:41.057

您是否尝试将列放在引号中以保留案例？

```
db.Dictionary("select \"Id\", Name from \"Product\""); 
```

这里有一个单元测试示例[https://github.com/ServiceStack/ServiceStack.OrmLite/blob/master/src/ServiceStack.OrmLite.PostgreSQL.Tests/OrmLiteSelectTests.cs#L195](https://github.com/ServiceStack/ServiceStack.OrmLite/blob/master/src/ServiceStack.OrmLite.PostgreSQL.Tests/OrmLiteSelectTests.cs#L195)

# javascript - jQuery函数中的全局变量？

> ID：12640931
> 
> 赞同：0
> 
> 时间：2012-09-28T13:25:50.280
> 
> 标签：javascript, jquery, global-variables

我需要从文件中加载一些价格（服务器没有设置数据库）：

```
PriceChicken:2.16
PriceRibs:1.84
PriceBrisket:14.00
PricePulledPork:12.00
PriceSides:5.00 
```

像这样的javascript块：

```
var price = {
    "PriceChicken": "1",
    "PriceRibs": "1",
    "PriceBrisket": "1",
    "PricePulledPork": "1",
    "PriceSides": "1"
};

function loadVars(){
    console.log(price["PriceChicken"]);
    $.get("price.txt", function(data){
        dataarray = data.split("\n");
        for(i = 0;i < dataarray.length; i++){
            var line = dataarray[i].split(":");
            console.log(price[line[0]]);
            price[line[0]] = line[1];
            console.log(price[line[0]]);
        }
    });
    console.log(price["PriceChicken"]);
}
loadVars(); 
```

不幸的是，$.get 部分内部的函数似乎看不到全局价格变量。
因此，它显示的第一项：1，未声明，2.16，然后在它离开 $.get 函数时再次显示 1。
有没有更好的方法让全局变量工作，或者有更好的方法来获取这些信息？

**编辑：**我很愚蠢，没有检查我所有的变量。作为我的忏悔，我将以正确的方式去做，并学习使用 JSON。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T13:29:27.830

`$.get`调用是异步的。您将其视为同步调用。

`console.log(price["PriceChicken"]);`在处理文件之前调用该行。

最好使用 JSON 格式。

**价格.json**

```
{
    "PriceChicken" : 2.16,
    "PriceRibs" : 1.84,
    "PriceBrisket" : 14.00,
    "PricePulledPork" : 12.00,
    "PriceSides" : 5.00
} 
```

**JavaScript**

```
var price = {};

$.getJSON("prices.json", function(data){ 
    $.extend(price,data); 
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T13:40:15.007

```
var price = {
    "PriceChicken": "1",
    "PriceRibs": "1",
    "PriceBrisket": "1",
    "PricePulledPork": "1",
    "PriceSides": "1"
};

function set_price(key, value){
    price[key] = value;
};

function loadVars(){
    console.log(price["PriceChicken"]);

    $.get("price.txt", function(data){
        dataarray = data.split("\n");
        for(i = 0;i < dataarray.length; i++){
            var line = dataarray[i].split(":");

            // set price
            set_price(line[0], line[1]);

            console.log(price[line[0]]);
        }
    });

    console.log(price["PriceChicken"]);
}

loadVars(); 
```

# android - Android TableLayout - 跨两行的跨元素

> ID：12640938
> 
> 赞同：3
> 
> 时间：2012-09-28T13:26:35.710
> 
> 标签：android, tablelayout

我正在使用 TableLayout 来定位一些按钮，我想将 Button 2 跨越 2 行，所以它会在按钮 1,3 旁边。 ![在此处输入图像描述](../Images/8c600f0fcba3d4e093593d330c3817a0.png)

我知道它可以通过网格/相对布局来完成，但我需要让它与表格布局一起使用。

```
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <TableRow
        android:id="@+id/tableRow1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button 1" />

    <Button
        android:id="@+id/button2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button 2" />
    </TableRow>

    <TableRow
        android:id="@+id/tableRow2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <Button
            android:id="@+id/button3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Button 3" />

    </TableRow>

</TableLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-09-03T01:53:57.437

您可以使用 TableLayout 中的 TableLayout 跨越 2 行。检查我的代码：

```
<TableLayout
     android:layout_width="wrap_content"
     android:layout_height="wrap_content">

    <TableRow
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:padding="5dip" >

        <Button
            android:layout_gravity="center"
            android:text="Column 1" />

        <TableLayout>

            <TableRow>

                <Button
                    android:layout_gravity="center"
                    android:text="Column 2" />
            </TableRow>

            <TableRow>

                <Button
                    android:layout_gravity="center"
                    android:text="Column 2" />
            </TableRow>
        </TableLayout>
    </TableRow>

</TableLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T14:44:15.383

我还没有现场测试过，但是我有类似的代码在表格布局中执行相同的操作，所以很确定如果将按钮 1 和按钮 2 包装在 LinearLayout 中（在 TableRow1 中），你可以做到这一点：

```
 <TableRow
    android:id="@+id/tableRow1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content">

    <LinearLayout android:orientation="vertical"
     android:layout_width="fill_parent"
     android:layout_height="wrap_content">

      <Button
       android:id="@+id/button1"
       android:layout_width="wrap_content"
       android:layout_height="wrap_content"
       android:text="Button 1" />
      <Button
       android:id="@+id/button2"
       android:layout_width="wrap_content"
       android:layout_height="wrap_content"
       android:text="Button 2" />

    </LinearLayout>

   </TableRow> 
```

希望这可以帮助。

# android - aChartEngine 获取图中所有点的所有值

> ID：12640939
> 
> 赞同：1
> 
> 时间：2012-09-28T13:26:41.037
> 
> 标签：android, achartengine

嗨，伙计，我使用图表引擎在我的应用程序中做图形。我想实现“保存图”和“加载图”功能，我认为我必须将所有点的值保存在文件中：
1,1 2,2 14,5

在加载图中，我从文件中读取，然后进行解析并添加保存在图中的点。但是如何获得图表中的所有点以将其保存在文件中？

```
 for(int i=0;i<this.mCurrentSeries.getItemCount();i++)
   { xi=getPOintX(i);yi=getPOintY(i); 
```

但是这个库中有一个函数可以获取图形的所有 x 和 y 值吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T13:31:26.150

解决它： mCurrentSeries.getX(i)) 获取 X 值

# ios - Windows 上的 iOS6 应用程序部署无法正常工作

> ID：12640940
> 
> 赞同：2
> 
> 时间：2012-09-28T13:26:46.113
> 
> 标签：ios, ios6, trigger.io

当我第一次部署应用程序时，一切正常，但是在更改代码并尝试使用“再次运行”按钮再次部署相同的应用程序后，应用程序在没有加载 forge 对象的情况下启动，因此我无法使用 forge API。

经过一点测试，我发现只有在部署“再次运行”按钮之前从手机中删除应用程序时，forge 才会加载。基本上是这样。我正在使用最新版本 v1.4.15 。

所以如果你能修复它会在开发过程中节省一些时间。

还有一个，我可以在iOS上从windows安装和运行应用程序，但我不能从我得到的windows调试应用程序

```
Launching - /private/var/mobile/Applications/C894C75B-DC03-4863-8C3C-09CEF15CC8D9/device- ios.app 
Could not start com.apple.debugserver! 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T16:54:53.680

对于这些 iOS 和 Windows 问题，可能是设备尚未启用开发 - 请参阅[http://docs.trigger.io/en/v1.4/tools/ios-windows.html](http://docs.trigger.io/en/v1.4/tools/ios-windows.html)

如果您可以借用一台 OS X 机器来完成一次性任务，那么您就可以启动并运行。如果没有，应用程序将安装在设备上，但您需要[iPhone 配置实用程序](http://support.apple.com/downloads/#iphone)才能查看日志输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T02:42:38.020

不确定它是否相关，但我在从基于 ToolKit 的 UI 运行 iOS 应用程序时看到此消息：[INFO] Launching - /private/var/mobile/Applications/0F328847-939D-4557-B58A-33ACACB3B295/ device-ios.app [INFO] 无法向引导服务器注册 io.trigger.forge1078daf40ad711e2acce12313d1adcbe。错误：未知错误代码。应用程序未完全启动；看起来锻造后端还没有准备好还是什么？

如果我等待几分钟，该应用程序将完美运行。诡异的....

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T15:19:17.977

我收到相同的错误消息。该应用程序安装在手机上，但无法启动。“运行 ios”后工具包 UI 上的最终状态为“失败”。错误行类似于此处报告的错误行：

```
[ERROR] Failed when running C:\my\projects\forge-workspace\appname\.lib\win-ios-install.exe: Installing c:\users\username\appdata\local\temp\tmppqzab4 to: 8e8023ffaa5ad085966046ca3931c9a09b7661a0
...
Launching - /private/var/mobile/Applications/32F5A9EC-2453-4CD5-9D04-A13D0E14D9AA/device-ios.app
Could not start com.apple.debugserver! 
```

这是打开“显示调试输出”的完整日志：

```
[INFO] Forge tools running at version 3.3.34
[DEBUG] Forge build tools version: 3.3.34
[DEBUG] main: {"server": "{link}https://trigger.io/api/{/link}"}
[DEBUG] port: 38394
[DEBUG] GET {link}https://trigger.io/api/app/93ec7c70811411e2b05e12313d00dc45/should_rebuild{/link}
[DEBUG] Checking API response for success or error
[DEBUG] configuration is identical to last run
[DEBUG] POST {link}https://trigger.io/api/reload/buildevents/93ec7c70811411e2b05e12313d00dc45{/link}
[DEBUG] Checking API response for success or error
[DEBUG] Enabled platforms: [u'ios']
[DEBUG] Forge build tools version: 3.3.34
[DEBUG] main: {"server": "{link}https://trigger.io/api/{/link}"}
[DEBUG] port: 38394
[DEBUG] POST {link}https://trigger.io/api/track/{/link}
[DEBUG] <ForgeTask (ios)> running...
[DEBUG] <ForgeTask (ios)> script:
[{'do': {'lint_javascript': ()}},
 {'do': {'check_local_config_schema': ()}},
 {'do': {'resolve_urls': ('modules.activations.[].scripts.[]',
                          'modules.activations.[].styles.[]',
                          'modules.icons.*',
                          'modules.launchimage.iphone',
                          'modules.launchimage.iphone-retina',
                          'modules.launchimage.iphone-retina4',
                          'modules.launchimage.ipad',
                          'modules.launchimage.ipad-landscape',
                          'modules.launchimage.ipad-retina',
                          'modules.launchimage.ipad-landscape-retina',
                          'modules.launchimage.android',
                          'modules.launchimage.android-landscape',
                          'modules.button.default_icon',
                          'modules.button.default_popup',
                          'modules.button.default_icons.*')}},
 {'do': {'check_index_html': ('src',)}},
 {'do': {'copy_files': {'from': 'src',
                        'ignore_patterns': [u'.svn/',
                                            u'.cvs/',
                                            u'.hg/',
                                            u'./identity.json',
                                            u'.git/',
                                            u'.bzr/',
                                            u'.forgeignore',
                                            u'./config.json',
                                            u'.darcs/'],
                        'to': 'development/ios/*/assets/src'}},
  'when': {'platform_is': 'ios'}},
 {'do': {'copy_files': {'from': 'src',
                        'ignore_patterns': [u'.svn/',
                                            u'.cvs/',
                                            u'.hg/',
                                            u'./identity.json',
                                            u'.git/',
                                            u'.bzr/',
                                            u'.forgeignore',
                                            u'./config.json',
                                            u'.darcs/'],
                        'to': 'development/reload/src'}}},
 {'do': {'find_and_replace_in_dir': {'find': '<head>',
                                     'replace': "<head><script src='%{back_to_parent}%forge/all.js'></script>",
                                     'root_dir': 'development/ios/*/assets/src'}},
  'when': {'platform_is': 'ios'}},
 {'do': {'find_and_replace_in_dir': {'find': '<head>',
                                     'replace': "<head><script src='%{back_to_parent}%forge/all.js'></script>",
                                     'root_dir': 'development/reload/src'}}},
 {'do': {'find_and_replace_in_dir': {'find': '<head>',
                                     'replace': '<head>\n\t\t\t\t<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">\n\t\t\t\t<script>\n\t\t\t\tfunction window$forge$_receive(result) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\twindow.forge._receive(JSON.parse(result));\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\tforge.logging.error("window$forge$_receive -> " + e);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t</script>',
                                     'root_dir': 'development/reload/src'}}},
 {'do': {'populate_xml_safe_name': ()}},
 {'do': {'populate_json_safe_name': ()}},
 {'do': {'set_in_biplist': {'filename': 'development/ios/*/Info.plist',
                            'key': 'CFBundleName',
                            'value': '${name}'}},
  'when': {'platform_is': 'ios'}},
 {'do': {'set_in_biplist': {'filename': 'development/ios/*/Info.plist',
                            'key': 'CFBundleDisplayName',
                            'value': '${name}'}},
  'when': {'platform_is': 'ios'}},
 {'do': {'populate_package_names': ()}},
 {'do': {'set_in_biplist': {'filename': 'development/ios/*/Info.plist',
                            'key': 'CFBundleIdentifier',
                            'value': '${modules.package_names.ios}'}},
  'when': {'platform_is': 'ios'}},
 {'do': {'find_and_replace': {'find': 'UUID_HERE',
                              'in': ('development/ios/device-ios.app/assets/app_config.json',),
                              'replace': '${uuid}'}},
  'when': {'platform_is': 'ios'}},
 {'do': {'find_and_replace': {'find': 'UUID_HERE',
                              'in': ('development/ios/simulator-ios.app/assets/app_config.json',),
                              'replace': '${uuid}'}},
  'when': {'platform_is': 'ios'}},
 {'do': {'set_in_biplist': {'filename': 'development/ios/*/Info.plist',
                            'key': 'CFBundleVersion',
                            'value': '1362063560'}},
  'when': {'platform_is': 'ios'}},
 {'do': {'set_in_biplist': {'filename': 'development/ios/*/Info.plist',
                            'key': 'CFBundleShortVersionString',
                            'value': '${version}'}},
  'when': {'platform_is': 'ios'}},
 {'do': {'populate_trigger_domain': ()}},
 {'do': {'find_and_replace': {'find': 'CONFIG_HASH_HERE',
                              'in': ('development/ios/device-ios.app/assets/app_config.json',),
                              'replace': '${config_hash}'}},
  'when': {'platform_is': 'ios'}},
 {'do': {'find_and_replace': {'find': 'CONFIG_HASH_HERE',
                              'in': ('development/ios/simulator-ios.app/assets/app_config.json',),
                              'replace': '${config_hash}'}},
  'when': {'platform_is': 'ios'}},
 {'do': {'find_and_replace': {'find': 'TRIGGER_DOMAIN_HERE',
                              'in': ('development/ios/device-ios.app/assets/app_config.json',),
                              'replace': '${trigger_domain}'}},
  'when': {'platform_is': 'ios'}},
 {'do': {'find_and_replace': {'find': 'TRIGGER_DOMAIN_HERE',
                              'in': ('development/ios/simulator-ios.app/assets/app_config.json',),
                              'replace': '${trigger_domain}'}},
  'when': {'platform_is': 'ios'}},
 {'do': {'populate_icons': ('ios', [57, 72, 114, 144])},
  'when': {'platform_is': 'ios'}},
 {'do': {'generate_sha1_manifest': {'input_folder': 'development/ios/device-ios.app/assets/src',
                                    'output_file': 'development/ios/device-ios.app/assets/hash_to_file.json'}},
  'when': {'platform_is': 'ios'}},
 {'do': {'generate_sha1_manifest': {'input_folder': 'development/ios/simulator-ios.app/assets/src',
                                    'output_file': 'development/ios/simulator-ios.app/assets/hash_to_file.json'}},
  'when': {'platform_is': 'ios'}}]
[INFO] Checking JavaScript files...
[DEBUG] Running: "C:\Users\username\AppData\Local\Trigger Toolkit\build-tools\bin\jsl.exe" -conf "C:\Users\username\AppData\Local\Trigger Toolkit\build-tools\jsl.conf" -process c:\projects\forge-workspace\appname\src\*.js -nologo -nofilelisting -nosummary
[WARNING] c:\projects\forge-workspace\appname\src\knockout.curly.js(29): SyntaxError: invalid quantifier {
[WARNING]             var ReplacementInfo = ReplaceMatches(node, /{{(.*?)}}/, function (Matches) {
[WARNING] .......................................................^
[WARNING] 
[WARNING] c:\projects\forge-workspace\appname\src\Scripts\jquery.validate.unobtrusive.js(27): SyntaxError: unterminated character class !
[WARNING]         return value.replace(/([!"#$%&'()*+,./:;<=>?@\[\\\]^`{|}~])/g, "\\$1");
[WARNING] .............................^
[WARNING] 
[WARNING] c:\projects\forge-workspace\appname\src\Scripts\jquery.validate.unobtrusive.min.js(5): SyntaxError: unterminated character class !
[WARNING] (function(a){var d=a.validator,b,e="unobtrusiveValidation";function c(a,b,c){a.rules[b]=c;if(a.message)a.messages[b]=a.message}function j(a){return a.replace(/^\s+|\s+$/g,"").split(/\s*,\s*/g)}function f(a){return a.replace(/([!"#$%&'()*+,./:;<=>?@\[\\\]^
[WARNING] ................................................................................................................................................................................................................................^
[WARNING] 
[INFO] JavaScript check complete
[INFO] Verifying your configuration settings...
[INFO] Configuration settings check complete
[DEBUG] copying src to development/ios\device-ios.app\assets\src
[DEBUG] copying src to development/ios\simulator-ios.app\assets\src
[DEBUG] copying src to development/reload/src
[DEBUG] replacing <head> with <head><script src='%{back_to_parent}%forge/all.js'></script> in development/ios/*/assets/src/**/*.('html',)
[DEBUG] replacing <head> with <head><script src='../forge/all.js'></script> in development/ios\device-ios.app\assets\src\index - original.html
[DEBUG] replacing <head> with <head><script src='../forge/all.js'></script> in development/ios\device-ios.app\assets\src\index.html
[DEBUG] replacing <head> with <head><script src='../forge/all.js'></script> in development/ios\simulator-ios.app\assets\src\index - original.html
[DEBUG] replacing <head> with <head><script src='../forge/all.js'></script> in development/ios\simulator-ios.app\assets\src\index.html
[DEBUG] replacing <head> with <head><script src='%{back_to_parent}%forge/all.js'></script> in development/reload/src/**/*.('html',)
[DEBUG] replacing <head> with <head><script src='../forge/all.js'></script> in development/reload/src\index - original.html
[DEBUG] replacing <head> with <head><script src='../forge/all.js'></script> in development/reload/src\index.html
[DEBUG] replacing <head> with <head>
                <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
                <script>
                function window$forge$_receive(result) {
                    try {
                        window.forge._receive(JSON.parse(result));
                    } catch (e) {
                        forge.logging.error("window$forge$_receive -> " + e);
                    }
                }
            </script> in development/reload/src/**/*.('html',)
[DEBUG] replacing <head> with <head>
                <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
                <script>
                function window$forge$_receive(result) {
                    try {
                        window.forge._receive(JSON.parse(result));
                    } catch (e) {
                        forge.logging.error("window$forge$_receive -> " + e);
                    }
                }
            </script> in development/reload/src\index - original.html
[DEBUG] replacing <head> with <head>
                <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
                <script>
                function window$forge$_receive(result) {
                    try {
                        window.forge._receive(JSON.parse(result));
                    } catch (e) {
                        forge.logging.error("window$forge$_receive -> " + e);
                    }
                }
            </script> in development/reload/src\index.html
[DEBUG] setting CFBundleName to appname in development/ios/*/Info.plist
[DEBUG] setting CFBundleDisplayName to appname in development/ios/*/Info.plist
[DEBUG] setting CFBundleIdentifier to U9XC4Z6EP5.* in development/ios/*/Info.plist
[DEBUG] replacing UUID_HERE with u'93ec7c70811411e2b05e12313d00dc45'
[DEBUG] replacing UUID_HERE with 93ec7c70811411e2b05e12313d00dc45 in development/ios/device-ios.app/assets/app_config.json
[DEBUG] replacing UUID_HERE with u'93ec7c70811411e2b05e12313d00dc45'
[DEBUG] replacing UUID_HERE with 93ec7c70811411e2b05e12313d00dc45 in development/ios/simulator-ios.app/assets/app_config.json
[DEBUG] setting CFBundleVersion to 1362063560 in development/ios/*/Info.plist
[DEBUG] setting CFBundleShortVersionString to 0.1 in development/ios/*/Info.plist
[DEBUG] Forge build tools version: 3.3.34
[DEBUG] main: {"server": "{link}https://trigger.io/api/{/link}"}
[DEBUG] port: 38394
[DEBUG] replacing CONFIG_HASH_HERE with u'436f5ffbc0886a450ff560d4a18acd10b24e78ca'
[DEBUG] replacing CONFIG_HASH_HERE with 436f5ffbc0886a450ff560d4a18acd10b24e78ca in development/ios/device-ios.app/assets/app_config.json
[DEBUG] replacing CONFIG_HASH_HERE with u'436f5ffbc0886a450ff560d4a18acd10b24e78ca'
[DEBUG] replacing CONFIG_HASH_HERE with 436f5ffbc0886a450ff560d4a18acd10b24e78ca in development/ios/simulator-ios.app/assets/app_config.json
[DEBUG] replacing TRIGGER_DOMAIN_HERE with u'{link}https://trigger.io'{/link}
[DEBUG] replacing TRIGGER_DOMAIN_HERE with {link}https://trigger.io{/link} in development/ios/device-ios.app/assets/app_config.json
[DEBUG] replacing TRIGGER_DOMAIN_HERE with u'{link}https://trigger.io'{/link}
[DEBUG] replacing TRIGGER_DOMAIN_HERE with {link}https://trigger.io{/link} in development/ios/simulator-ios.app/assets/app_config.json
[DEBUG] <ForgeTask (ios)> has finished
[INFO] Development build created. Use forge run to run your app.
[INFO] Forge tools running at version 3.3.34
[DEBUG] ignoring non-target directory reload
[DEBUG] Enabled platforms: [u'ios']
[DEBUG] Using configuration file value u'device' for ios.device
[DEBUG] Forge build tools version: 3.3.34
[DEBUG] main: {"server": "{link}https://trigger.io/api/{/link}"}
[DEBUG] port: 38394
[DEBUG] POST {link}https://trigger.io/api/track/{/link}
[DEBUG] <ForgeTask (ios)> running...
[DEBUG] <ForgeTask (ios)> script:
[{'do': {'run_ios': (u'device',)}, 'when': {'platform_is': 'ios'}}]
[INFO] Running on iOS device: device
[DEBUG] Using configuration file value u'C:\\iPhone Development Files\\Development_Provisioning_Profile.mobileprovision' for ios.profile.provisioning_profile
[DEBUG] Using configuration file value u'C:\\iPhone Development Files\\Developer Certificate.p12' for ios.profile.developer_certificate_path
[DEBUG] Using configuration file value u'appname2' for ios.profile.developer_certificate_password
[DEBUG] Looking for apps at c:\projects\forge-workspace\appname\development/ios/device-*/
[DEBUG] Signing c:\projects\forge-workspace\appname\development/ios\device-ios.app\
[DEBUG] Provisioning profile has valid wildcard application ID
[INFO] Plist OK
[INFO] 1 Provisioned Device(s):
[INFO] ['8e8023ffaa5ad085966046ca3931c9a09b7661a0']
[INFO] Starting package process for iOS
[INFO] Going to package: c:\projects\forge-workspace\appname\development\ios\device-ios.app
[DEBUG] Provisioning profile has valid wildcard application ID
[INFO] Plist OK
[INFO] 1 Provisioned Device(s):
[INFO] ['8e8023ffaa5ad085966046ca3931c9a09b7661a0']
[DEBUG] Extracted seed ID: U9XC4Z6EP5
[DEBUG] Making Payload directory
[DEBUG] Running: attrib +h c:\projects\forge-workspace\appname\.lib
[DEBUG] File: p12name.jar, already downloaded and correct.
[INFO] Sending app to remote server for codesigning. Uploading may take some time.
[INFO] 100 percent uploaded: c:\users\username\appdata\local\temp\tmp5e1zca
[INFO] 10 percent uploaded: c:\users\username\appdata\local\temp\tmp63qzfp
[INFO] 20 percent uploaded: c:\users\username\appdata\local\temp\tmp63qzfp
[INFO] 30 percent uploaded: c:\users\username\appdata\local\temp\tmp63qzfp
[INFO] 40 percent uploaded: c:\users\username\appdata\local\temp\tmp63qzfp
[INFO] 50 percent uploaded: c:\users\username\appdata\local\temp\tmp63qzfp
[INFO] 60 percent uploaded: c:\users\username\appdata\local\temp\tmp63qzfp
[INFO] 70 percent uploaded: c:\users\username\appdata\local\temp\tmp63qzfp
[INFO] 80 percent uploaded: c:\users\username\appdata\local\temp\tmp63qzfp
[INFO] 90 percent uploaded: c:\users\username\appdata\local\temp\tmp63qzfp
[INFO] 100 percent uploaded: c:\users\username\appdata\local\temp\tmp63qzfp
[INFO] 100 percent uploaded: C:\my\iPhone Development Files\Developer Certificate.p12
[INFO] Extracting app.zip
[INFO] Running: security create-keychain -p f1af2791b0756cb759e962ecebe61c271f8d2d39 9c863e0e28174ffba943a84ce722660088758729
[INFO] Returned success
[INFO] Running: security import certificate.p12 -k 9c863e0e28174ffba943a84ce722660088758729 -t agg -A -P appname2
[INFO] 1 identity imported.
[INFO] 
[INFO] Returned success
[INFO] Running: security unlock-keychain -p f1af2791b0756cb759e962ecebe61c271f8d2d39 9c863e0e28174ffba943a84ce722660088758729
[INFO] Returned success
[INFO] Running: codesign --keychain 9c863e0e28174ffba943a84ce722660088758729 --force --preserve-metadata --entitlements entitlements.plist --sign iPhone --resource-rules=app/ResourceRules.plist app
[INFO] Returned success
[INFO] Running: /usr/bin/zip --symlinks --verbose --recurse-paths ../out.zip .
[INFO]   adding: _CodeSignature/    (in=0) (out=0) (stored 0%)
[INFO]   adding: _CodeSignature/CodeResources   (in=513) (out=248) (deflated 52%)
[INFO]   adding: embedded.mobileprovision   (in=7428) (out=5034) (deflated 32%)
[INFO]   adding: Forge  (in=1608288) (out=564104) (deflated 65%)
[INFO]   adding: Info.plist (in=1316) (out=857) (deflated 35%)
[INFO]   adding: ResourceRules.plist    (in=161) (out=120) (deflated 25%)
[INFO] total bytes=1617706, compressed=570363 -> 65% savings
[INFO] 
[INFO] Returned success
[INFO] Running: security delete-keychain 9c863e0e28174ffba943a84ce722660088758729
[INFO] Returned success
[INFO] Signed app received, continuing with packaging.
[DEBUG] adding to IPA: c:\users\username\appdata\local\temp\tmpyirv0z\Payload\device-ios.app\ForgeCore.bundle\ForgeViewController.nib
[DEBUG] adding to IPA: c:\users\username\appdata\local\temp\tmpyirv0z\Payload\device-ios.app\_CodeSignature\CodeResources
[INFO] created IPA: c:\users\username\appdata\local\temp\tmppqzab4
[DEBUG] Running: attrib +h c:\projects\forge-workspace\appname\.lib
[DEBUG] File: win-ios-install.exe, already downloaded and correct.
[INFO] Installing app on device: is it connected?
[DEBUG] Running: c:\projects\forge-workspace\appname\.lib\win-ios-install.exe c:\users\username\appdata\local\temp\tmppqzab4 U9XC4Z6EP5.*
[INFO] Installing c:\users\username\appdata\local\temp\tmppqzab4 to: 8e8023ffaa5ad085966046ca3931c9a09b7661a0
[INFO] Install - CreatingStagingDirectory (5%)
[INFO] Install - ExtractingPackage (15%)
[INFO] Install - InspectingPackage (20%)
[INFO] Install - TakingInstallLock (20%)
[INFO] Install - PreflightingApplication (30%)
[INFO] Install - InstallingEmbeddedProfile (30%)
[INFO] Install - VerifyingApplication (40%)
[INFO] Install - CreatingContainer (50%)
[INFO] Install - InstallingApplication (60%)
[INFO] Install - PostflightingApplication (70%)
[INFO] Install - SandboxingApplication (80%)
[INFO] Install - GeneratingApplicationMap (90%)
[INFO] Install - Complete
[INFO] Launching - /private/var/mobile/Applications/32F5A9EC-2453-4CD5-9D04-A13D0E14D9AA/device-ios.app
[INFO] Could not start com.apple.debugserver!
[ERROR] Failed when running c:\projects\forge-workspace\appname\.lib\win-ios-install.exe: Installing c:\users\username\appdata\local\temp\tmppqzab4 to: 8e8023ffaa5ad085966046ca3931c9a09b7661a0
Install - CreatingStagingDirectory (5%)
Install - ExtractingPackage (15%)
Install - InspectingPackage (20%)
Install - TakingInstallLock (20%)
Install - PreflightingApplication (30%)
Install - InstallingEmbeddedProfile (30%)
Install - VerifyingApplication (40%)
Install - CreatingContainer (50%)
Install - InstallingApplication (60%)
Install - PostflightingApplication (70%)
Install - SandboxingApplication (80%)
Install - GeneratingApplicationMap (90%)
Install - Complete
Launching - /private/var/mobile/Applications/32F5A9EC-2453-4CD5-9D04-A13D0E14D9AA/device-ios.app
Could not start com.apple.debugserver!
[DEBUG] Traceback (most recent call last):
  File "C:\Users\username\AppData\Local\Trigger Toolkit\build-tools\forge\async.py", line 96, in run
    result = self._target(*self._args, **self._kwargs)
  File "C:\Users\username\AppData\Local\Trigger Toolkit\trigger\api\app.py", line 459, in run
    forge_main.run(['--general.interactive', 'no'])
  File "C:\Users\username\AppData\Local\Trigger Toolkit\build-tools\forge\main.py", line 414, in run
    build_to_run=build_to_run,
  File "c:\projects\forge-workspace\appname\.template\generate_dynamic\customer_goals.py", line 125, in run_app
    build_to_run.run()
  File "c:\projects\forge-workspace\appname\.template\generate_dynamic\build.py", line 337, in run
    self._call_with_params(task_method, task_args)
  File "c:\projects\forge-workspace\appname\.template\generate_dynamic\build.py", line 296, in _call_with_params
    return method(self, *params)
  File "c:\projects\forge-workspace\appname\.template\generate_dynamic\ios_tasks.py", line 695, in run_ios
    certificate_password=certificate_password,
  File "c:\projects\forge-workspace\appname\.template\generate_dynamic\ios_tasks.py", line 628, in run_idevice
    run_shell(*win_ios_install, fail_silently=False, command_log_level=logging.INFO, check_for_interrupt=True)
  File "c:\projects\forge-workspace\appname\.template\generate_dynamic\utils.py", line 346, in run_shell
    output=state.output.getvalue()
ShellError: Failed when running c:\projects\forge-workspace\appname\.lib\win-ios-install.exe: Installing c:\users\username\appdata\local\temp\tmppqzab4 to: 8e8023ffaa5ad085966046ca3931c9a09b7661a0
Install - CreatingStagingDirectory (5%)
Install - ExtractingPackage (15%)
Install - InspectingPackage (20%)
Install - TakingInstallLock (20%)
Install - PreflightingApplication (30%)
Install - InstallingEmbeddedProfile (30%)
Install - VerifyingApplication (40%)
Install - CreatingContainer (50%)
Install - InstallingApplication (60%)
Install - PostflightingApplication (70%)
Install - SandboxingApplication (80%)
Install - GeneratingApplicationMap (90%)
Install - Complete
Launching - /private/var/mobile/Applications/32F5A9EC-2453-4CD5-9D04-A13D0E14D9AA/device-ios.app
Could not start com.apple.debugserver! 
```

# python - 如何使用正则表达式捕获多个重复模式？

> ID：12640941
> 
> 赞同：1
> 
> 时间：2012-09-28T13:26:45.663
> 
> 标签：python, regex

我得到一些这样`\input{{whatever}{1}}\mypath{{path1}{path2}{path3}...{pathn}}\shape{{0.2}{0.3}}` 的字符串：我想捕获所有路径：path1，path2，... pathn。`re`我在python中尝试了该模块。但是，它不支持多次捕获。例如：`r"\\mypath\{(\{[^\{\}\[\]]*\})*\}"`将只返回最后一个匹配的组。将模式应用于`search(r"\mypath{{path1}{path2}})"`将仅返回`groups()`为`("{path2}",)`

然后我找到了另一种方法来做到这一点：

```
 gpathRegexPat=r"(?:\\mypath\{)((\{[^\{\}\[\]]*\})*)(?:\})"
    gpathRegexCp=re.compile(gpathRegexPat)
    strpath=gpathRegexCp.search(r'\mypath{{sadf}{ad}}').groups()[0]
    >>> strpath
    '{sadf}{ad}'
    p=re.compile('\{([^\{\}\[\]]*)\}')
    >>> p.findall(strpath)
    ['sadf', 'ad'] 
```

或者：

```
 >>> gpathRegexPat=r"\\mypath\{(\{[^{}[\]]*\})*\}"
    >>> gpathRegexCp=re.compile(gpathRegexPat, flags=re.I|re.U)
    >>> strpath=gpathRegexCp.search(r'\input{{whatever]{1}}\mypath{{sadf}{ad}}\shape{{0.2}{0.1}}').group()
    >>> strpath
    '\\mypath{{sadf}{ad}}'
    >>> p.findall(strpath)
    ['sadf', 'ad'] 
```

此时，我想，为什么不直接在原始字符串上使用 findall 呢？我可以使用: `gpathRegexPat=r"(?:\\mypath\{)(?:\{[^\{\}\[\]]*\})*?\{([^\{\}\[\]]*)\}(?:\{[^\{\}\[\]]*\})*?(?:\})"`: 如果第一个`(?:\{[^\{\}\[\]]*\})*?`匹配 0 次，第二个`(?:\{[^\{\}\[\]]*\})*?`匹配 1 次，它将捕获`sadf`；如果第一个`(?:\{[^\{\}\[\]]*\})*?`匹配 1 次，第二个匹配 0 次，它将捕获`ad`. 但是，它只会返回`['sadf']`这个正则表达式。

没有所有这些额外的模式（`(?:\\mypath\{)`和`(?:\})`），它实际上可以工作：

```
 >>> p2=re.compile(r'(?:\{[^\{\}\[\]]*\})*?\{([^\{\}\[\]]*)\}(?:\{[^\{\}\[\]]*\})*?')
    >>> p2.findall(strpath)
    ['sadf', 'ad']
    >>> p2.findall('{adadd}{dfada}{adafadf}')
    ['adadd', 'dfada', 'adafadf'] 
```

谁能向我解释这种行为？有没有更聪明的方法来达到我想要的结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T13:38:55.117

```
re.findall("{([^{}]+)}",text) 
```

应该管用

返回

```
['path1', 'path2', 'path3', 'pathn'] 
```

最后

```
my_path = r"\input{{whatever}{1}}\mypath{{path1}{path2}{path3}...{pathn}}\shape{{0.2}{0.3}}"
#get the \mypath part
my_path2 = [p for p in my_path.split("\\") if p.startswith("mypath")][0]
print re.findall("{([^{}]+)}",my_path2) 
```

甚至更好

```
re.findall("{(path\d+)}",text) #will only return things like path<num> inside {} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T13:38:18.487

你说的对。不能在组内返回重复的子组。要执行您想要的操作，您可以使用正则表达式来捕获组，然后使用第二个正则表达式来捕获重复的子组。

在这种情况下，这将是这样的：`\\mypath{(?:\{.*?\})}`. 这将返回`{path1}{path2}{path3}`

然后要找到该`{pathn}`字符串内部的重复模式，您可以简单地使用`\{(.*?)\}`. 这将匹配任何带有大括号的东西。是的`.*?`非贪婪版本`.*`，这意味着它将返回可能的最短匹配，而不是可能的最长匹配。

# macos - Mac 上的 SQLite3 升级

> ID：12640942
> 
> 赞同：3
> 
> 时间：2012-09-28T13:26:51.903
> 
> 标签：macos, shell, unix, sqlite, terminal

我使用以下内容在 10.6.8 上升级 SQLite 3。我现在在 /usr/bin/ 中安装了 3.6.12 版，在 /usr/local/bin/ 中安装了 3.7.14 版。这是安装它的最佳方式吗？

```
mkdir ~/tempFolder
cd ~/tempFolder
curl https://www.sqlite.org/sqlite-autoconf-3071400.tar.gz | tar xvz
cd sqlite-autoconf-3071400
autoconf
./configure
make
sudo make install 
```

如果没有，我应该怎么做才能修复它？最后，仅当我输入其路径 /usr/local/bin/sqlite3 时才会调用 SQLite 3.7.14。我已经读过，如果我更新路径，我可以通过简单地输入 sqlite3 来调用最新版本，因为它会首先在 /usr/local/bin/ 中查找。我还阅读了一些文章，说如果我没有通过 shell 发送所有命令，我需要更新 .profile 。像这样从 shell 和从 AppleScript 调用到 shell 调用最新版本的最佳方法是什么？还是简单地安装最新版本会更容易？

```
property databaseFolder : POSIX path of (path to public folder as text) & "Databases/"
property databaseName : "myDatabase"
property databasePath : quoted form of (databaseFolder & databaseName as text)
property table1 : "Main"

set xxx to do shell script "sqlite3 " & databasePath & " \"select * from " & table1 & "; \"" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T13:29:37.133

使用SQLite 提供的[预编译二进制文件。](https://sqlite.org/download.html)解压并在终端中运行：

```
$ cd folder_where_sqlite3_was_unpacked
$ ./sqlite3 
```

作为替代方案，从[MacPorts](http://www.macports.org/)安装 SQLite 。MacPorts 对安装很多 Un*x 工具很有用，不仅仅是 SQLite。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-25T03:06:05.053

二进制 zip 文件可能不是最佳选择。为了升级我的 sqlite3 安装，我下载了源包，例如 sqlite-snapshot-201707212031.tar.gz，在 temp 文件夹中解压，去那里做 make，然后是“make install”。要检查安装，请运行 sqlite3 命令并观察显示的版本。

# c# - 在后台线程上运行 Process.Start()？

> ID：12640943
> 
> 赞同：0
> 
> 时间：2012-09-28T13:26:52.840
> 
> 标签：c#

> **可能重复：**
> [如何在 .Net 中启动具有空闲优先级的进程](https://stackoverflow.com/questions/1374817/how-do-i-start-a-process-with-idle-priority-in-net)

如何在后台线程上运行 Process.Start 并赋予它高优先级？我在一个 wpf C# 应用程序中。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T13:29:46.120

开始一个过程

```
Process.Start() 
```

然后在启动后设置 PriorityClass。

关于从线程启动进程请参阅此链接：[异步进程启动并等待它完成](https://stackoverflow.com/questions/611094/async-process-start-and-wait-for-it-to-finish)

```
 ThreadPool.QueueUserWorkItem(delegate {
        Process process = Process.Start(startInfo);
        if(process.WaitForExit(timeout)) {
            // user exited
        } else {
            // timeout
        }
    }); 
```

# css - 页面元素在切换点击时向上移动

> ID：12640948
> 
> 赞同：0
> 
> 时间：2012-09-28T13:27:06.863
> 
> 标签：css, safari, toggle, slideshow

在 Safari（所有其他浏览器都没有这个问题）中，当我单击切换我的内容时，页面上的所有元素都会移到顶部。我发现它与 RefineSlide 冲突，因为当我删除该幻灯片的 CSS 时，问题就消失了。我已将其缩小到 CSS 中影响切换点击的两个部分：

```
.rs-slider > li {
list-style: none;
filter: alpha(opacity=0);
opacity: 0;
width: 100%;
height: 100%;
margin: 0 -100% 0 0;
padding: 0;
float: left;
position: relative;
}

.rs-thumb-wrap > a {
display: block;
float: left;
position: relative;
-moz-box-sizing: border-box;
-webkit-box-sizing: border-box;
box-sizing: border-box;
} 
```

我应该改变什么以使切换不会在 Safari 中向上移动？

# ios - iOS 委托崩溃

> ID：12640950
> 
> 赞同：0
> 
> 时间：2012-09-28T13:27:20.030
> 
> 标签：ios, delegates, crash

在我的应用程序中，我正在使用一个名为 ThumbDownloader 的类来实现延迟加载

要开始图像下载，我的 UITableView cellForRowAtIndexPath 方法调用此方法：

```
- (void)startIconDownload:(Product *)product forIndexPath:(NSIndexPath *)indexPath
{
    ThumbDownloader *thumbDownloader = [imageDownloadsInProgress objectForKey:indexPath];
    if (thumbDownloader == nil) 
    {
        thumbDownloader = [[ThumbDownloader alloc] init];
        thumbDownloader.product = product;
        thumbDownloader.imageSizeWidth = 87;
        thumbDownloader.imageSizeHeight = 87;
        thumbDownloader.indexPathInTableView = indexPath;
        thumbDownloader.delegate = self;
        [imageDownloadsInProgress setObject:thumbDownloader forKey:indexPath];
        [thumbDownloader startDownload];
        [thumbDownloader release];   
    }
} 
```

thumbdownloader 类在完成图片下载后，会调用我的主类 (listingView) 中的一个方法：

```
- (void)appImageDidLoad:(NSIndexPath *)indexPath 
```

问题是，如果我在图片下载时进入listingView并快速离开，应用程序会崩溃：

```
-[listingView appImageDidLoad:]: message sent to deallocated instance 0x3beed10 
```

这是我的dealloc

```
- (void)dealloc
{
    [myTable release], myTable = nil;
    [imageDownloadsInProgress release], imageDownloadsInProgress = nil;
    [spinView release], spinView = nil; 
    [mainView release], mainView = nil;
    [tableView release], tableView = nil;

    [myVs release], myVs = nil;
    [filteredVs release], filteredVs = nil;
    [toolBar release], toolBar = nil;

    [super dealloc];
} 
```

我试图遍历 imageDownloadsInProgress 中的 Thumbdownloader 实例以将它们的代表设置为 nil，但是当我尝试它也崩溃时......就像这样：

```
- (void)dealloc
{

    for(ThumbDownloader *thumbDownloader in imageDownloadsInProgress)
        if(thumbDownloader !=nil && thumbDownloader.delegate!=nil)
            thumbDownloader.delegate = nil;

    ..... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T13:55:27.403

如果您使用该代码将图像设置为 UIImageView，则应尝试使用`"UIImageView+AFNetworking.h"`AFNetworking 框架中的类别来解决此问题。你只需要设置`[image setImageWithUrl:@"http://myImage"];`

# java - 泛型代码中的错误扩展数字超整数？

> ID：12640953
> 
> 赞同：1
> 
> 时间：2012-09-28T13:27:30.233
> 
> 标签：java, generics, point

这段代码有一个错误，但我不知道如何纠正它：

```
public class Point<T extends Number super Integer>{
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T13:45:32.667

Super 仅对通配符有效，对命名类型参数无效。

让我们想象一下编译器允许这样做。只有两种类型可以说是对 Number 的扩展并且是 Integer 的超类型，它们是 Number 和 Integer。

我很难看到这样做会带来什么好处，而不是直接使用带有 int 字段的非泛型 Point 类型。

如果实际情况更复杂，并且您想要一个可以使用双精度、整数等的通用 Point，当然，如果 Number 限制有助于避免错误，请使用 T extends Number。

但是，仅使用 T extends Number 并不能让您访问 +、-、* 等。您可能需要类型类模式，这涉及从创建泛型类型的点传递一个单独的操作字典到数字运算发生的地方。

例如，

```
interface NumericOperations<T extends Number> {
    T plus(T x, T y);
    T subtract(T x, T y);
    T multiply(T x, T y);
    ...
} 
```

您需要定义该类型类的实例，例如 public static final NumericOperations intOperations = new NumericOper.....;

..并在Point的方法中传递这些实例以获取加号、减号等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T13:30:11.103

```
public class Point<T extends Number>{
} 
```

或这个

```
public class Point<T extends Integer>{
} 
```

你不能这样用`super`。见这里：[java泛型超级关键字](https://stackoverflow.com/questions/3847162/java-generics-super-keyword/3847321#3847321)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T09:58:24.363

您只能将`super`关键字与通配符一起使用。

你应该看看PECS原理：Provider Extends Consumer Super。

super 关键字用于消费者泛型对象的泛型方法中。

**例子 ：**

```
public void copyList(List<? extends Number> elementsToBeCopied, 
    List<? super Integer> listToBeFilled) {...} 
```

**备注：** `Integer`是final类，不能扩展，所以`extends`关键字不适用。

这篇[文章](http://yzaslavs.blogspot.fr/2010/07/generics-pecs-principle-step-by-step.html)展示了一个很好的例子，说明如何`super`以及`extends`可以使用。

# android - 安卓版 ImageMagic

> ID：12640956
> 
> 赞同：0
> 
> 时间：2012-09-28T13:27:51.013
> 
> 标签：android, imagemagick, android-ndk-r7

嗨，我尝试为 android 编译[https://github.com/lilac/Android-ImageMagick](https://github.com/lilac/Android-ImageMagick) 库，但它没有用。然后我发现了这个库[https://github.com/puelocesar/android-lib-magick](https://github.com/puelocesar/android-lib-magick)我不需要编译。当我运行此库时，它已安装在我的 Galaxy 4.1 设备上，但除了黑屏外没有显示任何内容，并且在一段时间后退出应用程序而不会在 log cat 中显示任何错误。谁能告诉我如何使这个库正常工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T12:07:25.370

[https://github.com/puelocesar/android-lib-magick](https://github.com/puelocesar/android-lib-magick)上的库正在运行。您只需要用输入文件的名称替换输入文件名，我猜这是丢失的，这似乎是您的问题背后的原因。

希望，这会帮助你。

# macos - Mac OS X：刷新服务菜单在终端中有效，但在安装后脚本中无效

> ID：12640959
> 
> 赞同：1
> 
> 时间：2012-09-28T13:28:18.050
> 
> 标签：macos, packagemaker

我有一个 OSX 应用程序为其他应用程序提供服务菜单。到目前为止，这工作正常，在用户安装应用程序并注销并重新登录后，菜单被激活并可用。（[见类似的帖子](https://stackoverflow.com/questions/3859747/how-do-i-automatically-activate-an-item-in-the-os-x-services-menu)）

我知道在触发服务菜单代理 (pbs) 以通过打开终端并运行 /System/Library/CoreServices/pbs 来扫描更改的服务时，注销和重新登录已过时（这也可以在没有新的情况下工作应用程序启动一次）

所以我想提供一个安装程序（.pkg），它运行“pbs”作为安装后脚本。令人惊讶的是，仅当应用程序在之前启动时才能在安装后运行“bps”，例如：#! /bin/sh

```
sleep 3
open /Applications/MyApp.app
sleep 3
/System/Library/CoreServices/pbs
exit 0 
```

不幸的是，（由于应用程序特定的原因）我不想直接从安装程序启动我的应用程序。有谁知道为什么安装后脚本的行为与终端不同？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T14:00:49.897

根据安装程序所需的权限，安装后脚本可能以 root 用户身份运行。尝试：

```
sleep 3
su -l "${USER}" -c "open /Applications/MyApp.app"
sleep 3
su -l "${USER}" -c "/System/Library/CoreServices/pbs"
exit 0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T15:07:06.883

最终，作为一种解决方法，我将隐藏我的应用程序并在运行之前再次停止它`pbs`。仍然期待更好的解决方案。

# arrays - 使用 Powershell，我如何计算数组中每个元素的出现次数？

> ID：12640962
> 
> 赞同：14
> 
> 时间：2012-09-28T13:28:21.717
> 
> 标签：arrays, powershell, scripting

如果我有一个数组：

> 1 1 1 2 2 3 4 4 4 4 5 5

如何使用 Powershell 告诉我该数组中有多少个元素？

为了更清楚一点，我应该为每个数组元素单独计数：

> **元素：计数**
> 
> 1:3
> 
> 2:2
> 
> 3:1
> 
> 4:4
> 
> 5:2

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-09-28T13:29:59.187

您可以使用`Group-Object`cmdlet：

```
PS> 1,1,1,2,2,3,4,4,4,4,5,5 | group

Count Name                      Group
----- ----                      -----
    3 1                         {1, 1, 1}
    2 2                         {2, 2}
    1 3                         {3}
    4 4                         {4, 4, 4, 4}
    2 5                         {5, 5} 
```

如果你想要一个项目及其计数的哈希表，你只需要`ForEach-Object`在它后面一点：

```
$array | group | % { $h = @{} } { $h[$_.Name] = $_.Count } { $h } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-28T14:08:27.687

您可以根据需要调整输出和格式化：

```
PS> $ht= 1,1,1,2,2,3,4,4,4,4,5,5 | Group-Object -AsHashTable -AsString
PS> $ht

Name                           Value
----                           -----
2                              {2, 2}
4                              {4, 4, 4, 4}
5                              {5, 5}
1                              {1, 1, 1}
3                              {3}

PS> $ht['1']
1
1
1 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-02-27T03:47:38.540

[Joey 的有用答案](https://stackoverflow.com/a/12640991/45375)提供了关键指针：**使用[`Group-Object`cmdlet](https://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.utility/group-object)按相等对输入对象进行分组。**
（要按一个或多个*属性值*对它们进行分组，请使用`-Property`）。

`Group-Object`输出[`[Microsoft.PowerShell.Commands.GroupInfo]`](https://docs.microsoft.com/en-us/dotnet/api/microsoft.powershell.commands.groupinfo)对象，每个对象代表一*组*相等的输入对象，其显着属性是：

*   `.Values`...定义组的值，作为一个实例（在手头的情况下`[System.Collections.ArrayList]`只有*1 个元素，因为输入对象**作为一个整体*用于形成组）。

*   `.Count`...该组中的对象数。

如果在这种情况下，不需要将单个组成员收集为每个组的一部分，
`-NoElement`则可以用于提高效率。

您可以根据需要自由地进一步处理组对象；要获得问题中规定的特定输出格式，您可以使用`Select-Object`计算[属性](https://stackoverflow.com/a/39861920/45375)。

把它们放在一起：

```
PS> 1, 1, 1, 2, 2, 3, 4, 4, 4, 4, 5, 5 | Group-Object -NoElement |
      Select-Object @{ n='Element:Count'; e={ '{0}:{1}' -f $_.Values[0], $_.Count } }

Element:Count
-------------
1:3
2:2
3:1
4:4
5:2 
```

# javascript - 如何调用 Javascript 函数

> ID：12640967
> 
> 赞同：1
> 
> 时间：2012-09-28T13:28:45.177
> 
> 标签：javascript, html

我的网页中有代码（见下文）。使用下面的代码，我在网页上获得了两个 flash mp3 播放器。

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title>Test</title>
    <script type="text/javascript" src="Contents/swfobject.js"></script>

    <script type="text/javascript">
    function stop() {
    document.getElementById("myId1").SetVariable("player:jsStop", "");}
    </script>    

</head>
<body>
<form id="form1" runat="server">
<table style="width:100%; text-align: center;">

<tr>
<td>

<script type="text/javascript">
swfobject.embedSWF("Contents/player_mp3_maxi.swf", "myId1", "250", "20", "9.0.0", false, false, {menu: "false",flashvars: "mp3=Contents/Sleep Away.mp3"}, false);
</script>

<div id="myId1" 
style="position: relative; width: 250px; height: 20px; ">
</div>

</td>
</tr>

<tr>
<td>

<script type="text/javascript">
swfobject.embedSWF("Contents/player_mp3_maxi.swf", "myId2", "250", "20", "9.0.0", false, false, {menu: "false",flashvars: "mp3=Contents/Kalimba.mp3"}, false);
</script>                

<div id="myId2" 
style="position: relative; width: 250px; height: 20px; ">
</div>

<br />              
<a href="javascript:stop()">Stop</a>        

</td>
</tr>

</table>
</form>
</body>
</html> 
```

上面的代码工作正常，我现在只需要一个 Flash mp3 播放器一次播放音频。例如，如果我单击 flash plyer 2，则 falsh player 1 应该停止，反之亦然。我可以使用以下代码通过单击事件停止 Flash 播放器，但这并不能满足我的需要。

我在 head 标签中放了下面的函数

```
 <script type="text/javascript">
    function stop() {
    document.getElementById("myId1").SetVariable("player:jsStop", "");}
    </script> 
```

这在body标签中

```
<a href="javascript:stop()">Stop</a> 
```

可以请任何朋友告诉我，我怎样才能通过上述停止功能实现我所需要的。或者我应该把这段代码放在哪里，所以当我点击 fash player 2 时，fash player 1 应该停止播放音频。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T13:38:22.670

只让其中一个玩家在页面加载时开始。然后，制作一个将在单击其中一个玩家时运行的处理程序。如果点击来自 player1，他们会停止它并启动 player2（反之亦然）。

# crystal-reports - 如何在水晶报表的页眉中添加图表

> ID：12640969
> 
> 赞同：3
> 
> 时间：2012-09-28T13:28:52.313
> 
> 标签：crystal-reports, crystal-reports-2008

我试图在水晶报表的页眉中添加图表，但它仅在报表页眉和报表页脚中添加。如何在页眉中添加图表？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-28T13:31:23.460

您不能在页眉或详细信息部分中有图表；图表仅在报表页眉或页脚中起作用。

如果您需要页眉中的图表，请在页眉中创建一个子报表，并将该图表放在子报表中。

# c# - 使用 C# 或 asp.net 使用 Append bytes[] 将许多 Pdf 合并为单个 pdf

> ID：12640972
> 
> 赞同：0
> 
> 时间：2012-09-28T13:29:01.043
> 
> 标签：c#, asp.net

**问题：**

1.  我的数据表中有字节数组。
2.  每个`byte[]`都是一个订单的单个 pdf 文件。
3.  我只想将所有这些 pdf文件`byte[]`放在一个`byte[]`文件中。

我只是想把它保存到浏览器中。

我可以实现附加`byte[]`，但它会创建一个`byte[]`数据为 pdf。

下面是我在控制台应用程序中所做的示例，实际上我想要在我的 Web 应用程序中。

这是我的代码：

```
public void NewPdf(string[] Pdf)
{

    byte[] newPdf;
    MemoryStream ms = new MemoryStream();
    foreach (var onepdf in Pdf)
    {
        newPdf = System.IO.File.ReadAllBytes(onepdf);
      //newPdf=System.Convert.FromBase64String(onepdf);
      // int resultPdf = newPdf.Length;
      // ms.Write(newPdf, 0, newPdf.Length);
      // var ms = new MemoryStream(new byte[resultPdf], 0, resultPdf, true, true);
       ms.Write(newPdf, 0, newPdf.Length);
       //ms.Write(baadF00d, 0, baadF00d.Length);

       //System.Buffer.BlockCopy(newPdf, 0, resultPdf, 0, newPdf.Length);
    }
    byte[] merged = ms.GetBuffer();
   // File.WriteAllBytes("testpdf.pdf", merged);
    PdfReader reader = new PdfReader(merged);
    int n = reader.NumberOfPages;
    Document document = new Document(reader.GetPageSizeWithRotation(1));
    PdfWriter writer = PdfWriter.GetInstance(document, new FileStream("thugs.pdf", FileMode.Create));
    document.Open();
    PdfContentByte cb = writer.DirectContent;
    PdfImportedPage page;
    int rotation;
    int i = 0;
    while (i < n)
    {
        i++;
        document.SetPageSize(reader.GetPageSizeWithRotation(i));
        document.NewPage();
        page = writer.GetImportedPage(reader, i);
        rotation = reader.GetPageRotation(i);
        if (rotation == 90 || rotation == 270)
        {
            cb.AddTemplate(page, 0, -1f, 1f, 0, 0, reader.GetPageSizeWithRotation(i).Height);
        }
        else
        {
            cb.AddTemplate(page, 1f, 0, 0, 1f, 0, 0);

        }
    }
    reader = new PdfReader(merged);
    // we retrieve the total number of pages
    n = reader.NumberOfPages;
    document.Close();

} 
```

其实我正在尝试在asp.net mvc2中做......

我可以`byte[]`在 mvc2中返回

```
return File(bytes, mimeType); 
```

# perl - 构建发行版后两个单独的 META 文件的目的是什么？

> ID：12640973
> 
> 赞同：5
> 
> 时间：2012-09-28T13:29:07.087
> 
> 标签：perl, cpan, perl-module

构建新发行版时会生成 2 个元文件。一种使用 YAML 格式，另一种使用 JSON。据我所知，这些仅由其他 CPAN 客户端或其他想要访问元文件（无论出于何种原因）的应用程序使用。我试图解释为什么一个应用程序需要同时访问这两者......

这两种格式是为了方便而单独生成的吗？即开发人员 1 更喜欢 JSON，因此对他的应用程序进行编码以读取分发 META.json 文件，而开发人员 2 讨厌 JSON，宁愿使用 YAML 版本？

或者因此我忽略的单个客户端/应用程序都需要一些技术原因？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-28T14:47:02.823

原因是[CPAN 元规范](https://www.metacpan.org/module/CPAN::Meta::Spec)有两个版本，最新版本指定 JSON 而不是 YAML。保留 YAML 文件是为了保持与预期它们的旧工具的兼容性，但任何未来的元数据功能都将添加到 JSON 版本中。

David Golden 在他宣布规范第 2 版的[博客文章](http://www.dagolden.com/index.php/759/cpan-meta-spec-version-2-released/)中讨论了从 YAML 到 JSON 的变化。

# jquery - 如何引用 JSON？

> ID：12640985
> 
> 赞同：0
> 
> 时间：2012-09-28T13:29:34.123
> 
> 标签：jquery, json

我有以下代码：

```
$.getJSON('data.json', function(data) {
  var items = [];

  $.each(data, function(key, val) {
    items.push('<option id="' + key + '">' + val + '</option>');
  });

  $('<select/>', {
    'class': 'my-new-list',
    html: items.join('')
  }).appendTo('body');
}); 
```

这适用于简单的 JSON 文件，但我有一些更复杂的数据（这就是给我的方式）：

```
{
   "Shares": [
   {
      "shareName": "Frontier",
      "shareID": "FML"
   },
   {
      "shareName": "Global Petroleum",
      "shareID": "GBP"
   },
   {
      "shareName": "Tower Petroleum",
      "shareID": "TRP"
   },
   {
      "shareName": "Aquarius Platinum",
      "shareID": "AQP"
   }
   ]
} 
```

这只是填充了一个下拉菜单，我应该如何修改语法以便读取共享中每个的“ShareName”？

谢谢！

谢谢大家的回答，我只能选择一个所以选择了第一个回复，但我真的很感谢大家的意见！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T13:31:10.657

首先，您将不得不迭代`data.Shares`。注意大写`S`；JavaScript 区分大小写。

您还必须引用`shareName`and`shareID`属性，而不仅仅是键和值。

```
 $.each(data.Shares, function(_, val) {
    items.push('<option id="' + val.shareID + '">' + val.shareName + '</option>');
  }); 
```

为了巩固理解，您所拥有的是一个对象 ( `data`)，它具有一个属性 ( `Shares`)，它是一个对象数组。该数组中的每个对象都有 2 个属性；`shareID`和`shareName`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T13:35:05.807

Iterate over `data.Shares`，但我建议`<option>`直接创建元素而不是通过连接 HTML 来确保正确转义任何元字符：

```
$select = $('<select/>', {
    'class': 'my-new-list',
});

$.each(data.Shares, function(index, val) {
    $('<option>', {
       id: val.shareID, val: val.shareID, text: val.shareName
    }).appendTo($select);
});

$select.appendTo('body'); 
```

请注意，我还将共享 ID 放入`<option>`值中，以便您可以在后端使用该缩写标记而不是完整的共享名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T13:32:50.173

解析后，它是一个 javascript 对象，因此不是迭代数组，而是迭代由`Shares`字段命名的数组：

```
$.each(data.Shares, function(key, val) {
  items.push('<option id="' + val.shareID + '">' + val.shareName + '</option>');
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T13:35:04.180

```
 $.each(data.Shares, function(val) {
         items.push('<option id="' + val.ShareId+ '">' + val.ShareName+ '</option>');
    }); 
```

# linux - 如何在 perl 中使用 O_ASYNC 和 fcntl？

> ID：12640993
> 
> 赞同：4
> 
> 时间：2012-09-28T13:30:05.427
> 
> 标签：linux, perl, asynchronous, fcntl

我想使用 O_ASYNC 选项，当管道可以读取时，SIGIO 的处理程序将运行。

但以下代码不起作用。任何人都可以帮助我吗？

```
#!/bin/env perl
use Fcntl;
 $SIG{IO}= sub {
   print "catch SIGIO!\n";
};

my $flags=0;

open(FH,"-|","sleep 4 ;echo aaa") or die "$!";

fcntl(FH,F_GETFL,$flags) or die "$!";
fcntl(FH,F_SETFL,$flags | O_NONBLOCK | O_ASYNC) or die "$!";

sleep(5);

print  "complete\n"; 
```

我的 perl 版本是 5.16.1，操作系统是 Redhat 5u4，内核 2.6.18，x86_64

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-29T17:13:31.273

在 Linux 下，您必须同时请求异步通知 (O_ASYNC) 并指定接收者 (F_SETOWN)。因此，您只需在示例中添加一行即可使其工作：

```
#!/bin/env perl

use Fcntl;

$SIG{IO}= sub {
   print "catch SIGIO!\n";
};

my $flags=0;

open(FH,"-|","sleep 4 ;echo aaa") or die "$!";

fcntl(FH,F_GETFL,$flags) or die "$!";
fcntl(FH,F_SETFL,$flags | O_NONBLOCK | O_ASYNC) or die "$!";
fcntl(FH,F_SETOWN,0 + $$) or die "$!";  # <-- Note that we force $$ to be numeric

sleep(5);

print  "complete\n"; 
```

运行上述：

```
$ perl so-12640993.pl
catch SIGIO!
complete 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T17:10:36.453

`SIGIO`基于异步 IO 是边沿触发的，而不是电平触发的。

在任何文件句柄向您发送之前，`SIGIO`您必须先“武装”它。为此，您需要执行任何操作（`sysread()`在这种情况下），直到获得`undef`/ `EAGAIN`。此时，文件句柄现在将被武装起来，`SIGIO`并在下一次准备就绪时发送信号。然后，您可以阅读它，直到它产生`EAGAIN`，这将再次武装它。

# console-application - 自动重启控制台应用程序

> ID：12640995
> 
> 赞同：2
> 
> 时间：2012-09-28T13:30:11.760
> 
> 标签：console-application, application-restart

我正在寻找与 Application.Restart() 等效的控制台应用程序，但似乎找不到执行此操作的方法。

其他人建议当我需要重新启动时，只需使用 Args 调用我的 Sub Main。但是，我需要物理重新启动应用程序的功能的原因是因为我要做的第一件事是检查更新并安装它们（如果有可用的话）。

更新技术本身完美运行，系统会安装新的更新，但更改要等到下次应用程序明显运行时才会生效。

由于该应用程序是作为计划任务从批处理文件运行的，因此我发布的任何更新都不会在两周内生效！

我在 Windows 窗体应用程序中遇到了同样的问题，但是调用 Application.Restart 的能力允许立即进行更改。创建控制台应用程序时可以实现相同的功能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T13:42:20.497

2 我能想到的可能性。

第一个启动应用程序的另一个实例并使用类似的方法关闭当前实例

```
System.Diagnostics.Process.Start(ProcessStartInfo startInfo) 
```

和

```
Environment.Exit(int exitCode) 
```

其次，如果由于某些原因无法同时运行 2 个实例，您可以创建另一个由批处理启动的应用程序。让它运行您的应用程序，并让它在更新过程完成时获取信息，以便它可以首先关闭当前应用程序，然后运行另一个