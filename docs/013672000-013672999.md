# StackOverflow 问答 13672000-13672999

# twitter-bootstrap - Bootstrap 2.2.1 Tabbable 选项卡不起作用

> ID：13672002
> 
> 赞同：1
> 
> 时间：2012-12-02T17:51:22.963
> 
> 标签：twitter-bootstrap, tabs

我正在使用引导程序 2.2.1，并且“可选项卡”选项似乎不起作用。即使我使用他们自己的模板（例如，带有固定顶部导航栏的简单“入门模板”）并将他们自己的标签代码粘贴到我的 html 中，他们也不会响应。选项卡在页面中呈现良好，它们只是没有响应。该代码在旧版本的引导程序中对我有用——事实上，新网站的代码几乎相同。非常感谢任何帮助，谢谢！

这是代码：

```
 <!DOCTYPE html>
    <html lang="en">
    <head>
    <meta charset="utf-8">
    <title>N.C</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the bottom of the topbar */
      }

      .container {
        width: auto;
        max-width: 800px;
      }

      .nhc {
        font-family: lucida sans;
        font-color: white;
      }

      #footer {
        text-align: right;

        border-top-width: 1px;
        border-top-color: #990000;
      }

    </style>

    <style type="text/css">

    #footer {
      color: #c4c1ba;
    }

    </style>

    <link href="bootstrap-responsive.css" rel="stylesheet">

    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Fav and touch icons -->
    <link rel="shortcut icon" href="../assets/ico/favicon.ico">
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="../assets/ico/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../assets/ico/apple-touch-icon-114-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../assets/ico/apple-touch-icon-72-precomposed.png">
    <link rel="apple-touch-icon-precomposed" href="../assets/ico/apple-touch-icon-57-precomposed.png">
  </head>

  <body>

    <div class="container">
        <div class="page-header">
          <div class="nhc">
          <h1>N.C</h1>
          </div>
        </div>
        <p class="lead">Pin a fixed-height footer to the bottom of the viewport in                    desktop browsers with this custom HTML and CSS.</p>
      </div>
    </div>

    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">

          <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>

          <div class="nav-collapse collapse">
            <ul class="nav">
              <li><a href="#Home">Home</a></li>
              <li class="active"><a href="#About">About</a></li>
              <li><a href="#contact">Contact</a></li>
            </ul>
          </div><!--/.nav-collapse -->

          <div class="container" id="footer">
            <h4>NC</h4>
            <div id="footer">
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="container">
      <img src="mirror.jpg">
    </div>

    <div class="container">
      <div class="tabbable"> <!-- Only required for left/right tabs -->
        <ul class="nav nav-tabs">
          <li class="active"><a href="#tab1" data-toggle="tab">Section 1</a></li>
          <li><a href="#tab2" data-toggle="tab">Section 2</a></li>
        </ul>
        <div class="tab-content">
          <div class="tab-pane active" id="tab1">
            <p>I'm in Section 1.</p>
          </div>
          <div class="tab-pane" id="tab2">
            <p>Howdy, I'm in Section 2.</p>
          </div>
        </div>
      </div>
    </div>

    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="jquery-1.8.3.min.js"></script>
    <script src="bootstrap-transition.js"></script>
    <script src="bootstrap-alert.js"></script>
    <script src="bootstrap-modal.js"></script>
    <script src="bootstrap-dropdown.js"></script>
    <script src="bootstrap-scrollspy.js"></script>
    <script src="bootstrap-tab.js"></script>
    <script src="bootstrap-tooltip.js"></script>
    <script src="bootstrap-popover.js"></script>
    <script src="bootstrap-button.js"></script>
    <script src="bootstrap-collapse.js"></script>
    <script src="bootstrap-carousel.js"></script>
    <script src="bootstrap-typeahead.js"></script>
    <script src="bootstrap.js"></script>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T07:42:10.967

只需在代码中添加这两行..

```
<script src="bootstrap/js/bootstrap.js"></script>

<script src="bootstrap/docs/assets/js/bootstrap-tab.js"></script> 
```

# java - 小程序程序执行

> ID：13672003
> 
> 赞同：0
> 
> 时间：2012-12-02T17:51:36.523
> 
> 标签：java, applet

```
import java.awt.*;
import java.applet.*;
public class Appletdemo extends Applet
{
TextField text1,text2;
public void init()
    {
    text1=new TextField(10);
    text2=new TextField(10);
    add(text1);
    add(text2);
    text1.setText("");
    text2.setText("");
    }
    public void paint(Graphics g)
    {
    int z=0,x=0,y=0;
    String s1,s2,s;
    g.drawString("input no in each textbox",10,50);
    try
    {
    s1=text1.getText();
    x=Integer.parseInt(s1);
    s2=text2.getText();
    y=Integer.parseInt(s2);
    }
    catch(Exception e)
    {
    }
    z=x+y;
    s=String.valueOf(z);
    g.drawString("The sum is",10,80);
    g.drawString(s,100,80);
    }
    public boolean action(Event event,Object object)
    {
    repaint();
    return true;
    }
    } 
```

这是我试图了解的代码

```
 public boolean action(Event event,Object object)
    {
    repaint();
    return true;
    } 
```

为什么我们在我们的程序中使用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T17:55:06.433

这是`Action`在使用`ActionListeners`.

在 Java 1.0 中只有一类事件，即`java.awt.Event`. 每个事件都是由一个组件生成的。该模型的一个主要问题是事件只能由生成它的组件或包含原始组件的容器之一处理。

在 Java 1.1 风格的事件处理（使用*事件监听器*）中，称为[委托事件模型](http://docs.oracle.com/javase/1.3/docs/guide/awt/designspec/events.html)带来了显着的改进。在这里，事件仅发送到正在侦听事件的对象，从而提高了事件处理的效率。

请参阅：[Java 1.0 事件模型](http://math.hws.edu/eck/cs124/javanotes3/c6/s7.html)

# c++ - 在 C++ 程序中使用内核编程函数

> ID：13672007
> 
> 赞同：1
> 
> 时间：2012-12-02T17:51:42.663
> 
> 标签：c++, linux-kernel, kernel

我是该领域的新手，并且正在编写 C++/汇编代码来对时钟周期中的一段代码进行基准测试（测量执行时间）。我需要通过我的代码禁用抢占和硬中断。我知道 linux 内核开发允许使用**preempt_disable()**；&raw_local_irq_save(flags) 函数来做同样的事情。

我的问题是我不是在编写内核模块，而是在用户空间中编写普通的 C/C++ 程序。我可以通过我的 C++ 代码（即来自用户空间/无内核模块）使用这些系统调用吗？我应该包含哪些头文件。如果是。有人可以给我阅读参考资料或例子吗？

谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T18:12:40.013

您不能从用户级应用程序中执行此操作，尤其是禁用硬件中断，这为许多基本内核功能（如计时）提供了基础。

相反，您可以做的是[`sched_setscheduler(2)`](http://www.kernel.org/doc/man-pages/online/pages/man2/sched_setscheduler.2.html)设置`SCHED_FIFO`实时优先级，即要求内核不要抢占您的应用程序，直到它自愿释放 CPU（通常是系统调用）。不过要小心 - 您可以通过这种方式轻松锁定系统。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T18:06:35.113

Usually that is impossible. The kernel will not let you block interrupts.

But assigning yourself a very high prio is usally good enough. Plus, make sure the benchmarked code runs long enough, e.g. by running it 10000 times in a loop. That way, some interrupts don't matter in the overall cycle counting. In my experience a code run time of 1 second is good enough (provided your system is not under heave stress) for home-brewn benchmarking.

# performance - 如何在 mono/xsp 下配置我的 Web 应用程序？

> ID：13672009
> 
> 赞同：2
> 
> 时间：2012-12-02T17:51:47.557
> 
> 标签：performance, mono, profiling, profiler, xsp

所以我有一个在 mono/xsp4 下运行的 ASP.Net Web 应用程序（无论如何都在开发中）。如何分析我的网络应用程序以查看导致它运行缓慢的原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T05:28:12.910

无论您的特定环境和编程语言如何，如果您有“标准”网络日志，其中包含：

> *   访问的 URL 和
> *   他们经过的响应时间

您可以使用我昨天发布的这个 SO 问题中概述的通用和平台/语言独立方法：

[分析多层分布式 Web 应用程序（服务器端）](https://stackoverflow.com/questions/15178903/profiling-a-multi-tiered-distributed-web-application-server-side)

# spring - 删除失败后Jpa保存实体

> ID：13672015
> 
> 赞同：0
> 
> 时间：2012-12-02T17:52:19.643
> 
> 标签：spring, hibernate, jpa, transactions, spring-data

我正在尝试删除一个实体，如果由于约束而无法删除它，我想将其标记为逻辑删除。

这是我的代码：

```
 @Transactional
  public void removeEntity(EntityDto e) {

    Entity entity = entityRepository.findOne(e.getId());

    try {
      entityRepository.delete(e.getId());
      entityRepository.flush();

    } catch (DataIntegrityViolationException ex) {
      logger.debug("Logical removal");

      entity.setLogicalRemovalDate(new Date());
      entityRepository.save(entity);
    }
  } 
```

调用 save() 方法后，我得到了这个异常：

```
org.springframework.dao.InvalidDataAccessApiUsageException: org.hibernate.ObjectDeletedException: deleted instance passed to merge 
```

有什么办法可以实现这个功能吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T22:15:17.110

并非没有在新事务中使用新的 Hibernate 会话来执行此操作。[文档](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html_single/#transactions-demarcation-exceptions)说：

> 如果 Session 抛出异常，包括任何 SQLException，立即回滚数据库事务，调用 Session.close() 并丢弃 Session 实例。Session 的某些方法不会使会话保持一致状态。Hibernate 抛出的任何异常都不能被视为可恢复的。

在尝试删除实体之前，您可能应该检查是否没有其他实体引用要删除的实体。或者干脆总是在逻辑上删除它，因为这似乎是你为引用的实体所做的事情。

# java - 数据库分片和 JPA

> ID：13672019
> 
> 赞同：13
> 
> 时间：2012-12-02T17:52:38.050
> 
> 标签：java, hibernate, jpa, openjpa, sharding

我正在开发一个需要对不同 PostgreSQL 服务器[中的数据进行水平分区的Java 应用程序。](http://en.wikipedia.org/wiki/Shard_%28database_architecture%29)我想使用 JPA 框架和 Spring 进行事务管理。

最流行的使用 JPA 分片数据的框架似乎是[Hibernate Shards](http://www.hibernate.org/subprojects/shards.html)，它似乎不再处于开发阶段，以及[OpenJPA](http://openjpa.apache.org/) [Slice](http://www.ibm.com/developerworks/java/library/os-openjpa/index.html)，它不支持虚拟分片（我的要求之一）。有没有我遗漏的其他选项，或者绕过 OpenJPA 限制的方法？

提前感谢您的意见！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-07-13T02:30:58.660

你可以看看[Sharding-JDBC](https://github.com/dangdangdotcom/sharding-jdbc)，它是一个用于分片数据库和表的 JDBC 驱动程序，可以适配任何 ORM 框架。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T05:36:42.473

你看过 EclipseLink 吗？它支持 JPA2 和水平分片。

[文档](http://wiki.eclipse.org/EclipseLink/Examples/JPA/Partitioning)说它支持对多个数据库实例进行分片

# jquery - jquery click 只触发一次

> ID：13672021
> 
> 赞同：6
> 
> 时间：2012-12-02T17:52:48.677
> 
> 标签：jquery

通过查看其他帖子，我尝试将 live() 和 on() 添加到我的代码中，但点击功能只能工作一次，然后就不再工作了。有人可以指出我做错了什么。这是我的最新代码：

```
<script language="javascript">
//Used to delete a step from the database after confirming with user
$(document).ready(function(){
    $("#success_message2").hide();
    $(".delete_it").on('click',function() {
    var answer = confirm('Are you sure you want to delete this step?');
    if (answer){
          var data = {
              'hospid': '<? echo $hospid; ?>',
              "step_id" : $(this).parent().attr("name")
              }; 
        $.post("../php/progress_steps_delete.php",
                data,
                function (data) {
                    if (data.success) {
                        $("#success_message2").show('slow');
                        setTimeout(function () {
                            $("#success_message2").hide('slow');
                        }, 5000);
                        $('#step_list').html(data.success);
                    } else {
                        alert('not done');
                        $("#non-grid").prepend(data.error);
                    }
                }, "json");
    }
});
});
</script> 
```

抱歉，这是html

```
<body>
<div id="body-wrapper">
  <?php include_once(getBasePath()."site_hospital_files/elements/navbar.php"); ?>
  <div id="main-content">
    <div class="content-box">
      <div class="content-box-header">
        <h3>Progress Steps</h3>
      </div>
      <div class="content-box-content">
        <div class="msg-status div_message" id="success_message">New step added successfully!</div>
        <div class="msg-status div_message" id="success_message1">New List Order Updated!</div>
        <div class="msg-status div_message" id="success_message2">Step Deleted!</div>
        <div id="non-grid">
          <form method="post" name="upload_form" id="upload_form">
            <fieldset style="height:100px;  margin-left:25px; margin-top:15px; background-color:#FFF;">
              <legend style="padding:2px;">Add a Step</legend>
              <div class="column-left" style="width:50%;">
                <label class="space">Step Name</label>
                <input class="text-input tall-input required alnum" type="text" id="step_add" name="step_add" style="width:90%;"/>
              </div>
              <div class="column-left" style="width:20%; padding-top:25px;">
                <input type="hidden" name="hosp" id="hosp" value="<? echo $hospid; ?>"/>
                <input type="submit" id="snd_upload" name="snd_upload" value="Submit Step" class='button'  />
              </div>
            </fieldset>
          </form>
          <form name="delete_form" method="post" id="delete_form">
            <fieldset style="height:100%;  margin-left:25px; margin-top:15px; background-color:#FFF;">
              <legend style="padding:2px;">List of Steps</legend>
              <h3>Drag and Drop to Change Step Order</h3>
              <input type="hidden" name="hosp" id="hosp" value="<? echo $hospid; ?>"/>
              <div id="step_list">
              <? echo $step_list ?>
              </div>
            </fieldset>
          </form>
        </div>
      </div>
    </div>
    <div class="clear"></div>
    <div id="footer">&#169; Copyright 2012  Inc. | <a href="#">Top</a></div>
  </div>
</div>
</body> 
```

好的，第二次编辑，我想我开始理解这里的问题了。这是生成我的列表的 php。我点击的元素被埋在容器中。我不想点击整个容器，只是里面的图像。那可能吗？感谢您迄今为止的所有建议。我在学....

```
function getSteps($dbh, $hospid)
{
    $sql1 = $dbh->prepare('
    SELECT COUNT(*) 
    FROM progress_steps
    WHERE hospital_id = :hospid
    ');
    $sql1->bindValue('hospid', $hospid);
    $sql1->execute();   
    $num_rows = $sql1->fetchcolumn();

    $sql = $dbh->prepare('
    SELECT * 
    FROM progress_steps
    WHERE hospital_id = :hospid
    ORDER BY step_number
    ');
    $sql->bindValue('hospid', $hospid);
    $sql->execute();
    if ($num_rows > 0) {
        $steps_table = '';
        $isOdd           = true;
        while (($row = $sql->fetch(PDO::FETCH_ASSOC)) !== false) {
            $steps_table .= "<div class='hover_hand' name='$row[step_id]' id='item_$row[step_id]'><div style='float:left' class='delete_it'><img src='../images/delete_icon.gif'></div> <div style='float:left' class='middle_text'>&nbsp;&nbsp;&nbsp;&nbsp;$row[step_name]</div><input type='hidden' name='itemid[]' value='$row[step_id]'/></div>";
        };
     } else {
        $steps_table = '';
            $steps_table .= "<div>You need to add steps.</div>";
    };
    return $steps_table;
} 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-02T18:09:32.883

我假设（*通过您的代码*）该`.delete_it`项目位于`#step_list`元素内。

因此，当您将其 html 替换为 ajax 结果时，您也会删除绑定的处理程序。

您需要将处理程序绑定到 DOM 层次结构中不会被删除的元素，例如它`#step_list`本身..

所以改变绑定从

```
$(".delete_it").on('click',function() { 
```

到

```
$("#step_list").on('click','.delete_it', function() { 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-02T18:02:22.393

从这里很难看到。你介意分享 HTML 吗？不知道 data.success 包含什么也不容易。.html(data.success) 是否以任何方式影响删除按钮？

你确定你做了 .live() 对吗？

```
$('.delete_it').live("click",function(){

}); 
```

如果您能提供更多信息，我可能会提供帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-02T18:04:58.853

事件绑定到 DOM 节点。如果您要绑定的 DOM 被删除，则关联的事件也可能会被删除。您可以解决此问题，也可以利用 DOM 事件的“冒泡”性质。例如，假设我的 HTML 是这样的：

```
<div id="container">
  <div class="item delete_me_on_click"></div>
  <div class="item delete_me_on_click"></div>
  <div class="item delete_me_on_click"></div>
</div> 
```

我可以做的是绑定到`#container`或`document`监听任何点击事件并检查事件的目标以查看我是否要采取行动。上述 HTML 的一个示例：

```
$('#container').on('click', function (event) {
    var target = $(event.target);
    if (target.hasClass('delete_me')) {
        target.remove();
    }            
});​ 
```

这与以下内容相同：

```
$('#container').on('click', '.delete_me', function (event) {
    $(event.target).remove();      
});​ 
```

或者我什至可以在文档级别收听：

```
$(document).on('click', '.delete_me', function (event) {
    $(event.target).remove();      
});​ 
```

这是一个工作示例：http: [//jsfiddle.net/Kcapv/](http://jsfiddle.net/Kcapv/)

请注意，`event.stopPropagation()`如果在子节点上使用将阻止事件冒泡，因此如果您尝试这种方法，则需要小心注意[stopPropagation](http://api.jquery.com/event.stopPropagation/)的使用。

# linux - 语法错误：使用 Bash 时需要操作数

> ID：13672022
> 
> 赞同：4
> 
> 时间：2012-12-02T17:52:52.327
> 
> 标签：linux, bash, for-loop

我有两个要循环的数组。我正确地构造了它们，在进入 for 循环之前，我会回显它们以确保数组一切正常。但是当我运行脚本时，它会输出一个错误：

```
l<=: syntax error: operand expected (error token is "<=" 
```

我咨询了强大的谷歌，我知道它缺乏第二个变量，但我之前提到过我确实回应了这些值，一切似乎都很好。这是片段..

```
#!/bin/bash
    k=0
    #this loop is just for being sure array is loaded
    while [[ $k -le ${#hitEnd[@]} ]] 
      do
      echo "hitEnd is: ${hitEnd[k]} and hitStart is: ${hitStart[k]}"
      # here outputs the values correct 
      k=$((k+1))
    done
    k=0
    for ((l=${hitStart[k]};l<=${hitEnd[k]};l++)) ; do //this is error line..
        let array[l]++      
        k=$((k+1))
done 
```

for 循环中的变量已正确回显，但 for 循环不起作用..我错在哪里？

#

正如 gniourf_gniourf 回答的那样：

> “...在某个时刻，k 将达到 ${#hitEnd[@]} 的值，而这正是没有定义 hitEnd[k] 并扩展为空字符串的时候！砰！”

意思是错误输出不是在循环开始时显示，而是当 k 的值大于数组的索引时，指向数组不包含的索引...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T18:15:16.573

那是因为在某些时候`${hitEnd[k]}`扩展为空（它是未定义的）。我得到同样的错误`((l<=))`。您应该将`for`循环编写为：

```
k=0
for ((l=${hitStart[0]};k<${#hitEnd[@]} && l<=${hitEnd[k]};l++)); do 
```

以便始终具有`k`与数组中定义的字段相对应的索引`${hitEnd[@]}`。

此外，而不是

```
k=$((k+1)) 
```

你可以写

```
((++k)) 
```

完毕！

您的脚本使用更好的现代 bash 实践进行了修改：

```
#!/bin/bash
k=0
#this loop is just for being sure array is loaded
while ((k<=${#hitEnd[@]})); do
    echo "hitEnd is: ${hitEnd[k]} and hitStart is: ${hitStart[k]}"
    # here outputs the values correct 
    ((++k))
done
k=0
for ((l=hitStart[0];k<${#hitEnd[@]} && l<=hitEnd[k];++l)); do
    ((++array[l]))
    ((++k))
done 
```

现在，我不太确定`for`循环是否完全符合您的要求...您不是说这个吗？

```
#!/bin/bash
# define arrays hitStart[@] and hitEnd[@]...
# define array array[@]

#this loop is just for being sure array is loaded
for ((k=0;k<${#hitEnd[@]};++k)); do
    echo "hitEnd is: ${hitEnd[k]} and hitStart is: ${hitStart[k]}"
    # here outputs the values correct 
    ((++k))
done

for ((k=0;k<${#hitEnd[@]};++k)); do
    for ((l=hitStart[k];l<=hitEnd[k];++l)); do
        ((++array[l]))
    done
done 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T18:15:23.867

有点创可贴，但是您将 for 循环重写为 while 循环：

```
l="${hitStart[k]}"
while [[ "$l" -le "${hitEnd[k]}" ]]; do
        let array[l]++      
        k=$((k+1))
        l=$((l+1))
done 
```

# ios - cocos2d：我的应用程序崩溃但 XCode 没有给我任何崩溃报告

> ID：13672028
> 
> 赞同：0
> 
> 时间：2012-12-02T17:53:07.557
> 
> 标签：ios, cocoa-touch, crash, cocos2d-iphone, stack-trace

它曾经工作正常，但现在我在加载某个场景时收到此消息，然后 APP 崩溃。

```
2012-12-01 18:33:55.104 AppName[9561:707] cocos2d: CCSpriteFrameCache: Trying to use file 'art1-hd.png' as texture 
```

我不知道从哪里开始调试它。有没有办法获得更精确的错误信息来理解为什么会发生这种情况？

顺便说一句，我已经将我的代码签名身份更改为开发人员，除了上面的普通消息之外，XCode 还没有在控制台上给我任何痕迹。我还检查了 Xcode-Organizer 部分的设备日志，但没有任何痕迹。

我希望在 Java + Eclipse 中有类似的东西，在那里我可以获得崩溃发生位置的精确 STACKTRACE。

**关于如何获得精确的堆栈跟踪的任何建议（例如，使用生成崩溃的函数名）？**

PS：我在 DEBUG 中将条带调试符号设置为“NO”，在 Release 中设置为“YES”，但我在自己的测试 iPod 上构建，因此我认为它是为“Debug”自动构建的（该部分说 build for运行和测试令人困惑，因为项目设置只允许调试和发布）。但我认为问题不在这里.. 而是在 PS 之前的上述问题中：

编辑：如果我查看调试导航器，我看不到任何方法的堆栈跟踪，但只是线程。我需要弄清楚如何使用全局异常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T09:16:25.000

> 我不知道从哪里开始调试它。

你有 cocos2d 的源代码。我会从那里开始。

在 CCSpriteFrameCache 中搜索“尝试使用文件”以了解此消息的原因是什么（我同意这令人困惑，您为什么不使用该文件？）。

至于堆栈跟踪，只要[添加全局异常断点](https://stackoverflow.com/questions/4961770/run-stop-on-objective-c-exception-in-xcode-4)就可以使用它。如果在 OpenAL 代码中触发断点，请确保将其设置为仅捕获 Objective-C 异常。

# jquery-ui-accordion - jquery ui 手风琴需要不同的链接和图标操作

> ID：13672031
> 
> 赞同：0
> 
> 时间：2012-12-02T17:53:37.183
> 
> 标签：jquery-ui-accordion

我正在尝试将 JQuery UI Accordion 用于多级菜单，例如 Superfish 菜单，但使用垂直手风琴演示。例如：

*   家
*   产品
*   *   产品类别 1
*   *   产品类别 2

“主菜单”级别的项目链接到相应的页面，因此在此示例中，“产品”链接到“产品”页面。在手风琴菜单中，如果您单击“+”打开“产品”菜单，“产品”链接将被激活，您将被带到“产品”页面。

这对我来说似乎是错误的。'+' 应该会打开菜单，但不会激活链接。用户应该必须单击“产品”链接本身才能激活它。

是否有配置选项或 jQuery 函数可用于触发链接和“+”的不同操作？

感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T15:45:33.887

这是事件冒泡的问题。我不使用 jQuery UI，但我给你一个例子：

```
<a href="whatyouwant.html"><span class="himg"></span></a>
<script>
$('a').click(function(){menuclick(this)})
$('span').click(function(){menuclick($(this).parent());return false})
</script> 
```

演示： http: [//jsfiddle.net/keszlercsaba/qqwPS/](http://jsfiddle.net/keszlercsaba/qqwPS/) 试一试。

# c# - 具有多个可选分组的正则表达式

> ID：13672032
> 
> 赞同：0
> 
> 时间：2012-12-02T17:53:39.680
> 
> 标签：c#, regex

我们有一个供应商在不使用查询字符串的情况下触发 HTTP 帖子。他们以以下格式有效地发布到我们的应用程序：

```
www.mydomain.com/ourHandler/GroupId/ProductId/ItemId/CustomerId/ 
```

`ourHandler`（或 Tracker）并且`GroupId`是唯一的保证值。其余的完全是可选的。最后的斜线也可能丢失。有人告诉我，我需要满足“每秒数百次点击”的需求。

所以我认为最好的选择可能是使用正则表达式（我很讨厌）而不是 string.split。

这是我得到的，但显然还不够好：

```
^(?<tracker>.\w*)?/(?<GroupId>\w*)?/(?<ProductId>\w)?/(?<ItemId>\w*)?(/)?(?<CustomerId>\w*)? 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-02T18:00:32.313

为什么需要正则表达式？Uri 类有一个`Segments`属性

```
var uri = new Uri("http://www.mydomain.com/ourHandler/GroupId/ProductId/ItemId/CustomerId/");
var segments = uri.Segments;
//ourHandler/ <-- segments[1] 
//GroupId/ <-- segments[2] 
```

# objective-c - CCMoveTo duration issue

> ID：13672035
> 
> 赞同：0
> 
> 时间：2012-12-02T17:53:45.087
> 
> 标签：objective-c, ios, xcode, cocos2d-iphone

I have a ball (CCSprite) that move from left to right forever. When I touch the screen, I want the ball stop. The problem is if the duration of the sprite is too fast, it has a delay time a millisecond before it stop, so the stop position is almost same value even when I touch in a bit 'different' position.

```
CGSize winSize = [[CCDirector sharedDirector] winSize];

self.ball = [CCSprite spriteWithFile:@"ball.png"];
self.ball.position = ccp(0, 156);

CGPoint destinationPoint = self.ball.position;
destinationPoint.x = winSize.width;

CGPoint startPoint = self.ball.position;
startPoint.x = 0;

float speed = 0.8f;

[self.ball runAction:[CCRepeatForever actionWithAction:
        [CCSequence actions:
            [CCMoveTo actionWithDuration:speed position:destinationPoint],
            [CCMoveTo actionWithDuration:0.f position:startPoint],
         nil]
        ]]; 
```

Then when I touch the screen I want to stop the sprite, and log the ball position:

```
-(void) ccTouchEnded:(UITouch *)touch withEvent:(UIEvent *)event
{
    [self.ball stopAllActions];
    NSLog(@"Ball x y: %f %f\n", self.ball.position.x, self.ball.position.y);
    // Then repeat again the movement of the ball
} 
```

So when I touch at the center, it has a delay a millisecond time before it stopped. Once again, I mean when I touch, it delay millisecond time (the ball still moving) then it stop. For example, when I click at position x 240, it stopped at x 240,1122, when I click at position x 230, it stopped at 239,222\. Not immediately stop after I touch.

Here is the sample log of the position I touch.

```
Ball x y: 240.211624 156.000000
Ball x y: 240.369995 156.000000
Ball x y: 240.291992 156.000000
Ball x y: 219.913574 156.000000
Ball x y: 260.425598 156.000000
Ball x y: 260.004364 156.000000
Ball x y: 239.953186 156.000000 
```

See? The x position when stop is always 'can be divided by 20'.

1.  240,240,240,239
2.  219
3.  260,260

I'm quite sure I have ever click at position x 235,230 or 245 or 250 or anything value exclude that pattern. But like I said, there is a delay time the ball still moving, then it stop.

If I change the speed become 2.8f (or higher) for example, the ball will stop immediately, and the x y of the ball is exact position in the last position when I touch. I think it is because the duration of CCMoveTo speed is too fast.

I have tried with schedule selector method. But the time of the schedule cannot be too fast as the CCMoveTo does. So the movement using schedule will be one pixel to one pixel with duration too long time.

Is there any solution for this? Or there is such a way to implement this? Many thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T08:09:33.233

这实际上是预期的行为，如果您以高速为精灵设置动画，效果尤其明显。为什么？

动画本质上是某个变量随时间的变化，这种变化总是在一系列离散的时间步长上进行的。假设您的目标距离是 240 像素，而您想要的持续时间是 0.8 秒。那么你的速度是 240*0.8 = 300 像素/秒。假设 60 的完全恒定的 fps，您会期望执行的每个时间步的离散位置变化为 1/60* 300 = 5 个像素。

现在假设您在时间*t*收到一个触摸事件。通常情况下，这个*t*不会与任何时间步的开始完全重合；它更有可能位于一对时间步之间。调用 stopAllActions 应该在当前时间步完成后停止安排动画，它不会*只是*在两个时间步之间停止，可以这么说。这正是您报告总是有一定间隔的距离的原因。

你真的需要精确到像素吗？如果是这样，您将需要在两个时间范围内的位置之间进行插值以找到精确的位置。

**编辑：**

我实际上非常怀疑在这种情况下是否需要像素精确的解决方案。事实上，我怀疑感知到的毫秒延迟可能是由于在结束而不是开始时检测到触摸事件。您可能想尝试在 ccTouchBegan 中捕获该事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T18:58:50.433

您的第二个 CCMoveTo 动作是不必要的 - 您不想执行 0 秒的移动动画，您想立即将其移回起点。我建议将您的动画更改为以下内容：

```
[self.ball runAction:[CCRepeatForever actionWithAction:
    [CCSequence actions:
        [CCMoveTo actionWithDuration:speed position:destinationPoint],
        [CCCallBlock actionWithBlock:^
        {
            self.ball.position = ccp(0, 156);
        }],
     nil]
    ]]; 
```

编辑：道歉 - 我不明白这个问题（但仍然建议改变）。插值是您正在寻找的。

您可以在动画开始时设置一个计时器，并在球重置位置时重置它。给定球在屏幕上移动的已知持续时间和屏幕宽度，您可以计算球在给定时间的预期位置。

# naudio - NAudio - Create software beat machine / sampler - General Strategy

> ID：13672038
> 
> 赞同：1
> 
> 时间：2012-12-02T17:53:56.433
> 
> 标签：naudio

Im new to NAudio but the goal of my project is to provide the user with the ability for the user to listen to an MP3 and then select a sample or a "chunk" of that song as a sample which could be saved to disk. These samples would be able to replayed at the same time (i.e. not merged but played at the same time).

Could someone please let me know what the overall strategy required to achieve this (....not necessarily the specifics...almost like pseduo code....).

For example would the samples / chunks of a song need to be saved as a WAV file. And these samples could be played together in the WAV format, etc.

I have seen a few small examples of a few implementations of some of the ideas Ive mentioned above but dont have a good sense of the big picture just yet.

Thanks in advance, Andrew

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T06:59:23.810

除非您保留它们以备将来使用，否则这些块不需要保存为 WAV 文件。您可以将 PCM 音频（`Mp3FileReader`自动转换为 PCM）存储在字节数组中并用于`RawSourceWaveStream`播放它们。

至于混合它们，我建议使用`MixingSampleProvider`. 这确实意味着您需要将您的浮点数转换`RawSourceWaveStream`为 IEEE 浮点数，但您可以使用它`Pcm16BitToSampleProvider`来执行此操作。这将使您可以轻松地对正在混合的样本调整音量（并执行其他 DSP）。`MixingSampleProvider`还会自动删除已完成的输入，因此您可以在想要触发声音时添加新输入。

# php - 排序然后设置变量

> ID：13672042
> 
> 赞同：0
> 
> 时间：2012-12-02T17:54:55.093
> 
> 标签：php, mysql, variables

我有以下代码可以完美地在 mysql 中排序我的数据：

```
<?php

$con = mysql_connect('localhost','root','password');
mysql_select_db("users");

$pop = mysql_query("
SELECT * FROM images ORDER BY pop DESC LIMIT 9

");

while($row = mysql_fetch_array($pop))
    {
    echo $row['imagefile'];
    echo "<br />";
    }

mysql_close($con);

?> 
```

但是，我希望每个“结果”都自动分配为变量。因此，例如“uploads/logo.png”作为上述代码的第一个“结果”出现。然后我希望将其分配为 $image_1 - 所以在代码中它将读取 $image_1 = "uploads/logo.png"。然后我希望将所有其他 8 个输出分配给变量，以便 $image_2 对应于第二个输出，依此类推。这只是一个原型。我希望它最终能输出 100 个结果。这是可能吗？非常感谢您的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T17:58:11.713

使用数组。

```
$images = array();
while($row = mysql_fetch_array($pop))
    $images[] = $row['imagefile']; 
```

或者保留关联数组：

```
$imageData = array();
while($row = mysql_fetch_array($pop))
    $imageData[] = $row;

// $imageData[0]['imageFile'] will be "uploads/logo.png" 
```

* * *

编辑以下评论：

上面的第一种方法：

```
<?php
foreach ($images as $image) {

    echo <<<EOT
<div class="box"><img src= "$image" width="200" height="150"></a></div>
EOT;
}
?> 
```

第二种方法可能涉及更多，具体取决于您的数据：

```
<?php
foreach ($imageData as $image) {
    $imagePath = $image['imageFile'];
    $imageWidth = $image['width'];
    $imageHeight = $image['height'];
    echo <<<HTML
<div class="box"><img src= "$imagePath" width=$imageWidth height=$imageHeight></a></div>
HTML;
}
?> 
```

# php - Slim php 框架显示 hello world 示例的空白页面

> ID：13672046
> 
> 赞同：1
> 
> 时间：2012-12-02T17:55:17.100
> 
> 标签：php, rest, restful-url, slim

哦，男孩...嘿，伙计们希望一切都好。我是一名 iphone/ipad 程序员，想用一些方法创建一个 web 服务，然后我可以将 json 请求发送到 web 服务并让它变得愉快。

我目前正在尝试创建 Web 服务。这是我的主机：justhost.com。我知道我无法设置任何类型的 .net 框架，因为它都是 linux。然后我被告知我可以设置一个带有苗条或顿悟的网络服务。我被告知这两者都不应该花很长时间来设置。最多 5 分钟？然而，在过去的两天里，我一直试图让事情顺利进行，但收效甚微。

我坚持使用 Slim，因为在我看来，与顿悟相比，它的设置更容易。我现在正在测试一个 hello world 示例，这样我就可以在我的网页中编写类似这样的内容....

*testing.mysite.com/hello/pk*

但我只是得到空白页。我假设我的 .htaccess 文件对于我在地址栏中以我的站点为前缀写入的任何 url 都必须是正确的，以免引发不正确的错误页面。

这是我的文件夹目录看起来像 atm：

![在此处输入图像描述](../Images/b9a64a47385d092717edd5e74037dc80.png)

我已经插入了 Slim 框架提供的 .htaccess 文件。

我还需要做什么才能完成这项工作。我错过了什么。我希望有人可以帮助我。

**更新 1**

这是我收到的错误.. 解析错误：语法错误，第 8 行 /home1/dholnot1/public_html/testing/index.php 中的意外 T_FUNCTION 然后我删除了 require 语句末尾的分号，这改变了错误对此：解析错误：语法错误，第 5 行 /home1/dholnot1/public_html/testing/index.php 中的意外 T_VARIABLE

**更新 2**

这是我的代码：

```
<?php

    require 'Slim/Slim.php';

    $app = new \Slim\Slim();

    //GET route
    $app->get('/hello/:name', function ($name) {
        echo "Hello, $name";
    });

    //POST route
    $app->post('/person', function () {
        //Create new Person
    });

    //PUT route
    $app->put('/person/:id', function ($id) {
        //Update Person identified by $id
    });

    //DELETE route
    $app->delete('/person/:id', function ($id) {
        //Delete Person identified by $id
    });     

    $app->run();
?> 
```

**更新 3**

我已将 php 配置升级到 PHP 版本 5.3.18，这意味着匿名函数现在可以工作了。

这是我得到的新错误：致命错误：第 242 行的 /home1/dholnot1/public_html/testing/Slim/Slim.php 中找不到 Class 'Slim\Log'

我在第 242 行签入了 slim.php 文件，它的内容如下：

> 'log.level' => \Slim\Log::DEBUG,

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T13:47:17.407

使用下面的代码：

```
require 'Slim/Slim.php';
\Slim\Slim::registerAutoloader();

$app = new \Slim\Slim();

//GET route
$app->get('/hello/:name', function ($name) {
    echo "Hello, $name";
});

...

$app->run(); 
```

*   Slim 使用[命名空间](http://php.net/manual/en/language.namespaces.basics.php)，所以你必须使用`$app = new \Slim\Slim()`
*   使用自动加载器让 Slim 处理它的内部依赖

# html - 将文本与图像 css 对齐

> ID：13672049
> 
> 赞同：1
> 
> 时间：2012-12-02T17:55:49.757
> 
> 标签：html, css

可能有一千个类似的问题，但我已经阅读了我能找到的所有内容，到目前为止对我没有任何帮助。

我想在 DIV 中对齐文本，而不是图像。文本和图像在同一行。在试验过程中，我尝试对图像和文本应用不同的样式。我无法将文本包装在 div 中，因为它将每个 DIV 放在不同的行上。所以我使用了一个标签，并将样式设置为那个。

CSS：

```
.FileFolderStyle {
    background-color: #D9FFD5;
}
.FileFolderImg
{
    width : 32;
    height: 32;
    margin:10px 0px;
}
.FileFolderText
{
    font-family: Verdana, Geneva, sans-serif;
    font-size: 16px;
} 
```

HTML：

```
<div class="FileFolderStyle">
   <img class="FileFolderImg" src="File.png"/> 
   <label class="FileFolderText">File name </label>
</div> 
```

文件“F”的顶部必须与图像的顶部相邻。我已经在这个小细节上花费了数小时，但找不到解决方案。这是一个 JSFiddle：http: [//jsfiddle.net/SxCH2/46/](http://jsfiddle.net/SxCH2/46/)

截图原样：

![在此处输入图像描述](../Images/453e4479a1a4ea6cd6f1643a7e810a05.png)

所需结果的屏幕截图：

![在此处输入图像描述](../Images/f107c026353d9e053fea223907c5de68.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T18:03:12.810

尝试使用`inline-block`带有`vertical-align:top;`. 应该将所有内容与包含的顶部对齐`<div>`。然后添加所需的图像，因为您的图像上`margin-top`已经有`10px`边距，我猜您也想将其添加到您的图像`<label>`中。您可能需要调整`line-height`以更好地控制文本对齐方式，因为当前行高超过了字体大小，导致文本顶部和底部有一点额外的空白。

示例：http: [//jsfiddle.net/SxCH2/59/](http://jsfiddle.net/SxCH2/59/)

```
.FileFolderImg
{
    width : 32px;
    height: 32px;
    margin:10px 0px;
    display:inline-block;
    vertical-align:top;
    border:1px solid red;
    content:"";
}
.FileFolderText
{
    font-family: Verdana, Geneva, sans-serif;
    font-size: 16px;
    display:inline-block;
    vertical-align:top;
    margin-top:10px;
    line-height:16px;
}​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T18:08:09.857

这是一个工作示例： http: [//jsfiddle.net/SxCH2/57/](http://jsfiddle.net/SxCH2/57/)您在顶部和底部有一个边距，这会使实现变得更加困难。我用过`display:inline`。

HTML

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
</head>

<body>
<div class="FileFolderStyle">
   <img class="FileFolderImg" src="File.png"/> 
   <div class="FileFolderText">File name </div>
</div>

</body>
</html> 
```

工作CSS：

```
.FileFolderStyle {
    background-color: #D9FFD5;
}
.FileFolderImg
{
    width : 32px;
    height: 32px;
    display:inline;
    vertical-align:top;
}
.FileFolderText
{
    font-family: Verdana, Geneva, sans-serif;
    font-size: 16px;
    display:inline;
    vertical-align:top;
}​ 
```

# ios - 通过 NSDictionary 将 NSUserDefaults standardUserDefaults 放入 tableview

> ID：13672053
> 
> 赞同：0
> 
> 时间：2012-12-02T17:56:16.857
> 
> 标签：ios, uitableview, nsdictionary, nsuserdefaults

我已经拼凑了一些来自stackoverflow的片段，但我似乎无法得到我期望的这种行为。

我正在尝试使用 NSUSerDefaults 并用数据填充 UITableView。

字典已填充，所有 NSLog 的输出都符合我的预期。但最终`cellForRowAtIndexPath`没有向表格视图返回任何内容。

我将单元格标识符和重用设置为“单元格”，但表格视图为空

```
- (void)viewDidLoad {
    [super viewDidLoad];

    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    myDictionary = [defaults dictionaryRepresentation]; }
    NSLog(@"Dict: %@",myDictionary);
    NSLog(@"count: %d", [myDictionary count]);
    NSArray * allKeys = [myDictionary allKeys];
    NSLog(@"%@",allKeys);

-(NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    return 1; }

-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    return [myDictionary count]; }

-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"cell";    
    UITableViewCell *cell = (UITableViewCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    NSArray * allKeys = [myDictionary allKeys];
    cell.textLabel.text = [myDictionary objectForKey:[allKeys objectAtIndex:indexPath.row]];
    cell.detailTextLabel.text = [myDictionary objectForKey:[allKeys objectAtIndex:indexPath.row]];;

    return cell; } 
```

在我的`myTableViewController.m`文件的开头，我有：

```
@interface myTableViewController ()
{
    NSDictionary *myDictionary;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T18:18:12.170

您假设您的 uitableviewcell 在出列后不为零

如果您的字典不是问题，这应该可以解决您的问题：

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"cell";    
    UITableViewCell *cell = (UITableViewCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if(cell == nil){ 
       cell = *create your tableviewcell here*;
    }
    NSArray * allKeys = [myDictionary allKeys];
    cell.textLabel.text = [myDictionary objectForKey:[allKeys objectAtIndex:indexPath.row]];
    cell.detailTextLabel.text = [myDictionary objectForKey:[allKeys objectAtIndex:indexPath.row]];;

    return cell; } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T18:33:30.607

从评论中总结。

更新您的 .m 如下（快速输入 - 下面可能有错别字）：

```
@interface myTableViewController () <UITableViewDataSource, UITableViewDelegate>
{
    NSDictionary *myDictionary;
    NSArray *myKeys;
}

- (void)viewDidLoad {
    [super viewDidLoad];

    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    myDictionary = [defaults dictionaryRepresentation]; 
    myKeys = [defaults allKeys];

    // not sure where your table view is created but set the dataSource and delegate
    myTableView.dataSource = self;
    myTableView.delegate = self;
}

-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    return myKeys.count; 
}

-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"cell";    
    UITableViewCell *cell = (UITableViewCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if(cell == nil){ 
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleValue1 reuseIdentifier:CellIdentifier];
    }

    NSString *key = myKeys[indexPath.row];
    cell.textLabel.text = myDictionary[key];
    cell.detailTextLabel.text = myDictionary[key];

    return cell; 
} 
```

# python - I need to make a health system in a python game

> ID：13672056
> 
> 赞同：0
> 
> 时间：2012-12-02T17:56:28.783
> 
> 标签：python, text, system

I'm planning to add a health system in a python game. I want it to be in a game_state['']. How would I go about making the health system relative to the damage you've taken?

Like this:

```
 print "Your health is", game_state['health']
    print "Zombie attacks"
    global health = game_state['health'] - 10
    print "Your health is", game_state['health'] - 10 
```

Would something like that work? Can I use global?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T17:59:07.113

你想这样做吗？

```
game_state['health'] = game_state['health'] - 10 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T19:28:34.577

（回应提问者对较早答案的评论）这就是您可以通过类实现健康的方式。

```
import os
class GameStatus:
    def __init__(self):
        self.health = 100
    def reduce_health(self):
        self.health = self.health - 10
        if self.health <= 0:
            game_over()

def main_game():
    game_status = GameStatus()
    #...
    # when player gets hurt
    game_status.reduce_health()
    # ...

def game_over():
    print "game over, sorry"
    os._exit(1) 
```

正如我所说的那样，这太过分了，特别是如果您有一个游戏循环并且可能只需要在每个循环结束时检查一次健康状况，但如果您开始增加更多复杂性，则可能很有用。

# security - 网站如何检测到我正在使用 SSH 隧道？

> ID：13672068
> 
> 赞同：0
> 
> 时间：2012-12-02T17:57:40.653
> 
> 标签：security, web, ssh, proxy, vpn

我有一个可以通过 SSH 访问的共享主机帐户，因此我经常将其用作 SSH 隧道来安全匿名地浏览网站。但有时，网站会检测到我正在使用 SSH 隧道，并且不允许我使用他们的服务。例如，今天我访问了一个站点，它直接告诉我“不允许使用 Proxie/VPN/VPS/Tor。”，现在这是一个很小的站点，我认为它没有所有数据库世界上的代理人。所以我想这在网站编程中一定可以实现代理/ssh隧道/vpn的检测。

所以我的问题是，这种检测是如何完成的？有什么办法可以避免被发现吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T21:18:13.050

我通过 mfanto 的评论提供的链接找到了我想知道的内容，链接是： [http ://en.wikipedia.org/wiki/Proxy_server#Detection](http://en.wikipedia.org/wiki/Proxy_server#Detection)

# java - 查找包含偶数数据值的树中的节点数

> ID：13672069
> 
> 赞同：0
> 
> 时间：2012-12-02T17:57:49.143
> 
> 标签：java, recursion, binary-tree

这是一个家庭作业。我尝试在包含偶数数据值的树结构中查找节点数。以下是我在名为 LinkedTree 的 Java 类中的失败尝试。

```
public int numEvenKeys() {
        return numEvenKeysTree(root);     
}

private static int numEvenKeysTree(Node root) {
        int num = 0;

        if (root == null)
            return 0;        
        else if (root.left != null || root.right != null)
            return num + numEvenKeysTree(root.left) 
                    + numEvenKeysTree(root.right);
        else if (root.key % 2 == 0)
            num = 1;

        return num;
} 
```

这是我的主要课程的一部分：

```
public static void main(String[] args) {
                Scanner in = new Scanner(System.in);

                LinkedTree tree = new LinkedTree();
                tree.insert(7, "root node");
                tree.insert(9, "7's right child");
                tree.insert(5, "7's left child");
                tree.insert(2, "5's left child");
                tree.insert(8, "9's left child");
                tree.insert(6, "5's right child");
                tree.insert(4, "2's right child");
                   ...
                *** remove a node of your choice ***
                   ...
                System.out.print("number of nodes with even keys in this tree: ");
                System.out.println(tree.numEvenKeys());
                   ...
    } 
```

作为参考，这里是内部类节点和类构造函数：

```
private class Node {
    private int key;         // the key field
    private LLList data;     // the data items associated with this key
    private Node left;       // reference to the left child/subtree
    private Node right;      // reference to the right child/subtree
    private Node parent;     // reference to the parent

    private Node(int key, Object data, Node left, Node right, Node parent){
        this.key = key;
        this.data = new LLList();
        this.data.addItem(data, 0);
        this.left = left;
        this.right = right;
        this.parent = parent;
    }

    private Node(int key, Object data) {
        this(key, data, null, null, null);
    }
}

// the root of the tree as a whole
private Node root;

public LinkedTree() {
    root = null;
} 
```

树的结构如下：

```
 7
     / \
    5   9
   / \ / 
  2  6 8
   \
    4 
```

如果我选择删除节点`7`，该方法应该返回`4`。但是，它在我的实现中返回 1。有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T18:03:31.353

你的条件错了。

如果节点为空，则答案为 0。

如果节点是偶数，则应该是1+左子树的偶数节点数+右子树的偶数节点数。

如果节点是奇数，应该是0+左子树的偶数节点数+右子树的偶数节点数。

# text - Data format for text annotations

> ID：13672071
> 
> 赞同：6
> 
> 时间：2012-12-02T17:57:57.007
> 
> 标签：text, comments, format

The [diff format](http://en.wikipedia.org/wiki/Diff) is more or less the de facto standard for representing differences between texts and is widely used by programmers to distribute source code changes. Most version control systems can output diffs, and diffs are used to discuss proposed changes to text (e.g. source code) since they are very powerful in illustrating the changes.

However, I would often like to simply comment on a text without changing it, and would like a data format which can represent annotations to text in a way that is as powerful as diff is for changes. A typical use case would be a code review where I want to comment on the code but not (yet) propose any changes. Another use case would be to annotate an article with my own thoughts and reminders. In Word, I can annotate text by marking it and creating a comment balloon beside the text. But Word is cumbersome in other ways – I would like to have just the annotations in a separate file and keep the originals as they are.

What data formats exist that can represent annotations to text in a way that is as exact as a diff is for changes?

I'm not looking for general answers like "XML". I'm looking for formats that explicitly represent annotations to text. (Perhaps no such format exists except the application-specific formats of certain programs like Word.)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-10-05T16:05:48.317

很好的问题。

大多数人会在讨论中抛出 XML 或 HTML 之类的子集。标记语言使用存储在原始文本中的（数据）属性。但这不是你要找的。我不包括 XML/HTML 和 RDF 和微格式。

**一般来说**

您需要保留原始文本，克隆它，然后通过自定义标记语言添加注释。这允许原始文本与注释文本的文本差异。重要的是分开存储原始文本和文本注释的修订。

这允许多个差异：

*   “原始文本”和“注释文本修订版 1..n”之间的差异
*   “带注释的文本 rev n”和“带注释的文本 rev n+1”之间的差异。

这是相当强大的。

**存在哪些数据格式？**

*   BioNLP 格式，是一种用于信息提取的文本挖掘格式
    *   [http://2011.biolp-st.org/home/file-formats](http://2011.bionlp-st.org/home/file-formats)
*   小子对峙格式
    *   [http://brat.nlplab.org/standoff.html](http://brat.nlplab.org/standoff.html)

> 在对峙表示中，文档的文本与注释分开，注释通过字符偏移连接到特定的文本范围。注释通过它们的基本名称（不带后缀的文件名）相同的文件命名约定与其文本相关联：例如，文件 PMID-1000.a1 包含文件 PMID-1000.txt 的注释。

如您所见，它是“基于文件名的注释关联”。学术研究和改进的空间很大，）

# php - Verifying windows 8 purchases (receipts) using PHP

> ID：13672076
> 
> 赞同：5
> 
> 时间：2012-12-02T17:58:33.777
> 
> 标签：php, windows-8, in-app-purchase, signedxml, xmlseclibs

I need to verify in-app purchases made in Windows 8 applications server-side using PHP. MSDN's [documentation page](http://msdn.microsoft.com/en-us/library/windows/apps/jj649137.aspx) has an example only in C#. Right now I've spent a whole day by searching for a way to do it in PHP. No success. All over the internet there are only .NET examples on this topic.

I've found some partial information about signed XML and x509, some libraries (xmlseclibs - useless, uses openssl_* functions which do not support sha256; phpseclib - looks promising but their documentation and examples are poor with no help).

Is it possible to do it somehow without learning everything about signed XML, RSA and x509? Right now I've read almost everything but everywhere is info only about encoding. Nothing about verifying.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-23T14:21:43.033

我设法使用[xmlseclibs](https://code.google.com/p/xmlseclibs/ "xmlseclibs")库验证了 WP8 IAP 收据。

此外，您需要启用 php curl。

```
do {
    $doc = new DOMDocument();

    $xml = $_POST['receipt_data']; // your receipt xml here!

    // strip unwanted chars - IMPORTANT!!!
    $xml = str_replace(array("\n","\t", "\r"), "", $xml);
    //some (probably mostly WP8) receipts have unnecessary spaces instead of tabs
    $xml = preg_replace('/\s+/', " ", $xml);
    $xml = str_replace("> <", "><", $xml);

    $doc->loadXML($xml);
    $receipt = $doc->getElementsByTagName('Receipt')->item(0);
    $certificateId = $receipt->getAttribute('CertificateId');

    $ch = curl_init("https://lic.apps.microsoft.com/licensing/certificateserver/?cid=$certificateId");
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0);
    curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 0);

    $publicKey = curl_exec($ch);
    $errno = curl_errno($ch);
    $errmsg = curl_error($ch);
    curl_close($ch);

    if ($errno != 0) {
        $verifyFailed = true;
        break;
    }

    // Verify xml signature
    require('./xmlseclibs.php');
    $objXMLSecDSig = new XMLSecurityDSig();
    $objDSig = $objXMLSecDSig->locateSignature($doc);
    if (!$objDSig) {
        $verifyFailed = true;
        break;
    }
    try {
        $objXMLSecDSig->canonicalizeSignedInfo();
        $retVal = $objXMLSecDSig->validateReference();
        if (!$retVal) {
            throw new Exception("Error Processing Request", 1);
        }
        $objKey = $objXMLSecDSig->locateKey();
        if (!$objKey) {
            throw new Exception("Error Processing Request", 1);
        }
        $key = NULL;
        $objKeyInfo = XMLSecEnc::staticLocateKeyInfo($objKey, $objDSig);
        if (! $objKeyInfo->key && empty($key)) {
            $objKey->loadKey($publicKey);
        }
        if (!$objXMLSecDSig->verify($objKey)) {
            throw new Exception("Error Processing Request", 1);
        }
    } catch (Exception $e) {
        $verifyFailed = true;
        break;
    }

    $productReceipt = $doc->getElementsByTagName('ProductReceipt')->item(0);
    $prodictId = $productReceipt->getAttribute('ProductId');
    $purchaseDate = $productReceipt->getAttribute('PurchaseDate');
} while(0);

if ($verifyFailed) {
    // invalid receipt
} else {
    // valid receipt
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-03T22:37:43.540

为自己说话。我喜欢 phpseclib 的“构建您自己的示例”的文档方法。

也就是说，我不认为 phpseclib 真的可以在这种情况下使用。所以你有 SignatureValue 标签。那个签名涵盖了什么？对于 XML 签名，我的理解是签名涵盖了 XML 的规范化形式。xmlseclibs 规范化 XML 文档，但 phpseclib 不规范化，因为它是加密库 - 不是 XML 库。

# android - 你能建议我在这段 android 代码中进行更正吗？

> ID：13672080
> 
> 赞同：0
> 
> 时间：2012-12-02T17:58:37.190
> 
> 标签：android, sms, android-contentresolver

我想从收件箱中读取所有短信并检查特定关键字。我开发了此代码。但它没有产生所需的结果。请建议我进行更正。

```
 public void onClick(View arg0 ){
        Uri uri = Uri.parse("content://sms/inbox");
        ContentResolver content = getContentResolver();
        Cursor c = content.query(uri,new String[] { "_id","address","body","person"}, null, null, null);
        if(c.getCount() > 0)
        {
            while(c.moveToNext())
            {
                colName = colName + c.getString(c.getColumnIndex("body")) + "\n";
                if(colName.contains("hai"))

                    textview1.setText("present");

                else
                    textview1.setText("not present");
            }
        }

    }
    });

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T18:37:06.017

由于您的问题在提供的信息方面相当模糊，这只是一个猜测：

如果您有多个 SMS 并且其中一个包含单词“hai”，如果此 SMS 不是最后一个 SMS，则结果文本将“不存在”，因为您在**每次**迭代中都使用光标**覆盖**此 textview 。

 **因此，例如，如果您在将 textview 设置为“present”后添加返回，如果该单词出现在至少一个 SMS 中，您应该能够看到结果“present”。

```
if(colName.contains("hai")){
      textview1.setText("present");
      return; 
}else{
      textview1.setText("not present");
} 
```**

# java - 使用单个端口的 RMI 回调

> ID：13672081
> 
> 赞同：0
> 
> 时间：2012-12-02T17:58:42.717
> 
> 标签：java, rmi

如何将 RMI 使用的总端口数从 N（其中 N = RMI UnicastRemoteObject 的数量）减少到 2 + N？

请允许我进一步解释。我有一个使用 RMI 执行客户端-服务器通信的系统。有两个接口；为了简单起见，我们将它们称为客户端和服务器。RMI 注册表与服务器在同一个 JVM 中运行，并绑定到某个端口（例如 4000）。服务器导出为没有端口号的 UnicastRemoteObject，并根据 no-args 构造函数绑定到匿名端口。

当客户端启动时，它会在服务器实现上调用 void hello(Client client) 方法，该方法是从注册表查找中获得的。传入的Client实现也是一个UnicastRemoteObject；通过两个接口为我们提供客户端和服务器之间的双向通信。问题是客户端中的 UnicastRemoteObject 也在监听它自己的匿名端口。

这意味着为了拥有 N 个客户端，我需要有 1 + 1 + 3 * N 个可用端口；其中 2 + N 个正在监听，2 * N 个是临时的。（注册表+服务器实例+每个客户端一个监听端口，每个客户端的临时端口，每个服务器的临时端口）。我们通常有大约 30 个客户端，提供 92 个端口。我相信我可以将其减少到 32 个端口（1 + 1 + 每个客户端的临时端口），但我看不出如何使用纯 RMI 来做到这一点。

我愿意接受其他不需要 RMI 的解决方案，但也不需要我们重新编写接口。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T18:02:02.900

我不清楚这里有什么问题。默认情况下，导出的 RMI 对象都将共享相同的端口号，除非您编写了不兼容的服务器套接字工厂。您可以在构建或导出它们时指定要使用的端口号，如`UnicastRemoteObject`. 在 JVM 中启动后者时，您可以为对象和注册表使用相同的端口。即使准确，您的 92 个端口作为资源计数也没有多大意义，因为它们分布在所有服务器和客户端主机上。

# asp.net - 使用 Javascript 的警报消息

> ID：13672091
> 
> 赞同：0
> 
> 时间：2012-12-02T17:59:19.840
> 
> 标签：asp.net

当某些条件不满足时，我正在使用 java 脚本使用警报消息来显示某种警告。我唯一的问题是当弹出警报消息并且用户阅读消息并单击“确定”时，它会返回到原始页面但页面会移动到左侧。通常我的页面显示在中心，但只有当 java 脚本运行时它才会移动到页面的左侧。如果我复制相同的 URL 并粘贴到另一个页面，那么所有内容都将对齐并显示在中心。我怎样才能解决这个问题？是否有另一个警报消息，如 jquery 或其他效果很好的东西。请。帮助。感恩

```
 using System;
using System.Collections.Generic;
using System.Linq;
using System.Net.Mail;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Data;
using System.Web.Security;
using System.Web.UI.WebControls.WebParts;
using System.Web.UI.HtmlControls;
using AjaxControlToolkit;
using System.Data.SqlClient;
using System.Configuration;
using System.Collections;
using System.Web.Routing;

public partial class HomePage : System.Web.UI.Page
{

    protected void Page_Load(object sender, EventArgs e)
    {
        string ID = Page.RouteData.Values["ID"] as string;

        if (!IsPostBack)
        {

            BindData_Action();

        }       
    }

protected void btnApproval_Click(object sender, EventArgs e)
    {

        SqlConnection con = new SqlConnection(ConfigurationManager.ConnectionStrings["TestConnectionString"].ConnectionString);
        SqlDataAdapter da = new SqlDataAdapter("SELECT ID, Description, Target_Date FROM MyTable  WHERE ID = '" + Request.QueryString["ID"] + "'", con);
        DataTable dt = new DataTable();
        da.Fill(dt);
        if (dt.Rows.Count > 0)
        {

         //if the condition above is true i am sending an email

        }
        else
        {
            Response.Write("<script>alert('Before requesting Approval additional info.  Thanks');</script>");
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T18:01:13.553

使用 Response.Write 可以对您的样式做一些时髦的事情。不要在 C# 代码中执行此操作，而是单独拆分 javascript。

一种方法是在 C# 中使用 RegisterStartUpScript - 这告诉编译器在页面加载后运行此脚本：

```
If (!Page.ClientScript.IsStartupScriptRegistered("showAlert") {
    Page.ClientScript.RegisterStartupScript(Page.GetType(), "showAlert", "showAlert();", True);
} 
```

然后，在页面上的 C# 代码部分结束后，添加以下内容：

```
<script type="text/javascript">
    function showAlert() {
        alert('Before requesting Approval, you MUST add at least one Action Item.  Thanks');
    }
</script> 
```

这一切所做的就是分离出您在 Response.Write 中拥有的 javascript。

# cookies - 未使用 NSMutableURLRequest 发送的 Cookie

> ID：13672095
> 
> 赞同：3
> 
> 时间：2012-12-02T17:59:41.043
> 
> 标签：cookies, nsurlconnection, nsurlrequest, nsmutableurlrequest, nshttpcookie

首先，该应用程序会打开一个 UIWebView 到我网站上的登录页面，成功登录后，webview 将关闭。我需要请求一个 url，它会返回一个非常小的 json 数据。如果我要使用 webview 启动此 url，则会返回正确的数据，因此假设登录会话仍然存在（如果不是，它将再次重定向到登录页面）

我需要在另一个视图中返回的数据而不是 web 视图，因此我需要使用 NSURLRequest 来访问它。在爬了一个晚上的stackoverflow之后，以下是我所拥有的：

```
NSHTTPCookieStorage *cookieJar = [NSHTTPCookieStorage sharedHTTPCookieStorage];
NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:url]];
NSDictionary * headers = [NSHTTPCookie requestHeaderFieldsWithCookies:
                          [cookieJar cookies]];
[request setAllHTTPHeaderFields:headers];

NSError * e;
NSData  *data = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:&e]; 
```

在检查返回的数据（包括登录页面源而不是预期的 json 数据）后，我可以得出结论，cookie 没有发送，需要建议。

编辑：我做了 [request allHTTPHeaderField] 的输出，它显示 NSHTTPCookieStorage 中的所有可用 cookie 都已附加到请求中。所以......我真的迷失了我应该如何进行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T13:30:53.660

您不需要明确设置 cookie。NSURLConnection 会自动为您执行此操作。

您是否尝试在 webview 关闭后打印出 cookie？

```
 [[[NSHTTPCookieStorage sharedHTTPCookieStorage] cookies] enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop) {

    NSLog(@"%@", obj);
  }]; 
```

# python - Gunicorn 显示 404 而不是 app

> ID：13672096
> 
> 赞同：2
> 
> 时间：2012-12-02T17:59:41.990
> 
> 标签：python, flask, gunicorn

我有一个试图通过 Gunicorn 运行的 Flask 应用程序。

该应用程序位于一个模块中，可以说它称为“mymodule”，`__init__.py`位于其中的文件`mymodule/`如下所示：

```
from flask import Flask
app = Flask(__name__)

if __name__ == '__main__':
    app.run() 
```

但是，无论 URL 是什么，都会返回 404 错误。

我尝试在包含 mymodule 文件夹的文件夹中运行 Gunicorn：

```
gunicorn -b 127.0.0.1:5000 mymodule:app 
```

我尝试通过运行将 Gunicorn 指向我的调试文件“runapp.py” `gunicorn -b 127.0.0.1:5000 runapp.py`，但结果是`error: [Errno 48] Address already in use`.

我究竟做错了什么？

**编辑**：文件结构

```
/runapp.py
/mymodule/__init__.py
/mymodule/views.py 
```

**运行应用程序.py：**

```
from mymodule import app, views
app.run(debug=True) 
```

**`__init.py__`**：

```
from flask import Flask
from mymodule import views

app = Flask(__name__)

if __name__ == '__main__':
    app.run() 
```

**视图.py**：

```
from mymodule import api
from mymodule.forms import SettingsForm
from functools import wraps
from flask import request, Response, render_template, redirect, url_for

[...]

@app.route('/')
@requires_auth
def dashboard():
    data = api.get_overview()
    return render_template('dashboard.html', data=data) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T20:49:04.523

你得到`Errno 48`是因为同一个端口 ( `5000`) 已经为另一个应用程序忙，这意味着你可能会运行你的应用程序两次。

该`404`问题是由于缺少路线引起的。路由没有正确附加，`app`因为您没有在`views`模块中导入它。来自[Flask 文档](http://flask.pocoo.org/docs/patterns/packages/)：

> 这是一个例子`__init__.py`：
> 
> ```
> from flask import Flask
> app = Flask(__name__)
> 
> import yourapplication.views 
> ```
> 
> 这就是 views.py 的样子：
> 
> ```
> from yourapplication import app
> 
> @app.route('/')
> def index():
>     return 'Hello World!' 
> ```

请注意，在创建 Flask 实例**后**`__init__.py`导入视图。

# vb.net - 找不到 Windows 窗体控件库

> ID：13672105
> 
> 赞同：1
> 
> 时间：2012-12-02T18:00:39.543
> 
> 标签：vb.net, dll, control-library

我正在尝试使用 Visual Basic .Net 2010 创建一个 Windows 窗体控件库。当我创建一个新项目时，我看不到这种类型的模板可用。

我在这里找到了一篇较旧的帖子，向用户展示了如何在“新建项目”对话框的左侧浏览以查找相关模板，但不幸的是，这没有帮助：

[创建 Windows 控件库](https://stackoverflow.com/questions/6804897/how-can-i-create-a-windows-control-library-project-in-visual-studio)

我还尝试在 New Project 中选择 Online 模板，我在 Windows Forms 和 Visual Studios 下查看过，但在任一类别中都找不到。

如何查看和选择此模板？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T18:10:01.877

我认为 Express 版中缺少这个。项目模板没有什么特别之处。只需创建一个常规类库并添加对 System.Drawing 和 System.Windows.Forms 的引用。并添加一个用户控件。

# javascript - jQuery将点替换为逗号并将其四舍五入

> ID：13672106
> 
> 赞同：25
> 
> 时间：2012-12-02T18:00:41.917
> 
> 标签：javascript

```
var calcTotalprice = function () {
    var price1 = parseFloat($('#price1').html());
    var price2 = parseFloat($('#price2').html());
    overall = (price1+price2);
    $('#total-amount').html(overall);
}

var price1 = 1.99;
var price2 = 5.47; 
```

如何添加功能以将价格数字中的点更改为逗号并将其四舍五入到小数点后两位

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2012-12-02T18:09:17.093

您可以使用“.toFixed(x)”函数来四舍五入您的价格：

```
price1 = price1.toFixed(2) 
```

然后您可以使用方法“.toString()”将您的值转换为字符串：

```
price1 = price1.toString() 
```

此外，您可以使用方法 ".replace("..","..")" 替换 "." 为了 ”，”：

```
price1 = price1.replace(".", ",") 
```

结果：

```
price1 = price1.toFixed(2).toString().replace(".", ",") 
```

**更新的答案**

.toFixed 已经返回一个字符串，因此不需要执行 .toString() 。这绰绰有余：

```
price1 = price1.toFixed(2).replace(".", ","); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-02T18:08:40.813

试试这个：

```
var price1 = 1.99234;

// Format number to 2 decimal places
var num1 = price1.toFixed(2);

// Replace dot with a comma
var num2 = num1.toString().replace(/\./g, ','); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-11-06T11:10:59.337

用类选择器舍入和替换的解决方案。此代码格式为 10.0 到 10,00

```
$('.formatInteger').each(function(){
  let int = parseFloat($(this).text()).toFixed(2)
  $(this).html(int.toString().replace(".", ","))
}) 
```

# java - 使用 large 和 xlarge drawables 的平板电脑

> ID：13672107
> 
> 赞同：0
> 
> 时间：2012-12-02T18:00:45.053
> 
> 标签：java, android, tablet

我需要为 7" 和 10" 平板电脑提供不同尺寸的图像。7" 图像在 drawable-large-mdpi 中并且工作正常。10" 图像在 drawable-xlarge-mdpi 中并且工作正常。但现在看起来他们可能会受益于所有在一个文件夹中。我假设仅通过使用 drawable-large-mdpi 10" 平板电脑会自动转到此位置，但似乎并非如此？有没有办法让两个平板电脑都使用一个（大）可绘制文件夹？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T18:22:43.740

如果您有以下设置：drawable-mdpi >> 10" 并且手机将从此处获取图像 drawable-large-mdpi >> 7" 将从此处获取

相反，您可以拥有（从 3.2 及更高版本）drawable-mdpi >> 手机 drawable-sw600dp-mdpi >> 所有最小宽度大于 600dp 的设备（7" 和 10" 选项卡）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T18:06:42.780

Use sw600dp for 7 inch tablet and sw720dp for 10 inch tablet

Refer [http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-02T18:02:06.643

没关系，我只是使用 drawable-sw600dp-mdpi 并且工作正常！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-03-17T19:39:52.663

`drawable-large-mdpi`以及`drawable-large-land-mdpi`7" 平板电脑纵向和横向。

`drawable-xlarge-mdpi`然后分别为 10" 平板电脑纵向和横向`drawable-xlarge-land-mdpi`。

工作正常。它支持 API 级别 8

# java - 从活动中引用私有助手类

> ID：13672109
> 
> 赞同：0
> 
> 时间：2012-12-02T18:01:11.010
> 
> 标签：java, android, class, constructor

我需要使用帮助类中的一些方法，但是当我尝试在我的活动中创建帮助类的对象时遇到问题。

```
HelperClass helper = new HelperClass(); 
```

当我执行上述操作时，我收到一条错误消息，提示我需要将 Helper() 默认设置为可见性。这是助手类的相关部分。

```
public class HelperClass {

private static HelperClass helperClass;
private String list;

private HelperClass() {
    initialiseHelper();
} 
```

当我在 HelperClass 中取出 private 时很好，但我不想编辑这个类。有没有解决的办法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T18:06:59.280

看起来您正在尝试应用**单例**模式，但您缺少该`getInstance()`方法，该方法应如下所示：

```
public static synchronized HelperClass getInstance() {
    if (helperClass == null) {
        helperClass = new HelperClass();
    }
    return helperClass;
} 
```

现在你应该在任何你想引用`HelperClass`. 希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T18:05:16.463

如果您想要私有构造函数，您可以从 HelperClass 制作单例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T18:05:33.957

您的`Helper`类没有`public`您标记的构造函数`private`。

或者

```
public HelperClass{

   private HelperClass(){
   // do some stuff
   }

   public static HelperClass newInstance(){
       new HelperClass();
   }
} 
```

或者使用**单例模式**

# jquery - Rails 中 jQuery 插件的问题

> ID：13672112
> 
> 赞同：0
> 
> 时间：2012-12-02T18:01:22.373
> 
> 标签：jquery, ruby-on-rails-3, nivo-slider

只是试图让 jquery 的 nivo 滑块插件在基本的 rails 应用程序上工作。尝试了我能做的最简单的概念证明，只是将演示放入公共文件夹中的静态 html 页面，但我仍然无法让它工作。这是我正在使用的当前标题：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<html lang="en">
<head>
    <script type="text/javascript" src="../vendor/assets/javascripts/nivo-slider/demo/scripts/jquery-1.7.1.min.js"></script>
    <script type="text/javascript" src="../vendor/assets/javascripts/nivo-slider/jquery.nivo.slider.js"></script>
    <title>Nivo Slider Demo</title>
    <link rel="stylesheet" href="../vendor/assets/javascripts/nivo-slider/themes/default/default.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="../vendor/assets/javascripts/nivo-slider/themes/light/light.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="../vendor/assets/javascripts/nivo-slider/themes/dark/dark.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="../vendor/assets/javascripts/nivo-slider/themes/bar/bar.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="../vendor/assets/javascripts/nivo-slider/nivo-slider.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="../vendor/assets/javascripts/nivo-slider/demo/style.css" type="text/css" media="screen" />

        <script type="text/javascript">
        $(window).load(function() {
            $('#slider').nivoSlider();
        });
    </script>

</head> 
```

每次在heroku中加载时都会出现错误：ReferenceError：

```
$ is not defined    

$(window).load(function() { 
```

一般来说，我对 Web 开发还很陌生，但我只是不知道如何解决这个问题。想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T18:13:17.780

未加载 JQuery。您在 rails 中使用相对路径。如果您必须手动加载您的 javascript，您应该考虑使用：

您可以`<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>`手动添加它。

* * *

更好的方法是对所有 javascript 使用[资产管道](http://guides.rubyonrails.org/asset_pipeline.html)。

`javascript_include_tag "application"`您已从通常位于的布局文件中取出代码： `/app/views/layouts/application.html.erb`.

你应该把它放回去，然后使用[资产管道](http://guides.rubyonrails.org/asset_pipeline.html)来为你处理 jQuery 和你的代码。

rails 中允许使用相对路径，但可能无法按预期工作。Rails 只提供来自公共目录而不是供应商目录的资产。通常，您只需让 rails 将所有 js/css 编译为一个文件，然后将其从`public/assets`目录中提供。

# wxwidgets - wxWidget C++ wxString 下标

> ID：13672116
> 
> 赞同：-1
> 
> 时间：2012-12-02T18:01:30.923
> 
> 标签：wxwidgets

如果可能的话，我想使用 wxString 或其他 wxWidget 工具打印下标或上标，因为我的项目严重依赖 wxWidgets。

看起来它是使用 UNICODE 完成的，但是有很多代码，我找不到我想要的方式。在我想打印的 HTML 代码中，例如 v [f]。这里的“f”是一个字符，也许它有一个唯一的代码。但是，我想学习一般的方法，如果有的话，比如如果它是一个字符串，比如 v [astring 怎么办]。

我该怎么做？

提前致谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T18:21:51.307

“在我想打印的 HTML 代码中，例如 vf。”

然后你想要 html sub 和 sup 标签

[http://www.w3schools.com/tags/tag_sup.asp](http://www.w3schools.com/tags/tag_sup.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T12:21:09.583

如果您只需要显示带有子/上标的字符串，那么最简单的解决方案可能确实是使用`wxHtmlWindow`. 如果您还需要允许编辑它们，请查看`wxRichTextCtrl`. 一般来说，你不能用 just 来做到这一点`wxStaticText`，尽管 Unicode 确实有一些子/上标符号，但它们并不详尽。

# ms-access - 为什么 MS Access 子数据表有时需要额外点击才能呈现？

> ID：13672120
> 
> 赞同：1
> 
> 时间：2012-12-02T18:02:00.417
> 
> 标签：ms-access, drilldown, ms-access-2000

我正在使用 MS Access 2003 打开一个链接到 SQL Server 2005 标准后端的 MS Access 2000 .mdb（我已经使用 MSSQL 和本地 Jet 表测试并复制了我的问题，因此它会适得其反用 SQL Server 标记这个问题）。

我有一个子数据表，其中子表单中的每条记录都有 11 条记录。如果子表单中的记录数很少（7-10 条记录），则子数据表中的小 [+] 会按预期运行。

但是，当子表单中的记录数为 40-48 条记录时，行为会发生变化。我单击小加号/扩展图标，Access 会根据需要扩展该区域，但它完全是白色/空白，并且没有显示数据。我必须先单击子表单记录，然后在子数据表显示任何数据之前单击扩展图标。在这种情况下还有其他奇怪的行为，但这是我发现的唯一*一致且可靠的方法，可以使子数据表的数据出现在该子表单记录中。*

以下屏幕截图显示了使用我讨论的技巧以及空白数据场景的成功扩展：

![子表单和子数据表的屏幕截图](../Images/f260254ea98f93950b44fad409fe3387.png)

谷歌搜索被证明是徒劳的，以下是我能找到的最好的：

> 另请注意，将子数据表添加到大表可能会对表的性能产生不利影响。-- [MS Office 文章，添加子数据表](http://office.microsoft.com/en-us/access-help/add-a-subdatasheet-HA010266800.aspx)

我不认为 40-48 条记录符合“大”的条件，我也不认为“表现”是“奇怪行为”的同义词。

**我尝试过的事情：**

*   使子数据表的源查询只读。
*   将 SubDatasheetName 从 [Auto] 更改为显式声明的源查询。
*   限制子数据表的源查询中的记录数，以便每个子表单的记录只有 2-4 个子数据表行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T19:41:03.327

我相信我已经找到了合适的解决方法。

放：

```
Me.Refresh
DoEvents 
```

在`OnCurrent`主要形式的情况下似乎在大多数情况下都可以解决问题。仍然偶尔会有一个怪癖，但只需更改数据表（而不是子数据表）中的某些内容似乎会使 Access 加载所有数据，并且它会按预期显示和运行。

其他修复/解决方法表示赞赏、欢迎，并将进行适当的投票。

# javascript - 2张地图一页一张地图是从第一张地图的标记产生的（第二张地图没有出现）

> ID：13672127
> 
> 赞同：-2
> 
> 时间：2012-12-02T18:02:24.660
> 
> 标签：javascript, google-maps, google-maps-api-3, driving-directions

嗨，有人可以帮忙吗？我有一张地图，其中标记记下每个位置（duh），然后在标记内是一个获取方向链接，它会产生一个弹出窗口。一切正常，除了位于弹出窗口中方向上方的地图（包含方向的第二张地图）未显示。它只是一个带有方向标记的灰色框。

这是js：

```
/* ::::::::::::::::::::::::::::::::::::DIRECTIONS:::::::::::::::::::::::::::::: */

var mapContainer = document.getElementById('map-container');
var dirContainer = document.getElementById('dir-container');
var fromInput = document.getElementById('from-input');
var toInput = document.getElementById('to-input');

// API Objects
var dirService = new google.maps.DirectionsService();
var dirRenderer = new google.maps.DirectionsRenderer();
var map2 = null;

function showDirections(dirResult, dirStatus) {
    if (dirStatus != google.maps.DirectionsStatus.OK) {
        alert('Directions failed: ' + dirStatus);
        return;
    }

    // Show directions
    dirRenderer.setMap(map2);
    dirRenderer.setPanel(dirContainer);
    dirRenderer.setDirections(dirResult);
};

function getSelectedTravelMode() {
    value = google.maps.DirectionsTravelMode.DRIVING;
    return value;
};

function getDirections() {
    var fromStr = fromInput.value;
    var toStr = toInput.value;
    var dirRequest = {
        origin: fromStr,
        destination: toStr,
        travelMode: getSelectedTravelMode()
    };
    dirService.route(dirRequest, showDirections);
};

function init() {
    var latLng2 = new google.maps.LatLng(37.77493, -122.419415);
    map2 = new google.maps.Map(mapContainer, myOptions2);

    var myOptions2 = {
        zoom: 13,
        center: latLng2,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    // Show directions onload
    getDirections();
}

/* :::::::::::::::::::::::::::MAIN MAP::::::::::::::::::::::::::::::::::::::: */

var address;
var markers;
var windows;
var mapMarkers = new Array();
var map, marker, i;
var infoWindow = new google.maps.InfoWindow();

function initialize() {
    var map_center = new google.maps.LatLng(37.0902, -95.7129);
    var myOptions = {
        zoom: 4,
        center: map_center,
        scrollwheel: false,
        mapTypeControl: false,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    }

    // Create a lettered icon for this point using our icon class
    map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

    var bounds = new google.maps.LatLngBounds();

    if (markers !== null && windows !== null) {

        for (i = 0; i < markers.length; i++) {

            marker = new google.maps.Marker({
                position: markers[i],
                map: map,
                draggable: false,
                animation: google.maps.Animation.DROP
            });

            mapMarkers.push(marker);

            bounds.extend(markers[i]);

            google.maps.event.addListener(marker, 'click', (function (marker, i) {
                return function (e) {
                    infoWindow.setContent(windows[i]);
                    infoWindow.open(map, marker);

                    g = document.getElementById("info");
                    address = g.getAttribute("rel");
                    //console.log(address);
                }
            })(marker, i));
        }

        google.maps.event.addListener(infoWindow, 'domready', function () {
            $("#info").on("click", function (e) {
                toInput.value = address;
                $(".dir-overlay").css("visibility", "visible");

                // init();
                // $('#to-text').text(address); 

                e.preventDefault();
            })
        });

        $(".closeDirections").click(function () {
            $(".dir-overlay").css("visibility", "hidden");
        });

        if (markers !== null && markers.length === 1) {
            map.setCenter(markers[0]);
            map.setZoom(11);
        } else {
            map.fitBounds(bounds);
        }
    }
}

google.maps.event.addDomListener(window, 'load', initialize); 
```

这是html（缩短）：

```
 <div id="map_canvas"></div>

<div class="dir-overlay">
    <div class="overlaymap-wrapper">

        <div class="titlebar">
            <a href="#" class="closeDirections">close</a>
        </div>  
        <div class="innermap-wrapper">
        <div class="directions-inputs">
            <span class="blue-text">Starting Location</span> <input id="from-input" type="text" value="1202 edgewood ave chicago heights il" /> 
            <input id="to-input" type="hidden" value="1600 Amphitheatre Pkwy, Mountain View, CA"/>
            <a href="#" onClick="init();" class="blue-button">Get Directions</a>
            </div>
            <div id="map-container"></div>
            <div id="dir-container"></div>
        </div>

    </div>
</div> 
```

标记正在被填充并从后面的 aspx 代码中提取。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T18:47:06.107

在您的`init()`方法中，`myOptions2`直到在调用之后声明才`google.maps.Map()`使用`myOptions2`. 将您的声明上移`myOptions2`一行，就在调用`google.maps.Map()`.

```
function init() {
    var latLng2 = new google.maps.LatLng(37.77493, -122.419415);
    var myOptions2 = {
        zoom: 13,
        center: latLng2,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    };

    map2 = new google.maps.Map(mapContainer, myOptions2);

    // Show directions onload
    getDirections();
} 
```

# asp.net - 使连接字符串易于修改

> ID：13672129
> 
> 赞同：0
> 
> 时间：2012-12-02T18:02:39.827
> 
> 标签：asp.net, connection-string

我不知道我是否变得太愚蠢而无法进行适当的谷歌搜索，但我没有找到解决方案：

我有一个带有 ado.net 框架的 asp.net 应用程序，因此有一个连接字符串。

我的连接字符串存储在 Web.config 中，如下所示：

```
 <connectionStrings>
<add name="Entities" connectionString="metadata=res://*/DataModel.csdl|res://*/DataModel.ssdl|res://*/DataModel.msl;provider=MySql.Data.MySqlClient;provider connection string=&quot;server=x.x.x.x;User Id=user;password=1234;database=db;port=8888;Persist Security Info=True&quot;" providerName="System.Data.EntityClient"/>
</connectionStrings> 
```

我必须将解决方案提供给某些人，如果他们不得不深入研究这个连接字符串并更改那里的所有设置（它只是没有“清晰地安排”在那里），我觉得这会很烦人，如果我可以在字符串之外声明它们，可能像这样（在同一个文件中，或者如果可能的话也在另一个名为“dbsettings”的文件中，并将此文件包含在 web.config 中）：

```
<appSettings>
 <add key="dbserver" value="x.x.x.x" />
 <add key="dbserverport" value="8888" />
 <add key="dbuser" value="user" />
 <add key="dbpassword" value="1234" />
</appSettings> 
```

我希望你明白我在说什么。

* * *

**解决方案**

首先查看 ChiYoung 的答案 - 他几乎说了所有话，但无论如何这里详细说明我是如何做到的：

在`Web.config`我添加了这个（在该`configuration`部分内部）：

```
<appSettings>
 <add key="dbserver" value="x.x.x.x" />
 <add key="dbserverport" value="8888" />
 <add key="dbname" value="dbxy" />
 <add key="dbuser" value="user" />
 <add key="dbpassword" value="1234" />
</appSettings> 
```

然后我`DatabaseHelper.cs`在我的`Data`-Layer（项目）中创建了一个类，如下所示：

```
class DatabaseHelper
{
    public static string MakeConnectionString()
    {
        string appDbserver = ConfigurationManager.AppSettings["dbserver"];
        string appDbserverport = ConfigurationManager.AppSettings["dbserverport"];
        string appDbuser = ConfigurationManager.AppSettings["dbuser"];
        string appDbpassword = ConfigurationManager.AppSettings["dbpassword"];
        string appDbname = ConfigurationManager.AppSettings["dbname"];

        return @"metadata=res://*/DataModel.csdl|res://*/DataModel.ssdl|res://*/DataModel.msl;provider=MySql.Data.MySqlClient;provider connection string=""server=" + appDbserver + @";User Id=" +
               appDbuser + @";password=" + appDbpassword + @";database="+appDbname+@";port=" + appDbserverport + @";Persist Security Info=True""";
    }
} 
```

接下来我更改了我的`DataModel.Designer.cs`文件（这个类继承自`ObjectContext`并自动生成，因为我正在使用 Ado.net），我将生成的构造函数更改为：

```
 public Entities() : base("name=Entities", "Entities")
    {
        this.ContextOptions.LazyLoadingEnabled = true;
        OnContextCreated();

    } 
```

至：

```
 public Entities() : base(DatabaseHelper.MakeConnectionString(), "Entities")
    {
        this.ContextOptions.LazyLoadingEnabled = true;
        OnContextCreated();
    } 
```

如果您有一个与 Web 项目无关的项目 - 在我的情况下，它是一个测试项目，您必须将 appsettings 添加到相关的配置文件 ( `App.config / Web.config`)。

完毕。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T20:52:56.700

在您的 web.config 中：

```
<configuration>
  <connectionStrings configSource="connectionString.config" />
</configuration> 
```

在您的新文件 connectionString.config 中（这是该文件中唯一的代码！）：

```
<connectionStrings>
  <clear />
  <add name="ConnectionStringName" connectionString="..." />
</connectionStrings> 
```

或者像你正在做的那样：

```
<appSettings>
 <add key="dbserver" value="x.x.x.x" />
 <add key="dbserverport" value="8888" />
 <add key="dbuser" value="user" />
 <add key="dbpassword" value="1234" />
</appSettings> 
```

然后连接你的字符串：

```
string appDbserver= ConfigurationSettings.AppSettings["dbserver"];
string appDbserverport= ConfigurationSettings.AppSettings["dbserverport"];
string appDbuser= ConfigurationSettings.AppSettings["dbuser"];
string appDbpassword= ConfigurationSettings.AppSettings["dbpassword"];

string myConnectionstring = @"metadata=res://*/DataModel.csdl|res://*/DataModel.ssdl|res://*/DataModel.msl;provider=MySql.Data.MySqlClient;provider connection string=&quot;server=" + appDbserver + @";User Id=" + appDbuser + @";password=" + appDbpassword + @";database=db;port=" + appDbserverport + @";Persist Security Info=True&quot;" 
```

# delphi - 如何将画布内的矩形复制到位图？

> ID：13672135
> 
> 赞同：4
> 
> 时间：2012-12-02T18:04:09.433
> 
> 标签：delphi, firemonkey

如何将矩形从 FireMonkey 内部复制`TCanvas`到`TBitmap`（或其他`TCanvas`）？

`CopyRect`在 FMX 中不可用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T19:42:41.897

一种可能的解决方案是：

```
var
NewBitmap:TBitmap;

NewBitmap:=Rectangle1.MakeScreenshot; 
```

# objective-c - 恢复 AVAudioSession

> ID：13672136
> 
> 赞同：0
> 
> 时间：2012-12-02T18:04:14.553
> 
> 标签：objective-c

我正在开发一个录音应用程序。录制和播放运行良好。当我最小化应用程序并再次打开它时出现问题，录制和播放都停止。我认为它与 AVAudioSession 有关。我正在使用的 AVAudioSession 代码是：

```
[[AVAudioSession sharedInstance] setCategory: AVAudioSessionCategoryPlayAndRecord error: nil];

[[AVAudioSession sharedInstance] setActive: YES error: nil];
UInt32 doChangeDefault = 1;
AudioSessionSetProperty(kAudioSessionProperty_OverrideCategoryDefaultToSpeaker, sizeof(doChangeDefault), &doChangeDefault); 
```

请帮我。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T18:45:44.000

您可能会遇到一种称为*音频中断*的情况 - 基本上，将您的应用程序置于后台会暂时停止正在运行的音频会话。您可以根据需要处理这些中断并恢复您的音频会话。有关详细信息，请参阅[音频会话编程指南](http://developer.apple.com/library/ios/#documentation/Audio/Conceptual/AudioSessionProgrammingGuide/HandlingAudioInterruptions/HandlingAudioInterruptions.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T05:06:23.417

我想出了解决方案，我使用的是 cocos2d 的简单音频引擎，这会产生问题。名为 cdaudiomanager 的简单音频引擎，它也在初始化 avaudiosession，这是问题所在。因此，我没有使用简单的音频引擎，而是使用了 avaudioplayer，现在一切都很好。

# xcode - 如何使用 xcode 从 .doc 或 .htm 文件中读取格式化文本？

> ID：13672137
> 
> 赞同：1
> 
> 时间：2012-12-02T18:04:27.747
> 
> 标签：xcode, jformattedtextfield

我认为这是一个愚蠢的问题，但我整个早上都在试验，无法让它发挥作用。提前感谢任何帮助。

我正在尝试制作一个根据用户的选择显示格式化文本的应用程序。我有一个详细视图，上面有一个 UIlabel。我已经做到了，所以它可以从 .txt 文件中提取文本，但我真的很想提取格式化的文本。在 .doc 文件或 .htm 文件中（或任何我可以保留格式的文件）。

这些文件被加载到资源文件夹中的 xcode 中。以下工作，但它在 UIlabel 中显示一堆 ascii 文本：

```
NSString *filePath = [[NSBundle mainBundle] pathForResource:@"Testing1" ofType:@"htm"];
NSString *textFromFile = [NSString stringWithContentsOfFile:filePath encoding:NSUTF8StringEncoding error:nil];
detailViewController.detailItem = textFromFile; 
```

我的编码错误吗？我不应该使用 UILabel 吗？我试过使用 UIWebViewer 但也不确定这是否正确。

如果这没有多大意义，我提前道歉。我对这一切都很陌生，并试图边走边学。谢谢！

**更新：**嗯，我终于可以使用 UIWebView 对象了。我不确定这是最好的方法，但它终于奏效了！想我会把它贴在这里，以防其他人正在寻找一种方法来做到这一点：

```
NSString *htmlFile = [[NSBundle mainBundle] pathForResource:@"Testing1" ofType:@"htm"];
NSString *htmlBody = [NSString stringWithContentsOfFile:htmlFile encoding:NSUTF8StringEncoding error:nil];
NSURL *baseURL = [NSURL fileURLWithPath:[[NSBundle mainBundle] bundlePath]];
[self.webView loadHTMLString:htmlBody baseURL:baseURL]; 
```

# java - 冒泡排序.txt文件包含java中的整数

> ID：13672139
> 
> 赞同：0
> 
> 时间：2012-12-02T18:04:41.803
> 
> 标签：java, sorting

我希望能够对包含分数的 txt 文件进行冒泡排序。我已经能够对字母进行排序，但不能对整数进行排序。我确实有一个关于如何去做的想法。任何解决方案或输入将不胜感激。这是我已经拥有的冒泡排序代码。

```
public static void bubbleSort(int array[]) {
        boolean swapped = true;
        while (swapped) {
            swapped = false;
            for (int i = 0; i < array.length - 1; i++) {
                if (array[i] > array[i + 1]) {
                    swapped = true;
                    int temp = array[i];
                    array[i] = array[i + 1];
                    array[i + 1] = temp;
                }
            }
            for (int i = 0; i < array.length; i++) {
                System.out.print(array[i] + "\t");
            }
            System.out.println();
        }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T18:08:56.130

If there is no need for you to use Bubble Sort specifically, use the `Arrays.sort()` method for sorting the array.

It goes like this `Arrays.sort(array);`

# javascript - Javascript 按键事件 IE, Safari

> ID：13672142
> 
> 赞同：0
> 
> 时间：2012-12-02T18:04:58.733
> 
> 标签：javascript, key-events

我正在尝试处理画布的关键事件。我添加了一个 tabindex，它允许画布接收事件。我的问题是 keydown 事件没有注册。他们仍在查看文件。我可以获得字母键事件，但不能获得标准箭头键（或至少在除 FF 之外的所有内容中）。

所以我想我的问题是如何处理 IE、Safari 和 Chrome 中的箭头键事件？我在所有带有字母和数字的浏览器中都得到了“处理”。只是不是箭头键。

谢谢一堆。

```
$('#tetris-canvas').keypress(function(e){
  e.preventDefault();
  alert('sort of handled');
  tetris.keyHandler(e);
}); 
```

如果您想查看整个代码，我的页面位于[http://tetris.townsendwebdd.com/](http://tetris.townsendwebdd.com/)

所以将其更改为 $(document).keypress(yada); safari 仍然不处理箭头

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T18:19:38.383

尝试这个：

```
$(#tetris-canvas).keydown(function(e) {
    e.preventDefault();
    e.stopPropagation();
    // your code...
});​ 
```

# algorithm - prove that for every deterministic algorithm ALG, there is some scenario, in which the total distance John’s trucks

> ID：13672151
> 
> 赞同：0
> 
> 时间：2012-12-02T18:05:53.827
> 
> 标签：algorithm, optimization, deterministic, game-theory

There are 3 popular beach resorts, A, B, and C, which reside on a line:

```
 A-----(1km)-----B-----(1km)------C. 
```

The distances between the resorts is 1k. John owns an ice-cream truck located in beach resort A and another located in beach resort C. Two busses full of ice-cream-craving children will arrive at the beach resorts (A, B, and C) tomorrow, but John does not know for which resort each bus is headed and when each bus will arrive (the busses can arrive at different times). He plans to dispatch an ice-cream truck from its current location to a beach resort as soon as a bus arrives at that resort. Each truck can only serve a single beach resort, that is, once a truck is dispatched to a beach resort it must remain there all day. John wants to design an algorithm that minimizes the sum of distances his trucks traverse in order to reach the busses’ locations.

Show that for every deterministic algorithm ALG, there is some scenario (i.e., schedule and locations of bus arrivals) in which the total distance John’s trucks traverse under ALG is 3OPT, where OPT is the value of the optimal solution in that scenario.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T19:04:38.537

您已经在评论中描述了一种策略。我会稍微修改一下：

> 让策略是卡车停留在它们所在的位置，直到孩子们到达一个位置，然后将卡车移向那里。然后孩子们到达B，所以位于A的卡车被派往B。现在第二辆公共汽车到达A，所以我们必须将位于C的卡车派往A。卡车经过的距离总和为3公里。

对于此策略，您已经证明存在距离为`3*OPT`

现在想想在这种情况下还有多少其他有意义的策略（提示：没有很多）。为他们所有人描述这样一个案例，你就完成了。

# c++ - 从代码中区分静态 dll 和动态 dll

> ID：13672152
> 
> 赞同：0
> 
> 时间：2012-12-02T18:06:20.823
> 
> 标签：c++, dll

我目前正在 c++ VS2010 中生成一个 dll 文件。我有两个问题想知道我当前是在生成静态 dll 还是动态 dll ？在我的代码中，我有一个 .def 文件，所有导出的函数都在该 def 文件中编号。我的函数也正在使用 __declspec(dllexport) 导出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T18:26:44.107

当您生成一个 DLL 时，您将获得一个*动态*链接库。所以独立于你生成它的方法，它是动态加载的。

但是从消费应用程序访问功能的方式有所不同。

当您使用导入库 (yourDllName.LIB) 时，DLL 将在您的应用程序加载时加载。这提供了与使用静态库类似的外观和感觉。

您还可以使用 LoadLibrary 和 GetProcAddress 获取指向函数的指针。然后您可以使用这些指向 DLL 入口点的指针调用您的函数。

如果您选择模块导出文件 (.DEF) 或 __declspec(dllexport) 方法将函数放入导出表，则无关紧要。我建议使用一种方法来避免混淆。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-02T18:34:05.080

在您的 C++ 代码中，您可以检查是否定义了符号 _DLL。

```
#ifdef _DLL 
```

我认为在构建静态库时不需要分配序数来运行。

# ruby-on-rails - Passing parameters from view to controller

> ID：13672155
> 
> 赞同：16
> 
> 时间：2012-12-02T18:06:34.177
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.1, controller, parameter-passing

I got a bit of a newbie question. I'm trying to pass a variable from my view to my controller. Is there anyway my method in my controller can receive variables from my view?

```
Post view: show.html.erb:
....
<%=link_to "Add relationship", :method => :add_relationship(@rela) %> 
```

* * *

```
Controller: post.controller.rb:

 def add_relationship(rela)
  @post = Post.find(params[:id])

  if current_user.id == @post.user_id
    @post.rel_current_id = rela.id
    @post.save
    redirect_to relationships_url
  else
    redirect_to posts_url, :notice => "FY!"
  end
end 
```

Thanks in advance :)

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-12-02T19:35:39.233

您可以直接通过 link_to 将信息添加到参数哈希。我不确定您到底要做什么，但我最近做了类似的事情来添加我在链接到新电子邮件时想要的电子邮件类型

```
<%= link_to 'Send Thanks', new_invoice_email_path(@invoice, :type => "thanks") %> 
```

现在我的参数看起来像：

```
{"type"=>"thanks", "action"=>"new", "controller"=>"emails", "invoice_id"=>"17"} 
```

我可以通过参数访问类型

```
email_type = params[:type] 
```

如果您传入实例变量 @rela 而不是字符串，您将在 params 哈希中获得 object_id。

根据下面的评论，我正在添加我的路线以说明为什么路径 new_invoice_email_path 有效：

```
resources :invoices do
  resources :emails
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T18:29:47.333

当一个请求进来时，控制器（和任何模型调用）将首先被处理，然后视图代码被最后处理。视图可以调用助手中的方法，但不能引用控制器中的函数。

但是，一旦呈现页面，您可以将信息作为新请求的一部分发回控制器，或者使用 ajax/JQuery（等）远程调用控制器功能。

这有帮助吗？

# c# - Action<>，等待额外的动作完成

> ID：13672159
> 
> 赞同：1
> 
> 时间：2012-12-02T18:06:58.920
> 
> 标签：c#, .net, asynchronous, 7zip

```
here it is:

        Action<int, ProgressBar, Label, Label, int, Button> downloadFileAsync = (i, pb, label2, label1, ServID, button1) =>
    {
        var bd = AppDomain.CurrentDomain.BaseDirectory;
        var fn = bd + "/" + i + ".7z";
        var down = new WebClient();
        DownloadProgressChangedEventHandler dpc = (s, e) =>
        {
            label1.Text = "Download Update: " + i + " From: " + ServID;
            int rec =Convert.ToInt16(e.BytesReceived / 1024);
            int total =Convert.ToInt16(e.TotalBytesToReceive / 1024)  ;
            label2.Text = "Downloaded: " + rec.ToString() + " / " + total.ToString() + " KB";
            pb.Value = e.ProgressPercentage;
        };
        AsyncCompletedEventHandler dfc = null;  dfc = (s, e) =>
        {
            down.DownloadProgressChanged -= dpc;
            down.DownloadFileCompleted -= dfc;
            CompressionEngine.Current.Decoder.DecodeIntoDirectory(AppDomain.CurrentDomain.BaseDirectory + "/" + i + ".7z", AppDomain.CurrentDomain.BaseDirectory);
            File.Delete(fn);
               if (i == ServID)
                {

                   button1.Enabled = true;
                   label1.Text = "Game Is Up-To-Date.Have Fun!!";
                  label2.Text = "Done..";
               }
         down.Dispose();
        }; 
```

我现在唯一的问题是程序提取下载的文件时

```
CompressionEngine.Current.Decoder.DecodeIntoDirectory(AppDomain.CurrentDomain.BaseDirectory + "/" + i + ".7z", AppDomain.CurrentDomain.BaseDirectory); 
```

在某些文件中，提取下载的文件需要时间，所以我如何告诉程序等到解压缩完成？（我使用BackgroundWorker）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T20:01:35.607

到目前为止，处理此类处理的最优雅的方法是使用 TPL 数据流。

[http://msdn.microsoft.com/en-us/devlabs/gg585582.aspx](http://msdn.microsoft.com/en-us/devlabs/gg585582.aspx)

这将需要您对现有代码进行一些重构。但是，它提供了一种出色的机制来表达对它们有秩序感的并行编程任务。如果您以任何频率编写此类代码，花时间学习 Dataflow 是值得的。

如果这不是一个选项，请查看 AutoResetEvent。它将允许一项任务在不消耗资源的情况下等待，直到它所依赖的任务完成。

> 通知等待线程有事件发生

[http://msdn.microsoft.com/en-us/library/system.threading.autoresetevent.aspx](http://msdn.microsoft.com/en-us/library/system.threading.autoresetevent.aspx)

# r - Summarising the first half of a column

> ID：13672161
> 
> 赞同：0
> 
> 时间：2012-12-02T18:07:05.520
> 
> 标签：r

I have an example dataframe:

```
a <- c("08/11/2012 15:45","08/11/2012 15:51",
       "09/11/2012 09:02","10/11/2012 15:45",
       "14/11/2012 15:45")  
b <- c(1:5)  
df1 <- data.frame(a,b) 
```

I want to use a summary-type function to inform me which unique dates I have in my df1\. Is there a way of using a function that only looks at a part of a column? (i.e. the date not the time). For example, using the example above, R would report:

```
08/11/2012
09/11/2012
10/11/2012
14/11/2012 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T18:14:13.210

转换为日期变量：

```
unique(as.Date(df1$a,"%d/%m/%Y"))
#[1] "2012-11-08" "2012-11-09" "2012-11-10" "2012-11-14"

format(unique(as.Date(df1$a,"%d/%m/%Y")),"%d/%m/%Y")
#[1] "08/11/2012" "09/11/2012" "10/11/2012" "14/11/2012" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T18:56:07.927

我赞成 Roland 的回答，因为它给了你所要求的东西，但我不确定它是否能给你最有效地使用 R 的设施所需的东西。您应该将日期时间输入转换为日期时间对象，然后从中提取您需要的内容。您还应该学习使用 YYYY-MM-DD 格式的日期，因为它们对您、您的客户以及您可能使用的任何整理功能都不会那么模糊。

```
?strptime # for input of datetime variable
?strftime # for formatting output of datetime variables
a <- c("08/11/2012 15:45","08/11/2012 15:51",
        "09/11/2012 09:02","10/11/2012 15:45",
        "14/11/2012 15:45")  
 b <- c(1:5)  
 df1 <- data.frame(a=strptime(a, format="%d/%m/%Y %H:%M") ,b)
 unique(strftime(df1$a, format="%d/%m/%Y") )
#[1] "08/11/2012" "09/11/2012" "10/11/2012" "14/11/2012" 
```

在回答有关如何按唯一日期拆分的问题时，我将使用拆分函数创建一个列表：

```
spl.dfrm <- split(df1,  strftime(df1$a, format="%d/%m/%Y") ) 
```

您可以按数字或按名称访问单个数据框元素。名称将是格式化操作的字符值，所以第一个是：

```
spl.dfrm[["08/11/2012"]] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T18:13:48.733

使用正则表达式。在您的示例中，您可以执行

```
unique(sub('^(../../....).*', '\\1', df1$a)) 
```

# c - Sizeof arrays and pointers

> ID：13672162
> 
> 赞同：2
> 
> 时间：2012-12-02T18:07:09.593
> 
> 标签：c, sizeof

Here is my sample code

```
#include<stdio.h>
void main()
{
 int arr[]={1,2,3,4,5,6};
 char *ptr,a;
 a='c';
 ptr=&a;
 int *ptr1,a1;
 a1=4;
 ptr1=&a1;
 printf("%d  %d   %d",sizeof(arr), sizeof(ptr1), sizeof(ptr));
} 
```

Now, as far as I understand, size of will tell me the size required to store the variable, now the output for this one is

`24 4 4`

Why is the size of `arr=24`, after all it's just a pointer and it should be having size =4 ?

Thanks.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-02T18:10:34.967

“……毕竟它只是一个指针……”？不，数组不是指针。Array 是一个数组对象：存储数组元素的固态连续内存块，不涉及任何类型的指针。在您的情况下，数组有 6 个大小为 4 的元素。这就是为什么你的`sizeof`评估为 24。

关于数组是指针的常见误解已被揭穿数百万次，但不知何故，它时不时地不断出现。阅读常见问题解答，如果您有任何问题，请返回

[http://c-faq.com/aryptr/index.html](http://c-faq.com/aryptr/index.html)

PS正如@Joachim Pileborg 在他的回答中正确指出的那样，`sizeof`这不是一个函数。它是一个运算符。

* * *

数组行为与指针不同的另一个上下文是一元运算`&`符（“地址”运算符）。当一元`&`应用于类型指针时，`int *`会产生一个类型指针`int **`。当一元`&`应用于类型数组时，`int [10]`会产生一个类型的指针`int (*)[10]`。这是两种截然不同的类型。

```
int *p = 0;
int a[10] = { 0 };

int **p1 = &p;      /* OK */
int **p2 = &a;      /* ERROR */
int (*p3)[10] = &a; /* OK */ 
```

这是另一个流行的问题（和错误）来源：有时人们希望在应用于数组时`&`产生一个指针。`int **``int [10]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T18:10:19.220

When you have an array, `sizeof` returns the size of the array (note that it's the size *in bytes* of the array, not the number of items in the array), otherwise it returns the size of the type or expression.

However, if you pass the array to a function, the array degrades to a pointer and the size information is lost.

Also, technically speaking `sizeof` is not a function, it's a special keyword in the language, and can be used without parentheses as well when used with expressions.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T18:10:39.723

数组不会衰减为内部的指针`sizeof`；`sizeof(arr)`返回为数组分配的总大小，在本例中为`6 * sizeof(int)`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-02T18:10:52.453

来自[维基百科](http://en.wikipedia.org/wiki/Sizeof#Using_sizeof_with_arrays)

> 当 sizeof 应用于数组的名称时，结果是整个数组的大小（以字节为单位）。（这是数组名称转换为指向数组第一个元素的指针的规则的少数例外之一。）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-02T18:13:24.893

运算符`sizeof()`不会为您提供数组中元素的数量，而是为您提供事物在内存中占用的字节数。因此：

```
#include <stdio.h>

int main()
{
  char s[] = { 1, 2, 3, 4, 5, 0 };
  int xs[] = { 1, 2, 3, 4, 5, 0 };

  printf( "sizeof( s ) = %d\n",  sizeof( s  ) );
  printf( "sizeof( xs ) = %d\n", sizeof( xs ) );

  return 0;
}

sizeof( s ) = 6
sizeof( xs ) = 24 
```

# gdb - Stop iff using a debugger

> ID：13672163
> 
> 赞同：3
> 
> 时间：2012-12-02T18:07:21.617
> 
> 标签：gdb, signals

I'd like to write an assert-style macro that stops only if I am running the program in a debugger. AFAIK, the only available debugger on my box is gdb, so I'll talk about that one.

The documentation for the SIGTRAP signal indicates that it is intended for pausing the debugger, so I should be able to put

```
if (!assertion) raise(SIGTRAP); 
```

in my code. It works to break GDB at the right point, but just running this from the command line also halts the program, as both bash and zsh helpfully interpret the "trace/breakpoint trap" signal to mean that the program should halt entirely.

Are there any signals that GDB uses but which I can expect that everything else ignores? Or is there a method beyond signals to pause execution in GDB without disrupting non-debugger operation?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T18:47:53.083

分叉一个孩子并尝试做`ptrace`父母是一种可移植的 UNIX 方式来确定你是否是`ptrace`d，然后你`raise(signo)` *只能*在被跟踪时这样做。

但是请注意，如果您在or下运行，此机制*也会*触发，从而有效地使您的程序在它们下崩溃，这可能是不可取的。`strace``truss`

一种更容易实现的特定于 Linux 的方法是查找`/proc/self/status`非`0` `TracerPid`. 这仍然具有与上述相同的缺点。

另一种特定于 Linux 的方法是调用`getppid`, then `readlink("/proc/$PARENT_PID/exe", ...)`，看看它是否指向 GDB。

这两个特定于 Linux 的示例都假定`/proc`已挂载，这通常是正确的，但并非必须如此。

> 是否有 GDB 使用的任何信号，但我可以预期其他一切都会忽略这些信号？

通常`SIGWINCH`被非终端处理程序忽略。`SIGWINCH`GDB 也将忽略它，但您可以通过发出以下命令使 GDB 停止：

```
(gdb) handle SIGWINCH stop print nopass
Signal        Stop  Print   Pass to program   Description
SIGWINCH      Yes   Yes     No                Window size changed 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T18:30:36.270

GDB 文档告诉我们：

> 当 GDB 在“Posix 系统”（例如 GNU 或 Unix 机器）上运行时，它通过 `ptrace' 系统调用与下级系统交互。

在 Linux 系统上，一个进程不能被多个其他进程跟踪。如果您的程序派生了一个尝试附加到其父级的子级，那么如果您已经附加了 gdb，则该子级将失败。可以使用退出值向父级发送此失败信号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T18:14:50.787

有 SIGCHLD，默认情况下会被忽略。我认为 gdb 是由任何信号触发的，但可能不是被忽略的信号触发的。您总是可以为 SIGUSR1 编写一个信号处理程序，它什么都不做（这与忽略信号不同：程序被中断，它只是立即返回）。然后你可以发送 SIGUSR1，虽然它通常会中止程序，但它现在什么也不做（因为你告诉它）。有关设置信号处理程序的详细信息，请参阅`sigaction`.

# python - Calling multiple functions from a class in Python without repeating the class name every time

> ID：13672167
> 
> 赞同：1
> 
> 时间：2012-12-02T18:07:53.677
> 
> 标签：python, class, function, syntax, with-statement

I feel this is a very simple question but I can't find to seem a proper answer. Basically I have a list of functions call from a class named simulation:

```
simulation.addGroup("teapotarmy")
simulation.populateGroup(20)
simulation.addNode("input",INPUT)
simulation.addNode("output",OUTPUT);
simulation.connectNodes("input","output");
simulation.manipOutputNode("output", "group.xvel");
simulation.manipInputNode("input", 1, 0.05); 
```

Is there a way to call those functions without having to repeat the class name everytime? Something along the line of:

```
(thethingIwant) simulation:
    addGroup("teapotarmy")
    populateGroup(20)
    addNode("input",INPUT)
    ... 
```

I have done this in other programming languages but I haven't figured out the syntax in Python. I have a faint memory of it having something to do with the 'with' statement...? Thanks in advance.

Leon

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-02T18:15:07.057

简单地说，没有。没有（很好，请参阅我最后的评论）方法来做到这一点。您可以做的最好的事情是将其分配给另一个更短的名称：

```
s = simulation
s.addGroup("teapotarmy")
... 
```

这还不错，尽管我认为普通方法是更具可读性的方法。

作为额外的，*严格*来说你不能这样做并不是真的。您可以以编程方式将所有模拟方法分配给本地命名空间，但是，这将非常令人困惑，我建议不要这样做。

例子：

```
from contextlib import contextmanager
import inspect

class some_class:
    def test(self):
        print("test!")

@contextmanager
def map_to_local(inst, locals):
    methods = inspect.getmembers(inst, inspect.ismethod)
    for name, method in methods:
        locals[name] = method
    yield
    for name, method in methods:
        del locals[name]

inst = some_class()
with map_to_local(inst, locals()):
    test() 
```

请注意，这非常脆弱 - 您必须小心并执行诸如检查您没有覆盖值、检查在上下文管理器退出之前没有删除值等操作......这也很不清楚发生了什么。

tl; dr：是的，有可能，不，你不应该这样做。您当前的代码很好且清晰。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T19:58:27.110

要使用当前设计的现有类，通常的解决方案是使用较短的变量名：

```
s = simulation
s.addGroup("teapotarmy")
s.populateGroup(20)
s.addNode("input",INPUT)
s.addNode("output",OUTPUT)
s.connectNodes("input","output")
s.manipOutputNode("output", "group.xvel")
s.manipInputNode("input", 1, 0.05) 
```

也就是说，另一种解决方案是稍微改变类以使这些方法返回 self。然后你可以写：

```
(simulation
    .addGroup("teapotarmy")
    .populateGroup(20) 
    .addNode("input",INPUT)
    .addNode("output",OUTPUT)
    .connectNodes("input","output")
    .manipOutputNode("output", "group.xvel")
    .manipInputNode("input", 1, 0.05)) 
```

正常的 Python 风格是让变异方法返回*None*（以提供发生变异的提示）；然而，返回*self*是像你这样的 API 的规范，在这些 API 中，应用一系列转换和状态更新是很常见的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-02T18:23:41.573

我能想到的最接近的事情是利用 Python 的函数也是类的属性（*可调用*属性）这一事实，因此您可以通过名称“获取”它们并调用它们......

```
#!/usr/bin/env python
# -*- coding: utf-8 -*-

class Simulation(object):
  def addGroup(self, groupToAdd):
    print "Group to add: %s" % groupToAdd

  def addNode(self, inputType, inputChannel):
    print "My inputs: %s, channel: %s" % (inputType, inputChannel)

if __name__ == "__main__":
  simulation = Simulation()
  functionsToCall = [
      ("addGroup", "teapotarmy"),
      ("addNode", "input", "INPUT"),
    ]
  for functionToCall in functionsToCall:
    getattr(simulation, functionToCall[0])(* functionToCall[1:]) 
```

但这可能会使您的代码比以前更加混乱。如果其他人必须修改您的代码，这可能会使他的任务复杂化......相当多。**:)**

更多信息：[Callables](https://stackoverflow.com/questions/111234/what-is-a-callable-in-python)，[包装参数](http://hangar.runway7.net/packing-and-unpacking-arguments-in-python)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-09-30T03:45:18.603

对于您在类中定义的每个方法，您都可以返回 self 对象。

```
class schema:
    def __init__(self,name,age):
        self.name = name 
        self.age = age
    def giveName(self):
        print(self.name)
        return self
    def giveAge(self):
        print(self.age)
        return self

obj = schema(name="yo",age=15)
obj.giveName().giveAge() 
```

# templates - Play Framework 2.0 template condition - when

> ID：13672168
> 
> 赞同：2
> 
> 时间：2012-12-02T18:07:59.480
> 
> 标签：templates, scala, playframework-2.0

I can't find any documentation of what "when" means in scala template. I've seen it on multiple places like scala samples - forms application. What is the meaning of when, what it's suppose to do when it's true and respectively when it's false? Are there any restriction for this construct? Is there a place where I can see the description of this and others scala template constructs?

Sample code snippet:

```
<li class="@("active".when(nav == "signup"))"> 
```

Thank you

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T20:26:03.087

可以看到 when [2.0.4](https://github.com/playframework/Play20/blob/2.0.4/framework/src/templates/src/main/scala/ScalaTemplates.scala#L805) / [2.1.0](https://github.com/playframework/Play20/blob/2.1.0/framework/src/templates/src/main/scala/play/api/templates/ScalaTemplate.scala#L120)的定义。

它是 RichString 的成员，它按名称接受一个布尔谓词。String 被隐式转换为 RichString。

这意味着您只能在字符串上使用 when，并且您必须将其传递给布尔类型的参数。

谓词为真时返回字符串，假时返回空字符串。

# bash - How to run some alias command in bash's non-interactive mode for Ubuntu

> ID：13672170
> 
> 赞同：-3
> 
> 时间：2012-12-02T18:08:15.680
> 
> 标签：bash, command-line, alias

I want to run some alias command in bash's non-interactive mode. But seems Ubuntu ignore BAHS_ENV. How can I make it work? `la` is a alias command. And I tested in other linux. it is work fine. Just Ubuntu not work.

`BASH_ENV=~/.profile bash -O expand_aliases -c la`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T18:34:48.753

我刚刚登录了一个 Ubuntu 机器（12.04.1），它工作正常：

创建一个`test_bash_env`包含以下脚本的文件：

```
#!/bin/bash

echo "This is a test for BASH_ENV, the value of which is: \`$BASH_ENV'" 
```

然后，我们很高兴有：

```
gniourf@ubuntubox:~/Test$ BASH_ENV=./test_bash_env bash -c 'echo "Hello, BASH_ENV!"'
This is a test for BASH_ENV, the value of which is: `./test_bash_env'
Hello, BASH_ENV! 
```

你拼错了变量还是什么？

# asp.net - ASP.NET 4.0 Dropdownlist text coded in Chrome, Firefox

> ID：13672171
> 
> 赞同：1
> 
> 时间：2012-12-02T18:08:20.480
> 
> 标签：asp.net, css, drop-down-menu, rendering

I have an asp.net site which was developed with Visual Studio Pro 2010 with a back-end of Windows Server 2008 R2 with SQL server 2008 R2 and II7 with Framework is 4.0

My Dropdownlist is working good only on IE, but not on chrome and firefox. The items are being displayed with weird characters, I am guessing that the output is encoded, so I just implemented a code to solve the issue but it seems that I am doing something wrong. See below by code.

Also I have tried with the legacy configuration just in case that is causing the problem, So I decided to put the following line on my web.config file.

web.config

```
<pages controlRenderingCompatibilityVersion="3.5" clientIDMode="AutoID"/> 
```

ASP.NET HTML TAG

```
<asp:DropDownList ID="JobCategoryList" runat="server"  OnDataBound="SortHTML">
    </asp:DropDownList> 
```

Code Behind

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!Page.IsPostBack)
        {
            DisplayCategories();
        }  
}

private void DisplayCategories()
    {
        _objCategories.getJobCategories();
        JobCategoryList.DataSource =         _objCategories.JobCategoriesDS.Tables["GetJobCategories"];
        JobCategoryList.DataTextField = "CategoryName";
        JobCategoryList.DataValueField = "Id";
        JobCategoryList.DataBind();
    }

protected void SortHTML(object sender, EventArgs e)
    {
        foreach (ListItem item in ((DropDownList)sender).Items)
        {
            item.Text = Server.HtmlDecode(item.Text);
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T19:08:13.307

这是一个CSS问题。在`/css/normalize.css`找到这一行，并从列表中删除 ether 字体系列和 ether the `select`。

```
button,
input,
select,
textarea {
    font-family: inherit; /* 1 */ <--------- remove it
    font-size: 100%; /* 2 */
    margin: 0; /* 3 */
} 
```

也从此行中删除`base.css`此有线字体

```
/* Form defaults */
input[type="text"],
input[type="password"],
input[type="email"],
textarea,
select { 
    border: 1px solid #ccc;
    padding: 6px 4px;
    outline: none;
    -moz-border-radius: 2px;
    -webkit-border-radius: 2px;
    border-radius: 2px;
    font-family: 'MuseoSans500Regular', Arial, sans-serif; <-------- remove it
    color: #777;
    margin: 0;
    width: 210px;
    max-width: 100%;
    display: block;
    background: #fff;
    -webkit-transition: all 0.2s ease-out;
    -moz-transition: all 0.2s ease-out;
    transition: all 0.2s ease-out;
    -webkit-box-sizing:border-box;
    -moz-box-sizing:border-box;
    box-sizing:border-box;
    } 
```

您在下拉列表中放置了这个`MuseoSans500Regular`字体名称，这使得字体的这种有线错误设计。

你可以改变字体系列，`select`从这个css行中删除，这取决于你，但这就是问题所在。

# ruby - Proc.new 如何在这段代码中找到块？

> ID：13672174
> 
> 赞同：2
> 
> 时间：2012-12-02T18:08:39.480
> 
> 标签：ruby, search, find, block, proc

我有以下代码：

```
def call_block
  Proc.new.call
  my_local_proc = Proc.new { Proc.new.call }
  my_local_proc.call
end

call_block { p 'block' } 
```

输出是：

```
block
block 
```

有人可以向我解释一下 Proc.new 如何找到我传递给 call_block 的块吗？我猜 Proc.new 只是搜索最近的块并且它完全用 C++ 实现。

我还有另一个问题：仅使用 ruby​​ 可以实现这样的事情吗？我的意思是，我可以编写一个方法，如果没有给出块，则获取传递给调用它的方法的块。就像是：

```
def bar
  if not block_given?
    #use the block that has been given to the caller
  end
  # some code
end

def foo
  bar
end

foo { :block } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T18:18:23.030

`Proc.new`如果在一个附加了一个的方法内没有一个调用，将使用该方法的块。[这是记录在案的行为](http://www.ruby-doc.org/core-1.9.3/Proc.html#method-c-new)。

要了解 YARV 是如何做到的，让我们阅读源代码。具体来说，[`proc_new`函数](https://github.com/ruby/ruby/blob/trunk/proc.c#L384)：

```
block_pointer = rb_vm_control_frame_block_ptr(control_frame_pointer); 
```

此行检索指向与当前控制帧关联的块的指针。

我相信这些控制框架实现了 Ruby 的堆栈。我们目前在`Proc.new`控制框架内，因此这将检索指向该方法的块的指针。

```
if (block_pointer != NULL) {
    /* block found */
} else {
    /* block not found... */
} 
```

如果指针不是`NULL`，则`Proc.new`显式传递了一个块。但是，如果指针*是* `NULL`怎么办？

```
/* block not found... */
control_frame_pointer = RUBY_VM_PREVIOUS_CONTROL_FRAME(control_frame_pointer);
block_pointer = rb_vm_control_frame_block_ptr(control_frame_pointer); 
```

我们在堆栈上向上移动并尝试获取它的块。换句话说，我们向上移动到调用者的控制框架并尝试获取它的块。

```
if (block_pointer != NULL) {
    if (is_lambda) {
        rb_warn("tried to create Proc object without a block");
    }
} else {
    rb_raise(rb_eArgError, "tried to create Proc object without a block");
} 
```

现在，如果不是`NULL`，那么我们就成功了。如果它*仍然是* `NULL`，那么我们无法创建`Proc`，所以我们提出了`ArgumentError`。

该算法归结为：

1.  看看是否`Proc.new`给了一个块
    1.  如果是这样，请使用它
    2.  如果没有，请查看是否给调用者一个块
        1.  如果是这样，请使用它
        2.  如果不是，则引发错误

* * *

为提高可读性而更改了源代码。访问 GitHub 上的链接源文件以获取原始文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T18:18:56.837

如果`Proc.new`在没有块的情况下调用，它会将块传递给方法（如果有）并将其转换为 proc 对象。

如果你在调用的时候没有传递任何块`foo`，它会引发一个`ArgumentError`异常，这很合理，原因`block_given?`返回false，你尝试在`Proc.new`没有块的情况下使用。

`&`对于第二个问题，您可以使用符号通过多种方法传递 proc 。

它将给定块转换为一个过程，您可以进一步传递它：

```
def bar &proc
  proc.call
end

def foo &proc
  bar &proc
end

p foo { :block }
# => :block 
```

此外，`bar`方法可以这样重写：

```
def bar
  yield if block_given?
end 
```

`yield`将执行给定的块，因此您无需将其显式转换为 proc 也无需通过`call`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T18:17:58.740

从[手册](http://www.ruby-doc.org/core-1.9.3/Proc.html)。

> 创建一个新的 Proc 对象，绑定到当前上下文。只能在带有附加块的方法中调用 Proc::new 而不使用块，在这种情况下，该块将转换为 Proc 对象。

# c - What's the order of this algorithm in Big-O notation (string permutations)?

> ID：13672175
> 
> 赞同：1
> 
> 时间：2012-12-02T18:08:45.643
> 
> 标签：c, string, performance, big-o, permutation

What is the performance in Big-O notation of the following algorithm? It's a function I wrote to print all permutations of a string. I know for an input of length n there are n! different permutations. Can somebody provide an explanation of the analysis made to reach such conclusions?

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>

void permute(char* output, char* input, int used[], int index, int length){
    int i;

    if (index == length) {
        printf("%s\n", output);
        return;
    }

    for (i=0; i< length; i++){
        if (! used[i] ){
            output[index] = input[i];
            used[i] = 1;
            permute(output, input, used, index+1, length);
            used[i] = 0;
        }
    }
}

int main(){
    char input[] = "abcd";
    char* output;
    int length = strlen(input);
    int* used;

    // Allocate space for used array
    used = (int*) malloc (sizeof (int)* length);
    memset (used, 0, sizeof (int)* length);

    // Allocate output buffer
    output = (char*) malloc ( length+1);
    if (!output) return 1;
    output[length] = '\0';

    // First recursive call
    permute(output, input, used, 0, length);

    free (output);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T18:30:38.137

> 我知道对于长度为 n 的输入有 n！不同的排列。

你刚刚回答了你自己的问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T18:12:30.070

我会说 O(n!)，因为每个递归都会执行一个 n 轮循环，并在“大小”n-1 的对象上调用一些东西（因为 used[i] 已经掩盖了一个字符）。

# android - Why does getCurrentListViews().size() equal 2 instead of 3?

> ID：13672178
> 
> 赞同：0
> 
> 时间：2012-12-02T18:08:58.903
> 
> 标签：android, testing, robotium

I am writing an android application with a tabbed interface. I am using a `FragmentActivity` with a `ActionBar.Tab` tabs, with each tab displaying a `ListFragment`.

In my test case, I am using `Robotium 3.6` to perform UI interaction, which is needed to test certain aspects of my `fragment's`. Each `fragment` has a separate test method, which tests that the `ListView` for a `fragment` has the same content at a set index (0), as the `ArrayList<String>` which the data is from.

The problem is that while the first two `fragments` pass their respective tests, the final `fragment` does not, with the failure trace being that:

```
junit.framework.AssertionFailedError: AbsListView with index 2 is not available!
at com.jayway.android.robotium.solo.Waiter.waitForAndGetView(Waiter.java:362)
at com.jayway.android.robotium.solo.Clicker.clickInList(Clicker.java:405)
at com.jayway.android.robotium.solo.Solo.clickInList(Solo.java:1004)
at com.******.*******.test.ActivityNavigatorTest.testFragmentSongsList(ActivityNavigatorTest.java:62)
at java.lang.reflect.Method.invokeNative(Native Method)
at android.test.InstrumentationTestCase.runMethod(InstrumentationTestCase.java:214)
at android.test.InstrumentationTestCase.runTest(InstrumentationTestCase.java:199)
at android.test.ActivityInstrumentationTestCase2.runTest(ActivityInstrumentationTestCase2.java:186)
at android.test.AndroidTestRunner.runTest(AndroidTestRunner.java:169)
at android.test.AndroidTestRunner.runTest(AndroidTestRunner.java:154)
at android.test.InstrumentationTestRunner.onStart(InstrumentationTestRunner.java:537)
at android.app.Instrumentation$InstrumentationThread.run(Instrumentation.java:1551) 
```

Here is the relevant code for the activity being tested:

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_navigator);

    PREFERENCES = PreferenceManager.getDefaultSharedPreferences(getBaseContext());

    adapterPager = new AdapterPager(getSupportFragmentManager());

    viewPager = (ViewPager) findViewById(R.id.pager);
    viewPager.setAdapter(adapterPager);
    viewPager.setOnPageChangeListener(new SimpleOnPageChangeListener() {
        @Override
        public void onPageSelected(int position) {
            super.onPageSelected(position);
            getActionBar().setSelectedNavigationItem(position);
        }
    });

    final ActionBar actionBar = getActionBar();
    actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

    actionBar.addTab(actionBar.newTab().setText(R.string.title_fragment_artists).setTag("artists").setTabListener(this));
    actionBar.addTab(actionBar.newTab().setText(R.string.title_fragment_albums).setTag("albums").setTabListener(this));
    actionBar.addTab(actionBar.newTab().setText(R.string.title_fragment_songs).setTag("songs").setTabListener(this));
} 
```

The code for each `ListFragment` is just defining an `ArrayList<String>`, populating it with dummy content and displaying said content with an `ArrayAdapter<String>`. Here is the code for the test case:

```
package com.******.*******.test;

import android.test.ActivityInstrumentationTestCase2;

import com.******.******.ActivityNavigator;
import com.*******.******.FragmentAlbums;
import com.*******.********.FragmentArtists;
import com.*******.******.FragmentSongs;
import com.jayway.android.robotium.solo.Solo;

public class ActivityNavigatorTest extends ActivityInstrumentationTestCase2<ActivityNavigator> {

    private Solo solo;

        public ActivityNavigatorTest() {
        super(ActivityNavigator.class);
    }

    protected void setUp() throws Exception {
        solo = new Solo(getInstrumentation(), getActivity());
    }

    protected void tearDown() throws Exception {
        solo.finishOpenedActivities();
    }

    public void testFragmentArtistsList() {     
        solo.assertCurrentActivity("Checking loaded activity is the navigator", ActivityNavigator.class);
        solo.clickOnText("Artists");

        String contentExpected = FragmentArtists.getArtistList().get(0);
        String contentActual = solo.clickInList(0, 0).get(0).getText().toString();

        assertEquals("Testing index 0 has same content in ArrayList and ListView", contentExpected, contentActual);

        int sizeExpected = FragmentArtists.getArtistList().size();
        int sizeActual = solo.getCurrentListViews().get(0).getCount();

        assertEquals("Testing same quantity of data in ArrayList and ListView", sizeExpected, sizeActual);
    }

    public void testFragmentAlbumsList() {
        solo.assertCurrentActivity("Checking loaded activity is the navigator", ActivityNavigator.class);
        solo.clickOnText("Albums");

        String contentExpected = FragmentAlbums.getAlbumList().get(0);
        String contentActual = solo.clickInList(0, 1).get(0).getText().toString();

        assertEquals("Testing index 0 has same content in ArrayList and ListView", contentExpected, contentActual);

        int sizeExpected = FragmentAlbums.getAlbumList().size();
        int sizeActual = solo.getCurrentListViews().get(1).getCount();

        assertEquals("Testing same quantity of data in ArrayList and ListView", sizeExpected, sizeActual);
    }

    public void testFragmentSongsList() {
        solo.assertCurrentActivity("Checking loaded activity is the navigator", ActivityNavigator.class);
        solo.clickOnText("Songs");

        String contentExpected = FragmentSongs.getSongList().get(0);
        String contentActual = solo.clickInList(0, 2).get(0).getText().toString();

        assertEquals("Testing index 0 has same content in ArrayList and ListView", contentExpected, contentActual);

        int sizeExpected = FragmentSongs.getSongList().size();
        int sizeActual = solo.getCurrentListViews().get(2).getCount();

        assertEquals("Testing same quantity of data in ArrayList and ListView", sizeExpected, sizeActual);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T15:41:08.040

我有一个理论，但我不确定它是否正确。我相信您的应用程序在视图寻呼机中一次显示一个片段，对吗？

好吧，我相信前两个测试用例可能比任何事情都更偶然。我相信一次应该只显示一个列表视图，并且由于某种原因，robotium 保留了一个额外的列表视图（可能是以前看到的），这意味着计数始终为两个。您可以通过查看 hierarchyviewer 工具并查看应用程序中显示的列表视图来验证这一点。

我为您提供的替代方法是在不同的列表视图上设置好的 id（或标签/内容描述）并使用这些而不是容易出现此类问题的机器人 getCurrentListViews() 方法。

# python - 运行应用程序引擎 python sdk 时出现问题

> ID：13672192
> 
> 赞同：0
> 
> 时间：2012-12-02T18:10:42.397
> 
> 标签：python, google-app-engine, installation, ubuntu-11.10

我已经下载了 google_appengine_1.7.3.zip 并遵循了给出的指南并对 .bashrc 进行了必要的更改， 如此处[给出的](http://www.johnogrady.com/blog/2012/09/01/setup-google-app-engine-on-ubuntu/)。这是我的[main.py](http://www.pastebin.com/BJTU3ezB)和[app.yaml](http://www.pastebin.com/WYJ8Crca)，它们位于名为 udacity 的文件夹中。

在我的终端中输入以下内容时，

```
python google_appengine/dev_appserver.py --use_sqlite --port=1234 genprojects/udacity/ 
```

我收到[以下消息](http://www.pastebin.com/LgPDGKmn) ，我正在使用 Ubuntu 11.10。请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T13:52:30.300

在我的文件 /etc/hosts 中没有对应于 localhost 的 ip。所以无法从域名获取IP - localhost 将以下行添加到文件/etc/hosts

```
127.0.0.2   localhost 
```

[参考](http://www.linux.about.com/od/commands/l/blcmdl5_hosts.htm)

# jquery - Ajax jquery 搜索器

> ID：13672193
> 
> 赞同：0
> 
> 时间：2012-12-02T18:10:47.237
> 
> 标签：jquery, search, live, erase

您好，我最近在一些教程的帮助下编写了这个脚本。“问题”是我希望能够手动插入名称。就像现在一样，如果我输入一个不存在于 db 中的名称，然后单击输入字段，它会自动删除我输入的文本。我不希望手动输入的文本在那里，如果用户点击输入或使用选项卡，建议 div 必须淡出。

```
<script type="text/javascript">
    function lookup(inputString) {
        if(inputString.length == 0) {
            // Hide the suggestion box.
            $('#suggestions').hide();
        } else {
            $.post("../autofill_institution.php", {queryString: ""+inputString+""}, function(data){
                if(data.length > 0) {
                    $('#suggestions').show();
                    $('#autoSuggestionsList').html(data);
                }
            });
        }
    } // lookup

    function fill(thisValue) {
            $('#inputString').val(thisValue);
            setTimeout("$('#suggestions').hide();", 200);
    }
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T18:36:34.537

要在输入失去焦点时隐藏建议列表，您可以执行以下操作

```
$("idoftheinputfield").on("blur",function(e){
    $('#suggestions').hide()
}) 
```

这让我思考为什么当焦点丢失时你的输入字段会被清除。无论如何，如果你想保留手动输入的值，你可以像这样调整它：

```
$("idoftheinputfield").on("blur",function(e){
    var mycurrentvalue = $(this).val();
    $(this).val(mycurrentvalue);
    $('#suggestions').hide()
}) 
```

希望这可以帮助..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-17T21:05:20.953

这是您可以使用 Ajax、PHP 和 JQuery 执行的操作。希望这有助于或给你一个开始。

在此处查看现场演示和源代码。

[http://purpledesign.in/blog/to-create-a-live-search-like-google/](http://purpledesign.in/blog/to-create-a-live-search-like-google/)

创建一个搜索框，可能是这样的输入字段。

```
<input type="text" id="search" autocomplete="off"> 
```

现在我们需要听用户在文本区域输入的任何内容。为此，我们将使用 jquery live() 和 keyup 事件。在每个 keyup 上，我们都有一个 jquery 函数“search”，它将运行一个 php 脚本。

假设我们有这样的 html。我们有一个输入字段和一个列表来显示结果。

```
 <div class="icon"></div>
 <input type="text" id="search" autocomplete="off">
 <ul id="results"></ul> 
```

我们有一个 Jquery 脚本，它将监听输入字段上的 keyup 事件，如果它不为空，它将调用 search() 函数。search() 函数将运行 php 脚本并使用 AJAX 在同一页面上显示结果。

这是JQuery。

```
 $(document).ready(function() {  

        // Icon Click Focus
        $('div.icon').click(function(){
            $('input#search').focus();
        });

        //Listen for the event
            $("input#search").live("keyup", function(e) {
            // Set Timeout
            clearTimeout($.data(this, 'timer'));

            // Set Search String
            var search_string = $(this).val();

            // Do Search
            if (search_string == '') {
                $("ul#results").fadeOut();
                $('h4#results-text').fadeOut();
            }else{
                $("ul#results").fadeIn();
                $('h4#results-text').fadeIn();
                $(this).data('timer', setTimeout(search, 100));
            };
        });

        // Live Search
        // On Search Submit and Get Results
        function search() {
            var query_value = $('input#search').val();
            $('b#search-string').html(query_value);
            if(query_value !== ''){
                $.ajax({
                    type: "POST",
                    url: "search_st.php",
                    data: { query: query_value },
                    cache: false,
                    success: function(html){
                        $("ul#results").html(html);

                    }
                });
            }return false;    
        }

    })

; 
```

在 php 中，对 mysql 数据库进行查询。php 将返回将使用 AJAX 放入 html 的结果。在这里，结果被放入一个 html 列表中。

假设有一个虚拟数据库，其中包含两个表动物和鸟类，它们具有两个相似的列名“type”和“desc”。

```
//search.php

// Credentials
$dbhost = "localhost";
$dbname = "live";
$dbuser = "root";
$dbpass = "";

//  Connection
global $tutorial_db;

$tutorial_db = new mysqli();
$tutorial_db->connect($dbhost, $dbuser, $dbpass, $dbname);
$tutorial_db->set_charset("utf8");

//  Check Connection
if ($tutorial_db->connect_errno) {
    printf("Connect failed: %s\n", $tutorial_db->connect_error);
    exit();
}
    $html = '';
    $html .= '<li class="result">';
    $html .= '<a target="_blank" href="urlString">';
    $html .= '<h3>nameString</h3>';
    $html .= '<h4>functionString</h4>';
    $html .= '</a>';
    $html .= '</li>';
     $search_string = preg_replace("/[^A-Za-z0-9]/", " ", $_POST['query']);
    $search_string = $tutorial_db->real_escape_string($search_string);

// Check Length More Than One Character
if (strlen($search_string) >= 1 && $search_string !== ' ') {
    // Build Query
    $query = "SELECT *
     FROM animals
     WHERE type LIKE '%".$search_string."%'
     UNION ALL SELECT *
     FROM birf
     WHERE type LIKE '%".$search_string."%'"
     ;
    $result = $tutorial_db->query($query);
        while($results = $result->fetch_array()) {
            $result_array[] = $results;
        }

        // Check If We Have Results
        if (isset($result_array)) {
            foreach ($result_array as $result) {

                // Format Output Strings And Hightlight Matches
                $display_function = preg_replace("/".$search_string."/i", "<b class='highlight'>".$search_string."</b>", $result['desc']);
                $display_name = preg_replace("/".$search_string."/i", "<b class='highlight'>".$search_string."</b>", $result['type']);
            $display_url = 'https://www.google.com/search?q='.urlencode($result['type']).'&ie=utf-8&oe=utf-8';

                // Insert Name
                $output = str_replace('nameString', $display_name, $html);

                // Insert Function
                $output = str_replace('functionString', $display_function, $output);

                // Insert URL
                $output = str_replace('urlString', $display_url, $output);

                // Output
                echo($output);
            }
        }else{

            // Format No Results Output
            $output = str_replace('urlString', 'javascript:void(0);', $html);
            $output = str_replace('nameString', '<b>No Results Found.</b>', $output);
            $output = str_replace('functionString', 'Sorry :(', $output);

            // Output
            echo($output);
        }
    } 
```

# .htaccess - 如果文件存在，.htaccess 重定向到文件

> ID：13672195
> 
> 赞同：0
> 
> 时间：2012-12-02T18:10:55.210
> 
> 标签：.htaccess, mod-rewrite

我想通过使用 htaccess 执行以下操作：

在地址栏中：[http://images.domain.ext/100x100/1234/some_text.jpg](http://images.domain.ext/100x100/1234/some_text.jpg) 在服务器上：[http://images.domain.ext/100x100/1234.jpg](http://images.domain.ext/100x100/1234.jpg)

我已经用过：

```
RewriteRule ^100x100/(.*)/(.*)\.jpg$ /100x100/$1.jpg 
```

这有效，但如果文件不存在，它也会重定向。仅当文件存在于服务器上时，我才需要重定向。如果文件不存在，我想去 index.php

我认为这与 RewriteCond -f 有关，但我无法弄清楚如何更改 RewriteCond 中的文件名。

```
RewriteCond /100x100/$1.jpg -f
RewriteRule ^100x100/(.*)/(.*)\.jpg$ /100x100/$1.jpg 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T18:38:58.583

[您需要在Regex Back-Reference Availability](http://httpd.apache.org/docs/2.2/rewrite/intro.html#regex)中引入您的 Document Root，如图 1 所示：

```
RewriteCond %{DOCUMENT_ROOT}/100x100/$1.jpg -f
RewriteRule ^100x100/(.*)/(.*)\.jpg$ /100x100/$1.jpg 
```

# c# - 创建委托事件

> ID：13672196
> 
> 赞同：2
> 
> 时间：2012-12-02T18:11:26.073
> 
> 标签：c#, wpf, delegates, modal-dialog

我正在尝试创建一个可以以另一种形式访问的委托事件。但是主窗体看不到我的代表。它说代表名称此时无效。情态形式

```
public partial class GameOverDialog : Window
{
   public delegate void ExitChosenEvent();
   public delegate void RestartChosenEvent();

   public GameOverDialog()
   {
      InitializeComponent();
   }

   private void closeAppButton_Click(object sender, RoutedEventArgs e)
   {
      ExitChosenEvent exitChosen = Close;
      exitChosen();
      Close();
   }

   private void newGameButton_Click(object sender, RoutedEventArgs e)
   {
      RestartChosenEvent restart = Close;
      restart();
      Close();
   }
} 
```

主要形式：

```
private void ShowGameOver(string text)
{
   var dialog = new GameOverDialog { tb1 = { Text = text } };
   dialog.RestartChosenEvent += StartNewGame();
   dialog.Show();
}

private void StartNewGame()
{
   InitializeComponent();
   InitializeGame();
} 
```

***在@Fuex 的帮助之后********

```
private void ShowGameOver(string text)
{
   var dialog = new GameOverDialog { tb1 = { Text = text } };
   dialog.RestartEvent += StartNewGame;
   dialog.ExitEvent += Close;
   dialog.Show();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T18:41:28.173

它不起作用，因为`delegate void RestartChosenEvent()`声明了允许封装方法的引用类型。因此，通过使用它`+= StartNewGame`会产生错误。正确的代码是：

```
public partial class GameOverDialog : Window
{
    delegate void myDelegate();

    public myDelegate RestartChosenEvent;
    public myDelegate ExitChosenEvent;

    public GameOverDialog()
    {
        InitializeComponent();
    }

    private void closeAppButton_Click(object sender, RoutedEventArgs e)
    {
        ExitChosenEvent();
        this.Close();
    }

    private void newGameButton_Click(object sender, RoutedEventArgs e)
    {
        RestartChosenEvent();
        this.Close();
    }
} 
```

然后在您的主要形式中，您必须使用`StartNewGame`，这是要传递的方法的指针，而不是`StartNewGame()`：

```
private void ShowGameOver(string text)
{
   var dialog = new GameOverDialog { tb1 = { Text = text } };
   dialog.RestartChosenEvent += StartNewGame;
   dialog.Show();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-16T12:50:33.263

当您定义委托而不使用关键字时，也会出现*“此时委托名称无效”错误。***`new`**例如：

```
// In asp.net the below would typically appear in a parent page (aspx.cs page) that 
// consumes a delegate event from a usercontrol:
    protected override void OnInit(EventArgs e) 
    { 
        Client1.EditClientEvent += Forms_Client.EditClientDelegate(Client1_EditClientEvent); 
        //NOTE: the above line causes 'delegate name is not valid at this point' error because of the lack of the 'new' keyword.
        Client1.EditClientEvent += new Forms_Client.EditClientDelegate(Client1_EditClientEvent); 
        //NOTE: the above line is the correct syntax (no delegate errors appear)
    } 
```

要将其放入上下文中，您可以在下面查看委托的定义。在 asp.net 中，如果您正在定义需要从其父页面（托管控件的页面）获取值的用户控件，那么您将在用户控件中定义您的委托，如下所示：

```
//this is the usercontrol (ascx.cs page):
    public delegate void EditClientDelegate(string num); 
    public event EditClientDelegate EditClientEvent; 
    //call the delegate somewhere in your usercontrol:
    protected void Page_Load(object sender, System.EventArgs e)
    {
        if (EditClientEvent != null) { 
            EditClientEvent("I am raised"); 
        }
    } 
```

# javascript - 如何使用 JQuery 验证正则表达式不需要的字段

> ID：13672198
> 
> 赞同：1
> 
> 时间：2012-12-02T18:11:32.540
> 
> 标签：javascript, jquery, jquery-validate

我的网络中有一个表单，我正在使用 JQuery 验证插件。我有一个不需要的“注释”（它可以为空），但如果已填充，则必须匹配特定的正则表达式。

使用它，如果该字段为空，则验证返回 false（无效），并显示错误：

```
'comment':{
     required: false,
     regexp: /^([-a-z0-9_ ()])+$/i,
}, 
```

我怎样才能达到预期的行为？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T18:25:58.687

尝试：

```
/^[-a-z0-9_ ()]+$|^$/i 
```

我刚刚为空虚添加了另一个匹配项

# jquery - jquery UI对话框中的颜色选择器

> ID：13672199
> 
> 赞同：0
> 
> 时间：2012-12-02T18:12:06.333
> 
> 标签：jquery, jquery-ui

放置在 UI 对话框小部件中的 jquery 颜色选择器存在问题。颜色选择器 div 显示在内部而不是对话框 div 上方。

更改选择器 div 的 z-index 没有意义。

```
.evo-pop {
    z-index:9999;
} 
```

[jsfiddle 示例](http://jsfiddle.net/Baa5Q/2/)

![在此处输入图像描述](../Images/2c846ca2d024228fc93ca542dba10688.png)

是否可以使其显示在对话框 div 上？

# java - 2 个日期之间的分钟数

> ID：13672201
> 
> 赞同：1
> 
> 时间：2012-12-02T18:12:10.803
> 
> 标签：java

`obj.date`是一个 unix 时间戳（长）。我检查了日期是否正确，但我无法获得两个日期对象之间的分钟差。例如，当我期望接近 30 时，我得到 4。这是为什么呢？

```
Date now = new Date();
Date then = new Date((long)obj.date*1000);

int secondsbetweendates = (int) ((then.getTime()-now.getTime())/1000);

int minutesbetweendates = (secondsbetweendates/1000) % 60; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T18:14:04.577

要将秒转换为分钟，您可以除以 60：

```
int minutesbetweendates = secondsbetweendates / 60; 
```

请注意，这将返回一个整数并*截断*结果，这意味着只会计算完整的分钟数。换句话说，119 秒将变成 1 分钟，而不是 2。

您还应该知道，如果时差超过一小时，它也可以返回大于 60 的数字。

# c# - PngBitmapEncoder 未按预期工作

> ID：13672203
> 
> 赞同：0
> 
> 时间：2012-12-02T18:12:35.453
> 
> 标签：c#, image, png

我试图隐藏PNG图像中的数据，如下所示：

```
 // Creates a new empty image with the pre-defined palette
        BitmapSource image = BitmapSource.Create(
            width,
            height,
            96,
            96,
            PixelFormats.Bgr24,
            myPalette,
            imageData,
            stride);

        PngBitmapEncoder encoder = new PngBitmapEncoder();
        encoder.Interlace = PngInterlaceOption.On;
        BitmapFrame frame = BitmapFrame.Create(image);
        encoder.Frames.Add(frame);

        //estimate PNG file size using the amount of data being saved
        MemoryStream arrayStream = new MemoryStream(imageData.Length);
        encoder.Save(arrayStream); 
```

其中 imageData 是我隐藏在 PNG 图像中的数据。这是我如何解码它：

```
 Stream encodedImageStream = new MemoryStream(imageData, 0, imageDataSize);
        PngBitmapDecoder decoder = new PngBitmapDecoder(encodedImageStream, BitmapCreateOptions.None, BitmapCacheOption.Default);
        BitmapFrame bitmapSource = decoder.Frames[0];

        //align on the rhs boundary
        int stride = ((bitmapSource.PixelWidth + 1) * bytesPerPixel) & ~3;
        byte[] pixels = new byte[bitmapSource.PixelHeight * stride];
        bitmapSource.CopyPixels(pixels, stride, 0); 
```

问题是编码器似乎正在将图像的 PixelFormat 从 Bgr24 更改为 Bgr32，在解码所有像素值在编码之前设置为 0 的图像后，我得到一个像素值的图像 - [0,0,0,255,0 ,0,0,255,...] 这表明编码器为图像添加了透明度，我希望它保持格式相同，请帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-09T23:41:38.710

尝试`encoder.Palette = BitmapPalettes.Gray256;`

# java - 将2张地图放入1张地图

> ID：13672207
> 
> 赞同：0
> 
> 时间：2012-12-02T18:13:15.067
> 
> 标签：java, collections, hashmap

我有 2 张地图，如下所示，我希望输出为下面所示格式的新地图？请建议这是否可能。

```
Map<String,String> abc = new HashMap<String, String>();
abc.put("Apple", "Mobile");
abc.put("Apple", "Tablet");

Map<String,String> def = new HashMap<String, String>();
def.put("Mobile", "iphone5");
def.put("Tablet", "iMini"); 
```

所需的 o/p 格式"

```
Map<String,Map<String,String>> xyz= new HashMap<String, Map<String,String>>(); 
```

示例 {{Apple={Mobile=[iphone]},Apple={Tablet=[iMini]}}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T18:16:27.913

只需执行以下操作：

```
Map<String,Map<String,String>> xyz = new HashMap<String, Map<String,String>>();
xyz.put("def", def);
xyz.put("abc", abc); 
```

`HashMap`是一个[泛型类](http://docs.oracle.com/javase/tutorial/java/generics/)，因此您可以将任何对象放入其中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T18:21:05.900

不完全确定您要实现的目标，但肯定可以将地图值作为您的第二个代码示例中指示的其他地图。

但是您的第一个示例存在问题：当您使用键“Apple”添加值“Tablet”时，它将覆盖值“Mobile”。一个 HashMap 只能有一个值到一个键。我不认为 Map 的实现可以对键有多个值，但创建一个值应该不难。

参见[HashMap：一个键，多个值](https://stackoverflow.com/questions/8229473/hashmap-one-key-multiple-values)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T18:15:47.610

当然，有可能，您只需要决定将使用什么作为外部映射的键：

```
Map<String,String> abc = new HashMap<String, String>();
abc.put("Apple", "Mobile");
abc.put("Apple", "Tablet");

Map<String,String> def = new HashMap<String, String>();
def.put("Mobile", "iphone5");
def.put("Tablet", "iMini");

Map<String,Map<String,String>> xyz = new HashMap<String, Map<String,String>>();
xyz.put("Foo",abc);
xyz.put("Bar",def); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-02T18:16:56.193

是的，有可能。

```
Map<String,Map<String,String>> mapOfMap = new HashMap<String,Map<String,String>>();

mapOfMap.put("map1", new HashMap<String,String>());

mapOfMap.put("map2", new HashMap<String,String>()); 
```

# iphone - 如何防止在 iPhone 3GS 上安装

> ID：13672211
> 
> 赞同：0
> 
> 时间：2012-12-02T18:13:26.823
> 
> 标签：iphone, ios, installation, app-store

我可以阻止用户在 iPhone 3G 和 3GS 上安装我的应用程序吗？

我只想支持 iPhone 4 及更高版本，因此我不希望该应用程序出现在 App Store 中供 3G 和 3GS iPhone 用户使用。

我可以这样做吗？

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-02T18:24:07.200

您可以在应用的设备功能中指定它需要前置摄像头和/或陀螺仪。iPhone 3GS 没有这些东西。

见这篇文章： http: [//www.appsbynight.com/2012/02/20/lock-users-from-running-an-app-on-older-ios-devices/](http://www.appsbynight.com/2012/02/20/lock-users-from-running-an-app-on-older-ios-devices/)

请记住，如果您实际上并未在应用程序中使用前置摄像头，Apple 可能会对您需要前置摄像头提出质疑。或者他们可能不在乎。我想这有点像彩票。

# perl - CPAN 在 EC2 / Linux AMI 上安装失败：“无法解压缩”

> ID：13672215
> 
> 赞同：3
> 
> 时间：2012-12-02T18:13:52.223
> 
> 标签：perl, amazon-ec2, cpan

我在尝试使用 CPAN 安装各种 CPAN 模块的 EC2 Linux AMI 实例上。从典型安装开始（YAML 只是一个示例）...

```
sudo yum install perl-CPAN
Package perl-CPAN-1.9402-127.15.amzn1.x86_64 already installed and latest version

sudo perl -MCPAN -e shell
cpan[1]> install YAML 
```

...当 CPAN 下载并尝试安装模块和依赖项时，我反复得到以下信息：

```
Using Tar:/bin/tar xvf "YAML-0.84.tar":
Couldn't untar YAML-0.84.tar 
```

我检查了 tar 和 /bin/tar 已安装并正常工作。

任何信息，将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-08-11T04:14:24.410

我在 512M VM 上运行时遇到了这个问题。将分配增加到 1G 修复了它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-20T18:01:27.807

问题似乎是 EC2 机器上的 tar 版本太旧，无法解压 YAML 发行版。

最简单的解决方案是安装`Archive::Tar`，以便将来 CPAN shell 可以使用它，而不是`tar`机器上的命令行。这可以通过键入来完成

```
cpan> install Archive::Tar 
```

幸运的是，CPAN shell 能够安装 Archive::Tar 而不会遇到同样的问题。

（根据上面的@so-not-liopa 评论，添加为答案，因此不再将其列为没有答案的问题）

# python - 如何让 beautifulsoup 对脚本标签的内容进行编码和解码

> ID：13672216
> 
> 赞同：4
> 
> 时间：2012-12-02T18:13:53.643
> 
> 标签：python, tags, beautifulsoup

我正在尝试使用 beautifulsoup 来解析 html，但是每当我点击带有内联脚本标签的页面时，beautifulsoup 都会对内容进行编码，但最终不会将其解码。

这是我使用的代码：

```
from bs4 import BeautifulSoup

if __name__ == '__main__':

    htmlData = '<html> <head> <script type="text/javascript"> console.log("< < not able to write these & also these >> "); </script> </head> <body> <div> start of div </div> </body> </html>'
    soup = BeautifulSoup(htmlData)
    #... using BeautifulSoup ...
    print(soup.prettify() ) 
```

我想要这个输出：

```
<html>
 <head>
  <script type="text/javascript">
   console.log("< < not able to write these & also these >> ");
  </script>
 </head>
 <body>
  <div>
   start of div
  </div>
 </body>
</html> 
```

但我得到这个输出：

```
<html>
 <head>
  <script type="text/javascript">
   console.log("&lt; &lt; not able to write these &amp; also these &gt;&gt; ");
  </script>
 </head>
 <body>
  <div>
   start of div
  </div>
 </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T18:37:19.080

您可能想尝试[lxml](http://codespeak.net/lxml/)：

```
import lxml.html as LH

if __name__ == '__main__':
    htmlData = '<html> <head> <script type="text/javascript"> console.log("< < not able to write these & also these >> "); </script> </head> <body> <div> start of div </div> </body> </html>'
    doc = LH.fromstring(htmlData)
    print(LH.tostring(doc, pretty_print = True)) 
```

产量

```
<html>
<head><script type="text/javascript"> console.log("< < not able to write these & also these >> "); </script></head>
<body> <div> start of div </div> </body>
</html> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-02T18:23:28.653

你可以这样做：

```
htmlCodes = (
('&', '&amp;'),
('<', '&lt;'),
('>', '&gt;'),
('"', '&quot;'),
("'", '&#39;'),
)

for i in htmlCodes:
    soup.prettify().replace(i[1], i[0]) 
```

# launchd - 终止 Launchd-launched Privileged Helper

> ID：13672217
> 
> 赞同：3
> 
> 时间：2012-12-02T18:14:00.290
> 
> 标签：launchd, xpc

我的应用程序 (Cocoa) 包含一个特权帮助工具 (C)，该工具使用 安装`SMJobBless`，模仿 Nathan de Vries 的[SMJobBlessXPC 示例代码](https://github.com/atnan/SMJobBlessXPC)。它在尝试连接到其导出的 Mach XPC 连接时成功启动。到目前为止，一切都很好。

我不知道以后如何终止该过程。当我的应用程序终止时，辅助工具不再运行任何业务——事实上，它明确地*不应该*再运行了。不过，我一生都无法弄清楚如何退出它。

从处理程序调用`exit(0)`XPC 事件似乎没有效果，可能是因为`exit`终止当前*线程*的文档状态，而不是进程。我的`main`功能如下所示：

```
int main(int argc, const char * argv[])
{
    // setup a Mach XPC service so that we can receive communication from the app
    xpc_connection_t service = xpc_connection_create_mach_service("com.my.service.name", dispatch_get_main_queue(), XPC_CONNECTION_MACH_SERVICE_LISTENER);
    xpc_connection_set_event_handler(service, ^(xpc_object_t connection){
        handle_xpc_connection(connection);
    });

    xpc_connection_resume(service);

    dispatch_main();

    xpc_release(service);
    return 0;
} 
```

我知道`dispatch_main`永远不会返回，所以这可能与它有关，但必须有一些方法可以让进程正常退出。我需要切换到使用`CFRunLoop`吗？

作为推论，我如何确保该过程不会*过早*终止？辅助工具或主应用程序都将准确地知道终止的正确时间。一旦作业开始，它会继续运行直到终止吗？我对 launchd 的生命周期管理有点模糊，而且它在`launchd.plist(5)`.

# c# - c#中如何为多个线程使用相同的线程函数？

> ID：13672219
> 
> 赞同：0
> 
> 时间：2012-12-02T18:14:05.253
> 
> 标签：c#, multithreading

> **可能重复：**
> [为什么使用“new DelegateType(Delegate)”？](https://stackoverflow.com/questions/7735159/why-use-new-delegatetypedelegate)

`Thread thread1 = new Thread(new ThreadStart(ThreadFunction));`只是想知道和 之间的区别`Thread thread1 = new Thread(ThreadFunction);`？请问有什么想法？？？

编辑：当我使用两个线程调用同一个线程函数时，该函数是作为一个线程的副本工作还是两个线程都使用相同的函数？

# java - 如何在构造函数中避免这种不必要的 throws 语句？

> ID：13672222
> 
> 赞同：2
> 
> 时间：2012-12-02T18:14:16.393
> 
> 标签：java, exception, constructor, try-catch

所以，我有一个名为 的类`Puzzle`，以及它的两个（相关）构造函数。一个构造函数不接受 args，另一个接受 int，但也抛出异常。基本思路是这样的：

```
public class Puzzle {
    // Fields, methods, etc.
    public Puzzle() {
        this(3);
    }

    public Puzzle(int n) throws Exception {
        if (n < 2) throw new Exception();

        // More constructor code
    }
} 
```

当然，这不会编译，因为接受 int 的构造函数会抛出异常，而没有 args 的构造函数不会处理或抛出异常。但是，因为很明显异常永远不会被抛出（在构造函数的主体中不再抛出异常），这应该无关紧要。我可以像这样使用一个空白的 try-catch 语句：

```
public Puzzle() {
    try {
        this(3);
    } catch (Exception e) {
        // Never happens
    }
} 
```

这里的问题是调用`this(3)`不再是构造函数的第一条语句，所以它不会编译。似乎我必须用一个`throws`子句标记这个构造函数，即使我知道它永远不会抛出异常。这真的很烦人，因为调用代码需要有不必要的 try-catch 块，否则它们也必须抛出异常。有没有一种我想念的优雅方法？我知道我可以轻松地复制和粘贴一些代码，但这与 OOP 中所有神圣的东西背道而驰。有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-02T18:20:26.240

使用运行时异常。具体来说，IllegalArgumentException 就是为此而设计的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T18:18:58.503

将构造函数中的代码分解为私有初始化方法：

```
public class Puzzle {
    // Fields, methods, etc.
    public Puzzle() {
        construct(3);
    }

    public Puzzle(int n) throws Exception {
        if (n < 2) throw new Exception();

        construct(n);        

    }

    private void construct(int n) {
        // More constructor code
    }
} 
```

# emacs - 如何将启动目录作为参数传递给 emacs

> ID：13672229
> 
> 赞同：0
> 
> 时间：2012-12-02T18:15:02.243
> 
> 标签：emacs, batch-file

假设我在 Windows 上有 emacs。我想做的是从 cmd 运行 emacs 并将我的启动目录作为 emacs 中的默认目录。

我已经将 emacs 目录放入我的 PATH 变量中，因此我可以从我的 cmd 中的任何位置执行“runemacs”。但是emacs中的默认目录不等于emacs的启动目录。Cx Cf 仍然指向 'c:\emacs'，它又在 emacs 配置中指定（setq default-directory "C:/emacs"）。

我应该怎么做才能让默认目录指向启动目录？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-02T19:22:04.353

你可以这样做：

```
(add-to-list
 'command-switch-alist
 '("-cwd" . (lambda (x) (setq default-directory (or x (getenv "PWD")))))) 
```

在您的 .emacs 文件中，`emacs -cwd`为`runemacs -cwd`. 此外，iirc，在 Windows 上是 CWD，而不是 PWD。嗯，这段代码的意思是：

*   添加一个函数来处理 Emacs 的自定义参数，即`-cwd`.
*   触发时，获取环境当前工作目录的值并设置`default-directory`为任何值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T06:04:53.883

如果您`(setq default-directory "C:/emacs")`从配置中删除该行，它不完全符合您的要求吗？

# c++ - C++/OOP 游戏设计

> ID：13672231
> 
> 赞同：7
> 
> 时间：2012-12-02T18:15:08.273
> 
> 标签：c++, sfml

我正在通过使用 SFML 和 OpenGL 制作一个小游戏来练习我的新手 C++ 技能。编程部分大部分都进​​行得很好，但我对实际代码/类设计有疑问。

我有一个类 MainLoop，它包含游戏循环并拥有以下每个类的一个实例：事件、图形、命令、游戏和 UI。我最初希望所有这些都是一个类（函数在不同的 .cpp 文件中分隔），但被告知这是 OOP/C++ 的错误方法。然而，虽然我可以看到分离它们的好处（封装、模块化、调试），但我似乎也遇到了很多不好的事情。让我以用户按下 UI 按钮为例。

首先，MainLoop 从 SFML 的窗口类中获取事件。MainLoop 将它发送到我自己的 Event 类，它解释事件并将其发送到 UI 类以检查它是否“点击”任何按钮。如果为真，则 UI 类将其发送到解释按钮命令的 Command 类。然后，最后，命令类将其发送到 Game 类或它需要去的任何其他地方。

对我来说，这一切似乎都非常沉重，而且至少按照我目前的做法，需要大量的前向声明（在我了解这些之前，我最终得到了大量的循环依赖） . 我怀疑它对性能也有多大好处。

无论如何，这里有什么我错过的技巧吗？这些类应该如何连接，它们应该如何通信？我应该如何将命令从 Event 类转发到 UI 类？我真的应该在任何地方都有前向声明、包含和东西，这不会破坏模块化吗？我是否应该让它全部通过 MainLoop 类并使用不需要声明的整数/浮点数/字符转发返回？我在这里有点不知所措。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T18:26:04.230

我可以向你推荐一些我在开发游戏时使用的设计，虽然它们肯定不是什么好东西，但我从来没有遇到过很多问题。我会保持简短，只是为了给你一个想法。

首先你需要一个视图管理器，这个管理器应该管理你游戏的当前视图，这可以实现为视图堆栈或其他任何东西。因此，您将拥有一个`ViewManager`知道游戏的所有视图并能够将内容分派到当前视图的类。

然后你需要一个抽象类`GameView`，它应该从外部提供基本接口，例如：

*   `drawMe()`, 绘制视图
*   `receivedMouseEvent(Event e)`，将接收鼠标事件
*   `activate()`并`deactivate()`执行在视图管理器中推送或弹出视图时应执行的操作

现在使用这个抽象类，您应该实现游戏的任何特定视图或部分视图，以便您可以在视图堆栈中推送和弹出它们。

好的是有子类来管理 UI 元素，例如`ActiveArea`响应点击的类，`Button`它继承自`ActiveArea`并且还能够提供两种状态的图形。这些元素应包含在存储在抽象视图中的可点击元素列表中，以便每个具体视图都可以将其按钮添加到通用实现中而无需担心。通过这种方式，您可以拥有类似（元代码）的东西

```
void AbstractView::receiveEvent(Event e) {
  for (ActiveArea *area in areas)
    if (area.isInside(e)) {
      area->action();
      return;
    }

  innerReceiveEvent(e); //which should be a pure virtual function that will call a method specified in concrete views
} 
```

通过这种方式，您将让每个视图管理自己的状态，以及负责绘制和管理事件的视图管理器，例如

```
void ViewManager::draw() {
  for (AbstractView *view in views) // from top to bottom of the stack
    view.draw();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-02T18:26:40.160

我可以想象它看起来很重，但这是正确的方法。请注意，函数调用一点也不繁重，它确实使整个事情更容易阅读。或者至少应该。;-)

每个类都应该有一个包含类定义的头文件，但不包含其成员函数的实现。任何文件都应该能够包含任何类头文件。只有当您使用模板（实现必须在头文件中）时，才可能存在循环依赖关系，但根据您的描述，我认为您没有它们。标题不需要相互包含。如果您需要在函数参数中传递指向其他类的指针或引用，则可以在标题的开头前向声明其他类。您应该能够在源文件的顶部包含任何内容。如果不是，请提供更多信息，说明您认为在您的情况下需要这样做的原因。

# apache - Apache 重定向 301 仅从某些 URL 中删除尾部斜杠

> ID：13672232
> 
> 赞同：-1
> 
> 时间：2012-12-02T18:15:14.413
> 
> 标签：apache, redirect, rewrite

我试图弄清楚如何使用 Apache 重写/重定向仅从某些 URL 中删除尾部斜杠。

例如：

我想 301 重定向 www.example.com/woo/ 到 www.example.com/woo

我只想从某些 URL 中删除尾部斜杠。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T18:42:58.880

对于单个 URL：

```
RedirectMatch ^/woo/$ http://www.example.com/woo 
```

对多个 URL 使用正则表达式组交替：

```
RedirectMatch ^/(woo|cage|travolta)/$ http://www.example.com/$1 
```

将适用于这三个示例：

```
http://www.example.com/woo/
http://www.example.com/cage/
http://www.example.com/travolta/ 
```

# mysql - 狮身人面像属性问题

> ID：13672235
> 
> 赞同：1
> 
> 时间：2012-12-02T18:15:27.667
> 
> 标签：mysql, sphinx

假设我有一个**广告**表，我正在尝试对其进行过滤。每个广告可以有许多“类型”，这些“类型”存储在**类型**表中，与中间的**advert_types**表相关联。很标准：

```
adverts
-------
id
name

types
-----
id
name

advert_types
------------
id
advert_id
type_id 
```

我只是想搜索用户选择的一个或多个类型 ID 中的所有广告：

```
SELECT a.id, a.name, at.type_id
    FROM adverts as a
    LEFT JOIN advert_types as at 
    ON a.id = at.advert_id
    WHERE at.type_id IN(1,2); 
```

我应该在这里注意，广告不需要有与之关联的类型（因此是左连接）。

假设类型 ID 1 被命名为“书籍”，类型 ID 2 被命名为“杂志”。在上面的查询中，我希望收到所有关于书籍、杂志或书籍和杂志的广告。

这在 MySQL 中运行良好，但在我的 Sphinx 索引中不太好，这是我的问题。如果我过滤“杂志”，我只会收到返回杂志的广告；书籍和杂志都没有。但是，如果我搜索“书籍”，我会成功获得我想要的一切。我看不出我哪里错了。我的索引中是否需要不同类型的联接？或者可能是 Sphinx 中的不同排序模式。

我已经在不同的过滤器中成功地完成了相同的操作，但关系是 1:1，所以有些事情让我相信我的查询和 Sphinx 处理多条记录的方式存在问题。

# c# - Windows应用程序中的大红色X

> ID：13672239
> 
> 赞同：3
> 
> 时间：2012-12-02T18:15:42.493
> 
> 标签：c#, .net, winforms, visual-studio-2010, datagrid

![在此处输入图像描述](../Images/c701bf65e931eff7877d2b1f31b31b02.png)谷歌搜索后，我看到了很多关于 Red X 背后可能原因的解释。我们的应用程序仅在极少数情况下显示某些系统。任何机构都可以建议我测试用例以在任何 c# 控件中生成 Big Red X，最好是 DataGrid。[我检查了博客http://www.sturmnet.org/blog/2005/03/23/red-x](http://www.sturmnet.org/blog/2005/03/23/red-x)中给出的测试用例，但没有办法生产。我的主要意图是对这个问题做一些研发

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T19:54:39.190

`Paint`当事件期间抛出未处理的异常时，会出现大红色 X。要重现，请创建以下测试类：

```
public class MyButton : Button
{
  protected override void OnPaint(System.Windows.Forms.PaintEventArgs pevent)
  {
    throw new Exception("my test exception");
  }
} 
```

构建此组件并将其放置到您的表单上。启动应用程序时，您将看到以下图像：

![在此处输入图像描述](../Images/7a3f174185ca5e8bdd99883bcd79525e.png)

您也可能在第一次失败时看到此错误`Paint`：

![在此处输入图像描述](../Images/4f0cebc929afa7d110c08976a0005e33.png)

# android - Google 放置 APi android 解析 JSon

> ID：13672242
> 
> 赞同：1
> 
> 时间：2012-12-02T18:15:59.850
> 
> 标签：android, google-api

对不起我的问题，但我是一个 android 初学者，我正在构建一个 android 应用程序，它可以获取用户的位置（经度和纬度）并返回 3 公里内的地方。为了做到这一点，我必须向谷歌发送请求并解析 json 对象，我按照教程进行操作，现在我卡住了！每次我运行应用程序时，应用程序都会崩溃（带有一个警告对话框，说应用程序已停止）。

这是我正在关注的教程的链接： [http ://www.androidhive.info/2012/08/android-working-with-google-places-and-maps-tutorial/](http://www.androidhive.info/2012/08/android-working-with-google-places-and-maps-tutorial/)

这是日志猫：

```
12-02 14:06:53.201: I/dalvikvm(620): Wrote stack traces to '/data/anr/traces.txt'
12-02 14:06:53.410: D/gralloc_goldfish(620): Emulator without GPU emulation detected.
12-02 14:06:54.271: D/dalvikvm(620): GC_CONCURRENT freed 216K, 4% free 9260K/9607K, paused 5ms+3ms
12-02 14:06:55.661: D/Restaurents Status(620): null
12-02 14:06:55.661: D/AndroidRuntime(620): Shutting down VM
12-02 14:06:55.661: W/dalvikvm(620): threadid=1: thread exiting with uncaught exception (group=0x409c01f8)
12-02 14:06:55.671: E/AndroidRuntime(620): FATAL EXCEPTION: main
12-02 14:06:55.671: E/AndroidRuntime(620): java.lang.NullPointerException
12-02 14:06:55.671: E/AndroidRuntime(620):  at com.ah906632.kalabizo.MainActivity$FindRestaurents$1.run(MainActivity.java:120)
12-02 14:06:55.671: E/AndroidRuntime(620):  at android.app.Activity.runOnUiThread(Activity.java:4170)
12-02 14:06:55.671: E/AndroidRuntime(620):  at com.ah906632.kalabizo.MainActivity$FindRestaurents.onPostExecute(MainActivity.java:117)
12-02 14:06:55.671: E/AndroidRuntime(620):  at com.ah906632.kalabizo.MainActivity$FindRestaurents.onPostExecute(MainActivity.java:1)
12-02 14:06:55.671: E/AndroidRuntime(620):  at android.os.AsyncTask.finish(AsyncTask.java:602)
12-02 14:06:55.671: E/AndroidRuntime(620):  at android.os.AsyncTask.access$600(AsyncTask.java:156)
12-02 14:06:55.671: E/AndroidRuntime(620):  at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:615)
12-02 14:06:55.671: E/AndroidRuntime(620):  at android.os.Handler.dispatchMessage(Handler.java:99)
12-02 14:06:55.671: E/AndroidRuntime(620):  at android.os.Looper.loop(Looper.java:137)
12-02 14:06:55.671: E/AndroidRuntime(620):  at android.app.ActivityThread.main(ActivityThread.java:4424)
12-02 14:06:55.671: E/AndroidRuntime(620):  at java.lang.reflect.Method.invokeNative(Native Method)
12-02 14:06:55.671: E/AndroidRuntime(620):  at java.lang.reflect.Method.invoke(Method.java:511)
12-02 14:06:55.671: E/AndroidRuntime(620):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
12-02 14:06:55.671: E/AndroidRuntime(620):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
12-02 14:06:55.671: E/AndroidRuntime(620):  at dalvik.system.NativeStart.main(Native Method)
12-02 14:06:56.231: I/dalvikvm(620): threadid=3: reacting to signal 3
12-02 14:06:56.241: I/dalvikvm(620): Wrote stack traces to '/data/anr/traces.txt' 
```

谢谢

# c# - 如何以编程方式创建 kmltreeview 文件夹并在其中添加地标？

> ID：13672246
> 
> 赞同：1
> 
> 时间：2012-12-02T18:16:21.010
> 
> 标签：c#, winforms, google-earth-plugin

使用 C# winforms-ge-plugin 在搜索协议找到它们时，我将 wi-fi 热点添加到 ge 地球和 kmltreeview。我想使用 GPS 坐标根据城市对它们进行分组。计划是将每个城市分组为一个文件夹，但我无法弄清楚如何在 kmltreeview 中创建文件夹。

最初我试过这个：

```
 var folder = kmlTreeView.CreateNode(FC.GEPluginCtrls.ApiType.KmlFolder);
        kmlTreeView.ParseKmlObject(folder); 
```

但它没有用。

我在另一个论坛上找到了一些基于 javascript 的代码，但它也不起作用：

```
 var folder = ge1.createFolder("test");
        folder.getFeatures().setVisibility(true);
        folder.getFeatures().setOpen(true);

        var placemark = ge1.createPlacemark();
        folder.getFeatures().appendChild(placemark);

        ge1.getFeatures().appendChild(folder); 
```

谢谢你的尽心帮助！TC

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T04:57:15.733

该`CreateNode`方法将任何 KmlObject 作为其参数，但您将其传递给 api 中一种类型的枚举器。

只需创建文件夹，然后解析它。

```
var folder = ge1.createFolder("test");
kmlTreeView.ParseKmlObject(folder); 
```

解释一下，KmlTreeView 不会生成或创建 KmlFolders，或“kml”任何其他东西 - 它只是显示加载到其中的 KmlObjects 的视图，作为层次结构中的节点。

“文件夹”，即您在树视图中实际看到的东西，只是 KmlContainer 的表示，例如 KmlFolder 或 KmlDocument。

使用 KmlTreeView 的另一种方法是简单地将您加载到插件中的任何 kmlObject 也直接加载到其中。这通常与调用 GEWebBeowser 的 FetchKml 方法返回的对象相同。例如。

```
 // load the plugin
    geWebBrowser1.LoadEmbededPlugin();

    // when the plug-in has loaded
    geWebBrowser1.PluginReady += (o, e) =>
    {
        // load the kml from the local server
        kmlTreeView1.SetBrowserInstance(e.ApiObject);
        geWebBrowser1.FetchKml("http://foo/some.kml");
    };

    // when the kml has loaded
    geWebBrowser1.KmlLoaded += (o, e) =>
    {
        // add the kml to the plugin and tree-view 
        geWebBrowser1.ParseKmlObject(e.ApiObject);
        kmlTreeView1.ParseKmlObject(e.ApiObject);
    }; 
```

这样，树视图将与插件中的显示同步 - 因此双击树视图中的节点会将您带到它们的位置，等等。

# android - 在android中将textView动态添加到gridView

> ID：13672250
> 
> 赞同：2
> 
> 时间：2012-12-02T18:16:46.817
> 
> 标签：android, android-layout

我正在尝试根据字符串的长度创建一个 gridView。

每个 textView 都应该显示一个字符 - 一个下划线 - 并假设字符串中没有空格......

我以前在 c# 中做过类似的事情——我创建了一个包含 15 个标签的表格视图，并根据字母的数量，将每个标签向右移动。它看起来或多或少是这样的：

```
public void setLetters(String str)
        {
            tableLayoutPanel1.Visible = false;
            int x = revah(str); //revah returns the number of letters in the string
            int yy = x / 2;
            int count = 0;
            if (count <= x)
            {
                tableLayoutPanel1.SetColumn(lbl0, yy);
                count++;
            }
            if (count <= x)
            {
                tableLayoutPanel1.SetColumn(lbl1, yy);
                count++;
            }
            if (count <= x)
            {
                tableLayoutPanel1.SetColumn(lbl2, yy);
                count++;
            }
            if (count <= x)
            {
                tableLayoutPanel1.SetColumn(lbl3, yy);
            count++;
        }
        if (count <= x)
        {
            tableLayoutPanel1.SetColumn(lbl4, yy);
            count++;
        }
        if (count <= x)
        {
            tableLayoutPanel1.SetColumn(lbl5, yy);
            count++;
        }
        if (count <= x)
        {
            tableLayoutPanel1.SetColumn(lbl6, yy);
            count++;
        }
        if (count <= x)
        {
            tableLayoutPanel1.SetColumn(lbl7, yy);
            count++;
        }
        if (count <= x)
        {
            tableLayoutPanel1.SetColumn(lbl8, yy);
            count++;
        }
        if (count <= x)
        {
            tableLayoutPanel1.SetColumn(lbl9, yy);
            count++;
        }
        if (count <= x)
        {
            tableLayoutPanel1.SetColumn(lbl10, yy);
            count++;
        }
        if (count <= x)
        {
            tableLayoutPanel1.SetColumn(lbl11, yy);
            count++;
        }
        if (count <= x)
        {
            tableLayoutPanel1.SetColumn(lbl12, yy);
            count++;
        }
        if (count <= x)
        {
            tableLayoutPanel1.SetColumn(lbl13, yy);
            count++;
        }
        if (count <= x)
        {
            tableLayoutPanel1.SetColumn(lbl14, yy);
            count++;
        }

        tableLayoutPanel1.Visible = true;

    } 
```

我希望在android中做类似的事情，使用gridView，但不知道如何开始......帮助......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T18:32:08.923

您可以使用 GridView（由 Activity 膨胀 - [http://developer.android.com/reference/android/app/Activity.html](http://developer.android.com/reference/android/app/Activity.html)）和其他带有 textview 的布局创建布局。之后，您必须实现一个适配器来用字符串填充 GridView（一个 ArrayAdapter）（在方法 getView 中）。getCount() 方法将确定项目的数量。此方法在 ArrayAdapter 类中，您必须重写它们。在这里检查：http: [//developer.android.com/reference/android/widget/ArrayAdapter.html](http://developer.android.com/reference/android/widget/ArrayAdapter.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T18:37:54.013

按照这个[链接](http://www.mkyong.com/android/android-gridview-example/) ，这将展示如何制作网格视图，你现在想要什么。你必须创建一个方法来读取你的 textview 值，然后制定一个逻辑将这些单词拆分为单个字符，然后将这些字符添加到 string[] 中。希望这会有所帮助

# php - PHP使用数组值截断和删除问题

> ID：13672251
> 
> 赞同：1
> 
> 时间：2012-12-02T18:16:51.440
> 
> 标签：php, mysql, arrays

简单地说，我想截断然后从mysql中的数据库中删除一个表，如下所示：

```
require_once('connect_m.php');

if(isset($_POST['del'])){
    if(is_array($_POST['del'])) {
        foreach($_POST['del'] as $value){
            $query = "TRUNCATE TABLE ".$value."";
            $result = mysql_query($query);
            if(!$result){
                echo "Wrong";
            }
            $query2 = "DROP TABLE ".$value."";
            $result2 = mysql_query($query2);
            if(!$result2){
                echo "Wrong2";
            }
        } 
```

至于connect_m.php，它只是建立mysql连接

```
<?php
$con = mysql_connect('localhost', 'root', '');
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

mysql_select_db("stores_m", $con);

?> 
```

但是我有`echo`并且`$value`我得到了**所需的正确值（正确的表名），**但代码不会截断或删除任何选定的表！最烦人的部分是 php/mysql 没有警告或错误消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T18:20:09.180

您需要删除表名周围的引号，TRUNCATE 和 DROP 才能工作

而不是回显“错误”，您应该显示 MySQL 返回的真正错误，这将帮助您了解发生了什么：

```
$result2 = mysql_query($query2);
if(!$result2){
    echo "Error '" . mysql_errno() . "' : " . mysql_error();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T18:21:48.870

**用`**替换**'**引号。所以你的查询应该是这样的：

 **```
$query = "TRUNCATE TABLE `".$value."`;";
$query2 = "DROP TABLE `".$value."`;"; 
```

您也可能根本不在表名周围使用引号。**

# java - 如何为我的测试指定特定的费率？

> ID：13672253
> 
> 赞同：1
> 
> 时间：2012-12-02T18:17:20.190
> 
> 标签：java, web-applications, jmeter, load-testing, performance-testing

我有一个具有以下结构的测试计划：

```
SimpleController  
      HTTP-Sampler-1  
      HTTP-Sampler-2  
      HTTP-Sampler-3  
      HTTP-Sampler-4  
      HTTP-Sampler-5  
      HTTP-Sampler-6  
      HTTP-Sampler-7 
```

这`SimpleController`捕获了“流”。这意味着采样器 1 到 7 是一个“单元”，这意味着在`HTTP-Sampler-7`发送其请求后，服务器后端将有一个特定的结果。

我有兴趣总共向服务器发送 30000 个“请求”。当我说“请求”时，我指的是控制器下的所有采样器。
但我想在每 X 秒内启动每个请求。

*   我的意思是一个线程应该每秒发送`HTTP-Sampler-1`一次`X`。

考虑到建议使用约 300 个线程，我应该使用什么配置来完成我的测试？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T20:04:57.193

如果这些请求是您要执行的唯一请求，则可以使用[Constant Throughput Timer](http://jmeter.apache.org/usermanual/component_reference.html#Constant_Throughput_Timer)。

恒定吞吐量计时器希望您为其提供以每分钟样本为单位的目标吞吐量。由于每 X 秒有 7 个请求，您可以将其设置为`7*60/X`. 还将计算吞吐量设置为“仅此线程”

您的测试计划将是相同的，只是将添加计时器。

如果你还想在这个线程中发送其他请求，我认为你应该使用[Beanshell](http://jmeter.apache.org/usermanual/component_reference.html#BeanShell_Timer)或 BSF。

# php - 二维 JSON 数组到 PHP

> ID：13672255
> 
> 赞同：1
> 
> 时间：2012-12-02T18:17:37.027
> 
> 标签：php, javascript, ajax, json

我有一个看起来像这样的 JSON 编码数组（它来自 2d PHP 字符串数组）：

```
[
[
    "a1",
    "a2",
    "a3",
    "a4"
],
[
    "b1",
    "b2",
    "b3",
    "b4"
],
[
    "c1",
    "c2",
    "c3",
    "c4"
]
] 
```

它已在[http://jsonlint.com/上得到验证](http://jsonlint.com/)

现在我想通过 Ajax 将此数组发送到另一个页面并将其转换回 2d PHP 数组。制作 JSON 数组后，我执行以下操作（其中 myJsonArray 是我在将数组制作成 Javascript 数组后给数组的名称。：

```
$.ajax({
       type: "GET",
       url: "somewhere.php",
       data: {jsonArray : myJsonArray},
       dataType: "json",
       success: function(msg){
         alert( msg); 
       }

     });
 } 
```

然后在somewhere.php我做：

```
 $json_array = $_GET['jsonArray'];

 $myArray = json_decode($json_array,true); 
```

但是当我回显结果时，我得到了

```
[Object object] 
```

我不确定如何重新创建 PHP 数组。

编辑：如何制作 myJsonArray：

```
<?php
$array = json_encode($original_array);

echo "var myJsonArray = ". $array . ";\n";
?> 
```

我还想指出，出于测试目的，在警告框中，我让它在成功时打印 myJsonArray，它确实按预期打印出数组。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T18:43:51.267

“[Object object]”是 javascript 将对象评估为字符串。

当您将可选的“true”传递给 json_decode 时，您就是在告诉它它是一个关联数组。但是你真的想要一个数组数组。

我确信如果您使用 JSON.stringify 打印到您的日志，您将拥有正确的数据，除了外括号是“{..}”。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-02T19:32:29.467

我已经尝试执行下面的代码片段来解码上面指定的 json 内容，它对我来说工作正常。

```
<?php
               $a=array(array("a1","a2","a3","a4"),array("b1","b2","b3","b4"),array("c1","c2","c3","c4"));
               $json_content=json_encode($a);
              $json_array=json_decode($json_content,true);
               echo '<pre>';
                print_r($json_array);
?> 
```

# linux - 如何修复此 Bash 函数以从指定路径开始并递归列出其子目录以及这些子目录等

> ID：13672263
> 
> 赞同：2
> 
> 时间：2012-12-02T18:18:33.307
> 
> 标签：linux, bash, shell, scripting

我正在尝试编写一个脚本来搜索目录及其子目录等以查找与给定正则表达式匹配的文件。所以我首先尝试编写一个函数来首先获取目录和子目录。由于某种原因，它目前似乎只获取指定目录中的第一个子目录。

这是功能：

```
getDirs() {

cd "$1"
for i in *; do
    if [ -d "$i" ]; then
        echo "dir: $PWD/$i"
        getDirs "$i"
    fi
done
}

getDirs $path 
```

任何想法如何解决这一问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T18:24:25.277

如果您需要*正则表达式*来搜索文件名，请尝试使用[find](/questions/tagged/find "显示标记为“查找”的问题")执行此操作：

 *```
regex="YourRegexPattern"
find "$1" -type f -regextype posix-egrep -regex "$regex" 
```

如果您想获取所有目录/子目录：

```
find . -type d 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T18:35:19.237

这应该这样做，尽管`find`效率更高。

```
getDirs() {
    for i in "$1"/*; do
        if [ -d "$i" ]; then
            echo "$i"
            getDirs "$i"
        fi
    done
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T18:41:58.150

当然，那只是因为你在循环之后永远不会回到上一个目录。你可以把所有东西都放在一个子shell中：

```
getDirs() {
    (
    cd "$1"
    for i in *; do
        if [[ -d "$i" ]]; then
            echo "dir: $PWD/$i"
            getDirs "$i"
        fi
    done
    )
}

getDirs $path 
```

`cd`或在循环之后将当前目录保存到其中：

```
getDirs() {
    local currentdir=$PWD
    cd "$1"
    for i in *; do
        if [[ -d "$i" ]]; then
            echo "dir: $PWD/$i"
            getDirs "$i"
        fi
    done
    cd "$currentdir"
}

getDirs $path 
```

或其他......我想你现在明白你的错误在哪里了！

您还应该检查您是否`cd`使用过，例如`cd "$1" || <do something as the cd failed>`.*

# php - 在函数中使用 PHP define() 对该函数的调用者实际上有用吗？

> ID：13672270
> 
> 赞同：3
> 
> 时间：2012-12-02T18:19:19.850
> 
> 标签：php, function, scope, constants

在 php.net 手册页上`define()`，有一个[用户提供的注释](http://php.net/manual/en/function.define.php#109761)，建议您可以`define()`从函数中有效地调用。

简单解释一下，建议是创建一个这样的函数：

```
<?php  
function xdefine($a) {
  foreach($a as $k => $v)
    define($k, $v); 
}  
?> 
```

然后像这样使用它：

```
<?php
xdefine(array(
    "SECOND" => 1,
    "MINUTE" => 60,
    "HOUR" => 3600,
    "DAY" => 86400,
    "WEEK" => 604800,
    "MONTH" => 2592000, // 30 days month
    "YEAR" => 31536000,
    "LEAPYEAR" => 31622400
));
?> 
```

但是我的感觉和我的经验都是这不起作用：在`xdefine()`调用之后，每个标识符都只是评估为它自己的名称，而不是`xdefine()`应该绑定到它的值。

原因对我来说似乎很明显（即，因为符号`xdefine()`在解析/加载包含调用的模块时获取它们的值），但也许我缺少一些微妙之处。这篇文章的作者用一个可爱的 Unicode 字符为他的函数命名了一些不同的东西，但我很确定这只是外观上的不同。

（顺便说一句，如果我没有定义类似的函数，类似的东西对我有用*，*`xdefine()`而是只`foreach()`对数组的内容运行相同的循环，前提是循环和数组都在模块范围内。这也是从我的角度来看，预期的行为。）

那么，有人可以看看[原始帖子](http://php.net/manual/en/function.define.php#109761)并告诉我它是否真的有什么？还是作者说错了？

（我会将其发布到引用的 php.net 页面，但我认为如果我将其发布在这里，我会更快地关注这个问题:-)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-02T18:27:11.500

示例功能有效。[常量的范围是全局的](http://php.net/manual/en/language.constants.php)。然而，这样做的原因是可疑的恕我直言。

# java - 检查列表是否属于一种类型或其他类型

> ID：13672271
> 
> 赞同：1
> 
> 时间：2012-12-02T18:19:26.413
> 
> 标签：java, jsp, servlets

我有`List<Zones>`并且`List<Locations>`我正在将它传递给一个通用函数......

```
public String checkListType(List<?> checkList){
    // Now here I want to check if list is of type locations than
        return "locations"
    else {
        return "Zones";
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T18:28:51.483

这看起来像一个[XY 问题。](https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem) 我会按要求回答，但是如果您提供有关您正在尝试做的事情的更多信息，我可能会为您提供更好的答案。

Java 中的泛型在运行时不可用；[http://docs.oracle.com/javase/tutorial/java/generics/erasure.html](http://docs.oracle.com/javase/tutorial/java/generics/erasure.html)

你有几个选择。您可以将类传递给方法。

```
public <T> String checkListType(Class<T> clazz, List<T> checklist) {
   if ("Locations".equals(clazz.getName()) {
   } else if (...) {
   }
} 
```

您还可以使用反射来识别第一个元素的类型。

```
public String checkListType(List<?> checkList) {
   if (!checkList.isEmpty()) {
       Class<?> itemClass = checkList.get(0).getClass();
       if ("Locations".rquals(clazz.getName()) {
          ...
       }
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T18:29:37.917

愿这有帮助。

```
public String checkListType(List<?> checkList){
    if( checkList == null || checkList.isEmpty() ) {
      return "UnKnown" ;
    }
    Object obj = checkList.get(0);
    if( obj instanceof Zones ) {
         return "Zones";
    } else if( obj instanceof Locations ) {
                 return "locations" ;
    }     
    else {
      return "Unknown";   
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T18:30:18.737

如果更改方法的签名以添加新参数，则可以使用[Super Type Token 模式](http://gafter.blogspot.com/2006/12/super-type-tokens.html)在运行时识别类型参数。既是超类型的tokesn，又`Class<T>`可以`Locations`区别于`Zones`. 但是，超级类型令牌更强大，因为它们也可以`Set<Locations>`区分`Set<Zones>`。

[Guava](http://code.google.com/p/guava-libraries/)提供了[TypeToken](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/reflect/TypeToken.html)的实现。

```
public <T> String checkListType(List<T> checkList, TypeToken<T> typeToken) {
    if (typeToken.equals(TypeToken.of(Locations.class))) {
        return "Locations";
    } else {
        return "Zones";
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-02T18:32:20.123

泛型是使用类型擦除实现的，因此您不能轻易做到这一点。如果已知列表非空，您可以执行类似的操作

```
public String checkListType(List<?> checkList){
    Object first = checkList.get(0);
    if (first instanceof Locations) {
        return "locations"
    else {
        return "Zones";
    }
} 
```

但这是一个非常糟糕的主意。

来自有效 C++，由 Scott Meyers 撰写：

> 任何时候你发现自己在编写“如果对象是 T1 类型，则做某事，但如果它是 T2 类型，则做其他事情”形式的代码，给自己一记耳光。

引自[http://www.javapractices.com/topic/TopicAction.do?Id=31](http://www.javapractices.com/topic/TopicAction.do?Id=31)

# c# - 过滤 RadGridTemplateColumn 包含 RadGridList

> ID：13672279
> 
> 赞同：0
> 
> 时间：2012-12-02T18:20:20.723
> 
> 标签：c#, asp.net, telerik, telerik-grid, radgrid

我有一个 Telerik Grid 包含一个模板列，该列包含一个`RadGridList`并从 StringCollection 接收其数据，这意味着我有一个包含多个值的列。

我正在尝试使用组合框过滤此列，我可以过滤此类列但只有单个数据，但是如何过滤包含由表示的多个数据的列`StringCollection`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T15:36:06.793

一个简单的解决方案是使用`Contains`函数作为 your`CurrentFilterFunction`而不是`EqualTo`.

阅读有关[GridKnownFunctions](http://www.telerik.com/help/aspnet-ajax/t_telerik_web_ui_gridknownfunction.html)的更多信息。

# android - SQlite 查询按错误列排序

> ID：13672284
> 
> 赞同：1
> 
> 时间：2012-12-02T18:21:10.853
> 
> 标签：android, sqlite

这是我的表设置：

```
public static final String TABLE_DEBT = "debt";
public static final String COLUMN_ID = "_id";
public static final String COLUMN_DEBT_NAME = "debt_name";
public static final String COLUMN_DEBT_TOTAL = "debt_total";
public static final String COLUMN_APR = "apr";
public static final String COLUMN_PAYMENT = "payment";
public static final String COLUMN_SPECIAL_RATE = "s_rate";
public static final String COLUMN_SPECIAL_TIME = "s_time";
public static final String COLUMN_FIRST_FEE = "first_apr_fee";
public static final String COLUMN_PAY_DATE = "pay_date";
private static final String DATABASE_NAME = "debt.db";
private static final int DATABASE_VERSION = 1;

private static final String DATABASE_CREATE = "create table " + TABLE_DEBT + "( " + COLUMN_ID + " integer primary key autoincrement, " + COLUMN_DEBT_NAME + " text not null, " + COLUMN_DEBT_TOTAL
            + " text not null, " + COLUMN_APR + " text not null, " + COLUMN_PAYMENT + " text not null, " + COLUMN_SPECIAL_RATE + " text, " + COLUMN_SPECIAL_TIME + " text, " + COLUMN_FIRST_FEE + " text, " + COLUMN_PAY_DATE + " text)"; 
```

我正在以这种条件格式使用这些查询来按用户选择进行排序：

```
 if (DebtPlanner.PlanType.equals("highint")) {
         c = database.rawQuery("SELECT *  FROM debt ORDER BY apr DESC;", null);
         Log.d("TAG", "DebtPlanner.PlanType is " + DebtPlanner.PlanType);
    } else if (DebtPlanner.PlanType.equals("lowbal")) {
         c = database.rawQuery("SELECT *  FROM debt ORDER BY debt_total ASC;", null);
         Log.d("TAG", "DebtPlanner.PlanType is " + DebtPlanner.PlanType);
    } else if (DebtPlanner.PlanType.equals("highbal")) {
         c = database.rawQuery("SELECT *  FROM debt ORDER BY debt_total DESC;", null);
         Log.d("TAG", "DebtPlanner.PlanType is " + DebtPlanner.PlanType);
    } 
```

**添加代码：**

```
for (c.moveToFirst(); !c.isAfterLast(); c.moveToNext()) {
            indName[j++] = c.getString(c.getColumnIndex("debt_name"));
            indBal[k++] = c.getDouble(c.getColumnIndex("debt_total"));
            indPay[l++] = c.getDouble(c.getColumnIndex("payment"));
            indApr[m++] = c.getDouble(c.getColumnIndex("apr"));
            indSRate[e++] = c.getString(c.getColumnIndex("s_rate"));
            indSTime[f++] = c.getInt(c.getColumnIndex("s_time"));
            indDay[d++] = c.getString(c.getColumnIndex("pay_date"));

            rowCounter[n++] = n;
        }

    for (int i : rowCounter) { 

       nameList.add(indName[r++]); // This is the name of each debt that shows out of order.
       // lots of edited calucaltion here

     } 
```

但是，它们排序，而不是按预期值排序。例如，当我说按`debt_toal`（ASC 或 DESC）排序时，它按`debt_name`（它使 ASC 或 DESC 部分正确）排序。

我查看了手机中的实际表格，所有数据都在正确的列中。我什至不知道从这里去哪里？

额外代码：

```
public class DebtPlanner extends Application {

    public static String PlanType = "highint";

    public static String highIntPlan() {
        return DebtPlanner.PlanType = "highint";
    }

    public static String lowBalPlan() {
        return DebtPlanner.PlanType = "lowbal";
    }

    public static String highBalPlan() {
        return DebtPlanner.PlanType = "highbal";
    } 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T18:24:50.170

在 Java 中比较 String 时，您**必须**使用`equals()`，而不是`==`：

```
if (DebtPlanner.PlanType.equals("default")) { 
```

[How do I compare strings in Java?](https://stackoverflow.com/q/513832/1267661)中有很好的解释。

* * *

此外，您应该`else if`在后续查询中使用它们，因为它们是相互排斥的想法。

* * *

> 它一直在正确排序。问题是，该列是字符串。所以，从技术上讲，2大于1000000。现在我只需要弄清楚如何纠正这个......

好的，使用[`CAST`](http://www.sqlite.org/lang_expr.html#castexpr)将列排序为整数而不是文本：

```
SELECT * FROM debt ORDER BY CAST(apr AS INTEGER) DESC; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T18:26:54.013

采用

```
Log.d("TAG", "DebtPlanner.PlanType is " + DebtPlanner.PlanType); 
```

确保您在多个`if`s中拥有正确的数据

# ruby-on-rails-3 - 列出视图中连接方法的项目

> ID：13672285
> 
> 赞同：0
> 
> 时间：2012-12-02T18:21:23.103
> 
> 标签：ruby-on-rails-3, methods

我有一种方法可以连接我的数组中的项目，当它们被调用到视图时，它们会以句子的形式呈现，所有这些都在一行上。

```
def ingredient_names(ingredients)
if ingredients
  ingredient_array = ingredients.map {|ing| ing.ingredient_name}
  ingredient_array.join("\n")
end
end 
```

我将如何让数组中的每个项目显示为列表？所以例如

```
flour
eggs
water 
```

有没有一种方法或者我会改变

```
("\n) 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T18:31:31.183

试试这个

```
def ingredient_names(ingredients)
  return ''  if !ingredients

  ingredients.map(&:ingredient_name)*'<br/>'
end 
```

在视图中称之为

```
<%= raw(ingredient_names(ingredients)) %> 
```

# c++ - 带有结构的 C++ 映射

> ID：13672288
> 
> 赞同：4
> 
> 时间：2012-12-02T18:21:33.520
> 
> 标签：c++, dictionary, struct

所以，我得到了这个：

```
struct People_Info {
  bool isWorking;
  std::string name;
  int age;
  float height;
};
int counter = 0;
int random = urand(1, 4);
std::map<uin64, People_Info> PeopleMap; 
```

现在，将调用一个函数，该函数将使用此结构在地图中创建一个条目，该结构将设置一些默认值：

```
PeopleMap[counter].isWorking = false;
PeopleMap[counter].name = "Mr";
PeopleMap[counter].age = 1;
PeopleMap[counter].height = 1.60f;
counter++; 
```

现在，这是应该为新人创建条目的函数，但是，在整个脚本中，我将删除一些条目，所以如果我有 5 个元素，并且我删除了例如第二个元素，那么，我想编辑一些变量地图上的每个人：

```
for(int i = 0; i < 5 ; i++) {
  if(PeopleMap[i] == PeopleMap.end())  // Don't edit map entries that are erased
    continue;

  PeopleMap[i].isWorking = true;
} 
```

现在，由于某种原因，它仍在编辑所有条目，我是否需要使用 new 为每个条目创建一个结构？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T19:15:41.637

`PeopleMap.end()`不返回有效参数，它就像一个幽灵节点。

例如，在 map 中迭代的一种方法可能是：

```
for(std::map<uin64, People_Info>::iterator it = PeopleMap.begin();it != PeopleMap.end() ;it++) 
```

看，`PeobleMap`就像一个幽灵节点到底意味着你已经走到了尽头。在上一篇`for`中，如果您想访问地图值，您可以这样做：

```
it->first // uint64
it->second.isWorking 
```

因此，如果您使用迭代器，则不必检查已擦除的值，并且可以编辑映射中每一对中的参数（较少键）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T18:45:43.753

当使用下标运算符访问映射中不存在的键时，会插入相应的元素。该对象之前被擦除无关紧要：如果它不存在，它仍然会被插入。

要访问地图中的所有元素，您不使用键，而是在地图上使用迭代器。这样就不会插入新元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T18:29:57.237

以下是不正确的：

```
if(PeopleMap[i] == PeopleMap.end()) 
```

你可能是想说

```
if(PeopleMap.find(i) == PeopleMap.end()) 
```

# mysql - 使用 LIKE 语句时 MySql 查询挂起

> ID：13672290
> 
> 赞同：0
> 
> 时间：2012-12-02T18:21:40.777
> 
> 标签：mysql, wordpress, join

我正在尝试在 Wordpress 中设置警报，以便用户可以创建警报，以便在创建的新帖子（属性）符合他们设定的标准（警报）时收到通知。我的计划是使用两种帖子类型来做到这一点，一种用于属性，一种用于警报。然后，当保存属性帖子时，它将执行以下示例查询：

```
SELECT 
    post_author
    FROM 
        wp_posts
    INNER JOIN wp_postmeta m1
        ON wp_posts.ID = m1.post_id
        AND m1.meta_key = 'a_property_type'
        AND m1.meta_value = 'flat'
    INNER JOIN wp_postmeta m2
        on wp_posts.ID = m2.post_id
        AND m2.meta_key = 'a_bedrooms_min' 
        AND m2.meta_value <= '2'
    INNER JOIN wp_postmeta m3
        on wp_posts.ID = m3.post_id
        AND m3.meta_key = 'a_bedrooms_max' 
        AND m3.meta_value >= '2'
    INNER JOIN wp_postmeta m4
        on wp_posts.ID = m4.post_id
        AND m4.meta_key = 'a_bathrooms_min' 
        AND m4.meta_value <= '2'
    INNER JOIN wp_postmeta m5
        on wp_posts.ID = m5.post_id
        AND m5.meta_key = 'a_bathrooms_max' 
        AND m5.meta_value >= '2'      
    INNER JOIN wp_postmeta m6
        on wp_posts.ID = m6.post_id
        AND m6.meta_key = 'a_garden' 
        AND m6.meta_value >= '1'        
    INNER JOIN wp_postmeta m7
        on wp_posts.ID = m7.post_id
        AND m7.meta_key = 'a_garage' 
        AND m7.meta_value >= '1'    
    INNER JOIN wp_postmeta m8
        on wp_posts.ID = m8.post_id
        AND m8.meta_key = 'a_parking' 
        AND m8.meta_value >= '1'        
    INNER JOIN wp_postmeta m9
        on wp_posts.ID = m9.post_id
        AND m9.meta_key = 'a_double_glazing' 
        AND m9.meta_value >= '1'    
    INNER JOIN wp_postmeta m10
        on wp_posts.ID = m10.post_id
        AND m10.meta_key = 'a_country' 
        AND m10.meta_value LIKE 'Scotland'        
    WHERE
        wp_posts.post_type = 'alerts'
        AND wp_posts.post_status = 'publish'
    GROUP BY 
       wp_posts.ID
    ORDER BY 
        wp_posts.post_date DESC 
```

这有效并且确实返回匹配标准集的属性，但是当我引入 LIKE 时，它确实使查询挂起。我正在使用默认的 Wordpress 表“wp_posts”和“wp_postmeta”。我尝试在“meta_value”列上设置索引，但因为它是一个“longtext”字段，它不允许我这样做。

是否有更好的解决方案可以做到这一点，或者我的查询可以更有效地编写？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T22:06:27.157

除了 eggyal 提供的东西，我也会在 (post_id, meta_key, meta_value) 上添加一个索引。如果这对您的查询没有帮助，我会尝试另一件事。将除 LIKE 之外的所有元素预包装到预查询中，以便首先处理内部查询并返回一组非常小的 ID，然后加入 LIKE 条件。

假设您有 1000 个属性，但只有 35 个符合您的所有其他条件，并且在亚秒级时间内得到解决。现在您只有 35 条记录将被尝试添加到您的附加 LIKE 条件。就像是

```
select
      wp.Post_Author
   from
      ( SELECT 
              post_id,
              post_author
           FROM 
              wp_posts
                 INNER JOIN wp_postmeta m1
                    ON wp_posts.ID = m1.post_id
                   AND m1.meta_key = 'a_property_type'
                 INNER JOIN the m2 through m9 
           WHERE
               type and status criteria ) as PreQuery
      INNER JOIN your m10 version
         on  PreQuery.Post_ID = m10.post_id
        AND ... rest of join condition 
```

# c++ - boost::spirit , 如何获得占位符的“价值”

> ID：13672291
> 
> 赞同：4
> 
> 时间：2012-12-02T18:21:42.397
> 
> 标签：c++, boost, boost-spirit

我正在尝试构建一个解析器，它接受“/integer/(/integer/)”形式的字符串并生成一个 std::tuple 现在我有：

```
qi::rule<string::iterator,std::tuple<int,int>()> parser = 
      (qi::int_ >> '(' >> qi::int_ >> ')')[_val = std::make_tuple(qi::_1,qi::_2)] 
```

哪个不会编译，因为占位符 qi::_i 不是正确的类型。如何从占位符中“提取”基础值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T19:06:31.290

呃，你可以只使用*自动属性传播*（又名“自动规则”）：

```
#include <boost/spirit/include/qi.hpp>
#include <boost/fusion/adapted.hpp>
#include <tuple>

namespace qi = boost::spirit::qi;

main( int argc, char* argv[] )
{
    qi::rule<std::string::iterator,std::tuple<int,int>()> parser;

    parser = 
        (qi::int_ >> '(' >> qi::int_ >> ')')
        ;
} 
```

请注意用于适应`std::tuple`Fusion 序列的附加标头。

# iphone - iCloud：KeyValue 存储还是文档存储？

> ID：13672292
> 
> 赞同：0
> 
> 时间：2012-12-02T18:21:48.027
> 
> 标签：iphone, ios, xcode, ipad, icloud

我是 iCloud 存储的相对初学者，在我构建下一个应用程序之前，我想了解一些关于什么会更好的意见。

这个应用程序将需要存储许多包含字符串数组的 NSDictionaries，仅此而已。将有 365 个字典（一年中的每一天一个），每个字典至少包含 8 个包含小字符串的数组。我知道这种数据类型可以存储在键值中，但是我没有经验来判断这是否会超过 1mb 的限制。

所以我的问题是，对于上述场景，我应该在 icloud 上使用键值还是文档存储？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T20:44:52.533

如果它可能超过最大限制，您应该考虑将您的字典存储在 PLIST 文件或核心数据中。

假设您要使用 PLIST 文件。您可以将字典写入保存在文档目录中的文件。然后，使用下面的代码，您可以将 PLIST 文件从文档目录移动到 iCloud，它将同步到您的其他设备。

当您的应用检测到 iCloud 中有 PLIST 文件的更新版本时（您可以检查 iCloud 中文件的修改日期，看看它是否比本地存储的更新），从 iCloud 复制它并放在文档中目录。

```
//find the URL of your app's ubiquitous container
//setting URLForUbiquityContainerIdentifier to nil returns the URL for the first ubiquitous container in the list in your app's entitlements, you can replace nil with a string
self.ubiquitousURL = [[NSFileManager defaultManager] URLForUbiquityContainerIdentifier:nil];

//you may want to update self.ubiquitousURL to the documents folder in the ubiquitous container
//self.ubiquitousURL = [self.ubiquitousURL URLByAppendingPathComponent:@"Documents"];

//place the PLIST in iCloud
[[NSFileManager defaultManager] setUbiquitous:YES itemAtURL:plistURL destinationURL:[self.ubiquitousURL URLByAppendingPathComponent:@"file.plist"] error:NULL];

//you have detected there is a new file in iCloud and want to copy it to the documents directory
[[NSFileManager defaultManager] startDownloadingUbiquitousItemAtURL:[self.ubiquitousURL URLByAppendingPathComponent:@"file.plist"] error:NULL];
[[NSFileManager defaultManager] copyItemAtURL:[self.ubiquitousURL URLByAppendingPathComponent:@"file.plist"] toURL:plistURL error:NULL]; 
```

`self.ubiquitousURL`是您的 iCloud 目录的 URL。`plistURL`是文档目录中 PLIST 文件的 URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T19:47:21.257

你在这里有很多选择。您可以使用应用程序的 Documents 目录来存储 PLIST、SQLite 数据库，或者更好的是，使用 Core Data。您实际上可以使用其中的任何一个，并且以后仍然可以集成 iCloud。无论您是否使用 iCloud，以上建议都是从最差到最好的顺序排列的。PList 肯定是最简单的。

如果你想了解更多关于 Core Data 和 iCloud 的知识，我强烈推荐斯坦福的 CS193P 课程，可以在 iTunes U 上免费获得。

# database - Web 服务 - Web 方法和数据库

> ID：13672297
> 
> 赞同：0
> 
> 时间：2012-12-02T18:22:34.247
> 
> 标签：database, web-services, visual-studio

我正在尝试编写一个 Web 方法，使我能够通过 Web 服务将文本直接插入到 sql 表中。我设法在 Web 服务 xml 页面上查看手动输入到表格中的任何文本。我现在想做的就是能够将数据从 web 服务插入到数据库中。

这背后的想法是，让用户能够通过 Web 服务访问视图并将信息/文本添加到数据库中。我将不胜感激在下面的最后一个 WebMethod (public void InsertInfo...) 中解决问题的任何帮助。

我需要有关如何创建/添加将数据直接插入表的文本框的帮助。或通过 Web 服务将信息插入表格的任何其他方式。

```
namespace SkiFriendService
    {
        /// <summary>
        /// Summary description for Service1
        /// </summary>
        [WebService(Namespace = "http://tempuri.org/")]
        [WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
        [System.ComponentModel.ToolboxItem(false)]
        // To allow this Web Service to be called from script, using ASP.NET AJAX, uncomment the following line. 
        // [System.Web.Script.Services.ScriptService]
        public class Service1 : System.Web.Services.WebService
        {
            SqlConnection con = new SqlConnection(System.Configuration.ConfigurationManager.ConnectionStrings["SkiFriendService.Properties.Settings.Setting"].ToString());

            [WebMethod]
            public string simpleMethod(String srt)
            {
                return "Hello "+srt;
            }

            [WebMethod]
            public int anotherSimpleMethod(int firstNum, int secondNum)
            {
                return firstNum + secondNum;
            }

            [WebMethod]
            public string[] getMessage(string from, string to) 
            {
                List<string> messages = new List<string>();
                con.Open();
                    string sqlquery = string.Format("select Message from MessageTable where Sender='{0}' and Receiver='{1}'", from, to);
                SqlCommand com = new SqlCommand(sqlquery, con);
                SqlDataReader sqlReader = com.ExecuteReader();
                while (sqlReader.Read()) 
                {
                    messages.Add(sqlReader.GetString(0));
                }
                con.Close();
                return messages.ToArray();
            }

            [WebMethod]
            public void InsertInfo(string sender, string receiver, string message)
            {
                List<string> messages = new List<string>();
                con.Open();
                string sql = "INSERT INTO MessageTable (Sender, Receiver, Message) VALUES (@Sender, @Receiver, @Message)";
                SqlCommand com = new SqlCommand(sql, con);
                SqlDataReader sqlReader = com.ExecuteReader();
                while (sqlReader.Read())
                {
                    messages.Add(sqlReader.GetString(0));
                }
                con.Close();

            }

            }

            } 
```

我希望我对此已经足够清楚了。我还在学习这个，所以很多这对我来说都是新的。我将不胜感激任何帮助。谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T18:29:44.273

```
 [WebMethod]
        public void InsertInfo(...)
        {
            ...
            SqlDataReader sqlReader = com.ExecuteReader(); 
```

如果你想插入数据，你*可能*不想使用名称中带有*DataReader*的东西。请改用[DataAdapter](http://msdn.microsoft.com/en-us/library/33y2221y.aspx)。

* * *

**更大的问题**

一个更大的问题是，您似乎在未阅读的情况下将代码复制并粘贴到了 InsertInfo Web 方法中。如果你读过你的代码，你的大脑*应该*至少锁定了包括*Read*或*Reader*在内的六个标记中的一个。锁定后，你的大脑应该对自己说，“我自己，我*在哪里*更新或插入*任何东西？我似乎只是在*阅读*东西。”

通过阅读其他人的代码，然后通过阅读自己的代码来培养这种技能。*根据我的经验，仅仅通过阅读自己的*代码不会很快学会。我们的大脑似乎让我们的眼睛对自己的错误视而不见。

# cordova - android 地理定位权限提示未到来 - phoonegap 应用程序

> ID：13672300
> 
> 赞同：1
> 
> 时间：2012-12-02T18:23:02.080
> 
> 标签：cordova

我正在构建一个 HTML5 应用程序，在其中我正在测试地理定位功能。我正在使用下面的代码来访问用户的地理位置。

```
if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(this.showPosition);
    } 
```

当我使用 phonegap 在 android 上运行此代码的应用程序时，我看不到允许或拒绝用户地理定位的权限提示。

但是，在桌面浏览器上会显示提示。

我直接加载我的网页，如下面的代码在我的主要活动文件中。我没有使用 webview 对象。

```
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);

    super.loadUrl("file:///android_asset/Code/Test.html");
} 
```

清单文件中正确提供了权限，我正在获取用户的地理位置，但权限提示未在 android 中显示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T19:06:58.610

我没有参考来确认我的答案，但我相信这是预期的行为。当您在 Web 浏览器中加载应用程序时，您没有明确授予应用程序知道您的位置的权限。因此，系统会提示您授予应用访问该信息的权限。在移动应用程序中，您在安装应用程序时授予该权限。这就是为什么（至少在 Android 中）您会在安装应用程序时看到应用程序所需的权限列表。然后，当您运行该应用程序时，您已经说过它可以访问您的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-28T21:29:33.273

确保您在设备准备就绪后调用地理定位 API - 请参阅[此处](https://stackoverflow.com/a/5018461/1469208)了解更多详细信息。

# mysql - MySQL5.1 我无法工作的两个查询

> ID：13672305
> 
> 赞同：1
> 
> 时间：2012-12-02T18:23:36.813
> 
> 标签：mysql

我需要帮助的第一个查询 - 我有一个名为 Stadium 的表，其中包含有关不同体育场的信息。每天可以在某个体育场进行多场比赛。Stadium.Number 是指体育场的编号，Stadium.Date 是指比赛的日期。我需要查询列出每个 Stadium.Number，即举办最多比赛的日期。

我真的不擅长写查询所以这就是我到目前为止的全部内容：

```
SELECT Number, count(Date)
FROM Stadium
ORDER BY Stadium.Number, Stadium.Date 
```

第二个查询 - 我需要列出与去年 1 月 (2011-01) 相比，今年 1 月 (2012-01) 至少多出 25% 的比赛的 Stadium.Number。 日期是指比赛的日期.

感谢大家的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T18:29:43.013

**查询一：**

```
SELECT Number, Date
FROM Stadium
group by Number,Date
order by count(Date) desc 
```

**查询 2：**

```
SELECT Number,count(Date)
FROM Stadium
where date>='2012-01-01' and date <='2012-01-31'
group by Number
having count(Date)> ((select count(Date)
FROM Stadium
where date>='2011-01-01' and date <='2011-01-31')*0.25) 
```

检查这个[演示](http://sqlfiddle.com/#!2/6b1e2/7)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T18:31:14.493

我真的认为你应该规范化你的数据库模式，它会让这样的查询很容易解决。

例如 - 我认为 Stadium 和 Game 应该是 2 个单独的表，具有一对多的链接。（如果一场比赛可以跨越不同的体育场，甚至是多对多）。

但是对于您的示例：

```
SELECT s.Number AS Stadium, s.[Date], COUNT(s.[Date]) AS 'Count'
FROM Stadium s
GROUP BY s.Number, s.[Date]
ORDER BY s.Number, COUNT(s.[Date]) DESC 
```

假设 Stadium 表上有一个 Id，这将适用于您的第二个查询 - 但不确定是否有更有效的方法。

```
SELECT s.Number AS Stadium,
       COUNT(y1.[Date]) AS Year1Count,
       COUNT(y2.[Date]) AS Year2Count,
       COUNT(y1.[Date]) / COUNT(y2.[Date]) * 100 AS Growth
FROM Stadium s
       LEFT OUTER JOIN Stadium y1 ON s.Id = y1.Id AND y1.[Date] BETWEEN '2011-01-01 00:00:00' AND '2011-12-31 23:59:59'
       LEFT OUTER JOIN Stadium y2 ON s.Id = y2.Id AND y2.[Date] BETWEEN '2012-01-01 00:00:00' AND '2012-12-31 23:59:59'
GROUP BY s.Number
HAVING COUNT(y1.[Date]) / COUNT(y2.[Date]) * 100 > 25 
```

# c# - Observable.Subscribe 在 .net 4.5 上因 InvalidProgramException 而失败

> ID：13672310
> 
> 赞同：1
> 
> 时间：2012-12-02T18:24:06.943
> 
> 标签：c#, .net, system.reactive, .net-4.5

我刚开始学习[Reactive Extensions](http://msdn.microsoft.com/en-us/data/gg577609.aspx)。当我`InvalidProgramException`尝试订阅我从事件中获得的 observable 时，我得到了。这是完整的代码：

```
public MainWindow()
{
    var observable = Observable.FromEventPattern<MouseEventHandler, MouseEventArgs>(
                              h => this.MouseMove += h, h => this.MouseMove -= h);
    observable.Subscribe(x => Debug.WriteLine("hello"));
    InitializeComponent();
} 
```

异常详情：

```
InvalidProgramException: "Common Language Runtime detected an invalid program."
    at System.Reactive.Concurrency.CurrentThreadScheduler.Schedule[TState](TState state, TimeSpan dueTime, Func`3 action)
    at System.Reactive.Concurrency.LocalScheduler.Schedule[TState](TState state, Func`3 action)
    at System.Reactive.Producer`1.SubscribeRaw(IObserver`1 observer, Boolean enableSafeguard)
    at System.Reactive.Producer`1.Subscribe(IObserver`1 observer)
    at System.ObservableExtensions.Subscribe[T](IObservable`1 source, Action`1 onNext)
    at FunWithReactiveUI.MainWindow..ctor() in c:\... 
```

那么我做错了什么？有什么建议么？谢谢。

我使用[Rx 2.0.21114](https://nuget.org/packages/Rx-Main/2.0.21114)，.Net Framework 4.5。在 4.0 上它工作正常。

**编辑：**

这个简单的代码我也遇到了同样的异常。`Subscribe`.net 4.5 在调试模式下失败。

```
Observable.Return(1).Subscribe(x => Console.WriteLine(x)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T19:50:09.427

我无法重现该问题，所以我将提供一些一般性建议：

*   您可能不应该在控件初始化之前订阅它们的事件。`InitializeComponent();`应该总是在构造函数的第一行，否则会有七种怪异。

*   `InvalidProgramException`有时会在附加的调试器运行时遇到。考虑使用`Trace`or`Console`代替`Debug`.

*   最重要的是，检查项目参考。.Net 4.0 和 4.5 使用两个不同版本的 Rx。如果您通过 Nuget 引用 Rx，则更改目标框架不会更改 Rx 引用，afaik。较新的 Rx 使用可移植库/平台启发/组合，因此您应该小心确保项目引用所有正确的程序集。

# objective-c - 设置 event.startDate

> ID：13672313
> 
> 赞同：-1
> 
> 时间：2012-12-02T18:24:35.580
> 
> 标签：objective-c, cocoa, nsdata

这是我的代码！但是 event.startDate 返回 2012-12-29 18:05:00 +0000

数据是一个字符串 = “04-12-2012”

```
NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
 [dateFormat setDateFormat:@"dd-MM-YYYY HH:mm"];
 NSDate *date = [dateFormat dateFromString:[NSString stringWithFormat:@"%@ %@",data,oraInizio]];
 NSDate *date2 = [dateFormat dateFromString:[NSString stringWithFormat:@"%@ %@",data,oraFine]];

event.startDate=date;
event.endDate=date2; 
```

为什么是 2012-12-29 而不是 2012-12-04 ??

这是完整的脚本

```
- (IBAction)aggiungiEvento:(id)sender {

    EKEventStore *eventStore = [[EKEventStore alloc] init];

    if([eventStore respondsToSelector:@selector(requestAccessToEntityType:completion:)]) {
     // iOS 6 and later
     [eventStore requestAccessToEntityType:EKEntityTypeEvent completion:^(BOOL granted, NSError *error) {
        if (granted){

            EKEvent *event  = [EKEvent eventWithEventStore:eventStore];
            event.title     = [NSString stringWithFormat:@"%@ al %@",tipoLocale,nomeLocale];

            NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
            [dateFormat setDateFormat:@"dd-MM-YYYY HH:mm"];

            NSLog(@"%@   %@",data,oraInizio);

            NSDate *date = [dateFormat dateFromString:[NSString stringWithFormat:@"%@ %@",data,oraInizio]];
            NSDate *date2 = [dateFormat dateFromString:[NSString stringWithFormat:@"%@ %@",data,oraFine]];

            event.startDate=date;
            event.endDate=date2;

            [event setCalendar:[eventStore defaultCalendarForNewEvents]];
            NSError *err;
            [eventStore saveEvent:event span:EKSpanThisEvent error:&err];

             NSLog(@"%@  %@",event.startDate,data);

        }else
        {
            //----- codes here when user NOT allow your app to access the calendar.
        }
    }];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T19:21:17.353

这是因为您在格式的年份部分`@"YYYY"`应该使用 @" " 时使用了。`yyyy`

请注意，即使您修复了该问题，如果您不指定时区，您的时间可能仍然是错误的。

# python - 执行任务时 gtk 加载对话框

> ID：13672316
> 
> 赞同：0
> 
> 时间：2012-12-02T18:24:54.817
> 
> 标签：python, gtk

基本上我想这样做：

当用户按下一个按钮时，应用程序应该打开一个对话框，里面有一个微调器，而一些任务是在后台执行的。完成此任务后，应销毁此对话框，并打开一个新对话框。

我正在使用 python 和 gtk

我该怎么做？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T18:35:37.777

基本上有两种方式。区别在于谁是“主要”程序。如果您希望 gtk 负责，您只需创建对话框，并设置空闲时使用的回调 ( `gobject.idle_add`)。这项工作应确保每一步都不会花费很长时间，因此 gtk 可以更新 gui（您可能需要`gobject.timeout_add`微调器）。

另一种方式是您的“背景”工作处于控制之中。它可以做它想做的事，它应该时不时地调用 gtk ( `while gtk.events_pending (): gtk.main_iteration (False)`) 以确保 gtk 可以更新 gui。

# jquery - jQuery 如果点击

> ID：13672319
> 
> 赞同：1
> 
> 时间：2012-12-02T18:25:13.807
> 
> 标签：jquery, if-statement

我无法让以下 if 语句正常工作，有人可以告诉我我做错了什么吗？

```
<a id='slink' class='trigger' href='#Sports'>Sport</a>
<a id='elink' class='trigger'  href='#Entertainment'>Entertainment</a >
<a id='mlink' class='trigger' href='#Military'>Military</a>
<a id='mocklink' class='trigger' href='#MockUp'>MockUps</a>

$('.trigger').on('click',function(){
  if ($(this).attr('id') = 'mocklink') {
 alert('hey');
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-02T18:28:47.063

你缺少一个右括号，你需要在你`if`的布尔值中进行测试。使用逻辑“相等”运算符 ( `==`) 而不是赋值运算符 ( `=`)：

```
$('.trigger').on('click',function(){
  if ($(this).attr('id') == 'mocklink') {
    alert('hey');
  }
}); 
```

# facebook - 如何标记为已读 Facebook 消息

> ID：13672324
> 
> 赞同：3
> 
> 时间：2012-12-02T18:25:44.767
> 
> 标签：facebook, facebook-graph-api

如何使用 GraphAPI 将 Facebook 页面对话消息标记为已读？我无法找出正确的 POST

# php - 将数据从节点保存到数组

> ID：13672328
> 
> 赞同：0
> 
> 时间：2012-12-02T18:26:04.037
> 
> 标签：php, database, arrays, simplexml

我想将数据从 xml 文件保存到我的数据库，在下面你可以看到我的 php 代码，我试图在其中创建一个关联数组以将值放入以供以后使用。但是，实际的 SimpleXMLElement 对象被存储，而不仅仅是纯值。

我在这里有两个问题：

1.  如何更改我的代码以便存储实际值（作为数字或字符串）而不是 SimpleXMLElement 对象？
2.  这是存储值以供以后使用 SQLLite（我将使用）存储的好方法，还是我有哪些其他选项效果更好？

**php:**

```
$theProducers = simplexml_load_file('sources/producers.xml');

$i = 0;
foreach ($theProducers->producer as $producer) {
    $producers['id'][$i] = $producer->attributes();
    $producers['name'][$i] = $producer->name;
    $producers['address'][$i] = $producer->address;
    $producers['zipcode'][$i] = $producer->zipcode;
    $producers['town'][$i] = $producer->town;
    $producers['url'][$i] = $producer->url;
    $producers['imgurl'][$i] = $producer->imgurl;

    $i += 1;
}

print_r($producers);  // outcome below 
```

**生产者.xml：**

```
<?xml version="1.0"?>
<producers>
  <producer id="8">
    <name>Em&#xE5;mejeriet</name>
    <address>Grenv&#xE4;gen 1-3</address>
    <zipcode>577 39</zipcode>
    <town>Hultsfred</town>
    <url>http://www.emamejeriet.se</url>
    <imgurl>http://172.16.206.1/~thajo/1DV449/laboration01/producenter/images/ema.png</imgurl>
  </producer>
  <producer>
  ... 
```

**print_r($producers) 的结果：**

```
Array (
[id] => Array (
    [0] => SimpleXMLElement Object ( [@attributes] => Array ( [id] => 8 ) )
    [1] => SimpleXMLElement Object ( [@attributes] => Array ( [id] => 57 ) )
    [2] => SimpleXMLElement Object ( [@attributes] => Array ( [id] => 45 ) )
    [3] => SimpleXMLElement Object ( [@attributes] => Array ( [id] => 33 ) )
    [4] => SimpleXMLElement Object ( [@attributes] => Array ( [id] => 16 ) )
    [5] => SimpleXMLElement Object ( [@attributes] => Array ( [id] => 41 ) )
    [6] => SimpleXMLElement Object ( [@attributes] => Array ( [id] => 38 ) )
    [7] => SimpleXMLElement Object ( [@attributes] => Array ( [id] => 40 ) )
    [8] => SimpleXMLElement Object ( [@attributes] => Array ( [id] => 56 ) ) )
[name] => Array (
    [0] => SimpleXMLElement Object ( [0] => EmÃ¥mejeriet )
    [1] => SimpleXMLElement Object ( [0] => Ã–lands Ã–rtagÃ¥rd AB )
    [2] => SimpleXMLElement Object ( [0] => DÃ¶vestads utegrisar & GÃ¥rdsbutik )
... and so on... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T18:31:02.387

改变输出数组的结构：

```
foreach ($theProducers->producer as $producer) {
    $attr = $producer->attributes();
    $producers[$i]['id'] = (int)$attr[0];
    $producers[$i]['name'] = (string)$producer->name;
    $producers[$i]['address'] = (string)$producer->address;
    $producers[$i]['zipcode'] = (string)$producer->zipcode;
    $producers[$i]['town'] = (string)$producer->towbn;
    $producers[$i]['url'] = (string)$producer->url;
    $producers[$i]['imgurl'] = (string)$producer->imgurl;

    $i += 1;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T18:39:10.270

只需转换为适当的数据类型（例如，通常`string`，但有时其他类型，如`int`，可能有意义）：

```
$producers['id'][$i] = (string)$producer->attributes()['id'];
$producers['name'][$i] = (string)$producer->name;
$producers['address'][$i] = (string)$producer->address;
$producers['zipcode'][$i] = (string)$producer->zipcode;
$producers['town'][$i] = (string)$producer->town;
$producers['url'][$i] = (string)$producer->url;
$producers['imgurl'][$i] = (string)$producer->imgurl; 
```

注意：我也加入`['id']`了`->attributes()`通话——假设这是您的意图。

# javascript - 在滚动期间触发无限滚动，而不仅仅是在到达缓冲区时

> ID：13672329
> 
> 赞同：0
> 
> 时间：2012-12-02T18:26:05.337
> 
> 标签：javascript, jquery, infinite-scroll

我正在使用 Paul Irish 的 'infinite-scroll' jquery 插件，它运行良好。

我想在预发射时非常激进，所以我将我的`bufferPx`参数设置为`1000`.

当我向下滚动足够远时它会触发，但是它只会在滚动停止后触发，如果我轻弹滚轮并在滚轮停止之前到达底部，则更新不会触发，直到我击中底部离开我等待下一个结果集出现。

我想要的行为是在我仍在积极滚动时触发更新，这样如果我快速浏览我的列表，我就不必等待一旦我到达底部。

有谁知道如何做到这一点，我可以添加一个新的事件触发器，如果​​是这样，当滚动仍然处于活动状态时我会使用什么触发器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T04:44:43.673

查看插件的源代码[https://raw.github.com/paulirish/infinite-scroll/master/jquery.infinitescroll.js](https://raw.github.com/paulirish/infinite-scroll/master/jquery.infinitescroll.js)，我会说您需要修改以下代码：

```
event.special.smartscroll = {
    setup: function () {
        $(this).bind("scroll", event.special.smartscroll.handler);
    },
    teardown: function () {
        $(this).unbind("scroll", event.special.smartscroll.handler);
    },
    handler: function (event, execAsap) {
        // Save the context
        var context = this,
        args = arguments;

        // set correct event type
        event.type = "smartscroll";

        if (scrollTimeout) { clearTimeout(scrollTimeout); }
        scrollTimeout = setTimeout(function () {
            $.event.handle.apply(context, args);
        }, execAsap === "execAsap" ? 0 : 100);
    }
}; 
```

在此行上进行编辑`}, execAsap === "execAsap" ? 0 : 100);`：

```
event.special.smartscroll = {
    setup: function () {
        $(this).bind("scroll", event.special.smartscroll.handler);
    },
    teardown: function () {
        $(this).unbind("scroll", event.special.smartscroll.handler);
    },
    handler: function (event, execAsap) {
        // Save the context
        var context = this,
        args = arguments;

        // set correct event type
        event.type = "smartscroll";

        if (scrollTimeout) { clearTimeout(scrollTimeout); }
        scrollTimeout = setTimeout(function () {
            $.event.handle.apply(context, args);
        }, 0);
    }
}; 
```

**说明：**当您向下滚动页面（连续或离散）时，“滚动”事件会一遍又一遍地触发并调用`handler: function(...)`上面代码中的 。在此方法内部，设置了一个计时器，该计时器`setTimeout`将在触发滚动事件 100 毫秒后触发相应的无限滚动代码。但是，这个计时器也在方法内部被取消`{ clearTimeout(scrollTimeout); }`。

因此，只要用户继续滚动，计时器就会不断清零并重新设置，直到用户停止滚动。在最后一个滚动事件中，计时器被设置并且永远不会被清除，因此它将在 100 毫秒后触发并执行内容加载。我在上面演示的编辑删除了这个等待期并在用户到达页面底部时加载内容（即使他们仍在积极滚动）。

*注意：作者可能打算将此超时用于性能问题，但欢迎您在配置中对其进行测试。*

# java - 选中的复选框

> ID：13672330
> 
> 赞同：1
> 
> 时间：2012-12-02T18:26:15.540
> 
> 标签：java, swing, user-interface, checkbox

我在 GUI 中的复选框有问题。我有 5 个复选框和一个名为“生成报告”的按钮。我想要做的是当我按下“生成报告”时，我想检查哪些复选框被选中，以便我可以使用复选框中选择的信息“生成报告”。我知道如何检查选择了哪些，但是如果在单击“生成报告”之前选中了一个复选框，然后又取消了选择，恐怕程序将不知道它在被选中后是否被取消选择。

这是我的代码：

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import java.util.*;

public class MonthReportGUI implements ItemListener
{
 static Calendar calendar = Calendar.getInstance();

 JFrame frame = new JFrame("Month Report");
 JPanel mainPanel = new JPanel();
 JPanel comboPanel = new JPanel();
 JLabel info = new JLabel("Use the check boxes to select the information to include in the month report");
 JCheckBox checkBoxOne = new JCheckBox("Number accomplished");
 JCheckBox checkBoxTwo = new JCheckBox("Number not accomplished");
 JCheckBox checkBoxThree = new JCheckBox("Total Number of Jobs");
 JCheckBox checkBoxFour = new JCheckBox("Month Salary");
 JCheckBox checkBoxFive = new JCheckBox("Average wage per job");

 Boolean boxOneSelected = false;

 static String [] monthList = {"January", "February", "March", "April", "May", "June", "July", "August", "September",
"October", "November", "December"};

 static String [] createYearList()
 {
   String [] yearList = new String[89];
   String year = (calendar.get(Calendar.YEAR)) + "";
   for(int i = 0; i < 88; i++)
      yearList[i] = (Integer.parseInt(year) + i) + "";
   return(yearList);
 }
 JLabel monthL = new JLabel("Month:");
 JLabel yearL = new JLabel("Year:");
 static JComboBox monthCB = new JComboBox(monthList);
 static JComboBox yearCB = new JComboBox(createYearList());
 JButton generate = new JButton("Generate Report"); // ACTION HAS TO BE ADDED

 Boolean oneSelected = false;
 Boolean twoSelected = false;
 Boolean threeSelected = false;
 Boolean fourSelected = false;
 Boolean fiveSelected = false;

 MonthReportGUI()
 {
   mainPanel.setLayout(new GridLayout(8,1));
   mainPanel.add(info, BorderLayout.CENTER);
   mainPanel.add(checkBoxOne, BorderLayout.CENTER);
   mainPanel.add(checkBoxTwo, BorderLayout.CENTER);
   mainPanel.add(checkBoxThree, BorderLayout.CENTER);
   mainPanel.add(checkBoxFour, BorderLayout.CENTER);
   mainPanel.add(checkBoxFive, BorderLayout.CENTER);
   mainPanel.add(comboPanel);
   mainPanel.add(generate, BorderLayout.CENTER);

   comboPanel.add(monthL);
   comboPanel.add(monthCB);
   comboPanel.add(yearL);
   comboPanel.add(yearCB);

   checkBoxOne.addItemListener(this);
   checkBoxTwo.addItemListener(this);
   checkBoxThree.addItemListener(this);
   checkBoxFour.addItemListener(this);
   checkBoxFive.addItemListener(this);

   frame.add(mainPanel);
   frame.pack();
   frame.setVisible(true); //set false
  }

  public void itemStateChanged(ItemEvent e) //perform action to know which are selected to use for writting report
  {
    Object source = e.getItemSelectable();
    if (source == checkBoxOne) 
    {
      System.out.println(boxOneSelected);
      boxOneSelected = true;
      System.out.println(boxOneSelected);
    }
  }

  public static void main (String agrs[])
  {
    MonthReportGUI monthReport = new MonthReportGUI();
  }
} 
```

感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T18:27:57.373

这不是问题，因为您将在按下 JButton 时仅在按钮的 ActionListener 代码中轮询 JCheckBox 状态，因此所有这些都将得到处理。这是事件驱动编程的关键。该代码仅因事件而发生，因此可以确定事件发生时的程序状态，并生成您的报告。如果您尝试在类构造或其他一些非事件驱动的方式中获取 JCheckBox 状态，您只会遇到麻烦。

编辑：根据 JB Nizet 的帖子，我没有看到您试图将状态存储在变量中。不好。再次，编写您的 ActionListener 代码并轮询您的 JCheckBoxes。1+ 给 JB 尼泽特。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T18:29:18.597

将复选框的选择状态存储在单独的布尔字段中是没有意义的。相反，当单击按钮时，询问复选框是否直接选中：

```
button.addActionListener(new ActionListener() {
    @Override
    public void actionPerformed(ActionEvent e) {
        generateReport(checkbox1.isSelected(),
                       checkbox2.isSelected(),
                       checkbox3.isSelected(),
                       checkbox4.isSelected(),
                       checkbox5.isSelected());
    }
}); 
```

像你正在做的那样做可能会导致正确的结果，但你正在复制功能，为错误引入新的路径，并使其比应有的复杂。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-02T18:30:46.927

换行：

```
boxOneSelected = true; 
```

至：

```
boxOneSelected = checkBoxOne.isSelected(); 
```

关于是否应在侦听器中进行此检查和分配存在问题，但您确实想询问复选框是否被选中作为解决方案的核心部分。

# web2py - 如何将 web2py 中的应用程序设置为“根”？

> ID：13672331
> 
> 赞同：0
> 
> 时间：2012-12-02T18:26:27.477
> 
> 标签：web2py

我用谷歌搜索无济于事，我怎样才能更改 web2py 配置，所以当我导航到 www.mydomain.com 时，我会看到一个特定的网络应用程序（而不是必须去 www.mydomain.com/mywebapp）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T20:26:07.917

查看有关使用 routes.py 的 web2py 文档。不要忘记单击管理应用程序上的“重新加载路线”按钮。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T09:37:57.883

这可能会有所帮助，只需根据您的需要进行定制：[http](http://code.google.com/p/web2py/source/browse/routes.example.py) ://code.google.com/p/web2py/source/browse/routes.example.py 还可以查看这个简单的解释： [http ://www.web2py.com/AlterEgo /默认/显示/42](http://www.web2py.com/AlterEgo/default/show/42)

# javascript - “类”定义内部或外部的原型函数有什么区别

> ID：13672332
> 
> 赞同：2
> 
> 时间：2012-12-02T18:26:34.237
> 
> 标签：javascript, methods, prototype

> **可能重复：**
> [在 Javascript 中使用“原型”与“这个”？](https://stackoverflow.com/questions/310870/use-of-prototype-vs-this-in-javascript)
> [在构造函数中定义原型方法](https://stackoverflow.com/questions/7115594/defining-prototype-methods-inside-the-constructor)

这两个定义有什么区别吗？

```
function Task(description, value) {

    this.id = 0;
    this.subId = 0;
    this.parent = null;
    this.children = new Array();

    this.description = description;
    this.value = value;

    Task.prototype.getNextId = function () {
       return this.subId++;
    },

    Task.prototype.addTask = function (task) {
        task.id = this.getNextId();
        this.children[task.id] = task;
        task.parent = this;
    },

    Task.prototype.remove = function () {
        this.parent.children.remove(this.id);
    }

} 
```

所有原型方法都在任务定义中，或者？

```
function Task(description, value) {

    this.id = 0;
    this.subId = 0;
    this.parent = null;
    this.children = new Array();

    this.description = description;
    this.value = value;

}

Task.prototype.getNextId = function () {
   return this.subId++;
},

Task.prototype.addTask = function (task) {
    task.id = this.getNextId();
    this.children[task.id] = task;
    task.parent = this;
},

Task.prototype.remove = function () {
    this.parent.children.remove(this.id);
} 
```

我不确定是否有区别。从 OOP 视图来看，内部定义看起来更好。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T18:30:10.093

构造函数的`prototype`是在从构造函数创建的实例之间共享的对象。

如果您`prototype`在构造函数中更新对象的属性，则共享该原型对象的所有实例都将引用最新更新。

在您的代码中，您不会注意到差异，但它仍然是错误的。没有必要继续用新的相同版本覆盖原型函数。

如果您的代码发生更改，以便将函数添加到`prototype`构造函数中的引用局部变量，那么所有实例最终都将使用在最新调用中引用变量的原型函数。这几乎不是你想要的。

如果您的代码发生更改，从而覆盖了构造函数的整个原型对象，那么创建的每个实例都将引用不同的原型对象，并且您将无法通过向 中添加新方法来更新所有实例的原型`Task.prototype`，因为它只会更新最新实例的原型对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T18:29:48.640

第一个在每次调用构造函数时分配原型函数。因此，如果您稍后将它们重新分配到其他地方，那么只要您构造另一个该类型的基础对象，它们就会再次被覆盖。这几乎总是不受欢迎的。

有关更详细的讨论，请参阅此问题：[Defining prototype methods inside the constructor](https://stackoverflow.com/questions/7115594/defining-prototype-methods-inside-the-constructor)

# javascript - 动态环境中的水豚歧义

> ID：13672337
> 
> 赞同：1
> 
> 时间：2012-12-02T18:26:55.453
> 
> 标签：javascript, html, ruby, capybara

这是我迄今为止能够缓解的问题的常见问题。

鉴于动态 html/php 具有大量依赖项，因此无法更改。

我的页面源看起来像这样

```
 <div id="unique">
    <div id="ambiguous">
       <a href="EditMS(unique record num)">Edit</a> <!--Javascript-->
    </div>
    <div id="ambiguous">
       <a href="EditApple(unique record num)">Edit</a> <!--Javascript-->    
    </div>
 </div> 
```

过去我遇到过模棱两可的问题，并且能够通过执行底层 javascript 来缓解它们，但现在我觉得我不能因为动态记录数。

问题一：我可以使用 xpath 或类似的东西来访问正确的编辑链接吗？问题二：我能否以某种方式获取动态记录号，然后执行javascript？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T19:00:12.280

使用 css 有几种方法可以做到这一点。您可以获取所有匹配的 id，或者如果链接 href 总是这样，您可以使用 css 属性匹配。例如：

```
find('#unique').all('#ambiguous').each do |ambiguous| 
  # conditions in here
end 
```

或者您可以`^=`用于比赛开始、`*=`比赛某处和`$=`比赛结束

`find('a[href^="Edit"]')`或者`find('a[href*="Apple"]')`

希望有帮助。我看到一个正则表达式可以在您不久的将来获得价值。喜欢：

```
"EditApple293845093405983049".match(/\d+/)[0]
# => 293845093405983049 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T18:44:38.357

要回答问题 1：

`find(:xpath, "//unique/div[@id=ambiguous][0]") is what you're looking for.`

# r - 如何对大型数据库进行采样并在 R 中实现 K-means 和 K-nn？

> ID：13672340
> 
> 赞同：13
> 
> 时间：2012-12-02T18:27:38.753
> 
> 标签：r, machine-learning, k-means, knn, large-data

我是 R 的新用户，试图摆脱 SAS。我在这里问这个问题是因为我对 R 可用的所有包和源感到有点沮丧，而且我似乎无法让这个工作主要是由于数据大小。

我有以下内容：

本地 MySQL 数据库中名为 SOURCE 的表，具有 200 个预测器特征和一个类变量。该表有 300 万条记录，大小为 3GB。每个类的实例数不相等。

我想要：

1.  随机抽样 SOURCE 数据库以创建一个较小的数据集，每个类具有相同数量的实例。
2.  将样本分成训练集和测试集。
3.  在训练集上进行 k-means 聚类以确定每个类的 k 个质心。
4.  使用质心对测试数据进行 k-NN 分类。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-22T11:26:10.433

我将继续的方式是：

1) 将表的 id 列表提取到 R，您可以使用[RMySQL](http://cran.r-project.org/web/packages/RMySQL/index.html)库通过简单的 SQL 查询来完成此操作。

2) 在 R 中以您喜欢的任何方式拆分 id，然后使用[RMySQL](http://cran.r-project.org/web/packages/RMySQL/index.html)再次执行后续 SQL 查询（我发现这两个步骤的方法比直接在 MySQL 中采样要快得多）。

3）根据您的样本有多大，您可以通过使用基本的 R kmeans 实现来摆脱困境，但是对于更大的样本，这可能会失败，在这种情况下，您应该考虑使用库 biganalytics 中的[bigkmeans](http://cran.r-project.org/web/packages/biganalytics/index.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-27T16:04:58.423

我认为您的许多问题都可以通过使用 caret 包来解决。关于具有相同类成员资格的随机抽样，我会将其推回到 SQL 中，只需为每个指定的类运行两个具有您想要的大小的查询。其他人提到 RMySql、RODBC 或 RJDBC 也可以。要将数据分成训练集和测试集，请使用以下插入符号函数：

```
# separate data into test and train sets, 70/30 split in this case

splitIndex <- createDataPartition(mydata$mytargetcolumn, p = 0.7, list = FALSE)
train <- mydata[splitIndex, ]
test <- mydata[-splitIndex, ]
testInd <- test[ ,!colnames(test) %in% "mytargetcolumn"]
testDep <- as.factor(test[, names(test) == "mytargetcolumn"]) 
```

您也可以使用插入符号来执行 KNN，如下所示：

```
modelKNN <- knn3(mytargetcolumn ~ ind1 + ind2, data = train, k = neighborCount, prob = TRUE) 
```

然后预测很容易：

```
# prediction using KNN to get class probabilities, change 'type' if you just want class prediction

predKNN <- predict(modelKNN, testInd, type = "prob") 
```

您还可以使用插入符号进行评估：

```
# Generate confusion matrix from class predictions and actual values

confKNN <- confusionMatrix(testDep, predKNN) 
```

虽然我个人使用 AUC（通过 pROC 包）进行分类模型评估，因为它是比准确度更细粒度的分类器强度度量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T09:28:39.973

我可以帮你解决两个问题。1-分层抽样 2-拆分训练和测试（即校准验证）

```
 n = c(2.23, 3.5, 12,2, 93, 57, 0.2,
 33, 5,2, 305, 5.3,2, 3.9, 4) 
     s = c("aa", "bb", "aa","aa", "bb", "cc","aa", "bb",
 "bb","aa", "aa","aa","aa","bb", "cc") 
         id = c(1, 2, 3,4, 5, 6,7, 8, 9,
10, 11, 12,13, 14, 15) 
         df = data.frame(id, n, s )       # df is a data frame

        source("http://news.mrdwab.com/stratified")
        sample<- stratified(df=df, 
                            id=1, #ID of your dataframe, 
                            #if there isn't you have to create it
                            group=3, #the position of your predictor features
                            size=2, #cardinality of selection
                            seed="NULL") 

        #then add a new column to your selection 
        sample["cal_val"]<- 1

        #now, you have a random selection of group 3, 
        #but you need to split it for cal and val, so:

        sample2<- stratified(df=sample, #use your previous selection
                             id=1, 
                             group=3, #sample on the same group used previously
                             size=1,#half of the previous selection
                             seed="NULL")

        sample2["val"]<- 1
        #merge the two selection
        merge<- merge(sample, sample2, all.x=T, by="id")
        merge[is.na(merge)] <- 0 #delete NA from merge
    #create a column where 1 is for calibration and 2 for validation    
    merge["calVal"]<- merge$cal_val.x + merge$cal_val.y 
#now "clean" you dataframe, because you have too many useless columns       
 id<- merge$id  
        n<- merge$n.x 
        s<- merge$s.x
        calval<- merge$calVal
        final_sample<- data.frame(id, n, s, calval) 
```

# ruby-on-rails - Rails：限制对特定页面的访问

> ID：13672342
> 
> 赞同：0
> 
> 时间：2012-12-02T18:27:49.963
> 
> 标签：ruby-on-rails, authentication

我按照[本](http://railscasts.com/episodes/250-authentication-from-scratch)教程进行操作，并且有效。但是如何限制一个页面，以便只有登录的用户才能访问它？

我写`<% if current_user %>`在一页的顶部，如果我在未登录时尝试访问它，我无法访问它（所以这是一种解决方案）。但是，有没有办法在控制器中做到这一点？（我尝试使用[这篇](https://stackoverflow.com/questions/8500350/how-to-allow-access-only-to-logged-in-users-restricting-direct-entry-of-url)文章中描述的 before_filter，但它不起作用）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T18:32:16.143

您可以使用`ActionController` [before_filter](http://guides.rubyonrails.org/action_controller_overview.html)通过检查方法的存在来验证用户`current_user`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T19:09:26.997

如果使用设计，您可以添加

```
before_filter :authenticate_user! 
```

到您的控制器。

# c# - 建议使用哪种语言来实现浏览器自动化和抓取

> ID：13672346
> 
> 赞同：2
> 
> 时间：2012-12-02T18:28:08.617
> 
> 标签：c#, asp.net, python, web2py, browser-automation

编程新手。我有大部分的python经验。我将此与 C# 进行比较。我已经使用 Web2py 创建了小型 Web 应用程序，并且已经阅读了“以艰难的方式学习 Python”。除了在 VS 中设置和玩之外，我没有 C# 经验。

我的最终目标是能够开发 Web 应用程序（到目前为止，我确实喜欢 web2py），甚至是一些使用 GUI 的 Web 自动化程序。例如，一个应用程序允许我从我的 GUI 将信息放入/获取数据库中，然后通过数据库连接将其发布到我的站点，或者通过自动化发布到不属于我的其他站点。

到目前为止我真的很喜欢 python，但我觉得因为我确实想使用 GUI 应用程序，所以 C# 可能是最好的选择......

更具体地说，与 C# 相比，Python 甚至可以比较，或者有模块/库来帮助我进行 GUI Web 和浏览器自动化吗？只用基本的刮擦怎么样？从众多站点中提取数据以显示在数据库中。Python还有优势吗？

谢谢。考虑到可用的不同库和模块，我希望这个问题对它有一些客观性。如果太主观，请接受我的道歉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T18:33:49.160

如果您想从启用了 javascript 的页面中抓取信息，Selenium 是一个非常好的自动化库。它具有多种语言的绑定。如果你只想要基本的抓取，我会选择机械化；无需打开浏览器。

# ruby-on-rails - 销毁不工作

> ID：13672348
> 
> 赞同：1
> 
> 时间：2012-12-02T18:28:19.623
> 
> 标签：ruby-on-rails, routes

我有一个没有显示动作的控制器。

当前的销毁如下所示：

```
 <td><%= link_to 'Destroy', subscriber, :confirm => 'Are you sure?', :method => :delete %></td> 
```

我不希望它指向 {subscriber}，因为该路由不存在。相反，我希望它指向订阅者索引

```
 <td><%= link_to 'Destroy', subscribers_path, :confirm => 'Are you sure?', :method => :delete %></td> 
```

但是，当我这样做时，我收到以下错误：

```
No route matches [DELETE] "/subscribers" 
```

我在这里做错了什么？

更新：

这些是我的路线：

```
 resources :subscribers
  match 'subscribe' => 'Subscribers#subscribe'
  match 'unsubscribe' => 'Subscribers#unsubscribe' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T18:35:46.243

正如您所说的那样，该路由不存在，我假设您没有使用资源路由。这意味着你可能有类似的东西

```
match 'subscribers' => 'subscribers#index', :via => :get
get 'subscribers' => 'subscribers#index' 
```

这些都不会真正匹配删除请求，您可以通过`rake routes`从应用程序根目录运行来验证。

您可以像下面这样调整它，使其匹配：

```
match 'subscribers' => 'subscribers#index', :via => [ :get , :delete ] 
```

此外，如果有更多信息，这可能更有意义，但似乎偏离更传统的基于 REST 的方法可能会导致在维护应用程序时不必要且可能令人困惑的缺乏清晰度。

# android - 使用 actionBarSherlock 仅显示选项卡

> ID：13672357
> 
> 赞同：5
> 
> 时间：2012-12-02T18:29:34.593
> 
> 标签：android, android-actionbar, actionbarsherlock

我正在使用 actionbarSherlock 构建一个应用程序，并且我正在我的一个活动中使用选项卡。是否可以仅显示选项卡并隐藏栏？

左边是它的实际显示方式，右边是我想要显示的方式

![动作栏](../Images/d4b1b45cfd9f6a76dafe3135f68c305b.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T18:37:02.480

您需要设置正确的主题。在您的清单文件中，将其添加到您的活动声明中：

```
android:theme="@android:style/Theme.NoTitleBar" 
```

**编辑**

您也可以从代码中隐藏标题栏。将此添加到您的活动的 onCreate() 中：

```
requestWindowFeature(Window.FEATURE_NO_TITLE); 
```

**编辑 3**

您总是可以创建自己的风格，从 sherlocks 派生并添加禁用标题栏。像这样

```
<style name="MyTheme" parent="Theme.Sherlock.Light.DarkActionBar">
   <item name="android:windowNoTitle">true</item>
</style> 
```

然后使用 MyTheme 进行活动

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-05T15:51:08.997

解决方案是：

```
ActionBar bar = getSupportActionBar();
bar.setDisplayShowTitleEnabled(false);  
bar.setDisplayShowHomeEnabled(false); 
```

# objective-c - sqlite3_unlock_notify

> ID：13672365
> 
> 赞同：2
> 
> 时间：2012-12-02T18:29:56.020
> 
> 标签：objective-c, database, sqlite, backend

我正在构建一个使用 sqlite3 的类
现在可能会发生数据库被锁定的情况，因为我正在处理许多查询。
现在我想使用方法 **sqlite3_unlock_notify()**像：

```
if (!strcmp(err, "database is locked")){
                if (sqlite3_unlock_notify(database, NULL, NULL) == SQLITE_OK)
                    return [self perfomQuery:query Error:error];
            } 
```

现在的问题是我收到一个构建红色警告，上面写着：

架构 i386 的未定义符号：“_sqlite3_unlock_notify”，引用自：...

有谁知道该怎么做？
澄清一下：我使用的是 libsqlite3.0.dylib
10x

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T11:28:51.883

我相信这可能会发生，因为在编译 sqlite3 时未包含可选标志 SQLITE_ENABLE_UNLOCK_NOTIFY。

请重新检查您的 Makefile 并检查此标志，如果省略则包括。

您可以参考[http://www.sqlite.org/compile.html#enable_unlock_notify](http://www.sqlite.org/compile.html#enable_unlock_notify)以了解有关此标志的更多信息。希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T21:22:33.850

`sqlite3_unlock_notify`只能在同一进程中的多个连接以共享缓存模式访问同一数据库时使用，这仅在多线程服务器中有用，因此已将其排除在 SQLite 配置之外。

您应该重新组织您的应用程序，以便只有一个数据库连接。

# sql-server - 显示 NULL 和值

> ID：13672369
> 
> 赞同：1
> 
> 时间：2012-12-02T18:30:12.150
> 
> 标签：sql-server

我有三张桌子，我有字段 - `area`。所以我决定找出每张桌子的面积总和并在一个视图中显示。

我创建了一个查询

```
select sum(x.area) as EquipmentSpace,sum(y.area) as ProductSpace,sum(z.area) as ShoppointSpace
from TEquipWarehouse as x,TProductWarehouse as y,TShopPoint as z 
```

但是，当其中一个表没有任何记录时 - 每个字段的结果都是`NULL`.

如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T18:36:02.743

您的查询有几个问题。你本质上是在做一个`CROSS JOIN`. 因此，不仅当一个表的行数为零时，中间结果集中的行数为零，而且当任何表的行数超过一时，也会出现大量重复数据。这将在第一种情况下导致 Null 结果，在第二种情况下导致错误结果。

您的查询将按预期工作的唯一情况是所有 3 个表都只有一行。

要获得您想要的，您需要 3 个单独的子查询，然后将它们组合为一个：

```
SELECT 
    COALESCE( (SELECT SUM(area)  FROM TEquipWarehouse), 0
            ) AS EquipmentSpace
  , COALESCE( (SELECT SUM(area)  FROM TProductWarehouse), 0 
            ) AS ProductSpace,
  , COALESCE( (SELECT SUM(area)  FROM TShopPoint), 0 
            ) AS ShoppointSpace
 ; 
```

当表没有行时，`COALESCE()`函数用于将 转换为 0。`NULL`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T18:33:48.737

如果没有可用值，则使用 ISNULL 替换值：

```
select sum(ISNULL(x.area,0)) as EquipmentSpace,sum(ISNULL(y.area,0)) as ProductSpace,sum(ISNULL(z.area,0)) as ShoppointSpace
from TEquipWarehouse as x,TProductWarehouse as y,TShopPoint as z 
```

在这种情况下，如果不存在某个值，则出于 SUM 的目的将其替换为 0。

# java - 安卓出类拔萃。jExecl制作0b文件

> ID：13672371
> 
> 赞同：1
> 
> 时间：2012-12-02T18:30:27.597
> 
> 标签：java, android, excel

我正在尝试使用 jExcel poi 在 Eclipse 中制作一个 Excel 文件。一切似乎都很好，没有错误，它甚至可以生成文件，但它们是 0b 大并且无法打开。我设法将文件从我的平板电脑上运行到我的代码的 USB 上。当我在我的 PC 上打开它时，它说：“您尝试打开的文件的格式与文件扩展名指定的格式不同.在打开之前验证文件没有损坏并且来自受信任的来源。” 然后它问我是否要打开它。当我说“是”时，它会打开一个新的空白 Excel 文件。不是我用java制作的文件。这是我的代码如下：

```
public class MainActivity extends Activity {
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    Random generator = new Random();
    int n = 10000;
    n = generator.nextInt(n);
    try {
        WritableWorkbook wb = createWorkbook("Busotina "+n+".xls");
            WritableSheet sheet = createSheet(wb, "Prvi",0);
                    writeCell(0, 0, "poz", true, sheet);
        writeCell(2, 0, "poz", true, sheet);
        writeCell(1, 1, "poz", true, sheet);
        writeCell(2, 3, "poz", true, sheet);

    } catch (Exception e) {
        e.printStackTrace();
    }
          }

public WritableWorkbook createWorkbook(String fileName) throws WriteException{
    WorkbookSettings wbSettings = new WorkbookSettings();
    wbSettings.setUseTemporaryFileDuringWrite(true);
    File sd = Environment.getExternalStorageDirectory();
    File dir = new File(sd.getAbsolutePath() + "/JExcelTest");
    dir.mkdirs();
    File wbfile = new File (dir, fileName);
    WritableWorkbook wb = null;
      try {
        wb=Workbook.createWorkbook(wbfile, wbSettings);
        wb.write();
        wb.close();
    } catch (IOException e) {
        e.printStackTrace();
    }
            return wb;
}
public WritableSheet createSheet(WritableWorkbook wb, String sheetName, int sheetIndex){
    return wb.createSheet(sheetName,sheetIndex);
}
    public void writeCell(int columnPosition, int rowPosition,String contents, boolean 
                           headerCell, WritableSheet sheet) throws WriteException{
            Label newCell = new Label (columnPosition,rowPosition,contents);
            if(headerCell){
        WritableFont headerFont = new WritableFont(WritableFont.ARIAL,10,WritableFont.BOLD);
        WritableCellFormat headerFormat = new WritableCellFormat(headerFont);
        headerFormat.setAlignment(Alignment.CENTRE);
        newCell.setCellFormat(headerFormat);
            }
    sheet.addCell(newCell);
} 
```

}

那么，有没有人知道为什么它制作目录，制作想要的文件，但文件大小为 0.00B，我无法打开或放入电子邮件附件或任何内容。

提前致谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T18:51:27.943

听起来您的文件输出流未正确关闭（因此文件似乎为 0 字节，其他程序无法访问。

另一件奇怪的事情是您在进行更改之前关闭了工作簿。您应该只在插入内容后执行此操作。

您应该尝试`createWorkbook`像这样编写您的方法：

```
public WritableWorkbook createWorkbook(String fileName) throws WriteException{
    WorkbookSettings wbSettings = new WorkbookSettings();
    wbSettings.setUseTemporaryFileDuringWrite(true);
    File sd = Environment.getExternalStorageDirectory();
    File dir = new File(sd.getAbsolutePath() + "/JExcelTest");
    dir.mkdirs();
    File wbfile = new File (dir, fileName);
    WritableWorkbook wb = null;
      try {
        wb=Workbook.createWorkbook(wbfile, wbSettings);
        wb.write();
    } catch (IOException e) {
        e.printStackTrace();
    } finally {
        if(wb != null) wb.close();
    }         
    return wb;
} 
```

# javascript - 防止字段在 JavaScript 中提示以前使用过的单词

> ID：13672384
> 
> 赞同：2
> 
> 时间：2012-12-02T18:31:46.380
> 
> 标签：javascript, forms, input, autosuggest

> **可能重复：**
> [如何在 Web 表单字段/输入标签上禁用浏览器自动完成功能？](https://stackoverflow.com/questions/2530/how-do-you-disable-browser-autocomplete-on-web-form-field-input-tag)

我对在 JavaScript 中运行脚本有疑问。

假设我以“Hello World”的形式输入。几天后，我使用同一台机器回到同一个表单，我将再次输入“Hello World”，但是当我输入“H”时，“Hello World”这个词已经弹出。

我不记得在我的脚本中设置任何东西来获得该功能。我搜索了所有内容，但没有看到任何可能导致这种行为的东西。

我必须删除什么才能让它停止？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T18:32:46.690

那是自动完成。

默认情况下，您不必完全“删除它”而是将其关闭。

它会是这样的：

```
<input ... autocomplete="off"> 
```

# c# - 如何不更新回发中的变量

> ID：13672391
> 
> 赞同：0
> 
> 时间：2012-12-02T18:32:33.447
> 
> 标签：c#, asp.net

考虑代码

```
public partial class Classname: somethng
    {   
        bClass objClass = new bClass();
        Boolean isfindclicked=false;
protected void Page_Load(object sender, EventArgs e)
        {
            //rowid = 0;
            if (!IsPostBack)
            {......
              ...
             }
}

  protected void btnFind_Click(object sender, EventArgs e)
        {
         isfindclicked=true;
} 
```

在单击按钮时，如果 isfindclicked 值为 true，则执行某些操作。但是一旦单击按钮，页面将重新加载，并且 isfindclicked 的值设置为 false。因此，单击的按钮内的 fn 不会执行...

因此，任何使变量 isfindcliked**在页面回发期间都不会更新的方法。**.我已经尝试使用 Session，它有效..但是在页面重新加载期间不更新 isfindclicked 值还有其他方法吗...？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T18:36:43.833

类似于`Session`（这是一种更好的方式 IMO），您也可以将其放在`ViewState`.

在 btnFind 你可以做这样的事情：

```
 protected void btnFind_Click(object sender, EventArgs e)
 {
     isfindclicked=true;
     ViewState["isFind"] = isfindclicked;
 } 
```

当你需要它时：

```
if (ViewState["isFind"] != null)
    bool found = (bool)ViewState["isFind"]; 
```

如果想知道 ViewState vs Session [here](https://stackoverflow.com/q/575568/1379664)是一个很好的问题。

**另一种选择**- 将值保存在**[隐藏字段中](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.hiddenfield.aspx)**

# java - 仅更改 Eclipse 待办事项的颜色 - 不是整个评论

> ID：13672395
> 
> 赞同：8
> 
> 时间：2012-12-02T18:33:19.000
> 
> 标签：java, eclipse, highlighting, todo

我发现了如何在 Eclipse 中更改 todo 标签的颜色（window->preferences->general->editors->text editors->annotations->tasks），但这会改变它，所以当我写 //TODO 整个线路受到影响。是否有可能只影响 TODO 这个词？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-02T18:50:50.173

> 是否有可能只影响 TODO 这个词？

是的，您可以在 Preferences → Java → Editor → Syntax Coloring ⇉ Comments → Task Tags 下更改“任务标签”注释的颜色，如下面的屏幕截图所示。请注意，预览窗口中的“TASK”是亮粉色。“TODO”是一个任务标签，所以它对我来说也是粉红色的。

![伊姆古尔](../Images/126db0b4c7897c70cf641f27ba1ecec4.png)

# winapi - ntdll.dll 内部 ZwCreateUserProcess 的远跳

> ID：13672396
> 
> 赞同：6
> 
> 时间：2012-12-02T18:33:20.640
> 
> 标签：winapi, assembly, process

我试图了解 Windows API 如何创建进程，以便我可以创建一个程序来确定无效 exe 失败的位置。我有一个调用`kernel32.CreateProcessA`. 在 OllyDbg 中，这调用`kernel32.CreateProcessInternalA`，调用`kernel32.CreateProcessInternalW`，调用`ntdll.ZwCreateUserProcess`。这个函数是：

```
mov eax, 0xAA
xor ecx, ecx
lea edx, dword ptr [esp+4]
call dword ptr fs:[0xC0]
add esp, 4
retn 0x2C 
```

所以我按照对 的调用`fs:[0xC0]`，其中包含一条指令：

```
jmp far 0x33:0x74BE271E 
```

`ntdll.ZwCreateUserProcess`但是当我执行这条指令时，Olly 只是在通话后回到`add esp, 4`右边（不是 at `0x74BE271E`）。我在 处设置了一个断点`retn 0x2C`，我发现新进程是在`add esp, 4`.

所以我假设跳远有一些魔力。我试图将 CS 寄存器更改为`0x33`并将 EIP更改为，`0x74BE271E`而不是实际执行远跳转，但这只是在几条指令后给了我访问冲突。这里发生了什么？我需要能够更深入地研究这个抽象，`ZwCreateUserProcess`以弄清楚 Windows 是如何创建进程的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-02T20:17:22.603

```
jmp far 0x33:0x74BE271E` 
```

该跳转正在进入内核。`0x33`是一个特殊的段选择器，它指向某种 x86 门；这会触发上下文切换到内核。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-03T17:01:49.647

实际上，该跳转并没有进入内核，而是切换到 WoW64 的 x64 用户模式子系统（Win32 on Win64）。

选择器 33h 是一个特殊的选择器，它覆盖了 4GB 内存空间，但设置为 x64 模式。跳转到 wow64cpu.dll 的 64 位（但仍然是用户模式）部分，它将 32 位 API 参数转换为 64 位参数，并在 64 位 ntdll.dll 中调用 API（是的，你有两个在 WoW64 进程中）。反过来，该 ntdll 调用进入内核的真实系统调用。

这里有一些链接更详细地描述了该机制。您还可以通过搜索“天堂之门”一词找到更多信息。

[http://rce.co/knockin-on-heavens-gate-dynamic-processor-mode-switching/](http://rce.co/knockin-on-heavens-gate-dynamic-processor-mode-switching/)

[http://wasntnate.com/2012/04/heavens-gate-64-bit-code-in-32-bit-file/](http://wasntnate.com/2012/04/heavens-gate-64-bit-code-in-32-bit-file/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-02T18:50:46.867

您缺少的部分是内核部分。您需要附加一个内核模式调试器并单步执行 ZwCreateUserProcess 的内核端代码，以查看该进程是如何创建的。您还应该查看 Windows Internals 第 5 版或第 6 版的第 5 章“进程、线程和作业”。该章详细介绍了流程创建。

# wordpress - Wordpress 和 WHMCS 集成 - 全局变量问题

> ID：13672400
> 
> 赞同：0
> 
> 时间：2012-12-02T18:33:38.000
> 
> 标签：wordpress, whmcs

在过去几天在互联网上搜索之后，我没有任何快乐。我正在尝试将`WordPress`（让我们说现在只是页眉和页脚）与`WHMCS`.

我已采用此处的方法将`wp-blog-header.php`（我也尝试过`wp-load.php`）`header.tpl`包含在默认模板中的文件中`WHMCS`。

```
<?php 
/* Short and sweet */
define('WP_USE_THEMES', false);
require('./wp-blog-header.php');
?> 
```

[http://codex.wordpress.org/Integrating_WordPress_with_Your_Website](http://codex.wordpress.org/Integrating_WordPress_with_Your_Website)

很明显正在调用 WordPress，但是我收到了无穷无尽的错误，例如：

```
Fatal error: Call to a member function main() on a non-object in /home/test/public_html/dev/wp-includes/functions.php on line 775 
```

（这是导航到`WHMCS`客户区时收到的第一个错误。）

从我可以更详细地说明问题来看，这个问题似乎与这篇关于全局变量不起作用/在函数内部按应有的初始化的帖子相同。

[http://wordpress.org/support/topic/integrating-wordpress-into-my-site-global-blues-and-many-non-objects](http://wordpress.org/support/topic/integrating-wordpress-into-my-site-global-blues-and-many-non-objects)

有其他集成方法，例如使用 html/css，但我想专门包含 WordPress 以利用其其他功能/小部件等。

另一种选择是使用 WHMCS WordPress 桥之一，但出于各种原因，包括安全漏洞和更新依赖项，我特别希望避免使用 3rd 方脚本将 WHMCS 包含在 WordPress 中。

我很欣赏这是一个非常小众的问题，但是关于为什么全局变量不起作用的一般建议？谢谢。

# android - 锁定安卓手机

> ID：13672404
> 
> 赞同：5
> 
> 时间：2012-12-02T18:34:06.970
> 
> 标签：android, device-admin

当用户按下按钮时，我试图以编程方式锁定设备。我知道我需要使用`deviceAdminReciever`并且我已经这样做了，但是每当我运行它时我的应用程序就会崩溃

以下是我的清单：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.MyApp"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <receiver
        android:name=".MainActivity"
        android:permission="android.permission.BIND_DEVICE_ADMIN" >
        <meta-data
            android:name="android.app.device_admin"
            android:resource="@xml/device_admin_sample" />

        <intent-filter>
            <action android:name="android.app.action.DEVICE_ADMIN_ENABLED" />
        </intent-filter>
    </receiver>
</application>

<uses-feature android:name="android.hardware.camera" />

</manifest> 
```

以下是我的java代码：

```
public class MainActivity extends DeviceAdminReceiver {

public static class MyActivity extends Activity {

    protected static final int ACTIVATION_REQUEST = 1;
    private ImageButton btn;

    private DevicePolicyManager mDPM;
    private ComponentName mDeviceAdminSample;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        mDPM = (DevicePolicyManager) getSystemService(Context.DEVICE_POLICY_SERVICE);
        mDeviceAdminSample = new ComponentName(Potter.this,
                MainActivity.class);
        setContentView(R.layout.activity_main);

        btn = (ImageButton) findViewById(R.id.btn);

        btn.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {

                Intent intent = new Intent(
                    DevicePolicyManager.ACTION_ADD_DEVICE_ADMIN);
            mDeviceAdminSample = new ComponentName(this, MainActivity.class);
            intent.putExtra(DevicePolicyManager.EXTRA_DEVICE_ADMIN,
                    mDeviceAdminSample);
            startActivityForResult(intent, ACTIVATION_REQUEST);
            mDPM.lockNow();

            }
        });

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode,
            Intent data) {
        super.onActivityResult(requestCode, resultCode, data);

        switch (requestCode) {
         case ACTIVATION_REQUEST:
                if (resultCode == Activity.RESULT_OK) {
                    Log.i("DeviceAdminSample", "Administration enabled!");
                } else {
                    Log.i("DeviceAdminSample", "Administration enable FAILED!");
                }
                return;

        }
    }

}
} 
```

但是，当我运行该应用程序时，它会崩溃。我该如何纠正？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-04-18T07:12:32.360

这是我的有效代码：

显现：

```
<application
    android:icon="@drawable/ic_power_settings_new_black_48dp"
    android:label="Screen Off"
    android:theme="@android:style/Theme.NoDisplay">
    <activity android:name=".MainActivity">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <receiver android:name="android.app.admin.DeviceAdminReceiver">
        <meta-data android:name="android.app.device_admin"
            android:resource="@xml/device_admin" />
        <intent-filter>
            <action android:name="android.app.action.DEVICE_ADMIN_ENABLED" />
        </intent-filter>
    </receiver>
</application> 
```

MainActivity.java：

```
package com.example.anhkhoachu.screenoff;

import android.app.Activity;
import android.app.Application;
import android.app.admin.DeviceAdminReceiver;
import android.app.admin.DevicePolicyManager;
import android.content.ComponentName;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.widget.Toast;

public class MainActivity extends Activity {
DevicePolicyManager dpm;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    dpm = (DevicePolicyManager) getSystemService(Context.DEVICE_POLICY_SERVICE);
    try {
        dpm.lockNow();
        finish();
    } catch (SecurityException e) {
        Intent it = new Intent(DevicePolicyManager.ACTION_ADD_DEVICE_ADMIN);
        it.putExtra(DevicePolicyManager.EXTRA_DEVICE_ADMIN, new ComponentName(this, DeviceAdminReceiver.class));
        startActivityForResult(it, 0);
    }
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (resultCode == RESULT_OK) {
        dpm.lockNow();
    } else {
        Toast.makeText(this, "Device administrator must be activated to lock the screen", Toast.LENGTH_LONG).show();
    }
    finish();
}} 
```

device_admin.xml：

`<device-admin> <uses-policies> <force-lock /> </uses-policies> </device-admin>`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-02T19:08:12.067

好的，`DeviceAdminReceiver`是一个广播接收器，而不是一个活动。现在，您的清单声明`MainActivity`了这两个组件，因此其中一个声明是不正确的。 `MainActivity`这个类的名字不好，因为它不是一个活动，它可能应该是`MainReceiver`或类似的东西（只是为了保持一致性）。

您的应用程序正在崩溃，因为 Android 正在尝试启动`MainActivity`，它不是一个 Activity，作为您的应用程序的主要 Activity，它无法执行此操作。

另外，根据您的代码，`MyActivity`是此接收器的内部类。这不是我建议坚持的范式，并且可能会导致您的一些困惑。我会将这两个实体定义为完全独立的类。如果一个必须是另一个的内部类，那么`BroadcastReceiver`作为`Activity`.

在最低限度，如果您不重构任何 Java 代码，则需要更新清单以根据您编写的内容引用正确的元素，这意味着将实际的 Activity 作为内部类引用。

```
<activity
    android:name=".MainActivity$MyActivity"
    android:label="@string/title_activity_main" >
    <intent-filter>
        <action android:name="android.intent.action.MAIN" />

        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>
</activity>

<receiver
    android:name=".MainActivity"
    android:permission="android.permission.BIND_DEVICE_ADMIN" >
    <meta-data
        android:name="android.app.device_admin"
        android:resource="@xml/device_admin_sample" />

    <intent-filter>
        <action android:name="android.app.action.DEVICE_ADMIN_ENABLED" />
    </intent-filter>
</receiver> 
```

也许花点时间再次查看 SDK 中的设备管理 API 示例，该示例位于

```
<SDK location>/samples/<platform-version>/ApiDemos/src/com/example/android/apis/app/DeviceAdminSample.java 
```

在你的机器上。

# php - MySQL PHP 查询并列出为表

> ID：13672405
> 
> 赞同：0
> 
> 时间：2012-12-02T18:34:09.280
> 
> 标签：php, mysql, database, yql, stock

我正在尝试用 PHP 制作一个简单的证券交易所应用程序，并拥有一个完全工作的基于会话的登录系统。现在我在列出用户在表格中拥有的股票时遇到问题。当我在 Navicat 中运行我在 PHP 代码中所做的确切查询时，查询返回所需的结果，但 PHP 不会使用该信息来填充表。当前值中的 0 是一个占位符，直到我实现提取股票信息所需的 YQL 代码。我有一个屏幕截图，显示了查看我正在谈论的内容所需的所有内容：

[![屏风](../Images/a3f44522d9244a48ede6a9f29e68a794.png)](https://i.stack.imgur.com/UN6U0.png)

我的查询的 PHP 代码在这里：

```
echo "Welcome to your portfolio overview. Here you can view many of your statistics.<br><br><b>Balance:</b> " . $balance . "<br><b>Debt:</b> " . $debt . "<br>";
$sql2 = "SELECT * FROM `trades` WHERE buyerid=$uid";
$result2 = mysql_query($sql2);
echo "<table border=2 cellpadding=5>";
echo "<tr><td><b>Symbol</b></td><td><b>Purchase Price</b></td><td><b>Current Value</b></td></tr>";
while($row2 = mysql_fetch_array($result2));
{
    echo "<tr><td>" . $row2['identifier'] ."</td><td>" . $row2['purchaseprice'] . "</td><td>" . 0 . "</td></tr>";
}
echo "</table>"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T19:22:34.603

条件后有一个错误的分号`while`：

```
while($row2 = mysql_fetch_array($result2));
                                          ^ -- remove this 
```

使用这个分号，您循环一个空语句，直到您的结果集用完，然后您执行`echo`包含在大括号中的语句（`$row2`现在为 false），而与`while`之前的循环无关。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-02T19:26:33.740

第 6 行：

```
while($row2 = mysql_fetch_array($result2)); 
```

一定是

```
while($row2 = mysql_fetch_array($result2)) 
```

# hadoop - MapReduce: Map-only 还是 Reduce-only？

> ID：13672408
> 
> 赞同：2
> 
> 时间：2012-12-02T18:34:14.300
> 
> 标签：hadoop, mapreduce, hdfs

在我的问题中，我有 100TB 的数据要处理。该数据集中的每个文件大约为 1MB，最多可以属于我们定义的 10,000 多个不同“组”中的 3 个。每组文件都需要一起处理，一个组中可以有几个到几百个文件。由于我们有成千上万个这样的组，我们认为这是 MapReduce 的一个很好的候选者。

我看到了两种可能的方法来设置这项工作（也许还有更多），比如 Hadoop：

1.  **仅映射**：我们按组归档文件，因此拆分和后续映射在组级别完成。由于每个 map 作业都有整个组，它可以自己处理，我们不需要 reduce 作业。但我看到这个解决方案存在一些问题。首先，由于文件最多可以存在 3 个组中，因此除 Hadoop 的复制因子外，按组归档可能会导致我们的存储开销增加三倍。此外，像这样归档数据会降低它在以不同方式处理文件的其他应用程序中的可用性。

2.  **Reduce-only**：据我了解，这种范式意味着一个简单的“身份”映射器和一个数据密集型化简器。在这个解决方案中，文件将无序地存储在磁盘上，并且映射器将接收一组要处理的文件。然后映射器将文件读入内存（至少是它的头信息）以确定它属于哪些组，然后发出要减少的（组，文件）对。然后，reducer 将负责处理这些组。然而，我担心我们可能会失去数据本地化的好处，或者通过这条路线让网络因过多的数据流量而陷入困境。

两种方法都有效吗？如果是这样，哪个会更受欢迎？具体来说，我觉得我非常了解 Map-only 解决方案的优缺点，但不是 Reduce-only。我不确定“本地数据”reduce 作业是怎样的，或者在 reduce 任务中执行“繁重”任务是否被认为是不好的做法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T18:48:05.210

这两种方法似乎都有效。我想最好的办法是两者都尝试。但是，在我看来，“仅 Reduce”版本对于在 Hadoop 中实现的 Map Reduce 作业更为典型，因为框架本身将负责对文件进行分组。

但是，效率严格取决于必须执行的计算。计算是什么？进一步来说：

1.  你能一起处理一个组的元素的一个子集吗？如果是这种情况，您可以使用组合器来大大减少网络流量。

2.  你能想到不同的团体组织吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T22:38:17.233

出于性能原因，我建议选择仅映射解决方案而不是仅减少解决方案。
据我了解，通过改组机制传递数据的计算量非常大。它同时加载 CPU（序列化）、磁盘（因为所有数据都至少存储在磁盘上一次）和网络 - 以传递数据。
在我的估计中，改组比通过非本地 HDFS 文件加载数据要贵几倍。
考虑到您的数据大小，并考虑到在洗牌期间数据会增长（由于序列化开销），我还会考虑仅映射解决方案，以免超出磁盘空间。

# ruby-on-rails - Heroku 并发在临时 API 调用中的可行性？

> ID：13672410
> 
> 赞同：0
> 
> 时间：2012-12-02T18:34:32.000
> 
> 标签：ruby-on-rails, ruby, multithreading, api, heroku

抱歉标题令人困惑，很难想出一个适合我的问题的标题。

为了解释我要做什么，我将使用一个类似的示例：假设我想创建一个 API 调用，当提供一组术语时，它会在 Twitter 中搜索所有这些术语并返回推文。

一方面，我可以做一些简单的事情，例如（如果你原谅伪代码）：

```
results = []
search_terms.each_with_index do |search_term, i|
  search_uri = "http://search.twitter.com/search.json?q=#{search_term}"
  twitter_result = ... #(URI.parse, Net:HTTP:GET, start, etc.)
  results[i] = twitter_result 
end
render :json => results.to_json 
```

但是，当然，如果有几十个关键字，这可能会很慢——如果有超过 100 个关键字更是如此——因为 Ruby 必须等待每个请求开始下一个请求。

Heroku 的测功机似乎应该能够快速完成这项工作（例如，测功机[概述](https://devcenter.heroku.com/articles/dynos)指出“可以直接从测功机发出传出请求”）。然而，似乎访问这些的方法往往是通过延迟作业、Resque 等，它们的用例往往与我所概述的非常不同。

据我所知，这些利用多个测功机/工作人员的方法不会像典型线程那样可行：访问和修改由调用者/父函数实例化的实例变量。据我所知（如果我错了，请纠正我），通常他们使用自己的内存、自己的变量以及其他函数必须访问的任何内容都将通过缓存或数据库来完成。

好吧，所以这并不意味着这个想法是不可能的。一种解决方法可能是，在创建这些之后`DelayedJobs`，在从数据库中获取的父函数中运行一个无限循环（超时）并检查结果大小是否等于关键字的数量，否则会休眠一小段时间，再试一次. 将`DelayedJobs`在执行任务后创建这些行。这不是一个特别好的解决方案，最终会导致服务器的一些额外工作，但随着搜索次数的增加，这可能会比循环遍历它们要快得多。

所以这是问题（以及与第一个相关的几个相关问题）：

我想知道的是，在 Heroku 上设置一个请求有多可行，该请求在被调用后会快速启动一些新工作人员，并行执行多个请求，然后在所有这些请求完成后响应调用者?

启动工人和执行任务所需的时间会`DelayedJobs`不会太长而无法完成这项工作？（希望整个请求的长度只有几秒钟。）

有没有关于请求的截止数量的建议，最好按顺序执行它们，而不是使用`DelayedJobs`? （我希望不会，而且我必须为此做一些试验和基准测试，以决定在什么时候路由到任一选项。）

我是否错过了可以简化此过程（或者更有效）的其他选项？

**编辑：**我也应该注意，额外的工人将根据需要使用 gem （比如[hiresfire](https://github.com/meskyanichi/hirefire)，或类似的东西）来增加——我不确定这会影响多少。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T21:12:01.087

从外部 API 检索信息是 Ruby 中的一项阻塞任务，这意味着您执行此请求的进程或线程在等待响应时基本上会休眠。

要在后台执行大量并发 I/O（例如搜索 Twitter、其他 HTTP 请求等），我在 Ruby/Rails 世界中选择的库是[**Sidekiq**](http://sidekiq.org/)。您可以在 wiki 中了解它相对于 delay_job 和 resque 的效率和优势。

# sql - 常用表表达式和内存使用

> ID：13672413
> 
> 赞同：0
> 
> 时间：2012-12-02T18:34:53.293
> 
> 标签：sql, sql-server, tsql, common-table-expression

我正在使用公用表表达式在批处理语句中执行一些更新。

是否建议在循环中完成表后删除表并在下一次传递时重新声明它？我正在将此脚本部署到一个相当未知的环境中，我担心资源利用率并希望将内存使用量保持在最低限度。

编辑以包括源（这是在一个while循环内）：

```
WITH UpdatedRecords AS (
    SELECT TOP 50000
           unique_id,
           is_processed
    FROM
          _TempSnapshots
    WHERE
          is_processed = 0
    ORDER BY
          unique_id DESC
)
UPDATE UpdatedRecords 
   SET is_processed = 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T00:58:59.463

@MartinSmith 在对问题的评论中回答了这个问题：

在编辑之后是一个公用表表达式。它基本上就像一个派生表，你不能删除它，因为它本身并不作为一个表存在。它不会预先具体化到临时表中，它只是内联到引用它的查询中

# javascript - 包括本地与远程 javascript 库

> ID：13672414
> 
> 赞同：5
> 
> 时间：2012-12-02T18:34:58.363
> 
> 标签：javascript, sha

我正在使用 jsSHA 1.3.1，我[在此处下载](https://github.com/Caligatio/jsSHA/downloads)并在我的本地主机上用于学习项目。它给出的结果与我通过引用遥控器得到的副本略有不同，如下所示：

```
<script src="https://raw.github.com/Caligatio/jsSHA/master/src/sha1.js"></script> 
```

现在，由于@Andreas [here](https://stackoverflow.com/questions/13671632/jssha-cryptojs-and-openssl-libraries-giving-different-results)的出色回答，远程副本对我来说效果很好。

但这给我留下了一个新问题：包含副本与引用远程 js 库的理由是什么？是否就像“供应”库一样，使我的应用程序不受代码中的后续更改影响？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-02T20:30:42.473

如果您的应用程序在 WWW 上可用，您应该考虑使用众所周知的外部 URL。

* * *

```
<script type="text/javascript"
   src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js">
</script> 
```

*下面的示例从 google 的服务器获取 jquery 1.8.0 的缩小版本。*

* * *

*   这种方法获得的好处来自于缓存：

*   您不希望潜在用户第一次访问您的网站时变得缓慢且令人失望。如果您的第一次访问者访问了我的站点，该站点使用此 URL 用于 jQuery，她的浏览器可能已经缓存了它，因此不需要加载它。

*   使用不可变的版本化资源（jquery/1.8.0 而不是 jquery/current 之类的资源）既可以帮助开发人员不必跟踪其生产代码中的重大更改，又可以确保可以缓存这些资源。

*   如果必须下载资源并且 URL 托管在 CDN 上，您可能会获得较低的延迟，因为资源可能会从更靠近用户网络的服务器加载。示例中的 URL 托管在作为 CDN 的 Google Hosted Libraries 上。有关更多信息，请参阅[https://developers.google.com/speed/libraries/devguide](https://developers.google.com/speed/libraries/devguide)。

*   在此类讨论中经常看到的另一个论点是，当必须下载资源时，如果资源不在您自己的服务器上以及您的页面包含的另外 10 个资源，您将能够获得更好的客户端资源加载并行性，因为浏览器限制他们自己加载最多少量（现代浏览器中大约 6 个）资源形成同一服务器。

*   如果您的 Internet 范围的 Web 应用程序对安全至关重要，那么您必须尽可能安全地控制它（并且静态不可变或几乎不可变的资源相对容易安全地管理）。

*   如果我的银行通过 HTTPS 运行的电子银行应用程序依赖谷歌的 HTTP 服务器提供服务，那么它既会授予谷歌对其电子银行应用程序客户端部分的权限，又会消除 HTTPS 连接的几乎所有好处它的服务器。流氓客户端脚本无法做的事情很少......

*   如果您的应用程序是在本地访问的，您可能应该将它包含在您的应用程序中，以兼顾性能（在延迟和带宽方面，访问您的服务器应该比访问某些远程服务器更快）和可靠性原因（您不依赖在外部 Internet 连接和正在启动并运行的远程服务器上）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-02T18:48:08.087

这取决于开发人员是否对您“热链接”到 JS 库感到满意。

关于您发布的具体网址，

```
https://raw.github.com/Caligatio/jsSHA/master/src/sha1.js 
```

我会小心引用那个。它是其源代码的主分支，它们可能随时包含重大更改。他们甚至可能决定移动和重组他们的代码库，在这种情况下，您的应用程序将中断，因为上面的 URL 将导致 404。

更好的解决方案确实是引用库的特定版本。这可确保您的应用程序以预期和已知的方式运行，并将继续运行，就 jsSHA 库而言。

有几种方法可以做到这一点。您可以引用明确指定版本的特定固定 URL

```
http://crypto-js.googlecode.com/svn/tags/3.0.2/build/rollups/hmac-sha1.js 
```

因为它被标记为 (3.0.2)，所以你更安全一些，但你仍然引用源代码控制。如果存在 CDN，这确实应该通过 CDN 完成。我不相信 googlecode.com URL 是 CDN URL（我可能是错的）。使用适当的 CDN 或外部链接来引用 JS 库当然是一种常见的做法，您可以[在 JQuery 页面上看到这样的示例](http://jquery.com/download/)，但这通常是作为页面性能增强的一部分。CDN 针对用户的地理位置进行了优化，因此可以更快地提供对 CDN（与主服务器相反）上任何内容的引用。它具有用户体验优势。如果页面加载时间对您的用户群很重要，这很有用。

另一种选择，也是最安全的方法是，将 JS 库的副本保存在您自己的源代码管理中，并使用您自己的基础设施引用它。它与您同在，它是一个固定版本，如果发生某些变化（例如重组、站点关闭等），也不会让人感到意外。

# jquery-ui - 通过 jQuery 在 Datepicker 上更改 CSS

> ID：13672415
> 
> 赞同：0
> 
> 时间：2012-12-02T18:34:59.997
> 
> 标签：jquery-ui, jquery-ui-datepicker

我正在返回一些数据服务器端，需要循环浏览日历的日期并调整 CSS。我目前正在做这样的事情：

```
$.post("GetMeSomeData", { year: theYear, month: theMonth }, function(data) {
            //cycle through the dates and address the CSS appropriately
            var i = 0;
            for (i = 0; i < data.length; i++) {
                $('.ui-datepicker-calendar td a:exactly(' + data[i]['d'] + ')')
                    .css({ backgroundColor: 'blue' });
            }

        });

  $.expr[":"].exactly = function (el, i, m) {
        var s = m[3];
        if (!s) return false;
        return eval("/^" + s + "$/i").test($(el).text());
    }; 
```

个别日子的背景没有改变。有没有更好的方法来做到这一点，或者我错过了什么？理想情况下，我只想使用 addClass()，因为我很确定我需要使用 '!important' 来覆盖日历上的内容。

# bash - 使用 bash 进程替换 sudo 命令

> ID：13672420
> 
> 赞同：12
> 
> 时间：2012-12-02T18:35:43.777
> 
> 标签：bash

我想使用 bash 进程替换 sudo 命令。

例如，这是一个适用于我的非 sudo 命令：

```
$ cat <(echo "installed.txt")
installed.txt 
```

这是该命令的 sudo 版本，该命令不起作用：

```
$ sudo cat <(echo "installed.txt")
cat: /dev/fd/63: Bad file descriptor 
```

阅读 sudo 手册页，似乎 sudo 在以 root 身份运行命令之前关闭了除了 stdin/stdout/stderr 文件描述符之外的所有文件描述符。这让我认为 bash 在运行 sudo 命令之前正在创建描述符（并执行进程替换）。

我将 root 的 shell 更改为 bash（而不是 sh 默认值）。我已经测试过该命令在以 root 身份登录时可以正常工作。它仅不能通过 sudo 命令工作。

什么是适当的技术来实现我在这里尝试做的事情？评估，引用，sudo 标志，sudoers 文件 mod，其他？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2016-09-17T17:11:33.463

问题中描述的行为是由于`sudo`.

```
$ sudo cat <(echo "installed.txt")
cat: /dev/fd/63: Bad file descriptor 
```

发生错误是因为`sudo`具有关闭文件描述符的默认行为，标准输入、输出和错误除外。如手册页所述：

> 默认情况下，sudo 会在执行命令时关闭除标准输入、标准输出和标准错误之外的所有打开的文件描述符。

可以使用`-C`(or `--close-from`) 选项覆盖此行为，以指定文件描述符编号，低于该编号的文件不应关闭。但是，使用此选项必须得到管理员的允许：需要将以下内容添加到`/etc/sudoers`

```
 Defaults closefrom_override 
```

有了它，如果使用该命令，该命令将起作用`-C`：

```
$ sudo -C64 cat <(echo "installed.txt")
installed.txt 
```

（这里给出的数字`64`是因为它大于`63`错误消息中的数字）。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-02T18:52:00.380

尝试在你的 shell 中这样做：

```
$ sudo bash -c 'cat <(echo "installed.txt for UID=$UID")'
installed.txt for UID=0 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-02T18:54:57.450

```
sudo bash  -c 'cat <(echo "installed.txt")' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-07-23T19:39:43.210

如果您要求**进程替换它带来的安全性**，例如从进程列表中隐藏密码，那么您最好这样做：

```
cat <(echo -n "$PASSWORD") | sudo cryptsetup ... --key-file - 
```

`sudo`当然，密码是通过它发送到*的*`stdin`，所以进程替换没有按要求完成。我的回答在技术上变得离题了。 *`sudo`*

 *我仍然希望它在这个特定的上下文中有所帮助，因为接受的答案带有严重的缺点：您需要构建一个正确引用的字符串，然后生成一个辅助 shell*以*在`sudo`.

由于 shell 注入、环境变量等，这不仅速度慢，而且风险很大。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-02T18:45:53.317

最好的方法可能是将所有内容都放在一个脚本中，然后使用`sudo`.*

# php - 约束表以防止插入或更新

> ID：13672428
> 
> 赞同：1
> 
> 时间：2012-12-02T18:36:44.840
> 
> 标签：php, postgresql

我是 PHP 和 PostgreSQL 的新手,,,,

我用以下查询创建了一个表,,,

```
CREATE TABLE public.affiliate (
  id INTEGER NOT NULL,
  name VARCHAR(32),
  parent INTEGER,
  CONSTRAINT affiliate_pkey PRIMARY KEY(id)
); 
```

在这里，我以 id 以 1 开头的方式填充表，其余节点按顺序编号，最大深度数设置为 10。

现在，我需要约束表以防止插入或更新，否则会创建循环层次结构。我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T09:38:27.243

我不会出于商业目的依赖自动生成的标识符，这通常会导致比它解决的问题更多的问题。关于修改表的约束，可以看一下[规则系统](http://www.postgresql.org/docs/9.2/static/sql-createrule.html)。

它允许您即时重写查询：

```
CREATE RULE prevent_insert AS 
  ON INSERT 
  TO public.affiliate 
  DO INSTEAD 
    NOTHING; 
```

这将防止在给定表中插入。当然，这与约束的行为并不完全相同，因为它不会引发错误，因此不会使事务无效。

# python - 使用 2D 数组进行昂贵操作的 Python 多处理

> ID：13672429
> 
> 赞同：4
> 
> 时间：2012-12-02T18:36:47.167
> 
> 标签：python, multiprocessing

我有一个函数，说它`fun(a,b)`非常昂贵，并返回一组数据。

我目前的方法如下：

```
a = np.linspace(0,100,300)
b = np.linspace(0,100,300)
A,B = np.meshgrid(a,b)
Y = np.zeros(A.shape)

for i,av in enumerate(a):
  for j, bv in enumerate(b):
    Y[i,j] = fun(av,bv) 
```

（有点，我不得不把事情弄得一团糟以使它适合）。无论如何，这个过程需要很长时间，我想知道是否有一种直接的方法可以使用我的多核处理器来加快速度。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-02T19:45:02.720

有一个很棒的模块叫做[multiprocessing](http://docs.python.org/2/library/multiprocessing.html)，它是 python 标准库的一部分。它将在尽可能多的内核上生成进程，以利用其他 CPU。文档中有一个使用[Pool](http://docs.python.org/2/library/multiprocessing.html#using-a-pool-of-workers)对象的示例，下面是该示例的简化版本。它将计算 10 个数字的平方，为工作流程分配工作负载并显示结果。

**简单的工作池**

```
from multiprocessing import Pool

def f(x):
    return x*x

pool = Pool(processes=4)
print pool.map(f, range(10)) 
```

**输出**

```
[0, 1, 4, 9, 16, 25, 36, 49, 64, 81] 
```

将您的问题分解为相同的结构，我遇到了更大的挑战。我必须创建一些中介功能来完成这项工作。我没有 numpy，所以我只是使用列表和字典来代替您输入的内容。您可以替换它们并试用代码。

**更多涉及的场景**

```
from multiprocessing import Pool
import time, pprint

def fun(av, bv):
    time.sleep(0.1)
    return (av, bv)

def data_stream(a, b):
    for i, av in enumerate(a):
        for j, bv in enumerate(b):
            yield (i, j), (av, bv)

def proxy(args):
    return args[0], fun(*args[1])

a = range(100, 400, 100)
b = range(100, 400, 100)
Y = {}

pool = Pool(processes=4)
results = pool.map(proxy, data_stream(a, b))
for k,v in results:
    Y[k] = v

pprint.pprint(Y) 
```

**输出**

```
{(0, 0): (100, 100),
 (0, 1): (100, 200),
 (0, 2): (100, 300),
 (1, 0): (200, 100),
 (1, 1): (200, 200),
 (1, 2): (200, 300),
 (2, 0): (300, 100),
 (2, 1): (300, 200),
 (2, 2): (300, 300)} 
```

**表现**

在示例中，我只是设置了一个 0.1 秒的虚拟延迟来模拟繁重的工作。但即使在这个例子中，如果你运行一个池，`processes=1`它在 0.950 秒内`processes=4`运行，它在 0.352 秒内运行。您可以通过多种不同方式使用多处理库 Pool 只是一种方式。您可能想要探索示例和实验。

在下面的评论之一中，提到了使用 pool.map 的 chunksize 参数来帮助提高性能。重要的是要大致了解幕后发生的事情，以真正掌握性能。基本上，您传递给其他进程的所有数据都需要经过腌制传递给未腌制使用的其他进程，然后结果通过相同的过程返回到主进程。这种进程间通信存在开销。实验时请记住这一点。

# c# - 可能具有挑战性：如何在这个解谜程序中实现解题逻辑？

> ID：13672437
> 
> 赞同：5
> 
> 时间：2012-12-02T18:37:56.133
> 
> 标签：c#, logic

我正在尝试制作一个解决日本益智游戏“河流智商测试”的程序，我知道，我可以查找解决方案，但现在不会有趣和有教育意义吗？:)

这是游戏的目标：

使用木筏，用户可以运送人过河，用户必须将所有的人从左侧运送到右侧。每次使用木筏时，它都会停留在另一侧，直到另一侧的人再次将它引到另一侧以吸引更多人。

左边有以下人开始：

*   1 囚犯
*   1名警察
*   1 父亲
*   2 个儿子
*   1 母亲
*   2个女儿

下面是类的层次结构：

## 乘客

*   飞行员
    *   家长
        *   母亲
        *   父亲
    *   警察
*   囚犯
*   孩子
    *   女儿
    *   儿子

必须遵守以下规则：

*   一次只有 2 个人在木筏上。
*   只有警察、父亲和母亲才能驾驶木筏
*   在没有警察在场的情况下，囚犯不能在其他人在场的情况下被安置在木筏上或河的任何一侧。
*   没有母亲在场，父亲不能和女儿一起在木筏上或河的两边。
*   没有父亲在场，母亲不能和儿子一起在木筏上或河的两边。

我还需要完成的是：

*   使用试错解决逻辑直到解决难题的逻辑
*   打印最终成功解决方案的逻辑
*   检查是否每个人都到达另一边的逻辑。

这是我当前的代码：

## 程序类（解决逻辑应该放在这里）

```
class Program
{
    Side _leftSide = new Side(Side.RL_Side.RL_LeftSide);
    Side _rightSide = new Side(Side.RL_Side.RL_RightSide);
    Raft _myRaft = new Raft();
    static void Main(string[] args)
    {
        // TODO: put systematic trial-and-error solving logic here
        // TODO: make sure that successful solution is printed to console

        Console.ReadLine();
    }
} 
```

## 乘客列表类

```
public class PassengerList : List<Passenger>
{
    public bool CheckRulesObeyed()
    {
        bool isPoliceman = isPresent<Policeman>();
        bool isPrisoner = isPresent<Prisoner>();
        bool isFather = isPresent<Father>();
        bool isSon = isPresent<Son>();
        bool isMother = isPresent<Mother>();
        bool isDaughter = isPresent<Daughter>();
        // ----------------------------------------------
        bool isPrisoner_NonPoliceman = (isPrisoner && (isFather || isMother || isDaughter || isSon));

        bool isPrisonerRuleViolated = (!(isPoliceman && isPrisoner) && isPrisoner_NonPoliceman);
        bool isDaughterRuleViolated = ((isFather && isDaughter) && !isMother);
        bool isSonRuleViolated = ((isMother && isSon) && !isFather);

        bool AreAllRulesObeyed = !(isPrisonerRuleViolated && isDaughterRuleViolated && isSonRuleViolated);

        return AreAllRulesObeyed;
    }

    private bool isPresent<T>() where T: Passenger
    {
        foreach (Passenger p in this)
        {
            if (p is T)
                return true;
        }
        return false;
    }
} 
```

## Side Class（如在河边）

```
public class Side
{
    public enum RL_Side
    { 
        RL_RightSide,
        RL_LeftSide
    }

    public RL_Side _whichSide;

    public PassengerList _myPeople;

    public Side(RL_Side side)
    {
        _whichSide = side;
        _myPeople = new PassengerList();

        // left side starts with all the people
        if (_whichSide == RL_Side.RL_LeftSide)
        {
            _myPeople.Add(new Prisoner());
            _myPeople.Add(new Policeman());
            _myPeople.Add(new Father());
            _myPeople.Add(new Son());
            _myPeople.Add(new Son());
            _myPeople.Add(new Mother());
            _myPeople.Add(new Daughter());
            _myPeople.Add(new Daughter());
        }
    }

    public bool didEveryoneMakeItToRightSide()
    {
        if (_whichSide == RL_Side.RL_RightSide)
        { 
            // TODO: implement logic that checks and returns if everyone is on the right side.

        }
        return false;
    }
} 
```

## 筏类

```
public class Raft
{
    public Side _mySide;
    public PassengerList _myPassengers;

    public void ChangeSides(Side Destination)
    {
        _mySide = Destination;
    }

    public bool LoadRaft(Pilot myPilot, Passenger myPassenger)
    {
        bool areRulesObeyed = true;
        _myPassengers.Add(myPilot);
        _myPassengers.Add(myPassenger);

        areRulesObeyed = _myPassengers.CheckRulesObeyed();

        if (areRulesObeyed == false)
        {
            UnloadRaft();
        }

        return areRulesObeyed;

    }
    public void UnloadRaft()
    {
        foreach (Passenger p in _myPassengers)
        {
            _mySide._myPeople.Add(p);
            _myPassengers.Remove(p);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T21:00:34.830

我认为您从未学习过PROLOG。这些问题在PROLOG中是经典的，更重要的是PROLOG只处理问题的本质。当我在标题中看到逻辑和谜题时，很明显你需要一种逻辑语言。我知道您要求使用 C#，但这不是 OO 问题，正如您所说，这是一个逻辑问题。

参见[Prolog 深度编程](http://ai.ia.agh.edu.pl/wiki/_media/pl:prolog:ppid.pdf)pg.229 第 8.3 节。传教士和食人者 请注意，解决方案比问题中的所有代码都小。不要误会我的意思，很多年前我在同一条船上，双关语。

我认识的一些最优秀的程序员处理此类问题不是为了解决方案，而是因为自己解决问题，他们知道他们会学到一些重要的东西，以后可以使用。花几个月的时间来了解 PROLOG 如何解决这个问题，你会比给你建议的人好得多。如果您不了解递归以及 AI 如何解决问题，您通常会在获得解决方案时了解。

编辑

> 但是，C# 是否无法解决这种问题？

PROLOG 有一个内置的[推理引擎](http://en.wikipedia.org/wiki/Inference_engine)和[反向链接](http://en.wikipedia.org/wiki/Backward_chaining)，这是在给定规则的情况下找到解决方案的工作。您可以从头开始创建一个，这比解决最初的问题更难，但是有一个 C# 中 PROLOG 的开源实现， John Pool 的[C#Prolog](http://sourceforge.net/projects/cs-prolog/)。虽然您可以查看源代码以了解 PROLOG 的工作原理，但该代码经过大量优化，因此除非您先了解 PROLOG，否则不容易理解。

如果您了解 F# 或函数式语言，[如何用纯函数式语言实现 prolog 解释器](https://cs.stackexchange.com/a/6622/268)？可能有帮助。

基本上，问题归结为创建一组规则，然后尝试组合规则，直到获得满足所有规则的结果。

从这些关键字和短语开始，在此处搜索互联网和问题。

统一
句法统一
回链
推理引擎
prolog 的工作原理

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-04T09:13:58.683

您可以使用任何支持递归的语言相对容易地做到这一点，
使用回溯，一种简单的算法/技术。

例如：

你有问题状态（每一边的人）
你有一个函数可以枚举
来自该状态的所有可能的交叉点，并尝试每一个。

如果交叉正常，它将新状态添加到历史记录中，
并从新状态调用自身。
当它返回时，它会从历史记录中删除状态
并尝试下一次交叉。
当它用完交叉口时，它会返回给它的调用者。

您需要历史，因为唯一的最终状态是目标。
否则，您可能会陷入循环：
A组单向交叉，然后返回，再次交叉，返回等。
或A组单向交叉，B交叉返回，B返回，A返回等。

（抱歉，我不知道如何让代码格式化程序在这里工作。）

# asp.net-mvc-4 - 看不到为 pjax 触发的自定义事件

> ID：13672438
> 
> 赞同：0
> 
> 时间：2012-12-02T18:38:18.740
> 
> 标签：asp.net-mvc-4, pjax

我正在尝试查看是否可以触发一些自定义事件，以诊断我是否正确连接了 pjax。据我所知，pjax 根本不起作用。

这是我正在测试的脚本块。

```
 $('#main').pjax('a.pjax')
      .on('pjax:start', function () { console.log('start'); })
      .on('pjax:end', function () { console.log('end'); })
      .on('pjax:beforeSend', function () { console.log('beforeSend'); })
      .on('pjax:complete', function () { console.log('complete'); })
      .on('pjax:success', function () { console.log('success'); })
      .on('pjax:error', function () { console.log('error'); })
      .on('pjax:timeout', function () { console.log('timeout'); }); 
```

这是我页面的整个 HTML 输出。

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Index</title>

    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    <script src="/scripts/lib/jquery/jquery.pjax.js"></script>

    <script>
        $('#main').pjax('a.pjax')
          .on('pjax:start', function () { console.log('start'); })
          .on('pjax:end', function () { console.log('end'); })
          .on('pjax:beforeSend', function () { console.log('beforeSend'); })
          .on('pjax:complete', function () { console.log('complete'); })
          .on('pjax:success', function () { console.log('success'); })
          .on('pjax:error', function () { console.log('error'); })
          .on('pjax:timeout', function () { console.log('timeout'); });
    </script>
</head>
<body>
    <div class="navbar navbar-fixed-top">
        <div class="navbar-inner">
            <div class="container">
                <button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="brand" href="/">Rocky Mountain Arts</a>
                <div class="nav-collapse collapse">
                    <ul class="nav">
                        <li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown">Gallery <b class="caret"></b></a>
                            <ul class="dropdown-menu">
                                <li><a href="/Gallery" class="pjax">For Sale</a></li>
                                <li><a href="/Gallery/Sold" class="pjax">Sold</a></li>
                                <li><a href="/Gallery/PrivateCollection" class="pjax">Private Collection</a></li>
                            </ul>
                        </li>
                        <li><a href="/About" class="pjax">About The Artist</a></li>
                        <li><a href="/Contact" class="pjax">Contact</a></li>
                    </ul>
                </div>
                <div class='loader'><img src='/img/spinner.gif'></div>
            </div>
        </div>
    </div>
    <div id="main" class="container">

<h2>Index</h2>

    </div>
</body>
</html> 
```

至于 .NET 部分。

**_ViewStart.cshtml**

```
@{
  if (Request.Headers["X-PJAX"] != null) {
    Layout = "~/Views/Shared/_Pjax.cshtml";
  } else {
    Layout = "~/Views/Shared/_Layout.cshtml";
  }
} 
```

**_Pjax.cshtml**

```
<title>@ViewBag.Title</title>
@RenderBody() 
```

现在，当我单击一个链接时，我看不到`X-PJAX`正在发送的标题，我的控制台中也没有显示任何内容。

我有什么明显的遗漏吗？

# c# - 将字典转换为 linq 查询

> ID：13672439
> 
> 赞同：1
> 
> 时间：2012-12-02T18:38:19.823
> 
> 标签：c#, linq, dictionary

我是 c# 的新手，我正在构建一个包含图书馆（书籍和期刊）内容的应用程序。

我正在用 UI、BLL 和 DAL 构建一个 3 层程序。

我要做的是从组合框中获取文本并将其（最终）在我的 DAL 中转换为 Linq 到 SQL 查询。我创建了一个本地数据库并将其映射到实体框架。

我有以下代码：

```
BL.MainLogic BLL = new MainLogic();
Dictionary<string, string> searchList = new Dictionary<string, string>();
searchList.Add("ItemID", cmboBxItemID.Text);
searchList.Add("ItemName", cmboBxItemName.Text);
searchList.Add("ItemType", cmboBxItemType.Text);
searchList.Add("Author", cmboBxAuthor.Text);
searchList.Add("Publisher", cmboBxPublisher.Text);
searchList.Add("Price", cmboBxPrice.Text);
DataTable searchResult = BLL.Search(searchList);
searchGridView.DataSource = searchList; 
```

我正在使用列名和要搜索的值创建一个字典，然后将其传递给 BL：

```
public DataTable Search(Dictionary<string,string> SearchParams)
{
    var itemType = SearchParams.FirstOrDefault(x => x.Key == "ItemType");
    IQueryable query = SearchParams.AsQueryable();
} 
```

现在我要做的是从字典中的所有键和值创建一个查询，格式如下：

键 == 值。

我怎样才能以更好的方式做到这一点？我什至应该为这种类型的操作使用字典吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T08:00:51.657

我所做的是我最终通过创建我的 UI 可以看到的数据库实体的模型（称为 BookVO）当用户将数据插入组合框时，我将该数据插入 BookVO，将其传递给我的 BL稍后将其传递给我的 dal。然后我使用同一本书搜索我的 EF 上下文。

这是我添加这本书的地方：

```
private BookVO AddNewBook()
{
    BookVO bookToAdd = new BookVO()
    {
        Author = txtBxBookAuthor.Text,
        Discount = double.Parse(txtBxBookDiscount.Text),
        Genre = txtBxBookGenre.Text,
        ISBN = txtBxBookISBN.Text,
        Name = txtBxBookName.Text,
        Price = double.Parse(txtBxBookPrice.Text),
        Publisher = txtBxBookPublisher.Text,
        ReleaseDate = DateTime.Parse(dateTimeBookPicker.Text)
    };
    return bookToAdd; 
```

这是我的 BL 部分，它把书传给我的 DAL

```
public List<BookVO> SearchBook(BookVO book)
{
    List<Books> queryResult = BLDAL.SelectBookFromDB(book);
    List<BookVO> returnedBook = new List<BookVO>();
    foreach (Books dBBook in queryResult)
    {
        BookVO thisBook = new BookVO() {Author = dBBook.Author, Name = dBBook.Name, ISBN = dBBook.BookISBN, Discount = dBBook.Discount, Price = dBBook.Price, Publisher = dBBook.Publisher, ReleaseDate = dBBook.ReleaseDate};
        returnedBook.Add(thisBook);
    };
    return returnedBook;
} 
```

这是我的 DAL 搜索逻辑：

```
public List<Books> SelectBookFromDB(BookVO book)
{
    var result = myEntities.Books.ToList();
    if (string.IsNullOrWhiteSpace(book.Author) == false)
    {
        result = result.Where(x => x.Author == book.Author).ToList();
    }
    if (string.IsNullOrWhiteSpace(book.Name) == false)
    {
        result = result.Where(x => x.Name == book.Name).ToList();
    }
    if (string.IsNullOrWhiteSpace(book.Publisher) == false)
    {
        result = result.Where(x => x.Publisher == book.Publisher).ToList();
    }
    if (string.IsNullOrWhiteSpace(book.ISBN) == false)
    {
        result = result.Where(x => x.BookISBN == book.ISBN).ToList();
    }
    if (book.Price != 0)
    {
        result = result.Where(x => x.Price == book.Price).ToList();
    }
    if (book.Discount != 0)
    {
        result = result.Where(x => x.Discount == book.Discount).ToList();
    }

    return result;
} 
```

# c++ - 使用继承的编译器错误 lnk2019 和 c4930

> ID：13672441
> 
> 赞同：0
> 
> 时间：2012-12-02T18:38:30.850
> 
> 标签：c++, visual-studio-2010

我在使用继承时编译代码时遇到问题。我已经尝试了大部分但没有运气编译

我首先有一个抽象或“接口”类

```
class ImyBase
{
    public:
        ImyBase();
        ImyBase(....);
        virtual ~ImyBase();

        virtual void someFuncs() = 0;
        ....
}; 
```

然后我有一个实现这个类的类。

```
class myBase : public ImyBase
{
    public:
        myBase();
        myBase(....);
        virtual ~myBase();

        void someFuncs();
        ....
}; 
```

然后我有一个包装类。

```
class myWrap
{
    public:
        myWrap();
        myWrap(....);
        virtual ~myWrap();

        void someFuncs();
        ....
}; 
```

此时在实施中一切正常。但是当我尝试测试包装类时，我得到了错误 LNK2019: unresolved external symbol "public: __thiscall ImyBase::ImyBase(void)" (??0ImyBase@@QAE@XZ) 在函数“public: __thiscall”中引用myBase::myBase(void)" (??0myBase@@QAE@XZ)

```
int main(int argc, char* argv)
{
    myWrap wr;
} 
```

任何帮助表示赞赏！我知道它一定是某个地方的愚蠢错误......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T18:51:02.030

您没有基本构造函数的实现。这些选项在实现文件中定义构造函数，或者，如果它们为空，则在类定义本身中定义：

```
class ImyBase
{
    public:
        ImyBase() {};
        ImyBase(....) {};
        virtual ~ImyBase() {};
}; 
```

或将它们标记`default`为 C++11：

```
class ImyBase
{
    public:
        ImyBase() = default;
        ImyBase(....) = default;
        virtual ~ImyBase() = default;
}; 
```

# python - 使用 Python 和 imaplib 的 GMail - 在“所有邮件”中搜索

> ID：13672442
> 
> 赞同：2
> 
> 时间：2012-12-02T18:38:54.433
> 
> 标签：python, gmail, imaplib

我正在尝试使用 Python 和 imaplib 构建电子邮件客户端。

目前我的问题是：我想对包含所有电子邮件的文件夹进行搜索。通常称为“[GMail]/所有电子邮件”。

我的问题是，我的 GMail 是本地葡萄牙语。因此，就我而言，在葡萄牙语的“[Gmail]/Todo o correio”上进行选择是可行的，但选择“[Gmail/All email”不起作用。

这是一个问题，因为我自然想要一种通用的方式来访问任何Gmail帐户中的“所有邮件”文件夹，而不管国家/地区。

当然，我可以采用一种简单的解决方案，例如搜索所有文件夹并返回汇总结果，但我绝对不想走这条路。

这是一个通用的解决方法吗？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T18:47:50.030

不久后找到了解决方案。为了方便会提到。

当您运行 mail_instance.list() 时，您会获得一个文件夹列表，例如：

```
(\Noselect \HasChildren) "/" "[Gmail]"
(\HasChildren \HasNoChildren \Trash) "/" "[Gmail]/Caixote do Lixo"
(\HasNoChildren \Flagged) "/" "[Gmail]/Com estrela"
(\HasChildren \HasNoChildren \Sent) "/" "[Gmail]/Correio enviado"
(\HasChildren \HasNoChildren \Important) "/" "[Gmail]/Importante"
(\HasChildren \HasNoChildren \Drafts) "/" "[Gmail]/Rascunhos"
(\HasNoChildren \Junk) "/" "[Gmail]/Spam"
(\HasChildren \HasNoChildren \All) "/" "[Gmail]/Todo o correio" 
```

（这些是葡萄牙语）

“所有邮件”文件夹的名称始终在字符串中包含标记“\All”，因此只需在 .list() 返回的所有文件夹名称中搜索“\All”。

然后只需从“[Gmail]”的索引中提取子字符串到之后的第一个双引号的索引，即可获得“所有邮件”文件夹名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-17T13:37:31.270

看到这个答案：[https ://stackoverflow.com/a/3846248/2131094](https://stackoverflow.com/a/3846248/2131094)

“谷歌和苹果开发了一个特殊的 IMAP 命令 XLIST 来解决这个问题。”

# database - 在 sqlite 数据库中连接两个表的技术

> ID：13672446
> 
> 赞同：0
> 
> 时间：2012-12-02T18:39:15.950
> 
> 标签：database, sqlite

我正在做一个项目来保存房屋和成员的信息。房子表将存储每个房子的信息。（地址，土地面积，电力......等）。每个房子都有一个门牌号。成员表将存储所有成员的信息。（姓名，生日，......等）。

现在在程序中，当用户输入门牌号时，程序会给出房子的信息。现在我需要它来过滤特定房屋的成员并显示他们的信息。

有人可以指出我一些技术来做到这一点。

感谢任何帮助。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T18:42:28.567

您需要在两个表之间使用 JOIN。你可以在这里找到更多信息：http: [//www.tizag.com/sqlTutorial/sqljoin.php](http://www.tizag.com/sqlTutorial/sqljoin.php)

假设您的桌子`houses`有这些信息：

```
id | address | town | country | stairs | etc. 
```

该表`members`有这些信息：

```
id | name | sex | house_id 
```

`house_id`链接到表 id 的外键在哪里`houses`

你的 SQL 看起来像这样：

```
SELECT members.*, houses.* FROM members
LEFT JOIN houses ON houses.id = members.house_id 
```

这将返回您表`members`中的每个成员以及信息或他们相应的房子。

# c# - 带有空测试的 NHibernate JoinAlias 查询不起作用

> ID：13672448
> 
> 赞同：4
> 
> 时间：2012-12-02T18:39:30.167
> 
> 标签：c#, nhibernate, nullreferenceexception, queryover

我在 NHibernate 中使用 JoinAlias QueryOver 得到一些意外行为。

我的实体基本上看起来像这样：

```
public class Field
{
    public virtual long Id { get; protected set; }
    public virtual Field Parent { get; protected set; }
    public virtual FieldType Type { get; protected set; }
    public virtual string Value { get; protected set; }

...(Ctors etc
} 
```

我的映射是这样的：

```
public class FieldMap : ClassMap<Field>
{
    public FieldMap()
    {
        Id(x => x.Id)
            .GeneratedBy.Native();

        References(x => x.Type)
            .Column("FieldTypeId")
            .LazyLoad()
            .Cascade.All()
            ;

        Map(x => x.Value);

        References(x => x.Parent)
            .Column("ParentFieldId")
            .Nullable()
            .LazyLoad()
            .Cascade.All()
            ;
    } 
```

我的查询：

```
 Field fieldAlias = null;
        string typeAlias = null;
        Field parentFieldAlias = null;

        var query = getSession().QueryOver<Field>(() => fieldAlias)
            .JoinAlias(() => fieldAlias.Type, () => typeAlias)
            .Where(() => typeAlias.Name == type)
            .JoinAlias(() => fieldAlias.Parent, () => parentFieldAlias)
            .Where(() => (parentFieldAlias.Value == parentValue) || (parentFieldAlias == null))
            ; 
```

就我而言，这应该给我一些这样的 SQL：

... WHERE (a.ParentFieldId == NULL) 或 (a.ParentFieldId = c.FieldId AND c.Value = parentValue)

但我得到一个空引用异常。（我假设当别名被解析并且 Parent 为空时）。

异常详情如下：

```
System.NullReferenceException occurred
  HResult=-2147467261
  Message=Object reference not set to an instance of an object.
  Source=NHibernate
  StackTrace:
       at NHibernate.Criterion.ConstantProjection..ctor(Object value)
       at NHibernate.Criterion.Projections.Constant(Object obj)
       at NHibernate.Impl.ExpressionProcessor.FindMemberProjection(Expression expression)
       at NHibernate.Impl.ExpressionProcessor.ProcessSimpleExpression(Expression left, Expression right, ExpressionType nodeType)
       at NHibernate.Impl.ExpressionProcessor.ProcessSimpleExpression(BinaryExpression be)
       at NHibernate.Impl.ExpressionProcessor.ProcessBinaryExpression(BinaryExpression expression)
       at NHibernate.Impl.ExpressionProcessor.ProcessExpression(Expression expression)
       at NHibernate.Impl.ExpressionProcessor.ProcessOrExpression(BinaryExpression expression)
       at NHibernate.Impl.ExpressionProcessor.ProcessBinaryExpression(BinaryExpression expression)
       at NHibernate.Impl.ExpressionProcessor.ProcessExpression(Expression expression)
       at NHibernate.Impl.ExpressionProcessor.ProcessLambdaExpression(LambdaExpression expression)
       at NHibernate.Impl.ExpressionProcessor.ProcessExpression(Expression`1 expression)
       at NHibernate.Criterion.QueryOver`2.Add(Expression`1 expression)
       at NHibernate.Criterion.QueryOver`2.Where(Expression`1 expression)
       at NHibernate.Criterion.QueryOver`2.NHibernate.IQueryOver<TRoot,TSubType>.Where(Expression`1 expression)
       at Ismoos.Director.FieldOptionsQuery.Execute(Service service, String type, String parentValue) in D:\Work\Ismoos\Ismoos\Director\Ismoos.Director\FieldOptionsQuery.cs:line 31
  InnerException: 
```

我尝试了几种不同的方法，包括：

```
 .JoinAlias(() => fieldAlias.Parent, () => parentFieldAlias)
            .Where(Restrictions.Or(Restrictions.On(() => fieldAlias.Parent).IsNotNull,
                Restrictions.On(() => parentFieldAlias.Value).IsLike(parentValue)))) 
```

但这些都不起作用。

我有一个解决方法，通过在查询中省略对父字段值的限制，并在 QueryOver 返回后执行 LINQ 查询，如下所示：

```
 Field fieldAlias = null;
        string typeAlias = null;
        Field parentFieldAlias = null;

        var query = getSession().QueryOver<Field>(() => fieldAlias)
            .JoinAlias(() => fieldAlias.Type, () => typeAlias)
            .Where(() => typeAlias.Name == type)
            ;

        var list = query
        .List<Field>()
        ;

        return list
            .Where(x => (x.Parent == null) || (x.Parent.Value == parentValue))
            .ToList(); 
```

但这并不像在 QueryOver 中那样优化。

有什么建议么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-03T07:40:28.513

第二个有限制的解决方案可以完成这项工作。有两个问题。我们需要一个 LEFT JOIN 到 Parent 并且我看到一个*错字*：`IsNotNull`应该是`IsNull`正确评估`OR`语句：

损坏的解决方案`IsNotNull`（很可能是内部连接）

```
.JoinAlias(() => fieldAlias.Parent, () => parentFieldAlias)
.Where
(
  Restrictions.Or(
    Restrictions.On(() => fieldAlias.Parent).IsNotNull, // here
    Restrictions.On(() => parentFieldAlias.Value).IsLike(parentValue)))
) 
```

使用`OR`并`IsNull`左加入：

```
.JoinAlias(() => fieldAlias.Parent, () => parentFieldAlias
           , NHibernate.SqlCommand.JoinType.LeftOuterJoin)) // left join for NULL
.Where
(
  Restrictions.Or(
    Restrictions.On(() => fieldAlias.Parent).IsNull, // this is what we need
    Restrictions.On(() => parentFieldAlias.Value).IsLike(parentValue))
); 
```

第一个解决方案的问题是，我们无法评估 null*浮动/虚拟对象*：*`parentFieldAlias`*

> .Where(() => (parentFieldAlias.Value == parentValue) || *(parentFieldAlias == null)* ) ;

我们需要检查所有者的财产：`fieldAlias.Parent`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-18T13:08:26.407

我有类似的问题和条件之间的附加括号

喜欢

```
.Where(() => (parentFieldAlias.Value == parentValue) || (parentFieldAlias == null)); 
```

让事情为我工作。

# android - android 应用程序中占用最多内存的是什么？

> ID：13672453
> 
> 赞同：2
> 
> 时间：2012-12-02T18:40:05.480
> 
> 标签：android

我正在尝试优化我的应用程序的内存使用情况。从广播接收器和服务到位图和静态变量，应有尽有。我认为我的应用程序中有很多内存泄漏需要处理，但它永远不会出现内存不足异常。

我想知道避免过多内存消耗的最佳方法是什么，我是否必须始终回收位图？因为我从来没有这样做过，用活动上下文或应用程序上下文注册广播接收器是否很好，使用静态变量从活动访问数据是否安全，我是否应该为活动中的每个变量赋予空值所以它们可以被垃圾收集还是没有必要？

有很多问题，但就像我的第一个 android 应用程序一样，代码在某些地方做得很糟糕，而且很复杂。

对于性能出色且做得好的应用程序，有哪些最佳实践？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T20:21:47.393

**最重要的**

如果您正在寻找内存优化，最重要的一步是检查`logcat`与垃圾收集器相关的消息。类似于：

```
12-01 19:12:09.138: D/dalvikvm(31828): GC_CONCURRENT freed 158K, 3% free 10259K/10503K, paused 15ms+0ms, total 19ms 
```

第一个值是 GC 在这次运行中释放的数量，第二个是您的应用程序使用的数量，第三个是分配给您的应用程序的数量。最后一个值随着您的应用程序需要的内存增加而增长，直到分配的内存达到系统允许的最大数量，并且您的应用程序被终止。SDK 之前必须`Honey Comb`有更多的值，即外部使用的内存`Dalvik Vm`，通常由`Bitmap`对象使用。

因此，最重要的测试是通过使用您的应用程序一段时间并检查已用/已分配内存的值是否保持稳定或持续增加。

如果它保持稳定，你的分析就完成了，你可以去喝杯咖啡了 :-)

它不断增加，那么也许最好开始检查你的记忆去向......

**该怎么办**

实现良好内存使用的最基本的良好规则是释放（清空）您不再需要的任何对象。对于大多数非静态对象，这是自动完成的，因此您应该主要关注`static`那些，确保在不需要时将 null 分配给它们。

**棘手的**

内存泄漏的最常见原因是未正确管理静态对象并持有对以下内容的引用：

*   语境
*   视图（包含对上下文的引用（也可能对位图）
*   线程（GC不容易收集）
*   处理程序（保存对上下文的引用）
*   BitMap（主要是 Honey Comb 之前的版本，GC 在收集它们时没有那么有效）

**最后说明**

如果您可以花一小时，请观看来自 Google IO 2011 的视频，其中 Patrick Dubroy 解释了如何使用 MAT 来识别内存泄漏：[Google I/O 2011：Android 应用程序的内存管理](http://www.youtube.com/watch?v=_CruQY55HOk)。

它真的帮助我在我的应用程序中启动了内存隧道。

问候。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T18:52:50.343

我认为手册就足够了：http: [//developer.android.com/training/best-performance.html](http://developer.android.com/training/best-performance.html)

# algorithm - 2D 渲染 - 识别岛屿和应用“海滩”的算法？

> ID：13672454
> 
> 赞同：4
> 
> 时间：2012-12-02T18:40:18.150
> 
> 标签：algorithm, 2d, 2d-games

我正在玩 2D 游戏编程。我的玩具项目是一个包含可探索岛屿和更多岛屿的航海游戏，但目前我正试图找到将“海滩”（即软末端）应用于其他相当粗糙的岛屿的最佳方式。瓷砖尺寸为 64x48。

![在此处输入图像描述](../Images/79ed5f46aca4f0de558e5f59f71a7b31.png)

我目前的解决方案是遍历每个图块并寻找周围的图块，并根据它们的周围环境，将水图块替换为正确的纹理。

我意识到这是一种非常有缺陷的方法，因为它是：

*   令人难以置信的低效，因为每个图块都调用了环绕方法，即使是那些受更改影响的图块
*   执行顺序可能意味着某些图块更改被覆盖

你们知道我可以如何绕过并以更好的方式解决这个问题吗？

谢谢！

**编辑**

此算法在加载地图时执行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T19:20:05.357

在每行/行一次通过中检测边界（但首先不是角）的算法将是：

```
for each horizontal line
  previousTag = getTag( first line pixel ) // land or water in our example
  for each pixel of the line
    currentTag = getTag( this pixel )
    if ( previousTag == currentTag ) 
       continue // not a border
    else 
       // We got a vertical border, do what is needed

    previousTag = currentTag
  endforeach
endforeach 
```

垂直线也是如此（不是增加 x，而是增加 y。我们也可以在这里知道我们是否有一个角而不是垂直边框：

```
for each vertical line
  previousTag = getTag( first line pixel ) // land or water in our example
  for each pixel of the line
    currentTag = getTag( this pixel )
    if ( previousTag == currentTag ) 
       continue // not a border
    else 
       if ( pixel on the right or on the left is a border )
         // we got a corner
       else
         // we got a horizontal border

    previousTag = currentTag
  endforeach
endforeach 
```

这应该是一个预处理过程，除非您的地形是动态的。无论如何不要在每一帧都这样做！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T18:55:01.103

至少，我会标记该图块，因此您必须在第一次渲染图块时执行此操作，然后重用该标记值，而不是再次尝试找出它。

如果您在渲染时执行此操作，假设您一次只显示地图的一部分，那么它比一次性为整个地图执行此操作要高效得多。

除此之外，我想不出另一种方法来提高算法的效率。根据定义，“海滩”标题的定义是在水瓦边缘存在土地。所以你别无选择，只能看看周围的瓷砖......

# asp.net-mvc - 变量未使用 asp.net mvc 分配

> ID：13672455
> 
> 赞同：0
> 
> 时间：2012-12-02T18:40:32.523
> 
> 标签：asp.net-mvc

这是我的视图代码的一部分：

```
<%int imageTypSelected = 0; %>  

<div class="imageToEdit" >
         <img src='<%: Url.Action("getImg", "Product", new{ShopId = Model.Id}) %>'   alt="" />
         <a href="#" id="1" onclick="jQuery('#dialog').dialog('open'); '<%:imageTypSelected=1 %>'; return false;  ">G</a>             
    </div>

    <div   >
         <img src='<%: Url.Action("getImg_Alt1", "Product", new{ShopId = Model.Id}) %>'   alt="" />
         <a href="#" id="2"  onclick="jQuery('#dialog').dialog('open'); '<%:imageTypSelected=2 %>'; return false; " >G</a>           
    </div>

    <div  >
         <img src='<%: Url.Action("getImg_Alt2", "Product", new{ShopId = Model.Id}) %>'   alt="" />
         <a href="#" id="3"  onclick="jQuery('#dialog').dialog('open'); '<%:imageTypSelected=3 %>'; return false; ">G</a>            
    </div>

 <div id="dialog" title="A" >
          <% using (Html.BeginForm("changeProductImage", "Product", new { @Id = Model.Id, @selectedHyperLink = imageTypSelected }, FormMethod.Post, new { enctype = "multipart/form-data" }))
               {%>
                <p><input type="file" id="fileUpload" name="fileUpload" style="width:23;"/> </p>
                <p><input type="submit" value="B" /></p>
          <% } %>

       </div> 
```

通过单击第一个变量`imageTypSelected`必须设置为 1。通过第二个必须设置为 3，通过单击第三个它必须设置为 3。然后此变量发布到控制器中的方法。但一直只有值`3`被分配给变量，点击其他不会影响变量。怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T21:56:27.290

您正在混淆服务器端代码和客户端代码。

`imageTypSelected`只存在于服务器上。当您单击浏览器中的链接时，它不会改变。您需要完全在 javascript 中执行此操作：

从您的表单中删除它：

```
@selectedHyperLink = imageTypSelected 
```

并添加此隐藏字段：

```
<input type="hidden" id="selectedhyperlink" name="selectedhyperlink" /> 
```

添加这个 javascript 函数，它将隐藏字段设置为正确的值：

```
<script type="text/javascript">
    function changeImageType(imageType) {
        jQuery("#selectedhyperlink").val(imageType);
        jQuery("#dialog").dialog("open");

        return false;
    }
</script> 
```

从您的链接中调用此函数：

```
<a href="#" id="2" onclick="return changeImageType(2);">G</a> 
```

# c - 稍微复杂的线程同步

> ID：13672456
> 
> 赞同：1
> 
> 时间：2012-12-02T18:40:46.250
> 
> 标签：c, linux, multithreading, conditional, mutex

背景信息：我正在尝试创建一个 C 程序，它允许我在几个不同的文件（源中的 2 个）中搜索最大的素数。该程序是多线程的，以加快进程。在这个程序中，我更喜欢计算时间，而不是通过让线程等待所有线程都分配了 globalLargestPrime 来浪费时间。

问题：我相信在我的程序中某个地方没有正确地将 id 作为参数传递，或者我的程序在某个地方饿死了一个线程。

奇怪的部分：当我运行我的程序时，它会运行并完成，但有时它只会产生一个线程，因此它不会搜索两个文本文件。有时它会产生两个线程并从两个文本文件中读取

```
#include <stdio.h>
#include <stdlib.h>
#include <math.h>
#include <pthread.h>
#include <time.h>

pthread_mutex_t mutex;
pthread_cond_t monitor[2];
int globalLargestPrime = 0;
const int numThreads = 2;
FILE *fIN[2];

typedef enum{
  FREE,
  IN_USE
}lrgstPrm;
lrgstPrm monLargestPrime;//create struct

int timed(){
 return time(NULL);
}

int ChkPrim(int n){
  int i;
  int isPrime = 0;
  int root = sqrt(n);
  for(i=2; i<root; i++){
        if(n % i == 0)
          isPrime = 1;
        else
          isPrime = 0;
     }
  return isPrime;
}

void *calc_sqrt(void *threadID){//Create Threads
  int index, currentNum;
  int localLargestPrime = 0;
  int id = *(int *)threadID;
  int thousandsOfTimes = 0;
  //FILE *fIN = fopen("data.txt", "r");

  //printf(PTHREAD_MUTEX_ERRORCHECK);
  //Calculate some sqrts
  while(!feof(fIN[id])){
  for(index = 0; index < 1000; index++ )
  {//Check every thousand times
    fscanf(fIN[id], "%d\n", &currentNum);
    if(currentNum>localLargestPrime)
      if(ChkPrim(currentNum) == 1)
        localLargestPrime = currentNum;
  }

    pthread_mutex_lock(&mutex);

    thousandsOfTimes++;

    while(monLargestPrime == IN_USE)
    pthread_cond_wait(&monitor[id], &mutex);//wait untill mutex is unlocked
    monLargestPrime = IN_USE;
    //Critical Zone
    printf("Entering Critical Zone My ID: %d\n",id);
    if(localLargestPrime > globalLargestPrime)//Check for largest num
      globalLargestPrime = localLargestPrime;
    else
      localLargestPrime = globalLargestPrime;

    for(index = 0; index < numThreads; index++)
      if(index != id)
        pthread_cond_signal(&monitor[id]);//signal all threads that mutex is unlocked
    monLargestPrime = FREE;
    printf("Exiting Critical Zone My ID: %d\n",id);
    pthread_mutex_unlock(&mutex);
 //   printf("done searching thousand times %d My ID: %d\n",thousandsOfTimes, id);
  }
}

void createText(){
  FILE *fOUT = fopen("data.txt", "w");
  int i;
  srand(time(NULL));
  for(i=0; i<10000; i++)
  fprintf(fOUT, "%d\n",rand()%5000);
  fclose(fOUT);
}

int main(){
   printf("This is before creating threads\n");
  int index, timeDiff;
  pthread_t threads[2];
  pthread_mutex_init(&mutex, NULL);
  for(index = 0; index < numThreads; index++)
    pthread_cond_init(&monitor[index], NULL);
  fIN[0] = fopen("data0.txt","r");
  fIN[1] = fopen("data1.txt","r");

  timeDiff = time(NULL);
  //createText();

  for(index = 0; index < numThreads; index++){
    //int *id = malloc(1);
    //*id = index;
    pthread_create(&threads[index],NULL,calc_sqrt,&index);
  }
  for(index = 0; index < numThreads; index++)
    pthread_join(threads[index],NULL);
  printf("This is after creating threads");

  timeDiff = timed() - timeDiff;

  /*Destroy the mutexes & conditional signals*/
  pthread_mutex_destroy(&mutex);
  pthread_cond_destroy(&monitor[0]);
  pthread_cond_destroy(&monitor[1]);

printf("This is the Time %d\n", timeDiff);
printf("This is the Largest Prime Number: %d", globalLargestPrime);
return 0;
} 
```

如果有人可以请给我一些关于这个问题的见解，我们将不胜感激

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T18:54:17.120

您将同一局部变量的地址传递给线程。由于在创建每个线程时都会更新变量，因此当线程启动时，它可能会读取一个用于不同线程的值：

```
pthread_create(&threads[index],NULL,calc_sqrt,&index)
                                              ^^^^^^ 
```

您最终会得到多个线程使用相同的`FILE*`.

由于您传递的是一个简单的 int ，因此您可以直接将值作为线程参数传递：

```
pthread_create(&threads[index],NULL,calc_sqrt,(void*)index) 
```

然后在线程中获取如下值：

```
int id = (int)threadID; 
```

您的代码中根本不需要条件变量（尽管再次 - 我不确定它是否会导致问题）。您的条件变量跟踪是否`globalLargestPrime`被另一个线程使用。巧合的是，互斥锁做同样的事情！尝试：

```
pthread_mutex_lock(&mutex);

thousandsOfTimes++;     // not sure why this local variable even exists, 
                        //  much less is in a critical section

//Critical Zone
printf("Entering Critical Zone My ID: %d\n",id);
if(localLargestPrime > globalLargestPrime)//Check for largest num
  globalLargestPrime = localLargestPrime;
else
  localLargestPrime = globalLargestPrime;   // again, not sure why this is here...

printf("Exiting Critical Zone My ID: %d\n",id);
pthread_mutex_unlock(&mutex); 
```

`EOF`此外，您的代码使用在读取文件之前检查的反模式：

```
while (!feof(somefile)) {
    // whatever...
} 
```

这是错误的，尽管我认为在这种情况下可能是一个无害的错误。看：

*   [常见的 C 编程错误：错误地使用 feof()](http://www.drpaulcarter.com/cs/common-c-errors.php#4.2)
*   [“while(!feof(file))”总是错误的](https://stackoverflow.com/a/5432517/12711)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T18:45:03.647

对于初学者，您只 malloc'ing 一个字节，并将其分配给一个 int*。你应该 malloc'ing sizeof(int)。

此外，如果每个线程都在自己的文件中找到最大的素数，那么当每个线程完成时，取这些结果中的最大值会更简单。以这种方式需要线程之间的任何同步是没有意义的。

# iphone - iPhone - UITableView 使用 plist 填充在模拟器中有效，但在 iDevice 上无效

> ID：13672459
> 
> 赞同：0
> 
> 时间：2012-12-02T18:41:05.040
> 
> 标签：iphone, uitableview, plist, simulator, bookmarks

我的问题是我为 iPhone/iPad 制作了一个网络浏览器，并且我在添加书签时测试了书签系统和 tableview plist 数据更新。它适用于模拟器端但是当我使用我的 iPhone 测试应用程序时，它没有显示更新 tableview 我确实通过 xcode 添加了一些数据到 plist 并且我添加的数据显示在 iPhone 上，但仍然没有更新以显示新的您通过应用程序输入的条目 plist 文件称为“bookmarks.plist”有什么问题？

这是写入bookmarks.plist的代码

```
NSFileManager *fileManager = [NSFileManager defaultManager];
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentDirectory = [paths objectAtIndex:0];
NSString *plistPath = [documentDirectory stringByAppendingPathComponent:@"bookmarks.plist"];

if (![fileManager fileExistsAtPath:plistPath]) {
    plistPath = [[NSBundle mainBundle] pathForResource:@"bookmarks" ofType:@"plist"];
    //[[NSFileManager defaultManager] copyItemAtPath:plistPath toPath:plistPath error:NULL];
}

NSMutableArray *dataRoot = [NSMutableArray arrayWithContentsOfFile:plistPath];

NSMutableDictionary *item = [[NSMutableDictionary alloc] init];
[item setObject: _titleField.text forKey:@"title"];
[item setObject:_urlField.text forKey:@"url"];

[dataRoot addObject:item];
[dataRoot writeToFile:plistPath atomically:YES]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T19:48:41.807

看起来您的 plist 文件不在设备上的文档目录中，您也没有在运行时将其复制到那里（已注释 LOC）。

`plistPath`也会如此`nil`

如果你`plistPath`是从 NSBundle 创建的，
`[dataRoot writeToFile:plistPath atomically:YES];` 文件将不会被写入，因为包资源是只读的。

此信息应该以某种方式对您有所帮助。

# java - 在二叉搜索树中查找范围内的数据值并按升序打印出来

> ID：13672463
> 
> 赞同：1
> 
> 时间：2012-12-02T18:41:26.507
> 
> 标签：java, recursion, binary-search-tree

这是一个家庭作业。我需要递归遍历一个二叉搜索树，找出一个节点的数据值是否在一个范围内（包括），并按升序打印出来。

我的思考过程是：要按升序打印数据值，我需要在搜索树上按顺序遍历。为了有效地遍历，如果一个节点的左孩子小于下限值，并且该节点的数据小于下限值，程序应该停止向左遍历。同理，如果一个节点的右孩子大于上限值，并且该节点的数据大于上限值，程序应该停止向右遍历。

所以这是我的实现，但有错误：

```
public void rangeSearch(int lower, int upper) {
    if (lower > upper)
        throw new IllegalArgumentException("lower > upper");

    if (root != null)
        rangeSearchTree(root, lower, upper);
}

private static void rangeSearchTree(Node root, int lower, int upper) {
    Node leftChild = root.left;
    Node rightChild = root.right;
    if (leftChild != null && root.key > lower) {
        root = leftChild;
        rangeSearchTree(root, lower, upper);
    } 
    if (root.key >= lower && root.key <= upper) {
        System.out.print(root.key + " ");
    } 
    if (rightChild != null && root.key < upper) {
        root = rightChild;
        rangeSearchTree(root, lower, upper);
    }
} 
```

树的结构如下：

```
 7
     / \
    5   9
   / \ / 
  2  6 8
   \
    4 
```

当我输入`6`下限值和`9`上限值时，我得到`6 8 8`. 正确答案应该是`6 7 8 9`。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T18:47:21.207

```
if (leftChild != null && root.key > lower) {
    root = leftChild;  <---- Gotcha!
    rangeSearchTree(root, lower, upper);
} 
if (root.key >= lower && root.key <= upper) { 
```

您正在更改`root`代码中间的 。`root`您在第二个中评估的`if`不是作为参数传递的那个，而是它的左孩子......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T22:00:30.270

如果第二个是第一个，我认为问题应该得到解决。

# c# - 没有 EntityKey 的 MemberwiseClone

> ID：13672469
> 
> 赞同：2
> 
> 时间：2012-12-02T18:42:20.653
> 
> 标签：c#, entity-framework-4.1

是否可以在没有 EntityKey 的情况下对从 ObjectContext 检索到的对象进行 MemberwiseClone？我正在使用带有 C# 的 Entity Framework 4.1

如果我尝试更改 Id，则会收到以下异常：

`The property 'Id' is part of the object's key information and cannot be modified`

如果我尝试将 EntityKey 设置为 null：

`The EntityKey property can only be set when the current value of the property is null.`

我的代码：

```
Offer newOffer = offer.ShallowCopy();
// does not work...
newOffer.EntityKey = null;
/ does not work either...
newOffer.Id = Guid.NewGuid()
this._context.Add<Offer>(newOffer);
this._context.SaveChanges(); 
```

...

```
public partial class Offer
{
    public Offer ShallowCopy()
    {
        return (Offer)this.MemberwiseClone();
    }
} 
```

有人知道我的问题的简单解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T11:07:40.970

`MemberwiseClone`复制所有成员。如果您想避免复制任何成员，则必须进行自己的克隆。这是不可能的，这是有充分理由的。`EntityKey`唯一标识实体并且它是不可变的。设置后，您将无法更改它，因此您无法更改用于构建密钥的任何属性（在模型中标记为键的属性）。`EntityKey`也是引用类型，因此通过创建原始实体的成员明智克隆，您将引用相同的键实例。这样的实体将毫无用处。

# javascript - Div opacity=0 但仍与鼠标交互

> ID：13672470
> 
> 赞同：1
> 
> 时间：2012-12-02T18:42:22.590
> 
> 标签：javascript, html, opacity

所以这是我的问题：我有 2 个 div，并使用 javascript 制作了一个带有 2 个选项卡的简单选项卡菜单。当我的鼠标在 tab1 上时，div1 的不透明度为 1，div2 的不透明度为 0，而当鼠标在 tab2 上时，则相反。

现在，即使 div 的不透明度为 0，改变光标的链接或其他元素仍然与鼠标交互。我希望他们完全禁用，就像不存在一样。我使用了 disables="disabled" 但仍然没有工作。

我该怎么做才能完全禁用 div？（仅在 javascript 中，不在 jquery 中）。我应该使用 z-index 吗？

我已阅读其他主题，但仍未找到解决方案。

先感谢您。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T18:44:53.580

使用`elem.style.visibility = "hidden"`而不是`opacity`.

* * *

您可以`elem.style.display = "none"`改用，但这会影响页面流，这可能不是您想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T19:10:46.047

您会发现许多内联选项卡的示例，标准方法是使用 display none 或 position absolute：

```
{display:"none";} 
```

或者：

```
{position:absolute;top:-9999px;} 
```

回到原来的状态：

```
{display:"";} 
```

正如@user1689607 所说，这会影响布局，但实际上这通常是您想要的选项卡（您不想在页面上留下空白区域）。

# java - 如何在lucene中为具有多个值的numerc字段正确创建范围查询

> ID：13672471
> 
> 赞同：2
> 
> 时间：2012-12-02T18:42:26.640
> 
> 标签：java, lucene

我试图演示 lucene 数字范围查询，但无法正常工作。这就是我想要做的事情：

```
public static void main( String[] args ) throws Exception{
    Path indexDir = Files.createTempDirectory("index");
    Directory directory = FSDirectory.open(indexDir.toFile());
    Analyzer analyzer = new EnglishAnalyzer(Version.LUCENE_36);
    IndexWriterConfig writerConfig = new IndexWriterConfig(Version.LUCENE_36, analyzer);
    writerConfig.setOpenMode(IndexWriterConfig.OpenMode.CREATE);
    IndexWriter writer = new IndexWriter(directory, writerConfig);
    for (int i=0; i<100; i++) {
        Document doc = new Document();
        for (int j = 0; j<10; j++) {
            NumericField field = new NumericField("numericField", Field.Store.YES, true);
            field.setDoubleValue(Math.random());
            doc.add(field);
        }
        writer.addDocument(doc);
    }
    writer.close(true);
    directory.close(); //just to be safe

    analyzer = new EnglishAnalyzer(Version.LUCENE_36);
    directory = FSDirectory.open(indexDir.toFile());
    IndexReader reader = IndexReader.open(directory);
    IndexSearcher searcher = new IndexSearcher(reader);
    QueryParser parser = new MultiFieldQueryParser(Version.LUCENE_36, new String[] {"someField", "someOtherField"}, analyzer);
    Query q = parser.parse("numericField:[0 TO 0.5]");
    TopDocs results = searcher.search(q, 100);
    System.out.println("got "+results.scoreDocs.length+" results");
} 
```

基本上我正在创建一个新的 FS 目录，索引 100 个文档，每个文档有 10 个随机值的数字字段，使用相同的名称（lucene 文档说这是允许的？）然后我尝试使用范围查询搜索这个新创建的索引。

我希望每次都能获得近 100 次点击，但每次结果都是 0。

我显然做错了什么，但我不知道是什么。任何线索/想法都会非常受欢迎。

我正在使用 java 7 和 lucene 3.6.1。此代码需要 lucene 核心和 lucene 分析器工件来编译

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T20:19:08.620

从[NumericField](http://lucene.apache.org/core/3_6_1/api/core/org/apache/lucene/document/NumericField.html)：“要对 NumericField 执行范围查询或过滤，请使用 NumericRangeQuery 或 NumericRangeFilter。” 查询解析器事先不知道这是一个数字字段，因此它的输出是基于字符串的：

```
<TermRangeQuery: numericField:[0 TO 0.5]> 
```

代替：

```
<NumericRangeQuery: numericField:[0.0 TO 0.5]> 
```

通常建议尽可能以编程方式构造查询，以避免出现此类解析问题。

# jquery - 以编程方式按下按钮或锚标记

> ID：13672480
> 
> 赞同：1
> 
> 时间：2012-12-02T18:43:02.533
> 
> 标签：jquery, html

我是网络编程新手。在 html 网页中，我想以编程方式按下按钮或锚标记。

jquery api 具有[触发](http://api.jquery.com/trigger/ "扳机")函数，它触发附加到事件的回调函数，但我的要求是以编程方式按下按钮或链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T18:48:29.353

与其触发对按钮或链接的点击，更好的方法通常是通过设置访问链接[`window.location.href`](https://developer.mozilla.org/en-US/docs/DOM/window.location)，或者通过调用函数或提交按钮单击将导致的表单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T18:51:28.543

我看到你使用 jQuery。

```
$("#myElement").click(); 
```

应该是这样的伎俩。

# class - Haskell中的异构多态性（正确方法）

> ID：13672482
> 
> 赞同：3
> 
> 时间：2012-12-02T18:43:24.573
> 
> 标签：class, haskell, types, polymorphism, heterogeneous

让一个模块来抽象`Area`操作（不好的定义）

```
class Area someShapeType where
  area :: someShapeType -> Float

-- module utilities
sumAreas :: Area someShapeType => [someShapeType]
sumAreas = sum . map area 
```

让**后验**显式形状类型模块（良好或可接受的定义）

```
data Point = Point Float Float

data Circle = Circle Point Float
instance Surface Circle where
  surface (Circle _ r) = 2 * pi * r

data Rectangle = Rectangle Point Point
instance Surface Rectangle where
  surface (Rectangle (Point x1 y1) (Point x2 y2)) = abs $ (x2 - x1) * (y2 - y1) 
```

放一些数据

```
c1 = Circle (Point 0 0) 1
r1 = Rectangle (Point 0 0) (Point 1 1) 
```

然后，尝试使用

```
totalArea = sumAreas [c1, r1] 
```

`[c1, r1]`类型必须扩展为`[Circle]`or `[Rectangle]`！（并且无效）

我可以使用这样`forall` **的**额外`data`类型

```
data Shape = forall a . Surface a => Shape a

sumSurfaces :: [Shape] -> Float
sumSurfaces = sum . map (\(Shape x) -> surface x) 
```

然后，下一个代码成功运行

```
sumSurfaces [Shape c1, Shape r1] 
```

但我认为，`data Shape`and`Shape`构造函数（on`[Shape c1, ...]`和 lambda 参数）的使用是丑陋的（我的第一个 [和坏的] 方式很漂亮）。

做*“Haskell中的异构多态性”*的正确方法是什么？

非常感谢您的宝贵时间！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-02T18:56:04.267

你的第一个（也是坏的）方式并不漂亮，它是 Lispy。这在静态类型语言中是不可能的。即使你在例如 Java 中做这样的事情，你实际上是通过使用基类指针引入了一个单独的量化步骤，这类似于`data Shape = forall a. Surface a`.

关于存在量化是否好存在争议，我认为大多数 Haskellers 不太喜欢它。在这里使用它肯定不是正确的：`sum [ area c1, area c2 ]`它更容易并且效果也很好。但是肯定有更复杂的问题看起来不同。当您“需要”异构多态性时，存在主义就是要走的路。

`area`请记住，您总是可以解决这个问题：由于 Haskell 是惰性的，您可以“先发制人”地应用所有可能的操作（在这个例子中它只是），将所有结果存储在某个记录中，并输出这些记录的列表而不是多态对象的列表。这样您就可以保留所有信息。

或者，更惯用的是，根本不生成此类对象的列表。你想对对象做一些事情，那么为什么不把这些*动作*传递到你产生不同`Shape`s 的函数中，并在适当的地方应用它们！这种逆转将存在量化换成了普遍量化，后者被更广泛地接受。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-02T22:16:33.737

你的存在主义解决方案没问题。改用 a 可能会“更漂亮” `GADT`，例如：

```
{-# LANGUAGE GADTs #-}
data Shape where
    Shape :: (Surface a) => a -> Shape 
```

...正如 leftaraoundabout 建议的那样，您可以以不同的方式构建代码。

但我认为你在这里基本上遇到了[表达问题](http://en.wikipedia.org/wiki/Expression_problem)；或者，也许更准确地说：通过尝试巧妙地构造代码（为每个形状与类分开类型）以期待 EP，您为自己引入了新的困难。

查看 Wouter Swierstra 的有趣[的点菜数据类型](http://lambda-the-ultimate.org/node/2700)，以获得我希望与您的问题相关的优雅解决方案。也许有人可以用关于 hackage 的优秀软件包发表评论，看看受到那篇论文的启发。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-02T23:08:03.043

您最初所做的是触及存在主义反模式。

为什么还要在这里使用类？

```
data Shape = Shape { area :: Double }

data Point = Point Double Double

circle :: Point -> Double -> Shape
circle p r =
    Shape $ 2 * pi * r

rectangle :: Point -> Point -> Shape
rectangle (Point x1 y1) (Point x2 y2) =
    Shape $ abs $ (x2 - x1) * (y2 - y1) 
```

现在你很容易得到你想要的（形状列表）：

```
*Main> map area [circle (Point 2 0) 5, rectangle (Point 0 0) (Point 2 10)]
[31.41592653589793,20.0] 
```

# android - 如何为数独制作具有预定数字的 9x9 网格？

> ID：13672483
> 
> 赞同：1
> 
> 时间：2012-12-02T18:43:30.643
> 
> 标签：android, android-layout

嗨，我目前正在从事一个学校项目，我必须制作一个 android 应用程序。我选择制作数独游戏，因为我是 java 和 android 的新手，我在制作 9x9 网格时遇到了一些问题，其中包含预先确定的数字。我尝试了内置方法gridview，但它只给我带来了问题。由于我不是一个非常熟练的java用户，我将使用已经完成的数独游戏以预定的数字来检查网格中的数字是否正确。所以这是我的问题，我如何制作一个包含预定数字的 9x9 gridview 并使其适合我的 android 应用程序。如果这些问题看起来很愚蠢，我很抱歉，因为我刚开始使用 java 和 android。

# android - 如何从 PreferenceActivity 调用特定的 PreferenceFragment？

> ID：13672487
> 
> 赞同：13
> 
> 时间：2012-12-02T18:43:52.160
> 
> 标签：android, android-fragments, android-preferences

我有一个带有几个片段的 PreferenceActivity：

**R.xml.preferences：（**为了更好的可读性而缩短）：

```
<?xml version="1.0" encoding="utf-8"?>
<preference-headers xmlns:android="http://schemas.android.com/apk/res/android">
    <header android:fragment="fragments.Fragment1" android:id="@+id/fragment1" [...] />
    <header android:fragment="fragments.Fragment2" android:id="@+id/fragment2" [...] />
    [...]
</preference-headers> 
```

**设置活动**：

```
public class SettingsActivity extends PreferenceActivity {
    @Override
    public void onBuildHeaders(List<Header> target) {
        loadHeadersFromResource(R.xml.preferences, target);
    }
} 
```

这将显示一个带有`fragments.Fragment1`, `fragments.Fragment2`, ... 如果`SettingsActivity`已启动的列表条目。

但是现在我想传递一个 Bundle 以便在启动活动时打开一个特定的 PreferenceFragment ：

所以我将此添加到**SettingsActivity**：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    if (savedInstanceState != null && savedInstanceState.getBoolean("shortcut")) {
        // directly jump to fragments.Fragment1
    }
} 
```

我试图通过加载片段`getFragmentManager().findFragmentById(R.id.fragment1)`，但这会返回`null`。但即使我有正确的实例，我也不知道如何调用它。此外，调用`loadHeadersFromResource(R.xml.preferences_fragment1, target);`不起作用 - 这将引发 RuntimeException“ *XML 文档必须以标记开头；在二进制 XML 文件中找到PreferenceScreen* ”。我没有任何想法，并且在 SO 和 Google 上的搜索也没有返回任何相关结果。

所以我的问题是：是否可以从 Activitiy 的 onCreate 方法中直接加载 PreferenceFragment（例如 Fragment.Fragment1）？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-12-02T18:49:45.433

根据：http: [//developer.android.com/reference/android/preference/PreferenceActivity.html#EXTRA_SHOW_FRAGMENT](http://developer.android.com/reference/android/preference/PreferenceActivity.html#EXTRA_SHOW_FRAGMENT)

> 公共静态最终字符串EXTRA_SHOW_FRAGMENT
> 
> 在 API 级别 11 中添加 启动此活动时，调用 Intent 可以包含此额外字符串以指定最初应显示的片段。
> 
> 常数值：“：android：show_fragment”

```
intent = new Intent( this, SettingsActivity.class );
intent.putExtra( PreferenceActivity.EXTRA_SHOW_FRAGMENT, Fragment1.class.getName() );
intent.putExtra( PreferenceActivity.EXTRA_NO_HEADERS, true ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-19T06:33:14.090

只需在您的**PreferenceActivity**和**PreferenceFragment**中使用以下代码**onCreate**

```
addPreferencesFromResource(R.xml.**YOUR PREFERENCE FRAGMENT XML**); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-26T13:41:52.563

或使用[PreferenceActivity.switchToHeader](https://developer.android.com/reference/android/preference/PreferenceActivity.html#switchToHeader(java.lang.String,%20android.os.Bundle))。启动 PreferenceActivity 时，首先加载所有设置页面的标题/概览，然后加载片段。完成片段后，您将返回到概览。

**我的偏好活动：**

```
@Override
public void onBuildHeaders(List<Header> headers) {

    loadHeadersFromResource(R.xml.preference_headers, headers);

    int headerId = getIntent() != null ? getIntent().getIntExtra("header", 0) : 0;
    if (headerId > 0) {
        getIntent().removeExtra("header");
        switchToHeader(findHeaderById(headerId));
    }
}

private Header findHeaderById(long id) {

    if (headers != null)
        for (Header header : headers)
            if (header.id == id) return header;

    return null;
} 
```

这显示了如何调用 PreferenceActivity 以及**MainActivity**中的片段：

```
Intent intent = new Intent(context, MyPreferenceActivity.class);
intent.putExtra("header", R.id.header1);
intent.putExtra("key", "pref1");
startActivity(intent); 
```

如有必要，您可以立即在**PreferenceFragment1**中打开相应的首选项：

```
@Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    addPreferencesFromResource(R.xml.preferences_1);  

    String key = getActivity().getIntent() != null ? getActivity().getIntent().getStringExtra("key") : null;

    if (key != null) {
         getActivity().getIntent().removeExtra(key);
         openPreference(key);
    }
}

private void openPreference(String key) {

    PreferenceScreen preferenceScreen = getPreferenceScreen();
    ListAdapter listAdapter = preferenceScreen.getRootAdapter();

    for (int position = 0; position < listAdapter.getCount(); position++) {

        Preference preference = (Preference) listAdapter.getItem(position);

        if (preference.equals(findPreference(key))) {
            preferenceScreen.onItemClick(null, null, position, 0);
            break;
        }
    }
} 
```

**首选项_headers.xml：**

```
<?xml version="1.0" encoding="utf-8"?>

<preference-headers
    xmlns:android="http://schemas.android.com/apk/res/android">

    <header android:id="@+id/headers1"
        android:fragment="de.almisoft.PreferenceFragment1"
        android:title="Title1"
        android:summary="Summary1">
    </header>

    <header android:id="@+id/headers2"
        android:fragment="de.almisoft.PreferenceFragment2"
        android:title="Title2"
        android:summary="Summary2">
    </header>

</preference-headers> 
```

**首选项_1.xml：**

```
<?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen 
    xmlns:android="http://schemas.android.com/apk/res/android">

    <Preference
        android:key="pref1"
        android:title="title"/>

</PreferenceScreen> 
```

# parse-platform - 在 Windows 上使用云代码部署到新应用程序时出错（python）

> ID：13672489
> 
> 赞同：2
> 
> 时间：2012-12-02T18:44:07.433
> 
> 标签：parse-platform

我刚刚在云代码命令行上设置了一个新应用程序，但是在尝试部署时出现 python 错误：

```
 $ parse deploy "Development"
Uploading source files
Finished uploading files
Traceback (most recent call last):
  File "c:\Python27\lib\runpy.py", line 162, in _run_module_as_main
    "__main__", fname, loader, pkg_name)
  File "c:\Python27\lib\runpy.py", line 72, in _run_code
    exec code in run_globals
  File "C:\Program Files (x86)\Git\local\bin\parse\__main__.py", line 4, in <module>
  File "C:\Program Files (x86)\Git\local\bin\parse\main.py", line 369, in main
  File "C:\Program Files (x86)\Git\local\bin\parse\main.py", line 153, in handle_deploy
  File "C:\Program Files (x86)\Git\local\bin\parse\parse.py", line 139, in deploy
  File "c:\Python27\lib\json\__init__.py", line 326, in loads
    return _default_decoder.decode(s)
  File "c:\Python27\lib\json\decoder.py", line 366, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
  File "c:\Python27\lib\json\decoder.py", line 384, in raw_decode
    raise ValueError("No JSON object could be decoded")
ValueError: No JSON object could be decoded 
```

出了什么问题？

我还尝试在我的系统上设置一个新的 cloudcode 项目，只是指向这个“开发”应用程序，但得到相同的 python 错误。

我之前已经成功部署到同一个帐户上的不同应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T09:19:27.613

顺便说一句，当 Parse.com API 运行缓慢时，就会出现这个问题——我的查询运行时间在 2 到 30 秒之间。

大约 30 分钟后，解析查询恢复到正常速度（500 毫秒 - 900 毫秒），此云代码问题自行解决。

也许这是 Python / cloudcode 的超时问题。

# javascript - 使用 D3 的实时数据

> ID：13672490
> 
> 赞同：5
> 
> 时间：2012-12-02T18:44:15.253
> 
> 标签：javascript, html, websocket, d3.js

我想知道我是否可以将 D3 库与我的服务器将通过 websockets 发送的实时数据一起使用。我看不到任何证明这一点的文档或示例。我最初的期望是通过以下代码示例来做到这一点：

```
ws = new WebSocket(ws://localhost:8888/ma");   
some more code....

  ws.onmessage = function(evt) {
        d3.json("evt.data", function(json) {
......    
.......More code.....
......
 }
} 
```

但这似乎不起作用，但我知道客户端通过检查控制台日志接收数据。

此外，还有一个递归函数可以展平 JSON 文档：

```
// Returns a flattened hierarchy containing all leaf nodes under the root.
function classes(root) {
var classes = [];

function recurse(name, node) {
  if (node.children) node.children.forEach(function(child) { recurse(node.name, child);    });
  else classes.push({packageName: name, className: node.name, value: node.size});
  }

  recurse(null, root);
  return {children: classes};   
}

     console.log(evt.data);
  };

  ws.onclose = function (evt) {
       alert("Connection terminated")};

  });
 }); 
```

如果我的 JSON 文档已经是扁平的，那么我认为不需要它，即：

```
{ID: 1, Name: 'my name', age: 65, car: 'Ford'} 
```

D3 对我来说是全新的，因此我们将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T00:51:12.703

我还没有在 D3 中使用过 websockets，但看起来你希望`d3.json`成为一个 JSON 解析器。它不是 - 它是一个 AJAX 加载器，它委托给`JSON.parse`解析。所以你可能想要这样的东西：

```
var ws = new WebSocket("ws://localhost:8888/ma");

var data = [];

ws.onmessage = function(evt) {
    // append new data from the socket
    data.push(JSON.parse(evt.data));
    update();
};

// now use the standard join pattern to deal with updates
function update() {
    var chunk = d3.selectAll('p')
        .data(data);

    // entry might be all you need, if you're always appending
    chunk.enter().append('p')
        .text(function(d) { return d; });

} 
```

# css - 选择子菜单项时，suckerfish 顶级项保持突出显示

> ID：13672494
> 
> 赞同：1
> 
> 时间：2012-12-02T18:44:47.077
> 
> 标签：css, suckerfish

我已经在 joomla 网站上设置了一个 Suckerfish 下拉菜单，但是在您选择子菜单项之后，我找不到保持选择顶级菜单项的方法（在这种情况下变为红色并保持红色）。

悬停顶级项目很好，当您将鼠标悬停在子菜单上时，它仍然是悬停的颜色 - 但是，一旦您单击子菜单项，顶级项目就会恢复为原始颜色。

这意味着访问者不一定知道他们在网站的哪个部分。

所以任何帮助都会很棒！谢谢。

我目前的CSS是：

```
#mainlevelmainnav, #mainlevelmainnav ul {float: right;list-style: none;line-height: 1;}
#mainlevelmainnav a {display: block;}
#mainlevelmainnav li {float: left;padding: 0;margin-right:20px;font-size: 14px;color: #B8A4AA}
#mainlevelmainnav li ul {
    position: absolute;
    left: -999em;
    height: auto;
    width: 14em;
    w\idth: 13.9em;
    font-weight: normal;
    border-width: 0.25em;
    margin: 0;
    z-index:1;
    padding-top:60px;
    background-color:rgba(255,255,255,0.9);
    z-index:2;
}

#mainlevelmainnav li ul li {margin-bottom:15px; padding-left:5px}
#mainlevelmainnav li li {padding-right: 1em;list-style:none;background:none;width: 18em;}
#mainlevelmainnav li ul a {width: 18em;w\idth: 17.6em;}
#mainlevelmainnav li ul ul {margin: -1.75em 0 0 12em;background:#e7e7e7 url(../images/menu_li.gif) top right;}
#mainlevelmainnav li:hover ul ul, #mainlevelmainnav li:hover ul ul ul, #mainlevelmainnav li.sfhover ul ul, #mainlevelmainnav li.sfhover ul ul ul {  left: -999em;}
#mainlevelmainnav li:hover ul, #mainlevelmainnav li li:hover ul, #mainlevelmainnav li li li:hover ul, #mainlevelmainnav li.sfhover ul, #mainlevelmainnav li li.sfhover ul, #mainlevelmainnav li li li.sfhover ul {left: auto;}
#mainlevelmainnav li:hover, #mainlevelmainnav li.sfhover {}
#mainlevelmainnav ul.menu {margin:0;}
#mainlevelmainnav ul.menu li {background:#e7e7e7 url(../images/menu_li.gif) top right no-repeat;}
#mainlevelmainnav ul.menu li a {color: #656565;padding: 2px 0;display: block;text-decoration: none;outline: none;background:none}
#mainlevelmainnav ul.menu li a span,
#mainlevelmainnav ul.menu li li a span{padding: 0 15px;background: none;}
#mainlevelmainnav ul.menu li li li a:hover,
#mainlevelmainnav ul.menu li li li a:active,
#mainlevelmainnav ul.menu li li li a:focus,
#mainlevelmainnav ul.menu li li a:hover,
#mainlevelmainnav ul.menu li li a:active,
#mainlevelmainnav ul.menu li li a:focus,
#mainlevelmainnav ul.menu li a:hover,
#mainlevelmainnav ul.menu li a:active,
#mainlevelmainnav ul.menu li a:focus,
#mainlevelmainnav ul.menu li:hover,
#mainlevelmainnav ul.menu li:active,
#mainlevelmainnav ul.menu li:focus {background:#dadada!important;color: #000;text-decoration: none;}
#mainlevelmainnav ul.menu li.active a {font-weight: bold;text-decoration: none;}
#mainlevelmainnav ul.menu li .parent{background:#dadada url(../images/menu_sub_arrow.gif) center right no-repeat;}
#mainlevelmainnav ul.menu li.active a span {}
#mainlevelmainnav ul.menu li li a span {padding: 0;background: none;}
#mainlevelmainnav ul.menu li ul {border:1px solid #cccccc;padding: 0;list-style: none;}
#mainlevelmainnav ul.menu li li {padding: 0!important;list-style: none;}
#mainlevelmainnav ul.menu li li a {color: #333333;font-size: 92%;font-weight: normal;padding:0 10px;}
#mainlevelmainnav ul.menu li li a:hover,
#mainlevelmainnav ul.menu li li a:active,
#mainlevelmainnav ul.menu li li a:focus {}
#mainlevelmainnav ul.menu li li a span {font-weight: normal;} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-27T21:05:36.240

您需要使用 javascript 或服务器端编程将一个类添加到表示它处于活动状态的父 LI，然后使用 CSS 拾取该类并应用视觉样式。

# ffmpeg - ffplay 饼干

> ID：13672498
> 
> 赞同：4
> 
> 时间：2012-12-02T18:45:23.583
> 
> 标签：ffmpeg

通常使用 ffplay 你可以播放这样的视频

```
ffplay http://easy.com/foo.flv 
```

但是，我遇到了一个需要 cookie 的视频。wget 对此没有任何问题

```
wget http://hard.com/foo.flv --load-cookies cookies.txt 
```

ffplay可以播放需要cookie的视频吗？

根据[pogorskiy 的回答](https://stackoverflow.com/a/13679431)，这是可行的

```
ffplay -headers $'Cookie: sbsession=sbg&sbuser=lorem\r\n' http://hard.com/foo.flv 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-03T08:17:57.257

http协议中有一个选项`-headers`。因此我们可以写

```
ffplay http://easy.com/foo.flv -headers "Cookie: MyCookies" 
```

但是 ffmpeg 需要`\r\n`在附加标头中进行序列化。否则你会收到警告

`[http @ 011701a0] No trailing CRLF found in HTTP header.`

并且标题添加不正确。我们无法通过命令行正确传递 CRLF 序列。我认为唯一的解决方案是修复`http.c`，以便将预定义字符替换为 CRLF。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-04T09:09:12.740

实际上你可以在 shell 中测试它

```
$ echo 0$'\r\n'0
0
0 
```

所以，在标题字符串的末尾添加 $'\r\n'

```
ffplay http://easy.com/foo.flv -headers "Cookie: MyCookies"$'\r\n' 
```

ffplay 将得到非字符串 \r\n。它适用于我的 ffmpeg 版本`ffmpeg version git-2014-09-24-857fc0a`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T09:55:56.903

根据[pogorskiy 的回答](https://stackoverflow.com/a/13679431)，这对我来说适用于 Bash

```
set 'sbsession=sbg&sbuser=lorem' 'http://hard.com/foo.flv'
printf -v q 'Cookie: %s\r\n' "$1"
ffplay -headers "$q" "$2" 
```

# git - 从颠覆到git的项目结构

> ID：13672500
> 
> 赞同：2
> 
> 时间：2012-12-02T18:45:42.710
> 
> 标签：git, svn, git-svn

我有一个典型的主干/标签颠覆存储库结构，现在转移到 git 想知道典型/传统/已知结构是什么，与颠覆相同？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T19:30:20.927

git 中的标签和分支不会反映为存储库中文件树的一部分。存储在存储库中的树最接近于存储在`trunk`典型 svn 存储库目录中的内容。

大多数转换工具会将 svn 主干翻译成一个名为 的 git 分支 `master`，这是 git 中主分支的传统名称。但是，与传统的 svn 布局不同，master 分支并没有什么特别的（对于 git）。

git 中的标签通常以不同的方式存储。他们将使用`git tag`命令进行操作。它们类似于分支，但 git 使得在创建标签后很难更新它。因为在标准 svn 存储库中没有任何东西可以阻止修改标签，将其转换为 git 的工具通常会将 svn 标签转换为 git 分支，其名称表明它们来自标签，而不是创建 git 标签；但是可以在以后基于这些分支创建 git 标签。

# function - matlab函数sum（）的奇怪行为

> ID：13672505
> 
> 赞同：0
> 
> 时间：2012-12-02T18:45:56.137
> 
> 标签：function, matlab, sum

知道为什么 Matlab 会这样吗？

```
>> sum([0 0 0])
Subscript indices must either be real positive integers or logicals.

>> sum([1 1 1])

ans =

     4     4     4 
```

和这个打了2个多小时，还是搞不定。这是我在这发生之前运行的代码。在运行此代码之前 - 函数 sum() 工作正常。

```
price = 100;
vola = 0.2;
r = 0.05;
n_step = 3;
dt = 1/250;
S0 = 100;
T = 1;

s = [1 0 0 0;1 2 0 0;1 2 3 0; 1 2 3 4];
prob = 0.5;
n_path = 2^n_step; % bottle neck for binomial approach
avg_price = zeros(n_path, 2); % first column - probability, second - average price
path_matrix = zeros(n_path, n_step); % all possible paths 1-up, 0-down
for k = 0:n_path-1
    path_matrix(k+1, :) = de2bi(k,'left-msb',n_step);
end

node_matrix = path_matrix;
for k=2:n_step
    node_matrix(:, k) = node_matrix(:, k-1) + node_matrix(:, k);
end
node_matrix = node_matrix + 1;

% go through all possible paths and calculate sum of prices
for k = 1:n_path
    % probability of path
    n_up = sum(path_matrix(k, :));
    avg_price(k, 1) = prob^n_up*(1 - prob)^(n_step - n_up);

    % get sum of prices over all states for this path
    sum = s(1, 1);
    for p = 1:n_step
        sum = sum + s(p+1, node_matrix(k, p));
    end
    avg_price(k, 2) = sum;
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T18:49:54.073

您已经覆盖了该函数`sum`，现在它被视为局部变量

```
 sum = s(1, 1); 
```

因此，您*隐藏* `sum`为功能。

更改变量名并执行

```
 clear sum 
```

.

# jquery - Codeigniter 无法调用 ajax 函数

> ID：13672511
> 
> 赞同：1
> 
> 时间：2012-12-02T18:47:18.760
> 
> 标签：jquery, ajax, codeigniter

我正在尝试使用 ajax 验证注册表单，以检查数据库中用户输入的可用性。我正在使用在教程网站上找到的一些代码，但无法使其正常工作。

[http://www.99points.info/2010/07/codeigniter-tutorial-check-usernameemail-availablity-using-jquer-in-codeigniter/](http://www.99points.info/2010/07/codeigniter-tutorial-check-usernameemail-availablity-using-jquer-in-codeigniter/)

我正在使用 codeigniter 框架，我的 php 还可以，但我对 jQuery/js 语法知之甚少

看法：

```
<script>
$(document).ready(function() {
    /// make loader hidden in start
    $('#Loading').hide();    
    $('#email').blur(function()
        {
        var a = $("#email").val();
        var filter = /^[a-zA-Z0-9]+[a-zA-Z0-9_.-]+[a-zA-Z0-9_-]+@[a-zA-Z0-9]+[a-zA-Z0-9.-]+[a-zA-Z0-9]+.[a-z]{2,4}$/;
        // check if email is valid
        if(filter.test(a))
            {
            // show loader 
            $('#Loading').show();
            $.post("<?php echo base_url()?>signup/check_email_availablity", {
            email: $('#email').val()
            },
            function(response)
                {
                //#emailInfo is a span which will show you message
                $('#Loading').hide();
                setTimeout("finishAjax('Loading', '"+escape(response)+"')", 400);
                });
        return false;
        }
});
function finishAjax(id, response){
  $('#'+id).html(unescape(response));
  $('#'+id).fadeIn();
}
</script> 
```

因此，ajax 代码什么也没做，我唯一能看到的错误是在 chrome 开发人员工具控制台中出现错误

> 未捕获的 SyntaxError：输入意外结束

是否有一些语法错误搞砸了？

我是否缺少一些需要在 codeigniter 中加载的库/帮助程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T20:38:53.837

你的问题（至少）在`<?php echo base_url()?>`

您忘记了`;`，并且在关闭 php 标记之前没有空格。

改成 ：

```
<?php echo base_url(); ?> 
```

# postgresql - SQL中的优化算法

> ID：13672514
> 
> 赞同：0
> 
> 时间：2012-12-02T18:47:35.233
> 
> 标签：postgresql

假设我有一份食谱、配料和这些配料成本的清单。

谁能指出我正确的方向，如何从一些美元的预算开始找到我能做的最多的食谱？

例如

如果我有 50 美元可以花 5 个食谱：

1.  洋葱汤 => 配料（水 1 美元，洋葱 45 美元）
2.  沙拉 => 配料（生菜 4 美元）
3.  蛋糕 => 配料（面粉 8 美元）
4.  果冻 => 配料（果冻 4 美元）
5.  炒鸡蛋=>配料（鸡蛋3美元）

如何让 sql 返回如下列表：

```
Combination number | recipes
-----------------------------
1                     1
1                     2
2                     1
2                     4
3                     1
3                     5 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T19:39:58.203

您没有指定 DBMS，所以我假设 PostgreSQL：

```
with recursive all_combinations as (
  select array[name] as combination, 
         total_cost + 0.0 as combination_cost,
         id
  from recipe
  union all
  select a.combination || r.name,
         a.combination_cost + r.total_cost,
         r.id
  from recipe r
    join all_combinations a 
      on a.combination_cost + r.total_cost <= 50
     and not a.combination @> array[r.name]
     and r.id > a.id
)
select combination, combination_cost
from all_combinations
order by array_dims(combination), 1; 
```

不过，我不是 100% 确定它涵盖了所有组合

这是一个 SQLFiddle 示例：[http ://sqlfiddle.com/#!12/351be/4](http://sqlfiddle.com/#!12/351be/4)

# ruby-on-rails - hidden_ field_tag 不工作

> ID：13672515
> 
> 赞同：0
> 
> 时间：2012-12-02T18:47:43.783
> 
> 标签：ruby-on-rails, ruby-on-rails-3

根据 text_area 下面的代码生成`<input name='user_comment[text]../>`. 但是 hidden_​​field_tag 失败并出现错误，因为它需要不同的参数。生成隐藏标签的最优雅方法是什么`name="user_comment[forum_id]" value=".."`

```
<% @forums.each do |forum| %>
    .....
    <%=form_tag(user_comments_path, method: "post", remote: true) do %>
      <%= text_area(:user_comment, :text) %>
      <%= hidden_field_tag(:user_comment, :forum_id, forum.id) %>
      <%= submit_tag("Add Comment") %>
    <% end %>
<% end %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T19:14:36.140

The method signature of [hidden_field_tag](http://api.rubyonrails.org/classes/ActionView/Helpers/FormTagHelper.html#method-i-hidden_field_tag) is this:

> hidden_field_tag(name, value = nil, options = {})

So this should work:

```
hidden_field_tag("user_comment[forum_id]", forum.id) 
```

# debugging - PHP 更改调试跟踪大小 / Magento 跟踪

> ID：13672521
> 
> 赞同：0
> 
> 时间：2012-12-02T18:48:15.487
> 
> 标签：debugging, magento, stack-trace

我通常处理 Magento 故障排除并发现跟踪提供了很好的信息，但往往很短。

我不知道 Magento 的内部结构，但我相信它与 PHP`debug_backtrace`功能有关？

如果是这种情况，我该如何更改输出跟踪的大小，以解决我能够重现的错误？是否有要更改的高级设置（例如使用`ini_set`）或者这是否需要编辑核心代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T18:56:12.443

如果您要询问第二个论点，那么不幸的是，没有简单的方法可以做到这一点。`debug_backtrace`函数在`app/code/core/Mage/Core/functions.php::mageDebugBacktrace`没有参数的情况下被调用。因此，更改它的唯一方法是将完整文件复制到`app/code/local/Mage/Core/functions.php`并根据需要进行修改。然而，这种做法有一些负面影响，不鼓励使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T19:34:26.457

简短版：您不能使用 xDebug 之类的东西，它会非常慢。

记录的异常不包含代码的完整“跟踪”。开箱即用的 PHP 不会跟踪此信息。`debug_backtrace`返回的输出是[调用堆栈](http://en.wikipedia.org/wiki/Call_stack)。调用堆栈返回达到当前**深度**所需的函数/方法调用。例如

```
function a(){
    b();
    c();
}

function c()
{
    d();
}

function d()
{
    //DEBUG HERE
}

//start program
a(); 
```

如果你在`//DEBUG HERE`函数上有一个调用堆栈，你会得到

```
a();
c();
d(); 
```

该函数`b()`不会被包含在内，因为它已经被调用过。 **这**是 PHP 能够返回的唯一信息。完整的回溯将包含大量信息，并且性能将停止。

如果你想要一个完整的功能跟踪，你需要安装一个像 xDebug 这样的扩展，并使用它的[跟踪功能](http://xdebug.org/docs/execution_trace)。但是，这不适合生产商店，要跟踪的信息太多。

# c - 扫描字符串时，如果用户输入超过 30 个字符，我如何不允许输入？

> ID：13672523
> 
> 赞同：1
> 
> 时间：2012-12-02T18:48:19.053
> 
> 标签：c

所以我有这个scanf

```
scanf ("%30[^\n]%c", &i 
```

我如何添加一个条件，如果用户输入超过 30 个字符，它会提示一条消息说有太多字符并让它们重新输入？

这是我的整个循环继续重新输入，直到输入正确但我没有设置正确的条件

```
int keeptrying = 1, rc;
char after, i;

do
{
    rc = scanf ("%30[^\n]%c", &i, &after);
        if (rc == 0)
        {
            printf (" **Invalid input try again: ");
            clear();
        }
            else if (after != '\n')
            {
                printf (" **Trailing characters try again: ");
                clear();
            }
                else if () // THIS IS WHERE I WOULD PUT THE CONDITION
                {
                    printf (" **Title is longer than 30 characters: ");
                }
                    else
                    {
                        keeptrying = 0;
                    }

} while (keeptrying == 1);

return i; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T18:54:54.313

基本上，你只想读一行，并检查它的长度是否大于 30。为此，你使用`strlen()`, 来读一行我建议使用类似的东西`getline`：

```
int keeptrying = 1;
char *line = NULL;
size_t linecap = 0;

do {
    ssize_t rc = getline(&line, &linecap, stdin);
    if (rc == 0)
    {
        printf ("End of file.");
        exit(1);
    }
    else if (strlen(line) > 30)
    {
        printf (" **Title is longer than 30 characters: ");
    }
    else
    {
        keeptrying = 0;
    }
} while (keeptrying == 1);

// Use line

free(line); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T19:27:15.360

you can use getchar after scanf (also to clear stdin):

```
do
{
    char i[31];
    rc = scanf ("%30[^\n]", &i);
        if (rc == 0)
        {
            printf (" **Invalid input try again: ");
            clear();
        }
            else if (getchar() != '\n')
            {
                printf (" more than 30 characters try again: ");
                clear();
            }
                    else
                    {
                        keeptrying = 0;
                    }

} while (keeptrying == 1); 
```

# windows-8 - Windows 8 - 使 TextBox 只接受数字

> ID：13672524
> 
> 赞同：0
> 
> 时间：2012-12-02T18:48:27.203
> 
> 标签：windows-8, textbox, numbers

[我阅读了一些关于如何制作只接受数字的文本框的](https://stackoverflow.com/questions/463299/how-do-i-make-a-textbox-that-only-accepts-numbers)精彩帖子？

但是，我在 Windows 8 中找不到同样的东西，没有 Key Press 事件处理程序。还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T19:26:56.040

没有“OnKeyPressed”，但您有“KeyDown”事件。

```
<TextBox KeyDown="TextBox_KeyDown_1"/> 
```

然后在 C# 中：

```
 private void TextBox_KeyDown_1(object sender, KeyRoutedEventArgs e)
     {
        //check IsDigit.
    } 
```

# scheduling - java-持续监视数据库中表以添加新行的最佳方法

> ID：13672528
> 
> 赞同：1
> 
> 时间：2012-12-02T18:48:47.970
> 
> 标签：scheduling, job-scheduling

在 Java 应用程序（不是 Web 应用程序）中，我想连续监控 SQL Server 数据库中的一个表，并且在添加新行的那一刻，我想安排一个“作业”对应。到那一行。同样，如果删除了现有行（在同一个表中），那么我也想要 corresp。计划的工作被取消。

我确实了解如何安排作业或删除已安排的作业——我想知道的是，我如何持续监视该表中的添加/删除（以便我可以安排/删除作业）？

我希望从该应用程序部署在其服务器上的那一刻起，就可以连续完成上述操作。（该应用程序中还将有其他代码来运行计划的作业等）。

任何指南或操作指南都会非常有帮助。我知道 Java 7 有一个叫做“WatchService”的东西，但是从我读到的内容，这对于监视从特定文件夹中添加/删除的任何文件很有用......我正在寻找可以以类似方式应用的东西来监视添加/删除数据库中的表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T18:53:50.410

也许您可以使用 SQL count() 函数定期查询该表 -

`SELECT count(1) FROM table_name`

并检查计数是否改变。

# python - 第k项和非第k项中的Python拆分列表/数组

> ID：13672529
> 
> 赞同：1
> 
> 时间：2012-12-02T18:48:48.667
> 
> 标签：python, list, slice

认为

```
x = range(20)
k = 5
x_kth = x[::5] 
```

这给了我`0,5,10,15 etc` 有没有简单的方法来获取 x 中的非第 k 个元素？

```
x_nonkth = [1,2,3,4,6,7,8,9,11 etc 
```

我知道我能做到

```
x_nonkth = [x[i] for i in range(len(x)) if i%k] 
```

但我正在寻找一种更简单的方法（并且可能更快？）如果有的话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T18:50:56.100

您可以利用`set`差异：-

```
>>> x = range(20)
>>> k = 5
>>> list(set(x) - set(x[::k]))
[1, 2, 3, 4, 6, 7, 8, 9, 11, 12, 13, 14, 16, 17, 18, 19] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T19:05:15.410

使用`enumerate`. 除此之外，该列表理解几乎就是您想要的定义：

```
>>> lst = range(20)
>>> [e for i, e in enumerate(lst) if i % 5]
[1, 2, 3, 4, 6, 7, 8, 9, 11, 12, 13, 14, 16, 17, 18, 19] 
```

另一种方法是获取切片并将它们链接起来，但我认为这不会更容易（如果`k`很大并且列表很长，可能会更快）：

```
from itertools import islice, chain

def without_kth(lst, k):
    return list(chain.from_iterable(
        islice(lst, i+1, i+k) for i in range(0, len(lst), k)
    )) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-02T20:01:50.383

您可以使用`del x[::5]`删除列表中的每五个元素。它会改变原始列表，所以如果你想要一个新列表，请务必先复制列表然后使用突变，例如

```
>>> y = x[:]
>>> del y[::5]
>>> print y
[1, 2, 3, 4, 6, 7, 8, 9, 11, 12, 13, 14, 16, 17, 18, 19] 
```

# forms - 一个 h:form 中的两个提交操作

> ID：13672531
> 
> 赞同：1
> 
> 时间：2012-12-02T18:48:57.557
> 
> 标签：forms, jsf

我正在使用 JSF 2.1 ，我有一个`h:selectOneMenu`组件，所选值（示例：3）将显示 3 个`h:inputText`组件。选择值时，我将值`h:commandButton`提交`null`给支持 bean，我得到异常。我使用一个支持 bean，范围是会话。

我尝试了 2 个解决方案：

*   使用 2 个`h:form`组件，第一个用于 s `h:selectOneMenu`，第二个用于`h:inputText`s。
*   `rendered`根据从 中选择的值玩属性`h:selectOneMenu`。

在 bean 中，我从`h:selectOneMenu`或 的值中获得了选定的值`h:inputText`，而不是两者。

```
<h:form id="f1">
    Nombre d'opérandes :
    <h:selectOneMenu value="#{c.n}" onchange="submit()"    >
        <f:selectItem id="item1" itemLabel="1" itemValue="1" />
        <f:selectItem id="item2" itemLabel="2" itemValue="2" />
        <f:selectItem id="item3" itemLabel="3" itemValue="3" />
        <f:selectItem id="item4" itemLabel="4" itemValue="4" />
        <f:selectItem id="item5" itemLabel="5" itemValue="5" />
    </h:selectOneMenu>
    <h:panelGrid rendered="#{c.n!=0}">
        <c:forEach var="x" begin="0" end="#{c.n-1}"  >
            <h:outputLabel   value="Opérande #{x+1} : "/>      
            <h:inputText  value="#{c.op2[x]}"  />     <br/>
        </c:forEach>
        <fieldset border="1" style="margin:0 auto;width:150px;text-align: center;border-radius:5px;">
            <legend>Operations </legend>
            <h:selectOneRadio value="#{c.operation}" style="margin:0 auto;">
                <f:selectItem itemValue="+" itemLabel="+"/>
                <f:selectItem itemValue="-" itemLabel="-"/>
                <f:selectItem itemValue="x" itemLabel="x"/>
            </h:selectOneRadio>
        </fieldset>
        <h:commandButton action="#{c.Calcul}" value="Valider"  style="background-color:blue;color:white;" />
        <br/>
        <h:outputLabel value="Résultat : #{c.res}"/>
    </h:panelGrid>
</h:form> 
```

支持豆：

```
@ManagedBean(name="c")
@SessionScoped
public class Calcul {

    Double[] op2;
    private int n;
    private double res;
    private String operation;
    public Calcul(){

        op2=new Double[100];

    }

    public double getRes() {
        return res;
    }

    public void setRes(double res) {
        this.res = res;
    }

    public Double[] getOp2() {

        return op2;
    }

    public void setOp2(Double[] op2) {
        this.op2 = op2;
    }

     public int getN() {
        return n;
    }

    public void setN(int n) {
        this.n = n;
    }

    public String getOperation() {

        return operation;
    }

    public void setOperation(String operation) {
        this.operation = operation;
    }

    public void Calcul(){
        if ( operation.equals("+")) { 
            somme();      
        }
        else if ( operation.equals("-"))   soustraction();
        else if ( operation.equals("x")) multiplication();
    }

    public void somme() {
        res=0;
        for (int i = 0; i < n; i++) res+=op2[i];
    }
    public void soustraction() {
        res=op2[0];
        for (int i = 1; i < n; i++) res-=op2[i];
    }
    public void multiplication() {
        res=1;
        for (int i = 0; i < n; i++) res*=op2[i];
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T06:56:40.220

利用`f:ajax`

代替

```
 <h:selectOneMenu value="#{c.n}" onchange="submit()"    >
    <f:selectItem id="item1" itemLabel="1" itemValue="1" />
    <f:selectItem id="item2" itemLabel="2" itemValue="2" />
    <f:selectItem id="item3" itemLabel="3" itemValue="3" />
    <f:selectItem id="item4" itemLabel="4" itemValue="4" />
    <f:selectItem id="item5" itemLabel="5" itemValue="5" />
</h:selectOneMenu> 
```

和

```
<h:selectOneMenu value="#{c.n}">
    <f:selectItem id="item1" itemLabel="1" itemValue="1" />
    <f:selectItem id="item2" itemLabel="2" itemValue="2" />
    <f:selectItem id="item3" itemLabel="3" itemValue="3" />
    <f:selectItem id="item4" itemLabel="4" itemValue="4" />
    <f:selectItem id="item5" itemLabel="5" itemValue="5" />
    <f:ajax render="@form"/>
</h:selectOneMenu> 
```

并更换

```
<h:commandButton action="#{c.Calcul}" value="Valider"  style="background-color:blue;color:white;" /> 
```

和

```
<h:commandButton action="#{c.Calcul}" value="Valider"  style="background-color:blue;color:white;" >
    <f:ajax execute="@form" render="@form"/>
</h:commandButton> 
```

**而且最重要的是**

阅读此博客[Maxa 博客：学习 JSF2：JSF 中的 Ajax – 使用 f:ajax 标签](http://mkblog.exadel.com/2010/04/learning-jsf-2-ajax-in-jsf-using-fajax-tag/)

# python-3.x - 如何从列表中删除包含特定元素的列表

> ID：13672532
> 
> 赞同：0
> 
> 时间：2012-12-02T18:48:58.627
> 
> 标签：python-3.x

```
a = [['yes','no'],['riding','0']['riding',1],['yes','no'],['yes','no'],['riding',2]] 
```

需要删除所有包含骑行的列表，这样它会给我

```
a = [['yes','no'],['yes','no'],['yes','no']] 
```

我有一个很大的列表，而包含骑行的列表没有可预测的顺序，我该如何删除它们？感谢大家

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T18:55:24.140

使用简单的 for 循环：

```
for l in a.copy():
    if "riding" in l:
        a.remove(l) 
```

# ruby-on-rails - 嵌套或不嵌套资源

> ID：13672537
> 
> 赞同：5
> 
> 时间：2012-12-02T18:49:41.313
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rest, routes

在过去的几天里，我一直在玩 Rails。

我不确定是否应该嵌套资源，以及如何确定它。

假设我有一个应用程序，用户可以在其中注册并制作待办事项列表。他们可以选择将这些列表设为公开或私有。

我遇到麻烦的地方是我是否应该将列表嵌套在用户资源下：

如果我这样做，我最终会得到类似的结果：

`/users/:id/lists` `/users/:id/lists/:list_id`

但是，如果我想说，查看下的所有公共列表`/lists`怎么办？那会干扰路线的宁静，不是吗？

我无法嵌套列表并为用户和列表设置单独的路由，但至少在我看来，我又遇到了麻烦。

`/users/:id # some profile page` `/lists # should this link to all lists or all the current user's lists?`

但是，如果我想显示特定用户的列表，我不知道我的路线是什么。

有没有办法以某种方式结合它？将列表嵌套在用户资源下，但仍然有`/lists`list_path？或者这只是一个自定义命名路线？

我对那些比我更精通 Rails 的人如何解决这个问题很感兴趣。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T20:06:54.870

您可以同时拥有嵌套列表和非嵌套列表。

`resources :lists`将创建所有宁静的路线。

```
resources :users do
  resources :lists
end 
```

然后将创建所有嵌套路由和关联的助手。在这种情况下，我不会使用嵌套路由，因为您的控制器将是一个狗屎秀。

嵌套路由（比如说 users/7/lists）默认路由到`ListsController#index`，但你也有 /lists 去`ListsController#index`。因此，您可以向控制器添加一些逻辑：

```
ListsController < ApplicationController
  def index
    if params[:user_id].present?
      # I'm in a user_list
    else
      # I'm in a public list
    end
  end
end 
```

啊。

好的 before_filter 怎么样？

```
ListsController < ApplicationController
  before_filter :unjankify_nested_routes

  private      

  def unjankify_nested_routes
    if params[:user_id].present?
      # I'm in a user_list
      render "users_#{@action}"
    else
      # I'm in a public list
    end
  end
end 
```

现在我们基本上可以通过说 users_show、users_index 等来确定控制器方法的范围。但是那个 @action 变量是什么？我们需要捕捉到这一点。

```
class ApplicationController     
  def process_action(name, *args)
    @action_name = name
    super rescue false #no super in tests
  end
end 
```

我们只是重写了一个内部 Rails 方法来捕获动作名称。这很有趣，但似乎我们做错了什么。

## 正确的方式（tm）

没有“正确的方法”，但[范围](http://guides.rubyonrails.org/routing.html#controller-namespaces-and-routing)是一个不错的选择

```
scope 'privates' do
  resources :lists
end 
```

现在我们可以有一个`Privates::ListsController`in `app/controllers/privates/lists_controller`。您可以在查询参数中添加 user_id，或在范围内嵌套路由：

```
scope 'privates' do
  resources :users do  
    resources :lists
  end
end 
```

# c# - 使用 LINQ 生成 XML 时从元素中删除 xmlns 属性？

> ID：13672539
> 
> 赞同：0
> 
> 时间：2012-12-02T18:49:45.400
> 
> 标签：c#, xml, linq, linq-to-xml

我有一个关于生成的问题`sitemap.xml`

我的创建者代码是这样的：

```
XNamespace xmlns = XNamespace.Get("http://www.sitemaps.org/schemas/sitemap/0.9");
XNamespace xsi = XNamespace.Get("http://www.w3.org/2001/XMLSchema-instance");
XNamespace schemaLocation = XNamespace.Get("http://www.sitemaps.org/schemas/sitemap/0.9 http://www.sitemaps.org/schemas/sitemap/0.9/sitemap.xsd");

XElement urlset = new XElement(xmlns+"urlset",
                  new XAttribute(XNamespace.Xmlns + "xsi", xsi),
                  new XAttribute(xsi + "schemaLocation", schemaLocation));       

urlset.Add(new XElement("url")); 
```

此代码生成 xml 文件，但生成的`sitemap.xml`url 元素包含一个`xmlns=""`属性。

```
<urlset xmlns="..." ><url xmlns=""/> </urlset> 
```

所有`<url>`元素都包含该`xmlns = ""`属性。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T15:40:19.327

我认为[W3 Org](http://www.w3.org/TR/xmlschema-0/#NS)可以比我更好地总结命名空间，您对所有节点和“url”节点上方的属性都有合格的命名空间。当您添加时`urlset.Add(new XElement("url"));`，它应该如何确定它所在的命名空间？

我建议您尝试一下，看看它如何为您工作：

```
static void Main ( string [] args )
{
    XNamespace xmlns = XNamespace.Get("http://www.sitemaps.org/schemas/sitemap/0.9");
    XNamespace xsi = XNamespace.Get("http://www.w3.org/2001/XMLSchema-instance");
    XNamespace schemaLocation = XNamespace.Get("http://www.sitemaps.org/schemas/sitemap/0.9 http://www.sitemaps.org/schemas/sitemap/0.9/sitemap.xsd");

    XElement urlset = new XElement(xmlns+"urlset",
               new XAttribute(XNamespace.Xmlns + "xsi", xsi),
               new XAttribute(xsi + "schemaLocation", schemaLocation));       

    urlset.Add(new XElement(xmlns+"url")); // NB> We are qualifying the node
    var s = urlset.ToString( );
    Console.ReadKey( );
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-04T07:51:20.247

试试这个代码

```
XmlDocument stripDocumentNamespace(XmlDocument oldDom)
{
    XmlDocument newDom = new XmlDocument();
    newDom.LoadXml(Regex.Replace(oldDom.OuterXml,
         @"(xmlns:?[^=]*=[""][^""]*[""])", "",
         RegexOptions.IgnoreCase | RegexOptions.Multiline));
    return newDom;
} 
```

# php - 重构保存用户功能

> ID：13672541
> 
> 赞同：-1
> 
> 时间：2012-12-02T18:49:57.117
> 
> 标签：php, codeigniter

我试图找出处理如果创建用户但第二次插入没有成功运行会发生什么情况的最佳途径。有哪些可能性？

```
 /**
  * save_user function.
  * 
  * @access public
  * @param string $user_name
  * @param string $user_directory_name
  * @param integer $user_status_id
  * 
  * @return TRUE/FALSE
  */
  public function save_user($user_name, $user_directory_name, $user_status_id)
  {
      $data = array(
         'user_name' => $user_name,
         'user_directory_name' => $user_directory_name,
         'user_status_id' => $user_status_id
      );

      $this->db->insert('users', $data);

      if ($this->db->affected_rows() == 1)
      {
          $data = array(
              'user_id' => $this->db->insert_id()
          );

          $this->db->insert('user_profiles', $data);

          if ($this->db->affected_rows() == 1)
          {
              return true;
          }
          else
          {
              return false;
          }
      }
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T19:27:57.023

您似乎在描述[atomicity](http://en.wikipedia.org/wiki/Atomicity_%28database_systems%29)。如果其中一个插入失败，则不应允许任何一个插入完成。我不熟悉 codeignighter 的 db 层。如果插入方法失败，您应该检查它是否会自动发出回滚。如果不是，那么您将需要在您的 save_user 方法中检查这些条件，并且 1）在那里发出回滚或 2）返回 false 并从调用代码处理回滚。此外，请查阅 db insert 方法的文档以查看它返回的内容或是否引发任何异常。这可能比调用affected_rows 更容易检测插入失败。

# python - 删除两个列表之间的共同元素

> ID：13672543
> 
> 赞同：19
> 
> 时间：2012-12-02T18:50:39.720
> 
> 标签：python

> **可能重复：**
> [Python 列表减法运算](https://stackoverflow.com/questions/3428536/python-list-subtraction-operation)

我想删除两个列表之间的共同元素。我的意思是这样的

* * *

```
a=[1,2,3,4,5,6,7,8]
b=[2,4,1]
# I want the result to be like
res=[3,5,6,7,8] 
```

* * *

有没有简单的pythonic方法来做到这一点？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-12-02T18:57:52.403

使用集：

```
res = list(set(a)^set(b)) 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-02T20:09:51.327

[您可以使用集合从这里](http://docs.python.org/3/library/stdtypes.html#set)了解更多信息

```
print(set(a).difference(b)) 
```

# php - Symfony2 ReST 客户端结构

> ID：13672548
> 
> 赞同：17
> 
> 时间：2012-12-02T18:51:18.020
> 
> 标签：php, oop, rest, symfony, guzzle

我正在尝试在 Symfony 2 中为 ReST 客户端建立一个最佳实践模式，因为这对我们公司来说是一项非常常见的工作，我们在前端有 Symfony 应用程序，通过 HTTP/ReST 与基于 Java 的后端通信。

我的想法是，这些服务在[DDD](http://en.wikipedia.org/wiki/Domain-driven_design#Building_blocks_of_DDD)中为特定域填充“存储库”角色。根据 Doctrine 指定的约定，这些将进入返回 Entity 对象的 Repository 类。

我认为同样的约定也可以在这里工作，ReST 客户端使用像 Guzzle 这样的库或直接 Curl 来实现一个 Repository 类，不管如何，然后那里的代码进行从 XML 或 JSON 到实体的基本转换供上游开发人员操作的对象。这与其他 Symfony 2 用例中的模式一致，并且从 DDD 的角度来看是有意义的。

有没有人看到这个问题或更好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-05-26T10:35:34.887

以下是在 symfony2 中处理 REST API 开发的最佳文章：
[http ://welcometothebundle.com/symfony2-rest-api-the-best-2013-way/](http://welcometothebundle.com/symfony2-rest-api-the-best-2013-way/)

**FOSRestBundle**和**NelmioApiDocBundle**是快速休息 api 开发的不错选择。您可以访问官方文档了解如何安装、配置和使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T20:14:01.987

我喜欢你概述的方法。您可以将您的存储库视为一个[反腐败层](http://msdn.microsoft.com/en-us/magazine/dd419654.aspx#id024)，它将您的 ReST 客户端代码与您的域模型隔离开来。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-23T10:08:14.630

如果您正确考虑了所有涉及的缓存层，则此方法有效，以确保您的存储库不会缓存超出您检索的 REST 对象的 TTL（由 etags 或过期标头或您的 REST 服务器使用的任何内容设置）。

绝对 Repository 是正确的层，尽管也许在 Symfony 中你想更上一层并将其视为实体管理器，因为它允许你抽象该层的操作，例如持久化、删除和刷新。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-04-13T11:34:59.117

如果你打算这样使用它们，我认为你在滥用 Symfony 中的存储库。最好在您的存储库中使用 setter 和 getter，并在服务中使用 guzzle/curl 进行处理。

**控制器/命令 -> 服务方法 -> 存储库**

然后，根据您的需要，您可以编写一个 Command/Controller 来根据您的需要公开服务中的方法。

# php - 将表单输入保存到 MySQL 数据库：遇到错误

> ID：13672549
> 
> 赞同：0
> 
> 时间：2012-12-02T18:51:17.717
> 
> 标签：php, html, mysql, forms

我正在尝试将表单中的一些输入保存到我的 MySQL 数据库中，但我收到此错误：

**没有保存。您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 'desc，remarks) VALUES('a', 'b', 'c' 附近使用正确的语法**

这是我的完整 PHP 代码：

```
if (isset($_POST['region'], $_POST['desc'], $_POST['remarks']) && !empty ($_POST['region']) && !empty($_POST['desc']) && !empty($_POST['remarks']) )

            {

            $region = mysql_escape_string($_POST['region']);
            $desc = mysql_escape_string($_POST['desc']);
            $remarks = mysql_escape_string($_POST['remarks']); 

            mysql_query("INSERT INTO register (region, desc, remarks) VALUES(

            '$region', 
            '$desc', 
            '$remarks') ") or die('Not saved. ' . mysql_error()); 

             } 
```

你能告诉我我做错了什么吗？我以前做过，但在这种情况下我似乎找不到错误。:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T19:03:15.563

正如其他人已经指出的那样，`desc`是 SQL 关键字，但您不必**更改**列名即可使查询正常工作。您可能会考虑这一点，但绝对不是强制性的。诀窍是（这是一直做的好习惯）您应该始终使用反引号“`”引用列名，以免使 SQL 引擎混淆。所以这会抛出一个错误：

```
INSERT INTO register (region, desc, remarks) ... 
```

但这很好：

```
INSERT INTO register (`region`, `desc`, `remarks`) ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T19:18:51.373

尝试改变

```
'$region' 
```

到

```
 '".$region."' 
```

并这样做

```
 mysql_query("INSERT INTO register (`region`, `desc`, `remarks`) VALUES(

        '".$region."', 
        '".$desc."', 
        '".$remarks."') ") or die('Not saved. ' . mysql_error()); 

         } 
```

# assembly - Atmel Studio：行尾出现垃圾错误

> ID：13672550
> 
> 赞同：1
> 
> 时间：2012-12-02T18:51:18.070
> 
> 标签：assembly, avr, avr-gcc

我正在尝试使用来自 [http://www.atmel.com/tools/CANSOFTWARELIBRARY.aspx的 ATMEL CAN 库编译一个程序以在 AT90CAN128 上运行](http://www.atmel.com/tools/CANSOFTWARELIBRARY.aspx)

但是，当我尝试编译时，在 Atmel Studio 6 中出现以下错误

```
# | 说明 | 文件 | 行 | 科尔
1 | 缺少')' | -\Temp\ccMKhrlO.s | 89 | 1
2 | 垃圾在行尾| -\Temp\ccMKhrlO.s | 89 | 1  

```

我假设这些是编译器生成的内部程序集文件，但是当我导航到指定的位置时，该文件不存在。

有没有人遇到过类似的问题，可能知道这里发生了什么？

编译日志的相关部分如下：

```
------ Build started: Project: FSAE Steering, Configuration: Debug AVR ------
...
...
Building file: ../libraries/lib_mcu/flash/flash_appli_lib.c
I"C:\Program Files (x86)\Atmel\Atmel Studio 6.0\extensions\Atmel\AVRGCC\3.4.0.65\AVRToolchain\bin\avr-gcc.exe" -funsigned-char -funsigned-bitfields -DF_CPU=1600000UL  -I".." -I"../libraries/lib_module" -I"../libraries/lib_module/isp" -I"../libraries/lib_mcu" -I"../libraries/lib_mcu/adc" -I"../libraries/lib_mcu/can" -I"../libraries/lib_mcu/eeprom" -I"../libraries/lib_mcu/flash" -I"../libraries/lib_mcu/spi" -I"../libraries/lib_mcu/timer" -I"../libraries/lib_mcu/uart" -I"../libraries/lib_board/audio" -I"../libraries/lib_board/key" -I"../libraries/lib_board/led" -I"../libraries/lib_board/rtc" -I"../libraries/lib_board/sensor" -I"../libraries/lib_board"  -O1 -fpack-struct -fshort-enums -g2 -Wall -c -std=gnu99 -MD -MP -MF "libraries/lib_mcu/flash/flash_appli_lib.d" -MT"libraries/lib_mcu/flash/flash_appli_lib.d" -MT"libraries/lib_mcu/flash/flash_appli_lib.o"  -mmcu=at90can128   -o"libraries/lib_mcu/flash/flash_appli_lib.o" "../libraries/lib_mcu/flash/flash_appli_lib.c" 

C:\Users\Dan\AppData\Local\Temp\ccMKhrlO.s: Assembler messages:
C:\Users\Dan\AppData\Local\Temp\ccMKhrlO.s(89,1): missing ')'
C:\Users\Dan\AppData\Local\Temp\ccMKhrlO.s(89,1): garbage at end of line
make: *** [libraries/lib_mcu/flash/flash_appli_lib.o] Error 1
Done executing task "RunCompilerTask" -- FAILED.
Done building target "CoreBuild" in project "FSAE Steering.cproj" -- FAILED.
Done building project "FSAE Steering.cproj" -- FAILED.

Build FAILED.
========== Build: 0 succeeded or up-to-date, 1 failed, 0 skipped ========== 
```

看起来它不正确地将 flash_appli_lib.c 转换为程序集。但是查看文件显示没有明显的问题。

flash_appli_lib.c

```
//******************************************************************************
//! @file $RCSfile: flash_appli_lib.c,v $
//!
//! Copyright (c) 2007 Atmel.
//!
//! Use of this program is subject to Atmel's End User License Agreement.
//! Please read file license.txt for copyright notice.
//!
//! @brief This file contains the library of functions of:
//!             - Flash (code in "Application Flash Section")
//!             - for AT90CAN128/64/32.
//!
//! This file can be parsed by Doxygen for automatic documentation generation.
//! This file has been validated with AVRStudio-413528/WinAVR-20070122.
//!
//! @version $Revision: 3.20 $ $Name: jtellier $
//!
//! @todo
//! @bug
//******************************************************************************

//_____ I N C L U D E S ________________________________________________________
#include "config.h"
#include "flash_appli_lib.h"
#include "flash_appli_drv.h"

//_____ D E F I N I T I O N S __________________________________________________

//_____ F U N C T I O N S ______________________________________________________

//------------------------------------------------------------------------------
//  @fn flash_rd_byte
//!
//! This function allows to read a byte in 64K bytes of Flash memory.
//!
//! @warning: _RAMPZ_IS_USED must be defined in "config.h"
//! @warning: The 64K page setting must be done before (ex: setting
//!           or clearing the RAMPZ register).
//!
//! @param: addr_byte   Address to read the byte in Flash memory.
//!
//! @return:    Value read in the Flash memory.
//!
//------------------------------------------------------------------------------
U8 flash_rd_byte(U16 addr_byte)
{
#if defined(_RAMPZ_IS_USED_)
    U32  far_addr_byte;

    far_addr_byte = (((U32)(RAMPZ))<<16) | ((U32)(addr_byte));
    return (Farflash_rd_byte(far_addr_byte));

#else
    return (Stdflash_rd_byte(addr_byte));

#endif   //- If _RAMPZ_IS_USED_ ...

//    return (Flash_rd_byte(addr_word));
}

//------------------------------------------------------------------------------
//  @fn flash_rd_word
//!
//! This function allows to read a word in 64K bytes of Flash memory.
//!
//! @warning: _RAMPZ_IS_USED must be defined in "config.h"
//! @warning: 1 - The address of the word is an even byte address.
//!           2 - The 64K page setting must be done before (ex: setting
//!               or clearing the RAMPZ register).
//!
//! @param: addr_word   Address to read the word in Flash memory.
//!
//! @return:    Value read in the Flash memory.
//!
//------------------------------------------------------------------------------
U16 flash_rd_word(U16 addr_word)
{
#if defined(_RAMPZ_IS_USED_)
    U32  far_addr_word;

    far_addr_word = (((U32)(RAMPZ))<<16) | ((U32)(addr_word));
    return (Farflash_rd_word(far_addr_word));

#else
    return (Stdflash_rd_word(addr_word));

#endif   //- If _RAMPZ_IS_USED_ ...

//    return (Flash_rd_word(addr_word));
}

//------------------------------------------------------------------------------
//  @fn flash_appli_wr_byte
//!
//! This function allows to write a byte in 64K bytes of Flash memory.
//!
//! @warning: The 64K page setting must be done before (ex: setting
//!           or clearing the RAMPZ register).
//!
//! @param: addr_byte   Address to write the byte in Flash memory.
//!         value       Value to write in the Flash memory.
//!
//! @return none
//!
//------------------------------------------------------------------------------
void flash_appli_wr_byte(U16 addr_byte, U8 value)
{
    flash_appli_wr_block(&value, addr_byte, 1);
}

//------------------------------------------------------------------------------
//  @fn flash_appli_wr_block
//!
//! This application function calls flash_wr_block() function of the BootLoader
//!    if the application is runnning supervised by the BootLoader developped
//!    by ATMEL (see "can_bootloader_example" or "can_uart_bootloader_example").
//!
//! @warning: The 64K page setting must be done before (ex: setting
//!           or clearing the RAMPZ register).
//! @warning: See flash_wr_block() function in "flash_boot_lib.c".
//!
//! @param: - src      Source of (SRAM) buffer Address.
//!         - dest     Destination, start address in Flash memory where data
//!                    must be written.
//!         - byte_nb  Number of byte to write.
//!
//! @return none
//!
//------------------------------------------------------------------------------
void flash_appli_wr_block(U8* src, U16 dest, U16 byte_nb)
{
    Call_flash_appli_wr_block();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T12:40:23.567

我通过从项目中删除有问题的 c 文件来修复错误。
似乎 Atmel 工作室正在尝试编译所有内容，而不仅仅是从 main 链接的内容。

# linux - 遇到 inotifywait 问题，尝试查看 golang 更改的目录

> ID：13672551
> 
> 赞同：-3
> 
> 时间：2012-12-02T18:51:24.153
> 
> 标签：linux, bash, filesystems, go, inotify

我正在尝试编写一个 bash 脚本来监视目录的更改。如果文件是 .go 或 .html 文件，我想杀死一个特定的进程，然后启动它。

这到处都是失败的，我不知道为什么。在搜索了很多网站寻求帮助后，我尽力让这个工作，但我无法得到它。

理想的解决方案是我会通过传递一个目录和一个文件来运行它，它只会在我保存文件时重新加载进程。

我像这样运行它：

*./gowatcher /path/to/my/directory/to/watch foo.go*

这是我到目前为止所拥有的：

```
#!/usr/bin/env bash

WATCH_DIR=$1
FILENAME=$2

function restart_goserver() {
  if go run $FILENAME
  then
    pkill -9 -f $FILENAME > /dev/null 2>&1
    pkill -9 -f a.out > /dev/null 2>&1
    go run $FILENAME &
    echo "started $FILENAME"
  else
    echo "server restart failed"
  fi
}

cd $WATCH_DIR
restart_goserver

echo "watching directory: $WATCH_DIR"
inotifywait -mrq -e close_write $WATCH_DIR | while read file
do
  if grep -E '^(.*\.go)|(.*\.html)$'
  then
    echo "--------------------"
    restart_goserver
  fi
done 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T20:17:15.700

这条线似乎是错误的：

```
grep -E '^(.*\.go)|(.*\.html)$' 
```

应该 ：

```
echo "$file" | grep -E '^(.*\.go)|(.*\.html)$' 
```

此外，**默认情况下****不要使用！`kill -9`**请参阅[我应该以什么顺序向正常关闭进程发送信号？](https://stackoverflow.com/questions/690415/in-what-order-should-i-send-signals-to-gracefully-shutdown-processes)

# android - 滚动首选项会将所有内容更改为白色

> ID：13672558
> 
> 赞同：0
> 
> 时间：2012-12-02T18:52:16.697
> 
> 标签：android, colors, preference

我有一个这样的偏好屏幕：

```
 <PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android"
 >

    <CheckBoxPreference
        android:title = "Turn parrot on" 
        android:defaultValue="false"
        android:enabled="true"

        android:persistent="true"

        android:key="turning parrot" />
     <ListPreference
         android:key = "interval"
         android:title = "Talking interval"
         android:persistent="true"
         android:enabled="true"
         android:entries="@array/updateInterval"
         android:entryValues="@array/updateIntervalValues"
         android:dependency="turning parrot"
         android:defaultValue = "1"
         />

     <ListPreference
         android:key = "language"

         android:title = "Talking language"
         android:persistent="true"
         android:enabled="true"
         android:entries="@array/talkinglanguages"
         android:entryValues="@array/talkinglanguagesValues"
         android:dependency="turning parrot"
         android:defaultValue = "1"
         />

 </PreferenceScreen> 
```

当我滚动首选项列表时，一切都变为白色。如果我的列表是列表视图，我应该执行以下操作

```
listView = (ListView) this.findViewById(R.id.listview); 
listView.setCacheColorHint(Color.TRANSPARENT); 
```

[我从这里](https://stackoverflow.com/questions/3011945/scrolling-a-listview-changes-everything-from-white-to-black)了解到

但我的偏好列表没有 id。如何在滚动时更改缓存颜色以消除白色。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T19:03:19.947

首选项屏幕由标准 ListView 组成，并具有默认的 Android id `list`。

```
ListView listView = (ListView)findViewById(android.R.id.list); 
```

使用它来设置缓存颜色提示。

# bash - 在bash中保存数据？

> ID：13672559
> 
> 赞同：4
> 
> 时间：2012-12-02T18:52:21.867
> 
> 标签：bash, shell

好的，所以我想知道是否可以像 bash 中的变量一样保存。我正在编写一个脚本，您可以在其中像农场和矿山一样进行构建，我只是想知道即使在我停止程序然后重新启动之后是否有可能恢复这些变量。所以假设我已经建立了 4 个农场，农场将是农场 = 4，我可以以某种方式把这个变量带回来吗？我知道如何制作一个可以在其上制作高分列表的页面（我是为猜谜游戏做的。），但是我不知道这在 bash 中是否可行。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-02T18:55:17.667

您可以以该格式将所有内容写入文件：

```
farm=4
myname=gniourf 
```

然后获取该文件：

```
#!/bin/bash

# Recover the saved states:
source file_where_i_saved_my_stuff

# Now you can recover all your variables!
echo "$farm"
echo "$myname" 
```

* * *

# 编辑

由于您想知道*如何*保存变量，因此这里有一个快速提示，其中包含许多其他答案中未提供的内容。

好的，所以您想将一些变量保存在一个文件中，并且以后能够获取该文件以恢复这些变量的值。当然，您将有很多变量，并且您不想明确写下您必须保存的所有变量的列表，这很容易出错并且很迟钝。我的意思是，没有人愿意做以下事情：

```
cat <<EOF > file_where_i_saved_my_stuff
variable1=$variable1
variable2=$variable2
...
variable1000000=$variable1000000
EOF 
```

事实上，出于多种原因，您根本不想这样做。现在，我将解决解决方案：

该方法依赖于这个愚蠢的东西（以及良好的 bash 实践和知识）：使用前缀命名您要保存的所有变量，例如，，`variable_i_want_to_save_`这样您就可以拥有诸如等`variable_i_want_to_save_number_of_farms`之类的变量`variable_i_want_to_save_color_of_granny_dress`。不要将此前缀用于您不想保存的变量。

## 聪明的东西#1

bash 有一个很棒的东西：你可以获得所有以某个前缀开头的变量的名称，如下所示：

```
"${!prefix@}" 
```

这将扩展为以前缀开头的所有已知变量的列表`prefix`。

因此，在我们的案例中，

```
for i in "${!variable_i_want_to_save_@}"; do 
```

将遍历以我们美妙的前缀为前缀的所有变量的名称。那不是很棒吗？

## 聪明的东西#2

如果我处于以下情况：

```
a=1
b=2
variablename="a" 
```

如何获取名称为变量值的变量的值`variablename`？简单，使用`"${!variablename}"`构造。看：

```
$ a=1
$ b=2
$ variablename=a
$ echo "${!variablename}"
1 
```

`${!prefix@}`和扩展在 Bash 参考的[*Shell Parameter Expansion*](http://www.gnu.org/software/bash/manual/bashref.html#Shell-Parameter-Expansion)[部分中进行了](http://www.gnu.org/software/bash/manual/bashref.html#Shell-Parameter-Expansion)`${!variablename}`解释（您必须向下滚动一点才能到达那里）。[](http://www.gnu.org/software/bash/manual/bashref.html#Shell-Parameter-Expansion)

 *## （破损）解决方案

然后，您可以使用损坏的解决方案将变量保存在文件中，如下所示：

```
save_data_to_file() {
    for i in "${variable_i_want_to_save_@}"; do
        echo "$i=${!i}"
    done > file_where_i_saved_my_stuff
} 
```

这真的很有效也很酷，但是如果你的变量中有空格或任何类型的垃圾字符（可以（并且应该）出现），那么它就会被破坏。哦亲爱的。

## 解决方案

对你来说，好消息是 bash 有这个很棒的`printf`命令，它有惊人的格式规范`%q`，它将

> 以可以重用为 shell 输入的方式引用参数

（我从 得到这个`help printf`）。太棒了，太棒了，试试吧：

```
$ a=$'bonjour les amis !\ncomment ça va ?'
$ # You see, variable a has a lot of stupid characters:
$ echo "$a"
bonjour les amis !
comment ça va ?
$ # and printf does a wonderful job:
$ printf '%s=%q\n' a "$a"
a=$'bonjour les amis!\ncomment \303\247a va ?' 
```

你做梦也想不到这么好的东西。或者也许你可以，但请承认它很棒！

因此，您可以在此以绝妙的方式将变量保存在文件中：

```
save_data_to_file() {
    for i in "${!variable_i_want_to_save_@}"; do
        printf '%s=%q\n' "$i" "${!i}"
    done > file_where_i_saved_my_stuff
} 
```

* * *

请注意，像这样获取外部文件会导致明显的安全问题，因此请确保仅谨慎使用此方法！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-02T18:54:44.997

您可以将所有需要的变量保存在一个文件中（使用*here-doc*）：

```
cat<<EOF>/path/to/file
var1="$var1"
var2="$var2"
EOF 
```

并重新创建您以前的环境：

```
source /path/to/file 
```

或者

```
. /path/to/file 
```

**解释**

*   放置*here-doc*的位置取决于您的代码，如果您不必通过示例将变量保存在循环中，则可以是最后一行
*   放置命令的地方是*shebang*`source`之后脚本的顶部

 *帮助说：

```
$ LANG=C help source 
```

> source: source filename [arguments] 从当前 shell 中的文件执行命令。
> 
> ```
> Read and execute commands from FILENAME in the current shell.  The
> entries in $PATH are used to find the directory containing FILENAME.
> If any ARGUMENTS are supplied, they become the positional parameters
> when FILENAME is executed.
> 
> Exit Status:
> Returns the status of the last command executed in FILENAME; fails if
> FILENAME cannot be read. 
> ```

**笔记**

如果您出于某些原因想要动态生成具有变量名模式匹配的文件：

*   按后缀：`printf '%q\n' $(set | grep "suffix=") > save_file`
*   按前缀：`printf '%q\n' $(set | grep "^prefix") > save_file`

感谢 gniourf_gniourf 的`printf`诡计。**

# ruby-on-rails - 每周发送电子邮件，无论何时

> ID：13672560
> 
> 赞同：0
> 
> 时间：2012-12-02T18:52:39.640
> 
> 标签：ruby-on-rails, whenever

我正在尝试向我的所有应用程序用户发送电子邮件。

为了做到这一点，我随时都在使用。

所以我有一个带有我的配置 smtp 的文件 /config/initializer/setup_mail.rb：

```
ActionMailer::Base.smtp_settings = {
    :tls => true,
    :address => "smtp.gmail.com",
    :port => "587",
    :domain => "miiaou.fr",
    :authentication => :plain,
    :user_name => "test.cicelle",
    :password => "myPasswordGoogle"
}

ActionMailer::Base.default_url_options[:host] = "miiaou.fr" 
```

在我的 user.rb 模型中：

```
def self.mail_recap_semaine
    @user = User.all
    @user.each do |u|
      UserMailer.mail_recap_semaine(u.email).deliver
    end
  end 
```

在 user_mailer.rb

```
def mail_recap_semaine(email)
    mail(:to => email, :subject => "Weekly email from footyaddicts")
  end 
```

在 schedule.rb 中（每 10 分钟一次，所以我可以看看它是否有效）

```
every 10.minutes do
   runner "User.mail_recap_semaine"
end 
```

当我在 Rails 控制台中运行 User.mail_recap_semaine 时，我得到了很多关于我的用户的信息，但我没有收到任何邮件。

我怎么能看到错误在哪里？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T11:36:13.680

我为了调试发送邮件时发生的错误或问题，您需要更改 config/development.rb 或 config/production.rb 的配置设置以引发操作邮件程序的错误，如下所示。

config.action_mailer.raise_delivery_errors = true

默认情况下，它设置为 false，因此您不会收到任何错误。

希望能帮助到你。

谢谢，

玛尼

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T15:39:23.840

好的，是 :tls 破坏了代码。

所以现在，我在 rails 控制台中的命令完美运行并发送电子邮件，但无论何时仍然无法正常工作。

crontab -l

```
# Begin Whenever generated tasks for: miiaou
0,10,20,30,40,50 * * * * /bin/bash -l -c 'cd /home/miiaou/miiaou && script/rails runner -e production '\''User.mail_recap_semaine'\'''

# End Whenever generated tasks for: miiaou 
```

我已经重新启动服务器，但我没有收到任何东西。

# php - 处理 stdClass 对象

> ID：13672561
> 
> 赞同：4
> 
> 时间：2012-12-02T18:52:46.680
> 
> 标签：php, json

谷歌搜索了一段时间后，我发现我可以使用以下代码进行谷歌搜索：

```
$text=$_GET['text'];
$results=file_get_contents("http://ajax.googleapis.com/ajax/services/search/web?v=1.0&q=" . $text);
// Too lazy to use cURL
$results=json_decode($results); 
```

问题是它`$results`实际上是一个`object(stdClass)`, 并且像处理数组一样处理它是行不通的（即`$results["responseData"]`）。这是完整的`var_dump`：

```
object(stdClass)#1 (3) {
  ["responseData"]=>
  object(stdClass)#2 (2) {
    ["results"]=>
    array(4) {
      [0]=>
      object(stdClass)#3 (8) {
        ["GsearchResultClass"]=>
        string(10) "GwebSearch"
        ["unescapedUrl"]=>
        string(51) "http://www.urbandictionary.com/define.php?term=lulz"
        ["url"]=>
        string(55) "http://www.urbandictionary.com/define.php%3Fterm%3Dlulz"
        ["visibleUrl"]=>
        string(23) "www.urbandictionary.com"
        ["cacheUrl"]=>
        string(73) "http://www.google.com/search?q=cache:9eN_paaTATEJ:www.urbandictionary.com"
        ["title"]=>
        string(29) "Urban Dictionary: <b>lulz</b>"
        ["titleNoFormatting"]=>
        string(22) "Urban Dictionary: lulz"
        ["content"]=>
        string(159) "Beginning as a plural variant of lol, <b>Lulz</b> was originally an exclamation but is now   often used as a noun meaning interesting or funny internet cont..."
      }
      [1]=>
      object(stdClass)#4 (8) {
        ["GsearchResultClass"]=>
        string(10) "GwebSearch"
        ["unescapedUrl"]=>
        string(34) "http://en.wiktionary.org/wiki/lulz"
        ["url"]=>
        string(34) "http://en.wiktionary.org/wiki/lulz"
        ["visibleUrl"]=>
        string(17) "en.wiktionary.org"
        ["cacheUrl"]=>
        string(67) "http://www.google.com/search?q=cache:ksdO4S_AefUJ:en.wiktionary.org"
        ["title"]=>
        string(24) "<b>lulz</b> - Wiktionary"
        ["titleNoFormatting"]=>
        string(17) "lulz - Wiktionary"
        ["content"]=>
        string(173) "Like â€œHakuna matataâ€ in The Lion King, â€œ&lt;b>lulz</b>â€ is not just a word, but a philosophy.   [...] Anonymous has made campaigning sexy for the first time since 1968."
      }
      [2]=>
      object(stdClass)#5 (8) {
        ["GsearchResultClass"]=>
        string(10) "GwebSearch"
        ["unescapedUrl"]=>
        string(51) "http://knowyourmeme.com/memes/i-did-it-for-the-lulz"
        ["url"]=>
        string(51) "http://knowyourmeme.com/memes/i-did-it-for-the-lulz"
        ["visibleUrl"]=>
        string(16) "knowyourmeme.com"
        ["cacheUrl"]=>
        string(66) "http://www.google.com/search?q=cache:ITVRlkQkfckJ:knowyourmeme.com"
        ["title"]=>
        string(45) "I Did It for the <b>Lulz</b> | Know Your Meme"
        ["titleNoFormatting"]=>
        string(38) "I Did It for the Lulz | Know Your Meme"
        ["content"]=>
        string(173) "About I Did it for the <b>Lulz</b> (also known as 4 the <b>lulz</b>) is a popular catchphrase used   to express that one carried out a specific action for the sake of perso."
      }
      [3]=>
      object(stdClass)#6 (8) {
        ["GsearchResultClass"]=>
        string(10) "GwebSearch"
        ["unescapedUrl"]=>
        string(56) "http://www.internetslang.com/LULZ-meaning-definition.asp"
        ["url"]=>
        string(56) "http://www.internetslang.com/LULZ-meaning-definition.asp"
        ["visibleUrl"]=>
        string(21) "www.internetslang.com"
        ["cacheUrl"]=>
        string(71) "http://www.google.com/search?q=cache:UNXME3GmS-AJ:www.internetslang.com"
        ["title"]=>
        string(88) "What does <b>LULZ</b> mean? - <b>LULZ</b> Definition - Meaning of <b>LULZ</b> <b>...</b>"
        ["titleNoFormatting"]=>
        string(60) "What does LULZ mean? - LULZ Definition - Meaning of LULZ ..."
        ["content"]=>
        string(185) "This Internet Slang page is designed to explain what the meaning of <b>LULZ</b> is. The   slang word / acronym / abbreviation <b>LULZ</b> means... . Internet Slang. A list of <b>...</b>"
      }
    }
    ["cursor"]=>
    object(stdClass)#7 (6) {
      ["resultCount"]=>
      string(9) "1,080,000"
      ["pages"]=>
      array(8) {
        [0]=>
        object(stdClass)#8 (2) {
          ["start"]=>
          string(1) "0"
          ["label"]=>
          int(1)
        }
        [1]=>
        object(stdClass)#9 (2) {
          ["start"]=>
          string(1) "4"
          ["label"]=>
          int(2)
        }
        [2]=>
        object(stdClass)#10 (2) {
          ["start"]=>
          string(1) "8"
          ["label"]=>
          int(3)
        }
        [3]=>
        object(stdClass)#11 (2) {
          ["start"]=>
          string(2) "12"
          ["label"]=>
          int(4)
        }
        [4]=>
        object(stdClass)#12 (2) {
          ["start"]=>
          string(2) "16"
          ["label"]=>
          int(5)
        }
        [5]=>
        object(stdClass)#13 (2) {
          ["start"]=>
          string(2) "20"
          ["label"]=>
          int(6)
        }
        [6]=>
        object(stdClass)#14 (2) {
          ["start"]=>
          string(2) "24"
          ["label"]=>
          int(7)
        }
        [7]=>
        object(stdClass)#15 (2) {
          ["start"]=>
          string(2) "28"
          ["label"]=>
          int(8)
        }
      }
      ["estimatedResultCount"]=>
      string(7) "1080000"
      ["currentPageIndex"]=>
      int(0)
      ["moreResultsUrl"]=>
      string(76) "http://www.google.com/search?oe=utf8&ie=utf8&source=uds&start=0&hl=en&q=lulz"
      ["searchResultTime"]=>
      string(4) "0.23"
    }
  }
  ["responseDetails"]=>
  NULL
  ["responseStatus"]=>
  int(200)
} 
```

那么，关于如何读取结果数组的任何线索？（除了 没有尝试任何东西`$results["responseData"]`，因为我以前从未使用过 JSON。）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-02T18:55:38.060

使用箭头运算符访问对象的数据：

```
$results->responseData; 
```

或者，如果您更喜欢数组，可以使用 json_decode 的第二个参数将 json 数据作为数组返回，例如：

```
$results = json_decode($results, true); 
```

通常，您还可以使用以下方法将任何对象转换为数组：

```
$results = (array) $results; 
```

使用上述任何一种方法，您都可以使用 PHP 数组键语法访问您的数据：

```
$results['responseData']; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T18:59:41.907

要达到`responseData`你必须使用`$results->responseData`，因为`$results`是对象。如果您有对象，则可以使用`->`.

PS`responseData`也是对象，所以如果你需要访问`results`你必须使用`$results->responseData->results`等等......

# ios - iOS 访问沙箱验证收据 - 证书验证失败

> ID：13672563
> 
> 赞同：0
> 
> 时间：2012-12-02T18:52:59.630
> 
> 标签：ios, https, certificate, verify, receipt

在 PHP 中使用 curl，当我尝试连接到沙箱时，会得到以下输出：

*   即将 connect() 到 sandbox.itunes.apple.com 端口 443
*   正在尝试 17.152.19.192... * 已连接
*   连接到 sandbox.itunes.apple.com (17.152.19.192) 端口 443
*   成功设置证书验证位置：
*   CAfile：/etc/pki/tls/certs/ca-bundle.crt CApath：无
*   SSL证书问题，验证CA证书是否OK。详细信息：错误：14090086：SSL 例程：SSL3_GET_SERVER_CERTIFICATE：证书验证失败
*   关闭连接 #0

生产工作正常。

这是我可以解决的问题吗？即修复真实，不禁用 CURLOPT_SSL_VERIFYHOST 和/或 CURLOPT_SSL_VERIFYPEER

我检查了网络，除了禁用 SSL 设置之外似乎没有任何“解决方案”。我真的不想在完成的代码中这样做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T18:31:06.500

苹果的已知问题。更新证书时它们可能会延迟。对于沙盒访问，请关闭安全性，对于常规访问，请打开安全性。

# java - Java - 多用户应用程序中的同步

> ID：13672567
> 
> 赞同：1
> 
> 时间：2012-12-02T18:53:25.230
> 
> 标签：java, multithreading, synchronization

我是 Java 新手，并试图了解同步的工作原理。所以我创建了一个飞机预订系统，我能够模拟多个用户尝试进行预订并使用同步来获得正确的输出。

现在它起作用了，我在想它在现实世界中是如何起作用的。例如，假设应用程序是基于 Swing 构建的，这是一个多用户应用程序。为简单起见，我们假设只有两个平面“AAA”和“BBB”。该应用程序可以安装在每个售票柜台代理的计算机、机场的售货亭以及不同旅行社的计算机中，并且它们都访问相同的数据库。

在这种情况下，每个用户/计算机将有自己的 Reserve 类、Transaction 类和 Plane 类的实例。所以 Transaction 类中只有一个线程/请求，并且没有同步。

我的问题是，如何实际设计/实施像这样的预订系统这样的多用户应用程序，以便所有用户都访问 Transacion 类的一个实例，以便发生同步。您也可以将这个问题视为，我如何构建一个由不同玩家在不同计算机上玩的多用户游戏。另一个例子是当应用程序在 ATM 和柜员机上运行时进行存款、取款和转账的银行系统。

///////////////////////////

Reserve.java ---> 用户提出的每个请求的入口点

/////////////////////////

```
import java.io.IOException;

public class Reserve {

static int queryseatsavailableinx;
static int queryseatsavailableiny;

static
{
    seats s = null;
    try {
        s = new seats();
    } catch (IOException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    }
    try {
        queryseatsavailableinx = s.getseatsinplanex("AAA");
        queryseatsavailableiny = s.getseatsinplanex("BBB");
    } catch (IOException e) {
        e.printStackTrace();
    }
}

static final Plane x1 = new Plane("AAA", 001, queryseatsavailableinx );
static final Plane y1 = new Plane("BBB", 002, queryseatsavailableiny);
static final Transaction trans = new Transaction();

public static void main(String[] args) throws InterruptedException {

    Thread t1 = new Thread(new Runnable() {

        public void run() {
            trans.getPlaneInfo(x1);
        }
    });

    Thread t2 = new Thread(new Runnable() {

        public void run() {
            //trans.getPlaneInfo(x1);
            trans.reserveSeats(x1,3);
        }
    });

    Thread t3 = new Thread(new Runnable() {

        public void run() {
            //trans.getPlaneInfo(y1);
            trans.reserveSeats(y1,8);
        }
    });

    Thread t4 = new Thread(new Runnable() {

        public void run() {
            //trans.getPlaneInfo(x1);
            trans.reserveSeats(x1,2);
        }
    });

    t1.start();
    t2.start();
    t3.start();
    t4.start();

    t1.join();
    t2.join();
    t3.join();
    t4.join();
 }

} 
```

///////////////////////////

Transaction.java ---> 实际事务发生在这里

/////////////////////////

```
public class Transaction {

public void getPlaneInfo(Plane x){
    synchronized(this){
        int number =  x.getSeatCapacity();
        String planename=x.getPlaneName();
        System.out.printf("The number of seats in plane %s is %d\n",planename,number);
    }

}

public void reserveSeats(Plane x, int seatstobereserved) {
    synchronized(this){
    x.updateSeatCapacity(seatstobereserved);
    }
  }
 } 
```

///////////////////////////

Plane.java ---> 飞机信息

/////////////////////////

```
final public class Plane {

private String planename = null;
private int planeid = 0;
private int availableseatcapacity = 0;

Plane(String planename, int planeid, int seatcapacity) {
    this.planename = planename;
    this.planeid = planeid;
    this.availableseatcapacity = seatcapacity;
}

public String getPlaneName() {
    return planename;
}

public int getPlaneId() {
    return planeid;
}

public int getSeatCapacity() {
    return availableseatcapacity;
}

public void updateSeatCapacity(int reservedseats) {
    availableseatcapacity -= reservedseats;
    System.out.printf("\n%d Seats successfully reserved and remaining seats " +
            "in the plane %s are %d\n",reservedseats, planename,availableseatcapacity);

 }

} 
```

///////////////////////////

Seats.java ---> 为了模拟用户每次发出请求，从公共数据源/数据库中检索“可用座位数”。/////////////////////////

```
import java.io.DataInputStream;
import java.io.DataOutputStream;
import java.io.EOFException;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.IOException;

final public class seats {

seats() throws IOException {
    DataOutputStream di1 = new DataOutputStream(new FileOutputStream(
            "\\PlaneReservation\\bin\\a.bin"));
    DataOutputStream di2 = new DataOutputStream(new FileOutputStream(
            "\\PlaneReservation\\bin\\b.bin"));

    di1.writeInt(300);
    di2.writeInt(200);
    di1.flush();
    di2.flush();
    di1.close();
    di2.close();
}

public int getseatsinplanex(String s) throws IOException {
    if (s.equals("AAA")) {
        FileInputStream fis1 = new FileInputStream("\\PlaneReservation\\bin\\a.bin");
        DataInputStream dis1 = new DataInputStream(fis1);
        int number = 0;
        boolean eof = false;
        while (!eof) {
            try {
                number = dis1.readInt();
            //  System.out.println(number);
            } catch (EOFException eofx) {
                eof = true;
                dis1.close();
            }
        }
        return number;
    } else if (s.equals("BBB")) {
        FileInputStream fis2 = new FileInputStream("\\PlaneReservation\\bin\\b.bin");
        DataInputStream dis2 = new DataInputStream(fis2);
        int number = 0;
        boolean eof = false;
        while (!eof) {
            try {
                number = dis2.readInt();
                //System.out.println(number);
            } catch (EOFException eofx) {
                eof = true;
                dis2.close();
            }
        }
        return number;
    }
    return 0;
 }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T19:05:39.713

简单地说，您将使用所有`Transaction`s 方法`synchronized`：这将使您相互排斥。

然而，实际上，没有系统是这样设计的。服务器端应用程序没有建模为单个同步对象。相反，持久状态在支持 ACID 事务（原子、并发、隔离和持久）的关系数据库中维护，对象的等价`Transaction`物是不需要 Java 级别同步的无状态单例对象。这样的对象将被称为*服务 bean*. 它通常会在依赖注入容器（例如 Spring）中创建，并且会连接到一堆其他对象，例如 DAO（数据访问对象），这反过来又会实现与数据库。依赖注入容器可以很容易地以声明方式构建互连对象的复杂图。一个典型的企业应用程序，例如航空公司的预订系统，包含至少数十个服务 bean 甚至更多的 DAO，它们连接到各种后端系统。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T19:01:46.473

任何一个

a) 您依靠数据库中的存储过程（确保原子性）来执行操作。

b）您只有一个包含关键部分的实例（服务器）。客户端向它执行请求，服务器告诉是否有可用的座位（操作成功）或没有（操作失败）。

现实世界的操作将主要是 b，它可以使用 a。

# ios - 如何创建这个自定义的 UITableViewCell

> ID：13672571
> 
> 赞同：1
> 
> 时间：2012-12-02T18:53:56.877
> 
> 标签：ios, uitableview, ios6

我正在尝试创建这样的表格视图

![在此处输入图像描述](../Images/c26aace69d14ba59a44fc72e83f8a07e.png)

我不确定该怎么做。我正在继承 UITableViewCell 并为我的单元格设置一个单独的 .xib 文件。这似乎是最干净的方法。

问题是如何在侧面/顶部/底部制作边距，如何添加虚线和创建边框/半径/阴影。

**想法1：** 将整个单元格添加为图像，并将实际单元格设为灰色。应该可以工作，因为我的细胞都将具有相同的尺寸。（虽然不是那么有趣；））

**想法2：** 使单元格变灰，添加一个新的UIView，它是我图像中的实际框，并使视图变白，以编程方式为此添加边框、边框半径和阴影（我认为这是可能的？）。那么如何创建虚线呢？以编程方式还是仅使用图像？

如果这很重要，我正在使用 iOS6。

任何想法和意见表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T20:55:18.787

几个想法：

首先，我认为使用情节提要使子类化`UITableViewCell`更加容易。加载 NIB 无需代码。您在适当的位置设计子类单元格。

其次，我会考虑使用[Quartz 2D](https://developer.apple.com/library/ios/#documentation/GraphicsImaging/Conceptual/drawingwithquartz2d/Introduction/Introduction.html)以编程方式配置单元格的内边框。Quartz 2D 具有虚线、阴影等功能。

基本上，您可以通过编程方式调整您的用户界面。因此，将 添加`QuartzCore.framework`到您的项目中，并为单元格的内边框创建一个子类，可能类似于：

```
#import <QuartzCore/QuartzCore.h>

@interface CellInnerBorderView ()

@property (nonatomic, strong) CAShapeLayer *shapeLayer;

@end

@implementation CellInnerBorderView

// this adds shadow and border to the cell

- (void)configureBackgroundView
{
    self.layer.shadowColor = [UIColor blackColor].CGColor;
    self.layer.shadowRadius = 2.0;
    self.layer.shadowOpacity = 0.8;
    self.layer.shadowOffset = CGSizeMake(0.0, 2.0);

    self.layer.borderColor = [UIColor blackColor].CGColor;
    self.layer.borderWidth = 1.0;
}

// this adds a dashed line, half way down, inset by 5 points left and right

- (void)addDashedSeparator
{
    UIBezierPath *path = [UIBezierPath bezierPath];

    CGPoint startPoint = CGPointMake(5.0, self.frame.size.height / 2.0);
    CGPoint endPoint = CGPointMake(self.frame.size.width - 10.0, self.frame.size.height / 2.0);

    [path moveToPoint:startPoint];
    [path addLineToPoint:endPoint];

    if (self.shapeLayer)
        [self.shapeLayer removeFromSuperlayer];

    self.shapeLayer = [CAShapeLayer layer];
    self.shapeLayer.path = path.CGPath;
    self.shapeLayer.strokeColor = [UIColor blackColor].CGColor;
    self.shapeLayer.lineDashPattern = @[@1, @1];
    self.shapeLayer.fillColor = [UIColor blackColor].CGColor;
    self.shapeLayer.lineWidth = 1.0;
    self.shapeLayer.strokeStart = 0.0;
    self.shapeLayer.strokeEnd = 1.0;

    [self.layer addSublayer:self.shapeLayer];
}

- (void)layoutSubviews
{
    [super layoutSubviews];

    [self configureBackgroundView];
    [self addDashedSeparator];
}

@end 
```

然后，您可以在 Interface Builder 中添加一个表示`UITableViewCell`内部边框的视图，指定它的类`CellInnerBorderView`（或您选择的任何名称），然后您将获得此行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T19:23:39.500

您可能希望使用图像作为背景。我会为两个日期组件使用两个单独的 UILabel。您可以使标签背景透明，但如果它们不是必须的，那么您将获得更好的性能。边距只是标签的 x,y 坐标。

背景图像的替代方法是使用 Core Graphics，它的学习曲线非常陡峭。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T19:23:51.793

我就是这样做的。

使您的单元格的背景视图成为带有阴影的白色区域。
（该视图将是一个完整的视图层次结构，其根视图的背景颜色设置为清除，因此您可以设置边距）
您需要提供一个与形状和阴影相匹配的 selectedBackgroundView。
使用 clearColor 背景制作内容视图以将您的文本放在那里。

虚线，取决于它在选择单元格时的显示行为，可能适合将其放置在内容视图或背景视图中。

TableView 应设置为提供灰色背景。

这就是逻辑，我把实现的细节留给你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-02T19:24:20.957

单元的设计非常简单，但另一方面看起来仍然不错（我喜欢简单但有效的设计）。

出于这个原因，我认为无论哪种方式都可以完成。最高效和最简单的方法是预渲染图像（带有阴影和虚线），例如分配给自定义实现的`backgroundView`属性。`UITableViewCell`

如果您想完全在代码中（即以编程方式）绘制“背景”，请查看[我对 UITableView 中背景阴影的回答](https://stackoverflow.com/questions/6912904/grouped-uitableview-with-shadow/8706586#8706586)。

从我目前的角度来看，我会选择涉及在 Photoshop 中设计的预渲染图像的解决方案。

# java - 在 JOCL 中将 int 作为内核参数传递

> ID：13672575
> 
> 赞同：2
> 
> 时间：2012-12-02T18:54:32.610
> 
> 标签：java, opencl, jocl

所以我有一个看起来像这样的内核：

```
__kernel void my_kernel( __global const uchar *array, const uint number, __global const uchar *result) {
...
} 
```

我已经弄清楚如何通过创建缓冲区来传递数组（Java 中的字节数组）：

```
cl_mem memObjects[] = new cl_mem[2];
memObjects[0] = clCreateBuffer(context, 
    CL_MEM_READ_ONLY | CL_MEM_COPY_HOST_PTR,
    Sizeof.cl_uchar * dataSize, 
    Pointer.to(data), null
); 
```

然后设置它：

```
clSetKernelArg(my_kernel, 0, Sizeof.cl_mem, Pointer.to(memObjects[0])); 
```

我想不通的是如何设置数字参数......这是Java中的一个简单的**int ？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T21:09:10.980

你可以试试：

```
clSetKernelArg(my_kernel, 1, Sizeof.cl_uint, Pointer.to(new int[]{123})); 
```

# sql - 使用 DataAdapter 通过 DataGridView 更新自定义数据库

> ID：13672576
> 
> 赞同：0
> 
> 时间：2012-12-02T18:54:36.487
> 
> 标签：sql, vb.net, visual-studio-2010, datagridview

我的 DataGridView 控件是 DataSource 绑定到 TableAdapter 的。

该表包含每天的销售额：

```
Date         Sales
12/03/2012   100
12/04/2012   50
12/06/2012   120 
```

我希望 DataGrid 还显示没有使用空单元格进行销售的日子：

```
Date         Sales
12/03/2012   100
12/04/2012   50
12/05/2012   
12/06/2012   120 
```

如果我更改网格视图中的空单元格（零销售额），我希望将其作为新行写入表中，否则不应将其写入表中。DB 是本地访问文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T19:18:51.557

您最好的选择可能是使用 OnRowDataBound 并在逐行应用数据时对其进行操作。

[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.onrowdatabound.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.onrowdatabound.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T23:36:02.437

在这种情况下，我会以不同的方式处理数据检索和存储。

对于 Select 语句，我建议您构建一个 permenat 表，其中包含 10000 行和 2 列，一个从 1 到 10000 的整数，以及一个从过去足够远的日期开始的日期（1900 年 1 月 1 日） ? 2000 年 1 月 1 日？）并在 10000 天后。

然后，您可以在日期列上使用视图（查询）左连接从该表到您的表，并使用适当的开始和停止日期，这利用了 orf RDMS 的最佳属性 - 数据检索和匹配。不幸的是，此查询将不可更新。

反过来说，对于已经填充的行，您需要更新它们，但对于为空的行，您需要插入它们。

我会警告您，我没有尝试过这个，我不确定访问是否可以处理它，但是......如果您将 dbdataadaptor 的 Update 属性设置为运行插入（对于最初的空行）和更新（对于最初填充的行）按该顺序，那么你应该很甜蜜。

**更新**似乎我错了-查询可以直接在访问中更新-如果您编写以下查询

```
SELECT     IndexTable.dateIndex, Sales.Sales
FROM       IndexTable
           LEFT OUTER JOIN
           Sales ON IndexTable.dateIndex = Sales.SaleDate)
WHERE      (IndexTable.dateIndex >=
                      (SELECT     MIN(SaleDate) AS Expr1
                        FROM          Sales Sales_2)) AND 
           (IndexTable.dateIndex <=
                      (SELECT     MAX(SaleDate) AS Expr1
                        FROM          Sales Sales_1)) 
```

并绑定它，您所做的任何更改都应流回表中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T20:11:04.140

在这种情况下，我建议手动处理转换，例如，在 DataAdapter 和 DataGridView 之间创建一个代理类，这样它们就不会直接连接。这样 DataAdapter 将为您保存到数据库，您只需进行转换。

**编辑：**这里有一些想法可以帮助您入门。下面的代码将创建一个虚拟表，您可以将其用于测试目的 - 它根本不依赖于 DataAdapter：

```
Dim originalDataTable As New DataTable
With originalDataTable.Columns
  .Add("Date", GetType(DateTime))
  .Add("Sales", GetType(Integer))
End With
With originalDataTable.Rows
  .Add({#12/3/2012#, 100})
  .Add({#12/4/2012#, 50})
  .Add({#12/6/2012#, 120})
End With 
```

现在准备必要的结构，你将需要这个字典，所以最好声明一个类级别的变量 - 在你的情况下可能是一个表单：

```
Dim salesDictionary As New Dictionary(Of Date, DataRow)
For Each row As DataRow In originalDataTable.Rows
  salesDictionary.Add(row("Date"), row)
Next

Dim minDate As DateTime = salesDictionary.Keys.Min
Dim maxDate As DateTime = salesDictionary.Keys.Max
Dim newTable As DataTable = originalDataTable.Clone
Dim currentDate As DateTime = minDate
Do
  Dim row As DataRow = Nothing
  If salesDictionary.TryGetValue(currentDate, row) Then
    newTable.ImportRow(row)
  Else
    newTable.Rows.Add({currentDate, Convert.DBNull})
  End If
  currentDate = currentDate.AddDays(1)
Loop While currentDate <= maxDate 
```

将您的 DataGridView 绑定到`newTable`而不是`originalDataTable`，并在准备好提交更改时，手动更新相关记录，`originalDataTable`如下所示：

```
For Each row As DataRow In newTable.Rows
  Dim newSalesValue As Object = row("Sales")
  Dim originalRow As DataRow = Nothing
  If salesDictionary.TryGetValue(row("Date"), originalRow) Then
    If newSalesValue Is Convert.DBNull Then
      originalRow.Delete()
    Else
      originalRow("Sales") = row("Sales")
    End If
  ElseIf newSalesValue IsNot Convert.DBNull Then
    originalDataTable.ImportRow(row)
  End If
Next 
```

然后使用您的 DataAdapter 更新数据库。

# java - 带注释映射的 LocalSessionFactoryBean

> ID：13672580
> 
> 赞同：1
> 
> 时间：2012-12-02T18:54:55.147
> 
> 标签：java, spring, hibernate, orm

我在春天没有那么强壮。

我有一颗豆子

```
<bean id="sessionFactory"
    class="org.springframework.orm.hibernate3.LocalSessionFactoryBean">
    <property name="dataSource" ref="dataSource" />
    <property name="mappingResources">
        <list>
            <value>com/my/company/service/impl/entity/User.hbm.xml</value>
        </list>
    </property>
</bean> 
```

User.hbm.xml 引用了没有 Hibernate 映射类（*如 UserAddress.hbm.xml* *）*的类（ UserAddress ）。取而代之的是，*UserAddress*在它的类中有用于映射的**注释：**

 ****```
@Entity
@Table(name = "user_address")
public class UserAddress extends Base {
 ...
} 
```

所以问题是：如何将*UserAddress*添加到*sessionFactory* bean？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T17:08:59.880

好的，我找到了解决方案。而不是使用*org.springframework.orm.hibernate3.LocalSessionFactoryBean*它需要使用它的孩子：*org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean*****

# java - 卡在用 Java 解析 json 数据

> ID：13672584
> 
> 赞同：0
> 
> 时间：2012-12-02T18:55:06.120
> 
> 标签：java, android, json

我希望有人能帮助我。我正在尝试解析以下 json 文件：

```
{
"seminar":[{
    "categoryid": "1",
    "cpe": "13",
    "inventory": [
        "Discussion",
        "Value x",
        "Value y"
    ],
    "teachers": [{
        "titel": "Dipl.-Ing.",
        "company": "XY",
        "name": "Test",
        "id": "3"
    }]
}]
} 
```

我在解析教师数据时迷失了......

```
private static final String TAG_TEACHERS = "teachers";
private static final String TAG_TITLE = "title";

for(int i = 0; i < seminar.length(); i++){
JSONObject c = seminar.getJSONObject(i);

teachers = c.getJSONArray(TAG_TEACHERS);
for(int z = 0; z < teachers.length(); z++){                 
JSONObject d = teachers.getJSONObject(z);
String title  = d.getString(TAG_TITLE);
Log.d("JSONParsingActivity", title); 
```

我收到错误 System.err(1010): org.json.JSONException: org.json.JSONObject$1 类型的教师的 Value null 无法转换为 JSONArray。

我做错了什么？正如我从 JSON 文档中了解到的那样，教师是 JSON 数组而不是对象。有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T19:03:06.163

似乎您使用了错误的标签。教师 = c.getJSONArray(TAG_DOZENTEN);

不应该是 TAG_teachers 而不是 TAG_DOZENTEN 吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T19:03:36.303

这可能不是您特定问题的答案，但无论如何。您需要手动解析吗？为什么不使用映射器，例如 Jackson。

[http://jackson.codehaus.org/0.9.9/javadoc/org/codehaus/jackson/map/ObjectMapper.html](http://jackson.codehaus.org/0.9.9/javadoc/org/codehaus/jackson/map/ObjectMapper.html)

顺滑多了！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T19:12:31.920

You can parse given JSON String as:

```
JSONObject jObject  = new JSONObject("YOUR_JSON_STRING");

JSONArray jArrseminar = jObj.getJSONArray("seminar");
for(int i = 0; i < jArrseminar.length(); i++){
    JSONObject jobject = jArrseminar.getJSONObject(i);

    String strcategoryid=jobject.getString("categoryid");
    String strcpe=jobject.getString("cpe");

    JSONArray jArrinventory = jobject.getJSONArray("inventory");
    for(int j = 0; j < jArrinventory.length(); j++){

        // access all inventory value here
    }

    JSONArray jArrteachers = jobject.getJSONArray("teachers");
    for(int j = 0; j < jArrteachers.length(); j++){
        JSONObject jobjectteachers = jArrteachers.getJSONObject(i);

        // access all teachers value here
    String strtitel=jobjectteachers.getString("titel");
    String strcompany=jobjectteachers.getString("company");
    String strname=jobjectteachers.getString("name");
    String strid=jobjectteachers.getString("id");
    }
} 
```

# php - PHP - 遍历字母

> ID：13672588
> 
> 赞同：21
> 
> 时间：2012-12-02T18:55:26.640
> 
> 标签：php, loops

我正在尝试遍历字母而不是数字。

我正在尝试使用 chr 和等效数字来执行此操作，但似乎没有发生！

我想要四个字母循环。

所以 AAAA、AAAB、AAAC 等一直到 ZZZZ - 是的，我知道这可能需要一段时间才能执行！

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-12-02T19:01:18.583

为什么不制作一个字母数组，然后使用嵌套循环：

```
$letters = range('A', 'Z');

foreach ($letters as $one) {
  foreach ($letters as $two) {
    foreach ($letters as $three) {
      foreach ($letters as $four) {
        echo "$one$two$three$four";
      }
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-12-02T18:57:54.583

```
for( $x = "AAAA"; ; $x++) {
    echo $x."\n";
    if( $x == "ZZZZ") break;
} 
```

增加一个字母将在字母表中循环，类似于 Excel 中的列名。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-11T17:16:13.073

解决这个问题的另一种方法

```
$i = 'AAAA';
do {
  echo $i . "\n";
  $i++;
} while( $i !== 'AAAAA'); 
```

# sql-server - MS Access 对 SQL 数据流和性能的访问

> ID：13672592
> 
> 赞同：1
> 
> 时间：2012-12-02T18:55:49.567
> 
> 标签：sql-server, database, ms-access, database-connection

我在这里寻找一些启示，谁能告诉我当您使用 MS Access 查询通过 ODBC 链接的表（在 MS SQL Server 上）时实际发生了什么？我的意思是常规链接样式，而不是 Access ADP。

ODBC 驱动程序是否以某种方式从 Access 获取查询并执行转换并让 MSSQL 完成繁重的工作，或者 ODBC 是否仅促进数据交换，然后 Access 工作，然后数据恢复？

我相信确实如此，尽管我似乎永远无法找到明确的答案。这与在 Access 中使用 ADO 发送命令以仅发送/执行必要的任务而不拉下所有记录之类的东西形成对比。

我很可能对这个杂草很远。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T19:13:57.940

ODBC 驱动程序知道如何在 Access 和 SQL Server SQL 方言和数据类型之间进行转换。

所以，是的，它*可以*让服务器完成“繁重的工作”。但是您的查询也必须正确编写以允许这种情况发生。

`WHERE`一种类型的问题是在其子句中使用仅访问函数（没有 TSQL 等效函数）的查询。在这种情况下，Access 必须从服务器中提取每一行，以便评估函数的结果。

# python - numpy 的 tostring/fromstring --- 我需要指定什么来恢复数组

> ID：13672597
> 
> 赞同：7
> 
> 时间：2012-12-02T18:56:04.657
> 
> 标签：python, numpy, portability

给定一个`numpy`数组的原始二进制表示，明确恢复数组所需的完整元数据集是什么？

例如，

```
>>> np.fromstring( np.array([42]).tostring())
array([  2.07507571e-322]) 
```

这是意料之中的（至少事后看来）：这里我没有告诉`fromstring`期待整数，所以它与默认浮点数一起使用。

但在我看来，仅仅指定`dtype=np.float64`或类似可能就足够了，也可能不够。例如，

```
>>> a = np.array([42.])
>>> a.dtype
dtype('float64')
>>> a.dtype.byteorder
'=' 
```

[文档告诉我](http://docs.scipy.org/doc/numpy/reference/generated/numpy.dtype.byteorder.html)的意思是“本地订单”。意思是，它在大端和小端机器上会有不同的解释——或者我错过了一些简单的东西？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T23:20:33.550

`sys.byteorder`给出机器的字节顺序。

* * *

然而，正如@JFSebastain、@seberg 和@jorgeca 所建议的那样，`np.savez`这是一个更好的方法。[帮助文档字符串](http://docs.scipy.org/doc/numpy/reference/generated/numpy.savez.html)显示

```
import io
content = io.BytesIO()
np.savez(content, x=x, y=y)
content.seek(0) 
```

这意味着您可以将字符串保存`content`到 sqlite 数据库。

然后，当您从数据库中选择此字符串时，可以将其重新转换为 numpy 数组

```
data = np.load(content) 
```

# c# - C# - 连接始终打开 - 如何打开-关闭

> ID：13672602
> 
> 赞同：-3
> 
> 时间：2012-12-02T18:56:22.177
> 
> 标签：c#, connection

我需要一些关于申请的帮助。该应用程序 24/7 全天候运行，但如果与数据库的连接丢失，则该应用程序将不再工作 - 它只是停止。

看起来连接从未关闭，但我不知道为什么。

是否有可能使这个应用程序对离线数据库更加健壮？怎么办:o)

```
 using System;
    using System.Collections;
    using System.Collections.Generic;
    using System.ComponentModel;
    using System.Data;
    using System.Data.OleDb;
    using System.Drawing;
    using System.IO;
    using System.Text;
    using System.Windows.Forms;
    using System.Xml;
    using System.Windows;
    using System.Runtime;
    using System.Drawing.Printing;
    using cs_IniHandlerDevelop;

    namespace AlServ_Batch
    {

public partial class Batch_MainForm : Form
{

    public Batch_MainForm()
    {
        InitializeComponent();
    }

    private void Batch_MainForm_Load(object sender, EventArgs e)
    {
        UpdateStatusLight();           
    }

    private void UpdateStatusLight() {
        ConnectionState st = Connection.State;
        if (st == ConnectionState.Open
            || st == ConnectionState.Fetching
            || st == ConnectionState.Executing
            )
        {
            pictureBox1.Image = Properties.Resources.greenlight;
        }
        else if (st == ConnectionState.Closed || st == ConnectionState.Broken)
        {
            pictureBox1.Image = Properties.Resources.redlight;
        }
        else
        {
            pictureBox1.Image = Properties.Resources.yellowlight;
        }
    }

    public static string[] TextTypeName = new string[] { "", 
        "Portvagt/I normal arbejdstid", 
        "TDA/I normal arbejdstid underret", 
        "Portvagt/Uden for normal arbejdstid", 
        "TDA/Uden for normal arbejdstid", 
        "Procedure", 
        "Anlæg og følerplacering", 
        "Særlige forhold", 
        "Betjeningsområde", //***//
        "Anden instruktion (SOP/BPP)", 
        "System Alarm"}; //***//

    public static string[] TextFieldName = new string[] { "", 
        "workcall", "workinform", "offcall", "offinform", "procedur", 
        "plant", "turnoff", "position", "instruction", "restart" };

    private int timerLevel = 0;

    private void timer1_Tick(object sender, EventArgs e)
    {
        if (timerLevel == 0)
        {
            timerLevel++;
            try
            {
                UpdateStatusLight();
                ProcessBatch();
            }
            catch { }
            timerLevel--;
        }
    }

    private void ProcessBatch()
    {
        if (Connection.State == ConnectionState.Open)
        {
            {
                String sql = "select recid,action,parm1,parm2,parm3,parm4,targetfile from alarm.batch where recid>0 order by recid";
                OleDbCommand cmd = new System.Data.OleDb.OleDbCommand(sql, Connection);
                OleDbDataReader reader = cmd.ExecuteReader();
                if (reader.Read())
                {
                    int n = 0;
                    string recid_str = reader[n++].ToString();
                    string action = reader[n++].ToString();
                    string parm1 = reader[n++].ToString();
                    string parm2 = reader[n++].ToString();
                    string parm3 = reader[n++].ToString();
                    string parm4 = reader[n++].ToString();
                    string targetfile = reader[n++].ToString();

                    sql = "update alarm.batch set recid= -" + recid_str + " where recid=" + recid_str;
                    cmd = new System.Data.OleDb.OleDbCommand(sql, Connection);
                    cmd.ExecuteNonQuery();

                    if (ProcessBatchItem(action, parm1, parm2, parm3, parm4, targetfile))
                    {
                        sql = "delete from alarm.batch where recid= -" + recid_str;
                        cmd = new System.Data.OleDb.OleDbCommand(sql, Connection);
                        cmd.ExecuteNonQuery();
                    }
                }
                reader.Close();

            }
        }

    }

    private bool ProcessBatchItem(string action, string parm1, string parm2, string parm3, string parm4, string targetfile)
    {
        DateTime waituntil;
        bool res = true;
        bool liveAlarm = false;
        string fname = "";
        string fnameTemp;
        string targetPrinters = "";
        if (targetfile.ToString().Length>0) {
            fname = Path.Combine(Properties.Settings.Default.htmlprintpath, targetfile);
        }
        TextWriter tw;

        if (fname == "") fname = (new Random()).Next(int.MaxValue) + "__" + (new Random()).Next(int.MaxValue) + ".htm";

        fnameTemp = fname + "_";
        tw = new StreamWriter(fnameTemp);
        string htmlPrefix = "<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\">"
                            ;
        AlarmInstruction instruction = new AlarmInstruction();
        if (action == "print")
        {
            liveAlarm = (parm4=="ALARM");
            instruction = new AlarmInstruction(int.Parse(parm1), Connection);
            targetPrinters = instruction.TargetPrinters;
            WriteAlarmInstruction(tw, instruction, parm3+(targetPrinters.Length>0 ? " ("+targetPrinters+")":""), parm2.ToString()=="1", parm4, htmlPrefix+"<body charset=windows-1252>", "</body>");
            tw.Close();
        }
        else if (action == "printmany")
        {
            WriteAlarmInstructions(tw, parm1,parm3,parm4,htmlPrefix+"<body charset=windows-1252>", "</body>");
            liveAlarm = false; // (parm4 == "ALARM");
            tw.Close();
        }
        System.IO.File.Move(fnameTemp, fname);
        if (liveAlarm || true) {

            string ts = DateTime.Now.ToString();
            bool busy = true;

            StreamReader reader = new StreamReader(fname);
            string docText = reader.ReadToEnd();

            foreach (char ch in targetPrinters)
            {
                try
                {
                    int n = int.Parse(ch.ToString());
                    n = n == 0 ? 10 : n;
                    if (n > 0 && n <= 10)
                    {
                            HtmlPrint(docText, instruction.PrinterName(n));
                    }
                }
                catch
                {
                }
            }

            foreach (string mobile in instruction.SmsTarget.Split(new char[] { ';'}))
            {
                try
                {
                    string smsDir = instruction.Ini.GetValue("Directory", "Sms");
                    string footer = instruction.Ini.GetValue("Sms", "Footer");
                    fname = smsDir + "\\" + DateTime.Now.Ticks.ToString();
                    fnameTemp = fname + ".$$$";
                    tw = new StreamWriter(fnameTemp);
                    tw.WriteLine(mobile);
                    tw.WriteLine();
                    tw.WriteLine(parm3);
                    tw.WriteLine(instruction.UserAdr);
                    tw.WriteLine(instruction.Caption);
                    tw.WriteLine(footer);
                    tw.Close();
                    File.Move(fnameTemp, fname + ".txt");
                }
                catch (Exception e)
                {
                }
            }

        }
        waituntil = DateTime.Now.AddSeconds(2);
        while (DateTime.Now < waituntil) Application.DoEvents();
        return res;
    }

    private void HtmlPrint(string doctext, string printerName)
    {
        Batch_BrowserForm browserForm = new Batch_BrowserForm();
        browserForm.Show();
        browserForm.PrintHtml(doctext, printerName, this);
    }

    private string magic = "gkhjagdsfgkjhgkjhasdfyehecghgefuuweyuyjhweuyg1233498712vcgdqssedrrggggg";
    private string InstructionTextRow(int textId, string title, string caption, bool optional)
    {
        string res;
        NumberedText txt = new NumberedText(textId,Connection);
        if (txt.Text=="" && optional) {
            res = "";
        } else {
            res = "<tr><td valign=top>"
                + (title.ToString().Length > 0 ? "<b>" + xmlencode(title.Replace(" ", magic)).Replace(magic, "&nbsp;") + "</b><br/>" : "")
                + xmlencode(caption) + "</td><td valign=top width=1%>" + (txt.Id > 0 ? "<div width=100% style=\"border: gainsboro 1px solid\">" + txt.Id.ToString() + "</div>&nbsp;" : "") + "</td><td valign=top borderwidth=1 style=\"border: gainsboro 1px solid\" width=80%>" + xmlencode(txt.Text.ToString()).Replace("\n", "&nbsp;<br/>").Replace("\r", "") + "&nbsp;</td></tr>";
        }
        return res;
    }

    public string xmlencode(string s)
    {
        XmlDocument xmldoc = new XmlDocument();
        XmlNode xn = xmldoc.CreateElement("data");
        xn.InnerText = s;
        return xn.InnerXml;
    }

    private string FrameDivRight(string s)
    {
        return "<div halign=right style=\"border: lavender 1px solid\">" + xmlencode(s) + "</div>";
    }

    private string FramedText(string caption, string s)
    {
        return "<table width=100%><tr><td><i>" + xmlencode(caption.Replace(" ", magic)).Replace(magic, "&nbsp;") + "&nbsp;</td><td width=100% style=\"border: gray 1px solid\">" + (s.ToString().Length > 0 ? xmlencode(s) : "&nbsp;") + "</i></td></tr></table>";
    }

    private string CondFramedText(string caption, string s)
    {
        return (s.Length > 0) ? FramedText(caption, s) : "&nbsp;";
    }

    private string rowtext(AlarmInstruction instruction, int textidx, string title, bool optional) {
        int textId = instruction.textids[textidx];
        return InstructionTextRow(textId,title,TextTypeName[textidx],optional);
    }

    private void WriteAlarmInstructions(TextWriter textwriter, string whereclause, string timestamp, string qualification, string prefix, string postfix)
    {
        //String sql = "select id from alarm.point"+(String.IsNullOrEmpty(whereclause) ? "": " where "+whereclause)+" order by useradr";
        String sql = (new AlarmInstruction()).BasicSelect + (String.IsNullOrEmpty(whereclause) ? "" : " where " + whereclause) + " order by useradr";
        OleDbCommand cmd = new System.Data.OleDb.OleDbCommand(sql, Connection);
        OleDbDataReader reader = cmd.ExecuteReader();
        bool first = true;

        textwriter.Write(prefix);

        while (reader.Read())
        {
            try
            {
                AlarmInstruction instruction = new AlarmInstruction();
                instruction.InitFromReader(reader);

                WriteAlarmInstruction(textwriter, instruction, timestamp, false, qualification, "<div " + (first ? "" : "style=\"page-break-before:always\"") + "></div>", "");
                //textwriter.Write("s=" + s + "<br>");
                first = false;
            }
            catch
            {
            }
        }
        reader.Close();

        textwriter.Write(postfix);
    }

    private bool WriteAlarmInstruction(TextWriter textwriter, AlarmInstruction instruction, string timestamp, bool alarmTest, string qualification, string prefix, string postfix)
    {

        /*
          textwriter.Write(DateTime.Now.ToString() + " ALARM " + id.ToString() + "<br/>");
          return true
         */

        if (qualification != "ALARM") timestamp = "";

        string pageContents = "";
        pageContents += "<style>TD,P,I,INPUT,DIV{font-family:arial,helvetica; font-size:8pt}</style>";
        pageContents += "<style>B{font-family:arial,helvetica; font-size:10pt}</style>";
        pageContents += "<table cellspacing=3 width=100%><tr><td align=left><h1>"
                        +(alarmTest ? "Alarmafprøvning" : "Alarminstruks")
                        +"</h1></td><td align=right>" + xmlencode(instruction.SystemId + " ").Replace(" ", "&nbsp;") + xmlencode(timestamp) + "</td></tr></table>";
        pageContents += "<table width=100%>";

        pageContents += "<tr><td>" + FramedText("ID nr.", instruction.UserAdr.ToString()) + "</td><td valign=right>" + FramedText("Betegnelse", instruction.Caption) + "</td><td>" + FramedText("Prioritet ", instruction.Notif) + "</td></tr>";
        pageContents += "<tr><td>" + CondFramedText("$ Adr.", instruction.TechAdr.ToString()) + "</td><td valign=right>" + CondFramedText("Alarmgrænse høj", instruction.AlarmLimitHigh.ToString()) + "</td><td>" + CondFramedText("Enhed", instruction.Unit.ToString()) + "</td></tr>";
        pageContents += "<tr><td></td><td valign=right>" + CondFramedText("Alarmgrænse lav", instruction.AlarmLimitLow.ToString()) + "</td><td>" + CondFramedText("Tidsforsinkelse", instruction.TimeDelay.ToString()) + "</td></tr>";
        pageContents += "<tr><td></td><td valign=right>" + FramedText("Alarm GMP kritisk", instruction.GMPCritical.ToString()) + "</td><td>" + FramedText("Kræver alarmen afvigelse (NDP)", instruction.Deviation.ToString()) + "</td></tr>";
        pageContents += "</table>";
        pageContents += "<table cellspacing=3>";

        pageContents += "<tr height=2px><td colspan=3><hr></td></tr>";
        pageContents += "<tr><td>"
                        + FramedText("Bruger afd.",instruction.UserDept)
                        +"</td><td colspan=2>"
                            +"<table><tr><td>"
                            + FramedText("Ansvarlig",instruction.Responsible)
                            +"</td><td>"
                            + FramedText("TDA driftsgruppe",instruction.OperationsGroup)                            
                            +"</td></tr></table>"
                        +"</td></tr>";
        pageContents += "<tr><td colspan=3 height=2px><hr></td></tr>";

        pageContents += rowtext(instruction, 8, "", false);
        pageContents += rowtext(instruction, 6, "", false);
        pageContents += "<tr height=2px><td colspan=3><hr></td></tr>";
        pageContents += rowtext(instruction, 1, "Portvagt aktion/tilkald", false);
        pageContents += rowtext(instruction, 3, "", true);
        pageContents += "<tr height=2px><td colspan=3><hr></td></tr>";
        pageContents += rowtext(instruction, 7, "Aktion TDA", false);
        pageContents += rowtext(instruction, 5, "", false);
        pageContents += rowtext(instruction, 9, "", false);
        pageContents += rowtext(instruction, 2, "Underret bruger", false);
        pageContents += rowtext(instruction, 4, "", true);
        pageContents += rowtext(instruction, 10, "", true);

        if (instruction.UserUpdate.Length > 0)
        {
            pageContents += "<tr><td colspan=2></td><td valign=right><i>" + xmlencode("Instruks opdateret "+ instruction.UserUpdate) + "</i></td></tr>";
        }

        pageContents += "</table>";

        textwriter.Write(prefix+"<table height=100% width=100%><tr><td valign=top>" + pageContents + "</td></tr></table>"+postfix);

        return true;
    }

    public String ConnectionString
    {
        get { return Properties.Settings.Default.ConnectionString; }
    }

    private OleDbConnection con_;
    public OleDbConnection Connection
    {
        get
        {
            if (con_ == null)
            {
                OleDbConnection connection = new OleDbConnection(ConnectionString);
                try
                {
                    connection.Open();
                }
                catch
                {
                }
                con_ = connection;
            }
            return con_;
        }
    }

    class AlarmInstruction
    {
        public int Id;
        public string SystemId;
        public string UserAdr;
        public string Caption;
        public string UserDept;
        public string Responsible;
        public string OperationsGroup;
        public string Notif;
        public string NotifMaster;
        public string TechAdr;
        public string AlarmLimitHigh;
        public string AlarmLimitLow;
        public string Unit;
        public string TimeDelay;
        public string GMPCritical;
        public string Deviation;
        public string UserUpdate;
        public string Recipient;

        public int[] textids;

        public DateTime NotifDateTime = new DateTime(0);

        private string _targetPrinters = null;
        public string TargetPrinters
        {
            get {
                try
                {
                    if (_targetPrinters == null)
                    {
                        if (NotifDateTime.CompareTo(new DateTime(0))==0)
                        {
                            NotifDateTime = DateTime.Now;
                        }
                        _targetPrinters = "";
                    }
                    string sql = "select targets,weekday,hour from notifdetail where notifmaster=" + NotifMaster+" order by weekday,hour";
                    OleDbCommand cmd = new System.Data.OleDb.OleDbCommand(sql, Connection);
                    OleDbDataReader reader = cmd.ExecuteReader();
                    DateTime now = NotifDateTime;
                    DayOfWeek wd = now.DayOfWeek;
                    int weekday = (wd==DayOfWeek.Sunday ? 7 : 1+(wd-DayOfWeek.Monday));
                    while (reader.Read())
                    {
                        int fromweekday = int.Parse(reader["weekday"].ToString());
                        DateTime fromhour = reader.GetDateTime(reader.GetOrdinal("hour"));

                        if (fromweekday<weekday  || (fromweekday==weekday && (fromhour.TimeOfDay<=now.TimeOfDay) )) 
                        {
                            _targetPrinters = reader["targets"].ToString();
                        }
                    }
                    reader.Close();
                }
                catch
                {
                }
                return _targetPrinters;
            }
        }

        private string _smsTarget = null;
        public string SmsTarget
        {
            get {
                if (_smsTarget == null)
                {
                    if (TargetPrinters.Contains("S") && Recipient.Length>0) {
                        try
                        {
                            string sql = "select mobile from recipients where id="+  (new MySqlLayer()).SqlLit(Recipient);
                            OleDbCommand cmd = new System.Data.OleDb.OleDbCommand(sql, Connection);
                            OleDbDataReader reader = cmd.ExecuteReader();
                            while (reader.Read())
                            {
                                _smsTarget = reader["mobile"].ToString();
                            }
                            reader.Close();

                        } 
                        catch 
                        {
                        }
                    }
                }
                if (_smsTarget == null)
                {
                    _smsTarget = "";
                }
                return _smsTarget.Trim(); 
            }
        }

        private IniStructure _ini = null;
        public IniStructure Ini
        {
            get {
                if (_ini == null)
                {
                    _ini = IniStructure.ReadIni("C:\\alarm\\alarm.ini");
                }
                return _ini; 
            }
        }

        public string PrinterName(int n)
        {
            string pname = "";
            try
            {
                pname = Ini.GetValue("Printers", "printer" + n.ToString());
            }
            catch
            {
            }
            if (pname.Length==0) throw new Exception("Printer selection failed. Printer #"+n.ToString()+", name \""+pname+"\"");
            return pname;
        }

        public void InitFromReader(OleDbDataReader reader)
        {
            Id = int.Parse(reader["id"].ToString());
            SystemId = reader["systemid"].ToString();
            UserAdr = reader["useradr"].ToString();
            Caption = reader["descr"].ToString();
            Notif = reader["notifnam"].ToString();
            NotifMaster = reader["notifmaster"].ToString();
            TechAdr = reader["techadr"].ToString();
            Unit = reader["unit"].ToString();
            TimeDelay = reader["timedelay"].ToString();
            AlarmLimitHigh = reader["alarmlimithigh"].ToString();
            AlarmLimitLow = reader["alarmlimitlow"].ToString();
            GMPCritical = reader["gmpcritical"].ToString() == "1" ? "Ja" : "Nej";
            Deviation = reader["deviation"].ToString() == "1" ? "Ja" : "Nej";
            UserUpdate = reader["user_update"].ToString();
            UserDept = reader["dept"].ToString();
            Responsible = reader["userid"].ToString();
            OperationsGroup = reader["operationsgroup"].ToString();
            Recipient = reader["recipient"].ToString();

            int n = TextTypeName.GetUpperBound(0);
            textids = new int[n + 1];

            for (int i = 1; i <= n; i++)
            {
                try
                {
                    textids[i] = int.Parse(reader[TextFieldName[i]].ToString());
                }
                catch
                {
                    textids[i] = 0;
                };
            }

        }

        public String BasicSelect {
            get {
                return "select *,(select usernam from notifmaster where id= point.notifmaster) notifnam,(select id from alarmsystem) systemid  from alarm.point";
            }
        }

        public AlarmInstruction()
            : base()
        {
        }

        OleDbConnection Connection = null;

        public AlarmInstruction(int id, OleDbConnection connection)
            : base()
        {
            String sql = BasicSelect + " where id=" + id.ToString();
            try
            {
                Connection = connection;
                OleDbCommand cmd = new System.Data.OleDb.OleDbCommand(sql, connection);
                OleDbDataReader reader = cmd.ExecuteReader();
                if (reader.Read())
                {
                    InitFromReader(reader);
                }
                reader.Close();
            }
            catch { }

        }
    }

    private void button2_Click(object sender, EventArgs e)
    {
        SQL_performer performer = new SQL_performer();
        performer.Connection = Connection;
        performer.Show();
    }

}

class NumberedText
{
    public NumberedText(int textId, OleDbConnection connection) 
        : base() 
    {
        String sql = "select txt,typ from alarm.txt where id="+textId.ToString();
        OleDbCommand cmd = new System.Data.OleDb.OleDbCommand(sql, connection);
        try
        {
            if (textId > 0)
            {
                OleDbDataReader reader = cmd.ExecuteReader();
                if (reader.Read())
                {
                    int n = 0;
                    _Id = textId;
                    _Text = reader[n++].ToString();
                    _Typ = int.Parse(reader[n++].ToString());
                }
                reader.Close();
            }
        }
        catch
        {
            _Error = true;
        }

        if (_Text == null) _Text = "";
        if (_Typ == null) _Typ = 0;
    }

    private DateTime _TimeStamp;
    public DateTime TimeStamp
    {
        get { return _TimeStamp; }
        set { _TimeStamp = value; }
    }

    private bool _Error;
    public bool Error
    {
        get { return _Error; }
    }

    private int _Id;
    public int Id
    {
        get { return _Id; }
    }

    private string _Text;
    public string Text
    {
        get { return _Text; }
    }

    private int _Typ;
    public int Typ
    {
        get { return _Typ; }
    }

}

public class MySqlLayer
{
    public virtual String SqlLit(Object obj)
    {
        if (obj == null)
        {
            return "null";
        }
        else if (obj is string)
        {
            return (String.IsNullOrEmpty(obj as string) ? "null" : ("'" + (obj as string).Replace("'", "''") + "'"));
        }
        else if (obj is int)
        {
            return (obj.ToString());
        }
        else if (obj is DateTime)
        {
            DateTime d = (DateTime)obj;
            return String.Format("TO_DATE('{0:0000}-{1:00}-{2:00} {3:00}:{4:00}','YYYY-MM-DD HH24:MI')", d.Year, d.Month, d.Day, d.Hour, d.Minute);
        }
        else
        {
            return "null";
        }
    }
}

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T19:24:23.077

I think your problem is that you should close your connection ASAP.

Here is how I would write the ProcessBatch method:

```
private void ProcessBatch()
{
    using (OleDbConnection connection = new OleDbConnmection(ConnectionString))
    {
        connection.Open();
        {
            String sql = "select recid,action,parm1,parm2,parm3,parm4,targetfile from alarm.batch where recid>0 order by recid";
            OleDbCommand cmd = new OleDbCommand(sql, connection);
            using (OleDbDataReader reader = cmd.ExecuteReader())
            {
                if (reader.Read())
                {
                    int n = 0;
                    string recid_str = reader[n++].ToString();
                    string action = reader[n++].ToString();
                    string parm1 = reader[n++].ToString();
                    string parm2 = reader[n++].ToString();
                    string parm3 = reader[n++].ToString();
                    string parm4 = reader[n++].ToString();
                    string targetfile = reader[n++].ToString();

                    sql = "update alarm.batch set recid= -" + recid_str + " where recid=" + recid_str;
                    cmd = new OleDbCommand(sql, connection);
                    cmd.ExecuteNonQuery();

                    if (ProcessBatchItem(action, parm1, parm2, parm3, parm4, targetfile))
                    {
                        sql = "delete from alarm.batch where recid= -" + recid_str;
                        cmd = new OleDbCommand(sql, connection);
                        cmd.ExecuteNonQuery();
                    }
                }
            }
        }
    }
} 
```

Note that the using-statement automatically closes the connection when the ProcessBatch is finished. If E.g. ProcessBatchItem requires a connection you should hand over the connection as a parameter.

You might also consider using a OleDbTransation.

In your application you should remove the Connection-property.

Good luck with your application.

# html - 将文本对齐到 div 的中间

> ID：13672605
> 
> 赞同：2
> 
> 时间：2012-12-02T18:56:33.487
> 
> 标签：html, css

基本上，我试图将“查看全文（0 条评论）”文本与下面链接页面上深蓝色 div 中的箭头中间对齐。

我试过行高，但不起作用。有任何想法吗？

[http://www.prxa.info/](http://www.prxa.info/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T19:03:36.107

这取决于您想要获得的花哨，我会在这里使用相对/绝对定位，所以这可以解决问题

```
.articles-bottom { position: relative; }

.articles-bottom a { left: 30px; position: absolute; top: 7px; } 
```

那应该这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T19:04:03.177

尝试将以下内容应用于您的 a 标签：

```
.articles-bottom a
{    
   vertical-align: middle;
   line-height: 2em;
   float: left; 
} 
```

和`img`里面`div`

```
img{
    float:left;
} 
```

希望这可以帮助。

# ios - 退出前保存最后一个数组

> ID：13672606
> 
> 赞同：0
> 
> 时间：2012-12-02T18:56:40.937
> 
> 标签：ios, xcode, arrays, image, uiscrollview

我有一个应用程序，它有 UIScrollView 和 Paging .. 它有数组和图像.. 我想要做的是保存上次应用程序运行时查看的数组，当我再次打开应用程序时，它应该显示最后一个数组已查看。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T19:02:12.167

将您的数组保存代码绑定到`UIApplicationDidEnterBackgroundNotification`通知，然后将您的加载代码绑定到`UIApplicationDidBecomeActiveNotification`通知。

您还可以在 UIApplicationDelegate 中使用适当的协议方法。

...重新阅读问题——您是否正在寻求有关如何保存某些内容或如何在正确的时间触发保存的帮助？

*编辑*

看起来你已经在学习 Ray Wenderlich 的教程了，但我只会为我刚开始时发现非常简单的一个插件做一个插件：http: [//cocoadevcentral.com/](http://cocoadevcentral.com/)

在将内容保存到磁盘方面，您有几个选项，其中最简单的可能是使用另一个用户指出的 NSUserDefaults。它是一个字典（键：值）系统，因此您可以通过您选择的名称存储您的数组/图像/pathToTheImage 等，即

"LastImageViewed" : UIImage <--(object) 然后以相同的名称加载它。

```
 // MyAppDelegate.m
 - (void)applicationDidEnterBackground:(UIApplication *)application {

      // Save
      [[NSUserDefaults standardUserDefaults] setObject:YOUR_ARRAY_GOES_HERE forKey:@"A_NAME_YOU_CHOOSE"];
      [[NSUserDefaults standardUserDefaults] synchronize];

 }

 ...

 - (void)applicationWillEnterForeground:(UIApplication *)application {

      // Load
      NSArray *firstArrayToOpen = [[NSUserDefaults standardUserDefaults] objectForKey:@"THE_NAME_YOU_CHOSE"];

      // Do your thing...
 } 
```

这是 NSUserDefaults 类的参考：[https ://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSUserDefaults_Class/Reference/Reference.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSUserDefaults_Class/Reference/Reference.html)

以及上述通知和方法参考：http: [//developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIApplicationDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intf/UIApplicationDelegate](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIApplicationDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intf/UIApplicationDelegate)

这有帮助吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T19:01:22.573

您需要使用 保存此信息`NSUserDefaults`。这是一个关于如何使用它的教程： http: [//epiicdream.wordpress.com/2012/02/27/ios-sdk-savingretrieving-data-using-nsuserdefaults/](http://epiicdream.wordpress.com/2012/02/27/ios-sdk-savingretrieving-data-using-nsuserdefaults/)

# database - 如何将图片从数据库显示到图片库？

> ID：13672607
> 
> 赞同：-1
> 
> 时间：2012-12-02T18:56:41.633
> 
> 标签：database, imagebutton

我有一个页面gallery.aspx。

在此页面中有 3 个图像按钮。

如何将我的数据库连接到此图像按钮以显示图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T09:51:30.033

> var con = new SqlConnection(settings.ConnectionString);
> 
> var cmd = new SqlCommand("Select Photo from Members where Member_No = " + ID, con);
> 
> con.Open();
> 
> Image img = (byte[])cmd.ExecuteScalar();
> 
> imageButton.image = img;

# java - 如何为可运行的 jar 设置默认字符编码？

> ID：13672608
> 
> 赞同：0
> 
> 时间：2012-12-02T18:56:42.390
> 
> 标签：java, character-encoding, executable-jar

我有一个非常大的 Java 程序，需要默认为 UTF-8 编码。当我在 Eclipse 中运行它时，我可以在运行配置中将默认字符编码更改为 UTF-8，但是每当我将代码导出为可运行的 jar 时，编码就不同了，从而使文本不可读。编译jar时有没有办法设置默认编码？我的程序从 20 多个文件中读取，因此每次读取或写入时都指定字符编码效率低下（尽管如果没有其他方法也可以）。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T19:09:40.197

恐怕在编译时不可能这样做。您需要`file.encoding`在启动 JVM 时设置系统属性，或更改代码以指定字符集。尽管可能很痛苦，但我会推荐第二种选择；依赖默认字符集很少是一个好主意。

另请参阅： [设置默认 Java 字符编码？](https://stackoverflow.com/questions/361975/setting-the-default-java-character-encoding)

# python - 每次发生某些事情时，如何让 python 程序检查一个值？

> ID：13672612
> 
> 赞同：1
> 
> 时间：2012-12-02T18:57:13.620
> 
> 标签：python, text

我正在用 python 制作游戏，它有一个健康系统。`game_state['health']`我可以在不使用的情况下让程序检查我一直拥有的变化`if game_state['health'] = =< 0`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T20:18:47.307

一定要阅读一些教育材料、教程等。

基本方法可能类似于以下内容：

```
class MyCharacter(object):
    """Simple Character Class"""

    def __init__(self, health):
        self._health = health

    @property
    def health(self):
        return self._health

    @health.setter
    def health(self, new_value):
        self._health = new_value
        if new_value <= 0:
            print "What's that strange white light...?"
            raise EndGameEvent("Character is dead... :(")

    def takes_damage(self, damage):
        print "Ouch... that really hurt!"
        self.health = self.health - damage 
```

您的主游戏线程将接收 EndGameEvent 并对其采取适当的行动。我猜这仍然使用您的检查，但是您不必每次要检查健康状态时都显式编写一行代码。

# sql - 如何使用存储过程选择 xml 元素属性？

> ID：13672624
> 
> 赞同：2
> 
> 时间：2012-12-02T18:58:55.107
> 
> 标签：sql, xml, tsql, stored-procedures

好的，我现在有这个存储过程的代码。

```
ALTER PROC [dbo].[Readxml]
@xmlparam XML
AS
BEGIN
SET NOCOUNT ON
DECLARE @CustomerXml AS XML
SET @CustomerXml = @xmlparam

INSERT INTO Custtable.dbo.SPCustomer
(
    CustomerId,
    CustomerName
)
SELECT 
    Customer.attribute.value('CustomerId[1]', 'nvarchar(255)') AS CustomerId,
    Customer.attribute.value('Name[1]', 'nvarchar(255)') AS CustomerName
FROM 
    @xmlparam.nodes('Customers/Customer') AS Customer(attribute)
END 
```

我的 XML 看起来像这样（简化）。

```
<Customers>
  <Customer CustomerId="94" Name="name1" />
  <Customer CustomerId="95" Name="name2" />
  <Customer CustomerId="96" Name="name3" />
</Customers> 
```

使用我的代码现在我无法获取属性值，据我所知，我正在尝试获取`<Customer>`标签内的元素，称为`CustomerId`and `Name`，它们不存在。

从表中选择所有行时，在过程完成后，我得到所有行但具有 NULL 值。

我的问题是，如何从 XML 中获取属性？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T19:04:30.340

你需要这个：

```
SELECT 
    Customer.attribute.value('@CustomerId', 'nvarchar(255)') AS CustomerId,
    Customer.attribute.value('@Name', 'nvarchar(255)') AS CustomerName
FROM 
    @xmlparam.nodes('Customers/Customer') AS Customer(attribute) 
```

要获取属性，请使用前导`@`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T19:05:03.180

```
ALTER PROC [dbo].[Readxml]
@xmlparam XML
AS
BEGIN
SET NOCOUNT ON
DECLARE @CustomerXml AS XML
SET @CustomerXml = @xmlparam

INSERT INTO Custtable.dbo.SPCustomer
(
    CustomerId,
    CustomerName
)
SELECT Customer.attribute.value('@CustomerId', 'BIGINT') AS CustomerId,
    Customer.attribute.value('@Name', 'nvarchar(255)') AS CustomerName
FROM @xmlparam.nodes('Customers/Customer') AS Customer(attribute)

END 
```

# delphi - 如何确定套接字缓冲区中是否接收到所有数据？

> ID：13672626
> 
> 赞同：2
> 
> 时间：2012-12-02T18:59:15.807
> 
> 标签：delphi, sockets

是否可以确定`TServerSocket` **接收缓冲区**是否包含所有数据？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-02T19:04:46.830

这就是协议的情况。

*   可以是定义的结束标记。例如 HTTP 中的 CR LF CR LF
*   包含请求长度的标头。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-02T20:03:21.610

无法确定 OnRead 是否已完成读取，因为根据定义没有结束。这意味着您不应该简单地发送没有特殊信息的二进制数据。例如，您可以先发送字节数（例如，4 字节无符号整数），然后再发送您希望发送的字节数。

在接收方，您将首先读取 4 个字节，现在您知道可以预期多少字节。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T03:36:55.647

如果您打算从服务器上的客户端读取数据，则使用缓冲区字符串（每个客户端套接字）和解析该字符串的循环是一种典型的方法。例如，我假设您创建一个对象来包装每个服务器/客户端套接字。在此对象中，创建一个名为`Buffer`. 每当您从客户端接收数据时，将新数据附加到此字符串的末尾。然后，一个单独的进程（一个线程）可以解析这个字符串并检查一个完整的数据包。然而，读取数据包大小的方法完全取决于您。

不能保证服务器会按照发送的顺序在接收到数据时触发事件。客户端可能向服务器发送 4 个数据包，服务器只为所有数据触发一个事件，或者客户端可能发送 1 个数据包，服务器为部分数据触发两个事件。您有责任不断读取传入的数据以确保完整性，具体取决于套接字通信的性质。

alzaimar 的答案是你需要做的。假设一个完整的数据包是这样的字符串：

`This is some string.`

在解析这样的字符串时，使用分隔符是有风险的。因此，取而代之的是，取该字符串的大小并将其添加到您的数据包上，在该大小和数据之间仅使用一个分隔符。由于上面的字符串有 20 个字符长，实际的数据包应该是这样的：

`20:This is some string.`

...其中冒号 (:) 是大小和数据之间的分隔符。首先，您检查以确保分隔符存在。如果是这样，则将所有内容复制到它上面。如果它是一个有效数字，则意味着您需要从缓冲区中读取那么多字符。接下来，检查缓冲区是否有那么多可用数据。如果是这样，则从缓冲区中获取该数据。请记住仅在必要时从缓冲区中删除数据 - 如果您愿意，我可以提供更详细的代码示例。

# python-2.7 - 为什么我在 Python 中的负切片不起作用？

> ID：13672627
> 
> 赞同：3
> 
> 时间：2012-12-02T18:59:32.703
> 
> 标签：python-2.7

我是 Python 新手，并且已经阅读了几篇关于切片的教程，但是我在空闲时运行的示例似乎并没有返回我期望的结果。例如，我已将以下列表分配给变量`a`

`a=[0,1,2,3,4,5,6,7,8,9]`

现在我理解切片是`[number I want to include:number up to and don't want to include:step]`

因此，如果我这样做`a[1]`，我会期待`1`。如果我这样做`a[1:3]`，那就是`1,2`

现在，如果我这样做`a[-1]`，我会得到`9`但如果我这样做`a[-1:-5]`，我什么也得不到。我所看到的只是`[]`。这是为什么？我希望看到`9,8,7,6`

我在 Windows 7 Professional 上运行 Python 2.7

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T19:02:56.277

在这种情况下，您需要添加`step`参数才能获得所需的内容：

```
In [1]: a=[0,1,2,3,4,5,6,7,8,9]

In [2]: a[-1:-5:-1]
Out[2]: [9, 8, 7, 6] 
```

如果你想节省更多空间，你可以省略第一个参数：

```
In [3]: a[:-5:-1]
Out[3]: [9, 8, 7, 6] 
```

Python 处理“负”切片的方式是将`len`对象的 then 加到负数上。因此，当您说 In 时`a[-1:-5]`，它基本上是在说`a[(-1+10):(-5+10)]`, 等于`a[9:5]`，并且由于`start`/`end`指的是两者之间的所有字符（在列表中“向前移动”），它不会返回任何内容（因此您的空白列表）。您可以通过执行以下操作来看到这一点：

```
In [5]: a[-5:9]
Out[5]: [5, 6, 7, 8]

In [6]: a[5:9]
Out[6]: [5, 6, 7, 8] 
```

你得到与负指数和正指数相同的结果，因为`-5 + 10 = 5`.

提供 -1`step`参数告诉它从第一个元素开始，但从开始位置向后移动。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T19:18:28.890

我认为最好将拼接视为不是数字本身，而是指向索引的指针。

```
 +---+---+---+---+---+---+---+---+---+---+
                      | 0 | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 |
                      +---+---+---+---+---+---+---+---+---+---+
                        0   1   2   3   4   5   6   7   8   9
                      -10  -9  -8  -7  -6  -5  -4  -3  -2  -1 
```

因此，当您切片时`a[-1:-5]`，您从索引 9 开始向下到索引 5。该切片中没有任何内容。如果你这样做`a[-5:-1]`，那么你将从索引 5 开始到索引 9。

RocketDonkey 是对的——如果你愿意`[9, 8, 7, 6]`，你需要后退一步。

# java - 在 Java 类中将图像转换为字节数组

> ID：13672628
> 
> 赞同：0
> 
> 时间：2012-12-02T18:59:39.597
> 
> 标签：java, javascript, android, cordova

我正在开发一个需要将图像转换为字节数组的 Android 应用程序。我知道它不能用 JavaScript 来完成。我想也许我可以使用 Java 类，这可能吗？如果是，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T19:03:36.717

我相信您正在寻找的是 Android Phonegap 应用程序的插件。查看此文档，看看它是否符合您的需求。

[http://docs.phonegap.com/en/2.2.0/guide_plugin-development_android_index.md.html](http://docs.phonegap.com/en/2.2.0/guide_plugin-development_android_index.md.html)

编辑：也许更好的解决方案是使用 FileReader API。您可以将文件读取为 base64 编码字符串并将其分解为您需要的字节数组。

[http://docs.phonegap.com/en/2.2.0/cordova_file_file.md.html#FileReader](http://docs.phonegap.com/en/2.2.0/cordova_file_file.md.html#FileReader)

# solr - Solr 字段中多个命中的单独 Solr 结果？

> ID：13672630
> 
> 赞同：0
> 
> 时间：2012-12-02T18:59:54.883
> 
> 标签：solr

假设我在 Solr 中有一个名为“OCR_text”的字段。如果给定 <doc> 的 OCR_text 字段包含类似“这是 foo bar，我的 foo bar 为其他人找到 foo bar”之类的字符串，是否可以从 Solr 为每个“实例”提供单独且唯一的响应来自同一 <doc> 的 OCR_text 中的 foo"？

目前，如果我要搜索“OCR_text:foo”，我只会得到一个响应，即使“foo”包含在多次中。我有一种方法可以迭代该单一响应中的“foo”实例并以这种方式创建唯一结果，但是查询的整体“numFound”并不反映在给定 <doc 中找到“foo”的*总*次数>。

我有一种感觉，这要么是构建我不熟悉的 Solr 查询的一种非常简单的方法，要么是一个从根本上更复杂的问题。任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T23:49:31.170

“numFound”部分只显示文档的数量，而不是单个字段或单个文档中的命中总数。要查找总点击量，您需要使用 TermVectorComponnent，[此处](http://lucidworks.lucidimagination.com/display/solr/The+Term+Vector+Component)和[此处](http://wiki.apache.org/solr/TermVectorComponent)对此进行了简要说明。您还可以挖掘[恶意列表](http://lucene.472066.n3.nabble.com/Solr-User-f472068.html)以获取更多详细信息和示例实现。

# c++ - 将 C++ 联合结构转换为 VB6

> ID：13672632
> 
> 赞同：1
> 
> 时间：2012-12-02T19:00:14.223
> 
> 标签：c++, vb6, struct, unions

我的 C++ 应用程序中有这个结构：

```
struct textField
{
        //0
        union nameField
        {
                void* ptr;
                char cstring[16];
        } text;
        //16
        uint8_t textLength;
        //17
        char unknown1[3];
        //20
        uint8_t fieldType;
        //21
        char unknown2[3];
        //24
        uint32_t unknown3;
        //28
}; 
```

我知道在 VB6 中，它看起来像这样：

```
Private Type textField        ' 0
    cstring(0 To 15) As Byte  ' 16
    textLength       As Byte  ' 17
    unknown1(0 To 2) As Byte  ' 20
    fieldType        As Byte  ' 21
    unknown2(0 To 2) As Byte  ' 24
    unknown3         As Long  ' 28
End Type 
```

但是结构中的联合呢？如何实现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T19:07:35.750

最简单的方法是使用变体类型——它可以包含任何其他类型。

请注意，可能没有直接映射`void *`到 VB，因此您需要研究联合的使用方式，而不仅仅是快速转换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T19:32:08.263

使用[`LSET`](http://msdn.microsoft.com/en-us/library/aa266163%28v=vs.60%29.aspx)命令。

它不是根据结构声明的，而是在声明对象实例时声明的。

[示例](http://www.devx.com/tips/Tip/14418)：

```
Private Type MyType1
    x as Integer
    y as Integer
    z as Integer
    w as Integer
End Type

Private Type MyType2
    a as Long
    b as Long
End Type

Private Sub Form_Load()
    Dim t1 as MyType1
    Dim t2 as MyType2
    t1.x = 0
    t1.y = 0
    t1.z = -1
    t1.w = -1

    LSet t2 = t1
    .... 
```

这与两种类型之间的未命名联合具有相同的效果。

# r - R数据框列表：无法导出或重塑

> ID：13672634
> 
> 赞同：-1
> 
> 时间：2012-12-02T19:00:32.767
> 
> 标签：r, list, dataframe

我有一堆 .csv 文件位于`path`我导入到`datalist`使用以下代码命名的数据框列表中的路径中：

```
require(gsubfn) ## to use strapply

datalist <- list()
files <- list.files(path)

for(file in files) {
    stem <- gsub("\\.csv$","",file)
    datalist[[stem]] <- data.frame(read.delim(file, sep = ";", header=TRUE))
    month <- strapply(stem,"^([^_]*).*$")
    year <- strapply(stem,"^[^_]*_([^_]*)_.*$")
    datalist[[stem]]$Month <- month
    datalist[[stem]]$Year <- year
} 
```

（您可能已经注意到，我也使用两个正则表达式来获取数据所指的月份和年份，但这应该不会导致我以后遇到的问题。）

然后我将所有数据帧绑定到`merged`使用包中的`rbind`函数命名的单个数据帧中`plyr`：

```
require(plyr) ## to use rbind

merged <- rbind.fill(datalist) 
```

我的问题是我最终得到的数据框似乎是一个奇怪的列表数据框：确实，如果我尝试将其导出为 .csv 格式，R 会抛出以下错误：

```
write.csv(merged,'merged.csv')

Error in write.table(x, file, nrow(x), p, rnames, sep, eol, na, dec, as.integer(quote),: 
unimplemented type 'list' in 'EncodeElement' 
```

`melt`如果我尝试使用包中的and`cast`函数来重塑数据框，则会向我抛出另一个类似的错误`reshape`：

```
require(reshape) ## to use melt and cast
molten <- melt(merged)

cast <- cast(molten, ...formula...)

Error in order(var1 = c(1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, : 
unimplemented type 'list' in 'listgreater' 
```

那么，如何从数据框列表中获取正常的数据框？`unimplemented type 'list' in 'EncodeElement'`我认为问题出在“导入”过程中，因为即使我尝试仅将列表中的一个数据帧导出到 .csv，也会出现同样的错误`datalist`。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-11-30T19:18:07.183

[我刚刚在http://www.r-bloggers.com/concatenating-a-list-of-data-frames/](http://www.r-bloggers.com/concatenating-a-list-of-data-frames/)遇到了这个问题的新解决方案。该[`data.table`](https://cran.r-project.org/web/packages/data.table/index.html%20%60data.table%60)包包含一个名为的函数，该函数`rbindlist()`将（引用自[文档](https://cran.r-project.org/web/packages/data.table/data.table.pdf%20the%20docs)）获取“包含 data.table、data.frame 或列表对象的列表”并将它们绑定到一个单独的 data.frame 中，按位置或按名称匹配列。看起来你可以得到你想要的东西

```
install.packages("data.table")
library(data.table)
merged<-rbindlist(datalist,use.names=TRUE) 
```

`rbindlist()`显然是用 C 而不是 R 编写的，根据上面链接的 r-bloggers.com 文章，它比 plyr 库具有明显的速度优势。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T19:05:22.063

只要列表中的所有 data.frames 具有相同的标题，您就可以使用 plyr。

```
library(plyr) 
dat <- ldply(your_list) 
```

例如：

```
dat <- data.frame(A=1:10,B=rnorm(10))
alistofdataframes <- list()
alistofdataframes$group1 <- dat
alistofdataframes$group2 <- dat
ldply(alistofdataframes) 
```

# apache - a2ensite 和 a2dissite 的目的

> ID：13672635
> 
> 赞同：3
> 
> 时间：2012-12-02T19:00:36.040
> 
> 标签：apache, ubuntu

我刚刚设置了我的第一个 Ubuntu 开发环境，想知道为什么有 2 个目录，分别称为 sites-available 和 sites-enabled。经过一番阅读，我偶然发现了英亩 a2ensite 和 a2dissite。另外我读到我必须将我所有的虚拟主机内容放入可用的站点中，然后通过该命令启用它。

好的，测试了它，它可以工作。我习惯了 mac，我刚刚创建了一个虚拟主机，并且该站点已“启用”。从来没有像禁用和启用站点这样的事情。我读过，这很好，因为您可以在网站很快被破坏时禁用它......

但我不明白。整件事的目的是什么？它应该如何帮助我？我为什么要使用它？如果它创建链接的每个站点都有类似 maintenanc.html 的东西，那可能会有意义，但由于它不做这样的事情，只是创建/删除符号链接，我真的不明白它目的。

如果我禁用一个站点，该站点并没有真正关闭，它只是服务器默认虚拟主机。由于 apache 如何处理整个事情的原则，这实际上是有道理的。

那么，它是什么，我没有看到？:)

# python - 如何将元组字典转换为列表字典（Python）？

> ID：13672639
> 
> 赞同：1
> 
> 时间：2012-12-02T19:00:48.533
> 
> 标签：python, list, dictionary, tuples

我是 Python 新手（和一般编程），但我有一个字典，其中的键是元组，我想用与列表相同的键创建一个新字典。

这就是我的意思：

我有：

```
d = {("apple", "banana", "pear", "pineapple"):24, 
("banana", "pineapple", "apple", "pear"):17,
("pineapple", "pear", "banana", "apple"):10,
("apple", "pineapple", "banana", "pear"):16} 
```

我想：

```
new_d = {["apple", "banana", "pear", "pineapple"]:24, 
["banana", "pineapple", "apple", "pear"]:17, 
["pineapple", "pear", "banana", "apple"]:10, 
["apple", "pineapple", "banana", "pear"]:16} 
```

有没有一种简单的方法可以使用 for 循环和 if 语句来做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-02T19:02:21.293

列表不可散列，因此不能是字典中的键。

为什么你希望你的键是列表？如果您当前正在调用一个函数

```
expect_iterable_of_lists(d.keys()) 
```

, 你可以简单地结合`map`和`list`:

```
expect_iterable_of_lists(map(list, d.keys())) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T19:39:47.173

正如其他人所指出的，将列表用作字典键可能不是一个好主意。

如果这是您真正需要的，那么向列表添加哈希性并不难：

```
>>> class List(list):
        def __hash__(self):
            return hash(tuple(self))

>>> d = {("apple", "banana", "pear", "pineapple"):24, 
("banana", "pineapple", "apple", "pear"):17,
("pineapple", "pear", "banana", "apple"):10,
("apple", "pineapple", "banana", "pear"):16}

>>> new_d = {List(k):v for k, v in d.items()}
>>> new_d
{['banana', 'pineapple', 'apple', 'pear']: 17,
 ['apple', 'banana', 'pear', 'pineapple']: 24, 
 ['pineapple', 'pear', 'banana', 'apple']: 10, 
 ['apple', 'pineapple', 'banana', 'pear']: 16} 
```

此代码将实现您使用列表键的目标，只要您不改变列表（基于哈希表的字典不适用于可变键），它就可以正常工作。如果确实需要改变键，则需要一个不依赖散列的替代字典实现（例如[关联列表](https://en.wikipedia.org/wiki/Association_list)）。

# iphone - iPhone 上 MySQL 的最佳开发实践

> ID：13672641
> 
> 赞同：0
> 
> 时间：2012-12-02T19:01:19.033
> 
> 标签：iphone, sql, xcode, cross-platform

嘿嘿，

我正在尝试开发一个跨平台的应用程序，它应该管理不同的 SQL 数据。我现在的问题是：

开发 iPhone 应用程序的最佳实践是什么，用户登录并且只显示属于他的那些数据？特别是安全方面对我来说很有趣。

提前致谢

菲尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T19:12:00.727

您正在寻找的是分离 iOS 应用程序和在您的服务器上运行的 Web 服务。它不会让应用程序直接与 SQL 数据库通信，而是仅与您的 Web 服务通信。您的 Web 服务现在决定对客户端可见的内容。

对于服务器和客户端之间的通信，我将基于 HTTP（参见[REST 教程](http://blog.mugunthkumar.com/articles/restful-api-server-doing-it-the-right-way-part-1/)），就像几乎所有服务（包括 Facebook、Twitter、...）一样。

# eclipse - 在 Eclipse 中构建路径异常

> ID：13672642
> 
> 赞同：1
> 
> 时间：2012-12-02T19:01:19.330
> 
> 标签：eclipse, libgdx

我有一个在 eclipse 中构建的 android 项目，我将一个 java 项目设置为构建路径上的所需项目。这里奇怪的问题是，当我运行 android 项目时，我发现我进入了一个不属于我在构建路径上指定为所需项目的 java 项目的类，而是一个具有相同名称但位于一个不同的项目，我从来没有链接到 android 项目。我完全被这个问题弄糊涂了，完全没有任何线索。eclipse如何在没有构建路径的情况下找到并运行一个类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T19:20:26.637

```
public static void main(String[] args) {
            URLClassLoader classLoader = (URLClassLoader)Main.class.getClassLoader();
            System.out.println(Arrays.toString(classLoader.getURLs()));
    } 
```

Use this code in Main class to find out from which locations ClassLoader is picking the dependency.

# tomcat - HTTP 访问 EC2 上的文件系统

> ID：13672645
> 
> 赞同：1
> 
> 时间：2012-12-02T19:01:33.213
> 
> 标签：tomcat, grails, amazon-web-services

也许我做错了（我是服务器编程的新手），在这种情况下请告诉我。

我有一个使用 Tomcat 6 在 Amazon Elastic Beanstalk 上运行的 grails 应用程序（2.1.1），并且我已经设置了 restful api 来将 JSON 发送到客户端，其中包括图像文件的 URL。我已经 ssh 进入服务器以将图像放置在适当的目录中。请注意，这些是由用户添加和删除的动态图像，而不是静态系统图像。

但是当客户端尝试连接到图像 URL 时，服务器会响应 404 错误。

我是否正确假设因为我收到 404 错误（而不是连接被拒绝等）这不是安全组问题？

我是否收到 404 错误，因为 . . .

1.  URL 不知何故不正确，
2.  我的亚马逊设置不知何故缺乏，
3.  我的 Tomcat 设置有些欠缺，
4.  或者我的应用程序以某种方式拒绝连接？

也就是为什么我能访问“http://myenvironment.elasticbeanstalk.com//login”

但不是“http://myenvironment.elasticbeanstalk.com//media/images/myImage.jpg”

或“http://myenvironment.elasticbeanstalk.com/media/images/myImage.jpg”

我知道这不是很多细节，但我觉得我真正的问题是对问题的高层次理解。

基本上，是什么控制访问文件系统的权限？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T22:40:07.567

你在使用 grails 资源插件吗？默认情况下，它是启用的，并且会将所有内容映射`/images/*`到 url path `/static`。

因此，默认情况下，如果您想获取图像，您应该定位：

```
http://localhost:8080/project-name/static/images/grails_logo.png 
```

这是在**ResourcesGrailsPlugin.groovy**中配置的：

```
static DEFAULT_URI_PREFIX = 'static'
static DEFAULT_ADHOC_PATTERNS = ["/images/*", "*.css", "*.js"].asImmutable() 
```

# mysql - 插入/更新查询中的多个 MySQL 子查询的原子性？

> ID：13672655
> 
> 赞同：2
> 
> 时间：2012-12-02T19:02:43.360
> 
> 标签：mysql, sql

我打算编写以下查询：

```
INSERT INTO summary (user_id, total_points, count_operations)
SELECT 
   15 AS user_id,
   (SELECT SUM(points) FROM operations WHERE user_id = 15) AS total_points,
   (SELECT COUNT(*) FROM operations WHERE user_id = 15) AS count_operations
ON DUPLICATE KEY UPDATE
total_points = VALUES(total_points), 
count_operations = VALUES(count_operations); 
```

整个语句是原子的吗？即 MySQL（使用 MyISAM 引擎）是否在内部锁定了`operations`表？

MySQL 是否有可能顺序执行两个子查询，这可能会导致在某些情况下（如果在该时间范围内添加新操作）`total_points`and`count_operations`会不一致？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T19:18:28.503

MyISAM 仍然使用[表级锁](http://dev.mysql.com/doc/refman/5.6/en/internal-locking.html)。

> 这些存储引擎通过始终在查询开始时一次请求所有需要的锁并始终以相同的顺序锁定表来避免死锁。权衡是这种策略降低了并发性；其他想要修改表的会话必须等到当前 DML 语句完成。

因此，其他想要更新您正在使用的表的进程必须等到您的事务完成。如果它对表“操作”设置读锁，所有后续的写锁都会进入队列并等待。

# vb.net - VB 2010 和 app.config 文件和配置文件已被另一个程序更改

> ID：13672657
> 
> 赞同：3
> 
> 时间：2012-12-02T19:02:56.537
> 
> 标签：vb.net, app-config

我是 Visual Studio 的初学者，我正在处理 app.config 文件。我只想问你一个小提示：使用 Windows 窗体在 app.config 文件中多次更新值键的最佳方法是什么。到目前为止，我已经尝试过：

就在 Form1 关闭之前，我用下面的代码更新了一个值：

```
Dim config As Configuration = ConfigurationManager.OpenExeConfiguration(Application.StartupPath & "\MyProyect.exe")
Dim aps As AppSettingsSection = config.AppSettings 
aps.Settings.Item("SomeKey").Value = 5 'just an example
config.Save(ConfigurationSaveMode.Modified) 
```

然后下一个表单打开：

```
Form1.Hide()
Form2.Show() 
```

但是，当我尝试在新的 Form2 中的同一个键中再次保存一个值时，它会抛出一个错误，并且程序会冻结：

**配置文件已被另一个程序更改。（C:\Users\RH\Documents\Visual Studio 2010\Projects\MyProyect\MyProyect\bin\Debug\MyProyect.exe.config）**

真的我一直在寻找解决方案，但似乎我是唯一一个遇到这种问题的人。就像我会说我只是一个初学者。你能给我一个建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T20:04:50.903

您是否尝试保存一些用户可配置的值？在这种情况下，最好的情况是使用设置文件，它类似于 app.config 文件，但在应用程序运行期间可更新。实际上，您在 *.settings 文件中输入的值会插入到 app.config 文件中，但读取和更新的过程由应用程序管理。

我有一个允许用户从文件夹中读取文件的应用程序，我将最后一个文件夹位置保存在设置文件中。下次应用程序运行时，我可以为该特定用户再次读取该值。

以下是 C# 中的一些示例代码：

```
//read the property on load    
if (Properties.Settings.Default["FileLocation"] != null 
    && !string.IsNullOrWhiteSpace(Properties.Settings.Default["FileLocation"].ToString()))
{
    DirectoryInfo dirInfo 
        = new DirectoryInfo(Properties.Settings.Default["FileLocation"].ToString());

    if (dirInfo.Exists)
        dlg.InitialDirectory = dirInfo.FullName;
}

//code removed for clarity
//....

//save on exit from method
FileInfo fi = new FileInfo(dlg.FileName);
Properties.Settings.Default["FileLocation"] = fi.DirectoryName;
Properties.Settings.Default.Save(); 
```

我把它翻译成 VB.Net，但我提前道歉，因为我有一段时间没有做过 VB.Net，所以你可能想仔细检查一下。:-D

```
'read the property on load    
If (Properties.Settings.Default["FileLocation"] IsNot Nothing _
    AndAlso Not string.IsNullOrWhiteSpace(Properties.Settings.Default["FileLocation"].ToString())) Then
    Dim dirInfo as DirectoryInfo _
        = new DirectoryInfo(Properties.Settings.Default["FileLocation"].ToString())

    if (dirInfo.Exists) Then
        dlg.InitialDirectory = dirInfo.FullName
    End If
End If

'code removed for clarity
'....

'save on exit from method
Dim fi as FileInfo = new FileInfo(dlg.FileName)
Properties.Settings.Default["FileLocation"] = fi.DirectoryName
Properties.Settings.Default.Save() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T19:43:39.047

我认为您的问题是这样的，如果您检查该方法的[文档](http://msdn.microsoft.com/en-us/library/ms134087.aspx)`config.Save`，则有此声明，

> 如果自创建此配置对象以来配置文件已更改，则会发生运行时错误。

`Save`更改文件，因此这使我相信您只能为每个`Configuration`对象实例调用一次 save 方法。所以，这让我相信，

```
Dim config As Configuration = ConfigurationManager.OpenExeConfiguration(Application.StartupPath & "\MyProyect.exe")
Dim aps As AppSettingsSection = config.AppSettings 
aps.Settings.Item("SomeKey").Value = 5 'just an example
config.Save(ConfigurationSaveMode.Modified)
aps.Settings.Item("SomeKey").Value = 15 'just an example
config.Save(ConfigurationSaveMode.Modified) 
```

第二次保存会失败，但是接下来，

```
Dim config As Configuration = ConfigurationManager.OpenExeConfiguration(Application.StartupPath & "\MyProyect.exe")
Dim aps As AppSettingsSection = config.AppSettings 
aps.Settings.Item("SomeKey").Value = 5 'just an example
config.Save(ConfigurationSaveMode.Modified)
'reopen
config = ConfigurationManager.OpenExeConfiguration(Application.StartupPath & "\MyProyect.exe")
aps = config.AppSettings 
aps.Settings.Item("SomeKey").Value = 15 'just an example
config.Save(ConfigurationSaveMode.Modified) 
```

会成功的。

# php - 将内容推送到数组

> ID：13672658
> 
> 赞同：0
> 
> 时间：2012-12-02T19:03:04.867
> 
> 标签：php

在下面的代码中，`print_r`while 循环中的第一个打印不同的故事内容。我遇到的问题是第二条语句从数组中`print_r`一遍又一遍地产生完全相同的故事。`$stories`

```
$stories = array();

while($row = mysql_fetch_array($result)){
  $story->name      = $row['Name'];
  ...
  $story->date      = $row['Date'];

  print_r($story); //for testing
  array_push ( $stories , $story );
}

print_r($stories); 
```

编辑：有人要求提供命令行输出，但这是一个托管帐户。如果上述情况不清楚：

从内部循环：

```
(
    [id] => 9370
    [name] => Five Below, Inc.
    ...
)
stdClass Object
(    
    [id] => 9362
    [name] => Peregrine Pharmaceuticals Inc.
    ...
)   
stdClass Object
(
    [id] => 9363
    [name] => Mitel Networks Corporation
)
...
stdClass Object
(
    [id] => 9370
    [name] => Five Below, Inc.
    ...
) 
```

循环后：

```
Array
(
    [0] => stdClass Object
        (
            [id] => 9370
            [name] => Five Below, Inc.
            ...
        )
    [1] => stdClass Object
        (
            [id] => 9370
            [name] => Five Below, Inc.
        ) 
    [2] => stdClass Object
        (
            [id] => 9370
            [name] => Five Below, Inc.
        ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T19:22:33.137

看来问题出在`$story`. 我做了测试用例代码：

```
$rows = array(
         array('Name'=>'1', 'Date'=>'21'),
         array('Name'=>'4', 'Date'=>'24'),
);

$stories = array();

foreach( $rows as $row ) {
  $story->name      = $row['Name'];
  $story->date      = $row['Date'];

  array_push( $stories , $story );
}

print_r($stories); 
```

生产

```
[0] => stdClass Object
    (
        [name] => 4
        [date] => 24
    )
[1] => stdClass Object
    (
        [name] => 4
        [date] => 24
    ) 
```

这是错误的。但是`unset($story);`每次添加并创建新对象，解决了这个问题：

```
$rows = array(
         array('Name'=>'1', 'Date'=>'21'),
         array('Name'=>'4', 'Date'=>'24'),
);

$stories = array();

foreach( $rows as $row ) {
  unset( $story );   // replace with whatever code you use to create new object
  $story->name      = $row['Name'];
  $story->date      = $row['Date'];

  array_push( $stories , $story );
}

print_r($stories); 
```

给出正确的：

```
[0] => stdClass Object
    (
        [name] => 1
        [date] => 21
    )

[1] => stdClass Object
    (
        [name] => 4
        [date] => 24
    ) 
```

# drupal - 删除drupal评论下的分页链接

> ID：13672662
> 
> 赞同：0
> 
> 时间：2012-12-02T19:03:29.263
> 
> 标签：drupal, drupal-theming

我在 node--mytype.tpl.php 中嵌入了一个视图，但视图中的分页链接也出现在评论下。

我到处寻找，但找不到改变这一点的方法。

有人知道怎么做这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T14:02:07.323

回答我自己的问题：

来自视图寻呼机的“寻呼机 ID”与评论寻呼机冲突。我将视图的“寻呼机 id”更改为 1，它起作用了。

谢谢你的帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T03:14:28.973

嵌入视图不应影响评论显示。您是否尝试过查看您的内容类型编辑页面并查看*每页评论*设置？

# ruby-on-rails - 使用 Json 文件数据渲染视图

> ID：13672663
> 
> 赞同：0
> 
> 时间：2012-12-02T19:03:29.360
> 
> 标签：ruby-on-rails, ruby-on-rails-3, json

我知道在这方面已经发布了类似的问题。但我需要这些答案的衍生物，因为我是 RoR 的新手。
我有一个 json 文件，其中包含一些数据，我想用它执行以下操作：

1.  我想使用内容，
2.  从视图中将其渲染为表格。

以下是json文件的内容

```
[
  {
    "id": "A",
    "description": "a_description_one"
    "value": some_alphanumeric_string
  },
  {
    "id": "B",
    "description": "b_description_one"
    "value": some_alphanumeric_string
  },
  {
    "id": "C",
    "description": "c_description_one"
    "value": some_alphanumeric_string
  }
] 
```

我在以下代码中的控制器中获取此文件的内容：

```
def index
@data = File.read(Rails.root.join("public", "newjson.json"))
render :json => @data
end 
```

但是当我尝试在视图内的视图中使用此 JSON 对象 @data 时，我要么得到可下载的 json 文件，要么得到错误。我不确定如何将 @data 对象呈现为视图中的表。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T21:08:50.080

```
render :json => @data 
```

将您的 @data 呈现为 json 并返回它。删除此行并尝试正确解析您的 json 文件（请参阅[how-do-i-parse-json-with-ruby-on-rails](https://stackoverflow.com/questions/1826727/how-do-i-parse-json-with-ruby-on-rails)），然后根据需要修改您的视图文件。

# c - C 中带有套接字的 POSIX 线程

> ID：13672670
> 
> 赞同：0
> 
> 时间：2012-12-02T19:04:14.993
> 
> 标签：c, multithreading, sockets, posix

```
#include "cs241.c"

#define THREAD_COUNT 10

int list_s;
int connections[THREAD_COUNT];
char space[THREAD_COUNT];

int done = 0;

pthread_mutex_t muxlock = PTHREAD_MUTEX_INITIALIZER;

int *numbers;
int numbers_count;

void *listener(void *arg) {
    int n = *(int *) arg;

    FILE *f = fdopen(connections[n], "r");
    if (f == NULL)
        printf("Could not open file\n");
    char *line = NULL;
    size_t *len = malloc(sizeof(int));
    while(getline(&line, len, f) != -1) {
        printf("%s", line);
        if (strcmp("END", line) == 0) {
                            pthread_mutex_lock(&muxlock);
            done = 1;
            pthread_mutex_unlock(&muxlock);                     
        }
    }

    space[n] = 't';
    fclose(f);
    free(len);
    close(connections[n]);
    return NULL;
}

void initialize() {
    int n;
    for (n = 0; n < THREAD_COUNT; n++) {
        space[n] = 't';
    }
}

int check() {
    int index;
    for (index = 0; index < THREAD_COUNT; index++) {
        if (space[index] == 't') {
            space[index] = 'f';
            return index;
        }
    }
    return 0;
}   

int main(int argc, char *argv[]) {
    int port = 0;
    int binder;
    int lis;
    int i = 0;
    int *j = malloc(sizeof(int));
    initialize();
    pthread_t threads[THREAD_COUNT];

    if ((argc != 2) || (sscanf(argv[1], "%d", &port) != 1)) {
        fprintf(stderr, "Usage: %s [PORT]\n", argv[0]);
        exit(1);
    }

    if (port < 1024) {
        fprintf(stderr, "Port must be greater than 1024\n");
        exit(1);
    }

    // set the initial conditions for the numbers array.
    numbers = malloc(sizeof(int));
    numbers_count = 0;

    struct sockaddr_in servaddr; // socket address structure
    // set all bytes in socket address structure to zero, and fill in the relevant data members
    memset(&servaddr, 0, sizeof(servaddr));
    servaddr.sin_family = AF_INET;
    servaddr.sin_addr.s_addr = htonl(INADDR_ANY);
    servaddr.sin_port = htons(port);

    list_s = socket(AF_INET, SOCK_STREAM, 0);
    if (list_s < 0) {
        printf("Could not create socket\n");
        exit(EXIT_FAILURE);
    }
    binder = bind(list_s, (struct sockaddr *) &servaddr, sizeof(servaddr));
    if (binder < 0) {
        printf("Could not bind socket\n");
        exit(EXIT_FAILURE);
    }
    lis = listen(list_s, SOMAXCONN);
    if (lis < 0) {
        printf("Could not listen on socket\n");
        exit(EXIT_FAILURE);
    }
    SET_NON_BLOCKING(list_s);
    while (done != 1) {
        connections[i] = accept(list_s, NULL, NULL);
        if (connections[i] < 0) {
            if ((errno == EAGAIN) || (errno == EWOULDBLOCK))
                continue;
            printf("Could not accept connection\n");
            exit(EXIT_FAILURE);
        }
        i = check();
        *j = i;
                    SET_BLOCKING(list_s);
        pthread_create(&threads[i], NULL, listener, j);
    }

    // Verify the array.
    //verify(numbers, numbers_count);

    free(j);
    close(list_s);

    exit(EXIT_SUCCESS);

} 
```

所以我的main()中有一个while循环，当'done' = 1时应该退出。这是由listener()设置的，当它接收到'END'时。第一个问题是，当我在第一次迭代中发送“END”时，while 循环不会退出，只有在发送了另一个“END”之后。

我在另一个文件中有两个宏 SET_NON_BLOCKING 和 SET_BLOCKING 用于解除阻塞和阻塞套接字，因此如果没有连接，它会等待连接。下一个问题是当我不使用这些宏时，listener() 中的 getline() 无法读取从流中输出的所有内容。当我使用它们时，它根本无法打开流。

我认为一些问题在于将“j”传递给线程，因为当第二个线程启动时，它会在第一个线程可以读取之前覆盖“j”。但是，我已经在它上面呆了几天，却无处可去。任何帮助将不胜感激。谢谢！

另外我想问一下我的套接字阻塞和线程锁定是否在正确的位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T19:22:37.333

您可能必须发送 END 两次，因为您的主线程在`accept()`生成侦听器线程后立即阻塞。由于它被阻止`accept()`它看不到`done == 1`。

您可以通过保持非阻塞模式来解决此问题。如果你这样做，你可能想睡觉以避免在一个紧密的循环中旋转。另一种选择是发送一个信号来唤醒接受，使其设置 EINTR。

就将连接索引传递给侦听器线程而言，您可能是正确的，线程之间存在覆盖值的竞争。由于 an`int`需要的字节数与 a 相同或更少`void *`，因此您实际上可以`int`直接传递 a 。例如：

```
pthread_create(&threads[i], NULL, listener, (void *)i); 
```

然后在监听器中：

```
int n = (int)arg; 
```

这是一种黑客行为。更完整的解决方案是使用 malloc 为每个线程分配一个单独的参数结构。侦听器线程将负责释放参数。

```
struct params *p = malloc(sizeof(struct params));
p.index = i;

pthread_create(&threads[i], NULL, listener, p); 
```

然后在监听器中：

```
struct params *p = args;
if (p == NULL) {
  // handle error
  return NULL;
}
int n = p->index;
free(p); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T19:32:38.450

您管理`connections[]`and`space[]`数组的方式似乎有很多问题：

*   您接受一个连接`connections[i]`，但`i`您传递给`listener`线程的是返回的`check()`那个 - 这可能是完全不同的`i`。
*   每个线程都获得了相同的线程参数地址 -`j`仅分配一次，并且每次创建线程时都使用相同的分配。如果两个或更多线程几乎同时启动，您将丢失应该传递给其中一些线程的索引。
*   当它完成时，`listener`将连接标记为可用（我认为这就是目的`space[n] = 't';`），然后用于`connections[n]`关闭连接。这些都不是通过任何同步来执行的。

其他一些评论：

*   你到底为什么要动态分配`len`？
*   `done`in`main()`的循环检查`while`应受互斥锁保护
*   我不确定传输数据的确切协议是什么，但由于您使用的是`getline()`我假设它是一组以换行符结尾的行。在这种情况下，请记住`getline()`文档中的这一点信息：“缓冲区以空值结尾并包括换行符，如果找到的话”。如果该`"END"`行包含换行符，`strcmp("END",line)`则不会返回`0`。

# asp.net - mono 3.0.1 asp.net 已导入具有相同标识“mscorlib”的程序集。考虑删除其中一个参考

> ID：13672672
> 
> 赞同：0
> 
> 时间：2012-12-02T19:04:25.760
> 
> 标签：asp.net, entity-framework-4, mono, debian, raspberry-pi

硬件和操作系统：Raspberry pi (Model B) 和 Soft-float Debian “wheezy”</p>

好的，我做的第一件事就是做一个“单完成”，安装很顺利。我进行了一些测试，效果很好。单声道版本是 2.10.8.x。我在 XSP（和 mono-fastcgi-server4）中运行了一个简单的 ASP.net（不是 MVC），它也可以工作。然后我尝试了一个更复杂的版本，其中包含一个数据库（system.data.sqlite），它并不顺利，但我想出了办法。

所以现在我尝试了一个带有 sqlite + 实体框架的版本，但令人震惊的是（对我来说）它不起作用。我尝试了很多不同的东西。我想不通。所以我开始在网上寻找可能有什么问题，我意识到实体框架是在最新（BETA，3.0.1）版本中添加到单声道的。这是版本 3.0.1 所以我下载了这个版本并安装了。它需要永远安装。

```
pi@raspberrypi ~ $ mono -V
Mono JIT compiler version 3.0.1 (tarball Sat Dec  1 01:10:37 AST 2012)
Copyright (C) 2002-2012 Novell, Inc, Xamarin Inc and Contributors. www.mono-project.com
        TLS:           __thread
        SIGSEGV:       normal
        Notifications: epoll
        Architecture:  armel,vfp
        Disabled:      none
        Misc:          softdebug
        LLVM:          supported, not enabled.
        GC:            Included Boehm (with typed GC and Parallel Mark) 
```

但是它安装了。我做了一些测试（在 csharp 交互式编译器中），它似乎没问题。在构建/编译/安装时，我确实看到了很多警告。我不知道这是否正常。否则我会期待一个错误，它必须立即停止。

好的，现在我的问题是：我尝试运行一个简单的网站并在浏览器中看到：

```
Compilation Error

Description: Error compiling a resource required to service this request. Review your source file and modify it to fix this error.

Compiler Error Message: CS1703: An assembly with the same identity `mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089' has already been imported. Consider removing one of the references

Show Detailed Compiler Output:

dmcs /target:library /lib:"/var/www/dotnet/Adwen/Bin" /debug+ /optimize- /warn:4 /out:"/tmp/root-temp-aspnet-0/624d0ef6/App_Code.1da3d18.dll" /r:"/var/www/dotnet/Adwen/Bin/myTest.dll" /r:"/var/www/dotnet/Adwen/Bin/Adwen.dll" /r:"/var/www/dotnet/Adwen/Bin/myTestModel.dll" /r:"/var/www/dotnet/Adwen/Bin/System.Data.Entity.dll" /r:"/var/www/dotnet/Adwen/Bin/System.Data.SQLite.Linq.dll" /r:"/var/www/dotnet/Adwen/Bin/System.Data.SQLite.dll" /r:"/var/www/dotnet/Adwen/Bin/System.Web.Entity.dll" /r:"/var/www/dotnet/Adwen/Bin/TechInfoSystems.Data.SQLiteProvider.dll" /r:"/usr/lib/mono/4.0/mscorlib.dll" /r:"/usr/lib/mono/gac/Microsoft.CSharp/4.0.0.0__b03f5f7f11d50a3a/Microsoft.CSharp.dll" /r:"/usr/lib/mono/gac/System/4.0.0.0__b77a5c561934e089/System.dll" /r:"/usr/lib/mono/gac/System.Configuration/4.0.0.0__b03f5f7f11d50a3a/System.Configuration.dll" /r:"/usr/lib/mono/gac/System.Web/4.0.0.0__b03f5f7f11d50a3a/System.Web.dll" /r:"/usr/lib/mono/gac/System.Data/4.0.0.0__b77a5c561934e089/System.Data.dll" /r:"/usr/lib/mono/gac/System.Web.Services/4.0.0.0__b03f5f7f11d50a3a/System.Web.Services.dll" /r:"/usr/lib/mono/gac/System.Xml/4.0.0.0__b77a5c561934e089/System.Xml.dll" /r:"/usr/lib/mono/gac/System.Drawing/4.0.0.0__b03f5f7f11d50a3a/System.Drawing.dll" /r:"/usr/lib/mono/gac/System.EnterpriseServices/4.0.0.0__b03f5f7f11d50a3a/System.EnterpriseServices.dll" /r:"/usr/lib/mono/gac/System.IdentityModel/4.0.0.0__b77a5c561934e089/System.IdentityModel.dll" /r:"/usr/lib/mono/gac/System.Runtime.Serialization/4.0.0.0__b77a5c561934e089/System.Runtime.Serialization.dll" /r:"/usr/lib/mono/gac/System.Xaml/4.0.0.0__b77a5c561934e089/System.Xaml.dll" /r:"/usr/lib/mono/gac/System.ServiceModel/4.0.0.0__b77a5c561934e089/System.ServiceModel.dll" /r:"/usr/lib/mono/gac/System.ServiceModel.Web/4.0.0.0__31bf3856ad364e35/System.ServiceModel.Web.dll" /r:"/usr/lib/mono/gac/System.Core/4.0.0.0__b77a5c561934e089/System.Core.dll" /r:"/usr/lib/mono/gac/System.Web.Extensions/4.0.0.0__31bf3856ad364e35/System.Web.Extensions.dll" /r:"/usr/lib/mono/gac/System.Data.DataSetExtensions/4.0.0.0__b77a5c561934e089/System.Data.DataSetExtensions.dll" /r:"/usr/lib/mono/gac/System.Xml.Linq/4.0.0.0__b77a5c561934e089/System.Xml.Linq.dll" /r:"/usr/lib/mono/gac/System.ComponentModel.DataAnnotations/4.0.0.0__31bf3856ad364e35/System.ComponentModel.DataAnnotations.dll" /r:"/usr/lib/mono/gac/System.Web.DynamicData/4.0.0.0__31bf3856ad364e35/System.Web.DynamicData.dll" /r:"/usr/lib/mono/gac/System.Data.Linq/4.0.0.0__b77a5c561934e089/System.Data.Linq.dll" /r:"/usr/lib/mono/gac/System.Web.ApplicationServices/4.0.0.0__31bf3856ad364e35/System.Web.ApplicationServices.dll" /r:"/var/www/dotnet/Adwen/bin/System.Data.SQLite.dll" /r:"/var/www/dotnet/Adwen/bin/System.Data.Entity.dll" /r:"/tmp/root-temp-aspnet-0/32404ce1/assembly/shadow/3f3d66bb/989bd275_a7a6b4ce_00000002/myTest.dll" /r:"/tmp/root-temp-aspnet-0/32404ce1/assembly/shadow/5cf434e0/fb52802e_a7a6b4ce_00000002/Adwen.dll" /r:"/tmp/root-temp-aspnet-0/32404ce1/assembly/shadow/ca2786da/6d813214_a7a6b4ce_00000002/myTestModel.dll" /r:"/tmp/root-temp-aspnet-0/32404ce1/assembly/shadow/cee499b3/69422d7d_a7a6b4ce_00000002/System.Data.SQLite.Linq.dll" /r:"/tmp/root-temp-aspnet-0/32404ce1/assembly/shadow/b7cd78f2/106bcc3c_a7a6b4ce_00000002/System.Web.Entity.dll" /r:"/tmp/root-temp-aspnet-0/32404ce1/assembly/shadow/5f634169/f8c5f5a7_a7a6b4ce_00000002/TechInfoSystems.Data.SQLiteProvider.dll" /d:DEBUG  -- "/tmp/root-temp-aspnet-0/624d0ef6/App_Web_285c26e8_0.cs" "/tmp/root-temp-aspnet-0/624d0ef6/App_Web_285c26e8_1.cs" "/tmp/root-temp-aspnet-0/624d0ef6/App_Web_285c26e8_2.cs" "/tmp/root-temp-aspnet-0/624d0ef6/App_Web_285c26e8_3.cs" "/tmp/root-temp-aspnet-0/624d0ef6/App_Web_285c26e8_4.cs" 

error CS1703: An assembly with the same identity `mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089' has already been imported. Consider removing one of the references
mscorlib.dll (Location of the symbol related to previous error)
/usr/lib/mono/4.0/mscorlib.dll (Location of the symbol related to previous error)
error CS1703: An assembly with the same identity `System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089' has already been imported. Consider removing one of the references
/usr/lib/mono/gac/System/4.0.0.0__b77a5c561934e089/System.dll (Location of the symbol related to previous error)
System.dll (Location of the symbol related to previous error)
error CS1703: An assembly with the same identity `System.Xml, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089' has already been imported. Consider removing one of the references
/usr/lib/mono/gac/System.Xml/4.0.0.0__b77a5c561934e089/System.Xml.dll (Location of the symbol related to previous error)
System.Xml.dll (Location of the symbol related to previous error)
error CS1703: An assembly with the same identity `System.Core, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089' has already been imported. Consider removing one of the references
/usr/lib/mono/gac/System.Core/4.0.0.0__b77a5c561934e089/System.Core.dll (Location of the symbol related to previous error)
System.Core.dll (Location of the symbol related to previous error)
error CS1703: An assembly with the same identity `Microsoft.CSharp, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a' has already been imported. Consider removing one of the references
/usr/lib/mono/gac/Microsoft.CSharp/4.0.0.0__b03f5f7f11d50a3a/Microsoft.CSharp.dll (Location of the symbol related to previous error)
Microsoft.CSharp.dll (Location of the symbol related to previous error)

Version information: Mono Runtime Version: 2.10.8.1 (Debian 2.10.8.1-5); ASP.NET Version: 4.0.30319.1 
```

如果您在底部注意到错误，您可以清楚地看到**“版本信息：Mono 运行时版本：2.10.8.1 (Debian 2.10.8.1-5); ASP.NET 版本：4.0.30319.1'**我期待看到另一个运行时版本。

那么我从哪里开始呢？这是一个错误吗？安装出错了吗？另一个xsp版本？我应该重新安装吗？我可以解决这个问题吗？它可以是任何东西，所以在我浪费大量时间和精力之前让我问一下。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T13:10:38.120

我写了这篇文章，然后立即发现了问题。XSP4（或 mono-fastcgi-server4）确实有问题。我安装了 mono 3.0.1，假设它会安装最新的 xsp。但事实并非如此。所以我从github下载了最新版本。我的基本网站又开始工作了。但是我的带有实体框架的网站仍然无法正常工作，还没有时间解决这个问题。在我在这里报告我的发现之前，我打算这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T07:49:51.280

`mod-mono-server4`我以前从未使用过 FastCGI 服务器，但几周前我看到了同样的问题- 但在我报告它后不久它就得到了修复，所以你的 Mono 3.0.1 应该没问题。

但是，FastCGI Server 似乎没有使用您编译和安装的新 Mono 3.0.1，而是使用旧版本。

您是否将新的 Mono 安装到主目录中的某个自定义前缀中？查看您的 Web 服务器配置以检查`mono-fastcgi-server4`它正在使用哪个文件，然后查看该文件 - 它应该是一些带有完整路径的 shell 脚本`mono`（可能是`/usr/bin/mono`）。

# matlab - Matlab电影放映2情节

> ID：13672680
> 
> 赞同：0
> 
> 时间：2012-12-02T19:05:20.463
> 
> 标签：matlab, movie, matlab-figure

我有一个 1001x2 的矩阵，每列代表振荡器的相位角。我正在尝试制作一个 matlab 电影，以便我在时间 t 绘制两个相位角，一次绘制一个。所以基本上它应该看起来像 2 个点在圆周上移动。如果我坚持情节，那么它似乎是正确的，除了所有点都在框架上。但如果我不坚持，那么每次迭代中只会显示第二个图（每帧只有一个红色 *）。知道发生了什么事以及如何使两个点都显示在每一帧上吗？

```
fig1=figure(1);
winsize = get(fig1,'Position');
winsize(1:2) = [0 0];
numframes=100;
A=moviein(numframes,fig1,winsize);
set(fig1,'NextPlot','replacechildren')
i=1;

%hold on
for frame=1:numframes
i=frame*10;
plot(cos(mod(y(i),2*pi)),sin(mod(y(i),2*pi)),'bo');
plot(cos(mod(y(i,2),2*pi)) *1.1,sin(mod(y(i,2),2*pi))*1.15,'r*'); %only this one is shown
axis([-1.5 1.5 -1.5 1.5])
A(:,i)=getframe(fig1,winsize);
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T19:16:19.830

好吧，您可以`hold on`在画框期间和画框`hold off`结束时。像

```
 for frame=1:numframes
 i=frame*10;

 plot(cos(mod(y(i),2*pi)),sin(mod(y(i),2*pi)),'bo');   
 hold on   % // here
 plot(cos(mod(y(i,2),2*pi)) *1.1,sin(mod(y(i,2),2*pi))*1.15,'r*');
 axis([-1.5 1.5 -1.5 1.5])
 A(:,i)=getframe(fig1,winsize);
 hold off  % // and here
 end 
```

但在这种情况下，你可以简单地做

```
 ....
 plot(cos(mod(y(i),2*pi)),sin(mod(y(i),2*pi)),'bo', ... 
     cos(mod(y(i,2),2*pi)) *1.1,sin(mod(y(i,2),2*pi))*1.15,'r*'); 
```

# java - 比较Java中的整数

> ID：13672686
> 
> 赞同：3
> 
> 时间：2012-12-02T19:06:08.327
> 
> 标签：java

我从一本没有解释结果的 Java 书中得到以下代码。我运行它并得到了以下内联的结果，但我需要帮助理解结果：

```
1\. Integer i = -10;
2\. Integer j = -10;
3\. System.out.print(i==j);  //  ==> true
4\. System.out.print(i.equals(j));   //  ==> true
5\. Integer n = 128;
6\. Integer m = 128;
7\. System.out.print(n==m);  //  ==> false
8\. System.out.print(n.equals(m));   //  ==> true 
```

我的问题是：

*   为什么第 3 行解析为真？它们不是两个独立的对象吗？
*   如果第 3 行是真的，为什么第 7 行不是真的？

谢谢，如果提前。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-02T19:08:07.387

见`Integer.valueOf(int i)`源代码。

它缓存（使用整数池）-128 和 127 之间的整数（这些是默认值，可以通过自定义`java.lang.Integer.IntegerCache.high`）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T19:19:21.467

为了强调使用整数导致的荒谬程度`==`，请考虑以下行：

```
Integer a = 200, b = 200;
System.out.println(a < b || a == b || a > b); 
```

显然，无论值如何，这都应该打印`true`，因为它看起来像重言式。它打印`false`，当然。以下，显然是同类型的重言式，打印期望值`true`：

```
System.out.println(a <= b || a > b); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T19:25:54.947

`Integer`是一个对象，而`int`是一个“标量”。像`Integer i = 270;`，在被子下，变成了`Integer i = Integer.valueOf(270);`。因此，当您创建两个`Integer`对象时，它们是不同的（如 所示`==`）。

但是，JDK 在`valueOf`中缓存了`Integer`具有较小值（-128 到 127）的对象的创建，如果可用，可以重用这些对象的先前版本。因此，两个明显不同的 small 实例`Integers`实际上可能是相同的，尽管它们似乎是分别实例化的。

`int`如果您尝试使用值进行相同的操作，则`==`比较总是正确的，并且`equals()`调用会产生编译错误（因为`int`不是对象）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-02T19:27:35.367

## 关于问题 1

根据[doc](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Integer.html)，一个 Integer 类被包装在一个原始值周围，这仅仅意味着您可以期望该对象在需要时表现为一个原始值（在步骤 3 中执行的比较），并且在需要时同样作为一个对象（步骤4；如果使用**int**而不是**Integer**类，则无法执行此步骤。）。
如果您将步骤 1 和 2 中的类型交换为**String**而不是 Integer，并再次执行测试，您将获得您希望获得的预期结果。

## 关于问题 2

上面已经回答了：特定范围（-128 和 127）内的整数被缓存。

希望这可以帮助。

# php - MySQL 查询以删除不再相关的数据

> ID：13672687
> 
> 赞同：0
> 
> 时间：2012-12-02T19:06:22.807
> 
> 标签：php, mysql, mysqli

我正在使用 Twitter 流 API 使用 PHP 和 MySQL 构建推文数据库。除了“推文”表之外，还有单独的表来跟踪提及、网址、主题标签和用户。

我让它定期检查并只保留我的每个关键字的最新 1000 条推文，从数据库中删除其余的推文。我想做的是清理关联表中的数据（通过关联表，我的意思是提及、url、主题标签和用户表）。

我想知道删除“tweets”表中没有匹配的 tweet_id 的所有提及、url、主题标签和用户的最有效方法是什么。

表结构：

```
--
-- Table structure for table `tweets`
--

CREATE TABLE IF NOT EXISTS `tweets` (
  `tweet_id` bigint(20) unsigned NOT NULL,
  `tweet_text` varchar(200) NOT NULL,
  `entities` text NOT NULL,
  `created_at` datetime NOT NULL,
  `geo_lat` decimal(10,5) DEFAULT NULL,
  `geo_long` decimal(10,5) DEFAULT NULL,
  `user_id` int(10) unsigned NOT NULL,
  `screen_name` char(20) NOT NULL,
  `name` varchar(40) DEFAULT NULL,
  `profile_image_url` varchar(200) DEFAULT NULL,
  `tweet_keywords` varchar(128) NOT NULL,
  PRIMARY KEY (`tweet_id`),
  KEY `created_at` (`created_at`),
  KEY `user_id` (`user_id`),
  KEY `screen_name` (`screen_name`),
  KEY `name` (`name`),
  FULLTEXT KEY `tweet_text` (`tweet_text`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8;

-- --------------------------------------------------------

--
-- Table structure for table `tweet_mentions`
--

CREATE TABLE IF NOT EXISTS `tweet_mentions` (
  `tweet_id` bigint(20) NOT NULL,
  `source_user_id` bigint(20) NOT NULL,
  `target_user_id` bigint(20) NOT NULL,
  KEY `tweet_id` (`tweet_id`),
  KEY `source` (`source_user_id`),
  KEY `target` (`target_user_id`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8;

-- --------------------------------------------------------

--
-- Table structure for table `tweet_tags`
--

CREATE TABLE IF NOT EXISTS `tweet_tags` (
  `tweet_id` bigint(20) NOT NULL,
  `tag` varchar(100) NOT NULL,
  KEY `tweet_id` (`tweet_id`),
  KEY `tag` (`tag`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8;

-- --------------------------------------------------------

--
-- Table structure for table `tweet_urls`
--

CREATE TABLE IF NOT EXISTS `tweet_urls` (
  `tweet_id` bigint(20) NOT NULL,
  `url` varchar(140) NOT NULL,
  KEY `tweet_id` (`tweet_id`),
  KEY `url` (`url`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8;

-- --------------------------------------------------------

--
-- Table structure for table `users`
--

CREATE TABLE IF NOT EXISTS `users` (
  `user_id` bigint(20) unsigned NOT NULL,
  `screen_name` varchar(20) NOT NULL,
  `name` varchar(40) DEFAULT NULL,
  `profile_image_url` varchar(200) DEFAULT NULL,
  `location` varchar(30) DEFAULT NULL,
  `url` varchar(200) DEFAULT NULL,
  `description` varchar(200) DEFAULT NULL,
  `created_at` datetime NOT NULL,
  `followers_count` int(10) unsigned DEFAULT NULL,
  `friends_count` int(10) unsigned DEFAULT NULL,
  `statuses_count` int(10) unsigned DEFAULT NULL,
  `time_zone` varchar(40) DEFAULT NULL,
  `last_update` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`user_id`),
  KEY `user_name` (`name`),
  KEY `last_update` (`last_update`),
  KEY `screen_name` (`screen_name`),
  FULLTEXT KEY `description` (`description`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T19:14:57.253

Have a look at foreign key constraints.

# r - 将残差绑定到具有缺失值的输入数据集

> ID：13672690
> 
> 赞同：4
> 
> 时间：2012-12-02T19:06:43.503
> 
> 标签：r, dataframe, plyr, regression

我正在寻找一种将`lm`残差绑定到输入数据集的方法。该方法必须添加`NA`缺失残差，并且残差应对应于正确的行。

样本数据：

```
N <- 100 
Nrep <- 5 
X <- runif(N, 0, 10) 
Y <- 6 + 2*X + rnorm(N, 0, 1) 
X[ sample(which(Y < 15), Nrep) ] <- NA
df <- data.frame(X,Y)

residuals(lm(Y ~ X,data=df,na.action=na.omit)) 
```

残差应该绑定到df。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-07-31T18:23:07.017

只需将其更改`na.action`为`na.exclude`：

```
residuals(lm(Y ~ X, data = df, na.action = na.exclude)) 
```

`na.omit`并且`na.exclude`两者都对预测变量和标准进行逐案删除。它们的不同之处仅在于提取器函数类似于`residuals()`或`fitted()`将用 NA 填充它们的输出以用于省略的情况`na.exclude`，因此具有与输入变量相同长度的输出。

[（这是在这里](https://stats.stackexchange.com/a/11028/5509)找到的最佳解决方案）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T19:19:36.023

使用合并或连接。

```
N <- 100 
Nrep <- 5 
X <- runif(N, 0, 10) 
Y <- 6 + 2*X + rnorm(N, 0, 1) 
X[ sample(which(Y < 15), Nrep) ] <- NA
df <- data.frame(X,Y)

df$id <- rownames(df)

res <- residuals(lm(Y ~ X,data=df,na.action=na.omit))
tmp <- data.frame(res=res)
tmp$id <- names(res)

merge(df,tmp,by="id",sort=FALSE,all.x=TRUE) 
```

如果需要维持秩序。使用 plyr 包中的 join() ：

```
library(plyr) 
join(df,tmp) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T19:15:37.547

这可能是解决方案，但首先，您不需要 c() 在 data.frame

```
df <- data.frame(X,Y)
df$Res[!is.na(X)]<-residuals(lm(Y ~ X,data=df,na.action=na.omit)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-02T19:44:18.773

```
"[<-"(df, !is.na(df$X), "res", residuals(lm(Y ~ X,data=df,na.action=na.omit))) 
```

会成功的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-07-19T18:56:06.233

```
N <- 100 
Nrep <- 5 
X <- runif(N, 0, 10) 
Y <- 6 + 2*X + rnorm(N, 0, 1) 
X[ sample(which(Y < 15), Nrep) ] <- NA
df <- data.frame(X,Y)

R.all=as.numeric(rep(NA,length(X)))  # numeric vector with missing values
res=residuals(lm(Y ~ X,data=df,na.action=na.omit))  
i=as.numeric(names(res)) # vector locations of non-missing residuals
R.all[i]=res;R.all     # assign residuals to their correct positions. 
```

# c# - 当用户单击该行的单元格时，如何选择完整的 dataGridView 行？

> ID：13672693
> 
> 赞同：55
> 
> 时间：2012-12-02T19:06:59.840
> 
> 标签：c#, .net, winforms, datagridview

我有一个`dataGridView`并且我需要当用户单击任何单元格时，包含该单元格的整行也会被选中。（它已禁用多选）我试着得到`currentRowIndex`这样的

```
 int Index = dataGridView1.CurrentCell.RowIndex; 
```

但是，我不确定如何使用索引来选择该行。尝试了这个和其他六种方法，但没有成功：

```
dataGridView1.Select(Index); 
```

你知道我可以做到这一点的方法吗？

* * *

## 回答 #1

> 赞同：108
> 
> 时间：2012-12-02T19:11:14.877

您需要将 datagridview 设置`SelectionMode`为`FullRowMode`.

注意：在带有 .NET 4.5 的 Visual Studio 2013 中，该属性称为[`FullRowSelect`](https://docs.microsoft.com/en-us/dotnet/api/system.windows.forms.datagridviewselectionmode?view=netframework-4.5).

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-03T10:53:33.973

如果您希望以编程方式选择行，您将使用 datagridview 的单元格单击事件：在 VB.net 和 C# 中显示

VB.Net

```
Private Sub dgvGrid_CellClick(sender as System.Object, e as System.Windows.Forms.DataGridViewCellEventArgs) Handles dgvGrid.CellClick
    If e.RowIndex < 0 Then
        Exit Sub
    End If

    intIndex = e.RowIndex
    dgvGrid.Rows(intIndex).Selected = True
Exit Sub 
```

C＃

```
private void dgvRptTables_CellClick(System.Object sender, System.Windows.Forms.DataGridViewCellEventArgs e)
{
    if (e.RowIndex < 0) {
        return;
    }

    int index = e.RowIndex;
    dgvGrid.Rows[index].Selected = true;
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-11-09T20:21:26.993

在 DataGridView 属性中，设置

*   多选 -> 真
*   SelectionMode -> FullRowSelect

![](../Images/fd3ffa325457101ff458dabcbbe0a06a.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-10-11T13:15:03.253

可以做这样的事情

```
protected override void Render(HtmlTextWriter writer)
{
    foreach (GridViewRow row in Results.Rows)
    {
        if (row.RowType == DataControlRowType.DataRow)
        {
            row.Attributes["onmouseover"] = "this.style.cursor='pointer';";
            row.CssClass = "rowHover";
            row.ToolTip = "Click row to view person's history";
            row.Attributes.Add("onclick", this.ClientScript.GetPostBackClientHyperlink(this.Results,"Select$" & r.RowIndex , true));
        }
    }

    base.Render(writer);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-08-16T14:30:09.357

```
//class to store ID (Pri. Key) value of selected row from DataGridView
public class Variables
{
   public static string StudentID;
}                                  

//This is the event call on cell click of the DataGridView
private void dataGridViewDisplay_CellClick(object sender, DataGridViewCellEventArgs e)
{
   Variables.StudentID =this.dataGridViewDisplay.CurrentRow.Cells[0].Value.ToString();
//textBoxName is my form field where I set the value of Name Column from the Selected row from my DataGridView 

   textBoxName.Text = this.dataGridViewDisplay.CurrentRow.Cells[1].Value.ToString();

   dateTimePickerDOB.Value = Convert.ToDateTime(this.dataGridViewDisplay.CurrentRow.Cells[2].Value.ToString());
} 
```

[看看我的 DataGridView](https://i.stack.imgur.com/tHFQT.jpg)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-09-06T10:55:50.783

你可以这样做：也许它可以帮助你。

```
private void dataGridView1_CellContentClick(object sender, DataGridViewCellEventArgs e)
    {
        if (e.RowIndex>0)
        {
            int rowindex = e.RowIndex;
            DataGridViewRow row= this.dataGridView1.Rows[rowindex];
        }
    } 
```

# java - 拦截球衣端点方法

> ID：13672694
> 
> 赞同：0
> 
> 时间：2012-12-02T19:07:01.230
> 
> 标签：java, rest, jersey, endpoint

我正在使用 jersey 构建 REST Web 服务。我创建了一个类，实现了 ContainerRequestFilter 接口来确定用户是否登录。现在我想丢弃如果 user == null 提交的每个请求。如何做到这一点？我不想放一个

```
if (user != null ) {
 ...
} else {
 return //401
} 
```

在每一个动作中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T02:28:53.663

抛出 WebApplicationException：

```
public ContainerRequest filter(ContainerRequest request) {
    if (user != null ) {
           //...
        } else {
            throw new WebApplicationException(401);
        }
    return request;
} 
```

# django - 如何验证 URLField 是否来自 Django 中的所需域？

> ID：13672695
> 
> 赞同：3
> 
> 时间：2012-12-02T19:07:04.523
> 
> 标签：django, forms

我的申请表中有一个 URLField，我想检查给定的 URL 是否来自 www.domain.com。

现在我在该领域的清洁方法中使用这个解决方案，但我认为这不是最好的......

```
 def clean_link(self):
    link = self.cleaned_data['link']
    if 'domain.com' not in link:
        raise forms.ValidationError('You only can add a domain.com URL.')

    return link 
```

例如，如果我输入[http://www.thisismydomain.com](http://www.thisismydomain.com)将是正确的。还有其他解决方案吗？

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T20:53:20.397

你可能想看看[`urlparse`](http://docs.python.org/2/library/urlparse.html)模块，以避免错过像

```
>>> 'good_domain.com' in 'http://evildomain.com/mylink#good_domain.com'
True 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T21:19:27.627

我认为最好在您的`clean_link`方法中使用某种正则表达式（regex）。具体我不是很了解，不过@second提到的[urparse](http://docs.python.org/2/library/urlparse.html)模块可能不错，也可以直接使用[re](http://docs.python.org/2/library/re.html)模块。不过，您当前的总体策略似乎还不错。

# android - 在不打开拨号盘的情况下拨打钛金属号码

> ID：13672696
> 
> 赞同：1
> 
> 时间：2012-12-02T19:07:09.977
> 
> 标签：android, titanium, appcelerator

我有一个简单的问题，当我使用

```
var phone_number='12346789';

Titanium.Platform.openURL('tel:'+phone_number);

   it goes to dial pad in android i want it to directly dial the call without prompting the user to press the call button. 
```

我将 AndroidManifest.xml 中的权限添加为

```
<uses-permission android:name="android.permission.CALL_PHONE" /> 
```

但它仍然无法正常工作，仍然要求用户按下通话按钮。任何人对此有所了解，请帮助。

阿里。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-02T19:15:09.357

That should be in your tiapp.xml, slightly differently:

```
<android xmlns:android="http://schemas.android.com/apk/res/android">
  <manifest>
    <uses-permission android:name="android.permission.CALL_PHONE" />
  </manifest>
</android> 
```

And then use intents to open the dialer:

```
var intent = Ti.Android.createIntent({
    action: Ti.Android.ACTION_CALL,
    data: 'tel:1234567'
});
Ti.Android.currentActivity.startActivity(intent); 
```

Source: [http://shareourideas.com/2012/09/05/appcelerator-titanium-android-click-to-auto-call/](http://shareourideas.com/2012/09/05/appcelerator-titanium-android-click-to-auto-call/)

# jquery - push e.which 到数组不等于给定数组

> ID：13672698
> 
> 赞同：1
> 
> 时间：2012-12-02T19:07:28.510
> 
> 标签：jquery, keydown, keyevent, keyup

有什么想法吗？想不通...它说不`arr`等于`[17, 67]`

```
var key = function(keys, fn) {
    var arr = [];
    $(document).on({
        keydown: function(e) {
            arr.push(e.which);
            if (arr === keys) {
                fn();
            }
        },
        keyup: function() {
            arr = [];
        }
    });
};

// ctrl + c
key([17, 67], function() {
    alert(true);
}); 
```

这是一个[小提琴](http://jsfiddle.net/Aw3Dj/)

**更新**

由于[Cymen](https://stackoverflow.com/a/13672752/1250044)的回答它有效，但是如果您按`ctrl`+`a`然后`ctrl`+ `alt`+`a`或反之亦然，您必须两次触发第二个快捷方式才能工作，有什么想法吗？

新[小提琴](http://jsfiddle.net/Aw3Dj/2/)。

```
var key = function(keys, fn) {
    var arr = [];
    $(document).on({
        keydown: function(e) {
            arr.push(e.which);
            for (var i = 0; keys[i]; i++) {
                if (arr[i] !== keys[i]) {
                    return false;
                }
            }
            fn(e);
            arr = [];
        },
        keyup: function() {
            arr = [];
        }
    });
};

// ctrl + c
key([17, 67], function() {
    alert(true);
});

// ctrl + alt + c
key([17, 18, 67], function() {
    alert('ctrl+alt+c');
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T19:13:37.800

You can't use `===` to check if arrays are equal by content. Check it out with a JavaScript console:

```
[17, 35] === [17, 35]
false

a = [17, 35]
[17, 35]
a === a
true 
```

So `===` on arrays is checking the reference not the value. You can use something else like underscore do the comparison or write one yourself if it is some sort of challenge. Or since you're only comparing two elements, do this:

```
var key = function(keys, fn) {
    var arr = [];
    $(document).on({
        keydown: function(e) {
            arr.push(e.which);
            if (arr[0] === keys[0] && arr[1] === keys[1]) {
                fn();
                arr = [];  // added this to avoid buggyness
            }
            console.log(arr);
            console.log(keys);
        },
        keyup: function() {
            arr = [];
        }
    });
};

// ctrl + c
key([17, 67], function() {
    alert(true);
});​ 
```

[http://jsfiddle.net/9LbsD/](http://jsfiddle.net/9LbsD/)

## For more than two keys like CTRL+ALT+C

```
You need an array comparison that works for variable lengths like this one:

var equalArrays = function(array1, array2) {
    if (array1.length != array2.length) {
        return false;
    }
    for (var i=0; i < array1.length; i++) {
        if (array1[i] !== array2[i]) {
            return false;
        }
    }
    return true;    
}

var key = function(keys, fn) {
    var arr = [];
    $(document).on({
        keydown: function(e) {
            arr.push(e.which);
            console.log('arr', arr, 'keys', keys, 'match', equalArrays(arr, keys));
            if (equalArrays(arr, keys)) {
                fn();
                arr = [];                
            }
            console.log(arr);
            console.log(keys);
        },
        keyup: function() {
            arr = [];
        }
    });
};

// ctrl + c
key([17, 67], function() {
    alert(true);
});

// ctrl + alt + c
key([17, 18, 67], function() {
    alert('ctrl+alt+c');
}); 
```

[http://jsfiddle.net/WZLut/](http://jsfiddle.net/WZLut/)

## A less buggy approach

We need to keep track of which keys were pressed however a single key can only be pressed once in one combination (I'm assuming) and on keyup we should only remove the key going up not all the keys. So here is a working approach to that:

```
var equalArrays = function(array1, array2) {
    return _.isEqual(array1, array2);
}

var key = function(keys, fn) {
    var arr = [];
    $(document).on({
        keydown: function(e) {
            arr = _.without(arr, e.which);
            arr.push(e.which);
            if (equalArrays(arr, keys)) {
                fn();             
            }
        },
        keyup: function(e) {
            arr = _.without(arr, e.which);
            arr = _.uniq(arr);
        }
    });
};

// ctrl + c
key([17, 67], function() {
    alert('ctrl+c');
});

// ctrl + alt + c
key([17, 18, 67], function() {
    alert('ctrl+alt+c');
}); 
```

​</p>

[http://jsfiddle.net/BgQUA/](http://jsfiddle.net/BgQUA/)

# android - 如何在android中使用baseadapter刷新自定义列表视图

> ID：13672700
> 
> 赞同：10
> 
> 时间：2012-12-02T19:07:34.990
> 
> 标签：android, listview, baseadapter

先生，我如何使用 baseadapter 刷新我的自定义列表视图。我不知道该放置什么，或者将其放置在我的代码中的什么位置。请帮我。提前致谢

```
public class EditDetails extends Activity{
public String nameChanged;
public String numChanged;
public String name;
public String num;
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.editdetails);
    final EditText sqlName = (EditText)findViewById(R.id.editName);
    final EditText sqlNumber = (EditText)findViewById(R.id.editNumber);
    name = CustomListView.name;
    num = CustomListView.number;
    Button bUpdate = (Button)findViewById(R.id.editUpdate);
    Button bView = (Button)findViewById(R.id.editView);
    sqlName.setText(name);
    sqlNumber.setText(num);

    bUpdate.setOnClickListener(new OnClickListener() {

        public void onClick(View arg0) {
            nameChanged = sqlName.getText().toString();
            numChanged = sqlNumber.getText().toString();
            GroupDb info = new GroupDb(EditDetails.this);
            info.open();
            long rowid = info.getRowId(name, num);
            info.updateNameNumber(rowid, nameChanged, numChanged);
            ArrayList<Contact> searchResults = info.getView();
            MyCustomBaseAdapter mcba = new MyCustomBaseAdapter(EditDetails.this, searchResults);
            Toast.makeText(getApplicationContext(), "Update Successful!", Toast.LENGTH_LONG).show();
            info.close();
            }
        });
    bView.setOnClickListener(new OnClickListener() {

        public void onClick(View arg0) {
            Intent intent = new Intent();
            intent.setClass(EditDetails.this, CustomListView.class);

            startActivityForResult(intent, 0);
            }
        });
}

} 
```

这是我显示我的列表视图的地方

```
public class CustomListView extends Activity {
final Context context = this;
public static String name;
public static String number;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    GroupDb info = new GroupDb(this);
    info.open();
    ArrayList<Contact> searchResults = info.getView();

    final ListView lv = (ListView) findViewById(R.id.srListView);
    lv.setAdapter(new MyCustomBaseAdapter(this, searchResults));
    info.close();

    lv.setOnItemClickListener(new OnItemClickListener() {

        public void onItemClick(AdapterView<?> a, View v, int position, long id) {
            // TODO Auto-generated method stub
            Object o = lv.getItemAtPosition(position);
            final Contact fullObject = (Contact)o;
            AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(context);
            alertDialogBuilder
            .setMessage("Select action")
            .setCancelable(false)
            .setPositiveButton("Edit", new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog,int id) {
                    Toast.makeText(getApplicationContext(), "Edit ", Toast.LENGTH_LONG).show();
                    name = fullObject.getName();
                    number = fullObject.getPhoneNumber();
                    Intent contactIntent = new Intent("myfolder.proj.EDITDETAILS");
                    startActivity(contactIntent);
                }
              }) 
```

这是我的baseadapter类

```
public class MyCustomBaseAdapter extends BaseAdapter {
private static ArrayList<Contact> searchArrayList;

private LayoutInflater mInflater;

public MyCustomBaseAdapter(Context context, ArrayList<Contact> results) {
    searchArrayList = results;
    mInflater = LayoutInflater.from(context);
}

public int getCount() {
    return searchArrayList.size();
}

public Object getItem(int position) {
    return searchArrayList.get(position);
}

public long getItemId(int position) {
    return position;
}

public View getView(int position, View convertView, ViewGroup parent) {
    ViewHolder holder;
    if (convertView == null) {
        convertView = mInflater.inflate(R.layout.custom_row_view, null);
        holder = new ViewHolder();
        holder.txtName = (TextView) convertView.findViewById(R.id.name);

        holder.txtPhone = (TextView) convertView.findViewById(R.id.phone);

        holder.status = (TextView) convertView.findViewById(R.id.status);
        convertView.setTag(holder);
    } else {
        holder = (ViewHolder) convertView.getTag();
    }

    holder.txtName.setText(searchArrayList.get(position).getName());

    holder.txtPhone.setText(searchArrayList.get(position).getPhoneNumber());

    holder.status.setText(searchArrayList.get(position).getStatus());

    return convertView;
}

static class ViewHolder {
    TextView txtName;
    TextView txtPhone;
    TextView status;
}
} 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-12-02T19:18:09.300

两个选项：要么保留`ArrayList`传递给构造函数的引用，以便稍后修改实际的列表数据（由于未复制列表，修改适配器外部的数据仍会更新适配器引用的指针），或重写适配器以允许将列表重置为另一个对象。

无论哪种情况，在`ArrayList`更改后，您都必须调用`notifyDataSetChanged()`以更新您`ListView`的更改。这可以在适配器内部或外部完成。因此，例如：

```
public class MyCustomBaseAdapter extends BaseAdapter {
    //TIP: Don't make this static, that's just a bad idea
    private ArrayList<Contact> searchArrayList;

    private LayoutInflater mInflater;

    public MyCustomBaseAdapter(Context context, ArrayList<Contact> initialResults) {
        searchArrayList = initialResults;
        mInflater = LayoutInflater.from(context);
    }

    public void updateResults(ArrayList<Contact> results) {
        searchArrayList = results;
        //Triggers the list update
        notifyDataSetChanged();
    }

    /* ...The rest of your code that I failed to copy over... */
} 
```

高温高压

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-12-30T11:15:32.250

在 BaseAdapter 中创建一种自定义方法

喜欢：

```
 public void updateAdapter(ArrayList<Contact> arrylst) {
        this.arrylst= arrylst;

        //and call notifyDataSetChanged
        notifyDataSetChanged();
    } 
```

这个函数调用你想调用的地方：例如

adapterObject.updateAdapter(这里传递 ArrayList);

完毕。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-07-06T06:44:12.367

感谢有上述解决方案的人为我工作。我在每个事件中都调用 listupdate 方法

```
 public void updateResults(List<TalebeDataUser> results) {
    talebeList = results;
    //Triggers the list update
    notifyDataSetChanged();
} 
```

在更新列表之后，我还会在每次触摸时刷新我的按钮操作。例如，我有很多按钮可以在我的列表视图项目中单击，因此每次触摸都会改变其他人的风格

```
 private void setColor(TalebeDataUser talebeDataUser) {
    if (talebeDataUser.isVar()) {
        holder.mVar.setBackgroundResource(R.drawable.aw_secili);
        holder.mGorevli.setBackgroundResource(R.drawable.aw_shadow);
        holder.mYok.setBackgroundResource(R.drawable.aw_shadow);
        holder.mIzinli.setBackgroundResource(R.drawable.aw_shadow);
        holder.mHatimde.setBackgroundResource(R.drawable.aw_shadow);
    } else if (talebeDataUser.isGorevli()) {
        holder.mVar.setBackgroundResource(R.drawable.aw_shadow);
        holder.mGorevli.setBackgroundResource(R.drawable.aw_secili);
        holder.mYok.setBackgroundResource(R.drawable.aw_shadow);
        holder.mIzinli.setBackgroundResource(R.drawable.aw_shadow);
        holder.mHatimde.setBackgroundResource(R.drawable.aw_shadow);
    } else if (talebeDataUser.isYok()) {
        holder.mVar.setBackgroundResource(R.drawable.aw_shadow);
        holder.mGorevli.setBackgroundResource(R.drawable.aw_shadow);
        holder.mYok.setBackgroundResource(R.drawable.aw_secili);
        holder.mIzinli.setBackgroundResource(R.drawable.aw_shadow);
        holder.mHatimde.setBackgroundResource(R.drawable.aw_shadow);
    } else if (talebeDataUser.isIzinli()) {
        holder.mVar.setBackgroundResource(R.drawable.aw_shadow);
        holder.mGorevli.setBackgroundResource(R.drawable.aw_shadow);
        holder.mYok.setBackgroundResource(R.drawable.aw_shadow);
        holder.mIzinli.setBackgroundResource(R.drawable.aw_secili);
        holder.mHatimde.setBackgroundResource(R.drawable.aw_shadow);
    } else if (talebeDataUser.isHatimde()) {
        holder.mVar.setBackgroundResource(R.drawable.aw_shadow);
        holder.mGorevli.setBackgroundResource(R.drawable.aw_shadow);
        holder.mYok.setBackgroundResource(R.drawable.aw_shadow);
        holder.mIzinli.setBackgroundResource(R.drawable.aw_shadow);
        holder.mHatimde.setBackgroundResource(R.drawable.aw_secili);
    }

} 
```

只是我的一个按钮内的一个例子

```
 holder.mYok.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            //talebeList.remove(currentTalebe);
            setOgrenciNameByDurum(talebeList.get(i));
            talebeList.get(i).setYok(true);
            //setOgrenciNameByDurum(currentTalebe);
            talebeList.get(i).setVar(false);
            talebeList.get(i).setGorevli(false);
            talebeList.get(i).setIzinli(false);
            talebeList.get(i).setHatimde(false);
            updateResults(talebeList);
            setColor(talebeList.get(i));
            //saveCurrentTalebeOnShare(currentTalebe);
        }
    }); 
```

talebeList 只是`List<MyModel> talebeList`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-05-29T15:57:15.323

只需使用 BaseAdapter，无需使用上下文

```
listsOfNotes.remove(listsOfNotes.get(position));
notifyDataSetChanged(); 
```

只需将此代码放在`setOnClickListner`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-05-13T22:43:33.820

我解决了这个问题，将此功能添加到我的自定义适配器

```
public void newCursor(Cursor cursor)
 {
  this.cursor=cursor;
  this.notifyDataSetChanged();
 } 
```

从我的主类中，我创建了一个新游标，对数据库进行重新查询，然后通过此函数发送到我的自定义适配器。

祝你好运

# image - 在 Picasa RSS 提要中获取大（原始大小的图像）

> ID：13672701
> 
> 赞同：3
> 
> 时间：2012-12-02T19:07:37.743
> 
> 标签：image, coldfusion, rss, picasa

我使用 Picasa RSS 提要没问题，但我无法获取我上传的原始大尺寸图片。通过 Picasa 上传时，我特意选择上传“原始尺寸”（相当大）。提要 URL 仅指向较小的图像。如何从 picasa 获取原始大图？

我可以通过检查 Picasa 网站上的图像来破解 URL，所以这是我想要的照片的一个示例：[https](https://lh3.googleusercontent.com/-yam9QV2NG40/ULKIMTKvQzI/AAAAAAAAAA4/ownr930MvGg/) : **//lh3.googleusercontent.com/-yam9QV2NG40/ULKIMTKvQzI/AAAAAAAAAA4/ownr930MvGg/s2048/Blasket%** 2520驴.jpg

我知道您可以使用 URL 中的 s（上面的粗体位）更改上面的 URL。

所以这是我获取和使用提要的coldfusion代码：

```
<cffeed name="picassa_RSS"source="https://picasaweb.google.com/data/feed/base/user/104080781603408027307/albumid/5817402728494564577?alt=rss&kind=photo&hl=en_US">

<cfoutput>
<!--- Loop through picasa RSS feed and output thumbnails --->
<cfloop array="#picassa_RSS.item#" index="i">
<img alt="img" src="#i.group.thumbnail[2].url#" class="picture">
</cfloop>
</cfoutput> 
```

有任何想法吗？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T19:23:11.593

好的，我自己找到了答案。在此处查看 imgmax 参数： [https ://developers.google.com/picasa-web/docs/2.0/reference#Parameters](https://developers.google.com/picasa-web/docs/2.0/reference#Parameters)

您基本上将**&imgmax=1600**添加到提要 URL 的末尾以获得尽可能大的大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-15T18:03:09.500

将 &imgmax=2048 添加到 url 对我有用，因为我的图像是 1920 宽度。

# c++ - 布雷森汉姆的球体？

> ID：13672702
> 
> 赞同：3
> 
> 时间：2012-12-02T19:07:47.310
> 
> 标签：c++, c, algorithm, graphics, 3d

我正在编写一个简单的软件渲染器，它工作得很好，（使用三角形和球体/圆形基元）但我在深度缓冲区实现方面遇到了一些问题 - 我需要一个可以正确使用的 Bresenham 圆算法版本3d 值（需要填充深度缓冲区）。简单的“平面”二维圆形版本。

```
 void FillCircleWithDepth(int x1, int y1, float z, int radius, unsigned color)
    {

     int left   = x1-radius-1;
     int right  = x1+radius+1;
     int up     = y1-radius-1;
     int down   = y1+radius+1;

     if(!_rectanglesOverlap(0, 0, CLIENT_X, CLIENT_Y,
                    left, up, right, down ) )
         return;

     int x  = 0;                   //0
     int y  = radius;              //1
     int d1 = 3 - (2 * radius);

     do
    {
     if (d1 < 0)      d1 += (x<<2) + 6;
     else             d1 += ((x-(y--))<<2) + 10;

     drawScanlineWithDepth(y1+x, x1-y, x1+y, z, color);
     drawScanlineWithDepth(y1-x, x1-y, x1+y, z, color);
     drawScanlineWithDepth(y1+y, x1-x, x1+x, z, color);
     drawScanlineWithDepth(y1-y, x1-x, x1+x, z, color);
     x++;
   }
   while(x<y);
 } 
```

带来深度缓冲区错误，我还需要在绘制扫描线时计算适当的 z。它的 3d 版本会是什么样子？

//编辑

我在这里，在堆栈上发现了几个很接近的问题，但没有一个准确的答案——球体需要pressenham ..有人可以回答吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T07:16:44.483

就像 3d 投影下的三角形一样，1/z 的倒数是线性的；对于每个运动 x+=dx 或 y+=dy，都涉及与 z 的倒数的线性差异关系：rec_z(x+dx,y+dy) = rec_z(x,y) + a*dx + b*dy，其中 a和 b IIRC 与平面的法向量几乎无关。

这引出了另一点：法线向量具有三个分量。虽然从绘制三角形上看不是很明显，但在透视校正下绘制圆形并不仅仅是缩放 x 和 y，而是有更多的自由度。

([此处为此类图像的示例](http://us.123rf.com/400wm/400/400/lenapix/lenapix1208/lenapix120800095/14908051-3d-design-element-a--cube-with-cutout-sphere.jpg)）-出于版权原因，它是链接而不是嵌入的。

# sql - 使用其他参数从另一个表创建表

> ID：13672703
> 
> 赞同：2
> 
> 时间：2012-12-02T19:07:50.600
> 
> 标签：sql, postgresql, create-table

我想从表“ProjectTable”创建一个表“客户”：

```
CREATE TABLE Customer AS
    (
        SELECT CustCompanyName, CustContactName, CustContactTitle, CustAddress, CustCity, CustRegion, CustPostalCode, CustCountry, CustPhone, CustFax FROM ProjectTable
    ); 
```

而且我需要在这里添加更多内容，因为附加列“id”将是主键列，或者“客户”将是对另一个表列的引用。怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T21:13:25.157

您可以使用与 ProjectTable 相同的表结构和相同的数据创建新表，然后您可以添加所需的其他字段：

```
SELECT CustCompanyName, CustContactName, CustContactTitle, CustAddress, CustCity, CustRegion, 
CustPostalCode, CustCountry, CustPhone, CustFax INTO Customer FROM ProjectTable

ALTER TABLE Customer ADD ID INT IDENTITY(1,1) PRIMARY KEY

ALTER TABLE Customer ADD customer VARCHAR(10)

ALTER TABLE Customer ADD CONSTRAINT Customer_customer_FK FOREIGN KEY ( customer ) REFERENCES MyOtherTable(PKColumn) 
```

# javascript - 在 JavaScript 中创建对象

> ID：13672712
> 
> 赞同：0
> 
> 时间：2012-12-02T19:09:04.187
> 
> 标签：javascript

像在函数 ManA 中创建新对象或通过调用构造函数 ManB 那样创建新对象有什么区别吗？

```
function ManA(name, age)
{
    return { name: name, age: age, getAge: function() { return this.age; } };
}

function ManB(name, age)
{
    this.name = name;
    this.age = age;
    this.getAge = function() { return this.age; };
}

var manA = ManA("Tom", 28);
var manB = new ManB("Frank", 25); 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T20:38:12.850

不同的是，`manA` `[[Ptototype]]`链条是：

```
manA -> Object.prototype -> null 
```

`manB` `[[Prototype]]`链条是：

```
manB -> ManB.prototype -> Object.prototype -> null 
```

所以在第二种情况下，您可以通过将方法`manB`添加`ManB`到`ManB.prototype`. 你不能用`ManA`实例来做到这一点[见注]。所以该`getAge`方法可以在构造函数的原型上，为每个实例节省几个字节的内存。

### 笔记

您可以将方法添加到`manA`原型链，但唯一可用的是`Object.prototype`，因此每个对象都将继承它们。这被认为是非常糟糕的风格，你应该不理会内置对象。

# php - 尝试保存到 SQLite db 时出现致命错误

> ID：13672716
> 
> 赞同：0
> 
> 时间：2012-12-02T19:09:55.470
> 
> 标签：php, sql, database, arrays, sqlite

我正在尝试将来自节点的数据保存在使用 SimpleXML 加载到应用程序中的 xml 文档中。下面是我的代码，但是 SQL 语句有问题，因为我遇到了一个致命错误。

我不明白为什么会抛出这个，因为*id*（如下面的错误消息中提到的）被用作要放入的值，而不是作为列。

那么，我在这里做错了什么？谢谢！

**php:**

```
 $db;

    $theProducers = simplexml_load_file('sources/producers.xml');

    foreach ($theProducers->producer as $producer) {
        $attr = $producer->attributes();
        $producers[$i]['id'] = (int)$attr[0];
        $producers[$i]['name'] = (string)$producer->name;
        $producers[$i]['address'] = (string)$producer->address;
        $producers[$i]['zipcode'] = (string)$producer->zipcode;
        $producers[$i]['town'] = (string)$producer->town;
        $producers[$i]['url'] = (string)$producer->url;
        $producers[$i]['imgurl'] = (string)$producer->imgurl;

        $i += 1;
    }

    try {
            $db = new PDO('sqlite:ProducersDB.sqlite');
            $db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
        }
    catch(PDOException $e) {
        die("Something went wrong: " . $e->getMessage());
    }

    for($i = 0; $i < count($producers); $i++) {

        $sql = "INSERT INTO producers (producerid, name, address, zipcode, town, url, imgurl)
                VALUES($producers[$i]['id'], $producers[$i]['name'], $producers[$i]['address'], $producers[$i]['zipcode'], $producers[$i]['town'], $producers[$i]['url'], $producers[$i]['imgurl']); ";

        if(!$db->query($sql)) {
            die("Couln't execute query!");
        }
    } 
```

**错误信息：**

```
Fatal error: Uncaught exception 'PDOException' with message 'SQLSTATE[HY000]:
General error: 1 no such column: 'id'' in
/Applications/XAMPP/xamppfiles/htdocs/app/index.php:55 Stack trace: #0
/Applications/XAMPP/xamppfiles/htdocs/app/Labb2/index.php(55):
PDO->query('INSERT INTO pro...') #1 {main} thrown in
/Applications/XAMPP/xamppfiles/htdocs/app/index.php on line 55 
```

**数据库结构：**

```
Table: Producers

id INTEGER PRIMARY KEY,
producerid INT,
name TEXT,
address TEXT,
zipcode INT,
town TEXT,
url TEXT,
imgurl TEXT 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T19:15:08.220

You query to INSERT element in your table is not properly built. Your values are in a PHP array which is not interpreted properly between your double quotes, it should be something like this:

```
$sql = "INSERT INTO producers(producerid, name)
        VALUES ('" . $producers[$i]['id'] . "', '" . $producers[$i]['name'] . "')"; 
```

You should also look the method [prepare](http://php.net/manual/en/pdo.prepare.php) from PDO to properly set dynamic values in your query instead of building it by yourself.

**EDIT**: according to the PHP documentation on [Strings](http://php.net/manual/en/language.types.string.php) I'm wrong and you can interpret an array between double quotes, sorry for the confusion.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T21:42:11.593

根据[字符串解析文档](http://php.net/manual/en/language.types.string.php#language.types.string.parsing)，多维数组需要你使用复杂的语法；此外，必须引用 SQL 字符串：

```
$sql = "INSERT INTO producers (...)
        VALUES({$producers[$i]['id']}, '{$producers[$i]['name']}', ..." 
```

为避免字符串格式问题，建议使用[参数](http://php.net/manual/en/sqlite3stmt.bindvalue.php)。

# sql - 显示驱动程序和所涉及的班次数超过 1

> ID：13672717
> 
> 赞同：0
> 
> 时间：2012-12-02T19:10:06.583
> 
> 标签：sql, oracle

```
select dr_drvname, count(sh_drvnum)
from driver join shift on dr_drvnum = sh_drvnum
where count(sh_drvnum) not like '1'
group by dr_drvname; 
```

此代码不起作用。我知道某处需要涉及子查询，但我无法弄清楚什么和在哪里。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T19:21:05.973

got it solved here's the answer

```
select dr_drvname, count(sh_drvnum)
from driver join shift on dr_drvnum = sh_drvnum
group by dr_drvname
having count(sh_drvnum) > 1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T19:31:41.787

或者，在加入之前预先聚合计数：

```
select dr_drvname,
       shift_count
from   driver inner join (
         select   sh_drvnum,
                  count(*) shift_count
         from     shift
         group by sh_drvnum
         having   count(*) > 1) on (dr_drvname = sh_drvname) 
```

# javascript - 如何将 mongodb 查询的结果保存到 javascript 变量中？

> ID：13672718
> 
> 赞同：4
> 
> 时间：2012-12-02T19:10:22.430
> 
> 标签：javascript, mongodb

这里有一些关于如何将查询结果保存到 javascript 变量中的问题，但我无法实现它们。关键是我有一个非常困难的问题，所以在我看来，这个问题是独一无二的。

这是问题所在。我有一个名为“drives”的集合和一个名为“driveDate”的键。我需要保存 1 个具有最小日期的变量，以及另一个具有最大日期的变量。

最小日期的查询是：

```
> db.drives.find({},{"_id":0,"driveDate":1}).sort({"driveDate":1}).limit(1) 
```

结果是：

```
{ "driveDate" : ISODate("2012-01-11T17:24:12.676Z") } 
```

我如何将其保存到变量中，我可以执行以下操作：

```
tmp = db.drives.find({},{"_id":0,"driveDate":1}).sort({"driveDate":1}).limit(1) 
```

谢谢！！！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-02T19:32:15.183

假设您尝试在 shell 中执行此操作：

```
 tmp = db.drives.find({}, {_id:0, driveDate:1}).sort({driveDate:1}).limit(1).toArray()[0] 
```

`find`返回一个游标，您需要对其进行迭代以检索实际文档。调用`toArray`光标会将其转换为文档数组。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-03T07:59:36.920

经过一段时间的思考，我得到了解决方案。在这里，以供将来参考：

```
var cursor = db.drives.find({},{"_id":1}).sort({"driveDate":1}).limit(1) 
```

然后我可以像这样从光标中获取文档

```
var myDate = cursor.next() 
```

而已。谢谢你的帮助

# r - 用于在 Rstudio 中将工作目录设置为源文件位置的 R 命令

> ID：13672720
> 
> 赞同：158
> 
> 时间：2012-12-02T19:10:27.930
> 
> 标签：r, automation, working-directory

我正在用 R 编写一些教程。每个 R 代码都包含在一个特定的文件夹中。里面有数据文件和其他文件。我想打开`.r`文件并获取它，这样我就不必更改 Rstudio 中的工作目录，如下所示：

![在此处输入图像描述](../Images/4b0b856e200c9e91a7c37aeedf19f942.png)

有没有办法在 R 中自动指定我的工作目录。

* * *

## 回答 #1

> 赞同：107
> 
> 时间：2016-03-07T11:06:36.153

要获取源脚本的位置，您可以使用`utils::getSrcDirectory`或`utils::getSrcFilename`。因此，可以通过以下方式将工作目录更改为当前文件的目录：

```
setwd(getSrcDirectory()[1]) 
```

*如果您Run*代码而不是*Source* ，这在 RStudio 中不起作用。为此，您需要使用`rstudioapi::getActiveDocumentContext`.

```
setwd(dirname(rstudioapi::getActiveDocumentContext()$path)) 
```

当然，第二种解决方案要求您使用 RStudio 作为 IDE。

* * *

## 回答 #2

> 赞同：65
> 
> 时间：2014-09-23T13:09:13.460

我知道这个问题已经过时了，但我也在寻找解决方案，谷歌在最上面列出了这个：

```
this.dir <- dirname(parent.frame(2)$ofile)
setwd(this.dir) 
```

把它放在文件的某个地方（最好是开始），以便根据该文件更改 wd。

根据评论，这可能不一定适用于每个平台（Windows 似乎工作，Linux/Mac 一些）。请记住，此解决方案用于“采购”文件，不一定用于在该文件中运行块。

另请参阅[获取 `source`d 文件的文件名和路径](https://stackoverflow.com/questions/8835426/get-filename-and-path-of-sourced-file)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2016-12-02T13:01:03.813

```
dirname(rstudioapi::getActiveDocumentContext()$path) 
```

对我有用，但如果你不想使用*rstudioapi*并且你不在项目中，你可以在你的路径中使用符号 ~。符号 ~ 指的是默认的 RStudio 工作目录（至少在 Windows 上）。

[![RStudio 选项](../Images/8791fbcb4d6dd83a5613cf3039a1bfc0.png)](https://i.stack.imgur.com/hXybq.png)

如果您的 RStudio 工作目录是“D:/Documents”，`setwd("~/proyect1")`则与 setwd("D:/Documents/proyect1") 相同。

设置后，您可以导航到子目录：`read.csv("DATA/mydata.csv")`. 是一样的`read.csv("D:/Documents/proyect1/DATA/mydata.csv")`。

如果要导航到父文件夹，可以使用`"../"`. 例如：`read.csv("../olddata/DATA/mydata.csv")`这与`read.csv("D:/Documents/oldata/DATA/mydata.csv")`

无论您使用什么计算机，这都是我编写脚本的最佳方式。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2018-05-10T20:49:00.783

对于[rstudio ，您可以使用](https://www.rstudio.com/)[rstudioapi](https://cran.rstudio.com/web/packages/rstudioapi/index.html)自动将工作目录设置为脚本目录，如下所示：

```
library(rstudioapi)

# Getting the path of your current open file
current_path = rstudioapi::getActiveDocumentContext()$path 
setwd(dirname(current_path ))
print( getwd() ) 
```

这在运行或获取文件时有效。

您需要先安装包 rstudioapi。请注意，我打印的路径是 100% 确定我在正确的位置，但这是可选的。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2015-04-25T22:39:38.477

这个答案可以帮助：

```
script.dir <- dirname(sys.frame(1)$ofile) 
```

> 注意：必须获取脚本才能返回正确的路径

我在以下位置找到它： https: [//support.rstudio.com/hc/communities/public/questions/200895567-can-user-obtain-the-path-of-current-Project-s-directory-](https://support.rstudio.com/hc/communities/public/questions/200895567-can-user-obtain-the-path-of-current-Project-s-directory-)

BumbleBee 的答案（使用 parent.frame 而不是 sys.frame）对我不起作用，我总是收到错误消息。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2014-11-21T09:23:19.050

解决方案

```
dirname(parent.frame(2)$ofile) 
```

不为我工作。

我正在使用蛮力算法，但有效：

```
File <- "filename"
Files <- list.files(path=file.path("~"),recursive=T,include.dirs=T)
Path.file <- names(unlist(sapply(Files,grep,pattern=File))[1])
Dir.wd <- dirname(Path.file) 
```

搜索目录时更容易：

```
Dirname <- "subdir_name"
Dirs <- list.dirs(path=file.path("~"),recursive=T)
dir_wd <- names(unlist(sapply(Dirs,grep,pattern=Dirname))[1]) 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2016-07-01T17:16:08.033

如果你在 Linux 上工作，你可以试试这个：

`setwd(system("pwd", intern = T) )`

这个对我有用。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2019-08-28T20:24:09.773

该[`here`](https://cran.r-project.org/web/packages/here/index.html)包提供了该`here()`功能，该功能根据一些启发式方法返回您的项目根目录。

不是完美的解决方案，因为它找不到脚本的位置，但它足以满足某些目的，所以我想我会把它放在这里。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2017-06-02T22:52:49.977

我意识到这是一个旧线程，但是我遇到了类似的问题，需要设置工作目录并且无法获得任何适合我的解决方案。以下是有效的方法，以防其他人稍后偶然发现：

```
# SET WORKING DIRECTORY TO CURRENT DIRECTORY:
system("pwd=`pwd`; $pwd 2> dummyfile.txt")
dir <- fread("dummyfile.txt")
n<- colnames(dir)[2]
n2 <- substr(n, 1, nchar(n)-1)
setwd(n2) 
```

这有点复杂，但基本上这使用系统命令来获取工作目录并将其保存到 dummyfile.txt，然后 R 使用 data.table::fread 读取该文件。剩下的只是清理打印到文件中的内容，这样我就只剩下目录路径了。

我需要在集群上运行 R，所以无法知道我最终会进入哪个目录（作业被分配了一个数字和一个计算节点）。这对我有用。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2015-03-17T16:36:34.033

我知道这已经过时了，但我无法让以前的答案非常令人满意，所以我想贡献我的方法，以防其他人遇到 BumbleBee 答案的评论中提到的相同错误。

我的基于一个简单的系统命令。您提供的所有功能都是脚本的名称：

```
extractRootDir <- function(x) {
    abs <- suppressWarnings(system(paste("find ./ -name",x), wait=T, intern=T, ignore.stderr=T))[1];
    path <- paste("~",substr(abs, 3, length(strsplit(abs,"")[[1]])),sep="");
    ret <- gsub(x, "", path);
    return(ret);
}

setwd(extractRootDir("myScript.R")); 
```

该函数的输出如下所示`"/Users/you/Path/To/Script"`。希望这可以帮助其他可能陷入困境的人。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2016-01-24T15:59:33.473

我只是在寻找解决此问题的方法，来到此页面。我知道它过时了，但以前的解决方案不满意或对我不起作用。如果有兴趣，这是我的工作。

```
filename = "your_file.R"
filepath = file.choose()  # browse and select your_file.R in the window
dir = substr(filepath, 1, nchar(filepath)-nchar(filename))
setwd(dir) 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2017-06-21T08:39:51.647

如果您使用 UTF-8 编码：

```
path <- rstudioapi::getActiveDocumentContext()$path
Encoding(path) <- "UTF-8"
setwd(dirname(path)) 
```

如果您还没有安装包 rstudioapi，则需要安装它。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2012-12-02T19:41:59.233

大多数 GUI 假定如果您在一个目录中并“打开”、双击或以其他方式尝试执行 .R 文件，除非另有说明，否则它所在的目录将是工作目录。Mac GUI 提供了一种更改默认行为的方法，该默认行为可在您在运行会话中设置的首选项的启动面板中更改，并在下一次“启动”时生效。您还应该关注：

```
?Startup 
```

RStudio 文档说：

“通过文件关联启动时，RStudio 会自动将工作目录设置为打开文件的目录。” 默认设置是将 RStudio 注册为 .R 文件的处理程序，尽管也提到了为 .Rdata 和 .R 扩展设置与 RStudio 的默认“关联”的能力。Linux 上的“处理程序”状态和“关联”状态是否相同，我无法确定。

[http://www.rstudio.com/ide/docs/using/workspaces](http://www.rstudio.com/ide/docs/using/workspaces)

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-03-11T10:24:56.110

这是另一种方法：

```
set2 <- function(name=NULL) {
  wd <- rstudioapi::getSourceEditorContext()$path
  if (!is.null(name)) {
    if (substr(name, nchar(name) - 1, nchar(name)) != '.R') 
      name <- paste0(name, '.R')
  }
  else {
    name <- stringr::word(wd, -1, sep='/')
  }
  wd <- gsub(wd, pattern=paste0('/', name), replacement = '')
  no_print <- eval(expr=setwd(wd), envir = .GlobalEnv)
}
set2() 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2022-02-21T17:41:59.047

我感觉自己像只知更鸟，但我要说：我知道这篇文章很旧，但是......

我最近才了解到，从任务计划程序和 .bat 文件运行脚本时，您不能调用 api。我经过惨痛的教训才学到这个。认为那些使用任何***rstudioapi::***方法的人可能想知道这一点。我们以这种方式在一夜之间运行了很多脚本。最近刚刚更改了我们的路径以包含调用的 api，以便我们可以“动态”设置工作目录。然后，当我们尝试的第一个尝试在任务计划程序触发时失败时，调查带来了该信息。

这是使这个问题曝光的实际代码：
***setwd(dirname(rstudioapi::getActiveDocumentContext()$path))***

如果您正在运行脚本，则效果很好！

只需加上我的两分钱，因为我知道人们仍然会拉起这些线程，认为这可能会有所帮助。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2016-04-12T00:53:09.843

```
dirname(parent.frame(2)$ofile) 
```

对我也不起作用，但以下（如[https://stackoverflow.com/a/35842176/992088](https://stackoverflow.com/a/35842176/992088)中所建议的）在 ubuntu 14.04 中对我有用

```
dirname(rstudioapi::getActiveDocumentContext()$path) 
```

# mysql - MYSQL - 存储过程指南

> ID：13672722
> 
> 赞同：1
> 
> 时间：2012-12-02T19:10:36.760
> 
> 标签：mysql, database, stored-procedures

我需要编写一个存储过程，我必须找到过去 6 个月中每个月在收音机上播放歌曲的总时间，所以 6 个输出，本月，上个月，依此类推，直到 6 个月前。为此，我必须使用 Track_no 的 start_airtime 和 finish_airtime。这些总和将给我总播出时间，并且必须按每个月份分开，并且输出应包含两列，首先是月份名称，其次是已播出的总时间。

请注意，开始播放时间和结束播放时间是歌曲的长度，但我没有此信息可用于必须从这两个值中得出它。

我的表设置如下：

```
track_no TINYINT(3) UNSIGNED
genre VARCHAR(60)
purchasedate DATE NOT NULL
start_airtime TIME NOT NULL
finish_airtime TIME
artist CHAR(9) 
```

我对存储过程一无所知，所以任何信息都将不胜感激。非常感谢。

到目前为止，我的代码是：

```
DELIMITER //
DROP PROCEDURE IF EXISTS airtime_of_month//
CREATE PROCEDURE airtime_of_month(IN track_input TINYINT) 
BEGIN
        DECLARE x, track_num TINYINT;
        DECLARE totalTime VARCHAR(25);
        SET x = 7;
        SET track_num = track_input;
        WHILE x > 1 DO
                    SET x = x - 1;
                    SELECT track_no INTO track_num
                            FROM Radio
                            WHERE track_input = track_no;
                    IF (track_input IS NULL) THEN
                            SELECT CONCAT(track_input, ' Is Not                               
                                                           A Valid Track Number') as _;
                ELSE 
                       SELECT track_no,   
             CONCAT(FLOOR(HOUR(TIMEDIFF(finish_airtime,start_airtime)) / 24), ' days ',
                 MOD(HOUR(TIMEDIFF(finish_time,start_airtime)), 24), ' hrs ',                                
          MINUTE(TIMEDIFF(finish_airtime,start_airtime)), ' minutes ') AS total_AirTime
                FROM Radio
                WHERE DATE_SUB(MONTH(purchasedate), INTERVAL x   
                                                                               MONTH);
                END IF;
                SELECT track_num;
    END WHILE;
END //

CALL airtime_of_month (2)/ 
DELIMITER ; 
```

但是，当我这样做时，它会编译但不会返回任何内容。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T19:49:10.590

功能示例：

```
DROP FUNCTION IF EXISTS test;

DELIMITER $$
CREATE FUNCTION test(in_number INT) RETURNS INT
    BEGIN
        DECLARE countTotal INT;
        SET countTotal = SELECT COUNT(*) FROM nGrams;
    RETURN countTotal + in_number;
END $$
DELIMITER ; 
```

程序示例：

```
DROP PROCEDURE IF EXISTS cron_scrubber;

DELIMITER $$
CREATE PROCEDURE cron_scrubber()
BEGIN

    INSERT INTO driver_car_ready_history (id_driver_car_ready, status, date_register, id_driver_car, id_job) 
    SELECT dcr.id_driver_car_ready, dcr.status, dcr.date_register, dcr.id_driver_car, dcr.id_job 
    FROM driver_car_ready dcr 
    ORDER BY dcr.id_driver_car_ready;

    TRUNCATE TABLE driver_car_ready;

END $$
DELIMITER ; 
```

我希望它有一点帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T19:22:28.820

*首先，除非绝对*必要，否则不要使用存储过程（顺便说一下，这种情况很少）。

出于*某些*原因，您不应使用存储过程，请参阅[此答案。](https://stackoverflow.com/questions/6368985/mysql-stored-procedures-use-them-or-not-to-use-them/6369030#6369030)

 *这可以通过一个相当简单的查询来完成，如果您想要 SQL 代码的模块化，可以将其“打包”到一个视图中：

```
create view track_airtime as
select
    track_no, 
    extract(YEAR_MONTH from purchasedate) as year_month, 
    sum(minute(TIMEDIFF(finish_airtime, start_airtime))) as total_airtime
from mytable
where extract(YEAR_MONTH from purchasedate) >= 
      extract(YEAR_MONTH from subdate(now(), interval 6 month))
and track_no = ?
group by 1, 2
order by 2 desc 
```*

# javascript - 本地存储操作和可能的发送

> ID：13672727
> 
> 赞同：0
> 
> 时间：2012-12-02T19:10:53.980
> 
> 标签：javascript, html, local-storage

我正在编写一个利用本地存储的 web 应用程序。我现在将其设置为使用以下格式保存到本地存储：

键：四位数字 值：我的数据

我需要从 localStorage 中获取所有单独的数据，并将其输出到具有以下格式的单个文件：

XXXX <- 四位键
数据
-linebreak-

我该怎么做呢？此外，是否有可能以某种方式获取所有这些信息，并通过电子邮件发送。或者以某种方式将其从本地存储和剪贴板中取出，以便用户可以将其复制到他们的电子邮件中。

提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T19:13:42.380

```
var output = "";
for(var key in localStorage) { 
    output += key+"\n";
    output += localStorage[key]+"\n";
    output += "\n";
}

// output contains combined string 
```

As for the email part you could try using a `mailto:` like this,

```
<a href='mailto:user@domain?subject=[subject here]&body=[email body here]'></a> 
```

This could be combined into a function like this:

```
function sendLocalStorageByEmail(recipient) {
    // create localstorage string
    var output = "";
    for(var key in localStorage) { 
        output += key+"\n";
        output += localStorage[key]+"\n";
        output += "\n";
    }

    // create temporary anchor to emulate mailto click in new tab
    var anchor = document.createElement("a");
    anchor.href = "mailto:"+recipient+"?subject=Local+Storage+Data&body="+encodeURIComponent(output);
    anchor.style.display = "none"; 
    anchor.setAttribute("target","_blank");
    anchor.appendChild(document.createTextNode(""));
    document.body.appendChild(anchor);

    if (anchor.click) {
        return anchor.click();
    }

    // some browsers (chromium/linux) have trouble with anchor.click
    var clickEv = document.createEvent("HTMLEvents");
    clickEv.initEvent("click", true, true);
    anchor.dispatchEvent(clickEv)
} 
```

Usage:

```
<a href='javascript:sendLocalStorageByEmail(prompt("Please enter your e-mail address"))'>
   Send Email
</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-02-06T17:48:51.997

可以在代码中直接集成mail地址，在mailto之前：

```
anchor.href = "mailto:*youradress@ttt.com*"+recipient+"? 
subject=Local+Storage+Data&body="+encodeURIComponent(output); 
```

# angularjs - 与 $routeParams 的双向绑定？

> ID：13672730
> 
> 赞同：14
> 
> 时间：2012-12-02T19:10:57.873
> 
> 标签：angularjs

使用`ng-view`and`$routeProvider`时，可以通过注入`$routeParams`来获取路径的值，例如`/foo/:id/:user/:item`. 有没有办法在路径中设置这些参数？之类的东西`$routeParams.id = 3`，然后将其反映在 url 中。

我知道这种效果可以通过`$location.path()`.

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-17T10:39:10.157

这是我设法解决问题的方法。

**控制器**：

```
app.controller('MainCtrl', [
  '$scope', '$log', '$route', '$routeParams', '$location',
  function(scope, console, route, routeParams, location) {
    console.log('MainCtrl.create');
    scope.route = route;
    scope.routeParams = routeParams;
    scope.location = location;

    //1\. This needs to be enabled for each controller that needs to watch routeParams
    //2\. I believe some encapsulation and reuse through a service might be a better way
    //3\. The reference to routeParams will not change so we need to enable deep dirty checking, hence the third parameter

    scope.$watch('routeParams', function(newVal, oldVal) {
      angular.forEach(newVal, function(v, k) {
        location.search(k, v);
      });
    }, true);
  }]); 
```

**模块声明+路由定义**：

```
var app = angular.module('angularjs-starter', [], [
      '$routeProvider', '$locationProvider',
      function(routeProvider, locationProvider) {
        routeProvider.when('/main', {
          template : 'Main',
          controller : 'MainCtrl',
          reloadOnSearch : false
        });
      } ]); 
```

**模板**：

```
<body ng-controller="MainCtrl">
  <a href="#/main">No Params</a>
  <a href="#/main?param1=Hello&param2=World!">With Params</a>

  <div ng-view></div>

  <p>
    <span>param1</span>
    <input type="text" ng-model="routeParams['param1']">
  </p>
  <p>
    <span>param2</span>
    <input type="text" ng-model="routeParams['param2']">
  </p>

  <pre>location.path() = {{location.path()}}</pre>
  <pre>routeParams = {{routeParams}}</pre>
</body> 
```

**演示**：

*   [笨蛋](http://plnkr.co/edit/g1kw6xoAlAwQKJrqTD2Y)

**参考资料**：

*   [路由参数](http://docs.angularjs.org/api/ng.$routeParams)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-07T17:25:31.250

同样，如果你想用 $location 对 url 参数进行双向数据绑定，这个简单的函数会有所帮助。

```
bind_var_to_urlparam = function(variable_name, scope){
  // initial loading from urlparams and then
  // set a watch function to update the urlparams on update
  scope[variable_name] = $location.search()[variable_name];
  scope.$watch(variable_name, function(newVal, oldVal){
    var search_obj = {};
    search_obj[variable_name] = newVal;
    $location.search(search_obj);
  });
} 
```

我从共享服务中使用它，这就是传递范围的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-06T11:33:20.280

我使用服务来创建双向绑定：

```
angular.module('app').service('urlBinder', ['$location', function($location) {
    this.bindOnScope = function(scope, name, urlParamName) {
        // update the url when the scope variable changes
        var unhookUrlUpdater = scope.$watch(name, function(newValue, oldValue) {
            if (!angular.equals(oldValue, newValue)) {
                $location.search(urlParamName, newValue);
            }
        });

        // update the scope variable when the url changes
        var unhookScopeUpdater = scope.$on('$locationChangeSuccess', function() {
            var value = $location.search()[urlParamName];

            if (!angular.equals(scope[name], value)) {
                scope[name] = value;
            }
        });

        // return a function to remove the hooks. Note that since these hooks are set up on the scope passed in, if that scope gets destroyed (e.g. because the user went to a different page and the controller is no longer present), then the hooks will be removed automatically.
        return function() {
            unhookUrlUpdater();
            unhookScopeUpdater();
        };
    };

    // the same thing but using getter/setter functions for when you want to bind to something not on the scope
    this.bind = function(scope, getter, setter, urlParamName) {
        var unhookUrlUpdater = scope.$watch(getter, function(newValue) {
            $location.search(urlParamName, newValue);
        });

        var unhookScopeUpdater = scope.$on('$locationChangeSuccess', function() {
            var value = $location.search()[urlParamName];

            if (!angular.equals(getter(), value)) {
                setter(value);
            }
        });

        return function() {
            unhookUrlUpdater();
            unhookScopeUpdater();
        };
    };
}]); 
```

在您的控制器中：

```
angular.module('app').controller('ctrl', ['$scope', function($scope) {
    // if binding to something on the scope:
    urlBinder.bindToScope($scope, 'something', 'url-name');
    $scope.something = 'test';

    // or if the variable you want to bind isn't on the scope:
    var someVariable;
    urlBinder.bind(
        $scope,
        function() { return someVariable; },
        function(value) { someVariable = value; },
        'url-name');
}]); 
```

例如，您可以将输入绑定到 url：

```
<div ng-controller="ctrl">
    <input type="number" ng-model="something" />
</div> 
```

您可能还需要`reloadOnSearch : false`在您的路由配置中进行设置，因为您不希望每当 url 的*搜索*位更改时销毁和重新创建控制器范围。

# java - 检查文件长度后Android中的位图采样

> ID：13672734
> 
> 赞同：1
> 
> 时间：2012-12-02T19:11:24.170
> 
> 标签：java, android, bitmap

对于 Android，在将图像加载到内存中以确保我们不会超出我们通常执行的 RAM 限制

```
BitmapFactory.Options bounds = new BitmapFactory.Options();
bounds.inJustDecodeBounds = true; 
```

然后解码位图以找到它的宽度，我们可以根据它来决定是否采样。

我的问题是，如果我们从本地存储（SD 卡）加载位图，我们不能得到位图的文件位置：

```
 File file = new File(mPathToFile); 
```

然后检查

```
 if(file.length()>MAX){

   sampleSize = 2;//2 is just an example
   BitmapFactory.Options options = new BitmapFactory.Options();
    options.inSampleSize = sampleSize;
    bitmap = BitmapFactory.decodeFile(mPathToFile, options);
    } 
```

这是错的吗？愚蠢的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T19:25:31.300

> Is this wrong? Stupid?

No, but it might be too inaccurate. The file size in bytes will not usually represent the actual image size in memory because image files like JPG and PNG are compressed representations of the `Bitmap`. So the file size is not directly linked to the image size (while they are proportional, you can't necessarily say that a 50K JPG file will be 250x250 pixels).

This also means that 50KB on disk does not mean 50KB once inflated into a `Bitmap` in memory, because it is compressed. The image itself will likely take closer to 300KB (or more) in memory (the requirements are roughly W * H * 4 bytes for an ARGB_8888 `Bitmap`).

Doing a bounds decode allows you to make this decision based on the actual size the image will be (and thus how much memory it will actually take up in your program).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T19:19:17.397

我了解用于处理位图的堆内存与图像分辨率有关，而不是与文件的物理大小/长度有关。

我的理解是，分辨率为 1280 x 800 的图像 A 使用/需要比 640 x 400 的图像 B 更多的堆。并且根据质量文件大小 B 可能大于 A。如果我错了，请纠正我

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T19:38:59.237

Android docs on similar topic [Loading Large Bitmaps Efficiently](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html)

# jquery - Twitter Bootstrap 使用 hide 而不是 display:none

> ID：13672737
> 
> 赞同：4
> 
> 时间：2012-12-02T19:11:27.070
> 
> 标签：jquery, css, twitter-bootstrap

我正在使用 Twitter Bootstrap 开发一个网站，但我对标签有疑问，因为它们正在使用`display: none`而不是隐藏标签。它即导致隐藏选项卡上的 iframe 和位置元素出现问题。

我的问题是有没有办法配置引导程序以不同于默认实现的方式隐藏选项卡？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T01:54:24.963

正如上面评论中所建议的，您必须使用可见性选项。位置也必须改变，因为 div 占用空间，当你切换标签时，它会切换到页面上的不同位置。css 更改的最终结果如下所示：

```
.tab-content > .tab-pane,
.pill-content > .pill-pane {
  visibility:hidden;
  position: absolute;
  width: 930px;
}

.tab-content > .active,
.pill-content > .active {
  display: inline;
  visibility:visible;
   position: absolute;
   width: 930px;

} 
```

修改为您自己的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-07T07:01:04.877

我有同样的问题，我想获得标签内元素的宽度。
我不知道您是否想在显示选项卡时执行您想要执行的操作，但我想这可以在您单击选项卡并获取元素功能时对您有所帮助：

```
$('#mytab a[href="#tab2"]').on('shown.bs.tab', function (e) {
//the mytab is the id of your tab header and tab2 is 
the tab which is not active yet
}); 
```

希望这对你有帮助

# php - 检查服务中的数据库表计数

> ID：13672738
> 
> 赞同：0
> 
> 时间：2012-12-02T19:11:35.253
> 
> 标签：php, android, service

我想创建一个服务，它只是在服务器中执行一个 php 文件，以便检索表数据计数/记录数。 `$query = "SELECT COUNT(id_person) FROM user_details";` 通常，我使用一个`AsyncTask`类在服务器（ProgressDialog 等）中执行一个 php 文件，并且运行良好。但是，我想在服务中进行检查，这样如果计数发生变化，我就会触发通知。请知道如何制作吗？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T19:22:05.343

您可以从您的服务触发广播，然后实现执行处理的 BroadCastReceiver。

```
 Intent broadcastIntent = new Intent();
    broadcastIntent.setAction(ServiceResponseReceiver.ACTION_CHANGED);
    broadcastIntent.addCategory(Intent.CATEGORY_DEFAULT);
    sendBroadcast(broadcastIntent); 
```

然后

```
public class ServiceResponseReceiver extends BroadcastReceiver {
    public static final String ACTION_CHANGED = "your.package.SOMETHING_CHANGED";

    @Override
    public void onReceive(Context context, Intent intent) {
        if (ACTION_CHANGED.equals(intent.getAction())) {
                          // Do processing here, trigger notification or anything
        }
    }
} 
```

# ruby - EventSource / 服务器通过 Nginx 发送的事件

> ID：13672743
> 
> 赞同：93
> 
> 时间：2012-12-02T19:12:20.080
> 
> 标签：ruby, nginx, sinatra

在服务器端使用带有`stream`块的 Sinatra。

```
get '/stream', :provides => 'text/event-stream' do
  stream :keep_open do |out|
    connections << out
    out.callback { connections.delete(out) }
  end
end 
```

在客户端：

```
var es = new EventSource('/stream');
es.onmessage = function(e) { $('#chat').append(e.data + "\n") }; 
```

当我直接使用应用程序时`http://localhost:9292/`，一切正常。连接是持久的，所有消息都传递给所有客户端。

但是，当它通过 Nginx 时`http://chat.dev`，连接会断开，并且每隔一秒左右就会触发一次重新连接。

Nginx 设置对我来说看起来不错：

```
upstream chat_dev_upstream {
  server 127.0.0.1:9292;
}

server {
  listen       80;
  server_name  chat.dev;

  location / {
    proxy_pass http://chat_dev_upstream;
    proxy_buffering off;
    proxy_cache off;
    proxy_set_header Host $host;
  }
} 
```

`keepalive 1024`在`upstream`section 和`proxy_set_header Connection keep-alive;`in 中尝试过`location`。

没有什么帮助:(

没有持久连接和未传递给任何客户端的消息。

* * *

## 回答 #1

> 赞同：224
> 
> 时间：2012-12-02T20:05:13.663

你的 Nginx 配置是正确的，你只是错过了几行。

`EventSource`这是一个通过 Nginx 工作的“神奇三重奏” ：

```
proxy_set_header Connection '';
proxy_http_version 1.1;
chunked_transfer_encoding off; 
```

将它们放入`location`部分中，它应该可以工作。

您可能还需要添加

```
proxy_buffering off;
proxy_cache off; 
```

这不是官方的做法。

我通过“反复试验”+“谷歌搜索”结束了这个:)

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2015-10-29T12:20:19.813

另一种选择是在您的响应中包含一个值为“no”的“X-Accel-Buffering”标头。Nginx 对其进行了特殊处理，参见[http://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_buffering](http://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_buffering)

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2015-02-14T20:42:55.463

不要自己从头开始写。Nginx 是一个很棒的事件服务器，它的模块可以为你处理 SSE，而不会降低上游服务器的性能。

查看[https://github.com/wandenberg/nginx-push-stream-module](https://github.com/wandenberg/nginx-push-stream-module)

它的工作方式是订阅者（使用 SSE 的浏览器）连接到 Nginx，然后连接停止。发布者（Nginx 后面的服务器）将在相应的路由上向 Nginx 发送一个 POST，此时 Nginx 将立即转发到浏览器中等待的 EventSource 侦听器。

这种方法比让您的 ruby​​ 网络服务器处理这些“长轮询”SSE 连接更具可扩展性。

# ruby-on-rails - Ruby On Rails: Initialize object with random GUID on ".new"?

> ID：13672746
> 
> 赞同：3
> 
> 时间：2012-12-02T19:12:39.247
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

I'm new to Ruby & Rails... the goal is to create a **User** class whose primary key (*id*) is not an integer, but a GUID. I think I have the ActiveRecord end of things setup properly (not auto-generating an *id* column with type *integer*, but with column *id* of type *string* instead), and a function that can generate a GUID.

The only missing piece at this point is getting Rails to initialize a new *User* class' with an *id* using the *generate_guid* function I had wrote.

**My question**: How do I get Rails to initialize *id* with a random GUID? For example...

```
@user = User.new
@user.id
> 'AG5CE52' # <-- A randomly generated GUID... 
```

It's also important to consider that if an instance of *User* is loaded from the database, it shouldn't change the *id* of the already existing user; a GUID should only be generated when I user is being created for the first time.

Here are some code samples:

**The model**:

```
class User < ActiveRecord::Base
  before_create :generate_guid  # This doesn't seem to do anything (when I call User.new)

  set_primary_key :id

  protected

  def generate_guid
    begin
      id = SecureRandom.urlsafe_base64
    end while User.where(:id => id).exists?
    self.id = id
  end
end 
```

**The migration**:

```
class CreateUsers < ActiveRecord::Migration
  def self.up
    create_table :users, {:id => false} do |t|
      t.string :id
      ...
    end
    execute "ALTER TABLE users ADD PRIMARY KEY (id);"
end 
```

Suggestions are appreciated!

*   Dave

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T19:28:22.990

you can use the `after_initialize` callback, that is called every time an object of your class is instantiated.

```
 class User < ActiveRecord::Base
   after_initialize :generate_guid, unless: :guid
   def generate_guid
     self.guid = # your method here
   end
 end 
```

you can also set this field to be a primary key in your migration:

```
create_table :users, primary_key: :guid do |t| 
```

however, do you really need to create a guid every time you instantiate an object ? It seems really computationaly expensive. And as someone commented, be warned that rails sometimes behaves weirdly when you get out of common patterns and conventions...

# javascript - Contact Form + jQuery validationengine

> ID：13672748
> 
> 赞同：2
> 
> 时间：2012-12-02T19:12:47.270
> 
> 标签：javascript, jquery, ajax, forms, jquery-validation-engine

I created this contact form, inserting jQuery fadeLabel and validationEngine to beautify the form the file index.php / .html (I have not yet figured out which of the two versions put it) scripts are

index:

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script src="/js/backtop.js"></script>
<script src="/js/fadeLabel.js"></script>
<script>
$(document).ready(function () {
$('form .fadeLabel').fadeLabel();
});
</script>
<script src="/js/validationEngine-it.js"></script>
<script src="/js/validationEngine.js"></script>
<script>
$(document).ready(function(){
$("#form_box").validationEngine({
ajaxSubmit: true,
ajaxSubmitFile: "contact.php",
ajaxSubmitMessage: "Thank you, We will contact you soon !",
success :  false,
    failure : function() {}
    })
    });
</script>
<script src="/js/contactform.js"></script> 
```

however this is the part of the form's code

```
<p id="form_success" class="success hide"><strong>Grazie!</strong> Il tuo messaggio è  stato inviato con successo.</p>
    <form id="form_box">
    <fieldset>
    <p><label for="name">Nome*</label><input type="text" id="name" name="name" class="validate[required] fadeLabel" value=""/></p>
    <p><label for="email">E-mail*</label><input type="email" id="email" name="email" class="validate[required,custom[email]] fadeLabel" value=""/></p>
    <p><label for="website">Sito web</label><input type="url" id="website" name="website" class="fadeLabel" value=""/></p>
    <p><label for="message">Messaggio*</label><textarea id="message" name="message" class="validate[required] fadeLabel" cols="30" rows="10" value=""></textarea></p>
    </fieldset>
    <p id="form_submit" class="submit"><button class="send">Invia</button> *Campi obbligatori</p>
    <p id="form_send" class="send hide">Invio in corso&hellip;</p>
    <p id="form_error" class="submit error hide"><button class="send">Invia</button> Si prega di correggere l'errore e re-inviarlo.</p>
    </form> 
```

This is the contact.php where it receives the data and sends 2 emails (one for me with the data and a thank you to those who contacted me) contact.php:

```
<?php
//include variables
$my_email = "adrygese@gmail.com";
$my_site = "adrianogenovese.com";

    session_start();

    $name = $_POST['name'];
    $email = $_POST['email'];
    $website = $_POST['website'];
    $message = $_POST['message'];
    $ip = $_SERVER['REMOTE_ADDR'];

//beginning to email me
$to  = $my_email;
$sbj = "Richiesta Informazioni - $my_site";
$msg = "
<html>
...
//the body of the email to me
...
</html>
";

$from      = $email;
$headers   = 'MIME-Version: 1.0' . "\n";
$headers  .= 'Content-type: text/html; charset=iso-8859-1' . "\n";
$headers  .= "From: $from";

mail($to,$sbj,$msg,$headers); //email sent to me

//beginning of the email recipient
$toClient  = $email;
$msgClient = "
<html>
...
//the body of the email recipient
...
</html>
";
$fromClient     = $my_email;
$sbjClient      = "Grazie $name per aver contattato $my_site ";
$headersClient  = 'MIME-Version: 1.0' . "\r\n";
$headersClient .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";
$headersClient .= "From: $fromClient";

mail($toClient,$sbjClient,$msgClient,$headersClient); //mail inviata al cliente

//order confirmation email

//Reset error

session_destroy();

exit;

?> 
```

this is the contact form jscript contactform.js:

```
$(document).ready(function() {

$(".send").click(function(){

$("#form_send").removeClass('hide');
$("#form_submit").addClass('hide');
$("#form_error").addClass('hide');

var name = $("#name").val();
var email = $("#email").val();
var website = $("#website").val();
var message = $("#message").val();

if (name == "" || email == "" )  {
    $("#form_send").addClass('hide');
    $("#form_error").removeClass('hide');
}

else {
    $.ajax({
    type: "POST",
    url: "contatti/contact.php",

    data: "name=" + name + "&email=" + email  + "&message=" + message + "&website=" + website,
    dataType: "html",

    success: function(msg) {
        $("#form_send").addClass('hide').delay(3000).fadeOut(3000);
        $("#form_success").removeClass('hide');
        $("#form_box").addClass('hide').slideUp(2000).fadeOut();
    },

    error: function() {

    alert("An unexpected error occurred..."); 
    }   

    });

}

}); //end form

});//end Dom 
```

The jQuery seem to work very well, I wanted to make sure that the page is not of the form updated or go to another page (the only thing that works for now) compensation reflected in the following problems:

1.  I always leave the alert of contactform.js
2.  Does not send any mail, it to me to recipient
3.  I can not do the work properly. delay () .fadeOut / fadeIn and. SlideUp (). FadeOut () so that the sending of this email appears for 3 seconds "$ (" # form_send "). addClass ('hide')" before you do anything else then the form disappears up using some second type slideUp "$ (" # form_box "). addClass ('hide')" by displaying just the "$ (" # form_success "). removeClass ('hide')"
4.  in the address bar also appears the form data (e.g. ../index.php?name=test&email=example%40mail.com&website=&message=helloworld)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T23:01:38.727

首先，您应该为您的表单标签指定`action`和：`method`

```
<form id="form_box" method="post" action="contatti/contact.php"> 
```

其次，您永远不会阻止表单提交失败。如果要在客户端处理表单，则需要返回`false`javascript 以防止提交：

```
if (name == "" || email == "" )  {
    $("#form_send").addClass('hide');
    $("#form_error").removeClass('hide');
    return false;
} 
```

在您的`$.ajax()`提交`data`中设置不正确。请执行下列操作：

```
data: $('#form_box').serialize() 
```

这是一个开始。

# vb.net - Force custom property to expand in IDE

> ID：13672749
> 
> 赞同：1
> 
> 时间：2012-12-02T19:12:51.130
> 
> 标签：vb.net, visual-studio-2010

I created a custom component. Is there a way to have some of its properties always expanded in the property editor? They contain colors which are better to view this way.

# c# - How to debug class library that called from external app?

> ID：13672751
> 
> 赞同：35
> 
> 时间：2012-12-02T19:13:34.393
> 
> 标签：c#, visual-studio, debugging, visual-studio-debugging, class-library

There is an external workflow that executes C# scripts and is able to work with DLL files(my class library).

Is it possible to attach debug to my class library project so breakpoint will hit once this WF will call it?

Thanks

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-12-06T11:16:01.323

是的，您可以使用 Visual Studio 执行此操作。你有两个选择：

### 配置您的项目以启动外部程序

1.  打开您的 DLL 项目。

2.  在项目的属性上，转到“**调试**”选项卡。

3.  选择**启动外部程序**并提供将调用您的 DLL 的外部程序的路径，以及您可能需要提供的任何命令行参数，以及工作目录（如果相关）。

4.  保存项目。

5.  在您想要的代码中设置断点。

6.  按 F5 开始调试。*（此时，您的断点会说它们不会被命中，因为符号未加载。暂时不要担心。）*

7.  做任何事情来让外部应用程序加载你的库并运行你的代码。

Visual Studio 将检测模块加载、加载符号并在断点处停止。

### 附加到现有流程

如果您无法启动该进程，而是必须附加到已在运行的进程，您也可以这样做：

*（旁注：如果您使用的是 Visual Studio 的“Express”版本，我**认为**它没有此功能，但我不确定。这很容易判断：您要么拥有菜单以下第 4 步中提到的项目。）*

1.  确保进程正在运行。

2.  打开您的 DLL 项目。

3.  设置断点等。

4.  从**调试**菜单中，选择**附加到进程...**

5.  在出现的对话框中，在列表中找到进程，将其突出显示，然后单击**附加**。

6.  Visual Studio 将进入调试模式。*（此时，您的断点会说它们不会被命中，因为符号未加载。暂时不要担心。）*

7.  做任何你做的事情来让外部进程加载并运行你的代码。

Visual Studio 将检测外部进程中的模块加载、加载符号并在断点处停止。

* * *

**注意**在这两种情况下，如果外部进程从`bin/Debug`项目文件夹以外的其他位置加载 DLL，则必须确保*每次构建*DLL 时都将其复制到其他位置（您可以将其设置为在项目选项）。否则，Visual Studio 将无法检测到正在加载的 DLL 是您尝试调试的那个。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T16:45:59.087

您可以使用**Debug菜单中的****Attach to process**来调试您的 DLL 项目。如果本机代码不进行调试，您可能需要使用混合模式调试。这可以通过在“*附加到进程*”窗口中单击“*选择*”按钮时出现的窗口中选择“*托管代码类型”和“本机*代码类型”来完成。

 *****如果您使用的 Visual Studio 版本支持宏，那么您可以使用以下代码创建一个新宏来自动执行所有这些操作：

```
Imports System
Imports EnvDTE
Imports EnvDTE80
Imports EnvDTE90
Imports EnvDTE90a
Imports EnvDTE100
Imports System.Diagnostics

Public Module AttachToProcess

    Public Sub DebugMyDLL()
        DTE.ExecuteCommand("Build.BuildSelection")
        Dim ApplicationExePath As String = "C:\Program Files (x86)\foo\bar.exe"
        Shell(ApplicationExePath)
        Try
            Dim dbg2 As EnvDTE80.Debugger2 = DTE.Debugger
            Dim trans As EnvDTE80.Transport = dbg2.Transports.Item("Default")
            Dim dbgeng(2) As EnvDTE80.Engine
            dbgeng(0) = trans.Engines.Item("Managed (v4.0)")
            dbgeng(1) = trans.Engines.Item("Native")
            Dim proc2 As EnvDTE80.Process2 = dbg2.GetProcesses(trans, "<QualifierName>").Item("bar.exe")
            proc2.Attach2(dbgeng)
        Catch ex As System.Exception
            MsgBox(ex.Message)
        End Try
    End Sub

End Module 
```

上面的宏尝试构建您的项目，启动外部应用程序，然后自动将您的 DLL 附加到该程序。您可以从*Attach to process*窗口获取系统的*QualifierName 。*此外，托管代码的版本（在这种情况下为“Managed (v4.0)”）取决于您使用的 .NET 框架的版本。

 ** * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-04-12T11:22:33.123

如果您不想/不能使用外部应用程序 - 您可以直接从 Visual Studio 调用类库：`Ctrl+Alt+I`显示`"Immediate"`寡妇，然后您可以从那里调用类库中的任何方法（使用断点）。您必须输入完全限定的名称（即命名空间）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-03-16T11:17:08.653

来自 Microsoft 的有用链接：[在托管 DLL 项目中指定调用应用程序](https://docs.microsoft.com/en-us/visualstudio/debugger/how-to-debug-from-a-dll-project?view=vs-2019)

1.  打开你的类库项目
2.  前往**[项目]**
3.  在底部选择项目的**[Properties...]**
4.  转到**[调试]**
5.  在“启动”行中，选择**“可执行文件”**
6.  选择 .exe 文件的路径
7.  设置断点
8.  运行项目。

Microsoft 的链接有各种其他有用的调试方案。

我正在使用 Visual Studio 16.4.5。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2017-07-26T12:39:49.240

我认为现在更实际的是创建一个**单元测试项目**来执行你的库代码。因此，您将用一块石头杀死两只鸟：将能够在同一个解决方案中调试您的项目，顺便开始通过测试覆盖您的代码。******

# asp.net - About disabling directory listing in web.config

> ID：13672757
> 
> 赞同：4
> 
> 时间：2012-12-02T19:14:11.153
> 
> 标签：asp.net, iis-7, web-config, directory-listing

I have disabled directory listing in a folder (named Documents) in my asp.net project with web.config settings below.

It works and [http://mywebsite.com/Documents/](http://mywebsite.com/Documents/) does not list the files. But I want the user open a file from this location. For example this link [http://mywebsite.com/Documents/file.pdf](http://mywebsite.com/Documents/file.pdf) also gives error.

Is it possible to open a file from a directory which does not allow directory listing. Thanks in advance.

```
<configuration>
<system.webServer>
   <directoryBrowse enabled="false" />
</system.webServer>
</configuration> 
```

# css - 最大宽度调整以适合文本？

> ID：13672760
> 
> 赞同：20
> 
> 时间：2012-12-02T19:14:38.717
> 
> 标签：css

不是最好的标题，但无论如何......

我有一个带有 a`max-width`和一些文本的元素。

如果文本长于一行，我会得到：

```
----------------------------
|My text here, hello       |
|everyone!                 |
---------------------------- 
```

换句话说，它占据了整个最大宽度，但由于单词向下移动，右侧有一个空白区域。

有什么办法可以让这种情况发生吗？

```
---------------------
|My text here, hello|
|everyone!          |
--------------------- 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-02T19:42:16.870

## 仅靠 CSS 是不可能的

[根据此答案中的 BoltClock](https://stackoverflow.com/questions/12377826/css-width-max-width-on-line-wrap)，这是不可能的。解释是有道理的。要开始换行，行需要达到`max-width`设置。完成后，它会换行，但不会重新收缩，因为它使用该大小来计算换行。

据我所知，这仍然是不可能的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-02T21:27:40.927

我还没有找到一种不需要同时使用包装器元素和 JavaScript 的方法，但它可能适合您的需求。

```
<div id="example">
    <span id="content">My text here, hello everyone!</span>
</div>​​​​​​​​​​​​​​​​​​​​​ 
```

```
​var content = document.getElementById("content");

content.parentNode.style.width = content.offsetWidth + "px";​​​​ 
```

[一个工作示例](http://jsfiddle.net/Mgcv2/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T20:56:01.123

感觉就像`word-break`是你需要的[http://caniuse.com/word-break](http://caniuse.com/word-break)虽然它是 CSS3 的新属性，还没有那么广泛的支持

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-31T01:29:27.043

使用上述解决方案，但在内部元素上设置 display: table-caption，并且不要设置 max-width: 0px。这将包括 Safari 支持（以及 Firefox 17 和 IE8/9 和 Chrome）

# python - Changing the font in a PDF

> ID：13672763
> 
> 赞同：5
> 
> 时间：2012-12-02T19:14:58.750
> 
> 标签：python, pdf, fonts

I have a repository of PDF documents, and most of the text contained in these documents are formatted in Comic Sans. I would like to change this to something similar to Arial. ***The original font is embedded in the document.*** I haven't found any existing tool to do this for me (I'm on Linux), and I wonder if it's possible to do it programmaticaly. A Python library would be perfect, but a library in any programming language would do.

**In which library will I be able to substitute fonts with the least effort? And which parts of the API would I use?**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T21:57:19.617

有一些商业工具可以做到这一点——其中之一是 callas 软件的 pdfToolbox *（警告——我隶属于这家公司）*。

然而——即使这个功能存在并且有时被使用——结果通常是完全不受欢迎的，而且我还没有看到很多上下文中它被用于非常特定的文件。而且通常成功有限。以至于这种替换只能在我提到的工具中作为手动操作使用——而不是在自动模式下。

根据这些文件的复杂程度，您可能会更成功地将文档中的所有文本提取到诸如 RTF 之类的东西中，在那里进行您需要进行的任何操作，然后重新生成 PDF。听起来像一个迂回的方式，但我猜在大多数情况下结果会更好......

# python - 如何将字符串列表转换为int列表

> ID：13672773
> 
> 赞同：0
> 
> 时间：2012-12-02T19:15:39.797
> 
> 标签：python, python-3.x

我在一个列表中有这个列表

```
a = [['1','2','3','4'],['1','2','3','4'],['1','2','3','4']] 
```

但我需要它是 int ，我不确定在哪里使用 int() 将 str 更改为 int

```
a = [[1,2,3,4],[1,2,3,4],[1,2,3,4]] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T19:30:26.253

您可以像这样使用嵌套列表推导：

```
a = [['1','2','3','4'],['1','2','3','4'],['1','2','3','4']]
b = [ [int(j) for j in i] for i in a] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T19:34:46.453

```
In [51]: a = [['1','2','3','4'],['1','2','3','4'],['1','2','3','4']]

In [52]: [map(int, l) for l in a]
Out[52]: [[1, 2, 3, 4], [1, 2, 3, 4], [1, 2, 3, 4]] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T19:29:51.100

[使用嵌套列表理解](http://docs.python.org/3/tutorial/datastructures.html#list-comprehensions)的示例：

```
In [1]: a = [['1','2','3','4'],['1','2','3','4'],['1','2','3','4']]

In [2]: [[int(s) for s in l] for l in a]
Out[2]: [[1, 2, 3, 4], [1, 2, 3, 4], [1, 2, 3, 4]] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-02T19:37:18.237

这是一个想法：

```
>>> a = [['1','2','3','4'],['1','2','3','4'],['1','2','3','4']]
>>> map(lambda l: map(int, l), a)
[[1, 2, 3, 4], [1, 2, 3, 4], [1, 2, 3, 4]] 
```

# actionscript-3 - 限制 TextArea 中的 numLines

> ID：13672774
> 
> 赞同：1
> 
> 时间：2012-12-02T19:16:01.757
> 
> 标签：actionscript-3, flash, flash-media-server

所以我有一个聊天，我想限制文本字段中的行数。它工作，但有一个小故障我无法摆脱。

```
 "> ALIGN="LEFT">SERVER Gio has connected.Gio: d Gio: d Gio: d Gio: d Gio: d Gio: d  Gio: d Gio: d Gio: d Gio: dd Gio: d Gio: dd 
Gio: d 
Gio: d 
Gio: d 
Gio: d 
Gio: d 
Gio: d 
```

它不是在文本区域中添加更多行，而是在第 0 行添加了一些 html 内容 + 以前的消息。这是我的编码。

```
var nLines:uint = ConsoleTxt.mx_internal::getTextField().numLines;
var startInt:int = 0;
var endInt:int = ConsoleTxt.mx_internal::getTextField().getLineLength(0) 
if(nLines > 7){
    ConsoleTxt.htmlText  = ConsoleTxt.mx_internal::getTextField().htmlText.substring(endInt)

    ConsoleTxt.verticalScrollPosition = ConsoleTxt.maxVerticalScrollPosition
} 
```

请帮忙 ：（

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T01:43:09.397

看起来返回的数据中有一些行返回。在将文本插入文本框之前，您可以尝试手动删除它们。尝试对“\n”进行拆分并再次加入。可能还想在“\r”上拆分。

# asp.net-mvc-4 - 网店项目中的存储库和工作单元使用情况

> ID：13672775
> 
> 赞同：1
> 
> 时间：2012-12-02T19:16:08.887
> 
> 标签：asp.net-mvc-4, repository-pattern

我正在使用 MVC4 razor 语法、存储库和工作单元创建一个网上商店。至少那是我想要做的。

我仍然对存储库和工作单元的使用有一些疑问，我希望我能在这里得到一些澄清。

我找到了两个关于它的好教程。

第一个： [http ://www.tugberkugurlu.com/archive/generic-repository-pattern-entity-framework-asp-net-mvc-and-unit-testing-triangle](http://www.tugberkugurlu.com/archive/generic-repository-pattern-entity-framework-asp-net-mvc-and-unit-testing-triangle)

第二个： [http ://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/implementing-the-repository-and-unit-of-work-patterns-in-an- asp-net-mvc-应用程序](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/implementing-the-repository-and-unit-of-work-patterns-in-an-asp-net-mvc-application)

现在，我都读过，我有点困惑。在第一个中，GenericRepository 类是抽象的，具有 TC 和 T。TC 是 DbContext 对象，T 是类。在第二个 tut 中，只需要一个类。

为什么会有这些不同的方法？是因为第二个教程也使用了工作单元吗？是一个比另一个更好，还是工作单元真的不一定？

在我的项目中，我有 20 个表，这是否意味着如果其中一些用于创建多语言站点，我必须创建 20 个存储库？

最后，这些存储库是属于模型文件夹还是属于“数据访问层”之类的单独文件夹？如果是后者，是否有任何东西属于使用存储库的模型文件夹？

## **有人可以提供清楚吗？**

**PS**：我自己的存储库代码看起来像这样并且可以工作（没有工作单元）：

**IGenericRepository**

```
namespace ArtWebShop.Data_Access_Layer
{
    public interface IGenericRepository<T> where T : class
    {
        IQueryable<T> GetAll();
        IQueryable<T> FindBy(Expression<Func<T, bool>> predicate);
        void Add(T entity);
        void Delete(T entity);
        void Edit(T entity);
        void Save();
    }
} 
```

**通用存储库**

```
public abstract class GenericRepository<TC, T> : IGenericRepository<T>
    where T : class
    where TC : DbContext, new()
{

    private TC _entities = new TC();
    public TC Context
    {

        get { return _entities; }
        set { _entities = value; }
    }

    public virtual IQueryable<T> GetAll()
    {

        IQueryable<T> query = _entities.Set<T>();
        return query;
    }
... 
```

**IMenuRepository**

```
public interface IMenuRepository : IGenericRepository<menu_items_local>
{
    List<menu_items_local> GetMenuItemsByLanguage(string language);
} 
```

**菜单库**

```
public class MenuRepository : GenericRepository<ArtWebshopEntities, menu_items_local>, IMenuRepository
{
    public List<menu_items_local> GetMenuItemsByLanguage(string language)
    {
        var menuItemsLocal = Context.menu_items_local.Where(m => m.cultures.name == language);
        if (!menuItemsLocal.Any()) throw new HttpException(404, "menu items not found");

        return menuItemsLocal.ToList();
    }
} 
```

**通用控制器**

```
public class CommonController : Controller
{
    private readonly IMenuRepository _menuRepository;

    public CommonController()
    {
        this._menuRepository = new MenuRepository();
    }

    public CommonController(IMenuRepository menuRepository)
    {
        _menuRepository = menuRepository;
    }

    [HandleError]
    [ChildActionOnly]
    public ActionResult MenuItems(string language)
    {
        return PartialView("_menuPartial", _menuRepository.GetMenuItemsByLanguage(language));
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T16:33:49.160

在分析了这两种方法后，我得出的结论是，主要区别在于，在使用工作单元的第二个教程中，实体上下文仅声明一次，而在第一个教程中，每个存储库中都提到了上下文实体.

由于第一个教程不使用工作单元，因此不同的存储库没有存储在一个地方。

总之，我可以说第二个教程是更好的方法。

# python - Python PIL - 在裁剪、缩放和保存时将颜色配置文件更改为未标记的 RGB

> ID：13672777
> 
> 赞同：18
> 
> 时间：2012-12-02T19:16:20.703
> 
> 标签：python

无法弄清楚为什么使用 PIL 在裁剪、缩放和保存时更改文档配置文件。已经使用具有 sRGB 作为颜色配置文件的图像进行了测试，并且在它具有未标记的 RGB 之后。

```
def scale(self, image):
    images = []

    image.seek(0)

    try:
        im = PIL.open(image)
    except IOError, e:
        logger.error(unicode(e), exc_info=True)

    images.append({"file": image, "url": self.url, "size": "original"})

    for size in IMAGE_WEB_SIZES:
        d = cStringIO.StringIO()
        try:
            im = crop(image, size["width"], size["height"])
            im.save(d, "JPEG")
            images.append({"file": d, "url": self.scale_url(size["name"]), "size": size})
        except IOError, e:
            logger.error(unicode(e), exc_info=True)
            pass

    return images 
```

我试图让 PIL 使用与原始图像相同的颜色配置文件保存缩放版本。

编辑：据此它应该是可能的[http://comments.gmane.org/gmane.comp.python.image/3215](http://comments.gmane.org/gmane.comp.python.image/3215)，但仍然不适合我使用 PIL 1.1.7

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-26T13:12:46.743

PIL 具有读取 icc_profile 的功能以及使用 icc_profile 保存的方法。所以我所做的是打开文件以获取 icc_profile：

```
try:
    im1 = PIL.open(image)
    icc_profile = im1.info.get("icc_profile") 
```

并在保存时再次将其添加到文件中：

```
im.save(d, "JPEG", icc_profile=icc_profile) 
```

以及完整的代码：

```
def scale(self, image):
    images = []

    image.seek(0)

    try:
        im1 = PIL.open(image)
        icc_profile = im1.info.get("icc_profile")
    except IOError, e:
        logger.error(unicode(e), exc_info=True)

    images.append({"file": image, "url": self.url, "size": "original"})

    for size in IMAGE_WEB_SIZES:
        d = cStringIO.StringIO()
        try:
            im = crop(image, size["width"], size["height"])

            im.save(d, "JPEG", icc_profile=icc_profile)
            images.append({"file": d, "url": self.scale_url(size["name"]), "size": size})
        except IOError, e:
            logger.error(unicode(e), exc_info=True)
            pass

    return images 
```

我已经使用标记（带有 icc 配置文件）和未标记的 jpeg 图像进行了测试。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-21T03:09:24.033

**Update:** Disregard this answer, [@Christoffer's answer](https://stackoverflow.com/a/14537273/520779) is the correct one. As it turns out, `load` was not making any conversions, the ICC profile was just being saved somewhere else.

* * *

I don't think either of these operations are changing the color profile, but the conversion is being done right on `load`. After opening [this sample image](http://dpnow.com/galleries/showphoto.php/photo/12398) using a recent version of PIL (1.1.7 on Windows XP), it is immediatly converted to RGB:

```
>>> from PIL import Image
>>> Image.open('Flower-sRGB.jpg')
<PIL.JpegImagePlugin.JpegImageFile image mode=RGB size=600x450 at 0xD3D3F0> 
```

If I try to save it back the way it is (without changing anything), some quality is lost. If I use a lossless format OTOH, the resulting image looks fine to me:

```
>>> im = Image.open('Flower-sRGB.jpg')
>>> im.save("Flower-RBG.jpg")
>>> im.save("Flower-RBG.png") 
```

Trying to convert the resulting image back to sRGB didn't work:

```
>>> im = Image.open('Flower-sRGB.jpg').convert('CMYK')
>>> im
<PIL.Image.Image image mode=CMYK size=600x450 at 0xD73F08>
>>> im.save("Flower-CMYK.png")

>>> im = Image.open('Flower-sRGB.jpg').convert('sRGB')
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "C:\Python27\lib\site-packages\PIL\Image.py", line 702, in convert
    im = im.convert(mode, dither)
ValueError: conversion from RGB to sRGB not supported 
```

I believe saving in sRGB would require some external library, like [pyCMS](http://www.cazabon.com/pyCMS/) or [LittleCMS](http://www.littlecms.com/). I haven't tried them myself, but here's a [tutorial](http://hipo.biz/en/blog/icc-profile-transformation-using-pil/) (using the latter tool) that looks promising. Finally, here's a [discussion thread](http://grokbase.com/t/python/image-sig/0861ev1hen/anyway-to-keep-icc-profiles-intact-e-g-srgb) about the same problem you're facing (keeping the color profile intact when loading/saving), hopefully it can give you some more pointers.

# r - 使用 r 中的 if 语句填充列

> ID：13672781
> 
> 赞同：5
> 
> 时间：2012-12-02T19:17:04.137
> 
> 标签：r

我有一个非常简单的问题，我目前正在努力解决。如果我有一个示例数据框：

```
a <- c(1:5)  
b <- c(1,3,5,9,11)
df1 <- data.frame(a,b) 
```

如何创建一个新列 ('c')，然后使用 b 列上的 if 语句填充该列。例如： 'cat' 表示 b 中的值为 1 或 2 'dog' 表示 b 中的值介于 3 和 5 之间 'rabbit' 表示 b 中的值大于 6

因此，使用数据框 df1 的“c”列将显示为：猫、狗、狗、兔子、兔子。

提前谢谢了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-02T21:54:35.737

```
dfrm$dc <- c("dog", "cat", "rabbit")[ findInterval(dfrm$b, c(1, 2.5, 5.5, Inf)) ] 
```

findInterval 方法将比嵌套`ifelse`策略快得多，而且我猜测它比循环遍历未嵌套`if`语句的函数要快得多。当我们选择低效算法时，我们这些处理更大数据的人确实注意到了差异。

这实际上并没有解决这个请求，但我并不总是认为 R 的新用户会知道最有表现力或最有效的解决问题的方法。“使用 IF”的请求听起来像是在努力转换两个主要宏观统计处理器 SPSS 和 SAS 的典型编码方法。R`if`控制结构通常不是重新编码列的有效方法，因为它的第一个位置的参数只会针对第一个元素进行评估。它本身不处理列，而`ifelse`函数会这样做。该`cut`函数可能已在此处使用（带有适当的`breaks`和`labels`参数），尽管它会传递一个`factor`-value 而不是字符值。这`findInterval`选择方法是因为它能够返回多个级别（单个级别`ifelse`不能）。我认为`ifelse`在大约 2 或 3 层嵌套之后，chaining 或 nesting 很快就会变得丑陋和混乱。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T19:27:34.537

```
df1 <- 
    transform(
        df1 ,
        c =
            ifelse( b %in% 1:2 , 'cat' ,
            ifelse( b %in% 3:5 , 'dog' , 'rabbit' ) ) ) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-02T19:32:15.873

尽管 ifelse() 很有用，但有时它并不能提供人们直观期望的内容。所以，我喜欢把它写出来。

```
a <- c(1:5)  
b <- c(1,3,5,9,11)
df1 <- data.frame(a,b)

species <- function(x) { 
if(x == 1 | x == 2) y <- "cat"
if(x > 2 & x < 6) y <- "dog"
if(x > 6) y <- "rabbit"
return(y)
}

df1$c <- sapply(df1$b,species) 
```

# javascript - 按 id 编辑获取的 KML 元素

> ID：13672782
> 
> 赞同：1
> 
> 时间：2012-12-02T19:17:15.473
> 
> 标签：javascript, html, dom, kml, google-earth-plugin

也许有人知道为什么函数 getObjectById(id) 在 Google 地球中不起作用？我已将 kml 提取到 DOM，但随后我尝试找到具有 id 的元素，但它并没有返回任何内容。

我在谷歌地球 api 游乐场玩，也许它不支持额外的图书馆？

这是我的代码：

```
<script src="http://www.google.com/jsapi?key=ABQIAAAAuPsJpk3MBtDpJ4G8cqBnjRRaGTYH6UMl8mADNa0YKuWNNa8VNxQCzVBXTx2DYyXGsTOxpWhvIG7Djw" type="text/javascript"></script>
    <script src="http://earth-api-utility-library.googlecode.com/svn/tags/extensions-0.2.1/dist/extensions.pack.js" type="text/javascript"></script>
    <script type="text/javascript">

................

// fetch the KML
      var url = 'http://kml-samples.googlecode.com/svn/trunk/kml/NetworkLink/placemark.kml';
      google.earth.fetchKml(ge, url, finished);
    }

    function failureCallback(errorCode) {
    }

    function getObjectById(id) {
    var foundObject = null;

    // Traverse the DOM, looking for the object with the given ID.
    gex.dom.walk({
    rootObject: ge,
    visitCallback: function() {
      if ('getId' in this && this.getId() == id) {
        foundObject = this;
        return false;  // Stop the walk.
         }
       }
      });

      return foundObject;
    }

    function buttonClick() {
      getObjectById("p");
      alert("Found:" +foundObject);
    } 
```

KML 已加载，按钮有效，但似乎 getObjectById("p"); 不工作...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T20:45:55.763

首先，我认为没有`getObjectById()`，您很可能需要使用`getElementByUrl()`或`getElementById()`

由于您使用的是 fetchKml，我认为您应该`getElementByUrl()`这样使用：

```
var url = 'http://kml-samples.googlecode.com/svn/trunk/kml/NetworkLink/placemark.kml';
var object = ge.getElementByUrl(url + '#' + id); 
```

[有关详细信息，请参阅此页面](https://developers.google.com/earth/documentation/accessors)

# python - 如何检查文本是否具有某种格式？

> ID：13672784
> 
> 赞同：3
> 
> 时间：2012-12-02T19:17:19.650
> 
> 标签：python, python-3.x

如何检查文本/字符串`(number:number-number)` 在 Python 中是否具有格式？

一个例子是`(7:10-9)`

我想我需要使用正则表达式？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-02T19:20:35.890

Yes, that would be the easiest. Example:

```
In [1]: import re

In [2]: re.match('\(\d+:\d+-\d+\)', '(7:10-9)')
Out[2]: <_sre.SRE_Match at 0x24655e0>

In [3]: re.match('\(\d+:\d+-\d+\)', '(7)')

In [4]: 
```

As a function:

```
def match(s):
    return bool(re.match('\(\d+:\d+-\d+\)', s)) 
```

Don't forget to look through [the docs](http://docs.python.org/3/library/re.html).

# c++ - 矢量填充和调整大小

> ID：13672785
> 
> 赞同：1
> 
> 时间：2012-12-02T19:17:30.220
> 
> 标签：c++

我正在研究地图生成器。我正在使用二维向量来保存数据。

标题：

```
class MapGenerator
{
public:
     ...
protected:
    std::vector< std::vector<int> > map;
...
} 
```

一旦 MapGenerator 被实例化，它的大小就知道了，我想知道是否有一种更清洁的方法来正确调整它的大小并用 0 填充它，而不是我目前所做的：

```
MapGenerator::MapGenerator(int dimensionX, int dimensionY) 
: dimensionX(dimensionX), dimensionY(dimensionY)
{
    map.resize(dimensionX);

    for(int i = 0 ; i < map.size() ; i++)
    {
       map[i].resize(dimensionY);
       fill(map[i].begin(), map[i].end(), 0);
    }

} 
```

此代码工作正常，但如果有更清洁或更优化的方法，我想知道。我在 MinGW 下使用 GCC，但我认为我没有启用 C++ 11。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T19:24:48.020

I'd start with a 2D array class, something like this:

```
template <class T>
class array_2D { 
    std::vector<T> data;
    size_t cols;
public:
    array_2D(size_t x, size_t y) : cols(x), data(x*y) {}

    T &operator()(size_t x, size_t y) { return data[y*cols+x]; }
}; 
```

There's no need to explicitly zero-fill it. When you create or resize a `std::vector`, you pass a value that will be used to fill the new "empty" spaces. If you don't pass another value explicitly, it'll use `T()`, which will work out to 0 in the case of built-in arithmetic types (`short`, `int`, `long`, etc.)

Note that as written, this uses parentheses for addressing (like Fortran or BASIC), so to create a 2D array and fill it with random numbers, you could do something like this:

```
array_2D<int> x(10, 10);

for (int i=0; i<10; i++)
    for (int j=0; j<10; j++)
        x(i, j) = rand(); 
```

It's possible to write a class that does 2D addressing using `x[i][j]` syntax, but it's enough more complex that unless you're *really* set on that syntax, it's easier to avoid it. If You really want that, you can see an example (with a 3D array class) in an [older answer](https://stackoverflow.com/a/2216055/179910).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T20:54:28.183

通过为地图本身使用额外的类而不使事情复杂化，这似乎是最简单的方法。

如果您希望避免“填充”函数调用，您可能想查看该行是否

`fill( map[i].begin(), map[i].end(), 0)`

可以用你自己的循环替换，例如“

```
for(int j = 0 ; j < map[i].size() ; j++){ map[i][j] = 0;} 
```

它可能不会增加您的时间复杂度，但可能会影响您的空间复杂度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T19:22:56.743

`resize`有第二个参数，它是要填充的值。一个明确`map[i].resize(dimensionY, 0)`的就足够了。

# java - netbeans java se swing 组件的外观切换到旧的

> ID：13672787
> 
> 赞同：0
> 
> 时间：2012-12-02T19:17:34.463
> 
> 标签：java, swing, netbeans, look-and-feel, nimbus

我正在使用 NetBeans 7.2.1，我想创建一个带有面板、摆动组件的 Java SE 框架。一开始，我的程序的挥杆组件很“漂亮”，由 NimbusLookAndFeal 提供。我不需要设置任何东西，它在一开始就可以工作。过了一会儿，现在组件看起来像旧的了。这是为什么？为什么我的 NetBeans 改变了主意，并且没有显示出 nimbus 的外观和感觉？我知道我可以编写代码来获得 nimbus 的外观和感觉，但我不想要，因为它在一开始就可以工作，而且我无法弄清楚为什么我的 NetBeans 会在一段时间后发生变化。请帮忙！

谢谢你。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-02T19:29:48.650

我想通了！我总是在生成 Frames 和 Panels 时删除它们，并且在 Frame 类的 main 方法中，注释包含 nimbuslookandfeel 设置！16.图片显示： [链接](http://www.oracle.com/webfolder/technetwork/tutorials/obe/java/NimbusLookandFeel_OBE2012/CustomizingLandF.html)

# dotnetnuke - 以 http://localhost:8080/ 身份运行 DotNetNuke 应用程序

> ID：13672795
> 
> 赞同：2
> 
> 时间：2012-12-02T19:18:40.547
> 
> 标签：dotnetnuke

我对 Windows 环境、Dot Net Development 和 Dot Net Nuke Development 完全陌生。我主要是 LAMP 开发人员。

好的，所以我想探索 Dot Net Nuke 并学习如何作为开发人员使用它。昨天，我成功地将它安装到我的 localhost 并使用 url 将其作为网站运行`http://localhost:<someportnumber>`。我能够通过网络浏览器编辑 DNN 网站中的页面。我还能够找到 css 文件并开始更改站点的外观。但是今天，打开我的电脑后，我不记得如何启动网站以及它应该在什么 url+端口号上。

我记得昨天有一些软件为我“启动”了这个网站。我猜该软件指示 IIS 将`C:\Users\john\Documents\My Web Sites\dotnetnuke\`url 的内容作为网站提供`http://localhost:<someportnumber>`。但是我不记得这个软件的名字了！

于是我进入了 IIS 管理器。我偶然发现并尝试将一个新站点添加到应用程序池中。我输入网站的目录、主机名和端口号（这次我选择了8080）。但是当我去时`http://localhost:8080/`，我会收到类似的错误

```
HTTP Error 500.19 - Internal Server Error
The requested page cannot be accessed because the related configuration data for the page is invalid. 
```

谁能告诉我如何重新启动我的 dot net nuke 网站？假设我对 Windows 操作系统一无所知，我习惯于在 Linux 中通过终端/bash 做事。

**附加说明** 我确实安装了 Visual Studios 2010。我还安装了 SQL Server Management Studio 2008。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T19:53:53.110

值得注意的是，任何希望测试最新开源项目的人都可以通过 Microsoft Web Matrix 程序进行测试：http: [//www.microsoft.com/web/webmatrix/](http://www.microsoft.com/web/webmatrix/)另外值得注意的是，微软希望在服务器市场:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T20:06:57.877

好的，我弄清楚了我用来启动 dotnetnuke 项目的软件。它被称为微软网络矩阵。我打开它，选择了我的 dotnetnuke 项目，它启动了网站。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T20:18:08.103

要将它安装在不同的端口上，我相信 web.config 中有一个设置。“使用端口号”

我更喜欢使用安装包（而不是源包）自己安装它。

DotNetNuke 还提供了一些很棒的安装视频。你有很多选择。

他们有很多很棒的视频： http: [//www.dotnetnuke.com/Resources/Video-Library.aspx](http://www.dotnetnuke.com/Resources/Video-Library.aspx)

# javascript - 选择具有两个类的元素

> ID：13672800
> 
> 赞同：11
> 
> 时间：2012-12-02T19:19:17.993
> 
> 标签：javascript, selector

> **可能重复：**
> [如何获取具有多个类的元素](https://stackoverflow.com/questions/7184562/javascript-how-to-get-elements-with-multiple-classes)

处理一些 javascript 代码，将引用页面的当前 URL 设置为传递到 iframe 小部件。无法控制 javascript 所在页面的代码，除了一位 javascript 代码。

我需要抓取的元素值的一个例子如下：

```
<div id="new_p_2FRolls-Royce_p_2F2013-Rolls-Royce-Phantom_p_2BDrophead_p_2BCoupe-4a5be12c0a0a00650143b598a45df25d_p_2Ehtm" class="page NEW_VEHICLE_DETAILS current"> 
```

我正在尝试做的是通过组合类“页面”和“当前”来选择 div。在此示例中，“NEW_VEHICLE_DETAILS”是该页面独有的，并且在其他页面上有所不同。我想创建一个一致的代码，不必像当前那样为每个页面进行更改。这是我现在正在使用的代码：

```
<div id="build_iframe"></div>
<script>
var pageid = document.getElementsByClassName('NEW_VEHICLE_DETAILS')[0].id;
var currenturl = 'http://m.whateverwebsite.com/index.htm#'+pageid;
var shareurl = escape(currenturl);
document.getElementById('build_iframe').innerHTML = '<iframe style="border:1px;width:100%;height:110px;" src="http://widget.mywidgetwebsite.com/share-tool/?current_url='+shareurl+'"></iframe>';
</script> 
```

在这种情况下，jQuery 不是一个选项。如何通过仅选择设置了“页面”和“当前”类的元素来获取 ID 的值？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-12-02T19:21:56.443

您可以使用[`querySelector`](https://developer.mozilla.org/en-US/docs/DOM/Document.querySelector)（或者[`querySelectorAll`](https://developer.mozilla.org/en-US/docs/DOM/Document.querySelectorAll)如果有多个匹配元素并且您希望获得对所有这些元素的引用）：

```
var elem = document.querySelector(".page.current"); 
```

您实际上也可以只使用[`getElementsByClassName`](https://developer.mozilla.org/en-US/docs/DOM/document.getElementsByClassName)，它接受以空格分隔的类名列表：

```
var elems = document.getElementsByClassName("page current"); 
```

# android - Canvas.clipPath(Path) 未按预期剪切

> ID：13672802
> 
> 赞同：21
> 
> 时间：2012-12-02T19:19:25.930
> 
> 标签：android, drawing, android-canvas, image-clipping

我正在尝试将画布绘图操作剪辑到弧形楔形。但是，在将剪切路径设置为画布后，我没有得到预期的结果。

为了说明，这就是我正在做的事情：

![在此处输入图像描述](../Images/9e77b2de1a2d15f2ebb2f5455517c1c3.png)

```
path.reset();

//Move to point #1
path.moveTo(rect.centerX(), rect.centerY());

//Per the documentation, this will draw a connecting line from the current
//position to the starting position of the arc (at 0 degrees), add the arc
//and my current position now lies at #2.
path.arcTo(rect, 0, -30);

//This should then close the path, finishing back at the center point (#3)
path.close(); 
```

这行得通，当我简单地绘制这条路径 ( `canvas.drawPath(path, paint)`) 时，它会绘制如上所示的楔形。但是，当我将此路径设置为画布的剪切路径并在其中绘制时：

```
//I've tried it with and without the Region.Op parameter
canvas.clipPath(path, Region.Op.REPLACE);
canvas.drawColor(Color.BLUE); 
```

我得到了以下结果（留下楔形只是为了显示参考）：

![在此处输入图像描述](../Images/001fc1beaec3d4651bb4037d78200428.png)

所以它似乎剪裁到 的边界矩形`Path`，而不是它`Path`本身。有什么想法吗？

**编辑**就像更新一样，我发现了一种更有效的方法来实现硬件加速。首先，将整个图像（您将要剪裁的）绘制到屏幕外位图中。`BitmapShader`使用 this制作 a `Bitmap`，将该着色器设置为 a ，然后使用该对象`Paint`绘制楔形路径：`Paint`

```
drawMyBitmap(bitmap);
Shader shader = new BitmapShader(bitmap, Shader.TileMode.CLAMP, Shader.TileMode.CLAMP);
Paint paint = new Paint(Paint.ANTI_ALIAS_FLAG);
paint.setShader(shader);

@Override
public void onDraw(Canvas canvas) {
    canvas.drawArc(rect,         //The rectangle bounding the circle
                   startAngle,   //The angle (CW from 3 o'clock) to start
                   sweepAngle,   //The angle (CW from 3 o'clock) of the arc
                   true,         //Boolean of whether to draw a filled arc (wedge)
                   paint         //The paint with the shader attached
    );
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-02T19:42:29.070

您是使用 HC 或更高版本还是使用硬件加速？

如果是这样，则 clipPath 不受支持且存在问题。

[developer.android.com/guide/topics/graphics/hardware-accel.html](http://developer.android.com/guide/topics/graphics/hardware-accel.html)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-05T15:56:26.313

OP 的问题是专门关于使用剪切区域的，@Simon 已经回答了。但是请记住，有一种更直接的方式来绘制实心圆弧：

创建一个`Paint`：

```
mPaint = new Paint();
mPaint.setColor(Color.BLUE);
mPaint.setStyle(Style.FILL);
mPaint.setAntiAlias(true); 
```

绘制时，只需绘制路径：

```
canvas.drawPath(path, mPaint); 
```

# ruby-on-rails - Rails 中没有路线匹配重复错误。如何调试？

> ID：13672809
> 
> 赞同：1
> 
> 时间：2012-12-02T19:20:15.523
> 
> 标签：ruby-on-rails, ruby, routing, associations, has-many-through

所以我有这个错误：

```
Routing Error

No route matches {:action=>"show", :controller=>"products", :list_id=>#<Product id: 1, name: "a", model: "", description: "", version: "", company: "", price: nil, image_source: nil, created_at: "2012-12-02 18:43:26", updated_at: "2012-12-02 18:43:26">} 
```

**注意 :list_id=>#... 看起来有点搞砸了。**不知怎的`Product`就进去了。

这是product.rb

```
class Product < ActiveRecord::Base
  attr_accessible :company, :description, :model, :name, :price, :version

  has_many :list_product_interactions
  has_many :lists, :through => :list_product_interactions

  validates_uniqueness_of :name, :scope => [:version] 
```

这是list.rb

```
class List < ActiveRecord::Base
  attr_accessible :activity, :description, :title

  has_many :list_product_interactions
  has_many :products, :through => :list_product_interactions, :order => "list_product_interactions.votes_up DESC" 
```

这是 list_product_interactions.rb

```
class ListProductInteraction < ActiveRecord::Base
  attr_accessible :list_id, :product_id, :votes_activity, :votes_down, :votes_total, :votes_up

  belongs_to :list
  belongs_to :product 
```

当我创建产品的副本（名称已被占用的产品）时，会发生错误。这是发生错误的控制器：

products_controller.rb

```
class ProductsController < ApplicationController
  def create
    @list = List.find(params[:list_id])
    @product = @list.products.build(params[:product])
    if @list.save
      raise "ok"
      redirect_to list_path(@list)
    else
      @list.reload
      params[:list_id] = @list.id
      render template: "lists/show"
    end
  end

  def show
    @product = Product.find(params[:id])
  end
end 
```

我该如何调试？谢谢

更新：添加了 lists_controller.rb

```
class ListsController < ApplicationController
  def index
    @lists = List.all
  end

  def new
    @list = List.new
  end

  def create
    @list = List.new(params[:list])
    if @list.save
      redirect_to @list
    else
      render :new
    end
  end

  def show
    @list = List.find(params[:id])
    @product = @list.products.build
    nil
  end
end 
```

列表显示模板

```
h1
  = @list.title
br
= @list.description
hr
- @list.products.each do |product|
  - if !product.id.nil?
    = link_to product.name, list_product_path(product), class: "product_link"
    '
    = product.version
    '
    = link_to "up:", "/lists/#{@list.id}/products/#{product.id}/vote_up", :method => :put
    = product.product_up_votes(@list.id)
    '
    = link_to "down:", "/lists/#{@list.id}/products/#{product.id}/vote_down", :method => :put
    = product.product_down_votes(@list.id)

hr
h3 Add products:
= form_for([@list, @product]) do |f|
  - if @product.errors.any?
    |product errors
    = pluralize(@product.errors.count, "error")
    ul
    - @product.errors.full_messages.each do |msg|
      li
        = msg
  br
  = f.label :name
  = f.text_field :name
  br
  = f.label :version
  = f.text_field :version
  br
  = f.submit
hr
= link_to "All lists", lists_path 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T09:53:16.170

您的**`:list_id`**参数值被窃听：

```
Routing Error
No route matches {:action=>"show", :controller=>"products", 
  :list_id=>#<Product id: 1, name: "a", model: "", description: "", version: "", company: "", price: nil, image_source: nil, created_at: "2012-12-02 18:43:26", updated_at: "2012-12-02 18:43:26">} 
```

由于这是一个路由错误，您可能应该发布您**`/config/routes.rb`**的输出，也可能是来自**`rake routes`**.

据我所知，您似乎依赖于**嵌套资源路由**，如下所示：

```
#/config/routes.rb
resources :lists do
  resources :products
end 
```

如果那是真的，那么**krichard**可能是对的，所以你应该使用

```
list_product_path(:id => product.id, :list_id => @list.id )
list_product_path(product,@list)     #this should also work 
```

**如果不通过`product.id`and `list.id`，您的请求将与您的嵌套资源路由不匹配**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T19:53:31.197

**使用 ruby​​-debug 调试 Rails**

* * *

Rails 使用的调试器 ruby​​-debug 是一个 gem。要安装它，只需运行：

```
sudo gem install ruby-debug
# if you run 1.9
sudo gem install debugger 
```

然后你可以做类似的事情

```
<% debugger;true %>
# or in the controller/model/lib
def somemethode
    # ... 
    debugger
    # ...
end 
```

当解释器到达`debugger`语句时，它会停止并让您在控制台中交互式地探索当前环境。

**你的问题**

* * *

...可能位于此处：

```
 = link_to product.name, list_product_path(product), class: "product_link" 
```

那是因为 list_product_path 很可能需要一个列表对象和相应的产品，`list_product_path(@list,product)`或者可能是你的意思`lists_products_path(product)`

# java - 如何根据对象的内容对 ArrayList 进行排序

> ID：13672815
> 
> 赞同：1
> 
> 时间：2012-12-02T19:21:00.407
> 
> 标签：java, arraylist

> **可能重复：**
> [根据姓名对联系人的 ArrayList 进行排序？](https://stackoverflow.com/questions/1814095/sorting-an-arraylist-of-contacts-based-on-name)
> [ArrayList的排序](https://stackoverflow.com/questions/5309136/sorting-of-arraylist)

我有一个`ArrayList`of 类型`Person`，我想根据这个人的年龄对其进行排序：`person.getAge()`.

我怎样才能做到这一点，以便按年龄排序人员列表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T19:24:50.530

```
ArrayList<Person> people = . . .;
Collections.sort(people, new Comparator<Person>() {
        @Override
        public int compare(Person o1, Person o2) {
            final int age1 = o1.getAge();
            final int age2 = o2.getAge();
            return age1 < age2 ? -1 : age1 > age2 ? 1 : 0;
        }
    }
); 
```

在 Java 7 中，您可以`return Integer.compare(age1, age2);`改用。

或者，您可以使用`Person`implement `Comparable<Person>`。但是，您只能对一个属性进行排序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T19:24:56.480

扩展评论，大致如下：

```
Collections.sort(personList, new Comparator<Person>() {
    @Override
    public int compare(Person p1, Person p2) {
        return new Integer(p1.getAge()).compareTo(p2.getAge());
    }
}); 
```

* * *

**相关文件**

*   [`Comparator`](http://docs.oracle.com/javase/6/docs/api/java/util/Comparator.html)
*   [`Collections.sort`](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Collections.html#sort%28java.util.List,%20java.util.Comparator%29)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T19:27:46.303

定义您的`comparator`，它使用`age`属性 O​​nly 进行比较。在集合排序方法中使用相同的方法 [ **sort(java.util.List, java.util.Comparator)** ](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html# sort(java.util.List, java.util.Comparator)) 接受比较器。

```
 Collections.sort(peopleList, new Comparator<Person>(){
             @Override
             public int compare(Person p1, Person p2) {
                return Integer.valueOf(p1.getAge()).compareTo(p2.getAge());
             }
         }); 
```

或者**更好地在下面进行优化**，因为`Integer.compareTo`内部使用`Integer.compare`方法。

```
 Collections.sort(peopleList, new Comparator<Person>(){
             @Override
             public int compare(Person p1, Person p2) {
                return Integer.compare(p1.getAge(), p2.getAge());
             }
         }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-02T19:31:35.917

```
//We can do using TreeMap
//i.e
TreeMap treemap=new TreeMap<int,Person>
//trace over person
for(Person p:YourPersonArrayList)
{
treemap.put(p.getAge(),p);
}
//Finally you get TreeMap which is 
//sorted on Persons age... 
```

# iphone - Music information on the iPhone lock screen

> ID：13672820
> 
> 赞同：0
> 
> 时间：2012-12-02T19:21:33.433
> 
> 标签：iphone, ios, xcode, sdk, mpnowplayinginfocenter

> **Possible Duplicate:**
> [iOS: Updating Media Information in the Background](https://stackoverflow.com/questions/13535397/ios-updating-media-information-in-the-background)

I have an application that streams music from a server, I want to show the information of the now playing music when the user lock the iPhone screen actually I have found this code online:

```
Class playingInfoCenter = NSClassFromString(@"MPNowPlayingInfoCenter");

if (playingInfoCenter) {
    MPNowPlayingInfoCenter *center = [MPNowPlayingInfoCenter defaultCenter];
    NSDictionary *songInfo = [NSDictionary dictionaryWithObjectsAndKeys:
                              @"Artist", MPMediaItemPropertyArtist,
                              @"Title", MPMediaItemPropertyTitle,
                              @"AlbumTitle", MPMediaItemPropertyAlbumTitle,
                              nil];
    center.nowPlayingInfo = songInfo;

} 
```

But I don't know where to inject this code I tried to put it inside the IBAction method which is linked to the play button but it didn't work. Is there any one can help me with that ? please. Thanks in advance.

# android - 带按钮记忆的自定义适配器

> ID：13672821
> 
> 赞同：2
> 
> 时间：2012-12-02T19:21:45.620
> 
> 标签：android, memory, button, adapter

我目前正在将此代码用于按钮的侦听器来执行某些操作：

```
 @Override
 public View getView(int position, View convertView, ViewGroup parent) {
     View v = convertView;
     if (v == null) {
         LayoutInflater vi = (LayoutInflater)c.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
         v = vi.inflate(R.layout.list_row, null);
     }
     Person p = persons.get(position);
     if (p != null) {

         Button but = (Button) v.findViewById(R.id.buttonId);
         but.setText(p.getDescription());
         but.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                // do stuff
            }
        });

     }
     return v;
 } 
```

现在我想知道，这对内存管理有好处还是在活动本身中做一个 onListItemClick 更好？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T19:33:55.440

> 现在我想知道，这对内存管理有好处吗

它可以更好。因为列表被滚动并且这些项目被重复使用，你最终会创建很多`OnClickListener`对象并孤立其他对象。这不一定是内存泄漏，因为旧的会被收集，但这仍然不是一个好的选择。

> 还是在活动本身中做一个 onListItemClick 更好？

如果您因为列表中的某个项目只有一次单击操作而可以侥幸逃脱，那么您绝对应该坚持`OnItemClickListener`列表而不是自己处理。

但是，如果您需要将每个项目的特定部分创建为可点击或希望对给定项目执行多个操作，那么最好将这些操作收集到一个单独`OnClickListener`创建一次然后附加到中的每个项目`getView()`。您可以通过将有关单击操作的元数据以及列表位置附加到视图本身来区分单击了哪个项目`setTag()`。如果这个逻辑很复杂，最好为列表项创建一个自定义视图，让视图本身处理每一行的所有点击，而不是尝试在外部处理这些操作。

# vb.net - xslt.Load(New XmlTextReader(New StringReader(xslt))) "xslt 编译错误"

> ID：13672823
> 
> 赞同：3
> 
> 时间：2012-12-02T19:21:57.507
> 
> 标签：vb.net

我已经阅读了其他帖子，但它们并没有解决我的问题。环境是 VB 2008 (2.0 Framework) 下面的代码导致`XSLT Compile error`在线`xslt.Load`下面是错误的输出。我将 XSLT 作为字符串传递，所以不知道为什么会出现错误。

```
Public Function xFrmTlogs(ByVal sXLST As String, ByVal sXML As String) As String
    Dim xslt As New XslCompiledTransform()
    Dim HTMLoutput As String
    Dim writer As New StringWriter()

    Try
        xslt.Load(New XmlTextReader(New StringReader(sXLST.ToString)))
    Catch ex As Exception
        xFrmTlogs = ex.ToString
    End Try

    Dim sourceReader As System.Xml.XmlReader = System.Xml.XmlReader.Create(New System.IO.StringReader(sXML))

    Try
        xslt.Transform(sourceReader, Nothing, writer)
    Catch ex As Exception
        xFrmTlogs = ex.ToString
    End Try

    HTMLoutput = writer.ToString()
    writer.Close()
    xFrmTlogs = HTMLoutput
End Function 
```

* * *

> System.Xml.Xsl.XslLoadException：XSLT 编译错误。(3,2) 处发生错误。--- System.IO.DirectoryNotFoundException：找不到路径“H:\Program Files\common\tr_period.xsl”的一部分。在 System.IO.__Error.WinIOError(Int32 errorCode, String maybeFullPath) 在 System.IO.FileStream.Init(String path, FileMode mode, FileAccess access, Int32 rights, Boolean useRights, FileShare share, Int32 bufferSize, FileOptions options, SECURITY_ATTRIBUTES secAttrs , String msgPath, Boolean bFromProxy) at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize) at System.Xml.XmlDownloadManager.GetStream(Uri uri, ICredentials credentials) at System。 System.Xml.Xsl.Xslt.XsltLoader 中的 Xml.XmlUrlResolver.GetEntity(Uri absoluteUri, String role, Type ofObjectToReturn)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T10:24:35.420

存储在中的 XSLT 脚本`sXSLT`可能包含一个`<xsl:include>`或一个`<xsl:import>`元素，该元素试图在`H:\Program Files\common\tr_period.xsl`. 由于该文件不存在或无法访问，因此转换失败。

# php - 使用 PHP 显示 'all fields required' 错误（默认隐藏）

> ID：13672827
> 
> 赞同：0
> 
> 时间：2012-12-02T19:22:09.797
> 
> 标签：php

我想知道如何在提交表单后显示“所有必填字段”通知但之前将其隐藏。这是我的代码：

```
if (isset($_POST['region'], $_POST['description'], $_POST['remarks']) && !empty   ($_POST['region']) && !empty($_POST['description']) && !empty($_POST['remarks']) )
{
     $region = mysql_escape_string($_POST['region']);
     $description = mysql_escape_string($_POST['description']);
     $remarks = mysql_escape_string($_POST['remarks']); 

     if (strlen($region>50)) {
         $error .= "Only 50 characters are allowed in the region field.";
     }

     else {
           if (strlen($description>500)) {
               $error .= "Only 500 characters are allowed in the region field.";
           }

           else {
              mysql_query("INSERT INTO register (region, description, remarks) VALUES(
                        '$region', 
                        '$description', 
                        '$remarks') ") or die('Not saved. ' . mysql_error()); 
           }

     }
}

else {
    $error.= "Please fill all the fields.";
}
echo $error;
?>

//form starts here 
```

但是，即使是第一次加载页面（不提交输入），使用它也会显示“请填写所有字段”。我该怎么做？另外，即使是嵌套的 'if' 也不起作用。这些字符串仍然可以提交:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T19:55:31.807

检查用户请求是 POST 还是 GET。

通过简单地检查是否设置了 $_POST 将是最容易实现的。

```
/* ... */
else if (isset($_POST)) { 
          $error.= "Please fill all the fields.";
        } 
```

我很确定你可以通过检查来达到同样的效果`$_SERVER['REQUEST_METHOD'] == 'POST'`，可能会更干净一些。

# c - 是否可以从 C 中的文件开头删除 N 个字节？

> ID：13672833
> 
> 赞同：5
> 
> 时间：2012-12-02T19:22:33.637
> 
> 标签：c, file

是否可以从 C 中的文件开头删除 N 个字节？

N 仅为 30 个字节。

我无法复制文件，因为它们非常大（有时甚至 100 GB）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T19:37:22.397

在 Linux 上，您可以创建指向另一个文件中的偏移量的环回设备。[这是](https://unix.stackexchange.com/a/25333)unix.stackexchange 中的一个示例：

```
#!/bin/bash
for ((i=0;i<10000;i++)); do
    printf "%7d\n" $i
done >/var/tmp/file
losetup -v -f -o 512 --sizelimit 512 /var/tmp/file
losetup -a
head -2 /var/tmp/file
echo ...
tail -2 /var/tmp/file
echo ===
head -2 /dev/loop0
echo ...
tail -2 /dev/loop0 
printf "I was here" > /dev/loop0
grep here /var/tmp/file
losetup -d /dev/loop0 
```

输出：

```
loop device: /dev/loop0
/dev/loop0: [0808]:136392 (/var/tmp/file), offset 512, size 512
      0
      1
...
   9998
   9999
===
     64
     65
...
    126
    127
I was here   65 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T21:23:33.930

您不能从文件开头删除 30 个字节，但没有什么能阻止您覆盖文件（至少，在大多数 Unix 文件系统上）。就其花费的时间而言，这相当于一个副本，但它不会耗尽您的可用磁盘空间。

这里有一个可能会有所帮助的小功能，尽管我没有彻底测试它。

一个警告：它曾经`off_t`是一个 32 位有符号整数，因此 pread、pwrite 和 ftruncate 不能用于大于 2GB 的文件。在 Linux 上，情况不再如此。但是，可能需要使用 pread64、pwrite64 和 ftruncate64。在您确认它确实可以在您的操作系统上运行之前，不要在您关心的非常大的文件上尝试此操作。

```
int fshift(int fd, off_t to, off_t from) {
  if (from <= to) {
    fprintf(stderr, "%s\n", "Unimplemented: fshift can only shift left");
    errno = ERANGE;
    return -1;
  }
  char buffer[BUFFER_SIZE];
  for (;;) {
    ssize_t n_read = pread(fd, buffer, BUFFER_SIZE, from);
    if (n_read < 0) {
      int tmp = errno;
      perror("fshift: could not read file");
      errno = tmp;
      return -1;
    }
    from += n_read;
    if (n_read == 0) {
      int rc = ftruncate(fd, to);
      if (rc < 0) {
        int tmp = errno;
        perror("fshift: could not truncate file");
        errno = tmp;
      }
      return rc;
    }
    for (char* p = buffer, *lim = &buffer[n_read]; p < lim;) {
      ssize_t n_write = pwrite(fd, p, lim - p, to);
      if (n_write < 0) {
        int tmp = errno;
        perror("fshift: could not write file");
        errno = tmp;
        return -1;
      }
      p += n_write;
      to += n_write;
    }
  }
} 
```

# delphi - delphi Treeview 节点操作

> ID：13672837
> 
> 赞同：4
> 
> 时间：2012-12-02T19:23:02.373
> 
> 标签：delphi, treeview

我有这个树视图结构：

```
Users
  |_Online
  |_Offline
    |_ user1 --> current status offline 
    |_ user2 --> current status Online
    |_ user3 --> current status offline
    |_ user4 --> current status online 
```

我想要做的是当用户在线时，他将从离线节点中删除并移动到在线节点。user2 和 user4 的示例，请提供任何帮助

非常感谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-02T19:26:45.717

假设您使用的是内置的`TTreeView`，那么您可以调用该[`TTreeNode.MoveTo`](http://docwiki.embarcadero.com/Libraries/XE3/en/Vcl.ComCtrls.TTreeNode.MoveTo)方法。

```
user2node.MoveTo(onlineNode, naAddChild); 
```

如果您提出评论：

> 如何在代码中访问离线子节点？

像这样：

```
node := offlineNode.getFirstChild;
while Assigned(node) do
begin
  DoSomething(node);
  node := node.getNextSibling;
end; 
```

# android - xbian/raspberry pi 由 xbmc 从 android 远程控制

> ID：13672840
> 
> 赞同：-1
> 
> 时间：2012-12-02T19:23:16.643
> 
> 标签：android, raspberry-pi, xbmc

有人对使用 Adnroid 应用 XBMC Remote 运行 XBian/XBMC 的 RaspberryPi 进行远程控制有经验吗？

我有最新型号的 Raspberry Pi，XBian 1.0Alpha3，XBian 允许远程控制。

如果我尝试通过我的 wlan 中的 PC 和网络浏览器访问它，它工作正常。

如果我打开 Android 应用程序，配置相同，我什至连接到同一个 wlan，我得到 Java I/O 异常：

```
java.io.FileNotFoundException
http://192.168.2.10:8080/xbmcCmds/xbmcHttp?command=GetSystemInfo(120)? 
```

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T19:55:49.847

[http://code.google.com/p/android-xbmcremote/issues/detail?id=670](http://code.google.com/p/android-xbmcremote/issues/detail?id=670)

[http://code.google.com/p/android-xbmcremote/issues/detail?id=673](http://code.google.com/p/android-xbmcremote/issues/detail?id=673)

似乎表明这里实际上有两个问题：

一是该程序误导性地报告网络故障，就好像它是本地未找到的文件一样。当人们实施错误处理时，这可能是一个常见的（也是令人讨厌的）错误，但这样做并不完整。

第二个是XBMC的一些最新版本（尤其是树莓派）不支持这个特定的网络控制通道——这是失败的真正原因，只是被前者隐藏了。

[https://github.com/freezy/android-xbmcremote/issues/49](https://github.com/freezy/android-xbmcremote/issues/49)有一个可能的解决方法

# ruby-on-rails - Rails - NilClass 的未定义方法“model_name”：新操作中的类

> ID：13672841
> 
> 赞同：1
> 
> 时间：2012-12-02T19:23:17.780
> 
> 标签：ruby-on-rails, forms, actioncontroller

我不明白为什么，但我的新观点开始崩溃。

我有模型票

```
class Ticket < ActiveRecord::Base
 attr_accessible :body, :department, :email, :name, :reference, :subject, :status
 has_many :replies, :dependent => :destroy 
```

和简单的新动作

```
def new
  logger.debug "#{@ticket}"
  @ticket = Ticket.new
  respond_to do |format|
    format.html # new.html.erb
    format.json { render json: @ticket }
  end
end 
```

和 new.haml.html（**对于错误的 haml 格式感到抱歉**）：

```
 = form_for @ticket do |f|
 - if @ticket.errors.any?
 #error_explanation
  %h2= "#{pluralize(@ticket.errors.count, "error")} prohibited this ticket from being saved:"
  %ul
    - @ticket.errors.full_messages.each do |msg|
      %li= msg

 .field
  = f.label :name
  = f.text_field :name
 .field
 - if current_admin
 = f.label :email
 = f.text_field :email, :value => "#{current_admin.email}", :disabled => :true
 - else
  = f.label :email
 = f.text_field :email
 .field
 = f.label :department
 = f.select :department, options_for_select(["First department","Second department","Third department"])
.field
 = f.label :subject
 = f.text_field :subject
 .field
  = f.label :body
 = f.text_area :body
- if current_admin
 .field
  = f.label :status
    = f.select :status, options_for_select(["Waiting for Staff Response","Waiting for Customer","On Hold", "Cancelled", "Completed"])
  .actions
    = f.submit 'Save' 
```

错误：

```
ActionView::Template::Error (undefined method `model_name' for NilClass:Class):
1: = form_for @ticket do |f|
2:   - if @ticket.errors.any?
3:     #error_explanation
4:       %h2= "#{pluralize(@ticket.errors.count, "error")} prohibited this ticket from being saved:"
app/views/tickets/_form.html.haml:1:in   
`_app_views_tickets__form_html_haml__659380982_96991070'
 Rendered /home/denmed/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.8/lib
/action_dispatch/middleware/templates/rescues/_trace.erb (5.9ms)
 Rendered /home/denmed/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.8/lib
 /action_dispatch/middleware/templates/rescues/_request_and_response.erb (4.1ms)
Rendered /home/denmed/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.8/lib
/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (42.2ms) 
```

和路线.rb

```
 resources :tickets do 
  resources :comments
 end 
```

我可以从控制台创建票证，那么问题出在哪里？有人可以建议错误在哪里吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T20:20:38.747

问题是`@ticket`不知何故被“消灭”了。那是因为当您查看 form_for 内部时

```
 def form_for(record, options = {}, &proc)
   # .... 
   object = record.is_a?(Array) ? record.last : record
   object_name = options[:as] || ActiveModel::Naming.param_key(object)
   # ....
end 
```

在哪里`ActiveModel::Naming.param_key(object)`被调用，我们最终采用以下方法

```
 def model_name_from_record_or_class(record_or_class)
    (record_or_class.is_a?(Class) ? record_or_class : record_or_class.class).model_name
  end 
```

在那里你可以看到如果你将 nil 传递给这个方法，它会抛出你发布的错误 - 所以检查@ticket 获取的位置和原因`nil`
要做到这一点，你可能需要遵循[本指南](http://guides.rubyonrails.org/debugging_rails_applications.html)，它解释了如何调试 Rails 应用程序。

* * *

而且您可能还想交换这些行。

```
def new
    logger.debug "#{@ticket}"
    @ticket = Ticket.new
end 
```

因为它现在的方式是你不会得到任何有用的输出。

# javascript - 如何使用 标记而不是 to load a Spry vertical menu? 问问题 问问题 2012-12-02T19:23:39.563 4127 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. Thanks in advance for any help you can offer. I have searched for weeks on this topic and cannot find anything that will work. I'm in charge of updating an online resource guide for employees at my office. My work uses a proprietary web software called InQuira Info Manager for people to search the repository for answers. Basically it works like WordPress. It's a web-based WSYIWYG web editor, but you can add source code manually as well. At work, I use Dreamweaver CS2 [upgrading is not a current option] and all our machines have IE7—I have no idea for how much longer. So, whatever I build has to be compatible with IE7 and cannot be a data-driven site, such as using PHP or other server-side technologies. I can, however, use JavaScript, whether referenced externally or inline. The pages used for the reference guide are a two-colum format, with a left sidebarfor navigation and a right mainto display the content. I pulled the source code for a Spry vertical flyout menu from my copy of Dreamweaver CS6 at home and pasted it into my CS2 pages at work, inside a "#nav"within the sidebar. Here's the problem: I need to be able to have the source HTML for the Spry menu file loaded into the, rather than pasted in many different instances across multiple pages. As this is a resource guide, it will be regularly updated, so if I add or remove a topic, I don't want to have to do so twenty times, once for each topic. Template layouts will not work either, since I can't just hit the "re-publish" button in Dreamweaver—with Info Manager, I have to copy the entire HTML file's source code and manually paste it into the Info Manager file, sort of like creating a new WordPress entry. I have tried using an with no end of trouble; specifically, at least in IE7 tags do not appear to respect the z-Index property and so no matter what, the flyout menus fall behind the content. No matter what I do, I can't get them on top of the content . I have read about using JavaScript to use the .innerHTML property to load the content into the "#nav"but I must be doing something wrong. I paste the script code within the area and call the script within the HTML file, but can't get it to work. I will admit that I'm certainly no pro when it comes to web design, but everything was going great until I hit this wall. IE7 sucks but I can't compel my work to upgrade. Any workaround ideas using JavaScript or other non-server-side alternatives would be great. Thank you! javascripthtmliframedreamweaverinnerhtml 4 1 回答 1 This answer is useful 0 首先，iFrame：iFrame 在您的情况下不起作用（在任何浏览器 AFAIK 中），因为无论您设置什么 z 索引，iFrame 内的内容都不会溢出到它之外；因此，如果您的菜单作为下拉子菜单，它将隐藏在iFrame 内。 关于document.write('...')方法：我个人不喜欢使用document.write()，因为我觉得它使代码有点乱，因为它需要将代码嵌入到 html 中。 您的其他方法是正确的：将 Spry 菜单的内容保存在 HTML 文件中（没有头部或主体，只有 div 的内容）。在要显示菜单的位置添加标签（也添加菜单所需的所有外部 CSS）；然后，在页面头部添加下一个 Javascript：  这就在结束标签之前：  如果这可行，您可能希望将位于头部的函数放在外部 Javascript 文件中（这样您就不会在每个页面中都有代码），并将调用保留在正文的末尾。 如果它不起作用，我建议您在打开控制台的情况下在 Google chrome 中测试它（按F12，您可能还需要按F5一次），并在函数内添加一些console.log()调用，这样您就知道问题出在哪里是。修复它，然后在 IE 中再次测试它。 于 2012-12-22T02:33:48.307 回答 Related 2 c# - Modifier to only allow execution from a base class? 1 sql - Database Link Connection Timed Out 2 python - 在 Python 中打印字符串和变量的新手问题 2 java - Java 组合是如何工作的？ 2 google-chrome-extension - 通过扩展名更改谷歌浏览器主页 3 php - PHP在5个变量之间平均切换 1 android - 如何更改 ListPreference **Button** 的外观 1 amazon-web-services - Route 53 DNS 健康检查可能吗？ 2 vba - Word 宏中的条件替换 1 php - 显示计划算法 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：13672846
> 
> 赞同：0
> 
> 时间：
> 
> 标签：javascript, html, iframe, dreamweaver, innerhtml

Thanks in advance for any help you can offer. I have searched for weeks on this topic and cannot find anything that will work.

I'm in charge of updating an online resource guide for employees at my office. My work uses a proprietary web software called InQuira Info Manager for people to search the repository for answers. Basically it works like WordPress. It's a web-based WSYIWYG web editor, but you can add source code manually as well.

At work, I use Dreamweaver CS2 [upgrading is not a current option] and all our machines have IE7—I have no idea for how much longer. So, whatever I build has to be compatible with IE7 and cannot be a data-driven site, such as using PHP or other server-side technologies. I can, however, use JavaScript, whether referenced externally or inline.

The pages used for the reference guide are a two-colum format, with a left sidebar `<div>` for navigation and a right main `<div>` to display the content. I pulled the source code for a Spry vertical flyout menu from my copy of Dreamweaver CS6 at home and pasted it into my CS2 pages at work, inside a "#nav" `<div>` within the sidebar `<div>`.

Here's the problem: I need to be able to have the source HTML for the Spry menu file loaded into the `<div>`, rather than pasted in many different instances across multiple pages. As this is a resource guide, it will be regularly updated, so if I add or remove a topic, I don't want to have to do so twenty times, once for each topic. Template layouts will not work either, since I can't just hit the "re-publish" button in Dreamweaver—with Info Manager, I have to copy the entire HTML file's source code and manually paste it into the Info Manager file, sort of like creating a new WordPress entry.

I have tried using an `<iframe>` with no end of trouble; specifically, at least in IE7 `<iframe>` tags do not appear to respect the z-Index property and so no matter what, the flyout menus fall behind the content `<div>`. No matter what I do, I can't get them on top of the content . I have read about using JavaScript to use the `.innerHTML` property to load the content into the "#nav" `<div>` but I must be doing something wrong. I paste the script code within the `<head>` area and call the script within the HTML file, but can't get it to work.

I will admit that I'm certainly no pro when it comes to web design, but everything was going great until I hit this wall. IE7 sucks but I can't compel my work to upgrade. Any workaround ideas using JavaScript or other non-server-side alternatives would be great. Thank you!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T02:33:48.307

首先，iFrame：iFrame 在您的情况下不起作用（在任何浏览器 AFAIK 中），因为无论您设置什么 z 索引，iFrame 内的内容都不会*溢出*到它之外；因此，如果您的菜单作为下拉子菜单，它将隐藏*在*iFrame 内。

关于`document.write('...')`方法：我个人不喜欢使用`document.write()`，因为我觉得它使代码有点乱，因为它需要将代码嵌入到 html 中。

您的其他方法是正确的：将 Spry 菜单的内容保存在 HTML 文件中（没有头部或主体，只有 div 的内容）。`<div id='nav'>`在要显示菜单的位置添加标签（也添加菜单所需的所有外部 CSS）；然后，在页面头部添加下一个 Javascript：

```
<script type="text/javascript">
    function loadSidebar()
    {
        var xmlhttp;
        if (window.XMLHttpRequest){
            //Modern browsers (including IE8+, not sure if IE7)
            xmlhttp=new XMLHttpRequest();
        }else{//IE7, IE6 and IE5
            xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
        }

        xmlhttp.onreadystatechange=function()
        {
            if(xmlhttp.readyState==4 && xmlhttp.status==200)
            {   //This will reemplace the content of the #Nav div 
                document.getElementById("nav").innerHTML=xmlhttp.responseText;
            }
        }
        xmlhttp.open("GET","SidebarMenu.html",true);
        xmlhttp.send();
    }
</script> 
```

这就在结束标签之前`</body>`：

```
<script type="text/javascript">
    loadSidebar();
 </script> 
```

如果这可行，您可能希望将位于头部的函数放在外部 Javascript 文件中（这样您就不会在每个页面中都有代码），并将调用保留在正文的末尾。

如果它不起作用，我建议您在打开控制台的情况下在 Google chrome 中测试它（按`F12`，您可能还需要按`F5`一次），并在函数内添加一些`console.log()`调用，这样您就知道问题出在哪里是。修复它，然后在 IE 中再次测试它。

# c++ - 引用映射中嵌套对中的值

> ID：13672848
> 
> 赞同：5
> 
> 时间：2012-12-02T19:23:44.620
> 
> 标签：c++, dictionary, vector, std-pair

我有一个地图，其中包含一个 int 和一对嵌套的两个字符串：

```
map<int, pair<string, string> > books; 
```

我还有一个字符串向量。

```
vector<string> returned; 
```

以及伴随它们的两个迭代器：

```
vector<string> returned::iterator it2; 
map<int, pair<string, string> >::iterator it3; 
```

我正在尝试访问嵌套在映射中的对的第一个字符串，以将其与“返回”向量的当前字符串进行比较。我正在使用两个迭代器来做到这一点。但是，我似乎无法访问嵌套对的第一个字符串。

```
//PUT BACK BORROWED BOOKS    
for (it2 = returned.begin(); it2 != returned.end(); it2++){ 
    //SEARCH FOR POSITION OF BOOK 
    for (it3 = books.begin(); it3 != books.end(); it3++){   
                    //PROBLEM IN LINE BELOW
        if(it2 == (it3->second-> first)) 
            int bookPos = it3 -> first;  

    }
} 
```

有谁知道如何引用这对中的第一个字符串？显然“it->second-> first”不是解决方案。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T19:28:59.133

有两个错误。`it3->second`不是迭代器。同样正如评论中提到的，您正在将 it2 （迭代器）与字符串进行比较。出现错误的行应如下所示：

```
if(*it2 == (it3->second.first)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-16T14:12:57.653

地图也是很好的查找表。映射键对应于由一对表示的两个值。下面的示例显示了如何访问键和对值。

```
int main()
{
typedef map<string, pair<int, int> > op_type;
op_type op = {
             {"addu", make_pair(33, 1) }
             };

vector<string> this_line;

op_type::const_iterator i = op.find(this_line[0]);
if( i != op.end() )
{
    cout << "key: " << i-first << endl;
    cout << ".first value in pair " << i->second.first << endl;
    cout << ".second value in pair " << i->second.second << endl;
}
} 
```

打印： key: addu 33 对中的第一个值 1 对中的第二个值

# computation - language over {1} which is recognizable but not decidable?

> ID：13672850
> 
> 赞同：7
> 
> 时间：2012-12-02T19:23:53.023
> 
> 标签：computation

What is an example of a language over the alphabet {1}* which is recognizable but not decidable?

I have troubles finding an example of this. After a long search, I am still curious for the answer though.

A hint would be very welcome.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T19:39:30.043

由于任何有限字母表上的字符串都是可数的，**因此每种语言都可以映射到自然数的子集**。因此，您只需采用不可判定的递归可枚举语言并将其映射到 {1}* 的子集。

例如，在停止问题的经典版本中，我们将每个图灵机枚举为二进制字符串；您现在可以对所有图灵机进行排序并**定义`f : TM -> N`从图灵机到整数**的映射，其中`f(TM) = n`如果 TM 是`nth`所有 TM 的有序列表中的图灵机。

现在，编码为一元数的图灵机的停机问题是可解决的，但不可判定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T19:37:45.413

想象一台机器给定两台字母为 {1}* 的机器，如果第一台机器可以生成第二台机器可以生成的所有字符串，则接受它。

如果它接受，我们的机器就会停止。但是对于不是该语言的字符串（第一个给定的机器不能生成第二个可以生成的所有字符串），我们的机器可能会停止并拒绝，或者可能永远不会停止。这意味着我们的图灵机是可识别的，但它是不可判定的。

有关可识别和不可判定语言的更多信息，请参阅[数学百科全书（特别是第 56 页）。](http://books.google.com/books?id=s9F71NJxwzoC&pg=PA56#v=onepage&q=undecidable&f=false)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-13T01:16:32.357

{1}* 中唯一不可判定的子集是空集。

我们可以根据 TM 在 {1}* 上定义语言： L = { < M > | M 是一个 TM 并且 L(M) = 空 }

所以我们可以证明 L 是不可判定的，因为接收 L 作为输入的 TM U 需要测试 {1}* 上的所有元素，然后在 M 拒绝所有元素的情况下决定接受，所以它永远不会停止并且这意味着 L 不可判定，意味着空语言不可判定

# php - 如何在 symfony2 中使用 PHPExcel 修改 excel 文件

> ID：13672851
> 
> 赞同：1
> 
> 时间：2012-12-02T19:23:54.230
> 
> 标签：php, symfony, phpexcel

在我的项目中，我使用 symfony2 PHPExcel 包装器[https://github.com/liuggio/ExcelBundle](https://github.com/liuggio/ExcelBundle)

通过上面链接中的示例，我可以创建新的 excel 文件。然而，这个文件根本没有样式或标记。所以我创建了一个excel模板，我想在其中输入一些数据。

我知道如何加载一个excel文件：

```
$excelObj = $this->get('xls.load_xls2007')
                 ->load($this->get('kernel')
                 ->getRootDir() . '/../web/excel-template.xlsx');

//custom modifications on excel file 
```

现在我需要创建一个响应。但是在 ExcelBundle 的文档中没有关于如何做到这一点的信息。他们只是展示了如何响应由代码创建的 excel 文件。

我试过：

```
 $excelService->setExcelObj($excelObj);
 $response = $excelService->getResponse();
 //the rest is equal to the code in the doc 
```

但它给了我一个空白的excel文档。

任何想法如何使用加载的 excel 文件做出响应？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T15:08:11.093

你可以这样做

```
// Read the file
    $objReader = PHPExcel_IOFactory::createReader($fileType);
    $objPHPExcel = $objReader->load($fileName);

    // Change the file
    $objPHPExcel->setActiveSheetIndex(0)
                ->setCellValue('A1', 'Hello')
                ->setCellValue('B1', 'World!');

    // Write the file
    $objWriter = PHPExcel_IOFactory::createWriter($objPHPExcel, $fileType);
    $objWriter->save($fileName); 
```

如果你不明白请评论..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T21:11:40.993

我会将文件保存到磁盘并亲自将用户重定向到磁盘版本。这将允许几件事

*   您的 Web 服务器提供文件而不是 PHP，从性能和内存使用的角度来看，这是一件好事。
*   稍微解耦您的体系结构以允许将来进行更改，例如将 Excel 文件的创建和加载移动到异步操作。
*   [使用http://wiki.nginx.org/XSendfile](http://wiki.nginx.org/XSendfile)的能力（还有一个 Apache 模块）。
*   用户可以重新下载文件或暂停和恢复下载而不重新创建它。

为此，您需要

*   创建文件后将文件保存到 Web 可访问的临时目录
*   将用户重定向到该文件位置
*   创建一个 cron 或其他删除临时目录中旧文件的作业。

tempfile api (http://us2.php.net/tmpfile) 在这里可能很有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-06T23:10:09.440

PHPExcelbundle 的新版本 2.* 可以帮助您。

现在可以：

```
//read
$phpExcelObject = $this->get('phpexcel')->createPHPExcelObject('file.xls');
$phpExcelObject->setActiveSheetIndex(0)
  ->setCellValue( 'C6', 'some text' )
  ->setCellValue( 'D6', 'some text2' );
$writer = $this->get('phpexcel')->createWriter($phpExcelObject, 'Excel5');
$writer->save('file.xls');
// or 
$response = $this->get('phpexcel')->createStreamedResponse($writer); 
```

# node.js - npm executable path issues

> ID：13672852
> 
> 赞同：1
> 
> 时间：2012-12-02T19:24:03.597
> 
> 标签：node.js, npm, nodejitsu

So up until a few weeks ago npm was symlinking global installs into my /usr/local/bind dir - but this stopped and I am not sure how to get it to do so again.

I realized it because I could not update nodejitsu - the version never changed. I realized that while it was downloading it did not update the /usr/local/bin/jitsu that was there. Deleting the symlink and reinstalling jitsu did not fix it. Tried it with other packages as well.

# javascript - javascript奇怪的错误

> ID：13672853
> 
> 赞同：3
> 
> 时间：2012-12-02T19:24:13.583
> 
> 标签：javascript, javascript-events

我被一个奇怪的问题困住了！

我有这个代码：

```
<script>
  window.PRICES = {
    'Gold' : { 10: 299, 20: 400, 100: 1745, },
    'Coins': { 10: 300, 40: 355, 1000: 30000, },
  };
</script>
<script>
function pick(i,n) {
  document.getElementById("Item").innerHTML = i+" "+n;
  document.getElementById("Price").innerHTML = (window.PRICES)[i][n];
}
</script> 
```

该函数`pick`由 select 的 onchange 事件调用：

```
<select name="Gold" onchange="pick(this.value,this.name)">
  <option value="10">10 Gold</option>
  <option value="20">20 Gold</option>
  <option value="100">100 Gold</option>
</select> 
```

但是当我更改值时，我得到“未捕获的类型错误：无法读取未定义的属性‘黄金’”但`window.PRICES`不是未定义！怎么了？

PS：我可以`pick('Gold','10')`使用 GC 控制台调用！！！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-02T19:28:58.737

`onchange`切换处理程序的参数顺序。应该是`pick(this.name, this.value)`，因为您*首先*访问`PRICES`对象，然后才*访问*对象，就像在您的示例中一样。*`name`*`value``pick('Gold', '10')`**

# php - CodeIgniter - log error about sessions while using output cache

> ID：13672858
> 
> 赞同：3
> 
> 时间：2012-12-02T19:24:41.513
> 
> 标签：php, codeigniter, session, caching

I am using Phil Sturgeon's cache library -- [http://getsparks.org/packages/cache/show](http://getsparks.org/packages/cache/show).

This works nicely - the only thing is that now I notice that each time a cached page is loaded, I get this message in my log:

```
The session cookie data did not match what was expected. This could be a possible hacking attempt. 
```

My sessions are stored in the database.

Does anyone have any pointer on what I should look into to solve this problem?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T21:55:44.010

我建议你在图书馆的 ide 中搜索`"The session cookie data did not match what was expected. This could be a possible hacking attempt."`

通常 IDE 有一个`ctrl+f`查找选项只是搜索，您将能够了解导致此消息的原因，然后如果您没有抓住发布代码片段；）

> 注意：通常如果您在 config.php 中为会话使用加密密钥，并且您更改它会引发完全相同的错误，导致旧会话具有不同的加密密钥（您使用的旧密钥）

# netbeans - Adding pre-install code to the netbeans platform "package as" installers

> ID：13672859
> 
> 赞同：3
> 
> 时间：2012-12-02T19:24:45.210
> 
> 标签：netbeans, deployment, platform

I have built an application that installs and runs fine on my Windows computer on the first install. I wish a computer novice to be able to re-install it from scratch. At this time, I have to manually delete the directory where the installer puts it. C:\ProgramFiles..... This is trivial code that I would know how to write, if I could get to a pre-install area within the deployment installer. How can I get this code into the deployment installer?

Alternately, is there an option the user could push to delete the previous version. The deployment installer obviously knows that the previous files are already there? Other installers say something like "Do you want to re-install" and then take care of the problem.

I would also like to include my version of the java virtual machine with my deployment. I have found several descriptions of how to do this, but they do not always agree.

I am new to java, ant and Netbeans but have over 50 years programming experience. This is an elegant solution to many standard programming problems. It seems a shame that two conceptually simple holes should exist.

Ann Maybury

# c# - Azure - 从辅助角色访问与 Web 角色相同的 blob

> ID：13672864
> 
> 赞同：3
> 
> 时间：2012-12-02T19:24:59.063
> 
> 标签：c#, azure, role, worker, webrole

我是 Azure 的新手，我想创建一个简单的 .Net 应用程序（在 C# 中），它有一个 Web 角色和一个辅助角色来上传和调整图像大小。我已经在网络角色中制作了一个画廊。它会创建一个 blob，然后将图片上传到那里，然后显示它们。

我现在想做的事情：如果任何图片太大，则发送消息将队列扔给工作角色，然后在工作角色中调整它们的大小。我的问题是我看不到如何访问在 web 角色中创建的同一个 blob（首先我想在本地开发模拟器中访问它）。如果我在工作角色属性 --> 设置页面中添加一个新条目，它将给我一个完全不同的 blob 连接字符串，不是吗？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T21:06:54.127

为了从多个角色访问相同的存储帐户，您需要将连接字符串添加到云项目中的所有角色：

![在此处输入图像描述](../Images/1812c29200737536d3dfbaee3eb94ae5.png)

要初始化客户端，您将编写如下内容（同样，这对您的所有角色都是相同的）：

```
CloudStorageAccount storageAccount = CloudStorageAccount.Parse(
    CloudConfigurationManager.GetSetting("MyStorageAccount")); 
```

每当您的 Web 角色向队列发送消息以通知 Worker 角色应调整图像大小时，只需包含 url 或容器名称 + blob 路径。有了这些信息，您的 Worker Role 将能够获取 blob 并进行所需的处理。

我建议你看看官方的 Windows Azure 培训工具包。其中一个动手实验室完全可以使用留言簿应用程序完成您在此处尝试执行的操作（在 Web 角色上上传图像，在 Worker 角色中创建缩略图，...）：[HOL-IntroToCloudServices Ex2-UsingWorkerRolesAndQueues](https://github.com/WindowsAzure-TrainingKit/HOL-IntroToCloudServices/tree/master/Source/Ex2-UsingWorkerRolesAndQueues/End)

# javascript - 延迟 onmouseover javascript

> ID：13672865
> 
> 赞同：3
> 
> 时间：2012-12-02T19:25:06.677
> 
> 标签：javascript, hover, onmouseover

我对大多数网络开发的东西都很陌生，所以我恳请您提供一些支持。我有一个图像映射，我在其中分配了几个区域，在单独的 div 中触发不同的内容。我现在想为 onmouseover 触发器添加一个延迟，这样 div 中的内容只有在用户将光标放在该区域而不是意外悬停在该区域上时才会更新。

这是我用来切换 div 内容的 js：

```
function showHideDivs(indx){
hideDivs();
oShowHideDivs[indx].style.display = 'block';
}

function hideDivs(){
for(i=0; i < oShowHideDivs.length; i++){
    oShowHideDivs[i].style.display = 'none';
}
}

window.onload=function(){
oShowHideDivs = document.getElementById('container').getElementsByTagName('div');
var oMap = document.getElementById('myMap');
for(i=0; i < oMap.areas.length; i++){
    oMap.areas[i].indx = i;
    oMap.areas[i].onmouseover=function(){
        showHideDivs(this.indx);
    }
  }
} 
```

那么我如何实施延迟以及在哪里？提前谢谢！一月

编辑：我现在使用这种方法：

```
oMap.areas[i].onmouseover=function(){
var area=this;
var delay=setTimeout(function(){showHideDivs(area.indx);},100);
area.onmouseout=function(){clearTimeout(delay);};
} 
```

对我来说似乎最容易。谢谢提示！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T19:37:49.173

最简单的方法是在鼠标悬停时包含超时，并在鼠标悬停时将其清除。

```
oMap.areas[i].onmouseover=function(){
    var area=this;
    var delay=setTimeout(function(){showHideDivs(area.indx);},100);
    area.onmouseout=function(){clearTimeout(delay);};
} 
```

对于更复杂的场景，请使用类似[hoverintent](http://cherne.net/brian/resources/jquery.hoverIntent.html)的插件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T19:33:49.220

您需要使用 setTimeout()`showHideDivs()`在一定延迟后调用您的函数。如果用户在延迟结束之前移动鼠标，则停止调用此函数。

在此处查看具体示例：[https ://stackoverflow.com/a/6231142/1606729](https://stackoverflow.com/a/6231142/1606729)

# qt - Change signal-slot connection in a slot when called

> ID：13672866
> 
> 赞同：1
> 
> 时间：2012-12-02T19:25:19.933
> 
> 标签：qt, signals-slots

I have a use case when user actions initialise application data at each runtime. To represent that behavior here is my sample code:

**SignalSlotChange.h**

```
#ifndef SIGNALSLOTCHANGE_H
#define SIGNALSLOTCHANGE_H

#include <QtGui>

class SignalSlotChange : public QWidget
{
Q_OBJECT

public:
    SignalSlotChange(QWidget *parent = 0);

private slots:
    void firstCall();
    void secondCall();

private:
    QPushButton *button;

};

#endif // SIGNALSLOTCHANGE_H 
```

**SignalSlotChange.cpp**

```
#include "SignalSlotChange.h"

SignalSlotChange::SignalSlotChange(QWidget *parent) : QWidget(parent)
{
    button = new QPushButton("Messgage", this);
    QObject::connect(button, SIGNAL(clicked()), this, SLOT(firstCall()));
    show();
}

void SignalSlotChange::firstCall()
{
    QMessageBox::information(this, "SignalSlotChange", "First call", QMessageBox::Ok, QMessageBox::NoButton);
    // Change the signal-slot connection to secondCall()
    QObject::disconnect(button, SIGNAL(clicked()), this, SLOT(firstCall()));
    QObject::connect(button, SIGNAL(clicked()), this, SLOT(secondCall()));
}

void SignalSlotChange::secondCall()
{
    QMessageBox::information(this, "SignalSlotChange", "Second call", QMessageBox::Ok, QMessageBox::NoButton);
}

int main(int argc, char *argv[])
{
    QApplication app(argc, argv);
    SignalSlotChange ssc;
    return app.exec();
} 
```

When the button is pressed then the initialising slot `firstCall()` is called. It changed the signal-slot connection to `secondCall()` for subsequent signals.

The problem with the way I do it is that it is highly coupled and requires that slot knows exact method and signals to change it.

With `QObject::sender()` I would know origin of sender but not its signal, and I would know about just one sender which happened to emit that signal.

I can do it with a Boolean `first_call` but that would be making a check on Boolean value for all subsequent calls, something which I want to avoid and hence this question.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T15:04:19.273

通过使用指向成员的方法可以实现稍微不同的解决方案：

**SignalSlotChange.h**

```
#ifndef SIGNALSLOTCHANGE_H
#define SIGNALSLOTCHANGE_H

#include <QtGui>

class SignalSlotChange : public QWidget {
Q_OBJECT

public:
    SignalSlotChange(QWidget *parent = 0);

private slots:
    void callCall();

private:
    void (SignalSlotChange::* delegate) (); 

    void firstCall();
    void secondCall();

    QPushButton *button;

};

#endif // SIGNALSLOTCHANGE_H 
```

**SignalSlotChange.cpp**

```
#include "SignalSlotChange.h"

SignalSlotChange::SignalSlotChange(QWidget *parent) : QWidget(parent) {
    delegate = &SignalSlotChange::firstCall;

    button = new QPushButton("Messgage", this);
    QObject::connect(button, SIGNAL(clicked()), this, SLOT(callCall()));
    show();
}

void SignalSlotChange::callCall() {
    (this->*delegate) ();
}

void SignalSlotChange::firstCall() {
    QMessageBox::information(this, "SignalSlotChange", "First call", QMessageBox::Ok, QMessageBox::NoButton);

    // Change the effective signal-slot connection to secondCall()
    delegate = &SignalSlotChange::secondCall;
}

void SignalSlotChange::secondCall() {
    QMessageBox::information(this, "SignalSlotChange", "Second call", QMessageBox::Ok, QMessageBox::NoButton);
}

int main(int argc, char *argv[]) {
    QApplication app(argc, argv);
    SignalSlotChange ssc;
    return app.exec();
} 
```

我不确定从解耦的角度来看这是否是更好的解决方案，但优点是该机制不需要了解实际触发的插槽的任何信息。实现“方法切换”的完整逻辑封装在`SignalSlotChange`类中。该`callCall()`插槽可以连接到任何其他兼容信号，并且方法切换仍然有效，无需进一步更改代码。

# d3.js - 如何将svg形状放在一个圆圈中？

> ID：13672867
> 
> 赞同：8
> 
> 时间：2012-12-02T19:25:24.820
> 
> 标签：d3.js

我正在玩一点 D3.js 并且我得到了大部分工作。但我想将我的 svg 形状放在一个圆圈中。所以我会用颜色和文字来展示数据的差异。我知道如何画圆圈和饼图，但我想基本上有一个相同大小的圆圈。并且不要让它们重叠，顺序无关紧要。我不知道从哪里开始，找出每个圆圈的 x 和 y。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-02T19:34:21.937

如果我理解正确，这是一个相当标准的数学问题：

只需以适当的步长循环某个*角度*`sin()`变量，然后使用and`cos()`来计算您的 x 和 y 值。

例如：

假设您要放置 3 个对象。一个圆圈有 360 度。所以每个对象都与下一个对象相差 120 度。如果您的对象大小为 20x20 像素，请将它们放置在以下位置：

```
 x1 = sin(  0 * pi()/180) * r + xc - 10;  y1 = cos(  0 * pi()/180) * r + yc - 10
 x2 = sin(120 * pi()/180) * r + xc - 10;  y2 = cos(120 * pi()/180) * r + yc - 10
 x3 = sin(240 * pi()/180) * r + xc - 10;  y3 = cos(240 * pi()/180) * r + yc - 10 
```

这里，`r`是圆的半径，是`(xc, yc)`圆的中心点的坐标。确保对象的`-10's`中心（而不是左上角）在圆上。将`* pi()/180`度数转换为弧度，这是大多数实现`sin()`和`cos()`需要的单位。

注意：这会将形状均匀分布在圆圈周围。为确保它们不重叠，您必须选择`r`足够大的。如果对象具有简单且相同的边界，只需布置其中的 10 个并计算出您需要的半径，然后，如果您需要放置 20 个，则将半径设为两倍，30 设为三倍，依此类推。如果对象是不规则形状的，并且您想将它们以最佳顺序围绕圆圈放置以找到可能的最小圆圈，那么这个问题将变得非常混乱。也许有一个库可以解决这个问题，但我的脑海中没有一个库，而且由于我没有使用过 D3.js，我不确定它是否也会为您提供此功能。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-02T20:41:18.097

这是另一种方法，用于任意大小的形状，使用 D3 的`tree`布局：http: [//jsfiddle.net/nrabinowitz/5CfGG/](http://jsfiddle.net/nrabinowitz/5CfGG/)

`tree`布局（[文档](https://github.com/mbostock/d3/wiki/Tree-Layout)，[示例](http://bl.ocks.org/4063550)）将根据给定的半径和返回任意两个项目中心之间距离的函数为您计算出每个项目的 x,y 位置。在这个例子中，我使用了不同大小的圆，所以它们之间的间隔是它们半径的函数：

```
var tree = d3.layout.tree()
    .size([360, radius])
    .separation(function(a, b) {
        return radiusScale(a.size) + radiusScale(b.size);
    }); 
```

使用 D3`tree`布局解决了第一个问题，将项目布置成圆形。正如@Markus 所指出的，第二个问题是如何计算圆的正确半径。为了方便起见，我在这里采取了一种稍微粗略的方法：我将圆的周长估计为各种项目的直径之和，中间有给定的填充，然后从周长计算半径：

```
var roughCircumference = d3.sum(data.map(radiusScale)) * 2 +
        padding * (data.length - 1),
    radius = roughCircumference / (Math.PI * 2); 
```

这里的圆周并不精确，圆圈中的项目越少，这个圆周就越不准确，但对于这个目的来说它已经足够接近了。

# shell - $ 是什么意思？在shell脚本中是什么意思？

> ID：13672869
> 
> 赞同：0
> 
> 时间：2012-12-02T19:25:32.730
> 
> 标签：shell, unix

我遇到了$？在我进行集成的其中一个 shell 脚本中（不是我编写的）。

只是想确认它是指上一个命令的返回码。

用法类似于

```
runSomeCommand $VAR1 $VAR2 $VAR3

processResult $? 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-02T19:26:47.820

`$?`是最后执行的命令的退出状态。

```
ls
....
echo $?
0

$ ls notexistingfile
ls: cannot access notexistingfile: No such file or directory

echo $?
2 
```

# actionscript-3 - AS3 如何在单独的文件中使用 addChild()

> ID：13672870
> 
> 赞同：1
> 
> 时间：2012-12-02T19:25:34.443
> 
> 标签：actionscript-3, flash

如何将已放入数组的 MovieClip 添加到舞台？以下代码是一个单独的 .as 文件，与 main.fla 位于同一级别，我尝试了很多次，但收到错误消息 -

> “ReferenceError：错误 #1065：未定义变量阶段。在 main_fla::MainTimeline/frame1() 的 Set1() 处”

我能怎么做？感谢您的帮助！

```
package 
{
    import flash.display.MovieClip;
    import flash.display.Stage;
    public class Set1
    {
        private var map:Array=new Array();

        public function Set1()
        {
            for (var i:Number=0; i<5; i++)
            {
                var cell_mc=new cell();
                cell_mc.x = 50+ i*cell_mc.width;
                cell_mc.y = 50;
                cell_mc.className=i;
                map[i] = cell_mc;
                trace(map[i].className);
                stage.addChild(map[i]);
                }

        }

    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T19:34:21.517

你有点搞混了。`stage`不是魔术变量，而是从`DisplayObject`基类继承的属性。当显示对象添加到舞台时，该属性会在内部设置。因此，在您的情况下，您的类需要继承自一个`DisplayObject`- 可能是`Sprite`类。`Stage`或者只是在调用函数时从外部注入对

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T20:36:39.740

首先，您需要设置 Main flash 文件类。您可以通过单击 fla 中的 stage 来完成。文件并在属性中编辑你的类（应该看起来像这样（class：Set1））下面的代码应该可以正常工作

```
 package 
    {
        import flash.display.MovieClip;
        import flash.display.Sprite;
        public class Set1 extends Sprite
        {
            private var map:Array=new Array();

            public function Set1()
            {
                for (var i:Number=0; i<5; i++)
                {
                    var cell_mc=new cell();
                    cell_mc.x = 50+ i*cell_mc.width;
                    cell_mc.y = 50;
                    cell_mc.className=i;
                    map[i] = cell_mc;
                    trace(map[i].className);
                    addChild(map[i]);
                    }

            }

        }

    } 
```

# c# - Windows 8 app refuses to connect to Azure service with a proxy running

> ID：13672871
> 
> 赞同：0
> 
> 时间：2012-12-02T19:25:47.507
> 
> 标签：c#, wcf, azure, proxy, windows-8

I've got an app in the Windows 8 store that uses a WCF service hosted on Azure. When I use my proxy program, [UltraSurf](http://ultrasurf.us/), the app fails to connect to the service with this error:

> The content type text/html of the response message does not match the content type of the binding (text/xml; charset=utf-8). If using a custom encoder, be sure that the IsContentTypeSupported method is implemented properly. The first 472 bytes of the response were: '
> 
> The requested URL could not be retrieved
> 
> '.

The URL mentioned in the quote is the default 'can't find the page Url' that UltraSurf produces and so the error message is probably of no use. The question is, why/how does Ultrasurf block/get in the way of my connection?

Can anybody shed some light on what's going on and why it fails connect please?

Thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T01:24:12.710

Working without much information here, but I'd suspect that the problem is that the proxy is just being a little picky.

I believe that your error message basically says, "I'm expecting to get back 'text/xml' data, but what I see is 'text/html' data". That's probably not because it can actually see 'text/html' data coming back, but rather, because it's not seeing the content type header from the response telling it that it *is* xml data.

I don't know exactly how you implemented your WCF service, or what type of data it's set up to return, but you might want to ensure that you explicitly set the content type somewhere in your code before the return and see what happens. Something like:

```
Response.ContentType = "text/xml"; 
```

The only other thing that springs to mind is that your application might be picky about the content type for XML in general. There's a bit of, um... [subtle difference](http://www.grauw.nl/blog/entry/489)... around whether the appropriate content type for XML is 'application/xml' or 'text/xml'. It's possible that your service is presenting the one that your proxy doesn't like?

# php - 无法在 html 中解析 php

> ID：13672874
> 
> 赞同：1
> 
> 时间：2012-12-02T19:25:58.833
> 
> 标签：php, .htaccess

我一直在殴打自己，试图在我的 html 中获取我的 php 解析。我在 .htaccess 中使用了以下内容但无济于事。

```
AddType application/x-httpd-php .html - a dialog box pops up asking me to open a php file
AddType application/x-httpd-php5 .html - Same
AddHandler application/x-httpd-php .html - Same
AddHandler php-script .html - just doesnt parse but looking into the source code you can see the php
AddHandler php5-script .html - Same 
```

我还想指出，普通的 .php 文件在服务器上运行良好。

是什么赋予了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T19:35:51.773

您必须更改服务器配置。进入您的 httpd.conf 或 .htaccess 并更改此行（或接近它的内容）：

```
addtype application/x-httpd-php .php 
```

像这样解析 .html 文件：

```
addtype application/x-httpd-php .php .html 
```

然后重启服务器

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T19:51:18.910

没关系，想通了。它与我的文档类型有关。short_open_tag 已启用，因此 php 正在尝试解析，因为它认为它是 php.ini 文件。

解决方案：

需要使用正确的 php 语法打印特定的行

```
<?php echo "<?xml version=\"1.0\" encoding=\"UTF-8\"; ?> ?> 
```

# c++ - 停止将值发送到下一个函数

> ID：13672878
> 
> 赞同：0
> 
> 时间：2012-12-02T19:26:28.863
> 
> 标签：c++

我有这个工作代码：

```
/* Include files */
#include <iostream>
#include <string>
#include <limits>

using namespace std;

void fnMainMenu(char s);

/******************************************************************************
* Function: fnUpdateSalary
* Description: Update employee salary
******************************************************************************/
void fnUpdateSalary()
{   
    int choice = 0;
    char data = 'a';
    incorrect_input: // goto teleport exit :)
    cout<<"\n\t=======================";
    cout<<"\n\tWelcome\n";
    cout<<"\t=======================\n\n";
    cout<<"1\. Update employee salary\n";
    cout<<"2\. Main menu\n";
    cout<<"3\. Exit system\n";
    cout<<"\n >> ";

    cin>>choice;
    cin.clear();
    cin.ignore(numeric_limits<streamsize>::max(),'\n');

    switch(choice){
        case 1 : 
            //fnUpdateSalary();
            break;
        case 2 : 
            fnMainMenu(data);
            break;
        case 3 : 
            exit(1);
            break;
        default :   
        cout<<"Input not recognized. Please enter the correct input.\n";

    }
}

void fnLog()
{   
 char data = 'b';
fnMainMenu(data); // call Main Menu and I want to pass "hello"
}

/******************************************************************************
* Function: fnMainMenu
* Description: Menu for the customer 
******************************************************************************/
void fnMainMenu(char s)
{   
     cout << s;

if (s == 'a')
{ cout << "a = admin";
}
else
{cout << "\n\nb not admin";
}

    //system("cls");
    int chooice = 0;

    cout<<"\n\t=======================";
    cout<<"\n\tWelcome\n";
    cout<<"\t=======================\n\n";
    cout<<"1\. Manage employee\n";
    cout<<"2\. Search employee\n";
    cout<<"3\. Employee report\n";
    cout<<"4\. Reset password\n";
    cout<<"5\. Exit system\n";
    cout<<"\n >> ";
int numbers = 2;
    cin>>chooice;
    cin.clear();
    cin.ignore(numeric_limits<streamsize>::max(),'\n');

    switch(chooice){
        case 1 : 
            fnUpdateSalary();
            break;
        case 4 : 
        //  fnChangePassword();
            break;          
        default : exit(1);

    }
}

/******************************************************************************
* Function: main
* Description: The main calling function
******************************************************************************/
int main()
{   

    fnLog();
    return 0;
} 
```

`fnLog()`发送`b`到`fnMainMenu()`. 当我在时，`fnUpdateSalary()`我想再去`fnMainMenu()`一次。我的问题是，在不再次声明变量的情况下，是否有`fnUpdateSalary()`任何可调用的函数？我希望我可以使用而不是 `fnMainMenu()``data``fnMainMenu();`

```
char data = 'r'; fnMainMenu(data); 
```

`error C2660: 'fnMainMenu' : function does not take 0 arguments`如果我刚刚打电话，我会收到此错误`fnMainMenu();`

我希望我的问题有意义。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T19:57:39.147

无论如何，该参数似乎没有真正的用途。传递`b`到主菜单功能当然没有任何效果。如果您只想区分管理员和非管理员访问权限，请更改参数的类型和用法：

```
void fnMainMenu(bool is_admin) {
    if (is_admin)
        cout << "Admin\n";
    else
        cout << "Not admin\n";
} 
```

并这样称呼它：

```
fnMainMenu(true);
// Or, alternatively:
fnMainMenu(false); 
```

就是这样。顺便说一句，您不需要（也不应该！）在此处声明要作为参数传递的变量。只需直接传递值，就像我在上面所做的那样。

另外，为什么您的函数名称以 ? 为前缀`fn`？不要这样做，这不是一个好习惯。只需使用能够很好地解释函数功能的专有名称即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T19:43:35.810

由于您正在编写 C++ 代码，并且`data`在应用程序逻辑方面似乎相对较长，因此将这些函数重新组合到一个类中可能是有意义的。

`data`可以是此类的数据成员，并且`fnUpdateSalary`, `fnLog`,`fnMainMenu`方法。

```
class Application {
public:
  Application ()
  : data ('b') // default value
  { }

  void fnLog() {
    data = 'b';
    fnMainMenu ();
  }

  void fnMainMenu() {
    if (data == 'a')
      cout << "a = admin";
    else
      cout << "\n\nb not admin";

    // ...
    fnUpdateSalary ();
    // ...
  }

  void fnUpdateSalary() {
    // ...
    fnMainMenu ();
    // ...
  }

private:
  char data;
};

int main () {
  Application app;
  app.fnLog ();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T19:44:08.630

如果我完全理解您在做什么，您需要将两件事结合起来。首先是 fnMainMenu 中的静态变量，其次是默认参数：

```
fnMainMenu(char s = '\0')
{
  static char c;
  if(s != '\0') c = s;
  ...
  ...
} 
```

“静态”关键字意味着该字符将在函数调用中保留。默认参数意味着 s 将被分配一个空终止字符，除非您显式传递另一个值。

# java - Tomcat 上的 HTTPClient

> ID：13672884
> 
> 赞同：0
> 
> 时间：2012-12-02T19:26:54.683
> 
> 标签：java, tomcat, httpclient

如果这是一个愚蠢的问题，我真的很抱歉。

我有一个在 unix 机器上运行的 tomcat 服务器。我想使用 HTTPClient 库。它是与 tomcat 预先捆绑的还是您需要安装它？

如果人们说只需将其添加到您的类路径中。我应该从这里下载源代码还是二进制文件：

[http://hc.apache.org/downloads.cgi](http://hc.apache.org/downloads.cgi)

下载后，有一种方法可以使用 .tar.gz 自动安装它，因为我认为我过去已经这样做了。如果不是，是否只是将文件夹放在驱动器上并将其添加到类路径中？

TIA

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T19:39:23.507

每个 Web 应用程序都应该将自己的依赖项打包到可部署的 WAR 文件中。用应用程序可能需要的任何库来扩展 Tomcat 的全局库是不明智的做法。

在 WAR 构建方面，您应该坚持的常见做法是不要自己管理依赖项；它很快变成了一场噩梦。使用 Maven 配置您的项目，它将管理依赖项并为您构建 WAR。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T19:31:30.433

只需`httpclient....jar`在 Tomcat 目录中查找文件。如果那里没有，则将其放在`lib`目录中:)

您应该下载相应的`jar`文件。它包含可移植的库代码。一旦放置在类路径中，Tomcat 就会找到它。Tomcat 目录有一个`lib`子目录。这是所有 Web 应用程序的全局类路径部分。

# iphone - Twitter Bootstrap 子导航关闭而不是激活 iPhone 上的链接

> ID：13672889
> 
> 赞同：2
> 
> 时间：2012-12-02T19:27:31.617
> 
> 标签：iphone, twitter-bootstrap, navigation

我的网站上有以下导航

```
<div class="navbar navbar-fixed-top">
    <div class="navbar-inner">
        <div class="container">
            <button type="button" class="btn btn-navbar pull-right" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="brand" href="/"><span class="icon-chevron-up icon-medium"></span> Rocky Mountain Arts</a>
            <div class="nav-collapse collapse">
                <ul class="nav">
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Gallery <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            <li><a href="/Gallery" class="pjax">For Sale</a></li>
                            <li><a href="/Gallery/Sold" class="pjax">Sold</a></li>
                            <li><a href="/Gallery/PrivateCollection" class="pjax">Private Collection</a></li>
                        </ul>
                    </li>
                    <li><a href="/About" class="pjax">About The Artist</a></li>
                    <li><a href="/Contact" class="pjax">Contact</a></li>
                </ul>
            </div>
        </div>
    </div>
</div> 
```

当我在我的桌面上查看该站点时，我看到了所有预期的内容，并且可以浏览所有链接。

但是：当我在 iPhone 上加载网站时，按下`toggle collapse`按钮然后展开`dropdown`，我无法单击下拉菜单中的任何子链接，而是关闭菜单并激活“关于”或“联系人”链接反而。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T16:36:10.277

感谢@MiikaL 的评论。看起来这是在 Github 上提交的一个错误，没有人真正在官方源代码中解决。

[https://github.com/twitter/bootstrap/issues/4550](https://github.com/twitter/bootstrap/issues/4550)

这可以在 github 组件演示页面
[http://twitter.github.com/bootstrap/components.html#buttonDropdowns上重现](http://twitter.github.com/bootstrap/components.html#buttonDropdowns)

有些人在胎面中有有用的信息，而“黑客”解决方案似乎是

```
// Fixes sub-nav not working as expected on IOS
$('body').on('touchstart.dropdown', '.dropdown-menu', function (e) { e.stopPropagation(); }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T03:20:38.983

这个问题最终在最新的 Twitter Bootstrap 2.2.2 版本中得到修复：

您可以在此处阅读有关 2.2.2 中更改日志的简短摘要：http: [//forwebonly.com/things-you-should-know-about-twitter-bootstrap-2-2-2/](http://forwebonly.com/things-you-should-know-about-twitter-bootstrap-2-2-2/)

# algorithm - 选择排序比插入大数组更快吗？

> ID：13672893
> 
> 赞同：2
> 
> 时间：2012-12-02T19:27:47.307
> 
> 标签：algorithm, sorting, insertion-sort

> **可能的重复：**
> [插入排序与冒泡排序与选择排序的效率？](https://stackoverflow.com/questions/12887629/efficency-of-insertion-sort-vs-bubble-sort-vs-selection-sort)

选择排序比插入大数组更快吗？最坏的情况是什么时候？

我知道插入比选择快，但是对于大型数组和最坏的情况？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T19:40:19.933

所涉及的数组的大小很少有很大的影响。

真正的问题是比较与复制的速度。选择排序获胜的时间是比较*比*复制快得多。举个例子，让我们假设两个字段：一个 int 作为键，另外一个兆字节的数据附加到它上面。

在这种情况下，比较只涉及单个 int，因此速度非常快，但复制涉及整个兆字节，因此几乎可以肯定会慢一些。

由于选择排序做了很多比较，但比较少的副本，这种情况将有利于它。插入排序会做更多的副本，所以在这种情况下，较慢的副本会减慢它的速度。

就选择排序的最坏情况而言，情况恰恰相反——复制速度很快，但比较速度很慢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T19:49:15.237

根据[维基百科的文章](http://en.wikipedia.org/wiki/Insertion_sort#Comparisons_to_other_sorting_algorithms)，

> 一般来说，插入排序会写入数组 O(n2) 次，而选择排序只会写入 O(n) 次。由于这个原因，在写入存储器比读取更昂贵的情况下，例如使用 EEPROM 或闪存，选择排序可能更可取。

无论数组大小如何，这都是正确的。事实上，随着数组变大，差异会更加明显。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T19:38:39.700

插入排序，如果实施得当，使用 memcpy() 移动其他值。所以它取决于处理器、缓存速度（第一级第二级缓存）、缓存大小，当一个算法变得比另一个更快时。

我记得一个实现（是 java 吗？）当元素的数量不超过特定的硬编码阈值时使用一个算法，否则使用另一个算法。

所以，你只需要测量它。大 O 表示法对于中小型数组有点误导，那么 O(N) 表示 c * O(N)。因素 c 影响总执行时间。

# c++ - 识别已将哪个基类 shared_ptr 传递到超类 shared_ptr 向量中

> ID：13672895
> 
> 赞同：2
> 
> 时间：2012-12-02T19:27:55.900
> 
> 标签：c++, inheritance, vector, shared-ptr

我正在做一个 C++ 项目，专门实现一个调车场算法。

我有一个函数可以创建一个`shared_ptr`超类类型的向量，但是被推入这个向量的类都是基类`shared_ptr`。

然后我需要获取这个向量并将其传递给另一个函数，并在 for 循环中对向量的每个元素执行不同的逻辑。然而，我执行的逻辑取决于向量的每个元素中存在哪个基类。

所以基本上我不知道的是如何识别向量的每个元素中的基类类型。当我调试它们时，它们都以类型超类的形式出现。

所以一般我想做这样的事情：

```
if(vectorElement == baseClass)
{
  //do some logic
} 
```

或者，如果有一些我想念的执行此操作的不同方法，我将有兴趣执行此操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T20:07:16.843

您的问题有很多解决方案，坦率地说，这是 OOP 中几乎最常见的问题。

最明显的是虚函数在不同的类中做不同的事情：

```
class SuperClass {
public:
   virtual void doSomething(/*someArgsIfNeeded*/) {
      // some base implementation, possible empty
      // or just use pure virtual function here
   }
};

class SubClass : public SuperClass {
public:
   virtual void doSomething(/*someArgsIfNeeded*/) {
      // some base implementation
   }
}; 
```

然后按如下方式使用它：

```
int SomeArgs;
std::vector<std::shared_ptr<SuperClass>> objects;
for (auto it = objects.begin(); it != objects.end(); ++i)
  it->doSomething(/*someArgsIfNeeded*/); 
```

* * *

其他更复杂的解决方案是使用[访问者模式](https://stackoverflow.com/questions/255214/when-should-i-use-the-visitor-design-pattern)。

* * *

使用强制转换 (dynamic_cast) 被认为是一种不好的做法，因此始终寻找比强制转换更多的 OO 解决方案，就像我在上面介绍的这两个一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T19:34:08.610

在我的脑海中，一个简单的解决方案是在基类中有一个函数，它返回一个 int 表示它是哪个类。并且在每个派生类中，重写此函数以返回不同的值。您可以使用该值来确定哪个类存储在向量中

编辑：通常类的具体细节将留在类中，这是多态性的重点。尝试将派生类特定的计算作为每个类中的覆盖成员函数进行，并使用它来获取值，而不需要在外部进行大型 for 循环（对于每个新的派生类）。

# php - 从 PHP 生成的 ZIP 适用于 winrar 但不适用于其他人？

> ID：13672897
> 
> 赞同：0
> 
> 时间：2012-12-02T19:28:00.727
> 
> 标签：php, zip

我有一些 PHP 代码允许用户提交文件。然后我可以下载 ZIP 文件。如果我将 windows 与 Winrar 一起使用，它解压缩得很好，我可以打开我的文件，这一切都很好。我已经在多台计算机上对此进行了测试。

如果我没有 winrar 并且我在 Windows 8 或 Windows 7（或 OSX）中使用默认解压缩器，我会收到一条消息，指出 zip 文件无效。

是否有任何我无法找到的已知问题？有谁知道什么可能导致这种行为？

谢谢，

这是输出 zip 的链接。 [https://www.dropbox.com/s/imvzixl3y3l12l1/TestAreaForMax-aa-57.zip](https://www.dropbox.com/s/imvzixl3y3l12l1/TestAreaForMax-aa-57.zip)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T19:33:08.373

如果没有看到您的代码和 ZIP 文件，没有人会肯定地说出来，但我记得有类似的问题，而且我的脚本似乎抛出了一些错误消息，这些错误消息最终出现在生成的 ZIP 存档中。一些解压缩设法从中恢复，而另一些则没有，所以我建议在任何文本编辑器中打开您的 ZIP 文件，看看文件开头是否有类似 PHP 警告消息的内容。

**编辑**

常规 zip 文件以`"PK"`. 您的文件以`" PK"`so 开头，除非您真的不需要它，否则请`?>`从生成您的 zip 文件的 PHP 脚本中删除（我建议从所有脚本中删除它），因为某处有一个空间可以执行我上面描述的操作，而且很可能它潜伏在`?>`

如果您在 PHP 代码块中，那么空白将什么也不做。但是通过放置`?>`您告诉 PHP 您的脚本何时结束。在 PHP 代码块之外，空白只是被发送到客户端。因此，如果您保留`?>`并且空间在它之后，那么它将被发送。如果您的脚本输出是可下载的，则所述空间将“加入”用户保存的字节流。通过删除 ?> 您并没有明确告诉 PHP 您的代码在哪里结束，在这种情况下，它将自动以源文件结尾结束。由于编辑器设置，空格通常是“不可见”的，因此我将其设置为语法突出显示以显示与背景颜色不同的空格）

一般来说，由于上述原因，`?>`如果您不将 PHP 代码与任何内容（即 HTML）混合使用，则始终不要使用它。将编辑器配置为在保存时自动修剪尾随空格总是有帮助的

# matlab - 如何从MATLAB中的位置向量函数获取法线向量

> ID：13672901
> 
> 赞同：0
> 
> 时间：2012-12-02T19:28:29.803
> 
> 标签：matlab

我有这个等式：

```
f(t) = <x(t),y(t)> 
```

我首先想做的是找出某个点的法线向量 t1。如何在 MATLAB 中执行此操作？

然后我想在 MATLAB 中计算出法线向量和 x 轴之间的角度。如果我可以绕过寻找法线向量而直接从 f(t) 中找出角度，那可能会更好。

如果有一些向量操作函数或者我可以使用的东西，而不是手动获取 x(t) 和 y(t) 的导数，然后找到大小和所有这些东西，那就太好了。任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T19:50:03.300

作为`dx`的时间导数`x`，即`(x(t+1)-x(t-1))/(2dt)`（当然也可以使用前向微分代替中心差分），以及`dy`的相应时间导数`y`，您可以从向量 [dx 轻松找到法线与 x 轴之间的角度,dy]，因为它的正常值只是 [-dy,dx]。

假设 n×1 数组`x`和`y`坐标，您可以按如下方式执行此操作：

```
%# take the time derivative
dx = (x(3:end)-x(1:end-2))/2;
dy = (y(3:end)-y(1:end-2))/2;

%# create the normal vector
nvec = [-dy,dx];

%# normalize the normal vector
nvecN = bsxfun(@rdivide,nvec,sqrt(sum(nvec.^2,2)));

%# take the arc-cosine to get the angle in degrees (acos for radian)
%# of the projection of the normal vector onto the x-axis
angle = acosd(nvecN(:,1)); 
```

# c - 如何回滚到多维？

> ID：13672905
> 
> 赞同：0
> 
> 时间：2012-12-02T19:28:39.883
> 
> 标签：c, gcc, multidimensional-array, casting

怎么投回来`void*`？

```
int *a[13][12];
void *b
int *c[13][12];

b = (void*) a;
c = (?????) b; 
```

这

```
c = (int *[13][12])b; 
```

说`cast specifies array type`

这

```
c = (int *[][])b; 
```

说`array type has incomplete element type`。

编译器是`gcc (Ubuntu/Linaro 4.6.1)`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T19:39:34.523

在 C 中，您不能[分配给 array](http://c-faq.com/aryptr/arrayassign.html)，因此由于 c 被声明为指向 int 的指针数组的数组，因此您不能直接分配它。

但是，例如，您可以通过在 for 循环中依次分配 c[i][j] 来覆盖其所有项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T20:57:17.710

c 和 a 是数组而不是指针，见上文，您可以使用指向 (2 dim) 数组的指针，例如

```
int a[13][12] ={ 1,2,3 };
void *b = &a;
int (*c)[13][12] = b; 
```

以及所有没有演员表的东西

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T19:47:37.500

您不能直接分配给数组，也不能强制转换为 C 中的数组类型。但是，由于数组衰减为指针，您可以将数据从`void *`指针（即：）复制`memcpy`到数组并将其用作数组，例如：

```
#include <stdio.h>
#include <string.h>

int main() {
    int a1=1, a2=2, a3=3, a4=4;

    int *a[2][2] = { { &a1, &a2 }, { &a3, &a4 } };
    printf("%d %d %d %d\n", *a[0][0], *a[0][1], *a[1][0], *a[1][1]);

    void *b;
    b = (void*) a;

    int *c[2][2];
    memcpy(c, b, sizeof(c));
    printf("%d %d %d %d\n", *c[0][0], *c[0][1], *c[1][0], *c[1][1]);

    return 0;
} 
```

编译并运行以下程序将为您提供：

```
1 2 3 4
1 2 3 4 
```

但是，`c`和`a`现在是两个不同的数组。

# google-chrome - IndexedDB - 布尔索引

> ID：13672906
> 
> 赞同：16
> 
> 时间：2012-12-02T19:28:48.177
> 
> 标签：google-chrome, indexing, boolean, indexeddb

**是否可以在布尔**类型字段上创建索引？

假设我要存储的记录的架构是：

```
{
  id:1,
  name:"Kris",
  _dirty:true
} 
```

我创建了正常的非唯一索引（*onupgradeneeded*）：

```
...
store.createIndex("dirty","_dirty",{ unique: false })
... 
```

索引已创建，但它是空的！- 在索引 IndexedDB 浏览器中没有带有**布尔**值的记录——只有**字符串**、**数字**和**日期**，甚至是**数组**。

我正在使用 Chrome 25 金丝雀

我想查找所有将 _dirty 属性设置为 true 的记录 - 我是否必须将 _dirty 修改为 string 或 int？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-02T23:20:52.680

是的，[boolean 不是有效的 key](http://www.w3.org/TR/IndexedDB/#dfn-valid-key)。

如果必须，当然可以解析为 1 和 0。

但这是有充分理由的。索引布尔值不提供信息。在上述情况下，您可以即时进行表扫描和过滤，而不是索引查询。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-07-01T03:10:27.600

标记为已检查的答案并不完全正确。

您不能在包含 Boolean JavaScript 类型的值的属性上创建索引。另一个答案的那部分是正确的。如果你有一个类似的对象`var obj = {isActive: true};`，尝试创建索引`obj.isActive`将不起作用，浏览器将报告错误消息。

但是，您可以轻松模拟所需的结果。indexedDB 不会将对象中不存在的属性插入索引。因此，您可以定义一个属性来表示真，而不是定义一个属性来表示假。当属性存在时，对象将出现在索引中。当属性不存在时，对象不会出现在索引中。

## 例子

例如，假设您有一个“obj”对象的对象存储。假设您想在`isActive`这些对象的属性上创建一个类似布尔值的索引。

首先在 isActive 属性上创建一个索引。在 onupgradeneeded 回调函数中，使用`store.createIndex('isActive','isActive');`

要表示对象的“真”，只需使用`obj.isActive = 1;`. 然后将对象添加或放入对象存储中。当您要查询设置的所有对象`isActive`时，只需使用`db.transaction('store').index('isActive').openCursor();`.

要表示假，只需使用`delete obj.isActive;`然后添加或或将对象放入对象存储中。

当您查询`isActive`设置了所有对象时，这些缺少该`isActive`属性的对象（因为它已被删除或从未设置）在使用游标迭代时不会出现。

瞧，一个*布尔*索引。

## 性能说明

像在此处使用的示例中所做的那样在索引上打开游标将提供良好的性能。小数据时性能上的差异并不明显，但在存储大量对象时非常明显。无需采用一些第三方库来完成“布尔索引”。这是您可以自己完成的平凡而简单的功能。您应该尽量使用本机功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-07T22:31:33.990

布尔属性描述独占状态（活动/非活动）、“开/关”、“启用/禁用”、“是/否”。您可以在 JS 数据模型中使用这些值对而不是布尔值以提高可读性。这种策略还允许添加其他状态（'NotSet'，如果对象中没有配置某些东西等情况）......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-08-21T10:21:24.500

我使用`0`and`1`而不是布尔类型。

# php - foreach 循环中的 php key() 奇怪行为或获取 foreach 循环中的下一个键

> ID：13672907
> 
> 赞同：6
> 
> 时间：2012-12-02T19:28:49.337
> 
> 标签：php, arrays, behavior, next

看这个：

```
<?php
    $array = array('a' => '…', 'b' => '…', 'c' => '…', 'd' => '…', 'e' => '…', 'f' => '…');
    foreach ($array as $key => $val){
        echo "current key: $key, next key: ".key(($array))."<br>";
    }
?> 
```

输出：

```
current key: a, next key: b
current key: b, next key: c
current key: c, next key: d
current key: d, next key: e
current key: e, next key: f
current key: f, next key: a 
```

我正在寻找一个函数来获取 foreach 循环中关联数组的下一个键。我试了一下，突然它起作用了。（如您在我的示例中所见）。

但为什么这行得通？是否有意义？……对我来说不是！你能给我解释一下吗？

这是因为`key(($array))`零件，但为什么呢？我的意思是..这是一个错误..我想写`key($array)`但我忘了删除 2 个包装括号。所以这是巧合！

为什么它会这样？我的意思是，这很好，但是…… ????

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T19:54:04.887

根据 key 的 PHP 手册，[key](http://us2.php.net/key) *() 返回当前数组位置的索引元素。*

问题不在于`key`, 甚至不在于双括号。Key 通过引用接收数组，所以双括号没有做太多。

该行为来自[foreach](http://us1.php.net/manual/en/control-structures.foreach.php)。当`foreach`遍历数组时，不同版本的 PHP 在设置数组的内部`current`指针时会表现出不同的行为，这就是`key()`调用它们`next()`时`current()`正在查看的内容。

PHP 中的数组与大多数语言中的数组不同。它们实际上是对象（尤其是关联数组）。把它们想象成链表（它们**不是**链表，只是为了说明的目的和我一起去）——当你迭代时，你需要知道你当前在哪里以及接下来你将在哪里。

这里显然发生的是，在您运行的任何版本的 PHP 上，都在 for 循环*开始*时设置指向元素`foreach`的内部`current`指针，紧接着在代码中设置and变量。`next`*`$key``$value`*

 *我绝对*不会*依赖这种行为，因为对 PHP 的后续更新可能会破坏此代码。这只是这个特定版本的一个有趣的巧合。如果你想要*下一个*键，看看替换你的`foreach`循环。[关于next()](http://us2.php.net/next)的 PHP 手册有很好的示例，请务必查看“另请参阅”部分中的 、 和其他函数`prev()`。`each()`*

# shell - 在管道的第二个进程中打开一个shell

> ID：13672911
> 
> 赞同：0
> 
> 时间：2012-12-02T19:29:09.930
> 
> 标签：shell, pipe, freebsd

我在理解以下情况下发生的事情时遇到了问题。我对 UNIX 管道和 UNIX 一点也不熟悉，但阅读过文档但仍然无法理解这种行为。

`./shellcode`是一个成功打开 shell 的可执行文件：

```
seclab$ ./shellcode
$ exit
seclab$ 
```

现在想象一下我需要将数据传递给`./shellcode`via `stdin`，因为这会从控制台读取一些字符串，然后打印“hello”加上那个字符串。我通过以下方式（使用**管道**）进行操作并且读写工作：

```
seclab$ printf "world" | ./shellcode
seclab$ hello world
seclab$ 
```

但是，一个新的 shell 没有打开（或者至少我看不到它并与之交互），如果我运行`exit`我就退出了系统，所以我不在一个新的 shell 中。

有人可以就如何解决这个问题提供一些建议吗？我需要使用 printf 因为我需要将二进制数据输入到第二个进程，我可以这样做：`printf "\x01\x02..."`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T20:29:51.103

当你使用管道时，你是在告诉 Unix 管道之前命令的输出应该用作管道之后命令的输入。这将替换默认输出（屏幕）和默认输入（键盘）。你的`shellcode`命令并不真正知道或关心它的输入来自哪里。它只是读取输入，直到到达 EOF（文件结尾）。

尝试运行`shellcode`并按 Control-D。这也将退出 shell，因为 Control-D 发送一个 EOF（您的 shell 可能配置为说“键入`exit`退出”，但它仍然响应 EOF）。

您可以使用两种解决方案：

**解决方案1：**

接受`shellcode`命令行参数：

```
#!/bin/sh
echo "Arguments: $*"
exec sh 
```

跑步：

```
outer$ ./shellcode foo
Arguments: foo
$ echo "inner shell"
inner shell
$ exit
outer$ 
```

要从另一个程序输入参数，而不是使用管道，您可以：

```
$ ./shellcode `echo "something"` 
```

这可能是最好的方法，除非您需要传入多行数据。在这种情况下，您可能希望在命令行中传入一个文件名并以这种方式读取它。

**解决方案2：**

在处理您`shellcode`的管道输入后，已从终端显式重定向其输入：

```
#!/bin/sh
while read input; do
  echo "Input: $input"
done
exec sh </dev/tty 
```

跑步：

```
outer$ echo "something" | ./shellcode
Input: something
$ echo "inner shell"
inner shell
$ exit
outer$ 
```

如果您在退出内壳后看到这样的错误：

```
sh: 1: Cannot set tty process group (No such process) 
```

然后尝试将最后一行更改为：

```
exec bash -i </dev/tty 
```

# regex - Golang 正则表达式替换什么都不做

> ID：13672913
> 
> 赞同：19
> 
> 时间：2012-12-02T19:29:15.593
> 
> 标签：regex, go

我想用破折号替换任何非字母数字字符序列。我写的一个片段如下。但是它不起作用，我完全不知道为什么。谁能解释一下为什么该片段的行为不像我期望的那样，以及实现此目的的正确方法是什么？

```
package main

import (
    "fmt"
    "regexp"
    "strings"
)

func main() {
    reg, _ := regexp.Compile("/[^A-Za-z0-9]+/")
    safe := reg.ReplaceAllString("a*-+fe5v9034,j*.AE6", "-")
    safe = strings.ToLower(strings.Trim(safe, "-"))
    fmt.Println(safe)  // Output: a*-+fe5v9034,j*.ae6
} 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-12-02T19:52:29.640

正斜杠与您的字符串不匹配。

```
package main

import (
        "fmt"
        "log"
        "regexp"
        "strings"
)

func main() {
        reg, err := regexp.Compile("[^A-Za-z0-9]+")
        if err != nil {
                log.Fatal(err)
        }

        safe := reg.ReplaceAllString("a*-+fe5v9034,j*.AE6", "-")
        safe = strings.ToLower(strings.Trim(safe, "-"))
        fmt.Println(safe)   // Output: a*-+fe5v9034,j*.ae6
} 
```

* * *

（也在[这里](http://play.golang.org/p/OyaspEUY-u)）

输出

```
a-fe5v9034-j-ae6 
```

# asp.net - 更改 asp.net 成员资格配置

> ID：13672916
> 
> 赞同：4
> 
> 时间：2012-12-02T19:29:31.973
> 
> 标签：asp.net, membership

我在 Visual Studio 2010 上创建了一个 ASP.NET 站点。成员资格表会自动出现。在“register.aspx”页面上，只有用户名、电子邮件地址和密码三个字段。但是在注册步骤中，我希望会员给我更多关于他的信息，例如姓名、姓氏、城市、研究生院等等……我在页面中添加了额外的文本框，并在表“aspnet_Membership”中添加了相应的字段。

稍微浏览一下代码后，我在“web.config”文件中找到了提供程序部分。我尝试为我的特定字段添加一些参数。但它没有用。

如果我需要在会员表中添加更多数据字段怎么办？例如，我需要知道会员居住的城市。这种情况我能做些什么？

web.config 的成员节点如下：

```
<membership>
<providers>
<clear/>
<add name="AspNetSqlMembershipProvider"
type="System.Web.Security.SqlMembershipProvider"
connectionStringName="ApplicationServices"
enablePasswordRetrieval="false"
enablePasswordReset="true"
requiresQuestionAndAnswer="false"
requiresUniqueEmail="true"
maxInvalidPasswordAttempts="5"
minRequiredPasswordLength="6"
minRequiredNonalphanumericCharacters="0"
passwordAttemptWindow="10"
applicationName="/"
/>
</providers>
</membership> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T21:37:00.957

您可以扩展内置的 MembershipUser 并添加自定义字段。然后您需要创建一个表来存储信息，最后您需要创建一个自定义成员资格提供程序。msdn 上的更多信息：[如何：实现自定义成员资格用户](http://msdn.microsoft.com/en-us/library/ms366730.aspx)

# sql - 根据机器和用户名查询活动和非活动连接

> ID：13672917
> 
> 赞同：1
> 
> 时间：2012-12-02T19:29:32.293
> 
> 标签：sql, oracle, plsql, oracle10g

我正在尝试进行查询，列出 Oracle 10g 数据库中每个用户名的活动、非活动和连接总数。

我有以下查询：

```
SELECT count(1) AS con_count, machine, username 
FROM v$session 
WHERE type <> 'BACKGROUND'
GROUP BY username, machine 
ORDER BY con_count DESC; 
```

这将列出每个用户名每台机器的总连接数，但在调整它以将活动、非活动和总连接计数作为一个查询时遇到了麻烦。

所以结果应该是这样的：

```
ACTIVE   INACTIVE   TOTAL   MACHINE   USERNAME 
```

而且我可以使查询执行前三列之一，但不能同时执行所有三列。

任何帮助将不胜感激，因为我的 SQL 非常非常生疏。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-02T19:40:53.397

视图列`status`包含`v$session`有关活动和非活动会话的信息。因此，您可以将查询重新编码如下：

```
SELECT s.machine
     , s.username 
     , count(decode(s.STATUS, 'ACTIVE', 1))   as active_con
     , count(decode(s.STATUS, 'INACTIVE', 1)) as inactive_con
     , count(*)                               as total_con
FROM v$session s
WHERE type <> 'BACKGROUND'
GROUP BY username, machine 
ORDER BY total_con DESC; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T19:41:57.707

假设列**类型**可以用来区分你的状态，你可以使用一个`SUM`表达式：

```
 select sum(case when status = 'ACTIVE' then 1 else 0 end) as ACTIVE_COUNT
      , sum(case when status = 'INACTIVE' then 1 else 0 end) as INACTIVE_COUNT
      , count(*) as TOTAL_COUNT
      , username, machine
 from   v$session
 where type <> 'BACKGROUND'
 group by username, machine
 order by username, machine 
```

根据 Nicholas应使用列**状态的响应进行了更新。**

# xcode - 由于 CLEErrorDomain.h 中的错误，构建失败

> ID：13672918
> 
> 赞同：0
> 
> 时间：2012-12-02T19:29:32.613
> 
> 标签：xcode, core-location

我在 CoreLocation.framework 下的 CLErrorDomain.h 第 18 行遇到了一个奇怪的错误。

这条线是

```
extern NSString *const kCLErrorDomain; 
```

并且“预期标识符”或“（”有错误

我根本没有弄乱这个文件，而且它无论如何都被锁定了，所以很难改变。为什么会出现这个错误，我该怎么做才能摆脱它？

我尝试重新启动 xCode，清理我的项目并将 CoreLocation 从我的项目中取出并将其放回原处。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T22:02:02.800

好吧，问题最终不在 CLErrorDomain.h 中

在查看错误日志时，我注意到它在尝试编译 main.m 时出错......在 main.m 文件的最顶部，任何代码之前都有一个杂散的“^”标记，并且是导致错误的原因。

# php - 无法自动重定向到网站的新页面

> ID：13672924
> 
> 赞同：0
> 
> 时间：2012-12-02T19:30:09.043
> 
> 标签：php, html, wordpress, redirect

我的旧网站是用纯 html 编写的，但新网站是使用 wordpress 构建的。我进行了设置，以便旧页面 (/page.html) 现在是 /page/。我没有想到的一件事是使用旧的 .html 扩展名进入该站点的众多链接。我的解决方案是将所有旧的 html 文件上传到新服务器，但通过获取当前 url 将它们重定向到新页面，从中剥离 .html 然后重定向到该页面。但是，我不确定我在做什么。谁能告诉我这有什么问题？

```
<html>

    <?php

        $a = $_SERVER['REQUEST_URI'];

        if (strpos($a,'.html') !== false)
        {

            $newstring = str_replace(".html", "/", $a);

        }

        elseif (strpos($a,'.htm') !== false)
        {

            $newstring = str_replace(".htm", "/", $a);

        }

        header('Location: ' . $newstring);
        exit;

        ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T19:42:02.143

如果您的机器上运行 apache，您可以轻松地重定向所有以“.html”或“.htm”结尾的页面。只需将其添加到您的 .htaccess 文件中即可。

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteRule ^(.*)\.html$ $1/ [R=301,L]
    RewriteRule ^(.*)\.htm$ $1/ [R=301,L]
</IfModule> 
```

# apache-flex - Flex Mobile 4.6 井字棋电脑移动

> ID：13672931
> 
> 赞同：0
> 
> 时间：2012-12-02T19:30:43.133
> 
> 标签：apache-flex

我有一个 Flex 4.6 移动问题。我在屏幕上有 9 个盒子。当我单击第一个框（使用 ID 名称命名）时，它应该放置文本**X**。我想要的是让计算机通过插入**O**在剩余的一个框中生成下一步动作。我相信您应该使用 math.random 或数组？这是一个井字游戏。

任何帮助将非常感激。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T03:17:29.007

我在 html/javascript 中制作了这个，是一个使用 minimax AI 的井字游戏示例，希望它作为您的 flex 项目的参考实现有所帮助（要对其进行测试，只需将代码复制并粘贴到空白 html 文档中并使用您喜欢的浏览器运行它）：

```
<html>
<head>
<script type="text/javascript">
<!-- 
 var board = new Array();
 var CPU = 1;
 var USER = 2;
 var EMPTY = 0;
 var lockBoard = false;
 var X = "X";
 var O = "O";
 var MAX_DEPTH = 10;

 // Updates the HTML table using the "board" array 
 function updateHTMLTable() {
    for (i = 0; i < 3; i++)
       for (j = 0; j < 3; j++) {
          var cell = document.getElementById(i + "," + j);
          switch (board[i * 3 + j]) {
             case USER: cell.innerHTML = X; break;
             case CPU:  cell.innerHTML = O; break;
             default: cell.innerHTML = " "; break;
          }
       }
 }

 function makeUserMove(x, y) {
    // Check either cpu is playing or game is over
    if (lockBoard) return;

    // Check if the cell is free to place the player movement
    if (board[x * 3 + y] == EMPTY) {
       board[x * 3 + y] = USER;
       c = document.getElementById(x + "," + y);
       c.innerHTML = X;
    } else {
       alert("Move not allowed, is already filled in");
    }
    if (wins(USER, board)) {
       alert("You Win");
       lockBoard = true;
       return;
    }
    cpuPlay();
 }

 function startGame() {
    for (i = 0; i < 9; i++)
        board[i] = EMPTY;
    updateHTMLTable();
    lockBoard = false;
 }

 // Check if there is no space left on the board to play 
 function isBoardFull(b) {
    for (var i = 0; i < 9; i++)
       if (b[i] == EMPTY) return false;
    return true;
 }

 function simulateUserMove(board, depth) {
    if (wins(CPU, board)) return {value: 1, board: board};
    if (wins(USER, board)) return {value: -1, board: board};
    if (isBoardFull(board) || depth == MAX_DEPTH) return {value: 0, board: board};

    var userMovement = {value: 999999, board: undefined};
    for (var i = 0; i < 9; i++) {
       if (board[i] == EMPTY) {
          var boardCopy = board.slice(0); // creates a copy of the array
          boardCopy[i] = USER;

          var cpuMovement = cpuMove(boardCopy, depth + 1);

          if (cpuMovement.value < userMovement.value) { 
             userMovement.value = cpuMovement.value;
             userMovement.board = boardCopy;
          } 
       }  
    }
    return userMovement;
 }

 function cpuMove(board, depth) { 
    if (wins(CPU, board)) return {value: 1, board: board};
    if (wins(USER, board)) return {value: -1, board: board};
    if (isBoardFull(board) || depth == MAX_DEPTH) return {value: 0, board: board};

    var cpuMovement = {value: -999999, board: undefined};
    for (var i = 0; i < 9; i++) {
       if (board[i] == EMPTY) {
          var boardCopy = board.slice(0); // creates a copy of the array
          boardCopy[i] = CPU;

          var userMovement = simulateUserMove(boardCopy, depth + 1);

          if (userMovement.value > cpuMovement.value) { 
             cpuMovement.value = userMovement.value;
             cpuMovement.board = boardCopy;
          } 
       }  
    }
    return cpuMovement;
 }

 // This function make the cpu movement using a "kind of" greedy approach, is not very smart 
 function cpuPlay() {
    lockBoard = true;
    var move = cpuMove(board, 0);
    board = move.board;
    updateHTMLTable();

    if (wins(CPU, board))
       alert("I win!"); 
    else 
       lockBoard = false;
 }

 function wins(player, board) {
    // Iterate the board to find if the player identified by the parameter "player" winned

    // First, check rows 
    var enemy = (player == USER) ? CPU : USER;
    var won = false;
    for (var i = 0; i < 3; i++) {
       won = true;
       for (var j = 0; j < 3; j++) {
          if (board[i * 3 + j] == enemy || board[i * 3 + j] == EMPTY) {
             won = false;
             break;
          }
       }
       if (won) return true;
    }
    // Then, check columns
    for (var i = 0; i < 3; i++) {
       won = true;
       for (var j = 0; j < 3; j++) {
          if (board[j * 3 + i] == enemy || board[j * 3 + i] == EMPTY) {
             won = false;
             break;
          }
       }
       if (won) return true;
    }
    // Last, the 2 diagonals
    for (var i = 0; i < 9; i += 4) {
       won = true;
       if (board[i] == enemy || board[i] == EMPTY) {
          won = false;
          break;
       }
    }
    if (won) return true;
    for (var i = 2; i < 7; i += 2) {
       won = true;
       if (board[i] == enemy || board[i] == EMPTY) {
          won = false;
          break;
       }
    }
    return won;
 }
//-->
</script>

</head>
<body>
  <table align="center" border="1">
    <tr>
       <td align="center" valign="middle" width="20" height="20" onclick="javascript: makeUserMove(0, 0)" id="0,0">&nbsp;</td>
       <td align="center" valign="middle" width="20" height="20" onclick="javascript: makeUserMove(0, 1)" id="0,1">&nbsp;</td>
       <td align="center" valign="middle" width="20" height="20" onclick="javascript: makeUserMove(0, 2)" id="0,2">&nbsp;</td>
    </tr>
    <tr>
       <td align="center" valign="middle" width="20" height="20" onclick="javascript: makeUserMove(1, 0)" id="1,0">&nbsp;</td>
       <td align="center" valign="middle" width="20" height="20" onclick="javascript: makeUserMove(1, 1)" id="1,1">&nbsp;</td>
       <td align="center" valign="middle" width="20" height="20" onclick="javascript: makeUserMove(1, 2)" id="1,2">&nbsp;</td>
    </tr>
    <tr>
       <td align="center" valign="middle" width="20" height="20" onclick="javascript: makeUserMove(2, 0)" id="2,0">&nbsp;</td>
       <td align="center" valign="middle" width="20" height="20" onclick="javascript: makeUserMove(2, 1)" id="2,1">&nbsp;</td>
       <td align="center" valign="middle" width="20" height="20" onclick="javascript: makeUserMove(2, 2)" id="2,2">&nbsp;</td>
    </tr>
  </table><br>
  <p align="center">
     <input type="button" value="Play Again!" onclick="javascript: startGame()">
  </p>

  <script type="text/javascript"> 
     // start game
     startGame();
  </script>
</body>
</html> 
```

# ruby - 就地进度输出到控制台：如何清空当前行

> ID：13672934
> 
> 赞同：4
> 
> 时间：2012-12-02T19:31:11.520
> 
> 标签：ruby, terminal

我有一个 Ruby 脚本，它使用回车符在同一行输出进度消息，如下所示：

```
print "\r#{file_name} processed." 
```

例如，在脚本完成之前，输出会从`'file001.html' processed.`to等变化。`'file002.html.' processed`

我想用 替换最后的进度消息`Done.`，但我不能只写`print "\rDone."`，因为那段代码输出如下内容：

```
Done.99.html processed. 
```

我想我必须在最后一条进度消息之后清空该行，然后打印`Done.`。我怎么做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-02T20:07:43.583

`clr_eol`您需要在使用后发送与 terminfo 变量（功能名称`el`）对应的字节序列`\r`。有几种方法可以得到它。

最简单的，假设有一个常数值。在我检查过的终端上是`\e[K`，但我只检查了几个。在这两个方面，以下工作：

```
clear = "\e[K"
print "foo 123"
print "\r#{clear}bar\n" 
```

您还可以使用以下方法获取值：

```
clear = `tput el` 
```

或者您可以使用[terminfo gem](http://rubygems.org/gems/ruby-terminfo)：

```
require 'terminfo'
clear = TermInfo.control_string 'el' 
```

# arrays - 我们可以在 O(n) 时间内在未排序的数组中找到没有 hashmap 的数组的模式吗

> ID：13672935
> 
> 赞同：0
> 
> 时间：2012-12-02T19:31:16.053
> 
> 标签：arrays, algorithm, mode

`O(n)`不使用附加`O(n)`空间，也不使用Hash，能否及时找到数组的众数。而且数据没有排序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T21:38:46.517

在适当的情况下，是的。例如，如果您的数据适合基数排序，那么您可以在线性时间内仅使用恒定的额外空间进行排序，然后对已排序的数据进行线性扫描以查找模式。

如果您的数据需要基于比较的排序，那么我很确定 O(N log N) 与您在一般情况下可以做的差不多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T20:24:53.577

这个问题并不比[**元素区别问题**](http://en.wikipedia.org/wiki/Element_distinctness_problem)¹更容易- 所以基本上没有额外的空间 - 问题的复杂性`Theta(nlogn)`充其量是（并且因为它可以完成`Theta(nlogn)`- 它是必要的）。

所以基本上 - 如果你不能为哈希表使用额外的空间，最好是排序和迭代，即`Theta(nlogn)`.

* * *

(1) 给定一个针对该问题运行的算法 A，`O(f(n))`很容易看出可以运行 A，然后通过额外的迭代验证结果元素是否重复一次以上，以解决 中的元素区别性问题`O(f(n) + n)`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T20:03:12.543

只计算频率。这不是`O(n)`空格，而是`O(k)`，其中 k 是范围内不同值的数量。这实际上是一个常数空间。

时间显然是线性的 O(n)

```
//init
counts = array[k]
for i = 0 to k
    counts[i] = 0

maxCnt = 0
maxVal = vals[0]
for val in vals
    counts[val]++
    if (counts[val] > maxCnt)
        maxCnt = counts[val]
        maxVal = val 
```

这里的主要问题是，虽然 k 可能是一个常数，但它也可能非常非常大。然而，k 也可以很小。无论如何，这确实可以正确回答您的问题，即使它不切实际。

# php - 未生成 PHPunit 的 CodeCoverage

> ID：13672946
> 
> 赞同：2
> 
> 时间：2012-12-02T19:32:46.293
> 
> 标签：php, phpunit, code-coverage, xdebug

PHPunit 3.7.1 PHP 5.3.14 Windows 7

使用 cmd 我“cd”到 phpunit.xml 所在的目录并运行

```
phpunit -c phpunit.xml 
```

但这不会产生任何代码覆盖率。

phpunit.xml：

```
<phpunit
bootstrap="./bootstrap.php"
verbose="true"
>
    <testsuites>
        <testsuite name="Test Suite">
            <directory suffix=".php">./Base/src/</directory>
            <filter>
                <whitelist addUncoveredFilesFromWhitelist="true">
                    <directory suffix=".php">../src</directory>
                    <exclude>
                        <directory suffix=".php">../../vendor</directory>
                    </exclude>
                </whitelist>
            </filter>
            <logging>
                <log type="coverage-html" target="./CodeCoverage/"/>
            </logging>
        </testsuite>
    </testsuites>
</phpunit> 
```

当我跑步时

```
phpunit -c phpunit.xml --coverage-html CodeCoverage 
```

这工作得很好，除了过滤器中的任何东西似乎都不起作用。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T17:23:11.603

我不知道 phpunit 是否支持在测试套件中定义过滤器和日志记录。自己定义它应该有效：

```
<phpunit
bootstrap="./bootstrap.php"
verbose="true">
    <testsuites>
        <testsuite name="Test Suite">
            <directory suffix=".php">./Base/src/</directory>
        </testsuite>
    </testsuites>
    <filter>
        <whitelist addUncoveredFilesFromWhitelist="true">
            <directory suffix=".php">../src</directory>
            <exclude>
                <directory suffix=".php">../../vendor</directory>
            </exclude>
        </whitelist>
    </filter>
    <logging>
        <log type="coverage-html" target="./CodeCoverage/"/>
    </logging>
</phpunit> 
```

# android - Android 中的日历应用程序面临问题

> ID：13672951
> 
> 赞同：-1
> 
> 时间：2012-12-02T19:33:21.413
> 
> 标签：android, android-intent, android-activity, calendar

我正在尝试创建一个 Intent 来创建日历活动。下面是代码：

```
public void onClickCalendarEntry(View view){
        Intent calendarIntent = new Intent(Intent.ACTION_INSERT);
        calendarIntent.setType("com.android.calendar/events");
        calendarIntent.putExtra(Events.TITLE, "Learn Android");
        calendarIntent.putExtra(Events.EVENT_LOCATION, "Home");
        calendarIntent.putExtra(Events.DESCRIPTION, "Learn activities");

        //Setting dates
        GregorianCalendar calDate = new GregorianCalendar(2012,12,2);
        calendarIntent.putExtra(CalendarContract.EXTRA_EVENT_BEGIN_TIME, 
                calDate.getTimeInMillis());
        calendarIntent.putExtra(CalendarContract.EXTRA_EVENT_END_TIME, 
                calDate.getTimeInMillis());

        Log.d(tag, "Before startActivity()");
        startActivity(calendarIntent);
        Log.d(tag, "Afte startActivity()");
    } 
```

现在下面是 AndroidManifest.exml 提取：

```
<uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="16" /> 
```

以下是我收到的错误消息：

```
12-02 20:27:54.958: D/MainActivity(5512): Before startActivity()
12-02 20:27:54.968: D/AndroidRuntime(5512): Shutting down VM
12-02 20:27:54.978: W/dalvikvm(5512): threadid=1: thread exiting with uncaught exception (group=0x2aac8578)
12-02 20:27:54.978: E/AndroidRuntime(5512): FATAL EXCEPTION: main
12-02 20:27:54.978: E/AndroidRuntime(5512): java.lang.IllegalStateException: Could not execute method of the activity
12-02 20:27:54.978: E/AndroidRuntime(5512):     at android.view.View$1.onClick(View.java:2168)
12-02 20:27:54.978: E/AndroidRuntime(5512):     at android.view.View.performClick(View.java:2552)
12-02 20:27:54.978: E/AndroidRuntime(5512):     at android.view.View$PerformClick.run(View.java:9229)
12-02 20:27:54.978: E/AndroidRuntime(5512):     at android.os.Handler.handleCallback(Handler.java:587)
12-02 20:27:54.978: E/AndroidRuntime(5512):     at android.os.Handler.dispatchMessage(Handler.java:92)
12-02 20:27:54.978: E/AndroidRuntime(5512):     at android.os.Looper.loop(Looper.java:130)
12-02 20:27:54.978: E/AndroidRuntime(5512):     at android.app.ActivityThread.main(ActivityThread.java:3701)
12-02 20:27:54.978: E/AndroidRuntime(5512):     at java.lang.reflect.Method.invokeNative(Native Method)
12-02 20:27:54.978: E/AndroidRuntime(5512):     at java.lang.reflect.Method.invoke(Method.java:507)
12-02 20:27:54.978: E/AndroidRuntime(5512):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:866)
12-02 20:27:54.978: E/AndroidRuntime(5512):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:624)
12-02 20:27:54.978: E/AndroidRuntime(5512):     at dalvik.system.NativeStart.main(Native Method)
12-02 20:27:54.978: E/AndroidRuntime(5512): Caused by: java.lang.reflect.InvocationTargetException
12-02 20:27:54.978: E/AndroidRuntime(5512):     at java.lang.reflect.Method.invokeNative(Native Method)
12-02 20:27:54.978: E/AndroidRuntime(5512):     at java.lang.reflect.Method.invoke(Method.java:507)
12-02 20:27:54.978: E/AndroidRuntime(5512):     at android.view.View$1.onClick(View.java:2163)
12-02 20:27:54.978: E/AndroidRuntime(5512):     ... 11 more
12-02 20:27:54.978: E/AndroidRuntime(5512): Caused by: android.content.ActivityNotFoundException: No Activity found to handle Intent { act=android.intent.action.INSERT typ=com.android.calendar/events (has extras) }
12-02 20:27:54.978: E/AndroidRuntime(5512):     at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1409)
12-02 20:27:54.978: E/AndroidRuntime(5512):     at android.app.Instrumentation.execStartActivity(Instrumentation.java:1379)
12-02 20:27:54.978: E/AndroidRuntime(5512):     at android.app.Activity.startActivityForResult(Activity.java:2827)
12-02 20:27:54.978: E/AndroidRuntime(5512):     at android.app.Activity.startActivity(Activity.java:2933)
12-02 20:27:54.978: E/AndroidRuntime(5512):     at com.example.sendingusertoanotherapp.MainActivity.onClickCalendarEntry(MainActivity.java:88)
12-02 20:27:54.978: E/AndroidRuntime(5512):     ... 14 more 
```

谁能帮我理解这里的问题是什么？谢谢。

关于，Sudipta Deb。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T19:52:32.733

`"calendar/events"`前弗罗约。

`"com.android.calendar/events"`后弗罗约。

```
if (Build.VERSION.SDK_INT < Build.VERSION_CODES.FROYO) {
    calendarIntent.setType("calendar/events");
} else {
    calendarIntent.setType("com.android.calendar/events");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T20:18:05.827

最后问题解决了：

下面是我现在使用的代码：

```
Calendar cal = Calendar.getInstance();              
Intent intent = new Intent(Intent.ACTION_EDIT);
intent.setType("vnd.android.cursor.item/event");
intent.putExtra("beginTime", cal.getTimeInMillis());
intent.putExtra("allDay", false);
intent.putExtra("rrule", "FREQ=DAILY");
intent.putExtra("endTime", cal.getTimeInMillis()+60*60*1000);
intent.putExtra("title", "A Test Event from android app");
startActivity(intent); 
```

感谢大家的帮助。

关于，Sudipta Deb

# java - 我如何允许 JMS 使用端口 7676

> ID：13672954
> 
> 赞同：1
> 
> 时间：2012-12-02T19:33:26.710
> 
> 标签：java, spring, jms, apache-camel

所以我在运行一个使用 JMS 的应用程序时遇到了这个问题，我做了这里描述的所有事情，[通过 JMS 进行透明异步远程处理](http://hwellmann.blogspot.com/2011/03/transparent-asynchronous-remoting-via.htmlrent-asynchronous-remoting-via.html)

这是我得到的异常：

```
org.springframework.jms.UncategorizedJmsException: Uncategorized exception occured during JMS processing; nested exception is com.sun.messaging.jms.JMSException: [C4003]: Error occurred on connection creation [localhost:7676]. - cause: java.net.ConnectException: Connection refused: connect
    at org.springframework.jms.support.JmsUtils.convertJmsAccessException(JmsUtils.java:316) ~[spring-jms-3.0.5.RELEASE.jar:3.0.5.RELEASE]
    at org.springframework.jms.support.JmsAccessor.convertJmsAccessException(JmsAccessor.java:168) ~[spring-jms-3.0.5.RELEASE.jar:3.0.5.RELEASE]
    at org.springframework.jms.core.JmsTemplate.execute(JmsTemplate.java:469) ~[spring-jms-3.0.5.RELEASE.jar:3.0.5.RELEASE]
    at org.apache.camel.component.jms.JmsConfiguration$CamelJmsTemplate.send(JmsConfiguration.java:175) ~[camel-jms-2.6.0.jar:2.6.0]
    at org.apache.camel.component.jms.JmsProducer.doSend(JmsProducer.java:355) ~[camel-jms-2.6.0.jar:2.6.0]
    at org.apache.camel.component.jms.JmsProducer.processInOnly(JmsProducer.java:309) ~[camel-jms-2.6.0.jar:2.6.0]
    at org.apache.camel.component.jms.JmsProducer.process(JmsProducer.java:99) ~[camel-jms-2.6.0.jar:2.6.0]
    at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:91) ~[camel-core-2.6.0.jar:2.6.0]
    at org.apache.camel.impl.DefaultAsyncProducer.process(DefaultAsyncProducer.java:37) ~[camel-core-2.6.0.jar:2.6.0]
    at org.apache.camel.component.bean.CamelInvocationHandler.invoke(CamelInvocationHandler.java:65) ~[camel-core-2.6.0.jar:2.6.0]
    at $Proxy18.inputCAChain(Unknown Source) ~[na:na]
    at pl.os.test.ws.endpoint.osCaEndpoint.getCAChain(osCaEndpoint.java:66) ~[osaEndpoint.class:na]
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.7.0_09]
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) ~[na:1.7.0_09]
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.7.0_09]
    at java.lang.reflect.Method.invoke(Method.java:601) ~[na:1.7.0_09]
    at org.springframework.ws.server.endpoint.MethodEndpoint.invoke(MethodEndpoint.java:134) ~[spring-ws-core-2.1.1.RELEASE.jar:na]
    at org.springframework.ws.server.endpoint.adapter.DefaultMethodEndpointAdapter.invokeInternal(DefaultMethodEndpointAdapter.java:229) ~[spring-ws-core-2.1.1.RELEASE.jar:na]
    at org.springframework.ws.server.endpoint.adapter.AbstractMethodEndpointAdapter.invoke(AbstractMethodEndpointAdapter.java:53) ~[spring-ws-core-2.1.1.RELEASE.jar:na]
    at org.springframework.ws.server.MessageDispatcher.dispatch(MessageDispatcher.java:233) [spring-ws-core-2.1.1.RELEASE.jar:na]
    at org.springframework.ws.server.MessageDispatcher.receive(MessageDispatcher.java:173) [spring-ws-core-2.1.1.RELEASE.jar:na]
    at org.springframework.ws.transport.support.WebServiceMessageReceiverObjectSupport.handleConnection(WebServiceMessageReceiverObjectSupport.java:88) [spring-ws-core-2.1.1.RELEASE.jar:na]
    at org.springframework.ws.transport.http.WebServiceMessageReceiverHandlerAdapter.handle(WebServiceMessageReceiverHandlerAdapter.java:59) [spring-ws-core-2.1.1.RELEASE.jar:na]
    at org.springframework.ws.transport.http.MessageDispatcherServlet.doService(MessageDispatcherServlet.java:221) [spring-ws-core-2.1.1.RELEASE.jar:na]
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882) [spring-webmvc-3.1.2.RELEASE.jar:3.1.2.RELEASE]
    at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:789) [spring-webmvc-3.1.2.RELEASE.jar:3.1.2.RELEASE]
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:641) [servlet-api.jar:na]
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722) [servlet-api.jar:na]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305) [catalina.jar:7.0.30.A]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210) [catalina.jar:7.0.30.A]
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222) [catalina.jar:7.0.30.A]
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123) [catalina.jar:7.0.30.A]
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472) [catalina.jar:7.0.30.A]
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168) [catalina.jar:7.0.30.A]
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99) [catalina.jar:7.0.30.A]
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929) [catalina.jar:7.0.30.A]
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118) [catalina.jar:7.0.30.A]
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407) [catalina.jar:7.0.30.A]
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1002) [tomcat-coyote.jar:7.0.30.A]
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585) [tomcat-coyote.jar:7.0.30.A]
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310) [tomcat-coyote.jar:7.0.30.A]
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110) [na:1.7.0_09]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603) [na:1.7.0_09]
    at java.lang.Thread.run(Thread.java:722) [na:1.7.0_09] 
```

我绝对没有 JMS 或 Camel 的经验，所以我猜如果 JMS 不允许使用端口 7676，那么我该如何解决这个问题？如果这不是原因，您是否有任何暗示我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T22:10:32.987

你有在这个端口上运行的代理吗？您可以验证代理是否正在使用 telnet 运行：

```
telnet localhost 7676 
```

# c# - GridViewRow 没有返回正确的单元格

> ID：13672955
> 
> 赞同：1
> 
> 时间：2012-12-02T19:33:31.557
> 
> 标签：c#, asp.net, .net, gridview, datagridviewrow

所以我的一个页面有这个问题，它基本上列出了指定学生的一堆评论。评论应该是可编辑的，但我在获取一行内容时遇到了问题（所以我可以在 a 中显示评论内容`TextBox`并允许编辑）。

问题是，每当我`GridViewRow`从`GridView`这样的地方访问时： `this.CommentList.Rows[e.NewEditIndex]` 它正在返回一个单元格集合，但是每当我尝试像这样访问一个单元格时：（`row.Cells[0].Text`其中行是选定的`GridViewRow`对象）它不会返回任何值。

这是我的 .aspx 代码：

```
<asp:GridView ID="CommentList" runat="server" AutoGenerateColumns="False" CellPadding="5"
    ShowHeader="false" Width="100%" DataKeyNames="CommentId" OnRowDeleting="CommentList_RowDeleting"
    OnRowCancelingEdit="CommentList_RowCancelingEdit" OnRowEditing="CommentList_RowEditing">
    <Columns>
        <asp:TemplateField HeaderText="Student ID">
            <ItemTemplate>
                <b>Author:</b>
                <%# ((Comment)Container.DataItem).Author.Name %>
                <br />
                <b>Date:</b>
                <%# ((Comment)Container.DataItem).Created %>
                <hr style="border-top: solid 1px black" />
                <div style="text-align: center;">
                    <asp:Panel ID="OptionsPanel" runat="server">
                        <asp:LinkButton ID="DeleteLinkButton" CommandName="Delete" runat="server" OnClientClick="return confirm('Are you sure you want to delete this comment?');">Delete</asp:LinkButton>
                        |
                        <asp:LinkButton ID="EditLinkButton" runat="server" CommandName="Edit">Edit</asp:LinkButton>
                    </asp:Panel>
                    <asp:Panel ID="EditOptionsPanel" runat="server" Visible="false">
                        <asp:LinkButton ID="CancelEditLinkButton" runat="server" CommandName="Cancel">Cancel</asp:LinkButton>
                    </asp:Panel>
                </div>
            </ItemTemplate>
            <ItemStyle CssClass="topLeftJustify" Width="200px" />
        </asp:TemplateField>
        <asp:TemplateField HeaderText="Name">
            <ItemTemplate>
                <asp:Panel ID="ViewCommentPanel" runat="server">
                    <%# ((Comment)Container.DataItem).Content%>
                </asp:Panel>
                <asp:Panel ID="EditCommentPanel" runat="server" Visible="false">
                    <asp:TextBox ID="Comment" runat="server" CssClass="textEntry" TextMode="MultiLine"
                        Width="100%" Height="100px"></asp:TextBox>
                </asp:Panel>
            </ItemTemplate>
            <ItemStyle CssClass="topLeftJustify" />
        </asp:TemplateField>
    </Columns>
</asp:GridView> 
```

这是我的 .aspx.cs 代码（与上面的代码有关）：

```
 protected void CommentList_RowEditing(object sender, GridViewEditEventArgs e)
    {
        try
        {
            GridViewRow row = this.CommentList.Rows[e.NewEditIndex];
            ((Panel)row.FindControl("OptionsPanel")).Visible = false;
            ((Panel)row.FindControl("EditOptionsPanel")).Visible = true;
            ((Panel)row.FindControl("ViewCommentPanel")).Visible = false;
            ((Panel)row.FindControl("EditCommentPanel")).Visible = true;

            // problem is with this line. it doesn't show the contents of the "comment"
            ((TextBox)row.FindControl("Comment")).Text = row.Cells[0].Text;
        }
        catch (Exception ex)
        {
            this.Messages.ChangeMessage(ex.Message, MessageType.Error);
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T19:40:38.450

当您使用 a 时`TemplateField`，您不能使用它`e.Row.Cells[index].Text`来访问单元格的控制文本。我只想`Label`在面板中添加一个。

但你也可以这样尝试：

```
Panel ViewCommentPanel = (Panel) e.Row.FindControl("ViewCommentPanel");
LiteralControl objPanelText = ViewCommentPanel.Controls[0] as LiteralControl;
TextBox Comment = (TextBox) row.FindControl("Comment");
Comment.Text = objPanelText.Text; 
```

# html - 图像，css未加载到tomcat-6 ..在网页上获得404

> ID：13672960
> 
> 赞同：1
> 
> 时间：2012-12-02T19:34:16.390
> 
> 标签：html, tomcat6

我的应用程序部署在 apache-tomcat 6.0.28 上。

当我部署我的应用程序时，图像未加载到 HTML 页面中（404 错误）。它显示除图像之外的所有内容。

[我面临与这篇文章](https://stackoverflow.com/questions/9766160/loading-images-for-html-in-jboss)中提到的完全相同的问题。我的网络应用程序结构是

```
search-app.war
 |
 |---> WEB-INF
 |       |
 |      ----> classes
 |      ----> lib
 |      ----> pages
 |       |
 |       ----> xx.jsp
 |---> index.html
 |---> css
 |      |
 |      ----> search.css
 |---> images
 |       |
 |       ----> logo.gif 
```

我正在从 xx.jsp 访问 logo.gif，这是一个代码

```
<div id="logo">
<img src="search-app/images/logo.gif" alt="search" style="padding-top:150px;" />
</div> 
```

我尝试了 src 的所有其他选项，但每次我得到 404 的图像。

如果我在浏览器上点击这个 - [http://[localhost]:8080/search-app/images/logo.gif](http://[localhost]:8080/search-app/images/logo.gif)，仍然是 404。

与 css 相同的问题 -

```
Request URL:http://localhost:8080/search-app/css/search.css
Request Method:GET
Status Code:404 Not Found 
```

这个错误现在正在杀死我！请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T22:34:44.073

尝试以下操作：

*   尝试使用谷歌浏览器，按`Ctrl`++`Shift`打开开发者工具选项卡`I`并检查选项卡中的资源`Resources`，检查您的图像是否存在。检查是否说`Failed to load resource`
*   更改`<img src="search-app/images/logo.gif" alt="search" style="padding-top:150px;" />`for （从图像 url中`<img src="images/logo.gif" alt="search" style="padding-top:150px;" />`删除）`search-app/`
*   检查您是否访问了正确版本的应用程序，如果您从 Eclipse 等 IDE 进行部署，它会在`wtpwebapps`目录而不是`webapps`. 有时，由于多次部署（手动、IDE 自动、构建脚本等）会导致混淆，请检查
*   检查图像是否未损坏（尽管这不会导致`404`错误）
*   仅使用一个 jsp 文件和一个图像创建一个测试 webapp 战争，并对其进行测试
*   检查目录名末尾是否包含任何额外的空格，例如*“images”*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-04T08:51:39.633

当您将图像/脚本物理复制到相应的位置时，您需要返回到 Eclipse 窗口并刷新项目。而已！！！！！奇迹般有效。

# android - 自定义适配器中的方法来检查所有复选框

> ID：13672965
> 
> 赞同：1
> 
> 时间：2012-12-02T19:34:38.670
> 
> 标签：android, checkbox, adapter

我正在尝试通过单击自定义适配器检查所有复选框。但是当我实施

```
ArrayList<BazarItems> objects

    public void allChecked(){

        for (int i=0; i<objects.size(); i++){

            cbBuy.setChecked(true);
        }

    } 
```

唯一的最后一项被选中。我究竟做错了什么？

试过这个

```
`public void checkAll () {

        for (int i=0; i<objects.size(); i++){

            BazarItems b = objects.get(i);

            b.box = true;

            cbBuy.setChecked(b.box);
        }
    }   
    ` 
```

开始了。我可能在自定义适配器上遗漏了一些东西。据我了解，我所拥有的应该足以完成任务。

```
`public class BazarListAdapter extends BaseAdapter {

    Context ctx;
    LayoutInflater lInflater;
    ArrayList<BazarItems> objects;

    CheckBox cbBuy;

    BazarListAdapter(Context context, ArrayList<BazarItems> products) {
        ctx = context;
        objects = products;
        lInflater = (LayoutInflater) ctx
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    }

    public int getCount() {
        return objects.size();
    }

    public Object getItem(int position) {
        return objects.get(position);
    }

    public long getItemId(int position) {
        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) {

        View view = convertView;
        if (view == null) {
            view = lInflater.inflate(R.layout.activity_bazar_list_child_item,
                    parent, false);
        }

        BazarItems i = getItems(position);

        ((TextView) view.findViewById(R.id.tvDescription)).setText(i.name);
        ((TextView) view.findViewById(R.id.tvQuantity))
                .setText(i.quantity + "");
        ((TextView) view.findViewById(R.id.tvPrice)).setText(i.price + "");

        cbBuy = (CheckBox) view.findViewById(R.id.checkBox);

        cbBuy.setOnCheckedChangeListener(myCheckChangList);

        cbBuy.setTag(position);

        cbBuy.setChecked(i.box);
        return view;
    }

    BazarItems getItems(int position) {
        return ((BazarItems) getItem(position));
    }

    ArrayList<BazarItems> getBox() {
        ArrayList<BazarItems> box = new ArrayList<BazarItems>();
        for (BazarItems i : objects) {
            if (i.box)
                box.add(i);
        }
        return box;
    }

    OnCheckedChangeListener myCheckChangList = new OnCheckedChangeListener() {
        public void onCheckedChanged(CompoundButton buttonView,
                boolean isChecked) {
            getItems((Integer) buttonView.getTag()).box = isChecked;
        }
    }; 
```

`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T20:21:16.440

归档在你的`CustomAdapter`

```
boolean isAllCHecked=false; 
```

和这样的设置方法

```
 public setAllChecked()
 {
    isAllCHecked=true;
    notifyDataSetChanged();
 } 
```

在`getView`你`CustomAdapter`做这样的事情

```
//get instance of the checkbox
//call checkBox.setChecked(isAllCHecked); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T19:44:06.497

您总是在同一个对象上调用 setChecked()。

尝试：

```
 for (int i=0; i<objects.size(); i++){

        objects.get(i).box = true;
    } 
```

然后`invalidate();`是你的 ListView。

# core-data - iOS - 传递一个空托管对象 -

> ID：13672967
> 
> 赞同：0
> 
> 时间：2012-12-02T19:34:51.197
> 
> 标签：core-data, ios6, nsmanagedobjectcontext

我读过很多类似的帖子，但两天后，我想我应该问自己的问题。

我有一个单独的 CoreData 控制器。这会将实体对象从 AppDelegate 很好地传递到 RootViewController。它不会将它传递给特定的（类别）视图控制器，我不知道为什么。

我尝试传递对象的 App Delegate 中的代码是这样的：

```
rootViewController.managedObjectContext = self.coreDataController.mainThreadContext;
    categoryListViewController.managedObjectContext = self.coreDataController.mainThreadContext;
    NSLog(@"AD/core data controller is %@", coreDataController.mainThreadContext);
    NSLog(@"AD- rootVC is %@", rootViewController.managedObjectContext);
    NSLog(@"AD/category list is %@", categoryListViewController.managedObjectContext); 
```

并且日志显示核心数据控制器和根 vc 被填充，但类别 vc 没有。

```
2012-12-02 14:28:33.187 [50351:907] AD/coredatacontroller moc is <NSManagedObjectContext: 0x21065160>
2012-12-02 14:28:33.188 [50351:907] AD/categorycontroller moc is (null)
2012-12-02 14:28:33.190 [50351:907] AD- rootVC moc is <NSManagedObjectContext: 0x21065160> 
```

任何想法为什么？

更新

如果我按照 Valentin 的建议进行操作，并在 App Delegate 中初始化 Category VC，那么我肯定会通过托管对象，因为我从 Detail VC 调用视图。当我这样做时，我收到错误“应用程序试图在目标上推送一个 nil 视图控制器”。

如果我尝试在详细信息 VC 中初始化类别 VC（并加载上下文），它不会传达，并且日志显示上下文为零。

初始化 VC（在 App Delegate 中）：

```
categoryListViewController = [[CategoryListViewController alloc] initWithNibName:@"CategoryList-iPad" bundle:nil];

                        // we have loaded from our xib, so has our CoreDataController,
    // so connect as its delegate and setup its persistent store
    //
    self.coreDataController.delegate = self;
    [self.coreDataController loadPersistentStores];

    UINavigationController *rootNavigationController = [[UINavigationController alloc] initWithRootViewController:rootViewController];
    UINavigationController *detailNavigationController = [[UINavigationController alloc] initWithRootViewController:detailViewController];

    // Set up MASTER and DETAIL delegation so we can send messages between views
    rootViewController.detailViewController = detailViewController;
    detailViewController.rootViewController = rootViewController;

    splitViewController = [[UISplitViewController alloc] init];

    splitViewController.viewControllers = @[rootNavigationController, detailNavigationController];
    [[UIDevice currentDevice] beginGeneratingDeviceOrientationNotifications];

    splitViewController.delegate = detailViewController;

    rootViewController.managedObjectContext = self.coreDataController.mainThreadContext;
    categoryListViewController.managedObjectContext = self.coreDataController.mainThreadContext;

    NSLog(@"AD - coreDataController is %@", coreDataController.mainThreadContext);
    NSLog(@"AD - rootViewController is %@", rootViewController.managedObjectContext);
    NSLog(@"AD - categoryListVC is %@", categoryListViewController.managedObjectContext); 
```

调用视图（在 DetailViewController 中）：

```
 -(void)categoryButtonTapped {
     NSLog(@"%s", __FUNCTION__);

     //categoryListViewController = [[CategoryListViewController alloc] initWithNibName:@"CategoryList-iPad" bundle:nil];
     //categoryListViewController.managedObjectContext = coreDataController.mainThreadContext;
     //categoryListViewController.managedObjectContext = self.coreDataController.mainThreadContext;

 UINavigationController *nc = [[UINavigationController alloc] initWithRootViewController:categoryListViewController];
     nc.modalPresentationStyle = UIModalPresentationFormSheet;

      NSLog(@"DVC FRC is %@", self);
      NSLog(@"DVC FRC/moc is %@", coreDataController.mainThreadContext);
      NSLog(@"DVC FRC/self.moc is %@", self.coreDataController.mainThreadContext);

     [self presentViewController:nc animated:YES completion:nil];

     //[self.navigationController pushViewController:categoryListViewController animated:YES];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T19:46:39.147

很可能你的`categoryListViewController`也是 nil 。尝试查看它是否正确分配/初始化。

# java - 如何使用数组在节点链表中输入字符串字符，然后删除它们？

> ID：13672970
> 
> 赞同：0
> 
> 时间：2012-12-02T19:35:25.987
> 
> 标签：java, string, linked-list, nodes

我正在编写一个程序，它使用节点数据结构从用户那里接受名称（字符串），显示名称，然后有选择地删除名称。（我希望输入在一个数组中）。当使用 for 循环输入名称并显示时，程序将询问我要删除什么或从数组中删除什么名称。

这是我的课：

```
 public class Node
{
    Node next;
    String data;

    public Node (String data)
    {
        this.data = data;
    }
} 
```

*程序应该做什么：*

假设我在 for 循环中输入了 5 个名称。

```
Alex, George, Fryon, Storm, Hilbert. 
```

然后当我输入它时，它会显示：

```
Alex.
George
Fryon
Storm
Hilbert 
```

然后它会问我应该删除什么名字？

```
(Alex)
George
Fryon
Storm
Hilbert 
```

但我什至不能进入它们。

```
String[] contestant = new String [MAX];
head = null;

for (int i = 0; i <= 5; i++)
{ 
 System.out.println ("Enter a name:");
 name [0] = stdin.readLine ();

 node = new Node (name [i]);
 node.next = head;
 head = node;
} 
```

如果节点或链表与数组有关，我会感到困惑。我希望将它存储为“节点数组”，使用 for 循环“像数组一样”显示它，然后“像数组一样使用排序删除它”。但它真的很难。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T19:41:12.730

写下以下内容：

```
String name;
Node current = null;

while(true)
{ 
 System.out.println ("Enter a name:");
 name = stdin.readLine ();

if( name.equals("exit") ) break;

 if( current == null ) {
    current = new Node(name);
}
else {
   current.next = new Node(name);
   current = current.next;
}

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T22:22:32.763

哇。我自己都很惊讶。

数组是与链表不同的数据结构。我已经用数组编程了很长时间，以至于我没有意识到还有像循环链表这样更有效的数组。

.

# excel - Excel公式用上面的单元格填充下面的单元格，直到值发生变化

> ID：13672971
> 
> 赞同：0
> 
> 时间：2012-12-02T19:35:30.453
> 
> 标签：excel, spreadsheet, fill

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T19:40:28.110

If you add a temp column and fill it with this, the new column should have the desired data. Assuming data is in column A, populate B1 yourself and then put this in B2 and fill down:

```
=if(A2<>"",A2,B1) 
```

# sql-server - 用公用表表达式 (CTE) 替换 ColdFusion 递归函数调用

> ID：13672972
> 
> 赞同：1
> 
> 时间：2012-12-02T19:35:38.347
> 
> 标签：sql-server, recursion, coldfusion, common-table-expression

我有一个名为 dbo.Node 的表：

```
NodeID      int
ParentNodeID    int
Title 
```

以下函数显示了层次结构

```
<cffunction name="getNodePath" returnType="string">
    <cfargument name="NodeID" required="false" default="">

    <cfset var qryNode = "">

    <cfif NOT isNumeric(arguments.nodeID)>
        <cfreturn "">
    </cfif>

    <cfquery name="qryNode" cachedWithin="#CreateTimeSpan(0,0,1,0)#">
        SELECT  ParentNodeID, Title
        FROM    dbo.Node WITH (NOLOCK)
        WHERE   NodeID = <cfqueryparam CFSQLType="CF_SQL_INTEGER" value="#arguments.NodeID#">
    </cfquery>      

    <cfreturn getNodePath(qryNode.ParentNodeID) & qryNode.Title & " &raquo; ">
</cffunction> 
```

此代码使用 cacheWithin 是因为已知会调用许多相同的父路径。平均而言，这会从原始页面调用大约 20 次。总体而言，由于查询的递归性质，它被调用了 100 次。此外，此函数返回一个字符串。这意味着格式在模型而不是视图中。

有没有办法用 CTE 代替它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T19:35:38.347

带 CTE 的版本

```
<cfset var qryNode = "">
<cfset var lstPath = "">

<cfif NOT isNumeric(arguments.nodeID)>
    <cfreturn QueryNew("Empty")>
</cfif>

<cfquery name="qryNode">
    WITH Family AS ( 

        SELECT  N.NodeID, ISNULL(N.ParentNodeID, '') AS ParentNodeID, Slug, N.Title, N.Kind, 0 AS Depth, N.CreateDate
        FROM    dbo.vwNode N WITH (NOLOCK)
        WHERE   NodeID = TRY_CONVERT(int, <cfqueryparam cfsqltype="CF_SQL_INTEGER" value="#arguments.NodeID#">)

        UNION ALL 

        SELECT  N2.NodeID, ISNULL(N2.ParentNodeID, '') AS ParentNodeID, N2.Slug,  N2.Title, N2.Kind, Depth + 1, N2.CreateDate
        FROM    dbo.vwNode N2 WITH (NOLOCK)

        INNER JOIN  Family 
        ON      Family.ParentNodeID = N2.NodeID
        WHERE   PrimaryRecord = 0 
        ) 

    SELECT  NodeID, ParentNodeID, Slug, Title, Kind, Depth, CreateDate
    FROM    Family
    ORDER BY Depth DESC
</cfquery>      

<cfreturn qryNode> 
```

**With**语句替换了递归调用。这个函数现在只调用了大约 20 次。无需缓存结果，因为它们不会被重用。该函数现在返回一个查询。格式现在在它所属的视图上

# ruby-on-rails - 复选框在 rails-backbone 中不起作用

> ID：13672975
> 
> 赞同：0
> 
> 时间：2012-12-02T19:35:41.980
> 
> 标签：ruby-on-rails, backbone.js, checkbox

我有 Rails 模型文章 receive_letters:boolean。而且我的申请中有骨干。在主干视图中，我喜欢它：

```
<form id="new-article" name="article">
<div class="field">
 <label for="receive_letters">Подписаться на новостную рассылку </label>
 <input type="text" name="receive_letters" id="receive_letters" value="<%= receive_letters %>">
</div> 
```

它工作正常。但是后来我将类型从“文本”更改为“复选框”，它的值 = null。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T19:39:32.043

对于复选框，您还需要从`value`属性更改为`checked`属性：

```
<input type="checkbox" name="receive_letters" id="receive_letters" checked="<%= receive_letters %>"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T18:34:06.610

修复。

模板（new.jst.ejs）：

```
<input type="checkbox" name="receive_letters" id="receive_letters"> 
```

查看（new_view.js.coffee）：

```
events: {
  "click input:checkbox": "check"
  }
check: (e) ->  
  if e.currentTarget.checked == true
    e.currentTarget.value = "true"
  else
    e.currentTarget.value = "false" 
```

# java - 难以理解swing的JTable和JTree的渲染器机制

> ID：13672980
> 
> 赞同：9
> 
> 时间：2012-12-02T19:36:25.450
> 
> 标签：java, swing, jtable, jtree, renderer

通常在使用`JTable`or时`JTree`，用户会定义自己的单元格渲染器。

`DefaultTableCellRenderer`从 继承用户的组件并实现渲染器方法是很常见的`getTableCellRendererComponent`。事实证明，`DefaultTableCellRenderer`实际上继承自 JLabel，因此在调用 super（在 render 方法中）时返回自身（this），因此用户的渲染器也可以类似地返回自身（this）。

这一切都运作良好。

我的问题是怎么可能？

每次表调用此方法时，都会为其赋予不同的参数，并且输出标签会根据这些参数而更改。如果它确实是标签的同一个实例——不应该根据最后一次调用这个方法来改变它吗？这是否意味着所有表格的单元格都被感染了由相同的标签实例组成，该标签实例具有相同的值（最后一次调用渲染器方法的值）？

我已经搜索了网络，并在 Swing 的代码中挖掘，但找不到任何**克隆**或**复制构造函数**实际上复制输出标签的行为。我找不到任何证据表明（也许）swing 使用反射来每次从头开始重新实例化渲染器。

我已经阅读了[关于 JTables 的 Swing 教程，在](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#editrender)那里我可以找到下一行：

> *您可能希望表格中的每个单元格都是一个组件。但是，出于性能原因，Swing 表的实现方式有所不同。相反，单个单元格渲染器通常用于绘制包含相同类型数据的所有单元格。您可以将渲染器视为一个可配置的墨迹标记，表格使用该墨迹标记将适当格式的数据标记到每个单元格上。当用户开始编辑单元格的数据时，单元格编辑器会接管该单元格，控制该单元格的编辑行为。*

他们给出了一个提示，我所说的确实是正确的，但没有解释它是如何实现的。

我无法得到它。你们中的任何一个都可以吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-02T19:47:37.400

它是[享元模式](http://en.wikipedia.org/wiki/Flyweight_pattern)的实现。

当 JTable 重新绘制自身时，它会启动一个循环并遍历每个必须绘制的单元格。

对于每个单元格，它使用与单元格对应的参数调用渲染器。渲染器返回一个组件。该组件被绘制在与当前表格单元格对应的矩形中。

然后为下一个单元格调用渲染器，并将返回的组件（例如具有不同的文本和颜色）绘制在与单元格对应的矩形中，等等。

想象一下，每次调用渲染器时，都会截取返回组件的屏幕截图并将其粘贴到表格单元格中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-02T20:48:18.817

除了@JB 对如何和使用享元[*模式*](http://en.wikipedia.org/wiki/Flyweight_pattern)[的明确说明](https://stackoverflow.com/a/13673083/230513)之外，请注意这两个类如何提供公共方法和. 检查这些方法以了解如何使用[*类文字作为运行时类型标记*](http://docs.oracle.com/javase/tutorial/extra/generics/literals.html)来按类选择渲染器或编辑器（如果没有按列指定）。在内部，使用例如存储。`JTable``JTree`[](http://en.wikipedia.org/wiki/Flyweight_pattern)*`getCellRenderer()``getCellEditor()``JTable`[](http://docs.oracle.com/javase/tutorial/extra/generics/literals.html)*`JTable``Hashtable defaultRenderersByColumnClass`**

 *** * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-02T21:48:56.863

经过一番挖掘，从[DefaultTableCellRenderer 文档](http://docs.oracle.com/javase/6/docs/api/javax/swing/table/DefaultTableCellRenderer.html)中找到了下一个实现说明：

*实现说明：该类继承自标准组件类 JLabel。然而，JTable 采用了一种独特的机制来渲染其单元格，因此需要对其单元格渲染器进行一些稍微修改的行为。table 类定义了一个单元格渲染器，并将其用作渲染表格中所有单元格的橡皮图章；它渲染第一个单元格，更改该单元格渲染器的内容，将原点移动到新位置，重新绘制它，等等。标准的 JLabel 组件并非设计为以这种方式使用，我们希望避免在每次绘制单元格时触发重新验证。这将大大降低性能，因为重新验证消息将向上传递容器的层次结构以确定是否有任何其他组件会受到影响。由于渲染器仅在绘画操作的生命周期内作为父级，我们同样希望避免与遍历绘画操作的层次结构相关的开销。因此，此类将 validate、invalidate、revalidate、repaint 和 firePropertyChange 方法重写为无操作，并重写 isOpaque 方法只是为了提高性能。如果您编写自己的渲染器，请牢记这一性能注意事项。*

This is essentially what JB explained above.

Thanks for the (quick) answers**

# asp.net - 主机名映射到 ASP.NET / WCF 中的目录

> ID：13672981
> 
> 赞同：0
> 
> 时间：2012-12-02T19:36:46.533
> 
> 标签：asp.net, wcf, iis

我已经阅读了许多与此相关的帖子，但尚未找到解决方案。

我在 ASP.NET 项目的目录“/api”中有一组 WCF 服务文件 (*.svc)

我已经将 api.mydomain.com 和 www.mydomain.com 都指向了运行该项目的服务器。

目前，要访问 .svc 文件，我必须像这样构造 url：

api.mydomain.com/api/[服务文件名].svc

理想情况下，我想找到一些可以对 web.config 进行的更改，以允许使用此 url 来代替相同的资源：

api.mydomain.com/[服务文件名].svc

一个限制：我无法更改 IIS 配置，因为我正在使用 Elasticbeanstalk 部署到 EC2。

感谢您对此的任何帮助...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T19:42:38.757

如果您使用的是 WCF 4，您甚至不需要 svc 文件。

把这样的东西放在你的 web.config

```
<serviceHostingEnvironment multipleSiteBindingsEnabled="true">
    <serviceActivations>
        <add relativeAddress="Service.svc" service="MyService" />
    </serviceActivations>
</serviceHostingEnvironment> 
```

对 api.mydomain.com/service.svc 的任何请求都将调用您的服务实现“MyService”

[这篇博](http://sankarsan.wordpress.com/2010/06/06/fileless-activation-of-wcf-service-in-net-4-0/)文有更多示例，包括服务主机工厂的使用和无扩展 URL

# apache - 用于部署为 cgi 的 Bash 脚本

> ID：13672984
> 
> 赞同：0
> 
> 时间：2012-12-02T19:37:11.613
> 
> 标签：apache, bash, deployment, cgi

我有一个 bash 脚本，它可以复制和修改我的应用程序中作为 cgi 运行的一堆配置文件，以便快速部署和测试。

该脚本位于我主机的 public_html 文件夹中，并且运行良好，权限设置为 755。

我在子文件夹 public_html/foo/bar.cgi 中制作其他 cgi 脚本并授予它 755 权限。

```
#!/bin/bash

echo "Content-type: text/html"
echo ""

# test if we are in the correct place
touch foo 2>&1

echo '<html>'
echo '<head>'
echo '<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">'
echo '</head>'

echo '<body>'
echo '<p>Hello World</p>'
echo '<p>&nbsp;</p>'
echo '<hr/>'

echo '</body>'
echo '</html>'

exit 0 
```

这不起作用，服务器以 403 回答。我检查了文件夹权限，并将其设置为 755 和 777 没有结果

更新：将名称从 test.cgi 更改为 testscript.cgi，现在正在工作

# mysql - 如何进行查询以获取所有产品及其评论

> ID：13672988
> 
> 赞同：0
> 
> 时间：2012-12-02T19:37:27.057
> 
> 标签：mysql, sql, database

我有两张桌子；一个用于产品，另一个用于产品评论。我需要一个查询，它可以为我提供所有带有评论的产品，而不会出现产品表中的重复结果。

问题是当我使用这个查询时：

```
SELECT * FROM `food_products` 
    INNER JOIN `comment`
    ON food_products.product_id = comment.product_id 
```

它从产品表行返回重复项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T19:56:53.777

您可能希望将评论连接在一起。尝试这个：

```
select fp.*,
       group_concat(coalesce(c.comment) seperator '!!!')
from food_products fp left outer join
     comments c
     on fp.product_id = comment.product_id
group by fp.product_id 
```

这用“!!!”分隔评论。您可以选择任何您想要的分隔符；默认为逗号。

# cakephp - 在 CakePHP 中查找至少有一条 HABTM 相关记录的记录

> ID：13672991
> 
> 赞同：1
> 
> 时间：2012-12-02T19:37:47.473
> 
> 标签：cakephp, cakephp-2.0, has-and-belongs-to-many

我的 CakePHP 应用程序中有两个模型：`NewsArticle`和`Image`. 一篇新闻文章可以拥有并属于许多图像，但图像不是必需的。

如何在我的应用程序中找到第一个具有**至少一个**关联图像记录的新闻文章，以便丢弃没有相关图像记录的任何新闻文章？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T20:24:00.160

您必须使用 INNER JOIN（请参阅[CakePHP 中的联接](http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html#joining-tables)）来根据关联的 HABTM 项的存在来限制 find()。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-29T10:57:44.480

使用连接很简单，只需使用 RIGHT JOIN 连接 HABTM 表，因此只收集具有 HABTM 记录的行，这是我的示例[https://www.flylogs.com](https://www.flylogs.com)，我只想要至少被使用的飞机关于飞行员及其姓名：

```
$this->paginate = array(
    'contain' => array('Pilot.name'),
    'group' => 'Aircraft.id',
    'joins' => array(
        array(
            'table' => 'pilots_aircraft',
            'alias' => 'PilotAircraft',
            'type'  => 'right',
            'conditions' => 'Aircraft.id = PilotAircraft.aircraft_id'
        )
    ),
);

$aircraft = $this->paginate('Aircraft'); 
```

重要的分组条款，如果没有说明，它将为每个飞行员重复飞机聚集一排！

# asp.net-mvc - tinymce mcImageManager 配置

> ID：13672992
> 
> 赞同：2
> 
> 时间：2012-12-02T19:37:49.120
> 
> 标签：asp.net-mvc, tinymce, mcimagemanager

```
We have configured NFS (Network File Share) and created a Virtual Directory Link to NFS in the ASP.NET MVC Website. <br> 
```

这是配置。
**\172.0.0.1\Webs\Images 是网络文件共享（来自 UNIX）
“https://www.testsite.com/Images” - 到 NFS 的虚拟目录链接**

当我们尝试从 tinymce 编辑器插入图像时，MCImageManager 不会显示任何图像，并显示“找不到文件/文件夹”。我们还缺少任何其他设置/权限吗？
另一个问题，我们可以在负载平衡配置中使用 MCImageManager 吗？我们的 ASP.NET MVC 站点经过负载平衡并配置为使用 SQL 会话状态。它会产生任何问题吗？
在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T05:47:44.603

这个答案对你来说可能为时已晚，但因为我刚刚经历了一个稍微不同的练习——我使用的是网站根目录之外的文件夹，而不是 NFS。

因此，如果您将图像存储在配置如下的文件夹中：

```
<!-- General file system options -->
...
<add key="filesystem.rootpath" value="C:/temp/Upload" />
... 
```

并且您像这样配置预览部分：

```
<!-- Preview options -->
...
<add key="preview.wwwroot" value="C:/temp/Upload" />
<add key="preview.urlprefix" value="{proto}://{host}/ExternalImage/" />
... 
```

像这样的图像 C:/temp/Upload/anawesomepic.jpg 将在 {proto}://{host}/ExternalImage/anawesomepic.jpg 提供

TinyMCE 然后在编辑文档中插入图像时使用预览 URL。

如果您查看 ImageManagerPlugin.cs 中的 ImageManager 源代码，您会看到在 OnCustomInfo 方法中的某一时刻它调用了这一行：

```
info["thumbnail_url"] = man.ConvertPathToURI(thumbFile.AbsolutePath); 
```

ConvertPathToURI 是插件删除 preview.wwwroot 配置项中定义的前缀的位置。然后 ImageManager 用 preview.urlprefix 在前面加上它，可能在 javascript 的某个地方。

就我而言，我有一个 HttpHandler 可以处理 ExternalImage 中的图像，因此设置肯定与您的不太一样，但也许它会有所帮助。

# android - 将 android 从 2.3.3 升级到 4.0.3 后 phonegap 应用程序 ajax 调用失败

> ID：13672994
> 
> 赞同：0
> 
> 时间：2012-12-02T19:37:51.533
> 
> 标签：android, ajax, cordova, jquery-mobile, android-4.0-ice-cream-sandwich

我开发了一个移动应用程序，使用：

*   jQuery手机1.1
*   jQuery 1.7.2
*   科尔多瓦/phonegap 2.0.0

此应用程序触发对远程服务器的 AJAX 发布调用，例如：

```
$.ajax(
type: "post",
cache: false,
timeout: 30000,
url: "http://"+ username+":"+password +"@mycompany.com/mysite/and/so/on.asmx",
contentType: "text/xml",
// other params... 
```

该应用程序在 Android 2.2 和 2.3.3 中运行良好。到现在为止还挺好。

用户已升级到 Android 4.0.3，主页加载正常，但 ajax 调用不再起作用。在 android 4.1 的模拟器中也是一样的。

考虑到除了平台之外没有其他任何变化，Webkit 层中的哪些变化可能会导致问题？是否有已知的迁移规则要遵循？

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T00:23:30.457

在较新版本的 android 中，为了提高安全性，很多东西都被锁定了。url 中包含的密码是不安全的，特别是如果您不使用 https，因此某些浏览器不再支持它们。

我没有看到任何特定于 android webview 的东西，但它在 google 的其他浏览器中肯定已被弃用。

[http://code.google.com/p/chromium/issues/detail?id=123150](http://code.google.com/p/chromium/issues/detail?id=123150)

尝试在标头中设置凭据：

```
$.ajax({
        type: "GET",
        url: url,
        dataType: 'json',
        async: true,
        data: {},
        beforeSend: function(xhr) {
            xhr.setRequestHeader('Authorization', "Basic " + btoa(user + ':' + pass));
        },
        success: onSuccess,
        error: onError
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-20T08:41:56.913

只需放入`<access origin="your server" subdomains="true" />`config.xml 即可。无需重写所有 ajax 调用 ;-) 刚刚用我的应用程序完成了它，它在所有 android 版本上都可以正常工作。

# php - 子文件夹的重写规则

> ID：13672998
> 
> 赞同：5
> 
> 时间：2012-12-02T19:38:45.277
> 
> 标签：php, apache, .htaccess, mod-rewrite

我有文件结构

```
   索引.php
   .htaccess
   新闻/index.php
   新闻/.htaccess

```

第一个.htaccess：

```
    重写引擎开启
    RewriteBase /

    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d

    RewriteCond %{REQUEST_URI} !^/news/
    重写规则。/index.php [L]

```

第二（新闻/.htaccess）

```
    重写引擎开启
    重写规则。/index.php

```

请求[http://test.t/news/news/61](http://test.t/news/news/61)处理第一个 index.php 但我需要做第二个

我为第一个 .htaccess 尝试了更多选项，但没有成功

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T19:51:29.900

检查您的 Apache 配置文件 (httpd.conf) 并确保您用于站点的目录包含 AllowOverride 选项。

例子：

```
<Directory "/Applications/MAMP/htdocs">
    Options All
    AllowOverride All
    Order allow,deny
    Allow from all
</Directory> 
```