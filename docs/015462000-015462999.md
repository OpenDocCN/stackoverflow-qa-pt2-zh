# StackOverflow 问答 15462000-15462999

# android - 当通过意图传递字符串时，在下一个活动中获取字符串值时只有一个不为空

> ID：15462002
> 
> 赞同：2
> 
> 时间：2013-03-17T14:42:23.270
> 
> 标签：android, android-intent

我将字符串作为意图附加值传递，以下方法传递了包含我希望通过意图传递的信息的参数，我可以看到“mc”和“title”中的值应该在 toasts 中：

```
 private void addProximityAlert(int id, Double latitude, Double longitude, String title, String mc) {

        Intent intent = new Intent(PROX_ALERT_INTENT);
        intent.putExtra("id", id);
        intent.putExtra("mc", mc);  
        intent.putExtra("gl", latitude);
        intent.putExtra("title", title);

        PendingIntent proximityIntent = PendingIntent.getBroadcast(Map.this, id, intent, 0);
        lm.addProximityAlert( latitude, longitude,  POINT_RADIUS,  PROX_ALERT_EXPIRATION,  proximityIntent  );

        Toast.makeText(getApplicationContext(),"INPAMAP "+intent.getStringExtra("title")+intent.getStringExtra("mc"),Toast.LENGTH_SHORT).show(); 
 } 
```

现在在我的下一堂课中，无论我尝试做什么，只有“mc”保留其值，其他变量始终为空，这是下一个活动：

```
@Override
public void onReceive(Context context, Intent intent) {

       NotificationManager notificationManager = (NotificationManager) context.getSystemService(Context.NOTIFICATION_SERVICE); 

       Intent notificationIntent = new Intent(context, Map.class);
       PendingIntent pendingIntent = PendingIntent.getActivity(context, 0, notificationIntent, 0);
       Notification notification = createNotification();

       //Here I can see title is null and mc is what it should be
       Toast.makeText(context,"IN PA "+intent.getStringExtra("title")+intent.getStringExtra("mc") ,Toast.LENGTH_SHORT).show(); 
```

我尝试过使用捆绑包，但这不起作用，我完全不知道为什么只有 mc 被传递，而 mc 和 title 都是字符串。我试过只传递 mc 或 title ，但仍然只有 mc 不为空。我试图更改它们传递给 addproximityAlert 方法的顺序以及它们作为附加项添加的顺序，我没有选择。我实际上想知道如何在 Eclipse 中正确调试，这样我也许可以在使用 SO 之前自己找出这些问题，但我面临着很大的时间压力。

我将不胜感激有关如何找出我的问题的建议，谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T16:29:43.613

您需要在方法中设置`PendingIntent.FLAG_UPDATE_CURRENT`标志。`PendingIntent.getXXX`

```
PendingIntent.getBroadcast(Map.this, id, intent, PendingIntent.FLAG_UPDATE_CURRENT);
PendingIntent.getActivity(context, 0, notificationIntent, PendingIntent.FLAG_UPDATE_CURRENT); 
```

问题是`PendingIntent.getXXX`缓存意图并且可以返回先前创建的实例而不更新它。`FLAG_UPDATE_CURRENT`强制它更新意图。[你可以在官方文档](http://developer.android.com/reference/android/app/PendingIntent.html)中找到更详细的解释。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T15:42:53.687

如果您想使用调试器找出问题，那是最好的方法。它在 Eclipse 中的工作方式是您在要停止代码运行并查看变量的位置设置断点。这些可以通过右键单击任何行号旁边的左侧栏来设置。现在单击调试。您可以从 Project->debug 执行此操作。您也可以右键单击项目和调试 -> Android 应用程序。现在，当应用程序运行并到达您的断点时，它会切换到调试模式。在这里您可以切换断点，查看每个点的变量值。

除此之外，您是否尝试将整组值作为列表传递？类似于：您可以将 ArrayList 从一个父活动传递给被调用的活动。这是一个示例：

```
ArrayList<TYPE> value = new ArrayList<TYPE>();
// populate the list
value.add(CALUE);
Intent intent = new Intent(CurrentActivity.this,TargetActivity.class);
intent.putExtra("arraylist", value);
startActivity(intent); 
```

在目标类中，您可以按如下方式检索列表：

```
// Call in in OnCreate()
// TYPE can be String, Double etc.
ArrayList<TYPE> list=(ArrayList<TYPE>)getIntent().getSerializableExtra("arraylist"); 
```

希望这两件事中的任何一个都有帮助。

# c# - 无法将类型“int”隐式转换为“...任务” '

> ID：15462004
> 
> 赞同：11
> 
> 时间：2013-03-17T14:42:27.130
> 
> 标签：c#, task

如果这是异步的，它会返回没有错误，为什么它没有异步就抛出错误，异步在这个操作中毫无价值。

```
public Task<int> countUp()
{
    string compare = txtTag.Text;
    int count = 0;
    for (int i = 0; i < dataGridView1.Rows.Count; i++)
    {
        if (compare == dataGridView1[0, i].Value.ToString())
        {
            BeginInvoke(new Action(() =>
            {
                count++;
                txtCount.Text = count.ToString();
            }));
        }
    }

    return count;
} 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-03-17T14:44:04.257

好吧，您*可以*返回一个已完成的任务：

```
return Task.FromResult(count); 
```

[http://msdn.microsoft.com/en-us/library/hh194922.aspx](http://msdn.microsoft.com/en-us/library/hh194922.aspx)

不过，为什么要返回 Task 有点神秘。从概念上讲，任务代表了未来某个时间会发生某事的承诺。在您的情况下，它已经发生了，因此使用 Task 完全没有意义。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-17T14:43:08.723

正如错误明确指出的那样，您不能将 a`int`作为 a返回`Task<int>`。（除非你把它变成一个`async`方法，它在编译时魔法来创建一个`Task<T>`.

如果您的方法不是异步的，那么您一开始就不应该返回 a `Task<T>`。
相反，直接返回`int`即可。

如果由于某种原因*需要*返回 a `Task<T>`，则可以调用`Task.FromResult()`以创建具有给定值的已完成任务。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-09-22T04:13:30.893

这里的代码显然是不正确的。尝试查看代码中的返回类型。您正在返回，并且与`int`期望的返回类型不匹配`Task<int>`。如果您不打算在此方法中使用 async await，则只需将返回类型更改为`int`.

但是，如果您坚持要退货`Task<int>`而不是`int`，您可以使用以下内容作为您的退货声明

```
return Task.FromResult(count) 
```

这会将您包装`int`成`Task<int>`. 更多信息`Task.FromResult`可以访问： [https ://msdn.microsoft.com/en-us/library/hh194922(v=](https://msdn.microsoft.com/en-us/library/hh194922(v=vs.110).aspx) [vs.110).aspx Task.FromResult<TResult>在C#中有什么用](https://stackoverflow.com/questions/19568280/what-is-the-use-for-task-fromresulttresult-in-c-sharp)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-17T14:44:47.577

此方法中没有任何内容表明它是异步方法，除了您已将其声明为 return 的事实`Task<int>`。

但是，您不是返回 a `Task<int>`，而是返回`count`, an `int`。

由于您不等待操作完成，因此我将删除`Task<int>`返回类型并将其替换为 just`int`而不是因为此方法是完全同步的（除了您不等待的部分）。

# c# - 单元测试超时

> ID：15462011
> 
> 赞同：2
> 
> 时间：2013-03-17T14:42:49.550
> 
> 标签：c#, .net, visual-studio-2010

我怀疑这个问题可能是由于配置错误造成的。最简单的单元测试也会挂起。基本上，无论我在单元测试中放入什么，测试都会启动并继续加载，直到超时。我的初始测试使用了 TransactionScope、DataContext 和自定义对象。然后，我将单元测试简化为以下内容，但它仍然挂起：

```
using System;
using System.Text;
using System.Collections.Generic;
using System.Linq;
using Microsoft.VisualStudio.TestTools.UnitTesting;
using ManifestService;
using System.Transactions;

namespace UnitTesting
{
    [TestClass]
    public class PackagerUnitTest
    {
        [TestMethod]
        public void Packager_CreatePackageType()
        {
            string expected = "test-package";
            Assert.AreEqual("test-package", expected);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T16:01:25.647

所以，这是一个配置问题，在 Visual Studio 级别。基本上，如果您想在安装 Visual Studio 2012 的同时运行单元测试，则需要 Visual Studio 2010 SP1。

感谢这个博客的回答：

[http://dorkasaurusrex.blogspot.ca/2012/11/visual-studio-2010-unit-test-hangs.html](http://dorkasaurusrex.blogspot.ca/2012/11/visual-studio-2010-unit-test-hangs.html)

SP1下载链接：

[http://www.microsoft.com/en-us/download/details.aspx?id=23691](http://www.microsoft.com/en-us/download/details.aspx?id=23691)

# javascript - 点击太快可以跳过jQuery Mobile中的一些操作吗？

> ID：15462013
> 
> 赞同：2
> 
> 时间：2013-03-17T14:43:05.243
> 
> 标签：javascript, jquery, jquery-mobile

我有一个显示项目列表的 jQuery Mobile 应用程序。单击向上或向下按钮时，我可以选择一个项目并将其向上或向下移动。

当我通过单击按钮向上或向下移动项目时，显示的项目以及它们的项目 ID 都会被交换。然后我发送一条 ajax 发布消息，其中包含项目移动的步骤。

我所看到的是，如果我点击得太快，有时项目不会按照预期的方式移动。也可能发生 item-id 重复的情况，就好像函数在 item-id 交换操作的中间被中断一样。

这是一个已知的功能吗？有没有办法避免这种情况？

这是移动项目的代码

```
$("#btnListUp").on( "click", function(evt)
{
    if( selectedItem && !selectedItem.hasClass('ui-first-child') )
    {
        var prev = selectedItem.prev();
        var prevId = prev.attr('item-id');
        var thisId = selectedItem.attr('item-id');
        var step = (parseInt(prevId) - parseInt(thisId))+'';
        prev.attr('item-id', thisId );
        selectedItem.attr('item-id', prevId );
        prev.detach().insertAfter(selectedItem);
        $('#ShopList').listview('refresh');
        $.ajax( {type: 'POST', url: thisId+'/moveUp', data : step,
                contentType :'applicatio/octet-stream' } );
    }
});

$("#btnListDown").on( "click", function(evt)
{
    if( selectedItem && !selectedItem.hasClass('ui-last-child') )
    {
        var next = selectedItem.next();
        var nextId = next.attr('item-id');
        var thisId = selectedItem.attr('item-id');
        var step = (parseInt(nextId) - parseInt(thisId))+'';
        next.attr('item-id', thisId );
        selectedItem.attr('item-id', nextId );
        next.detach().insertBefore(selectedItem);
        $('#ShopList').listview('refresh');
        $.ajax( {type: 'POST', url: thisId+'/moveDown', data : step,
                contentType :'applicatio/octet-stream' } );
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T15:29:48.073

这是预期结果，您已将单击事件绑定到 btnListUp 和 btnListDown 元素。下一个点击事件不会等待第一个完成，第一个也不会推迟第二个。

在您的情况下，只有两种解决方案是可能的。

## 解决方案 1

首先，在第一次点击后，解除按钮的点击事件，像这样：

```
$("#btnListUp").on( "click", function(evt)
{
    $(this).off('click'); 
```

其次，在ajax成功和错误回调期间再次绑定click事件。这是一种方式。

## 解决方案 2

第二种解决方案更简单，但有时您将无法使用它：

看看这个链接：

[1点击后禁用jquery功能，以防止多次执行](https://stackoverflow.com/questions/6064232/disable-jquery-function-after-1-click-to-prevent-multiple-executions)

# python - 将任意代码注入 Python SimpleXMLRPC 服务器

> ID：15462016
> 
> 赞同：3
> 
> 时间：2013-03-17T14:43:12.833
> 
> 标签：python, security, simplexmlrpcserver

在 python [SimpleXMLRPC Server](http://docs.python.org/3.1/library/xmlrpc.server.html)的 python 文档中，提到了：

警告 启用 allow_dotted_names 选项允许入侵者访问您模块的全局变量，并可能允许入侵者在您的机器上执行任意代码。仅在安全、封闭的网络上使用此选项。

现在我有一个服务器，代码如下：

```
from xmlrpc.server import SimpleXMLRPCServer
from xmlrpc.server import SimpleXMLRPCRequestHandler

server = SimpleXMLRPCServer(("localhost", 8000),
                            requestHandler=RequestHandler)
server.register_introspection_functions()

server.register_function(pow)

def adder_function(x,y):
    return x + y
server.register_function(adder_function, 'add')

class MyFuncs:
    def mul(self, x, y):
        return x * y

server.register_instance(MyFuncs(), allow_dotted_names=True)

server.serve_forever() 
```

请解释如何利用该漏洞将任意代码注入服务器？如果我上面的代码不是易受攻击的，那么举一个可以被利用的例子和客户端代码这样做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T16:19:37.030

`MyFuncs().mul`不仅仅是一个可调用函数，它（像所有 Python 函数一样）是一个具有自己属性的一流对象。

除了一大堆`__xxx__`魔法方法（因为 SimpleXMLRPCServer 阻止访问以 开头的任何东西，您无法访问`_`）之外，还有内部方法成员`im_class`（指向类对象）、`im_self`（指向`MyFuncs()`实例）和`im_func`（指向函数定义为`mul`）。该函数对象本身具有许多可访问的属性 - 最值得注意的是包括`func_globals`哪些属性可以访问包含文件的变量范围字典。

因此，通过调用`mul.im_func.func_globals.get`攻击者将能够读取您在脚本中设置的任意全局变量，或者使用`update()`字典来更改它们。在上面的示例中，这是不可利用的，因为您在全局变量中没有任何敏感内容。但这可能不是您希望始终保持真实的东西。

完整的“执行任意代码”不太可能，但您可能会想象一个可写的全局`codeToExecute`变量，`eval`例如稍后会被编辑，或者有人使用 注册整个模块`register_instance`，从而允许访问它导入的所有模块（典型示例：`os`和`os.system`）。

在 Python 3 中，这种特殊的攻击不再可访问，因为函数/方法的内部属性被重命名为双下划线版本，在那里它们被阻止了。但总的来说，“默认打开”并允许外部访问仅基于名称的实例上的任何属性似乎是一个坏主意 - 不能保证将来不会存在其他非下划线名称，或者属性不会被添加到可以以某种方式利用的那些属性的可访问内置类型（元组、字典）中。

如果您确实需要嵌套属性访问，那么提供一个 SimpleXMLRPCServer 版本似乎更安全，该版本需要类似`@rpc_accessible`装饰的东西来定义应该可见的内容。

# css - 自动调整 div 高度以填满剩余空间

> ID：15462018
> 
> 赞同：2
> 
> 时间：2013-03-17T14:43:35.647
> 
> 标签：css

我有 2`div`秒。我给了第一个 a `height`，`70px`现在我希望^(第二) `div`个填满网页的剩余空间。这应该与第一个 div 相关。下面是我的代码：（2 `div`s 是`header`and `content`）

```
* {
  margin: 0px;
  padding: 0px;
}

#header {
  background-color: #1874CD;
  width: 100%;
  height: 70px;
}

#name {
  color: #ffffff;
  padding: 10px 10px 10px 10px;
  font-size: 35px;
  font-weight: bold;
  font-family: Calibri;
}

#content {
  background-color: #F5F5F5;
  width: 100%;
  height: 650px;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T15:04:39.943

做这样的事情怎么样（[JSfiddle 例子](http://jsfiddle.net/opherv/nQCEp/)）：

```
#header{
    background-color: #1874CD;
    width: 100%;
    height: 70px;
    z-index: 2;
    position: relative;
}

#content{
    position: absolute;
    left: 0px;
    top: 0px;
    background-color: #F5F5F5;
    width: 100%;
    height: 100%;    
    padding-top: 70px;
    -webkit-box-sizing: border-box; /* Safari/Chrome, other WebKit */
    -moz-box-sizing: border-box;    /* Firefox, other Gecko */
    box-sizing: border-box;   
} 
```

# opengl - GLSL 真的用统一（不是每个顶点）值进行不必要的计算吗？

> ID：15462022
> 
> 赞同：8
> 
> 时间：2013-03-17T14:44:03.903
> 
> 标签：opengl, optimization, glsl, compiler-optimization

例如，如果我使用如下顶点着色器：

```
#version 400 core

uniform mat4 projM;
uniform mat4 viewM;
uniform mat4 modelM;

in vec4 in_Position;

out vec4 pass_position_model;

void main(void) {
    gl_Position = projM * viewM * modelM * in_Position;
    pass_position_model = modelM * in_Position;
} 
```

它会`projM * viewM * modelM`为每个顶点进行矩阵乘法，还是足够聪明地计算一次并且在统一变量改变之前不重新计算？如果它不够“聪明”，那么除了计算 CPU 上的所有统一相关值并将它们作为统一变量发送到 GPU 之外，还有其他方法可以优化它吗？
我也对以后可以毫无问题地移植到 OpenGL ES 2.0 的解决方案感兴趣。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-18T11:19:45.437

因此，据我所知，没有一般的答案。不过，我对我的硬件做了一些测试。我的库存中有 2 个 GPU，`Intel HD Graphics 3000`并且`NVidia GeForce GT 555M`. 我在顶点着色器中使用矩阵乘法测试了我的程序（程序本身是用 java/scala 编写的），然后将乘法移动到 CPU 程序并再次测试。

（sphereN - 它是一个具有 2*N^2 四边形的连续旋转球体，使用 glDrawElements(GL_QUADS,...) 绘制，具有 1 个纹理且没有任何照明/其他效果）

**顶点着色器中的矩阵乘法：**

```
intel:
    sphere400: 57.17552887364208 fps
    sphere40: 128.1394156842645 fps
nvidia:
    sphere400: 134.9527665317139 fps
    sphere40: 242.0135527589545 fps 
```

**cpu上的矩阵乘法：**

```
intel:
    sphere400: 57.37234652897303 fps
    sphere40: 128.2051282051282 fps
nvidia:
    sphere400: 142.28799089356858 fps
    sphere40: 247.1576866040534 fps 
```

测试表明，在顶点着色器中乘法（均匀）矩阵是个坏主意，至少在这个硬件上是这样。所以一般来说可能不依赖于相应的 GLSL 编译器优化。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-17T15:02:10.967

> 它会为每个顶点执行 projM * viewM * modelM 矩阵乘法，还是足够聪明地计算一次并且在统一变量更改之前不重新计算？

询问相关 OpenGL 实现的开发人员。OpenGL 规范对此没有任何规定，但驱动程序和 GLSL 编译器编写者可能已经为此实现了优化。

> 如果它不够“聪明”，那么除了计算 CPU 上的所有统一相关值并将它们作为统一变量发送到 GPU 之外，还有***其他方法可以优化它吗？***

不，你必须自己做跑腿工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-17T15:06:12.173

所有 OpenGL 和 GLSL 优化都是特定于供应商的。很难说 glsl 编译器的最终输出是什么。

您可以在此处查找供应商特定信息： [http ://renderingpipeline.com/graphics-literature/low-level-gpu-documentation/](http://renderingpipeline.com/graphics-literature/low-level-gpu-documentation/)

对于您的代码，您始终可以将矩阵“打包”到新的 uniform:`matModelViewProjection`中，在应用程序中将其相乘并将其发送到顶点着色器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-17T15:15:46.967

这完全取决于驱动程序。OpenGL 是一个规范，如果您向他们支付实施实施的权利，他们会给您一个示例实施以供使用，但仅此而已。

除此之外，您需要考虑矩阵乘法限制，doing`projM * viewM * modelM * vertex`与doing 不同`vertex * projM * viewM * modelM`。那是因为矩阵是从右到左相乘的，顺序确实很重要。所以着色器不能预先计算`projM * viewM * modelM`以在顶点之间共享，因为这会给你带来虚假的结果。

# android - 为android创建多屏幕分辨率代码库UI

> ID：15462026
> 
> 赞同：0
> 
> 时间：2013-03-17T14:44:56.910
> 
> 标签：android, android-layout

这是我在 Stack 上的第一个问题，很抱歉我的英语不好。我正在开发 Android 应用程序，我必须在其中设计基于代码的 ui（无 xml ui 或布局）到目前为止我所做的是我为不同的控件创建了不同的类，例如按钮我有一个自定义按钮类，其中我有我自己创建按钮的方法。现在问题出现在处理不同屏幕尺寸上任何 ui 控件的宽度、高度和位置。任何机构都可以帮助我如何做到这一点。我已经创建了检测屏幕类型及其高度和宽度的方法，但仍然没有成功。请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T14:54:20.173

您可以覆盖活动上的[onConfigurationChange](http://developer.android.com/reference/android/app/Activity.html#onConfigurationChanged%28android.content.res.Configuration%29)以处理方向更改：

```
public void onConfigurationChanged (Configuration newConfig){
           int orientation_default = newConfig.orientation;
            switch (orientation_default) {
            case Configuration.ORIENTATION_PORTRAIT: {
                //change your layout according to orientation

                break;
            }
            case Configuration.ORIENTATION_LANDSCAPE: {
               //change your layout according to orientation

                break;
            }

} 
```

它是一个解决方案，但是如果您要在 android 上进行越来越多的开发，您真的应该考虑使用 xml 布局构建您的 ui，因为它已经完成了它更容易处理配置更改。

希望有帮助

# visual-studio-2010 - OpenCV 和 VisualStudio 2010 dll 问题

> ID：15462027
> 
> 赞同：0
> 
> 时间：2013-03-17T14:44:58.913
> 
> 标签：visual-studio-2010, opencv

大家好，我想尝试一下 openCV 库，但我在设置环境时遇到了一些问题。

从物业经理我创建了一个新工作表并设置：

**VC++ 目录：** - 包括目录：$(OPENCV_DIR)\build\x86\vc10\bin 和 $(OPENCV2_DIR)\build\include - 库目录：$(OPENCV2_DIR)\build\x86\vc10\lib;

**C/C++ :** - 附加包含目录：$(OPENCV2_DIR)\include;

**链接器：**

> opencv_calib3d244d.lib opencv_contrib244d.lib opencv_core244d.lib opencv_features2d244d.lib opencv_flann244d.lib opencv_gpu244d.lib opencv_haartraining_engined.lib opencv_highgui244d.lib opencv_imgproc244d.lib opencv_legacy244d.lib opencv_ml244d.lib opencv_nonfree244d.lib opencv_objdetect244d.lib opencv_photo244d.lib opencv_stitching244d.lib opencv_ts244d.lib opencv_video244d。库 opencv_videostab244d.lib

-其他库目录：$(OPENCV2_DIR)\libs

我可以编译但我无法执行程序，因为我得到一个错误 opencv_core242.dll is missing。

我的错误在哪里？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T15:00:00.497

“我收到一个错误 opencv_core242.dll 丢失”

如果您链接到 opencv\build\x86\vc10\lib 中的库（您的编译器/链接器设置看起来不错），

你必须附加

opencv\build\x86\vc10\bin

到您的 PATH 环境变量，因此您的 exe 可以在运行时找到 dll。

# android - JSONArray 到 Spinner

> ID：15462031
> 
> 赞同：6
> 
> 时间：2013-03-17T14:45:06.693
> 
> 标签：android, json, android-actionbar, android-spinner

我有个问题。我没有将 JSONArray 设置为 Spinner。我的 JSON 外观`["category1","category2","category3"]` 如何让这个 JSONArray 变成微调器？不知道我的代码好不好

```
public class Main extends Activity {

    String urlCat = "http://tvapp.pcrevue.sk/categories.json";

    @Override
    public void onCreate(Bundle icicle) {
        super.onCreate(icicle);

         JSONArray jsonArray = getJSONArrayFromUrl(urlCat);

        final ActionBar actionBar = getActionBar();
        actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_LIST);
        actionBar.setDisplayShowTitleEnabled(false);
        actionBar.setDisplayUseLogoEnabled(false);
        ArrayAdapter<String> spinnerMenu = new ArrayAdapter<String>(actionBar.getThemedContext(), android.R.layout.simple_list_item_1, jsonArray);
        actionBar.setListNavigationCallbacks(spinnerMenu, 
                new ActionBar.OnNavigationListener() {

                    @Override
                    public boolean onNavigationItemSelected(int itemPosition, long itemId) {
                        FragmentTransaction tx = getFragmentManager().beginTransaction();
                        switch (itemPosition) {
                        case 0:
                            tx.replace(android.R.id.content, new Tab1Fragment());
                            break;
                        case 1:
                            tx.replace(android.R.id.content, new Tab2Fragment());
                            break;

                        default:
                            break;
                        }
                        tx.commit();
                        return false;
                    }
                });
    }

    public JSONArray getJSONArrayFromUrl(String url) {
        InputStream is = null;
        JSONArray jObj = null;
        String json = "";
        // Making HTTP request
        try {
            // defaultHttpClient
            DefaultHttpClient httpClient = new DefaultHttpClient();
            HttpGet httpGet = new HttpGet(url);

            HttpResponse httpResponse = httpClient.execute(httpGet);
            HttpEntity httpEntity = httpResponse.getEntity();
            is = httpEntity.getContent();

        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

        try {
            BufferedReader reader = new BufferedReader(new InputStreamReader(is, "iso-8859-1"));
            StringBuilder sb = new StringBuilder();
            String line = null;
            while ((line = reader.readLine()) != null) {
                //json += line;
                sb.append(line + "\n");
            }
            is.close();
            json = sb.toString();
        } catch (Exception e) {
            Log.e("Buffer Error", "Error converting result " + e.toString());
        }

        // try parse the string to a JSON object
        try {
            jObj = new JSONArray(json);
        } catch (JSONException e) {
            Log.e("JSON Parser", "Error parsing data " + e.toString());
        }

        // return JSON String
        return jObj;

    }
} 
```

我需要你的帮助。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T14:53:47.933

我在 ArrayAdapter 中找不到任何接受 JSONArray 对象的构造函数，如果您有任何疑问，请参阅[Array Adapter](http://developer.android.com/reference/android/widget/ArrayAdapter.html)。

您需要传递 List 而不是 JSONArray。而且， **你正在执行 UI 线程的网络操作**，所以你会得到**NetworkOnMainThread**异常。低版本没问题，但高版本会抛出异常。尝试使用**AsyncTask**获取值或**单独的线程**

所以得到这样的列表

```
ArrayList<String> list = new ArrayList<String>();
for(int i=0; i<jsonArray.length(); i++) {
    list.add(jsonArray.getString(i));
}
ArrayAdapter<String> spinnerMenu = new ArrayAdapter<String>(actionBar.getThemedContext(), android.R.layout.simple_list_item_1, list); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T14:53:51.957

**第一个解决方案**

实际上我在 ArrayAdapter 中没有找到任何需要 JSONArray 的构造函数。如果您`JSONArray`拥有所有字符串元素，那么

```
public class MainActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    try {
        List<String> listist = new ArrayList<String>();

        String res = callGet("http://tvapp.pcrevue.sk/categories.json");
        JSONArray jsonArray = new JSONArray(res);

        for (int i = 0; i < jsonArray.length(); i++) {
            try {
                listist.add("" + jsonArray.get(i));
            } catch (JSONException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }

        Log.e("", "listist.size() : " + listist.size());

    } catch (JSONException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
}

public String callGet(String urlString) {

    HttpParams params = new BasicHttpParams();
    HttpConnectionParams.setSoTimeout(params, 10000);
    HttpConnectionParams.setConnectionTimeout(params, 10000);
    HttpClient httpclient = new DefaultHttpClient(params);
    HttpGet httppost = new HttpGet(urlString);

    try {

        HttpResponse response = httpclient.execute(httppost);
        return EntityUtils.toString(response.getEntity());
    } catch (Exception e) {
        return "";
    }
}
} 
```

我得到了我的 logcat 输出

```
03-17 21:49:36.821: E/(376): listist.size() : 10 
```

**第二种解决方案**

您是否尝试过[使用 GSON](https://code.google.com/p/google-gson/) lib 进行 json 解析？它将 Java 对象转换为它们的`JSON`表示形式。

```
List<String> listist = new ArrayList<String>();
iidList = new Gson().fromJson(jsonArray, List.class);

ArrayAdapter<String> spinnerMenu = new ArrayAdapter<String>(
            actionBar.getThemedContext(),
            android.R.layout.simple_list_item_1, listist); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T14:59:29.303

微调器接受数组没有问题。因此，只需从您的 json 中提取一个 java 数组并将该数组传递给微调器。网上有很多关于如何将json转成java数组的例子，比如[How to parse a JSON and turn its values into an Array？](https://stackoverflow.com/questions/2255220/how-to-parse-a-json-and-turn-its-values-into-an-array). 对于使用 java 数组创建微调器：[Android: Create spinner programmatically from array](https://stackoverflow.com/questions/2784081/android-create-spinner-programmatically-from-array)

# c++ - C++：这是递归删除链表的正确方法吗？

> ID：15462039
> 
> 赞同：0
> 
> 时间：2013-03-17T14:45:43.713
> 
> 标签：c++, recursion, linked-list

我想知道这是否正确，因为 XCode 在执行 getNext() 时给了我一个 EXC_BAD_ACCESS 错误，但 Visual Studio 没有。

```
void deleteList(LinkedList* node) {

    if (node == NULL)
        return;
    else {
        delete node;
        node=NULL;
        deleteList(node->getNext());
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T14:49:39.983

您删除一个节点，将其无效，然后使用它来调用`getNext()`. 那是未定义的行为。

只需在节点析构函数中做同样的工作。

```
struct NodeT
{
  NodeT* next;
  ~NodeT()
  {
    delete next;
  }
}; 
```

要么，要么先删除尾部，然后再删除节点本身：

```
void deleteList(LinkedList* node) {

    if (node == NULL)
        return;
    else {
        deleteList(node->getNext());
        delete node;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T15:03:05.173

设置`node`为`NULL`通常是让系统知道它为空的一种方式。设置节点通常会使您的程序更安全，因为当您尝试删除节点时`NULL`，编译器或 IDE 可能会通知您它是一个节点。为了更深入地了解，您可以查找一些关于空指针的说明。`NULL``NULL`

# c - return 语句中的值 -1

> ID：15462041
> 
> 赞同：0
> 
> 时间：2013-03-17T14:45:56.737
> 
> 标签：c, if-statement

我想知道当返回值为-1时它如何打印该行。另外，我不知道 -1 是做什么的，比如 1 代表真，0 代表假，但 -1 是什么。

```
#include <stdio.h>

struct date {
    int day, month, year;
};

int compare_dates(struct date d1, struct date d2) {
    if(d1.year < d2.year)
        return -1;
    else if(d1.year > d2.year)
        return 1;
    else if(d1.month < d2.month) 
            return -1;
    else if(d1.month > d2.month) 
            return 1;
    else if(d1.day < d2.day) 
            return -1;
    else if(d1.day > d2.day)
            return 1;
    else
        return 0;

}

int main(void) {
    struct date d1, d2;
    printf("Enter first date (dd/mm/yyyy): ");
    scanf("%2d/%2d/%4d", &d1.day, &d1.month, &d1.year);
    printf("Enter second date (dd/mm/yyyy): ");
    scanf("%2d/%2d/%4d", &d2.day, &d2.month, &d2.year);

    if(compare_dates(d1, d2)) 
        printf("Date1 comes after than Date2");
    else if(!compare_dates(d1, d2))
        printf("Date1 and Date2 are equal");
    else if(-1)
        printf("Date1 comes before than Date2");

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T14:49:31.260

通过查看您的 compare_dates 函数，`1`如果日期 d1`greater`比日期 d2`-1`将返回，如果日期 d1`lesser`将比日期 d2`0`将返回，如果两个日期都将返回`same`。

因此，您的代码应如下所示：

```
 int main(void) 
   {
        struct date d1, d2;
        int result;
        printf("Enter first date (dd/mm/yyyy): ");
        scanf("%2d/%2d/%4d", &d1.day, &d1.month, &d1.year);
        printf("Enter second date (dd/mm/yyyy): ");
        scanf("%2d/%2d/%4d", &d2.day, &d2.month, &d2.year);

        result = compare_dates(d1, d2);
        if(1 == result)
            printf("Date1 comes after than Date2");
        else if(0 == result)
            printf("Date1 and Date2 are equal");
        else if(-1 == result)
            printf("Date1 comes before than Date2");

   } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T15:14:20.610

如果你有一个名为 的函数`dates_are_equal`，返回 0 或 1（或更一般地 0 或非 0），那么直接使用结果作为条件是有意义的：

```
if (dates_are_equal(d1, d2)) {
    printf("Date1 and Date2 are equal\n");
}
else {
    printf("Date1 and Date2 are not equal\n");
} 
```

但是您的`compare_dates`函数可以返回具有三种不同含义的三个不同整数值中的任何一个。结果是一个数字，而不是一个条件，所以不要把它当作一个条件。相反，通过将结果与另一个整数进行比较来构建条件。

有几种方法可以做到这一点。与 类比`strcmp()`，它通过返回一个小于、等于或大于的值`0`（不一定只是`-1`、`0`或`-1`）来表示比较结果，您可以这样写：

```
int comparison = compare_dates(d1, d2);
if (comparison < 0) {
    printf("Date1 comes before Date2\n");
}
else if(comparison == 0) {
    printf("Date1 and Date2 are equal\n");
}
else { // No need to test again here
    printf("Date1 comes after Date2\n");
} 
```

如果您想假设`compare_dates()`只能返回`-1`、`0`或`1`，则可以使用 switch 语句：

```
switch (compare_dates(d1, d2)) {
    case -1:
        printf("Date1 comes before Date2\n");
        break;
    case 0:
        printf("Date1 and Date2 are equal\n");
        break;
    case 1:
        printf("Date1 comes after Date2\n");
        break;
    default:
        fprintf(stderr, "Internal error, unexpected result\n");
        exit(EXIT_FAILURE);
} 
```

我*不*建议使用`(!comparison)`代替`(comparison == 0)`. 这是完全合法的，它对编译器意味着完全相同的事情，但在我看来，最好将`!`运算符保留为真正逻辑布尔值的值。

将非布尔表达式视为条件是常见的做法，例如写作

```
if (!strcmp(s1, s2)) {
    /* the strings pointed to by s1 and s2 are equal */
} 
```

或者

```
if (!ptr) {
    /* ptr is a null pointer */
} 
```

但我发现更明确会使代码更易于阅读：

```
if (strcmp(s1, s2) == 0) {
    /* the strings pointed to by s1 and s2 are equal */
} 
```

或者

```
if (ptr != NULL) {
    /* ptr is a null pointer */
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-17T14:48:55.457

这个：

```
if(compare_dates(d1, d2)) 
    printf("Date1 comes after than Date2");
else if(!compare_dates(d1, d2))
    printf("Date1 and Date2 are equal");
else if(-1)
    printf("Date1 comes before than Date2"); 
```

搞砸了。您应该调用 compare_dates 一次并将其结果与各种可能性进行比较。

尤其`if(-1)`是胡说八道，因为它永远都是真的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-17T14:49:58.187

在 C 中，0 为 False，其他一切为 True。

在您的代码中，您必须这样做

```
if(compare_dates(d1, d2) == 1) 
    printf("Date1 comes after than Date2");
else if(!compare_dates(d1, d2))
    printf("Date1 and Date2 are equal");
else if(compare_dates(d1, d2) == -1)
    printf("Date1 comes before than Date2"); 
```

或者，更高效

```
int value = compare_dates(d1, d2)
if(value == 1) 
    printf("Date1 comes after than Date2");
else if(!value)
    printf("Date1 and Date2 are equal");
else if(value == -1)
    printf("Date1 comes before than Date2"); 
```

对于比较函数，0 通常表示值相等，-1 表示第一个参数小于第二个，1 表示第一个参数大于第二个

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-17T14:51:06.650

在 C 中，一切`!= 0`都是真的。

```
if(-1) // = true
if(0)  // = false
if(1)  // = true
if(1234567) // = true 
```

要根据返回值打印消息，请使用`switch`：

```
switch(compare_dates(d1, d2)){
    case -1: {
        // do whatever should done when compare_dates returns -1
        break; //don't forget the break
    }
    case 0: {
        // do whatever should done when it returns 0
        break;
    }
    case 1: {
        // ...
        break;
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-17T14:52:33.357

实际上，0 表示 d1 和 d2 相等。请允许我解释一下：

-1 表示 d1 小于 d2。因此，“小于”运算符`<`对应于 -1。0 表示 d1 等于 d2。因此与“等于”运算符`==`相对应。1 表示 d1 大于 d2。因此“大于”运算符`>`对应于 1。

这只是约定，可能受到`strcmp`使用相同约定的 C 标准函数的影响。

# c# - 单选按钮列表事件不会一直触发

> ID：15462042
> 
> 赞同：2
> 
> 时间：2013-03-17T14:45:58.570
> 
> 标签：c#, asp.net, radiobuttonlist

我有一个非常奇怪的单选按钮列表问题，它可以正常工作，但点击几下后它似乎没有触发 SelectedIndexChanged 事件，并且在回发后保持相同的值。

```
<asp:RadioButtonList runat="server" ID="rblShowRecords" AutoPostBack="true" 
OnSelectedIndexChanged="rblShowRecords_SelectedIndexChanged" RepeatDirection="Horizontal">
    <asp:ListItem >Show Active/Completed</asp:ListItem>
    <asp:ListItem >Show Active</asp:ListItem>
    <asp:ListItem >Show Completed</asp:ListItem>
</asp:RadioButtonList> 
```

这是事件方法：

```
protected void rblShowRecords_SelectedIndexChanged(object sender, EventArgs e)
    {

        switch (rblShowRecords.SelectedItem.Text)
        {
            case "Show Active/Completed":
                CEDatabaseSource.SelectCommand = ConfigurationManager.AppSettings["SelectAllRecords"].ToString();//"SELECT * FROM [CERecord] ORDER BY [Priority]";
                break;
            case "Show Active":
                CEDatabaseSource.SelectCommand = ConfigurationManager.AppSettings["SelectActiveRecords"].ToString();
                break;
            case "Show Completed":
                CEDatabaseSource.SelectCommand = ConfigurationManager.AppSettings["SelectCompletedRecords"].ToString();
                break;
            default:
                break;
        }
        CEDatabaseSource.DataBind(); //Commit the changes to the data source.
        gvRecordList.DataBind(); //Update the GridView
        rblShowRecords.SelectedItem.Value = CEDatabaseSource.SelectCommand; //Update the value of the selected radio button with the selected SELECT command.
    } 
```

我不明白为什么它只能精确工作 3 次，但之后，它就再也没有进入上述方法。

尝试相同的事情但使用下拉列表，也可以工作 3 次，然后出现此错误：

```
Invalid postback or callback argument.  Event validation is enabled using <pages enableEventValidation="true"/> in configuration or <%@ Page EnableEventValidation="true" %> in a page.  For security purposes, this feature verifies that arguments to postback or callback events originate from the server control that originally rendered them.  If the data is valid and expected, use the ClientScriptManager.RegisterForEventValidation method in order to register the postback or callback data for validation 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T15:55:19.973

根据您的上一条评论，删除将 SQL 查询设置为 SelectedItem.Value 的代码，并在需要时使用 SelectedItem.Text 属性获取命令，选择查询可能包含会导致无效回发错误的字符，您可以`>`更改`<`您的代码如下：

```
string GetCommand()
{
    switch (rblShowRecords.SelectedItem.Text)
    {
        case "Show Active/Completed":
            return ConfigurationManager.AppSettings["SelectAllRecords"].ToString();
        case "Show Active":
            return  ConfigurationManager.AppSettings["SelectActiveRecords"].ToString();
        case "Show Completed":
            return  ConfigurationManager.AppSettings["SelectCompletedRecords"].ToString();
        default:
            return "";
    }
} 
```

在 Page_Load

```
if (IsPostBack) 
{ 
    CEDatabaseSource.SelectCommand = GetCommand();
    CEDatabaseSource.DataBind(); 
} 
```

现在您的 SelectedIndexChanged 代码将是

```
protected void rblShowRecords_SelectedIndexChanged(object sender, EventArgs e)
{
    CEDatabaseSource.SelectCommand = GetCommand();
    CEDatabaseSource.DataBind(); //Commit the changes to the data source.
    gvRecordList.DataBind(); //Update the GridView
} 
```

# html - 页眉和页脚冲突

> ID：15462044
> 
> 赞同：1
> 
> 时间：2013-03-17T14:45:59.193
> 
> 标签：html, css, header, height, footer

我试图在页面底部添加一个粘性页脚，并在页面顶部添加一个实心页眉。但是我在使用 body 和 html 类时遇到了一些困难。我的页眉距页面顶部的高度为 100px，我的 html 和 body 类的高度为 100%，而我的页脚为 150px。我已经在我的页面中正确地编写了页脚，所以它会粘在底部，但是 html 或正文的 100% 高度将它放置在我的页面下方，这样即使没有，你也必须滚动才能看到页脚文字把它推到那么远！这是我的 CSS 代码：

```
html {
height:100%;
background: url(pics/bg.png) no-repeat top center fixed;
margin:0;
padding:0;
}

body {
height:100%;
margin:0;
padding:0;
}

.wrapper {
min-height:100%;
}

.header {
position:fixed;
background:#FFF url(pics/header.png) no-repeat top center fixed;
top:0;
height:100px;
width:1920px;
z-index:1000;
}

.main {
position:absolute;
top:100px;
width:990px;
left:0;
right:0;
overflow:auto;
margin:0 auto;
padding-bottom:150px; /* must be same height as the footer */
padding-top:10px;
padding-left:5px;
padding-right:5px;
}

.footer {
position:relative;
background-image:url(pics/bg_footer.png);
margin-top:-150px; /* negative value of footer height */
height:150px;
width:990px;
margin:0 auto;
clear:both;
} 
```

这是我的 HTML 代码：

```
<body>
<div class="wrapper">
    <div class="header">
</div>
<div class="main">
    <p>I can write here</p>
</div>
</div>
<div class="footer">
    <p class="alignleft">© Tim</p>
    <p class="alignright">17 maart 2013</p>
</div>
</body> 
```

我几乎可以肯定它与 100% 的 html 高度有关。在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T15:16:38.370

你可以试试这个：

```
<body>

    <div class="header"></div>
    <div class="main">
      <p>I can write here</p>
    </div>

    <div class="footer">
      <p class="alignleft">© Tim</p>
      <p class="alignright">17 maart 2013</p>
    </div>

</body> 
```

这符合您的需求吗？

CSS

```
html {
  height:100%;
  background: url(pics/bg.png) no-repeat top center fixed;
  margin:0;
  padding:0;
}

body {
  padding:0;
  margin:0;
}

.header {
  background:#FFF url(pics/header.png) no-repeat top center fixed;
  height:100px;
  width:100%;
}

.main {
  position:absolute;
  top:100px;
  bottom:150px;
  overflow:auto;
  margin:0 auto;
  width:100%;
  padding-bottom:10px;
  padding-top:10px;
  padding-left:5px;
  padding-right:5px;
}

.footer {
    position: absolute;
    width: 100%;
    bottom:0;
    background-image:url(pics/bg_footer.png);
    height:150px;
    width:100%;
    margin:0 auto;
    clear:both;
} 
```

检查 JSFiddle 示例：

> [http://jsfiddle.net/2SL7c/](http://jsfiddle.net/2SL7c/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T16:09:36.110

让页脚也固定怎么样？**我做了这个[jsFiddle](http://jsfiddle.net/MMzua/1/)**，看看。我将您的 div 更改为 ID 而不是类（因为它们是唯一的并且应该只出现一次）。

```
#footer {
position:fixed;
bottom: 0;
background-image:url(pics/bg_footer.png);
background-color:#FF0;
height:150px;
width: 100%;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T17:25:40.910

我做了一个javascript函数来解决这个问题

```
<script type="text/javascript">
        $(window).bind("load", function () {
            var distance = 20;
            var header = $("#header");
            var posContent = header.position().top;
            posContent = posContent + header.height() + distance;

            var content = $("#content");
            content.css({ 'top': posContent + 'px' });
            var posFooter = content.position().top;
            posFooter = posFooter + content.height() + 200;

            var footer = $("#footer");
            footer.css({ 'top': posFooter + 'px' });
        })
    </script> 
```

我的 CSS 看起来不错

```
#footer{
            background-color: #E6E6E6;
            background-repeat: repeat;
            bottom: 0;
            height: 100%;
            pointer-events: none;
            position: absolute;
            width: 100%;
            height:50px;
            z-index: -1;
        }

        #header{
            background-color: #E6E6E6;
            background-repeat: repeat;
            height: 100%;
            pointer-events: none;
            position: absolute;
            top: 5px;
            width: 100%;
            height:50px;
            z-index: -1; 
        }

        #content{
            pointer-events: none;
            position: absolute;
            width: 100%;
            z-index: -1; 

        } 
```

最后

html代码

```
<div id="header">your content</div>
<div id="content">your content</div>
<div id="footer">your content</div> 
```

无论内容多么出色，都能完美运行

;D

# php - 遵循教程后mysql分页错误

> ID：15462045
> 
> 赞同：0
> 
> 时间：2013-03-17T14:46:01.717
> 
> 标签：php, mysql, database, pagination

我想添加一个简单的分页，但从 msql 更改为 mysqli 后，我似乎无法正确处理。我还不能理解它，我只是从它开始。我按照教程进行操作，但仍然遇到错误。

抱歉我缺乏知识，但我错过了什么？

```
<?php 
$db = new mysqli("host", "username", "password", "mydatabase");

if($db->connect_errno > 0){
die('Unable to connect to database [' . $db->connect_error . ']');

}
$rec_limit = 10;

$sql = "SELECT COUNT(photo)FROM employees";
$retval = mysql_query( $sql, $db );
if(! $retval )
{
die('Could not get data: ' . mysql_error());
}
$row = mysql_fetch_array($retval, MYSQL_NUM );
$rec_count = $row[0];

if( isset($_GET{'page'} ) )
{
$page = $_GET{'page'} + 1;
$offset = $rec_limit * $page ;
}
else
{
$page = 0;
$offset = 0;
}
$left_rec = $rec_count - ($page * $rec_limit);

$sql = "SELECT photo, link".
"FROM employees ".
"LIMIT $offset, $rec_limit";

$retval = mysql_query( $sql, $db );
if(! $retval )
{
die('Could not get data: ' . mysql_error());
}

while($row = mysql_fetch_array($retval, MYSQL_ASSOC))

echo "<br /><br />";

echo '','<img src="/upload/' . $row->photo . '" border=0>';

echo '', $row->link;

if( $page > 0 )
{
$last = $page - 2;
echo "<a href=\"$_PHP_SELF?page=$last\">Last 10 Records</a> |";
echo "<a href=\"$_PHP_SELF?page=$page\">Next 10 Records</a>";
}
else if( $page == 0 )
{
echo "<a href=\"$_PHP_SELF?page=$page\">Next 10 Records</a>";
}
else if( $left_rec < $rec_limit )
{
$last = $page - 2;
echo "<a href=\"$_PHP_SELF?page=$last\">Last 10 Records</a>";
}
mysql_close($db);
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T14:49:41.993

你正在混合`mysqli_*`和`mysql_*`功能。

请选择您要使用的样式：程序样式 ( `mysqli_connect`, `mysqli_query`) 或对象样式 ( `new MySQLi`, 等)

您不能混合使用这 2 个，也不能混合使用 2 个不同的库（mysql 和 mysqli）

[在 PHP.net 上](http://www.php.net/manual/en/mysqli.quickstart.dual-interface.php)阅读有关不同样式的更多信息（示例还展示了如何使用 mysqli）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T14:57:59.880

```
$sql = "SELECT COUNT(photo)FROM employees";
                           ^--- missing a space here 
```

和

```
$sql = "SELECT photo, link".
                          ^--- missing space here
"FROM employees ". 
```

如果此代码来自教程，我建议您放弃它。您的代码绝对没有错误处理，只是假设一切都成功了。正确编写的教程将具有适当的错误检测/处理。并且还建议不要使用 mysql_*() 函数，因为它们已被弃用/过时。

# javascript - 潮汐SDK、jquery、XMLHttpRequest 和绝对 URL 的

> ID：15462049
> 
> 赞同：0
> 
> 时间：2013-03-17T14:46:41.183
> 
> 标签：javascript, jquery, titanium, appcelerator, tidesdk

我正在使用 TideSDK 从网站获取内容。我最终需要从这个网站的数据库中预先填写表格数据。

我能够获取页面并将其存储到变量中。我可以用 alert() 解析我们的相对 URL。但是我无法用更正的正文替换正文 `$('html').replaceWith(html);` Jquery 应该在内存中，所以我不必担心替换 html 对吗？

我无法弄清楚为什么这不起作用。如果图像或 URL 是绝对的，它可以正常工作，但如果它是相对的，它就不起作用。我无权使用绝对网址修复网站。

我的演示代码： http: [//jsfiddle.net/Cs5MC/13/](http://jsfiddle.net/Cs5MC/13/) 在演示中从 html 更改为 body

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T03:19:00.710

首先，如果这是 Titanium 的实现，您将需要使用[本文档中讨论的 Ti Network api。](http://tidesdk.multipart.net/docs/user-dev/generated/#!/api/Ti.Network.HTTPClient)

使用 jQuery 或任何常规 xhr 请求，拉取 JSON 数据并使用它与回调非常相似。

我希望它有所帮助。

顺便说一句，使用 jQuery——它在很大程度上依赖于 dom 来完成它的工作——你总是必须小心预期的 dom 结构是否实际存在——它可能不会在没有 web 视图的钛平台上出现，尽管我不熟悉 TideSDK，可能会在这方面得到纠正。

# c++ - 写入图像文件时 C++ fwrite 访问冲突

> ID：15462052
> 
> 赞同：0
> 
> 时间：2013-03-17T14:46:55.527
> 
> 标签：c++, opengl

我需要在每次调用时将 RGB 帧附加到文件中。

这是我所做的：

```
 size_t lenght=_viewWidth * _viewHeight * 3;
    BYTE *bytes=(BYTE*)malloc(lenght);
    ///////////////  read pixels from  OpenGL tex  /////////////////////
    glBindTexture(GL_TEXTURE_2D,tex);
    glGetTexImage(GL_TEXTURE_2D,0,GL_BGR,GL_UNSIGNED_BYTE,bytes);
    glBindTexture(GL_TEXTURE_2D,0);

        ///write it to file :
         hOutFile = fopen( outFileName.c_str(), cfg.appendMode ? "ab" : "wb" );
    assert(hOutFile!=0);

    fwrite(bytes, 1 ,w * h, hOutFile); // Write 

    fclose(hOutFile); 
```

不知何故，当 fwrite 被调用时，我遇到了访问冲突。可能我误解了如何使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T14:59:28.443

你如何确定`_viewWidth`和`_viewHeight`？读回纹理时，您应该使用 glGetTexLevelparameteri 检索它们以[*从*](http://www.opengl.org/sdk/docs/man/xhtml/glGetTexLevelParameter.xml)*GL_TEXTURE_2D*目标检索*GL_TEXTURE_WIDTH*和*GL_TEXTURE_HEIGHT*参数。

 *还有线

```
fwrite(bytes, 1 ,w * h, hOutFile); 
```

是错的。什么是`w`，什么是`h`？它们永远不会在代码中初始化，也不会连接到那里的其他分配。此外，如果这些是图像的宽度和高度，它仍然缺少像素的元素数量。最有可能 3。

有类似的东西会更有意义

```
int elements = ...; // probably 3
int w = ...;
int h = ...;
size_t bytes_length = w*elements * h;
bytes = malloc(bytes_length)

... 

fwrite(bytes, w*elements, h, hOutFile); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T14:56:02.467

是由 引起的`bytes`吗？也许`w * h`不是你想的那样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T01:19:15.070

宽度是奇数还是不能被 4 整除？

默认情况下，OpenGL 假定一行像素数据与四字节边界对齐。对于 RGB/BGR，情况并非总是如此，如果是这样，您将在 malloc'ed 块之外进行写入并破坏某些内容。试着放

```
glPixelStorei(GL_PACK_ALIGNMENT, 1) 
```

在读取像素并查看问题是否消失之前。*

# google-checkout - Google Checkout 捐款不发货

> ID：15462056
> 
> 赞同：1
> 
> 时间：2013-03-17T14:47:04.757
> 
> 标签：google-checkout, donations

我正在使用 Google Checkout 实施 Donate Now 系统。一个真正令人沮丧的部分是如何不要求用户为他们的捐赠输入送货地址（因为它是纯粹的捐赠，所以不需要送货地址）。我找到了 Digital Delivery 的文档和向产品添加类的能力，但我只是使用由 Google 生成的“立即捐赠”表单，不知道在哪里添加这个类，所以不需要送货地址.

以下是我正在使用的表格：

```
<form action="https://sandbox.google.com/checkout/api/checkout/v2/checkoutForm/Merchant/MY_NUMBER" id="BB_BuyButtonForm" method="post" name="BB_BuyButtonForm" onSubmit="return adjustDescription()" target="_top">
    <input name="item_name_1" type="hidden" value="Donation"/>
    <input name="item_description_1" type="hidden" value="Donation Description"/>
    <input name="item_quantity_1" type="hidden" value="1"/>
    <input name="item_currency_1" type="hidden" value="USD"/>
    <input name="item_is_modifiable_1" type="hidden" value="true"/>
    <input name="item_min_price_1" type="hidden" value="0.01"/>
    <input name="item_max_price_1" type="hidden" value="25000.0"/>
    <input name="_charset_" type="hidden" value="utf-8"/>
    <input id="item_price_1" class="center" name="item_price_1" type="text" />
    <input disabled style="opacity:0.6;" name="donate_submit" alt="Donate" src="https://sandbox.google.com/checkout/buttons/donateNow.gif?merchant_id=MY_NUMBER&amp;w=115&amp;h=50&amp;style=white&amp;variant=text&amp;loc=en_US" type="image" /> 
```

所以我不确定是否有另一种不需要送货地址的方法，但如果有人能告诉我在哪里放置“产品数字”类来实现这一点，那会很有帮助。

# macos - 如何在可可中获取用户的日志文件夹（NSSearchPathForDirectoriesInDomains 可能）

> ID：15462058
> 
> 赞同：5
> 
> 时间：2013-03-17T14:47:06.037
> 
> 标签：macos, cocoa, macos-carbon

我正在将 Carbon 应用程序移植到 Cocoa 并正在寻找 Cocoa 中的等价物`kLogsFolderType`，它目前将返回`/Users/me/Library/Logs`

我已经看到`NSSearchPathForDirectoriesInDomains`了相关类型，但找不到等效的值。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-17T15:04:18.337

在[Apple 的 docs](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Miscellaneous/Foundation_Constants/Reference/reference.html%23//apple_ref/doc/uid/TP40003793-CH3g-DontLinkElementID_22)中没有`NSSearchPathDirectory`选项，因此您必须自己使用和构建其余部分：`~/Library/Logs``NSLibraryDirectory`

```
NSArray *URLs = [[NSFileManager defaultManager] URLsForDirectory:NSLibraryDirectory 
                                                       inDomains:NSUserDomainMask];
NSURL *logsURL = [[URLs lastObject] URLByAppendingPathComponent:@"Logs"];
NSString *logsPath = [libraryURL path]; 
```

# c++ - 文件处理在while循环中不起作用

> ID：15462059
> 
> 赞同：0
> 
> 时间：2013-03-17T14:47:08.177
> 
> 标签：c++, file-handling

***代码：***

```
#include<iostream.h>
#include<fstream.h>
#include<string.h>
 int n = 0, flag = 0,i;
struct bac
{
    char name[10];
    char amt[5];
} s;

void main()
{
ofstream f("C:\\TC\\1.dat");
     for(i=0;i<10;i++)
     {

         cout << "\nenter the details ";
         cin >> s.name >> s.amt;

         f.write((char *)&s, sizeof(bac));
    }
    } 
```

有时代码工作正常，但有时当我查看输出文件时，它是空的，问题已经出现很多次了，我想知道是否有关于文件处理循环的预防措施。

例如。在其他节目中

```
.....
while(ch!=4)
         {
        cout << "\nBANK MANAGEMENT SYSTEM \n";
        cout << "enter choice ";
        cout << "\n1.add\n2.search\n3.delete and overwrite ";
        cin >> ch;
        if (ch == 1)
        {
                cout << "\nenter the details ";
    cin >> s.name >> s.amt;
    f.write((char *)&s, sizeof(bac));
       }
  ..... 
```

文件为空

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T15:00:31.637

对我来说，代码似乎不太像 C++……要回答最后一个问题，没有任何关于循环中的 fstreams 的问题，不。

我建议首先尝试处理`f.write`成员`name`和`amt`他们自己——编译器可能会在 name 和 amt 之间添加填充，从而产生不需要的垃圾输出。

你确定你一直有文件路径的写权限吗？尝试打开一个本地文件，因为路径只是“1.dat”。

也尝试将文件打开为`f("/* file name */", ofstream::out | ofstream::app)`. “out”将其设置为输出流，“app”将其添加到文件末尾。www.cplusplus.com/ofstream 详细介绍了更多标志。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T15:02:13.857

我猜你可能使用了比 gcc 4.5.3 更老的编译器。我试过你的代码，没有问题。

```
#include <iostream>  //use header file without using deprecated iostream.h
#include <fstream>   //same reason as above
#include <string>

using namespace std;

int n = 0, flag = 0,i;
struct bac
{
   char name[10];
   char amt[5];
} s;

int main()  //usually main returns int. void was kind of old now
{
    ofstream f("test.txt");
    for(i=0;i<10;i++)
    {

        cout << "\nenter the details ";
        cin >> s.name >> s.amt;

        f.write((char *)&s, sizeof(bac));
     }
    f.flush();
    f.close();

    return 0;
 } 
```

我在 gcc 4.5.3 中编译了代码并运行了它。该文件包含我输入的所有内容。但是，当您使用文件 i/o 流写入文件时，最好使用 << 运算符。

您可以在此链接顶部找到更多信息：http: [//members.gamedev.net/sicrane/articles/iostream.html](http://members.gamedev.net/sicrane/articles/iostream.html)

还有一点，如果你已经完成了对文件的写入，记得刷新并关闭文件句柄，否则，有时会导致一些烦人的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T14:57:39.613

由于您使用的是c++，我建议您使用正式的方式来使用ofstream，在您的代码中，它应该是f << s.name << s.amt。

请记住，您使用的是 c++，所以请继续使用 i/o 流。

# python - 令人困惑的 Python 字符串索引超出范围错误

> ID：15462060
> 
> 赞同：2
> 
> 时间：2013-03-17T14:47:10.393
> 
> 标签：python, python-3.x

我查看了有关此主题的其他问题，但找不到真正解决我想要弄清楚的问题的东西。

问题是这样的：我正在尝试创建一个程序，在两条互补的 DNA 链中寻找回文，返回每个已识别回文的位置和长度。

例如，如果给定序列 TTGATATCTT，程序应该找到补码 (AACTATAGAA)，然后将第二个索引标识为 6 字符回文的开头。

我是编程新手，所以它可能看起来很傻，但我想出的代码看起来像这样：

```
'''This first part imports the sequence (usually consisting of multiple lines of text)
from a file. I have a feeling there's an easier way of doing this, but I just don't
know what that would be.'''

length = 4
li = []
for line in open("C:/Python33/Stuff/Rosalind/rosalind_revp.txt"):
    if line[0] != ">":
        li.append(line)
seq = (''.join(li))

'''The complement() function takes the starting sequence and creates its complement'''

def complement(seq):
    li = []
    t = int(len(seq))
    for i in range(0, t):
        n = (seq[i])
        if n == "A":
            li.append(n.replace("A", "T"))        
        if n == "T":
            li.append(n.replace("T", "A"))
        if n == "C":
            li.append(n.replace("C", "G"))
        if n == "G":
            li.append(n.replace("G", "C"))
    answer = (''.join(li))
    return(answer)

'''the ip() function goes letter by letter, testing to see if it matches with the letter
x spaces in front of it on the complementary strand(x being specified by length). If the
letter doesn't match, it continues to the next one. After checking all possibilities for
one length, the function runs again with the argument length+1.'''

def ip(length, seq):
    n = 0
    comp = complement(seq)
    while length + n <= (len(seq)):
        for i in range(0, length-1):
            if seq[n + i] != comp[n + length - 1 - i]:
                n += 1
                break
            if (n + i) > (n + length - 1 - i):
                print(n + 1, length)
                n += 1
    if length <= 12:
        ip(length + 1, seq)

ip(length, seq) 
```

从短序列（例如，TCAATGCATGCGGGTCTATATGCAT）开始，事情运行得非常完美，但是对于更长的序列，我总是会收到以下错误消息：

```
Traceback (most recent call last):
  File "C:/Python33/Stuff/Ongoing/palindrome.py", line 48, in <module>
    ip(length, seq)
  File "C:/Python33/Stuff/Ongoing/palindrome.py", line 39, in ip
    if seq[n + i] != comp[n + length - 1 - i]:
IndexError: string index out of range 
```

在程序完成检查可能的 4 字符回文之后，在启动长度 + 1 的函数之前给出该消息。

我明白消息在说什么，但我不明白为什么我会收到它。为什么这适用于某些字符串而不适用于其他字符串？在过去的一个小时里，我一直在检查序列是否有奇数个字符或偶数个字符，是 4 的倍数，是否是 4 的倍数，等等。我难住了。我错过了什么？

任何帮助，将不胜感激。

PS 问题来自 Rosalind 网站（Rosalind.info），它使用从 1 开始的编号。因此最后的 print(n+1, length) 。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T16:28:00.357

`IndexError`可以通过更改最后一行来避免：

```
if line[0] != ">":
    li.append(line) 
```

至

```
if line[0] != ">":
    li.append(line.rstrip()) 
```

靠近代码的开头。这可以防止从文件中读取的任何尾随空格（尤其是换行符）成为`seq`字符串的一部分。将它们包含在其中是一个问题，因为`complement()`函数会忽略并因此删除它们，因此`answer`它返回的字符串不一定与输入参数的长度相同。这导致in函数`comp`中的长度不同。`seq``ip()`

您没有问，但这是我如何缩短您的代码并使其更加“Pythonic”：

```
COMPLEMENT = str.maketrans("ATCG", "TAGC")
LENGTH = 4

with open("palindrome.txt") as input:
    seq = ''.join(line.rstrip() for line in input if line[0] != ">")

def complement(seq): return seq.translate(COMPLEMENT)

def ip(length, seq):
    n = 0
    comp = complement(seq)
    while length + n <= len(seq):
        for i in range(0, length-1):
            if seq[n + i] != comp[n + length - 1 - i]:
                n += 1
                break
            if n + i > n + length - 1 - i:
                print(n + 1, length)
                n += 1
    if length <= 12:
        ip(length + 1, seq)

print(repr(seq))
print(repr(complement(seq)))
ip(LENGTH, seq) 
```

顺便说一句，最后添加的这两个`print()`函数调用让我知道出了什么问题。

# java - 此代码中的越界异常

> ID：15462061
> 
> 赞同：0
> 
> 时间：2013-03-17T14:47:15.177
> 
> 标签：java

如果单词“bread”出现在单词的任一侧，我会尝试返回字符串，例如：getSandwich("breadjambread") → "jam" 但我编写的代码不断给我超出范围的异常。我怎样才能解决这个问题？这是我的代码：

```
public String getSandwich(String str) {
  String tmp = "";
  String newString = "";
  for (int i = 0; i < str.length()-1; i++) {
    if (str.length() >= 11 && str.substring(i, i+6).equals("bread")) {
      tmp = str.substring(i+6);
    }
    if (tmp.length() > 0 && tmp.substring(i+1, i+7).equals("bread")) {
      newString = tmp.substring(0, i);
    }
  }
  return newString;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T14:49:11.280

在您的代码`i`中从`0`to 开始`length-1`，然后尝试采取`substring(i, i+6)`. When `i`is above `length-6`，这将导致越界异常。将循环条件更改为`str.length()-6`应该可以解决此问题。

*在循环内*检查`length`to 在上面看起来不正确。`11`

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T15:49:46.253

```
public static String getSandwich(String str) {
  String newString = "";
  int i1 = str.indexOf("bread");
  int i2 = str.lastIndexOf("bread");
  if(i1 != i2){
    newString = str.substring(i1 + 5, i2);
  }
  return newString;
} 
```*

# asp.net-mvc - mvc 4 MultiSelect 列表和 EF 多对多

> ID：15462062
> 
> 赞同：5
> 
> 时间：2013-03-17T14:47:17.227
> 
> 标签：asp.net-mvc, entity-framework

我有这些实体（它们之间有多对多的联系）：

```
public class Post
{     
    public Guid PostId { get; set; }     
    public string Name { get; set; }       
    public virtual ICollection<Tag> Tags { get; set; }
}

  public class Tag
{
    public int TagId { get; set; }
    public string Name { get; set; }
    public virtual ICollection<Post> Posts { get; set; }
} 
```

我希望用户在创建 Post 时从 MultiSelectList 和 MultiSelectList 中选择数据以将该数据传递给 Post.Tags。我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-17T15:25:30.870

我有类似的东西，一个产品属于许多类别和一个类别，有很多产品。

在我创建新产品的管理视图中，我可以允许用户选择该产品应在其下列出的类别的多个“标签”。

由于类别太多，我倾向于避免多选列表，并使用一种带有 ajax 的自动建议来检索类别并使用 jQuery 插件（例如 TagIt）填充它们。

但为简单起见，您可以在控制器中使用它

```
public class HomeController : Controller
{
    public ActionResult Create()
    {
        var tags = new List<Tag>()
            {
                new Tag() { TagId = 1, Name = "Planes", Posts = new Collection<Post>() },
                new Tag() { TagId = 2, Name = "Cars", Posts = new Collection<Post>() },
                new Tag() { TagId = 2, Name = "Boats", Posts = new Collection<Post>() }
            };

        ViewBag.MultiSelectTags = new MultiSelectList(tags, "TagId", "Name");

        return View();
    }

    [HttpPost]
    public ActionResult Create(Post post, int[] tags) // Tags is not case-sensative from model binder when html element name="tags" <-- array passed back to controller
    {

        // Find Tag from Database
        // Attach tag entity to Post

        // foreach(var tagId in tags)
        //    var tag = context.Tags.find(tagId)
        //    post.Tags.Add(tag);

        // context.SaveChanges();

        return RedirectToAction("Create");
    }

} 
```

在你的 View/Create.cshtml 里面

```
@model MvcApplication1.Models.Post

<h2>Create</h2>

@using (Html.BeginForm("Create", "Home", FormMethod.Post))
{
    <label>Name</label>
    @Html.TextBoxFor(model => model.Name)

    <label>Tags For Post</label>
    @Html.ListBox("Tags", (MultiSelectList)ViewBag.MultiSelectTags)

    <input type="submit" value="Submit Post"/>
} 
```

所有选定的标签：

![](../Images/f64cbd82101a6065f14d92826b2f1e6d.png)

然后，当在回发到控制器时选择多个时，您可以在调试中看到模型绑定器知道从 html 元素名称“标签”发送回数组

![](../Images/06158784df0824d70e08ef15ccb26922.png)

# playframework - 玩2.1，BCrypt：在yml-parser生成User对象并插入密码值之前hash yml密码属性

> ID：15462063
> 
> 赞同：1
> 
> 时间：2013-03-17T14:47:45.567
> 
> 标签：playframework, yaml, bcrypt

我正在尝试使用 play 2.1 框架实现登录功能。起初我只是使用明文存储密码（所有测试都成功），所以现在我使用 JBcrypt 库编写了一个增强功能。我的代码应该是正确的（也根据[https://github.com/yesnault/Play20StartApp/tree/master/app](https://github.com/yesnault/Play20StartApp/tree/master/app)中使用的原则）。但是，现在，当我尝试运行相同的登录测试用例时，它们会失败。BCrypt 给出“无效的盐版本错误”。我一直在寻找原因，但我想我找到了问题所在。为了在执行测试之前获得一些初始测试数据，我加载了一个 test-data.yml 文件，其中一些用户定义为：

```
- !!models.Person
    ID: 123
    lastName:  Tom 
    firstName:  Tom
    password:   secret 
```

在我的 Person 类构造函数中，使用 Bcrypt hashpw() 方法对密码进行哈希处理，然后将哈希密码存储在用户对象中。然而现在的问题是（至少我是这么认为的）yaml 解析器（？）不使用我的构造函数，而只是创建一个空的 Person 对象，并手动填充它的值。所以密码没有经过哈希处理，并且具有“秘密”值。因此，当我尝试测试登录功能并使用 BCrypt.checkpw() 时，它会将“secret”与“secret”进行比较，而不是将“secret”与“-bcryptsalt+hashedpassword”进行比较，这就是它给出错误“salt version invalid”的原因'，因为 'secret' 没有所需的盐形式等。

所以我的问题是：是否可以在 yml 文件中调用方法？例如：

```
- !!models.Person
    bebrasID:   123
    lastName:   Tom
    firstName:  Tom
    password:   BCrypt.hashpw('secret', BCrypt.gensalt()) 
```

或者有什么方法可以强制 yml 使用我的构造函数而不是手动填充值？所以实际上，我只需要一种方法使用我的数据 yml 文件在 yaml 将其存储在 Person 对象中之前对纯文本密码使用 BCrypt？这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T15:49:30.907

我认为在 yml 中调用函数是不可能的，因为它只是一个“人类友好的数据序列化标准”，正如它在 www.yaml.org 中所说的那样，你不能序列化函数。我建议您将散列密码放入 yml.xml 文件中。只需在 UnitTest 中调用 BCrypt.hashpw('secret', BCrypt.gensalt()) 并记录结果，然后确保它始终具有相同的结果并在 yml 中使用该文本。

# c++ - 创建窗口中的 hInstance

> ID：15462064
> 
> 赞同：3
> 
> 时间：2013-03-17T14:47:46.693
> 
> 标签：c++, winapi

我`CreateWindow`用来创建主窗口。`hInstance`in`WNDCLASSEX`指定注册类的实例。所以我需要`hInstance`在`CreateWindow`函数中找到它。

我`CreateWindow`用来创建一个按钮。现在没有用户定义`WNDCLASSEX`。BUTTON`WNDCLASSEX`是全球性的。但是我仍然需要将一个传递`hInstance`给函数？为什么以及什么是正确的传递值？

在 Microsoft 的示例中，它是`(HINSTANCE)GetWindowLong(hMainWnd, GWL_HINSTANCE)`，但我不知道它是什么。

如果我有什么问题，也请告诉我。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2019-03-19T21:20:51.640

`CreateWindow`我在 2001年的 MSDN 中发现`CreateWindowEx`

`hInstance`

**Windows 95/98/Me：** [输入]要与窗口关联的模块实例的句柄。

**Windows NT/2000/XP：**忽略此值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T16:16:45.393

> 但是我仍然需要将 hInstance 传递给函数吗？为什么以及什么是正确的传递值？

至于为什么，创建一个全新的函数会有点毫无意义（至少从winapi的角度来看），它会接受除此之外的所有内容，并且在所有其他参数仍然有用时只使用父级或其他东西。

我个人不确定传入的正确值是什么，但我使用`GetModuleHandle(nullptr)`，它应该相当于传入的实例`WinMain`。如果您使用它来创建父窗口，它也将与 Microsoft 的示例使用的示例（获取用于创建父窗口的实例）相同。如果使用不同的应用程序的窗口作为父窗口，就会出现差异。我看到使用的另一个主要选项是`nullptr`/ `NULL`，每次我使用它时，它的工作方式都与上述选项相同。

如果今天 using`NULL`和 application's之间存在细微差别`HINSTANCE`，我想知道，但其中任何一个都可以很好地用于在 Windows 上创建子控件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-11-20T10:56:24.947

`lpClassName`创建窗口时，您在 的第一个参数中使用字符串 ( ) 指定创建实例的类`CreateWindow`。

`hInstance`用于在引用的多个 DLL 包含同名类的情况下进行标识。

有关详细信息，请参阅[https://devblogs.microsoft.com/oldnewthing/20050418-59/?p=35873](https://devblogs.microsoft.com/oldnewthing/20050418-59/?p=35873)

# android - 多个 FAST 屏幕旋转时位图/LayerDrawable 泄漏

> ID：15462066
> 
> 赞同：2
> 
> 时间：2013-03-17T14:47:59.203
> 
> 标签：android, bitmap, screen, orientation, memory-leaks

我在互联网上阅读了很多关于屏幕旋转位图和内存泄漏的帖子和评论。

实际上，我遇到的问题非常特殊......

我使用 Eclipse DDMS，我正在查看 1 字节数组占用的堆内存，这与我放置在四个 ImageView 中的位图有关，每个位图都位于 ViewFlipper 的页面中。这些图像是从内部存储器加载的，大小为 216-220KB，我使用了一个可绘制的图层，以便在它们之上绘制另一个透明图像。

注意位图占用的堆内存，如果我改变设备的方向，内存会增加一些 MB。导致 2-3 GC，在几分钟内内存量减少到初始值。慢慢重复这个过程（改变方向+ 2-3 强制垃圾收集），内存量增加，但随后又回到相同的值。这让我觉得我在我的应用程序中使用位图管理做得很好。

但是如果我开始反复快速旋转设备，我会看到内存量不断增加....与快速旋转期间的快速增长相比，后续 GC 只能减少少量内存的堆占用.

Android不能这么快收集垃圾吗？为什么如果我缓慢旋转，我能够保持内存使用稳定，而不是如果我反复快速旋转而不强制 GC 一段时间？

安卓 4.1.2 / 三星 Galaxy S3。

每当从内部存储读取 png 或由 AsyncTask 从 Internet 下载时，都会调用以下代码。禁用 AsyncTasks（因此通过后续旋转排除挂起的任务）不会改变场景，在启动时从内部存储加载两个“层”就足以在旋转设备时快速填充堆。

```
public void setBitmap(Bitmap bitmap) 
{
    try{
        Drawable layers[] = new Drawable[2];
        Bitmap fvgBackgroundBmp = BitmapFactory.decodeResource(getResources(), R.drawable.fvg_background2);
        layers[0] = new BitmapDrawable(getResources(), fvgBackgroundBmp);
        layers[1] = new BitmapDrawable(getResources(), bitmap);
        LayerDrawable layerDrawable = new LayerDrawable(layers);
        setImageDrawable(layerDrawable);
        mLayerDrawableAvailable = true;
    }
    catch(Exception outOfMemory)
    {
        Log.e("setBitmap got exception", outOfMemory.getLocalizedMessage());
    }
} 
```

从's`unbindDrawables()`调用的方法没有帮助：`Activity``onDestroy()`

```
public void unbindDrawables()
{
    if(mLayerDrawableAvailable)
    {
        LayerDrawable lDrawable = (LayerDrawable) getDrawable();
        if(lDrawable != null)
        {   
            lDrawable.getDrawable(1).setCallback(null);
            lDrawable.getDrawable(0).setCallback(null);
            lDrawable.setCallback(null);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-17T01:29:18.673

当内存压力很高时，不保证调用 onDestroy。这或许可以解释。尝试从 onStop() 调用 unbindDrawables

[http://developer.android.com/training/basics/activity-lifecycle/stopping.html#Stop](http://developer.android.com/training/basics/activity-lifecycle/stopping.html#Stop)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-15T13:24:04.733

我会尝试从您的可绘制图层中取回位图并回收它。

```
public void unbindDrawables()
{
    if(mLayerDrawableAvailable)
    {
        LayerDrawable lDrawable = (LayerDrawable) getDrawable();
        if(lDrawable != null)
        {   
            ((BitmapDrawable)lDrawable.getDrawable(1)).getBitmap().recycle();
            ((BitmapDrawable)lDrawable.getDrawable(0)).getBitmap().recycle();
            lDrawable.setCallback(null);
        }
    }
} 
```

尝试在您的活动中调用 onDestroy() 事件主体中的 unbindDrawables()。

# linux - fread Windows VS Linux 上的不同行为

> ID：15462068
> 
> 赞同：0
> 
> 时间：2013-03-17T14:48:05.977
> 
> 标签：linux, windows, winapi, fread

我每次从文件中读取 8 个字节。

问题出在 Windows 中，当涉及到最后一个字节时 - 它发现它小于 8 个字节，所以 fread 不起作用并返回 0 。所以我错过了文件中的一个或多个字符。

在具有相同代码的 Linux 中不会发生这种行为。

我怎样才能避免这种情况？

# python - 是否可以在 splinter python（Windows、Linux）中隐藏浏览器窗口？

> ID：15462069
> 
> 赞同：1
> 
> 时间：2013-03-17T14:48:14.557
> 
> 标签：python, selenium

我编写了一个程序来截取所选网页的屏幕截图。用户键入一个 url，然后我的应用程序对键入的页面进行屏幕截图。我想知道是否可以（以及如何）隐藏浏览器窗口？我的意思是，不打开它，但要截屏？提前致谢 ：）

我为此使用 python 2.7 和 splinter。下面的代码：

```
from splinter import Browser
import socket

url = raw_input('> ')

browser = None    
try:
    browser = Browser('firefox')
    try:
        browser.visit(url)
        if browser.status_code.is_success():
            browser.driver.save_screenshot('picture.png')
    except socket.gaierror, e:
        print "URL not found: %s" % url
finally:
    if browser is not None:
        browser.quit() 
```

对于 Ubuntu，我发现了这个：[Selenium-Python Client Library - Automating in Background](https://stackoverflow.com/questions/6924387/selenium-python-client-library-automating-in-background?rq=1)但是 Windows 怎么样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-20T14:35:09.817

你有几个选择：

1.  使用“愚蠢”的无头浏览器，例如[mechanize](http://wwwsearch.sourceforge.net/mechanize/)。这很快，非常适合快速访问和截图。但是，它不理解javascript。

2.  在你的分裂测试中使用[zope.testbrowser浏览器。](http://splinter.cobrateam.info/docs/why.html)它是一个无头浏览器，因此不会出现在屏幕上。它理解 javascript，但需要更多的投资才能起床。

3.  只需使用带有一些特殊标头的[urllib2 即可。](https://stackoverflow.com/questions/16344700/take-a-screenshot-from-a-website-from-commandline-or-with-python)

# jquery - JQuery如何识别响应是成功还是失败

> ID：15462071
> 
> 赞同：2
> 
> 时间：2013-03-17T14:48:18.810
> 
> 标签：jquery

我是 JQuery 的新手。我找到了用于发出 ajax 请求的 $.ajax() 方法。这里我们添加成功和失败的方法。但是 JQuery 如何在内部查找来自服务器的响应是成功还是失败并调用适当的方法呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T14:55:32.407

基本上，如果 AJAX 请求除了返回任何 HTTP 状态码`200`，或者数据没有被正确解析，那就是失败了。

在成功回调中，您需要处理数据以查看它是否在您的 API 调用方面“成功”。

例如，如果您发送 AJAX 请求来注册新用户，您可能会发送如下内容：

```
$.ajax({
    url: 'user/register',
    data: {user:'username'},
    success: function(data, textStatus, jqXHR) { },
    error: function(jqXHR, textStatus, errorThrown) { }
}); 
```

如果响应的状态为，则无论服务器尝试注册用户是否成功，`success`都会触发回调。`200`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T14:56:06.243

它考虑成功和失败的两个主要因素。

1.  HTTP 状态码
2.  接收到的数据是否能够被解析（json、xml等）

查看[他们网站上的 ajax 事件](http://api.jquery.com/Ajax_Events/)或[他们的 github 页面上的 ajax 代码](https://github.com/jquery/jquery/blob/master/src/ajax.js)以获取更多详细信息。

# error-handling - Go 中的自定义错误处理

> ID：15462074
> 
> 赞同：4
> 
> 时间：2013-03-17T14:48:37.470
> 
> 标签：error-handling, go

我一直在阅读[这篇博文，](http://blog.golang.org/2011/07/error-handling-and-go.html "这篇博文")但我仍然不相信我确切知道如何获取自定义错误，我可以从我的函数返回并在它们之外进行处理。

这就是我目前正在做的事情：

```
func doSomething() int {
    x := 0
    // Do something with x.
    ...
    if somethingBadHappened {
        return -1
    }
    if somethingElseBadHappened {
        return -2
    }
    return x
} 
```

这就是我想做的事情：

```
func doSomething() int, ? {
    ...
    if somethingBadHappened {
        return ?, err
    }
    if somethingElseBadHappened {
        return ?, err2
    }
    return x, nil
} 
```

但我不完全确定如何以及用什么替换这些问号。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-17T15:00:52.460

如果你不想，你真的不需要返回一个 int 。您可以执行以下操作：

```
func doSomething() error {
  ...
  if somethingBadHappened {
      return errors.New("something bad happened")
  }
  if somethingElseBadHappened {
      return errors.New("something else bad happened")
  }
  return nil
} 
```

或者如果你想返回整数

```
func doSomething() (int, error) {
  ...
  if somethingBadHappened {
      return -1, errors.New("something bad happened")
  }
  if somethingElseBadHappened {
      return -2, errors.New("something else bad happened")
  }
  return x, nil
} 
```

一定要`import "errors"`在顶部。

如果你想测试你是否有错误，你可以做

```
x, err := doSomething()
if err != nil {
  log.Println(err)
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-17T15:31:09.583

我会转

```
func doSomething() int, ? {
        ...
        if somethingBadHappened {
                return ?, err
        }

        if somethingElseBadHappened {
                return ?, err2
        }

        return x, nil
} 
```

进入

```
func doSomething() (r int, err error) {

        ...

        if somethingBadHappened {
                err  = err1 // Whatever satisfies the `error` interface
                return
        }

        if somethingElseBadHappened {
                err = err2 // dtto
                return
        }

        return x, nil
} 
```

IOW，在调用站点，如果 err != nil 忽略、从不使用或依赖任何其他返回值是惯用的*，所以只要不关心`r`上面是否已经分配了一些中间值。

(*) 在第一个近似值中，即如果没有另外说明。例如，[`io.Reader`](http://golang.org/pkg/io/#Reader)显式声明它*可以*同时返回`err == io.EOF`有效数据：

> 当 Read 在成功读取 n > 0 个字节后遇到错误或文件结束条件时，它会返回读取的字节数。它可能会从同一次调用中返回（非零）错误，或者从后续调用中返回错误（并且 n == 0）。这种一般情况的一个例子是，在输入流末尾返回非零字节数的 Reader 可能会返回 err == EOF 或 err == nil。下一个 Read 应该返回 0，EOF 无论如何。

# sql - 只有一条记录sql

> ID：15462077
> 
> 赞同：0
> 
> 时间：2013-03-17T14:48:57.717
> 
> 标签：sql, database, database-design, relational-database

例如，当我只有一个管理员（只有一个管理员）记录时`id`，`password`是否有必要创建一个表`administrator`？为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T14:53:56.190

一个记录表本质上没有任何问题。这是您设计的功能。例如，管理员不是一种用户，因此您不会在用户表中添加管理员。但这是一个设计决定。

# java - 为什么不可变类提供突变器？

> ID：15462078
> 
> 赞同：3
> 
> 时间：2013-03-17T14:48:58.037
> 
> 标签：java, immutability, bigdecimal

考虑以下代码：

```
 bdval = new BigDecimal(strval, new MathContext(attrib.getPrecision()));
    bdval.setScale(attrib.getScale(), RoundingMode.HALF_UP); 
```

[PMD](http://pmd.sourceforge.net/)非常正确地说：

> 对 Immutable 的无用操作

那么为什么不可变类`BigDecimal`要为属性导出修改器呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-17T14:50:38.093

`setScale()`不会改变它调用的 BigDecimal。它返回具有新比例值的 BigDecimal 副本。

PMD 报告错误，因为您的代码错误：它忽略了操作的结果，使操作无用。您的代码应该是：

```
bdval = bdval.setScale(attrib.getScale(), RoundingMode.HALF_UP); 
```

# c# - 如果我选择多个项目，如何为列表框中的每个项目创建一个任务？

> ID：15462081
> 
> 赞同：2
> 
> 时间：2013-03-17T14:49:23.473
> 
> 标签：c#

首先这是 listBox selected index changed 事件：

```
private void listBox1_SelectedIndexChanged(object sender, EventArgs e)
        {

            if (listBox1.SelectedItem != null)
            {
                label4.Text = listBox1.SelectedItem.ToString();
                string startTag = "Url: ";
                string endTag = " ---";
                int startTagWidth = startTag.Length;
                int endTagWidth = endTag.Length;
                int index = 0;
                index = label4.Text.IndexOf(startTag, index);
                int start = index + startTagWidth;
                index = label4.Text.IndexOf(endTag, start + 1);
                string g = label4.Text.Substring(start, index - start);
                label4.Text = g;
                mainUrl = g;
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T23:16:59.293

通过添加此方法解决它：

```
private string GetUrl(object obj)
        {
            string startTag = "Url: ";
            string endTag = " ---";
            int startTagWidth = startTag.Length;
            int endTagWidth = endTag.Length;
            int index = 0;
            index = obj.ToString().IndexOf(startTag, index);
            int start = index + startTagWidth;
            index = obj.ToString().IndexOf(endTag, start + 1);
            string g = obj.ToString().Substring(start, index - start);
            mainUrl = g;
            return mainUrl;
        } 
```

并在 DoWork 事件中使用它，如下所示：

```
private void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e)
        {
            object input = e.Argument;
            string f = GetUrl(input);
            this.Invoke(new MethodInvoker(delegate { label2.Text = "Website To Crawl: "; }));
            this.Invoke(new MethodInvoker(delegate { label4.Text = f; }));
            if (offlineOnline == true)
            {
                offlinecrawling(f, levelsToCrawl, e);
            }
            else
            {
                webCrawler(f, levelsToCrawl, e);
            }
        } 
```

# assembly - cmp DWORD PTR 和 mov DWORD PTR 是什么意思？

> ID：15462082
> 
> 赞同：1
> 
> 时间：2013-03-17T14:49:25.360
> 
> 标签：assembly, disassembly

在这个应该是循环中断条件的代码片段中， cmp DWORD PTR 做什么？mov DWORD PTR 是什么

```
mov eax, DWORD PTR [c]
mov ecx, DWORD PTR [array] 
LoopStart:
cmp DWORD PTR
jne AfterLoop // break
mov DWORD PTR
add eax, 1
cmp eax, 1000 // post-test 
jl LoopStart
AfterLoop: 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T14:53:11.973

它只是告诉汇编器，指针指向一个 32 位值。但是在您的代码中，您缺少参数。

# node.js - Node.js v0.10 Stream2 API 管道“结束”事件

> ID：15462086
> 
> 赞同：0
> 
> 时间：2013-03-17T14:49:45.313
> 
> 标签：node.js

我使用新的 Streams2 API 升级到 Node.js v0.10。

我注意到现在如果我通过管道传输到一个文件，当收到“结束”事件时，该文件可能仍处于打开状态并且其大小为 0。

例如（使用 pdfkit）：

```
http.get('http://www.example.com/test.jpg', function(res) {
    var file = fs.createWriteStream('./test.jpg');
    res.on("end", function() {
        doc.image('./test.jpg');
    };

    res.pipe(file);
}); 
```

抛出错误，文件大小为 0。

但如果我把它改成`file.on("close"....`我想要的结果。

这是正确的行为吗？我应该使用`file.on("close")`吗？

# python - Python“for”循环，除法错误

> ID：15462090
> 
> 赞同：-1
> 
> 时间：2013-03-17T14:50:12.140
> 
> 标签：python, for-loop, python-2.7

当我尝试时，我正在使用 python 2.7.3

```
a = [1,2,3,4]
b = []
for i in a:
    b.append(1/i) 
```

我得到了一个意外的输出，因为 b = [1,0,0,0]。但是如果我打印 i 循环的值就可以了。

```
for i in a:
    b.append(i) 
```

会给出 b =[1, 2, 3, 4] 这是什么原因。另外我怎样才能以正确的方式做同样的事情？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-17T14:50:52.680

在 python 2 中，`/`当两个操作数都是整数时，表示整数除法。试试`1.0 / i`。

```
In [2]: 1 / 2
Out[2]: 0

In [3]: 1.0 / 2
Out[3]: 0.5

In [4]: 1 / 2.0
Out[4]: 0.5 
```

要使`/`操作符的行为像在 python 3 中一样，请使用`from __future__ import division`：

```
In [11]: from __future__ import division

In [12]: 1 / 2
Out[12]: 0.5 
```

# java - 多个输出突然不写任何输出？

> ID：15462100
> 
> 赞同：0
> 
> 时间：2013-03-17T14:51:04.487
> 
> 标签：java, hadoop, mapreduce, elastic-map-reduce

突然多个输出没有将任何输出写入目的地。

我使用多个输出的自定义实现，我刚刚更改了：

```
 if((ch == '/') || (ch == ':')||(ch == '-')||(ch =='.'))
      {
          continue;
      } 
```

在方法中，如下图。但同样的工作一直在工作，突然间它不工作了。它没有向输出目录写入任何内容：

/home/用户/mlakshm/

请帮忙！！！

```
 private static void checkTokenName(String namedOutput) {
    if (namedOutput == null || namedOutput.length() == 0) {
      throw new IllegalArgumentException(
        "Name cannot be NULL or emtpy");
    }
    for (char ch : namedOutput.toCharArray()) {
      if ((ch >= 'A') && (ch <= 'Z')) {
        continue;
      }
      if ((ch >= 'a') && (ch <= 'z')) {
        continue;
      }
      if ((ch >= '0') && (ch <= '9')) {
        continue;
      }
      if((ch == '/') || (ch == ':')||(ch == '-')||(ch =='.'))
      {
          continue;
      }
      throw new IllegalArgumentException(
        "Name cannot be have a '" + ch + "' char");
    }
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T20:43:06.073

您可能会注意到，该方法`checkTokenName()`是确保输出名称有效。现在，您正在尝试修改`MultipleOutputs`您不应该修改的非常完整的部分。首先，不允许使用`/`,和等字符的原因有很多：`:``.``-`

1.  许多文件系统不允许*文件名中包含其中一些字符*
2.  使用 MultipleOutputs，可以写入多个*文件*，但在指定目录中，而不是在任何所需位置。
3.  您可能已经注意到，对于以下命名输出：

    // 为作业定义额外的基于单个文本的输出'text' MultipleOutputs.addNamedOutput(job, "text", TextOutputFormat.class, LongWritable.class, Text.class); 输出文件名将是 text-0000、text0001 等。

所以如果你想写在不同的目录中，那么最好去覆盖`MultipleTextOutputFormat`；如果您不能随意使用旧 API，那么您最好自己写入[HDFS](https://sites.google.com/site/hadoopandhive/home/how-to-write-a-file-in-hdfs-using-hadoop) / [S3](http://jets3t.s3.amazonaws.com/index.html)，而不是依赖 hadoop 来做到这一点。

# wordpress - Wordpress 从 MAMP 迁移到托管

> ID：15462102
> 
> 赞同：0
> 
> 时间：2013-03-17T14:51:10.653
> 
> 标签：wordpress, hosting, live, mamp

我做过这些事情：

1.  出口进口基地
2.  更新 wp 配置
3.  压缩并通过 FTP 发送到主机
4.  解压并运行
5.  测试管理员和帖子。行！
6.  尝试转到 www.itpodcasts.com.ua 重定向到无法解决的 www.itpodcasts.com.ua:8888。

.htaccess

```
# BEGIN WordPress

# END WordPress 
```

有人知道怎么修吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T15:39:34.430

请尝试将这些查询运行到您的数据库中

```
UPDATE wp_options SET option_value = replace(option_value, 'http://www.old-domain.com', 'http://www.new-domain.com') WHERE option_name = 'home' OR option_name = 'siteurl';

UPDATE wp_posts SET guid = replace(guid, 'http://www.old-domain.com', 'http://www.new-domain.com');

UPDATE wp_posts SET post_content = replace(post_content, 'http://www.old-domain.com', 'http://www.new-domain.com'); 
```

# objective-c - 在哪里寻找错误。文档、应用程序委托或两者兼而有之？

> ID：15462107
> 
> 赞同：0
> 
> 时间：2013-03-17T14:52:04.500
> 
> 标签：objective-c, xcode, macos, crash

以下情况：我有一个基于文档的应用程序。默认情况下，当我打开应用程序时，它只在屏幕顶部显示菜单。然后我点击file->new，它打开了一个全新的document.xib界面。在我的主电脑上工作正常。但是在我运行 10.6.8 的第二台电脑上，应用程序一运行就崩溃了。（代码是用正确的目标编译的......）

这个应用程序在我什至在顶部看到主菜单之前就崩溃了。崩溃的原因是否仍然在文档的 xib 文件中？还是很可能在文档部分之外的代码中？我的意思是：代码是在应用程序启动时完全检查的，还是当它到达导致它的代码时它是否会导致崩溃？

谢谢

编辑

```
Exception Type: EXC_BAD_ACCESS (SIGSEGV)
Exception Codes: KERN_INVALID_ADDRESS at 0x0000000000000000
Crashed Thread: 0 Dispatch queue: com.apple.main-thread

Thread 0 Crashed: Dispatch queue: com.apple.main-thread
0 ??? 000000000000000000 0 + 0
1 com.apple.AppKit 0x0000000100def22e -[NSCustomObject nibInstantiate] + 416
2 com.apple.AppKit 0x0000000100def01b -[NSIBObjectData instantiateObject:] + 259
3 com.apple.AppKit 0x0000000100dee406 -[NSIBObjectData nibInstantiateWithOwner:topLevelObjects:] + 336
4 com.apple.AppKit 0x0000000100deca91 loadNib + 226
5 com.apple.AppKit 0x0000000100debfa1 +[NSBundle(NSNibLoading)_loadNibFile:nameTable:withZone:ownerBundle:] + 248
6 com.apple.AppKit 0x0000000100debdd9 +[NSBundle(NSNibLoading) loadNibNamed:owner:] + 326
7 com.apple.AppKit 0x0000000100de935b NSApplicationMain + 279
8 mad-sharky.com.Stockuploader 0x0000000100001194 0x100000000 + 4500 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T15:03:23.463

问题不在于 XIB 文件，而在于所述文件中被错误实例化的对象之一。关于对象的某些东西导致它的`-initWithCoder:`方法失败。看来您可能没有在所述方法中调用 super，而只是返回 self，这是不允许的。

另一种可能性是你有一个“幽灵出口”。有时，当一个 IBOutlet 被创建和链接时，声明它的那段代码被删除，IB 不会取消链接该插座，并且 NSCoder 尝试取消归档一个 nil 插座。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T17:14:12.727

发现了问题。这里是：

![在此处输入图像描述](../Images/a48ab831aa11d37219f0905dabf8cbbb.png)

现在它可以正常工作了！

# google-chrome - 如何检测chrome devtools何时关闭并触发background.js中的功能

> ID：15462111
> 
> 赞同：3
> 
> 时间：2013-03-17T14:52:27.437
> 
> 标签：google-chrome, google-chrome-extension, google-chrome-devtools, onbeforeunload

我目前正在编写一个 chrome 扩展，它在 Devtools 中有自己的面板。虽然我面临一个问题。当特定选项卡的 Devtools 面板关闭时，我试图在后台页面中触发一些操作。

我尝试将其添加到 devtools.js ：

```
window.onbeforeunload = function(event) {
  port.postMessage({action: 'disableTab', tabId: tabID});
  return "Are you sure you want to navigate away?";
}; 
```

尽管从不显示确认信息并且从不发布消息。

我认为这是因为我的 devtools.html / devtools.js 文件不是处理主要 Devtools 面板的文件。它只是附加在它上面，类似的东西。

我仍在寻找答案，有谁知道我怎么能做到这一点？

**编辑：** 我刚刚注意到这个应用程序正在做我想要的！[https://developers.google.com/speed/pagespeed/insights_extensions](https://developers.google.com/speed/pagespeed/insights_extensions) 运行分析，然后尝试关闭 devtools，系统会提示您。

# java - 在我的 GUI 的 actionListener 中按下按钮时图像不打开？

> ID：15462112
> 
> 赞同：2
> 
> 时间：2013-03-17T14:52:30.057
> 
> 标签：java, image, swing, jbutton, actionlistener

我试图在按下 PlaySci 按钮时打开图像，所以我将图像放在 PlaySci 动作侦听器中，但是它仅在按下退出按钮时打开？

我已经看了几个小时，仍然不明白为什么，我试图完全摆脱退出按钮，但图像根本没有显示。

我把图像变成了`JLabel`顶部：

```
ImageIcon scis1 = new ImageIcon("scis.jpg");

private JLabel picture = new JLabel(scis1); 
```

这是我的 PlaySci 按钮 ActonListener 的代码：

```
class PlaySciHandler implements ActionListener {
    public void actionPerformed(ActionEvent event) {

        String computerRand = sps.computerChoice();
        txtComputerRand.setText(computerRand);
        String result = sps.play(Sps.SCISSORS);
        txtResult.setText(result);
        picture.setBounds(60, 200, 400, 400);// this is the image I want displayed when the PlaySci button is pressed
        panel.add(picture);
    }
} 
```

这是退出按钮 ActionListener （出于某种原因，这是显示图像的唯一方法）：

```
class exitHandler implements ActionListener{
    public void actionPerformed(ActionEvent e) {
        int n = JOptionPane.showConfirmDialog(frame, //when this button is pressed the image comes up?
                "Are you sure you want to exit?", 
                "Exit?", 
                JOptionPane.YES_NO_OPTION);
        if(n == JOptionPane.YES_OPTION){
            System.exit(0);
        }
    }
} 
```

这是创建按钮并添加 ActionListener 的代码：

```
 btnPlaySci = new JButton ("Scissors!");
        btnPlaySci.setBounds(180, 40, 110, 20);
        btnPlaySci.addActionListener(new PlaySciHandler());
        panel.add (btnPlaySci);
        btnPlaySci.setForeground(Color.MAGENTA); 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T15:30:34.670

添加图片后，您应该重新绘制面板。方法见代码`PlaySciHandler` `actionPerformed`。

```
class PlaySciHandler implements ActionListener {
        public void actionPerformed(ActionEvent event) {

            String computerRand = sps.computerChoice();
            txtComputerRand.setText(computerRand);
            String result = sps.play(Sps.SCISSORS);
            txtResult.setText(result);
            picture.setBounds(60, 200, 400, 400);// this is the image I want displayed when the PlaySci button is pressed
            panel.add(picture);
            panel.repaint();//Must repaint the panel .
        }
    } 
```

**注意：**作为旁注，我建议您永远不要使用`null Layout`for 。使用 .提供`JPanel`的内置。[您可以在此官方网站上](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)获取有关 Layouts 使用的更多信息。另一个是始终坚持 Java 命名约定。类应该写成。要了解更多信息，请查看这个[官方网站](http://www.oracle.com/technetwork/java/codeconv-138413.html)。`Layouts``Swing``exitHandler``ExitHandler`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T15:26:42.620

不要`JLabel`在`class PlaySciHandler implements ActionListener`块中添加。将其添加到您的`createForm()`方法中并使其不可见：`picture.setVisible(false);` 当您想在单击按钮后显示时，使其可见：`picture.setVisible(true);`

# c - 如何在 C 中创建一个带有指针的池？

> ID：15462113
> 
> 赞同：0
> 
> 时间：2013-03-17T14:52:30.397
> 
> 标签：c, pointers

我正在制作我的库，就在我想理解指针语法时，我只是感到困惑，在网上搜索并变得更加困惑。

基本上我想做一个游泳池，这就是我真正想做的事情：

![语境](../Images/e43bb18d04bd755a89adcba54744b652.png)

*必须尊重以下几点：*

*   当我将一个对象添加到池中时，当前数组指向对象的指针被添加到一个新的指针数组 + 1（以包含新对象）。
*   新数组由我的 foo 结构的“对象”指向。
*   旧阵列正在释放。
*   当我调用清理函数时，池中的所有对象都是空闲的

* * *

*我应该如何定义我的结构？*

```
typedef struct {
    int n;
    (???)objects
} foo;
foo *the_pool; 
```

这是管理我的池的代码：

```
void myc_pool_init ()
{
    the_pool = (???)malloc(sizeof(???));
    the_pool->n = 0;
    the_pool->objects = NULL;
}

void myc_push_in_pool (void* object)
{
    if (object != NULL) {
        int i;
        (???)new_pointers;

        the_pool->n++;
        new_pointers = (???)malloc(sizeof(???)*the_pool->n);

        for (i = 0; i < the_pool->n - 1; ++i) {
            new_pointers[i] = (the_pool->objects)[i]; // that doesn't work (as I'm not sure how to handle it)
        }
        new_array[i] = object;

        free(the_pool->objects);
        the_pool->objects = new_array; // that must be wrong
    }
}

void myc_pool_cleanup ()
{
    int i;
    for (i = 0; i < the_pool->n; ++i)
        free((the_pool->objects)[i]); // as in myc_push_in_pool, it doesn't work
    free(the_pool->objects);
    free(the_pool);
} 
```

**注意：添加到池中的对象的类型事先不知道，所以我应该处理所有指针作为 void** 任何反馈都会非常受欢迎。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T15:06:43.687

对您的问题的直接回答是：使用`void *`. 这种类型非常强大，因为它允许您在池中放置任何类型的指针。`void *`但是，在从池中检索指针时，由您执行正确的强制转换。

你的结构看起来像这样

```
typedef struct {
    int n;
    (void **)objects
} foo;
foo *the_pool; 
```

如，一个指针数组。

你的malloc：

```
new_pointers = (void **)malloc(sizeof(void *)*the_pool->n); 
```

这里有一个性能问题。您可以简单地分配一个固定大小的数组，并且只有在元素数量超过预定义的负载因子（= 使用的数量/最大大小）时才重新分配

`realloc`此外，您可以使用（[http://www.cplusplus.com/reference/cstdlib/realloc/](http://www.cplusplus.com/reference/cstdlib/realloc/)），而不是每次向池中添加内容时分配一个新指针

```
the_pool->objects = (void **)realloc(the_pool->objects, the_pool->n* sizeof(void*)); 
```

Realloc 尝试增加当前分配的区域，而不需要复制所有内容。只有当函数不能连续增加分配的区域时，它才会分配一个新的区域并复制所有内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T15:28:27.603

首先，您已经回答了“foo.objects 的类型应该是什么？” 问题：`void *objects;`，malloc 已经返回`void *`。您的结构也需要存储`size_t item_size;`. `n`大概也应该是一个`size_t`。

```
typedef struct {
    size_t item_count;
    size_t item_size;
    void *objects;
} foo;
foo *the_pool; 
```

您*可以*使用自制循环，但我认为 memcpy 是一种更方便的方式，可以将旧项目复制到新空间，并将新项目复制到新空间。

取消引用 a`void *`是违反约束的，就像 a 上的指针算术一样`void *`，因此`new_pointers`需要是不同的类型。您需要一种指向正确大小的对象的类型。您可以使用正确数量的数组`unsigned char`，如下所示：

```
// new_pointers is a pointer to array of the_pool->item_size unsigned chars.
unsigned char (*new_pointers)[the_pool->item_size] = malloc(the_pool->item_count * sizeof *new_pointers);

// copy the old items
memcpy(new_pointers, the_pool->objects, the_pool->item_count * sizeof *new_pointers);

// copy the new items
memcpy(new_pointers + the_pool->item_count, object, sizeof *new_pointers); 
```

请记住，*free()*只针对 malloc() 返回*的*指针，并且应该是一一对应的：每个 malloc() 都应该是 free()d。看看你是如何 malloc 的：`new_pointers = malloc(sizeof(???)*the_pool->n);`......是什么让你认为你需要一个循环（在 myc_pool_cleanup 中）来释放每个项目，而你可以一口气释放它们？

您*可以*使用 realloc，但您似乎可以完美地处理 malloc/memcpy/free *in myc_push_in_pool*。很多人在编写 realloc 代码时往往会搞砸。

# php - Laravel 中的路由与控制器

> ID：15462115
> 
> 赞同：3
> 
> 时间：2013-03-17T14:52:36.760
> 
> 标签：php, rest, url-routing, laravel

我想知道 laravel 框架开发的最佳方法。大多数时间和教程我都在阅读，例如：Dayle 的 Laravel CodeHappy，[你在这里看到的例子和他的书一样](http://getlaravel.com/)。堆栈溢出中的大多数问答，我注意到大多数开发人员还将所有请求处理放在 route.php 上。我可以知道这对于云类型的大型应用程序代码结构是否有用？在我的概念中，RESTful 是为 api 设计的，而我们可以使用控制器来检测它的获取、发布、放置或删除。像这样

```
if ($_POST)
    {
       // Try and login user
    }
    else
    {
       // Show login form
    } 
```

但是没有太多可用的教程/示例。我有错误的概念吗？如果将所有内容都更改为控制器，我不知道该怎么做。像验证和从控制器获取输入。有人对此有想法吗？请指教。如果出现示例将是最好的；）谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-17T15:37:28.703

这个问题真的没有确切的答案。您是使用路由还是控制器（**或两者都使用，这是完全可以接受的，并且大多数人都在做**），取决于您的应用程序。一般来说，如果你的路由看起来有很多业务逻辑，你可能应该考虑将它们“转换”为控制器，因为控制器更容易维护和忽略，尤其是对于大型应用程序。

最后，最好**将路由的灵活性与控制器的功能结合起来**，例如通过[使用路由调用控制器](http://laravel.com/docs/routing#controller-routing)：

```
Route::get('welcome', 'home@index'); 
```

在这里，您调用控制器`index`上的操作。`home`

如果您想了解更多关于 Route 与 Controller 的争论，[这是一篇不错的文章。](http://jasonlewis.me/article/laravel-routes-or-controllers)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-17T15:44:21.543

您可以从控制器内部访问所有相同的类，您可以在附加到路由的匿名函数内部访问这些类。

例如，如果您有这条路线：

```
Route::post('register', function(){
     $user = new User();
     $user->username = Input::get('username');
     $user->password = Hash::make(Input::get('password'));

     $user->save();

     return Redirect::to('home');
}); 
```

你可以用这个替换它：

```
Route::post('register', array('uses' => 'auth@register'));

class Auth_Controller extends Base_Controller {

    public static $restful = true;

    public function post_register() {
         $user = new User();
         $user->username = Input::get('username');
         $user->password = Hash::make(Input::get('password'));

         $user->save();

         return Redirect::to('home');
    }
} 
```

......并获得相同的结果，但随着您的应用程序的增长，这变得特别重要。

# javascript - 将 console.log 值分配给变量

> ID：15462122
> 
> 赞同：27
> 
> 时间：2013-03-17T14:53:02.360
> 
> 标签：javascript, ruby, console.log, language-comparisons

如何将 JavaScript 对象分配给使用打印的变量`console.log`？

我在 Chrome 控制台中。使用 Ruby，我将使用它`test = _`来访问最近打印的项目。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2017-01-18T18:01:24.633

如果您想对已记录的对象执行此操作（一次性），chrome 控制台提供了一个很好的解决方案。

将鼠标悬停在控制台中打印的对象上，右键单击，然后单击“存储为全局变量”。Chrome 会为您分配一个临时 var 名称，您可以在控制台中使用该名称。

[![在此处输入图像描述](../Images/6100e9d37bb26c1c995788c3d23cdefe.png)](https://i.stack.imgur.com/d3oGN.png)

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-03-17T15:15:37.723

`console.log()`你可以用你自己的覆盖标准函数，添加你需要的行为：

```
console.oldLog = console.log;

console.log = function(value)
{
    console.oldLog(value);
    window.$log = value;
};

// Usage

console.log('hello');

$log // Has 'hello' in it 
```

这样，您不必更改现有的日志记录代码。您还可以扩展它，添加一个数组并存储打印对象/值的整个历史记录。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2013-03-17T15:03:22.427

在 Chrome 开发者工具中，您可以通过以下方式访问最后一项`$_`：

```
> 1+1;
  2
> $_
  2 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-07-23T18:45:50.487

mirrormx 答案的衍生物，但更方便。我不需要编写函数，可以一时冲动把它放在任何地方。

```
console.log(window.$log = data); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-17T15:03:17.997

这是命令行 api 的[chrome 参考](https://developers.google.com/chrome-developer-tools/docs/commandline-api)。有 $_ 变量，但未打印“返回最近评估的表达式的值”，您可以像这样制作自己的日志函数：

```
function log(data){
   console.log(data);
   return data;
}
// after that you can access last printed value by $_ 
```

请注意，我的功能例如，console.log 可能性要高级得多

# java - 使用 RestTemplate 进行基本身份验证 - 编译错误 - 构造函数 HttpClient() 不可见

> ID：15462128
> 
> 赞同：3
> 
> 时间：2013-03-17T14:53:32.890
> 
> 标签：java, spring, rest, http-headers, basic-authentication

尝试将基本身份验证添加到 restTemplate

我遇到的问题是我无法初始化：（代码片段中的两个导入）

```
HttpClient client = new HttpClient(); 
```

此代码在编译错误中解决（eclipse 没有提供解决此问题的建议）

1）有什么问题？

2）我是否导入了错误的类？

我的代码片段：

```
import org.apache.http.client.HttpClient;
//OR (not together)
import sun.net.www.http.HttpClient;

HttpClient client = new HttpClient(); //this line dosent compile
UsernamePasswordCredentials credentials =
new UsernamePasswordCredentials("USERNAME","PASS");
client.getState().setCredentials(
  new AuthScope("www.example.com", 9090, AuthScope.ANY_REALM),
  credentials);
CommonsClientHttpRequestFactory commons =
     new CommonsClientHttpRequestFactory(client);

RestTemplate template = new RestTemplate(commons);
SomeObject result = template.getForObject(
     "http://www.example.com:9090/",SomeObject.class
 ); 
```

运行这个得到异常：

```
> failed due to an unhandled exception: java.lang.Error: Unresolved
> compilation problems:     The constructor HttpClient() is not visible
>   The method getState() is undefined for the type HttpClient
>   CommonsClientHttpRequestFactory cannot be resolved to a type
>   CommonsClientHttpRequestFactory cannot be resolved to a type
>   SomeObject cannot be resolved to a type     The method
> getForObject(String, Class<SomeObject>, Object...) from the type
> RestTemplate refers to the missing type SomeObject    SomeObject cannot
> be resolved to a type 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-18T16:07:46.477

最后，使用以下方式运行基本身份验证要容易得多：

```
restTemplate.exchange() 
```

并不是

```
restTemplate.getForObject() 
```

我的代码片段：

```
private HttpHeaders createHeaders(final String username, final String password ){
    HttpHeaders headers =  new HttpHeaders(){
          {
             String auth = username + ":" + password;
             byte[] encodedAuth = Base64.encodeBase64(
                auth.getBytes(Charset.forName("US-ASCII")) );
             String authHeader = "Basic " + new String( encodedAuth );
             set( "Authorization", authHeader );
          }
       };
       headers.add("Content-Type", "application/xml");
       headers.add("Accept", "application/xml");

       return headers;
}

    RestTemplate restTemplate = new RestTemplate();
    ResponseEntity<MyClass> response;
    httpHeaders = this.createHeaders("user", "pass");

    String url = "www.example.com"
    response = restTemplate.exchange(url, HttpMethod.GET, new HttpEntity<Object>(httpHeaders), MyClass.class); 
```

它有效！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-17T14:59:21.987

如果使用 Apache HttpClient，请实例化[`DefaultHttpClient`](http://hc.apache.org/httpcomponents-client-ga/httpclient/apidocs/org/apache/http/impl/client/DefaultHttpClient.html)，因为`HttpClient`只是一个接口：

```
HttpClient httpclient = new DefaultHttpClient(); 
```

`HttpClient` [请在此处](http://hc.apache.org/httpcomponents-client-ga/tutorial/html/authentication.html)查看有关使用各种身份验证方案的文档。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-05T17:10:20.583

我们可以通过以下方式在 Spring Boot 中使用它：

```
 @SpringBootApplication 
```

公共类应用程序实现 CommandLineRunner{

```
private static final Logger log = LoggerFactory.getLogger(Application.class);

public static void main(String[] args) {
    SpringApplication.run(Application.class, args);
}

@Override
public void run(String... args) throws Exception {
    try{
    RestTemplate restTemplate = new RestTemplate();
    HttpHeaders httpHeaders = new HttpHeaders();
    httpHeaders = this.createHeaders();
    ResponseEntity<String> response;
    response  = restTemplate.exchange("<url>",HttpMethod.GET,new HttpEntity<Object>(httpHeaders),String.class);
    log.info(response.toString());
    }
    catch(Exception e)
    {
        System.out.println("Exception"+e);
    }

}

private HttpHeaders createHeaders(){
    HttpHeaders headers =  new HttpHeaders(){
          {            
             set( "Authorization", "3ee140");
          }
       };

       return headers;
} 
```

}

# jquery - ajax成功时jquery数据表加载

> ID：15462132
> 
> 赞同：0
> 
> 时间：2013-03-17T14:53:53.813
> 
> 标签：jquery, datatables

我是一个新手，需要一个在 Ajax 成功调用中加载和刷新 jQuery 数据表的完整工作示例。我想打开一个对话框，其中加载了 jquery 数据表。仅当 ajax 结果返回多条记录时，该对话框才应打开。

这是对话框 HTML：

```
 <div id="rfrList" title="Referring Providers">
    <table cellpadding="0" cellspacing="0" border="0" class="display" id="rfrListTable">
      <thead>
        <tr>
          <th width="70%">Name</th>
          <th width="25%">NPI</th>
        </tr>
      </thead>
      <tbody>

      </tbody>
    </table>        
  </div> 
```

这是我的 Ajax 调用：

```
$.ajax({
          type: 'POST',
          url: '/ajax/rfr_list.php',
          data: {"name": name},
          cache: false,
          success: function(data){
            var rfrRows = $.parseJSON(data);
            if(rfrRows.length == 1){
              $("#referring_text").val(rfrRows[0].name);
              $("#referring_npi").val(rfrRows[0].npi);
            }else{
              $( "#rfrList" ).dialog("open");
              var $rfrTable = $('#rfrListTable').dataTable( { bRetrieve : true } );
              $rfrTable.fnDraw(); // I need my ajax result in table now
            }
          }         
        }); 
```

我不确定如何使我的 ajax 结果到达数据表。

编辑：尽管我的 ajax 调用返回了许多记录，但我在表中看不到任何结果。

这是返回数据的 PHP 代码。

```
$stmt->set_qry_str($sql);
  $retval = $stmt->exec();
  if($retval === false){
//      toLogger
  }else{
    $rows = array();
    while($stmt->fetchAssocNext()){   // This function returns associative array
      $rows[] = $stmt->get_resultRow();
    }
    print json_encode($rows);
  } 
```

这是响应的萤火虫快照。

[{"npi":"1","name":"Stan, XXX"},{"npi":"1212121212","name":"Stanley, YYY"},{"npi":"0123456789", “名称”：“谢弗斯科特 S”}]

# arrays - VBA代码，运行时错误9下标超出范围

> ID：15462134
> 
> 赞同：1
> 
> 时间：2013-03-17T14:54:02.333
> 
> 标签：arrays, vba

有人可以帮我理解为什么我的代码会出现运行时错误 9（下标超出范围）吗？

```
 Dim prod(1 To 6) As String

  prod(1) = "001"
  prod(2) = "002"
  prod(3) = "003"
  prod(4) = "004"
  prod(5) = "005"
  prod(6) = "006"

  Dim sum(1 To 6) As Double
  For i = 1 to 6 Step 1
    sum(i) = 0
  Next i

  Dim sumA(1 To 12) As Double
  For i = 1 To 12 Step 1
    sumA(i) = 0
  Next i

  Sheets("Punching").Activate
  LR = Cells(Rows.Count, "G").End(xlUp).Row

  For i = 4 To LR Step 1
    For j = 1 To UBound(prod) Step 1
      If Cells(i, 11) = prod(j) Then
        sum(j) = sum(j) + Cells(i, 18).Value
      Else
        sum(j) = sum(j)
      End If
    Next j
  Next i

  For k = 4 To LR Step 1
    For l = 1 To UBound(sumA) Step 2
      **If Cells(k, 11) = prod(l) Then**
        sumA(l) = sumA(l) + Cells(k, 19).Value
        sumA(l + 1) = sumA(l + 1) + Cells(k, 20).Value
      Else
        sum(l) = sum(l)
      End If
    Next l
  Next k 
```

错误线是星号线。是因为我不能重用产品数组吗？我不明白为什么我会收到此错误。任何帮助将不胜感激！

# c# - for循环和foreach的性能分析

> ID：15462145
> 
> 赞同：-3
> 
> 时间：2013-03-17T14:55:02.453
> 
> 标签：c#, performance, console-application

在这个线程中，我们讨论了`for loop`和的性能分析`foreach`。哪一个提供更好的性能- `for`or `foreach`？

这里有两个简单的方法：

```
 public static void TestFor()
{

    Stopwatch stopwatch = Stopwatch.StartNew();
    int[] myInterger = new int[1];
    int total = 0;
    for (int i = 0; i < myInterger.Length; i++)
    {
        total += myInterger[i];
    }
    stopwatch.Stop();
    Console.WriteLine("for loop Time Elapsed={0}", stopwatch.Elapsed);
}
public static void TestForeach()
{
    Stopwatch stopwatchForeach = Stopwatch.StartNew();
    int[] myInterger1 = new int[1];
    int totall = 0;
    foreach (int i in myInterger1)
    {
        totall += i;
    }

    stopwatchForeach.Stop();
    Console.WriteLine("foreach loop Time Elapsed={0}", stopwatchForeach.Elapsed);
} 
```

然后我运行上面的代码，结果是 foreach 循环 Time Elapsed=00:00:00.0000003，for loop Time Elapsed= 00:00:00.0001462。我认为我们需要高性能代码。我们将使用 foreach

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T15:15:02.263

我的决定不会基于像这样的一些简单的性能循环。我假设您经常使用循环/大型数据集。在我们开始讨论数十万次（至少）的迭代之前，您不会注意到差异。

1) 如果您正在编写具有潜在内存压力框架（XBOX、Windows Phone、Silverlight）的应用程序。我会使用 for 循环，因为 foreach 可以留下轻量级的“垃圾”，可以留下用于收集。几年前我为游戏进行 XBOX 开发时，一个常见的技巧是使用 for 循环初始化屏幕上显示的固定项目数组并将其保存在内存中，然后您不必担心垃圾收集/内存调整/garbage collection 等。如果您有这样的循环称为 60+ 次/秒（即游戏），这可能是一个问题

2）如果您有一个非常大的集合，您正在迭代并且性能是您的关键决策驱动因素（请记住，除非它们很大，否则这些数字不会引起注意），那么您可能需要考虑并行化您的代码。那么差异可能不在于 vs foreach，而是 Parallel.For vs Parallel.Foreach vs PLINQ（AsParallel() 方法）。你有不同的线程来解决这个问题。

编辑：在生产应用程序中，您很可能在循环中有某种逻辑，这将花费 >>> 时间来迭代一个项目。一旦将其添加到混合性能驱动程序中，通常会转移到不优化迭代的实际逻辑（编译器做得很好）。

# sed - 使用 sed 删除内联注释

> ID：15462146
> 
> 赞同：0
> 
> 时间：2013-03-17T14:55:15.857
> 
> 标签：sed, comments

我想用来`sed`从文本文件中删除所有评论。假设注释从“A”字符开始，到换行符结束。我想删除从“A”开始到行尾的所有内容，包括换行符。但是，我不想删除从“AA”开始的评论。

样本输入：

```
%% comment to do not delete
% comment to delete
% another comment to delte
%% comment to do not delete
Some text % comment to delete
and some more text %% comment to do not delete 
```

期望的输出：

```
%% comment to do not delete
%% comment to do not delete
Some text and some more text %% comment to do not delete 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T14:58:06.880

尝试这样做：

```
$ perl -pe '/^[^%]*%%/ && next; s/%.*\n//g' file.txt 
```

## 输出

```
%% comment to do not delete
%% comment to do not delete
Some text and some more text %% comment to do not delete 
```

## 笔记

如果您需要就地更改文件，请添加`-i`开关（在您的测试之后），所以：

```
$ perl -i -pe '/^[^%]*%%/ && next; s/%.*\n//g' file.txt 
```

* * *

感谢[审稿](https://stackoverflow.com/users/2073685/scrutinizer)人的贡献。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T18:38:24.383

perl 否定后向断言的完美应用：

```
perl -pe 's/(?<!%)%(?!%).*$//s' << END
%% comment to do not delete
% comment to delete
% another comment to delte
%% comment to do not delete
Some text % comment to delete
and some more text %% comment to do not delete
END 
```

输出

```
%% comment to do not delete
%% comment to do not delete
Some text and some more text %% comment to do not delete 
```

该`s`标志确保点将匹配换行符以根据要求实现“行连接”。

这种正则表达式匹配可能会给您带来问题，例如，如果您有类似的行

```
The date is `date +%Y%m%d` % this is a comment 
```

你最终会得到

```
The date is `date + 
```

如果您的实际评论*需要*空格，您可以使用这个正则表达式：

```
(^| )%( .*|)$ 
```

意思是

*   行首或空格
*   其次是评论字符
*   后跟（一个空格和零个或多个字符）或什么都没有
*   其次是行尾

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-17T15:14:22.020

也许是这样：

**第二次更新**

```
$ sed -e '/^%[^%]/d' -e 's/ %[^%]*$/@/' -e :a -e '/@/N; s/\n//; ta' input | sed 's/@/ /g'
%% comment to do not delete
%% comment to do not delete
Some text and some more text %% comment to do not delete 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-17T16:30:53.840

*编辑*添加了更改，使其在文件的最后一行运行良好...尝试：

```
sed -e :a -e '/^[^%]*%%/n; /%/{s/%.*//; N; s/\n//;};ta' file 
```

输入测试：

```
%% comment to do not delete
% comment to delete
% another comment to delte
%
%% comment to do not delete
Some text % comment to delete
Some more text % more comment to delete
and some more text %% comment to do not delete
fdgdfgdgdgd %
gfdgd
some text followed by %% comment to not delete that contains a % somewhere
some text followed by % comment to delete that contains %% somewhere
hello there 
```

输出：

```
%% comment to do not delete
%% comment to do not delete
Some text Some more text and some more text %% comment to do not delete
fdgdfgdgdgd gfdgd
some text followed by %% comment to not delete that contains a % somewhere
some text followed by hello there 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-17T17:41:33.537

## 在 Sed 中使用表达式顺序

使用 sed，指令的顺序可能很重要。例如：

```
$ sed -ne '/^% /d; /[^%]%.*/ {s/%.*//; n}; p' /tmp/corpus 
%% comment to do not delete
%% comment to do not delete
and some more text %% comment to do not delete 
```

在此示例中，sed 脚本按以下顺序执行其任务：

1.  抑制输出。
2.  删除以单个百分号开头的行。
3.  使用替换删除从单个百分比到行尾的所有字符，然后将下一行附加到模式空间而不使用换行符。
4.  打印图案空间。

此脚本适用于您在问题中提供的语料库。不保证可以在不修改的情况下与任何其他语料库一起使用，并且如果您附加到模式空间的行包含注释字符，则明确不起作用。

# angularjs - 使用angularjs时如何设置页眉和页脚？

> ID：15462152
> 
> 赞同：0
> 
> 时间：2013-03-17T14:55:59.007
> 
> 标签：angularjs, footer

使用angularjs时如何在html页面上设置页眉和页脚？它们是一种让 Angular 知道这些是页眉和页脚并将它们定位在页面顶部和底部的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T15:00:42.430

在主布局 (index.html) 中定义页眉和页脚 html 或使用 ng-include 包含它：

```
<div ng-include="'header.html'"></div>
<div ng-view></div>
<div ng-include="'footer.html'"></div> 
```

定位由 CSS 决定。

# matlab - 在 MATLAB 中将数据附加到 mat 文件

> ID：15462154
> 
> 赞同：1
> 
> 时间：2013-03-17T14:56:03.577
> 
> 标签：matlab

我有一个包含一些数据的 mat 文件，我想在调用函数时在文件末尾添加其他数据。我该怎么做？通过 save -append 我现有的数据被覆盖。但对我来说，数据不应该被覆盖。尽早回复。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T15:01:40.820

您没有提供有关您存储的数据类型的信息，但我怀疑您可能正在尝试将值附加到使用`-append`;存储在文件中的数组中。但是，`-append`只会将*新变量*添加到文件中。如果您保存具有相同名称的变量，它将覆盖它。相反，只需手动进行附加：

我假设我们谈论的是 1xn 向量，您可以根据需要调整连接步骤。

```
x = load('myfile');
x = [ x newX ];
save('myfile', 'x'); 
```

# vb.net - 使用 VB.NET 浏览 Excel 中的列 - 努力查看过去的列“AB”等

> ID：15462156
> 
> 赞同：0
> 
> 时间：2013-03-17T14:56:26.383
> 
> 标签：vb.net, string, excel

刚刚对我的以下代码有疑问：

```
 For Each c In "ABCDEFGHIJKLMNOPQRSTUVWXYZ"
        If Not String.IsNullOrWhiteSpace(exsheet.Range((c & "5")).Value.ToString) Then
            pointer = pointer + 1
            XRisks(pointer) = exsheet.Range(c & "6").Value.ToString

        End If
    Next 
```

本质上，代码会查看 excel 电子表格（称为 exsheet）中每一列的第 5 行。如果该单元格中有东西，它会将其保存到数组 (XRisks) 中。

但是，我的 excel 电子表格经过 Z 并在列标题中继续 AA AB AC AD 等，这意味着，使用我目前拥有的代码，它停止读取列 Z 之后的列。

我尝试将 & "AA" & "AB" & "AC" 等添加到我的字母字符串的末尾，但所做的一切都是再次保存 A，然后再保存 A，然后再保存 A，然后再保存 B，因为它只是在查看每个我的字符串中的字符。

希望我已经描述得够多了。提前致谢！

乔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T15:43:51.190

您可以简单地使用`.Cells`而不是`.Range`使用索引而不是字母。

```
 For i As Integer = 1 To 50
        If Not String.IsNullOrWhiteSpace(exsheet.Cells(5, i).Value.ToString) Then
        ...
    Next 
```

要遍历所有列，您*可以*尝试 usedRange。然而，这可能是不安全的，因为如果第一列是空的，usedRange 不一定从第一列开始（也就是说，对于大多数类似表格的表格来说，它是足够安全的）。

```
 For i As Integer = 1 To exsheet.UsedRange.Columns.Count
        If Not String.IsNullOrWhiteSpace(exsheet.Cells(5, i).Value.ToString) Then
        ...
    Next 
```

# magento - 哪一行告诉集合有一些从数据库表中捕获的数据？

> ID：15462158
> 
> 赞同：0
> 
> 时间：2013-03-17T14:56:38.427
> 
> 标签：magento

这是我使用 getCollection() 得到的所有我能看到的是模型、表节点、与数据库的连接等。但是它在哪里显示数据在这里。这样我就应该知道在循环之前返回了一些数据。谢谢！

```
object(Gagan_Faq_Model_Mysql4_Faq_Collection)[616]

 protected '_model' => string 'faq/faq' (length=7)
  protected '_resourceModel' => string 'faq/faq' (length=7)
  protected '_resource' => 
    object(Gagan_Faq_Model_Mysql4_Faq)[617]
      protected '_resources' => 
        object(Mage_Core_Model_Resource)[48]
          protected '_connectionTypes' => 
            array
              ...
          protected '_connections' => 
            array
              ...
          protected '_skippedConnections' => 
            array
              ...
          protected '_entities' => 
            array
              ...
          protected '_mappedTableNames' => null
      protected '_resourcePrefix' => string 'faq' (length=3)
      protected '_connections' => 
        array
          'write' => 
            object(Varien_Db_Adapter_Pdo_Mysql)[139]
              ...
          'read' => 
            object(Varien_Db_Adapter_Pdo_Mysql)[139]
              ...
      protected '_resourceModel' => string 'faq' (length=3)
      protected '_tables' => 
        array
          'dinkchika' => string 'gagan_faq' (length=9)
      protected '_mainTable' => string 'dinkchika' (length=9)
      protected '_idFieldName' => string 'faq_id' (length=6)
      protected '_isPkAutoIncrement' => boolean true
      protected '_useIsObjectNew' => boolean false
      protected '_fieldsForUpdate' => 
        array
          empty
      protected '_mainTableFields' => null
      protected '_uniqueFields' => null
      protected '_serializableFields' => 
        array
          empty
  protected '_fieldsToSelect' => null
  protected '_initialFieldsToSelect' => null
  protected '_fieldsToSelectChanged' => boolean false
  protected '_joinedTables' => 
    array
      empty
  protected '_mainTable' => string 'gagan_faq' (length=9)
  protected '_resetItemsDataChanged' => boolean false
  protected '_eventPrefix' => string '' (length=0)
  protected '_eventObject' => string '' (length=0)
  protected '_useAnalyticFunction' => boolean false
  protected '_conn' => 
    object(Varien_Db_Adapter_Pdo_Mysql)[139]
      protected '_defaultStmtClass' => string 'Varien_Db_Statement_Pdo_Mysql' (length=29)
      protected '_transactionLevel' => int 0
      protected '_connectionFlagsSet' => boolean true
      protected '_ddlCache' => 
        array
          1 => 
            array
              ...
          3 => 
            array
              ...
      protected '_bindParams' => 
        array
          empty
      protected '_bindIncrement' => int 0
      protected '_debug' => boolean false
      protected '_logQueryTime' => float 0.05
      protected '_logAllQueries' => boolean false
      protected '_logCallStack' => boolean false
      protected '_debugFile' => string 'var/debug/pdo_mysql.log' (length=23)
      protected '_debugIoAdapter' => null
      protected '_debugTimer' => int 0
      protected '_cacheAdapter' => 
        object(Varien_Cache_Core)[20]
          protected '_backend' => 
            object(Zend_Cache_Backend_File)[17]
              ...
          protected '_options' => 
            array
              ...
          protected '_specificOptions' => 
            array
              ...
          private '_lastId' (Zend_Cache_Core) => string 'bac_CONFIGURATION_FILES_ACCESS_LEVEL_VERIFICATION' (length=49)
          protected '_extendedBackend' => boolean true
          protected '_backendCapabilities' => 
            array
              ...
      protected '_isDdlCacheAllowed' => boolean true
      protected '_ddlColumnTypes' => 
        array
          'boolean' => string 'bool' (length=4)
          'smallint' => string 'smallint' (length=8)
          'integer' => string 'int' (length=3)
          'bigint' => string 'bigint' (length=6)
          'float' => string 'float' (length=5)
          'decimal' => string 'decimal' (length=7)
          'numeric' => string 'decimal' (length=7)
          'date' => string 'date' (length=4)
          'timestamp' => string 'timestamp' (length=9)
          'datetime' => string 'datetime' (length=8)
          'text' => string 'text' (length=4)
          'blob' => string 'blob' (length=4)
          'varbinary' => string 'blob' (length=4)
      protected '_ddlRoutines' => 
        array
          0 => string 'alt' (length=3)
          1 => string 'cre' (length=3)
          2 => string 'ren' (length=3)
          3 => string 'dro' (length=3)
          4 => string 'tru' (length=3)
      protected '_intervalUnits' => 
        array
          'YEARS' => string 'YEAR' (length=4)
          'MONTHS' => string 'MONTH' (length=5)
          'DAYS' => string 'DAY' (length=3)
          'HOURS' => string 'HOUR' (length=4)
          'MINUTES' => string 'MINUTE' (length=6)
          'SECOND' => string 'SECOND' (length=6)
      protected '_queryHook' => 
        array
          'object' => 
            object(Mage_Core_Model_Resource_Setup)[160]
              ...
          'method' => string 'callbackQueryHook' (length=17)
      protected '_pdoType' => string 'mysql' (length=5)
      protected '_numericDataTypes' => 
        array
          0 => int 0
          1 => int 1
          2 => int 2
          'INT' => int 0
          'INTEGER' => int 0
          'MEDIUMINT' => int 0
          'SMALLINT' => int 0
          'TINYINT' => int 0
          'BIGINT' => int 1
          'SERIAL' => int 1
          'DEC' => int 2
          'DECIMAL' => int 2
          'DOUBLE' => int 2
          'DOUBLE PRECISION' => int 2
          'FIXED' => int 2
          'FLOAT' => int 2
      protected '_config' => 
        array
          'host' => string 'localhost' (length=9)
          'username' => string 'root' (length=4)
          'password' => string '' (length=0)
          'dbname' => string 'm1' (length=2)
          'initStatements' => string 'SET NAMES utf8' (length=14)
          'model' => string 'mysql4' (length=6)
          'type' => string 'pdo_mysql' (length=9)
          'pdoType' => string '' (length=0)
          'active' => string '1' (length=1)
          'charset' => null
          'persistent' => boolean false
          'options' => 
            array
              ...
          'driver_options' => 
            array
              ...
      protected '_fetchMode' => int 2
      protected '_profiler' => 
        object(Zend_Db_Profiler)[73]
          protected '_queryProfiles' => 
            array
              ...
          protected '_enabled' => boolean false
          protected '_filterElapsedSecs' => null
          protected '_filterTypes' => null
      protected '_defaultProfilerClass' => string 'Zend_Db_Profiler' (length=16)
      protected '_connection' => 
        object(PDO)[67]
      protected '_caseFolding' => int 0
      protected '_autoQuoteIdentifiers' => boolean true
      protected '_allowSerialization' => boolean true
      protected '_autoReconnectOnUnserialize' => boolean false
  protected '_select' => 
    object(Varien_Db_Select)[507]
      protected '_bind' => 
        array
          empty
      protected '_adapter' => 
        object(Varien_Db_Adapter_Pdo_Mysql)[139]
          protected '_defaultStmtClass' => string 'Varien_Db_Statement_Pdo_Mysql' (length=29)
          protected '_transactionLevel' => int 0
          protected '_connectionFlagsSet' => boolean true
          protected '_ddlCache' => 
            array
              ...
          protected '_bindParams' => 
            array
              ...
          protected '_bindIncrement' => int 0
          protected '_debug' => boolean false
          protected '_logQueryTime' => float 0.05
          protected '_logAllQueries' => boolean false
          protected '_logCallStack' => boolean false
          protected '_debugFile' => string 'var/debug/pdo_mysql.log' (length=23)
          protected '_debugIoAdapter' => null
          protected '_debugTimer' => int 0
          protected '_cacheAdapter' => 
            object(Varien_Cache_Core)[20]
              ...
          protected '_isDdlCacheAllowed' => boolean true
          protected '_ddlColumnTypes' => 
            array
              ...
          protected '_ddlRoutines' => 
            array
              ...
          protected '_intervalUnits' => 
            array
              ...
          protected '_queryHook' => 
            array
              ...
          protected '_pdoType' => string 'mysql' (length=5)
          protected '_numericDataTypes' => 
            array
              ...
          protected '_config' => 
            array
              ...
          protected '_fetchMode' => int 2
          protected '_profiler' => 
            object(Zend_Db_Profiler)[73]
              ...
          protected '_defaultProfilerClass' => string 'Zend_Db_Profiler' (length=16)
          protected '_connection' => 
            object(PDO)[67]
              ...
          protected '_caseFolding' => int 0
          protected '_autoQuoteIdentifiers' => boolean true
          protected '_allowSerialization' => boolean true
          protected '_autoReconnectOnUnserialize' => boolean false
      protected '_parts' => 
        array
          'straightjoin' => boolean false
          'distinct' => boolean false
          'columns' => 
            array
              ...
          'union' => 
            array
              ...
          'from' => 
            array
              ...
          'where' => 
            array
              ...
          'group' => 
            array
              ...
          'having' => 
            array
              ...
          'order' => 
            array
              ...
          'limitcount' => null
          'limitoffset' => null
          'forupdate' => boolean false
      protected '_tableCols' => 
        array
          empty
  protected '_cacheConf' => null
  protected '_idFieldName' => null
  protected '_bindParams' => 
    array
      empty
  protected '_data' => null
  protected '_map' => null
  protected '_fetchStmt' => null
  protected '_isOrdersRendered' => boolean false
  protected '_items' => 
    array
      empty
  protected '_itemObjectClass' => string 'Gagan_Faq_Model_Faq' (length=19)
  protected '_orders' => 
    array
      empty
  protected '_filters' => 
    array
      empty
  protected '_isFiltersRendered' => boolean false
  protected '_curPage' => int 1
  protected '_pageSize' => boolean false
  protected '_totalRecords' => null
  protected '_isCollectionLoaded' => null
  protected '_cacheKey' => null
  protected '_cacheTags' => 
    array
      empty
  protected '_cacheLifetime' => int 86400
  protected '_flags' => 
    array
      empty 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T16:42:14.640

1.  Magento 集合不会加载**，直到**您遍历它们，或者直到您调用`load`. 您无需担心循环空集合。如果没有返回任何内容，PHP 将跳过循环而不会出错

2.  加载的集合将有一个填充的`$_items`数组

3.  集合模型有一个`isLoaded`方法，允许您检查它们是否已加载

Re: 上面第三条

```
$products = Mage::getModel('some/model')->getCollection();
if($products->isLoaded())
{
    //,,,
}
else
{
    //,,,
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T19:15:16.757

$collection = Mage::getResourceModel('catalog/product_collection');

$count = $collection->getSize(); Above is standard way magento handles collection. I have posted for product but for other collections too it uses a different model but almost same function calls.

Your code looks incomplete.

# java - 覆盖 jdbc 第三方 jar 中的方法

> ID：15462160
> 
> 赞同：0
> 
> 时间：2013-03-17T14:56:50.390
> 
> 标签：java, reflection

我想通过 ebean 访问我的数据库。我的数据库是 Gupta SQLBase 11.5（不知道你不知道）。问题是古普塔的人很懒惰。所以他们对 java.sql.DatabaseMetaData.getDatabaseMajorVersion 的实现抛出了一个 SqlException: unsupported method。是否可以在我的应用程序中覆盖该方法以使其仅返回 11？我已经尝试使用这种方法实现我自己的 jdbc.gupta.sqlbase.SqlbaseDatabaseMetaData 类，该方法确实有效，但我无法实现接口所需的所有方法。这就是为什么我通过 ebean 所做的所有选择都返回 null。所以我只需要覆盖getDatabaseMajorVersion方法。恕我直言，没有意见来实现一个仅扩展 gupta 类的子类，因为我的课程永远不会被录取。

感谢您提供的每一个建议。最好的问候， 马可

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T11:08:47.583

您可以使用[委托模式](http://en.wikipedia.org/wiki/Delegation_pattern)或[`Proxy`](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/reflect/Proxy.html)（反射）编写包装器。您将需要拦截对“覆盖”方法的任何调用，并将其他方法委托给底层对象。

为方便起见，您还可以为`Connection`和 override编写一个包装器`Connection.getMetaData()`，它应该返回您的包装器的一个实例。

如果你想花哨，你也可以注册一个[`Driver`](http://docs.oracle.com/javase/6/docs/api/java/sql/Driver.html)重写连接 URL 并返回你的`Connection`.

# windows - Visual Studio Express 2012 - Windows Service VB.net - 在计时器上访问 URL

> ID：15462161
> 
> 赞同：1
> 
> 时间：2013-03-17T14:57:03.720
> 
> 标签：windows, vb.net, http, service, webrequest

我正在尝试使用 Visual Studio Express 2012 在 VB.Net 中创建 Windows 服务。基本上我想要的只是让该服务每 N 分钟向预先确定的 URL 发送一个 HTTP GET 请求。有点像心跳，所以我们知道服务器正在运行并且在线。

我已经创建了 Windows 服务器，将项目构建为 .EXE，然后使用 InstallUtil 将其安装为服务。这似乎有效，我按照这里的教程：http: [//www.dotheweb.net/2009/11/creating-services-with-vb-express/](http://www.dotheweb.net/2009/11/creating-services-with-vb-express/)

我从教程中删除了一些写入 Windows 系统日志（或者我认为它创建了一个新日志）的代码，因为由于某种原因这不适用于我的 Visual Studio 版本。

我正在使用以下代码发送 HTTP 请求：

```
Dim url As String = "http://someURL.com/test.php"
Dim request As WebRequest = WebRequest.Create(url)
request.Method = "GET"
Dim response As WebResponse = request.GetResponse() 
```

PHP 文件在被访问时只是向我发送一封电子邮件。

当我从 Visual Studio 中运行项目时，代码运行良好（如果我忽略了通知我不应像这样运行 Windows 服务项目并让它继续运行的消息，我确实开始收到电子邮件）。

但是，当我启动 Windows 服务本身时，我没有收到任何电子邮件，但是我也没有在任何地方出现任何错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T16:04:31.587

我的猜测是您正在使用 System.Windows.Forms.Timer 。如果没有 System.Windows.Forms.Form ，该计时器将无法工作。在 Windows 服务中使用的计时器是 System.Timers.Timer

在你的服务类中声明它

```
 Private WithEvents m_timer As System.Timers.Timer 
```

在 OnStart 方法中启动它：

```
 m_timer = New System.Timers.Timer(300000)     ' 5 minutes
    m_timer.Enabled = True 
```

并处理定时器的Elapsed事件

```
Private Sub m_timer_Elapsed(ByVal sender As Object, ByVal e As System.Timers.ElapsedEventArgs) Handles m_timer.Elapsed

  m_timer.Enabled = False

  Dim url As String = "http://someURL.com/test.php"
  Dim request As WebRequest = WebRequest.Create(url)
  request.Method = "GET"
  Dim response As WebResponse = request.GetResponse()

  m_timer.Enabled = True

End Sub 
```

不要忘记在 OnStop 方法中停止计时器。

# php - 如何使php仅在单击时才将表单的值相加？

> ID：15462162
> 
> 赞同：0
> 
> 时间：2013-03-17T14:57:04.403
> 
> 标签：php, html

我在 html 中有一个表单，当单击某些字段时，我希望它添加 php 部分中的值，所以我认为如果我将 php 部分放在 html 的值区域中，那么它会添加它，但它会在单击时将它们全部添加，但不会添加特定的，请帮助：

```
 <p>
    <input type="checkbox" name="one" value= <?php $number = 2.39; ?> 
    <label for="one">Four 100-watt light bulbs for $2.39</label>
  <p> 
```

```
 $total = $number + $numberone + $numbertwo + $numberthree;

 echo "Total cost is " .$total; 
 echo $card;
?>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T15:02:57.760

首先，您需要在表单中回显数字值，而不仅仅是分配变量，那里不会呈现任何内容。另外，我发现如果您要为总计添加数字，则以一种可以将值拉回数组中的方式命名它们会更容易

```
name="one" 
```

会成为

```
name="price[]" 
```

或类似的东西。

```
<p>
  <input type="checkbox" name="price[]" value= <?php echo('2.39'); ?> 
  <label for="one">Four 100-watt light bulbs for $2.39</label>
</p> 
```

然后在服务器端，将总数相加

```
$total = 0;
foreach($_POST['price'] AS $value){
  $total += $value;
} 
```

你会想要做一些输入清理，但这个例子应该让你继续。

此示例仅在表单提交后在服务器端工作，如果您想在页面上实时添加它们，您必须使用 ajax 来添加值。

# linux - 获取某个进程的最后启动实例的 pid

> ID：15462163
> 
> 赞同：1
> 
> 时间：2013-03-17T14:57:04.593
> 
> 标签：linux, bash

我有几个正在运行的某个进程的实例，我想确定最后启动的那个进程的进程 ID。到目前为止，我来到了这段代码：

```
ps -aef | grep myProcess | grep -v grep | awk -F" " '{print $2}' |
while read line; do
  echo $line
done 
```

这让我得到了 myProcess 的所有进程 ID。不知何故，我现在需要比较这个 pid 的运行时间并找出运行时间最短的那个。但是我不知道该怎么做...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-17T15:05:45.567

一个更简单的方法是使用`pgrep`它的`-n, --newest`开关。

> 仅选择最新（最近开始）的匹配进程。

或者，如果您不想使用`pgrep`，您可以使用`ps`并按开始时间排序：

```
ps -ef kbsdstart 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T15:06:46.460

使用[pgrep](http://linux.die.net/man/1/pgrep)。它有一个 `-n`（最新的）选项。所以试试

```
pgrep -n myProcess 
```

# c# - 静态构造函数和实例构造函数的调用

> ID：15462164
> 
> 赞同：6
> 
> 时间：2013-03-17T14:57:06.340
> 
> 标签：c#

据我所知，首先调用父类的构造函数，然后调用子类。但是为什么在静态构造函数的情况下，它首先从派生类执行，然后是子类？

```
namespace ConsoleApplication1

    {

 class Program

    {

        static void Main(string[] args)
        {
            Child t = new Child();
        }
    }

    class Parent
    {
        public  Parent()
        {
            Console.WriteLine("Parent Instance Constructor");
            Console.ReadKey();
        }

        static Parent()
        {
            Console.WriteLine("Parent Static Constructor");
            Console.ReadKey();
        }
    }
    class Child : Parent
    {
        public Child()
        {
            Console.WriteLine("Child Instance Constructor");
            Console.ReadKey();
        }

        static Child()
        {
            Console.WriteLine("Child Static Constructor");
            Console.ReadKey();
        }
    }
} 
```

**输出：**

> 子静态构造函数
> 
> 父静态构造函数
> 
> 父实例构造函数
> 
> 子实例构造函数

现在根据**Jeppe Stig Nielsen**的建议，当我在构造函数中初始化静态字段时，它按以下顺序运行

**输出**

> 父静态构造函数
> 
> 子静态构造函数
> 
> 父实例构造函数
> 
> 子实例构造函数

```
class XyzParent
{
    protected static int FieldOne;
    protected int FieldTwo;

    static XyzParent()
    {
        // !  
        FieldOne = 1;
        Console.WriteLine("parent static");
    }
    internal XyzParent()
    {
        // !  
        FieldOne = 10;
        // !  
        FieldTwo = 20;
        Console.WriteLine("parent instance");
    }
}
class XyzChild : XyzParent
{
    static XyzChild()
    {
        // !  
        FieldOne = 100;
        Console.WriteLine("child static");
    }
    internal XyzChild()
    {
        // !  
        FieldOne = 1000;
        // !  
        FieldTwo = 2000;
        Console.WriteLine("child instance");
    }
} 
```

为什么会有这种矛盾的行为？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-17T20:16:44.700

首先，行为根本不矛盾；这一切都符合规则。你只是不知道规则是什么。

您应该阅读我关于实例构造函数的所有两部分系列文章和关于静态构造函数语义的四部分系列文章。他们从这里开始：

[http://blogs.msdn.com/b/ericlippert/archive/2008/02/15/why-do-initializers-run-in-the-opposite-order-as-constructors-part-one.aspx](http://blogs.msdn.com/b/ericlippert/archive/2008/02/15/why-do-initializers-run-in-the-opposite-order-as-constructors-part-one.aspx)

和这里：

[http://ericlippert.com/2013/02/06/static-constructors-part-one/](http://ericlippert.com/2013/02/06/static-constructors-part-one/)

分别。

这些应该清楚地回答你的问题，但如果不是 100% 清楚，让我总结一下。相关规则如下：

*   **规则一**：静态构造函数在访问任何静态字段之前、在执行任何静态方法之前以及在执行任何实例构造函数之前运行。
*   **规则二**：派生类实例构造函数在运行派生类实例构造函数体之前调用基类实例构造函数。

那么当你执行时会发生什么`new Child()`？

*   规则一适用。我们即将调用 Child 的实例构造函数，所以必须先调用 Child 的静态构造函数。所以它首先运行。
*   Child的静态构造函数返回后，Child的实例构造函数运行。规则二适用：Child 实例构造函数在运行其主体之前所做的第一件事是运行 Parent 的实例构造函数。
*   规则一再次适用。我们即将调用Parent的实例构造函数，所以必须先调用Parent的静态构造函数。所以它运行。
*   Parent的静态构造函数返回后，Parent的实例构造函数运行。规则二适用：它调用 object 的实例构造函数，它没有做任何有趣的事情，然后运行 ​​Parent 的实例构造函数的主体。
*   控制返回到 Child 的实例构造函数，并且它的主体运行。

所以你去; 顺序是 Child 静态构造函数，然后是 Parent 静态构造函数，然后是 Parent 主体，然后是 Child 主体。

现在让我们看看你的第二个例子。当你说的时候会发生什么`new XyzChild`？

*   规则一适用。我们即将调用XyzChild的实例构造函数，所以我们先调用XyzChild的静态构造函数。它的身体开始执行，然后……
*   ...规则一再次适用。我们即将访问 XyzParent 的一个静态字段，所以必须执行 XyzParent 的静态构造函数。
*   XyzParent 的静态构造函数执行。它访问一个字段，但静态构造函数已经在该线程上运行，因此它不会再次递归触发静态构造函数。它打印出它在父级中。
*   控制权返回给子对象的静态构造函数，该构造函数打印出它在子对象中。
*   现在孩子的实例构造函数可以运行了。规则二适用：XyzParent 的实例构造函数首先运行。
*   规则一适用，但 XyzParent 的静态构造函数已经运行，因此被跳过。
*   XyzParent 的实例构造函数的主体执行并将控制权返回给 XyzChild 的静态构造函数。
*   XyzChild 的实例构造函数的主体运行。

所以你去。没有任何不一致之处；正确应用了这两个规则。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-17T14:58:36.043

`Static`构造函数总是在非静态构造函数之前执行。第一次访问类时调用静态构造函数。

*   [静态构造函数](http://msdn.microsoft.com/en-us/library/k9x6w0hc.aspx)

来自[MSDN 文档](http://msdn.microsoft.com/en-us/library/k9x6w0hc.aspx)，

*   静态构造函数不采用访问修饰符或具有参数。
*   在创建第一个实例或引用任何静态成员之前，会自动调用静态构造函数来初始化类。
*   不能直接调用静态构造函数。用户无法控制何时在程序中执行静态构造函数。
*   静态构造函数的典型用途是当类使用日志文件并且构造函数用于将条目写入该文件时。
*   在为非托管代码创建包装类时，静态构造函数也很有用，此时构造函数可以调用 LoadLibrary 方法。
*   如果静态构造函数抛出异常，运行时将不会再次调用它，并且该类型将在程序运行的应用程序域的生命周期内保持未初始化状态。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-17T15:23:58.347

在您的情况下，运行静态构造函数的顺序是未定义的（我认为）。唯一可以保证的是它们将在创建实例之前运行。

我将您的代码更改为：

```
 class XyzParent
    {
        protected static int FieldOne;
        protected int FieldTwo;

        static XyzParent()
        {
            FieldOne = 1;
            Console.WriteLine("parent static");
        }
        internal XyzParent()
        {
            FieldOne = 10;
            FieldTwo = 20;
            Console.WriteLine("parent instance");
        }
    }
    class XyzChild : XyzParent
    {
        static XyzChild()
        {
            FieldOne = 100;
            Console.WriteLine("child static");
        }
        internal XyzChild()
        {
            FieldOne = 1000;
            FieldTwo = 2000;
            Console.WriteLine("child instance");
        }
    } 
```

现在更重要的是它们运行的​​顺序，因为它们写入同一个字段。使用我的代码版本，说`new XyzChild();`会导致这个输出：

```
parent static
child static
parent instance
child instance 
```

编辑：Eric Lippert 的回答给出了更准确的解释。上面的代码只在静态构造函数`WriteLine`的*末尾执行。*`WriteLine`在静态构造函数的*开头*添加附加，可以看到`XyzParent`静态构造函数在静态构造函数执行的“中间”运行`XyzChild`。

# java - Java Socket编程客户端服务器通信问题

> ID：15462165
> 
> 赞同：0
> 
> 时间：2013-03-17T14:57:09.703
> 
> 标签：java, sockets

我有 3 个 java 类。堆栈 - 实现堆栈。Stackserver - 实现基于用户操作创建 Stack 对象并返回结果的服务器 StackClient - 实现发送操作请求并从服务器接收响应的客户端。

动作是推送、弹出、显示和退出。

当我进入操作时，它总是说无效操作。任何人都可以找到程序中的错误吗？

堆栈类

```
public class Stack
{
    private int maxSize;
    private int[] stackArray;
private int top,i;

public Stack(int s)
{
        maxSize = s;
        stackArray = new int[maxSize];
        top = -1;
}

public void push(int j) 
{
        stackArray[++top] = j;
}

    public String display()
    {
        i=top;
        String s="";
        while(i>=0)
        {
            s=s+" "+stackArray[i--];
        }
        return s;
    }    

public int pop()
{
        return stackArray[top--];
}

public int peek()
{
        return stackArray[top];
}

public boolean isEmpty()
{
        return (top == -1);
}

public boolean isFull()
{
        return (top == maxSize - 1);
}   
} 
```

StackServer 类

```
import java.net.*;
import java.io.*;

public class StackServer
{

ServerSocket server;
Socket link;
PrintWriter out;
BufferedReader in;

public void run()
{
    try     
    {

    System.out.println("Creating Server Socket.");
        server = new ServerSocket(4000);
    System.out.println("Successfully created Server Socket.");

    Socket link;
    System.out.println("Waiting For Connection.");
    link = server.accept();
    System.out.println("Connection received from " + link.getInetAddress().getHostName());

    out = new PrintWriter(link.getOutputStream(),true);
    in = new BufferedReader(new InputStreamReader(link.getInputStream()));          

    out.println("Eneter Stack Size.");
    int size = Integer.parseInt((in.readLine()).trim());
    Stack stack = new Stack(size);

    while(true)
    {   
        String action="";
        int n;

        out.println("Eneter Stack Operation.");
        action = in.readLine();

        if(action == "push")
        {
            if(stack.isFull())
            {
            out.println("Stack Full. What next?");
            }
            else
            {
            out.println("Enter element: ");
            n = Integer.parseInt((in.readLine()).trim());
            stack.push(n);
            out.println("Pushed item. What next?");
            }

        }
        else if(action == "pop")
        {
            if(stack.isFull())
            {
            out.println("Stack Full. What next?");
            }
            else
            {
                n = stack.pop();
            out.println(n);
            out.println("Pushed item. What next?");
            }
        }
        else if(action == "display")
        {
            out.println(stack.display());
        }
        else if(action == "exit")
        {
            link.close();
            break;
        }
        else
        {
            out.println("Invalid Operation");
        }
        }
            }
        catch(Exception ex)
        {
        System.out.println(ex);
        }
        }

    public static void main(String [] args)
    {
    StackServer s = new StackServer();
    s.run();}
    } 
```

StackClient 类

```
import java.net.*;
import java.io.*;

public class StackClient
{
public static void main(String [] args)
{
    try     
    {
            Socket client;
        System.out.println("Creating Client Socket.");
        client = new Socket("localhost",4000);
    System.out.println("Successfully created Client Socket.");

    BufferedReader read = new BufferedReader(new InputStreamReader(System.in));
    BufferedReader in = new BufferedReader(new InputStreamReader(client.getInputStream()));
        PrintWriter out = new PrintWriter(client.getOutputStream(),true);
        String action ="";
        String size,s;

    System.out.println(in.readLine());
    size = read.readLine();
        out.println(size);

    while(true)
    {

        System.out.println(in.readLine());
        action = read.readLine();
        out.println(action);

        if(action.equals("push"))
        {
                System.out.println(in.readLine());
        s=read.readLine();
        System.out.println(in.readLine());  
        }
        else if(action == "pop")
        {
        System.out.println(in.readLine());
        }
        else if(action == "display")
        {
        System.out.println(in.readLine());  
            }
            else if(action == "exit")
        {
                client.close();
        break;
        }
        else
        {
        out.println("Invalid Operation from Client");
        }
    }
    }
    catch(Exception ex)
    {
    System.out.println(ex);
    }
    }
    }   
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-17T14:59:32.180

使用 String.equals() 比较字符串，而不是`==`：

```
if(action == "push")
...
else if(action == "pop") 
```

`==`如果两个对象是同一个实例，则返回 true。您可以有两个具有相同值的不同 String 实例。

# javascript - 切换一个和关闭 - JavaScript - Web 音频 API

> ID：15462167
> 
> 赞同：2
> 
> 时间：2013-03-17T14:57:16.450
> 
> 标签：javascript, audio, web-audio-api

我是一名音频工程师，刚刚开始使用 JavaScript 和 HTML5，特别是 WEB 音频 API。

我有这个连接到目的地（输出）的振荡器代码。这是代码

我想要一个按钮来连接和断开振荡器到目的地我设法让它启动但我无法断开它。

```
<html>
<head>
    <script>
        //creating the context
        context = new webkitAudioContext(); //allways the first code for audio API
        function osc1(frequency){ // Creating a function that has an oscillator going to gainNode and then going to the destination

            //creating AudioNodes and AudioParams

            //creating OscillatorNode
            var oscillator = context.createOscillator(); //creating Node's as Variables
            oscillator.type = 0; //0 is a sine wave
            oscillator.noteOn(0); // turning on the oscillator
            oscillator.frequency.value = frequency;// telling that frequency in () of the function equals to what

            //creating GainNode
            var gain = context.createGainNode(); // creating the Gain node
            gain.gain.value = 1; // setting up the value for gain node

            //Making the connections
            oscillator.connect(gain); // connecting oscillator to gain
            gain.connect(context.destination); // connecting gain to destination (speakers)
        }; // now we have a function called osc1(we can put frequency in here) then we can re call

    </script>
</head>

<body>
    <input type="button" value="on"  onClick="osc1(500);" />

</body>

</html> 
```

我知道断开它的代码是`oscillator.disconnect();`，但我不知道如何执行它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T16:34:12.723

我也在做这个。

您执行振荡器.disconnect(0)，其中零表示输出编号。

我认为这意味着如果您将振荡器分别连接到增益节点和滤波器节点，增益将为断开（0）而滤波器将断开（1）。

我认为跟踪什么输出是我们的工作，因为看起来不像是内置的方式。

我希望规范发生变化，以便我们可以将 disconnect() 传递给我们想要断开连接的实际节点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T20:37:54.287

已经提到过，但是您需要公开`oscillator`变量（可能在全局范围内），以便您的 off 函数可以断开它（确保您没有`oscillator`在处理程序中重新声明变量`onclick`）。

这是一个工作示例：http: [//jsbin.com/iwetiy/1/edit](http://jsbin.com/iwetiy/1/edit)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T01:13:38.497

也许您想在函数外部声明振荡器变量：

```
var context = new webkitAudioContext();
var oscillator = context.createOscillator();
function osc1(frequency){
  var button = document.getElementsByTagName('input')[0];
  if (button.value === 'off') {
    button.value = 'on';
    oscillator.disconnect();
  } else {
    button.value = 'off';
    // same as your original code (connect, noteOn...) 
```

# android - 在 TextView 的集合中显示不同的语言。

> ID：15462171
> 
> 赞同：3
> 
> 时间：2013-03-17T14:57:48.240
> 
> 标签：android, utf-8, textview

我有一些不同语言的字符串，如下所示：

```
 String aa = " أهلاً و سهلاً"; // arbic
    String arr = "आपका स्वागत है";// hindi
    String str1 = "Tübingen systemportefølje";
    Strings tr2 = "Das ist nicht Englisch"; 
    String str3 = "這是不是英語"; // chinese 
```

我想在文本视图中设置这些字符串。我尝试这种方式：

```
try {
            final String s = new String(arr.getBytes(), "UTF-8");
            abc.setText(Html.fromHtml(s));
        } catch (UnsupportedEncodingException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } 
```

并尝试添加相应语言的字体并设置视图。我只想在 textview 中设置这种语言。请给我一个提示。

# node.js - 自定义nodejs重定向消息“暂时移动。重定向到...”

> ID：15462175
> 
> 赞同：2
> 
> 时间：2013-03-17T14:58:03.807
> 
> 标签：node.js, express

我正在使用带有express的nodejs。

对于我做的一些网址：`res.redirect(new_url, 302);`并且重定向工作正常。

问题是服务器发送的消息是“已**临时移动。重定向到[http://mysite.com/](http://mysite.com/)** ”，我想将其更改为简单的正确 html，就像 google 一样。尝试向 www.google.com ( `curl www.google.com`) 发出请求，您将获得：

```
<HTML><HEAD><meta http-equiv="content-type" content="text/html;charset=utf-8">
<TITLE>302 Moved</TITLE></HEAD><BODY>
<H1>302 Moved</H1>
The document has moved
<A HREF="http://www.google.co.il/">here</A>.
</BODY></HTML> 
```

我什至找不到文本的来源。我该如何更改它，正确的方法是什么？

先感谢您！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T15:33:12.223

`res.writeHead`与标题一起使用，然后`res.end`与内容一起使用（即 HTML）：

```
res.writeHead(302, {'Location': new_url});
res.end('<html>...</html>'); 
```

谢谢。

# visual-studio-2012 - VS 2012 WDK 8 电脑配置错误

> ID：15462178
> 
> 赞同：0
> 
> 时间：2013-03-17T14:58:08.397
> 
> 标签：visual-studio-2012, wdk

我的 Visual Studio 2012 Professional 中有一个奇怪的错误

当我单击驱动程序 > 测试 > 配置计算机时，我立即收到错误消息“无法加载文件或程序集 Microsoft.VisualStudio.Project、版本=11.0.0.0、文化=中性、PublicKeyToken=b03f5f7f11d50a3a 或其依赖项之一。该系统找不到指定的文件。'

我该如何解决这个错误？

*   我已经尝试使用 /ResetAddIn、/SafeMode、/ResetSettings 等来 deven.exe...

*   从“添加/删除程序”重新配置 VS 2012 并重新安装 WDK 8

*   以用户、管理员身份运行 VS，“以管理员身份运行”设置

    我在 Windows 7 32bit 上运行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T16:23:59.123

没关系 - 我找到了解决方案：

*   完全卸载 WDK 7 和 WDK 8 以及程序列表中与“驱动程序”相关的任何内容

*   仅安装了 WDK 8

    享受 ：）

# php - 通过 cURL 上传视频

> ID：15462183
> 
> 赞同：0
> 
> 时间：2013-03-17T14:58:30.187
> 
> 标签：php, curl

我正在尝试将一些视频名称 test.avi 上传到 dailymotion..

我使用 cURL 登录dailymotion，然后我试图通过这个url [http://www.dailymotion.com/widget/upload?skin=default上传视频](http://www.dailymotion.com/widget/upload?skin=default)

我在上传一些示例视频时扫描了请求..但它只给了我这个：

请求网址

```
http://www.dailymotion.com/widget/upload?skin=default&upload_id=c73413240d828de0ce987018dddcb6ed&sid=5444350aa8f801e2605f8f6de15ac38c&urlbase=http://www.dailymotion.com&flash_mode=1 
```

查询字符串参数

```
skin:default
upload_id:c73413240d828de0ce987018dddcb6ed
sid:5444350aa8f801e2605f8f6de15ac38c
urlbase:http://www.dailymotion.com
flash_mode:1 
```

请求有效载荷

```
------------gL6Ef1gL6KM7gL6ei4Ef1Ij5ae0ei4
Content-Disposition: form-data; name="Filename"

test.avi
------------gL6Ef1gL6KM7gL6ei4Ef1Ij5ae0ei4
Content-Disposition: form-data; name="Filedata"; filename="test.avi"
Content-Type: application/octet-stream

------------gL6Ef1gL6KM7gL6ei4Ef1Ij5ae0ei4
Content-Disposition: form-data; name="Upload"

Submit Query
------------gL6Ef1gL6KM7gL6ei4Ef1Ij5ae0ei4-- 
```

但是，我不太确定如何处理此有效负载请求。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T15:23:27.483

这是一个多部分的表单，确实可以使用 curl 及其[-F 命令行选项](http://curl.haxx.se/docs/manpage.html#-F)。只需为表单中的每个输入字段提供一个 -F。

当然，您可能还需要首先使用 curl 实际登录等，然后您可能还需要跟踪 cookie 等。如果这听起来很复杂，您可能需要开始阅读 curl [HTTP 脚本页面](http://curl.haxx.se/docs/httpscripting.html)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-17T15:01:12.560

您只能使用 cURL 通过 FTP 传输文件。如果您尝试使用他们的 Web 界面或 API 或类似于 cURL 的方式将视频上传到 Web 服务器，则不是您的工具。

# matlab - 如何将 Curl 答案传递给 matlab 中的静态文本组件

> ID：15462190
> 
> 赞同：1
> 
> 时间：2013-03-17T14:58:49.607
> 
> 标签：matlab, user-interface, curl

我试图在笛卡尔坐标中找到一个特定方程的卷曲，其中用户的输入是使用 matlab 在文本框中键入的。在 CLI 中，我使用了以下等式并且它有效：`curl([2*x+3*y, 2*y, 2*z], [x, y, z])`

使用我创建的 GUI（为简单起见）一个文本框（假设它用于 x 系数）静态文本标签将显示答案，一个按钮将触发我的代码。

**文本框标签是 inputTxt**

**静态文本标签标签是 inputValue**

按钮回调是：

```
txtValue=get(handles.inputTxt, 'String');
set(handles.inputValue, 'String', curl([textValue*x, 0, 0], [x, y, z])); 
```

按下按钮时，我听到一声叮当声，这会在 matlab cli 中引发错误，并且静态文本标签中没有任何内容。即使我自己设置 curl 参数，就像我首先在 CLI 中所做的那样： `curl([2*x+3*y, 2*y, 2*z], [x, y, z])` 我得到相同的结果（叮当声）并且标签文本中没有任何内容。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T23:13:38.200

刚刚找到答案，它确实奏效了。

要将 curl 结果传递给静态文本，请使用

```
char(curl([x^3*y^2*z, y^3*z^2*x, z^3*x^2*y], [x, y, z])); 
```

完整代码

```
syms x y z;
set(handles.txtAns, 'String', char(curl([x^3*y^2*z, y^3*z^2*x, z^3*x^2*y], [x, y, z]))); 
```

txtAns 是静态文本标签，单击按钮后应显示以下答案（如果您将上述行放在按钮回调中）

矩阵[(x^2*z^3 - 2*x*y^3*z) (x^3*y^2 - 2*x*y*z^3 (-2*x^3*y*z + y^3*z^2)]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T18:01:25.980

mmounirf，您可以尝试更改：

```
txtValue=get(handles.inputTxt, 'String');
set(handles.inputValue, 'String', curl([textValue*x, 0, 0], [x, y, z])); 
```

对此：

```
txtValue=str2num(get(handles.inputTxt, 'String'));
set(handles.inputValue, 'String', num2str(curl([txtValue*x, 0, 0], [x, y, z]))); 
```

你也可以发布错误吗？基本上，您从需要将其转换为数字的编辑框中得到一个字符串。然后，当您设置文本时，您需要将获得的数字转换`curl`为字符串。我还注意到您更改`txtValue`为`textValue`which 也会导致错误。

# soap - 带有大量消息的 JAX-WS SoapHandler：OutOfMemoryError

> ID：15462192
> 
> 赞同：2
> 
> 时间：2013-03-17T14:58:51.980
> 
> 标签：soap, jax-ws, soaphandler

使用 JAX-WS 2，我看到了其他人也谈到的一个问题。问题是，如果在处理程序中接收到 SOAP 消息，并且该 SOAP 消息很大——无论是由于内联 SOAP 正文元素碰巧有很多内容，还是由于 MTOM 附件——那么很容易获得内存不足错误。

原因是对 getMessage() 的调用似乎引发了一系列事件，这些事件涉及读取线路上的整个 SOAP 消息，并创建一个对象（或多个对象）来表示线路上的内容。

例如：

```
...
public boolean handleMessage(SOAPMessageContext context)
{
    // for a large message, this will cause an OutOfMemoryError
    System.out.println( context.getMessage().countAttachments() );
... 
```

我的问题是：是否有已知的机制/解决方法来处理这个问题？具体来说，最好访问 SOAP 消息中的 SOAP 部分而不强制附件（例如，如果 MTOM）也被清理掉。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2019-07-13T20:37:29.083

For those who run their app on JBoss 6 & 7 (with Apache CXF)... I was able to troubleshoot the problem by implementing my handler from the LogicalHandler interface instead of the SOAPHandler. In this case your handleMessage() method would get the LogicalMessageContext context (instead of SOAPMessageContext) in the arguments that has no issues with the context.getMessage() call

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-10-02T10:21:58.577

实际上有一个 JAX-WS RI（又名 Metro）特定的解决方案，它非常有效。

请参阅[https://javaee.github.io/metro/doc/user-guide/ch02.html#efficient-handlers-in-jax-ws-ri](https://javaee.github.io/metro/doc/user-guide/ch02.html#efficient-handlers-in-jax-ws-ri)。不幸的是，该链接现在已损坏，但您可以在 WayBack Machine 上找到它。我将在下面给出重点：

早在 2007 年，Metro 就[引入](https://github.com/javaee/metro-jax-ws/issues/482)了一种额外的处理程序类型`MessageHandler<MessageHandlerContext>`，它是 Metro 专有的。`SOAPHandler<SOAPMessageContext>`它比不尝试在内存中进行 DOM 表示要高效得多。

这是原始博客文章中的关键文本：

> 消息处理程序：
> 
> 利用 JAX-WS 规范提供的可扩展处理程序框架和 RI 中更好的消息抽象，我们引入了一个新的处理程序，称为`MessageHandler`扩展您的 Web 服务应用程序。MessageHandler 类似于 SOAPHandler，除了它的实现可以访问`MessageHandlerContext`（MessageContext 的扩展）。通过 MessageHandlerContext 可以访问 Message 并使用 Message API 处理它。正如我在博客标题中提到的，这个处理程序允许您处理消息，它提供了访问/处理消息的有效方法，而不仅仅是基于 DOM 的消息。处理程序的编程模型是相同的，消息处理程序可以与标准逻辑和 SOAP 处理程序混合使用。我在 JAX-WS RI 2.1.3 中添加了一个示例，显示了使用 MessageHandler 来记录消息，这里是示例中的一个片段：

```
public class LoggingHandler implements MessageHandler<MessageHandlerContext> {
    public boolean handleMessage(MessageHandlerContext mhc) {
        Message m = mhc.getMessage().copy();
        XMLStreamWriter writer = XMLStreamWriterFactory.create(System.out);
        try {
            m.writeTo(writer);
        } catch (XMLStreamException e) {
            e.printStackTrace();
            return false;
        }
        return true;
    }

    public boolean handleFault(MessageHandlerContext mhc) {
        ..... 
        return true;
    }

    public void close(MessageContext messageContext) {    }

    public Set getHeaders() {
        return null;
    }
} 
```

（引自 2007 年博文）

您可以在[Metro GitHub 存储库](https://github.com/javaee/metro-jax-ws/)中找到[完整示例](https://github.com/javaee/metro-jax-ws/blob/master/jaxws-ri/samples/src/main/samples/efficient_handler/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-06T20:28:49.847

您使用的是什么 JAX-WS 实现运行时？如果有办法使用内置于 WebSphere 中的运行时执行此操作，我确信在其他运行时（如 Axis2（正确）、Apache CXF 和 Metro/RI）中可以干净地执行此操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-29T03:03:42.450

我正在使用另一种方法来降低内存成本，即`Message Accessor`.

我没有使用`context.getMessage()`，而是将其更改为：

```
Object accessor = context.get("jaxws.message.accessor");

if (accessor != null) {
                baosInString = accessor.toString();
                } 
```

Base on advice from IBM website. [http://www-01.ibm.com/support/docview.wss?uid=swg1PM21151](http://www-01.ibm.com/support/docview.wss?uid=swg1PM21151)

# c++ - 如何使用 fstream 从文本中写入一系列浮点数

> ID：15462197
> 
> 赞同：0
> 
> 时间：2013-03-17T14:59:23.337
> 
> 标签：c++, floating-point, operator-keyword, fstream

示例 ABC.txt 10.f 30.2f 20.f

我想检索这些信息并存储在我的数组中。但是我不确定该怎么做。

我不明白 Then 是什么（如果好的话），它调用 num_get::get （使用流的选定语言环境）来执行提取和解析操作，相应地调整流的内部状态标志。最后，它在返回之前销毁哨兵对象。

```
std::fstream filestr("ABC.txt", std::fstream::in);

if(!filestr.good()) //Logical error on i/o operation
{
  //Unable to process
  filestr.close();
  return;
}

unsigned index= 0;
unsigned count= 0;

while(filestr.good())
{
  float buffer= 0.f;
  filestr >> std::skipws >> buffer;
  score[index]= buffer;
  ++index;
}
filestr.close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T15:15:08.530

使用 istream_iterator 超级简单。下面的代码中只有一个棘手的地方。向量构造函数调用需要围绕第一个参数的一组额外的括号，以避免[最令人烦恼的 Parse](http://en.wikipedia.org/wiki/Most_vexing_parse)。

```
#include <fstream>                                                                                                        
#include <iostream>                                                                                                       
#include <iterator>                                                                                                       
#include <vector>                                                                                                         
#include <algorithm>                                                                                                      

using namespace std;                                                                                                      

int                                                                                                                       
main (int argc, char** argv)                                                                                              
{                                                                                                                         
    for (int i = 1; i < argc; ++i) {                                                                                      
        ifstream in (argv[i]);                                                                                            
        if (!in) {                                                                                                        
            cerr << "Failed to open " << argv[i] << endl;                                                                 
            continue;                                                                                                     
        }                                                                                                                 
        vector<double> nums ((istream_iterator<double> (in)), istream_iterator<double> ());                               
        copy (nums.begin (), nums.end (), ostream_iterator<double> (cout, "\n"));                                         
    }                                                                                                                     
    return 0;                                                                                                             
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T15:21:52.070

有很多方法可以做到这一点。一种方法是使用字符串流，结合向量和字符串：

```
#include <fstream>
#include <iostream>
#include <string>
#include <cstdlib>
#include <sstream>
#include <vector>
using namespace std;

int main() {
    std::ifstream filestr("C:\\nums.txt", std::fstream::in);
    std::vector<double> numbers;

    if (!(filestr.good())) {
        std::cout << "BAD FILE" << std::endl;
        exit(0);
    }
    else {
        std::string temp;
        double d = 0.0;

        while(std::getline(filestr, temp)) {
        std::istringstream iss(temp);

        while(std::getline(iss, temp, ' ')) {
            std::istringstream ist(temp);

            ist >> f;
            numbers.push_back(f);
        }
    }
    }

    //see that the vector has information in it
    for (int i = 0; i < numbers.size(); i++) {
        std::cout << numbers[i] << std::endl;
    }
    filestr.close();

    return 0;
} 
```

需要注意的一点是，您也可以在此处使用迭代器，但您可以自己实现。

# php - 谁看过你的个人资料

> ID：15462200
> 
> 赞同：0
> 
> 时间：2013-03-17T14:59:31.523
> 
> 标签：php, mysql, sql

我想问你我该如何解决这个问题。我想将此功能添加到我的网站。但我不知道究竟什么是最好的解决方案。我在想mysql表：像这样

```
ID | id_user_who | user_seen
 1       2             10 
```

id 为 2 的用户看到了 id 为 10 的用户。但这是一个好的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T16:26:54.737

这是一个很好的解决方案，而且我相信这是唯一正确的方法。只需删除`ID`列（第一列），这肯定是一个无用的[代理键](http://en.wikipedia.org/wiki/Surrogate_key)。相反，将该对设置`(id_user_who, user_seen)`为主键。

请注意，主键*是*和索引，您不需要任何额外的索引。

正如大卫建议的那样，更仔细地命名你的列，当你试图弄清楚这些列到底意味着什么时，你会感谢自己在几个月后这样做。

我宁愿建议像`visitor_id`and之类的东西`visited_id`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T15:03:28.413

不确定这是否真的是一个问题......但无论如何，如果我做类似的事情，我会添加一个时间戳，或者一些点击（和最后一次访问）......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T15:03:28.943

是的，这是一个很好的解决方案。确保您的列已编入索引，以便查找/计数快速。您可能还需要考虑添加“date_viewed”列，以便在需要时使记录过期。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-17T15:03:54.070

这似乎是一个不错的解决方案。使用起来很有意义。我同意@JD 确保它已编入索引，并可能添加一个 date_viewed 列。这样，您在对数据进行排序时就有更多选择。

# r - 修改多面图中的图例，ggplot2

> ID：15462203
> 
> 赞同：3
> 
> 时间：2013-03-17T14:59:34.980
> 
> 标签：r, ggplot2

对于此图，我想将图例拆分为 2 个单独的图例。一种将脉冲湿地显示为圆形，阴影对应于湿地编号，另一种将静态湿地显示为三角形，灰色阴影对应于湿地编号。然后水文传说就没有必要了，我想摆脱它。

这是我希望图例看起来的样子（但当然更小。这是在 PowerPoint 中完成的，只是为了演示）。

![在此处输入图像描述](../Images/45dfd341dbbb186c07f91a5272e91e6f.png)

我正在粘贴下面的数据和代码。

![温度图](../Images/d8fe7b158b75e9db7941e5248a6b997c.png)

数据

```
      日期水文湿地温度层
1 15-Jun 脉冲一个 21.9 表面
2 15-Jun 脉冲一个 21.0 底部
3 7 月 1 日脉冲一个 28.8 表面
4 7 月 1 日脉冲一个 23.5 底部
5 7 月 10 日脉冲一个 31.8 表面
6 7 月 10 日脉冲一个 22.6 底部
7 7 月 14 日脉冲一个 23.0 表面
8 7 月 14 日脉冲一个 21.4 底部
9 8 月 15 日脉冲一个 28.8 表面
10 8 月 15 日脉冲一个 28.5 底部
11 11 月 7 日脉冲一个 12.1 表面
12 11 月 7 日脉冲一个 9.9 底部
13 15-6月 静二 22.2面
14 15-6月 静二 21.2 底部
15 1-7月 静态二 29.0面
16 7 月 1 日静态二 24.1 底部
17 7月10日 静二 30.9面
18 7 月 10 日静态二 23.3 底部
19 7月14日 静二 25.2面
20 7 月 14 日 静态 二 22.6 底部
21 1-Aug 静态二 27.3 表面
22 1-8 月静态 2 23.5 底部
23 8 月 15 日静态 2 26.7 表面
24 8 月 15 日静态两个 23.6 底部
25 7-11月静态二 11.9面
26 7-11月静态二 9.0底部
27 15-Jun 脉冲三 21.3 表面
28 15-6月 脉冲三 20.9 底部
29 7 月 1 日脉冲三 26.1 表面
30 7 月 1 日脉冲三 23.8 底部
31 7 月 10 日脉冲三 30.1 表面
32 7 月 10 日脉冲三 22.8 底部
33 7 月 14 日脉冲三 23.7 表面
34 7 月 14 日脉冲三 22.2 底部
35 11 月 7 日脉冲三 12.5 表面
36 11 月 7 日脉冲三个 10.0 底部
37 15-6月 静四21.0面
38 15-6月静四19.3底
39 7 月 1 日静态四 25.0 面
40 1-7 月静态四 21.2 底部
41 7 月 10 日静态四 25.7 表面
42 7 月 10 日静态四 21.3 底部
43 7月14日静四22.5面
44 7 月 14 日静态四 20.8 底部
45 1-8 月静态四 24.1 表面
46 1-8 月静态四 22.8 底部
47 8 月 15 日静态四 25.1 表面
48 8 月 15 日静态四 22.2 底部
49 7-11月静态四12.2面
50 7-11月静态四 9.1底部
51 15-6月静五19.7面
52 15-6月静五19.2底部
53 1-7月静态五 24.1 表面
54 7 月 1 日静态五 22.9 底部
55 7 月 10 日静态五 24.6 表面
56 7 月 10 日静态五 21.7 底部
57 7月14日静五21.3面
58 7 月 14 日静态五 23.0 底部
59 1-Aug 静态五 23.8 表面
60 1-8 月静态五 22.0 底部
61 8 月 15 日静态五 24.8 表面
62 8 月 15 日静态五 23.1 底部
63 7-11月静态五11.7面
64 7-11月静态五8.8底部
65 15-Jun 脉冲六 21.2 面
66 15-Jun 脉冲六 20.4 底部
67 7 月 1 日脉冲六 24.9 表面
68 7 月 1 日脉冲六 22.5 底部
69 7 月 10 日脉冲六 28.6 表面
70 7 月 10 日脉冲六 22.0 底部
71 7 月 14 日脉冲六 21.9 表面
72 7 月 14 日脉冲六 21.4 底部
73 8 月 15 日脉冲六 27.5 表面
74 8 月 15 日脉冲六 26.1 底部
75 11 月 7 日脉冲六 13.3 表面
76 11 月 7 日脉冲六 9.5 底部
77 15-Jun 脉冲七 19.7 表面
78 15-6月 脉冲七 18.7 底部
79 7 月 1 日脉冲七 23.0 表面
80 7 月 1 日脉冲七 20.8 底部
81 7 月 10 日脉冲七 24.7 表面
82 7 月 10 日脉冲七 22.2 底部
83 7 月 14 日脉冲七 21.3 表面
84 7 月 14 日脉冲七 20.6 底部
85 8 月 15 日脉冲七 26.2 表面
86 8 月 15 日脉冲七 24.7 底部
87 11 月 7 日脉冲七 12.0 表面
88 11 月 7 日脉冲七 10.5 底部
89 15-6月 静八 20.6面
90 15-6月 静八 19.5 底部
91 1-7月静八 28.1 表面
92 7 月 1 日静态八 22.5 底部
93 7月10日 静八 28.8 面
94 7 月 10 日静态八 23.1 底部
95 7月14日 静八 24.7 面
96 7 月 14 日静态八 21.9 底部
97 8 月 1 日静态八 25.0 表面
98 8 月 1 日静态八 22.0 底部
99 8月15日静八27.6面
100 8 月 15 日静态 8 25.3 底部
101 7-11月静八 12.1面
102 11 月 7 日静态八 10.3 底部
103 15-6月 静九 20.7面
104 15-6月静九19.8底
105 1-7月静九 24.8面
106 1-7月静九 22.7底部
107 10-7月静九 28.3面
108 10-7月 静九 22.8 底部
109 14-7月静九 23.9面
110 14-7月静九 22.0底部
111 1-8月静九 27.7面
112 1-Aug 静九 24.5 底部
113 15-8月静九 25.8面
114 8 月 15 日静态九 23.4 底部
115 7-11月静九 11.9面
116 7-11月静九9.5底
117 15-Jun 脉冲十 22.3 表面
118 15-Jun 脉冲十 21.9 底部
119 1-7 月脉冲十 29.6 表面
120 1-7 月脉冲十 28.2 底部
121 7 月 10 日脉冲十 33.0 表面
122 7 月 10 日脉冲十 30.4 底部
123 7 月 14 日脉冲十 25.6 表面
124 7 月 14 日脉冲十 24.1 底部
125 11 月 7 日脉冲十 13.2 表面
126 11 月 7 日脉冲十 10.1 底部

```

代码

```
colvec <-c("white", "white","gray80", "gray80", "gray60", "gray60", "gray37", "gray37","black", "black")  
water$Layer=factor(water$Layer, c("Surface", "Bottom"))
water$Date=factor(water$Date, c("15-Jun", "1-Jul", "10-Jul", "14-Jul", "1-Aug", "15-Aug", "7-Nov"))
water$Wetland=factor(water$Wetland, c("One", "Two", "Three", "Four", "Five", "Six", "Seven", "Eight", "Nine", "Ten"))

ggplot(water, aes(Date, Temp, group=Wetland, shape=Hydrology)) +
  geom_point(size =4, color = "black")+
  geom_point(aes(color=Wetland),size=3) +
  scale_colour_manual(values=colvec) +
  facet_grid(Layer ~ Hydrology) 
```

谢谢，

-莎拉

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-17T16:31:10.773

这是受此[问题启发的解决方案](https://stackoverflow.com/questions/11883844/inserting-a-table-under-the-legend-in-a-ggplot2-histogram)

`colvec2`首先，制作只包含一次所有颜色的新变量。

```
colvec2 <-c("white", "gray80", "gray60", "gray37",  "black")  
colvec <-c("white", "white","gray80", "gray80", "gray60", "gray60", "gray37", "gray37","black", "black") 
```

原始图另存为对象，没有图例。

```
p<-ggplot(water, aes(Date, Temp, group=Wetland, shape=Hydrology)) +
  geom_point(aes(color=Wetland),size=3) +
  scale_colour_manual(values=colvec) +
  facet_grid(Layer ~ Hydrology) +
  theme(legend.position="none") 
```

仅包含 的数据的图`Pulsed`。设置`shape=16`在`geom_point()`. 更改了`scale_colour_manual()`图例标题和颜色。

```
p1<-ggplot(subset(water,Hydrology=="Pulsed"), 
     aes(Date, Temp, group=Wetland, shape=Hydrology)) +
  geom_point(aes(color=Wetland),size=3,shape=16) +
  scale_colour_manual("Pulsed Wetlands",values=colvec2) +
  facet_grid(Layer ~ Hydrology) 
```

与 相同`p1`，仅用于`Static`。

```
p2<-ggplot(subset(water,Hydrology=="Static"), 
      aes(Date, Temp, group=Wetland, shape=Hydrology)) +
  geom_point(aes(color=Wetland),size=3,shape=17) +
  scale_colour_manual("Static Wetlands",values=colvec2) +
  facet_grid(Layer ~ Hydrology) 
```

保存绘图`p1`并`p2`使用`ggplot_build()`和`ggplot_gtable()`。

```
pt1<-ggplot_gtable(ggplot_build(p1))
pt2<-ggplot_gtable(ggplot_build(p2)) 
```

仅提取两个情节的传说。这次的图例在 12\. element (element contains `guide-box`)

```
leg1<-pt1$grobs[[12]]
leg2<-pt2$grobs[[12]] 
```

现在使用`grid.arrange()`和`arrangeGrob()`绘制所有部分。

```
library(gridExtra)
grid.arrange(arrangeGrob(p,arrangeGrob(leg1,leg2), ncol = 2,widths=c(3/4,1/4))) 
```

![在此处输入图像描述](../Images/8e5c5c842795fbbacd0c86233a13346e.png)

# java - 如果没有互联网连接，请将用户带到设置

> ID：15462209
> 
> 赞同：0
> 
> 时间：2013-03-17T15:00:18.020
> 
> 标签：java, android

作为java中的新手，我无法链接这两个代码片段：

如果没有互联网连接：

```
 public boolean isOnline() {
        ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
        NetworkInfo netInfo = cm.getActiveNetworkInfo();
        if (netInfo != null && netInfo.isConnected()) {
            return true;
        }
        return false;
    } 
```

然后，弹出一个带有通知和设置/取消按钮的对话框。

```
 public void showNoConnectionDialog(Context ctx1) {
      final Context ctx = ctx1;
      AlertDialog.Builder builder = new AlertDialog.Builder(ctx);
      builder.setCancelable(true);
      builder.setMessage(R.string.no_connection);
      builder.setTitle(R.string.no_connection_title);
      builder.setPositiveButton(R.string.settings, new DialogInterface.OnClickListener() {
          public void onClick(DialogInterface dialog, int which) {
              ctx.startActivity(new Intent(Settings.ACTION_WIRELESS_SETTINGS));
          }
      });
      builder.setNegativeButton(R.string.cancel, new DialogInterface.OnClickListener() {
          public void onClick(DialogInterface dialog, int which) {
              return;
          }
      });
      builder.setOnCancelListener(new DialogInterface.OnCancelListener() {
          public void onCancel(DialogInterface dialog) {
              return;
          }
      });

      builder.show();
  } 
```

谁能给点方向。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T15:02:11.300

像这样使用。

```
if(!isOnline()) {
   showNoConnectionDialog(MainActivity.this);
} 
```

# git - git cherry-pick SHA1 ID

> ID：15462217
> 
> 赞同：0
> 
> 时间：2013-03-17T15:01:06.767
> 
> 标签：git, git-branch, git-cherry-pick

我还是 git 的新手，我遇到了这个 cherry-pick 命令。*假设我从devel*分支到*master*分支挑选了一个提交（我们称之为 CA）， 如果我的解释是正确的，它们现在都有不同的 sha1 id。

所以我的问题是，如果以后我想检查*devel* 分支和*master*分支 之间的“差异”，`git cherry`以找出哪些提交最终被推送到*master*而哪些没有，但是由于提交（CA）我刚刚挑选会有不同的 SHA1 id 所以当我执行`git cherry master devel`它告诉我什么？它是否告诉我 CA 被推送到 *主服务器*？或者它是否告诉我 CA 没有被推送到*主*服务器，因为它们不共享相同的 SHA1 ID？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T13:05:15.990

`git cherry`用于`git patch-id`比较提交。引入相同更改的两个提交将具有相同的补丁 ID，并且`git cherry`会通过在提交前加上连字符/减号 (-) 符号来表示更改已经存在于上游。

因此，在您的情况下`git cherry master devel`，将输出您挑选的以连字符/减号 (-) 为前缀的提交，表明它引入的更改已经存在于 master.xml 中。引入 master 中不存在的更改的提交将以加号 (+) 为前缀。

这在[man git-cherry](https://www.kernel.org/pub/software/scm/git/docs/git-cherry.html)中有解释。

# javascript - 如何通过单击 Javascript 中的“重置”按钮启用复选框？

> ID：15462220
> 
> 赞同：-2
> 
> 时间：2013-03-17T15:01:27.787
> 
> 标签：javascript, html

嗨，我是 JS 的新手，我正在尝试为我的网站做一个 BMI（身体/质量指数）计算器。

我想要做的是当用户单击 Temizle(Reset) 按钮禁用复选框时应该再次可用。我写了一个名为“temizle”的函数，但它没有用。我想知道解决方案的两件事。

1.  如果有一种简单的方法可以完成我的要求，请告诉我。
2.  如果没有，我应该如何更改我的代码？

> ```
>  <html>
>         <head>
>         <script language="JavaScript">
>         <!--
>         function temizle(){
>     if(document.getElementById('e').disable=true)
>     {                       
>     document.getElementById('e').disable=false                                                          
>     }
>     if(document.getElementById('k').disable=true) 
>     {
>     document.getElementById('k').disable=false
>      } 
>     }
>     //-->
>     </script>
>     </head>
>     <body>
>     <form name="bmiForm">
>     Cinsiyetiniz: Erkek<input type="checkbox" id="e" name="erkek" onclick="if (this.checked) document.getElementById('k').disabled=true; else document.getElementById('k').disabled = false;"/> Kadın<input type="checkbox" id="k" name="kadın" onclick="if (this.checked) document.getElementById('e').disabled=true; else   document.getElementById('e').disabled = false;"/><br />  
>   Kilonuz(kg): <input type="text" name="kilo" size="10" /> Örn:75<br />
>   Boyunuz(cm): <input type="text" name="boy" size="10" /> Örn:183<br />
>   <input type="button" value="Kütle/Vücut İndeksi Hesapla" onClick="bmihesaplama()" /><br />
>   Kütle/Vücut İndeksiniz(BMI): <input type="text" name="bmi" size="10" /><br />
>   Bunun Anlamı: <input type="text" name="sonuc" size="45" /><br />
>   <input type="reset" value="Temizle" onclick="temizle()" />
>   </form>
>     </body>
>     </html> 
> ```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T15:06:51.833

您输入`disable`了属性，但它是`disabled`. 你需要改变它；这一点很重要。

```
if(document.getElementById('k').disable=true) 
```

也应该改变；这是一个*任务*。你可以使用`==`，但你也可以这样做：

```
if (document.getElementById('k').disabled) 
```

[http://jsfiddle.net/ExplosionPIlls/3AMtG/2/](http://jsfiddle.net/ExplosionPIlls/3AMtG/2/)

# ruby-on-rails - has_many :through - 匹配现有产品类别，否则创建新产品类别

> ID：15462225
> 
> 赞同：0
> 
> 时间：2013-03-17T15:01:50.697
> 
> 标签：ruby-on-rails

**产品.rb**

```
class Product < ActiveRecord::Base
  attr_accessible :description, :name

  has_many :categorizations
  has_many :categories, :through => :categorizations

  validates :name, uniqueness: true
end 
```

**类别.rb**

```
class Category < ActiveRecord::Base
  attr_accessible :name

  has_many :categorizations
  has_many :products, :through => :categorizations

  validates :name, uniqueness: true
end 
```

**分类.rb**

```
class Categorization < ActiveRecord::Base
  attr_accessible :category_id, :product_id  # Should I leave these accessible?

  belongs_to :product
  belongs_to :category
end 
```

这就是我在终端中尝试的：

```
> p1 = Product.create(name: "Product A", description: "Product A description")
> p1.categories
> []
> Category.all
> []
> p1.categories.create(:name => "Cat A")
> p1.categories.find(1).name
> ["Cat A"]
>
> p2 = Product.create(name: "Product B", description: "Product B description")
> p2.categories
> []
> p2.categories.update_attributes(:name => "Cat A") 
```

我收到“update_attributes”的未定义方法错误。

1.  如何在不在数据库中创建重复类别的情况下将产品分配给类别？（即由于上面已经创建了“Cat A”，我如何分配“p2”来拥有相同的类别，同时在数据库中只保留一条“Cat A”的记录？）
2.  当我想搜索特定产品的类别时，当我输入“p.categories.name”时，我会返回模型“Category”的名称。如何将类别名称返回到数组中？
3.  在 Web 表单中实现此功能的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T20:33:04.800

对于任何好奇的人，我在一篇写得很好的文章中找到了答案：

[http://tutorials.jumpstartlab.com/projects/blogger.html#i3:-tagging](http://tutorials.jumpstartlab.com/projects/blogger.html#i3:-tagging)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T15:08:58.417

我希望您的类别名称属性是唯一的。

```
@categoryCatA = Category.find_by_name("Cat A")

p1.categories << @categoryCatA

p2.categories << @categoryCatA 
```

要获取分配给某个产品的所有类别的名称，这将返回一个数组：

```
p1.categories.map {|category| category.name} 
```

# c - 如何通过 C 中的地址访问 char 数组中的数据？

> ID：15462230
> 
> 赞同：0
> 
> 时间：2013-03-17T15:02:26.937
> 
> 标签：c, return-type

我正在编写一个系统调用函数（在 FreeBSD 中）。您可能知道此类函数的返回类型是 int，它仅指示系统调用是否成功，调用者请求的值通过设置返回：

```
td->td_retval[0]= my_requires_value; 
```

其中 td 是 thread* 类型，而 td_retval[0] 是 int。

我的问题是我需要的值是一个char []。我该如何管理？我应该在系统调用中设置什么 td->td_retval[0] 以及如何在调用函数中检索它？

我对 C 及其指针不是很熟悉，但我觉得这可以通过使用正确的指针和地址来完成。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T15:46:39.283

如果你想返回一个字符串，你的函数应该有一个参数，它是一个指向用户空间中预分配缓冲区的指针，它将接收字符串（以及另一个具有最大大小的参数）。返回值仅用于报告错误，例如提供的缓冲区太小。

看[这个](http://joekuan.wordpress.com/2009/02/25/how-to-create-a-system-call-for-freebsd-kernel/)例子，它可以帮助你设计你的系统调用。

# c++ - 读取txt文件行和列的最佳方法

> ID：15462233
> 
> 赞同：1
> 
> 时间：2013-03-17T15:02:32.843
> 
> 标签：c++, dynamic, vector, ifstream

对不起，我是 C++ 菜鸟！我四处寻找解决方案，但似乎找不到最适合我需要的解决方案。我正在尝试读取 txt 文件的宽度（行中的最大字符数）和高度（每个文件的最大行数）。计划使用变量来帮助制作动态大小的 txt 文件/级别。

在此之前我有固定的宽度和高度！

TXT 文件：房间布局的简单字符输出（空间=地板，#=墙，X=门）：

```
########
#      #
#      X
#      #
######## 
```

问题：认为这是一个简单的问题，但它只读取每个变量中的 2 个（hNum，wNum），然后中断循环并且程序无法继续。

-我究竟做错了什么？

- 我应该以某种方式使用 seekg 或不同的循环吗？

- 我需要将我的矢量更改为二维矢量吗？

- 实现这一目标的最佳方法是什么？

# 房间.cpp

```
//LOAD CURRENT ROOM FROM FILE

ss << RoomNo;
string str = ss.str();

    string fname = ("Room");
fname.append(str);
fname.append(".txt");
infile.open(fname);

infile.clear();
infile.seekg(0);

if(infile.is_open())
{
    // Sets width and height depndant on txt file size

    string line;

   //NOT WORKING!

    while( !infile.eof())
    {
        hNum++;
        getline ( infile, line);
        wNum += line.length();
        break;
    }
    height=hNum;
    width=wNum;

    //END

    // Loop to end of file- to get you all the lines from txt file.
    while(!infile.eof())        
    {
        int i;
        for(int row = 0; row < width; row++)
        {
            infile.getline(RoomFile, 256);
            i = 0;
            for(int col = 0; col < height; col++)
            {
                data.push_back(RoomFile[i]);
                i++;
            }
        }

    }
}
else
{
    cout << "ERROR: infile not open" << endl; 
}
infile.close(); 
```

# 更新

这就是我得到的，尝试按照 Sky 的建议进行操作……但不能全力以赴。然后跨步并认为循环没有激活所以改变了论点。现在出现运行时错误！

问题：表达式：向量下标超出范围！

建议任何人？

```
 string line;

    while(getline(infile,line))
    {
        getline(infile, line);
        tempVector.push_back(line);
    }
    width=line.length();
    height=tempVector.size(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T15:15:29.693

一种可行的方法是创建一个字符串向量并读取整个文件，每行都是向量中的一个字符串。

粗略的例子：

```
#include <vector>
#include <string>
#include <fstream>

/* ... */

vector<string> content;
string buffer;
while(!infile.eof())
{
  getline(infile, &string, '/n');
  content.push_back(string);
}

width = findMaxLengthOfStrings(content);
height = content.size(); 
```

您正在将文件的每一行作为单独的字符串读取。字符串被推到向量上。然后，您可以通过使用 迭代向量轻松找到向量中的哪个字符串最长`size()`。文件的行长度是`size()`在向量本身上获得的。

此外，只发布代码的相关部分，即 I/O 函数，也会有所帮助。只是说;）小屏幕尺寸等。

# ruby - 内联字符串拆分以将逗号分隔的值作为 CSS 类放置在视图中

> ID：15462235
> 
> 赞同：0
> 
> 时间：2013-03-17T15:02:44.200
> 
> 标签：ruby, ruby-on-rails-3, split, each

我的表中有一个字段，例如：

```
tank, troublesome, athletic, powerback 
```

那是一个字符串。

我想用逗号分隔这些值并将它们作为元素的 CSS 类放置。这是我的尝试：

```
<a href="<%= player_path(player) %>" class="player-item <% players.roles.split(",").each do |role| print role end %>"> 
```

但我得到：

```
<a href="/players/1" class="player-item "> 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T15:06:41.560

您可以将逗号替换为空：

```
<a href="<%= player_path(player) %>" class="player-item <% player.roles.gsub(',', '') %>"> 
```

但我认为有一个更好的解决方案涉及重构您的数据库。具有逗号分隔值的字段几乎从来都不是一个好主意:) 但这是另一回事。

# pic - 我在哪里可以找到 16F877A.h？

> ID：15462238
> 
> 赞同：5
> 
> 时间：2013-03-17T15:03:00.140
> 
> 标签：pic

当我在 MPLAB 中运行我的程序时。（项目向导 -> PIC16F877A -> Hi Tech Ansi C 编译器 -> 运行）错误 [141] C:\Users\WhyWhy\Desktop\test.c; 1.22 can't open include file "16F877A.h": No such file or directory

我在哪里可以找到 16F877A 的头文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-30T15:48:53.657

HITECH-C 中不应明确包含芯片特定的头文件，文档明确指出。相反，您包含编译器头文件，它将为您处理包含特定于芯片的文件：

```
#include <htc.h> 
```

为此，您需要在项目设置中配置正确的芯片。该`16F877A.h`文件存在于编译器目录中，但直接包含它会引发警告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-17T19:42:16.570

该文件来自编译器，因此在您的情况下，您可以在此处找到 Hi Tech：

C:\Program Files\HI‐TECH Software\PICC\\include\

在您找到该文件之前，您必须将其添加到 MPLAB 项目窗口的 Header Files 文件夹中。

在你的代码中你必须包含它

```
#include <16F877A.h> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-05T15:40:42.600

C:\Program Files\HI-TECH Software\PICC\9.70\include

就我而言，我在 C:\ Program Files 中安装了 HITech 编译器。你必须知道，你在哪里安装了编译器的文件。

# css - 旋转谷歌地图容器而不是地图本身

> ID：15462247
> 
> 赞同：0
> 
> 时间：2013-03-17T15:03:27.607
> 
> 标签：css, google-maps, google-maps-api-3

我只是想知道是否有一种更有效的方法来使用 Google 地图执行[此](http://s23.postimage.org/gxn7ku597/Capture.png)操作，而不是将其分层放置在旋转的 div 下，这样它几乎是一种剪切效果。例如，您当然应该能够旋转谷歌地图容器并保持实际地图不旋转..

我一直在研究，但没有找到太多...

好的，经过一段时间的试验，我已经走到了[这](http://jsfiddle.net/dawidvdh/vHNsb/3/)一步（无法让谷歌地图显示在 jsfiddle 中）

继承人的代码：

CSS：

```
#map{
height:200px;
width:200px;
/* FF Chrome Opera etc */
-moz-transform:rotate(45deg);
-webkit-transform:rotate(45deg);
-o-transform:rotate(45deg);
-ms-transform:rotate(45deg);
filter: progid:DXImageTransform.Microsoft.Matrix(sizingMethod='auto expand', M11=0.7071067811865476, M12=-0.7071067811865475, M21=0.7071067811865475, M22=0.7071067811865476); /* IE6,IE7 */
-ms-filter: "progid:DXImageTransform.Microsoft.Matrix(SizingMethod='auto expand', M11=0.7071067811865476, M12=-0.7071067811865475, M21=0.7071067811865475, M22=0.7071067811865476)"; /* IE8 */
zoom:1;

/* IE */
}
#map > div > div > div > div > div{
    -moz-transform:rotate(-45deg);
    -webkit-transform:rotate(-45deg);
    -o-transform:rotate(-45deg);
    -ms-transform:rotate(-45deg);
    filter: progid:DXImageTransform.Microsoft.Matrix(sizingMethod='auto expand', M11=0.7071067811865476, M12=-0.7071067811865475, M21=0.7071067811865475, M22=0.7071067811865476); /* IE6,IE7 */
-ms-filter: "progid:DXImageTransform.Microsoft.Matrix(SizingMethod='auto expand', M11=0.7071067811865476, M12=-0.7071067811865475, M21=0.7071067811865475, M22=0.7071067811865476)"; /* IE8 */
zoom:1;
} 
```

JS：

```
var map = new google.maps.Map(document.getElementById('map'), {
  zoom: 5,
  center: new google.maps.LatLng(-33.92, 151.25),
  disableDefaultUI: true,
  mapTypeId: google.maps.MapTypeId.ROADMAP
}); 
```

HTML：

```
<div id="map" style="width:200px; height:200px;"></div> 
```

我现在已经让它完全工作了...剩下 1 个问题... IE7 和 IE8 :/.. 关于轮换的任何建议？

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T15:54:08.713

这是您需要的：

```
#wrapper {
    position: relative;
    -webkit-transform: rotate(45deg);
    transform: rotate(45deg);
    width: 212px;  // Use pythagoras' theorem to get these from required height/width
    height: 212px; // Sqrt(212 x 212 x 2) = 300 approximately
    background: #333;
    overflow: hidden;
}
#map {
    position: absolute;
    -webkit-transform: rotate(-45deg);
    transform: rotate(-45deg);
    width: 300px;
    height: 300px;
    top: -45px; // line it back up (not sure why it isn't: rotation weird?)
    left: -45px;
    background: #fdd url(http://www.somersethouse.org.uk/images/mi/visit/map.jpg);
    background-size: cover;
} 
```

## [jsFiddle](http://jsfiddle.net/vHNsb/2/)

# algorithm - AC-3 算法和回溯

> ID：15462253
> 
> 赞同：0
> 
> 时间：2013-03-17T15:03:51.617
> 
> 标签：algorithm

我使用以下方法解决了 CSP 问题：

1.  运行 AC3 以减少变量域
2.  使用简单的回溯来寻找解决方案。

它对我所有的测试用例都运行得很好而且很快，但是我的一个朋友问我这个问题：“如果最初的 AC-3 没有减少任何东西怎么办？” 并暗示我将在回溯的每一步运行 AC-3。

我有一种感觉，在这种情况下它对我没有多大帮助，但在某处我已经看到 AC-3 可以两种方式使用，但没有进一步的解释。我可以获得更多关于此的信息吗？

PS：实际上每次运行 AC-3 对我来说是无法忍受的，因为它运行大约 2 秒长。但是我出于好奇而问这个问题，当我解决其他一些问题时它会很有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T08:22:10.210

由于这个问题已经死了大约一个月，我想我会自己回答。在回溯的每一步运行 AC-3 确实有好处。我遇到过这样的问题，最初的 AC-3 并没有减少太多，但随后修复了一些变量的问题要成功得多。

# android - 如何让我的应用程序自动刷新我的内容 (JSON)？

> ID：15462255
> 
> 赞同：0
> 
> 时间：2013-03-17T15:04:08.350
> 
> 标签：android, json, cordova

我正在制作一个应用程序，我希望在不通过市场更新整个应用程序的情况下更新我的内容。

我制作了一个 JSON 文件，将我的所有内容都放入其中，如果我在移动设备上打开该应用程序，效果会很好。但是当我在 JSON 文件中更新我的内容时，应用程序内的内容不会自动下载。

另外，我想确保上次下载的 JSON 文件中的内容在应用程序中仍然可见。因此，当设备离线时，内容仍然可见。

另外很高兴知道我正在使用 Phonegap，我认为我可以使用 Phonegap 的本地存储 API 来存储 JSON 文件，因此当设备离线时应用程序内的内容仍然可见。这可能吗？以及如何确保在更改内容时更新此 JSON 文件？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T15:11:00.843

因此，要使您的内容可见，您必须使用视图。您需要查看最新内容和查看历史内容。每次更新内容时，您必须

*   `historicalView.removeAllViews()`通过首先调用然后更新历史视图`historicalView.addView(updatedHistory);`

*   然后`latestContentView`以相同的方式更新：`latestContentView.removeAllViews()`然后`latestContentView.addView(latestContent);`

# windows - nasm——汇编语言介绍

> ID：15462258
> 
> 赞同：0
> 
> 时间：2013-03-17T15:04:23.733
> 
> 标签：windows, assembly, x86, nasm

我正在尝试在业余时间学习汇编语言，以帮助我担任使用高级语言的开发人员的角色。

我在这里遵循了 NASM 教程：http: [//leto.net/writing/nasm.php](http://leto.net/writing/nasm.php)。

我能够创建并运行一个将 HelloWorld 打印到屏幕的简单程序。我对上面链接中的以下段落感到困惑：

```
mov eax,5       ; the syscall number for open()

So where do find out all of the semantics for all of the various system calls?
Well first, the numbers are listed in asm/unistd.h in Linux, and  sys/syscall.h
in the *BSD's 
```

我假设这意味着：如果 eax 寄存器中有一个 5，那么它就是 open 的系统调用。其余的系统调用是否记录在某处？

我在 Windows 7 PC 上使用 NASM。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T15:14:13.690

[Windows API 调用列表](http://msdn.microsoft.com/en-us/library/windows/desktop/hh447209%28v=vs.85%29.aspx)

如果你在 Linux 上使用 NASM，

[http://asm.sourceforge.net/syscall.html#1](http://asm.sourceforge.net/syscall.html#1)

[http://syscalls.kernelgrok.com/](http://syscalls.kernelgrok.com/)

# java - 从 ViewPager 的片段中获取 GoogleMap

> ID：15462259
> 
> 赞同：4
> 
> 时间：2013-03-17T15:04:24.710
> 
> 标签：java, android, android-fragments, android-viewpager, google-maps-android-api-2

我正在尝试`GoogleMap`从 a 中获取对象`Fragment`，该对象位于 的第二页上`ViewPager`，其内容以`FragmentPagerAdapter`.

我`ViewPager`的由两页组成：一个普通的布局和一个谷歌地图。

我可以这样做访问第一个布局：

```
View tempView = LayoutInflater.from(getApplication())
                .inflate(R.layout.start_activity, null);
tempTextView = (TextView) tempView.findViewById(R.id.timer); 
```

这里一切正常。但我也想访问谷歌地图。
当地图处于单独的活动中时，我可以让`GoogleMap`对象这样做：

```
map=((SupportMapFragment)getSupportFragmentManager()
    .findFragmentById(R.id.map)).getMap(); 
```

但是现在上面的行返回`null`

问题是**现在如何从片段****中获取对象？`GoogleMap`**

他们建议这样做（有人说这行得通），但它对我不起作用：

```
map = ((SupportMapFragment) getSupportFragmentManager()
      .findFragmentByTag("android:switcher:" + R.id.pager + ":1")).getMap(); 
```

我在[这里](http://pastebin.com/U7nuyLck)提供代码。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-21T13:14:12.917

我在[这里](https://stackoverflow.com/questions/13733299/initialize-mapfragment-programmatically-with-maps-api-v2)找到了解决方案，但也会在此处发布以供其他用户查看代码，而不会像我一样卡住数周。

**MyPagerAdapter.java**

```
public class MyPagerAdapter extends FragmentPagerAdapter
{
    private Context context;
    final LatLng    YEREVAN = new LatLng(40.181, 44.513);

    public MyPagerAdapter(FragmentManager fm, Context context)
    {
        super(fm);
        this.context = context;
    }

    @Override
    public Fragment getItem(int position)
    {
        switch (position)
        {
            case 0:
                return new MyFragment();
            case 1:
                return MyMapFragment.newInstance(YEREVAN);
        }
        return null;
    }

    @Override
    public int getCount()
    {
        return 2;
    }

    @Override
    public CharSequence getPageTitle(int position)
    {
        Locale l = Locale.getDefault();
        switch (position)
        {
            case 0:
                return context.getString(R.string.start).toUpperCase(l);
            case 1:
                return context.getString(R.string.map).toUpperCase(l);
        }
        return null;
    }
} 
```

**MyMapFragment.java**

```
public class MyMapFragment extends SupportMapFragment
{
    private LatLng  latLon;

    public MyMapFragment()
    {
        super();
    }

    public static MyMapFragment newInstance(LatLng position)
    {
        MyMapFragment frag = new MyMapFragment();
        frag.latLon = position;
        return frag;
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState)
    {
        View v = super.onCreateView(inflater, container, savedInstanceState);
        initMap();
        return v;
    }

    private void initMap()
    {
        UiSettings settings = getMap().getUiSettings();
        settings.setAllGesturesEnabled(false);
        settings.setMyLocationButtonEnabled(false);

        getMap().moveCamera(CameraUpdateFactory.newLatLngZoom(latLon, 16));
        getMap().addMarker(new MarkerOptions().position(latLon).icon(BitmapDescriptorFactory.fromResource(R.drawable.ic_launcher)));
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T16:40:50.903

问题是您`MyFragmentPagerAdapter`不使用`SupportMapFragment`s，而只添加`MyFragment`s。您应该将其`getItem`功能更改为如下所示：

```
public Fragment getItem(int position) {
    Fragment fragment;
    switch (position) {
    case 0:
        fragment = new MyFragment();
        break;
    case 1:
        fragment = new MySupportMapFragment();
        break;
    }
    Bundle args = new Bundle();
    args.putInt(MyFragment.ARG_SECTION_NUMBER, position);
    fragment.setArguments(args);
    return fragment;
} 
```

为此，您必须在加载布局的地方实现自己的类型`MySupportMapFragment`，类似于您对`MyFragment`.

然后，您可以直接从`FragmentPagerAdapter`. 像：

```
SupportMapFragment supportMapFragment = 
    (SupportMapFragment) mMyFragmentPagerAdapter.getItem(1);
map = supportMapFragment.getMap(); 
```

添加到适配器后，您应该会得到您期望的 SupportMapFragment。

# php - 不能使用 if 语句检查 POST 数据。

> ID：15462265
> 
> 赞同：0
> 
> 时间：2013-03-17T15:04:51.070
> 
> 标签：php, javascript, jquery, ajax, json

我正在使用 ajax 调用从我的 mysql 数据库中获取一些数据。这是我的ajax调用：

```
 $.ajax({
    type: "POST",
    url: "fetch.php",
    data: id,
    success: function(msg) {
        var record = JSON.parse(msg);
        $("#name").val(record.name);
        $("#description").val(record.description);
        switch(record.category) {
            case ("Residential"):
                $("#category").val("residential");
                break;
            case ("Modernisation & Domestic Extensions"):
                $("#category").val("modernisation");
                break;
            case ("Feasibility Layouts"):
                $("#category").val("feasibility");
                break;
            case ("Master Planning"):
                $("category").val("master");
                break;
            default:
                $("category").val("");
        };
        switch(record.featured) {
            case ("y"):
                $("#featured").val("y");
                break;
            default:
                $("featured").val("n");
        };
    }
}) 
```

这是我的 php 文件：

```
 <?php 
       $dbc = mysqli_connect('XX','XX','XX','XX');

       $id = $_POST['id'];

       if($dbc) {
          $row = fetchDataFromRecordWithId($dbc,$id);
       }
       else {
          echo 'Database error';
       }

       function fetchDataFromRecordWithId($dbc,$id) {
          $q = "SELECT * FROM Projects WHERE id = ".$id;
          $r = mysqli_query($dbc, $q);

          $row = mysqli_fetch_array($r, MYSQLI_ASSOC);
          mysqli_close($dbc);
          return $row;
       }

       echo json_encode($row);
       ?> 
```

一切都完美无缺，但是当我尝试在我的 php 文件中添加 if 语句以检查是否有任何 POST 数据时，我的 ajax 调用没有得到任何响应。我尝试了不同的方法：

```
 <?php if(isset($_POST)) { .. my whole php code here .. } ?>

   <?php if(!empty($_POST)) { ..my whole php code here .. } ?>

   <?php if($_POST) { .. my whole php code here .. } ?>

   <?php if($_POST['id']) { .. my whole php code here .. } ?> 
```

但没有任何工作！当我将使用上面列出的任何这些 if 语句时，Ajax 调用不会返回 json 数据。

我无法检查 POST 数据并保持原样，但我想做的是正确的方式。

似乎没有执行 if 语句（但 POST 数据必须在那里，因为`$_POST['id']`当 if 语句不使用时我能够获取值）。

我也试图把`echo json_encode($row)`if 语句放在外面，但它也没有帮助。有什么想法有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T15:37:10.717

```
$.ajax({
  type: "POST",
  url: "fetch.php",
  data: id, 
```

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)：

> data: [...] 对象必须是键/值对。

所以做那条线

```
 data: { id : id }, 
```

相反，它应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T15:07:10.507

```
if ($_SERVER['REQUEST_METHOD'] != 'POST') {
   die("Invalid request method: " . $_SERVER['REQUEST_METHOD']);
}

if (isset($_POST['id'])) {
   ... db code here ...
} 
```

另请注意，您对[SQL 注入攻击](http://bobby-tables.com)是广泛开放的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T16:38:14.177

您尝试对您的代码进行测试

1.  检查您是否有正确的 php 请求页面。

2.  在谷歌浏览器中右键单击检查元素然后控制台选项卡中显示任何错误

3.  在你的成功中：function(msg) 添加 $("body").append(msg)

4.  在成功之前添加函数：function(result) {}

    错误：函数（xhr,err）{ alert("readyState: "+xhr.readyState+"\nstatus: "+xhr.status); alert("responseText: "+xhr.responseText); }

# javascript - 如何将 jAlerts 与 div 相关联？

> ID：15462268
> 
> 赞同：-1
> 
> 时间：2013-03-17T15:05:14.610
> 
> 标签：javascript, jquery, html

我有一个名为 input 的 div，如何在这个 div 旁边显示 jAlert？

jAlert：[http ://www.smooka.com/blog/2009/02/22/jalert-jquery-alert-box-plugin/](http://www.smooka.com/blog/2009/02/22/jalert-jquery-alert-box-plugin/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T15:56:55.180

您可以使用以下代码示例手动设置 jAlert 的 css： 1\. 首先您必须获取 jAlert 库使用的 uid。2\. 然后只需设置 jalert_overlay_ 元素的 css。

```
 if (uid == undefined)
    {   //generate an unique ID
        var d = new Date();
        var uid = d.getMonth()+""+d.getDate()+""+d.getHours()+""+d.getMinutes()+""+d.getSeconds();

        }

$("#jalert_overlay_"+uid).css({
                                              top: 0, 
                                              left: 0, 
                                              width: overlayWidth, 
                                              height: overLayHeight, 
                                              position: "fixed",
                                              display: "block",
                                              background: "#000",
                                              zIndex: "1000"
                                          })
                $("#jalert_overlay_"+uid).css("opacity", 0.7); 
```

希望这会对你有所帮助。如果您还有任何问题，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T15:30:03.003

试试这个 ：

> ```
> var divInput= $("#input").position(); 
> ```

```
$("#jAlertId").css('position','absolute')    //if position is not absolute already
$("#jAlertId").css('top',divInput.top+2).css('left',divInput.left+2);   //+2 or whatever figure u need 
```

# php - PHP if 条件与布尔值

> ID：15462279
> 
> 赞同：2
> 
> 时间：2013-03-17T15:06:20.520
> 
> 标签：php

为什么会[这样](http://sandbox.onlinephpfunctions.com/code/d5fff6ee86bc7c62d7624a39a1070cff770ad4aa)？

```
<?php $result = true ;
    if($result == 'SOME TEXT')
        echo 'why is this true? why is this printed?';        
    else
        echo 'when this should be printed?'
?> 
```

请解释一下，我不是在寻找替代方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T15:11:28.390

在您的表达式中，您将布尔值与字符串进行比较。字符串被强制转换为`true`.

参考：[http ://www.php.net/manual/en/language.types.boolean.php#language.types.boolean.casting](http://www.php.net/manual/en/language.types.boolean.php#language.types.boolean.casting)

如前所述，用于`===`比较值和类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T15:07:34.590

因为您使用`==`运算符而不是`===`. 在您的情况下`==`，不依赖于操作数类型，而不是`===`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T15:24:49.547

因为您将布尔值与字符串进行比较，所以字符串将自动转换为布尔值。

根据 PHP 文档，任何不是`null`或`empty`（或零）的字符串都将被转换为 True。

所以你的比较就像True `==`True。

如果您使用该`===`运算符，您还将检查两个值是否属于同一类型。

[http://www.php.net/manual/en/language.types.boolean.php#language.types.boolean.casting](http://www.php.net/manual/en/language.types.boolean.php#language.types.boolean.casting)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-17T15:17:14.507

我看了一下php操作员文档..

在您的情况下，您说`==`“true”的布尔值等于“SOME TEXT”的文本值，但不是相同的数据类型。在这种情况下，PHP 返回 true，因为如果您忽略数据类型，假设它们是相似的。

如果您使用`===`，那么它将考虑数据类型，因此会产生一个 false 值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-17T15:10:14.760

这是因为 PHP 的自动类型转换；并且由于您也没有按类型进行比较（===），因此它被认为是 TRUE。[这](http://php.net/manual/en/function.empty.php)是一个被认为是空的列表，但它也被认为是 FALSE：

> 以下内容被认为是空的：
> 
> ""（一个空字符串）
> 
> 0（0 为整数）
> 
> 0.0（0 作为浮点数）
> 
> "0" (0 作为字符串)
> 
> 无效的
> 
> 错误的
> 
> array() （一个空数组）
> 
> $var; （声明的变量，但没有值）

其他一切基本上都被认为是真实的。

# macos - 为主机文件创建安全范围的书签

> ID：15462283
> 
> 赞同：1
> 
> 时间：2013-03-17T15:06:36.207
> 
> 标签：macos, bookmarks, entitlements, nsopenpanel, code-signing-entitlements

我正在尝试为用户的主机文件创建一个安全范围的书签，以便我的应用程序可以在启动时访问和修改它。我收到以下错误：

> 错误域 = NSCocoaErrorDomain 代码 = 256 “无法打开文件“主机”。UserInfo=0x10011e9f0 {NSURL=file://localhost/private/etc/hosts}

我的权利文件：

```
<key>com.apple.security.app-sandbox</key>
<true/>
<key>com.apple.security.files.bookmarks.app-scope</key>
<true/>
<key>com.apple.security.files.user-selected.read-write</key>
<true/> 
```

以及创建书签的相关代码：

```
- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
    NSOpenPanel *openPanel = [NSOpenPanel openPanel];
    [openPanel setDirectoryURL:[NSURL fileURLWithPath:@"/private/etc/hosts"]];

    [openPanel beginSheetModalForWindow:[self window]
                      completionHandler:^(NSInteger result){

                          if (result == NSOKButton)
                          {
                              [self saveBookmarkFromURL:[openPanel URL]];
                          }else{
                              printf("YOU MUST SELECT A FILE");
                          }

                      }
     ];
}

- (void)saveBookmarkFromURL:(NSURL *)aURL
{
    NSError *error;
    bookmarkData = [aURL
            bookmarkDataWithOptions:NSURLBookmarkCreationWithSecurityScope
            includingResourceValuesForKeys:nil
            relativeToURL:nil
            error:&error];

    if (error) {
        NSLog(@"%@", [error description]);
        printf("\nERROR CREATING BOOKMARK DATA");
    } else {
        [[NSUserDefaults standardUserDefaults] setObject:bookmarkData forKey:@"bookmark"];
        printf("\nBOOKMARK DATA SAVED TO PREF FILE");
    }
} 
```

# c - 如何使用 Makefile 在 cygwin 上编译 cli-clock？

> ID：15462284
> 
> 赞同：0
> 
> 时间：2013-03-17T15:06:38.443
> 
> 标签：c, cygwin

我写`ggc clock.c -o clock`假设它会编译到文件“时钟”，但显然不是。我确实看到它带有一个 Makefile，但我不太确定你如何使用它。

这是我正在使用的链接。 [https://github.com/Unixhub/cli-clock](https://github.com/Unixhub/cli-clock)

```
clock.c:6:21: ncurses.h: No such file or directory
clock.c:54: error: parse error before "WINDOW"
clock.c:54: warning: no semicolon at end of struct or union
clock.c:56: warning: data definition has no type or storage class
clock.c:68: error: parse error before '*' token
clock.c:68: warning: data definition has no type or storage class
clock.c: In function `init':
clock.c:89: error: request for member `bg' in something not a structure or union
clock.c:95: error: `stdscr' undeclared (first use in this function)
clock.c:95: error: (Each undeclared identifier is reported only once
clock.c:95: error: for each function it appears in.)
clock.c:99: error: `OK' undeclared (first use in this function)
clock.c:100: error: request for member `bg' in something not a structure or union
clock.c:102: error: request for member `bg' in something not a structure or union
clock.c:102: error: request for member `bg' in something not a structure or union
clock.c:103: error: request for member `bg' in something not a structure or union
clock.c:103: error: request for member `option' in something not a structure or union
clock.c:104: error: request for member `option' in something not a structure or union
clock.c:104: error: request for member `bg' in something not a structure or union
clock.c:115: error: request for member `running' in something not a structure or union
clock.c:116: error: request for member `geo' in something not a structure or union
clock.c:117: error: request for member `geo' in something not a structure or union
clock.c:118: error: request for member `geo' in something not a structure or union
clock.c:119: error: request for member `geo' in something not a structure or union
clock.c:120: error: request for member `geo' in something not a structure or union
clock.c:121: error: request for member `geo' in something not a structure or union
clock.c:122: error: request for member `tm' in something not a structure or union
clock.c:122: error: request for member `lt' in something not a structure or union
clock.c:123: error: request for member `lt' in something not a structure or union
clock.c:127: error: request for member `framewin' in something not a structure or union
clock.c:127: error: request for member `geo' in something not a structure or union
clock.c:128: error: request for member `geo' in something not a structure or union
clock.c:129: error: request for member `geo' in something not a structure or union
clock.c:130: error: request for member `geo' in something not a structure or union
clock.c:131: error: `LINES' undeclared (first use in this function)
clock.c:131: error: request for member `geo' in something not a structure or union
clock.c:132: error: `COLS' undeclared (first use in this function)
clock.c:132: error: request for member `geo' in something not a structure or union
clock.c:133: error: request for member `framewin' in something not a structure or union
clock.c:135: error: request for member `framewin' in something not a structure or union
clock.c: In function `signal_handler':
clock.c:149: error: request for member `running' in something not a structure or union
clock.c: In function `update_hour':
clock.c:158: error: request for member `tm' in something not a structure or union
clock.c:158: error: request for member `lt' in something not a structure or union
clock.c:159: error: request for member `lt' in something not a structure or union
clock.c:161: error: request for member `tm' in something not a structure or union
clock.c:164: error: request for member `date' in something not a structure or union
clock.c:165: error: request for member `date' in something not a structure or union
clock.c:168: error: request for member `date' in something not a structure or union
clock.c:168: error: request for member `tm' in something not a structure or union
clock.c:169: error: request for member `date' in something not a structure or union
clock.c:169: error: request for member `tm' in something not a structure or union
clock.c:172: error: request for member `date' in something not a structure or union
clock.c:172: error: request for member `tm' in something not a structure or union
clock.c:173: error: request for member `date' in something not a structure or union
clock.c:173: error: request for member `tm' in something not a structure or union
clock.c: In function `draw_number':
clock.c:189: error: request for member `framewin' in something not a structure or union
clock.c:190: error: request for member `framewin' in something not a structure or union
clock.c:192: error: request for member `framewin' in something not a structure or union
clock.c: In function `draw_clock':
clock.c:200: error: request for member `date' in something not a structure or union
clock.c:201: error: request for member `date' in something not a structure or union
clock.c:204: error: request for member `framewin' in something not a structure or union
clock.c:205: error: request for member `framewin' in something not a structure or union
clock.c:206: error: request for member `framewin' in something not a structure or union
clock.c:209: error: request for member `date' in something not a structure or union
clock.c:210: error: request for member `date' in something not a structure or union
clock.c:213: error: request for member `framewin' in something not a structure or union
clock.c:214: error: request for member `framewin' in something not a structure or union
clock.c:215: error: request for member `framewin' in something not a structure or union
clock.c:218: error: request for member `date' in something not a structure or union
clock.c:219: error: request for member `date' in something not a structure or union
clock.c: In function `clock_move':
clock.c:224: error: request for member `framewin' in something not a structure or union
clock.c:224: error: request for member `geo' in something not a structure or union
clock.c:224: error: request for member `geo' in something not a structure or union
clock.c: In function `key_event':
clock.c:231: error: request for member `option' in something not a structure or union
clock.c:232: error: `stdscr' undeclared (first use in this function)
clock.c:235: error: request for member `running' in something not a structure or union
clock.c: In function `main':
clock.c:247: error: request for member `option' in something not a structure or union
clock.c:247: error: `COLOR_BLUE' undeclared (first use in this function)
clock.c:248: error: request for member `option' in something not a structure or union
clock.c:250: error: request for member `running' in something not a structure or union
clock.c:259:2: warning: no newline at end of file 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T15:55:55.193

Cygwin 很大，通常默认只安装一小部分。其余的分为单独安装的包。

您至少需要添加`libncurses-devel`包，可能还需要添加其他包。运行`setup.exe`，回答常见问题，输入`ncurses`搜索行，选择最新版本`libncurses-devel`，继续安装。

如果有 Makefile，请输入`make`它所在的目录。这将运行构建过程。

请注意，除非程序在 Cygwin 中进行了测试，否则没有任何保证。

# freepascal - Free Pascal：快速高效地读取文件

> ID：15462291
> 
> 赞同：1
> 
> 时间：2013-03-17T15:06:54.810
> 
> 标签：freepascal, file-handling, file-read

是否有比使用 AssignFile、Reset 和 Read（在 Windows x86 和 x64 上）更快、更有效的文件读取方式？我需要 grep（使用 TRegExpr）许多文本文件以获取模式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T21:58:19.220

两个方向：

1.  继续使用文本，并从assignfile cs 中获取最大值，使用 [settextbuf](http://www.freepascal.org/docs-html/rtl/system/settextbuf.html)将缓冲区大小增加到8kb。（更大的值是可能的，但不再真正加速）
2.  否则，您必须使用普通的二进制文件访问来制作自己的文本访问。

# php - PHP json_encode 到 JS 对象不可用

> ID：15462294
> 
> 赞同：0
> 
> 时间：2013-03-17T15:07:03.017
> 
> 标签：php, javascript, json, object

我有一个看起来像这样的 PHP：

```
$exec[0] = shell_exec("cat /etc/msm.conf | grep JAR_PATH");

$exec[1] = shell_exec("msm server list");
    if(strstr($exec[1],'[ ACTIVE ] "mc-srv" is running. Everything is OK.') !== FALSE){
        $exec[1] = 'mc online';
    }else{
        $exec[1] = 'mc offline';
    }

$exec[2] = shell_exec("sudo ts status");
    if($exec[2] == 'Server is running'){
        $exec[2] = 'ts online';
    }else{
        $exec[2] = 'ts ofline';
    }
echo json_encode($exec,JSON_FORCE_OBJECT); 
```

AJAX 请求被发送到页面并返回 json。如果我使用它，我会`console.log(JSON.parse(data))`在控制台中看到它，`Object {0: "DEFAULT_JAR_PATH="server.jar"↵", 1: "mc online", 2: "ts ofline"}`但是即使我使用关联数组，我也无法访问它的任何方法。

但是如果我创建一个新对象并将其打印到控制台，它（至少在 chrome 中）在语法突出显示方面看起来完全相同，我可以通过 obj.method 访问它。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T16:18:54.957

根据对象在控制台中的输出方式，它看起来可以被 JSON.parse 解析并且是有效的。

在这种情况下，您应该能够像这样访问每个方法：

```
var obj = JSON.parse(data);
console.log( obj['0'] ); // returns "DEFAULT_JAR_PATH="server.jar""
console.log( obj['1'] ); // returns "mc online" 
```

`obj.0`在这种情况下不起作用，因为方法名称是数字。

# c# - Windows Azure 网站连接外部 SQL 服务器

> ID：15462296
> 
> 赞同：1
> 
> 时间：2013-03-17T15:07:11.563
> 
> 标签：c#, sql-server, asp.net-mvc, azure

我只是将我的项目上传到 Windows Azure 网站**免费版**。

我的网站需要连接到另一个虚拟主机上的外部 SQL 服务器。（不是 Windows azure 上的 SQL 服务器）。

当我在我的电脑上开发时。一切正常（这意味着我的连接字符串是正确的）。

但是当我上传到 Windows azure 时。它无法连接到该数据库。

并像这样抛出异常。

**访问被拒绝**

当我执行以下此答案时，错误显示如下 [从 Windows Azure 连接到远程 SQL Server 2008](https://stackoverflow.com/questions/1952904/connecting-to-remote-sql-server-2008-from-windows-azure)

**连接尝试失败，因为连接的一方在一段时间后没有正确响应，或者连接失败，因为连接的主机没有响应**

并且都像这样显示堆栈跟踪

```
A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond.

[SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. 
```

我该如何解决这个问题，请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T12:27:24.243

您正在将应用程序上传到 Windows Azure 网站。默认情况下，连接到 SQL Server 的端口 1433 很可能在其防火墙上被阻止。由于您使用的是 azure 网站，因此您无法控制此防火墙设置。

您可以：

1.  将现有 SQL Server 数据库迁移到 SQL Azure 并从那里使用它
2.  将您的应用程序升级到云服务，您可以在其中定义连接到外部数据库所需的端点（无论如何我都不推荐这样做，因为部署起来会很慢）
3.  找到一种将现有数据库发布为 Web 服务的方法，以便您可以从应用程序中使用它们，但您可能必须重写应用程序的数据访问层。

我会简单地将所有内容移至 SQL Azure，这非常简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T17:45:44.053

如果您可以将网站添加到托管数据库的远程主机，您是否可以在同一主机上创建允许您与数据库对话的服务（例如 WCF 或 Rest）？这样，您仍然可以将数据库托管在外部主机上，并通过 Azure 网站上的服务与其通信。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-14T15:29:26.973

似乎有一种新方法允许 Azure webapps 使用混合连接连接到本地 SQL Server。谷歌让我相信这个功能在 2016 年的某个时候可用。它需要你在托管 SQL Server 实例的机器上安装额外的软件。

[更多信息可在此处获得。](https://docs.microsoft.com/en-us/azure/app-service-web/web-sites-hybrid-connection-connect-on-premises-sql-server)

# javascript - Js取2个值之间的元素（数组）

> ID：15462297
> 
> 赞同：0
> 
> 时间：2013-03-17T15:07:19.330
> 
> 标签：javascript

我如何在数组中获取 4 到 7 之间的元素？

```
var mymain = [ 
 ['1', 'ooo'],
 ['2', 'salade'],
 ['3', 'fraise'],
 ['4', 'pomme'],
 ['5', 'banane'],
 ['6', 'tomate'],
 ['7', 'cerise'],
 ['9', 'melon'],
]; 
```

我需要 pomme banane tomate 和 cerise 。

对不起我的英语不好。感谢您对未来的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T16:59:45.947

尝试这个：

```
var mymain = [ 
 ['1', 'ooo'],
 ['2', 'salade'],
 ['3', 'fraise'],
 ['4', 'pomme'],
 ['5', 'banane'],
 ['6', 'tomate'],
 ['7', 'cerise'],
 ['9', 'melon'],
];

alert(mymain[3][1]+" "+mymain[4][1]+" "+mymain[5][1]+" and "+mymain[6][1]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T15:44:49.283

看看[数组`slice`方法](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/slice)。由于您的数据结构，您可以通过减去 1 直接从基于 1 的 id 中获取基于 0 的数组索引。然后将结果[映射](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/slice)到您想要的字符串：

```
mymain
 .slice(4-1, 7) // the indices 3, 4, 5, and 6
 .map(function(item) { return item[1]; }) // get the string for each item 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T15:49:25.537

如果您正在寻找动态操作（不是基于假设索引），那么这就是要走的路。

```
var mymain = [ 
 ['1', 'ooo'],
 ['2', 'salade'],
 ['3', 'fraise'],
 ['4', 'pomme'],
 ['5', 'banane'],
 ['6', 'tomate'],
 ['7', 'cerise'],
 ['9', 'melon'],
];

for(var i =0; i<mymain.length; i++){

    if(4 <= mymain[i][0] && 7 >= mymain[i][0]){
        alert(mymain[i][1]);
    }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-17T15:12:28.980

尝试`array.splice(index,howmany)`：

```
var arr = mymain.splice(3,4); //  result is an Array 
```

[样本](http://jsfiddle.net/HnWNm/)

# python - pandas dataframe to excel with win32 : numpy 数据类型错误

> ID：15462298
> 
> 赞同：4
> 
> 时间：2013-03-17T15:07:19.473
> 
> 标签：python, numpy, pandas, win32com

我正在尝试使用 win32 将 pandas 数据框导出到 excel 中。

导出似乎仅在数据框不包含 numpy 数据类型时才有效。

**如何将 numpy 数据类型转换为它们的 COM 变体？**

这是一个可重现的例子：

```
 import pandas as pd
 from win32com.client import Dispatch

 # Prepare data

 # data without numpy data type
 xdata1 = {'state': ['Ohio', 'Ohio', 'Ohio', 'Nevada', 'Nevada'],
     'year' : [2000, 2001, 2002, 2002, 2001],
     'pop'  : [1.5, 1.7, 3.6, 2.4, 2.9 ]}
data1 = pd.DataFrame(xdata1, columns = ['year', 'state', 'pop'])
xT1 = [tuple(x) for x in data1.values]# # data to tuples

# data with numpy type
data2 = pd.crosstab(data1.state, data1.year)
xT2 = [tuple(x) for x in data2.values]  # data to tuples

# export the data 
 from win32com.client import Dispatch
 xlApp = Dispatch("Excel.Application")
 xlApp.Visible = 1
 xlApp.Workbooks.Add()
 xlSheet = xlApp.ActiveWorkbook.ActiveSheet

 # write to excel
  xlSheet.Cells(1,1).Value = 'Python Rules!'   # THIS WORKS AS EXPECTED

 # Write to a range : data without numpy data type
  FirstRow = 2
  FirstCol = 3
  LastRow = FirstRow + len(xT1) - 1 # Number of records
  LastCol =  FirstCol + len(xT1[0]) - 1        # Number of columns
   xlSheet.Range(xlSheet.Cells(FirstRow, FirstCol), xlSheet.Cells(LastRow , LastCol)).Value = xT1  # THIS WORKS AS EXPECTED 

# Write to a range : data WITH  numpy data type
FirstRow = 2
FirstCol = 5
LastRow = FirstRow + len(xT2) - 1 # Number of records
LastCol =  FirstCol + len(xT2[0]) - 1        # Number of columns
xlSheet.Range(xlSheet.Cells(FirstRow, FirstCol), xlSheet.Cells(LastRow , LastCol)).Value = xT2 
```

这条线产生一个错误

**TypeError：“numpy.int64”类型的对象无法转换为 COM VARIANT（但可以获取该对象的 buffer()）**

PS：在有人问之前（或建议另一种导出方式）。我故意使用win32，因为它是我发现写入现有的、预先准备好的excel文件并保留样式的唯一方法

PPS：受这篇[文章](https://stackoverflow.com/questions/9452775/)的启发，我想出的一个解决方案是更改数据框每个元素的类型，我相信有更好的方法

```
def fnConvertdType (xListofList):
     newListofList = []
     for itemList in xListofList:
         xList = []
         for item in itemList:
             xList.append(np.asscalar(np.int16(item)))
         newListofList.append(xList)
     return newListofList 
```

# bash - 用 awk 写出文件每行的元素数量及其重复次数

> ID：15462299
> 
> 赞同：0
> 
> 时间：2013-03-17T15:07:24.353
> 
> 标签：bash, shell, awk

我有一个包含所有不同整数的文件，其中每一行可能有不同的长度，如下所示：

```
1 2 3 4 5
16 7 8
9 10 101 102 13 14
15 6 17 
24 28 31 30 18 
```

我想在输出中打印一行呈现的元素数量以及每行元素数量相同的次数；这个例子的输出应该是：

```
3 2
5 2
6 1 
```

第一列是每行元素的数量，第二列是呈现相同数量元素的行数。

文件中的第一行有 5 个元素，还有第 5 个元素等等。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-17T15:13:38.030

打印字段数的计数：

```
$ awk '{a[NF]++}END{for(k in a)print k,a[k]}' file
5 2
6 1
3 2 
```

`sort`用于有序输出的管道：

```
$ awk '{a[NF]++}END{for(k in a)print k,a[k]}' file | sort
3 2
5 2
6 1 
```

# android - 在 Eclipse 中没有从 .xml 到 .java 获取 id for android

> ID：15462300
> 
> 赞同：-1
> 
> 时间：2013-03-17T15:07:28.320
> 
> 标签：android, eclipse

我在 .xml 中为 Button 声明了一个 id ，但在 .java 中我在写入后按+`@+id/but1`时无法访问：`SHIFT``SPACE`

```
Button b = (button) findViewById(R.id. 
```

它只是不显示id，如果我手动输入它会显示错误。

请给出解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T15:09:11.187

清理项目然后尝试`Ctrl`+ `Space`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T15:09:03.747

首先它不是`Shift`+ `Space`，而是`Ctrl`+ `Space`。

遇到您的问题，只需清理您的项目一次。它会显示id。

# facebook-javascript-sdk - Facebook 连接：javascript 部分如何工作？

> ID：15462306
> 
> 赞同：0
> 
> 时间：2013-03-17T15:08:08.707
> 
> 标签：facebook-javascript-sdk

实际上，我正在 Symfony2.2 中制作一个简单的页面。我在树枝模板中有以下代码：

```
<!-- facebook link -->
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=297720976910223";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>
<div class="fb-login-button" data-show-faces="true" data-width="200" data-max-rows="1"></div>
<!-- end facebook link--> 
```

他们成功地做到了以下几点：

*   在我的页面上显示一个 facebook 登录按钮。
*   当我点击按钮时，我可以输入我的 Facebook 帐户。
*   我的 Facebook 名称显示在我的页面上。

现在我想做的是：在 Facebook 弹出窗口输入一个有效的 Facebook 帐户后，一旦我回到我的页面，我可以提醒一些东西。例如：

```
function after_click() {
        FB.getLoginStatus(function(response) {
            if (response.status === 'connected') {
                alert("Facebook user is connected");
            }
        }); 
```

..问题是我不知道它是如何工作的。我在我的代码中尝试了几个选项并搜索了网络，但徒劳无功。

任何人都可以向我解释上述原则并指导我完成吗？（PS：我的最终目标是用将用户重定向到另一个页面的代码替换“警报”代码。）

非常感谢。

@Thomas，谢谢您的回答.. 但是我真的不明白为什么只有在单击 btnTest 时才会出现以下提示（alert="You clicked on me for a test.."）；永远不会显示其他警报：

```
<!DOCTYPE html>
<html xmlns:fb="https://www.facebook.com/2008/fbml">
<body>

<div id="fb-root"></div>
<script>
  window.fbAsyncInit = function() {
    // init the FB JS SDK
    FB.init({
      appId      : '297720976910223', // App ID from the App Dashboard
      status     : true, // check the login status upon init?
      cookie     : true, // set sessions cookies to allow your server to access the session?
      xfbml      : true  // parse XFBML tags on this page?
    });

    // Additional initialization code such as adding Event Listeners goes here    
    FB.Event.subscribe('auth.login', function(response) {
        alert("test connection");
    });

    FB.getLoginStatus(function(response) {
        if (response.status === 'connected') {
          // connected
          alert("connected");
        } else if (response.status === 'not_authorized') {
          // not_authorized
          alert("not authorized");
        } else {
          // not_logged_in
          alert("not logged in");
        }
       }, true);

  };

  function testme()
  {
     alert("You clicked on me for a test..");
     FB.getLoginStatus(function(response) {
          alert("xxx_");
        if (response.status === 'connected') {
          // connected
          alert("connected");
        } else if (response.status === 'not_authorized') {
          // not_authorized
          alert("not authorized");
        } else {
          // not_logged_in
          alert("not logged in");
        }
       });

  }

  // Load the SDK's source Asynchronously
  // Note that the debug version is being actively developed and might 
  // contain some type checks that are overly strict. 
  // Please report such bugs using the bugs tool.
  (function(d, debug){
     var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement('script'); js.id = id; js.async = true;
     js.src = "//connect.facebook.net/en_US/all" + (debug ? "/debug" : "") + ".js";
     ref.parentNode.insertBefore(js, ref);
   }(document, /*debug*/ false));
</script>

<fb:login-button onlogin="testme()" autologoutlink='true' perms='email,user_birthday,status_update,publish_stream'></fb:login-button>

<!-- Just for testing purposes-->
<button type="button" name="btnTest" onclick="testme()">Test</button>
<div class="fb-login-button" data-show-faces="true" onlogin="testme()" data-width="200" data-max-rows="1"></div>

</body>    
</html> 
```

## PS：在 facebook 开发网站上写着：

先决条件：

## 您将需要一个可以让您在线托管 HTML 文件的地方。如果您还没有，您可以使用 Heroku 免费快速进行设置。

我正在我的电脑上测试那个文件；这有什么区别吗..？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T20:03:23.373

该函数`FB.getLoginStatus`仅告诉您，用户是否通过您的应用程序进行了身份验证，而不是他是否刚刚登录。

您可以在登录状态更改时注册一个监听器`connected`：

```
FB.Event.subscribe('auth.login', function(response) {
  // handle the login
}); 
```

[有关FB JavaScript SDK 事件](https://developers.facebook.com/docs/reference/javascript/FB.Event.subscribe/)的更多信息。

# crystal-reports - 报告公式中的四舍五入

> ID：15462307
> 
> 赞同：1
> 
> 时间：2013-03-17T15:08:12.203
> 
> 标签：crystal-reports, decimal, rounding

My Crystal Report 需要将数字四舍五入到小数点后两位。我已经尝试过`Round(55.815, 2)`，但它返回`55.81`而不是`55.82`. 我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T15:46:16.130

如果出于显示目的需要对小数进行四舍五入，只需使用“减少小数”图标：

![在此处输入图像描述](../Images/e84f99899490774aec9bedd8d5b00283.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-01T06:54:13.350

试试这个 `if Remainder(55.815 ,1) > 0.5 then Floor (55.815) + Remainder(55.815 ,1) else Floor (55.815 )+ Remainder(55.815 ,1)` 这可能对你有帮助

# codeigniter - Doctrine2 + CodeIgniter 和数据库表创建问题

> ID：15462309
> 
> 赞同：0
> 
> 时间：2013-03-17T15:08:35.617
> 
> 标签：codeigniter, doctrine-orm, entities

我将 Doctrine2 与 codeIgniter 一起使用，我创建了一些`yml`格式的模型。使用命令行我创建了代理和实体。当我尝试创建数据库表时，出现以下错误：

> [Doctrine\ORM\Mapping\MappingException]
> 类 'Entities\category' 的映射文件 'Entities.category.dcm.yml' 无效。

这是`Entities.category.dcm.yml`：

```
Entities\Category:
  type: entity
  table: categories
  fields:
    id:
      type: integer
      id: true
      generator:
        strategy: AUTO
    name:
      type: string
      length: 50
      nullable: false
    description:
      type: string
      length: 255 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T03:14:27.360

首先，检查为您的实体和 YML 映射驱动程序配置的路径。

此外，您`Entities.category.dcm.yml`还包含`Entities\Category`和 not的映射`Entities\category`。

正如您在基础[`FileDriver`](https://github.com/doctrine/common/blob/2.3.0/lib/Doctrine/Common/Persistence/Mapping/Driver/FileDriver.php#L113-L115)Doctrine ORM 中看到的那样，对映射的类进行直接匹配，并且不对类名应用规范化。`Category`并且`category`因此是不同的。

# c# - 视觉状态不起作用 Winrt 应用程序

> ID：15462310
> 
> 赞同：1
> 
> 时间：2013-03-17T15:08:35.650
> 
> 标签：c#, winrt-xaml

我正在创建一个 winrt 应用程序。

但是当我创建一个视觉状态时（例如：捕捉）它在我调试应用程序时不起作用。

我的页面设置：

```
<common:LayoutAwarePage
x:Name="pageRoot"
x:Class="Jukebox.Windows8Metro.LoginPage"
DataContext="{Binding DefaultViewModel, RelativeSource={RelativeSource Self}}"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:local="using:Jukebox.Windows8Metro"
xmlns:common="using:Jukebox.Windows8Metro.Common"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
mc:Ignorable="d">
<Grid Style="{StaticResource LayoutRootStyle}" Background="#FF00A99E">
    <Grid VerticalAlignment="Top" Height="768">
        <TextBlock x:Name="textBlock" TextWrapping="Wrap" Text="Let's get started" FontSize="44" FontFamily="Assets/Fonts/Oswald/Oswald-Bold.ttf#Oswald" Margin="34,285,34,0" VerticalAlignment="Top" HorizontalAlignment="Center" Foreground="#FFE6E6E6"/>
        <TextBlock TextWrapping="Wrap" Text="Sign in with a Microsoft account" FontSize="30" FontFamily="Oswald" Margin="0,375,0,0" VerticalAlignment="Top" HorizontalAlignment="Center" Foreground="#FFED197A" Visibility="Collapsed"/>
        <TextBlock TextWrapping="Wrap" Text="Sign in with a Facebook account" FontSize="30" FontFamily="Oswald" Margin="0,450,0,0" VerticalAlignment="Top" HorizontalAlignment="Center" Foreground="#FF17AA9E" Visibility="Collapsed"/>
        <TextBlock TextWrapping="Wrap" Text="Sign in" FontSize="30" FontFamily="Oswald" Margin="0,525,0,0" VerticalAlignment="Top" HorizontalAlignment="Center" Foreground="#FFED197A" Visibility="Collapsed"/>
        <Image x:Name="image3" HorizontalAlignment="Center" Height="178" Margin="0,90,0,0" VerticalAlignment="Top" Width="501" Source="Assets/WideLogoHiresTransparant.png"/>
        <Image x:Name="image2" HorizontalAlignment="Center" Height="53" Margin="0,375,0,0" VerticalAlignment="Top" Width="316" Source="Assets/LoginButtons/LoginMS.png" Stretch="Fill" Tapped="LoginMicrosoft" />
        <Image x:Name="image" HorizontalAlignment="Center" Height="53" Margin="0,450,0,0" VerticalAlignment="Top" Width="316" Source="Assets/LoginButtons/LoginFB.png" Stretch="Fill" Tapped="LoginFacebook" />
        <Image x:Name="image1" HorizontalAlignment="Center" Height="53" Margin="0,525,0,0" VerticalAlignment="Top" Width="316" Source="Assets/LoginButtons/Login.png" Stretch="Fill" Tapped="Login" />
        <ProgressRing x:Name="pgWait" Height="100" Width="100" Foreground="#FFED197A"/>
    </Grid>
    <VisualStateManager.VisualStateGroups>
        <VisualStateGroup x:Name="ApplicationViewStates">
            <VisualState x:Name="FullScreenLandscape"/>
            <VisualState x:Name="Filled"/>
            <VisualState x:Name="FullScreenPortrait">
                <Storyboard></Storyboard>
            </VisualState>
            <VisualState x:Name="Snapped">
                <Storyboard>
                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(FrameworkElement.Width)" Storyboard.TargetName="image">
                        <DiscreteObjectKeyFrame KeyTime="0">
                            <DiscreteObjectKeyFrame.Value>
                                <x:Double>284.4</x:Double>
                            </DiscreteObjectKeyFrame.Value>
                        </DiscreteObjectKeyFrame>
                    </ObjectAnimationUsingKeyFrames>
                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(FrameworkElement.Height)" Storyboard.TargetName="image">
                        <DiscreteObjectKeyFrame KeyTime="0">
                            <DiscreteObjectKeyFrame.Value>
                                <x:Double>47.7</x:Double>
                            </DiscreteObjectKeyFrame.Value>
                        </DiscreteObjectKeyFrame>
                    </ObjectAnimationUsingKeyFrames>
                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(FrameworkElement.Width)" Storyboard.TargetName="image1">
                        <DiscreteObjectKeyFrame KeyTime="0">
                            <DiscreteObjectKeyFrame.Value>
                                <x:Double>284.4</x:Double>
                            </DiscreteObjectKeyFrame.Value>
                        </DiscreteObjectKeyFrame>
                    </ObjectAnimationUsingKeyFrames>
                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(FrameworkElement.Height)" Storyboard.TargetName="image1">
                        <DiscreteObjectKeyFrame KeyTime="0">
                            <DiscreteObjectKeyFrame.Value>
                                <x:Double>47.7</x:Double>
                            </DiscreteObjectKeyFrame.Value>
                        </DiscreteObjectKeyFrame>
                    </ObjectAnimationUsingKeyFrames>
                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(FrameworkElement.Width)" Storyboard.TargetName="image2">
                        <DiscreteObjectKeyFrame KeyTime="0">
                            <DiscreteObjectKeyFrame.Value>
                                <x:Double>284.4</x:Double>
                            </DiscreteObjectKeyFrame.Value>
                        </DiscreteObjectKeyFrame>
                    </ObjectAnimationUsingKeyFrames>
                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(FrameworkElement.Height)" Storyboard.TargetName="image2">
                        <DiscreteObjectKeyFrame KeyTime="0">
                            <DiscreteObjectKeyFrame.Value>
                                <x:Double>47.7</x:Double>
                            </DiscreteObjectKeyFrame.Value>
                        </DiscreteObjectKeyFrame>
                    </ObjectAnimationUsingKeyFrames>
                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(FrameworkElement.Width)" Storyboard.TargetName="textBlock">
                        <DiscreteObjectKeyFrame KeyTime="0">
                            <DiscreteObjectKeyFrame.Value>
                                <x:Double>252</x:Double>
                            </DiscreteObjectKeyFrame.Value>
                        </DiscreteObjectKeyFrame>
                    </ObjectAnimationUsingKeyFrames>
                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(FrameworkElement.Height)" Storyboard.TargetName="textBlock">
                        <DiscreteObjectKeyFrame KeyTime="0">
                            <DiscreteObjectKeyFrame.Value>
                                <x:Double>60</x:Double>
                            </DiscreteObjectKeyFrame.Value>
                        </DiscreteObjectKeyFrame>
                    </ObjectAnimationUsingKeyFrames>
                    <DoubleAnimation Duration="0" To="39" Storyboard.TargetProperty="(TextBlock.FontSize)" Storyboard.TargetName="textBlock" d:IsOptimized="True"/>
                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(FrameworkElement.Width)" Storyboard.TargetName="image3">
                        <DiscreteObjectKeyFrame KeyTime="0">
                            <DiscreteObjectKeyFrame.Value>
                                <x:Double>292</x:Double>
                            </DiscreteObjectKeyFrame.Value>
                        </DiscreteObjectKeyFrame>
                    </ObjectAnimationUsingKeyFrames>
                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(FrameworkElement.Height)" Storyboard.TargetName="image3">
                        <DiscreteObjectKeyFrame KeyTime="0">
                            <DiscreteObjectKeyFrame.Value>
                                <x:Double>103</x:Double>
                            </DiscreteObjectKeyFrame.Value>
                        </DiscreteObjectKeyFrame>
                    </ObjectAnimationUsingKeyFrames>
                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(FrameworkElement.Margin)" Storyboard.TargetName="image3">
                        <DiscreteObjectKeyFrame KeyTime="0">
                            <DiscreteObjectKeyFrame.Value>
                                <Thickness>0,119,0,0</Thickness>
                            </DiscreteObjectKeyFrame.Value>
                        </DiscreteObjectKeyFrame>
                    </ObjectAnimationUsingKeyFrames>
                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(FrameworkElement.HorizontalAlignment)" Storyboard.TargetName="image3">
                        <DiscreteObjectKeyFrame KeyTime="0">
                            <DiscreteObjectKeyFrame.Value>
                                <HorizontalAlignment>Stretch</HorizontalAlignment>
                            </DiscreteObjectKeyFrame.Value>
                        </DiscreteObjectKeyFrame>
                    </ObjectAnimationUsingKeyFrames>
                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(FrameworkElement.HorizontalAlignment)" Storyboard.TargetName="textBlock">
                        <DiscreteObjectKeyFrame KeyTime="0">
                            <DiscreteObjectKeyFrame.Value>
                                <HorizontalAlignment>Stretch</HorizontalAlignment>
                            </DiscreteObjectKeyFrame.Value>
                        </DiscreteObjectKeyFrame>
                    </ObjectAnimationUsingKeyFrames>
                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(FrameworkElement.HorizontalAlignment)" Storyboard.TargetName="image2">
                        <DiscreteObjectKeyFrame KeyTime="0">
                            <DiscreteObjectKeyFrame.Value>
                                <HorizontalAlignment>Stretch</HorizontalAlignment>
                            </DiscreteObjectKeyFrame.Value>
                        </DiscreteObjectKeyFrame>
                    </ObjectAnimationUsingKeyFrames>
                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(FrameworkElement.HorizontalAlignment)" Storyboard.TargetName="image">
                        <DiscreteObjectKeyFrame KeyTime="0">
                            <DiscreteObjectKeyFrame.Value>
                                <HorizontalAlignment>Stretch</HorizontalAlignment>
                            </DiscreteObjectKeyFrame.Value>
                        </DiscreteObjectKeyFrame>
                    </ObjectAnimationUsingKeyFrames>
                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(FrameworkElement.HorizontalAlignment)" Storyboard.TargetName="image1">
                        <DiscreteObjectKeyFrame KeyTime="0">
                            <DiscreteObjectKeyFrame.Value>
                                <HorizontalAlignment>Stretch</HorizontalAlignment>
                            </DiscreteObjectKeyFrame.Value>
                        </DiscreteObjectKeyFrame>
                    </ObjectAnimationUsingKeyFrames>
                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(FrameworkElement.HorizontalAlignment)" Storyboard.TargetName="pgWait">
                        <DiscreteObjectKeyFrame KeyTime="0">
                            <DiscreteObjectKeyFrame.Value>
                                <HorizontalAlignment>Stretch</HorizontalAlignment>
                            </DiscreteObjectKeyFrame.Value>
                        </DiscreteObjectKeyFrame>
                    </ObjectAnimationUsingKeyFrames>
                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Visibility)" Storyboard.TargetName="image2">
                        <DiscreteObjectKeyFrame KeyTime="0">
                            <DiscreteObjectKeyFrame.Value>
                                <Visibility>Visible</Visibility>
                            </DiscreteObjectKeyFrame.Value>
                        </DiscreteObjectKeyFrame>
                    </ObjectAnimationUsingKeyFrames>
                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(FrameworkElement.Margin)" Storyboard.TargetName="textBlock">
                        <DiscreteObjectKeyFrame KeyTime="0">
                            <DiscreteObjectKeyFrame.Value>
                                <Thickness>34,252,34,0</Thickness>
                            </DiscreteObjectKeyFrame.Value>
                        </DiscreteObjectKeyFrame>
                    </ObjectAnimationUsingKeyFrames>
                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(FrameworkElement.Margin)" Storyboard.TargetName="image2">
                        <DiscreteObjectKeyFrame KeyTime="0">
                            <DiscreteObjectKeyFrame.Value>
                                <Thickness>18,342,18,0</Thickness>
                            </DiscreteObjectKeyFrame.Value>
                        </DiscreteObjectKeyFrame>
                    </ObjectAnimationUsingKeyFrames>
                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(FrameworkElement.Margin)" Storyboard.TargetName="image">
                        <DiscreteObjectKeyFrame KeyTime="0">
                            <DiscreteObjectKeyFrame.Value>
                                <Thickness>18,415,18,0</Thickness>
                            </DiscreteObjectKeyFrame.Value>
                        </DiscreteObjectKeyFrame>
                    </ObjectAnimationUsingKeyFrames>
                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(FrameworkElement.Margin)" Storyboard.TargetName="image1">
                        <DiscreteObjectKeyFrame KeyTime="0">
                            <DiscreteObjectKeyFrame.Value>
                                <Thickness>18,488,18,0</Thickness>
                            </DiscreteObjectKeyFrame.Value>
                        </DiscreteObjectKeyFrame>
                    </ObjectAnimationUsingKeyFrames>
                </Storyboard>
            </VisualState>
        </VisualStateGroup>
    </VisualStateManager.VisualStateGroups>
</Grid> 
```

（状态是通过记录生成的）简短：堡垒测试我正在做几件事，改变图像的宽度和高度并改变对齐方式

我错过了什么？我认为这是一件很小的事情，但我不知道是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T17:00:15.830

感谢这篇文章，我解决了我的问题。 [如何在 Windows 8 Metro 中以编程方式响应 Snap](https://stackoverflow.com/questions/10362566/how-to-programmatically-respond-to-snap-in-windows-8-metro)

我不知道这是否是一个好的解决方案，但它确实有效。

所以我将构造函数更改为：

```
public LoginPage()
{
    this.InitializeComponent();
    // Register for the window resize event
    Window.Current.SizeChanged += WindowSizeChanged;  
} 
```

Window size changed 事件处理状态并激活正确的状态。

```
private void WindowSizeChanged(object sender, Windows.UI.Core.WindowSizeChangedEventArgs e)
{
    // Obtain view state by explicitly querying for it
    ApplicationViewState viewState = ApplicationView.Value;
    if (viewState == ApplicationViewState.Filled)
    {
        System.Diagnostics.Debug.WriteLine("viewState is Filled");
    }
    else if (viewState == ApplicationViewState.FullScreenLandscape)
    {
        System.Diagnostics.Debug.WriteLine("viewState is FullScreenLandscape");
    }
    else if (viewState == ApplicationViewState.Snapped)
    {
        System.Diagnostics.Debug.WriteLine("viewState is Snapped");
        //Activate the Snapped state
        VisualStateManager.GoToState(this, "Snapped", true);
    }
    else if (viewState == ApplicationViewState.FullScreenPortrait)
    {
        System.Diagnostics.Debug.WriteLine("viewState is FullScreenPortrait");
    }
    else
    {
        System.Diagnostics.Debug.WriteLine("viewState is something unexpected");
    }
} 
```

也许有更好的方法来解决这个问题？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T18:07:52.780

有更好的方法来解决您的问题。您必须将您的视觉状态添加到布局根（当然是网格）。

```
<common:LayoutAwarePage
    x:Name="pageRoot"
    x:Class="MyApp.LoginPage"
    DataContext="{Binding DefaultViewModel, RelativeSource={RelativeSource Self}}"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:Jukebox.Windows8Metro"
    xmlns:common="using:Jukebox.Windows8Metro.Common"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d">
      <Grid x:Name="LayoutRoot"> 
        <Grid x:Name="foo">
            <!--Your stuff-->
        </Grid>
        <VisualStateManager.VisualStateGroups>    
            <VisualStateGroup x:Name="ApplicationViewStates">
                <VisualState x:Name="FullScreenLandscape"/>
                <VisualState x:Name="Filled"/>
                <VisualState x:Name="FullScreenPortrait"/>
                <VisualState x:Name="Snapped">
                    <Storyboard>
                        <!--Sample-->
                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="foo" Storyboard.TargetProperty="Visibility">
                            <DiscreteObjectKeyFrame KeyTime="0" Value="Visible"/>
                        </ObjectAnimationUsingKeyFrames>
                    </Storyboard>
                </VisualState>
            </VisualStateGroup>
        </VisualStateManager.VisualStateGroups>
    </Grid>
</common:LayoutAwarePage> 
```

您应该避免在代码后面处理您的视觉状态。当您的页面将更改他的视觉状态（例如捕捉）时，视图将使用您在 snapp 部分中提供的内容进行更新（在此示例中，什么都不会改变，您可以简单地删除“可见”并添加“折叠”，并且还向网格添加一种颜色以查看更改）。

# java - 代码运行不正常 - 单词中间

> ID：15462316
> 
> 赞同：-3
> 
> 时间：2013-03-17T15:08:52.030
> 
> 标签：java

我正在编写代码来查看给定字符串的中间是否有 xyz。如果 xyz 出现一次，则此方法有效，但当它出现多次时，它并不总是有效。

```
public boolean xyzMiddle(String str) {
  if (str.length() <= 2) {
    return false;
  }
  int count1 = 0;
  int count2 = 0;
  for (int i=(str.length()-2)/2; i<str.length()-2; i++) {
    if (str.substring(i, i+3).equals("xyz")) {
      count1 = str.substring(0, i).length();
      count2 = str.substring(i+3).length();
    }
  }
  if (count1 == count2 || count1+1 == count2 || count2+1 == count1) {
    return true;
  }
  return false;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T15:31:43.813

这将起作用：

```
int middle = (str.length() - 2) / 2;
return "xyz".equals(str.substring(middle, middle + 3)); 
```

如果 的长度`str`是偶数，则可能前`xyz`比后多一个字母。如果您希望它在之后而不是之前，则必须减去三而不是二。如果你想完全禁止这个，你首先需要`if`检查字符串的长度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T15:11:39.230

第 1 步：查看[Java SE 6 api 文档](http://docs.oracle.com/javase/6/docs/api/)。
第 2 步：阅读 String 上的条目。
第 3 步：试试这个： String.split("xyz");

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T15:13:25.143

你的方法过于复杂……你应该使用String.split("xyz")，然后检查返回数组的大小，如果是2，检查两个部分是否相等：

```
public boolean xyzMiddle(String str) {
  String[] temp = str.split("xyz");
  return temp.length == 2 ? temp[0].length == temp[1].length : false;
} 
```

# c++ - C++ 代码从 IP / 以太网摄像机 (AXIS Cam) 捕获图像

> ID：15462323
> 
> 赞同：2
> 
> 时间：2013-03-17T15:09:22.997
> 
> 标签：c++, opencv, ip-camera

我有 4 轴 IP 摄像头。我需要一个代码来从这些摄像头中捕获图像。我有从 USB 摄像头捕获图像的 opencv 代码，但我不知道如何从 IP 摄像头捕获图像。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T15:17:33.387

```
int main()
{
    Mat frame;
    namedWindow("video", 1);
    VideoCapture cap("http://150.214.93.55/mjpg/video.mjpg");
    while ( cap.isOpened() )
    {
        cap >> frame;
        if(frame.empty()) break;

        imshow("video", frame);
        if(waitKey(30) >= 0) break;
    }   
    return 0;
} 
```

不知道，您的网址如何，但 opencv 似乎坚持，它必须以 mjpg 结尾。所以如果没有，诀窍是附加一个虚拟参数：

```
http://my/cool/ip-cam.ie?dummy=video.mjpg 
```

如果您需要同时打开所有 4 个摄像头，则每个摄像头都需要一个 VideoCapture：

```
VideoCapture cap1("url1");
VideoCapture cap2("url2");
VideoCapture cap3("url3");
VideoCapture cap4("url4"); 
```

# eclipse - Google App Engine - 未找到 Maven 插件

> ID：15462330
> 
> 赞同：1
> 
> 时间：2013-03-17T15:10:17.450
> 
> 标签：eclipse, google-app-engine, gwt, maven

我想在我的应用引擎应用程序中运行 Maven。但是，我得到了这个例外：

> 从存储库 [本地 (C:\Users\user.m2\repository)、中央 (http://repo.maven.apache. org/maven2)]: 在任何插件库中都找不到插件

那是我的 Maven 文件：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>test</groupId>
    <artifactId>test</artifactId>
    <version>0.0.1-SNAPSHOT</version>

    <build>
        <sourceDirectory>src</sourceDirectory>
        <resources>
            <resource>
                <directory>src</directory>
                <excludes>
                    <exclude>**/*.java</exclude>
                </excludes>
            </resource>
        </resources>
        <plugins>
            <plugin>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.3.2</version>
                <configuration>
                    <source>1.7</source>
                    <target>1.7</target>
                </configuration>
            </plugin>
            <plugin>
                <artifactId>gwt-maven-plugin</artifactId>
                <configuration>
                    <webappDirectory>/test/war/WEB-INF/classes</webappDirectory>
                </configuration>
            </plugin>
        </plugins>
    </build>

    <repositories>
        <repository>
            <id>wso2</id>
            <url>http://dist.wso2.org/maven2/</url>
        </repository>
        <repository>
            <id>maven-repository-1</id>
            <url>http://repo1.maven.org/maven2/</url>
        </repository>
    </repositories>
    <dependencies>
        <dependency>
            <dependency>
                <groupId>com.google.gwt</groupId>
                <artifactId>gwt-servlet</artifactId>
                <version>2.5.1</version>
                <scope>runtime</scope>
            </dependency>
            <dependency>
                <groupId>com.google.gwt</groupId>
                <artifactId>gwt-user</artifactId>
                <version>2.5.1</version>
                <scope>provided</scope>
            </dependency>
            <groupId>commons-logging</groupId>
            <artifactId>commons-logging</artifactId>
            <version>1.1</version>
            <type>jar</type>
            <scope>compile</scope>
        </dependency>
        <dependency>
            <groupId>log4j</groupId>
            <artifactId>log4j</artifactId>
            <version>1.2.12</version>
            <type>jar</type>
            <scope>compile</scope>
        </dependency>
        <dependency>
            <groupId>org.webharvest.wso2</groupId>
            <artifactId>webharvest-core</artifactId>
            <version>1.0.0.wso2v1</version>
            <type>jar</type>
            <scope>compile</scope>
        </dependency>
        <!-- web harvest pom doesn't track dependencies well -->
        <dependency>
            <groupId>net.sf.saxon</groupId>
            <artifactId>saxon-xom</artifactId>
            <version>8.7</version>
        </dependency>
        <dependency>
            <groupId>org.htmlcleaner</groupId>
            <artifactId>htmlcleaner</artifactId>
            <version>1.55</version>
        </dependency>
        <dependency>
            <groupId>bsh</groupId>
            <artifactId>bsh</artifactId>
            <version>1.3.0</version>
        </dependency>
        <dependency>
            <groupId>commons-httpclient</groupId>
            <artifactId>commons-httpclient</artifactId>
            <version>3.1</version>
        </dependency>
        <dependency>
            <!-- jsoup HTML parser library @ http://jsoup.org/ -->
            <groupId>org.jsoup</groupId>
            <artifactId>jsoup</artifactId>
            <version>1.7.2</version>
        </dependency>
    </dependencies>
</project> 
```

我应该添加什么让它运行？

**更新**

我正在使用这个 Maven 插件，因为我得到：

> 项目的输出目录应设置为 /test/war/WEB-INF/classes

**更新 2**

```
 <plugin>
        <groupId>org.codehaus.mojo</groupId>
        <artifactId>gwt-maven-plugin</artifactId>
        <version>2.5.1</version>
        <configuration>
            <webappDirectory>/test/war/WEB-INF/classes</webappDirectory>
        </configuration>
    </plugin> 
```

我的例外是一样的：

> 项目的输出目录应设置为 /test/war/WEB-INF/classes

我的 Maven 文件：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
<modelVersion>4.0.0</modelVersion>
<groupId>test</groupId>
<artifactId>test</artifactId>
<version>0.0.1-SNAPSHOT</version>

<build>
    <sourceDirectory>src</sourceDirectory>
    <resources>
        <resource>
            <directory>src</directory>
            <excludes>
                <exclude>**/*.java</exclude>
            </excludes>
        </resource>
    </resources>
    <plugins>
        <plugin>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>2.3.2</version>
            <configuration>
                <source>1.7</source>
                <target>1.7</target>
            </configuration>
        </plugin>
        <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>gwt-maven-plugin</artifactId>
            <version>2.5.1</version>
            <configuration>
                <webappDirectory>/test/war/WEB-INF/classes</webappDirectory>
            </configuration>
        </plugin>
    </plugins>
</build>

<repositories>
    <repository>
        <id>wso2</id>
        <url>http://dist.wso2.org/maven2/</url>
    </repository>
    <repository>
        <id>maven-repository-1</id>
        <url>http://repo1.maven.org/maven2/</url>
    </repository>
</repositories>
<dependencies>
    <dependency>
        <dependency>
            <groupId>com.google.gwt</groupId>
            <artifactId>gwt-servlet</artifactId>
            <version>2.5.1</version>
            <scope>runtime</scope>
        </dependency>
        <dependency>
            <groupId>com.google.gwt</groupId>
            <artifactId>gwt-user</artifactId>
            <version>2.5.1</version>
            <scope>provided</scope>
        </dependency>
        <groupId>commons-logging</groupId>
        <artifactId>commons-logging</artifactId>
        <version>1.1</version>
        <type>jar</type>
        <scope>compile</scope>
    </dependency>
    <dependency>
        <groupId>log4j</groupId>
        <artifactId>log4j</artifactId>
        <version>1.2.12</version>
        <type>jar</type>
        <scope>compile</scope>
    </dependency>
    <dependency>
        <groupId>org.webharvest.wso2</groupId>
        <artifactId>webharvest-core</artifactId>
        <version>1.0.0.wso2v1</version>
        <type>jar</type>
        <scope>compile</scope>
    </dependency>
    <!-- web harvest pom doesn't track dependencies well -->
    <dependency>
        <groupId>net.sf.saxon</groupId>
        <artifactId>saxon-xom</artifactId>
        <version>8.7</version>
    </dependency>
    <dependency>
        <groupId>org.htmlcleaner</groupId>
        <artifactId>htmlcleaner</artifactId>
        <version>1.55</version>
    </dependency>
    <dependency>
        <groupId>bsh</groupId>
        <artifactId>bsh</artifactId>
        <version>1.3.0</version>
    </dependency>
    <dependency>
        <groupId>commons-httpclient</groupId>
        <artifactId>commons-httpclient</artifactId>
        <version>3.1</version>
    </dependency>
    <dependency>
        <!-- jsoup HTML parser library @ http://jsoup.org/ -->
        <groupId>org.jsoup</groupId>
        <artifactId>jsoup</artifactId>
        <version>1.7.2</version>
    </dependency>
    <dependency>
<groupId>org.codehaus.mojo</groupId>
<artifactId>gwt-maven-plugin</artifactId>
<version>2.5.1</version> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T03:33:17.893

您还没有提到插件的组 id 或工件 id，并且 maven 正在尝试使用 groupid。

```
 <plugin>
      <groupId>org.codehaus.mojo</groupId>
      <artifactId>gwt-maven-plugin</artifactId>
      <version>2.5.1</version>
    </plugin> 
```

## 参考

1.  您可以在[中央 maven repo](http://search.maven.org/#artifactdetails%7Corg.codehaus.mojo%7Cgwt-maven-plugin%7C2.5.1%7Cmaven-plugin)找到 gwt-maven-plugin 。
2.  关于如何使用[gwt-maven-plugin 的](http://mojo.codehaus.org/gwt-maven-plugin/plugin-info.html)参考。
3.  浏览[GWT+GAE 应用程序](https://code.google.com/p/google-web-toolkit/source/browse/trunk/samples/mobilewebapp/pom.xml)的 Google 团队 pom 示例。

注意 - 我在一个示例项目中测试了你的 pom.xml，没有发现任何错误。

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <groupId>com.insanity.example.gwt</groupId>
    <artifactId>learning</artifactId>
    <version>1.0-SNAPSHOT</version>
    <build>
        <sourceDirectory>src</sourceDirectory>
        <resources>
            <resource>
                <directory>src</directory>
                <excludes>
                    <exclude>**/*.java</exclude>
                </excludes>
            </resource>
        </resources>
        <plugins>
            <plugin>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.3.2</version>
                <configuration>
                    <source>1.7</source>
                    <target>1.7</target>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>gwt-maven-plugin</artifactId>
                <version>2.5.1</version>
                <configuration>
                    <webappDirectory>/test/war/WEB-INF/classes</webappDirectory>
                </configuration>
            </plugin>
        </plugins>
    </build>
    <repositories>
        <repository>
            <id>wso2</id>
            <url>http://dist.wso2.org/maven2/</url>
        </repository>
        <repository>
            <id>maven-repository-1</id>
            <url>http://repo1.maven.org/maven2/</url>
        </repository>
    </repositories>
    <dependencies>
        <dependency>
            <groupId>com.google.gwt</groupId>
            <artifactId>gwt-servlet</artifactId>
            <version>2.5.1</version>
            <scope>runtime</scope>
        </dependency>
        <dependency>
            <groupId>com.google.gwt</groupId>
            <artifactId>gwt-user</artifactId>
            <version>2.5.1</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>commons-logging</groupId>
            <artifactId>commons-logging</artifactId>
            <version>1.1</version>
            <type>jar</type>
            <scope>compile</scope>
        </dependency>
        <dependency>
            <groupId>log4j</groupId>
            <artifactId>log4j</artifactId>
            <version>1.2.12</version>
            <type>jar</type>
            <scope>compile</scope>
        </dependency>
        <dependency>
            <groupId>org.webharvest.wso2</groupId>
            <artifactId>webharvest-core</artifactId>
            <version>1.0.0.wso2v1</version>
            <type>jar</type>
            <scope>compile</scope>
        </dependency>
        <!-- web harvest pom doesn't track dependencies well -->
        <dependency>
            <groupId>net.sf.saxon</groupId>
            <artifactId>saxon-xom</artifactId>
            <version>8.7</version>
        </dependency>
        <dependency>
            <groupId>org.htmlcleaner</groupId>
            <artifactId>htmlcleaner</artifactId>
            <version>1.55</version>
        </dependency>
        <dependency>
            <groupId>bsh</groupId>
            <artifactId>bsh</artifactId>
            <version>1.3.0</version>
        </dependency>
        <dependency>
            <groupId>commons-httpclient</groupId>
            <artifactId>commons-httpclient</artifactId>
            <version>3.1</version>
        </dependency>
        <dependency>
            <!-- jsoup HTML parser library @ http://jsoup.org/ -->
            <groupId>org.jsoup</groupId>
            <artifactId>jsoup</artifactId>
            <version>1.7.2</version>
        </dependency>
    </dependencies>
</project> 
```

![在此处输入图像描述](../Images/12000044b4e15a1a1c572fabbb671864.png)

# c++ - 类型推导后函数模板中的替换顺序是否有保证？

> ID：15462336
> 
> 赞同：11
> 
> 时间：2013-03-17T15:11:22.683
> 
> 标签：c++, templates, c++11, overloading, sfinae

考虑这个函数模板：

```
template<typename T>
typename soft_error<T>::type foo(T, typename hard_error<T>::type)
{ } 
```

`T`在从调用的第一个参数的类型推导出类型之后`foo()`，编译器将继续替换`T`并实例化函数签名。

如果首先执行返回类型的替换，导致简单的替换失败，编译器将在计算重载集并搜索其他可行重载 (SFINAE) 时丢弃此函数模板。

另一方面，如果对第二个函数参数的替换首先发生，导致硬错误（例如，由于在非立即上下文中的替换失败），则整个编译将失败。

**问题：** *对函数参数和返回类型执行替换的顺序是否有任何保证？*

* * *

**注意：** [这个例子](http://liveworkspace.org/code/4cvdpz%2464)似乎表明，在所有主要编译器（VC11 单独测试并给出相同的结果）上，返回类型的替换发生在参数类型的替换之前。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-17T15:11:22.683

*[注意：这原本不是一个自我回答的问题，但我在制作问题时碰巧找到了解决方案]*

* * *

> 对函数参数和返回类型执行替换的顺序是否有任何保证？

**不在现行标准中。**

然而，[**这个缺陷报告**](http://www.open-std.org/jtc1/sc22/wg21/docs/cwg_defects.html#1227)（由[Xeo](https://stackoverflow.com/u/500104)提供）表明确实是这样的。以下是 C++11 标准（已成为[n3485 草案](http://www.open-std.org/JTC1/SC22/WG21/docs/papers/2012/n3485.pdf)的一部分）第 14.8.2/7 段的拟议新措辞：

> 替换发生在函数类型和模板参数声明中使用的所有类型和表达式中。表达式不仅包括常量表达式，例如出现在数组边界或作为非类型模板参数的常量表达式，还包括 sizeof、decltype 和其他允许非常量表达式的上下文中的通用表达式（即非常量表达式）。**替换按词汇顺序进行，并在遇到导致演绎失败的条件时停止**。[...]

[正如Nicol Bolas](https://stackoverflow.com/users/734069/nicol-bolas)在对问题的评论中正确指出的那样，*词法顺序*意味着将在参数类型*之后替换尾随返回类型，*[如此实时示例](http://liveworkspace.org/code/4cvdpz$64)中所示。

# wordpress - Wordpress - 从 WP Super Cache 获取缓存过期日期

> ID：15462341
> 
> 赞同：1
> 
> 时间：2013-03-17T15:12:07.810
> 
> 标签：wordpress

我一直在阅读[http://ocaoimh.ie/wp-super-cache-developers/](http://ocaoimh.ie/wp-super-cache-developers/)但我没有看到任何有关获取当前服务页面的缓存到期日期的信息。

我希望能够获取缓存页面的到期日期并将其作为 html 注释添加到页脚...

关于如何使用附加插件而不是通过修改 WP Super Cache 的核心来做到这一点的任何想法？

谢谢！

杰夫

# php - 意外的 T_string 错误 - 在哪里？

> ID：15462342
> 
> 赞同：-1
> 
> 时间：2013-03-17T15:12:11.357
> 
> 标签：php, pdo, syntax-error

这段代码给了我一个语法错误，但我不知道为什么。

解析错误：语法错误，第 7 行 C:\Users\user\school\infPOPHP2\USBWebserver v8.5\8.5\root\create_db.php 中的意外 T_STRING

第 7 行是

```
$db = new PDO("mysql:host=$hostname;dbname=$dbname",$username,$password); 
```

这是完整的代码

```
<?php
$hostname = "localhost";
$username = "root";
$password = "usbw";
$dbname = "competitie";
try {
    $db = new PDO("mysql:host=$hostname;dbname=$dbname",$username,$password);
    $sql = "CREATE DATABASE IF NOT EXISTS competitie" ;
    $resultaat = $db­>exec($sql);
    $db = NULL;
}
catch(PDOException $e) {
    echo $e­>getMessage();
}
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T15:25:09.970

检查`;`代码中的所有 ' 并将它们替换为常规`;`s (ASCII 59)。
不要使用像 Microsoft Word 这样的花哨的编辑器来编辑代码。

# ruby-on-rails - PG::Error：错误：类型时间的输入语法无效：“2013-03-17”

> ID：15462343
> 
> 赞同：1
> 
> 时间：2013-03-17T15:12:13.820
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.2

试图将用户选择的“f.date_select”日期属性保存到:sizes,:time。

```
PG::Error: ERROR: invalid input syntax for type time: "2013-03-17" : INSERT INTO "sizes" 
```

形式为：尺寸/形式。

```
<%= form_for [@user, @size] do |f| %>
...
<%= f.date_select :time, :start_year => 2007, :end_year => 2014 %>
...
<% end %> 
```

移民：

```
 def change
    add_column  :sizes, :time, :date
 end 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T00:06:13.123

添加一个答案，以便对其他人有所帮助：

`time`是[SQL 关键字](http://www.postgresql.org/docs/current/interactive/sql-keywords-appendix.html)，不能用作 column_name

# c# - 无管理权限的静默卸载 msi 软件包命令

> ID：15462345
> 
> 赞同：0
> 
> 时间：2013-03-17T15:12:28.090
> 
> 标签：c#, .net, visual-studio-2010, windows-installer, setup-project

我正在尝试从我的 Visual Studio 项目中卸载一个程序，但这似乎要求我以管理员身份运行 vs....所以我尝试从 cmd 执行此操作来调试它。

我已经设法从 cmd 使用此命令卸载了 msi setup 项目安装：

msiexec /x {3A40307D-6DF2-4412-842F-B1D848043367} /quiet ，但这仅在我以管理员身份启动 cmd 时有效，没有管理员权限，它不会卸载。我做错了什么，还有其他方法可以得到我想要的结果吗？

我希望能够静默卸载应用程序，而无需要求用户以管理员身份登录。

编辑：

这是日志的结果：

错误 1001。错误 1001。无法删除文件 C:\ProgramData\XXX.InstallState。调试：错误 2769：自定义操作 _F6174138_B428_4AB6_9FEF_C4DD7A69BDC0.uninstall 未关闭 1 个 MSIHANDLE。安装程序在安装此软件包时遇到意外错误。这可能表明此软件包有问题。错误代码是 2769。参数是：_F6174138_B428_4AB6_9FEF_C4DD7A69BDC0.uninstall, 1, CustomAction _F6174138_B428_4AB6_9FEF_C4DD7A69BDC0.uninstall 返回实际错误代码 1603（请注意，如果翻译发生在沙箱内，这可能不是 100% 准确：InstallExecute5:144 结束。返回值 3。操作于 17:54:40 结束：安装。返回值 3\. MSI (s) (F0:3C) [17:54:40:355]: Product: XXX -- 移除失败。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T15:29:41.723

看来您在这里有几个选择。所有这些都需要创建一个从一开始就不需要管理员权限的 msi。如果 msi 从一开始就需要它们（例如，您无法控制 msi 的创建），则无法绕过它。这完全取决于正在编辑的文件是否真的需要管理员权限。查看此答案：[如何创建不需要管理员访问权限的 Windows 安装程序 MSI](https://stackoverflow.com/questions/4157365/how-can-i-create-a-windows-installer-msi-that-does-not-require-admin-access)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T21:31:46.547

日志文件中的错误表明自定义操作正在崩溃。您需要调查该问题的根本原因。我的猜测是自定义操作需要提升（管理员权限）才能正常工作，但没有标记为延迟（即在 MSI 提升的部分运行）。

如果您从添加/删除程序（程序和功能）启动 MSI 的卸载，则不应提示您输入提升的凭据。因此，根本问题可能是这个自定义操作。

# php - 将数据从 php 解析到 android 列表视图时出错

> ID：15462348
> 
> 赞同：0
> 
> 时间：2013-03-17T15:12:47.293
> 
> 标签：php, android, json

我有我的 php 网络服务，它从我的论坛中检索主题列表，我使用 JSON 将其缩减为我的 Android 应用程序中的列表视图。

不幸的是，在运行应用程序时，当我进入应该看到该列表的页面时，我得到黑色的空白屏幕，并且在我的 logcat 中我得到了这个错误

```
03-17 15:00:04.189: E/JSON Parser(379): Error parsing data org.json.JSONException: Value <?xml of type java.lang.String cannot be converted to JSONObject 
```

这是我的 JSONparser 类

```
package com.example.androidhive.library;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.UnsupportedEncodingException;
import java.util.List;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.NameValuePair;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.client.utils.URLEncodedUtils;
import org.apache.http.impl.client.DefaultHttpClient;
import org.json.JSONException;
import org.json.JSONObject;

import android.util.Log;

public class JSONParser {

    static InputStream is = null;
    static JSONObject jObj = null;
    static String json = "";

    // constructor
    public JSONParser() {

    }

    public JSONObject getJSONFromUrl(String url, List<NameValuePair> params) {

        // Making HTTP request
        try {
            // defaultHttpClient
            DefaultHttpClient httpClient = new DefaultHttpClient();
            HttpPost httpPost = new HttpPost(url);
            httpPost.setEntity(new UrlEncodedFormEntity(params));

            HttpResponse httpResponse = httpClient.execute(httpPost);
            HttpEntity httpEntity = httpResponse.getEntity();
            is = httpEntity.getContent();

        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

        try {
            BufferedReader reader = new BufferedReader(new InputStreamReader(
                    is, "iso-8859-1"), 8);
            StringBuilder sb = new StringBuilder();
            String line = null;
            while ((line = reader.readLine()) != null) {
                sb.append(line + "\n");

            }
            is.close();
            json = sb.toString();
            Log.e("JSON", json);
        } catch (Exception e) {
            //Log.e("Buffer Error", "Error converting result " + e.toString());
        }

        // try parse the string to a JSON object
        try {
            jObj = new JSONObject(json);            
        } catch (JSONException e) {
            Log.e("JSON Parser", "Error parsing data " + e.toString());
        }       

        // return JSON String
        return jObj;

    }

     public JSONObject makeHttpRequest(String url, String method,
            List<NameValuePair> params) {

        // Making HTTP request
        try {

            // check for request method
            if(method == "POST"){
            // request method is POST
            // defaultHttpClient
            DefaultHttpClient httpClient = new DefaultHttpClient();
            HttpPost httpPost = new HttpPost(url);
            httpPost.setEntity(new UrlEncodedFormEntity(params));

            HttpResponse httpResponse = httpClient.execute(httpPost);
            HttpEntity httpEntity = httpResponse.getEntity();
            is = httpEntity.getContent();

            }else if(method == "GET"){
            // request method is GET
            DefaultHttpClient httpClient = new DefaultHttpClient();
            String paramString = URLEncodedUtils.format(params, "utf-8");
            url += "?" + paramString;
            HttpGet httpGet = new HttpGet(url);

            HttpResponse httpResponse = httpClient.execute(httpGet);
            HttpEntity httpEntity = httpResponse.getEntity();
            is = httpEntity.getContent();
            }           

        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

        try {
            BufferedReader reader = new BufferedReader(new InputStreamReader(
                is, "iso-8859-1"), 8);
            StringBuilder sb = new StringBuilder();
            String line = null;
            while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
            }
            is.close();
            json = sb.toString();
        } catch (Exception e) {
            Log.e("Buffer Error", "Error converting result " + e.toString());
        }

        // try parse the string to a JSON object
        try {
            jObj = new JSONObject(json);
        } catch (JSONException e) {
            Log.e("JSON Parser", "Error parsing data " + e.toString());
        }

        // return JSON String
        return jObj;

        }

} 
```

我有两个公共 JSONobject，第一个用于用户注册。登录，第二个用于主题列表视图。我假设错误来自哪里

这是php

```
 <?php

/*
 * Following code will list all the products
 */

// array for JSON response
$response = array();

// include db connect class
require_once __DIR__ . 'DB_Connect.php';

// connecting to db
$db = new DB_CONNECT();

// get all products from products table
if(isset($_GET['parent']))
{
    $id = intval($_GET['parent']);}
$result = mysql_query("select t.id, t.title, u.username as author,  from topics as t  left join user as u where t.parent="'.$id.'" and t.id2=1 group by t.id order by t.timestamp2 desc');
") or die(mysql_error());

// check for empty result
if (mysql_num_rows($result) > 0) {
    // looping through all results
    // products node
    $response["topics"] = array();

    while ($row = mysql_fetch_array($result)) {
    // temp user array
    $topic = array();
    $topic["tid"] = $row["t.id"];
    $topic["name"] = $row["t.title"];
    $topic["author"] = $row["u.username"];

    // push single product into final response array

    array_push($response["topics"], $topic);
    echo json_encode($response);
    }
    // success
    $response["success"] = 1;

    // echoing JSON response
    echo json_encode($response);
} else {
    // no products found
    $response["success"] = 0;
    $response["message"] = "No topics found";

    // echo no users JSON
    echo json_encode($response);
}
?> 
```

这是我从服务器得到的字符串

```
03-17 16:04:21.599: E/JSON(502): <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
03-17 16:04:21.599: E/JSON(502):   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
03-17 16:04:21.599: E/JSON(502): <html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
03-17 16:04:21.599: E/JSON(502): <head>
03-17 16:04:21.599: E/JSON(502): <title>Object not found!</title>
03-17 16:04:21.599: E/JSON(502): <link rev="made" href="mailto:postmaster@localhost" />
03-17 16:04:21.599: E/JSON(502): <style type="text/css"><!--/*--><![CDATA[/*><!--*/ 
03-17 16:04:21.599: E/JSON(502):     body { color: #000000; background-color: #FFFFFF; }
03-17 16:04:21.599: E/JSON(502):     a:link { color: #0000CC; }
03-17 16:04:21.599: E/JSON(502):     p, address {margin-left: 3em;}
03-17 16:04:21.599: E/JSON(502):     span {font-size: smaller;}
03-17 16:04:21.599: E/JSON(502): /*]]>*/--></style>
03-17 16:04:21.599: E/JSON(502): </head>
03-17 16:04:21.599: E/JSON(502): <body>
03-17 16:04:21.599: E/JSON(502): <h1>Object not found!</h1>
03-17 16:04:21.599: E/JSON(502): <p>
03-17 16:04:21.599: E/JSON(502):     The requested URL was not found on this server.
03-17 16:04:21.599: E/JSON(502):   
03-17 16:04:21.599: E/JSON(502):     If you entered the URL manually please check your
03-17 16:04:21.599: E/JSON(502):     spelling and try again.
03-17 16:04:21.599: E/JSON(502):   
03-17 16:04:21.599: E/JSON(502): </p>
03-17 16:04:21.599: E/JSON(502): <p>
03-17 16:04:21.599: E/JSON(502): If you think this is a server error, please contact
03-17 16:04:21.599: E/JSON(502): the <a href="mailto:postmaster@localhost">webmaster</a>.
03-17 16:04:21.599: E/JSON(502): </p>
03-17 16:04:21.599: E/JSON(502): <h2>Error 404</h2>
03-17 16:04:21.599: E/JSON(502): <address>
03-17 16:04:21.599: E/JSON(502):   <a href="/">10.0.2.2</a><br />
03-17 16:04:21.599: E/JSON(502):   <span>Apache/2.4.3 (Win32) OpenSSL/1.0.1c PHP/5.4.7</span>
03-17 16:04:21.599: E/JSON(502): </address>
03-17 16:04:21.599: E/JSON(502): </body>
03-17 16:04:21.599: E/JSON(502): </html>
03-17 16:04:21.599: E/JSON Parser(502): Error parsing data org.json.JSONException: Value <?xml of type java.lang.String cannot be converted to JSONObject 
```

url 并从服务器获取数据，参数是

```
private static String url_all_topics = "http://10.0.2.2/android_login_api/list_of_topics.php";

 // JSON Node names
 private static final String TAG_SUCCESS = "success";
 private static final String TAG_TOPICS = "topics";
 private static final String TAG_TOPICSID = "t.id";
private static final String TAG_TOPICTITLE = "t.title";
private static final String TAG_TOPICAUTHOR = "u.username"; 
```

我在在线教程中找到了这个，但我对其进行了编辑以满足我的要求

我希望你对我有耐心，因为我不是很好，而且我是这方面的新手，想学习

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T16:36:12.430

服务器返回[HTTP 404](http://en.wikipedia.org/wiki/HTTP_404)错误代码，这意味着**您的脚本根本没有运行**。

验证您在应用程序中访问的 URL 是否正确。

# javascript - 底层隐藏段落影响定位（循环、砌体）

> ID：15462351
> 
> 赞同：0
> 
> 时间：2013-03-17T15:13:01.353
> 
> 标签：javascript, cycle, jquery-masonry, paragraph

归结为幻灯片末尾的段落决定了项目框的整体最小高度，从而影响了整个网站的定位。

网站链接：http: [//degrafischeprofeet.be/website/](http://degrafischeprofeet.be/website/)（只需单击任何图像以进一步移动幻灯片，请注意调整大小在 Firefox 或 IE 中不起作用，我也需要修复）

和一张图片：http: [//i.imgur.com/77bYC4r.jpg](http://i.imgur.com/77bYC4r.jpg)

我不知道问题到底出在哪里，所以我只是粘贴文本部门的 css

```
.projecttxt {
    text-align: left;
    padding: 3px;
    border-style: solid;
    border-width: 5px;
    border-color: #000;
    color: #000;
    display: none;
    margin-top: 8px;
    font-family:"georgia";
    padding: 5px 5px 0;
    float: left;
    cursor: pointer;
    position: relative !important;
}

<script>
$('#projectslide').cycle({ 
fx: 'fade', 
speed: 0, 
next: this, 
timeout: 0, 
fit: 1, 
slideResize: 1, 
reshape: 1, 
after: function() { $('#container').masonry('reload'); } });
</script>

  <div class="box col2">
<div id="projectslide" class="projectslide">
                        <img class="first" src="projects/5.jpg" alt="1">
                        <img src="projects/1.jpg" alt="2">
                        <img src="projects/7.jpg" alt="3">
                        <img src="projects/6.gif" alt="1">
                        <img src="projects/4.png" alt="1">
                        <div class="projecttxt">
                                                    <h1>Titeltje hier</h1>
                                                    <p>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text
                                                    ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. 
                                                    It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. 
                                                    It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently 
                                                    with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.</p>
                                                    </div>
        </div> 
```

提前致谢！

# jquery - jQuery：追加和替换内容

> ID：15462352
> 
> 赞同：0
> 
> 时间：2013-03-17T15:13:06.517
> 
> 标签：jquery, html, css, append

我在使用点击事件附加和替换内容时遇到了一些问题。有 3 行的 div，每行之间是一个 100% 宽度的隐藏 div，单击其中一个 div 将显示最近的隐藏 div，重新加载砌体插件，并在其中附加相关内容。
这是一个 jsfiddle：http: [//jsfiddle.net/wUEkE/9/](http://jsfiddle.net/wUEkE/9/)
jQuery：

```
$(document).ready(function() {  
var $container = $('#listings-wrap');

$(function(){
 $container.imagesLoaded(function(){
  $('#listings-wrap').masonry({
    itemSelector : '.listings-item, .preview-listing',
    columnWidth: 4,
    gutterWidth: 10,
    isFitWidth: true,
    isAnimated: true
  });
});
});
});

$(document).ready(function(){

$(".listings-item").click(function() {

$('.test').hide();  
    $(this).nextAll('.hidden:first').removeClass('hidden').addClass('preview-listing').append($('#post'+$(this).attr('hook')).show()).hide().delay(400).fadeIn("slow");
 $('#listings-wrap').masonry('reload');
 });

}); 
```

如您所见，我的问题在于单击已显示的`.listing-item`时间，而不是替换最近的div 内的内容，它不起作用，只是将内容放在顶部。 这个想法是每行之后都会有一个 .hidden div，例如单击前 3 个中的一个会将相关内容附加到 的第一个实例中，单击 4 到 6 会将其附加到的第二个实例中等等，但我不知道如何让它工作。`.hidden``.hidden`
`.listing-item``.hidden``.hidden`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T17:01:00.273

感谢您提供 jsfiddle。我做了一些更改，您可以在这里看到：http: [//jsfiddle.net/wUEkE/10/](http://jsfiddle.net/wUEkE/10/)

主要问题是您调用`removeClass('hidden')`了 ，因此该`nextAll('.hidden:first')`调用不适用于已经显示的预览列表（选择器没有找到正确的预览列表，因为它不再具有“隐藏”类）。

我对其进行了更改，以便预览列表始终具有`preview-listing`类，因此无论是否显示它们，我们都可以轻松选择它们。另一个缺失的方面是隐藏其他预览列表（如果它已经显示）。这是点击处理程序的主体现在的样子：

```
$('.test').hide();
var previewForThis = $(this).nextAll('.preview-listing:first');
var otherPreviews = $(this).siblings('.preview-listing').not(previewForThis);
otherPreviews
    .addClass('excluded') // exclude other previews from masonry layout
    .hide();
previewForThis
    .removeClass('excluded')
    .append($('#post' + $(this).attr('hook')).show())
    .hide()
    .delay(400)
    .fadeIn("slow");
$('#listings-wrap').masonry('reload'); 
```

我还将砌体的 itemSelector 更改为：

```
'.listings-item, .preview-listing:not(.excluded)' 
```

并且对 html 和 css 进行了一些更改。

如果您还有其他问题，请告诉我，我会更新此答案。

# jquery - jQuery调用函数

> ID：15462353
> 
> 赞同：0
> 
> 时间：2013-03-17T15:13:08.670
> 
> 标签：jquery, function

这是我为每个 div 制作动画的 jquery 代码。但是需要一些时间来更新每个动画（每个动画都是一样的）。是否可以使用相同的动画代码声明一个函数并在 jquery 代码中调用它（在每个鼠标悬停函数中）

**jQuery**

```
$(document).ready(function()
{

    $("#s1").mouseover
    (
        function test()
        {
            $(this).stop().animate({borderColor:"#49A655",backgroundColor:"#333", color:"#49A655"},300);
        }
    );

    $("#s2").mouseover
    (
        function()
        {
            $(this).stop().animate({borderColor:"#49A655",backgroundColor:"#333", color:"#49A655"},300);
        }
    );

    $("#s3").mouseover
    (
        function()
        {
            $(this).stop().animate({borderColor:"#49A655",backgroundColor:"#333", color:"#49A655"},300);
        }
    );

    $("#s4").mouseover
    (
        function()
        {
            $(this).stop().animate({borderColor:"#49A655",backgroundColor:"#333", color:"#49A655"},300);
        }
    );

    $("#s5").mouseover
    (
        function()
        {
            $(this).stop().animate({borderColor:"#49A655",backgroundColor:"#333", color:"#49A655"},300);
        }
    );

    $("#s6").mouseover
    (
        function()
        {
            $(this).stop().animate({borderColor:"#49A655",backgroundColor:"#333", color:"#49A655"},300);
        }
    );

    $("#s7").mouseover
    (
        function()
        {
            $(this).stop().animate({borderColor:"#49A655",backgroundColor:"#333", color:"#49A655"},300);
        }
    );

    $("#s8").mouseover
    (
        function()
        {
            $(this).stop().animate({borderColor:"#49A655",backgroundColor:"#333", color:"#49A655"},300);
        }
    );

    $(".speeddial").mouseout
    (
        function()
        {
            $(this).stop().animate({borderColor:"#AEAEAE",backgroundColor:"#49A655", color:"#FFFFFF"},300);
        }
    );      
} 
```

);

**HTML**

```
 <a href="#"><div class="speeddial" id="s1">POPIS GOLUBOVA</div></a> 
  <a href="#"><div class="speeddial" id="s2">POPIS GOLUBOVA</div></a> 
  <a href="#"><div class="speeddial" id="s3">POPIS GOLUBOVA</div></a> 
  <a href="#"><div class="speeddial" id="s4">POPIS GOLUBOVA</div></a> 
    <div style="clear:both; margin-top:25px;"></div>
  <a href="#"><div class="speeddial" id="s5">POPIS GOLUBOVA</div></a> 
  <a href="#"><div class="speeddial" id="s6">POPIS GOLUBOVA</div></a> 
  <a href="#"><div class="speeddial" id="s7">POPIS GOLUBOVA</div></a> 
  <a href="#"><div class="speeddial" id="s8">POPIS GOLUBOVA</div></a> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T15:14:26.510

您可以单独声明该函数：

```
//(I indented some of it for easier readability)
function mouseOverFunc() {
    $(this).stop().animate({
        borderColor: "#49A655",
        backgroundColor: "#333",
        color: "#49A655"
    }, 300);
} 
```

然后：

```
$("#s1").mouseover(mouseOverFunc)
$("#s2").mouseover(mouseOverFunc)
$("#s3").mouseover(mouseOverFunc)
// etc. 
```

此外，由于它们都具有相同的类，因此您可以使其更加简洁：

```
$(".speeddial").mouseover(mouseOverFunc) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T15:28:22.727

使用多重选择器，如下所示：

```
$("#s1, #s2, #s3, #s4, #s5, #s6, #s7").mouseover( function(){
     $(this).stop().animate({borderColor:"#49A655",backgroundColor:"#333", color:"#49A655"},300);
}); 
```

或者更简单地说：

```
$(".speeddial").mouseover( function(){
     $(this).stop().animate({borderColor:"#49A655",backgroundColor:"#333", color:"#49A655"},300);
}); 
```

为了提高性能，您应该使用 CSS 3 过渡，并且只使用 jquery 和 fallback：

```
.speeddial {
   //your CSS code
   border-color: #AEAEAE;
   background-color:#49A655;

   -moz-transition: all 300ms linear;
   -webkit-transition: all 300ms linear;
   -o-transition: all 300ms linear;
   transition: all 300ms linear;
}

.speeddial:hover {
    background-color: #333;
    border-color: #49A655;
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T15:17:13.240

所有`mouseenter`功能似乎都相同？如果我错了，请纠正我，并且所有锚标签都具有相同的类，因此将其应用于类而不是 ID。

试试这个。

```
$('.speeddial').on('mouseenter',function(){
   $(this).stop().animate({borderColor:"#49A655",backgroundColor:"#333", color:"#49A655"},300);
});

$('.speeddial').on('mouseleave',function(){
   $(this).stop().animate({borderColor:"#AEAEAE",backgroundColor:"#49A655", color:"#FFFFFF"},300);
}); 
```

# node.js - Mongo上的计数（字段）

> ID：15462354
> 
> 赞同：1
> 
> 时间：2013-03-17T15:13:13.883
> 
> 标签：node.js, mongodb

我有一组歌曲及其元数据，其结构如下：

```
[{
    title:"title",
    artist:"artist",
    album:"album,
    ...
},... 
```

现在我想使用 Node.js 获取每个艺术家的列表，其中包含歌曲数量和专辑数量。到目前为止，使用聚合框架，我已经能够使用以下管道获取每个艺术家的对象数组、歌曲数量和**专辑标题数组**（而不仅仅是计数）：

```
collection.aggregate([
            { $project:{
                artist:1,
                album:1
            }},
            { $group: {
                _id: "$artist",
                songs:{$sum: 1},
                albums:{$addToSet:"$album"}
            }},
            { $sort: { artist: 1 } }
        ] 
```

如果我替换`$addToSet`为`$sum`，我会在每个艺术家中得到专辑：0，因为它需要数字而不是字符串来求和。

我只是无法绕过它！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T17:49:25.073

您需要在管道中添加几个步骤 - 专辑数组需要展开然后计数。这是它的样子：

```
collection.aggregate([
            { $project:{
                artist:1,
                album:1
            }},
            { $group: {
                _id: "$artist",
                songs:{$sum: 1},
                albums:{$addToSet:"$album"}
            }},
            { $unwind: "$albums"},
            { $group: {
                _id: "$_id",
                songs:{$first: 1},
                albums:{$sum: 1}
            }},
            { $sort: { artist: 1 } }
        ]
) 
```

# php - glob() 没有搜索文件夹

> ID：15462356
> 
> 赞同：2
> 
> 时间：2013-03-17T15:13:20.037
> 
> 标签：php, post, glob

我认为我在做一些根本错误的事情。这是我的代码

索引.php

```
<?php

if(isset($_POST['a'])){
    $action = $_POST['a'];
} else if(isset($_GET['a'])){
    $action = $_GET['a'];
} else {
    $action = "home";
}

if($action == "home"){
    $frontImages = glob('assets/images/frontpage/*');
    include_once 'home.php';
}
?> 
```

我`var_dump($frontImages)`在里面`homp.php`（顺便说一句，它显示得很好），但我得到的`$frontImages`是一个未定义的变量。`index.php`文件和文件都`home.php`在根文件夹中，这是路径目录的图像：

![在此处输入图像描述](../Images/30aef6777d707d3b6ec3e46664b7d6b0.png)

所以不确定我在这里做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T09:08:52.620

利用

```
<?php

if(isset($_REQUEST['a'])) {
    $action = $_GET['a'];
} else {
    $action = "home";
}

if($action == "home"){
    while($acImg = glob('assets/images/frontpage/*')) {
        $frontImages[] = $acImg;
    }
    include_once 'home.php';
}
?> 
```

现在你有一个数组，但这对我有用

# css - 如何阻止我的 div 标签与标题重叠

> ID：15462360
> 
> 赞同：-1
> 
> 时间：2013-03-17T15:14:07.797
> 
> 标签：css, html, whitespace

好的，所以我试图在 Expression web 上创建一个带有 css 和 html 的 3 列布局，当我在浏览器中查看它时，我的左面板 div 列与我的标题 div 列重叠，我的右面板 div 列也与标题重叠。加上他们的我的主要内容列和右侧面板列之间有很多空白。最小化时布局之间没有空白，但仍然重叠。请帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T15:20:27.720

如果没有看到您的代码，我不确定您的具体问题是什么。我发现学习 CSS 的最佳方法是通过示例。所以，我建议看看这些。

（我没有查看这些是否使用最新的设计标准） [http://layouts.ironmyers.com](http://layouts.ironmyers.com)

或者我最喜欢的布局。

[http://alistapart.com/article/holygrail](http://alistapart.com/article/holygrail)

# javascript - 以编程方式选择与 textarea 元素中的字符串匹配的文本（就像使用鼠标一样）

> ID：15462366
> 
> 赞同：1
> 
> 时间：2013-03-17T15:14:34.420
> 
> 标签：javascript, jquery, html, textarea, selection

考虑以下问题：

有一个像这样的文本区域：

```
<textarea id="body" name="body"></textarea> 
```

还有一些简单的 JavaScript (jQuery) 可以将一些新文本插入到 textarea 中，以便用户可以嵌入图像：

```
$('textarea').val($('textarea').val() + '[img]path to image file[/img]'); 
```

诀窍是在插入文本后自动突出显示`[img][/img]`标签之间的文本，这样用户就可以快速复制和粘贴他们的图像 URL，而不是手动选择，然后复制和粘贴。

我已经绞尽脑汁，在整个互联网上试图弄清楚这一点，我能做的最好的就是这个流行的 StackOverflow 问题[Selecting text in an element（类似于用鼠标突出显示）](https://stackoverflow.com/questions/985272/jquery-selecting-text-in-an-element-akin-to-highlighting-with-your-mouse)，它只解决了选择的问题整个元素内的文本，这不是这里想要的。问题是选择与某个字符串匹配的文本，在这种情况下`path to image file`，用户只需复制/粘贴即可。（不确定这是否是最好的方法，但这就是我的想法......）。

这可能吗？我猜我们会需要`getSelection()`，`createRange()`但除此之外，我不知道该去哪里……任何 JavaScript 向导已经想出了这个？我觉得这可能是一个受欢迎的问题。使用 jQuery 很好，因为我已经在文档的其余部分使用了它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T15:54:27.380

实际上我自己想出了这个......我使用了 Rangy 库[https://code.google.com/p/rangy/](https://code.google.com/p/rangy/)和这样的代码：

```
 // Add text to the reply area at the very end, and move the cursor to the very end.
function insertText(textarea, text) {
    textarea = $(textarea);
    textarea.focus();
    textarea.val(textarea.val() + text);
    textarea.focus();
    // Trigger the textarea's keyup to emulate typing.
    textarea.trigger("keyup");
}

// Add text to the reply area, with the options of wrapping it around a selection and selecting a part of it when it's inserted.
function wrapText(textarea, tagStart, tagEnd, selectArgument, defaultArgumentValue) {
textarea = $(textarea);
    // Save the scroll position of the textarea.
    var scrollTop = textarea.scrollTop();
    // Work out what text is currently selected.
    var selectionInfo = textarea.getSelection();
    if (textarea.val().substring(selectionInfo.start, selectionInfo.start + 1).match(/ /)) selectionInfo.start++;
    if (textarea.val().substring(selectionInfo.end - 1, selectionInfo.end).match(/ /)) selectionInfo.end--;
    var selection = textarea.val().substring(selectionInfo.start, selectionInfo.end);
    // Work out the text to insert over the selection.
    selection = selection ? selection : (defaultArgumentValue ? defaultArgumentValue : "");
    var text = tagStart + selection + (typeof tagEnd != "undefined" ? tagEnd : tagStart);
    // Replace the textarea's value.
    textarea.val(textarea.val().substr(0, selectionInfo.start) + text + textarea.val().substr(selectionInfo.end));
    // Scroll back down and refocus on the textarea.
    textarea.focus();
    // If a selectArgument was passed, work out where it is and select it. Otherwise, select the text that was selected
    // before this function was called.
    if (selectArgument) {
        var newStart = selectionInfo.start + tagStart.indexOf(selectArgument);
        var newEnd = newStart + selectArgument.length;
    } else {
        var newStart = selectionInfo.start + tagStart.length;
    var newEnd = newStart + selection.length;
    }
    textarea.selectRange(newStart, newEnd);
    // Trigger the textarea's keyup to emulate typing.
    textarea.trigger("keyup");
}

var bbcode = {
    bold: function(id) {wrapText($("textarea"), "[b]", "[/b]", "", "bolded text");},
}; 
```

示例用法：

```
bbcode.bold(); 
```

完整代码（在我做的一个更大的项目中）：[https ://github.com/wnajar/textarea](https://github.com/wnajar/textarea)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T17:45:19.130

你可以使用我的 jQuery 插件。它解决了文本区域选择操作中的浏览器差异，并有一些方便的方法：

[https://code.google.com/p/rangyinputs/](https://code.google.com/p/rangyinputs/)

对于您的示例，代码将是

```
var $textarea = $("#body");
var text = "path to image file"
$textarea.replaceSelectedText(text, "select");
$textarea.surroundSelectedText("[img]", "[/img]"); 
```

演示：http: [//jsfiddle.net/P8Jrh/1/](http://jsfiddle.net/P8Jrh/1/)

# css - 添加内容时自动添加间隙/填充/边距

> ID：15462367
> 
> 赞同：1
> 
> 时间：2013-03-17T15:14:47.723
> 
> 标签：css, html, margin, padding

`div`我在wrapper 中使用 stack-able 制作了一个简单的网站`div`。问题是每次我添加内容时，它都会突然添加某种类型的空间，我无法摆脱它。s中的内容`div`将是动态的，因此 s`height`并不总是相同的。

为什么会这样？是内容的问题`div`还是内容本身的问题？

没有内容的 div 下方的图像

![http://i.imgur.com/wbPfwfW.png](../Images/461549aa7ee2b67bdba9d573cf1162f1.png)

带有内容的 div 下方的图像

![http://i.imgur.com/R6ycvYP.png](../Images/679ba84aedc65d7a997082d61669e483.png)

我的 CSS

```
@charset "utf-8";
/* CSS Document */

/* Basic */
body {
    background-color: #666;
    font-family: "Trebuchet MS", Arial, Helvetica, sans-serif;
}
#wrapper {
    width: 900px;
    height: auto;
    margin: 10px auto;
    position: relative;
    background-color: #999;
    box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
    -moz-box-shadow: 0 5px 18px rgba(0, 0, 0, 0.3);
    -webkit-box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
}
#header {
    width: 900px;
    height: 180px;
    background-color: #9C0;
}
#menubar {
    width: 900px;
    height: 36px;
    background-color: #906;
}
#content {
    width: 900px;
    height: 350px;  
    position: relative;
    background-color: #036;
}
#footer {
    width: 900px;
    height: 40px;
    position: relative;
    background-color: #F90;
}

/* Nav */
#nav {
    width: 100%;
    margin: 0;
    padding: 0;
    list-style: none;
}
#nav li {
    float: left;
}
#nav li a {
    display: block;
    padding: 8px 15px;
    text-decoration: none;
    font-weight: bold;
    color: #000;
}
#nav li a:hover {
    color: #000;
    background-color: #fff; 
} 
```

我的 HTML

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<link href="style.css" rel="stylesheet" type="text/css" />
</head>

<body>
<div id="wrapper">
  <div id="header">
  </div>
  <div id="menubar">
  <ul id="nav" >
      <li><a href="#">Item 1</a></li>
      <li><a href="#">Item 2</a></li>
      <li><a href="#">Item 3</a></li>
      <li><a href="#">Item 4</a></li>
  </ul>
  </div>
  <div id="content">
  </div>
  <div id="footer">
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-17T15:26:29.543

查看您提供的 CSS，您似乎忘记对其进行规范化。至少将其添加到 CSS 文件的顶部：

```
* { 
  margin: 0; 
  padding: 0; 
} 
```

这将从元素中删除任何浏览器特定的边距或填充，这可能会导致空白。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-17T16:54:11.183

还有一个名为 Normalize.css 的 css 脚本，它可以让浏览器更一致地呈现所有元素并符合现代标准。它仅针对需要规范化的样式。您可以从以下网址下载：http: [//necolas.github.com/normalize.css/](http://necolas.github.com/normalize.css/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-21T22:32:19.047

对我来说，我对 CSS NORMALIZER 有同样的问题

我只是将这个 css 代码添加到主容器中：

```
border: 1px solid transparent; 
```

似乎在所有主要浏览器以及 IE 上工作，除了 IE6 给你一个黑色边框，因为你可能知道 IE6 不支持透明度

希望这可以帮助 ：-）

# java - Java / 从字符串到 Java 代码

> ID：15462377
> 
> 赞同：-1
> 
> 时间：2013-03-17T15:15:37.943
> 
> 标签：java

我有一些从文件中以字符串格式获得的值。

例如，在文件 AI 中有：

```
id = 342
name = Jonatan
country = USA 
```

另外，我有 class:`person`下一个字段：

```
String id;
String name;
String country;
String grades;
String location; 
```

我有所有领域的getter和setter。

现在，我想创建一个新的 person 实例，它代表 Jonatan。但是 - 我不想更新所有字段，只更新我需要的字段。

所以，我接下来要做的是：从文件中获取详细信息，然后为每个设置，并更新正确的值。例如，`setName(Jonatan)`。问题是我`name`的格式是字符串。所以我不能做 setName - 因为 name 是字符串格式，而 Java 没有给我以字符串格式调用方法的选项。

有简单的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T15:23:34.280

你可以看看[Apache BeanUtils](http://commons.apache.org/proper/commons-beanutils//apidocs/org/apache/commons/beanutils/package-summary.html#standard.basic)

该应用程序非常简单 - 调用人员调用的 setId("42") ：

```
PropertyUtils.setSimpleProperty(person, "id", "42"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T15:20:30.610

使用 java 反射，您可以确定哪些方法/字段可用。

您可以使用此示例将键/值对传递到`doReflection`方法中，以在 Bean 类的实例中设置属性的新值。

```
public class Bean {

    private String id = "abc";

    public void setId(String s) {
        id = s;
    }

    /**
     * Find a method with the given field-name (prepend it with "set") and
     * invoke it with the given new value.
     * 
     * @param b The object to set the new value onto
     * @param field  The name of the field (excluding "set")
     * @param newValue The new value
     */
    public static void doReflection(Bean b, String field, String newValue) throws NoSuchMethodException,
            SecurityException, IllegalAccessException, IllegalArgumentException, InvocationTargetException {
        Class<? extends Bean> c = b.getClass();
        Method id = c.getMethod("set" + field, String.class);
        id.invoke(b, newValue);
    }

    public static void main(String... args) throws NoSuchMethodException, SecurityException, IllegalArgumentException,
            InvocationTargetException, IllegalAccessException {
        Bean bean = new Bean();
        System.out.println("ID before: " + bean.id);
        doReflection(bean, "Id", "newValue");
        System.out.println("ID after: " + bean.id);

        // If you have a map of key/value pairs:
        Map<String, String> values = new HashMap<String, String>();
        for(Entry<String, String> entry : values.entrySet())
            doReflection(bean, entry.getKey(), entry.getValue());
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-17T15:35:04.487

我喜欢@michael_s 的回答`BeanUtils`。如果你想不这样做，你可以写：

```
Person person = new Person();
Properties properties = new Properties();
properties.load(new FileInputStream("the.properties"));
for (Object key : properties.keySet()) {
    String field = (String) key;
    String setter = "set" + field.substring(0, 1).toUpperCase() + field.substring(1);
    Method method = Person.class.getMethod(setter, String.class);
    method.invoke(person, properties.get(key));
} 
```

并不是说在使用后应该关闭流，并且这个简短的示例仅适用于`String`属性。

# jquery - 在功能上模拟按键 jquery

> ID：15462378
> 
> 赞同：0
> 
> 时间：2013-03-17T15:15:45.833
> 
> 标签：jquery, keypress, keycode

我想使用 jquery 在某个函数上模拟向上按键（数字 40）。

所以基本上：

```
function simulate_up() {
    // code to simulate up key (key code 40)
} 
```

有任何想法吗？

干杯!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T15:19:55.690

看到这个；

```
var press = jQuery.Event("keypress");
press.ctrlKey = false;
press.which = 40;
$("your_slector").trigger(press); 
```

从[这里](http://forum.jquery.com/topic/simulating-keypress-events)。

# javascript - 美元和逗号的正则表达式格式

> ID：15462383
> 
> 赞同：0
> 
> 时间：2013-03-17T15:16:19.877
> 
> 标签：javascript, jquery

我当前的正则表达式格式只允许数字，包括正数、负数和浮点小数。

```
"regex": /^[\-\+]?(([0-9]+)([\.,]([0-9]+))?|([\.,]([0-9]+))?)$/, 
```

如何在我当前的正则表达式格式中允许（添加）美元和逗号？

**更新：**

html

```
<input type="text" name="amt[]" placeholder="0.00" size="10" id="validation-required"
  class="input-unstyled input-sep validate[required, custom[price]]"> 
```

jQuery 验证

```
(function($){
    $.fn.validationEngineLanguage = function(){
    };
    $.validationEngineLanguage = {
        newLang: function(){
            $.validationEngineLanguage.allRules = {
                "required": { // Add your regex rules here, you can take telephone as an example
                    "regex": "none",
                    "alertText": "* This field is required",
                    "alertTextCheckboxMultiple": "* Please select an option",
                    "alertTextCheckboxe": "* This checkbox is required",
                    "alertTextDateRange": "* Both date range fields are required"
                },
                "dateRange": {
                    "regex": "none",
                    "alertText": "* Invalid ",
                    "alertText2": "Date Range"
                },
                "dateTimeRange": {
                    "regex": "none",
                    "alertText": "* Invalid ",
                    "alertText2": "Date Time Range"
                },
                "minSize": {
                    "regex": "none",
                    "alertText": "* Minimum ",
                    "alertText2": " characters allowed"
                },
                "maxSize": {
                    "regex": "none",
                    "alertText": "* Maximum ",
                    "alertText2": " characters allowed"
                },
                                "groupRequired": {
                    "regex": "none",
                    "alertText": "* You must fill one of the following fields"
                },
                "min": {
                    "regex": "none",
                    "alertText": "* Minimum value is "
                },
                "max": {
                    "regex": "none",
                    "alertText": "* Maximum value is "
                },
                "past": {
                    "regex": "none",
                    "alertText": "* Date prior to "
                },
                "future": {
                    "regex": "none",
                    "alertText": "* Date past "
                },     
                "maxCheckbox": {
                    "regex": "none",
                    "alertText": "* Maximum ",
                    "alertText2": " options allowed"
                },
                "minCheckbox": {
                    "regex": "none",
                    "alertText": "* Please select ",
                    "alertText2": " options"
                },
                "equals": {
                    "regex": "none",
                    "alertText": "* Fields do not match"
                },
                "creditCard": {
                    "regex": "none",
                    "alertText": "* Invalid credit card number"
                },
                "phone": {
                    // credit: jquery.h5validate.js / orefalo
                    "regex": /^([\+][0-9]{1,3}[ \.\-])?([\(]{1}[0-9]{2,6}[\)])?([0-9 \.\-\/]{3,20})((x|ext|extension)[ ]?[0-9]{1,4})?$/,
                    "alertText": "* Invalid phone number"
                },
                "email": {
                    // Shamelessly lifted from Scott Gonzalez via the Bassistance Validation plugin http://projects.scottsplayground.com/email_address_validation/
                    "regex": /^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i,
                    "alertText": "* Invalid email address"
                },
                "integer": {
                    "regex": /^[\-\+]?\d+$/,
                    "alertText": "* Not a valid integer"
                },
                "price": {
                    // Number, including positive, negative, and floating decimal. credit: orefalo
                    "regex": /^[\-\+]?(([0-9]+)([\.,]([0-9]+))?|([\.,]([0-9]+))?)$/,
                    "alertText": "* Invalid floating decimal number"
                },
                "date": {
                    "regex": /^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/,
                    "alertText": "* Invalid date, must be in YYYY-MM-DD format"
                },
                "ipv4": {
                    "regex": /^((([01]?[0-9]{1,2})|(2[0-4][0-9])|(25[0-5]))[.]){3}(([0-1]?[0-9]{1,2})|(2[0-4][0-9])|(25[0-5]))$/,
                    "alertText": "* Invalid IP address"
                },
                "url": {
                    "regex": /^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,
                    "alertText": "* Invalid URL"
                },
                "onlyNumberSp": {
                    "regex": /^[0-9\ ]+$/,
                    "alertText": "* Numbers only"
                },
                "onlyLetterSp": {
                    "regex": /^[a-zA-Z\ \']+$/,
                    "alertText": "* Letters only"
                },
                "onlyLetterNumber": {
                    "regex": /^[0-9a-zA-Z]+$/,
                    "alertText": "* No special characters allowed"
                },
                // --- CUSTOM RULES -- Those are specific to the demos, they can be removed or changed to your likings
                "ajaxUserCall": {
                    "url": "ajaxValidateFieldUser",
                    // you may want to pass extra data on the ajax call
                    "extraData": "name=eric",
                    "alertText": "* This user is already taken",
                    "alertTextLoad": "* Validating, please wait"
                },
                                "ajaxUserCallPhp": {
                    "url": "phpajax/ajaxValidateFieldUser.php",
                    // you may want to pass extra data on the ajax call
                    "extraData": "name=eric",
                    // if you provide an "alertTextOk", it will show as a green prompt when the field validates
                    "alertTextOk": "* This username is available",
                    "alertText": "* This user is already taken",
                    "alertTextLoad": "* Validating, please wait"
                },
                "ajaxNameCall": {
                    // remote json service location
                    "url": "ajaxValidateFieldName",
                    // error
                    "alertText": "* This name is already taken",
                    // if you provide an "alertTextOk", it will show as a green prompt when the field validates
                    "alertTextOk": "* This name is available",
                    // speaks by itself
                    "alertTextLoad": "* Validating, please wait"
                },
                                 "ajaxNameCallPhp": {
                            // remote json service location
                            "url": "phpajax/ajaxValidateFieldName.php",
                            // error
                            "alertText": "* This name is already taken",
                            // speaks by itself
                            "alertTextLoad": "* Validating, please wait"
                        },
                "validate2fields": {
                    "alertText": "* Please input HELLO"
                },
                    //tls warning:homegrown not fielded
                "dateFormat":{
                    "regex": /^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$|^(?:(?:(?:0?[13578]|1[02])(\/|-)31)|(?:(?:0?[1,3-9]|1[0-2])(\/|-)(?:29|30)))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^(?:(?:0?[1-9]|1[0-2])(\/|-)(?:0?[1-9]|1\d|2[0-8]))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^(0?2(\/|-)29)(\/|-)(?:(?:0[48]00|[13579][26]00|[2468][048]00)|(?:\d\d)?(?:0[48]|[2468][048]|[13579][26]))$/,
                    "alertText": "* Invalid Date"
                },
                //tls warning:homegrown not fielded
                                "dateTimeFormat": {
                        "regex": /^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])\s+(1[012]|0?[1-9]){1}:(0?[1-5]|[0-6][0-9]){1}:(0?[0-6]|[0-6][0-9]){1}\s+(am|pm|AM|PM){1}$|^(?:(?:(?:0?[13578]|1[02])(\/|-)31)|(?:(?:0?[1,3-9]|1[0-2])(\/|-)(?:29|30)))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^((1[012]|0?[1-9]){1}\/(0?[1-9]|[12][0-9]|3[01]){1}\/\d{2,4}\s+(1[012]|0?[1-9]){1}:(0?[1-5]|[0-6][0-9]){1}:(0?[0-6]|[0-6][0-9]){1}\s+(am|pm|AM|PM){1})$/,
                    "alertText": "* Invalid Date or Date Format",
                    "alertText2": "Expected Format: ",
                    "alertText3": "mm/dd/yyyy hh:mm:ss AM|PM or ",
                    "alertText4": "yyyy-mm-dd hh:mm:ss AM|PM"
                    }
            };

        }
    };

    $.validationEngineLanguage.newLang();

})(jQuery); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T15:18:33.360

如果您希望在 Regex 中匹配保留字符，例如`$`,`^`等，只需使用反斜杠转义它们，例如`\$`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T15:59:09.323

"正则表达式": /^[-+]?(([0-9]+)(.,)?|(.,)?)$/,

您当前的正则表达式有点过于复杂。我知道您想匹配一个可选的美元符号，然后是一个千位分隔的数字，可选带两位小数。我将假设您实际上并不想要`+`or`-`符号，而您只想要小数点，并且它们只是您从某些教程中复制粘贴的内容。

试试这个：

```
/^\$?[1-9]\d?(?:,\d{3})*(?:\.\d{2})?$/ 
```

[这个正则表达式的解释](http://rick.measham.id.au/paste/explain.pl?regex=%5E%5C%24%3F%5B1-9%5D%5Cd%3F%28%3F%3A%2C%5Cd%7B3%7D%29%2a%28%3F%3A%5C.%5Cd%7B2%7D%29%3F%24)

# java - SmartGWT：在本地和服务器端验证 DynamicForm

> ID：15462385
> 
> 赞同：0
> 
> 时间：2013-03-17T15:16:32.353
> 
> 标签：java, smartgwt, smartclient

我正在使用`ValuesManager`（可以将多个链接`DynamicForms`到一个请求中），但为了简化这个示例，我们假设我使用 simple `DynamicForm`with some `DataSource`.

当`DynamicForm`我运行方法`validate()`时，它使用我为我的目的编写的客户端验证器。没关系。但我也想在服务器端验证数据。

我不想使用方法`saveData()`，因为我想显示带有确认输入数据的弹出窗口。

有什么方法可以在不调用的情况下强制服务器端验证`saveData`？

PS。`setUseLocalValidators(false)`（在 DataSource 对象上）似乎不会改变这种行为。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T11:14:23.600

如果您使用的是数据源，您可以调用

> 验证数据（值 [，回调，requestProperties]）

[Smartclient 8.3 文档 DataSource.validateData](http://www.smartclient.com/docs/8.3/a/b/c/go.html#method..DataSource.validateData)

我只在客户端使用 Smartclient，但我用它来调用我自己的服务器端验证。

很抱歉，我没有任何可用的示例代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T12:43:35.993

您可以尝试覆盖您的验证`DynamicForm`并在调用服务器验证代码的新方法代码中添加吗？

# c# - MVC -> 绑定到自定义类型的集合

> ID：15462391
> 
> 赞同：0
> 
> 时间：2013-03-17T15:16:53.800
> 
> 标签：c#, asp.net-mvc, binding, model-binding, auto-populating

属性，要从中填充一组隐藏字段：

```
public abstract class MyPageView
{        
    [UIHint("List")]
    public IEnumerable<IOption> OptionList { get; set; }
} 
```

执行此操作的命令：

```
@Html.EditorFor(m => m.OptionList) 
```

定义的“列表”模板的实现：

```
@model IEnumerable<RoomWanted.FlatShare.Services.ViewModels.Options.IOption>

@for (int i = 0; i < Model.Count(); i++)
{    
    @Html.HiddenFor(x => Model.ToList()[i].Id)
    @Html.HiddenFor(x => Model.ToList()[i].Name)
} 
```

我得到的生成：

```
<input id="OptionList__0__Id" name="OptionList.[0].Id" type="hidden" value="1" />
<input id="OptionList__0__Name" name="OptionList.[0].Name" type="hidden" value="New York" /> 
```

我需要生成什么，以便模型绑定正常工作：

```
<input id="OptionList_0__Id" name="OptionList[0].Id" type="hidden" value="5"></input>
<input id="OptionList_0__Name" name="OptionList[0].Name" type="hidden" value="New York"></input> 
```

关于如何摆脱那个**点**的任何想法，所以我有`OptionList[0].Id`而不是`OptionList.[0].Id`？

干杯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T22:05:01.073

使用`IList<IOption>`or`IOption[]`代替：

```
public abstract class MyPageView
{        
    [UIHint("List")]
    public IList<IOption> OptionList { get; set; }
} 
```

然后在你看来：

```
@model IList<RoomWanted.FlatShare.Services.ViewModels.Options.IOption>

@for (int i = 0; i < Model.Count; i++)
{    
    @Html.HiddenFor(x => x[i].Id)
    @Html.HiddenFor(x => x[i].Name)
} 
```

# sql - 如何将新用户添加到sql数据库

> ID：15462397
> 
> 赞同：0
> 
> 时间：2013-03-17T15:17:18.270
> 
> 标签：sql

再会

我是 SQL 数据库的新手。我有一个同事创建的现有数据库，我只想向数据库添加一个新用户。

在以下情况下我该怎么做：

```
USE [Tricom]
GO

INSERT INTO [dbo].[Users]
           ([Name]
           ,[Surname]
           ,[Email]
           ,[Password]
           ,[Status]
           ,[DepartmentId]
           ,[Guid])
     VALUES
           (<Name, varchar(50),>
           ,<Surname, varchar(50),>
           ,<Email, varchar(100),>
           ,<Password, varchar(50),>
           ,<Status, int,>
           ,<DepartmentId, int,>
           ,<Guid, uniqueidentifier,>)
GO 
```

所以我插入：

```
 ('david'
           ,'van staden'
           ,'ds@ik.io'
           ,123123
           ,0
           ,8
           ,<Guid, uniqueidentifier,>) 
```

但它不起作用。

我需要在这些字段中输入什么并执行（f5）？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T15:20:11.353

如果您尝试插入一个新的`GUID`，那么您的`INSERT`声明将是：

```
INSERT INTO [dbo].[Users]
(
  [Name]
  ,[Surname]
  ,[Email]
  ,[Password]
  ,[Status]
  ,[DepartmentId]
  ,[Guid]
)
VALUES
(
  'david'
  ,'van staden'
  ,'ds@ik.io'
  ,123123  
  ,0
  ,8
  ,newid()
) 
```

将[`newid()`](http://msdn.microsoft.com/en-us/library/ms190348.aspx)在插入时创建一个新的 uniqueidentifier 值。

不要将密码存储为字符串，您将需要应用[`HASHBYTES()`](http://msdn.microsoft.com/en-us/library/ms174415.aspx)或某种加密。

# image - 如何使用 Imager 修剪图像

> ID：15462404
> 
> 赞同：2
> 
> 时间：2013-03-17T15:17:54.757
> 
> 标签：image, perl

我使用 Perl[`Imager`](http://search.cpan.org/~tonyc/Imager-0.94/Imager.pm)库来处理图像。

我正在尝试做一些类似于`trim`ImageMagick 或`autocrop`GIMP 中的操作：消除图像边界处的空白区域。

有这样的事吗？我搜索了文档，但一无所获。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T03:02:42.953

我认为您在使用预先编写的`Imager`方法来做您想做的事情方面不走运。但是我已经查看了 C API 必须提供的内容，并且我认为编写一个 XS 扩展来完成这项工作应该相当简单。

我的方法是分离函数的`ImageMagick`代码并根据API`Trim`实现它，它定义了一个函数来确定单个像素的颜色。`Imager``i_gpix`

我不会复制函数的`Imager` `crop`功能，而是选择 XS 代码返回左、右、上、下边距大小，这些大小可以直接传递给现有的`crop`.

我知道，这不是你所希望的，但在可能的范围内。

# android - 在 android sql-lite 中查询以查找在保存为年、月和日的两个日期之间创建的条目

> ID：15462405
> 
> 赞同：1
> 
> 时间：2013-03-17T15:17:55.520
> 
> 标签：android, android-sqlite

在数据库中，我以 3 列的形式保存了日期：Year、Month、Day_of_Month（我知道这可能不是保存日期的最佳方式，但我进行了某些其他适合这种格式的查询。）

现在我希望获取日期在两个指定日期之间的所有行。我经历了以前的 stackoverflow 问题，但大多数都将日期保存为单个实体。

这就是我尝试的方式：

我有一个 MySqLiteHelper 类，其中声明了所有列名。我也在那里创建表格。COLUMN_DATE_YEAR、COLUMN_DATE_MONTH 和 COLUMN_DATE_DAY 是存储列名的字符串。

```
 int fyear, fmonth, fday; // I populate those initial date values
      int tyear, tmonth, tday; // I populate those target date values

      String selection = MySQLiteHelper.COLUMN_DATE_YEAR + " >= '"+fyear+"' AND "+ MySQLiteHelper.COLUMN_DATE_DAY + " >= '"+fday+"' AND "
              + MySQLiteHelper.COLUMN_DATE_MONTH + " >= '"+fmonth+"' AND " + MySQLiteHelper.COLUMN_DATE_YEAR + " <= '"+tyear+"' AND "
              + MySQLiteHelper.COLUMN_DATE_DAY + " <= '"+ tday+"' AND "+ MySQLiteHelper.COLUMN_DATE_MONTH + " <= '"+tmonth+"'";

      String []column = {MySQLiteHelper.COLUMN_MOOD_LEVEL};
      Cursor cursor = database.query(MySQLiteHelper.TABLE_NAMES, column, selection, null, null, null, null); 
```

现在，这种方法的问题在于，它不会为 2013 年 2 月 25 日至 2013 年 3 月 17 日之间的查询提供任何结果，因为日期为 25 日 > 17 日，即使月份 2 < 3 也是如此。这可能需要某种嵌套的 where 子句。但是我无法使用“.query”方法形成嵌套的“Where”。

请提出一种查询存储在这两个日期之间的条目的方法。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T15:24:00.527

没有理由不能运行更复杂的 WHERE 子句，如下所示（对于日期 >= 2013-02-17）：

```
( YEAR > 2013 OR ( YEAR = 2013 AND ( MONTH > 2 OR ( MONTH = 2 AND DAY >= 17 ) ) ) ) 
```

这将起作用，但它是从最佳状态开始的。你最好纠正你的数据库设计。

更正：您*必须*修复您的数据库设计。将日期存储为`DATE`类型或 ISO 字符串：`yyyy-mm-dd`.

奖励：假设您现在拥有以下内容：

```
CREATE TABLE theTable( 
    ....
    THEYEAR TEXT,
    THEMONTH TEXT,
    THEDAY TEXT ); 
```

要将日期转换为可用格式，您只需运行以下命令：

```
ALTER TABLE theTable
  ADD COLUMN THEDATE TEXT;

UPDATE theTable
    SET THEDATE = THEYEAR || substr( '0' || '-' || THEMONTH, -2, 2 ) || '-' || substr( '0' || THEDAY, -2, 2 ); 
```

完成后，您可以使用该`BETWEEN`子句进行查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T15:36:34.693

使用您当前的模式，尝试重新排序您的 WHERE 子句。您需要首先比较最大的列，即*年、月、**日***。对于您当前的*年、**日**、月，*您无法准确比较跨入新月份的日期。
例如：day >= 25 和 day <= 17 创建一个无效范围。它没有考虑正确的范围：>25，换行到 1，然后 <17...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-21T10:41:17.690

在不更改表结构的情况下，以下查询将为您工作，试试吧

```
select * from TableName WHERE (10000*ColumnYear+100*ColumnMonth+ColumnDay >= 20131009) and (10000*ColumnYear+100*ColumnMonth+ColumnDay <= 20131121); 
```

# php - 解析多行的一列php

> ID：15462408
> 
> 赞同：0
> 
> 时间：2013-03-17T15:18:11.030
> 
> 标签：php, mysql

我有例如从查询返回的以下数据，每个名称都是一个项目：

```
id      name      comment
1       FF        hey
1       FF        hey back!
2       LL         
3       PP        i think its great!
3       PP        me too
3       PP        I'm not sure
4       TT         
5       II      
6       KK        yesterday is the new tomorrow 
```

当我显示它时，每个“项目”都有一个 ID，并显示在 DIV 中使用 LI。

正如您所看到的，有时对于一个“项目”有多个评论，每个评论都在单独的行上

我想要做的是显示每个项目，然后在每个项目下显示评论（如果有的话）。所以，我不能在查询阶段按任何东西分组，因为评论部分是唯一的，但需要在显示阶段分组

所以目前有：

```
while ($row = mysql_fetch_array($result)){

echo '<li><div class=className><div class=itemName>'.$row[name].'</div>';

    if($row[comment]){ 

       echo '<div class=newRow>'.$row[comment].'</div>'; 

    }

echo '</div></li>';

} 
```

现在，这并不好，因为这将为同一个项目产生多个显示，每个显示下都有一个评论。

我可以这样做还是应该以不同的方式引入数据？

理想的结果是例如

```
FF             LL             PP                       etc etc etc
hey                           i think its great!
hey back!                     me too
                              I'm not sure 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T15:35:48.063

您可以[`GROUP_CONCAT()`](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)在 mysql 查询中使用，将每个名称的所有评论组合在一起

```
SELECT id, name
GROUP_CONCAT(comment) AS comment
FROM table
GROUP BY name; 
```

然后[`explode()`](http://www.php.net/manual/en/function.explode.php)在`$row[comment]`你的 php 代码中

```
while ($row = mysql_fetch_array($result)){

echo '<li><div class=className><div class=itemName>'.$row['name'].'</div>';

    if($row['comment'] != ""){

       $comments = explode(",",$row['comment']);
       foreach($comments as $comment){
               echo '<div class=newRow>'.$comment.'</div>';
       } 

    }

echo '</div></li>';

} 
```

**编辑**感谢@CBroe，我现在
知道默认值为 1024。您将需要在运行查询之前增加它-`GROUP_CONCAT()`[`group_concat_max_len`](http://dev.mysql.com/doc/refman/5.0/en/server-system-variables.html#sysvar_group_concat_max_len)`GROUP_CONCAT()`

```
SET [GLOBAL | SESSION] group_concat_max_len = 10240; // must be in multiples of 1024
SELECT id, name
GROUP_CONCAT(comment) AS comment
FROM table
GROUP BY name; 
```

您还需要注意，[`max_allowed_packet`](http://dev.mysql.com/doc/refman/5.0/en/server-system-variables.html#sysvar_max_allowed_packet)因为这是您可以设置的限制`var_group_concat_max_len`。

注意：`mysql_query()`不允许多个查询，因此您需要执行 2 `mysql_query()`，并且您可以使用`SET SESSION ...`以便当前会话中的所有查询都具有`max_len`. 最好从`mysql_`功能（已折旧）更改并更改为[`mysqli_`](http://www.php.net/manual/en/book.mysqli.php)或[`PDO`](http://www.php.net/manual/en/ref.pdo-mysql.php)它们提供多个查询选项。还可以查看 - [http://php.net/manual/en/mysqlinfo.api.choosing.php](http://php.net/manual/en/mysqlinfo.api.choosing.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T15:35:39.690

不要将数据访问与输出混淆，您将更容易解决此类问题。

```
//Fetch and Sort
$data = array();
while ($row = mysql_fetch_array($result)){
   $item = $row['item'];
   if(!isset($data[$item]) {
     $data[$item] = array():
   }
   $data[ = $data[$item][] = $row['comment'];   
}

//Output
foreach($data as $item => $comments) {
    echo '<li><div class=className><div class=itemName>'.$item.'</div>';
    foreach($comments as $comment) {
      echo '<div class=newRow>'.$comment.'</div>'; 
    }
    echo '</div></li>';
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T15:36:50.547

如果您还没有得到按 id 排序的数据，请添加到查询的末尾：

```
ORDER BY name 
```

这将检索按 id 排序的相同列表。然后在您的 while 循环中，添加一个变量来跟踪您看到的最后一个项目名称。如果它发生变化，添加一个新的 li，否则，将注释添加到当前列表的末尾。

# css - 在鼠标悬停时显示背景图像

> ID：15462409
> 
> 赞同：4
> 
> 时间：2013-03-17T15:18:12.260
> 
> 标签：css

我有以下 HTML：

```
<a href="#" class="home-block" style="background-color:#464646; background-image:url('wardrobe.jpg')">Wardrobe</a>
<a href="#" class="home-block" style="background-color:#6a0d1f; background-image:url('wine.jpg')">Wine</a>
<a href="#" class="home-block" style="background-color:#291407; background-image:url('coffee.jpg')">Coffee</a> 
```

这是相关的CSS：

```
.home-block {
    background-color: #c2b89c; display: block; height: 180px; line-height:180px;
    text-align: center; font-size: 70px; color:#e2e2e2;
    text-shadow: 2px 2px 0 #444; margin-bottom: 20px; background-size: cover;
    background-position: center center; box-shadow: 1px 1px 4px #111;
} 
```

我的结果现在看起来像这样：

![在此处输入图像描述](../Images/4dbcec4f7298bebe1a44f1b0e5d01164.png)

没关系，但我真正想要的是块具有纯色，并且仅在悬停时显示图像。像这样：

![在此处输入图像描述](../Images/5f7167e24fdc4edaa7ef230f6f9683fa.png)

请记住，我使用的是响应式设计，因此块在不同的屏幕尺寸上会有不同的尺寸和纵横比。这就是我使用`background-size: cover`. 这也是针对 CMS 系统的，所以我希望在 HTML 中内联设置图像和颜色，这样可以轻松编辑并且可以添加更多块。

所以我基本上需要一个没有绝对定位元素的干净解决方案（因为如果没有固定宽度，它们往往会破裂）来实现这一点。

我试过的是这样的：

```
.home-block { background: none; }
.home-block:hover { background: inherit } 
```

但没有成功。我正准备用几行 jQuery 来解决所有这些问题，但我很快就想检查是否没有纯 CSS 方法来实现这一点。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-17T15:32:18.960

`background-image`如果您需要在 HTML中设置内联，这有点棘手。你不能轻易覆盖它。我会尝试做的是`background-position`在悬停时进行更改：

```
.home-block {
    ...
    background-position: 1000px 1000px; // background-image is there but not visible
}
.home-block:hover {
    background-position: center center !important; // make it visible
} 
```

[http://jsfiddle.net/h2Jbg/](http://jsfiddle.net/h2Jbg/)

因此，对于正常状态，您将看不到背景图像，但会看到背景颜色。悬停时，您将图像移回。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-17T15:37:24.413

不幸的是，不可能使用`:hover`伪类内联，这使得很难在单个元素上实现这种内联。

为造型而使用附加元素通常有点难看，但至少它是解决手头问题的可能方法。

```
<div style="background-image: url(http://lorempixel.com/400/200);">
   <div class="home-block">Foo</div>
</div> 
```

然后你可以在你的 CSS 中使用这样的东西：

```
.home-block:hover {
    background: transparent;
} 
```

[**演示**](http://jsfiddle.net/FA2aC/1/)

这样，您将能够添加具有单独背景图像的新块，而无需更新样式表。

# css - 我的 div 背景图像未在 IE8 中显示

> ID：15462411
> 
> 赞同：2
> 
> 时间：2013-03-17T15:18:23.133
> 
> 标签：css, html, internet-explorer-8, background-image

我需要背景图像保持居中，因为我将在固定位置显示图表并希望货车（在图像中）始终可见。它在 Chrome 等中运行良好，但在 IE8 中没有出现。

[http://clients.online95.com/RzMaOxkMOC/rep_mktsh.php](http://clients.online95.com/RzMaOxkMOC/rep_mktsh.php)

感谢您提供的任何帮助。

```
#aa_breakdown_bg {
background: url(/RzMaOxkMOC/images/aa_breakdown_bg.jpg) center top no-repeat fixed;
overflow: hidden;
height: 100%;
} 

<html lang="en">
<head>
    <title>UK Breakdown Market Tracker</title>
    <meta http-equiv="X-UA-Compatible" content="IE=9" />
    <script type="text/javascript">
        window.history.forward();
        function noBack() { window.history.forward(); }
    </script>
</head>
<body onload="noBack();" onpageshow="if (event.persisted) noBack();" onunload="">   

<div id="aa_breakdown_bg"></div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T15:26:21.917

我的猜测是，虽然你`div`的身高是 100%，但那是 100% 的零。`body`也尝试将和元素都拉伸`html`到 100%，看看是否能解决问题。

```
body, html {
    height: 100%;
} 
```

此外，正如 Adrift 所提到的，在 HTML 中添加适当的 DOCTYPE 会更好，否则 Internet Explorer 可能会以“[怪癖模式](http://www.quirksmode.org/css/quirksmode.html)”运行并让您感到困惑。

# c++ - 调试 C++ 代码或 Eclipse 中的错误

> ID：15462412
> 
> 赞同：-2
> 
> 时间：2013-03-17T15:18:23.450
> 
> 标签：c++

我有这个代码，但返回线上的 Eclipse 发布错误，但我知道 int array[][] 与 int 类型相同 **

```
int ** Master::what_can_choose()
{
array_can_choose[9][2]={0};
board[3][3]={{' ',' ','x'},{' ','o',' '},{'x',' ',' '}};
int x=0;
for (int i=0;i<3;i++)
{
    for (int j=0;j<3;j++)
    {
    if (board[i][j]==' ')
        {
        array_can_choose[x][0]=i;
        array_can_choose[x][1]=i;
        x+=1;
        }
    }
}
return array_can_choose;
} 
```

为什么这个错误被释放

```
error is: cannot convert `int (*)[2]' to `int**' in return 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T15:46:11.933

首先， an`int**`与 an 不同`int[][]`。如果您将 an`int**`用作具有动态分配的二维数组，则内部结构实际上与真正的二维数组非常不同。看看这段代码：

```
int** dynamic2DArray;
int static2DArray[10][10];

dynamic2DArray = new int*[10];
for( int i=0; i<10; i++ )
    dynamic2DArray[i] = new int[10]; 
```

现在，`dynamic2DArray`指向 10 个指针列表中的第一个元素，每个指针指向 10`int`秒的列表，同时`static2DArray`指向 10*10=100`int`秒的列表中的第一个元素。所以内存中的结构是完全不同的。

此外，以下也将是 a `int**`，而显然与数组无关：

```
int someInt;
int* pointerToSomeInt = &someInt;
int** doublePointerToSomeInt = &pointerToSomeInt; 
```

我发现的一个语法错误是你没有声明你的数组应该是什么类型：

```
array_can_choose[9][2]={0};
board[3][3]={{' ',' ','x'},{' ','o',' '},{'x',' ',' '}}; 
```

应该：

```
int array_can_choose[9][2]={0};
char board[3][3]={{' ',' ','x'},{' ','o',' '},{'x',' ',' '}}; 
```

这是因为我们不仅需要告诉编译器我们想要一个数组，还需要告诉编译器它应该是一个数组。在这种情况下，`int`和`char`。

您的代码的另一个问题是您试图返回一个本地数组。你不能这样做。一个局部变量只存在于“它的名字是已知的”（这被称为“在范围内”）。`array_can_choose`在这种情况下，一旦您退出函数，该变量将不复存在`int ** Master::what_can_choose()`。

你可能想知道为什么你可以从一个函数中返回一个变量。这是因为大多数变量都可以复制。当您`int`从函数返回（例如） an 或将 an 传递给函数时，就会发生这种情况`int`。但是，不能复制数组。这样做是为了防止在复制非常大的数组时出现巨大的意外减速。相反，当您将数组传递给函数时，您只是传递了一个指向数组内容的变量。这意味着您不能返回本地数组，因为退出函数时该数组的内容将不复存在。因此，返回变量将指向“不存在”的内存。

为了避免这种情况，您必须使用动态分配：

```
int ** Master::what_can_choose()
{
    //dynamically allocate the array we want to return
    int** array_can_choose = new int*[9];
    for( int i=0; i<9; i++ )
    {
        array_can_choose[i] = new int[2];
        for( int j=0; j<2; j++ )
            array_can_choose[i][j] = 0; //initialize all values to 0
    }

    //a type (such as char) is required for arrays
    char board[3][3]={{' ',' ','x'},{' ','o',' '},{'x',' ',' '}};
    int x=0;
    for (int i=0;i<3;i++)
    {
        for (int j=0;j<3;j++)
        {
            if (board[i][j]==' ')
            {
                array_can_choose[x][0]=i;
                array_can_choose[x][1]=i;
                x+=1;
            }
        }
    }
    return array_can_choose;
} 
```

现在，使用动态分配的一个缺点是您还必须释放分配的内存。动态分配确保即使您离开当前范围时内存仍会存在（这就是我们现在可以返回数组的原因），但这意味着何时允许内存“*停止*存在”不再明确。正因为如此，当我们用完我们的内存时，我们需要明确地告诉编译器，以便它可以释放这些内存。我们可以使用`delete[]`. -part`[]`告诉编译器它应该删除整个数组，而不仅仅是一个项目。因为我们分配了一个数组数组，所以我们不能一次删除。我们必须删除每个子数组，然后删除 2D 数组本身（如前所述，它实际上是指向数组的指针的 1D 数组）。

```
Master master; //we need an object to call our function
int** our_array = master.what_can_choose(); //this allocates an array and stores it in our_array

//do stuff with our_array

for( int i=0; i<9; i++ )
    delete[] our_array[i]; //delete a sub-array
delete[] our_array; //delete the array itself.

//we can now no longer do stuff with our_array 
```

不这样删除内存意味着我们分配的内存将永远被占用，即使我们不再需要它，这称为“*内存泄漏*”。如果您经常这样做，您的计算机最终将耗尽内存并且您的程序将崩溃。

# web-applications - 使用子域与内部文件夹？

> ID：15462415
> 
> 赞同：2
> 
> 时间：2013-03-17T15:19:11.327
> 
> 标签：web-applications, web, subdomain, sitemap

我想知道如何根据子域等组织和设置我的业务网站。我有一些业务的子功能/服务。主要商业网站是“www.mybusiness.com”。但我需要为业务的每个子功能定制 Web 应用程序和单独开发的站点，因为每个子功能都有相当不同的要求。假设我的企业提供 3 项服务：设计、交付、营销。

组织这个（对于网站访问者）的最佳方式是什么？我可以让他们使用子域访问每个子功能，如下所示：

*   设计.mybusiness.com
*   交付.mybusiness.com
*   营销.mybusiness.com

或这个：

*   www.mybusiness.com/design/
*   www.mybusiness.com/delivery/
*   www.mybusiness.com/marketing/

我倾向于子域 - 我认为它们看起来更好，但实际上哪个选项更好？在速度、效率、编程等方面有优缺点吗？有什么取舍吗？我的托管公司有一个虚拟托管计划，所以获取子域对我来说应该不是问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T15:48:36.877

子域可能会出现问题，例如，如果您希望每个用户一次登录即可跨它们工作。[此链接](https://serverfault.com/questions/153409/can-subdomain-example-com-set-a-cookie-that-can-be-read-by-example-com)解释了这些问题。编写代码并不太难，但如果您正在处理第三方应用程序，它可能会变得复杂。例如，如果您使用 AJAX 在子域之间获取数据，子域可能会导致类似的问题。

（避免子域 cookie 问题的简单解决方案是创建一个简单地重定向到内部文件夹的子域；所以纯粹是一个登录页面。）

使用子域的好处有时是更容易设置应用程序，特别是如果它使用 mod-rewrite 来重写 URL。拥有多个在同一个域上重写 URL 的应用程序可能会变得很棘手。

所以这两种选择各有利弊，可能没有太大区别。无论哪种方式，都可能存在让所有应用程序并排工作的初期问题。话虽如此，您可能对任何一种方法都没有任何问题。而且我敢肯定，对于您遇到的任何问题，都有很多解决方法，通常有据可查。

但是，最好先检查所有应用程序并排运行，然后再花太多钱准备带有 URL 的固定文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T13:57:26.530

为 Jodes 已经解释的内容添加一些想法：

*   子域的优点：如果您将来需要将服务分布在多个服务器上，使用子域会容易得多。如果您有子目录结构，则必须根据您的喜好引入某种形式的反向代理解决方案。

*   子域的缺点：如果你想要 https，由于不同的 fqdns，SSL 证书会让你的生活更加艰难。

*   子域的优缺点取决于您的软件：相对文件访问/包含通常在 vhost 内是可能的，但在 vhosts 文档根目录之外被拒绝。如果您想分离（例如安全考虑）软件的不同部分，则子域会增加安全性。另一方面，它降低了灵活性。

根据您的基础架构（服务器、可用的网络设备），您可能会发现使用子域进行负载/优先级调整更容易，但这是一个更复杂的问题，我想您（还没有）处于这种情况。

# javascript - 不同的函数声明

> ID：15462416
> 
> 赞同：3
> 
> 时间：2013-03-17T15:19:11.870
> 
> 标签：javascript

有人告诉我，你可以用不止一种方式在 JavaScript 中声明函数。前任。

```
// One way
function sqrt(x){
   return x * x;
}

// Second way
var sqrtAlt = function (x){
   return x * x;
} 
```

*   这两个函数声明有什么区别？
*   输出相同但必须有理由有两种方式？
*   我也很好奇你会如何使用它们。
*   最后，还有其他方法吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T15:24:13.933

当你定义

```
function sqrt(x){
   return x * x;
} 
```

是函数名出现在 Firebug 调试器中。

声明为的函数

```
var sqrtAlt = function (x){
 return x * x;
 } 
```

匿名出现。

也看看这个[线程](https://stackoverflow.com/questions/1925976/declaring-functions-in-javascript)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T15:25:12.527

它们基本上是相同的，但在第二个示例中，您另外将函数分配给了一个变量。当覆盖某个对象的现有函数时，这种创建函数的方式非常有用，比如说：

```
window.alert = function(text)
{
    // Do something ...
}; 
```

# windows - 如何在 c++/cx windows 8 应用程序中包含 windows azure mobile 功能？

> ID：15462417
> 
> 赞同：1
> 
> 时间：2013-03-17T15:19:14.023
> 
> 标签：windows, azure

我正在使用 c++/cx 制作 Windows 8 应用程序，但我无法获得如何在我的应用程序中包含 azure 功能，每个地方都有 c# 中的教程，但我找不到 c++/cx 中的教程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T18:27:05.573

由于大多数示例是用托管代码编写的以访问 Windows Azure 移动服务，因此确实没有可用的 C++/C 示例。然而，这并不意味着你不能做到。请记住，您需要做额外的工作才能完成它。

由于 Windows Azure 移动服务使用 RESTful 接口，因此您可以从任何语言访问它们，只要您可以从那里调用 REST api。[这](http://msdn.microsoft.com/en-us/library/windowsazure/jj710108.aspx)是 Windows Azure 移动服务 REST Api 的文档。

使用 C++/C，您只需要搜索并找到一个合适的框架来调用 REST api，一旦您完成了工作，只需调用 Windows Azure Mobile TEST Api 即可实现您的目标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-28T23:42:22.607

[此博客文章](http://blogs.msdn.com/b/vcblog/archive/2013/11/05/using-windows-azure-mobile-services-from-c-windows-store-apps.aspx)包含一些示例，说明如何使用 C++ 为 Windows 8.1 应用商店应用程序执行各种 Azure 移动服务任务。该帖子中提到的 IDE 工具不适用于 Windows 8 应用程序。

# java - 硬编码访问令牌在谷歌电子表格 api 中不起作用？

> ID：15462418
> 
> 赞同：0
> 
> 时间：2013-03-17T15:19:14.900
> 
> 标签：java, google-sheets

使用此示例（[https://developers.google.com/google-apps/spreadsheets/#creating_a_spreadsheet](https://developers.google.com/google-apps/spreadsheets/#creating_a_spreadsheet)），我现在可以使用 oAuth 1.0 登录并使用 Google 电子表格 api，因为他们有一个 java 示例.

在这里，它获取访问令牌 + 机密，并且随后调用 SpreadsheetService 工作。

**但是，如果我想一天后**回来，并使用相同的访问令牌 + 密码，那应该也可以吧？

但是，如果我这样做，它会给我一个例外：

```
com.google.gdata.util.AuthenticationException: Unknown authorization header 
```

我错过了什么？我是否必须一直将用户重定向到该 URL？

我的 Java 代码如下所示：

```
 SPREADSHEET_FEED_URL = new URL("https://spreadsheets.google.com/feeds/spreadsheets/private/full");

    GoogleOAuthParameters oauthParameters = new GoogleOAuthParameters();
    OAuthHmacSha1Signer signer =  new OAuthHmacSha1Signer();
    GoogleOAuthHelper oauthHelper = new GoogleOAuthHelper(signer);
    oauthParameters.setScope(SCOPES);

    oauthParameters.setOAuthConsumerKey(CONSUMER_KEY); // hardcoded variable
    oauthParameters.setOAuthConsumerSecret(CONSUMER_SECRET);// hardcoded variable
    oauthParameters.setOAuthTokenSecret(OAUTH_ACCESS_SECRET);// hardcoded variable
    oauthParameters.setOAuthToken(OAUTH_ACCESS_TOKEN);// hardcoded variable
    service.setOAuthCredentials(oauthParameters,signer);

    SpreadsheetFeed feed = service.getFeed(SPREADSHEET_FEED_URL, SpreadsheetFeed.class); 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T01:02:33.490

使用刷新令牌获取新的访问令牌。访问令牌不会持续很长时间，可能是 1 小时，类似的。谷歌驱动 DrEdit 教程有大部分用于刷新的代码。更改 DrEdit 代码以获得新令牌并不难。....（另一方面，谷歌应用程序脚本也有一个电子表格 API）

# wpf - 如何在wpf treeview中的单击节点上打开文件

> ID：15462420
> 
> 赞同：1
> 
> 时间：2013-03-17T15:19:17.430
> 
> 标签：wpf, c#-4.0

我有一个使用数据绑定从 xml 文件填充的树视图。接下来我想知道的是，如何在单击树视图的节点时打开 txt 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T15:30:51.847

我假设您每次更改选择时都想加载文本文件？这是一个想法调用事件 SelectedItemChanged 然后使用

使用 System.IO；

在顶部。然后创建一个文本阅读器如下

```
 private void treeView1_SelectedItemChanged(object sender, RoutedPropertyChangedEventArgs<object> e)
    {
        TextReader TR = new StreamReader(@"file location...");
        string contents = TR.ReadToEnd();
        TR.Close();
        //Add code to do what ever you want to to the contents of the file...
    } 
```

# python - 将 help() 分配给变量

> ID：15462424
> 
> 赞同：1
> 
> 时间：2013-03-17T15:19:57.873
> 
> 标签：python, python-2.7

我想将`help()`页面作为字符串分配给变量；例如

```
a = help("class")
print a 
```

这是可能的，我将如何去做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-17T15:29:10.757

您可以直接检索文档。

```
from pydoc_data import topics

a = topics.topics['class']
print a 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-17T15:31:49.953

```
import pydoc

a = pydoc.render_doc('class')
print a 
```

# c++ - 使用openCV找到单应矩阵

> ID：15462434
> 
> 赞同：0
> 
> 时间：2013-03-17T15:20:47.293
> 
> 标签：c++, opencv, matrix

我正在 Visual Studio 2012 上使用 OpenCV 2.3.1 进行图像拼接项目。由于未知原因，我的程序无法正常工作！

```
#include "opencv2/highgui/highgui.hpp"
#include "opencv/cv.h"
#include <stdio.h>
#include <iostream>

       using namespace cv;
       using namespace std;
Mat getHomography() 
{

    vector<Point2f> points1;
    vector<Point2f> points2;

    points1.push_back(Point2f(10, 100));
    points1.push_back(Point2f(100, 10));
    points1.push_back(Point2f(200, 20));
    points1.push_back(Point2f(80, 30));

    points2.push_back(Point2f(220, 20));
    points2.push_back(Point2f(10, 220));
    points2.push_back(Point2f(90, 120));
    points2.push_back(Point2f(100, 20));

    Mat H = findHomography(Mat(points1), Mat(points2), 8, 3.0); 
    return H;
}

int main(){

    Mat HH = getHomography();
    cout<<HH;
    system("pause");

        return 0; 
} 
```

我的问题： ![在此处输入图像描述](../Images/49fa1fab1626ba1831ce47dc7e03b656.png) 任何帮助plzzz

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T15:26:52.497

每个 vec 至少需要 4 个点。2 还不够

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T18:41:43.200

我通过从 vs2012 更改为 vs 2010 解决了我的问题：D

# javascript - 如何知道 nginx 是否正在压缩 gzip？

> ID：15462436
> 
> 赞同：0
> 
> 时间：2013-03-17T15:20:57.153
> 
> 标签：javascript, node.js, proxy, nginx, reverse-proxy

这是 nginx 的 de 配置文件

```
gzip on;
    gzip_disable "msie6";
        # gzip_static on;
    gzip_min_length 1400; 
        gzip_vary on;
    gzip_proxied any;
    gzip_comp_level 9;
    gzip_buffers 16 8k;
    gzip_http_version 1.1;
    gzip_types text/plain text/css image/png image/gif image/jpg application/json application/x-javascript text/xml application/xml application/xml+rss text/javascript applicacion/x-font-ttf font/opentype application/x; 
```

在谷歌分析器中显示 js 文件没有被压缩，所以我在 nodejs 中添加了 gzippo 模块，这是[repo](https://github.com/tomgco/gzippo)

```
 //app.use(express.static(path.join(__dirname, 'public')));
  app.use(gzippo.staticGzip(path.join(__dirname, 'public'))); 
```

当我添加模块时，谷歌说 js 是 gzipped，但是在 repo 中没有说我如何将 css 文件和图像文件添加到 gzippo 模块压缩中

那么我怎么知道哪些文件是用 nginx 或 nodejs gzippo 模块压缩的，我怎样才能压缩 otf 文件？？？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-17T15:46:59.050

部分答案：要知道某些资源是否正在被压缩，请打开浏览器的开发者工具、网络面板，然后完全重新加载您的网页（通常是 Shift + 重新加载按钮。）如果资源在压缩状态下被正确提供，您会注意到 Size 和 Content 值不同：

![截屏](../Images/c7f0dbaa8e391006c16b12b502a63f4f.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T15:58:39.583

使用 Firefox 和 Firebug 时，请检查请求的 HTTP 标头。单击网络选项卡并检查请求。在回答 HTTP 部分中，当`Content-Encoding gzip`您的请求成功压缩时。

# c# - 如何从 asmx webmethod 获取 ArrayList 返回

> ID：15462437
> 
> 赞同：0
> 
> 时间：2013-03-17T15:20:58.310
> 
> 标签：c#, .net

我有一个 ASMX Web 服务，并且有一个返回 ArrayList 的方法。它工作正常，但我不知道如何从客户端代码中获取 Array 项。这是asmx方法

```
[WebMethod]
public ReturnParcel[] getConStrings(string dbType)
{
   var OdbName = GetSetting(document, "Odbname");
   var OuserName = GetSetting(document, "Ousername");
   var Opassword = GetSetting(document, "Opassword");
   if (dbType == "Oracle")
   {
      return new ReturnParcel[] {new ReturnParcel { DBName = OdbName, UserID = OuserName, Password = Opassword },};
   }
   else
   {
      return new ReturnParcel[] {new ReturnParcel { DBName = SdbName, UserID = SuserName, Password = Spassword },};
   }
}

public class ReturnParcel
{
   public string DBName { get; set; }
   public string UserID { get; set; }
   public string Password { get; set; }
} 
```

客户代码：

```
 WebServiceProxy.OraSPDataXchange objServiceClient = new WebServiceProxy.OraSPDataXchange();
 objServiceClient.Url = "http://portal.mydomain.local/_layouts/SPCustomWS/OraSPDataXchange.asmx";

 objServiceClient.getConStrings("Oracle"); 
```

检查客户端代码的最后一行..我需要获取返回值..所以需要知道如何在这里获取它..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T15:26:41.327

我假设

```
var receivedConnectionStrings = objServiceClient.getConStrings("Oracle"); 
```

会将结果放入`receivedConnectionStrings`变量中。

# iis - 端口转发 Web 服务器端口 80 - 外部流量失败或定向到路由器页面

> ID：15462438
> 
> 赞同：0
> 
> 时间：2013-03-17T15:20:59.370
> 
> 标签：iis, networking, iis-7, hosting

我正在运行 IIS，并且在我的内部网络上它运行正常。当尝试从外部访问它（使用直接 IP 或 dyndns 主机名）时，我总是被重定向到我的路由器登录页面。

我在主机（192.168.1.29）上设置了一个IP，并在我的路由器上转发了80端口。我还设置了一个绑定规则以允许 Windows 防火墙中的端口 80。

当路由器防火墙处于默认模式时，我无法从外部访问我的机器“网页不可用”禁用防火墙会给我一个 HTTPS 安全证书警告，并且当接受时会直接进入路由器登录页面。

有什么建议么？非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T15:25:28.860

听起来您的路由器正在端口 80 上运行其管理页面。看看它是否可以选择更改这些页面的端口号。

# iphone - 在外面点击时从另一个子视图中删除一个子视图

> ID：15462442
> 
> 赞同：1
> 
> 时间：2013-03-17T15:21:22.443
> 
> 标签：iphone, ios, xcode, touches

我正在尝试构建我的第一个 iphone 应用程序，请帮我解决这个问题！我将滚动视图作为控制器视图的子视图，并且标签、按钮、文本字段和表格视图等一些控件已作为此滚动视图的子视图放置。现在，当我点击按钮时，我的表格视图变得可见，但是在表格视图之外点击时我无法关闭此表格视图（我的意思是在滚动视图上点击时）。

下面是我的代码片段，我试图关闭我的表格视图，请帮助我！

```
- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *aTouch = [touches anyObject];
    if (aTouch.tapCount == 1)
    {
        CGPoint p = [aTouch locationInView:self.scrollview];
        if (!CGRectContainsPoint(myTableView.frame, p))
        {
            myTableView.hidden = YES;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T16:05:45.703

你把这段代码放在 ViewController.m 中，这样当你点击 self.view 时它就处于活动状态。你的 scrollView 覆盖你的 self.view，这样操作就不会被激活。

子类化您的 scrollView 并在您的 IB 中选择类型，在 YourScrollView.m 中，添加以下代码：

```
- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *aTouch = [touches anyObject];
    if (aTouch.tapCount == 1)
    {
        CGPoint p = [aTouch locationInView:self];
        for (UIView *aView in self.subviews) {
            if (([aView isKindOfClass:[UITableView class]])&&(!CGRectContainsPoint(aView.frame, p)))
            {
                [aView setHidden:YES];
            }

        }
    }
} 
```

# css - 带有关键帧的图像过渡

> ID：15462443
> 
> 赞同：1
> 
> 时间：2013-03-17T15:21:27.173
> 
> 标签：css, transition, css-animations

嘿伙计们，我目前正在使用 css3 关键帧构建一个图像显示（小），它正在工作，但仅在某种方式上在 firefox 上，我似乎无法解决这个问题:( 它应该在最新版本的 chrome firefox 和safari，但它目前只在 Firefox 中工作。

任何人都可以提供帮助吗？

这是应该在以上浏览器中工作的css。

```
@keyframes cf4FadeInOut {
 0% {
   opacity:1;
 }
 17% {
   opacity:1;
 }
 25% {
   opacity:0;
 }
 92% {
   opacity:0;
 }
 100% {
   opacity:1;
 }
}

.case-image {
  position:relative;
  height:auto;
  width:32%;
}
.case-image img {
  position:absolute;
  width:                100%;
  height:               auto;
  left:0;
 border:                            3px solid #f8d206;
    -moz-border-radius:                 15px;
    border-radius:                      15px;
    margin-left:                        -3px;
    margin-right:                       -3px;

}

.case-image img {
  -webkit-animation-name: cf4FadeInOut;
  -webkit-animation-timing-function: ease-in-out;
  -webkit-animation-iteration-count: infinite;
  -webkit-animation-duration: 8s;

  -moz-animation-name: cf4FadeInOut;
  -moz-animation-timing-function: ease-in-out;
  -moz-animation-iteration-count: infinite;
  -moz-animation-duration: 8s;

  -o-animation-name: cf4FadeInOut;
  -o-animation-timing-function: ease-in-out;
  -o-animation-iteration-count: infinite;
  -o-animation-duration: 8s;

  animation-name: cf4FadeInOut;
  animation-timing-function: ease-in-out;
  animation-iteration-count: infinite;
  animation-duration: 8s;
}
.case-image img:nth-of-type(1) {
  -webkit-animation-delay: 6s;
  -moz-animation-delay: 6s;
  -o-animation-delay: 6s;
  animation-delay: 6s;
}
.case-image img:nth-of-type(2) {
  -webkit-animation-delay: 4s;
  -moz-animation-delay: 4s;
  -o-animation-delay: 4s;
  animation-delay: 4s;
}
.case-image img:nth-of-type(3) {
  -webkit-animation-delay: 2s;
  -moz-animation-delay: 2s;
  -o-animation-delay: 2s;
  animation-delay: 2s;
}
.case-image img:nth-of-type(4) {
  -webkit-animation-delay: 0;
  -moz-animation-delay: 0;
  -o-animation-delay: 0;
  animation-delay: 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T15:50:30.937

您需要包含关键帧的供应商前缀。见这里的例子：http: [//jsfiddle.net/tjfogarty/Gzxkq/](http://jsfiddle.net/tjfogarty/Gzxkq/)

```
@keyframes pulse {
    0% { width: 40px; height: 40px; }
    100% { width: 50px; height: 50px; }
}

@-webkit-keyframes pulse {
    0% { width: 40px; height: 40px; }
    100% { width: 50px; height: 50px; }
}

@-moz-keyframes pulse {
    0% { width: 40px; height: 40px; }
    100% { width: 50px; height: 50px; }
} 
```

ETC...

你也可以使用这样的东西：http: [//leaverou.github.com/prefixfree/](http://leaverou.github.com/prefixfree/)为你处理它。

# django - 主干中的文件渲染问题

> ID：15462445
> 
> 赞同：1
> 
> 时间：2013-03-17T15:21:42.503
> 
> 标签：django, backbone.js, django-rest-framework

我正在尝试使用骨干网和 Django Rest Framework 制作应用程序，并且在渲染模板时遇到了这个问题。我收到以下错误：

`Uncaught TypeError: object is not a function`

**骨干**

```
var EditBook = Backbone.View.extend({
el:'.page',
render: function (options) {
    var that = this;
    if(options.id) {
        var book = new Book({id: options.id});
        book.fetch()({
            success: function(book) {

                var template = _.template($('#edit-book-template').html(), {book: null});
                that.$el.html(template);
            }
        })
    } else {
        var template = _.template($('#edit-book-template').html(), {book: null});
        this.$el.html(template);
    }
}
}); 
```

我尝试检查程序的控制流，它看起来像 line: 处的错误点，`success: function(book){`而且似乎没有错误。请提供帮助，因为我对骨干很陌生，并且在每个角落都寻求帮助。

**编辑：**问题已解决，因此删除了不相关的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T16:19:50.117

您正在调用 fetch result 作为函数。

换行：

```
book.fetch()({
    success: function(book) {
        var template = _.template($('#edit-book-template').html(), {book: null});
        that.$el.html(template);
    }
}) 
```

到：

```
book.fetch({
    success: function(book) {
        var template = _.template($('#edit-book-template').html(), {book: null});
        that.$el.html(template);
    }
}); 
```

# css - Bootstrap CSS 单选按钮在 Firefox 中损坏

> ID：15462448
> 
> 赞同：1
> 
> 时间：2013-03-17T15:21:53.077
> 
> 标签：css, firefox, twitter-bootstrap, radio-button

我正在使用引导 CSS，并且我有一个使用单选按钮的表单，它在 Chrome 中工作，当我使用 Firefox 时，标签和按钮会折叠。

这是代码

```
<form class="form-horizontal" method="post" action="registerResult.php">

            <fieldset>
    <div class="control-group">
                    <label  class="control-label">Gender :</label>
                        <label class="radio">
                           <div class="controls"><input type="radio" name="sexe" id="optionsRadios1" value="male" checked></div>
                         Male
                        </label>
                        <label class="radio">
                            <div class="controls"><input type="radio" name="sexe" id="optionsRadios1" value="female" checked></div>
                          Female
                        </label>
                </div>
</fieldset>
</form> 
```

这是屏幕截图： ![Bootstrap CSS 单选按钮在 Firefox 屏幕截图中损坏](../Images/654d787d530fbd48f4585c2f9bab0d24.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T15:37:32.837

检查这个：

```
<div class="control-group">
   <label class="control-label">Gender:</label>
   <div class="controls">
      <label class="radio">
         <input type="radio" name="Gender" value="Male"> Male
      </label>
      <label class="radio">
         <input type="radio" name="Gender" value="Female"> Female
      </label>
      <label class="radio">
         <input type="radio" name="Gender" value="Other"> Other
      </label>
   </div>
</div> 
```

# jsf - f:ajax 在 c:forEach 中不起作用

> ID：15462449
> 
> 赞同：1
> 
> 时间：2013-03-17T15:21:53.993
> 
> 标签：jsf

我想在 c:forEach 标签中使用 f:ajax。但它不起作用。

```
<c:forEach var="fact" items="#{factBean.nodeHierarchy}" varStatus="status">
  <h:inputText value="#{factBean.month}" > 
        <f:ajax event="keyup" listener="#{factBean.saveFactValue}"/> 
  </h:inputText>
</c:forEach> 
```

我怎样才能使它可行？如果我将 h:inputText 放在 c:forEach 之外，那么它可以完美运行。但我的文本框是动态的，它们将在 c:forEach 标记块内生成。

# codeigniter - CodeIgniter 会话在不同的函数中显示不同的输出

> ID：15462450
> 
> 赞同：0
> 
> 时间：2013-03-17T15:21:56.617
> 
> 标签：codeigniter

在我的控制器的第一个功能中，我使用 CI 活动记录从 mysql 表中获取随机记录

```
$query = $this->db->query("SELECT DISTINCT * FROM questions WHERE `level` = '1' ORDER BY RAND() limit 0,5");
$result = $query->result_array(); 
```

并将结果保存在会话中

```
// saving questions id in session
for($i = 0; $i < count($result); $i++)
{
    $session['questionsId'][] = $result[$i]['qId'];
}
$this->session->set_userdata($session); 
```

如果打印会话变量，它会显示如下输出：

```
$qIds_o = $this->session->userdata('questionsId');
var_debug($qIds_o);

Array
(
    [0] => 5
    [1] => 9
    [2] => 3
    [3] => 6
    [4] => 11
) 
```

但是如果我在同一控制器的另一个功能中检索相同的会话，它会显示不同的结果

```
$qIds = $this->session->userdata('questionsId');
var_debug($qIds);

Array
(
    [0] => 2
    [1] => 8
    [2] => 6
    [3] => 3
    [4] => 5
) 
```

如果我`ORDER BY RAND()`从 mysql 查询中删除，例如：

```
$this->db->query("SELECT DISTINCT * FROM questions WHERE `level` = '1' limit 0,5"); 
```

它在两个函数中显示相同的会话数组。很奇怪。

## 请大神指点下是什么问题......

这是我的控制器脚本：

```
public function set_value(){
    $query = $this->db->query("SELECT DISTINCT * FROM questions WHERE `level` = '1' ORDER BY RAND() limit 0,5");
    $result = $query->result_array();

    // saving questions id in session
    for($i = 0; $i < count($result); $i++)
    {
        $session['questionsId'][] = $result[$i]['qId'];
    }
    $this->session->set_userdata($session);
    $qIds_o = $this->session->userdata('questionsId');
    var_debug($qIds_o);
}

public function get_value(){
    $qIds = $this->session->userdata('questionsId');
    var_debug($qIds);
} 
```

我在页面加载时调用`set_value()`了页面加载，而一旦页面加载，我就`get_value()`使用`AJAX post`它来调用它并简单地点击`my_controller/get_value/`并响应浏览器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T16:23:38.287

不看你的控制器（让我们`my_controller`详细称呼它，我认为可能发生的事情是：

(1) 您调用第一个函数，`my_controller/set_value`其中`set_value`设置会话变量并回显结果。

(2) 然后调用第二个函数，`show_value`它只是简单地回显会话变量。

你可能在做的`set_value`是：

1) 回显当前会话变量
2) 调用查询并重新设置会话变量

如果是这种情况，那么当您转到`show_value`（第二个函数）时，您正在查看最近重新设置的值，而不是您在第一个函数中回显的先前值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T23:02:24.353

关于这句话，我有两个问题：

> 但是如果我在同一控制器的另一个功能中检索相同的会话，它会显示不同的结果

1.  这是在新页面加载上吗？
2.  如果是这样，查询是否*再次*运行？

我将假设这两个问题的答案都是肯定的，因为您说删除`RAND()`会给您相同的结果。

`RAND()`您在查询中使用and的组合`LIMIT`，这意味着您只需要随机顺序的五行。这意味着每次运行查询（并设置您的会话数据）时，结果**很**可能会有所不同。

我不确切知道您在使用这些 ID 做什么以及您需要什么样的数据集，所以这对于您的解决方案可能不是 100% 完美，但如果您只需要设置一次此会话数据，您应该检查如果它在运行查询之前存在。

```
if ($this->session->userdata('questionsId') === FALSE)
{
    // Run your query and set your session data here.
    // Note that in CI 3.0, Session::userdata()
    // will return NULL if empty, not a boolean.
} 
```

# c++ - 某些内联汇编在 64 位模式下不起作用？

> ID：15462452
> 
> 赞同：0
> 
> 时间：2013-03-17T15:22:04.597
> 
> 标签：c++, assembly, x86, x86-64

与 32 位相比，我在 64 位模式下编译的技术优势是什么？我们是在谈论我的应用程序可以使用的 RAM 吗？我可以使用的 CPU 寄存器的大小？

我问是因为我正在阅读这个问题：

[ICC 内联汇编器不喜欢 push/pop](https://stackoverflow.com/questions/8834423/icc-inline-assembler-doesnt-like-push-pop)

一个人无法获得内联汇编指令`POP`进行编译，因为他在 64 位模式下编译并且`POP`只能在 32 位寄存器上工作（至少，我是这样阅读答案的）。

如果你在 64 位模式下编译，我不敢相信你不能使用`POP`汇编命令？

**我的主要问题是——如果你选择 64 位编译——这是否意味着你不能使用“常规”内联汇编指令？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T15:33:02.093

`push`而`pop`在 64bit 模式下不能有 32bit 操作数，只有 16bit 或 64bit，不是`pop`只适用于 32bit 寄存器的情况。一般来说，很多代码在 32 位和 64 位模式下的工作方式相同，但一些很少使用的指令（十进制数学，与分段有关的指令）已从 64 位模式中完全删除。

# java - 无法在独立客户端上实例化初始上下文

> ID：15462455
> 
> 赞同：0
> 
> 时间：2013-03-17T15:22:09.217
> 
> 标签：java, jakarta-ee, glassfish, jms, mom

我有一个不想部署在 Glassfish 服务器上的独立客户端。对于客户，我想通过点对点通信模式发布消息。我发现[了这个](http://www.packtpub.com/article/setting-glassfish-jms-and-working-message-queues)很棒的教程，它使用了我无法使用的注释，因为我有一个独立的客户端。我在stackoverflow上找到了以下解决方案：

```
Context jndiContext;
private ConnectionFactory connectionFactory;
private static Queue queue;

public TweetSender() throws NamingException{
    jndiContext = new InitialContext();
    connectionFactory = (ConnectionFactory) jndiContext.lookup("JMS/KwetterConnectionFactory");
    queue = (Queue) jndiContext.lookup("JMS/KwetterQueue");
} 
```

我还发现我必须从 glassfish 目录中导入一些库。所以我做了：![项目属性](../Images/87583862427728795756b5fb700c9da2.png)

我收到以下错误：

```
javax.naming.NoInitialContextException: Cannot instantiate class: com.sun.enterprise.naming.impl.SerialInitContextFactory [Root exception is java.lang.ClassNotFoundException: com.sun.enterprise.naming.impl.SerialInitContextFactory] 
```

我究竟做错了什么？

编辑

我找到了一个临时解决方案，但我觉得它不是正确的（我想当我想迁移项目时可能会遇到问题。我删除了从 Glassfish lib 文件夹中检索到的库，并使用“Absolute小路”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T17:03:45.113

解决方案可以将您的独立客户端应用程序打包到一个 jar 文件中，例如：myclient.jar。`appclient`并使用GlassFish 的实用程序将其作为应用程序客户端运行：

```
applcient -client myclient.jar 
```

该`appclient`实用程序可在此处找到：[glassfish 主目录]/glassfish/bin。

# java - 为警报应用程序提供默认音调

> ID：15462457
> 
> 赞同：0
> 
> 时间：2013-03-17T15:22:30.437
> 
> 标签：java, netbeans, alarm

![项目的结构](../Images/703e63be62efc644dbdbc4df57be21fc.png)

我正在 Netbeans 中用 Java 编写一个警报应用程序。我想为警报提供默认音调。我创建了一个名为 rsrc 的文件夹并将音调保存在该文件夹中。我包含了这段代码来获得音调

```
URL turl = this.getClass().getResource("rsrc/bb.mp3");
String s1=turl.getFile(); 
```

虽然这在 Netbeans 中有效，但在 netbeans 在 dist 文件夹中创建的 jar 文件中不起作用。有人可以帮助我如何使用 jar 文件或使用默认音调分发我的应用程序的方法包括

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T15:39:34.787

路径是相对于您当前目录的。当您运行程序时，这将不起作用。您需要拥有或找到一个绝对安装目录并在路径前加上它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T15:42:50.630

试试这个：

```
URL turl = this.getClass().getResource("./alarm/rsrc/bb.mp3");
 String s1=new File(turl.getFile()).getAbsolutePath(); 
```

# mysql - 根据另一个表显示表信息

> ID：15462460
> 
> 赞同：1
> 
> 时间：2013-03-17T15:22:54.713
> 
> 标签：mysql, sql, join

我有三张桌子：

```
users:
--------------------
id | name | 
 1 | john |
 2 | bob  |

events
--------------------
id |  name   | location
 1 | concert | moon
 2 | sport   | ukraine

user_events
--------------------
id |  userid | eventid
 1 |   1     |   1 
 2 |   1     |   2 
 3 |   2     |   2 
```

我正在尝试显示用户将要参加的活动。我想检索并仅显示事件信息，但仅显示某个用户将要参加的事件的信息。

我如何列出 John 参加的活动中的活动信息？

所以输出将是：

```
johns events
--------------------
concert | moon
sport   | ukraine 
```

真的希望我已经解释得足够好！如果不是请说。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T15:25:07.953

基本上，`INNER JOIN`你需要一个就足够了，因为你只想要用户将参加的活动。

```
SELECT  c.name, c.location
FROM    users a
        INNER JOIN user_events b
            ON a.ID = b.userID
        INNER JOIN events c
            ON b.eventID = c.ID
WHERE   a.name = 'JOHN' 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/76c73/1)

要进一步了解有关联接的更多信息，请访问以下链接：

*   [SQL 连接的可视化表示](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

输出

```
╔═════════╦══════════╗
║  NAME   ║ LOCATION ║
╠═════════╬══════════╣
║ concert ║ moon     ║
║ sport   ║ ukraine  ║
╚═════════╩══════════╝ 
```

# git - 如何批量删除冗余的远程 git 分支？

> ID：15462463
> 
> 赞同：3
> 
> 时间：2013-03-17T15:23:22.850
> 
> 标签：git

我从旧的远程仓库收集了相对较大的远程分支：

```
$ git branch -r
  guy/feat1
  guy/feat2
  guy/feat3
  guy/feat4
  guy/feat5
  guy/feat6
  guy/feat7
  guy/feat8
  origin/HEAD
  origin/master 
```

是否有一个命令可以删除所有`guy`分支？

回购不再`guy`作为远程回购。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T15:31:59.500

```
git branch -r | grep guy/ | xargs git branch -d 
```

（假设这些`$`标志实际上不是你输出的一部分......）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-17T15:32:20.523

您也可以尝试（从[`git remote`](http://git-scm.com/docs/git-remote)）：

```
git remote --prune guy 
```

和：

```
prune 
```

> 删除下所有过时的远程跟踪分支`<name>`。
> 这些陈旧的分支已从 引用的远程存储库中删除`<name>`，但仍可在本地“remotes/”中使用。
> 
> 使用`--dry-run`选项，报告将修剪哪些分支，但实际上并不修剪它们。

另见“[和之间的](https://stackoverflow.com/questions/12736728/difference-between-git-remote-prune-and-git-branch-d-r)[区别`git remote prune``git branch -d -r`](https://stackoverflow.com/questions/12736728/difference-between-git-remote-prune-and-git-branch-d-r)”

如果 guy 不再是有效的远程仓库，那么：

```
git gc --prune=now 
```

将清理这些分支（以及一些未引用的提交，因此请谨慎使用）
在“[如何从 Git 中删除无效的远程分支引用？](https://stackoverflow.com/questions/1072171/how-do-you-remove-an-invalid-remote-branch-reference-from-git) ”中查看更多信息：通常更安全的是：`git branch -rd guy/badbranch`如果可能的话，但是如果这不起作用，那么`git gc --prune=now`也可以是一个解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T15:37:35.733

要删除远程分支，您可以 `git push <remote-repo> :branch-to-delete` 在 branch-to-delete 之前使用注意冒号。另请参阅[在 git 中删除多个远程分支](https://stackoverflow.com/questions/10555136/delete-multiple-remote-branches-in-git)...这显示了如何构造一个单行器以一次性删除多个分支。

# wpf - WPF 自定义 NavigationUI 控件

> ID：15462468
> 
> 赞同：0
> 
> 时间：2013-03-17T15:23:44.680
> 
> 标签：wpf, templates, navigationwindow

下午好，

我正在尝试自定义 NavigationPanel UI 后退和前进按钮，我基本上只是想更改颜色。我找不到可以设置的属性，所以我有点卡住了。

我相信前进的方向是修改现有模板并将 Page.Template 属性设置为新的控件模板？我走的是正确的路线吗？这个 Xaml 属于哪里，在 Application.Resources / Page.Resources 下？

我相信模板是[http://msdn.microsoft.com/en-us/library/aa970054.aspx](http://msdn.microsoft.com/en-us/library/aa970054.aspx)

抱歉，如果这是一个基本问题，但我正在尝试学习 Xaml / Wpf。

提前感谢您的帮助...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T08:57:16.907

我在 Msdn 上的示例下找到了一个很好的例子：

链接： [http ://code.msdn.microsoft.com/Customized-NavigationWindow-ced9d7af](http://code.msdn.microsoft.com/Customized-NavigationWindow-ced9d7af)

然后我使用上面的默认模板并将 xaml 修改为我想要的效果。当你能找到样品时很简单。:-)

# r - function.class() 不适用于给定的类

> ID：15462472
> 
> 赞同：2
> 
> 时间：2013-03-17T15:24:19.880
> 
> 标签：r, oop, function

我需要一些关于这段代码的帮助：

```
foo <- function(obj){
  "fail"
}

foo.usefull <- function(obj){
  obj$content
}

myob <- structure(list(content="sucess"), class="usefull")

foo(myob)
#[1] "fail" 
```

什么调用`foo(myob)`应该返回 ist “成功”。但似乎我错过了一些东西。什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-17T15:29:33.637

您仍然必须注册`foo`为泛型函数才能`foo.usefull`用作泛型。有关如何执行此操作的方法，请参见[这篇文章。](http://www.r-bloggers.com/the-s3-oop-system/)对于您的代码：

```
foo <- function(x) UseMethod("foo", x)   # define generic
foo.usefull <- function(obj){
  obj$content
}
myob <- structure(list(content="sucess"), class="usefull")
foo(myob)
# [1] "sucess" 
```

对于其他泛型，例如`print`或`plot`这已经完成，并且`plot.blabla`马上定义一个新的作品。

# c - typedef 结构的用法

> ID：15462475
> 
> 赞同：-1
> 
> 时间：2013-03-17T15:24:41.667
> 
> 标签：c, typedef

我不能说我使用了很多 typedef，但在 Cocoa Touch 中，这有点令人困惑。以 CoreGraphics 自己的 CGPoint 定义为例：

```
struct CGPoint {
    CGFloat x;
    CGFloat y;
};
typedef struct CGPoint CGPoint; 
```

如果我要根据我在书中看到的内容来定义这一点，请去：

```
typedef struct {
    CGFloat x;
    CgFloat y;
} CGPoint; 
```

它似乎工作得很好。那么它们在做什么有区别，还是它们在做完全相同的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T15:32:01.683

苹果的例子就是这样做的。

```
typedef struct CGPoint {
    CGFloat x;
    CGFloat y;
} CGPoint; 
```

不同之处在于，在 Apple 定义的代码中，您可以将变量定义为`struct CGPoint`OR `CGPoint`。在您的 typedef 中，您基本上创建了一个无名结构，然后您将其称为 CGPoint，而不是您也称为 CGPoint 的名为 CGPoint 的结构。

通常你会看到 typedef 的 'struct' 部分被替换为类似的东西`CGPoint_t`

编辑：考虑以下。

```
typedef struct {
    List *next;  // <-- compiler error
} List; 
```

为什么？因为编译器还不知道“List”类型。

```
typedef struct List {
    struct List *next; // <-- works because you named your struct, and used that name here
} List; 
```

如果您不命名您的结构，则不能将其自身（指针）包含为成员。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T15:46:42.327

在 C 语言中，结构名称（称为*tags*）存在于它们自己的命名空间中。`struct Foo`命名不同于`Foo`：

```
struct Foo {
   int smth;
};

int main() {
    struct Foo foo; // OK. note `struct`, it is required
    // Foo nope; // ERROR, no such type Foo
} 
```

在 C++ 中，`struct Foo`和`Foo`是一回事。

如果想使用 just `Foo`，就像在 C++ 中那样（就像我们的直觉告诉我们的那样！），他们必须创建一个`Foo`为该`struct Foo`类型命名的 typedef。这就是 Apple 的定义`CGPoint`。

您可以将它们组合成一个语句：

```
typedef struct Foo {
   int smth;
} Foo; 
```

这就是那些书建议你这样做的方式。

# c++ - 这种加法有什么问题？

> ID：15462477
> 
> 赞同：0
> 
> 时间：2013-03-17T15:24:54.910
> 
> 标签：c++, class, methods, console-application

所以这是 Vector 类的公共继承中的方法声明：

```
Vector Addition(Vector a, Vector b); 
```

这是类外的实现：

```
Vector Vector::Addition(Vector a, Vector b)
{
    Vector temp = *this;
    temp.x=a.x+b.x;
    temp.y=a.y+b.y;
    return temp;
} 
```

当我在主要功能中这样做时：

```
Vector c(0,0),a(0,0),b(0,0);
c=Addition(a,b); 
```

我得到错误：标识符“加法”未定义。请帮忙！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T15:28:27.813

```
c=Addition(a,b); 
```

告诉编译器调用函数独立函数。您提供了一个成员函数而不是独立函数，因此编译器找不到任何成员函数并且它会抱怨。

您需要提供独立的功能。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-17T15:29:49.850

由于您的`Addition`函数是 的成员`Vector`，因此您必须这样调用它：

```
c = Vector::Addition(a, b); 
```

或者

```
c = a.Addition(b); 
```

请注意，第一个要求`Addition`函数是*static*，这意味着它不对具体实例（`this`在函数体中）进行操作：

```
static Vector Addition(Vector a, Vector b); 
```

但是你不能访问`this`指针，所以你必须默认构造`temp`而不是复制（顺便说一句，因为你覆盖了，所以没有使用`x`）`y`。

第二个使用左侧操作数作为`this`实现中的指针（`a`签名中没有）。

```
Vector Addition(Vector b)
{
    Vector temp = *this;
    temp.x += b.x;
    temp.y += b.y;
    return temp;
} 
```

请注意，您还可以在 C++ 中*重载运算符。*为此，定义一个调用的非静态成员函数`operator+`，它接受第二个实例（第一个实例是`this`函数内的指针，它将是左侧操作数）：

```
Vector operator+(const Vector &other) const; 
```

实施（一种可能性）：

```
Vector Vector::operator+(const Vector &other)
{
    Vector temp = *this;
    temp.x += other.x;
    temp.y += other.y;
    return temp;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-17T15:29:53.583

你`Addition`在里面声明`Vector`。正确的方法是...

(1) 将加法作为一个全局函数。这将涉及您从 Vector 类中取出 Addition 的定义。因此它看起来像

```
Vector Addition(/*parameters*/) { /* implementation */ } 
```

(2) 用关键字将 Addition 设为 static `static`，并用 code 调用`c = Vector::Addition(a, b)`。

代码看起来像

```
 class Vector{
 static Vector Addition(/* arguments */);
}

Vector Vector::Addition(/*arguments*/) {/*implementation*/} 
```

# sql - 很神秘的僵局

> ID：15462482
> 
> 赞同：2
> 
> 时间：2013-03-17T15:25:16.127
> 
> 标签：sql, sql-server, deadlock

我在互联网上阅读了大量有关死锁的信息，以确保我不是在问一个愚蠢的问题。发生死锁的下表用作订单队列。实际上没有记录被删除，只有它们的状态发生变化，即 PROCESSING、CANCELLED、COMPLETED。我`SELECTs with UPDLOCK`在这张桌子上观察到神秘的死锁。我看到的关于 SELECT 的唯一特点是有一个内部`SELECT without UPDLOCK`，但这应该没关系。该表已启用行锁定。这些 SELECTS 由单独的作业调度程序并行运行。这种 SELECT 的含义是它检索具有一个或多个指定状态（上述“正在处理、已取消、已完成”）的第一个（最早）订单。具有最小 ID 的订单（最小 ID 是手动选择的，在下面的查询中为 6850000）被视为“第一”订单。这样做是出于性能原因。这是一个实际的选择：

```
select * from TORDERSUMMARY with (updlock, rowlock) 
where ID in 
(select min(ID) from TORDERSUMMARY 
 where ID > 6850000  and (ORDERSTATUS in ( 'INITIATED' )) 
 and (ORDERDISPATCHSTATUS in ( 0  ,  2  ,  4 )) and (ORDERGROUPID is null)) 
```

在表中的主键 ID 上定义了一个聚集索引。正如 SQL Server Management Studio 2008 给出的，此类查询的估计和实际执行计划是 CLUSTERED INDEX SEEK。表上有很多非聚集索引，我希望一个NC索引操作和一个聚集索引操作死锁（我在网上详细看过一些这样的案例），但由于只有聚集索引以最佳方式使用（索引搜索），原因似乎并不在那里。

内部 SELECT 没有 UPDLOCK、ROWLOCK 提示，因此不会选择多条记录并进行锁定。我无法想象两个这样的选择会死锁的任何情况。当然，UPDLOCK 提示是因为代码随后会尝试更新订单的状态（将其标记为已处理等）。

这是来自 SQL Server Management Studio 2008 的一个死锁 XDL 文件 - [http://pastebin.com/ugCUbn80](http://pastebin.com/ugCUbn80)。服务器本身是 9.0.4035。SQL 查询很长，因此由于某种原因它们在 XDL 文件中被截断，但 SELECT 肯定属于上述类型，因为我已经使用此类 SELECT 对服务器进行了手动压力测试，并且死锁似乎随机发生在同一个方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T16:04:33.223

规则#1：不要在你的人工键上建立聚集索引；在您的自然键上构建聚集索引并为您的人工键构建非聚集索引。

# python - 超类 __init__ 不承认它的 kwargs

> ID：15462486
> 
> 赞同：4
> 
> 时间：2013-03-17T15:25:38.847
> 
> 标签：python, multithreading, subclass, keyword-argument

我正在尝试使用提供的`StoppableThread`课程作为[另一个问题的答案](https://stackoverflow.com/a/325528)：

```
import threading

# Technique for creating a thread that can be stopped safely
# Posted by Bluebird75 on StackOverflow
class StoppableThread(threading.Thread):
    """Thread class with a stop() method. The thread itself has to check
    regularly for the stopped() condition."""

    def __init__(self):
        super(StoppableThread, self).__init__()
        self._stop = threading.Event()

    def stop(self):
        self._stop.set()

    def stopped(self):
        return self._stop.isSet() 
```

但是，如果我运行类似：

```
st = StoppableThread(target=func) 
```

我得到：

> TypeError：`__init__()`得到了一个意外的关键字参数“目标”

可能是对如何使用它的疏忽。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-17T15:27:55.833

该类`StoppableThread`不接受或传递任何其他参数到`threading.Thread`构造函数中。你需要做这样的事情：

```
class StoppableThread(threading.Thread):
    """Thread class with a stop() method. The thread itself has to check
    regularly for the stopped() condition."""

    def __init__(self,*args,**kwargs):
        super(threading.Thread,self).__init__(*args,**kwargs)
        self._stop = threading.Event() 
```

这会将位置参数和关键字参数都传递给基类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T15:29:34.233

您正在覆盖**init**并且您的**init**不接受任何参数。您应该添加一个“目标”参数并将其通过 super 传递给您的基类构造函数，甚至更好地允许通过 *args 和 *kwargs 进行任意参数。

IE

```
def __init__(self,*args,**kwargs):
    super(threading.Thread,self).__init__(*args,**kwargs)
    self._stop = threading.Event() 
```

# ios - XIB 错误中的 UIPageViewController

> ID：15462491
> 
> 赞同：2
> 
> 时间：2013-03-17T15:26:24.800
> 
> 标签：ios, exception, uipageviewcontroller

我有一个子类视图控制器，在 Interface Builder 中，我希望 VC 视图的子视图成为 UIPageViewController 的视图。我将 UIPageViewController 的数据源设置为文件的所有者，并将视图属性设置为我的 VC 的子视图。这个功能可以实现吗？或者我不能以这种方式使用 UIPageVC？大多数示例是针对故事板的，而不是由 NavigationController 方式推送的旧 VC。我得到这个异常'[UIView invalidatePageViewController]'。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-15T16:54:09.393

当我有一个 UIViewController 作为我的根视图时，我也遇到了同样的事情 - 我的 UIViewController 有一个属性定义为：

```
@property (strong, nonatomic) IBOutlet UIPageViewController *pageViewController; 
```

我的 IBoutlet 也连接到我的 xib 中的 UIPageViewController。

解决方案：删除 IBoutlet 并断开 UIPageViewController 与我的 xib 的连接

```
@property (strong, nonatomic) UIPageViewController *pageViewController; 
```

也许崩溃与“每个视图应该只有一个视图控制器”有关

此外，如果您执行 _pageViewController.view = _apageView; 在“viewdidload”中

其中 _apageView 在您的 UIViewController 中为：

```
@property (strong, nonatomic) IBOutlet UIView *apageView; 
```

这也会导致同样的崩溃发生——因此你需要这样做：

```
[_apageView addSubview:_pageController.view]; 
```

那么崩溃不应该发生。

# javascript - 在 div 范围内定位 CSS

> ID：15462494
> 
> 赞同：1
> 
> 时间：2013-03-17T15:26:34.613
> 
> 标签：javascript, jquery

我有一个用 $.ajax 填充的元素，现在我想淡化所有自定义加载的元素，当页面加载时，该元素已经预先填充了 20 个元素，我不想针对这 20 个元素。本质上，如何假设我总共有 37 个 div，我的目标是后 17 个 div？目前我使用：

```
while ($(".info #future>center>div").length>20) {
  $(".info #future>center>div:last-child").remove();
} 
```

删除它们，但现在我还希望事先应用淡入淡出效果，将任何东西分配给他们的类不是一个选项，因为该属性已经被占用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T15:27:51.413

您可以使用 jquery 的`slice() [Slice()](http://api.jquery.com/slice/)方法。给定一个表示一组 DOM 元素的 jQuery 对象，.slice() 方法构造一个新的 jQuery 对象，其中包含由 start 和可选的 end 参数指定的元素的子集。提供的起始索引标识集合中元素之一的位置；如果 end 被省略，则该元素之后的所有元素都将包含在结果中。

```
 $('.info #future>center>div').slice(20).remove(); //Where start and end your  index to filter.  I omitted end parameter. if you want you can put it. .slice(20,37) 
```

如果你想要褪色效果

```
$('.info #future>center>div').slice(20).fadeOut(300, function() { $(this).remove(); }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T15:31:16.730

看看 jQuery [:gt() Selector](http://api.jquery.com/gt-selector/)。

它用于选择索引处大于提供给它的索引处的所有元素，因此您可以使用`index = 20`

```
$(".info #future>center>div:gt(20)").remove(); 
```

# java - 带有 GUI 的 Black Jack，将对象从另一个类中的 ActionListener 添加到主框架

> ID：15462500
> 
> 赞同：2
> 
> 时间：2013-03-17T15:27:01.210
> 
> 标签：java, swing, class, jframe, actionlistener

我用 gui 制作了一个 Black Jack 版本。我的问题是，大部分实现都在创建窗口的同一个类中。类 GameWindow 都初始化 JFrame，添加卡片图标等视觉对象，并将文本存储到 JLabels 中，然后将它们添加到不同的 JPanel 中。

很好，但是 GameWindow（它实现了 ActionListener）还将 ActionListener 添加到按钮（它们是简单的 JButtons 未创建的类），并实现了 ActionPerformed。

我想为每个按钮创建一个类，例如“Class Deal实现ActionListener”，然后让该类处理ActionPerformed(ActionEvent e)。问题是如何从其他类向 GameWindow 添加对象？以及如何将 Deck、Player（Score 和 Cards，存储在 ArrayList 中）和 Bank（Score 和 Cards）对象发送到相应类（Deal、Stay 和 Hit）中的 ActionPerformed？

我不想发布代码，因为我尝试了不同的解决方案，所以现在有点乱，但如果你想让我发布代码的任何部分或全部，请告诉我。

编辑，认为这是很少的文字;）

我现在使用的类是 CardDeck，有一个 ArrayList 和 drawCard()、shuffle() 等方法。 Card，有一个 ImageIcon 和一个保存其值的 int。GameWindow 扩展了 JFrame 实现了 ActionListener，初始化了 JFrame，还处理了与 JButtons Deal、Hit 和 Stay 相关的 ActionPerformed（这是我要更改的）。Player，持有在 ArrayList 中绘制的玩家卡片，以及作为 int Bank 的分数，与 player 相同，但用于 ai。Main，执行 GameWindow。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T15:36:11.970

分而治之。您需要一个 GameEngine 类，它保存数据并提供操作数据的方法。您需要一个单独的 GameWindow 来处理显示游戏但依赖 GameEngine 来保存数据并实际运行游戏。ActionListner 需要对 GameEngine 的引用，仅此而已；他们可以通过调用方法来做的所有其他事情。

GameEngine 本身可能在内部与其他类一起工作：Deck、Card 等。尽量让每个类代表一个定义明确的概念。将代码放在它使用的数据附近。

# android - libgdx：android 构建有图形故障

> ID：15462503
> 
> 赞同：3
> 
> 时间：2013-03-17T15:27:26.953
> 
> 标签：android, opengl-es, libgdx

目前我正在尝试使用 libgdx 制作 pacman 的副本。我完成了平铺地图渲染器并出现了图形故障，但故障仅出现在 Android 构建中。在第一张图片中，您可以看到图像正在“镜像”，还请注意[Cool Tool](https://play.google.com/store/apps/details?id=ds.cpuoverlay&hl=en)（来自 Google Play 的第三方覆盖系统监视器）也在镜像！所以我来这里寻求帮助，有什么想法吗？

PS 英语不是我的母语，请耐心等待（如有错误请说）。

![http://img43.imageshack.us/img43/6564/screenshot2013031718574.png](../Images/3701d8047b05bea9b47b6e51cb5952cb.png)

![http://img26.imageshack.us/img26/2876/screenshot2013031718575.png](../Images/bbc37c2e88f05696e935a8de0841a233.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T12:24:37.963

我忘记在绘图前清除屏幕。在 PC 上由于某种原因还可以，但在 Android 上却出现了奇怪的故障（即使没有任何动画/在屏幕上移动）。要清除我使用的屏幕：

```
Gdx.gl.glClearColor(0, 0, 0, 0); 
Gdx.gl.glClear(GL10.GL_COLOR_BUFFER_BIT); 
```

# ruby-on-rails - Ruby on rails，使用 rails s 延迟作业

> ID：15462505
> 
> 赞同：0
> 
> 时间：2013-03-17T15:27:44.663
> 
> 标签：ruby-on-rails, delayed-job

我想通过某种特定的方法直接开始工作。所以，我用通常的 rails 启动应用程序。上传一些东西，所以调用 create 方法。创建方法后 :perform_analysis -方法被延迟。一些数据被插入到delayed_jobs 表中。通常我会开始工作人员`"script/delayed_job start"`在命令行中输入内容。但我想自动启动工人工作，所以我什么都不输入。

模型：

```
after_create :perform_analysis
def perform_analysis
bla
end
handle_asynchronously :perform_analysis, :run_at => Proc.new { 5.minutes.from_now } 
```

所以，我用 rails 运行了一个应用程序。我登录我的wep页面。上传一些文件，5 分钟后作业被延迟。然后工人应该开始工作。我发现[这个页面](http://shouweick.blogspot.de/2012/12/delayed-job-real-pain-in-production.html)几乎可以满足我的要求，但不知何故，工作人员根本没有开始。所以`schedule.rb`没有运行。我应该做更多该网页上没有告诉的事情吗？

还有其他可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T16:11:43.693

我建议您查看 Foreman ( [http://ddollar.github.com/foreman/](http://ddollar.github.com/foreman/) ) 并让您的 procfile 声明一个工作进程：

```
web: bundle exec rails s
worker:  bundle exec rake jobs:work 
```

这样，一个命令`foreman start`将同时启动服务器和工作程序。两者的输出将显示在同一窗口中。

# javascript - 在 html 表中查找第一个匹配项并输出

> ID：15462506
> 
> 赞同：0
> 
> 时间：2013-03-17T15:27:44.707
> 
> 标签：javascript, jquery, html, ajax

我有以下问题；

下面是我的表格示例；

```
<table id="clientDetails">
<tbody>
    <tr>
        <td>Client - Mr Smith</td>
    </tr>
    <tr>
        <td>Client - Mr Ted</td>
    </tr>
    <tr>
        <td>Client - Mr Dhillon</td>
    </tr>
    <tr>
        <td>Client - Mr Sean</td>
    </tr>
    <tr>
        <td>Client - Mr Hart</td>
    </tr>
</tbody> 
```

我想要工作的 Jquery 是；

```
$(function test() {
    var elTableRow = document.getElementById("clientDetails");
    var elTableCells = elTableRow.getElementsByTagName("td");
    var test = alert(elTableCells[1].innerText);
    $('body').append(test);
    }
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T16:00:48.217

```
$(body).append($($('#clientDetails').find("td:contains('Client -')")[2]).html()); 
```

这会将第三个“客户端”行的内容附加到正文中。当然，假设有第三排......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T15:32:46.007

尝试这个：

```
$(function test() {
    $('body').append($('#clientDetails tbody td:first-child').html());

     // or
     // $('#clientDetails tbody tr:first td').text();

     // to select the third client:
     // $('#clientDetails tbody tr:eq(2) td').text();
    }
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T16:02:31.277

```
$(function() {
  $('body').append($('#clientDetails').find('td').first().html());
}); 
```

[jsFiddle](http://jsfiddle.net/juanchopx2/FW9CF/)

希望能帮助到你。

# mysql - mysql SELECT 有超过 1 个 OR

> ID：15462507
> 
> 赞同：0
> 
> 时间：2013-03-17T15:27:45.773
> 
> 标签：mysql, sql, select, operator-precedence

我正在尝试通过执行 user1 和 user2 进行 numrows 查询以查看用户是否与其他用户成为朋友。

这是我的查询，但这不起作用。

```
SELECT * FROM friends 
WHERE friend1 = USER_ID
AND friend2 = FRIEND
OR
WHERE friend1 = FRIEND
AND friend2 = USER_ID 
```

所以查询正在检查以两种方式查看它，从头到尾，我如何使这成为可能。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-17T15:30:06.440

您只能`WHERE`在 SQL 语句中使用一个，因此您可能希望使用以下内容：

```
SELECT * 
FROM friends 
WHERE 
(
  friend1 = USER_ID
  AND friend2 = FRIEND
) 
OR
(
  friend1 = FRIEND
  AND friend2 = USER_ID
) 
```

由于运算符优先级，括号不是必需的，为了清楚起见，我使用了它们。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-03-17T15:31:10.630

你用括号试过了吗？

```
SELECT * FROM friends WHERE (friend1 = USER_ID AND friend2 = FRIEND) OR (WHERE friend1 = FRIEND AND friend2 = USER_ID) 
```

# jquery - 如何在jQuery中使用变量作为事件名称？

> ID：15462513
> 
> 赞同：0
> 
> 时间：2013-03-17T15:28:09.697
> 
> 标签：jquery

这可能是一个非常简单的修复。我似乎无法弄清楚这一点。

我已将事件名称存储在变量中，并希望在代码中使用它们，如下面的伪代码所示，但它似乎对我不起作用。请参阅下面代码中的注释。

```
var EVENT;
if (something == true) EVENT = "hover";
else EVENT = "click";

mynav = function() {
   $(".nav").not(".nav2").bind(EVENT, function() { // EVENT works fine here
   ......
   ......
   ......
   } (EVENT == "hover")?', function() {}':''; ); // If EVENT is "hover", I want to display function()... Not sure how to make it work here....
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T15:58:03.697

```
var EVENT = something == true ? "hover" : "click";
mynav = function() {
    $(".nav").not(".nav2").bind(EVENT, EVENT === "hover" ? function() {
        // Hover function
    } : function() {
        // Click function
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T15:55:01.403

尝试像这样分开你的函数：

```
function myHover () {}

function myClick() {} 
```

并在您的代码中调用您的函数：

```
mynav = function() {
   $(".nav").not(".nav2").bind(EVENT, function() { // EVENT works fine here
   ......
   ......
   ......
   } , ((EVENT == "hover")?:myHover : myClick ));
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T15:31:43.567

创建函数然后在任何你想要的地方调用它

```
function MyHover(){
alert('MyHover()');
} 

function MyClick(){
alert('MyClick()');
} 

var EVENT;
if (something == true) EVENT = "hover";
else EVENT = "click";

mynav = function() {
   $(".nav").not(".nav2").bind(EVENT, function() { // EVENT works fine here
   ......
   ......
   ......
   } (EVENT == "hover")? MyHover() : MyClick() ; ); // If EVENT is "hover", I want to display function()... Not sure how to make it work here....
} 
```

# ios - 通过 CloudFront (Amazon) 下载图像

> ID：15462516
> 
> 赞同：1
> 
> 时间：2013-03-17T15:28:25.033
> 
> 标签：ios, objective-c, amazon-s3, amazon-cloudfront

我有一个需要从 S3 下载一些图像的应用程序。我尝试设置一个新的 CloudFront 分配，将源指向我的 S3 存储桶，并想知道这将如何改变我在应用程序中访问图像的方式。我的应用程序只是像这样向 S3 请求图像：

```
 S3GetObjectRequest *getObjectRequest = [[S3GetObjectRequest alloc] initWithKey:path withBucket:PICTURE_BUCKET];

    S3GetObjectResponse *getObjectResponse = [self.s3 getObject:getObjectRequest];

    UIImage *img = [[UIImage alloc]initWithData:getObjectResponse.body]; 
```

在这里，PICTURE_BUCKET 是我的 S3 存储桶的名称，路径是图像的名称 (64758_244.jpg)。

**如何通过 CloudFront 访问此图像？**

我发现

> [iOS AWS SDK 和 CloudFront - 访问图像](https://stackoverflow.com/questions/12356638/ios-aws-sdk-and-cloudfront-accessing-images)

但我是亚马逊移动服务开发的新手，我不知道该怎么做。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T16:15:34.737

如果您的问题只是如何找到访问 Cloudfront 图像的 URL，这是一种方法。

*   从云端，检查分发设置（在 i 图标下）并记下域名：我有一个位于：**d3foqimq5fy14v.cloudfront.net**，这是我的**S3 存储桶，标题为panchroma2013**

*   **在 S3 中，打开图像的属性窗格并复制** 我在以下位置的链接 URL：[https ://s3.amazonaws.com/panchroma2013/template/panchroma-website-design.png](https://s3.amazonaws.com/panchroma2013/template/panchroma-website-design.png)

*   在那里，**仔细检查文件权限**。您可能必须添加受让人：所有人，是的，打开/下载

*   这张图片的**cloudfront url**是我的**cloudfront域名+bucket name后面的s3 url**，即：

    [http://d3foqimq5fy14v.cloudfront.net/template/panchroma-website-design.png](http://d3foqimq5fy14v.cloudfront.net/template/panchroma-website-design.png)

希望这对你有用！

# c - 如果没有默认情况，switch会做什么？

> ID：15462519
> 
> 赞同：3
> 
> 时间：2013-03-17T15:28:29.853
> 
> 标签：c, switch-statement

我找到了以下一段代码：

```
switch(val){
    case 0:
        // some actions
       break;
    case 1:
        // some actions
       break;
    case 2:
        // some actions
       break;
} 
```

但是还不清楚在 eg 的情况下会发生什么`val = 10`？

我试图在一个值不正确的短程序中测试这段代码，但什么也没发生——程序正常退出。

此代码会导致任何潜在错误吗？有没有保证什么都不会发生？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-17T15:29:20.163

它只会什么都不做，无论如何都不会进入。

建议在语句中使用一个`default`子句作为最后一个子句`switch`。`Lint`如果您忘记该`default`子句，类似的程序会发出警告。并且对于信息请注意，该`default`子句是必需的`MISRA-C`。

**编辑：**

我个人更喜欢它作为最后的条款，但我认为最重要的是最后条款的存在。为什么我更喜欢它作为最后一个从句是因为*最小惊讶原则*：人们习惯于将它视为最后一个从句，所以我认为它可以简化程序阅读。

仅作为我提到的信息`Lint`和`MISRA-C`我的回答：如果存在但不作为最后一个子句并明确要求作为最后一个子句存在，`PC-Lint / flexelint`则不会发出警告。`default``MISRA-C``default`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T15:29:58.197

这就是为什么你应该有一个默认情况。它将处理您键入的案例以外的案例。

在您的情况下发生的是，它检查案例 0 并且它不匹配并检查案例 1 并且它也不匹配并检查案例 2 并且它再次不匹配。所以它退出了..

所以应该是这样的：

```
switch(val){
    case 0:
        // some actions
       break;
    case 1:
        // some actions
       break;
    case 2:
        // some actions
       break;
    default:
       //some actions
       break;
} 
```

另一个需要注意的小点：应该是case 0：不是case 0；

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-17T15:30:41.747

如果您使用`0, 1, 2`（在此示例中）中的任何其他值，则不会发生任何事情。 `val`将与 case 中的所有值进行比较，如果它不等于其中一个，它将跳转到下一条语句。

# css - CSS 屏幕尺寸

> ID：15462520
> 
> 赞同：-3
> 
> 时间：2013-03-17T15:28:34.323
> 
> 标签：css, screen

在我的网站上，我正在创建一个新页面。当我在更大的屏幕上查看它时，框在左侧。我试图让它与一切保持一致。

CSS：

```
.contactbox {
    width: 200px;
    height: auto;
    margin-left: 400px;
    left: 400px;
    padding: 12px
    background-color:#F5F5F5;
    border: 1px solid #9C9C9C;
    text-align: left;
    box-shadow: 2px 2px 7px 2px #DBDBDB;
    -moz-box-shadow:2px 2px 7px 2px #DBDBDB;
    -webkit-box-shadow:2px 2px 7px 2px #DBDBDB;  
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T15:32:05.043

而不是使用`margin-left: 400px;`use `margin: 0 auto;`。这将自动使左右边距相等，使 div 居中。

**编辑：**

像这样向左移动 400px：

```
.contactbox {
  margin: 0 auto;
  // Allow it to be moved relative to its original (centered) position
  position: relative;
  // Move to the left (left means the left edge not the direction of movement)
  left: -400px;
} 
```

# python - Twitter 搜索 API、Python 和 Json 解析问题

> ID：15462521
> 
> 赞同：1
> 
> 时间：2013-03-17T15:28:37.467
> 
> 标签：python, json, twitter

我可以使用 python Json 库从这个地址中提取信息

```
http://search.twitter.com/search.json?q=%23damn&result_type=recent&rpp=1&filter:retweets 
```

并且大部分时间使用

```
j =json.loads(urllib.urlopen('http://search.twitter.com/search.json?q=%23damn&result_type=recent&rpp=1&filter:retweets').read())

text = j['results'][0]['text']
id = j['results'][0]['id'] 
```

我可以从结果中提取文本和 ID 并打印它们。我每 15 秒请求一次 JSON，所以我不会被 twitter 的限制阻止。

我经常遇到这种情况。

```
 {u'completed_in': 0.021,
 u'max_id': 313306991827238912L,
 u'max_id_str': u'313306991827238912',
 u'next_page': u'?page=2&max_id=313306991827238912&q=%23damn&rpp=1&result_type=recent',
 u'page': 1,
 u'query': u'%23damn',
 u'refresh_url': u'?since_id=313306991827238912&q=%23damn&result_type=recent',
 u'results': [],
 u'results_per_page': 1,
 u'since_id': 0,
 u'since_id_str': u'0'} 
```

结果字段中似乎没有包含任何内容。这会导致以下错误。

```
 Traceback (most recent call last):
  File "C:\Users\Home\Desktop\test.py", line 32, in <module>
    text = j['results'][0]['text']
IndexError: list index out of range 
```

这反过来又关闭了 Python 命令行。我考虑过放置一个“while”循环以确保在继续之前结果字段已满，但我觉得这可能会发送到许多请求并将脚本锁定在 twitter 之外。

你遇到过这个问题吗？你知道如何克服它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T16:13:26.230

我会在调用结果或尝试之前抛出一个 if 语句，我在使用 Web API 的时候注意到结果并不总是可靠的，最好是为了安全起见

# php - 将数组插入 MySQL

> ID：15462523
> 
> 赞同：1
> 
> 时间：2013-03-17T15:29:01.107
> 
> 标签：php, mysql, arrays, json

我超级困惑，一直在寻找。但正如标题所示，我正在尝试输入一个数组。我的问题是如何让这个数组导入数据库？到目前为止，使用当前脚本，它只导入第一条记录，而不导入其余记录。在这里，我还可以在同一个数组中导入其他值，顺便说一下，这是一个 JSON 调用，它已经被解码。

```
foreach ($output as $key => $value) {
    if (isset($output[$key]["stats"]["damage_given"]["vehicle"])) {
        $damage_given[$key] = $output[$key]["stats"]["damage_given"]["vehicle"];
            foreach ($damage_given[$key] as $vehicle_name) {
                $vehicle_dmg_id         = $vehicle_name['id'];
                $vehicle_dmg_name       = $vehicle_name['name'];
                $vehicle_dmg_value      = $vehicle_name['value'];
                $vehicle_dmg_faction_nc = $vehicle_name['faction']['nc'];
                $vehicle_dmg_faction_tr = $vehicle_name['faction']['tr'];
                $vehicle_dmg_faction_vs = $vehicle_name['faction']['vs'];
            }
     }
}

$add_dmg_veh = "INSERT INTO damage_given(character_number, vehicle_id,
vehicle_name, total_value, vehicle_faction_nc, vehicle_faction_tr,
vehicle_faction_vs) VALUES ('$character_id[$key]', '$vehicle_dmg_id', 
'$vehicle_dmg_name','$vehicle_dmg_value', '$vehicle_dmg_faction_nc', 
'$vehicle_dmg_faction_tr','$vehicle_dmg_faction_vs')"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T15:35:02.167

尽管不建议将数组存储在数据库中，但您可以`serialize()`将数组存储在数据库中。基本上，PHP 会将数组转换为特制的字符串，以便稍后对其进行解释。

[序列化](http://php.net/manual/en/function.serialize.php)以将其存储在数据库中，并在将其从数据库中拉出时对其进行反序列化以使用[它](http://php.net/manual/en/function.unserialize.php)

**注意：**我说不建议使用序列化，因为您的数据库不是[First Normal Form](http://en.wikipedia.org/wiki/First_normal_form)，特别是因为您将非原子值存储在数据库的特定条目中。对于这种情况，我建议创建一个单独的表来单独存储这些值，并使用外键将两个表链接在一起。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T15:35:08.303

您应该查看 PDO_MySQL 并且您的插入字符串在循环之外，应该在其中执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T15:35:15.583

您必须遍历数组并按自己的方式插入数组的每个字段。

```
foreach($array as $value) {
    // execute your insert statement here with $value
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-17T15:37:31.263

首先，你不能像你正在做的那样在 MySQL 中插入数组.. 和迭代一样..

```
foreach ($output as $key => $value) {
    if (isset($output[$key]["stats"]["damage_given"]["vehicle"])) {
        $damage_given[$key] = $output[$key]["stats"]["damage_given"]["vehicle"];
            foreach ($damage_given[$key] as $vehicle_name) {
                $vehicle_dmg_id         = $vehicle_name['id'];
                $vehicle_dmg_name       = $vehicle_name['name'];
                $vehicle_dmg_value      = $vehicle_name['value'];
                $vehicle_dmg_faction_nc = $vehicle_name['faction']['nc'];
                $vehicle_dmg_faction_tr = $vehicle_name['faction']['tr'];
                $vehicle_dmg_faction_vs = $vehicle_name['faction']['vs'];

                // if you wants to use insert query then do here.
                $add_dmg_veh = "INSERT INTO damage_given(character_number, vehicle_id, 
                vehicle_name, total_value, vehicle_faction_nc, vehicle_faction_tr, 
                vehicle_faction_vs) VALUES ('$character_id[$key]', '$vehicle_dmg_id',
                '$vehicle_dmg_name', '$vehicle_dmg_value', '$vehicle_dmg_faction_nc',
                '$vehicle_dmg_faction_tr', '$vehicle_dmg_faction_vs')";

            }
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-17T15:49:17.703

尝试在数组中构建插入数据，然后将结果内爆到单个查询中：

```
<?php
foreach ($output as $key => $value) {
    if (isset($output[$key]["stats"]["damage_given"]["vehicle"])) {
        $damage_given[$key] = $output[$key]["stats"]["damage_given"]["vehicle"];
            foreach ($damage_given[$key] as $vehicle_name) {

                $sql[] = "
                    (
                    ".$vehicle_name['id'].",
                    ".$vehicle_name['name'].",
                    ".$vehicle_name['value'].",
                    ".$vehicle_name['faction']['nc'].",
                    ".$vehicle_name['faction']['tr'].",
                    ".$vehicle_name['faction']['vs']."
                    )";
            }
    }
}

$query = "
INSERT INTO damage_given
(
character_number,
vehicle_id, 
vehicle_name, 
total_value, 
vehicle_faction_nc, 
vehicle_faction_tr, 
vehicle_faction_vs
) 
VALUES
".implode(",",$sql)."
";
?> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-18T16:07:06.380

这就是我要解决的问题！

$stmt = $dbh->prepare("INSERT INTO kills_vehicle (character_number, veh_id, veh_name, veh_total, veh_faction_nc, veh_faction_tr, veh_faction_vs) VALUES(:char_id, :id, :vehname, :total_value, :faction_nc, :faction_tr, :faction_vs )");

```
 foreach ($output as $key => $value) {
        if (isset($output[$key]["stats"]["play_time"]["vehicle"])) {
            $character_id[$key]    = $output[$key]["id"];
            $score_hit_count[$key] = $output[$key]["stats"]["kills"]["vehicle"];
            foreach ($score_hit_count[$key] as $row) {

                $stmt->bindValue(':char_id', $character_id[$key]);
                $stmt->bindValue(':id', $row[id]);
                $stmt->bindValue(':vehname', $row[name]);
                $stmt->bindValue(':total_value', $row[value]);
                $stmt->bindValue(':faction_nc', $row[faction][nc]);
                $stmt->bindValue(':faction_tr', $row[faction][tr]);
                $stmt->bindValue(':faction_vs', $row[faction][vs]);
                $stmt->execute();
            }
        }
    } 
```

# c# - 尝试将具体对象转换为通用接口时出现“InvalidCastException”

> ID：15462533
> 
> 赞同：3
> 
> 时间：2013-03-17T15:29:46.470
> 
> 标签：c#, .net

我正在尝试使用 Activator.CreateInstance 创建一个类并将其转换为它实现的通用接口。

为什么我在运行时收到“InvalidCastException”（.Net 4.0）？

这是代码：

```
namespace CastingGenerics
{
    class Program
    {
        static void Main(string[] args)
        {
            var typeFromSomewhere = typeof(ActionSomethingValidator);

            // This line throw 'System.InvalidCastException'
            // "Unable to cast object of type 'CastingGenerics.ActionSomethingValidator' to type 'CastingGenerics.IActionValidator`1[CastingGenerics.IAction]'."
            var castingError = (IActionValidator<IAction>)Activator.CreateInstance(typeFromSomewhere);
        }
    }

    internal interface IAction
    {
    }

    internal interface IActionValidator<in T>
        where T : IAction
    {
        bool Validate(T action, out string failure);
    }

    internal abstract class ActionValidator<T> : IActionValidator<T>
        where T : IAction
    {
        public abstract bool Validate(T action, out string failure);
    }

    internal class ActionSomethingValidator : ActionValidator<IActionSomething>
    {
        public override bool Validate(IActionSomething action, out string failure)
        {
            failure = string.Empty;
            return true;
        }
    }

    internal interface IActionSomething : IAction
    {
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T15:39:50.733

你得到的是一个`IActionValidator<IActionSomething>`. `IActionValidator<IActionSomething>`不能分配给`IActionValidator<IAction>`，因为`T`被标记为`in`类型参数。

想象一下，对于一个`IActionValidator<IAction>`名为 的变量`v`，有以下`Validate`方法：

```
Validate(IAction action, out string failure); 
```

现在，如果`v`指向 的实例`IActionValidator<IActionSomething>`，您可以通过未实现的`IAction`实例将实例传递给第一个参数。但是，对于. 因此，编译器不会让你这样做。`v``IActionSomething``IActionValidator<IActionSomething>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-13T21:18:09.497

一种方法是使用[动态](https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/types/using-type-dynamic).

`dynamic smth = Activator.CreateInstance(typeFromSomewhere);`

由于编辑器无法在设计时确定类型，您将失去自动完成功能。但是您仍然可以调用仅手动编码的方法。 `smth.Validate(() => true, "");`

# javascript - 下拉选择时 Kendo UI 网格刷新

> ID：15462541
> 
> 赞同：3
> 
> 时间：2013-03-17T15:30:06.210
> 
> 标签：javascript, jquery, kendo-ui, kendo-grid

我有一个网格，其中每一行都有一个带有值的选择下拉框。

选择项目后，如何使网格重新加载以反映更改？

我想这样做的原因是因为从下拉列表中选择的项目会影响另一列中的金额。

这是我的下拉列表的代码：

```
function shippingModelSelect(container, options)
{
    $('<input required data-text-field="modelName" data-value-field="modelId" data-bind="value:' + options.field + '"/>')
    .appendTo(container)
    .kendoDropDownList({
        autoBind: false,
        dataSource: [
        {
            "modelName": "Individual shipping cost", 
            "modelId": 1
        },
        {
            "modelName": "Based on weight", 
            "modelId": 2
        },
        {
            "modelName": "Based on value", 
            "modelId": 3
        }
        ],
        close: function()
        {
            handleChange();            
        }
    });
} 
```

我的手柄更改功能：

```
var gridAlert = $('#gridAlert');
var handleChange = function(input, value) {
    if(input && value)
    {
        detail = 'Product <b>'+input[0].name+'</b> changed to <b>'+value+'</b>';
        gridAlert.html('<b>Changes saved!</b><p>'+detail+'</p>');
        gridAlert.fadeIn('slow', function(){
            setTimeout(function(){
                gridAlert.fadeOut();
            }, 2000)
        });
    }
    dataSource.sync();
} 
```

最后是我的网格设置：

```
dataSource = new kendo.data.DataSource({
    serverPaging: true,
    serverSorting: true,
    serverFiltering: true,
    serverGrouping: true,
    serverAggregates: true,
    transport: {
        read: {
            url: ROOT+'products/manage'
        },
        update: {
            url: ROOT+'products/set-product',
            type: "POST",
            data: function(data)
            {
                data.dateAdded = kendo.toString(data.dateAdded, 'yyyy-MM-dd hh:ii:ss')
                return data;
            }
        }
    },
    pageSize: 20,
    sort: {
        field: 'id',
        dir: 'desc'
    },
    error: function(e) {
        alert(e.errorThrown+"\n"+e.status+"\n"+e.xhr.responseText) ;
    },
    schema: {
        data: "data",
        total: "rowcount",
        model: {
            id: "id",
            fields: {
                id: {
                    type: 'number',
                    editable: false
                },
                SKU: {
                    type: "string"
                },
                name: {
                    type: "string"
                },
                dateAdded: {
                    type: "date",
                    format: "{0:yyyy/MM/dd hh:mm}",
                    editable: false
                },
                shippingModel: {
                    type: "string"
                },
                shippingModelId: {
                    type: "number"
                },
                price: {
                    type: "number"
                }
            }
        }
    }
})

$('#productGrid').kendoGrid({
    dataSource: dataSource,
    autoBind: true,
    columns: [
    {
        field: "image",
        title: "Image",
        width: 30,
        template: "#= '<img title=\"'+alt+'\" src=\"images/'+image+'\"/>' #"
    },
    {
        field: "SKU",
        title: "SKU",
        width: 50,
        headerTemplate: "<abbr title=\"Stock Keeping Unit - A unique identifier for this product\">SKU</abbr>"
    },
    {
        field: "stockQuantity",
        title: "Quantity",        
        width: 30
    },
    {
        field: "name",
        title: "Name",
        width: 200
    },
    {
        field: "dateAdded",
        title: "Date Added",
        width: 80,
        template: "#= niceDate #"
    },
    {
        field: "shippingModelId",
        title: "Shipping Model",
        width: 50,
        editor: shippingModelSelect,
        template: "#= shippingModel #"
    },
    {
        field: "price",
        title: "Price",
        width: 80,
        //format: "{0:c}",
        template: "#= '&pound;'+price.toFixed(2)+'<br /><span class=\"grey\">+&pound;'+shipping+' shipping</span>' #"
    }
    ],
    sortable: true,
    editable: true,
    pageable: {
        refresh: true,
        pageSizes: [10, 20, 50]
    },
    scrollable: false,
    reorderable: true,
    edit: function(e) {
        var value;        
        var numericInput = e.container.find("[data-type='number']");

        // Handle numeric
        if (numericInput.length > 0)
        {
            var numeric = numericInput.data("kendoNumericTextBox");    

            numeric.bind("change", function(e) {
                value = this.value();
                handleChange(numericInput, value);
            });

            return;
        }

        var input = e.container.find(":input");

        // Handle checkbox
        if (input.is(":checkbox"))
        {
            value = input.is(":checked");
            input.change(function(){
                value = input.is(":checked");
                handleChange(input, value);
            });
        }
        else
        {        
            // Handle text
            value = input.val();
            input.keyup(function(){
                value = input.val();
            });
            input.change(function(){
                value = input.val();
            });

            input.blur(function(){
                handleChange(input, value);
            });
        }
    }
}
) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T16:06:52.180

你需要做两件事。

1.  等待更改完成同步
2.  告诉网格重新读取数据源

这应该为你做

```
dataSource.bind("sync", function(e) {
  $('#productGrid').data("kendoGrid").dataSource.read();
}); 
```

有关更多信息，请参阅其文档站点上的**[数据源同步事件](http://docs.kendoui.com/api/framework/datasource#events-sync)**和**[数据源读取方法。](http://docs.kendoui.com/api/framework/datasource#methods-read)**

# css - 按钮上的 CSS3 颜色过渡

> ID：15462543
> 
> 赞同：2
> 
> 时间：2013-03-17T15:30:09.743
> 
> 标签：css, colors, css-transitions, transition

我似乎无法让我的按钮使用 CSS3 过渡来更改颜色。我已经成功地在和标签上使用了相同的回旋代码，但按钮没有这样的运气。

这是代码：

```
.button {
    position:absolute;
    width: 135px;
    height: 46px;
    background-color: #ef6529;
    text-decoration: none;
    border-radius: 4px;
    -moz-border-radius: 4px;
    border: 1px solid #c33b00;
    box-shadow: 0px 4px 0px #af5a5a;
    -moz-box-shadow: 0px 4px 0px #af5a5a;
    -webkit-box-shadow: 0px 4px 0px #af5a5a;
    -webkit-transition:color 1s ease-in;  
    -moz-transition:color 1s ease-in;  
    -o-transition:color 1s ease-in;  
    transition:color 1s ease-in;
}

.button:hover {
    width: 135px;
    height: 46px;
    background-color: #ff6726;
    border-radius: 4px;
    -moz-border-radius: 4px;
    border: 1px solid #c33b00;
    text-decoration: none;
} 
```

和 HTML：

```
<a href="#" class="button">
    <!--<h2>PUSH ME!</h2>-->
</a> 
```

干杯!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T16:03:59.403

您还没有为按钮指定颜色。我想你想转换背景颜色。只需更改`transition:color 1s ease-in;`为`transition: background-color 1s ease-in;`.

# sha1 - 将 SHA1 与 COBOL 一起使用

> ID：15462544
> 
> 赞同：1
> 
> 时间：2013-03-17T15:30:11.427
> 
> 标签：sha1, cobol

我想知道是否有任何方法可以将 SHA1 哈希与 COBOL 一起应用。

如果至少有一些关于 SHA1 算法如何工作的信息，它将很有用。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T18:31:16.700

这是更多关于点源列表的内容。OC_CBL_DUMP 需要 OpenCOBOL 1.1CE

首先，向 OpenSSL 的作者致敬。他们值得称赞。

```
 OpenSSL License
  ---------------

/* ====================================================================
 * Copyright (c) 1998-2011 The OpenSSL Project.  All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions
 * are met:
 *
 * 1\. Redistributions of source code must retain the above copyright
 *    notice, this list of conditions and the following disclaimer.
 *
 * 2\. Redistributions in binary form must reproduce the above copyright
 *    notice, this list of conditions and the following disclaimer in
 *    the documentation and/or other materials provided with the
 *    distribution.
 *
 * 3\. All advertising materials mentioning features or use of this
 *    software must display the following acknowledgment:
 *    "This product includes software developed by the OpenSSL Project
 *    for use in the OpenSSL Toolkit. (http://www.openssl.org/)"
 *
 * 4\. The names "OpenSSL Toolkit" and "OpenSSL Project" must not be used to
 *    endorse or promote products derived from this software without
 *    prior written permission. For written permission, please contact
 *    openssl-core@openssl.org.
 *
 * 5\. Products derived from this software may not be called "OpenSSL"
 *    nor may "OpenSSL" appear in their names without prior written
 *    permission of the OpenSSL Project.
 *
 * 6\. Redistributions of any form whatsoever must retain the following
 *    acknowledgment:
 *    "This product includes software developed by the OpenSSL Project
 *    for use in the OpenSSL Toolkit (http://www.openssl.org/)"
 *
 * THIS SOFTWARE IS PROVIDED BY THE OpenSSL PROJECT ``AS IS'' AND ANY
 * EXPRESSED OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
 * PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE OpenSSL PROJECT OR
 * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT
 * NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
 * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,
 * STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
 * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED
 * OF THE POSSIBILITY OF SUCH DAMAGE.
 * ====================================================================
 *
 * This product includes cryptographic software written by Eric Young
 * (eay@cryptsoft.com).  This product includes software written by Tim
 * Hudson (tjh@cryptsoft.com).
 *
 */

 Original SSLeay License
 -----------------------

/* Copyright (C) 1995-1998 Eric Young (eay@cryptsoft.com)
 * All rights reserved.
 *
 * This package is an SSL implementation written
 * by Eric Young (eay@cryptsoft.com).
 * The implementation was written so as to conform with Netscapes SSL.
 *
 * This library is free for commercial and non-commercial use as long as
 * the following conditions are aheared to.  The following conditions
 * apply to all code found in this distribution, be it the RC4, RSA,
 * lhash, DES, etc., code; not just the SSL code.  The SSL documentation
 * included with this distribution is covered by the same copyright terms
 * except that the holder is Tim Hudson (tjh@cryptsoft.com).
 *
 * Copyright remains Eric Young's, and as such any Copyright notices in
 * the code are not to be removed.
 * If this package is used in a product, Eric Young should be given attribution
 * as the author of the parts of the library used.
 * This can be in the form of a textual message at program startup or
 * in documentation (online or textual) provided with the package.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions
 * are met:
 * 1\. Redistributions of source code must retain the copyright
 *    notice, this list of conditions and the following disclaimer.
 * 2\. Redistributions in binary form must reproduce the above copyright
 *    notice, this list of conditions and the following disclaimer in the
 *    documentation and/or other materials provided with the distribution.
 * 3\. All advertising materials mentioning features or use of this software
 *    must display the following acknowledgement:
 *    "This product includes cryptographic software written by
 *     Eric Young (eay@cryptsoft.com)"
 *    The word 'cryptographic' can be left out if the rouines from the library
 *    being used are not cryptographic related :-).
 * 4\. If you include any Windows specific code (or a derivative thereof) from
 *    the apps directory (application code) you must include an acknowledgement:
 *    "This product includes software written by Tim Hudson (tjh@cryptsoft.com)"
 *
 * THIS SOFTWARE IS PROVIDED BY ERIC YOUNG ``AS IS'' AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED.  IN NO EVENT SHALL THE AUTHOR OR CONTRIBUTORS BE LIABLE
 * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
 * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
 * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
 * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
 * LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
 * OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
 * SUCH DAMAGE.
 *
 * The licence and distribution terms for any publically available version or
 * derivative of this code cannot be changed.  i.e. this code cannot simply be
 * copied and put under another distribution licence
 * [including the GNU Public Licence.]
 */ 
```

和一些 COBOL 来练习密码学和 SHA1 哈希的两种形式

```
 >>source format is free
*> ***************************************************************
*> Author:    Brian Tiffin
*> Date:      20130321
*> Purpose:   Compute an SHA1 digest, whole
*> Tectonics: cobc -x sha1a.cob -lcrypto
*> ***************************************************************
IDENTIFICATION DIVISION.
program-id. sha1a.

data division.
working-storage section.
01 sha1-digest    pic x(20).
01 digestable     pic x(80) value "this message needs to be verified".

*> ***************************************************************
procedure division.

*> Compute disgest from block of memory
call "SHA1" using
   by reference digestable
   by value function length(function trim(digestable))
   by reference sha1-digest
   on exception
       display "link sha1.cob with OpenSSL's libcrypto" end-display
end-call

*> Dump the hash, as it'll unlikely be printable
call "CBL_OC_DUMP" using
    by reference sha1-digest
    on exception continue
end-call

goback.
end program sha1a. 
```

随着样本运行

```
$ cobc -x sha1a.cob
$ ./sha1a
link sha1.cob with OpenSSL's libcrypto

Offset  HEX-- -- -- -5 -- -- -- -- 10 -- -- -- -- 15 --   CHARS----1----5-
000000  20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                   
000016  20 20 20 20                                                       

$ cobc -x sha1a.cob -lcrypto
$ ./sha1a

Offset  HEX-- -- -- -5 -- -- -- -- 10 -- -- -- -- 15 --   CHARS----1----5-
000000  c7 3b 52 0c 61 39 9b f9 a5 2f fe 3f 11 90 5e 10   .;R.a9.../.?..^.
000016  3b 0d 15 c5                                       ;... 
```

还有一个更完整的例子，从多个更新中构建摘要。

*这里的假设*： **这将破解带有尾随空格的文件。**

```
 >>source format is free
*> ***************************************************************
*> Author:    Brian Tiffin
*> Date:      20130321
*> Purpose:   Compute an SHA1 digest, by piece
*> Tectonics: cobc -x sha1.cob -lcrypto
*> ***************************************************************
IDENTIFICATION DIVISION.
program-id. sha1.

environment division.
configuration section.

input-output section.
file-control.
    select samplefile
    assign to "sha1.cob"
    organization is line sequential
    file status is sample-status
    .

DATA DIVISION.
file section.
fd samplefile.
    01 input-line     pic x(2048).

working-storage section.
01 sha1-context      usage pointer.
01 sha1-libresult    usage binary-long.
   88 sha1-success      value 1 when set to false is 0.

01 sha1-digest       pic x(20).

01 sample-status     pic 9999.
01 sample-file-state pic 9.
   88 no-more-sample    value 9 when set to false is 0.

01 sha-ctx-structure pic x(1024).

*> ***************************************************************
PROCEDURE DIVISION.

*> Compute disgest from a sequential file
open input samplefile
if sample-status not equal to zero
    display "Status of " sample-status " returned from open" end-display
    display "rest of sample run will be garbage" end-display
end-if

*> Init the SHA1 internals
set sha1-context to address of sha-ctx-structure
call "SHA1_Init" using
    by value sha1-context
    returning sha1-libresult
    on exception
        display "Can't find SHA1_Init.  hint: cobc -x sha1 -lcrypto" end-display
end-call
if not sha1-success
    display "Could not initialize SHA1 structures" end-display
    display "normally you'd want to stop run and call the emergency hotline to wake up the support techs, but this is an example and blindly continues." end-display
end-if

*> loop across some data, ignoring issue of trailing spaces on input lines
read samplefile at end set no-more-sample to true end-read
if input-line equal spaces then
    move x"0a" to input-line(1:1)
else
    move function concatenate(function trim(input-line trailing), x"0a") to input-line
end-if

perform until no-more-sample
    call "SHA1_Update" using
        by value sha1-context
        by content function trim(input-line trailing)
        by value function length(function trim(input-line trailing))
        on exception display "internal update failure of SHA1_Update" end-display
    end-call
    if not sha1-success
        display "Could not update SHA1 structures" end-display
        display "normally you'd want to stop run." end-display
    end-if

    read samplefile at end set no-more-sample to true end-read
    if input-line equal spaces then
        move x"0a" to input-line(1:1)
    else
        move function concatenate(function trim(input-line trailing), x"0a") to input-line
    end-if
end-perform

*> finalize the disgest
call "SHA1_Final" using
    by reference sha1-digest
    by value sha1-context
    on exception display "you're kidding right? internal failure of SHA1_Final" end-display
end-call

close samplefile

*> Dump the hash, as it'll unlikely be printable
call "CBL_OC_DUMP" using
    by reference sha1-digest
    on exception continue
end-call

goback.
END PROGRAM sha1. 
```

和另一个样本运行

```
$ cobc -x sha1.cob -lcrypto
$ ./sha1

Offset  HEX-- -- -- -5 -- -- -- -- 10 -- -- -- -- 15 --   CHARS----1----5-
000000  d4 04 4b ed 02 e8 ef 54 e0 c4 73 0b 6b 51 85 bc   ..K....T..s.kQ..
000016  85 73 d3 16                                       .s..            

$ openssl sha1 sha1.cob
SHA1(sha1.cob)= d4044bed02e8ef54e0c4730b6b5185bc8573d316 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T11:53:46.923

你没有说哪个 Cobol 平台。如果您在 z/OS 上，可以从 Cobol 轻松调用各种加密服务。SHA1 在这些服务中可用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T16:39:17.743

我做了一个在 COBOL 中嵌入 Python 的小样本，并选择了一个 MD5 校验和作为示例。

我不一定会使用 Python，但如果你足够幸运能够使用 OpenCOBOL，那么 libcrypto 的所有功能都只需一个简单的 CALL 即可。

为了完整起见，已经提到了 Python 的角度，但如果目标只是密码学，那又是相当沉重的包袱。在这种情况下，OpenSSL 会更合适。此清单很可能不适合您的需求，但它展示了 CALL 和 C 应用程序二进制接口的强大功能。如果这只是噪音，请原谅。

来自 SourceForge：

非常高级的 Python 嵌入非常简单，去过那里，做到了。

```
 >>SOURCE FORMAT IS FIXED
  *> *******************************************************
  *> Author:    Brian Tiffin 
  *> Date:      20130126 
  *> Purpose:   Embed Python 
  *> Tectonics: cobc -x cobpy.cob -lpython2.6 
  *> *******************************************************
   identification division.
   program-id. cobpy.

   procedure division.
   call "Py_Initialize"
       on exception
           display "link cobpy with -lpython2.6" end-display
   end-call
   call "PyRun_SimpleString" using
       by reference 
           "from time import time,ctime" & x"0a" &
           "print('Today is', ctime(time()))" & x"0a" & x"00"
       on exception continue
   end-call
   call "Py_Finalize" end-call
   goback.
   end program cobpy. 
```

给予

```
$ cobc -x cobpy.cob -lpython2.6   
$ ./cobpy 
('Today is', 'Sat Jan 26 20:01:41 2013') 
```

Python 尽职尽责地显示了元组。

但是，如果 Python 只是用于高级脚本副作用，那么它有什么乐趣呢？很多，但仍然。

纯嵌入。

```
 >>SOURCE FORMAT IS FIXED
  *> *******************************************************
  *> Author:    Brian Tiffin 
  *> Date:      20130126 
  *> Purpose:   Embed Python 
  *> Tectonics: cobc -x cobkat.cob -lpython2.6
  *>     NOTES:    leaks, no Py_DECREF macros called. 
  *> *******************************************************
   identification division.
   program-id. cobkat.

   data division.
   working-storage section.
   77 python-name          usage pointer.
   77 python-module        usage pointer.
   77 python-dict          usage pointer.
   77 python-func          usage pointer.
   77 python-stringer      usage pointer.
   77 python-args          usage pointer.
   77 python-value         usage pointer.

   01 cobol-buffer-pointer usage pointer.    
   01 cobol-buffer         pic x(80)               based.
   01 cobol-string         pic x(80).

   01 cobol-integer        usage binary-long.

   01 command-line-args    pic x(80).

  *> *******************************************************
   procedure division.
   call "Py_Initialize"
       on exception
           display "link cobpy with -lpython" end-display
   end-call

  *> Python likes module names in Unicode
   call "PyUnicodeUCS4_FromString" using
       by reference "pythonfile" & x"00"
       returning python-name
       on exception
           display "unicode problem" end-display
   end-call

  *> import the module, using PYTHONPATH 
   call "PyImport_Import" using
       by value python-name
       returning python-module
       on exception
           display "this would be borked" end-display
   end-call

   if python-module equal null
       display "no pythonfile.py in PYTHONPATH" end-display
   end-if

  *> within the module, an attribute is "pythonfunction"
   call "PyObject_GetAttrString" using
       by value python-module
       by reference "pythonfunction" & x"00"
       returning python-func
       on exception continue
   end-call

  *>
  *> error handling now skimped out on
  *>

  *> pythonfunction takes a single argument
   call "PyTuple_New" using
       by value 1
       returning python-args
   end-call

  *> of type long, hard coded to the ultimate answer 
   call "PyLong_FromLong" using
       by value 42
       returning python-value
   end-call

  *> set first (only) element of the argument tuple 
   call "PyTuple_SetItem" using
       by value python-args
       by value 0
       by value python-value
   end-call

  *> call the function, arguments marshalled for Python 
   call "PyObject_CallObject" using
       by value python-func
       by value python-args
       returning python-value
   end-call

  *> we know we get a long back, hopefully 1764
   call "PyLong_AsLong" using
       by value python-value
       returning cobol-integer 
   end-call
   display "Python returned: " cobol-integer end-display

  *> **************************************************** *<
  *> a function taking string and returning string
   call "PyObject_GetAttrString" using
       by value python-module
       by reference "pythonstringer" & x"00"
       returning python-stringer
   end-call

   call "PyTuple_New" using
       by value 1
       returning python-args
   end-call

  *> Use the OpenCOBOL command argument
   accept command-line-args from command-line end-accept 
   call "PyString_FromString" using
       by reference
           function concatenate(
               function trim(command-line-args)
               x"00")
       returning python-value
   end-call

  *> Set the function argument tuple to the cli args 
   call "PyTuple_SetItem" using
       by value python-args
       by value 0
       by value python-value
   end-call

  *> call the "pythonstringer" function
   call "PyObject_CallObject" using
       by value python-stringer
       by value python-args
       returning python-value
   end-call

  *> return as String (with the MD5 hex digest tacked on)
   call "PyString_AsString" using
       by value python-value
       returning cobol-buffer-pointer 
   end-call

  *> one way of removing null while pulling data out of C
   set address of cobol-buffer to cobol-buffer-pointer
   string
       cobol-buffer delimited by x"00" 
       into cobol-string
   end-string
   display "Python returned: " cobol-string end-display

  *> and clear out <*
   call "Py_Finalize" end-call
   goback.
   end program cobkat. 
```

使用**pythonfile.py**

```
#
# Simple Python sample for OpenCOBOL embedding trial
#
def pythonfunction(i):
    return i * i 

import hashlib 
def pythonstringer(s):
    sum = hashlib.md5()
    sum.update(s)
    return s + ": " + sum.hexdigest() 
```

给予

```
$ ./cobkat Python will use this for MD5 hash
no pythonfile.py in PYTHONPATH
Attempt to reference unallocated memory (Signal SIGSEGV)
Abnormal termination - File contents may be incorrect 
```

哎呀

```
$ export PYTHONPATH=.
$ ./cobkat Python will use this for MD5 hash
Python returned: +0000001764
Python returned: Python will use this for MD5 hash: c5577e3ab8dea11adede20a1949b5fb3 
```

好久没做这些了，好玩。

干杯，布赖恩

*哦，如果您正在阅读，1764 是最终答案，平方。*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T02:10:09.047

SHA1 需要很多 COBOL 通常不支持的按位运算（XOR、AND、OR）（少数编译器支持它们）。

您最好的选择是简单地调整众多 C 实现之一，以便可以轻松地将其称为 COBOL 子例程。

有关您的平台和编译器的信息会很有用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-07-17T07:34:27.737

是的，有一种方法可以使用 COBOL 应用 SHA1 哈希。我用 COBOL 编写了 SHA256 散列算法，到处都有大量的遥测数据，让你确切地知道一路上所有点发生了什么。如果你可以在 COBOL 中做 SHA256，你可以在 COBOL 中做 SHA-1。

不要通过散列小的输入字符串来爆破它。确保您的程序适用于大量输入字符，以便它可以用于文档身份验证。如果您了解了整个规格，那么您的结果也将是正确的。然后，看看你是否可以散列哈希——就像比特币一样。这比表面上看起来要棘手一些。

我假设您必须在 COBOL 本身中进行编码，以便您完成真正的工作 - 而不仅仅是调用其他人编写的子程序。任何人都可以做到这一点，所以你不会问是否只是那样。

在 Github 上查看 SHA256 算法的工作原理。它还显示了示例动画中间计算，而不仅仅是最终结果。

IMO 找到完整的规范是迄今为止最难的事情。有许多 youtube 视频，但它们只描述了整个故事的一小部分。但是，如果你的 COBOL 技能有任何弱点，尤其是表格处理，而且在构建代码方面也有任何弱点，即使你最终理解了规范，你也会在将规范转换为工作代码时遇到很多麻烦，这取决于你想要如何写下你的代码。以转换为中心的设计有帮助。

这个链接也是一个很好的帮助。 [https://hackernoon.com/how-sha-2-works-a-step-by-step-tutorial-sha-256-46103t6k](https://hackernoon.com/how-sha-2-works-a-step-by-step-tutorial-sha-256-46103t6k) 一起使用它和 Github 的东西，但它们并不都使用相同的示例输入细绳。

总之，这与您的分析技能、设计技能、编码技能和测试技能有关——如果您愿意的话。

祝你好运。让我们都知道你的情况。

添加了 2021 年 7 月 18 日仅供参考 [https://github.com/DoHITB/CryptoCobol/blob/main/SHA1HEX.CBL](https://github.com/DoHITB/CryptoCobol/blob/main/SHA1HEX.CBL)

# php - Jquery $(this) 选择器

> ID：15462546
> 
> 赞同：0
> 
> 时间：2013-03-17T15:30:38.180
> 
> 标签：php, jquery

我正在学习 jQuery，我有这个代码：

```
 echo "<table border=1>                 
    <tr><th class='col1'>Mã Sinh Viên <a href='javascript:void(0)' data-page='$page' data-field='stuId' data-sort='$sort' data-key='$key'><img src='downArrow.gif'></a></th>
        <th class='col2'>Họ tên <a href='javascript:void(0)' data-page='$page' data-field='stuName' data-sort='$sort' data-key='$key'><img src='downArrow.gif'></a></th>
        <th class='col3'>Ngày sinh  <a href='javascript:void(0)' data-page='$page' data-field='stuDoB' data-sort='$sort' data-key='$key'><img src='downArrow.gif'></a></th>
        <th class='col4'>Giới tính <a href='javascript:void(0)' data-page='$page' data-field='stuSex' data-sort='$sort' data-key='$key'><img src='downArrow.gif'></a></th>
        <th class='col5'>Địa chỉ <a href='javascript:void(0)' data-page='$page' data-field='stuAdd' data-sort='$sort' data-key='$key'><img src='downArrow.gif'></a></th>
    </tr>
"; 
```

还有一些脚本：

```
$("#mainTable th a").click(function()   {
    var clicked= $(this);
    var page= clicked.data("page");
    var field= clicked.data("field");
    var sort= clicked.data("sort");
    var key= clicked.data("key");
    if(sort== 'up') {
        sort= 'down';
        clicked.html("<img src='downArrow.gif'>");
        clicked.attr("data-sort",sort);
    }
    else    { 
        sort= 'up';
        clicked.html("<img src='upArrow.gif'>");
    }
    showPage(page,field,sort,key);
}); 
```

我需要的是当点击图片时，它会改变图片。我使用`.click`事件和`$(this)`选择器来处理被点击的元素。但是当我点击图片时，它仍然是一样的。

我的代码有什么问题？我试过`CTRL-ALT-j`但没有错误。请帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T15:48:52.353

尝试`clicked.data("sort",sort);`设置`data-sort`属性

```
$("#mainTable th a").click( function () { 
    var clicked = $(this);
    var page = clicked.data("page");
    var field = clicked.data("field");
    var sort = clicked.data("sort");
    var key = clicked.data("key");

    if (sort == 'up') {
        sort = 'down';
        clicked.html("<img src='downArrow.gif'>");
    } else {
        sort = 'up';
        clicked.html("<img src='upArrow.gif'>");       
    }
   clicked.data("sort",sort);
}); 
```

**[工作样本](http://jsfiddle.net/kzwhn/2/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T15:37:52.640

你的桌子没有课。

在 javascript 代码中，您选择类*mainTable*的表，但该表不存在...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T15:46:54.617

尝试通过 jQuery 选择锚数据：

```
$("#mainTable th a").click(function()   {
    var clicked= $(this);
    var page= clicked.attr("data-page");
    var field= clicked.attr("data-field");
    var sort= clicked.attr("data-sort");
    var key= clicked.attr("data-key");
    if(sort== 'up') {
        sort= 'down';
        clicked.html("<img src='downArrow.gif'/>");
        clicked.attr("data-sort",sort);
    }
    else    { 
        sort= 'up';
        clicked.html("<img src='upArrow.gif'/>");
    }
    showPage(page,field,sort,key);
}); 
```

# python - 如何使函数接受另一个函数的参数？

> ID：15462548
> 
> 赞同：1
> 
> 时间：2013-03-17T15:30:45.623
> 
> 标签：python, function

我的问题可能看起来令人困惑，但这是我能想到的唯一措辞。对于任何混淆，我深表歉意，我会尽力解释。

基本上我想做的是在我的游戏中有一个简单的退出功能，询问“你想退出吗？” 如果用户输入 no，它会将它们返回到它们所在的函数。

这是我试图做的，但它似乎只是循环回到'bear_room（）'函数。

```
def bear_room():

    print "You are greeted by a bear"
    next = raw_input()

    if next == 'fight':
        print 'You tried to fight a bear. You died'
    elif next == 'exit':
        exit_game(bear_room())
    else:
        print 'I did not understand that!'
        bear_room()

def exit_game(stage):

    print '\033[31m Are you sure you want to exit? \033[0m'

    con_ext = raw_input(">")

    if con_ext == 'yes':
        exit()
    elif con_ext == 'no':
        stage
    else:
        print 'Please type ''yes'' or ''no'
        exit_game() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T15:33:53.243

你几乎明白了；`bear_room`当您将其作为参数传递时，您只需要不调用：

```
 elif next == 'exit':
        exit_game(bear_room) 
```

相反，您需要`stage`作为函数调用：

```
 elif con_ext == 'no':
        stage() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T15:38:32.290

您需要了解传递函数和调用函数之间的区别。

在这里，您将对函数的引用复制`raw_input`到变量`next`中，而不实际执行它。您可能希望将括号添加`()`到`raw_input`：

```
next = raw_input 
```

在这里，您`bear_room()`再次递归调用，而不是将对它的引用传递给`exit_game`函数。您可能想删除`()`括号`bear_room`：

```
elif next == 'exit':
    exit_game(bear_room()) 
```

同样，提及不带括号的函数不会执行它，因此您也想在此处添加它们：

```
elif con_ext == 'no':
    stage 
```

# c# - 我需要杀死这样写的线程吗？还是会自动结束？

> ID：15462550
> 
> 赞同：20
> 
> 时间：2013-03-17T15:30:53.130
> 
> 标签：c#, multithreading, lambda, thread-safety

使用类似下面的代码，创建的新线程会在函数返回后自行结束吗？

```
new Thread(() =>
{
    function();
}).Start(); 
```

我对线程很陌生，所以我想知道。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-17T15:39:30.703

没关系...如果担心在可执行文件退出之前线程可能无法完成，您可能想要：

```
new Thread(() =>
    {
        function();
    }){IsBackground = true}.Start(); 
```

后台线程不会阻止您的应用退出。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T15:33:55.433

是的，线程将在函数完成后结束，但除非你有一个需要在函数内部使用的参数，否则我不会那样启动它；我会这样做：

```
new Thread(function).Start(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-17T15:40:22.710

尽管管理线程被认为是*最佳实践*，但如果您对该特定线程的结果/状态不感兴趣并且不需要处理取消等问题，那么您的工作就可以了。

值得考虑的是你是否需要一个专门的线程来处理你正在做的事情。如果您正在运行的代码相对较小，您可能需要考虑通过[TPL](http://msdn.microsoft.com/en-gb/library/dd460717.aspx)或[QueueUserWorkItem](http://msdn.microsoft.com/en-us/library/system.threading.threadpool.queueuserworkitem.aspx)来使用 ThreadPool。

# elasticsearch - 弹性搜索的统计数据/方面

> ID：15462557
> 
> 赞同：1
> 
> 时间：2013-03-17T15:31:22.253
> 
> 标签：elasticsearch

我对弹性搜索中的方面有一点问题。我有一个表格视频，一个表格频道，一个频道有很多视频。我只想在 X 个最新视频上显示每个频道的 %views_count 的甜甜圈。

在 SQL 中：

```
SELECT SUM(views_count) FROM videos WHERE videos.channel_id = X ORDER BY published_at DESC LIMIT Y 
```

我可以在所有视频上做到这一点，但我不会在 LIMIT 上做到这一点。任何想法？？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T07:32:13.453

如果我对您的理解正确，您想将您的方面限制为最新的，例如 100 个视频？

我*认为*这是不可能的，因此必须在查询（或 facet_filter）中进行限制，为要考虑的数据设置一个范围：

```
{
    "facets": {
        "views_count": {
            "terms": {
                "field": "videos.channel_id"
            }
        }
    }, 
    "from": 0, 
    "query": {
        "range" : {
            "published_at" : { 
                "from" : <some_start_date>
            }
        }
    }
} 
```

# python - 如何从 QSpinBox 获取值，如何在 QWizard 中禁用 NextButton

> ID：15462561
> 
> 赞同：0
> 
> 时间：2013-03-17T15:31:43.670
> 
> 标签：python, python-3.x, pyqt4, qt4.8

Python 3.3，PyQt 4.8.4。我对 PyQt 和 Python（以及英语，我认为；））的了解并不好，所以我的学习中有很多问题。我在 Qt Designer 中制作了一个草稿，但我仍然无法理解如何使其正常工作。我有向导，在第一页 - 2 个 QSpinBoxes，第二个 - 生成的旋转框数量等于第一页框中输入的值。试图搜索信号和插槽，但仍然无法理解。

1.  如何在我的程序中获取此值，以使用它在第二页生成旋转框？
2.  当然，当第一个值不正确时，我需要让其他页面无法访问。我认为这可以通过保持 NextButton 不可用来实现，但如何 - 我不知道。需要帮助！）

我的代码本身 [http://pastebin.com/UxvzFvJR](http://pastebin.com/UxvzFvJR)

启动器是单独制作的[http://pastebin.com/2sYtyg9z](http://pastebin.com/2sYtyg9z)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T17:25:00.987

1：将您的 spinboxes 生成代码（行`list_x = []`到`f += 1`）移动到 page2 的[initializePage](http://qt-project.org/doc/qt-4.8/qwizardpage.html#initializePage)。肮脏但有效：

```
class Ui_Wizard(object):
    def addSpins(self):
        list_x = []
        ...

    ...
    self.wizardPage2.initializePage = self.addSpins 
```

2：[将它们注册为必填字段](http://qt-project.org/doc/qt-4.8/qwizard.html#registering-and-using-fields)：

```
self.wizardPage1.registerField("cols*", self.spinBox_col) 
```

# android - 模仿按键操作

> ID：15462562
> 
> 赞同：0
> 
> 时间：2013-03-17T15:31:47.143
> 
> 标签：android, keyboard, android-softkeyboard

我从按钮创建了一个键盘（所以是一个带有按钮 1、按钮 2 等的 xml，但现在我想要一个编辑文本以与使用软键盘的反应相同，有没有办法模仿键盘附带的设备？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T15:34:39.580

```
 editText.setOnFocusChangeListener(new View.OnFocusChangeListener() {
@Override
public void onFocusChange(View v, boolean hasFocus) {
    if (hasFocus) {

      //show your custom keypad
       }
   } 
}); 
```

强制软键盘出现。

```
 EditText yourEditText= (EditText) findViewById(R.id.yourEditText);
 InputMethodManager imm = (InputMethodManager)          getSystemService(Context.INPUT_METHOD_SERVICE);
 imm.showSoftInput(yourEditText, InputMethodManager.SHOW_IMPLICIT); 
```

# python - 如何从 Sublime Text 2 在 OSX 终端中显示构建结果

> ID：15462566
> 
> 赞同：3
> 
> 时间：2013-03-17T15:32:02.877
> 
> 标签：python, macos, terminal, fortran, sublimetext2

我刚从 TextMate 切换到 Sublime Text 2，我非常喜欢它。困扰我的一件事是默认的构建结果显示在 ST2 的底部。我的程序产生了一些很长的结果，显示它的理想方式（如在 TM2 中）是并排查看它们。

如何在 Mac OS 中使用 ST2 做同样的事情？我发现[这篇文章](http://www.ubuntuvibes.com/2012/07/how-to-get-python-build-results-in.html)讨论了如何在 Linux 中做到这一点。但仍然无法弄清楚如何使其适应 Mac OS。

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T17:35:04.513

`Terminal.app`您可以创建一个 shell 脚本，通过[osascript](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/osascript.1.html)将传递的输入作为 Python 脚本执行，如下所示：

```
#!/bin/sh
osascript -e '
    on run parameters
        tell application "Terminal"
            activate
            do script with command "python " & parameters
        end tell
    end run
' $@ 
```

然后您可以创建构建系统：

```
{
    "cmd": ["sh PATH_TO_SHELL_SCRIPT \"$file\""],
    "shell": true
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T17:10:13.297

如果你使用像[iTerm2](http://www.iterm2.com/#/section/home)这样的附加终端程序，你可以创建一个 shell 脚本

*   打开一个新的终端窗口

*   发出此窗口的初始命令

可以通过[生成的静态 AppleScript 文件控制打开的 iTerm2 窗口并为其发出终端命令（运行构建并显示结果）](http://www.worldgoneweb.com/2011/iterm2-advanced-features/)

我不知道如何使用股票 OSX 终端来做到这一点。

# java - Java 漂亮的打印 XML 版本=1.0 没有引号

> ID：15462570
> 
> 赞同：1
> 
> 时间：2013-03-17T15:32:23.197
> 
> 标签：java, xml, serialization, declaration, quote

我有一个 xml 字符串代码。这个字符串可以是格式正确的，也可以不是格式正确的，我应该返回一个格式正确的 xml 字符串。

我使用了这段代码，它工作得很好：

```
try {
            final Document document = parseXmlFile(code);
                OutputFormat format = new OutputFormat(document);
            format.setLineWidth(65);
            format.setIndenting(true);
            format.setIndent(2);
            Writer out = new StringWriter();
            XMLSerializer serializer = new XMLSerializer(out, format);
            serializer.serialize(document);
            newcode = out.toString();
        } catch (IOException e) {
            throw new RuntimeException(e);
        }
private Document parseXmlFile(String in) {
    try {
        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
        DocumentBuilder db = dbf.newDocumentBuilder();
        InputSource is = new InputSource(new StringReader(in));
        return db.parse(is);
    } catch (ParserConfigurationException e) {
        throw new RuntimeException(e);
    } catch (SAXException e) {
        throw new RuntimeException(e);
    } catch (IOException e) {
        throw new RuntimeException(e);
    }
} 
```

但我发现了一个带有这个声明的 xml 字符串的错误：

> ```
> <?xml version= 
> ```
> 
> 1.0 编码= utf-8 ?>

这是给定的错误：

**org.xml.sax.SAXParseException：XML 声明中“版本”后面的值必须是带引号的字符串。**

我也试过这段代码，但我得到了同样的错误：

```
private static String prettyFormat(String input, int indent) {
    try {
        Source xmlInput = new StreamSource(new StringReader(input));
        StringWriter stringWriter = new StringWriter();
        StreamResult xmlOutput = new StreamResult(stringWriter);
        TransformerFactory transformerFactory = TransformerFactory.newInstance();
        transformerFactory.setAttribute("indent-number", indent);
        Transformer transformer = transformerFactory.newTransformer(); 
        transformer.setOutputProperty(OutputKeys.INDENT, "yes");
        transformer.transform(xmlInput, xmlOutput);
        return xmlOutput.getWriter().toString();
    } catch (Exception e) {
        throw new RuntimeException(e); // simple exception handling, please review it
    }
} 
```

你有什么想法我可以解决它吗？可能不删除原始声明。

谢谢！！

# java - 创建由 sh 命令执行的 java 文件

> ID：15462572
> 
> 赞同：-1
> 
> 时间：2013-03-17T15:32:38.757
> 
> 标签：java, linux, execute

你好我有一个java程序。我有一个应该执行该程序的脚本。脚本看起来像这样

```
sh compress.sh -f myfile.txt [-o myfile.hzip -s] 
```

如何从我的 java 程序创建可执行文件，以便它可以从此脚本执行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T16:51:43.243

MyApp.java：

```
public class MyApp {
   public static void main(String []args) {
        //Do something with args...
   }
} 
```

压缩.sh：

```
#!/bin/sh

#Specify your Java class here (must contain a main method)
JAVA_CMD="java MyApp"

#JAR variant (a more common approach)
#JAVA_CMD="java -jar myjar.jar"

#Map script arguments to java app arguments. Use flag specific variables, if it's more convinient for you.
while getopts "f:o:s" opt; do
  case $opt in
    f)
      JAVA_CMD="$JAVA_CMD -f $OPTARG"
      ;;
    o)
      JAVA_CMD="$JAVA_CMD -o $OPTARG"
      ;;
    s)
      JAVA_CMD="$JAVA_CMD -s"
      ;;
    *)
      echo "Invalid usage..." >&2
      exit 1;
      ;;
  esac
done

#Additional validation (required options etc.)
#...

echo "Launching Java: $JAVA_CMD"
$JAVA_CMD 
```

编译你的类，然后运行脚本。如果您使用任何外部库，您可能需要在 JAVA_CMD 中包含[一个额外的类路径参数。](http://docs.oracle.com/javase/6/docs/technotes/tools/windows/classpath.html)

如果您要使用 JAR，请确保您的 MANIFEST.mf 具有所有必需的信息（尤其是有效的*Main-Class*条目）。进一步的说明可以在[这里](https://stackoverflow.com/questions/5258159/how-to-make-an-executable-jar-file)找到。

[如果这是一个 Maven 项目，那么您可以使用Maven Assembly Plugin](http://maven.apache.org/plugins/maven-assembly-plugin/)在一个简单的步骤中创建一个可执行的 JAR 。只需运行 mvn 程序集：程序集。

# html - CSS 背景定位

> ID：15462573
> 
> 赞同：0
> 
> 时间：2013-03-17T15:32:41.173
> 
> 标签：html, css

我正在尝试将图像放在另一个图像之上。例如，很多网站都有一个主背景，我假设用在 html 标签和另一个背景中，比如用于 body 标签的简单颜色。但他们将其设为屏幕的 75% 并将其居中，以便显示部分 html 背景。我被困在如何居中并使身体标签占屏幕的 75%。先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T15:38:34.067

你想使用`margin:0px auto;`和你想居中`position:absolute`的那个。`div`

第一个`0px`告诉它顶部和底部没有任何边距。第二个属性告诉它使左右边距自动。使 div 居中。

为了使这个工作，div 需要有一个`width`并且是绝对定位的。

演示（奖励标题）：http: [//jsfiddle.net/btevfik/GPpeD/](http://jsfiddle.net/btevfik/GPpeD/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T15:55:40.123

您可以使用包装器 div 并为其设置 75% 的宽度并应用您想要的任何背景，然后将其位置设置为居中，它将为您提供所需的输出。

```
<html>
<head>
<style>
.wrapper{
width:75%;
height: 100%;
background-color:red;
background-position:center;
margin: 0 auto;
}
</style>
</head>

<body style="background-color:black;">
<div class="wrapper">this is a 75% width wrapper</div>
</body>
</html> 
```

just 告诉浏览器在`auto`元素的左侧和右侧之间平均分配可用空间

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T15:41:50.840

```
background: 
   url(backgroundOne.png) 60px 10px no-repeat,  /* On top,    like z-index: 4; */
   url(backgroundTwo.png) 10px 10px no-repeat,   /*            like z-index: 3; */
   url(backGroundThree.png);                      /* On bottom, like z-index: 1; */ 
```

在 CSS 中尝试上面的代码

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-17T15:59:37.630

您可以尝试将 css 背景图像属性分配给主体并创建一个新 div，然后为其分配另一个背景。并将容器的宽度设置为 75%。或者如果你打算使用 img 标签，那么你可以给它 z-index 属性。为了将 div 容器定位到中心，请提供边距：自动；

# bash - 连接 grep 输出字符串（bash 脚本）

> ID：15462575
> 
> 赞同：4
> 
> 时间：2013-03-17T15:32:48.737
> 
> 标签：bash, grep

我正在使用 bash 脚本（Ubuntu 12.10）处理来自文本文件的一些数据。

基本思想是我使用 grep 从文件中选择某一行。接下来，我使用 sed 处理该行以获取数字。grep 和 sed 命令都在工作。我可以回显这个数字。

但是结果与字符串的连接出错了。

当我从变量或文件执行 grep 命令时，组合字符串时会得到不同的结果。当我 grep 文件时，连接出错。当我使用与文件中相同的文本 grep 变量时，它按预期工作。

我对文件中的 grep 做错了什么？

**test.pdb 的内容**

```
REMARK overall = 324.88  
REMARK bon     = 24.1918  
REMARK coup    = 0 
```

**我的剧本**

```
#!/bin/bash

#Correct function
echo "Working code"
TEXT="REMARK overall = 324.88\nREMARK bon     = 24.1918\nREMARK coup    = 0\n"
DATA=$(echo -e $TEXT | grep 'overall' | sed -n -e "s/^.*= //p" )

echo "Data: $DATA"
DATA="$DATA;0"
echo $DATA

#Not working
echo ""
echo "Not working code"
DATA=$(grep 'overall' test.pdb | sed -n -e "s/^.*= //p")

echo "Data: $DATA"
DATA="$DATA;0"
echo $DATA 
```

**输出**

```
Working code
Data: 324.88
324.88;0

Not working code
Data: 324.88
;04.88 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-03-26T12:46:02.410

我对同样的问题发疯了。

真正的问题是您的“test.pdb”可能有错误的 EOL（行尾）字符。

Linux EOL：LF（又名 \n）

Windows EOL：CR LF（又名 \r \n）

这意味着 echo 和 grep 会对这个额外的字符 (\r) 产生问题，幸运的是 tr、sed 和 awk 可以正确管理它。

所以你也可以尝试：

DATA=$(grep 'overall' test.pdb | sed -n -e "s/^.*= //p" | sed -e 2s/\r$//")

或者

DATA=$(grep 'overall' test.pdb | sed -n -e "s/^.*= //p" | tr -d '\r')

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T15:43:05.263

试试这个：

```
SUFFIX=";0"
DATA="${DATA}${SUFFIX}" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T15:48:31.233

使用[awk](/questions/tagged/awk "显示标记为“awk”的问题")，我猜它会更可靠和更干净：

```
$ awk '$2=="overall"{print "Working code\nData: " $4 "\n" $4 ";0"}' file.txt
Working code
Data: 324.88
324.88;0 
```

# ms-access - 如何使用复选框过滤特定记录并显示在子表单中

> ID：15462576
> 
> 赞同：1
> 
> 时间：2013-03-17T15:32:50.030
> 
> 标签：ms-access, ms-access-2007, vba

当我单击白色复选框时，它必须只过滤掉其 W 在子表单中记录的比赛，这是我的代码，但它不能正常工作，任何建议有什么问题。提前致谢

```
Option Compare Database

Private Sub White_Click()

strFilter = "Race=W """ & Me.White.OnClick & """"
DoCmd.OpenForm "Home"
Forms!Home![Employees subform].Form.Filter = strFilter
Forms!Home![Employees subform].Form.FilterOn = True

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T15:39:03.047

这种说法非常令人困惑：

```
strFilter = "Race=W """ & Me.White.OnClick & """" 
```

首先，有Race=W。然后是 Me.White.OnClick 的值 - 如果这是一个复选框，那么您将拥有一个与之关联的真/假值，但前提是您使用了一个值。

根据您的源表，您可能应该执行以下操作：

```
if me.white.value then
   strFilter = "Race = 'W'"
else
   strFilter = ""
end if 
```

我不太确定 me.white.value - 它可能是另一个变量。这样做将允许单击和关闭复选框

# ruby - ruby composition - 如何显示组合类的成员？

> ID：15462577
> 
> 赞同：0
> 
> 时间：2013-03-17T15:32:52.017
> 
> 标签：ruby, composition

来自我习惯于为我管理关系的 Rails 框架的 Rails。

现在尝试只做基本的 Ruby。

试图理解关系和组成。以卡片包为例。现在只使用 1 到 52 的 card_number（暂时忽略花色和实数）。

下面的代码可以创建 PackOfCards，但没有创建我想要的 5 张卡片，要么什么都没有显示，要么我最后得到的 put 为零。

```
class PackOfCards

  attr_accessor :pack_name, :cards

  def initialize(pack_name)

    @pack_name= pack_name
    cards = []
    5.times do
      cards << PlayingCard.new(self)
    end 
  end 

end

class PlayingCard

  attr_accessor :pack, :card_number

  def initialize(pack)
    @card_number = rand(52)
    @pack = pack
  end 

end

my_pack=PackOfCards.new('bobs')
puts my_pack.pack_name
puts my_pack.cards # Nothing
my_pack.cards.each do |one_card|
  puts one_card.card_number # Undefined method 'each' for nil
end 
```

当我这样做时，如何创建卡片包并让它有 5 张卡片，我如何显示这 5 张卡片？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T15:43:57.353

我认为访问器只会为您创建`cards`and`cards=`方法。我认为这`<<`不应该奏效。尝试更改为：

```
@cards = []
5.times do
  @cards << PlayingCard.new(self)
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T16:52:55.773

问题实际上在于您创建的意外局部变量。

如果你说：

x = 卡片

这将与以下内容相同：

x = self.cards

但是，如果没有 self 赋值，您实际上会创建一个局部变量“cards”

self.cards = []

卡片 << foo

可以正常工作，因为方法的使用将根据 ruby​​ 首先查找 self ，但是由于 ruby​​ 中的局部变量看起来与方法调用相同，ruby 可以在分配时创建它们。

# delphi - 使用 IdHTTP 将字节数组发送到 PHP

> ID：15462580
> 
> 赞同：0
> 
> 时间：2013-03-17T15:33:20.233
> 
> 标签：delphi, indy, idhttp

我正在尝试使用 IdHTTP 组件构建一个简单的客户端 - 服务器 - 客户端应用程序。如何使用 IdHttp 组件将字节数组从 client1 发送到位于 www.example.com 的 php 文件，并让该 php 文件使用 IdHTTp 发送相同的数据以供 client2 使用？也许我在这里走错了路。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T15:43:25.243

为了将数据从 client1 发送到服务器，我建议使用 Base64 编码。这样你就有一个普通的字符串而不是一个字节数组。使用 IdHTTP 发送字符串很简单。另一种方法是多部分表单数据（[此处为 Java 代码](http://www.developer.nokia.com/Community/Wiki/HTTP_Post_multipart_file_upload_in_Java_ME)）。

在client2上接收数据：HTTP客户端不知道服务器上什么时候有数据。异步接收（服务器推送）是新 WebSocket 协议的一个特性，它是 HTTP 的扩展，因此需要在客户端和服务器端进行特定的扩展。Delphi 有 WebSocket 协议的开源和商业实现。

如果你的 client2 是一个普通的 HTTP 客户端，它除了不断地从服务器轮询数据外别无选择。对于基本用例，我建议使用 TIdTCPClient 组件而不是 TidHTTP，它可以让您更好地控制传入数据的处理。客户端jst需要在服务器的80端口上打开一个socket连接，发送一个格式良好的HTTP请求，然后运行一个循环来接收响应。当服务器有新数据时，PHP 脚本将开始发送数据（甚至可能没有 HTTP 响应头），然后是 Base64 编码的数据。

# r - 如何在 R ( ubuntu ) 中设置代理

> ID：15462581
> 
> 赞同：2
> 
> 时间：2013-03-17T15:33:20.763
> 
> 标签：r, ubuntu, proxy, cran, bioconductor

高拉夫·潘迪

我使用了命令

```
Sys.setenv(http_proxy="http://myusername:pswd@host:port") 
```

起初它起作用了。但是在终端中重新启动它时，它显示了以下错误。-

```
 cannot open: HTTP status was '407 Proxy Authentication Required 
```

如何解决这个问题。帮助,,,

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T16:11:05.420

您为运行 R 的进程设置环境。当 R 的实例退出时，进程消失，环境消失。

您不能为父进程设置环境。

将这些命令放入`/etc/profile`或`~/.bash_profile`代替：

```
export http_proxy
http_proxy=http://myusername:pswd@host:port 
```

或全部在一行上（对于`bash`）：

```
export http_proxy=http://myusername:pswd@host:port 
```

或者在开始之前在 shell 中运行命令`R`。

# php - 多个下拉值创建 SQL 查询 PHP

> ID：15462582
> 
> 赞同：2
> 
> 时间：2013-03-17T15:33:39.013
> 
> 标签：php, mysql, drop-down-menu

我目前正在尝试创建一个表单，其中有三个下拉选项框和一个提交按钮。所有三个下拉框都是从数据库中填充的，我希望将所选选项包含到新查询中并打印出来。*此示例仅显示一个下拉菜单*

PHP 代码

```
// Create connection
$con=mysqli_connect('', '', '', '');

// Check connection
if (mysqli_connect_errno($con))
{
    echo "Failed to connect to MySQL: " . mysqli_connect_error();
}
$course_dropdown ="";
$query_course = "SELECT * FROM course";
$result_course = mysqli_query($con,$query_course) or die(mysqli_error());

while($row = mysqli_fetch_assoc($result_course))
{
    $course_dropdown .= "<option value='{$row['CourseName']}'{$row['CourseName']}           </option>";
} 
```

以上是用于创建下拉列表的代码

HTML

```
<form="index.php" method="post">
<select name="Course"><?php echo $course_dropdown; ?></select>
<input name="button" value="Submit" type="submit"> 
```

我不知道该怎么做，我尝试了各种不同的技术，但无法找到答案。

最近的尝试

```
$course = mysqli_real_escape_string($con, $_POST['Course']);
$query = mysqli_query($con,"SELECT * FROM course_module WHERE CourseName = $course"); 
```

这带来了一个错误

*注意：未定义索引：第 33 行 C:\Users\seanin\Desktop\xampp\htdocs\index.php 中的课程*

因此按照建议进行了编辑，但仍然有错误，可能缺少一些小东西。

```
// Check connection
if (mysqli_connect_errno($con))
{
echo "Failed to connect to MySQL: " . mysqli_connect_error();
}
$course_dropdown ="";
$query_course = "SELECT * FROM course";
$result_course = mysqli_query($con,$query_course) or die(mysqli_error());

while($row = mysqli_fetch_assoc($result_course))
{
$course_dropdown .= "<option value='{$row['CourseName']}'>{$row['CourseName']}</option>";
} 

if ($_POST['button'] == 'Submit') {
$course = mysqli_real_escape_string($con, $_POST['Course']);
$query = mysqli_query($con,"SELECT * FROM course_module WHERE CourseName = $course"); 
} 
```

还是有这个错误

*注意：未定义索引：第 30 行 C:\Users\seanin\Desktop\xampp\htdocs\index.php 中的按钮*

提交按钮问题

* * *

快完成了，感谢到目前为止的所有帮助。

我需要做什么才能得到结果并打印出来？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T15:56:58.150

您的下拉菜单不起作用的原因是缺少“>”用这个替换while循环内的行

```
$course_dropdown .= "<option value='{$row['CourseName']}'>{$row['CourseName']}</option>"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T15:55:17.113

## 请阅读有关[SQL 注入](http://php.net/manual/en/security.database.sql-injection.php)的信息。他们可以摧毁你的生活。

我认为您正在尝试访问以下行中的“课程”，但未定义：

```
$course = mysqli_real_escape_string($con, $_POST['Course']); 
```

你能提交页面吗？您的 HTML 表单中有一个错误：`<form="index.php"`不是有效的 HTML 标记，因此您无法提交页面，也就是说，如果您发布了您正在使用的确切代码。你的表格应该是：

```
<form action="index.php" method="post">
<select name="Course"><?php echo $course_dropdown; ?></select>
<input name="button" value="Submit" type="submit">
</form> <!-- and don't forget the closing tag --> 
```

您可以通过执行以下操作来检查页面是否已提交：

```
if ($_POST['button'] == 'Submit') {
    $course = mysqli_real_escape_string($con, $_POST['Course']);
     // please note the missing single quotes, and please read the first line of my answer
    $query = mysqli_query($con,"SELECT * FROM course_module WHERE CourseName = '$course'");
} 
```

以下行中还有一个无效的 HTML 语法：

```
$course_dropdown .= "<option value='{$row['CourseName']}'{$row['CourseName']}           </option>"; 
```

的格式为`<option>`：`<option value="value">label</option>`.

# git - Windows 上 msysgit 中的 Bash 文件夹文件着色？

> ID：15462589
> 
> 赞同：2
> 
> 时间：2013-03-17T15:34:10.007
> 
> 标签：git, bash, msysgit

我在 Windows 中使用 msys Git。我已经通过在 .bashrc 中设置 PS1 变量为我的提示着色。

但是 - 我也希望获得标准的 bash 着色 - 例如，当我执行“ls”时，文件与目录的颜色不同。有谁知道如何实现这一目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T15:52:27.093

我发现您必须为每个命令实际设置 --color 标志。我将此添加到 .bash-rc for ls 以：显示着色（--color=auto），显示隐藏文件（-a），显示列表（-l），显示人类可读大小（-h），并按扩展名排序以便首先显示目录（-X）：

```
alias ls='ls --color=auto -alhX' 
```

如果有任何方法可以为所有命令全局打开着色，而不必为每个命令单独创建别名，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T15:53:24.167

这是我发现的作品。假设您定义了颜色。

```
 # tell ls to be colourful
    export PS1="${GREEN}\u ${YELLOW}\w ${BLUE}\W ${CYAN}\$(dev_info)${WHITE}\$ "
    export CLICOLOR=1
    export LSCOLORS=gxBxhxDxfxhxhxhxhxcxcx 
```

这是我的全部代码

```
export PATH=/usr/local/bin:$PATH
export PATH=/usr/local/share/npm/bin:$PATH
export PATH=${PATH}:/var/lib/gems/1.8/bin/
export PATH=${PATH}:/var/lib/gems/

export PATH=~/bin:$PATH
export PATH=/opt/subversion/bin:$PATH
export PATH="$PATH:/Users/bentonrr/Sites/Amex/trunk/www/lib/Cake/Console"
export NODE_PATH=/usr/local/lib/node_modules:/usr/local/lib/node

alias ls="ls -H"
alias ll="ls -lh"
alias l="ll"
alias lll="ll"
alias la="ll -a"
alias lla="ll -a"
alias lsa="ls -a"
alias lt='ll -t'
alias lrt='ll -rt'
alias lart="ll -lart"
alias lsd="ls -d */"
alias lld="ll -d */"

alias git+st="git status"

function detect_git_dirty {
  local git_status=$(git status 2>&1 | tail -n1)
  [[ $git_status != "fatal: Not a git repository (or any of the parent
  directories): .git" ]] && [[ $git_status != "nothing to commit (working
  directory clean)" ]] && echo "*"
}

function detect_git_branch {
  git branch --no-color 2> /dev/null | sed -e '/^[^*]/d' -e "s/* \(.*\)/\1/"
}
function dev_info {
  echo "[$(detect_git_branch)$(detect_git_dirty)]"
}

# quick commands
alias tails='tail -f /Applications/MAMP/logs/apache_error.log'
alias ebash='vim ~/.bash_profile'
alias rebash='. ~/.bash_profile'
alias ehosts='sudo mvim /etc/hosts'
alias tmamp='tail -f /Applications/MAMP/logs/*';
alias tache='tail -f /var/log/apache2/*';
alias vimrc='vim ~/.vimrc'
alias gvimrc='vim ~/.gvimrc'
alias rmlogs="sudo rm -f /private/var/log/asl/*.asl"
alias ephp="sudo vim /etc/php.ini"
alias apr="sudo apachectl restart"
alias iphone="open /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/Applications/iPhone\ Simulator.app"

 BLACK="\[\033[0;30m\]"
 RED="\[\033[0;31m\]"
 GREEN="\[\033[1;32m\]"
 YELLOW="\[\033[1;33m\]"
 BLUE="\[\033[0;34m\]"
 PURPLE="\[\033[0;35m\]"
 CYAN="\[\033[0;36m\]"
 WHITE="\[\033[0;37m\]"

export PS1="${GREEN}\u ${YELLOW}\w ${BLUE}\W ${CYAN}\$(dev_info)${WHITE}\$ "
# tell ls to be colourful
export CLICOLOR=1
export LSCOLORS=gxBxhxDxfxhxhxhxhxcxcx

# Set git autocompletion and PS1 integration
if [ -f /usr/local/git/contrib/completion/git-completion.bash ]; then
  . /usr/local/git/contrib/completion/git-completion.bash
fi
if [ -f /opt/local/share/doc/git-core/contrib/completion/git-prompt.sh ]; then
    . /opt/local/share/doc/git-core/contrib/completion/git-prompt.sh
fi
GIT_PS1_SHOWDIRTYSTATE=true

if [ -f /opt/local/etc/bash_completion ]; then
    . /opt/local/etc/bash_completion
fi 
```

# python - 如何使长文本适合图例框？

> ID：15462594
> 
> 赞同：2
> 
> 时间：2013-03-17T15:34:44.137
> 
> 标签：python, matplotlib

我在 OSX 10.8.3 上使用 Matplotlib 1.2.0 和 Python 2.7，我有一个如下图：

![在此处输入图像描述](../Images/78c405d8d47edd176aeb99b6e64b5882.png)

如您所见，右侧的图例文本存在问题，无法完全适合图例框。更改图例文本的字体大小无济于事。同时，我发现问题出在 PDF 后端。例如，将绘图保存为 JPEG，文本完全适合框。

以下是相关的代码部分：

```
import matplotlib.pyplot as plt

plt.figure(0, figsize=(10, 6))
ax = plt.subplot(111)
plt.xlim([0.0, 1.0])
plt.ylim([0.0, 1.05])

ax.plot(
    x, y,
    # I construct the labels dynamically like this 
    label=str(pr_auc_values[result_id])  + '  |  ' + filenames[result_id]
)

box = ax.get_position()
ax.set_position([box.x0, box.y0 + box.height * 0.15, box.width, box.height * 0.85])
plt.legend(loc='upper center', title='AUC Scores', fontsize=7, bbox_to_anchor=(0.5, -0.1))

# Saving as PDF leads to overfitting text
# Saving as JPEG works fine, though
plt.savefig('my_beautiful_plot.pdf') 
```

我必须配置哪个设置才能使图例框适应文本的长度？

# css - z-index 问题 CSS

> ID：15462602
> 
> 赞同：2
> 
> 时间：2013-03-17T15:35:34.430
> 
> 标签：css, z-index

我有一个容器并在容器中动态生成 div。

**HTML**

```
<div id="overlay">
</div>
<div id="cont">
    <div id="e1">
        Some
    </div>
    <div id="e2">
        Content
    </div>
</div> 
```

**CSS**

```
#cont{
    position: fixed;
    top:40%;
    left:20%;
    z-index:999;
    color:#a8a8a8;
}
#overlay{
    position:fixed;
    background: rgb(0,0,0);
    opacity: 0.5;
    width:100%;
    height:100%;
    top:0;
    left:0;
    z-index:1000;
}
#e2{
    z-index:1001;
} 
```

**检查这个jsfiddle：http:** [//jsfiddle.net/UkbXU/](http://jsfiddle.net/UkbXU/)

我有一个 z-index 1000 和背景 rgba(0,0,0,0.5) 的叠加层，照片容器在叠加层后面我只希望一个元素在叠加层之上，即 z-index 1001。还有其他元素在容器中，我这样做是为了显示元素突出显示的效果。但是使用 z-index: 1001 创建一个类不会将元素带到覆盖层之上。

如何将一个元素的 z-index 设置为大于容器？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-17T15:46:19.393

您必须将覆盖 div 移动到内容 div 中：

```
<div id="cont">
    <div id="overlay"></div>

    <div id="e1">
        Some
    </div>
    <div id="e2">
        Content
    </div>
</div> 
```

并且位置#e2 必须设置为相对。见[http://jsfiddle.net/UkbXU/10/](http://jsfiddle.net/UkbXU/10/)

否则是不可能的，因为#cont 和#overlay 都在创建新的堆叠上下文。这些无法再次合并。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T15:40:03.977

尝试

```
#e2{
    z-index:1001;
    position: absolute;
} 
```

它应该成功。

如果不尝试：

```
#e2{
    z-index: 9999 !important;
    position: absolute !important;
    top: 0px; //you can change that
    left: 0px; //you can change that
} 
```

如果它仍然无法正常工作，很可能某些 javascript 将更大的 z-indes tahn 9999 设置为#overlay。

# magento - 如何导出/导入 Magento 评论

> ID：15462606
> 
> 赞同：1
> 
> 时间：2013-03-17T15:35:45.667
> 
> 标签：magento, magento-1.7, magento-1.4, export-to-csv

由于各种升级问题，我想将我的 1.4.2 Magento 网上商店导出到版本 1.7.0.2 我成功地对我的所有产品进行了导出/导入，但我还想导出/导入我的 140 条产品的评论。这是可能的吗？如果可以的话，具体情况如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-09-22T09:15:40.503

有一个免费的扩展，“产品评论导入/导出”，使用数据流配置文件：

[http://www.magentocommerce.com/magento-connect/product-review-import-export.html](http://www.magentocommerce.com/magento-connect/product-review-import-export.html)

这很慢（惊喜，惊喜），但对于 140 条评论来说，这应该不是问题。此外，我建议在导入完成后立即删除扩展，因为它包含一个潜在的安全漏洞，因为带有未转义数据的普通 SQL 查询。

# php - php sql max where id2=$id2

> ID：15462609
> 
> 赞同：0
> 
> 时间：2013-03-17T15:36:28.003
> 
> 标签：php, max

我试图从 Borga 列中找到我的表（名为 huur）中的最高数字，但仅适用于 ID2 等于我在名为 $ID2 的变量中的数字的用户。
最高的数字应该进入变量 $hoogste_borg
这是我正在使用的代码，但我得到无效的语法错误？我究竟做错了什么？

```
<?php 
    $query="SELECT MAX('Borga') FROM huur ORDER BY ID DESC LIMIT 1 WHERE ID2='$ID2'";
    $result=mysql_query($query) or die ("Error: ".mysql_error());
    while ($row=mysql_fetch_array($result)) 
    {
    $hoogste_borg=$row['Borga'];
    }
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T15:41:11.240

`ORDER BY`并且`LIMIT`必须在`WHERE`子句之后。-- [http://dev.mysql.com/doc/refman/5.0/en/select.html](http://dev.mysql.com/doc/refman/5.0/en/select.html)

```
SELECT MAX('Borga')
   FROM huur
   WHERE ID2='$ID2'
   ORDER BY ID DESC 
   LIMIT 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T15:42:26.673

尝试这样做：

```
$query="SELECT MAX('BORGA') as Borga..."; 
```

因为你想要 'Borga' 字段，但 SQL 返回 MAX('Borga')

如果它不起作用，请执行以下操作：

```
var_dump($row); 
```

并向我们​​展示结果:)

# c++ - if-else 语句中的条件被错误评估

> ID：15462612
> 
> 赞同：1
> 
> 时间：2013-03-17T15:36:36.503
> 
> 标签：c++, c, if-statement, return, conditional-statements

我的一个函数中有类似的东西，它返回错误。

```
if ((X = ax && Y == ay) || (X == bx && Y == ay) || (X == cx && Y == ay) || (X == ax && Y == by) || (X == cx && Y == by) || (X == ax && Y == cy) || (X == bx && Y == cy) || (X == cx && Y == cy))
    return true;
else
    return false; 
```

但是，如果我使用相同的参数调用该函数，但将代码更改为仅此，它将返回 true。

```
if (X == bx && Y == ay)
    return true;
else
    return false; 
```

为什么会这样？第二个代码中的条件是第一个代码中的条件之一，所以如果其中一个为真，它应该返回真，对吗？我希望第一个条件返回 true

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-17T15:40:07.007

靠近长条件开头的“=”必须是“==”！您正在为 X 分配一个新值，而不仅仅是对其进行测试，这会导致所有其他测试失败。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-17T15:42:47.533

`=`是一个赋值运算符，不小心将它用于比较是一个常见的错误，这也是你的情况。在您的条件的第一部分：您通过分配给它来`(X = ax && Y == ay)`更改值，然后影响其余条件的结果。`X``ax`

另请注意：

```
if (A || B || C || D)
    return true;
else
    return false; 
```

等于：

```
return (A || B || C || D); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-17T15:40:43.667

```
if((X = ax && Y == ay) ||  //Problem is here 
```

你需要做到

```
if((X == ax && Y == ay) || 
```

您的代码对于`X`= `bx`和`Y`=失败，`ay`因为在第一种情况下，该值`ax`被分配给`X`，即`TRUE`，但`Y`不是`ay`这使得第一次比较为假。之后的所有比较都评估为 false，这会导致第一次测试失败。

# php - php 如果元简码空不显示，如果有文本回显文本

> ID：15462613
> 
> 赞同：0
> 
> 时间：2013-03-17T15:36:43.633
> 
> 标签：php, wordpress

如果我的元框短代码中没有显示任何内容，我不想显示任何内容：

```
<?php echo stripslashes(do_shortcode(get_post_meta($post->ID, '_'.$dirname.'_matchquote', true))); ?> 
```

元框简码编码如下：

```
'_'.$dirname.'_matchquote' => array(
    'name' => '_'.$dirname.'_matchquote', 
    'title' => __('Match Quote', 'gp_lang'), 
    'desc' => __('', 'gp_lang'), 
    'std' => '',
    "type" => "textarea"
), 
```

那么，如果那个盒子里什么都没有，我怎么会什么都没有呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T16:05:09.167

目前尚不清楚“那个特定的盒子”是什么，但我认为这就是你想要的：

```
$text = stripslashes(do_shortcode(get_post_meta($post->ID, '_'.$dirname.'_matchquote', true)));
if (!empty($text)) {
  echo $text;
} 
```

我不明白您为什么要`stripslashes`在已处理的短代码上运行。如果有的话，我认为它应该`get_post_meta`在该字符串发送到`do_shortcode`.

```
$text = do_shortcode(stripslashes(get_post_meta($post->ID, '_'.$dirname.'_matchquote', true)));
if (!empty($text)) {
  echo $text;
} 
```

# validation - 如何在 Knockout-Validation 的计算属性中获取可观察属性的值

> ID：15462615
> 
> 赞同：0
> 
> 时间：2013-03-17T15:36:50.370
> 
> 标签：validation, knockout.js, knockout-validation, computed-observable

我使用 Knockout-Validation 框架来验证 viewModel。

我有一个定义如下的视图模型：

```
ko.validation.init({
    decorateElement:true,
    errorElementClass: 'invalid',
    insertMessages: false
});

var viewModel = ko.validatedObservable({
    propety1: ko.observable().extend({ required: true }),
    propety2: ko.computed(function () {
        return this.propety1();
    }, this),
    form_onsubmit: function(form) {
        console.log(this.propety1());
        return false;
    }
});

$(function () {
    ko.applyBindings(viewModel);
}); 
```

它可以在 form_onsubmit 函数中获取 property1 的值，但在计算属性“property2”中不起作用。

怎么解决，谢谢！！！！！！！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T15:51:39.883

使用对象字面量时，您需要单独定义计算属性：

```
var viewModel = ko.validatedObservable({
    propety1: ko.observable().extend({ required: true }),    
    form_onsubmit: function(form) {
        console.log(this.propety1());
        return false;
    }
});
viewModel().propety2 = ko.computed(function () {
        return this.propety1();
}, viewModel()); 
```

仅仅`this`作为第二个参数传递是不够的，因为它将引用全局窗口对象而不是对象字面量本身。

# lisp - 哪一个是尾递归？

> ID：15462623
> 
> 赞同：2
> 
> 时间：2013-03-17T15:37:33.430
> 
> 标签：lisp, scheme, racket, tail-recursion

我看到以下两个函数在*语法上*都是尾递归函数，但是，在**球拍**中，它们中的哪一个真正被视为*尾递归*，或者两者兼而有之？我的意思是它是否被解释器优化为*尾递归*。

```
;;1
(define (foo i m s)
    (if (< i m)
        (foo (+ i 1) m (+ i s))
        s))

;;2
(define (foo i m s)
    (if (= i m)
        s
        (foo (+ i 1) m (+ i s)))) 
```

其他 lisps有什么**不同的答案吗？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T15:59:41.397

两者都是尾递归的，因为递归调用是在*尾部位置*完成的，也就是说：这是调用递归时完成的最后一件事。`if`如果在所示过程中颠倒了表达式中后件和替代部分的顺序，则完全没有关系。

根据 Scheme 的[规范](http://www.r6rs.org/final/html/r6rs/r6rs-Z-H-8.html#node_sec_5.11)，所有尾递归都必须优化掉，无论它们出现在代码中的什么位置，从语法上讲：

> Scheme 的实现必须是适当的尾递归。在称为尾上下文的某些句法上下文中发生的过程调用是尾调用。如果 Scheme 实现支持无限数量的活动尾调用，则它是正确的尾递归。如果被调用的过程仍可能返回，则调用处于活动状态。请注意，这包括常规返回以及通过稍后调用的 call-with-current-continuation 捕获的延续返回。在没有捕获的延续的情况下，调用最多只能返回一次，而活动调用将是那些尚未返回的调用。正确尾递归的正式定义可以在 Clinger 的论文 [5] 中找到。识别来自 (rnrs base (6)) 库的结构中的尾调用的规则在第 11.20 节中描述。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-17T15:57:54.513

只要我们在谈论**Scheme**：没有。所有符合要求的实现都需要检测尾调用并进行适当的优化，因此这些实现只需要一个恒定的堆栈空间。在您的示例中，[两者都是完全有效的 tail-calls](http://www.r6rs.org/final/html/r6rs/r6rs-Z-H-14.html#node_sec_11.4.3)，并且必须被任何符合要求的实现识别为这样。

另一方面，如果我们谈论的是“一般的 Lisp”，那么情况就不同了。例如， ANSI **Common Lisp**不需要符合规范的实现来专门处理尾调用。尽管大多数现代实现确实可以识别尾调用（并且会在声明的正确组合下优化它们），但语言本身没有任何东西可以保证这种行为。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-17T16:36:12.510

[Scheme R7RS 草案 8](http://trac.sacrideo.us/wg/raw-attachment/wiki/WikiStart/r7rs-draft-8.pdf)第 11 页的第 3.5 节根据句法形式确定了所有尾递归要求。因为`if`要求是：

```
(if expression <tail expression> <tail expression>)
(if expression <tail expression>) 
```

因此，根据您的代码示例并假设 Racket 忠实于 Scheme，两者都是尾递归的。至于其他 lisp，我不认为 Common Lisp 需要尾递归优化。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T14:07:52.783

emacs lisp 没有优化尾递归：

```
(defun fact (n &optional result)
  (unless result (setq result 1))  ; use 1 if not given
  (if (zerop n) result
     (fact (1- n) (* n result))))
(fact 12)
479001600
(fact 1000)
Lisp nesting exceeds max-lisp-eval-depth 
```

（不要介意这个值是一个固定的整数，所以你不能为 1000 返回一个准确的值！无论如何 -`(fact 30)`工作但返回一个错误的值。）

为了补充之前的通讯员所说的内容，实现可以自由地优化更高`optimization`级别和/或更低级别的尾递归`safety`。如果有疑问，请尝试不同的值并`(disassemble 'foo)` 尝试`(trace foo)`- 如果尾递归未优化，您*应该*在调用它时看到每个调用，如果是，您应该只看到“顶部”调用。

# scala - 是否可以使用宏实现类似于 Scala 的 @BeanProperty 的东西？

> ID：15462626
> 
> 赞同：7
> 
> 时间：2013-03-17T15:37:35.897
> 
> 标签：scala, macros, scala-macros

我想创建一个注释或特征，在编译时根据现有字段动态地向对象添加方法。尽管我对类级别的某些东西感兴趣，但我也会使用字段级别的注释（或其他更细化的东西）。

一个关于 Scala 实现细节的[旧堆栈溢出问题](https://stackoverflow.com/questions/10057119/how-to-create-custom-annotations-like-beanproperty)`@BeanProperty`被回答为“它是一个编译器插件，但宏也可能允许你这样做”。鉴于 Scala 2.10 中宏的官方（如果是实验性的）版本，这种功能现在可能吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-17T16:59:33.657

**更新：**这个答案不再有效。见尤金斯评论。

不，这还不可能。

在 2.10 中，只有 def 宏不能做任何可比的事情。对于 2.11，世界变得更好了，[宏注释](https://github.com/scalamacros/kepler/commit/35420ab3149074b18ffeda58d5ae45eb8ffadb9e)和[将成员引入](https://github.com/scalamacros/kepler/commit/fd2374d013f1f5cd0b3b0ba6ac16b437d116651b)类的实现已经存在。但它们只有几个星期大，因此仅适用于某些极端情况。此外，将成员引入类的实现与宏注释的实现位于不同的分支中，因此尚无法将它们一起使用。

# javascript - 在哪里包含复选框并使其可编辑

> ID：15462627
> 
> 赞同：0
> 
> 时间：2013-03-17T15:37:49.567
> 
> 标签：javascript, html, ajax

我正在使用 ajax 调用我的 Web 服务并在表数据中显示 Json 值。现在客户想要使每一行中的数据可编辑，从而单击复选框。

单击复选框后，该行应该是可编辑的。请帮助我在下面的代码中包含复选框的位置。

```
$.ajax({
    type: "GET", //GET or POST or PUT or DELETE verb
    url: "http://localhost:8080/karthi/", // Location of the service
    success: function (json) {//On Successfull service call

    var txtStr = '<table class="datatable"><thead><tr> <th>id</th> <th>firstName</th> <th>lastName</th> <th>licenseId</th> <th>telephone</th> <th>email</th> </tr></thead><tbody>';

    for(var i = 0; i < json.length; i++) {

     txtStr += '<tr class="gradeA"> <td><a class="edit_row" href="#tab2" onclick="showDetails(\''+json[i].id+'\');">'+json[i].id+'</a></td> <td>'+json[i].firstName+'</td> <td>'+json[i].lastName+'</td> <td>'+json[i].licenseId+'</td> <td>'+json[i].telephone+'</td> <td>'+json[i].email+'</td> </tr>'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T15:43:07.243

将它包含在 showDetails() 中。将其作为 id 字段之前的第一列。在 thead 标记内有一个新的复选框标题

# django - 在 Web 上实现异步的不同方法

> ID：15462629
> 
> 赞同：0
> 
> 时间：2013-03-17T15:37:55.567
> 
> 标签：django, events, asynchronous, websocket, queue

使用以下技术实现异步的方法的概念差异是什么。我的主要搜索是 Django，但我正在寻找一个描述技术背后想法的概念性答案。

*   Socket.IO 和 gevent
*   网络套接字
*   RabbitMQ & 芹菜

我在网上找到了关于大多数这些方法的教程，但是它们没有解释背后的概念，只是技术实现。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T22:31:09.423

异步编程可能很难理解。基本思想是一种绕过阻塞 IO 的方法。阻塞 IO 是指写入文件、查询数据库、查询 REST API 以及在等待其他事情发生时会中断应用程序处理流程的任何事情。

比如说你构建了一个图库应用，用户可以上传高清大图来炫耀。但是您需要制作用户上传的这张大图像、缩略图、较小分辨率版本等的各种副本。要做到这一点需要一些阻塞 IO。您需要压缩图像，这非常密集，一旦压缩，您需要将它们写入磁盘，之后您可能需要将所有这些信息存储在数据库中。在一个请求中执行此操作会导致用户的性能非常缓慢，而且老实说，您的后端进程可能会在完成所有需要的任务之前超时。它也不能很好地扩展。

解决这个问题的一种方法是使用异步编程。用户上传完成后，您可以向其他应用程序发出各种信号，等待他们压缩图像或将数据写入数据库的机会。一旦发出信号，这些后台进程就会开始工作，您的用户不必坐下来等待很长的请求完成，而是可以继续浏览网站，喝杯咖啡并在制作缩略图时收到通知等等

在上面的示例中，我将使用 Celery、RabbitMQ 和 SocketIO（或者可能是 TornadIO）来实现它。一旦用户上传完成，我会启动一个 celery 任务，celery 使用 RabbitMQ（我更喜欢 Redis）来管理任务，你可以有 10、20、30 名 celery 工作人员在后台处理这些图像上传。一旦 celery 完成它的工作，它会向 Socket 服务器发送一条消息，用于处理用户浏览器也连接的 Web 套接字。这将实时向用户发送通知，告知他们上传的新图片现已准备好与全世界分享

这是围绕异步事件驱动编程的真正基本示例。无论如何，我最好理解它。其他人请纠正我。

我希望这有帮助。:)

# android - listview 项目点击动画

> ID：15462631
> 
> 赞同：0
> 
> 时间：2013-03-17T15:38:27.627
> 
> 标签：android, listview, animation

我有几个项目的列表视图。当用户单击单个项目时，现在我正在打开具有更多详细信息的新活动。我想在这里应用动画，当用户单击项目时，新活动来自从右侧滑入。我尝试了各种方法，但我无法完成。这是我的代码。

我正在从 CustomBaseAdapter 获取列表视图项目。

```
list.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> view, View arg1, int position, long arg3) {

                CustomBaseAdapter mAdapter = (CustomBaseAdapter)list.getAdapter();
                AddVO listItem = (AddVO) mAdapter.getItem(position);
                Intent data = new Intent(this, NewActivityToBeOpenedUsingAnimation.class);
                data.putExtra("VO", listItem);
                setResult(RESULT_OK,data);

                Animation animation = AnimationUtils.loadAnimation(ViewExpenseActivity.this, R.anim.fade);
                list.startAnimation(animation);
                startActivityForResult(data, 2);
                finish();
            }
        }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T20:34:09.510

我必须解决它。

将以下代码放入活动中：

```
this.overridePendingTransition(R.anim.slide_right, R.anim.slide_left); 
```

(res/anim) 文件夹中的 slide_right.xml

```
<set xmlns:android="http://schemas.android.com/apk/res/android" android:interpolator="@android:anim/accelerate_interpolator">
    <translate android:fromXDelta="100%p" android:toXDelta="0"
            android:duration="700" />
</set> 
```

向左滑动

```
<set xmlns:android="http://schemas.android.com/apk/res/android" android:interpolator="@android:anim/accelerate_interpolator">
    <translate android:fromXDelta="0%p" android:toXDelta="0"
        android:duration="700" />
</set> 
```

# node.js - 为什么在单独的模型文件中使用 model.export？

> ID：15462635
> 
> 赞同：5
> 
> 时间：2013-03-17T15:38:41.400
> 
> 标签：node.js, mongodb, express, mongoose

在查看有关拆分模型数据的问题的一些 Stackoverflow 答案时，我看到了两种不同的格式。见下文：

```
var UserSchema = mongoose.Schema({
    name: String
})

module.exports = mongoose.model('User', UserSchema); 
```

与此方法相比：

```
var UserSchema = mongoose.Schema({
    name: String
})

mongoose.model('User', UserSchema); 
```

`module.exports...`using和 just using有什么区别`mongoose.model...`？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-17T15:45:16.883

`mongoose.model`返回`Model`它定义的。将其设置为`module.exports`允许您轻松创建 的实例`Model`，而无需从连接中检索它。

*一个.js*

```
var User = require('./b');
var myUser = new User; 
```

*b.js*

```
var UserSchema = mongoose.Schema({
    name: String
})

module.exports = mongoose.model('User', UserSchema); 
```

...注意我如何直接调用`new User`（在设置`User`为`require('./b')`... 这是`module.exports`允许我做的事情之后。请注意，这不是`mongoose`本身的一部分，而是[Nodes 模块系统](http://nodejs.org/api/modules.html#modules_module_exports)的一部分。

# xslt - 无法使用 XSLT 在 IE 中将 rss 提要显示为 HTML

> ID：15462636
> 
> 赞同：0
> 
> 时间：2013-03-17T15:38:42.900
> 
> 标签：xslt, xslt-2.0, atom-feed

我创建了一个`.xsl`文件来转换原子提要，以便在浏览器中友好地查看。在 Chrome 中查看时效果很好，但 IE (9.0.811) 样式表被忽略。

我的问题是：我可以改变什么，以便 Internet Explorer 处理样式表，就像它处理 Chrome 一样？

示例原子文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" href="/css/atom.xsl"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <title><![CDATA[A title here]]></title>
    <subtitle><![CDATA[A CDATA description here.]]></subtitle>
    <link href="http://www.site.com/channel" title="a title" rel="alternate" type="text/html" hreflang="en" />
    <link href="http://www.site.com/channel/atom" rel="self" type="application/rss+xml" />
    <id>http://www.site.com/channel</id>
    <rights>All content &#xA9; 2006-2013 Site Name unless otherwise noted. All rights reserved.</rights>
    <updated>2011-12-18T20:34:31Z</updated>
    <category term="Domain: Cat/Subcat" label="Heirarchy Label" />
    <author>
            <name>Editor's Desk</name>
            <email>editors@site.com</email>
            <uri>http://www.site.com/members/username</uri>
    </author>
    <logo>http://www.site.com/img/logo.gif</logo>
    <entry>
        <title><![CDATA[Some CDATA here]]></title>
        <link href="http://www.site.com/channel/article-name" title="Article Name" rel="alternate" type="text/html" hreflang="en" />
        <id>http://www.site.com/channel/article-name</id>
        <content type="html"><![CDATA[<h3>New Post - Title</h3><p>A new post has been published titled "<a href="http://www.site.com/channel/article-name" title="Article Title">Article Title</a>".</p><p>Click the link above to go to the full biography and to view other user's ratings and comments.</p><p>Article posted in: <i>section -> subsection -> subcat</i>.</p>]]></content>
        <author>
            <name>Editor's Desk</name>
            <email>editors@site.com</email>
            <uri>http://www.site.com/members/username</uri>
        </author>
        <category term="Domain: Cat/Subcat" label="text label here" />
        <rights>All content &#xA9; 2006-2013 Site Name unless otherwise noted. All rights reserved.</rights>
        <published>2011-12-18T20:34:31Z</published>
        <updated>2011-12-18T20:34:31Z</updated>
    </entry> 
```

以及该文件的相关摘录`.xsl`：

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="2.0" xmlns:html="http://www.w3.org/TR/REC-html40" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:atom="http://www.w3.org/2005/Atom">
    <xsl:output method="html" version="1.0" encoding="UTF-8" indent="yes" />
    <xsl:template match="/">
        <html xmlns="http://www.w3.org/1999/xhtml">
            <head>
                <title>
                    <xsl:value-of select="atom:feed/atom:title"/>
                </title>
                <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
                <link rel="stylesheet" href="/css/style.css" />
            </head>
            <body>
                <div id="container">

                    <xsl:variable name="feed-title">
                        <xsl:value-of select="atom:feed/atom:title" />
                    </xsl:variable>
                    <xsl:variable name="feed-uri">
                        <xsl:value-of select="atom:feed/atom:link[2]/@href" />
                    </xsl:variable>
                    <xsl:variable name="web-uri">
                        <xsl:value-of select="atom:feed/atom:link[1]/@href" />
                    </xsl:variable>

                    <h1>Atom Feed - <xsl:value-of select="atom:feed/atom:title" /></h1>
                    <p><xsl:value-of select="atom:feed/atom:subtitle" /></p>
                    <p><a href="{$feed-uri}"><img src="/img/i/atom-feed.png" alt="{$feed-title}" /></a> - <a href="{$feed-uri}"><xsl:value-of select="atom:feed/atom:title" /></a><br /><xsl:value-of select="feed/link[1]/@href" /></p>

                    <p>To subscribe to this RSS feed:</p>
                    <ul>
                        <li>Drag the orange RSS button or text link above into your news reader</li>
                        <li>Cut and paste this page's URL into your news reader</li>
                    </ul>
                    <p>Alternatively, you can <a title="{$feed-title}" href="{$web-uri}">view the actual online version</a> of this content.</p>

                </div>
                <div id="footer">
                    <xsl:value-of select="atom:feed/atom:rights" />
                </div>
            </body>
        </html>
    </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T16:36:57.130

这可能是因为您的样式表是 XSLT2.0，但 Microsoft 不支持，因此 IE 也不支持。我在您的 XSLT 示例中看不到任何需要 XSLT2.0 的内容，因此也许您可以尝试将样式表的版本设置为 1.0 而不是 2.0。

```
<xsl:stylesheet version="1.0" 
     xmlns:html="http://www.w3.org/TR/REC-html40" 
     xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
     xmlns:atom="http://www.w3.org/2005/Atom"> 
```

此外，您可能想尝试将 xsl:output 元素的“版本”属性更改为 4.0，而不是 1.0。

```
<xsl:output method="html" version="4.0" encoding="UTF-8" indent="yes" /> 
```

编辑：实际上，这可能是因为 IE7.0 及更高版本中的默认行为。进入工具 -> Internet 选项 -> 内容 -> 设置（用于提要和网页快讯），您应该会看到**“打开提要阅读视图**”选项。尝试取消勾选，然后重新启动 IE，看看是否有效。

# excel - 在共享点中查看嵌入在 Excel 中的交互式对象

> ID：15462638
> 
> 赞同：0
> 
> 时间：2013-03-17T15:38:56.157
> 
> 标签：excel, sharepoint

我想创建出现在通过共享点查看的 excel 文件中的交互式对象。我被告知我无法使用 VBA。我可以使用哪些替代品？请注意通过共享点查看的部分。

非常感谢您提供的任何帮助

姆霍普科

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T09:18:28.507

没有任何。通过 SharePoint 显示的 Excel 文件呈现为 HTML 表格，因此无法使用 VBA。

在 Excel 中打开文件以进行交互，否则 Excel 不是正确的技术。

# database - Qt ODBC - 无法出错

> ID：15462644
> 
> 赞同：2
> 
> 时间：2013-03-17T15:39:32.320
> 
> 标签：database, linux, qt, odbc, unixodbc

我正在尝试在 Linux 中使用 QT 打开 MS Access db 文件。所以，我已经为 qt 安装了 odbc 插件：

```
sudo apt-get install libqt4-sql-odbc 
```

现在有2个文件`qt4/plugins/sqldrivers`目录：**libqodbc.so & libqsqlite.so**

所以，我尝试在我的项目中使用 ODBC 插件。有连接功能：

```
bool createConnection()
{
    QSqlDatabase db = QSqlDatabase::addDatabase("QODBC");
    db.setDatabaseName("Driver={Microsoft Access Driver (*.mdb, *.accdb)};DSN='';DBQ=/home/user/personal_base.mdb");
    if (!db.open()) {
        QMessageBox::warning(0, QObject::tr("Database Error"), db.lastError().text());
        return false;
    }
    return true;
} 
```

但应用程序显示错误：

```
[unixODBC][Driver Manager]Data source name not found, and no default driver specified QODBC3: Unale to connect 
```

我应该如何解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T09:27:47.063

对 setDatabaseName 的调用以 ODBC 函数 SQLDriverConnect 结束。SQLDriverConnect 定义了许多属性，您可以设置这些属性来声明您正在使用的 ODBC 驱动程序以及如何使用它，例如 DRIVER。您告诉 unixODBC 驱动程序管理器加载驱动程序“Microsoft Access Driver (*.mdb, *.accdb)”，但它找不到该驱动程序。

在 unixODBC 中，驱动程序通常在 odbcinst.ini 文件中定义，您通常可以使用命令“odbcinst -j”找到该文件。你会发现[这篇文章](http://www.easysoft.com/developer/interfaces/odbc/linux.html)很有用。

您不太可能拥有如您所显示的那样命名的 Microsoft Access 驱动程序，因为这通常是仅在 Windows 上可用的 MS Access 驱动程序的名称。

据我所知，只有 2 种方法可以使用 ODBC 直接从 Linux 访问 MS Access DB 1) [mdbtools](http://mdbtools.sourceforge.net/)（旧且不完整但免费） 2) [Easysoft MS Access ODBC 驱动程序](http://www.easysoft.com/products/data_access/odbc-access-driver/index.html)，它是一个完整的 ODBC 驱动程序，但不是免费的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-28T14:06:24.463

除了我使用的是 Windows 之外，我的项目也遇到了同样的问题。我认为这会对您有所帮助：只需将您的驱动程序更改为此代码（取自 QT 网站）：

```
db.setDatabaseName("DRIVER={Microsoft Access Driver (*.mdb)};FIL={MS Access};DBQ=myaccessfile.mdb"); 
```

# python - 修改 Python Tkinter 中的默认字体

> ID：15462647
> 
> 赞同：35
> 
> 时间：2013-03-17T15:39:43.163
> 
> 标签：python, python-2.7, tkinter

我正在使用 Tkinter 在 Python2.7 中开发 GUI，但我遇到了一个烦人的问题。

如果可能的话，我想定义所有小部件使用的默认字体。此行仅修改 Entry 或 ComboBox 中使用的字体：

```
root.option_add("*Font", "courier 10") 
```

但不是例如复选框的标签。

我发现预定义的字体存在“TkDefaultFont”，但我无法更改其配置：

```
print tkFont.Font(font='TkDefaultFont').configure()
tkFont.Font(font='TkDefaultFont').config(family='Helvetica', size=20)
tk.TkDefaultFont = tkFont.Font(family="Helvetica",size=36,weight="bold")
print tkFont.Font(font='TkDefaultFont').configure() 
```

返回 ：

> {'family': 'DejaVu Sans', 'weight': 'normal', 'slant': 'roman', 'overstrike': 0, 'underline': 0, 'size': -12} {'family': 'DejaVu Sans', 'weight': 'normal', 'slant': 'roman', 'overstrike': 0, 'underline': 0, 'size': -12}

（没有错误，但没有任何改变！！）

我做错了什么？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-03-17T16:58:02.660

Tkinter 有几种内置字体—— `TkDefaultFont`, `TkTextFont`,`TkFixedFont`等。这些都是所谓的“命名字体”。它们非常强大——改变其中之一，所有使用它们的小部件也会改变。

要更改其中一种字体，请获取它的句柄，然后使用该`configure`方法进行更改。例如，要将大小更改`TkDefaultFont`为 48，您可以这样做：

```
default_font = tkFont.nametofont("TkDefaultFont")
default_font.configure(size=48) 
```

就是这样。你不需要做任何其他事情——所有使用`TkDefaultFont`的东西都会立即注意到变化。

在您的问题中，您暗示您希望`TkDefaultFont`字体被所有东西使用。为此，您可以使用`option_add`如下所示：

```
root.option_add("*Font", default_font) 
```

但是请注意，`option_add`这只影响在您调用*后*`option_add`创建的小部件，因此您需要在创建任何其他小部件之前执行此操作。

另请注意，`option_add`如果您不想先获取字体实例（即：），则可以将字体名称指定给`root.option_add("*Font", "TkDefaultFont")`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-02-09T21:07:35.630

警告：虽然问题涉及 Py2.7，但我的答案是针对 Py3。概念完全相同。但不是`tkinter.font`,而是`tkFont`用于 Py2 等。

如果要更改默认字体或任何命名字体，则必须通过以下方式访问字体对象`nametofont()`：

```
def_font = tkinter.font.nametofont("TkDefaultFont") 
```

然后配置返回的对象，比如

```
def_font.config(size=24) 
```

你打电话时

```
myfont = tkinter.font.Font(font="TkDefaultFont") 
```

您实际上是在创建一个具有相同属性的新命名字体。为了帮助展示这一点：

`str(def_font)`给出“TkDefaultFont”，并且

`str(myfont)`给出“font1”

哎呀..忘了提...你问你做错了什么。其中一件事是在您的第二行中，您创建然后配置一个新的命名字体，但您没有将其捕获到变量中。如果您捕获它，您可以使用该命名字体。但这仍然不会修改默认命名字体。您必须`nametofont()`按照上述说明使用才能完成此操作。

# java - 索引越界异常java

> ID：15462649
> 
> 赞同：5
> 
> 时间：2013-03-17T15:40:02.943
> 
> 标签：java, debugging, exception, indexoutofboundsexception

所以错误信息是这样的：

```
Exception in thread "main" java.lang.IndexOutOfBoundsException: Index: 0, Size: 0
at java.util.ArrayList.rangeCheck(Unknown Source)
at java.util.ArrayList.get(Unknown Source)
at FcfsScheduler.sortArrival(FcfsScheduler.java:77)
at FcfsScheduler.computeSchedule(FcfsScheduler.java:30)
at ScheduleDisks.main(ScheduleDisks.java:33) 
```

我的代码为

```
public void sortArrival(List<Request> r)
{
    int pointer = 0;
    int sProof = 0;
    while(true)
    {
        if(r.get(pointer).getArrivalTime()<r.get(pointer+1).getArrivalTime())
        {
            Request r1 = r.get(pointer);
            Request r2 = r.get(pointer+1);
            r.set(pointer, r2);
            r.set(pointer+1, r1);
        }
        else
        {
            sProof++;
        }
        ++pointer;
        if(pointer>r.size()-2)
        {
            pointer=0;
            sProof=0;
        }
        if(sProof>=r.size()-2)
        {
            break;
        }
    }
} 
```

错误在

```
if(r.get(pointer).getArrivalTime()<r.get(pointer+1).getArrivalTime()) 
```

但我认为在指针递增后用代码检查数组索引是否正常。它是数组越界异常还是其他？通常，错误是`ArrayIndexOutOfBoundsException`当它是数组时。这里似乎有什么问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-17T15:42:15.803

> java.lang.IndexOutOfBoundsException：索引：0，大小：0

数组列表为空。它不包含任何元素。

```
Index: 0, Size: 0. 
```

你正在尝试访问它。所以你得到`IndexOutOfBoundsException`.

```
if(r.size() == 0) && r.size() < pointer + 1)   //If ArrayList size is zero then simply return from method.
  return; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-17T15:44:58.937

您正在传入一个空数组。您应该对输入进行一些验证

```
if (r == null || r.size()==0){
   throw new RuntimeException("Invalid ArrayList");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T16:42:19.597

您的数组大小为 0，您应该正确初始化它以便对其进行迭代。

# http - Content-Range 用于恢复未知长度的文件

> ID：15462654
> 
> 赞同：9
> 
> 时间：2013-03-17T15:40:22.047
> 
> 标签：http, resume, chunked-encoding, http-range

我从已经压缩的现有材料（使用 Node）**即时**创建了一个长度未知的 ZIP 存档。在 ZIP 存档中，文件只是被存储；ZIP 仅用于拥有一个容器。这就是缓存创建的 ZIP 文件没有意义的原因 - 不涉及真正的计算。

到目前为止，好的。现在我想**允许恢复下载**，并且我正在阅读有关 Accept-Range、Range 和 Content-Range HTTP 标头的信息。下载损坏的客户端会要求一个开放范围，例如：`Range: bytes=8000000-`.

我该如何回答？根据[RFC 2616 § 14.16](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.16) ，我的答案必须包含一个 Content-Range 标头，并且在那里：

> 与 byte-ranges-specifier 值（参见第 14.35.1 节）不同，byte-range-resp-spec 必须只指定一个范围，并且必须包含范围的第一个和最后一个字节的绝对字节位置。

所以我不能只发送“从位置 X 开始的所有内容”，我还必须指定发送的最后一个字节——要么只发送已知大小的一部分，要么提前计算长度。这两种想法都不适合我的情况。还有其他可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T21:38:36.260

回答自己：看起来我必须在（1）未知长度的文件的分块编码或（2）知道其内容长度（或至少当前部分的大小）之间进行选择，以允许恢复下载（以及进度条）。

我可以忍受 - 对于我的每个 ZIP 文件，长度都是相同的，所以我可以将它存储在某个地方并重新用于后续下载。我很惊讶 HTTP 协议不允许恢复未知长度的下载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-09T17:13:56.737

响应“multipart/byteranges”内容类型，包括每个部分的内容范围字段。

推理：

1.  回复带有“Range”标头的请求时，成功的部分响应应报告 206 HTTP 状态代码（[14.35.1 字节范围部分](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.35.1)）

2.  206 响应建议“内容范围”标头或“多部分/字节范围”内容类型（[10.2.7 206 部分内容](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.2.7)）

3.  “Content-Range”标头不能添加到响应中，因为它不允许省略结束位置，所以唯一的方法是使用“multipart/byteranges”Content-Type

# c++ - 在 C++ 中对包含 double 类型数字的数组进行排序的最快方法是什么？

> ID：15462657
> 
> 赞同：-1
> 
> 时间：2013-03-17T15:40:25.850
> 
> 标签：c++, sorting

在 C++ 中对包含 double 类型数字的数组进行排序的最快方法是什么？我有两种类型的数组，第一种长度为 20，第二种长度为 5000，数组长度对哪种算法最快有影响吗？长度为 5000 的数组平均包含 28 个不同的值。

[http://www.codeproject.com/Articles/38381/STL-Sort-Comparison-Function](http://www.codeproject.com/Articles/38381/STL-Sort-Comparison-Function)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T17:36:23.377

对于第一个问题：如果您的数组只有一小组唯一值（如您所说的 28），您可能需要考虑某种计数排序（口味：基数、鸽笼、桶）。如果您知道数组内容的硬性限制和范围，您可能会做一些好事。

但如前所述，对于这么小的数组，你可能对 std::sort 很好，除非你有很多 5000 元素的数组要排序。

对于第二个问题：长度问题（见天空的答案）。O(n log n) 是任何正常排序所能做的最好的。O(n^2) 通常是最坏的情况。O(n^2) 意味着在最坏的情况下，您的 20 元素数组将需要对应于 20^2 (=400) 次操作的时间，而您的 5000 数组时间对应于 5000^2 (=2500 万) 次操作。如您所见，在这种情况下，更大的数组意味着更多的时间。对于您的情况和 O(n log n) 算法，5000 数组将需要对应于 5000 log 5000 (=18500) 操作的时间。

一个操作是什么以及它需要多长时间取决于特定的实现，并且通常与比较无关（因此被 Ordo 表示法忽略）。当数组大小足够大时，O(n log n) 算法的慢速实现仍然比 O(n^2) 算法的快速实现快。但是对于像 20 个元素这样的小数组，一个好的低开销实现最重要。400 个快速操作将比 26 个慢操作快。对 5000 个阵列进行相同的比较表明，2500 万次快速操作仍然不会比 18500 次慢速操作快。

另一个因素是数组的内容。一些算法，如插入排序，在几乎正确顺序的数组上特别快（接近 O(n)），而在随机输入上却很差 O(n^2)。

通过利用数组内容的预定义（已知）限制/范围（因此不归类为正常排序），计数排序可以接近 O(n)，也就是说，时间与元素的数量成正比。参见维基百科。

快乐的研究！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T15:44:28.700

我有所作为，但你最好的选择是使用 std::sort 。它根据输入大小在内部切换认为最佳的排序算法。

参见维基百科参考：

*   [https://en.wikipedia.org/wiki/Sort_%28C++%29](https://en.wikipedia.org/wiki/Sort_%28C++%29)
*   [https://en.wikipedia.org/wiki/Introsort](https://en.wikipedia.org/wiki/Introsort)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-17T15:47:12.793

您可能想要搜索快速排序、归并排序、插入排序或冒泡排序等排序算法。

排序很大程度上取决于要排序的项目的数量，这可以从排序算法的符号“大 O 符号”中看出。不同值和数据类型的平均数量通常不会在运行时产生足够的影响。（冒泡排序）算法的`O(n^2)`复杂性是您拥有的元素数量的平方，它告诉您它的时间与要排序的项目数量大致成二次增长。快速排序具有`O(n log n)`复杂性，使其成为最快的排序方法之一。

冒泡排序是最容易实现且运行时最慢的。

编辑：正如评论所说，无论你使用什么算法，只有 5000 个值的短数组并没有太大的区别，只要它不像 Bogosort。

# android - Android：用两个元素制作背景

> ID：15462658
> 
> 赞同：2
> 
> 时间：2013-03-17T15:40:27.763
> 
> 标签：android, xml, android-layout, background

这个问题可能很简单，但我真的不知道要搜索什么，因此找不到令人满意的答案。

我想为我的应用程序的主屏幕制作背景。背景必须只包含一种颜色，并且在右下角，我想要一个我指定高度和宽度的 png 图像。

你怎么做到这一点？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T15:43:33.043

1.  创建一个位图（根据我的理解，从代码中，因为您需要在运行时指定宽度和高度），它在背景中有颜色，在角落有另一个位图。
2.  将此新位图设置为您的视图的背景`findViewById(R.id.layout_root).setBackgroundDrawable(yourComposedBitmap)`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T15:48:16.653

使用 9 个补丁图像。在图像的顶部/左侧制作一个小的彩色边框，并使该边框可拉伸。

例如，在这张图片中：

![测试 9 补丁](../Images/5b6dda45050f3a17a77a8a3e31290532.png)

心是你静止的形象。蓝色是纯色背景色。您在左/上角看到的黑色像素定义了拉伸区域，这告诉它拉伸那些蓝色像素以填充剩余区域。在这个尺寸下有点难以看到，但如果你保存图像并仔细观察它，你会看得更清楚。

有关 9 补丁的更多信息，请查看[Android 文档](http://developer.android.com/guide/topics/graphics/2d-graphics.html#nine-patch)。只是不要忘记将文件扩展名从`.png`更改`.9.png`为使其工作。

# specflow - 如何过滤表中的 CreateSet

> ID：15462664
> 
> 赞同：1
> 
> 时间：2013-03-17T15:41:09.680
> 
> 标签：specflow

我正在尝试创建一个测试，它需要一个表，解析表以创建表的子集。使用 CreateSet 来使用我现有的类型。

我遇到的问题是我想根据传递的表值创建不同的列表。

举些例子：

> 那么：有价值观
> 
> 名称|其他信息 |isApple|isOrange|isMango|
> 
> ex1 |一些信息，其他信息|真|假|假|
> 
> ex2 |一些信息，其他信息|真|真|真|

我想使用 CreateSet 根据这些标志创建表的子集列表。

就像是

```
List<apples> apples = table.CreateSet<apples>(only get apples).ToList(); 
```

但我尝试过的每一个 liq 语句都失败了。我如何在这里做“只得到苹果”部分？

**注意：我想使用的类型也没有这些标识符标志，这些只是在表中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T07:52:19.317

简而言之，你不能。您*只放 get apples*的参数的智能感知显示它是`Func<T> methodToCreateEachInstance`.

但这并不意味着没有其他方法

```
Feature: SpecFlowFeature1
In order to help people on StackOverflow
As a helpful soul
I want to discover how to use CreateSet

Scenario: Retreive and filter a table
  Given I have some values:
      | name | otherinfo          | isApple | isOrange | isMango |
      | ex1  | someinfo,otherinfo | true    | false    | false   |
      | ex2  | someinfo,otherinfo | true    | true     | true    |
  Then MyApples should not be empty 
```

在你的绑定中

```
//using TechTalk.SpecFlow.Assist;
using Should;

public class Example
{
    public string name { get; set; }
    public string otherInfo { get; set; }
}

[Binding]
public class StepBindings
{
    public IEnumerable<Example> MyApples { get; set; }

    [Given(@"I have some values:")]
    public void GivenIHaveSomeValues(Table table)
    {
        var onlyApples = table.Rows.Where(x => bool.Parse(x["isApple"]));

        MyApples = from x in onlyApples
                   select new Example
                   {
                       name = x["name"],
                       otherInfo = x["otherInfo"]
                   };
    }

    [Then(@"MyApples should not be empty")]
    public void ThenMyApplesShouldNotBeEmpty()
    {
        MyApples.ShouldNotBeNull();
        MyApples.ShouldNotBeEmpty();
    }

} 
```

# jquery - 遍历 Handlebars 中的子元素

> ID：15462667
> 
> 赞同：0
> 
> 时间：2013-03-17T15:41:29.493
> 
> 标签：jquery, handlebars.js

例如，我有以下数据集

```
 dataset = {header: ' header' } 

  dateline = { content: 'list of dates' } 

  monday = [
        { food:'teacake' , drink:'orange' } 
        ]

  tuesday = [
        { food:'eggs' , drink:'beer' } 
        ]    

  dateline.monday = monday
  dateline.tuesday = tuesday
  dataset.dateline = dateline 
```

我想要做的是使用把手来运行，我认为这可以使用 child 来完成。

```
 <script id="mwl707" type="text/x-handlebars-template">        
  {{#each dateline.children }}
    <span>{{food}} : {{drink}}</span>
  {{/each}}
  </script> 
```

但我不能让它工作，有什么帮助吗？ [JSfiddle](http://jsfiddle.net/mwl707/AgCBb/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T16:09:37.913

我更新了你的小提琴，所以它可以工作：http: [//jsfiddle.net/AgCBb/1/](http://jsfiddle.net/AgCBb/1/)

您不应该在`[]`括号中再次将您的对象包装在周一和周二，这是一个不必要的额外层次来解析。只需在您的父对象中创建一个 days 数组，因为数组在 Handlebars 中更容易解析。

```
dataset = {header: ' header' } //
dateline = { content: 'list of dates' } 
monday  =  { "food":"teacake" , "drink":"orange" }
tuesday = { "food":"eggs" , "drink":"beer" }

dateline.days = []
dateline.days.push(monday)
dateline.days.push(tuesday) 
```

然后你可以像这样解析它：

```
{{#dateline.days }}
  <span>{{food}} : {{drink}}</span>
{{/dateline.days}} 
```

还要确保将有效的 JSON 传递给模板。如果不确定，您可以使用[http://jsonlint.com/检查您的 JSON](http://jsonlint.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T15:57:05.457

Handlebars 不提供迭代对象属性的内置方法。请参阅[**Handlebars/Mustache - 是否有内置的方法来循环遍历对象的属性？**](https://stackoverflow.com/questions/9058774/handlebars-mustache-is-there-a-built-in-way-to-loop-through-the-properties-of). 您可以改为以 Handlebars 支持的方式格式化数据，例如普通数组。我不会在这里复制代码，它在链接的帖子中。

此外，您不应该将`<script>`标签放在小提琴的 javascript 中。请改用该`External Resources`部分。

# c++ - 为什么我会在此代码中收到 WSAENOTSOCK 错误？

> ID：15462669
> 
> 赞同：0
> 
> 时间：2013-03-17T15:41:37.233
> 
> 标签：c++, windows, oop, winapi, winsock

这是 Main.cpp 直到发生错误的地方：

```
int WINAPI WinMain(HINSTANCE hInst, HINSTANCE hPrevInst, LPSTR lpCmdLine, int nShowCmd)
{
    if(SUCCEEDED(CoInitialize(NULL)))
    {
        {
            Game game;

            game.CreateRessources(hInst);

            game.ShowMainScreen();

            game.pWinsock->Initialize(game.Getm_hWnd()); 
```

game.Getm_hWnd 返回私有 HWND m_hWnd。

这是游戏::CreateRessources(HINSTANCE)：

```
void Game::CreateRessources(HINSTANCE hInst)
{   
    m_hWnd=CreateWindowClass(hInst);

    pMessageLog=CreateMessageLog();
    pD2DResources=CreateD2DResources(m_hWnd);
    pWinsock=CreateWinsock();

} 
```

有 CreateWinsock()：

```
Winsock* CreateWinsock()
{
    Winsock* pWinsock=new Winsock;

    return pWinsock;
} 
```

温索克::温索克：

> Winsock::Winsock() : 套接字(NULL) { }

最后，Winsock::Initialize(HWND)：

```
void Winsock::Initialize(HWND hwnd)
{
    WSADATA wsaDat;

    SendMessage(hwnd, LOG_ADD, NULL, (LPARAM)L"Initializing winsock... ");

    int nResult = WSAStartup(MAKEWORD(2,2),&wsaDat);
    if(nResult!=0)
    {
        MessageBox(NULL,"Winsock initialization failed","Critical error",MB_ICONERROR);
        SendMessage(hwnd,WM_DESTROY,NULL,NULL);
    }

    SendMessage(hwnd, LOG_ADD, NULL, (LPARAM)L"Done!\nCreating a socket... ");

    Socket=socket(AF_INET,SOCK_STREAM,IPPROTO_TCP);
    if(Socket==INVALID_SOCKET)
    {
        MessageBox(NULL,"Socket Creation failed","Critical error",MB_ICONERROR);
        SendMessage(hwnd,WM_DESTROY,NULL,NULL);
    }

    SendMessage(hwnd, LOG_ADD, NULL, (LPARAM)L"Done!\nRequesting Windows message-based notification of network events... ");

    nResult=WSAAsyncSelect(Socket,hwnd,WM_SOCKET,(FD_CLOSE|FD_READ));
    if(nResult)
    {
        if(WSAGetLastError()==WSAENOTSOCK)
            MessageBox(hwnd,"WSAENOTSOCK Error!","Error",NULL);
        MessageBox(NULL,"WSAAsyncSelect failed","Critical error",MB_ICONERROR);
        SendMessage(hwnd,WM_DESTROY,NULL,NULL);
    }

    /* More code */
} 
```

if(WSAGetLastError()==WSAENOTSOCK) 行返回 true。WSAENOTSOCK 的含义如下：

“非套接字上的套接字操作。尝试对非套接字进行操作。套接字句柄参数未引用有效套接字，或者对于 select，fd_set 的成员无效。”

编辑：有我的 Winsock 课程：

```
class Winsock{
public:
    Winsock();

    void Initialize(HWND);

    void ReceiveMsg();

private:
    SOCKET Socket;
    static const char* server;
    static const int port;
}; 
```

据我所知， Socket 是一个套接字，并且是一个有效的。我怎么会收到那个错误呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T00:55:33.500

您`Socket`在构造函数中将成员初始化为错误的值`Winsock`-`NULL`而不是`INVALID_SOCKET`. 它们不是相同的值。

`WSAAsyncSelect()`无论`socket()`成功还是失败，您都在调用。如果事情失败，您将显示错误消息，但当它们失败时您不会停止您的代码。您需要清理错误处理。

附带说明一下，您需要使用而不是手动`DestroyWindow()`发送消息。`WM_DESTROY`

试试这个：

```
class Winsock
{
public:
    Winsock();

    void Initialize(HWND);

    void ReceiveMsg();

private:
    SOCKET m_Socket;
    ...
};

Winsock::Winsock()
    : m_Socket(INVALID_SOCKET)
{
}

void Winsock::Initialize(HWND hwnd)
{
    SendMessage(hwnd, LOG_ADD, 0, (LPARAM)L"Initializing winsock... ");

    WSADATA wsaDat = {0};
    if (WSAStartup(MAKEWORD(2,2), &wsaDat) != 0)
    {
        SendMessage(hwnd, LOG_ADD, 0, (LPARAM)L"Winsock initialization failed");
        return;
    }

    SendMessage(hwnd, LOG_ADD, 0, (LPARAM)L"Done!\nCreating a socket... ");

    m_Socket = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP);
    if (m_Socket == INVALID_SOCKET)
    {
        SendMessage(hwnd, LOG_ADD, 0, (LPARAM)L"Socket Creation failed");
        return;
    }

    SendMessage(hwnd, LOG_ADD, 0, (LPARAM)L"Done!\nRequesting Windows message-based notification of network events... ");

    if (WSAAsyncSelect(m_Socket, hwnd, WM_SOCKET, FD_CLOSE|FD_READ) != 0)
    {
        SendMessage(hwnd, LOG_ADD, 0, (LPARAM)L"WSAAsyncSelect failed");
        return;
    }

    /* More code */
} 
```

.

```
int WINAPI WinMain(HINSTANCE hInst, HINSTANCE hPrevInst, LPSTR lpCmdLine, int nShowCmd)
{
    if(SUCCEEDED(CoInitialize(NULL)))
    {
        Game game;
        game.CreateResources(hInst);
        game.ShowMainScreen();
        ...
    }
}

void Game::CreateResources(HINSTANCE hInst)
{   
    m_hWnd = CreateWindowClass(hInst);
    pMessageLog = CreateMessageLog();
    pD2DResources = CreateD2DResources(m_hWnd);
    pWinsock = CreateWinsock();
    pWinsock->Initialize(m_hWnd);
} 
```

# ruby - 哪个是 Ruby 已弃用的 proc？

> ID：15462674
> 
> 赞同：1
> 
> 时间：2013-03-17T15:42:07.347
> 
> 标签：ruby, lambda, proc, ruby-1.8

在 Dave Thomas 与 Chad Fowler 和 Andy Hunt 所著的*Programming Ruby: The Pragmatic Programmers Guide*一书中，关于`Proc`s 的创建，有一个脚注指出：

> “实际上还有第三个，proc，但它实际上已被弃用。”

我找不到这是哪种方式。我知道以下创建方法`Proc`：

1

```
b = lambda { | msg | puts "msg: #{msg}" }
b.call("hi") 
```

2

```
def create_block_object(&block)
  block
end
b = create_block_object{ |msg| puts "msg: #{msg}" }
b.call("hello") 
```

3

```
b = Proc.new { |msg| puts "msg: #{msg}"}
b.call("hey") 
```

我想知道第四种方式，如果有人能给我答案，我会很高兴。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T15:53:34.673

这是 lambda 的另一种语法：

```
b = ->(msg) { puts "msg: #{msg}" }
b.call("hi") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T16:03:10.263

您所指的书是关于 Ruby 1.8 的。

在那个版本的 Ruby 中，`lambda`实际上`procs`是别名，`Proc`而是不同的野兽。这显然是一种误导，这就是为什么不建议您使用`proc`as in

```
prc = proc {|x, y| puts x + y} 
```

此语法被认为已弃用，建议在这种情况下使用 lambda。

从 1.9 开始，这对于更高版本的 Ruby 不再有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-06T18:49:26.513

prc = 过程 {|x| x*x} 已折旧。

这种语法主要用于 Ruby-1.8.7 版本。

# c# - 如何在 C# 的异常中获取错误号而不是错误消息？

> ID：15462675
> 
> 赞同：4
> 
> 时间：2013-03-17T15:42:08.500
> 
> 标签：c#, exception, exception-handling

有没有办法我可以获得相应的错误代码`Exceptions`？我需要抛出的异常错误代码而不是它的消息，以便我根据错误代码向用户显示正确的消息。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-17T15:45:38.770

如果您正在寻找 win32 错误代码，可以在[`Win32Exception`](http://msdn.microsoft.com/en-us/library/system.componentmodel.win32exception.aspx)课堂上找到

```
catch (Win32Exception e)
{  
    Console.WriteLine("ErrorCode: {0}", e.ErrorCode);
} 
```

对于普通的旧 CLR 异常，没有整数错误代码。

鉴于您描述的问题，我会使用**millimoose**的解决方案来获取每种异常类型的资源字符串。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-17T15:47:34.290

异常的全部意义在于它们提供了比错误代码更丰富的信息。默认情况下，他们没有，也不需要一个。如果您喜欢使用错误代码，您可以使用您自己的异常基类，您可以从中派生所有异常：

```
public abstract class MyExceptionBase : Exception 
{
    public int ErrorCode { get; set; }
    // ...
} 
```

这么说，我就不打扰了。我个人使用它们的类型名称将异常映射到错误消息：

```
ResourceManager errorMessages = ...;
errorMessages.GetString(ex.GetType().FullName); 
```

（您还可以创建更灵活的方案，例如使资源格式化字符串并将异常属性插入其中。）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-17T15:47:40.450

对于升级为托管异常的 COM 异常，您将能够从属性中检索*“错误代码” ，如下所示：*[`HResult`](http://msdn.microsoft.com/en-us/library/system.exception.hresult.aspx)

```
try {
    // code goes here
} catch(System.IO.FileNotFoundException ex) {
    Console.WriteLine(
        String.Format("(HRESULT:0x{1:X8}) {0}",
                      ex.Message,
                      ex.HResult)
    );
} 
```

然而，并非所有异常都会有一个有意义的 HResult 集。

* * *

对于 .NET 3.0、3.5 和 4.0，您必须使用反射来获取`HResult`标记为 的属性的值`protected`。

# python - 如何使用 IntelliJ IDEA 12 Ultimate Edition 创建烧瓶项目？

> ID：15462680
> 
> 赞同：6
> 
> 时间：2013-03-17T15:42:30.607
> 
> 标签：python, intellij-idea, flask

我有`IntelliJ IDEA 12 Ultimate Edition`并且我在 Youtube 上观看[了这个](http://www.youtube.com/watch?v=jaFEODzG7B8)视频，他们展示了使用 PyCharm 2.6 创建 Flask

据我了解，Python 插件提供与 PyCharm 相同的功能，因为它们是从相同的代码库构建的。

如何使用 IDEA 12 Ultimate Edition 创建烧瓶项目？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2017-08-15T17:36:42.243

为了澄清 wmora 的答案，在 IntelliJ IDEA 中，安装 Python 插件与拥有 PyCharm 并不 100% 相同，区别是 Jetbrains 似乎一直在努力解决的问题（例如，通常文档指的是特定于语言的 IDE 而不是 IDEA , 和 menu-items/commands/etc. 不一样）。

使用 IDEA，如果安装了 Python 插件，您可以创建一个新项目并选择“Python”作为语言。这可能会显示一些额外的库和框架，例如“Django”、“Google App Engine (Python)”和“SQL Support”(???)，**但特别是 NOT Flask**。但是，*下一个屏幕*有“从模板创建项目”选项，选中后，您应该能够选择“Flask 项目”模板。

那就是它默默失败的时候（根据 Polyakoff 的评论）。编辑器甚至没有打开一个窗口。查看错误：[https ://youtrack.jetbrains.com/issue/PY-25666](https://youtrack.jetbrains.com/issue/PY-25666)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-27T02:04:23.097

如果您已经安装了 Python 插件，则在创建新项目时，“Python”下将提供“Flask Project”选项。

我在创建 Flask 项目之前创建了一个 virtualenv，并将其设置为项目的 SDK。

希望能帮助到你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-09T15:56:12.550

可与 2019 年 5 月 28 日构建的 IntelliJ IDEA Ultimate 2019.1.3 配合使用。

# jquery - 如何在 JQM 中弹出后关闭对话框？

> ID：15462681
> 
> 赞同：0
> 
> 时间：2013-03-17T15:42:46.403
> 
> 标签：jquery, jquery-mobile

我正在通过 jQuery Mobile 对话框小部件加载一个页面，如果我在加载的页面中使用弹出消息，我无法在 ios 6.1.2 上弹出后关闭它。这是一个例子：

```
jQuery.post(
    ajax_url+'create',
    {'info': send_values},
    function(result){
        if(result.status){
            //Without this message all works fine
            jQuery('#popup-message').text(result.message).popup('open');
            setTimeout(function(){
                // Tried
                // jQuery('#popup-error').popup('close');
                // jQuery('#popup-message').popup('close');
                // jQuery('.ui-dialog').dialog('close');
                jQuery('#dialog').dialog('close'); //loaded div is with dialog id
            }, 2000);
        }
        else
            showError(result.message);
    },
    'JSON'
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T18:28:27.133

**编辑：**

问题是如何在从**弹出窗口中打开****对话框**后关闭

 **好的，现在我明白了；）

因此，您可以在打开**弹出窗口****后**调用一个事件

 **```
$( ".Selector" ).on( "popupafteropen", function( event, ui ) {} ); 
```

来源：http : [//api.jquerymobile.com/popup/#event-afteropen](http://api.jquerymobile.com/popup/#event-afteropen)

所以你更新的代码应该是：

```
jQuery.post(
ajax_url+'create',
{'info': send_values},
function(result){
    if(result.status){
        //Without this message all works fine
        jQuery('#popup-message').text(result.message).popup('open');
        jQuery('#popup-message').on('popupafteropen', function( event, ui ) {
            setTimeout(function(){
                // Tried
                // jQuery('#popup-error').popup('close');
                // jQuery('#popup-message').popup('close');
                // jQuery('.ui-dialog').dialog('close');
                jQuery('#dialog').dialog('close'); //loaded div is with dialog id
            }, 2000);
        } );
    }
    else
        showError(result.message);
},
'JSON'
) 
```

* * *

**原答案**：

您正在尝试关闭 DIALOG...但是您打开了 POP-UP。

改变：

```
 jQuery('#dialog').dialog('close'); //loaded div is with dialog id 
```

至：

```
 jQuery('#dialog').popup('close'); //loaded div is with dialog id 
```

源代码：http : [//api.jquerymobile.com/popup/#method-close](http://api.jquerymobile.com/popup/#method-close)****

# ruby-on-rails - 为什么 £ 在 IE9 中显示为 A£ 而在 FireFox 中却没有？

> ID：15462690
> 
> 赞同：0
> 
> 时间：2013-03-17T15:43:38.650
> 
> 标签：ruby-on-rails, internet-explorer, firefox

我最近发现了在文本中插入 £ 字符的问题，它在 FireFox 中显示为“£”，但是当我在 IE9 中呈现网页时，它显示为“A£”，并带有重音符号 A？

我遇到问题的具体实例是：

```
<%= link_to "£150-£300", :controller => params[:controller], :action => params[:action], :min_price => 150, :max_price => 300 %> 
```

在 IE9 中，这两个 £ 符号都以“A”为前缀。我已经尝试在其他命令中插入字符`link_to`并且我得到了相同的行为，所以它不是特定于这一行的。

我也刚刚检查过，发现如果我在网站上的任何地方将符号输入纯文本，我也会遇到同样的问题。

过去有没有人遇到过类似的问题/知道补救措施？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T15:48:12.200

`Â£``£`是在 Windows-1252/ISO-8859-1 中被误解的UTF-8 编码。这意味着服务器发送的物理字节以 UTF-8 编码，但浏览器并未使用 UTF-8 对其进行解码。以下是使浏览器以 UTF-8 解释它们的提示。

您需要正确的 Content-Type 标头或至少在 html 中声明它。

```
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"> 
```

请注意，如果您的服务器使用字符集发送正确的 HTTP Content-Type 标头，则将其视为通过 html 标记。

我不了解 Rails，但这应该设置真正的 HTTP 标头：

```
response.headers['Content-Type'] = "text/html; charset=utf-8" 
```

也可能是您已将 IE 中的字符编码显式设置为 Windows-1252，这将使 IE 忽略来自服务器的声明。

# maven - 为什么 Maven 在没有 Servlet 依赖的情况下编译成功？

> ID：15462696
> 
> 赞同：0
> 
> 时间：2013-03-17T15:44:04.773
> 
> 标签：maven, servlets, spring-mvc

我正在编写一个 spring-mvc 应用程序（并学习 spring-mvc）。我没有向 pom.xml 添加 servlet 依赖项。当我运行`mvn compile`or`mvn package`时，它成功完成。是不是应该抛出像“找不到 javax.servlet.http.HttpServlet”这样的异常？它是如何编译的？

mvn 依赖项：列表：

> 以下文件已解决：[INFO]
> aopalliance:aopalliance:jar:1.0:compile [INFO]
> commons-dbcp:commons-dbcp:jar:1.4:compile [INFO]
> commons-pool:commons-pool:jar:1.5。 4: 编译 [INFO]
> log4j:log4j:jar:1.2.17: 编译 [INFO]
> org.codehaus.jackson:jackson-core-asl:jar:1.9.12: 编译 [INFO]
> org.codehaus.jackson:jackson- mapper-asl:jar:1.9.12:compile [INFO]
> org.slf4j:jcl-over-slf4j:jar:1.7.2:compile [INFO]
> org.slf4j:slf4j-api:jar:1.7.2:compile [ INFO]
> org.slf4j:slf4j-log4j12:jar:1.7.2:compile [INFO]
> org.springframework:spring-aop:jar:3.2.1.RELEASE:compile [INFO]
> org.springframework:spring-beans:jar: 3.2.1.RELEASE：编译[INFO]
> org.springframework:spring-context:jar:3.2.1.RELEASE:compile [INFO]
> org.springframework:spring-core:jar:3.2.1.RELEASE:compile [INFO]
> org.springframework:spring-expression:jar: 3.2.1.RELEASE:编译[INFO] org.springframework:spring-jdbc:jar:3.2.1.RELEASE:编译[INFO]
> org.springframework:spring-tx:jar:3.2.1.RELEASE:编译[INFO]
> org.springframework:spring-web:jar:3.2.1.RELEASE:compile [INFO]
> org.springframework:spring-webmvc:jar:3.2.1.RELEASE:compile [INFO]
> postgresql:postgresql:jar:9.2-1002。 jdbc4：编译

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T03:24:58.687

因为，Servlet Api 是 spring-webmvc 的传递依赖。默认情况下，Maven 包含所有传递依赖项。

使用以下命令列出依赖项及其传递依赖项

```
mvn dependency:tree 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T15:59:28.450

因为 servlet API 是 的依赖项`org.springframework:spring-webmvc`，因此是项目的传递依赖项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T04:54:13.520

不完全实现：仍然在您学习 spring-mvc 时，我建议仅在 pom 中保留所需的依赖项，这将告诉您哪个 jar 具有哪组类。

还为 spring 特定的包配置日志记录和调试，这极大地支持了理解流程或可能出现的问题。当我从春天开始时，它对我帮助很大。快乐学习:)

# visual-studio-2010 - 使用 IIS express 和 VS2010 进行 Azure 调试将不再起作用

> ID：15462709
> 
> 赞同：3
> 
> 时间：2013-03-17T15:45:13.167
> 
> 标签：visual-studio-2010, azure, iis-express

我有一个使用 IIS Express 作为本地开发服务器的项目，但是当使用 CTRL+F5 启动项目时，IIS express 将不再启动。我在任务栏上看不到 IIS Express 图标。如果我在没有调试的情况下启动，项目将毫无问题地启动，并且我可以在任务栏上看到图标。

从 %UserProfile%\AppData\Local\dftmp\IISConfiguratorLogs\IISConfigurator.log 文件我看到它是某种超时错误：

```
IISConfigurator Information: 0 : [00007792:00000005, 2012/08/15 20:13:59.67] IIS Express failed to start app pool 'xxxx' within the expected timeout 
```

我还尝试将完整的 IIS 设置为该项目的开发服务器，但我收到以下错误消息。在我的另一个 Azure 项目中，我已将完整的 IIS 设置为开发服务器，它工作正常。

```
There was an error attaching the debugger for the IIS worker process for URL 'xxxx' for role instance 'xxxx'. Unable to start debugging on the web server. See help for common configuration errors. Running the web page outside of the debugger may provide further information. 
```

我的同事可以毫无问题地调试这个项目。感谢所有的帮助！

# java - 嵌套异常是 java.lang.IncompatibleClassChangeError: org/springframework/core/type/classreading/AnnotationMetadataReadingVisitor

> ID：15462718
> 
> 赞同：4
> 
> 时间：2013-03-17T15:46:17.660
> 
> 标签：java, spring

我是 Spring 新手，我需要让一个项目在 JDK7 上使用 Eclipse 成功运行。该项目以前在 JDK6 上运行。

我拥有属于原始项目的所有源文件和 jar。但是当我尝试运行它时，我得到以下异常：

```
org.springframework.beans.factory.BeanDefinitionStoreException: Failed to read candidate component class: file [C:\Users\e\workspace\.metadata\.plugins\org.eclipse.wst.server.core\tmp1\wtpwebapps\DMControl\WEB-INF\classes\com\...\...\...\MyClass.class]; nested exception is java.lang.IncompatibleClassChangeError: org/springframework/core/type/classreading/AnnotationMetadataReadingVisitor 
```

我唯一的线索是我第一次尝试运行它时，我收到一个错误，说我没有

```
org.springframework.core.io.support.SpringFactoriesLoader. 
```

我查看了我的 spring-core-3.1.2.RELEASE.jar 并且确实没有 SpringFactoriesLoader。检查当前版本，我发现缺少的类确实在 spring-core-3.2.2.RELEASE.jar 中。

所以我把弹簧罐换成了最新版本。但是现在我在这个问题的标题中得到了例外。

任何的想法？

完整的堆栈跟踪：

```
org.springframework.beans.factory.BeanDefinitionStoreException: Failed to read candidate component class: file [C:\Users\e\workspace\.metadata\.plugins\org.eclipse.wst.server.core\tmp1\wtpwebapps\FTAdControl\WEB-INF\classes\com\fashiontraffic\adcontrol\health\restwebservices\HealthWSImpl.class]; nested exception is java.lang.IncompatibleClassChangeError: org/springframework/core/type/classreading/AnnotationMetadataReadingVisitor
at org.springframework.context.annotation.ClassPathScanningCandidateComponentProvider.findCandidateComponents(ClassPathScanningCandidateComponentProvider.java:281)
at org.springframework.context.annotation.ClassPathBeanDefinitionScanner.doScan(ClassPathBeanDefinitionScanner.java:242)
at org.springframework.context.annotation.ComponentScanBeanDefinitionParser.parse(ComponentScanBeanDefinitionParser.java:84)
at org.springframework.beans.factory.xml.NamespaceHandlerSupport.parse(NamespaceHandlerSupport.java:73)
at org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parseCustomElement(BeanDefinitionParserDelegate.java:1438)
at org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parseCustomElement(BeanDefinitionParserDelegate.java:1428)
at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.parseBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:185)
at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.doRegisterBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:139)
at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.registerBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:108)
at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.registerBeanDefinitions(XmlBeanDefinitionReader.java:493)
at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:390)
at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:334)
at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:302)
at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:174)
at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:209)
at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:180)
at org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:125)
at org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:94)
at org.springframework.context.support.AbstractRefreshableApplicationContext.refreshBeanFactory(AbstractRefreshableApplicationContext.java:130)
at org.springframework.context.support.AbstractApplicationContext.obtainFreshBeanFactory(AbstractApplicationContext.java:537)
at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:451)
at org.springframework.web.servlet.FrameworkServlet.configureAndRefreshWebApplicationContext(FrameworkServlet.java:631)
at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:588)
at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:645)
at org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:508)
at org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:449)
at org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:133)
at javax.servlet.GenericServlet.init(GenericServlet.java:242)
at org.apache.catalina.core.StandardWrapper.initServlet(StandardWrapper.java:1190)
at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1103)
at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:1010)
at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:4957)
at org.apache.catalina.core.StandardContext$3.call(StandardContext.java:5284)
at org.apache.catalina.core.StandardContext$3.call(StandardContext.java:5279)
at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
at java.util.concurrent.FutureTask.run(Unknown Source)
at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
at java.lang.Thread.run(Unknown Source)

Caused by: java.lang.IncompatibleClassChangeError: org/springframework/core/type/classreading/AnnotationMetadataReadingVisitor
at org.springframework.core.type.classreading.SimpleMetadataReader.<init>(SimpleMetadataReader.java:63)
at org.springframework.core.type.classreading.SimpleMetadataReaderFactory.getMetadataReader(SimpleMetadataReaderFactory.java:80)
at org.springframework.core.type.classreading.CachingMetadataReaderFactory.getMetadataReader(CachingMetadataReaderFactory.java:102)
at org.springframework.context.annotation.ClassPathScanningCandidateComponentProvider.findCandidateComponents(ClassPathScanningCandidateComponentProvider.java:257)
... 38 more 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-04T17:23:01.873

**@Eddy**，听起来你的类路径上有来自 Spring 3.1 和 3.2 的 jar，这并不总是很糟糕，但有时它们不能很好地结合在一起。

当我添加 spring-hateoas 0.4 时，我在 Spring 3.2.2 项目中遇到了同样的错误，它引入了 spring-webmvc 3.1.x 及其所有 Spring 3.1 依赖项。

我排除了 Spring 3.1 依赖项，一切都很好。希望有帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-02T08:48:03.140

这是由于 jar 的版本不兼容。[您可以在此博客](http://codepandey.blogspot.com/2013/07/incompatibleclasschangeerror-in-spring.html)中找到更多详细信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-10T02:26:52.177

```
<org.springframework-version>**4.2.1.RELEASE**</org.springframework-version> 
```

在 pom.xml （属性属性）中将发布版本更改为最新版本

然后在所有 springframework 依赖项中引用该属性。

这对我有用！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-11T04:36:53.310

就我而言，问题是因为我使用的是包含旧 Spring 版本的 activemq-all 库（目前我使用的是 Spring 4.2.4.RELEASE），所以我用 activemq-core 库对其进行了更改，问题就解决了。

# r - 从相关矩阵中提取成对相关

> ID：15462721
> 
> 赞同：1
> 
> 时间：2013-03-17T11:22:56.907
> 
> 标签：r, correlation, matrix

我有一个相关矩阵（比如 3x3），我想提取成对相关并将它们放入一个向量中。也就是说，我想从相关矩阵转到：

```
corVec = c(rho_12, rho_13, rho_23) 
```

我希望能够对任何维度的相关矩阵执行此操作。

我这样做的原因是因为我想使用带有随机相关矩阵的 copula 包来构造一个多元（椭圆）copula。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T13:50:59.830

如果相关矩阵是 rho，那么您可以使用以下方法提取成对相关：

```
rho[upper.tri(rho)] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-25T13:46:27.353

假设您有一个`df1`包含 3 列的 data.frame。
`rho=cor(df1)`将制作一个 3x3 矩阵。
制作成对相关“列表”（data.frame）：

```
require(reshape2)
rho[!upper.tri(rho)]=NA
rho=na.omit(melt(rho,value.name = 'cor')) 
rho=rho[order(-rho$cor),] 
```

# c - 从函数返回 struct*

> ID：15462724
> 
> 赞同：1
> 
> 时间：2013-03-17T15:46:38.643
> 
> 标签：c, pointers, struct

我有以下代码

```
struct myStruct *struct_var;
struct myStruct * select_my_struct()
{
return struct_var;
}
some_function()
{
    myStruct=struct_create();//struct_create() is of return type struct myStruct *
    another_function(struct_var);   // line A
    another_function(select_my_struct()); //line B
} 
```

我的问题是：*A*线和*B 线*做同样的事情吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T15:51:07.493

`struct_var`是一个指针并`select_my_struct()`返回`struct_var`指向的位置。

所以两者都是一样的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T15:51:56.520

是的，它具有相同的声明，因为它需要一个指向 mystruct 数据类型的指针。

# ssl - 从具有显式 SSL/TLS 的 ftps 服务器获取证书

> ID：15462732
> 
> 赞同：3
> 
> 时间：2013-03-17T15:47:26.707
> 
> 标签：ssl, certificate, ssl-certificate, ftps

是否有工具可以从具有显式 SSL/TLS 的 ftps 服务器获取 .cert 文件形式的证书？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T18:36:07.650

我找到了解决方案。它是FireFox 的[FireFTP](https://addons.mozilla.org/en-US/firefox/addon/fireftp/)插件，它启用 FTPS 协议并将证书存储在 FireFox 默认存储中。安装插件并在地址栏中输入 ftps://your.site。之后，可以轻松地从 tools->options->advanced->encryption->vew certs 导出证书

# django - django-endless-pagination 推特风格

> ID：15462738
> 
> 赞同：2
> 
> 时间：2013-03-17T15:47:56.523
> 
> 标签：django, django-endless-pagination

我正在尝试在我的项目中实现 django-endless 分页。简单的分页工作（带有“显示更多”）但 twitter 风格（基于 ajax）给我带来了麻烦。

这是我的看法：

```
@page_template('userena/profil_page.html')  # just add this decorator
def public_details(request, username=None,
    template = 'userena/profil.html', extra_context=None):
    user = get_object_or_404(get_user_model(), username__iexact=username)

    userObjekat = User.objects.get(username=username)
    user_profil = userObjekat.get_profile()

    context = {
        'projekti': user_profil.projekat_set.all(),
    }
    if extra_context is not None:
        context.update(extra_context)

    return userena_views.profile_detail(request, extra_context=context, username=username, template_name='userena/profil.html') 
```

正如建议的那样，我的模板分为两部分，“主要”一份和 AJAX 一份。这是主模板的一部分，它加载 _page 模板：

```
</li>
{% include page_template %}
</li> 
```

和 _page 模板包括在内 - 我可以看到内容。

_page 模板：

```
{% load endless %}
<li id="projektiTab">
    <div class="ten columns">
    <ul class="accordion">
    {% paginate projekti %}
    {% for projekat in projekti %}
    <li>                        
        <div class="title">
            <h6> {{ projekat.naziv }}</h6>
        </div>
        <div class="content">
            <p>{{ projekat.opis }}</p>
        </div>
    </li>
    {% endfor %}
    {% show_more %}
<li>
</div>
</li> 
```

Javascripts 也被加载（ STATIC_URL 正在工作）并且在我使用的页面源中：

```
<script src="/static/js/endless-pagination.js"></script>
        <script>
        $.endlessPaginate({
            paginateOnScroll: true,
            paginateOnScrollChunkSize: 5
        });
        </script> 
```

毕竟，滚动分页不起作用。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T15:55:04.060

当然，我犯了一些“小”错误，这些错误似乎微不足道，但事实并非如此。

**主模板**或包含 page_template 的父模板应包含以下内容：

```
<div class="endless_page_template">
    {% include page_template %}

    {% block js %}
    {{ block.super }}
    <script src="http://code.jquery.com/jquery-latest.js"></script>
    <script src="{{ STATIC_URL }}js/endless-pagination.js"></script>
    <script>$.endlessPaginate();</script>
    {% endblock %}
</div> 
```

所以，它必须在一个具有特定类的 div 中，我昨天忽略了它。

**page_template**看起来像这样：

```
{% load endless %}

{% paginate projekti %}
{% for projekat in projekti %}
   {{ projekat.name }}
{% endfor %}
{% show_pages %} 
```

这当然可以用一些 HTML 来美化（在我的例子中是 Zurb Foundation 的手风琴元素）。最后但并非最不重要的一点 - 观点：

```
@page_template('userena/profil_strana.html')  # name of the page_template
def public_details(request, username=None,
    template = 'userena/profil.html', extra_context=None):

    userObjekat = User.objects.get(username=username) # getting user object
    user_profil = userObjekat.get_profile() # getting user's profile
    context = {
        'projekti': user_profil.projekat_set.all(), # and a list of objects to iterate thru
    }
    if extra_context is not None:
        context.update(extra_context)

    return userena_views.profile_detail(request, extra_context=context, username=username, template_name=template) 
```

它有效。

# f# - FSI 和加载顺序

> ID：15462741
> 
> 赞同：3
> 
> 时间：2013-03-17T15:48:12.353
> 
> 标签：f#, f#-interactive, fsi

在 a.fsx 中：

```
namespace na 
module ma = 
    let var = 2 
```

在 b.fsx 中：

```
#load "a.fsx"
namespace nb
module mb = 
    let var = na.ma.var 
```

在 c.fsx 中：

```
#load "a.fsx"
namespace nc
module mc = 
    let var = na.ma.var 
```

在 userdep.fsx 中：

```
#load "b.fsx"
#load "c.fsx" 
```

在 user.fsx 中：

```
#load "userdep.fsx" 
```

现在，如果我将 user.fsx 中的最后一条指令发送到 FSI，我会得到：

```
> 
[Loading \\psf\home\Documents\Visual Studio 11\Projects\Library3\Library3\b.fsx
 Loading \\psf\home\Documents\Visual Studio 11\Projects\Library3\Library3\a.fsx
 Loading \\psf\home\Documents\Visual Studio 11\Projects\Library3\Library3\c.fsx
 Loading \\psf\home\Documents\Visual Studio 11\Projects\Library3\Library3\userdep.fsx]

b.fsx(6,15): error FS0039: The namespace or module 'na' is not defined
> 
```

如果决定的加载顺序是显示的顺序，这是有道理的。如果我从 userdep.fsx 发送 2 行，那么我必须在不同的命名空间中引用 a：

```
> 
[Loading \\psf\home\Documents\Visual Studio 11\Projects\Library3\Library3\a.fsx
 Loading \\psf\home\Documents\Visual Studio 11\Projects\Library3\Library3\b.fsx]

namespace FSI_0002.na
  val var : int

namespace FSI_0002.nb
  val var : int

[Loading \\psf\home\Documents\Visual Studio 11\Projects\Library3\Library3\a.fsx
 Loading \\psf\home\Documents\Visual Studio 11\Projects\Library3\Library3\c.fsx]

namespace FSI_0003.na
  val var : int

namespace FSI_0003.nc
  val var : int

> 
```

是否有任何原则可以规避您所知道的这种行为？

# java - 如何跟踪两个团队之间的 json 请求/响应更改并在 smth. 被改变了

> ID：15462744
> 
> 赞同：2
> 
> 时间：2013-03-17T15:48:29.130
> 
> 标签：java, json, spring, rest, xsd

**情况如下：**

不同地点的两个团队正在开发同一个产品，但是我们无法访问彼此的资源。一个团队 - 后端（应用服务器），另一个团队 - GUI（客户端）。

服务器请求/响应变化非常频繁，第二个团队（客户端）知道在这个过程中为时已晚，通过理智，

**我们的目标是：**尽早发现问题或双方的任何变化，甚至在它引发错误之前。

**我的想法：**应用服务器支持并由 UI 使用的所有 json 响应/请求都将转换为 xsd（基于 json 与 xml 非常等效的事实），然后我们将有一个 xsd： 1\. 服务器侧将维护每个构建并使其可访问 2\. 客户端将验证自身（即使在每晚的测试基础上）

**第二个想法：** Apps erver 将有一个集成测试（我们以任何方式拥有它们），它将验证带有一些 json 内容的请求/响应格式，比如说存储在文件系统上，作为下一步，测试将检查 json 格式是否是与之前的测试运行不同。每晚运行这些集成测试，并在检测到违反合同后向其他团队发送邮件。

**跟踪这些持续变化的任何其他好主意？**

谢谢伊戈尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T16:05:04.630

看看 JSON 模式： http: [//json-schema.org/](http://json-schema.org/) 我个人还没有尝试过，但似乎这正是你所需要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T16:18:41.100

您正在描述一个经典问题，即管理对不受您直接控制的系统使用的已发布界面的更改。

您最初的两个想法都在正确的轨道上：第一个是您的服务器团队就更改进行交流的一种方式，这样您的客户端团队就有一种明显的方式来查看发生了什么变化。第二种方法是捕获通信失败的情况，以便在错误成为生产问题之前检测到错误。

我认为诀窍在于获得正确的细节，以便正确的人在正确的时间听到这些变化。为此，在您的第一个基础上，这里有一些额外的想法：

*   让集成测试作为客户端和服务器团队之间的共同努力来维护。然后，客户端团队可以编写测试来验证他们的代码所做出的期望，然后服务器团队可以在发布任何更改之前在非生产环境中运行这些测试。这假设只有一个客户端团队：如果您正在处理许多第三方使用的公共 API，那么您可能别无选择，只能让服务器团队简单地猜测客户端的需求是什么；这不太理想，但如果您的 API 非常简单并且没有太多用例需要考虑，它仍然可以工作。

*   让客户团队及早知道重大变更何时到来，以便他们准备好以冷静和轻松的方式解决它，而不是疯狂地争先恐后地解决生产问题。如果您编写的工具能够查看模式的两个版本并在发布代码供客户团队处理之前发现任何重大更改，那么您生成的模式可以帮助您解决这个问题。

*   与客户团队就什么被认为是重大更改以及他们的客户代码应该是健壮的内容达成一致。例如，您可能同意，向现有对象添加新属性不是重大更改，客户端代码必须简单地忽略它，但这需要服务器开发人员遵守纪律，永远不要添加新属性改变另一个现有的解释。一旦您就重大更改的构成达成一致，客户端开发人员可以围绕这些假设构建他们的代码，服务器开发人员可以注意到被认为是重大更改的更改并将它们标记为早期沟通。

*   实施机制以对某些类型的更改启用多步骤弃用周期。例如，如果您经常重命名属性，您可以在服务器端代码中构建一个功能，允许您声明一个对象属性是另一个对象的别名。让服务器代码立即在 JSON 有效负载中包含所有可能的属性名称，以便客户端无论期望使用哪个名称都可以工作。然后，您可以告诉客户端开发人员别名将在给定时间段内保留，之后他们应该更改代码以使用新名称，您可以删除别名。一个相关的策略是从你的模式中自动生成一个简单的客户端库，并让客户端团队使用它，而不是直接访问 API；

我已应用上述所有策略来管理对我维护的 Web 服务 API 的更改。每种情况都不同，但希望这些想法能给您一些想法，让您了解如何在您的环境中实现类似的效果。

# security - durandal mvc 应用程序身份验证安全性

> ID：15462746
> 
> 赞同：3
> 
> 时间：2013-03-17T15:48:32.607
> 
> 标签：security, durandal, hottowel

我能够成功使用（索引视图中的代码）

```
 @if (@User.Identity.IsAuthenticated)
    {
    <div id="applicationHost">
        @Html.Partial("_splash")
    </div>

   @Scripts.Render("~/scripts/vendor");
        if(HttpContext.Current.IsDebuggingEnabled) {
            @Html.AntiForgeryToken()
            <script>
               window.userId = "@User.Identity.Name";
                console.log(window.userId);
            </script>
            <script type="text/javascript" src="~/App/durandal/amd/require.js" data-main="@Url.Content("~/App/main")"></script>

        } else {
            <!-- Remember to run the Durandal optimizer.exe to create the main-built.js  -->
            <script type="text/javascript" src="~/App/main-built.js"></script>
        }
    }
    else
    {
        <script src="~/Scripts/jquery-1.9.1.min.js"></script>

            <div id="login">
              @Html.Partial("Login")
            </div>

    } 
```

在登录后（使用标准 mvc 帐户控制器和来自标准 mvc4 应用程序的登录表单）让应用程序最初被强制进入登录页面。

然后我在页脚添加了一个按钮来调用注销控制器方法（这个函数被添加到 shell.js 并且我已经验证它是在按下按钮时调用的）

```
 function logoff() {
            var token = $("input[name='__RequestVerificationToken']").val();

            $.ajax({
                url: "/Account/LogOff",
                cache: false,
                type: "POST",
                async: false,
                data: { "__RequestVerificationToken": token },
                success: function (data) {
                    log("from success in logoff", data, false); //this shows up in the log

                    return true;
                },
                error: function (data) {
                    return false;
                }

            });
        } 
```

我已经通过控制器方法进行了调试，它成功调用了

```
 [HttpPost]
        [ValidateAntiForgeryToken]
        public ActionResult LogOff()
        {
            try{
            WebSecurity.Logout();  //this call does not generate an error
            }   
            catch(Exception excp)
            {
                string msg = excp.Message;
            }
            return RedirectToAction("index", "HotTowel");
        } 
```

调用 Index 页面并且不再对用户进行身份验证，但上面对 PartialView("Login") 的调用不会修改浏览器的内容。

我不明白为什么浏览器中没有加载登录部分视图。我在控制台中没有任何错误，也没有其他迹象表明有问题。

我搜索了一下，没有找到任何扩展 Hot Towel 模板以支持身份验证的示例。（除了关于如何设置身份验证令牌的一些事情之外）我采取了第一步，只需让索引视图能够在 durandal 应用程序加载之前强制用户登录。这很好用。

什么是让它工作的正确方法？我有一个使用 Durnadal 入门套件的示例，它显示了这种行为。我可以提供给任何需要的人。

shell.js 中的 javascript 返回似乎是重定向指示的索引页面的 html。（试图让警报显示这一切是有问题的）

致力于将样品送到 Skydrive 等

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-18T10:28:17.753

我也有这个问题：

```
 <div id="login">
          @Html.Partial("Login")
        </div> 
```

应该替换为

```
 <div id="login">
          @Html.Partial("../Account/Login")
        </div> 
```

这样它就可以找到您希望呈现的登录名的直接路径。这应该可以解决您的问题。尽管您在“登录”页面上至少没有出现 404 错误，但这很奇怪。我怀疑某些错误处理已完成但未显示。

# java - 向后滚动圆形数组

> ID：15462750
> 
> 赞同：3
> 
> 时间：2013-03-17T15:49:04.567
> 
> 标签：java, circular-buffer

我有一个数组，我想向后滚动其中的位置。

我有一个布尔数组，我需要计算给定单元格向前和向后有多少个真值。

我知道如果 N 是数组中的元素数，我可以继续执行 i=(i+1)%N。但是如果我需要以相反的方式滚动它怎么办？

先感谢您。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-17T15:53:52.857

我通常`i = (i - 1 + N) % N`用来防止负值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T15:52:19.857

**这应该这样做：**

```
i--;
if (i == -1)
  i = N-1; 
```

**或在 1 行中：**

```
i = ((i-1 == -1) ? N-1 : i-1); 
```

但上述噪声的变化可能更好。**一个相关的 if 语句版本：**

```
if (i == 0)
  i = N-1;
else
  i--; 
```

**相关的 1 行版本：**

```
i = (i == 0 ? N-1 : i-1) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-17T15:52:48.837

怎么样`i = (i == 0 ? N : i) - 1`？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-01-24T19:14:38.753

```
int newRightShiftIndex = (curIndex + numOfPositions)%size;
int newLeftShiftIndex = (curIndex +(size-(numOfPositions%size)))%size; 
```

*   **curIndex** - 是您当前的索引
*   **numOfPositions** - 要向后或顺时针移动的位置数
*   **size** - 长度，数组的大小

# git - git pull 不知道要合并哪个分支

> ID：15462751
> 
> 赞同：2
> 
> 时间：2013-03-17T15:49:05.027
> 
> 标签：git, pull

我承诺并推动。

然后其他人更改了我的分支中的某些内容，提交并推送。我试图拉动，因为我想得到这些改变。

结果：

```
From servername
3de3ee5..4db9ed8  Andrea     -> origin/Andrea
You asked me to pull without telling me which branch you
want to merge with, and 'branch.Andrea.merge' in
your configuration file does not tell me, either. Please
specify which branch you want to use on the command line and
try again (e.g. 'git pull <repository> <refspec>').
See git-pull(1) for details. 
```

问题是我不明白这个解释。我的分支名称肯定是`Andrea`，但是，`git pull andrea`也不起作用。怎么拉？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-11T16:11:25.630

这将从分支 origin/Andrea 中提取。当您将分支更改为经常提取时非常有用。如果您经常从同一个分支中提取，您可能需要在设置中进行设置，如下[所示](https://stackoverflow.com/questions/7388278/you-asked-me-to-pull-without-telling-me-which-branch-you-want-to-merge-with)

# javascript - window.open 在 IE 中打开两个弹出窗口

> ID：15462752
> 
> 赞同：3
> 
> 时间：2013-03-17T15:49:08.683
> 
> 标签：javascript, popupwindow

我在 IE8 中遇到了一个非常奇怪的行为。

我有一个简单的 javascript 函数来创建一个弹出窗口。弹出窗口创建正常，但父窗口转发到一个完全空白的窗口，该窗口只打印 [object]。我必须点击后退按钮才能返回原始页面。

```
<a href='javascript:window.open("http://endic.naver.com/search.nhn?query=In&searchOption=entry_idiom","Dictionary","width=500, height=500")' target="_blank">Click me</a> 
```

Chrome没有问题，只有IE。我怎样才能摆脱这种烦人的行为？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-17T16:01:27.137

`window.open`问题是 Internet Explorer 按预期执行代码，但还在新文档中显示返回值。由于`window.open`返回对新文档的对象引用，因此它将转换为字符串 - `[object Object]`- 并显示。

要解决此问题，您可以添加`return false`以防止浏览器返回任何内容。

```
<a href='javascript:window.open("http://endic.naver.com/search.nhn?query=In&searchOption=entry_idiom","Dictionary","width=500, height=500"); return false' target="_blank">Click me</a> 
```

**编辑**- 请参阅此答案下方的 OP 评论。解决方案是将 JavaScript 移动到`onclick`属性，并将`target`属性更改为与弹出窗口名称相同。

```
<a href="javascript:void(0);" onclick='window.open("http://endic.naver.com/search.nhn?query=In&searchOption=entry_idiom","Dictionary","width=500, height=500");' target="Dictionary">Click me</a> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T15:56:24.600

试试这个：http: [//jsfiddle.net/kelervin/Pf8Rw/](http://jsfiddle.net/kelervin/Pf8Rw/)

**HTML**

```
 <a href="http://www.google.com" class="open-popup">test</a> 
```

**查询**

```
 $('.open-popup').click(function(e) {
        e.preventDefault();
        window.open(this.href, '_blank', 'width=300,height=200');
    }); 
```

*注意：在 chrome 和 IE 8 中测试*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-28T19:08:43.397

您需要禁用跟踪出站链接。将以下 javascript 代码添加到 index.html 文件中：

`<script type="text/javascript"> var clicky_custom = clicky_custom || {}; clicky_custom.outbound_disable = 1; </script>`

# php - MySQL 将多行作为列连接

> ID：15462753
> 
> 赞同：26
> 
> 时间：2013-03-17T15:49:17.590
> 
> 标签：php, mysql, sql, join

假设我在 MySQL 数据库中有两个表。

表格1：

```
ID    Name
1     Jim
2     Bob 
```

表 2：

```
ID    Place    Race_Number
1     2nd      1
1     3rd      2
1     4th      3
2     1st      1
2     2nd      2
2     2nd      3 
```

从数据库中选择行时，有没有办法将第二个表中的行作为列连接到第一个表？目前我正在使用`SELECT * FROM Table1 NATURAL JOIN Table2`.

这输出：

```
ID   Name    Place    Race_Number
1    Jim     2nd      1
1    Jim     3rd      2
1    Jim     4th      3
2    Bob     1st      1
2    Bob     2nd      2
2    Bob     2nd      3 
```

目前，我正在我的 PHP 脚本中对其进行排序，以将其排序为一个数组。这很痛苦，因为我必须查看 ID 并查看它们是否相同，然后进行相应的排序。我觉得有一种方法可以在 MySQL 中正确执行此操作，而无需在 PHP 中将其排序到数组中。对于每个 ID，第二个表中可以有无限数量的条目。

MySQL 查询的所需结果是：

```
ID    Name    Race1    Race2    Race3
1     Jim     2nd      3rd      4th
2     Bob     1st      2nd      2nd 
```

我不能自己在表格中为 Race1、Race2 等创建列，因为每个 ID 可以有无限数量的比赛。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-03-17T15:51:29.567

一个`INNER JOIN`就可以满足你的需要。MySQL没有任何`PIVOT`功能，您仍然可以使用`CASE`和`MAX()`功能模拟它。

```
SELECT  a.ID, a.NAME,
        MAX(CASE WHEN b.Race_Number = 1 THEN b.Place ELSE NULL END) Race1,
        MAX(CASE WHEN b.Race_Number = 2 THEN b.Place ELSE NULL END) Race2,
        MAX(CASE WHEN b.Race_Number = 3 THEN b.Place ELSE NULL END) Race3
FROM    Table1 a
        INNER JOIN Table2 b
            ON a.ID = b.ID
GROUP   BY a.ID, a.Name 
```

但是如果你有未知数量的`RACE`，那么 a`DYNAMIC SQL`是更可取的。

```
SET @sql = NULL;
SELECT
    GROUP_CONCAT(DISTINCT
    CONCAT('MAX(CASE WHEN b.Race_Number = ', Race_Number,
      ' THEN b.Place END) AS ', CONCAT('`Race', Race_Number, '`'))
    ) INTO @sql
FROM Table2;

SET @sql = CONCAT('SELECT s.Student_name, ', @sql, ' 
                   FROM Table1 a
                   LEFT JOIN Table2 b 
                        ON ON a.ID = b.ID
                   GROUP   BY a.ID, a.Name');

PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

# android - Android：为什么服务不启动？

> ID：15462756
> 
> 赞同：0
> 
> 时间：2013-03-17T15:49:34.090
> 
> 标签：android, service

我有一个`AppWidgetProvider`应该触发服务以便在 App Widget 上执行请求的更新。

关键是服务`UpdateService`显然永远不会启动。事实上，我已经在`onStartCommand`服务中添加了一个日志，我可以看到它`onStartCommand`永远不会被调用。

**请注意，我的应用程序中有两个服务：**

```
<service android:name="ScheduledService" />

<service android:name="UpdateService" /> 
```

非常感谢任何帮助。谢谢

这是我的相关代码：

```
public class AppWidget extends AppWidgetProvider {

@Override
public void onUpdate(Context ctxt, AppWidgetManager mgr, int[] appWidgetIds) {
    Intent i = new Intent(ctxt, UpdateService.class);
    i.putExtra("widgetsids", appWidgetIds);
    Log.e("","onUpdate di AppWidget");

    // --> HERE I TRY TO START THE SERVICE <--
    ctxt.startService(i);
}

public static class UpdateService extends Service {

        @Override
        public int onStartCommand(Intent intent, int flags, int startId) {

        // --> onStartCommand NEVER GEST CALLED <---

        Log.e("","onStartCommand di AppWidget");
        int[] appWidgetIds = intent.getIntArrayExtra("widgetsids");
        final int N = appWidgetIds.length;
        AppWidgetManager manager = AppWidgetManager.getInstance(this);

        // Perform this loop procedure for each App Widget that belongs to
        // this provider

        for (int i = 0; i < N; i++) {
            int appWidgetId = appWidgetIds[i];

            RemoteViews view = buildUpdate(getApplicationContext(),
                    appWidgetId);

            // Tell the AppWidgetManager to perform an update on the current
            // app widget
            manager.updateAppWidget(appWidgetId, view);

        }
        return (START_NOT_STICKY);

    } 
```

这是我的清单：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.stocktickerwidget"
android:versionCode="1"
android:versionName="1" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="17" />

<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" />

<supports-screens
    android:anyDensity="true"
    android:largeScreens="true"
    android:normalScreens="true"
    android:smallScreens="true"
    android:xlargeScreens="true" />

<application
    android:debuggable="true"
    android:icon="@drawable/ic_launcher"
    android:label="TestWidget" >
    <receiver
        android:name=".AppWidget"
        android:icon="@drawable/cw"
        android:label="AppWidget" >
        <intent-filter>
            <action android:name="android.appwidget.action.APPWIDGET_UPDATE" />
        </intent-filter>

        <meta-data
            android:name="android.appwidget.provider"
            android:resource="@xml/widget_provider" />
    </receiver>

    <activity
        android:name=".WidgetActivity"
        android:theme="@android:style/Theme.NoDisplay" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <receiver android:name="PollReceiver" >
        <intent-filter>
            <action android:name="android.intent.action.BOOT_COMPLETED" />
        </intent-filter>
    </receiver>

    <service android:name="ScheduledService" />

    <service android:name="UpdateService" />
</application> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T15:57:51.320

在您的清单中，尝试包含包名称，例如：

```
<service android:name="com.mypackage.ScheduledService" />

<service android:name="com.mypackage.UpdateService" /> 
```

否则，请确保调用您的 onUpdate 方法。

编辑：当您将服务放在单独的文件中时，以上适用。由于您将其作为嵌套类包含在内，因此您可以编写：

```
<service android:name=".AppWidget$UpdateService" /> 
```

# routing - 将查询字符串中的参数值映射到 DTO 属性

> ID：15462760
> 
> 赞同：6
> 
> 时间：2013-03-17T15:49:56.503
> 
> 标签：routing, servicestack

我正在尝试找到一种方法来将此查询字符串中的值传递给我的 DTO 对象。

```
example.org?code=abc 
```

我必须将代码值映射到 AuthorizationCode 属性（参数名称也不匹配）。我尝试过这样的路由，但它不起作用。

```
[Route("?code={AuthorizationCode}", "GET")]
public class Registration
{
    public string AuthorizationCode { get; set; }
} 
```

由于这是一个回调 URL，我没有机会更改它。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-17T16:15:02.887

[在 ServiceStack 的 Routes 上](https://stackoverflow.com/a/12165439/85785)阅读这个较早的答案。路由应该只包含`/path/info`它们不应该包含能够自动填充所有请求 DTO 的 queryString。

如果您的 DTO 中只有一个代码属性，例如：

```
[Route("/registration", "GET")]
public class Registration
{
    public string Code { get; set; }
} 
```

您已经可以使用以下内容填充它：`/registration?code=abc`。

否则，如果您想坚持为 queryString 和 DTO 使用不同的名称，您可以尝试通过将 DTO 注释为`[DataContract]`：

```
[Route("/registration", "GET")]
[DataContract]
public class Registration
{
    [DataMember(Name="code")]
    public string AuthorizationCode { get; set; }
} 
```

无论哪种方式，您始终可以直接在您的服务或过滤器中访问 QueryString：

```
public MyService : Service 
{
    public object Post(Registration request) 
    {
        var code = base.Request.QueryString["code"];
    }
} 
```

# android - 恢复 GCM 中丢弃的消息

> ID：15462761
> 
> 赞同：2
> 
> 时间：2013-03-17T15:49:59.000
> 
> 标签：android

我想问一下GCM。[在谷歌GCM](http://developer.android.com/google/gcm/adv.html#collapsible)的文档中

请注意，如果应用程序脱机并且我有超过 100 条从服务器发送到 GCM 的消息，我的应用程序应该通过与服务器同步来恢复丢弃的消息来响应，那么我应该如何同步？太感谢了

# c# - asp.net 中的 Cookie 和会话状态

> ID：15462771
> 
> 赞同：0
> 
> 时间：2013-03-17T15:50:50.817
> 
> 标签：c#, asp.net

我想取用户输入的名称，然后使用会话状态将其显示在另一个 aspx 页面上。

在用户键入名称的页面上，我拥有的代码是

```
Session["name"] = TextBox1.ToString(); //Store the session state in a variable called name from the text box.

Response.Redirect("page2.aspx"); 
```

现在在 page2.aspx 上，我尝试调用此变量，但似乎没有任何效果。

我在页面上有一个空标签1，所以我希望将名称存储到空标签中

```
Label1 = Session["name"]; 
```

错误消息是将类型对象转换为 System.Web.UI.WebControlers.Label

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T15:52:33.413

```
Session["name"] = TextBox1.Text.ToString();    

Label1.Text = Session["name"].ToString() 
```

有两个错误：首先，您尝试分配`Label1`变量，而不是标签的文本，因此出现错误。`Session[key]` 返回`object`, while`Label1`是类型`System.Web.UI.WebControlers.Label`

第二个 - 您已将值设置为`user`会话值并尝试通过`username`变量访问它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T15:52:31.550

`Session["username"]`是对象类型，不能通过`label`隐式转换分配给它。您将有一个字符串`Session["username"]`，调用`ToString()`将给出，然后您可以将用户名分配给标签文本属性。

```
Label1.Text = Session["username"].ToString(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-17T15:56:31.793

最好这样做，因为如果 value 为 null，它不会引发异常：

```
Label1.Text = (string)Session["username"]; 
```

如果您确定`username`已设置，则可以执行以下操作：

```
Label1.Text = Session["username"].ToString(); 
```

# java-ee-6 - 嵌入式 glassfish - activation.jar

> ID：15462773
> 
> 赞同：0
> 
> 时间：2013-03-17T15:51:19.630
> 
> 标签：java-ee-6, glassfish-3, javax.activation

我需要使用 javax.activation 来获取文件的 mimetype。我正在运行嵌入式 glassfish 并将激活 jar 作为依赖项添加到 maven 插件中；但是，它仍然返回 application/octet-stream，这表明 jar 不在正确的位置。

有任何想法吗？

谢谢，

沃尔特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T02:07:23.117

我最终使用了一个更好的 API，它实际上读取了文件类型：Apache Tika。

沃尔特

# ios - ios MPMoviePlayerController 通过窗口播放视频

> ID：15462778
> 
> 赞同：1
> 
> 时间：2013-03-17T15:51:33.443
> 
> 标签：ios, mpmovieplayercontroller

在我的 iPad 应用程序中，我希望整个应用程序都有背景动画。所以我所做的是创建播放器对象并将其添加到应用程序委托的窗口中。然后我将所有视图控制器的背景颜色设为 clearColor。以下是我编写的代码。但一个小问题是，我的应用程序只能在横向上运行。使用下面的代码，它以纵向模式添加视频。如何让它在 iOS 5 和 iOS 6 中运行？

```
NSString *filepath   =   [[NSBundle mainBundle] pathForResource:VIDEO_FILE ofType:@"mp4"];
NSURL    *fileURL    =   [NSURL fileURLWithPath:filepath];
self.bgPlayerController = [[MPMoviePlayerController alloc] initWithContentURL:fileURL];
self.bgPlayerController.controlStyle = MPMovieControlStyleNone;
[self.bgPlayerController.view setFrame:CGRectMake(0, 0, 1024, 748)];

[self.window addSubview:self.bgPlayerController.view];
[self.window sendSubviewToBack:self.bgPlayerController.view];

[self.bgPlayerController play]; 
```

另外我想确保当横向左右横向改变方向时，视频也必须在背景中旋转。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-29T07:35:51.717

我找不到任何解决方案。将视频添加到窗口后，我手动观察方向并通过编码旋转视频的方向。

# tiles - Tiles 没有正确包含 jsp-s

> ID：15462780
> 
> 赞同：0
> 
> 时间：2013-03-17T15:51:46.563
> 
> 标签：tiles

我对瓷砖 2.2.2 有疑问。似乎 jsp-s 没有按应有的方式读取。我的tiles.xml 看起来像这样：

```
<definition name="notLoggedInLayout" template="WEB-INF/pages/template/templatenotloggedin.jsp">
    <put-attribute name="css" value="css/style.css" />
    <put-attribute name="header" value="WEB-INF/pages/template/notloggedinheader.jsp" />
    <put-attribute name="body" value="" />
    <put-attribute name="footer" value="WEB-INF/pages/template/footer.jsp" />
</definition>

<definition name="login" extends="notLoggedInLayout">
    <put-attribute name="title" value="Login" />
    <put-attribute name="navigation" value="" />
    <put-attribute name="body" value="WEB-INF/pages/login/login.jsp" />
</definition> 
```

我的 templatenotloggedin.jsp 看起来像这样：

```
<%@ taglib
    uri="http://tiles.apache.org/tags-tiles"
    prefix="tiles"
%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta
    http-equiv="Content-Type"
    content="text/html; charset=ISO-8859-1"
>
<link
    type="text/css"
    rel="stylesheet"
    href="<tiles:getAsString name='css'/>"
/>
</head>
<body>
    <tiles:insertAttribute name="header" />
    <tiles:insertAttribute name="body" />
    <tiles:insertAttribute name="footer" />
</body>
</html> 
```

我的问题是形成的页面如下所示：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta
    http-equiv="Content-Type"
    content="text/html; charset=ISO-8859-1"
>
<link
    type="text/css"
    rel="stylesheet"
    href="css/style.css"
/>
</head>
<body>
    WEB-INF/pages/template/notloggedinheader.jsp
    WEB-INF/pages/login/login.jspsadsdf
    WEB-INF/pages/template/footer.jsp
</body>
</html> 
```

有谁知道我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T15:56:48.060

发布此问题后几分钟才找到我的答案。问题是jsp路径需要在路径前有一个斜杠。

这个：

```
<put-attribute name="body" value="WEB-INF/pages/login/login.jsp" /> 
```

变成这样：

```
<put-attribute name="body" value="/WEB-INF/pages/login/login.jsp" /> 
```

# php - 将用户名变量添加到数组时 SQL 查询失败

> ID：15462784
> 
> 赞同：0
> 
> 时间：2013-03-17T15:52:03.320
> 
> 标签：php, mysql, file-upload

我有这个数组，其中包含要插入到所述列中的列和数据：

```
if($this->_insert(array(
'name'=>$fileName,
'size'=>$fileSize,
'ext'=>$fileExt,
'artist'=>$username
))){ 
```

`artist`当不存在或`artist`等于字符串时，它可以正常工作。例如，如果`artist`等于：

```
$username = $user_data['username']; 
```

这没用。（我已经检查过这是否反映了正确的数据并且确实如此）

但如果`artist`等于：

```
$username = "test"; 
```

然后它将提交正确的数据，`artist`并且一切都正确。

这是 _insert 函数：

```
public function _insert($array)
{
    $this->_database=new UploadDatabase();
    $this->_database->connect();
    $values = array_values($array);
    //format fields string
    $fields = implode(',', array_keys($array));
    //$fields = array("name","size", "path", "ext");
    return $this->_database->insert('audio',$values,$fields);
} 
```

总而言之，用户名在它是真正的用户名变量时会破坏sql，但在它是硬编码字符串时不会。这些问题整天困扰着我，我尝试了无数方法，但我几乎要放弃了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T11:19:56.773

正如约翰所说：

```
$array = array( 'name'=>$fileName, 'size'=>$fileSize, 'ext'=>$fileExt, 'artist'=>$username ); print_r($array); 
```

成功了。

# jsp - 从另一个jsp页面调用jsp方法

> ID：15462787
> 
> 赞同：0
> 
> 时间：2013-03-17T15:52:20.193
> 
> 标签：jsp

我在 JSP 页面中有一个方法，我想从另一个 JSP 页面调用该方法。两个 JSP 页面都在同一个包中。怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T15:58:30.503

最简洁的答案是不。

除非一个 JSP 包含另一个 JSP，否则我认为这是不可能的。允许重新编译 JSP 并立即生效的部分原因是每个 JSP servlet 类都有自己的类加载器，因此当 JSP 更改时可以丢弃和替换类加载器。

为每个页面使用单独的类加载器的决定仅因为假设 JSP 不相互引用而起作用。每个 JSP 只能向下查看类加载器层次结构，因此它们可以访问 WEB-INF/classes 和 WEB-INF/lib 下的类，但不能向上或横向查看层次结构。

换句话说，JSP 是入口点。它们是依赖图的根。它们之间的任何共同点都需要成为包含文件或移动到专用的 Java 类中。

# php - 更改日期助手语言 Codeigniter

> ID：15462792
> 
> 赞同：0
> 
> 时间：2013-03-17T15:52:39.540
> 
> 标签：php, codeigniter, date, helper

我正在使用 Codeigniter 来显示日期。

我有这个但是它是用英语回显的，我如何将它设置为其他语言？我已经有了西班牙语语言包，但我不知道如何加载它。

```
 $this->load->helper('date');
 echo mdate("%F %d, %Y", strtotime(now())); 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T17:19:57.520

```
// Set locale to Spanish Argentina, change to your installed language
setlocale(LC_TIME, 'es_AR');

echo strftime("%B %d, %Y", time()); 
```

首先，您不需要使用日期助手来完成此操作。`mdate()`本质上与`strftime()`仅 vars 略有不同的地方相同。你的代码`strtotime(now())`也是错误的。与 CI 文档中指示`now()`的完全相同。`time()`它返回 UNIX 时间戳，`strtotime()`将字符串转换为 UNIX 时间戳。所以你所做的是试图将时间戳转换为时间戳，这当然是错误的。我更改了代码，因此它不需要帮助程序，并且会`MONTHNAME DATE, YEAR`以指定的语言正确输出。确保将其更改为`es_AR`您安装的任何西班牙语。它将是格式`es_COUNTRYCODE`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-18T16:23:14.717

“calendar_lang.php”中的翻译日期

```
$this->config->set_item('language', 'spanish');
$this->load->library('calendar');
echo 'Mes:'.$this->calendar->get_month_name(date('m'));
echo 'Día:'.$this->calendar->get_day_names(date('d')); 
```

# php - php mysql 会话

> ID：15462795
> 
> 赞同：0
> 
> 时间：2013-03-17T15:53:08.400
> 
> 标签：php, mysql, session

我正在创建一个配置文件页面，该页面将在用户使用 GET 方法登录后从 url 获取 id。但是我仍然收到错误消息，尽管会话不是空的，但他们没有在保护页面上进行会话，有人可以帮助我吗？

这是代码的一部分

**配置文件.php**

```
<?php
ob_start();
require_once('for members/scripts/connect.php'); 
require_once('send_post.php'); 
   session_start();
   $sessionlogin = ($_SESSION['login']);
   $userid = ($_SESSION['user_id']);
   $username = ($_SESSION['username']);
   $fname = ($_SESSION['first_name']);
   $lname = ($_SESSION['last_name']);
   $sessionaddres =($_SESSION['address']);
    //echo "your do not have a session";
    var_dump($sessionlogin);
   var_dump($userid);
   var_dump($username);
// updatede for using the GET methode for ge the data nedded from the url 
if(isset($_GET['user_id']))
{
     $userid = $_GET['user_id'];
}
else
{
    echo "this is an error";
}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T15:57:30.853

`session_start()`必须在输出任何标头之前包含您的内容，如果两个包含的文件中有任何输出，则会导致会话出现问题。另外，我很好奇您的输出缓冲是否影响会话。尝试置于`session_start()`您的`ob_start()`电话之上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T15:57:53.383

尝试移动`session_start`到 php 脚本的顶部，像这样

```
<?php
session_start(); //SET SESSION START HERE
ob_start();

require_once('for members/scripts/connect.php'); 
require_once('send_post.php'); 

$sessionlogin = ($_SESSION['login']);
...
...
...

?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T16:02:06.640

你应该使用**session_start();** 在页面的开头

如果您使用的是 user_id，一个提示是数值

```
if((isset($_GET['user_id']))&&(is_numeric($_GET["user_id"]))) 
 {
   $userid = $_GET['user_id'];
 } 
```

# regex - 文件内容为 grep 的正则表达式

> ID：15462796
> 
> 赞同：0
> 
> 时间：2013-03-17T15:53:20.587
> 
> 标签：regex, bash, grep

我有“exp regex”行的文件。该文件可以包含带有其他文本的行。例如：

```
exp [a-zA-Z].*\.sh~$
exp test
tmp too
exp tmp
trololo 
```

我需要 grep 这个文件的内容，`egrep file '^exp ' | sed 's/^exp //'`结果是：

```
[a-zA-Z].*\.sh~$
test
tmp 
```

但我需要这个 grep 结果用 | 分隔 而不是 \n

```
[a-zA-Z].*\.sh~$|test|tmp 
```

因为我需要将此结果用作另一个 grep 正则表达式。例如打印嵌套 grep 匹配的文件：

```
ls | egrep "`egrep file '^exp ' | sed 's/^exp //'\`" 
```

嵌套 grep 后 | sed 替换

```
ls | egrep "[a-zA-Z].*\.sh~$|test|tmp" 
```

或者有没有更好的方法从文件中导出正则表达式并将它们用于过滤文件？

肯特：我如何在替代中使用它？我认为是：

```
ls | egrep "`awk '/^exp /{sub(/^exp /,"");s=(s?s"|":s) sprintf("%s",$0)}END{print s}' file`" 
```

但我可能错了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T15:57:45.323

尝试这样做：

```
grep '^exp ' file.txt | sed 's/^exp //' | paste -sd '|' 
```

甚至更好，不需要`grep`，`sed`cad 本地做：

```
sed -n '/^exp/s/^exp //p' file.txt | paste -sd '|' 
```

最后但并非最不重要的一点是，如果您对[perl](/questions/tagged/perl "显示标记为“perl”的问题") one-liners 持开放态度：

```
perl -ne 'push @arr, $1 if /^exp (.*)/;END{print join "|", @arr}' file.txt 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T16:09:11.010

您可以保存`grep`and `sed`，并使用单个进程：`awk`one-liner

```
awk '/^exp /{sub(/^exp /,"");s=(s?s"|":s) sprintf("%s",$0)}END{print s}' file 
```

测试一下：

```
kent$  on feature at master!? echo "exp [a-zA-Z].*\.sh~$
exp test
tmp too
exp tmp
trololo"|awk '/^exp /{sub(/^exp /,"");s=(s?s"|":s) sprintf("%s",$0)}END{print s}'
[a-zA-Z].*\.sh~$|test|tmp 
```

# typescript - 如何在 Typescript 中定义数字->字符串字典？

> ID：15462799
> 
> 赞同：17
> 
> 时间：2013-03-17T15:53:36.947
> 
> 标签：typescript

我正在使用 Typescript 并将一个小型库从 Javascript 转换为它。在代码的一个区域中，有一个静态定义的友好键名与其键码的映射。原始代码如下所示：

```
keys: { "Backspace": 8, "Tab": 9, "Enter": 13, ....etc.. }; 
```

我通过以下方式在打字稿中定义了这个：

```
static keys: { [name: string]: number; } = { "Backspace": 8, "Tab": 9, "Enter": 13, ... etc.. }; 
```

这似乎工作正常，但是代码的另一部分使用相反的映射：

```
 chars: {8:"Backspace",9:"Tab",13:"Enter", ...etc... }; 
```

因此，我尝试在 typescript 中进行与之前相同类型的定义：

```
chars: { [code: number]: string; } = { 8: "Backspace", 9: "Tab", 13: "Enter", ...etc.. }; 
```

这无法编译并出现以下错误：

> 无法转换'{ 0：字符串；1：字符串；2：字符串；4：字符串；8：字符串；9：字符串；： 细绳; }' 到 '{ [name: number]: string; }': '{ 0: string; 类型的索引签名 1：字符串；2：字符串；4：字符串；8：字符串；9：字符串；： 细绳; }' 和 '{ [name: number]: string; }' 不兼容

如何在 Typescript 中定义此映射？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-17T17:54:16.547

问题在于，在 JavaScript 中 - 因此在 TypeScript 中 - 对象文字的键始终是字符串，因此不能将其分配给具有数字索引器的变量。

带有数字索引器的对象是一个数组 - 所以你必须这样做：

```
var chars: string[] = [];
chars[8]= "Backspace";
chars[9]= "Tab";
chars[13] = "Enter"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T05:58:14.923

实际上 js 内部只有基于字符串的索引（Array 与 {} 不同）但字符串/数字转换在 js 中是稳定的：

```
var x = {0 : "asdf",1:"bb"} 
alert(x[0])
alert(x[1]) 
```

我认为 typescript 也应该支持它并创建了一个可以投票的工作项：http: [//typescript.codeplex.com/workitem/832](http://typescript.codeplex.com/workitem/832)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-10-22T10:23:02.213

[这是一个名为 Classical.js](https://github.com/drubino/Classical) * 的库，它可以帮助您解决这个问题和类似的问题。除其他外，它还定义了一个双重通用字典。对于您的用例，代码如下所示：

```
import c = Classical.Collections;

var keys = new c.Dictionary<string, number>();
keys.add("Backspace", 8);
keys.add("Tab", 9);
keys.add("Enter", 13);
//etc...

keys.getValue("Backspace"); //8
keys.getValue("Tab"); //9
keys.getValue("Enter"); //13
//etc... 
```

Dictionary<TKey, TValue> 适用于所有类型的对象，并且不会出现名称冲突问题，例如名为“构造函数”的键。

对于相反的映射，您可以构造逆字典或查询当前字典，如下所示：

```
keys.query().single(pair => pair.key === 8).value; //"Backspace"
keys.query().single(pair => pair.key === 9).value; //"Tab"
keys.query().single(pair => pair.key === 13).value; //"Enter"
//etc... 
```

如果您想尝试一下，请访问[Classical](https://github.com/drubino/Classical)，打开 bin 文件夹并将 classic.js 和 classic.d.ts 添加到您的项目中。

希望有帮助。

* * *

* 我是古典团队的开发者之一

# assembly - 在没有操作系统的情况下打印字符串

> ID：15462807
> 
> 赞同：4
> 
> 时间：2013-03-17T15:54:19.463
> 
> 标签：assembly, x86, bootloader, x86-16

我有一个 x86 汇编语言的简单程序。它应该在没有操作系统的情况下直接将字符串打印到视频内存。

```
[bits 16]
[org 0x7c00]
mov ax, 0x3
int 0x10
sdl
mov ax, 0xb800
mov es,ax
mov si, msg
xor di, di
repnz movsw
jmp $
msg db 'Hello'
times 510 - ($ - $$) db 0
dw 0xaa55 
```

但它不起作用。你能帮助我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T17:02:25.267

有一些问题：

1.  没有这样的指令`sdl`。

2.  要复制数据，您应该使用`rep movsw`，而不是`repnz movsw`。

3.  `cx`之前需要设置`rep movsw`。

4.  您还需要在视频内存的每隔一个字节中定义每个字符的颜色，或者在要复制的数据中`rep movsw`，或者在复制循环中。下面的代码说明了这两个选项：

**编辑：**添加代码。

```
[位 16]
[组织 0x7c00]

移动斧头，3
整数 10 小时

推字 0xb800
流行音乐

推cs；以防万一，对于引导加载程序代码，
流行音乐；movsb 需要

xor di,di
mov si,msg
mov cx,msg_length_in_bytes

one_color_copy_to_vram_loop：
    movsb
    移动,0x0f
    stosb
    循环 one_color_copy_to_vram_loop

mov si,multicolor_msg
mov cx,multicolor_msg_length
代表 movsw

跳转 $

味精数据库'你好'
msg_length_in_bytes 等于 $-msg

multicolor_msg 数据库 ' ',0
               分贝'H',1
               分贝'e',2
               分贝'l',3
               分贝'l',4
               分贝'o',5
               分贝'',0
               分贝'w',6
               分贝'我',7
               分贝't',8
               分贝'h',9
               分贝'',0
               分贝'c',10
               分贝'o',11
               分贝'l',12
               分贝'o',13
               分贝'r',14
               分贝'！'，15
multicolor_msg_length equ ($-multicolor_msg)/2

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T17:00:07.213

使用`repnz`前缀，您必须首先将`cx`寄存器设置为字符数，并且正如 nrz 指出的那样，您不应该使用该前缀，因为它会在遇到零时停止。

# c# - 区分 C# 中的 TcpClient

> ID：15462808
> 
> 赞同：5
> 
> 时间：2013-03-17T15:54:21.750
> 
> 标签：c#

作为服务器，我如何区分连接到我的 TcpClient？作为客户，我是否总是需要发送用户名或服务器可以知道我是谁的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T15:58:10.670

我通常使用将客户端传输到服务端的数据来识别客户端。我使用的标识符是：

Lan 和 Wan ip 地址、计算机名、用户名、操作系统、

除了您的评论之外，我还建议在服务器内创建一个客户端类，以处理客户端已经传输的变量，这样您就不必重新发送用户名等

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T05:03:08.993

当他/她发送消息时，您必须为每个用户使用唯一身份。意味着，您可以使用用户表中的主键 ID 或其他任何内容（您可以为每个用户生成任何静态 ID 代码）。登录后，您可以将它用于来自该客户端的每条消息。

# javascript - 播种 javascript 回调

> ID：15462810
> 
> 赞同：3
> 
> 时间：2013-03-17T15:54:26.610
> 
> 标签：javascript, google-maps-api-3

我有一个谷歌地图，上面有大约 200 个标记。使用谷歌距离矩阵服务，我可以找到从一个地址到地图上所有标记的行驶距离。由于 API 限制，我每次调用只能提交 25 个目的地，因此我必须将操作分解为对距离矩阵服务的 8 个单独调用。

我的问题是，由于调用是异步的，它们可以按任何顺序返回，因此我对如何将返回的结果与原始标记数组进行最佳匹配有点困惑。理想情况下，我想将偏移量传递给回调函数，以便它确切地知道原始标记数组中的哪些 25 个元素对应于从 API 调用发回的 25 个结果，但我不知道如何实现这一点，所以任何帮助非常感谢。

```
var limit = 25;
var numMarkers = markers.length; // markers is an array of markers defined elsewhere
var numCallbacks = Math.ceil(numMarkers/limit);
var callbackCount = 0;

for(var i = 0; i < numMarkers; i += limit) {
    var destinations = [];

    // Get destination position in batches of 25 (API limit)
    for(var j = i; j < i + limit && j < numMarkers; j++) {
        destinations[j - i] = markers[j].getPosition();
    }

    // Calculate distances
    distMatrix.getDistanceMatrix(
    {
        origins: origin, // array containing single lat/lng
        destinations: destinations,
        travelMode: google.maps.TravelMode.DRIVING,
        unitSystem: google.maps.UnitSystem.IMPERIAL,
        avoidHighways: false,
        avoidTolls: false

    }, function(response, status) {

        if (status == google.maps.DistanceMatrixStatus.OK) {
            var distances = response.rows[0].elements;

            // This is where it would be nice to know the offset in the markers array 
            // that these 25 results correspond to so I can then just iterate through 
            // the distances array and add the data to the correct marker.
        }

        if(++callbackCount == numCallbacks) {
            // All callbacks complete do something else...
        }
    });
} 
```

因此，如果有一种方法可以在调用它时从 for 循环中为每个 API 调用的回调函数设置“i”的值，那么匹配所有内容会很容易，但我不是那么好使用 javascript，所以我不知道该怎么做，甚至不知道它是否可能。

感谢你们提供的任何帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T16:06:11.967

我假设您尝试在回调中使用`i`and `j`，但总是发现它们等于最后一个值；这是因为 JavaScript 只有函数作用域（没有块），所以`i`and`j`只声明*一次*；因此每次迭代都引用相同的变量。

有关这方面的更多信息，请参阅[JavaScript 不支持带有局部变量的闭包吗？](https://stackoverflow.com/q/643542/444991).

* * *

解决方案与示例中的相同（并且所有出现此问题）；您需要引入一个新的范围级别。你可以很好地解决你的问题；

```
function buildResponseFor(i) {
    return function (response, status) {
        if (status == google.maps.DistanceMatrixStatus.OK) {
            var distances = response.rows[0].elements;

            // Use i here.
        }
    }
} 
```

然后将您的`getDistanceMatrix`呼叫更新为：

```
distMatrix.getDistanceMatrix({
    origins: origin, // array containing single lat/lng
    destinations: destinations,
    travelMode: google.maps.TravelMode.DRIVING,
    unitSystem: google.maps.UnitSystem.IMPERIAL,
    avoidHighways: false,
    avoidTolls: false

}, buildResponseFor(i)); 
```

...请注意，您可以将`i`, or `j`, or `i`and `j`etc. 传递给您的`buildResponseFor`函数，它们将在您的回调函数中作为您`function`在`buildResponseFor`.

# ms-access - 如何在 Microsoft Access 中为文本模式指定自定义格式？

> ID：15462811
> 
> 赞同：0
> 
> 时间：2013-03-17T15:54:27.060
> 
> 标签：ms-access, formatting

我有一个长度为 1 或 2 个字符的**文本**列，其中仅包含 0 到 99 之间的数字。

当它只是一个数字字符时，我使用什么（文本）格式以 0 前缀显示它？这意味着“8”显示为“08”，而 23 保持不变“23”。

**当字段是数字**而不是文本时，我知道如何执行此操作。我需要做的就是在这个数字列的格式字段中输入 00。现在我想在字段是文本时做同样的事情。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T16:26:09.640

```
=Right("00" & someString,2) 
```

这么简单的事情不需要 VBA。
如果字段是数字，您可以使用类似“00”的格式。用字符串，用纯格式，恐怕没办法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T16:31:12.373

`TextBox`如果将值转换为数值，则可以使用 的文本格式规范。在写`ControlSource`：`TextBox`

```
=CLng(fieldName) 
```

如果您的字段可以，`Null`这将产生错误，您将必须这样做：

```
=IIf(IsNull(fieldName), Null, CLng(Nz(fieldName))) 
```

仍然是必需的`Nz`，因为 VBA 总是评估`IIf`.

或者，如果您想在字段为 时显示“00” `Null`，只需执行以下操作：

```
=CLng(Nz(fieldName)) 
```

* * *

当您在 TextBoxes 或其他 Controls 中使用此类表达式时，请确保 Control 的名称与源列的名称不同；否则你会得到一个产生错误的无限递归。例如，如果列名称是“MyColumn”，则给 TextBox 取一个类似“txtMyColumn”的名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T16:10:24.090

[从此处](https://stackoverflow.com/questions/15456871/how-to-format-a-numeric-field-in-microsoft-access)的类似问题中，创建以下 VBA 函数：

```
Function Lpad (MyValue as String, MyPadCharacter as String, _ 
           MyPaddedLength as Integer)
    Lpad = string(MyPaddedLength - Len(MyValue),MyPadCharacter) _
           & MyValue
End Function 
```

要测试此功能，请在“立即”窗口中键入以下行，然后按 ENTER：

```
?Lpad("123B","0",6) 
```

参考： http: [//support.microsoft.com/kb/210573](http://support.microsoft.com/kb/210573)

# android - 使用字符串日期排序列表

> ID：15462814
> 
> 赞同：9
> 
> 时间：2013-03-17T15:54:44.597
> 
> 标签：android

我有一个小问题。我有一个 ArrayList listOfSData ，其中每个元素都类似于日期：例如：

[30-03-2012, 28-03-2013, 31-03-2012, 2-04-2012, ...]

现在我想知道如何对这个列表进行排序。我的意思是我想对此进行排序

[28-03-2013、30-03-2012、31-03-2012、2-04-2012 等]。

此列表必须具有字符串值。我怎样才能对这个列表进行排序？帮助我，因为我不知道该怎么做。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-03-17T15:56:20.753

在比较它们之前，您需要实现一个`Comparator<String>`将字符串转换为日期的对象。`SimpleDateFormat`可以使用对象来执行转换。

就像是：

```
class StringDateComparator implements Comparator<String>
{
    SimpleDateFormat dateFormat = new SimpleDateFormat("dd-MM-yyyy");
    public int compare(String lhs, String rhs)
    {
        return dateFormat.parse(lhs).compareTo(dateFormat.parse(rhs));
    }
}

Collections.sort(arrayList, new StringDateComparator()); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-17T16:13:38.593

这是一个基于您输入的小示例。这可以用少几行来完成，但我认为这会更好理解。希望能帮助到你。

```
List<String> values = new ArrayList<String>();
     values.add("30-03-2012");
     values.add("28-03-2013");
     values.add("31-03-2012");
     Collections.sort(values, new Comparator<String>() {

        @Override
        public int compare(String arg0, String arg1) {
             SimpleDateFormat format = new SimpleDateFormat(
                        "dd-MM-yyyy");
             int compareResult = 0;
             try {
                Date arg0Date = format.parse(arg0);
                Date arg1Date = format.parse(arg1);
                compareResult = arg0Date.compareTo(arg1Date);
            } catch (ParseException e) {
                e.printStackTrace();
                compareResult = arg0.compareTo(arg1);
            }
            return compareResult;
        }
     }); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-17T16:47:40.500

起初已经给出的答案是写的，但他们的决定不是很快。

标准 java Collections.sort 使用 timsort。在平均情况下，它需要 O(n*log(n)) 比较，因此您的自定义比较器将调用 O(n*log(n)) 次。

如果性能对您很重要，例如，如果您有大型阵列，您可以执行以下操作：

1.  将字符串日期转换为 int 或 long 时间戳。这需要 O(n) 操作。然后你只需对长整数或整数数组进行排序。两个原子 int 的比较比任何比较器都要快得多。

2.  如果您想为这种排序获得更快的速度，可以使用基数排序（[http://en.wikipedia.org/wiki/Radix_sort](http://en.wikipedia.org/wiki/Radix_sort)）。我占用了很多内存，但我们可以优化它。如我所见，您不需要指定一天中的时间。所以取值范围不是很大。在第一次通过 (O(n)) 时，您可以将日期转换为整数值，并有以下假设：

    *   1970 01 01 是开始日期（或者更具体的时间，如果你知道的话）并且编码像 1
    *   让最大日期为 2170 01 01
    *   整个月有 31 天。所以你每年得到 31*12 = 372 个值而且你可以使用基数排序对整数数组进行排序。对于合并排序数组，对具有 200 年范围的值进行排序仅需要 200 * 372 * 4 = 297600 个字节，但您会得到 O(2 * n) 复杂度。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-17T16:00:09.487

这是我编写的一种方法，用于按时间参数对对象数组进行排序。它是通过每次比较 2 个字符串时间来完成的，这可以通过将模式参数更改为：“dd-MM-yyyy”来轻松调整您的日期比较

```
int repositorySize = tempTasksRepository.size();
            int initialRepositorySize = repositorySize;
            Task soonTask = tempTasksRepository.get(0);
            String pattern = "HH:mm";
            SimpleDateFormat simpleDateFormat = new SimpleDateFormat(pattern);

            for (int i= 0; i < initialRepositorySize; i++)
            {
                for (int j= 0; j < repositorySize; j++)
                {
                    Task tempTask = tempTasksRepository.get(j);

                    try 
                    {
                        Date taskTime = simpleDateFormat.parse(tempTask.getTime());
                        Date soonTaskTime = simpleDateFormat.parse(soonTask.getTime());

                        // Outputs -1 as date1 is before date2
                        if (taskTime.compareTo(soonTaskTime) == -1)
                        {
                             soonTask = tempTask;
                        }
                    } 
                    catch (ParseException e)
                    {
                        Log.e(TAG, "error while parsing time in time sort: " + e.toString());
                    }
                }
                tasksRepository.add(soonTask);
                tempTasksRepository.remove(soonTask);
                if ( tempTasksRepository.size() > 0 )
                {
                    soonTask = tempTasksRepository.get(0);
                }
                repositorySize--; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-17T16:00:42.450

尝试将[SimpleDateFormat](https://developer.android.com/reference/java/text/SimpleDateFormat.html)与“d-MM-yyyy”模式一起使用： 1\. 创建 SimpleDateFormat 2\. 将 listOfSData 字符串数组解析为 java.util.Date[] 3\. 使用 Arrays.sort 对日期数组进行排序 4\. 将 Date[] 转换为字符串数组使用相同的 SimpleDateFormat

# eclipse - 在git中合并更改头分支到主分支

> ID：15462816
> 
> 赞同：2
> 
> 时间：2013-03-17T15:54:58.430
> 
> 标签：eclipse, git

我目前正在eclipse中制作一个项目。我在**head分支**和**master分支**中进行了更改。我想合并这些更改并将它们推送到**远程存储库**。请告诉我正确的步骤，以便我**合并**两个分支并推送更改**远程存储库**而不会收到**非快进警告**。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T16:04:08.137

> 我目前正在 eclipse 中制作一个项目。我在 head 分支和 master 分支中进行了更改。

通常当人们提到他们正在谈论的“head”时`HEAD`，这实际上不是一个分支，而是对当前签出分支的“tip”的引用。所以如果你

```
git clone foo
cd foo
git checkout bar 
```

假设`bar`是一个分支，那么`HEAD`将引用分支的“提示”或最后一次提交`bar`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T19:31:29.573

如果您在推送时收到非快进警告，则表示已对远程存储库进行了更改。您可以在推送之前将这些更改带入本地分支。

这是因为 git 需要在本地存储库中解决合并冲突，而不是（通常是共享的）远程存储库。要将这些更改带到您的本地存储库，您需要执行一对命令；`git fetch ...`并`git merge ...`导致合并提交，有些人更喜欢 - 而`git fetch ...`如果`git rebase ...`在没有合并提交的情况下合并更改是首选。请注意，与 和`git pull ...`相同，`git fetch ...`并且与`git merge ...`和`git pull --rebase ...`相同。`git fetch ...``git rebase ...`

无论您喜欢哪种方式，一旦您对本地存储库进行了更改（并解决了可能存在的任何冲突），您就可以推送了。

# git - 如何从 github 中删除文件并停止被跟踪？

> ID：15462824
> 
> 赞同：2
> 
> 时间：2013-03-17T15:55:46.573
> 
> 标签：git, github

虽然我已将我的 database.yml 添加到 .gitignore 中，但它仍在 github 中添加。现在

1.  我应该如何从 github 中删除它？（我看到了这个[如何从 GitHub 存储库中删除文件？](https://stackoverflow.com/q/11121352/692622)，这是从 github 中删除的唯一方法吗？）
2.  如何阻止它被添加到 github，因为它包含敏感信息

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T16:00:48.627

听起来您在问如何从 GitHub 上的现有历史记录中删除该文件。

GitHub 的帮助[准确地解释了如何做到这一点](https://help.github.com/articles/remove-sensitive-data)：

```
git filter-branch --force --index-filter 'git rm --cached --ignore-unmatch database.yml' --prune-empty --tag-name-filter cat -- --all 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T15:58:07.253

是的，这就是从 Git 存储库中删除文件的方法。一旦您将其删除，并且由于您将此文件添加到您的`.gitignore`文件中，它将不会再次被跟踪。因此，如果您想将此文件保留在本地，请在其他地方保留一份副本，然后使用`git rm path/database.yaml`然后将其放回原处。

请注意，通过在`.gitignore`文件中添加更多规则不会以任何方式影响 git 已经跟踪的文件，它只会影响未跟踪的文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T15:42:40.997

注意：

*   [您会在GitHub gitignore 项目](https://github.com/github/gitignore)中找到大量 .gitignore 文件示例。
*   `yml`文件没有被忽略（只有[`Rails.ignore`一个`*.yml`包含](https://github.com/github/gitignore/pull/225)）
*   如果您不小心，您可以让任何人使用[**ghrabber**](https://github.com/cortesi/ghrabber)项目在您的 GitHub 存储库或任何 GitHub 存储库中对敏感文件进行快速 grep：

这意味着一个简单的命令就足以获取所有 repos 的所有敏感文件：

```
./ghrabber.py "path:.bash_history" 
```

> 您在 git repo 中错误地包含了所有 bash 命令行历史记录

```
./ghrabber.py "path:.htpasswd" 
```

> 你得到所有`htpasswd`文件

```
./ghrabber.py "ext:mbox" 
```

> 你收到邮箱...

```
./ghrabber.py "path:databases.yml" 
```

> 你得到连接登录名/密码到数据库......

（来自[Korben.info - 法语](http://korben.info/ghrabber.html#WB1VXkWBuagXlmr2.99)）

# android - Android Layout：相同的设备尺寸系列，不同的真实设备尺寸

> ID：15462825
> 
> 赞同：0
> 
> 时间：2013-03-17T15:55:48.173
> 
> 标签：android, android-layout

只是一个简单的问题：
我的应用程序应该适用于我的设备（Galaxy Ace - 320 x 480 - “**正常**”屏幕尺寸系列）和 Galaxy Nexus（720 x 1280 - “**正常**”屏幕尺寸系列）。
我在两个不同的文件夹中编写了两个布局：*layout*和*layout-sw600dp*。
不幸的是，Galaxy Nexus 一直选择“ *layout* ”文件夹中的 xml 定义，而不是“ *layout-sw600dp* ”文件夹。

我该如何解决这个问题？

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T16:23:09.417

（感谢@Class Stacker）

对于遇到相同问题的每个人：将 Galaxy Nexus 的布局 xml 文件放在名为“layout-xhdpi”的文件夹中。

# javascript - 如何在jQuery中切换部分href？

> ID：15462828
> 
> 赞同：0
> 
> 时间：2013-03-17T15:56:13.040
> 
> 标签：javascript, jquery

目前，我正在开发一个投票系统（就像我们在 StackOverflow 中所拥有的一样）

有四种单独的链接类型：up-vote on/off、down-vote on/off，这意味着我们允许用户投票和取消投票。href就像`/vote?type=up`，`/vote?type=off-up`

问题是我不知道如何切换我发现的链接的类型属性的值（例如向上/关闭） `this.href = this.href.replace('up', 'off-up');`，但这只是一个方向。

你能告诉我如何使链接的**类型**可切换吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T15:58:10.027

您可以使用三元运算符

```
this.href = this.href.indexOf('off-up') != -1 ? this.href.replace('off-up', 'up') : this.href.replace('up', 'off-up'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T16:02:26.623

您不能以简单的方式真正切换它。相反，您可以切换一些自定义数据属性：

```
var oLink = $(this);
oLink.data("off", !oLink.data("off")); 
```

然后不要直接使用 HREF，而是在`.click()`发生链接时动态构建它，同时考虑到的值`oLink.data("off")`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-17T16:10:36.120

尝试这个：

```
this.href = this.href.indexOf('off-up') > 0 ? this.href.replace('off-up', 'up') : this.href.replace('up', 'off-up'); 
```

工作小提琴：http: [//jsfiddle.net/vjuqa/](http://jsfiddle.net/vjuqa/)

# vb.net - 为什么定义 Smo.Server 类型的变量会导致 10 秒延迟

> ID：15462832
> 
> 赞同：0
> 
> 时间：2013-03-17T15:56:24.903
> 
> 标签：vb.net, smo

在这里忍受我，好的！

我们经常使用 SMO 来做各种各样的事情，包括检查数据库中是否存在特定的存储过程。因此，我们的数据访问类中有一个名为 的方法`HasProc`，它返回一个布尔值。它位于应用程序的一部分中，一年多（可能是两年）没有更改。

最近，返回一个值需要很长时间（10 秒），我一直在试图找出原因。

事实证明，即使定义将保存 SMO 服务器的变量（***不实例化它，只是定义它）也会导致******到达函数***的代码延迟 10 秒。

这是代码的相关位`True`，为了清楚起见，现在才返回：

```
Public Function HasProc(ByVal storedProcName As String) As Boolean
    Dim s As Microsoft.SqlServer.Management.Smo.Server
    Return True
End Function 
```

在 Visual Studio 12 中，使用 F11 单步执行代码，10 秒延迟发生***在代码高亮***到达`Public Function etc..`.

如果我注释掉该`Dim`声明，它会立即运行。

更奇怪的是，如果我禁用我的以太网适配器，延迟就不会发生。

这可以在三台计算机上重现。我正在使用我们最近升级到的 VS2012 和 SMO v11，以支持 SQL Server 2012。

另一件事是即使`Return True`语句在语句之前而不是`Dim`语句之后也会发生延迟。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T15:58:52.623

如果该类的静态初始化程序执行网络 IO（这通常是个坏主意），就会发生这种情况。

如果您在延迟期间暂停调试器，您可以准确了解它在做什么。

# c# - 指定的强制转换无效，C# 网页

> ID：15462833
> 
> 赞同：1
> 
> 时间：2013-03-17T15:56:27.117
> 
> 标签：c#, casting

我正在开发 Web Page 是使用 C# 的视觉工作室，并且我正在将下面的列拉到新作者的集合中。

我不断得到一个`Specified Cast Is Not Valid error`. 我认为这与我的 int“au_id”有关。我的教授给了我们一个数据库，其中 id 是一个 nvarchar，而不是一个 int，所以我需要将它转换为它。下面是代码：

```
colauthors.Add(new authors(
     (int)reader["au_id"],
     (string)reader["au_lname"],
     (string)reader["au_fname"],
     (string)reader["phone"],
     (string)reader["address"],
     (string)reader["city"],
     (string)reader["state"],
     (string)reader["zip"],
     (bool)reader["contract"])); 
```

这就是数据库中的列及其数据类型的方式：

```
au_id nvarchar(50) 
au_lname nvarchar (50) 
au_fname nvarchar (50) 
phone char (12) 
address nvarchar (50) 
city nvarchar (50) 
state char (2) 
zip char (5) 
contract bit 
```

我知道对于合同来说，这个位将是一个布尔值，我很确定 char 是字符串。所以我几乎肯定我的错误与 id 有关，我只是不知道如何正确地转换它。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T16:13:26.133

如果数据库中的 au_id 类型是 nvarchar，那么这两种枚举转换都将失败（例如，“abc”不能转换为 int）。您可以尝试 int.tryparse ，以防万一失败返回 false 允许您提供一些备用 ID。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T15:59:06.180

您必须将`au_id`列的数据类型更改为整数（或相关数据类型），或者按照**Attila Kurucz 的**建议将值解析为 c# 中的字符串。

`contract`如果or`au_id`列是，也可能存在问题`null`。试试这个

```
(int)!reader.IsDbNull(reader.GetOrdinal("au_id")) && reader["au_id"]
...
(bool)!reader.IsDbNull(reader.GetOrdinal("contract")) && reader["contract"] 
```

或者这个（虽然它需要你`authors`稍微调整你的课程）。

```
(int?)reader["au_id"]
...
(bool?)reader["contract"] 
```

要在列的情况下指定默认值，请`null`尝试此操作。

```
((int?)reader["au_id"]) ?? 0
...
((bool?)reader["contract"]) ?? false 
```

# php - 在php中形成并提交按钮？

> ID：15462838
> 
> 赞同：-1
> 
> 时间：2013-03-17T15:56:57.620
> 
> 标签：php, html, forms, xhtml, webforms

我有表单和 php，表单询问用户他想买什么，用户选择并添加它，我想要它，以便在单击提交按钮时，存储在 php 变量中的数据显示在提交按钮下方，但我不知道该怎么做！

```
 <p><b>Billing Information</b></p>
    <form action="" method="get">

        <p>Name:
  <input type="text" name="firstname">
  <br>
      <strong>Items:</strong></p>
    </form>
  <form id="form1" method="post" action="">
      <p>
        <input type="checkbox" name="one" value= "2.39"/> 
        <label for="one">Four 100-watt light bulbs for $2.39</label>
      <p>
  <input type="checkbox" name="two" value= "4.29"/> 
  <label for="two">Eight 100-watt light bulbs for $4.29</label>
    <p>
      <input type="checkbox" name="three" value= "3.95"/> 
  <label for="three">Four 100-watt long-life light bulbs for $3.95</label>
      </p>
      <p>
        <input type="checkbox" name="four" value= "7.49"/> 
  <label for="four">Eight 100-watt long-life light bulbs for $7.49</label>
    </p>
            <input name="battery" name = "battery" type="number" id="battery" size="1" maxlength="3" />
<label for="battery">Battery Packs Checkbox $10.42 each:</label>
         </p>
      <p><strong><b>Card  Details</b>:</strong></p>
<p>
    <?php
    if(isset($_POST['value']))
    {
        $one = $_POST['one'];
        $two = $_POST['two'];
        $three = $_POST['three'];
        $four = $_POST['four'];
        $five = $_POST['battery'];

    $total = $one + $two + $three + $four + $battery;
    $interest  = $total * 0.175;
    echo "Total cost is " .$total; 
    }
    ?>
    </p>
      <p>
        <p>
    <input name="Visa" type="radio" value= <?php $cardone = "Visa"; ?>
     <p>Visa</p>
    <p>
          <input name="Mastercard" type="radio" value= <?php $cardtwo = "Mastercard"; ?> 
        <p>Mastercard</p>
    <p>
          <input name="American" type="radio" value=<?php $cardthree = "American Express"; ?> 
         <p> American Express    </p>
<p>
    <?php
    if(isset($_POST['value']))
    {
        $cardone = $_POST['cardone'];
        $cardtwo = $_POST['cardtwo'];
        $cardthree = $_POST['cardthree'];
    $total = $cardone + $cardtwo + $cardthree;
    echo "You have chose to pay using a " .$total; 
    }
    ?>
<input type="Submit" name="SubmitForm" value="Submit">
<form action="Results.php" method="post">
<input name="Submit" type="button" />
</p>
</form> 
```

对不起，如果这没有出来，但 HTML 的东西不是很好。请帮我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T16:18:58.483

没有表单字段“值”，您没有关闭表单。此外，没有 $battery 以下解决方案适用于我

```
 <p><b>Billing Information</b></p>
    <form action="" method="get">

        <p>Name:
  <input type="text" name="firstname">
  <br>
      <strong>Items:</strong></p>
    </form>
  <form id="form1" method="post" action="">
      <p>
        <input type="checkbox" name="one" value= "2.39"/> 
        <label for="one">Four 100-watt light bulbs for $2.39</label>
      <p>
  <input type="checkbox" name="two" value= "4.29"/> 
  <label for="two">Eight 100-watt light bulbs for $4.29</label>
    <p>
      <input type="checkbox" name="three" value= "3.95"/> 
  <label for="three">Four 100-watt long-life light bulbs for $3.95</label>
      </p>
      <p>
        <input type="checkbox" name="four" value= "7.49"/> 
  <label for="four">Eight 100-watt long-life light bulbs for $7.49</label>
    </p>

            <input name="battery" name = "battery" type="number" id="battery" size="1" maxlength="3" />
<label for="battery">Battery Packs Checkbox $10.42 each:</label>

    <input type ="submit" name="value" />

</form>
      <p><strong><b>Card  Details</b>:</strong></p>

<p>

    <?php
    if(isset($_POST['value']))
    {
        $one = $_POST['one'];
        $two = $_POST['two'];
        $three = $_POST['three'];
        $four = $_POST['four'];
        $five = $_POST['battery'];

    $total = $one + $two + $three + $four + $five;

    $interest  = $total * 0.175;
    echo "Total cost is " .$total; 
    }

    ?>

    </p> 
```

编辑：我不知道您是否需要单独形式的“名称”。不过，我可能错了。编辑：你在你的问题中改变了你的代码。不确定这个答案是否适用。

# spring-mvc - 动态注入bean？或者不是由 Spring 创建的 @Autowire bean

> ID：15462842
> 
> 赞同：0
> 
> 时间：2013-03-17T15:57:17.403
> 
> 标签：spring-mvc, javabeans, autowired

问题：**orderRepository** = **null**。
据我了解 orderRepository 未注入，因为**用户**不是 Spring 创建的 bean，而只是使用**new**创建的对象，然后在 dao 中设置了它的属性？

我将用户作为活动对象，因此将存储库注入模型类。任何解决方案，或者也许有更好的方法？

 `````
@Controller
class UserController {
    ...
        // Get user from DB
        User user = userService.findUser(userId);
        Order order = user.findOrder(orderId);
    ...
}

@Component  
User {  
    @Autowired  
    OrderRepository orderRepository;

    Order findOrder(long orderId) {
        Order order = orderRepository
                .findOrderOrThrowException(this.getId(), orderId);
        return order;
    }
} 
````  `* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T20:09:02.003

`User`我猜是由某个存储库创建的。所以你必须自己注射`OrderRepository`。也许您的 ORM / DB 框架支持拦截器，那么您可以有一个中心位置来注入`OrderRepository`. 或者甚至让 Spring 创建一个注入的空实例，`OrderRepository`然后框架用数据库中的值填充它。

对于`User`那些不是由存储库创建的实例，Spring 会完成这项工作。

或者你只是制作`orderRepository`一个静态成员，这更有意义。``

# php - 功能和包括

> ID：15462846
> 
> 赞同：0
> 
> 时间：2013-03-17T15:57:35.423
> 
> 标签：php, function, include

我有一个名为 paths.php 的文件，其中包含以下代码：

```
<?php

$path_1="db";
$path_2="files";

?> 
```

该文件包含在其他文件中，例如文件 index.php 和以下 include ：`include("paths.php");`

在我得到这个包含的 index.php 中，我还有以下函数：

```
<?php
function explode($value,$separator)
{
    /// Into I need take value $path_1 ///
    $exp=explode("$separator","$value");
    for ($i=0;$i<count($exp);$i++)
    {
        print "".$exp[$i]."";
    }
}
?> 
```

问题是我需要从函数范围内的包含中读取值（$value）。我的功能有问题，包含必须在功能中才能工作。

函数是否有可能采用这些值并且不需要包含在函数内部，因为如果我不将包含放在里面它不会采用正确的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T16:08:46.753

我很难理解你的意思。但我注意到您的代码中存在一些问题：

```
function explode($value,$separator)
{ 
```

[explode()](http://php.net/explode)是一个内置的 PHP 函数。你不能重新声明它。您需要为您的函数使用不同的函数名称。

如果您希望从您创建的函数内部访问`$path_1`和访问`$path_2`，您需要使用[`global`](http://php.net/global). 例如：

```
function custom_explode($value,$separator) {
    global $path_1, $path_2;
    // your other codes
    echo 'I can now access $path_1: '.$path_1.' and $path_2: '.$path_2.'!';
} 
```

# sql - 如何在行内跨满足条件的列添加案例？

> ID：15462847
> 
> 赞同：0
> 
> 时间：2013-03-17T15:57:38.250
> 
> 标签：sql

我有关于家庭电器拥有量的数据，每列一个电器，以及 Y 或 N 格式的数据。我想生成一个新列，其中包含每个家庭拥有的电器总和。当我运行以下脚本 (SQLIte) 时，我收到一条关于“)”附近语法错误的错误消息。请帮助-我尝试了各种语法。

```
SELECT Household,
SUM((CASE WHEN Stove="Y" THEN 1 ELSE 0) +
(CASE WHEN Fridge="Y" THEN 1 ELSE 0) +
(CASE WHEN TV="Y" THEN 1 ELSE 0) +
(CASE WHEN Video="Y" THEN 1 ELSE 0) +
(CASE WHEN SatDish="Y" THEN 1 ELSE 0) +
(CASE WHEN Radio="Y" THEN 1 ELSE 0) +
(CASE WHEN FixPhone="Y" THEN 1 ELSE 0) END) 
AS Appliances
FROM Assets 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T16:04:11.130

您需要在每个案例语句中结束：试试这个：

```
SELECT Household,
SUM((CASE WHEN Stove="Y" THEN 1 ELSE 0 End) +
(CASE WHEN Fridge="Y" THEN 1 ELSE 0 End) +
(CASE WHEN TV="Y" THEN 1 ELSE 0 End) +
(CASE WHEN Video="Y" THEN 1 ELSE 0 End) +
(CASE WHEN SatDish="Y" THEN 1 ELSE 0 End) +
(CASE WHEN Radio="Y" THEN 1 ELSE 0 End) +
(CASE WHEN FixPhone="Y" THEN 1 ELSE 0 End))
AS Appliances
FROM Assets
Group By Household 
```

# c# - 具有最小重叠和良好分散性的随机矩形放置

> ID：15462848
> 
> 赞同：0
> 
> 时间：2013-03-17T15:57:38.803
> 
> 标签：c#, random, geometry, distribution, bin-packing

我有一个大矩形（面向轴），其中包含许多小矩形（与父级的方向相同，固定大小为 82x176 像素）。

现在我有一个在外面的小矩形，我必须把它放在大矩形里面，这样它是： - 随机放置；- 除非由于空间不足（在这种情况下，重叠最小），否则不要与其他小矩形重叠。

该算法将在我的代码执行期间多次使用，还需要包括一个良好的分布，以便小矩形将很好地分散在大矩形的中心周围，而不是全部聚集在一个角落。

谷歌搜索，我发现了几种关于矩形打包、最大空矩形、随机分布的算法......但没有什么能真正满足我的要求，也没有显示出良好的代码实现。

有没有人有什么好主意（代码或伪代码更好，如果可能的话，通常当我看到数学公式时我的大脑会崩溃）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T01:42:41.723

您的问题太模糊，太难了，任何人都无法发布解决方案；这不是解决方案。相反，它是*如何解决这类问题的一个教训*。从阅读以下内容开始：

[http://en.wikipedia.org/wiki/How_to_Solve_It](http://en.wikipedia.org/wiki/How_to_Solve_It)

也许在你读这本书的时候拿起一本。

正如波利亚明智地说

> 如果你不能解决一个问题，那么你可以解决一个更简单的问题：找到它。

这是您的问题的一个更简单的版本：

> 我有一条直线。在这条线上，我有一组线段。集合中每条线段的起点和终点都在 0 和某个参数 n 之间，包括在内。一些线段可能会相互重叠。
> 
> 给定一条小于 n 的新线段长度，随机放置新线段，使其起点和终点都在 0 和 n 之间，并且它不会“重叠”集合中的任何线段。如果这样做是不可能的，则计算新线段的开始和结束坐标，以最小化它的重叠量。

你能用C#给我写一个解决*这个问题的方法吗？*相信我，如果你不能解决更简单的问题，那么你将永远无法解决矩形版本。

如果您无法解决*该*问题，请再次*使其变得更容易*，直到您*可以*解决为止。如果 n 永远不会大于 200 怎么办？如果现有段的集合只有零个、一个或两个元素怎么办？如果新段的长度总是三怎么办？如果你摆脱随机性的要求怎么办？如果你摆脱了最小化问题怎么办？等等。*继续让问题变得更简单，直到你能解决它。*一旦你对更简单的问题有了解决方案，就试着把它变成更大问题的解决方案。通过练习解决更简单的问题，您将深入了解如何解决更难的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T01:53:09.380

根据您的需要，某些东西可能已经存在。例如，如果您正在开发 Web 应用程序，请查看 jQuery Masonry： http: [//masonry.desandro.com/demos/basic-multi-column.html](http://masonry.desandro.com/demos/basic-multi-column.html)。

如果该代码满足您的需求，但您不是在做一个网络应用程序，那么也许您可以检查源代码以获得您需要的东西。

希望这可以帮助。

# javascript - 如何在不重写现有代码的情况下将 jquery 代码应用于不同的目标？

> ID：15462851
> 
> 赞同：0
> 
> 时间：2013-03-17T15:57:48.677
> 
> 标签：javascript, jquery

是否可以执行现有的 jquery 代码但将其应用于备用目标？

**例子**

```
$('#btn1').click(function() {
    $('#div1').fadeOut()
}); 
```

是否可以重用此代码以从#btn2 和目标#div2 执行而不重写代码。

**解决方案**

```
<a href="#"class="btn" data-id="35">Click</a>

$('.btn').click(function() {
    $('#div'+$(this).data('id')).fadeOut()
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T15:59:27.517

这是一个解决方案：

```
$('#btn1,#btn2').click(function() {
    $('#div'+this.id.slice(-1)).fadeOut()
}); 
```

如果你想要更通用的东西，为任何“btnxxx”工作，那么你可以这样做：

```
$('[id^=btn]').click(function() {
    $('#div'+this.id.slice(3)).fadeOut()
}); 
```

但是一个类和一个数据属性会更好：

```
<span class=btn data-btnid=35>AAA</span>

$('.btn').click(function() {
    $('#div'+$(this).data('btnid')).fadeOut()
}); 
```

* * *

在（不那么相关的）评论之后编辑：

这是另一个例子：

```
<span class=btn data-btnid=35 data-dir="Left">AAA</span>

$('.btn').click(function() {
    var $this = $(this);
    var $target = $('#div'+$(this).data('btnid'));
    var animation = {};
    animation['margin'+$this.data('dir')] = '0';
    $target.animate(animation);
}); 
```

# java - 为什么我做异或后总是得到“11111111”？

> ID：15462862
> 
> 赞同：-1
> 
> 时间：2013-03-17T15:58:47.913
> 
> 标签：java

这是我的代码：

```
import java.util.*;

public class DES {

static int S1[][]={{15,1,8,14,6,11,3,4,9,7,2,13,12,0,5,10}, 
                   {3,13,4,7,15,2,8,14,12,0,1,10,6,9,11,5},
                   {0,14,7,11,10,4,13,1,5,8,12,6,9,3,2,15},
                   {13,8,10,1,3,15,4,2,11,6,7,12,0,5,14,9}};

static int S2[][]={{7,13,14,3,0,6,9,10,1,2,8,5,11,12,4,15},
                   {13,8,11,5,6,15,0,3,4,7,2,12,1,10,14,9},
                   {10,6,9,0,12,11,7,13,15,1,3,14,5,2,8,4},
                   {3,15,0,6,10,1,13,8,9,4,5,11,12,7,2,14}};

static String[] L0;
static String[] R0;
static String[] L1;
static String[] R1;
static String[] L2;
static String[] R2;
static String[] L3;
static String[] R3;
static String[] L4;
static String[] R4;

static String[] K1={"1","0","1","0","1","0","1","0","1","0","1","0"};

static HashMap<String, Integer> NumMap = new HashMap<String, Integer>();

private static void Init()
{
    NumMap.put("a", 0);
    NumMap.put("b", 1);
    NumMap.put("c", 2);
    NumMap.put("d", 3);
    NumMap.put("e", 4);
    NumMap.put("f", 5);
    NumMap.put("g", 6);
    NumMap.put("h", 7);
    NumMap.put("i", 8);
    NumMap.put("j", 9);
    NumMap.put("k", 10);
    NumMap.put("l", 11);
    NumMap.put("m", 12);
    NumMap.put("n", 13);
    NumMap.put("o", 14);
    NumMap.put("p", 15);
    NumMap.put("q", 16);
    NumMap.put("r", 17);
    NumMap.put("s", 18);
    NumMap.put("t", 29);
    NumMap.put("u", 20);
    NumMap.put("v", 21);
    NumMap.put("w", 22);
    NumMap.put("x", 23);
    NumMap.put("y", 24);
    NumMap.put("z", 25);
    NumMap.put(" ", 26);
    NumMap.put(".", 27);
    NumMap.put(",", 28);
    NumMap.put("?", 29);
    NumMap.put("(", 30);
    NumMap.put(")", 31);
    NumMap.put("", 32);
}

public static int BiToDe(String[] Bi)
{
    int De=0;
    for(int i=0;i<Bi.length;i++)
    {
        if(Bi[i]=="1")
        {
            De+=(int)Math.pow(2,Bi.length-1-i);
        }
    }
    return De;
}

public static String[] Concat(String[] A, String[] B)
{
    int ALen=A.length;
    int BLen=B.length;
    String[] C=new String[ALen+BLen];
    System.arraycopy(A, 0, C, 0, ALen);
    System.arraycopy(B,0,C,ALen,BLen);
    return C;
}

public static String[] GetTail(String[] A)
{
    String[] Tail=new String[A.length/2];
    int j=0;
    for(int i=0;i<A.length;i++)
    {
        if(i%2==0)
        {
            Tail[j]=A[i];
            j++;
        }
    }
    return Tail;
}

public static String[] Xor(String[] A, String[] B)
{
    int ALen=A.length;
    String[] C=new String[ALen];
    for(int i=0;i<ALen;i++)
    {
        if(A[i]==B[i])
        {
            C[i]="0";
        }
        else
        {
            C[i]="1";
        }
    }
    return C;
}

public static String[] FunctionF(String[] InputBits, String[] RoundKey)
{
    String[] Tail=GetTail(InputBits);
    String[] ExpandedInput=Concat(InputBits, Tail);
    String[] Xored=Xor(ExpandedInput, RoundKey);

    String[] B1=Arrays.copyOfRange(Xored, 0, Xored.length/2);
    String[] B2=Arrays.copyOfRange(Xored, Xored.length/2, Xored.length);

    String[] Row1Array={B1[0],B1[B1.length-1]};

    String[] Column1Array=Arrays.copyOfRange(B1,1,B1.length-1);

    String[] Row2Array={B2[0],B2[B2.length-1]};

    String[] Column2Array=Arrays.copyOfRange(B2,1,B2.length-1);

    int CheckRow1=BiToDe(Row1Array);

    int CheckColumn1=BiToDe(Column1Array);

    int CheckRow2=BiToDe(Row2Array);

    int CheckColumn2=BiToDe(Column2Array);

    int NumOutput1=S1[CheckRow1][CheckColumn1];
    int NumOutput2=S2[CheckRow2][CheckColumn2];

    String[] Output={Integer.toBinaryString(0x10|NumOutput1).substring(1),
                     Integer.toBinaryString(0x10|NumOutput2).substring(1)};

    String[] FinalOutput=new String[Output.length*4];

    for(int i=0;i<Output.length;i++)
    {
        for(int j=0;j<4;j++)
        {
            FinalOutput[i*4+j]=Output[i].substring(j,j+1);
        }
    }

    return FinalOutput;
}

public static String[][] Divide(String[] A)
{
    int Blocks=(int)A.length/16+1;
    String[] temp;
    String[][] Divided= new String[Blocks][16];
    for(int i=0;i<Blocks;i++)
    {
        if(16*(i+1)<=A.length)
        {
            temp=Arrays.copyOfRange(A, 16*i, 16+16*i);
            for(int j=0;j<16;j++)
            {
                String t;
                t=temp[j];
                Divided[i][j]=t;
            }
        }
        else
        {
            temp=Arrays.copyOfRange(A, 16*i, A.length);
            for(int j=0;j<A.length;j++)
            {
                //String t;
                //t=temp[j];
                //Divided[i][j]=t;
            }
        }
    }

    return Divided;
}

public static void Encryption(String[][] Divided)
{
    L0=Arrays.copyOfRange(Divided[0], 0, 8);
    R0=Arrays.copyOfRange(Divided[0], 8, 16);
    L1=R0;
    String[] temp1=FunctionF(R0,K1);
    R1=Xor(L0,temp1);
    System.out.print("L0: \n");
    for(int i=0;i<8;i++)
    {
        System.out.print(L0[i]);
    }
    System.out.print("\n");
    System.out.print("R0: \n");
    for(int i=0;i<8;i++)
    {
        System.out.print(R0[i]);
    }
    System.out.print("\ntemp1: \n");
    for(int i=0;i<8;i++)
    {
        System.out.print(temp1[i]);
    }

    System.out.print("\n");

    for(int i=0;i<8;i++)
    {
        System.out.print(R1[i]);
    }
}

public static void main(String[] args) 
{
    Init();

    String PlainText = "how do you like computer science";
    String[] SplitText=PlainText.split("");
    Integer[] NumText=new Integer[SplitText.length];

    for(int i=1;i<SplitText.length;i++)
    {
        NumText[i]=NumMap.get(SplitText[i]);
    }

    Integer[] NewNumText=Arrays.copyOfRange(NumText, 1, NumText.length);

    String[] BinaryText=new String[NewNumText.length];

    for(int i=0;i<BinaryText.length;i++)
    {
        BinaryText[i]=Integer.toBinaryString(0x20|NewNumText[i]).substring(1);
    }

    String[] BitString=new String[5*BinaryText.length];

    for(int i=0;i<BinaryText.length;i++)
    {
        for(int j=0;j<5;j++)
        {
            BitString[i*5+j]=BinaryText[i].substring(j,j+1);
        }
    }

     String[][] DividedText=Divide(BitString);
     for(int i=0;i<(int)BitString.length/16;i++)
     {
         System.out.print("\n");
         for(int j=0;j<16;j++)
         {
             System.out.print(DividedText[i][j]);
         }

     }
     System.out.print("\n");
     Encryption(DividedText);

}

} 
```

问题是，通过函数`Encryption(DividedText);`我得到`L0=00111011`, `temp1=10011110`，但两者的 Xor 的结果是`11111111`. 我真的不知道发生了什么。Xor in`FunctionF`工作正常。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-17T16:01:15.913

问题是在该`Xor`方法中，您将字符串与`==`. 改为使用`.equals()`。字符串上的`==`运算符测试对象身份，而不是值相等。

```
public static String[] Xor(String[] A, String[] B)
{
    int ALen=A.length;
    String[] C=new String[ALen];
    for(int i=0;i<ALen;i++)
    {
        if(A[i].equals(B[i])) // NOT A[i]==B[i]
        {
            C[i]="0";
        }
        else
        {
            C[i]="1";
        }
    }
    return C;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T16:05:34.593

您始终记得不要使用 == 来比较两个字符串，而是在 XOR 函数中使用 equals 方法 Edit ==to equals 方法

# python - 以 10 为底的 int() 的无效文字：'2+2' 为什么我的程序不能将数字相加

> ID：15462872
> 
> 赞同：-1
> 
> 时间：2013-03-17T15:59:37.117
> 
> 标签：python, python-3.x, grid, tkinter, calculator

这些是我按下按钮时在我的输入框中显示的数字

```
def numberone():
    displayblox.insert(0,int(1))

def numbertwo():
    displayblox.insert(0,int(2))

def numberthree():
    displayblox.insert(0,int(3))

def numberfour():
    displayblox.insert(0,int(4))

def numberfive():
    displayblox.insert(0,int(5))

def numbersix():
    displayblox.insert(0,int(6))

def numberseven():
    displayblox.insert(0,int(7))

def numbereight():
    displayblox.insert(0,int(8))

def numbernine():
    displayblox.insert(0,int(9))

def plusone():
    displayblox.insert(0,'+')

def minusone():
    displayblox.insert(0,'-')

def divideone():
    displayblox.insert(0,'/')

def timesone():
    displayblox.insert(0,'*') 
```

这部分会在我按下 = 时将输入框中的内容加起来，然后显示它

```
def equalsone():
    answer = int(displayblox.get())
    displayblox.delete(0,END)
    displayblox.insert(0,answer) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T16:06:44.503

你不能只是打电话`int('2+2')`和得到`4`; 该`int()`函数仅将数字转换为整数，但不进行算术运算。

为此，您需要将字符串解析为解析树并对其进行算术运算。以树的形式跟踪输入可能比您需要转回树的字符串更容易。

或者你可以使用`eval`，但这会导致黑暗面：`eval`会愉快地执行你扔给它的*任何代码，所以它通常被认为是不安全的。*这实际上可能是安全的情况，但如果你不确定，那么假设它不是。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T16:14:48.093

你可以做：

```
my_str="2+2"
result=int(my_str.split("+")[0])+int(my_str.split("+")[1]) 
```

这是通过将字符串分解为一个列表`["2","2"]`来实现的，然后您可以在其中调用您想要转换为 int 的列表索引上的 int。然后你可以把它们加在一起，因为它们都是`int`s。

如果你想要一些更复杂的东西，例如，添加字符串的未定义长度，你可以这样做：

```
def compile_them_all(in_string,operator):
    if not isinstance(operator,str): raise Exception("operator must be a string.")
    if not isinstance(in_string,str): raise Exception("in_string must be a string.")
    return sum(int(x) for x in in_string.strip().split(operator)) 
```

或者，你也可以这样做`result=eval("2+2")`，但是，这是非常不鼓励的，因为你可以将 python 代码作为输入，它会在运行时影响 python 程序（例如，我可以这样做`result=eval("exit(0)")`，它会退出程序）。

# android - 通过 WhatsApp 发送消息

> ID：15462874
> 
> 赞同：127
> 
> 时间：2013-03-17T15:59:41.333
> 
> 标签：android, android-intent, social-networking, sharing, whatsapp

由于我发现了一些较旧的帖子，表明whatsapp 不支持这一点，我想知道是否发生了变化，是否有办法打开一个带有我通过意图发送的号码的whatsapp“聊天”？

* * *

## 回答 #1

> 赞同：192
> 
> 时间：2013-04-10T16:25:39.010

**更新** 请参考[https://faq.whatsapp.com/en/android/26000030/?category=5245251](https://faq.whatsapp.com/en/android/26000030/?category=5245251)

> WhatsApp 的点击聊天功能让您无需将电话号码保存在手机通讯录中即可开始与某人聊天。只要您知道此人的电话号码，您就可以创建一个链接，以便您开始与他们聊天。
> 
> 使用：[https ://wa.me/15551234567](https://wa.me/15551234567)
> 
> 不要使用：[https ://wa.me/+001-(555)1234567](https://wa.me/+001-(555)1234567)

> 示例：[https ://wa.me/15551234567?text=I'm%20interested%20in%20your%20car%20for%20sale](https://wa.me/15551234567?text=I%27m%20interested%20in%20your%20car%20for%20sale)

**原始答案** 这是解决方案

```
public void onClickWhatsApp(View view) {

    PackageManager pm=getPackageManager();
    try {

        Intent waIntent = new Intent(Intent.ACTION_SEND);
        waIntent.setType("text/plain");
        String text = "YOUR TEXT HERE";

        PackageInfo info=pm.getPackageInfo("com.whatsapp", PackageManager.GET_META_DATA);
        //Check if package exists or not. If not then code 
        //in catch block will be called
        waIntent.setPackage("com.whatsapp");

        waIntent.putExtra(Intent.EXTRA_TEXT, text);
        startActivity(Intent.createChooser(waIntent, "Share with"));

   } catch (NameNotFoundException e) {
        Toast.makeText(this, "WhatsApp not Installed", Toast.LENGTH_SHORT)
                .show();
   }  

} 
```

另见[http://www.whatsapp.com/faq/en/android/28000012](http://www.whatsapp.com/faq/en/android/28000012)

* * *

## 回答 #2

> 赞同：68
> 
> 时间：2014-04-18T15:16:23.153

使用此代码，您可以使用给定号码打开 whatsapp 聊天。

```
void openWhatsappContact(String number) {
    Uri uri = Uri.parse("smsto:" + number);
    Intent i = new Intent(Intent.ACTION_SENDTO, uri);
    i.setPackage("com.whatsapp");  
    startActivity(Intent.createChooser(i, ""));
} 
```

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2013-07-30T00:24:39.970

我找到了以下解决方案，首先你需要whatsapp id：

与此处和其他论坛中的其他线程的报告相匹配，我发现的登录名是某种形式：国际区号开头没有 0 或 + + 电话号码没有第一个 0 + @s.whatsapp.net

例如，如果您居住在荷兰并且电话号码为 0612325032，那么对于没有 0 或 + 的荷兰以及没有 0 的电话号码，它将是 31612325023@s.whatsapp.net -> +31。

```
public void sendWhatsAppMessageTo(String whatsappid) {

Cursor c = getSherlockActivity().getContentResolver().query(ContactsContract.Data.CONTENT_URI,
        new String[] { ContactsContract.Contacts.Data._ID }, ContactsContract.Data.DATA1 + "=?",
        new String[] { whatsappid }, null);
c.moveToFirst();

Intent whatsapp = new Intent(Intent.ACTION_VIEW, Uri.parse("content://com.android.contacts/data/" + c.getString(0)));
c.close();

 if (whatsapp != null) {

startActivity(whatsapp);      

} else {
        Toast.makeText(this, "WhatsApp not Installed", Toast.LENGTH_SHORT)
                .show();
//download for example after dialog
                Uri uri = Uri.parse("market://details?id=com.whatsapp");
                Intent goToMarket = new Intent(Intent.ACTION_VIEW, uri);
    }

} 
```

* * *

## 回答 #4

> 赞同：23
> 
> 时间：2017-09-30T05:02:51.487

简单的解决方案，试试这个。

```
String phoneNumberWithCountryCode = "+62820000000";
String message = "Hallo";

startActivity(
    new Intent(Intent.ACTION_VIEW,
        Uri.parse(
            String.format("https://api.whatsapp.com/send?phone=%s&text=%s", phoneNumberWithCountryCode, message)
        )
    )
); 
```

* * *

## 回答 #5

> 赞同：17
> 
> 时间：2014-10-13T07:39:11.637

> 无论是否安装了 Whatsapp，这都应该有效。

```
boolean isWhatsappInstalled = whatsappInstalledOrNot("com.whatsapp");
if (isWhatsappInstalled) {
    Uri uri = Uri.parse("smsto:" + "98*********7")
    Intent sendIntent = new Intent(Intent.ACTION_SENDTO, uri);
    sendIntent.putExtra(Intent.EXTRA_TEXT, "Hai Good Morning");
    sendIntent.setPackage("com.whatsapp");
    startActivity(sendIntent);
} else {
    Toast.makeText(this, "WhatsApp not Installed", Toast.LENGTH_SHORT).show();
    Uri uri = Uri.parse("market://details?id=com.whatsapp");
    Intent goToMarket = new Intent(Intent.ACTION_VIEW, uri);
    startActivity(goToMarket);

}

private boolean whatsappInstalledOrNot(String uri) {
    PackageManager pm = getPackageManager();
    boolean app_installed = false;
    try {
        pm.getPackageInfo(uri, PackageManager.GET_ACTIVITIES);
        app_installed = true;
    } catch (PackageManager.NameNotFoundException e) {
        app_installed = false;
    }
    return app_installed;
} 
```

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2016-10-22T11:56:56.263

**在Marshmallow S5**上测试，它可以工作！

```
 Uri uri = Uri.parse("smsto:" + "phone number with country code");
    Intent sendIntent = new Intent(Intent.ACTION_SENDTO, uri);
    sendIntent.setPackage("com.whatsapp");
    startActivity(sendIntent); 
```

这将与一个人**直接**聊天，如果未安装whatsapp，这将[抛出异常](https://stackoverflow.com/a/40031280/1129332)，如果whatsapp不知道电话号码，他们将提供通过短信或简单短信发送邀请

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2019-08-12T13:45:09.107

## 使用此单行代码通过 WhatsApp 发送消息

```
//NOTE : please use with country code first 2digits without plus signed
try {
      String mobile = "911234567890";
      String msg = "Its Working";
      startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse("https://api.whatsapp.com/send?phone=" + mobile + "&text=" + msg)));
      }catch (Exception e){
        //whatsapp app not install
     } 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2020-08-28T15:52:49.250

检查设备中是否安装了 WhatsApp 并在 WhatsApp 中启动“点击聊天”：

**科特林：**

```
try {
    // Check if whatsapp is installed
    context?.packageManager?.getPackageInfo("com.whatsapp", PackageManager.GET_META_DATA)
    val intent = Intent(Intent.ACTION_VIEW, Uri.parse("https://wa.me/$internationalPhoneNumber"))
    startActivity(intent)
} catch (e: NameNotFoundException) {
    Toast.makeText(context, "WhatsApp not Installed", Toast.LENGTH_SHORT).show()
} 
```

**爪哇：**

```
try {
    // Check if whatsapp is installed
    getPackageManager().getPackageInfo("com.whatsapp", PackageManager.GET_META_DATA);
    Intent intent = Intent(Intent.ACTION_VIEW, Uri.parse("https://wa.me/" + internationalPhoneNumber));
    startActivity(intent);
} catch (NameNotFoundException e) {
    Toast.makeText(context, "WhatsApp not Installed", Toast.LENGTH_SHORT).show();
} 
```

`getPackageInfo()``NameNotFoundException`如果未安装 WhatsApp，则抛出。

该`internationalPhoneNumber`变量用于访问电话号码。

**参考：**

*   [https://faq.whatsapp.com/general/chats/how-to-use-click-to-chat?category=5245251](https://faq.whatsapp.com/general/chats/how-to-use-click-to-chat?category=5245251)
*   [https://stackoverflow.com/a/2201999/9636037](https://stackoverflow.com/a/2201999/9636037)
*   [https://stackoverflow.com/a/15931345/9636037](https://stackoverflow.com/a/15931345/9636037)

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2015-11-16T22:16:19.093

以下代码由 Google Now 应用程序使用，不适用于任何其他应用程序。

我写这篇文章是因为它让我很生气，WhatsApp 不允许任何其他开发人员直接发送消息，除了 Google。

我想让其他自由开发者知道，这种合作正在进行中，而谷歌一直在谈论“对任何人开放”，而 WhatsApp 表示他们不想向开发者提供任何访问权限。

最近 WhatsApp 专门为 Google Now 添加了一个 Intent，如下所示：

```
Intent intent = new Intent("com.google.android.voicesearch.SEND_MESSAGE_TO_CONTACTS");
intent.setPackage("com.whatsapp");
intent.setComponent(new ComponentName("com.whatsapp", "com.whatsapp.VoiceMessagingActivity"));

intent.putExtra("com.google.android.voicesearch.extra.RECIPIENT_CONTACT_CHAT_ID", number);
intent.putExtra("android.intent.extra.TEXT", text);
intent.putExtra("search_action_token", ?????); 
```

我还可以发现“search_action_token”是一个包含 IBinder-Object 的 PendingIntent，它被发送回 Google App 并检查它是否是由 Google Now 创建的。

否则 WhatsApp 将不接受该消息。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2018-01-06T10:26:30.167

目前，您可以请求[的唯一官方 API ：](https://faq.whatsapp.com/en/android/26000030/)[`GET`](https://assertible.com/blog/7-http-methods-every-web-developer-should-know-and-how-to-test-them#get)

```
https://api.whatsapp.com/send?phone=919773207706&text=Hello 
```

[无论如何， WhatsApp 已经运行了](https://stackoverflow.com/a/46635985/2404470)一个秘密的 API 程序

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2019-11-19T09:02:42.163

这对我有用：

```
 Uri uri = Uri.parse("https://api.whatsapp.com/send?phone=" + "<number>" + "&text=" + "Hello WhatsApp!!");
        Intent sendIntent = new Intent(Intent.ACTION_VIEW, uri);
        startActivity(sendIntent); 
```

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2021-06-05T09:35:53.290

这是通过 发送消息的最新方法`Whatsapp`，即使接收者的电话号码不在您的`Whatsapp`聊天或电话`Contacts`列表中。

```
private fun openWhatsApp(number: String) {
    try {
        packageManager.getPackageInfo("com.whatsapp", PackageManager.GET_ACTIVITIES)
        val intent = Intent(
            Intent.ACTION_VIEW,
            Uri.parse("https://wa.me/$number?text=I'm%20interested%20in%20your%20car%20for%20sale")
        )
        intent.setPackage("com.whatsapp")
        startActivity(intent)
    } catch (e: PackageManager.NameNotFoundException) {
        Toast.makeText(
            this,
            "Whatsapp app not installed in your phone",
            Toast.LENGTH_SHORT
        ).show()
        e.printStackTrace()
    }
} 
```

`intent.setPackage("com.whatsapp")`将帮助您避免**使用**选择器打开并`Whatsapp`直接打开。

**重要说明**：如果您以`catch`语句结尾，即使`Whatsapp`已安装。请添加`queries`如下`manifest.xml`：

```
<queries>
   <package android:name="com.whatsapp" />
</queries> 
```

有关更多详细信息，请参阅此[答案](https://stackoverflow.com/a/64419307/5478548)。

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2014-09-03T10:47:18.283

这对我有用：

```
PackageManager pm = context.getPackageManager();
try {
    pm.getPackageInfo("com.whatsapp", PackageManager.GET_ACTIVITIES);
    Intent intent = new Intent();
            intent.setComponent(new ComponentName(packageName,
                    ri.activityInfo.name));
            intent.setType("text/plain");
            intent.putExtra(Intent.EXTRA_TEXT, element);

} catch (NameNotFoundException e) {
    ToastHelper.MakeShortText("Whatsapp have not been installed.");
} 
```

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2018-07-13T11:30:18.467

正如[文档](https://faq.whatsapp.com/en/android/26000030/?category=5245251)所说，您可以使用如下 URL：

`https://wa.me/15551234567`

最后一段是[E164 格式的数字](https://en.wikipedia.org/wiki/E.164)

```
Uri uri = Uri.parse("https://wa.me/15551234567");
Intent intent = new Intent(Intent.ACTION_VIEW, uri);
startActivity(intent); 
```

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2020-05-05T20:39:44.203

使用whatsapp的直接网址

```
String url = "https://api.whatsapp.com/send?phone="+number;
Intent i = new Intent(Intent.ACTION_VIEW);
i.setData(Uri.parse(url));
startActivity(i); 
```

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2020-05-14T19:35:37.153

您需要使用以下格式的 URL...

```
https://api.whatsapp.com/send?text=text 
```

然后你可以让它发送你想要的任何文本。您还可以选择指定电话号码...

```
https://api.whatsapp.com/send?text=text&phone=1234 
```

你***不能***做的是使用以下内容：

```
https://wa.me/send?text=text 
```

你会得到...

> 我们找不到您要查找的页面

`wa.me`但是，如果您同时提供电话号码和文本，它将起作用。但是，在大多数情况下，如果您要创建共享链接，您真的不想指明电话号码，因为您希望用户选择某人。在这种情况下，如果您不提供号码并`wa.me`用作 URL，*您的所有共享链接都将失败。* 请使用`app.whatsapp.com`.

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2015-08-22T08:05:18.930

这很长，但工作得很好。享受你的代码:)

```
 //method used to show IMs
private void show_custom_chooser(String value) {
    List<ResolveInfo> list = null;
    final Intent email = new Intent(Intent.ACTION_SEND);
    email.setData(Uri.parse("sms:"));
    email.putExtra(Intent.EXTRA_TEXT, "" + value);
    email.setType("text/plain"); // vnd.android-dir/mms-sms

    WindowManager.LayoutParams WMLP = dialogCustomChooser.getWindow()
            .getAttributes();
    WMLP.gravity = Gravity.CENTER;
    dialogCustomChooser.getWindow().setAttributes(WMLP);
    dialogCustomChooser.getWindow().setBackgroundDrawable(
            new ColorDrawable(android.graphics.Color.TRANSPARENT));
    dialogCustomChooser.setCanceledOnTouchOutside(true);
    dialogCustomChooser.setContentView(R.layout.about_dialog);
    dialogCustomChooser.setCancelable(true);
    ListView lvOfIms = (ListView) dialogCustomChooser
            .findViewById(R.id.listView1);
    PackageManager pm = getPackageManager();
    List<ResolveInfo> launchables = pm.queryIntentActivities(email, 0);
    // ////////////new
    list = new ArrayList<ResolveInfo>();
    for (int i = 0; i < launchables.size(); i++) {
        String string = launchables.get(i).toString();
        Log.d("heh", string);
//check only messangers
        if (string.contains("whatsapp")) {
            list.add(launchables.get(i));
        }
    }
    Collections.sort(list, new ResolveInfo.DisplayNameComparator(pm));
    int size = launchables.size();
    adapter = new AppAdapter(pm, list, MainActivity.this);
    lvOfIms.setAdapter(adapter);
    lvOfIms.setOnItemClickListener(new OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> arg0, View arg1,
                int position, long arg3) {
            ResolveInfo launchable = adapter.getItem(position);
            ActivityInfo activity = launchable.activityInfo;
            ComponentName name = new ComponentName(
                    activity.applicationInfo.packageName, activity.name);
            email.addCategory(Intent.CATEGORY_LAUNCHER);
            email.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK
                    | Intent.FLAG_ACTIVITY_RESET_TASK_IF_NEEDED);
            email.setComponent(name);
            startActivity(email);
            dialogCustomChooser.dismiss();
        }
    });
    dialogCustomChooser.show();

} 
```

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2016-01-30T08:18:31.050

我真的来晚了，但我相信现在我们有更短更好的解决方案来通过 WhatsApp 发送消息。

您可以使用以下命令调用系统选择器，然后选择您将使用哪个应用程序来分享您想要的任何内容。

```
Intent sendIntent = new Intent();
sendIntent.setAction(Intent.ACTION_SEND);
sendIntent.putExtra(Intent.EXTRA_TEXT, "This is my text to send.");
sendIntent.setType("text/plain");
startActivity(sendIntent); 
```

如果您真的需要通过 WhatsApp 发送，您只需执行以下操作（您将跳过系统选择器）

```
 Intent sendIntent = new Intent();
    sendIntent.setAction(Intent.ACTION_SEND);
    sendIntent.putExtra(Intent.EXTRA_TEXT, "This is my text to send.");
    sendIntent.setType("text/plain");
    // Put this line here
    sendIntent.setPackage("com.whatsapp");
    //
    startActivity(sendIntent); 
```

如果您需要更多信息，可以在这里找到：[WhatsApp 常见问题](https://www.whatsapp.com/faq/android/28000012)

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2019-12-31T06:00:26.323

```
private fun sendWhatsappMessage(phoneNumber:String, text:String) {        
  val url = if (Intent().setPackage("com.whatsapp").resolveActivity(packageManager) != null) {
        "whatsapp://send?text=Hello&phone=$phoneNumber"
    } else {
        "https://api.whatsapp.com/send?phone=$phoneNumber&text=$text"
    }

    val browserIntent = Intent(Intent.ACTION_VIEW, Uri.parse(url))
    startActivity(browserIntent)
} 
```

这是实现这一目标的更简单的方法。此代码检查设备上是否安装了 whatsapp。如果已安装，它将绕过系统选择器并转到 whatsapp 上的联系人并在聊天中预先输入文本。如果未安装，它会在您的网络浏览器上打开 whatsapp 链接。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2013-03-19T10:36:14.627

检查此代码，

```
 public void share(String subject,String text) {
     final Intent intent = new Intent(Intent.ACTION_SEND);

String score=1000;
     intent.setType("text/plain");
     intent.putExtra(Intent.EXTRA_SUBJECT, score);
     intent.putExtra(Intent.EXTRA_TEXT, text);

     startActivity(Intent.createChooser(intent, getString(R.string.share)));
} 
```

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2013-12-21T05:28:04.327

这对我有用：

```
public static void shareWhatsApp(Activity appActivity, String texto) {

    Intent sendIntent = new Intent(Intent.ACTION_SEND);     
    sendIntent.setType("text/plain");
    sendIntent.putExtra(android.content.Intent.EXTRA_TEXT, texto);

    PackageManager pm = appActivity.getApplicationContext().getPackageManager();
    final List<ResolveInfo> matches = pm.queryIntentActivities(sendIntent, 0);
    boolean temWhatsApp = false;
    for (final ResolveInfo info : matches) {
      if (info.activityInfo.packageName.startsWith("com.whatsapp"))  {
          final ComponentName name = new ComponentName(info.activityInfo.applicationInfo.packageName, info.activityInfo.name);
          sendIntent.addCategory(Intent.CATEGORY_LAUNCHER);
          sendIntent.setFlags(Intent.FLAG_ACTIVITY_NO_HISTORY | Intent.FLAG_ACTIVITY_NEW_TASK);
          sendIntent.setComponent(name);
          temWhatsApp = true;
          break;
      }
    }               

    if(temWhatsApp) {
        //abre whatsapp
        appActivity.startActivity(sendIntent);
    } else {
        //alerta - você deve ter o whatsapp instalado
        Toast.makeText(appActivity, appActivity.getString(R.string.share_whatsapp), Toast.LENGTH_SHORT).show();
    }
} 
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2018-06-16T04:22:19.893

获取您要发送消息的联系人号码并为whatsapp创建uri，这里c是返回所选联系人的光标。

```
Uri.parse("content://com.android.contacts/data/" + c.getString(0)));
i.setType("text/plain");
i.setPackage("com.whatsapp");           // so that only Whatsapp reacts and not the chooser
i.putExtra(Intent.EXTRA_SUBJECT, "Subject");
i.putExtra(Intent.EXTRA_TEXT, "I'm the body.");
startActivity(i); 
```

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2020-01-02T17:57:50.530

从[文档](https://faq.whatsapp.com/en/android/26000030/?category=5245251)

> 要使用将自动出现在聊天文本字段中的预填充消息创建您自己的链接，请使用 [https://wa.me/whatsappphonenumber/?text=urlencodedtext](https://wa.me/whatsappphonenumber/?text=urlencodedtext)其中 whatsappphonenumber 是国际格式和 URL 的完整电话号码-encodedtext 是 URL 编码的预填充消息。
> 
> 示例：[https](https://wa.me/15551234567?text=I) : //wa.me/15551234567?text=I 'm%20interested%20in%20your%20car%20for%20sale

## 代码示例

```
val phoneNumber = "13492838472"
    val text = "Hey, you know... I love StackOverflow :)"
    val uri = Uri.parse("https://wa.me/$phoneNumber/?text=$text")
    val sendIntent = Intent(Intent.ACTION_VIEW, uri)
    startActivity(sendIntent) 
```

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2021-04-14T15:54:07.260

这个终于在 Kotlin 中为我工作了：

```
private fun navigateToWhatsApp() {
        try {
            val url = "https://api.whatsapp.com/send?phone=+91${getString(R.string.contact)}"
            startActivity(Intent(Intent.ACTION_VIEW, Uri.parse(url)).setPackage("com.whatsapp"))
        } catch (e: Exception) {
            showToast("Whatsapp app not installed in your device")
        }
    } 
```

* * *

## 回答 #25

> 赞同：-1
> 
> 时间：2018-11-03T16:39:23.250

[如我的文章](https://www.codeproject.com/Articles/1265615/Sending-WhatsApp-messages-from-a-Win32-cplusplus-p)所示，以下 API 可以在 c++ 中使用。

您需要定义几个常量：

```
//
#define    GroupAdmin                <YOUR GROUP ADMIN MOBILE PHONE>
#define GroupName                <YOUR GROUP NAME>
#define CLIENT_ID                <YOUR CLIENT ID>
#define CLIENT_SECRET            <YOUR CLIENT SECRET>

#define GROUP_API_SERVER        L"api.whatsmate.net"
#define GROUP_API_PATH          L"/v3/whatsapp/group/text/message/12"
#define IMAGE_SINGLE_API_URL    L"http://api.whatsmate.net/v3/whatsapp/group/image/message/12"

// 
```

然后连接到 API 的端点。

```
hOpenHandle = InternetOpen(_T("HTTP"), INTERNET_OPEN_TYPE_DIRECT, NULL, NULL, 0);
if (hOpenHandle == NULL)
{
    return false;
}

hConnectHandle = InternetConnect(hOpenHandle,
    GROUP_API_SERVER,
    INTERNET_DEFAULT_HTTP_PORT,
    NULL, NULL, INTERNET_SERVICE_HTTP,
    0, 1);

if (hConnectHandle == NULL)
{
    InternetCloseHandle(hOpenHandle);
    return false;
} 
```

然后发送 header 和 body 并等待需要“OK”的结果。

第 1 步 - 打开一个 HTTP 请求：

```
const wchar_t *AcceptTypes[] = { _T("application/json"),NULL };
HINTERNET hRequest = HttpOpenRequest(hConnectHandle, _T("POST"), GROUP_API_PATH, NULL, NULL, AcceptTypes, 0, 0);

if (hRequest == NULL)
{
    InternetCloseHandle(hConnectHandle);
    InternetCloseHandle(hOpenHandle);
    return false;
} 
```

第 2 步 - 发送标头：

```
std::wstring HeaderData;

HeaderData += _T("X-WM-CLIENT-ID: ");
HeaderData += _T(CLIENT_ID);
HeaderData += _T("\r\nX-WM-CLIENT-SECRET: ");
HeaderData += _T(CLIENT_SECRET);
HeaderData += _T("\r\n");
HttpAddRequestHeaders(hRequest, HeaderData.c_str(), HeaderData.size(), NULL); 
```

第 3 步 - 发送消息：

```
std::wstring WJsonData;
WJsonData += _T("{");
WJsonData += _T("\"group_admin\":\"");
WJsonData += groupAdmin;
WJsonData += _T("\",");
WJsonData += _T("\"group_name\":\"");
WJsonData += groupName;
WJsonData += _T("\",");
WJsonData += _T("\"message\":\"");
WJsonData += message;
WJsonData += _T("\"");
WJsonData += _T("}");

const std::string JsonData(WJsonData.begin(), WJsonData.end());

bResults = HttpSendRequest(hRequest, NULL, 0, (LPVOID)(JsonData.c_str()), JsonData.size()); 
```

现在只需检查结果：

```
TCHAR StatusText[BUFFER_LENGTH] = { 0 };
DWORD StatusTextLen = BUFFER_LENGTH;
HttpQueryInfo(hRequest, HTTP_QUERY_STATUS_TEXT, &StatusText, &StatusTextLen, NULL);
bResults = (StatusTextLen && wcscmp(StatusText, L"OK")==FALSE); 
```

# android - 无法将标头设置为 HttpPost 的 multipart/form-data

> ID：15462878
> 
> 赞同：0
> 
> 时间：2013-03-17T16:00:12.570
> 
> 标签：android, http-post, multipartentity

我正在尝试将一些压缩数据和文本发布到 Web 服务器上的 perl 程序，但无法将标头从八位字节流更改为多部分/表单数据。

我的代码是：-

```
HttpClient httpclient = new DefaultHttpClient();
String url = "http://webaddress/perl.pl";
HttpPost httppost = new HttpPost(url);
httppost.setHeader("Content-Type","multipart/form-data");
MultipartEntity entity = new MultipartEntity(HttpMultipartMode.BROWSER_COMPATIBLE);

try {

    entity.addPart("mtdata",new ByteArrayBody(data, file.getLastPathSegment()));
    entity.addPart("email", new StringBody(strUserName));
    entity.addPart("mtfilename", new StringBody(file.getLastPathSegment()));
    httppost.setEntity(entity);

    HttpResponse httpresponse = httpclient.execute(httppost);
    HttpEntity resEntity = httpresponse.getEntity();

    response = EntityUtils.toString(resEntity);
} 
```

收到的原始数据是：-

```
Buffer = --FfT4ZNRUCPw6yONkpSsXNkA3WA2l6fvy53
Content-Disposition: form-data; name="mtdata"; filename="filename"
Content-Type: application/octet-stream             <<=== cannot change this

... Some binary data ... 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T21:17:41.473

最后，我发现最好的方法是将其保存为文件，然后使用 MultipartEntity 和 FileBody 明确说明 Content-Type 发布文件。

我使用的代码是：-

```
pairs.addPart("File", new FileBody(fout,"multipart/form-data")); 
```

顺便说一句，我还发现我需要使用 ZipOutputStream 而不是 GZIPOutputStream 以便我可以添加未压缩的文件名。

代码是：-

```
data = bos.toByteArray();

OutputStream fos = new FileOutputStream(extStorageDirectory +  newfilename);
ZipOutputStream zos = new ZipOutputStream(new BufferedOutputStream(fos));
try {
    ZipEntry entry = new ZipEntry(file.getLastPathSegment());
    zos.putNextEntry(entry);
    zos.write(data);
    zos.closeEntry();
}
finally {
    zos.close();
}
fos.close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T16:09:57.283

尝试插入

```
httppost.addHeader("Content-Type", "multipart/form-data"); 
```

并删除

```
MultipartEntity entity = new MultipartEntity(HttpMultipartMode.BROWSER_COMPATIBLE); 
```

# java - 使用在场景构建器中创建的 fxml 文件从 java 添加图像

> ID：15462879
> 
> 赞同：0
> 
> 时间：2013-03-17T16:00:12.863
> 
> 标签：java, javafx-2, javafx, fxml, scenebuilder

如果我想从 java 将图像节点添加到 fxml（在场景构建器中创建）文件，我该如何实现呢？

```
private ImageView close;
private ImageView close;
Image i = new Image(“file:C:\\Users\\Tarun\\Desktop\\Close-icon.png”);
close = new ImageView();
close.setImage(i);
close.setFitHeight(20);
close.setFitWidth(20);
close.setX(570);
close.setY(10);
Parent root = FXMLLoader.load(getClass().getResource(“table.fxml”));
Scene scene = new Scene(root);
stage.setScene(scene);
stage.show(); 
```

我知道有一些方法 root.getchidren.add(close) 但在这里我无法实现这个方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T08:04:38.933

您需要转换`Parent`为适当的类。例如

```
AnchorPane root = (AnchorPane)FXMLLoader.load(getClass().getResource(“table.fxml”));
root.getChidren.add(close); 
```

# c# - 使用 bool 对自定义列表进行排序

> ID：15462885
> 
> 赞同：1
> 
> 时间：2013-03-17T16:00:45.860
> 
> 标签：c#, sorting, icomparer

有一堂课

```
public class Camera
{
    ...
    public bool live;
    ...
} 
```

这是排序类

```
public class CameraSortByLive : IComparer<Camera>
{
    private bool asc;

    public CameraSortByLive(bool a)
    {
        this.asc = a;
    }

    public int Compare(Camera x, Camera y)
    {
            if (x.live != y.live)
                return asc ? 0 : 1;
            else
                return asc ? 1 : 0;
    }
} 
```

这就是我使用它的方式：

```
List<Camera> CameraList = new List<Camera>();
CameraList.Sort(new CameraSortByLive(sortAsc)); 
```

现在，我在成员旁边`live`还有其他成员`int`，`string`输入。对于这些类型，我有类似的排序类实现`IComparer`。他们没有问题。这个`live`成员的唯一问题。它根本没有排序。我希望它位于列表的顶部或底部，但它位于中间的某个位置。我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T16:04:48.760

问题在于您的比较功能。您应该说明一些顺序，例如 false < true 或 true < false。在您的函数中，有时 true < false 有时 false < true。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T16:03:25.113

```
public int Compare(Camera x, Camera y)
{   
     return (asc && x.live) ? 1 : 0;
} 
```

您的代码的问题是您无法确定列表元素相互比较的顺序。因此，您正在比较两个凸轮，如果它们的`live`成员**相同**，您认为第一个比第二个“更大”。所以，如果你的第一个凸轮是“死的”，第二个是“活的”，第一个*更大*。那绝对不是你想要的。

使用此代码，如果左侧凸轮处于活动状态 - 它被认为大于右侧，无论右侧的活动值如何。由于我们不关心按其他功能排序，我们真的不关心实时摄像头的“内部”顺序（即所有实时摄像头都被认为是平等的，以及所有死摄像头也被认为是平等的）

# php - 使用 htmlspecialchars、nl2br、str_replace、htmlspecialchars_decode 和 stripslashes 清理用户输入 HTML

> ID：15462890
> 
> 赞同：1
> 
> 时间：2013-03-17T16:01:14.460
> 
> 标签：php, html, xss

我做了这个功能

```
function echoSanitizer($var)
{
$var = htmlspecialchars($var, ENT_QUOTES);
$var = nl2br($var, false);
$var = str_replace(array("\\r\\n", "\\r", "\\n"), "<br>", $var);
$var = htmlspecialchars_decode($var);
return stripslashes($var);
} 
```

会不会受到 xss 攻击？

*   htmlspecialchars 带走 html 标签
*   nl2br 用于新线路
*   str_replace 将 \r\n 转换为`<br>`
*   htmlspecialchars_decode 转换回原始字符
*   带斜杠到 STRIPSLASHES

为什么我需要所有这些？因为我想预览用户输入的内容，并且我想让他们看到所见即所得的东西。一些输入来自 textarea 框，我希望保留空格，因此需要 nl2br。

通常我问的是 (htmlspecialchars_decode) 因为它对我来说是新的。安全吗？总的来说，如果我用它来显示用户输入，我会确保这个功能是安全的吗？

（此方案中不涉及数据库。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-07T21:37:50.020

# groovy - 从groovy中的href-tag中提取URL

> ID：15462896
> 
> 赞同：4
> 
> 时间：2013-03-17T16:01:44.883
> 
> 标签：groovy, xmlslurper, tag-soup

我需要解析格式错误的 HTML 页面并从中提取某些 URL 作为任何类型的集合。我真的不在乎什么样的集合，我只需要能够迭代它。

假设我们有这样的结构：

```
<html>
  <body>
    <div class="outer">
      <div class="inner">
        <a href="http://www.google.com" title="Google">Google-Link</a>
        <a href="http://www.useless.com" title="I don't need this">Blah blah</a>
      </div>
      <div class="inner">
        <a href="http://www.youtube.com" title="Youtube">Youtube-Link</a>
        <a href="http://www.useless2.com" title="I don't need this2">Blah blah2</a>
      </div>
    </div>
  </body>
</html> 
```

这是我到目前为止所做的：

```
// tagsoup version 1.2 is under apache license 2.0
@Grab(group='org.ccil.cowan.tagsoup', module='tagsoup', version='1.2' )
XmlSlurper slurper = new XmlSlurper(new org.ccil.cowan.tagsoup.Parser());

GPathResult nodes = slurper.parse("test.html"); 
def links = nodes."**".findAll { it.@class == "inner" }
println links 
```

我想要类似的东西

```
["http://google.com", "http://youtube.com"] 
```

但我得到的是：

```
["Google-LinkBlah blah", "Youtube-LinkBlah blah2"] 
```

更准确地说，我不能使用所有 URL，因为我需要解析的 HTML 文档大约有 15000 行长，并且有很多我不需要的 URL。所以我需要每个“内部”块中的**第一个**URL。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T09:43:45.800

正如 The Trav 所说，您需要`href`从每个匹配的`a`标签中获取属性。

您已经编辑了您的问题，所以其中的`class`一点`findAll`没有意义，但是对于当前的 HTML 示例，这应该可以工作：

```
def links = nodes.'**'.findAll { it.name() == 'a' }*.@href*.text() 
```

### 编辑

如果（如您在编辑后所说）您只想要第一个`a`标记为 的内容`class="inner"`，请尝试：

```
def links = nodes.'**'.findAll { it.@class?.text() == 'inner' }
                 .collect { d -> d.'**'.find { it.name() == 'a' }?.@href }
                 .findAll() // remove nulls if there are any 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T02:18:56.140

您正在每个节点上寻找 @href

# sql - 搜索特定年份雇用的员工

> ID：15462898
> 
> 赞同：0
> 
> 时间：2013-03-17T16:01:58.710
> 
> 标签：sql, oracle11g

我的练习是创建一个查询来获取从 1998 年 7 月到 1999 年 12 月期间雇用的员工列表。列表必须包含员工 ID、姓氏和名字以及月薪——因为该表包含年薪和员工使用 hr 表模式每年获得 12 份薪水。

我写的是：

```
select employee_id, last_name, first_name, salary/12 as monthly_salary
from employees
where hire_date between ... and ... ; 
```

我的问题是：我应该如何只用上面提到的月份和年份搜索hire_date，例如。1998 年 7 月？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T16:19:08.733

如果您只有年月号，并且正在查找该月的第一个和最后一个日期，您可以使用`to_date`和`last_date`函数轻松找到。

```
SQL> select to_date('2013/03', 'YYYY/MM') first from dual;
FIRST
---------
01-MAR-13

SQL> select last_day(to_date('2013/03', 'YYYY/MM')) last from dual;
LAST
---------
31-MAR-13 
```

使用这些函数在查询中构建边界日期。

注意：您也可以对 做一些事情`trunc(hire_date, 'MM')`，但这可能会阻止优化器在 上使用索引`hire_date`，这是不可取的。

# jquery - :not 和 :first-child

> ID：15462899
> 
> 赞同：1
> 
> 时间：2013-03-17T16:02:04.267
> 
> 标签：jquery, jquery-selectors

在一个`for`循环中，我将一个 div 的内容替换为另一个，并向其中添加一个类。

例子：

```
<div class="page">Loading..</div>
<div class="page">Loading..</div>
<div class="page">Loading..</div> 
```

和 jQuery：

```
$(".page:not(.active):first-child").html("Loaded.").addlass(".active"); 
```

它仅适用于第一个。我该怎么做？最后，它们必须全部“加载”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T16:05:53.333

像这样？

```
$(".page:not(.active)").html("Loaded.").addClass("active"); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-17T16:05:44.413

将您的 jquery 更改为

```
 $(".page:not(.active)").html("Loaded.").addclass("active"); 
```

[jsfiddle](http://jsfiddle.net/NIkhar/neyee/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-17T16:05:45.653

将其替换为

```
$(".page:not(.active)").eq(0).html("Loaded.").addClass("active"); 
```

要添加一个类，您不需要点，`:first-child`仅适用于第一个子元素，而您需要过滤集合的第一个元素。

# c++ - 计算数组矩形区域中的值的总和

> ID：15462901
> 
> 赞同：0
> 
> 时间：2013-03-17T16:02:25.037
> 
> 标签：c++, algorithm

我有一个非常大的数组，包含许多值并将其存储在`row-major 1d array`.

```
ex:  
   1 2 3  
   4 5 6 
```

将存储在`int* array = {1,2,3,4,5,6};`

我要做的是给出`row1, row2, column1, column2`，然后打印出面积的总和，**它会要求多次计算不同的面积。**

我想到的是首先使用嵌套循环遍历数组并将每一行的总和存储在`sum_row`其中，并将每一列的总和存储在`sum_column`其中并存储总元素的总和 im `totalSum`。

然后`totalSum - the row and the columns that surrond it + the elemnts that has been minus twice`。

但它似乎足够快，是否有任何算法可以做得更快或一些编码风格的提示可以让这个因素变得很小？

提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T16:15:27.160

在我看来，您已经用另一个替换了一个双重迭代。问题在于减去“ `the elemnts that has been minus twice`”；除非我弄错了，否则这涉及迭代这些元素以对它们求和。

相反，只需遍历需要求和的矩形区域。我怀疑它会更慢。

通过生成求和的左上矩阵的矩阵可以获得更有效的算法。[*（请参阅关于总面积表*](http://en.wikipedia.org/wiki/Summed_area_table)的 Wikipedia 文章。）然后，您可以通过查找四个面积总和来计算任何子矩阵总和。

# excel - 需要结合 .getElementsByClass 和 .getElementsById 从网站抓取数据

> ID：15462904
> 
> 赞同：0
> 
> 时间：2013-03-17T16:03:04.380
> 
> 标签：excel, web, web-scraping, scrape, vba

我正在使用 VBA 编写一个简单的爬虫。我发现我正在寻找的数据对应于 node `<h6 class="country-name" id="Australia">`。

我知道如果我想从中选择数据，让我们说，`<div class="section-country">`我应该`.getElementsByClassName("section-country")`在我的 VBA 宏中使用。

在节点中同时存在 class**和**id 的情况下，我应该在 VBA 宏中插入哪个命令来抓取数据？

非常感谢，阿维图斯

编辑：写作 .getElementsByClassName("country-name").getElementsById("Australia") 给我一个错误。为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T21:57:18.827

`getElementsByID`（复数）不存在 - 应该只有一个具有给定 ID 的项目。因此，使用`getElementByID`确实存在的（单数）。如果碰巧有多个具有相同 ID 的元素，此函数将返回第一个。

正如其他人所说，按 ID 选择听起来比按类别选择更适合您想要做的事情

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-25T10:22:18.410

必须有一个像 getelementbyxpath 这样的方法，你可以通过使用这个 xpath "//div[@class='country-name' and @id ='Australia']" 来使用这个方法

例如：getElementsByXpath("//div[@class='country-name' and @id ='Australia']")

在这里阅读更多[如何设置网络抓取的爬虫](https://www.promptcloud.com/extract-data-from-a-website-extract-data-from-multiple-sites/)

# c - 将整数作为列表访问

> ID：15462912
> 
> 赞同：0
> 
> 时间：2013-03-17T16:03:42.097
> 
> 标签：c

```
void raiden(unsigned long *data,unsigned long *result,unsigned long *key)
{

unsigned long b0=data[0] , b1=data[1] 
```

试图理解这一点，但收效甚微。无符号长整数如何作为数据[某物]访问？我可以理解这是数据将是一个类似 {"foo","bar"} 的列表，但它是如何指代整数的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T16:08:38.747

因为`unsigned long *`不是`unsigned long`。它是指向内存中某个地址的指针。有关更多信息，我建议阅读本书 [http://en.wikipedia.org/wiki/The_C_Programming_Language](http://en.wikipedia.org/wiki/The_C_Programming_Language)

# ios - 如何暂停 dispatch_queue_t 和它创建的队列

> ID：15462913
> 
> 赞同：6
> 
> 时间：2013-03-17T16:03:50.587
> 
> 标签：ios, objective-c, multithreading, cocoa-touch

我正在创建一个可以淡入淡出音乐的程序。问题是其他线程/队列可以暂停音乐，这意味着淡入和淡出不仅需要暂停，还需要暂停。我需要能够在 dispatch_after 上暂停“计时器”（因为在音乐开始播放时调用它以告诉它何时开始淡出，如果它被暂停则需要延迟）并暂停队列本身（为了在淡入或淡出时暂停淡入或淡出）

这是代码（fadeIn 和 delayFadeOut 都在程序开始时调用）：

```
- (void) doFadeIn: (float) incriment to: (int) volume with: (AVAudioPlayer*) thisplayer on: (dispatch_queue_t) queue{
    dispatch_async(queue, ^{
        double delayInSeconds = .1;
        dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, delayInSeconds * NSEC_PER_SEC);
        dispatch_after(popTime, queue, ^(void){
            thisplayer.volume = (thisplayer.volume + incriment) < volume ? thisplayer.volume + incriment : volume;
            NSLog([[[NSNumber alloc] initWithFloat:thisplayer.volume] stringValue]);
            if (thisplayer.volume < volume) {
                [self doFadeIn:incriment to:volume with:thisplayer on:queue];
            }
        });
    });    
}

-(void) doDelayFadeOut: (float) incriment with: (AVAudioPlayer*) thisplayer on: (dispatch_queue_t) queue
{
    dispatch_async(queue, ^{
        double delayInSeconds = .1;
        dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, delayInSeconds * NSEC_PER_SEC);
        dispatch_after(popTime, queue, ^(void){
            thisplayer.volume = (thisplayer.volume - incriment) > 0 ? thisplayer.volume - incriment : 0;
            NSLog([[[NSNumber alloc] initWithFloat:thisplayer.volume] stringValue]);
            if (thisplayer.volume > 0.0) {
                [self doDelayFadeOut:incriment with:thisplayer on:queue];
            }
        });
    });
}

-(void) fadeIn: (AVAudioPlayer*) dFade {
    if (dFade == nil) {
        return;
    }
    dispatch_queue_t queue = dispatch_queue_create("com.cue.MainFade", NULL);
    dispatch_async( queue, ^(void){
        if(dFade !=nil){
            double incriment = ([self relativeVolume] / [self fadeIn]) / 10; //incriment per .1 seconds.
            [self doFadeIn: incriment to: [self relativeVolume] with:dFade on:dispatch_queue_create("com.cue.MainFade", 0)];
        }

    });
}

- (void) delayFadeOut: (AVAudioPlayer*) dFade { //d-fade should be independent of other threads
    if (dFade == nil) {
        return;
    }
    int timeRun = self.duration - self.fadeOut;
    dispatch_queue_t queue = dispatch_queue_create("com.cue.MainFade", NULL);
    dispatch_time_t mainPopTime = dispatch_time(DISPATCH_TIME_NOW, (int64_t)(timeRun * NSEC_PER_SEC));
    printf("test");
    dispatch_after(mainPopTime, queue, ^(void){
        if(dFade !=nil){
            double incriment = ([dFade volume] / [self fadeOut])/10; //incriment per .1 seconds.
            [self doDelayFadeOut:incriment with:dFade on:dispatch_queue_create("com.cue.MainFade", 0)];
        }

    });
    if (self.cueType == 2) {
        [self callNext];
    }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-17T23:52:58.903

对于您的一般性问题，呼叫是`dispatch_suspend()`（连同`dispatch_resume()`）。这将防止特定队列上的任何新块被调度。它不会对已经运行的块产生任何影响。如果您想暂停已安排并正在运行的块，则由您的代码检查一些条件并暂停。

但是，在使用它时要理解的关键是没有任何东西可以“暂停 dispatch_after 上的“计时器”。” 如果你说要在 1 秒后发送，那么它绝对会在 1 秒后发送。但“调度”并不意味着“运行”。它的意思是“排队”。如果该队列被挂起，则该块将挂起，直到队列恢复。需要注意的是，您不希望一堆淡入淡出块堆积在队列中。如果他们这样做了，当您恢复队列时，他们都将被安排为背靠背。查看您的代码，这可能不会发生，因此这可能对您有用。请记住，调度意味着“排队”。非暂停队列按顺序安排它们的块。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-17T21:02:15.863

对于挂起队列/取消操作，您应该使用`NSOperation`and`NSOperationQueue`而不是 GCD。见[这里](http://developer.apple.com/library/mac/#documentation/General/Conceptual/ConcurrencyProgrammingGuide/OperationObjects/OperationObjects.html#//apple_ref/doc/uid/TP40008091-CH101-SW1 "Apple 并发编程指南")。

# sql-server - SQL Server：更改表类型

> ID：15462914
> 
> 赞同：1
> 
> 时间：2013-03-17T16:03:53.083
> 
> 标签：sql-server, tsql

当您`alter column`多次执行相同的操作时会发生什么，例如：

```
ALTER table1 ALTER column column1 varchar(40)
ALTER table1 ALTER column column1 varchar(40)
... 
```

SQL Server 是首先比较更改类型还是对每个类型都使用相同的机制`alter`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T17:45:34.360

你可以查看事务日志，或者使用表变化跟踪，或者使用CDC跟踪，然后你会发现第一次和第二次的id有什么区别。你会发现没有什么不同。

# knockout-validation - 如何使用敲除验证在视图模型中调用 isValid() 函数

> ID：15462915
> 
> 赞同：2
> 
> 时间：2013-03-17T16:03:53.647
> 
> 标签：knockout-validation

我有一个定义如下的视图模型：

```
var ViewModel = function() {
    var self = this;
    self.property1 = ko.observable().extend({ required: true });
    self.property2 = ko.computed(function() {
        return self.property1();
    });
    self.form_onsubmit = function (form) {
        if (!self.isValid()) {
            console.log("error");
        }
        return false;
    };
};

$(function () {
    ko.applyBindingsWithValidation(new ViewModel());
}); 
```

当我调用该`form_onsubmit`函数时，发生错误：

```
TypeError: self.isValid is not a function
if (!self.isValid()) { 
```

怎么解决，谢谢^^^

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-01T21:31:00.397

添加

`self.errors = ko.validation.group(self);`

到您的视图模型

# jakarta-ee - 无法检测到 Persistence.xml

> ID：15462918
> 
> 赞同：1
> 
> 时间：2013-03-17T16:04:00.867
> 
> 标签：jakarta-ee, persistence, maven-3, jboss7.x, war

我有 3 天的时间寻找解决方案，但没有任何帮助，我想部署一个 MAVEN Web 项目，这个 Web 项目包含一个 EJB maven 项目的依赖项（我使用 MAVEN POM EDITOR 添加这个依赖项）.. 当我做两个项目的 MAVEN INSATALL 一切都很好。但是当我尝试部署 WEB maven 项目（我复制 WAR，然后我将其粘贴到我的 Jboss 7.0.2 的 stadlone 部署文件夹中）时，我得到一个与Persistence.xml 由

```
 Can't find a deployment unit named ModuleEjbPU at deployment "GestionReclamationWeb-1.0-SNAPSHOT.war 
```

我试图将 META-INF web.xml 文件夹放入 WEB 内容、src、lib 我还尝试删除 EJB 依赖项并将 jar（EJB 项目的）放入 meta inf lib

我觉得我的 web 项目的战争中找不到persistence.xml

如果你想让我提供我准备好的代码..我需要帮助..谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T02:52:58.313

您应该将其放置`persistence.xml`在`WEB-INF/classes/META-INF/persistence.xml`Where [to put persistence.xml in web app？](http://javahowto.blogspot.com/2007/06/where-to-put-persistencexml-in-web-app.html)

通过使用 Maven 方式，`persistence.xml`应该放置在`src/main/resources/META-INF/persistence.xml`

我希望这可能会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T17:15:00.537

您的持久性单元已配置为在资源本地模式下使用，但您需要将其配置为在容器中使用。为了使它工作：

1.  在您的容器中配置数据源，请参阅[this](https://docs.jboss.org/author/display/AS71/DataSource+configuration)。
2.  像这样更改持久性定义：

    ```
    <?xml version="1.0" encoding="UTF-8"?>
    <persistence version="2.0" xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
        <persistence-unit name="ModuleEjbPU" transaction-type="JTA">
            <jta-data-source>name</jta-data-source>
            <exclude-unlisted-classes>false</exclude-unlisted-classes>
            <!-- Indique a Hibernate de (re-)créer la BDD au lancement de l'application -->
            <property name="hibernate.hbm2ddl.auto" value="create" />
        </persistence-unit>
    </persistence> 
    ```

在我有的地方`<jta-data-source>name</jta-data-source>`，将 name 替换为您在 1 中提出的任何 JNDI 名称。

瞧，假设不会出现其他问题。

# qt - Qt：如何在 QStatusBar 右侧添加一个小部件

> ID：15462924
> 
> 赞同：7
> 
> 时间：2013-03-17T16:04:26.980
> 
> 标签：qt

当我使用类`addWidget`的功能将新小部件添加到状态栏时，`QStatusBar`这个新小部件将添加到状态栏的左侧，但我将其添加到右侧。是否可以不改变主窗口的方向？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-17T16:14:49.340

你需要使用[QStatusBar](http://qt-project.org/doc/qt-4.8/qstatusbar.html#addPermanentWidget) .addPermanentWidget() 来达到这个效果。这是该方法的文档：

`void QStatusBar::addPermanentWidget ( QWidget * widget, int stretch = 0 )`

> 将给定的小部件永久添加到此状态栏，如果它还不是此 QStatusBar 对象的子级，则重新设置小部件的父级。当状态栏增长和缩小时，stretch 参数用于计算给定小部件的合适大小。默认拉伸因子为 0，即为小部件提供最小空间。永久意味着小部件可能不会被临时消息遮挡。**它位于状态栏的最右侧**。

# android - this.getView() 创建地图片段后返回 null

> ID：15462935
> 
> 赞同：0
> 
> 时间：2013-03-17T16:05:36.763
> 
> 标签：android, google-maps-android-api-2, supportmapfragment

我正在尝试使用[此处建议](https://stackoverflow.com/a/15109793/611421)的解决方案移动 Google Maps v2 中的“我的位置”按钮。

我遇到的问题是我得到了一个 nullpointerexception，结果`this.getView()`返回 null，这很奇怪，因为当到达那条线时，已经创建了片段。onCreateView() 例程已经完成，对地图进行了一些初始化，所以我确定它存在。应用程序的其余部分也可以很好地访问此地图对象。

我的 main.xml 文件的相关部分（当然，这个 RelativeLayout 中还有很多，但这是唯一存在的地图片段）：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:map="http://schemas.android.com/apk/res-auto"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<fragment
    android:id="@+id/map"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    class="com.squirrel.hkairpollution.MySupportMapFragment"
/> 
```

和代码：

```
package com.squirrel.hkairpollution;

(imports omitted)

public class MySupportMapFragment extends SupportMapFragment {

private static final String TAG = HKAirPollution.TAG;

public MySupportMapFragment() {
    return;
}

@Override
public View onCreateView(LayoutInflater arg0, ViewGroup arg1, Bundle arg2) {
    Log.v(TAG, "In overridden onCreateView.");
    View v = super.onCreateView(arg0, arg1, arg2);
    Log.v(TAG, "Initialising map.");
    initMap();
    Log.v(TAG, "Moving the MyPositionButton");
    resetMyPositionButton();
    return v;
}

private void initMap(){
    UiSettings settings = getMap().getUiSettings();
    settings.setAllGesturesEnabled(true);
    settings.setMyLocationButtonEnabled(true);
    LatLng latLong = new LatLng(22.320542, 114.185715);
    getMap().moveCamera(CameraUpdateFactory.newLatLngZoom(latLong,11));
}

/**
 * Move my position button at the bottom of map
 */
private void resetMyPositionButton()
{
    //deep paths for map controls
    ViewGroup v1 = (ViewGroup)this.getView();
    ViewGroup v2 = (ViewGroup)v1.getChildAt(0);
    ViewGroup v3 = (ViewGroup)v2.getChildAt(0);
    ViewGroup v4 = (ViewGroup)v3.getChildAt(1);

    //my position button
    View position =  (View)v4.getChildAt(0);

    int positionWidth = position.getLayoutParams().width;
    int positionHeight = position.getLayoutParams().height;

    //lay out position button
    RelativeLayout.LayoutParams positionParams = new RelativeLayout.LayoutParams(positionWidth,positionHeight);
    int margin = positionWidth/5;
    positionParams.setMargins(0, 0, 0, margin);
    positionParams.addRule(RelativeLayout.CENTER_HORIZONTAL, RelativeLayout.TRUE);
    positionParams.addRule(RelativeLayout.ALIGN_PARENT_BOTTOM, RelativeLayout.TRUE);
    position.setLayoutParams(positionParams);
} 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T16:37:51.337

这是一个快速的解决方案，太好了。这是完整且有效的代码：

```
package com.squirrel.hkairpollution;

import android.os.Bundle;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.RelativeLayout;

import com.google.android.gms.maps.CameraUpdateFactory;
import com.google.android.gms.maps.GoogleMap;
import com.google.android.gms.maps.SupportMapFragment;
import com.google.android.gms.maps.UiSettings;
import com.google.android.gms.maps.model.LatLng;

public class MySupportMapFragment extends SupportMapFragment {

private static final String TAG = HKAirPollution.TAG;

public MySupportMapFragment() {
    return;
}

@Override
public View onCreateView(LayoutInflater arg0, ViewGroup arg1, Bundle arg2) {
    Log.v(TAG, "In overridden onCreateView.");
    View v = super.onCreateView(arg0, arg1, arg2);
    Log.v(TAG, "Initialising map.");
    initMap();
    return v;
}

@Override
 public void onViewCreated (View view, Bundle savedInstanceState) {
    super.onViewCreated(view, savedInstanceState);
    resetMyPositionButton();
}

private void initMap(){
    UiSettings settings = getMap().getUiSettings();
    settings.setAllGesturesEnabled(true);
    settings.setMyLocationButtonEnabled(true);
    LatLng latLong = new LatLng(22.320542, 114.185715);
    getMap().moveCamera(CameraUpdateFactory.newLatLngZoom(latLong,11));
}

/**
 * Move my position button at the bottom of map
 */
private void resetMyPositionButton()
{
    //deep paths for map controls
    ViewGroup v1 = (ViewGroup)this.getView();
    ViewGroup v2 = (ViewGroup)v1.getChildAt(0);
    ViewGroup v3 = (ViewGroup)v2.getChildAt(0);
    ViewGroup v4 = (ViewGroup)v3.getChildAt(1);

    //my position button
    View position =  (View)v4.getChildAt(0);

    int positionWidth = position.getLayoutParams().width;
    int positionHeight = position.getLayoutParams().height;

    //lay out position button
    RelativeLayout.LayoutParams positionParams = new RelativeLayout.LayoutParams(positionWidth,positionHeight);
    int margin = positionWidth/5;
    positionParams.setMargins(0, 0, 0, margin);
    positionParams.addRule(RelativeLayout.CENTER_HORIZONTAL, RelativeLayout.TRUE);
    positionParams.addRule(RelativeLayout.ALIGN_PARENT_BOTTOM, RelativeLayout.TRUE);
    position.setLayoutParams(positionParams);
} 
} 
```

# haskell - 如何制作nicEditor snaplet？（几个问题）

> ID：15462941
> 
> 赞同：2
> 
> 时间：2013-03-17T16:06:02.397
> 
> 标签：haskell, haskell-snap-framework

下面的示例定义了一个将 nicEditor 绑定到 textarea 的 snaplet。以下问题不仅与下面的示例有关，而且可能与其他一些类似案例有关。

1.  新手可以按照下面的说明（如何澄清）吗？
2.  如何使示例使用更少的步骤或更简单？（是否可能与以下内容大致相同？）
3.  这使用了解释拼接。如果可能的话，一个 snaplet 是否也应该提供已编译的拼接？
4.  一个 snaplet 可能会为典型情况提供一个默认处理程序或几个处理程序。处理程序可以在下面的“SnapNic.hs”中定义。那么对用户的一些回调机制呢？

--

```
{-# LANGUAGE TemplateHaskell   #-}
{-# LANGUAGE OverloadedStrings #-}

 ------------------------------------------------------------------------------
-- | This module defines nicEditor snaplet, just a short example to show,
-- how snaplets can be defined together with splices.
-- License: BSD3\. 
-- Here are hopefully easy instructions, how to use or try:
-- 
-- 1\. Make a directory, we'll use "netry" below, go there.
--  Initialize a project, e.g. "snap init default".
-- 2\. Copy this file to netry/src-directory as SnapNic.hs.
-- 3\. Add "import SnapNic" to Site.hs and to Application.hs
-- 4\. Add ", _niced :: Snaplet Nicsnap" to data App in Application.hs 
-- 
-- 5\. Add "n <- nestSnaplet "niced" niced nicsnapInit" to 
--    app :: SnapletInit App App in Site.hs. 
-- 6\. Add "addNicEditSplices n" to the same function as in step 5.
-- 7\. Change the return-line of the same function as in step 5: 
--      "return $ App h s a n" 
--    that is, add "n" into the end. We need this because of step 4.
-- 
-- 8\. Make route, e.g. ", ("/netext",   with auth handleNEtext)" to
--    routes-function in Site.hs
-- 
-- 9\. And then add handler into Site.hs:
--    handleNEtext :: Handler App v ()
--    handleNEtext = method GET handleForm <|> method POST handleFormSubmit
--      where
--       handleForm = render "textedit"
--       handleFormSubmit = do 
--        p <- getParam "ots"
--        writeText "Submitting text from textarea...\n"
--        writeText (T.pack (show p))
-- 
-- 10\. Last, add the following 2 templates to "netry/snaplets/heist/templates".
--    (This could be made simpler, but this works as an example of apply-tag.)
--    textedit.tpl:
--      <apply template="base">
--         <apply template="_textedit" />
--      </apply>
--    _textedit.tpl:
--       <h2>Your nic editor</h2>
--         <form method="post" action="netext">
--           <neTA/>
--           <button name="ne" value="ne" type="Submit">Send text</button>
--         </form>
--         <neScript/>
-- 
-- 11\. Compile everything "cabal install -fdevelopment". After that, 
--     if everything compiled, "netry -p 8000", start your browser and go
--     to "localhost:8000/netext".
-- 
-- TODO! This could use the config-files at least for some parameters, and more
-- tags,please. Tags could use some attributes (for example, size parameters
-- could be given as attributes of tags)...
-- 
module SnapNic 
  ( Nicsnap (..)
  , nicsnapInit
  , addNicEditSplices
  ) where

------------------------------------------------------------------------------
import           Control.Lens   (makeLenses, view, (^.))
import qualified Data.Text as T (Text, append, pack)
import           Data.Maybe     (fromJust, fromMaybe)
import           Snap.Core      (MonadSnap)
import           Snap.Snaplet   (Snaplet
                                , makeSnaplet
                                , snapletValue
                                , SnapletInit
                                , Initializer
                                )
import           Snap.Snaplet.Heist     (HasHeist, addSplices)
import qualified Text.XmlHtml as X      (Node (Element, TextNode))
import qualified Heist.Interpreted as I (Splice)

------------------------------------------------------------------------------
-- | Nicsnap has fields that can be used to set some basic properties.
-- The editor can have a title and its size can be set. Javascript can be
-- local or remote.
data Nicsnap = Nicsnap
  { _nicsnap  :: T.Text       -- title
  , _areaSize :: (Int,Int)    -- rows, cols
  , _areaRef  :: T.Text       -- how to apply nicEditors? 
  -- (This may not be sufficient in order to refer in some other way, TODO!)
  , _localR   :: Maybe T.Text -- local route to nicEdit.js
  , _webR     :: T.Text       -- route to nicEdit's javascript source. 
  }

makeLenses ''Nicsnap          -- makes webR and other lenses

------------------------------------------------------------------------------
-- | Configurations are given here. This could use config-files...
-- What other things to configure?
-- If you want to make a local copy of the nicEdit, then add a static route
-- to the "routes"-function. 
nicsnapInit :: SnapletInit b Nicsnap
nicsnapInit = makeSnaplet "nicsnap" "NicEditor snaplet " Nothing $ do
   let m  = "Nic editor title"
       aS = (20,80)::(Int,Int) -- rows, cols
       aR = "nicEditors.allTextAreas" -- TODO! We need to be able to tell,
       -- which textareas have editors in a page.
       lR = Nothing 
       -- lR = Just "/nicEdit.js" 
       -- If localR is nothing, then webR is used with the following addr.
       wR = "http://js.nicedit.com/nicEdit-latest.js"
   return $ Nicsnap m aS aR lR wR

------------------------------------------------------------------------------

-- | Internal, this makes the script-tag.
-- Input could be e.g. txt = "/nicEdit.js"
srcElem :: T.Text -> X.Node
srcElem txt = X.Element "script" 
   [("src",txt),("type","text/javascript")] []

-- | Internal, this makes the script-tag. At the moment this changes all
-- textareas to niceditors, if the example input below is used. TODO!...
-- Input could be e.g.  txt = "nicEditors.allTextAreas"
srcOnLoad :: T.Text -> X.Node
srcOnLoad txt = X.Element "script" [("type","text/javascript")] 
   [X.TextNode (T.append (T.append "bkLib.onDomLoaded(" txt) ");")] 

-- | Internal, used to define "divs", where we give a label and size to 
-- textarea. Also ids and names.
-- TODO! ids and names could be parameters.
divLabelTX :: T.Text -> T.Text -> T.Text -> X.Node
divLabelTX title r c =  X.Element "div" [("class", "required")]
   [ X.Element "label" [("for","ots")] 
        [X.TextNode title]
   , X.Element "textarea" 
        [("id","ots"), ("name","ots"), ("cols",c), ("rows",r)] 
        [X.TextNode " "]
   ]

-- | Internal, this can be used in splice-definition.
-- TODO! ids and names could be parameters, too.
nicTextAreaAdd :: MonadSnap m => T.Text -> (Int,Int) -> I.Splice m
nicTextAreaAdd title (r,c) = return [divLabelTX 
  title
  (T.pack . show $ r) 
  (T.pack . show $ c)]

-- | Add script-tags to web page with splice that tell, what javascript
-- library to use... 
nicEditAdd :: MonadSnap m => T.Text -> T.Text -> I.Splice m
nicEditAdd src edElems = return (srcElem src : [srcOnLoad edElems])

------------------------------------------------------------------------------

-- | Get the route to the javascript library that is applied (either local
-- library or construct a link to a web address).
nicRoute :: Nicsnap -> T.Text
nicRoute ns = let mlR = ns ^. localR in fromMaybe (ns ^. webR) mlR

------------------------------------------------------------------------------

-- | neTextAreaTag and neScripTag are used in addSplices to define the tags
-- to be used in templates.
-- What other tags could be useful? Maybe a way to add a nicEditor directly
-- with one or more button bind to it ("send", "clear", etc). TODO!
neTextAreaTag = "neTA"     :: T.Text
neScriptTag   = "neScript" :: T.Text

-- | Make the tags to be used in templates. At the moment, only the above
-- tags are defined. 
addNicEditSplices :: HasHeist b => Snaplet Nicsnap -> Initializer b v ()
addNicEditSplices n = let m = view snapletValue n in addSplices
  [(neTextAreaTag, nicTextAreaAdd (m ^. nicsnap) (m ^. areaSize))
  ,(neScriptTag,   nicEditAdd (nicRoute m) (m ^. areaRef) )
  ]
------------------------------------------------------------------------------ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T04:58:30.547

我不是新手，所以我不能回答你的第一个问题，但我对其他一些问题有一些想法和答案。首先，如果您真的希望这是一个严肃的 snaplet（用于教学目的或实际使用），您可能应该将其变成一个 cabal 项目。这将从您的说明中消除第 2 步。接下来，snaplets 可以定义自己的路由。您可以通过调用[addRoutes](http://hackage.haskell.org/packages/archive/snap/0.11.2/doc/html/Snap-Snaplet.html#v%3aaddRoutes)函数在初始化程序中执行此操作。这将消除第 8 步。Snaplets 还可以提供自己的文件系统资源，这些资源将被复制到使用它的任何项目中。您可以使用此功能来消除第 10 步，并提供默认配置文件。有关如何执行此操作的更多信息，请查看[文件系统数据和自动安装](http://snapframework.com/docs/tutorials/snaplets-tutorial#filesystem-data-and-automatic-installation)snaplet 教程末尾的部分。

目前，[snplet-postgresql-simple](http://hackage.haskell.org/package/snaplet-postgresql-simple)可能是关于如何使用 snaplet 必须提供的大多数功能的最佳示例。如果你想让它成为一个真正强大的通用 snaplet 供其他人使用，那么你绝对应该包括解释和编译的拼接。我最近在 snap 包中添加了一些[新功能](https://github.com/snapframework/snap/blob/master/src/Snap/Snaplet/Heist/Generic.hs)，可以更轻松地编写在编译或解释拼接模式下自动工作的通用 snaplet。该代码还没有被破解，但我可能很快就会发布它。

我还一直在研究[另一个 snaplet](https://github.com/Soostone/snaplet-actionlog)，它更全面地使用了 snaplet API 的大部分特性。与 snaplet-postgresql-simple 不同，这个 snaplet 定义了模板和拼接。它仍在开发中，但已经展示了大部分功能。剩下的工作主要是打磨和鲁棒性。

# entity-framework - 当 EF 代码首次创建多对多表时，有没有办法为它指定列顺序？

> ID：15462942
> 
> 赞同：0
> 
> 时间：2013-03-17T16:06:07.620
> 
> 标签：entity-framework

我有以下映射：

```
public webpages_RolesMap()
        {
            // Primary Key
            this.HasKey(t => t.RoleId);

            // Properties
            this.Property(t => t.RoleName)
                .IsRequired()
                .HasMaxLength(256);

            // Table & Column Mappings
            this.ToTable("webpages_Roles");
            this.Property(t => t.RoleId).HasColumnName("RoleId");
            this.Property(t => t.RoleName).HasColumnName("RoleName");

            // Relationships
            this.HasMany(t => t.UserProfiles)
                .WithMany(t => t.webpages_Roles)
                .Map(m =>
                    {
                        m.ToTable("webpages_UsersInRoles");
                        m.MapLeftKey("RoleId");
                        m.MapRightKey("UserId");
                    });

        } 
```

当我使用 Code First 时，这会强制 EF 创建一个如下所示的 pages_UsersInRoles 表：

```
CREATE TABLE [dbo].[webpages_UsersInRoles](
    [RoleId] [int] NOT NULL,
    [UserId] [int] NOT NULL,
PRIMARY KEY CLUSTERED 
(
    [RoleId] ASC,
    [UserId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]

GO 
```

但是，Microsoft 创建的 SimpleMembership 类执行不指定列名的插入，并且它期望第一列是 UserID，第二个是 RoleId。

```
INSERT INTO webpages_UsersInRoles VALUES (1,3); 
```

如何使上面的映射创建一个表，其中 UserID 是第 1 列， RoleId 是第 2 列？

请注意，我已经尝试添加这个：

```
public partial class UsersInRoles
{
    [Key, Column(Order = 0)]
    public int UserId { get; set; }
    [Key, Column(Order = 1)]
    public int RoleId { get; set; }

} 
```

但似乎忽略了这一点，仍然以错误的顺序创建列名的多对多。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T21:20:53.700

I think you must configure the many-to-many relationship from the other side to change the column order:

```
// UserProfileMap derived from EntityTypeConfiguration<UserProfile>
public UserProfileMap() 
{
    // ...
    this.HasMany(t => t.webpages_Roles)
        .WithMany(t => t.UserProfiles)
        .Map(m =>
        {
            m.ToTable("webpages_UsersInRoles");
            m.MapLeftKey("UserId");
            m.MapRightKey("RoleId");
        });
} 
```

# int - 更改 ARGB 颜色 int 的单通道值

> ID：15462956
> 
> 赞同：0
> 
> 时间：2013-03-17T16:07:07.360
> 
> 标签：int, bit-manipulation, argb

如果我有颜色：

```
int color = 0x1a2cf3bb; // just an example 
```

例如，如何仅更改具有以下值的 R 通道：

```
int red = 0xfe; // another example 
```

这样颜色就变成了：

```
color = 0x1afef3bb; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T16:13:41.930

```
int result = (color & 0xff00ffff) | red; 
```

# c# - 将 A 类的方法添加到 B 类的委托，并在 C# 中从 A 类调用该委托

> ID：15462957
> 
> 赞同：0
> 
> 时间：2013-03-17T16:07:09.930
> 
> 标签：c#, methods, delegates

在事先不知道要添加哪个方法以及 A 类是什么的情况下，如何将 A 类中的方法添加到 B 类的委托？然后从 A 类调用那个代表？

```
class Class {
    public string someProperty;

    public delegate void myDelegate(Class obj);

    myDelegate handler = new myDelegate(mainClassMethod); //here is the problem..

    public void someMethod() {
        handler();
    }
}

class MainClass {
    public static void Main() {
        Class classObj = new Class();

        classObj.someProperty = "hello";

        public void mainClassMethod(Class obj) {
            System.Console.WriteLine(obj.someProperty);
        }

        classObj.someMethod();
    }
} 
```

我应该为此使用代表以外的东西吗？顺便说一句，我在 C# 中这样做！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T16:14:45.227

制作`mainClassMethod`静态并通过类名访问它`MainClass`。您也不能将嵌套函数声明为类成员，您需要`mainClassMethod`单独声明。

```
class MainClass {
    public static void Main()
    {
        Class classObj = new Class();

        classObj.someProperty = "hello";

        classObj.someMethod();
    }

    public static void mainClassMethod(Class obj) 
    {
        System.Console.WriteLine(obj.someProperty);
    } 
```

}

您还声明了委托`void myDelegate(Class obj);`，因此您需要将 a 的实例`Class`作为参数传递。在我的示例中，我传递了通过`this`引用找到的对象，这是您调用的对象`someMethod`。

现在你可以写：

```
class Class {

    public string someProperty;

    public delegate void myDelegate(Class obj);

    myDelegate handler = new myDelegate(MainClass.mainClassMethod); //no error

    public void someMethod() 
    {
        handler(this);
    }
} 
```

# c# - 我们可以使用 asp.net 和 c# 从 localhost 发送邮件吗？

> ID：15462960
> 
> 赞同：3
> 
> 时间：2013-03-17T16:08:01.387
> 
> 标签：c#, email, smtpclient

我在用`using System.Net.Mail;`

和以下代码发送邮件

```
MailMessage message = new MailMessage();
        SmtpClient client = new SmtpClient();

        // Set the sender's address
        message.From = new MailAddress("fromAddress");

     // Allow multiple "To" addresses to be separated by a semi-colon
        if (toAddress.Trim().Length > 0)
        {
            foreach (string addr in toAddress.Split(';'))
            {
                message.To.Add(new MailAddress(addr));
            }
        }
      // Allow multiple "Cc" addresses to be separated by a semi-colon
        if (ccAddress.Trim().Length > 0)
        {
            foreach (string addr in ccAddress.Split(';'))
            {
                message.CC.Add(new MailAddress(addr));
            }
        }
        // Set the subject and message body text
        message.Subject = subject;
        message.Body = messageBody;

        // Set the SMTP server to be used to send the message
        client.Host = "YourMailServer";

        // Send the e-mail message
        client.Send(message); 
```

对于我提供的主机`client.Host = "localhost";`

为此，它因错误而堕落

> 无法建立连接，因为目标机器主动拒绝了*some_ip_address_here*

当我使用`client.Host = "smtp.gmail.com";`

我收到以下错误

> 连接尝试失败，因为连接的一方在一段时间后没有正确响应，或者连接失败，因为连接的主机没有响应

我无法通过 localhost 发送邮件。请帮帮我，我是 C# 新手，请在我出错的代码中纠正我..？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-17T16:15:01.153

这是一些可用于通过 gmail 发送邮件的代码（来自 stackoverflow 上某处的代码。它类似于此处的代码：[Gmail：如何以编程方式发送电子邮件](https://stackoverflow.com/q/1326027/246622)）：

```
using (var client = new SmtpClient("smtp.gmail.com", 587)
{
  Credentials = new NetworkCredential("yourmail@gmail.com", "yourpassword"),
  EnableSsl = true
})
{
  client.Send("frommail@gmail.com", "tomail@gmail.com", "subject", message);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T16:46:42.720

要从您发送邮件，`client.Host = "localhost"`您需要设置本地 SMTP 服务器。

要通过 Google（或通过任何其他 SMTP 服务器，包括您自己的本地 SMTP）发送邮件，您必须设置用户名、密码、ssl 设置 - 所有这些都符合所选 SMTP 服务器的要求，并且您需要阅读他们的帮助。

例如，Google[说](http://support.google.com/a/bin/answer.py?hl=en&answer=176600)您需要 SSL、端口 465 或 587、服务器`smtp.gmail.com`以及您的用户名和密码。

您可以在 .config 文件中分配所有这些值。

```
<system.net>
  <mailSettings>
    <smtp>
      <network host="smtp.gmail.com" enableSsl="true" port="587" userName="yourname@gmail.com" password="password" />
    </smtp>
  </mailSettings>
</system.net> 
```

或者在每次使用之前在代码中设置为 SmtpClient：

```
client.Host = "smtp.gmail.com";
client.Port = 587;
client.EnableSSL = true;
client.Credentials = new NetworkCredential("yourname@gmail.com", "password"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-17T16:30:20.480

将此代码放在`<configuration> </configuration>`web.config 文件中

```
<system.net>
<mailSettings>
  <smtp>
    <network host="smtp.gmail.com" enableSsl="true" port="587" userName="youremail@gmail.com" password="yourpassword" />
  </smtp>
</mailSettings>
</system.net> 
```

然后后端代码

```
MailMessage message = new MailMessage();
message.IsBodyHtml = true;
message.From = new MailAddress("email@gmail.com");
message.To.Add(new MailAddress(TextBoxEadd.Text));
message.CC.Add(new MailAddress("email@gmail.com"));
message.Subject = "New User Registration ! ";
message.Body =  "HELLO";
sr.Close();
SmtpClient client = new SmtpClient();
client.Send(message); 
```

我希望这段代码对你有帮助！:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-21T10:15:17.650

使用这条线..不要使用端口和主机名

LocalClient.DeliveryMethod = SmtpDeliveryMethod.PickupDirectoryFromIis;

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-02-13T05:28:07.467

我只是想补充一点，Gmail 现在需要应用密码才能在其他应用程序中使用它。检查此[链接](https://support.google.com/accounts/answer/185833?visit_id=637171678046576707-3535355093&rd=1#ts=3202254,3202256)。我不得不以艰难的方式找到它。创建应用程序密码后，我更改了 NetworkCredentials 以使用它发送电子邮件。

# c# - 如何在gridview中隐藏模板字段

> ID：15462961
> 
> 赞同：5
> 
> 时间：2013-03-17T16:08:04.950
> 
> 标签：c#, asp.net

我正在重复这个问题，因为我无法从任何地方找到答案。

我有一个`GridView`.aspx 页面。我想隐藏基于 aspx.cs`BindData()`方法的列。

我尝试使用下面的代码但无法隐藏。我正在使用带有 C# 的 Asp.net。

下面是我`GridView`的专栏，我还包括了`Button`点击代码。

如果我`select "T-L"`在下面，`else-if Ladder`我会得到这个`error`

**DataBinding：“System.Data.DataRowView”不包含名为“tutorial”的属性。**
我在 .aspx 中标记了一个测试用例错误

为了临时使我的程序正常工作，我正在使用 4 gridview 绑定 4 查询，这是不可行的...如何根据条件隐藏模板字段不可见...请帮助我..

```
<GridView>
    <Columns>
        <asp:BoundField DataField="id" HeaderText="Id" SortExpression="id" 
            Visible="false" />                     
        <asp:TemplateField HeaderText="RollNo" >
            <ItemTemplate>
                <%# Eval("st_rollno")%>
            </ItemTemplate>
            <EditItemTemplate>    
                <asp:TextBox ID="tbsturollno" runat="Server"
                    Text='<%# Eval("st_rollno") %>'></asp:TextBox>
            </EditItemTemplate>   
        </asp:TemplateField>

        <asp:TemplateField HeaderText="Name">
            <ItemTemplate>
                <%# Eval("st_name")%>
            </ItemTemplate>
            <EditItemTemplate>    
                <asp:TextBox ID="tbstuname" runat="Server"
                    Text='<%# Eval("st_name") %>'></asp:TextBox>
            </EditItemTemplate>               
        </asp:TemplateField>

        <asp:TemplateField HeaderText="Theory">
            <ItemTemplate>
                <%# Eval("theory")%>
            </ItemTemplate>
            <EditItemTemplate> 
                <asp:TextBox ID="tbtheory" runat="Server"
                    Text='<%# Eval("theory") %>'></asp:TextBox>
            </EditItemTemplate>   
        </asp:TemplateField>

        <asp:TemplateField HeaderText="Total" >
            <ItemTemplate>
                <%# Eval("ttotal")%>
            </ItemTemplate>
            <EditItemTemplate>   
                <asp:TextBox ID="tbtheorytotal" runat="Server"
                    Text='<%# Eval("ttotal") %>'></asp:TextBox>
            </EditItemTemplate>   
        </asp:TemplateField>

        <asp:TemplateField HeaderText="Lab" >
            <ItemTemplate>
                <%# Eval("lab")%>
            </ItemTemplate>
            <EditItemTemplate>
                <asp:TextBox ID="tblab" runat="Server"
                    Text='<%# Eval("lab") %>'>
                </asp:TextBox>
            </EditItemTemplate>   
        </asp:TemplateField>

        <asp:TemplateField HeaderText="Total" >
            <ItemTemplate>
                <%# Eval("ltotal")%>
            </ItemTemplate>
            <EditItemTemplate>
                <asp:TextBox ID="tblabtotal" runat="Server"
                    Text='<%# Eval("ltotal") %>'></asp:TextBox>
            </EditItemTemplate>   
        </asp:TemplateField>

        <asp:TemplateField HeaderText="Tutorial" >
            <ItemTemplate>
   *Error is HERE             <%# Eval("tutorial")%>
            </ItemTemplate>
            <EditItemTemplate>   
                <asp:TextBox ID="tbtutorial" runat="Server"
                    Text='<%# Eval("tutorial") %>'></asp:TextBox>
            </EditItemTemplate>   
        </asp:TemplateField>

        <asp:TemplateField HeaderText="Total" >
            <ItemTemplate>
                <%# Eval("tutotal")%>
            </ItemTemplate>
            <EditItemTemplate>    
                <asp:TextBox ID="tbtutorialtotal" runat="Server"
                    Text='<%# Eval("tutotal") %>'></asp:TextBox>
            </EditItemTemplate>   
        </asp:TemplateField>        
    </Columns>
</GridView>

private void BindData()
{
    DataTable dt = new DataTable();
    using (SqlConnection con = new SqlConnection(ConnectionString))
    {
        if (stype.Equals("L"))
        {
            query = "SELECT [id], [st_rollno], [st_name], [lab], [ltotal] FROM [Attendence_Subject_Wise] WHERE (([branch_name] = @branch_name) AND ([scode] = @scode) AND ([sem_no] = @sem_no) AND ([sess_no] = @sess_no)) ORDER BY [st_rollno]";
            GridView1.Columns[3].Visible = false;
            GridView1.Columns[4].Visible = false;
            GridView1.Columns[7].Visible = false;
            GridView1.Columns[8].Visible = false;
        }
        else if (stype.Equals("T"))
        {
            query = "SELECT [id], [st_rollno], [st_name], [theory], [ttotal] FROM [Attendence_Subject_Wise] WHERE (([branch_name] = @branch_name) AND ([scode] = @scode) AND ([sem_no] = @sem_no) AND ([sess_no] = @sess_no)) ORDER BY [st_rollno]";
            GridView1.Columns[5].Visible = false;
            GridView1.Columns[6].Visible = false;
            GridView1.Columns[7].Visible = false;
            GridView1.Columns[8].Visible = false;
        }
        else if (stype.Equals("T-L"))
        {
            GridView1.Columns[7].Visible = false;
            GridView1.Columns[8].Visible = false;    
            query = "SELECT [id], [st_rollno], [st_name], [theory], [ttotal], [lab], [ltotal] FROM [Attendence_Subject_Wise] WHERE (([branch_name] = @branch_name) AND ([scode] = @scode) AND ([sem_no] = @sem_no) AND ([sess_no] = @sess_no)) ORDER BY [st_rollno]";
        }
        else
        {    
            query = "SELECT [id], [st_rollno], [st_name],[theory], [ttotal], [lab], [ltotal], [tutorial], [tutotal] FROM [Attendence_Subject_Wise] WHERE (([branch_name] = @branch_name) AND ([scode] = @scode) AND ([sem_no] = @sem_no) AND ([sess_no] = @sess_no)) ORDER BY [st_rollno]";
        }

        com = new SqlCommand(query);
        com.Parameters.Add("@branch_name", dept);
        com.Parameters.Add("@scode", dpsubject.SelectedItem.Text.ToString());
        com.Parameters.Add("@sem_no", Int32.Parse(dpsemno.SelectedItem.Text.ToString()));
        com.Parameters.Add("@sess_no",Int32.Parse(dpsessional.SelectedItem.Text.ToString()));

        using (SqlDataAdapter sda = new SqlDataAdapter())
        {
            com.Connection = con;
            con.Open();
            sda.SelectCommand = com;
            sda.Fill(dt);
            GridView1.DataSource = dt;
            GridView1.DataBind();
            con.Close();
        }    
    }
}

protected void bsubmit_Click(object sender, EventArgs e)
{
    this.BindData();
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-17T16:27:37.457

尝试让您的查询仍然为您想要隐藏的每一列返回一个结果，即使您不会使用这些值。在查询 when `stype`is "TL" 时，更改`query`如下：

```
query = "SELECT [id], [st_rollno], [st_name], [theory], [ttotal], [lab], [ltotal] FROM [Attendence_Subject_Wise] WHERE (([branch_name] = @branch_name) AND ([scode] = @scode) AND ([sem_no] = @sem_no) AND ([sess_no] = @sess_no)) ORDER BY [st_rollno]"; 
```

对此：

```
query = "SELECT [id], [st_rollno], [st_name], [theory], [ttotal], [lab], [ltotal], '' as tutorial, '' as tutotal FROM [Attendence_Subject_Wise] WHERE (([branch_name] = @branch_name) AND ([scode] = @scode) AND ([sem_no] = @sem_no) AND ([sess_no] = @sess_no)) ORDER BY [st_rollno]"; 
```

**编辑**：

要隐藏该列，请将以下方法添加到您的代码后面：

```
protected void GridView_DataBound(object sender, GridViewRowEventArgs e)
{
    if (stype.Equals("T-L"))
    {
        MyGridView.Columns[7].Visible = false;
        MyGridView.Columns[8].Visible = false;
    }
} 
```

并订阅 GridView 上的 DataBound 事件。请注意，我向 GridView 添加了一个 ID，因此我可以从后面的代码中引用它。

```
<GridView ID="MyGridView" OnDataBound="GridView_DataBound"> 
```

# sqlite - PowerAMC 和 SQLite

> ID：15462963
> 
> 赞同：1
> 
> 时间：2013-03-17T16:08:14.520
> 
> 标签：sqlite, powerdesigner

我只是想知道是否有任何方法可以从 Poweramc 生成 SQLite 数据库？乍一看，似乎没有，谷歌在这方面并没有给我太多帮助......

谢谢你的提示；）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T09:57:16.517

由于没有答案，我想您必须准备自己的 DBMS 定义。我本来建议先复制一份 ANSI .xdb，但我看到[有人提到使用 mySQL .xdb](http://blog.spritebandits.com/2012/06/11/sqlite-essentials/)。

更新：我已经[为 SQLite 3 启动了一个 DBMS](https://github.com/pascalbaryton/PDThings/tree/master/DBMS)。

# php - 保存 oauth 数据并从数据库中使用它 (twitter)

> ID：15462969
> 
> 赞同：1
> 
> 时间：2013-03-17T16:08:39.430
> 
> 标签：php, twitter, oauth, laravel

我正在开发一项社会管理服务，在开发过程中我还学习了许多技术。这是我必须写的：

1.  用户必须使用他们的 Twitter 帐户进行身份验证
2.  之后，在 mysql 中，我保存了这些参数`oauth_token`：`oauth_verifier`和`oauth_secret`
3.  在另一个文件中，我从数据库中请求这三个参数，并在我的代码中使用它。

问题是，当用户从我的网站（而不是 Twitter）注销并再次登录时，我在函数中收到此错误`getAccessToken`：

> twitter/twitteroauth.php 第 127 行中的“未定义索引：oauth_token”

我不知道为什么？我正在使用`Abraham's lib`和`Laravel Framework`。

这是我在 Twitter 上登录的代码：

```
<?php

class Twitter_Controller extends OneAuth\Auth\Controller
{
    function action_index()
    {

// The TwitterOAuth instance
$twitteroauth = new TwitterOAuth('ABCD', 'EFGH');
// Requesting authentication tokens, the parameter is the URL we will be redirected to
$request_token = $twitteroauth->getRequestToken('http://someurl.com/members');

// Saving them into the session
$username = Cookie::get('username');
DB::table('twitter')->where('username', '=', $username)->update(array( 'oauth_token'=>$request_token['oauth_token'],
                                                                   'oauth_secret'=>$request_token['oauth_token_secret']));
//Cookie::put('oauth_token') = $request_token['oauth_token'];
//Cookie::put('oauth_token_secret') = $request_token['oauth_token_secret'];

// If everything goes well..
if($twitteroauth->http_code==200){
    $oauthtoken = DB::table('twitter')->where('username', '=', Cookie::get('username'))->only('oauth_token');
    $url = $twitteroauth->getAuthorizeURL($oauthtoken);
    header('Location: '. $url);
} else {
    // It's a bad idea to kill the script, but we've got to know when there's an error.
    die('Something wrong happened.');
}

    }
} 
```

这是“主要”推特文件（用于显示推特详细信息等）

```
 <?php
    $oauthtoken = DB::table('twitter')->where('username', '=', Cookie::get('username'))->only('oauth_token');
    $haveTwitter = DB::table('user')->where('username', '=', Cookie::get('username'))->only('have_tw');
    $oauthsecret = DB::table('twitter')->where('username', '=', Cookie::get('username'))->only('oauth_secret');
    $twitteroauth = new TwitterOAuth('ABCD', 'EFGH',
     $oauthtoken, $oauthsecret);

    echo $haveTwitter;
    if($haveTwitter == '0')
    {
       $access_token=$twitteroauth->getAccessToken(Input::get('oauth_verifier'));
        DB::table('twitter')->where('username', '=', Cookie::get('username'))->update(array('oauth_verifier' => Input::get('oauth_verifier')));
       DB::table('user')->where('username', '=', Cookie::get('username'))->update(array('have_tw' => '1'));
    }
    if($haveTwitter == '1')
    {
        $oauth_verifier = DB::table('twitter')->where('username', '=', Cookie::get('username'))->only('oauth_verifier');
       echo $oauth_verifier;
      $access_token=$twitteroauth->getAccessToken($oauth_verifier);
    }
    $user_info = $twitteroauth->get('account/verify_credentials');
    dd($user_info);
    ?> 
```

变量`$haveTwitter`用于判断用户是第一次登录 Twitter，还是之前登录 Twitter。

我希望你能理解我（我的英语不好）和我的代码。如果您有一些问题，请询问，我会尽力解释得更好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T10:56:26.997

一个推测：

如果用户注销，您可能会删除 cookie：

```
$username = Cookie::get('username'); 
```

然后，您的数据库查找：

```
$oauthtoken = DB::table('twitter')->where('username', '=', Cookie::get('username'))->only('oauth_token'); 
```

..不会返回任何东西，所以你的 $oauthtoken 不会包含数据。

如果不是这种情况，请稍微编辑您的帖子：127 是哪一行？您的注销脚本在做什么？

# html - 如何处理 HTML 表单提交

> ID：15462982
> 
> 赞同：0
> 
> 时间：2013-03-17T16:10:26.060
> 
> 标签：html, forms, email, redirect, submit

在此先感谢您的帮助。我知道这可能是一个简单的问题，因为我对 HTML 比较陌生。

我的网站上有一个表格供人们成为会员。我希望用户输入他们的信息并单击提交。当他们这样做时，我希望向我发送一封电子邮件。但是，我希望用户被重定向到网站上的不同页面，他们将在该页面上为其会员付费。我怎样才能同时做这两件事（发送电子邮件、重定向）？

这是我的表格：

```
<form>
    First name:     <input type="text" name="firstname">
    Last name:      <input type="text" name="lastname"><br>
    Street:         <input type="text" name="street" size="60"><br>
    City:           <input type="text" name="city">
    State:          <input type="text" name="state"> 
    ZIP:            <input type="text" name="zip"><br>
    Email:          <input type="text" name="email" size="60"><br>
    Phone:          <input type="text" name="phone" size="60"><br>
    City/Township:  <input type="text" name="votingcity">
    Precinct No.:   <input type="text" name="precinct"><br>
    <br>
    <hr>
    <br>
    <p>Government regulations require the following information:<br></p><br>
    Occupation:         <input type="text" name="occupation" size="60"><br>
    Employer's Name:    <input type="text" name="employer" size="60"><br>
    Employer's Street:  <input type="text" name="emp_street" size="60"><br>
    Employer's City:    <input type="text" name="emp_city">
    Employer's State:   <input type="text" name="emp_state">
    Employer's ZIP:     <input type="text" name="emp_zip"><br>
    <br>
    <hr>
    <br>
    Submit <input type="submit">
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-28T15:09:54.863

在你的开场白中试试这个，它可以在 html 中完成它不是很漂亮，但它可能对你有用

```
<form action="MAILTO:someone@example.com" method="post" enctype="text/plain"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-09T11:41:07.243

所有操作都将在服务器端进行。所以你必须使用任何服务器端语言。在您的情况下，php 将是合适的。您可以在验证所有字段后从 html 表单发送数据。您可以使用 ajax 或传统方式发送它，如果您收到响应正常，那么您可以转到下一页。

使用 jQuery forminteract，您可以在 HTML 输入中添加验证标签，就像我在下面的 firstName 中使用的一样。

```
 <form action="process.php" method="post">
    First name: <input type="text" name="firstname" data-validation-notNull data-validation-notNull-message="Please enter first Name">
<span data-error="firstName"></span>
    Last name: <input type="text" name="lastname"><br>
    Street: <input type="text" name="street" size="60"><br>
    City: <input type="text" name="city">
    State: <input type="text" name="state"> 
    ZIP: <input type="text" name="zip"><br>
    Email: <input type="text" name="email" size="60"><br>
    Phone: <input type="text" name="phone" size="60"><br>
    City/Township: <input type="text" name="votingcity">
    Precinct No.: <input type="text" name="precinct"><br>
    <br><hr><br>
    <p>Government regulations require the following information:<br></p><br>
    Occupation: <input type="text" name="occupation" size="60"><br>
    Employer's Name: <input type="text" name="employer" size="60"><br>
    Employer's Street: <input type="text" name="emp_street" size="60"><br>
    Employer's City: <input type="text" name="emp_city">
    Employer's State: <input type="text" name="emp_state">
    Employer's ZIP: <input type="text" name="emp_zip"><br>
    <br><hr><br>
<button type="button" id="btn-submit">Submit</button>
    </form> 
```

页面底部的 javascript 将是。

```
var form=$("form").find("[name]").formInteract();
$("#btn-submit").click(function(){
    if(!form.validate()){
      //return if form is not valid
      return;
     }

form.postAjax("url", function(rsp){
 //do your stuff with response.

 });

}); 
```

这是 forminteract 项目的链接 [https://bitbucket.org/ranjeet1985/forminteract](https://bitbucket.org/ranjeet1985/forminteract)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T16:32:30.193

我建议你看看 PHP 教程（cf: [php.net](http://www.php.net/manual/en/getting-started.php)）。以下代码会将您重定向到“action.php”页面，您可以在其中执行 php 代码（发送电子邮件、重定向到另一个等）

**索引.html**

```
<form action="action.php" method="post">
 <p>Your name: <input type="text" name="name" /></p>
 <p>Your age: <input type="text" name="age" /></p>
 <p><input type="submit" /></p>
</form> 
```

**动作.php**

```
<?php
$message = "your message";

// Send mail
mail('abc@something.com', 'Your Subject', $message);

header('Location: payment.php');  
?> 
```

**更新：** 在您的 PHP 页面中，您还可以管理表单数据。例如，您可以使用 this 访问用户名`$_POST['firstname']`。或在您的付款页面中显示用户信息，如下所示：

```
Hi M. <?php echo htmlspecialchars($_POST['lastname']); ?>. 
```

我不知道您想对表单数据做什么，但您可以通过电子邮件发送它们或将它们存储在数据库中。

您也可以使用 PHP 以外的其他语言，例如 Java、VB.net 等。但在我看来，PHP 可能会更容易学习。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-17T16:33:12.883

您应该使用服务器端页面进行表单操作以发送电子邮件并显示会员页面。当用户提交表单时，他们将被定向到此页面。

`<form method="post" action="link to subscription page. Eg: payment.php"> </form>`

在 payment.php 中，显示支付表单并编写一个发送电子邮件的函数。

```
<?php
//Write send email function here
?>
<html>
<!-- Display payment form here -->
</html> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-17T18:12:40.283

这不能仅使用 HTML 来完成，您需要了解服务器端脚本语言，例如 PHP 或 ASP。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-17T18:35:43.273

您如何处理付款？如果我自己这样做，我可能会将表单数据发送到支付处理器（例如 PayPal）并包含在发票中。我想大多数付款处理器都可以选择在收到付款时通过电子邮件通知您。

但是你没有问*我*会怎么做，你问如何提交一个表单，以便发送电子邮件并将浏览器重定向到另一个页面。

如果您不能使用我的解决方案，我真的认为您最好将 PHP 加入其中。

***注册.html***

```
<form action="process.php" method="post">
First name: <input type="text" name="firstname">
Last name: <input type="text" name="lastname"><br>
Street: <input type="text" name="street" size="60"><br>
City: <input type="text" name="city">
State: <input type="text" name="state"> 
ZIP: <input type="text" name="zip"><br>
Email: <input type="text" name="email" size="60"><br>
Phone: <input type="text" name="phone" size="60"><br>
City/Township: <input type="text" name="votingcity">
Precinct No.: <input type="text" name="precinct"><br>
<br><hr><br>
<p>Government regulations require the following information:<br></p><br>
Occupation: <input type="text" name="occupation" size="60"><br>
Employer's Name: <input type="text" name="employer" size="60"><br>
Employer's Street: <input type="text" name="emp_street" size="60"><br>
Employer's City: <input type="text" name="emp_city">
Employer's State: <input type="text" name="emp_state">
Employer's ZIP: <input type="text" name="emp_zip"><br>
<br><hr><br>
Submit <input type="submit">
</form> 
```

***进程.php***

```
<?php
  $message = '';
  foreach($_POST as $key => $value) {
    $message .= "$key => $value\n";
  }
  mail('youraddress@whatever.com','New User Registration',$message);
  header('Location: payment.html');
?> 
```

确保这`<?php`是 process.php 的开头；没有任何前面的文本或空格。

您将收到的电子邮件将如下所示：

```
firstname => Homer
lastname => Simpson
street => 724 Evergreen Terrace
city => Springfield
state => Unknown
zip => ?????
email => hsimpson@compuserve.net
phone => (939) 555-0113
votingcity => Springfield
precinct => N/A
occupation => Nuclear Safety Inspector
employer => C. Montgomery Burns
emp_street => 100 Industrial Way
emp_city => Springfield
emp_state => Unknown
emp_zip => ????? 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-07-02T21:16:42.420

您可以使用 form-endpoint 服务，如 formspree.io 或 formcarry.com，它们在提交后提供电子邮件通知和用户重定向，如果您想稍后使用他们的数据，您可以使用 Formcarry 的 Zapier 集成为 Mysql 或 MongoDB 将数据保存到数据库，或者你可以为你的 PHP 文件设置一个 webhook，并保存处理过的数据。

# android - 安卓消息计数器

> ID：15462988
> 
> 赞同：0
> 
> 时间：2013-03-17T16:10:46.610
> 
> 标签：android

大家好，我正在尝试实现一个应用程序，该应用程序将获取联系人姓名，并将搜索从该特定联系人姓名收到的消息数量并显示计数。但是我在运行我的 pgm 时遇到了意想不到的问题。这是我的代码

```
 package com.mycompany.myapp;

import android.app.*;
import android.net.Uri;
import android.os.*;
import android.view.*;
import android.widget.*;
import android.widget.AdapterView.OnItemClickListener;
import android.media.*;
import android.telephony.*;
import java.util.*;

import android.content.*;
import android.graphics.*;
import android.database.*;
import android.provider.*;

public class MainActivity extends Activity
{
    /** Called when the activity is first created. */
    DatePicker datepicker;
    private static Context context;
    Map contactMap;
    String selection;
    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);

        setTitle("Tuxian");
        setContentView(R.layout.main);
        MainActivity.context = getApplicationContext();

        GetPeopleList people = null;
        final AutoCompleteTextView txt = (AutoCompleteTextView) findViewById(R.id.autocompletetxtview);

        txt.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView<?> parent, View view, int position, long rowId) {
                selection = (String)parent.getItemAtPosition(position);
                //TODO Do something with the selected text
            }
        });

        List list = displayContacts(context);
        ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, R.layout.list_item, list);
        txt.setAdapter(adapter);
        txt.setTextColor(Color.GREEN);
        datepicker = (DatePicker) findViewById(R.id.datePicker);
        Button button = (Button) findViewById(R.id.btn);

        button.setOnClickListener(new View.OnClickListener() {

                @Override public void onClick(View v)
                {
                    Toast.makeText(getBaseContext(), "Date : " + (datepicker.getMonth() + 1) + "/" + datepicker.getDayOfMonth() + "/" + datepicker.getYear(), Toast.LENGTH_LONG).show();
                    Toast.makeText(getBaseContext(), "Total : " + msgCnt(selection), Toast.LENGTH_SHORT).show();
                }
            });
    }
    private List displayContacts(Context c) {
        ContentResolver cr = c.getContentResolver();
        Cursor pCur = null;
        contactMap = new HashMap<String, String>();
        Cursor cur = cr.query(ContactsContract.Contacts.CONTENT_URI, null, null, null, null);
        List l = new ArrayList();
        if (cur.getCount() > 0) {
            while (cur.moveToNext()) {
                String id = cur.getString(cur.getColumnIndex(ContactsContract.Contacts._ID));
                String name = cur.getString(cur.getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME));
                if (Integer.parseInt(cur.getString( cur.getColumnIndex(ContactsContract.Contacts.HAS_PHONE_NUMBER))) > 0) {
                    pCur = cr.query( ContactsContract.CommonDataKinds.Phone.CONTENT_URI, null, ContactsContract.CommonDataKinds.Phone.CONTACT_ID +" = ?", new String[]{id}, null);
                    while (pCur.moveToNext()) {
                        String phoneNo = pCur.getString(pCur.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));
                        //Toast.makeText(getBaseContext(), "Name: " + name + ", Phone No: " + phoneNo, Toast.LENGTH_SHORT).show();
                        l.add(name);                    
                        contactMap.put(name, phoneNo);
                    }
                }
            }
        }
        return l;
    }
    private int msgCnt (String phNum) {

         Uri uri = Uri.parse("content://sms/inbox");

         ContentResolver contentResolver = context.getContentResolver();

         String where = "address="+phNum;
         Cursor cursor = contentResolver.query(uri, new String[] { "_id", "thread_id"}, where, null,
                                               null);
         int count = cursor.getCount();

        return count;
    }
} 
```

我在 Manifest 文件中添加了权限，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.mycompany.myapp"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk 
        android:minSdkVersion="8" 
        android:targetSdkVersion="11" />
    <uses-permission android:name="android.permission.READ_SMS"/>

    <application

        android:label="@string/app_name" >
        <activity
            android:label="@string/app_name"
            android:name=".MainActivity" >
            <intent-filter >
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>
    <uses-permission android:name="android.permission.READ_CONTACTS"/>
</manifest> 
```

请有人帮我弄清楚！提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T13:06:06.540

究竟是什么问题？我建议更改 getMsgCount 函数以使用以下内容：

```
 String str_query = "content://sms/inbox";
    Uri uri = Uri.parse(str_query);
    String where = "address = ?";
    String columns[] = new String[] {"_id", "thread_id", "msg_count"}; 
    Cursor c = context.getContentResolver().query(uri, columns, where, new String[]{phNum}, null); 
```

请注意[这一点](http://android-developers.blogspot.com/2010/05/be-careful-with-content-providers.html)，因为这在很大程度上取决于 OEM 以及他们的联系人通讯录是如何设置的。我相信您真正想做的是获取 msg_count 列。

但是我不确定地址是否是正确的列。我知道如果我是正确的，您应该查看 SMS 收件箱。

# c# - 分段错误：11 - 但构建成功

> ID：15462990
> 
> 赞同：1
> 
> 时间：2013-03-17T16:11:03.787
> 
> 标签：c#

我正在创建一个 BlackJack 游戏，到目前为止，我已经创建了一个 Card Class 和 Deck Class，我给我的 Deck Class 一个 Print 函数，以查看是否创建了卡片并正确洗牌。但是当我运行程序时，我得到了这个错误，Segmentation fault: 11，但构建成功。

**主班**

```
 using System;
    using System.Collections.Generic;
    using System.Text;

    namespace BlackJackGameX
    {
        public class MainClass
        {
            public static void Main (string[] args)
            {

                Deck CardDeck = new Deck();

                CardDeck.Print ();

            }
        }
    } 
```

**卡类**

```
using System;
using System.Collections.Generic;
using System.Text;

namespace BlackJackGameX
{
    public enum Suit {Spades, Hearts, Clubs, Diamonds}
    public enum FaceValue {Ace, Two, Three, Four, Five, Six, Seven, Eight, Nine, Ten, Jack, Queen, King}

    public class Card
    {
        public Suit CardSuit;
        public FaceValue CardValue;
        public int iValue;

        public Card (Suit cardSuit, FaceValue cardValue, int ivalue)
        {
            CardSuit = cardSuit;
            CardValue = cardValue;
            iValue =ivalue;
        }

        public Card ()
        {

        }
    }
} 
```

**甲板等级**

```
using System;
using System.Collections.Generic;
using System.Text;

namespace BlackJackGameX
{
    public class Deck
    {
        Random rNumber = new Random();

        List<Card> Cards;

        public int iValue1 = 11;
        public int iValue2 = 2;
        public int iValue3 = 3;
        public int iValue4 = 4;
        public int iValue5 = 5;
        public int iValue6 = 6;
        public int iValue7 = 7;
        public int iValue8 = 8;
        public int iValue9 = 9;
        public int iValue10 = 10;
        public int iValue11 = 10;
        public int iValue12 = 10;
        public int iValue13 = 10;

        public Deck()
        {
            Cards = NewDeck();
            Shuffle();
        }

        public void Shuffle()
        {

            for (int i = 0; i <= 51; ++i) 
            {
                int c = rNumber.Next (1, 53);

                Cards.Add(Cards[c]);
            }
        }

        private List<Card> NewDeck()
        {
            var AllSuits = new Suit[]
            {
                Suit.Spades,
                Suit.Hearts,
                Suit.Clubs,
                Suit.Diamonds
            };

            var AllFaces = new FaceValue[]
            {
                FaceValue.Ace,
                FaceValue.Two,
                FaceValue.Three,
                FaceValue.Four,
                FaceValue.Five,
                FaceValue.Six,
                FaceValue.Seven,
                FaceValue.Eight,
                FaceValue.Nine,
                FaceValue.Ten,
                FaceValue.Jack,
                FaceValue.Queen,
                FaceValue.King
            };

            var AllValues = new int[]
            {
                iValue1,
                iValue2,
                iValue3,
                iValue4,
                iValue5,
                iValue6,
                iValue7,
                iValue8,
                iValue9,
                iValue10,
                iValue11,
                iValue12,
                iValue13
            };

            for (int i = 0; i <= 3; i++) 
            {
                for (int j = 0; j <= 12; j++) 
                {
                    Card newCard = new Card(AllSuits[i], AllFaces[j], AllValues[j]);
                    NewDeck().Add(newCard);
                }
            }

            return NewDeck();
        }

        public void Print()
        {
            Console.WriteLine(Cards[1].CardSuit);
            Console.WriteLine(Cards[1].CardValue);
            Console.WriteLine(Cards[1].iValue);
            Console.ReadLine();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T16:21:14.873

您的问题出`Deck`在方法中的类中`private List<Card> NewDeck()`。当您编写时，`NewDeck().Add(newCard);`您一次又一次地调用函数递归，直到发生堆栈溢出。解决方案是为您的牌组定义一个新的局部`List<Card>`变量，您将在其中添加卡片并返回此变量而不是`NewDeck()`.

就在您的两个 for 循环之前，添加`List<Card> myDeck = new List<Card>();`并更改行`NewDeck().Add(newCard);`to`myDeck.Add(newCard);`和`return NewDeck();`to `return myDeck;`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T16:19:15.050

当构建成功时，这意味着编译器能够从您的代码生成目标二进制文件。但是，这并不意味着您的应用程序没有错误。这只是意味着编译成功。

A`Segmentation fault`是内存错误，发生在运行时。所以你必须首先有一个成功的构建。这是意料之中的。

您需要做的是调试代码以确定发生此内存错误的原因。

您是否取消引用 NULL 指针？您是否正在执行超出数组限制的操作？您是否溢出缓冲区（并覆盖指针）？这些是段的常见原因。过错。错误。

所以，我想说你的问题更多是关于调试（如何调试分段错误错误）。为此，我们需要知道错误发生在什么情况下。

# javascript - 在不提交表单的情况下触发自动完成

> ID：15462991
> 
> 赞同：57
> 
> 时间：2013-03-17T16:11:04.033
> 
> 标签：javascript, html, forms

我正在编写一个非常简单的带有三个文本输入的网络应用程序。输入用于生成结果，但所有工作都是在 Javascript 中完成的，因此无需提交表单。我试图找到一种方法让浏览器存储自动完成的输入值，就像它们在提交的表单中一样。

我已经尝试手动输入 autocomplete="on"，但是如果没有要提交的表单，浏览器无法知道何时应该存储这些值，所以这没有效果。

我还尝试将输入包装在具有 onSubmit="return false;" 的表单中，但阻止表单实际提交似乎也阻止了浏览器存储其输入的值。

当然可以手动使用 localStorage 或 cookie 来保存输入，然后从中生成自动完成提示，但我希望找到一种解决方案，利用本机浏览器行为而不是手动复制它。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-03-26T10:06:32.443

用 Chrome、IE 和 Firefox 测试：

```
<iframe id="remember" name="remember" class="hidden" src="/content/blank"></iframe>

<form target="remember" method="post" action="/content/blank">
  <fieldset>
    <label for="username">Username</label>
    <input type="text" name="username" id="username" value="">
    <label for="password">Password</label>
    <input type="password" name="password" id="password" value="">
  </fieldset>
  <button type="submit" class="hidden"></button>
</form> 
```

在您的 Javascript 中触发提交，例如~~`$("form").submit();`~~ `$("#submit_button").click()`（根据评论更新）

您需要在 /content/blank 返回一个空白页面以获取和发布（about:blank 对我不起作用，但 YMMV）。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2015-04-27T01:48:01.903

我们知道浏览器**只有在提交表单时才会**保存它的信息，这意味着我们不能用`return false`or取消它`e.preventDefault()`

我们能做的是让它在不重新加载页面的情况下将数据提交到任何地方。我们可以做到这一点`iframe`

```
<iframe name="" style="display:none" src="about:blank"></iframe>

<form target="" action="about:blank">
    <input name="user">
    <input name="password" type="password">
    <input value="Login" type="submit">
</form> 
```

[JSfiddle 上的演示（在 IE9、Firefox、Chrome 中测试）](http://jsfiddle.net/6cve0z98/)

目前接受的答案的优点：

*   更短的代码；
*   没有 jQuery；
*   没有加载服务器端页面；
*   没有额外的javascript；
*   不需要额外的课程。

没有额外的javascript。您通常将处理程序附加到`submit`表单的事件以发送 XHR 并且**不要取消它。**

# Javascript 示例

```
// for modern browsers with window.fetch
document.forms[0].addEventListener('submit', function (event) {
    fetch('login.php', {
        method: 'post',
        body: new FormData(event.target))
    }).then(r => r.text()).then(() => { /* login completed */ })
    // no return false!!
}); 
```

# 无 JavaScript 支持

理想情况下，您也应该让表单在没有 javascript 的情况下工作，因此删除`target`并将操作设置为将接收您的表单数据的页面。

```
<form action="login.php"> 
```

然后在添加事件时通过 javascript 添加它`submit`：

```
formElement.target = '';
formElement.action = 'about:blank'; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-19T22:21:18.367

我还没有对此进行测试，但是如果您将表单提交到隐藏的 iframe（以便实际提交表单但不会重新加载当前页面），它可能会起作用。

```
<iframe name="my_iframe" src="about:blank"></iframe>

<form target="my_iframe" action="about:blank" method="get">...</form> 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2020-02-06T02:26:42.827

---没有框架---

您可以使用 action="javascript:void(0)" 而不是使用 iframe，这样它就不会转到另一个页面并且自动完成将存储这些值。

```
<form action="javascript:void(0)">
    <input type="text" name="firstName" />
    <button type="submit">Submit</button>
</form> 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-25T08:47:45.607

也许你可以使用这个[Twitter Typeahead](http://twitter.github.com/typeahead.js/) ...是一个非常完整的自动完成实现，具有本地和远程预取，这利用 localStorage 来持久化结果，并且它在输入元素中显示一个提示......代码是易于理解，如果您不想使用完整的 jquery 插件，我认为您可以看一下代码以了解如何实现您想要的...

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-21T23:59:00.347

根据我搜索的内容.. 似乎您需要识别名称。大多数浏览器会自动保存一些标准名称，例如“姓名”、“电子邮件”、“电话”、“地址”。

好吧，问题是，浏览器处理这些名称的方式不同。例如，这是 chrome 的正则表达式：

*   名字：“first.*name|首字母|fname|first$”
*   电子邮件：“e.?mail”
*   地址（第 1 行）：“地址。*line|address1|addr1|street”
*   邮编：“邮编|邮政|邮政。*code|pcode|^1z$”

但是 chrome 也使用`autocomplete`，因此您可以自定义名称并输入自动完成类型，但我相信这不适用于自定义字段..

[这是chrome的标准](https://developers.google.com/web/updates/2015/06/checkout-faster-with-autofill)

这在 IE、Opera 和 Mozilla 中是另一回事。现在，您可以在那里尝试 iframe 解决方案，以便您可以提交它。（也许这是半标准的）

好吧，这就是我能提供的全部帮助。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-03-26T08:36:24.583

当 focusout 和 focusin 时，您可以使用 jQuery 将自动完成数据持久保存在 localstorage 中，它会自动完成持久化的值。

IE

```
$(function(){
 $('#txtElement').on('focusout',function(){
   $(this).data('fldName',$(this).val());
 }

 $('#txtElement').on('focusin',function(){
   $(this).val($(this).data('fldName'));
 }
} 
```

您还可以根据您的应用程序要求将持久性逻辑绑定到其他事件上。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-06-01T22:49:30.597

对于那些不想更改现有表单功能的人，您可以使用第二个表单来接收所有表单值的副本，然后在提交主表单之前提交到空白页面。这是一个使用 JQuery Mobile 演示解决方案的完全可测试的 HTML 文档。

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <link rel="stylesheet" href="https://code.jquery.com/mobile/1.4.5/jquery.mobile.structure-1.4.5.min.css" />
    <script src="https://code.jquery.com/jquery-1.10.2.min.js"></script>
    <script src="https://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js"></script>
</head>
<body>
    <form method="post">
        <input type="text" name="email" />
        <input type="submit" value="GO" onclick="save_autofill(this);" />
    </form>

    <script>
        function save_autofill(o) {
            $(':input[name]', $('#hidden_form')).val(function () {
                return $(':input[name=' + this.name + ']', $(o.form)).val();
            });

            $('#hidden_form').find("input[type=submit]").click();
        }
    </script>

    <iframe name="hidden_iframe" style="display:none"></iframe>
    <form target="hidden_iframe" id="hidden_form" action="about:blank" style="display:none">
        <input type="text" name="email" />
        <input type="submit" />
    </form>
</body>
</html> 
```

该`save_autofill`函数只需要在您的主表单提交按钮上调用。如果您有提交表单的脚本函数，请在调用之后进行`save_autofill`调用。`hidden_form`您的主表单中的每个文本框都必须有一个命名文本框。

如果您的站点使用 SSL，那么您必须将 URL 更改为`about:blank`with `https://about:blank`。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2014-07-09T22:09:36.067

确保您通过 POST 提交表单。如果您通过 ajax 提交，请`<form autocomplete="on" method="post">`忽略该`action`属性。

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2016-12-09T07:10:23.497

您可以使用 ”。” 在 iframe src 和表单操作中。

```
 <iframe id="remember" name="remember" style="display:none;" src="."></iframe>
 <form target="remember" method="post" action=".">
    <input type="text" id="path" size='110'>
    <button type="submit" onclick="doyouthing();">your button</button>
</form> 
```

# macos - 应用程序已损坏，无法打开。删除应用程序并从 App Store 重新下载

> ID：15462993
> 
> 赞同：3
> 
> 时间：2013-03-17T16:11:05.633
> 
> 标签：macos, cocoa, app-store, mac-app-store

我有适用于 Mac App Store 的应用程序，但遇到了以下问题。1.1 版已经在 Mac App Store 中。

如果我将应用程序的版本更改为 1.2 并尝试使用测试帐户运行它，我会收到以下消息：

```
The app is damaged and can’t be opened. Delete the app and download it again from the App Store. 
```

控制台显示条目：

```
Exited with code: 173 
```

我返回以前的版本号 1.1，应用程序启动。我试图将应用程序发送给我的同事。它运行正常。我试图从我的硬盘中删除所有相同的二进制文件。它没有帮助。我之前也遇到过同样的问题，我什至将那个状态的应用程序提交到了 App Store。它被成功批准。现在我可以使用测试帐户运行 1.1，但我无法运行 1.2。

如何使用 App Store 解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T16:14:55.257

返回代码`173`表示商店收据验证失败。

由于您只从商店购买了 1.1，因此收据是 1.1 而不是 1.2。

因此，如果您将应用程序的 plist 更改为 1.2，则验证失败...收据 1.1 与应用程序 1.2

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-17T10:49:07.347

试试这个（它对我有用）：

打开终端，然后输入：

```
cd /Applications

sudo chown root Clear.app

sudo chmod 777 Clear.app 
```

然后打开清除应用程序。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2015-04-09T13:06:18.757

如果您信任从中下载内容的人，您可以通过将“首选项 > 安全和隐私”调整为

允许从以下位置下载应用程序：任何地方

# python-2.7 - 基于列条件的 Pandas 中的多索引

> ID：15462996
> 
> 赞同：2
> 
> 时间：2013-03-17T16:11:16.633
> 
> 标签：python-2.7, pandas

我在 csv 文件中有一个巨大的 GPS 数据集。
是这样的。

```
12,1999-09-08 12:12:12, 116.3426, 32.5678

12,1999-09-08 12:12:17, 116.34234, 32.5678

.
.
. 
```

其中每一列的形式为
`id, timestamp, longitude, latitude`

现在，我正在使用 pandas 并将文件导入数据框，到目前为止我已经编写了这段代码。

```
import pandas as pd
import numpy as np
#this imports the columns and making the timestamp values as row indexes
df = pd.read_csv('/home/abc/Downloads/..../366.txt',delimiter=',',
                index_col=1,names=['id','longitude','latitude'])
#removes repeated entries due to gps errors. 
df = df.groupby(df.index).first() 
```

有时，同一日期会有 2 或 3 个多个条目，应删除

我得到这样的东西

```
 id  longitude  latitude
1999-09-08 12:12:12    12  116.3426   32.5678
1999-09-08 12:12:17    12  116.34234  32.5678
# and so on with redundant entries removed 
```

现在我希望对具有相同纬度和经度的行进行连续索引。即，我的可视化是

```
 id  longitude  latitude
0 1999-09-08 12:12:12 12  116.3426    32.5678
1 1999-09-08 12:12:17 12  116.34234   32.5678
2 1999-09-08 12:12:22 12  116.342341  32.5678
  1999-09-08 12:12:27 12  116.342341  32.5678
  1999-09-08 12:12:32 12  116.342341  32.5678
  ....
  1999-09-08 12:19:37 12  116.342341  32.5678
3 1999-09-08 12:19:42 12  116.34234   32.56123
  and so on.. 
```

即，具有相同纬度和经度值的行将被连续索引。我怎样才能做到这一点？我是熊猫的初学者，所以我不太了解它。请帮忙！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T20:50:16.907

你应该利用它[`DataFrame.duplicated`](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.duplicated.html)并用它做一些数学运算：

```
idx = df.duplicated(['longitude', 'latitude'])
idx *= -1
idx += 1
idx.ix[0] = 0
df = df.set_index(idx.cumsum(), append=True).swaplevel(0,1) 
```

* * *

**代码如何工作**

从`df`你得到：

```
In [215]: df
Out[215]: 
                     id   longitude  latitude
stamp                                        
1999-09-08T12:12:12  12  116.342600  32.56780
1999-09-08T12:12:17  12  116.342340  32.56780
1999-09-08T12:12:22  12  116.342341  32.56780
1999-09-08T12:12:27  12  116.342341  32.56780
1999-09-08T12:12:32  12  116.342341  32.56780
1999-09-08T12:19:37  12  116.342341  32.56780
1999-09-08T12:19:42  12  116.342340  32.56123 
```

首先计算连续的重复`(longitude, latitude)`元组：

```
In [216]: idx = df.duplicated(['longitude', 'latitude'])

In [217]: idx
Out[217]: 
stamp
1999-09-08T12:12:12    False
1999-09-08T12:12:17    False
1999-09-08T12:12:22    False
1999-09-08T12:12:27     True
1999-09-08T12:12:32     True
1999-09-08T12:19:37     True
1999-09-08T12:19:42    False 
```

然后我们使用[`cumsum`](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.cumsum.html)创建一个从零开始的索引，该索引不会在重复项上增加。用它做一些数学运算，以获得重复行的零和其他行的零：

```
In [218]: idx *= -1
In [219]: idx += 1

In [220]: idx
Out[220]: 
stamp
1999-09-08T12:12:12    1
1999-09-08T12:12:17    1
1999-09-08T12:12:22    1
1999-09-08T12:12:27    0
1999-09-08T12:12:32    0
1999-09-08T12:19:37    0
1999-09-08T12:19:42    1 
```

由于我们想要一个从零开始的索引，我们将第一个单元格设置为`0`，然后将该列附加到 的索引`df`以创建`MultiIndex`：

```
In [221]: idx.ix[0] = 0
In [222]: df = df.set_index(idx.cumsum(), append=True) 
```

默认情况下，`set_index`将索引添加到比现有索引低的级别。我们必须通过交换时间戳和附加索引之间的级别来完成：

```
In [223]: df = df.swaplevel(0,1)

In [224]: df
Out[224]: 
                       id   longitude  latitude
  stamp                                        
0 1999-09-08T12:12:12  12  116.342600  32.56780
1 1999-09-08T12:12:17  12  116.342340  32.56780
2 1999-09-08T12:12:22  12  116.342341  32.56780
  1999-09-08T12:12:27  12  116.342341  32.56780
  1999-09-08T12:12:32  12  116.342341  32.56780
  1999-09-08T12:19:37  12  116.342341  32.56780
3 1999-09-08T12:19:42  12  116.342340  32.56123 
```