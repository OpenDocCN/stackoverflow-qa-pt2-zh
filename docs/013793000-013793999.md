# StackOverflow 问答 13793000-13793999

# java - 在 JAVA 中终止程序时捕获异常

> ID：13793002
> 
> 赞同：0
> 
> 时间：2012-12-09T23:29:40.907
> 
> 标签：java, exception-handling

有没有办法做到这一点？

我正在编写一个必须迭代很长时间的程序，并且在这样做的同时它应该写入文件。我想在手动终止程序后立即关闭流，这样做可以避免由于未关闭的流而丢失数据的风险。应该有一种方法可以通过异常处理来做到这一点，但我不确定。任何形式的建议都非常感谢！

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T23:34:18.693

主要：

```
try {
   startapp();
} finally {
   closeAll();
} 
```

在 closeAll() 中，您执行安全关闭操作。即使发生异常，finally 块中的代码也会执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T23:36:09.210

以您描述的方式使用异常来控制程序执行是糟糕的设计。使用关闭挂钩会好得多。

```
Runtime.getRuntime().addShutdownHook(new Thread() {
    @Override
    public void run() {
       // Close streams here
    }
}); 
```

这将很好地处理大多数正常的关闭，但在硬停止 (SIGKILL) 的情况下，关闭挂钩不能保证运行。但这并不比您尝试通过 finally 块关闭流更糟糕。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T23:45:27.983

我找到了一个方法！我为此浪费了很多时间，却没有注意到程序终止时流会自动关闭...

数据没有被写入，因为我没有在 write() 方法之后使用 flush() 方法，如下所示：

```
out.write(line);
out.flush(); 
```

感谢大家的帮助

# php - MySQL 查询 - 多个值

> ID：13793003
> 
> 赞同：-2
> 
> 时间：2012-12-09T23:29:54.040
> 
> 标签：php, mysql

我已经尝试在任何地方找到解决方案，但不能。

这是我正在尝试做的事情：

我的数据库中有一个包含多个条目的单元格（类似于 XML 文件）。以下是以下几行：

```
main_description=""
main_multiblogger=1
main_comment="1"
main_comment_multiple="0" 
```

我将如何对 SELECT 和 UPDATE 特定值运行查询？我是否必须解析它才能实现我的目标？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T23:33:09.213

是的，如果您将半结构化数据* 存储在单个列中，那么使用 SQL 表达式来选择或更新数据中的单个元素就很困难或不可能。

您需要将整个列选择回您的应用程序，将其解析出来，以您想要的方式对其进行修改，然后将其完全更新到数据库中，覆盖旧值。

* “半结构化”是指数据具有您理解的结构，但 SQL 没有。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T23:40:47.090

这取决于“特定值”是什么。
一种方法可能是：

```
SELECT * FROM table_name WHERE column_name='main_comment="1"' 
```

或者：

```
SELECT * FROM table_name WHERE column_name LIKE 'main_comment=%' 
```

也许您应该考虑将列拆分为`key`and `value`：

```
SELECT * FROM table_name WHERE key='main_comment' 
```

或者：

```
SELECT * FROM table_name WHERE key='main_comment' AND value='1' 
```

如果其中一个对您有用，您可以对`UPDATE`声明做同样的事情。

# linq - CombineSelector 在 Linq 中做了什么

> ID：13793005
> 
> 赞同：1
> 
> 时间：2012-12-09T23:29:57.870
> 
> 标签：linq, selector

我正在查看反射器中的 CombineSelector。

有人可以解释它究竟做了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T16:23:06.280

首先，请记住，它是一种私有方法，供内部使用。你不仅不应该使用它，而且不会遇到很多麻烦，你不能使用它。

简单地说，它接受两个委托，并创建一个新函数，该函数接受一个值，并使用参数值调用第一个委托，然后使用第一个的返回值调用第二个委托。

因此：

```
var func = Enumerable.CombineSelector<int, double, string>(x=> x*100.0, 
                                                           y=> y.ToString()); 
```

大致与以下内容相同：

```
var func = x=> (x*100.0).ToString(); 
```

这与以下内容大致相同：

```
string func(int x) { double y = x * 100.0
                     return y.ToString();
                   } 
```

# assembly - Irvine Assembly 合并数组

> ID：13793008
> 
> 赞同：0
> 
> 时间：2012-12-09T23:30:13.167
> 
> 标签：assembly, x86, masm, irvine32

我需要将两个已经排序的数组合并到另一个更大的数组中，也是按顺序排列的。我不能使用排序。它组装得很好，但不会显示任何东西。

这就是我到目前为止所拥有的。我是新手，所以如果它不是最好的，那就放轻松。

```
include irvine32.inc
Title MergeArrays
.data
    a1 dw 1,3,4,7,9,15,17
    a2 dw 2,6,8,10,11,14,18,19
    a3 dw 15 dup(0)

.code
main proc
    sub EAX,EAX
    mov ESI,OFFSET a1
    mov EDI,OFFSET a2
    mov EDX,OFFSET a3
    mov ECX,lengthof a3 ;Set loop times

    call Merge
    call Display
    exit
    main endp
    jmp Endit

;=====================================================================
Merge proc
    TheLoop:
    TheJump:
    mov ax,[ESI]
    cmp ax,[EDI]
    jl AddA1        ;Jump if less
    jg AddA2        ;Jump if greater
    Loop TheLoop

    AddA1:
    mov ax,[ESI]
    mov [EDX],ax
    inc ESI
    inc EDX
    jmp TheJump

    AddA2:
    mov ax,[EDI]
    mov [EDX],ax
    inc EDI
    inc EDX
    jmp TheJump
Merge endp
;==================================================================
Display proc
    mov ECX,lengthof a3 ;Set loop times
    mov EDX,OFFSET a3

        DisplayLoop:
        mov ax,[EDX]
        call writedec
        call crlf
        inc EDX
        loop DisplayLoop
Display endp
;===================================================================

Endit:
end main 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-10T00:30:44.227

当`TheLoop`降至零时会发生什么？ `ecx`变为负数，退出循环，然后**KEEPS** 转到下一条指令，该指令恰好`AddA1`又回到`TheJump`then 到`AddA1`or `AddA2`，这是一个无限循环。您需要在退出过程之后`Loop TheLoop`和之前添加一些内容。`AddA1`

您实际上并不需要调试器，只需要打印传递的值以进行调试的东西。

# java - Java 图形绘图不显示在绘图面板上

> ID：13793009
> 
> 赞同：1
> 
> 时间：2012-12-09T23:30:14.727
> 
> 标签：java, graphics, awt, frame

我正在启动一个非常简单的java程序。用户可以从菜单中选择形状、大小、填充（布尔）、线条颜色和填充颜色，然后单击并拖动以在屏幕上绘制所选对象。在这一点上，我只是想弄清楚为什么屏幕上什么都没有。在运行方法中，我在 200,200 处绘制了一个简单的矩形，但面板上没有出现任何内容。我有信心，一旦我弄清楚为什么什么都没有绘制，我可以让程序的其余部分正常工作知道我做错了什么吗？

```
import java.awt.*;
import java.applet.*;
import java.awt.event.*;
import java.util.*;
import java.io.*;
import java.lang.*;
import java.awt.Rectangle;

public class E3G04 extends Frame implements WindowListener, ActionListener, ItemListener, MouseListener, MouseMotionListener, Runnable
{
    volatile String type = "rectangle";
    volatile Boolean fill = true;
    Color lineColor = Color.BLACK;
    Color fillColor = Color.BLACK;
    int size = 1;

    private Graphics obj;
    Point start = new Point(100,100);
    Point cur = new Point(100,100);
    Point end = new Point(100,100);

    Panel drawingpanel;
    Thread thread = new Thread(this);
    boolean running = true;

    MenuBar mb = new MenuBar();
        Menu fileMenu = new Menu("File");
            MenuItem newItem = new MenuItem("New (Ctrl-N)");
            MenuItem quitItem = new MenuItem ("Quit (Ctrl-Q)");
        Menu drawMenu = new Menu("Draw");
            Menu typeMenu = new Menu("Type");
                CheckboxMenuItem ovalItem = new CheckboxMenuItem("Oval (Ctrl-O)");
                CheckboxMenuItem rectItem = new CheckboxMenuItem("Rectangle (Ctrl-R)", true);
                CheckboxMenuItem lineItem = new CheckboxMenuItem("Line (Ctrl-L)");
            Menu fillMenu = new Menu ("Fill");
                CheckboxMenuItem fillItem = new CheckboxMenuItem("Fill", true);
                CheckboxMenuItem noFillItem = new CheckboxMenuItem("No Fill");
            Menu colorMenu = new Menu ("Color");
                CheckboxMenuItem blackLineItem = new CheckboxMenuItem("Black Line", true);
                CheckboxMenuItem redLineItem = new CheckboxMenuItem("Red Line");
                CheckboxMenuItem orangeLineItem = new CheckboxMenuItem("Orange Line");
                CheckboxMenuItem yellowLineItem = new CheckboxMenuItem("Yellow Line");
                CheckboxMenuItem greenLineItem = new CheckboxMenuItem("Green Line");
                CheckboxMenuItem blueLineItem = new CheckboxMenuItem("Blue Line");
                CheckboxMenuItem purpleLineItem = new CheckboxMenuItem("Purple Line");
                CheckboxMenuItem grayLineItem = new CheckboxMenuItem("Gray Line");
                CheckboxMenuItem blackFillItem = new CheckboxMenuItem("Black Fill", true);
                CheckboxMenuItem redFillItem = new CheckboxMenuItem("Red Fill");
                CheckboxMenuItem orangeFillItem = new CheckboxMenuItem("Orange Fill");
                CheckboxMenuItem yellowFillItem = new CheckboxMenuItem("Yellow Fill");
                CheckboxMenuItem greenFillItem = new CheckboxMenuItem("Green Fill");
                CheckboxMenuItem blueFillItem = new CheckboxMenuItem("Blue Fill");
                CheckboxMenuItem purpleFillItem = new CheckboxMenuItem("Purple Fill");
                CheckboxMenuItem grayFillItem = new CheckboxMenuItem("Gray Fill");
            Menu sizeMenu = new Menu("Size");
                CheckboxMenuItem oneItem = new CheckboxMenuItem("One", true);
                CheckboxMenuItem twoItem = new CheckboxMenuItem("Two");
                CheckboxMenuItem threeItem = new CheckboxMenuItem("Three");
                CheckboxMenuItem fourItem = new CheckboxMenuItem("Four");
                CheckboxMenuItem fiveItem = new CheckboxMenuItem("Five");

    protected E3G04()
    {

        // Add everything to the menu bar and then
        // add the menu bar to the frame
        mb.add(fileMenu);
        mb.add(drawMenu);
        fileMenu.add(newItem);
        fileMenu.add(quitItem);
        drawMenu.add(typeMenu);
        drawMenu.add(fillMenu);
        drawMenu.add(colorMenu);
        drawMenu.add(sizeMenu);
        typeMenu.add(ovalItem);
        typeMenu.add(rectItem);
        typeMenu.add(lineItem);
        fillMenu.add(fillItem);
        fillMenu.add(noFillItem);
        if (fill && type != "line")
        {       
            enableAllColors();
        }
        else
        {
            disableFillColor();
        }
        sizeMenu.add(oneItem);
        sizeMenu.add(twoItem);
        sizeMenu.add(threeItem);
        sizeMenu.add(fourItem);
        sizeMenu.add(fiveItem);                 
        setMenuBar(mb); 

        //Set all of the listeners  
        newItem.addActionListener(this);
        quitItem.addActionListener(this);
        ovalItem.addItemListener(this);
        rectItem.addItemListener(this);
        lineItem.addItemListener(this);
        fillItem.addItemListener(this);
        noFillItem.addItemListener(this);
        blackLineItem.addItemListener(this);
        redLineItem.addItemListener(this);          
        orangeLineItem.addItemListener(this);
        yellowLineItem.addItemListener(this);
        greenLineItem.addItemListener(this);
        blueLineItem.addItemListener(this);
        purpleLineItem.addItemListener(this);
        grayLineItem.addItemListener(this);
        oneItem.addItemListener(this);
        twoItem.addItemListener(this);
        threeItem.addItemListener(this);
        fourItem.addItemListener(this);
        fiveItem.addItemListener(this);     

        drawingpanel = new Panel();
        drawingpanel.setLayout(null);
        drawingpanel.setSize(800,600);
        drawingpanel.addMouseListener(this);
        drawingpanel.addMouseMotionListener(this);
        setBounds(100,100,800,600);
        setLayout(new BorderLayout());

        add("Center",drawingpanel);
        addWindowListener(this);
        setResizable(true);
        pack();
        setVisible(true);
        thread.start();
    }

    public static void main(String [] args)
    {
        new E3G04();
    }
    public void run()
    {       
        obj = getGraphics();
        System.out.print("here");
        obj.setColor(Color.black);
        obj.drawRect(200,200,100,100);
        obj.fillRect(200,200,100,100);
        while(running)
        {           
            //other stuff to come
        }
    }

    public void stop()
    {
        drawingpanel.removeMouseListener(this);
        newItem.removeActionListener(this);
        quitItem.removeActionListener(this);
        ovalItem.removeItemListener(this);
        rectItem.removeItemListener(this);
        lineItem.removeItemListener(this);
        fillItem.removeItemListener(this);
        noFillItem.removeItemListener(this);
        blackLineItem.removeItemListener(this);
        redLineItem.removeItemListener(this);           
        orangeLineItem.removeItemListener(this);
        yellowLineItem.removeItemListener(this);
        greenLineItem.removeItemListener(this);
        blueLineItem.removeItemListener(this);
        purpleLineItem.removeItemListener(this);
        grayLineItem.removeItemListener(this);
        oneItem.removeItemListener(this);
        twoItem.removeItemListener(this);
        threeItem.removeItemListener(this);
        fourItem.removeItemListener(this);
        fiveItem.removeItemListener(this);  
        dispose();
        System.exit(0);
    }

    public void disableFillColor()
    {
        colorMenu.removeAll();
        colorMenu.add(blackLineItem);
        colorMenu.add(redLineItem);
        colorMenu.add(orangeLineItem);
        colorMenu.add(yellowLineItem);
        colorMenu.add(greenLineItem);
        colorMenu.add(blueLineItem);
        colorMenu.add(purpleLineItem);
        colorMenu.add(grayLineItem);
    }
    public void enableAllColors()
    {
        colorMenu.removeAll();
        colorMenu.add(blackLineItem);
        colorMenu.add(redLineItem);
        colorMenu.add(orangeLineItem);
        colorMenu.add(yellowLineItem);
        colorMenu.add(greenLineItem);
        colorMenu.add(blueLineItem);
        colorMenu.add(purpleLineItem);
        colorMenu.add(grayLineItem);        
        colorMenu.addSeparator();
        colorMenu.add(blackFillItem);
        colorMenu.add(redFillItem);
        colorMenu.add(orangeFillItem);
        colorMenu.add(yellowFillItem);
        colorMenu.add(greenFillItem);
        colorMenu.add(blueFillItem);
        colorMenu.add(purpleFillItem);
        colorMenu.add(grayFillItem);
    }
    public void actionPerformed(ActionEvent e)
    {
        Object o = e.getSource();

        if (o == newItem)
        {
            //Clear Screen
        }

        if (o == quitItem)
        {   
            thread.stop();
            running = false;
            stop();
        }
    }      

    public void mouseClicked(MouseEvent m)
    {
        Object o = m.getSource();
    }   

    public void mousePressed(MouseEvent m)
    {
        start = m.getPoint();
        end = start;
        cur = start;
    }

    public void mouseDragged(MouseEvent m)
    {
        cur = m.getPoint();
    }   

    public void mouseReleased(MouseEvent m)
    {
        end = cur;
    }   

    public void itemStateChanged(ItemEvent e)
    {
        //Code removed for brevity
    }
    public void windowClosing(WindowEvent e)
    {
        running = false;
        stop();
    }
    public void mouseExited(MouseEvent m)
    {}
    public void mouseEntered(MouseEvent m)
    {}  
    public void mouseMoved(MouseEvent m)
    { }
    public void windowClosed(WindowEvent e){}
    public void windowOpened(WindowEvent e){}
    public void windowActivated(WindowEvent e){}
    public void windowDeactivated(WindowEvent e){}
    public void windowIconified(WindowEvent e){}
    public void windowDeiconified(WindowEvent e){}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T23:43:10.997

在 AWT 应用程序中，每当您想绘制时，您通常创建一个[`Canvas`](http://docs.oracle.com/javase/6/docs/api/java/awt/Canvas.html)覆盖[paint(Graphics)](http://docs.oracle.com/javase/6/docs/api/java/awt/Canvas.html#paint%28java.awt.Graphics%29)方法的子类。有关示例，请参阅[Java AWT Canvas – 自由绘图。](http://way2java.com/awt-components/java-awt-canvas-freelance-drawing/)

不幸的是，您当前的方法不起作用的原因非常复杂。例如，所有绘图都必须在[事件调度线程](http://www.jguru.com/faq/view.jsp?EID=8963)（也称为 AWT 线程）上完成。AWT 为您创建这些特殊线程，并且在大多数情况下，您无需担心它，除非创建您自己的线程。此外，正如 MadProgrammer 指出的那样，您不应该持有`Graphics`引用。您应该只`Graphics`在方法期间使用 AWT 提供给您的参考资料。一个例外是`Graphics`从[`BufferedImage`s](http://docs.oracle.com/javase/6/docs/api/java/awt/image/BufferedImage.html)获得的引用（所谓的软件图形上下文）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T23:47:38.017

1.  永远不要维护对`Graphics`上下文的引用。上下文是无状态的`Graphics`（也就是说，它的状态在绘制周期之间被重置），`Graphics`上下文也可能在绘制周期之间改变，给你留下一个无效的上下文。

# css - css绝对定位反向

> ID：13793014
> 
> 赞同：0
> 
> 时间：2012-12-09T23:30:44.357
> 
> 标签：css

嗨，我真的对本教程中的绝对定位感到困惑。

我不明白为什么在图形标签上使用 left: 0 ，他实际上在左边留了一个边距

335px，以及为什么当他使用左时它实际上表现得像右：0。

我知道当实际的父 div 为 0 宽度或 0 时会出现此类问题

高度，因为他无法显示块元素

这是部分css代码：

```
.ia-container figure {
    position: absolute;
    top: 0;
    left: 50px; /* width of visible piece */
    width: 335px;
    box-shadow: 0 0 0 1px rgba(255,255,255,0.6);
    transition: all 0.3s ease-in-out;
} 
```

您可以在这里找到演示：http: [//tympanus.net/codrops/2012/06/06/image-accordion-with-css3/](http://tympanus.net/codrops/2012/06/06/image-accordion-with-css3/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T23:41:31.570

它没有。

来自`left`另一个规则

```
.ia-container input:checked ~ figure {
    left: 335px;
    transition: all 0.7s ease-in-out;
} 
```

# python - Python：将字符串拆分两次以形成二维列表

> ID：13793022
> 
> 赞同：-1
> 
> 时间：2012-12-09T23:32:14.440
> 
> 标签：python, string, split

我正在尝试将日志文件拆分为 2D 列表。第一个列表在每个标签处拆分，然后在第二级它在每个换行符处拆分。我得到字符串并将其拆分以获得第一个，但是当我循环遍历它以再次拆分它时，我在底部得到错误。我已经看过并尝试了不同的东西，但没有运气。这对我来说似乎是对的，但我对 python 还很陌生。

```
with open('log.txt', 'r') as f:
     read_data = f.read().split('tag:         "')
f.closed

for i in read_data:
    print read_data[i].split() 
```

错误：

```
File "parsing.py", line 6, in <module>
    print read_data[i].split()
TypeError: list indices must be integers, not str 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T00:08:36.970

```
with open('log.txt', 'r') as f:
    data2D = [x.split() for x in f.read().split('tag:         "') ] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T23:55:23.360

`read_data`是一个字符串列表。然后，您将列表中的每个字符串依次放入`i`. 到目前为止，一切都很好。但是，然后您尝试使用`i`（这是一个字符串）作为索引。你应该做的是：

```
print i.split() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T00:35:35.547

@您的代码的第 2 版：

Python 中的字符串是不可变的。这意味着它们永远不会改变 - 你只能创建一个内容改变的新字符串：

```
>>> x = "Foo\r\n"
>>> x
"Foo\r\n"
>>> x.rstrip("\r\n")
"Foo"
>>> x
"Foo\r\n" 
```

如您所见`rstrip()`，没有更改名为 的字符串的值`x`。相反，它返回了一个改变的字符串。如果您不关心以前的值，则可以将名称重新分配`x`给新值：

```
>>> x = x.rstrip("\r\n")
>>> x
"Foo" 
```

# ios - 如何在请求会话之前检测用户是否有 iOS 集成 Facebook 帐户设置？

> ID：13793026
> 
> 赞同：4
> 
> 时间：2012-12-09T23:32:32.320
> 
> 标签：ios, facebook, ios6, facebook-ios-sdk

在我看来，在第一次会话打开请求时，iOS 集成了 Facebook，而旧的“应用程序切换”授权以不同的方式工作。

第一个需要仅以读取权限打开会话，然后在发布时请求发布权限。

旧的需要在第一时间请求每个权限，因此应用程序稍后可以发布（否则不能）。

所以我在我的 facebook 连接方法中拆分了会话打开逻辑：

```
-(void)connectWithSuccess:(EPPZSuccessBlock) successBlock
                     fail:(EPPZFailBlock) failBlock
{
    if (FBSession.activeSession.isOpen)
    {
        if (successBlock) successBlock();
        [self socialServiceDidConnect:self];
    }

    else
    {
        //This is what I need to decide somehow.
        BOOL userHaveIntegrataedFacebookAccountSetup = NO;

        if (userHaveIntegrataedFacebookAccountSetup)
        {
            //Request for a session with read permissions only, otherwise iOS integrated Facebook will throw me an exception.
            [FBSession openActiveSessionWithReadPermissions:[NSArray arrayWithObject:@"user_about_me"]
                                               allowLoginUI:YES
                                          completionHandler:^(FBSession *session, FBSessionState status, NSError *error)
             { [self handleOpenSessionResponseWithSession:session status:status error:error success:successBlock fail:failBlock]; }];
        }
        else
        {
            //Request for session with every (incuding publish) permissions, otherwise non integrated Facebook won't let the app to post later.
            [FBSession openActiveSessionWithPublishPermissions:self.publishPermissions
                                               defaultAudience:FBSessionDefaultAudienceEveryone
                                                  allowLoginUI:YES
                                             completionHandler:^(FBSession *session, FBSessionState status, NSError *error)
             { [self handleOpenSessionResponseWithSession:session status:status error:error success:successBlock fail:failBlock]; }];
        }
    }
} 
```

但是我需要某种简单的检测来使用哪个，所以问题是：如何在请求会话之前检测用户是否有 iOS 集成 Facebook 帐户设置？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-09T23:43:57.780

据我所知，找出这一点的正确方法是使用

`[SLComposeViewController isAvailableForServiceType:SLServiceTypeFacebook]`

请注意，这仅适用于 iOS 6 及更高版本！Social.framework 的*一部分*。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-10T01:03:01.377

正如安东所说。

```
//Facebook setup on users device.
BOOL haveIntegratedFacebookAtAll = ([SLComposeViewController class] != nil);
BOOL userHaveIntegratedFacebookAccountSetup = haveIntegratedFacebookAtAll && ([SLComposeViewController isAvailableForServiceType:SLServiceTypeFacebook]); 
```

# configuration - 在没有管理控制台 gui 的情况下配置 Glassfish

> ID：13793028
> 
> 赞同：2
> 
> 时间：2012-12-09T23:32:47.867
> 
> 标签：configuration, glassfish, openshift

我已经安装了 Glassfish 应用服务器 Openshift 云服务器。由于 Openshift 的限制，我只能使用 :8080 端口。它不会让我在 :4848 端口上运行管理控制台，我会以某种方式从配置文件手动配置数据源、文件领域和安全领域。

a-) 是否可以在没有管理控制台的情况下进行配置？

b-) 管理控制台可以与应用程序一起在 :8080 端口上运行吗？

注意：无法为管理控制台分配任何端口 Openshift 不允许我这样做。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T11:04:50.840

[a) 您可以使用asadmin 工具](http://docs.oracle.com/cd/E18930_01/html/821-2416/giobi.html)配置 Glassfish

b) 您可以在 glassfish/domains/[yourdomain]/config/domain.xml 中更改管理控制台的端口：搜索

```
<network-listener port="4848" protocol="admin-listener" transport="tcp" name="admin-listener" thread-pool="admin-thread-pool"></network-listener> 
```

但我怀疑是否可以将端口 8080 用于管理 gui 和其他应用程序。

# emacs - 在初始化重新绑定宏中定位光标

> ID：13793031
> 
> 赞同：2
> 
> 时间：2012-12-09T23:32:57.157
> 
> 标签：emacs, lisp

我正在尝试制作一个键盘宏来打印 LaTeX 宏并将光标放在其中。例如，我在 .emacs 文件中放置了以下内容：

```
(global-set-key (kbd "C-c v") "\\bibleverse{}()") 
```

我想将光标设置在大括号内

```
(global-set-key (kbd "C-c v") "\\bibleverse{<cursor position>}()") 
```

我该怎么做？emacs lisp中是否有用于光标位置的宏？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T03:48:21.227

```
(defun latex-bibleverse-snippet ()
  (interactive)
  (insert "\\bibleverse{}()")
  (backward-char 3))

(global-set-key (kbd "C-c v") 'latex-bibleverse-snippet) 
```

也许是一个快速而肮脏的答案。或者您可以查看[YASnippet](https://github.com/capitaomorte/yasnippet)或[预测模式（为一些主要模式（当前：LaTeX、Texinfo、HTML）提供**IntelliSense**](http://www.emacswiki.org/emacs/PredictiveMode)功能。） :-)

# mysql - 表更新mysql上的多个唯一条目

> ID：13793040
> 
> 赞同：0
> 
> 时间：2012-12-09T23:34:29.807
> 
> 标签：mysql, sql-update, unique

现在我有一个带有自动递增 ID 号、名称和定义的表，我正在使用另一个表中的值更新表

```
INSERT INTO words(id, word, definition) SELECT id, word, definition FROM temp 
ON DUPLICATE KEY UPDATE words.word = temp.word, words.definition=temp.definition; 
```

表 temp 与我正在使用的表具有相同的列布局，并且它工作正常，除非我从 temp 中间删除一个条目然后更新我的主表。例如，

```
temp
id  word definition
1   bob   is a cat
2   sam   is a dog
3   doug  is a monk
4   croe  is a bird 
```

table main 设置为然后我从 temp 中删除第 2 行

```
temp
    id  word definition
    1   bob   is a cat
    2   doug  is a monk
    3   croe  is a bird 
```

然后更新主表

```
main
id  word definition
1   bob   is a cat
2   sam   is a dog
3   croe  is a bird
4   croe  is a bird 
```

因为 temp 现在只有 3 行，但主 HAD 4，第 4 行没有被删除。我试图通过将 word 设为唯一列来解决此问题，但现在我收到错误消息，即关键字“word”存在重复条目。那么我该如何解决呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T23:48:08.637

从[MySQL 手册](http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html)中，

> 通常，您应该尽量避免对具有多个唯一索引的表使用 ON DUPLICATE KEY UPDATE 子句。

所以，你可以做的是制作`word`你的主键，然后去掉这个`id`列。这应该够了吧 ：）

然后您的查询变为

```
INSERT INTO words(word, definition) SELECT word, definition FROM temp 
ON DUPLICATE KEY UPDATE words.word = temp.word, words.definition=temp.definition; 
```

如果您需要任意排序，我会创建一个附加表

```
CREATE TABLE word_order (VARCHAR(30) PRIMARY KEY, sort_order INT) 
```

然后当您运行查询时

```
SELECT words.word,
       words.definition
FROM words
JOIN word_order
ON words.word = word_order.word
ORDER BY word_order.sort_order 
```

但是，您`INSERTS`变得有点复杂，您必须运行多个插入。请参阅[sql-insert 在一个查询中插入多个表](https://stackoverflow.com/questions/3860280/sql-insert-into-multiple-tables-in-one-query)。

此外，这篇[CodeProject 文章](http://www.codeproject.com/Articles/453077/Generating-Keys-for-a-Custom-Sort-Order)对这个主题有更多的想法。

# python - 如何在 BeautifulSoup 中捕获此异常

> ID：13793045
> 
> 赞同：0
> 
> 时间：2012-12-09T23:35:43.963
> 
> 标签：python, beautifulsoup

> **可能重复：**
> [使用 BeautifulSoup，如何防止找不到元素？](https://stackoverflow.com/questions/3376666/using-beautifulsoup-how-to-guard-against-elements-not-being-found)

使用 BeautifulSoup 查找页面中的所有选项时出现以下 Python 错误：

```
 for item in soup.find(id="start_dateid").find_all('option'):
AttributeError: 'NoneType' object has no attribute 'find_all' 
```

问题是当页面没有id="start_dateid"时，会产生错误：AttributeError: 'NoneType' object has no attribute 'find_all'

如何防止这个错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T23:44:01.260

首先将您的“subsoup”分配给一个变量：

```
thing = soup.find(id="start_dateid")
if thing:
    for option in thing.find_all('option'):
        # potato potato potato 
```

# regex - 如何在 perl 中使用受控循环来使用正则表达式

> ID：13793047
> 
> 赞同：0
> 
> 时间：2012-12-09T23:36:17.447
> 
> 标签：regex, perl

我正在尝试使用 perl 中的正则表达式将从“1\. Virtualization”开始的值 grep 到“2.Virtualization”。1.Virutalization 和 2.Virtualization 之间有很多数据在一个数组中。

我的数组内容示例如下所示。
"1\. 虚拟化容量管理 因性能不佳而导致的事件数量 0 999 10 5 4 容量计划的生产成本 10K 100K 80K 30K 10K 计划外购买容量的数量 0 999 15 10 5 2.虚拟化财务管理 事件数量由于性能不佳 0 999 10 5 4 产能计划的生产成本 10K 100K 80K 30K 10K"

我如何编写一个受控循环，它 grep 值介于 1 和 2 之间。在 1 和 2 之间，它甚至应该 grep 数据“容量计划 10K 100K 80K 30K 10K 的生产成本”并放在一个阵列位置。

我尝试编写一些代码无法理解如何编写受控循环。任何人都可以帮我解决这个问题。

```
foreach (@array) { 
    if ($_ =~ /\d+\.\s+Virtualization.*/) { #greps values starting in 1\. Virtualizaton
         push (@node_level1, "$_");         #stores in the node_level1
    } elsif ($_ =~ /(\%\s+.*)/) {  #greps values beginning with % Number of Nodes 
       # print "$_\n";
    }
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T03:18:44.820

perl 中有一个自动操作符来做与 perreal 的答案相同的事情，即[触发器操作符](http://www.perl.com/pub/2004/06/18/variables.html)：

```
foreach (@array) { 
    if (/1.\s+Virtualization/../2.\s+Virtualization/) {
       push (@node_level1, $_);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T00:04:57.487

使用状态持有者：

```
my $state = 0;

foreach (@array) { 
    if ($_ =~ /1.\s+Virtualization/) {
         $state = 1;
    } elsif (($state == 1) and ($_ =~ /2.\s+Virtualization/)) {
       $state = 0;
    } elsif ($state == 1) {
       push (@node_level1, $_);         #stores in the node_level1
    }
} 
```

# javascript - 为什么我的 object.children 未定义？

> ID：13793051
> 
> 赞同：0
> 
> 时间：2012-12-09T23:36:41.190
> 
> 标签：javascript, ruby, ruby-on-rails-3, forms, railscasts

我在 Ruby on Rails 上运行 javascript 以在用户单击链接时将表单动态插入页面。

它不工作，但一个特殊的错误让我的山羊：我的表单在调试控制台中返回 form.children UNDEFINED。

这是表格（在 Rails 中）：

```
<div class="field">
<%= f.label :name, 'Tag:' %>
<%= f.text_field :name %>   
</div> 
```

这是application.js中的javascript；

```
function add_fields(link, association, form) {
console.log(form);
console.log(form.children);
link.insertBefore(form, link.previousSibling.previousSibling);
} 
```

我已经测试了该应用程序是否通过输出文本等实际调用了javascript并且它可以工作。问题显然出在我的表格上。

最后，控制台输出：

```
<div class="field">
<label for="post_tags_attributes_4_name">Tag:</label>
<input id="post_tags_attributes_4_name" name="post[tags_attributes][4][name]" size="30" type="text" />  
</div> application.js:21
undefined application.js:22
Uncaught Error: NOT_FOUND_ERR: DOM Exception 8 
```

顺便说一句，我正在尝试在动态插入的嵌套表单上实现 railscast #197，这是一场灾难！

- 编辑 - -

下面是我如何调用构建字段元素的 add_fields 函数：

红宝石功能：

```
module TagsHelper
    def link_to_add_fields(name, post_form, association)
        new_object = post_form.object.class.reflect_on_association(association).klass.new
        tag_field = post_form.fields_for :tags, new_object do|tag_form|
            render("tag_field", :f=>tag_form)
        end
        #debugger
        link_to_function(name, "add_fields(this, \"#{association}\", \"#{escape_javascript(tag_field)}\")")
    end
end 
```

这是 tag_field html：

```
<div class="field">
    <%= f.label :name, 'Tag:' %>
    <%= f.text_field :name %>   
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T23:52:00.257

显然这行不通，因为一个元素不能有一个也是兄弟的孩子。

```
link.insertBefore(form, link.previousSibling.previousSibling); 
```

您的代码想要作为 ' 兄弟姐妹之一的`form`孩子`link` *和*`link`之前，这是不可能的。

请记住，[`.insertBefore`](https://developer.mozilla.org/en-US/docs/DOM/Node.insertBefore)必须从它被插入的*父级调用。*所以要在`form`之前插入`link`，`.insertBefore`必须从 的父级调用`link`。

* * *

所以也许你打算`link.parentNode`改用。

```
link.parentNode.insertBefore(form, link.previousSibling.previousSibling); 
```

这将插入`form`到`link`.

# ruby-on-rails - 在 Rails Scaffold 中调用创建的对象

> ID：13793056
> 
> 赞同：0
> 
> 时间：2012-12-09T23:36:59.037
> 
> 标签：ruby-on-rails, ruby, undefined, scaffold, rails-generate

我是 Rails 的新手并创建了一个足球结果应用程序，我做了一个`rails generate Scaffold Team name:string form:string`然后我向表中添加了一些球队，我尝试的下一步是创建一个存储球队的 Fixtures 表，所以`rails generate Scaffold Fixture week:string homeTeam:team awayTeam:team homeScore:integer awayScore:integer`当我尝试更新数据库时我就这样做了`rake db:migrate`我得到一个错误 undefined method:team 我知道 rails 不喜欢我将他们指定为 team 类型的方式。

我怎样才能让它发挥作用，就像在创建夹具时我希望能够从已经存储在团队表中的团队列表中进行选择一样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T23:56:43.593

顺便说一句，ruby/rails 中的约定是使用下划线而不是 camelCase 来表示变量和方法。

关于你的实际问题！您需要自己在生成的模型`Team`和`Fixture`模型中设置关系。脚手架可以通过获得正确的外键来帮助您建立关系。

对于 Fixture 脚手架，像这样生成它：

```
rails g scaffold fixture week:string home_team_id:integer away_team_id:integer home_score:integer away_score:integer 
```

请注意，这`g`是一个快捷方式，`generator`并且生成器不需要大写任何内容。

现在，在您的`Team`模型中，您需要定义与 the 的关系，`Fixture`反之亦然（我不是运动专家，但命名它是否`Game`更有意义？）：

```
class Team < ActiveRecord::Base
    has_many :home_games, :class_name => Fixture, :foreign_key => :home_team_id
    has_many :away_games, :class_name => Fixture, :foreign_key => :away_team_id
end

class Fixture < ActiveRecord::Base
    belongs_to :home_team, :class_name => Team
    belongs_to :away_team, :class_name => Team
end 
```

# java - Java 2D数组for循环不读取最后一个值

> ID：13793057
> 
> 赞同：1
> 
> 时间：2012-12-09T23:37:02.830
> 
> 标签：java, multidimensional-array

我正在做一个学校作业，我遇到了一个二维数组的问题。基本上，我的程序从用户那里获取一个整数，并确定其中一个数组值是否低于该整数。我设置了一段时间和 for 循环来解决问题，但我似乎无法让我的循环使用最后一行数据。我已经尝试混合几个小时了。

我敢肯定，我对我所缺少的东西感到非常沮丧，但我现在可以用一只手了。这是我的代码的相关数据

```
 //array of store inventory
    int invArray[][] = {{102, 54, 20, 78}, 
                        {45, 25, 35, 75},
                        {12, 35, 45, 65},
                        {54, 25, 34, 45},
                        {15, 35, 50, 25}};
    int menuChoice = 0;                     //allows user to select a menu option
    int storeNum=0;                         //store number
    String itemName="null";                 //name for an item
    int itemAmount=0;                       //items below this amount are pulled up in choice 4
    int arrayRow=0;                         //row value for invArray based on itemName
    int arrayCol=0;                         //column value for invArray based on storeNum

       //menu 4
        if (menuChoice == 4){
            System.out.print("Find all items below the number: ");

            //catches mistakes
            try{
            itemAmount = input.nextInt();
            }
            catch(Exception e){
                System.out.print("Invalid value entered. Try again: ");
                itemAmount = input.nextInt();
            }
            System.out.println("Items below "+itemAmount+": ");

            //loop that checks item values at all stores
            arrayRow=0; 
            arrayCol=0;                         //counters for loop
            while (arrayCol < invArray[arrayRow].length){

                for (arrayRow = 0; arrayRow < invArray[arrayCol].length; arrayRow++){

                    if (invArray[arrayRow][arrayCol] < itemAmount){

                        if (arrayRow == 0)
                            itemName = "Tennis Shoes";
                        if (arrayRow == 1)
                            itemName = "Sweaters";
                        if (arrayRow == 2)
                            itemName = "Jeans";
                        if (arrayRow == 3)
                            itemName = "Shorts";
                        if (arrayRow == 4)
                            itemName = "Jackets";

                        //outputs stores with values lower than the one given
                        System.out.println("Store 10"+(arrayCol+1)+" "+itemName+": "
                        +invArray[arrayRow][arrayCol]);

                        for (int i = 0;invArray[4][i] < invArray[arrayRow].length; i++)
                            System.out.println("Store 10"+(i+1)+" "+" jackets : "+invArray[i][4]);
                    }

            }       
                arrayCol++;
                System.out.println();
        }//end item check loop
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T23:54:16.830

你有错误的第二个循环。它应该是

```
for (arrayRow = 0; arrayRow < invArray.length; arrayRow++){ 
```

因为`arrayRow`是第一个索引。在您的代码中，您得到 4 而不是 5 ，这会导致错误。

此外，您最好同时使用`for`这两个循环。

而且你最好在行循环内有列循环，因为前者是依赖的，或者你应该交换索引；

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T00:03:11.817

尝试这个：

```
while (arrayRow < invArray.length) {
    for (arrayCol = 0; arrayCol < invArray[arrayRow].length; arrayCol++) {
        //...
    }
    arrayRow++;
} 
```

你的数组有维度`[4][5]`；您正在切换两者并尝试访问一个元素，就好像数组有维度一样`[5][4]`。您也只能访问 16 个元素，因为所有这些工作`invArray[a].length`始终是 4 个。`a`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T23:44:30.103

你确定你需要第二行吗

```
itemName = "Jackets";
arrayCol++; 
```

bur 你的代码让我有点困惑，所以我不确定这是否能解决。

# ruby - `respond_to?` 与 `respond_to_missing?`

> ID：13793060
> 
> 赞同：53
> 
> 时间：2012-12-09T23:37:53.233
> 
> 标签：ruby, metaprogramming

与定义`respond_to_missing?`相反，定义的意义是`respond_to?`什么？如果你`respond_to?`为某个类重新定义会出现什么问题？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-12-10T00:52:03.730

如果没有[`respond_to_missing?`](http://ruby-doc.org/core/Object.html#method-i-respond_to_missing-3F)定义，尝试通过方法获取方法[`method`](http://ruby-doc.org/core/Object.html#method-i-method)将失败：

```
class Foo
  def method_missing name, *args
    p args
  end

  def respond_to? name, include_private = false
    true
  end
end

f = Foo.new
f.bar  #=> []
f.respond_to? :bar  #=> true
f.method :bar  # NameError: undefined method `bar' for class `Foo'

class Foo
  def respond_to? *args; super; end  # “Reverting” previous redefinition

  def respond_to_missing? *args
    true
  end
end

f.method :bar  #=> #<Method: Foo#bar> 
```

[Marc-André](https://stackoverflow.com/users/8279/marc-andre-lafortune)（Ruby 核心提交者）[在`respond_to_missing?`](http://blog.marc-andre.ca/2010/11/methodmissing-politely.html).

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-11-06T14:28:49.813

**创建respond_to_missing**是一个好习惯吗？如果您要覆盖**method_missing**。这样，该类将告诉您您正在调用的方法存在，即使它没有明确声明。

回应？可能不应该被覆盖:)

# objective-c - 向 UITextView 添加标题和文本

> ID：13793061
> 
> 赞同：0
> 
> 时间：2012-12-09T23:37:55.123
> 
> 标签：objective-c, ios6, fonts, uitextview

我认为这很简单，但事实证明并非如此。

我有一些文本需要在我的应用程序中显示。呈现它的最佳方式是什么？因为我想要文本但也想要一个标题 - 标题会更大。我知道`UITextView`只允许一种字体/大小。

我想要的例子

**示例页眉**- 粗体 22

文本 - 大小 16

我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T10:10:41.897

如果您的文本不可编辑，我认为您可以考虑使用 UILabel 而不是 UITextView，并且您可以使用更复杂的视图层次结构，而不仅仅是 UITextView 或 UILabel。如果你坚持使用 UITextView，我想你可以参考 NSAttributedString。

# sql - 对重复行的值求和

> ID：13793063
> 
> 赞同：2
> 
> 时间：2012-12-09T23:38:28.913
> 
> 标签：sql, group-by, row, field

这是我的sql数据：

```
code name total
---------------
3   Sprite 2400
17  Coke   1500
6   Dew    1000
17  Coke   3000
6   Dew    2000 
```

但是代码和名称有重复的值，我想从每个重复的字段中求和。像这样的东西：

```
code name total
---------------
3   Sprite 2400
17  Coke   4500
6   Dew    3000 
```

我怎么能在sql中做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-09T23:40:41.577

```
SELECT code, name, sum(total) AS total FROM table GROUP BY code, name 
```

# magento - Magento 新手，任何开源插件主题？

> ID：13793068
> 
> 赞同：-1
> 
> 时间：2012-12-09T23:38:59.727
> 
> 标签：magento

刚刚通过检查您在后端指定的位置观看了一些关于主题处理方式的视频，但它们总是依赖于默认的 css/js。我想知道是否有任何好的社区可以为 magento 构建简单的主题，只需将文件夹放入 magento_root/skin/ 文件夹即可。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T00:55:11.800

magento 有很多免费和付费的主题，看看@

[http://www.templatemonster.com/magento-themes.php](http://www.templatemonster.com/magento-themes.php)

[http://web-experiment.info/](http://web-experiment.info/)

[http://www.mage-world.com/magento-themes.html](http://www.mage-world.com/magento-themes.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T05:22:32.713

您可以查看免费主题部分 -

[http://www.magikcommerce.com/free](http://www.magikcommerce.com/free)

# gnuplot - 具有重复数据的 gnuplot 历史图

> ID：13793071
> 
> 赞同：1
> 
> 时间：2012-12-09T23:39:13.363
> 
> 标签：gnuplot

我有这个数据：

```
0 0.105773
1 -0.062457
2 0.005387
3 -0.000000
4 -0.000000
5 0.000000
6 0.000000
7 0.000000
0 0.116266
1 -0.129877
2 0.004714
3 -0.000000
4 -0.000000
5 0.000000
6 0.000000
7 0.000000 
```

第一列中的每个不同值都应该是图中的一条线，因此该图将有 8 条线。我需要一个历史图表，每次重复这 8 个数字时，它将表示 X 轴上的增量，第二列上的值表示 Y 轴上的一个点。

有没有办法用 gnuplot 做到这一点？我不知道如何让它以日志的方式解释数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T20:18:11.937

您需要将数据转换成 gnuplot 喜欢的格式。我喜欢使用 python，这是一个可以解决问题的脚本：

```
import sys
from collections import defaultdict

fname = sys.argv[1]
with open(fname) as fin:
    data = defaultdict(list)  
    for line in fin:
        x,y = line.split()
        data[int(x)].append(float(y))

for k,v in sorted(data.items()):
    for i,elem in enumerate(v):
        print i,elem
    print
    print 
```

您可以像这样绘制该数据文件：

```
plot '<python pythonscript.py data.dat' u 1:2:(column(-2)) w lines lc variable lw 3 
```

或者如果需要稍微调整图例中的数据：

```
plot for [i=0:10] '<python pythonscript.py test.dat' index i u 1:2 w lines lw 3 title sprintf('Geophone %d',i) 
```

哪里`10`只是一个足够大的数字:-)。

# ios - 我应该在 MonoTouch 应用程序的哪里进行维护

> ID：13793076
> 
> 赞同：2
> 
> 时间：2012-12-09T23:40:15.740
> 
> 标签：ios, xamarin.ios

我有一个用 MonoTouch 编写的 iOS 应用程序 - 每个新版本都会添加新功能，并且我需要向数据库添加其他字段或执行数据维护任务（有时这些可能需要一分钟左右的时间才能运行）。在许多情况下，数据/模式需要更新，然后我们才能允许用户进入应用程序 - 在 Obj-C 或 Monotouch 中是否有标准化的方式或位置来在启动时执行这些维护任务？理想情况下，我想向用户显示加载显示，让他们知道这是一次性的。

到目前为止我的想法：

*   将它们放在 AppDelegate 内的 FinishedLaunching 中，但这似乎是错误的位置。

*   将主视图更改为仅升级其数据库然后将它们推送到下一个视图的视图，但这似乎有点矫枉过正。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T10:47:40.637

Finished Launching 对于这么长时间的操作来说绝对是错误的地方（因为如果需要很长时间，iOS 就会杀死应用程序）。

在我看来，您的第二个选择是正确的方法。这样你就可以告诉用户他们在等待什么。您还可以使用此视图告诉用户应用程序中的新功能

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T12:44:12.690

> 将主视图更改为仅升级其数据库然后将它们推送到下一个视图的视图，但这似乎有点矫枉过正。

这就是我在一些应用程序中的做法（[这里是一个示例）。](https://itunes.apple.com/au/app/iqpurchasing/id575799458?mt=8)

我所做的是在 AppDelegate 中检查`FinishedLoading`此版本是否需要更新架构，如果需要，我制作`window.RootViewController`一个使用 DialogViewController`Default.png`作为背景的 DialogViewController，然后从那里进行更新。

这会给人一种错觉，即进度条显示在初始屏幕的顶部。

对于加载屏幕，您可以使用[ATM Hud](https://github.com/mono/monotouch-bindings/tree/master/ATMHud)向最终用户显示进度条。

![在此处输入图像描述](../Images/c4fb4c5eb4ded6e17cb74d4dbe8932bc.png)

# java - 在 android 的列表视图中显示详细信息的优雅方式

> ID：13793077
> 
> 赞同：0
> 
> 时间：2012-12-09T23:40:20.413
> 
> 标签：java, android, listview

我正在尝试实现以下列表视图：

*   列表元素1
*   列表元素2
*   ListElement3（当前选择）
    *   列表元素 3的一些细节
        （可能包括
        另一个视图）
*   列表元素 4

我希望我的问题很容易理解：怎么可能，添加一些特殊信息（这些信息有时很长）。

我可以通过使用 ExpendableListViews 来实现这一点，每个列表元素只有一个子元素......但我发现这种可能性并不好。

有人能帮我吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T23:44:58.603

最简单的方法是使用 ExpandableListView 或使用 ListFragment 或 ListActivity 扩展片段或活动。

然后使用自定义 ListAdapter 或 CursorAdapter 或任何您从中获取数据的位置，这样您就可以覆盖默认的“列表视图”并使用您想要的元素布局创建自己的自定义“列表视图”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T23:45:15.923

为此，您需要一个[ExpandableListView](http://developer.android.com/reference/android/widget/ExpandableListView.html)

从文档中：

> 在垂直滚动的两级列表中显示项目的视图。这与 ListView 的不同之处在于允许两个级别：可以单独展开以显示其子级的组。这些项目来自与此视图关联的 ExpandableListAdapter。

# android - 复杂的 sqlite 查询给出

> ID：13793083
> 
> 赞同：1
> 
> 时间：2012-12-09T23:40:49.180
> 
> 标签：android, android-sqlite, android-contentresolver

我正在尝试执行具有多种条件的查询，但我遇到了异常。

```
bind or column index out of range 
```

这是来自 ContentProvider 的查询。

```
@Override
public Cursor query(Uri uri, String[] projection, String selection, String[] selectionArgs, String sortOrder) {
    SQLiteQueryBuilder queryBuilder = new SQLiteQueryBuilder();
    int uriType = sURIMatcher.match(uri);
    switch (uriType) {
    case RESPONSEVIEW2_SELECTION_10:
        queryBuilder.setTables(RESPONSES_VIEW);
        String activeUserKey = getActiveUserId();;
        String outerSelection = 
                "(((" + PeerCreatedDataColumns.SHARED + "=" + "" + trueId + "" + ") OR " 
                + "(" + PeerCreatedDataColumns.AUTHORHASH + "=" + "'" + activeUserKey + "'" + ")) AND (" 
                + "(" + ResponsesColumns.PRIMARYMATCH + "= '*'" + ") OR " 
                                    // '*' is defined by the program, hopefully not in conflict with anything built-in
                + "(" + ResponsesColumns.PRIMARYMATCH + " like '?') OR " 
                + "(" + ResponsesColumns.PRIMARYMATCH + " like '" + selectionArgs[0] + "%') OR " 
                + "(" + ResponsesColumns.PRIMARYMATCH + " like '%" + selectionArgs[0] + "') OR " 
                + "(" + ResponsesColumns.PRIMARYMATCH + " like '%" + selectionArgs[0] + "%'" + ")))";
        Log.d(DEBUG_TAG, "query " + outerSelection);
        Cursor cursor10 = queryBuilder.query(mDB.getReadableDatabase(), projection, outerSelection, selectionArgs,
                null, null, sortOrder);
        cursor10.setNotificationUri(getContext().getContentResolver(), uri);
        Log.e(DEBUG_TAG, "responses_view2 should have better search function");
        return cursor10;
    case ROW_SELECTION_11:
        queryBuilder.setTables(RESPONSES_VIEW);
        Log.e(DEBUG_TAG, "responses_view2 should have better search function");
        queryBuilder.appendWhere(PeerDatabase._ID + "=" + uri.getLastPathSegment());
        Cursor cursor11 = queryBuilder.query(mDB.getReadableDatabase(), projection, selection, selectionArgs, null,
                null, sortOrder);
        cursor11.setNotificationUri(getContext().getContentResolver(), uri);
        return cursor11;
    ...
    }
} 
```

这是光标加载器，它似乎是错误的根源。

```
public Loader<Cursor> onCreateLoader(int id, Bundle args) {
    if (search == null) {
        return null;
    } else {
        String[] selectArgs = { search };
        return new CursorLoader(getActivity(), table, createProjection, "?", selectArgs, null);
    }
} 
```

这是整个错误：

```
12-09 18:25:54.509: E/AndroidRuntime(12461): FATAL EXCEPTION: ModernAsyncTask #2
12-09 18:25:54.509: E/AndroidRuntime(12461): java.lang.RuntimeException: An error occured while executing doInBackground()
12-09 18:25:54.509: E/AndroidRuntime(12461):    at android.support.v4.content.ModernAsyncTask$3.done(ModernAsyncTask.java:137)
12-09 18:25:54.509: E/AndroidRuntime(12461):    at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:274)
12-09 18:25:54.509: E/AndroidRuntime(12461):    at java.util.concurrent.FutureTask.setException(FutureTask.java:125)
12-09 18:25:54.509: E/AndroidRuntime(12461):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:308)
12-09 18:25:54.509: E/AndroidRuntime(12461):    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
12-09 18:25:54.509: E/AndroidRuntime(12461):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
12-09 18:25:54.509: E/AndroidRuntime(12461):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
12-09 18:25:54.509: E/AndroidRuntime(12461):    at java.lang.Thread.run(Thread.java:1019)
12-09 18:25:54.509: E/AndroidRuntime(12461): Caused by: android.database.sqlite.SQLiteException: bind or column index out of range: handle 0x28bd08
12-09 18:25:54.509: E/AndroidRuntime(12461):    at android.database.sqlite.SQLiteProgram.native_bind_string(Native Method)
12-09 18:25:54.509: E/AndroidRuntime(12461):    at android.database.sqlite.SQLiteProgram.bindString(SQLiteProgram.java:244)
12-09 18:25:54.509: E/AndroidRuntime(12461):    at android.database.sqlite.SQLiteQuery.bindString(SQLiteQuery.java:185)
12-09 18:25:54.509: E/AndroidRuntime(12461):    at android.database.sqlite.SQLiteDirectCursorDriver.query(SQLiteDirectCursorDriver.java:48)
12-09 18:25:54.509: E/AndroidRuntime(12461):    at android.database.sqlite.SQLiteDatabase.rawQueryWithFactory(SQLiteDatabase.java:1356)
12-09 18:25:54.509: E/AndroidRuntime(12461):    at android.database.sqlite.SQLiteQueryBuilder.query(SQLiteQueryBuilder.java:330)
12-09 18:25:54.509: E/AndroidRuntime(12461):    at android.database.sqlite.SQLiteQueryBuilder.query(SQLiteQueryBuilder.java:280)
12-09 18:25:54.509: E/AndroidRuntime(12461):    at org.anuvar.plana.m.provider.PeerDataProvider.query(PeerDataProvider.java:285)
12-09 18:25:54.509: E/AndroidRuntime(12461):    at android.content.ContentProvider$Transport.query(ContentProvider.java:187)
12-09 18:25:54.509: E/AndroidRuntime(12461):    at android.content.ContentResolver.query(ContentResolver.java:262)
12-09 18:25:54.509: E/AndroidRuntime(12461):    at android.support.v4.content.CursorLoader.loadInBackground(CursorLoader.java:49)
12-09 18:25:54.509: E/AndroidRuntime(12461):    at android.support.v4.content.CursorLoader.loadInBackground(CursorLoader.java:35)
12-09 18:25:54.509: E/AndroidRuntime(12461):    at android.support.v4.content.AsyncTaskLoader.onLoadInBackground(AsyncTaskLoader.java:240)
12-09 18:25:54.509: E/AndroidRuntime(12461):    at android.support.v4.content.AsyncTaskLoader$LoadTask.doInBackground(AsyncTaskLoader.java:51)
12-09 18:25:54.509: E/AndroidRuntime(12461):    at android.support.v4.content.AsyncTaskLoader$LoadTask.doInBackground(AsyncTaskLoader.java:40)
12-09 18:25:54.509: E/AndroidRuntime(12461):    at android.support.v4.content.ModernAsyncTask$2.call(ModernAsyncTask.java:123)
12-09 18:25:54.509: E/AndroidRuntime(12461):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306)
12-09 18:25:54.509: E/AndroidRuntime(12461):    ... 4 more 
```

我试图找出异常，但如果有更好的方法来查询这些数据，请告诉我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T23:43:27.290

`?`参数中的数量`selection`必须与参数中的字符串数量相匹配`selectionArgs`。LogCat 表明这些计数不匹配，但我们很难说...

我发现了问题，不要将`?`引号括起来，否则您实际上是在寻找问号。这是不正确的：

```
" like '?') OR " 
```

而是使用：

```
" like ?) OR " 
```

* * *

如果`search`是用户输入，你应该保护自己免受 SQL 注入攻击：

```
+ "(" + ResponsesColumns.PRIMARYMATCH + " like ?) OR " 
+ "(" + ResponsesColumns.PRIMARYMATCH + " like ?) OR " 
+ "(" + ResponsesColumns.PRIMARYMATCH + " like ?) OR " 
+ "(" + ResponsesColumns.PRIMARYMATCH + " like ?)))"; 
```

并像这样创建一个新`selectionArgs`参数：

```
String search = selectionArgs[0];
String[] matchArgs = { search, search + "%", "%" + search, "%" + search + "%" };
Cursor cursor10 = queryBuilder.query(mDB.getReadableDatabase(), projection, 
            outerSelection, matchArgs, null, null, sortOrder); 
```

# iphone - 我的标签栏只有一个标签不会旋转 - 其余的都很好

> ID：13793085
> 
> 赞同：0
> 
> 时间：2012-12-09T23:41:11.990
> 
> 标签：iphone, objective-c, rotation, uitabbarcontroller

我有标签栏应用程序，我想旋转 Portrait & PortraitUpsideDown。我所有其他选项卡都可以并已旋转。唯一的区别是view也设计了xib。

这是我为支持方向而实现的代码。正如我之前提到的 - 我所有其他选项卡都在工作和旋转。

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation{
    return (interfaceOrientation == UIInterfaceOrientationPortrait || interfaceOrientation == UIInterfaceOrientationPortraitUpsideDown);
}

- (BOOL)shouldAutorotate {
    return [self shouldAutorotateToInterfaceOrientation:self.interfaceOrientation];
}

    - (void)viewDidLoad{
        self.view.autoresizesSubviews = YES;
        self.view.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight;

        [super viewDidLoad];

        // Do any additional setup after loading the view from its nib.
} 
```

我的应用支持 4.3+ IOS。请帮我修复它 - 我必须尽快将它发送给苹果......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T01:54:32.333

我修复了它，问题是我用自定义`init`方法分配了我的视图控制器，我忘了加载`self = [super init...]` 内部。

好。希望这对将来的人有所帮助！

# ios - 从子视图调用超级视图函数

> ID：13793092
> 
> 赞同：1
> 
> 时间：2012-12-09T23:41:36.830
> 
> 标签：ios, uiview, uibutton, uitextfield, warnings

我有一个名为**Product**的 UIView ，其中包含一个名为**Postcode**的子 UIView 。

在邮政编码中，`UIView`我有一个简单的表格（一个`UITextField`和一个`UIButton`）。

单击时，将在邮政编码视图中运行`UIButton`一个方法（称为）...按预期工作。`-storeData`

现在在里面`storeData`我想调用superview Product中的一个方法。

这是我尝试做的，但我收到警告：

```
if ([[self superview] class] == [ProductView class]) {
        ProductView *p = [self superview]; 
        [p handlePostChange]; 
    } 
```

// 从此行获取此警告`ProductView *p = [self superview];`

> PostView.m:124:28：使用“UIView *”类型的表达式初始化“ProductView *__strong”的不兼容指针类型

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T23:47:42.867

尝试只投射结果：

```
ProductView *p = (ProductView *)[self superview]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-10T12:09:52.967

根据我的评论，您*最好*使用委托模式。

我知道它比简单地检查父类的类类型要多得多的代码，但它使你获得了更多的能力，因为它解耦了`Product`和`Postcode`类。因此，实现该`handlePostChangeFor:`方法的类不再必须是`Product`- 它可以是任何类，只要它实现了`SuperProtocol`. 这反过来意味着你永远不必检查里面的类类型`Postocde`，因为你不再关心它——你关心的是其他类可以做你想做的工作。此外，如果`superHandlerDelegate`a 实例中的属性`Postcode`从未设置并且仍然存在`nil`，那么您仍然可以，因为 Objective-c 允许将消息发送到`nil`.

请注意，下面的代码是用非常广泛的笔触完成的，我遗漏了很多无关的东西。您的代码与此示例之间的一个主要区别是您现在必须在`handlePostChangeFor:`方法中携带一个参数来指示您正在处理哪个邮政编码的更改。这是解耦这两个类的直接结果。

```
// Declare a protocol saying "Here is some functionality"
@protocol SuperProtocol
-(void) handlePostChangeFor:(Postcode*)postcode;
@end

// Product class says it will implement the functionality of the SuperProtocol
@interface Product : UIView <SuperProtocol>
@end

@implmementation Product
-(id)init
{
   if (!(self=[super init])) return self;
   ...
   // Create/locate the Postcode that is a child of this Product
   Postcode* postcode = ... // For example :- [[Postcode alloc] init];

   // Tell an instance of the Postcode class who will be supplying the SuperProtocol functionality
   postcode.superHandlerDelegate = self;
   ...
   return self;
}

// Implement the protocol's functionality
-(void) handlePostChangeFor:(Postcode*)postcode
{
  // Do Stuff with the data from the postcode instance
}
@end

@interface Postcode : UIView
// Identify who will implement the SuperProtocol functionality for this instance
@property (strong, nonatomic) id <SuperProtocol> superHandlerDelegate;
-(IBAction)storeData:(id)sender;
@end

@implementation Postcode
@synthesize superHandlerDelegate;
-(id)init
{
   if (!(self=[super init])) return self;
   ...
   // This is not required as NSObject's `alloc` sets everything to all zeroes
   // Note that you should not use "self.xxxxx" in an init method
   superHandlerDelegate = nil;
   ...
   return self;
}

-(IBAction)storeData:(id)sender
{
    ...
    // Tell the delegate to do the work
    [self.superHandlerDelegate handlePostChangeFor:self];
    ...
}

@end 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-10T00:02:21.247

调用`[self superview]`返回一个`UIView`指针。您正在尝试执行以下操作：

```
UIView *view;
ProductView *p = view; 
```

编译器无法知道在运行时，`view`是否真的是 type `ProductView`。这就是编译器抱怨的原因。

如前所述，解决方案是使用演员表：

```
UIView *view;
ProductView *p = (ProductView *)view; 
```

演员告诉编译器“嘿，别担心，我知道我在做什么。它真的是一个`ProductView`”。当然，如果你错了，应用程序很可能会在运行时崩溃。

以下是完全没问题的：

```
ProductView *p;
UIView *view = p; 
```

这是安全的，不会发出警告，也不需要强制转换。这是有效的，因为已知它`ProductView`是 的子类`UIView`。

# c++ - 为什么我不能使用隐式初始化？

> ID：13793095
> 
> 赞同：0
> 
> 时间：2012-12-09T23:42:10.353
> 
> 标签：c++, initialization, implicit

这就是我所拥有的：

```
Complex.h
class Complex
{
public:
    Complex(double initialRealPart, double initialImaginaryPart = 0.0)
    : realPart(initialRealPart), imaginaryPart(initialImaginaryPart)
    {
    }
    Complex() { }

private:
    double realPart;
    double imaginaryPart;
};

int main()
{
    Complex c = 4.5;
} 
```

隐式初始化不应该在这种情况下工作吗？

编辑：糟糕，我的代码中实际上有 realPart 和 imaginaryPart 作为双打。但是，它仍然无法正常工作。

当我尝试隐式初始化时，它说没有合适的从 double 到 Complex 的转换。

EDIT2：我还有一个 Complex() 构造函数，它在我的 Complex.h 中没有接受任何参数

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T00:02:29.423

可能你的错误是你犯的`realPart`并且`imaginaryPart`是类型`int`

否则此代码没有错误。

# for-loop - OpenMP 到 CUDA：减少

> ID：13793097
> 
> 赞同：0
> 
> 时间：2012-12-09T23:42:17.173
> 
> 标签：for-loop, cuda, openmp, reduction

我试图弄清楚如何`for reduction()`在 CUDA 中使用 OpenMP 的等价物。我在网上做了一些研究，但我尝试过的都没有奏效。编码：

```
 #pragma omp parallel for reduction(+:sum)
    for (i = 0; i < N; i++)
    {
        float f = ...  //store return from function to f
        out[i] = f;    //store f to out[i]
        sum += f;      //add f to sum and store in sum
    } 
```

我知道`for reduction()`OpenMP 中的作用......它使 for 循环的最后一行成为可能。但是我怎样才能用 CUDA 来表达同样的东西呢？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T23:56:23.823

使用[Thrust](http://thrust.github.com/)，CUDA 附带的受 STL 启发的库。有关如何执行归约的示例，请参阅[快速入门指南。](https://github.com/thrust/thrust/wiki/Quick-Start-Guide)

# mysql - MySQL 可以加入 XML 字段（或 JSON）吗？

> ID：13793098
> 
> 赞同：1
> 
> 时间：2012-12-09T23:42:19.623
> 
> 标签：mysql, database, algorithm

请考虑以下示例。假设我们正在为在线书店构建数据库。我们有一个 Book 表包含 n 条记录，一个 Type 表包含 m 条记录。n 是一个非常大的数字。m 很小。

```
--------
Book
---------
BookId
BookName
BookType
---------

-------
Type
--------
TypeId
TypeName
--------- 
```

加入这两个表的传统方法是创建一个名为 BookType 的第三个表

```
---------- 
BookType
---------- 
BookTypeId 
BookId 
TypeId
---------- 
```

如果我们想检索具有类型的书籍记录，我们可以这样做：

```
select B.*, T.Name from Book B
inner join BookType BT on B.BookId = BT.BookId
inner join Type T on BT.TypeId = T.TypeId 
```

由于 Book 表很大，所以 BookType 表更大。由于 DB 索引使用的是类 B-Tree 算法，因此时间成本将为：2log(n) + Cm。正确的？（以 Book 表和 BookType 表为索引）

但是，如果我们可以将 TypeId 存储为 JSON 数组并使用它进行连接，那么我们可以一次获取数据。时间将是 log(n) + Cm，这至少是两倍快。语法可能类似于：

```
select B.*, T.Name from Book B
inner join Type T on ParseJsonAsIntArray(BookType) = T.TypeId 
```

我找不到像 ParseJsonAsIntArray() 这样的 MySQL 函数。他们为什么不这样做？如果我遗漏了明显的东西，请道歉。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T23:50:29.483

不，在 MySQL 中没有用于解析 JSON 的内置函数。最接近的是[`ExtractValue()`](http://dev.mysql.com/doc/refman/5.5/en/xml-functions.html#function_extractvalue)XML 数据。此函数使用 Xpath 表达式来挑选 XML 文档的元素。但无论如何，MySQL 不支持对 XML 或 JSON 等半结构化 blob 中的元素进行索引。这注定是一个低效的查询。

但首先要做的事情。您正在尝试使用*非规范化*来解决实际上是关系数据库优势的问题。BookType 表会很长，但行单独非常小。所以它不会像你想象的那么糟糕。

支持 by或 by 的`BookType`索引搜索是一个巨大的优势。当你去规范化时，你基本上使这些查找中的一个高效，但你牺牲了另一个查找。`Book``Type`

另请参阅我对[在数据库列中存储逗号分隔列表真的那么糟糕吗？](https://stackoverflow.com/questions/3653462/is-storing-a-comma-separated-list-in-a-database-column-really-that-bad/3653574#3653574)

# jailbreak - THEOS/iPhone 越狱编程 - 我应该如何从 ViewController 中隐藏视图？

> ID：13793099
> 
> 赞同：2
> 
> 时间：2012-12-09T23:42:19.343
> 
> 标签：jailbreak, cydia, theos

我正在尝试对 Cydia 的调整进行编程，并且应该在加载和隐藏视图时挂钩视图控制器类 - 我尝试了以下操作：

调整.xm：

```
%hook ScoresViewController

- (void)viewWillAppear:(BOOL)fp8 {
    %orig;

    self.view.hidden = YES;
}

%end 
```

但不幸的是，当尝试使用 THEOS “制作” Tweak 时，我得到以下信息：

```
Making all for tweak scoresenhancer...
Preprocessing Tweak.xm...
Compiling Tweak.xm...
Tweak.xm: In function 'void       _logos_method$_ungrouped$ScoresViewController$viewWillAppear$(ScoresViewController*, objc_selector*, BOOL)':
Tweak.xm:49: error: request for member 'view' in 'self', which is of non-class type 'ScoresViewController*'
Tweak.xm: In function 'void _logos_method$_ungrouped$ScoresViewController$viewWillAppear$(ScoresViewController*, objc_selector*, BOOL)':
Tweak.xm:49: error: request for member 'view' in 'self', which is of non-class type 'ScoresViewController*'
lipo: can't figure out the architecture type of: /var/tmp//ccFsVzMR.out
make[2]: *** [obj/Tweak.xm.o] Error 1
make[1]: *** [internal-library-all_] Error 2
make: *** [scoresenhancer.all.tweak.variables] Error 2 
```

我会感谢你的帮助。我还想了解如何访问自定义类的 ivars（即：ScoresViewController）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T20:12:39.063

没有任何东西告诉编译器 ScoresViewController 是 UIViewController 的后代。你可以在这里做几件事。

```
[(UIViewController *)self view].hidden = YES; 
```

或者

```
@interface ScoresViewController : UIViewController @end
...
self.view.hidden = YES; 
```

# c# - 我是否需要将动态创建的复选框彼此区分开来？

> ID：13793107
> 
> 赞同：0
> 
> 时间：2012-12-09T23:43:25.053
> 
> 标签：c#, dynamic, checkbox, event-handling, windows-store-apps

我有这段代码可以动态创建复选框并将它们连接到共享的 OnTapped 事件处理程序：

```
private void CreateNewGroup(int currentItem, string groupName)
{
    CheckBox ckbx = new CheckBox();
    ckbx.Content = groupName;
    ckbx.Tag = currentItem; // Don't know if this is needed
    ckbx.Tapped += new TappedEventHandler(this.Checkbox_OnTapped);
    stackPanelCheckBoxesParent.Children.Add(ckbx);
} 
```

...正如评论所示，我不知道将 val 分配给 Tag 属性是否是多余的。我添加它的唯一原因是因为这里：[动态（以编程方式）添加复选框和checkedchanged事件](https://stackoverflow.com/questions/626889/dynamically-programatically-adding-check-boxes-and-checkedchanged-events)，有几个人说一定要分配给动态创建的复选框的ID属性。然而，在 Windows 8 C# 应用程序中显然没有这样的属性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T06:06:01.943

Windows 应用商店应用中没有技术要求来根据控件的属性来区分控件。是否需要关联`currentItem`到复选框取决于事件处理程序的作用。如果您需要对其相关的东西做某事`currentItem`，您将需要一种从事件处理程序访问它的方法。将其设置为`Tag`控件使这很容易：

```
public delegate void TappedEventHandler(object sender, TappedRoutedEventArgs e)
{
    var item = (int)((CheckBox)sender).Tag;
    // do something with the value
} 
```

不过，我不喜欢以这种方式动态地创建控件。大多数情况下，使用数据绑定更容易实现相同的结果。在您的情况下，您需要以下 XAML：

```
<ItemsControl ItemsSource="{Binding Groups}">
    <ItemsControl.ItemTemplate>
        <DataTemplate>
            <CheckBox Content="{Binding Name}" IsChecked="{Binding IsChecked, Mode=TwoWay}" />
        </DataTemplate>
    </ItemsControl.ItemTemplate>
</ItemsControl> 
```

从`DataContext`您的页面开始，您在视图模型中需要以下内容：

```
public class ViewModel
{
    public List<Group> Groups { get; set; }
}

public class Group
{
    private bool _isChecked;

    public int Id { get; set; }
    public string Name { get; set; }

    public bool IsChecked
    {
        get { return _isChecked; }
        set
        {
            if (_isChecked != value)
            {
                _isChecked = value;
                // react to value change if necessary   
            }
        }
    }
} 
```

`CheckBox`state 现在将自动反映在相应的`Group`实例中。`IsChecked`如有必要，您可以在 setter 中调用其他代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T23:50:00.590

[Control.Tag](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.tag.aspx)的定义：

> Tag 属性的一个常见用途是存储与控件密切相关的数据。例如，如果您有一个显示客户信息的控件，您可以在该控件的 Tag 属性中存储一个包含客户订单历史记录的 DataSet，以便可以快速访问数据。

因此，除非您需要将一个对象与您的控件相关联，否则您可以省略它，您稍后会访问`currentItem`?

# objective-c - 使用 Storyboards 的多个 DetailViews 到 Master Detail 应用程序

> ID：13793114
> 
> 赞同：0
> 
> 时间：2012-12-09T23:44:26.617
> 
> 标签：objective-c, storyboard, uistoryboard, uistoryboardsegue

我正在尝试在情节提要模式下在我的主细节应用程序上添加第二个细节视图控制器。我不确定这样做的正确方法是什么。我需要将它连接到导航控制器，就像原来的细节视图控制器一样。我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T23:52:08.377

如果您打算在 a 的上下文中添加另一个级别的详细信息，`UINavigationViewController`您只需向第一个详细信息视图控制器添加一个 push segue，如下[图](http://f.cl.ly/items/1b1d0b3q1A1H1P3g221O/Screen%20Shot%202012-12-09%20at%205.49.28%20PM.png)所示。

![具有两个细节层次的故事板](../Images/7879723d9f354cc390ab0c8268f00915.png)

**编辑**

同样的事情，但对于 iPad 版本。（[全尺寸图片](http://f.cl.ly/items/2K0n0J2R1E0s341s2d3A/Screen%20Shot%202012-12-09%20at%206.06.43%20PM.png)）

![具有两个细节层次的故事板](../Images/4e22e670f71dd134787524617d8e542b.png)

# java - 存储来自不同用户的 Java HttpSession 并使之无效

> ID：13793119
> 
> 赞同：1
> 
> 时间：2012-12-09T23:45:03.140
> 
> 标签：java, session, jetty, invalidation, httpsession

好的。我想要做的是能够在我更新用户时使他们当前拥有的任何会话无效以强制刷新凭据。我不关心能够直接访问特定于会话的用户数据。理想情况下，我还可以通过类似的方式将用户限制在一个会话中。

我尝试做的是使用用户名作为键和 HttpSession 作为值创建一个 HashMap（我的实际设置涉及更多一点，但是在重复看似莫名其妙的失败之后，我将其归结为这个简单的测试）。但是，每当我试图告诉检索到的 HttpSession 无效时，它似乎正在使当前的 [admin] 会话无效。HttpSession 是否与当前请求密不可分？

还是有完全不同的方法来处理这个问题？

如果碰巧很重要，我正在使用 Jetty 6.1.26。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T08:14:42.067

没有直截了当的方法。我能想到的最简单的方法是在数据库（或缓存）上保留一个标志，并检查每个请求的有效性。

或者您可以实现一个 HTTP 会话监听器并保留一个可以访问和失效的用户会话的 HashMap。

我还没有尝试过这些，所以我不知道有任何性能问题。但对于大多数应用程序来说，它应该是可以接受的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T03:19:38.797

好吧，据我所知，没有办法解决它。使用请求范围的 bean 并没有像我预期的那样工作（尽管它确实让我很好地了解了 Spring 如何操作，拦截字段访问）。我最终在我的 SessionHandler（一个会话范围的 bean）上使用了一个脏标志，并进行了非常高优先级的方面检查，并在必要时在用户的下一个请求中对会话调用 invalidate()。我最终还是让我的所有 SessionHandlers 注册到一个 SessionManager 和一个 @PreDestroy 方法来取消注册它们以避免映射中的一堆空条目。

# python - 酸洗 Django 查询集

> ID：13793120
> 
> 赞同：0
> 
> 时间：2012-12-09T23:45:08.473
> 
> 标签：python, django, caching, orm, pickle

```
from myapp.models import MyModel
from cPickle import *

tmp = MyModel.objects.all()[:1]
print(loads(dumps(t, -1)) == t)
#Output is "False" 
```

在我的情况下，腌制查询结果与未腌制不同。我已经在这里读到： [https](https://docs.djangoproject.com/en/dev/ref/models/querysets/#pickling-querysets) ://docs.djangoproject.com/en/dev/ref/models/querysets/#pickling-querysets 实际上允许这样的操作。那么 - 我做错了什么？

upd #1：尝试了 cPickle 和常规 Pickle - 两者都得到了“假”

upd #2：可能的解决方案 - 使用 . 将 QuerySet 转换为 Python 列表`list()`。在阅读这些内容时发现它：[https ://docs.djangoproject.com/en/dev/ref/models/querysets/#when-querysets-are-evaluated](https://docs.djangoproject.com/en/dev/ref/models/querysets/#when-querysets-are-evaluated)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T02:50:17.713

问题是您正在尝试比较两个查询集，而查询集没有`__cmp__`定义方法。

因此，您可以将查询集与其自身进行比较，您将得到：

```
>> tmp == tmp
True 
```

这是因为，由于没有`__cmp__`方法，因此`==`评估`True`两个对象是否具有相同的标识（相同的内存地址）。你可以从[这里阅读](http://docs.python.org/2/reference/datamodel.html#object.__cmp__)

所以，当你这样做时：

```
>> loads(dumps(tmp, -1)) == tmp
False 
```

你会得到一个`False`结果，因为对象有不同的内存地址。如果将查询转换为“可比较”对象，则可以获得所需的行为。试试这个：

```
>> set(loads(dumps(tmp, -1))) == set(tmp)
True 
```

希望能帮助到你！

# objective-c - 在文档顶部插入 NSXMLElement/Child

> ID：13793121
> 
> 赞同：0
> 
> 时间：2012-12-09T23:45:12.053
> 
> 标签：objective-c, xml, cocoa, nsxmlelement

这会在“主”根中的文档的最底部插入一个新元素和子元素：

```
 NSXMLElement *root = [[xmlDoc rootElement] initWithName:@"main"];

    NSXMLElement *firstElement = [[NSXMLElement alloc] initWithName:@"first"];
    [root addChild:firstElement];

    NSXMLElement *secondElement = [NSXMLNode elementWithName:@"second"];
    [firstElement addChild:secondElement]; 
```

我需要将此作为第一个或第二个节点插入到文档顶部。我该怎么做？

谢谢。

-保罗。

编辑：

呃......我不敢相信这很容易......

```
 [root insertChild:firstElement atIndex:1]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T01:41:53.243

这解决了它：

[root insertChild:firstElement atIndex:1];

# ipad - Cocos2D Ipad 游戏滚动

> ID：13793124
> 
> 赞同：1
> 
> 时间：2012-12-09T23:45:19.790
> 
> 标签：ipad, cocos2d-iphone, scroll

我正在尝试制作 Ipad 游戏。对于游戏，我想要一个像游戏一样的滚动背景：Hay Day & Clash of Clans。我为此使用了 Cocos2D，扩展名为 CCLayerPanZoom。但这并没有提供很好的滚动效果（当您停止用手指移动时它不会停止，而是它的缓动？退出并“缓慢”停止）。而且我认为这个扩展类的缩放功能不是 100% 好。

有什么解决方案或好的课程吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T02:57:31.560

好家伙。刚刚在最近的原型中解决了这个问题：我很抱歉前面的内容。有几种方法可以做到这一点，既不干净也不简单。

我发现更直观的方法是移动相机的位置。您可以通过操作场景的 CCCamera 来做到这一点。从这个意义上说，您将在世界上滚动，就像在飞机上飞越它一样。对象之间的碰撞检测仍然很简单，因为所有对象都保持其“真实世界”位置。如果游戏世界中的精灵位于 (100,100)，并且您将相机向左滚动 500，则精灵仍保持在 (100,100)。

不幸的是，这引入了很多与触摸输入相关的问题。您不能再轻松地检查“此触摸是否在此节点上”，因为触摸坐标仅限于屏幕分辨率。如果相机位于 (1000,1000) 并且您触摸屏幕中间的精灵，则该触摸位置注册在 (320,280)（屏幕中间）。现在所有的触摸计算都必须包含相机的偏移量，这可能很难记住并且重复包含也很麻烦。

第二种技术是将世界放入 CCLayer 中，然后将该层移动到相机下方。我发现这种方法比较麻烦，所以我没有追求很长时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T10:08:17.413

使用 CCLayer 并将所有要移动的孩子添加到该层中。当您要移动所有内容时，请在更新中移动 CCLayer。

要将图层坐标转换为真实世界坐标，请使用以下函数：

-(CGRect)worldBoundingBox {

```
 CGRect rect = CGRectMake(0, 0, contentSize_.width,contentSize_.height);
return CGRectApplyAffineTransform(rect, [self nodeToWorldTransform]); 
```

}

# asp.net - 如何在MVC 4中查询当前登录用户的AD信息

> ID：13793126
> 
> 赞同：4
> 
> 时间：2012-12-09T23:45:34.397
> 
> 标签：asp.net, active-directory

我有一个 MVC4 内网页面，想`homeDirectory`从 Active Directory 中获取属性。想知道从 AD 获取属性的最快方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T06:06:35.313

由于您使用的是 .NET 3.5 及更高版本，因此您应该查看`System.DirectoryServices.AccountManagement`(S.DS.AM) 命名空间。在这里阅读所有相关信息：

*   [在 .NET Framework 3.5 中管理目录安全主体](http://msdn.microsoft.com/en-us/magazine/cc135979.aspx)
*   [System.DirectoryServices.AccountManagement 上的 MSDN 文档](http://msdn.microsoft.com/en-us/library/system.directoryservices.accountmanagement.aspx)

基本上，您可以定义域上下文并在 AD 中轻松找到用户和/或组：

```
// set up domain context
using (PrincipalContext ctx = new PrincipalContext(ContextType.Domain))
{
    // find a user
    UserPrincipal user = UserPrincipal.FindByIdentity(ctx, "SomeUserName");

   if(user != null)
   {
      // do something here....      
      string homeDrive = user.HomeDrive;
      string homeDirectory = user.HomeDirectory;
   }
} 
```

如果您在 ASP.NET MVC 应用程序中使用 Windows 身份验证，您还可以像这样获取当前登录的用户：

```
UserPrincipal currentUser = UserPrincipal.Current; 
```

但通常情况下，在 Web 应用程序中，这类似于用户（而不是浏览器中的用户）`NETWORK SERVICE`......`IUSER_machineName`

新的 S.DS.AM 使得在 AD 中与用户和组一起玩变得非常容易！

# c++ - 在 Visual Studio 2012 中以管理员身份调试 Visual C++ 应用程序

> ID：13793128
> 
> 赞同：7
> 
> 时间：2012-12-09T23:45:41.993
> 
> 标签：c++, visual-studio, visual-c++

我正在开发一个需要将一些设置保存到注册表的应用程序。当我尝试使用权限打开密钥时出现错误`RegCreateKeyEx`5 `KEY_WRITE`。我使用这种方法，以便在密钥不存在时创建密钥。但是，当我从 Debug 文件夹中手动使用“以管理员身份运行”运行相同的程序时，它工作正常。

通过 Visual Studio 调试应用程序时，有没有办法以管理员身份运行应用程序？我正在使用 Visual Studio 2012。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-09T23:53:42.953

您需要运行提升的 Visual Studio（即具有管理员权限）。如果你这样做，那么默认情况下，它启动的任何带有调试器的进程也将运行提升。

*（出于明显的安全原因，必须*提升Visual Studio才能附加到提升的进程。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-15T05:21:24.583

您可以使用一个完整的讨厌的“清单”系统来确保您的程序始终以管理员身份启动（基本上，确保您得到那个烦人的弹出窗口）。这是另一个可怕的 MS 流产，但这是我所知道的一种方法，可以确保您的程序始终以所需的权限运行，即使它正在被调试或在已发布的其他程序中调用时也是如此产品。

只需搜索“微软应用程序清单”或“为 Windows 程序创建应用程序清单”。另请参阅[此答案](https://stackoverflow.com/a/22092301/505893)。

# c# - HtmlAgilityPack 子字符串的所有长度

> ID：13793129
> 
> 赞同：1
> 
> 时间：2012-12-09T23:45:49.167
> 
> 标签：c#, html-agility-pack

我有带有嵌套元素的 html（主要是**div**和**p**元素）我需要返回相同的 html，但是由给定数量的字母组成。显然字母计数不应该通过html标签来枚举，而只计算每个html元素的InnerText的字母。Html 结果应保留正确的结构 - 任何结束标记以保持有效的 html。

样本输入：

```
<div>
    <p>some text</p>
    <p>some more text some more text some more text some more text some more text</p>
    <div>
        <p>some more text some more text some more text some more text some more text</p>
        <p>some more text some more text some more text some more text some more text</p>
    </div>
</div> 
```

鉴于`int length = 16`输出应如下所示：

```
<div>
    <p>some text</p> // 9 characters in the InnerText here
    <p>some mo</p> // 7 characters in the InnerText here; 9 + 7 = 16;
</div> 
```

请注意，字母数（包括空格）为 16。`<div>`由于字母数已达到 variable ，因此消除了后续字母`length`。请注意，输出 html 仍然有效。

我已经尝试了以下方法，但这并没有真正奏效。输出不符合预期：一些 html 元素被重复。

```
public static string SubstringHtml(this string html, int length)
{
    HtmlDocument doc = new HtmlDocument();
    doc.LoadHtml(html);
    int totalLength = 0;
    StringBuilder output = new StringBuilder();
    foreach (var node in doc.DocumentNode.Descendants())
    {
        totalLength += node.InnerText.Length;
        if(totalLength >= length)
        {
            int difference = totalLength - length;
            string lastPiece = node.InnerText.ToString().Substring(0, difference);
            output.Append(lastPiece);
            break;
        }
        else
        {
            output.Append(node.InnerHtml);
        }
    }
    return output.ToString();
} 
```

* * *

**更新**

@SergeBelov 提供了一个适用于第一个示例输入的解决方案，但是进一步的测试显示了一个输入问题，如下所示。

样本输入#2：

```
some more text some more text 
<div>
    <p>some text</p>
    <p>some more text some more text some more text some more text some more text</
</div> 
```

鉴于该变量`int maxLength = 7;`，输出应该等于*一些 mo*。由于以下代码，它不能那样工作`ParentNode = null`：

```
lastNode
    .Node
    .ParentNode
    .ReplaceChild(HtmlNode.CreateNode(lastNodeText.InnerText.Substring(0, lastNode.NodeLength - lastNode.TotalLength + maxLength)), lastNode.Node); 
```

创建一个新的 HtmlNode 似乎没有帮助，因为它的 IninterText 属性是只读的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T03:50:03.927

下面的小控制台程序说明了一种可能的方法，即：

1.  选择相关的文本节点并计算它们的运行总长度；
2.  根据需要获取尽可能多的节点，以达到超过最大长度的运行总数；
3.  从文档中删除所有元素节点，除了我们在步骤 ##1、2 中选择的节点的祖先节点；
4.  剪切列表最后一个节点中的文本以适合最大长度。

**更新：**这应该仍然适用于第一个文本节点；可能需要 a`Trim()`来从中删除空格，如下所示。

```
 static void Main(string[] args)
    {
        int maxLength = 9;
        string input = @"
            some more text some more text 
            <div>
                <p>some text</p>
                <p>some more text some more text some more text some more text some more text</
            </div>";

        var doc = new HtmlDocument();
        doc.LoadHtml(input);

        // Get text nodes with the appropriate running total
        var acc = 0;
        var nodes = doc.DocumentNode
            .Descendants()
            .Where(n => n.NodeType == HtmlNodeType.Text && n.InnerText.Trim().Length > 0)
            .Select(n => 
            {
                var length = n.InnerText.Trim().Length;
                acc += length;
                return new { Node = n, TotalLength = acc, NodeLength = length }; 
            })
            .TakeWhile(n => (n.TotalLength - n.NodeLength) < maxLength)
            .ToList();

        // Select element nodes we intend to keep
        var nodesToKeep = nodes
            .SelectMany(n => n.Node.AncestorsAndSelf()
                .Where(m => m.NodeType == HtmlNodeType.Element));

        // Select and remove element nodes we don't need
        var nodesToDrop = doc.DocumentNode
            .Descendants()
            .Where(m => m.NodeType == HtmlNodeType.Element)
            .Except(nodesToKeep)
            .ToList();

        foreach (var r in nodesToDrop)
            r.Remove();

        // Shorten the last node as required
        var lastNode = nodes.Last();
        var lastNodeText = lastNode.Node;
        var text = lastNodeText.InnerText.Trim().Substring(0,
                lastNode.NodeLength - lastNode.TotalLength + maxLength);
        lastNodeText
            .ParentNode
            .ReplaceChild(HtmlNode.CreateNode(text), lastNodeText);

        doc.Save(Console.Out);
    } 
```

# loops - 不同图像方向上的最小高度，最小宽度以填充 div

> ID：13793131
> 
> 赞同：0
> 
> 时间：2012-12-09T23:45:54.127
> 
> 标签：loops, conditional, css

在一个 bigcartel 帐户中，我在 div 中有一个图像，它通过一个循环运行。HTML格式基本上是这样的：

```
<ul>
  <li class="product">
    <a href="...">
     <img />
     <div class="product_info"></div>
    </a>
  </li>
</ul> 
```

CSS有一堆预设代码，但我在最后添加了它以覆盖它：

```
.product, .product img {
  max-width:210px;
}
.product{
  height:210px;
  overflow:hidden;
}
.product img{
  min-width:210px;
  min-height:210px;
} 
```

它可以很好地显示带有溢出隐藏的纵向图像，但对于横向图像它会挤压宽度。我可以添加另一个属性以使其不会水平挤压吗？

我试图通过有条件的 CSS javascript 运行它，但 Bigcartel 似乎没有运行它。网址是[http://atwatertest.bigcartel.com](http://atwatertest.bigcartel.com)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T23:56:15.327

任何时候你设置`max-width`or `min-width`，添加`height: auto`，同样为`max/min-height`and `width:auto`。这将告诉 CSS 引擎按比例调整图像大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-02T08:17:14.657

弄清楚您希望图像高度占据屏幕的多少百分比。然后使用**vh**属性。 **示例** 如果您希望图像的高度在任何给定点占屏幕高度的 1%，请使用**1vh**。

```
img {
height: 1vh;
width: 1vh;
} 
```

这意味着图像将始终占据屏幕的 1%。这使得它相应地调整大小。

# objective-c - 以编程方式更改游戏中心个人资料照片

> ID：13793137
> 
> 赞同：0
> 
> 时间：2012-12-09T23:47:26.527
> 
> 标签：objective-c, ios, xcode, game-center

在我的游戏菜单中，在有人通过游戏中心进行身份验证后，我会加载该人的照片。显然他们可以从游戏中心应用程序中更改该照片，但我认为人们在他们的照片旁边有一个小按钮会更容易：在我的应用程序中“更改照片”。

是否可以在我的应用程序中以编程方式更改游戏中心的个人资料照片？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T00:16:15.783

至于现在没有办法使用`Game Kit`框架更改玩家的个人资料图片。

# php - 时间格式 PT00H00M00S 的名称是什么，使用什么语言？

> ID：13793139
> 
> 赞同：4
> 
> 时间：2012-12-09T23:47:40.100
> 
> 标签：php, regex, types, time

我正在使用 PHP 脚本处理 excel 文档，但无法确定 PT00H00M00S 是什么数据类型/格式，随后我找不到不使用正则表达式的方法。我想将其转换为更标准的时间格式（00:00:00），我无法在谷歌上研究这个，因为我不知道“PT...S”实际上被称为日期类型/格式。

请帮我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-09T23:51:38.813

它是**ISO 8601 持续时间**。

请参阅此简要概述：[http ://en.wikipedia.org/wiki/ISO_8601#Durations](http://en.wikipedia.org/wiki/ISO_8601#Durations)

许多语言都有可用的工具来处理它们，包括[`DateInterval`](http://php.net/dateinterval).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T23:52:39.643

这是一个时间间隔，这里的`P`意思是周期。您可以使用 PHP[`DateInterval()`](http://php.net/manual/en/class.dateinterval.php)来解析字符串。

例如（取自 PHP 文档的示例）：

```
$interval = new DateInterval('P2Y4DT6H8M');
echo $interval->format('%d days'); 
```

# javascript - 在 Windows 8 应用程序中使用 Youtube Player API

> ID：13793146
> 
> 赞同：2
> 
> 时间：2012-12-09T23:48:18.547
> 
> 标签：javascript, microsoft-metro, youtube-api, youtube-javascript-api

我在 Windows 8 应用程序（html/javascript）中嵌入了 youtube 播放器。我需要与玩家互动（播放/暂停等）。[我在此处](https://developers.google.com/youtube/iframe_api_reference#Examples)的入门部分中复制/粘贴了示例，但未触发 onYouTubeIframeAPIReady。我为相同的代码创建了本地 html 文件，并在 chrome 中启动了 html 文件，但结果相同。当我使用 w3schools 尝试页面时，此代码工作正常。[我在这里](http://gdata-samples.googlecode.com/svn/trunk/ytplayer/iframe/index.html)找到了与 youtube 播放器交互的更好示例。我在桌面本地复制了 index.js、index.html 和 index.css。尝试从桌面运行 index.html 不起作用（基本上 onYouTubeIframeAPIReady 未触发）。

我的最终目标是知道视频何时在 win8 javascript/html 应用程序中播放完毕。我试图让上面的例子首先在本地工作，但到目前为止还没有成功。

我感谢您的帮助！！！！

PS：关于stackoverflow的相关问题很少（例如：http://stackoverflow.com/questions/12844668/controlling-an-iframe-youtube-player-within-a-windows-8-metro-js-app），但我无法找到答案。由于我的声誉低，我也无法发表评论:)。

**编辑：**这是我在本地使用的实际[**HTML ：**](https://developers.google.com/youtube/iframe_api_reference#Getting_Started)

```
<!DOCTYPE html>
<html>
  <body>
    <!-- 1\. The <iframe> (and video player) will replace this <div> tag. -->
    <div id="player"></div>

    <script>
      // 2\. This code loads the IFrame Player API code asynchronously.
      var tag = document.createElement('script');
      tag.src = "//www.youtube.com/iframe_api";
      var firstScriptTag = document.getElementsByTagName('script')[0];
      firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

      // 3\. This function creates an <iframe> (and YouTube player)
      //    after the API code downloads.
      var player;
      function onYouTubeIframeAPIReady() {
        player = new YT.Player('player', {
          height: '390',
          width: '640',
          videoId: 'u1zgFlCw8Aw',
          events: {
            'onReady': onPlayerReady,
            'onStateChange': onPlayerStateChange
          }
        });
      }

      // 4\. The API will call this function when the video player is ready.
      function onPlayerReady(event) {
        event.target.playVideo();
      }

      // 5\. The API calls this function when the player's state changes.
      //    The function indicates that when playing a video (state=1),
      //    the player should play for six seconds and then stop.
      var done = false;
      function onPlayerStateChange(event) {
        if (event.data == YT.PlayerState.PLAYING && !done) {
          setTimeout(stopVideo, 6000);
          done = true;
        }
      }
      function stopVideo() {
        player.stopVideo();
      }
    </script>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T00:54:25.980

在您提供的[**Google 示例 YouTube 页面**](https://developers.google.com/youtube/iframe_api_reference#Getting_Started)的第 2 部分中，更改以下内容：

```
tag.src = "//www.youtube.com/iframe_api"; 
```

对此：

```
tag.src = "http://www.youtube.com/iframe_api"; 
```

然后，此页面将在本地工作。另外，请注意，您也可以使用`https`。

# windows-phone-7 - 在 WP7 应用程序中加载 .BMP 图像

> ID：13793148
> 
> 赞同：0
> 
> 时间：2012-12-09T23:49:03.407
> 
> 标签：windows-phone-7

我正在尝试在 Windows Phone 7 应用程序中加载 BMP 图像，但扩展名是。bmp 图像没有出现。但是，该代码适用于 .jpg、.png 和 .gif。我正在使用以下代码片段：

```
Uri uri = new Uri("Images/test.bmp", UriKind.Relative);
ImageSource img = new System.Windows.Media.Imaging.BitmapImage(uri);
imageView.Source = img; 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T23:56:03.213

将其保存为`png`. Silverlight 不支持`bmp`开箱即用（请参阅[Silverlight 4 BitmapImage - bmp 文件支持](https://stackoverflow.com/questions/6719958/silverlight-4-bitmapimage-bmp-file-support)）。

或者，如果您确实需要这样做，则需要使用第三方库。[.net 图像工具库](http://imagetools.codeplex.com/)具有您需要的BMP 转换器。这个问题中有一些示例代码：[Silverlight 4: How can I convert bmp byte array to png byte array?](https://stackoverflow.com/questions/9233154/silverlight-4-how-can-i-convert-bmp-byte-array-to-png-byte-array)

# android - “致命例外：主要”再次

> ID：13793149
> 
> 赞同：0
> 
> 时间：2012-12-09T23:49:06.013
> 
> 标签：android, eclipse, exception

我已经遇到过这个问题并在stackoverflows帮助下解决了它，但它又回来了。当我单击其中一个按钮时，它会打开一个新活动，但应用程序会强制关闭。

主菜单

```
package com.example.musicbynumbers;

import android.os.Bundle;
import android.app.Activity;
import android.app.ListActivity;
import android.content.Intent;
import android.view.Menu;
import android.view.View;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.ImageButton;
import android.widget.ListView;

public class MainMenu extends Activity implements View.OnClickListener  {
    Button majScales, minHarm, minMel;
    ImageButton mainMenu;
    Intent j;
    Intent k;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main_menu);
         j = new Intent(this, majorScales.class);
          k = new Intent(MainMenu.this, minorHarmonic.class);
        mainMenu = (ImageButton) findViewById(R.id.imagelogo);
        majScales = (Button) findViewById(R.id.majorscalesb);
        minHarm = (Button) findViewById(R.id.minorharmonicb);
        minMel = (Button) findViewById(R.id.minormelodicb);
        majScales.setOnClickListener(this);
        mainMenu.setOnClickListener(this);
        minHarm.setOnClickListener(this);
        minMel.setOnClickListener(this);

    }

         @Override
            public void onClick(View arg0) {
                // TODO Auto-generated method stub
                switch(arg0.getId()){
                case R.id.imagelogo:
                    Intent i =  new Intent(MainMenu.this, MainMenu.class);
                    startActivity(i);
                    break;
                case R.id.majorscalesb:

                    startActivity(j);
                    break;
                case R.id.minorharmonicb:

                    startActivity(k);
                    break;
                case R.id.minormelodicb:
                    Intent l = new Intent(MainMenu.this, minorMelodic.class);
                    startActivity(l);
                    break;

    }

}
} 
```

大调

```
package com.example.musicbynumbers;

import android.os.Bundle;
import android.app.Activity;
import android.app.ListActivity;
import android.content.Intent;
import android.view.Menu;
import android.view.View;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.ImageButton;
import android.widget.ListView;

public class majorScales extends Activity implements View.OnClickListener  {
    Button aflatmaj, amaj, bflatmaj, bmaj, cmaj, dflatmaj, dmaj, eflatmaj, emaj, fmaj, fsharpmaj, gmaj;  
    ImageButton mainMenu;
    Intent j;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main_menu);
        j  = new Intent(this, display.class);
        mainMenu = (ImageButton) findViewById(R.id.imagelogo);
        aflatmaj = (Button) findViewById(R.id.aflatmajb);
        amaj = (Button) findViewById(R.id.amajb);
        bflatmaj = (Button) findViewById(R.id.bflatmajb);
        bmaj = (Button) findViewById(R.id.bmajb);
        cmaj = (Button) findViewById(R.id.cmajb);
        dflatmaj = (Button) findViewById(R.id.dflatmajb);
        dmaj = (Button) findViewById(R.id.dmajb);
        eflatmaj = (Button) findViewById(R.id.eflatmajb);
        emaj = (Button) findViewById(R.id.emajb);
        fmaj = (Button) findViewById(R.id.fmajb);
        fsharpmaj = (Button) findViewById(R.id.fsharpmajb);
        gmaj = (Button) findViewById(R.id.gmajb);
        mainMenu.setOnClickListener(this);
        aflatmaj.setOnClickListener(this);
        amaj.setOnClickListener(this);
        bflatmaj.setOnClickListener(this);
        bmaj.setOnClickListener(this);
        cmaj.setOnClickListener(this);
        dflatmaj.setOnClickListener(this);
        dmaj.setOnClickListener(this);
        eflatmaj.setOnClickListener(this);
        emaj.setOnClickListener(this);
        fmaj.setOnClickListener(this);
        fsharpmaj.setOnClickListener(this);
        gmaj.setOnClickListener(this);

    }

         @Override
            public void onClick(View arg0) {
                // TODO Auto-generated method stub
                switch(arg0.getId()){
                case R.id.imagelogo:
                    Intent i =  new Intent(majorScales.this, MainMenu.class);
                    startActivity(i);
                    break;
                case R.id.aflatmajb:

                    startActivity(j);
                    break;
                case R.id.amajb:

                    startActivity(j);
                    break;
                case R.id.bflatmajb:

                    startActivity(j);
                    break;
                case R.id.bmajb:

                    startActivity(j);
                    break;
                case R.id.cmajb:

                    startActivity(j);
                    break;
                case R.id.dflatmajb:

                    startActivity(j);
                    break;
                case R.id.dmajb:
                    ;
                    startActivity(j);
                    break;
                case R.id.eflatmajb:
                    ;
                    startActivity(j);
                    break;
                case R.id.emajb:
                    ;
                    startActivity(j);
                    break;
                case R.id.fmajb:
                    ;
                    startActivity(j);
                    break;
                case R.id.fsharpmajb:
                    ;
                    startActivity(j);
                    break;
                case R.id.gmajb:
                    ;
                    startActivity(j);
                    break;

    }

}
} 
```

小谐波

```
package com.example.musicbynumbers;

import android.app.Activity;
import android.os.Bundle;

public class minorHarmonic extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.minorharmonic);
    }

} 
```

AndroidManifest

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.musicbynumbers"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="16" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.example.musicbynumbers.MainMenu"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name="com.example.musicbynumbers.majorScales"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="com.example.musicbynumbers.majorScales" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
         <activity
            android:name="com.example.musicbynumbers.minorHarmonic"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="com.example.musicbynumbers.minorHarmonic" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

更新：我在清单中添加了minorHarmonic，并且该活动打开它似乎只是majorScales。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T00:14:58.873

您需要在`onCreate()`被调用后创建您的 Intent。用这个：

```
Intent j;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main_menu);

    j = new Intent(this, display.class); 
```

原因听起来很复杂：`this`Intent 中的引用使用了 Activity 的 Context，但是这个 Context 直到 after 才有效`onCreate()`。

* * *

**添加：**

我注意到您的清单中缺少一些活动：

```
<activity android:name=".display" />
<activity android:name=".minorHarmonic" />
// etc 
```

# c# - 如何将 xml 文件的内容显示到窗体上的特定 Windows 窗体控件并允许导航？

> ID：13793150
> 
> 赞同：-2
> 
> 时间：2012-12-09T23:49:07.637
> 
> 标签：c#, xml, windows-forms-designer

我有一个加载到 XMLDocument 对象中的 XML 文件。XML 文件有许多 <tour> 节点。我想在 Windows 窗体上显示 < tour > 节点的内容，并能够通过导航控件在 < tour > 节点中导航。我怎样才能做到这一点？

我希望显示信息的表单类似于：

![形式](../Images/20c15d92f8f2a82be90adb7ef4976077.png)

以下是 XML 文件的示例：

```
<?xml version="1.0" ?>
<tours>
   <tour>
      <description>
      <![CDATA[
<p><i>Travel Scotland!</i> goes south to England blah blah...</p>
  ]]>
  </description>
  <tour_name>The Lake District</tour_name>
  <tour_photo>Lake.jpg</tour_photo>
  <tour_guide>Mary Taylor</tour_guide>
  <td_email>mailto:mtaylor@tscotland.com</td_email>
  <tour_start>6/15/2003</tour_start>
  <tour_end>6/19/2003</tour_end>
  <itinerary>
     <day>
        <day_number>1</day_number>
        <plan>London arrival</plan>
     </day>
     <day>
        <day_number>2</day_number>
        <plan>Train to Windemere</plan>
     </day>
     <day>
        <day_number>3</day_number>
        <plan>Second day in Windemere</plan>
     </day>
     <day>
        <day_number>4</day_number>
        <plan>Trip to Ambleside</plan>
     </day>
     <day>
        <day_number>5</day_number>
        <plan>Hiking tour to Grasmere</plan>
     </day>
  </itinerary>   
</tour>
<tour> ANOTHER TOUR ETC. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T21:42:14.500

我不知道有关 XMLDocument 对象的细节，但在伪代码术语中，您需要这样做：

遍历您的`<tour>`节点，并将信息加载到自定义结构的数组中。例如

```
 struct tour{
        String description;
        String tourname;
        String tourimagelink;
        ...
    } 
```

然后，您需要遍历数组的每个元素，为每个条目创建 Windows 窗体控件（最好在停靠面板等内，以便您可以滚动）。对于您的 y 轴偏移量，您需要计算出信息块的高度。如果使用 for 循环遍历元素，这样的公式可能会有所帮助：

```
 y = (i*blockHeight) + offsetOfControl; 
```

我希望这在某些方面有所帮助。

编辑：更好的是 - 您可以使用一个公开所有 Windows 窗体控件的类，而不是使用结构，以便您可以将它们附加到主窗体。

# iphone - 将 UITextView 高度缩放为 iphone SMS-app

> ID：13793152
> 
> 赞同：0
> 
> 时间：2012-12-09T23:49:12.250
> 
> 标签：iphone, ios, uiview, uitextview

首先，我是一个非常缺乏经验的 IOS 开发人员，这既是我的第一个应用程序，也是我在 Objective C 中开发的第一个时间。我现在正在尝试开发一个聊天功能，就像 iPhone 短信应用程序中的原生功能一样。我已遵循本指南：[https](https://github.com/HansPinckaers/GrowingTextView) ://github.com/HansPinckaers/GrowingTextView如何创建一个根据文本量缩放高度的 TextView。

当然，我想将它与我现有的内置于故事板的 UIViewController 集成，而不是像本教程中那样通过代码自定义一个新的：[https://github.com/HansPinckaers/GrowingTextView/blob/master/example/Classes/GrowingTextViewExampleViewController。米](https://github.com/HansPinckaers/GrowingTextView/blob/master/example/Classes/GrowingTextViewExampleViewController.m)

```
- (void)loadView {
self.view = [[UIView alloc] initWithFrame:[[UIScreen mainScreen] applicationFrame]];
self.view.backgroundColor = [UIColor colorWithRed:219.0f/255.0f green:226.0f/255.0f blue:237.0f/255.0f alpha:1];
.......................................... etc

[self.view addSubview:containerView];
...........................................etc
} 
```

现在到了有趣的部分，如果我想将上面的 self.view 代码替换为 self.view = my viewController from storyboard 我应该输入什么？还是我应该洗脑并彻底重新思考并以另一种方式做到这一点？提前感谢

# breeze - 从 EntityManager 导出实体时出现微风错误

> ID：13793153
> 
> 赞同：1
> 
> 时间：2012-12-09T23:49:25.527
> 
> 标签：breeze

尝试导出实体时出现以下错误：

“无法调用 null 的方法 'getProperty'”

但仅当我在我的经理缓存中有一个标记为删除的实体时（在调用 saveChanges() 之前）

这给了我错误：

```
myEntity.entityAspect.setDeleted();
myEntityManager.saveChanges()
   .then(function() {
      var exportedData = myEntityManager.exportEntities();
   })
   .fail(function() {
      //some errorHandling...
   }); 
```

相反，在调用 saveChanges() 然后调用 exportEntities() 之前添加或修改实体不会产生错误！

对此的任何帮助，非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T01:38:08.490

这是一个错误，现在应该在 v 0.76.2 中修复。请确认这是否适合您...并感谢您的报告。

# function - 导演的 Corona sdk enterframe 事件问题

> ID：13793157
> 
> 赞同：0
> 
> 时间：2012-12-09T23:49:43.677
> 
> 标签：function, lua, event-handling, coronasdk

我在根据事件侦听器和全局变量更改场景时遇到问题。

基本上，在做出某些选择后场景会重复，这会增加变量`finalcount`，因为需要限制选择的级别。当计数器达到 4 时，场景应该改变，这使得`finalcountscene`变量等于 1。这应该触发场景的改变，而不是`scenechangeworking`5 次。所以功能有效，但场景不会改变。请帮忙！代码可以在下面找到。

```
local function scenechangecount (event)
    if gameState.finalcountscene == 1 then
        Runtime:removeEventListener( "enterFrame",  maincount )
        director:changeScene ("gamemenu")
        print("scene change working")
        Runtime:removeEventListener( "enterFrame",  scenechangecount)
end
end

local function maincount (event)
    if gameState.finalcount == 4 then
        gameState.finalcountscene = 1
     print("working",gameState.finalcount, "scene count", gameState.finalcountscene)
     Runtime:removeEventListener( "enterFrame",  maincount)

    elseif gameState.finalcount == 3 then
       gameState.finalcount = gameState.finalcount +1
       print(gameState.finalcount)
       local message = display.newImage ("images/message.png")
       message.x = display.contentWidth/2 - display.contentWidth/6 
       message.y = display.contentHeight/2 - display.contentHeight/4 - display.contentHeight/18
       localGroup:insert(message)
       Runtime:removeEventListener( "enterFrame",  maincount )

    else
       gameState.finalcount = gameState.finalcount + 1
       print(gameState.finalcount)
       Runtime:removeEventListener( "enterFrame",  maincount )
end
end

Runtime:addEventListener ("enterFrame", scenechangecount)
Runtime:addEventListener ("enterFrame", maincount) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T03:11:05.307

我看到了几个问题。首先在您的第一个函数scenechangecount 中，您在移除enterFrame 侦听器之前调用director 来更改场景，这样您的函数将继续运行并尝试多次更改场景。尝试将导演呼叫移动到这三行中的最后一行。

其次，您似乎每次都删除了 maincount enter 框架，但至少在上面您只添加了一次。因此，我看不到您如何以删除该输入框的方式增加计数器。

# android - Android 上的 Python 解释器

> ID：13793158
> 
> 赞同：7
> 
> 时间：2012-12-09T23:49:50.627
> 
> 标签：android, python

所以我想在我的Android上练习python。有没有办法在我的设备上安装解释器或解释器模拟器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T00:16:08.247

还有[适用于 Android 的 Python](http://code.google.com/p/python-for-android/) (Py4A)，它旨在与 SL4A 一起使用。Py4A 的文档不像 SL4A 那样广泛，但这里有一些 Py4A 的[示例](http://code.google.com/p/python-for-android/wiki/Examples)。

此外，还有[Kivy](http://kivy.org/#home)，这是一个基于 Python 的跨平台开发框架，适用于 Android、PC、Linux 和 iOS。过去我玩过一些 Kivy，虽然它非常强大，但它的文档一直缺乏，而且代码很难破译。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-09-16T15:08:15.840

您可以使用该`termux`应用程序，[链接到主页](https://termux.com/)，该应用程序可在[google 市场](https://play.google.com/store/apps/details?id=com.termux&hl=en)获得，无需 root。它是一个具有完整 Linux 环境的终端仿真器，`apt install python`您可以通过它安装`python`. `apt list`为您提供所有可用软件包的列表。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-09T23:53:58.140

查看[脚本第 4 层 Android](http://code.google.com/p/android-scripting/) (sl4a)。

[这里](http://code.google.com/p/android-scripting/wiki/Tutorials)有很多很好的 Python 示例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-21T18:44:18.640

从 Playstore 下载 PyDroid 3，如果你喜欢它，请购买专业版。它的成本约为 2 美元，但您拥有进行 Python 3 编程所需的一切

# maven - Axis2 在 JIRA 插件/Maven 中不起作用

> ID：13793161
> 
> 赞同：1
> 
> 时间：2012-12-09T23:50:05.100
> 
> 标签：maven, axis2, jira-plugin

我正在编写一个 JIRA 插件来从问题中导出字段并将它们发送到 Web 服务。

这让我使用了 Maven，我决定使用 axis2 来执行与 Web 服务的通信。在花了很多时间为 Axis2 设置正确的依赖项后，我让它编译并运行没有错误。

问题是我创建的插件似乎无法连接到服务客户端。我通过 Web 服务存根添加了调试代码，调用时它似乎失败了：

```
_serviceClient = new org.apache.axis2.client.ServiceClient(configurationContext,_service); 
```

有趣的一点是没有抛出错误，所以我无法确定实际发生了什么。

另一个有趣的点是，当我运行单元测试时，它成功完成并与我想要的 Web 服务通信。

单元测试和插件之间的主要区别在于插件在tomcat上的JIRA实例中运行，而单元测试只是使用junit。

是否有人对可能出现的问题或我可以检查哪些内容以获取更多详细信息有任何想法。如果需要，很乐意提供更多信息。

# objective-c - setValue:forUndefinedKey: 这个类不符合键的键值编码

> ID：13793162
> 
> 赞同：78
> 
> 时间：2012-12-09T23:50:21.930
> 
> 标签：objective-c, xcode, cocoa-touch, cocoa

我正在创建一个登录来查看支持票。第一个视图是工单视图，如果您未登录，则会将您推送到登录屏幕。但是我收到了这个：

> 支持 [3209:18e03] *** 由于未捕获的异常“NSUnknownKeyException”而终止应用程序，原因：“[setValue:forUndefinedKey:]：此类不符合键 LoginScreen 的键值编码。” ***
> 
> First throw call stack: (0x1f17012 0x1634e7e 0x1f9ffb1 0x10e1711 0x1062ec8 0x10629b7 0x108d428 0x7990cc 0x1648663 0x1f1245a 0x797bcf 0x65ce37 0x65d418 0x65d648 0x65d882 0x669235 0x8683d2 0x6664f3 0x666777 0x6667b7 0x9d1fe2 0x9c3ad9 0x65e422 0x2b15 0x65f753 0x65fb2f 0x661286 0x65fe3f 0x592910 0x592895 0x5926e5 0x1edfafe 0x1edfa3d 0x1ebd7c2 0x1ebcf44 0x1ebce1b 0x22aa7e3 0x22aa668 0x57c65c 0x1f0d 0x1e35) libc+ +abi.dylib: 终止调用抛出异常

这是我的 LoginScreen.m 代码

```
#import "UIAlertView+error.h"
#import "LoginScreen.h"
#import "API.h"
#include <CommonCrypto/CommonDigest.h>

#define sayWhat @"REMOVEDFORSECURITY"

@implementation LoginScreen

-(void)viewDidLoad {
    NSLog(@"Found me!");
    [super viewDidLoad];

    //focus on the username field /show keyboard
    [fldUsername becomeFirstResponder];
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
        // Return YES for supported orientations
        return (interfaceOrientation == UIInterfaceOrientationPortrait);
    }

    -(IBA

ction)btnLoginRegisterTapped:(UIButton*)sender {
    if (fldUsername.text.length < 4 || fldPassword.text.length < 4){
        [UIAlertView error:@"Enter username and password over 4 chars each."];
        return;
    }

    //very basic encryption called "salting"
    NSString* saltedPassword = [NSString stringWithFormat:@"%@%@", fldPassword.text, sayWhat];

    //prep the hashed storage
    NSString* hashedPassword = nil;
    unsigned char hashedPasswordData[CC_SHA1_DIGEST_LENGTH];

    //actually hash this
    NSData *data = [saltedPassword dataUsingEncoding: NSUTF8StringEncoding];
    if (CC_SHA1([data bytes], [data length], hashedPasswordData)){
        hashedPassword = [[NSString alloc] initWithBytes:hashedPasswordData length:sizeof(hashedPasswordData) encoding:NSASCIIStringEncoding];
        } else {
            [UIAlertView error:@"Password can't be sent"];
                return;
        }

    NSMutableDictionary* params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
        fldUsername.text, @"username",
                                   hashedPassword, @"password", nil];
    //here is the web call finally!
    [[API sharedInstance] commandWithParams:params
                               onCompletion:^(NSDictionary *json){
        //returned result
       NSDictionary* res = [[json objectForKey:@"result"] objectAtIndex:0];

        if([json objectForKey:@"error"]==nil && [[res objectForKey:@"userid"] intValue]> 0) {
                                       //success
        } else {
                                       //error'
        [UIAlertView error:[json objectForKey:@"error"]];
                                   }

    }];

}
@end 
```

和 LoginScreen.h

```
#import <UIKit/UIKit.h>

@interface LoginScreen : UIViewController {
//the login form fields
IBOutlet UITextField* fldUsername;
IBOutlet UITextField* fldPassword;

}

//action for when either button is pressed
-(IBAction)btnLoginRegisterTapped:(id)sender;

@end

    <?xml version="1.0" encoding="UTF-8" standalone="no"?>
<document type="com.apple.InterfaceBuilder3.CocoaTouch.Storyboard.XIB" version="2.0" toolsVersion="2844" systemVersion="12C60" targetRuntime="iOS.CocoaTouch" propertyAccessControl="none" useAutolayout="YES" initialViewController="A8c-eR-geg">
    <dependencies>
        <plugIn identifier="com.apple.InterfaceBuilder.IBCocoaTouchPlugin" version="1930"/>
    </dependencies>
    <scenes>
        <!--Tickets View - View Tickets-->
        <scene sceneID="aIJ-Wx-2Yy">
            <objects>
                <viewController title="View Tickets" id="T0P-Bi-31w" customClass="TicketsView" sceneMemberID="viewController">
                    <view key="view" contentMode="scaleToFill" id="4zZ-I2-ltX">
                        <rect key="frame" x="0.0" y="64" width="320" height="504"/>
                        <autoresizingMask key="autoresizingMask" flexibleMaxX="YES" flexibleMaxY="YES"/>
                        <subviews>
                            <label opaque="NO" clipsSubviews="YES" userInteractionEnabled="NO" contentMode="left" text="You Made It" lineBreakMode="tailTruncation" baselineAdjustment="alignBaselines" adjustsFontSizeToFit="NO" translatesAutoresizingMaskIntoConstraints="NO" id="Fbu-Sr-Mgf">
                                <fontDescription key="fontDescription" type="system" pointSize="17"/>
                                <color key="textColor" cocoaTouchSystemColor="darkTextColor"/>
                                <nil key="highlightedColor"/>
                            </label>
                        </subviews>
                        <color key="backgroundColor" white="1" alpha="1" colorSpace="custom" customColorSpace="calibratedWhite"/>
                        <constraints>
                            <constraint firstItem="Fbu-Sr-Mgf" firstAttribute="top" secondItem="4zZ-I2-ltX" secondAttribute="top" constant="138" id="QBp-qM-fKP"/>
                            <constraint firstItem="Fbu-Sr-Mgf" firstAttribute="leading" secondItem="4zZ-I2-ltX" secondAttribute="leading" constant="115" id="goO-5h-RZK"/>
                        </constraints>
                    </view>
                    <navigationItem key="navigationItem" id="vu4-JX-C3v"/>
                    <simulatedNavigationBarMetrics key="simulatedTopBarMetrics" prompted="NO"/>
                    <connections>
                        <segue destination="TOB-FA-Ss4" kind="modal" identifier="ShowLogin" id="dJH-ge-8CV"/>
                    </connections>
                </viewController>
                <placeholder placeholderIdentifier="IBFirstResponder" id="aSa-2G-5fx" userLabel="First Responder" sceneMemberID="firstResponder"/>
            </objects>
            <point key="canvasLocation" x="-518" y="-841"/>
        </scene>
        <!--Login Screen - Login-->
        <scene sceneID="6iZ-QL-7ID">
            <objects>
                <viewController title="Login" id="TOB-FA-Ss4" customClass="LoginScreen" sceneMemberID="viewController">
                    <view key="view" contentMode="scaleToFill" id="w9e-4U-cwC">
                        <rect key="frame" x="0.0" y="64" width="320" height="504"/>
                        <autoresizingMask key="autoresizingMask" flexibleMaxX="YES" flexibleMaxY="YES"/>
                        <subviews>
                            <label opaque="NO" clipsSubviews="YES" userInteractionEnabled="NO" contentMode="left" text="Blue Label Hosting Login" lineBreakMode="tailTruncation" minimumFontSize="10" translatesAutoresizingMaskIntoConstraints="NO" id="SuD-JI-L2T">
                                <fontDescription key="fontDescription" type="system" pointSize="17"/>
                                <color key="textColor" cocoaTouchSystemColor="darkTextColor"/>
                                <nil key="highlightedColor"/>
                            </label>
                            <textField opaque="NO" clipsSubviews="YES" contentMode="scaleToFill" contentHorizontalAlignment="left" contentVerticalAlignment="center" borderStyle="roundedRect" placeholder="Username" minimumFontSize="17" translatesAutoresizingMaskIntoConstraints="NO" id="NeI-zB-U8Y">
                                <constraints>
                                    <constraint firstAttribute="height" constant="31" id="BlH-cG-Jdh"/>
                                    <constraint firstAttribute="width" constant="208" id="Osb-tj-fjn"/>
                                </constraints>
                                <fontDescription key="fontDescription" type="system" pointSize="14"/>
                                <textInputTraits key="textInputTraits"/>
                            </textField>
                            <textField opaque="NO" clipsSubviews="YES" contentMode="scaleToFill" contentHorizontalAlignment="left" contentVerticalAlignment="center" borderStyle="roundedRect" placeholder="Password" minimumFontSize="17" translatesAutoresizingMaskIntoConstraints="NO" id="4Fi-NX-kli">
                                <constraints>
                                    <constraint firstAttribute="height" constant="31" id="X3j-X2-ton"/>
                                </constraints>
                                <fontDescription key="fontDescription" type="system" pointSize="14"/>
                                <textInputTraits key="textInputTraits" secureTextEntry="YES"/>
                            </textField>
                            <button opaque="NO" contentMode="scaleToFill" contentHorizontalAlignment="center" contentVerticalAlignment="center" buttonType="roundedRect" lineBreakMode="middleTruncation" translatesAutoresizingMaskIntoConstraints="NO" id="5o5-83-KbW">
                                <constraints>
                                    <constraint firstAttribute="height" constant="36" id="Afu-6h-uru"/>
                                    <constraint firstAttribute="width" constant="161" id="Ef5-df-Jmp"/>
                                </constraints>
                                <fontDescription key="fontDescription" type="boldSystem" pointSize="15"/>
                                <state key="normal" title="Login">
                                    <color key="titleColor" red="0.19607843459999999" green="0.30980393290000002" blue="0.52156865600000002" alpha="1" colorSpace="calibratedRGB"/>
                                    <color key="titleShadowColor" white="0.5" alpha="1" colorSpace="calibratedWhite"/>
                                </state>
                                <state key="highlighted">
                                    <color key="titleColor" white="1" alpha="1" colorSpace="calibratedWhite"/>
                                </state>
                                <connections>
                                    <action selector="btnLoginRegisterTapped:" destination="w9e-4U-cwC" eventType="touchUpInside" id="Wgb-L8-sAJ"/>
                                </connections>
                            </button>
                        </subviews>
                        <color key="backgroundColor" cocoaTouchSystemColor="groupTableViewBackgroundColor"/>
                        <constraints>
                            <constraint firstItem="NeI-zB-U8Y" firstAttribute="top" secondItem="SuD-JI-L2T" secondAttribute="bottom" constant="8" symbolic="YES" type="default" id="0Pv-zM-WId"/>
                            <constraint firstItem="4Fi-NX-kli" firstAttribute="top" secondItem="NeI-zB-U8Y" secondAttribute="bottom" constant="8" symbolic="YES" type="default" id="2Sw-m8-LND"/>
                            <constraint firstItem="4Fi-NX-kli" firstAttribute="trailing" secondItem="NeI-zB-U8Y" secondAttribute="trailing" type="default" id="88O-VQ-qut"/>
                            <constraint firstItem="SuD-JI-L2T" firstAttribute="centerX" secondItem="NeI-zB-U8Y" secondAttribute="centerX" type="default" id="Qu9-PG-YWz"/>
                            <constraint firstItem="4Fi-NX-kli" firstAttribute="centerX" secondItem="5o5-83-KbW" secondAttribute="centerX" type="default" id="RAm-sI-Z3u"/>
                            <constraint firstItem="5o5-83-KbW" firstAttribute="top" secondItem="w9e-4U-cwC" secondAttribute="top" constant="128" id="UTG-NS-bx4"/>
                            <constraint firstItem="SuD-JI-L2T" firstAttribute="top" secondItem="w9e-4U-cwC" secondAttribute="top" constant="20" symbolic="YES" type="default" id="iaC-Ex-EBa"/>
                            <constraint firstItem="SuD-JI-L2T" firstAttribute="centerX" secondItem="w9e-4U-cwC" secondAttribute="centerX" type="default" id="oWP-Gp-Pi5"/>
                            <constraint firstItem="4Fi-NX-kli" firstAttribute="leading" secondItem="NeI-zB-U8Y" secondAttribute="leading" type="default" id="oxE-WD-fVc"/>
                        </constraints>
                        <connections>
                            <outlet property="fldPassword" destination="4Fi-NX-kli" id="4eb-YW-8YI"/>
                            <outlet property="fldUsername" destination="NeI-zB-U8Y" id="Ds4-XS-iqW"/>
                        </connections>
                    </view>
                    <simulatedNavigationBarMetrics key="simulatedTopBarMetrics" prompted="NO"/>
                </viewController>
                <placeholder placeholderIdentifier="IBFirstResponder" id="FL3-Yk-JbH" userLabel="First Responder" sceneMemberID="firstResponder"/>
            </objects>
            <point key="canvasLocation" x="-84" y="-349"/>
        </scene>
        <!--Navigation Controller-->
        <scene sceneID="fJ6-wq-4Tj">
            <objects>
                <navigationController id="A8c-eR-geg" sceneMemberID="viewController">
                    <toolbarItems/>
                    <navigationBar key="navigationBar" opaque="NO" clipsSubviews="YES" multipleTouchEnabled="YES" contentMode="scaleToFill" id="bnk-dD-E4j">
                        <rect key="frame" x="0.0" y="0.0" width="320" height="44"/>
                        <autoresizingMask key="autoresizingMask"/>
                    </navigationBar>
                    <nil name="viewControllers"/>
                    <connections>
                        <segue destination="T0P-Bi-31w" kind="relationship" relationship="rootViewController" id="3jA-WY-c3V"/>
                    </connections>
                </navigationController>
                <placeholder placeholderIdentifier="IBFirstResponder" id="lTO-TW-owb" userLabel="First Responder" sceneMemberID="firstResponder"/>
            </objects>
            <point key="canvasLocation" x="-971" y="-910"/>
        </scene>
    </scenes>
    <classes>
        <class className="LoginScreen" superclassName="UIViewController">
            <source key="sourceIdentifier" type="project" relativePath="./Classes/LoginScreen.h"/>
            <relationships>
                <relationship kind="action" name="btnLoginRegisterTapped:"/>
                <relationship kind="outlet" name="fldPassword" candidateClass="UITextField"/>
                <relationship kind="outlet" name="fldUsername" candidateClass="UITextField"/>
            </relationships>
        </class>
        <class className="NSLayoutConstraint" superclassName="NSObject">
            <source key="sourceIdentifier" type="project" relativePath="./Classes/NSLayoutConstraint.h"/>
        </class>
        <class className="TicketsView" superclassName="UIViewController">
            <source key="sourceIdentifier" type="project" relativePath="./Classes/TicketsView.h"/>
        </class>
    </classes>
    <simulatedMetricsContainer key="defaultSimulatedMetrics">
        <simulatedStatusBarMetrics key="statusBar"/>
        <simulatedOrientationMetrics key="orientation"/>
        <simulatedScreenMetrics key="destination" type="retina4"/>
    </simulatedMetricsContainer>
</document> 
```

* * *

## 回答 #1

> 赞同：280
> 
> 时间：2012-12-10T00:14:32.817

这种莫名其妙的异常通常是`xib`文件不干净的结果。在 xcode 中打开`xib`，选择 File's Owner 并单击“Connection Inspector”（右上箭头），一次查看所有出口。寻找`!`s 表示缺少出口。

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2012-12-10T00:11:04.963

在 Interface Builder 中检查您的连接。您可能指的是不存在的`IBOutlet`或`IBAction`.

* * *

## 回答 #3

> 赞同：34
> 
> 时间：2013-04-12T01:47:03.297

![看](../Images/3bd15dc4b8d46cf4077b11ba2b25ace0.png)

多谢你们。我通过您的帮助解决了这个问题。所以，我希望这个截图对有同样问题的人有所帮助。

* * *

## 回答 #4

> 赞同：27
> 
> 时间：2012-12-11T02:25:02.183

转到 Xcode 的断点选项卡。使用底部的按钮添加异常断点。现在您将看到调用 setValue:forKey: 和相关堆栈的代码。运气好的话，你会直接指出问题的根源。

奇怪的是您的课程是 LoginScreen，但错误是说有人使用“LoginScreen”作为键。检查 LoginScreen.m 是否是您的目标的一部分。

[![在此处输入图像描述](../Images/b44265ec5399a81a19b5eb4d321549fd.png)](https://i.stack.imgur.com/Ic3JT.png)

* * *

***脚注：使用 Swift 时，如果您更改**类的名称（因此，您在代码中的任何位置重命名它），就会出现一个常见问题。Storyboard 在这方面遇到了困难，您通常必须**重新拖动**涉及该类的任何连接。特别是，在右侧的 IdentityInspector 选项卡中的任何位置**重新输入类的名称。**（在图片示例中，我故意拼错了类名。但是当你重命名一个类时，同样的事情经常发生；**即使它在 IdentityInspector 中看起来是正确的**，你也需要再次输入名称；它会正确地自动完成，你很好去。）*

* * *

## 回答 #5

> 赞同：24
> 
> 时间：2013-08-29T08:28:53.070

我在创建自定义 TableCell 时遇到了类似的问题。问题是我将 FileOwner 设置为我的自定义类，然后连接了插座。

FileOwner 应该保持 NSObject。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2015-02-26T18:49:07.493

我有这个并查看了所有内容并没有发现任何问题，但最终记得尝试**清理**并清除**派生数据**并解决了它！

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-06-10T18:31:09.630

我有一个类似的问题，但我`initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil`明确地使用类的名称作为传递的字符串（是的，格式不好！）。

我最终删除并使用稍微不同的名称重新创建了视图控制器，但忽略了更改方法中指定的字符串，因此我的旧版本仍在使用 - 即使它在垃圾箱中！

我可能会按照以下建议继续使用这种结构：[是否将两个 nil 参数传递给 initWithNibName:bundle: 方法不好的做法（即不安全或更慢）？](https://stackoverflow.com/questions/15444760/is-passing-two-nil-paramters-to-initwithnibnamebundle-method-bad-practice-i-e)

```
- (id)init
{
    [super initWithNibName:@"MyNib" bundle:nil];
    ... typical initialization ...
    return self;
}

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    return [self init];
} 
```

希望这可以帮助某人！

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2015-02-22T06:41:20.050

这个错误是另外一回事！

这是我修复它的方法。我正在使用 xcode 版本 6.1.1 并使用 swift。每次我的应用程序尝试执行 segue 以跳转到下一个屏幕时，我都会收到此错误。这就是我所做的。

1.  检查按钮是否连接到正确的操作。（这不是问题，但仍然可以检查）
2.  检查按钮是否没有您可能错误创建的任何其他操作或插座。（这不是问题，但仍然可以检查）
3.  检查日志并确保 NEXT SCREEN 中的所有按钮都具有正确的操作，如果有任何 segue，请确保它们具有唯一标识符。（这是问题）
    *   其中一个 segue 没有唯一标识符
    *   其中一个按钮有一个动作和两个我错误创建的插座。

删除任何额外的出口，并确保下一个屏幕的转义具有唯一标识符。

干杯，

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-02-03T16:02:10.923

因为是因为没有 2 功能

```
@implementation CellTableView

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil {
    return [self init];
}
- (void)awakeFromNib {
}

- (void)setSelected:(BOOL)selected animated:(BOOL)animated {
    [super setSelected:selected animated:animated];
}

@end 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2014-02-19T14:44:06.070

我遇到了这个问题，因为我没有使用 StoryBorad，并且在项目属性 -> 部署信息 -> 主界面上是 Main Xib 的名称。

我删除了主界面中的值并解决了问题。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2014-08-25T13:43:57.017

这通常意味着有东西试图访问**@property "givenName"**。

如果您对 做某事`Interface Builder(IB)`，通常的原因是您：

1.  从类中删除了该属性，但尚未删除 IB 中的连接
2.  或者：您将 File's Owner 对象设置为错误的类（检查属性 - 根据您使用的 xcode 版本而有所不同
    *   找到其设置为的类名。您可能复制/粘贴了一个 NIB 文件，并且没有更改 NIB 中的此字段），并且您已经为该类连接了一个插座，但您的实际文件所有者是不同的

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2014-10-04T17:58:54.653

在我的情况下，我在 .h 中有**IBOutlet UILabel *description**，它是黄色的 /!\ - *“不会合成”*，我记得。不知道它是什么，为什么只有这个标签。

但是我遇到了像上面这样的崩溃和错误。删除 *description 并重新创建 *description2。结果没有崩溃。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2014-06-20T05:27:44.867

如果您有不同的 storybord 文件，并且如果您有在头文件中没有创建插座的插座引用，那么您只需通过右键单击文件所有者来删除连接。

文件所有者->右键单击->删除那里不需要的连接。

仔细阅读这个以获得清晰的解释。 [这是什么意思？“'NSUnknownKeyException'，原因：......这个类不符合键 X 的键值编码”](https://stackoverflow.com/questions/3088059/this-class-is-not-key-value-coding-compliant-for-the-key)

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2014-11-03T18:02:46.270

对我来说，我将注册笔尖的集合视图标题切换为注册类。那解决了它。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2013-07-16T23:13:57.543

我在所有地方的 PickerView 上得到了这个。错误消息在消息的第一条用“queuePicker”命名问题。这是由以前的引用插座引起的，在我添加一个组件并将原始 NSArray 重命名为 queuePicker 以外的其他内容后，该插座不再有效。CNTL+单击您的 StoryBoard 对象为您提供连接。我在引用插座中为 queuePicker 的 ViewController 旁边单击了“x”，建立了一个新连接，并且 viola，不再崩溃。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2013-12-17T10:21:39.150

您可能正在为 alertView 中的键设置值，这是不允许的。关键是在这种情况下`LoginScreen`。我没有看到对 的任何调用`setValue()`，所以我认为它在代码中的其他地方。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2014-03-06T20:39:03.050

我今天遇到了同样的问题。正如[this answer中所建议的](https://stackoverflow.com/a/13793334/515065)，问题是一个不干净的xib。在我的情况下，不干净的 xib 是更新由与其关联的视图控制器以外的东西加载的 xib 的结果。

Xcode 让我创建和填充一个新的插座并将它连接到文件的所有者，即使我明确地将它连接到正确视图控制器的源。下面是 Xcode 生成的代码：

```
 <placeholder placeholderIdentifier="IBFilesOwner" id="-1" userLabel="File's Owner" customClass="LoginViewController"]]>
        <connections>
            <outlet property="hostLabel" destination="W4x-T2-Mcm" id="c3E-1U-sVf"/>
        </connections>
    </placeholder> 
```

当我运行我的应用程序时，它因同样的`not key value coding-compliant`错误而崩溃。为了纠正这个问题，我从 Interface Builder 中的 File's Owner 中删除了插座，并将其显式连接到左侧轮廓上的视图控制器对象，而不是辅助编辑器中的代码。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2013-01-10T17:54:05.137

我在创建自定义视图类时遇到了类似的错误，那是因为不知何故其中一个插座在 XIB 文件中连接了两次（我想我最初控制将控件直接拖到代码中，但后一个控件再次从文件的所有者）。我打开了 XIB 文件并删除了其中一个，之后一切正常。希望这会有所帮助。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2014-04-16T01:44:57.493

这在以下情况下发生在我身上：

我在我的工作区中创建了第二个项目，为模板选择了“单一视图应用程序”。

然后我去了 Interface Builder（主 iPhone 故事板），将 a 添加到主视图，并通过 an和( )`UISwitch`将其连接到视图控制器。`IBOutlet``IBAction``-valueChanged:`

启动时，应用程序崩溃，但问题中提到了异常。如果我从视图中删除开关，它就可以工作。

经过仔细检查，我意识到我将连接拖到了`ViewController.h`同一工作区中另一个项目的连接中。*Interface Builder 的助手编辑器（又名Tuxedo 胸部图标*）的“自动”集选择了错误的文件（具有正确的名称）作为“对应”文件。

希望这对某人有所帮助，特别是因为“单视图应用程序”和“SpriteKit 游戏”项目模板（在我的情况下）都创建了一个名为“ViewController”的默认视图控制器类。

* * *

## 回答 #20

> 赞同：-1
> 
> 时间：2013-05-14T02:17:40.917

我不得不删除所有对象并重新添加它们。这似乎解决了这个问题。

# php - 如何将数据库连接传递给另一个类？

> ID：13793165
> 
> 赞同：1
> 
> 时间：2012-12-09T23:50:34.137
> 
> 标签：php, pdo

我目前正在尝试按如下方式传递数据库连接：

```
class Test {
    public $user;
    public $db;

    function __construct() {
        // connect to database
        try {
            $this->db = new PDO('mysql:host='.DB_HOST.';dbname='.DB_DATABASE.'', DB_USERNAME, DB_PASSWORD);
            $this->db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
        } catch(PDOException $err) {
            die($err->getMessage());
        }
        $this->user = new User($this->db);
    }
}

class User {
    public $db;

    function __construct($db) {
        $this->db = $db;
    }

    // execute some query
    $sql = "SELECT * FROM test";
    $sth = $this->db->prepare($sql);
    $sth->execute();
    $result = $sth->fetch();
    if(!empty($result)) {
        echo '<pre>';
        var_dump($result);
        echo '</pre>';
    }
} 
```

但我得到：致命错误：在非对象上调用成员函数 prepare()。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T00:00:52.860

你已经得到了正确的传递 db-to-class-constructor 部分。

但这不是您编写的有效类定义。您需要将这些代码行（以下`// execute some query`）放入一个函数中。代码行不能存在于它们所在的位置，在 User 类内部而不是函数内部浮动。这不是合法的PHP。

您还应该在每次调用 prepare() 或 execute() 后检查错误状态。如果出现错误（如 SQL 语法错误或表不存在等），它们将返回 FALSE。

```
class User {
    public $db;

    function __construct($db) {
        if (! $db instanceof PDO) { die("What are you trying to pull anyway?"); }
        $this->db = $db;
    }

    function doSomething() {
        // execute some query
        $sql = "SELECT * FROM test";
        $sth = $this->db->prepare($sql);
        if ($sth === false) {
            die(print_r($this->db->errorInfo(), true));
        }
        $status = $sth->execute();
        if ($status === false) {
            die(print_r($sth->errorInfo(), true));
        }
        $result = $sth->fetch();
        if(!empty($result)) {
            echo '<pre>';
            var_dump($result);
            echo '</pre>';
        }
    }
} 
```

# joomla - Joomla Ignite Gallery 不显示 Alt 标签

> ID：13793167
> 
> 赞同：0
> 
> 时间：2012-12-09T23:50:46.283
> 
> 标签：joomla, gallery

今天是我寻找 Joomla 网站的第一天。我必须做非常简单的事情 - 将 Alt 文本添加到图像中。

我花了很多时间研究......最后我发现了以下内容：

*   网站正在使用 Joomla 2.5.7
*   安装了Ignite Gallery，用于上传图片
*   之后我看到图像出现使用 fancybox
*   我也确实看到该应用程序不显示原始图像，而是调整大小的图像
*   我已经更改了 Ignite Gallery 中图像的 Alt 标签并发布了所有内容
*   我还清除了所有浏览器缓存以确保这不是缓存
*   我试图取消发布图像，这工作正常（图像不再显示）然后再次发布（很好），但没有 alt 标签
*   最后一个：我确实在数据库列 alt_text 中看到了那个 alt 标签

我没有任何结果。替代文本不会出现在页面上的任何位置。所有图像的 Alt 值始终为空。没有 Alt 标签，但应该有一些。

由于这是我在 Joomla 和 Ignite Gallery 的第一个白天和晚上，我发现了很多，但是，这还不够，我被困在这里。

你能给我一些提示吗？为了更好的搜索引擎优化，我需要图像的替代文字。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T09:35:57.680

这是由一些开发人员自定义更改引起的。我已经修复了它们。已修复的组件的 default_menu 和 default_main 文件，添加 $row->alt_text.

# extjs - EXTJs Chart 不呈现数据或图形

> ID：13793169
> 
> 赞同：0
> 
> 时间：2012-12-09T23:51:15.913
> 
> 标签：extjs, sencha-charts

我创建了一个包含一些模拟数据的折线图，直接从 EXTJs 样本中提取。当我将它插入我的应用程序时，它在窗口中显示良好，但是，数据和所有图形都没有显示。更有趣的是，当我单击另存为图像按钮（由示例提供）时，我得到正确显示的数据、线条和图形，就像在示例中一样。我还可以看到/记录正在生成数据。我难住了。

获取数据：

```
window.generateData = function(n, floor){
        var data = [],
            p = (Math.random() *  11) + 1,
            i;

        floor = (!floor && floor !== 0)? 20 : floor;

        for (i = 0; i < (n || 12); i++) {
            data.push({
                name: Ext.Date.monthNames[i % 12],
                data1: Math.floor(((Math.random() - 0.5) * 100), floor),
                data2: Math.floor(((Math.random() - 0.5) * 100), floor),
                data3: Math.floor(((Math.random() - 0.5) * 100), floor),
                data4: Math.floor(((Math.random() - 0.5) * 100), floor),
                data5: Math.floor(((Math.random() - 0.5) * 100), floor),
                data6: Math.floor(((Math.random() - 0.5) * 100), floor),
                data7: Math.floor(((Math.random() - 0.5) * 100), floor),
                data8: Math.floor(((Math.random() - 0.5) * 100), floor),
                data9: Math.floor(((Math.random() - 0.5) * 100), floor)
            });
        }
        return data;
    }; 
```

创建图表：

```
store1.loadData(generateData(8));

        var chart = Ext.create('Ext.chart.Chart', {
            xtype: 'chart',
            renderTo: Ext.getBody(),
            animate: true,
            width: 760,
            height: 480,
            store: store1,
            shadow: true,
            theme: 'Category1',
            legend: {
                position: 'right'
            },
            axes: [{
                type: 'Numeric',
                minimum: 0,
                position: 'left',
                fields: ['data1', 'data2', 'data3'],
                title: 'Number of Parkers',
                minorTickSteps: 1,
                grid: {
                    odd: {
                        opacity: 1,
                        fill: '#ddd',
                        stroke: '#bbb',
                        'stroke-width': 0.5
                    }
                }
            }, {
                type: 'Category',
                position: 'bottom',
                fields: ['name'],
                title: 'Month of the Year'
            }],
            series: [{
                type: 'line',
                highlight: {
                    size: 7,
                    radius: 7
                },
                axis: 'left',
                xField: 'name',
                yField: 'data1',
                markerConfig: {
                    type: 'cross',
                    size: 4,
                    radius: 4,
                    'stroke-width': 0
                }
            }, {
                type: 'line',
                highlight: {
                    size: 7,
                    radius: 7
                },
                axis: 'left',
                smooth: true,
                xField: 'name',
                yField: 'data2',
                markerConfig: {
                    type: 'circle',
                    size: 4,
                    radius: 4,
                    'stroke-width': 0
                }
            }, {
                type: 'line',
                highlight: {
                    size: 7,
                    radius: 7
                },
                axis: 'left',
                smooth: true,
                fill: true,
                xField: 'name',
                yField: 'data3',
                markerConfig: {
                    type: 'circle',
                    size: 4,
                    radius: 4,
                    'stroke-width': 0
                }
            }]
        }); 
```

比在我的窗口组件中我简单地添加：

```
...
items: [{
                xtype: 'container',
            id: 'dashboard-content',
                margin: 50,
                layout: 'fit',
                renderTo: Ext.getBody(),
            items: chart

            }]
... 
```

在另存为图像时：

```
...
chart.save({
    type: 'image/png'
});
... 
```

一切都已创建，数据已生成，图表显示和绘制，但没有任何线条或图形。再一次，如果我保存为图像，它会下载一个正确显示所有内容的图像。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T01:01:13.530

原来在我的页面上加载了一些 CSS 冲突，导致图表中没有呈现图形。一旦我删除了在 ext 上方加载的其他 CSS，图表就会呈现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T00:28:09.840

从有关 renderTo 的文档中：

> 如果 Component 要成为 Container 的子项，请不要使用此选项。Container 的布局管理器负责渲染和管理其子项。

如果您查看图表示例，您将看到仅呈现最外层的容器（或窗口）。

同样，如果您在容器上指定“适合”布局，则在子组件上指定大小几乎是多余的。

# javascript - 在 Nodejitsu 上运行流星应用程序

> ID：13793170
> 
> 赞同：6
> 
> 时间：2012-12-09T23:51:32.030
> 
> 标签：javascript, node.js, meteor, nodejitsu

将流星应用程序部署到 Nodejitsu 试用环境，但未能使其运行。从我的流星应用程序目录执行`jitsu deploy`后，我收到以下错误：`ReferenceError: Meteor is not defined`.

如果您已经在 Nodejitsu 上启动并运行了一个流星应用程序，请突出显示您采取的步骤以及我可能缺少的依赖项。我将使用您的建议并尝试让我的应用程序运行。谢谢。

```
// package.json contents
{
  "name": "test123-meteor",
  "subdomain": "user123.test123-meteor",

/*
* Really not sure about this line here...
*/
  "scripts": {
    "start": "node client/controllers/GeneralController.js"
  },
  "version": "0.0.1-2",
  "engines": {
    "node": "0.8.x"
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-04T17:09:10.840

我今天尝试了这个，使用 demeteorizer 时没有问题。我在 Meteorpedia 上写了以下关于它的小文章，其中包括我的自定义构建脚本，它极大地简化了部署。

[http://www.meteorpedia.com/read/Nodejitsu](http://www.meteorpedia.com/read/Nodejitsu)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T20:10:23.967

在修复此错误之前，Meteor 不会在 nodejitsu 上运行：[node-fibers 不会在 SmartOS 上构建](https://github.com/laverdet/node-fibers/issues/94)。如果你想要它，你应该给这个错误加注星标，甚至考虑修复它。（天真地，它看起来需要更多的持久性而不是光彩；一个构建问题只是一个操作系统上的一个包，它在超过 5 个其他操作系统上未经修改地构建。）

# ios - 当模型接近屏幕渲染时，IOS 6.0.1 帧率下降

> ID：13793172
> 
> 赞同：0
> 
> 时间：2012-12-09T23:51:37.070
> 
> 标签：ios, opengl-es, ipad-2

我最近将我的 iPad2 从 5.x 更新到 iOS 6.0.1，并将 xcode 升级到 4.5.2。现在，当我构建和运行我的游戏时，它以 60 fps 的速度平稳运行。但是，当 3d 模型靠近屏幕时，帧速率现在会下降到 40fps 并保持在那里，即使模型远离屏幕也是如此。有什么办法可以克服这个问题，还是 iOS 6.0.1 或 xcode 4.5.2 的错误？这可能是 iOS 6.0.1 的某种省电功能吗？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T21:25:31.117

据我所知，iOS 6.0.1 或 Xcode 4.5.2 中没有可能导致此问题的错误，但我只是一名工作的 iOS 开发人员，而不是负责这些项目质量控制的工程师。

有了这个问题中可用的最少信息，我的第一个猜测是模型是使用 mipmapped 纹理绘制的。当远离相机时使用较小版本的纹理，但当它靠近相机时使用较大版本的纹理。您可以做的一个可能的检查是关闭此模型的纹理并检查性能。然而，我假设您正在使用纹理，所以这个建议可能离题了。

诊断此问题的最佳方法是使用 Xcode 4.5 中提供的最新 OpenGL 调试和分析工具。我建议观看去年夏天关于 OpenGL 的 WWDC 的会议视频，以了解如何使用这些工具。

**编辑以评论您发布的着色器：**

着色器可以并行处理片段，但如果着色器中的条件在片段之间评估为不同的值，则会减少并行处理的数量。引用*OpenGL ES 2.0 Programming Guide*的第 156 页：

> GPU 通常执行具有多个顶点的顶点着色器或具有并行多个片段的片段着色器。并行执行的顶点或片段的数量将取决于 GPU 的性能目标。if 和 if-else 条件语句中的 bool_expression 对于并行执行的顶点或片段可以具有不同的值。这会影响性能，因为 GPU 并行执行的顶点或片段的数量减少了。我们建议，为了获得最佳性能，条件语句应与 bool_expression 值一起使用，这些值对于并行执行的顶点或片段是相同的。如果使用统一表达式，就会出现这种情况。

也许 GPU 会愉快地处理很多片段，因为每个片段的布尔值都是相同的。然后，GPU 获取布尔值不再评估相同的片段，并且不再并行处理片段。知道这些可以评估为不同的值，GPU 继续以较少的并行度处理片段，即使在模型远离相机之后也是如此。

您的一系列 if 语句将值限制为特定状态。也许写一个能给出类似结果的方程可能会解决这个问题。尝试类似：

```
df = (floor(mod((((df + 0.2) * 10.0) / 3.0), 4.0)) * 3.0) / 10.0; 
```

我实际上并没有使用此代码编译着色器，也没有完全匹配您的范围，因此您可能需要进行一些调整。但这应该保持并行性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-19T08:22:17.930

似乎“问题”在 iOS 7 上得到了解决。

我遇到了完全相同的问题...今天早上安装了新操作系统，似乎帧率问题刚刚消失。

现在帧率下降是一致的。当然，如果你做太多 GPU 的事情，它仍然会下降……但它会下降并逐渐恢复到 60，因为 GPU 执行的操作更少。

所以最后它似乎是某种“驱动程序/操作系统问题”（虽然没有官方确认）

# java - jMagick 有比较方法吗？

> ID：13793174
> 
> 赞同：1
> 
> 时间：2012-12-09T23:51:40.660
> 
> 标签：java, selenium, selenium-webdriver, automated-tests, jmagick

我正在尝试使用 ImageMagick 的 jmagick java api 比较屏幕截图。我在这里找不到任何比较方法[http://downloads.jmagick.org/jmagick-doc/](http://downloads.jmagick.org/jmagick-doc/) 有人可以告诉我，如果 jMagick 有比较或等效方法，或者他们用什么来比较图像？

# asp.net - 新手无法让 GridView 正常工作

> ID：13793175
> 
> 赞同：0
> 
> 时间：2012-12-09T23:51:50.420
> 
> 标签：asp.net

这是我使用 SqlDataSource 和 GridView 的第一次体验，而且我是 ASP.Net 的新手，所以我正在努力让这些东西发挥作用。

我想从 SqlDataSource 创建一个 GridView，其中 SQL 查询中的变量来自表单文本框。我可以让查询和 GridView 在没有表单变量部分的情况下工作。这是我所拥有的：

```
<form id="form1" runat="server">
<asp:SqlDataSource ID="SqlDataSource1" runat="server" 
    ConnectionString="<%$ ConnectionStrings:CUBE %>" 
    ProviderName="<%$ ConnectionStrings:CUBE.ProviderName %>" 
    SelectCommand="SELECT csono, citemno, nordqty, nseq, nprice, cdescript, nsalesamt FROM dbo.sostrs WHERE (LTRIM(csono) = @csono) ORDER BY nseq">
    <selectparameters>
        <asp:controlparameter name="csono" controlid="frmSONum" propertyname="Text"/>
    </selectparameters>
</asp:SqlDataSource>

<asp:TextBox ID="frmSONum" runat="server"></asp:TextBox>
<asp:Button ID="Button1" runat="server" Text="Button" />

<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" 
    DataSourceID="SqlDataSource1" CellPadding="4" ForeColor="#333333" 
    GridLines="None">
    <AlternatingRowStyle BackColor="White" />
    <Columns>
        <asp:BoundField DataField="citemno" HeaderText="citemno" 
            SortExpression="citemno" />
        <asp:BoundField DataField="cdescript" HeaderText="cdescript" 
            SortExpression="cdescript" />
        <asp:BoundField DataField="nordqty" HeaderText="nordqty" 
            SortExpression="nordqty" />
        <asp:BoundField DataField="nprice" HeaderText="nprice" 
            SortExpression="nprice" />
        <asp:BoundField DataField="nsalesamt" HeaderText="nsalesamt" 
            SortExpression="nsalesamt" />
    </Columns>
    <EditRowStyle BackColor="#7C6F57" />
    <FooterStyle BackColor="#1C5E55" Font-Bold="True" ForeColor="White" />
    <HeaderStyle BackColor="#1C5E55" Font-Bold="True" ForeColor="White" />
    <PagerStyle BackColor="#666666" ForeColor="White" HorizontalAlign="Center" />
    <RowStyle BackColor="#E3EAEB" />
    <SelectedRowStyle BackColor="#C5BBAF" Font-Bold="True" ForeColor="#333333" />
    <SortedAscendingCellStyle BackColor="#F8FAFA" />
    <SortedAscendingHeaderStyle BackColor="#246B61" />
    <SortedDescendingCellStyle BackColor="#D4DFE1" />
    <SortedDescendingHeaderStyle BackColor="#15524A" />
</asp:GridView>
</form> 
```

当我按原样运行表单时，出现此错误：

```
ERROR [42000] [Microsoft][ODBC SQL Server Driver][SQL Server]Must declare the variable '@csono'. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T01:54:52.107

将“@csono”更改为“？” 在 SQL 查询中，它按预期工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-24T13:24:23.903

```
SELECT
    /**/
    ,csono
    --,insert more select stuff
FROM
    yourTableName
WHERE
    csono = @csono 
```

通常，您会添加这样的一行。

```
conn.Open();
cmd.Parameters.AddWithValue("@csono", yourValueHere); 
```

这可以让您避免 sql 注入，这是恶意人员用来删除数据库表和有趣内容的方法。

更多信息在这里。 [https://msdn.microsoft.com/en-us/library/ff648339.aspx?f=255&MSPPError=-2147217396](https://msdn.microsoft.com/en-us/library/ff648339.aspx?f=255&MSPPError=-2147217396)

# android - 振动器强度太软

> ID：13793179
> 
> 赞同：0
> 
> 时间：2012-12-09T23:52:13.120
> 
> 标签：android, vibration

我使用“vibrator.vibrate(2000);” 对于振动，它会振动，但强度非常柔和。我知道我的手机能够振动得更厉害，因为在接到电话或通知时它会正确振动。为什么函数 vibrate() 这么周？谢谢

```
Vibrator vibrator = (Vibrator) getSystemService(Context.VIBRATOR_SERVICE);
vibrator.vibrate(4000); 
```

不过，在收到短信或通知时，手机会振动得很厉害

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T11:20:48.173

在大多数手机中，振动（非常粗略）是由轴上带有偏置重物的微型振动电机引起的。这样，当电机启动并且轴旋转时，偏置重量会导致电机以及它所连接的任何东西振动。除了向电机供电的持续时间外，没有其他控制措施。

![典型的微型振动电机](../Images/3359e04317eeeeb85fa4cadb348ef020.png)

尽管这似乎无法解释为什么来电回执或通知会产生比您通过 API 功能获得的更强烈的振动。所以也许我应该把它作为评论而不是答案？（但我看不到如何在评论中获取图片）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T02:46:48.370

您不能进一步增加振动强度。因此，为了获得更好的感觉，您可以使用 `public void vibrate(long[] pattern, int repeat)` 而不是`vibrator.vibrate(2000);`

这里的模式是（来自api参考）

> 传入一个整数数组，它们是打开或关闭振动器的持续时间（以毫秒为单位）。第一个值表示打开振动器之前要等待的毫秒数。下一个值表示在关闭振动器之前保持振动器开启的毫秒数。随后的值在持续时间（以毫秒为单位）之间交替，以关闭振动器或打开振动器。

所以你可以尝试不同的模式以获得更好的感觉。例如

```
final long[] pattern = { 0, 200, 500, 500, 200 };
vibrator.vibrate(pattern , 0); 
```

您可以创建自己的模式来检查。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T00:10:50.860

这是一个有根据的猜测，因为我从未使用过振动器，但也许尝试增加您传递给函数的值？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-08T12:39:21.937

在我的手机（搭载 Android 4.3 的三星 Galaxy S3）上，振动器的强度由菜单项中的系统范围设置触发

`phone settings > My device > Sound > Vibration intensity`

`Incoming call`在这里，您可以调整、`Notification`和的振动强度`Haptic feedback`。设置会`Notification`影响您在实施中引起的振动强度。将该值设置为零会导致您的手机根本不会与您的代码一起振动。

# java - 带有前导零的Android setText不显示零

> ID：13793185
> 
> 赞同：0
> 
> 时间：2012-12-09T23:52:50.487
> 
> 标签：java, android

我正在尝试做的一个例子。

```
int i = 9;

if (i<10)
i = "0"+v1 
```

当然这行不通，因为 int != String，但是最好的方法是什么，以确保出现前导零？将int转换为字符串？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T00:05:14.843

尝试[`String.format`](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html#format%28java.lang.String,%20java.lang.Object...%29)

```
int i = 9
String formattedValue = String.format("%02d", i); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T23:56:29.650

你不能有一个前导零的整数，因为八进制数由前导零表示。你应该使用[**Integer.toString(int)**](http://docs.oracle.com/javase/7/docs/api/java/lang/Integer.html#toString%28int%29)方法将你的 int 转换为 String。

```
 int i = 9;
        System.out.println("0"+Integer.toString(i)); 
```

或者干脆

```
 int i=0;
      String result ="0"+i; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-01T05:43:46.737

有时，当您为项目设置字体时，最好`DecimalFormat`在 java 中使用类，这是解决此问题的另一种方法

```
DecimalFormat df = new DecimalFormat("00");
int number = 9;
String result = df.format(number) //09 
```

# sip - SIP 客户端应该在哪里发送回复到邀请？

> ID：13793186
> 
> 赞同：2
> 
> 时间：2012-12-09T23:52:52.637
> 
> 标签：sip

假设有一个 SIP 客户端在 100.0.0.100:5059 监听。

它从 10.0.0.101:5060 接收一个带有 INVITE 的 UDP 数据包，其中包含某些标头。例如：

*   `Contact: <sip:100.0.0.102:5060>`
*   `Record-Route: <sip:100.0.0.103:5060>`（第一个这样的标题）
*   `Route: <sip:100.0.0.104:5060>`
*   `Via: <sip:100.0.0.105:5060>`（第一个这样的标题）

应该在哪里发送“ACK”、“Tryinng”、“对话建立”、“BYE”等内容？100.0.0.什么？

（背景：尝试编写“单个 TCP 连接中的整个 SIP”包装器，将 SIP 中看到的所有地址转换为自身，但出现“请求超时”、“检测到循环”、“中继冻结”错误，使对话仅持续 15 秒...可能是因为包装器做错了什么...为什么标头和应用程序/ sdp中有这么多令人困惑的IP地址？...）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T10:36:24.000

[RFC 3261 第 18.2.2 节](https://www.rfc-editor.org/rfc/rfc3261#section-18.2.2)告诉您该怎么做。算法的第三步是适用的：

```
 o  Otherwise (for unreliable unicast transports), if the top Via
     has a "received" parameter, the response MUST be sent to the
     address in the "received" parameter, using the port indicated
     in the "sent-by" value, or using port 5060 if none is specified
     explicitly.  If this fails, for example, elicits an ICMP "port
     unreachable" response, the procedures of Section 5 of [4]
     SHOULD be used to determine where to send the response.
  o  Otherwise, if it is not receiver-tagged, the response MUST be
     sent to the address indicated by the "sent-by" value, using the
     procedures in Section 5 of [4]. 
```

这里`[4]`指的[地方](https://www.rfc-editor.org/rfc/rfc3263#section-5)。

通过 TCP 接收请求是一个更简单的情况：如果可以，您可以通过开放连接发送请求。否则，您打开一个 TCP 连接到`received`最顶层参数中的 IP 地址（`Via`如果存在），或者该标头的`sent-by`令牌（如果不存在）。如果该尝试失败，您必须回退到上面提到的 RFC 3263 中的算法。

# objective-c - 如何在 Xcode 的“Cocoa Application”模板上编辑 About 页面

> ID：13793187
> 
> 赞同：2
> 
> 时间：2012-12-09T23:52:52.187
> 
> 标签：objective-c, xcode4.5

我使用 Xcode 4.5 的 Cocoa Application 模板创建了一个应用程序。我看到有一大堆我不需要的菜单被我删除了。我想保留的是关于页面，但我找不到它从哪里获取数据。

（我只做过一堆 iOS 应用程序，这是我第一个使用 Cocoa 的桌面应用程序）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T23:54:03.507

检查`Credits.rtf`XCode 自动创建的文件。你可以在群里找到`Supporting Files`。

如果要编辑版权信息，则需要更改应用程序文件中的`NSHumanReadableCopyright`密钥。`<YouAppName>Info.plist`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-10T00:00:55.383

查看 .plist 文件，版权（人类可读）项。

# java - Java正则表达式拆分保持收缩

> ID：13793192
> 
> 赞同：3
> 
> 时间：2012-12-09T23:53:48.913
> 
> 标签：java, regex, split, expression

使用 split() 时，什么正则表达式可以让我保留所有单词字符，但也可以保留像 don't won't 这样的缩写。撇号两侧带有单词字符但删除任何前导或尾随撇号的任何内容，例如“tis or dogs”。

我有：

```
String [] words = line.split("[^\\w'+]+[\\w+('*?)\\w+]"); 
```

但它保留了前导和尾随标点符号。

的输入`'Tis the season, for the children's happiness'.`

将产生以下输出：`Tis the season for the children's happiness`

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T00:10:10.970

我会认为：分裂：

*   *撇号 + 至少一个无字*char*`['-]\\W+`，*
**   *或*任何无字字符`[^\\w'-]\\W*`。

    ```
    String line = "'Tis the season, for the children's happiness'";
    String[] words = line.split("(['-]\\W+|[^\\w'-]\\W*)");
    System.out.println(Arrays.toString(words)); 
    ```* 

 *在这里，我添加`-`了撇号。

结果：

```
['Tis, the, season, for, the, children's, happiness'] 
```

添加开始和结束：

```
 String[] words = line.split("(^['-]|['-]$|['-]\\W+|[^\\w'-]\\W*)"); 
```

结果：

```
[, Tis, the, season, for, the, children's, happiness] 
```

一开始会产生一个空字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T01:51:04.563

或者，您可以只匹配模式：

```
\w+('\w+)? 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-18T21:06:10.357

英语很烂。考虑以下伦敦：

> “简说，‘你会很吓人的，山姆带着南瓜灯的儿子！’”双胞胎的鬼魂异口同声地说。

所有单词都使用以下方式匹配：

```
('?[\p{L}](-[^-])?('-)?(s'(?=\s))?)+ 
```

返回 16 个匹配项：

> “ `Jane` `said`，‘ `'E'll` `be` `spooky`，！`Sam's` `son` `with` `the` `jack-o'-lantern`’，” `said` `the` `twins'` `ghosts`—— `in` `unison`。

请注意，**twins'**是所有格，而不是收缩，并且是匹配的。然而，**Sam's**也是所有格，但与收缩没有区别——它需要一个精心设计的例外条款，因为*它*不是它的所有格：它是*它*的。

这将不包括“**幸福”**中的撇号，因为没有简单的方法来判断它是结束单引号还是所有格。

请参阅我的引号解析器[KeenQuotes](https://github.com/DaveJarvis/keenquotes)，它将通过将直引号字符 ( `'`) 转换为撇号 ( `&apos;`) 或卷曲单引号 ( `&lsquo;`, `&rsquo;`) 来处理许多场景。*

# xquery - Xslt 键函数的 Xquery 函数

> ID：13793199
> 
> 赞同：3
> 
> 时间：2012-12-09T23:54:35.567
> 
> 标签：xquery

我想将 xslt 键函数转换为 Xquery 函数。任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-10T01:13:53.670

**如果我们有`xsl:key`指示**：

```
<xsl:key name='someName' match="patExpr" use="Expr"/> 
```

**并调用`key()`函数**：

```
key('someName', someExpr, $someDocNode) 
```

**这相当于**：

```
($someDocNode//patExpr)[Expr = someExpr] 
```

因此，对于任何特定的键，您需要声明一个函数（命名它`my:keySomeName()`），它返回一个节点序列，其主体是上述表达式。

**示例**：

**如果我们有这个`xsl:key`指令**：

```
 <xsl:key name='kNameByVal' match='Name' use='.'/> 
```

**以及对`key()`函数**的调用：

```
key('kNameByVal', 'Peter', $doc) 
```

**那么相应的 XQuery 函数将具有以下主体**：

```
$doc//Name[. = 'Peter'] 
```

如果函数的第二个操作数`key()`是一个更复杂的表达式，则计算该表达式的函数必须作为第二个参数传递给您的键实现函数（因此这仅在 XQuery 3.0 及更高版本中才有可能），我们最终得到像这样的东西：

```
declare function my:keyNameByVal($funExpr as function($context as node()) as item()*, 
                                 $currenDoc as document-node()
                                )  as node()*
{
   $currenDoc//Name[. = $funExpr(.) ]
} 
```

**更传统的非 3.0 方式**是调用者计算表达式并将计算结果作为第一个参数传递给`my:keyNameByVal()`函数：

```
declare function my:keyNameByVal($useExpr as item()*, 
                                 $currenDoc as document-node()
                                )  as node()*
{
   $currenDoc//Name[. = $useExpr]
} 
```

}

# javascript - 使用 Javascript 在下拉列表中获取值

> ID：13793202
> 
> 赞同：2
> 
> 时间：2012-12-09T23:55:11.410
> 
> 标签：javascript, html, datatables

我正在使用 API 从 mySQL 数据库中以 JSON 格式获取数据，并在数据表中显示数据。我正在做的是编辑我正在显示带有要编辑的数据的模式的内容。它也有一个下拉菜单。我很困惑，因为我不知道如何用数据库中的值填充它们，到目前为止我已经尝试了一切，但仍然没有成功。

这是脚本，

```
$('#company .edit-company').live('click', function() {
                    var id = $(this).attr('id');
                    $('#company-label').html('Edit ');
                    $('#company-form')[0].reset();
                    $.ajax({
                        url : '/index.php/company/profile_data',
                        type : 'POST',
                        data : 'companies[]=' + id,
                        beforeSend : function() {
                            $('#loading-span7').show();

                        },
                        success : function(data, textStatus, xhr) {

                            var details = JSON.parse(data);
                            console.log(details.aaData[0].homepage_url);
                            $('input[name=company-name]').val(details.aaData[0].name);
                            $('input[name=package-id]').html(details.aaData[0].package_id);
                            //$('#package-id').val(details.aaData[0].package_id);
                            $('#edit_company').modal('show');
                            $('#loading-span7').fadeOut();
                        },
                        error : function(xhr, textStatus, errorThrown) {
                            //alert('error');
                        }
                    });

                }); 
```

这是HTML

```
<div id="edit_company" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                ×
            </button>
            <h3 id="myModalLabel"><span id="company-label"></span>Company</h3>
        </div>
        <div class="modal-body">
            <form id="company-form">
                <fieldset>
                    <label>Name</label>
                    <input type="text" placeholder="Type something…" name="company-name">
                    <label>Package</label>
                    <select name="package" name="package-id" id="package-id">
                        <option></option>
                    </select>

                </fieldset>
            </form>

        </div>
        <div class="modal-footer">
            <button class="btn" data-dismiss="modal" aria-hidden="true">
                Close
            </button>
            <button class="btn btn-primary">
                Save changes
            </button>
        </div>
    </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T00:00:31.720

```
$('select#package-id option').text(details.aaData[0].package_id); 
```

创建选项：

```
var option1 = $('<option />', {text: details.aaData[0].package_id}),
    option2 = $('<option />', {text: details.aaData[1].package_id}),
    option3 = $('<option />', {text: details.aaData[2].package_id});

$('select#package-id').append(option1, option2, option3); 
```

# 3d - 在 MFC 中绘制 3D

> ID：13793204
> 
> 赞同：1
> 
> 时间：2012-12-09T23:55:41.203
> 
> 标签：3d, gpu, polygon, projection, light

不要问我为什么，但我需要使用 MFC 绘制一个 3d 图形，我创建了矩阵和向量类。我正在计算 ViewMatrix（逆相机矩阵）和投影矩阵。

我将每个顶点乘以世界观和投影矩阵。我将此向量除以 W 并得到视口的 x,y 坐标。我还从 WorldViewMatrix 中提取了一个 quintillion 并将其乘以法线向量以获得该多边形的法线。

我想计算三角形每个点的颜色，但我不知道该怎么做。我可以从投影坐标创建三角形，并计算每个点的光，通过乘以投影的逆矩阵来获得它们的位置。但它太慢了。

我想知道它是如何在真正的 GPU 上实现的。它们有顶点和点以及其他着色器。我想做这样的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-05T04:32:26.233

我认为您需要在 MFC 应用程序中使用 OpenGL 或 DirectX。我已经与 OpenGL 进行了集成……10 年前……我不记得我是如何做到的。

如果原生 Win32 GDI 和 GDI+ 技术能够实现的话，那么 3d 功能将非常有限。

# vb.net - 设置数据网格中列的宽度？

> ID：13793205
> 
> 赞同：1
> 
> 时间：2012-12-09T23:55:41.977
> 
> 标签：vb.net, datagrid

如何在 a `DataGrid`（不是 a `DataGridView`）中设置列的宽度？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T00:15:49.577

我认为它是这样的：

```
dg.TableStyles(0).GridColumnStyles(0).Width = 120 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-01T20:11:28.927

Private Sub dgColumnWidths() 'Var = 0 对于第一列 Dim Var As Integer DataGrid1.Columns(Var).Width = 1000 End Sub

# python - 为什么 Python 函数不打印默认值？

> ID：13793213
> 
> 赞同：2
> 
> 时间：2012-12-09T23:56:27.747
> 
> 标签：python, python-2.7

我是 Python 新手，正在尝试打印为参数设置的默认值。我的代码如下；

```
# Functions

def shoppingcart(item='computer', *price):
    print item
    for i in price:
        print i

shoppingcart(100,200,300) 
```

当我运行代码时，我得到的只是 values `100,200,300`。我期待着`computer,100,200,300`。我究竟做错了什么？

**编辑**

如何在 Python 2.7 中实现这一点？

**编辑**

我将我的代码更新为

```
def shoppingcart(item='computer', *price):
    print item
    for i in price:
        print i

shoppingcart(item='laptop', 100,200,300) 
```

但是得到错误

![在此处输入图像描述](../Images/f0c4b7cc9613b3e50cf378f6c50a221b.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-09T23:59:32.280

简单地说，只有在没有其他方法的情况下才使用默认值。在这里，您有`item=100`其他 2 个值进入`*price`.

在 Python3 中，您可以编写：

```
def shoppingcart(*prices, item='computer'): 
    print(item)
    print(prices)

shoppingcart(100,200,300)
shoppingcart(100,200,300, item='moon') 
```

在 Python2 中，你不能有默认参数，`*args`所以你必须找到另一种方法来调用你的函数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-10T01:08:51.813

对于 Python 2.x，您必须使用以下`**`语法：

```
def shoppingcart(*prices, **kwargs):
   item = kwargs.pop("item", "computer")
   assert not kwargs, "This function only expects 'item' as keyword argument".
   print(item)
   print(prices) 
```

然后你可以给它传递关键字参数：

```
shoppingcart(100,200,300, item='moon') 
```

（他们总是需要在“位置”参数之后）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-10T01:41:03.667

你想做的事是不可能的。你永远不能用 Python 写这个：

```
shoppingcart(item='laptop', 100,200,300) 
```

在 2.x 或 3.x 中，您将收到一个错误：

```
SyntaxError: non-keyword arg after keyword arg 
```

首先，一点背景：

“关键字”参数类似于`item='laptop'`，您可以在其中指定名称和值。“位置”或“非关键字”参数类似于`100`，您只需在其中指定值。每当您调用函数时，都必须将关键字 args 放在所有位置 args 之后。所以，你可以写`shoppingcart(100, 200, 300, item='laptop')`，但你不能写`shoppingcart(item='laptop', 100, 200, 300)`。

当您了解处理关键字参数的方式时，这会更有意义。让我们举一个非常简单的例子，有一组固定的参数，没有默认值，让一切变得更容易：

```
def shoppingcart(item, price):
    print item, price 
```

无论我用 , 还是任何其他可能性来调用它`shoppingcart('laptop', 200)`，`shoppingcart(price=200, item='laptop')`您都可以弄清楚参数是如何到达函数体的`item`。`price`除了`shoppingcart(price=200, 'laptop')`，Python 无法判断`laptop`应该是什么——它不是第一个参数，它没有给出显式关键字`item`，所以它不可能是`item`. 但它也不能是`price`，因为我已经得到了。而且，如果您仔细考虑一下，每当我尝试在位置参数之前传递关键字参数时，都会遇到同样的问题。在更复杂的情况下，很难看出原因，但在最简单的情况下它甚至不起作用。

因此，Python 将引发 a `SyntaxError: non-keyword arg after keyword arg`，甚至无需查看您的函数是如何定义的。所以没有办法改变你的函数定义来使它工作；这是不可能的。

但是如果你移到`item`参数列表的末尾，那么我可以打电话`shoppingcart(100, 200, 300, item='computer')`，一切都会好起来的，对吧？不幸的是，不，因为您正在使用`*args`吸收`100, 200, 300`，并且您不能在 . 之后放置任何显式参数`*args`。事实证明，这个限制没有原则性的理由，所以他们在 Python 3 中取消了它——但如果你仍在使用 2.7，你必须忍受它。但至少有一个解决方法。

解决这个问题的方法是用来`**kwargs`吸收所有关键字参数并自己解析它们，就像你用来`*args`吸收所有位置参数一样。就像使用位置参数为`*args`您提供 a一样，为您提供每个关键字参数的关键字映射到其值的关键字。`list``**kwargs``dict`

所以：

```
>>> def shoppingcart(*args, **kwargs):
...    print args, kwargs
>>> shoppingcart(100, 200, 300, item='laptop')
[100, 200, 300], {'item': 'laptop'} 
```

如果你想`item`成为强制性的，你只需像这样访问它：

```
item = kwargs['item'] 
```

如果您希望它是可选的，具有默认值，您可以这样做：

```
item = kwargs.get('item', 'computer') 
```

但是这里有一个问题：您只想接受一个可选`item`参数，但现在您实际上接受了*任何*关键字参数。如果你用一个简单的函数尝试这个，你会得到一个错误：

```
>>> def simplefunc(a, b, c):
...     print a, b, c
>>> simplefunc(1, 2, 3, 4)
TypeError: simplefunc() takes exactly 3 arguments (4 given)
>>> simplefunc(a=1, b=2, c=3, d=4, e=5)
TypeError: simplefunc() got an unexpected keyword argument 'd' 
```

有一种非常简单的方法可以用`**kwargs`. 请记住，这只是一个普通的`dict`，因此如果您在解析它们时取出预期的关键字，则应该没有任何剩余 - 如果有，调用者传递了一个意外的关键字参数。如果你不想这样，你可以提出一个错误。你可以这样写：

```
def shoppingcart(*prices, **kwargs):
    for key in kwargs:
        if key != 'item':
            raise TypeError("shoppingcart() got unexpected keyword argument(s) '%s' % kwargs.keys()[0]`)
    item = kwargs.get('item', 'computer')
    print item, prices 
```

但是，有一个方便的捷径。该`dict.pop`方法的作用类似于`dict.get`，但除了将值返回给您之外，它还会将其从字典中删除。并且在您删除`item`（如果存在）之后，如果还有任何东西，那就是一个错误。所以，你可以这样做：

```
def shoppingcart(*args, **kwargs):
    item = kwargs.pop('item', 'computer')
    if kwargs: # Something else was in there besides item!
        raise TypeError("shoppingcart() got unexpected keyword argument(s) '%s' % kwargs.keys()[0]`) 
```

除非您正在构建一个可重用的库，否则您可以摆脱比整个`if`/`raise`事物更简单的事情，然后做`assert not kwargs`; 没有人会关心你得到一个`AssertionError`而不是一个`TypeError`。这就是lqc的解决方案正在做的事情。

回顾一下，如何编写函数并不重要。它永远不能被称为你想要的方式。但如果你愿意`item`走到最后，你既可以写也可以用合理的方式调用它（即使它不像 Python 3 版本那么简单或可读）。

对于一些罕见的情况，还有其他方法可以走。例如，如果价格总是必须是数字，而商品总是字符串，你可以改变你的代码来做这样的事情：

```
def shoppingcart(*prices):
    if prices and isinstance(prices[0], basestring):
        item = prices.pop(0)
    else:
        item = 'computer'
    print item
    for price in prices:
        print price 
```

现在，您可以这样做：

```
>>> shoppingcart(100, 200, 300)
computer
100
200
300
>>> shoppingcart('laptop', 100, 200, 300) # notice no `item=` here
laptop
100
200
300 
```

这基本上是 Python 用来实现的一种技巧`slice(start=None, stop, step=None)`，它在您的代码中非常有用。但是，它使您的实现更加脆弱，使您的函数的行为对读者来说不太明显，并且通常不会让人感觉像 Python。所以，几乎总是最好避免这种情况，如果你想要的话，只让调用者使用真正的关键字参数，限制它们必须在最后。

# python - Python Sockets - 服务器只接收一次？

> ID：13793215
> 
> 赞同：4
> 
> 时间：2012-12-09T23:56:36.310
> 
> 标签：python, sockets, networking

我一直在玩弄 Python 套接字，希望了解如何更好地完成网络编程。现在我正在尝试设置一个连接到服务器的客户端，并且可以在关闭之前向它发送任意数量的消息。我仍然不太了解所有内容，我只能让它发送一条消息。对于有套接字编程经验的人来说，这可能是显而易见的。有人可以向我解释如何让它发送多条消息吗？也许为我提供一个很好的资源来解释连接、绑定、关闭、接收和所有主要的套接字功能是如何工作的？（我发现的大多数资源只是告诉我何时使用它们。）

**客户**

```
# !usr/bin/python

import socket
import sys

def main():
    host = ""
    port = 8934
    message = "Hello World!"

    host = raw_input("Enter IP: ")
    #Create Socket
    try:
        s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    except socket.error, msg:
        print "Failed to create socket. Error code: %s Error Message: %s"%(str(msg[0]),msg[1])
        sys.exit()
    print "Socket created"

    #Connect to server
    s.connect((host,port))

    while message != "/e":
        #Send Data
        message = raw_input("Send >> ")
        try:
            s.sendall(message)
        except socket.error, msg:
            print "ERROR %s"%(msg[1])
            print "Failed to send."
        s.close()

if __name__ == "__main__":
    main() 
```

**服务器**

```
# !usr/bin/python

import socket
import sys

HOST = ""
PORT = 8934
s = socket.socket()

class BoServer:

    def __init__(self):
        try:
            s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
        except socket.error,msg:
            print "Unable to create socket"
            sys.exit()
        print "Socket created."
    def bind(self):
        s.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1)
        try:
            s.bind((HOST,PORT))
        except socket.error,msg:
            print "Bind failed. Closing..."
            sys.exit()
        print "Socket bound."
    def run(self):
        while True:
            s.listen(10)
            print "Socket Listening"
            conn, addr = s.accept()
            print "Connected to %s:%s"%(addr[0],addr[1])
            income = conn.recv(4096)
            if income != "":
                print income

def main():
    serv = BoServer()
    serv.bind()
    serv.run()

if __name__ == "__main__":
    main() 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T00:14:26.673

在您的客户端，您正在关闭`while True:`循环内的套接字，因此您将无法在循环的未来迭代中传输更多消息。如果您打算在不同的连接上发送每条消息，那么您需要在循环中创建套接字。如果您打算在同一连接上发送多条消息，则需要将 close 调用移到循环之外。

在服务器端，您在循环的每次迭代中运行一次 listen() ，这是不必要的：它的目的是为缓冲的传入连接设置队列长度，因此只需要调用一次。在继续循环的第二次迭代之前，您也只从套接字执行一次读取，在该循环中您接受另一个传入连接。

根据您希望服务器的行为方式，另一个潜在问题是您一次只为一个传入连接提供服务。如果您打算处理长时间运行的连接，那么这可能是一个问题。要一次处理多个连接，您可能希望在其自己的线程上处理每个连接（例如使用[标准库模块](http://docs.python.org/2/library/socketserver#asynchronous-mixins)`ThreadingTCPServer`中的类），或者使用像[Twisted](http://twistedmatrix.com/)这样的异步 IO 框架。[`SocketServer`](http://docs.python.org/2/library/socketserver#asynchronous-mixins)

# java - TreeNode 的井字游戏解决方案

> ID：13793217
> 
> 赞同：1
> 
> 时间：2012-12-09T23:56:48.370
> 
> 标签：java, tree

我正在创建一个 tic tac toe 程序，它是播放器与 pc。电脑需要计算出他能做的最好的动作，然后去做。要计算每个可能的步骤，TreeNode 听起来很完美，但问题是在每个级别之后，孩子的数量越来越少，例如：

^ 表示为空

```
^ X O 
O O X
^ X ^ 
```

对于这种情况，我需要一棵有 3 个孩子的树，但对于这种情况：

```
^ ^ ^
^ X ^
^ ^ ^ 
```

我需要一棵有 8 个孩子的树。那么可以改变孩子的数量吗？在问这个问题时，我认为将 null 放在不想要的孩子上会是一个解决方案，但你有更好的建议吗？或者甚至树不是我情况的最佳选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T23:58:19.133

是的，这很容易实现。不要使用数组来保存节点的子节点，而是使用可变大小的[`List`](http://docs.oracle.com/javase/tutorial/collections/interfaces/list.html)实现，例如[`ArrayList`](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html)or [`LinkedList`](http://docs.oracle.com/javase/7/docs/api/java/util/LinkedList.html)。

或者，您甚至可以只使用一个数组，但将孩子的数量作为参数传递给`TreeNode`. 你知道如果`TreeNode` `a`有 8 个孩子，那么每个孩子最多有 7 个孩子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T00:22:23.887

您应该实现自己的 Tree 对象，该对象由包含子节点数组的节点组成。通过这种方式，您还可以实施 Euristic 方法以从最佳解决方案获得近似距离度量。

# c# - 如何使用正则表达式从每行的某个位置开始捕获多行文本

> ID：13793224
> 
> 赞同：1
> 
> 时间：2012-12-09T23:57:58.223
> 
> 标签：c#, regex

我需要使用正则表达式从每行的某个位置开始捕获多行文本。基本上，我需要跳过一个标签、一个两部分单词`Account Name`和两个标签，但要捕获其余的文本。我正在尝试处理的文本行的格式类似于以下内容。

> `TAB`帐户名称：`TABTAB`用户名 12/3/2012 8:25:52 PM

我用过

```
(?<=Account Name:).* 
```

正则表达式模式来处理文本行，并通过跳过第一个选项卡和两部分单词取得了有限的成功。但是，我无法跳过第二个标签。我结束了以下。

> `TABTAB`用户名 2012 年 12 月 3 日晚上 8 点 25 分 52 秒

我怎样才能完成这项任务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T00:09:12.040

假设 TAB TAB 每行只出现一次：

```
@"\t\t(.*)$" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T01:36:56.073

只需将选项卡添加到lookbehind：

```
@"(?<=Account Name:\t\t).*" 
```

# html - HTML - 如何在后续页面中插入表单？

> ID：13793226
> 
> 赞同：2
> 
> 时间：2012-12-09T23:58:21.770
> 
> 标签：html, forms

假设我有这样的事情：

```
<form method=get action="token.php">
<b>Enter token:</b><br>
<input type="text" name="token"><BR>
<input type="submit" value="Submit">
</form> 
```

并且在用户输入令牌后，他会被带到一个显示运行 token.php 的结果的新页面。如何编辑这个新页面？如果我想在其中输入另一个表格怎么办？

我只是在学习这些东西（完全是初学者）。

非常感谢你

PS 我可以在 .php 文件的中间添加这样的内容吗？

```
<html>
<form method=get action="myPhp.php">
<b>Enter data:</b><br>
<input type="text" name="data"><BR>
<input type="submit" value="Submit">
</form>
</html> 
```

正确的语法是什么样的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T00:16:14.630

将 HTML 代码添加到 PHP 文件有两种主要方法。

首先要做的事情是：所有 PHP 代码都必须介于`<?php`和`?>`. 在 a`?>`和 a 之前`<?php`，您可以编写 HTML 代码，然后将其输出，而无需通过任何 PHP 代码。

另一种输出 HTML 的方法是简单地`echo`在 PHP 中使用。

```
echo "<b>Hello world!</b>"; 
```

那行代码将打印一个粗体的“Hello world！” 您页面上的消息。

无论如何，恕我直言，我想我可以从您的问题中看出您还没有完全掌握 PHP 和 HTML 的概念。在尝试使用 PHP 之前，我建议您尝试做一些 PHP 教程——它是一种完全不同于 HTML 的语言，并且了解 HTML 并不意味着您将能够立即使用 PHP。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T00:02:33.390

您将表单提交给`token.php`。服务器将对此进行解析并返回结果。因此，如果您想修改表单操作的结果，您需要修改`token.php`以包含您想要的表单。

# php - 无法在共享托管服务器上将 Zend 框架包含到我的 php 文件中

> ID：13793230
> 
> 赞同：0
> 
> 时间：2012-12-09T23:59:03.407
> 
> 标签：php, zend-framework

我怎么能不工作？我需要使用 Zend 框架来发送邮件。但是我无法在我的 php 文件中包含该框架。该问题可能是由于即时使用共享托管服务这一事实引起的。

我做了以下

1.  下载了带有 2.x 版框架的 linux tgz 发行版。
2.  解压缩并通过上传文件夹。ftp 到我的共享主机。
3.  我将 Zend 文件夹放在根目录下。
4.  我没有访问 php.ini 文件的权限，所以我创建了一个包含以下内容的新文件。

    ```
    safe_mode = off
    SMTP = localhost
    smtp_port = 26
    sendmail_from = web15.meebox.net
    include_path = /home/sammensp/public_html/Zend/library 
    ```

5.  我将以下代码放入 php 文件中以测试框架是否有效。

    ```
    require_once 'Zend/Mail/Message.php';
    use Zend\Mail;
    $mail = new Mail\Message();
    $mail->setBody('This is the text of the email.');
    $mail->setFrom('domain@web15.meebox.net', 'Sender\'s name');
    $mail->addTo('name@gmail.com', 'Name o. recipient');
    $mail->setSubject('TestSubject');
    $transport = new Mail\Transport\Sendmail();
    $transport->send($mail); 
    ```

问题是它不起作用我收到以下错误。

```
 Warning:  require_once(Zend/Mail/Message.php) [<a href='function.require-
    once'>function.require-once</a>]: failed to open stream: No such file or directory in     
    /home/sammensp/public_html/mobile/test.php on line 23

    Fatal error:  require_once() [<a href='function.require'>function.require</a>]: Failed  
    opening required 'Zend/Mail/Message.php'    
    (include_path='/home/sammensp/public_html/Zend/library') in   
    /home/sammensp/public_html/mobile/test.php on line 23 
```

我的网络应用程序和 test.php 文件位于 /public_html/mobile/test.php 我已将包含路径设置为以下 include_path = /home/sammensp/public_html/Zend/library

你能帮我解决我做错了什么以及我如何解决它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T00:06:35.023

您不能只将 a`php.ini`放在网络服务器根目录中，它不会被加载。使用`.htaccess`（假设您在 apache 服务器上）文件来设置 PHP 设置 ( `php_value include_path ".:/usr/www/your_user_folder/your_website_folder/includes"`) 或`set_include_path()`在您的 php 文件中使用。

您的主机可能会禁用这两种方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T15:38:00.190

除非您需要允许服务器上的所有项目访问该框架，否则您不需要在全局级别包含它。事实上，大多数托管项目的人都无权修改 php.ini 文件（除了喜欢的开发环境）。

ZF 只是一个库文件夹。这与人们将 zend 框架库添加到他们说的 codeigniter 项目或类似项目中的做法非常相似。它被设计为松散耦合的，因此可以以任何您想要的方式使用它。

下载 ZF 并将其上传到 public_html 文件夹中的任何位置或任何位置。使用 set_include_path() 和下面的示例代码：

```
<?php
    // Define relative path to ZendFramework in public_html
    define('ZF_PATH', '/../../../lib/php/zendframework');

    // Define path to application directory
    defined('APPLICATION_PATH') || define('APPLICATION_PATH', realpath(dirname(__FILE__) . '/../application'));

    // Define real path to ZendFramework if it's not yet included in include_path
    if(!strpos(get_include_path(), 'zendframework'))
        define('ZF_REAL_PATH', realpath(APPLICATION_PATH . ZF_PATH));
    else define('ZF_REAL_PATH', '');

    // Updating include_path
    set_include_path(implode(PATH_SEPARATOR, array(ZF_REAL_PATH, get_include_path(),)));

    // Done! the rest of the code might be unnecessary in your case.
    require 'Zend/Application.php'; 

    // Create application, bootstrap, and run
    $application = new Zend_Application(APPLICATION_ENV, APPLICATION_PATH . '/configs/application.ini');
    $application->bootstrap()->run(); 
```

# javascript - 如何获取所选选项的值（如显示的值而不是 value=""）

> ID：13793233
> 
> 赞同：1
> 
> 时间：2012-12-09T23:59:37.267
> 
> 标签：javascript, jquery, html

我有一个选择，我正在尝试检索当前所选选项的显示值，我不是说 value="" 或者`.val()` 说这是我的选择

```
<select id="name" >
<option value="">select all</option>
<option selected="selected" value="1">Text 1</option>
<option value="2">Text 2</option>
<option value="3">Text 3</option>
</select> 
```

假设我正在尝试检索当前选定的“文本 1”的选定值

我试过了

```
$('#name').text(); 
```

但这会返回所有 4 个选项的文本。

有没有更好的办法 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T00:02:56.510

就如此容易：

```
$("#name > option:selected").text(); 
```

或者在纯 JavaScript 中：

```
var selEl   = ​document.getElementById("name")​​,
    selText = selEl.options[selEl.selectedIndex].innerHTML;

console.log(selText); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T00:04:56.437

大概您正在使用 JQuery。你应该能够做到：

```
$("#name").children("[selected]").text(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T00:01:42.980

```
$('option:selected', '#name').text(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T00:02:23.653

你需要`.selectedIndex`像这样操作它的属性：

```
var node = document.getElementById( 'name' ), val;

node.onchange = function() {

    val = this[ this.selectedIndex ].value;

}; 
```

`val`将保存`value`当前选择的元素。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-10T00:02:07.557

我会说`$($('#name')[0].options[$('#name')[0].selectedIndex]).text();`应该给你你想要的。至少，如果您放弃该`.text`位，它会返回一个引用所选选项节点的 jQuery 对象

# windows - 客户端服务器 udp mac 与 windows

> ID：13793237
> 
> 赞同：0
> 
> 时间：2012-12-10T00:00:38.787
> 
> 标签：windows, macos, udp, client-server

我将连接到具有不同平台的 PC：带有窗口的 PC 我在 cygwin 和 MAC 中使用 gcc 编译程序我在终端中使用 gcc 编译。

我从网上尝试程序；当我尝试window作为客户端和mac作为服务器时，windows可以发送，mac可以接收。但是当我尝试将window作为服务器和mac作为客户端时，我认为MAc可以发送（因为在终端中有OK和socket已关闭的消息）但window无法接收。

这是我的程序： 服务器：

```
#include <stdlib.h>
#include <stdio.h>
#include <unistd.h>
#include <errno.h>
#include <string.h>
#include <sys/types.h>
#include <sys/socket.h>
#include <netinet/in.h>
#include <arpa/inet.h>
/* the port users will be connecting to */
#define MYPORT 4950
#define MAXBUFLEN 500 //13

int main(int argc, char *argv[])
{    int sockfd;
/* my address information */
struct sockaddr_in my_addr;
/* connector’s address information */
struct sockaddr_in their_addr;
int addr_len, numbytes;
char buf[MAXBUFLEN];

    if((sockfd = socket(AF_INET, SOCK_DGRAM, 0)) == -1)
{
    perror("Server-socket() sockfd error lol!");
    exit(1);
}
else
    printf("Server-socket() sockfd is OK...\n");

/* host byte order */
my_addr.sin_family = AF_INET;
/* short, network byte order */
my_addr.sin_port = htons(MYPORT);
/* automatically fill with my IP */
my_addr.sin_addr.s_addr = INADDR_ANY;
/* zero the rest of the struct */
memset(&(my_addr.sin_zero), '\0', 8);

if(bind(sockfd, (struct sockaddr *)&my_addr, sizeof(struct sockaddr)) == -1)
{
    perror("Server-bind() error lol!");
    exit(1);
}
else
    printf("Server-bind() is OK...\n");

addr_len = sizeof(struct sockaddr);

if((numbytes = recvfrom(sockfd, buf, MAXBUFLEN-1, 0, (struct sockaddr *)&their_addr, &addr_len)) == -1)
{
    perror("Server-recvfrom() error lol!");
    /*If something wrong, just exit lol...*/
    exit(1);
}
else
{
    printf("Server-Waiting and listening...\n");
    printf("Server-recvfrom() is OK...\n");
}

printf("Server-Got packet from %s\n", inet_ntoa(their_addr.sin_addr));
printf("Server-Packet is %d bytes long\n", numbytes);
buf[numbytes] = '\0';
printf("Server-Packet contains \"%s\"\n", buf);

if(close(sockfd) != 0)
    printf("Server-sockfd closing failed!\n");
else
    printf("Server-sockfd successfully closed!\n");
return 0;
 } 
```

在客户端：

```
 /*senderprog.c - a client, datagram  */
 #include <stdio.h>
 #include <stdlib.h>
 #include <unistd.h>
 #include <errno.h>
 #include <string.h>
 #include <sys/types.h>
 #include <sys/socket.h>
 #include <netinet/in.h>
 #include <arpa/inet.h>
 #include <netdb.h>
 /* the port users will be connecting to */
 #define MYPORT 4950

 int main(int argc, char *argv[ ])
 {
int sockfd;
/* connector’s address information */
struct sockaddr_in their_addr;
struct hostent *he;
int numbytes;

if (argc != 3)
{
    fprintf(stderr, "Client-Usage: %s <hostname> <message>\n", argv[0]);
    exit(1);
}
/* get the host info */
if ((he = gethostbyname(argv[1])) == NULL)
{
    perror("Client-gethostbyname() error lol!");
    exit(1);
}
else
    printf("Client-gethostname() is OK...\n");

if((sockfd = socket(AF_INET, SOCK_DGRAM, 0)) == -1)
{
    perror("Client-socket() error lol!");
    exit(1);
}
else
    printf("Client-socket() sockfd is OK...\n");

/* host byte order */
their_addr.sin_family = AF_INET;
/* short, network byte order */
printf("Using port: 4950\n");
their_addr.sin_port = htons(MYPORT);
their_addr.sin_addr = *((struct in_addr *)he->h_addr);
/* zero the rest of the struct */
memset(&(their_addr.sin_zero), '\0', 8);

if((numbytes = sendto(sockfd, argv[2], strlen(argv[2]), 0, (struct sockaddr *)&their_addr, sizeof(struct sockaddr))) == -1)
{
    perror("Client-sendto() error lol!");
    exit(1);
}
else
    printf("Client-sendto() is OK...\n");

printf("sent %d bytes to %s\n", numbytes, inet_ntoa(their_addr.sin_addr));

if (close(sockfd) != 0)
    printf("Client-sockfd closing is failed!\n");
else
    printf("Client-sockfd successfully closed!\n");
return 0;
 } 
```

有人有解决办法吗？

看5V

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T03:30:24.390

我不得不关闭防火墙

# git - 让 git 撤消任何仅限空格的更改？

> ID：13793241
> 
> 赞同：44
> 
> 时间：2012-12-10T00:01:23.747
> 
> 标签：git

有没有一种简单的方法可以对任何只有空格更改的文件自动执行 git checkout？我正在处理 Windows 和一些从 Eclipse 运行的代码生成，因此我得到了换行符更改和空白更改，它们用噪音阻塞了我的工作流程，并且难以跟踪实际更改。

甚至只是*报告*哪些文件有真正的变化，哪些不是一个开始的好方法，而不是必须为每个文件做一个 diff -w

* * *

## 回答 #1

> 赞同：98
> 
> 时间：2017-08-03T14:22:13.100

## 如果您的更改没有暂存

要暂存不仅仅是空白更改的更改，您可以执行以下操作：

`git diff -U0 -w --no-color | git apply --cached --ignore-whitespace --unidiff-zero -`

之后，要删除所有未暂存的更改（那些仅在空白处不同的更改），您可以执行以下操作：

`git checkout .`

## 如果您的更改是分阶段的

通过执行 a 来取消您的更改，`git reset --mixed`然后从该答案的顶部继续。请注意，这`mixed`是默认模式，可以省略。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-10T03:41:49.623

这很可能是行尾问题；Windows 使用 CRLF（回车 + 换行，或`\r\n`）换行符，而大多数其他系统使用 LF（换行，或`\n`）。幸运的是，Git 可以对文件进行规范化，以便它们在 repo 中*始终*存储为 LF，但在 Windows 上将作为 CRLF 检出。您可以通过在 Windows 上设置`core.autocrlf`为来执行此操作：`true`

```
$ git config --global core.autocrlf true 
```

并在 Mac 和 Linux 上设置`core.autocrlf`为：`input`

```
$ git config --global core.autocrlf input 
```

[此处](https://web.archive.org/web/20121122105231/http://git-scm.com/book/ch7-1.html#Formatting-and-Whitespace)提供了更多信息（向下滚动到标题为**core.autocrlf**的部分）。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2020-01-27T20:36:35.777

## 如果您的更改已提交

（可能有更聪明的方法，但这对我有用）

```
mybranch=master
git checkout -b tmp origin/master

# compute the non-ws diff to mybranch and apply it
git diff -U0 -w --no-color $mybranch | git apply -R --cached --ignore-whitespace --unidiff-zero -

git commit -m "non ws changes"
git reset --hard  # discard all non-staged data 
```

你现在在一个新的“tmp”分支上。您可能需要清理（注意：这会丢失 的历史记录`$mybranch`）

```
git checkout $mybranch
git reset --hard tmp
git branch -D tmp 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-02-20T18:56:29.290

另一种方法是在 unix 或（windows pc 作为特殊安装）上使用 dos2unix 命令来转换行尾并提交和推送

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2020-02-26T08:53:40.863

[rumpel 的回答](http://#answer-59938552)对我来说是正确的解决方法。我只想完成一点：

**如果您的更改已被推送**

一旦你遵循了 rumpel 的程序，**就不要再推你的分支了**。Github 会要求你拉之前，你会再次得到每个空白差异。而是从当前分支创建一个新分支并推送新分支：

```
# From $mybranch
git checkout -b $mybranch-v2
git push --set-upstream origin $mybranch-v2 
```

然后在 GitHub 上关闭并删除 $mybranch

# c++ - 调试断言失败字符串下标超出范围

> ID：13793253
> 
> 赞同：-2
> 
> 时间：2012-12-10T00:02:40.343
> 
> 标签：c++, visual-studio-2010, debugging, hash, assertion

所以我写了一个简单的 Hash 类，当使用 Visual Studio 环境时，我得到一个调试断言错误“表达式：字符串下标超出范围”但是当我在命令提示符下使用 c++ Linker 编译和运行程序时运行良好。错误发生在 h.add("a", "la");

这是代码

```
#include <iostream>
#include <string>
using namespace std;
bool die(const string &msg);

class Hash{
    public:
        Hash( unsigned tablesize, unsigned maxUsed );
        ~Hash();
        bool in( const string & code ) const;
        bool getDescription( string & description, const string & code ) const;
        void add( const string & code, const string & description );
        void changeDescription( const string & code, const string & newDescription );
        void showone(const string &code) const;
        void show() const;
    private:
        struct Data{
            string code;
            string descrip;
        };
        unsigned hash(unsigned val) const;
        unsigned rehash(unsigned val) const;
        static unsigned Hash::partialHash( const string & code );
        static bool prime( unsigned n );
        unsigned findindex(const string &code) const;
        Data *ptr;
        unsigned maxUsed;
        unsigned elements;
        unsigned tablesize;
        unsigned p;
        unsigned p2;
};

Hash::Hash(unsigned size, unsigned maxused){
    if(UINT_MAX-3<size || size<=4 || size<=maxused )
        die("Invalid Constructor");
    for(tablesize=size; !prime(tablesize); tablesize++){}
    ptr=new Data[tablesize];
    elements=0;
    maxUsed=maxused;
    for(p=tablesize; !prime(--p);){}
    for(p2=p; !prime(--p2);){}
    for(unsigned i=0; i<tablesize; i++){
        ptr[i].code="\0";
        ptr[i].descrip="\0";
    }
}

Hash::~Hash(){
    delete[] ptr;
}

bool Hash::in(const string &code)const{
    if(code==ptr[findindex(code)].code)
        return true;
    return false;
}

void Hash::showone(const string &code) const{
 unsigned i=findindex(code);
 cout<<'['<<i<<"]: "<<ptr[i].code<<' '<<ptr[i].descrip<<'\n';
}
void Hash::show() const{
 for(unsigned i=0; i<tablesize; i++)
  cout<<'['<<i<<"]: "<<ptr[i].code<<' '<<ptr[i].descrip<<'\n';
}

bool Hash::getDescription( string & description, const string & code ) const{
    if(in(code)){
        description=ptr[findindex(code)].descrip;
        return true;
    }
    return false;
}

void Hash::changeDescription(const string & code, const string & newdescription ){
    if(in(code)){
        ptr[findindex(code)].descrip=newdescription;
    }else{
        die("code not in table");
    }
}

unsigned Hash::hash(unsigned partialHashValue)const{
    return partialHashValue%p;
}

unsigned Hash::rehash(unsigned partialHashValue)const{
    return partialHashValue%p2+1;
}

unsigned Hash::partialHash( const string & code ){
    return (code[0]*26+code[1])*26+code[2];
}

void Hash::add( const string & code, const string & description ){
    if(in(code)) die("can't add");
    if(elements==maxUsed) die("Overflow");
    unsigned i=findindex(code);
    ptr[i].code=code;
    ptr[i].descrip=description;
    elements++;
}

bool Hash::prime( unsigned n ){
        if( n < 4 )  return n > 1;
        if( n%2 == 0 || n%3 == 0 )  return false;
        for(  unsigned fac = 5, inc = 4;  ;  fac += inc = 6-inc  ){
            if( fac > n/fac )  return true;
            if( n%fac == 0 )  return false;
        }   
    }

unsigned Hash::findindex( const string &code) const{
    unsigned partial=partialHash(code);
    unsigned hashnum = hash(partial);
    if(ptr[hashnum].code=="\0" || ptr[hashnum].code == code) return hashnum;
    unsigned rehashnum = rehash(partial);
    do{
        hashnum = (hashnum + rehashnum) % tablesize;
    }while(  ptr[hashnum].code != "\0" && ptr[hashnum].code != code );
    return hashnum;
}

int main(){
    Hash h(12, 8);
    h.add("LAX", "Space Shuttle Endeavour arrived here 9/21/2012");
    h.add("DEN", "jajaja");
    h.add("gold", "lalalala");
    h.add("Pp", "la");
    h.add("a", "la");
    h.add("b", "la");
    h.add("c", "la");
    h.add("d", "la");
    cout<<"p\n";
    h.showone("LAX");
    cout<<"\n\n";
    h.show();
}

bool die(string const &msg){
 cerr<<"fatal error: "<<msg;
 exit(EXIT_FAILURE);
} 
```

这是输出

```
[0]: gold lalalala
[1]: DEN jajaja
[2]: LAX Space Shuttle Endeavour arrived here 9/21/2012
[3]:
[4]:
[5]: a la
[6]: b la
[7]: Pp la
[8]:
[9]: d la
[10]: c la
[11]:
[12]: 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T00:08:40.747

在 partialHash 函数中，code[2] 在 code 只包含 "a" 时是越界访问

```
unsigned Hash::partialHash( const string & code ){
    return (code[0]*26+code[1])*26+code[2];
} 
```

您可以使用 at() 函数并捕获抛出的异常

```
 unsigned Hash::partialHash( const string & code )
    {
        try {
          return (code.at(0)*26+code.at(1))*26+code.at(2);
        } 
        catch(std::exception& e){
          std::cout << e.what() << std::endl;
        }
        return 0;
    } 
```

# ruby - 如何确定 ruby gem 是否实际上是原生 C 扩展？

> ID：13793254
> 
> 赞同：5
> 
> 时间：2012-12-10T00:02:48.207
> 
> 标签：ruby, rubygems

如何确定 ruby​​ gem 是否实际上是原生 C 扩展？

运行`gem install some_gem`时，我可以看到它何时尝试构建本机扩展，但是有没有办法在安装之前确定哪些 gem 是本机 C 扩展？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T01:15:41.683

您可以检查 gem 规范以查看是否[`extensions`](http://guides.rubygems.org/specification-reference/#extensions)已定义。您必须下载 gem 或检查其源代码才能执行此操作，但使用一些 unix-fu 以编程方式执行此操作并不难：

```
curl -L <gem-url> | tar xOf - metadata.gz | gunzip | ruby -r yaml -e 'p YAML.load($stdin.read).extensions.any?' 
```

让我们比较一下[bson](https://rubygems.org/gems/bson)和[bson_ext](https://rubygems.org/gems/bson_ext)（因为它们是我能想到的同一个 gem 的第一个非 C 扩展和 C 扩展版本）：

```
% curl -L https://rubygems.org/downloads/bson-1.8.0.gem | tar xOf - metadata.gz | gunzip | ruby -r yaml -e 'p YAML.load($stdin.read).extensions.any?'
false

% curl -L https://rubygems.org/downloads/bson_ext-1.8.0.gem | tar xOf - metadata.gz | gunzip | ruby -r yaml -e 'p YAML.load($stdin.read).extensions.any?'
true 
```

[您可以使用RubyGems API](http://guides.rubygems.org/rubygems-org-api/)自动了解 gem 的当前版本：

```
curl https://rubygems.org/api/v1/gems/bson.yaml | ruby -r yaml -e 'p YAML.load($stdin.read)["version"]' 
```

# java - 找出有多少 Runnables 在 EventQueue 上等待

> ID：13793257
> 
> 赞同：2
> 
> 时间：2012-12-10T00:03:01.613
> 
> 标签：java, multithreading, event-dispatch-thread, eventqueue

有什么方法可以确定EventQueue 中当前有多少Runnables 排队？...我的意思是系统EventQueue，即所有要在EDT 中运行的Runnables。也许会弄乱队列？

我想做的是优先考虑 GUI Runnables ......如果出现用户驱动的 GUI 事件，它应该立即执行，在任何排队的 Runnables 之前跳过队列（顺便说一下，它们都将关注修改不可见的 Swing 组件。注意最新的 Swing 指南：所有 Swing 组件都必须在 EDT 上更改，即使是隐藏的）。

有可能使用“紧急”和“非紧急”Runnables 建立一个简单的、人为的队列：每个 Runnable 可以增加一个“可观察的”AtomicInteger 计数器，然后每个 Runnable 的执行都可以递减它......并且 BlockingQueue 将确保仅当 BlockingQueue 大小更改为 1（或者可能是 2 或 0）时，非紧急 Runnables 才会提交给“invokeLater”。本能让我认为这样的安排会引入相当多的延迟。

另外，能够直接干扰 EDT 自己的队列会更好。我应该推出自己的 EDT 队列吗？那可能吗？

注意显然必须从非 EDT 线程中观察 EDT 队列的状态（或对其进行干预）。据我所知，可能存在“线程可见性”问题......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T01:01:23.060

我不认为这是可能的。代码可用。您可以覆盖它甚至重写它，但实际的 EventQueue 是由系统设置的；除非通过一些已定义的方法，否则您无法获得它。您当然可以自己设置并使用它，但所有 Swing 组件都将使用官方 EQ，最终您将执行多线程 Swing。（根据个人经验，这非常有效，除了偶尔的、加重的、莫名其妙的奇怪行为。我的建议：除非你在 EventQueue 上，否则永远不要*考虑Swing 组件。）*

（如果您确实看过它：1.4 EventQueue 类是一段漂亮的代码。1.7 似乎使用线程安全、非阻塞的跳过列表而不是旧的等待/通知。我相信它很快，但代码一个怪物。如果您出于任何原因确实想构建自己的队列，请尝试获取 1.4 代码作为起点。Java 应该有一个通用的执行队列类，但我还没有找到。）

你真的不应该对 EventQueue 的性能有太多的麻烦。它每秒使用的 CPU 应该少得多。除非您将大量 CPU 密集型可运行文件放入其中，否则您不必担心它。如果是，您可能会考虑将工作放在另一个线程中。（尽管偶尔放慢 UI 似乎是为了将所有内容都保留在一个线程中而付出的小代价。）无论如何，重新排序队列可能无济于事。您想要快速处理的 runnable 必然会在一些大计算开始后立即到达。

如果您只想按顺序运行自己的可运行文件，您可以设置一个类来保存可运行文件的排序列表。它会有自己的可运行文件，您可以使用 InvokeLater 将其放入 EQ。当它运行时，它反过来可以按照您想要的顺序运行它的每个可运行文件。但这仅在您需要为自己的目的排序的可运行文件时才有帮助。

如果您只使用 Swing 组件，无论是可见的还是其他的，您可能会使用 InvokeLater 设计的 EQ 来处理所有事情。

# c# - 在 webbrowser c# 应用程序中禁用 Cookie 读/写

> ID：13793261
> 
> 赞同：4
> 
> 时间：2012-12-10T00:03:14.023
> 
> 标签：c#, cookies, webbrowser-control, session-cookies, httpcookie

我希望网站无法在 webbrowser c# 控制应用程序中读取 cookie 或写入新的 cookie。我宁愿在 webbrowser c# 应用程序运行时禁用所有网站的所有读/写 cookie 操作，如果没有，那么我有一个应该禁用读/写 cookie 操作的网站列表。

我正在使用 .NET 2.0 框架，但也可以使用 4.5

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T00:17:05.813

您不能仅在您的网络浏览器控件上禁用 cookie。该控件本质上是一个嵌入式 Internet Explorer，并共享用户的 Internet Explorer 设置。如果您不介意在 Internet Explorer 的所有其他实例上阻止 cookie（也许您在其余的浏览中使用 Chrome 或 Firefox），您可以执行以下操作：

（来自：[http](http://social.msdn.microsoft.com/Forums/en-US/winforms/thread/90834f20-c89f-42f9-92a8-f67ccee3799a/) ://social.msdn.microsoft.com/Forums/en-US/winforms/thread/90834f20-c89f-42f9-92a8-f67ccee3799a/ ）

> 在 WebBrowser 控件中阻止 Cookies 可以采取以下步骤，其实和在 IE 中阻止 Cookies 是一样的。
> 
> 1.  在IE的“工具”菜单下选择“Internet选项”；
> 2.  选择“隐私”选项卡。
> 3.  单击“设置”组框中的“高级...”按钮。
> 4.  选中“覆盖自动 cookie 处理”选项。
> 5.  检查两个“阻止”选项。
> 6.  点击“确定”

您也可以在访问页面后删除所有 cookie，但我认为这不会实现您完全匿名的目标。

我做了一点挖掘，我认为您可以使用[InternetSetOption](http://msdn.microsoft.com/en-us/library/windows/desktop/aa385114%28v=vs.85%29.aspx)和[INTERNET_SUPPRESS_COOKIE_PERSIST](http://msdn.microsoft.com/en-us/library/windows/desktop/aa385328%28v=vs.85%29.aspx)标志。根据文档，这仅适用于 Internet Explorer 8 及更高版本。

```
private const int INTERNET_OPTION_SUPPRESS_BEHAVIOR = 3; //INTERNET_SUPPRESS_COOKIE_PERSIST - Suppresses the persistence of cookies, even if the server has specified them as persistent.

[DllImport("wininet.dll", SetLastError = true)]
private static extern bool InternetSetOption(IntPtr hInternet, int dwOption, IntPtr lpBuffer, int lpdwBufferLength); 
```

然后，当您初始化应用程序时，请尝试：

```
InternetSetOption(IntPtr.Zero, INTERNET_OPTION_SUPPRESS_BEHAVIOR, IntPtr.Zero, 0); 
```

希望这能让你走上正确的轨道。也可以看看：

[如何从 WebBrowser Control 中为任意域设置和删除 cookie](https://stackoverflow.com/questions/1688991/how-to-set-and-delete-cookies-from-webbrowser-control-for-arbitrary-domains)

[如何使用 InternetSetOption？](https://stackoverflow.com/questions/6353715/how-do-i-use-internetsetoption)

[在 Winform 应用程序中使用 WinInet 清除多个 WebBrowser 控件的 Cookie 缓存](https://stackoverflow.com/questions/8880281/clear-cookies-cache-for-multiple-webbrowser-control-with-wininet-in-winform-appl)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-05-26T14:23:06.493

您可以将[InternetSetOption](https://technet.microsoft.com/en-us/library/aa385114)与选项标志[INTERNET_OPTION_SUPPRESS_BEHAVIOR](https://technet.microsoft.com/en-us/library/aa385328)一起使用。此选项标志应与 INTERNET_SUPPRESS_COOKIE_PERSIST 选项一起使用。

```
public static class NativeMethods
{
    [DllImport("wininet.dll", SetLastError = true)]
    private static extern bool InternetSetOption(IntPtr hInternet, int dwOption, 
                                                 IntPtr lpBuffer, int lpdwBufferLength);

    public static void SuppressCookiePersist()
    {
        int dwOption = 81; //INTERNET_OPTION_SUPPRESS_BEHAVIOR
        int option = 3; // INTERNET_SUPPRESS_COOKIE_PERSIST

        IntPtr optionPtr = Marshal.AllocHGlobal(sizeof(int));
        Marshal.WriteInt32(optionPtr, option);

        InternetSetOption(IntPtr.Zero, dwOption, optionPtr, sizeof(int));
        Marshal.FreeHGlobal(optionPtr);
    }
} 
```

该设置对*每个*进程都有效，因此可以在任何地方调用该方法，但在`webBrowser.Navigate()`.

**注意：**
- 需要 Internet Explorer 8.0 或更高版本。
- 重置使用`int option = 4; //INTERNET_SUPPRESS_COOKIE_PERSIST_RESET`

# cgi - 是否可以通过 CGI 控制服务器？

> ID：13793262
> 
> 赞同：0
> 
> 时间：2012-12-10T00:03:27.697
> 
> 标签：cgi

是否可以通过 CGI 控制服务器？例如，运行服务器的windows update，打开服务器的一些应用程序，关闭服务器计算机。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T00:07:53.457

取决于哪个服务器，以及 CGI 所有者在那里拥有的访问权限。如果你能找到（或编码）一个正确的可执行文件，你可以做任何你有权做的事情。CGI 只是一个非常特殊的协议，Web 服务器通过它向外部可执行文件传递数据和从外部可执行文件传递数据。

例如，如果您租用共享的 Linux 主机，您将无法关闭计算机（因为您没有这样做的权限）；并且您将无法更新 Windows（因为，什么 Windows？）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T00:06:41.927

是的，这是可能的。CGI 在服务器上执行一个 EXE，因此您可以对其进行编程以执行您想做的任何事情

# python - 检查用户输入是否为整数

> ID：13793264
> 
> 赞同：-1
> 
> 时间：2012-12-10T00:04:52.777
> 
> 标签：python, list

我当前的代码：

```
mylist = [0] * 7     
for x in range(7):
        sales=-1
        while (sales<0):
            sales = float(input("Sales for day {0}:".format(x)))
            mylist[x] = sales

            if  sales < 0:
                print ("Sorry,invalid. Try again.")

 print (mylist)

best = max(mylist)
worst = min(mylist)
average = sum(mylist)/len(mylist)
total = sum(mylist)

print ("Your best day had", best, "in sales.")
print ("Your worst day had", worst, "in sales.")
print ("Your average daily sales were:", format(average,'.2f'))
print ("Your total sales were:", format(total, '.2f')) 
```

当我运行它时，我得到了这个：第一个有效，我的问题是关于我第二次运行它

```
Sales for day 0: 5
Sales for day 1:4
Sales for day 2:6
Sales for day 3:7
Sales for day 4:8
Sales for day 5:2
Sales for day 6:3
[5.0, 4.0, 6.0, 7.0, 8.0, 2.0, 3.0]
Your best day had 8.0 in sales.
Your worst day had 2.0 in sales.
Your average daily sales were: 5.00
Your total sales were: 35.00

Sales for day 0: 5
Sales for day 1:4
Sales for day 2:3
Sales for day 3:-4
Sorry,invalid. Try again.
Sales for day 3:four
Traceback (most recent call last):
line 44, in <module>
sales = float(input("Sales for day {0}:".format(x)))
ValueError: could not convert string to float: 'four' 
```

我该如何重新编码，以便 python 也会重新提示用户输入另一个整数，如果他们决定说“四”而不是数字的话，非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T00:10:48.077

您可以使用`try .. except`. 这是一个获取浮点数或再次提示的函数：

```
def get_float(prompt):
    while True: 
        try:
            return float(input(prompt))
        except ValueError:
            print "invalid input, try again!" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T00:19:16.203

我建议做一些类似于这个[答案](https://stackoverflow.com/a/3734681/355230)中所做的事情，基本上可以归结为：
               使用`try..except`块

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T00:34:47.287

使用一个函数：

```
def get_int():
   sales = input("Enter a number :")
   if type(sales) == int or type(sales) == long: # Python 3.x doesn't have long-type objects
      # code to do whatever with sales
   else:
      print("Invalid input. Try again.")
      get_int() 
```

它会一直调用它，直到你得到一个有效的输入。

# liferay - Liferay 无法自动将用户分配给组织？那怎么办？

> ID：13793266
> 
> 赞同：0
> 
> 时间：2012-12-10T00:04:54.157
> 
> 标签：liferay, organization

与 Liferay 合作。（实际上 Liferay 正在“反对”我。）

我有一个法语、英语和德语社区，它们是一个整体“常规组织”的“位置”。

当新用户选择我网站的法语分支并注册时，他/她如何自动分配到法语组织？

编辑：换句话说，如何自动将新注册的用户分配给组织（取决于他/她从哪个页面注册）？

讽刺侧节点：我真的需要给所有新用户发送电子邮件，询问他/她从哪个语言分支注册，以便手动将该人分配到适当的组织吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T20:57:50.720

您的问题比技术更具功能性，因此我将尝试为您提供解决方案的高级描述：

您可以在 User 对象上使用模型侦听器（onAfterCreate 方法）通过 UserLocalService.addOrganizationUsers() 以编程方式添加所需的组织。可以根据在用户对象上定义并显示在注册页面上的自定义字段 (expando) 来选择组织。

否则，您可以在 struts /login/create_account 操作中覆盖 com.liferay.portlet.login.action.CreateAccountAction 并在您的类中实现自定义逻辑，根据页面 groupId（通过请求获得）将用户添加到组织中。

# ruby-on-rails - facebook 的 ominauth 不与 heroku 合作

> ID：13793269
> 
> 赞同：0
> 
> 时间：2012-12-10T00:05:59.267
> 
> 标签：ruby-on-rails, facebook, heroku, omniauth

当我在本地托管时，使用 Fb 登录效果很好，但现在我遇到了问题，因为它在 heroku 上。我已经将 FB 上与我的应用关联的域从 localhost:3000 更新为 myapp.herokuapp.com

我还检查了这个线程[omniauth with facebook not working on production](https://stackoverflow.com/questions/5978184/omniauth-with-facebook-not-working-on-production)，并尝试将'client_options'哈希添加到我的初始化文件中，但仍然遇到问题。我不知道这是否相关，但是当我尝试导航到 /usr/lib/ssl/certs/ca-certificates.crt 时，我收到“没有这样的文件或目录”错误。

[当我在我的应用程序（ http://playedbyme.herokuapp.com/](http://playedbyme.herokuapp.com/) ）上单击登录 FB 时，我收到一个回调错误。

这是我的 OmniAuth 初始化程序文件的样子：

```
 Rails.application.config.middleware.use OmniAuth::Builder do
    provider :facebook, 'MY_APP_ID', 'MY_SECRET_KEY',
      {:client_options => {:ssl => {:ca_file => '/usr/lib/ssl/certs/ca-certificates.crt'}}}
  end 
```

更新：我认为这是我的数据库的某种问题。当我运行“heroku run rake db:migrate”时出现错误

```
 rake aborted!
   An error has occurred, this and all later migrations canceled:
   PG::Error: ERROR:  column "id" of relation "parties" already exists
   : ALTER TABLE "parties" RENAME COLUMN "party_id" TO "id" 
```

但是，我的派对表中没有名为 party_id 的列

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T00:25:23.567

您需要确保您的 CA 证书路径正确。您可以通过运行以下命令在您的 heroku 服务器上进行检查：

```
heroku run bash 
```

然后运行 ​​openssl 以显示正确的路径：

```
$ openssl version -a
 OpenSSL 1.0.0e 6 Sep 2011 
 OPENSSLDIR: "/usr/lib/ssl" 
```

您应该在 $OPENSSLDIR/certs/ca-certificates.crt 找到 ca_certificates.crt 文件

确保您还`scope`按照[omniauth设置](https://github.com/intridea/omniauth/wiki/Setting-up-SSL-certificate-locations-in-Linux)在以下位置指定了您的Facebook权限`config/initializers/omniauth.rb`：

```
Rails.application.config.middleware.use OmniAuth::Builder do
  provider :facebook, 'YOUR_APP_ID', 'YOUR_SECRET_KEY',
           {:scope => 'PERMISSION_1, PERMISSION_2, ETC', :client_options => {:ssl => {:ca_file => '/usr/lib/ssl/certs/ca-certificates.crt'}}}
end 
```

还要确保在更改此文件后重新启动 rails。

**编辑**

要解决您的数据库问题，您可能需要查看重置您的数据库并重新创建它：

```
heroku pg:reset DATABASE --confirm YOUR_APP_NAME
heroku run rake db:setup
heroku restart
heroku open 
```

# python - 创建 .csv 文件时出现 UnicodeEncodeError

> ID：13793270
> 
> 赞同：1
> 
> 时间：2012-12-10T00:06:03.480
> 
> 标签：python, csv, urllib2

我正在尝试使用已从 Twitter 搜索 API 存储到列表中的数据创建一个 .csv 文件。我已经使用我选择的关键字（在本例中为“reddit”）保存了最后 100 条推文，并且我正在尝试将每条推文保存到 .csv 文件中的一个单元格中。我的代码如下，我返回的错误是：

`UnicodeEncodeError: 'ascii' codec can't encode character u'\u2019' in position 0: ordinal not in range(128)`

如果有人知道我能做些什么来解决这个问题，将不胜感激！

```
import sys
import os

import urllib
import urllib2
import json
from pprint import pprint
import csv

import sentiment_analyzer

import codecs

class Twitter:
    def __init__(self):
        self.api_url = {}
        self.api_url['search'] = 'http://search.twitter.com/search.json?'

    def search(self, params):

        url = self.make_url(params, apitype='search')
        data = json.loads(urllib2.urlopen(url).read().decode('utf-8').encode('ascii',     'ignore'))

        txt = []
        for obj in data['results']:
            txt.append(obj['text'])

        return '\n'.join(txt)

    def make_url(self, params, apitype='search'):

        baseurl = self.api_url[apitype] 
        return baseurl + urllib.urlencode(params)

if __name__ == '__main__':
    try:
        query = sys.argv[1]
    except IndexError:
        query = 'reddit'

    t = Twitter()

    s = sentiment_analyzer.SentimentAnalyzer()

    params = {'q': query, 'result_type': 'recent', 'rpp': 100}

    urlName = t.make_url(params)
    print urlName
    txt = t.search(params)

    print s.analyze_text(txt)

    myfile = open('reddit.csv', 'wb')
    wr = csv.writer(myfile, quoting=csv.QUOTE_MINIMAL)
    wr.writerow(txt) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T00:10:43.727

来自[`csv`](https://docs.python.org/2/library/csv.html#csv)模块的 Python 2 文档：

> **笔记**
> 
> 此版本的 csv 模块不支持 Unicode 输入。此外，目前还有一些关于 ASCII NUL 字符的问题。因此，为了安全起见，所有输入都应该是 UTF-8 或可打印的 ASCII；请参阅示例部分中的[示例](http://docs.python.org/2/library/csv.html?highlight=csv#csv-examples)。

也就是说，您可以`.csv`使用 Python 的内置 Unicode 字符串支持自己解析文件而没有太大困难——也有这个[答案](https://stackoverflow.com/questions/5020446/python-a-resilient-actually-working-csv-implementation-for-non-ascii)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T01:14:23.897

你意识到这种问题正是 Python 3 背后的原因。

我假设您有充分的理由坚持使用 Python 2 而不是 Python 3。也许您正试图将其部署在为您提供 Python 2.7 的托管站点上，仅此而已，或者您正在运行 Python 的古老操作系统3还没有被移植到，或者其他什么。

但如果没有，只需切换。Python 2 中的`csv`模块不处理 Unicode，即使您明确编码/解码，也会有一些奇怪的怪癖；Python 3 中的一个全是 Unicode，并且依赖于底层`file`对象来处理底层字符集。

您将需要更改几件事，但`2to3 -w twitter.py`会处理所有这些，除了可能删除`b`from `open('reddit.csv', 'wb')`。

# checkbox - Knockout.js 可写计算布尔可观察绑定到复选框 - 不可靠的属性设置

> ID：13793274
> 
> 赞同：2
> 
> 时间：2012-12-10T00:06:34.720
> 
> 标签：checkbox, knockout.js, computed-observable

我有一个复选框，它以前直接绑定到我的视图模型上的可观察属性。我在所有视图模型上使用了一个通用的脏标志，它监视视图模型上所有可观察属性的变化。

现在对于一个属性，如果用户在取消设置底层可观察对象*之前*尝试取消选中复选框，我希望显示确认警报。我试图将其实现为一个可写的计算 observable，它像这样包装 observable：

```
function VM() {
    var self = this;

    self.SelectedInternal = ko.observable(false);

    self.selected= ko.computed({
        read: function () {
            return self.SelectedInternal();
        },
        write: function (value) {
            alert('Clicked'); // To demonstrate problem
            if (value === false) {
                if (confirm('Are you sure you wish to deselect this option?')) {
                    self.SelectedInternal(value);
                }          
            }
        }
    });
}

var vm = new VM();

ko.applyBindings(vm); 
```

我所看到的（在 Firefox 和 IE 中）是，当我将 SelectedInternal 可观察值默认为 false 时，“selected”写入函数仅在我每次选中复选框时触发，而不是在我取消选中它时触发。如果我将 SelectedInternal 可观察值默认为 true，那么我第一次取消选中它时 write setter 会执行，但不会在后续取消选中时执行。

这是一个要演示的小提琴：

[http://jsfiddle.net/xHqsZ/18/](http://jsfiddle.net/xHqsZ/18/)

这里发生了什么？有没有更好的方法来实现这一目标？

更新：这种方法可能无论如何都行不通，因为我无法钩入原始点击以返回 false，并且如果用户在确认框中选择取消，则将 observable 重置为 true 似乎没有采取影响。但我仍然想知道为什么计算的 setter 本身没有按预期运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T02:41:56.003

到目前为止，我已经实现了这一点（为简单起见，属性重命名）：

```
<input type="checkbox" data-bind="checked: vm.optionComputed, click: vm.toggleOption" /> 
```

在视图模型中：

```
self.optionComputed = ko.computed({
    read: function () {
        return self.Option();
    },
    write: function (value) {
    }
});

self.toggleOption = function (vm, event) {
    var checkBox = $(event.target);
    var isChecked = checkBox.is(':checked');

    if (!(!isChecked && !confirm('Are you sure?'))) {
        self.Option(isChecked);
    }    
}; 
```

当您选择“确定”取消选择时，有一个轻微的故障，复选框（已被单击清除）在最终取消选中之前再次短暂地显示为选中状态。但是在确认正确之前防止可观察到的变化的行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T01:00:40.850

查看[http://knockoutjs.com/documentation/computedObservables.html](http://knockoutjs.com/documentation/computedObservables.html)上的文档。

当读取函数的值发生更改时，将调用写入函数。请参阅文档中的示例 #1。

我在 write 函数中所做的一件事是设置其他可观察值。例如，一个复选框可清除组中的所有其他复选框。我只是通过更新 write 函数中的那些 observables 来做到这一点。

* * *

***编辑***

我整理了一个小提琴，展示了如何做上一段中描述的事情 - [http://jsfiddle.net/photo_tom/xHqsZ/22/](http://jsfiddle.net/photo_tom/xHqsZ/22/)。使其工作的计算函数是

```
self.clearAll = ko.computed({
    read: function() {
        return !(self.option1() || self.option2() || self.option3());
    },
    write: function(value) {
        alert('Clicked');
        self.option1(false);
        self.option2(false);
        self.option3(false);

    }
}); 
```

* * *

***编辑#2*** 回答关于想要手动确认 false 到 true 检查状态问题的评论。

处理此问题的最简单方法是使用自定义活页夹。关键部分是注册自定义更改事件处理程序。在该函数内部，您可以询问用户是否真的要将复选框设置为 true。

```
ko.bindingHandlers.checkConfirm = {
    init: function(element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {

        //handle the field changing
        ko.utils.registerEventHandler(element, "change", function() {
            // get the current observable value.
            var value = valueAccessor();
            var valueUnwrapped = ko.utils.unwrapObservable(value);

            if (!valueUnwrapped && element.checked) {
                var r = confirm("Confirm Setting value to true");
                if (r) {
                    value(true);
                    return;
                } else {
                    // not okayed, so clear cb.
                    element.checked = false;
                }
            }
            value(false);
        });
    },
    update: function(element, valueAccessor) {
        // use default ko code to update checkbox
        ko.bindingHandlers.checked.update(element, valueAccessor);
    }
}; 
```

更新的小提琴位于[http://jsfiddle.net/photo_tom/xHqsZ/32/](http://jsfiddle.net/photo_tom/xHqsZ/32/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-21T18:50:52.207

我还建议使用自定义敲除绑定，但请确保重新使用/继承完整的 ko.bindingHandlers.checked 绑定功能，以从其旧版浏览器的兼容性处理中获利：

```
ko.bindingHandlers.confirmedChecked = {
    'after': ['value', 'attr'],
    'init': function (element, valueAccessor, allBindings)
    {
      ko.utils.registerEventHandler(
        element,
        'click',
        function(event)
        {
            if (
                element.checked &&
                !confirm('Are you sure you want to enable this setting?')
            )
            {
                if (event.stopImmediatePropagation)
                {
                    event.stopImmediatePropagation();
                }

                element.checked = false;
            }
        }
    );

    ko.bindingHandlers.checked.init(element, valueAccessor, allBindings);
    }
}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T19:52:16.083

尽管在不同的情况下，我遇到了同样的问题。（我试图使用复选框对列表进行大规模更新。）在查看了此处的答案后，我决定放弃计算的已检查绑定，而是使用可观察的绑定和订阅进行更新：

```
$(document).ready(function() {
    function VM() {
        var self = this;
        self.items = ko.observableArray([
            { name: "Foo", active: ko.observable(true) },
            { name: "Bar", active: ko.observable(true) },
            { name: "Bas", active: ko.observable(true) }
        ]);
        self.allActive = ko.observable(true);
        self.allActive.subscribe(function(value) {
            if(self.allActiveCanceled) {
                self.allActiveCanceled = false;
                return;
            }
            if(!confirm('Really?')) {
                window.setTimeout(function() {
                    self.allActiveCanceled = true;
                    self.allActive(!value);
                }, 1);
                return;
            }
            var items = self.items();
            for(var i = 0, l = items.length; i < l; i++) {
                items[i].active(value);   
            }
        });
        self.allActiveCanceled = false;
    }
    var vm = new VM();
    ko.applyBindings(vm);
}); 
```

这是相关标记的小提琴：http: [//jsfiddle.net/makeblake/dWNLA/](http://jsfiddle.net/makeblake/dWNLA/)

setTimeout 和 cancelled 标志感觉有点像 hack，但它完成了工作。

# cakephp - cakePHP 没有在用户/组上添加 aro 添加

> ID：13793275
> 
> 赞同：1
> 
> 时间：2012-12-10T00:06:37.387
> 
> 标签：cakephp, acl

我正在尝试在我的应用程序上启动并运行 aco's / aro。cakePHP 教程说当我添加用户时，它应该自动添加到 aros 表中，但它不起作用。

用户模型

```
class User extends AppModel {
    var $name = 'User';
    public $belongsTo = array('Group');
    public $actsAs = array('Acl' => array('type' => 'requester'));

    function beforeFilter() {
            parent::beforeFilter(); 
            $this->Auth->allowedActions = array('*');
    }

    public function parentNode() {
        if (!$this->id && empty($this->data)) {
            return null;
        }
        if (isset($this->data['User']['group_id'])) {
            $groupId = $this->data['User']['group_id'];
        } else {
            $groupId = $this->field('group_id');
        }
        if (!$groupId) {
            return null;
        } else {
            return array('Group' => array('id' => $groupId));
        }
    }   
    public function afterSave() {
        $this->Aro->create();
        $this->Aro->save(array('alias'=>$this->field('username')));
    }       
} 
```

不应该线

```
 public $actsAs = array('Acl' => array('type' => 'requester')); 
```

执行 cakePHP 魔术并自动创建 ARO？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T18:06:56.200

假设您的数据库有名为“组”和“用户”的表，我相信 afterSave() 中的代码是不必要的。设置`$actsAs`后，您不必调用任何 Aro 方法。

# javascript - 使用JS函数调用Ajax，配合ASP.NET控件

> ID：13793277
> 
> 赞同：0
> 
> 时间：2012-12-10T00:06:46.107
> 
> 标签：javascript, asp.net, ajax, webforms

我来自 PHP 背景，所以我习惯于使用 PHP 文件来处理我所有的 ajax 调用。

最近向我介绍了 ASP.NET 控件和一般环境。

我想知道，当应该从 JavaScript 文件调用它们时，处理 ajax 请求的正确方法是什么？

此外，如果您有比 AJAX（使用 ASP.NET）更好的选择，我希望看到您的小型实现，如果可能的话，使用它。

谢谢！盖伊

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T15:43:50.777

我已经看到了很多 ASP.NET 的 ajax 实现......但我认为最好的是我自己的......：D

只需像这样制作一个javascript函数：

```
<script type="text/javascript">
    function callasync(url, id_contenedor) {
        var ajax = false;

        if (window.XMLHttpRequest) {
            //Mozilla, Safari, etc 
            ajax = new XMLHttpRequest();
        }
        else if (window.ActiveXObject) {
            //IE       
            try {
                ajax = new ActiveXObject("Msxml2.XMLHTTP");
            }
            catch (e) {
                //Versión antigua    
                try {
                    ajax = new ActiveXObject("Microsoft.XMLHTTP");
                }
                catch (e) {
                }
            }
        }
        else
            return false;

        if (id_contenedor != '') {
            document.getElementById(id_contenedor).innerHTML = "<table width='100%' height='100%'><tr><td style='text-align: center; vertical-align: center;'><a class='LabelInfo'>Whait...</a><br /><img src='Imagenes/Esperar.gif' /></td></tr></table>";
        }

        ajax.onreadystatechange = function () {
            pageload(ajax, id_contenedor);
        }

        ajax.open('GET', url, true);
        ajax.send(null);
    }

    function pageload(ajax, id_contenedor) {
        if (ajax.readyState == 4 && (ajax.status == 200 || window.location.href.indexOf("http") == -1))
            if (id_contenedor != '') {
                document.getElementById(id_contenedor).innerHTML = ajax.responseText;
                ResizeCanvas();
            }
    }
</script> 
```

然后使用 url 和 div 的 ID 调用函数“callasync”...

callasync('mypage.aspx?QS_KEY=123', 'divId');

在 ASP.NET 代码隐藏中... 像这样覆盖 Render 方法：

```
protected override void Render(HtmlTextWriter writer)
{
    if (Request.QueryString["QS_KEY"] != null)
    {
        //render what you want.
    }
    else
    {
        base.Render(writer);
    }
} 
```

# javascript - MVC3：使用 javascript 克隆使用模型的 HTML 元素

> ID：13793279
> 
> 赞同：0
> 
> 时间：2012-12-10T00:07:12.707
> 
> 标签：javascript, asp.net-mvc-3, clone, html.dropdownlistfor

是否可以使用 Javascript 方法 clone() 来克隆 mvc html 元素，例如使用模型定义的下拉列表？

我有一个包含模型选项的下拉列表；当用户单击按钮时，我想添加一个类似的下拉列表。我的下拉列表定义为

```
<div id="parent">
    <div id="id">
        @Html.DropDownListFor(m =>m.mymodel)
    </div>
</div> 
```

我为我的 JS 添加了这样的代码

```
var new = document.getElementById('id').cloneNode( true );
document.getElementById( 'parent' ).appendChild( new ); 
```

但这不起作用。如果我不能使用克隆，我还能如何实现呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T00:15:09.230

您不能将`new`其用作变量名——这是 Javascript 中的保留字。您的方法应该有效，但请注意该`id`属性在 HTML 文档中必须是唯一的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-10T01:17:04.557

我会使用 Jquery 来做到这一点：

```
 // get the content
 var content= $('#id').html();
 $('#parent').append(content); 
```

请记住，元素的名称和 ID 也会被复制。在尝试检索元素中的项目时，这可能会导致冲突。

# php - 无法使用循环回显表格行，而数据在页面上未对齐

> ID：13793280
> 
> 赞同：1
> 
> 时间：2012-12-10T00:07:16.717
> 
> 标签：php, mysql

我希望这看起来不是一个愚蠢的问题 - 我已经坐了大约半个小时试图调整下面的代码以使其按预期工作，但到目前为止还没有运气......

基本上，下面的代码旨在形成“区域”页面的基础，该页面链接到每个区域的页面。然而，在页面上运行时，没有从数据库中提取的第一个区域名称的超链接，因此链接的其余页面都被一行数据所淘汰，即：

**地区**

边框 - 未创建链接

Central - 链接到 courses.php?id=borders

高地 - 链接到 courses.php?id=central

西部 - 链接到 courses.php?id=highlands

等等

等等等等

我之前没有太多将数组行数据嵌入到任何类型的链接中的经验，所以也许我只需要调整语法，任何指针都会非常感激。

```
 $query = "SELECT * FROM regions ORDER BY region_name";

    $result = mysql_query($query);
    if (!$result) die ("Database access failed: " . mysql_error());

    while($row = mysql_fetch_array($result)){

    echo $row['region_name'];

    echo "<a href='courses.php?id=".$row['region_name']."'</a>";

    echo "</br>";

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T00:12:23.333

`a`可能是因为您的标签中没有任何内容

试试这样的，

```
echo '<a href="courses.php?id=' . $row['region_name'] . '">' . $row['region_name'] . '</a>"; 
```

# python - 强制 Django 将英语显示为后备

> ID：13793281
> 
> 赞同：2
> 
> 时间：2012-12-10T00:07:22.120
> 
> 标签：python, django, translation, locale

我刚刚通过本教程在 Django 中设置语言：http: [//devdoodles.wordpress.com/2009/02/14/multi-language-support-in-a-django-project/](http://devdoodles.wordpress.com/2009/02/14/multi-language-support-in-a-django-project/)

既然我已经拥有它并且可以正常工作，我发现如果我没有用户的语言环境，它将默认显示消息 ID。

因为我不打算支持全世界的每个语言环境，我可以将它设置为默认显示英语语言环境吗？现在我的网站对德国人说“标题”而不是网站的名称。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T09:04:41.470

只需使用英文翻译作为消息 ID。

如果你需要更详细的 Django 文本翻译介绍，可以看[这里](https://docs.djangoproject.com/en/1.4/topics/i18n/translation/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T08:36:49.920

如果您更喜欢明确确定您允许的语言，您可以`LANGUAGES`在设置文件中设置变量，[此处](https://docs.djangoproject.com/en/1.4/ref/settings/#std%3asetting-LANGUAGES)描述。一个例子：

```
LANGUAGES = (
    ('de', 'German'),
    ('en', 'English'),
) 
```

然后，对于所有其他国家/地区，将使用您的标准语言（[详情请点击此处](https://docs.djangoproject.com/en/1.4/ref/settings/#std%3asetting-LANGUAGE_CODE)）。默认情况下这是 en-us。

# iphone - predicateForEventsWithStartDate 不起作用

> ID：13793284
> 
> 赞同：2
> 
> 时间：2012-12-10T00:07:34.303
> 
> 标签：iphone, ios, ekevent, ekeventstore

我正在尝试从日历中获取事件，并且正在使用此方法进行操作：

```
predicateForEventsWithStartDate:endDate:calendars: 
```

但如果我创建这样的开始日期：

```
NSString *str =@"3/15/1980 9:15 PM";
    NSDateFormatter *formatter = [[NSDateFormatter alloc]init];
    [formatter setDateFormat:@"MM/dd/yyyy hh:mm a"];
    NSTimeZone *gmt = [NSTimeZone timeZoneWithAbbreviation:@"GMT"];
    [formatter setTimeZone:gmt];
    NSDate *date = [formatter dateFromString:str]; 
```

然后我这样做：

```
predicate = [eventStore predicateForEventsWithStartDate:date endDate:endDate calendars:  [eventStore calendarsForEntityType:EKEntityTypeEvent]];

NSArray *eventArray = [eventStore eventsMatchingPredicate:predicate]; 
```

eventArray 为零，而不是如果我使用：

```
[NSDate date] 
```

找到我从今天到未来的事件，而不是旧日期不起作用，我也尝试过其他旧日期，但数组总是为零......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T06:55:03.187

使用 predicateForEventsWithStartDate 函数时，看起来返回的事件位于大约 4 年（86400*365*4+86400*2）的时间间隔内。似乎是一个错误。

# php - 如何一次显示所有验证错误而不是一个验证错误？

> ID：13793285
> 
> 赞同：0
> 
> 时间：2012-12-10T00:07:51.060
> 
> 标签：php, mysqli

我在下面有一段代码，它执行几个查询，如果从前两个查询之一中找到一行，那么它将显示验证错误，如果从 2 个查询中没有找到行，那么它执行一个插入和另一个 SELECT 查询：

```
 // don't use $mysqli->prepare here
       $query = "SELECT StudentUsername FROM Student WHERE StudentUsername = ?";
       // prepare query
       $stmt=$mysqli->prepare($query);
       // You only need to call bind_param once
       $stmt->bind_param("s",$getusername);
       // execute query
       $stmt->execute(); 
       // get result and assign variables (prefix with db)
       $stmt->bind_result($dbStudentUsername);
       //get number of rows
       $stmt->store_result();
       $numrows = $stmt->num_rows();

       $aliasquery = "SELECT StudentAlias FROM Student WHERE StudentAlias = ?";
       // prepare query
       $aliasstmt=$mysqli->prepare($aliasquery);
       // You only need to call bind_param once
       $aliasstmt->bind_param("s",$getalias);
       // execute query
       $aliasstmt->execute(); 
       // get result and assign variables (prefix with db)
       $aliasstmt->bind_result($dbStudentAlias);
       //get number of rows
       $aliasstmt->store_result();
       $aliasnumrows = $aliasstmt->num_rows();

    if ($aliasnumrows == 0){
       if ($numrows == 0){

              $formatdate = date("Y-m-d",strtotime($getdob));
              $studentpassword = md5(md5("93w".$studentpassword."ed0"));  

              $insertsql = "
            INSERT INTO Student
                (StudentForename, StudentSurname, StudentAlias, StudentUsername, StudentPassword, StudentDOB, Year, CourseId)
              VALUES
                (?, ?, ?, ?, ?, ?, ?, ?)
            ";
            if (!$insert = $mysqli->prepare($insertsql)) {
              // Handle errors with prepare operation here
            }                                           

            $insert->bind_param("ssssssis", $getfirstname, $getsurname, $getalias, $getusername, $studentpassword, $formatdate, $getyear, $getcourse);

            $insert->execute();

            if ($insert->errno) {
              // Handle query error here
            }

            $insert->close();

             // don't use $mysqli->prepare here
       $query = "SELECT StudentUsername FROM Student WHERE StudentUsername = ?";
       // prepare query
       $stmt=$mysqli->prepare($query);
       // You only need to call bind_param once
       $stmt->bind_param("s",$getusername);
       // execute query
       $stmt->execute(); 
       // get result and assign variables (prefix with db)
       $stmt->bind_result($dbStudentUsername);
       //get number of rows
       $stmt->store_result();
       $numrowsstmt = $stmt->num_rows();

        }else{
        $errors['username'] = "<span style='color: red'>There is already a Student with that Username</span>";
        }

        }else{
        $errors['alias'] = "<span style='color: red'>There is already a Student with that Alias</span>";
        }
    } 
```

我遇到的问题是，如果两个验证错误都满足，我想同时显示两个验证错误。目前它一次只显示一个验证错误。如果满足两个验证错误，我如何才能将两个验证错误一起显示？

下面是它在表单中存储验证错误的代码：

```
$error_alias= (!empty($errors['alias']))?$errors['alias']:"";
$error_username = (!empty($errors['username']))?$errors['username']:"";

$form = "
<form action='" . htmlentities($_SERVER["PHP_SELF"]) . "' method='post'>
  <table>
  <tr>
  <td>Alias:</td>
  <td><input type='text' name='alias' value='$getalias' /><br/>".$error_alias."</td>
  </tr>
  <tr>
  <td>Username:</td>
  <td><input type='text' name='studentusername' value='$getusername' /><br/>".$error_username."</td>
  </tr>
  <tr>
  <td></td>
  <td><input type='submit' value='Register' name='registerbtn' /></td>
  </tr>
  </table>
  </form>";

  echo $form; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T00:20:00.363

您可以稍微更改 if 语句：

```
if ($aliasnumrows == 0 && $numrows == 0){
    //Do stuff
}else{
    if($aliasnumrows){
        $errors['alias'] = "<span style='color: red'>There is already a Student with that Alias</span>";
    }
    if($numrows){
        $errors['username'] = "<span style='color: red'>There is already a Student with that Username</span>";
    }
} 
```

# css - 固定顶部图像 + 垂直重复余数

> ID：13793288
> 
> 赞同：0
> 
> 时间：2012-12-10T00:07:58.767
> 
> 标签：css, background-image

我正在设计一个网页，其中有一张纸图像作为内容区域的背景。身体将有它自己的背景图像。论文需要从页面顶部以下开始，并一直重复到底部，无论长度如何。

这是问题所在：

我需要将纸张的顶部放在 div 的顶部，然后在其下方纸张的重复部分垂直向下重复页面，在一张具有正常顶部的巨纸上产生错觉。我需要在一个 div 中发生这种情况（理想情况下），因为我无法拆分内容。我一直在梳理网络，特别是 CSS3 网站。我知道每个 div 可以有多个背景图像等，但我认为您不能指定第二个重复图像开始的像素位置。我已经在 Photoshop 中创建了无缝的、垂直重复的图像。

顺便说一句，如果有必要，我愿意将 IE 八及以下扔到公共汽车下。

如果我现在还没有给你一个“视觉”，想象一下。你从笔记本上撕下一张纸，纸的顶部在页面的顶部，但你永远看不到底部。随着页面变长，您只会看到越来越多的页面中心。

谢谢。

这是一些伪代码：

```
<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Untitled Document</title>
<style type="text/css">
body {
    background: url(body-background.gif) repeat scroll left top;
}

.paper {
    margin: auto;
    width: 1170px;
    background: url(paper-top.png) left top no-repeat, url(paper-bottom.png) left 100px repeat-y;
}
</style>
</head>
<body>
<div class="paper">
    <!--content here-->
</div>
</body>
</html> 
```

我想写的“论文”类的背景（可能需要滚动才能看到）。例如：从页面开始 100px 开始并垂直重复。

*编辑*

在彼得的帮助下搞定了。我不知道是否会导致内容 div 内的定位问题并回来困扰我。但它现在可以正常工作。谢谢，彼得。

[JSFiddle](http://jsfiddle.net/qbzzc/)

如果看起来一切都糟透了，我将不得不使用两个 div 并拆分徽标，或者给它一些定位...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T00:49:52.203

如果您坚持不拆分内容，我会这样做：http: [//jsfiddle.net/ntWTE/](http://jsfiddle.net/ntWTE/)

我没有使用 css3 多背景选项，因为我习惯于制作跨浏览器站点，并且支持仍然是倒的。我刚刚添加了两个 div 来包含不同的背景图像，并将它们绝对定位在内容的后面。也许不是最漂亮的解决方案，但它应该在所有浏览器中都能正常工作。

```
.paper {
    margin: auto;
    width: 450px;
    position: relative;
}
.paper-bg {
    background: #cff;    /* the repeating image for the paper */
    position: absolute;
    top: 100px;
    left: 0;
    right: 0;
    bottom: 0;
    z-index: 1;
}
.paper-bg-top {
    position: absolute;   
    background: #ccf;  /* the top image for the paper */
    top: 0;
    left: 0;
    height: 100px; 
    width: 100%;    
}
.paper-content {
    position: relative;
    z-index: 5;    
} 
```

# fortran90 - Fortran- 关于命令 < >

> ID：13793289
> 
> 赞同：-2
> 
> 时间：2012-12-10T00:08:04.350
> 
> 标签：fortran90

我对编程不是很好，但我正在学习如何使用带有 VS2010 的并行工作室 XE 2011 用 fortran 编写代码。所以，我的问题是如何使用带有命令 <> 的反斜杠（ \ ）来保持在 dos 中的更改行？？？？？？

例子：

```
write(*,25) A(i,j)
   .
   . 
   .
25 format(4x,i5) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T01:46:45.487

如果您在遍历`i`and时尝试将输出保持在单行上`j`，则解决方案是

```
 write(*,25,advance='no') A(i,j) 
```

如果这不是您想要的，请提供更多信息，以便我们更好地帮助您。

# c++ - 字符串作为常量的效率？

> ID：13793294
> 
> 赞同：2
> 
> 时间：2012-12-10T00:09:25.160
> 
> 标签：c++, c, string

我是一个相对的 C/C++ 菜鸟，但在 C# 和许多其他语言方面经验丰富，目前正在用 C++ 构建游戏引擎。

对于输入系统（键/鼠标/操纵杆），我有一个想法，即使用字符串文字来简化游戏特定输入事件的配置，而不是枚举。但我不完全确定 C 编译器将如何优化它 - 每次进行逐个字符的字符串比较可能效率低下。

这是基本思想 - 从设备事件到“游戏特定事件”的映射将在 std::map 中，带有 int/enum 键和 const char * 值：

```
Mappings[ KEY_X ] = "Jump";
Mappings[ KEY_Y ] = "Shoot";
Mappings[ MOUSE_1 ] = "Shoot"; 
```

这些可以是硬编码的，从配置文件加载，等等（字符串将简化解析和保存，以及添加新的事件类型）

然后在游戏中，我可以只处理游戏特定的事件：

```
if ( IsDown( "Jump" ) ) {
}
if ( IsSinglePress( "Shoot" ) ) {
} 
```

问题是，我所有的字符串文字和 const char * 会被神奇地优化掉并最终像枚举或整数常量一样高效吗？例如

```
if ( IsDown( GAMEKEY_SHOOT ) ) {
   // ...
} 
```

还是会进行字符串比较等？我希望编译器会看到相同字符串文字的实例，将其存储一次，并在整个过程中使用单个指针值，但不确定。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T00:15:30.467

如果所有字符串常量都在同一个文件中，它们可能会被折叠到同一个内存位置。如果它们位于单独编译的多个文件中，或者如果您动态读取它们，则它们不会。

由于您正在使用 C(++)，因此您可以通过两种方式比较字符串（并且您在问题中没有提及任何内容）：指针标识 ( `==`) 或逐字符比较 ( `strncmp`)。如果你做的是前者，它是非常不可靠的，因为它取决于编译器的变化无常（并且在第二种情况下肯定会失败）；如果是后者，那么您知道将进行字符串比较。

省去自己的麻烦，并以您已经知道正确的方式去做：枚举或常量。在输入/输出处转换一次，然后您可以在内部将它们作为数字处理，这既快速又安全。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T01:39:39.200

您提到了几次在枚举和字符串之间进行转换。这是我的做法。（我认为这个想法归功于 gcc。）创建一个像 action.def 这样的文件

```
ENUM(Jump)
ENUM(Shoot) 
```

在头文件中定义这样的枚举

```
#define ENUM(a) a,
Enum Actions {
#include "action.def"
};
#undef ENUM 
```

在需要将枚举成员映射到字符串的 .cpp 文件中，执行此操作

```
struct EnumMap {
    int value;
    const char * name;
}
#define ENUM(a) { (int) a, #a },
struct EnumMap {
#include "action.def"
} ActionMap[];
#undef ENUM 
```

然后您的代码使用 ActionMap[] 将枚举值转换为字符串并返回。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T00:14:22.863

就标准而言，编译器可能会也可能不会使相同字符串文字的各种实例指向相同的内存位置

> 是否所有字符串文字都是不同的（即，存储在不重叠的对象中）是实现定义的。

（C++11，§2.14.5 ¶12）

此外，如果这些值是动态分配的，来自某个缓冲区，......它们肯定有与字符串文字不同的地址；所以检查一个是否等于另一个的唯一明智的方法是比较字符串的字节（以`strcmp`类似的方式），这显然比指针比较慢。

此外，我看不出在这些设置中使用字符串的意义：只使用`enum`s，它的执行速度至少一样快（可能更快）并且更不容易出错（如果你写了错误的枚举值，你会得到一个编译错误，如果您在字符串常量中打错字，它会被静默接受）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-10T00:19:31.410

无论如何，多次写出相同的字符串文字很容易出错 - 如果您错误地输入其中一个怎么办？

如果您使用全局变量，您可以确保它们具有相同的地址，因为您指的是完全相同的变量：

```
char const * const Jump = "Jump"; 
```

（或在标头中声明并在单个 .cpp 中初始化实际字符串值）

并用作：

```
Mappings[ KEY_X ] = Jump;
...
if ( IsDown( Jump ) ) {
    ... 
```

我不会假装这是很棒的风格（它不是），如果你只是想要一个枚举和字符串表示之间的内置链接，有更好的方法来获得它。

# node.js - mongodb 是否提供查询子文档集合以查找父文档？

> ID：13793298
> 
> 赞同：0
> 
> 时间：2012-12-10T00:09:56.007
> 
> 标签：node.js, mongodb, mongoose

我正在学习node.js和mongodb。在许多教程的推荐下，我正在使用 mongoose 来帮助与 mongo 交互。更复杂的是，我有一个重要的 RDMS 背景，并且正在尽我最大的努力来对抗我通过 SQL 镜头看到 mongodb 的愿望。

现在我正在努力解决查询子文档的概念。我已经弄清楚如何根据子文档的属性查询父文档，但无法弄清楚如何通过直接查询子文档来查询所有父文档（无论类型如何）。为了说明，我有以下人为的示例模式：

```
// subdocument
var CategorySchema = new Schema({
    name: { type: String, required: true }
});

var IpSchema = new Schema({
  ip_address: { type: String, required: true, index: true }
  ,categories: [CategorySchema]
});

var DomainSchema = new Schema({
  domain_name: { type: String, required: true, index: true }
  ,categories: [CategorySchema]
});

var ip = mongoose.model('Ip', IpSchema);
var domain = mongoose.model('Domain', DomainSchema);
var category = mongoose.model('Category', CategorySchema); 
```

上述模式在每个存储的域和 ip 文档中嵌入了类别的子文档数组。***使根据类别名称分别***检索域和 ip 变得容易，但难以一次性检索与特定类别关联的所有域和 ip。下面的代码概述了为什么我相信这一点：

```
category.find(function (err, tcs) {
    console.log(tcs); // contains an empty set because no categories stored here
});

ip.find({ 'categories.name' : req.params.category }, function(err, ips) {
    console.log(ips); // contains all parent documents w/ subdocument name
});

domain.find({ 'categories.name' : req.params.category }, function(err, ips) {
    console.log(ips); // contains all parent documents w/ subdocument name
}); 
```

现在我可以结合上述查询的结果，但这似乎很脆弱——假设我在越来越多的文档上重用类别。这是否让我存储类别，然后通过类别 ID 嵌入参考？为了优化读取而编写时，这似乎会增加流失率。不幸的是，我的 Googlefu 未能找到标记方案的任何教程/最佳实践。也可能是我把事情复杂化了。

基于共享子文档检索不同父文档的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T03:42:13.087

AFAIK mongo 查询必须针对一个集合运行。这不是 mongoose 的事实，而是 mongodb 本身的事实。鉴于这一事实，您可以尝试一些可能的设计。每个都有不同的权衡，因此您需要了解对您的应用程序很重要的查询并相应地选择

**1)**将 IP 和域存储在一个集合中，但每个文档都有一个`type`属性和相应的属性。

Mongoose 并没有真正设置为促进这种使用模式。如果您的大部分收藏都包含同质文档，Mongoose 效果最好。mongodb 本身也是如此，但并非如此。不推荐，但如果您的使用模式真的需要这个，这不是不可能的。

**2)**对多个集合并行运行相同的查询。我有一些代码可以在下面执行此操作。这是一个相当讨厌的 hack 内部结构`Mongoose.Query`，但它确实有效。

.

```
var _                 = require('underscore');
var async             = require('async');
function multiModelFind(query, models, outerCallback) {
  var queries = _.map(models, function (Model) {
    var otheModelQuery = new Query();
    var state = _.pick(query,
      '_conditions',
      '_fields',
      '_updateArg',
      'op',
      'options',
      'safe'
   );
    state.model = Model;
    _.extend(otheModelQuery, state);
    return otheModelQuery;
  });
  async.map(queries, function (query, callback) {
    query.exec(callback);
  }, function (error, models) {
    outerCallback(error, _.flatten(models));
  });
} 
```

示例用法：

```
var query = IP.find({"categories.name": "foo");
multiModelfind(query, [IP, Domain], function (error, ipsAndDomains) {/*...*/}); 
```

我认为这对于少数系列是可行的，但不止少数，您可能需要转向选项 3。

**3)** 创建了一个`Categorized`具有模式的集合，该集合具有一个命名属性，每个集合是一个带有猫鼬的 ObjectId，`ref`并用于`.populate()`加载“加入”记录。这几乎是关系数据库中连接表的直接模拟。

```
{
    category: {type: ObjectId, ref: 'Category'},
    ip: {type: ObjectId, ref 'IP'},
    domain: {type: ObjectId, ref 'Domain'},
} 
```

对于其中`Categorized`只有 2 个属性中的每条记录实际上将是非空的，您将对`.populate('ip').populate('domain')`每个查询执行一次。对于每个匹配的文档，集合将有 1 个查询`Categorized`和 1 个索引查询。`_id`如果它只是一个关键字标签，您也可以直接存储类别的名称，然后您不需要首先按名称查找类别的 ObjectId。

# ios - 目标 C：发布对象基本问题（非 ARC）

> ID：13793304
> 
> 赞同：0
> 
> 时间：2012-12-10T00:10:37.250
> 
> 标签：ios, autorelease, objective-c-2.0

在没有 GC 的非 ARC 项目中，我有两个关于内存管理的新手问题：在 Objective C 中，当我“自动释放”对象并从方法返回它时，我应该在“父方法”中“释放”它，调用重新调整对象的方法?

第二个问题是，我从方法（另一个对象上的实例方法 fe *userService ）返回对象（fe* *user* ）并将其保存到属性（*self.userProp*，*自我*实例化对象*userService*并调用他的方法）。当我释放对象*userService*（其方法返回对象*user*，存储在属性*self.userProp*中）时，它也释放了存储在属性中的对象（对象*user*存储在属性*self.userProp*中）。为什么？谁是财产对象的所有者？

 ***谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T00:20:21.923

> 当我“自动释放”对象并从方法中返回它时，我应该在调用重新调整对象的方法的“父方法”中“释放”它吗？

不，这就是为什么。让我们完全按照您所说的来布局一个示例：

```
-(NSObject*)someMethodThatReturnsAnAutoreleasedObject {
    return [[[NSObject alloc]init]autorelease];
}

-(void)myMethod {
    NSObject *obj = [self someMethodThatReturnsAnAutoreleasedObject];
    [obj doSomething];
    [obj release] //PROBLEM!
} 
```

逐步查看对象的保留计数，您会发现虽然`-autorelease`可能不会立即对您造成问题，但它会在以后的某个日期（因为`-autorelease`'d 对象不是“自动释放”，而是当他们拥有的池被耗尽或解除分配时，他们被集体解除分配）。返回自动释放对象的方法返回的最终保留计数为 0 (0 (start) + 1 (alloc) - 1 (autorelease))，因此释放它不仅没有必要，而且会导致崩溃。

> 第二个问题是，我从方法（另一个对象上的实例方法，fe userService）返回对象（fe user）并将其保存到属性（self.userProp，自我实例化对象 userService 并调用他的方法）。当我释放对象 userService（其方法返回对象用户，存储在属性 self.userProp 中）时，它也释放了存储在属性中的对象（对象用户存储在属性 self.userProp 中）。为什么？谁是财产对象的所有者？

再次，首先进行一些设置（起初这相当复杂，但在你看到你在做什么之后完全有意义）。

```
-(NSUserService*)someMethodThatReturnsAnAutoreleasedObject {
    return [[[NSUserService alloc]init]autorelease];
}

-(void)myMethod {
    self.userservice = [self someMethodThatReturnsAnAutoreleasedObject];
    [obj doSomething];
    [obj release] //No problem, assuming userService is declared retain or strong.
} 
```

好吧，为什么这不一样？内存限定符，这就是原因！当你声明一个属性时，你声明了一组内存限定符来告诉编译器什么样的修饰符要附加到赋值符号上。大多数属性是声明的`retain`或强的（（在 ARC 下），并且希望你的属性也是`userService`这样声明的）如果它们是对象类型，这会使编译器解释

```
self.userservice = [self someMethodThatReturnsAnAutoreleasedObject]; 
```

作为

```
self.userservice = [[self someMethodThatReturnsAnAutoreleasedObject]retain]; 
```

因此，您必须释放它，否则您的手上有泄漏（0（开始）+ 1（分配）- 1（自动释放）+ 1（保留）= +1）。***

# ruby-on-rails - 在rails中..因为通过的所有内容都是通过引用...如何设置返回的“值”

> ID：13793309
> 
> 赞同：0
> 
> 时间：2012-12-10T00:11:09.240
> 
> 标签：ruby-on-rails, reference, variable-assignment

在 Rails 中，一切都是对象......（有一些小例外）

如果我有一个要在函数内调整的变量，我该如何设置该值。

```
###untested sudo code.### 
def test
   processed = 123
   worked = false
   process_a_pile_more_records(processed , worked) 
end
def process_a_pile_more_records(iProcessed, iWorked)
  (0..100).each do |id|
     *iProcessed += 1  #if this is c++ that's how I'd do it.
     *iWorked = true  #again c++ accessing a record.
  end
end 
```

因为一切都是一个指针......它应该很容易做到这一点......但如果我能找到一些告诉我如何解决这个问题的代码，我会很烦恼。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T13:02:37.483

在您的 process_a_pile_more_records 方法中，您将使用与测试方法中定义的相同引用来实例化方法的参数。

但是，当您执行 iProcessed += 1 时，您实际上是在将 iProcessed 指向一个具有递增值的新对象，而不是递增原始对象。iWorked 也是如此。您将 iWorked 设置为指向 true 的变量。

如果您要针对实际更改底层对象的变量执行方法，那么您将在调用方法中看到 this 的结果。请参阅以下代码示例，其中向 Array 添加元素，修改原始对象或 gsub！方法修改底层字符串。请注意，如果我使用了 gsub 方法，则不会对基础对象进行更改，因为会创建一个新字符串。

请注意，对于 process_a_pile_more_records 的第二次调用，测试方法中的原始变量如何根据 process_a_pile_more_records 方法的返回值赋予新值。

```
test "local variable manipulation" do
  processed = 123
  worked = false
  string1 = 'Hello'
  string2 = 'Goodbye'
  an_array = []

  process_a_pile_more_records(processed , worked, string1, string2, an_array)
  puts 'Output the variables'
  puts processed
  puts worked
  puts string1
  puts string2
  puts an_array.to_s
  processed, worked, string1 = process_a_pile_more_records(processed , worked, string1, string2, an_array)
  puts processed
  puts worked
  puts string1
  puts string2
  puts an_array.to_s 
```

结尾

def process_a_pile_more_records(processed_var, working_var, first_string, second_string, an_array) (0..10).each do |id| processes_var += 1 working_var = true first_string = first_string + id.to_s second_string.gsub!('oo', '00') an_array << id.to_s end return processes_var, working_var, first_string end

这将产生以下输出：

```
Testing started at 14:38 ...
Output the variables
123
false
Hello
G00dbye
["0", "1", "2", "3", "4", "5", "6", "7", "8", "9", "10"]
134
true
Hello012345678910
G00dbye
["0", "1", "2", "3", "4", "5", "6", "7", "8", "9", "10", "0", "1", "2", "3", "4", "5",     "6", "7", "8", "9", "10"] 
```

# c# - 安全问题 - 作为 UI 的 Web 浏览器控件和客户端应用程序中包含的所有逻辑

> ID：13793312
> 
> 赞同：1
> 
> 时间：2012-12-10T00:11:57.563
> 
> 标签：c#, html, mysql, security, webkit

如果这不符合“问题类型”政策，我深表歉意，尽管我认为这在某种程度上是可以回答的。

我们使用：**C#.NET4**、**WebKit.NET**和**MySQL**

我们正在开发一个使用 WebKit.NET 作为 UI 的 C#.NET4（一个带有 WebKit 浏览器控件的 WinForm）。所有的 HTML 都是在应用程序中定义的——唯一被外部提取的是远程 MySQL 数据库中的内容。

应用程序中的 C# 现在处理 webkit 浏览器控件中的所有事件。本质上，它会介入某些事件，接受用户输入的值（如果适用）并执行工作。

我认为这是有风险的，因为它不像连接到外部服务器上的 PHP 实例 - 所有“服务器”之类的工作都在客户端计算机上的应用程序中本地发生。如果有人能够破解应用程序（对它进行逆向工程？），整个方法就会被揭示（用户名、密码、表名等）。

在桌面应用程序中，是否有一个类似应用程序的合作伙伴位于服务器上，接受数据，然后代表客户端程序连接到 MySQL 服务器？

也许我是偏执狂，但客户端篮子里的所有鸡蛋都让我害怕。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T00:24:38.903

如果你只把验证逻辑放在客户端，很容易绕过它。最明显的例子是仅在客户端使用 javascript 进行验证的网站：禁用 javascript，您可以插入任何您想要的内容。

如果您将任何连接数据库密码硬编码在客户端中，那么任何人都可以访问您的数据库，前提是他们对应用程序进行了逆向工程。数据包嗅探和查看打开的连接也是了解详细信息的好方法。

如果涉及任何类型的用户帐户，我会这样实现：

1.  用户在客户端登录
2.  客户端将登录凭据发送到服务器应用程序。客户端可以验证输入，但主要是为了帮助用户和加快流程。对服务器使用 SSL，否则密码将被拦截。验证证书以确保它是*您的*服务器，并且您会立即摆脱中间人攻击。
3.  服务器拒绝所有无效输入，执行自己的输入验证，否则执行您希望它执行的数据库操作，返回结果。通过这种方式，您可以控制您的数据库访问。它还可能返回会话身份验证事物，以允许进一步的请求。或者，连接可能只是保持打开状态。我不会让它返回数据库密码以允许直接接口：这可以使用调试工具从正在运行的应用程序中提取。
4.  客户端接受并解析结果，生活继续。

# python - 为什么eclipse运行我的python脚本需要这么长时间？

> ID：13793313
> 
> 赞同：1
> 
> 时间：2012-12-10T00:12:01.753
> 
> 标签：python, eclipse, pydev

我正在运行 64 位 Windows 7，并且刚刚根据[此视频安装了 Eclipse 和 Pydev](http://www.youtube.com/watch?feature=player_embedded&v=vHRRiBHI3to#start=0:00;end=12:35;autoreplay=false;showoptions=false)

现在我正在尝试运行一个演示脚本，就像在视频末尾一样，打印“hello world3”需要 12 秒

我的屏幕如下所示：

![在此处输入图像描述](../Images/052a1f691d2f36fc2afc0bd74a5751f9.png)

我有点不知所措。有什么想法吗？

# jquery - jquery .find() 找不到 xml 节点

> ID：13793315
> 
> 赞同：1
> 
> 时间：2012-12-10T00:12:25.663
> 
> 标签：jquery, xml, ajax, parsing

无论我尝试什么，我都无法在 .ajax 响应中找到 XML 节点。

```
<?xml version="1.0" encoding="utf-8"?>
<ctatt>
    <tmst>20121209 09:58:14</tmst>
    <errCd>0</errCd>
    <errNm />
    <eta>
        <staId>40970</staId>
        <stpId>30188</stpId>
        <staNm>Cicero</staNm>
        <stpDe>Service toward Forest Park</stpDe>
        <rn>105</rn>
        <rt>Blue</rt>
        <destSt>0</destSt>
        <destNm>Forest Park</destNm>
        <trDr>5</trDr>
        <prdt>20121209 09:57:40</prdt>
        <arrT>20121209 10:00:40</arrT>
        <isApp>0</isApp>
        <isSch>0</isSch>
        <isDly>0</isDly>
        <isFlt>0</isFlt>
        <flags />
    </eta>
</ctatt> 
```

`$(response).find('ctatt').find('eta').each(function(){});`将找不到 ela 节点。它永远不会进入每个循环。

`$(response).find('ctatt').find('tmst')`或`$(response).find('ctatt').find('errCd')`确实进入每个循环。我不明白为什么它无法解析`$(response).find('ctatt').find('eta')`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T00:20:38.023

```
var xml = $.parseXML(response);

$(xml).find('ctatt').find('eta').each(function(i,elem){
    console.log(elem);
}); 
```

[**小提琴**](http://jsfiddle.net/9mJbq/30/)

# javascript - javascript 鼠标悬停/将图片从 1 更改为 10

> ID：13793319
> 
> 赞同：0
> 
> 时间：2012-12-10T00:12:44.863
> 
> 标签：javascript, javascript-events

我的计数器在 10 次之后变为 0。记住我需要它到 1 而不是 11 或 0！我每次都需要一个新的jpg，例如test.1.jpg、test.2.jpg、test.3.jpg等等。

```
<html>
    <head>
        <script type="text/javascript" src="http://code.jquery.com/jquery-1.8.3.min.js"></script>
        <script>
            $(document).ready(function() {

                var timer, counter = 1,
                    changepic = function(pic) {

                        var src = pic.attr("src");

                        counter = counter + 1;

                        if (counter == 11) { // <- i tested my if clauses but not working any ideas?maybe we can solve it with easy if clauses
                            counter = 1;
                        }

                        pic.attr("src", src.substring(0, src.lastIndexOf('.') - 1) + counter + ".jpg");

                    };

                $('img').hover(function() {

                    var $this = $(this);

                    timer = setInterval(function() {
                        changepic($this);
                    }, 1000);

                }, function() {
                    clearInterval(timer);
                });

            });
        </script>
    </head>
    <body>
        <table style="float:left;">
            <tr>
            <tr>
                <td><img src="pics/test.1.jpg" /><br />Text</td>
            </tr>
            </tr>
        </table>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T00:38:11.863

当 counter 等于 11 时，问题就来了；

```
src.substring(0, src.lastIndexOf('.') - 1) + counter + ".jpg"; 
//test.1 + 1 + .jpg ---> test.11.jpg 
```

尝试

```
src.replace(/\d{1,2}\.jpg$/, counter + ".jpg"); 
```

# python - 在 Python 中将 Table/DataFrames 与公共列连接起来

> ID：13793321
> 
> 赞同：9
> 
> 时间：2012-12-10T00:12:52.050
> 
> 标签：python, pandas

我有两个数据框：

```
df1 = ['Date_Time',
    'Temp_1',
    'Latitude',
    'N_S',
    'Longitude',
    'E_W']

df2 = ['Date_Time',
    'Year',
    'Month',
    'Day',
    'Hour',
    'Minute',
    'Seconds'] 
```

如您所见，两个 DataFrame 都有`Date_Time`一个公共列。我想通过匹配来加入这两个 DataFrame `Date_Time`。

我当前的代码是：`df.join(df2, on='Date_Time')`，但这给出了错误。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-10T00:35:51.350

您正在寻找[`merge`](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.merge.html?highlight=merge#pandas.DataFrame.merge)：

```
df1.merge(df2, on='Date_Time') 
```

*关键字与 for 相同`join`，但`join`仅使用索引，请参阅[“Database-style DataFrame join/merging”](http://pandas.pydata.org/pandas-docs/stable/merging.html#database-style-dataframe-joining-merging)。*

这是一个简单的例子：

```
import pandas as pd
df1 = pd.DataFrame([[1, 2, 3]])
df2 = pd.DataFrame([[1, 7, 8],[4, 9, 9]], columns=[0, 3, 4])

In [4]: df1
Out[4]: 
   0  1  2
0  1  2  3

In [5]: df2
Out[5]: 
   0  3  4
0  1  7  8
1  4  9  9

In [6]: df1.merge(df2, on=0)
Out[6]: 
   0  1  2  3  4
0  1  2  3  7  8

In [7]: df1.merge(df2, on=0, how='outer')
Out[7]: 
   0   1   2  3  4
0  1   2   3  7  8
1  4 NaN NaN  9  9 
```

如果您尝试加入某个列，则会收到错误消息：

```
In [8]: df1.join(df2, on=0)
# error!
Exception: columns overlap: array([0], dtype=int64) 
```

*请参阅[“在索引上连接键列”](http://pandas.pydata.org/pandas-docs/stable/merging.html#joining-key-columns-on-an-index)*。

# java - Pattern.match 的 StackoverflowError 与 restlet 引擎中的长字符串匹配

> ID：13793323
> 
> 赞同：0
> 
> 时间：2012-12-10T00:13:19.930
> 
> 标签：java, regex, tomcat, jetty, restlet

我正在使用第三方应用程序，该应用程序使用 restlet.org 的库将 restful url 映射到 spring bean。它生成以下模式以匹配一个非常简单的 url：

url 模式 - /api/0/full/{action}/{paramsJSON}

生成的正则表达式模式

```
/api/0/preauthfull/((?:[a-zA-Z\d\-\.\_\~\!\$\&\'\(\)\*\+\,\;\=\:\@]|(?:\%[\dABCDEFabcdef][\dABCDEFabcdef]))+)/((?:[a-zA-Z\d\-\.\_\~\!\$\&\'\(\)\*\+\,\;\=\:\@]|(?:\%[\dABCDEFabcdef][\dABCDEFabcdef]))+) 
```

一旦模式超过大约 220 个字符，它就会失败。有趣的是，这只在 tomcat 服务器环境中失败，而不是在码头，即使它们都使用相同的 jre 运行。我有点不知道如何纠正这个问题，正则表达式是由restlet动态构建的-

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T01:57:10.993

您可能会遇到线程默认堆栈大小的问题。这是 java.util.regex.Pattern 的一个已知问题，它是关于太深的递归，从来没有尝试过，老实说，要深入了解这个东西内部发生了什么，只需尝试增加 JVM 堆栈大小，如

```
java -Xss1024k 
```

直到 Pattern 开心

# c++ - 在 Mac OS X 上的共享库中隐藏符号

> ID：13793325
> 
> 赞同：11
> 
> 时间：2012-12-10T00:13:27.063
> 
> 标签：c++, macos, shared-libraries, new-operator, gnu

多年来，我们一直在各种平台（Linux、Windows、Mac OS X、32 位和 64 位）上构建大型开源[软件，没有遇到任何麻烦。](http://appleseedhq.net/)然而最近，Mac OS X 版本（64 位）停止正常工作并开始随机崩溃。它或多或少恰逢我们构建机器上的 Mac OS X 从 10.7 更新到 10.8.2（但编译器工具链没有改变，它仍然是 llvm-gcc 4.2.1）。

我们的应用程序由几个动态（共享）库和许多使用它们的可执行文件组成。出于各种原因，其中一个共享库会覆盖`new`and运算符。`delete`在 Mac OS X（和 Linux）上，默认情况下会导出所有符号，包括我们的重载`new`和`delete`运算符。Mac OS X 上的崩溃似乎与一些内存分配给一个内存子系统（不是我们的）有关，然后通过我们自己的（和不兼容的）`delete`实现释放。

最明智的解决方案似乎是防止重载的运算符对共享库的用户可见。这可以通过两种方式完成：用 标记运算符`__attribute__((visibility("hidden")))`，或使用`-unexported_symbols_list`链接器命令行选项来防止某些符号被导出。不幸的是，第一个解决方案不起作用：gcc 发出警告，指出运算符的声明方式不同（in `<new>`），因此属性将被忽略。从我在各个地方**的阅读来看，第二种解决方案似乎是解决这个问题的正确方法。但是由于某种原因，我们无法使其工作**。

链接共享库时，我们将`-Wl,-unexported_symbols_list unexported_symbols_list.txt`选项传递给 g++，而 g++ 又应传递给 ld。该`unexported_symbols_list.txt`文件包含以下符号列表：

```
__ZdaPv
__ZdaPvRKSt9nothrow_t
__ZdlPv
__ZdlPvRKSt9nothrow_t
__ZdlPvS_
__Znam
__ZnamRKSt9nothrow_t
__Znwm
__ZnwmPv
__ZnwmRKSt9nothrow_t 
```

这些是我们覆盖并希望隐藏的所有变`new`体`delete`。我们通过使用 .`nm libappleseed.dylib`然后解开符号名称来找到这些符号`c++filt`。

这是 CMake 生成的用于链接的命令行`libappeseed.dylib`：

```
/usr/bin/g++  -g -Werror -dynamiclib -Wl,-headerpad_max_install_names -framework Cocoa -lcurl    -Werror -Wl,-unexported_symbols_list -Wl,unexported_symbols_list.txt -o ../mac-gcc4/appleseed/libappleseed.dylib [...] 
```

**不幸的是，尽管我们付出了所有努力，但符号似乎仍然存在（如 nm 所示）。**

知道我们做错了什么吗？我们可以尝试另一种方法吗？

* * *

**2012 年 12 月 19 日更新：**

Apple 的这份技术说明很好地涵盖了我们的问题和假设的解决方案：http: [//developer.apple.com/library/mac/#technotes/tn2185/_index.html](http://developer.apple.com/library/mac/#technotes/tn2185/_index.html)（“覆盖新/删除”部分）。

指向相关源代码的指针：

*   `operator new`并`operator delete`覆盖：[allocator.cpp](https://github.com/jupiter-jazz/appleseed/blob/0ae130df5750c468db80f7fcdae40bb82bc0b23a/src/appleseed/main/allocator.cpp#L480)
*   用于控制共享库中符号可见性的宏：[dllvisibility.h](https://github.com/jupiter-jazz/appleseed/blob/a9fcc42c52548b01507823e966b2a4b5861f7af4/src/appleseed/main/dllvisibility.h#L33)

`nm`构建 libappleseed.dylib`-fvisibility=hidden`并运行后的输出片段`strip -x libappleseed.dylib`：

```
...
00000000002a41b0 T __ZdaPv
00000000002a41f0 T __ZdaPvRKSt9nothrow_t
00000000002a4190 T __ZdlPv
00000000002a41d0 T __ZdlPvRKSt9nothrow_t
00000000002a4060 T __Znam
00000000002a4130 T __ZnamRKSt9nothrow_t
00000000002a3ff0 T __Znwm
00000000002a40d0 T __ZnwmRKSt9nothrow_t
... 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-10T10:09:31.947

您应该使用`-fvisibility=hidden`然后仅导出您想要的内容进行构建。在这里阅读：

[http://gcc.gnu.org/wiki/Visibility](http://gcc.gnu.org/wiki/Visibility)

它也解释了`-fvisibility-inlines-hidden`。许多大型库（例如 Qt）都使用它。好处是相当可观的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T17:25:55.610

您可以查看符号映射/版本控制（--version-script ld 选项）

[http://accu.org/index.php/journals/1372](http://accu.org/index.php/journals/1372)

# contentflow - Contentflow - 如何增加标题文本的空间？

> ID：13793326
> 
> 赞同：2
> 
> 时间：2012-12-10T00:13:33.363
> 
> 标签：contentflow

帮助！

我需要增加为标题分配的垂直空间量，以便显示 6 行标题文本。现在，默认值为 3 行，如果我有超过 3 行，则文本“冲突并覆盖”图像滑块栏。

感谢我将如何在 contentflow.js 代码中执行此操作的所有帮助？代码可以在这里找到：http: [//jacksasylum.eu/ContentFlow/contentflow.js](http://jacksasylum.eu/ContentFlow/contentflow.js)

非常感谢，蒂姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T07:02:05.713

您可以在 contentFlow.css 文件中设置高度

```
.ContentFlow .globalCaption {
text-align: center;
font-weight: 700;
color: rgb(255, 255, 255);
font-size: 14px;
height: 20px;
position: relative;
z-index: 1;
margin: 2em auto;
} 
```

# django - {{MEDIA_URL}} 与 Django 和 Ember.js

> ID：13793327
> 
> 赞同：2
> 
> 时间：2012-12-10T00:13:41.087
> 
> 标签：django, ember.js

我有以下车把模板：

```
{% handlebars "header" %}
<div class="header row-fluid">
  <div class="logo"> <a href="index.html"><span>Welcome!</span><span class="icon"></span></a> </div>
  <div class="top_right">
    <ul class="nav nav_menu">
      <li class="dropdown"> <a class="dropdown-toggle administrator" id="dLabel" role="button" data-toggle="dropdown" data-target="#" href="/page.html">
        <div class="title"><span class="name">George</span><span class="subtitle">Awesome Developer</span></div>
        <span class="icon"><img src="{{MEDIA_URL}}images/dashboard/thumbnail_george.jpg"></span></a>
      </li>
    </ul>
  </div>
  <!-- End top-right --> 
</div>
{% endhandlebars %} 
```

问题是 {{MEDIA_URL}} 当然在这里脱离上下文，所以我无法渲染我的图像。我尝试对 src 使用 bindAttr，但问题仍然存在。我该如何解决这个问题。

附带说明一下，这个模板是静态的，因为我使用把手的唯一原因是使用 Ember 的 {{action}} 助手在单击其中一个按钮时转换到新状态。这是正确的方法吗？

**更新：** 我的临时解决方案是我的控制器中有一个 mediaUrl 属性，并且我已经硬编码了媒体 URL。但是，这并不是所希望的，因为媒体 url 可以在服务器端随时更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T18:30:03.300

您最好让服务器处理模板并在将其发送到客户端之前插入正确的 MEDIA_URL。我能想到的唯一其他方法是在渲染之前对服务器进行单独的查询以获取该 URL。

# ios - iOS AS3 AIR 本地存储

> ID：13793330
> 
> 赞同：0
> 
> 时间：2012-12-10T00:14:21.823
> 
> 标签：ios, actionscript-3, air

我正在开发一个需要在设备上安装 SQL DB 的应用程序。我正在使用 File.applicationStorageDirectory 和 folder.resolvePath 添加新数据库。调试应用程序时，它看起来都正确执行，我能够成功创建一个新表。

我在插入和读取记录方面并没有走得太远，但是我只是想问一下，当我重新运行应用程序时，现有的数据库文件是否会被新的空文件替换？如果是这样，我需要检查文件是否存在等。

如何查看设备上的数据库（现阶段的 iOS）？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T23:00:51.690

是的，它将被保存，您可以随时访问它。这适用于任何东西，而不仅仅是数据库（因此通用名称和对象类型）

```
var file:File = File.applicationStorageDirectory.resolvePath( "file.path" );
var obj:Object = { someRandom:"data" };
var fs:FileStream = new FileStream();
fs.open( file, FileMode.WRITE );
fs.writeObject( obj );
fs.close(); 
```

以上将对象写入`obj`设备。请记住，这不会*更新*文件，它会*覆盖*文件。要更新文件，请执行以下操作：

```
var file:File = File.applicationStorageDirectory.resolvePath( "file.path" );
if ( file.exists ) {
    var fs:FileStream = new FileStream();
    fs.open( file, FileMode.READ);
    var obj:Object = fs.readObject();
    fs.close();
} 
```

然后你更新你的数据并继续写我在第一个片段中显示的内容

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T05:01:13.253

试试这个

如果你使用resolvePath，如果文件不存在，它会为你创建，否则它会保持原样。如果你使用resolvepath，覆盖永远不会发生。

或者

如果你想检查是否已经存在通过

```
 if(dbFile.exist) 
           trace('File already exists'); 
```

用这个

```
 var dbFile:File = new File("app-storage:/" + "localdb.db");
        sqlConnection = new SQLConnection();            
        sqlConnection.addEventListener(SQLEvent.OPEN, onAuthorDatabase_OpenHandler);
        sqlConnection.addEventListener(SQLErrorEvent.ERROR, onSQLErroHandler);
        sqlConnection.openAsync(dbFile); 
```

我不知道如何在设备存储位置（iOS）上查看 db 文件。

# haskell - 为什么此代码适用于 Yesod.Persist 的 get404 而不是 getBy404？

> ID：13793336
> 
> 赞同：1
> 
> 时间：2012-12-10T00:14:43.517
> 
> 标签：haskell, yesod

假设我有一张狗名和品种表，如下所示：

```
share [mkPersist sqlSettings, mkMigrate "migrateAll"] [persist|
Dog
    name Text
    breed Text
    UniqueDog name
|] 
```

我有以下路线：

```
mkYesod "DogApp" [parseRoutes|
/ RootR GET
/dog/name/#Text DogNameR GET
/dog/id/#DogId DogIdR GET
|] 
```

我正在尝试创建一个页面，根据它的名字返回狗的品种。我可以通过 getDogIdR 路由使用 URL 中的 Id 来做到这一点：

```
getDogIdR :: DogId -> Handler RepHtml
getDogIdR dogId = do 
    dog <- runDB $ get404 dogId
    defaultLayout $ do
        [whamlet|
<p>
    <b>#{dogName dog}
<p>
    #{dogBreed dog}
|] 
```

但是，如果我尝试使用 getDogNameR 路由创建相同的页面，

```
getDogNameR :: Text -> Handler RepHtml
getDogNameR maybeDogName = do 
    dog <- runDB $ getBy404 (UniqueDog maybeDogName)
    defaultLayout $ do
        [whamlet|
<p>
    <b>#{dogName dog}
<p>
    #{dogBreed dog}
|] 
```

我收到以下错误：

```
dog.hs:73:20:
    Couldn't match type `Entity' with `DogGeneric'
    In the return type of a call of `getBy404'
    In the second argument of `($)', namely
      `getBy404 (UniqueDog maybeDogName)'
    In a stmt of a 'do' block:
      dog <- runDB $ getBy404 (UniqueDog maybeDogName)

dog.hs:73:20:
    Kind incompatibility when matching types:
      backend0 :: (* -> *) -> * -> *
      DogGeneric SqlPersist :: *
    In the return type of a call of `getBy404'
    In the second argument of `($)', namely
      `getBy404 (UniqueDog maybeDogName)'
    In a stmt of a 'do' block:
      dog <- runDB $ getBy404 (UniqueDog maybeDogName) 
```

为什么会失败，我该如何解决？

似乎 get404 和 getBy404 函数返回不同的类型。如果我按如下方式更改 getDogNameR 路线，它运行得很好：

```
getDogNameR :: Text -> Handler RepHtml
getDogNameR maybeDogName = do 
    dog <- runDB $ getBy404 (UniqueDog maybeDogName)
    defaultLayout $ do
        [whamlet|
<p>
    <b>Dog found!
|] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T00:25:17.110

> 似乎 get404 和 getBy404 函数返回不同的类型。

对。

```
get404 :: (PersistStore (t m), PersistEntity val, Monad (t m), m ~ GHandler sub master,
           MonadTrans t, PersistMonadBackend (t m) ~ PersistEntityBackend val)
           => Key val -> t m val

getBy404 :: (PersistUnique (t m), PersistEntity val, m ~ GHandler sub master,
             Monad (t m), MonadTrans t, PersistEntityBackend val ~ PersistMonadBackend (t m))
             => Unique val -> t m (Entity val) 
```

因此，`getBy404`将您的狗包裹在[`Entity`](http://hackage.haskell.org/packages/archive/persistent/1.1.0/doc/html/Database-Persist-Store.html#t%3aEntity)您拥有纯狗的地方`get404`，如果您更换，您的第二个代码应该可以工作

```
<b>#{dogName dog} 
```

和

```
<b>#{dogName (entityVal dog)} 
```

和类似的`dogBreed`，或者更方便的是，如果你解构返回`Entity`的绑定

```
Entity{entityVal = dog} <- runDB $ getBy404 ... 
```

# tsql - 遇到除以零错误。T-SQL

> ID：13793338
> 
> 赞同：2
> 
> 时间：2012-12-10T00:14:59.200
> 
> 标签：tsql, sql-server-2012

我有以下在 SQL 2012 中运行的 T-SQL

```
SELECT machine_id, speed_gps_kph, odometer_total, event_timestamp, 
   1.0 * (speed_gps_kph - LAG(speed_gps_kph, 1) OVER (PARTITION BY machine_id ORDER BY event_timestamp)) /
   datediff(ss, LAG(event_timestamp, 1) OVER (PARTITION BY machine_id ORDER BY event_timestamp), event_timestamp)
FROM   Simple_speed 
```

但是，正如错误所示，我遇到了除以零的问题。

关于这个问题有很多帖子和答案，但我很难开始工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T00:38:07.627

这是一种控制被零除错误的简单方法，无需重复自己，使用`NULLIF(...,0)`：

```
SELECT machine_id, speed_gps_kph, odometer_total, event_timestamp, 
   1.0 * (speed_gps_kph - LAG(speed_gps_kph, 1) OVER (PARTITION BY machine_id ORDER BY event_timestamp)) 
   / NULLIF(datediff(ss, LAG(event_timestamp, 1) OVER (PARTITION BY machine_id ORDER BY event_timestamp), event_timestamp),0)
FROM Simple_speed 
```

该表达式现在将返回`NULL`分母为零的行。

# php - 如何使用长轮询方法找出有多少在线用户？

> ID：13793340
> 
> 赞同：0
> 
> 时间：2012-12-10T00:15:09.187
> 
> 标签：php, jquery, ajax, long-polling

我需要用长轮询方法找出有多少人在线的最佳方法。

为什么我需要长轮询方法来获取它？

我需要知道我的站点中有多少人在线。当然，我可以通过一些查询来做到这一点，并通过每次页面加载在我的站点中更新它，但我认为没有办法在聊天室中使用这种方法吗？

```
`lastvisit` >= DATE_SUB(now(), INTERVAL 5 MINUTE) 
```

有什么解决方案吗？如果我能在没有服务器轮询的情况下获得它，如果你引导我走向正确的方向，我将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T00:28:03.687

如果您使用长轮询，那么用户数将是轮询处理程序的活动连接数 - 即连接总数减去其他 URL 的连接数 - 从 mod_status 的输出中提取是微不足道的，但是你省略告诉我们您使用的是什么服务器。

但是，如果是我，我会简单地使用数据库绑定会话处理程序并从那里计算当前会话（但同样可以使用文件或内存绑定会话处理程序来执行此操作）。

由于相对于进入的请求数量而言，数字的变化可能很小，因此可以根据计划的作业或通过将随机数与阈值进行比较来收集，而不是在每个请求上收集。

# windows-8 - 使用 Peerfinder 是否需要 NFC？

> ID：13793342
> 
> 赞同：3
> 
> 时间：2012-12-10T00:15:20.137
> 
> 标签：windows-8, windows-store-apps, proximity

在 Windows 应用商店应用程序中，我试图使用 PeerFinder 类来定位我周围的蓝牙设备，但每次调用 Peerfinder.FindAllPeersAsync() 时都会出现一般异常：

```
One or more errors occurred while processing the request. (Exception from HRESULT: 0x80070306) 
```

我认为问题在于 Peerfinder.SupportedDiscoveryTypes == PeerDiscoveryTypes.None，但我不确定为什么会这样。我的电脑没有 NFC 无线电，但有蓝牙。我原以为这会使 Peerfinder.SupportedDiscoveryTypes == PeerDiscoveryTypes.Browse。是否需要 NFC 才能正常工作？

我已经在 Windows Phone 8 中编写了几乎相同的代码，但它确实有 NFC（尽管我只需要在第一次连接设备时使用它；之后它们每次都会互相记住）。

**更新：**

以下是人们在评论中要求的更多信息：

1) 允许蓝牙 == 真。
2）蓝牙已启用（我通过蓝牙将某些东西连接到PC只是为了向自己证明无线电正在工作）。
3) 增加了接近和网络功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T00:22:08.333

[这里](http://msdn.microsoft.com/en-us/library/windows/apps/windows.networking.proximity.peerfinder.supporteddiscoverytypes)有一个如何使用它的扩展示例。看来您可以在某些设备上使用 WiFi，但如果`SupportedDiscoveryTypes == PeerDiscovertyTypes.None`上述任何设备都不可用。有关如何使用的更多说明，请参见此处`FindAllPeers`。

> 您可以使用 SupportedDiscoveryTypes 属性来确定当前 PC 是否有工作的感应设备或 Wi-Fi 设备是否支持 Wifi-Direct 浏览。

来自链接的示例检查：

```
if ((Windows.Networking.Proximity.PeerFinder.SupportedDiscoveryTypes &
     Windows.Networking.Proximity.PeerDiscoveryTypes.Browse) !=
     Windows.Networking.Proximity.PeerDiscoveryTypes.Browse)
{
    WriteMessageText("Peer discovery using Wifi-Direct is not supported.\n");
    return;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-04T18:29:08.803

似乎 Windows 8 设备依赖 WiFi Direct 来建立套接字连接，而 WP8 设备使用蓝牙。我知道使用支持 NFC 的 Windows 8 平板电脑，您可以通过轻击手势触发连接（请参阅实现此技术的[PixPresenter](http://code.msdn.microsoft.com/wpapps/PixPresenter-Code-sharing-39ed631f)代码示例）。另请参阅[官方文档示例](http://msdn.microsoft.com/en-us/library/windows/apps/windows.networking.proximity.peerfinder.supporteddiscoverytypes)。但是，人们会期望您可以使用蓝牙连接 Windows Sotre 应用程序和 WP8 应用程序。

MSDN 文档建议通过使用 PeerFinder.AlternateIdentities 可以告诉每个应用程序在其他设备上运行的应用程序的 ID。

这是关于该主题的另一篇文章 [http://msdn.microsoft.com/en-us/library/windows/apps/jj207060.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/jj207060.aspx)

希望这可以帮助。

# c++ - 移动构造函数和初始化列表

> ID：13793343
> 
> 赞同：6
> 
> 时间：2012-12-10T00:15:26.220
> 
> 标签：c++, c++11, initialization, unordered-map, move-semantics

我想为某种类型实现移动构造函数（无复制构造函数），该类型需要是`boost::unordered_map`. 我们称这种类型`Composite`。

`Composite`具有以下签名：

```
struct Base
{
  Base(..stuff, no default ctor) : initialization list {}
  Base(Base&& other) : initialization list {} 
}

struct Composite
{
  Base member;
  Composite(..stuff, no default ctor) : member(...) {}
  Composite(Composite&& other) : member(other.member) {} // <---- I want to make sure this invokes the move ctor of Base
} 
```

我想写这个所以`boost::unordered_map< Key , Composite >`不需要复制构造函数，只使用移动构造函数。如果可能的话，我不想`Base`在移动构造函数的初始化列表中使用复制构造函数`Composite`。

这可能吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-10T00:21:17.870

说`member(std::move(other.member))`。

作为黄金法则，无论何时通过右值引用获取某些内容，都需要在内部使用它`std::move`，而每当您通过通用引用获取某些内容（即使用 推导模板类型`&&`）时，您需要在内部使用它`std::forward`。

# internet-explorer - 您可以在 Windows Phone 浏览器上运行嵌入式 Java 小程序吗？

> ID：13793346
> 
> 赞同：1
> 
> 时间：2012-12-10T00:15:44.240
> 
> 标签：internet-explorer, browser, applet, windows-phone

我正在研究浏览器技术的兼容性，但我似乎无法确定是否能够在 Windows Phone 的浏览器 (IE) 上运行嵌入式 Java Applet。有谁知道这个答案，或者知道一个来源？

我会自己测试它，但我没有可用的 Windows Phone。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T03:25:19.747

Windows Phone 不支持 Java 小程序。我在运行 Windows Phone 8 的 Lumia 920 上访问了[Java 测试页面](http://java.com/en/download/testjava.jsp)，但小程序没有运行。

# c++ - C ++ 11在链接上调用注册函数？

> ID：13793355
> 
> 赞同：9
> 
> 时间：2012-12-10T00:16:27.480
> 
> 标签：c++, c++11

有没有办法通过链接它的 .o 文件来调用一个函数？

例如：

foo.cpp：

```
extern int x;

void f() { x = 42; }

struct T { T() { f(); } } t; // we use constructor of global
                             // object to call f during initialization 
```

bar.cpp：

```
#include <iostream>

int x;

int main()
{
    std::cout << x;
} 
```

编译/链接/运行：

```
$ g++ -c foo.cpp
$ g++ -c bar.cpp
$ g++ foo.o bar.o
$ ./a.out
42 
```

这似乎适用于 gcc 4.7。它按预期输出 42。但是我记得在一些旧的编译器上我对这种模式有一个问题，因为没有真正“使用” foo.o 它在链接时被优化。（也许这个特定的例子由于某种原因不能代表问题）

C++11 标准对这种模式有什么看法？能保证工作吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-10T00:34:14.890

我相信你还没有摆脱困境。该标准不能*保证*您的代码按预期工作，尽管许多人依赖这种行为来进行各种“自注册”结构。

您的对象`t`是动态初始化的，这具有调用`f`. 该标准对静态存储对象的动态初始化有这样的说法（3.6.2/4，“非局部变量的初始化”）：

> 具有静态存储持续时间的非局部变量的动态初始化是否在 main 的第一条语句之前完成是实现定义的。如果初始化延迟到 main 的第一个语句之后的某个时间点，它应该发生在与要初始化的变量在同一翻译单元中定义的任何函数或变量的第一次 odr-use (3.2) 之前。

在您的代码中，只有`x`odr 被使用，但`x`在主翻译单元中定义。您的程序中没有使用其他 TU 的变量或函数，因此从技术上讲，无法保证它们`t`会被初始化。从技术上讲，每个 TU 中的*某些*内容必须由程序的静态控制流引用，以便初始化所有内容。

正如我所说，有很多带有“自注册”翻译单元的真实世界代码（例如，在字符串键控映射中注册工厂函数指针），因此只需将 TU 添加到您结束的最终程序增加更多功能。有人告诉我，大多数编译器会无条件地初始化所有全局变量，因为不这样做会破坏很多现实世界的代码。但不要依赖它！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-10T00:36:03.967

该标准并没有真正说明如何选择翻译单元以组合成一个完整的程序，据我所知，C++98 和 C++11 之间没有什么重要的变化。

In practice, when you link a TU as a `.o`, you'll get its static initializers no matter what, while if you link it as a piece of a `.a`, you'll only get its static initializers if something else in the TU was referenced transitively from `main()` or another file linked as a `.o`. `ld`'s `--whole-archive` flag overrides this and pulls in each member of the archive as if you listed it as an individual `.o`. Other linkers may handle this differently.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-10T00:31:08.287

相关部分是 2.2 [lex.phases] 第 1 段，第 8 和第 9 项：

> .8\. 翻译后的翻译单元和实例化单元组合如下： [ 注意：其中一些或全部可能来自库。—尾注] 检查每个翻译的翻译单元以生成所需实例化的列表。[注意：这可能包括已明确请求的实例化（14.7.2）。—尾注] 所需模板的定义位于。是否需要包含这些定义的翻译单元的源是由实现定义的。[注意：实现可以将足够的信息编码到翻译的翻译单元中，以确保此处不需要源。—尾注] 执行所有必需的实例化以生成实例化单元。[注意：这些类似于翻译的翻译单元，但不包含对未实例化模板的引用和模板定义。— 尾注] 如果任何实例化失败，则程序是非良构的。
> 
> .9\. 所有外部实体引用均已解析。链接库组件以满足对当前翻译中未定义的实体的外部引用。所有此类翻译器输出都被收集到程序映像中，该程序映像包含在其执行环境中执行所需的信息。

第 8 项是我能找到的最好的，表明所有翻译单元都必须包含在内。第 9 项只是指出解析符号所需的所有内容也都被引入。实际上，这意味着显式包含翻译单元具有预期的效果。但是，将翻译单元放入库中则不然。我想这就是您过去所经历的：例如，将实现放入库中并希望它们在启动期间注册。由于相应翻译单元中没有符号解析未引用的符号，因此库中的目标文件不会被拉入，相应地全局对象也不会被初始化。

# version-control - 如何在 TFS/Codeplex 托管项目上创建分支？

> ID：13793357
> 
> 赞同：11
> 
> 时间：2012-12-10T00:16:39.307
> 
> 标签：version-control, tfs, branch, codeplex

也许只是因为我不熟悉 TFS（我主要使用 SVN），但我不明白如何在 Codeplex 托管项目上创建分支。

我正在使用VS2012。在 Source Control Explorer 中，我在上下文菜单中选择*Branching and Merging > Branch...*，但随后我不知道在*Target*字段中输入什么：

![在此处输入图像描述](../Images/cd9855caa8092eff0b1510cb4b7a8eaa.png)

如果我尝试`$/wpfanimatedgif/branches/1.3`，我会收到以下错误：

> 目标项目 $/wpfanimatedgif/branches/1.3 不能位于源项目 $/wpfanimatedgif 下。

如果我尝试`$/branches/1.3`，我会收到此错误：

> TFS10198：源代码控制必须分支到现有的团队项目。分支不是团队项目。

我还尝试从 Team Explorer 创建一个新的团队项目，但我没有所需的权限。

那么如何创建一个分支呢？还是不可能在 Codeplex 项目上做到这一点？

顺便说一句，我想创建一个分支的原因是因为我正在开发一个实验性功能，并且我不想发布到“主干”（或 TFS 中的任何名称）。也许 TFS 有不同的方式来处理这种情况？我知道搁置更改，但如果我理解正确，搁置的代码将不会在 Codeplex 上可用，是吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-10T00:39:06.530

首先，它可能有助于理解什么是“团队项目”——它是源代码控制树顶层源代码控制中的一个逻辑条目，通常用于一组开发人员，并且各种权限和设置是设置在这个级别。在一个团队项目中，您可以拥有多个开发项目，例如 Visual Studio 解决方案或 Java 项目。在这种情况下，您的团队项目是`$/WpfAnimatedGif`.

至于分支和合并，它们发生*在*团队项目级别以下，通常作为您`trunk`或`main`分支的对等方。[TFS 分支和合并指南](http://vsarbranchingguide.codeplex.com)中介绍了各种分支和合并策略，但名为“WpfAnimatedGif”的 Visual Studio 解决方案的简化示例可能具有如下所示的分支策略：

```
$/WpfAnimatedGif/main/WpfAnimatedGif
$/WpfAnimatedGif/branches/1.3/WpfAnimatedGif
$/WpfAnimatedGif/branches/test_features/WpfAnimatedGif 
```

至于“最佳实践”，他们将在该文件夹下创建一个`trunk`或文件夹并将您的 VS 项目移动到该文件夹​​下。但是，您可以为每个分支创建一个新文件夹并独立地对每个项目进行分支。`main``$/WpfAnimatedGif`

例如：

`$/WpfAnimatedGif/WpfAnimatedGif`分支到`$/WpfAnimatedGif/branches/1.3/WpfAnimatedGif`

和

`$/WpfAnimatedGif/WpfAnimatedGif`分支到`$/WpfAnimatedGif/branches/1.3/WpfAnimatedGif.Demo`

但是，由于这些分支是独立的，因此您还必须独立地合并这两个文件夹，而不是从`branches`文件夹中原子地合并。

# php - htaccess 将所有非服务器端文件请求定向到特定子目录

> ID：13793358
> 
> 赞同：1
> 
> 时间：2012-12-10T00:16:59.667
> 
> 标签：php, mod-rewrite

我正在开发具有以下结构的基于模板的 CMS：

```
/public_html/admin/ 
```

^ 包含所有 CMS 文件和函数等。

```
/public_html/user_html/ 
```

^ 是客户端通过 FTP 访问并管理所有客户端文件（即 html、javascript、css、jpg、png 等）的目录，但不允许添加服务器端文件（即 php 等）的权限。

```
/public_html/index.php 
```

^ 是驱动站点/应用程序本身的公共根目录，index.php 是该目录中唯一的文件，它处理 URI 请求并运行应用程序。

进一步了解系统和结构：它的设置使得其中的所有 html 文件都`user_html`充当系统某些模块的模板/布局 - 这些文件具有自定义标签以输出系统功能，并且服务器从中读取所有文件和文件夹`user_html`在请求时将它们输出到应用程序。

这一切都很好，而且很受欢迎。我在这里想要实现的是隐藏`user_html`所有 URL 浏览器请求。所以基本上html页面中的所有路径都必须像这样读取才能工作：

```
src="/user_html/js/scripts.js",
src="/user_html/css/styles.css"
src="/user_html/images/logo.png" 
```

而用户/客户端在创建和编辑 html 页面时输入的所需路径如下：

```
src="/js/scripts.js"
src="/css/styles.css"
src="/images/logo.png" 
```

客户端可以完全控制目录中的目录和文件`user_html`，因此所有文件路径都将永远改变。基本上，浏览器需要知道所有文件和这些文件所在的目录`user_html`，但要像它们所在的位置一样显示`public_html`。

如果有人有一个简单的答案，使用 htaccess 路由所有 URI 请求，除了 .php 文件和`/admin/`目录到`user_html`，或任何其他想法和想法，将不胜感激。

我已经进行了广泛的搜索，但找不到我所追求的解决方案。但是我确信这将是一个非常简单的 RewriteCondition 和 RewriteRule。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T01:01:03.907

是的，这只是一些重写规则！

如果您可以接受“js/foo.js”形式的 URL，那么您只需要 public_html 中的 .htaccess 文件。

```
# everything that's not .php or in /admin goes to user_html.
Options +FollowSymlinks
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !^(.+)\.php$
RewriteCond %{REQUEST_FILENAME} !^/admin(.+)$
RewriteRule ^(.+)$ /user_html/$1 [NC] 
```

# c#-4.0 - 什么是 在类定义中？

> ID：13793360
> 
> 赞同：0
> 
> 时间：2012-12-10T00:17:06.110
> 
> 标签：c#-4.0, generics

在这行代码中，我们到底在告诉编译器什么？

```
public abstract class RepositoryBase<T> where T:class 
```

我们是说当我们创建一个继承自的对象时`RepositoryBase`，该对象必须在构造函数中取一个类，否则会出现编译错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T00:26:42.680

就是说，当你从 继承时`RepositoryBase<T>`，你指定的类型`T`必须是某种类型的类（或接口等，但不是值类型）。例如`RepositoryBase<int>`是非法的并且不会编译：请参阅[类型参数的约束（C# 编程指南）](http://msdn.microsoft.com/en-us/library/d5x73970%28v=vs.80%29.aspx)。

# java - SherlockfragmentActivity 和 sherlockListFragment

> ID：13793362
> 
> 赞同：0
> 
> 时间：2012-12-10T00:17:09.447
> 
> 标签：java, android, api, actionbarsherlock

我正在尝试制作一个下拉导航菜单，这样我就可以使用 SherlockFragmentActivity 和 SerlockListFragment 在我的页面之间移动，但是每次我启动我的应用程序时都会出现以下错误：

**java.lang.RuntimeException：无法启动活动 ComponentInfo{com.download.manager/com.download.manager.Main}：java.lang.RuntimeException：您的内容必须有一个 id 属性为 android.R.id.list 的 ListView**

这是 SherlockFragmentActivity 类

```
public class Main extends SherlockFragmentActivity implements OnNavigationListener{

private static final String KEY_MODELS="models";
private static final String KEY_POSITION="position";
private static final String[] labels= { "All", "Downloads","Completed","Later" };
private CharSequence[] models=new CharSequence[4];
private DownloadList frag=null;
private int lastPosition=-1;  

ActionBar act;
ViewPager myviewpager;
int mSelectedPageIndex=1;
DownloadService downloadservice;
Intent serviceIntent ;

@Override
public void onCreate(Bundle state) {
    super.onCreate(state);

    frag=(DownloadList)getSupportFragmentManager().findFragmentById(android.R.id.content);
    if (frag==null) {
        frag=new DownloadList();
        getSupportFragmentManager().beginTransaction().add(android.R.id.content, frag).commit();
      }

    if (state != null) {
        models=state.getCharSequenceArray(KEY_MODELS);
      }

    if (downloadservice==null)
        downloadservice= new DownloadService();
    ArrayAdapter<String> nav=null;
    act=getSupportActionBar();

    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.ICE_CREAM_SANDWICH)
    {
      nav= new ArrayAdapter<String>( act.getThemedContext(),android.R.layout.simple_spinner_item,labels);
    }
    else 
    {
      nav=new ArrayAdapter<String>(this,android.R.layout.simple_spinner_item,labels);
    }

    nav.setDropDownViewResource(android.R.layout.simple_list_item_1);
    act.setNavigationMode(ActionBar.NAVIGATION_MODE_LIST);
    act.setDisplayShowTitleEnabled(false);
    act.setHomeButtonEnabled(false);

    act.setListNavigationCallbacks(nav, this);
    if (state != null) {
        act.setSelectedNavigationItem(state.getInt(KEY_POSITION));
      }

    serviceIntent= new Intent(Main.this,downloadservice.getClass());
    if (startService(serviceIntent)==null)
        startService(serviceIntent);

    act.setTitle("");

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater infalter = getSupportMenuInflater();
    infalter.inflate(R.menu.mymenu, menu);

    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    if (item.getItemId()==R.id.sub1)
    {
        AlertDialog.Builder alert = new AlertDialog.Builder(this);
        alert.setTitle("Downlaod New File");
        alert.setMessage("Enter URL");
        final EditText input = new EditText(this);
        alert.setView(input);
input.setText("http://205.196.123.184/ddpha7c5b8lg/616c36j0d1xbztf   /Lecture+ppt+Ch2.ppt");
        alert.setPositiveButton("Ok", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int whichButton) {
                String value = input.getText().toString();
                Log.d("value",value);
            }
        });

        alert.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int whichButton) {
            }
        });

        alert.show();
    }   

    return super.onOptionsItemSelected(item);
}

@Override
protected void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);

}

@Override
public boolean onNavigationItemSelected(int itemPosition, long itemId) {
    lastPosition=itemPosition;

    return false;
} 
```

这是 SherlockListFragment 类

```
public  class DownloadList extends SherlockListFragment {
int index=0;
Button downloadButton;
Button pauseButton;
Button resumeButton;
TextView textLink;
TextView progressbar;
DownloadService downloadservice= new DownloadService();
MyAdapter listadapter;
Intent serviceIntent ;
String state;

@Override
public void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    getActivity().setContentView(R.layout.downloadlist);
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup          
 container,BundlesavedInstanceState) {
    View rootView = inflater.inflate(R.layout.downloadlist, container, false);

    return rootView;
}
int getIndex()
{
    return index;
}
public class MyAdapter extends ArrayAdapter<NewDownload>
{
     private final List<NewDownload> list;
      private final Activity context;
      Thread t;

    public MyAdapter(Context context,List<NewDownload> list) {
        super(context, R.layout.list_item,  list);
        this.context = (Activity) context;
        this.list = list;
    }
        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            LayoutInflater inflater = (LayoutInflater) getActivity().
                                          getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            View row = inflater.inflate(R.layout.list_item, null);

            pauseButton = (Button) row.findViewById(R.id.btn1);
            resumeButton = (Button) row.findViewById(R.id.btn2);
            textLink = (TextView) row.findViewById(R.id.tv1);
            progressbar = (TextView) row.findViewById(R.id.progressBar1);

                  textLink.setText(downloadservice.
                                      downloads.get(position).getName());
               progressbar.setBottom(downloadservice.
                                     downloads.get(position).getDownloadedSize());
            progressbar.setTop(downloadservice.
                                      downloads.get(position).getTotalSize());

            final int p = position;
            final NewDownload r = list.get(p);
            if (r.state=="downloading")
                {
                    progressbar.setText("DownLoading...");
                    pauseButton.setEnabled(true);
                    resumeButton.setEnabled(false);
                }
            else if (r.state=="pause")
                {
                pauseButton.setEnabled(false);
                resumeButton.setEnabled(true);
                progressbar.setText(r.state);
                }
            pauseButton.setOnClickListener(new View.OnClickListener() {
                @Override
                public void onClick(View v) {
                downloadservice.pause(p);
                setListAdapter(listadapter );

                }
            });

            resumeButton.setOnClickListener(new View.OnClickListener() {
                @Override
                public void onClick(View v) {
            if (getActivity().startService(serviceIntent)==null)

                      getActivity().startService(serviceIntent);
                downloadservice.resume(p);
                setListAdapter(listadapter );
                }
            });

            return row;
        }
} 
```

这是下载列表.xml

```
 <ListView
    android:id="@+id/list" xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >
</ListView> 
```

这是 list_item.XML

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<TextView
    android:id="@+id/tv1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center_horizontal"
    android:text="File Name" />

<TextView
    android:id="@+id/progressBar1"

    android:layout_width="306dp"
    android:layout_height="wrap_content"
     />

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <Button
        android:id="@+id/btn1"
        style="?android:attr/buttonStyleSmall"
        android:layout_width="wrap_content"
        android:layout_height="34dp"
        android:layout_gravity="center_horizontal"
        android:text="Pause" />

    <Button
        android:id="@+id/btn2"
        style="?android:attr/buttonStyleSmall"
        android:layout_width="wrap_content"
        android:layout_height="34dp"
        android:layout_gravity="right"
        android:text="Resume" />

</LinearLayout>

</LinearLayout> 
```

所以任何人都可以告诉我我的错误在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T00:23:28.310

这个错误：

```
Your content must have a ListView whose id attribute is android.R.id.list 
```

意味着您必须使用：

```
<ListView
    android:id="@android:id/list"
    ... 
```

在`download.xml`.

# python - I need to append standard header contents to the top of all of my python files

> ID：13793364
> 
> 赞同：1
> 
> 时间：2012-12-10T00:17:49.487
> 
> 标签：python, batch-file, comments

So, I have a bunch of python files (hundreds actually) that need a comment header at the top that contains the product name, a license reference notice, copyright information and other things. What is the best way to do this in a batch-like way? In other words, is there a tool I can use to specify what the header will be and what directory to apply this header to along with a *.py filter or something along those lines? By the way, all of the header info is identical for every file.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T00:22:05.220

Bash batch syntax:

```
for i in `find {DIRECTORY} -name "*.py"`; do
    cat - $i > /tmp/f.py <<EOF
{HEADER_BLOCK}
EOF
    mv /tmp/f.py $i
done 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T01:20:09.897

You can actually use python itself to follow a pythonic way.

To prepend or append some text to a file, use:

```
with open('filename.py','rb') as f:
    text = f.read()
    text = prependText + text
    text = text + postText
    // whatever you want to manipulate with the code text
with open('filename.py','wb') as f:
    f.write(text) 
```

Since python modules usually demonstrate a tree structure, you can always use **walk** function (**os.path.walk**) to navigate to any level of depth and apply any custom logic according to path and/or filename.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T01:20:28.243

If instead of the batch approach you would rather use python itself, a very simplified version could be written as:

```
import os, sys

def main():
    HEADER = '''# Author: Rob
# Company: MadeupOne
# Copyright Owner: Rob
'''

    filelist = []
    for path, dir, files in os.walk(sys.argv[1]):
        for file in files:
            if file.endswith('.py'):
                filelist.append(path + os.sep + file)

        for filename in filelist:
            try:
                inbuffer = open(filename, 'U').readlines()
                outbuffer = [HEADER] + inbuffer

                open(filename, 'wb').writelines(outbuffer)
            except IOError:
                print 'Please check the files, there was an error when trying to open %s...' % filename
            except:
                print 'Unexpected error ocurred while processing files...'

if __name__ == '__main__': main() 
```

Just pass the directory containing the files you want to alter and it will recursively prepend HEADER to all .py files on the path.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-01-15T15:00:03.460

Updated above script to work with python 3 and ignore hidden folders

```
import os, sys

def main(path):
    HEADER = '''#!/usr/bin/python3

# Copyright : 2021 European Commission
# License   : 3-Clause BSD

'''

    filelist = []
    for path, dir, files in os.walk(sys.argv[1]):
        if '/.' not in path:
            for file in files:
                if file.endswith('.py'):
                    filelist.append(path + os.sep + file)

    for filename in filelist:
        try:
            inbuffer = open(filename, 'r').readlines()
            outbuffer = [HEADER] + inbuffer

            open(filename, 'w').writelines(outbuffer)
            print(f"Header is added to the file: '{filename}'.")
        except IOError:
            print('Please check the files, there was an error when trying to open %s...' % filename)
        except:
            print('Unexpected error ocurred while processing files...')

if __name__ == '__main__': main() 
```

# vaadin - 创建 Vaadin 组合时线程访问无效

> ID：13793365
> 
> 赞同：0
> 
> 时间：2012-12-10T00:17:49.917
> 
> 标签：vaadin

我按照[http://vaadin.com/eclipse](http://vaadin.com/eclipse)中的步骤操作：

> 您可以创建基于 CustomComponent 的合成并使用插件随附的可视化设计器工具对其进行编辑。
> 
> 选择 File -> New -> Other... 从对话框中选择 Vaadin Composite 单击代码编辑器下方的 Design 选项卡以切换到可视化设计器

但是日食抛出：

> 无效的线程访问

错误。

我在 vaadin 中搜索了这个问题，但相关的是[https://vaadin.com/forum/-/message_boards/view_message/665040](https://vaadin.com/forum/-/message_boards/view_message/665040)，它对我没有用。

有人知道如何解决这个问题吗？

雅斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-09T14:31:14.633

检查您尝试创建的类文件是否已经存在。如果是这样，您可以在 Project Explorer 中右键单击它并说“ **Open With -> Vaadin Editor** ”以访问可视化设计器选项卡。或者尝试“ **File -> New -> Other -> Vaadin Composite** ”，但使用不同的包或类名。

（第一次使用 Vaadin 组合向导时，我收到了一个错误，即 Mozilla XULRunner 没有安装。安装后，我尝试再次创建组合，并得到与您收到的相同的“无效线程访问”错误。当然，它原来该组件已经存在，我试图创建一个副本，因此出现了（无用的）错误。）

# tsql - TSQL：如何将条件应用于子分组

> ID：13793367
> 
> 赞同：1
> 
> 时间：2012-12-10T00:18:29.710
> 
> 标签：tsql, group-by

图片 我有下表，其中包含一个人在不同时期的多个代码（id 是主键）

```
id   code   Name  Start                     Finish
325  1353   Bob   NULL                      2012-07-03 16:21:16.067
1742 1353   Bob   2012-07-03 16:21:16.067   2012-08-03 15:56:29.897
1803 1353   Bob   2012-08-03 15:56:29.897   NULL
17   575    Bob   NULL                      NULL
270  834    Bob   NULL                      2012-07-20 15:51:19.913
1780 834    Bob   2012-07-20 15:51:19.913   2012-07-26 16:26:54.413
1789 834    Bob   2012-07-26 16:26:54.413   2012-08-21 15:36:58.940
1830 834    Bob   2012-08-21 15:36:58.940   2012-08-24 14:26:05.890
1835 834    Bob   2012-08-24 14:26:05.890   2012-08-30 12:01:05.313
1838 123    Bob   2012-08-30 12:01:05.313   2012-09-05 09:29:02.497
1844 900    Bob   2012-09-05 09:29:02.497   NULL 
```

我想做的是更新表格，以便代码取自最新的人。

```
id   code   Name Start                      Finish
325  900    Bob  NULL                       2012-07-03 16:21:16.067
1742 900    Bob  2012-07-03 16:21:16.067    2012-08-03 15:56:29.897
1803 900    Bob  2012-08-03 15:56:29.897    NULL
17   900    Bob  NULL                       NULL
270  900    Bob  NULL                       2012-07-20 15:51:19.913
1780 900    Bob  2012-07-20 15:51:19.913    2012-07-26 16:26:54.413
1789 900    Bob  2012-07-26 16:26:54.413    2012-08-21 15:36:58.940
1830 900    Bob  2012-08-21 15:36:58.940    2012-08-24 14:26:05.890
1835 900    Bob  2012-08-24 14:26:05.890    2012-08-30 12:01:05.313
1838 900    Bob  2012-08-30 12:01:05.313    2012-09-05 09:29:02.497
1844 900    Bob  2012-09-05 09:29:02.497    NULL 
```

最新的人被定义为具有`latest (max?) Start AND (Finish IS NULL or Finish >= GetDate()) WITHIN the Group of people of same Name AND Code`

在上面的示例中`id = 1844`（对于 Bob 的组，它具有最新的 Start 和 Finish 为 Null）

我很确定这可以通过单个语句实现，但我可以看到如何定义“最新人”，以便我可以将其加入以获取我想要更新的行

编辑：请注意，我不能仅依赖日期列的 Id 列的顺序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T00:30:37.490

这样的事情会做：

```
update this set code = (
   select top (1) that.code from table1 that
   where that.name = this.name -- match on name
     and (that.Finish is null or that.Finish >= getdate()) -- filter for current rows only
   order by that.Start desc, that.id desc -- rank by start, break ties with id
   )
from table1 this 
```

我希望你的表有很好的索引，和/或不是太大，因为这一步完成很昂贵。

替代形式，使用`OUTER APPLY`，更容易扩展：

```
update this set code = that.code
from table1 this
outer apply (
   select top (1) that.code from table1 that
   where that.name = this.name -- match on name
     and (that.Finish is null or that.Finish >= getdate()) -- filter for current rows
   order by that.Start desc, that.id desc -- rank by start, break ties with id
   ) that 
```

使用窗口函数的替代方法，没有连接：

```
update this set code = _latest_code
from (
  -- identify the latest code per name
  select *, _latest_code = max(
    case 
      when (finish is null or finish >= getdate()) 
       and _row_number = 1
      then code else null 
    end
    ) over (partition by name)
  from (
    -- identify the latest row per name
    select *, _row_number = row_number() over (
      partition by name order by 
        case when finish is null or finish >= getdate() then 0 else 1 end
      , start desc, id desc)
    from table1
    ) this
  ) this 
```

# php - PHP不编译扩展/模块？

> ID：13793368
> 
> 赞同：0
> 
> 时间：2012-12-10T00:18:42.030
> 
> 标签：php, centos, centos6

我正在尝试在 CentOS 6 x64 机器上安装 PHP 5.4。

目前我有 5.3.18 以及其他一些东西，例如从 repo 安装的 nginx/FPM，但对于特定项目，我需要 5.4。

我目前正在编译选项：

```
./configure --host=x86_64-unknown-linux-gnu --build=x86_64-unknown-linux-gnu --program-prefix= --prefix=/usr --exec-prefix=/usr --bindir=/usr/bin --sbindir=/usr/sbin --sysconfdir=/etc --datadir=/usr/share --includedir=/usr/include --libdir=/usr/lib64 --libexecdir=/usr/libexec --localstatedir=/var --sharedstatedir=/var/lib --mandir=/usr/share/man --infodir=/usr/share/info --cache-file=../config.cache --with-libdir=lib64 --with-config-file-path=/etc --with-config-file-scan-dir=/etc/php.d --disable-debug --with-pic --disable-rpath --without-pear --with-bz2 --with-exec-dir=/usr/bin --with-freetype-dir=/usr --with-png-dir=/usr --with-xpm-dir=/usr --enable-gd-native-ttf --with-t1lib=/usr --without-gdbm --with-gettext --with-iconv --with-jpeg-dir=/usr --with-openssl --with-pcre-regex=/usr --with-zlib --with-layout=GNU --enable-exif --enable-ftp --enable-magic-quotes --enable-sockets --with-kerberos --enable-ucd-snmp-hack --enable-shmop --enable-calendar --without-sqlite --with-libxml-dir=/usr --enable-xml --with-mhash --libdir=/usr/lib64/php --sysconfdir=/etc/php-fpm --enable-fpm --enable-mysqlnd --with-fpm-user=php-fpm --with-fpm-group=php-fpm --without-libedit --without-gd --without-pspell --without-sqlite3 --disable-dba --disable-dom --disable-pdo --disable-xmlreader --disable-xmlwriter --disable-phar --disable-fileinfo --disable-json --disable-wddx --disable-posix --disable-sysvmsg --disable-sysvshm --disable-sysvsem --with-mysql=mysqlnd --with-mysqli=mysqlnd --with-pdo-mysql=mysqlnd 
```

我正在做`make && make install`，虽然安装似乎成功，但 PHP 似乎没有直接将扩展编译到扩展中`/usr/lib64/php/20100525`

关于我做错了什么的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T01:18:12.740

与其手动编译，不如考虑从[Remi 的存储库](http://blog.famillecollet.com/pages/Config-en)安装软件包。Remi 是 Fedora 的 PHP 维护者，Fedora 是驱动 RHEL 和 CentOS 的发行版。

“remi-test” repo 目前有 5.4.9 可用于 CentOS [5.x](http://rpms.famillecollet.com/enterprise/5/test/x86_64/repoview/)和[6.x](http://rpms.famillecollet.com/enterprise/6/test/x86_64/repoview/)。

请谨慎使用回购协议。它还想要更新 MySQL，这*可能会*产生不希望的副作用。该 repo 还需要[EPEL](http://fedoraproject.org/wiki/EPEL)，但无论如何您都应该拥有它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T01:24:35.817

您在寻找哪些扩展程序？据我所知，您静态构建了 PHP。您必须使用 --enabled-shared 才能获得共享扩展，然后它们将进入`/usr/{PREFIX}/php/extensions/{your-build}/`......请参阅[http://php.net/configure.about](http://php.net/configure.about)

# java - 实现另一个接口的解决方法接口

> ID：13793369
> 
> 赞同：2
> 
> 时间：2012-12-10T00:18:48.510
> 
> 标签：java, interface, implements

我正在尝试为游戏中的对象定义一些属性，因此我使用接口来指定它们。

我已经创建了一个`Interactable`接口，但是后来我想创建一个`Eatable`接口，这显然是`Interactable`因为交互是为了吃饭，但我不能这样做，因为我无法在接口中实现一个方法。

有解决方法吗？

```
public interface Interactable {
    void interact();
}

public interface Eatable implements Interactable {
    public void eat();
    public void interact() {
        // Obviously, this doesn't work
        eat();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T00:20:25.843

首先，接口只能扩展另一个接口，制作`Eatable` **抽象类**和实现`Interactable`。

```
public abstract class Eatable implements Interactable {
    public void eat();
    public void interact() {
        eat();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T00:20:31.393

Iterfaces 可以“扩展”其他接口。

不过，在这种情况下，我会创建一个抽象基类“Food”或实现 Interactable 的东西，并且它的 interact() 方法调用一个抽象的 eat() 方法。

# java - PrintWriter 未写入文件，尝试添加 flush() 和 close() Java

> ID：13793375
> 
> 赞同：1
> 
> 时间：2012-12-10T00:19:53.300
> 
> 标签：java, file-io, printwriter

试图写入文件。我做了研究，确保冲洗并关闭。我以为它可能正在读取空白消息框并且什么也没写，但是做了一个 System.out.println 以确保它正确读取，并且确实如此。所以现在不确定。

原始代码：

```
import java.awt.*;
import java.awt.event.*;
import java.applet.*;
import java.io.*;

public class Form extends Applet implements ActionListener{
private TextField first = new TextField("First Name",12);
private TextField middle = new TextField("I",1);
private TextField last = new TextField("Last Name",15);
private TextField address = new TextField("Address",25);
private TextField city = new TextField("City",20);
private TextField state = new TextField("State",2);
private TextField zip = new TextField("Postal Code",10);
private Button submit =new Button("Submit");
private Button reset = new Button("Reset");
private Button save = new Button("Save");
private Button enlarge = new Button("Enlarge");
private TextArea message = new TextArea();

public void init()
{
    GridBagLayout gbl = new GridBagLayout();
    setLayout(gbl);
    GridBagConstraints c = new GridBagConstraints();
    c.anchor = GridBagConstraints.WEST;
    c.weightx=1.0;
    c.weighty=1.0;
    c.fill=GridBagConstraints.HORIZONTAL;
    c.insets=new Insets(5,5,5,5);
    gbl.setConstraints(first,c); add(first);
    c.fill=GridBagConstraints.NONE;
    gbl.setConstraints(middle,c); add(middle);
    c.fill=GridBagConstraints.HORIZONTAL;
    gbl.setConstraints(last,c); add(last);
    c.gridy=1;
    gbl.setConstraints(address,c); add(address);
    c.gridy=2;
    gbl.setConstraints(city,c); add(city);
    c.fill=GridBagConstraints.NONE;
    gbl.setConstraints(state,c); add(state);
    c.gridy=3;
    gbl.setConstraints(zip,c); add(zip);
    c.gridy=4;
    c.anchor = GridBagConstraints.CENTER;
    gbl.setConstraints(submit,c);add(submit);
    gbl.setConstraints(reset,c); add(reset);
    c.gridy=5;
    c.anchor = GridBagConstraints.CENTER;
    gbl.setConstraints(save, c); add(save);
    gbl.setConstraints(enlarge, c); add(enlarge);
    c.gridy=6;
    c.gridwidth=3;
    c.fill=GridBagConstraints.BOTH;
    gbl.setConstraints(message,c);add(message);
    submit.addActionListener(this);
    reset.addActionListener(this);
    enlarge.addActionListener(this);
    save.addActionListener(this);
}
public void actionPerformed(ActionEvent event)
{

    String initial = middle.getText();
    String a=message.getText();
    if (initial != null)
        initial +=". ";
    Object source = event.getSource();
    if (source == submit)
    {

        message.setText(first.getText()+ ' ' +initial+last.getText());
        message.append('\n'+address.getText());
        message.append('\n'+city.getText()+", " +state.getText());
        message.append(' ' +zip.getText());
        message.append("\n\nYour message:\n"+a);
    }
    else if (source == reset)
    {
        message.setText("");
        first.setText("");
        middle.setText("");
        last.setText("");
        address.setText("");
        city.setText("");
        state.setText("");
        zip.setText("");

    }
    else if (source == enlarge)

    {
        message.setFont(new Font("Serif", Font.PLAIN, 14));
        message.setForeground(Color.BLUE);
        message.setText(a);
    }
    else if (source == save)
    {
        try{

        File file=new File("savedMessage.txt");
        PrintWriter pw = new PrintWriter(file);
                pw.println(message.getText());
                //message.setText("Print was successful")
                pw.flush();
                pw.close();
                System.out.println(message.getText());
        }
        catch (FileNotFoundException e) {
            e.printStackTrace();
            System.err.println("Error: " + e.getMessage());

        } catch (IOException e) {
            e.printStackTrace();
            System.err.println("Error: " + e.getMessage());
        }

    }

} 
```

}

这是用于解决问题的代码：

```
 else if (source == save)
    {
        try{
            f = new File("savedMessage.txt");
            bw = new BufferedWriter(new FileWriter(f,true));
            bw.write(message.getText());
            if(f.canWrite()){
            System.out.println("Success");
            }
            }

        catch (FileNotFoundException e) {
            e.printStackTrace();
            System.err.println("Error: " + e.getMessage());

        } catch (IOException e) {
            e.printStackTrace();
            System.err.println("Error: " + e.getMessage());
        }
    finally{

            try {
                bw.close();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T00:27:45.497

`PrintWriter`吞下异常。请参阅 Javadoc。你需要打电话`checkError()`。更好的是，使用`BufferedWriter`它不会吞下它们。除非您的小程序已签名，否则您可能会遇到苹果沙盒权限问题。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-10T00:25:03.570

第一个提示：关闭文件！在 catch ioexception 下添加一个 finally 块

```
 File file = null;
    try {
       file = new File("filename.txt");
    } catch (IOException ex) {

    } finally {
       try {
            file.close();
        } catch (IoException ex2) { }

    } 
```

进一步检查文件是否可写

```
if (!file.canWrite()) {
// forget it, cannit write
 } 
```

# c++ - 错误：宏名称必须是标识符

> ID：13793376
> 
> 赞同：0
> 
> 时间：2012-12-10T00:19:55.480
> 
> 标签：c++, macros

我在以下代码中不断收到错误“宏名称必须是标识符”，我不知道为什么。据我所知，我没有违反任何命名标准。这是来自我的“dllist.h”文件：

```
#ifndef _DOUBLY_LINKED_LIST_
#define _DOUBLY_LINKED_LIST_

template <class T>
class IntDLLNode {

friend class IntDLList;

    public:

        IntDLLNode() {next = prev = NULL;}

        IntDLLNode(const T& el, IntDLLNode *n = NULL, IntDLLNode *p = NULL) {
        info = el;
        next = n;
        prev = p;
        }

protected:

        T info;
        IntDLLNode<T> *next, *prev;
};

template <class T>
class IntDLList {

    public:

    IntDLList() {head = tail = NULL;}

    void addToDLLTail(const T& el);
    void addToDLLHead(const T& el);
    T deleteFromDLLTail();
    T deleteFromDLLHead();
    void deleteNode(int);
    void isInList(int) const;
    void addSorted(int);
    void printList();

private:

    IntDLLNode<T> *head, *tail;
};

#endif 
```

我也尝试过像 DOUBLY_LINKED_LIST 和 DOUBLYLINKEDLIST 这样的名称——所有这些都会导致相同的错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T00:21:23.627

你违反了规则。`_DOUBLY_LINKED_LIST_`是无效的标识符。任何以下划线开头，紧跟大写字符的内容都保留用于实现。

试试`DOUBLY_LINKED_LIST`。

也尝试`#include <cstddef>`为`NULL`. 或使用`0`. 或者更好的是，如果您支持 C++11，请使用`std::nullptr`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T00:39:16.937

尝试

```
 #if !defined( _DOUBLY_LINKED_LIST_) 
```

代替

```
#ifdef _DOUBLY_LINKED_LIST_ 
```

# c# - 使用 StreamReader 生成 ID（最后一行）

> ID：13793377
> 
> 赞同：1
> 
> 时间：2012-12-10T00:19:55.903
> 
> 标签：c#, .net, winforms, linq, stream

我正在尝试在我的 .CSV 文件上使用 StreamReader 生成项目 ID（它必须是 .csv 文件）。项目 ID 应从 1000 开始并上升（1001、1002 等）

现在，如果用户按下“生成 ID”，它将在整个文件中搜索值“1000”，如果不存在，它将在文本框中写入“1000”。

**这是我需要帮助的内容：**如果文件包含“1000”，我希望它读取最后一行，将其增加 1，然后将值写入文本框中。所以，如果我的最后一个值是 .csv 中的 1005文件，我希望它在文本框中写入 1006。

```
 private void GenerateID_Click(object sender, EventArgs e)
    {
        try
        {
            string searchString = "1000";
            using (StreamReader sr = new StreamReader("file.csv"))
            {
                string line;
                while ((line = sr.ReadLine()) != null)
                {
                    if (line.Contains(searchString))
                    {
                        /* If file contains 1000, read the LAST line
                         * (Whatever number that may be: 1001, 1002, 1003, etc.)
                         * and increase that number by 1, then write to textbox. */
                    }
                    else
                    {
                        invItemIDField.Text = Convert.ToString("1000");
                    }
                }
            }
        }
        catch (Exception)
        {
            MessageBox.Show("The file could not be read");
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T00:43:45.447

我建议你使用[FileHelpers](http://filehelpers.sourceforge.net/)。它是最适合读取 CSV 文件的库。

要安装它，您需要先安装[NuGet](https://nuget.org/)。安装后，转到工具 > 库包管理器 > 包管理器控制台：

![NuGet 包管理器](../Images/87f1ba2035a470fdf37084ea46f07353.png)

然后，输入：`Install-Package Filehelpers`

你可以走了！

导入`FileHelpers`您的代码

```
using FileHelpers; 
```

创建一个描述 CSV 结构的类：

```
DelimitedRecord("'")]
public class MyCsv
{
    public int Column1; // Your ID column
    public string SomeOtherColumn; 
} 
```

创建一个`List<MyCsv>`：

```
List<MyCsv> myList; 
```

然后，加载您的 CSV：

```
FileHelperEngine<MyCsv> engine = new FileHelperEngine<MyCsv>();
myList = new List<MyCsv>(engine.ReadFile("my.csv")); // replace with your filename or variable containing the filename 
```

您现在可以通过访问列表来读取您的 CSV `myList`：

```
foreach(MyCsv line in myList) {
    // Do something;
} 
```

该列表中的每个对象对应于 CSV 中的每一行。为了访问一行的第一列（给定`foreach`上面的循环）：

```
line.Column1 
```

因此，如果您需要比较值，您可以使用 LINQ 或执行传统的循环搜索：

```
foreach(MyCsv line in myList) {
    if (txtId.Text == line.Column1.ToString()) {
        found = true;
        break;
    }
} 
```

然后，获取最后一行的 id：

```
myList.[myList.Count - 1].Column1 
```

你可以做剩下的事情。干杯!

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T00:43:02.960

这是我的尝试，它与您的略有不同，但它有效。当然，您必须考虑一些事情，例如用引号括起来的元素，换行符 \r\n 等等：

```
 int TextBoxValue = 1000;
    var reader = new StreamReader(File.OpenRead(@"C:\Users\J\Desktop\New Text Document (4).txt"));
    var contents = reader.ReadToEnd().Split(new string[] {"\r\n"}, StringSplitOptions.None);

    var iValueExists = (from String sLine in contents
                        where sLine.Contains("1000")
                        select sLine).Count();
    if (iValueExists > 0)
    {
        TextBoxValue = int.Parse(contents.Last().Split(new string[] {","}, StringSplitOptions.None).First()) + 1;
    }

    invItemIDField.Text = TextBoxValue;
    reader.Close(); 
```

* * *

![在此处输入图像描述](../Images/a185a05fb09d3045d4a1c1dfeb9f2f2d.png)

# css - 从导航悬停菜单中删除灰色边框

> ID：13793383
> 
> 赞同：1
> 
> 时间：2012-12-10T00:20:29.883
> 
> 标签：css

我的好友正在将一个网站放在一起，他希望在导航菜单对象悬停和/或活动页面时从导航菜单对象周围删除灰色边框。我终其一生都无法在他那乱七八糟的代码中找到需要改变的地方。甚至不确定要在此处发布哪些片段。如果有人能弄清楚，我将不胜感激
[http://cf5s.suspected.org/](http://cf5s.suspected.org/)

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T00:27:30.477

以下规则是产生盒子的原因：

```
#nav li:hover, #nav li.current_page_item,
#nav li.current_page_parent, #nav li.current-menu-item,
#nav li.current-menu-ancestor {
    box-shadow: 0 0 1px rgba(0, 0, 0, 0.5);
} 
```

要么删除该样式，要么更改其应用方式以消除“边框”效果。[Firebug](https://getfirebug.com/)和 Firefox 是您追踪此类东西的朋友（如果我没记错的话，Chrome 也有一些不错的工具，但我是 Firefox 人）。

# php - 使用php“即时”减少jpeg文件大小

> ID：13793391
> 
> 赞同：0
> 
> 时间：2012-12-10T00:21:52.833
> 
> 标签：php, html, jpeg

当用户使用特定浏览器、操作系统或屏幕尺寸（用于区分移动设备和桌面用户）时，我想即时减小 jpeg 的图像大小（和质量）。我该怎么做呢？我想我会调用一个返回图像的脚本，例如

```
<img src="<?resize.php?file=test.jpg&quality=75?>" 
```

在我的 resize.php 中，我需要将 test.jpg 转换为 imagejpeg ()的*$image资源，我可以使用它来设置图像质量。*我该如何进行转换？也会

```
echo imagejpeg($img,NULL,$quality); 
```

导致使用上面的 html 片段显示图像？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T00:33:17.910

您需要编写调整大小的例程，然后让它保存某人可通过网络访问。而且我会在您第一次调整文件大小时缓存文件，这样您就不必在每次有人加载页面时都调整它的大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T00:28:45.660

两个反对意见：

*   `img` `src`需要一个 URL，而不是图像本身（实际上，可以是一个数据 URL，但这是非常错误的，尤其是在尝试压缩时）

*   为什么要为每次点击重新渲染图像？那将是非常缓慢和低效的。只需预渲染它们并根据用户的规格选择其中一种变体。

如果您仍想即时调整大小，请使用脚本`resize.php`或类似工具来输出给定大小的图像。该脚本必须设置正确的`Content-Type`标题（`image/jpg`例如，您的示例）。然后将其用作标签：

```
<img src="resize.php?file=test.jpg&quality=75"> 
```

（注意：没有 PHP 标签，这只是一个链接！）

# java - java从JPEG中以RAW格式保存图像而不加载其全部内容

> ID：13793393
> 
> 赞同：0
> 
> 时间：2012-12-10T00:22:07.117
> 
> 标签：java, image, image-processing, jpeg

我想知道是否可以加载一个巨大的 JPEG（[参见我之前的问题](https://stackoverflow.com/questions/13386332/java-huge-bufferedimage-in-jscrollpane)）并以可快速加载的格式保存/使用它，而无需将其完全解码的内容加载到内存中。

主要思想是拥有一种文件格式（或我不知道在 Java 中本机会执行此操作的函数），允许动态加载图像的给定区域，而无需加载 800MB 数据。

我实际上使用平铺算法来渲染图像，但它需要加载完整的图像（感谢 mKorbel 和 Gerard Le Blanc），但是这个“预加载”步骤仍然很长。

我不知道该怎么做（首先，这可能吗？），因为谷歌并没有帮到我很多（也许是英语搜索不好？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T16:38:08.550

我在那里找到了我需要的东西：

[非常大的图像处理和平铺](https://stackoverflow.com/questions/2592281/very-large-image-manipulation-and-tiling)

Java JAI 库有很多特性可以处理这类问题，并且得到 Oracle 的支持，这意味着它（理论上）是稳定和可持续的。

感谢@BryanD！

# oauth - CXF 2 legged oauth 示例

> ID：13793395
> 
> 赞同：1
> 
> 时间：2012-12-10T00:22:15.593
> 
> 标签：oauth, cxf

是否有使用 cxf 实现 2 腿 oauth 的示例？

该文档有一个 3 腿实现的实现，但没有 2 腿。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-30T19:28:10.073

对于 2 条腿实施，您需要使用“密码”或“client_credentials”授权。第一个用于代表最终用户，第二个用于充当客户端应用程序本身。

他们的文档中有一个例子。让我知道它是否不适合你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-13T13:59:15.587

这是我最终使用的代码。

```
WebClient client =  WebClient.create(LOGIN_ENDPOINT);
Consumer consumer = new Consumer(CLIENT_ID, CLIENT_SECRET); //The registered client
ClientAccessToken accessToken = OAuthClientUtils.getAccessToken(client, consumer, new ResourceOwnerGrant(USER_ID, USER_SECRET), false); 
```

它实现了“[资源所有者密码凭据访问授权类型](https://datatracker.ietf.org/doc/html/draft-ietf-oauth-v2-10#section-4.1.2)”

# ruby-on-rails - Ruby on Rails 教程 9.2.3 友好转发错误

> ID：13793396
> 
> 赞同：3
> 
> 时间：2012-12-10T00:22:18.770
> 
> 标签：ruby-on-rails, railstutorial.org

我对编程很陌生，我正在尝试阅读本教程。除了为本章末尾的练习编写自己的代码外，我都遵循了给出的代码。我现在陷入了这个错误。

```
Failures:

  1) Authentication authorization for non-signed-in users when attempting to visit a protected page after signing in should render the desired protected page
 Failure/Error: page.should have_selector('title', text: 'Edit user')
   expected css "title" with text "Edit user" to return something
 # ./spec/requests/authentication_pages_spec.rb:63:in `block (6 levels) in <top (required)>'

Finished in 3.12 seconds
73 examples, 1 failure

Failed examples:

rspec ./spec/requests/authentication_pages_spec.rb:62 # Authentication authorization for non-signed-in users when attempting to visit a protected page after signing in should render the desired protected page 
```

这是我添加的代码。

规范/请求/authentication_pages_spec.rb

```
require 'spec_helper'

describe "Authentication" do

  subject { page }

  describe "signin page" do
    before { visit signin_path }

    it { should have_selector('h1',    text: 'Sign in') }
    it { should have_selector('title', text: 'Sign in') }
  end

  describe "signin" do

    before { visit signin_path }

    describe "with invalid information" do
      before { click_button "Sign in" }

      it { should have_selector('title', text: 'Sign in') }
      it { should have_selector('div.alert.alert-error', text: 'Invalid') }

      describe "after visiting another page" do
        before { click_link "Home" }
        it { should_not have_selector('div.alert.alert-error') }
      end
    end

    describe "with valid information" do
      let(:user) { FactoryGirl.create(:user) }
      before { sign_in user }

      it { should have_selector('title', text: user.name) }
      it { should have_link('Profile',  href: user_path(user)) }
      it { should have_link('Settings', href: edit_user_path(user)) }
      it { should have_link('Sign out', href: signout_path) }
      it { should_not have_link('Sign in', href: signin_path) }

      describe "followed by signout" do
        before { click_link "Sign out" }
        it { should have_link('Sign in') }
      end
    end
  end

  describe "authorization" do

    describe "for non-signed-in users" do
      let(:user) { FactoryGirl.create(:user) }

      describe "when attempting to visit a protected page" do
        before do
          visit edit_user_path(user)
          fill_in "Email",    with: user.email
          fill_in "Password", with: user.password
          click_button "Sign in"
        end

        describe "after signing in" do

          it "should render the desired protected page" do
            page.should have_selector('title', text: 'Edit user')
          end
        end
      end

      describe "in the Users controller" do

        describe "visiting the edit page" do
          before { visit edit_user_path(user) }
          it { should have_selector('title', text: 'Sign in') }
        end

        describe "submitting to the update action" do
          before { put user_path(user) }
          specify { response.should redirect_to(signin_path) }
        end
      end
    end

    describe "as wrong user" do
      let(:user) { FactoryGirl.create(:user) }
      let(:wrong_user) { FactoryGirl.create(:user, email: "wrong@example.com") }
      before { sign_in user }

      describe "visiting Users#edit page" do
        before { visit edit_user_path(wrong_user) }
        it { should_not have_selector('title', text: full_title('Edit user')) }
      end

      describe "submitting a PUT request to the Users#update action" do
        before { put user_path(wrong_user) }
        specify { response.should redirect_to(root_path) }
      end
    end
  end
end 
```

应用程序/helpers/sessions_helper.rb

```
module SessionsHelper

  def sign_in(user)
    cookies.permanent[:remember_token] = user.remember_token
    self.current_user = user
  end

  def signed_in?
    !current_user.nil?
  end

  def current_user=(user)
    @current_user = user
  end

  def current_user
    @current_user ||= User.find_by_remember_token(cookies[:remember_token])
  end

  def current_user?(user)
    user == current_user
  end

  def sign_out
    self.current_user = nil
    cookies.delete(:remember_token)
  end

  def redirect_back_or(default)
    redirect_to(session[:return_to] || default)
    session.delete(:return_to)
  end

  def store_location
    session[:return_to] = request.url
  end
end 
```

应用程序/控制器/users_controller.rb

```
class UsersController < ApplicationController
  before_filter :signed_in_user, only: [:edit, :update]
  before_filter :correct_user,   only: [:edit, :update]

  def show
    @user = User.find(params[:id])
  end

  def new
    @user = User.new
  end

  def create
    @user = User.new(params[:user])
    if @user.save
      sign_in @user
      flash[:success] = "Welcome to the Sample App!"
      redirect_to @user
    else
      render 'new'
    end
  end

  def edit
  end

  def update
    if @user.update_attributes(params[:user])
      flash[:success] = "Profile updated"
      sign_in @user
      redirect_to @user
    else
      render 'edit'
    end
  end

  private

    def signed_in_user
      unless signed_in?
        store_location
        redirect_to signin_url, notice: "Please sign in."
      end
    end

    def correct_user
      @user = User.find(params[:id])
      redirect_to(root_path) unless current_user?(@user)
    end
end 
```

这是我在第 8 章第一次练习后的代码。 app/controllers/sessions_controller.rb

```
class SessionsController < ApplicationController

  def new
  end

  def create
    user = User.find_by_email(params[:email])
    if user && user.authenticate(params[:password])
        session[:user] = user.id
        sign_in user
        redirect_to user
    else
        flash.now[:error] = 'Invalid email/password combination'
        render 'new'
    end 
  end

  def destroy
    sign_out
     redirect_to root_path
  end
end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T07:03:42.700

我找到了我的问题和解决方案。session_controller.rb 中的以下代码需要更改。

```
 def create
    user = User.find_by_email(params[:email])
    if user && user.authenticate(params[:password])
        session[:user] = user.id
        sign_in user
        redirect_to user #<--- this line is wrong
    else
        flash.now[:error] = 'Invalid email/password combination'
        render 'new'
    end 
  end 
```

它应该是

```
redirect_back_or user 
```

# python - 在 psycopg2 中将表名作为参数传递

> ID：13793399
> 
> 赞同：71
> 
> 时间：2012-12-10T00:23:10.710
> 
> 标签：python, sql, postgresql, sql-injection, psycopg2

我有以下代码，使用 pscyopg2：

```
sql = 'select %s from %s where utctime > %s and utctime < %s order by utctime asc;'
data = (dataItems, voyage, dateRangeLower, dateRangeUpper)
rows = cur.mogrify(sql, data) 
```

这输出：

```
select 'waterTemp, airTemp, utctime' from 'ss2012_t02' where utctime > '2012-05-03T17:01:35+00:00'::timestamptz and utctime < '2012-05-01T17:01:35+00:00'::timestamptz order by utctime asc; 
```

当我执行此操作时，它会倒下 - 这是可以理解的，因为表名周围的引号是非法的。

有没有办法合法地将表名作为参数传递，或者我需要做一个（明确警告）字符串连接，即：

```
voyage = 'ss2012_t02'
sql = 'select %s from ' + voyage + ' where utctime > %s and utctime < %s order by utctime asc;' 
```

为任何见解干杯。

* * *

## 回答 #1

> 赞同：100
> 
> 时间：2017-03-22T09:37:00.463

根据官方文档：

> 如果您需要动态生成 SQL 查询（**例如动态选择表名**），您可以使用 psycopg2.sql 模块提供的工具。

该`sql`模块是 psycopg2 2.7 版中的新模块。它具有以下语法：

```
from psycopg2 import sql

cur.execute(
    sql.SQL("insert into {} values (%s, %s)")
        .format(sql.Identifier('my_table')),
    [10, 20]) 
```

更多信息：http: [//initd.org/psycopg/docs/sql.html#module-psycopg2.sql](http://initd.org/psycopg/docs/sql.html#module-psycopg2.sql)

[2017-03-24 更新：`AsIs`不应用于表示表或字段名称，`sql`应使用新模块：[https](https://stackoverflow.com/a/42980069/5285608) ://stackoverflow.com/a/42980069/5285608 ]

此外，根据 psycopg2 文档：

> **警告**：从不、**从不**、**从不**使用 Python 字符串连接 ( `+`) 或字符串参数插值 ( `%`) 将变量传递给 SQL 查询字符串。甚至在枪口下也没有。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2015-02-18T20:26:45.763

根据[这个答案](https://stackoverflow.com/a/13891511/1956065)，您可以这样做：

```
import psycopg2
from psycopg2.extensions import AsIs

#Create your connection and cursor...

cursor.execute("SELECT * FROM %(table)s", {"table": AsIs("my_awesome_table")}) 
```

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2012-12-10T00:29:49.503

表名不能作为参数传递，但其他一切都可以。因此，表名应该在您的应用程序中进行硬编码（不要接受输入或使用程序之外的任何内容作为名称）。您拥有的代码应该适用于此。

如果您有正当理由使用外部表名，请确保您不允许用户直接输入它。也许可以传递一个索引来选择一个表，或者可以以其他方式查找表名。但是，您对此保持警惕是正确的。这是可行的，因为周围的表名相对较少。找到一种方法来验证表名，你应该没问题。

可以做这样的事情，看看表名是否存在。这是一个参数化版本。只需确保执行此操作并在运行 SQL 代码之前验证输出。部分想法来自[这个答案](https://stackoverflow.com/a/7471858/544198)。

```
SELECT 1 FROM information_schema.tables WHERE table_schema = 'public' and table_name=%s LIMIT 1 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2017-05-27T21:52:08.050

这是我过去使用的解决方法

```
query = "INSERT INTO %s (col_1, col_2) VALUES (%%s, %%s)" % table_name
cur.execute(query, (col_1_var, col_2_var)) 
```

希望它有帮助:)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-12-13T19:06:17.613

我创建了一个小实用程序，用于预处理带有变量表 (...) 名称的 SQL 语句：

```
from string import letters
NAMECHARS = frozenset(set(letters).union('.'))

def replace_names(sql, **kwargs):
    """
    Preprocess an SQL statement: securely replace table ... names
    before handing the result over to the database adapter,
    which will take care of the values.

    There will be no quoting of names, because this would make them
    case sensitive; instead it is ensured that no dangerous chars
    are contained.

    >>> replace_names('SELECT * FROM %(table)s WHERE val=%(val)s;',
    ...               table='fozzie')
    'SELECT * FROM fozzie WHERE val=%(val)s;'
    """
    for v in kwargs.values():
        check_name(v)
    dic = SmartDict(kwargs)
    return sql % dic

def check_name(tablename):
    """
    Check the given name for being syntactically valid,
    and usable without quoting
    """
    if not isinstance(tablename, basestring):
        raise TypeError('%r is not a string' % (tablename,))
    invalid = set(tablename).difference(NAMECHARS)
    if invalid:
        raise ValueError('Invalid chars: %s' % (tuple(invalid),))
    for s in tablename.split('.'):
        if not s:
            raise ValueError('Empty segment in %r' % tablename)

class SmartDict(dict):
    def __getitem__(self, key):
        try:
            return dict.__getitem__(self, key)
        except KeyError:
            check_name(key)
            return key.join(('%(', ')s')) 
```

SmartDict 对象`%(key)s`为每个 unknown返回`key`，保留它们以进行值处理。该函数可以检查是否缺少任何引号字符，因为现在应该注意所有引用...

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-08-30T19:07:04.767

如果要将表名作为参数传递，可以使用此包装器：

```
class Literal(str):
    def __conform__(self, quote):
        return self

    @classmethod
    def mro(cls):
        return (object, )

    def getquoted(self):
        return str(self) 
```

用法：`cursor.execute("CREATE TABLE %s ...", (Literal(name), ))`

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-04-14T03:11:39.107

这是@Antoine Dusséaux 回答的一个小补充。如果要在 SQL 查询中传递两个（不带引号的）参数，可以按如下方式进行：-

```
query = sql.SQL("select {field} from {table} where {pkey} = %s").format(
    field=sql.Identifier('my_name'),
    table=sql.Identifier('some_table'),
    pkey=sql.Identifier('id')) 
```

根据文档，

> 通常，您应该将查询的模板表示为带有 {} 样式占位符的 SQL 实例，并使用 format() 将可变部分合并到其中，所有这些都必须是 Composable 子类。您仍然可以在查询中使用 %s 样式的占位符并将值传递给 execute()：这样的值占位符将不受 format() 的影响

来源：[https ://www.psycopg.org/docs/sql.html#module-usage](https://www.psycopg.org/docs/sql.html#module-usage)

另外，在编写查询时请记住[这](https://stackoverflow.com/questions/62270786/psycopg2-table-name-as-a-parameter-fails-with-double-quotes)一点。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-12-04T21:56:28.407

您可以只使用模块格式作为表名，然后使用常规参数化执行：

```
xlist = (column, table)
sql = 'select {0} from {1} where utctime > %s and utctime < %s order by utctime asc;'.format(xlist) 
```

请记住，如果这暴露给最终用户，除非您为它编写代码，否则您将不会受到 SQL 注入的保护。

* * *

## 回答 #9

> 赞同：-6
> 
> 时间：2015-12-16T14:39:06.517

很惊讶没有人提到这样做：

```
sql = 'select {} from {} where utctime > {} and utctime < {} order by utctime asc;'.format(dataItems, voyage, dateRangeLower, dateRangeUpper)
rows = cur.mogrify(sql) 
```

format 放入不带引号的字符串。

# drupal - 二级菜单中的用户菜单：为什么？

> ID：13793405
> 
> 赞同：3
> 
> 时间：2012-12-10T00:23:49.070
> 
> 标签：drupal, drupal-blocks, drupal-zen, drupal-regions

我创建了一个 zen 主题的子集。我为此感到非常自豪，但在右上角（#secondary-menu），用户菜单完美地出现了。

我只是不明白它是如何到达那里的？

*   在结构/块中，用户菜单出现在禁用部分（区域：无）
*   实际上，没有称为“辅助菜单”的区域（从 Firebug 获得的元素的 ID）

这不是很奇怪吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T01:02:05.993

我无法评论您的特定模板文件，但标准 Zen page.tpl.php 文件中包含以下内容：

```
<?php if ($secondary_menu): ?>
  <nav id="secondary-menu" role="navigation">
  <?php print theme('links__system_secondary_menu', array(
      'links' => $secondary_menu,
      'attributes' => array(
        'class' => array('links', 'inline', 'clearfix'),
      ),
      'heading' => array(
        'text' => $secondary_menu_heading,
        'level' => 'h2',
        'class' => array('element-invisible'),
      ),
    )); ?>
  </nav>
<?php endif; ?> 
```

这应该回答菜单如何打印到页面上。如果您想更深入地挖掘，`$secondary_menu`变量设置在[`template_preprocess_page()`](http://api.drupal.org/api/drupal/includes%21theme.inc/function/template_preprocess_page/7).

至于为什么它是*用户*菜单......如果你去`admin/structure/menu/settings`你应该看到这个：

![在此处输入图像描述](../Images/151b38995f68a19191fd27b07f154ad4.png)

如果您将辅助链接源更改为其他内容，您应该也会在您的主题中看到这一点。

# objective-c - Objective-C NSMutableArray 不添加对象

> ID：13793408
> 
> 赞同：0
> 
> 时间：2012-12-10T00:24:02.620
> 
> 标签：objective-c, ios6

好像我有问题，不知道我是否做对了，因为我刚刚开始目标 c。

现在我有两个文件

商店.h

```
#import<Foundation/Foundation.h>
#import<MapKit/MapKit.h>

@interface Stores: NSObject

@property(nonatomic,strong) NSString *storeName;
@property(nonatomic,strong) NSMutableArray *MenuItems;

@end 
```

商店.m

```
#import "Stores.h"

@synthesize storeName,MenuItems;

@end 
```

菜单.h

```
#import<Foundation/Foundation.h>

@interface Menu: NSObject

@property(nonatomic,strong) NSString *MenuItemDescription;
@property(nonatomic) int MenuItemPrice;

@end 
```

菜单.m

```
#import "Menu.h"

@synthesize MenuItemDescription,MenuItemPrice;

@end 
```

视图控制器.m

```
#import "ViewController.h"
#import "Stores.h"
#import "Menu.h"

@interface ViewController ()

@end

@implementation ViewController

NSMutableArray *stores;

-(void) viewDidLoad
{
  [super viewDidLoad];

  stores = [[NSMutableArray alloc]init];

  Stores *store = [[Stores alloc]init];

  [store setStoreName:@"Store1"];
  Menu *menuItem = [[Menu alloc]init];
  [menuItem setMenuItemDescription:@"Item1"];
  [menuItem setMenuItemPrice: 7]

  [store.MenuItems addObject:menuItem]; //won't add menuItem to store.MenuItems

  [stores addObject:store]; 

}

@end 
```

所以它最终不会添加任何对象来存储。如果我在调试中运行它，它会说 MenuItems 有零个对象。我知道我做错了什么，但就像我说我是 iOS 新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T00:27:08.310

您没有（至少在您显示的代码中）分配/创建/分配 MenuItems，所以它仍然为零。在 nil 上调用 addObject （或任何东西）只是一个空操作。

试试这个

```
 Stores *store = [[Stores alloc]init];
 store.MenuItems = [NSMutableArray arrayWithCapacity: 10]; 
```

# objective-c - NSMutableDictionary 不会保存数据

> ID：13793412
> 
> 赞同：-1
> 
> 时间：2012-12-10T00:25:03.973
> 
> 标签：objective-c, ios

希望有人可以帮助我解决我一直在努力解决的问题...

使用 MapBox 开发基于地图的应用程序，我想将 NSMutableDictionary 附加到每个地图注释以存储其他数据。我让它工作了，但 XCode 一直在警告我关于我的一些数据/对象类型，所以我检查并整理了它们，现在它坏了。这个想法是，在 ViewDidLoad 上，程序运行一组 plist 字典以正确设置每个注释 - 这仍然可以正常运行，因为我的初始 anno 标记会以正确的设置弹出。但是，我不想每次都返回 plist，而是想将字典附加到每个注释的 userinfo 属性，然后我可以使用它来切换选择数据和其他功能。这是我的代码：

```
NSDictionary *ExploreSteps = [[NSDictionary alloc] initWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"ExploreSteps" ofType:@"plist"]];
for (NSString *key in [ExploreSteps allKeys])
    {
        //Loop through keys for each anno
        NSDictionary *thisStep = [ExploreSteps objectForKey:key];
        NSNumber *annoIndex = [thisStep objectForKey:@"Index"];
        NSNumber *isLive = [thisStep valueForKey:@"isLive"];
        NSString *annoTitle = [thisStep objectForKey:@"Title"];
        NSString *annoText = [thisStep objectForKey:@"Text"];
        NSString *imagefile = [thisStep objectForKey:@"Imagefile"];
        double longitude = [[thisStep objectForKey:@"Longitude"] doubleValue];
        double latitude = [[thisStep objectForKey:@"Latitude"] doubleValue];
        NSString *pagefile = [thisStep objectForKey:@"Pagefile"];
        NSString *audiofile = [thisStep objectForKey:@"Audiofile"];
        CLLocationCoordinate2D annoCoord = CLLocationCoordinate2DMake(latitude, longitude);

        RMAnnotation *annotation = [[RMAnnotation alloc] initWithMapView:mapView coordinate:annoCoord andTitle:annoTitle];
        annotation.annotationIcon = [UIImage imageWithContentsOfFile: [[NSBundle mainBundle] pathForResource:imagefile ofType:@"png"]]; 
        annotation.userInfo = [NSMutableDictionary dictionaryWithObjectsAndKeys:annoIndex, @"index", isLive, @"isLive", annoTitle, @"annoTitle", annoText, @"annoText", imagefile, @"imagefile", pagefile, @"pagefile", audiofile, @"audiofile", nil];
        NSLog(@"Title: %@",[annotation.userInfo objectForKey:@"annoTitle"]);
        [mapView addAnnotation:annotation];
    } 
```

NSLog 应该吐出 annoTitle 字符串，但它每次都给我一个 null，并且应用程序其余部分的行为也表明存储在字典中的信息根本不是“通过”。

有任何想法吗？提前致谢！

ETA：用于初始化字典的修改代码（并不是说它似乎对问题有任何影响！）：

```
NSMutableDictionary *myUserInfo = [[NSMutableDictionary alloc] initWithObjectsAndKeys:annoIndex, @"index", isLive, @"isLive", annoTitle, @"annoTitle", annoText, @"annoText", imagefile, @"imagefile", pagefile, @"pagefile", audiofile, @"audiofile", nil];
        annotation.userInfo = myUserInfo;
        NSLog(@"Title: %@",[annotation.userInfo objectForKey:@"annoTitle"]);
        NSLog(@"Length: %u",[[annotation.userInfo allKeys] count]); 
```

（标题现在返回“（null）”，而长度返回“1”，如果这有帮助的话......）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T05:33:53.183

几乎可以肯定，您的对象之一是`nil`. 你提到`allKeys] count]`回报`1`，所以我可以更进一步说你的价值`isLive`是`nil`。因此，您的原始行：

```
[NSMutableDictionary dictionaryWithObjectsAndKeys:annoIndex, @"index", isLive, @"isLive", annoTitle, @"annoTitle", annoText, @"annoText", imagefile, @"imagefile", pagefile, @"pagefile", audiofile, @"audiofile", nil]; 
```

行为与以下内容完全相同：

```
[NSMutableDictionary dictionaryWithObjectsAndKeys:annoIndex, @"index", nil, @"isLive", annoTitle, @"annoTitle", annoText, @"annoText", imagefile, @"imagefile", pagefile, @"pagefile", audiofile, @"audiofile", nil]; 
```

并且字典`annoIndex`成为最终的键值对。

我建议您可能想要获取可变副本`thisStep`并删除您不想要的键，然后将其作为`userInfo`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T01:24:39.843

这是您为 userInfo 创建 NSMutableDictionary 的方式。看看[[[NSMutableDictionary alloc] initWithObjects:...] 和 [NSMutableDictionary dictionaryWithObjects:...] 之间的区别？](https://stackoverflow.com/questions/1114713/difference-between-nsmutabledictionary-alloc-initwithobjects-and-nsmuta)

" +dictionaryWithObjects: 返回一个自动释放的字典 -initWithObjects: 你必须释放你自己

如果您希望字典作为实例变量持续存在，您应该使用 init 方法创建它或保留自动发布的版本，无论哪种方式，您都应该确保在您的 dealloc 方法中释放它“

# actionscript-3 - 如何处理在两个数据包中收到的信息

> ID：13793415
> 
> 赞同：2
> 
> 时间：2012-12-10T00:25:54.367
> 
> 标签：actionscript-3, sockets, tcp

情况就是这样。我想制作一个游戏，客户端在 Flash 中制作，服务器在 java 上制作。从服务器端，我在流上写入的第一个字节是协议 ID，如下所示：

```
try 
{
 Output.writeByte(LOGIN);
 Output.writeByte((byte)ID);
 Output.writeByte(new_position.x);
 Output.writeByte(new_position.y);
 Output.flush();
} 
```

触发 'onResponse' 事件后，套接字读取如下：

```
type:int = socket_client.readByte();
if (type == 0x1)
FP.console.log("You are logged as " + socket_client.readByte() + " in x:" + socket_client.readByte() + " y:" +  socket_client.readByte() );
else if (type == 0x2)
      FP.console.log("You are now in x:" + socket_client.readByte() + " y:" +  socket_client.readByte()); 
```

正如您现在可能已经猜到的那样，这给我带来了一些问题。有时，服务器将信息分成两部分发送，因此上面的代码会引发 EOF 异常。跟踪以下代码有时会给我这个结果：

```
trace("SIZE: " + socket_client.bytesAvailable);
//var type:int = socket_client.readByte();
var values:String = "";
while (socket_client.bytesAvailable > 0)
       values += socket_client.readByte() + " ";
trace(values);` 
```

价值观：

```
 SIZE: 1
 2 
 SIZE: 2
 2 6 
```

第一个 '2' 是协议 id，第二个和第三个代表 x 和 y 值。现在，问题是，我怎样才能防止这种情况发生？我怎么能“等”到我得到所有需要的信息？顺便说一句，在 java 上这永远不会发生，但我没有比 as3 更多的控制权。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T02:14:57.340

像这样添加`BufferedOutputStream`输出初始化：

```
Output = new DataOutputStream(new BufferedOutputStream(connection.getOutputStream())); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T02:28:38.557

基本上，您需要将消息格式从 切换`[type, data]`到`[type, length, data]`. 然后，等待处理数据直到`bytesAvailable`>= `length`，否则将其放入缓冲区。

`SOCKET_DATA`这是一个使用此逻辑的示例处理程序：

[https://github.com/magicalhobo/Flash-CS5-mobile-proxy/blob/master/com/magicalhobo/mobile/proxy/MobileClient.as#L110](https://github.com/magicalhobo/Flash-CS5-mobile-proxy/blob/master/com/magicalhobo/mobile/proxy/MobileClient.as#L110)

# magento - Magento - translate.csv 和 core_translate 之间的区别

> ID：13793422
> 
> 赞同：2
> 
> 时间：2012-12-10T00:27:12.367
> 
> 标签：magento, internationalization

`translate.csv`翻译和通过表的数据库方法有什么区别`core_translate`？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-10T22:18:39.717

这是来自 app/code/core/Mage/Core/Model/Translate.php 的 init() 方法的一部分

```
//Loading data from module translation files
        foreach ($this->getModulesConfig() as $moduleName=>$info) {
            $info = $info->asArray();
            $this->_loadModuleTranslation($moduleName, $info['files'], $forceReload);
        }
        $this->_loadThemeTranslation($forceReload);
        $this->_loadDbTranslation($forceReload); 
```

从中可以看出，Magento 加载翻译的顺序如下，即 Magento 中有三个选项可以为文本字符串添加自定义翻译：模块翻译、主题翻译和内联翻译。

*模块翻译*

模块翻译以 csv 文件的形式存储在`app/locale/languagecode_COUNTRYCODE/`文件夹中，命名为 Namespace_Modulename.csv 方法内的扩展中的所有字符串都`__()`可以这样翻译

*主题翻译*

字符串可以在您的主题中翻译，因为您只需要通过 Magento 管理区域设置语言环境，然后在其中创建 translate.csv`app/design/frontend/<package>/<theme>/locale/languagecode_COUNTRYCODE`并将您翻译的字符串放入此 CSV

```
“My Cart”,”My Basket”

“My Account”,”Account” 
```

*内联翻译*

要启用内联翻译，您需要登录管理面板并转到`System -> Configuration -> Developer`然后找到内联翻译并`Enabled`为前端设置是

此方法所做的所有翻译都将存储在数据库中的 core_translate 表中。为了更好地了解此方法的工作原理，[请查看此视频。](http://www.magentocommerce.com/magento-on-the-fly/in_line_translations_magento/)

上面的文字是[我在我们博客上的文章的一部分](http://blog.belvg.com/magento-certified-developer-exam-internationalization.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-10T06:31:18.533

core_translate 表用于依赖于 StoreView 的短语

/app/design/frontend/YOUR PACKAGE/YOUR THEME/locale/YOUR LOCALE/translate.csv 用于您的主题的本地语言的短语。如果您更改主题，则不会使用此短语（将使用来自新主题的 translate.csv）。

如果短语在数据库和 csv 中可用，则将使用 DB 短语。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-27T17:03:01.807

正如我所看到的，当您在多个服务器上以分布式方法运行 magento 并且从文件系统读取并不理想时，core_translate 很有用。我使用带有内联翻译的 core_translate 来处理 CMS 块中的翻译内容。(a mod) 这样做的原因是从 db 读取比解析 .csv 更快。（我不知道打开缓存是否如此，但这似乎是最安全的路线）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T01:42:51.730

我挖出了这个旧论坛，提出了一些建议。可能 Magento 正在尝试使用内联 core_translate 方法并推出 translate.csv。然而，鉴于论坛主题是从 2008 年开始的，情况似乎并非如此。另一个建议是，有些语言在数据库中使用 core_translate，而有些语言则将记录保存在 .csv 中。可能 .csv 是为本地维护者准备的，而 core_translate 是为管理员准备的。这是线程[http://www.magentocommerce.com/boards/viewthread/40510/](http://www.magentocommerce.com/boards/viewthread/40510/)

# php - PHP：如何用扩展数据（递归）替换 bbcode-quote？

> ID：13793426
> 
> 赞同：0
> 
> 时间：2012-12-10T00:27:31.593
> 
> 标签：php, recursion, replace, bbcode

这是我引用帖子的 bbcode（12345 是原始帖子的 id）：

```
[quote=12345] ... citation ... [/quote] 
```

我想显示这样的报价：

```
<blockquote>
    <a href="">Username</a> at 2012-09-12 11:00 a.m. (<a href="">original</a>):
    ... citation ...
</blockquote> 
```

**想法**（伪代码）：

```
$bbcode_content = "[quote=12345] ... citation ... [/quote]";

// 1\. get the $post_id
$post_id = replace('/\[quote\=(.*?)\]/is','$1', $bbcode_content);

// 2\. select the post data from databse
$post_obj = $DB->select("SELECT `author`, `timestamp` FROM `posts` WHERE id=".$post_id);

// 3\. build an extended bbcode tag
$bbcode_content = "[quote post_id={$post_id} timestamp={$post_obj->timestamp} author={$post_obj->author}]";

// 4\. bbcode to html
$html = replace("[quote post_id=(*) timestamp=(*) author=(*)]", '<blockquote><a href="">$1</a> at '.date("Y-m-d h:i", $2).' (<a href="forum/post/$3">original</a>)', $bbcode_content);
$html = replace("[/quote]", "</blockquote>", $html); 
```

**问题**：

1.  如何递归替换这些东西？也许用[preg_replace_callback](http://php.net/manual/de/function.preg-replace-callback.php)？
2.  我的第四点“bbcode to html”的正则表达式是什么？

我有点困惑。你会如何解决这个问题？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T00:49:38.597

你总是可以使用[PHP 中的 bbcode 扩展](http://php.net/bbcode)来为你处理这个问题。

# ruby-on-rails - 未保存模型时如何在不覆盖行为的情况下更改respond_with中的位置

> ID：13793427
> 
> 赞同：0
> 
> 时间：2012-12-10T00:27:33.367
> 
> 标签：ruby-on-rails, ruby-on-rails-3, controller, ruby-on-rails-3.2, respond-with

给定以下控制器。

```
class Posts_controller < ApplicationController
    def create
        @post = Post.new(:params[:post])
        flash[:notice] = 'Post successfully saved' if @post.save
        respond_with(@post, :location => my_custom_url)
    end
end 
```

如果没有保存帖子，即因为它没有通过一个或多个验证，控制器会转到 my_custom_url 而不是呈现它在没有给出位置时会执行的“新”视图。

有没有办法阻止这种行为被覆盖？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T00:38:14.170

事实证明，位置毕竟没有改变，但是在 url 生成期间代码失败[https://github.com/rails/rails/issues/2798](https://github.com/rails/rails/issues/2798)。

# android - 两个具有相同 xml 属性的 ImageView 在 Android 相对布局中表现不同

> ID：13793430
> 
> 赞同：0
> 
> 时间：2012-12-10T00:27:48.033
> 
> 标签：android, xml, android-layout, android-relativelayout, android-imageview

我在相对布局中有两个图像视图。一个的宽度几乎是另一个的 3 倍。两个 png 都是 60px x 60px，所以我不明白为什么一个被绘制 3 倍宽。图像没有被拉伸，它只是在相对布局中占用了 3 倍的宽度。

两个图像视图：

```
<RelativeLayout
    android:id="@+id/linerlayout1"
    android:layout_width="wrap_content"
    android:layout_height="50dp"
    android:layout_above="@+id/container_ide"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true"
    android:background="@drawable/gradient" >

    <ImageView
        android:id="@+id/imageView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:layout_weight="1"
        android:clickable="true"
        android:onClick="that"
        android:padding="6dp"
        android:src="@drawable/icon_image" />

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_weight="1"
        android:clickable="true"
        android:onClick="this"
        android:padding="6dp"
        android:src="@drawable/image_two" />

</RelativeLayout> 
```

他们应该（据我所知）行为完全相同。正如您在下面的屏幕截图中看到的那样，`@drawable/image_two`它的行为很不正常。三倍宽的边界框正在扼杀我的布局。有任何想法吗？

![在此处输入图像描述](../Images/3911334947ac752fad8f31e770d34c12.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T00:47:17.733

您的代码对我来说适用于不同的图像。

所以也许这与你的形象有关？

# jquery - 如何使用滚动条将 div 固定到另一个 div

> ID：13793433
> 
> 赞同：3
> 
> 时间：2012-12-10T00:28:16.370
> 
> 标签：jquery, css, html, css-position

我有

```
<div id="div1">
  any not fixed text
  but this div has scrollbar

  <div id="div2">
  this div is fixed (without scrollbar)
  </div>

</div> 
```

我需要`div2`固定到`div1`，但不固定到主浏览器滚动条。类似于“将 div2 粘贴到 div1”之类的东西。

`div1`有滚动条，这就是我需要修复的原因`div2`。

如果我这样做：

```
#div1 {
    position: absolute;
}
#div1 #div2 {
    position: fixed;
} 
```

它会修复`div1`和浏览器的窗口，但我只需要`div1`.

测试示例：

```
<html>
<head>
<style type="text/css">
#div1 {
    border: 1px solid gray;
    position: absolute;
    height: 200px;
    width: 400px;
    overflow-y: scroll;
}
#div1 #div2 {
    position: fixed;
    margin-left: 300px;
}
</style>
</head>
<body>
    <br><br><br>
    <div id="div1">
        <div id="div2">fixed text</div>

            <div style="height: 400px;"></div>
    </div>

    <div style="height: 1400px;"></div>
</body>
</html> 
```

**Q1：如何`div2`解决`div`**

**Q2：在这种情况下如何到`float: right` `div2`右侧`div1`（例如它是〜`margin-left: 350px;`）**

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T01:17:47.147

问题是您无法将 div2 修复为 div1，因为修复 div 意味着“保持 div 的顶部（从其*最近定位的容器的**内部顶部*测量）保持不变”。*内部顶部*是指容器的上部，随着用户滚动而上下移动。

 **解决方案（[此处为 jsfiddle](http://jsfiddle.net/roimergarcia/nykw3/)）将 div1 和 div2 都固定到外部容器。这将是您的 CSS：

```
<style type="text/css">
#container{
    border: 1px solid gray;
    position: absolute;
    height: 200px;
    width: 400px;   
}

#div1{
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    overflow-y: scroll; 
}
#div2 {
    position: absolute;
    right: 14px;
    top: 0px;
}​
</style> 
```

这是你的 HTML

```
<br><br><br>
<div id="container">
    <div id="div1">
        <div style="height: 800px;"></div>
    </div>
    <div id="div2">fixed text</div>               
</div> 
<div style="height: 1400px;"></div>​​​​​​​​​​​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T01:22:16.223

固定总是到浏览器窗口。您不能在带有滚动条的元素的上下文中使用它。

这将在某些层面上起作用：http: [//jsfiddle.net/WP7GB/1/](http://jsfiddle.net/WP7GB/1/)

```
<div id="div1">
    <div id="div2">fixed text</div>
    <div style="height: 400px;"></div>
</div>
<div style="height: 1400px;"></div> 
```

CSS：

```
#div1 {
    border: 1px solid gray;
    position: relative;
    height: 200px;
    width: 400px;
    overflow-y: scroll;
}

#div2 {
    position: absolute;
    top:0;
    right:5px;
} 
```

JS：

```
$(document).ready(function(){

    var $div2 = $("#div2");

    $("#div1").scroll(function(e){

        $div2.css("top", this.scrollTop);

    });        

}); 
```**

# php - 具有多个条件的 if else 语句

> ID：13793434
> 
> 赞同：0
> 
> 时间：2012-12-10T00:28:17.190
> 
> 标签：php, if-statement

我试图做的是在我的 sql 查询之前设置正确的变量。这是我创建的 if 语句，但是我无法让它正确回显。下面提供的设置应该回显 fnm 但正在回显 nm。我在这里做错了什么以使每个 if 语句中的两个变量都匹配，以便我可以插入正确的数据

```
$type = "No Notification";
$remote = "Yes";
if ($type == "No Notification" && $remote == "No"){
$type = "nm";
}
elseif ($type == "Email Notification" && $remote == "No"){
$type = "m";
}
elseif ($type == "No Notifcation" && $remote == "Yes"){
$type = "fnm";
}
elseif ($type == "Email Notification" && $remote == "Yes"){
$type = "fm";
}
else {
$type = "nm";
}

echo $type; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T00:33:08.630

你的第二个 elseif 有一个错字：**通知**应该是**通知** 这些事情发生了:)

# javascript - 我的 div 的高度只有 0px

> ID：13793437
> 
> 赞同：0
> 
> 时间：2012-12-10T00:29:03.873
> 
> 标签：javascript, html, css

我的 #root_menu_div 的高度为 0px，即使我有以下 CSS 规则：

```
#html{height:100%}
#body{height:100%}
#container{height:100%}
#body_container{height:100%}
#search{height:100%}

#root_menu_div {
min-height:100% !important; 
display:block !important; 
position:static !important;
} 
```

#root_menu_div 的内容在其容器之外流动（#search）。所以我认为我有高度/位置/显示问题。它的行为就像我缺少一个结束标签，但我拥有它们。

这是网址： [http ://whiterootmedia.com/root_menu/index.html](http://whiterootmedia.com/root_menu/index.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T00:54:48.863

正如@bfavaretto 和@j08691 建议的那样，尝试以下操作：

```
html, body {height:100%;}
#root_menu_div {min-height:100%;} 
```

[jsFiddle 演示](http://jsfiddle.net/Matt_Coughlin/gPcgA/)。在 IE7/8/9、FF、Safari、Chrome 中测试良好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T00:38:39.603

如果高度是相对于浏览器窗口的，则不能将高度设置为 100%，除非您使用 javascript。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T00:48:15.643

div 容器中包含的所有内容都是隐藏的。

您可以添加`&nbsp;`到 div 的内部 html。

# html - 有序列表两列流

> ID：13793438
> 
> 赞同：10
> 
> 时间：2012-12-10T00:29:17.300
> 
> 标签：html, css, layout, html-lists, two-columns

`ol`如果它比容器的高度长，我想要一种最好的纯 CSS 技术来让它流入两列。列表中的项目数量可能会有所不同，并且容器的高度可能会发生变化。

当我尝试将 li 设置为时`width:50%`，`float:left`它分为两列，但 2 在 1 旁边而不是在其下方。

我想要实现的是：

1.  abcdef 4\. abcdef
2.  abcdef 5\. abcdef
3.  abcdef

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-12-10T00:43:43.800

这适用于使用`column-count`and`column-gap`规则的现代浏览器（即不是 IE）：

[小提琴](http://jsfiddle.net/Q7Mvj/1/)

```
ol#two-columns {
    -moz-column-count: 2;
    -moz-column-gap: 20px;
    -webkit-column-count: 2;
    -webkit-column-gap: 20px;
    column-count: 2;
    column-gap: 20px;
} 
```

跨浏览器选项将是：

1.  在 OL 内部定义两个 DIV 并将它们浮动到左侧
2.  预先计算 LI 的总数
3.  如果总数超过一个 DIV 的容量，则将其余部分放入第二个 DIV

# c++ - DirectX 11 获取显卡说明

> ID：13793442
> 
> 赞同：1
> 
> 时间：2012-12-10T00:29:55.493
> 
> 标签：c++, c++11, directx, directx-11

我正在尝试遍历系统上可用的 GPU，并将每个输出的描述打印到控制台上。我有检索它们的代码，但我不知道如何获取描述。

```
std::vector <IDXGIAdapter1*> availableAdapters = EnumerateAdapters();

for_each(availableAdapters.begin(), availableAdapters.end(), [](IDXGIAdapter1* adapter) {
    auto myAdapter = *adapter;
    auto adapterDescription = new DXGI_ADAPTER_DESC1();
    myAdapter.GetDesc1(adapterDescription);
    // Print description to console here
}); 
```

我收到一个编译时错误，指向该`auto myAdapter = *adapter;`行，尽管它说`error C2259: 'IDXGIAdapter1' : cannot instantiate abstract class`

我正在使用 DirectX 11、Windows 64 位和 Visual Studio 2012。感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T02:04:13.253

尝试

```
auto& myAdapter = *adapter;
auto adapterDescription = DXGI_ADAPTER_DESC1();
myAdapter.GetDesc1(&adapterDescription); 
```

# python - 不同计算机上多个用户的本地服务器地址？（Python）

> ID：13793446
> 
> 赞同：1
> 
> 时间：2012-12-10T00:30:59.373
> 
> 标签：python, postgresql

我正在和一些朋友一起构建一个 PostgreSQL/SQLAlchemy Python 应用程序并具有以下行：

`engine = create_engine('postgresql+pg8000://oldmba@localhost/helloworld')`

新手问题：每当我`git pull`使用别人的代码时，不必一直在“oldmba”（我的用户名）中进行编辑，有什么简单的方法可以使该行同样适用于所有用户，这样我们就不必经常编辑它？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T00:37:41.300

有一个包含您的设置的配置文件。

它可以将数据存储在 python config 字典或变量中

配置文件可以从 local_settings.py 文件中导入。这个文件可以在你的 gitignore 中被忽略。它可以包含您的个人设置、用户名、密码、数据库 url，几乎所有您需要配置的内容，并且可能因您的环境而异（生产与开发）

这就是 django 项目中的设置通常是如何处理的。它允许多个用户使用不同的设置在同一个项目上进行开发。如果您需要将数据库设置为不同的服务器，但在开发中使用“localhost”，您可能需要一个“database_url”字段或其他类似的东西

```
# config.py

database = {
  'username': 'production_username',
  'password': 'production_password'
}

try:
  from local_config import *
catch ImportError:
  pass

# local_config.py
 database = {
  'username': 'your_username',
  'password': 'your_password'
}

from config import *
engine = create_engine('postgresql+pg8000://{0}@localhost/helloworld'.format(database['username'])) 
```

# wcf - WCF-NetNamedPipe 的 ChannelFactory

> ID：13793451
> 
> 赞同：1
> 
> 时间：2012-12-10T00:31:38.833
> 
> 标签：wcf, netnamedpipebinding

**更新 20121214** 咨询冲突服务的开发者，他们使用**net.pipe://echonet**作为服务地址，并使用**DuplexChannelFactory**。为什么它会阻塞我的管道？

* * *

**问题：**

我有一个非常简单的 WCF 应用程序。Service 和 Client 通过 NetNamedPipe 通信。但奇怪的是，有些机器可能是因为其他软件的原因，导致ChannelFactory开始调用Service，抛出异常：System.ServiceModel.ProtocolException。

我怎么知道哪个应用程序捕获了我的 WCF 消息，以及我应该如何避免这个问题。

这是例外：

```
System.ServiceModel.ProtocolException: The requested upgrade is not supported by 'net.pipe://localhost/xxxx/xxxx'. This could be due to mismatched bindings (for example security enabled on the client and not on the server)

Server stack trace: 
  System.ServiceModel.Channels.ConnectionUpgradeHelper.DecodeFramingFault(ClientFramingDecoder decoder, IConnection connection, Uri via, String contentType, TimeoutHelper& timeoutHelper)
  System.ServiceModel.Channels.ClientFramingDuplexSessionChannel.SendPreamble(IConnection connection, ArraySegment`1 preamble, TimeoutHelper& timeoutHelper)
  System.ServiceModel.Channels.ClientFramingDuplexSessionChannel.DuplexConnectionPoolHelper.AcceptPooledConnection(IConnection connection, TimeoutHelper& timeoutHelper)
  System.ServiceModel.Channels.ConnectionPoolHelper.EstablishConnection(TimeSpan timeout)
  System.ServiceModel.Channels.ClientFramingDuplexSessionChannel.OnOpen(TimeSpan timeout)
  System.ServiceModel.Channels.CommunicationObject.Open(TimeSpan timeout)
  System.ServiceModel.Channels.ServiceChannel.OnOpen(TimeSpan timeout)
  System.ServiceModel.Channels.CommunicationObject.Open(TimeSpan timeout)
  System.ServiceModel.Channels.ServiceChannel.CallOpenOnce.System.ServiceModel.Channels.ServiceChannel.ICallOnce.Call(ServiceChannel channel, TimeSpan timeout)
  System.ServiceModel.Channels.ServiceChannel.CallOnceManager.CallOnce(TimeSpan timeout, CallOnceManager cascade)
  System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins, Object[] outs, TimeSpan timeout)
  System.ServiceModel.Channels.ServiceChannelProxy.InvokeService(IMethodCallMessage methodCall, ProxyOperationRuntime operation)
  System.ServiceModel.Channels.ServiceChannelProxy.Invoke(IMessage message)

Exception rethrown at [0]: 
  System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg)
  System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 type)
  xxx.xxxxx.Communication.Contracts.IxxxComClientService.Register(ClientInfo clientInfo)
  xxx.xxxxx.Communication.xxxComClient.ActionClientRegisterOnlineClientInfo(IxxxComClientService channel)
  xxx.xxxxx.Communication.xxxComClient.ActionReceivedClientOnline(EndpointAddress endpoint) 
```

这是我的代码'

- - - - - - - - - - - - - - 服务 - - - - - - - - - - - ---------

```
 using (var host = new ServiceHost(typeof(StringReverser), new[] { new Uri("net.pipe://localhost") }))
 {
     host.AddServiceEndpoint(typeof(IStringReverser), new NetNamedPipeBinding(), "PipeReverse");
     host.Open();

     Console.WriteLine("Service is available. Press <ENTER> to exit.");
     Console.ReadLine();

     host.Close();
  } 
```

- - - - - - - - - - - - - 客户 - - - - - - - - - - - - ----------

```
var pipeFactory = new ChannelFactory<IStringReverser>(new NetNamedPipeBinding(), new EndpointAddress("net.pipe://localhost/PipeReverse"));
Console.WriteLine("pipeFactory Created. Press <Exit> to exit");
var pipeProxy = pipeFactory.CreateChannel();
Console.WriteLine("pipeProxy Created.");

while (true)
{
   var str = Console.ReadLine();
   Console.WriteLine("pipe: " + pipeProxy.ReverseString(str));
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T08:02:59.617

*   b1。该服务是windowsservice上的主机，以管理员身份运行
*   b2。服务，设置 net.pipe://echonet 作为他的地址
*   b3。我的服务是自托管，以本地用户身份运行

windowsservice > localuser 因此，namedpipe 将重定向到该服务。

*   s1。停止服务
*   s2。更改我的服务主机，让它托管在 windowsservice 上。

# c - 从 .txt 文件中读取数字并将它们存储在 C 中的数组中

> ID：13793453
> 
> 赞同：3
> 
> 时间：2012-12-10T00:32:57.207
> 
> 标签：c, arrays, file, store

我一直在试图弄清楚如何读取分数并将它们存储在数组中。已经尝试了一段时间，它显然不适合我。请帮忙。

```
//ID    scores1 and 2
2000    62  40
3199    92  97
4012    75  65
6547    89  81
1017    95  95//.txtfile

int readresults (FILE* results , int* studID , int* score1 , int* score2);

{
// Local Declarations
int *studID[];
int *score1[];
int *score2[];

// Statements
check = fscanf(results , "%d%d%d",*studID[],score1[],score2[]);
if (check == EOF)
    return 0;
else if (check !=3)
    {
        printf("\aError reading data\n");
        return 0;
    } // if
else
    return 1; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T00:38:20.097

*   您声明变量两次，一次在参数列表中，一次在“局部声明”中。

*   函数大括号未关闭。

*   `fscanf`只能读取由其格式字符串指定的多个项目，在本例中为 3 ( ) `"%d%d%d"`。它读取数字，而不是数组。要填充数组，您需要一个循环（`while`或`for`）。

**编辑**

好的，这是一种方法：

```
#define MAX 50
#include <stdio.h>

int readresults(FILE *results, int *studID, int *score1, int *score2) {
  int i, items;
  for (i = 0;
      i < MAX && (items = fscanf(results, "%d%d%d", studID + i, score1 + i, score2 + i)) != EOF;
      i++) {
    if (items != 3) {
      fprintf(stderr, "Error reading data\n");
      return -1; // convention: non-0 is error
    }
  }
  return 0; // convention: 0 is okay
}

int main() {
  FILE *f = fopen("a.txt", "r");
  int studID[MAX];
  int score1[MAX];
  int score2[MAX];
  readresults(f, studID, score1, score2);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T01:03:43.140

如果您只想调用该函数一次并让它读取所有学生的分数，您应该使用以下内容：

```
int i=0;
check = fscanf(results , "%d %d %d",&id[i],&score1[i],&score2[i]);
while(check!=EOF){
        i++;
        check = fscanf(results , "%d %d %d",&id[i],&score1[i],&score2[i]);
    } 
```

# facebook - 寻找邀请你的人 :: Facebook FQL Explorer Bug: "Inviter":null

> ID：13793457
> 
> 赞同：6
> 
> 时间：2012-12-10T00:33:19.000
> 
> 标签：facebook, facebook-graph-api, facebook-opengraph, facebook-fql

类似的悬而未决的问题，但是这个问题更多地集中在现在的地方。我被引导相信 Facebook 的 FQL 存在错误，因为 event_member 表永远不会为“邀请者”返回非空答案，[测试过的大型和小型事件，公共和私人以及自我管理的事件]。Facebook 网站上没有报告“邀请者”错误，互联网上其他地方也没有参考。Facebook 在他们的图表中出现错误是否很常见（我希望不会）？难道这是现在贬值了（没有它存在的痕迹）？我应该等待还是继续尝试？如果是event_member的全新功能，应该不会有新闻发布之类的吧？

在 Facebook 的 FQL 资源管理器上尝试此示例：[https ://developers.facebook.com/tools/explorer?fql=select%20inviter%2C%20inviter_type%2Cuid%2C%20rsvp_status%20from%20event_member%20where%20eid%20%3D% 20321938874572158%3B](https://developers.facebook.com/tools/explorer?fql=select%20inviter%2C%20inviter_type%2Cuid%2C%20rsvp_status%20from%20event_member%20where%20eid%20%3D%20321938874572158%3B)

TL；DR：这不起作用：从 event_member 中选择邀请者、邀请者类型、uid、rsvp_status，其中 eid = 321938874572158；

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T18:12:27.397

为邀请者字段返回的图表仅报告第**一个****邀请**您**的**人，而不是其他任何人。如果您自己创建了活动，或者在没有邀请的情况下“参加”了活动（例如通过查找链接），那么您将没有“邀请者”。因此，要回答您的问题，不存在“**严重错误**”。

 ******返回的部分实际图形结果如下所示：

*   我被邀请了 3 次，但只显示了一个 ID。
*   它具有“朋友的朋友”的隐私级别。
*   我会参加的。
*   使用的命令是**SELECT uid, rsvp_status,inviter FROM event_member WHERE eid=5612079XXXXXXXX;**

    {
    “uid”：51454XXXX，
    “rsvp_status”：“参加”，
    “邀请者”：空
    }，
    {
    “uid”：3124XXXX，
    “rsvp_status”：“参加”，
    “**邀请者**”：**16498** XXXX                   **<------这是我的邀请，来自另一个用户**

    },
    {
    "uid": 127868XXXX,
    "rsvp_status": "attending", "inviter"
    : null
    },
    {
    "uid": **164982** XXXX,
    "rsvp_status": "attending", "
    inviter “：空
    }

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T14:08:32.583

这是我在使用我自己的事件和其他人创建的事件进行测试后可以看到的：

该`event_member`表的`inviter`字段将为`null`作为事件创建者的用户返回。

例如，`eid`111 的假设事件是由拥有`uid`222 的约翰创建的。然后约翰邀请拥有`uid`333 的简。

当我们查询时：

```
select uid, inviter from event_member where eid=111 
```

我们收到：

```
{
  "data": [
   {
      //Jane's data
      "uid":333,
      "inviter": 222 
    }, 
    {
      //John's data 
      "uid": 222,
      "inviter": null
    }
  ]
} 
```

因此，除了事件创建者之外的所有用户都有一个非空`inviter`值。

我不知道这是否与您的发现相符，或者您发现的是否是不同的问题/错误。******

# mysql - Rails - 直接在 SQL 中更新

> ID：13793458
> 
> 赞同：2
> 
> 时间：2012-12-10T00:34:01.600
> 
> 标签：mysql, sql, ruby-on-rails

深入研究文档和 api，我似乎错过了如何一次更新多行中的一个字段。

就像是

```
Table.select(:field).update("update to this").where(id: 4,5,6) 
```

会好的。

这样的事情存在吗？这比必须将所有内容存储在数组中，将其设置为一个值并`save`每次调用要好得多。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T01:06:08.287

您可以使用[update_all](http://apidock.com/rails/ActiveRecord/Relation/update_all)方法，例如：

```
Table.update_all("field = 'update to this'", ["id in (?)", ids]) 
```

# c# - “EF 外键（或实体？）没有级联/更新

> ID：13793463
> 
> 赞同：1
> 
> 时间：2012-12-10T00:34:53.060
> 
> 标签：c#, entity-framework, asp.net-mvc-4, asp.net-web-api

我在 MVC4 中使用 WebAPI。我有一个简单的表单，它通过 PUT 请求将数据提交给 API。数据到达并被很好地序列化，一切看起来都很棒，除了任何有外键的地方都没有更新。是的，外键存在。

我有以下课程：

```
public class TriageRecord
{
    [Key]
    public Int64 PKEY { get; set; }
    public DateTime DateAdded { get; set; }
    public DateTime DateUpdated { get; set; }
    public Int64? RecordSource_Id { get; set; }  
    public Int64? AssignedVolunteer_Id { get; set; }  
    public string FacebookID { get; set; }
    public Int64? VANID { get; set; }
    public Int64? NationBuilderID { get; set; }
    public DateTime? DateVanSubmitted { get; set; }
    public Int64? FollowUpLevel_Id { get; set; } 
    public bool? Complete { get; set; }

    public string First { get; set; }
    public string Mid { get; set; }
    public string Last { get; set; }
    public string Email { get; set; }
    public string Address1 { get; set; }
    public string City { get; set; }
    public string State { get; set; }
    public string Zip5 { get; set; }

    public string HomePhone { get; set; }
    public string CellPhone { get; set; }

    public Int32? EmployeeStatus { get; set; }
    public string StoreNumber { get; set; }
    public virtual WorkArea WorkArea { get; set; }   //put your focus here
    public virtual Department Department { get; set; }
    public virtual Shift Shift { get; set; }

   } 
```

这是我通过表单更新的 WorkArea 类。

```
public class WorkArea
{
    [Key]
    public Int64 Id { get; set; }
    [StringLength(200)]
    public string WorkAreaName { get; set; }
} 
```

这是我发布的 JSON，它非常好地到达我的 API 控制器：

```
 var saveRecord = function() {
            var record = {
                "PKEY": $("#PKEY").val(),
                "DateAdded": $("#DateAdded").val(),
                "DateUpdated": "@DateTime.Now.ToString()",
                "First": $("#First").val(),
                "Mid": $("#Mid").val(),
                "Last": $("#Last").val(),
                "RecordSource_Id": $("#RecordSource_Id").val(),
                "AssignedVolunteer_Id": $("#AssignedVolunteer_Id").val(),
                "FacebookID": $("#FacebookID").val(),
                "VANID": $("#VANID").val(),
                "NationBuilderID": $("#NationBuilderID").val(),
                "DateVanSubmitted": Date.now(),
                "FollowUpLevel_Id": $("#FollowUpLevel_Id").val(),
                "Complete": $("#Complete").val(),
                "Email": $("#Email").val(),
                "Address1": $("#Address1").val(),
                "City": $("#City").val(),
                "State": $("#State").val(),
                "Zip5": $("#Zip5").val(),
                "HomePhone": $("#HomePhone").val(),
                "CellPhone": $("#CellPhone").val(),
                "EmployeeStatus": $("#EmployeeStatus").val(),
                "StoreNumber": $("#StoreNumber").val(),
                "WorkArea": {
                    "Id": 1,
                    "WorkAreaName": "GM"
                },
                "Department": $("#Department").val(),
                "Shift": $("#Shift").val()                       
            }; 
```

它被序列化并到达我的控制器，当我设置断点时，我可以看到 WorkArea (Models.WorkArea) 填充了 Id = 1 & WorkAreaName = "GM"

所以这是我的控制器：

```
 public HttpResponseMessage PutTriageRecord(long id, TriageRecord triagerecord)
    {
        if (id == triagerecord.PKEY)  //breakpoint here shows triagerecord contains workarea values
        {                
            db.Entry(triagerecord).State = EntityState.Modified;                
            try
            {                    
            db.SaveChanges();  //changes get saved for everything (ie, first name) but not workarea...
            }
            catch (DbUpdateConcurrencyException)
            {
                return Request.CreateResponse(HttpStatusCode.NotFound);
            }

            return Request.CreateResponse(HttpStatusCode.OK);
        }
        else
        {
            return Request.CreateResponse(HttpStatusCode.BadRequest);
        }
    } 
```

除了 WorkArea 之外，我的 TriageRecord 中的所有内容都已更新……为什么？

更新：不工作。这就是我添加到控制器中的内容......它只是在 WorkAreas 表中不断创建大量的整体。

```
 public HttpResponseMessage PutTriageRecord(long id, TriageRecord triagerecord)
    {
        if (id == triagerecord.PKEY)  //breakpoint here shows triagerecord contains workarea values
        {                
            db.Entry(triagerecord).State = EntityState.Modified;                
            try
            {      
                db.TriageRecords.Attach(triagerecord);   //attach
                db.Entry(triagerecord.WorkArea).State = EntityState.Added;   //add           
            db.SaveChanges();  //WORKS!
            }
            catch (DbUpdateConcurrencyException)
            {
                return Request.CreateResponse(HttpStatusCode.NotFound);
            }

            return Request.CreateResponse(HttpStatusCode.OK);
        }
        else
        {
            return Request.CreateResponse(HttpStatusCode.BadRequest);
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T01:32:26.027

您需要调用 Attach 并将子对象的状态设置为已添加。它与 WebApi 没有任何关系，这就是 EF 在处理分离对象时的工作方式（例如，当您将它们发送到客户端并返回时）。db 上下文跟踪是更改，因此当您使用分离的对象时，它不会知道已添加的内容会自动修改。

*“如果你不调用 Attach，孩子们会保持分离状态，直到调用 SaveChanges，EF 将假定它们是新实体（因为它们没有附加到上下文）并将它们的状态设置为已添加。然后它们将被插入到数据库中。”*

[EF 4.3 CF 在保存更改时不更新关系](https://stackoverflow.com/questions/11074662/ef-4-3-cf-does-not-update-relationships-when-saving-changes)

# jquery - jQuery模糊和生成密码输入框的焦点问题

> ID：13793464
> 
> 赞同：2
> 
> 时间：2012-12-10T00:35:13.013
> 
> 标签：jquery, forms, passwords, focus, blur

我正在构建一个 jQuery 表单验证插件。该脚本使用 title 属性来标记输入字段。这导致将输入密码换成输入文本，以便字段标题可读。

```
$(FormID).find('input:password').each(function() {  
    $("<input type='text'>").attr({ name: this.name, value: this.value, title: this.title, id: this.id }).insertBefore(this); 
}).remove(); 
```

当我单击密码输入框时，它按预期工作。以下代码将文本输入替换为密码输入，删除标签，应用适当的样式和焦点。

```
$(":input").focus(function(){//Clears any fields in the form when the user clicks on them       
   if ($(this).hasClass("va") ) {
        $(this).val('');
        $(this).removeClass("va").addClass('focused');
   }
});
$(':input[title]').each(function() {//Add the title attribute to input fields and disappear when focused 

    if($(this).val() === '') {
        $(this).val($(this).attr('title')); 
    }

    $(this).focus(function() {
        if($(this).val() == $(this).attr('title')) {
            $(this).val('').addClass('focused');
        }
        if ($(this).attr('id')=="pass1" || $(this).attr('id')=="pass2") {
            $("<input type='password'>").attr({ name: this.name, title: this.title, id: this.id }).insertAfter(this).prev().remove();
            $("#"+$(this).attr('id')).focus().addClass('focused');
        }
    });

    $(this).blur(function() {
        if($(this).val() === '') {
            $(this).val($(this).attr('title')).removeClass('focused');
        }
        if ($(this).attr('id')=="pass1" || $(this).attr('id')=="pass2") {
            $("<input type='text'>").attr({ name: this.name, value: this.value, title: passtitle, id: this.id }).insertAfter(this).prev().remove();
            $("#"+$(this).attr('id')).blur().removeClass('focused');
        }
    });
}); 
```

当用户在焦点输入框外单击时，模糊功能不会触发。如何让它像其他表单元素一样模糊？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T15:20:58.777

**更新：**更彻底地重新阅读您的问题后，我正在改变我的答案。

当输入没有聚焦时，您基本上是在尝试使输入元素的“标题”出现在框中。这是很常见的事情，但你的方法已经过时了。我建议改用 HTML5“占位符”属性。它是任何现代浏览器的本机（我有旧浏览器和 IE 的解决方案）。但是，您仍然无法在密码字段中显示占位符文本。一般来说，在我看来，这不应该是真正需要的，甚至根本不需要这样做。密码字段的外观通常与普通文本字段略有不同，因此更改输入可能会导致轻微的显示故障。

要使用占位符，只需像这样构建您的输入：

```
<input name="username" placeholder="Username" type="text" /> 
```

“占位符”属性将用于填充输入中显示的文本，但它对输入的实际值没有影响。

为了解决 IE 缺乏支持的问题，我不久前在 github 上创建了以下[jquery 占位符插件。](https://gist.github.com/3169494)

**现在，这是一个完整的工作示例，它比您的原始解决方案更干净。我已经在FF17和IE9中测试过了。**请注意，密码输入实际上以 TEXT 字段开头，因此默认情况下会显示占位符。仅当用户聚焦并输入某些内容时，它才会更改为密码。

```
<!DOCTYPE html>
<html>
<head>
    <script src="http://code.jquery.com/jquery.min.js" type="text/javascript"></script>
    <script src="jquery.placeholder.js" type="text/javascript"></script>
</head>

<body>
    <form>
        <input name="username" placeholder="Username" type="text" />
        <input name="password" placeholder="Password" type="text" data-ispw="1" />
    </form>
</body>

<script type="text/javascript">
$(function(){
    // make sure to include the jquery.placeholder.js plugin before using this
    $(':text[placeholder]').placeholder();
    $('form').on({
        focus: function(e){
            // swap to password
            $(this).prop('type', 'password');
        },
        blur: function(e){
            var me = $(this);
            if (me.val() == '') {
                // swap to text; if no value is entered
                me.prop('type', 'text');
            }
        }
    }, ':input[data-ispw]')
});
</script>
</html> 
```

让我重申一下，我不喜欢像这样交换密码输入的想法，但是，嘿，他们自己的！祝你好运！

# javascript - 显示当前屏幕尺寸 - 响应式设计工具

> ID：13793469
> 
> 赞同：10
> 
> 时间：2012-12-10T00:35:36.497
> 
> 标签：javascript, css, firefox, responsive-design, browser-plugin

我目前正在做很多响应式设计开发，所有前端开发人员也是如此。

我很想知道的一件事是当前屏幕的确切尺寸。

Chrome 有它： [https ://chrome.google.com/webstore/detail/window-resizer/kkelicaakdanhinjdeammmilcgefonfh](https://chrome.google.com/webstore/detail/window-resizer/kkelicaakdanhinjdeammmilcgefonfh)

如何使用 Firefox 显示当前屏幕尺寸？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-01-31T11:37:17.560

这是一个非常古老的问题，但值得一提。

Firefox 现在有“[响应式设计模式](https://developer.mozilla.org/en-US/docs/Tools/Responsive_Design_View)”，这是我在任何浏览器上看到的最好的响应式测试。

快捷方式是`Cntrl+Shift+M`，您在一个奇妙的移动视图中，可以完全控制屏幕的大小，同时仍然能够打开开发工具。

![在此处输入图像描述](../Images/fea8d2947f5a7668c8832ec7d53e5a3f.png)

**更新 - Chrome 工具**

自从这个答案以来已经有一段时间了，因为`Firefox`'s 的移动开发工具并没有改变整个交易，`Google Chromes`已经改变了很多并且非常棒，如果不与那些还没有使用它的人分享似乎很愚蠢。

点击`F12`然后这将打开，然后点击小移动图标以调出移动开发工具：

![如何在 Chrome 上启用移动开发工具](../Images/3fdb141ff611211d61ed543fc7e46291.png)

这将打开看起来像这样的移动开发工具 ![如此可爱让人心疼](../Images/82c4c18defe0879e20452a6cd00e1f3f.png)

从这里您可以更改各种事情，但可以轻松地在设备之间更改为您自动设置的预定义设备和用户代理。

更多的是你可以改变的东西，比如触摸，地理位置等

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-10T00:38:35.050

喜欢这个[**FIDDLE**](http://jsfiddle.net/krWLA/3/)

```
$(window).on('resize', showSize);

showSize();

function showSize() {
    $('#size').html('HEIGHT : '+$(window).height()+'<br>WIDTH : '+$(window).width());
    $('#size2').html('HEIGHT : '+screen.height+'<br>WIDTH : '+screen.width);
}
​ 
```

**编辑：**也增加了屏幕尺寸，使用你需要的任何东西！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T01:23:25.440

你可以把它作为书签。它应该（希望）跨浏览器工作。单击显示以摆脱它。[http://jsfiddle.net/krWLA/8/](http://jsfiddle.net/krWLA/8/)

```
(function() {
    var v=window,d=document;
    v.onresize = function() {
        var w = v.innerWidth ? v.innerWidth :
                d.documentElement.clientWidth,
            h = v.innerHeight ? v.innerHeight : 
                d.documentElement.clientHeight,
            s = d.getElementById('WSzPlgIn'),
            ss;
        if (!s) {
            s = d.createElement('div');
            s.id = 'WSzPlgIn';
            d.body.appendChild(s);
            s.onclick = function() {
                s.parentNode.removeChild(s)
            };
            ss = s.style;
            ss.position = 'absolute';
            ss.bottom = 0;
            ss.right = 0;
            ss.backgroundColor = 'black';
            ss.opacity = '.5';
            ss.color = 'white';
            ss.fontFamily = 'monospace';
            ss.fontSize = '10pt';
            ss.padding = '5px';
            ss.textAlign = 'right';
        }
        s.innerHTML = 'w ' + w + '<br />h ' + h;
    };
})()​ 
```

# html - CSS 图像库

> ID：13793472
> 
> 赞同：0
> 
> 时间：2012-12-10T00:35:46.133
> 
> 标签：html, css

我的图片库在滚动时工作正常，虽然在图片放大到的部分，我希望画廊中的第一张图片自动出现在那里，目前它只显示一个空白框，直到你将鼠标悬停在图片上.

```
<!DOCTYPE html>
<html lang="en">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="css.css"/>
<title>Welcome!</title>

</head>
<div id="wrapper">
<body>
<div id="header"> 
<div id ="logo">
<embed src="Media/Images/logo.svg" type="image/svg+xml" />
</div>

<div id="icons">
    <img src="Media/Images/EnvelopeIcon.png" alt="Envelope Icon" height="25" width="30">
    <p>M015734a@student.staffs.ac.uk</p>
    <div class="clear">     
    </div>
    <img src="Media/Images/PhoneIcon.png" alt="Envelope Icon" height="25" width="30" />
    <p> 07904921417</p>
    <div class="clear">     
    </div>
    <img src="Media/Images/HouseIcon.png" alt="Envelope Icon" height="25" width="30">
        <p>Stafford, UK</p>
    <div class="clear">     
    </div>              
<div class="clear">     
</div>
</div>
</div>

<nav>
<div id ="NavBar">
     <div id="Nav1">
     <div id="Triangle1"></div>
    <a href="E:/Program%20Files/Dropbox/Corsair%20Backup/Media%20For%20The%20Web/Assignment%20Part%202/Index.html"><h2>About Me</h2></a>
    </div>
    <div id="Nav2">
    <div id="Triangle2"></div>
    <a href="E:/Program%20Files/Dropbox/Corsair%20Backup/Media%20For%20The%20Web/Assignment%20Part%202/Education.html"><h2>Education</h2></a>
    </div>
    <div id="Nav3">
    <div id="Triangle3"></div>
    <a href="E:/Program%20Files/Dropbox/Corsair%20Backup/Media%20For%20The%20Web/Assignment%20Part%202/Portfolio.html"><h2>Portfolio</h2></a>
    </div>
    <div id="Nav4">
    <div id="Triangle4"></div>
    <a href="E:/Program%20Files/Dropbox/Corsair%20Backup/Media%20For%20The%20Web/Assignment%20Part%202/Interests.html"><h2>Interests</h2></a>
    </div>
    <div id="Nav5">
    <div id="Triangle5"></div>
    <a href="E:/Program%20Files/Dropbox/Corsair%20Backup/Media%20For%20The%20Web/Assignment%20Part%202/Contact.html"><h2>Contact Me</h2></a>
    </div>
</div>
</nav>
<article>
<section id = "content">
<h1>Portfolio Work</h1>
<div class="gallerycontainer">
<a class="thumbnail"><img src="Media/Images/Tardis.bmp" width="225px" height="125px" border="0" /><span><img src="Media/Images/Tardis.bmp" width="750px" height="450px"/><br />3DS Tardis Model.</span></a>
<br />
<a class="thumbnail"><img src="Media/Images/Main Station.png" width="225px" height="125px" border="0" /><span><img src="Media/Images/Main Station.png" width="750px" height="450px" /><br /></span></a>

<br />

<a class="thumbnail"><img src="Media/Images/Claymation1.JPG" width="225px" height="125px" border="0" /><span><img src="Media/Images/Claymation1.JPG" width="750px" height="450px"/><br />Sushi for dinner anyone?</span></a> 
<br/>

<a class="thumbnail"><img src="Media/Images/DSC_0245.jpg" width="175px" height="125px" border="0" /><span><img src="Media/Images/DSC_0245.jpg" width="500px" height="450px"/><br />Run wild with horses.</span></a>

<br />

<a class="thumbnail"><img src="Media/Images/DSC_0043 (3).JPG" width="225px" text-align="center" height="125px" border="0" /><span><img src="Media/Images/DSC_0043 (3).JPG" width="750px" height="450px"/><br />Run wild with horses.</span></a>

</div>
</section>
</section>
</article>
</div>
<footer>
</footer>
</body>
</html>

.gallerycontainer{
position: relative;
height: 250px;
/*Add a height attribute and set to largest image's height to prevent overlaying*/
}

.thumbnail img{
border: 1px solid white;
margin: 0 5px 5px 0;
}

.thumbnail:hover{
background-color: transparent;
}

.thumbnail span{ /*CSS for enlarged image*/
position: absolute;
background-color: lightyellow;
padding: 5px;
left: -1000px;
visibility: hidden;
color: black;
text-decoration: none;
}

.thumbnail span img{ /*CSS for enlarged image*/
padding: 2px;
}

.thumbnail:hover span{ /*CSS for enlarged image*/
background-color: #333;
visibility: visible;
top: 0;
left: 250px; /*position where enlarged image should offset horizontally */
z-index: 50;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T01:02:25.333

我不会隐藏第一个图像，而是给它一个低 z-index，以便其他图像漂浮在它上面。这仅在图像尺寸相同时才有效。

HTML

```
<div class="gallerycontainer">
    <a class="thumbnail"><img src="Media/Images/Tardis.bmp" width="225px" height="125px" border="0" /><span class="first"><img src="Media/Images/Tardis.bmp" width="750px" height="450px"/><br />3DS Tardis Model.</span></a>
<br />
<a class="thumbnail"><img src="Media/Images/Main Station.png" width="225px" height="125px" border="0" /><span><img src="Media/Images/Main Station.png" width="750px" height="450px" /><br /></span></a>

<br /> 
```

CSS

```
.thumbnail:hover span, .thumbnail span.first{ /*CSS for enlarged image*/
background-color: #FFF;
visibility: visible;
top: 0;
left: 250px; /*position where enlarged image should offset horizontally */
z-index: 50;
}

.thumbnail span.first
{
    z-index: 10 !important; /*Lower z-index for first one so others appear above it */
 } 
```

**更新**

从你小提琴中的代码中，你在实现这个过程中错过了两件重要的事情：

1.  注意这里的两个选择器（我的 CSS 代码片段的第一行）`.thumbnail:hover span, .thumbnail span.first`：. 你只有你原来的选择器。-- 这将与“悬停”跨度相同的样式应用于“第一个”跨度
2.  前导“。” 您的代码中缺少`.thumbnail span.first`- 这会调整“第一个”跨度的 z-index，因此其他跨度将出现在其上方。

**更新 2**

跨度需要背景颜色来掩盖第一张图像的文本。此外，如果图像具有透明度，但没有背景颜色，第一张图像将显示。更新小提琴显示了这一点。

[示例小提琴](http://jsfiddle.net/t5TmN/5/)

# mouselistener - 将鼠标监听器添加到绘图面板

> ID：13793478
> 
> 赞同：0
> 
> 时间：2012-12-10T00:36:29.050
> 
> 标签：mouselistener

我会很感激一个非常简单的方法来将鼠标监听器实现到绘图面板中。例如，如果我想返回鼠标点击的像素，我该怎么做？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T13:09:47.327

基本上，您只需在该绘图面板中添加一个鼠标侦听器，有很多教程。获取像素坐标只是`e.getX()`调用`e.getY()`.`mouseClicked(MouseEvent e)`

# powershell - 将“写入主机”与变量对齐

> ID：13793481
> 
> 赞同：-1
> 
> 时间：2012-12-10T00:37:02.620
> 
> 标签：powershell, powershell-2.0

这是我的代码：

```
Write-Host "Field 1 : " $variable1  
Write-Host "Field 2 : " $variable2
Write-Host "Field 3 : " $variable3
Write-Host "Field 4 : " $variable4 
```

我得到如下输出：

```
 Field 1    : " $variable1    
   Field 2          : " $variable2
   Field 3      : " $variable3
   Field 4           : " $variable4 
```

我怎样才能对齐它们？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T06:50:29.463

我认为，根据他之前的问题 field1,2,3 ... 是具有可变长度的数据库字段名称。

第一个解决方案，不是很优雅，但您可以使用 -f 格式运算符添加一些额外的空格来对齐您的第二列（下面我们使用 40 个字符减去第一列的长度）

```
$field1=@("name";"username1")
$field2=@("age";24)
$field3=@("email";"you@there.com")

wh $field1[0] " : " $field1[1] 
wh $field2[0] " : " $field2[1]
wh $field3[0] " : " $field3[1]

wh

#fill some extra whitespaces 
$spaces1=40 - $field1[0].Length
$spaces2=40 - $field2[0].Length
$spaces3=40 - $field3[0].Length
"{0}{1,$spaces1}" -f $field1[0], " : "+$field1[1]
"{0}{1,$spaces2}" -f $field2[0], " : "+$field2[1]
"{0}{1,$spaces3}" -f $field3[0], " : "+$field3[1] 
```

结果

```
name  :  username1
age  :  24
email  :  you@there.com

name                                  : username1
age                                   : 24
email                                 : you@there.com 
```

第二种解决方案

如果您创建 pscustom 对象，那么您可以使用所有那些花哨的 cmdlet，例如 format-table :)：

```
$col=@(
[PSCustomObject]@{$field1[0]=$field1[1]},
[PSCustomObject]@{$field2[0]=$field2[1]},
[PSCustomObject]@{$field3[0]=$field3[1]}
)

$col |ft 
```

结果 ：

```
Name                           Value                                                                                 
----                           -----                                                                                 
name                           username1                                                                             
age                            24                                                                                    
email                          you@there.com 
```

# android - Google Maps Android API V2 使部分布局变黑

> ID：13793483
> 
> 赞同：9
> 
> 时间：2012-12-10T00:37:45.657
> 
> 标签：android, android-layout, google-maps-android-api-2

我正在尝试将 Google Maps Android API v2 集成到我的 Android 应用程序中。我将谷歌地图放在布局的中间。当布局能够适应屏幕时效果很好，但是当布局太大而无法适应，并且用户向下滚动以查看其余内容时，布局的其余部分会被谷歌地图涂黑。请参阅以下屏幕截图：

![问题截图](../Images/55702f91c443328a273681487d75fc15.png)

（注意：所有地图手势都被禁用以允许用户滚动。）

我的布局 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView
xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:scrollbars="vertical"
android:fillViewport="true" >

<RelativeLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:padding="20sp" >

    <TextView
        android:id="@+id/race_num"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginBottom="14sp"
        android:textSize="@dimen/DetailsTop"
        android:layout_alignParentLeft="true"
        android:layout_toLeftOf="@+id/race_in_chase" />
    <TextView
        android:id="@id/race_in_chase"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/in_the_chase"
        android:textSize="@dimen/DetailsTop"
        android:background="@drawable/inthechase"
        android:paddingLeft="20sp"
        android:paddingRight="20sp"
        android:visibility="gone"
        android:layout_alignParentRight="true" />

    <TextView
        android:id="@+id/race_name"
        style="@style/RaceDetailsName"
        android:layout_below="@id/race_num" />
    <TextView
        android:id="@+id/race_track"
        style="@style/RaceDetailsText"
        android:paddingBottom="20sp"
        android:layout_below="@id/race_name" />

    <TextView
        android:id="@+id/race_time"
        style="@style/RaceDetailsText"
        android:layout_below="@id/race_track" />
    <TextView
        android:id="@+id/race_tv"
        style="@style/RaceDetailsText"
        android:layout_below="@id/race_time" />

    <fragment
        android:id="@+id/map"
        android:layout_width="match_parent"
        android:layout_height="380dp"
        android:layout_marginTop="20sp"
        android:layout_marginBottom="20sp"
        class="com.google.android.gms.maps.SupportMapFragment"
        android:layout_below="@id/race_tv" />

    <TextView
        android:id="@+id/race_track_size"
        style="@style/RaceDetailsText"
        android:layout_below="@id/map" />

</RelativeLayout>

</ScrollView> 
```

我的活动中的地图设置：

```
private void setUpMapIfNeeded() {
    if (mMap == null) {
        mMap = ((SupportMapFragment) getSupportFragmentManager()
                .findFragmentById(R.id.map)).getMap();
        if (mMap != null) {
            setUpMap();
        }
    }
}

private static final LatLng CHICAGOLAND = new LatLng(41.474856, -88.056928);

private void setUpMap() {
    mMap.setMapType(GoogleMap.MAP_TYPE_SATELLITE);
    mMap.getUiSettings().setZoomControlsEnabled(false);
    mMap.getUiSettings().setAllGesturesEnabled(false);
    CameraPosition cameraPosition = new CameraPosition.Builder()
        .target(CHICAGOLAND)
        .zoom(14.5f)
        .bearing(53)
        .build();
    mMap.moveCamera(CameraUpdateFactory.newCameraPosition(cameraPosition));
} 
```

我的预感是地图片段不喜欢 ScrollView，因为如果整个布局适合屏幕并且不需要滚动，那么布局会很好。地图本身的大小似乎是正确的。中断是视图中剩余项目的确切大小。有谁知道如何摆脱地图下方的停电，以便可以看到下方的 TextView？到目前为止我尝试过的一切都没有奏效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T13:05:47.607

我能够通过 hack 解决这个问题。我扩展了 ScrollView，以便我可以收到有关滚动事件的通知。我使用了[Synchronize ScrollView 滚动位置 - android](https://stackoverflow.com/questions/3948934/synchronise-scrollview-scroll-positions-android)中的 ObservableScrollView 实现。

我添加到我的 onCreate() 中：

```
ObservableScrollView sv = (ObservableScrollView) findViewById(R.id.scroll);
sv.setScrollViewListener(this); 
```

然后，当我收到滚动更改事件时，我会切换整个视图的可见性，这会强制重新布局，从而防止黑框出现。

```
public void onScrollChanged(ObservableScrollView sv, int x, int y, int oldx, int oldy) {
    sv.setVisibility(View.GONE);
    sv.setVisibility(View.VISIBLE);
} 
```

我试图使地图视图无效（），并仅切换地图视图的可见性，但都没有奏效。值得庆幸的是，切换整个视图的可见性不会导致任何闪烁或其他奇怪的行为。

可能有更好的解决方案，但在这一点上，这是我发现的唯一似乎可行的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T02:47:38.793

`onPageScrolled`通过覆盖FragmentPagerAdapter，我能够针对 Viewpager 中的相同问题调整上述内容：

```
@Override
public void onPageScrolled(int position, float positionOffset, 
                           int positionOffsetPixels) {
    if ((position == 0 && positionOffsetPixels > 0) ||
        (position == 1 && positionOffsetPixels == 0)) {
        MyFragment blackedOutFragment = (MyFragment) getSupportFragmentManager()
                .findFragmentByTag("android:switcher:" + R.id.pager + ":1");
        if (blackedOutFragment != null) {
            blackedOutFragment.getView().setVisibility(View.GONE);
            blackedOutFragment.getView().setVisibility(View.VISIBLE);
        }
    }
} 
```

Viewpager 中的位置是`0`包含 MapFragment`1`的片段，位置是滚动后变黑的片段。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-14T11:18:32.960

我的解决方法：利用[GoogleMap 的新快照界面，](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/GoogleMap.SnapshotReadyCallback)并在滚动页面时显示地图的快照。

这是我设置快照的代码（它与地图在同一个片段中，称为 FragmentMap.java）：

```
public void setSnapshot(int visibility) {
    switch(visibility) {
    case View.GONE:
        if(mapFragment.getView().getVisibility() == View.VISIBLE) {
            getMap().snapshot(new SnapshotReadyCallback() {
                @Override
                public void onSnapshotReady(Bitmap arg0) {
                    iv.setImageBitmap(arg0);
                }
            });
            iv.setVisibility(View.VISIBLE);
            mapFragment.getView().setVisibility(View.GONE);
        }
        break;
    case View.VISIBLE:
        if(mapFragment.getView().getVisibility() == View.GONE) {
            mapFragment.getView().setVisibility(View.VISIBLE);
            iv.setVisibility(View.GONE);
        }
        break;
    }
} 
```

其中“mapFragment”是我的 SupportedMapFragment，“iv”是一个 ImageView（使其成为 match_parent）。

在这里我控制滚动：

```
pager.setOnPageChangeListener(new OnPageChangeListener() {
        @Override
        public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) {
            if(position == 0 && positionOffsetPixels > 0 || position == 1 && positionOffsetPixels > 0) {
                ((FragmentMap)adapter.getRegisteredFragment(1)).setSnapshot(View.GONE);
            } else if(position == 1 && positionOffsetPixels == 0) {
                ((FragmentMap)adapter.getRegisteredFragment(1)).setSnapshot(View.VISIBLE);
            }
        }
        @Override
        public void onPageScrollStateChanged(int arg0) {}
        @Override
        public void onPageSelected(int arg0) {}
    }); 
```

我的带有地图的片段（FragmentMap）位于位置 1，所以我需要控制从位置 0 到 1 以及从位置 1 到 2（第一个 if 子句）的滚动。“getRegisteredFragment()”是我的自定义 FragmentPagerAdapter 中的一个函数，其中我有一个名为“registeredFragments”的 SparseArray(Fragment)。

因此，每当您滚动到地图或从地图滚动时，您总会看到它的快照。这对我来说非常有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-15T21:13:15.967

你可以使用这个库，

[https://github.com/NyxDigital/NiceSupportMapFragment/](https://github.com/NyxDigital/NiceSupportMapFragment/)

这对我来说很好。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-13T14:59:09.497

另一种可能性是使用新的 GoogleMap.snapshot() 函数并使用地图的屏幕截图代替，如此[处](https://stackoverflow.com/a/18212473/495800)所述。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-10T15:23:05.533

只是一个实验，但您是否尝试在地图初始化后在 setupMap() 中以编程方式将 TextView 添加到屏幕？

```
// First, get a handle on the parent RelativeLayout, 
// call it parentRelativeLayout, then…                  

TextView textView = new TextView(getActivity());
RelativeLayout.LayoutParams textLayout = new RelativeLayout.LayoutParams(
    RelativeLayout.MATCH_PARENT, 
    RelativeLayout.MATCH_PARENT
);
textLayout.addRule(RelativeLayout.ALIGN_PARENT_BOTTOM, -1);
textView.setLayoutParams(textLayout);

parentRelativeLayout.addView(textView) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-10T11:45:59.110

我的猜测是在 Activity 的初始化期间 MapFragment 的高度为 0。尝试

```
<RelativeLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:padding="20sp" >

....

      <TextView
            android:id="@+id/race_track_size"
            style="@style/RaceDetailsText"
            android:layout_alignParentBottom="true"
            android:layout_marginBottom="2dp"/>

</RelativeLayout> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-06-25T14:30:01.557

这应该通过使表面视图透明来解决它

[https://github.com/NyxDigital/NiceSupportMapFragment](https://github.com/NyxDigital/NiceSupportMapFragment)

# c# - 使用动态按钮关闭动态创建的表单

> ID：13793490
> 
> 赞同：2
> 
> 时间：2012-12-10T00:38:17.810
> 
> 标签：c#, dynamic

我正在尝试使用动态按钮关闭动态创建的表单（这是我最简单的工作，我还添加了其他按钮来完成其他工作，但我认为这是一个很好的起点）。
到目前为止，我可以为该按钮创建表单、按钮和单击事件，但我不知道在单击事件函数中添加什么来关闭该按钮的主机。我猜我可以通过点击功能以某种方式访问​​按钮父级？或者也许将表单控件作为函数中的参数传递？任何帮助表示赞赏！

```
 //Create form
        Snapshot snapshot = new Snapshot();
        snapshot.StartPosition = FormStartPosition.CenterParent;

        //Create save button
        Button saveButton = new Button();
        saveButton.Text = "Save Screenshot";
        saveButton.Location = new Point(snapshot.Width - 100, snapshot.Height - 130);
        saveButton.Click += new EventHandler(saveButton_buttonClick);

        //Create exit button
        Button exitButton = new Button();
        exitButton.Text = "Exit";
        exitButton.Location = new Point(snapshot.Width - 100, snapshot.Height - 100);

        //Add all the controls and open the form
        snapshot.Controls.Add(saveButton);
        snapshot.Controls.Add(exitButton);
        snapshot.ShowDialog(); 
```

我的点击事件函数看起来很正常：

```
 void saveButton_buttonClick(object sender, EventArgs e)
    {

    } 
```

不幸的是，我不知道要添加什么功能才能正常工作！提前感谢有人可以给我的任何帮助！我觉得这应该是一个直接解决的问题，但我一直无法弄清楚......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T01:41:15.970

虽然使用命名函数当然可以做到这一点，但在这种情况下使用匿名函数通常更简单：

```
Snapshot snapshot = new Snapshot();
snapshot.StartPosition = FormStartPosition.CenterParent;

//Create save button
Button saveButton = new Button();
saveButton.Text = "Save Screenshot";
saveButton.Location = new Point(snapshot.Width - 100, snapshot.Height - 130);
saveButton.Click += (_,args)=>
{
    SaveSnapshot();
};

//Create exit button
Button exitButton = new Button();
exitButton.Text = "Exit";
exitButton.Location = new Point(snapshot.Width - 100, snapshot.Height - 100);
exitButton.Click += (_,args)=>
{
    snapshot.Close();
};

//Add all the controls and open the form
snapshot.Controls.Add(saveButton);
snapshot.Controls.Add(exitButton);
snapshot.ShowDialog(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T01:41:25.140

一种简单的方法是使用 lambda 方法：

```
Button exitButton = new Button();
exitButton.Text = "Exit";
exitButton.Click += (s, e) => { shapshot.Close(); }; 
```

# assembly - PDP-11 中的寻址模式

> ID：13793491
> 
> 赞同：2
> 
> 时间：2012-12-10T00:38:18.867
> 
> 标签：assembly, pdp-11, addressing-mode

我有这个指令：

```
Move @-4(pc), 766(r5)
pc : 1000 (start point) 
```

你能解释一下这条指令应该如何运行吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T14:24:19.713

我不记得 pdp，但作为扩展的 VAX 语法将意味着以下内容：766（r5）表示第二个操作数的地址是 R5 + 766（如果它是 PDP，则为八进制）。@-4(RC) 我猜是自动递减，所以它需要 RC，subs 4，读取一个值，它是一个变量的地址。因此，入口点前 4 个字节有指向 var1 的指针，var2 位于 R5 + 766(oct)；移动显然是移动指令。我猜，它将 OP1 移动到 OP2。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T16:31:23.300

对我来说看起来像 PDP-11 代码...@-4(PC) 表示“将程序计数器的内容减 4 以给您一个地址...而“@”表示获取该地址的内容。因此，如果 PC 为 1000，则从中减去 4（八进制）得到 774，然后在地址 774 中查找内容（这就是“@”的含义）。得到这个值 - 源操作数之后，我们必须把它放在某个地方，即目标地址。转到 R5（通用寄存器 5）并在那里查找地址。将 766 八进制添加到该地址，您就有了 DESTINATION 地址（无论它是什么）。

然后，PDP-11s CPU 可以将 SOURCE 移动到 DESTINATION，因为它现在拥有两者。（而且它是 MOV 指令而不是 MOVe - 如果我的记忆正确的话，所有 PDP 指令都是 3 个字母的助记符 - 或者至少其中大部分是）

说了这么多（！！）源操作数低于 1000 标记，即它在保留区域中（PDP-11 上的地址 0 到 1000 被“保留”）所以我不想推测如果会发生什么这是在真正的 PDP 上运行的真正指令……！！！系统陷阱？

小心

R

# unix - limit the number of children and descendants processes

> ID：13793499
> 
> 赞同：1
> 
> 时间：2012-12-10T00:38:46.040
> 
> 标签：unix, fork, multiprocessing, filelock

I have to use `fork()` recursively, but limit the number of forked processes (including children and descendants) to (for example) 100\. Considering this code snippet:

```
void recursive(int n) {
    for(int i=0; i<n; i++) {
        if(number_of_processes() < 100) {
            if(fork() == 0) {
                 number_of_processes_minus_one();
                 recursive(i);
                 exit(0);
            }
        }
        else
            recursive(i);
     }
} 
```

How to implement `number_of_processes()` and `number_of_processes_minus_one()`? Do I **have to** use IPC? I tried to pre-create a file, write `PROC_MAX` into it and lock-read-write-unlock it in `number_of_processes()` but it still eat all my pids.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T21:27:31.970

I suspect that the simplest thing to do is to use a pipe. Before you fork anything create a pipe, write 100 bytes into the write side, and close the write side. Then, try to read one byte from the pipe whenever you want to fork. If you are able to read a byte, then fork. If not, then don't. Trying to track the number of total forks with a global variable will fail if children are allowed to fork, but the pipe will persist across all descendants.

# objective-c - UITableViewController TableView 不会滚动

> ID：13793505
> 
> 赞同：1
> 
> 时间：2012-12-10T00:40:30.093
> 
> 标签：objective-c, uitableview, uistoryboard

我将我的项目从 xibs 转移到使用情节提要。我刚刚添加了从 UIViewController 到 UITableViewController 的设置页面。表格视图单元格是使用故事板中的静态方法添加的。该表有 5 个部分，有 12 个单元格。我没有其他代码对 TableView 做任何事情，并且在情节提要中滚动是打开的。在我的 iPhone 5 上运行时，视图不会滚动，所有单元格都在那里，我可以拉动并查看隐藏的单元格，但放手时它仍然滚动到顶部。就像在 UIWebView 中拉起页面时一样。Xcode 没有给出警告或错误，我该如何解决这个问题？

**编辑：**我发现 2 行代码导致它无法滚动，但我仍然不知道如何修复它。代码获取自定义 TextFieldTableCell 并为其设置文本，因为我使用的是故事板，它不调用 CellForRow，

```
- (void)viewWillAppear:(BOOL)animated {
    [super viewWillAppear:animated];
    TextFieldTableCell *cell = (TextFieldTableCell *)[SettingsTable cellForRowAtIndexPath:[NSIndexPath indexPathForRow:0 inSection:0]];
    cell.textField.text = [[NSUserDefaults standardUserDefaults] objectForKey:@"Homepage"];
} 
```

`[super viewWillAppear:animated];`如果在方法中调用下面的 2 行，则 TableView 仅被禁用滚动`- (void)viewWillAppear:(BOOL)animated`，但如果我调用其中的行，`- (void)viewDidAppear:(BOOL)animated`它仍然会滚动，除非需要一秒钟来显示文本，这不是我想要的，应该是当用户看到 TableViewController 时自动加载，有什么解决方法吗？任何其他名为 viewWillLoad 但不应禁用表的方法？

# javascript - 只有“onload”形式的 JavaScript 函数有效吗？

> ID：13793506
> 
> 赞同：0
> 
> 时间：2012-12-10T00:40:29.683
> 
> 标签：javascript, function, typeerror

我有一个动态定位背景图像的javascript函数：

```
 window.onload = function() {
    bw = document.getElementsByClassName("BottomWrapper");
    if (bw.length===0){
      bw = document.getElementsByClassName("BottomWrapper2");
    }
    pos = window.innerWidth/2 - 490.5;
    bw=Array.prototype.slice.call(bw);
    bw[0].style.backgroundPosition="center 0px, " + pos + "px 0px";
  }; 
```

它有效。但是如果我命名相同的函数并运行它：

```
function position() {
  bw = document.getElementsByClassName("BottomWrapper");
  if (bw.length===0){
    bw = document.getElementsByClassName("BottomWrapper2");
  }
  pos = window.innerWidth/2 - 490.5;
  bw=Array.prototype.slice.call(bw);
  bw[0].style.backgroundPosition="center 0px, " + pos + "px 0px";
};
position(); 
```

我得到错误：

```
TypeError: Cannot read property 'style' of undefined 
```

我很迷惑。为什么第一个功能起作用而不是第二个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T00:42:49.117

如果 bw[0] 未定义，则意味着 document.getElementsByClassName("BottomWrapper2") 返回未定义，这很可能意味着运行脚本时 div 不在页面上。如果您在标签之后加载代码，则不应发生这种情况。

第一个工作的原因是因为它正在等待 onload 事件触发。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T00:52:00.300

如果您使用这样的功能，它将起作用

```
<html><head>
<script>

function position() {
  bw = document.getElementsByClassName("BottomWrapper");
  console.log(bw);
  if (bw.length===0){
    bw = document.getElementsByClassName("BottomWrapper2");
  }
  pos = window.innerWidth/2 - 490.5;
  bw=Array.prototype.slice.call(bw);
  bw[0].style.backgroundPosition="center 0px, " + pos + "px 0px";
  console.log(bw[0]);
};
   </script>
<body onload="position()">
<div class="BottomWrapper2"></div>
</body></head></html> 
```

前面的会导致错误，因为在加载主体之前调用了该函数

# ruby-on-rails - after_create 销毁记录

> ID：13793508
> 
> 赞同：0
> 
> 时间：2012-12-10T00:41:03.333
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, callback, after-create

我有两张桌子预订和出租。用户预订要租的汽车，管理员批准租用。

当管理员批准租赁时。不再需要预订。如何在创建租赁记录的同时删除预订记录。

这是我的尝试（我是红宝石的新手，如果我很愚蠢，请道歉）

```
#rental_controller.rb
after_create :delete_booking

def delete_booking
  @booking = Booking.find(params[:id])
  @booking.destroy

respond_to do |format|
  format.html { redirect_to rental_url }
  format.json { head :no_content }
end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T01:04:35.570

创建后属于模型，而不是控制器。我假设您有一个出租模型，因为该片段来自出租控制器。

在租赁模式中：

```
after_create :delete_booking

def delete_booking
  @booking = Booking.where(:booking_no => self.booking_no).first
  @booking.destroy
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T05:11:34.137

理想情况下像..

```
# Booking.rb Model

has_one :booking 
```

和

```
# Rental.rb Model

belongs_to :booking, :class_name => "Booking", :foreign_key => "booking_no"

after_create :delete_booking

private
  def delete_booking
    self.booking.destroy
  end 
```

# c# - MonoDevelop + NAudio + Ubuntu Linux 告诉我找不到 Winmm.dll？

> ID：13793514
> 
> 赞同：6
> 
> 时间：2012-12-10T00:42:02.620
> 
> 标签：c#, linux, ubuntu, monodevelop, naudio

因此，我尝试将 MonoDevelop 与 NAudio 和 Ubuntu Linux 一起使用，由于某种原因，它错误地说找不到 winmm.dll，所以我尝试下载它，并且“添加引用”对话框声称它不是有效的 .NET 库. 这是我的代码....

```
using System;
using System.IO;
using Gst;
using GLib;
using Gst.BasePlugins;

using NAudio;
using NAudio.Wave;

namespace record_audio_simple_test
{

class MainClass
{

        //Define class variables
        private NAudio.Wave.WaveFileReader waveFile = null;
        private NAudio.Wave.DirectSoundOut output = null;

        public static void Main (string[] args)
        {
            WaveFileReader waveFile = new WaveFileReader("../../convo47.wav");
        }
    }
} 
```

它说这一行 **WaveFileReader waveFile = new WaveFileReader("../../convo47.wav");上的错误**

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-10T07:29:04.770

NAudio 的很大一部分由互操作包装器组成，用于访问 Windows API 调用，例如 waveIn/waveOut、DirectSound、WASAPI、ACM、MediaFoundation 和 DMO。这些都不能在 Linux 上运行，因为这些 API 方法不存在。我想理论上它们可能在 Windows API 仿真层之上工作，但实际上创建一个`IWavePlayer`调用 Linux 声音 API 的实现会更好。

NAudio 的某些部分应该跨平台工作，例如大多数`IWaveProvider`和`ISampleProvider`实现。`WaveFileReader`也许应该可以工作，但是由于它使用了`mmioStringToFOURCC`Windows API 调用而失败了。我将很快删除此依赖项，因为它目前也停止`WaveFileReader`在 Windows 应用商店应用程序中使用。

# visual-studio - 在 Visual C++ 中设置小图标和大图标

> ID：13793517
> 
> 赞同：3
> 
> 时间：2012-12-10T00:42:57.970
> 
> 标签：visual-studio, visual-c++, mfc

我正在将旧的（Visual Studio 6.0）应用程序移植到 Visual Studio 2012 以添加一些增强功能。资源视图中的应用程序图标显然有 2 个版本的图标，一个 32x32 4bit 位图和一个 16x16 4bit 位图。

在主 AppDlg.cpp 中有 2 次调用`SetIcon()`如下（由 MFC 应用程序向导默认创建）：

```
SetIcon(m_hIcon, TRUE);         // Set big icon
SetIcon(m_hIcon, FALSE);        // Set small icon 
```

但是，显示在应用程序对话框窗口左上角的图标是较大的，按比例缩小到 16x16，而不是小的图标。系统托盘中显示的图标也会发生这种情况。

在 Windows 资源管理器（详细视图/列表视图）中查看可执行文件时，它似乎使用了正确的小文件。所以在某些情况下它会选择小的。

如何让它为对话框和系统托盘的左上角选择较小的 16x16 图标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T05:22:38.063

已知的微软错误。请参阅[此](http://bytes.com/topic/net/answers/281327-seticon-bug)讨论。（如果您不想阅读，只需注释掉 SetIcon(m_hIcon, FALSE) 行就可以了）。请注意，SetIcon 仅设置对话框标题栏上的图标（小图标）以及使用 Alt-tab（大图标）时

您在 Windows 资源管理器中看到的图标是主要的应用程序图标（您的 rc 文件中 ID 最低的图标）。它与主对话框的 SetIcon() 方法无关

系统托盘中的图标完全不同。通常，您将使用 Shell_NotifyIcon API 来设置图标，但我敢打赌，您的项目将有一个设置图标的帮助程序类Chris Maunder 的[CSystemTray](http://www.codeproject.com/Articles/74/Adding-Icons-to-the-System-Tray)是许多程序员使用的流行类。只需在您的程序中搜索 Shell_NotifyIcon 即可准确了解系统托盘图标所使用的资源

# jquery - Twitter Bootstrap：同一页面上的多个模式，想要不同的背景颜色

> ID：13793527
> 
> 赞同：4
> 
> 时间：2012-12-10T00:44:07.667
> 
> 标签：jquery, css, twitter-bootstrap

我在一个页面上有 2 个模式，请参阅：http: [//twitter.github.com/bootstrap/javascript.html#modals](http://twitter.github.com/bootstrap/javascript.html#modals)。我希望他们有不同的页面背景颜色。JS 似乎`<div class="modal-backdrop fade in"></div>`在页面底部生成。有没有办法通过 Bootstrap 配置设置一个类或其他东西？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-10T01:18:01.657

不，您不能通过任何配置设置`backdrop`颜色，唯一的方法是通过事件更改它。

让我们假设这个例子：http: [//jsbin.com/uwelok/1/](http://jsbin.com/uwelok/1/)

您将需要在`shown`事件上设置一个新类，例如：

```
$('#m2').on('shown', function () {
    $('.modal-backdrop').addClass('backdrop-yellow');
}); 
```

无需重置它，因为在模态`hide`本身上，元素被删除并再次创建，使用 next 上的默认配置`show`。

有了这样的技巧，你可以有一个简单的类：

```
.backdrop-yellow {
    background-color: yellow;
} 
```

# r - R错误变量的无效类型（列表）

> ID：13793529
> 
> 赞同：-1
> 
> 时间：2012-12-10T00:44:29.497
> 
> 标签：r, matlab, machine-learning

我正在导入 matlab 文件并构造一个数据框，matlab 文件包含两列，每行维护一个具有矩阵的单元格，我构造一个数据框来运行随机森林。但我收到以下错误。

```
Error in model.frame.default(formula = expert_data_frame$t_labels ~ .,  : 
  invalid type (list) for variable 'expert_data_frame$t_labels' 
```

这是我如何导入 matlab 文件并构造数据框的代码：

```
all_exp_traintest <- readMat(all_exp_filepath);
len = length(all_exp_traintest$exp.traintest)/2;
    for (i in 1:len) {
      expert_train_df <- data.frame(all_exp_traintest$exp.traintest[i]);
      labels = data.frame(all_exp_traintest$exp.traintest[i+302]);
      names(labels)[1] <- "t_labels";
      expert_train_df$t_labels <- labels;
      expert_data_frame <- data.frame(expert_train_df);
      rf_model = randomForest(expert_data_frame$t_labels ~., data=expert_data_frame, importance=TRUE, do.trace=100);
    } 
```

Matlab 输入文件的结构

```
[56x12 double]    [56x1 double]
[62x12 double]    [62x1 double]
[62x12 double]    [62x1 double]
[62x12 double]    [62x1 double]
[62x12 double]    [62x1 double]
[74x12 double]    [74x1 double]

> str(all_exp_traintest)
List of 1
 $ exp.traintest:List of 604
  ..$ NA: num [1:56, 1:12] 0 0 0 0 8 1 1 0 0 0 ...
  ..$ NA: num [1:62, 1:12] 2 10 11 13 5 10 13 8 11 8 ...
  ..$ NA: num [1:62, 1:12] 0 0 1 0 0 0 0 0 1 1 ...
  ..$ NA: num [1:62, 1:12] 4 2 1 3 3 20 6 3 2 2 ...
  ..$ NA: num [1:62, 1:12] 2731 2362 2937 1229 1898 ...
  ..$ NA: num [1:74, 1:12] 27 33 34 38 33 35 36 35 47 46 ...
  ..$ NA: num [1:74, 1:12] 106 79 99 94 153 104 146 105 125 146 ...
  ..$ NA: num [1:74, 1:12] 3 9 3 0 1 26 0 4 0 0 ...
  ..$ NA: num [1:51, 1:12] 5 7 3 30 0 0 0 0 0 0 ...
  ..$ NA: num [1:66, 1:12] 0 0 13 0 0 3 2 2 0 2 ...
  ..$ NA: num [1:73, 1:12] 1 0 1 0 0 0 2 1 2 5 ...
  ..$ NA: num [1:73, 1:12] 23 14 20 14 24 22 32 61 84 278 ...
  ..$ NA: num [1:75, 1:12] 1 7 0 1 2 3 3 0 16 10 ...
  ..$ NA: num [1:90, 1:12] 10 7 8 15 25 12 37 31 18 48 ...
  ..$ NA: num [1:90, 1:12] 0 6 3 1 5 7 8 6 1 1 ...
  ..$ NA: num [1:90, 1:12] 0 1 1 2 0 4 9 6 3 4 ...
  ..$ NA: num [1:90, 1:12] 6 0 5 27 11 50 22 8 10 4 ...
  ..$ NA: num [1:90, 1:12] 3 9 13 12 4 0 5 0 5 0 ...
  ..$ NA: num [1:90, 1:12] 1 0 1 0 1 2 1 0 1 2 ...
  ..$ NA: num [1:90, 1:12] 3395 3400 3360 3770 3533 ...
  ..$ NA: num [1:84, 1:12] 0 0 0 0 5 0 0 5 4 2 ...
  ..$ NA: num [1:80, 1:12] 2 3 3 3 4 28 61 26 8 1 ...
  ..$ NA: num [1:81, 1:12] 4 28 22 9 16 43 80 21 19 18 ...
  ..$ NA: num [1:76, 1:12] 1 0 0 1 49 64 60 230 222 267 ...
  ..$ NA: num [1:76, 1:12] 4786 4491 2510 1144 2071 ...
  ..$ NA: num [1:76, 1:12] 80 128 254 109 114 267 152 139 368 363 ...
  ..$ NA: num [1:76, 1:12] 1 5 8 2 14 5 3 13 8 2 ...
  ..$ NA: num [1:76, 1:12] 10 3 8 79 4 4 11 30 2 0 ...
  ..$ NA: num [1:68, 1:12] 0 0 2 0 0 2 6 0 0 4 ...
  ..$ NA: num [1:68, 1:12] 1 4 5 2 2 3 3 1 3 0 ...
  ..$ NA: num [1:68, 1:12] 0 0 1 0 0 0 0 0 0 1 ...
  ..$ NA: num [1:69, 1:12] 39 45 2 0 1 4 3 0 13 0 ...
  ..$ NA: num [1:69, 1:12] 0 4 6 0 0 4 1 6 10 1 ...
  ..$ NA: num [1:69, 1:12] 0 2 5 2 2 2 0 0 3 6 ...
  ..$ NA: num [1:69, 1:12] 3 0 1 1 1 4 7 5 5 1 ...
  ..$ NA: num [1:66, 1:12] 5 0 0 0 0 0 0 1 3 5 ...
  ..$ NA: num [1:66, 1:12] 4 3 3 0 0 4 0 0 0 0 ...
  ..$ NA: num [1:65, 1:12] 0 0 1 0 0 0 5 8 4 1 ...
  ..$ NA: num [1:65, 1:12] 0 5 6 0 2 0 0 1 1 2 ...
  ..$ NA: num [1:69, 1:12] 0 16 5 1 14 0 1 0 0 16 ...
  ..$ NA: num [1:69, 1:12] 0 0 0 0 0 25 2 3 0 0 ...
  ..$ NA: num [1:64, 1:12] 2 0 0 0 0 0 0 0 0 0 ...
  ..$ NA: num [1:42, 1:12] 0 0 0 0 0 0 0 0 0 0 ...
  ..$ NA: num [1:67, 1:12] 0 2 4 10 15 4 1 43 1 7 ...
  ..$ NA: num [1:63, 1:12] 32 6 12 5 92 8 29 7 21 20 ...
  ..$ NA: num [1:63, 1:12] 2 5 12 8 10 13 6 11 10 14 ...
  ..$ NA: num [1:63, 1:12] 3 5 10 9 0 1 8 13 2 14 ...
  ..$ NA: num [1:54, 1:12] 0 0 14 0 0 0 0 0 0 1 ...
  ..$ NA: num [1:82, 1:12] 152 99 63 57 105 44 28 33 43 49 ...
  ..$ NA: num [1:81, 1:12] 0 1 0 0 0 0 0 0 0 0 ...
  ..$ NA: num [1:75, 1:12] 0 1 3 0 0 0 0 0 0 0 ...
  ..$ NA: num [1:75, 1:12] 1 0 0 2 0 1 0 0 0 0 ...
  ..$ NA: num [1:75, 1:12] 1 6 5 5 3 8 1 3 1 0 ...
  ..$ NA: num [1:72, 1:12] 0 0 0 0 1 0 1 2 0 0 ...
  ..$ NA: num [1:62, 1:12] 310 91 4 4 9 0 0 1 0 0 ...
  ..$ NA: num [1:62, 1:12] 239 374 1060 599 805 808 139 150 490 326 ...
  ..$ NA: num [1:49, 1:12] 9 18 10 12 19 5 13 10 2 3 ...
  ..$ NA: num [1:61, 1:12] 2 0 0 0 1 0 0 0 0 0 ...
  ..$ NA: num [1:61, 1:12] 4 10 16 15 8 14 10 23 11 5 ...
  ..$ NA: num [1:61, 1:12] 0 1 4 4 5 3 0 1 1 1 ...
  ..$ NA: num [1:65, 1:12] 165 100 177 65 148 58 188 55 59 62 ...
  ..$ NA: num [1:65, 1:12] 13 0 0 2 2 3 0 0 0 0 ...
  ..$ NA: num [1:66, 1:12] 157 58 101 92 15 21 73 80 78 75 ...
  ..$ NA: num [1:66, 1:12] 8 6 1 0 6 2 2 6 10 9 ...
  ..$ NA: num [1:87, 1:12] 1 2 5 6 8 3 3 3 2 3 ...
  ..$ NA: num [1:83, 1:12] 0 0 0 0 0 0 2 13 0 0 ...
  ..$ NA: num [1:81, 1:12] 0 0 1 0 3 5 3 0 2 7 ...
  ..$ NA: num [1:81, 1:12] 33 81 94 30 5 36 16 90 121 182 ...
  ..$ NA: num [1:81, 1:12] 10 11 16 6 0 0 0 1 0 0 ...
  ..$ NA: num [1:81, 1:12] 7 0 0 2 1 3 1 4 0 0 ...
  ..$ NA: num [1:81, 1:12] 1 0 5 0 2 3 1 0 1 1 ...
  ..$ NA: num [1:95, 1:12] 30 160 116 130 444 515 225 135 108 175 ...
  ..$ NA: num [1:95, 1:12] 12 1 0 10 3 3 0 4 0 0 ...
  ..$ NA: num [1:95, 1:12] 1 0 0 0 3 3 1 0 0 0 ...
  ..$ NA: num [1:95, 1:12] 11 42 61 23 41 56 81 6 83 82 ...
  ..$ NA: num [1:95, 1:12] 1 2 5 3 6 4 2 8 28 1 ...
  ..$ NA: num [1:95, 1:12] 283 192 377 216 207 261 394 262 262 554 ...
  ..$ NA: num [1:94, 1:12] 0 0 0 0 0 0 0 0 0 0 ...
  ..$ NA: num [1:72, 1:12] 0 0 0 0 0 0 0 0 0 0 ...
  ..$ NA: num [1:72, 1:12] 5 3 0 2 13 27 6 2 12 36 ...
  ..$ NA: num [1:72, 1:12] 0 2 2 0 1 0 1 4 2 2 ...
  ..$ NA: num [1:72, 1:12] 0 0 1 0 3 1 0 4 1 0 ...
  ..$ NA: num [1:67, 1:12] 27 7 18 1 2 0 0 0 0 0 ...
  ..$ NA: num [1:67, 1:12] 10 2 1 10 7 0 0 1 1 4 ...
  ..$ NA: num [1:67, 1:12] 14 17 9 20 13 20 18 13 10 7 ...
  ..$ NA: num [1:64, 1:12] 0 0 0 0 4 0 0 0 3 0 ...
  ..$ NA: num [1:64, 1:12] 3 0 1 0 2 7 13 14 4 2 ...
  ..$ NA: num [1:64, 1:12] 0 0 0 0 0 0 0 0 2 0 ...
  ..$ NA: num [1:72, 1:12] 59 61 55 120 49 202 325 244 377 551 ...
  ..$ NA: num [1:72, 1:12] 0 0 0 0 0 0 0 0 1 0 ...
  ..$ NA: num [1:72, 1:12] 0 3 1 0 1 0 0 0 4 0 ...
  ..$ NA: num [1:72, 1:12] 5 12 6 9 15 10 15 27 15 9 ...
  ..$ NA: num [1:72, 1:12] 7 0 3 0 0 1 1 1 1 0 ...
  ..$ NA: num [1:72, 1:12] 0 0 0 0 89 0 19 3 3 2 ...
  ..$ NA: num [1:61, 1:12] 5 3 5 3 3 29 46 140 49 24 ...
  ..$ NA: num [1:63, 1:12] 23 0 0 0 0 60 7 73 13 19 ...
  ..$ NA: num [1:95, 1:12] 7 96 28 2 9 5 8 190 166 1 ...
  ..$ NA: num [1:95, 1:12] 0 0 1 1 0 0 0 0 0 0 ...
  ..$ NA: num [1:95, 1:12] 4 0 2 6 6 11 6 5 6 9 ...
  .. [list output truncated]
 - attr(*, "header")=List of 3
  ..$ description: chr "MATLAB 5.0 MAT-file, Platform: MACI64, Created on: Sun Dec  9 17:35:24 2012                                         "
  ..$ version    : chr "5"
  ..$ endian     : chr "little" 
```

将matlab文件加载到R中后

```
all_exp_traintest$exp.traintest[1]
$<NA>
      [,1] [,2]  [,3]   [,4]   [,5]    [,6]     [,7]      [,8]       [,9]       [,10]        [,11]        [,12]
 [1,]    0  0.0  0.00  0.000 0.5000 0.03125 0.015625 0.0000000 0.00000000 0.000000000 0.0000000000 0.0000000000
 [2,]    0  0.0  0.00  1.000 0.0625 0.03125 0.000000 0.0000000 0.00000000 0.000000000 0.0000000000 0.0000000000
 [3,]    0  0.0  2.00  0.125 0.0625 0.00000 0.000000 0.0000000 0.00000000 0.000000000 0.0000000000 0.0000000000
 [4,]    0  4.0  0.25  0.125 0.0000 0.00000 0.000000 0.0000000 0.00000000 0.000000000 0.0000000000 0.0009765625
 [5,]    8  0.5  0.25  0.000 0.0000 0.00000 0.000000 0.0000000 0.00000000 0.000000000 0.0019531250 0.0000000000
 [6,]    1  0.5  0.00  0.000 0.0000 0.00000 0.000000 0.0000000 0.00000000 0.003906250 0.0000000000 0.0004882812
 [7,]    1  0.0  0.00  0.000 0.0000 0.00000 0.000000 0.0000000 0.00781250 0.000000000 0.0009765625 0.0009765625
 [8,]    0  0.0  0.00  0.000 0.0000 0.00000 0.000000 0.0156250 0.00000000 0.001953125 0.0019531250 0.0000000000
 [9,]    0  0.0  0.00  0.000 0.0000 0.00000 0.031250 0.0000000 0.00390625 0.003906250 0.0000000000 0.0004882812
[10,]    0  0.0  0.00  0.000 0.0000 0.06250 0.000000 0.0078125 0.00781250 0.000000000 0.0009765625 0.0000000000
[11,]    0  0.0  0.00  0.000 0.1250 0.00000 0.015625 0.0156250 0.00000000 0.001953125 0.0000000000 0.0000000000
[12,]    0  0.0  0.00  0.250 0.0000 0.03125 0.031250 0.0000000 0.00390625 0.000000000 0.0000000000 0.0004882812
[13,]    0  0.0  0.50  0.000 0.0625 0.06250 0.000000 0.0078125 0.00000000 0.000000000 0.0009765625 0.0000000000
[14,]    0  1.0  0.00  0.125 0.1250 0.00000 0.015625 0.0000000 0.00000000 0.001953125 0.0000000000 0.0024414062
[15,]    2  0.0  0.25  0.250 0.0000 0.03125 0.000000 0.0000000 0.00390625 0.000000000 0.0048828125 0.0014648438
[16,]    0  0.5  0.50  0.000 0.0625 0.00000 0.000000 0.0078125 0.00000000 0.009765625 0.0029296875 0.0039062500
[17,]    1  1.0  0.00  0.125 0.0000 0.00000 0.015625 0.0000000 0.01953125 0.005859375 0.0078125000 0.0151367188
[18,]    2  0.0  0.25  0.000 0.0000 0.03125 0.000000 0.0390625 0.01171875 0.015625000 0.0302734375 0.0019531250
[19,]    0  0.5  0.00  0.000 0.0625 0.00000 0.078125 0.0234375 0.03125000 0.060546875 0.0039062500 0.0029296875
[20,]    1  0.0  0.00  0.125 0.0000 0.15625 0.046875 0.0625000 0.12109375 0.007812500 0.0058593750 0.0253906250
[21,]    0  0.0  0.25  0.000 0.3125 0.09375 0.125000 0.2421875 0.01562500 0.011718750 0.0507812500 0.0253906250
[22,]    0  0.5  0.00  0.625 0.1875 0.25000 0.484375 0.0312500 0.02343750 0.101562500 0.0507812500 0.0063476562
[23,]    1  0.0  1.25  0.375 0.5000 0.96875 0.062500 0.0468750 0.20312500 0.101562500 0.0126953125 0.0009765625
[24,]    0  2.5  0.75  1.000 1.9375 0.12500 0.093750 0.4062500 0.20312500 0.025390625 0.0019531250 0.0000000000
[25,]    5  1.5  2.00  3.875 0.2500 0.18750 0.812500 0.4062500 0.05078125 0.003906250 0.0000000000 0.0019531250
[26,]    3  4.0  7.75  0.500 0.3750 1.62500 0.812500 0.1015625 0.00781250 0.000000000 0.0039062500 0.0029296875
[27,]    8 15.5  1.00  0.750 3.2500 1.62500 0.203125 0.0156250 0.00000000 0.007812500 0.0058593750 0.0009765625
[28,]   31  2.0  1.50  6.500 3.2500 0.40625 0.031250 0.0000000 0.01562500 0.011718750 0.0019531250 0.0000000000
[29,]    4  3.0 13.00  6.500 0.8125 0.06250 0.000000 0.0312500 0.02343750 0.003906250 0.0000000000 0.0083007812
[30,]    6 26.0 13.00  1.625 0.1250 0.00000 0.062500 0.0468750 0.00781250 0.000000000 0.0166015625 0.0000000000
[31,]   52 26.0  3.25  0.250 0.0000 0.12500 0.093750 0.0156250 0.00000000 0.033203125 0.0000000000 0.0048828125
[32,]   52  6.5  0.50  0.000 0.2500 0.18750 0.031250 0.0000000 0.06640625 0.000000000 0.0097656250 0.0034179688
[33,]   13  1.0  0.00  0.500 0.3750 0.06250 0.000000 0.1328125 0.00000000 0.019531250 0.0068359375 0.0229492188
[34,]    2  0.0  1.00  0.750 0.1250 0.00000 0.265625 0.0000000 0.03906250 0.013671875 0.0458984375 0.0297851562
[35,]    0  2.0  1.50  0.250 0.0000 0.53125 0.000000 0.0781250 0.02734375 0.091796875 0.0595703125 0.0771484375
[36,]    4  3.0  0.50  0.000 1.0625 0.00000 0.156250 0.0546875 0.18359375 0.119140625 0.1542968750 0.0004882812
[37,]    6  1.0  0.00  2.125 0.0000 0.31250 0.109375 0.3671875 0.23828125 0.308593750 0.0009765625 0.0000000000
[38,]    2  0.0  4.25  0.000 0.6250 0.21875 0.734375 0.4765625 0.61718750 0.001953125 0.0000000000 0.0048828125
[39,]    0  8.5  0.00  1.250 0.4375 1.46875 0.953125 1.2343750 0.00390625 0.000000000 0.0097656250 0.0000000000
[40,]   17  0.0  2.50  0.875 2.9375 1.90625 2.468750 0.0078125 0.00000000 0.019531250 0.0000000000 0.0000000000
[41,]    0  5.0  1.75  5.875 3.8125 4.93750 0.015625 0.0000000 0.03906250 0.000000000 0.0000000000 0.0000000000
[42,]   10  3.5 11.75  7.625 9.8750 0.03125 0.000000 0.0781250 0.00000000 0.000000000 0.0000000000 0.0004882812
[43,]    7 23.5 15.25 19.750 0.0625 0.00000 0.156250 0.0000000 0.00000000 0.000000000 0.0009765625 0.0078125000
[44,]   47 30.5 39.50  0.125 0.0000 0.31250 0.000000 0.0000000 0.00000000 0.001953125 0.0156250000 0.0000000000
[45,]   61 79.0  0.25  0.000 0.6250 0.00000 0.000000 0.0000000 0.00390625 0.031250000 0.0000000000 0.0000000000
[46,]  158  0.5  0.00  1.250 0.0000 0.00000 0.000000 0.0078125 0.06250000 0.000000000 0.0000000000 0.0004882812
[47,]    1  0.0  2.50  0.000 0.0000 0.00000 0.015625 0.1250000 0.00000000 0.000000000 0.0009765625 0.0000000000
[48,]    0  5.0  0.00  0.000 0.0000 0.03125 0.250000 0.0000000 0.00000000 0.001953125 0.0000000000 0.0000000000
[49,]   10  0.0  0.00  0.000 0.0625 0.50000 0.000000 0.0000000 0.00390625 0.000000000 0.0000000000 0.0000000000
[50,]    0  0.0  0.00  0.125 1.0000 0.00000 0.000000 0.0078125 0.00000000 0.000000000 0.0000000000 0.0000000000
[51,]    0  0.0  0.25  2.000 0.0000 0.00000 0.015625 0.0000000 0.00000000 0.000000000 0.0000000000 0.0000000000
[52,]    0  0.5  4.00  0.000 0.0000 0.03125 0.000000 0.0000000 0.00000000 0.000000000 0.0000000000 0.0000000000
[53,]    1  8.0  0.00  0.000 0.0625 0.00000 0.000000 0.0000000 0.00000000 0.000000000 0.0000000000 0.0000000000
[54,]   16  0.0  0.00  0.125 0.0000 0.00000 0.000000 0.0000000 0.00000000 0.000000000 0.0000000000 0.0000000000
[55,]    0  0.0  0.25  0.000 0.0000 0.00000 0.000000 0.0000000 0.00000000 0.000000000 0.0000000000 0.0000000000
[56,]    0  0.5  0.00  0.000 0.0000 0.00000 0.000000 0.0000000 0.00000000 0.000000000 0.0000000000 0.0000000000 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T01:36:35.873

好的，我将为您解释 和 之间的区别`[`，`[[`这会导致您出现问题。我将留给您使用此信息进行适当的更改。

考虑以下列表：

```
l <- list(a = matrix(1:25,5,5),b = 1:5,c = letters[1:5],d = NA)
> l
$a
     [,1] [,2] [,3] [,4] [,5]
[1,]    1    6   11   16   21
[2,]    2    7   12   17   22
[3,]    3    8   13   18   23
[4,]    4    9   14   19   24
[5,]    5   10   15   20   25

$b
[1] 1 2 3 4 5

$c
[1] "a" "b" "c" "d" "e"

$d
[1] NA 
```

假设我们要选择这个列表的第一个元素，即矩阵。你正在做这样的事情：

```
> l[1]
$a
     [,1] [,2] [,3] [,4] [,5]
[1,]    1    6   11   16   21
[2,]    2    7   12   17   22
[3,]    3    8   13   18   23
[4,]    4    9   14   19   24
[5,]    5   10   15   20   25 
```

这是错误的。`[`将始终返回原始列表的*子*列表。所以你在这里看到`l[1]`的实际上是一个长度为 1 的列表。它的一个元素是我们实际追求的矩阵。

你想要的是：

```
> l[[1]]
     [,1] [,2] [,3] [,4] [,5]
[1,]    1    6   11   16   21
[2,]    2    7   12   17   22
[3,]    3    8   13   18   23
[4,]    4    9   14   19   24
[5,]    5   10   15   20   25 
```

如果您比较 的输出`str(l[1])`与`str(l[[1]])`差异应该是显而易见的，并且还清楚为什么向您请求的第一条信息涉及`str`. 它是一个非常宝贵的调试工具，可以确保对象是您实际认为的那样。

最后，正如我在我的一条评论中提到的，请永远不要这样做：

```
expert_data_frame$t_labels ~. 
```

相反，只需执行以下操作：

```
t_labels ~. 
```

公式界面的全部要点是您不必编写数据框的名称。该函数将在您提供的数据框中查找您在公式中命名的变量。如果您使用`$`显式选择变量，则会引入令人讨厌的错误来源，从而可能会迫使 R 使用您不打算使用的变量。

# c++ - 破坏时的神秘分段错误

> ID：13793531
> 
> 赞同：3
> 
> 时间：2012-12-10T00:44:42.623
> 
> 标签：c++, templates, tree, segmentation-fault

在歌曲“God Wrote in LISP Code”中，他们说用 C（或 C++）“只有上帝才能造树”；我开始相信了。

我有一个树类的开始，但是我的类在销毁时出现段错误，说错误是我的队列`free_spaces`，尽管我不明白为什么。此外，随机错误似乎潜伏在这里和那里。

我以前从未使用过这样的模板，所以可能存在一些隐藏的滥用行为。

任何帮助，将不胜感激。

**头文件.h**

```
#include<vector>
#include<queue>
#include<iostream>
using namespace std;

template <class T>
class node {
    public:
        int leftChild,parent;
        bool empty;
        T data;
        node() : leftChild(-1), parent(-1), empty(true) {}
};

template <class T>
class AvlTree {
    private:
        vector< node<T> > nodes;
        queue<int> free_spaces;
        int root;

        int newnode(int parent){
            int index=nodes.size();
            nodes.push_back(node<T>());
            nodes[index].parent=parent;
            return index;
        }

    public:
        AvlTree(){
            nodes.push_back(node<T>());
            root=0;
        }

        void grow(){
            nodes[root].leftChild=newnode(root);
        }
}; 
```

**主文件**

```
#include "header.h"

int main(){
    AvlTree<int> bob;
    bob.grow();
    cerr<<"Made it to end."<<endl;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T01:18:41.563

问题在于以下代码行：

```
nodes[parent].leftChild=newnode(parent); 
```

只需用它替换它即可修复它：

```
int left = newnode(parent);
nodes[parent].left = left; 
```

这最终归结为评估的顺序。问题是该`newnode()`函数修改了向量长度。这样做可能会强制`std::vector<>`重新分配内存以增长（即如果当前容量不够）。如果您遇到这种情况，`nodes[parent].left`左侧的表达式（如果在`newnode()`调用之前进行评估）将指向可能无效的内存位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T01:04:22.247

Valgrind 显示此错误：

```
==23995== Invalid write of size 4
==23995==    at 0x400F68: AvlTree<int>::grow() (/tmp/header.h:39)
==23995==    by 0x400BC6: main (/tmp/t.cc:5)
==23995==  Address 0x5967770 is 0 bytes inside a block of size 16 free'd
==23995==    at 0x4C29DFD: operator delete(void*) (/coregrind/m_replacemalloc/vg_replace_malloc.c:456)
==23995==    by 0x401FC5: __gnu_cxx::new_allocator<node<int> >::deallocate(node<int>*, unsigned long) (/usr/include/c++/4.4/ext/new_allocator.h:95)
==23995==    by 0x40187B: std::_Vector_base<node<int>, std::allocator<node<int> > >::_M_deallocate(node<int>*, unsigned long) (/usr/include/c++/4.4/bits/stl_vector.h:146)
==23995==    by 0x401743: std::vector<node<int>, std::allocator<node<int> > >::_M_insert_aux(__gnu_cxx::__normal_iterator<node<int>*, std::vector<node<int>, std::allocator<node<int> > > >, node<int> const&) (/usr/include/c++/4.4/bits/vector.tcc:361)
==23995==    by 0x40106B: std::vector<node<int>, std::allocator<node<int> > >::push_back(node<int> const&) (/usr/include/c++/4.4/bits/stl_vector.h:741)
==23995==    by 0x40131A: AvlTree<int>::newnode(int) (/tmp/header.h:24)
==23995==    by 0x400F67: AvlTree<int>::grow() (/tmp/header.h:39)
==23995==    by 0x400BC6: main (/tmp/t.cc:5) 
```

这应该足以让您找到错误。

# hibernate - 为我的多表选择 SQL 创建一个休眠映射 XML

> ID：13793532
> 
> 赞同：0
> 
> 时间：2012-12-10T00:45:00.247
> 
> 标签：hibernate, hibernate-mapping

我试图了解如何为从各种表中检索各种字段的单个选择创建映射 XML。

请参阅下面的 SQL（为简单起见，我将检索每个表中的所有字段）

```
SELeCT a.*, b.*, c.*, d.*
from
    table1 a,
    table2 b,
    table3 c,
    table4 d
where
    a.id = b.id
    and a.id = c.id (+)
    and a.code = d.code (+)
    and a.id = 34 
```

这是表定义。

我的主表是 table1，它与 table2 是一对一的关系。table1 在 table3 和 table4 中可能有也可能没有对应的记录。表 1、2 和 4 中的 id 列具有相同的值。（例如，如果 table1.id = 34 并且如果 table1 在 table3 和 4 中有记录，则 table3.id 和 table4.id = 34）

```
table1 (
    id int,
    code varchar2(255)
)

table2 (
    id int,
    some_column1 varchar2(255)
    some_column2 varchar2(255)
)

table3 (
    code varchar2(255),
    description varchar(512)
)

table3 (
    id int,
    url varchar(1024)
) 
```

我一直在阅读 jboss.org 站点上的 HQL 入门和基本 o/R，但它并没有真正告诉我如何为上面的 SQL 创建一个休眠映射 XML。

谢谢你！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T01:10:01.973

为 Hibernate编写有效的[XML 映射的最佳方法是](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/xml.html)[阅读本教程](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/mapping.html)。

读者关注的几件事是：

*   XML 类映射
*   关系类型

在您的示例中，我们有四个表。应该以某种方式连接。

所以第一步是为所有表创建一个 POJO 类，并为简单的属性创建 XML 映射。

模型应该看起来像

```
class A {
  int id; 
  String code;
  B b
  C c;
  D d;
} 

class B {
  int id;
}

class C {
  int id;
}

class D {
  String code;
} 
```

映射

A和B之间的连接

`<one-to-one name="b" class="B">`

然后我们映射表 C (a.id = b.id(+))

`<many-to-one name="c" class="C"/>`

我们映射表 D (a.code = c.code(+))

`<many-to-one name="d" class="D" column="CODE"/>`

# ruby-on-rails - 无法在 centos 上安装 therubyracer（V8 和 GCC 出错）

> ID：13793533
> 
> 赞同：5
> 
> 时间：2012-12-10T00:45:02.010
> 
> 标签：ruby-on-rails, ruby, therubyracer

我正在尝试在我的 centos 服务器上安装 therubyracer，但遇到了很多问题。

```
$ gem install therubyracer
Building native extensions.  This could take a while...
ERROR:  Error installing therubyracer:
    ERROR: Failed to build gem native extension.

        /usr/local/rvm/rubies/ruby-1.9.3-p125/bin/ruby extconf.rb
checking for main() in -lpthread... yes
checking for v8.h... no
*** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.

Provided configuration options:
    --with-opt-dir
    --with-opt-include
    --without-opt-include=${opt-dir}/include
    --with-opt-lib
    --without-opt-lib=${opt-dir}/lib
    --with-make-prog
    --without-make-prog
    --srcdir=.
    --curdir
    --ruby=/usr/local/rvm/rubies/ruby-1.9.3-p125/bin/ruby
    --with-pthreadlib
    --without-pthreadlib
    --enable-debug
    --disable-debug
    --with-v8-dir
    --without-v8-dir
    --with-v8-include
    --without-v8-include=${v8-dir}/include
    --with-v8-lib
    --without-v8-lib=${v8-dir}/lib
/usr/local/rvm/gems/ruby-1.9.3-p125@famnfo/gems/therubyracer-0.11.0/ext/v8/build.rb:42:in `build_with_system_libv8': unable to locate libv8\. Please see output for details (RuntimeError)
    from extconf.rb:22:in `<main>'
    The Ruby Racer requires libv8 ~> 3.11.8
    to be present on your system in order to compile
    and link, but it could not be found.

    In order to resolve this, you will either need to manually
    install an appropriate libv8 and make sure that this
    build process can find it. If you install it into the
    standard system path, then it should just be picked up
    automatically. Otherwise, you'll have to pass some extra
    flags to the build process as a hint.

    If you don't want to bother with all that, there is a
    rubygem that will do all this for you. You can add
    following line to your Gemfile:
        gem 'libv8', '~> 3.11.8'

    We hope that helps, and we apologize, but now we have
    to push the eject button on this install.

    thanks,
    The Mgmt.

Gem files will remain installed in /usr/local/rvm/gems/ruby-1.9.3-p125@famnfo/gems/therubyracer-0.11.0 for inspection.
Results logged to /usr/local/rvm/gems/ruby-1.9.3-p125@famnfo/gems/therubyracer-0.11.0/ext/v8/gem_make.out 
```

所以然后我尝试安装这个：

```
[root@allthingswebdesign current]# gem install libv8
Building native extensions.  This could take a while...
ERROR:  Error installing libv8:
    ERROR: Failed to build gem native extension.

        /usr/local/rvm/rubies/ruby-1.9.3-p125/bin/ruby extconf.rb
creating Makefile
which: no g++44 in (/usr/local/rvm/gems/ruby-1.9.3-p125/bin:/usr/local/rvm/gems/ruby-1.9.3-p125@global/bin:/usr/local/rvm/rubies/ruby-1.9.3-p125/bin:/usr/local/rvm/gems/ruby-1.9.3-p125@famnfo/bin:/usr/local/rvm/gems/ruby-1.9.3-p125@global/bin:/usr/local/rvm/rubies/ruby-1.9.3-p125/bin:/usr/local/rvm/bin:/usr/kerberos/sbin:/usr/kerberos/bin:/usr/local/bin:/bin:/usr/bin)
which: no g++46 in (/usr/local/rvm/gems/ruby-1.9.3-p125/bin:/usr/local/rvm/gems/ruby-1.9.3-p125@global/bin:/usr/local/rvm/rubies/ruby-1.9.3-p125/bin:/usr/local/rvm/gems/ruby-1.9.3-p125@famnfo/bin:/usr/local/rvm/gems/ruby-1.9.3-p125@global/bin:/usr/local/rvm/rubies/ruby-1.9.3-p125/bin:/usr/local/rvm/bin:/usr/kerberos/sbin:/usr/kerberos/bin:/usr/local/bin:/bin:/usr/bin)
which: no g++48 in (/usr/local/rvm/gems/ruby-1.9.3-p125/bin:/usr/local/rvm/gems/ruby-1.9.3-p125@global/bin:/usr/local/rvm/rubies/ruby-1.9.3-p125/bin:/usr/local/rvm/gems/ruby-1.9.3-p125@famnfo/bin:/usr/local/rvm/gems/ruby-1.9.3-p125@global/bin:/usr/local/rvm/rubies/ruby-1.9.3-p125/bin:/usr/local/rvm/bin:/usr/kerberos/sbin:/usr/kerberos/bin:/usr/local/bin:/bin:/usr/bin)
Unable to find a compiler officially supported by v8.
It is recommended to use GCC v4.4 or higher
Using compiler: g++
Traceback (most recent call last):
  File "build/gyp/gyp", line 15, in ?
    import gyp
  File "build/gyp/pylib/gyp/__init__.py", line 8, in ?
    import gyp.input
  File "build/gyp/pylib/gyp/input.py", line 14, in ?
    import gyp.common
  File "build/gyp/pylib/gyp/common.py", line 375
    with open(source_path) as source_file:
            ^
SyntaxError: invalid syntax
gmake: *** [out/Makefile.x64] Error 1
GYP_GENERATORS=make \
    build/gyp/gyp --generator-output="out" build/all.gyp \
                  -Ibuild/standalone.gypi --depth=. \
                  -Dv8_target_arch=x64 \
                  -S.x64 -Dhost_arch=x64

Gem files will remain installed in /usr/local/rvm/gems/ruby-1.9.3-p125@famnfo/gems/libv8-3.11.8.4 for inspection.
Results logged to /usr/local/rvm/gems/ruby-1.9.3-p125@famnfo/gems/libv8-3.11.8.4/ext/libv8/gem_make.out
[root@allthingswebdesign current]# 
```

哪个g++的输出

```
$ which g++
/usr/bin/g++

    $ /usr/bin/g++ --version
g++ (GCC) 4.1.2 20080704 (Red Hat 4.1.2-52)
Copyright (C) 2006 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.

[root@allthingswebdesign current]# which g++
/usr/bin/g++
[root@allthingswebdesign current]# which g++44
/usr/bin/g++44
[root@allthingswebdesign current]# 

[root@allthingswebdesign current]# cd /usr/bin/
[root@allthingswebdesign bin]# ls -al g++*
-rwxr-xr-x 4 root root 218432 May 10  2012 g++
-rwxr-xr-x 2 root root 263704 Feb 21  2012 g++44
lrwxrwxrwx 1 root root     12 Dec  9 17:21 g++-4.4 -> /usr/bin/g++ 
```

您要求的信息：

```
[root@allthingswebdesign node-v0.8.15]# which gcc
/usr/bin/gcc
[root@allthingswebdesign node-v0.8.15]# which g++
/usr/bin/g++
[root@allthingswebdesign node-v0.8.15]# which g++44
/usr/bin/g++44
[root@allthingswebdesign node-v0.8.15]# ls -la /usr/bin/g++
-rwxr-xr-x 4 root root 218432 May 10  2012 /usr/bin/g++
[root@allthingswebdesign node-v0.8.15]# 
```

**编辑** 使用@Chris的解决方案后，我现在安装libv8，但therubyracer仍然没有安装并给我这个：

```
[root@allthingswebdesign famnfo.com]# gem install therubyracer
Fetching: therubyracer-0.11.0.gem (100%)
Building native extensions.  This could take a while...
ERROR:  Error installing therubyracer:
    ERROR: Failed to build gem native extension.

        /usr/local/rvm/rubies/ruby-1.9.3-p125/bin/ruby extconf.rb
checking for main() in -lpthread... yes
creating Makefile

make
compiling accessor.cc
accessor.cc:181:2: warning: no newline at end of file
compiling array.cc
array.cc:26:2: warning: no newline at end of file
compiling backref.cc
backref.cc:45:2: warning: no newline at end of file
compiling constants.cc
constants.cc:34:2: warning: no newline at end of file
compiling constraints.cc
constraints.cc:52:2: warning: no newline at end of file
compiling context.cc
compiling date.cc
date.cc:18:2: warning: no newline at end of file
compiling exception.cc
exception.cc:38:2: warning: no newline at end of file
compiling external.cc
external.cc:43:2: warning: no newline at end of file
compiling function.cc
function.cc:58:2: warning: no newline at end of file
compiling gc.cc
gc.cc:43:2: warning: no newline at end of file
compiling handles.cc
handles.cc:34:2: warning: no newline at end of file
compiling heap.cc
heap.cc:31:2: warning: no newline at end of file
compiling init.cc
init.cc:39:2: warning: no newline at end of file
compiling invocation.cc
invocation.cc:86:2: warning: no newline at end of file
compiling locker.cc
locker.cc:77:2: warning: no newline at end of file
compiling message.cc
message.cc:51:2: warning: no newline at end of file
compiling object.cc
object.cc:334:2: warning: no newline at end of file
compiling primitive.cc
primitive.cc:8:2: warning: no newline at end of file
compiling rr.cc
rr.cc:83:2: warning: no newline at end of file
compiling script.cc
script.cc:80:17: warning: no newline at end of file
compiling signature.cc
signature.cc:18:2: warning: no newline at end of file
compiling stack.cc
stack.cc:76:2: warning: no newline at end of file
compiling string.cc
string.cc:47:17: warning: no newline at end of file
compiling template.cc
template.cc:175:2: warning: no newline at end of file
compiling trycatch.cc
trycatch.cc:87:2: warning: no newline at end of file
compiling v8.cc
v8.cc:87:2: warning: no newline at end of file
compiling value.cc
value.cc:239:2: warning: no newline at end of file
linking shared-object v8/init.so
/usr/bin/ld:/usr/local/rvm/gems/ruby-1.9.3-p125/gems/libv8-3.11.8.3-x86_64-linux/vendor/v8/out/x64.release/obj.target/tools/gyp/libv8_base.a: file format not recognized; treating as linker script
/usr/bin/ld:/usr/local/rvm/gems/ruby-1.9.3-p125/gems/libv8-3.11.8.3-x86_64-linux/vendor/v8/out/x64.release/obj.target/tools/gyp/libv8_base.a:1: syntax error
collect2: ld returned 1 exit status
make: *** [init.so] Error 1

Gem files will remain installed in /usr/local/rvm/gems/ruby-1.9.3-p125/gems/therubyracer-0.11.0 for inspection.
Results logged to /usr/local/rvm/gems/ruby-1.9.3-p125/gems/therubyracer-0.11.0/ext/v8/gem_make.out 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-10T03:58:39.417

libv8 无法安装，因为 Centos 附带 Python 2.4。你至少需要 Python 2.6 来编译它。你可以这样做：

```
yum install python26
ln -s /usr/bin/python26 /usr/local/bin/python 
```

更简单地说，你可以从它的二进制包中安装 libv8：

```
gem install libv8 --version=3.11.8.3 
```

也就是说，即使这样做了，即使安装了 libv8，therubyracer 也可能安装也可能不安装；我一直有零星的问题，但只在某些机器上，还没有能够找出常见的根本原因。我已经求助于在这些机器上编译 node.js。

# vb.net - 设置 writeline 的名称和位置？

> ID：13793534
> 
> 赞同：1
> 
> 时间：2012-12-10T00:45:08.453
> 
> 标签：vb.net, visual-studio-2010, streamwriter

我想为 writeline 过程设置名称和位置。我允许用户使用对话框选择路径，但似乎无法同时设置名称和位置而不会出现错误。我正在使用 VS 2010。

```
 strFileLocation = dlgFolderBrowser.SelectedPath

    Dim swrExportFile As New StreamWriter(strFileLocation) 
```

在此先感谢，乔希

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T00:48:45.783

我不是 100% 确定这就是您的意思，而是按名称和位置；你的意思是文件名和文件所在的目录？

如果是这样，您可以将其作为一个传递给 StreamWriter：

```
Dim swrExportFile as New StreamWriter("C:\My\File\Location\" + "myFileName.txt") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T06:41:05.537

也许 saveFileDialog 可能更适合此任务

# android - getActivity 在 Fragment 中返回 null

> ID：13793537
> 
> 赞同：1
> 
> 时间：2012-12-10T00:46:18.023
> 
> 标签：android, android-fragments, android-activity

我有一个基本上是列表视图的片段。父活动调用一个方法来从服务中检索花名册项目列表。当数据从服务返回时，我在通过的片段和名册项目的 ArrayList 上调用 updateRosterItems。问题是它第一次工作，但是当我选择一个不同的选项卡，然后返回到带有片段的选项卡时，getActivity() 返回 null，我无法将数据连接到 ArrayAdapter。

这是 updateRosterItems 函数的代码：

```
public void updateRosterList(ArrayList<RosterInfo> rosterItems)
{
    if(_adapter == null)
    {
        _adapter = new RosterItemAdapter(getActivity(), R.layout.roster_listview_item, rosterItems);
    }

    Activity activity = getActivity();
    if(activity != null)
    {
        ListView list = (ListView)activity.findViewById(R.id.lstRosterItems);

        list.setAdapter(_adapter);
        _adapter.notifyDataSetChanged();
    }
} 
```

我已经阅读过在附加片段之前调用代码引起的类似问题。我想我的问题是，有没有办法延迟对 updateRosterList 的调用，直到调用 onAttach 之后？我正在玩弄的解决方案是，如果 getActivity() 返回 null 然后将数据存储在片段中的私有变量中，并在 onAttach 方法中检查变量中是否有数据，然后在适配器上调用更新。不过，这似乎有点 hacky。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T01:07:34.833

更新：我已经设法通过这样做来让它工作。我对 Android 开发很陌生，作为一种解决方案对我来说似乎有点 hacky。有没有更好的办法？基本上 updateRosterList 函数是从片段外部调用的函数。

```
public class RosterListFragment extends Fragment {

RosterItemAdapter _adapter = null;
private ArrayList<RosterInfo> _items;

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState)
{
    return inflater.inflate(R.layout.roster_listview, container, false);
}

@Override
public void onActivityCreated(Bundle savedInstanceState)
{
    super.onActivityCreated(savedInstanceState);

    if(_items != null)
    {
        performUpdateRosterList(_items);
    }

}

public void updateRosterList(ArrayList<RosterInfo> rosterItems)
{
    Activity activity = getActivity();
    if(activity != null)
    {
        performUpdateRosterList(rosterItems);
    }
    else
    {
        _items = rosterItems;
    }
}

private void performUpdateRosterList(ArrayList<RosterInfo> rosterItems)
{
    Activity activity = getActivity();
    if(_adapter == null)
    {
        _adapter = new RosterItemAdapter(activity, R.layout.roster_listview_item, rosterItems);
    }

    ListView list = (ListView)activity.findViewById(R.id.lstRosterItems);

    list.setAdapter(_adapter);
    _adapter.notifyDataSetChanged();
}

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T00:49:58.787

您是对的，该活动尚未附加。有两种方法可以处理这个问题。

1.  在附加活动之前不要进行更改。也许只是保存 rosterItems，稍后再更新。
2.  将上下文传递到您的更新程序函数中。

就个人而言，我会说第一个可能是更好的路径，但任何一个都可以正常工作。

# logic - 水獭推论

> ID：13793539
> 
> 赞同：1
> 
> 时间：2012-12-10T00:46:56.170
> 
> 标签：logic, theorem-proving, theorem

我正在为 OTTER 编写一个非常简单的输入文件：

```
set(auto).

formula_list(usable).

all x y ([Nipah(x) & Encephalitis(y)] -> Causes(x,y)).
exists x y (Nipah(x) & Encephalitis(y)).

end_of_list. 
```

我得到这个搜索输出：

```
given clause #1: (wt=2) 2 [] Nipah($c2).
given clause #2: (wt=2) 2 [] Encephalitis($c1).
search stopped because sos empty 
```

为什么 OTTER 不推断`Causes($c2,$c1)`？

编辑：我删除了方括号`[Nipah(x) & Encephalitis(x)]`，它起作用了。为什么这很重要？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T16:24:00.553

我会回答一个问题：你为什么首先使用方括号？

查看 Otter 手册，第 4.3 节，列表符号。方括号用于列表，它是扩展为特殊术语的语法糖。在您的情况下，它扩展到类似

```
all x y ($cons(Nipah(x) & Encephalitis(y), $nil) -> Causes(x,y)). 
```

* * *

> 为什么 OTTER 不推断 Causes($c2,$c1)？

请注意，分辨率演算并不完整，因为在给定理论中可证明的每个公式都可以通过演算推断出来。这将是非常不可取的！相反，解决方案只是*反驳完整*的，这意味着如果给定的理论是矛盾的，那么解决方案将找到空子句的证明。因此，即使一个子句`C`是一组子句的逻辑结果，`T`也不意味着解析演算可以`C`从`T`. 在您的情况下，`Causes($c2,$c1)`从输入得出的事实并不意味着 Otter 必须派生它。

# constraint-programming - 非确定性 CSP 编程工具？

> ID：13793540
> 
> 赞同：1
> 
> 时间：2012-12-10T00:47:02.273
> 
> 标签：constraint-programming, non-deterministic, constraint-satisfaction

嗨，我需要一个非确定性约束满足问题工具，因为我需要具有相同问题输入的不同解决方案。有人知道具有这种特性的工具吗？

我只知道像 Gecode (c++)、Choco (Java) 和 Curry (Haskell) 这样的工具，我认为它们以确定性的方式工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T09:29:49.937

和 Zayenz 说的类似，你可以试试[Minion](http://minion.sf.net) with the flag `-randomiseorder`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T08:50:22.980

如果您想要获得一些随机解决方案，大多数 CP 工具都支持使用随机启发式算法。例如，标准 Gecode 分支器对此有选项，例如整数变量的 INT_VAR_RND 和 INT_VAL_RND。要每次获得不同的搜索，请确保设置唯一的种子。

请注意，使用随机启发式方法不会为您提供任何分布保证。例如，您的问题可能只有两个解决方案，但几乎所有随机选择都可能导致其中一个解决方案给出非常倾斜的分布。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T09:01:26.037

您是否尝试进行[帕累托优化](http://docs.jboss.org/drools/release/5.5.0.Final/drools-planner-docs/html_single/index.html#d0e3383)（又名多目标优化）并让用户选择其中一种帕累托最优解？

![帕累托](../Images/9b392f6ba74eb79a6c812c3fffa1c51e.png)

人们通过简单地替换[BestSolutionRecaller](https://github.com/droolsjbpm/drools-planner/blob/master/drools-planner-core/src/main/java/org/drools/planner/core/bestsolution/BestSolutionRecaller.java)类来使用[Drools Planner](http://www.jboss.org/drools/drools-planner)（java，开源）完成此操作。请参阅[此线程](http://drools.46999.n3.nabble.com/the-n-best-solutions-on-a-very-simple-test-case-td60618.html)和[此线程](http://drools.46999.n3.nabble.com/Finding-Multiple-Solutions-using-Drools-Planner-td1521246.html)。Planner 6.0 或 6.1 将提供开箱即用的帕累托支持。

# entity-framework - 存储库模式 MVC4 EF5

> ID：13793543
> 
> 赞同：2
> 
> 时间：2012-12-10T00:47:38.577
> 
> 标签：entity-framework, asp.net-mvc-4, repository-pattern

作为 MVC4、ASP.NET 和实体框架的新手，我一直在研究存储库和工作单元模式的使用，我想验证我的理解。

我认为`DBContext`EF5 CodeFirst 中使用的用作工作单元是否正确？

在这种情况下，实施存储库有什么意义吗？

或者我应该使用：

`Model - Repository - ViewModel - Controller - View`?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T06:06:51.287

查看 CodePlex 上的 MVC Scaffolding 项目：

[http://mvcscaffolding.codeplex.com/](http://mvcscaffolding.codeplex.com/)

此外，这是一个演练，展示了如何使用它的一些介绍：

[http://www.codeproject.com/Articles/468777/Code-First-with-Entity-Framework-5-using-MVC4-and](http://www.codeproject.com/Articles/468777/Code-First-with-Entity-Framework-5-using-MVC4-and)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T10:39:46.593

这里有一些想法，为什么你不需要在你的 MVC 项目中使用 UoF。

[华盛顿大学](http://www.hareville.com/2013/01/using-the-repository-pattern-with-entityframework-codefirst-mvc4/)

# php - 从两个表中选择并按时间戳排序

> ID：13793545
> 
> 赞同：2
> 
> 时间：2012-12-10T00:47:59.340
> 
> 标签：php, mysql, sql

我有两个表（故事和状态），每个都有这些公共字段

```
id (unsigned int - auto increment)
creator (unsigned int)
message (varchar)
timestamp (unsigned int) 
```

当我在我的网页上显示这些表时，我想使用一个查询按时间戳顺序从两个表中进行选择，但以不同的方式显示它们。

喜欢（按时间戳顺序）：

```
SELECT * FROM `stories`, `statuses` WHERE `creator` = 1 ORDER BY `timestamp` DESC LIMIT 0, 10

Row 1: id, creator, message, timestamp, type ("status")
Row 2: id, creator, message, timestamp, type ("story")
Row 3: id, creator, message, timestamp, type ("status")
Row 4: id, creator, message, timestamp, type ("status")
Row 5: etc... 
```

我需要类型字段在我的网页上以不同方式显示每一行。而这只是每个表格的简单形式；它们实际上要复杂得多，但我可以将答案从这里转移到我当前的查询中。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T04:02:40.300

您可以使用**UNION**运算符来组合两个或多个 SELECT 语句的结果集。

```
SELECT a.id, a.creator, a.message, a.timestamp, 'story' as table_type
FROM stories a
UNION
SELECT b.id, b.creator, b.message, b.timestamp, 'status' as table_type
FROM statuses b
WHERE ( a.creator = 1 ) OR (b.creator = 1)
ORDER BY 'timestamp' DESC LIMIT 0, 10; 
```

请注意，UNION 运算符默认只选择不同的值。要允许重复值，请使用**UNION ALL**。

```
SELECT a.id, a.creator, a.message, a.timestamp, 'story' as table_type
FROM stories a
UNION ALL
SELECT b.id, b.creator, b.message, b.timestamp, 'status' as table_type
FROM statuses b
WHERE ( a.creator = 1 ) OR (b.creator = 1)
ORDER BY 'timestamp' DESC LIMIT 0, 10; 
```

我希望这可以帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T00:54:52.597

您可以`JOIN`结合`SELECT column AS 'some name'`语法使用 a 来执行此操作。

*例如...*

```
SELECT statuses.somefield AS 'some name' FROM `stories` JOIN(`statuses`) ON (status.id = stories.id) WHERE stories.creator = 1 ORDER BY stories.timestamp DESC LIMIT 0, 10 
```

# apache - .htaccess 使用当前的 htaccess 代码重定向到 WWW？

> ID：13793547
> 
> 赞同：0
> 
> 时间：2012-12-10T00:48:37.427
> 
> 标签：apache, .htaccess, url-rewriting

我想将我的 URL 重定向到该`www`版本。我可以这样做，但我已经有工作`.htaccess`代码将浏览器重定向到处理 URL 的 index.php 文件。我有这段代码（我没有写），但我`htaccess`对解决问题的了解还不够：

```
RewriteEngine On
RewriteCond %{SCRIPT_FILENAME} !-d
RewriteCond %{SCRIPT_FILENAME} !-f
RewriteRule ^(.*)$  /index.php [NC] 
```

我尝试在重定向中简单地使用完整的 URL 路径，但是当我尝试访问页面时会产生 404 错误。我还尝试在此代码下简单地包含更多规则，但没有成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T01:55:50.987

你的意思是你想让[http://example.com/foo/bar](http://example.com/foo/bar)重定向到[http://www.example.com/foo/bar](http://www.example.com/foo/bar)吗？

如果是这样，这应该可以解决问题，同时保留您的意图

```
RewriteEngine On

# First redirect non-www hosts (the "L" flag means we won't process
# any more rewrite conditions in this redirect; on the next request,
# the rewrite condition won't match and we'll fall through to your 
# original rule)
RewriteCond %{HTTP_HOST} !^www\.(.*) [NC]
RewriteRule ^(.*)$ http://www.yourdomain.com/$1 [R=301,NC,L]  

# Handle normal requests
RewriteCond %{SCRIPT_FILENAME} !-d
RewriteCond %{SCRIPT_FILENAME} !-f
RewriteRule ^(.*)$  /index.php [NC]: 
```

# javascript - 在文本框中按下回车键时运行函数

> ID：13793550
> 
> 赞同：-3
> 
> 时间：2012-12-10T00:48:46.610
> 
> 标签：javascript, jquery, html, javascript-events

这是我的输入表单：

```
<input type="text" id="word" /> 
```

我基本上希望当人们在文本框中按下回车键时执行 Javascript 函数。很抱歉，如果这是一个明显的问题，我找不到符合我需要的现有答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T00:49:58.713

```
$('#word').on('keyup', function(e){
  if(e.which === 13){
    // User pressed enter
  }
}); 
```

测试事件`which`属性将告诉您用户按下了哪个键。
`which`由 jQuery 规范化，所以你不会有任何跨浏览器的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T00:52:17.883

[`keyup()`](http://api.jquery.com/keyup/)是你的答案：

```
$('#word').keyup(function(e) {
    if(e.which == 13) {
        // Do your stuff
    }
}); 
```

`e.which`返回所按下键的扫描/字符代码。`13`是为`ENTER`。

[您可以在此处](http://www.cambiaresearch.com/articles/15/javascript-char-codes-key-codes)找到其他代码。

# android - 单击时在RelativeLayout中获取textview的ID

> ID：13793553
> 
> 赞同：0
> 
> 时间：2012-12-10T00:49:21.797
> 
> 标签：android, textview, click, onclicklistener, android-relativelayout

我有一个带有许多 textview 的 RelativeLayout，就像在这个 main.xml 示例中一样。

**主要的.xml**

```
<RelativeLayout  
xmlns:android="http://schemas.android.com/apk/res/android"  
android:layout_height="fill_parent"  
android:layout_width="fill_parent"
android:background="#000000"
android:id="@+id/RelativeLayout"
>  
<TextView 
    android:id="@+id/tv00"
    android:background="#ffffff"
    android:layout_height="wrap_content"  
    android:layout_width="wrap_content"
    android:clickable="true"></TextView>
<TextView  
    android:id="@+id/tv01"  
    android:layout_width="wrap_content"  
    android:layout_below="@+id/tv00"
    android:padding="5dp"
    android:clickable="true"></TextView> ...

...</RelativeLayout> 
```

我想在我的 activity.java 中访问我单击的 textview 的 id。怎么做？使用 onClickListener 我可以在 RelativeLayout 上进行监听，但是如何针对该布局中的特定文本视图进行监听。getid() 有什么用？

**活动.java**

```
 RelativeLayout rv =(RelativeLayout)findViewById(R.id.RelativeLayout);
    rv.setOnClickListener(new View.OnClickListener(){
        public void onClick(View v) {
        }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T13:18:58.823

据我所知，RelativeLayout 没有像“onChildClick”监听器这样的东西。您可以迭代您的 TextViews（使用`rv.getChildCount()`and `rv.getChildAt(i)`）并将点击侦听器添加到各个视图......但是，如果您的 RelativeLayout 只包含一个 TextViews 列表，您可能需要考虑使用[ListView](http://developer.android.com/reference/android/widget/ListView.html "列表显示")代替（及其`setOnItemClickListener()`）。

# java - 边界代码 - Java

> ID：13793555
> 
> 赞同：1
> 
> 时间：2012-12-10T00:49:42.307
> 
> 标签：java, boundary

我正在为游戏编写代码，我需要帮助的是我将对象放在地图上并尝试制作它，以便玩家无法穿过对象。n 问题是 x 边界有效，但你没有，我不知道如何进行。

```
 public Boolean checkPathClear(int x, int y){
     xPPos=x;
     yPPos=y;
     int tX1=350-50-xPos,tX2=450-xPos,tY1=200,tY2=300;
     if ((xPPos>=tX1)&&(xPPos<=tX2)&&(yPPos>=tY1)&&(yPPos<tY2))
       return(false);
     else
       return(true);
   }
   public void paintComponent(Graphics g){    
     g.drawImage(imgTurret,350-xPos,200,450-xPos,300,0,0,126,110, this);

     g.drawImage(imgPlayer,xPPos,yPPos,xPPos+50,yPPos+50,xPFace,yPFace,xPFace+50,yPFace+50, this);
       }
 }
 //xPPos is 200 at the start.
 //yPPos is 200 at the start.
 //xPos is 0 at the start.
 //xPFace, yPFace is just the direction the player is facing so it doesnt matter 
```

我编辑了代码，所以人们不需要查看所有内容:)

如果有人可以帮助我，我将不胜感激：D

编辑：对于任何想看到我在其上实现代码的人。当您向右移动时，图像显示向左移动，因此看起来屏幕向右移动。![竞技场板](../Images/8a1bcec2143a010d7198bb5a4f383362.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T01:06:52.587

您的图像是用尺寸[绘制的：](http://docs.oracle.com/javase/7/docs/api/java/awt/Graphics.html#drawImage%28java.awt.Image,%20int,%20int,%20java.awt.Color,%20java.awt.image.ImageObserver%29)

```
imageX: 350-xPos,
imageY: 200,
width: 450-xPos,
height: 300 
```

所以：

```
return !(imageX <= x && x' < imageX + width
    && imageY <= y && y' < imageY + height); 
```

# file - 将文件从我的应用程序的资源复制到 sdcard 中的新文件

> ID：13793557
> 
> 赞同：1
> 
> 时间：2012-12-10T00:49:54.190
> 
> 标签：file, resources, copy, sd-card

我正在尝试将图像文件从可能应用程序的资源复制到 sdcard 中的新文件。但我在 LogCat 中收到一个错误：

```
12-10 01:34:38.292: W/System.err(29307): java.io.FileNotFoundException: /es.epinanab.eic:raw/termo_k: open failed: ENOENT (No such file or directory) 
```

这是我的代码：

```
File src = new File(getResources().getResourceName(R.raw.termo_k));

File dest = new File(Environment.getExternalStorageDirectory() + "/.EIC/termo_k.jpg");

try {
    InputStream in = null;
    in = new FileInputStream(src);

    OutputStream out = null;
    out = new FileOutputStream(dest);

    // Transfer bytes from in to out
    byte[] buf = new byte[1024];
    int len;

    while ((len = in.read(buf)) > 0) {
        out.write(buf, 0, len);
    }

    in.close();
    out.close();

} catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} 
```

# c# - 在字符串列表中查找与输入字符串最接近的匹配项

> ID：13793560
> 
> 赞同：24
> 
> 时间：2012-12-10T00:50:12.910
> 
> 标签：c#, .net, vb.net, visual-studio-2012

我在为 .net 找到最接近匹配字符串的实现时遇到问题

我想匹配一个字符串列表，例如：

输入字符串：“Publiczna Szkoła Podstawowa im.Bolesława Chrobrego w Wąsoszu”

字符串列表：

Publiczna Szkoła Podstawowa im. B. Chrobrego wąsoszu

Szkoła Podstawowa Specjalna

Szkoła Podstawowa im.Henryka Sienkiewicza wąsoszu

Szkoła Podstawowa 我。Romualda Traugutta wąsoszu Górnym

这显然需要与“Publiczna Szkoła Podstawowa im. B. Chrobrego w Wąsoszu”相匹配。

.net 有哪些可用的算法？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-12-10T00:56:55.077

[编辑距离](http://en.wikipedia.org/wiki/Levenstein_distance)

> 编辑距离是一种通过计算将一个字符串转换为另一个字符串所需的最小操作次数来量化两个字符串（例如，单词）之间的不同程度的方法。

[莱文斯坦距离](http://en.wikipedia.org/wiki/Levenshtein_distance)

> 通俗地说，两个单词之间的 Levenshtein 距离是将一个单词更改为另一个单词所需的最小单字符编辑次数（即插入、删除或替换）。

[快速、高效的 Levenshtein 算法](http://www.codeproject.com/Articles/13525/Fast-memory-efficient-Levenshtein-algorithm)

[C# Levenshtein](http://www.dotnetperls.com/levenshtein)

```
using System;

/// <summary>
/// Contains approximate string matching
/// </summary>
static class LevenshteinDistance
{
    /// <summary>
    /// Compute the distance between two strings.
    /// </summary>
    public static int Compute(string s, string t)
    {
    int n = s.Length;
    int m = t.Length;
    int[,] d = new int[n + 1, m + 1];

    // Step 1
    if (n == 0)
    {
        return m;
    }

    if (m == 0)
    {
        return n;
    }

    // Step 2
    for (int i = 0; i <= n; d[i, 0] = i++)
    {
    }

    for (int j = 0; j <= m; d[0, j] = j++)
    {
    }

    // Step 3
    for (int i = 1; i <= n; i++)
    {
        //Step 4
        for (int j = 1; j <= m; j++)
        {
        // Step 5
        int cost = (t[j - 1] == s[i - 1]) ? 0 : 1;

        // Step 6
        d[i, j] = Math.Min(
            Math.Min(d[i - 1, j] + 1, d[i, j - 1] + 1),
            d[i - 1, j - 1] + cost);
        }
    }
    // Step 7
    return d[n, m];
    }
}

class Program
{
    static void Main()
    {
    Console.WriteLine(LevenshteinDistance.Compute("aunt", "ant"));
    Console.WriteLine(LevenshteinDistance.Compute("Sam", "Samantha"));
    Console.WriteLine(LevenshteinDistance.Compute("flomax", "volmax"));
    }
} 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-12-10T01:00:24.617

.NET 不提供任何开箱即用的东西——您需要自己实现一个[*编辑距离*](http://en.wikipedia.org/wiki/Edit_distance)算法。例如，您可以使用[*Levenshtein Distance*](http://en.wikipedia.org/wiki/Levenshtein_distance)，如下所示：

```
// This code is an implementation of the pseudocode from the Wikipedia,
// showing a naive implementation.
// You should research an algorithm with better space complexity.
public static int LevenshteinDistance(string s, string t) {
    int n = s.Length;
    int m = t.Length;
    int[,] d = new int[n + 1, m + 1];
    if (n == 0) {
        return m;
    }
    if (m == 0) {
        return n;
    }
    for (int i = 0; i <= n; d[i, 0] = i++)
        ;
    for (int j = 0; j <= m; d[0, j] = j++)
       ;
    for (int i = 1; i <= n; i++) {
        for (int j = 1; j <= m; j++) {
            int cost = (t[j - 1] == s[i - 1]) ? 0 : 1;
            d[i, j] = Math.Min(
                Math.Min(d[i - 1, j] + 1, d[i, j - 1] + 1),
                d[i - 1, j - 1] + cost);
        }
    }
    return d[n, m];
} 
```

调用`LevenshteinDistance(targetString, possible[i])`each ，然后选择返回最小值`i`的字符串。`possible[i]``LevenshteinDistance`

# jquery - 删除列中具有 html5 数据属性的表行

> ID：13793561
> 
> 赞同：0
> 
> 时间：2012-12-10T00:50:16.980
> 
> 标签：jquery

我在表格的每一行都有一个按钮。该按钮使用 html5 数据属性。该属性来自服务器。

```
<table>
<tr>
<td>...</td>
<td><button class="deletebutton" data-delete="<?php echo $result_cameras[$i]["camera_hash"]; ?>">Delete Camera</button></td>
</tr>
...
</table> 
```

我尝试在 jquery 中使用该属性处理它：

```
jQuery(document).on("click", ".deletebutton", function() {
    var camerahash = jQuery(this).data("delete");
    jQuery.ajax({
       url: "index.php?option=com_cameras&task=deletecamera&camera_hash="+ camerahash +"&format=raw",
       success: function(){
            jQuery("selector here to identify tr of table using camerahash").remove();
        }
    });
}); 
```

由于我已经将`camerahash`（数据属性）用于其他事情，因此即使它是列的一部分，也可以使用它来识别表行。但我不确定在这里使用什么选择器来识别对应列的表行？

不一定要这样，但我认为这会很干净。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T00:52:23.517

您可以`this`在变量 ( `$this`) 中存储对的引用，然后`closest()`在回调中使用它来查找它属于哪个表行。

```
jQuery(document).on("click", ".deletebutton", function() {
    var camerahash = jQuery(this).data("delete");
    var $this = $(this);
    jQuery.ajax({
       url: "index.php?option=com_cameras&task=deletecamera&camera_hash="+ camerahash +"&format=raw",
       success: function(){
            $this.closest('tr').remove();
        }
    });
}); 
```

# php - 如何为无效的电子邮件地址编写基本检查

> ID：13793564
> 
> 赞同：0
> 
> 时间：2012-12-10T00:50:43.633
> 
> 标签：php

> **可能重复：**
> [如何在 PHP 中验证电子邮件地址](https://stackoverflow.com/questions/12026842/how-to-validate-an-email-address-in-php)

下面我有一段代码用于检查有效的电子邮件地址：

```
if ( (strlen($getemail) >= 7) && (strstr($getemail, "@")) && (strstr($getemail, ".")) ){ 
```

但我的问题是，与上面的代码相反的是什么，以便我可以检查输入的电子邮件是否不包含上述所有功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T00:57:59.680

PHP 已经有一个函数可以为你做这件事。它称为[filter_var](http://php.net/filter-var)，您正在寻找[的](http://php.net/filter.filters.validate)是`FILTER_VALIDATE_EMAIL`.

**例子：**

```
if (filter_var($email, FILTER_VALIDATE_EMAIL)) {
    // It's a valid email address
} else {
    // It's not a valid email address
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T01:27:41.887

在我看来，你想做的事情可以通过 RegEx 来实现。

```
var_dump(preg_match('#^(\w+){7,}@(\w+)\.([a-z]){2,4}$#i', 'example@example.com')); # 1 (true)
var_dump(preg_match('#^(\w+){7,}@(\w+)\.([a-z]){2,4}$#i', 'foo@example.com')); # 0 (false) 
```

如果不满足其中一个条件（确保地址是字母数字，最少 7 个字符，后跟 @ 等），则整个表达式将导致错误值。

例子：

```
if(preg_match('#^(\w+){7,}@(\w+)\.([a-z]){2,4}$#i', $email))
{
// do stuff
} 
```

**不要那样验证电子邮件**，使用内置`filter_var`功能。没有真正的方法来验证电子邮件是否“真实”，主要问题是域，即 TLD。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T00:53:11.937

```
if (!( (strlen($getemail) >= 7) && (strstr($getemail, "@")) && (strstr($getemail, ".")) )){ 
```

# c# - 当模型中的集合更改时，WPF 组合框不会更新

> ID：13793566
> 
> 赞同：1
> 
> 时间：2012-12-10T00:51:17.800
> 
> 标签：c#, wpf, combobox

当`Combobox`集合在`Model`.

我`ICollectionView`同时使用 DataGrid 和 ComboBox。当模型中的集合发生更改时，DataGrid 正在更新，但***ComboBox 没有更新***。如果有其他方法可以做到这一点，请告诉我。

这是代码

模型-> 在模型中我有

```
public ObservableCollection<Product> MyModelProducts 
```

ViewModel-> DataGrid 集合

```
public ICollectionView MyViewModelProducts
{
  get 
  {   
    return CollectionViewSource.GetDefaultView(MyModel.Instance.MyModelProducts);             
  }
} 
```

ViewModel-ComboBox 集合

```
public ICollectionView MyViewModelListOfProducts
{
  get 
  {   
    return CollectionViewSource.GetDefaultView(MyModel.Instance.MyModelProducts.Select(p => p.Category).Distinct().ToList<string>());            
  }
} 
```

查看中的代码-->

```
<ComboBox ItemsSource="{Binding MyViewModelListOfProducts, Mode=OneWay}" /> 
```

将 MyViewModelProducts 绑定到 DataGrid

将 MyViewModelListOfProducts 绑定到 ComboBox。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T00:59:14.420

1.  您必须参考要约中的所选产品进行过滤
2.  中设置`IsSynchronizedWithCurrentItem`为真`DataGrid`。
3.  `MyViewModelListOfProducts`在您希望它更新时提出属性更改。您订阅该`MyViewModelProducts.CurrentChanged`事件并从那里更新它。
4.  您可以在执行该 linq 查询`DistinctCategories`的类中拥有一个左右的属性`Product`（当然，在更改时会收到通知），然后将其绑定`ComboBox`到`MyViewModelProducts`并指向该属性 - 我认为这是首选方式，除非您认为不同的类别在模型层中确实没有用。

# facebook - FQL 按名称过滤用户表

> ID：13793567
> 
> 赞同：1
> 
> 时间：2012-12-10T00:51:19.723
> 
> 标签：facebook, facebook-fql

它在[FQL 用户文档](https://developers.facebook.com/docs/reference/fql/user/)中说有 4 个可索引字段（标有 *）：

*   姓名
*   第三方ID
*   uid
*   用户名

但是当我执行这样的[查询](https://developers.facebook.com/tools/explorer?fql=SELECT%20name%0AFROM%20user%20%0AWHERE%20name%20%3D%20%22Mark%20Zuckerberg%22)时：

```
SELECT uid
FROM user 
WHERE name = "Mark Zuckerberg" 
```

我收到一个错误：

```
{
  "error": {
    "message": "Your statement is not indexable. The WHERE clause must contain 
                an indexable column. Such columns are marked with * in the 
                tables linked from 
                http://developers.facebook.com/docs/reference/fql ", 
    "type": "NoIndexFunctionException", 
    "code": 604
  }
} 
```

我在这里想念什么？这是一个错误吗？如何按名称过滤用户表上的 FQL 查询？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T15:19:21.243

等待 FB 对此错误的回应，但同时有一个解决方法。

可索引的列名在profile表中起作用，可以返回它的id字段，对应user表中的uid列，例如

```
SELECT first_name FROM user WHERE uid IN (SELECT id FROM profile WHERE name="Mark Zuckerberg") 
```

# php - robots.txt 中的 PHP 数组解析站点地图

> ID：13793569
> 
> 赞同：2
> 
> 时间：2012-12-10T00:51:35.583
> 
> 标签：php, arrays, parsing, foreach

我在尝试使用 php 从数组中获取 url 数据时遇到一些问题。

我的代码是，我试图获取 robots.txt 文件中提到的每个站点地图

```
$robots_file = file_get_contents($robotsTXT);
$pattern = "/Sitemap: ([^\r\n]*)/";
$i = preg_match_all($pattern, $robots_file, $match, PREG_SET_ORDER);

print_r($match); 
```

print_r($match); 返回下方

```
Array ( 
    [0] => Array ( [0] => Sitemap: http://www.google.com/culturalinstitute/sitemap.xml 
    [1] => http://www.google.com/culturalinstitute/sitemap.xml ) 
    [1] => Array ( [0] => Sitemap: http://www.google.com/hostednews/sitemap_index.xml 
    [1] => http://www.google.com/hostednews/sitemap_index.xml ) 
    [2] => Array ( [0] => Sitemap: http://www.google.com/sitemaps_webmasters.xml 
    [1] => http://www.google.com/sitemaps_webmasters.xml ) 
    [3] => Array ( [0] => Sitemap: http://www.google.com/ventures/sitemap_ventures.xml 
    [1] => http://www.google.com/ventures/sitemap_ventures.xml ) 
    [4] => Array ( [0] => Sitemap: http://www.gstatic.com/dictionary/static/sitemaps/sitemap_index.xml [1] => http://www.gstatic.com/dictionary/static/sitemaps/sitemap_index.xml ) 
    [5] => Array ( [0] => Sitemap: http://www.gstatic.com/earth/gallery/sitemaps/sitemap.xml 
    [1] => http://www.gstatic.com/earth/gallery/sitemaps/sitemap.xml ) 
    [6] => Array ( [0] => Sitemap: http://www.gstatic.com/s2/sitemaps/profiles-sitemap.xml 
    [1] => http://www.gstatic.com/s2/sitemaps/profiles-sitemap.xml ) 
    [7] => Array ( [0] => Sitemap: http://www.gstatic.com/trends/websites/sitemaps/sitemapindex.xml 
    [1] => http://www.gstatic.com/trends/websites/sitemaps/sitemapindex.xml )
) 
```

我想要做的是像这样显示地址

```
http://www.google.com/culturalinstitute/sitemap.xml
http://www.google.com/hostednews/sitemap_index.xml
http://www.google.com/sitemaps_webmasters.xml 
http://www.google.com/ventures/sitemap_ventures.xml
http://www.gstatic.com/dictionary/static/sitemaps/sitemap_index.xml
http://www.gstatic.com/earth/gallery/sitemaps/sitemap.xml 
http://www.gstatic.com/s2/sitemaps/profiles-sitemap.xml
http://www.gstatic.com/trends/websites/sitemaps/sitemapindex.xml 
```

我尝试为每个循环编写一个，但我无法让它工作。

```
foreach( $match as $sitemap){

echo $sitemap[1];

} 
```

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T01:02:06.073

```
$robots_file = file_get_contents($robotsTXT);

$pattern = '/Sitemap: ([^\s]+)/';
preg_match_all($pattern, $robots_file, $match);

print_r($match[1]);

foreach ($match[1] as $sitemap)
{
    echo $sitemap . "<br />\n";
} 
```

您不需要遍历整个匹配的数组，只需要遍历 $match[1] 的数组。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T00:55:48.960

而不是`echo $sitemap;`尝试`echo $sitemap[1];`

# xcode - 你可以从命令行而不是在 Xcode 中创建 Mac .app 分发吗？

> ID：13793572
> 
> 赞同：4
> 
> 时间：2012-12-10T00:52:00.920
> 
> 标签：xcode, macos, build

是否可以在不使用 Xcode Organizer 的情况下从 .xcarchive 包转到 .app 包？我想创建一个自动构建并获取我可以分发的最终 .app 文件。将 xcodebuild 与存档目标一起使用非常适合获取 .xcarchive 文件，但不适用于最终应用程序。

在 iOS SDK 中，有一个可以与 xcrun 一起使用的 PackageApplication 工具，但在 OS X SDK 中似乎不存在。

我也想这样做，因此我希望可以从分发过程中获得更多诊断信息，现在由于臭名昭著的 100021 操作系统错误代码，这对我来说是失败的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T06:37:58.417

您查看过 .xcarchive 包的内部吗？它只是一个文件夹。您的 .app 目标应位于 Products 子文件夹中。

在 Finder 中，右键单击存档并单击**Show Package Contents**。在终端中，使用`cd`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-31T03:07:39.370

尝试命令中的*-exportArchive*标志`xcodebuild`：

```
xcodebuild -exportArchive -exportFormat app -archivePath <path to .xcarchive> -exportPath "My App.app" -exportSigningIdentity "Developer ID Application: My Software Company" 
```

此命令存在于 Xcode 5.0.1 中。有关可选参数的更多详细信息，请参见手册页。此示例导出一个 Developer ID 签名的应用程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T23:36:17.760

以下是我对这个问题的发现：

*   如前所述，xcodebuild 的归档构建操作非常适合获取 .xcarchive，但似乎没有从命令行执行验证或分发命令的实际方法。我希望这最终证明是错误的。

*   我能够通过删除嵌入式框架目录中的嵌入式符号链接来欺骗验证工具。这可行，但在与 Apple 支持人员讨论后发现这是在欺骗工具，实际上并没有产生有效的结果。

*   Apple 支持人员表示，如果嵌入式框架中的 .plist 文件之一无效，他们会看到此错误代码。事实证明，在我的示例中，我有 3 个嵌入式框架，其中 1 个有一个空的 .plist 文件，可能是我手工构建的项目。修复此问题后，构建将继续愉快地进行。

# backbone.js - 将数据传递到骨干网中的集合

> ID：13793577
> 
> 赞同：0
> 
> 时间：2012-12-10T00:52:25.310
> 
> 标签：backbone.js

所以我在尝试将产品类型添加到集合之前尝试从 json 文件中存储产品类型，但得到了一些奇怪的结果（因为我不完全理解）

在我的路由器页面上，我为缓存的产品和产品类型设置了一个变量

```
cachedProductTypes: null,
productType : {}, 
products : {},  

getProductTypes:
        function(callback)
        {
            if (this.cachedProductTypes !== null) {
                return callback(cachedProductTypes);
            }

            var self = this;

            $.getJSON('data/product.json',
                function(data)
                {
                    self.cachedProductTypes = data;
                    callback(data);
                }
            );
        },

parseResponse : function(data) {

          result = { prodTypes: [], products: [] };

          var type;
          var types = data.data.productTypeList;
          var product;
          var i = types.length;

         while (type = types[--i]) {
            result.prodTypes.push({ 
               id: type.id,
               name: type.name,
               longName: type.longName
               // etc.
            });
            while (product = type.productList.pop()) {
              product.productTypeId = type.id,
              result.products.push(product);
            }   
          };

          this.productType = result.prodTypes;
          console.log( "dan");
          this.products = result.products;      
    },
showProductTypes:function(){
        var self = this;

        this.getProductTypes(
            function(data)
            {
                self.parseResponse(data);

     var productTypesArray = self.productType;
     var productList=new ProductsType(productTypesArray);   
     var productListView=new ProductListView({collection:productList});

     productListView.bind('renderCompleted:ProductsType',self.changePage,self); 
     productListView.update();
    }
        );      
    } 
```

当用户进入显示产品类型页面时，它会运行 showProductsType 函数

所以我将产品类型数组传递给我的集合

在收藏页面

```
 var ProductsType=Backbone.Collection.extend({

      model:ProductType,

      fetch:function(){
        var self=this;
        var tmpItem;
        //fetch the data using ajax

        $.each(this.productTypesArray, function(i,prodType){

            tmpItem=new ProductType({id:prodType.id, name:prodType.name,    longName:prodType.longName});
            console.log(prodType.name);
            self.add(tmpItem);
        });

        self.trigger("fetchCompleted:ProductsType");

      }
}); 
return ProductsType; 
```

现在这不起作用，因为如果我 console.log 它 this.productTypesArray 是未定义的。（我应该怎么得到这个？）

我原以为我需要检查并添加每个新的 ProductType。

奇怪的一点 - 如果我只有代码

```
 var ProductsType=Backbone.Collection.extend({

      model:ProductType,

      fetch:function(){
        var self=this;
        var tmpItem;
        //fetch the data using ajax

        self.trigger("fetchCompleted:ProductsType");

      }
});

return ProductsType; 
```

it actually adds the products to the collection? I guess this means I can just pass an array to the collection and do not have to add each productType?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T01:00:53.920

> I guess this means I can just pass an array to the collection and do not have to add each productType?

Yes, you can pass an array to the [collection's constructor](http://backbonejs.org/#Collection-constructor), and it will create the models for you.

As far as your caching code, it looks like the problem is here:

```
if (this.cachedProductTypes !== null) {
    return callback(cachedProductTypes);
} 
```

The callback statement's argument is missing `this` - should be `return callback(this.cachedProductTypes)`.

# java - java.security.AccessControlException：访问被拒绝（“java.net.SocketPermission”“smtp.gmail.com”“resolve”）

> ID：13793578
> 
> 赞同：4
> 
> 时间：2012-12-10T00:52:26.010
> 
> 标签：java, security, applet, japplet, accesscontrolexception

我正在使用 GlassFish Server 3.1 和 Java 邮件 Api 1.4.5。

场景：我有一个小程序，点击它会发送一封电子邮件。

发送邮件在 Netbeans AppletViewer 上完美运行，但是当添加到浏览器并尝试从那里发送电子邮件时，它变成了地狱。

我已经阅读了几个小时，关于策略文件、签名/未签名的小程序......等等。

我尝试过使用签名的小程序（那里有很多用于签名的教程，使用 java 中的 keytools 非常简单）。当我在浏览器上运行它时，它会请求许可，因为它是自签名证书，我给了它许可，但它仍然吐出相同的异常。

我也尝试过修改 java.poilcy 文件添加

权限 java.net.SocketPermission "smtp.gmail.com:587", "listen,resolve";

但什么都没有。

我知道这是个例外，因为我在 Java 控制面板中激活了 Java 控制台。我真的不知道还能做什么。

这是发送电子邮件的代码：

```
 String host = "smtp.gmail.com";
    String from = *****;
    String pass = ******;
    Properties props = new Properties();
    props.put("mail.smtp.starttls.enable", "true");
    props.put("mail.smtp.host", host);
    props.put("mail.smtp.user", from);
    props.put("mail.smtp.password", pass);
    props.put("mail.smtp.port", "587");
    props.put("mail.smtp.auth", "true");

    Session session = Session.getDefaultInstance(props, null);
    this.message = new MimeMessage(session);
    message.setFrom(new InternetAddress(from));

    InternetAddress toAddress = new InternetAddress(this.to);
    this.message.addRecipient(Message.RecipientType.TO, toAddress);

    this.message.setSubject(this.subject);

    this.message.setText(this.body);

    Transport transport = session.getTransport("smtp");
    transport.connect(host, from, pass);
    transport.sendMessage(this.message, this.message.getAllRecipients());
    transport.close(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T11:43:46.123

JApplet 独立于一个“沙盒”中，被授予与常规应用程序不同的权限（应用程序仅在用户直接选择执行时才执行，因此，用户接受后果）。JApplet 在浏览器下载它时执行，给用户任何选择，这就是为什么如果你想让你的小程序由其他人部署和执行（当小程序访问服务器而不是它被部署的服务器时）它必须被签名（自签名证书或由授权组织签名的证书，这通常意味着支付一些费用），以便用户可以“接受”使用所述 Applet 的后果，使其“脱离沙箱”。

出于某种原因，使用 keytolls 和 jarsigner 使用自我证书对其进行签名对我没有任何作用。即使当我访问该网页并且浏览器警告我执行小程序（让我选择不执行它）并且我接受了上述警告时，JApplet 似乎没有获得它的权限。

我的男朋友建议将电子邮件课程移出“沙箱”。**他解决了这个问题**（祝福他！），将 emailClass（使用 java 邮件 api 的那个）移动到服务器上没有任何问题。使用客户端-服务器架构的前端控制器命令，我所要做的就是使用我在问题开头发布的代码实现我的控制器类，并从我的小程序（单击按钮时）发送一个 http-request与我的 servlet 的 toEmailAddress、主题和正文。

完美运行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T09:00:19.483

您必须对小程序进行签名，以便它可以连接到加载它的主机以外的主机，并且您必须使用非自签名证书，或者用户必须在出现提示时接受证书。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T01:03:56.990

有几件事要看：

1) 仔细检查并确保您的小程序签名正确：

*   [http://www-personal.umich.edu/~lsiden/tutorials/signed-applet/signed-applet.html](http://www-personal.umich.edu/~lsiden/tutorials/signed-applet/signed-applet.html)

2）查看crossdomain.xml：

*   [访问被拒绝（java.net.SocketPermission 127.0.0.1:8080 连接，解决）](https://stackoverflow.com/questions/4135138/access-denied-java-net-socketpermission-127-0-0-18080-connect-resolve)

3）查看applet.policy

*   [为什么我的小程序会出现 java.security.AccessControlException: access denied (java.net.SocketPermission ...)，我该如何避免呢？](https://stackoverflow.com/questions/4169717/why-does-my-applet-get-a-java-security-accesscontrolexception-access-denied-ja)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-31T14:53:59.500

用带有签名的 JNLP 分发你的程序，很容易解决这种情况。

查看有关 IDE 的 JNLP 的教程并阅读此内容以获取更多信息： [http ://docs.oracle.com/javase/6/docs/technotes/guides/jweb/deployment_advice.html](http://docs.oracle.com/javase/6/docs/technotes/guides/jweb/deployment_advice.html)

# c++ - 如何在带参数的函数上使用 boost::call_once()

> ID：13793579
> 
> 赞同：2
> 
> 时间：2012-12-10T00:52:27.880
> 
> 标签：c++, multithreading, boost

我想使用 boost::call_once() 来实现线程安全的惰性构造单例方案，但是，基单例类有许多派生类，因此 getInstance() 函数需要一个参数来确定要初始化哪个派生类。代码看起来像，

```
Singleton * Singleton::getInstance(Input * a) {
if (!instance) {
    instance = buildme(a);  //buildme() will return a derived class type based on input a.
    }
return instance;
} 
```

我想使用`boost::call_once()`，但看起来它只能用于没有参数的函数`void (*func)()`。如果有人知道这里的替代解决方案，请提供帮助。

谢谢。

编辑：：

另一个问题，如何使用 调用非静态成员函数`call_once`？我有这个类的一个非静态`init()`成员函数，但我找不到正确的语法来使用`boost::call_once()`. 或者我应该将`init()`其中使用的所有内容制作成静态的？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-11T16:37:50.250

C++11 包含 call_once 的实现（受等效的 Boost.Threads 工具的启发）。它使用可变参数模板和完美转发来获取任意数量的参数。

```
#include <mutex>
#include <string>

void only_called_once(int i, std::string const & str) {
  // We only get here once.                                                                                                                                                         
}

void call_free() {
  static std::once_flag once;
  std::call_once(once, only_called_once, 42, "The answer");
} 
```

您可以在可调用对象之后传递任意数量的参数，它们都将被完美转发（包括 r-value/l-value、const、volatile 等）。

这也适用于成员函数。您只需将指向对象的指针（可转换为成员函数所属的类型）作为可调用对象之后的第一个参数。

```
struct bar {
public:
  void only_call_once(int i, std::string const & str);
};

void call_member() {
  static std::once_flag once;
  bar instance;
  std::call_once(once, &bar::only_call_once, &instance, 42, "The answer");
} 
```

如果您坚持使用 Boost，那么您可以使用`boost::bind`与另一个答案中已经解释的相同目的。通过传递成员函数指针和实例作为以下参数，成员函数的`boost::bind`工作方式与上述相同。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-10T00:59:26.067

您可以使用 将其他函数参数绑定到仿函数对象`boost::bind`。像这样：

```
Input* input = ???;
boost::call_once(flag, boost::bind(&Singleton::getInstance, input)); 
```

您也可以使用`boost::bind`调用非静态成员函数，方法是将要调用函数的类的实例传递给`boost::bind`.

```
class Foo
{
public:
   void func(int) { /* do something */}
};

Foo f;
boost::call_once(flag, boost::bind(&foo::func, &f, 10)); 
```

使用 C++11，您可以使用`std::bind`，这是另一个示例。`boost::bind`非常相似。

```
#include <utility>
#include <functional>
#include <iostream>
#include <string>

void f(int x)
{
   std::cout << "f(" << x << ")\n";
}

void g(int x, const std::string& y)
{
   std::cout << "g(" << x << ", " << y << ")\n";
}

int main()
{
   auto ten = std::bind(&f, 10);
   auto example = std::bind(&g, 20, "Twenty");

   ten();
   example();

   return 0;
} 
```

# sql-server - 可能来自子查询的大型数据集？

> ID：13793580
> 
> 赞同：1
> 
> 时间：2012-12-10T00:52:38.183
> 
> 标签：sql-server, subquery

由于其复杂性，我无法向您展示我的确切问题和查询，但我会将问题简化为另一个类似的问题。

开始：

有 5 个表格，包含有关苹果、汽车、书籍、电脑和衣服的信息。上面的每个表都可以有评论，所有评论都存储在一个名为`Comments`（带有一`user_id`列）的表中。为了将这 5 个表与他们自己的注释链接起来，我必须创建 5 个其他链接表名称`AppleComments`、、、`CarComments`等等`BookComments`。

我的查询想要从这 5 个类别类型中检索我的所有评论。

我可以想到两种方法，一种比另一种更快。

1.  我可以将 5 个表与其链接表连接起来，然后使用注释`where comments.user_id = me`将所有结果合并到 1 个结果集中：

    ```
    SELECT <column_names> FROM AppleComments
    INNER JOIN Comments ON AppleComments.comment_id = Comments.comment_id
    WHERE Comments.user_id = me

    UNION ALL

    SELECT <column_names> FROM CarComments
    INNER JOIN Comments ON CarComments.comment_id = Comments.comment_id
    WHERE Comments.user_id = me
    etc... 
    ```

2.  我可以使用 union all 从链接表中选择所有评论 id-s，然后将此子查询与`Comments`表进行内部连接以获取有关它们的其他信息。

    ```
    SELECT <column_names> 
    FROM (
       Select AppleComments.comment_id FROM AppleComments
       UNION ALL
       Select CarComments.comment_id FROM CarComments
       UNION ALL
       Select BookComments.comment_id FROM BookComments
       UNION ALL
       Select ComputerComments.comment_id FROM ComputerComments
       UNION ALL
       Select ClothesComments.comment_id FROM ClothesComments) AS items
    INNER JOIN Comments ON items.comment_id = Comments.comment_id
    WHERE Comments.user_id = me 
    ```

第二个速度更快，生成的执行计划更小。

问题是，因为来自 ex 的子查询“项目”。2 实际上从数据库中选择所有评论，然后与评论表进行内部连接，我担心在处理太多行时它会表现不佳。可能是内存太大了？

现在我无法判断，因为 90% 的评论都是我的，但从每个示例的角度来看，我会说第一个是检索较少数据量（总计）的评论。

如果数据库中有 100 万条评论而我的只有 100 条评论怎么办……

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T01:01:37.513

你的直觉是正确的。`UNION ALL`将几乎消除未来优化的机会。在加入工会之前尽你所能；第一种方法是正确的。

除了它在乞求为什么你在五个不同的表中有相似的东西，为什么你甚至在看起来是一对n的关系中有链接表的问题？带有`itemtype`字段的单个表是否不够？如果你有额外的数据，那么有可选的外部链接到额外的数据表，这就是我要做的......

当然，这是一个虚构的宇宙，我不知道你原来的问题:)

# c1-cms - Composite C1 4.0 Beta 和 MVC 播放器输出第二个 html 和 body 标签

> ID：13793582
> 
> 赞同：1
> 
> 时间：2012-12-10T00:52:45.797
> 
> 标签：c1-cms

我已经设置并安装了 Composite C1 4.0 beta，以及最新的 MVC Player 版本（从 2012 年 12 月 7 日开始），但是每当我调用 MVCPlayer 函数时，它都会在页面上输出额外的标签。例如，我正在为面包屑调用 MVCPlayer 函数。这是输出：

```
..... before breadcrum content .....
<a name="site-nav" class="screen-reader"></a>
<html xmlns="http://www.w3.org/1999/xhtml">
    <head />
    <body>
        <html>
            <head />
            <body>
<!-- START BREADCRUM SECTION -->
                <ul id="breadcrumbs">
                    <li><a href="/">Homep</a></li>
                    <li>Events</li>
                </ul>
<!-- END BREADCRUM SECTION -->
            </body>
        </html>
    </body>
</html>
<div class="clear"></div>
</div>
..... rest of page ..... 
```

如您所见，它位于页面中间。MVCPlayer 在渲染函数中返回一个 XDocument。那么，如何去掉 START & END BREADCRUM SECTION 评论之前的额外标签？页面呈现良好，但这影响了我使用页面过滤器向输出添加其他内容的能力，例如切换图像标记 src，以便我可以使用 jquery 脚本执行延迟加载图像（参见[http:// /www.appelsiini.net/projects/lazyload](http://www.appelsiini.net/projects/lazyload)）。

有什么想法吗？

谢谢！

乍得

* * *

实际面包屑页面的输出很简单`<ul><li>...</li></ul>`，并且日志文件中没有错误。MVC Player 实际上添加了附加代码：

```
<html xmlns="http://www.w3.org/1999/xhtml">
    <head />
    <body>
    </body>
</html> 
```

在 Player.cs 文件中，代码如下：

```
var sbHtml = new StringBuilder();
            sbHtml
                .Append(@"<html xmlns=""http://www.w3.org/1999/xhtml""> 
            <head/>
            <body>")
                .Append(responseWriter.ToString())
                .Append(@"
            </body>
            </html>");

            try
            {
                return XDocument.Parse(sbHtml.ToString());
            } 
```

我能够修改 /Renderers/Page.aspx.cs 并将这一行更改为“剥离”额外的标签：

原来的：

```
xhtml = _renderingContext.FormatXhtml(xhtml); 
```

更新：

```
xhtml = _renderingContext.FormatXhtml(xhtml.Replace(@"<html xmlns=""http://www.w3.org/1999/xhtml"">", "").Replace("<html>", "").Replace("<head />", "").Replace("<head></head>", "").Replace("<body>", "").Replace("</body>", "").Replace("</html>", "")); 
```

我确定有比这更好的解决方案吗？:)

乍得

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T09:02:50.907

可能是页面上的其他地方有标记，导致整个结果文档和无效的 XHTML，因此系统无法正确处理它。

尝试

a) 检查日志文件以查看是否有任何相关警告

b) 验证输出 xhtml [http://www.xmlvalidation.com/](http://www.xmlvalidation.com/)

# c# - 使用 Enumerable.Zip 或按位与逻辑查找所有子集

> ID：13793583
> 
> 赞同：1
> 
> 时间：2012-12-10T00:53:00.173
> 
> 标签：c#, algorithm, linq, bit-manipulation, subset

我想找到整数数组的所有子集，所以我的第一个想法是使用大小为 n 位的数字的二进制表示，其中 1 包括，0 不包括。

例如：

```
int[] arr = { 3, 4, 5 }; 
```

通过数字 0 到 7 给我：

```
0,0,0
0,0,1
0,1,0
0,1,1
1,0,0
...etc 
```

这映射到：

```
empty
5
4
4,5
3
...etc 
```

为了进行映射，我使用了 Enumerable.Zip。代码是：

```
public static IEnumerable<byte> ToBinary(this int value, int size)
{
    return ToBinaryStream(value, size).Reverse();
}

private static IEnumerable<byte> ToBinaryStream(int value, int size)
{
    if (value < 0)
        yield break;
    do
    {
        yield return (byte)(value & 1);
        --size;
    }
    while ((value = value >> 1) > 0 || size > 0);
}

int?[] arr = { 1,2,3,4 };

List<int[]> subsets = new List<int[]>();

for (int i = 0; i < (int)Math.Pow(2, (arr.Length)); i++)
{
    var subset = i.ToBinary(arr.Length).Zip(arr, (value, array) => value == 1 ? array : null)
        .Where(a => a != null).Cast<int>().ToArray();
    subsets.Add(subset);
} 
```

似乎工作得很好。问题是如何使用按位与逻辑来做同样的事情？

我想将 1000 映射到数组中的第一个元素，将 1001 映射到第一个和最后一个等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T02:13:35.800

要检查一个`x`带有索引的元素`i`是否应该包含在一个数字中`num`：

1.  将 1 左移`i`
2.  按位与结果`num`
3.  如果结果大于 0，则包括`x`

这是代码：

```
int[] arr = { 1,2,3,4 };

List<int[]> subsets = Enumerable
              .Range(0, (int)Math.Pow(2, (arr.Length)))
              .Select(num => arr.Where((x, i) => ((1 << i) & num) > 0).ToArray())
              .ToList(); 
```

它将最低位`num`视为数组中的第一个元素，以避免反转。顺便说一句有趣的想法:)

# iphone - 无法验证 Xcode 中的托管内容包

> ID：13793584
> 
> 赞同：1
> 
> 时间：2012-12-10T00:53:01.193
> 
> 标签：iphone, objective-c, ios, in-app-purchase, app-store-connect

我想为我的应用程序启用应用内购买。我使用的是非消耗品购买类型，并且选择了托管内容。我按照[什么是 Application Loader 中的托管内容包中的说明进行操作？](https://stackoverflow.com/questions/12598429/what-is-hosted-content-package-in-the-application-loader/13793299#13793299)为 IAP 创建 .pkg 文件：文件 -> 新建 -> 项目... -> 其他 (iOS) -> 应用内购买内容 -> 将内容复制到项目然后，产品 -> 存档。当我单击“验证...”按钮并输入我的凭据时，我收到一个奇怪的错误“由于一般错误，此时无法处理 lookupSoftwareApplicationsWithHostedContent 请求”，我所能做的就是单击“确定”。它不会进入显示应用程序和应用程序内购买内容的下拉菜单的屏幕，如[http://www.techotopia.com/index.php/Configuring_and_Creating_App_Store_Hosted_Content_for_iOS_6_In-App_Purchases](http://www.techotopia.com/index.php/Configuring_and_Creating_App_Store_Hosted_Content_for_iOS_6_In-App_Purchases)。我做了一些帖子建议的操作，例如重新启动 Mac 和/或 Xcode，但这并没有帮助。我想知道 iTunes Connect 上是否有任何特定设置导致了这个奇怪的错误。

# ios - 滚动视图+分段按钮+iOS

> ID：13793593
> 
> 赞同：0
> 
> 时间：2012-12-10T00:54:48.680
> 
> 标签：ios, button, uiscrollview, scrollview, uisegmentedcontrol

我有 2 个滚动视图。我在第一个滚动视图上放了很多按钮。当我在第一个滚动视图中单击一个按钮时，相关按钮会填充第二个滚动视图。

我希望第一个滚动视图中的按钮具有段控制的效果。即，当单击一个按钮时，其图像会变暗，并且在单击第一个滚动视图中的其他按钮之前无法再次单击。

如何做到这一点？任何示例代码表示赞赏！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T05:11:51.313

您不能只跟踪上次单击的按钮，然后将该按钮重置为活动状态，然后将您现在单击的按钮设置为非活动状态吗？只需创建一个属性 lastClicked，然后执行以下操作：

```
-(IBAction) buttonClicked:(UIButton *)sender {
    [self.lastClicked setUserInteractionEnabled:YES];
    [self.lastClicked setImage:[UIImage imageNamed:@"enabledImage"] forState:UIControlStateNormal];
    [sender setUserInteractionEnabled:NO];
    [sender setImage:[UIImage imageNamed:@"disabledImage"] forState:UIControlStateNormal];
    self.lastClicked = sender;      
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-16T09:26:14.290

尝试在滚动视图中添加分段控件。

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    journals = [[NSMutableArray alloc]init];

    self.tableView.dataSource = self;
    self.tableView.delegate = self;

    UIScrollView *scrollView = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 49, 320, 29)];
    self.segmentedControl.frame = CGRectMake(0, 0, 640, 29);

    scrollView.contentSize = CGSizeMake(self.segmentedControl.frame.size.width, self.segmentedControl.frame.size.height -1);
    scrollView.showsHorizontalScrollIndicator = NO;

    self.segmentedControl.selectedSegmentIndex = 0;

    [scrollView addSubview:self.segmentedControl];
    [self.view addSubview:scrollView];

    [self fillJournals];

    // Do any additional setup after loading the view, typically from a nib.
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T01:01:57.713

超级简单，非常难看，但它确实有效。您可以通过检查图像和按钮的交互状态来进一步优化它，因此您不会在每次循环时都设置图像。

```
-(void) buttonClicked:(UIButton *)sender {
    for (UIButton *btn in self.scrollView.subviews) {
        if ([sender isKindOfClass:[UIButton class]]) {

            if (btn == sender) {
                [btn setUserInteractionEnabled:NO];
                [btn setImage:[UIImage imageNamed:@"disabledImage"] forState:UIControlStateNormal];
            } else {
                [btn setUserInteractionEnabled:YES];
                [btn setImage:[UIImage imageNamed:@"enabledImage"] forState:UIControlStateNormal];
            }
        }

    }
} 
```

# ios - 创建 NSManagedObject 的副本

> ID：13793603
> 
> 赞同：3
> 
> 时间：2012-12-10T00:57:25.907
> 
> 标签：ios, core-data, nsdictionary, nsmanagedobject

我需要将 a 的内容临时存储`NSManagedObject`到字典中。因为核心数据有自己的内存管理程序，我不想保留任何指向`NSManagedObject`'s 字段的强指针，此时只有值是感兴趣的（值在视图控制器之间传递，MOC 不同）。我也不能创建弱指针，因为我想控制内存回收何时完成。

我尝试了几件事，都失败了或不符合目的。

1.  重复`[[myNSMO alloc] initWithEntity:[NSEntityDescription entityForName:entity inManagedObjectContext:myNSMO.managedObjectContext] insertIntoManagedObjectContext:nil];` 它正在工作，但不适合我的应用程序设计（无需详细说明）

2.  `NSDictionary`从 中生成 a `NSManagedObject`，使用`[myNSMO dictionaryWithValuesForKeys:<#(NSArray *)#>]`。这不好，因为它返回一个包含 NSManagedObject 字段地址的字典。

3.  使用copyWithZone创建一个`NSDictionary`填充每个键值，像这样 `[myDictionary setObject:[myNSMO.field copyWithZone:nil] forKey:@"Key"];` 也不起作用，我仍然得到字段地址......

4.  手动输入每个字段， `[myDictionary setObject:[NSString stringWithFormat:@"%@",myNSMO.field ] forKey:@"Key"];` 这次很好，我确实获得了新的内存分配。但是手动编写代码非常耗时......

有人找到聪明的方法来做到这一点的机会吗？选项 1) 不起作用的原因是因为我将字典用作队列。我首先存储对象的副本，然后在需要时弹出条目。然后将该特定字典条目的副本返回到询问方法。问题是我无法创建`NSManagedObject`使用创建的副本`[[...] insertIntoManagedObjectContext:nil];`

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-10T04:20:29.273

在大多数意义上，保持指向托管对象字段的强指针是安全的——关系是特殊的，但日期、字符串和数字的实际 Foundation 对象是普通对象，如果您有强引用，它们将保留在内存中。

话虽如此，要创建包含实体所有属性的字典副本，您可以执行以下操作：

```
NSArray *properties = [[object entity] properties];
NSMutableDictionary *dictionaryRepresentation = [NSMutableDictionary dictionary];
for(NSAttributeDescription *attribute in properties)
{
    // we want only actual attributes, not relationships
    // or fetched properties
    if([attribute isKindOfClass:[NSAttributeDescription class]])
    {
        [dictionaryRepresentation
                 setObject:[object valueForKey:attribute.name]
                 forKey:attribute.name];
    }
} 
```

因此，您正在使用托管对象公开其实体描述的事实，其中包括属性列表，将这些属性缩减为仅属性，然后使用键值编码来获取每个属性的当前值并最终插入它进字典。

如果出于某种原因你确实想要属性的副本——尽管，正如我所说，绝对没有理由这样做——你会`copy`（`autorelease`如果你不使用 ARC）将每个属性插入到字典中。

# sql - 开发应用程序以在 sql azure 数据库和 sql server 数据库之间进行同步

> ID：13793605
> 
> 赞同：-1
> 
> 时间：2012-12-10T00:58:24.217
> 
> 标签：sql, azure-sql-database, microsoft-sync-framework

我计划开发 .net 应用程序以在 sql azure 数据库和 sql 本地数据库之间同步数据，并计划使用同步框架。在azure db和sql db之间开发应用和同步数据很容易，但需要保持开放的tcp端口1433。SQl azure 同步服务无需继续打开此端口即可工作。我需要开发自己的应用程序以用作 sql azure 同步服务。有没有其他方法可以做到这一点。非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T05:29:48.423

看看这个演练，你基本上把一个服务放在云中与 SQL Azure 对话，并让你的同步应用程序与服务对话，而不是直接连接到 SQL Azure。

Azure 数据同步服务的结构非常相似。

请参阅：[Windows Azure 同步服务示例演练](http://social.technet.microsoft.com/wiki/contents/articles/1568.walkthrough-of-windows-azure-sync-service-sample.aspx)

# php - Symfony 2 - onSecurityAuthenticationSuccess 处理程序在每次页面加载时被调用

> ID：13793606
> 
> 赞同：0
> 
> 时间：2012-12-10T00:58:25.643
> 
> 标签：php, symfony, symfony-2.2

我创建了一个`security.authentication.success`事件监听器，它应该在登录成功时向日志发送一行。现在每次加载防火墙后的页面时，我都会在日志中收到成功登录消息。如果我尝试使用

```
if ($this->container->get('security.context')->isGranted('IS_AUTHENTICATED_FULLY'))
{
    $logger->info('Successful login by ' . $username);
} 
```

我陷入了递归的疯狂（xdebug 在 10000 次嵌套调用后抱怨，或者我设置的任何高）。

有没有办法检查用户是否刚刚登录，或者他是否正在使用活动会话？

注意：我使用的是 Symfony 2.2 (dev-master)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T23:52:27.487

您必须使用[security.interactive_login](http://www.metod.si/login-event-listener-in-symfony2/)：

```
namespace Acme\UserBundle\Listener;

use Symfony\Component\EventDispatcher\Event;
use Symfony\Component\Security\Core\SecurityContext;
use Doctrine\Bundle\DoctrineBundle\Registry as Doctrine; // for Symfony 2.1.x
// use Symfony\Bundle\DoctrineBundle\Registry as Doctrine; // for Symfony 2.0.x

/**
 * Custom login listener.
 */
class LoginListener
{
    /** @var \Symfony\Component\Security\Core\SecurityContext */
    private $securityContext;

    /** @var \Doctrine\ORM\EntityManager */
    private $em;

    /**
     * Constructor
     * 
     * @param SecurityContext $securityContext
     * @param Doctrine        $doctrine
     */
    public function __construct(SecurityContext $securityContext, Doctrine $doctrine)
    {
        $this->securityContext = $securityContext;
        $this->em              = $doctrine->getEntityManager();
    }

    /**
     * Do the magic.
     * 
     * @param  Event $event
     */
    public function onSecurityInteractiveLogin(Event $event)
    {
        if ($this->securityContext->isGranted('IS_AUTHENTICATED_FULLY')) {
            // user has just logged in
        }

        if ($this->securityContext->isGranted('IS_AUTHENTICATED_REMEMBERED')) {
            // user has logged in using remember_me cookie
        }

        // do some other magic here
        $user = $this->securityContext->getToken()->getUser();

        // ...
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-26T18:21:03.473

从文档中：

> security.interactive_login 事件在用户主动登录您的网站后触发。将此操作与非交互式身份验证方法区分开来很重要，例如：
> 
> *   基于“记住我”cookie 的身份验证。
> *   基于您的会话的身份验证。
> *   使用 HTTP 基本或 HTTP 摘要标头进行身份验证。
> 
> 例如，您可以监听 security.interactive_login 事件，以便在您的用户每次登录时给他们一条欢迎消息。
> 
> 每次激活 switch_user 防火墙监听器时都会触发 security.switch_user 事件。

[http://symfony.com/doc/current/components/security/authentication.html#security-events](http://symfony.com/doc/current/components/security/authentication.html#security-events)

# ruby-on-rails - form_for 与来自其他模型的 ckeckbox_tag

> ID：13793607
> 
> 赞同：1
> 
> 时间：2012-12-10T00:58:46.487
> 
> 标签：ruby-on-rails

我是 Rails 新手，无法解决这个问题。

我有 3 个模型。订单、产品和 LineItems。我想要一个带有每个产品复选框的订单。用户选择合适的产品并提交订单。

我无法获得创建正确哈希的表单。

```
class Order < ActiveRecord::Base
  attr_accessible :account_id, :user_id

  has_many :line_items, :dependent => :destroy
end

class LineItem < ActiveRecord::Base
  attr_accessible :account_id, :product_id, :order_id

  belongs_to :orders
  belongs_to :product
end 
```

这里的观点：

```
<%= form_for 'line_items[]' do |f|  %>
   <%= f.select :account_id, options_from_collection_for_select( Account.all, 
       :id, :name ), :prompt => 'Select Account' %>

<% Product.all.each do |product| %>
<div>
       <%= check_box_tag 'line_items[product_ids][]', product.id %>
</div>
<% end -%>

    <div>       
    <%= f.submit 'save' %>
</div> 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T06:25:43.703

您需要`accepts_nested_attributes_for`在模型中使用以启用关联模型的嵌套属性。您可能还想查看此[railscast](http://railscasts.com/episodes/196-nested-model-form-revised?view=asciicast)并适应您的需求。

例如在订单模型中：

```
class Order < ActiveRecord::Base
  attr_accessible :account_id, :user_id

  has_many :products #This makes the association to products
  has_many :line_items, :dependent => :destroy

  accepts_nested_attributes_for :products #This allows the attributes from products accessible
end 
```

那么形式可以是：

```
<%= form_for @order do |f| %>

  <%= f.select :account_id, options_from_collection_for_select( Account.all, 
       :id, :name ), :prompt => 'Select Account' %>

  <%= f.fields_for :product do |product_form| %>
    <%= product_form.check_box :id  %>
  <% end %>

  <%= f.submit %>
<% end %> 
```

# assembly - NASM 与 GAS（实际差异）

> ID：13793609
> 
> 赞同：49
> 
> 时间：2012-12-10T00:59:00.107
> 
> 标签：assembly, x86, nasm, gnu-assembler, att

我并不是要引发英特尔与 AT&T 的战争（无论如何，现在它们都支持英特尔语法，这是有争议的）或者问哪个本身“更好”，我只是想知道选择一个或另一个的实际差异.

基本上，几年前当我学习一些基本的 x86 程序集时，我无缘无故地使用了 NASM，除了我正在阅读的那本书——这让我坚定但不由自主地加入了 NASM 阵营。从那以后，我很少有使用汇编的理由，所以我没有机会尝试 GAS。

请记住，它们都支持英特尔语法（我个人更喜欢）并且至少在理论上应该产生相同的二进制文件（我知道它们可能不会，但不应该改变含义），有什么理由支持非此即彼？

是命令行选项吗？宏？非助记词？或者是其他东西？

谢谢 ：）

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2015-06-20T17:42:24.617

NASM 实际上使用了自己的 Intel 语法变体，与 Intel 官方文档中使用的 MASM 语法不同。操作码名称和操作数顺序与 Intel 中的相同，因此乍一看指令看起来相同，但任何重要的程序都会有所不同。例如，对于 MASM，使用的指令`MOV ax, foo`取决于 的类型`foo`，而 NASM 没有类型，它总是汇编为立即移动指令。当无法隐式确定操作数的大小时，MASM 需要`DWORD PTR`在 NASM 用来`DWORD`表示相同事物的地方使用类似的东西。除了指令助记符和基本操作数格式和顺序之外的大多数语法都是不同的。

就功能而言，NASM 和 GAS 几乎相同。两者都有汇编宏工具，尽管 NASM 更广泛和更成熟。许多 GAS 源代码文件使用 C 预处理器而不是 GAS 自己的宏支持。

两个汇编器之间最大的区别是它们对 16 位代码的支持。GAS 不支持定义 x86 段。使用 GAS，您只能创建简单的单段 16 位二进制映像，基本上只是引导扇区和 .COM 文件。NASM 完全支持分段并支持 OMF 格式的目标文件，您可以使用合适的链接器来创建分段的 16 位可执行文件。

除了 OMF 对象文件格式之外，NASM 还支持 GAS 不支持的许多格式。GAS 通常只支持运行它的机器的本机格式，基本上是 ELF、PE-COFF 或 MACH-O。如果您想支持不同的格式，您需要为该格式构建 GAS 的“交叉编译”版本。

另一个显着的区别是 GAS 支持创建 DWARF 和 Windows 64 位展开信息（Windows x64 ABI 需要后者），而使用 NASM 您必须自己创建部分并填写数据。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2015-06-20T13:16:12.287

**英特尔语法**：mov eax, 1（指令目标，源）

**AT&T 语法**：movl $1, %eax（指令源，目标）

Intel 的语法很容易解释。在上面的示例中，移动的数据量是根据寄存器的大小（在 eax 的情况下为 32 位）推断出来的。使用的寻址模式是从操作数本身推断出来的。

AT&T 语法有一些怪癖。首先，注意指令`l`末尾的后缀`mov`，它代表`long`并表示 32 位数据。其他指令后缀包括 `w`一个字（16 位 -**不要**与 CPU 的字长混淆！）、`q`一个四字（64 位）和`b`一个单字节。虽然并不总是需要，但通常您会看到使用 AT&T 语法的汇编代码明确说明指令正在操作的数据量。

当涉及到源操作数和目标操作数上使用的寻址模式时，需要更加明确。`$`表示`immediate`寻址，就像使用指令本身中的值一样。在上面的例子中，如果没有 this 写入`$`，`direct`将使用寻址，即 CPU 将尝试获取内存地址 1 处的值（这很可能会导致分段错误）。`%`表示`register`寻址，如果您没有在上面的示例中包含它，将`eax`被视为一个`symbol`即标记的内存地址，这很可能会导致`undefined reference`链接时间。因此，您必须**明确****说明****两者**使用的寻址模式**源操作数和目标操作数。**

 **指定内存操作数的方式也不同：

**英特尔**：[基址寄存器 + 索引 * 索引大小 + 偏移量]

**AT&T**：偏移量（基址寄存器、索引、索引大小）

英特尔语法使查找内存地址的计算更加清晰。使用 AT&T 语法，结果是相同的，但您应该知道正在发生的计算。

> 至少理论上应该产生相同的二进制文件

这完全取决于您的工具链。

> 偏爱其中一个的原因是什么？

当然，个人偏好，在我看来，这归结为在寻址内存时您感觉更舒服的语法。你更喜欢 AT&T 语法的强制明确性吗？或者你更喜欢你的汇编程序为你找出这个低级细节？

> 是命令行选项吗？宏？非助记词？

这与汇编程序（GAS、NASM）本身有关。再次，个人喜好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-25T22:00:35.740

为什么不检查这篇[文章](https://developer.ibm.com/technologies/linux/articles/l-gas-nasm/)？

> NASM 和 GAS 之间最大的区别之一是语法。GAS 使用 AT&T 语法，这是一种相对古老的语法，专用于 GAS 和一些较旧的汇编程序，而 NASM 使用 Intel 语法，得到大多数汇编程序（如 TASM 和 MASM）的支持。（现代版本的 GAS 确实支持名为 .intel_syntax 的指令，它允许在 GAS 中使用 Intel 语法。）

它涵盖：

*   NASM 和 GAS 之间的基本语法差异
*   常见的汇编级结构，例如变量、循环、标签和宏
*   关于调用外部 C 例程和使用函数的一些信息
*   汇编助记符区别及用法
*   内存寻址方法

一个好的做法是用两种方言写[hello_world](https://gist.github.com/guihao-liang/bd70ed59ec87953e74538c8c526c0d8e)，有具体的感觉。

*   [气体教程](https://cs.lmu.edu/~ray/notes/gasexamples/)
*   [NASM 教程](https://cs.lmu.edu/~ray/notes/nasmtutorial/)**

# c# - WP7 & Linq-To-Sql：检索指定列的不同记录集

> ID：13793615
> 
> 赞同：1
> 
> 时间：2012-12-10T00:59:52.143
> 
> 标签：c#, windows-phone-7, linq-to-sql

我正在将现有数据项目转换为 Windows Phone 7。有一种方法可以接受字符串值并将其用作列名来选择不同的值列表：

```
public static List<string> GetDistinctValues( string Field ) {
    string sql = "SELECT DISTINCT [" + Field + "] FROM [MyTable]";
    ...
} 
```

将此转换为Linq-to-Sql，我知道如何使用`Distinct()`，但我不知道如何动态设置要查询的列。我试过搜索，但没有找到太多。可能有十几个不同的列可以使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T01:14:48.593

对不起，我最初误解了你的问题。

您尝试做的事情可以使用[Dynamic LINQ](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx)来完成。

```
public static List<string> GetDistinctValues( string Field ) 
{
    var query = db.MyTable.Select(Field).Distinct();
    ...
} 
```

# jquery - 如何根据使用 jQuery 从 Mongo 文档发送的信息使 HTML 下拉菜单具有默认选择选项？

> ID：13793617
> 
> 赞同：2
> 
> 时间：2012-12-10T01:00:03.850
> 
> 标签：jquery, mongodb, tornado

不确定我是否正确地表达了这个问题。我有一个表单来编辑来自 MongoDB 的文档（使用 Tornado 模板）。当他们单击编辑时，他们会转到预先填充表单的页面。以我的形式：

```
{% for group in doc.groups %}
     <div class="groupMenu">
         <select name="gName0" id="groupDropDown">
              <option value="group1">Group 1</option>
              <option value="group2">Group 2</option>
              <option value="group3">Group 3</option>
         </select>
     </div>
{% end %} 
```

我对jQuery不是很好，想问你如何编写一个函数，以便当一个人点击编辑并填写表格时，下拉默认设置`group`为每个下拉菜单的默认值？

希望我能够正确地解释自己。

编辑：我希望 selected="selected" 位于 group1、group2 或 group3 上，具体取决于它是什么`group`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T01:51:00.167

使用`{% if condition %}{% end %}`模板标签，您可以这样做：

```
{% for group in doc.groups %}
     <div class="groupMenu">
         <select name="gName0" id="groupDropDown">
              <option {% if group == 'group1' %}selected="selected"{% end %} value="group1">
                  Group 1
              </option>
              <option {% if group == 'group2' %}selected="selected"{% end %} value="group2">
                  Group 2
              </option>
              <option {% if group == 'group3' %}selected="selected"{% end %} value="group3">
                  Group 3
              </option>
         </select>
     </div>
{% end %} 
```

如果您想使用 jQuery 来执行此操作，您可以将值放在隐藏的输入字段中：

```
<input class="default_group" type="hidden" value="{% group %}" /> 
```

然后您可以在 jQuery 中获取该值，并设置选定的选项：

```
var group = $('input.default_group').val();
$('option[value="'+ group +'"]').attr('selected', 'selected');​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

这是[演示 this 的 jsfiddle](http://jsfiddle.net/TWxt8/)。

# android - Android JUnit 测试 ClassNotFoundException

> ID：13793633
> 
> 赞同：6
> 
> 时间：2012-12-10T01:02:08.380
> 
> 标签：android, eclipse, junit

我正在尝试设置 JUnit 来测试我的 android 项目活动。

Android 项目在 AVD 和设备上都运行良好（仍然存在一些错误，这就是为什么我要添加一些单元测试）

我遵循了这些网站的步骤（它们或多或少相同，但我仍然检查了所有这些以确保我做的一切正确）
[http://mobile.tutsplus.com/tutorials/android/android-sdk- junit-testing/](http://mobile.tutsplus.com/tutorials/android/android-sdk-junit-testing/)
[http://developer.android.com/tools/testing/testing_eclipse.html](http://developer.android.com/tools/testing/testing_eclipse.html)

我使用与我的项目相同的工作区创建了一个测试项目，并创建了我的第一个测试用例。当我尝试运行测试时，我得到以下信息：

> [2012-12-09 19:42:56 - AssassinTest] Android 发布！
> [2012-12-09 19:42:56 - AssassinTest] adb 运行正常。
> [2012-12-09 19:42:56 - AssassinTest] 执行 android.test.InstrumentationTestRunner JUnit 启动
> [2012-12-09 19:42:56 - AssassinTest] 自动目标模式：首选 AVD 'Google_Level10' 在模拟器上可用emulator-5554'
> [2012-12-09 19:42:56 - AssassinTest] 正在将 AssassinTest.apk 上传到设备 'emulator-5554'
> [2012-12-09 19:42:57 - AssassinTest] 安装 AssassinTest.apk...
> [2012-12-09 19:42:59 - AssassinTest] 成功！
> [2012-12-09 19:42:59 - AssassinTest] 找到项目依赖项，正在安装：Assassin
> [2012-12-09 19:43:01 - Assassin] 应用程序已部署。无需重新安装。
> [2012-12-09 19:43:01 - AssassinTest] 在设备 emulator-5554 上启动仪器 android.test.InstrumentationTestRunner
> [2012-12-09 19:43:01 - AssassinTest] 收集测试信息
> [2012-12-09 19 :43:04 - AssassinTest] 测试运行失败：仪器运行因“java.lang.ClassNotFoundException”而失败

这是我从 LogCat 得到的：

```
12-09 19:43:02.929: E/dalvikvm(1255): Unable to resolve Ludes/assassi/test/InGameActivityTest; annotation class 19
12-09 19:43:02.929: D/AndroidRuntime(1255): Shutting down VM
12-09 19:43:02.929: W/dalvikvm(1255): threadid=1: thread exiting with uncaught exception (group=0x40015560)
12-09 19:43:02.961: E/AndroidRuntime(1255): FATAL EXCEPTION: main
12-09 19:43:02.961: E/AndroidRuntime(1255): java.lang.NoClassDefFoundError: org.junit.Test
12-09 19:43:02.961: E/AndroidRuntime(1255):     at java.lang.reflect.Method.getDeclaredAnnotations(Native Method)
12-09 19:43:02.961: E/AndroidRuntime(1255):     at java.lang.reflect.Method.getDeclaredAnnotations(Method.java:262)
12-09 19:43:02.961: E/AndroidRuntime(1255):     at java.lang.reflect.AccessibleObject.getAnnotations(AccessibleObject.java:188)
12-09 19:43:02.961: E/AndroidRuntime(1255):     at java.lang.reflect.AccessibleObject.getAnnotation(AccessibleObject.java:196)
12-09 19:43:02.961: E/AndroidRuntime(1255):     at android.test.suitebuilder.TestMethod.getAnnotation(TestMethod.java:60)
12-09 19:43:02.961: E/AndroidRuntime(1255):     at android.test.suitebuilder.annotation.HasMethodAnnotation.apply(HasMethodAnnotation.java:39)
12-09 19:43:02.961: E/AndroidRuntime(1255):     at android.test.suitebuilder.annotation.HasMethodAnnotation.apply(HasMethodAnnotation.java:30)
12-09 19:43:02.961: E/AndroidRuntime(1255):     at com.android.internal.util.Predicates$OrPredicate.apply(Predicates.java:106)
12-09 19:43:02.961: E/AndroidRuntime(1255):     at android.test.suitebuilder.annotation.HasAnnotation.apply(HasAnnotation.java:42)
12-09 19:43:02.961: E/AndroidRuntime(1255):     at android.test.suitebuilder.annotation.HasAnnotation.apply(HasAnnotation.java:31)
12-09 19:43:02.961: E/AndroidRuntime(1255):     at com.android.internal.util.Predicates$NotPredicate.apply(Predicates.java:122)
12-09 19:43:02.961: E/AndroidRuntime(1255):     at android.test.suitebuilder.TestSuiteBuilder.satisfiesAllPredicates(TestSuiteBuilder.java:254)
12-09 19:43:02.961: E/AndroidRuntime(1255):     at android.test.suitebuilder.TestSuiteBuilder.build(TestSuiteBuilder.java:184)
12-09 19:43:02.961: E/AndroidRuntime(1255):     at android.test.InstrumentationTestRunner.onCreate(InstrumentationTestRunner.java:373)
12-09 19:43:02.961: E/AndroidRuntime(1255):     at android.app.ActivityThread.handleBindApplication(ActivityThread.java:3246)
12-09 19:43:02.961: E/AndroidRuntime(1255):     at android.app.ActivityThread.access$2200(ActivityThread.java:117)
12-09 19:43:02.961: E/AndroidRuntime(1255):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:969)
12-09 19:43:02.961: E/AndroidRuntime(1255):     at android.os.Handler.dispatchMessage(Handler.java:99)
12-09 19:43:02.961: E/AndroidRuntime(1255):     at android.os.Looper.loop(Looper.java:130)
12-09 19:43:02.961: E/AndroidRuntime(1255):     at android.app.ActivityThread.main(ActivityThread.java:3683)
12-09 19:43:02.961: E/AndroidRuntime(1255):     at java.lang.reflect.Method.invokeNative(Native Method)
12-09 19:43:02.961: E/AndroidRuntime(1255):     at java.lang.reflect.Method.invoke(Method.java:507)
12-09 19:43:02.961: E/AndroidRuntime(1255):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
12-09 19:43:02.961: E/AndroidRuntime(1255):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
12-09 19:43:02.961: E/AndroidRuntime(1255):     at dalvik.system.NativeStart.main(Native Method)
12-09 19:43:02.961: E/AndroidRuntime(1255): Caused by: java.lang.ClassNotFoundException: org.junit.Test in loader dalvik.system.PathClassLoader[/system/framework/com.google.android.maps.jar:/system/framework/android.test.runner.jar:/data/app/udes.assassin.test-1.apk:/data/app/udes.assassin-2.apk]
12-09 19:43:02.961: E/AndroidRuntime(1255):     at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:240)
12-09 19:43:02.961: E/AndroidRuntime(1255):     at java.lang.ClassLoader.loadClass(ClassLoader.java:551)
12-09 19:43:02.961: E/AndroidRuntime(1255):     at java.lang.ClassLoader.loadClass(ClassLoader.java:511)
12-09 19:43:02.961: E/AndroidRuntime(1255):     ... 25 more 
```

在几个论坛上搜索时，我读到这可能是由错误的清单文件引起的，但我看不出我有什么问题

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="udes.assassin.test"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk android:minSdkVersion="10" />

<instrumentation
    android:name="android.test.InstrumentationTestRunner"
    android:targetPackage="udes.assassin" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <uses-library android:name="android.test.runner" />
</application>
</manifest> 
```

最后，这是我唯一的 JUnit 类中的代码（到目前为止）

```
package udes.assassin.test;
import static org.junit.Assert.*;
import org.junit.Before;
import org.junit.Test;
import udes.assassin.InGameActivity;
import android.test.ActivityInstrumentationTestCase2;

public class InGameActivityTest 
        extends ActivityInstrumentationTestCase2<InGameActivity> {

    public InGameActivityTest() {
        super("udes.assassin", InGameActivity.class);
    }

    public InGameActivityTest(Class<InGameActivity> activityClass) {
        super(activityClass);
    }

    @Before
    protected void setUp() throws Exception {
        super.setUp();
    }

    @Test
    public void testSetItemPosition() {
        fail("Not yet implemented");
    }
} 
```

谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-10T01:07:59.223

这可能是因为 JUnit 不在您的类路径中。转到`Project -> Properties -> Java Build Path -> Order and Export`并检查 JUnit 框是否未选中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-13T03:26:41.473

我注意到，您正在使用 @Test 注释：

```
@Test
public void testSetItemPosition() {
    fail("Not yet implemented");
} 
```

这是junit4引入的，基于junt3的android测试。看[这里](http://developer.android.com/tools/testing/testing_android.html)

您应该删除 @Test 注释。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-03T16:14:41.633

同样的错误，其他原因...

我的测试类在一个匿名包中，但它与 AndroidManifest.xml 不一致：

```
<instrumentation
        android:name="android.test.InstrumentationTestRunner"
        android:targetPackage="micharg.nameanimalthing" /> 
```

# c++ - rsa加密/解密polarssl c++

> ID：13793634
> 
> 赞同：3
> 
> 时间：2012-12-10T01:02:19.753
> 
> 标签：c++, rsa, polarssl

我正在使用 C++ 库 PolarSSL 进行 RSA 加密和解密。但是我无法解密加密的字符串，除非它是加密的输出。以下代码不起作用（未重构）。它加密文本并将输出编码到 Base64 并返回。strcmp 的条件有效（字符串相同）。

```
AsymetricCipher::encrypt(const std::string &pathToPublicKey, std::istream &inputData, std::ostream &encryptedData) {
    if(initServerPublicCtx(pathToPublicKey, 512)) {
        std::cout << "Encryption error: Can't load public key from file: " << pathToPublicKey << std::endl;
        return false;
    }

    entropy_context entropy;
    ctr_drbg_context ctr_drbg;
    char *pers = "rsa_encrypt";

    entropy_init(&entropy);
    if(ctr_drbg_init(&ctr_drbg, entropy_func, &entropy, (unsigned char*)pers, strlen(pers)) != 0) {
        std::cout << "Encryption error: ctr_drbg_init failed" << std::endl;
        return false;
    }

    size_t inputSize = ::getStreamSize(inputData);
    char *input = new char[inputSize];
    memset(input, 0, inputSize);
    inputData.read(input, inputSize);
    input[inputSize] = '\0';

    unsigned char *buffer = new unsigned char[ctx.len];
    memset(buffer, 0, ctx.len);
    memcpy(buffer, input, inputSize);

    // This has to be rewritten
    size_t MAX_OUTPUT_LENGTH = ctx.len;
    unsigned char *outputBuffer = new unsigned char[MAX_OUTPUT_LENGTH];
    memset(outputBuffer, 0, MAX_OUTPUT_LENGTH);

    if(rsa_pkcs1_encrypt(&ctx, ctr_drbg_random, &ctr_drbg, RSA_PUBLIC, inputSize, buffer, outputBuffer) != 0) {
        std::cout << "Encryption error: rsa_pkcs1_encrypt failed" << std::endl;
        return false;
    }

    initServerPrivateCtx("data/private.key", 512);
    size_t outputSize = 0;

    std::string copyBuffer = "";

    std::stringstream encStream;

    std::string base64 = "";

    Base64Wrapper::encode(outputBuffer, strlen((char*)outputBuffer), base64);

    for(size_t i = 0; i < base64.length();) {
        encStream << base64[i++];
    }

    unsigned char *encBuffer = new unsigned char[MAX_OUTPUT_LENGTH+10];
    memset(encBuffer, 0, MAX_OUTPUT_LENGTH);
    encStream.read((char *)encBuffer, MAX_OUTPUT_LENGTH+10);
    copyBuffer.append((char *)encBuffer);

    unsigned char *decoded = NULL;
    size_t decodedSize = 0;

    Base64Wrapper::decode(copyBuffer, &decoded, &decodedSize);
    decoded[decodedSize] = '\0';

    if(strcmp((char*)outputBuffer, (char*)decoded) != 0) {
        std::cout << "Different";
    }

    memset(buffer, 0, ctx.len);

    if(rsa_pkcs1_decrypt(&ctx, RSA_PRIVATE, &outputSize, decoded, buffer, MAX_OUTPUT_LENGTH) != 0) {
        std::cout << "Decryption error: rsa_pkcs1_decrypt failed" << std::endl;
        return false;
    }

    ::cleanMemory(outputBuffer, MAX_OUTPUT_LENGTH);
    ::cleanMemory(buffer, ctx.len);

    delete [] outputBuffer;
    delete [] buffer;
    delete [] encBuffer;
    delete [] decoded;
    //delete [] input;

    return true;
} 
```

但是，如果我使用 from 加密调用 rsa_pkcs1_decrypt `outputBuffer`，一切正常。

我需要加密文本，发送它并在代码中的另一个位置解密。

任何建议我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T01:24:41.920

经典内存溢出

```
char *input = new char[inputSize];
input[inputSize] = '\0'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T15:50:07.930

我终于找到了解决方案。

问题是`strlen((char*)outputBuffer)`因为它总是`0`因为输出`rsa_pkcs1_encrypt`以`\0`.

正确的解决方案是

```
bool AsymetricCipher::encrypt(const std::string &pathToPublicKey, std::istream &inputData, std::ostream &encryptedData) {
    if(initServerPublicCtx(pathToPublicKey, 512)) {
        std::cout << "Encryption error: Can't load public key from file: " << pathToPublicKey << std::endl;
        return false;
    }

    entropy_context entropy;
    ctr_drbg_context ctr_drbg;
    char *pers = "rsa_encrypt";

    entropy_init(&entropy);
    if(ctr_drbg_init(&ctr_drbg, entropy_func, &entropy, (unsigned char*)pers, strlen(pers)) != 0) {
        std::cout << "Encryption error: ctr_drbg_init failed" << std::endl;
        return false;
    }

    size_t inputSize = ::getStreamSize(inputData);
    unsigned char *buffer = new unsigned char[inputSize];
    memset(buffer, 0, inputSize);
    inputData.read((char *)buffer, inputSize);

    size_t MAX_OUTPUT_LENGTH = ctx.len;
    unsigned char *outputBuffer = new unsigned char[MAX_OUTPUT_LENGTH];
    memset(outputBuffer, 0, MAX_OUTPUT_LENGTH);

    bool retVal = true;
    if(rsa_pkcs1_encrypt(&ctx, ctr_drbg_random, &ctr_drbg, RSA_PUBLIC, inputSize, buffer, outputBuffer) != 0) {
        std::cout << "Encryption error: rsa_pkcs1_encrypt failed" << std::endl;
        retVal = false;
    }

    if(retVal) {
        std::string base64;
        Base64Wrapper::encode(outputBuffer, MAX_OUTPUT_LENGTH, base64);
        encryptedData << base64;
        ::cleanMemory(base64);
    }

    ::cleanMemory(outputBuffer, MAX_OUTPUT_LENGTH);
    ::cleanMemory(buffer, ctx.len);

    delete [] outputBuffer;
    delete [] buffer;

    return retVal;
} 
```

并用于解密

```
bool AsymetricCipher::decrypt( const std::string &pathToPrivateKey, std::istream &encryptedData, std::ostream &decryptedData ) {
    if(initServerPrivateCtx(pathToPrivateKey, 512)) {
        std::cout << "Decrypt error: Can't load private key from file: " << pathToPrivateKey << std::endl;
        return false;
    }

    size_t inputSize = ::getStreamSize(encryptedData);
    size_t outputSize = 0;

    unsigned char* buffer = NULL;
    std::string base64;
    size_t bufferSize = 0;
    encryptedData >> base64;

    Base64Wrapper::decode(base64, &buffer, &bufferSize);
    ::cleanMemory(base64);

    size_t MAX_OUTPUT_LENGTH = ctx.len;
    unsigned char *outputBuffer = new unsigned char[MAX_OUTPUT_LENGTH];

    bool retVal = true;
    if(rsa_pkcs1_decrypt(&ctx, RSA_PRIVATE, &outputSize, buffer, outputBuffer, MAX_OUTPUT_LENGTH) != 0) {
        std::cout << "Decryption error: rsa_pkcs1_decrypt failed" << std::endl;
        retVal = false;
    }

    if(retVal) {
        outputBuffer[outputSize] = '\0';
        decryptedData << outputBuffer;
    }

    ::cleanMemory(buffer, bufferSize);
    ::cleanMemory(outputBuffer, outputSize);

    delete [] outputBuffer;
    delete [] buffer;

    return retVal;
} 
```

# arduino - 自由运行模式下 AVR ADC 中的 ADIE 位

> ID：13793635
> 
> 赞同：0
> 
> 时间：2012-12-10T01:02:20.923
> 
> 标签：arduino, microcontroller, avr, atmel, atmega

我一直在编写自己的“库”来处理 AVR 芯片上的不同初始化。但是，我被 ADCSRA 寄存器中的 ADIE 位的作用所困扰（数据表中的第 261 页）。数据表并没有真正解释 ADIE 的工作原理。但是，每当 ADIE 设置为 0 时，我都无法读取 ADC 的读数。这是为什么呢？我认为 ADC 像定时器一样工作——即使没有启用中断，它仍然会用读数更新 ADC 寄存器。

这是罪魁祸首代码，只要“中断”设置为 1 以外的任何值，ADC 就无法工作。有趣的是，与其他中断不同，如果 ISR(ADC_vect) 例程中没有代码，则芯片不会卡住。

```
if(interrupt){ADCSRA|=1<<ADIE;}//enable the ADC conversion complete interrupt
else{ADCSRA&=~1<<ADIE;} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T02:02:31.923

这段代码缺少一些括号，所以它并没有像你想象的那样做。看起来它可能正在做正确的事情，祝你好运。

```
if(interrupt){ADCSRA|=1<<ADIE;}//enable the ADC conversion complete
interrupt else{ADCSRA&=~1<<ADIE;}

~1<<ADIE != ~(1<<ADIE) 
```

数据表似乎非常明确：

> ADCSRA 位 3 – ADIE：ADC 中断使能
> 
> 当该位被写入 1 并且 SREG 中的 I 位被置位时，ADC 转换完成中断被激活。

这意味着如果第 4 位 ADIF（标志）变为 1，则 ADC 中断向量将运行（并清除标志）。

但是如果你不打算使用中断，你就不需要使用它。如果您确实将其设置为 1，并且没有注册中断，则设备将重置。

也许您需要更多关于 ADC 工作原理的解释。

通过写入 ADCSRA 的第 6 位开始转换。转换需要一些时间，如果您不想使用中断，您可以通过轮询位 4 来判断它何时准备就绪。当它变为 1 时，从 ADCL 和 ADCH 读取结果。确保通过将 1 写入位 4 来清除标志。

# html - 使 div 内的文本框根据窗口大小扩大和缩小（div 已经这样做了）

> ID：13793639
> 
> 赞同：1
> 
> 时间：2012-12-10T01:02:54.467
> 
> 标签：html, css, css-position

我对 HTML/jQuery 很陌生，我正在为一个班级设计一个投资组合网站。我制作了一个图形，其中包含一个文本应该在左侧的框。我想最小化用户的滚动，所以我让包含图像的 div 随窗口调整大小，并且还实现了最小尺寸。我现在对如何使用我的文本框执行此操作有点困惑。我正在尝试创建一个包含在背景图像 div 中的 div 以保存文本。此文本 div 需要定位在框图形内并与图像一起调整大小。我尝试使用百分比作为边距，但它不起作用，因为当我调整窗口大小时，它再次变得未对齐。

[这里是页面。]

[这里是 CSS。]

另外，请记住这是一项正在进行的工作，图形和动画不会完全保持原样！如果有人可以帮助我，请告诉我，谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T23:29:37.863

请看一下这个 jsfiddle，让我知道这是否更像你想要的？

html:

```
<html>
<head>
  <title></title>
</head>
<body>
    <header>some | header | nav</header>
    <div class="content">
        <p>test text</p>
    </div>
    <footer> a &copy; symbol </footer>

</body>
</html>​ 
```

CSS：

```
body {
 background:gray;   
}
header {background:black; color:white}
footer {background:black; color:white}

.content {
    margin: 25px;
    height: 30px;
    width: 100px;
    padding: 50px;
    border: 1px solid black;
}
​ 
```

[http://jsfiddle.net/VsKsQ/](http://jsfiddle.net/VsKsQ/)

我希望这会有所帮助。

# javascript - Rails 3 警告不使用 Ajax

> ID：13793641
> 
> 赞同：0
> 
> 时间：2012-12-10T01:03:36.290
> 
> 标签：javascript, ruby-on-rails, ajax, alert

我在我的 Rails 应用程序上的 ajax 中实现了一个“喜欢”按钮，我想知道为什么 alert 不起作用。

在我的控制器中，

```
 def like
    @post = Post.find(params[:id])
    if current_user
        if @like.empty?
            @post.num_likes += 1
            @post.save
        else
            alert = "You already liked the post :)"
        end
    end
  end 
```

和我的 like.js.erb 文件

```
$("#post_like_<%= @post.id %>").html("<%= @post.num_likes %>"); 
```

如果用户没有登录，我最初想将用户重定向到登录页面，但我了解到不可能在 XML 请求中使用重定向。当用户单击“喜欢”按钮时，我是否有任何解决方法要求用户登录，同时显示警报消息？

我认为在我的 js 文件中包含 bootstrap [popover](http://twitter.github.com/bootstrap/javascript.html#popovers)如下是在我的控制器中使用“alert”的一种解决方法，但它不起作用。我希望在喜欢的数量下看到一个弹出窗口。

```
$("#post_like_<%= @post.id %>").html("<%= @post.num_likes %>");
$("#post_like_<%= @post.id %>").popover('show') 
```

谁能回答我的问题？我感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T03:56:14.553

要显示由 Ajax 请求触发的 flash 消息，您可以在 like.js.erb 文件中执行类似的操作（这假定您的页面上存在 id 为“flash”的分区）：

```
<% if @alert %>
  // displays the alert message and makes it "blink"
  $("#flash").html("<%= escape_javascript(@alert)%>").effect('highlight', {}, 1500);
<% else %>
  $("#post_like_<%= @post.id %>").html("<%= @post.num_likes %>");
<% end %> 
```

要将用户从 Ajax 请求重定向到登录页面，可以通过更改`window.location`. 再次在您的`like.js.erb`文件中：

```
<% unless current_user %>
  window.location = '<%= new_user_session_url %>';
<% end %> 
```

但是，仅显示一条提示用户使用登录路径链接登录的 Flash 消息可能就足够了。

# asp.net-mvc - 带有自定义路由的 ASP.NET MVC ActionLink 问题

> ID：13793644
> 
> 赞同：1
> 
> 时间：2012-12-10T01:03:46.820
> 
> 标签：asp.net-mvc, asp.net-mvc-routing

我一直试图让几个自定义路线没有运气。我的汽车应用程序有两个页面。第一页显示车辆列表。当用户单击此页面上生成的链接时，会将它们带到产品列表页面。问题是此页面无法正确生成链接。

以下是路线：

```
 routes.MapRoute(
                "Select_Vehicle",
                "Select_Vehicle/{id}/{make}",
                new { controller = "Select_Vehicle", action = "Index", id = UrlParameter.Optional, make = UrlParameter.Optional });

            routes.MapRoute(
                "Products",
                "Products/{id}/{make}/{model}",
                new { controller = "Products", action = "Index", id = UrlParameter.Optional, make = UrlParameter.Optional, model = UrlParameter.Optional });

            routes.MapRoute(
                "Default",
                "{controller}/{action}/{id}",
                new { controller = "Home", action = "Index", id = UrlParameter.Optional }); 
```

Select_Vehicle 页面应生成如下链接：

```
/products/horns/dodge/dakota 
```

但我得到的是：

```
/Products/Index/horns?make=dodge&model=Dakota 
```

它只是无法正常工作。另外，我不明白为什么“索引”也会显示，因为它是默认设置。

我已经尝试过 ActionLink 和 RouteLink：

```
@Html.RouteLink(model, new { Controller = "Products", id = Model.CategoryName, make = Model.CurrentMake, model = model })
@Html.ActionLink(model, "Index", "Products", new { id = Model.CategoryName, make = Model.CurrentMake, model = model }, null) 
```

这真让我抓狂。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T01:09:03.847

ASP.NET MVC 仅支持单个可选参数。更新您的路线以给 make 和 model 一个默认值，而不是让它们成为可选的。您可能还需要使用`RouteLink`采用路由名称的重载，以便它选择正确的路由。

```
@Html.RouteLink(model, "Products", new 
 {
     id = Model.CategoryName,
     make = Model.CurrentMake,
     model = model
 }) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T11:08:50.190

您的代码应该可以工作。我用一个新项目测试了你的路线，这就是我得到的。您的路线配置中还有其他内容吗？

```
http://localhost:60599/Products/horns/dodge/dakota 
```

我正在使用 asp.net MVC 3

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T02:18:13.450

好吧，我发现了问题所在。您可以拥有多个 UrlParameter.Optional，但存在一个问题。这是一个错误或功能，具体取决于 Microsoft 想要如何定位它。

问题是 make 是空的，这在构建 URL 时导致了问题。您可以在这里找到更多信息：

[http://haacked.com/archive/2011/02/20/routing-regression-with-two-consecutive-optional-url-parameters.aspx](http://haacked.com/archive/2011/02/20/routing-regression-with-two-consecutive-optional-url-parameters.aspx)

感谢所有的建议和帮助。

# rsync - 关于使用 Rsync 的几个问题？

> ID：13793652
> 
> 赞同：4
> 
> 时间：2012-12-10T01:04:53.963
> 
> 标签：rsync

我找不到任何适用于我的 Mac 的可靠文件同步程序，所以我一直在两个文件夹之间使用命令行 Rsync。

我一直在使用“rsync -r source destination”。

- 这是双向同步文件，还是仅将源同步到目标？- 如果一个文件之前在两个文件夹之间同步，但因为不再需要而被删除，它会在源和目标上都被删除，还是总是被复制到它丢失的地方？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T01:25:03.737

不，`rsync`会将远程目录的内容同步到本地目录。在这方面，它是单向的。或者，您可以强制它删除远程文件夹中不再存在的本地文件。

如果您想在两台机器上保留最新的更改，则必须提供更复杂的 rsync 咒语并将两台机器设置为 rsync 服务器。我想这样做最终会给你带来麻烦，特别是如果你想成为专制而不是删除。

在任何情况下，您都可以使用`-u`(or `--update`) 选项，该选项将跳过目标端的任何较新文件。您确实必须担心时间戳，这不会处理任何冲突或合并。仍然......它可能很简单：

```
rsync -u -r target1 target2
rsync -u -r target2 target1 
```

这对删除没有任何作用。您无法知道一个目标上丢失的文件在那里被删除，而不是在另一个目标上创建了一个新文件。

这就是发明版本控制的原因......对于害怕版本控制的人来说，存在像 DropBox 这样的服务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T16:08:35.890

回答原始问题：

1）它根据拉或推机制仅在一个方向上同步文件。对于推拉机制，请参阅“man rsync”的手册页。

*所以，对于你剩下的问题，不要假设它在两种情况下都有效。*

2）该文件仅在目标目录中被删除。在`rsync --help`命令中获取更多详细信息，请参阅选项 --delete 从目标目录中删除无关文件和其他删除选项。

3）如果您在远程机器/目录/上**推送文件，丢失的文件将被复制到目标目录**

推送机制的示例：-

```
rsync -avz /home/local_dir/abc.txt remoteuser@192.168.xx.xx:/home/remoteuser/ 
```

如果目标目录中已经存在名为 abc.txt 的文件，那么它将根据本地端是否是旧版本的 abc.txt 进行更新。如果远程目录中不存在 abc.txt ，则将创建一个名为 abc.txt 的全新文件，其中包含本地版本 abc.txt 的内容。

拉机制的示例：-

```
rsync -avz remoteuser@192.168.xx.xx:/home/remoteuser/abc.txt /home/local_dir/ 
```

如果名为 abc.txt 的文件已经存在于本地目录中，那么它将根据远程端是否是旧版本的 abc.txt 进行更新。如果本地目录中不存在 abc.txt，则将创建一个名为 abc.txt 的全新文件，其中包含本地版本 abc.txt 的内容。

# java - 如何在android中的活动之间传输布尔值？

> ID：13793653
> 
> 赞同：3
> 
> 时间：2012-12-10T01:05:02.683
> 
> 标签：java, android, android-intent

这就是我目前的做法，但它只是强制关闭应用程序。

在第一个活动中

```
Intent myIntent = new Intent(Input.this, results.class);
    myIntent.putExtra("perfect", rig);
    startActivity(myIntent);` 
```

我想转移到的活动

```
 Boolean lovers = getIntent().getExtras().getBoolean("perfect"); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T01:10:09.410

正如[文档](http://developer.android.com/reference/android/content/Intent.html)所说，功能是`getBooleanExtra`

```
Boolean lovers = getIntent().getExtras().getBooleanExtra("perfect"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-07-15T16:12:32.017

**我不确定接受的答案**::*但我认为应该是*

```
Boolean lovers = getIntent().getExtras().getBoolean("perfect"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-20T10:28:03.207

您可以在发送方尝试此操作：

```
MyModel model = new MyModel();

 //1\. using constructor
    Boolean blnObj1 = new Boolean(model.getBooleanStatus()); // This //getBooleanStatus will return 'boolean' value

    //2\. using valueOf method of Boolean class. This is a static method.
    Boolean blnObj2 = Boolean.valueOf(model.getBooleanStatus());
  }

Intent targetIntent = new Intent(MyCalass.this, TargetClass.class);
targetIntent.putExtra("STATUS", new Boolean(model.getBooleanStatus()));
targetIntent.putExtra("STATUS", Boolean.valueOf(model.getBooleanStatus()));
startActivity(targetIntent); 
```

接收方：

```
Intent receiverIntent = getIntent().getBoolean("STATUS"); 
```

# javascript - JQuery 点击处理程序

> ID：13793654
> 
> 赞同：0
> 
> 时间：2012-12-10T01:05:05.987
> 
> 标签：javascript, jquery, click, handler

我正在创建一堆s 并使用一个简单的函数`div`通过引用文件插入缩略图。`js`基本上我试图将点击处理程序分配给`div`循环中的每个新的，但可能由于语法原因它不起作用。

这是我的代码（更新）...

```
function makethumbs() {

    for (var i = 0; i < 14; i++) {

        var backgroundUrl = script_vars + "/images/gallery/thumbs/g" + (i+1) + ".jpg",
            newdiv = $('<div />', {id: 'thumbnail'+i, width: 145, height: 84});
            newdiv.css({display:'inline', 
                        float:'left', 
                        margin:'2px 2px 0 0', 
                        color:'#000', 
                        fontSize:'18px', 
                        zIndex:0,
                        html:'P',
                        background: 'url(' + backgroundUrl + ')'
                       });
            newdiv.click(function() {
                $(this).stop(true, true).fadeTo('slow', 0);
            });

        $('#thumbholder').append(newdiv);
    }

    $('#arrowright').click(function() {
        var L = $('#thumbholder'),
            margL = parseInt(L.css('marginLeft'), 10),
            newMarg = (margL - 147) + 'px',
            anim = {opacity: 1};
            anim["marginLeft"] = newMarg;
        $('#thumbholder').stop(true, true).animate(anim, 400);

    });
} 
```

那里也有一个额外的点击处理程序，`#arrowright`可以正常工作。不确定它作为可点击箭头的 az 排序`div`是否在覆盖缩略图的容器内，`div`如果这有意义的话。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T01:21:01.380

为什么不继续使用 jQuery 呢？

```
function makethumbs() {
    for (var i = 0; i < 14; i++) {

        var backgroundUrl = script_vars + "/images/gallery/thumbs/g" + (i+1) + ".jpg",
            newdiv = $('<div />', {id: 'thumbnail'+i, width: 145, height: 84});
            newdiv.css({display:'inline', 
                        float:'left', 
                        margin:'2px 2px 0 0', 
                        color:'#000', 
                        fontSize:'18px', 
                        zIndex:0,
                        html:'P',
                        background: 'url(' + backgroundUrl + ')'
                       });
            newdiv.click(function() {
                $(this).stop(true, true).fadeTo('slow', 0);
            });

        $('#thumbholder').append(newdiv);
    }

    $('#arrowright').click(function() {
        var L = $('#thumbholder'),
            margL = parseInt(L.css('marginLeft'), 10),
            newMarg = (margL - 147) + 'px',
            anim = {opacity: 1};
            anim["marginLeft"] = newMarg;
        $('#thumbholder').stop(true, true).animate(anim, 400);

    });
}​ 
```

因为您的主要问题是尝试将具有 jQuery 语法的单击处理程序附加到本机 JS DOM 元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T01:28:08.983

更改`newDiv.click`为，`$(newDiv).click`因为您似乎在使用 jQuery；但是，如果您想继续使用本机 javascript，您可以为元素设置一个事件，如下所示：

```
newDiv.addEventListener('click',function(){
//you code here
}); 
```

# php - 谷歌 IP 地理定位 API

> ID：13793655
> 
> 赞同：11
> 
> 时间：2012-12-10T01:05:16.053
> 
> 标签：php, ip-geolocation

有没有办法使用任何 Google API 实时获取我的用户的 IP 地理位置？

我认为它将使用分析数据库，这是唯一一个在城市级别跟踪我的用户并且实际上是正确的（我可以测试的任何其他 IP-Location-API 显示我的 IP 地址距离我的真实位置近 200 公里。谷歌显示它 200 米（！） ！）

我想知道我的用户的位置（在浏览器端并将其传输到我的服务器或在服务器端）以提供与城市相关的内容。但是我不想让我的用户在这些烦人的弹出窗口中要求使用 GPS，所以我想使用 IP 地址。

有什么建议么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-10T01:12:23.657

如果您不想使用[HTML5 样式的客户端启用的 GeoIP 信息](http://html5demos.com/geo)，您将需要一个 GeoIP 数据库，例如[MaxMind 的 GeoIP Lite 数据库](http://dev.maxmind.com/geoip/geolite)，它是免费的，适用于 99% 的用例。任何其他具有更准确/详细信息的服务都会花费您很多钱。MaxMind 受到很多人的好评，并且非常适合我个人的需求。它可以为您提供国家/地区/城市/纬度-经度-坐标/大陆信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-05-28T18:58:16.813

您可以使用 Google 的 geolocation API 根据用户的 IP 地址获取 lat 和 lon：

```
 var apiKey = "Your Google API Key";

  function findLatLonFromIP() {
    return new Promise((resolve, reject) => {
      $.ajax({
        url: `https://www.googleapis.com/geolocation/v1/geolocate?key=${apiKey}`,
        type: 'POST',
        data: JSON.stringify({considerIp: true}),
        contentType: 'application/json; charset=utf-8',
        dataType: 'json',
        success: (data) => {
          if (data && data.location) {
            resolve({lat: data.location.lat, lng: data.location.lng});
          } else {
            reject('No location object in geolocate API response.');
          }
        },
        error: (err) => {
          reject(err);
        },
      });
    });
  } 
```

然后，您可以使用这些坐标来使用地理编码 API 获取用户的地址。这是一个返回国家/地区的示例：

```
 function getCountryCodeFromLatLng(lat, lng) {
    return new Promise((resolve, reject) => {
      $.ajax({
        url: `https://maps.googleapis.com/maps/api/geocode/json?latlng=${lat},${lng}&key=${apiKey}`,
        type: 'GET',
        data: JSON.stringify({considerIp: true}),
        dataType: 'json',
        success: (data) => {
          console.log('reverse geocode:', data.results[0].address_components);
          data.results.some((address) => {
            address.address_components.some((component) => {
              if (component.types.includes('country')) {
                return resolve(component.short_name);
              }
            });
          });
          reject('Country not found in location information.');
        },
        error: (err) => {
          reject(err);
        },
      });
    });
  } 
```

上面，只需浏览一下`data.results`即可找到您需要的信息（City、Street、Country 等） 将上面的这两个功能一起使用：

```
findLatLonFromIP().then((latlng) => {
  return getCountryCodeFromLatLng(latlng.lat, latlng.lng);
}).then((countryCode) => {
  console.log('User\'s country Code:', countryCode);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T01:12:03.820

您可以使用 Google 的地理编码 API 来获取某个位置的真实地址，但该 API 所需的输入是纬度和经度坐标。

示例： [http ://maps.googleapis.com/maps/api/geocode/json?latlng=43.473,-82.533&sensor=false](http://maps.googleapis.com/maps/api/geocode/json?latlng=43.473,-82.533&sensor=false)

您需要从其他供应商那里找到 Location API 并通过 IP 访问某个城市级别，或者保留提示他们授予您对其地理位置的访问权限的选项。

IPInfoDB 在不使用输入的情况下通过 IP 自动缩小位置方面做得很好：

[http://ipinfodb.com/ip_location_api.php](http://ipinfodb.com/ip_location_api.php)

# ruby-on-rails - 在 shell 中编辑最后生成的迁移

> ID：13793661
> 
> 赞同：0
> 
> 时间：2012-12-10T01:07:24.317
> 
> 标签：ruby-on-rails, shell, rails-migrations

我喜欢使用 Vim（和 shell）来编辑我的文件。当我生成迁移时，我经常发现尝试通过像`20121209200054`.

如何轻松编辑`db/migrate`（刚刚生成的）中的最后一个文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T01:07:24.317

您可以简单地`ls`将目录输入到`vim`命令中：

```
vim db/migrate/$(ls db/migrate/ | tail -n 1) 
```

然后，您可以从中创建一个 Bash 别名（在您的`~/.bashrc`or中`~/.bash_aliases`）

```
alias vim-last-migration='vim db/migrate/$(ls db/migrate/ | tail -n 1)' 
```

或者，还有更好的方法？

# java - java小程序在html中不起作用

> ID：13793664
> 
> 赞同：1
> 
> 时间：2012-12-10T01:07:33.793
> 
> 标签：java, html, swing, applet

我有一个非常简单的问题。由于某种原因，我的“Hello World”小程序没有转换为 html。

我正在提供代码类和代码库来上传文件，但由于某种原因，html 指出存在错误，并且错误看起来像是来自操作系统终端的一堆命令。

我使用的是 Mac OS，Java 和 HTML 的编码如下：

```
import java.awt.*;

public class Hello extends javax.swing.JApplet {
    String greeting;

    public void init() {
        FlowLayout flo = new FlowLayout();
        setLayout(flo);
        greeting = "Hello!";
    }

    public void paint(Graphics screen) {
        Graphics2D screen2D = (Graphics2D) screen;
        screen2D.drawString(greeting, 25, 50);
    }
} 
```

我用标签、标题、标题和正文正确设置了 HTML。小程序在正文中，编码如下：

```
applet width="400" height="200" codebase="..\\..\\build\\classes" code="Hello.class" 
```

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T05:33:23.790

在 Hello.class 所在的目录中创建一个 html 文件，其中包含：

```
<applet width="400" height="200" codebase="." code="Hello.class"> 
```

使用浏览器打开它，如果您的 Java 插件配置正确，您应该会看到小程序。这个对我有用：

![在此处输入图像描述](../Images/29f06fb849e88f0e5d92431481b74c21.png)

# php - 如何使用 CSS 将大写文本转换为标题大小写

> ID：13793666
> 
> 赞同：15
> 
> 时间：2012-12-10T01:08:22.197
> 
> 标签：php, css

如果您正在阅读本文，您可能会注意到 CSS 属性`text-transform:capitalize;`不会将 THIS 转换为 This。相反，非初始字符保持大写，因此在这种情况下转换无效。那么我们怎样才能达到这个结果呢？

我经常看到这个问题，大多数答案都可以快速推广使用 javascript 来实现这一点。这将起作用，但如果您正在为 Wordpress、Drupal 或 Joomla 等 PHP CMS 编写或自定义模板/主题，则没有必要。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2016-04-11T14:19:59.340

在某种程度上，您可以通过 CSS 使用伪类 ::first-letter 来实现这一点，并且应该可以一直追溯到 IE 5.5 :-(

注意：这非常依赖于您的 html 结构，并非在所有情况下都有效，但有时会很有用。点击“运行代码片段”以查看下面的结果。

```
.progTitle {
    text-transform: lowercase;
}

.progTitle::first-letter {
    text-transform: uppercase;
}
```

```
<p class="progTitle">THIS IS SOME TEST TEXT IN UPPERCASE THAT WILL WORK. </p>
<p class="progTitle">this is some test text in lowercase that will work. </p>
<p class="progTitle"><i class="fa fa-bars"></i> THIS WILL NOT WORK </p>
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-10T01:08:22.197

坏消息是没有这样的东西`text-transform : title-case`可以保证结果是标题大小写。好消息是有一种方法可以做到这一点，它不需要 javascript（通常建议用于这种情况）。如果您正在为 CMS 编写主题，您可以使用 strtolower()[`ucwords()`](http://us2.php.net/ucwords)并将相关文本转换为标题大小写。

之前（这不起作用）：

```
<style>
.title-case{ text-transform:capitalize; }
</style>
<span class="title-case">ORIGINAL TEXT</span> 
```

后：

```
<?php echo ucwords( strtolower('ORIGINAL TEXT') ); ?> 
```

如果您正在编写主题，您可能会使用变量而不是文本字符串，但函数和概念的工作方式相同。这是一个使用原生 Wordpress 函数[get_the_title()](http://codex.wordpress.org/Function_Reference/get_the_title)将页面标题作为变量返回的示例：

```
<?php
$title = get_the_title();
$title = strtolower($title);
$title = ucwords($title); 
<h1>
<?php echo $title;
</h1> 
?> 
```

希望这可以帮助某人。快乐编码。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2016-12-15T17:29:57.663

这是运行 Virtuemart 1 的 Joomla 1.5.22 网站中的一个工作示例。目的是获取一个最初为大写的字符串，并将其转换为正确的大小写。

大写：

```
<?php echo $list[$i]->name; ?> 
```

适当的情况：

```
<?php echo ucwords( strtolower($list[$i]->name) ); ?> 
```

* * *

## 回答 #4

> 赞同：-5
> 
> 时间：2015-11-04T03:25:12.993

这可以通过一个简单的规则来实现：

```
text-transform: capitalize; 
```

* * *

## 回答 #5

> 赞同：-6
> 
> 时间：2015-05-06T14:04:46.853

你只写`text-transform: none;`

# gpgpu - 逐行填充 2D AMP 数组

> ID：13793669
> 
> 赞同：1
> 
> 时间：2012-12-10T01:08:36.360
> 
> 标签：gpgpu, c++-amp

假设我有一个如下所示的 CPU 端数据源：

```
vector< vector<int> > cpuBlobOData; 
```

假设里面的每个行向量都具有相同的大小（一个锯齿状的二维向量，不是锯齿状的）。

我想将其复制到数组内的单个 GPU 内存块。有没有办法逐行执行此操作？像这样的东西：

```
array<int, 2> gpuArray(cpuBlobOData.size(), numColumns);
for(size_t i=0; i<cpuBlobOData.size(); ++i)
{
    auto cpuRow = cpuBlobOData[i];
    concurrency::copy(cpuRow.begin(), cpuRow.end(), &gpuArray[i]);
} 
```

我知道这不会编译，它显示了我正在尝试做的事情。有什么东西可以做到这一点吗？我能找到的唯一解决方案是将 cpu 向量复制到一维向量中，并将其映射到 array_view，或者将其复制到数组中。

这行得通，但很浪费，而且对于某些算法，连续的一维向量可能不适合剩余的内存空间。

欢迎任何建议，因为我正在努力找出 AMP。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T03:24:37.360

是的，您可以逐行复制它。您的解决方案几乎就在那里，只需从带有 concurrency::copy 的 gpuArray 中删除 '&' ：

```
array<int, 2> gpuArray(cpuBlobOData.size(), numColumns);
for(size_t i=0; i<cpuBlobOData.size(); ++i)
{
    auto cpuRow = cpuBlobOData[i];
    concurrency::copy(cpuRow.begin(), cpuRow.end(), gpuArray[i]);
} 
```

发生的情况是`array<int,2>`使用下标运算符访问的返回一个`array_view<int,1>`表示行“i”的，这称为“投影”。有关更多详细信息，请查看详细[介绍 C++ AMP 预测的博客文章](http://blogs.msdn.com/b/nativeconcurrency/archive/2012/02/17/projections-in-c-amp.aspx)。

# python - 具有多个元素的数组的真值是模棱两可的错误？Python

> ID：13793670
> 
> 赞同：2
> 
> 时间：2012-12-10T01:08:43.507
> 
> 标签：python, matplotlib

```
from numpy import *
from pylab import *
from math import *

def TentMap(a,x):
    if x>= 0 and x<0.5:
        return 2.*a*x
    elif x>=0.5 and x<=1.:
        return 2.*a*(1.-x)

# We set a = 0.98, a typical chaotic value
a = 0.98
N = 1.0

xaxis = arange(0.0,N,0.01)

Func = TentMap

subplot(211)

title(str(Func.func_name) + ' at a=%g and its second iterate' %a)
ylabel('X(n+1)') # set y-axis label
plot(xaxis,Func(a,xaxis), 'g', antialiased=True)

subplot(212)

ylabel('X(n+1)') # set y-axis label
xlabel('X(n)')   # set x-axis label
plot(xaxis,Func(a,Func(a,xaxis)), 'bo', antialiased=True) 
```

我的`TentMap`功能无法正常工作。我不断收到错误`The truth value of an array with more than one element is ambiguous. Use a.any() or a.all()`，我不明白我应该如何使用它们。基本上，该`TentMap`函数接受一个值 X 并根据 X 是什么返回一个特定的值。因此，如果 0<=x<0.5 则返回 2 *a* x，如果 0.5<=x<=1 则返回 2 *a* (1-x)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T01:31:44.980

如果你将一个 numpy 数组与一个数字进行比较，你会得到另一个数组：

```
>>> from numpy import arange
>>> xaxis = arange(0.0, 0.04, 0.01)
>>> xaxis
array([ 0\.  ,  0.01,  0.02,  0.03])
>>> xaxis <= .02
array([ True,  True,  True, False], dtype=bool) 
```

当您想`and`使用其他东西或在布尔上下文中使用它时，问题就开始了：

```
>>> xaxis <= .02 and True
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ValueError: The truth value of an array with more than one element is ambiguous. Use a.any() or a.all()

>>> bool(xaxis <= .02)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ValueError: The truth value of an array with more than one element is ambiguous. Use a.any() or a.all() 
```

这就是您在`TentMap`. 你确定你不需要使用`a`你正在使用的地方`x`吗？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-10T02:40:35.187

您可以使用标量值和数组`np.vectorize`来解决此错误。`and`电话看起来像

```
np.vectorize(TentMap)(a,xaxis) 
```

# ruby-on-rails - Ruby 文件 IO - 分配内存失败

> ID：13793673
> 
> 赞同：1
> 
> 时间：2012-12-10T01:09:05.923
> 
> 标签：ruby-on-rails, ruby, rhomobile, rhodes

下面是一种将记录插入设备数据库的方法。我遇到了“分配内存失败”错误的问题。

它在内存非常有限的 Windows Mobile 设备上运行。

有 10 个模型，其中一个相当大，有 108,000 条记录。

执行此行时会发生错误（f.readlines().each do |line|），但它发生在已插入最大模型之后。

遍历行的块是否没有释放内存？还是有其他事情发生？

对此事的任何帮助将不胜感激！

```
def insertRecordsIntoRhom(models)
     updateAmount = 45 / models.length

     GC.enable

     models.each_with_index do |model,i|
        csvColumns = Array.new

        db = ::Rho::RHO.get_src_db(model)
        db.start_transaction
        begin 
           j=0          

           f = File.new("#{model}.csv")
           f.readlines().each do |line|

              #extract columns from header line of csv
              if j==0
                 csvColumns = getCsvFieldFromHeader(line)
                 j+=1
                 next
              end 

              eval(models[i] + ".create(#{csvPutIntoHash(line,csvColumns)})")

           end

           f.close
           db.commit
        rescue
           db.rollback
        end
     end
 end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T20:31:01.713

`IO#readlines`返回一个数组，即它读取整个文件并返回所有行的列表。在您完全完成对该列表的迭代之前，不会对任何行进行垃圾收集。

由于您一次只需要一行，因此您应该使用[`IO#each_line`](http://www.ruby-doc.org/core-1.9.3/IO.html#method-i-each_line)。这将一次只读取一点点，并逐行传递给您。完成一行后，可以在处理文件的其余部分时对其进行垃圾收集。

最后，请注意 Ruby 捆绑了一个很好的[CSV 库](http://ruby-doc.org/stdlib-1.9.2/libdoc/csv/rdoc/CSV.html)，如果可以的话，您可能想使用它而不是自己动手。

# ruby - 无法使用 Chef 为 RVM gemset 安装 gem

> ID：13793676
> 
> 赞同：1
> 
> 时间：2012-12-10T01:09:46.023
> 
> 标签：ruby, gem, rvm, chef-infra

我只是想为 nginx 安装乘客，但安装乘客 gem 失败。这是我的食谱中的内容：

```
rvm_gem "passenger" do
  ruby_string "ruby-1.9.3-p194@env"
  action      :install
end

# install nginx for rails
execute "passenger_module1" do
  user "#{node[:user][:name]}"
  environment ({'HOME' => "/home/#{node[:user][:name]}"})
  command "rvmsudo passenger-install-nginx-module --auto | bash"
  action :run
end 
```

这是错误消息：

```
[2012-12-10T01:05:52+00:00] FATAL: Mixlib::ShellOut::ShellCommandFailed: rvm_gem[passenger] (main::default line 127) had an error: Mixlib::ShellOut::ShellCommandFailed: Expected process to exit with [0], but received '1'
---- Begin output of bash -c "source /etc/profile.d/rvm.sh && rvm version | cut -d ' ' -f 2" ----
STDOUT: 
STDERR: bash: /etc/profile.d/rvm.sh: No such file or directory
---- End output of bash -c "source /etc/profile.d/rvm.sh && rvm version | cut -d ' ' -f 2" ----
Ran bash -c "source /etc/profile.d/rvm.sh && rvm version | cut -d ' ' -f 2" returned 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T05:57:34.597

我没有看到您的厨师食谱片段有任何问题。错误消息表明在 shell 中执行 rvm 失败，因为 /etc/profile.d/rvm.sh 不存在。

这让我觉得你可能没有在这个节点上安装 rvm。您是否在节点上安装了 rvm？

如果你这样做了，你这样做的方式是否可以立即在你的 Chef 运行中使用？

# android - 你好世界安卓教程

> ID：13793679
> 
> 赞同：1
> 
> 时间：2012-12-10T01:10:15.133
> 
> 标签：android

我正在通过模拟器（使用 Eclipse）成功运行 Hello World 应用程序。我已经遵循了 android 网站的每一步。该应用程序运行并让我选择输入字符串并单击发送。不幸的是，当我点击发送时，什么也没有发生。我已经通过教程完成了这个应用程序，并且我尝试将消息设置为代码中的某些内容，但没有成功。我最好的猜测是 DisplayMessageActivity.java 没有运行，因为我尝试给要显示的消息一个预设的字符串，但没有成功。我知道这是一个相当模糊的问题，但我似乎找不到解决这个问题的下一步，因此这个问题。谢谢！如果您需要查看任何其他代码，请告诉我；这是我的 MainActivity.java 代码：

```
package com.example.myfirstapp;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.EditText;

public class MainActivity extends Activity {

    public final static String EXTRA_MESSAGE = "com.example.myfirstapp.MESSAGE";

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

//    @Override
//    public boolean onCreateOptionsMenu(Menu menu) {
//        // Inflate the menu; this adds items to the action bar if it is present.
//        getMenuInflater().inflate(R.menu.activity_main, menu);
//        return true;
//    }

    //** Called when the user clicks the Send button *
    public void sendMessage(View view){
        //Do something in response to the button
        Intent intent = new Intent(this, DisplayMessageActivity.class);
        EditText editText = (EditText) findViewById(R.id.edit_message);
        String message = editText.getText().toString();
        intent.putExtra(EXTRA_MESSAGE, message);
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T01:11:20.973

您需要`startActivity (intent);`从您的`sendMessage()`. 把它放在右括号之前。

# ruby-on-rails - Rails：Titlecase 仅将 f.label 中的第一个单词大写

> ID：13793681
> 
> 赞同：25
> 
> 时间：2012-12-10T01:10:22.120
> 
> 标签：ruby-on-rails, string

第一行代码做我想要的，第二行只大写第一个单词：

```
<%= the_label = "Time_Balance".titlecase %><br />
<%= f.label "Time_Balance".titlecase %><br /> 
```

我想对输入标签进行标题化，但我无法管理它。

这也不起作用：

```
<%= the_label = "Time_Balance".titlecase %><br />
<%= f.label the_label %><br /> 
```

这也不是：

```
<%= the_label = "Time_Balance" %><br />
<%= f.label the_label.titlecase %><br /> 
```

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-12-10T01:17:21.337

尝试这个。

```
<%= f.label :time_balance, "Time Balance" %> <br /> 
```

Label 期望第一个参数是表单所针对的对象上的 method_name，并且默认只使用它，除非您明确指定它作为第二个参数的一部分，即内容/选项。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-11-24T18:08:58.583

由于我的代表，我无法发表评论。要回答 webaholik 的问题，您可以在这种情况下使用 label_tag ：

```
<%= label_tag :time_balance, "Time Balance" %> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-26T04:32:58.510

**F！如果我不能使用“f”怎么办？?**

..例如不引用有效属性的二级过滤器

```
<%= label :time_balance, "Time Balance" %> <br /> 
```

# functional-programming - 如何在 scheme/lisp 中分解这样的列表？

> ID：13793682
> 
> 赞同：1
> 
> 时间：2012-12-10T01:10:24.083
> 
> 标签：functional-programming, lisp, scheme

输入1：

```
(decompose '(* 1 2 3 4)) 
```

输出1：

```
'(* 1 (* 2 (* 3 4))) 
```

输入2

```
(decompose '(+ 1 2 3 (* 5 6 7))) 
```

输出2

```
'(+ 1 (+ 2 (+ 3 (* 5 (* 6 7))))) 
```

有人对此有想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T01:32:51.457

与评估它的方式相同，但不是输出结果，而是简单地输出将使用的表达式。

这是我的实现，在 Racket 上进行了测试：

```
(define (decompose expr)
  (define (expand x)
    (if (list? x)
        (decompose x)
        x))
  (define oper (car expr))
  (let next ((args (map expand (cdr expr))))
    (if (<= (length args) 2)
        (cons oper args)
        (list oper (car args) (next (cdr args)))))) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T03:30:07.670

我看到您发布了自己的解决方案，所以我想可以显示我的完整答案。这是另一种可能的实现，作为相互递归的一对过程。我喜欢这个解决方案不需要使用`length`or `list?`（这可能需要对列表进行不必要的遍历），并且只使用基本函数（不需要`foldr`、`reverse`或`map`任何其他高阶过程）。

```
(define (decompose lst)
  (if (or (null? lst)                     ; if the list is empty
          (null? (cdr lst))               ; or has only one element
          (null? (cddr lst)))             ; or has only two elements
      lst                                 ; then just return the list
      (process (car lst)                  ; else process car of list (operator)
               (cdr lst))))               ; together with cdr of list (operands)

(define (process op lst)
  (cond ((null? (cdr lst))                ; if there's only one element left
         (if (not (pair? (car lst)))      ; if the element is not a list
             (car lst)                    ; then return that element
             (decompose (car lst))))      ; else decompose that element
        ((not (pair? (car lst)))          ; if current element is not a list
         (list op                         ; build a list with operator,
               (car lst)                  ; current element,
               (process op (cdr lst))))   ; process rest of list
        (else                             ; else current element is a list
         (list op                         ; build a list with operator,
               (decompose (car lst))      ; decompose current element,
               (process op (cdr lst)))))) ; process rest of list 
```

它适用于您的示例，然后是一些：

```
(decompose '(* 1 2 3 4))
=> '(* 1 (* 2 (* 3 4)))

(decompose '(+ 1 2 3 (* 5 6 7)))
=> '(+ 1 (+ 2 (+ 3 (* 5 (* 6 7)))))

(decompose '(+ 1 (* 4 5 6) 2 3))
=> '(+ 1 (+ (* 4 (* 5 6)) (+ 2 3)))

(decompose '(+ 1 2 3 (* 5 6 7) 8))
=> '(+ 1 (+ 2 (+ 3 (+ (* 5 (* 6 7)) 8))))

(decompose '(+ 1 2 3 (* 5 6 7) (* 8 9 10) (* 11 12 (- 1))))
=> '(+ 1 (+ 2 (+ 3 (+ (* 5 (* 6 7)) (+ (* 8 (* 9 10)) (* 11 (* 12 (- 1)))))))) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T01:53:53.167

修改自`Chris Jester-Young`的解决方案：

```
(define (decompose x)
  (if (pair? x)
      (let ((operator (car x))
            (expanded-x (map decompose x)))
        (let decompose-helper ((operands (cdr expanded-x)))
          (if (<= (length operands) 2)
              (cons operator operands)
              (list operator (car operands) (decompose-helper (cdr operands))))))
      x)) 
```

# android - Android，下载数据和 SQLite

> ID：13793690
> 
> 赞同：0
> 
> 时间：2012-12-10T01:11:37.417
> 
> 标签：android, sqlite

我正在制作一个应用程序，它必须下载一些数据，解析它并将其存储在 SQLite 数据库中。但是，我遇到了一个问题，即每次启动应用程序时都会执行下载任务（异步任务）并不断将重复数据附加到数据库中，因此我获得了相同数据的多个实例。

如果数据库中有值，我只想执行下载任务，但如果服务器上的数据文件更新，我仍然希望能够运行下载任务。

除了检查表中的行数是否大于 0，我该怎么做？我不确定要搜索什么。任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T01:22:12.443

每个覆盖面都应该有一个唯一的 ID。
加载数据时，检查唯一 ID 是否在数据库中，
如果存在则更新行。
如果它不存在添加它（追加）。
如果您控制网站中的数据库，则可以在数据库更新时放置一个您更新的标志。因此，在读取数据之前，请检查您的标志。如果更新加载新数据并将新数据附加到数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T01:21:56.870

对于应用程序的本地部分：如果对该数据库的查询返回多行，您可以根据需要轻松更新数据。这很容易使用游标并在执行查询后获取其计数。如果您不想重复，请在确保下载任务已从远程源检索数据后删除数据库。这样一来，您将不会有重复项，并且您将确保在出现问题时不会意外删除数据库。

对于远程源：您可以启用推送通知并在数据库中发生更改后发送通知。因此，通过发送通知，您可以触发一个服务，该服务将下载新数据并正确解析它。

# python - 你能创建一个函数，在 Python 中为你创建一个类的多个实例吗？

> ID：13793694
> 
> 赞同：2
> 
> 时间：2012-12-10T01:12:11.300
> 
> 标签：python, oop, class, automation, instance

我正在尝试用 python 找出一些 OOP 的东西，但遇到了一些问题。我正在尝试制作一个“游戏”，让玩家在房间网格中走动，每个房间都是 Room 类的实例。如果我想制作一个大网格，实例化每个房间会很痛苦，因为我可能不得不为 64 个不同的房间输入相同的重复坐标模式，所以我想制作一个可以为我做的函数，我我在弄清楚如何做时遇到了问题。这是我的代码：

```
class Room(object):

    def __init__(self, x, y):
        self.x = x
        self.y = y

def generate_rooms():

    names = [a,b,c,d]
    locations = [[1,1],[1,2],[2,1],[2,2]] #this line could be a few for loops

    for x in range(0,4):
        names[x] = Room(locations[x][0],locations[x][1]) 
```

这个想法是，这将创建 4 个名为 a、b、c 和 d 的房间，其坐标在位置中指定。Python 不允许我这样做，因为没有定义 a、b、c 和 d。在我尝试过的任何实现中，我都遇到了命名实例需要使用变量名来完成的问题，而且我不知道如何动态生成这些实例。

我进行了很多搜索，但它似乎并不是人们真正想要做的事情，这让我感到困惑，因为在这种情况下它似乎真的很有意义。

非常感谢有关如何解决此问题或如何以更好的方式完成此任务的任何帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T01:23:07.227

你很亲近！通常的方法是使用字典，并使用您想要的名称作为字典键。例如：

```
>>> class Room(object):
...     def __init__(self, x, y):
...         self.x = x
...         self.y = y
...         
>>> rooms = {}
>>> names = ['a', 'b', 'c', 'd']
>>> locations = [[1,1], [1,2], [2,1], [2,2]]
>>> for name, loc in zip(names, locations):
...     rooms[name] = Room(*loc)
...     
>>> rooms
{'a': <__main__.Room object at 0x8a0030c>, 'c': <__main__.Room object at 0x89b01cc>, 'b': <__main__.Room object at 0x89b074c>, 'd': <__main__.Room object at 0x89b02ec>}
>>> rooms['c']
<__main__.Room object at 0x89b01cc>
>>> rooms['c'].x
2
>>> rooms['c'].y
1 
```

这样，您可以通过多种方式迭代房间，例如：

```
>>> for roomname, room in rooms.items():
...     print roomname, room.x, room.y
...     
a 1 1
c 2 1
b 1 2
d 2 2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T01:32:25.110

一些想法：

也许在 Room 类中有一个名称字段是有意义的？

a = Room(1,1) 有什么问题？您可以稍后将 a 存储在数组中。即在实例化房间后声明数组。

为什么你完全关心命名？Python 不在乎。

自动实例化很简单，通常使用循环和数组来完成。编写修改/创建程序的程序被称为*元编程*，并*非易事*。

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T01:35:50.673

以下只是微小的变化：

```
class Room(object):
    def __init__(self, x, y):
        self.x = x
        self.y = y

def generate_rooms():
    names = [a,b,c,d]        // <-- this line goes crazy, since a,b,c,d is not defined yet
    locations = [[1,1],[1,2],[2,1],[2,2]] 

    for x in range(0,4):     // <-- this part can be improved
        names[x] = Room(locations[x][0],locations[x][1])

    // no return here? then what to generate?

def new_generate_rooms():
    locations = [[1,1],[1,2],[2,1],[2,2]]
    rooms = [Room(loc[0], loc[1]) for loc in locations]
    return rooms

def main():
    rooms = new_generate_rooms()
    for i,room in enumerate(rooms):
        print str(i)+'-th room: ', room.x, room.y 
```

我觉得你可能需要学习更多的 Python 语法和习语。保佑。

# xml - 在 go 中将数组编组为单个 xml 元素

> ID：13793698
> 
> 赞同：2
> 
> 时间：2012-12-10T01:12:42.343
> 
> 标签：xml, go, marshalling

我正在通过编写一个以[Collada](http://en.wikipedia.org/wiki/COLLADA)格式生成文件的程序来学习 Go，该文件使用 XML 描述几何。

你注释你的结构，几乎所有的东西都像你期望的那样工作，除了我不知道如何将数组编组到一个 XML 元素中——我总是最终生成 N 个元素。

换句话说，我想

```
<input>
    <p>0 1 2</p>
</input> 
```

代替

```
<input>
    <p>0</p>
    <p>1</p>
    <p>2</p>
</input> 
```

代码如下

```
package main

import (
    "encoding/xml"
    "os"
)

func main() {
    type Vert struct {
        XMLName xml.Name    `xml:"input"`
        Indices     []int   `xml:"p"`
    }

    v := &Vert{Indices:[]int{0, 1, 2}}
    output, err := xml.MarshalIndent(v, "", "    ")
    if err == nil {
        os.Stdout.Write(output)
    }
} 
```

[encoding/xml/marshal.go](http://golang.org/src/pkg/encoding/xml/marshal.go)中的各种注释（和代码）似乎暗示我不走运：

> // Marshal 通过编组每个元素来处理数组或切片。
> // 切片和数组遍历元素。它们没有封闭标签。

奇怪的是，如果我将数组类型更改为 uint8，则根本不会对数组进行编组。

如果我不走运，我可能会使用 xml:",innerxml" 注释自己替换数组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T06:13:18.940

正如您所猜测的，encoding/xml 将无法立即执行此操作。你可以这样做：

```
import (
    "strconv"
    "strings"
)

type Vert struct {
    P string `xml:"p"`
}

func (v *Vert) SetIndices(indices []int) {
    s := make([]string, len(indices))
    for i := range indices {
        s[i] = strconv.FormatInt(int64(indices[i]), 10)
    }
    v.P = strings.Join(s, " ")
} 
```

**编辑：**我最初写了一个 getter 而不是 setter。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T05:02:39.377

最后，我通过将类型更改为`string`并使用`innerxml`属性，对这种类型的数组进行了自己的 xml 编组。

```
package main

import (
    "encoding/xml"
    "os"
    "fmt"
    "bytes"
)

func MyMarshalArray(indices []int) string {
    var buffer bytes.Buffer

    buffer.WriteString("<p>")
    for i := 0; i < len(indices); i++ {
        buffer.WriteString(fmt.Sprintf("%v ", indices[i]))
    }
    buffer.WriteString("</p>")
    return buffer.String()
}

func main() {
    type Vert struct {
        XMLName xml.Name    `xml:"input"`
        Indices     string  `xml:",innerxml"`
    }

    v := &Vert{Indices:MyMarshalArray([]int{0, 1, 2})}
    output, err := xml.MarshalIndent(v, "", "    ")
    if err == nil {
        os.Stdout.Write(output)
    }
} 
```

# codeigniter - 如何使用 codeigniter 设置电子邮件管道？

> ID：13793700
> 
> 赞同：3
> 
> 时间：2012-12-10T01:13:00.857
> 
> 标签：codeigniter

我已经通过 cPanel 将传入的电子邮件重定向到下面的 php 脚本。目前它只是发送一封电子邮件回复，以便我可以测试我是否拥有正确的信息，一旦我确认我将开始添加到数据库。

我需要知道的是如何使用 codeigniter 来做到这一点？

另外，我会将电子邮件重定向到 cPanel 中的哪个位置，例如在它们转到 public_html/email/parse.php 的那一刻，我将如何将它们重定向到 codeigniter 中的控制器？

我尝试将此代码放入控制器中，但电子邮件会退回。

```
#!/usr/bin/php -q
<?php
// get contents of email and add to $email
$email = file_get_contents('php://stdin');

// regular expression to get parts of email that I need
preg_match_all("/(To):\s(.*)\n/i", $email, $to);
preg_match_all("/(Subject):\s(.*)\n/i", $email, $subject);
preg_match_all("/(From):\s(.*)\n/i", $email, $from);

// assign parts of email to variables
$sender = $to[2][0];
$sender = trim($sender, ' " ');

$sender_id  = explode('@', $sender);
$sender_id  = $sender_id[0];

$subject = $subject[2][0];

$from = $from[2][0];

// make a reply email to test the above works
$reply = "Here's your information!\n\nSender: $sender\nSender ID: $sender_id\nFrom:            $from\nSubject: $subject";

// send email to test
mail($from, 'From my email pipe!', $reply, 'From:noreply@mydomain.me');
?> 
```

# django - 为什么我的图像上传在 django 中失败？

> ID：13793701
> 
> 赞同：0
> 
> 时间：2012-12-10T01:13:51.970
> 
> 标签：django, django-admin, django-uploads

我正在尝试构建一个 django 应用程序并将其托管在 webfaction 上。

我的模型如下所示：

```
class Post(models.Model):
    title = models.CharField(max_length=512)
    image = models.ImageField(upload_to='blogImages/')
    body = models.TextField()
    visible = models.BooleanField()
    date_created = models.DateTimeField(auto_now_add=True)
    date_updated = models.DateTimeField(auto_now=True)
    tags = models.ManyToManyField('Tag', null=True, blank=True)

    def __unicode__(self):
        return self.title 
```

设置如下所示：

```
MEDIA_ROOT = '/home/myself/webapps/dev_static/media/'
MEDIA_URL = 'http://dev.example.com/static/media/'
STATIC_ROOT = '/home/myself/webapps/dev_static/'
STATIC_URL = 'http://dev.example.com/static/' 
```

当我转到我的服务器并尝试上传图像时，我收到此错误：

```
SuspiciousOperation at /admin/blog/post/add/
Attempted access to '/home/myself/wrong/path/appname/blogImages/Portal2-Logo.jpg' denied. 
```

我试图找出错误的路径可能来自哪里。我还应该在哪里寻找错误的路径？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T01:20:31.830

我有同样的问题，解决了

```
 image = models.ImageField(upload_to='/blogImages/') 
```

代替`(upload_to='blogImages/')`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T01:25:07.257

错误是返回旧的静态媒体路径。在我重新启动 Apache 后，它开始使用正确的路径正常工作。

# objective-c - 呈现 UIModalPresentationFormSheet，但显示为 UIModalPresnetationPageSheet

> ID：13793708
> 
> 赞同：1
> 
> 时间：2012-12-10T01:15:06.580
> 
> 标签：objective-c, ipad

我一直在谷歌搜索这个问题是什么两个多小时无济于事。

我正在尝试做的是将“演练”作为表单呈现在屏幕上。modalPresentationStyle 值在整个层次结构中设置正确，但“演练”显示为页面表。

SYNavigationController 只是将 -shouldAutoRotate 和 -supportedInterfaceOrientation 转发到 topViewController。

有谁知道为什么会发生这种情况？我已经包含了下面的代码。

```
NSString *storyboardName = @"MainStoryboard_iPhone";
if(UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad) storyboardName = @"MainStoryboard_iPad";

UIStoryboard *storyBoard = [UIStoryboard storyboardWithName:storyboardName bundle:nil];

SYNavigationController *walkThrough = [storyBoard instantiateViewControllerWithIdentifier:@"walkthroughNav"];
walkThrough.modalPresentationStyle = UIModalPresentationFormSheet;

WalkThroughViewController *wtvc = (WalkThroughViewController *)walkThrough.topViewController;
wtvc.showSignIn = YES;

[self presentViewController:walkThrough animated:NO completion:nil]; 
```

# javascript - Node.js 中的可变变量

> ID：13793709
> 
> 赞同：0
> 
> 时间：2012-12-10T01:15:11.103
> 
> 标签：javascript, json, node.js, express, geojson

如果这是一个完全愚蠢的问题，请原谅我，但我就是想不通。

### 背景信息

我正在使用 Express 框架在 Node.js 中编写一个应用程序。我有一个 URI 映射，旨在分析某些聚合单元中给定主题的一些 Twitter 数据，并将包含这些结果的 GeoJSON 对象返回给客户端。

以下是有关数据的一些详细信息。

*   聚合单元（美国的州）存储为 GeoJSON 文件中的点，通过`require`调用加载。这些点稍后将用于在 Leaflet 地图中制作标记。
*   推文存储在 MongoDB 数据库中，使用`mongodb`驱动程序访问。

这是更改这些 GeoJSON 点的过程

*   加载 GeoJSON`require`
*   查询 MongoDB 数据库以获取适当的推文
*   迭代 GeoJSON 文件中的特征
    *   遍历结果集中的推文
        *   如果推文来自该功能
            *   分析内心的情绪
            *   使用情绪对特征进行分类
            *   设置`marker.properties.class`为分类
*   将更改后的 GeoJSON 写入响应

### 问题

所以这是我的问题，我加载的 GeoJSON`require`永远不会改变。

### 问题

是否通过调用`require`mutable 加载数据？如果没有，是否有一种简单的方法可以使其可变，我的意思是比[复制对象](https://stackoverflow.com/questions/728360/copying-an-object-in-javascript)更简单？

### 奖金问题

有谁知道`console.log()`当 Node 服务器使用 Express 框架运行时为什么不工作？我发誓以前是这样的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T17:43:09.137

模块可以从缓存中删除。你只需要这样做：

`delete require.cache[moduleName];`

无论如何，这不是最好的方法。

导出构造函数并在需要时实例化新对象要好得多。例如：

```
//in geo.js
function Geo() {...}
module.exports = Geo;

//in another module
var Geo = require('./geo.js');
var geo = new Geo(); 
```

# java - 这会降低帧率吗？

> ID：13793714
> 
> 赞同：0
> 
> 时间：2012-12-10T01:16:25.927
> 
> 标签：java, timing, frame-rate

我正在制作一个游戏，要求是让它至少有 30FPS 并且不应该低于。我下面的内容会实现这一目标吗？还是我不在某个地方？很多帮助将不胜感激。

```
private long period = 6 * 1000000;
private static final int DELAYS_BEFORE_YIELD = 5;
long before, after, difference, sleep, oversleep = 0;
int delays = 0;
while (running)
{
    before = System.nanoTime();
    after = System.nanoTime();
    difference = after - before;
        if (sleep < period && sleep > 0)
    {
    try
    {
        Thread.sleep(sleep / 35000L);
        oversleep = 0;
    }
    catch (InterruptedException e)
    {

    }
    }
    else if (difference > period)
    {
    oversleep = difference - period;
    }
    else if (++delays >= DELAYS_BEFORE_YIELD)
    {
    Thread.yield();
    oversleep = 0;
    delays = 0;
    }
    else
    {
    oversleep = 0;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T01:29:26.310

您可以设置帧速率的上限，但不能设置保证始终遵循的下限。

你可以让一个函数每秒被调用不超过 30 次，但你不能确定它每秒被调用至少 30 次。在 30 fps 时，你有 0.03 秒的时间将分配在你的线程之间，通常绘图是它们之间最重的（除非你有像 AI 或其他复杂的操作，但应该通过降低它们的速率或预先计算可以解决的问题预先计算）。

如果`time of draw + time of logic > 0.03`那样的话，就没有办法让你的游戏至少以 30fps 的速度运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T01:24:44.883

很好，你早点问，因为我认为最好使用计时器。这把事情从里到外。（不过也可以按照你的方式进行。）

很抱歉这个没有答案，但我认为这是一个有价值的建议。

为他们的方法研究一些游戏/动画框架。

# jquery - 引导图像更改大小

> ID：13793715
> 
> 赞同：0
> 
> 时间：2012-12-10T01:16:35.427
> 
> 标签：jquery, html, twitter-bootstrap

我正在使用 twitter bootstrap 2.2.2，似乎我在“英雄”div 中的图像在页面加载时完美调整大小，然后由于某种原因做出反应并扩展为大于 div 并被切断。

请参阅此处的页面：[http ://www.thelocalgolfer.com/mobile/index2.php](http://www.thelocalgolfer.com/mobile/index2.php)

请注意，我使用 jquery 插件来显示每个状态的工具提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T05:23:17.987

问题是：跨度 5 中的这个 div 的高度为 298 像素，宽度为 454 像素。画布在这个 div 里面，高度为 328px，宽度为 500px。

所以发生的事情是，画布在 div 之后加载，所以它给你缩放效果。

解决方案：使两者的高度和宽度相同，所以它会很好地工作。

# ajax - 有什么方法可以将 Javascript 从 NodeJS 服务器推送到客户端进行更新？

> ID：13793716
> 
> 赞同：0
> 
> 时间：2012-12-10T01:16:38.767
> 
> 标签：ajax, node.js, comet

在 Scala 的 Liftweb 中，有一些类允许在页面加载后通过 comet/ajax 将 Javascript 推送到浏览器。[这里有一些文档](http://exploring.liftweb.net/master/index-10.html)。

例如，当有人向服务器提交表单时，表单将通过 AJAX 提交，然后一些 Javascript 可以从服务器发送到客户端以显示一些错误消息。好吧，这只是举例，有更好的方法来进行表单验证。

有没有办法将 Javascript 从 NodeJS 服务器推送到客户端进行更新？有什么标准方法可以做到这一点？我为什么要这样做是因为将所有客户端和服务器代码都放在一个服务器文件中会更好。

另外作为次要问题，我可以从服务器端访问页面数据吗？如果能够从服务器端查询页面元素或从服务器端查询一些页面数据，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T01:31:28.613

您可以将此功能构建到 socket.io 中，既可以通过基于双向发送的动态对象预定义函数，也可以构建一个从双方解析和运行 javascript 的系统。根据您要执行的操作，可能需要一段时间才能安全地为您工作（不仅仅是将所有内容都放入 eval() 中）；

[http://socket.io/](http://socket.io/)

或者，有一个基于 node.js 的库，它内置了这个功能。我没有亲自使用它，所以我无法证明系统的可靠性或安全性，但它应该是一个很好的起点。

[http://www.nowjs.com/](http://www.nowjs.com/)
[https://github.com/Flotype/now](https://github.com/Flotype/now)

希望这可以帮助！

# javascript - 如何修复此 jquery 函数以在 IE 中工作？

> ID：13793717
> 
> 赞同：1
> 
> 时间：2012-12-10T01:16:56.923
> 
> 标签：javascript, jquery, internet-explorer, cross-browser

我对 Javascript 比较陌生，但设法让这段代码在 chrome、firefox、safari 上工作，但在 IE 上不能正常工作。首先看看这段代码，然后我会解释什么似乎不起作用：

```
<!doctype html>
<html>
    <head>
        <meta charset="UTF-8">
        <link rel="stylesheet" type="text/css" href="http://www.domain.com/test/wtf.css" />
        <script type="text/javascript" src="/js/jquery-1.7.2.min.js"></script>
        <script type="text/javascript">
            $(function () {
                var transition = 'slow';
                var target1 = $('#flash1');
                var target2 = $('#flash2');
                var target3 = $('#box2');
                var target4 = $('#tble');
                var target5 = $('.links');
                var target6 = $('#wording');
                target1.delay(1000).fadeIn();
                target2.delay(2000).fadeIn();
                target3.delay(3000).fadeIn();
                target4.delay(4000).fadeIn();
                target5.delay(5000).fadeIn();
                target6.delay(6000).fadeIn();
            });
        </script>
        <script type="text/javascript">
            $(document).ready(function () {
                $("#this_is_button").click(function () {
                    $("#box2").hide();
                    $("#tble").hide();
                    $(".links").hide();
                    $("#second_pls").show();
                    $("#box2").css("background", "black");
                })
            });
        </script>
        <script type="text/javascript">
            $(document).ready(function () {
                $("#what_close").click(function () {
                    $("#second_pls").hide();
                    $("#tble").show();
                    $(".snap").show();
                    $(".links").show();
                    $("#box").css({
                        backgroundImage: "url('/test/img.jpg')",
                        backgroundSize: "800px"});
                    });
                });
        </script>
    </head>
    <body>
        <div id="box">
            <div id="box2" style="display:none"></div>
            <div id="wording" style="display:none">
                <label id="flash1" style="display:none">Hello</label>
                <label id="flash2" style="display:none">World</label>
            </div>
            <div id="tble" style="display:none">This is a table</div>
            <div id="second_pls" style="display:none">Hello Hello Hello, is this working? come on already?!!
                <input type="button" id="what_close" value="Close">
            </div>
            <div class="links" style="display:none">
                <input type="button" id="this_is_button" value="Sample">
            </div>
        </div>
    </body>
</html> 
```

CSS：

```
 #box {
    background-color: #000000;
    height: 350px;
    margin-left: auto;
    margin-right: auto;
    width: 800px;
 }
 #box2 {
    background-image: url("/test/img.jpg");
    background-size: 800px;
    height: 550px;
    margin-left: auto;
    margin-right: auto;
    width: 800px;
    position: absolute;
}
#wording {
    position: relative;
    color: #999999;
    font-size: 15px;
    letter-spacing: 5px;
    margin-left: 20px;
    padding-top: 30px;     
    }
#tble {
        margin-top: 180px;
        position: absolute;
}
#second_pls {
        margin-left: 10px;
        margin-top: 310px;
        position: absolute;
}
.links {
        margin-left: 10px;
        margin-top: 310px;
        position: absolute;
} 
```

那么在 IE 中呈现页面时似乎不起作用的部分是什么？除了#flash1 和#flash2 工作之外，fadeIn、fadeOut、hide 和 show 部分似乎没有在 IE 中呈现，其余的淡入、淡出不起作用。我正在扯掉我的头发，不明白为什么这两个会起作用，但其余的却不行。

我使用了 BrowserStack，似乎在使用 IE 8 的 Windows XP 上它可以正确渲染，但不能正确渲染背景图像。但是在使用 IE 8 的 Windows 7 上，它的工作方式与在 Windows XP 上的工作方式相同，但是当使用 IE 9 时，它给了我当前的问题。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T01:36:48.507

问题似乎是由不正确的语法引起的：

```
 $("#box").css({
               backgroundImage: "url('/test/img.jpg')",
               backgroundSize: "800px", //<-- extra comma
 }); 
```

[http://jsfiddle.net/bfcZd/3/](http://jsfiddle.net/bfcZd/3/)

对比

[http://jsfiddle.net/bfcZd/4/](http://jsfiddle.net/bfcZd/4/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T01:32:02.343

您应该查看正在工作的两个 div 的 CSS 声明。我怀疑它们可能是 position:relative 或具有其他一些属性，导致它们以不同的方式（正确地）呈现，而其他的则失败。您能否提供您为示例中的 div 设置的 CSS。它将帮助我们更好地排除故障，但没有看到它，这是我的预感。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T19:23:43.603

将此元标记添加到您的`<head></head>`

```
<meta http-equiv="X-UA-Compatible" content="IE=8"> 
```

那么应该工作。

我在这个 jsfiddle 中有它：http: [//jsfiddle.net/Morlock0821/XtyWC/](http://jsfiddle.net/Morlock0821/XtyWC/)

# mysql - 在 MySQL 中更新视图

> ID：13793722
> 
> 赞同：5
> 
> 时间：2012-12-10T01:17:36.240
> 
> 标签：mysql, sql-update, views

我正在创建一个视图来向用户显示他/她的数据，但我也希望用户能够在这些视图中的某些字段中进行更改。视图中所做的更改是否也反映在基表中？

另外，我能否更新由多个基表组成的视图？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-10T02:06:28.117

如[可更新和可插入视图](http://dev.mysql.com/doc/en/view-updatability.html)中所述：

> 一些视图是可更新的。也就是说，您可以在诸如[`UPDATE`](http://dev.mysql.com/doc/en/update.html)、[`DELETE`](http://dev.mysql.com/doc/en/delete.html)、等语句中使用它们[`INSERT`](http://dev.mysql.com/doc/en/insert.html)来更新基础表的内容。要使视图可更新，视图中的行与基础表中的行之间必须存在一对一的关系。还有某些其他构造使视图不可更新。更具体地说，如果视图包含以下任何内容，则它是不可更新的：
> 
> *   聚合函数（[`SUM()`](http://dev.mysql.com/doc/en/group-by-functions.html#function_sum)、[`MIN()`](http://dev.mysql.com/doc/refman/5.5/en/group-by-functions.html#function_min)、[`MAX()`](http://dev.mysql.com/doc/refman/5.5/en/group-by-functions.html#function_max)、[`COUNT()`](http://dev.mysql.com/doc/refman/5.5/en/group-by-functions.html#function_count)等）
>     
>     
> *   `DISTINCT`
>     
>     
> *   `GROUP BY`
>     
>     
> *   `HAVING`
>     
>     
> *   [`UNION`](http://dev.mysql.com/doc/en/union.html)或者[`UNION ALL`](http://dev.mysql.com/doc/en/union.html)
>     
>     
> *   选择列表中的子查询
>     
>     
> *   某些联接（请参阅本节后面的附加联接讨论）
>     
>     
> *   `FROM`子句中的不可更新视图
>     
>     
> *   子句中的子查询`WHERE`引用子句中的`FROM`表
>     
>     
> *   Refers only to literal values (in this case, there is no underlying table to update)
>     
>     
> *   Uses `ALGORITHM = TEMPTABLE` (use of a temporary table always makes a view nonupdatable)
>     
>     
> *   Multiple references to any column of a base table.
>     
>     
> 
> `[ deletia ]`
> 
> It is sometimes possible for a multiple-table view to be updatable, assuming that it can be processed with the `MERGE` algorithm. For this to work, the view must use an inner join (not an outer join or a [`UNION`](http://dev.mysql.com/doc/en/union.html)). Also, only a single table in the view definition can be updated, so the `SET` clause must name only columns from one of the tables in the view. Views that use [`UNION ALL`](http://dev.mysql.com/doc/en/union.html) are not permitted even though they might be theoretically updatable, because the implementation uses temporary tables to process them.

# php - 如何将sql查询结果放入数组？

> ID：13793724
> 
> 赞同：3
> 
> 时间：2012-12-10T01:17:56.937
> 
> 标签：php, mysql

我想将一个 sql 查询结果放入一个数组中。我尝试了下面的代码，但它显示了 $count 次的第一条记录。显然，“$dept[$i]= $row['name'];”有问题。但我不知道如何解决它。有人帮忙吗？

```
$sql="SELECT name FROM system_dept ORDER BY id";
$result=mysql_query($sql);
$row = mysql_fetch_array($result);
$count=mysql_num_rows($result);
if (!mysql_query($sql,$con))
{
    die('Error: ' . mysql_error());
}
else
{
    $dept = array();
    $i=0;

    for($i=0;$i<$count;$i++)
    {
        $dept[$i]= $row['name'];
        echo $dept[$i];
    }
} 
```

好的，我尝试使用 mysqli 但它不起作用。Web 服务器显示： MySQL 客户端版本：4.1.22 PHP 扩展：mysql mysqli 可以在 mysql php 扩展中工作吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T01:39:26.010

当您实际上想要所有行时，为什么只获取一行？

使用 mysqli：

```
$db = new mysqli("localhost", "foo_dbo", "pass", "foo_db");    
$result = $db->query("SELECT name FROM system_dept ORDER BY id");    
$names = $result->fetch_all(MYSQLI_ASSOC); 
```

使用 PDO：

```
$db = new PDO('mysql:dbname=foo_db;dbhost=localhost', 'foo_dbo', 'pass');
$stmt = $db->query("SELECT name FROM system_dept ORDER BY id");
$names = $stmt->fetchAll(PDO::FETCH_ASSOC); 
```

这导致与其他答案相同的结果，但没有循环！它更快！如果你逐行获取，你会更慢，但取决于你做什么，你需要更少的内存。如果您将每一行存储在一个数组中，则情况并非如此。因此，获取所有内容是要走的路。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-10T01:41:37.263

```
$dept = array();
$result = mysql_query('SELECT name FROM system_dept ORDER BY id');
while ($row = mysql_fetch_assoc($result))
{
  $dept[] = $row['name'];
  echo $row['name'];
} 
```

请不要使用`mysql_*`函数来编写新代码。它们不再被维护并且社区已经开始了[弃用过程](http://goo.gl/KJveJ)。看到*[红框](http://goo.gl/GPmFd)*了吗？相反，您应该了解[准备好的语句](http://goo.gl/vn8zQ)并使用[PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli)。如果你不能决定哪个，[这篇文章](http://goo.gl/3gqF9)会帮助你。如果您选择 PDO，[这里有很好的教程](http://goo.gl/vFWnC)。另请参阅[为什么我不应该`mysql`在 PHP 中使用函数？](http://goo.gl/ycnmO)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T01:45:30.853

你只取一行来取更多行你需要再次调用 fetch result 所以只需将它添加到你的代码中，事情应该没问题：

```
for($i=0;$i<$count;$i++)
    {
        $dept[$i]= $row['name'];
        echo $dept[$i];
        $row=mysql_fetch_array($result);
    } 
```

我建议使用 while 循环，如下所示：

```
$sql="SELECT name FROM system_dept ORDER BY id";
$result=mysql_query($sql);
$count=mysql_num_rows($result);
if (!mysql_query($sql,$con))
{
    die('Error: ' . mysql_error());
}
else
{
    $dept = array();
    while($row=mysql_fetch_array($result))
    {
      $dept[]=$row['name'];
      echo $row['name'];
     }
} 
```

如果可能的话，请查看 mysqli 和 PDO，因为它们都更有效

# django - Django：单元测试表单和 KeyError

> ID：13793731
> 
> 赞同：0
> 
> 时间：2012-12-10T01:19:13.833
> 
> 标签：django, forms, unit-testing, email

我正在使用新的自定义用户模型在 django 1.5b 中对注册表单进行单元测试。我想测试我的自定义 clean_email 方法在新用户尝试使用现有电子邮件注册时引发 ValidationError，这是我写的 clean 方法：`

```
def clean_email(self):

    email = self.cleaned_data["email"]
    try:
        user = MyUser.objects.get(email=email)
        raise forms.ValidationError("This email address already exists.")
    except MyUser.DoesNotExist:
        return email 
```

测试代码：

```
def test_clean_email(self):
    data = {'email': 'aaaa@gmail.com'}
    form = MyForm(data)
    actual   = form.errors['email']
    expected = [u'This email address already exists.']
    self.assertEqual(actual, expected) 
```

运行测试后我得到了这个：

```
actual   = form.errors['email']
KeyError: 'email' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T09:18:18.990

You have to call `form.is_valid()` to get `form.errors` to be populated.

# jquery - 如何在我现有的代码/css 中使用淡入淡出 EASING？可能吗？

> ID：13793732
> 
> 赞同：0
> 
> 时间：2012-12-10T01:19:16.687
> 
> 标签：jquery, easing

我以前从未做过缓动，我正在尝试用我现有的代码找出它是否可能。我已经有了 css a:hover。如何在现有代码中使用淡入淡出缓动？

```
#rbox a {height:48px;
         line-height:48px;
         padding-left:17px;
         padding-right:17px;
         float:left;
         color:#FFF;
         background:#c04747;
         font-size:17px
        }

#rbox a:hover {background:#6C6C6C;}

<div id="rbox"> <a href="mtf.com">Meet the Founder</a></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T01:27:13.903

关于 CSS3 缓动，您可能需要注意的一件事是旧浏览器可能不支持它。在这种情况下，您可以尝试使用 jQuery。

同时，这是一个生成 CSS3 缓动规则的好工具。

[http://matthewlein.com/ceaser/](http://matthewlein.com/ceaser/)

如果我理解正确，您的代码可能如下所示：

```
#rbox a:hover
{
    background:#6C6C6C;
    -webkit-transition: all 500ms cubic-bezier(0.420, 0.000, 0.580, 1.000); 
    -moz-transition: all 500ms cubic-bezier(0.420, 0.000, 0.580, 1.000); 
    -ms-transition: all 500ms cubic-bezier(0.420, 0.000, 0.580, 1.000); 
    -o-transition: all 500ms cubic-bezier(0.420, 0.000, 0.580, 1.000); 
    transition: all 500ms cubic-bezier(0.420, 0.000, 0.580, 1.000); /* ease-in-out */
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T01:28:28.753

如果您的意思是 css3 转换，这应该这样做：

```
#rbox a {
  ...
  transition: all .5s ease-in-out;
} 
```

如果您想要支持所有浏览器，请确保添加供应商前缀。

# html - 如何在绝对定位的 div 中居中 div？

> ID：13793734
> 
> 赞同：0
> 
> 时间：2012-12-10T01:19:56.470
> 
> 标签：html, css

我正在使用流畅的布局设计，我希望带有 class 的 div 在`center`带有 class 的 div 内水平居中`outer`。我试过这个，但它不起作用。我究竟做错了什么？

HTML：

```
<div class="outer">
    <div class="inner"> // this div has height=0\. Why?
        <div class="center">
            // stuff
        </div>
    </div>
</div> 
```

CSS：

```
.outer {
    position: absolute;
    left: 0;
    right: 0;
    top: 50px;
    height: auto;
}

.inner {
    width:100%;
}

.center {
    margin:0 auto;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T01:24:52.653

您必须将内部视为`div`页面中的常规内容，例如：

```
#inner {
    position:fixed;
    top: 50%;
    left: 50%;
    width:234px;
    height:90px;
    margin-top:-45px; /*set to a negative number 1/2 of your height*/
    margin-left:-117px; /*set to a negative number 1/2 of your width*/
    border: 0.5px solid #ccc;
} 
```

这样就可以了，您可以相应地进行调整。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T01:34:25.263

对左边距使用百分比，例如：

```
.center
{
width:90%;
margin-left:5%;
} 
```

我使用 5% 的原因是因为中心的宽度是它的容器的 90%，我们还有 10% 的空间，所以要居中你必须把它带到左边可用空间的一半；在这种情况下是 5%

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T01:42:16.870

Inline-block 可能是居中 div 的最佳选择，然后使用我们的外部 div 和 text-align:center 来使内部容器居中。你并不真正需要一个内部和中心 div，但为了举例，我保留了它。下面是一个小提琴链接：

[http://jsfiddle.net/UYw8S/2/](http://jsfiddle.net/UYw8S/2/)

例如，添加了边框和填充。

```
<div class="outer">
    <div class="inner">
        <div class="center">
           Inner stuff
       </div>
   </div>
</div>

.outer {
position: absolute;
left: 0;
right: 0;
top: 50px;
height: auto;
background:#ccc;
border:1px solid #333;
}

.inner {
display:block;
margin:10px;
border:1px solid #333;
text-align:center;
}

.center {
margin:10px 0;
text-align:left;
height:40px;
width:80%;
display:inline-block;
background:#fff;
padding:10px;
} 
```

# c# - C#绘制Graph、界面

> ID：13793735
> 
> 赞同：0
> 
> 时间：2012-12-10T01:19:59.037
> 
> 标签：c#, graph, interface, xna

我正在编写用于生成巨大图形并显示它们的应用程序。首先，我尝试使用带有 sharpGL 的 WPF，但性能很糟糕。然后我尝试了XNA，它更好。但是我缺少界面。我可以尝试在 WinForms 中使用 XNA，但它会降低性能。目前这是我唯一的选择。所以我尝试在 XNA 上绘制图形。现在，我通过图元绘图来解决这个问题，但我对性能不太满意。我在现场画了两张图。首先有 10k 顶点和大约 30k 边，其次有 20k 顶点和 30k 边。我正在画这样的边：

```
 GraphicsDevice.DrawUserPrimitives<VertexPositionColor>(PrimitiveType.LineList, verticesDelanuay, 0, Graph.DelaunayEdges.Count);
    GraphicsDevice.DrawUserPrimitives<VertexPositionColor>(PrimitiveType.LineList, verticesVoronoi, 0, Graph.VoronoiEdges.Count); 
```

但是对于每个顶点，我都想绘制某种正方形。现在，我正在为每个顶点绘制四个三角形。像这样：

```
graphics.GraphicsDevice.DrawUserIndexedPrimitives(PrimitiveType.TriangleList, vertices, 0, vertices.Length, indices, 0, (int)CircleStep, VertexPositionColor.VertexDeclaration); 
```

对于所有这些绘图，我想要一个可以放大、缩小和移动的相机。我通过 basicEffect.View 并传递适当的矩阵来做到这一点。

对于这些数据，我有 10 - 15 fps。这是正常的表现还是我可以做些什么来加快速度？

我想知道绘制这样的东西最快的方法是什么，它是比 WinForm + XNA 更好的方法吗？

# ruby-on-rails - 如何将锚点添加到 redirect_to :back

> ID：13793736
> 
> 赞同：9
> 
> 时间：2012-12-10T01:20:04.333
> 
> 标签：ruby-on-rails, anchor

我有一个博客应用程序，其中包含可以通过`vote`帖子控制器中的操作接收投票的帖子。因为我允许在索引和显示视图中投票，所以我`redirect_to :back`在进行投票后，如下所示。

```
def vote
  # voting logic goes here
  redirect_to :back
end 
```

这会将我重定向到正确的页面，但我想重定向到页面中的特定帖子。为此，我在我的帖子部分 div 中添加了一个识别锚。

```
<div id="post_<%= post.id %>">
  <%= post.content %>
</div> 
```

我如何在我的`redirect_to :back`? 我尝试了以下方法，但不起作用。

```
# this doesn't work!
redirect_to :back, anchor: "post_#{@post.id}" 
```

或者，如果我要对 show 和 index 视图使用 if 子句，我该怎么做？我尝试了以下，它返回`undefined method 'current_page' for VocabsController`.

```
#this doesn't work!
if current_page?(posts_path)
  redirect_to posts_path(anchor: "post_#{@post.id}"
else
  redirect_to @post
end 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-10T08:33:32.227

深入 Rails 重定向机制，`:back`仅意味着重定向到`HTTP_REFERER`环境变量中的任何内容（或者如果此变量中没有任何内容，则引发错误）。因此，`redirect_to :back`在您的控制器中添加此行之前：`env["HTTP_REFERER"] += '#some-id'`，应该这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T02:59:43.800

编辑：好吧，我的错，很困惑。你应该调查一下：

[在rails中定义锚标签的正确方法是什么？](https://stackoverflow.com/questions/2091550/whats-the-right-way-to-define-an-anchor-tag-in-rails)

编辑2：

您遇到的问题是您在控制器内部而不是在视图内部调用助手。

我鼓励你研究这个`view_context`方法

[http://jhonynyc.tumblr.com/post/5361328463/use-view-context-inside-rails-3-controller](http://jhonynyc.tumblr.com/post/5361328463/use-view-context-inside-rails-3-controller)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T19:57:00.593

我最终改用了 Javascript。

post_controller.rb

```
def vote
  @post = Post.find(params[:id])
  #voting logic
  respond_to do |format|
    format.html { redirect_to :back }
    format.js
  end
end 
```

帖子/_post.html.erb

```
<div class="post_partial" id="post_<%= post.id %>">
  <%= post.content %>
  <div id="vote_button_<%= post.id %>">
    <%= link_to "up", vote_path, method: "post", remote: true %>
  </div>
</div> 
```

帖子/投票.js.erb

```
$('#post_<%= @post.id %>').html('<%= j render @post %>'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-09-10T22:27:54.120

在引擎盖下，当出现问题时，`redirect_back(fallback_location: 'some_path')`redirects_to`request.referrer`并回退到“some_path”。

不幸的是，它没有提供锚点。您可以通过编写一个简单的私有方法来模拟它来解决这个问题。

```
def back_with_anchor(anchor: '')
  "#{request.referrer}##{anchor}"
end 
```

然后，您可以在需要的地方执行此操作。

```
redirect_to back_with_anchor anchor: @record.id 
```

# iphone - iOS：在主线程以外的线程中调用 UIApplication 的方法是否安全？

> ID：13793742
> 
> 赞同：6
> 
> 时间：2012-12-10T01:20:31.753
> 
> 标签：iphone, ios, uiapplication

有人说必须在主线程中使用 UIApplication ，但我没有在 Apple 的文档中看到这一点。那么有人可以告诉我在单独的线程中使用 UIApplication 是否安全吗？如果它不安全，这在哪里记录？

**编辑：** 我专注于那些操纵本地通知的方法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T02:15:02.003

大多数 UIKit 类都不是线程安全的。这已在 WWDC 等上详细讨论过，但没有很好的记录。我能找到的最好的是[TN2109](http://developer.apple.com/library/ios/#technotes/tn2109/_index.html)，它反复讨论了如何不允许从辅助线程调用 UIKit。

请注意，此规则有许多记录在案的例外情况。例如，UIApplication 上的[beginBackgroundTaskWithExpirationHandler](https://developer.apple.com/documentation/uikit/uiapplication/1623031-beginbackgroundtask)和相关方法被明确标记为可以安全地从非主线程调用。（这也意味着 UIApplication 的其他方法从其他线程调用是*不安全*的，因为这些是专门调用的。）

此规则也有其他例外，主要涉及绘图（UIImage 和 UIColor 实例是线程安全的，至少从[iOS 4开始）。](http://developer.apple.com/library/ios/#releasenotes/General/WhatsNewIniPhoneOS/Articles/iPhoneOS4.html#//apple_ref/doc/uid/TP40009559-SW29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T01:50:28.953

UIApplication 是 UIResponder 的子类，是 UIKit 框架的一部分。所以我猜它不是线程安全的，因为据记载 UIKit 类不是线程安全的。

它还具有诸如 setStatusBarOrientation:animated: 之类的方法，它们都是基于 UI 的，并且绝对不能在主线程之外的另一个线程中调用。

# fabricjs - 如何使用自定义属性自定义织物画布

> ID：13793746
> 
> 赞同：2
> 
> 时间：2012-12-10T01:21:04.577
> 
> 标签：fabricjs

大家早上好，我有一个问题，我想将一组织物 json 数据传递给服务器，并在一段时间后将其加载回来，因为我必须从多页 pdf 的画布中加载详细信息。它还必须传递画布名称。

这里的问题是如果我使用 JSON.stringify(mycanvas); 它不会将我的自定义属性转换为 json 数据。所以我必须做一些事情，比如从织物画布继承来扩展属性。

我发现了一些有用的东西，比如创建自定义文本、自定义图像，我尝试了一些类似的东西，但它不起作用。请帮助我。

我的代码：创建这种自定义画布的代码

```
 //////////////////////////////////////////////////////////////
create CustomCanvas class from Text class
fabric.CustomCanvas = fabric.util.createClass(fabric.Canvas, {
type: 'custom-canvas',
initialize: function(element, options) {
    this.callSuper('initialize', element, options);
    options && this.set('canvasname', options.canvasname);
},
toObject: function() {
    return fabric.util.object.extend(this.callSuper('toObject'), 
{canvasname: this.canvasname});
}
});    
fabric.CustomText.fromObject = function(object) {
return new fabric.canvasname(object`enter code here`);
};
fabric.canvasname.async = false;`enter code here` 
```

///////////////////////////////////////// ////////////

//并创建一个新的自定义画布

```
var canvas = new fabric.CustomCanvas();
        canvas.setBackgroundImage(src, function() { 
 canvas.renderAll();
});
canvas.canvasname=1111; 
```

如果有人可以帮助我，我将不胜感激。

# google-apps-script - Google Apps Script 上是否有 GViz 的替代品？

> ID：13793747
> 
> 赞同：0
> 
> 时间：2012-12-10T01:21:09.273
> 
> 标签：google-apps-script, google-sheets, google-visualization

问题：

1.  我需要以一种“关系”的方式获取数据。
2.  GViz（Google 可视化 API）不适用于 GAS（Google Apps 脚本）HTML 服务（请参阅此处：[我们可以将 Google Chart Tools 与 Google Script HtmlService 一起使用](https://stackoverflow.com/questions/11231535/can-we-use-google-chart-tools-with-google-script-htmlservice?rq=1)）。

获得 GViz 提供的所有功能现在是一个梦想，因此，相反，我会对 DataTable 和 DataView 对象以及 google.visualization.data.join() 感到满意。我现在不需要图表。

所有这一切，只要我不能在客户端获得完整的 GViz，就可以在服务器端。

更明确地说，我需要加入一些查询，而不是弄乱规范化的数据。

请记住，我使用电子表格作为数据容器（表格由静态和动态数据组成）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T01:59:27.903

从 GViz 获得所有功能现在是每个人的梦想，但其中一些可以通过 UiApps 中的 Charts Services 获得。我没有使用 HTML 服务的经验，所以我不能这么说。

[https://developers.google.com/apps-script/service_charts](https://developers.google.com/apps-script/service_charts)

如果您要处理大量数据，您看过 ScriptDB 吗？

[https://developers.google.com/apps-script/service_scriptdb](https://developers.google.com/apps-script/service_scriptdb)

我目前使用一组电子表格和图表服务作为仪表板，它工作得很好。不过，我真的希望我能制作组合图表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-03T04:49:50.650

看起来像是在 3 月中旬到现在之间的某个时间，GViz 主要使用 HTML 服务。

我自己对 Google Apps 脚本很陌生，但我设法让 TaffyDB 在服务器端工作。我将它作为库加载，以防我想在多个项目中使用它。

我确实必须添加这一行以使其在服务器端工作：

```
function setTimeout() {} 
```

不确定是否足够，但它是一个起点。

# scala - 实现一个在scala中执行currying的高阶函数

> ID：13793756
> 
> 赞同：6
> 
> 时间：2012-12-10T01:22:40.073
> 
> 标签：scala, currying, higher-order-functions

我的一个同事给我发了这样一个问题：

> 实现一个执行柯里化的 HOF（高阶函数），您的函数的签名如下：

```
def curry[A,B,C](f:(A,B) => C) : A => B => C 
```

> 类似地，实现一个执行 uncurrying 的函数，如下所示：

```
def uncurry[A,B,C](f:A => B => C): (A,B) => C 
```

我理解柯里化的方式是，如果你有一个带有多个参数的函数，你可以重复地将函数应用于每个参数，直到你得到结果。

所以类似的东西`f:(A,B) => C`变成了`A => f(A,_) => f(B)`????

并且 uncurrying 是将这个应用程序合并为一个函数，如下所示：

`f:A=>B=>C`会是`f(A,B)`？

也许我只是对这里的语法感到困惑，但如果有人能指出我在这里缺少的东西，那就太好了。

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-10T02:48:42.433

希望这个带有大量评论的完整示例很容易理解。如果您有任何问题，请回复。

您可以通过将其放入 Scala 解释器来执行此代码。

```
// Here's a trait encapsulating the definition your coworker sent.
trait Given {
  def curry[A,B,C](f:(A,B) => C) : A => B => C
  def uncurry[A,B,C](f:A => B => C): (A,B) => C
}

object Impl extends Given {
  // I'm going to implement uncurry first because it's the easier of the
  // two to understand.  The bit in curly braces after the equal sign is a
  // function literal which takes two arguments and applies the to (i.e.
  // uses it as the arguments for) a function which returns a function.
  // It then passes the second argument to the returned function.
  // Finally it returns the value of the second function.
  def uncurry[A,B,C](f:A => B => C): (A,B) => C = { (a: A, b: B) => f(a)(b) }

  // The bit in curly braces after the equal sign is a function literal
  // which takes one argument and returns a new function.  I.e., curry()
  // returns a function which when called returns another function
  def curry[A,B,C](f:(A,B) => C) : A => B => C = { (a: A) => { (b: B) => f(a,b) } }
}

def add(a: Int, b: Long): Double = a.toDouble + b
val spicyAdd = Impl.curry(add)
println(spicyAdd(1)(2L)) // prints "3.0"
val increment = spicyAdd(1) // increment holds a function which takes a long and adds 1 to it.
println(increment(1L)) // prints "2.0"
val unspicedAdd = Impl.uncurry(spicyAdd)
println(unspicedAdd(4, 5L)) // prints "9.0" 
```

一个较少数字的例子怎么样？

```
def log(level: String, message: String) { 
  println("%s: %s".format(level, message)) 
} 
val spicyLog = Impl.curry(log) // spicyLog's type is String => Unit
val logDebug = spicyLog("debug") // This new function will always prefix the log
                                 // message with "debug".
val logWarn = spicyLog("warn") // This new function will always prefix the log 
                               // message with "warn".
logDebug("Hi, sc_ray!") // prints "debug: Hi, sc_ray!"
logWarn("Something is wrong.") // prints "warn: Something is wrong." 
```

**更新** 您回答询问“编译器如何评估表达式，例如`a => b => f(a,b)`。” 好吧，它没有。至少在您同事的代码段中定义事物的方式是无法编译的。不过，一般来说，如果您看到某种形式`A => B => C`的意思是“一个以 A 作为参数的函数；它返回一个以 B 作为参数并返回 C 的函数。”

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-10T02:35:33.827

我不确定我是否真的理解您的问题 - 除了实际实施之外，您还想知道什么？如前所述，它应该很简单：

```
def curry[A,B,C](f:(A,B) => C): A => B => C = 
  a => b => f(a,b) 
```

什么`a => b => f(a,b)`意思是，“*一个*参数的函数`a`，其返回值`b => f(a,b)`又是*一个*参数的函数`b`，其返回值是你执行的结果`f(a,b)`（其类型是`C`）”

`a => b => f(a, b)`如果有帮助，可以写得稍微详细一点吗？

```
 { (a: A) => {           // a function of *one* argument, `a`
      (b: B) => {        // a function of *one* argument, `b`
         f(a, b)         // whose return value is what you get of you execute `f(a,b)` (whose type is `C`)
      }
   }
 } 
```

和

```
def uncurry[A,B,C](f:A => B => C): (A,B) => C = 
  (a, b) => f(a)(b) 
```

其中`(a, b) => f(a)(b)`的意思是，“一个有*两个*参数的函数`(a, b)`，它的返回值是你第一次应用`a`到 HoF时得到的值`f`，它返回一个函数，该函数又消耗`b`来返回一个`C`”。

这有帮助吗？

# django - Django ORM如何舍入平均结果

> ID：13793759
> 
> 赞同：18
> 
> 时间：2012-12-10T01:23:34.620
> 
> 标签：django, orm, model, rounding, average

我有一个模型，我在其中使用 Django ORM 从表中提取平均值。我想四舍五入该平均值，我该怎么做？

见下文我从价格模型中提取平均价格，按日期分组，格式为 YYYY-MM，我想自动提取四舍五入到最接近数字的平均值。

```
rs = Prices.objects.all.extra(select={
    'for_date': 'CONCAT(CONCAT(extract( YEAR from for_date ), "-"),
        LPAD(extract(MONTH from for_date), 2, "00"))'
    }).values('for_date').annotate(price=Avg('price')).order_by('-for_date') 
```

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2016-01-05T22:30:03.127

使用[Func() 表达式](https://docs.djangoproject.com/en/stable/ref/models/expressions/#func-expressions)。

这是一个使用[Django Aggregation 主题指南](https://docs.djangoproject.com/en/stable/topics/db/aggregation/)中的 Book 模型在 SQLite 中四舍五入到小数点后两位的示例：

```
class Round(Func):
    function = 'ROUND'
    template='%(function)s(%(expressions)s, 2)'

Book.objects.all().aggregate(Round(Avg('price'))) 
```

这允许对 round 函数进行参数化（来自@RichardZschech 的回答）：

```
class Round(Func):
  function = 'ROUND'
  arity = 2

Book.objects.all().aggregate(Round(Avg('price'), 2)) 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2018-08-27T12:28:46.720

基于以前的答案，我来到这个解决方案以使其适用于**PostgreSQL**：

```
from django.db.models import Func

class Round2(Func):
    function = "ROUND"
    template = "%(function)s(%(expressions)s::numeric, 2)"

# Then use it as ,e.g.:
# queryset.annotate(ag_roi=Round2("roi"))

# qs.aggregate(ag_sold_pct=Round2(Sum("sold_uts") / (1.0 * Sum("total_uts"))) * 100 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2018-05-11T13:21:31.063

改进@mrts 答案。

这允许对轮函数进行参数化：

```
class Round(Func):
  function = 'ROUND'
  arity = 2

Book.objects.all().aggregate(Round(Avg('price'), 2)) 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2019-04-29T14:58:31.067

我需要同时支持**PostgreSQL**和**SQLite**，但还要保持指定要保留的位数的能力。

建立在以前的答案：

```
class Round(Func):
    function = 'ROUND'
    arity = 2
    # Only works as the arity is 2
    arg_joiner = '::numeric, '

    def as_sqlite(self, compiler, connection, **extra_context):
        return super().as_sqlite(compiler, connection, arg_joiner=", ", **extra_context)

# Then one can use it as:
# queryset.annotate(avg_val=Round(AVG("val"), 6)) 
```

我更喜欢更干净的东西

```
if SQLITE:
    arg_joiner=", "
elif PGSQL:
    arg_joiner = '::numeric, '
else raise NotImplemented() 
```

但是没有找到方法，请随时改进！

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2020-08-26T13:08:13.647

Django 有这个`Round`功能。有关更多详细信息，请参阅[文档](https://docs.djangoproject.com/en/dev/ref/models/database-functions/#round)

# php - php查询将字符串插入数据库

> ID：13793760
> 
> 赞同：0
> 
> 时间：2012-12-10T01:23:37.960
> 
> 标签：php, sql

```
<?php

$username = $_POST['username'];
$password = $_POST['password'];

if($username&&$password)
{

$connect = mysql_connect("CiniCraftData.db.55555555.hostedresource.com", "CiniCraftData", "*********") or die("Couldn't Connect");
mysql_select_db("CiniCraftData") or die ("Couldn't Find Database"); 

            $query = "INSERT INTO CiniUsers ('username.CINIDAT') VALUES('$username')";
            $result = mysql_query($query) or die("Error occurred.");

}
else die("Please enter a username and password.");

?> 
```

对于这部分代码：

```
$query = "INSERT INTO CiniUsers ('username.CINIDAT') VALUES('$username')"; 
```

VALUES 似乎无法正常工作，我需要将 $username 的字符串值插入到我的 CiniUsers 数据库中。我需要做什么才能使上面的代码工作？我对 php 和 sql 语法非常陌生，我在网上找到的指南彼此完全不同，就好像它们不断更新 php 一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T02:46:34.820

SQL 语句的格式如下：

```
INSERT INTO nameOfTable (column1, column2, column3, etc) VALUES ('column1', 'column2', 'column3', 'etc') 
```

您必须确保您使用的字段名称与存储在 MySQL 中的字段名称完全相同。您的 SQL 可能如下所示：

```
$query = "INSERT INTO CiniUsers (username) VALUES('$username')"; 
```

或者

```
$query = "INSERT INTO CiniUsers (username) VALUES('{$username}')"; 
```

可能有帮助的另一件事是您的 die() 语句不是很有帮助。是的，当你的 php 程序提前退出时，这是一件很糟糕的事情，但如果你知道它退出的原因，它会为你节省很多时间和挫败感。尽管您可能仍在学习 PHP 和 MySQL，并且可能不知道错误的含义，但是当您看到它们越多时，它们就会开始变得有意义，并且可以告诉您查询是否错误、连接失败或更多事情。更改为这样的内容：

```
$connect = mysql_connect("CiniCraftData.db.55555555.hostedresource.com", "CiniCraftData", "*********") or die("Couldn't Connect: mysql_error()");
mysql_select_db("CiniCraftData") or die ("Couldn't Find Database: mysql_error()");
...
$result = mysql_query($query) or die("Some kind of error occurred...Query failed: mysql_error()"); 
```

您会发现看到 mysql_error() 将帮助您更快地解决此类问题。

使用 phpMyAdmin 测试您的查询，您的查询可能运行良好。这确实是唯一确定的方法。使用建议的 SQL 并将 PHP 变量替换为一些虚拟数据，例如“testUsername_1”。如果查询有效，您将手动将用户名添加到数据库中，如果没有，则问题出在 SQL 语句中。

如果您需要更多详细信息，这里有一些关于 SQL INSERT INTO 语句的文档：http: [//www.w3schools.com/sql/sql_insert.asp](http://www.w3schools.com/sql/sql_insert.asp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T01:31:15.157

尝试回顾这部分：

```
$query = "INSERT INTO CiniUsers ('username.CINIDAT') VALUES('$username')"; 
```

语法是：

```
$query = "INSERT INTO table (column) VALUES ('$strvar')"; 
```

您要插入的列名是什么？
如果是`username.CINIDAT`，请尝试删除 qoutes。

像这样：

```
$query = "INSERT INTO CiniUsers (username.CINIDAT) VALUES ('$username')"; 
```

或者您的专栏可能是`username`这样命名的：

```
$query = "INSERT INTO CiniUsers (username) VALUES ('$username')"; 
```

* * *

**更新**
您评论中的查询，将其更改为：

```
$query = "INSERT INTO CiniUsers (username.CINIDAT) VALUES ('$username')"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T01:32:49.867

我认为你应该使用 mysqli 或 pdo。您正在使用的这个库已被弃用。

也就是说，什么是username.CINIDAT？我认为这就是你的问题所在。它应该是这样的

> $query = "INSERT INTO CiniUsers (username) VALUES('$username')";

我假设 CiniUsers 是表名，用户名是列名。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-10T01:32:33.127

最简单的方法是通过将语句与值连接来构建查询。

`$query = "INSERT INTO CiniUsers ('username.CINIDAT') VALUES('".$username."')";`

没有验证，这不是一个好主意，或者这样[的](http://xkcd.com/327/)事情很容易。

# java - 为什么使私有静态最终列表/集/地图不可修改？

> ID：13793761
> 
> 赞同：10
> 
> 时间：2012-12-10T01:23:41.630
> 
> 标签：java, collections, map, constants, immutability

我刚刚阅读了一些更有经验的程序员编写的代码，我遇到了以下内容：

```
public class ConsoleFormatter extends Formatter {
    private static final Map<Level, String> PREFIXES;

    static {
        Map<Level, String> prefixes = new HashMap<Level, String>();
        prefixes.put(Level.CONFIG,  "[config]");
        prefixes.put(Level.FINE,    "[debug]");
        prefixes.put(Level.FINER,   "[debug]");
        prefixes.put(Level.FINEST,  "[trace]");
        prefixes.put(Level.INFO,    "[info]");
        prefixes.put(Level.SEVERE,  "[error]");
        prefixes.put(Level.WARNING, "[warning]");

        PREFIXES = Collections.unmodifiableMap(prefixes);
    }

    // ...

} 
```

如您所见，这是一个用于格式化日志输出的类。然而，引起我注意的是静态初始化块中的代码：`PREFIXES = Collections.unmodifiableMap(prefixes);`.

为什么要`PREFIXES`制作不可修改的地图？**它是一个私有常量，因此不存在修改该类之外的数据的风​​险。**这样做是为了给常量的不变性一种完整感吗？

就个人而言，我会直接初始化`PREFIXES`为 a `HashMap`，然后直接初始化`put`键值对，而无需创建虚拟的占位符映射或使该字段成为不可变映射。我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-10T02:55:59.493

如果你不小心`return PREFIXES`从一个方法中，突然任何其他代码都可以修改它。当您在未来凌晨 3 点修改该代码时，使常量真正不可变可以防止您自己的愚蠢。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-10T03:02:26.130

通过使列表不可修改，作者记录了他的假设，即这些值永远不会改变。以后可能编辑该类的人不仅可以看到该假设，而且还会在它被破坏的情况下得到提醒。

只有从长远的角度来看，这才有意义。它降低了因维护而出现新问题的风险。我喜欢做这种编程风格，因为即使在我自己的课程中，我也倾向于破坏东西。有一天，您可能会进行快速修复，但您会忘记最初做出的与正确性相关的假设。你越能锁定代码越好。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-10T01:27:08.443

`private`拥有一个可从类外部修改的映射、集合或数组非常容易。你会标记它`final`，为什么不说明它也应该是不可变的？

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-10T01:36:50.987

假设你的朋友离开了他的工作，一个经验不足的程序员接手了。经验不足的程序员会尝试在同一类的不同方法中的某处修改 PREFIXES 的内容。它是不可修改的，它不会起作用。这是说“这是一个常数，永远不要改变它”的正确方式。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-10T17:57:03.823

Map 接口不会传达您希望某些东西是不可变的或不可修改的。

以下方法适用于[Eclipse Collections](http://www.eclipse.org/collections/)。

```
private static final ImmutableMap<Level, String> PREFIXES = UnifiedMap.<Level, String>newMap()
    .withKeyValue(Level.CONFIG, "[config]")
    .withKeyValue(Level.FINE, "[debug]")
    .withKeyValue(Level.FINER, "[debug]")
    .withKeyValue(Level.FINEST, "[trace]")
    .withKeyValue(Level.INFO, "[info]")
    .withKeyValue(Level.SEVERE, "[error]")
    .withKeyValue(Level.WARNING, "[warning]")
    .toImmutable(); 
```

这将创建一个合同上不可变的 Map，因为 ImmutableMap 在其 API 中没有变异方法。

如果您更喜欢保留 Map 界面，这种方法也可以。

```
private static final Map<Level, String> PREFIXES = UnifiedMap.<Level, String>newMap()
    .withKeyValue(Level.CONFIG, "[config]")
    .withKeyValue(Level.FINE, "[debug]")
    .withKeyValue(Level.FINER, "[debug]")
    .withKeyValue(Level.FINEST, "[trace]")
    .withKeyValue(Level.INFO, "[info]")
    .withKeyValue(Level.SEVERE, "[error]")
    .withKeyValue(Level.WARNING, "[warning]")
    .asUnmodifiable(); 
```

您应该注意到在这两种情况下都不需要静态块。

注意：我是 Eclipse Collections 的提交者。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-07-28T05:14:11.910

如果一个集合是最终的，你不能在其中设置一个新对象。但是，仍然可以向同一个对象添加或删除项目。

当您使其不可修改时，您甚至无法在集合中添加或删除项目。因此，始终建议使集合不可修改，而不是仅将其保持为最终状态。

# r - 在 ubuntu 上的 R 中使用 cairo 设备时出错

> ID：13793763
> 
> 赞同：1
> 
> 时间：2012-12-10T01:24:23.977
> 
> 标签：r, cairo

我正在研究 cairo 设备。我正在生成 cairo_pdf 并收到如下所示的错误消息。

```
cairo_pdf("DATA")
Warning messages:
1: In cairo_pdf("DATA") :
  unable to load shared object '/usr/local/lib64/R/library/grDevices/libs//cairo.so':
  /usr/local/lib64/R/library/grDevices/libs//cairo.so: undefined symbol: png_set_longjmp_fn
2: In cairo_pdf("DATA") : failed to load cairo DLL 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T02:00:52.257

看起来您需要重新安装/重建该软件包。

您还可以通过快速安装我为 Debian 打包的早期 cairodevice 包`sudo apt-get install r-cran-cairodevice`。

# algorithm - 在相邻数字的有序范围内查找间隙

> ID：13793764
> 
> 赞同：3
> 
> 时间：2012-12-10T01:24:32.000
> 
> 标签：algorithm, search

这是 Steven Skiena 的“算法设计手册”第 2 版，第 143 页的家庭作业。

> 假设给定一个不同整数的排序序列，`{A1,A2,...An}`从where抽取。给出一个算法来找到一个不存在于 中的整数。对于完整的信用，找到最小的这样的整数。`1``m``n < m``O(lgN)``<= m``A`

排序后的序列，`O(lgN)`两者都建议使用二进制搜索算法。我能想到的唯一方法是遍历从`1`through中的数字`m`，并对每个数字进行二分搜索以查看它是否按顺序存在`A`。但这意味着`O(mlgN)`，不是真的`O(lgN)`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T01:32:24.950

有一个小于`A[k]`缺失的整数当且仅当

```
A[k] > k 
```

（使用从 1 开始的索引）。

所以要找到最小的缺失数，二分查找。从中间索引开始`m`。如果`A[m] > m`，则有一个小于`A[m]`缺失的数，在左半部分搜索。否则，如果`A[m] == m`，没有比`m`缺失更小的数字，则搜索右半部分。

# core-plot - 如何在核心绘图中设置绘图位置

> ID：13793769
> 
> 赞同：0
> 
> 时间：2012-12-10T01:24:46.207
> 
> 标签：core-plot

我需要绘制多个图。如何在代码中设置每个情节的位置，而不是在情节提要中一一设置？

我想要实现的图像[**在这里**](https://www.dropbox.com/s/yvahab3db8nc4d6/design.png)。在此图像中，每条小曲线都是一个图。所以总共有 20 x 15 个小地块。我需要为每个人定位和提供不同的数据。但我不想一一设置他们的位置，因为这很乏味。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T01:25:50.410

您是否需要允许用户交互或经常更新图表？如果没有，最好的办法是使用一个带有单个图的图表。将其渲染成小图像，每个绘图一次，每次更改数据。将图像绘制到网格中的视图中。

如果您不能使用图像方法，您可能会在设置 300 个单独的图表之前很久就耗尽内存。相反，如果可能，请使用具有单个绘图空间的图形。偏移和缩放每个图的数据值，以便它们出现在适当的部分。使用尽可能少的图（每个线型一个）。用空 (`NAN`或`nil`) 数据值分隔线段。

# jquery - JQuery Ajax 表单仅发送第一个 post 变量

> ID：13793775
> 
> 赞同：0
> 
> 时间：2012-12-10T01:25:16.253
> 
> 标签：jquery, ajax, forms, post

我正在尝试将一些数据“发布”到 php 脚本。在被发送的 3 个变量中，似乎只有第一个被发送。我在这里没有看到什么？

```
<script type="text/javascript">
$(document).ready(function(){
    $("#newproject").ajaxForm({
        url: '/ajax/newproject.php',
        type: 'post',
        data: 'name=' + $('name').val() + '&username=<?php echo $_SESSION['username']; ?>&sessionid=<?php echo $_SESSION['id']; ?>',
        success: function(data) {
            if (data == 'success') $('#returnMessage').attr('class', 'good');
            else $('#returnMessage').attr('class', 'bad');
            $('#returnMessage').html(data);
        }
    });
});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T01:40:10.993

尝试使用数组数据：

```
$("#newproject").ajaxForm({
    url: '/ajax/newproject.php',
    type: 'post',
    data: {
        name: $('name').val(),
        username: '<?php echo $_SESSION['username']; ?>',
        sessionid: '<?php echo $_SESSION['id']; ?>'
    },
    success: function(data) {
        if (data == 'success') $('#returnMessage').attr('class', 'good');
        else $('#returnMessage').attr('class', 'bad');
        $('#returnMessage').html(data);
    }
}); 
```

您可以使用 $_POST['name']、$_POST['username'] 等检索发布数据。

# web-services - Web 存储服务（dropbox、skydrive 等）如何使用户数据可映射到网络驱动器？

> ID：13793777
> 
> 赞同：-1
> 
> 时间：2012-12-10T01:25:41.187
> 
> 标签：web-services, dropbox, nfs, smb, onedrive

他们使用什么技术？仅仅是我的数据实际上存储在他们服务器上的一个文件夹中，然后作为网络共享托管（使用身份验证）吗？

我认为这些文件必须以某种方式抽象，存储在 .dat 文件中或分布在多台机器上以实现冗余，并且这会使通过 Windows 网络共享服务简单地共享它是行不通的。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T13:04:51.693

看起来 SkyDrive 至少在使用[WebDAV](http://en.wikipedia.org/wiki/WebDAV)。其他服务可能正在做非常相似的事情。Google 搜索“SkyDrive WebDAV”会发现许多与此类似的[文章](http://studentguru.gr/b/kingherc/archive/2010/01/01/access-skydrive-from-windows-explorer-through-webdav.aspx)。看起来 Windows 资源管理器[本机支持](http://social.technet.microsoft.com/Forums/ta/w7itprogeneral/thread/349f2ec9-c55d-44b2-a1a2-d9147da6ff0b)用于映射驱动器的 WebDAV 连接。

# c++ - 设计：常量和非常量访问器相互依赖？

> ID：13793780
> 
> 赞同：0
> 
> 时间：2012-12-10T01:26:00.857
> 
> 标签：c++, c++11, constants, subscript-operator

> **可能的重复：**
> [如何删除相似的 const 和非常量成员函数之间的代码重复？](https://stackoverflow.com/questions/123758/how-do-i-remove-code-duplication-between-similar-const-and-non-const-member-func)

在以下示例中：

```
template<typename Type, unsigned int Size>
class MyClass
{
    public: inline Type& operator[](const unsigned int i) 
    {return _data[i];}

    public: inline const Type& operator[](const unsigned int i) const
    {return _data[i];}   

    protected: Type _data[Size];
}; 
```

const 和 non-const`operator[]`是独立实现的。

就设计而言，最好有：

*   1）像这里的两个独立实现
*   2) 两个函数之一调用另一个函数

如果解决方案 2) 更好，给定示例的代码是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T02:05:03.417

它是一种众所周知且被广泛接受的实现模式，当非常量方法通过其对应的 const 实现时，如

```
 class some_class {

   const some_type& some_method(arg) const
   {
     ...;
     return something;
   }

   some_type& some_method(arg)
   {
     return const_cast<some_type&>(
       const_cast<const some_class *>(this)->some_method(arg));
   }
 }; 
```

这是一种完全有效的技术，在方法主体相对较重的情况下，它基本上没有可比的（方便的）替代方案。的弊端`const_cast`明显小于重复代码的弊端。

但是，当方法的主体本质上是单行代码时，最好坚持使用明确的相同实现，以避免这种难以阅读的`const_cast`s 堆积。

人们可能会想出一种形式上更好的无铸件解决方案，其实施方式如下：

```
 class some_class {

   template <typename R, typename C>
   static R& some_method(C *self, arg)
   {
     // Implement it here in terms of `self->...` and `R` result type
   }

   const some_type& some_method(arg) const
   {
     return some_method<const some_type>(this, arg);
   }

   some_type& some_method(arg)
   {
     return some_method<some_type>(this, arg);
   }
 }; 
```

但对我来说，它看起来比使用`const_cast`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T01:27:45.327

你不能让任何一个实现调用另一个实现而不抛弃 constness，这是一个坏主意。

该`const`方法不能调用非`const`一个。

非`const`方法不应调用该方法，`const`因为它需要转换返回类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T01:32:55.530

不幸的是，“constness”模板不起作用，但我仍然认为值得考虑整体想法：

```
// NOTE: this DOES NOT (yet?) work!
template <const CV>
Type CV& operator[](unsigned int index) CV {
    ...
} 
```

暂时，我只实现两次微不足道的功能。如果代码变得比一两行更复杂，我会将细节分解到函数模板中并委托实现。

# java - EC2 实例上的 Web 应用程序似乎没有加载 persistence.xml

> ID：13793782
> 
> 赞同：0
> 
> 时间：2012-12-10T01:26:16.037
> 
> 标签：java, hibernate, jpa, amazon-ec2, persistence.xml

我有一个部署了 Web 应用程序的 EC2 实例。EC2 实例是带有 Tomcat 的 Linux。该 Web 应用程序在我的机器上本地运行良好，它连接到 MySQL 的 AWS RDS 实例。

当我将此 Web 应用程序部署到 EC2 实例时，任何需要调用数据库的页面都不会加载。我正在使用 Hibernate，在尝试创建 Hibernate 会话时，我得到了 NullPointerException。如果我删除 persistence.xml 配置文件，这与我在本地机器上遇到的错误相同。

在我的 persistence.xml 中，我只是定义了一个持久性单元，正如您所期望的那样。没什么花哨的（同样，它在本地运行良好）。

当应用程序在 EC2 实例上运行时，为什么没有找到/发现和加载 persistence.xml 配置文件？

目前配置文件位于项目中：

```
/web/res/META-INF/persistence.xml 
```

任何输入表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T01:46:52.863

尝试将 META-INF 文件夹与您的 persistence.xml 复制到您的 src 文件夹。在我无法加载我的 persistence.xml 之前，我遇到过问题，因为它不在我的类路径中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T03:04:20.380

好吧，所以我是个白痴。我在 tomcat lib 目录中有 MySQL 连接器 jar，因此我的所有项目都可以自动使用它，而无需我手动将其添加到每个项目中。但是当你把东西打包到一个战争文件中并发布时，它不包括那些“普通”的罐子。作为旁注，这些罐子不应该被包括在战争中吗？对我来说似乎很奇怪，他们不是。

# c# - 如何获取控件的网格父级？

> ID：13793788
> 
> 赞同：0
> 
> 时间：2012-12-10T01:27:40.393
> 
> 标签：c#, windows-phone-7

我在网格中有一个控件，并且想访问该网格。我无法访问后面代码中的网格，但我可以访问控件的实例。有没有办法使用控件的实例获取网格父级？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T02:40:04.073

假设您的控件是 Grid 中的一个按钮，并且您通过 click 事件访问此 Button，这就是您访问 Grid 的方式。

```
private void button1_Click(object sender, RoutedEventArgs e)
{
    Grid x = (sender as Button).Parent as Grid;
} 
```

# jquery - 悬停时切换宽度，单击时保持，单击时释放并单击关闭

> ID：13793792
> 
> 赞同：0
> 
> 时间：2012-12-10T01:28:04.747
> 
> 标签：jquery, css, width, toggle

我有一个通过 CSS 在悬停时展开的 div。当用户单击 div 时，我希望它保持在该宽度。到目前为止，我有这个工作。

但是，当用户再次单击 div（切换）并且用户单击文档其余部分的 div 时，我需要 div 折叠回原始大小。

[小提琴在这里](http://jsfiddle.net/ZfKYr/5/)

jQuery在这里：

```
$(".rail").click(function() {
    $(".rail").width( 180 );
}); 
```

这里的 CSS：

```
.rail{
   width: 30px;
   border-left: 10px solid #ff5400;
   position: absolute;
   top: 0px;
   bottom: 0px;
   right: 0px;
   background-color: rgba(0,0,0,0.15);
   cursor: pointer;
   -webkit-transition: all .3s ease-in-out;
   -moz-transition: all .3s ease-in-out;
   -o-transition: all .3s ease-in-out;
   transition: all .3s ease-in-out;
 }
.rail:hover{
   width: 180px;
   background-color: #ddd;
   -webkit-transition: all .3s ease-in-out;
   -moz-transition: all .3s ease-in-out;
   -o-transition: all .3s ease-in-out;
   transition: all .3s ease-in-out;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T01:36:23.840

这个给你。我更新了那个小提琴。

[http://jsfiddle.net/ZfKYr/8/](http://jsfiddle.net/ZfKYr/8/)

我改变的是：

```
1.) Added a '.rail-sticky' rule that forces the rail open.
2.) Changed the click function to toggle that rule instead of forcing it open. 
```

HTML：

```
<div class="rail">

</div>​ 
```

JavaScript：

```
$(".rail").click(function() {
    $(".rail").toggleClass('rail-sticky');
    return false;
});

$(document).on('click',':not(.rail)',function()
{
    $('.rail').removeClass('rail-sticky');
}); 
```

​</p>

CSS：

```
.rail{
    width: 30px;
    border-left: 10px solid #ff5400;
    position: absolute;
    top: 0px;
    bottom: 0px;
    right: 0px;
    background-color: rgba(0,0,0,0.15);
    cursor: pointer;
    -webkit-transition: all .3s ease-in-out;
    -moz-transition: all .3s ease-in-out;
    -o-transition: all .3s ease-in-out;
    transition: all .3s ease-in-out;
}
.rail:hover{
    width: 180px;
    background-color: #ddd;
    -webkit-transition: all .3s ease-in-out;
    -moz-transition: all .3s ease-in-out;
    -o-transition: all .3s ease-in-out;
    transition: all .3s ease-in-out;
}

.rail-sticky
{
    width: 180px;
}​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T01:33:58.383

```
$(".rail").on({
    mouseenter: function() {
        $(this).addClass('hover');
    },
    mouseleave: function() {
        $(this).removeClass('hover');
    },
    click: function() {
        $(this).toggleClass('active');
    }
});

$(document).on('click', function(e) {
    if (!$(e.target).is('.rail') && $('.rail').is('.active')) $('.rail').removeClass('active');
}); 
```

[**小提琴**](http://jsfiddle.net/ZfKYr/6/)

# combobox - 不同的组合可以使用具有不同参数的同一商店吗？

> ID：13793800
> 
> 赞同：0
> 
> 时间：2012-12-10T01:29:45.900
> 
> 标签：combobox, extjs4, store, params

在一个表格中，我有两个combo，一个名为“sales”，另一个名为“business”。
我希望他们俩都从商店“用户”中获取数据，但可以选择不同的选项。

如果我将两个组合设置为具有相同的“商店”属性

> 商店：'用户'

并使用“beforeselect”事件将不同的参数传递给商店，然后当商店发生变化时，它将同时影响两个组合。

我怎样才能做到这一点？两家店？

# iphone - 设置 UIDatePicker 日期时崩溃

> ID：13793801
> 
> 赞同：0
> 
> 时间：2012-12-10T01:29:50.063
> 
> 标签：iphone, ios, ipad, uidatepicker

我在应用商店有一个应用程序，并且一些用户遇到了我无法复制的崩溃 - 对我来说它工作正常。崩溃是由这行代码引起的：

```
timePicker.date = editingEvent.time; 
```

其中 timePicker 是一个 UIDatePicker，editingEvent 是一个自定义对象，time 是一个 NSDate 属性。这是回溯：

> 最后一个异常回溯：0 CoreFoundation
> 0x3785029e __exceptionPreprocess + 158 1 libobjc.A.dylib
> 0x3535097a objc_exception_throw + 26 2 CoreFoundation
> 0x37850158 +[NSException raise:format:arguments:] + 96 3 Foundation 0x398e62aa -[NSAssertionNumberHandler handleFailureInMethod:object:: :] + 86 4
> UIKit 0x3736be20 -[_UIDatePickerView _setDate:animated:forced:] + 144 5 UIKit 0x373742d4 -[_UIDatePickerView setDate:animated:] + 28 6 UIKit
> 0x3743d464 -[UIDatePicker setDate:] + 32

任何想法 - 我忽略了什么/可能出了什么问题？我如何从这里着手找出错误可能在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T04:47:59.687

Do like this,

```
NSDate *date = [NSDate date];
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateFormat:@"hh:mm a"];
NSString *formattedDateString = [dateFormatter stringFromDate:editingEvent.time];

NSDateFormatter *timeFormatter = [[NSDateFormatter alloc] init];
[timeFormatter setDateFormat:@"hh:mm a"];
NSDate *timeFromString = [[NSDate alloc] init];
timeFromString = [timeFormatter dateFromString:formattedDateString];
timePicker.date=timeFromString; 
```

# html - 使用其他 div 或任何其他方法裁剪图像反射

> ID：13793803
> 
> 赞同：0
> 
> 时间：2012-12-10T01:30:18.893
> 
> 标签：html, css

好的，所以我有这个图像滑块，可以在页面左侧滑动图像。他们不断地从下往上滚动。但我希望图像也能使用 CSS 进行反射。所以我写了另一个 div，由反向的相同图像和不透明度组成，所以它看起来像反射，但完整的图像正在反射，这破坏了整个事物的外观。所以我在每个反射下方写了另一个 div，它会在一定程度上掩盖图像反射，并赋予它比图像反射更高的 z-index 但无论如何这似乎不起作用。无论我尝试什么，图像反射都会出现在添加的 div 之上。那么有没有一种方法可以裁剪反射图像而不会干扰图像的比例或添加的 div “覆盖” 在我的情况下高于反射？还有在我的案例“imagesRow”中包含所有图像的主 div，我想给它一些样式，使它看起来像一个玻璃杯。但是无论我给那个 div 赋予什么样式，它都会自动应用于子组件。那么有没有一种方法可以更改主 div 的（imagesRow）样式而不影响其中的图像？我希望这个链接可能有任何帮助。[http://jsfiddle.net/659Na/](http://jsfiddle.net/659Na/)

html代码：

```
<div id="imagesRow" style="position: absolute;top:5px;">
<marquee  behavior="scroll" direction="up" onmouseover="this.stop();" onmouseout="this.start();" height="725" >
<div id="l1" class="father">
    <img class="messagesOne"  src="images/images.png">
    <div class="reflection">
        <img src="images/images.png" />
        <div class="overlay"></div>
    </div>
</div>
<div id="l2" class="father">
    <img class="messagesOne"  src="images/image3.png">
    <div class="reflection">
        <img src="images/image3.png" />
        <div class="overlay"></div>
    </div>
</div>
<div id="l3" class="father">
    <img class="messagesOne"  src="images/image5.png">
    <div class="reflection">
        <img src="images/image5.png" />
        <div class="overlay"></div>
    </div>
</div>
<div id="l4" class="father">
    <img class="messagesOne"  src="images/image7.png">
    <div class="reflection">
        <img src="images/image7.png" />
        <div class="overlay"></div>
    </div>
</div>
</br>
</br>
<div id="l5" class="father">
    <img class="messagesOne"  src="images/image9.png">
    <div class="reflection">
        <img src="images/image9.png" />
        <div class="overlay"></div>
    </div>
</div>
<div id="l6" class="father">
    <img class="messagesOne"  src="images/image11.png">
    <div class="reflection">
        <img src="images/image11.png" />
        <div class="overlay"></div>
    </div>
</div>
<div id="l7" class="father">
    <img class="messagesOne"  src="images/image12.png">
    <div class="reflection">
        <img src="images/image12.png" />
        <div class="overlay"></div>
    </div>
</div>
<div id="l8" class="father">
    <img class="messagesOne"  src="images/image14.png">
    <div class="reflection">
        <img src="images/image14.png" />
        <div class="overlay"></div>
    </div>
</div>
<div id="l9" class="father">
    <img class="messagesOne"  src="images/image15.png">
    <div class="reflection">
        <img src="images/image15.png" />
        <div class="overlay"></div>
    </div>
</div>
<div id="l10" class="father">
    <img class="messagesOne"  src="images/image16.png">
    <div class="reflection">
        <img src="images/image16.png" />
        <div class="overlay"></div>
    </div>
</div>
<div id="l11" class="father">
    <img class="messagesOne"  src="images/image17.png">
    <div class="reflection">
        <img src="images/image17.png" />
        <div class="overlay"></div>
    </div>
</div>
</marquee>
</div> 
```

css 文件：

```
.messagesOne{       
    height: 60px;
    width: auto;
margin-left: 56px;
}
.reflection img {
    -webkit-transform: scaleY(-1);
       -moz-transform: scaleY(-1);
        -ms-transform: scaleY(-1);
         -o-transform: scaleY(-1);
            transform: scaleY(-1);
    filter: flipv; opacity:0.20;
    filter: alpha(opacity='20');
    height: 60px;
    width:  auto;
    margin-left: 56px;
    z-index: -1100;

}

.overlay {
    margin-top: -44px;z-index: 1000; width:auto; height:60px;
background-color: black;  
filter: progid:DXImageTransform.Microsoft.Gradient( gradientType=0, startColor=0, EndColorStr=#ffffff);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T13:26:45.947

我认为您可以通过简化代码来获得效果。覆盖不是必需的。

为 .reflection 设置如下样式：

```
.reflection  {height:20px;  overflow:hidden; margin:-10px 0 10px 0;} 
```

[在jsfiddle](http://jsfiddle.net/jim31415/659Na/1/)看到这个例子

# python - 如何让python在不使用cron的情况下每x小时执行一次脚本？

> ID：13793808
> 
> 赞同：1
> 
> 时间：2012-12-10T01:31:28.130
> 
> 标签：python

我如何拥有一个包含我想每 24 小时作为单独的进程/线程执行的函数的 python 脚本，比如 function1、function2 和 function3？所以说...

主应用程序执行功能1，功能2功能1和功能2在与主应用程序不同的线程中执行一些长时间运行的进程，一旦功能1完成其任务，向主应用程序报告它已完成

主应用程序打印“Done with Function 1”。一旦函数 2 完成其任务，向主应用程序报告它已完成

功能 1 完成 24 小时后... 主应用程序将在功能 2 完成后 6 小时再次执行... 主应用程序将再次执行功能

请注意，这些功能会做类似的事情，但数据源不同，因此不希望有单独的应用程序并执行 cron。例子会很棒。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T01:38:21.847

如果您在应用程序中需要它，`alarm()`是一个很好的起点，并且处理程序应该`fork()`自行关闭。如果您需要在不同的时间间隔同步不同的功能，`PriorityQueue`那就太好了，因为您只能维持一个警报。[文档](http://docs.python.org/2/library/signal.html#example)中有一个工作`alarm()`示例。

否则，我可能会使用单独的应用程序，而不是函数，并通过`crontab`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T01:37:42.577

为什么要经历将其设置为每小时启动线程的应用程序的痛苦。为什么不是一个简单的 cron 作业（或者如果你在 MS 机器上，类似的东西），每个函数都将其“用 functionX 完成”写入日志文件。

你的 crontab 看起来像：

```
0 0 * * * function1.py >> log1
0 0 * * * function2.py >> log2 
```

如果你的脚本中有一个shebang。如果不是，请将“function1.py”替换为“python function1.py”。

# jquery-ui-datepicker - jquery datepicker：从下拉列表中定义mindate和maxdate

> ID：13793812
> 
> 赞同：4
> 
> 时间：2012-12-10T01:31:57.960
> 
> 标签：jquery-ui-datepicker

我有这个代码，它工作正常。`mindate`和是动态定义的`maxdate`，从下拉列表中选择的日期将是`maxdate`并且`mindate`将在`maxdate`. 但是，当我返回下拉列表并第二次重新选择时，`mindate`and`maxdate`从下拉列表的第一个选择中被锁定。

```
<select id="dropdown" name="dropdown">
    <option value="12/08/2012">
    <option value="12/22/2012">
    <option value="01/05/2013">
</select>

<input type="text" id="start_date" name="xdate">

<script>
    $(function () {
        $('select[name="dropdown"]').change(function () {
            var bits = $(this).val().split('/');
            var end = new Date(bits[2], bits[0] - 1, bits[1]);
            var start = new Date(end.getTime());
            start.setDate(start.getDate() - 13);
            $('#start_date').multiDatesPicker({minDate:start, maxDate:end});
        });
    });
</script> 
```

第二次选择另一个范围后如何动态更改`mindate`和？`maxdate`我错过了什么吗？谢谢！:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T02:29:34.173

要更改已初始化的日期选择器的设置，请使用：

```
$('#start_date').multiDatesPicker('option', {minDate:start, maxDate:end}); 
```

# c++ - 将相机变换应用于 OpenGL

> ID：13793815
> 
> 赞同：0
> 
> 时间：2012-12-10T01:32:19.857
> 
> 标签：c++, opengl, matrix, glm-math

我正在尝试为 3D OpenGL 项目创建一个 Camera 类。但是我无法弄清楚如何将相机实际应用到我的场景中。我有这些相机功能（除其他外）：

```
void Camera::update(){
    glm::vec3 direction(cos(_verticalAngle) * sin(_horizontalAngle), sin(_verticalAngle), cos(_verticalAngle) * cos(_horizontalAngle));

    glm::vec3 right = glm::vec3(sin(_horizontalAngle - 3.14f/2.0f), 0, cos(_horizontalAngle - 3.14f/2.0f));

    glm::vec3 up = glm::cross(right, direction);

    _projectionMatrix = glm::perspective(_FoV, float(VIEWPORT_X) / float(VIEWPORT_Y), 0.1f, 250.0f);
    _viewMatrix = glm::lookAt(_position, _position + direction, up);
}
glm::mat4 Camera::getProjectionMatrix(){
    return _projectionMatrix;
}
glm::mat4 Camera::getViewMatrix(){
    return _viewMatrix;
} 
```

它们是根据教程创建的，但我不确定它们是否有效，因为我无法测试它们。我想要做的是让 OpenGL 使用视图和投影矩阵来模拟相机。我究竟如何告诉 OpenGL 使用这些投影和视图矩阵，以便它正确地模拟与模型转换分开的相机？我知道 OpenGL 默认不接受 glm 矩阵，但我在一些教程中看到过这种类型的东西：

```
glm::mat4 ProjectionMatrix = getProjectionMatrix();
glm::mat4 ViewMatrix = getViewMatrix();
glm::mat4 ModelMatrix = glm::mat4(1.0);
glm::mat4 MVP = ProjectionMatrix * ViewMatrix * ModelMatrix;

glUniformMatrix4fv(MatrixID, 1, GL_FALSE, &MVP[0][0]); 
```

但是 glUniformMatrix4fv （我认为它应用了相机变换？）对我来说毫无意义。它总是与着色器有关，而我没有。我目前只有一个线框测试网格。有人可以为我提供这个问题的代码片段吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T08:45:03.697

如果您不使用着色器，请使用 glLoadMatrixf()，如果您只想乘以当前矩阵，请使用 glMultMatrixf()，当前矩阵模式可以切换使用 glMatrixMode(GL_PROJECTION 或 GL_MODELVIEW)；例如（这是你的代码）：

```
lm::mat4 ProjectionMatrix = getProjectionMatrix();

//setup projection matrix for opengl
glMatrixMode(GL_PROJECTION);
glLoadIdentity();
glMultMatrixf(glm::value_ptr(ProjectionMatrix));
or:
glMultMatrixf(&ProjectionMatrix[0][0]); 
```

编辑：

如果您想对模型应用变换：（model_view 组合在固定功能中）

```
glMatrixMode(GL_MODELVIEW);
glLoadMatrixf(&viewMatrix[0][0]); 
glMultMatrixf(&modelTransform[0][0]);   //model * view
Draw_your_model(); 
```

您可能需要像这样设置您的转换： glm::translate(modelTransform,-10,-10,-10); 所以你的模型将在 (10,10,10)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T01:53:19.770

我不知道如何使用 GLM，但我可以帮助处理常规的 OpenGL 部分。

glUniformMatrix4fv 在特定着色器程序中由 MatrixID 指定的位置更新 4x4 统一矩阵。

我建议通过[Learning Modern 3D Graphics Programming](https://paroj.github.io/gltut/)进行工作，这既是参考又是指南。

有关如何在 GLSL 着色器程序中使用这些制服的讨论，请参阅： [学习现代 3D 图形编程 - 第 3 章](https://paroj.github.io/gltut/Positioning/Tut03%20A%20Better%20Way.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T09:45:22.363

根据您的代码，您应该执行以下操作：

```
glm::mat4 ProjectionMatrix = getProjectionMatrix();
glm::mat4 ViewMatrix = inverse(getViewMatrix());//view(camera) must be inverse(if you don't already do it)
glm::mat4 ModelMatrix = glm::mat4(1.0);
glm::mat4 MVP = ProjectionMatrix * ViewMatrix * ModelMatrix;

glUniformMatrix4fv(MatrixID, 1, GL_FALSE, value_ptr(MVP));//use value_ptr method to pass matrix pointer 
```

另外要设置正确的相机矩阵，我建议使用lookAt() GLM内置方法来计算眼睛、方向、向上并将它们组合成最终矩阵。

# datatable - 将数据表转换为 <> 列表的原因

> ID：13793830
> 
> 赞同：0
> 
> 时间：2012-12-10T01:35:42.030
> 
> 标签：datatable, vb.net-2010

我看到很多人问如何将数据表转换为`List Of<>`. 我试图了解从数据表转换为的原因是什么， 或者什么时候使用数据表而不是数据表`List Of<>`会更好。`List Of<>`

正如我所看到的，如果我正在从数据库中检索数据并且可以将数据源分配给网格、列表框等，为什么我要将它转换为`List Of<>`以及将其转换为的优势是`List Of<>`什么？

# linux - How to detect if a git clone failed in a bash script

> ID：13793836
> 
> 赞同：20
> 
> 时间：2012-12-10T01:36:19.660
> 
> 标签：linux, git, bash, shell

How can I tell if a `git clone` had an error in a bash script?

```
git clone git@github.com:my-username/my-repo.git 
```

If there was an error, I want to simply `exit 1`;

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-12-10T02:47:21.797

Here are some common forms. Which is the best to choose depends on what you do. You can use any subset or combination of them in a single script without it being bad style.

* * *

```
if ! failingcommand
then
    echo >&2 message
    exit 1
fi 
```

* * *

```
failingcommand
ret=$?
if ! test "$ret" -eq 0
then
    echo >&2 "command failed with exit status $ret"
    exit 1
fi 
```

* * *

```
failingcommand || exit "$?" 
```

* * *

```
failingcommand || { echo >&2 "failed with $?"; exit 1; } 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-12-10T01:42:01.333

You could do something like:

```
git clone git@github.com:my-username/my-repo.git || exit 1 
```

Or exec it:

```
exec git clone git@github.com:my-username/my-repo.git 
```

The latter will allow the shell process to be taken over by the clone operation, and if it fails, return an error. You can find out more about exec [here](http://wiki.bash-hackers.org/commands/builtin/exec).

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-11-11T21:01:09.940

**Method 1:**

```
git clone git@github.com:my-username/my-repo.git || exit 1 
```

**Method 2:**

```
if ! (git clone git@github.com:my-username/my-repo.git) then
    exit 1
    # Put Failure actions here...
else
    echo "Success"
    # Put Success actions here...
fi 
```

# symfony1 - symfony 项目中的 Phamlp

> ID：13793837
> 
> 赞同：0
> 
> 时间：2012-12-10T01:36:21.843
> 
> 标签：symfony1, symfony-1.4, haml, sass

两天前我的经理让我开始学习 Phamlp。

我使用 symfony 1.4 和 zurb 基础 css 框架开发我的项目。我想知道如何在我的项目中实施这项技术。

我在 Google 中搜索相关教程和帖子，但找不到相关资料。

是否可以在 symfony 框架 1.4 中实现这项技术以及如何实现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T22:53:03.880

也许你可以写一个类似于这个[http://www.symfony-project.org/plugins/sfHamlViewPlugin的插件](http://www.symfony-project.org/plugins/sfHamlViewPlugin)

# ruby - 从 Ruby 中的哈希中删除重复项

> ID：13793845
> 
> 赞同：2
> 
> 时间：2012-12-10T01:37:02.357
> 
> 标签：ruby, arrays, hash, uniq

我正在使用[Twitter Gem](http://sferik.github.com/twitter/)访问 Twitter API，并且我想创建一个变量，该变量仅`mentions`根据提及的文本存储唯一的变量。

现在，我像这样存储所有提及：`@allmentions = Twitter.mentions_timeline`

这是返回的提及示例`@allmentions[0]`

```
 => #<Twitter::Tweet:0x007fbffb59ab88 @attrs={:created_at=>"Mon Dec 10 01:28:11 +0000 2012", :id=>277947788216639488, :id_str=>"277947788216639488", :text=>"@person hi", :source=>"web", :truncated=>false, :in_reply_to_status_id=>nil, :in_reply_to_status_id_str=>nil, :in_reply_to_user_id=>11739102, :in_reply_to_user_id_str=>"11739102", :in_reply_to_screen_name=>"person", :user=>{:id=>1000628702, :id_str=>"1000628702", :name=>"test account", :screen_name=>"testaccountso", :location=>"", :description=>"", :url=>nil, :entities=>{:description=>{:urls=>[]}}, :protected=>false, :followers_count=>0, :friends_count=>0, :listed_count=>0, :created_at=>"Mon Dec 10 01:27:39 +0000 2012", :favourites_count=>0, :utc_offset=>nil, :time_zone=>nil, :geo_enabled=>false, :verified=>false, :statuses_count=>1, :lang=>"en", :contributors_enabled=>false, :is_translator=>false, :profile_background_color=>"C0DEED", :profile_background_image_url=>"http://a0.twimg.com/images/themes/theme1/bg.png", :profile_background_image_url_https=>"https://si0.twimg.com/images/themes/theme1/bg.png", :profile_background_tile=>false, :profile_image_url=>"http://a0.twimg.com/sticky/default_profile_images/default_profile_3_normal.png", :profile_image_url_https=>"https://si0.twimg.com/sticky/default_profile_images/default_profile_3_normal.png", :profile_link_color=>"0084B4", :profile_sidebar_border_color=>"C0DEED", :profile_sidebar_fill_color=>"DDEEF6", :profile_text_color=>"333333", :profile_use_background_image=>true, :default_profile=>true, :default_profile_image=>true, :following=>nil, :follow_request_sent=>false, :notifications=>nil}, :geo=>nil, :coordinates=>nil, :place=>nil, :contributors=>nil, :retweet_count=>0, :entities=>{:hashtags=>[], :urls=>[], :user_mentions=>[{:screen_name=>"person", :name=>"Person", :id=>1173910, :id_str=>"1173910", :indices=>[0, 6]}]}, :favorited=>false, :retweeted=>false}> 
```

我可以像这样访问提及的文本：`@allmentions[0].text`

是否有内置的 ruby​​ 方法（或简单的方法）让我只存储在 text 属性中具有唯一值的提及？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T01:43:42.253

是的，你可以`uniq`用块调用。

例如：

```
@allmentions.uniq {|m| m.text} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T01:45:30.347

为了回答我自己的问题，我做了一些研究，似乎这样可行：

```
 no_dupes = $allmentions.uniq { |h| h[:text] } 
```

# jquery - jquerymobile pageShow , PrevPage

> ID：13793846
> 
> 赞同：1
> 
> 时间：2012-12-10T01:37:29.783
> 
> 标签：jquery, jquery-mobile

我有 3 个 JqueryMobile 页面：

第 1 页、第 2 页和第 3 页

每个人都可以导航到第 3 页，我正在使用以下代码：

```
 $('#Page3').on('pageshow', function (object) {
            //  Change enabled status 
            $('#MenuItemEnPedido').find('a').each(function () {
                $(this).addClass('ui-disabled');
            });
            $('#PagDocumentoOpcionDetalle').removeClass('ui-disabled');
        }); 
```

要更改一些选项，但我需要知道pageshow 事件返回的**对象页面的 id。**不是目标 id，只是 prevPage Id。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T09:18:17.770

这是一个如何从 jQM 检索最后一页数据的示例：http: [//jsfiddle.net/Gajotres/mfC8j/](http://jsfiddle.net/Gajotres/mfC8j/)

在 pagebeforeshow 事件期间，您可以访问最后一页数据并将其用于下一个：

```
$('#page2').on('pagebeforeshow', function (e, data) {
    alert(data.prevPage.attr('id'));
}); 
```

prevPage 是一个包含整个最后一页的对象。

# c++ - 指向其值的双向链表的析构函数

> ID：13793848
> 
> 赞同：2
> 
> 时间：2012-12-10T01:38:04.583
> 
> 标签：c++, memory, linked-list

假设我有一个由类定义的双向链表

```
 class list
    {
        /*...*/

    private:
        struct node
        {
           node* prev;
           node* next;
           int* value;
        }

        node* first; //NULL if none
        node* last; //NULL if none

        /*...*/
    } 
```

如果我想为此列表创建析构函数，是否必须显式删除该值？

```
list::~list()
{
    node* move = first;
    while(first)
    {
        first = move->next;
        delete move;
        move = first;
    }
} 
```

上述是否可以确保没有内存泄漏？还是我必须这样做：

```
list::~list()
{
    node* move = first;
    while(first)
    {
        first = move->next;
        delete move->value;
        delete move->prev;
        delete move;
        move = first;
    }
} 
```

我对如何确保在这种情况下没有内存泄漏感到困惑。如何专门处理节点中的指针？如果我删除 move 它会自动处理这些吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T01:42:12.880

您需要将每个都`new`与一个`delete`. 也就是说，您可能不想`delete prev`（此节点已被删除）但您想要`delete value`. 好吧，我将 嵌入`value`到对象中而*不是*指向它：

```
struct node
{
     node* prev;
     node* next;
     int   value;
}; 
```

如果`value`绝对需要是一个指针，我会使用 a `std::unique_ptr<int>`（或者，如果你需要使用 C++ 2003，a `std::auto_ptr<int>`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T01:45:17.060

对于每个成功的`new`表达式，在该对象上只`delete`调用*一次。*

对于每个成功的`new[]`表达式，在该对象上只`delete[]`调用*一次。*

这意味着您的清理功能都没有问题：

*   第一个函数忘记`delete`了`value`，这意味着**内存泄漏**。

*   第二个函数，通过删除列表`move`中`move->prev`的每个节点，有可能会删除大多数节点两次，这就是**Undefined Behavior**。

为了避免第一个函数的内存泄漏，只需直接存储整数而不是动态分配它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T01:49:04.367

是否必须通过`value`成员删除内存指针——只有你自己知道。这是一个内存所有权的问题，一个你的设计问题。如果列表*拥有*成员指向的数据内存`value`，那么您必须在列表析构函数中将其删除（即，当列表消失时，它拥有的数据也随之消失）。

如果列表不拥有`value`内存，那么您不应该删除它。同样，只有您可以回答您的列表是否应该拥有`value`内存的问题。这是你的意图问题。

现在，至于`node`对象占用的内存，显然是链表拥有的，所以必须在析构函数中小心地释放。您的析构函数的第一个版本几乎是正确的（第二个版本根本没有意义），只是它以稍微模糊的方式编写。这应该足够了

```
list::~list()
{
  while (first)
  {
    node *move = first;
    first = first->next;
    delete move;
  }
} 
```

（同样，如果你必须删除`value`，那么`delete move->value`应该在你的循环之前添加`delete move`。）

PS 一旦你得到这个，你可能想要研究各种智能指针类，它们允许你显式地表达内存所有权关系，从而使编译器知道它们。如果使用得当，它们将使内存管理几乎自动化。

# javascript - 如果我在原型上定义方法，如何在构造函数中调用它们？

> ID：13793852
> 
> 赞同：0
> 
> 时间：2012-12-10T01:38:50.313
> 
> 标签：javascript, oop, class, constructor

我知道将方法直接分配给类的原型是一种很好的做法，这样每次调用函数时就不会重新定义它们。

```
var A = function () {
    this.prop = "A property";
}
A.prototype.method = function () {
    return "A method";
} 
```

假设我想在构造函数中调用以这种方式定义的方法。这可能吗？

```
var A = function (options) {
    initialize(options); // initialize is undefined.
}
A.prototype.initialize = function (options) {
    // do something with options.
} 
```

在构造函数中创建存根方法不起作用，因为它被调用而不是原型的函数版本。我能够让它工作的唯一方法是通过括号语法引用该函数，`this["initialize"]()`这似乎很不雅。

```
var A = function (options) {
    this["initialize"](options); // function isn't defined yet but will be soon!
}
A.prototype.initialize = function (options) {
    // do something with options.
} 
```

这看起来很笨拙，可能不是调用此函数的最佳方式。**还有其他方法还是我错过了什么？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T01:41:36.803

您的最后一种方式是正确的，但您不需要引号。

```
var A = function (options) {
    this.initialize(options); 
};
A.prototype.initialize = function (options) {
    // do something with options.
}; 
```

假设`A`作为构造函数被调用，`this`是对正在构造的新对象的引用，并且它的原型链已经建立，因此它已经可以访问该`initialize`方法。

当然，`initialize`不需要原型。如果不打算多次调用它，那么将其定义为独立函数可能更有意义。

```
var A = function (options) {
    initialize(this, options); 
};
function initialize (obj, options) {
    // do something with options.
}; 
```

或者您可以将初始化代码直接放在构造函数中。

# bcrypt - 用于 C 的简单 bcrypt 库

> ID：13793856
> 
> 赞同：15
> 
> 时间：2012-12-10T01:39:51.550
> 
> 标签：bcrypt

我正在为 C 寻找一个简单易用的跨平台 bcrypt 库。我搜索了几个地方，但似乎没有什么能比得上以下的易用性：

[http://bcrypt.codeplex.com/SourceControl/changeset/view/1eef0262901c#BCrypt.Net.Test%2fTestBCrypt.cs](http://bcrypt.codeplex.com/SourceControl/changeset/view/1eef0262901c#BCrypt.Net.Test%2fTestBCrypt.cs)

为什么与这个 .NET lib 相比，它的所有 C 实现都是一场噩梦？基本上2个功能是我正在寻找的。

1）生成盐（返回一个字符串）

2）使用给定的盐和密码哈希字符串（返回一个字符串）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-18T20:59:25.167

您的 bcrypt 的 C 选项似乎是：

*   在 OpenBSD 中：[https ://github.com/openbsd/src/blob/master/lib/libc/crypt/bcrypt.c](https://github.com/openbsd/src/blob/master/lib/libc/crypt/bcrypt.c)

*   在 OpenWall 中：http: [//openwall.com/crypt/](http://openwall.com/crypt/)

C 实现似乎非常易于使用。OpenBSD 版本如下所示：

```
char *bcrypt(const char *key, const char *salt);

char *bcrypt_gensalt(u_int8_t log_rounds); 
```

PS 考虑[scrypt](http://www.tarsnap.com/scrypt.html)新代码，如果你不限于使用 bcrypt 只是由于向后兼容性，

# r - 用于 R Markdown 的 Jekyll 转换器

> ID：13793858
> 
> 赞同：11
> 
> 时间：2012-12-10T01:40:03.920
> 
> 标签：r, jekyll, knitr, r-markdown

我正在尝试为 R Markdown 文件编写 Jekyll 转换器。我创建`RMarkdownConverter.rb`并将它放在我的`_plugins`目录中。我已经验证了其他插件正在工作，但这个不是。我也没有看到任何错误消息，包括我自己输入的错误消息。这似乎没有被使用。然而，Jekyll 正在为我的文件生成一个 HTML 文件，`.Rmd`但只是将 R 卡盘作为代码卡盘处理。任何帮助或想法将不胜感激。

`RMarkdownConverter.rb`文件：

```
module Jekyll
    class RMarkdownConverter < Converter
        safe true
        priority :low

    def setup
      STDERR.puts "Setting up R Markdown..."
      return if @setup
      require 'rinruby'
      @setup = true
    rescue
      STDERR.puts 'do `gem install rinruby`'
      raise FatalException.new("Missing dependency: rinruby")
    end

        def matches(ext)
            ext =~ /Rmd/i
        end

        def output_ext(ext)
           '.html'
        end

        def convert(content)
      setup
      STDERR.puts "Using R Markdown..."
      R.eval "require(knitr)"
      R.eval "render_markdown(strict=TRUE)"
      R.assign "content", content
      STDERR.puts content
      R.eval "out <- knit(text=content)"
      R.eval "print(out)"
        end
    end
end 
```

我的第一篇 R Markdown 帖子的内容：

```
--- 
layout: post
title: Using (R) Markdown, Jekyll, and Github for Blogging
published: true
tags: R R-Bloggers Jekyll github
type: post
status: publish
---

First, we need to install [RinRuby](https://sites.google.com/a/ddahl.org/rinruby-users/) to call R from Ruby. In the terminal, execute:

    gem install rinruby

First R chuck:

```{r}
2 + 2
``` 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T04:48:14.723

尝试用以下内容替换最后几行

```
R.assign "content", content
R.eval "knitr::render_markdown(strict = TRUE)"
R.pull "(knitr::knit2html(text = content, fragment.only = TRUE))" 
```

我认为您需要`R.pull`将 R 输出的内容复制到 Ruby。此外，我建议直接从 Rmd 转换为 html。我已经成功地使用了这个策略来与另一个基于 ruby​​ 的博客平台[Ruhoh合作。](http://www.ruhoh.com)

更新。这很奇怪，但使用扩展名 rmd 似乎与 md 冲突。我将其随机更改为`ram`jekyll 似乎正确拾取它。我不确定为什么。

# ruby-on-rails - 我应该如何路由到嵌套控制器中未嵌套的操作？

> ID：13793862
> 
> 赞同：0
> 
> 时间：2012-12-10T01:40:17.030
> 
> 标签：ruby-on-rails, routes, nested

我有一个资源 - 活动，它嵌套在提供者下。对于我所有的宁静资源来说，一切都很好。

我想添加一个新操作来列出所有活动，而不考虑提供者。所以我认为不应该嵌套。

我试着这样做：

```
resources :activities, only: [:list] 
```

但是，当我 rake 路由时，这不会创建路由，并且出现错误：

```
No route matches [GET] "/activities/list" 
```

我该怎么做呢？这是做我想做的事情的正确方法吗 - 显示所有提供者活动的列表，其视图/布局与嵌套的 provider#activities 操作不同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T02:10:51.597

好的。我（重新）阅读了手册并按照它所说的做了，并且奏效了。去搞清楚。

```
resources :activities do
    get 'list', :on => :collection
  end 
```

因此，使用路径和 url 方法和嵌套资源将列表操作添加到路由仍然有效。

# objective-c - Objective-C 的抽象类

> ID：13793864
> 
> 赞同：1
> 
> 时间：2012-12-10T01:40:33.673
> 
> 标签：objective-c, abstract-class

> **可能重复：**
> [在 Objective C 中创建抽象类](https://stackoverflow.com/questions/1034373/creating-an-abstract-class-in-objective-c)

我想在 Objective-C 项目中创建抽象类。

但是，我找不到诸如“抽象”（在 java 中）、“虚拟”（在 c++ 中）之类的想法。

Objective-C 没有抽象概念吗？谢谢你。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-10T08:30:35.943

没有抽象类，但您可以使用*类*和*协议*的组合来生成类似的东西（类似于 Java 的*interface*）。首先将您的抽象类划分为您希望为其提供默认实现的方法和您需要子类来实现的方法。现在在 an 中声明默认方法并在 an 中`@interface`实现它们`@implementation`，并在 an 中声明所需的方法`@protocol`。`class<protocol>`最后从实现协议的类派生您的子类。例如：

```
@interface MyAbstract

- (void) methodWithDefaultImplementation;

@end

@protocol MyAbstract

- (void) methodSubclassMustImplement;

@end

@implementation MyAbstract

- (void) methodWithDefaultImplementation { ... }

@end

@interface MyConcreteClass: MyAbstract<MyAbstract>
   ...
@end

@implementation MyConcreteClass

// must implement abstract methods in protocol
- (void) methodSubclassMustImplement { ... }

@end 
```

如果您担心对类和协议使用相同的名称，请查看`NSObject`遵循此模式的 Cocoa...

高温高压

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-10T01:43:54.907

正式地，没有。抽象类是通过在基类中存根方法来实现的，然后记录子类必须实现这些方法。作者有责任编写与类契约匹配的类，而不是编译器检查缺失的方法。

Objective-C 有*协议*，类似于 Java 接口。如果您正在寻找与*纯虚拟*C++ 类或 Java 中的*接口*等价的东西，这就是您想要的。

# javascript - 发布时获取错误的表单数据名称

> ID：13793879
> 
> 赞同：1
> 
> 时间：2012-12-10T01:42:10.987
> 
> 标签：javascript, jquery, ajax, post, form-data

我正在尝试将多个参数传递给 javascript 函数。查看发布数据时，我得到不正确的数据名称。

HTML：

```
//Test function with button (HTML)
<button onClick='printList("projects",{"qid":1,"oid":3),getSampleEntity);'>Test getSampleEntity</button> 
```

Javascript：

```
var getSampleEntity = function(oid, qid) {
    //Returns Object
    return $.ajax({ 
        url: URL + 'downloadQuadrat_Organism.php',
        type: 'POST',
        data: { 'organismID': oid, 'quadratID': qid },
        dataType: dataType
    });
}

....

var printList = function(lid,options,get) {
    var items = get(options);
    var list = $("ul#"+lid);

    list.empty();

    items.success(function(data){
        $.each(data, function(item,details) {
        var ul = $('<ul/>');
        ul.attr('id', lid+'_'+details.ID);
        var li = $('<li/>')
        .text(details.ID)
        .appendTo(list);
        ul.appendTo(list);

        $.each(details,function(key,value) {
                var li = $('<li/>')
                .text(key+': '+value)
                .appendTo(ul);
            });
        });
    });
} 
```

生成的帖子数据：

```
organismID[qid]:1
organismID[oid]:3 
```

我知道发生了什么，但我的问题是如何将多个参数传递给我的 printList()，以便将这些参数有效地传递给 getSapleEntity()？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T01:45:50.633

尝试

```
var items = get(options.oid, options.qid); 
```

# asp.net - 错误 SCRIPT5007: Unable to get value of the property ... 是什么意思？

> ID：13793882
> 
> 赞同：0
> 
> 时间：2012-12-10T01:42:25.610
> 
> 标签：asp.net, internet-explorer-9

我在 IIS 7.5 上运行一个 asp.net 3.5 网站。默认页面在 chrome firefox 中加载正常。但是，在 IE 9 中运行时，出现此错误：

```
SCRIPT5007: Unable to get value of the property 'onBeforeSeek': object is null or undefined 
```

我试图在 default.aspx 页面中放置一个元标记：

```
<meta http-equiv="X-UA-Compatible" content="IE=8"> 
```

这不能解决问题吗？有人知道怎么修这个东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T14:50:08.777

这个错误的意思正是它所说的：`object is null or undefined`。可能你有这样的事情：

```
some_object.onBeforeSeek = some_value; 
```

错误消息只是意味着，`some_object`即为空或未定义。为什么会出现此错误，如果不查看更多代码，很难说。可能的原因是时间（在 DOM 准备好之前获取属性）、无效的 HTML 等。

# matlab - MATLAB - 向量化包含距离测量的双循环

> ID：13793887
> 
> 赞同：1
> 
> 时间：2012-12-10T01:43:10.833
> 
> 标签：matlab, optimization, vectorization

我正在尝试优化我的代码，但不确定如何以及是否能够对这个特定部分进行矢量化？

```
for base_num = 1:base_length
    for sub_num = 1:base_length
    dist{base_num}(sub_num) = sqrt((x(base_num) - x(sub_num))^2 + (y(base_num) - y(sub_num))^2);
    end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T01:57:01.943

以下示例提供了一种矢量化方法：

```
%# Set example parameters
N = 10;
X = randn(N, 1);
Y = randn(N, 1);

%# Your loop based solution
Dist1 = cell(N, 1);    
for n = 1:N
    for m = 1:N
        Dist1{n}(m) = sqrt((X(n) - X(m))^2 + (Y(n) - Y(m))^2);
    end
end

%# My vectorized solution
Dist2 = sqrt(bsxfun(@minus, X, X').^2 + bsxfun(@minus, Y, Y').^2);
Dist2Cell = num2cell(Dist2, 2); 
```

在 的快速速度测试中`N = 1000`，矢量化解决方案的运行速度比循环解决方案快两个数量级。

注意：我在矢量化解决方案中使用了第二行来模拟您的单元阵列输出结构。由您决定是要包含它还是两个将其组合成一行等。

顺便说一句，+1 用于在问题中发布代码。但是，对未来有两个小建议：1）发布到 SO 时，使用简单的变量名——尤其是循环下标——就像我在回答中所说的那样。2）当我们可以将示例代码直接复制并粘贴到脚本中并运行它而无需进行任何更改或添加（再次如我的回答中）时，这很好。这使我们能够更快地收敛到一个解决方案。

# jquery - jQuery无限滚动，来自数据的分页链接

> ID：13793888
> 
> 赞同：-1
> 
> 时间：2012-12-10T01:43:23.703
> 
> 标签：jquery, infinite-scroll

我有一个自定义的 jQuery 无限滚动脚本：

```
jQuery(document).ready(function() {
    var footer = jQuery('.pagination'),
    opts = {
        offset: '100%'
    };
    footer.waypoint(function(event, direction) {
        footer.waypoint('remove');
        jQuery.get(jQuery('.pagination-next a').attr('href'), function(data) {
            var data = jQuery(data);
            jQuery('#timeline').append(data.find('.timeline-item'));
            footer.waypoint(opts);
        });
    }, opts);
}); 
```

我正在使用航点插件来检测视口。我的问题是：我想`attr`从数据页面href，当前我的代码`attr`href形成同一个页面，并且每次加载相同的内容`.pagination-next a`，因为当前页面上的链接是相同的。如果我能够`.pagination-next a`从数据页面获取下一个链接，那么它将解决问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T02:49:44.237

你是否也有`.pagination-next a`在下一个数据页面加载？如果是这种情况，那么我认为删除上一个下一个链接将解决您的问题；因为我的猜测是您的页面中仍然有多个下一个链接，并且`jQuery.get`调用将使用`jQuery('.pagination-next a')`集合中存在的第一个链接（这是旧链接）。

我认为这很简单：

```
footer.waypoint(function(event, direction) {
    footer.waypoint('remove');
    jQuery.get(jQuery('.pagination-next a').remove().attr('href'), function(data) {
        jQuery('#timeline').append(jQuery(data).find('.timeline-item'));
        footer.waypoint(opts);
    });
}, opts); 
```

# css - 将 CSS 表单应用于浏览器

> ID：13793889
> 
> 赞同：0
> 
> 时间：2012-12-10T01:43:24.913
> 
> 标签：css, browser

我在互联网上遇到了一个无法停止用大写字母写所有东西的人。她有眼睛问题，只是不想一直放大和缩小来阅读小写字母。

我想编写一个 CSS 样式表，将页面中的所有文本转换为大写。通过一些谷歌搜索，我可以独自完成这项工作，但如果有人可以在这里帮助我，那将会很有用。

最重要的是，我想将此 CSS 表应用到浏览器：这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T01:48:31.710

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T08:26:25.310

One of the simplest ways is probably to use Stylish in Firefox. It lets you add a style sheet to be applied on all pages, in a manner that is easy to switch off then needed. And you could simply write

```
* { text-transform: uppercase !important; } 
```

Without the `!important` specifier, the style sheet would be ineffective as regards to elements that have `text-transform` set in page style sheet.

Note that this only changes the display of characters. When typing text in a textbox, without using the shift key, it would be displayed in upper case but, upon form submission, as well as in any scripted processing in the browser, it would still be in lower case.

# python - 在 python 中运行函数后是否更改变量？

> ID：13793891
> 
> 赞同：-1
> 
> 时间：2012-12-10T01:43:24.953
> 
> 标签：python, python-2.7

所以我从我正在阅读的一本书中编写了这个函数，它是这样开始的：

```
def cheese_and_crackers(cheese_count, boxes_of_crackers):
    print "You have %d cheeses!" % cheese_count
    print "You have %d boxes of crackers!" % boxes_of_crackers
    print "Man that's enough for a party!"
    print "Get a blanket.\n" 
```

好的，有道理。然后，这是运行这个函数的时候，我有点困惑，想确认一下：

```
print "OR, we can use variables from our script:"
amount_of_cheese = 10
amount_of_crackers = 50  

cheese_and_crackers(amount_of_cheese, amount_of_crackers) 
```

这里让我感到困惑的是，amount_of_cheese 和 amount_of_crackers 分别从函数中的第一个初始变量标签更改了 cheese_count 和 box_of_crackers 的变量（措辞？不确定我说的是不是正确的术语）。

所以我的问题是，当您使用与您编写的初始函数中使用的变量不同的变量时，为什么要在写出新变量名称之后更改名称？如果它显示在它之后，程序如何知道新变量是什么？

我认为python从上到下读取程序，还是从下到上读取程序？

那有意义吗？我不知道如何解释。感谢您的任何帮助。:) (python 2.7)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T01:47:27.870

我认为您对参数传递的命名规则有点困惑。

考虑：

```
def foo(a, b):
    print a
    print b 
```

您可以`foo`按以下方式调用：

```
x = 1
y = 2
foo(x, y) 
```

你会看到：

```
1
2 
```

函数签名（函数定义的第一行）中的参数 ( `a, b`) 的变量名不必与调用函数时使用的实际变量名一致。

当你打电话时，可以这样想：

```
foo(x, y) 
```

它的意思是：“调用函数`foo`；传入`x`as `a`，传入`y`as `b`”。此外，这里的参数是作为副本传入的，因此如果您要在函数内部修改它们，它不会更改函数外部的值，即调用它的位置。考虑以下：

```
def bar(a, b):
    a = a + 1
    b = b + 2
    print a

x = 0
y = 0
bar(x, y)
print x
print y 
```

你会看到：

```
1
2
0
0 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T01:47:44.957

该脚本从上到下运行。该函数在您调用它时执行，而不是在您定义它时执行。

我建议首先尝试理解变量和函数参数传递等概念。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T01:48:33.180

```
def change(variable):
    print variable

var1 = 1
change(var1) 
```

在上面的例子中，`var1`是执行主线程中的一个变量。

当你调用像 change() 这样的函数时，*范围*会发生变化。只要您仍在该函数的范围内，您在该函数之外声明的变量就不再存在。但是，如果您将参数传递给它，例如 var1，那么您可以在函数中使用该值，使用您在函数声明中给出的名称：在这种情况下，`variable`. 但它*与*! *值*相同，但它是一个不同`var`的*变量*！

 *** * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T01:54:07.680

您的问题与**功能参数传输**有关。

有两种类型的参数传递到函数中：

*   按值 -------- 函数域中的值改变但全局域没有改变
*   通过引用 -------- 全局域中的值更改

在python中，非原子类型是通过引用传递的；原子类型（如字符串、整数）按值传输。

例如，

情况1：

```
x = 20
def foo(x): 
    x+=10
foo()
print x // 20, rather than 30 
```

案例二：

```
d = {}
def foo(x): x['key']=20
foo(d)
print d // {'key': 20} 
```**

# jquery - 移除彩盒关闭动画

> ID：13793895
> 
> 赞同：0
> 
> 时间：2012-12-10T01:43:58.050
> 
> 标签：jquery, colorbox

如何删除彩盒关闭动画？

我正在显示很多缩略图；单击时，将显示一个包含完整内容的颜色框，其中包含指向所述内容的颜色框幻灯片的链接。当幻灯片颜色框关闭时，我重新打开了原始的完整内容，但关闭动画清楚地表明幻灯片在重新打开内容之前关闭。当我在初始化选项中将过渡设置为无时，会删除开始过渡，但不会删除结束动画。

谢谢！

* * *

初始化内容：

```
 var trip = getTripById(this.id);
        currentTrip = trip;
        var tripModal = createTripModal(trip);
        openTripModal(tripModal); 
```

出行模态内容：

```
var currentTrip;

function openTripModal(tripModal)
{
    var trans = "elastic";
    if(arguments[1] == "none")
    {
        console.log(arguments);
        trans = "none";
    }
    $.colorbox(
        {
            html: tripModal,
            transition: trans,
            onComplete: function(){
                console.log("complete loaded");
                $(".photos").colorbox(   
                        {   
                            html: "If you close me, I will hopefully open the current trip again",
                            onClosed: function(){
                                console.log('closing photoslides1');
                                var modal = createTripModal(currentTrip);
                                openTripModal(modal, "none");
                            },
                            transition:"none"
                        }
                );
            }
        }
    );
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T02:01:41.117

我最终将原始`$.colorbox.close`函数保存在不同的变量中，并将函数设置`$.colorbox.close`为不同的函数以打开我之前显示的信息。打开之前的信息（我有一个全功能打开），我恢复原来的`$colorbox.close()`功能。

```
var currentTrip;

var originalClose;

function getOrig(){
    return $.colorbox.close;
}

originalClose = getOrig();

function openTripModal(tripModal)
{
    $.colorbox.close = originalClose; 
    $.colorbox(
        {
            html: tripModal,
            onComplete: function(){
                $(".photos").colorbox(   
                    {   
                        html: createTripSlideshow(currentTrip.id),
                        onComplete: function(){
                            thumbs$ = $('.trip-thumbnails') 
                              .anythingSlider({
                                   mode: "horizontal",
                                   buildArrows         : false,      // If true, builds the forwards and backwards buttons 
                                   buildNavigation     : false,      // If true, builds a list of anchor links to link to each panel 
                                   buildStartStop      : false,      // If true, builds the start/stop button              autoPlay: true,
                                   width: 138,
                                   height: 80,
                                   hashTags: false,
                                   showMultiple: 6,
                                   changeBy: 1,
                                   animationTime: 0
                               });
                                thumbs = thumbs$.data('AnythingSlider');

                            slider$ = $('.trip-slideshow') 
                              .anythingSlider({
                                   mode: "horizontal",
                                   buildArrows         : false,      // If true, builds the forwards and backwards buttons 
                                   buildNavigation     : false,      // If true, builds a list of anchor links to link to each panel 
                                   buildStartStop      : false,      // If true, builds the start/stop button              autoPlay: true,
                                   width: 570,
                                   hashTags: false,
                                   height: 380,
                                   onSlideComplete : function()
                                   {
                                       slideTemp = slider$.data('AnythingSlider');
                                        $('.slideshow-title .slide-number').text(   slideTemp.currentPage + " / " +  slideTemp.pages   );
                                        $('.thumbclick').removeClass('active');
                                        $(".trip-thumbnails").find("li:eq("+slideTemp.currentPage+")").find("img").addClass('active');
                                   }
                               });
                                slider = slider$.data('AnythingSlider');
                                $(".slideshow-wrap .next-arrow").click(function(){
                                    slider.goForward(); 
                                    if( !slider.playing )
                                    {
                                        $('.slides-play').removeClass('pause');
                                        slider.startStop( slider.playing ); 
                                    }
                                });
                                $(".slideshow-wrap .prev-arrow").click(function(){
                                    slider.goBack();
                                    if( !slider.playing )
                                    {
                                        $('.slides-play').removeClass('pause');
                                        slider.startStop( slider.playing ); 
                                    }
                                });
                                $(".slideshow-wrap .slides-play").click(function(){
                                    var play = slider.playing;
                                    if(!play)
                                        $('.slides-play').addClass("pause");
                                    else
                                        $('.slides-play').removeClass("pause");
                                    slider.startStop( !play );
                                });

                                $(".thumbnail.next-arrow").click(function(){
                                    thumbs.goForward(); 
                                });

                                $(".thumbnail.prev-arrow").click(function(){
                                    thumbs.goBack();
                                });

                                $.colorbox.close = function(){
                                    slider.startStop(false);
                                    $('trip-slideshow').remove();
                                    $('trip-thumbnails').remove();

                                    var modal = createTripModal(currentTrip);
                                    openTripModal ( modal );    
                                }

                                $(".thumbclick").click(function()
                                {
                                    var len = this.src.length;
                                    var index = this.src.substring( len - 6, len - 4  );
                                    index = parseInt(index, 10);
                                    $('.trip-thumbnails').anythingSlider( index );
                                    $('.trip-slideshow').anythingSlider( index );
                                    $('.slides-play').removeClass('pause');

                                });

                        }
                    } 
                );// end photos modal

                var formHtml = createFormHtml(currentTrip);
                $(".request-info").colorbox(  
                    {
                        html: formHtml,
                        onComplete: function()
                        {
                            $.colorbox.close = function(){
                                var modal = createTripModal(currentTrip);
                                openTripModal ( modal );    
                            }
                            $('.trip-information-request .cancel').click(function()
                              {
                                $.colorbox.close();                               
                              }
                            );

                            $('.trip-information-request form').validate(
                                {
                                    rules: {
                                        f_firstname: "required",
                                        f_lastname: "required",
                                        f_email: "required email",
                                        f_phone: "required"
                                    },
                                    messages: {
                                        f_firstname: "Please provide your first name", 
                                        f_lastname: "Please provide your last name",
                                        f_email:{
                                            required: "Please enter your email",
                                            email: "Please enter a valid email"
                                        },
                                        f_phone: "Please provide your phone number"
                                    },
                                    submitHandler: function( )
                                    {
                                        //submit code
                                        alert("validation successully passed");

                                        var thankYou ="                 <div class='trip-information-request'>\
                                                            <p class='trip-thank-you-header'>Thank you!</p>\
                                                            <p class='trip-thank-you'>\
                                                                We've received your email and will respond within 2 business days.\
                                                            </p>\
                                                            <p class='trip-thank-you'>\
                                                                If you have any additional questions, please contact us at 1.xxx.xxx.xxxx.\
                                                            </p>\
                                                            <div class='trip-thank-you return'>\
                                                                return to trips\
                                                            </div>\
                                                        </div>";

                                        $.colorbox({html:thankYou, onComplete: function(){   $('.trip-thank-you.return').click(function(){ $.colorbox.close();}); }});                                      

                                    }
                                }
                            );
                            $('.trip-information-request .submit').click(function(){$('.trip-information-request form').submit();   $.colorbox.resize(); });
                        }
                    }
                );

            }//end oncomplete function
        }
    );
} 
```

# java - 如何在 Java 应用程序中为我的菜单栏设置键盘快捷键？

> ID：13793900
> 
> 赞同：1
> 
> 时间：2012-12-10T01:45:28.243
> 
> 标签：java, keyboard-shortcuts, awt, menubar

我正在用 Java 开发一个简单的绘图应用程序。我仅限于使用 AWT 菜单栏（不是 JMenuBar），我需要设置一些键盘快捷键，但我找不到如何设置。我需要两个 MenuItem 和三个 CheckBoxMenuItem 的快捷方式。

它会是这样的：

```
newItem = Ctrl+N
quitItem = Ctrl+Q
rectangleItem = Ctrl+R
ovalItem = Ctrl+O
lineItem = Ctrl+L 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T02:06:43.513

由于评论中的建议似乎至少解决了您的部分问题，因此我将把它放在这里作为未来用户的答案。

[阅读本文档](http://docs.oracle.com/javase/1.4.2/docs/guide/awt/1.3/designspec/mouseless.html)的后半部分并更改`MenuItem`构造函数以将 a`MenuShortcut`作为第二个参数，如下所示（取自链接的文档）：

```
menu.add(new MenuItem("Save...", new MenuShortcut('s')); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T01:57:02.723

如果：

放一个分层窗格？前面有一个玻璃，它将接受整个区域的键盘事件。

*   不确定 awt 的组件是什么，但可以肯定你有充分的理由使用它，而不仅仅是外观和感觉？

在那里你设置了快捷方式。

# javascript - 如何在附加组件中包含可在任何地方使用的脚本？

> ID：13793904
> 
> 赞同：0
> 
> 时间：2012-12-10T01:45:35.517
> 
> 标签：javascript, firefox-addon

在我的 firefox 插件中，我有一个名为“global.js”的脚本，我需要在多个对话 (xul) 中使用它。我需要在每个 xul 文件中包含脚本，还是有更好的方法？我从每个对话中调用相同的函数，因此我需要它们可用于插件中的任何位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T11:23:18.113

是的，您需要将它包含在每个 XUL 文件中。如果您需要访问多个文件，则可以使用文件中的[JavaScript 代码模块](https://developer.mozilla.org/en-US/docs/JavaScript_code_modules)引用它们，`global.js`这样您就不必在添加新依赖项时不断更改多个 XUL 文件。

还有其他选项（例如拥有一个 XUL 文件和一堆覆盖来修改它以用于特定目的）但在不了解您的用例的情况下，我会说您最好还是硬着头皮把它包括在内一个脚本文件无处不在。

# applescript - “从网页获取链接 URL”操作结果的奇怪行为

> ID：13793905
> 
> 赞同：1
> 
> 时间：2012-12-10T01:45:41.567
> 
> 标签：applescript, automator

我正在构建一个 Automator 工作流程，它解析包含 Quicktime 视频文件的 Dropbox“图库”页面，并为每个文件自动构建“直接下载”链接。最后，我希望将所有链接生成到 Mail.app 消息的正文中。

基本上，一切都按预期工作，除了将新链接发送到新 Mail.app 消息的部分。我的问题是链接被发送到没有换行符的邮件正文，所以它们都被连接成一行，如下所示：

[https://dl.dropbox.com/u/149705/stackexchange/20121209/stackexchange_automator_prob2.png](https://dl.dropbox.com/u/149705/stackexchange/20121209/stackexchange_automator_prob2.png)

（Mail.app 似乎将连接的字符串包装在问号上）

最奇怪的是，如果我在工作流程结束时使用“复制到剪贴板”操作（而不是我的发送到邮件 Applescript），当我将相同的剪贴板内容粘贴到 TextEdit vs .BB编辑。

链接似乎正确粘贴到 TextEdit 中。但是，粘贴到纯文本 BBEdit 文档中的同一剪贴板仅产生第一个链接：

[https://dl.dropbox.com/u/149705/stackexchange/20121209/stackexchange_automator_prob5.jpg](https://dl.dropbox.com/u/149705/stackexchange/20121209/stackexchange_automator_prob5.jpg)

是什么导致这 3 种完全不同的行为与“获取链接 URL”操作的完全相同的结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T02:45:13.000

摆脱所有其他操作并使用您的图库 URL 更新 myPage。

```
on run
    set myPage to "https://www.dropbox.com/sh/aaaaaaaaaaaaaaa/aaaaaaaaaa"
    set myLinks to do shell script "curl " & quoted form of myPage & " | grep -Eo 'https://www.dropbox.com/sh/[^/]*/[^/\"]*/[^\"]*' | sed s'/https:\\/\\/www.dropbox.com\\(.*\\)/https:\\/\\/dl.dropbox.com\\1?dl=1/g'"

    tell application "Mail"
        activate
        make new outgoing message with properties {visible:true, content:"" & myLinks}
    end tell
end run 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T04:06:57.323

每个应用程序都不同，它了解或不了解输出的格式。

关于你的`AppleScript`行为：

**输入**是一个`AppleScript list`，从空字符串 "" 的强制执行单行，因为分隔符默认设置为 ""。

要获得所需的结果，请将分隔符设置为`return`或`linefeed`，如下所示。

```
on run {input}
    set {oTID, text item delimiters} to {text item delimiters, linefeed}
    set tContent to input as text
    set text item delimiters to oTID

    tell application "Mail"
        activate
        make new outgoing message with properties {visible:true, content:tContent}
    end tell
    return input
end run 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T17:38:11.667

您得到该结果的原因是链接以字符串列表开始，但作为单个字符串发送到 mail.app。

您不需要做任何花哨的事情来解决这个问题，只需在链接后添加一个**返回即可。**

我会用这个单一的“运行applescript”动作来完成整个工作。

该脚本仅收集文件 DL 链接。最后添加一个返回并将它们发送到 Mail.app。无需其他格式

```
 on run {input, parameters}

        set db_tag to "dl-web.dropbox.com/get"
        set myLinks to {}
        tell application "Safari"

            set thelinkCount to do JavaScript "document.links.length " in document 1
            repeat with i from 1 to thelinkCount

                set this_link to (do JavaScript "document.links[" & i & "].href" in document 1) as string

                if this_link contains db_tag then

--add the link with a carriage return on the end.

                    copy this_link & return to end of myLinks
                end if
            end repeat
        end tell

        tell application "Mail"
            activate
            make new outgoing message with properties {visible:true, content:"" & myLinks}
        end tell
    end run 
```

# python - 将字符串数组转换为日期时间并进行比较

> ID：13793908
> 
> 赞同：0
> 
> 时间：2012-12-10T01:45:55.797
> 
> 标签：python

我刚开始用 Python 编程，并且有一些简单的问题（可能）。我想做的是比较一些时间戳以找到最接近的时间戳。

基本上我想要做的是让当前的曲目在收音机上播放，他们有一个提要显示接下来的 20 个左右，以及曲目开始的时间。我想得到现在正在播放的内容！

这是一个示例字符串数组：

```
examples = ['2012-12-10 02:06:45', '2012-12-10 02:02:43', '2012-12-10 01:58:53'] 
```

现在我想做的是比较最接近现在（但不是更晚）的时间，以查看当前播放的内容。

到目前为止，这是我的脚本：

```
import datetime, itertools, time
currentTimeMachine = datetime.datetime.now()
now = currentTimeMachine.strftime("%Y-%m-%d %H:%M:%S")

examples = ['2012-12-10 02:06:45', '2012-12-10 02:02:43', '2012-12-10 01:58:53']
tmsg = examples.strftime('%d%b%Y')

 print [x for x in itertools.takewhile( lambda t: now > datetime.datetime.strptime(t, "%Y-%m-%d %H:%M:%S"), examples )][-1] 
```

最后一点我在其他地方捡到了，但我似乎无法让它工作。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T01:56:57.873

用于`datetime.datetime.strptime()`将字符串转换为日期时间对象。

```
>>> import datetime
>>> examples = ['2012-12-10 02:06:45', '2012-12-10 02:02:43', '2012-12-10 01:58:53']
>>> parsed_datetimes = [datetime.datetime.strptime(e, "%Y-%m-%d %H:%M:%S") for e in examples]
>>> parsed_datetimes
[datetime.datetime(2012, 12, 10, 2, 6, 45), datetime.datetime(2012, 12, 10, 2, 2, 43), datetime.datetime(2012, 12, 10, 1, 58, 53)] 
```

然后，这将获得与当前日期时间的最小差异日期时间，“*最接近现在*” `now`：

```
>>> now = datetime.datetime.now()
>>> min_time_diff, min_datetime = min((now - i, i) for i in parsed_datetimes)
>>> min_time_diff, min_datetime
(datetime.timedelta(0, 36265, 626000), datetime.datetime(2012, 12, 10, 2, 6, 45)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T02:00:40.757

由于您没有发布错误消息，因此根据您发布的代码，存在一些问题

1)`tmsg = examples.strftime('%d%b%Y')`不起作用，因为您在 strftime 列表上应用了调用

2）正如其他人已经指出的那样，在您将字符串与日期时间进行比较时。

这将起作用：

```
>>> import datetime, itertools, time
>>> currentTimeMachine = datetime.datetime.now()
>>> print [x for x in itertools.takewhile( lambda t: currentTimeMachine  > datetime.datetime.strptime(t, "%Y-%m-%d %H:%M:%S"), examples )][-1]
2012-12-10 01:58:53 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T03:00:17.200

其他答案已修复您的错误，因此您的算法现在可以正常运行。

但是算法本身是错误的。你想在不过去的情况下获得最接近现在的东西。但是你写的是：

```
 [x for x in itertools.takewhile(pred, examples)][-1] 
```

想想这意味着什么。首先，`takewhile`将返回示例，直到其中一个未通过谓词。然后你会拿最后一个成功的。因此，如果您的示例如下所示：

```
[now-3, now-10, now-5, now+3, now-9, now-1, now+9] 
```

首先，`takewhile`将产生`now-3, now-10, now-5`然后停止，因为`pred(now+3)`返回 False。然后，你拿最后一个，`now-5`。

如果您按升序对示例进行排序，这*将起作用：*

```
[now-10, now-9, now-5, now-3, now-1, now+3, now+9] 
```

Now`takewhile`将产生直到 的所有东西`now-1`，所以它产生的最后一件事就是你想要的。

但是您最初问题中的示例是*按降序*排列的，并且在对 Anthony Kong 的回答的评论中，您添加了一些根本不按任何顺序排列的示例。因此，您显然不能依赖它们按排序顺序排列。因此，一种可能的解决方法是对它们进行排序：

```
>>> import datetime, itertools, time
>>> currentTimeMachine = datetime.datetime.now()
>>> print [x for x in itertools.takewhile(lambda t: currentTimeMachine  > datetime.datetime.strptime(t, "%Y-%m-%d %H:%M:%S"), sorted(examples))][-1]
2012-12-10 02:06:45 
```

或者，为了使事情更具可读性，打破最后一行，并摆脱无关的列表理解：

```
>>> exampleDates = [datetime.datetime.strptime(t, "%Y-%m-%d %H:%M:%S") for t in examples]
>>> def beforeNow(t):
...     return currentTimeMachine > t
>>> print list(itertools.takewhile(beforeNow, sorted(exampleDates))[-1] 
```

然而，这是一种愚蠢的做事方式。您真正想要的是不在现在之后的示例中的最大值。所以只要把那个英文句子翻译成代码：

```
>>> print max(x for x in exampleDates if x <= currentTimeMachine) 
```

让我们把它们放在一起：

```
>>> examples = ['2012-12-10 02:06:45', '2012-12-10 02:02:43', '2012-12-10 01:58:53']
>>> exampleDates = (datetime.datetime.strptime(t, "%Y-%m-%d %H:%M:%S") for t in examples)
>>> currentTimeMachine = datetime.datetime.now()
>>> print max(t for t in exampleDates if t <= currentTimeMachine)
2012-12-10 02:06:45 
```

我使用了生成器表达式而不是列表，`exampleDates`因为您实际上不需要列表来处理任何只需要迭代一次的东西。如果您想保留它以供检查或重复使用，请将括号更改为方括号。

另外，我将 更改`<`为`<=`，因为您说“现在不晚”而不是“比现在早”（换句话说，现在应该算数）。

附带说明一下，因为您碰巧有 ISO 式时间戳，您实际上*可以*将它们排序为字符串：

```
>>> now = datetime.datetime.now()
>>> currentTimeMachine = datetime.datetime.strftime(now, "%Y-%m-%d %H:%M:%S")
>>> print max(t for t in examples if t <= currentTimeMachine)
2012-12-10 02:06:45 
```

这样做没有充分的理由，并且当您获得格式略有不同的时间戳（例如，`'2012-12-10 02:06:45'`比较之前`'2012-12-10Z01:06:45'`）时，它总是会导致您出现错误，但这实际上不是您的原始代码的问题。

# php - 带有奇数日期 2012-12-10-1 错误的重复日期条目

> ID：13793915
> 
> 赞同：1
> 
> 时间：2012-12-10T01:46:55.417
> 
> 标签：php, mysql

有人要求修复几年前使用自定义 CMS 创建的数据库中的错误。我仍然主要是前端人员，但我越来越多地进入这类项目并尝试学习，现在显示的错误是

```
 Fatal error: Duplicate entry '2012-12-10-1' for key 'PRIMARY' INSERT INTO stats SET pageID = '1', date = NOW(), visits = 1, views = 1 in /home/site/domains/domain.nl/public_html/cms/inc/functions.inc.php on line 10 
```

奇怪的是日期似乎有两个月。我了解正在将统计信息添加到统计数据库中，并且它与另一个重复。我只是无法使用 PHPMyAdmin 在表中找到此条目。我试着修理桌子，但没有帮助。错误是由functions.inc.php中的这个函数触发的：

```
function executeQuery($query) {
    global $website;
    static $count;
    benchmark("mysql", "start");
    if ($query == "count") {
        return $count;
    }
    $count++;
    $result = mysql_query($query, $website->DBConnection) or trigger_error("\n" . mysql_error() . "\n" . $query, E_USER_ERROR);
    $time += (microtime(true) - $tmp);
    benchmark("mysql", "stop");
    return $result;
} 
```

Page.class.php 上的函数是：

```
public function updateStats() {
        $result = executeQuery("SELECT count(*) FROM stats WHERE pageID = '" . $this->id . "' AND date = NOW()");
        $firstTime = mysql_result($result, 0) == 0;

        if ($firstTime) { // First time today someone visit this page
            executeQuery("INSERT INTO stats SET pageID = '" . $this->id . "', date = NOW(), visits = 1, views = 1");
            $_SESSION["stats"][$this->id] = true;
        } else {
            if (!$_SESSION["stats"][$this->id]) { // First time today this person visit this page
                executeQuery("UPDATE stats SET visits = visits + 1, views = views + 1 WHERE pageID = '" . $this->id . "' AND date = NOW()");
                $_SESSION["stats"][$this->id] = true;
            } else { // Second or more time someone visit this page.
                executeQuery("UPDATE stats SET views = views + 1 WHERE pageID = '" . $this->id . "' AND date = NOW()");
            }
        }
    } 
```

由于该错误，该站点似乎已关闭。我没有看到在 2012-10-04 之后输入的任何统计信息。如何创建这样的日期，称为 DUPLICATE，我该如何解决这个问题？任何帮助表示赞赏。

根据@Roman Newaza 的要求

```
SHOW CREATE TABLE stats
stats   CREATE TABLE `stats` (
 `date` date NOT NULL DEFAULT '0000-00-00',
 `views` int(11) NOT NULL DEFAULT '0',
 `visits` int(11) NOT NULL DEFAULT '0',
 `pageID` int(11) NOT NULL DEFAULT '0',
 PRIMARY KEY (`date`,`pageID`)
) ENGINE=MyISAM DEFAULT CHARSET=latin1 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T01:55:08.660

当您有复合主键时，重复条目错误消息将使用破折号分隔符进行格式化，例如`X-Y`，其中 X 是一列中的值，Y 是第二列中的值。

在这种情况下，默认日期格式中也有破折号只是巧合。

```
INSERT INTO stats SET pageID = '1', date = NOW(), visits = 1, views = 1 
```

因此，您将`date`列设置为 NOW()，即“2012-12-10”和第二个整数列（我猜`pageID`），值为“1”。这两个值的组合已经在表中，这就是违反主键的原因。我由此推断您的表定义类似于：

```
CREATE TABLE stats (
  `date` DATE NOT NULL,
  `pageID` INT NOT NULL,
  `visits` INT NOT NULL,
  `views` INT NOT NULL,
  -- possibly more columns
  PRIMARY KEY (`date`, `pageID`)
); 
```

至于为什么在 2012-12-04 之后看不到任何数据，我可以猜测重复键错误导致事务回滚，因此导致错误的条目和与之冲突的行都被撤消.

# c# - 在一个变量中将多个 DropDownList 选定值传递给控制器

> ID：13793916
> 
> 赞同：1
> 
> 时间：2012-12-10T01:46:59.197
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3

我的 MVC3 Web 应用程序中有一个页面，其中有一个包含 20 行左右的表格。每行都有一个下拉列表（每行的下拉列表相同）。

我希望能够在一个数组中将所有下拉 SelectedValues 传递回我的控制器。

我做了类似的事情，我有一堆复选框都命名相同的东西，然后我能够将 int[] checkboxname 放入控制器签名中。同样的事情似乎不适用于下拉菜单。它只会将 1 个值传回控制器，而不是一个值数组。

基本上在我看来，我有

```
Loop start
    @Html.DropDownList("gridMultipliers", (SelectList)ViewBag.GridMultiplierList)
Loop End 
```

然后在我的控制器签名中，我有

```
public ActionResult MyMethod(int[] gridMultipliers){
    //stuff here
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T12:06:11.213

I'm pretty sure you're going to have to do something more along these lines:

```
@Html.DropDownList("gridMultipliers" + i, (SelectList)ViewBag.GridMultiplierList) 
```

where `i` is the loop iteration. This should then get transformed into an array when it's posted.

# javascript - JSON理解和数组

> ID：13793919
> 
> 赞同：1
> 
> 时间：2012-12-10T01:47:44.067
> 
> 标签：javascript, json

我正在对 JS 脚本进行逆向工程。某处说：

```
var a = [{
    name: 'sample1',
     data: ["Otu1", "Otu2", "Otu3", "Otu4", "Otu5"],
     values: [5, 15, 250, 20, 23]
  },{
    name: 'sample2',
     data: ["Otu1", "Otu5", "Otu6", "Otu7"],
     values: [234, 29, 239, 5]
  }] 
```

第一个问题：它是什么类型的物体？是 JSON 吗？或者它是一个 JSON 对象数组？

我需要这样写：

```
var b = {
    name: 'sample1',
     data: ["Otu1", "Otu2", "Otu3", "Otu4", "Otu5"],
     values: [5, 15, 250, 20, 23]
  }
var c = {
    name: 'sample2',
     data: ["Otu1", "Otu5", "Otu6", "Otu7"],
     values: [234, 29, 239, 5]
  }

var a = b + c 
```

能否请你帮忙？任何见解都值得赞赏。谢谢社区！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T01:50:29.030

> *“第一个问题：它是什么类型的对象？是 JSON 吗？还是 JSON 对象数组？”*

它是一个 JavaScript 对象数组。它可以序列化为 JSON 数据，但目前您应该只将其视为 JavaScript 代码。符号相似，但结果数据不同。

*（实际上在您的情况下，要使符号类似于 JSON，您需要使用双引号。但即便如此，您仍在创建 JavaScript 对象）*

> *“我需要这样写：”*

为此，您可以像这样创建一个 JavaScript 对象数组：

```
var a = [b, c]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T01:51:05.397

你在这里有一个对象数组，记住 JSON 只是意味着 JavaScript 对象表示法

# python-2.7 - 从 Python 搜索模块路径中删除路径

> ID：13793921
> 
> 赞同：36
> 
> 时间：2012-12-10T01:47:44.230
> 
> 标签：python-2.7

我理解是`sys.path`指

1.  具有系统库的操作系统路径。我认为这些是`/lib`在 *nix 或`Windows`Windows 中引用的。
2.  当前目录 python 开始于 - 如果 Python 是从 开始的，我接受它`C:\Python`，这将是当前路径
3.  环境变量 $PYTHONPATH 或 %PYTHONPATH% - 这是指我可以从命令行调用 Python 二进制文件的路径
4.  您可以在运行时添加路径 - 我理解为在运行 IDLE 时

我可以通过运行命令来添加路径，`sys.path.append`但是当我运行命令`sys.path.remove`来“删除”我附加的路径时，我无法这样做。有没有办法做到这一点而不必每次都关闭 IDLE？

我在 Windows 7 和 Ubuntu 上运行 Python 2.7

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-12-10T01:57:02.397

一切都在我的机器上按预期工作:)

```
Python 2.7.3 (default, Sep 26 2012, 21:51:14) 
[GCC 4.7.2] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import sys
>>> sys.path.append('/home/sergey')
>>> sys.path
['', ..., '/home/sergey']
>>> sys.path.remove('/home/sergey')
>>> sys.path
['', ...]
>>> 
```

你到底试过什么？

关于你对事物的理解——恐怕有一些误解：

1.  `sys.path`是包含*Python 模块*的目录列表，而不是系统库。因此，简化一下，当您`import blah`的脚本中有类似的内容时，Python 解释器会一一检查这些目录以检查是否有一个名为的文件（或内部以文件`blah.py`命名的子目录）`blah``__init__.py`

2.  当前目录是*脚本所在的*位置，而不是 Python 解释器所在的位置。所以如果你有`foo.py`一个`bar.py`目录，你可以使用`import bar`in`foo.py`并且模块会被找到，因为它在同一个目录中。

3.  $PYTHONPATH 是一个`sys.path`在解释器启动时附加的环境变量。所以，同样，它与模块搜索路径有关，与从命令行启动 Python 无关。

4.  正确，您可以`sys.path`在运行时修改 - 在 IDLE 中运行 python 脚本时

有关详细信息，请参阅[sys.path](http://docs.python.org/2/library/sys.html#sys.path)和[站点。](http://docs.python.org/2/library/site.html#module-site)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-22T12:13:19.890

我们可以在下面尝试从 sys.path 中插入、追加或删除

```
>>> import sys
>>>
>>> sys.path.insert(1, '/home/log')
>>> sys.path.append('/home/log')
>>> sys.path
['', '/home/log']
>>> sys.path.remove('/home/log')
>>> sys.path
>>> ['']
>>> 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2020-03-19T23:19:51.607

采用

```
sys.path.append('path/to/file') 
```

代替

```
sys.path.append('path/to/file/') 
```

与 相同`sys.path.remove()`。

# c# - 指示 KeyPress 是否来自 SIP，而不是硬按钮

> ID：13793923
> 
> 赞同：2
> 
> 时间：2012-12-10T01:48:07.050
> 
> 标签：c#, compact-framework

我们有一个硬件返回按钮执行某个动作的情况，但是这个动作也会在使用 SIP 控件上的返回按钮时触发。

无论如何确定 KeyPressEventArg 是否来自 SIP？

```
 /// <summary>
    /// Handles the Enter button being pressed as navigation to complete the signature capture
    /// </summary>
    /// <param name="e">The key event args to quaify what button was pressed.</param>
    public override void HandleKeyPress(KeyPressEventArgs e)
    {
        if (e.KeyChar == '\r') // and is not SIP '\r'
        {
            // need to handle only hard button not SIP
        }
    } 
```

非常感谢您对此的任何启发

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T02:40:29.723

好的，找到了一种方法来做到这一点，但是我觉得这可能并不适用于所有设备类型。

```
 public void WndProc(ref Microsoft.WindowsCE.Forms.Message m)
        {
            if (m.Msg == WM_KEYDOWN && (m.WParam == (IntPtr)VK_RETURN && m.LParam != (IntPtr)1))
            {
                 //Handle hard button
            }
        } 
```

`LParam`当来自 SIP 时，按键的似乎始终为“1”。我将继续在我们所有的设备类型上进行测试

如果有人对此有更好的方法，请在下面发布:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T04:20:28.290

好的，经过一天的试验，我找到了一种稳定的方法来指示硬按钮按键的 SIP（​​InputPanel）按键。

使用`PeekMessage`我们可以检查消息队列中的键值并检查`LParam`来自 SIP（​​跨所有设备）时似乎总是为 1 的“1”。

下面的代码

```
public class InputHelper
{
    #region Static Members

    /// <summary>
    /// Determines whether the key value pressed originated from the SIP
    /// </summary>
    /// <param name="keyValue">The key value.</param>
    /// <param name="handle">The widget handle.</param>
    /// <returns>
    ///   <c>true</c> if is sip key press; otherwise, <c>false</c>.
    /// </returns>
    public static bool IsSipKeyPress(int keyValue, IntPtr handle)
    {
        NativeMessage m;
        if (PeekMessage(out m, handle, 0, 0, PM_NOREMOVE))
        {
            // All SIP inputs have LParam of 1, so ignore these
            if (m.msg == WM_CHAR && m.wParam == (IntPtr)keyValue && m.lParam == (IntPtr)1)
            {
                return true;
            }
        }
        return false;
    }

    #endregion

    #region P-Invoke

    const uint PM_NOREMOVE = 0x0000;
    const uint WM_CHAR = 258;

    [DllImport("coredll.dll")]
    [return: MarshalAs(UnmanagedType.Bool)]
    static extern bool PeekMessage(out NativeMessage lpMsg, IntPtr hWnd, uint wMsgFilterMin, uint wMsgFilterMax, uint wRemoveMsg);

    [StructLayout(LayoutKind.Sequential)]
    public struct NativeMessage
    {
        public IntPtr handle;
        public uint msg;
        public IntPtr wParam;
        public IntPtr lParam;
        public uint time;
        public System.Drawing.Point p;
    }

    #endregion
} 
```

用法：

```
/// <summary>
/// Handle a KeyDown event and check for Hardbutton Return key
/// </summary>
/// <param name="e">A KeyEventArgs instance</param>
public override void HandleKeyDown(KeyEventArgs e)
{
    if (e.KeyValue == 13)
    {
        if (!InputHelper.IsSipKeyPress(13, base.Handle))
        {
            CompleteProcess();
        }
    }
    base.HandleKeyDown(e);
} 
```

希望这对其他人有帮助:)

# asp.net - 登录asp.net webmatrix后显示名称

> ID：13793927
> 
> 赞同：1
> 
> 时间：2012-12-10T01:48:25.397
> 
> 标签：asp.net, webmatrix

我使用 Webmatrix 中使用登录的起始站点模板构建了一个站点。用户登录后，它显示在顶部附近“你好，（电子邮件地址）！”

查看html代码，我看到了

```
Hello, <a id="logname" class="email" href="~/Account/Manage" title="Manage">@WebSecurity.CurrentUserName</a>! 
```

我只是 asp.net 的初学者，但可以按照逻辑解决问题，所以我所做的是在存储电子邮件和密码的数据库中添加一个“名称”字段并编辑注册页面，以便用户可以输入他们的名称也是如此，它写入数据库没有问题。

现在我假设这只是找到@WebSecurity.CurrentUserName 指的是用户的电子邮件地址并使其指向名称字段的问题。但是，我搜索了高低，似乎无法在任何地方找到它。

因此，我的下一个方法是使用 Bakery 数据库教程中的代码，该教程从字段中获取数据并对其进行修改以获取名称并将其显示在我想要的位置，我在这里尝试使用的代码：

```
@foreach(var row in db.Query(selectQueryString)) 
```

起初这似乎有效，它显示“你好，本！” 但是如果我再创建更多帐户，它也会开始显示它们，所以过了一会儿我收到“你好，本，史蒂夫，格蕾丝等......”

即使我是初学者，我也确实意识到这段代码并不是我所需要的，但是类似的东西需要单个名称字段但仅来自当前登录的用户......我已经用谷歌搜索和搜索并看到了很多人们想要同样的东西，除了它使用 PHP 或 VB 或不是 Webmatrix 的东西。

如果这是一个快速的答案，我将不胜感激我需要的代码，或者指出正确的方向，任何帮助将不胜感激。提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T03:02:03.413

具有讽刺意味的是，我在发布问题后立即找到了解决方案，所以这里..

这是需要放在文件 _SiteLayout.chtml 最顶部的代码

```
@{
var authenticatedUser = "";

if (WebSecurity.IsAuthenticated) {
authenticatedUser = WebSecurity.CurrentUserName;
var db = Database.Open("StarterSite");
var UserData = db.QuerySingle("SELECT Name FROM UserProfile WHERE LOWER(Email) = LOWER(@0)", authenticatedUser);
authenticatedUser = UserData.Name;
    }
} 
```

StarterSite 是数据库的名称，UserProfile 是表的名称，我将名称字段标记为名称（为像我这样可能正在阅读本文的初学者解释）

然后在 html 标记中，我将 @WebSecurity.CurrentUserName 更改为 @authenticatedUser 所以现在它显示为：

```
Hello, <a id="logname" class="email" href="~/Account/Manage" title="Manage">@authenticatedUser</a>! 
```

导致它现在显示用户的姓名而不是他们的电子邮件地址的预期结果。

# c# - 哈希表在调整大小时如何跟踪现有的键索引？

> ID：13793928
> 
> 赞同：2
> 
> 时间：2012-12-10T01:48:28.153
> 
> 标签：c#, data-structures, hash, hashtable

我想知道哈希表在增加容量时如何找到正确的索引。例如，假设我有一个默认容量为 10 的哈希表。现在我们必须添加 (key,value) 对 [14,"hello 1"]

我们将使用下面的索引机制为上面的键 '14' 获得的索引是 '4'。所以 hashtable 会把这个 (key,value) 对保存在索引 4 中。

```
int index = key.GetHashCode() % 10 
```

现在我们继续将项目添加到哈希表中，它达到了负载因子。所以是时候调整大小了。让我们假设 hastable resize 到 20。

现在我要在这个哈希表中搜索我的旧键“14”。现在根据索引机制，我将得到这个键的索引为 14。所以我将从索引 14 开始搜索哈希表，但理想情况下它在索引 4 中。

所以我的问题是哈希表在调整大小时如何跟踪现有的键索引？或者哈希表在调整大小时是否会重新散列所有现有键？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T01:58:14.710

您可能想阅读[hash tables](http://en.wikipedia.org/wiki/Hash_table)，但我认为您缺少的概念是：

*   对于给定的密钥，比如“asdf”，有一个给定的 32 位 int 哈希码。
*   要获得索引存储中的位置，您应用模数 ( `%`) `hashCode % length`-- 因此如果您将表从 10 增加到 20，结果将更改为新索引。实现当然会确保每个现有条目都在新表的正确存储桶中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T01:57:58.480

我查看[了 .Net 的共享源 CLI 实现，](http://www.123aspx.com/rotor/RotorSrc.aspx?rot=40806)看起来条目在扩展时重新散列。但是，没有必要使用 .GetHashCode() 重新计算 HashCode。

如果您查看实现，您将看到`expand()`发生以下步骤的方法：

1.  创建一个临时存储桶数组，并将其调整为大于其当前大小两倍的最小素数。
2.  通过从旧存储桶数组重新散列来填充新数组。

.

```
for (nb = 0; nb < oldhashsize; nb++)
{
    bucket oldb = buckets[nb];
    if ((oldb.key != null) && (oldb.key != buckets))
    {
        putEntry(newBuckets, oldb.key, oldb.val, oldb.hash_coll & 0x7FFFFFFF);
    }
}

private void putEntry (bucket[] newBuckets, Object key, Object nvalue, int hashcode)
{
    BCLDebug.Assert(hashcode >= 0, "hashcode >= 0");  // make sure collision bit (sign bit) wasn't set.

    uint seed = (uint) hashcode;
    uint incr = (uint)(1 + (((seed >> 5) + 1) % ((uint)newBuckets.Length - 1)));

    do 
    {
        int bucketNumber = (int) (seed % (uint)newBuckets.Length);

        if ((newBuckets[bucketNumber].key == null) || (newBuckets[bucketNumber].key == buckets)) 
        {
            newBuckets[bucketNumber].val = nvalue;
            newBuckets[bucketNumber].key = key;
            newBuckets[bucketNumber].hash_coll |= hashcode;
            return;
        }
        newBuckets[bucketNumber].hash_coll |= unchecked((int)0x80000000);
        seed += incr;
        } while (true);
    }
} 
```

新数组已经构建完成，将在后续操作中使用。

此外，来自 MSDN 关于 Hashtable.Add()：

[如果 Count 小于 Hashtable 的容量，则此方法是 O(1) 操作。如果需要增加容量以容纳新元素，则此方法变为 O(n) 操作，其中 n 为 Count。](http://msdn.microsoft.com/en-us/library/system.collections.hashtable.add.aspx)

# java - 在java中切换imageIcon？

> ID：13793936
> 
> 赞同：1
> 
> 时间：2012-12-10T01:49:11.353
> 
> 标签：java, swing, paintcomponent, imageicon

我有许多在窗口中移动的平面（线程），我想根据平面的方向切换 ImageIcon。例如：如果一个平面向右走，平面的imageIcon向右，然后平面向左，把imageIcon换成向左的平面。如何在方法paintComponent 中做到这一点？对不起，我的英语不好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T04:52:16.640

如果您正在寻找逻辑事物，那么这里有一个小示例，尽管您可能必须根据需要对其进行修改。

```
import java.awt.*;
import java.awt.event.*;
import java.awt.image.BufferedImage;
import java.util.Random;
import javax.swing.*;

public class FlyingAeroplane
{
    private Animation animation;
    private Timer timer;
    private ActionListener timerAction = new ActionListener()
    {
        @Override
        public void actionPerformed(ActionEvent ae)
        {
            animation.setValues();
        }
    };

    private void displayGUI()
    {
        JFrame frame = new JFrame("Aeroplane Flying");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        animation = new Animation();
        frame.setContentPane(animation);
        frame.pack();
        frame.setLocationByPlatform(true);
        frame.setVisible(true);
        timer = new Timer(100, timerAction);
        timer.start();
    }

    public static void main(String... args)
    {
        SwingUtilities.invokeLater(new Runnable()
        {
            @Override
            public void run()
            {
                new FlyingAeroplane().displayGUI();
            }
        });
    }
}

class Animation extends JPanel
{
    private final int HEIGHT = 150;
    private final int WIDTH = 200;
    private int x;
    private int y;
    private ImageIcon image;
    private boolean flag;
    private Random random;

    public Animation()
    {
        x = 0;
        y = 0;
        image = new ImageIcon(getClass().getResource("/image/aeroplaneright.jpeg"));
        flag = true;
        random = new Random();
    }

    public void setValues()
    {
        x = getXOfImage();
        y = random.nextInt(70);
        repaint();
    }

    private int getXOfImage()
    {
        if (flag)
        {           
            if ((x + image.getIconWidth()) == WIDTH)
            {
                flag = false;
                x--;
                return x;
            }
            x++;
            image = new ImageIcon(getClass().getResource("/image/aeroplaneright.jpeg"));
        }
        else if (!flag)
        {
            if (x == 0)
            {
                flag = true;
                x++;
                return x;
            }
            x--;
            image = new ImageIcon(getClass().getResource("/image/aeroplaneleft.jpeg"));
        }
        return x;
    }

    @Override
    public Dimension getPreferredSize()
    {
        return (new Dimension(WIDTH, HEIGHT));
    }

    @Override
    protected void paintComponent(Graphics g)
    {
        super.paintComponent(g);
        g.drawImage(image.getImage(), x, y, this);
    }
} 
```

使用的图像：

![飞机飞行器](../Images/e08db25c12a71d87a985f81f1cb23c24.png) ![左翼飞机](../Images/bfd784e19bfb973aed8f74aac5f0ca53.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-10T01:50:44.383

如果您正在谈论交换 JLabel 显示的 ImageIcon，那么您不应该在 paintComponent 中切换 ImageIcons，而应该在代码的 non-paintComponent 区域中执行此操作，也许在 Swing Timer 中。即使您不是在谈论 JLabel，paintComponent 方法也不应该用于更改对象的状态。

但是，您的问题留下了太多未说的内容，无法让我们能够完整而良好地回答。考虑更多地讲述和展示。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-10T01:55:32.890

在设置方向时，您也应该设置图像图标，或者有一个`getImageIcon(direction)`.

在**paintComponent**中不应发生繁重的逻辑；它应该尽可能快。您无法（完全）控制调用paintComponent 的时间和频率。

# javascript - 读取包含整数和字符的二进制文件

> ID：13793937
> 
> 赞同：0
> 
> 时间：2012-12-10T01:49:29.890
> 
> 标签：javascript, html, binary

我有一个小问题。我正在尝试读取一个二进制文件，其标题由多个字符组成，数据部分包含多个 16 位整数。我的问题是读取整数。如果我用 PHP 或 Java 读取文件，我可以看到高字节首先出现，然后是低字节。如果读取字节（8 位整数）将被写成 1 后跟 44，假设数字 300。但是当我创建包含我的文件的 ArrayBuffer 的无符号 16 位整数视图时，我意识到在 Javascript（HTML5）中使用 ArrayBuffer - Uint16Array 读取它其他方式 - 而不是 300 我得到 11,265。所以第一个字节被认为是较低的，然后是较高的字节。这不是一个大问题，因为我总是可以坚持阅读 8 位整数我只是好奇是否有任何规则如何读取或写入二进制文件，或者它只是一个设计选择？

# javascript - 使用javascript比较数组中的值时出错？

> ID：13793938
> 
> 赞同：0
> 
> 时间：2012-12-10T01:49:45.393
> 
> 标签：javascript

我有一个示例代码：

```
var find = ['iphone 3', 'iphone 4', 'iphone 5'];
var search = 'iphone 5';
for(i=0; i<find.length; i++) {
   if(search == find[i]) {
      alert('Yes');
   } else {
      alert('No');
   }
} 
```

当我运行代码时，结果 2 alert( `alert('Yes') and alert('No')`)，但结果只是`alert('Yes'),`如何修复它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T01:51:14.757

这可以通过以下方式简单地完成`.indexOf`：

```
if ( find.indexOf( search ) > -1 ) {

    alert('Yes');

} else {

    alert('No');

} 
```

*将其替换为不包括*变量声明的整个代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T01:54:08.003

如果我正确理解您的问题，您不希望`no`在找不到匹配项时收到警报：

```
var find = ['iphone 3', 'iphone 4', 'iphone 5'];
var search = 'iphone 5';
for(i=0; i<find.length; i++)
{
    if(search == find[i])
    {
       alert('Yes');
       break;//stop loop, found match
    }
} 
```

只是不提供`else`分支。哦，如果您不关心旧版浏览器：

```
if (find.indexOf(search) !== -1)
{
    alert('yes');
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T01:55:21.773

**如果您想提醒找到的匹配项**，请使用标志来标记找到匹配项的位置或否。最后，使用标志来提醒相应的消息，如下所示：

```
 var find = ['iphone 3', 'iphone 4', 'iphone 5'];
 var search = 'iphone 5';
 var present = false;
 for(i=0; i<find.length; i++) {
     if(search == find[i]) {
       present = true;
       break;
     }
 }
 if(present) {
  alert('Yes');
 } else {
  alert('No');
 } 
```

请注意：可能有更好的方法，但只能按照您的算法尝试帮助。

# eclipse - Subclipse 错误——Subversion 本机库不可用

> ID：13793940
> 
> 赞同：12
> 
> 时间：2012-12-10T01:49:53.103
> 
> 标签：eclipse, svn, eclipse-plugin, subclipse

每次加载基于 Subversion 的 PHP 项目时，我都会收到以下消息...

![Subversion 本机库不可用。](../Images/dc9978cbf7f14e506b7651088ae5c7bc.png)

显然，操作系统是 Mac OSX Mountain Lion。我也按照链接中的说明进行操作，但它仍然出现在完全随机的时间。然而，颠覆行动似乎运作良好。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2014-11-09T17:04:54.713

从主菜单中，选择

> 窗口 -> 首选项 -> 团队 -> SVN，

在右侧面板的“ *SVN 界面*”区域。
您可能会发现“ *client* ”设置为“ *JavaHL(JNI) Not Available* ”。
将其更改为“ *SVNKit(Pure Java) SVNKit vx.x* ”

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-10T05:07:22.607

您的错误是该库已加载到另一个类加载器中。我只能猜测您安装了一些其他 Subversion 插件（因此您有多个），而另一个已经加载了库，因此无法再次加载。

除了弄清楚并删除另一个插件之外，我猜你可以安装 SVNKit 插件并配置 Subclipse 以使用它而不是 JavaHL。SVNKit 插件位于 Subclipse 更新站点上。

# ruby - 将代理 IP 与 ruby 脚本一起使用

> ID：13793943
> 
> 赞同：1
> 
> 时间：2012-12-10T01:50:31.573
> 
> 标签：ruby, macos, proxy, webserver, ip

我正在尝试从我的计算机上运行一个 ruby​​ 脚本，并且我想让脚本使用我设置的代理 IP 地址/服务器，而不是与我的本地计算机关联的默认 IP 地址。

通过在网络设置中进行更改，我已经能够让我的网络浏览器使用这个代理 IP 地址。但是当我从 textmate 运行 ruby​​ 脚本时，它似乎没有使用我在网络设置中输入的代理 IP 地址。相反，它默认回到我本地机器的基本 IP 地址。

我可以在 textmate 或脚本本身中做些什么来指定它应该路由的代理 IP 地址吗？

我的脚本如下所示：

```
require "open-uri"
url = "some-url"
pattern = "<img"   

page = open(url).read
tags = page.scan(pattern)
puts "The site #{url} has #{tags.length} img tags" 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T02:15:38.477

使用`:proxy`选项让 open-uri 知道您的代理服务器：

```
page = open(url, :proxy => "http://#{proxy_host}:#{proxy_port}/").read 
```

您也可以`http_proxy`改为设置环境变量。如果您这样做，请给予`:proxy => true`选择权。

```
page = open(url, :proxy => true).read 
```

[添加]

如果你想使用带有基本身份验证的代理，你可以给出`:proxy_http_basic_authentication`选项而不是`:proxy`如下：

```
:proxy_http_basic_authentication => ["http://#{proxy_host}:#{proxy_port}/", login, password] 
```

注意`:proxy_http_basic_authentication`可以在 ruby**​​ 1.9.2 或更高版本**中使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T01:59:53.557

我建议使用 mechanize 和 css 而不是正则表达式：

```
require "mechanize"
url = "http://www.google.com/"

@agent = Mechanize.new{|a| a.set_proxy 'localhost', 8888}
page = @agent.get url
tags = page.search('img')
puts "The site #{url} has #{tags.length} img tags" 
```

# javascript - 鼠标悬停 ajaxload 脚本

> ID：13793946
> 
> 赞同：-2
> 
> 时间：2012-12-10T01:51:01.273
> 
> 标签：javascript, jquery, ajax, hover, mouseover

我试图为页面上的图片创建鼠标悬停事件，以将该图片的摘要加载到名为“contentarea”的 div 容器中。我是编码新手，所以请原谅我的无能。代码在下面，但我不确定它会起作用。基本上，我在网页上有 5 张狗的照片，我希望将鼠标悬停事件放在狗的照片上，以从名为“content.html”的单独页面加载信息。加载的内容应该从与当前光标悬停的图片的 ID 相同的 ID 加载。然后内容将加载到位于所有图片下方的名为“contentarea”的 div 中。所有图片都属于类狗。我曾试图改编别人的代码，但没有效果。

```
 <script>
   function(){
    $(.dog).mouseover(function(e) {
        var dogId = $(this).data('id');
        $("contentarea").load("content.html
         # " + dogId + " ");

    }); 
   </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T02:09:01.297

您实际上可以使用 ajax 加载另一个 html 文件，这不是 zongweil 在他的评论中所说的问题，因为您正在加载的内容不是动态的。

您需要添加以使用 '.dog 指定 .dog 是一个字符串。此外，请解释您使用#dogId 尝试实现的目标。您正在加载的 html 文件上是否有锚点？我认为通过将锚点添加到加载的 html 中，您不会达到预期的效果。如果您只想加载一只狗的信息，则创建几个 content.html 文件，每个文件都有正确的 id，如 content1.html、content2.html 等，然后使用：

```
<script>
    $('.dog').mouseover(function(e) {
        var dogId = $(this).data('id');
        $("#contentarea").load("content" + dogId + ".html");
    }); 
   </script> 
```

或者改为使用具有正确 id 的单个 HTML 文件：

```
<div id="dogcontent1">
TEXT TEXT TEXT
</div>
<div id="dogcontent2">
TEXT TEXT TEXT
</div> 
```

然后在脚本上使用这个：

```
<script>
    $('.dog').mouseover(function(e) {
        var dogId = $(this).data('id');
        $("#contentarea").load("content.html #dogcontent"+ dogId );
    }); 
   </script> 
```

# r - R::bigmemory - 如何创建字符 big.matrix？

> ID：13793952
> 
> 赞同：5
> 
> 时间：2012-12-10T01:52:11.077
> 
> 标签：r, matrix, character, r-bigmemory

我尝试在**R**`bigmemory`中使用包，但我一开始就被困住了。我愿意：

 **```
temp <- matrix(paste("a",1:10), 5, 2) 
```

并得到一个字符矩阵。没关系。但后来我尝试：

```
x <- as.big.matrix(temp, type="char") 
```

我得到一个充满 NA 的矩阵和以下消息：

```
Assignment will down cast from double to char
Hint: To remove this warning type:  options(bigmemory.typecast.warning=FALSE)
Warning messages:
1: In as.big.matrix(temp, type = "char") : Casting to numeric type
2: In matrix(as.numeric(x), nrow = nrow(x), dimnames = dimnames(x)) :
NAs introduced by coercion
3: In SetElements.bm(x, i, j, value) : 
```

我不确定发生了什么，但它看起来很大。尽管 .matrix 试图将我所有的文本转换为数字`type = "char"`。如何让它发挥作用？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-11T21:48:23.397

这有点用词不当 - big.matrix 对象仅存储数字数据类型。'char' 类型是一种 C++ 数据类型，用于存储表示 ASCII 字符代码（单个字符，而不是字符串）的整数值。要将字符串存储在 big.matrix 中，您必须将字符串重新编码为数值（或转换为因子，然后转换为数值）。

如果您需要将字符数据存储在一个非常大的数据集中，您可能需要查看 'ff' 包。根据我的经验，它的学习曲线很陡峭，并且文档有些缺乏，但它确实具有该功能。

有关处理大型数据集的更多详细信息，您可以在此处查看 CRAN 任务视图：http: [//cran.r-project.org/web/views/HighPerformanceComputing.html](http://cran.r-project.org/web/views/HighPerformanceComputing.html)**

# grails - grails 域 id 为 int 或 Long

> ID：13793954
> 
> 赞同：1
> 
> 时间：2012-12-10T01:53:06.260
> 
> 标签：grails, grails-orm

嗨，我有一个域类，我设置为`int userID`. 当自动编号变得非常大而`User.findById()`引发错误时，它会影响吗？如果我现在更改为 Long（人们已经在使用该应用程序）会影响`findById()`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T05:48:29.147

`findById()`会工作得很好。

真正的问题是在向表中插入新数据时，如果 id 是自动生成的，它很可能会在达到最大值时重新启动，这可能导致重复的 id，从而导致错误。

通常，当应用程序已经投入生产并且数据库已填充时，更改架构定义并不容易。如果您尝试在 Grails 中执行此操作，则可能会丢失数据库中的信息。因此，请在尝试任何操作之前进行备份。

# ruby-on-rails - Internet Explorer 9 中未加载 CSS 样式表

> ID：13793958
> 
> 赞同：2
> 
> 时间：2012-12-10T01:53:32.023
> 
> 标签：ruby-on-rails, ruby-on-rails-3, internet-explorer, stylesheet

我的环境是 Rails 3.2.8，我所有的样式表都在 app/assets/stylesheets`.css.scss`格式中。我还在为我的应用程序使用 Bootstrap-sass。

样式表似乎根本没有在 Internet Explorer 中加载，经过一番研究，我还没有找到解决方案。

我提供了一个 css 文件，例如：

***文件：** posts.css.scss*

```
$myFontFamily: 'Nanum Gothic', sans-serif;
$baseFontFamily: $myFontFamily;

@import 'bootstrap';

body {
    background-color: #000000;
    color: #FFF;
} 
```

在 IE9 中，字体、正文背景、字体颜色完全不受此样式表的影响。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T02:18:02.527

我认为您不需要 css，只需放置`posts.scss`，我假设所有`config.assets`设置都正确。即，你没有惹到他们。

# javascript - 跨多个客户端同步播放 YouTube 视频

> ID：13793960
> 
> 赞同：3
> 
> 时间：2012-12-10T01:53:45.530
> 
> 标签：javascript, api, node.js, youtube

你好 Stack Overflow 社区，

我是一个相当新手的编码员，但我有一个我一直在设计的项目，看起来每天都越来越复杂，我不知道从哪里开始。

受到 Synchtube 和 Phonoblaster 的启发，我希望为我的网站创建一些东西，让访问者可以实时同步地观看我策划的 YouTube 视频和播放列表。

因为我希望能够将它放在我自己的网站的上下文中，所以我不能使用上面列出的已经这样做的服务 - 所以我想弄清楚如何推出我自己的。

在 Stack Overflow 和其他博客上已经写了一些关于这个主题的内容： [HERE](https://stackoverflow.com/questions/8423091/how-to-play-youtube-videos-in-sync-on-multiple-clients) 和[HERE](http://softwareas.com/video-sync-with-websocket-and-node)。

因为我仍然认为自己是一个新手程序员，而且我在 Google 和 Stack 上找到的许多信息往往都超过 1 或 2 年，所以我仍然不确定从哪里开始，或者这些信息是否已经过时。具体来说，我应该学习哪些语言和工具。

从我目前收集到的信息来看，Javascript、Node.JS 和 YouTube API 之类的东西将构成它的症结所在。我以前没有使用过任何这些，但有兴趣看看其他有经验的编码人员是否会有他们自己的建议或想法，他们可以指出我的方向。

感谢您抽出时间阅读这篇文章！希望很快能听到你们中的一些人的消息：）

非常感谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-10T02:54:56.923

部分听起来你需要来自 Youtube 的直播。你可以在这里找到更多信息。[https://support.google.com/youtube/bin/answer.py?hl=en&answer=2474026](https://support.google.com/youtube/bin/answer.py?hl=en&answer=2474026)

如果你能做到这一点，那么在任意数量的用户之间同步播放就像在浏览器中嵌入你的流的常规 youtube 嵌入一样简单。

回顾过去，如果您想在任意数量的用户之间同步视频播放，第一个大问题是学习如何在视频上设置时间。幸运的是，使用 hashbang #t=seconds 很容易。

例如：[http](http://www.youtube.com/watch?v=m38RdUGqBPM&feature=g-high-rec#t=619s) ://www.youtube.com/watch?v=m38RdUGqBPM&feature=g-high-rec#t= 619s 将在视频的第 619 秒开始播放这个 HuskyStarcraft 视频。

下一步是拥有一些跟踪当前时间的后端服务器。带有 Socket.io 的 Node.js*非常*容易设置。Socket.io 是一个很棒的库，它通过长轮询等方式优雅地处理来自 Web 套接字的并发连接，并且即使在非常旧的浏览器上也能很好地工作。请注意，websockets 甚至不是必需的，但它将是您最现代和最全面的方法。否则它的黑客和东西。

一种可行的方法如下。

User1 访问您的网站并首先开始播放视频。您页面上的脚本会向您的服务器发送一个 XHR 请求，上面写着“视频在 X 时间开始”。然后 X 被存储为开始时间。

此时，您可以走 2 条路线。您可以使用 Youtube API 的客户端脚本来轮询视频并每秒获取其当前状态。如果状态或时间发生变化，请向服务器发送另一个请求以更新状态。

另一个简单的方法是加载 User2+ 的页面，然后发送一个 XHR 请求，询问视频播放时间。服务器发回来自 User1 的开始时间之间的差异，然后客户端脚本在 youtube 播放器上为 User2+ 设置“t”hashbang。这使您可以同步开始时间，但如果任何用户暂停或倒带视频，这些状态不会得到更新。不过，随后的页面刷新可能会这样做。

整个应用程序的复杂性完全取决于您想要的要求。如果它只是同步开始时间，那么路线#2 应该工作得很好。不需要套接字，并且很容易使用 jQuery 或直接使用 javascript。

如果您需要真正同步的体验，任何用户都可以开始/停止/暂停/快进/倒带视频，那么您正在考虑使用已建立的库解决方案或编写自己的解决方案。

抱歉，这个答案有点开放式，但你的问题也是如此。=)

# compiler-errors - arduino else if 语句错误

> ID：13793964
> 
> 赞同：0
> 
> 时间：2012-12-10T01:54:19.540
> 
> 标签：compiler-errors, arduino, scope, if-statement

```
const int pingPin = 7;
const int ledPin = 11; 
const int ledPin2 = 10;
int ledLevel = 0; 
int ledLevel2 = 255;
int constraint = 0;

void setup() 
{
  pinMode(ledPin, OUTPUT);
  Serial.begin(9600);
}

void loop()
{ 
  long duration, inches, cm;

  pinMode(pingPin, OUTPUT);
  digitalWrite(pingPin, LOW);
  delayMicroseconds(2);
  digitalWrite(pingPin, HIGH);
  delayMicroseconds(5);

  pinMode(pingPin, INPUT);
  duration = pulseIn(pingPin, HIGH);
  constraint = constrain(duration, 500, 8000);

  ledLevel = map(constraint, 500, 8000, 255, 0);

  if (ledLevel < 192) {
  analogWrite(ledPin, ledLevel);
  ledLevel2 = ledLevel2 - 255;
  } else if (ledlevel >= 192) {
    analogWrite(ledPin, ledLevel);
    analogWrite(ledPin2, ledLevel2);
  }

  Serial.println(duration);
  delay(100);
} 
```

这是我的 arduino 代码，当有人开始走向超声波传感器时，它会打开一个 LED，当他们到达 3/4 时，它会打开第二个 LED。当我尝试编译它时，会出现“'ledLevel' 未在此范围内声明”，并突出显示 else if 语句。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T01:57:43.080

```
else if (ledlevel >= 192) 
```

ledLevel 而不是 ledlevel（L 是大写）
它应该是

```
else if (ledLevel >= 192) 
```

# flash - 使用 Tweener 成长动画

> ID：13793965
> 
> 赞同：0
> 
> 时间：2012-12-10T01:54:29.087
> 
> 标签：flash, actionscript, actionscript-2

（初学者）看看[http://teethgrinder.co.uk/open-flash-chart-2/bar-chart-on-show.php](http://teethgrinder.co.uk/open-flash-chart-2/bar-chart-on-show.php)和成长动画。这个动画的代码是（AS2）：

```
 mc._yscale= 0; //mc - MovieClip object
   Tweener.addTween(mc, {_yscale:100, time:1.4, transition:"easeoutquint"} );

   //using mc._height gives the same effect 
```

它适用于简单的酒吧。问题是，它看起来不太好，例如。对于 3D 条，因为它会缩放对象。它应该做什么，它应该“揭示”/“揭开”酒吧。是否可以使用 Tweener 来实现，还是必须以其他方式实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T10:39:22.747

要在不缩放的情况下显示条形图，您可以在上面放置一个遮罩并使用 Tweener 来缩放遮罩而不是条形图。您应该能够通过将目标属性 ( `mc`) 更新为掩码的实例名称来使用现有代码。

# r - 包开发目录和文件放在哪里？

> ID：13793966
> 
> 赞同：0
> 
> 时间：2012-12-10T01:54:30.820
> 
> 标签：r

我正在从我编写的许多函数中开发一个包。[构建包后，我将使用 Dirk 在此问题](https://stackoverflow.com/questions/2905650/creating-a-local-cran-repository)中描述的过程将二进制文件放入我在公司网络驱动器上创建的本地包存储库中。

问题：**我的包开发文件夹应该位于我的包存储库中吗？如果有，在哪里？**

[我在Creating a Package Tutorial](http://cran.r-project.org/doc/contrib/Leisch-CreatingPackages.pdf)和[R Administrator Guide](http://cran.r-project.org/doc/manuals/R-admin.html#Setting-up-a-package-repository)中找不到太多关于此的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T11:58:58.870

不，你的包开发目录在哪里并不重要。

也就是说，我认为将它们与二进制包存储库分开是一个好主意，因为它们在概念上完全不同，通常你应该能够删除一个存储库并从源重新生成它。

# mysql - 按 id 区分

> ID：13793969
> 
> 赞同：-3
> 
> 时间：2012-12-10T01:54:40.103
> 
> 标签：mysql

![在此处输入图像描述](../Images/14e2a995368a1c753080530bd4a39cd1.png)

SELECT DISTINCTROW ProductsId AS pid,( SELECT SUM(QuantityByID) WHERE ProductsId=pid ) FROM caritem

我想得到这个结果

```
ProductId Quantity 
7             7 
13            2 
14            2 
9             1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T01:59:29.397

毫无疑问很难提供帮助，但我认为您想要一个 GROUP BY：

```
SELECT ProductsId as pid, SUM(QuantityByID) 
FROM products
GROUP BY ProductsId 
```

这将给出每个产品 ID 的数量总和。

# python - python中的除法。7/9 = 0？如何阻止这种情况？

> ID：13793971
> 
> 赞同：0
> 
> 时间：2012-12-10T01:54:55.850
> 
> 标签：python, integer-division

> **可能重复：**
> [如何在 Python 中强制除法为浮点数？](https://stackoverflow.com/questions/1267869/how-can-i-force-division-to-be-floating-point-in-python)

如果这个问题已经被问过，我很抱歉。

```
timothy_lewis_three_pointers_attempted = 4
timothy_lewis_three_pointers_made = 2

print 'three pointers attempted: ' + str(timothy_lewis_three_pointers_attempted)
print 'three pointers made: ' + str(timothy_lewis_three_pointers_made)
print 'three point percentage: ' + str(timothy_lewis_three_point_percentage) 
```

我得到的百分比是 0。我如何让它说 0.5？我知道如果我将数字输入为 4.0 和 2.0，我会得到想要的结果，但是还有其他方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T02:00:33.377

您拥有的另一个选项（尽管我不推荐）是使用

```
from __future__ import division 
```

接着

```
>>> 7 / 9
0.7777777777777778 
```

这是基于[PEP 238](http://www.python.org/dev/peps/pep-0238/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T01:57:04.520

将其中之一设为`float`：

```
float(timothy_lewis_three_pointers_made) / timothy_lewis_three_pointers_attempted 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T02:03:11.190

你正在做整数除法。将其中至少一个设为浮点值

```
percentage = float(_made) / float(_attempted) 
```

您还可以使用新的字符串格式方法获得更好看的百分比输出。

```
"Three point percentage: {:.2%}".format(7.0/9)
# OUT: ' Three point percentage: 77.78%' 
```

# python - 从 python 3 中的字符串中删除 unicode 表示的最简单方法？

> ID：13793973
> 
> 赞同：8
> 
> 时间：2012-12-10T01:55:16.853
> 
> 标签：python, string, python-3.x, escaping

我在 python 3 中有一个字符串，其中有几个 unicode 表示形式，例如：

```
t = 'R\\u00f3is\\u00edn' 
```

我想转换 t 以便在打印时它具有正确的表示形式，即：

```
>>> print(t)
Róisín 
```

但是我只是取回了原始字符串。我已经尝试过 re.sub 和其他一些，但我似乎无法找到一种无需遍历每个字符即可更改这些字符的方法。最简单的方法是什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-10T02:06:40.270

您想使用内置编解码器`unicode_escape`。

如果`t`已经是一个`bytes`（一个 8 位字符串），就这么简单：

```
>>> print(t.decode('unicode_escape'))
Róisín 
```

如果`t`已经解码为Unicode，您可以将其编码回a `bytes`，然后`decode`以这种方式编码。如果您确定您的所有 Unicode 字符都已转义，那么您使用什么编解码器进行编码实际上并不重要。否则，您可以尝试取回原始字节字符串，但它更简单，并且可能更安全，只强制任何未编码的字符进行编码，然后它们将与已经编码的字符一起解码：

```
>>> print(t.encode('unicode_escape').decode('unicode_escape')
Róisín 
```

如果您想知道将来如何使用正则表达式做这种事情，请注意，它[`sub`](http://docs.python.org/3/library/re.html?highlight=unicode_escape#re.sub)可以让您传递一个函数而不是`repl`. 并且您可以通过调用将任何十六进制字符串转换为整数`int(hexstring, 16)`，并将任何整数转换为相应的 Unicode 字符`chr`（请注意，这是 Python 2 中不同的一位 - 您需要`unichr`）。所以：

```
>>> re.sub(r'(\\u[0-9A-Fa-f]+)', lambda matchobj: chr(int(matchobj.group(0)[2:], 16)), t)
Róisín 
```

或者，让它更清楚一点：

```
>>> def unescapematch(matchobj):
...     escapesequence = matchobj.group(0)
...     digits = escapesequence[2:]
...     ordinal = int(digits, 16)
...     char = chr(ordinal)
...     return char
>>> re.sub(r'(\\u[0-9A-Fa-f]+)', unescapematch, t)
Róisín 
```

编解码器`unicode_escape`实际上处理`\U`, `\x`, `\X`, 八进制 ( `\066`) 和特殊字符 ( `\n`) 序列以及 just `\u`，并且它实现了仅读取适当的最大位数的适当规则（4 表示`\u`，8 表示`\U`等，因此`r'\\u22222'`解码to`'∢2'`而不是`''`)，可能还有更多我没有想到的事情。但这应该给你的想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-19T00:17:48.873

我很抱歉作为第二个答案发布，我没有评论 abarnert 解决方案的声誉。

在使用他的函数处理大约 50K 的 android 字符串后，我注意到对于某些用例还有另一个小的改进。

我将 + 更改为 {1,4} 以处理有效十六进制字符跟随 4 位转义的情况。

我还将 int(escapesequence) 更改为读取 int(digits)

```
>>> def unescapematch(matchobj):
...     escapesequence = matchobj.group(0)
...     digits = escapesequence[2:]
...     ordinal = int(digits, 16)
...     char = unichr(ordinal)
...     return char

>>> print re.sub(r'(\\u[0-9A-Fa-f]{1,4})', unescapematch, "Wi\u2011Fi")
Wi‑Fi

>>> print re.sub(r'(\\u[0-9A-Fa-f]+)', unescapematch, "Wi\u2011Fi")
Traceback (most recent call last):
  File "<pyshell#102>", line 1, in <module>
    print re.sub(r'(\\u[0-9A-Fa-f]+)', unescapematch, "Wi\u2011Fi")
  File "C:\Python27\lib\re.py", line 151, in sub
     return _compile(pattern, flags).sub(repl, string, count)
  File "<pyshell#99>", line 5, in unescapematch
    char = unichr(ordinal)
ValueError: unichr() arg not in range(0x10000) (narrow Python build) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T02:03:39.447

首先，你要转换成什么是相当困惑的。

试想一下，您可能想要转换为“o”和“i”。在这种情况下，您只需制作一张地图：

```
mp = {u'\u00f3':'o', u'\u00ed':'i'} 
```

比您可以应用替换，例如：

```
t = u'R\u00f3is\u00edn'
for i in range(len(t)):
    if t[i] in mp: t[i]=mp[t[i]]
print t 
```

# c# - 我应该担心使用 ado.net 在 asp.net 中打开和关闭太多连接吗？

> ID：13793976
> 
> 赞同：1
> 
> 时间：2012-12-10T01:55:45.250
> 
> 标签：c#, asp.net, ado.net

使用 ado.net 时，我应该担心打开和关闭太多连接吗？

例如，假设我有一个 MVC 控制器方法，它调用 3 个单独的存储库来填充所有需要的对象。

```
 public ActionResult()
 {
      var codesRepository = new CodesRepository();
      viewModel.codes = codesRepository.GetCodesByName("D");

      var employeeRepository = new EmployeeRepository();
      viewModel.employees = employeeRepository.GetByName("Thomas");

      var companyRepository = new CompanyRepository();
      viewModel.company = companyRepository.GetById(20);

      //.... rest of code
 } 
```

在上面的每个 GetBy 方法中，我打开和关闭一个连接。

```
using(var connection = DbFactory.GetConnection('SQLBase') 
{
    // code to fill the objects.
} 
```

我是否需要担心这种方法是我正在为每个调用的方法打开和处理连接？在我看来，应该为所有 3 使用相同的连接？

我读过一些关于连接池的文章。这是特定于数据库的功能，还是 ado.net 中的功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T04:30:24.180

是的，你应该——主要是因为你的设计是一种反模式。虽然对读取的性能影响很小，但您完全破坏了事务完整性或写入/更新方面的性能。

要点是 - 为了跨多个存储库进行更新，那么您需要 DTC（慢），或者逐个存储库，它没有事务完整性。

对于交叉引用实体的任何选择操作，哟也非常慢。而且你是维护的噩梦。

`companyRepository.GetById(20);`

应该

`repository.Element<Company>.Where (x => x.id=20);`

这种方法将允许您：

*   对所有内容使用一个存储库。
*   灵活使用公司，包括连接操作和子选择
*   对没有 DTC 的事务中的所有更新使用一个存储库和一个连接。

现在你的问题不是开放，而是更新和交易。

这是实体框架等使用的方法 - 如果您想要性能，原始，您可以使用 BlToolkit。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-10T04:04:15.173

ADO.NET 自动使用连接池，因此您不必担心它。

因此，如果您打开到数据库的多个连接，它将通过将连接池化到一个连接来优化连接。

基本上你不必担心它:)

# maven - JDK 和 Maven 冲突

> ID：13793978
> 
> 赞同：0
> 
> 时间：2012-12-10T01:55:58.647
> 
> 标签：maven, classpath, java, javac

我正在使用与 maven 插件集成的 Eclipse Juno。

我已经在我的系统上安装了 JDK 1.6。

**我的环境变量是**

```
JAVA_HOME - F:\Program Files\Java\jdk1.6.0_37

MAVEN_HOME - F:\apache-maven-3.0.4

classpath - ;.;%JAVA_HOME%\lib\tools.jar;

Path - C:\Program Files\AMD APP\bin\x86;C:\Program Files\Common Files\Microsoft Shared\Windows Live;%SystemRoot%\system32;%SystemRoot%;%SystemRoot%\System32\Wbem;%SYSTEMROOT%\System32\WindowsPowerShell\v1.0\;C:\Program Files\ATI Technologies\ATI.ACE\Core-Static;C:\Program Files\Windows Live\Shared;C:\Program Files\QuickTime\QTSystem\;.;%JAVA_HOME%\bin;%MAVEN_HOME%\bin; 
```

我的 JDK 和 JRE 运行顺利。

**命令行检查：** ![命令行检查](../Images/c606cc8000ae0138ab4eb2c88908e81b.png)

在我的日食中，我正在构建一个新的 Maven Web 项目，它应该给我一个战争文件。

**我的 pom.xml ：**

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>com.achutha.labs</groupId>
  <artifactId>01JsfExample</artifactId>
  <version>0.0.1-SNAPSHOT</version>
  <packaging>war</packaging>
  <name>01JsfExample</name>

  <dependencies>

        <dependency>
            <groupId>com.sun.faces</groupId>
            <artifactId>jsf-api</artifactId>
            <version>2.1.7</version>
        </dependency>
        <dependency>
            <groupId>com.sun.faces</groupId>
            <artifactId>jsf-impl</artifactId>
            <version>2.1.7</version>
        </dependency>

        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>jstl</artifactId>
            <version>1.2</version>
        </dependency>

        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>servlet-api</artifactId>
            <version>2.5</version>
        </dependency>

        <dependency>
            <groupId>javax.servlet.jsp</groupId>
            <artifactId>jsp-api</artifactId>
            <version>2.1</version>
        </dependency>

    </dependencies>

    <build>
        <finalName>JavaServerFaces</finalName>

        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.3.1</version>
                <configuration>
                    <source>1.6</source>
                    <target>1.6</target>
                </configuration>
            </plugin>
        </plugins>
    </build>

</project> 
```

如果我做 maven clean，它是成功的。但是当我安装 maven 时，它会出现一些 jdk 问题。

```
SLF4J: Failed to load class "org.slf4j.impl.StaticLoggerBinder".
SLF4J: Defaulting to no-operation (NOP) logger implementation
SLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder for further details.
[INFO] Scanning for projects...
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building 01JsfExample 0.0.1-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-resources-plugin:2.5:resources (default-resources) @ 01JsfExample ---
[debug] execute contextualize
[WARNING] Using platform encoding (Cp1252 actually) to copy filtered resources, i.e. build is platform dependent!
[INFO] Copying 0 resource
[INFO] 
[INFO] --- maven-compiler-plugin:2.3.1:compile (default-compile) @ 01JsfExample ---
[WARNING] File encoding has not been set, using platform encoding Cp1252, i.e. build is platform dependent!
[INFO] Compiling 1 source file to F:\Workspace\01JsfExample\target\classes
[INFO] -------------------------------------------------------------
[ERROR] COMPILATION ERROR : 
[INFO] -------------------------------------------------------------
[ERROR] Unable to locate the Javac Compiler in:
  F:\Program Files\Java\jre6\..\lib\tools.jar
Please ensure you are using JDK 1.4 or above and
not a JRE (the com.sun.tools.javac.Main class is required).
In most cases you can change the location of your Java
installation by setting the JAVA_HOME environment variable.
[INFO] 1error
[INFO] -------------------------------------------------------------
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 0.554s
[INFO] Finished at: Mon Dec 10 06:54:01 IST 2012
[INFO] Final Memory: 3M/15M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:2.3.1:compile (default-compile) on project 01JsfExample: Compilation failure
[ERROR] Unable to locate the Javac Compiler in:
[ERROR] F:\Program Files\Java\jre6\..\lib\tools.jar
[ERROR] Please ensure you are using JDK 1.4 or above and
[ERROR] not a JRE (the com.sun.tools.javac.Main class is required).
[ERROR] In most cases you can change the location of your Java
[ERROR] installation by setting the JAVA_HOME environment variable.
[ERROR] -> [Help 1]
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException 
```

我在 Eclipse 上的其他 java 程序正在编译和运行良好。除了 Maven 项目。由于上述原因，由于构建失败，因此未生成 war 文件。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T02:28:01.070

您是否在 Eclipse 中运行 Maven 目标？如果是这样，看起来 Eclipse 正在尝试访问 JRE 而不是 JDK：`F:\Program Files\Java\jre6\..\lib\tools.jar`

尽管`JAVA_HOME`似乎在 Windows 级别设置正确，但可能是在 Eclipse 中，您正在使用 JRE 而不是 JDK 运行应用程序。在 Eclipse 中，查看已安装的 JRE 列表（Window -> Preferences -> Java -> Installed JREs）。如果您没有 JDK，请在选择 JRE 后单击“编辑”，然后在该对话框中输入 JDK 的位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T02:40:04.450

我假设您正在尝试使用 Eclipse 中的 maven 安装选项。从命令行尝试 mvn install 。如果失败，则问题出在 java 设置（安装、路径、变量）。重新检查您的 java home 是否正确指向 jdk 而不是 jre。还要确保来自 jdk bin 目录的 eclipse javaw.exe。

如果 cmd line install 有效，那么问题在于您的 Maven 项目的 eclipse java 配置。您可以尝试通过以下方式解决它 -

1.  您应该验证在 eclipse 中设置的项目属性，以确保 java 运行时是正确的。

2.  您应该在项目方面验证 java 编译设置为 1.6

3.  您应该在 pom.xml sourcejdk 和 targetjdk 标签中设置 java 编译信息。

# ruby - 如何为厨师处理程序安装依赖项？

> ID：13793979
> 
> 赞同：5
> 
> 时间：2012-12-10T01:56:09.790
> 
> 标签：ruby, chef-infra, chef-recipe

我正在尝试通过 chef_handler lwrp 安装厨师处理程序。这个处理程序（chef-handler-email）捆绑在一个 gem 中。我正在尝试安装 gem，然后从单个配方中打开处理程序，如下所示：

```
chef_gem "chef-handler-mail"

chef_handler "MailHandler" do
  source 'chef/handler/mail'
  arguments :to_address => "root"
  action :nothing
  supports :exception => true, :report => false
end.run_action(:enable) 
```

如果 gem 已经安装，这可以正常工作。但是，如果尚未安装 Gem，我会收到此错误：

```
[2012-12-09T20:47:56-05:00] FATAL: LoadError: chef_handler[MailHandler] (chef_handler::email line 13) had an error: LoadError: no such file to load -- chef/handler/mail.rb 
```

似乎 chef_handler 资源正在尝试在 chef_gem 执行并为处理程序安装 gem 之前加载处理程序。我显然可以在两步手动过程中执行此操作，其中我有一个单独的安装 gem 的配方，然后翻转到另一个配置处理程序的配方，但我希望避免多步骤手动过程。可以通过单一配方完成吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T22:02:14.263

我有一个类似的厨师 minitest-chef-handler 食谱：

```
chef_gem 'minitest'
chef_gem 'minitest-chef-handler'

require 'rubygems'
require 'minitest-chef-handler'

[... some unrelated code ...]

chef_handler "MiniTest::Chef::Handler" do
    source "minitest-chef-handler"
    arguments :verbose => true
    action :nothing
end.run_action( :enable ) 
```

在创建 chef_handler 资源之前尝试要求您的 gem，或者可能是源应该不同......

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-07-09T21:42:36.870

该`#run_action`调用导致`chef_handler`资源在“编译”阶段立即运行，而`chef_gem`资源在“执行”阶段正常运行。

所以 gem 也需要在编译阶段安装。似乎`require`还需要一个声明（如另一个答案中所建议的那样）供厨师加载宝石。

```
chef_gem 'chef-handler-mail' do
  action :nothing
end.run_action(:install)

require 'chef/handler/mail'

chef_handler 'MailHandler' do
  source 'chef/handler/mail'
  # ... other attributes
  action :nothing
end.run_action(:enable) 
```

# php - 为什么不允许对象作为关联数组中的键？

> ID：13793987
> 
> 赞同：3
> 
> 时间：2012-12-10T01:57:17.460
> 
> 标签：php, hashmap, associative-array

[PHP 文档](http://ch1.php.net/manual/en/language.types.array.php)指出：

> 数组和**对象不能用作键**。这样做会导致警告：非法偏移类型。

AFAIK，PHP 数组是有序的哈希映射。那么，为什么本身就禁止使用对象作为键，有这个限制的原因吗？为什么不可能在类中实现散列函数以将其用作键？

在相关说明中，是否有解决此问题的哈希映射的 PHP 实现？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T01:59:08.783

密钥需要是不可变的才能使它们工作。如果您的对象是可变的，那么它们就不能是键。在实现它们的每种语言中都是如此：Java、C# 等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T02:01:44.187

请参阅@duffymo 以获取答案。

请注意，有一种“*解决方法*”，通过使用`spl_object_hash`作为您的密钥。这将返回一个字符串，该字符串是不可变的，可以用作键，并且对于占用该内存地址的任何对象都是相同的。（读取：`spl_object_hash`无论在何处调用或对象是否已更改，都将为同一实例返回相同的值）

# android - 适用于 Android 的 Google Analytics V2 SDK 使旧平台设备崩溃

> ID：13793992
> 
> 赞同：1
> 
> 时间：2012-12-10T01:58:02.000
> 
> 标签：android, google-analytics

我已经开始在我的应用程序上测试 Google Analytics，但是我注意到它在启动旧设备时会导致我的应用程序崩溃。我该如何解决这个问题？

适用于平台 4.2，API 级别 17... 在目标 2.3.5 上测试应用程序崩溃并且无法启动。

代码片段：

```
//Code from my Main Activity…..
private GoogleAnalyticsTracker tracker;

protected void onCreate(Bundle savedInstanceState) 
{
  super.onCreate(savedInstanceState);
  GoogleAnalyticsTracker.getInstance().startNewSession("UA-329229164-1", 25, this);
  mWebView.loadUrl("www.mysite.com");
  //store loaded URL page
  String current = mWebView.getUrl();
  //track the page and visit
  this.tracker.trackPageView(current);
}

protected void onDestory()
{
  super.onDetachedFromWindow();
  tracker.stopSession();
} 
```

**错误：**

```
12-10 01:49:32.615: W/Ads(24918): **No Google Analytics: Library Incompatible.**
12-10 01:49:32.745: D/Database(24918): dbopen(): path = /data/data/com.media.trips/databases/webview.db, flag = 6, file size = 29696
12-10 01:49:32.755: D/Database(24918): dbopen(): path = /data/data/com.medi.trip/databases/webview.db, mode: delete, disk free size: 34 M, handle: 0x275840
12-10 01:49:32.775: D/Database(24918): dbopen(): path = /data/data/com.media.trips/databases/webviewCache.db, flag = 6, file size = 23552
12-10 01:49:32.775: D/Database(24918): dbopen(): path = 
```

# asp.net - 网站部署和 IIS 设置

> ID：13793995
> 
> 赞同：0
> 
> 时间：2012-12-10T01:58:15.593
> 
> 标签：asp.net, iis

在 IIS 中设置网站的本地路径的标准或常见做法是什么。是 c:/inetput/MYWEBSITE 还是 c:/inetpub/wwwroot/MYWEBSITE？

根据这篇文章，你可以去任何一种方式。[我应该把我的 ASP.NET 网站放在 wwwroot 文件夹中吗？](https://stackoverflow.com/questions/7529913/should-i-put-my-asp-net-websites-in-the-wwwroot-folder)

感谢您的反馈。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T02:42:00.003

`wwwroot`Intepub 下有一个文件夹。路径可能看起来像`C:\inetpub\wwwroot`

但是您无需将其置于 Intetpub 下即可使您的网站正常工作。您也可以放入任何其他文件夹，只需将位置映射到 IIS 下网站设置中的该文件夹即可。

![在此处输入图像描述](../Images/eee8f6af71e8248b562fd8cc365e45b6.png)

这只是个人选择。这两个地方都有效。我个人将它保存在另一个文件夹下，因为有时我忘记备份我的inetpub。

# c++ - 下划线、名称和文字运算符

> ID：13793996
> 
> 赞同：3
> 
> 时间：2012-12-10T01:58:26.530
> 
> 标签：c++, c++11, operator-overloading

我关于名称中的下划线的问题在[这里得到了部分回答，](https://stackoverflow.com/q/12721584/1275653)但要么答案不完整，要么我不完全理解。

教派。C++11 标准的 2.14.8.7 声明了这个*文字运算符*作为示例：

```
long double operator "" _w(long double); 
```

除了声明操作符之外，标准及其示例还做了另外两件事情，如果分开来看，每件事情都是有意义的：

*   它以`_w`下划线开头；和
*   它将操作符放在全局命名空间中。

我的问题有两个部分：

1.  根据[上面链接的答案，](https://stackoverflow.com/q/12721584/1275653)名称`_w`不是*标识符，*或者标识符`_w`不是*名称，*或者......好吧，我很困惑。
2.  如果没问题`_w`，那么大写的`_W`也可以 - 如`60.0_W`，意思是*60.0 瓦？* 还是预处理器可能会错误处理大写版本？

毫无疑问，我和你一样，不习惯用下划线开始全局名称，这是标准教派的习惯。17.6.4.3.2.1 似乎明确弃用。因此，如果您可以对下划线、名称和文字运算符的问题进行一些额外的说明，那么您将不胜感激。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-10T05:33:12.120

好的，我与 Clang 团队的 Richard Smith 进行了核对，`_W`您的文字运算符中的部分确实不是保留的标识符和/或名称，它也是一个单独的预处理器令牌，如果它命名一个宏，它将被扩展。这与标准子条款 2.5 一致，其中*标识符*是*preprocessor-token*，并且 2.2 具有宏扩展作为阶段 4 的一部分，然后预处理器令牌仅被语言语法的令牌替换，这发生在阶段 7 .

他还提到，[自从委员会的波特兰会议以来](http://www.open-std.org/jtc1/sc22/wg21/docs/cwg_active.html#1473)，你可以说`operator""_W`，这将阻止宏扩展，因为`_W`不再是一个单一的标识符。Clang trunk 已经实现了这个并编译了以下代码片段：

```
#define _W _x

int operator""_W(unsigned long long){ return 42; }

int main(){
  int i = 1337_W;
} 
```

# django - Django覆盖change_view不保存可编辑列表

> ID：13793997
> 
> 赞同：2
> 
> 时间：2012-12-10T01:58:28.473
> 
> 标签：django

我创建了 changelist_view 的覆盖，以便在管理员中的可编辑列表上点击保存按钮后，可编辑列表关闭如下：

```
def changelist_view(self,request,extra_context=None):
    if request.POST.has_key("_save"):
        self.list_editable = []

    return super(InventoryAdmin, self).changelist_view(request,  extra_context=None) 
```

一切正常，只是没有保存数据。我对 Django 相当陌生，但我假设：

```
super(InventoryAdmin, self).changelist_view(request,  extra_context=None) 
```

应该调用原始的 changelist_view 函数，以便仍然保存数据，但它不起作用。如何正确调用原始 changelist_view 函数，以便将更改保存到数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T23:15:54.093

因为您在调用管理员自己`list_editable` *之前*`changelist_view`实际上是在禁用，所以它正在跳过任何更改的保存。

请参阅 Django 文档中的相应代码：

[https://github.com/django/django/blob/master/django/contrib/admin/options.py#L1270](https://github.com/django/django/blob/master/django/contrib/admin/options.py#L1270)

您会看到，当`self.editable`为空时，它不会进行批量更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-19T06:56:03.743

> 在 list_display 中添加“action_checkbox”作为第一个参数。例如：

```
self.list_display = ('action_checkbox', ...) 
```

# jquery - 浏览器中的 Unicode 点呈现差异：HTML 字符与 jQuery.html

> ID：13793998
> 
> 赞同：1
> 
> 时间：2012-12-10T01:58:29.213
> 
> 标签：jquery, html, browser, unicode

假设我有以下基本 HTML 页面

```
<html>
  <head>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>    
    <meta charset=utf-8 />
    <title>JS Bin</title>
  </head>
  <body>
    \u00f2
  </body>
</html> 
```

当页面呈现时，我看到的是 \u00f2 而我期待 ò。还有一个大的“但是”。使用以下 Javascript 代码，我看到的是 ò 字符（2 秒后）。

```
$(function(){
  window.setTimeout(function(){
    $("body").html("\u00f2")},2000);
  });
}); 
```

我的问题是，为什么会这样？我知道我可以将它们转换为 HTML 实体并直接呈现正确的字符，而不是呈现 Unicode 代码点。这个问题更多是出于学习目的。

这是[jsbin](http://jsbin.com/ubofih/1/edit)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T02:14:19.023

这是因为`\u00f2`Unicode 字符的 HTML 标记无效。正确的 HTML 标记是`&#x00f2`. 您需要做的就是替换`\u`为`&#x`，您应该没问题。

如果你想知道为什么 jQuery 使用`\u`，那是因为 javascript 使用了`\u`指定的 unicode 字符。您可以在这里阅读更多内容：[jquery .text() 和 unicode](https://stackoverflow.com/questions/11087027/jquery-text-and-unicode)。

简而言之，`\u`在 Javascript、`&#x`HTML 中使用，不要试图切换它，否则你会遇到问题（比如这里发生的事情）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-10T07:03:32.793

发生这种情况是因为在 HTML 中，`\u00f2`它只是五个字符的序列；反斜杠`\`在 HTML 中从来没有任何特殊含义。在 JavaScript 字符串中，\u00f2 有一个特殊的含义：它表示十六进制数字 00f2 的 Unicode 代码单元，即字符“ò”。

相反，虽然您可以`&#x00f2;`在 HTML 中使用“ò”来表示“ò”，但在 JavaScript 中却无法做到这一点，尽管您可以使用将`&#x00f2;`（从 JavaScript 的角度来看只是八个字符的序列）转换为“ò”的函数。此外，如果您的 JavaScript 代码显示为嵌入在 HTML 中的`script`元素或事件属性中，则浏览器可能会根据某些规则首先`&#x00f2;`通过 HTML 规则进行解释，然后再调用 JavaScript 解释器。

在 HTML 文档中，通常推荐的现代方法是使用 UTF-8 编码直接输入字符。你也可以在 JavaScript 中做同样的事情，例如`$("body").html("ò")},2000)`. 但是，由于指定[字符编码](http://www.w3.org/International/O-charset.en.php)的假设或实际复杂性，有时会避免这种情况。