# StackOverflow 问答 16089000-16089999

# wordpress - 仅重定向目录索引

> ID：16089000
> 
> 赞同：1
> 
> 时间：2013-04-18T16:59:37.003
> 
> 标签：wordpress, .htaccess, redirect, directory, rewrite

我想将访问者重定向`/tools/`到`/tools-reroute`，这相当简单。

棘手的部分是我不希望子目录中的页面`/tools/tool1`被重定向。

所有这一切的原因是我试图在与 WordPress 网站相同的域中包含自定义 Web 应用程序。好奇的用户会回去`/tools/`看看那里还有什么，只是找到一个目录索引，这并不理想。重定向以将`/tools-reroute`它们放在 WordPress 页面上。如果有完全不同的解决方案，我会全神贯注。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T17:08:09.930

只需在主 Wordpress .htaccess 文件中的现有 Wordpress 规则之上添加这一行：

```
RewriteRule ^tools/?$ /tools-reroute [R=301,L,NC] 
```

# android - PhoneGap / Sencha Touch：隐藏软键盘时的 WebView 渲染问题

> ID：16089002
> 
> 赞同：6
> 
> 时间：2013-04-18T16:59:49.323
> 
> 标签：android, cordova, sencha-touch-2

### 软件

我正在使用 Sencha Touch (2.1.1) 和 PhoneGap (2.5.0) 开发适用于 Android 和 iOS 的应用程序。

### 我的问题

在容器底部有一些带有输入字段（[Ext.field.Text](http://docs.sencha.com/touch/2.1.1/#!/api/Ext.field.Text)和[Ext.field.Email ）的视图。](http://docs.sencha.com/touch/2.1.1/#!/api/Ext.field.Email)当您点击输入字段时，Android SoftKeyboard 会显示并将整个视图推到顶部，这样输入字段就不会被键盘隐藏。

现在，当您隐藏键盘（通过按下 Android 隐藏按钮或通过点击输入字段之外的任何位置）时，WebView 不会总是弹回，直到您再次点击 WebView。

### 硬件

目前我在 Nexus 4 (Android 4.2.2) 上遇到了这个问题。在 iOS (iPhone 4/5) 甚至在 Sony XPERIA Go (Android 4.0.4) 上一切正常。

### 截图

以下是问题的一些截图：

![风景](https://i.stack.imgur.com/dF6q0.png) ![键盘将视图推到顶部](https://i.stack.imgur.com/hwPeH.png) ![键盘关闭](https://i.stack.imgur.com/8oJ1a.png)

我已经发现我可以将 Android 更改`windowSoftInputMode`为 `adjustNothing`，但是在隐藏键盘之前你不会看到输入的文本......

### 更新

Sergio 对 3 种缓解措施的一些评论。

第一个解决方案对我来说似乎是最好的。它只影响 Android 项目，不会使我的 JS（例如`if Ext.os.is.Android ...`）或 iOS 代码膨胀。`windowSoftInputMode`不幸的是，如果我按照描述进行设置，我的 Nexus 4 仍会调整焦点并且不会恢复模糊...

第二种解决方案听起来更复杂。如果操作系统是 Android，我需要将每个（底部对齐的）组件移到焦点上并恢复模糊。虽然这绝对是可能的，但可能还有另一个问题：用户可以使用设备的后退键隐藏键盘，而无需移除输入的焦点（不触发模糊）。所以我认为这不是一个合适的解决方案。

第三种解决方案适用于数字输入。但是为文本输入编写一个虚拟键盘是一项艰巨的任务：不同语言环境的键对齐方式不同（例如，德语键盘上的*y*和*z*被调换）并且我们在提供替代键盘时无法满足用户的期望（滑动输入、建议、 ...）。

不要误会我的意思，我很感谢您与我分享您的缓解措施！但我还不完全满意。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-27T13:11:48.633

### Sencha Touch 2.2.0 修复了这个问题！

我终于找到了合适的解决方案。4 月 15 日，Sencha 发布了他们的 Touch 框架的[2.2.0版本。](http://www.sencha.com/blog/hello-sencha-touch-2-2/)从 2.1.0 升级后，布局恢复正常！

为了节省其他人的时间：请注意[Sencha Cmd 3.1.x](http://www.sencha.com/products/sencha-cmd/download)（2.2.0 需要）不适用于 Ruby 2.0.0。构建过程将失败并显示一些奇怪的错误消息。使用 1.9.3 可以正常工作。

### 更新 #2: Sencha Touch 2.2.1...

嗯..我刚刚升级到 Sencha Touch 2.2.1 问题又回来了！因此，如果您打算使用最新的 Sencha Touch 版本，请注意键盘可能会使您的布局崩溃：/

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T02:21:48.680

几个月前，我花了很多时间试图解决这个问题。尝试了一堆东西，通过 Google/StackOverflow 筛选。

最终我无法做到我想要的。看起来我们对很多事情的 Sencha Touch/PhoneGap 的键盘控制不够（简单）（在键盘位置的顶部，我们对“返回/去/确定”的控制基本上也为 0 button 实际上确实如此，这在 Android 版本之间有所不同，尤其是当它是一个数字字段时。）但是：

**缓解 1：** `windowSoftInputMode="stateUnspecified|adjustResize"`将导致键盘覆盖输入，但一旦用户开始输入，屏幕将调整以显示键盘正上方的输入，并且在输入模糊时会根据需要恢复。至少我的三星 Galaxy S2 (2.6)、三星 Galaxy S3 (4.2) 和京瓷 Rise (4.0) 就是这种情况。

**缓解 2：**我实施的一种解决方案是，在输入焦点上，**更改输入的位置**以确保它们位于键盘上方。输入模糊后，输入将更改为其原始位置。这并不理想，因为您经常会看到输入在键盘覆盖之前移动到新位置，因此看起来很笨拙。

**缓解 3：**对于数字字段，我使用了[https://market.sencha.com/extensions/numpad](https://market.sencha.com/extensions/numpad)的修改版本，它创建了一个**虚拟键盘**并将其设置为“showBy()”所需的输入。这确保了键盘永远不会掩盖输入，并且应用程序不必处理屏幕的任何重新定位（下面的屏幕截图）。

*缓解问题 3：*这里的问题是它仅适用于数字字段，并且我无法找到 Sencha Touch 的任何标准键盘插件（我的应用程序以数字为中心，因此限制是可以接受的。）也就是说，我是当然，您可以花几天时间使用 numpad 插件作为核心来构建一个可以以类似方式工作的虚拟键盘。

很抱歉没有完美的解决方案。我希望这是有帮助的！

![在此处输入图像描述](https://i.stack.imgur.com/XVoD4.png)

# jquery - 使用 jquery 将容器的宽度增加 10 rem

> ID：16089004
> 
> 赞同：9
> 
> 时间：2013-04-18T17:00:02.110
> 
> 标签：jquery, css, height, width

如何使用 jquery 将元素的宽度增加 10rem。问题是 Jquery 总是以像素为单位返回宽度/高度，我们希望以其他一些单位更新高度/宽度。

示例：[JS Bin](http://jsbin.com/ubomev/1/edit)

```
var $c = $('#container');
console.log($c.width());

var c = document.getElementById('container');

// Q1\. Why is it different from above one. This is 324 while earlier it was 320\. See the output.
console.log(c.clientWidth);

// Q2\. How to update the code to increase the width by 10rem.
$c.css({width: $c.width() + 10}); //It adds 10 pixels here.

console.log($c.width()); 
```

我的问题是代码中的注释。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-18T18:57:39.120

我想获取`font-size`元素的`html`会给你`rem`，使用一个函数，即使它发生变化，你也可以检索它：

```
 // This Function will always return the initial font-size of the html element 
   var rem = function rem() {
        var html = document.getElementsByTagName('html')[0];

        return function () {
            return parseInt(window.getComputedStyle(html)['fontSize']);
        }
    }();

// This function will convert pixel to rem
    function toRem(length) {
        return (parseInt(length) / rem());
    } 
```

示例：http: [//jsfiddle.net/4NkSu/1/](http://jsfiddle.net/4NkSu/1/)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-06-28T03:43:38.687

决定使用 jquery 发布更新的答案。您可以调用不带参数的函数来获取一个 rem 中的像素数，或者您可以传入一个 rem 的计数来获取该多个 rem 中的像素数。这里还有一个 jsFiddle：http: [//jsfiddle.net/drmyersii/mr6eG/](http://jsfiddle.net/drmyersii/mr6eG/)

```
var rem = function (count)
{
    var unit = $('html').css('font-size');

    if (typeof count !== 'undefined' && count > 0)
    {
        return (parseInt(unit) * count);
    }
    else
    {
        return parseInt(unit);
    }
} 
```

# asp.net-mvc - ASP.NET MVC：从另一个控制器调用一个控制器动作，并应用 ActionFilters

> ID：16089008
> 
> 赞同：3
> 
> 时间：2013-04-18T17:00:21.063
> 
> 标签：asp.net-mvc, action-filter, asp.net-mvc-controller

看看下面的代码。

当`Get()`调用`Foobar()`and时，修饰`Foobaz()`的s不被调用。`ActionFilter``Foobar()``Foobaz()`

我怎样才能从内部调用这两个控制器动作`Get()`，同时导致`SomeAction`and`AnotherAction`过滤器执行？

```
public class Features : Controller
{
    [SomeAction]
    public bool Foobar(string id = null)
    {
        return true;
    }

    [AnotherAction]
    public bool Foobaz()
    {
        return false;
    }

    public JsonResult Get()
    {
        return this.JsonResult(new Dictionary<string, bool>() 
        {
            { "foobar", this.Foobar() },
            { "foobaz", this.Foobaz() }
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T17:52:16.170

控制器操作并不意味着用作方法。为了使它们正常运行，必须在请求周期内调用它们。也许您的示例过于简单，但看起来您正试图将这些“操作”用作标准方法。*虽然从技术上讲*，控制器可以拥有一个从未真正打算公开为路由的方法，但做这种事情并不是一个好主意。将逻辑移到您的模型或某个辅助类中。

# php - MySQL中的边界框搜索

> ID：16089009
> 
> 赞同：1
> 
> 时间：2013-04-18T17:00:21.990
> 
> 标签：php, mysql, geospatial, bounding-box

我试图弄清楚如何使用地理边界框的“左上纬度和经度”和“右下纬度和经度”从下面的 MySQL 表中检索信息。

```
CREATE TABLE `markers` (
  `id` INT NOT NULL AUTO_INCREMENT PRIMARY KEY ,
  `name` VARCHAR( 60 ) NOT NULL ,
  `address` VARCHAR( 80 ) NOT NULL ,
  `lat` decimal(10,7) NOT NULL ,
  `long` decimal(10,7) NOT NULL,
  `geopoint` point NOT NULL,
  PRIMARY KEY  (id),
  SPATIAL geopoint (geopoint)
) ENGINE = MYISAM ; 
```

到目前为止，我有下面的 SQL 查询，我不确定它是否是检索信息的最有效和最有效的方式？

```
$sql = "SELECT * FROM `markers` WHERE (long BETWEEN '$west_long' AND '$east_long') AND (lat BETWEEN '$north_lat' AND '$south_lat')"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T19:17:48.117

有相当令人印象深刻的公式可以将两个纬度转换为距离（米、英里），经度也是如此。

只要您的请求在地球的某个范围内，您就应该帮助 MySQL 使用第二个大大简化的加宽 where-condition 以减小到正确的矩形。

如果您在 php 或 sql 中采用这些公式，这是您的选择 - 以米为单位的框可以转换为以纬度/经度为单位的框。

一个简单的经纬度矩形永远不会是一个真正的矩形，就像你在每个橙色上看到的那样。

马可

# android - RemoteViews 在 View 类中不起作用

> ID：16089012
> 
> 赞同：1
> 
> 时间：2013-04-18T17:00:30.483
> 
> 标签：android, view, remoteview

我正在 View 类中制作自定义 UI，并在其中制作了 RemoteViews，但它不起作用。

查看课程

```
public class CustomeView extends View {

    Bitmap icon;
    float left=0;
    RemoteViews rs;
    int width=0,height=0;
    float def_value=0;
    boolean unlock=false;

    public CustomeView(Context context, AttributeSet attrs) {
        super(context, attrs);
        icon=BitmapFactory.decodeResource(getResources(), R.drawable.icon);
        rs=new RemoteViews(context.getPackageName() ,R.layout.custom_ui);

        WindowManager wm = (WindowManager) context.getSystemService(Context.WINDOW_SERVICE);
        Display display = wm.getDefaultDisplay();
        width = display.getWidth();
        height = display.getHeight();

        left=width/2;
        def_value=left;
    }

    @Override
    protected void onDraw(Canvas canvas) {
        // TODO Auto-generated method stub
        super.onDraw(canvas);
        Paint a=new Paint();
        a.setTextSize(10);

        canvas.drawBitmap(icon, left, 0, null);
        canvas.drawText(String.valueOf(unlock), 0, 110, a);
    }

    @Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
           setMeasuredDimension(width, height);
    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {
        // TODO Auto-generated method stub
        if(event.getAction()==MotionEvent.ACTION_MOVE){
            left=event.getX()-(icon.getWidth()/2);
            isUnlock();
        }
        else if (event.getAction()==MotionEvent.ACTION_UP) {
            if(def_value!=left){
                left=def_value;
            }
        }
        invalidate();
        return true;
    }

    protected void isUnlock() {
        if(left<=20){           
            unlock=true;
            rs.setTextViewText(R.id.tvStatus, "True");
        }
        if(left>=width-20){
            unlock=true;
            rs.setTextViewText(R.id.tvStatus, "True");
        }
    }
} 
```

custom_ui.xml 布局

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <com.example.helloworl.CustomeView 
        android:id="@+id/icon"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true" />

    <TextView
        android:id="@+id/tvStatus"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_marginLeft="20dp"
        android:layout_marginTop="154dp"
        android:text="False" />

</RelativeLayout> 
```

RemoteViews 在 isUnlock 方法中更改 TextView 的值，但它不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T17:10:33.747

您不能使用带有 的自定义视图`RemoteViews`，因为其他进程无权访问您的 Java 代码。

# machine-learning - 机器学习概述

> ID：16089013
> 
> 赞同：2
> 
> 时间：2013-04-18T17:00:32.707
> 
> 标签：machine-learning, analytics, enterprise

这可能不是关于 SO 的问题类型，而只是想听听其他人对在大型企业环境中实施机器学习算法时要考虑哪些因素有什么看法。

我的目标之一是研究可以根据我公司的特定需求量身定制的行业机器学习解决方案。作为我团队中几乎唯一一个拥有数学背景并且之前对机器学习算法进行过一些背景阅读的人，我的任务是解释/比较行业中的机器学习解决方案。根据我通过谷歌搜索收集的信息，似乎：

一个。机器学习和预测分析并不完全相同，那么当一家公司提供预测分析软件与机器学习软件时，有什么本质上的不同呢？（例如 IBM Predictive Analytics 与 Skytree Server）

湾。许多流行的术语经常纠缠在一起，特别是关于大数据、Hadoop、机器学习等。有人能澄清这些术语之间的区别吗？根据我所学到的，我认为概念分离是这样的：

*   机器学习算法
*   软件实施
*   在大型数据集 (Hadoop) 上运行软件的基础架构

C。在实施解决方案时，大多数公司是从解决方案公司聘请顾问来帮助实施算法，还是大多数算法都是预先构建的，任何数据分析师都可以使用它们？或者我们是否需要一个数据科学家团队，即使有软件来运行算法并理解输出？

我知道这是一个相当冗长的问题，但任何信息都会有所帮助。作为唯一一个远程知道这些东西的人有点困难，所以我很想听听更有经验和技术的人怎么说。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T06:51:29.080

如果不知道您拥有多少数据以及您公司的需求是什么，就很难回答您的问题。这将帮助您缩小可以满足您需求的解决方案类型。其中，可能会有开源解决方案（也许是 Mahout）、可视化解决方案以及各种帮助您管理数据的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-16T09:09:50.983

关于大数据/Hadoop/ML： **大数据**是定义您需要处理的数据本质的术语。大多数情况下，您可以通过称为 3Vs（数量、品种和速度）的东西来定义大数据与“普通”数据。定义“大数据所需的容量”的阈值不是科学定义的，而是更多地出于可行性考虑：如果您认为数据量在维护常规数据库（MySql 等）方面产生了很大的开销，那么您可能会考虑大数据解决方案。 **Hadoop**只是设计用于处理大数据的最常用工具。

机器学习是从统计学和计算机科学发展而来的数据科学的子领域。这个想法是让机器在没有明确编程的情况下学习。简而言之，学习方法的目标是概括过去的数据以预测新数据。大数据和机器学习被一起提到，因为机器学习技术的本质是需要数据才能学习。行业中存在大数据趋势，大数据的性质需要为 ML 算法提供大量数据以使其学习（非结构化稀疏数据）。

大多数公司聘请数据科学家来处理这些任务，因为它需要大量的统计、计算机科学、算法等知识，而普通数据分析师并不具备这些知识。大多数数据科学家的工作并不是“运行一个现成的算法”，在你开始考虑算法之前，有很多准备和静态分析数据。你不需要提前雇佣一个团队，但它是一个可以根据需要随着时间逐渐增长的功能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-04-10T14:32:59.807

关于你问题的第三部分：

学习一些新的和强大的东西总是有一个初始的学习曲线。这同样适用于使用机器学习的数据建模。如果您受到预算等约束的限制，则需要您花一些时间来学习算法功能的基础知识，然后再学习它的实现。但是，如果您受时间限制，您可能需要聘请数据科学家/机器学习工程师团队。但是，从长远来看，如果您开始了解一点机器学习，这总是会有所帮助，这样您就可以轻松地与您的团队协作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-12-30T13:57:48.033

在回答问题的 C 部分时，机器学习已经为有监督和无监督方法预先构建了算法。要为组织提供解决方案，我们首先必须了解客户的需求，在选择算法之前，我们首先选择监督学习或无监督学习。如果需要监督学习，那么首先我们必须进行特征工程，这是监督学习中非常重要的一部分，它可以从其他学科中找到识别它们的属性。然后我们再根据问题选择分类算法或预测算法。为此，我们有很多算法，但是选择最好的一个，完全取决于您的硬件能力和数据处理能力算法。我们有比较图表。

当我们想要识别数据中的异常或者我们想要对具有相似属性的数据进行聚类时，无监督学习是最好的。

希望这将帮助您理解问题的第三部分。

# events - 使用 Zend Framework 事件管理器清除缓存

> ID：16089014
> 
> 赞同：1
> 
> 时间：2013-04-18T17:00:32.940
> 
> 标签：events, zend-framework, caching

我尝试在 ZF1 中实现缓存失效。我的想法是向缓存类添加一个侦听器，这将在发生“无效”事件时触发无效。

根据我在手册中学到的正确方法是将事件管理器添加到每个可能触发缓存失效的类，然后将缓存类侦听器附加到它。但是做这么简单的任务似乎需要做很多工作。

可以编写它以便它工作。比如：*任何类都可以触发'invalidate'事件*每当触发invalidate事件时，调用CacheManager类的指定回调并清除缓存

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-22T15:56:48.843

我做了什么，希望它会有所帮助：

```
class Application_Service_Client extends Application_Service_AbstractService
{

    protected $cacheFormId = 'clientList';
    protected $index = 'client';

    public function __construct()
    {
        parent::__construct(new Application_Model_DbTable_Client());

        $this->events->attach('insert', function ($e) {
            $event  = $e->getName();
            $target = get_class($e->getTarget());

            $this->cleanCache('clientList');
        });
    }

    public function ajouterClient($data)
    {
        unset($data['csrfhash']);
        $id = $this->model->ajouter($data);
        $client = $this->findClient($id);

        $this->events()->trigger('insert', $this, $client);
        return $client;
    }

    public function formList()
    {
        mb_internal_encoding("UTF-8");

        $cache   = $this->getCache();
        $cacheId = $this->cacheFormId;

        if (!($toCache = $cache->load($cacheId))) {
            $itemAll = $this->findAll();
            foreach ($itemAll as $item) {
                $key[]  = $item['IDCLIENT'];
                $value[] = $item['NOM'] . ' ' . $item['PRENOM'];
            }

            $toCache = array_combine($key, $value);
            $cache->save($toCache, $cacheId);
        }

        return $toCache;
    }

} 
```

和抽象类：

```
abstract class Application_Service_AbstractService
{
    protected $model;

    protected $cache;

    protected $events;

    public function __construct($model = null)
    {
        if (!is_null($model)) {
            $this->setModel($model);
        }

        $this->events();
        $this->setCache();
    }

    public function events(Zend_EventManager_EventCollection $events = null)
    {
        if (null !== $events) {
            $this->events = $events;
        } elseif (null === $this->events) {
            $this->events = new Zend_EventManager_EventManager(__CLASS__);
        }
        return $this->events;
    }

    public function setCache($cacheName = 'form')
    {
        $bootstrap = \Zend_Controller_Front::getInstance()->getParam('bootstrap');

        $cacheManager = $bootstrap->getResource('cachemanager');

        $this->cache = $cacheManager->getCache($cacheName);
    }

    /** 
     * Get a cache object from the cache manager 
     * 
     * @return Zend_Cache 
     */
    protected function getCache()  
    {
        if (!$this->cache) {
            $this->setCache();
        }
        return $this->cache;
    }

    protected function cleanCache($cacheId)
    {
        $this->cache->remove($cacheId);
    }

} 
```

# asp.net-mvc - 如何使用声明令牌进行 HttpWebRequest 调用？

> ID：16089019
> 
> 赞同：3
> 
> 时间：2013-04-18T17:00:56.680
> 
> 标签：asp.net-mvc, claims-based-identity

我有两个网站 - ABC.com 和 XYZ.com。两者都在 ASP.NET MVC4 中。两者都被配置为依赖于公共 ACS（安全令牌服务）的依赖方，而后者又委托给 Google。

首先，我调用 ABC.com，一旦通过 google 身份验证，我使用 Thread.CurrentPrincipal.Identity 在代码中获取 Claims Identity。现在我需要使用此令牌以编程方式对 XYZ.com 进行 HttpWebRequest/WebClient 调用并获得响应。

我找不到有关此主题的任何教程或问题。任何见解都受到高度赞赏。如何使用声明令牌进行 HttpWebRequest 调用？

谢谢，

# java - 如何从 Amazon S3 读取大文件？

> ID：16089035
> 
> 赞同：5
> 
> 时间：2013-04-18T17:01:42.813
> 
> 标签：java, amazon-web-services, amazon-s3, guava

我有一个程序可以从 Amazon s3 读取文本文件，但文件大小约为 400M。我增加了堆大小，但仍然收到 Java 堆大小错误。所以，我不确定我的代码是否正确。我正在使用 Amazon SDK for java 和 Guava 来处理文件流。

请帮忙

```
 S3Object object = s3Client.getObject(new GetObjectRequest(bucketName, folder + filename));
        final InputStream objectData = object.getObjectContent();

        InputSupplier supplier = CharStreams.newReaderSupplier(new InputSupplier() {
            @Override
            public InputStream getInput() throws IOException {
                return objectData;
            }
        }, Charsets.UTF_8);

        String content = CharStreams.toString(supplier);
        objectData.close();

        return content; 

```

我将此选项用于我的 JVM。`-Xms512m -Xmx2g`. 我使用 ant 来运行主程序，因此我也将 jvm 选项包含在 ANT_OPTS 中。但它仍然无法正常工作。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-18T17:48:37.960

要点`InputSupplier`——尽管你现在应该使用`ByteSource`——`CharSource`是你不应该`InputStream`从外部访问它，所以你不必记住是否关闭它。

如果您之前使用过旧版本的番石榴`ByteSource`并被`CharSource`介绍过，那么应该是

```
 InputSupplier supplier = CharStreams.newReaderSupplier(new InputSupplier() {
        @Override
        public InputStream getInput() throws IOException {
           S3Object object = s3Client.getObject(
             new GetObjectRequest(bucketName, folder + filename));
           return object.getObjectContent();
        }
    }, Charsets.UTF_8);
    String content = CharStreams.toString(supplier); 
```

如果您使用的是 Guava 14，那么这可以更流畅地完成

```
 new ByteSource() {
      @Override public InputStream openStream() throws IOException {
        S3Object object = s3Client.getObject(
            new GetObjectRequest(bucketName, folder + filename));
        return object.getObjectContent();
      }
    }.asCharSource(Charsets.UTF_8).read(); 
```

也就是说：您的文件可能是 400MB，但 Java`String`存储为 UTF-16，这很容易使其内存消耗翻倍。您可能需要更多内存，或者您需要找出一种方法来避免将整个文件一次保存在内存中。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2018-01-21T20:09:48.810

您可以分部分读取文件，而不是将整个文件放在内存中，这样您的整个文件就不会在内存中。避免将整个文件放在内存中，以免因内存有限而出现内存问题

```
GetObjectRequest rangeObjectRequest = new GetObjectRequest(bucketName, key);
rangeObjectRequest.setRange(0, 1000); // retrieve 1st 1000 bytes.
S3Object objectPortion = s3Client.getObject(rangeObjectRequest);
InputStream objectData = objectPortion.getObjectContent(); 
```

//现在进入循环并通过从s3读取内容并在循环中追加文件来在本地创建文件，因此内存中不会有全部内容

# android - 无法弹出安卓手机

> ID：16089037
> 
> 赞同：19
> 
> 时间：2013-04-18T17:01:50.810
> 
> 标签：android, adb

当我尝试从我的 Windows 8 笔记本电脑中弹出我的 Android 手机时（使用任务栏中的“安全删除硬件并弹出媒体”图标），我收到一个“弹出 USB 复合设备问题”弹出消息：

> Windows 无法停止您的“Android ADB 接口”设备，因为某个程序仍在使用它。关闭所有可能正在使用该设备的程序，然后再试一次。

我有许多后台和 Windows 进程正在运行，但没有应用程序，所以知道是什么原因造成的吗？后台进程之一是“abd（32 位）”，所以我应该结束该任务吗？还是拔掉设备而不担心先弹出它会更好吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-06-02T00:26:16.163

Android 使用 ADB 与物理设备和模拟器进行通信。要正确断开手机的连接，请先停止 ADB 服务器，然后弹出您的设备。

```
CD C:\Users\<user_name>\AppData\Local\Android\android-sdk\platform-tools
adb kill-server 
```

然后弹出您的设备。

更多信息[在这里](http://developer.android.com/tools/help/adb.html)。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-05-26T06:57:37.600

正如 Andrew Halloran 所说，如果您首先结束 Android Debug Bridge adb，则可以安全地删除设备。这可以使用任务管理器完成 ![在此处输入图像描述](https://i.stack.imgur.com/AJxrO.png)

然后单击“安全删除硬件并弹出媒体”

# c++ - 用引用隐藏指针

> ID：16089038
> 
> 赞同：3
> 
> 时间：2013-04-18T17:01:53.633
> 
> 标签：c++, pointers, reference

用使用引用的设置器隐藏指针成员是一件好事吗？

```
class Foo
{
    Bar* m_ptr;
public :
    void setBar(Bar& bar){m_ptr = &bar;}
}; 
```

还是最好在设置器中公开引用对象的真实类型（以及为什么）？

```
void setBar(Bar* bar){m_ptr = bar;} 
```

事实上，我使用的是非“引用友好”的 stl 竞争者，因此我将指针向量作为类成员，但我更喜欢处理采用引用的方法。这样做是件坏事吗？

**编辑 ：**

存储的成员是指针，这个例子更适合我的问题：

```
class Foo
{
   std::vector<FooObserver *> m_observers; 
public : 
```

你喜欢这个：

```
void addObserver(FooObserver* obs); 
```

或这个 ：

```
void addObserver(FooObserver& obs); 
```

?

在这两种情况下，指针都不应该为 NULL，我认为这是调用者对象的责任。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T17:03:27.237

对我来说，它归结为类型的语义。如果指针掩盖了一个从未打算成为的成员，`NULL`那么绝对在输入和输出位置都使用引用。如果值可以合法`NULL`，那么使用指针是最好的方法

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-18T17:04:12.990

这取决于您要实现的目标，两者都是完全合理的。

唯一的区别* 是`void setBar(Bar* bar)`它将接受空指针，而`void setBar(Bar& bar)`显然不会。

您可以根据是否允许空指针来选择要使用哪一个。

（*）假设作者`Bar`没有提供自定义`operator&`（无论如何这是一个糟糕的想法）。

* * *

**编辑：**由于您不想允许存储空指针，因此最好使用引用。您说“*指针永远不应该为 NULL，我认为这是调用者对象的责任*”，但是通过引用，您有机会在编译时强制执行它并避免完全依赖调用者的善意，这是更好的设计。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-18T17:04:08.603

是的。由于它混淆了您对这两个对象的终生控制，请考虑这一点

```
void AdjustFoo(Foo& f)
{

     Bar B;
     f.setBar(B);
     //Crap f now contains a bad pointer to B after this function exists 
} 
```

如果 foo 需要拥有一个 B，它应该拥有一个 shared_ptr 或 B 的副本。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-18T19:37:40.653

这是一个约定的问题，但我更喜欢包含以下内容的内容：

*   如果被调用的方法保留了传递对象的指针，请使用指针参数**并在 API 文档中明确说明生命周期要求**。
*   如果被调用的方法只是在方法执行期间偷看（并且可能戳入）传递的对象，请使用引用。
*   接受参考说：我只接受有效的对象。
*   接受指针表示：除非另有明确说明，否则我也接受空指针。

顺便说一句，我不喜欢到处放置共享指针。终生失去控制，所有权变得模糊。当然，共享指针仍然有非常有效的用途，但永远不要仅仅因为您不想考虑生命周期和所有权而使用它们。

# debugging - 如何在 GAS 中测试触发功能？

> ID：16089041
> 
> 赞同：57
> 
> 时间：2013-04-18T17:01:57.597
> 
> 标签：debugging, google-apps-script, triggers

Google Apps 脚本支持[触发器](https://developers.google.com/apps-script/understanding_triggers)，将[事件](https://developers.google.com/apps-script/understanding_events)传递给触发器函数。不幸的是，开发环境将允许您在不传递参数的情况下测试函数，因此您无法以这种方式模拟事件。如果您尝试，您会收到如下错误：

> ReferenceError: 'e' 未定义。

或者

> 类型错误：无法从未定义中读取属性 *...*

（`e`未定义的地方）

[可以将事件视为可选参数，并使用来自Is there a better way to do optional function parameters in JavaScript? 中](https://stackoverflow.com/questions/148901/is-there-a-better-way-to-do-optional-function-parameters-in-javascript)的任何技术将默认值插入到触发函数中？. 但这带来了一个风险，即懒惰的程序员（如果是你，请举手！）会留下该代码，并产生意想不到的副作用。

肯定有更好的方法吗？

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2013-04-18T17:03:00.633

您可以编写一个测试函数，将模拟事件传递给您的触发函数。`onEdit()`这是一个测试触发功能的示例。[它传递一个事件对象，其中包含了解事件](https://developers.google.com/apps-script/understanding_events)中“电子表格编辑事件”中描述的所有信息。

要使用它，请在目标`onEdit`函数中设置断点，选择函数`test_onEdit`并点击`Debug`。

```
/**
 * Test function for onEdit. Passes an event object to simulate an edit to
 * a cell in a spreadsheet.
 *
 * Check for updates: https://stackoverflow.com/a/16089067/1677912
 *
 * See https://developers.google.com/apps-script/guides/triggers/events#google_sheets_events
 */
function test_onEdit() {
  onEdit({
    user : Session.getActiveUser().getEmail(),
    source : SpreadsheetApp.getActiveSpreadsheet(),
    range : SpreadsheetApp.getActiveSpreadsheet().getActiveCell(),
    value : SpreadsheetApp.getActiveSpreadsheet().getActiveCell().getValue(),
    authMode : "LIMITED"
  });
} 
```

如果你很好奇，这是为了测试[Google Spreadsheet](https://stackoverflow.com/questions/16085461/google-spreadsheet-conditional-on-three-cells)`onEdit`的函数，以三个单元格为条件。

这是电子表格表单提交事件的测试函数。它通过读取表单提交数据来构建其模拟事件。这最初是为[在 onFormSubmit 触发器中获取 TypeError 编写的？](https://stackoverflow.com/questions/17984230/how-do-i-fix-typeerror-when-trying-to-merge-google-form-data-to-pdf-and-send-to/17984695#17984695).

```
/**
 * Test function for Spreadsheet Form Submit trigger functions.
 * Loops through content of sheet, creating simulated Form Submit Events.
 *
 * Check for updates: https://stackoverflow.com/a/16089067/1677912
 *
 * See https://developers.google.com/apps-script/guides/triggers/events#google_sheets_events
 */
function test_onFormSubmit() {
  var dataRange = SpreadsheetApp.getActiveSheet().getDataRange();
  var data = dataRange.getValues();
  var headers = data[0];
  // Start at row 1, skipping headers in row 0
  for (var row=1; row < data.length; row++) {
    var e = {};
    e.values = data[row].filter(Boolean);  // filter: https://stackoverflow.com/a/19888749
    e.range = dataRange.offset(row,0,1,data[0].length);
    e.namedValues = {};
    // Loop through headers to create namedValues object
    // NOTE: all namedValues are arrays.
    for (var col=0; col<headers.length; col++) {
      e.namedValues[headers[col]] = [data[row][col]];
    }
    // Pass the simulated event to onFormSubmit
    onFormSubmit(e);
  }
} 
```

### 提示

模拟事件时，请注意尽可能匹配记录的事件对象。

*   如果您希望验证文档，您可以从触发函数记录接收到的事件。

    ```
    Logger.log( JSON.stringify( e , null, 2 ) ); 
    ```

*   在电子表格表单提交事件中：

    *   所有 namedValues 值都是数组。
    *   时间戳是字符串，它们的格式将本地化为表单的区域设置。如果从具有默认格式^*的电子表格中读取，它们是 Date 对象。如果您的触发函数依赖于时间戳的字符串格式（这是一个坏主意），请注意确保正确模拟该值。
    *   如果您的电子表格中有不在表单中的列，则此脚本中的技术将模拟包含这些附加值的“事件”，这不是您从表单提交中收到的内容。
    *   如[问题 4335](https://code.google.com/p/google-apps-script-issues/issues/detail?id=4355)中所述，`values`数组跳过空白答案（在“新表单”+“新工作表”中）。该`filter(Boolean)`方法用于模拟这种行为。

* * *

^*单元格格式的“纯文本”会将日期保留为字符串，这不是一个好主意。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2020-09-11T16:42:54.657

### 2020-2021 年更新：

您不需要使用前面答案中建议的任何类型的模拟事件。

如问题中所述，如果您直接在脚本编辑器中“运行”该功能，则会出现错误

> TypeError：无法从未定义中读取属性*...*

被抛出。这些不是真正的错误。此错误只是因为您在没有事件的情况下运行了该函数。如果您的函数未按预期运行，则需要找出实际错误：

要测试触发功能，

1.  手动触发相应事件：即要测试`onEdit`，编辑sheet中的一个单元格；要测试`onFormSubmit`，请提交一个虚拟表单响应；要进行测试`doGet`，请将浏览器导航到已发布的 webapp `/exec`url。

2.  如果有任何错误，则会将其记录到 stackdriver。要查看这些日志，

    *   在左侧栏中的脚本编辑器 > 执行图标中（**旧版编辑器：**视图 > 执行）。

    *   或者，单击[此处](https://script.google.com/home)>单击您感兴趣的项目>单击左侧栏上的“执行”图标（第 4 个）

3.  您将在执行页面中找到执行列表。确保清除左上角的“Ran as:Me”等任何过滤器以显示所有执行。单击您感兴趣的执行，它将以红色显示导致触发器失败的错误。

> 注意：有时，由于错误，日志不可见。尤其是在 webapp 由匿名用户运行的情况下更是如此。在这种情况下，建议将默认谷歌云项目切换为标准谷歌云项目，并直接使用 View> Stackdriver logging。请参阅[此处](https://stackoverflow.com/a/64002160/)了解更多信息。

4.  为了进一步调试，您可以使用编辑代码添加到`console.log(/*object you're interested in*/)`您感兴趣的任何行之后，以查看该对象的详细信息。**强烈建议**您对要查找的对象进行字符串化：因为`console.log(JSON.stringify(e))`日志查看器具有特殊性。添加后`console.log()`，从步骤 1 开始重复。重复此循环，直到缩小问题范围。

恭喜！您已经成功地解决了问题并越过了第一个障碍。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2017-10-21T04:28:33.673

**2017 年更新：**使用[Stackdriver Logging](https://developers.google.com/apps-script/guides/logging#stackdriver_logging) for Google Apps 脚本 调试[事件对象。](https://developers.google.com/apps-script/guides/triggers/events)从脚本编辑器的菜单栏中，转到： 查看或流式传输日志。`View > Stackdriver Logging`

[console.log()](https://developers.google.com/apps-script/reference/base/console)将写入`DEBUG`级别消息

示例**onEdit()**：

```
function onEdit (e) {
  var debug_e = {
    authMode:  e.authMode,  
    range:  e.range.getA1Notation(),    
    source:  e.source.getId(),
    user:  e.user,   
    value:  e.value,
    oldValue: e. oldValue
  }

  console.log({message: 'onEdit() Event Object', eventObject: debug_e});
} 
```

示例**onFormSubmit()**：

```
function onFormSubmit (e) {
  var debug_e = {
    authMode:  e.authMode,  
    namedValues: e.namedValues,
    range:  e.range.getA1Notation(),
    value:  e.value
  }

  console.log({message: 'onFormSubmit() Event Object', eventObject: debug_e});
} 
```

示例**onChange()**：

```
function onChange (e) {
  var debug_e = {
    authMode:  e.authMode,  
    changeType: changeType,
    user:  e.user
  }

  console.log({message: 'onChange() Event Object', eventObject: debug_e});
} 
```

然后检查[Stackdriver UI](https://console.cloud.google.com/logs/viewer)中标记为`message`字符串的日志以查看输出

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-08-01T19:24:07.400

作为对上述第 4 点中提到的方法（**2020 年更新**）的补充：这是我用来跟踪触发代码的一个小例程，它已经为我节省了很多时间。我还打开了两个窗口：一个带有堆栈驱动程序（执行），一个带有代码（主要位于库中），因此我可以轻松找出罪魁祸首。

```
/**
 *
 * like Logger.log %s in text is replaced by subsequent (stringified) elements in array A
 * @param {string | object} text %s in text is replaced by elements of A[], if text is not a string, it is stringified and A is ignored
 * @param {object[]} A array of objects to insert in text, replaces %s
 * @returns {string} text with objects from A inserted 
 */
function Stringify(text, A) {
  var i = 0 ;
  return (typeof text == 'string') ? 
      text.replace(
        /%s/g, 
        function(m) { 
          if( i >= A.length) return m ;
          var a = A[i++] ;
          return (typeof a == 'string') ? a :  JSON.stringify(a) ;
        } ) 
      : (typeof text == 'object') ? JSON.stringify(text) : text ;
}

/* use Logger (or console) to display text and variables. */
function T(text) {
  Logger.log.apply(Logger, arguments) ;
  var Content = Stringify( text, Array.prototype.slice.call(arguments,1) ) ;
  return Content ;
}

/**** EXAMPLE OF USE ***/
function onSubmitForm(e) {
  T("responses:\n%s" , e.response.getItemResponses().map(r => r.getResponse()) ;
}
```

# c# - 在每个像素碰撞后控制玩家运动

> ID：16089048
> 
> 赞同：2
> 
> 时间：2013-04-18T17:02:18.010
> 
> 标签：c#, xna, collision-detection, xna-4.0

![在此处输入图像描述](https://i.stack.imgur.com/c28EJ.jpg)

我已经实现了一个完整的每像素碰撞系统，它考虑了旋转，并且非常准确。它在碰撞时返回一个简单的布尔值。

但是我不确定如何从玩家运动的角度处理碰撞。

例如上图中，如果玩家在左摇杆上举起，他应该停下来，但如果他在左摇杆上举起+右斜线，他应该几乎自然地沿着红色方块的一侧向东北滑动。

我该如何解决这个问题，以使玩家的动量停止，但仍然控制玩家朝未被碰撞阻挡的方向移动。

我可以用简单的未转换矩形来做这种事情，但是进入每像素纹理碰撞让我今天的大脑爆炸了，所以我希望你们能提供帮助。任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-08T09:48:40.193

有可能的。为此，如果您愿意在游戏中赋予自然效果，则需要使用基于像素的碰撞来实现物理引擎。

为此，您要么编写自己的游戏引擎，要么使用已经存在的引擎。对于 2D 游戏，我强烈推荐[Farseer Physics Engine](http://farseerphysics.codeplex.com/)。它已经存在了很长时间。现在情况稳定，肯定很棒。

它是从头开始使用 XNA 开发的，而且在性能方面它也非常好。

看看这个。我希望我能给你答案。如果需要更多详细信息，请告诉我。

# c++ - 根据C++模板类型调用不同的C函数

> ID：16089053
> 
> 赞同：3
> 
> 时间：2013-04-18T17:02:30.833
> 
> 标签：c++, c, templates, macros

我的问题如下：我有一个 C 库，其中包含每个函数的多个版本，具体取决于它们使用的数据类型，例如：

```
void add(double *a, double *b, double *c); 
```

和

```
void sadd(float *a, float *b, float *c); 
```

现在，拥有一个外部 C++ 模板函数，我希望能够执行以下操作：

```
template<class T>
void myfunc(/*params*/)
{
 // Obtain a,b,c of type T* from params

/*
 If T is double call add(a,b,c);
 else if T is float call sadd(a,b,c).
*/ 
} 
```

我知道它可以通过专门的模板功能来完成，例如：

```
template<>
void myfunc<double>(/*params*/)
{
  // Obtain a,b,c of type double* from params
  add(a,b,c);
} 
```

等等，但这并不是一个真正的选择，因为引入模板化 C++ 函数的全部目的是减少代码重复，并且“// 从参数中获取 T* 类型的 a、b、c”部分可能非常长。

这个问题有简单的解决方案吗？

谢谢

兹德内克

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-18T17:11:37.313

定义重载的 C++ 转发器：

```
inline void forward_add(double *a, double *b, double *c) { add( a, b, c ); }
inline void forward_add(float *a, float *b, float *c) { sadd( a, b, c ); }

template<class T>
void myfunc(/*params*/)
{
   // Obtain a,b,c of type T* from params
   forward_add( a, b, c );
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T18:09:21.767

您必须在某个地方告诉编译器`sadd`并且`add`是相关的。

一种方法是特征类模板结构数学；

```
template<>
struct math<double> {
  static void add(double *a, double *b, double *c) {
    return ::add(a, b, c);
  }
};
template<>
struct math<float> {
  static void add(float*a, float*b, float*c) {
    return ::sadd(a, b, c);
  }
}; 
```

你在哪里使用它：

```
template<class T>
void myfunc(/*params*/)
{
  // Obtain a,b,c of type T* from params

  math<T>::add( a, b, c );
} 
```

这具有将所有基于类型的重构放在一个位置的优点和缺点。

`double`另一种方法是创建具有和重载的独立 C++ 函数`float`。这具有允许您的代码分布在多个位置的优点和缺点。

```
void math_add( double* a, double* b, double* c ) {
  add(a,b,c);
}
void math_add( float* a, float* b, float* c ) {
  sadd(a,b,c);
} 
```

现在，假设您的所有函数共享相同的名称模式—— `foo`for`double`和`sfoo`for `float`。在这种情况下，可以使用基于文本的代码生成来缓解上述一些“编写重载”代码。

这里唯一的问题是函数的签名可能会有所不同。如果只有少数几个，简单的宏就可以了：

```
#define MAKE_FUNCS( f ) \
  void CONCAT( math_, f ) ( double* a, double* b, double * c ) { \
    f ( a, b, c ); \
  } \
  void CONCAT( math_, f ) ( float* a, float* b, float* c ) { \
    CONCAT( f, s ) ( a, b, c ); \
  } 
```

然后只需`MAKE_FUNCS`为您尝试以这种方式克隆的库中的每个函数发送垃圾邮件。

一个缺点（很多）是它只支持一组固定的签名。我们可以通过完美转发来解决这个问题，这是一种 C++11 技术：

```
#define MAKE_FUNCS( f ) \
  template< typename... Args >\
  auto f ( Args&&... args ) \
    -> decltype(::f ( std::forward<Args>(args)... )) \
  { \
    ::f ( std::forward<Args>(args)... ); \
  } \
  template< typename... Args >\
  auto f ( Args&&... args ) \
    -> decltype(:: CONCAT( f, s ) ( std::forward<Args>(args)... )) \
  { \
    :: CONCAT( f, s ) ( std::forward<Args>(args)... ); \
  } 
```

但这会遇到 SFINAE 和相同的签名问题。您可以通过显式表达式 SFINAE 来解决此问题：

```
#include <utility>
#include <type_traits>
#include <cstddef>
#include <iostream>

#define CONCAT2( a, b ) a##b
#define CONCAT( a, b ) CONCAT2(a,b)

// SFINAE helper boilerplate:
template<typename T> struct is_type:std::true_type {};
template<std::size_t n> struct secret_enum { enum class type {}; };
template<bool b, std::size_t n>
using EnableIf = typename std::enable_if< b, typename secret_enum<n>::type >::type;

// Macro that takes a srcF name and a dstF name and an integer N and
// forwards arguments matching dstF's signature.  An integer N must be
// passed in with a distinct value for each srcF of the same name:
#define FORWARD_FUNC( srcF, dstF, N ) \
template< typename... Args, \
  EnableIf< is_type< \
    decltype( dstF ( std::forward<Args>(std::declval<Args>())... )) \
  >::value , N >... > \
auto srcF ( Args&&... args ) \
  -> decltype(dstF ( std::forward<Args>(args)... )) \
{ \
  dstF ( std::forward<Args>(args)... ); \
}

#define MAKE_FUNCS( f ) \
  FORWARD_FUNC( f, ::f, 0 ) \
  FORWARD_FUNC( f, :: CONCAT( f, s ), 1 )

void add( double* a, double* b, double* c) {*a = *b+*c;}
void adds( float* a, float* b, float* c) {*a = *b+*c;}
namespace math {
  MAKE_FUNCS(add)
}
int main() {
  double a, b = 2, c = 3;
  float af, bf = 3, cf = 5;
  math::add( &a, &b, &c );
  math::add( &af, &bf, &cf );
  std::cout << a << "=" << b << "+" << c << "\n";
  std::cout << af << "=" << bf << "+" << cf << "\n";
} 
```

但正如您所看到的，这变得相当迟钝，目前没有多少编译器可以处理这种级别的 C++11 主义。（我认为上面应该在 gcc 4.8 和 intel 的最新版本中编译，但不是 MSVC 或 clang 3.2）

现在您只需获取库中的每个函数，并创建一个包含一堆单行样板的头文件：

```
namespace mymath {
  MAKE_FUNCS( add )
  MAKE_FUNCS( sub )
  MAKE_FUNCS( chicken )
}
#undef MAKE_FUNCS 
```

然后你通过说`mymath::add`而不是`add`or来调用它`adds`。

这也可以通过其他形式的文本代码生成来完成。

# c# - 如何使用 Html Agility Pack 选择特定节点？

> ID：16089057
> 
> 赞同：1
> 
> 时间：2013-04-18T17:02:37.613
> 
> 标签：c#, html-agility-pack

`<div class="form-field wide-80 normal">1997-09-15</div>`

我正在尝试选择其中的日期 1997-09-15。我尝试了这段代码，但它给出了“Xpath Exception was Unhandled”的错误代码有什么问题请帮助

```
 string Url = "http://whois.domaintools.com/google.com";

 HtmlWeb web = new HtmlWeb();
 HtmlAgilityPack.HtmlDocument doc = web.Load(Url);

 var SpanNodes = doc.DocumentNode.SelectNodes("//div[@class=form-field wide-80 normal]");
 if (SpanNodes != null)
 {
      foreach (HtmlNode SN in SpanNodes)
      {
          string text = SN.FirstChild.InnerText.Trim();
          MessageBox.Show(text);
      }
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T17:10:06.447

你忘记`'`了

```
var SpanNodes = 
       doc.DocumentNode.SelectNodes("//div[@class='form-field wide-80 normal']"); 
```

# java - java中的嵌套for循环。我可以在外部声明一个变量并在内部增加它吗？

> ID：16089058
> 
> 赞同：-5
> 
> 时间：2013-04-18T17:02:41.370
> 
> 标签：java, variables, loops, for-loop, declaration

我想使用嵌套的 for 循环将 2d 数组的元素带入 1d 数组。我可以使用在外部循环中声明并在内部循环中递增的索引变量来做到这一点吗？

```
for(int i=0, l=0; i<a; i++){
        for(int j=0; j<b ; i++; l++)
            narray[l]=oldarray[i][j];
        } 
```

现在让它工作，通过这样做：

```
int l = 0
for(int i=0; i<a; i++){
  for(int j=0; j<b ; i++){
       narray[l]=oldarray[i][j];
       l++;
 }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T20:18:54.660

因此，您有一个矩阵（多维数组），其中包含“a”行和“b”列，并且您希望将此矩阵转换为一维数组。

```
 int l = 0
   for(int i=0; i<a; i++){
     for(int j=0; j<b ; j++){
      narray[l]=oldarray[i][j];
      l++;
     }
   } 
```

这段代码在java中是有效的..但是看看内部for循环..只有for循环旁边的第一行将被执行所以变量`'l'`将保持为0直到内部循环完成循环..所以在这种情况下你只需设置新数组的第一个元素..

所以你需要更改代码..新的数组长度将是 a*b (rows*columns)

```
 int l = 0
  for(int i=0; i<a; i++)
  {
      for(int j=0; j<b ; j++)
      {
         narray[l]=oldarray[i][j];
         l++;
      }
   } 
```

# android - QuickBlox 令牌是必需的错误

> ID：16089059
> 
> 赞同：6
> 
> 时间：2013-04-18T17:02:42.183
> 
> 标签：android, quickblox

我一直在使用 quickblox 网站上的代码示例，但是我收到以下错误：

```
signIn error: Token is required 
```

我的代码：

```
QBSettings.getInstance().fastConfigInit(APP_ID, AUTH_KEY, AUTH_SEC);
    QBAuth.createSession("test", "test",new QBCallbackImpl() {
        @Override
        public void onComplete(Result result) {
            if (result.isSuccess()) {
                // result comes here if authorization is success
                Log.d(TAG,"createSession success");
                QBSessionResult qbSessionResult = (QBSessionResult) result;
            }else{
                for(String s: result.getErrors()){
                    Log.d(TAG, "createSession error: " +s);
                }
            }
        }
        });

             //getting error in here
     QBUsers.signIn("test","test", new QBCallbackImpl() {
                    @Override
                    public void onComplete(Result result) {
                        if (result.isSuccess()) {
                            Log.d(TAG,"signIn success");
                            QBUserResult qbUserResult = (QBUserResult) result;
                        } else {
                            for(String s: result.getErrors()){
                                Log.d(TAG, "signIn error: " +s);
                            }
                        }
                    }
                }); 
```

会话已成功创建，并且用户“test”在应用程序下的 quickblox 仪表板上存在密码“test”。

请告知我做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T09:54:36.450

您必须在会话创建后调用 QBUsers.signIn

```
 QBSettings.getInstance().fastConfigInit(APP_ID, AUTH_KEY, AUTH_SEC);
    QBAuth.createSession("test", "test",new QBCallbackImpl() {
        @Override
        public void onComplete(Result result) {
            if (result.isSuccess()) {

                QBUsers.signIn("test","test", new QBCallbackImpl() {
                    @Override
                    public void onComplete(Result result) {
                        if (result.isSuccess()) {
                            Log.d(TAG,"signIn success");
                            QBUserResult qbUserResult = (QBUserResult) result;
                        } else {
                            for(String s: result.getErrors()){
                                Log.d(TAG, "signIn error: " +s);
                            }
                        }
                    }
                });

            }else{
                for(String s: result.getErrors()){
                    Log.d(TAG, "createSession error: " +s);
                }
            }
        }
        }); 
```

# c# - 为什么命令 Diff2 不起作用？

> ID：16089061
> 
> 赞同：0
> 
> 时间：2013-04-18T17:02:46.840
> 
> 标签：c#, .net, perforce

`TaggedOutputl` 如果我们将 bool 设置为 true，则命令 Diff2 不会给出假设的输出，`taggedOutput`但如果我们将其设置为 false，则结果会在文本上返回 `TextOutput`而没有问题，那么我该如何解决这个问题

编码：

```
P4Command command = new P4Command(ps, "diff2", false, new String[] { "-ds", depotpathleft, depotpathright });
Perforce.P4.Options op= new Options();
op.Add("-u","");
P4CommandResult result= command.Run(op);
TaggedObjectList list = (result.TaggedOutput); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T20:00:14.223

这是“diff2”命令的已知行为。您可以向 Perforce 技术支持提出此问题，以便他们可以在将来更改此行为时通知您。

目前，我认为您唯一的选择是使用未标记的输出运行命令。

# arrays - AS3：如何在使用 FOR 循环添加之前检查数组中是否已存在值？

> ID：16089066
> 
> 赞同：7
> 
> 时间：2013-04-18T17:03:00.487
> 
> 标签：arrays, actionscript-3, loops, for-loop

我相信这很简单，但显然不够简单:)。任何想法如何在使用 FOR 循环添加值之前检查数组中是否已经存在值？

到目前为止我有这个，它不能像我想要的那样工作，因为数组可以包含重复的值！

```
 var n:int = 5;
        var cnt:int;
        for (var i = 0; i < n; i++)
        {
            cnt = randomThief();

            for (var a = 0; a < loto5.length; a++)
            {
                if (loto5[i] == cnt)
                {
                    loto5[i] = cnt;
                }
            }
        } 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-18T17:12:45.477

您可以使用`indexOf()`Array 类的方法来检查值是否存在，如下所示：

```
var index:int = loto5.indexOf(cnt); 
```

`indexOf()`如果值不存在，则返回 -1。以下是如何进行检查的示例：

```
if (loto5.indexOf(cnt) >= 0)
{
   // do something
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T20:27:04.097

```
for (var a = 0; a < loto5.length; a++)
{
    cnt = randomThief();
    if (loto5.indexOf(cnt) == -1) //if cnt isn't in array do ...
    {
        trace (cnt+" is not in Array");
        loto5[a] = cnt;
    }
} 
```

作品，简单而美丽:)

# xaml - Windows Phone 8 中的绑定顺序

> ID：16089071
> 
> 赞同：0
> 
> 时间：2013-04-18T17:03:16.827
> 
> 标签：xaml, binding, windows-phone-8, converter

在开发 Windows Phone 8 应用程序时，我遇到了有关转换器中数据绑定和绑定的问题。

我正在尝试将按钮发送到转换器，以便可以使用以下代码访问其所有属性

```
<Button Content="{Binding OwnBoard, Mode=OneWay}" Grid.Row="0" Background="{Binding RelativeSource={RelativeSource Mode=Self}, Converter={StaticResource BoardToBackConv}}" /> 
```

当我在转换器中打断点时，我将按钮作为绑定对象，但控件的 Content 属性为 Null。**我需要访问存储在 Content 属性中的对象。**

据我所知，由于绑定的顺序， Content 属性应该已经包含一个值。

知道如何进行这项工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T09:29:17.410

我已经设法理解为什么我想做的事情行不通。简而言之，转换器是在 InitializeComponent() 调用期间执行的，当时另一个绑定还没有完成，因为视图还没有 DataContext。

# arduino - 将数据写入 Arduino EEPROM

> ID：16089073
> 
> 赞同：0
> 
> 时间：2013-04-18T17:03:18.160
> 
> 标签：arduino, eeprom

这是此处帖子的后续内容 - 将[数据写入 Arduino 的板载 EEPROM](https://stackoverflow.com/questions/15350152/arduino-writting-data-to-onboard-eeprom) 我刚刚尝试使用 URL 中的片段，但不起作用。请帮我解决以下错误。

```
write_to_eeprom.cpp:8:5: error: expected unqualified-id before '[' token
write_to_eeprom.cpp: In function 'void setup()':
write_to_eeprom.cpp:12:16: error: 'stringToWrite' was not declared in this scope
write_to_eeprom.cpp: In function 'void loop()':
write_to_eeprom.cpp:22:33: error: invalid conversion from 'uint8_t {aka unsigned char}' to 'char*' [-fpermissive]
write_to_eeprom.cpp: In function 'void EEPROM_write(void*, byte)':
write_to_eeprom.cpp:32:32: error: 'void*' is not a pointer-to-object type 
```

这是代码

```
#include <EEPROM.h>
#include <LiquidCrystal.h>
LiquidCrystal lcd(8, 13, 9, 4, 5, 6, 7);
char[] stringToWrite = "Test";
void setup() {
  lcd.begin(16, 2);
  delay(5000);
  EEPROM_write(stringToWrite, strlen(stringToWrite));
}

void loop() {
  delay(10000);
  int addr = 0;
  byte datasize = EEPROM.read(addr++);
  char stringToRead[0x20];          // allocate enough space for the string here!
  char * readLoc = stringToRead;
  for (int i=0;i<datasize; i++) {
    readLoc = EEPROM.read(addr++);
    readLoc++;
  }
}
// Function takes a void pointer to data, and how much to write (no other way to know)
// Could also take a starting address, and return the size of the reach chunk, to be more generic
void EEPROM_write(void * data, byte datasize) {
  int addr = 0;
  EEPROM.write(addr++, datasize);
  for (int i=0; i<datasize; i++) {
    EEPROM.write(addr++, data[i]);
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T16:16:46.947

Well, you need to fix your code:

line 8 -- [] needs to go AFTER stringToWrite line 12 -- should get better after fixing line 8

line 22 -- you need to dereference readLoc. add a '*' before it.

line 32 -- your parameter "data" is a pointer to void, which has no size. Because of that, you will not be able to use it as an array. You could change the declaration to:

void EEPROM_write(**char** * data, byte datasize)

That fixes the compiler errors. Taking a quick look at the semantics of the code seems to be doing what you want. Good luck.

# c# - A* 在多个网格上的寻路

> ID：16089074
> 
> 赞同：10
> 
> 时间：2013-04-18T17:03:20.550
> 
> 标签：c#, unity3d, path-finding

我试图在一个立方体周围实现 A* 寻路，立方体由 6 个网格组成，为​​了简单起见，我有 4 个方法 GetXPlus、GetXMinus、GetYPlus、GetYMinus。每种方法都会检查下一个图块是否在当前网格空间内，如果不是则切换到适当的网格。

我遇到的问题是，当试图从当前网格以另一种方式翻转的网格中获取图块时，返回的图块位于另一侧。有没有一种方法或方法可以让我避免为每个原始网格和方向编写独特的逻辑？

为了帮助阐明我的问题，在此我来自（紫色）网格并使用 GetXPlus 方法：

![在此处输入图像描述](https://i.stack.imgur.com/iB03H.png)

我当前实现的一个片段（每个网格是 64 x 64）：

```
public Tile GetXPlus( int currentX, int currentY )
{
    var newX = currentX + 1;
    var tile = GetTile( newX , currentY );

    if( newX > 64 ) //Get adjacent XPlus Grid 
    { 
        currentGrid = SetCurrentGrid( XPlusGridIndex );
        tile = GetTile( newX - 64, currentY );
    }

    return tile;
} 
```

**背景**

此实现源于对此处建议的不同问题的出色回答：[https ://gamedev.stackexchange.com/questions/53866/pathfinding-on-a-uneven-planetary-surface](https://gamedev.stackexchange.com/questions/53866/pathfinding-on-a-uneven-planetary-surface)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-14T13:43:15.760

我建议您比上一个答案所建议的更进一步。创建一个代表所有瓦片的立方体，并缓存每个瓦片的邻居。由于瓷砖之间的关系是固定的，它将为您节省很多时间。

之后，您可以使用`double[,,]`或`int[,,,]`来跟踪您处理过的图块，并在此基础上将邻居添加到您的`Queue<Tile>`.

如果需要，您也可以实施`GetDirection(Tile tile)`。该功能只需要在方向字典中搜索。

公共类立方体 { 私人瓷砖 [,,] 瓷砖;

```
 public Cube(int size)
    {
        tiles = new Tile[size, size, 6];

        // initialize.
        for (var side = 0; side < 6; side++)
        {
            for (var x = 0; x < size; x++)
            {
                for (var y = 0; y < size; y++)
                {
                    tiles[x, y, side] = new Tile(x, y, side);
                }
            }
        }

        // set directions & neighbors
        for (var side = 0; side < 6; side++)
        {
            for (var x = 0; x < size; x++)
            {
                for (var y = 0; y < size; y++)
                {
                    // todo: implement.
                }
            }
        }
    }

    public Tile this[int x, int y, int side]
    {
        get
        {
            return tiles[x, y, side];
        }
    }
}

public class Tile
{
    private Dictionary<DirectionType, Tile> directions = new Dictionary<DirectionType, Tile>();

    private Tile[] neighbors = new Tile[4];

    public Tile(int x, int y, int side)
    {
        this.X = x;
        this.Y = y;
        this.Side = side;
    }

    public int X { get; private set; }
    public int Y { get; private set; }
    public int Side { get; private set; }

    public Tile this[DirectionType dir]
    {
        get
        {
            return directions[dir];
        }
    }

    public Tile[] Neighbors { get { return neighbors; } }
}

public enum DirectionType
{
    // delta: +1, 0
    e,
    // delta: 0, +1
    n,
    // delta: -1, 0
    w,
    // delta: 0, -1
    s,
    // delta: 0, 0
    X
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-13T22:54:47.017

您可以使用从一个由“X 坐标”、“Y 坐标”和“平铺”组成的 3d 坐标空间映射到另一个的函数。

给定一个命令：

```
enum TileBorder
{
    Left   = 0,
    Top    = 1,
    Right  = 2,
    Bottom = 3
} 
```

您可以将这些转换存储在`Tile`类的数组中：

```
class Tile
{
    public Tile[] Neighbors { get; set; }
    public Func<int, int, int>[] XTransitions { get; set; }
    public Func<int, int, int>[] YTransitions { get; set; }

    public void GetXPlus(int x, int y, out int newX, out int newY, out Tile newTile)
    {
        x++;
        if (x <= 64)
        {
            newX = x;
            newY = y;
            newTile = this;
        }
        else
        {
            newX = XTransitions[(int)TileBorder.Right](x, y);
            newY = YTransitions[(int)TileBorder.Right](x, y);
            newTile = Neighbors[(int)TileBorder.Right];
        }
    }
    // ...
} 
```

然后你只需要在设置结构时稍微注意一下。例如，假设您的坐标从 1 到 64（包括 1 到 64），这就是您可以设置绿色图块的方式。

```
Tile pink   = new Tile();
Tile green  = new Tile();
Tile orange = new Tile();
Tile purple = new Tile();
Tile blue   = new Tile();

green.Neighbors = new Tile[] 
{ 
    /* left */   orange, 
    /* top */    pink,
    /* right */  blue,
    /* bottom */ purple 
};

green.XTransitions = new Func<int, int, int>[] 
{
    /* left */   (x, y) => 1, 
    /* top */    (x, y) => x,
    /* right */  (x, y) => 64,
    /* bottom */ (x, y) => x 
};

green.YTransitions = new Func<int, int, int>[] 
{
    /* left */   (x, y) => 65 - y, 
    /* top */    (x, y) => 64,
    /* right */  (x, y) => 65 - y,
    /* bottom */ (x, y) => 1
}; 
```

请注意，tile 转换函数只是一个查找，但为了完全灵活，您还可以使用以下类型
`Func<int, int, Tile, int>`的函数：x 坐标、
`Func<int, int, Tile, int>`y 坐标和
`Func<int, int, Tile, Tile>`tile。

# ruby - ObjectSpace._id2ref 方法究竟返回了什么？

> ID：16089075
> 
> 赞同：0
> 
> 时间：2013-04-18T17:03:25.780
> 
> 标签：ruby, ruby-1.9.3

我有一个例子：

```
def a
   puts "Hello"
end
r = ObjectSpace._id2ref(a.object_id) # r is a reference to a
r == a #=> true
r #=> nil 
```

那么为什么无法调用`a`with`r`呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T17:07:45.207

您不能像这样按名称获取方法引用。`a`当您将它传递给 时，在您的示例中为 nil `#_id2ref`，因为 Ruby 试图找到一个名为`a`.

```
a.class => nil
r.class => nil 
```

因此，`r == a`因为两者`r`和`a`都是零。

但是，您可以参考`#a`with `#method`：

```
> r = ObjectSpace._id2ref(method(:a).object_id)
 => #<Method: Object#a>
> r == method(:a)
 => true
> r.call
Hello
 => nil 
```

# c# - 判断图像是否为正方形

> ID：16089078
> 
> 赞同：-7
> 
> 时间：2013-04-18T17:03:33.770
> 
> 标签：c#

在 C# 中是否有一种快速的方法来确定图像是否为正方形？

问题措辞不正确，我很抱歉。

有没有办法确定图像是否可以“缩小”以适应正方形块，而不裁剪高度或宽度，例如，如果我有 960x640，我们有一个正方形，它的宽度，但如果我们有640x960，我们没有。

我需要能够确定图像是否可以按比例缩小 100% 成方形块，例如 150x150，而不会丢失图像的某些部分。

**更新**

让我再尝试一次。

我必须迭代一组图像：

960x658 960x566 960x381 960x378 714x960 658x960

我知道，前两个图像将是正方形（150x150），我知道中间两个将是矩形（水平）（300x150），我知道其余两个将是矩形（垂直）（150x300）。是否有算法、第 3 方组件或内置方法来为我确定这一点？

我不想使用 if 语句编写嵌套的意大利面条代码来执行此操作？我迷路了：$

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T17:30:04.490

> 在 C# 中是否有一种快速的方法来确定图像是否为正方形？

好吧，您几乎自己给出了答案。你有图像。你有图像的属性。

```
if(img.Width == img.Height)
    //I'm a square 
```

现在，因为您正在遍历一组图像。

```
foreach(Image img in myImageCollection)
    if(img.Width == img.Height) 
      squareImages.Add(img); 
```

就如此容易。

# .net - 将 varchar 转换为 byte[]

> ID：16089082
> 
> 赞同：0
> 
> 时间：2013-04-18T17:03:40.057
> 
> 标签：.net, tsql, casting, binary, varchar

Get bytes from a varchar
[word] is varchar(600)
以下代码的问题是它总是检索 30 个字节。
如果 [word] 长于 30，则字节被截断。
如果 [word] 短于 30，则将其填充为 0。
如何检索实际的字节数。
是的，我真的需要 [word] 的字节。

5 个标签的限制：SQL 2008 R2、C#

```
SqlCommand sqlCmd = sqlCon.CreateCommand();
System.Data.SqlTypes.SqlBytes charSB;
byte[] charB;
Int32 id;
sqlCmd.CommandText = "select [ID], cast(Rtrim([word]) as binary), [word] " + 
                     "from [FTSwordDef] with (nolock) order by [word];";
SqlDataReader rdr = sqlCmd.ExecuteReader();
while (rdr.Read())
{
    id = rdr.GetInt32(0);
    charSB = rdr.GetSqlBytes(1);
    charB = charSB.Value;
    stringByte1252s.Add(new StringByte1252(id,charB));
}
rdr.Close(); 
```

这有效

```
 select top 10000 [ID], cast(Rtrim([word]) as binary(4)), len([word])
  from [FTSwordDef] with (nolock) order by [word] 
```

但是我不能传递 len([word]) 因为二进制
Varbinary 的大小会引发相同的错误
以下引发错误
msg 102, Level 15, State 1, Line 1 Incorrect syntax near '('. Msg 319, Level 15 ，状态 1，第 2 行

> 关键字“with”附近的语法不正确。如果此语句是公用表表达式、xmlnamespaces 子句或更改跟踪上下文子句，则前面的语句必须以分号结束。

```
 select top 10000 [ID], cast(Rtrim([word]) as binary( len([word]) )), len([word])
  from [FTSwordDef] with (nolock) order by [word] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T17:07:32.947

从 MS 页面： http: [//msdn.microsoft.com/en-gb/library/ms188362 (v=sql.105).aspx](http://msdn.microsoft.com/en-gb/library/ms188362(v=sql.105).aspx)

*“当在数据定义或变量声明语句中未指定 n 时，默认长度为 1。当未使用 CAST 函数指定 n 时，默认长度为 30。”*

您需要在强制转换中指定长度以避免默认值 30 - 如果事先不知道长度或可能会发生变化，请使用具有较大大小值的 varbinary 甚至 varbinary(max) - 这也将防止值的不必要填充，因为二进制是一个固定宽度的字段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T17:19:10.700

由于您正在读取 .net 中的变量，因此我建议不要将其转换为 SQL 中的二进制文件。相反，将其作为字符串读取，因为那是原始列。将其作为字符串后，您可以使用[System.Text.Encoding](http://msdn.microsoft.com/en-us/library/system.text.encoding.aspx)类获取所需的任何代码页的字节。可用的代码页列在我链接的文档页面的底部。

代码可能如下所示：

```
SqlCommand sqlCmd = sqlCon.CreateCommand();
byte[] charB;
Int32 id;
sqlCmd.CommandText = "select [ID], Rtrim([word]), [word] " + 
                     "from [FTSwordDef] with (nolock) order by [word];";
SqlDataReader rdr = sqlCmd.ExecuteReader();
while (rdr.Read())
{
    id = rdr.GetInt32(0);
    charB = System.Text.Encoding.GetEncoding(1252).GetBytes(rdr.GetString(1));
    stringByte1252s.Add(new StringByte1252(id,charB));
}
rdr.Close(); 
```

# json - JSON数据的jQuery模板问题

> ID：16089085
> 
> 赞同：0
> 
> 时间：2013-04-18T17:03:56.940
> 
> 标签：json, jquery, jquery-templates

我正在使用 jQuery 模板，它采用 JSON 数据来创建表。这段代码工作正常。但是，当我尝试围绕此代码创建一个函数并将 JSON 数据传递给它时，我从 AJAX 请求中获得，它会在控制台中显示值，而不是在表中。带有虚拟数据的工作代码是：

```
var json = [{"class":12,"marks":"500","marks1":"200","marks2":"300"},{"class":11,"marks":"200","marks1":"300","marks2":"400"}]

$.template('kList','<tr title="${class}"><td>${marks}</td><td>${marks1}</td><td>${marks2}</td></tr>');  

for(var i=0; i<json.length; i++){   
    $.tmpl('kList',json[i]).appendTo("#table1")
} 
```

这是我在函数中扭曲上层代码并将 JSON 数据作为参数传递的代码，当我打印它`console.log(json)`但不填充表格时，它会在控制台中显示值。JSON 参数具有与上述代码相同的 JSON 数据。

```
function dataTable(json){
    console.log(json); // here json values are appearing in the console
    $.template('kList','<tr title="${class}"><td>${marks}</td><td>${marks1}</td><td>${marks2}</td></tr>');  

    for(var i=0; i<json.length; i++){   
        $.tmpl('kList',json[i]).appendTo("#table1")
    }
} 
```

请帮帮我，因为我不知道这段代码有什么问题。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T17:08:46.097

你的`json`参数是一个字符串。您应该使用`$.parseJSON`(json) 将其转换为对象。

看看[这个](https://stackoverflow.com/questions/9164944/convert-string-to-json-object)转换细节。

# html - HTML CSS：如何将网格与内容区域对齐？

> ID：16089087
> 
> 赞同：0
> 
> 时间：2013-04-18T17:04:02.453
> 
> 标签：html, css, grid, alignment, center

演示： http: [//www.mindtale.com/portfolio.html](http://www.mindtale.com/portfolio.html)

我想为投资组合部分打开一个可滚动的 3 x 4 网格。如何将网格内容调整为居中，距离顶部 150 像素，使其从标题下方开始？

投资组合.html

```
<html>
<head>
<link rel="stylesheet" type="text/css" href="style.css">
<link rel="stylesheet" type="text/css" href="style2.css"> 
<title>Mindtale Test Home</title>
</head>

<body>

<!-- Header -->

<div id="headerlogo">
<a href="index.html"><img src="images/logo.png"></a></div>

<div id="headerfill"></div>
<div id="header"></div>

<div id="headerlink1">

<a href="portfolio.html">Portfolio</a>
</div>

<div id="headerlink2">
<a href="contact.html">Contact</a>
</div>

<!-- Content -->

<div id="portfolio-grid">

<div class="portfolio-website">
    <div class="website-thumbnail"><a href="http://news.bbc.co.uk" target="_blank"><img src="images/gridimg1.png" alt="BBC News"></a></div>
    <div class="website-name"><a href="http://news.bbc.co.uk" target="_blank">BBC News</a></div>
    <div class="website-url"><a href="http://news.bbc.co.uk" target="_blank">http://news.bbc.co.uk</a></div>
    <div class="website-description">A popular destination for up-to-date news in the UK and around the World.</div>
    <div class="website-clear"></div>
</div>

<div class="portfolio-website">
    <div class="website-thumbnail"><a href="http://news.bbc.co.uk" target="_blank"><img src="images/gridimg1.png" alt="BBC News"></a></div>
    <div class="website-name"><a href="http://www.envirogadget.com" target="_blank">EnviroGadget</a></div>
    <div class="website-url"><a href="http://www.envirogadget.com" target="_blank">http://www.envirogadget.com</a></div>
    <div class="website-description">One of Dan's websites focusing on the best of eco-friendly gadgets.</div>
    <div class="website-clear"></div>
</div>

<div class="portfolio-website">
    <div class="website-thumbnail"><a href="http://news.bbc.co.uk" target="_blank"><img src="images/gridimg1.png" alt="BBC News"></a></div>
    <div class="website-name"><a href="http://www.google.co.uk" target="_blank">Google</a></div>
    <div class="website-url"><a href="http://www.google.co.uk" target="_blank">http://www.google.co.uk</a></div>
    <div class="website-description">The search engine that most people use.</div>
    <div class="website-clear"></div>
</div>
<br><br>

<div class="portfolio-website">
    <div class="website-thumbnail"><a href="http://news.bbc.co.uk" target="_blank"><img src="images/gridimg1.png" alt="BBC News"></a></div>
    <div class="website-name"><a href="http://news.bbc.co.uk" target="_blank">BBC News</a></div>
    <div class="website-url"><a href="http://news.bbc.co.uk" target="_blank">http://news.bbc.co.uk</a></div>
    <div class="website-description">A popular destination for up-to-date news in the UK and around the World.</div>
    <div class="website-clear"></div>
</div>

<div class="portfolio-website">
    <div class="website-thumbnail"><a href="http://news.bbc.co.uk" target="_blank"><img src="images/gridimg1.png" alt="BBC News"></a></div>
    <div class="website-name"><a href="http://www.envirogadget.com" target="_blank">EnviroGadget</a></div>
    <div class="website-url"><a href="http://www.envirogadget.com" target="_blank">http://www.envirogadget.com</a></div>
    <div class="website-description">One of Dan's websites focusing on the best of eco-friendly gadgets.</div>
    <div class="website-clear"></div>
</div>

<div class="portfolio-website">
    <div class="website-thumbnail"><a href="http://news.bbc.co.uk" target="_blank"><img src="images/gridimg1.png" alt="BBC News"></a></div>
    <div class="website-name"><a href="http://www.google.co.uk" target="_blank">Google</a></div>
    <div class="website-url"><a href="http://www.google.co.uk" target="_blank">http://www.google.co.uk</a></div>
    <div class="website-description">The search engine that most people use.</div>
    <div class="website-clear"></div>
</div>

<br><br>

<div class="portfolio-website">
    <div class="website-thumbnail"><a href="http://news.bbc.co.uk" target="_blank"><img src="images/gridimg1.png" alt="BBC News"></a></div>
    <div class="website-name"><a href="http://news.bbc.co.uk" target="_blank">BBC News</a></div>
    <div class="website-url"><a href="http://news.bbc.co.uk" target="_blank">http://news.bbc.co.uk</a></div>
    <div class="website-description">A popular destination for up-to-date news in the UK and around the World.</div>
    <div class="website-clear"></div>
</div>

<div class="portfolio-website">
    <div class="website-thumbnail"><a href="http://news.bbc.co.uk" target="_blank"><img src="images/gridimg1.png" alt="BBC News"></a></div>
    <div class="website-name"><a href="http://www.envirogadget.com" target="_blank">EnviroGadget</a></div>
    <div class="website-url"><a href="http://www.envirogadget.com" target="_blank">http://www.envirogadget.com</a></div>
    <div class="website-description">One of Dan's websites focusing on the best of eco-friendly gadgets.</div>
    <div class="website-clear"></div>
</div>

<div class="portfolio-website">
    <div class="website-thumbnail"><a href="http://news.bbc.co.uk" target="_blank"><img src="images/gridimg1.png" alt="BBC News"></a></div>
    <div class="website-name"><a href="http://www.google.co.uk" target="_blank">Google</a></div>
    <div class="website-url"><a href="http://www.google.co.uk" target="_blank">http://www.google.co.uk</a></div>
    <div class="website-description">The search engine that most people use.</div>
    <div class="website-clear"></div>
</div>

<br><br>

<div class="portfolio-website">
    <div class="website-thumbnail"><a href="http://news.bbc.co.uk" target="_blank"><img src="images/gridimg1.png" alt="BBC News"></a></div>
    <div class="website-name"><a href="http://news.bbc.co.uk" target="_blank">BBC News</a></div>
    <div class="website-url"><a href="http://news.bbc.co.uk" target="_blank">http://news.bbc.co.uk</a></div>
    <div class="website-description">A popular destination for up-to-date news in the UK and around the World.</div>
    <div class="website-clear"></div>
</div>

<div class="portfolio-website">
    <div class="website-thumbnail"><a href="http://news.bbc.co.uk" target="_blank"><img src="images/gridimg1.png" alt="BBC News"></a></div>
    <div class="website-name"><a href="http://www.envirogadget.com" target="_blank">EnviroGadget</a></div>
    <div class="website-url"><a href="http://www.envirogadget.com" target="_blank">http://www.envirogadget.com</a></div>
    <div class="website-description">One of Dan's websites focusing on the best of eco-friendly gadgets.</div>
    <div class="website-clear"></div>
</div>

<div class="portfolio-website">
    <div class="website-thumbnail"><a href="http://news.bbc.co.uk" target="_blank"><img src="images/gridimg1.png" alt="BBC News"></a></div>
    <div class="website-name"><a href="http://www.google.co.uk" target="_blank">Google</a></div>
    <div class="website-url"><a href="http://www.google.co.uk" target="_blank">http://www.google.co.uk</a></div>
    <div class="website-description">The search engine that most people use.</div>
    <div class="website-clear"></div>
</div>

<!-- <div id="content">
<h2>A random heading</h2>
<p>Content Placeholder ... </p>
<p>Content Placeholder ... </p>
<p>Content Placeholder ... </p>
<p>Content Placeholder ... </p>
<p>Content Placeholder ... </p>
<p>Content Placeholder ... </p>
<p>Content Placeholder ... </p>
<p>Content Placeholder ... </p>
<p>Content Placeholder ... </p>
<p>Content Placeholder ... </p>
<p>Content Placeholder ... </p>
<p>Content Placeholder ... </p>

</div> -->

<!-- Footer -->

<div id="footer">
Mindtale &copy; 2013
</div>

</body>
</html> 
```

样式.css

```
html { 
height:100%; /* fix height to 100% for IE */
max-height:100%; /* fix height for other browsers */
background: url(images/bg.jpg) no-repeat center center fixed; /* add background image */
-webkit-background-size: cover; /* fix height for other browsers */
-moz-background-size: cover; /* fix height for other browsers */
-o-background-size: cover; /* fix height for other browsers */
background-size: cover; /* fix height for other browsers */
}

/* Header */
/* -------------------------------------------------- */

div#header {
z-index:3;
position:fixed;
background: url(images/header.png) no-repeat center;
height: 102px;
top:0px;
left:0px;
width:100%;
padding: 0px;
}

div#headerfill {
z-index:4;
position:fixed;
background: url(images/headerfill.png) repeat-x;
height: 98px;
top:0px;
left:0px;
width:100%;
padding: 0px;
}

div#headerlink1 {
font-family: "Lucida Sans Unicode", "Lucida Grande", sans-serif;
font-size:90%;
z-index:4;
position:fixed;
top:55px;
left:18%;
color:#999;
padding: 0px;
}

div#headerlink2 {
font-family: "Lucida Sans Unicode", "Lucida Grande", sans-serif;
font-size:90%;
z-index:4;
position:fixed;
top:55px;
left:78%;
color:#999;
padding: 0px;
}

div#headerlogo {
z-index:5;
position:fixed;
top:30px;
left:42%;
color:#999;
padding: 0px;
}

/* Content */
/* -------------------------------------------------- */

div#content {
position:fixed;
width:100%;
color:#222;
top: 70px; 
bottom: 0; 
left: 0; 
right: 0;
padding: 25px;
overflow: auto;

font-family: "Lucida Sans Unicode", "Lucida Grande", sans-serif;

}

/* Footer */
/* -------------------------------------------------- */

div#footer {
position:fixed;
bottom:0px;
left:0px;
width:100%;
color:#999;
background:#333;
padding: 8px;
} 
```

样式2.css

```
/* Grid Example */
#portfolio-grid .portfolio-website {
width: 300px;
float: left;
height: 245px;
border: 1px solid #BAD4E3;
background: #E3EAF2;
text-align: left;
margin: 15px;
}
#portfolio-grid .website-description {
text-align: left;
}
#portfolio-grid .website-name {
font-size: 10pt;
}
#portfolio-grid .website-url {
display: none;
}
#portfolio-grid .website-thumbnail {
float: none;
text-align: center;
margin: 3px auto 10px;
}
#portfolio-grid .footer {
clear: both;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T17:20:46.170

尝试这个：

```
#portfolio-grid{
   margin: 100px auto 0;
    width: 998px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T17:21:54.987

因为您使用的是浮动，所以您必须制作容器`overflow: hidden`或`overflow: auto`让它们适合他们的孩子。然后，用`margin: 0 auto`它来居中。我注意到您已经设置了`top: 300px`-`#gridcontainer`为了使其生效，您必须设置`position`attritube。在这里，我将其设置为，`relative`因为您仍然需要依赖自动边距：

```
#gridcontainer {
    top: 150px;
    position: relative;
    overflow: hidden;
    width: 996px;
    margin: 0 auto;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T18:08:29.263

有时 using`display:inline-block`比 更合适`float`，试试这个：

```
#portfolio-grid {
padding:150px 0 80px;
 text-align:center;
}

#portfolio-grid .portfolio-website {
    background: none repeat scroll 0 0 #E3EAF2;
    border: 1px solid #BAD4E3;
    display: inline-block;
    height: 245px;
    margin: 15px;
    text-align: left;
    vertical-align: top;
    width: 300px;
} 
```

（上的填充`#portfolio-grid`是可选的）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-18T17:16:02.723

您将需要重新考虑 CSS 浮动的使用。我不确定为什么要浮动整个`#portfolio-grid`容器，但最好通过在其上设置显式宽度（宽度：1024px；可能是一个很好的起点）然后将左右边距设置为自动来更好地服务。这将使您的容器居中。

例子：

```
#portfolio-grid {
  margin: 25px auto;
} 
```

这是 margin 属性的简写 CSS，表示将顶部和底部边距设置为 25px，然后将左右边距设置为`auto`.

# python - 在 ipython 笔记本中转义美元符号

> ID：16089089
> 
> 赞同：50
> 
> 时间：2013-04-18T17:04:06.800
> 
> 标签：python, markdown, ipython, mathjax

我在 iPython 中有一个降价单元格，其中包含四个美元符号。iPython 将美元符号之间的任何内容解释为 MathJax 表达式，这不是我想要的。我如何摆脱美元符号？用反斜杠转义它们可以防止 MathJax 启动，但反斜杠会显示在编译的 Markdown 中。

关于如何获得美元符号的任何想法？

谢谢

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2018-11-09T15:22:01.607

在美元符号前放置两个反斜杠。例如：

`Some prices: \\$3.10, \\$4.25, \\$8.50.`

（运行 Jupyter 笔记本服务器**5.7.0**）

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-04-22T20:55:39.130

您可以`$`使用反斜杠转义数学模式。尝试`$\$$`

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-04-19T00:50:08.757

如果使用`<span>$</span>`，MathJax 不会将其作为分隔符处理。你应该可以在 Markdown 中输入。例如，我在这里使用过： $ This is not math $.

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2019-09-04T17:44:21.407

我无法让这些解决方案中的大多数工作。但是，一个确实有效的方法[在此处](https://blogueun.wordpress.com/2014/01/04/escaping-in-mathjax/)进行了解释。[它在这里](https://stackoverflow.com/questions/8773586/mediawiki-mathjax-need-to-use-escape-x)指的是一个 SO 问题，并且很简单：

```
<span class="tex2jax_ignore">$900 vs $4,500</span> 
```

希望这对某人有帮助！

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-12-02T14:48:25.107

您是否尝试改用等效的 HTML 实体？：

[![在此处输入图像描述](https://i.stack.imgur.com/2DANi.png)](https://i.stack.imgur.com/2DANi.png)

例如

[![在此处输入图像描述](https://i.stack.imgur.com/G7yVk.png)](https://i.stack.imgur.com/G7yVk.png)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-07-27T15:34:01.600

我知道这个话题很老，但它仍然是第一个谷歌结果，它的答案不完整。

您还可以用“反引号”将 $ 括起来，就像在 Jupyter 中显示代码一样。

所以 $ 变成 `$`，并且应该显示没有错误

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-02-18T17:49:27.503

老帖子，但它仍然在谷歌的顶部！这是我希望我早点理解的澄清：

## Jupter 笔记本降价

Jupyter Notebook“Markdown”单元格允许您在其中编写 HTML，并且在大多数情况下会按预期呈现 HTML。这与其他一些 Markdown 编辑器不同，在这些编辑器中，您只能使用非常有限的 HTML 子集，或者根本不使用 HTML。

## 为什么这对`$`文字很重要

一个非常有用的方面是当您想要使用特殊字符的*文字*版本时，例如`$`. 这意味着，您希望 a`$`出现在单元格的渲染版本中，而不是`$`用于启动 MathJax 块。

这超出`$`了其他特殊字符。也许您希望 a`*`出现在呈现的单元格中，而不是指示项目符号点或粗体/斜体文本。我很难想象`#`or的用例`_`，`[`但可能有一些原因你也想写这些文字（不用反引号包围它们，导致它们像我在这里一样被设计为内联代码块） .

## HTML 方法 1：创建 HTML 块

其他几个答案描述了`$`用 HTML`<span>`标记包围的。这是在做什么（如果你没有像[GitHub 评论显示](https://github.com/jupyter/notebook/issues/4504#issuecomment-475044971)的那样在中间包含换行符）是告诉 Jupyter Notebook 不要再将内容解释为 Markdown，而是将其解释为 HTML。在 HTML 中，`$`并不意味着您正在启动 MathJax 块，因此它会按字面意思呈现。

就我个人而言，我不喜欢这种方法，因为很难判断 span 正在解决什么问题，而且它使用 span 更像是一种 hack/workaround，而不是它在 HTML 规范中的使用方式。

## HTML 方法 2：HTML 字符编码

这就是`&#36;`上面的答案所暗示的，尽管我认为它没有得到充分解释。

这里的想法是，不是将`$`文字放在 Markdown 源代码中，而是放置 HTML 字符代码版本`&#36;`。如果您好奇的话，[这里是对这些字符代码的更长解释。](https://html.com/character-codes/)但基本上你需要知道的是，如果你在编辑 Markdown 单元格的源代码时编写了相关的字符代码，它不会被解释为 Markdown，但它会正确呈现。

所以代替这个 Markdown 源：

```
The price range is $100 to $200 
```

（将呈现`100 to`为 MathJax）

只需将`$`s替换为`&#36;`s：

```
The price range is &#36;100 to &#36;200 
```

（这将在字面上呈现美元符号）

我更喜欢这种方法，因为 HTML 字符编码的全部目的是转义特殊字符，因此如果将来有人试图了解您的代码在做什么，他们应该能够很快弄清楚。

我通常也尽量避免在我的 Jupyter Notebook Markdown 中使用 HTML 打开和关闭标签，因为小的拼写错误（比如忘记 a `/`）可能会产生令人困惑的级联影响，但你的里程可能会有所不同:)

如果您正在寻找除 之外的字符代码`$`，我喜欢[这个资源](https://www.rapidtables.com/web/html/html-codes.html)，尽管您也可以只用 Google 的“HTML 代码”加上您想要的字符并在大多数情况下得到正确的答案。

# java - 使用 Maven Glassfish 插件部署应用程序时出现警告

> ID：16089094
> 
> 赞同：0
> 
> 时间：2013-04-18T17:04:13.073
> 
> 标签：java, maven, glassfish

每次我使用 Maven Glassfish 插件重新部署应用程序时都会收到此警告。为什么？我该如何阻止它，部署需要很长时间。

```
Downloading: http://maven.ocean.net.au/release/org/apache/maven/maven-plugin-api/maven-metadata.xml
Downloading: http://maven.ocean.net.au/external/org/apache/maven/maven-plugin-api/maven-metadata.xml
Downloading: http://download.java.net/maven/2/org/apache/maven/maven-plugin-api/maven-metadata.xml
Downloading: http://repo.maven.apache.org/maven2/org/apache/maven/maven-plugin-api/maven-metadata.xml
Downloaded: http://repo.maven.apache.org/maven2/org/apache/maven/maven-plugin-api/maven-metadata.xml (2 KB at 4.7 KB/sec)
Downloading: http://maven.ocean.net.au/snapshot/org/apache/maven/maven-plugin-api/maven-metadata.xml
Downloading: http://download.java.net/maven/2/org/apache/maven/maven-plugin-api/maven-metadata.xml
[WARNING] Could not transfer metadata org.apache.maven:maven-plugin-api/maven-metadata.xml from/to release.ocean.net.au (http://maven.ocean.net.au/release): maven.ocean.net.au
[WARNING] Could not transfer metadata org.apache.maven:maven-plugin-api/maven-metadata.xml from/to external.ocean.net.au (http://maven.ocean.net.au/external): maven.ocean.net.au
[WARNING] Could not transfer metadata org.apache.maven:maven-plugin-api/maven-metadata.xml from/to snapshot.ocean.net.au (http://maven.ocean.net.au/snapshot): maven.ocean.net.au 
```

# jquery - 响应式 jquery 轮播滑块和灯箱

> ID：16089095
> 
> 赞同：0
> 
> 时间：2013-04-18T17:04:15.087
> 
> 标签：jquery, responsive-design, carousel, slide

我正在寻找带有灯箱窗口的响应式轮播滑块（也响应式）。

*   轮播滑块需要带有缩略图，并拖动以导航到下一张/最后一张幻灯片。
*   需要在端口视图中显示超过 1 张幻灯片。
*   需要是无限的（当你在最后一张图像中时，下一张是第一张，但没有初始，必须是循环）。
*   单击图像时，打开响应式灯箱窗口。它需要调整大小（当屏幕调整大小时）并始终位于屏幕中心。宽度和高度以 % 为单位设置。

我在互联网上搜索了很多，并没有找到满足这些要求的完整解决方案。

它可以是免费的或付费的。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-02T22:31:58.353

嗨，你试过 caroufredsel 吗？它是免费的，而且相当广泛。 [关联](http://caroufredsel.dev7studios.com/)

# jenkins - 如何从 $BUILD_LOG 变量中获取最后 20 行？

> ID：16089096
> 
> 赞同：5
> 
> 时间：2013-04-18T17:04:17.360
> 
> 标签：jenkins, continuous-integration, jenkins-plugins

使用 Email-ext 插件时，我还想在那里写下构建日志的最后 20 行（不作为文件附加）我知道我可以使用 $BUILD_LOG 变量访问日志，但不知道具体如何采取该变量的 las 20 行。有什么帮助吗？非常感谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-18T21:18:32.173

您可以使用来自 Content Token 参考的以下语法：

**${BUILD_LOG, maxLines, escapeHtml}** - 显示构建日志的结尾。maxLines - 最多显示这么多行的日志。默认为 250。 escapeHtml - 如果为 true，则 HTML 被转义。默认为假。

# dynamic - 在 tumblr 中使用标签链接的动态过滤栏

> ID：16089097
> 
> 赞同：1
> 
> 时间：2013-04-18T17:04:17.770
> 
> 标签：dynamic, filter, tags, tumblr

我有 10 个指向 10 个 TagPages 的链接，当单击它们时，它们会将您带到一个包含所有带有该标签的帖子的页面。

这很容易。

我想知道是否可以在一个页面中堆叠多个标记的帖子。例如，当所有带有“红色”标签的帖子都显示出来时，您可以点击并加载带有“蓝色”标签的帖子，而无需离开页面。

这 10 个链接的行为就像一个过滤系统。然后，您可以在一页中显示任何已标记帖子的组合……单击一次并加载它们，再次单击以隐藏帖子。

我希望一切都说得通。

任何帮助都会很棒。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T18:18:02.450

您可以使用 Tumblr 的 API 按标签加载帖子：[http ://www.tumblr.com/docs/en/api/v2#posts](http://www.tumblr.com/docs/en/api/v2#posts)

每个标签的调用看起来像这样（方括号标记您需要更改的区域）：

```
URL = http://api.tumblr.com/v2/blog/[base-hostname]/posts?api_key=[key]&tag=[tagname]&jsonp=?

$.ajax(URL, {
  type: 'GET',
  dataType: 'json',
  success: function(data) {
    // do something with your data
  }
}); 
```

更新了一个更具体的例子：

您需要为每次点击标签导航创建一个函数。因此，假设您用简单的 HTML 构建了导航，您希望为每次点击创建一个函数。

HMTL：

```
<nav class="tag-nav>
    <ul>
        <li><a href="/tagged/portrait" class="portrait">Portrait</a></li>
        <li><a href="/tagged/landscape" class="landscape">Landscape</a></li>
    </ul>
</nav> 
```

JS：

```
$('.tag-nav a').on('click', function (e) {
    e.preventDefault();

    // grab classname from the link that was just clicked
    var tagName = $(this).attr('class');

    // go get our tagged posts
    getTaggedPosts(tagName);
});

var getTaggedPosts = function (tag) {
    // this is where your AJAX call will go

    // bonus points if you check to see if you've already made the AJAX call
    // and stored the posts somewhere else on the page
}; 
```

# batch-file - 从批处理文件中打开资源管理器中的“网络连接”？

> ID：16089100
> 
> 赞同：1
> 
> 时间：2013-04-18T17:04:32.647
> 
> 标签：batch-file

如何使用批处理文件打开以下资源管理器窗口：

```
Control Panel\Network and Internet\Network Connections 
```

我目前在我的批处理文件中使用以下内容：

```
%SystemRoot%\explorer.exe "Control Panel\Network and Internet\Network Connections" 
```

但这似乎打开了 My Documents 文件夹的默认设置。

*   我需要做什么才能在资源管理器中打开此位置？它似乎是不同的语法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T17:27:18.890

```
control ncpa.cpl 
```

or

```
control netconnections 
```

Control panel items are opened by running control.exe with a cpl name as argument.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-21T20:52:45.550

不是对 OP 的直接回答，因为此页面的 SEO 很高，所以在此处添加

要从显示为“适配器设置”的“网络”图标（在 Windows 资源管理器中）的右键单击上下文菜单中添加指向“网络连接”的快速链接，可以将其添加到注册表中（通常存在安全问题）。

在命令行：

```
reg add "HKLM\Software\Classes\CLSID\{F02C1A0D-BE21-4350-88B0-7367FC96EF3C}\shell\Adapter Settings\command" /d "control netconnections" /t REG_SZ /f 
```

（即一行，注意网页中的换行）

或手动添加键/值。您可能需要首先获得 {F02C1A0D-BE21-4350-88B0-7367FC96EF3C} 密钥的所有权和完全控制权。

反过来，我一直在桌面上为我管理的服务器显示“网络”图标（就像过去很容易获得所需的屏幕和设置一样）。

当您使用它时，您还可以添加指向“高级防火墙和安全性”的快速链接：

```
reg add "HKLM\Software\Classes\CLSID\{F02C1A0D-BE21-4350-88B0-7367FC96EF3C}\shell\Advanced Firewall and Security\command" /d "%%SystemRoot%%\system32\mmc.exe %%SystemRoot%%\system32\wf.msc" /t REG_EXPAND_SZ /f 
```

# java - 在javascript中加载多个html文本框

> ID：16089104
> 
> 赞同：0
> 
> 时间：2013-04-18T17:04:40.543
> 
> 标签：java, javascript, html

我需要从我的数据库中加载多个值。我使用 java 来加载这些值，然后将它们传递给 html 中的文本框，以便我可以将它们加载到代码的 javscript 部分中。

由于 html 中没有数组的规定，所以我`'i'`在下面的代码中附加了以实现我的目的。

`input type=text name=lat<%=i%> value="<%=l1%>"`

所以我得到了`lat1`,等值。`lat2``lat3`

我如何从 javascript 调用它们而不必分别为 lat1、lat2 等编写

`//var a=document.f1.lat1.value;`

基本上如何在上面的行中用 'i' 替换 '1'

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T17:07:09.987

JavaScript 括号表示法是您所追求的

```
document.f1["lat" + i].value 
```

# java - 从优先级队列中移除元素

> ID：16089105
> 
> 赞同：0
> 
> 时间：2013-04-18T17:04:42.130
> 
> 标签：java, servlets, priority-queue

我正在尝试将输入从 servlet 传递到我的后端，如果信息匹配，则从队列中删除对象。

用户输入他们想要删除的项目名称的网页片段是它读取输入然后尝试将数据发送到持有我的优先级队列的后端java文件的地方

本节旨在从表单中读取输入，然后该表单调用 processDeleteJobs，上面称为 readdeletejobs。

读入 deletejobs 输入，将我的 jobrequest 元素设置为 testdelete 然后我将它发送到后端的一个函数

```
public boolean deleteJobFrontEnd(JobRequest job) {
boolean remove;
remove = scheduledJobs.remove().equals(job.getProjectName());
return remove;
} 
```

目的是如果某个条件匹配，则删除优先队列中的作业请求，因此如果该作业请求中的项目名称匹配，则从队列中删除也不确定我的布尔实现是否会正确删除它。

如您所见，非常新手

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T17:19:11.050

只需通过调用删除它[`PriorityQueue.remove(Object obj)`](http://docs.oracle.com/javase/6/docs/api/java/util/PriorityQueue.html#remove%28java.lang.Object%29)：

```
public boolean deleteJobFrontEnd(JobRequest job) {
    return scheduledJobs.remove(job);
} 
```

此外，请确保`JobRequest`已`equals()`正确实施。

或者使用迭代器：

```
Iterator it = scheduledJobs.iterator();
while(it.hasNext())
{
    if(sameJob(it.next())) // Implement sameJob 
        it.remove();
} 
```

# java - java中是否有MATLAB函数numel的对应物？

> ID：16089110
> 
> 赞同：-2
> 
> 时间：2013-04-18T17:05:03.537
> 
> 标签：java, matlab

我正在尝试在 java 中使用[numel](http://www.mathworks.nl/help/matlab/ref/numel.html)（Matlab 中可用的函数）。他们在java中是否有这个函数的实现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T18:14:27.857

我不确定这是否是您想要`numel`的工作方式，但这里有几个版本：

## version1 - 适用于大小不规则的数组，例如 {{1},{2,3}}

此方法将遍历数组的所有元素来计算它们。

```
public static int numel(Object array) {
    if (array == null)
        return 1;// I will count nulls as elements since new String[10] is
                    // initialized with nulls 
    int total = 1;
    if (array.getClass().isArray()) {
        total = 0;
        int length = java.lang.reflect.Array.getLength(array);
        for (int index = 0; index < length; index++) {
            total += numel(java.lang.reflect.Array.get(array, index));
        }
    }
    return total;
} 
```

## version2 - 用于具有规则大小的数组，如 new String[2][3][4]

此方法将仅使用数组中不同级别的第一行的大小来获取其大小，假设同一级别的行具有相同的大小

```
public static int regularNumel(Object array) {
    if (array == null)
        return 1;
    int total = 1;
    if (array.getClass().isArray()) {
        int length = java.lang.reflect.Array.getLength(array);
        if (length > 0) {
            Object row = java.lang.reflect.Array.get(array, 0);
            if (row == null || !row.getClass().isArray())
                return length;
            else //now we know that row is also array
                return length * regularNumel(row);
        } else
            return 0;
    }
    return total;
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-18T18:46:44.110

我设法解决了这个问题。

我多么希望图像的大小，我做了一个小函数来解决我的问题。

```
 public static int length(BufferedImage bi)
{
    int x;
    x=bi.getHeight()*bi.getWidth();
    return x;
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-18T17:11:00.863

matlab的numel函数

n = numel(A) 返回数组 A 中的元素数 n。

你可以让你喜欢

```
int arraycount(int a[])
    {
    int counter;
    for(int i=0;i<a.length;i++)
    {
    counter++;
    }
    return counter;
    } 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-18T17:12:58.537

```
class main{
    public static void main (String[] args){
    // numel returns the number of array elements, as does .length in Java.
    int[] testArr = {1,2,3,4,5,6,7,8};
    System.out.println(testArr.length);
    }
}
// Result: 8 
```

# sql - 将 Excel 电子表格导出到带有时间戳的访问表？

> ID：16089113
> 
> 赞同：0
> 
> 时间：2013-04-18T17:05:16.320
> 
> 标签：sql, excel, adodb, insert-into, vba

我目前使用如下所示的设置。

```
Set AccessConn = CreateObject("ADODB.Connection")

sExcel = "[Excel 8.0;HDR=YES;IMEX=2;DATABASE=" & ThisWorkbook.FullName & "].[Sheet1$]"

AccessConn.Open "DSN=Foo", "", ""

sSQL = "Insert Into BarTable Select * FROM " + sExcel

AccessConn.Execute sSQL 
```

现在，如果我想在导出中添加 now() 列，这可能吗？就像是

```
Set AccessConn = CreateObject("ADODB.Connection")

sExcel = "[Excel 8.0;HDR=YES;IMEX=2;DATABASE=" & ThisWorkbook.FullName & "].[Sheet1$]"

AccessConn.Open "DSN=Foo", "", ""

sSQL = "Insert Into BarTable Select *,NOW() FROM " + sExcel

AccessConn.Execute sSQL 
```

BarTable 中的最后一列是日期/时间列，我想将当前时间插入其中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T02:33:58.020

要在 SQL 中输入日期，您可能需要将其转换为文本 - Access 本身可以处理“Now()”，但不确定在传递 SQL 字符串时是否可以。像下面这样的东西应该这样做。

```
sSQL = "Insert Into BarTable Select *,#" & format(NOW(),"MM/DD/YYYY hh:mm:ss") & "# As DateTimeStamp FROM " + sExcel 
```

在 Access 中，我有两个函数用于在构建 SQL 字符串时获取日期或日期和时间戳，我没有测试过，但它们应该可以转换为 Excel VBA：

```
Function MakeSQLDateTime(pSourceDate As Variant) As String
    Dim SQLDay As String, SQLMonth As String, SQLYear As String, SQLTime As String

    SQLDay = Day(pSourceDate)
    SQLMonth = Month(pSourceDate)
    SQLYear = Right(Year(pSourceDate), 4)
    SQLTime = Hour(pSourceDate) & ":" & Minute(pSourceDate) & ":" & Second(pSourceDate)
    MakeSQLDateTime = "#" & SQLMonth & "/" & SQLDay & "/" & SQLYear & " " & SQLTime & "#"
End Function

Function MakeSQLDate(pSourceDate As Variant) As String
    Dim SQLDay As String
    Dim SQLMonth As String
    Dim SQLYear As String

    SQLDay = Day(pSourceDate)
    SQLMonth = Month(pSourceDate)
    SQLYear = Right(Year(pSourceDate), 4)
    MakeSQLDate = "#" & SQLMonth & "/" & SQLDay & "/" & SQLYear & "#"
End Function 
```

要使用这些来完成您正在尝试的内容：

```
sSQL = "Insert Into BarTable Select *," & makeSQLDateTime(Now()) & " As DateTimeStamp FROM " + sExcel 
```

# fullcalendar - 我可以使用完整日历设置事件的容器单元格而不是事件的样式吗？

> ID：16089123
> 
> 赞同：1
> 
> 时间：2013-04-18T17:05:47.163
> 
> 标签：fullcalendar

我的事件的自定义属性之一是`TypeId`.

我想做的是根据`TypeId`事件的内容以不同的颜色显示整个容器单元格。例如，我希望所有包含事件的单元格`TypeId = 1`的背景颜色为蓝色，所有包含事件的单元格`TypeId = 2`的背景颜色为绿色。

我知道您可以在`dayRender`回调中更改单元格的样式，但是我可以访问当时与每个单元格关联的事件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T05:58:52.560

您可以使用[eventRender](http://arshaw.com/fullcalendar/docs/event_rendering/eventRender/)来访问事件和元素（如果需要，还可以访问视图）

```
eventRender: function(event, element) {
    if (event.TypeId === 1) {
        $(element).css('background-color', 'blue');
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-31T14:58:50.117

我有类似的问题。您可以在 eventRender 回调中获取事件容器的单元格 - 如下所示：

```
eventRender: function(event, element, view) {
    var cell = view.dateToCell(event.start);
    var eventContainer = view.element.find('tr:eq(' + (cell.row + 1) + ') td:eq(' + cell.col + ')');

     //or if you similar
    var dateString = $.fullCalendar.formatDate(event.start, 'yyyy-MM-dd');
    var eventContainer = view.element.find('.fc-day[data-date="' + dateString + '"]');

     eventContainer.css('background-color', 'red');

  }, 
```

# python - Scrapy 声明没有抓取任何页面/项目？

> ID：16089126
> 
> 赞同：1
> 
> 时间：2013-04-18T17:06:24.123
> 
> 标签：python, logging, scrapy

我的蜘蛛目前正在从网站上抓取 xml。这样做是成功的，因为我可以看到通过数据库管道存储的项目。

但是，当我查看日志（设置为`log.INFO`）时，它表明没有抓取任何内容？

```
2013-04-12 11:58:00-0400 [traffics] INFO: Spider opened
2013-04-12 11:58:00-0400 [traffics] INFO: Crawled 0 pages (at 0 pages/min), scraped 0 items (at 0 items/min)
2013-04-12 11:58:03-0400 [traffics] INFO: Closing spider (finished)
2013-04-12 11:58:03-0400 [traffics] INFO: Dumping Scrapy stats:
    {'downloader/request_bytes': 273,
     'downloader/request_count': 1,
     'downloader/request_method_count/GET': 1,
     'downloader/response_bytes': 28883,
     'downloader/response_count': 1,
     'downloader/response_status_count/200': 1,
     'finish_reason': 'finished',
     'finish_time': datetime.datetime(2013, 4, 12, 15, 58, 3, 469842),
     'log_count/DEBUG': 7,
     'log_count/INFO': 4,
     'response_received_count': 1,
     'scheduler/dequeued': 1,
     'scheduler/dequeued/memory': 1,
     'scheduler/enqueued': 1,
     'scheduler/enqueued/memory': 1,
     'start_time': datetime.datetime(2013, 4, 12, 15, 58, 0, 907300)}
2013-04-12 11:58:03-0400 [traffics] INFO: Spider closed (finished) 
```

为什么它说 0 个项目和 0 个页面在它肯定正在爬网时（并随后将它们保存到数据库）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T17:36:51.637

数据库管道中的 process_item 方法是否在存储项目后返回项目？

# javascript - Skrollr & Z-index

> ID：16089131
> 
> 赞同：0
> 
> 时间：2013-04-18T17:06:39.850
> 
> 标签：javascript, z-index

我对 skrollr 和 z-index 有点问题。

[http://i.imgur.com/whCViHV.png](http://i.imgur.com/whCViHV.png)

我正在尝试将图片放在顶部以放在博客文章的下方。
我一生都无法弄清楚为什么，无论我在哪里/如何应用 z-index（我认为这是我应该做的），图像总是位于帖子上方。
我已经尝试了我能想到的一切，将它放在 div 中，放在 css 中......
您可以通过将帖子放在 skrollr div 中来使其位于博客帖子下方，但随后我遇到了很多行高问题.
我已经删除了所有失败的 z-index 尝试，因此它应该与我的旧的愚蠢代码“无冲突”。

[http://jsfiddle.net/8fb4C/](http://jsfiddle.net/8fb4C/)（不是 100% 确定这是正确完成的）
[https://github.com/pxlprfct/Blog-SO-Question](https://github.com/pxlprfct/Blog-SO-Question)

```
<div id="skrollr-body">
        <div id="test" 
            data-0="top:0px;"
            data-1000="top: 400px;" >
           <img src="apple.jpg" alt="">
        </div>
    </div>

    <article>
        <h1>
            Hi there helpful person!
        </h1>
        <p> 
            Hi there, I've been trying, and failing, to do what I thought was a reasonably simple thing.
        </p>
        <p>
            I just want the picture to stay where it is, (don't worry about the horrible aspect ratio and how it looks crushed, I'm fixing that after) and the 'blog', well the article to overlap it.
        </p>
        <p>
            I've been pratting around with z-index and have done pretty much everything I can think of, but the image still persists to scroll on top of the text (rather than underneath).
        </P>
        <p>
            I have tried a few sketchy things that worked, but didn't work well. I think i'm missing something mega obvious, anyways. Thanks for being awesome :)
        </p>
        <p>
            Lorem ipsum dolor sit amet, consectetur adipisicing elit. Deserunt earum eum recusandae accusantium porro facere vero nulla delectus. Adipisci, omnis velit molestias nemo expedita! Ad, enim similique placeat rerum. Libero.
        </p>
        <p>
            Lorem ipsum dolor sit amet, consectetur adipisicing elit. Maiores, fuga eius ipsa alias repudiandae itaque neque totam veniam ut minus dignissimos eveniet dicta unde quos enim possimus optio nihil omnis. Lorem ipsum dolor sit amet, consectetur adipisicing elit. Placeat, magni est officia quis vitae veritatis doloribus laudantium corporis doloremque ratione ut ullam voluptatibus numquam quos optio voluptas veniam corrupti repellat. Lorem ipsum dolor sit amet, consectetur adipisicing elit. Ad, provident, maxime beatae ea distinctio aperiam dicta ipsa soluta consequatur eius explicabo cumque possimus iure temporibus laudantium eveniet et ex placeat.
        </p>
        <p>
            Lorem ipsum dolor sit amet, consectetur adipisicing elit. Incidunt, quidem sint labore saepe explicabo aspernatur sunt vero quos minima nesciunt velit et debitis est accusantium eveniet dolorum sed quibusdam voluptate!
        </p>
    </article> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T17:14:32.190

添加`position: fixed`和调整`z-index`to`-1`就可以了。您还必须将`top`and设置`left`为`0`，但这是次要的：

```
#test {
    position: fixed;
    top: 0;
    left: 0;
    z-index: -1;
} 
```

**JSFiddle**：http:
[//jsfiddle.net/8fb4C/1/](http://jsfiddle.net/8fb4C/1/)

# java - Android：读取 txt 文件时出现 NullPointerException

> ID：16089135
> 
> 赞同：2
> 
> 时间：2013-04-18T17:06:54.763
> 
> 标签：java, android, file, nullpointerexception, bufferedreader

我正在尝试为 Android 编写一个翻译器应用程序并想读取一个 txt 文件。但是，通过尝试读取文件，我总是得到 NullpointerException。我已将 txt 文件放入 assets 文件夹，但我认为应用程序找不到它:( 我的代码：

（这是第 160 行中我的类 VocabTrainer 的代码：（vocsE、vocsG 是 LinkedLists 和 vocMapE、vocMapG 是 HasMaps 作为 VocabTrainer 的字段））

```
try{
        AssetManager manager;
        manager = currentContext.getAssets();
        InputStream input = manager.open("vocabs.txt");
        InputStreamReader inputReader = new InputStreamReader(input);

        BufferedReader reader = new BufferedReader(inputReader);
        String word = null;

        while ((word = reader.readLine()) != null) {
            //Splitts the given String when there is given " " 
            String[] wordSplit = word.split(" ");

            vocsE.add(wordSplit[0]);
            vocsG.add(wordSplit[1]);

            vocMapE.put(wordSplit[0], wordSplit[1]);
            vocMapG.put(wordSplit[1], wordSplit[0]);
        }
        reader.close();
    }
    catch (IOException e) {
        e.printStackTrace();
    } 
```

这是 logcat 跟踪：

```
04-18 17:24:27.204: E/AndroidRuntime(1736): java.lang.RuntimeException: Unable to    
instantiate activity  
ComponentInfo{de.dbgeppelheim.dbgvocab/de.dbgeppelheim.dbgvocab.TrainingActivity}: 
java.lang.NullPointerException
04-18 17:24:27.204: E/AndroidRuntime(1736):     at  
android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2106)
04-18 17:24:27.204: E/AndroidRuntime(1736):     at   
android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
04-18 17:24:27.204: E/AndroidRuntime(1736):     at   
android.app.ActivityThread.access$600(ActivityThread.java:141)
04-18 17:24:27.204: E/AndroidRuntime(1736):     at    
android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
04-18 17:24:27.204: E/AndroidRuntime(1736):     at   
android.os.Handler.dispatchMessage(Handler.java:99)
04-18 17:24:27.204: E/AndroidRuntime(1736):     at   
android.os.Looper.loop(Looper.java:137)
04-18 17:24:27.204: E/AndroidRuntime(1736):     at    
android.app.ActivityThread.main(ActivityThread.java:5039)
04-18 17:24:27.204: E/AndroidRuntime(1736):     at   
java.lang.reflect.Method.invokeNative(Native Method)
04-18 17:24:27.204: E/AndroidRuntime(1736):     at  
java.lang.reflect.Method.invoke(Method.java:511)
04-18 17:24:27.204: E/AndroidRuntime(1736):     at   
com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
04-18 17:24:27.204: E/AndroidRuntime(1736):     at   
com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
04-18 17:24:27.204: E/AndroidRuntime(1736):     at    
dalvik.system.NativeStart.main(Native Method)
04-18 17:24:27.204: E/AndroidRuntime(1736): Caused by: java.lang.NullPointerException
04-18 17:24:27.204: E/AndroidRuntime(1736):     at   
android.content.ContextWrapper.getResources(ContextWrapper.java:89)
04-18 17:24:27.204: E/AndroidRuntime(1736):     at   
android.view.ContextThemeWrapper.getResources(ContextThemeWrapper.java:78)
04-18 17:24:27.204: E/AndroidRuntime(1736):     at   
de.dbgeppelheim.functionality.VocabTrainer.initialise(VocabTrainer.java:167)
04-18 17:24:27.204: E/AndroidRuntime(1736):     at   
de.dbgeppelheim.functionality.VocabTrainer.<init>(VocabTrainer.java:40)
04-18 17:24:27.204: E/AndroidRuntime(1736):     at   
de.dbgeppelheim.dbgvocab.TrainingActivity.<init>(TrainingActivity.java:25)
04-18 17:24:27.204: E/AndroidRuntime(1736):     at  
java.lang.Class.newInstanceImpl(Native Method)
04-18 17:24:27.204: E/AndroidRuntime(1736):     at   
java.lang.Class.newInstance(Class.java:1319)
04-18 17:24:27.204: E/AndroidRuntime(1736):     at   
android.app.Instrumentation.newActivity(Instrumentation.java:1054)
04-18 17:24:27.204: E/AndroidRuntime(1736):     at   
android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2097)
04-18 17:24:27.204: E/AndroidRuntime(1736):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T17:13:24.897

尝试将其放在 res 文件夹中。并重新运行。如果还是不行，如果问题是由于文件未找到错误引起的，请调试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T17:29:59.560

这个问题解释了如何做你想做的事情。按照这些步骤操作，如果仍然不起作用，请返回。

[读取一个简单的文本文件](https://stackoverflow.com/questions/5771366/reading-a-simple-text-file)

# asp.net-mvc-4 - Unity.MVC4 不处理（）

> ID：16089137
> 
> 赞同：3
> 
> 时间：2013-04-18T17:06:59.830
> 
> 标签：asp.net-mvc-4, unity-container

我已经安装了 NuGet Unity.MVC4 包[http://nuget.org/packages/Unity.Mvc4/](http://nuget.org/packages/Unity.Mvc4/)并将其连接起来，就像我使用 Unity.MVC3 包时一样。

我的依赖项得到了正确解决，但是在使用 HierarchicalLifetimeManager 时，我的对象的 Dispose() 方法不会在请求结束时调用。

我实际上使用 Unity.MVC3 和 Unity.MVC4 建立了一个简单的项目，两个项目中的 Bootstrapper.cs 代码完全相同。在 MVC3 版本上，调用 Dispose()；在 MVC4 版本上，它不是。

我正在注册我的类型

```
 container.RegisterType<ITest, Test>(new HierarchicalLifetimeManager()); 
```

有一个非常简单的测试类

```
 public interface ITest
{
    void Foo();
}

public class Test : IDisposable, ITest
{
    public Test()
    {

    }

    public void Foo()
    {

    }

    public void Dispose()
    {

    }
} 
```

我不认为我做错了什么，但 Unity.MVC4 包中似乎存在一些错误。

如果有人成功使用了那个包，我很好奇你是怎么让它工作的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-26T15:35:52.050

此问题的最佳解决方案是升级到[Unity3](http://nuget.org/packages/Unity/)并安装[Unity Bootstrapper for ASP.NET MVC](http://nuget.org/packages/Unity.Mvc/)包。Bootstrapper 包包括`PerRequestLifetimeManager`应该用来代替`HierarchicalLifetimeManager`. 集成完成后，`Dispose()`在每个 HTTP 请求结束时都会按预期调用。

请注意，[最新的 Unity 文档](http://msdn.microsoft.com/en-us/library/dn178463%28v=pandp.30%29.aspx#sec38)建议`PerRequestLifetimeManager`除非绝对必要，否则根本不应该使用它。（但是，我相信在某些情况下仍然需要它 - 例如，您希望`DbContext`在单个请求期间使用的所有对象之间共享它。）

使用此解决方案，不再需要 Unity.MVC4，可以将其卸载。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T06:43:59.763

我看过代码。[我们简单地从 codeplex ( http://unitymvc3.codeplex.com/](http://unitymvc3.codeplex.com/) )移植 Unity.MVC3 代码并将其重新捆绑到 MVC4 中。我们没有对代码进行任何更改。

Unity.MVC4 使用 Microsoft 管理的 Unity 包 ( [http://nuget.org/packages/Unity/](http://nuget.org/packages/Unity/) )。大部分代码都在 Unity 中。

您正在运行不同的 Dot.Net 版本吗？即 4.0 对 4.5？DotNet 4.5 似乎有一个预发布的 Unity。

# mobile - 用户打开网站 op 移动设备时发出警报

> ID：16089140
> 
> 赞同：0
> 
> 时间：2013-04-18T17:07:02.643
> 
> 标签：mobile, web, notifications, alert

当他/她在手机上打开我的网站时如何向用户显示警报？

我想知道这一点，因为我想通知用户如何在他/她的手机上设置网站应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T17:15:02.267

有许多脚本可以为您执行此操作。您必须在服务器端检查它并将此信息转发到您的前端以提醒用户。

这篇文章可能会有所帮助。 [自动检测移动浏览器（通过用户代理？）](https://stackoverflow.com/questions/1005153/auto-detect-mobile-browser-via-user-agent)

# c# - C# 在 XML 中去除 HTML 标记

> ID：16089143
> 
> 赞同：1
> 
> 时间：2013-04-18T17:07:10.313
> 
> 标签：c#, html, xml, strip-tags, xmltextreader

我真的希望有人可以帮助我解决这个问题。解决方案应该在 C# 上。

我有一个大小为 36 MB 和 900k 行的 xml 文件。在某些节点上，它有很多 html 标记和一些无效标记，例如

```
<Obs><p>
<jantes -="" .="" 22.000="" apenas="" exclusive="" kms.="" leve="" liga="" o=""> </jantes></p> 
```

我尝试了不同的方法来清理这个文件，但只有一种方法能够执行该任务，但是，由于这是在 Web 应用程序上执行的，它阻塞了应用程序并且需要大约 6 分钟才能完成任务并消耗大约 450MB记忆。

由于此文件是无效的 xml，我无法使用 XmlTextReader。使用 XLST，基于[使用 XSLT 从 XML 中去除类似 HTML 的字符（不是标记）？](https://stackoverflow.com/questions/7043103/strip-html-like-characters-not-markup-from-xml-with-xslt)，奇怪的是我也遇到了 HTML 实体的问题。

有效的过程（经过一些调整）如下[http://www.codeproject.com/Articles/19652/HTML-Tag-Stripper](http://www.codeproject.com/Articles/19652/HTML-Tag-Stripper)

谢谢

**编辑：**

按照凯文的建议。我正在尝试使用 HTML Agility Pack 构建解决方案。至少要做一些基准测试。但是我被困住了。想象以下 xml 节点：

```
<Obs><p> I WANT THIS TEXT<jantes -="" .="" 22.000="" apenas="" exclusive="" kms.="" leve="" liga="" o=""> </jantes></p></Obs> 
```

如何剥离“obs”标签内的标签，保留标签“obs”并保留文本“I WANT THIS TEXT”？基本上是这样的：

```
<Obs>I WANT THIS TEXT</Obs> 
```

现在这是我的代码：

```
 HtmlDocument doc = new HtmlDocument();
        doc.LoadHtml(text);
        Queue<HtmlNode> nodes = new Queue<HtmlNode>(doc.DocumentNode.SelectNodes("./*|./text()"));
        while (nodes.Count > 0)
        {
            HtmlNode node = nodes.Dequeue();
            HtmlNode parentNode = node.ParentNode;

            HtmlNodeCollection childNodes = node.SelectNodes("./*|./text()");

            if (childNodes != null)
            {
                foreach (HtmlNode child in childNodes)
                {
                    if (child.Name != "obs")
                    {
                        nodes.Enqueue(child);
                    }
                    else
                    {
                        childNodes = child.SelectNodes("//p|//jantes");
                        foreach (HtmlNode nodeToStrip in childNodes)
                            nodeToStrip.ParentNode.RemoveChild(nodeToStrip);
                    }
                }
            }
        }
        string s = doc.DocumentNode.InnerHtml; 
```

谢谢 ：）

**编辑 2**

好的，我能够完成任务。然而，这需要太多时间。大约 3 小时，消耗 800MB 内存。

**仍然需要帮助！**

这是代码，它可能对某人有所帮助。

```
HtmlDocument doc = new HtmlDocument();
        doc.LoadHtml(text);
        Queue<HtmlNode> nodes = new Queue<HtmlNode>(doc.DocumentNode.SelectNodes("./*|./text()"));
        while (nodes.Count > 0)
        {
            HtmlNode node = nodes.Dequeue();
            HtmlNode parentNode = node.ParentNode;

            HtmlNodeCollection childNodes = node.SelectNodes("./*|./text()");

            if (childNodes != null)
            {
                foreach (HtmlNode child in childNodes)
                {
                    if (child.Name != "obs")
                    {
                        nodes.Enqueue(child);
                    }
                    else
                    {
                        childNodes = child.SelectNodes("//p|//jantes");
                        if (childNodes != null)
                        {
                            foreach (HtmlNode nodeToStrip in childNodes)
                            {
                                var replacement = doc.CreateTextNode(nodeToStrip.InnerText);
                                nodeToStrip.ParentNode.ReplaceChild(replacement, nodeToStrip);
                            }
                        }
                    }
                }
            }
        }
        string s = doc.DocumentNode.InnerHtml; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T18:13:42.437

您是否尝试过[Html 敏捷包](http://html-agility-pack.net/?z=codeplex)？在其主张中：

> *   解析器对“真实世界”格式错误的 HTML 非常宽容
> *   你可以按照你想要的方式修复页面，修改 DOM，添加节点，复制节点，嗯......你命名它

# c# - 为什么没有处置合同？

> ID：16089144
> 
> 赞同：1
> 
> 时间：2013-04-18T17:07:20.530
> 
> 标签：c#, idisposable

我们有构造函数，我们可以将它们视为对象实例化的合约。

如果不向构造函数提供精确的参数集，就没有其他方法可以创建实例。

但是我们如何（并且我们应该打扰）执行一些验尸活动？我们有终结器，但不建议将它们用于通用终结器。我们也必须`IDisposable`实施。但是，如果我们在没有一次性对象的情况下使用，`using`我们无法保证 Dispose 会被调用。

为什么现在有办法在对象被释放之前强制执行对象的某些状态？

在终结器中整理是不可能的，因为不能保证对象图是完整的，并且垂死对象的引用对象没有被 GC 清空。

当然，不`SaveState()`通过客户端代码调用实例对象会给它带来一些麻烦，而不是我的对象。

尽管如此，要求在构造函数中注入所有需要的依赖项被认为是一种好习惯（如果没有可用的默认值）。没有人会轻易说：“离开默认构造函数，创建属性并在对象处于无效状态时抛出异常。”

更新：

由于有很多投票可以结束这个问题，我想说一些设计模式也可以作为答案。

无论您是否使用 DI，您都可以计算对象被请求/创建的次数。但是如果没有明确的释放调用，你不知道什么时候应该调用 dispose。

我根本不明白如何在正确的时间实施处置。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-18T17:36:27.527

> 为什么在对象被释放之前没有办法强制执行对象的某些状态？

因为垃圾收集器的全部意义在于*[模拟具有无限内存的机器](http://blogs.msdn.com/b/oldnewthing/archive/2010/08/09/10047586.aspx)*。如果内存是无限的，那么你永远不需要清理它。

您将*程序的语义要求（*在特定时间发生特定副作用）与*模拟无限存储的机制*混为一谈。在理想的世界中，这两件事不应该相互关联。不幸的是，我们不是生活在一个理想的世界里。终结器的存在就是证明。

如果您想在特定时间实现某些效果，那么*这些效果就是您的程序的一部分，*您应该*编写实现它们的代码*。如果它们很重要，那么它们应该*在代码中可见，*以便阅读代码的人可以看到并理解它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T17:52:51.197

不幸的是，在 Java 的设计过程中，预期垃圾收集器应该能够满足所有清理要求。在 .NET 的早期设计阶段，这似乎也是一种信念。

因此，没有区别：

*   封装了`object reference`其目标的专有所有权；

*   a`reference to an object`不封装所有权（其目标由其他人拥有） *；*

*   a`reference whose owner`知道它将*封装独占所有权*或*封装 none*，并且知道哪种情况适用于手头的实例；

*   或`object reference`封装共享所有权的。

如果围绕这些区别正确设计了一种语言和框架，则很少需要编写无法静态验证正确清理的代码（前两种情况可能适用于 90% 以上的时间，即使使用 .NET 框架）。

不幸的是，因为在非常有限的语句上下文之外不存在这样的区别`using`，所以编译器或验证器无法知道，当一段代码放弃引用时，是否有其他任何东西期望清理由此引用的对象。

因此，一般**无法**知道该对象是否**应该**被处置，也没有普遍意义的方式来发出尖叫，如果它应该被处置但不是。

# python - python中这个简单的函数不能正常工作

> ID：16089146
> 
> 赞同：0
> 
> 时间：2013-04-18T17:07:31.620
> 
> 标签：python, list

我对这些程序行有一些问题。我正在 python 中编写一个函数，该函数将列表列表和字符串作为输入，如果列表中列表的第二个元素等于给定的字符串，则返回“名称在此处”。在这种情况下，我拥有的列表是这个

```
railway = [["Milan","Zurich"],["Zurich","Bern"],["Bern","Berlin"],["Berlin","Copenaghen"]] 
```

我的功能是：

```
def travel( list , stringdestination):
        i = 0
    for elemento in range(len(list)):
      if list[i][1] == stringdestination:
          print "target reached" 
```

当我运行时：

```
travel(railway, "Bern") 
```

它应该显示：“达到目标”但它没有，它没有显示任何东西，为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T17:24:09.113

正如已经回答的那样，您没有增加循环变量。但这就是微不足道的问题，更重要的是，您就像一个工具箱里只有一把锤子的人一样来找这个螺丝钉。这几乎就是创建称为字典的数据结构的确切原因。它是内置的。

阅读这个，它更容易和更好。 [http://www.tutorialspoint.com/python/python_dictionary.htm](http://www.tutorialspoint.com/python/python_dictionary.htm)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-18T17:10:17.403

你永远不会增加 i。你的循环应该是：

```
for pair in list:
    if pair[1] == stringdestination:
        print "target reached" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-18T17:14:02.590

几点：

1.  不要`list`用作变量名。`list`是内置名称
2.  直接迭代列表`for i in mylist`
3.  可以通过在迭代中分配 2 个变量来“解包”列表中的对

例如：

```
def travel(places, destination):
    for start, dest in places:
        if destination == dest:
            print "target reached"
            break 
```

当您找到目的地时，您可能希望停止迭代。通过立即从函数返回或中断而不返回任何内容来执行此操作（如果`return`函数中没有，则隐式返回`None`）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T17:13:20.680

我会将它包装在 a 中`function`，所以当 a 建立正确的字符串时我会停下来。它防止循环遍历整个列表：

```
def arrived(s, raileway):
    for r in railway:
        if r[1] == s:
            return True
    return False

if arrived("Bern", railway):
    print("target reached") 
```

# c++ - 如何在 Visual Studio 2010 中重用已与另一个 C++ 应用程序链接到 DLL 的静态库代码？

> ID：16089149
> 
> 赞同：1
> 
> 时间：2013-04-18T17:07:41.900
> 
> 标签：c++, static-linking, dynamic-linking, code-size, microsoft-runtime-library

我正在开发 Visual Studio 2010 中的 C++ 解决方案。我有一个使用一些标准 C++ 库函数（例如字符串或文件函数）的 DLL 文件。由于某些可移植性原因，我必须使用`/MT`选项编译此 DLL，因此所有必需的运行时库函数都将链接到已发布的 DLL 文件。

我有另一个 C++ 项目，它是一个 Windows 应用程序，该项目还使用`/MT`选项编译并生成一个独立的 exe 文件。第二个项目还使用了已链接在我的 DLL 中的相同标准 C++ 库函数（可执行文件还使用一些 DLL 导出方法）。

现在这是我的问题：有什么方法可以告诉链接器不要链接已经链接到 DLL 文件的公共运行时函数，并且不要在 exe 文件中再次链接这些共享部分（例如，对已经链接的字符串函数重用相同的代码链接到我的 DLL）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T18:40:17.497

不，你不能那样做。尽管可执行文件依赖于 DLL，但它们仍然可以被视为独立的二进制工件，每个工件都应包含正确执行所需的符号。

这是首选动态链接的原因之一。此外，我认为动态链接和重新分配运行时与您的应用程序没有任何问题。

尽管*Microsoft Visual C Runtime*包含在大多数平台上，但它有许多不同的版本，其中一些是**错误**的或/并且**破坏了向后兼容性**。`msvcr*.dll`因此，分发您知道肯定适用于您的应用程序的版本始终是一个好主意。

# android - 在 SherlockFragmentActivity 的 FragmentPagerAdapter 中更新 Fragment View

> ID：16089152
> 
> 赞同：1
> 
> 时间：2013-04-18T17:07:49.500
> 
> 标签：android, actionbarsherlock, fragmentpageradapter

我正在关注来自**ActionBarSherlock**的 Samples 下的示例**FragmentTabsPager**。

 **在我的例子中，我使用 TabsPager 和 FragmentPagerAdapter 示例中的相同代码创建了一个简单的 SherlockActivity。

我创建了两个片段（不同的类）。第一个仅包含四个按钮。根据点击哪个，主Activity 会获得一个代码（例如1、2、3、4）。我正确地得到了按下按钮的代码。

现在，在第二个片段中，我想根据该代码绘制一些东西，或者相同的东西，动态更新它的视图。

我一直在寻找解决方案，但我一无所获。在这种情况下，我有这个：

[MainActivity.java]

```
 public static class TabsAdapter extends FragmentPagerAdapter
            implements TabHost.OnTabChangeListener, ViewPager.OnPageChangeListener {

private final Context mContext;
        private final TabHost mTabHost;
        private final ViewPager mViewPager;
        private final ArrayList<TabInfo> mTabs = new ArrayList<TabInfo>();    
[...]
    @Override
        public Fragment getItem(int position) {
            TabInfo info = mTabs.get(position);
            return Fragment.instantiate(mContext, info.clss.getName(), info.args);

    } 
```

我设法用新值更新了 Bundle info.args，但我不知道如何正确地将它传递给片段并命令它更新其动态视图。

**这可能吗？**

提前致谢。

**更新**

最后，我使用了 Sunny 好心解释的内容。我用我的 Fragments 保存了一个 SparseArray，所以我绝对可以访问它们，因为我知道它在 MainActivity 中的位置：

[MainActivity.java]

```
 //Once the user presses the button on the first fragment, the callback calls
// this function
    public void onImageSelected(int iNumber){

    MySecondFragment msf = (MySecondFragment)mTabsAdapter.getFragment(POS_1);

        if(msf != null){

                msf.setNumImage(iNumber);               
                msf.updateView();                                   
            }                   
       } 
```

最后在 MySecondFragment.java 中，我可以访问我的 Layout 组件（例如 GridView），因为它们是在 onCreateView 期间初始化的，因此我将所需的所有代码放入我的 updateView() 方法中。

例如，我更新了 GridView 的内容：

[MySecondFragment.java]

```
myGridView.setBackground(getResources().getDrawable(iCode)); 
```

高温高压

**更新 2**

为了将片段保存到主要活动的状态包中，我包含了以下代码。当应用程序从纵向更改为横向或反之（重新创建）时，不会调用函数**getItem ，因此****SparseArray**映射不会再次使用必要的片段重新填充：

```
@Override
    protected void onSaveInstanceState(Bundle outState) {
        super.onSaveInstanceState(outState);

        outState.putString(CURRENT_TAB, mTabHost.getCurrentTabTag());

        getSupportFragmentManager().putFragment(outState, MyFirstFragment.class.getName(), mTabsAdapter.getFragment(POS_1));

        getSupportFragmentManager().putFragment(outState, MySecondFragment.class.getName(),
                mTabsAdapter.getFragment(POS_2));
    }

    @Override
    protected void onRestoreInstanceState(Bundle savedInstanceState) {
        super.onRestoreInstanceState(savedInstanceState);

        if (savedInstanceState != null) {

            MyFirstFragment mff = (MyFirstFragment) getSupportFragmentManager().getFragment(savedInstanceState, MyFirstFragment.class.getName());                           

            if(mff != null)
                mTabsAdapter.setFragment(POS_1, mff);

            MySecondFragment msf = (MySecondFragment) getSupportFragmentManager().getFragment(
                    savedInstanceState, MySecondFragment.class.getName());                          

            if(msf != null)
                mTabsAdapter.setFragment(POS_2, msf);

            mTabHost.setCurrentTabByTag(savedInstanceState
                    .getString(CURRENT_TAB));           
        }
    } 
```

此外，在 TabsAdapter 类中：

```
public Fragment getFragment(int pos) {
    return map.get(pos);
}

public void setFragment (int position, Fragment fragment) {
     map.put(position, fragment);
} 
```

高温高压

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T17:22:32.827

FragmentPagerAdapter的[源代码](https://android.googlesource.com/platform/frameworks/support/+/refs/heads/master/v4/java/android/support/v4/app/FragmentPagerAdapter.java)显示 Fragment 具有以下标记：

```
"android:switcher:" + viewId + ":" + id; 
```

`viewId`您的 R.id在哪里，`ViewPager`并且`id`是页码。

因此，您可以使用以下方法检索第二页的片段：

```
activity.getSupportFragmentManager().findFragmentByTag(
    "android:switcher:" + pager.getId() + ":2") 
```

你`pager`的`ViewPager`. 然后，您希望将返回的 Fragment 转换为您拥有的任何特定类，然后调用一个方法来传递您需要的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T17:38:41.483

anhanniballake 答案可能有效。但这可能会在未来中断。

要实际获取片段，您可以在 TabAdapter 类中定义一个 spatsArray

```
private SparseArray<Fragment> map; 
```

并在这个数组中添加你的片段

```
@Override
public Fragment getItem(int position) {
    TabInfo info = mTabs.get(position);
    Fragment fragment = Fragment.instantiate(mContext, info.clss.getName(), info.args);
    map.put(position, fragment);
    return fragment;
} 
```

当片段被破坏时，您还需要从地图中删除片段

```
@Override
public void destroyItem(ViewGroup container, int position, Object object) {
    map.remove(position);
    super.destroyItem(container, position, object);
} 
```

现在在 TabAdapter 类中定义一个可以获取 Fragments 的公共方法

```
public Fragment getFragment(int pos) {
    return map.get(pos);
} 
```

现在在您的 Main SherlockFragementActivity 中，您可以获得任何片段的实例

```
MyFragment f = (MyFragment) mTabsAdapter.getFragment(1); // 1 means second fragment from left 
```

现在使用上面得到的片段实例调用片段中的任何方法

```
f.doAnyThingInMySecondFragment(); 
```

`doAnyThingInMySecondFragment`必须公开:)**

# c++ - 检查字符串中每个字符的类型

> ID：16089160
> 
> 赞同：1
> 
> 时间：2013-04-18T17:08:21.180
> 
> 标签：c++, string

我有一个函数用于尝试检查字符串的格式是否正确。我试图通过查看每个字符并确定它是否属于正确的类型来做到这一点。但是，无论我尝试什么，我都会得到一个我无法弄清楚的错误。代码如下：

```
bool valid(string checkcode)
{
    if(checkcode.length()!=6) return false;
    else if(isalpha(checkcode.at(0)))&(isalpha(checkcode.at(1)))&(isdigit(checkcode.at(2)))&(isdigit(checkcode.at(3)))&(isalpha(checkcode.at(4)))&(isalpha(checkcode.at(5))) return true;
    else return false;
} 
```

我得到的错误是第一个'&'，它说“错误：表达式必须是一个 Ivalue 或函数指示符”我真的被困在这里，感谢任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T17:10:15.050

```
 isalpha(checkcode.at(0)))&(isalpha(checkcode.at(1)))
                         //bit and 
```

应该

```
isalpha(checkcode.at(0)))&&(isalpha(checkcode.at(1)))
                        //^^logical and 
```

你需要`logical and`在这种情况下使用。

您还需要确保括号匹配。

```
//better to format multiple conditions and make sure () match
if(
    (isalpha(checkcode.at(0)))
  &&(isalpha(checkcode.at(1)))
  &&(isdigit(checkcode.at(2)))
  &&(isdigit(checkcode.at(3))) 
  &&(isalpha(checkcode.at(4)))
  &&(isalpha(checkcode.at(5)))
 ) 
 return true; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-18T17:11:44.907

```
bool valid(string checkcode)
{
    return checkcode.length() == 6
        && (isalpha(checkcode.at(0)))
        && (isalpha(checkcode.at(1)))
        && (isdigit(checkcode.at(2)))
        && (isdigit(checkcode.at(3)))
        && (isalpha(checkcode.at(4)))
        && (isalpha(checkcode.at(5)));
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T17:32:26.370

你的错误的原因是你的括号在错误的地方。编译器`&`抱怨的在语句的条件表达式*之外*`if`。

编译器将此视为要测试的条件：

```
if(isalpha(checkcode.at(0))) 
```

剩下的部分被认为是条件为真时要执行的语句：

```
&(isalpha(checkcode.at(1)))... 
```

因此，编译器是正确的。当它看到一*元运算* `&`符时，它期望操作数是它可以获取地址的东西，例如左值或函数。

仔细阅读错误信息和代码将有助于您下次发现此类错误。（也就是说，当编译器抱怨缺少“左值或函数指示符”时，首先问问自己是什么让它期望这样的事情。它在获取某物的地址时想要那些，所以考虑一下它为什么认为它*应该*获取任何东西的地址。它使用一元运算`&`符来实现，但您打算使用二元运算符，因此请仔细查看代码以确定为什么它不被解释为二元运算符。您知道 C++ 语法，所以您知道声明`if`需要*完全*括在括号中，因此您知道只有第一个表达式是条件的一部分。这不是你想要的，所以你会意识到右括号在错误的地方。）

事实上，单与号`&`运算符不应该用于布尔表达式。你应该`&&`改用。这种差异不会导致您看到的错误，也不会对代码的运行时行为产生明显影响。

# android - 安卓。MIDI。演奏前 N 个音符

> ID：16089161
> 
> 赞同：1
> 
> 时间：2013-04-18T17:08:23.237
> 
> 标签：android, midi

我正在编写一个播放 MIDI 文件的应用程序。有没有机会只播放 MIDI 文件的 N 个第一个音符（比如 5 个）？

提前致谢！

代码示例片段会很棒！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T17:15:22.443

当然有可能。不过，找到一个库来做这件事会容易得多，试试这样的事情：

[https://code.google.com/p/android-midi-lib/](https://code.google.com/p/android-midi-lib/)

如果不这样做，google midi 文件操作库 java 或类似的东西，你会找到一些东西。

编辑：看看这个，它是更新和更相关的 [Android 6.0 (Marshmallow)：如何播放 midi 音符？](https://stackoverflow.com/questions/36193250/android-6-0-marshmallow-how-to-play-midi-notes)

# javascript - 使用 jquery 或 javascript 从对象中获取变量

> ID：16089162
> 
> 赞同：1
> 
> 时间：2013-04-18T17:08:26.083
> 
> 标签：javascript, jquery

jquery脚本中有一个大对象，我想提取它（获取变量。我认为需要使用“。”。示例：

> data.0.name

但就我而言，这不起作用。附有示例的图片。我怎样才能得到“代码”变量？![在此处输入图像描述](https://i.stack.imgur.com/wiMG2.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T17:09:00.810

`0`不是有效标识符，因此您需要使用索引表示法：

```
data[0].code 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T17:09:26.713

将键作为数字似乎很奇怪，请使用括号表示法。

```
data["0"].name 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T17:29:33.847

我会在线回复`@SLaks`，他是绝对正确的。

如果我没有错，那么您的数据类似于：-

```
 var data = [
            {
                "code": "Lorem",
                "created": "2012-01-01"
            },
            {
                "code": "Lorem",
                "created": "2012-01-02"
            },
            {
                "code": "Lorem",
                "created": "2012-01-03"
            }
        ]; 
```

现在，如果您需要访问数据，您可以尝试两种选择：-

第一次使用`.each`

```
//If your using .each for Array
        $.each(data, function (index, value) {
            console.log("1st Param= " + value.code + "| 2nd Param= " + value.created);
        }); 
```

第二：-如果您要手动访问，`using the index`那么您可以尝试：-

```
//If you manualy want to access:
for (var i = 0; i < data.length; i++) {
    console.log("1st Param= " + data[i].code + "| 2nd Param= " + data[i].created);
} 
```

仅供参考，您可以复制并粘贴 HTML 文件：-

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script>
        $(document).ready(function () {
            var data = [
                {
                    "code": "Lorem",
                    "created": "2012-01-01"
                },
                {
                    "code": "Lorem",
                    "created": "2012-01-02"
                },
                {
                    "code": "Lorem",
                    "created": "2012-01-03"
                }
            ];
            console.log(data);
            //If your using .each for Array
            $.each(data, function (index, value) {
                console.log("1st Param= " + value.code + "| 2nd Param= " + value.created);
            });
            //If you manualy want to access:
            console.log("----------");
            for (var i = 0; i < data.length; i++) {
                console.log("1st Param= " + data[i].code + "| 2nd Param= " + data[i].created);
            }

        });

    </script>
</head>
<body>

</body>
</html> 
```

[更新] 没有注意到`@Palash Mondal`回复，这是我想传达的。这对我来说似乎是正确的。

# r - R：在循环中提取部分矩阵 - 循环只运行一次

> ID：16089166
> 
> 赞同：0
> 
> 时间：2013-04-18T17:08:47.050
> 
> 标签：r, for-loop

我不是高级用户，但我已经尝试解决这个问题好几个小时了，我不知道该怎么做。

设置：我有一个 2X10000 矩阵，它由 2 个变量的 10000 次重复组成，分别在第 1 行和第 2 行中将它们称为 a 和 b。我需要对每一列重复一个操作（即 10000 次），因此需要循环。操作如下：对于每一列 [ab]'，创建一个 2x2 矩阵，如下所示：

```
[a  b]
[b  a] 
```

然后转置该矩阵并将其乘以原始列列。最后，对于每个原始列 [ab]'，我应该获得另一列，但具有两个不同的值。

我构建了 2x10000 矩阵来包含结果：

```
R <- 10000
a <- matrix(rep(1, 200), nrow=2, ncol=R) 
```

Gamma 是我正在使用其列的 2x10000 矩阵。然后我应用以下循环：

```
for (j in 1:R) {
  Big_Gamma = matrix(c(Gamma[1, j], Gamma[2, j], Gamma[2, j], Gamma[1, j]), nrow=2, ncol=2);
  a <- solve(Big_Gamma)%*%Gamma[, j];
} 
```

Big_Gamma 是我需要反转并乘以原始向量的 2x2 矩阵。同样，我需要为 10000 个向量中的每一个都完成此操作，并且我需要另一个向量（与原始向量具有相同的维度）作为输出（如果可能）。我尝试了不同的规范，也以我提取列的方式，但它总是**只运行一次**（即矩阵 a 改变并变成 2x1 的）

我在各个网站上寻找了几个小时，但找不到答案。我希望这个问题不要太愚蠢。提前谢谢你，太棒了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T17:23:51.837

您正在覆盖`a`每次迭代。尝试：

```
R <- 10000
a <- matrix(rep(1, 200), nrow=2, ncol=R)
for (j in 1:R) {
  Big_Gamma = matrix(c(Gamma[1, j], Gamma[2, j], Gamma[2, j], Gamma[1, j]), nrow=2, ncol=2);
  a[, j] <- solve(Big_Gamma)%*%Gamma[, j];
} 
```

# json - JAXB / Jackson 处理长数组

> ID：16089170
> 
> 赞同：1
> 
> 时间：2013-04-18T17:09:10.933
> 
> 标签：json, jaxb, jersey, jackson

我目前正在编写 Jersey REST 接口。我有这段代码，我正在尝试创建以下 JSON 响应，并且生成了一个 long 列表，一个字符串数组（使用 Jaxb 和 Jackson）

代码如下所示：

```
@XmlElement(name = "visitorProfiles", required = false)
private List<Long> visitorProfiles; 
```

JSON响应看起来像

```
{
   "visitorProfiles":["45"]
} 
```

我正确的 JSON 响应应该是

```
{
   "visitorProfiles":[45]
} 
```

这就是我用于 JSON 配置的内容

```
context = new JSONJAXBContext(JSONConfiguration.natural().rootUnwrapping(true).build(),                 JerseyResources.getJaxbClasses()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T07:11:52.293

试图重现该案例但没有成功，除非自然背景不适用于该类，否则我看不出有任何原因发生这种情况

# ruby-on-rails - 从响应中删除 Set-Cookie 标头

> ID：16089172
> 
> 赞同：1
> 
> 时间：2013-04-18T17:09:12.690
> 
> 标签：ruby-on-rails, ruby, rack

我正在尝试为我的应用程序`Set-Cookie`的任何类型的`HTTP`响应删除标头。

如下文所述：

[Rails 3 禁用会话 cookie](https://stackoverflow.com/questions/5435494/rails-3-disabling-session-cookies)

我添加了一个“中间件应用程序”来制作它。不幸的是，我观察到其中一些标头仍在响应中！

这些`Set-Cookie`标头实际上是其他应用程序设置的 cookie（这很正常，因为两个应用程序共享这些 cookie）

任何帮助将不胜感激！

# php - 如何使用 PHP 在电子邮件正文中发送图像？

> ID：16089176
> 
> 赞同：0
> 
> 时间：2013-04-18T17:09:36.680
> 
> 标签：php

我正在尝试发送带有屏幕截图作为电子邮件正文的电子邮件。发送普通文本邮件没有任何问题。`screenshot.png`是我要发送的图像。

```
<?php
  $to=$cust_email; 
  $cartTotal=$_SESSION["cartTotal"];
  $message = '<img src="screenshot.png">';
  mail($to,'Bill',$message,'FROM:xyz@gmail.com');
?> 
```

我也试过：

```
<?php
  $to=$cust_email; 
  $cartTotal=$_SESSION["cartTotal"];
  $message = '<img src="screenshot.png">';
  mail($to,'Bill','echo \'<img src="screenshot.png"/>\';','FROM:xyz@gmail.com');
?> 
```

# r - 如何用 R 模拟相关的二进制数据？

> ID：16089178
> 
> 赞同：5
> 
> 时间：2013-04-18T17:09:43.417
> 
> 标签：r, binary, simulation, correlation

假设我想要 2 个具有指定 phi 系数的二进制数据向量，我如何用 R 模拟它？

`x`例如，如何创建两个`y`具有指定向量长度的向量，cor 效率为 0.79

```
> x = c(1,  1,  0,  0,  1,  0,  1,  1,  1)
> y = c(1,  1,  0,  0,  0,  0,  1,  1,  1)
> cor(x,y)
[1] 0.7905694 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-18T17:41:39.750

bindata包非常适合使用这种和更复杂的相关结构生成二进制数据**。**（[这是一份工作论文的链接（警告，pdf）](http://www.statistik.lmu.de/~leisch/papers/sfb-am/wp13.pdf)，其中列出了包作者所采用方法的理论基础。）

在您的情况下，假设 x 和 y 的独立概率均为 0.5：

```
library(bindata)

## Construct a binary correlation matrix
rho <- 0.7905694
m <- matrix(c(1,rho,rho,1), ncol=2)   

## Simulate 10000 x-y pairs, and check that they have the specified
## correlation structure
x <- rmvbin(1e5, margprob = c(0.5, 0.5), bincorr = m) 
cor(x)
#           [,1]      [,2]
# [1,] 1.0000000 0.7889613
# [2,] 0.7889613 1.0000000 
```

# ios - 如果用户关闭已经在后台的应用程序会发生什么？

> ID：16089182
> 
> 赞同：4
> 
> 时间：2013-04-18T17:09:55.117
> 
> 标签：ios, objective-c, cocoa-touch, uikit, appdelegate

在后台任务执行期间，如果用户杀死应用程序（已经处于后台模式）会发生什么？

想象一下：

该应用程序启动任务 X（具有 10 分钟的后台支持和必须调用的过期处理程序）。然后，应用程序进入后台，用户终止应用程序。

我对应用程序被杀死后任务 X 会发生什么感到困惑。它还有执行的后台时间吗？过期处理程序是否被调用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T17:27:09.603

如果应用程序“已经在后台”，则用户*已经*“关闭应用程序”！那么你的问题意味着什么？你已经进入了后台，如果你照常打电话`beginBackgroundTaskWithExpirationHandler:`，事情就会正常进行。

你的意思是用户在后台强行杀死应用程序，通过召唤“最近的应用程序”界面并进入jiggy模式并从“最近的应用程序”界面删除应用程序？然后该应用程序被立即杀死；您没有收到任何通知，并且您正在做的任何事情都会被打断。

此外，过期处理程序块应该做的唯一事情就是调用`endBackgroundTask:`。如果您被立即杀死，那么您无法拨打此电话的事实并不重要！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T17:16:38.833

好的，这就是结果

**在这种情况下，操作系统将向您的应用程序进程发送 SIGKILL 信号，并且不会调用 applicationWillTerminate 方法。**

以下只是我对 Apple 文档、猜测工作和 Google 结果的解释。

在这种情况下，您的应用程序委托的以下方法将被调用

```
- (void)applicationWillTerminate:(UIApplication *)application 
```

引用 Apple Docs

> 对于不支持后台执行或链接到 iOS 3.x 或更早版本的应用程序，当用户退出应用程序时始终调用此方法。对于支持后台执行的应用程序，当用户退出应用程序时通常不会调用此方法，因为在这种情况下应用程序只是移动到后台。**但是，在应用程序在后台运行（未挂起）并且系统出于某种原因需要终止它的情况下，可能会调用此方法。**

因此，您必须在 plist 文件中将 UIApplicationExitsOnSuspend 值设置为 YES，否则无法保证 applicationWillTerminate: 将被调用。这就是为什么文档*可能*使用的原因。

尽管我不确定，但我认为不会调用过期处理程序块。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-07T22:15:08.120

这很容易测试，所以我刚刚（在运行 iOS 6.1.3 的 iPhone 4S 上）使用了我将在最后粘贴的代码，它在应用程序委托的`applicationDidEnterBackground`方法中启动了一个后台任务。

结果令人惊讶。

当用户通过单击主页按钮退出应用程序，然后手动终止应用程序（通过双击主页，将事物置于 jiggy 模式并点击应用程序的关闭图标）时，会发生以下情况：

1.  `applicationWillTerminate`叫做。
2.  退出时`applicationWillTerminate`，无论后台任务还剩多少执行时间，后台执行都会终止。该应用程序已被杀死。

**然而..**

如果您安排的事情`applicationWillTerminate`在被调用后不会退出，如下面的代码所示，当手动终止应用程序时，会发生以下情况——至少在我的测试设置中是这样：

1.  应用程序的后台任务**继续在后台运行**。
2.  即使分配的后台执行时间已经过期，后台任务也会继续运行，就像 中的代码一样`applicationWillTerminate`，直到该方法退出。

这显然是一个错误——你不应该永远继续运行代码——而且我不会依赖它一直工作。但是那些一直在使用各种技巧来在后台播放音频以保持应用程序存活的人可能想要进行调查。如果其他人在不同的 iOS 版本/设备上尝试代码并获得相同的结果，我会很感兴趣。

我的测试项目中 AppDelegate.m 的代码：

```
//
//  BTAppDelegate.m
//  BackgroundTest
//
//  Created by David Fearon on 07/05/2013.
//  Copyright (c) 2013 David Fearon. All rights reserved.
//

#import "BTAppDelegate.h"

@implementation BTAppDelegate

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    NSLog(@"application didFinishLaunchingWithOptions called");
    // Override point for customization after application launch.

    return YES;
}

- (void)applicationWillResignActive:(UIApplication *)application
{
    NSLog(@"applicationWillResignActive: called");

}

- (void)applicationDidEnterBackground:(UIApplication *)application
{
    NSLog(@"applicationDidEnterBackground: called");

    UIApplication* thisApp = [UIApplication sharedApplication];
    UIBackgroundTaskIdentifier __block task = [thisApp beginBackgroundTaskWithExpirationHandler:^{
    }];

    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
        [self printTimeRemaining];
        while(YES) {
            [NSThread sleepForTimeInterval:1.0];
            [self printTimeRemaining];
        }
        //[thisApp endBackgroundTask:task];
    });

}

-(void)printTimeRemaining{
    NSLog(@"Background task time remaining: %f", [[UIApplication sharedApplication] backgroundTimeRemaining]);
}

- (void)applicationWillEnterForeground:(UIApplication *)application
{
    NSLog(@"applicationWillEnterForeground: called");

}

- (void)applicationDidBecomeActive:(UIApplication *)application
{
    NSLog(@"applicationDidBecomeActive: called");

}

- (void)applicationWillTerminate:(UIApplication *)application
{
    NSLog(@"applicationWillTerminate: called");

    while(YES) {
        [NSThread sleepForTimeInterval:1.0];
        NSLog(@"Still executing code in applicationWillTerminate.");
    }

}

@end 
```

# java - 重新部署 JBoss 6.1.0 后保持线程

> ID：16089183
> 
> 赞同：0
> 
> 时间：2013-04-18T17:09:56.977
> 
> 标签：java, jboss, twiddle

我正在耳朵的 lib 文件夹中部署一个带有 jar 的 EAR。这个 jar 生成一个 DefaultFileMonitor 线程（来自 Apache Commons api）并监视一个文件。

当我使用 twiddle 重新部署 EAR 时，为所有 WAR 调用的取消部署似乎不会杀死 DefaultFileMonitor 线程。

问题是这将使多个 DefaultFileMonitor 在同一个文件上保持打开状态，这会导致问题。

杀死这个线程的正确方法是什么？玩弄是罪魁祸首吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T13:18:59.440

```
public enum Logger {
    INSTANCE;
    DefaultFileMonitor fm = new DefaultFileMonitor(new CustomFileListener());
    private FileObject file = null;
    private FileObject object = null;

    private Logger() {

    this.openFile();

    try {
        FileSystemManager fsManager = VFS.getManager();
        file = fsManager.resolveFile(this.getfileLocation());
        object = fsManager.resolveFile("c:\test.txt");
    } catch (FileSystemException e) {
        e.printStackTrace();
    }

    fm.setDelay(1000);
    fm.addFile(file);
    fm.start();
} 
```

这是我用来加载 DefaultFileMonitor 的代码

# php - PHP - 运行 GET curl，得到结果

> ID：16089188
> 
> 赞同：0
> 
> 时间：2013-04-18T17:10:07.680
> 
> 标签：php, arrays, curl, get

我想在 php A 中运行 GET curl 以从 php B 获取数据。

这是 php A 中的一个示例（我从这里获得[http://support.qualityunit.com/061754-How-to-make-REST-calls-in-PHP](http://support.qualityunit.com/061754-How-to-make-REST-calls-in-PHP)）

```
//next example will recieve all messages for specific conversation
$service_url = 'http://localhost/test/getFrom.php?id=1';
$curl = curl_init($service_url);
curl_setopt($curl, CURLOPT_RETURNTRANSFER, true);
$curl_response = curl_exec($curl);
if ($curl_response === false) {
    $info = curl_getinfo($curl);
    curl_close($curl);
    die('error occured during curl exec. Additioanl info: ' . var_export($info));
}
curl_close($curl);
$decoded = json_decode($curl_response);
if (isset($decoded->response->status) && $decoded->response->status == 'ERROR') {
    die('error occured: ' . $decoded->response->errormessage);
}
echo 'response ok!';
var_export($decoded->response); 
```

我也尝试了这个示例（[尝试使用 curl 进行 GET，发送的值允许为 null](https://stackoverflow.com/questions/7516863/trying-to-use-curl-to-do-a-get-value-being-sent-is-allows-null)）

在 php B 中，它将获取 ID，运行一些脚本并生成一个 ARRAY。

我想从 B 到 A 得到这个 ARRAY。

只有当 A 从 B 请求 GET 时，B 才会运行。

问题是我不知道 ARRAY 如何从 B 传递到 A。

请给一些建议谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T17:54:41.310

您提供的代码期望返回一个 JSON 编码的数组。最简单的方法是在 PHP B 中对数组进行 JSON 编码并将其回显到页面。

然后 CURL 就可以读取 PHP B 的内容，并根据需要进行解码和处理。

```
// PHP B

<?php

  // Check for $_GET params  

  // Get ID 
  $id = $_GET['id'];

  // Do processing, query etc
  ....

  // Format and display array as JSON
  echo(json_encode($result_array));
  die();

?> 
```

另请注意：

```
if (isset($decoded->response->status) && $decoded->response->status == 'ERROR') {
    die('error occured: ' . $decoded->response->errormessage);
} 
```

代码期望数组以特定方式格式化。因此，要么将 PHP B 中的数组匹配到相同的格式，要么根据需要更新代码。

# c# - 让ColumnHeaders适合ListView的宽度，这段代码需要解释一下，想知道有没有标准的方法？

> ID：16089190
> 
> 赞同：0
> 
> 时间：2013-04-18T17:10:16.950
> 
> 标签：c#, winforms, listview

我发现这段代码（一个循环）可以将所有ColumnHeaders的总宽度适合一个listview的宽度（当然如果ListView的宽度足够大，否则会显示一个水平滚动条）。

```
foreach(ColumnHeader ch in myListView.Columns){
     ch.Width = -2;
} 
```

我刚刚尝试将值 -2 更改为其他一些值，但它没有用。我需要对这段代码进行解释，为什么它必须是 -2 而不是其他的？

顺便说一句，如果可能的话，您是否知道任何其他（标准？）方法（使所有 ColumnHeaders 的总宽度适合 ListView 的宽度）？

您的帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T20:07:24.780

除了您发现的之外，没有自动的方法可以做到这一点。这记录在[http://msdn.microsoft.com/en-us/library/windows/desktop/bb761163(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/bb761163(v=vs.85).aspx)尽管您看不到 LVSCW_AUTOSIZE_USEHEADER 的值，它是 -2。

为了自己做到这一点，您需要对正在调整大小的 ListView 做出反应，并自己计算宽度。有一个调整大小的事件。然后，您使用 listview.ClientSize.Width - SystemInformation.VerticalScrollBarWidth 作为滚动条的总宽度。

# c - 第二个线程在第一个线程完成之前不会运行

> ID：16089197
> 
> 赞同：0
> 
> 时间：2013-04-18T17:10:40.187
> 
> 标签：c, pthreads

我正在尝试实现生产者/消费者类型的东西，其中生产者线程从字符串中抓取字符并将它们放入循环链表队列（5个节点大）中，消费者线程读取字符并将它们打印到屏幕上. 两个线程在到达换行符时都会停止。我遇到的问题是，在生产者线程终止之前，消费者线程永远不会启动。

```
int consumer_thread_alive;
...

void * producer(struct Node * head)
{
    while (consumer_thread_alive == 0)
    {
        printf("Waiting on consumer.");
    }
...
}

void * consumer(struct Node * head)
{
    consumer_thread_alive = 1;
...
}
...

int main(int argc, char *argv[])
{
    ...
    consumer_thread_alive = 0;
    pthread_t produce;
    pthread_t consume;
    printf("Creating producer thread.\n");
    pthread_create(&produce, NULL, (void *) producer(&head), NULL );
    printf("Creating consumer thread.\n");
    pthread_create(&consume, NULL, (void *) consumer(&head), NULL );
    pthread_join(produce,NULL);
    pthread_join(consume,NULL);
    return 1;
} 
```

我剪掉了其他一些部分，但这就是我遇到麻烦的地方（head 在 main 中早些时候被初始化）。如果我按原样运行代码，它会打印出“创建生产者线程”。然后不断打印出“Waiting on Consumer”。直到我按下`Ctrl+C`并停止它。此外，如果我删除生产者线程顶部的循环，它会运行所有迭代，然后调用消费者线程。无论出于何种原因，它都以串行方式而不是并行方式运行。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-18T17:24:05.580

改变

```
pthread_create(&produce, NULL, (void *) producer(&head), NULL ); 
```

成为：

```
pthread_create(&produce, NULL, producer, &head); 
```

（消费者也一样）

* * *

并且：您应该始终测试系统调用的结果！

* * *

`consumer_thread_alive`And^2：例如使用互斥锁来保护并发访问！

* * *

并且^3：线程函数应该具有以下形式：

```
void * thread_func(void *); 
```

所以你对生产者线程函数的实现可能会像这样开始：

```
void * producer(void * pvhead)
{
  struct Node * head = pvhead;
  ... 
```

但请注意，当您**向两个线程****传递****对同一**实例的引用时，线程函数内部对它的并发**访问也****需要受到保护**（参见上面的*And^2* ）。`struct Node`

 ******** * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T17:46:57.683

```
 int pthread_create(pthread_t *restrict thread, const pthread_attr_t *restrict attr,
          void *(*start_routine)(void*), void *restrict arg); 
```

上面的语法`pthread_create`在`#include <pthread.h>`头文件中声明。

所以你必须改变以下工作

```
 pthread_create(&produce, NULL, producer, (void *)&head); 
```

完整的工作代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <pthread.h>
void * producer(void * );
void * consumer(void * );
struct node{
int x;
};
struct node head;
int consumer_thread_alive;
void * producer(void * head)
{
    printf("producer\n");
    pthread_exit(NULL);    
}
void * consumer(void * head)
{
    consumer_thread_alive = 1;
    printf("consumer\n");
    pthread_exit(NULL);
 }

int main(int argc, char *argv[])
{
    consumer_thread_alive = 0;
    pthread_t produce;
    pthread_t consume;
    printf("Creating producer thread.\n");
    pthread_create(&produce, NULL, producer, (void*)&head );
    printf("Creating consumer thread.\n");
    pthread_create(&consume, NULL, consumer, (void*)&head );
    pthread_join(produce,NULL);
    pthread_join(consume,NULL);
    return 1;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T18:03:50.603

```
pthread_create(//producer's)
pthread_join(//producer's)
pthread_create(//consumer's)
pthread_join(//consumer's) 
```

这个命令会起作用。

编辑：当我确实尝试实现相同的事情时，这很有效。试一试。*******

# codeigniter - Codeigniter 用户代理

> ID：16089200
> 
> 赞同：1
> 
> 时间：2013-04-18T17:10:43.387
> 
> 标签：codeigniter, user-agent

这是我第一次开发响应式网站，我尝试使用 CodeIgniter user_agent 类。

我注意到有

```
is_mobile() 
```

和

```
is_browser() 
```

然而，我想到的图片是平板电脑上的网站看起来与浏览器非常相似，只有移动网站才能`view`完全加载不同的文件。

但是，is_mobile() 包括平板电脑和手机，这不是我所希望的。有没有替代方案？

原因：我使用的是jQuery mobile，我为手机加载了一个完全不同的布局，我不希望这个视图出现在平板电脑上。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-18T17:19:18.500

你有几个选择。

您可以扩展库并创建一个方法来检查平板电脑：

```
class MY_User_agent extends CI_User_agent {

    public function __construct()
    {
        parent::__construct();
    }

    public function is_tablet()
    {
        //logic to check for tablet
    }
}

// usage
$this->load->library('user_agent');
$this->user_agent->is_tablet(); 
```

或者您可以覆盖库中的现有`is_mobile()`方法以获得所需的功能：

```
class MY_User_agent extends CI_User_agent {

    public function __construct()
    {
        parent::__construct();
    }

    public function is_mobile()
    {
        // you can copy the original method here and modify it to your needs
    }
}

// usage
$this->load->library('user_agent');
$this->user_agent->is_mobile(); 
```

[https://www.codeigniter.com/user_guide/general/creating_libraries.html](https://www.codeigniter.com/user_guide/general/creating_libraries.html)

* * *

## 例子

应用程序/库/MY_User_agent.php：

```
class MY_User_agent extends CI_User_agent {

    public function __construct()
    {
        parent::__construct();
    }

    public function is_ipad()
    {
        return (bool) strpos($_SERVER['HTTP_USER_AGENT'],'iPad');
            // can add other checks for other tablets
    }
} 
```

控制器：

```
public function index()
{
    $this->load->library('user_agent');

    ($this->agent->is_ipad() === TRUE) ? $is_ipad = "Yes" : $is_ipad = "No";

    echo "Using ipad: $is_ipad";

} 
```

# sql-server - 每次执行都重新编译带有 sybase 链接服务器的 MSSQL 存储过程

> ID：16089201
> 
> 赞同：0
> 
> 时间：2013-04-18T17:10:45.623
> 
> 标签：sql-server, sybase, linked-server

我在 MS SQL Server 中有一个使用 Sybase 链接服务器的存储过程。每次执行存储过程时，它都会运行很长时间，并且看起来像是在执行前重新编译。知道如何停止这种重新编译吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T09:25:03.333

很难相信重新编译要花这么多时间。我怀疑这个过程使用了一些未优化的旧计划来执行。

有几点要检查。

1.  使用重新编译选项执行。制定新的查询计划。
2.  检查proc中的哪个查询需要很长时间。如果安装了 MDA 表，请检查 mosSysStatement。或在运行该存储过程时检查 master..sysprocesses 表。它将显示当前正在运行的语句编号。它会给你一个公平的想法，哪个陈述采取。
3.  对存储过程使用的表运行更新统计信息。

谢谢，戈帕尔

# css - 侧边栏位置“半”固定 css

> ID：16089202
> 
> 赞同：4
> 
> 时间：2013-04-18T17:10:45.567
> 
> 标签：css, position, fixed, sidebar

我如何获得一个固定的侧边栏，比如包含本网站上社交按钮的侧边栏：

[http://www.tripwiremagazine.com/2012/11/social-media-buttons-and-icon-sets.html](http://www.tripwiremagazine.com/2012/11/social-media-buttons-and-icon-sets.html)

我希望我的侧边栏在我向下滚动时固定在屏幕顶部，但在页面顶部必须有一个绝对位置，以便它在我滚动时停止跟随浏览器。

目前我只是在使用：

```
#sidebar { position:fixed; } 
```

但这并没有在到达页面顶部时给它一个绝对位置。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-18T17:42:28.510

**html**

```
<div class="wrapper"><div class="abs" id="sidebar"></div></div> 
```

**CSS**

```
.abs { position: absolute; }

.fixed {
position: fixed;
top: 30px !important;}

#sidebar {
top: 150px;
left: 0;
height: 100px;
width: 20px;
background-color: #ccc;}

.wrapper {
height: 1500px;
padding: 20px;} 
```

**jQuery**

```
 $(document).scroll(function() {
    var scrollPosition = $(document).scrollTop();
    var scrollReference = 10;
    if (scrollPosition >= scrollReference) {      
        $("#sidebar").addClass('fixed');   
    } else {
        $("#sidebar").removeClass('fixed');
        $("#sidebar").addClass('abs');
    };
}); 
```

**此代码的演示：**

[http://jsfiddle.net/B3jZ5/6/](http://jsfiddle.net/B3jZ5/6/)

```
<div class="wrapper"> 
```

是内容的例子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T17:27:52.920

你也可以试试这个插件：

[https://code.google.com/p/sticky-panel/](https://code.google.com/p/sticky-panel/)

# android - Activity.setResult(int) 和 Activity 生命周期

> ID：16089209
> 
> 赞同：4
> 
> 时间：2013-04-18T17:11:04.893
> 
> 标签：android, android-activity

在按下后退按钮（重新创建活动）之前调用并旋转设备后是否`Activity`保留结果？`Activity.setResult(int)`

似乎`Activity`没有恢复这种信息。如果是这种情况，我应该使用 a 恢复结果并再次`Bundle`调用吗？`setResult`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T18:06:42.943

In a word, yes. The result isn't returned until you call finish(). setResult() presumes that the Activity setting the result (call it Activity B) was started by a call to startActivityForResult() from another Activity (call it Activity A). The presumption is that Activity B will finish, resulting in an automatic return to Activity B.

# objective-c - 如何从包含括号的NSArray中获取字符串

> ID：16089211
> 
> 赞同：1
> 
> 时间：2013-04-18T17:11:07.187
> 
> 标签：objective-c, nsstring, nsarray

我的代码是这样的：（这里的名称是 NSArray，对象也是作为函数参数传递的数组）

```
[name addObject:object];
NSlog(@"%@",name); 
```

当我这样做时，我得到这样的输出：

```
{name:\"Malay Basu"\ date:\"2013-04-18"\ senderId:\"24" receiverId:\"25"} 
```

现在，当我将数组的名称字段检索到字符串中时，我得到的字符串为：

```
NSString *temp = [name valueForKey:@"name"];
output: `( Malay Basu )` 
```

现在，当我进行字符串附加或字符串比较等字符串操作时，我得到了如下错误：

```
Terminating app due to uncaught exception 'NSInvalidArgumentException', reason:
'-[__NSArrayI isEqualToString:]: unrecognized selector sent to instance 0x16635ed0' 
```

为了消除这个错误，我需要这个不带括号的字符串，如上图所示。所以我需要`Malay Basu`而不是。`( Malay Basu )`所以我下一步将正确的字符串提取到另一个字符串变量中是什么，因为我需要执行字符串比较、字符串附加等操作。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T18:03:02.570

检查您使用的方法的目的。

`-valueForKey:`当被召唤时`NSArray`

返回一个数组，其中包含`valueForKey:`在每个数组对象上使用 key 调用的结果。

所以你的对象不是一个字符串，它是一个字符串数组。日志语句显示括号，因为那是`NSArray`. 同样，{} 括号是`NSDictionary`.

要处理结果字符串，请使用循环。

```
for (NSString *aString in anArray) {
    NSLog(@"%@ is an %@", aString, NSStringFromClass([aString class]);
} 
```

# php - 尝试比较浮点值的计算返回 false

> ID：16089213
> 
> 赞同：-5
> 
> 时间：2013-04-18T17:11:08.207
> 
> 标签：php, python, perl

为什么它等于总是假的？

```
<?php

$a = (0.1+0.2);
print $a."\n";  // results in 0.3
if ( (double)$a == (double)0.3 ) {
     echo "true";
}else{
     echo "not true";
}
echo PHP_EOL; 
```

**Perl**

```
perl -e 'if ((0.2+0.1) == 0.3) {print "true\n"; } else { print "false\n"; }' 
```

**现在在 Python 中**

```
python -c 'if ((0.2+0.1)!=0.3 ):  print "false" ' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T17:34:53.320

You need to specify a tolerance [also referred to as [epsilon](http://en.wikipedia.org/wiki/Machine_epsilon)] when comparing floating point values since [it is not an exact representation of the number](http://www.php.net/manual/en/language.types.float.php).

```
function f_cmp(float $a, float $b, float $tol = 0.00001) {
  if( abs($a - $b) < $tol ) { return 0; }
  else { return $a - $b; }
  // return 0 if "equal" within tolerance
  // return < 0 if $a < $b
  // return > 0 if $a > $b
  // for use with PHP functions like usort()
} 
```

Or simply:

```
function f_eq(float $a, float $b, float $tol = 0.00001) {
  if( abs($a - $b) < $tol ) { return true; }
  else { return false; }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T17:15:53.727

> 浮点值的精度有限。因此，经过任何处理后，值可能不会具有相同的字符串表示形式。这还包括在脚本中编写浮点值并直接打印它而无需任何数学运算。
> 
> 如果您想了解更多关于“浮点数”以及 IEEE 754 是什么的信息，请阅读： [http ://www.floating-point-gui.de/](http://www.floating-point-gui.de/)

[（在http://bugs.php.net](http://bugs.php.net)报告此类错误的人的标准答案）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T17:16:06.303

在 Python 命令行中输入：

```
>>> 0.2 + 0.1 
```

你可能会看到：

```
0.30000000000000004 
```

0.2 和 0.1 没有二进制浮点的精确表示。有关详细信息，请参阅此链接：

[http://docs.python.org/2/library/decimal.html](http://docs.python.org/2/library/decimal.html)

# php - PHP比较字符串

> ID：16089223
> 
> 赞同：2
> 
> 时间：2013-04-18T17:11:49.280
> 
> 标签：php, string, comparison

我为表中的每个项目存储了日期和时间戳，格式分别为月/日/年/小时/分钟。拓扑如下所示：

```
---------------------------------
| Name  | ID | Date     | Time  |
---------------------------------
| Item1 | 1  | 04.15.13 | 09.17 |
---------------------------------
| Item2 | 2  | 04.17.13 | 12.58 |
---------------------------------
| Item3 | 3  | 04.18.13 | 22.43 |
--------------------------------- 
```

等等。使用 PHP`date()`函数，我检索服务器的当前日期和时间，如下所示：

```
$date = date(m) . "." . date(d) . "." . date(y);
$time = date(H) . "." . date(i); 
```

在写这篇文章时，这会给我`$date = "04.18.13"`和`$time = "19.05"`.

如果当前日期和时间超过了为我的数据库中的特定项目存储的日期和时间，我希望在用户浏览它时将该项目标记为过时/不活动。例如：

*   如果是 4 月 16 日 11.05，Item1 处于非活动状态，但 Item2 和 Item3 仍处于活动状态。
*   如果是 4 月 17 日 13.02，Item1 和 Item2 处于非活动状态，但 Item3 仍处于活动状态。
*   如果是 4 月 18 日 20.38，Item1 和 Item2 处于非活动状态，但 Item3 仍处于活动状态。

如果像这样的简单运算符可以为此工作，我会完全迷失`>, <, >=, <=`，因为我正在使用字符串。如何比较从数据库中检索到的日期和时间与当前日期和时间？

摘要：**如何比较两个字符串，保存日期或时间，以确定项目是否处于活动状态？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T17:16:00.197

[`DateTime`](http://www.php.net/manual/en/datetime.createfromformat.php)您应该从您的字符串创建对象。像这样：

```
# I assume that you've fetch date and time from mysql already
$time_from_db = DateTime::createFromFormat('m.D.y H.i',
             $mysql_record['date'] . ' ' . $mysql_record['time']);

$now = new DateTime();

# as of php 5.2.2, DateTime objects can be compared using the <> == operators
if($now >= $time_from_db) {
    echo "it's in the past.";
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T17:24:55.190

如果您在 MySQL 中将两个字段合并为一个[`DATETIME`](http://dev.mysql.com/doc/refman/5.1/en/datetime.html)字段，则此任务将很简单，并且可以在查询本身中执行。

您的表格可能如下所示：

```
------------------------------------
| Name  | ID | active_until        |
------------------------------------
| Item1 | 1  | 2013-04-15 09:17:00 |
------------------------------------
| Item2 | 2  | 2013-04-17 12:58:00 |
------------------------------------
| Item3 | 3  | 2013-04-18 22:43:00 |
------------------------------------ 
```

你可以像这样查询它

```
Active Listings:
----------------
SELECT * FROM table WHERE active_until >= NOW()

Inactive Listings:
------------------
SELECT * FROM table WHERE active_until < NOW()

All listings with active/inactive indicator:
--------------------------------------------
SELECT
    *,
    (CASE WHEN active_until >= NOW() THEN 'active' ELSE 'inactive' END CASE) as `status`
FROM table 
```

# android - 如何捕获当前屏幕上的所有内容，包括对话框

> ID：16089225
> 
> 赞同：6
> 
> 时间：2013-04-18T17:12:04.643
> 
> 标签：android, screenshot

我可能看过所有关于在 Android 上以编程方式捕获屏幕（屏幕截图、屏幕转储）的 SO 文章，它们通常都得到相同的答案。

**它的问题在于它捕获了您指定的视图，但它没有捕获任何可能位于“根视图”之上的对话框。**这是我使用的代码，它无法捕获“顶部”的任何内容：

```
Bitmap bitmap;
View v1 = findViewById(android.R.id.content);
v1.setDrawingCacheEnabled(true);
bitmap = Bitmap.createBitmap(v1.getDrawingCache());
v1.setDrawingCacheEnabled(false);
File path = Environment.getExternalStorageDirectory();
File file = new File(path, "myDump.jpg");

FileOutputStream outputStream;

try 
{
    outputStream = new FileOutputStream(file);
    bitmap.compress(Bitmap.CompressFormat.JPEG, 10, outputStream);
    outputStream.flush();
    outputStream.close();
} 

catch (Exception e) 
{
  e.printStackTrace();
} 
```

**问题是：** *如何捕获整个屏幕，包括顶部的对话框？*我只对捕获我正在编写的应用程序感兴趣，而不是主屏幕或类似的东西，只是在我的根视图之上的任何东西。

我确实读过一些关于生根的文章，但我真的希望对我正在编写的应用程序进行完整的屏幕转储不是不可能的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-12-21T15:08:48.937

使用这个库....它对我很有用。 [https://github.com/jraska/Falcon](https://github.com/jraska/Falcon)

```
 // Saving screenshot to file
            Falcon.takeScreenshot(this, imageFile);
            // Take bitmap and do whatever you want
            Bitmap bitmap = Falcon.takeScreenshotBitmap(this); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-10T18:37:09.633

有可能，您需要将所有视图根绘制到位图。试试这个库：[https](https://github.com/jraska/Falcon) ://github.com/jraska/Falcon它可以将 Dailogs 捕获到您的屏幕截图中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-21T15:42:31.490

这是在打开的 DialogFragment 中工作的。

```
View v1 = ((ViewGroup) (((MyActivity)getActivity()).findViewById(android.R.id.content)));
v1.setDrawingCacheEnabled(true);
Bitmap bitmapParent = Bitmap.createBitmap(v1.getDrawingCache());
v1.setDrawingCacheEnabled(false);

// dialogView is the inflated view of the DialogFragment
dialogView.setDrawingCacheEnabled(true);
Bitmap bitmapDialog = Bitmap.createBitmap(dialogView.getDrawingCache());
dialogView.setDrawingCacheEnabled(false);

Canvas canvas = new Canvas(bitmapParent);
Paint paint = new Paint(Paint.FILTER_BITMAP_FLAG);
canvas.drawBitmap(bitmapDialog, 0, 0, paint);   

// Activity and dialog captured!!
bitmapParent.compress(Bitmap.CompressFormat.PNG, 100, new FileOutputStream(new File(directory, name))); 
```

# c# - foreach 语句计数

> ID：16089226
> 
> 赞同：0
> 
> 时间：2013-04-18T17:12:10.303
> 
> 标签：c#

如何获取`foreach`语句的执行计数/次数？

例如，如果我有这样的声明：

```
test.testMethod.Foreach(x => x.testMethod2.Add(test_arg)); 
```

我想知道`Add`已经运行的次数，基本上是`x`.

最简单的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T17:15:15.517

`Foreach`中没有`LINQ`。你在谈论[`List<T> ForEach`](http://msdn.microsoft.com/en-us/library/bwabdf9z.aspx)。使用`Count`on`List<T>`获取项目数

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T17:14:58.250

简单地说[`Count()`](http://msdn.microsoft.com/en-us/library/bb338038.aspx)：

```
test.testMethod.Count() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T17:17:11.740

我认为您在每次迭代中都需要您的项目索引：

```
 var index = 0;
  test.testMethod.Foreach(x =>{ 
     ++index;   
     x.testMethod2.Add(test_arg);
  }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T17:16:51.270

您可以使用包含计数增量的多行 lambda。

# xml - ASP.NET MVC 4 尝试将数据从 xml 文件加载到下拉列表中

> ID：16089230
> 
> 赞同：0
> 
> 时间：2013-04-18T17:12:21.453
> 
> 标签：xml, asp.net-mvc

我正在尝试将 xml 文件加载到 ASP.NET MVC 中的下拉列表中。

在`layout.cshtml`我有这样的dropdwnlist

```
@Html.DropDownList("Market", ViewBag.Market as SelectList,  new { id = "Market" }) 
```

在控制器中，我从 xml 文件中读取并分配如下：

```
public ActionResult Index()
{
    DataSet marketDS = new DataSet();
    marketDS.ReadXml(Server.MapPath("~/Content//XmlData/Markets.xml"));

    EnumerableRowCollection<DataRow> DV1 = marketDS.Tables["Market"].AsEnumerable();

    ViewBag.Market= new SelectList(DV1.ToList<DataRow>(), "ID", "Value");
    return View();
} 
```

我收到此错误：

> DataBinding：“System.Data.DataRow”不包含名为“ID”的属性。

但我可以在 DV1 中看到它已从 xml 文件中读取并包含 ITEM Array 以及 xml 文件中的所有项目。

我是 ASP.NET MVC 的新手，不知道自己在做什么......过去使用 webforms 将数据绑定到 .cs 文件中的下拉列表非常容易。这里很混乱。有什么帮助吗？

我是这样解决的

//加载 DropDownList 市场数据集的值 marketDS = new DataSet(); marketDS.ReadXml(Server.MapPath("~/Content//XmlData/Markets.xml"));

```
 EnumerableRowCollection<DataRow> DR1 = marketDS.Tables["Market"].AsEnumerable();

        List<string> marketList=new List<string>();
        foreach (DataRow dr in DR1)
        {
            marketList.Add(dr.ItemArray[1].ToString());
        }
        ViewBag.Market = new SelectList(marketList.AsEnumerable().ToList()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T18:04:43.077

我将在这里采取稍微不同的方法，并使用`DropDownListFor`HTML 帮助程序。

在您的**ViewModel**中：

```
public SelectList Items { get; set; } 
```

在您的**控制器**中：

```
var model = new YourViewModel();
model.Items = new SelectList(DV1.ToList<DataRow>(), "ID", "Value");
return View("~/Views/Home/Index.cshtml", model); 
```

在您的**网页**上：

```
@Html.DropDownListFor(m => m.Items, Model.Items) 
```

# javascript - 使用 D3.JS 访问 JS 对象中的“值”

> ID：16089231
> 
> 赞同：1
> 
> 时间：2013-04-18T17:12:31.390
> 
> 标签：javascript, object, d3.js

我正在使用 D3.js 并尝试在单击按钮时按升序/降序对条形图进行排序。但是我遇到了让 sortBars 函数从我的对象返回正确值的问题。

```
var sortOrder = false;
var sortBars = function() {
sortOrder = !sortOrder;
svg.selectAll("rect")
    .sort(function(a, b) {
        if (sortOrder) {
            return d3.ascending(a, b);
        } else {
            return d3.descending(a, b);
        }
    })
    .transition()
    .delay(function(d, i) {
        return i * 50;
    })
    .duration(1000)
    .attr("x", function(d, i) {
        return xScale(i);
    });
}; 
```

当它返回*xScale(i)*时，我知道它没有正确引用我的数据集。我试过把它作为*i.value*（这是我在我的数据集中命名的）。我知道这是不正确的，但是当我将其更改为那个时，我至少可以让杆移动。我将如何访问正确的数据？

我为此开发了一个[JSFiddle](http://jsfiddle.net/enigmarm/3HL4a/)。随意玩弄它。目前，“排序”按钮没有任何效果（因为该函数尚未正确访问数据）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T17:53:55.027

我认为你很接近。xscale 应该使用 i - 这是列表中基准的位置（不是 d 中的基准）。但是，您的排序正在尝试对数据对象进行排序，而不是对值进行排序。尝试这个：

```
.sort(function(a, b) {
    if (sortOrder) {
        return d3.ascending(a.value, b.value);
    } else {
        return d3.descending(a.value, b.value);
    }
}) 
```

我认为对于两个对象，不确定哪个更大。并且升序和降序函数不带访问器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T17:48:55.873

您的代码几乎很好，只有两个细节：

比较器函数必须返回正数、负数或零。在您的代码中，您正在比较数据项，而不是它们的值：

```
function sortItems(a, b) {
   if (sortOrder) { return a.value - b.value; }
   return b.value - a.value;
}

svg.selectAll('rect')
.sort(sortItems)
// update the attributes 
```

sortBars 方法不起作用。我更喜欢使用 d3 绑定事件：

```
// Bind the event 'onclick' to the sortBars functions
d3.select('#sort').on('click', sortBars); 
```

我分叉了你的 jsFiddle 并适应了它的工作：http: [//jsfiddle.net/pnavarrc/3HL4a/4/](http://jsfiddle.net/pnavarrc/3HL4a/4/)

**参考**

*   [https://github.com/mbostock/d3/wiki/Selections#wiki-sort](https://github.com/mbostock/d3/wiki/Selections#wiki-sort)

# c# - 选择具有关联字符串值的子列表

> ID：16089233
> 
> 赞同：0
> 
> 时间：2013-04-18T17:12:36.693
> 
> 标签：c#, linq

假设我有以下内容：

```
public class ClassA
{
    public string Description {get;set;}
    public List<Product> Products {get;set;}
}

public class ClassB
{
    public string Description {get;set;}
    public Product SingleProduct {get;set;}
}

public class ClassC
{
    public List<ClassA> ListOfAs {get;set;}
    public List<ClassB> BreakDownListOfAs()
    {
        // This is the critical point
    }
} 
```

在标记的关键点，我想返回一个`ClassB`通过检查`ListOfAs`和分解它创建的实例列表，这样每个实例`ClassB`都有一个产品，并且`Description`来自它所在的`ClassA`实例`Product`。

例如，如果我有：

```
var ListOfAs = new List<ClassA> {
    new ClassA {
        Description = "foo",
        Products = new List<Product> { p1, p2 }
    },
    new ClassA {
        Description = "bar",
        Products = new List<Product> { p3, p4 }
    }
}; 
```

那么返回值`ClassC.BreakDownListOfAs()`应该匹配：

```
new List<ClassB> {
    new ClassB { Description = "foo", Product = p1 },
    new ClassB { Description = "foo", Product = p2 },
    new ClassB { Description = "bar", Product = p3 },
    new ClassB { Description = "bar", Product = p4 },
} 
```

我知道我通常会`.SelectMany()`用于投影子列表，但我无法弄清楚如何使用父对象中的字符串来实现投影子元素的组合。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T17:22:15.327

在 LINQ 方法链中，它看起来像这样：

```
return ListOfAs
    .SelectMany(a => a.Products,
                (a, p) => new ClassB
                                {
                                    Description = a.Description,
                                    SingleProduct = p
                                })
    .ToList(); 
```

诀窍是使用 ClassA 实例中的描述和 ClassA 列表中的 Product 在结果选择器中创建对象。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-18T17:18:30.280

使用 LINQ 语法非常简单：

```
var query = from a in listOfAs
            from p in a.Products
            select new ClassB
            {
                Description = a.Description,
                SingleProduct = p
            };

var result = query.ToList(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T17:28:39.067

```
IEnumerable<ClassB> breakdown =
    ListOfAs.Select(a => a.Products.Select(
                         p => new ClassB { Description = a.Description,
                                           SingleProduct = p }))
    .SelectMany(b => b); 
```

# ruby - 解析文件时如何找到完成百分比？

> ID：16089235
> 
> 赞同：2
> 
> 时间：2013-04-18T17:12:44.410
> 
> 标签：ruby

如何打印我已经解析的文件的百分比。我正在解析一个文本文件，所以我使用：

```
file.each_line do 
```

有没有类似的方法`each_with_index`可用于字符串？

这就是我目前`each_with_index`用来查找完成百分比的方式：

```
amount = 10000000
file.each_with_index do |line, index|
      if index == amount
        break
      end
      print "%.1f%% done" % (index/(amount * 1.0) * 100)
      print "\r" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T18:45:02.130

要获得行数，您可以做一些不同的事情。

如果您使用的是 Linux 或 Mac OS，请利用底层操作系统并询问文件中有多少行：

```
lines_in_file = `wc -l #{ path_to_file_to_read }` 
```

`wc`速度极快，可以告诉你关于线条、单词和字符的信息。`-l`指定行。

如果您想在 Ruby 中执行此操作，您*可以*使用`File.readlines('/path/to/file/to/read')`或`File.read('/path/to/file/to/read').lines`，但要非常小心。两者都会将整个文件读入内存，并且，如果该文件大于您的可用 RAM，那么您只是将您的机器打得慢死。所以，不要那样做。

而是使用类似的东西：

```
lines_in_file = 0
File.foreach('/path/to/file/to/read') { lines_in_file += 1 } 
```

运行后，`lines_in_file`会保存文件中的行数。`File.foreach`非常快，几乎等于 using`File.readlines`并且可能比 快`File.read().lines`，而且它一次只读取一行，所以你不会填满你的 RAM。

如果您想知道刚从文件中读取的行的当前行号，可以使用 Ruby 的`$.`.

不过，您担心“文件的百分比”。一个潜在的问题是行是可变长度的。根据您对它们所做的事情，行长可能会对您的进度条产生很大影响。您可能希望查看文件的实际长度并跟踪读取每行所消耗的字符数，因此您的进度基于字符的百分比，而不是行的百分比。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-18T17:34:24.973

Get all the lines upfront, then display the progress as you perform whatever operation you need on them.

```
lines = file.readlines
amount = lines.length

lines.each_with_index do |line, index|
  if index == amount
    break
  end
  print "%.1f%% done" % (index/(amount * 1.0) * 100)
  print "\r"
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T19:56:30.977

无需事先加载文件，您可以使用`size`and`pos`方法：

```
f = open('myfile')
while (line = f.gets)
  puts "#{(f.pos*100)/f.size}%\t#{line}"
end 
```

更少的行，更少的逻辑和精确到一个字节。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T17:26:56.183

Rather than reading the whole file and loading it in memory (as with `read` or `readlines`), I suggest to use `File.foreach` reading the file as a stream, line by line.

```
count = 0
File.foreach('your_file') { count += 1 }
idx = 0
File.foreach('your_file') do |line|
  puts "#{(idx+1).to_f / count * 100}%"
  idx += 1
end 
```

# eclipse - Eclipse 打开空白工作区

> ID：16089241
> 
> 赞同：3
> 
> 时间：2013-04-18T17:13:01.717
> 
> 标签：eclipse

我什至不确定在哪里寻找这个问题。发生的情况是，当我打开 Eclipse 时，它​​会打开一个空白工作区。哪个，然后我必须切换到我现在的那个。每次我现在打开 Eclipse 时都会发生这种情况。知道我应该在哪里解决这个问题吗？（日食朱诺）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T20:28:46.637

看看

*   eclipse 安装目录中的 eclipse.ini
*   用于启动 Eclipse 的快捷方式（如果有的话）。

如果其中任何一个包含[-data somePath](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.platform.doc.user/tasks/running_eclipse.htm)参数，则 eclipse 将始终将该路径作为工作区打开。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T18:20:24.157

进入 Eclipse 到**Window** -> **Preferences** -> **General** -> **Startup and Shutdown** -> **Workspaces**并激活复选框*“在启动时提示工作区”*并重新启动 Eclipse。

现在您可以在 Eclipse 上选择启动您最喜欢的工作区，并且您可以选择说“将其用作默认值并且不再询问”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-01T03:52:49.773

只需运行这个命令**eclipse.exe -data C:\Development\Eclipse\Workspace**

仅供参考，这是由于安装了一些插件。

# javascript - javascripts究竟是什么时候被解析和解释的？

> ID：16089242
> 
> 赞同：0
> 
> 时间：2013-04-18T17:13:03.740
> 
> 标签：javascript

如果它是重复的，请随时关闭这个问题（我找不到能准确回答这个问题的问题。）

专家总是建议将所有 javascript 文件放在 body 标记的底部（或在必要时放在之前）。这可以确保页面的其他元素（如 css、图像等）不会因为 javascript 文件而被阻止。

我的理解是浏览器会打开一些连接以下载资源。它以与下载任何其他资源相同的方式下载 javascript 文件。一旦它理解了它的一个 javascript 文件（通过查看类型），它就会启动一个新线程（Parser）并将这个文件提供给线程进行解析和解释。并继续下载其他文件。如果遇到另一个脚本，它会在创建的线程上排队。我的理解正确吗？还是浏览器在下载脚本文件的同一线程上开始解析，因此该线程上的后续下载被阻止，直到解析完成？

当 javascript 文件来自浏览器缓存时会发生什么？行为不同吗？

我希望所有浏览器（IE、Chrome、FF）的答案都是正确的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T17:20:18.390

将 javascript 放在页脚中的原因是它不会干扰在页面上创建的 HTML 数据。如果您需要包含一个包含函数的 javascript 文件，您可以将其包含在标题中而不会出现任何问题，您需要担心的更多的是*使用这些函数的代码。*

```
<head>
<script type="text/javascript>...</script>
<script type="text/javascript>...</script>
...
</head>

<body>
<p>some html here ... </p>
...

<script type="text/javascript">
Here goes your slow, time consuming script which may call the scripts above.
</script>
</body> 
```

# c - 用于 Delphi ShareMem 应用程序的 GCC dll

> ID：16089244
> 
> 赞同：0
> 
> 时间：2013-04-18T17:13:11.973
> 
> 标签：c, delphi, gcc

所以我有一个主机 Delphi 7 应用程序，它必须在它的 dll 中分配和销毁字符串。当然，dll也是用对象Pascal编写的，`ShareMem`首先使用并一直`Borlndmm.dll`放在它的文件夹中。

现在我需要用 C 重写这个 dll（最好是 mingw）并为主应用程序编译 dll，用 Delphi 7 编写。

怎样才能做到这一点？我需要用 C 重写 borland 内存管理器还是应该编写一些接口来使用它`borlndmm.dll`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T17:22:36.010

`Sharemem`当您在一个模块中使用 Delphi 堆进行分配，并在不同模块中使用相同的堆释放它们时，您需要使用。该`Sharemem`单元确保两个模块中的内存分配共享相同的分配器。

现在，您可以使用 Delphi 可执行文件和 Delphi DLL 来做到这一点，前提是可执行文件和 DLL 都使用相同版本的 Delphi 编译。但是你根本无法使用 Delphi 可执行文件和 C DLL 来做到这一点。您不能在 Delphi 中分配内存并期望您的 C DLL 能够释放它。C 运行时不会将 malloc/free 映射到对共享内存管理器的调用。

您的问题清楚地表明您想在 Delphi 中分配一个 Delphi 字符串并将其传递给 C DLL。然后在那个 C DLL 中释放它。好吧，您不能合理地期望这样做。Delphi 字符串必须由 Delphi 运行时管理。您的 C DLL 中没有该功能。

现在，您当然可以设计一种方法来充分模拟C 中的Delphi 运行时，以便您可以与字符串进行互操作。但我认为这是个坏主意。相反，您应该遵循标准互操作实践：

1.  安排在分配它的同一模块中释放内存。
2.  仅在两个模块之间传递标准互操作类型。即：整数类型、浮点类型、以null结尾的字符串指针。以及仅包含标准互操作类型的复合类型、记录和数组。

* * *

**更新**

你在评论中说：

> 问题是我没有 Delphi 应用程序的源代码。

这让你陷入了困境。您不能更改 DLL 的接口。解决方案是制作一个用 Delphi 7 编写的瘦包装 DLL。该包装 DLL 应该使用`Sharemem`并且可以创建被主机可执行文件破坏的字符串。包装 DLL 将来自主机可执行文件的任何请求转发给新的 C DLL。Delphi 7 包装器和新的 C DLL 之间的互操作遵循标准互操作指南。

包装 DLL 就是所谓的*适配器*。

# javascript - Javascript 在 Chrome 中从英国格式化日期时间创建新日期返回无效日期

> ID：16089247
> 
> 赞同：0
> 
> 时间：2013-04-18T17:13:31.573
> 
> 标签：javascript, google-chrome, date

我正在尝试调试导致 chrome 出现问题的问题。当英国格式的日期时间字符串传递给 Date 构造函数时，似乎会发生这种情况。我的系统全是 en-us 我只需要将浏览器设置更改为 en-uk 以进行测试，不确定这是否重要。

我已将问题简化为以下

```
<html>
<body>
<script>
    alert('hi')
    var inactiveDateValue = new Date("18/04/2013");
    alert(inactiveDateValue);
</script>
Testing some DateTime Functionality with JS.
</body>
</html> 
```

我已将我的语言设置为英语（英国）作为我的最高优先级。

编辑：我需要能够解析美国或英国的日期时间格式，因此该值可能是 04/18/2013 或 18/04/2013。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T17:39:53.493

**如果您的目标是将字符串DD/MM/YYYY**解析为 JavaScript `Date`，您可以执行以下操作：

```
var parseUKDate = function (source, delimiter) {
   return new Date(source.split(delimiter).reverse().join(delimiter))
};

var activeDateValue = parseUKDate("18/04/2013", "/");
alert(activeDateValue); 
```

# matlab - Matlab波分复用：？？？错误使用 ==> 保存 [save_network]

> ID：16089248
> 
> 赞同：0
> 
> 时间：2013-04-18T17:13:38.447
> 
> 标签：matlab, networking, wdm

我希望这能找到你。实际上，我一直在从 matlab 工具 WDM 中读取文件 create_network.m 并且我正在尝试创建一个网络，但我总是遇到同样的错误。这是我遵循的步骤和错误。

PS：在将mesh.mat加载到工作内存后，我也尝试了这个名称：'mesh.mat'。我也尝试了其他名称，但我总是遇到同样的问题。

> > create_network(9,'mesh') 网络是否有工资（y/n）：n

请给出节点 1 的事件节点：2 4

请给出节点 2 的事件节点：1 3 5

请给出节点 3 的事件节点：2 6

请给出节点 4 的事件节点：1 5 7

请给出节点 5 的事件节点：2 6 8 4

请给出节点 6 的事件节点：3 5 9

请给出节点 7 的事件节点：4 8

请给出节点 8 的事件节点：7 5 9

请给出节点 9 的事件节点：8 6

？？？使用 ==> 保存时出错 无法写入文件网格：权限被拒绝。

==> create_network>save_network 中的错误 161 save(name,'description','structure');

==> create_network 中的错误 97 varargout{1}=save_network(description,structure,varargin{2});

你能指导我解决这个问题吗？

无限感谢，

# amazon-web-services - 什么是 AWS DynamoDB 持久性 SLA？

> ID：16089254
> 
> 赞同：5
> 
> 时间：2013-04-18T17:13:54.307
> 
> 标签：amazon-web-services, amazon-s3, amazon-dynamodb

鉴于 S3 的持久性为 99.999999999% [1]，DynamoDB 的等效数字是多少？

[1] [http://aws.amazon.com/s3/](http://aws.amazon.com/s3/)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-18T21:53:32.450

这个问题暗示了一些不正确的事情。尽管 S3 有一个 SLA (aws.amazon.com/s3-sla)，该 SLA 引用了*可用性*(99.9%)，但没有引用*持久性*，或者 S3 中的对象丢失。

99.999999999% 的持久性数据来自 Amazon 对 S3*旨在*实现的目标的估计，并且没有相关的 SLA。

请注意，Amazon S3 旨在实现 99.99% 的可用性，但 SLA 的可用性为 99.9%。

Amazon 目前没有 DynamoDB SLA，我也不知道 Amazon 发布的任何关于 DynamoDB 中数据的预期或设计持久性的数据。考虑到这两个系统的性质、相对复杂性和目标，我怀疑它小于 S3（即，S3 旨在非常、非常安全地简单地存储数据对象；DynamoDB 旨在提供超快速的读取和写入一个可扩展的分布式数据库，同时还试图保证您的数据安全）。

Amazon 谈到客户使用 MapReduce 将 DynamoDB 备份到 S3。他们还说，一些客户使用 Redshift 备份 DynamoDB，Redshift 内置了 DynamoDB 兼容性。我还建议备份到 AWS 外存储，以消除您的 AWS 账户这一单点故障。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-19T03:24:43.033

尽管 DynamoDB 常见问题解答没有使用与我在下面的亮点中看到的完全相同的措辞，但 DynamoDB 和 S3 都设计为容错的，数据存储在三个设施中。

我无法在任何地方找到报告的确切数字，但从我确实掌握的信息来看，DynamoDB 看起来相当耐用（与 S3 相当），尽管这不会阻止它不时出现服务中断。请参阅此链接：

[http://www.forbes.com/sites/kellyclay/2013/02/20/amazons-aws-experience-problems-again/](http://www.forbes.com/sites/kellyclay/2013/02/20/amazons-aws-experiencing-problems-again/)

**S3 常见问题解答： http:** [//aws.amazon.com/s3/faqs/#How_is_Amazon_S3_design_to_achieve_99.999999999%_durability](http://aws.amazon.com/s3/faqs/#How_is_Amazon_S3_designed_to_achieve_99.999999999%_durability)

> 问：Amazon S3 的耐用性如何？Amazon S3 旨在为给定年份的对象提供 99.999999999% 的持久性。
> 
> 此外，Amazon S3 旨在承受两个设施中的数据并发丢失。

另请注意：S3 的“99.999999999%”数字超过给定年份。

**DynamoDB 常见问题解答：** [http ://aws.amazon.com/dynamodb/faqs/#Is_there_a_limit_to_how_much_data_I_can_store_in_Amazon_DynamoDB](http://aws.amazon.com/dynamodb/faqs/#Is_there_a_limit_to_how_much_data_I_can_store_in_Amazon_DynamoDB)

> 规模、可用性和耐用性
> 
> 问：Amazon DynamoDB 的可用性有多高？
> 
> 该服务在亚马逊久经考验的高可用性数据中心运行。该服务跨 AWS 区域中的三个设施复制数据，以在服务器故障或可用区中断的情况下提供容错。
> 
> 问：Amazon DynamoDB 如何实现高正常运行时间和持久性？
> 
> 为了实现较长的正常运行时间和持久性，Amazon DynamoDB 在一个 AWS 区域内的三个设施之间同步复制数据。

# powershell - Set-Service 在作为脚本的一部分执行时失败，但在手动运行时通过

> ID：16089260
> 
> 赞同：0
> 
> 时间：2013-04-18T17:14:18.730
> 
> 标签：powershell

作为脚本的一部分，我在 powershell 模块中有以下代码。

```
Set-Service -Name $ServiceName -ComputerName $ComputerName -Status $ServiceStatus -Confirm:$false -Verbose; 
```

当它在脚本中运行时，我收到以下错误

```
Set-Service : Service 'Service Name' cannot be configured due to the following error: The specified service does not exist as an installed service 
```

但是当作为我测试的一部分手动运行时，命令运行没有错误。

```
Set-Service -Name "Service Name" -ComputerName "machine name" -Status Stopped -Confirm:$false -Verbose; 
```

# android - how to convert byte valueto hex and then to decimal which is from bluetooth spp device as hex value in android

> ID：16089261
> 
> 赞同：0
> 
> 时间：2013-04-18T17:14:27.043
> 
> 标签：android, hex, decimal

how to convert 35 bytes of hex values to decimal coming from bluetooth serial port communnication.. i am using bluetooth chat application, the device sending data in hex format of 35 bytes.... my code giving output like: 10 oa ff 00 3c................11 my code.. Bluetoothservice.java

```
public void run() {

            Log.i(TAG, "BEGIN mConnectedThread");
            byte[] buffer = new byte[35];
            int bytes;            
            // Keep listening to the InputStream while connected
            while (true) {
                try {
                    // Read from the InputStream
                    bytes = mmInStream.read(buffer, 0, buffer.length); 
                    // Send the obtained bytes to the UI Activity
                    mHandler.obtainMessage(MainActivity.MESSAGE_READ, bytes, -1, buffer)
                            .sendToTarget();
                } catch (IOException e) {
                    Log.e(TAG, "disconnected", e);
                    connectionLost();
                    // Start the service over to restart listening mode
                    BluetoothService.this.start();
                    break;
                }
            } 
```

MainActivity.java

```
byte[] readBuf = (byte[]) msg.obj; 

String readMessage = BytesTrans.bytes2HexString(readBuf,msg.arg1);

mArrayAdapter.addAll(mConnectedDeviceName+":  "+ readMessage );

public static class BytesTrans {

        public static String bytes2HexString(byte[] b, int count) {
            String ret = "";
            //String str ="";
            for (int i = 0; i < count; i++) {
                String hex = Integer.toHexString(b[i] & 0xFF); 
                if (hex.length() ==1) {
                   hex = '0' + hex;               
                    }
                ret += hex.toUpperCase() + " ";                              
            }
            return ret;
        }` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T17:26:41.060

Try the following:

```
public static String bytes2String(byte[] b, int count) {
        String ret = "";
        //String str ="";
        for (int i = 0; i < count; i++) {
            String myInt = Integer.toString((int)(b[i] & 0xFF)); 

            ret.append(myInt + " ");                             
        }
        return ret;
    } 
```

I think this may be what you are looking for.

# excel - 将字符串转换为单元格中的日期

> ID：16089263
> 
> 赞同：25
> 
> 时间：2013-04-18T17:14:32.117
> 
> 标签：excel, date-format, worksheet-function

我在 Excel 中有 100.000 行数据。有些字段是日期，但 Excel 中的字段是文本。我需要这些数字格式的字段，包括日期和时间（例如 21.10.2011 13:10:50）。格式化单元格不起作用，因为这不会更改数据类型。我可以用公式选择日期和时间，但不能将它们放在同一个单元格中。

所以我正在寻找的是计算日期数字表示的公式（如果您将日期格式化为数字，您会看到该公式）。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-04-18T17:16:50.847

你试过这个`=DateValue()`功能吗？

要包含时间值，只需将函数相加即可：

`=DateValue(A1)+TimeValue(A1)`

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-04-18T17:29:41.713

为了适应您拥有的两种数据场景，您将需要使用它：

```
datevalue(text(a2,"mm/dd/yyyy")) 
```

这将为您提供 Excel 在日期或文本数据类型中具有的单元格的日期数字表示。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-26T07:43:01.223

我为此苦苦挣扎了一段时间，在帖子上得到了一些帮助后，我想出了这个公式，参考的单元格在`=(DATEVALUE(LEFT(XX,10)))+(TIMEVALUE(MID(XX,12,5)))`哪里`XX`。

我遇到过许多其他论坛，有人问同样的问题，对我来说，这似乎是最简单的答案。这将返回从该格式复制的文本，`2014/11/20 11:53 EST`并将其转换为日期/时间格式，以便可以从最旧到最新排序。它适用于短日期/长日期，如果您想要时间，只需格式化单元格以显示时间，它就会显示。希望这可以帮助像我一样四处寻找的人。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-11-14T15:29:38.140

最好的解决方案是使用 DATE() 函数并使用 RIGHT()、MID() 和 LEFT() 函数从字符串中提取 yy、mm 和 dd，最终将是一些 DATE(LEFT(),MID(),RIGHT ())，[这里有详细信息](https://exceljet.net/formula/convert-text-to-date)

# java - 在 JAXB 解组发生之前 Java-WS XML 序列化失败

> ID：16089270
> 
> 赞同：1
> 
> 时间：2013-04-18T17:14:58.890
> 
> 标签：java, wcf, jaxb, xml-serialization, jax-ws

在我的环境中，我有使用 JAX-WS 和 basicHttpBinding 的客户端（java 6）调用 wcf（.Net 3.5）wcf 服务。

我有一些从 wcf 服务返回的无效 xml 字符作为字符串值。

我添加了自定义 JAXB 转换器，例如

```
<jaxb:javaType name="java.lang.String" 
        xmlType="xs:string"
        parseMethod="MyClass.parseStringToSafeXmlString" 
        printMethod="MyClassprintStringToSafeXmlString" /> 
```

MyClass 有方法

```
 public static String parseStringToSafeXmlString(String value) {
      return stripNonValidXMLCharacters(value);
  }    

public static String printStringToSafeXmlString(String value) {
    return stripNonValidXMLCharacters(value);
} 
```

Where `stripNonValidXMLCharacters`- 一些删除无效字符的方法（不测量它的作用）。

但是当我收到带有无效 xml 字符的字符串时，我的代码在**调用****之前`parseStringToSafeXmlString`**失败并出现异常（对于有效字符串，调用方法并且我停止了断点。

> 原因：javax.xml.stream.XMLStreamException: ParseError at [row,col]:[1,834]**消息：字符引用“”是无效的 XML 字符。** 在 com.sun.org.apache.xerces.internal.impl.XMLStreamReaderImpl.next(XMLStreamReaderImpl.java:594) ~[?:1.6.0_24] 在 com.sun.xml.internal.ws.util.xml.XMLStreamReaderFilter。 next(XMLStreamReaderFilter.java:81) ~[?:1.6.0_24] at com.sun.xml.internal.bind.v2.runtime.unmarshaller.StAXStreamConnector.bridge(StAXStreamConnector.java:181) ~[?:1.6.0_24 ] 在 com.sun.xml.internal.bind.v2.runtime.unmarshaller.UnmarshallerImpl.unmarshal0(UnmarshallerImpl.java:349) ~[?:1.6.0_24] 在 com.sun.xml.internal.bind.v2.runtime .BridgeImpl.unmarshal(BridgeImpl.java:109) ~[?:1.6.0_24] at com.sun.xml.internal.bind.api.Bridge.unmarshal(Bridge.java:222) ~[?:1.6.0_24]在 com.sun.xml.internal.ws.message.stream.StreamMessage.readPayloadAsJAXB(StreamMessage.java:249) ~[?:1.6.0_24] 在 com.sun.xml.internal.ws.client.sei。ResponseBuilder$Body.readResponse(ResponseBuilder.java:458) ~[?:1.6.0_24] at com.sun.xml.internal.ws.client.sei.SyncMethodHandler.invoke(SyncMethodHandler.java:110) ~[?:1.6 .0_24]

所以我有两个问题：

1.  我该如何解决？
2.  我可以（以及如何）在失败之前（可能在 xml 序列化程序启动**之前**`stripNonValidXMLCharacters`）运行我的`any_other_remove_invalid_chars`方法吗？

 **非常感谢！！！**

# java - equals() 方法的工作原理

> ID：16089282
> 
> 赞同：11
> 
> 时间：2013-04-18T17:15:41.237
> 
> 标签：java, equals

我正在深入研究 Java 的基础知识。[我从这篇文章](http://www.ibm.com/developerworks/java/library/j-jtp05273/index.html)中推断，Java 的“equals”方法意味着，如果两个对象相等，那么它们必须具有相同的 hashCode()。

这是我的例子。

```
public class Equals {

    /**
     * @param args
     */
    public static void main(String[] args) {
        String a = new String("a");
        String b = new String("a");
        System.out.println("a.hashCode() "+a.hashCode());
        System.out.println("b.hashCode() "+b.hashCode());
        System.out.println(a == b);
        System.out.println(a.equals(b));
    }

} 
```

**输出：**

a.hashCode() 97
b.hashCode() 97
假
真

实际的 Java 语言 'equals' 方法：

```
 public boolean equals(Object obj) {
    return (this == obj);
  } 
```

在我上面的示例中，*a.equals(b)*返回了 true，这意味着条件 'a==b' 得到满足。但是为什么在那个例子中'a==b'返回假？

hashCode 和 address 不是一回事吗？此外，当我们说“a==b”或其他内容时，是否比较了“hashCode”？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-18T17:18:28.983

该类`String`已覆盖该`equals()`方法。请遵循[字符串 equals()](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#equals(java.lang.Object))文档。

*a.equals(b) 已返回 true，表示满足条件 a==b*

这是类中的默认实现`equals()`，`Object`并且`String`类已经覆盖了默认实现。当且仅当参数不为 null 并且是表示与此对象相同的字符序列的 String 对象时，它才返回 true。

*hashCode 和 address 不是一回事吗？*

不必要。进一步阅读[hashCode()](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#hashCode%28%29)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-18T17:19:26.673

Java 中的`==`运算符比较对象引用以查看它们是否引用同一个对象。因为你的变量`a`和`b`引用不同的对象，它们根据`==`.

并且该`hashCode`方法不会返回 中的地址`String`，因为该类已[被覆盖`hashCode`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#hashCode%28%29)。

此外，该[`equals`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#equals%28java.lang.Object%29)方法已实现`String`用于比较字符串的内容；这就是为什么`a.equals(b)`回到`true`这里。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-18T17:17:50.483

**不，哈希码和地址不一样。**

因为 a==b 没有比较哈希码。

**是的，当我们说 a==b 时，会比较其他东西。**

（这也不是地址，真的，但它足够接近）。

**此外，仅仅因为“相等的对象具有相等的哈希码”并不意味着“相等的哈希码意味着相等的对象”。**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-18T17:18:51.387

a.equals(b) 与 a==b 不同。

a.equals(b) 根据 equals() 实现检查两个对象是否相等。

a==b 检查两个对象是否具有相同的引用。

如果 a==b 为真，则 a.equals(b) 必须为真，因为它们引用的是同一个对象，反之则不然。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-18T17:19:19.987

String 类覆盖了 Object 类的 equals() 方法**的默认实现。**您提供的 equals 方法代码不是来自 String 类，而是来自 Object 类，它被 String 类实现覆盖，它**检查两个对象的内容是否相同。**

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-18T17:20:47.087

对象的哈希码意味着被覆盖。

对于 String 类，使用的公式如下：

s[0]*31^(n-1) + s[1]*31^(n-2) + ... + s[n-1]

我鼓励您搜索为什么 31 被用作乘数而不是其他数字。

覆盖哈希码的一般经验法则是，对于不同的对象，哈希码应该尽可能不同。

为此，建议您在计算哈希值时考虑对象的每个重要字段。

注意：只是一个无关的思考（来源：Effective Java）：考虑以下哈希码的实现

```
int hashcode(){
     return 10;
} 
```

这是一个有效的实现，但它也是最糟糕的实现。阅读为什么。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-18T17:20:46.283

A 和 B 是两个独立的对象，`String`由于`hashCode()`. `==`只是检查左右两侧是否共享相同的参考。它不调用`Object`'s`equals()`方法。

所以，不，散列和对象引用*不是*一回事。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-07-20T19:24:07.900

```
public class TestEquals {
    /**
     * @param args
     */
    public static void main(String[] args) {
        String a = new String("a"); 
        String b = new String("a");
        System.out.println("a.hashCode() " + a.hashCode());
        System.out.println("b.hashCode() " + b.hashCode());

        // Checks the reference which is something like the 
        // address & address is different from hash code which can be overriden
        System.out.println(a == b);

        // It returns true if and only if the argument is not null 
        // and is a String object that represents the same sequence 
        // of characters as this object. (String Implementation of equals)
        System.out.println(a.equals(b));
    }
} 
```

输出：

```
a.hashCode() 97
b.hashCode() 97
false
true 
```

# facebook - Java Script 中的 Facebook 扩展权限错误

> ID：16089283
> 
> 赞同：0
> 
> 时间：2013-04-18T17:15:41.727
> 
> 标签：facebook, permissions, fb.ui

如果用户想要使用某些功能，我的应用程序想要请求扩展权限。我无法弹出 FB.UI 对话框。我的代码如下（它看起来并不复杂）：

```
function getPublishPermission(appId){
 FB.init({ app_id:appId, cookie:true, status:true, oauth:true });
 var obj = {
     method: 'permissions.request',
     perms: 'publish_stream',
     display: 'iframe'
 };
 FB.ui(obj, earnCallback);
} 
```

我收到一条错误消息：“发生错误。请稍后再试。” 我使用范围而不是烫发具有相同的结果。appId 正确传递（当我硬编码 appId 时出现同样的错误）。沙盒模式已关闭。我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T00:43:35.330

原来不是app_id，而是appId: FB.init({ appId:appId, cookie:true, status:true, oauth:true });

# java - FTP 下载在文件 #146 处停止

> ID：16089286
> 
> 赞同：-1
> 
> 时间：2013-04-18T17:15:56.900
> 
> 标签：java

我编写了这个类（来自示例）来下载远程 FTP 文件夹中包含的所有文件的标题。它运行良好，但是当它接近下载文件 #146 时，它会因 NullPointException 而停止。文件#146 存在，实际上我可以将其作为单个文件下载。

在remotePathLong 方法中，所有远程文件夹都写在一行中，并用空格字符隔开。

```
public void downloadHeader(String remotePathLong, String destPath, int bytes) {

    String remotePath;
    FTPFile[] fileList;
    String[] fileNameList;

    FTPClient ftpClient = new FTPClient();
    try {
        ftpClient.connect(server);
        ftpClient.login(user, pass);
        ftpClient.enterLocalPassiveMode();
        ftpClient.setFileType(FTP.BINARY_FILE_TYPE);

        int indice = 0;
        int iP = 1;
        File downloadFile;
        String destFile;
        String remoteFile;
        byte[] bytesArray;
        int bytesRead = -1;
        while ((remotePath = getPath(remotePathLong, iP)) != null) {
            System.out.println("Loading file list from the server.....");
            fileNameList = ftpClient.listNames(remotePath);
            for (String file : fileNameList) {
                indice += 1;
                System.out.println(indice + " - Downloading: " + file);

                //Select files
                destFile = destPath.concat(file);

                downloadFile = new File(destFile);
                outputStream = new BufferedOutputStream(new FileOutputStream(downloadFile));

                //Download remote file (from ftp)
                remoteFile = remotePath.concat(file);

                inputStream = ftpClient.retrieveFileStream(remoteFile);
                bytesArray = new byte[bytes];
                bytesRead = inputStream.read(bytesArray);
                outputStream.write(bytesArray);

                //Save into file

                outputStream.close();
                inputStream.close();
                iP += 1;
            }
        }

    } catch (IOException ex) {
    } final{
        try {
            if (ftpClient.isConnected()) {
                ftpClient.logout();
                ftpClient.disconnect();
            }
        }
        catch (IOException ex1) {
            System.out.println("Error: " + ex1.getMessage());
        }
} 
```

当它到达 bytesRead = inputStream.read(bytesArray) 时，在迭代 #146 时它会给出错误。但是，如果在同一迭代中我重新初始化它的工作连接。请问有人有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T19:31:25.403

由于网络流量或文件大小恰好是第 146 位，您的连接可能会超时。你能打印第 146 个文件名并检查它的大小吗？您还可以增加 FTP 连接超时时间

```
ftpClient.setControlKeepAliveTimeout(300); // set timeout to 5 minutes 
```

# javascript - Javascript 新手：iOS、Android 或桌面 Javascript 优化

> ID：16089287
> 
> 赞同：-2
> 
> 时间：2013-04-18T17:15:57.930
> 
> 标签：javascript, user-agent

我最近开始接触 Javascript。不是很多，但我想要优化和提示是否有更好的方法来处理这个脚本：

```
 <script type="text/javascript">
    function fnIsAppleMobile() 
    {
       if (navigator && navigator.userAgent && navigator.userAgent != null) 
       {
        var strUserAgent = navigator.userAgent.toLowerCase();
        var arrMatches = strUserAgent.match(/(iphone|ipod|ipad)/);
        var arrMatches2 = strUserAgent.match(/(android)/);
        if (arrMatches) {
             document.write("<b>You are on iOS!</b>"); }
        else if (arrMatches2) {
             document.write("<b>You are on Android!</b>"); }
        else { 
             document.write("<b>You are likely on a computer.</b>")}
       }
    }

var bIsAppleMobile = fnIsAppleMobile();
</script> 
```

此脚本结束的方式不可能是最佳的。有什么建议吗？

非常感谢您的耐心等待。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T17:27:38.313

A`function`当你使用它时，应该返回一个值。在这种情况下，我可能会认为您期望布尔值更具体。

你可以像这样改进你的代码：

```
<script type="text/javascript">
function fnIsAppleMobile() 
{
   var blnReturn = false;

   if (navigator && navigator.userAgent && navigator.userAgent != null) 
   {
    var strUserAgent = navigator.userAgent.toLowerCase();
    var arrMatches = strUserAgent.match(/(iphone|ipod|ipad)/);
    if (arrMatches) {
         blnReturn = true;
    }
   }

   // True if this is Apple Mobile; false if it's something 
   return blnReturn;
}

// Store it in a variable
var bIsAppleMobile = fnIsAppleMobile();

// Or use it directly where you need it:
if (fnIsAppleMobile()) {
    alert("Cool gadget");
}
</script> 
```

我的建议；从不使用`document.write`. 至少在您处理[DOM时不会。](http://en.wikipedia.org/wiki/Document_Object_Model)如果您需要输出一些文本，请尝试将其作为文本输出到 DOM 节点内。

# php - 使用 PHP 将表单数组数据插入 MySQL

> ID：16089291
> 
> 赞同：0
> 
> 时间：2013-04-18T17:16:05.253
> 
> 标签：php, mysql, arrays

我对 PHP 和 MySQL 都很陌生，希望能得到一些帮助。

我想要实现的目标：使用下面的表格将时间表存储到 MySQL 表中，该表格应将每天的数据发布到单独的行中，同时为输入的每一天保持相同的员工姓名。用户可以选择在表单中添加额外的天数——最多 7 天。我已经在不使用数组的情况下测试了所有内容，并且能够毫无问题地将数据存储到表中。

HTML：

```
<form id="timesheet" method="post" action="timekeep.php">
        <fieldset>
        <h1>Employee Info</h1>
        <ul>
            <li>
                <label>First Name:</label>
                <input name="firstname" type="text">
            </li>
            <li>
                <label>Last Name:</label>
                <input name="lastname" type="text">
            </li>
        </ul>
        </fieldset>
        <fieldset>
        <h1>Time Info</h1>
            <h3>Day: 1</h3>
            <ul>
                <li>
                    <input name="date[]" type="text">
                </li>
                <li>
                    <input name="straighthours[]" type="number">
                </li>
                <li>
                    <input name="overtimehours[]" type="number">
                </li>
                <li>
                    <input name="premiumhours[]" type="number">
                </li>
                <li>
                    <input name="perdiem[]" type="number">
                </li>
            </ul>
            <h3>Day: 2</h3>
            <ul>
                <li>
                    <input name="date[]" type="text">
                </li>
                <li>
                    <input name="straighthours[]" type="number">
                </li>
                <li>
                    <input name="overtimehours[]" type="number">
                </li>
                <li>
                    <input name="premiumhours[]" type="number">
                </li>
                <li>
                    <input name="perdiem[]" type="number">
                </li>
            </ul>

        </fieldset>

        <input id="submit" name="submit-time" type="submit" value="Submit Time">

    </form> 
```

PHP：

```
$sql_connection = mysql_connect($dbhost, $dbuser, $dbpass) OR DIE ("Unable to connect to database! Please try again later.");

mysql_select_db($dbuser, $sql_connection);

$sql = "INSERT INTO table (
            Date,
            FirstName,
            LastName,
            StraightHours,
            OvertimeHours,
            PremiumHours,
            TotalHours,
            PerDiem
        )
        VALUES (".
            PrepSQL($date) . ", " .
            PrepSQL($firstName) . ", " .
            PrepSQL($lastName) . ", " .
            PrepSQL($straightHours) . ", " .
            PrepSQL($overtimeHours) . ", " .
            PrepSQL($premiumHours) . ", " .
            PrepSQL($totalHours) . ", " .
            PrepSQL($perDiem) . "
        )";

mysql_query($sql, $sql_connection);

mysql_close($sql_connection);

function PrepSQL($value)
{

    if(get_magic_quotes_gpc())
    {
        $value = stripslashes($value);
    }

    $value = "'" . mysql_real_escape_string($value) . "'";

    return($value);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T17:34:57.723

使用 PDO 对象会使这更容易，mysql_ 无论如何都是遗留的：

```
$db = new PDO($hostname,$username,$password);

$qry = "INSERT INTO table (
            Date,
            FirstName,
            LastName,
            StraightHours,
            OvertimeHours,
            PremiumHours,
            TotalHours,
            PerDiem
        )
        VALUES (:date, :firstname, :lastname, :straighthours, :overtimehours, :premiumhours, :totalhours, :perdiem)"; // colon variables will be bound to actual variable

$statement = $db->prepare($query); //prevents injection

// binds variables to place holder in query
$statement->bindValue(':firstname', $firstname);
$statement->bindValue(':lastname', $lastname);
$statement->bindValue(':straighthours', $straighthours);
$statement->bindValue(':overtimehours', $overtimehours);
$statement->bindValue(':premiumhours', $premiumhours);
$statement->bindValue(':totalhours', $totalhours);
$statement->bindValue(':perdiem', $perdiem);

$statement->execute();
$statement->closeCursor(); 
```

在通过以下方式将任何内容传递给 sql 之前，您可以使用 php 进行进一步的输入检查：

```
trim(strip_tags(htmlentities($firstname))); 
```

PDO 更易于使用和理解 IMO

更新：

[PDO 教程](https://stackoverflow.com/questions/1943069/are-there-good-tutorials-on-how-to-use-pdo)

更新#2：

对于每天使用数组的附加功能，您可以执行以下操作：

```
<input type="text" name="firstname1">

// do this for all fields then
$workingday1 = array();
$workingday1['firstname'] = $_GET['firstname1'];
// etc. for all the other fields 
```

然后您可以通过以下方式访问该字段：

```
$workingday1 = $_GET['workingDay1']; // or post or however you want to pass it
$firstname = $workingday['firstname']; 
```

之后，您可以随意修剪数据库。您可以拥有一个包含所有值的表格，并编辑您的选择以按员工或天或 w/e 显示。您还可以为每个员工创建一个表格，然后从这些表格中获取数据并以您喜欢的方式显示数据。

# android - 使用自定义适配器进行 XML 拉取解析

> ID：16089293
> 
> 赞同：0
> 
> 时间：2013-04-18T17:16:06.567
> 
> 标签：android, parsing, rss, listadapter

嗨，我对 android 平台非常陌生 ..off 晚了，我尝试使用 xml pull 解析器解析 rss 提要。当我使用 android 的标准 listview 布局时，我的代码运行良好。但是当我尝试实现时使用自定义列表视图和适配器的相同代码..没有显示数据..我用原始数据（不是从提要中获取的数据）测试了我的自定义适配器，它工作得很好..但是当我尝试使用这些信息时从提要中获取的列表视图没有显示任何数据..已经尝试了很长一段时间但无法完成..任何人都可以帮我确定我所犯的错误...请注意我的应用程序可以完美地与非互联网数据一起运行，但不能与从提要中获取的数据一起运行..我正在尝试从提要中提取标题标签..任何帮助将不胜感激...代码如下

MainActivity.java

```
public class MainActivity extends Activity {
    ArrayList<FeedData> headlines;
    List <String>title;
    FeedData data = new FeedData();
    List links;
    String msg =null;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        title = new ArrayList<String>();
        links = new ArrayList();
        headlines = new ArrayList<FeedData>();

        DownloadTask runner =new DownloadTask();
        runner.execute();

        for(int i=0;i<title.size();i++){
            msg=title.get(i).toString();
            data.setTitle(msg);
            headlines.add(data);
        }

         FeedAdapter adapter= new    FeedAdapter(MainActivity.this,R.layout.imagefeed,headlines);
        ListView list = (ListView)findViewById(R.id.lvMyFeed);
        list.setAdapter(adapter);  

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }
    public class DownloadTask extends AsyncTask<String,Integer,String> {

        @Override
        protected void onPreExecute() {
            // TODO Auto-generated method stub
            super.onPreExecute();
        }

        @Override
        protected String doInBackground(String... params) {
            // TODO Auto-generated method stub
        try{    URL url = new URL("http://www.pcworld.com/index.rss  ");
        XmlPullParserFactory factory = XmlPullParserFactory.newInstance();
        factory.setNamespaceAware(false);
        XmlPullParser xpp = factory.newPullParser();

            // We will get the XML from an input stream
        xpp.setInput(getInputStream(url), "UTF_8");

        boolean insideItem = false;

            // Returns the type of current event: START_TAG, END_TAG, etc..
        int eventType = xpp.getEventType();
        while (eventType != XmlPullParser.END_DOCUMENT) {
            if (eventType == XmlPullParser.START_TAG) {

                if (xpp.getName().equalsIgnoreCase("item")) {
                    insideItem = true;
                } else if (xpp.getName().equalsIgnoreCase("title")) {
                    if (insideItem)
                        title.add(xpp.nextText()); //extract the headline
                } else if (xpp.getName().equalsIgnoreCase("link")) {
                    if (insideItem)
                        links.add(xpp.nextText()); //extract the link of article
                }
            }else if(eventType==XmlPullParser.END_TAG &&   xpp.getName().equalsIgnoreCase("item")){
                insideItem=false;
            }

            eventType = xpp.next(); //move to next element
        }

    } catch (MalformedURLException e) {
        e.printStackTrace();
    } catch (XmlPullParserException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

        return null;
    }
        @Override
        protected void onPostExecute(String result) {
            // TODO Auto-generated method stub
            super.onPostExecute(result);

        }

        @Override
        protected void onProgressUpdate(Integer... values) {
            // TODO Auto-generated method stub
            super.onProgressUpdate(values);
        }
        public InputStream getInputStream(URL url) {
               try {
                   return url.openConnection().getInputStream();
               } catch (IOException e) {
                   return null;
                 }
            }

    }// end of DownloadTask class

      }` 
```

FeedData.java

```
 public class FeedData {
    String headlines;

    public FeedData()
    {

    }
    public FeedData(String title) {
        this.headlines=title;
    }

    public void setTitle(String title){
        this.headlines=title;
    }
    public String getTitle(){

        return headlines;
    }

       }`

      `FeedData.java
        public class FeedData {
    String headlines;

    public FeedData()
    {

    }
    public FeedData(String title) {
        this.headlines=title;
    }

    public void setTitle(String title){
        this.headlines=title;
    }
    public String getTitle(){

        return headlines;
    }

        } 
```

activity_main.xml

```
 <ListView
    android:id="@+id/lvMyFeed"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >
    </ListView>

    </LinearLayout> 
```

图片提要.xml

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <ImageView
    android:id="@+id/ivImg"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:layout_marginLeft="28dp"
    android:layout_marginTop="38dp"
    android:src="@drawable/ic_launcher" />

    <TextView
    android:id="@+id/tvFeed"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignTop="@+id/ivImg"
    android:layout_marginLeft="78dp"
    android:layout_marginTop="14dp"
    android:layout_toRightOf="@+id/ivImg"
    android:text="Headlines" />

    </RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T18:51:16.870

显示或设置您的`adapter`. `ListView`完成后`DownloadTask`意味着调用

```
 FeedAdapter adapter= new    FeedAdapter(MainActivity.this,R.layout.imagefeed,headlines);
  ListView list = (ListView)findViewById(R.id.lvMyFeed);
  list.setAdapter(adapter); 
```

在`onPostExecute`. 的行为`AsynchTask`是不同的线程，所以你`headlines` `title` `ArrayList`没有数据说明你的数据为什么没有显示在`ListView`. 所以在完成 DownloadTask 之后设置你的`adapter`. 希望这会帮助你。

# c# - FileStream 到字节 []：Windows XP 与 Windows 8

> ID：16089294
> 
> 赞同：11
> 
> 时间：2013-04-18T17:16:07.333
> 
> 标签：c#, windows-8, windows-xp

我最近不得不写一些代码：

*   UI 获取文件（图像）
*   转换为 `byte[]
*   将 上传`byte[]`到网站（使用`HttpWebRequest`.is `ContentType`）`multipart/form-data`
*   然后网站读取流，使用我随文件发送的参数，将其存储`byte[]`在数据库中。

然后在报告中使用该图像，用户可以随时下载该图像。这工作得很好，直到我们开始在 Windows XP 机器上测试它。每当我从 XP 电脑上传任何图像时，图像都不会显示。经过一些调试和测试并将其写入`multipart/form-data`文本文件后，我发现该`byte[]`文件在 Windows XP 与 Windows 8（甚至 7）上有所不同。生成的文件的大小也不同。

我将 VS2012 与 .Net 4.0 一起使用，并在 XP 电脑上安装（并再次修复）.Net 4。我只能认为这两个操作系统的编码方式不同，或者可能是 32 位操作系统和 64 位操作系统之间的差异。显然我不知道出了什么问题，甚至不知道从哪里开始。我想知道是否有人可以指出我正确的方向？

这是 UI 端代码：

```
//Wrapped around each parameter. The last boundary after the byte[] file >has been omitted.
string boundary = "----------------------------" + >DateTime.Now.Ticks.ToString("x");

//Creating the httpWebRequest as multipart with "POST" method.
httpWebRequest = (HttpWebRequest)WebRequest.Create(_webUploadUrl);
httpWebRequest.ContentType = "multipart/form-data; boundary=" + boundary;
httpWebRequest.Method = "POST";
httpWebRequest.KeepAlive = true;
httpWebRequest.Credentials = >System.Net.CredentialCache.DefaultCredentials;

//Upload stream will be built with all the parameters, followed by the >byte[] file.
Stream uploadStream = new System.IO.MemoryStream();

byte[] boundarybytes = System.Text.Encoding.ASCII.GetBytes(boundary + >"\r\n");

string formdataTemplate = "\r\n--" + boundary +
"\r\nContent-Disposition: form-data; name=\"{0}\";\r\n\r\n{1}";

//Parameters:
//Foreach parameter, Wrap in boundary
foreach (string key in _nvcParameters.Keys)
{
    string formitem = string.Format(formdataTemplate, key, >_nvcParameters[key]);
    byte[] formitembytes = System.Text.Encoding.UTF8.GetBytes(formitem);
    uploadStream.Write(formitembytes, 0, formitembytes.Length);
}

byte[] netBytes = System.Text.Encoding.ASCII.GetBytes("\r\n--");
uploadStream.Write(netBytes, 0, netBytes.Length);

//The actual file:           
uploadStream.Write(boundarybytes, 0, boundarybytes.Length);
string headerTemplate = "Content-Disposition: form-data; name=\"{0}\"; >filename=\"{1}\"\r\n Content-Type: application/octet-stream\r\n\r\n";
string header = string.Format(headerTemplate, "uplTheFile", _fileName);
byte[] headerbytes = System.Text.Encoding.UTF8.GetBytes(header);
uploadStream.Write(headerbytes, 0, headerbytes.Length);

//While file is greater than buffer, write to uploadStream.
byte[] buffer = new byte[1024];
int bytesRead = 0;
long fileSize = pFileStream.Length;            
long uploadedValue = 0;

while ((bytesRead = (pFileStream).Read(buffer, 0, buffer.Length)) != 0)
{
    uploadStream.Write(buffer, 0, bytesRead);
    Application.DoEvents();
}
httpWebRequest.ContentLength = uploadStream.Length;
//Close the original fileStream.
pFileStream.Close(); 
```

该网站使用UTF8。如果需要，我可以发布它，但由于`byte[]`s 不同，我认为问题可能就在那里。

* * *

@Ramhound 使用长？你指的是`fileSize`和`uploadedValue`变量吗？该代码是公司系统 UI 端的一部分，非常大，我刚刚开始了解某些部分的方法，无论如何，我已经检查了项目的属性，（如果那是检查的正确位置）。在构建时，平台目标是 x86。你说的是这个还是别的？抱歉，我仍然是一名学生，并且是 c# 的新手（与此相关）

我已经在 Windows 8 机器上打开了这两个文件。显然，win8 文件大小要大 6kb，并且包含更多字符。

这是数组的前几行。是相同的`_ncvParameters`（以及上传的文件，这是生成的 multipart-form 的第一部分（`ncvParameters`后面是文件的前几行`byte[]`）：

赢8：

> ------------------------------8d00a632401f30e 内容处置：表单数据；名称=“o”；
> 
> 25 ------------------8d00a632401f30e 内容处置：表单数据；名称=“k”；
> 
> 2913 ------------------8d00a632401f30e 内容处置：表单数据；名称="你";
> 
> 255 ------------------------------8d00a632401f30e 内容处置：表单数据；名称="f";
> 
> Blue hills.jpg ------------------8d00a632401f30e 内容处置：表单数据；名称=“米”；
> 
> 图像/jpeg ------------------8d00a632401f30e 内容处置：表单数据；名称="uplTheFile"; filename="Blue hills.jpg" 内容类型：application/octet-stream
> 
> ‰PNG
> 
> ```
> IHDR  €  à   5ÑÜä   sRGB ®Îé   gAMA  ±üa      pHYs  Ã  ÃÇo¨d  ÿ¥IDATx^ìýg—\7²­ëÿ÷¾gïî–§÷¤H9Š¢DR”—Ú{Ç6²”÷M‘yç¹V$™UÅ–úô&gt;÷|˜@ 
> ```
> 
> ∼ÌÄ2y×?oÝ¾øáíÛWþ±õŸ†[w€'õøû-pëÊßnïãº·ÃØ‡uxK¾í

操作系统：

> ------------------------------8d00a639ff7bf76 内容处置：表单数据；名称=“o”；
> 
> 25 ------------------8d00a639ff7bf76 内容处置：表单数据；名称=“k”；
> 
> 2913 ------------------8d00a639ff7bf76 内容处置：表单数据；名称="你";
> 
> 255 ------------------8d00a639ff7bf76 内容处置：表单数据；名称="f";
> 
> Blue hills.jpg ------------------8d00a639ff7bf76 Content-Disposition: form-data; 名称=“米”；
> 
> 图片/jpeg ------------------8d00a639ff7bf76 内容处置：表单数据；名称="uplTheFile"; filename="Blue hills.jpg" 内容类型：application/octet-stream
> 
> ‰PNG
> 
> ```
> IHDR         Ä‰   sRGB ®Îé   gAMA  ±üa    cHRM  z&  €„  ú   €è  u0  ê`  :˜  pœºQ<   IDATWc`    ªÕÈQ 
> ```
> 
> IEND®B`‚'èÊû:uÊžòÞ°Ë[=)Qä¡w¢%º2§Î~ó™‰¬½×f±¤~¯×1‰H$01#ùßÿâ‹ÿ¯¿¸äÿý‡‹— ü;üX§¿8(ýQ$?º$Ã“ÿþÃ©ÚêÀBTÿpà%•~ÖbºËá þÝü8ùŸ:å_ø(IÿGã‹þâ/Æ Cô¨Í.*›QV

* * *

@Xaqron - uploadStream 是一个`memoryStream`. 整个 multipart-form 被写入这个流，然后写入一个`byte[]`. 哪个被流式传输到`httpWebRequest`.

我很确定它是相同的图像。我试了两次只是为了确定。我今天将在办公室进行三次检查 - 是的，我现在已经多次检查了。相同的图像产生不同的大小和不同的`byte[]`字符。

* * *

好的，我想我找到了问题所在。这可能是有用的信息，但我什至认为这不是问题所在。上传的文件是一张图片，我调整了它的大小。调整大小的方法需要一个`byte[]`（我认为编码错误的那个），将其写入位图。`PixelFormat.Format32bppRgb`然后使用and将该位图“重绘”为新大小`InterpolationMode.HighQualityBicubic`：

```
if (pImage.Height < maxHeight && pImage.Width < maxWidth) return pImage;  
using (pImage)  
{  
    Double xRatio = (double)pImage.Width / maxWidth;
    Double yRatio = (double)pImage.Height / maxHeight;
    Double ratio = Math.Max(xRatio, yRatio);
    int nnx = (int)Math.Floor(pImage.Width / ratio);
    int nny = (int)Math.Floor(pImage.Height / ratio);
    System.Drawing.Bitmap cpy = new System.Drawing.Bitmap(nnx, nny, System.Drawing.Imaging.PixelFormat.Format32bppRgb);
    using (System.Drawing.Graphics gr = System.Drawing.Graphics.FromImage(cpy))
    {  
        gr.Clear(System.Drawing.Color.Transparent);

        gr.InterpolationMode = System.Drawing.Drawing2D.InterpolationMode.HighQualityBicubic;

        gr.DrawImage(pImage,
            new System.Drawing.Rectangle(0, 0, nnx, nny),
            new System.Drawing.Rectangle(0, 0, pImage.Width, pImage.Height),
            System.Drawing.GraphicsUnit.Pixel);
    }
    return cpy;
} 
```

我将`PixelFormat`模式更改为 'DontCare'`InterpolationMode`和`Default`. 抱歉，这很明显，但我认为这是由 .net 框架处理的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T12:28:32.953

Windows XP 和较新的操作系统（如 7 和 8）对事物进行不同的编码和解码。我可以为您建议的是在传输之前将您的字节数组编码为 BASE64。然后接收它并解码回您的字节数组。.Net 有简单的方法来编码和解码 base64。由于 base64 文本是 7 位 ascii，因此传输它不会有问题。

# php - php从twitter feed转换日期时间

> ID：16089296
> 
> 赞同：0
> 
> 时间：2013-04-18T17:16:25.727
> 
> 标签：php, datetime

嘿，我的 Twitter 提要有这个日期：

```
Tue Apr 16 17:39:59 +0000 2013 
```

问题是下面的这段代码似乎没有格式化它？

```
$date = new DateTime('Tue Apr 16 17:39:59 +0000 2013');
echo $date->format('Y-m-d H:i:s'); 
```

它只是显示为一个空白页。

我可能做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T17:19:47.410

尝试：

```
$date = DateTime::createFromFormat('D M j H:i:s O Y', 'Tue Apr 16 17:39:59 +0000 2013');
echo $date->format('Y-m-d H:i:s'); 
```

[看到它在行动](http://codepad.viper-7.com/krzIRu)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T17:21:42.627

试试这个

```
$date = 'Tue Apr 16 17:39:59 +0000 2013';
echo gmdate('Y-m-d H:i:s', strtotime($date)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T17:24:03.593

我已经用 php 在控制台应用程序上测试了你的代码并且工作正常。我认为您在浏览器中显示页面的代码可能有问题。您可以尝试的其他事情是检查页面的来源，看看是否显示在那里。顺便说一句，我使用的是 PHP 5.4.7

# php - 尝试测试 php 函数时没有返回任何内容

> ID：16089298
> 
> 赞同：-2
> 
> 时间：2013-04-18T17:16:49.567
> 
> 标签：php, testing, localhost

我正在尝试在我的浏览器中测试一个函数，但没有返回任何内容。我访问了链接`http://localhost/myfunctions.php?runFunction=writeJSON`
我的功能是：

```
function writeJSON()
{
    $myfile="testson.json";
    $fileout=fopen($myfile,'w') or die("Fatal: Can't open JSON file for writing");
    global $arrayForJSON;
    if(isset($arrayForJSON))
    {
        fwrite($fileout,json_encode($arrayForJSON));
        echo "done";
    }
    else echo "Error: could not write to JSON file";
    fclose($myfile);
} 
```

我在哪里弄错了，测试功能的正确方法是什么，或者我做错了什么？

该函数似乎没有运行，因为没有显示“完成”或“错误：无法写入 JSON 文件”，也没有对我的文件进行任何更改。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T17:21:35.830

如果要通过 get 运行函数，则需要包含 get 的代码...

```
//This is the function
function writeJSON()
{
    $myfile="testson.json";
    $fileout=fopen($myfile,'w') or die("Fatal: Can't open JSON file for writing");
    global $arrayForJSON;
    if(isset($arrayForJSON))
    {
        fwrite($fileout,json_encode($arrayForJSON));
        echo "done";
    }
    else echo "Error: could not write to JSON file";
    fclose($myfile);
}

// This will only call the function if ?runFunction=writeJSON
//is on the end of the URL
if(!empty($_GET["runFunction"])){
    if($_GET["runFunction"] == "writeJSON"){
        writeJSON(); // This line is the actual call to the function
    }
} 
```

但是，当然，如果您希望它在每次访问页面时都运行，只需添加

```
writeJSON(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T17:19:18.017

好吧，您需要运行该功能。在 url 中传递它不会做任何事情。

```
<?
function writeJSON()
{
$myfile="testson.json";
$fileout=fopen($myfile,'w') or die("Fatal: Can't open JSON file for writing");
global $arrayForJSON;
if(isset($arrayForJSON))
{
fwrite($fileout,json_encode($arrayForJSON));
echo "done";
}
else echo "Error: could not write to JSON file";
fclose($myfile);
}
writeJSON();
?> 
```

# gnuplot - 如何在 gnuplot 中设置带有列标题的轴标签？

> ID：16089301
> 
> 赞同：16
> 
> 时间：2013-04-18T17:16:57.400
> 
> 标签：gnuplot, columnheader

我的问题很简单。假设我有一个带有列标题的数据文件，如下所示

```
first second
1 1 
2 1
3 6
4 9 
```

在 gnuplot 中，如何使用列标题作为轴标签来绘制数据文件？例如通过调用

```
plot datafile using 1:2 
```

我得到 xaxis 标记`first`和 yaxis 标记`second`？

编辑：我确实知道我可以通过 使用列标题作为键条目`set key auto title column head`，但这并不是我想要的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-08-23T14:03:55.953

为了详细说明@andyras 的建议，您可以这样做：

```
datafile = 'filename.txt'
firstrow = system('head -1 '.datafile)
set xlabel word(firstrow, 1)
set ylabel word(firstrow, 2)
plot datafile using 1:2 
```

您必须使用显式`using`语句进行绘图，否则 gnuplot 会抱怨`bad data on line 1`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T18:28:17.383

我不认为这个特性是 gnuplot 内置的。您可能必须使用类似 awk 的实用程序将这些标签从数据文件中提取出来。

您可以尝试在 gnuplot 的 sourceforge 站点上提交功能请求，并从那里的开发人员那里获得反馈。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-08-19T08:07:02.087

我认为是支持的。您应该能够使用“”：

> 使用“第一”：“第二”绘制“文件”

虽然，如果你想在你的使用规范中做数学，你也需要 column("") 函数

> 使用“first”绘制“文件”：（column（“second”）-（column（“thrid”））

（无论如何，仅使用带引号的标题名称对我不起作用。）

# javafx - JavaFX ImageView 没有任何平滑

> ID：16089304
> 
> 赞同：20
> 
> 时间：2013-04-18T17:17:06.980
> 
> 标签：javafx, javafx-2

是否可以在 JavaFX 2.2 的 ImageView 中呈现缩放图像而不应用任何平滑？我正在使用 setSmooth(false) 将 50x50 图像渲染为 200x200 ImageView，因此源图像中的每个像素都应映射到屏幕上的 4x4 正方形。

但是，生成的渲染仍然会平滑所有 16 个目标像素的源像素。有谁知道无需手动将每个像素复制到新图像中的方法？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-04-18T20:38:57.883

在 JavaFX 2.2[中](http://docs.oracle.com/javafx/2/api/javafx/scene/image/ImageView.html#smoothProperty)`ImageView`，无论您向. `ImageView`

（基于使用带有 ATI HD4600 显卡的 Java 7u15 和 Windows 7 进行的测试）。

也许这是一个`ImageView`总是会平滑`Image`. 您可能希望将对此问题的引用发布到[openjfx-dev 邮件列表](http://mail.openjdk.java.net/mailman/listinfo/openjfx-dev)或在[JavaFX 问题跟踪器](https://javafx-jira.kenai.com)中记录问题，以便从开发人员那里获得更专业的意见。

* * *

我尝试了几种不同的方法来缩放图像：

1.  在[Image 构造函数](http://docs.oracle.com/javafx/2/api/javafx/scene/image/Image.html#Image%28java.lang.String,%20double,%20double,%20boolean,%20boolean%29)中缩放。
2.  `ImageView`使用[fitWidth](http://docs.oracle.com/javafx/2/api/javafx/scene/image/ImageView.html#fitWidthProperty) / [fitHeight](http://docs.oracle.com/javafx/2/api/javafx/scene/image/ImageView.html#fitHeightProperty)进行缩放。
3.  使用. [_](http://docs.oracle.com/javafx/2/api/javafx/scene/Node.html#scaleXProperty%28%29) _ [_](http://docs.oracle.com/javafx/2/api/javafx/scene/Node.html#scaleYProperty%28%29) _`ImageView`
4.  通过使用 PixelReader 采样并`Image`使用[PixelWriter](http://docs.oracle.com/javafx/2/api/javafx/scene/image/PixelReader.html)创建新图像来进行[缩放](http://docs.oracle.com/javafx/2/api/javafx/scene/image/PixelWriter.html)。

我发现方法 1 和 4 会产生您想要的清晰的像素化图像，而方法 2 和 3 会产生模糊的混叠图像。

![机器人采样](https://i.stack.imgur.com/ifGkJ.png)

生成上述输出的[示例代码。](https://gist.github.com/jewelsea/5415891)

* * *

*更新实现自己的图像过滤器的想法*

JavaFX 效果与用于图像加载例程的过滤器不同，尽管可以创建过滤图像的效果。在 JavaFX 2.2 中公开记录的 API 支持创建自定义效果，因此创建自定义效果可能会很困难。

[图像支持](http://hg.openjdk.java.net/openjfx/8/graphics/rt/rev/f0ec60f0a4b8)的本机代码最近作为[openjfx 项目](http://openjdk.java.net/projects/openjfx/)的一部分开源，因此您可以查看它以了解当前如何实现过滤。

您可能还想[针对 JavaFX 运行时项目提交功能请求，](https://javafx-jira.kenai.com)以“允许我们制作自己的 2D 过滤器”。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-09-02T14:13:10.040

我知道这有点老了，但我最近需要这样的 ImageView，下面的小技巧正是我想要在我的 (Windows) 机器上做的。不能保证它在任何地方都有效。

```
import com.sun.javafx.sg.prism.NGImageView;
import com.sun.javafx.sg.prism.NGNode;
import com.sun.prism.Graphics;
import com.sun.prism.Texture;
import com.sun.prism.impl.BaseResourceFactory;

import com.sun.prism.Image;
import javafx.scene.image.ImageView;

@SuppressWarnings("restriction")
public class PixelatedImageView extends ImageView {
    @Override protected NGNode impl_createPeer() {
        return new NGImageView() {
            private Image image;

            @Override public void setImage(Object img) {
                super.setImage(img);
                image = (Image) img;
            }

            @Override protected void renderContent(Graphics g) {
                BaseResourceFactory factory = (BaseResourceFactory) g.getResourceFactory();
                Texture tex = factory.getCachedTexture(image, Texture.WrapMode.CLAMP_TO_EDGE);
                tex.setLinearFiltering(false);
                tex.unlock();
                super.renderContent(g);
            }
        };
    }
} 
```

这里的技巧是纹理被重新使用，所以线性过滤设置保持“粘性”。但是，为什么`NGImageView`不能简单地将“平滑”标志传递给纹理的线性过滤设置，这超出了我的理解。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-04-08T18:23:41.090

ImageView 没有修复，但它帮助了我很多。在搜索了很多年之后，我偶然发现了这篇文章：[如何在 JavaFX 画布上禁用抗锯齿？](https://stackoverflow.com/questions/46854183/how-can-i-disable-antialiasing-on-a-javafx-canvas)

为了在画布上绘制图像，从 JavaFX 12 开始可以禁用平滑

```
canvas.getGraphicsContext2D().setImageSmoothing(false); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-03T18:57:21.320

当您将以下构造函数添加到 Martin Sojka 的答案时，您可以简单地将 javafx Image 传递给构造函数。此外，尽管有关于已弃用功能的警告，但他的答案仍然可以正常工作（在 JDK 1.8_121 上）。

```
public PixelatedImageView (javafx.scene.image.Image image) {
    super(image);
} 
```

# c++ - 指向 STL 映射中的函数的指针

> ID：16089305
> 
> 赞同：0
> 
> 时间：2013-04-18T17:17:08.977
> 
> 标签：c++, visual-c++, function-pointers

我面临一个关于函数指针语法的问题。我以前用过这些，但我的情况让事情变得完全不明显了。

所以，我正在设计一个为游戏创建节点的工厂。工厂的 create 方法有 2 个重载，如下所示：

*   AbstractNode* create(AbstractNode::TYPE) 常量；
*   AbstractNode* create(AbstractNode::TYPE, Vector3) const;

在工厂中，我有私有方法来处理创建过程（基于节点的类型），这是创建球的两种方法：

*   AbstractNode* createBall() 常量；
*   AbstractNode* createBall(Vector3) const;

最后，这是我存储所有函数指针的两个映射。这些映射会将调用重定向到正确的创建方法（当然，如果可能的话）

```
typedef AbstractNode* (*Functor)(void);
typedef AbstractNode* (*FunctorPosition)(Vector3);

map<unsigned int, Functor> functors_;
<unsigned int, FunctorPosition> functorsPosition_; 
```

现在，我的问题是，在两个映射中添加函数指针的语法是什么。

这是我最后一次尝试，它没有编译并抛出以下错误：

```
functors_.insert(make_pair(AbstractNode::NAME_BALL, &createBall)); 
```

**显示的错误：**

```
No instance of function template std::make_pair matches the argument list
Argument types are (const unsigned int, <unkown-type>) 
```

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T17:29:03.180

`createBall`是一个非静态成员函数。指向成员函数的指针类型不同于指向函数的指针类型。

所以，它的类型`&createBall`不是`AbstractNode* (*)(void)`，它是`AbstractNode* (Factory::*)(void)const`，它出现的类的名称在哪里`Factory`。如果你想要一个指向成员函数的指针，然后更改类型`Functor`（并确保当你调用它时，你有一个实例`Factory`来调用它）。如果您想要一个指向函数的指针，请更改`createBall`为静态成员函数。

此外，编译器无法确定您要创建什么类型的对，因为`&createBall`在名为`createBall`. 一旦你的类型`Functor`正确，你可以写：

```
functors_.insert(make_pair(AbstractNode::NAME_BALL, (Functor)&createBall));
functorsPosition_.insert(make_pair(AbstractNode::NAME_BALL, (FunctorPosition)&createBall)); 
```

强制转换告诉编译器你指的是哪个函数——这是 C++ 中通常规则的一个特殊例外，即子表达式的类型`&createBall`不依赖于它出现的上下文。

我认为你应该能够避免演员阵容：

```
functors_[AbstractNode::NAME_BALL] = &createBall; 
```

因为将指针分配给重载函数同样是一种特殊情况。但是我懒得去查了。

# java - 为任何目标部署 Java 应用程序

> ID：16089308
> 
> 赞同：1
> 
> 时间：2013-04-18T17:17:36.357
> 
> 标签：java, deployment

我希望能够部署我的 Java 应用程序，以便它可以在任何目标上运行（即使目标没有安装 Java）

我被告知我必须将 JRE 与我的应用程序一起分发。我是否真的为 Windows 复制了一份 JRE 文件夹，为 Linux 复制了一份，并有一个 shell 来执行这两者？

还是有进一步的步骤？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T17:23:26.963

我认为最好的方法是使用安装程序。

[BitRock](http://installbuilder.bitrock.com) , [Install4j](http://www.ej-technologies.com/products/install4j/overview.html)等...

如果机器上不存在 JRE，安装程序会小心安装它。此外，上面的安装程序是多平台的。

# asp.net - 使用单个 linq 语句更新多个字段

> ID：16089311
> 
> 赞同：0
> 
> 时间：2013-04-18T17:17:47.187
> 
> 标签：asp.net, linq

我试图找出是否可以使用 linq 更新 2 个或更多字段。

我发现这个示例显示 1 个属性已更新，但我不确定如何转换它。

```
listOfCompany.FirstOrDefault().Name = "Whatever Name"; // desc = "Whatever desc" 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T17:20:52.570

只需拉回整个实体而不是单个属性。

```
var myEntity = listOfCompany.FirstOrDefault();
if(myEntity!=null)
{
   myEntity.Name = "Blah";
   myEntity.Something = "Blah 2";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T17:23:48.937

当您想要更新对象列表时，您可以执行以下操作：

```
var company = listOfCompany.FirstOrDefault();
company.Name = "Name"; 
company.Number = 14377;
company.MyProp = obj; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T17:24:05.467

```
var x = listOfCompany.FirstOrDefault();
x.Name = "Whatever Name";
x.Desc = "Whatever Desc"; 
```

你当然可以这样做：

```
listOfCompany.FirstOrDefault().Name = "Whatever Name";
listOfCompany.FirstOrDefault().Desc = "Whatever Desc"; 
```

但我认为，充其量，它看起来很奇怪。

请注意，如果 listOfCompany 没有任何项目，FirstOrDefault() 可能会返回 null，因此请小心假设引用返回的项目是安全的 FirstOrDefault() 然后尝试对其设置属性。

我不知道一次设置两个属性的方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-18T17:29:15.307

我建议不要这样做，因为它相当混乱。一次只更新一个字段就更清楚了。但这里是：

```
listOfCompany.Select(c => new Company(){Name = "NewName", Number = 666, desc = c.desc}).FirstOrDefault(); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-18T17:30:04.890

Linq 用于*查询*，而不是*更新*。你的例子相当于

```
var temp = listOfCompany.FirstOrDefault()
temp.Name = "Whatever Name";   
// desc = "Whatever desc" 
```

显然第二行是一个基本的属性集——它与 Linq 没有任何关系。为了更新属性（无论是一个还是多个），您需要对该项目的*引用*，您可以使用 Linq 获得该引用：

```
var company = listOfCompany.FirstOrDefault()
company.name = "Whatever Name";
company.desc = "Whatever desc"; 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2021-10-28T14:37:09.687

```
result.ForEach(x => x.User = _dbUsers.Users.Where(u => u.Id == x.Id_Users).Select(s => new { completeName = s.UserName + " " + s.UserSurName }).SingleOrDefault().completeName); 
```

# sql - 使用子查询访问 2007 添加列

> ID：16089317
> 
> 赞同：0
> 
> 时间：2013-04-18T17:18:09.097
> 
> 标签：sql, ms-access, ms-access-2007

我正在尝试将新表中的两列添加到我当前的查询结果中。像这样的东西： ![PIC](https://i.stack.imgur.com/CeDSI.jpg)

在 SQL 中，我会执行以下操作：

> Select A.Clm1
> ,A.Clm2
> ,B.Clm3
> ,(select udf_number from newTable NT where NT.udf_type_id=1 and NT.id=A.id) as NewColumn1
> ,(select udf_number from newTable NT where NT.udf_type_id=2 and NT.id=A.id) as NewColumn2
> from TableA A inner join TableB B on A.id=B.id inner join newTable NT on NT.id=A.id

甚至使用类似的案例

> 选择 A.Clm1
> ,A.Clm2
> ,B.Clm3
> ,(NT.udf_type_id=1 然后 NT.udf_number 的情况) 作为 NewColumn1
> ,(NT.udf_type_id=2 然后 NT.udf_number 的情况) 作为 NewColumn2
> From..... ...

我在访问中尝试了一些事情，在 from 或 where 部分使用子查询。但没有取得任何成功。我的问题是我正在尝试根据新表中的 1 列添加两列。在 Access 中完成这项工作有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T19:25:13.497

加入`newTable` *两次*。

在 SQL 中，它看起来像这样：

```
SELECT A.Clm1, ...
       NT1.udf_number AS NewColumn1, NT2.udf_number AS NewColumn2
  FROM A 
       INNER JOIN newTable NT1 ON A.id = NT1.id
       INNER JOIN newTable NT2 ON A.id = NT2.id
 WHERE NT1.udf_type_id = 1
   AND NT2.udf_type_id = 2
   AND ... 
```

所以，基本上，你假装有两个不同`newTable`的 s：一个只有类型 1 条目，另一个只有类型 2 条目。并且您将两者都加入到`A`.

在 Access 查询设计器中，只需将表添加两次。Access 可能会调用它们`newTable`，并且`newTable1`您可能希望将其更改为更具描述性的内容。然后将`NT1.udf_type_id`和添加`NT2.udf_type_id`到列列表并添加过滤器值（分别为 1 和 2）。

（注意：这只会返回`A`在 newTable 中同时存在类型 1 和类型 2 记录的记录。如果要返回所有的，请`A`使用 LEFT JOIN 而不是 INNER JOIN*并将*类型标准添加到连接健康）状况。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T19:30:56.590

这对access97及以上有效（我猜）

```
Select A.Clm1, A.Clm2, B.Clm3,
NT1.udf_number as NewColumn1,
NT2.udf_number as NewColumn2
from 
TableA A 
inner join TableB B     on A.id=B.id 
left  join newTable NT1 on NT1.id=A.id and NT1.udf_type_id = A.id - A.id + 1
left  join newTable NT2 on NT2.id=A.id and NT2.udf_type_id = A.id - A.id + 2 
```

请注意`A.id - A.id + 1`Access 所需的棘手部分
对于其他 RDBM（或者可能是更新的访问版本），它可以是：

```
Select A.Clm1, A.Clm2, B.Clm3,
NT1.udf_number as NewColumn1,
NT2.udf_number as NewColumn2
from 
TableA A 
inner join TableB B     on A.id=B.id 
left  join newTable NT1 on NT1.id=A.id and NT1.udf_type_id = 1
left  join newTable NT2 on NT2.id=A.id and NT2.udf_type_id = 2 
```

# sql-server - 将 bacpac 文件还原到具有大数据库大小的 sql azure (SqlPackage.exe)

> ID：16089321
> 
> 赞同：2
> 
> 时间：2013-04-18T17:18:18.423
> 
> 标签：sql-server, azure-sql-database

我正在尝试使用 SqlPackage.exe 从 bacpac 文件恢复大型（~10GB）数据库。（命令如下所示）。问题是我在导入过程中达到了 Web 数据库的 1GB 限制，但它失败了。

由于我只能将 bacpac 恢复到新数据库，因此在导入数据之前无法调整基本数据库的大小。在 gui 上有一个指定大小的选项，但我找不到对应的命令行参数（请参阅下面的屏幕截图）。我已阅读[文档](http://msdn.microsoft.com/en-us/library/hh550080%28v=vs.103%29.aspx)。我正在尝试做的事情可能吗？

```
.\lib\sqlServer\DAC\bin\SqlPackage.exe /a:"Import" /tdn:"qa02_sgp" /tp:"somepassword" /tsn:"somehostname.database.windows.net" /tu:"sa@somehostname" /sf ".\data\perftestdb.bacpac" 
```

![在此处输入图像描述](https://i.stack.imgur.com/ObA6P.png)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-24T00:18:35.550

CREATE [DATABASE](http://msdn.microsoft.com/en-us/library/windowsazure/ee336274.aspx) T-SQL 允许您指定数据库版本和最大大小

# linux - 但我不想* gcc 遵循符号链接

> ID：16089330
> 
> 赞同：3
> 
> 时间：2013-04-18T17:19:06.890
> 
> 标签：linux, gcc, symlink

背景：

我编写了一个程序，将 OpenBLAS 库用于非常异构的计算集群。OpenBLAS 为不同的架构使用不同的库。

所以在一台机器上 'ls -l /usr/lib64/libopenblas.so' 结果

```
lrwxrwxrwx 1 root root 31 Mar 6 15:13 /usr/lib64/libopenblas.so -> libopenblas_barcelona-r0.2.6.so*
```

另一方面，结果是

```
lrwxrwxrwx 1 root root 33 Mar 4 09:43 /usr/lib64/libopenblas.so -> libopenblas_sandybridge-r0.2.6.so*
```

可能还有其他人，但这是我检查过的两个。两者都实现了相同的 API，只是使用了不同的优化。

问题：

当我使用这些编译我自己的共享对象文件 `gcc ... -lopenblas`时，它编译得很好，它可以在具有相似架构的机器上运行（即那些具有'libopenblas_barcelona-r0.2.6.so'的机器），但在其他架构上它无法运行.

ldd 显示它链接到 libopenblas_barcelona-r0.2.6.so 而不是 libopenblas.so。

有什么方法可以告诉 gcc 链接到符号链接，而不是该符号链接的结果，这样无论它运行的机器的体系结构如何，它都是“正确的”？

# ajax - Yii - 使用 Ajax 验证

> ID：16089333
> 
> 赞同：8
> 
> 时间：2013-04-18T17:19:08.950
> 
> 标签：ajax, yii

我正在尝试在表单中启用 ajax 验证，我已在表单中添加了正确的参数，但它不起作用，这是我的代码：

```
<?php $form=$this->beginWidget('CActiveForm', array(
    'id'=>'user-form',
    'enableAjaxValidation'=>true,
    'htmlOptions' => array(
            'enctype' => 'multipart/form-data',
            'enableClientValidation'=>true
    ),
)); ?> 
```

请指教。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-18T17:20:17.687

在您的操作顶部，添加以下行：

```
if(isset($_POST['ajax']) && $_POST['ajax']==='user-form'){
    echo CActiveForm::validate($model);
    Yii::app()->end();
} 
```

# html - 检测 UTF-16 支持，否则用图像替换

> ID：16089337
> 
> 赞同：0
> 
> 时间：2013-04-18T17:19:15.017
> 
> 标签：html, utf-16

作为我正在设计的 HUD 的一部分，我想使用这个符号：

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T17:48:59.227

不仅在 HTML 文档中正确编码字符集信息就足够了，另一方面，浏览器必须能够使用正确的编码（检查设置）并且必须能够显示它。在以下示例中，浏览器配置正确，只是操作系统无法使用 UTF-8 字符：

![在此处输入图像描述](https://i.stack.imgur.com/wFYEu.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T17:25:25.053

As far as I (mis-)understood it also is a font issue, where smart browsers possibly substitute the missing char by one out of another font. The newer browsers can also be served fonts from the server. Maybe that helps.

I hope you get a better answer.

# jquery - 调用外部 jQuery 文件

> ID：16089342
> 
> 赞同：0
> 
> 时间：2013-04-18T17:19:23.687
> 
> 标签：jquery

您好我正在尝试使用 jQuery 编写一个 Web 应用程序，并且我想将 JS 代码与 HTML 标记分开。这是代码：

文件：index.html

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Customer Search</title>
    <script src="js/jquery-1.9.1.min.js"></script>
</head>
<body>
    ...
    <input type="button" id="button_batch_update" value="Save"/>

    <script type="text/javascript" src="js/customer_search.js"></script>
</body> 
```

文件：customer_search.js

```
!function($){
    $("#button_batch_update").click(function(e){
        e.preventDefault();
        alert("u clicked me!");
    });
}(window.jQuery); 
```

[我从引导网站（ http://twitter.github.io/bootstrap/javascript.html](http://twitter.github.io/bootstrap/javascript.html)）复制了 JS 文件代码。它可以工作，但我真的不明白为什么外部 JS 文件会工作。有人可以帮我解决这个问题吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T17:22:50.010

当您包含外部文件时，它实际上将其包含为当前 HTML 页面的*一部分。*

因此，如果您有一个如下所示的外部文件：

```
<script>

function myFunc(){

}

</script> 
```

并且您将它包含在您的 HTML 标头中，就好像该函数是在您的原始 HTML 文档中编写的：

```
<html>
<body>

    <script>

    function myFunc(){

    }

    </script>

</body>
</html> 
```

因此允许您调用该函数。

# 顺便一提 ...

在我们进行此讨论时，它可能有助于通知您，您可以对许多其他类型的文件执行此操作，包括但不限于：

*   css
*   php
*   xml
*   ...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T17:29:56.927

在 Javascript 中的 function(){} 是您声明函数的方式，而 function(){}() 将执行它。因此，当添加脚本文件时，浏览器会请求该脚本文件并执行其中的内容（基本上会对其进行解析、编译并使其可用于支持您的 html）。

所以

```
 < script src="js/jquery-1.9.1.min.js"></script > 
```

将执行 jquery 代码。jquery 将自身附加到全局窗口对象。所以现在任何人都可以使用 window.jQuery 或简单地作为 jQuery（推断为全局）访问它。

然后当你的 html 找到你的脚本时

```
function($){
    $("#button_batch_update").click(function(e){
         e.preventDefault();
         alert("u clicked me!");
    });
}(window.jQuery) 
```

它正在执行它并将 window.jQuery 作为函数参数传递，它在闭包中被接受为“$”。

# momentjs - 使用 Backgrid 时抛出 TypeError string.indexOf

> ID：16089343
> 
> 赞同：1
> 
> 时间：2013-04-18T17:19:24.250
> 
> 标签：momentjs, backgrid

我正在使用 backgrid 显示来自后端 Db 的 JSON 结果。其中一个字段是从 1970 年（例如 1362578461000）开始的时间（以秒为单位），当 Backbone 视图接收到此数据时，backgrid 将其发送到用于格式化的时刻。Moment 然后抛出一个在 Moment.js (v.2.0.0) 的第 758 行指示的 javaScript TypeError 异常

> TypeError：string.indexOf 不是函数

列格式如下所示：

```
 var columns = [{
            name: "startTime",
            label: "Start Time",
            editable: false,
            cell: "moment"
        }, {
            name: "endTime",
            label: "End Time",
            editable: false,
            cell: "moment"
        }]; 
```

在 Firebug 中设置一个刹车点，看起来 Moment 认为该值是一个整数而不是一个字符串。

> utc()moment.js（第 960 行）
> 
> 输入 = 1362578461000
> 
> 格式 = "YYYY-MM-DDTHH:mm:ssZ"
> 
> 语言 = 未定义

对 makeDateFromStringAndFormat 的调用如下所示：

> makeDateFromStringAndFormat()moment.js (line 758) config = Object { _useUTC=true, _isUTC=true, _i=1362578461000, 更多...}

关于我可以做些什么来解决/解决这个问题的任何想法？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-28T04:11:34.127

Author of Backgrid here. There are 2 parts to your question:

1.  Backgrid.js has only gained compatibility with moment.js 2.0.0 in 0.2.5 released yesterday.
2.  The moment cell doesn't accept integers as input in the model because it tries to convert timezones and locales, so your model values have to be in a datetime string format that moment knows how to parse.

# magento - 如何使用 layout.xml 在购物车页面之外添加结帐按钮？

> ID：16089351
> 
> 赞同：0
> 
> 时间：2013-04-18T17:19:48.430
> 
> 标签：magento

我相信这是创建“继续结帐”按钮的 phtml 文件中的代码：

```
<?php if(!$this->hasError()): ?>
    <ul class="checkout-types">
        <?php foreach ($this->getMethods('top_methods') as $method): ?>
            <?php if ($methodHtml = $this->getMethodHtml($method)): ?>
                <li><?php echo $methodHtml; ?></li>
            <?php endif; ?>
        <?php endforeach; ?>
    </ul>
<?php endif; ?> 
```

但是，当我将它添加到另一个 phtml 文件时，它是 cart.phtml 的同级文件，我收到一条错误消息，指出向 foreach 提供了一个无效参数。

然后我尝试添加块：

```
<block type="core/text_list" name="checkout.cart.top_methods" as="top_methods" translate="label">
    <label>Payment Methods Before Checkout Button</label>
    <block type="checkout/onepage_link" name="checkout.cart.methods.onepage" template="checkout/onepage/link.phtml"/>
</block> 
```

取自 checkout.xml 布局文件，到我自己的块，在总块之后：

```
<block type="page/html" name="checkout_process" as="checkout_process" template="page/html/checkout_process.phtml">                  
    <block type="checkout/cart_totals" name="checkout.cart.totals" as="totals" template="checkout/cart/totals.phtml"/>
</block> 
```

但是这什么也没做，我是否遗漏了什么，我认为这可以让我包含按钮？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-08T16:56:19.557

你把那个代码放在哪里了？并非所有块都会自动打印，但需要使用`$this->getChildHtml('your_block')`（请参阅[magento-layouts-blocks-and-templates](http://www.magentocommerce.com/knowledge-base/entry/magento-for-dev-part-4-magento-layouts-blocks-and-templates)）打印。这是一个将此按钮添加到右列的最小示例，我将其放在 local.xml 布局文件中：

```
<layout version="0.1.0">
<default>
    <reference name="right">
        <block type="checkout/onepage_link" name="my.cart.button" template="checkout/onepage/link.phtml"/>
    </reference>
</default> 
```

# java - javax.imageio.IIOException：读取 PNG 图像时出错

> ID：16089352
> 
> 赞同：0
> 
> 时间：2013-04-18T17:19:53.580
> 
> 标签：java

当我在`BufferedImage`使用内部传递字节数组时获取字节数组后`BufferedImage bImageFromConvert = ImageIO.read(in);`

它显示错误：

```
javax.imageio.IIOException: Error reading PNG image data at   
com.sun.imageio.plugins.png.PNGImageReader.readImage(Unknown Source) at  
com.sun.imageio.plugins.png.PNGImageReader.read(Unknown Source) at  
javax.imageio.ImageIO.read(Unknown Source) at
javax.imageio.ImageIO.read(Unknown Source) 
```

这背后的原因可能是什么？

# java - (Eclipse - OS X) 如何从 javadoc 弹出窗口中复制？

> ID：16089353
> 
> 赞同：5
> 
> 时间：2013-04-18T17:19:54.750
> 
> 标签：java, eclipse, macos, javadoc

来自 Windows，当我使用 Eclipse 并将鼠标悬停在具有 Javadoc 的类/方法/变量上时，会弹出一个 Javadoc 窗口（或者您也可以按 F2）。Mac OS X 10.8.2 上的 Eclipse 具有相同的行为。但是它们的不同之处在于，在窗口中，我可以突出显示弹出窗口中的内容并将其复制（Ctrl+C），然后将其粘贴到某处。我无法让它在 Mac OS X 10.8.2 中工作。我已经尝试过命令键 + C（在其他任何地方都可以使用），我也尝试过 Ctrl+C。没有骰子。

在将局部变量设置为 getter 方法返回的值时，我经常使用它。我可以打开 Javadoc 并复制返回类型，然后将其粘贴到编辑器中作为我的新局部变量的类型。如果返回类型是带有泛型参数的复杂 Map 类型，则可以节省大量时间。

在帮助同事通过 IM 将 Javadoc 的部分复制/粘贴给他们时也很有帮助。

这在 Mac OS X 10.8.2 上是不可能的吗？有解决办法吗？

**编辑**：使用 Eclipse Juno SR 2

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T18:24:15.757

这似乎是一个错误。对我来说，它只会第一次复制。此后任何时候尝试复制，它都不起作用——直到重新启动 Eclipse。不幸的是，它也会影响 Javadoc 视图，但不会影响编辑器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T18:08:09.090

If you highlight the class/method/variable you are interested in, at the bottom of your Eclipse window there should be a list of tabs alongside console, one of which named Javadoc.

If you select this tab, the Javadoc should show in the window where your console normally appears, and you can copy using CMD-c as normal.

EDIT: If Javadoc doesn't show, make sure to enable it from Window > Show View > Javadoc

# sql - 在 T-SQL 中排序

> ID：16089355
> 
> 赞同：0
> 
> 时间：2013-04-18T17:20:08.900
> 
> 标签：sql, sql-server, sql-server-2008, tsql, date

我有以下代码

```
 SELECT 
    CASE WHEN @ID = 1 THEN CONVERT(nvarchar(10), [insert_date],101)
         ELSE CONVERT(nvarchar(10), [insert_date],103) 
    END AS [insert_date]
FROM Dates 
ORDER BY [insert_date] DESC 
```

现在，当日期为 101 格式时，它以 MM/DD/YYYY 输出并且顺序正确（按月 DESC）但是当日期为 103 格式时，它以 DD/MM/YYYY 输出并且顺序不正确（DESC白天）。

即使日期为 DD/MM/YYYY，我如何按月订购？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T17:23:54.780

```
SELECT 
CASE WHEN @ID = 1 THEN CONVERT(nvarchar(10), [insert_date],101)
     ELSE CONVERT(nvarchar(10), [insert_date],103) 
END AS [insert_date]
FROM Dates 
ORDER BY CONVERT(nvarchar(10), [insert_date],101) DESC 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T17:23:35.443

尝试这个 ：-

```
order by datepart(month,[insert_date]) desc 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T17:33:10.293

您的意思是`[insert_date]`同时用作输入列名和输出计算列名吗？目前尚不清楚，但是（正如 Jermy 在评论中所证实的那样）这确实意味着您正在覆盖该`ORDER BY`子句使用的值。那是你要的吗？

你真的不应该通过它们的字符串表示来排序日期，除非你可以保证它们是一个词法可排序的格式（例如 yyyy-MM-dd）。除非你有非常好的理由这样做，否则你应该按日期本身排序。根本不要将其转换为 a `nvarchar`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-18T17:26:35.163

try using format 112

> SELECT CASE WHEN @ID = 1 THEN CONVERT(nvarchar(10), [insert_date],101) ELSE CONVERT(nvarchar(10), [insert_date],103) END AS [insert_date] FROM Dates ORDER BY CONVERT(nvarchar(10), [insert_date],112) DESC

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-18T17:49:27.453

如果您真的希望订购使用月份，无论年份如何（即将所有一月条目保存多年），然后使用@Indoknight 的解决方案。

如果您实际上只希望按日期降序排列结果，而不管日期格式如何，则将表名称作为顺序的一部分包括：

```
SELECT 
CASE WHEN @ID = 1 THEN CONVERT(nvarchar(10), [insert_date],101)
     ELSE CONVERT(nvarchar(10), [insert_date],103) 
END AS [insert_date]
FROM DateTest 
ORDER BY DateTest.[insert_date] DESC 
```

# javascript - 在 BreezeJS 中读取 odata 链接

> ID：16089360
> 
> 赞同：2
> 
> 时间：2013-04-18T17:20:27.563
> 
> 标签：javascript, odata, breeze, sap-gateway

我正在尝试让 BreezeJS 库与 SAP OData 服务一起使用。这适用于读取实体，但我无法解析链接的对象。

我的 EntityType 是一个 OrgObject。

```
<EntityType Name="OrgObject" sap:content-version="1">
  <!-- ... -->
  <NavigationProperty Name="Children" Relationship="ZGW_ORGSTRUCTURE.OrgObject_To_Children" FromRole="FromRole_OrgObject_To_Children" ToRole="ToRole_OrgObject_To_Children"/>
</EntityType> 
```

我有一个链接来解决所有链接的 OrgObjects（链接名为 Children）。

```
<Association Name="OrgObject_To_Children" sap:content-version="1">
  <End Type="ZGW_ORGSTRUCTURE.OrgObject" Multiplicity="1" Role="FromRole_OrgObject_To_Children"/>
  <End Type="ZGW_ORGSTRUCTURE.OrgObject" Multiplicity="*" Role="ToRole_OrgObject_To_Children"/>
</Association> 
```

所以，这个微风查询正在工作：

```
var query = new breeze.EntityQuery().from("OrgObjects");
manager.executeQuery(query).then(function(data) {
  data.results.forEach(function(item) {
    console.log(item);
  });
}).fail(/*...*/); 
```

我如何从这个对象中调用“孩子”？

**尝试1：**

```
var query = new breeze.EntityQuery().from("OrgObjects");
manager.executeQuery(query).then(function(data) {
  data.results.forEach(function(item) {
    console.log(item);
    // ...
    var Children = item.Children();
    // ...
  });
}).fail(/*...*/); 
```

这会导致错误：

```
message: "Object [object Object] has no method 'children'" 
```

**尝试2：**

```
var query = new breeze.EntityQuery().from("OrgObjects");
manager.executeQuery(query).then(function(data) {
  data.results.forEach(function(item) {
    console.log(item);
    // ...
    item.entityAspect.loadNavigationProperty("Children").then(function(data) {
      console.log(data.results);
      data.results.forEach(function(item) {
        console.log(item);
      });
    }).fail(function(e) {
      console.log(e);
    });
    // ...
  });
}).fail(/*...*/); 
```

这会导致错误：

> “propertyOrExpr”参数必须是“字符串”

**尝试 3：**

```
var query = new breeze.EntityQuery().from("OrgObjects").expand("Children");
manager.executeQuery(query).then(function(data) {
  data.results.forEach(function(item) {
    console.log(item);
    // ...
    console.log(item.Children);
    console.log( item.Children.length );
    // ...
  });
}).fail(/*...*/); 
```

**结果：** `item.Children`是一个对象。但是`item.Children.length = 0`。`item.Children`当我检查 http 响应时，子项是从服务器获取的，但在对象中不可用。

控制台输出：

```
Finance Department
[parentEntity: Object, navigationProperty: ctor, arrayChanged: ctor, _addsInProcess: Array[0], push: function…]
    _addsInProcess: Array[0]
    _getEventParent: function () {
    _getPendingPubs: function () {
    arrayChanged: ctor
    length: 0
    load: function (callback, errorCallback) {
    navigationProperty: ctor
    parentEntity: Object
    pop: function () {
    push: function () {
    shift: function () {
    splice: function () {
    unshift: function () {
    __proto__: Array[0]
0 
```

谁能帮帮我？我的 OData 服务中是否缺少某些内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T07:53:32.537

问题被“解决”了。

1->n 关系只能在定义了逆属性 (n->1) 的情况下使用。据我所知，在 SAP Gateway 中无法定义反向关系。为了测试它，我创建了 2 个关系：

```
<Association Name="OrgObject_To_Children" sap:content-version="1">
    <End Type="ZGW_ORGSTRUCTURE.OrgObject" Multiplicity="1" Role="FromRole_OrgObject_To_Children"/>
    <End Type="ZGW_ORGSTRUCTURE.OrgObject" Multiplicity="*" Role="ToRole_OrgObject_To_Children"/>
</Association>
<Association Name="OrgObject_To_Children_inverse" sap:content-version="1">
    <End Type="ZGW_ORGSTRUCTURE.OrgObject" Multiplicity="*" Role="FromRole_OrgObject_To_Children_inverse"/>
    <End Type="ZGW_ORGSTRUCTURE.OrgObject" Multiplicity="1" Role="ToRole_OrgObject_To_Children_inverse"/>
</Association> 
```

然后我在微风中改变了这个

```
function updateCrossEntityRelationship(np) {
    var metadataStore = np.parentType.metadataStore;
    var incompleteTypeMap = metadataStore._incompleteTypeMap;

    // ok to not find it yet
    var targetEntityType = metadataStore._getEntityType(np.entityTypeName, true);
    if (targetEntityType) {
        np.entityType = targetEntityType;
    }

    var assocMap = incompleteTypeMap[np.entityTypeName];
    if (!assocMap) {
        addToIncompleteMap(incompleteTypeMap, np);
    } else {
        var inverse = assocMap[np.associationName];

        /* enable inverse relationship for SAP GATEWAY */
        // search for inverse links
        if( !inverse ){
            var associationName = "";
            if(np.associationName.indexOf("_inverse") > 0){
                associationName = np.associationName.replace("_inverse", "");
            }else{
                 associationName = np.associationName + "_inverse";
            }
            inverse = assocMap[associationName];
        }
        /* end enable inverse relationship for SAP GATEWAY */

        if (inverse) {
            removeFromIncompleteMap(incompleteTypeMap, np, inverse);
        } else {
            addToIncompleteMap(incompleteTypeMap, np);
        }
    }
}; 
```

但这并没有解决所有问题，我必须更改另一件事才能使其正常工作。不知道这是bug还是与SAP Gateway有关。

```
function mergeRelatedEntitiesCore(rawEntity, navigationProperty, parseContext) {
    var relatedRawEntities = rawEntity[navigationProperty.nameOnServer];
    if (!relatedRawEntities) return null;

    // needed if what is returned is not an array and we expect one - this happens with __deferred in OData.
    /* original code 
    if (!Array.isArray(relatedRawEntities)) return null;

    var relatedEntities = relatedRawEntities.map(function(relatedRawEntity) {
        return visitAndMerge(relatedRawEntity, parseContext, { nodeType: "navPropItem", navigationProperty: navigationProperty });
    });

    return relatedEntities;
    end original code */

    if (!Array.isArray(relatedRawEntities.results)) 
        return null;

    relatedRawEntities.results = relatedRawEntities.results.map(function(relatedRawEntity) {
        return visitAndMerge(relatedRawEntity, parseContext, { nodeType: "navPropItem", navigationProperty: navigationProperty });
    });

    return relatedRawEntities.results;

} 
```

我只测试了这个用于读取操作。稍后我将检查更新操作。

kr，约阿希姆

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-31T20:09:13.910

@Jowa - 感谢您为将 SAP 和 BreezeJS 结合在一起所做的努力。

您发现`expand`这是急切加载 parent 的孩子的方式`OrgObject`。

当导航属性正常工作时，您可以通过...按需加载它们`loadNavigationProperty`...尽管对每个查询结果逐一执行会非常低效。这种情况要求`expand`。

显然，Breeze 正在努力处理您的导航属性，因为它无法识别支持该关系的子实体中的外键。

您不必为 1..m 关系的双方定义导航属性。最常被忽略的一侧是 1->N 侧（父->子）属性。例如，我们大多数人会省略`Gender.Person`，因为我们不想要 collection `male.Persons`。

在您的情况下，如果我理解正确，您*认为*定义了 1->N ( `OrgObject.Children`) 而不是 N->1 导航 ( `Child.OrgObject`)。**那么这也应该工作！**

但无论如何，要使导航属性在任一方向上工作，元数据都必须识别子实体类型中的外键 (FK) 属性。

出于某种原因，Breeze 似乎没有得到这些信息。

破解 BreezeJS 本身......虽然很聪明......不应该是必要的。

我们愿意提供帮助。我们需要以下信息：

*   `Child`服务器上的类定义...突出显示其`OrgObject`FK 属性
*   对象中的`OrgObject`- 和 -`Child`相关元数据`metadataStore`
*   来自元数据文件的`OrgObject`- 和 -相关 JSON`Child`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T17:50:25.210

免责声明：我对 Breeze 不是很熟悉，但我猜测可能会发生什么。

从 Breeze[关于导航属性的文档中](http://www.breezejs.com/documentation/navigation-properties)，它说它不会延迟加载导航属性。因此，如果`item.Children()`数据在本地尚未完全可用，它就不会出去获取数据。您需要明确请求将子数据与有效负载的其余部分一起检索，以便在本地获取此信息。通常在 OData 中，这是通过`$expand`请求 URL 中的查询参数完成的。在 Breeze 中（根据我链接到的那个文档），它是通过如下`.expand()`方法完成的：

```
var query = new breeze.EntityQuery()
              .from("OrgObjects")
              .expand("Children"); 
```

# javascript - 是什么让 Bootstrap 模态变高或变宽？

> ID：16089368
> 
> 赞同：0
> 
> 时间：2013-04-18T17:20:53.580
> 
> 标签：javascript, css, ajax, html, twitter-bootstrap

我正在尝试使用 Jschr 的 Bootstrap-Modal fork 来允许各种大小的模态。

我无法弄清楚为什么某些模态框更高、更宽或尺寸更大。

这是文档：http: [//jschr.github.io/bootstrap-modal/](http://jschr.github.io/bootstrap-modal/)

这是一个超级简化的 jsFiddle：http: [//jsfiddle.net/4NRrr/](http://jsfiddle.net/4NRrr/)

以及相关的javascript：

```
$(function(){

$.fn.modalmanager.defaults.resize = true;

$('[data-source]').each(function(){
  var $this = $(this),
    $source = $($this.data('source'));

  var text = [];
  $source.each(function(){
    var $s = $(this);
    if ($s.attr('type') == 'text/javascript'){
      text.push($s.html().replace(/(\n)*/, ''));
    } else {
      text.push($s.clone().wrap('<div>').parent().html());
    }
  });

  $this.text(text.join('\n\n').replace(/\t/g, '    '));
});

}); 
```

和 html

```
<div class="page-container">
  <div class="container" style="position: relative">
    <button class="demo btn btn-primary btn-large" data-toggle="modal" href="#long">View Demo</button>
  </div>
</div>

<!-- Modal Definitions (tabbed over for <pre>) -->
<div id="long" class="modal hide fade" tabindex="-1" data-replace="true">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
    <h3>Long Modal</h3>
  </div>
  <div class="modal-body">
    <img src="http://i.imgur.com/KwPYo.jpg" />
  </div>
  <div class="modal-footer">
    <button type="button" data-dismiss="modal" class="btn">Close</button>
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T17:35:51.280

看起来它的大小正好适合 modal-body div 中的内容。例如，如果您更换

```
<div class="modal-body">
  <img src="http://i.imgur.com/KwPYo.jpg" />
</div> 
```

和

```
<div class="modal-body">
   <div style="height:100px; overflow:hidden;">
      <img src="http://i.imgur.com/KwPYo.jpg" />
   </div>
</div> 
```

你会得到一个更短的模态框。

# python - 在字符串 python 中搜索文本

> ID：16089374
> 
> 赞同：-1
> 
> 时间：2013-04-18T17:21:10.187
> 
> 标签：python, regex, datetime, text-extraction

我有以下字符串

```
aaa\bbb\ccc\ddd **16 April**\xyz 
```

日期（在这种情况下为 4 月 16 日）会根据事件的开始时间而变化，字符串其余部分的格式可能会变短或变长（如下）

```
aaa\bbb\ccc\ddd\**eee** **16 April**\xyz 
```

我希望始终能够选择“4 月 16 日”，而不管其余变量的长度如何。日期并不总是“4 月 16 日”，而是外部程序为我提供的任何事件的开始日期。

我想我能做到

```
if April in 'aaa\bbb\ccc\ddd\**eee** **16 April**\xyz': 
   print 'success' 
```

但是不知道有没有更好的方法...

我需要这样做，以便我可以将日期重新格式化为 16-04-2013..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T17:35:09.620

这应该这样做。

```
import datetime
import re

# Note the \\x to escape \x
foo = "aaa\bbb\ccc\ddd **16 April**\\xyz"
bar = "aaa\bbb\ccc\ddd\**eee** **1 December**\\xyz"

# Could do \d+ and \w+ aswell, it doesn't seem to matter too much in this situation
pattern = '\*\*(\d{1,2} \w{4,9})\*\*'

# "16 April" etc
foo_format = re.search(pattern, foo).group(1)
bar_format = re.search(pattern, bar).group(1)

year = str(datetime.datetime.now().year)

# Datetime object
foo_date = datetime.datetime.strptime(year + " " + foo_format, "%Y %d %B")
bar_date = datetime.datetime.strptime(year + " " + bar_format, "%Y %d %B")

print foo_date.strftime("%Y-%m-%d")
print bar_date.strftime("%Y-%m-%d") 
```

在Python`\x`中[为什么 '\x' 无效？](https://stackoverflow.com/questions/2704654/why-is-x-invalid-in-python)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T17:32:53.610

您可以使用**正则表达式**：

```
import re

a = re.search("16 April", "sample string")
print a.group(0) 
```

如果最后一条语句在字符串中，则返回“16 April”或**无**

# java - 容量有限的 FIFO 缓冲区覆盖最旧的元素

> ID：16089375
> 
> 赞同：3
> 
> 时间：2013-04-18T17:21:10.280
> 
> 标签：java, data-structures

我正在尝试在 Java 中创建一个[FIFO（先进先出）](http://en.wikipedia.org/wiki/FIFO)数据结构，该结构的容量有限，并在没有足够空间容纳新元素时删除最旧的元素。例如：

```
FIFO<Integer> fifo = new FIFO<Integer>(100); // 100 elements maximum
for (int i = 0; i < 500; i++) {
  fifo.write(i);
}
assert fifo.read() == 400; // elements 0..399 are lost 
```

我在重新发明轮子吗？您能否推荐一些具有相同功能的库（或者它可能是 JDK 的一部分）？线程安全并不重要。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T17:24:14.777

Apache 的[Common.Collections](http://commons.apache.org/proper/commons-collections/)有[CircularFifoBuffer](http://commons.apache.org/proper/commons-collections/apidocs/org/apache/commons/collections/buffer/CircularFifoBuffer.html)应该可以满足您的要求。

# actionscript-3 - 如何在 Flash AS3 中检测碰撞检测？

> ID：16089377
> 
> 赞同：3
> 
> 时间：2013-04-18T17:21:19.103
> 
> 标签：actionscript-3, collision-detection, flash-cs5

我想在 Flash AS3 中创建一个迷宫，由用户引导角色。我尝试使用它（如下），但这需要我将所有迷宫墙单独制作并为每个墙设置碰撞检测。有没有更简单的方法来完成同样的事情？

```
monkey.addEventListener( Event.ENTER_FRAME, handleCollision)

function handleCollision( e:Event ):void
{
    if(monkey.hitTestObject(wall))
       {
           trace("HIT");
       }
       else
       {
           trace("MISS");
       }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T18:03:38.100

为什么它意味着单独的墙壁？您是否尝试过绘制迷宫形状/墙壁并一次选择它们，右键单击以将选择转换为给出首选名称的影片剪辑。然后也给它实例名称“墙”。现在尝试运行它，您的`handleCollision`功能应该可以工作。

或者尝试在您的碰撞检查中从 更改`hitTestObject`为`hitTestPoint`...

```
function handleCollision(e:Event):void
{ 
 if (wall.hitTestPoint (monkey.x, monkey.y, false)) 
    { trace("HIT"); } 
else 
    { trace("MISS"); } 
} 
```

另请查看本文以获得更多说明。
[http://www.actionscriptmoron.com/AS3Tutorials/hittest-hittestpoint/](http://www.actionscriptmoron.com/AS3Tutorials/hittest-hittestpoint/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T17:44:49.310

您可以使用碰撞检测工具包：[https ://code.google.com/p/collisiondetectionkit/](https://code.google.com/p/collisiondetectionkit/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T17:51:32.840

你可以做到这一点的一种方法是使用`hitTestPoint()`方法来测试是否有任何角落撞到你的墙上。

`hitTestPoint()`仅测试单个位置以查看该点是否与对象碰撞。这就是你如何测试你的猴子的左上角，看看它是否接触到墙壁：

```
// I am assuming that x,y is the top left corner of your monkey

if (wall.hitTestPoint(monkey.x, monkey.y, true))
{
   // top left collided with wall
{ 
```

所以你可以对所有角落做同样的事情，或者如果你愿意，你可以确定你想要检查猴子的任何碰撞点。

根据您的精度水平，此方法可能适合您的需求。但是如果你想要像素完美碰撞，你可以查看这个链接：

[http://www.freeactionscript.com/2011/08/as3-pixel-perfect-collision-detection/](http://www.freeactionscript.com/2011/08/as3-pixel-perfect-collision-detection/)

# php - 如果已存在具有该名称的图像，则将数字附加到文件名

> ID：16089378
> 
> 赞同：0
> 
> 时间：2013-04-18T17:21:21.470
> 
> 标签：php, mysql, file-upload

我写了一些 php 来检查用户上传新文件时文件是否已经存在，如果存在，则在文件名中附加一个字符串。我想要的是在文件名的末尾添加一个数字，当上传另一个同名文件时，它会在数字顶部加 1。

例如：我已经上传了一张带有文件名 image.png 的图片，然后我上传了另一张具有相同文件名的图片。该文件应重命名为 image0.png。当我尝试使用文件名 image.png 上传另一个图像时，它应该重命名为 image1.png 等等。

我不确定如何在我的代码中完成此操作。谁能帮我吗？这是检查重复项并将某些内容附加到文件名的代码片段。

```
if(file_exists("/customers/d/8/e/frankkluytmans.nl/httpd.www/testsite/cms/upload/".$_FILES["image"]["name"]))
{
    $filename = explode(".",$_FILES['image']['name']);
    $imageName = $filename[0]."hoi.".$filename[1];
}
else
{
    $imageName = $_FILES['image']['name'];
}

$image = mysql_real_escape_string(htmlspecialchars("/upload/".$imageName));

if (move_uploaded_file($_FILES["image"]["tmp_name"],     "./upload/".$imageName)) {�

mysql_query("INSERT frankkluytmans SET pagid='$pagid', title='$titlename', content='$contentname', image='$image', youtube='$youtube'")
or die(mysql_error()); 

header("Location: index.php"); 

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T17:37:29.360

您可以使用递归函数来继续检查数字：

```
function checkFile($path, $file, $ext, $number)
{
    if(file_exists($path.$file.$number.$ext))
    {
        if($number == "")
            $number = 0;

        $number ++;
        return checkFile($path, $file, $ext, $number);
    }

    return $path.$file.$number.$ext;
}

//run mime type things to get extension. for now lets pretend it is .jpg
// and assume you stripped the extension from the uploaded file...
// also, pass blank to last param to start the file check without a number.

$extension = ".jpg";
$filename_minus_extension = "some-image";

$filename = checkFile('path-to-directory/', $filename_minus_extension, $extension, ""); 
```

这绝不是经过测试的，但总体思路是使用递归函数。如果您有具体问题，请随时提出，我可能会更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T17:32:53.350

您需要某种循环，因为您不知道必须多久检查一次。然后只需更改所需模式中的名称，直到不存在具有所选名称的文件

```
$info = pathinfo($filename); // get details
$name = $info['filename'];
$extension = $info['extension'];
$counter = 0;

while ( file_exists( $name.$counter.'.'.$extension ) )
{
    $counter++;
}

$new_name = $name.$counter.'.'.$extension; 
```

该代码未经测试，但应该可以工作。更重要的是，我希望您了解它的作用；）

# php - 如果其他表更新成功则更新表

> ID：16089385
> 
> 赞同：0
> 
> 时间：2013-04-18T17:21:50.390
> 
> 标签：php, mysql, sql

仅当 table1 中的更新成功时，如何在下面的代码中更新 table2？

```
$sql="update table1 set col1='abc' where col2='1'";
$result=mysql_query($sql);
if(that is success)
{
    $sql="update table2 set col1='cde' where col2='1'";
    $result=mysql_query($sql);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T17:24:58.253

查看[`mysql_affected_rows()`](http://us3.php.net/manual/en/function.mysql-affected-rows.php)函数，它将返回刚刚更新的行数。此外，尽量避免使用 mysql_* 函数来支持 mysqli_* 或 PDO，因为它们现在已被弃用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T17:27:00.123

首先，强烈建议**不要**使用`mysql_*`函数，因为它们自[PHP v5.5.0](http://php.net/manual/en/function.mysql-query.php)起已被弃用。

您可以直接使用`$result`变量检查

```
$result = mysql_query($sql);
if (!$result) {
    die('Update failed: ' . mysql_error());
} else {
    $sql="update table2 set col1='cde' where col2='1'";
    $result=mysql_query($sql);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T17:27:24.433

如果上述查询成功，则`$result`变量将具有数字 1 作为 $result 否则它将具有另一个值，因此您可以像这样简单地测试它

```
if($result == 1)
 {
     //Your second update result
 } 
```

试试这个并告诉我结果:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T17:28:26.753

[手册](http://php.net/manual/en/function.mysql-query.php)指出，如果更新有效，则更新的返回值为 true，否则为 false，因此您可以继续检查更新的值`$return`以查看更新是否有效。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-18T17:53:13.770

不要**只**使用 $result ，因为只要查询没有导致错误，它就会始终为真。如果 Where 子句没有命中，则不会更新任何内容，也不会导致错误。所以结果仍然是正确的。

按照 Alex 的建议使用 mysql_affected_rows 来了解已更新的记录数。

就这样吧`if ($result && mysql_affected_rows() )`...

# c# - 密码学 - RijndaelManaged 算法的安全性和存储密钥的位置

> ID：16089387
> 
> 赞同：0
> 
> 时间：2013-04-18T17:21:59.620
> 
> 标签：c#, encryption, cryptography, key, rijndaelmanaged

我有以下代码使用 .NET 中的 RijndaelManaged 加密和解密数据。

```
public string EncryptString(string ClearText)
{
    byte[] clearTextBytes = Encoding.UTF8.GetBytes(ClearText);
    SymmetricAlgorithm rijn = SymmetricAlgorithm.Create();

    MemoryStream ms = new MemoryStream();
    byte[] rgbIV = Encoding.ASCII.GetBytes("xhxqtbaoxhvchptd");
    byte[] key = Encoding.ASCII.GetBytes("ajyvccpeycjeauyncgdiohssyvusdknj");

    CryptoStream cs = new CryptoStream(ms, rijn.CreateEncryptor(key, rgbIV), CryptoStreamMode.Write);
    cs.Write(clearTextBytes, 0, clearTextBytes.Length);
    cs.Close();

    return Convert.ToBase64String(ms.ToArray());
}

public string DecryptString(string EncryptedText)
{
    byte[] encryptedTextBytes = Convert.FromBase64String(EncryptedText);
    SymmetricAlgorithm rijn = SymmetricAlgorithm.Create();

    MemoryStream ms = new MemoryStream();
    byte[] rgbIV = Encoding.ASCII.GetBytes("xhxqtbaoxhvchptd");
    byte[] key = Encoding.ASCII.GetBytes("ajyvccpeycjeauyncgdiohssyvusdknj");

    CryptoStream cs = new CryptoStream(ms, rijn.CreateDecryptor(key, rgbIV), CryptoStreamMode.Write);
    cs.Write(encryptedTextBytes, 0, encryptedTextBytes.Length);
    cs.Close();

    return Encoding.UTF8.GetString(ms.ToArray());
} 
```

我有两个问题：

1）我知道将密钥保留在源代码中的做法不好，因为可以阅读源代码的人可以获得密钥。是否有一些关于在何处以及如何存储密钥的最佳实践？

2) 上面的代码是否足够安全，可以部署在生产环境中，记住密钥是安全存储的？

# java - Netty 优化延迟

> ID：16089388
> 
> 赞同：2
> 
> 时间：2013-04-18T17:22:02.873
> 
> 标签：java, performance, tcp, io, netty

我一直在用 netty 4.0 (Alpha 8) 开发代理。一切都很好，目前我需要优化延迟，有效地将大约 4000 字节的字符串从纽约发送到伦敦。我使用 JZlib 编码器将有效负载压缩到分隔帧解码器上。

与专有工具相比，我这样做了，所以我有一个基准，目前我从第三方接口测量，直到我把它放到一个 netty 通道，这个过程对于双方来说都是亚毫秒到 3-5 毫秒的范围，客户端/服务器。在服务器上，我使用从收到消息到将其发送到第三方接口的时间。

在传输时间范围为 200 - 500 毫秒和低于 100 毫秒、1 秒和 2 秒范围内的异常值之间。

目前我正在使用 oio，因为从客户端到服务器只有一个永久连接，所以我使用 tcp 没有延迟。交通繁忙，我正在发送市场数据信息。

目前我想继续远程分析应用程序，让 gcc 日志记录运行，并在本地或服务器上尝试嗅探包并将第三方流量与我当前通过 netty 生成的流量进行比较。

我的问题：

*   我可以用来测量使用netty的组件中使用的时间的netty最重要的一点是什么，那么对于客户端和服务器来说，它是channel.write和messageReceived吗？
*   鉴于这种情况，我应该尝试哪些其他渠道选项来提高性能？
*   使用wireshark 有人建议寻找哪些包属性（我知道这是一个普遍的问题，我将首先比较这些包）。
*   我应该使用 netty 中提供的其他回调或诊断帮助吗？

非常感谢您的建议。

我能够解决它，结果很好。即使对于少量连接，在一些文章中给出的建议是使用 oio 我切换到 nio 这导致大多数传输的传输结果低于 100 毫秒。

# c# - 在 C#/.NET 中使用数据集向 xml 文件添加新内容时出现问题

> ID：16089390
> 
> 赞同：0
> 
> 时间：2013-04-18T17:22:12.797
> 
> 标签：c#, .net, xml, datatable, dataset

我正在尝试使用 C# 和 .Net 将信息存储在 XML 中，但只有我使用 buttonclick 事件编写并“提交”到 XML 的最后一个信息。我之前输入的内容被覆盖。

这是代码：

```
private void lagre_Click(object sender, EventArgs e)
    {

        DataTable dt = new DataTable();

        DataColumn dc1 = new DataColumn("Fullt navn");
        DataColumn dc2 = new DataColumn("Start dato");
        DataColumn dc3 = new DataColumn("Antall dager");

        dt.Columns.Add(dc1);
        dt.Columns.Add(dc2);
        dt.Columns.Add(dc3);

        dt.Rows.Add(gjestenavnInput.Text, datoInnsjekk.Text, antallDager.Text);

        DataSet ds = new DataSet();
        ds.Tables.Add(dt);
        ds.WriteXml("gjesteInfo.xml");

        gjesterutenrom.Items.Add(gjestenavnInput.Text);

        gjestenavnInput.Text = "";
        datoInnsjekk.Text = "";
        antallDager.Text = "";

    } 
```

我试图将 DataTable、DataColumn 和 Dataset 的构造放在按钮事件之外，但它不会在 XML 中存储任何数据。也许dt.rows.add等有问题，但我不知道该怎么写。有任何想法吗？

* * *

感谢您到目前为止所做的努力，RyanWH。:) 我现在试着玩弄你的建议，也许我误解了一些东西，但这就是我所做的：

```
private void InitDataTable()
    {
        dt = new DataTable();
        DataSet ds = new DataSet();
        ds.ReadXml("gjesteInfo.xml");
        dt = ds.Tables[0];

        if (dt.Columns == null){
       DataColumn dc1 = new DataColumn("Fullt navn");
       DataColumn dc2 = new DataColumn("Start dato");
       DataColumn dc3 = new DataColumn("Antall dager");

        dt.Columns.Add(dc1);
        dt.Columns.Add(dc2);
        dt.Columns.Add(dc3);
        }

        ds.WriteXml("gjesteInfo.xml");

    }

    private void lagre_Click(object sender, EventArgs e)
    {

        InitDataTable();

        dt.Rows.Add(gjestenavnInput.Text, datoInnsjekk.Text, antallDager.Text);

        gjesterutenrom.Items.Add(gjestenavnInput.Text);

        gjestenavnInput.Text = "";
        datoInnsjekk.Text = "";
        antallDager.Text = "";

    } 
```

这会产生相同的结果。它会覆盖 XML 文件中的旧内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T09:26:05.697

我使用 David S 建议的 Merging 解决了它。

这是我所做的：

```
 DataTable dt;

    private void InitDataTable()
    {
        dt = new DataTable();
        DataSet ds = new DataSet();
        ds.ReadXml("gjesteInfo.xml");
        ds.Tables.Add(dt);

        DataColumn dc1 = new DataColumn("Fullt navn");
        DataColumn dc2 = new DataColumn("Start dato");
        DataColumn dc3 = new DataColumn("Antall dager");

        dt.Columns.Add(dc1);
        dt.Columns.Add(dc2);
        dt.Columns.Add(dc3);

        dt.Rows.Add(gjestenavnInput.Text, datoInnsjekk.Text, antallDager.Text);

        ds.Merge(dt); //Merging the dataset with the table and preventing it to be overwritten

        ds.WriteXml("gjesteInfo.xml");

    }

    private void lagre_Click(object sender, EventArgs e)
    {

        InitDataTable();

        dt.Rows.Add(gjestenavnInput.Text, datoInnsjekk.Text, antallDager.Text);

        gjesterutenrom.Items.Add(gjestenavnInput.Text);

        gjestenavnInput.Text = "";
        datoInnsjekk.Text = "";
        antallDager.Text = "";

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T17:33:22.690

如果我理解正确，您想在按下按钮时将信息附加到您的 DataTable 中吗？第一行，你的表的声明，应该为你的整个类定义，可能是你的'gjestenavnInput'变量被声明的地方。

```
 DataTable dt; 
```

这将允许您的按钮功能引用此数据表，并且还允许该表在您的程序运行时保持不变。

然后，您需要在构造函数/初始化中使用这些行来创建表并设置列：

```
 dt = new DataTable();

    DataColumn dc1 = new DataColumn("Fullt navn");
    DataColumn dc2 = new DataColumn("Start dato");
    DataColumn dc3 = new DataColumn("Antall dager");

    dt.Columns.Add(dc1);
    dt.Columns.Add(dc2);
    dt.Columns.Add(dc3); 
```

您的代码，就像现在一样，每次单击按钮时都会创建一个包含 0 列和 0 行的全新 DataTable。然后，您创建三列并将其添加到表中。最后，向表中添加一行。在完成所有表格操作之后，您将表格写入 XML，此时您的表格只知道以下内容：它有 3 列，有 1 行。然后，您将字段重置为空字符串。

在函数结束时，您的 DataTable 对象超出范围并被删除，这意味着下次单击按钮时会发生完全相同的事情：创建了一个包含 0 列和 0 行的表，添加了三列，添加一行，将其写入 XML，然后将字段重置为空字符串。

**第二次编辑**

我在下面修改了您的一些更新代码。希望这可以帮助。

```
private void InitDataTable()
{
    dt = new DataTable();
    DataSet ds = new DataSet();
    ds.ReadXml("gjesteInfo.xml");

    DataTableCollection tables = ds.Tables;

    if (0 == tables.Count){
        DataColumn dc1 = new DataColumn("Fullt navn");
        DataColumn dc2 = new DataColumn("Start dato");
        DataColumn dc3 = new DataColumn("Antall dager");

        dt.Columns.Add(dc1);
        dt.Columns.Add(dc2);
        dt.Columns.Add(dc3);
    }
    else 
    {
        dt = tables[0];
    }
}

private void lagre_Click(object sender, EventArgs e)
{

    InitDataTable();

    dt.Rows.Add(gjestenavnInput.Text, datoInnsjekk.Text, antallDager.Text);

    gjesterutenrom.Items.Add(gjestenavnInput.Text);

    DataSet ds = new DataSet();
    ds.Tables.Add(dt);
    ds.WriteXml("gjesteInfo.xml");

    gjestenavnInput.Text = "";
    datoInnsjekk.Text = "";
    antallDager.Text = "";

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T17:45:39.437

可能`ds.WriteXml("gjesteInfo.xml");`会覆盖文件中的所有内容。您需要加载文件，并将其与新信息合并。也许`DataSet`s`Merge`函数在这里会很有用。

编辑：在这里查看哪些功能适合您解决加载->合并->保存的问题[http://msdn.microsoft.com/en-us/library/831szy8a.aspx](http://msdn.microsoft.com/en-us/library/831szy8a.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T14:59:03.563

您需要先*读取*现有数据，添加到其中，然后再*写入*。简要地：

```
dt.ReadXml();
dt.AddRow(...);
dt.WriteXml(); 
```

XML 文件只是文本文件。你不能写到他们中间。

# asp.net-mvc - 防止针对 PUT 和删除请求的 CSRF 攻击 ASP.NET Web API

> ID：16089393
> 
> 赞同：2
> 
> 时间：2013-04-18T17:22:28.197
> 
> 标签：asp.net-mvc, security, asp.net-web-api, csrf

ValidateAntiForgeryToken 是否适用于 PUT 和 Delete 请求或仅适用于 ASP.NET Web API 中的 post 请求？如果不是，那么确保其安全的最佳方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T18:34:04.717

反 CSRF 通常通过匹配来自 cookie 和 body 的令牌来验证非 ajax 调用中的请求，如浏览器表单发布。

在 ajax 调用中，建议在自定义标头中放置一个标记。如果您安装了最新的[ASP.NET 2012.2 更新](http://www.asp.net/vnext)。它在 MVC 项目对话框中有一个 spa 模板，它演示了如何在 SPA 应用程序中防止 CSRF。这是从模板复制的代码，用于从服务器端验证标头令牌。

```
public class ValidateHttpAntiForgeryTokenAttribute : AuthorizationFilterAttribute
{
    public override void OnAuthorization(HttpActionContext actionContext)
    {
        HttpRequestMessage request = actionContext.ControllerContext.Request;

        try
        {
            if (IsAjaxRequest(request))
            {
                ValidateRequestHeader(request);
            }
            else
            {
                AntiForgery.Validate();
            }
        }
        catch (HttpAntiForgeryException e)
        {
            actionContext.Response = request.CreateErrorResponse(HttpStatusCode.Forbidden, e);
        }
    }

    private bool IsAjaxRequest(HttpRequestMessage request)
    {
        IEnumerable<string> xRequestedWithHeaders;
        if (request.Headers.TryGetValues("X-Requested-With", out xRequestedWithHeaders))
        {
            string headerValue = xRequestedWithHeaders.FirstOrDefault();
            if (!String.IsNullOrEmpty(headerValue))
            {
                return String.Equals(headerValue, "XMLHttpRequest", StringComparison.OrdinalIgnoreCase);
            }
        }

        return false;
    }

    private void ValidateRequestHeader(HttpRequestMessage request)
    {
        string cookieToken = String.Empty;
        string formToken = String.Empty;

        IEnumerable<string> tokenHeaders;
        if (request.Headers.TryGetValues("RequestVerificationToken", out tokenHeaders))
        {
            string tokenValue = tokenHeaders.FirstOrDefault();
            if (!String.IsNullOrEmpty(tokenValue))
            {
                string[] tokens = tokenValue.Split(':');
                if (tokens.Length == 2)
                {
                    cookieToken = tokens[0].Trim();
                    formToken = tokens[1].Trim();
                }
            }
        }

        AntiForgery.Validate(cookieToken, formToken);
    }
} 
```

从客户端，您还需要在 ajax 调用中设置标头。这是来自 todo.datacontext.js 的代码：

```
function ajaxRequest(type, url, data, dataType) { // Ajax helper
    var options = {
        dataType: dataType || "json",
        contentType: "application/json",
        cache: false,
        type: type,
        data: data ? data.toJson() : null
    };
    var antiForgeryToken = $("#antiForgeryToken").val();
    if (antiForgeryToken) {
        options.headers = {
            'RequestVerificationToken': antiForgeryToken
        }
    }
    return $.ajax(url, options);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-13T20:48:02.957

我编写了一个动作过滤器类来处理防伪令牌的验证..

```
public class WebApiValidateJsonToken : System.Web.Http.Filters.ActionFilterAttribute
{
    public override void OnActionExecuting(HttpActionContext filterContext)
    {
        //get the base url or virtual directory of web app
        var virtualDirectory = filterContext.Request.Headers.GetValues("vd").First();

        //base 64 encode the virtual directory
        var encodedVirtualDirectory = Convert.ToBase64String(Encoding.UTF8.GetBytes(virtualDirectory));

        //set cookie name to look for to append '_' + base 64 encoded virtual directory to match how Asp.Net Html.AntiforgeryToken 
        //names the cookie that holds the token
        var cookieName = "__RequestVerificationToken" + (String.IsNullOrEmpty(encodedVirtualDirectory) ? "" : "_" + ReplacePadding(encodedVirtualDirectory));

        //get the formtoken created by the Html.AntiforgeryToken helper (hidden input element in view) value sent in ajax header
        var formtoken = filterContext.Request.Headers.GetValues("antiForgeryToken").First();

        //get the cookie token value with the name generated from above
        var cookietoken = filterContext.Request.Headers.GetCookies(cookieName).FirstOrDefault()[cookieName].Value;

        try
        {
            //Validate antiforgery token the old way because can't use ValidateAntiforgeryToken attribute with JSON content
            System.Web.Helpers.AntiForgery.Validate(cookietoken, formtoken);
            base.OnActionExecuting(filterContext);
        }
        catch
        {
            throw new ArgumentException("CSRF");
        }

    }

    //Supporting Method to strip base 64 '=' padding and replace with the number representation of padding
    public string ReplacePadding(string b64)
    {
        var count = b64.Count(x => x == '=');
        b64 = b64.Substring(0, b64.Length - count);
        return b64 + count.ToString();
    }
} 
```

这是我在视图中实现它的方式：

```
baseUrl = '@Url.Content("~/")';

        $.ajaxSetup({
            headers: {
                antiForgeryToken: $('input[name="__RequestVerificationToken"]').val(),
                vd: baseUrl.substring(0, baseUrl.length - 1)
            }
        });

                $.ajax({
                    url: '@Url.Content("~/api/WebApiAction")',
                    data: JSON.stringify(paramObject),
                    contentType: "application/json",
                    type: 'PUT'
                })
                .done(function (data) {/*do stuff*/}); 
```

# php - Difficulty manipulating iTunes API's JSON return data

> ID：16089395
> 
> 赞同：0
> 
> 时间：2013-04-18T17:22:30.403
> 
> 标签：php, json, itunes

I'm creating a music based application, and i'm trying to access the iTunes api to return a link to purchase an album, that is generated dynamically based on the album clicked on (which works fine, and generates a link to the correct JSON data). [An Example link](https://itunes.apple.com/search?country=GB&media=music&entity=album&limit=1&artist=The%20Rolling%20Stones&term=Let%20It%20Bleed)

What i can't get my head around is the accessing of the 'collectionViewUrl' key in the JSON, which i simply want to set as the href of a link that appears after the album art is selected, which will be scored in; `$topalbums[$i]['iTunes'] = ....`

I've tried using `json_decode` to access the data but whenever I try to access the key I need i get no return. Am I missing something simple with this?

==================================

(My current code for this section)

```
$iTunes_link_prefix = "https://itunes.apple.com/search?country=GB&media=music&entity=album&limit=1&artist=";

    for ($i = 0; $i < 6; $i++) {
        $topalbum[$i]['title'] = $xml['top_albums']->topalbums->album[$i]->name;
        $topalbum[$i]['image'] = $xml['top_albums']->topalbums->album[$i]->image[3];

        $json_link = $iTunes_link_prefix . $artist . "&term=" . urlencode($topalbum[$i]['title']);

        $topalbum[$i]['itunes'] = (Contents of the collectionViewUrl Key)

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T17:35:18.680

For this, remember that the json that you get has to be transformed "before" you can actually operate with it. As i see in the example that you show you have to do somehting like get the json content (with curl or don't know how you do), as you get the content you do:

```
$itunesDisc = json_decode($jsonFromItunes); 
```

Then, you have the contents of the json. If all the json's that iTunes returns are in the form of response:[...] you can do this for simplicity

```
$itunesDisc = $itunesDisc["response"]; 
```

Then you can walk through the array. Maybe this page can help you in show you the content of a json response [http://jsonviewer.stack.hu/](http://jsonviewer.stack.hu/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T17:37:27.427

A simple solution, just change your **foreach** code to this:

```
for ($i = 0; $i < 6; $i++) {
    $topalbum[$i]['title'] = $xml['top_albums']->topalbums->album[$i]->name;
    $topalbum[$i]['image'] = $xml['top_albums']->topalbums->album[$i]->image[3];

    $json_link = "{$iTunes_link_prefix}{$artist}&term=" . urlencode($topalbum[$i]['title']);

    // Fetch the JSON data from iTunes - you can add some more verifications here
    // to make sure your app runs smooth if the request fails for some reason
    $itunes_json       = file_get_contents($json_link);
    $itunes_album_data = json_decode($itunes_json, true);

    // Access the URL from the 1st result if any
    if (!empty($itunes_album_data['results'][0]['collectionViewUrl'])) {
        $topalbum[$i]['itunes'] = $itunes_album_data['results'][0]['collectionViewUrl'];
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T18:24:26.817

I found that the error was actually in the generation of the link to the JSON after I tried entering the static link in place of the dynamically generated one. The `$artist` variable needed to be run through `urlencode()`. The following is the final code for the section, thanks for assistance!

```
for ($i = 0; $i < 6; $i++) {
        $topalbum[$i]['title'] = $xml['top_albums']->topalbums->album[$i]->name;
        $topalbum[$i]['image'] = $xml['top_albums']->topalbums->album[$i]->image[3];

        $json_link = $iTunes_link_prefix . urlencode($artist) . "&term=" . urlencode($topalbum[$i]['title']);
        $itunes_json       = file_get_contents($json_link);
        $itunes_album_data = json_decode($itunes_json);

        if (!empty($itunes_album_data->results[0]->collectionViewUrl)) {
            $topalbum[$i]['itunes'] = $itunes_album_data->results[0]->collectionViewUrl;
        }
    } 
```

# javascript - 如何使用jQuery检测触摸设备上的向下滚动？

> ID：16089402
> 
> 赞同：0
> 
> 时间：2013-04-18T17:23:01.670
> 
> 标签：javascript, jquery, iphone, events, touch

我有一个像这样调用的无限滚动方法：

```
$(window).on('scroll resize load', function() {
    // execute infinite scroll method
}); 
```

因此它在以下事件下执行：

```
scroll
resize 
load 
```

但它不适用于 iphone（以及可能的其他触摸设备）。

这是一个响应式网站，我不需要使用 jQuery mobile 等。我尝试使用独立插件：

[http://www.netcu.de/jquery-touchwipe-iphone-ipad-library](http://www.netcu.de/jquery-touchwipe-iphone-ipad-library)

但是这个插件和其他插件必须像这样调用：

```
$(window).touchwipe({
     wipeDown: function() {
        // execute infinite scroll method
     }
}); 
```

但这意味着我必须有 2 个版本的代码。我正在寻找可以简单地添加到现有代码中的东西：

```
$(window).on('scroll resize load NEW_EVENT_HERE', function() { 
```

怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T18:03:35.437

你可以让他们调用相同的函数。

```
var infiniteScrollMethod=function() {
      // execute infinite scroll method
}
$(window).on('scroll resize load', infiniteScrollMethod).touchwipe({
    wipeDown: infiniteScrollMethod
}); 
```

# c# - 实体框架返回空值

> ID：16089404
> 
> 赞同：0
> 
> 时间：2013-04-18T17:23:20.933
> 
> 标签：c#, entity-framework

我正在尝试将我的 WCF 服务中的列表返回给客户端。

我正在使用实体框架来查询我的数据库

我的实体框架库中有以下代码：

```
public List<Users> getUsersByLastName(string pLastName)
{
    using (var context = new AMTEntitiesContainer())
    {
        var users = context.Users
                           .Where((c) => c.LastName.Contains(pLastName))
                           .ToList();
        return users;
    }
} 
```

这就是我在 WCF 中捕获结果并返回它的方式：

```
public List<wcfUser> getUsersByLastName(string pLastName)
{
    UserMethods userMethods = new UserMethods();
    List<Users> usersList = userMethods.getUsersByLastName(pLastName);
    List<wcfUser> usersListForClient = new List<wcfUser>();
    wcfUser usersForClient = new wcfUser();
    foreach (Users u in usersList)
    {
        usersForClient = new wcfUser();
        TranslateServerUserToClientUser(u, usersForClient);
        usersListForClient.Add(usersForClient);
    }
    return usersListForClient;
} 
```

问题是，由于某种原因 usersList 总是空的..为什么会这样？

我通过将相同的查询放入 LINQPad 来检查数据库是否为空

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T02:24:42.863

这解决了它，显然数据库正在返回一些奇怪的东西，但这捕获了它：

```
private AMTEntitiesContainer context = new AMTEntitiesContainer();

public IEnumerable<Users> getUsersByLastName(string pLastName)
{
    IQueryable<Users> results;

    results = (from m in context.Users
               where m.LastName.StartsWith(pLastName)
               select m);

    return results;
} 
```

# list - Haskell 列表连接推断类型

> ID：16089413
> 
> 赞同：1
> 
> 时间：2013-04-18T17:24:00.340
> 
> 标签：list, haskell, inferred-type

尝试用新元素替换列表中给定点的元素，然后返回该元素。

```
 setelt :: Int -> [a] -> a -> [a]
 setelt x (yf:(y:yl)) z
   | x == (length yf) = (yf:(z:yl)) 
```

导致此错误：

```
Inferred type is not general enough
Expression    : setelt
Expected type : Int -> [a] -> a -> [a]
Inferred type : Int -> [[a]] -> [a] -> [[a]] 
```

似乎没有串联的问题，`yf:y:yl`所以不知道如何解决。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-18T17:34:20.570

您似乎误解了列表构造函数的`(:)`作用。Haskell 列表是以`(:)`空列表结尾的构造函数序列`[]`，模式匹配只是以相同的顺序反汇编这些构造函数。

因此，当您对真正匹配的内容进行模式匹配时`(yf:(y:yl))`，您真正匹配的是一个至少包含两个元素的列表，`yf`并且`y`, 和`yl`作为列表的其余部分。

推断的类型不是您所期望的，因为这`length yf`意味着`yf`——输入列表的第一个元素——本身就是一个列表。

相反，您需要做的是递归地遍历列表，`x`当您到达正确的位置时，使用输入的当前元素或替换元素构建一个新列表。一般形式应该类似于标准库函数`map`，其实现方式如下：

```
map _ [] = []
map f (x:xs) = f x : map f xs 
```

除了您需要一种方法来跟踪您正在搜索的索引，而不是转换每个元素。

如果应用于 0 或 1 个元素的列表，您当前的函数也会失败，但在更正整个算法后应该很容易修复该问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T20:07:53.313

阅读 CA McCann 的答案以获得更多见解，特别是对于列表太短的问题。在不修改算法的情况下，您可以通过以下简单更改来修复代码：

```
 setelt :: Int -> [a] -> a -> [a]
 setelt x (yf:(y:yl)) z
   | x == (length (y:yl)) = (yf:(z:yl)) 
```

可以简洁地重写：

```
 setelt :: Int -> [a] -> a -> [a]
 setelt x (yf:ys@(_:yl)) z
   | x == (length ys) = (yf:(z:yl)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T21:05:25.163

除了模式匹配的问题（我也推荐 CA McCann 的答案），您的程序可能没有您预期的效率，而且肯定比它可能的效率低。

问题在于 Haskell 的列表是简单的单链表，它们不能以方便的、O(1) 可访问的形式来携带它们的长度。Haskell`length`必须计算列表节点的数量，这需要 O(N) 时间。这意味着`setelt` （由 Nicolas Dudebout 的回答提供）的直接更正版本将在*每个 step*扫描剩余列表，产生 O(N^2) 最坏情况下的性能，而不是可能的 O(N)。

要解决此问题，请先扫描列表以获取长度。类似于以下实现，它是 O(N) （尽管使用`take`并`drop`最终扫描列表的次数超过了严格必要的次数）：

```
setelt :: Int -> [a] -> a -> [a]
setelt n ys z = front ++ z:back where
  count = length ys - n
  front = take count ys
  (_:back) = drop count ys 
```

最后，如果不清楚：标准的 Haskell 列表索引（由`take`、`drop`和使用`!!`）从列表头部的 0 开始，而不是尾部的 1 （这可能是您对 , 的意图`setelt`，并且已实现以上）。如果您的意图是从 0 开头，则实现更容易：

```
setelt n ys z = front ++ z:back where
    front = take n ys
    (_:back) = drop n ys 
```

或者，更有效地：

```
setelt 0 (y:ys) z = z:ys
setelt n (y:ys) z = y:setelt (n-1) ys z 
```

# ios - 屏幕旋转后的 UIImageView 和 UIButton 混乱图像

> ID：16089414
> 
> 赞同：1
> 
> 时间：2013-04-18T17:24:00.640
> 
> 标签：ios, objective-c, uiimageview, uibutton, uikit

我正在尝试用箭头制作容器。容器是`UIView`，箭头是`UIImageView`与父中心相对的定位。

我创建了一个带有背景图像按钮的“弹出框”并添加了一个箭头。它工作得很好。

![一切都好](https://i.stack.imgur.com/IyR5J.png)

您会看到矩形边很锋利。

好的，让我们旋转。

![混乱 1](https://i.stack.imgur.com/mEnvG.png)

笏。再转...

![混乱 2](https://i.stack.imgur.com/bFf7m.png)

图像被缩放。甚至调整大小也不是一成不变的。但是所有框架都可以。

旋转前

```
2013-04-18 21:20:41.198 Project[15790:907] 
conta: {{124, 313}, {200, 49}}
content: {{0, 9}, {200, 40}}
arrow: {{87, 0}, {19, 9}} 
```

旋转后

```
2013-04-18 21:22:06.717 Project[15790:907] 
container: {{161, 387}, {200, 49}}
content: {{0, 9}, {200, 40}}
arrow: {{87, 0}, {19, 9}} 
```

那里发生了什么？我尝试了几乎所有的内容模式或其他方式。`autoresizeSubviews`关闭所有视图。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T17:39:51.187

旋转后，调用`CGRectIntegral`相关视图的框架。

问题的原因是你在像素之间结束，所以一切都被混叠了。这通常发生在例如视图居中时。

确认模拟器中发生这种情况的一种快速方法是检查 Debug > Color Misaligned Images。如果这些图像是彩色的，那么是的，它们是未对齐的：它们不是在整数像素坐标处绘制的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T17:49:04.453

如果计算箭头的高度，旋转前高度为 18 像素，旋转后高度为 19 像素。

所以当你缩放时，它会发生什么是抗锯齿并创建灰线。因此，您可以通过多种方式进行操作。这是一篇关于以正确方式调整大小的精彩帖子：

[http://vocaro.com/trevor/blog/2009/10/12/resize-a-uiimage-the-right-way/](http://vocaro.com/trevor/blog/2009/10/12/resize-a-uiimage-the-right-way/)

希望能帮助到你。

# javascript - 在javascript中检测按键的最简单方法

> ID：16089421
> 
> 赞同：87
> 
> 时间：2013-04-18T17:24:27.463
> 
> 标签：javascript, jquery, html, keyboard, easeljs

我有一个 javascript 游戏的想法（我将使用 EaselJS 制作它），我将不得不检测按键。在互联网上环顾四周后，我看到了很多建议（使用 window.onkeypress，使用 jQuery 等），但几乎每个选项都有反驳。你们有什么建议？使用 jQuery 听起来很容易，但我几乎没有使用该库的经验（而且我也不是 javascript 的资深人士）所以我宁愿避免使用它。如果 jQuery 是最好的选择，有人可以举一个很好的例子（解释会很棒）如何做到这一点？

我想这被问了很多，但我找不到任何明确的答案。提前致谢！

* * *

## 回答 #1

> 赞同：118
> 
> 时间：2013-04-18T17:26:56.430

使用纯 Javascript，最简单的是：

```
document.onkeypress = function (e) {
    e = e || window.event;
    // use e.keyCode
}; 
```

但是这样一来，您只能为事件绑定一个处理程序。

此外，您可以使用以下内容潜在地将多个处理程序绑定到同一事件：

```
addEvent(document, "keypress", function (e) {
    e = e || window.event;
    // use e.keyCode
});

function addEvent(element, eventName, callback) {
    if (element.addEventListener) {
        element.addEventListener(eventName, callback, false);
    } else if (element.attachEvent) {
        element.attachEvent("on" + eventName, callback);
    } else {
        element["on" + eventName] = callback;
    }
} 
```

在任何一种情况下，`keyCode`浏览器之间都不一致，因此需要检查和找出更多内容。注意`e = e || window.event`- 这是 Internet Explorer 的一个正常问题，将事件放入`window.event`而不是将其传递给回调。

参考：

*   [https://developer.mozilla.org/en-US/docs/DOM/Mozilla_event_reference/keypress](https://developer.mozilla.org/en-US/docs/DOM/Mozilla_event_reference/keypress)
*   [https://developer.mozilla.org/en-US/docs/DOM/EventTarget.addEventListener](https://developer.mozilla.org/en-US/docs/DOM/EventTarget.addEventListener)

使用 jQuery：

```
$(document).on("keypress", function (e) {
    // use e.which
}); 
```

参考：

*   [http://api.jquery.com/on/](http://api.jquery.com/on/)

除了 jQuery 是一个“大型”库之外，jQuery 确实有助于解决浏览器之间的不一致问题，尤其是窗口事件……这是不可否认的。希望很明显，我为您的示例提供的 jQuery 代码更优雅、更短，但以一致的方式完成了您想要的工作。您应该能够相信`e`（事件）和`e.which`（键代码，用于知道按下了哪个键）是准确的。在纯 Javascript 中，除非您执行 jQuery 库内部所做的所有事情，否则很难知道。

请注意，有一个`keydown`事件不同于`keypress`. 您可以在此处了解有关它们的更多信息：[onKeyPress Vs。onKeyUp 和 onKeyDown](https://stackoverflow.com/questions/3396754/onkeypress-vs-onkeyup-and-onkeydown)

至于建议使用什么，如果您准备学习该框架，我肯定会建议使用 jQuery。同时，我想说你应该学习 Javascript 的语法、方法、特性，以及如何与 DOM 交互。一旦你理解了它是如何工作的以及发生了什么，你应该更容易使用 jQuery。对我来说，jQuery 让事情变得更加一致和简洁。最后，它是 Javascript，并包装了语言。

另一个非常有用的 jQuery 示例是 AJAX。浏览器与 AJAX 请求的处理方式不一致，因此 jQuery 将其抽象化，因此您不必担心。

这可能有助于决定：

*   [http://www.jscripters.com/jquery-disadvantages-and-advantages/](http://www.jscripters.com/jquery-disadvantages-and-advantages/)

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2016-09-10T23:20:19.883

**KEYPRESS**（回车键）
*在片段内单击并按回车键。*

**香草**

```
document.addEventListener("keypress", function(event) {
  if (event.keyCode == 13) {
    alert('hi.');
  }
});
```

**香草速记**(ES6)

```
this.addEventListener('keypress', event => {
  if (event.keyCode == 13) {
    alert('hi.')
  }
})
```

**jQuery**

```
$(this).on('keypress', function(event) {
  if (event.keyCode == 13) {
    alert('hi.')
  }
})
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
```

**jQuery 经典**

```
$(this).keypress(function(event) {
  if (event.keyCode == 13) {
    alert('hi.')
  }
})
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
```

**jQuery 速记**(ES6)

```
$(this).keypress((e) => {
  if (e.keyCode == 13)
    alert('hi.')
})
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
```

**更短**（ES6）

```
$(this).keypress(e=>
  e.which==13?
  alert`hi.`:null
)
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
```

**由于一些要求，这里有一个解释：**

我重写了这个答案，因为随着时间的推移，事情已经被弃用，所以我更新了它，因为评论中的一些人说它太多了“bla-bla”。它不是关于“keydown”，而是关于“keypress”。所以像“Esc”这样的非字符键不应该那样工作。

当文档准备好时，为了简洁起见，我曾经[`this`](https://developer.mozilla.org/de/docs/Web/JavaScript/Reference/Operators/this)专注于结果内的窗口范围，但这不是必需的。

**已弃用：**
and[`.which`](https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/which)方法[`.keyCode`](https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/keyCode)实际上被认为已弃用，所以我会推荐[`.code`](https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/code)，但我个人仍然使用 keyCode，因为性能要快得多，只有这对我来说很重要。jQuery 经典版本[`.keypress()`](https://api.jquery.com/keypress/)并没有像某些人所说的那样被正式弃用，但它们不再是首选，[`.on('keypress')`](https://api.jquery.com/on/)因为它具有更多功能（实时状态、多个处理程序等）。原版版本中的`'keypress'`事件也已被弃用。今天，人们应该更喜欢[beforeinput](https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/beforeinput_event)或[keydown](https://developer.mozilla.org/en-US/docs/Web/API/Document/keydown_event)`keyup`。

**性能：**
越快越好。这就是为什么我更喜欢`.keyCode`即使它被认为已弃用（在大多数情况下）。不过，这完全取决于您（2020 年提交）。

[**性能测试**](https://jsbench.me/7gka9h6e8a)

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2018-02-18T19:17:31.520

# 使用`event.key`和现代的 JS！

*没有数字代码*了。您可以直接使用`"Enter"`、`"ArrowLeft"`、`"r"`或任何键名，使您的代码更具可读性。

> 注意：旧的替代品 (`.keyCode`和`.which`) 已弃用。

```
document.addEventListener("keypress", function onEvent(event) {
    if (event.key === "ArrowLeft") {
        // Move Left
    }
    else if (event.key === "Enter") {
        // Open Menu...
    }
}); 
```

[Mozilla 文档](https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/key)

[支持的浏览器](http://caniuse.com/#feat=keyboardevent-key)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-04-18T17:38:10.993

有几种方法可以处理它；Vanilla JavaScript 可以很好地做到这一点：

```
function code(e) {
    e = e || window.event;
    return(e.keyCode || e.which);
}
window.onload = function(){
    document.onkeypress = function(e){
        var key = code(e);
        // do something with key
    };
}; 
```

或者更结构化的处理方式：

```
(function(d){
    var modern = (d.addEventListener), event = function(obj, evt, fn){
        if(modern) {
            obj.addEventListener(evt, fn, false);
        } else {
            obj.attachEvent("on" + evt, fn);
        }
    }, code = function(e){
        e = e || window.event;
        return(e.keyCode || e.which);
    }, init = function(){
        event(d, "keypress", function(e){
            var key = code(e);
            // do stuff with key here
        });
    };
    if(modern) {
        d.addEventListener("DOMContentLoaded", init, false);
    } else {
        d.attachEvent("onreadystatechange", function(){
            if(d.readyState === "complete") {
                init();
            }
        });
    }
})(document); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2020-04-25T19:15:24.123

不要过于复杂。

```
 document.addEventListener('keydown', logKey);
    function logKey(e) {
      if (`${e.code}` == "ArrowRight") {
        //code here
      }
          if (`${e.code}` == "ArrowLeft") {
        //code here
      }
          if (`${e.code}` == "ArrowDown") {
        //code here
      }
          if (`${e.code}` == "ArrowUp") {
        //code here
      }
    } 
```

# java - 如何知道我的文件在 Web 服务中的正确路径（文件异常）

> ID：16089422
> 
> 赞同：0
> 
> 时间：2013-04-18T17:24:29.283
> 
> 标签：java, file, service, web, client

我正在使用 java web 服务，该服务包括应该从文件中读取数据的方法，并且服务的客户端必须将文件的路径作为字符串发送，当我尝试这样做并发送路径时，我遇到麻烦，错误是：

```
 readFile.client.IOException_Exception: src\rm.txt (The system cannot find the path specified) 
```

（该文件存在于 src 文件夹 - 源代码文件夹 -

有什么建议吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T17:40:12.323

将文件放在您的 WEB-Inf 中，您可以使用“文件名”访问它。

但是您可以添加一个方法让客户端知道哪些文件可用并将此路径返回给服务器，然后如果您更改名称或其他内容，它不会影响客户端。

# wpf - WPF多点触控模拟：为什么TouchDevice.Id是258？

> ID：16089425
> 
> 赞同：0
> 
> 时间：2013-04-18T17:24:35.423
> 
> 标签：wpf, multi-touch

我按照[以下步骤](http://www.wenjiun.my/2009/11/testing-windows-7-multi-touch-with.html)下载[Multi-Touch Vista](http://multitouchvista.codeplex.com/)并将其配置为使用多个鼠标模拟手指触摸。

效果很好，现在屏幕上有两个红点，每个都由鼠标控制。

然后我编写了一个 WPF 应用程序，它有一个带有 Canvas 的窗口，在 Canvas 的 TouchDown 事件处理程序中，我记录了哪个手指（鼠标）正在触摸屏幕。

```
private void canvas_TouchDown(object sender, TouchEventArgs e)
{
    System.Diagnostics.Debug.WriteLine(e.TouchDevice.Id);
} 
```

但令我惊讶的`Id`是，无论我使用哪种鼠标，它总是 258 - 我希望它从 0 或 1 开始，并且 2 个手指（鼠标）之间的 Id 不同。

我在 Win7 32bit 上测试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-11T13:46:08.820

我最近买了一个触摸显示器，我可以在新显示器上测试相同的代码。事实证明，Id 属性仅在存在多个触摸（手指/触控笔）时才有用，第一个触摸设备将被分配一个“基本 Id”，第二个触摸设备将被分配（“基本 Id”+ 1），并且很快。在我的新触摸显示器上，当我使用所有十根手指时，它们的 ID 将被分配为 428、429、430、...、437。

我猜“基本 ID”在不同的显示器上可能会有所不同。

# excel - Excel自定义负数格式

> ID：16089429
> 
> 赞同：1
> 
> 时间：2013-04-18T17:24:49.227
> 
> 标签：excel

如何创建将负数显示为零的 Excel 自定义格式选项？

现在我正在使用它`##;"0";0`，但它忽略了诸如 0.25、0.85 和 0.366666667 之类的值（似乎只承认 1 或更大）。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T17:30:58.603

您希望使用多少个十进制值？`##`不会显示任何，所以`0.2`会变成`<empty>`，但`##.#`会返回`.2`。

为了根据您要查找的内容完善格式，在我自己的机器上我使用了`##.###;"0";0`. 如果您想要前导零（`0.2`vs. `.2`），请使用`#0.###;"0";0`.

# dbus - 允许对我的 D-Bus 系统服务进行自省

> ID：16089438
> 
> 赞同：2
> 
> 时间：2013-04-18T17:25:10.910
> 
> 标签：dbus

在花了一点时间了解 D-Bus 会话和系统总线是如何工作的之后，我现在专注于允许人们使用和内省我的服务，以便让任何人都可以使用我的服务轻松实现功能。

然后，我编写了以下配置文件，并将其放入我的`/etc/dbus-1/system.d/`:

```
 <!DOCTYPE busconfig PUBLIC "-//freedesktop//DTD D-BUS Bus Configuration 1.0//EN"
     "http://www.freedesktop.org/standards/dbus/1.0/busconfig.dtd">
 <busconfig>
  <policy user="root">
    <allow own="org.zedroot.Test" />
    <allow send_destination="org.zedroot.Test" />
  </policy>
  <policy context="default">
    <allow send_destination="org.zedroot.Test"
           send_interface="org.zedroot.Test" />
    <allow send_destination="org.zedroot.Test"
           send_interface="org.freedesktop.DBus.Introspectable" />
    <allow send_destination="org.zedroot.Test"
           send_interface="org.freedesktop.DBus.Properties" />
  </policy>
</busconfig> 
```

但是使用 d-feet 我可以看到我的服务，但不能对其进行内省（我在服务中看不到任何东西：没有方法、信号或属性）。

谁能帮帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T16:33:06.953

重新启动计算机后，它现在可以工作了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-10-18T20:03:14.580

备查。

以下内容应该足以让您对您的服务进行自省：

```
.
.
<!-- Allow introspect -->
<policy context="default">
  <allow send_destination="org.zedroot.Test"/>
</policy>
.
. 
```

# css - CSS3 过渡或 Javascript 预加载效果

> ID：16089439
> 
> 赞同：2
> 
> 时间：2013-04-18T17:25:14.083
> 
> 标签：css, css-transitions

我从 CSS3 过渡开始，我刚刚发现加载页面的效果很好，如下链接：[http ://stsintegrity.com](http://stsintegrity.com)

我一直在尝试自己实现它，通过在主体上进行加载，然后在 JS 中创建一个带有转换的函数，但它根本不起作用，并且通过 CSS 我找不到方法。因此，如果有人可以给我一些关于它如何工作的指导或类似的东西来添加它，我将不胜感激

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T19:53:14.863

[使用 jQuery 和jQuery Transit](http://ricostacruz.com/jquery.transit/)很容易做到这一点：

```
$(".transitionOverlayPage").transition({
    delay: 2000,
    y: '-120%'
}, 'slow', 'in', function () { $(this).remove(); }); 
```

## [JS 小提琴演示](http://jsfiddle.net/TheGAFF/Kk8rH/)

我添加了 2 秒延迟，以便您可以更轻松地看到它。（你会删除它）基本上，你会把它放在你的 jQuery onLoad 函数中。

# java - Optimal way to construct an instance from an http request parameters

> ID：16089443
> 
> 赞同：1
> 
> 时间：2013-04-18T17:25:29.663
> 
> 标签：java, jakarta-ee, servlets, constructor, http-request-parameters

In my project i have:

1.  a servlet that handles http requests with users profile info as parameters, i.e (userName = "Bob" , password = "ugaBaga", address = "blabla"... )

2.  a User class that represents the user info. getters + setters : getName(), setName(String username)....

my question is , is there an easy way to create a new user instance from the httpRequest parameters?

something like :

User newUser = createUserFromParams (new User(), httpRequestParameters);

(without the need to write : user.setName(parameters.getParameter("userName")) for each of my 30~ fields)

p.s - I'm not really sending a password, i couldn't think of a fieldname. the passwords are being sent by sms's ;)

thanks in advance!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T17:33:09.860

有 HttpServletRequest.getParameterMap，但它提供了一个`Map<String, String[]>`你可以拥有的 `?a=1&a=2'。所以像 BeanUtils 这样的东西是行不通的。

但是您可以使用 java 反射创建自己的实用程序类，或者将请求参数转换为`Map<String, String>`并使用标准 bean 实用程序 ( [apache](http://commons.apache.org/proper/commons-beanutils/api/) )。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T19:20:30.240

Java 生态系统中有几个 MVC 框架可以处理特定问题 - 将请求参数绑定到特定类 - 这是我最喜欢的一个 Spring MVC。[根据Spring Site](http://static.springsource.org/spring/docs/3.0.0.M3/reference/html/ch20s09.html)的框架的好处之一是：

> 将参数绑定到的命令/表单对象：作为 bean 属性或字段，具有可自定义的类型转换，具体取决于 @InitBinder 方法和/或 HandlerAdapter 配置

因此，使用 Spring Framework 无需手工绑定：Spring 为您完成了这项工作。所以如果不是[NIH 哲学](http://en.wikipedia.org/wiki/Not_invented_here)的信徒，你应该尝试一个 MVC 框架，不管是不是 Spring。

**PS：**如果您仍然不能使用 MVC 框架，您可以使用`HttpServletRequest.getParameterMap()`古老的 Apache Commons （[方法的 JavaDoc](http://commons.apache.org/proper/commons-beanutils/api/org/apache/commons/beanutils/BeanUtilsBean.html#populate%28java.lang.Object,%20java.util.Map%29)`BeanUtils.populate()`中的更多信息）为您进行绑定。

# mule - Mule 出站 http 端点 Content-Length 不匹配

> ID：16089445
> 
> 赞同：0
> 
> 时间：2013-04-18T17:25:47.693
> 
> 标签：mule, endpoint

我正在尝试从一个 REST 客户端到另一个客户端进行基本的 GET/POST。我很好地获取和映射数据，但在 POST http 出站端点期间超时。在使用 Fiddler Web Debugger 时，我发现问题出在 Content-Length 上。我收到错误“内容长度不匹配：RequestHeader 指示 403 个字节，但客户端发送了 61 个字节。”

如果使用以下语法手动设置 Content-Length，则它可以正常工作：

```
<message-properties-transformer scope="outbound>
    <add-message-property key="Content-Type" value="application/json"/>
    <add-message-property key="Content-Length" value="61"/>
</message-properties-transformer> 
```

我不明白为什么 Content-Length 不正确。我不能将它硬编码为 61，因为我传输的记录总是会有不同的长度。

任何想法将不胜感激。

布雷特

注意：这是完整的流程：

```
<http:endpoint exchange-pattern="request-response" host="slcomax.ameipro.com" port="80" path="maxrest/rest/mbo/worktype/115?_lid=mxintadm&amp;_lpwd=mxintadm" method="GET" name="HTTP" doc:name="HTTP"/>
<data-mapper:config name="maxtondtypes" transformationGraphPath="maxtondtypes.grf" doc:name="maxtondtypes"/>
<flow name="ruby_rest_testerFlow1" doc:name="ruby_rest_testerFlow1">
    <quartz:inbound-endpoint jobName="getTypes" repeatInterval="600000" responseTimeout="10000" doc:name="Quartz">
        <quartz:endpoint-polling-job>
            <quartz:job-endpoint ref="HTTP"/>
        </quartz:endpoint-polling-job>
    </quartz:inbound-endpoint>
    <echo-component doc:name="Echo"/>
    <data-mapper:transform config-ref="maxtondtypes" doc:name="DataMapper"/>
    <echo-component doc:name="Echo"/>
    <http:outbound-endpoint exchange-pattern="request-response" host="ndeavor.ameipro.com" port="80" path="types" doc:name="HTTP" contentType="application/json">
        <message-properties-transformer scope="outbound"> 
            <add-message-property key="Content-Type" value="application/json"/>
            <!-- <add-message-property key="Content-Length" value="61"/> -->
        </message-properties-transformer> 
    </http:outbound-endpoint>
    <echo-component doc:name="Echo"/>
</flow> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T18:01:39.717

问题是由于 Quartz 入站端点处理端点轮询的方式：它获取从端点交互接收到的所有属性并将它们放置在**出站**范围内，这完全弄乱了下游的内容。这是一个错误 IMO：属性应该放在入站范围内。

作为记录，这是 Quartz 轮询器放入出站范围的内容：

```
Cache-Control=no-cache
Content-Language=en-US
Content-Length=360
Content-Type=application/json
Date=Thu, 18 Apr 2013 18:00:12 GMT
Expires=Thu, 01 Dec 1994 16:00:00 GMT
MULE_ENCODING=UTF-8
Server=IBM_HTTP_Server
Set-Cookie=JSESSIONID=0000TRNJZ71m3RLX-NDBwfC-quo:-1; Path=/ 
```

因为所有这些属性都在出站范围内，所以将`http:outbound-endpoint`它们拾取并使用它们......因此内容长度错误（更不用说它也无缘无故发送的所有其他疯狂标头）。

解决方案是使用 HTTP 轮询连接器而不是 Quartz，如下所示：

```
<http:connector name="httpConnector" />
<http:polling-connector name="httpPollingConnector"
    pollingFrequency="600000" />

<http:endpoint name="worktypePoller" exchange-pattern="request-response"
    host="slcomax.ameipro.com" port="80"
    path="maxrest/rest/mbo/worktype/115?_lid=mxintadm&amp;_lpwd=mxintadm"
    method="GET" connector-ref="httpPollingConnector" />

<flow name="ruby_rest_testerFlow1">
    <http:inbound-endpoint ref="worktypePoller" />
    <data-mapper:transform config-ref="maxtondtypes" />
    <http:outbound-endpoint exchange-pattern="request-response"
        host="ndeavor.ameipro.com" port="80" path="types" connector-ref="httpConnector">
        <set-property propertyName="Content-Type" value="application/json" />
    </http:outbound-endpoint>
</flow> 
```

# c# - 当 AllowUserToAddRows = false 时自动滚动 DataGridView 不起作用

> ID：16089448
> 
> 赞同：1
> 
> 时间：2013-04-18T17:25:52.680
> 
> 标签：c#, datagridview, autoscroll

我想**DataGridView**只显示数据（只读），用户不能直接通过 datagridview 输入数据，而是通过**DataSource**和**DataMember**。为了防止用户输入数据，我确实设置了：

> m_dView.AllowUserToAddRows = false;

为什么设置后DataGridView自动滚动不起作用？

```
m_dView.DataSource = ds;
m_dView.DataMember = dm;
m_dView.AutoGenerateColumns = true;
m_dView.MultiSelect = false;
m_dView.SelectionMode = DataGridViewSelectionMode.FullRowSelect;
m_dView.AutoSizeColumnsMode = DataGridViewAutoSizeColumnsMode.AllCells;
m_dView.ReadOnly = true;
m_dView.AllowUserToAddRows = false;
m_dView.AllowUserToDeleteRows = false;
m_dView.AllowUserToOrderColumns = false;
m_dView.AutoSizeRowsMode = DataGridViewAutoSizeRowsMode.AllCells;
m_dView.AllowUserToResizeColumns = false;
m_dView.ColumnHeadersHeightSizeMode = DataGridViewColumnHeadersHeightSizeMode.DisableResizing;
m_dView.AllowUserToResizeRows = false;
m_dView.RowHeadersWidthSizeMode = DataGridViewRowHeadersWidthSizeMode.DisableResizing;

// auto scroll only worked only when m_dView.AllowUserToAddRows = true;
if (m_dView.Rows.Count > 0) {
    m_dView.CurrentCell = m_dView.Rows[m_dView.Rows.Count - 1].Cells[0];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T17:30:19.477

我创建了一个如下所示的代码示例，它运行良好。在新窗体上拖放一个datagridview控件，如下所示，并将其命名为m_dView

创建了一个按钮，单击该按钮时我运行下面的代码示例

```
using (SqlConnection c = new SqlConnection("Server=localhost;Database=deno;Trusted_Connection=True;"))
            {
                c.Open();

                using (SqlDataAdapter a = new SqlDataAdapter(
                    "SELECT * FROM test", c))
                {
                    // 3
                    // Use DataAdapter to fill DataTable
                    string dm = "TestScroll";
                    DataSet ds = new DataSet();
                    a.Fill(ds, dm);
                    // 4
                    // Render data onto the screen
                    m_dView.AllowUserToAddRows = false;
                    m_dView.DataSource = ds;
                    m_dView.DataMember = dm;
                    m_dView.AutoGenerateColumns = true;
                    m_dView.MultiSelect = false;
                    m_dView.SelectionMode = DataGridViewSelectionMode.FullRowSelect;
                    m_dView.AutoSizeColumnsMode = DataGridViewAutoSizeColumnsMode.AllCells;
                    m_dView.ReadOnly = true;
                    m_dView.AllowUserToAddRows = false;
                    m_dView.AllowUserToDeleteRows = false;
                    m_dView.AllowUserToOrderColumns = false;
                    m_dView.AutoSizeRowsMode = DataGridViewAutoSizeRowsMode.AllCells;
                    m_dView.AllowUserToResizeColumns = false;
                    m_dView.ColumnHeadersHeightSizeMode = DataGridViewColumnHeadersHeightSizeMode.DisableResizing;
                    m_dView.AllowUserToResizeRows = false;
                    m_dView.RowHeadersWidthSizeMode = DataGridViewRowHeadersWidthSizeMode.DisableResizing;

                }
                m_dView.FirstDisplayedScrollingRowIndex = m_dView.Rows.Count-1;
            } 
```

[我已使用DataGridView.FirstDisplayedScrollingRowIndex](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.firstdisplayedscrollingrowindex.aspx)属性将网格视图滚动到最后一行

例如

```
m_dView.FirstDisplayedScrollingRowIndex = m_dView.Rows.Count-1; 
```

能否将以下代码复制并粘贴到新项目中并进行测试？真正的罪魁祸首可能是其他问题。

# dart - 如何在 Web UI 中设置默认选定选项标签？我有一个带有几个选项的 <select> 标签。如何设置最初默认选择的选项？这是 Dart 代码： import 'dart:html'; 导入“包：web_ui/web_ui.dart”；List<String> fruits = const <String>['apples', 'bananas', 'pears']; @observable String selected = 'pears'; void

> ID：16089450
> 
> 赞同：3
> 
> 时间：2013-04-18T17:26:01.143
> 
> 标签：dart, dart-webui

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T17:26:01.143

Here is the Dart code:

```
import 'dart:html';
import 'package:web_ui/web_ui.dart';

List<String> fruits = const <String>['apples', 'bananas', 'pears'];

@observable
String selected = 'pears';

void main() { } 
```

Here is the HTML code:

```
<p>Hello world from Dart!  You chose {{ selected }}</p>

<select name="fruit" template iterate="fruit in fruits" bind-value="selected">
  <option selected="{{selected == fruit}}">{{fruit}}</option>
</select> 
```

Note, there is an [open request](https://github.com/dart-lang/web-ui/issues/472) to make this a bit easier. In the meantime, the above code should work for you.

# perl - 如何打印计数文件的名称？

> ID：16089456
> 
> 赞同：2
> 
> 时间：2013-04-18T17:26:30.683
> 
> 标签：perl

我是 PERL 的新手，并且已经获得了我的第一个有用的脚本！现在我想增强它，但不明白如何使用数组来实现我的目标。我已经阅读了许多文章和帖子，但还不明白。

我正在使用的脚本计算给定扩展名的给定目录中的文件数并打印出来。我希望它还可以将文件名打印到初始指定目录中的 .txt 文件中。

任何建议或意见表示赞赏！我确定我需要使用数组来实现这个目标，我只是不明白如何将计数的文件名输入其中。我能够打印出数组列表，我只需要一些帮助来填充数组！非常感谢！

当前状态下的脚本：

```
#!usr/bin/perl
use strict;
use warnings;
use diagnostics;
use File::Find;

print "\n\n";
print "This script will start at the given directory and\nrecursively count the files of a given type\n\n\n";
print "-----------------------------------------------------------\n\n\n";
print "What directory would you like to start the count?\n\nDirectory Path: ";
my $dir = <STDIN>; #directory to begin search
chomp $dir;

print "\nWhat is the file extension you are searching for?\n\nFile Extension(.htm, .plx, .txt, etc.): ";
my $filext = <STDIN>; #file extension we're searching for
chomp $filext;

my $count = 0;

find(sub{$count++ if $File::Find::name =~ /$filext$/}, $dir);

     if ($count > 0){
     print "\n$count files counted, \n"; #display the number of files counted with the given file extension in the given directory

     }

     else {
     print "Couldn't find any files to count.\n"; #if no files of the given type are found in the given directory
     } 
```

更新：

谢谢韦斯。我知道它现在是如何工作的，并感谢您抽出时间回复。

对于任何感兴趣的人，这是最终代码：

```
#!usr/bin/perl
use strict;
use warnings;
use diagnostics;
use File::Find;

print "\n\n";
print "This script will start at the given directory and\nrecursively count the files of a given type\n\n\n";
print "-----------------------------------------------------------\n\n\n";
print "What directory would you like to start the count?\n\nDirectory Path: ";
my $dir = <STDIN>; #directory to begin search
chomp $dir;

print "\nWhat is the file extension you are searching for?\n\nFile Extension(.htm, .plx, .txt, etc.): ";
my $filext = <STDIN>; #file extension we're searching for
chomp $filext;

my $count = 0;
my @files;
find(sub{
    if ($File::Find::name =~ /$filext$/) {
        push @files, $File::Find::name;
        $count++;
    }
}, $dir);

     if ($count > 0){
     print "\n\n-----------------------------------------------------------\n\n\n";
     print "\n$count files counted: \n\n"; #display the number of files counted with the given file extension in the given directory
     foreach (@files){
         print "$_\n";
     }

     }

     else {
     print "Couldn't find any files to count.\n"; #if no files of the given type are found in the given directory
     } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T17:42:11.670

您传递给的匿名 sub`find`可以执行多个语句，就像普通 sub 一样。

```
my @files;
find(sub{
    if ($File::Find::name =~ /$filext$/) {
        push @files, $File::Find::name;
        $count++;
    }
}, $dir); 
```

您也可以像这样检查数组的大小：`my $count = scalar @files;`而不是保持单独的计数

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T17:41:29.683

这个程序会做你想做的事。不需要数组，因为您可以将遇到的文件名打印到列表文件中`find`。

主要区别在于：

*   在调用之前打开一个输出文件以将文件名列表写入`find`

*   将每个文件名打印到新文件，因为它是由`find`

```
use strict;
use warnings;

use File::Find;

print "

This script will start at the given directory and
recursively count the files of a given type

-----------------------------------------------------------

What directory would you like to start the count?

Directory Path: ";

my $dir = <STDIN>;
chomp $dir;

print "
What is the file extension you are searching for?

File Extension(.htm, .plx, .txt, etc.): ";

my $filext = <STDIN>;
chomp $filext;

STDOUT->autoflush;

open my $out, '>', "$dir/file_list.txt" or die $!;
my $count = 0;
find(sub {
    return unless /\Q$filext\E$/;
    print $out "$_\n";
    $count++;
}, $dir);

if ($count > 0) {
    print "\n$count files counted\n";
}
else {
    print "Couldn't find any files to count\n";
} 
```

# javascript - JavaScript .Dialog 动态按钮名称

> ID：16089461
> 
> 赞同：1
> 
> 时间：2013-04-18T17:26:37.540
> 
> 标签：javascript, button, dialog

所以我有类似的东西

```
 $("#id").html(msg2show).dialog({
        //Other attributes
        buttons: {
           "Yes": function() {//Code},
           "No": function() {//Code}
         }
    }); 
```

我正在向我的网站添加其他语言支持。有没有办法在没有额外重复代码的情况下动态更改“是”和“否”？

我尝试使用以下内容并将上面的字符串替换为变量名，但是它似乎将变量名解释为字符串而不是变量的值。

```
var yes = 'Si';
var no = 'No'; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T17:29:25.760

在将按钮对象传递给之前构建您的按钮对象`.dialog()`，因此您可以将变量用作带有括号符号的键：

```
var yes = 'Si';
var no = 'No';
var buttons = {};
buttons[yes] = function() {};
buttons[no] = function() {};
$("#id").html(msg2show).dialog({
    //Other attributes
    buttons: buttons
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T17:37:53.773

使用**text**属性来设置按钮的名称。看这个[例子](http://jsfiddle.net/chauhangs/t4vhp/2/)

```
 $( "#dialog" ).dialog({

   buttons: [
        {
         text: "OK",
         click: function() {
          $( this ).dialog( "close" );
     }
   }
 ]
}); 
```

# android - 在 ListView 上的 onItemClick 之后返回活动而不创建新活动

> ID：16089468
> 
> 赞同：1
> 
> 时间：2013-04-18T17:26:52.700
> 
> 标签：android, listview

我的应用程序中有一个选项菜单，其中显示了用户在地图上添加的所有标记的列表。标记使用 ListView 表示，当用户选择该 ListView 的一项时，我想返回（恢复？）到主要活动，将标记位置作为参数传递，但不创建新活动。那可能吗？现在，当用户单击任何项​​目时，我正在创建一个新活动，是否可以简单地回到主要活动？

MarkersList 活动的代码：

```
mainListView.setOnItemClickListener(new OnItemClickListener()
{
    public void onItemClick(AdapterView<?> arg0, View v, int position, long id)
    {
            Intent intent = new Intent(getBaseContext(), MainActivity.class);
        MyMarkerObj marker = (MyMarkerObj)table.get(position);
        intent.putExtra("position", marker.getId());
        startActivity(intent);
        finish();
    }
}); 
```

MainActivity 代码：

```
 @Override
protected void onResume() {  

    Intent intent = getIntent(); 
    if (intent != null) { 
        Bundle bundle = intent.getExtras();
        if (bundle != null) {
            int reportId = bundle.getInt("position");
            Toast.makeText(getApplicationContext(), Integer.toString(reportId), Toast.LENGTH_SHORT).show();
              try {
                data.open();
               } catch (Exception e) {
                    Log.i("hello", "hello");
               } 

            //Get the marker selected in the listview
            String position = data.getMarkerById(reportId);
            //System.out.println(">>>>>>>>>>>>>>> position = " + position); 
        }
    }
    super.onResume();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T17:35:47.357

使用`StartActivityForResult(intent,reqcode)`而不是`startActivity(intent)`.

第一个活动中的第一个

```
Intent i=new Intent(MainActivity.this, MarkerActivity.class);
startActivityForResult(i,1);  <-- 1 is request code, you can give anything. 
```

然后在第二个 Activity 的 ItemClick 上

```
 Intent intent = getIntent();
    MyMarkerObj marker = (MyMarkerObj)table.get(position);
    intent.putExtra("position", marker.getId());
   setResult(responsecode,intent);
    finish(); 
```

而在

第一个活动的 onActivityForResult

得到这样的值

```
 protected void onActivityResult(int requestCode, int resultCode, Intent data) 
    {
     if(requestCode == 1 && resultCode == RESULT_OK)
        {

       Bundle bun=data.getExtras();
       int position= bun.getInt("position");     
        }
    } 
```

# android - What is the best practice for creating the packages in android project

> ID：16089471
> 
> 赞同：2
> 
> 时间：2013-04-18T17:26:59.687
> 
> 标签：android

I am little bit confused on this point. On which basis should we create the packages means based on functionalities or based on the type of class.

Please tell me the best practice followed in Android to design the package structure.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T17:34:17.550

对于我最近的案例，我将活动和服务放在一起。我的异步任务放在一起，然后是一个支持包来保存全局变量、sharedpreferences 适配器和其他辅助类。这使我可以轻松地在除 UI 包（活动和服务之一）之外的所有包上集中和运行基本 junits。

当我看到我的测试项目和开发项目时，很容易知道我是否错过了任何课程测试，因为我只是比较了包及其内容。保持项目之间的一致性是关键。

# list - Passing parameters with multiple objects

> ID：16089475
> 
> 赞同：0
> 
> 时间：2013-04-18T17:27:15.243
> 
> 标签：list, object, parameter-passing

So what I want to do is pass in an object list, but I have many different ones. (Swords, Chestplates etc). How can I pass in multiple objects to the parameter?

`ListToSave = testObject.ChestPlateList;` that part below is the part I want to pass the object list into.

```
public void DeserializeFromXML(List<ChestPlate> ListToSave, string filepath)
        {
            XmlSerializer deserializer = new XmlSerializer(typeof(GameObjectData));
            FileStream fs = new FileStream(filepath, FileMode.Open);
            XmlReader reader = new XmlTextReader(fs);

            if (!reader.EOF)
            {
                GameObjectData testObject = (GameObjectData)deserializer.Deserialize(reader);
                ListToSave = testObject.ChestPlateList;
                Console.WriteLine("{0}", testObject.ChestPlateList);             
            }        
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T18:04:43.547

试试这个（未经测试）

```
public void SerializeToXML(GameObjectData theData, string filepath)
{
    XmlSerializer serializer = new XmlSerializer(typeof(theData));
    TextWriter writer = new StreamWriter(filepath);
    serializer.Serialize(writer, ListToSave);
} 
```

和

```
public GameObjectData DeserializeFromXML(string filepath)
{
    GameObjectData result = null;
    XmlSerializer deserializer = new XmlSerializer(typeof(GameObjectData));
    FileStream fs = new FileStream(filepath, FileMode.Open);
    XmlReader reader = new XmlTextReader(fs);

    if (!reader.EOF)
    {
        result = (List<GameObject>)deserializer.Deserialize(reader);

        Console.WriteLine("{0}", result.ChestPlateList);              
    }   
    return result;     
} 
```

# oauth-2.0 - Gmail XOAuth Login - suspicious attempt warning

> ID：16089477
> 
> 赞同：1
> 
> 时间：2013-04-18T17:27:23.423
> 
> 标签：oauth-2.0, gmail-imap

I'm working on a cloud based email system (Amazon Linux instance, written in PHP) that connects to Gmail using using OAuth2 and then simply pulls messages. For most users, this has worked fine - we were able return an access code, generate access tokens, and fetch messages. But now, when users try to grant our application access via the web interface, the server returns an error message, and no access code:

"Warning: Google prevented a suspicious attempt to sign into your account. Was it you?"

![enter image description here](https://i.stack.imgur.com/67IeB.png)

What is going on here? Why have we been able to connect in the past, and now we are being blocked by Google? I do not have any more information to clarify the problem. Explanation of some standard cases in which this might happen would also be helpful.

# encryption - Can you encrypt data in an offline HTML5 database?

> ID：16089482
> 
> 赞同：3
> 
> 时间：2013-04-18T17:27:34.220
> 
> 标签：encryption, offline, indexeddb

Encryption is mentioned zero times in the [WebSQL](http://www.w3.org/TR/webdatabase/) and [IndexedDB](http://www.w3.org/TR/IndexedDB/) specs.

Similar, but incomplete, questions are [here](https://stackoverflow.com/questions/5976046/html5-client-side-data-encryption-what-are-my-options/6686558#6686558), [here](https://stackoverflow.com/questions/2642043/html5-web-db-security), [here](https://stackoverflow.com/questions/5976046/html5-client-side-data-encryption-what-are-my-options).

I was wondering if you could encrypt the data on the server so that the decryption key is the user's password, then hash their password in the offline database. Once they have logged in we have our decryption key. That seems reasonable, right?

![enter image description here](https://i.stack.imgur.com/pH7Pp.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-27T01:58:24.287

I don't think you should solely rely on the user's password especially if you want to prevent the user from accessing the data you're storing.

However it's perfectly plausible to encrypt and decrypt the data on your server. To keep the data secret, I would have my own secret encryption key stored on the server. If you want security unique to each user, you could append the user's id onto your encryption key but I don't see much added value from that.

Bottom line, I would not trust users' passwords for encrypting data (there are many bad passwords out there). Also you shouldn't know your users' passwords. It's a best practice to hash their passwords so that if someone hacks your database, the login information can't be used.

# vb.net - 将下拉列表值转换为字符串

> ID：16089485
> 
> 赞同：0
> 
> 时间：2013-04-18T17:27:42.917
> 
> 标签：vb.net, linq, html-select

我的数据库中有两个表，`Building`并且`Rooms`. 我正在使用两个下拉列表。目的是让第一个下拉列表`ddlBuilding`, 用于选择建筑物名称。选择名称后，我想查询数据库以仅查找与该建筑物相对应的房间号，并将其返回房间下拉列表中`ddlRoomNumber`。
例如：

A 楼有 1、2 和 3 号
房间。B 楼有 4、5 和 6 号房间。

如果用户从 A 楼中选择`ddlBuilding`他们应该只显示房间 1、2 和 3`ddlRoomNumber`

我已经设置了一个查询来执行此操作，但我收到一条错误消息，提示无法将下拉列表转换为字符串。有问题的代码是：

```
 Protected Sub txtRoomNumber_TextChanged(ByVal sender As Object, ByVal e As System.EventArgs) Handles txtRoomNumber.TextChanged

    Dim db As New OrionDataClassesDataContext

    Dim roomNumber = (From build In db.Buildings Join rm In db.Rooms On build.Building_code Equals rm.Building_code
                      Where build.Building_name = ddlBuilding
                      Select rm.Room_Number).distint

    ddlRoomNumber.DataSource = roomNumber
    ddlRoomNumber.DataBind()

End Sub 
```

这`where build.Building_name = ddlBuilding`是导致错误的行。关于如何将字符串从下拉列表中拉出并使用它来验证我的查询的任何想法。

经过一些回应和研究，我已将代码更改为以下代码。它仍然无法正常工作。 `ddlRoomNumber`不绑定到我的查询。

```
Protected Sub ddlRoomNumber_SelectedIndexChanged(ByVal sender As Object, ByVal e As System.EventArgs) Handles ddlRoomNumber.SelectedIndexChanged

    Dim db As New OrionDataClassesDataContext

    ddlRoomNumber.DataSource = (From build In db.Buildings Join rm In db.Rooms On build.Building_code Equals rm.Building_code
                                Where (build.Building_name = ddlBuilding.SelectedItem.Text)
                                Select rm.Room_Number, rm.Room_ID)

    ddlRoomNumber.DataTextField = "Room_Number"
    ddlRoomNumber.DataValueField = "Room_ID"
    ddlRoomNumber.DataBind()
End Sub 
```

这是asp页面。有什么方法可以输入 linq 数据源以将其指向我的 vb 查询。

```
<asp:DropDownList ID="ddlRoomNumber" runat="server" AutoPostBack="True">
                           </asp:dropdownlist> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T17:34:44.620

you can use `ddlBuilding.SelectedItem.Text` instead of `ddlBuilding`

# java - 为什么此代码不适用于通过 android 进行的 IMEI 调用？

> ID：16089486
> 
> 赞同：0
> 
> 时间：2013-04-18T17:27:50.690
> 
> 标签：java, android

我想制作一个从手机获取 IMEI 并检查给定数据（12345678912345）的代码。如果匹配，它会调用`onSearchRequested();`

这是我的代码

```
long imei=telephonyManager.getDeviceId();
if(imei==12345678912345)
         {
            onSearchRequested();
        }
else
{
         finish();
} 
```

这里`if(imei==12345678912345)`不适用于日食。我用过

```
<uses-permission android:name="android.permission.READ_PHONE_STATE" /> permission. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T17:33:25.537

试试下面

```
 String mImei = null; 
 TelephonyManager mTeleManager = null; 
 mTeleManager = (TelephonyManager) this.getSystemService(Context.TELEPHONY_SERVICE); 
 //Here this refers to activity context
 if(mTeleManager!=null){
  mImei = mTeleManager.getDeviceId(); //get the IMEI number
 } 
```

然后

```
 if(mImei.equals("12345678912345"))
  {
        onSearchRequested();
  }
  else
  {
     finish();
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T17:33:01.313

```
 TelephonyManager manager = (TelephonyManager) context
                    .getSystemService(Context.TELEPHONY_SERVICE);

       String imei=manager.getDeviceId();

       if(imei=="12345678912345")
       {
          onSearchRequested();
       }
        else
       {
          finish();
       } 
```

# c# - 我的 Windows 窗体上的按钮不起作用。Visual Studio 在我的代码中没有显示任何错误

> ID：16089488
> 
> 赞同：1
> 
> 时间：2013-04-18T17:27:56.783
> 
> 标签：c#, visual-studio, windows-forms-designer

我有一个平均计算器 Windows 窗体应用程序，它询问用户他们想输入多少分数。一个文本框接受输入，一旦他们单击“确定”，他们输入的数字就会成为他们输入分数的文本框。填充文本框后，他们可以单击计算来计算显示给他们的平均值。

我的问题是，当我在文本框中输入一个数字并单击“确定”时，什么也没有发生。

请帮忙，这是我的代码。

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace AverageCalculator
{
public partial class AverageCalculator : Form
{
    //Private instance variable, Scores, which is an array of TextBox objects.
    //Do not instantiate the array.
    private TextBox[] Scores;

    // Create a Form_Load event hadler
    private void Form_Load(object sender, EventArgs e)
   {
        // Set the visible property of btnCalculate to false
        btnCalculate.Visible = false;
    } // end Form_Load event handler

    //Create the Click event handler for the OK button
    private void btnOK_Click(object sender, EventArgs e)
    {
        // Declare an integer, intNumTextBoxes
       int intNumTextBoxes;

        //Store the number of text boxes to be created into the integer
        intNumTextBoxes = Convert.ToInt32(txtNumScores.Text);

        // Set the height of the form to 500 pixels
        this.Height = 500;

        // Set the visible property of btnCalculate to true
        btnCalculate.Visible = true;

        // Set the enabled property of btnOK to false
        btnOK.Enabled = false;

        // Call CreateTextBoxes and pass it the integer, intNumTextBoxes as a parameter
        CreateTextBoxes(intNumTextBoxes);
    }

    // CreateTextBoxes method
    private void CreateTextBoxes(int number)
    {
        //Instantiate the Scores array and use the parameter "number" as the size of the array
        Scores = new TextBox[number];

        //Declare an integer, intTop, with an initial value of 150
        int intTop = 150;

        //Loop through the entire array, Scores
        for (int i = 0; i < Scores.Length; i++)
        {
            // Instantiate a new TextBox using the default
            // constructor and assign it to the current element 
            // of the Scores array
            Scores[i] = new TextBox();

            // Set the left property of the TextBox to 20.
            Scores[i].Left = 20;

            // Set the Top property of the Textbox to intTop
            Scores[i].Top = intTop;

            // Increment intTop by 50
            intTop += 50;

            // Ad the TextBox to the controls collection of the Form
            this.Controls.Add(Scores[i]);
        } // end for loop
    } // end CreateTextBoxes method

    // Create the Click event handler for the btnCalculate button
    private void btnCalculate_Click(object sender, EventArgs e)
    {

    }
    public AverageCalculator()
    {
        InitializeComponent();
    }

} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T17:30:02.653

你确定你的事件绑定到按钮的正确事件（在属性/事件中验证）它有时会发生在我身上，白痴错误

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T17:56:55.843

将此代码添加到表单的构造函数中（在 InitializeComponent 调用之后）：

```
btnOK.Click +=(s,e)=>{MessageBox.Show("Foo");}; 
```

现在，当您运行应用程序并按 btnOK 时，应该会弹出消息“Foo”，将消息片段替换为您的代码，您应该已经准备好了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-20T16:35:22.343

有过这样的案子。结果发现，当我按 F5 运行时，“重建”失败了，而我没有看到它。由于我创建它时，该按钮显示在表单上。当我添加第二个按钮来帮助找出问题时，它没有显示。当我尝试重建项目时，我看到了错误。没有询问“构建失败，运行最后一次成功构建”的问题。

# algorithm - 如何基于 preorder&inorder 或 postorder&inorder 遍历构造非二叉树？

> ID：16089489
> 
> 赞同：1
> 
> 时间：2013-04-18T17:28:01.143
> 
> 标签：algorithm, tree, inorder, preorder, postorder

我的数据结构和算法课的两个练习听起来像这样

> 构造前序遍历为：1、2、5、3、6、10、7、11、12、4、8、9，inode遍历为5、2、1、10、6、3、11的树， 7、12、8、4、9。
> 
> 构造后序遍历为：5, 2, 10, 6, 11, 12, 7, 3, 8, 9, 4, 1，inode遍历为5, 2, 1, 10, 6, 3, 11的树， 7、12、8、4、9。

我只需要绘制树的结构，而不用编程语言实现它。使这项任务变得更难的是树不是二叉树。我可以使用什么技术来建造树木？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T18:17:28.503

我不确定我是否可以为此提供精确的算法解决方案，但我可以提供一个足够的概念性解决方案。我认为，如果您可以将其微调为定义明确的算法，那将对您很有用，并使期中考试的（那部分）变得微不足道。

首先，考虑中序遍历如何遍历树。如果您绘制树，使最左边的孩子在左边（视觉上）而其他孩子在右边（视觉上），那么中序遍历松散地从左到右。你可能会遇到一个问题，它不是从左到右（因为一个节点的子节点和父节点之间有一些重叠或类似的东西），但你总是可以将树拉伸以使其清楚地“从左到右”。因此，我通过使用中序遍历开始我的树来利用这一点：

```
5 2 1 10 6 3 11 7 12 8 4 9 
```

然后的想法是我们根据前序遍历上下移动节点。这部分是很难定义的部分。基本上，如果“较早”访问节点，则将它们向上移动，如果稍后访问它们，则将它们向下移动。因此，例如，1 在前序遍历中位于 2 和 5 的左侧，所以我将其“向上”提升，因为我创建了 1 的 2 和 5 个祖先（但不一定是孩子）。所以像

```
 1
5 2 10 6 3 11 7 12 8 4 9 
```

然后你看到 2 在 5 之前，所以我提出了 2：

```
 1
  2 
5     10 6 3 11 7 12 8 4 9 
```

然后你会在前序遍历中看到 3 出现在 6 和 10 之前，因此我们可以“提升”它。

```
 1
  2        3
5     10 6   11 7 12 8 4 9 
```

等等。请注意，3 最终可能是 2 或 1 的孩子......满足上述约束的树不是唯一的。

# java - Selenium Webdriver w/Java：使用一个命令定位具有多个类名的元素

> ID：16089492
> 
> 赞同：9
> 
> 时间：2013-04-18T17:28:10.453
> 
> 标签：java, selenium-webdriver

我正在尝试使用 Selenium（2.31.0，使用 JavaSE 1.6 和 IE9）在页面上查找一系列元素。这些元素都有两个类名之一，“dataLabel”或“dataLabelWide”。目前，我的代码将这些元素收集在两个单独的 ArrayList 中，每个类名一个，然后将它们转换为数组并将它们组合成一个数组。但是，此方法会乱序列出元素，我需要将它们保留在与在页面的 HTML 源中找到的相同的顺序中。

我的代码的上述部分如下所示（添加了注释以进行解释）：

```
// Application runs on WebDriver d, an InternetExplorerDriver.
// After navigating to the page in question...

List<WebElement> labels = d.findElements(By.className("dataLabel"));
List<WebElement> wLabels = d.findElements(By.className("dataLabelWide"));
// Locates the elements of either type by their respective class name.

WebElement[] labelsArray = labels.toArray(new WebElement[labels.size()]);
WebElement[] wLabelsArray = wLabels.toArray(new WebElement[wLabels.size()]);
// Converts each ArrayList to an array.

List<WebElement> allLabels = new ArrayList<WebElement>();
// Creates an ArrayList to hold all elements from both arrays.

for(int a = 0; a < labelsArray.length; a++) {
    allLabels.add(labelsArray[a]);
}
for(int b = 0; b < wLabelsArray.length; b++) {
    allLabels.add(wLabelsArray[b]);
}
// Adds elements of both arrays to unified ArrayList, one by one.

WebElement[] allLabelsArray = allLabels.toArray(new WebElement[allLabels.size()]);
// Finally converts unified ArrayList into array usable for test purposes.
// Far too complicated (obviously), and elements end up out-of-order in array. 
```

我认为最有效的解决方案是使用任一类名定位元素，以便立即将它们包含在单个列表/数组中。我自己进行了一些搜索，但我还没有找到任何关于如何管理这项任务的结论性想法。如果有什么方法可以做到这一点，请告诉我。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-04-18T18:06:41.830

Why wouldn't you do the following:

```
driver.findElement(By.cssSelector(".dataLabel,.dataLabelWide"); 
```

The '.' selector says, "give me all elements with this class." The ',' operator is the CSS selector 'or' operator.

# mongodb - 使用 MongoDB 聚合框架获取数组大小直方图的最快方法

> ID：16089493
> 
> 赞同：11
> 
> 时间：2013-04-18T17:28:16.047
> 
> 标签：mongodb, aggregation-framework

我正在尝试获取具有不同大小数组的记录数的列表。我想获取所有记录的数组大小分布，以便可以构建这样的直方图：

```
 | *
          | *
documents | *         *
          | *  *      *
          |_*__*__*___*__*___
            2  5  6  23  47

               Array Size 
```

所以原始文档看起来像这样：

```
{hubs : [{stuff:0, id:6}, {stuff:1"}, .... ]}
{hubs : [{stuff:0, id:6}]}` 
```

到目前为止，我使用[了聚合框架和一些帮助](http://docs.mongodb.org/manual/reference/sql-aggregation-comparison/)

```
db.sitedata.aggregate([{ $unwind:'$hubs'}, 
                       { $group : {_id:'$_id', count:{$sum:1}}}, 
                       { $group : {_id:'$count', count:{$sum:1}}},
                       { $sort  : {_id: 1}}]) 
```

这似乎给了我想要的结果，但速度不是很快。我想知道是否有一些我可以做这样的事情，可能不需要两个群组通话。这里的语法是错误的，但我想做的是将计数值放在第一个 _id 字段中：

```
db.sitedata.aggregate([{ $unwind:'$hubs'}, 
                       { $group : {_id:{$count:$hubs}, count:1}},
                       { $sort  : { _id: 1 }}]) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-04-26T06:54:10.677

现在 2.6 已经发布，聚合框架支持一个[新的数组运算符`$size`](http://docs.mongodb.org/manual/reference/operator/aggregation/size/#exp._S_size)，它允许您`$project`调整数组大小，而无需展开和重新分组。

```
db.sitedata.aggregate([{ $project:{ 'count': { '$size':'$hubs'} } }, 
                       { $group : {_id:'$count', count:{$sum:1} } },
                       { $sort  : { _id: 1 } } ] ) 
```

# android - 实例状态和媒体播放器

> ID：16089503
> 
> 赞同：0
> 
> 时间：2013-04-18T17:29:39.443
> 
> 标签：android, android-mediaplayer, state, instance, media

我正在编写一个简单的应用程序，其中活动 A 播放了一首歌曲。按下按钮时，媒体播放器暂停，活动 B 打开。当用户回到活动 A 时，媒体播放器应该恢复（从它停止的地方）。我的问题是，当您在活动 B 上按下后退按钮时会发生什么？我知道活动 B 将被杀死，但活动 A 的 onResume 是否已加载？我在哪里给出恢复指令？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T17:37:23.113

```
onResume  method will be called when a activity is resumed. 
```

看来你必须在任何类型的 android 编程之前阅读[Activity Lifecycle](http://developer.android.com/guide/components/activities.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T17:51:08.163

我的代码如下所示

```
public class Homework extends Activity {

final MediaPlayer mediaplayer = new MediaPlayer();
int media_length;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_homework);

    setContentView(R.layout.activity_homework);
    AssetFileDescriptor afd;
    try {
        afd = getAssets().openFd("rev.mp3");
        mediaplayer.setDataSource(afd.getFileDescriptor(),afd.getStartOffset(),afd.getLength());
        mediaplayer.prepare();
    } catch (IOException e) {
        e.printStackTrace();
    }
    mediaplayer.start();
    Button next = (Button) findViewById(R.id.homeworkContinue);
    final Intent openCloser = new Intent(this, EndActivity.class);
    next.setOnClickListener(new OnClickListener(){

        @Override
        public void onClick(View v) {
            mediaplayer.pause();
            media_length = mediaplayer.getCurrentPosition();
            startActivity(openCloser);

        }

    });
}

public void onResume(Bundle savedInstanceState){
    super.onResume();
    mediaplayer.seekTo(media_length);
    mediaplayer.start();
} 
```

}

# c# - 为什么我不能在 C# 中使用 Appcelerator REST API 发送推送通知？

> ID：16089505
> 
> 赞同：0
> 
> 时间：2013-04-18T17:29:44.337
> 
> 标签：c#, push-notification, appcelerator, restsharp

我正在尝试通过 RestSharp API for C# 向订阅我频道的所有设备发送通知警报。这就是我的代码的样子：

```
 public void SendPush()
    {
        try
        {

            var client = new RestClient(" https://api.cloud.appcelerator.com");
            var request = new RestRequest("/v1/push_notification/notify.json?key=appkey", Method.POST)
            {
                RequestFormat = DataFormat.Json,
            };
            request.AddBody(new
            {
                channel = "alert", payload = new { title = "notificación", badge = 1, alert = "alerta: proximo arribo de sismo a la ciudad de mexico", sound = "default" }
            });
            var response = client.Execute(request);
            var content = response.Content;
            Debug.WriteLine(content);
        }
        catch (Exception ex)
        {
            Debug.WriteLine("Message " + ex.Message + " \n Inner Exception " + ex.InnerException + " \n Stack Trace" + ex.StackTrace);
        }
    } 
```

我得到的响应如下：

```
{
  "meta": {
    "status": "fail",
    "code": 401,
   "cc_code": 1000,
   "message": "You need to sign in or sign up before continuing."
  }
} 
```

为什么要我登录？我要做的就是向设备发送通知消息。

任何帮助将不胜感激。

**编辑**

我能够登录，将连接信息存储到 CookieContainer 中并发送通知请求，但我无法将有效负载参数作为对象发送。

这就是我的新登录功能的样子：

```
 public void Login()
    {
        client = new RestClient("https://api.cloud.appcelerator.com");
        client.CookieContainer = new System.Net.CookieContainer();
        request = new RestRequest("/v1/users/login.json?key={appkey}", Method.POST)
        {
            RequestFormat = DataFormat.Json
        };
        request.AddUrlSegment("appkey", "key");
        request.AddBody(new
        {
            login = "user",
            password = "pass"
        });
        var response = client.Execute(request);
        var content = response.Content;
        Debug.WriteLine(content);
        SendPush();
    } 
```

这就是我的 SendPush 函数现在的样子：

```
 public void SendPush()
    {
        try
        {
            client.BaseUrl = "https://api.cloud.appcelerator.com";
            request.Resource = "/v1/push_notification/notify.json?key={appkey}";
            request.Method = Method.POST;
            request.AddUrlSegment("appkey", "key");

            request.AddParameter("channel", "alert");
            request.AddParameter("payload", new
                {
                  title = "notification", 
                  badge = 1, 
                  alert = "Warning", 
                  sound = "default" 
                });
            var response = client.Execute(request);
            var content = response.Content;
            Debug.WriteLine(content);
        }
        catch (Exception ex)
        {
            Debug.WriteLine("Message " + ex.Message + " \n Inner Exception " + ex.InnerException + " \n Stack Trace" + ex.StackTrace);
        }
    } 
```

我试图发送一个对象作为参数，但它似乎无效，我不知道为什么。如果我只是尝试发送这样的东西：

```
 request.AddParameter("payload", "Warning"); 
```

我从 Appcelerator API 得到响应，但不是我想要在移动应用程序中的行为，因为有效负载缺少几个属性。

我应该如何使用 RestSharp 将该对象作为参数发送？还是 RestSharp 不允许这样做？我有哪些选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T17:00:41.447

我找到了做到这一点的方法。首先，我必须像这样登录并将会话保存在 CookieContainer 中：

```
 public void Login()
    {
        client = new RestClient("https://api.cloud.appcelerator.com");
        client.CookieContainer = new System.Net.CookieContainer();
        request = new RestRequest("/v1/users/login.json?key={appkey}", Method.POST)
        {
            RequestFormat = DataFormat.Json,
        };
        request.AddUrlSegment("appkey", "key");
        request.AddBody(new
        {
            login = "user",
            password = "pass"
        });
        var response = client.Execute(request);
        SendPush();
    } 
```

然后我调用我的 SendPush 方法，现在看起来像这样：

```
 public void SendPush()
    {
        try
        {
            client.BaseUrl = "https://api.cloud.appcelerator.com";
            request.Resource = "/v1/push_notification/notify.json?key={appkey}";
            request.Method = Method.POST;
            request.AddUrlSegment("appkey", "key");

            request.AddParameter("channel", "alert");
            request.AddParameter("payload", "{ \"title\" : \"notificación\", \"badge\" : 1, \"alert\" : \"alerta: Sismo detectado en: " + direccion + " proximo arribo de sismo a la ciudad de mexico\", \"sound\" : \"default\"}");
            var response = client.Execute(request);
        }
        catch (Exception ex)
        {
            Debug.WriteLine("Message " + ex.Message + " \n Inner Exception " + ex.InnerException + " \n Stack Trace" + ex.StackTrace);
        }
    } 
```

我在 AddBody 方法中发送有效负载对象时遇到问题，因此我决定使用 AddParameter 将其作为字符串发送，并且它没有问题，这也可以使用来自[JSON.NET的](http://json.codeplex.com/)[JavaScriptSerializer](http://msdn.microsoft.com/en-us/library/system.web.script.serialization.javascriptserializer.aspx)或 JsonConverter 来完成。希望它可以帮助其他人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T17:33:30.503

您需要提供有效的应用密钥

```
var myAppKey = "WhateverYourAppKeyIs";
var request = new RestRequest("/v1/push_notification/notify.json?key=" + myAppKey , Method.POST) 
```

# timer - XNA 生成敌人的简单方法

> ID：16089513
> 
> 赞同：1
> 
> 时间：2013-04-18T17:30:02.473
> 
> 标签：timer, xna, spawning

我试图从列表中产生敌人。我已经尝试了多种方法。但是我无法让它工作。有没有一种简单的方法可以每 3 秒生成一次敌人？编辑

我试着像这样产生它：问题：只产生一次

```
 protected void AdjustSpawnTimes(GameTime gameTime)
    {
        // If the spawn maximum time is > 500 milliseconds,
        // decrease the spawn time if it's time to do so
        // based on spawn-timer variables
        if (enemySpawnMaxMilliseconds > 500)
        {
            timeSinceLastSpawnTimeChange += gameTime.ElapsedGameTime.Milliseconds;
            if (timeSinceLastSpawnTimeChange > nextSpawnTimeChange)
            {
                timeSinceLastSpawnTimeChange -= nextSpawnTimeChange;
                if (enemySpawnMaxMilliseconds > 1000)
                {
                    enemySpawnMaxMilliseconds -= 100;
                    enemySpawnMinMilliseconds -= 100;
                }
                else
                {
                    enemySpawnMaxMilliseconds -= 10;
                    enemySpawnMinMilliseconds -= 10;
                }
            }
        }
    } 
```

像这样：问题：再次产生一次

```
private void SpawnEnemy()
    {
        Vector2 speed = Vector2.Zero;
        Vector2 position = Vector2.Zero;

        // Default frame size
        Point frameSize = new Point(75, 75);

        int screenWidth = GraphicsDevice.PresentationParameters.BackBufferWidth;
        int screenHeight = GraphicsDevice.PresentationParameters.BackBufferHeight;

        // Randomization:
        // - Randomly choose which side of the screen to place the enemy
        // - Randomly create a position along that side of the screen
        // - Randomly choose a speed for the enemy
        switch (rand.Next(4))
        {
            case 0: // Left to right
                position = new Vector2(-frameSize.X,
                                       (rand.Next(0, screenHeight - frameSize.Y)));
                speed = new Vector2(rand.Next(needleMinV, needleMaxV),
                                    0);
                break;

            case 1: // Right to left
                position = new Vector2(screenWidth,
                                       (rand.Next(0, screenHeight - frameSize.Y)));
                speed = -new Vector2(rand.Next(needleMinV, needleMaxV),
                                    0);
                break;

            case 2: // Bottom to top
                position = new Vector2(rand.Next(0, screenWidth - frameSize.X),
                                       screenHeight);
                speed = -new Vector2(0,
                                    (rand.Next(needleMinV, needleMaxV)));
                break;

            case 3: // Top to bottom
                position = new Vector2(rand.Next(0, screenWidth - frameSize.X),
                                       -frameSize.Y);
                speed = new Vector2(0,
                                   rand.Next(needleMinV, needleMaxV));
                break;
        } 
```

这个产生但不动我玩过更新和绘制方法，但似乎没有任何效果

```
List<Enemy> needleList = new List<Enemy>();
    Texture2D needle;
    float spawnTime = 10;
    const float TIMER = 10;
    bool spawnN = true; 
```

更新中：

```
 timer = (float)gameTime.TotalGameTime.TotalSeconds;

        spawnTime -= (float)gameTime.ElapsedGameTime.TotalSeconds;
        if (timer < 0)
        {
            foreach (Enemy needele in needleList)
            {
                spawnN = !spawnN;
                needele.Update(gameTime);
                spawnTime = TIMER;
            } 
```

在抽奖中：

```
 if (spawnN)
        {
            foreach (Enemy needele in needleList)
            {
                needele.Draw(gameTime, spriteBatch);
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T13:11:20.077

此外，您应该将新敌人添加到列表中。

因此，在您的更新方法中，您可以执行以下操作：

```
timeToSpawn += gameTime.ElapsedGameTime.Milliseconds; //adds the time since last update
if (timeToSpawn > 3000)
{
    enemyList.Add new Enemy(); //adds a new enemy to the list
    timeToSpawn -= 3000; subtract 3000ms off the timer.
}
foreach (Enemy e in enemyList)
{
    //Do stuff like updating enemy positions
    e.Update();
}
//In your draw method you do this as well:
foreach (Enemy e in enemyList)
{
    //Do stuff like updating enemy positions
    e.Draw();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T12:37:35.017

您需要将此问题分解为以下步骤：

您需要一些全局变量来表示计时器并表示等待的时间量，例如

```
float spawnTimer;
const float TIME_TO_WAIT = 3.0f; // don't make const if you need to change. 
```

接下来在您的更新中，您需要增加自上次更新以来经过的时间。您似乎正在使用多个计时器，并使其比您需要的更尴尬。如果您需要为多件事计时，您应该只需要多个计时器。

```
spawnTimer += gameTime.ElapsedGameTime.TotalSeconds; 
```

接下来，当经过的时间大于等待所需的时间时。生成一个敌人，然后将计时器重置为零。

如果您想一次生成多个敌人，请添加一个 for 循环，其条件是在迭代器小于要生成的敌人数量时循环。

我故意没有给你最后两个区域，概述的步骤应该相对简单。完成此操作后，您的其余代码应该可以工作。

如果这不起作用，请调试您的代码并检查 spawnEnemy 是否被成功调用。

# entity-framework - Entity Framework Code-First 从单个表中加载多个子项

> ID：16089519
> 
> 赞同：0
> 
> 时间：2013-04-18T17:30:07.397
> 
> 标签：entity-framework, ef-code-first, entity-framework-5

我正在使用带有 Code-First 的 EntityFramework 5.0。我有一个像这样的 POCO 类 Foo：

```
public class Bar
{
    public int FooID { get; set; }
    public virtual Foo Foo { get; set; }

    public int OtherFooID { get; set; }
    public virtual Foo OtherFoo { get; set; }
} 
```

在我的 DbContext 中，延迟加载已打开。当我从上下文加载 Foo 时，属性“Foo”是延迟加载的，预期使用 FooID 作为外键。但是，无论我如何尝试，都不会加载“OtherFoo”。

```
Foo f = bar.Foo;         // A proxy type, which loads in the data from the DB correctly
Foo f = bar.OtherFoo;    // is null, not lazily loaded
Foo f = context.Bars.Include("OtherFoo").First(...).OtherFoo;   // Still null 
```

（如果重要的话，我有一个 UserProfile 表，并且我的模型对象有 CreatedByUser 和 LastModifiedByUser 字段，除非我将一个及其关联的 *ID 字段重命名为“User”，否则这两个字段都不起作用）

是否有我可以粘贴在这些字段上的属性来告诉 Entity 如何加载它们，或者如果我覆盖它，我可以在 DbContext.OnModelBuilding 方法中设置什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T14:15:02.497

我猜是一个映射问题，因此 EF 无法识别`OtherFooID`为`OtherFoo`. `OtherFooID`不可为空，并且关系是*必需*的，即数据库中*必须*有关联`OtherFoo`（除非您在数据库中关闭了 FK 约束强制）。

您可以使用数据注释显式指定外键...

```
[ForeignKey("OtherFoo")]
public int OtherFooID { get; set; } 
```

... 或流利的 API：

```
modelBuilder.Entity<Bar>()
    .HasRequired(b => b.OtherFoo)
    .WithMany() // add f => f.OtherBars here, if you have a collection in Foo
    .HasForeignKey(b => b.OtherFooID); 
```

*如果您收到“不允许使用多个级联删除路径*”的异常，请追加

```
 .WillCascadeOnDelete(false); 
```

在 Fluent 映射的末尾。

# c# - 如何在 WP7 中将字符串转换为 UTF-8 字符串格式

> ID：16089521
> 
> 赞同：2
> 
> 时间：2013-04-18T17:30:20.043
> 
> 标签：c#, windows-phone-7, utf-8

我的 WP7 应用程序中有一个字符串。

我需要以 UTF-8 格式将此字符串发送到我的服务器。如何将任何字符串转换为 UTF-8 格式？

到目前为止我已经尝试过了：

```
UTF8Encoding utf8 = new UTF8Encoding();

byte[] encodedBytes = utf8.GetBytes(jsonString);

string jsonStringUTF8 = Convert.ToString(encodedBytes); 
```

其中 jsonString 是我需要的 UTF8 格式的字符串。

但是，当我尝试通过执行以下操作打印新的 jsonStringUTF8 时：

```
System.Diagnostics.Debug.WriteLine("JsonStringUTF8 is: {0}", jsonStringUTF8); 
```

我得到的是：

> JsonStringUTF8 是：System.Byte[]

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T17:32:55.573

您不能`byte`使用 . 将数组转换为字符串`Convert.ToString`。您需要对其进行解码，因为它是一个 UTF8 编码的字节数组。

```
string jsonStringUTF8 = Encoding.UTF8.GetString(encodedBytes, 0,encodedBytes.Length) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T18:48:29.650

根据规范，CLR 中的字符串是 UTF-16 编码的 Unicode 字符。*本质*上，您实际上无法创建 UTF-8**字符串**。UTF-8 编码可以将其转换回 [UTF-16] 字符串，代码如下：*`byte[]`*

 *```
byte[]  rawUtf8EncodedData = ReadSomeUtf8EncodedBytes() ;
string  decodedString      = Encoding.UTF8.GetString( rawUtf8EncodedData ) ; 
```

您还可以显式创建一个 UTF8`Decoder`并使用它来进行转换，或者（最终技术）可能是使用`System.IO`设施：

```
string value ;

byte[]  rawUtf8EncodedData = ReadSomeUtf8EncodedBytes() ;
using ( MemoryStream utf8Stream = new MemoryStream( rawUtf8EncodedData ) )
using ( StreamReader reader = new StreamReader( utf8Stream , Encoding.UTF8 ) )
{
  value = reader.ReadToEnd() ;
} 
```

应该注意的是，如果您的源数据带有 BOM，它将出现在转换后的字符串中，尽管您不可见且无法访问。被一个 XML 阅读器在不应该有的 BOM 上吐槽的情况下搞砸了。

这是 Jon Skeet 关于字符串的文章[http://csharpindepth.com/Articles/General/Strings.aspx](http://csharpindepth.com/Articles/General/Strings.aspx)和他关于 Unicode 和编码的文章[http://csharpindepth.com/Articles/General/Unicode.aspx](http://csharpindepth.com/Articles/General/Unicode.aspx)。*

# matlab - 为什么 Matlab 的 signrank 函数在翻转数据点的符号时返回相同的有符号秩统计值？

> ID：16089523
> 
> 赞同：3
> 
> 时间：2013-04-18T17:30:23.740
> 
> 标签：matlab, statistics

为什么 Matlab 的 signrank 函数在翻转数据点的符号时返回相同的有符号秩统计值？

我有一系列数据点存储在 vector 中`x`。我`signrank(x)`用来做符号等级测试。

Matlab 说

> 当您对一个样本使用测试时，W 是观测值与假设中值 M0 之间的正差秩和（使用 signrank(x) 时为 0，使用 signrank(x,m) 时为 m ））。

所以我认为结果`signrank(x)`和`signrank(-x)`应该不同。但是我经历了一些例子，我得到了 和 相同的符号等级统计`x`值`-x`。Matlab signrank 函数中的有符号秩统计是如何定义的？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T05:51:20.543

*谢谢！实际上，统计量是正差异秩和与负差异秩和之间的最小值。我不明白为什么它需要最低限度。你？*

有趣的问题，感谢您提供指向 matlab 代码的链接。是的，这也让我摸不着头脑，他们肯定会以一种卷曲的方式来做这件事，大概是为了提高计算效率。然而令人惊讶的是，它实际上确实做了签名排名，与之前发布的完全一样。

这是它的工作原理（我在下面粘贴了相关的几行代码以供参考）。

让我将**P**表示为所有正排名的总和（对应于正分数的排名），将**N**表示为所有负排名的总和，最后**将 A**表示为所有排名的绝对总和。显然**A = P + N** （顺便说一句。请注意，我所说的“N”是实际代码中的变量“w”。）

通过算术级数，**A = n*(n+1)/2**。正如您所说，**min(w,(n+1)*n/2-w) 行**实际上返回**N**或**P** (=AN)，以最小值为准。

但是现在看看我在下面粘贴的代码的最后一行。因此，分子是**min(N,P) - A/2**。

现在，如果*N*是最小值，则返回**N-(P+N)/2**，它等于**-(P - N)/2**。

但是，如果*P*是最小值，则返回**P-(P+N)/2**，它等于**-(N - P)/2**。

因此，无论哪种情况，它实际上*都是*返回正负秩和的绝对差（负），正如之前以简化形式发布的那样，

```
| Sum{ sign(Xi) rank(|Xi|) } | 
```

顺便提一句。*他们使用绝对差的负数*的原因很简单，因为它使他们不必在以后找到*互补*的cfd。

来自 signrank 代码的片段以供参考。

```
w = sum(tierank(neg));
w = min(w, n*(n+1)/2-w);
...
z = (w-n*(n+1)/4) / sqrt((n*(n+1)*(2*n+1) - tieadj)/24); 
```

**编辑：**

*为什么取绝对值？z 要有渐近正态性，是不是不应该取绝对值？*

我对它的理解是它实际上并不正常，它是“折叠正常”。即折叠成正半平面。这就是为什么 p 值计算为，

```
p = 2*(1 - normcdf(z,0,1)); 
```

（在旁边）。我知道在实际代码中，他们使用“z”的负数来避免在那里需要 cdf 补码，但这是一回事。

p 值乘以 2 以说明折叠分布。方便的是，这也与将其称为“双尾”p 值完全相同。

想一想如果我们在这里不使用绝对值会发生什么。假设我们采用**PN**并且 N 大于 P。在这种情况下，p 值**2*(1-normcdf(z,0,1))**将评估为*大于*1，因此这不是一个好主意。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T18:16:59.930

*为什么 Matlab 的 signrank 函数在翻转数据点的符号时返回相同的有符号秩统计值？*

因为 signrank 的单参数形式，例如 singrank(x)，返回零假设**Prob(x>0)==0.5**正确的可能性 (pval)。

并且通过对称性，**Prob(x>0)==0.5正确的可能性与****Prob(x<0)==0.5**正确的可能性完全相同。

更新：

*“谢谢！我的问题是：即使 x 在 0 附近不对称，signrank() 仍然为 x 和 -x 返回相同的统计值。”* - 蒂姆

是的，我理解你的困惑，对称性并不完全明显。**signrank() 的结果本质上是对median(x)==0**的可能性的估计。所以想象一下我们让**x**不对称，比如说给每个元素加一个。现在“质量”被移动了，所以它更多地位于正半数线上，所以 signrank(x) 将返回一个非常小的（接近于零）的可能性，即中值（x）==0。但是，希望您能看到，现在**-x**移动了，因此它的质量更多地位于负半数线上，因此**中位数（-x）==0**也同样不太可能。希望有帮助。

顺便提一句。用于发现这种可能性的实际（中间）统计数据是：

```
| Sum{ sign(Xi) rank(|Xi|) } | 
```

您可以看到这对于 -X 是完全对称的。

# javascript - 访问angularjs过滤器中的上一个元素项

> ID：16089524
> 
> 赞同：0
> 
> 时间：2013-04-18T17:30:31.283
> 
> 标签：javascript, angularjs

在 angularjs 中创建过滤器时，如何访问数组中的前一项？即我想将当前元素与前一个元素进行比较

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T17:35:40.433

Hard to figure out exactly what you're trying to achieve, but I think if you're using an ng-repeat you can do this:

HTML:

```
<div data-ng-repeat="element in elements">
    <div>{{ element | myFilter:elements:$index</div>
</div> 
```

Javascript

```
.filter("myFilter", function(){
    return function(input, elements, index){

        if(index > 0){
            var previousElement = elements[index - 1]
        }

        return input;
    }
}); 
```

**Edit**

Ok now that you've specified what you're trying to do, you can use a filter in a different way to instead remove the duplicate dates.

Here's the filter:

```
.filter("uniqueDates", function(){
    return function(input){
      var returnInput = [];
        for(var x = 0; x < input.length; x++){
            if(returnInput.indexOf(input[x]) === -1){
                returnInput.push(input[x]);
            }
        }

      return returnInput;  
    };
}) 
```

Here's a jsfiddle with the html and everything all wired up that you can extrapolate from: [http://jsfiddle.net/nE9EE/](http://jsfiddle.net/nE9EE/)

# java - 通过主屏幕替换技术了解 Android 上的自定义锁定实现

> ID：16089525
> 
> 赞同：5
> 
> 时间：2013-04-18T17:30:43.503
> 
> 标签：java, android, android-intent, homescreen, lockscreen

我一直在研究这个问题。本周我问[了一个相关](https://stackoverflow.com/questions/16049062/custom-lock-screen-implementation-techniques)问题。该地区最有用和最相关的链接是[this](https://stackoverflow.com/questions/13403149/custom-lock-screen-delay-when-wake?lq=1)和[this](https://stackoverflow.com/questions/8248213/use-my-own-android-app-apk-as-launcher-home-screen-replacement)。如果作为主屏幕替换应用程序实现，我想了解它是如何工作的。

快速提问：

*   如果实施，应将哪个屏幕设置为默认值？我们的主屏幕更换或原始主屏幕？
*   请在回答[此问题](https://stackoverflow.com/questions/13403149/custom-lock-screen-delay-when-wake?lq=1)后阅读评论，询问者想出了一种方法。最后他说：

    “想通了！必须使用 setComponentEnabledSetting() 禁用清单意图过滤器，然后在活动弹出时将其重新打开。感谢您的帮助！”

这到底是什么意思？我不太明白这里的逻辑。请帮忙？

*   基本上，我和这个提问者有同样的疑问（请参阅@CoffeeCrisp[答案下方的](https://stackoverflow.com/questions/13403149/custom-lock-screen-delay-when-wake?lq=1)**评论）。** 但是，我无法理解解决方案以及这里到底发生了什么。请帮忙？

谢谢。

编辑：请不要投反对票。如果我需要改进，请在评论中提出建议，以便我有时间进行更改。非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T18:29:29.080

1.  如果您实现了主屏幕替换应用程序，则应将您的应用程序设置为默认启动器/主屏幕。

2.  `setComponentEnabledSetting()`允许您覆盖清单中的意图过滤器并基本上禁用它们。听起来他在用户解锁后覆盖了启动器意图的过滤器，因此他可以显示默认主屏幕。

话虽这么说，我不建议写一个锁屏替换，有太多的问题，它是hacky和不安全的。专注于锁屏小部件。

# jquery - 带有可能换行的文本的点前导符

> ID：16089526
> 
> 赞同：5
> 
> 时间：2013-04-18T17:30:44.617
> 
> 标签：jquery, html, css

我正在尝试弄清楚如何在可能换行的文本之间设置一个领导者。领导者应该有一个可变的宽度，即使两边只有一个单词也能工作。

这是一个例子：

> Lorem ipsum dolor sit amet, consectetur adipiscing elit。Nulla massa neque, laoreet at euismod vitae, aliquet quis。....... Curabitur Tellus justo，malesuada eget egestas ac，consequat sed neque。

我已经在[http://www.w3.org/Style/Examples/007/leaders.en.html](http://www.w3.org/Style/Examples/007/leaders.en.html)和其他类似问题中尝试了解决方案（[CSS Dot Leaders With Textured Background](https://stackoverflow.com/questions/12957952/css-dot-leaders-with-textured-background) & [Table of contents:leading dots](https://stackoverflow.com/questions/2508732/table-of-contents-leading-dots/8132612#8132612)）。不幸的是，当文本的两边都换行时，这些都不起作用。

我有一个 Fiddle [http://jsfiddle.net/crstop/vkDgJ/12/](http://jsfiddle.net/crstop/vkDgJ/12/)最接近我的解决方案。它工作得很好，但前导点的固定宽度并不理想。

HTML：

```
<ul class=leaders>
    <li>
        <span>The text on the left of the leaders. This text can be rather long and
         may wrap to another line. The leader should start at the end of this and      
         continue until it reaches the beginning of the right side text</span>
        <span class="dotsA"></span>
        <span>This is the right side text.This text can be rather long and may wrap 
        to another line. </span>
   </li>
   <li><span>one</span><span class="dotsA"><span>word</span>
</ul> 
```

CSS：

```
ul.leaders {
    padding: 0;
    overflow-x: hidden;
    list-style: none;
}
ul.leaders .dotsA:Before {
    width: 0;
    white-space: norrmal;
    background: white;
    vertical-align: center;
    content:". . . . . . . . . . . . . . . . . . . . "
            ". . . . . . . . . . . . . . . . . . . . ";
}
ul.leaders span:first-child {
    padding-right: 0.33em;
    background: white;
}
ul.leaders span + span + span {
    float: right;
    padding-left: 0.33em;
    background: white;
} 
```

我想要一个纯 css 解决方案，但如果仅在 css 中不可能，我愿意使用 jQuery。它还必须在 IE8+ 和 FF17+ 中工作

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T17:57:08.190

如果我做对了，您的 HTML 中的轻微更改可能会解决它。

```
<p>The text on the left of the leaders. This text can be rather long and may wrap to another line. The leader should start at the end of this and continue until it reaches the beginning of the right side text<span class="dotsA"></span>
This is the right side text.This text can be rather long and may wrap to another line. </p> 
```

这是一个演示：http: [//jsfiddle.net/vkDgJ/17/](http://jsfiddle.net/vkDgJ/17/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-13T19:44:39.323

使用此 HTML：

```
<div class="leader">
  <span>Peter Piper picked a peck of pickled peppers. A peck of pickled peppers Peter Piper picked. If Peter Piper picked a peck of pickled peppers, Where's the peck of pickled peppers Peter Piper picked?</span>
  <span>The peck of pickled peppers Peter Piper picked is gone.</span>
</div>
<div class="leader">
  <span>Really?</span>
  <span>Really.</span>
</div> 
```

这个CSS：

```
.leader {
  position: relative;
  overflow: hidden;
  z-index: 0;
}
.leader > span {
  background-color: white;
}
.leader > span:first-child:after, .leader > span:last-child:before {
  position: absolute;
  background-color: white;
  z-index: -1;
  content: "................................................................"
    "................................................................"
    "................................................................"
    "................................................................"
    "................................................................"
    "................................................................"
    "................................................................"
    "................................................................";
  letter-spacing: 0.25em;
  cursor: default;
}
.leader > span:last-child {
  float: right;
  background-color: white;
  text-align: right;
}
.leader > span:last-child:before {
  left: 0;
} 
```

你应该有好的结果。如果你愿意，你可以在[CodePen上玩它。](http://codepen.io/joshuaseigler/pen/wLKcn)

# java - 将实体持久化到数据库和搜索引擎

> ID：16089527
> 
> 赞同：3
> 
> 时间：2013-04-18T17:30:49.070
> 
> 标签：java, spring, jakarta-ee, jpa, elasticsearch

我正在创建一个使用 JPA 和 ElasticSearch 的应用程序。我有一个关于如何将它们构建和连接在一起的问题。我有一个名为`Newspaper`.

我想将它保存在数据库中，并在搜索引擎中对其进行索引。现在，有什么好的方法呢？您是否会将搜索存储库层注入使用 JPA 的报纸存储库，然后在持久化后对其进行索引？

您是否会创建一个服务层并拥有一个服务 bean 类，您首先将其保存到数据库中，然后使用存储库对其进行索引？或者这可以通过其他（更好的）方式来完成吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T18:05:18.800

查看来自 Hibernate Search 的代码。它同时同步 w Lucene 和数据库（如果需要，也可以异步）。

或者只是使用休眠搜索。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T06:12:41.130

这是我在以前的工作中所做的：

在服务层，使用 Hibernate 持久化实体后，使用 Jackson 转换实体并将其发送到 Elasticsearch。当然，你可以在 repo 层（DAO 层）中这样做，但我不太喜欢它。

顺便说一句，如果您使用的是 Spring，请查看[Spring factory Project for Elasticsearch](https://github.com/dadoonet/spring-elasticsearch)。

# mysql - 错误代码：1292。截断不正确的 DOUBLE 值：“是”

> ID：16089532
> 
> 赞同：0
> 
> 时间：2013-04-18T17:31:13.387
> 
> 标签：mysql, sql, mysql-workbench

当我执行这个 SQL 查询时：

```
INSERT INTO archi(nodo1,nodo2)
SELECT p.nodo,p2.nodo 
FROM polinodo p,polinodo p2 
where p.way=p2.way and p.idpolinodo!=p2.idpolinodo and p.idpolinodo=p2.idpolinodo-1 
and p.way in 
    (SELECT idtag_way 
    FROM tag_way_min where k='highway' and 
    idtag_way in (SELECT idtag_way 
                FROM tag_way_min where k='oneway' and (v=1 or v='true' or v='yes')) ) 
```

我收到以下错误：

> 错误代码：1292。截断不正确的 DOUBLE 值：“是”

我怎样才能解决这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T18:12:54.563

`v`您的表中的列似乎`tag_way`是数字，因此您的这部分`where`子句似乎无效：

```
(v=1 or v='true' or v='yes') 
```

尝试修改该部分，使条件与您的数据类型相匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T18:22:32.490

要求从同一行检索不同的 k 列的两个值似乎存在逻辑问题，

```
(SELECT idtag_way 
FROM tag_way_min where k='highway' and 
idtag_way in (SELECT idtag_way 
            FROM tag_way_min where k='oneway' and (v=1 or v='true' or v='yes') 
```

我不明白 k 如何等于两个值。也许将其更改为：

```
(SELECT idtag_way 
FROM tag_way_min where k='highway' or k='oneway'
idtag_way in (SELECT idtag_way 
            FROM tag_way_min where v=1 or v='true' or v='yes') 
```

# mongodb - MongoDB 的查询优先方法？

> ID：16089533
> 
> 赞同：1
> 
> 时间：2013-04-18T17:31:14.880
> 
> 标签：mongodb, database-design, nosql

我开始为一个肯定会有很多并发访问的项目设计一个全新的 MongoDB 数据库。我选择 MongoDB 是因为我知道它的可扩展性以及查询的速度。

然而，我知道，即使使用 MongoDB，为了性能，我也应该尽可能少地访问数据库。

我知道另一个 NoSQL 数据库 Apache Cassandra 提倡“查询优先”的方法，这意味着您应该首先考虑您的查询，然后根据它们组织您的数据结构。

现在，我想知道同样的原则是否适用于 MongoDB。

到目前为止，我在网上没有找到任何关于此的相关讨论。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T17:40:49.753

为了在 Mongo 中组织和建模数据，您要学习和搜索的词是*denormalization*。在使用 Mongo 时，我肯定会首先考虑您的问题。不仅用于建模，还用于索引。

我在 Mongo 会议上听到的关于如何非规范化的一个很好的规则：

1.  如果数据是相当静态的，请继续将数据非规范化/嵌入到文档中。
2.  如果数据经常更改，请参考另一个文档。

经过一年的 Mongo 制作工作，我已经看到这是非常真实的。嵌入经常变化的数据给我们带来了很大的痛苦。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T20:20:17.553

在使用 MongoDB 时，首先查询很重要，因为您不能“按原样”存储所有数据，而只能创建任意查询和跨表（集合）连接。MonogDB 是一个面向文档的数据库，即。您总是使用文档而不是来自不同表的结果集。

好消息是 MongoDB 少了模式。您可以随心所欲地构建文档，甚至可以根据需要随时间更改文档的架构。但是你需要事先考虑的是如何（使用什么样的键和索引）以及何时（记住，你不能做连接！）你将要检索它们。

正如 ryan1234 所建议的，非规范化是解决此问题的一种选择。但是，这可能会导致数据冗余，并且随着时间的推移会变得难以维护。因此，您可能不想对所有内容进行非规范化。您需要务实地解决应用程序代码中的这些缺点。这里有一些建议：

*   只要内存占用是可以接受的，就可以预取经常使用的数据，例如查找表。
*   决定哪些数据需要根据需要快速提供，例如通过 Web 界面上的请求。理想情况下，您将只有一个可以使用索引查询的键，该索引将为您提供单个请求所需的所有数据。
*   确定可以使用长时间运行的作业（例如 map reduce 或队列）在后台处理哪些数据。或者甚至有自定义的 cronjob 计划作业，这些作业将对您的数据执行某些操作，例如准备您可以稍后使用索引检索的报告。
*   在您的客户端中执行多个请求并加入数据。例如，如果您有一个 Web 客户端，您可以执行多个后续请求以提取数据，您可能会使用 RDBMS 在单个请求中完成这些请求。如果被索引，MongoDB 中的查询非常快，只要您不同步多个查询并在服务器上连接数据，执行许多请求本身就没有错。在客户端上执行此操作可让您在逐步构建 UI 的同时利用整个堆栈（负载均衡器、缓存等）

# typescript - 如何从正在保存的打字稿文件更新 javascript 包文件？

> ID：16089535
> 
> 赞同：2
> 
> 时间：2013-04-18T17:31:23.973
> 
> 标签：typescript, web-essentials

我有一个带有**Web Essentials**和**Typescript**以及**javascript**捆绑的**Visual Studio**项目。

 ******我希望能够做到以下几点：

1.  更改打字稿文件（abc.ts）并保存（好的）
2.  更改被编译成 javascript 文件 abc.js (ok)
3.  更新 abc.js 文件后，请参阅更新的 javascript 包文件 BundlePage.js.bundle - 这不起作用！

基本上，每当我更改打字稿文件并保存后，我都希望看到相应的 javascript 更改反映在 javascript 包文件中。

目前，为了做到这一点，我有一些手动选项：

*   a) 打开捆绑 xml 文件 BundlePage.js.bundle 并保存它，因为它将更新整个捆绑文件 BundlePage.js
*   b) 执行 Alt+Shift+I 以更新项目中的所有捆绑文件；非常笨拙，因为它会更新项目中的所有捆绑文件并检查它们
*   c) 或编辑并保存打字稿的 javascript 文件 (abc.js)，该文件在保存后触发捆绑的 javascript 文件 BundlePage.js 的更新。

有谁知道如何在打字稿文件中进行任何更改以触发受影响的 javascript 捆绑文件的更新？

这是我的软件：

*   Windows 7的
*   MS Visual Studio Premium 2012 版本 11.0.60315.01 更新 2
*   MS .NET 框架版本 4.5.50709
*   网络要点 2.6
*   打字稿 0.8.3。

在此先感谢您的帮助。米格尔。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T06:29:12.213

它应该工作。该错误已在 1.8 版中修复[http://webessentials.uservoice.com/forums/140520-general/suggestions/3358548-update-bundle-on-save-on-an-included-file-suppor](http://webessentials.uservoice.com/forums/140520-general/suggestions/3358548-update-bundle-on-save-on-an-included-file-suppor)引用“JS 和 CSS每当更新捆绑包中包含的 .bundle 文件或任何 .js/.css 文件时，捆绑包都会更新”。也适用于我的机器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-02T17:59:44.657

VS2012 显然不支持 Web Essentials Bundling，第一个支持的版本是 2013：http://vswebessentials.com/features/bundling# [（](http://vswebessentials.com/features/bundling#)并单击 2012 过滤器）******

# java - 在 netbeans 中更改 TextField 名称

> ID：16089536
> 
> 赞同：3
> 
> 时间：2013-04-18T17:31:26.397
> 
> 标签：java, netbeans

我正在尝试更改`TextField`变量名称，但找不到允许我这样做的选项。

我试图从源代码中更改它，但`Netbeans`不允许我这样做，我也搜索过它，但我找不到任何东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T17:40:35.543

要重命名 中的组件`NetBeans`：

*   选择要重命名的组件
*   点击窗口`Properties Window->Code`
*   改变`Variable Name`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-18T17:19:08.833

要重命名 netbeans 中的组件：

```
   1.选择组件
   2.右键单击组件。
   3.编辑变量名
      它已经完成了:)

```

# php - Laravel 创建一个带有默认值集的表单选择

> ID：16089537
> 
> 赞同：0
> 
> 时间：2013-04-18T17:31:28.663
> 
> 标签：php, forms, laravel

控制器：

```
$employee = Staff::where('staff_id', '=', $id)->where('user_role', '=','Employee')->first();
$emp_loc = $employee->locations()->pivot()->only('loc_id');
$locations_list = Location::lists('address1', 'loc_id'); //get list of locations 
```

看法：

```
<!--location -->
<div class="control-group">
<label class="control-label">Location</label>
<div class="controls">
@if(isset($emp_loc))
{{ Form::select('location', $locations_list, $emp_loc) }}
@else
{{ Form::select('location', $locations_list) }}
@endif
</div>
</div> 
```

第三个参数是选择框的默认值，但它总是从第一个值开始。

源代码：

```
<div class="control-group">
<label class="control-label">Location</label>
<div class="controls">
<select name="location"><option value="1">Bethel</option><option value="2">Brooklyn</option><option value="3">Germantown</option><option value="4">Memphis</option><option value="5">Brooklyn</option></select>        </div>
</div> 
```

没有设置默认值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-14T12:35:33.617

可能是数据库配置问题。

返回迁移文件并确保您的外键设置正确。这就是我要正确设置它们的方法：

```
Schema::create('pivot', function(Blueprint $table) {
  $table->increments('id');
  $table->unsignedInteger('loc_id');
  $table->foreign('loc_id')
   ->references('id')->on('location_list');
  .....
}

Schema::create('location_list', function(Blueprint $table) {
  $table->increments('id');
  .....
} 
```

此外，请注意在 Firefox 中该`selected`值无法正确显示。要解决此问题，请将下拉列表更改为（在 Blade 中）：

```
Form::select('location', $locations_list, $emp_loc, array('autocomplete'=>'off'))
```

最后一部分是 Firefox 的一个奇怪行为

# wpf - XamDateTimeEditor (Infragistics) mask is not visible when control is disabled or enabled(not in focus)

> ID：16089539
> 
> 赞同：0
> 
> 时间：2013-04-18T17:31:34.703
> 
> 标签：wpf, styles, datatemplate, infragistics

I have posted this in Infragistics, but just wondering if anyone overhere knows an answer.

How can I style the control, XamDateTimeEditor so that it will always shows mask whether the control is disabled or enabled(not in focus), so users can see what data is expected in that control always.

For example if the masket is set to hh:mm, and the control is enabled and in focus, it will display _ _ : _ _ I need this to visiable always irrespective, control is enabled or in focus.

thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T01:42:07.400

您可以将[DisplayMode](http://help.infragistics.com/Help/NetAdvantage/WPF/2013.1/CLR4.0/html/InfragisticsWPF4.Editors.v13.1~Infragistics.Windows.Editors.XamMaskedEditor~DisplayMode.html)设置为 IncludeBoth。

# dependencies - 如何在不修改每个侦听器的服务工厂的情况下将侦听器附加到服务？

> ID：16089541
> 
> 赞同：1
> 
> 时间：2013-04-18T17:31:48.643
> 
> 标签：dependencies, zend-framework2, zend-framework-modules

我有一个非常简单的类，我把它放在 module`Mail`的服务配置中。

```
'factories' => array(
    'mailer' => function (ServiceLocatorInterface $sl) {
        return new \Project\Mail\Mailer();
    }
) 
```

现在，`Mailer`使用`EventManager`来触发事件。我想附加一个侦听器类，该类将在`Mailer`发送电子邮件失败时记录错误，但我想这样做*而不是*`Mailer`每次我有一个新的侦听器要附加时都进行修改。

如何设置`Mailer`类以便可以从其他模块附加侦听器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T20:19:01.443

您必须首先确定“`Mailer`发送电子邮件失败”的含义。如果您可以在课堂上检查这种情况，`Mailer`则必须触发相应`mail.error`或类似的事件。

然后你必须在`EventManager`内部附加一个监听器来`Mailer`监听这个`mail.error`事件并记录错误。

## 内触发错误`Mailer`

假设我们的`Mailer`类看起来像这样：

```
<?php
namespace Project\Mail;

class Mailer
{
    const EVENT_MAIL_ERROR = 'mail.error';

    protected $events;

    public function setEventManager(EventManagerInterface $events)
    {
        $this->events = $events;
        return $this;
    }

    public function getEventManager()
    {
        if ($this->events === null)
        {
            $this->setEventManager(new EventManager);
        }
        return $this->events;
    }

    public function send(MessageInterface $msg)
    {
        // try sending the message. uh-oh we failed!
        if ($someErrorCondition)
        {
            $this->getEventManager()->trigger(self::EVENT_MAIL_ERROR, $this, array(
                'custom-param' => 'failure reason',
            ));
        }
    }
} 
```

## 监听事件

在引导期间，我们将侦听器附加到`EventManager`inside `Mailer`。

```
<?php
namespace FooBar;

use Zend\EventManager\Event;
use Zend\Mvc\MvcEvent;

class Module
{
    public function onBootstrap(MvcEvent $event)
    {
        $application = $event->getApplication();
        $services = $application->getServiceManager();
        $mailer = $services->get('Mailer');

        $mailer->getEventManager()->attach(Mailer::EVENT_MAIL_ERROR, function(Event $event)
        {
            $param = $event->getParam('custom-param');
            // log the error
        });
    }
} 
```

请参阅[EventManager](http://framework.zend.com/manual/2.1/en/modules/zend.event-manager.event-manager.html)上的文档了解实现细节。

我希望这能解决你的问题！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T13:31:35.440

你不需要在类触发事件中设置任何东西，你只需要听它们。

尽管@user2257808 的答案有效，但这并不是最有效的方法，因为从服务管理器获取邮件的行为会创建一个实例，即使应用程序的其余部分不需要该实例。

更好的方法是将您的侦听器附加到共享事件管理器，如果事件被触发，它将被通知。

这样做与其他答案非常相似

```
public function onBootstrap(MvcEvent $event)
{
    $sharedEvents = $event->getApplication()->getEventManager()->getSharedManager();
    // listen to the 'someMailEvent' when triggered by the mailer
    $sharedEvents->attach('Project\Mail\Mailer', 'someMailEvent', function($e) {
         // do something for someMailEvent
    });
} 
```

现在您甚至不必担心邮件程序是否可用，但如果是，它会触发一个事件，您的侦听器将接收它。

# android - 来自外部站点的 SQLite 数据库填充

> ID：16089542
> 
> 赞同：0
> 
> 时间：2013-04-18T17:31:59.443
> 
> 标签：android, database, sqlite, database-design

我是 android 应用程序开发领域和 SQLite 的初学者，但是我想编写一个应用程序，您可以在其中输入葡萄酒的名称，它会为您提供食物推荐以及他们对食物质量的评价-葡萄酒搭配了。

我一直在研究 SQLite 和 SugarORM，它们据说使 SQLite 更易于使用。接下来，我想从[http://www.whattopair.com/](http://www.whattopair.com/)中提取数据库信息，其中包含我想要用于我的应用程序的整个数据库。

是否可以使用来自该网站的数据库预先填充数据库，而无需手动输入数千个这样的配对？也许我必须联系网站所有者？

谢谢，如果有任何不清楚的地方，我深表歉意，但我是使用这些工具的新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T17:35:01.870

You should check with the site if they provide an API to fetch information from their database pragmatically. If they do, you can write a program that will run the first time your app starts, that will fetch the information and store it locally on the device. You should check how much disk space that will take because the phone's memory is much more limited than the website's database. It might be best to connect to the websites database on-demand and only fetch the info you need.

Android developers training can get you started, and they cover the topics of fetching information from web services, and writing to the local database.

[http://developer.android.com/training/index.html](http://developer.android.com/training/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T19:39:08.787

我希望你不要被我的回答冒犯，但这是你需要听到的答案。=)

您链接的网站的重点是为人们提供葡萄酒和食物的搭配。他们通过让人们通过广告访问他们的网站来赚钱。

他们不想让你免费使用他们的数据，这样你也可以赚钱。=(

您显然可以刮取数据或手动输入数据，但这实际上与窃取相同。另外，当他们添加更多/新数据时，很难跟上他们的步伐。

我怀疑他们是否有基于网站外观的 API。

最好从头开始创建*自己*的食物和葡萄酒搭配数据库。这样你就不会遇到被起诉等问题。

# google-maps - 沿多段线显示文本标签

> ID：16089543
> 
> 赞同：0
> 
> 时间：2013-04-18T17:31:59.850
> 
> 标签：google-maps, google-maps-api-3

我想知道如何在谷歌地图中添加沿折线边缘输出的文本。我找不到任何有关如何执行此操作的文档，但之前已经看过它。

新的谷歌地图滑雪道也有这个文字影响！示例：http: [//goo.gl/maps/pbokL](http://goo.gl/maps/pbokL)

目前我使用 MarkerWithLabel 库将矩形标签添加到折线的开头。[http://google-maps-utility-library-v3.googlecode.com/svn/tags/markerwithlabel/1.1.8/docs/reference.html](http://google-maps-utility-library-v3.googlecode.com/svn/tags/markerwithlabel/1.1.8/docs/reference.html) 这个库没有我想要的功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-31T14:47:38.337

您可以尝试：用于 Google Maps API V3 的 ELabel.js [https://github.com/erunyon/ELabel](https://github.com/erunyon/ELabel)

# mysql - 这个 SQL 有什么问题

> ID：16089545
> 
> 赞同：1
> 
> 时间：2013-04-18T17:32:18.853
> 
> 标签：mysql, sql

我有以下 SQL 查询：

```
SELECT tblBooks.bookID,
    tblBooks.title,
    tblBooks.author,
    tblBooks.coverImage,
    ROUND(ROUND(tblReviews.rating * 2) / 2, 1) AS rating
FROM tblBooks
    LEFT JOIN tblReviews
        ON tblBooks.bookID = tblReviews.bookID
        LEFT JOIN tblMembers
            ON tblReviews.userID = tblMembers.userID
WHERE tblReviews.bookID IS NOT NULL
ORDER BY rating DESC
LIMIT 0, 40 
```

我想查询数据库并返回平均评分，因此，如果一本书已被审查 6 次，则将 6 个用户的每个评分相加并计算平均值。现在只返回最新的评级。当我将此行更改为：

```
ROUND(ROUND(AVG(tblReviews.rating) * 2) / 2, 1) AS rating 
```

总共只返回一个结果，所以显然有问题，但我不知道是什么。

如果有人能对此有所了解，我认为这与我的加入有关。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T17:38:34.680

你需要使用`group by`这样的：

```
SELECT tblBooks.bookID, tblBooks.title, tblBooks.author, tblBooks.coverImage,
       AVG(tblReviews.rating) as avgRating
FROM tblBooks
     LEFT JOIN tblReviews
     ON tblBooks.bookID = tblReviews.bookID
WHERE tblReviews.bookID IS NOT NULL
group by tblBooks.bookID, tblBooks.title, tblBooks.author, tblBooks.coverImage
ORDER BY avgrating DESC 
```

您的查询似乎没有使用 Members 表中的任何信息，因此我将其删除。它甚至没有基于它进行过滤，因为您使用的是`left join`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T17:39:55.403

为什么不`AVG`改用？

```
SELECT tblBooks.bookID,
    tblBooks.title,
    tblBooks.author,
    tblBooks.coverImage,
    AVG(tblReviews.rating) AS rating
FROM tblBooks
    LEFT JOIN tblReviews
        ON tblBooks.bookID = tblReviews.bookID
        LEFT JOIN tblMembers
            ON tblReviews.userID = tblMembers.userID
WHERE tblReviews.bookID IS NOT NULL
Group By tblBooks.bookID, tblBooks.title, tblBooks.author, tblBooks.coverImage
ORDER BY rating DESC
LIMIT 0, 40 
```

# 供参考

在 MYSQL 中，您不需要按*所有*列进行分组，尽管这是一个很好的做法，因为在使用其他 RDMS 时您将需要这样做。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T17:49:57.533

你也不需要`WHERE`。您实际上是在进行`INNER`联接：

```
SELECT t.bookID,
       t.title,
       t.author,
       t.coverImage,
       AVG(r.rating) AS rating
FROM tblBooks AS t
    JOIN tblReviews AS r
        ON b.bookID = r.bookID
GROUP BY t.bookID
--     , t.title, t.author, t.coverImage 
ORDER BY rating DESC
LIMIT 40 ; 
```

注意：仅使用`GROUP BY t.bookID`（并且没有其他列）只有`bookID`在`tblBooks`. 所有其他 DBMS 都不允许这样做（Postgres 除外，但该产品已正确实现了该功能，并且它确实检查其他列是否依赖于分组列）。MySQL 根本不进行检查，因此在很多情况下它会给出错误的结果。

这也取决于`sql_mode`设置，上面是否会正常运行。

* * *

您也可以先分组，然后加入。这是有效的 SQL，不会出现错误结果：

```
SELECT t.bookID,
       t.title,
       t.author,
       t.coverImage,
       g.rating
FROM tblBooks AS t
    JOIN 
        ( SELECT r.bookID,
                 AVG(r.rating) AS rating
          FROM tblReviews AS r
          GROUP BY r.bookID
        ) AS g
        ON b.bookID = r.bookID
ORDER BY rating DESC
LIMIT 40 ; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T17:35:49.187

我认为你缺少的是

```
 GROUP BY tblBooks.bookID, tblBooks.title, tblBooks.author, etc... 
```

AVG 是一个汇总数据的聚合函数，使用 GROUP BY 创建聚合组。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-18T17:36:16.573

试试这个：

```
...
WHERE tblReviews.bookID IS NOT NULL
GROUP BY tblBooks.bookID
ORDER BY rating DESC
LIMIT 0, 40 
```

干杯。

# android - how to alias or smooth scaled down image in android

> ID：16089548
> 
> 赞同：0
> 
> 时间：2013-04-18T17:32:32.140
> 
> 标签：android, android-imageview, universal-image-loader

I'm setting a larger image to a ImageView in Android using the Android Universal ImageLoader. However, I'm getting jagged or non-smooth edges when the image gets scaled down. Is there an option I can set in the imageview to have a smoother edges when scaling down of the image?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T17:55:29.227

您可以尝试将 ImageScaleType 设置为 EXACTLY，也可以将 Bitmap.Config 设置为 ARGB_8888 以获得更好的照片。

```
DisplayImageOption options = new DisplayImageOptions.Builder().showStubImage(R.drawable.ic_launcher).showImageForEmptyUri(
            R.drawable.ic_launcher).showImageOnFail(R.drawable.ic_launcher).cacheInMemory()
            .resetViewBeforeLoading().showStubImage(R.drawable.ic_launcher).imageScaleType(
                    ImageScaleType.EXACTLY).cacheOnDisc().bitmapConfig(Bitmap.Config.RGB_565).build(); 
```

# php - How do I properly determine if an array that is returned is false?

> ID：16089549
> 
> 赞同：1
> 
> 时间：2013-04-18T17:32:45.153
> 
> 标签：php, authentication

I am attempting to build a password-protected area on my site. However, in my `if` statement, I'm having trouble determining if the array is empty or not. When the code is run, regardless of what is put into the user/pass fields, it's always testing as true. For reference, the database being accessed only has 1 row, containing 1 user/pass combo.

```
function verify(){

  $dbhost = "host";
  $dbname = "db";
  $dbuser = "user";
  $dbpass = "password";

  if (isset($_SESSION['valid_user']))return true;

  $user_name = $_POST["user_name"]; 
  $password = $_POST["password"];

  if ($user_name && $password){ 

    try{ 
      $conn = new PDO("mysql:host=$dbhost;dbname=$dbname",$dbuser,$dbpass);
    }
    catch(PDOException $pe){
      die('Connection error, because: ' .$pe->getMessage());
    }

    $sql = "SELECT user_name FROM users WHERE user_name = ':user_name' AND password = ':password'";     

    $q = $conn->prepare($sql);

    if(!$q){
      die("Execute query error, because: ". $conn->errorInfo());
    }; 

    $q->execute(array(':user_name'=>$user_name, ':password'=>$password));  

    $result = $q->fetchALL();

    if ($result['user_name']=$user_name){ 
      $valid_user = $user_name;
      $_SESSION['valid_user'] = $valid_user;
      return true;
    }
    else{  
      $text = "User Name and Password did not match";
      write_log_in($text);
    }
  }
  else {  
    $text = "This is a secure server. Please log in.";
    write_log_in($text);
  }
} 
```

As a side note, I'm aware that my passwords should be stored in at least an MD5 hash format or something similar. I just wanted to get it working at all before adding in more stuff.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T17:35:32.130

This is your problem

```
if ($result['user_name']=$user_name){ 
```

it should be

```
if ($result['user_name']==$user_name){ 
```

But why you don't check if you have a result to determine if the user is correct. Because you pass the user in your SQL query.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T17:35:06.083

Missing an equal sign:

```
if ($result['user_name'] == $user_name){ 
// ----------------------^ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T17:35:51.420

`$result['user_name']=$user_name` should be `$result['user_name'] === $user_name`.

Also, don't use MD5\. Hash the passwords with a slow hashing function like [`hash_pbkdf2`](http://php.net/manual/en/function.hash-pbkdf2.php), which is expensive to attack.

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-18T17:43:54.493

您可以使用： if (mysql_num_rows($result)==0) 因为如果没有结果，则输入密码的用户不正确

# html - making right aligned vertical tabs with foundation 4 framework?

> ID：16089550
> 
> 赞同：1
> 
> 时间：2013-04-18T17:32:48.910
> 
> 标签：html, css, tabs, zurb-foundation, css-frameworks

I'm absolutely flabbergasted and can't find any solution that even remotely seems to work!! I'm trying to make vertical tabs that will be on the right and the content will be on the left. I am using foundation 4 framework. Using the vertical-nav in their docs makes the tabs, but I can't seem to move them to the right. Any idea would be greatly appriciated. I'm using the code that is given in foundation docs: [http://foundation.zurb.com/docs/components/section.html](http://foundation.zurb.com/docs/components/section.html) . see vertical nav.

A screenshot to show what I'm trying to achieve:[http://i47.tinypic.com/246nmnr.jpg](http://i47.tinypic.com/246nmnr.jpg)

Thanks a lot for help.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T01:34:05.503

将内容和导航放在列中。请参阅下面的示例并[在此处查看它的实际效果](http://jsfiddle.net/V2Le4/)。您必须调整 jsfiddle 中“结果”区域的大小才能看到`columns`.

```
<div class="row">
    <div class="small-12 large-9 columns">
        <p >This is your content area</p>
    </div>
    <div class="small-12 large-3 columns">
        <div class="section-container vertical-nav" data-section="vertical-nav" style="">
            <section class="section">
                <p class="title"><a href="#">Privacy Policy</a></p>                    
            </section>
            <section class="section">
                <p class="title"><a href="#">License agreement</a></p>                    
            </section>
            <section class="section">
                <p class="title"><a href="#">DMCA</a></p>                    
            </section>
            <section class="section">
                <p class="title"><a href="#">Proprietary Notices</a></p>                    
            </section>
            <section class="section">
                <p class="title"><a href="#">Trademarks</a></p>                    
            </section>           
        </div>
    </div>
</div> 
```

# jquery - jQuery手风琴中的自动复选框

> ID：16089551
> 
> 赞同：0
> 
> 时间：2013-04-18T17:32:49.167
> 
> 标签：jquery, accordion, jquery-ui-accordion

我在标题部分标记中使用带有 1 复选框的 jquery 手风琴。在与标题相关的内容区域内，我有几个元素也包含复选框。

如果选中标题元素中的复选框，我想选中该标题的内容区域中的所有框。

我知道标题元素的 ID 是“ui-accordion-accordion-header-0”，内容是 aria-labelledby="ui-accordion-accordion-header-0"，它对应于标题的 id。

有人可以为我指明方向，以获取有关如何执行此操作的教程或示例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T17:41:31.297

由于没有给出 HTML，我试图理解您的问题，假设 html 是这样的

```
input type="checkbox" id="ui-accordian-accordian-header-0"/>
<hr/>

<input type="checkbox" class="ui-accordian-accordian-header-0"/>
<input type="checkbox" class="ui-accordian-accordian-header-0"/>
<input type="checkbox" class="ui-accordian-accordian-header-0"/>
<input type="checkbox" class="ui-accordian-accordian-header-0"/> 
```

使用以下代码，您可以使用标题复选框选中或取消选中全部

```
$("#ui-accordian-accordian-header-0").change(function() {
    var id = $(this).attr("id");
    var items = $("." + id);

    this.checked ? items.prop("checked", true) : items.prop("checked", false);
}); 
```

这是一个演示这个概念的小提琴：http: [//jsfiddle.net/SeYqU/](http://jsfiddle.net/SeYqU/) 这应该足以让你上路。

# javascript - Template a javascript file using underscore.js

> ID：16089556
> 
> 赞同：2
> 
> 时间：2013-04-18T17:32:59.113
> 
> 标签：javascript, node.js, underscore.js, templating

I am using node.js at the server with express.js for some rest calls, my client side is uses backbone.js for the models and views. I am using underscore.js for templating some small html code for the views with backbone.

I have a designed a simple login module which uses a rest call to validate the user, once validated I show the after login page to the user.

Now in the javascript that I have written for the application, there are a few places where i need to include a random number in the url which is generated on user validation and returned to the client side.

So let me make it more clear by writing down the steps 1\. Client sees the login page, enters user id and password 2\. Server generates a token and sends it back to the client 3\. All subsequent calls for further services include this token as a path parameter.

I am trying a solution where in I am trying to template the app.js javascript file and serve it using express.get below is the test code that i am trying as of now, just to prove the concept.

```
app.get('/js/:filename', function(req, res)
{
    console.log();
    var fname = process.env.PWD + "/public/js/" + req.params.filename;
    var obj =
    {
        user : req.session.user
    };
    fs.readFile(fname, function(err, data)
    {
        if (!err)
        {
            var returnstring = _und.template(data, obj);
            res.send(returnstring);
        }
    });

}); 
```

I am trying this with a very simple file(test.js) as of now

```
var a = '<%- user %>'; 
```

Whenever I am trying to template this and get it in the response, I am querying this using `http://localhost:5555/js/test.js`, I am getting the exact same in the response and not the user value that is set in the session.

I would be grateful for any help with this or any other solution that might exist that I can try with node.js, i.e some other templating library etc.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T05:00:05.153

对于上述问题，我深表歉意，似乎可以使用 javascript 模板化 javascript 文件 :) 。我只需要重新审视这个问题。刚改了这条线

```
fs.readFile(fname, function(err, data) 
```

和

```
fs.readFile(fname, 'utf-8' , function(err, data) 
```

它在那之后起作用。

实际问题在于我正在检索的数据，它不是作为字符串而是作为缓冲区出现，根据节点 js api，如果未指定文件类型，它将返回一个缓冲区。如果它被指定，那么它将给出一个字符串。就这样：）

# apache - Cassandra 是否有 Apache Web 服务器的代理解决方案？

> ID：16089560
> 
> 赞同：2
> 
> 时间：2013-04-18T17:33:15.113
> 
> 标签：apache, cassandra

类似于 apache web 服务器中的 couchbase mod，即[http://wiki.apache.org/couchdb/Apache_As_a_Reverse_Proxy](http://wiki.apache.org/couchdb/Apache_As_a_Reverse_Proxy)？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T10:06:36.760

不，因为 Cassandra 不使用 http(s) 来处理请求。它使用 thrift 协议，或较新版本的 cql 二进制协议。

您可以尝试在端口 9160 上转发 thrift 请求，但更简单的答案是使用 Tomcat 或 Glassfish 来托管您的 Web 应用程序，该应用程序使用 Cassandra 和从 tomcat 到 apache 的代理请求。

# unix - 用于分析输入的 Unix 脚本，具体取决于字符类型

> ID：16089562
> 
> 赞同：0
> 
> 时间：2013-04-18T17:33:21.820
> 
> 标签：unix, input

我在这里有一些时间处理我的脚本

1.  脚本从键盘读取字符。
2.  根据字符的类型，脚本会显示以下消息之一

大写字母 小写字母 数字 特殊字符。

```
#!/bin/bash
echo 'Enter single character:'
read $1
if $1 = "A-Z"
then
  echo 'Uppercase letter'
fi

if $1 = "a-z"
then
  echo 'Lowercase letter'
fi

if $1 = [ ! @ $ ^ & * ~ ? . | / [ ] < > \ ` " ;# ( )]
then
  echo 'Special character'
fi 
```

## 虽然它不能正常工作。

这是简短的工作：

#!/bin/bash echo "Enter single character:" read input_source case "$input_source" in [[:lower:]]) echo "Lowercase letter" ;; [[:upper:]]) echo "大写字母" ;; [0-9] ) 回显“数字”;; * ) echo "特殊字符";; 经社理事会

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T18:07:29.217

我确实有一些建议给你...

*   最好安装灰烬或破折号。这些 shell 对应于 Posix 标准化的 shell 语法。它们对您的主要优势是：*手册页将更简单、更易于阅读。*您也可以在线找到手册页。它描述了 bash 的重要子集，即 Posix。

*   有两种评估 shell 条件的方法。一个是`if ... fi`，另一个是`case ... esac`。但是该`if`语句*不评估表达式，*它评估*管道*和*命令*。因此，通常会运行该`test`命令，该命令会计算表达式，并且别名为`[`.

* * *

```
if [ 1 -eq 1 ]; then
  echo success
else
  echo failure
fi

if grep pattern file; then
  echo another success
fi 
```

* * *

*   注意`[ ... ]`is 不是*语法*，它只是说的缩写`if test ...; then`。

*   该`case ... esac`语句将进行模式匹配。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T18:27:11.987

```
usage ()
{
  echo usage: $0 CHAR
  exit
}

[[ $1 ]] || usage

if [[ $1 =~ [[:upper:]] ]]
then
  echo 'uppercase letter'
elif [[ $1 =~ [[:lower:]] ]]
then
  echo 'lowercase letter'
elif [[ $1 =~ [[:punct:]] ]]
then
  echo 'special character'
fi 
```

[正则表达式](http://wikipedia.org/wiki/Regular_expression)

# sublimetext2 - Sublime Text 2 中的 Lorem Ipsum

> ID：16089565
> 
> 赞同：3
> 
> 时间：2013-04-18T17:33:28.177
> 
> 标签：sublimetext2, lorem-ipsum

出于某种原因，我似乎无法弄清楚，我试图从“占位符”包中使用的片段不起作用。例如，根据 Placeholders 片段的选项卡触发器，当我输入“lorem5”时，我应该得到几个 Lorem Ipsum 类型的段落，而不是 5 个单词或 Lorem Ipsum 类型！

Placeholders 中的每个 Lorem Ipsum 片段都使用“lorem”和一个 1-5 的数字，每个数字的文本长度都在增加，但是当我输入 lorem 并且任何数字对应于设置的选项卡触发器时，我只会得到那么多单词，不是我分配给它的片段。我似乎无法找到最重要的快捷方式来自哪里。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T19:21:07.137

I can combine the Emmet package and the Placeholder package to get different paragraphs of lorem. Example: `p*2>lorem50` will equal:

```
 <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Quam, alias, dignissimos, aspernatur, quidem nihil architecto sequi vero explicabo est maiores atque laudantium similique omnis iusto corporis molestias eveniet blanditiis nam numquam fugiat animi quis necessitatibus perspiciatis magni doloremque aperiam culpa adipisci nisi deleniti dolores. Vitae rerum obcaecati quasi asperiores itaque.</p>
                        <p>Ipsum, aspernatur, soluta distinctio debitis quos ab necessitatibus saepe facilis voluptatibus perspiciatis molestias laudantium minus magni ea pariatur reprehenderit officia provident deserunt quasi dolor optio dolore inventore eos. Accusamus, obcaecati, quod reiciendis recusandae amet fugiat dolores magnam velit provident repellendus vel eum exercitationem quia cum nulla perferendis quibusdam? Alias, dolore!</p> 
```

`50` is equal to the number of letters in the paragraph.

Edit: [Emmet has lorem built in as well](http://docs.emmet.io/abbreviations/lorem-ipsum/)

# c# - 从 C# 代码更新 Ms-Access 表时出错

> ID：16089568
> 
> 赞同：0
> 
> 时间：2013-04-18T17:33:30.843
> 
> 标签：c#, sql, ms-access, insert

我正在尝试从 C# 表单更新我的 Access 表。当我运行程序时，它运行时没有任何消息，但是当我单击更新时，它会中断并给出以下错误消息：

> *输入字符串的格式不正确。*
> 
> 访问表字段：- ID(string)、Name(string)、Score(int)

错误信息 ：-

```
 public Form1()
 {
    InitializeComponent();
 }

 OleDbConnection conn = new OleDbConnection(@"Provider=Microsoft.ACE.OLEDB.12.0;Data Source=D:\Database3.accdb");

 public void UpdateRecord()
 {
        int score = Convert.ToInt32(textBox2.Text);
        **string command = "update score set Name= '"+textBox1.Text+"' , Score= '"+score+"' where ID= '"+textBox3.Text+"'  ";**
    OleDbCommand cmd = new OleDbCommand(command,conn);
    conn.Open();

    cmd.ExecuteNonQuery();

public void showData()
{
   string command = "Select * from score";
   OleDbCommand cmd = new OleDbCommand(command, conn);

   OleDbDataAdapter da = new OleDbDataAdapter(cmd);
   DataTable Table = new DataTable();
   da.Fill(Table);
   dataGridView1.DataSource = Table;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T17:35:58.030

`Score` is an integer. You have quotes around it in your string, which is invalid. Try:

```
string id = textBox3.Text;
string command = "update score set Name= '"+textBox1.Text+"' , Score= "+textBox2.Text+" where ID= '"+id+"'  "; 
```

I'd be concerned that you have no data validation in place. What if they don't enter a number in the text box? And why are you converting 'ID' to a integer when it's an string field?

# jquery - 如何结合 on() 和 not()？

> ID：16089569
> 
> 赞同：-1
> 
> 时间：2013-04-18T17:33:32.517
> 
> 标签：jquery

我有这个，但它得到一个错误：

```
$('#Photocell').on('click', 'div.group:not('.overrideIcon')', function(){...}); 
```

我应该在 not() 中使用双引号吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T17:34:50.633

Try this:

```
$('#Photocell').on('click', 'div.group:not(.overrideIcon)', function(){...}); 
```

No need of single quotes for the `overrideIcon` class inside `:not()`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-18T17:34:59.347

Since there are no spaces, you can simply omit the quotes:

```
$('#Photocell').on('click', 'div.group:not(.overrideIcon)', function(){...}); 
```

Safer way is inverting the quotes:

```
$('#Photocell').on("click", "div.group:not('.overrideIcon')", function(){...}); 
```

# r - 如何检测数据框列中的异常值？在 R 中

> ID：16089572
> 
> 赞同：3
> 
> 时间：2013-04-18T17:33:50.297
> 
> 标签：r, dataframe, outliers

我有一个数据框，假设是这样的：

```
names<-c("a","a","a","a","a","b","b","b","b","b","c","c","c","c","c","c","c","c")
var1<-c(0.942999593,0.935507266,0.973589623,0.969415912,0.95230801,0.935507266,0.888740961,0.91750551,0.944482672,0.945468585,1.457579147,0.922206277,0.941511433,0.954724791,0.941014244,0.941511433,0.941511433,1.50511433)
var2<-c(-0.012678088,0.014313763,0.001138275,-0.020568206,0.012987126,0.001217192,0.03360358,0.009758172,0.015066932,-0.037879492,0.020471157,0.010738162,0.010952531,0.019377213,0.027140572,0.031116892,-0.018530676,-8.90E-05)
as.data.frame(cbind(names,var1,var2))->df 
```

我想将异常值转换为 var1 和 var2 列中的 Na。但是，我想为“名称”列中的每个类别独立计算异常值。因此，var1 中“a”的异常值将是仅使用 var1 中的前 5 行发现的异常值。

我检测异常值的方式是所有值，分别低于或高于分位数 0.25 和 0.75。

在 R 中有没有简单的方法来做到这一点？

非常感谢你。

蒂娜。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-18T18:32:41.477

以下是您可以为 var1 执行此操作的方法：

```
quantiles<-tapply(var1,names,quantile)
minq <- sapply(names, function(x) quantiles[[x]]["25%"])
maxq <- sapply(names, function(x) quantiles[[x]]["75%"])
var1[var1<minq | var1>maxq] <- NA 
```

对 var2（或 df$var2）重复相同的操作。

# javascript - 难以执行小书签 javascript

> ID：16089573
> 
> 赞同：1
> 
> 时间：2013-04-18T17:33:52.877
> 
> 标签：javascript, bookmarklet

我正在尝试创建一个书签应用程序来解析来自 Amazon、Etsy 和 JCrew 的信息并将其传输到内置于 Rails 中的愿望清单应用程序。我已经成功创建了一个书签按钮，将我的 javascript 文件加载到 DOM 中，但它似乎没有正确执行并将数据传递给我的应用程序。或者也许我的 javascript 有问题。谁能帮我弄清楚我做错了什么？我在下面包含了我的 js 文件：

```
function() {

function get_amazon_product_info() 
    {
        var title_span = document.getElementById("btAsinTitle");
        var title = title_span.innerText;

        var image_tag = document.getElementById("main-image");
        var image = image_tag.getAttribute("src");

        var price_span = document.getElementById("actualPriceValue");
        var price = price_span.innerText;

        var product_info = {
            title: title,
            image: image,
            price: price
        }
        return product_info
    }

function get_etsy_product_info()
{
        var title_span = document.getElementById("item-title");
        var title = title_span.innerText;

        var image_div = document.getElementById("fullimage_link1");
        var image_tag = image_div.getElementsByTagName("img");
        var image = image_tag[0].getAttribute("src");

        var price_div = document.getElementsByClassName("item-price");
        var price_span = price_div[0].getElementsByClassName("currency-value")
        var price = price_span[0].innerText;

        var product_info = {
            title: title,
            image: image,
            price: price
        }
        return product_info
}

function get_jcrew_product_info()
{
    var title_span = document.getElementById("pdp-title");
        var title = title_span.innerText;

        var image_div = document.getElementsByClassName("prod_main_img");
        var image_tag = image_div[0].getElementsByTagName("img");
        var image = image_tag[0].getAttribute("src");

        //lame implementation -- need to be able to determine which radio button is checked. Finish later!

        var price_div = document.getElementsByClassName("pdp-shapes");
        var price_span = price_div[0].getElementsByClassName("price")
        var price = price_span[0].innerText;

        var product_info = {
            title: title,
            image: image,
            price: price
        }
        return product_info
}

function determine_params() 
{
        domain = document.domain;
        if (domain == 'www.amazon.com')
        {   
            get_amazon_product_info();
        }
        else if (domain == 'www.etsy.com')
        {
            get_etsy_product_info();
        }
        else if (domain == 'www.jcrew.com')
        {
            get_jcrew_product_info();
        }
}   

function send_data(product_info)
{           
    var link_url = document.URL;
    var http = new XMLHttpRequest();
    var url = "http://max-miller.local:3000/add_product";
    var params = "title=" + product_info[title] + "&image=" + product_info[image] + "&price=" + product_info[price] + "&link_url=" + link_url;
    http.open("POST", url , true);

    //Send the proper header information along with the request
    http.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
    http.setRequestHeader("Content-length", params.length);
    http.setRequestHeader("Connection", "close");

    http.onreadystatechange = function() {
        if(http.readyState == 4 && http.status == 200) {
            alert(http.responseText);
        }
    }

    http.send(params);
}

determine_params();
send_data(product_info); 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T20:29:50.877

正如我在评论中指出的那样，我看到您的代码*原样*存在两个问题。

**首先**，你的闭包永远不会被执行——它实际上在语法上是不正确的。在浏览器的控制台中，这就是这个示例之间的区别：

```
function() { console.log('something'); } 
```

和这个：

```
(function() { console.log('something'); })(); 
```

**其次**，`XMLHttpRequest`只能在页面域的上下文中工作。（该脚本不会获得对其来源域的特殊权限。）因此，鉴于您的脚本的性质，它看起来*不是*`max-miller.local:3000`预期的执行域，并且请求将失败。

 *查看[类似 JSONP](http://en.wikipedia.org/wiki/JSONP)的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T20:13:23.973

希望能帮助到你：

我从来没有像你一样发送过数据`http.sed(data)`

但是，每当我需要来自服务器的某些东西时，我都会在 head 部分创建一个脚本元素；

始终使用`json.stringify`，这可能是您的应用无法发送数据的原因之一

并且`if (s.length >= 2000)`在使用我的解决方案时也要小心，因为您无法通过 1 个请求发送/接收无限数据

像这样：

```
 function createElementScript(src)
    {

        var script = document.createElement("script");
        script.type = 'text/javascript';
        script.src = src;
        //console.log("SRC: "+src);
        var header = document.getElementsByTagName("head");
        header[0].appendChild(script);
    } 
```

where`src`创建如下：

```
var s = JSON.stringify({'url': location.href,
                                    'title': document.getElementById('linkbook_article_title').value,
                                    'description': document.getElementById('linkbook_article_textarea').value
                                });
                                if (s.length >= 2000) {
                                    alert('Payload length is over 2000, action may fail.');
                                }
                                createElementScript(apiURL + "/FollowProduct?input=" + encodeURIComponent(s)); 
```

我的整个书签，也许它可以帮助你改进你的；我使用了单例模式，只是为了确保如果用户多次单击小书签，我不会重新插入小书签，而且我还想封装所有数据

```
<?php if (false) { ?><script><?php } ?>
    var LinkbookClass = LinkbookClass ? LinkbookClass : function() {

        var assetsURL = '<?= $this->getAssetsUrl(); ?>';
        var apiURL = '<?= Yii::app()->createAbsoluteUrl($this->module->id . '/' . $this->id . '/'); ?>';
        var imgsList = new Array();
        var ImgsListImgID = 0;
        //all the images found on the webpage
        var images = 0;
        var imgsListHeightWidth = [];
        var isHighlighting = false;
        var versionStatus;
        var flag1 = false;
        var flag2 = false;
        var precedentObj = null;
        var overlay,
                current,
                handler;
        var extractHL;
        var name = false, price = false, image = false;
        //do we save logs ?
        var consoleLog = true;
        var version_popup;
        var f = function()
        {
            createElementScript(assetsURL + '/sizzle.js?x=<?= $this->module->params['interface_version']; ?>');
            createElementScript(assetsURL + '/xpath.js?x=<?= rand(1, 10000000); ?>');
            //LinkbookPluginCollection.run();

            var popupdividreset = "linkbookreset";
            var DOCreset = document.getElementById(popupdividreset);
            if (DOCreset != null) {
                return false;
            }

            var popupdivid = "linkbookdetails";
            var DOC = document.getElementById(popupdivid);
            if (DOC != null) {
                return false;
            }

            //load css file, force a reload/recache
            addCSS(assetsURL + '/linkbook.css?x=<?= rand(1, 10000000); ?>');
            var divreset = document.createElement("div");
            divreset.id = popupdividreset;
            var div = document.createElement("div");
            div.id = popupdivid;
            //this will highlight the DOM element that you are hovering
            var divhighlight = document.createElement("div");
            divhighlight.id = "overlayhighlightlinkbook";
            var divOutside = document.createElement("div");
            divOutside.id = "LinkbookOverlay";
            var divLinkbook = document.createElement("divCloseAffair");
            divLinkbook.id = "divLinkbook";
            var str = '<div id="divemptylinkbook"></div>';
            str += divForm('none', div.id, images);
            str += divLogin('none', div.id);
            str += divDetails('none', div.id);
            str += divSuccess('none', div.id);
            str += divBroken('none', div.id);
            div.innerHTML = str;
            divreset.appendChild(div);
            //not used anymore
            //document.body.insertBefore(divreset, document.body.firstChild);

            divOutside.innerHTML = "";
            //inserting the DOM div blank element imediatly after body tag
            divhighlight.innerHTML = "";
            divLinkbook.appendChild(divhighlight);
            divLinkbook.appendChild(divOutside);
            divLinkbook.appendChild(divreset);
            document.body.insertBefore(divLinkbook, document.body.firstChild);
        };
        function addCSS(url) {
            var headID = document.getElementsByTagName("head")[0];
            var cssNode = document.createElement('link');
            cssNode.type = 'text/css';
            cssNode.rel = 'stylesheet';
            cssNode.href = url;
            cssNode.media = 'screen';
            headID.appendChild(cssNode);
        }
        ;
        function divLogin(displayTarget, div_id)
        {

            return '<?php $this->renderHTMLtoJS('login', array('js' => array('displayTarget', 'div_id', 'assetsURL'))); ?>';
        }
        ;
        function divForm(displayTarget, div_id, images)
        {

            return '<?php $this->renderHTMLtoJS('form', array('js' => array('displayTarget', 'div_id', 'images', 'assetsURL'), 'url' => $url, 'follower' => $follower)); ?>';
        }
        ;
        function divBroken(displayTarget, div_id)
        {

            return '<?php $this->renderHTMLtoJS('report_broken_url', array('js' => array('displayTarget', 'div_id', 'assetsURL'))); ?>';
        }
        ;
        function divSuccess(displayTarget, div_id)
        {

            return '<?php $this->renderHTMLtoJS('success', array('js' => array('displayTarget', 'div_id', 'assetsURL'))); ?>';
        }
        ;
        function divDetails(displayTarget, div_id)
        {
            return '<?php $this->renderHTMLtoJS('details', array('js' => array('displayTarget', 'div_id', 'assetsURL'), 'url' => $url, 'follower' => $follower)); ?>';
        }
        ;
        function createElementScript(src)
        {

            var script = document.createElement("script");
            script.type = 'text/javascript';
            script.src = src;
            //console.log("SRC: "+src);
            var header = document.getElementsByTagName("head");
            header[0].appendChild(script);
        }
        ;
        function hideAllDivs() {
            var a = ['LinkbookParrentLogin', 'LinkbookParrentDetails', 'LinkbookParrentForm'];
            for (x in a) {
                var d = document.getElementById(a[x]);
                if (d) {
                    d.style.display = 'none';
                }
            }
        }
        ;
        function divGallery(displayTarget, div_id)
        {
            return '<?php $this->renderHTMLtoJS('gallery', array('js' => array('displayTarget', 'div_id', 'assetsURL'))); ?>';
        }
        ;
        f.prototype = {
            labelEdit: function()
            {
                if (document.getElementById('form_selected_product_name_Linkbook_input').style.display == 'none')
                {
                    document.getElementById('form_selected_product_name_Linkbook_input').style.display = document.getElementById("divemptylinkbook").style.display;
                    document.getElementById('form_selected_product_name_Linkbook_span').style.display = 'none';
                    document.getElementById('Linkbook_labelEdit').style.display = 'none';
                    document.getElementById('form_selected_product_name_Linkbook_input').value = document.getElementById('form_selected_product_name_Linkbook_span').innerHTML;
                    document.getElementById('form_selected_product_name_Linkbook_input').focus();
                }
            },
            get_article_title: function()
            {
                if (document.title)
                    document.getElementById('linkbook_article_title').value = document.title;
                else
                    document.getElementById('linkbook_article_title').value = location.href;
            },
            get_article_description: function()
            {
                if (document.getElementsByName('description')[0])
                {
                    if (document.getElementsByName('description')[0].getAttribute('content'))
                        document.getElementById('linkbook_article_textarea').value = document.getElementsByName('description')[0].getAttribute('content');
                    else
                        document.getElementById('linkbook_article_textarea').value = 'null';
                }
                else
                    document.getElementById('linkbook_article_textarea').value = 'null';
            },
            init_after_login: function(is_product)
            {
                this.showDiv('LinkbookParrentForm');
            },
            init: function() {
                //console.log('init');
                this.get_article_title();
                this.get_article_description();
                if (<?php
    if (Yii::app()->user->isGuest)
        echo 'true';
    else
        echo 'false';
?>) {
                    this.showDiv('LinkbookParrentLogin');
                } else {

                    Linkbook.init_after_login(<?php
    if (empty($product))
        echo 'false';
    else
        echo 'true';
?>);
                }
            },
            showDiv: function(divId) {
                var d = document.getElementById(divId);
                if (d) {
                    hideAllDivs();
                    d.style.display = document.getElementById("divemptylinkbook").style.display;
                }
            },
            actionSubmit: function(formID, e)
            {
                //alert(formID+'click');
                if (formID == 1)
                    Linkbook.outBound("login");
                if (formID == 2)
                    Linkbook.outBound("follow");
                e.preventDefault();
            },
            toggleItem: function(id) {
                var item = document.getElementById(id);
                if (item) {
                    var parent = item.parentNode;
                    parent.removeChild(item);
                }
            },
            hideDivs: function() {
                hideAllDivs();
            },
            //all the data that has been send from the server to the bookmarlet passed thru this method
            //inBound has 2 parameters, because we need to know the action and the result value
            inBound: function(action, data)
            {

                try {
                    //console.log(data);
                    if (parseInt(data.code) < 0) {
                        //system error
                        alert('Internal error!');
                        return;
                    }
                    switch (action)
                    {
                        case 'login':
                            //console.log('data code: '+data.code);
                            if (data.code != 0) {
                                // show error
                                document.getElementById('LinkbookLoginError').innerHTML = data.message;
                            } else {
                                //console.log(data.login.json_order);
                                //repopulating plugin collection after login action;
                                //LinkbookPluginCollection.cleanup();//cleanup needed
                                //LinkbookPluginCollection.order = data.login.json_order;//repopulation
                                //LinkbookPluginCollection.run();
                                //console.log('new data'+data.login.product);
                                //this.showDiv('LinkbookParrentForm');
                                //console.log(data.login.product.product_name && data.login.product.product_name.length>0);
                                Linkbook.init_after_login(data.login.product.product_name && data.login.product.product_name.length > 0);
                            }
                            break;
                        case 'logout':
                            hideAllDivs();
                            this.showDiv('LinkbookParrentLogin');
                            break;
                        case 'bookmarklet':
                            alert('Bookmarklet error');
                            break;
                        case 'follow':
                            if (data.code != 0)
                            {
                                document.getElementById('form_error_Linkbook').innerHTML = data.message;
                            }
                            else
                            {
                                this.showDiv('LinkbookParrentSuccess');
                            }
                            break;
                        default:
                            alert('Unknown inBound action: ' + action);
                            break;
                    }
                } catch (err) {
                    if (consoleLog) {
                        //console.log(err.toString());
                    }
                    alert('Something went wrong, server returned invalid message!');
                }
            }, //end f inBound()
            //method used to transfer the data from the bookmarklet to the server
            //outBound needs to know only the action, the parameters will be contructed, ex. : ?action=x&...
            outBound: function(action)
            {
                try {
                    switch (action)
                    {//start switch
                        case 'logout':
                            createElementScript(apiURL + '/MakeLogout');
                            break;
                        case 'login':
                            if (document.getElementById("form_remember").value == 'on')
                                form_remember_Linkbook = 1;
                            else
                                form_remember_Linkbook = 0;
                            createElementScript(apiURL + '/MakeLogin/email/' + document.getElementById("form_email").value + '/password/' + document.getElementById("form_password").value + '/remember/' + form_remember_Linkbook + '?url=' + encodeURIComponent(location.href));
                            break;
                        case 'follow':
                            if (true)
                            {
                                //document.getElementById('form_error_Linkbook').innerHTML = '';
                                var s = JSON.stringify({'url': location.href,
                                    'title': document.getElementById('linkbook_article_title').value,
                                    'description': document.getElementById('linkbook_article_textarea').value
                                });
                                if (s.length >= 2000) {
                                    alert('Payload length is over 2000, action may fail.');
                                }
                                createElementScript(apiURL + "/FollowProduct?input=" + encodeURIComponent(s));
                            } else {
                                // put error message on screen
                                document.getElementById('form_error_Linkbook').innerHTML = 'error';
                            }
                            break;
                        case 'report_broken_url':
                            this.showDiv('LinkbookParrentBroken');
                            //var s = JSON.stringify(LinkbookPluginCollection);
                            if (s.length >= 2000) {
                                alert('Payload length is over 2000, action may fail.');
                            }
                            createElementScript(apiURL + "/ReportBrokenUrl?input=" + encodeURIComponent(s));
                            break;
                        default:
                            alert('Unknown outBound action: ' + action);
                            break;
                    }//end switch
                }
                catch (err) {
                    if (consoleLog) {
                        //console.log(err.toString());
                    }
                    alert('Something went wrong, couldn\'t prepare data!');
                }

            }//end f outBound()
        }
        return f;
    }();
    var Linkbook = new LinkbookClass();
    Linkbook.init(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T04:01:59.310

您是否在服务器上设置了 CORS 权限？

[http://en.wikipedia.org/wiki/Cross-origin_resource_sharing](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)

[http://enable-cors.org/](http://enable-cors.org/)

如果没有，您的 AJAX 将由于同源策略而失败。

[http://en.wikipedia.org/wiki/Same_origin_policy](http://en.wikipedia.org/wiki/Same_origin_policy)*

# asp.net - jquery.mobile, asp.net, native anchor handling

> ID：16089575
> 
> 赞同：1
> 
> 时间：2013-04-18T17:34:02.160
> 
> 标签：asp.net, ipad, jquery-mobile, windows-phone-8

I have an application that I am developing with jquery.mobile (1.3.1) over asp.net 4.5.

The first page consists of a list, the selection of an item in that list leads to another page. I have developed the pages separately.

When I click one of the items in the list, the second page is shown correctly but the URL is incorrect. I believe this is because jquery.mobile is intercepting the link click and handling the page transition itself - I do not want this and would prefer the link to behave naturally.

*   The URL to the page in question: `http://myhost/mobile`
*   The URL I am linking to: `http://myhost/mobile/NewClient.aspx`
*   The URL shown: `http://myhost/mobile/#/myhost/mobile/NewClient.aspx?ClientID...`

The page list code:

```
 <div data-role="page" id="logon" data-theme="c">
    <div data-role="header" data-position="fixed">
      <h1>Select location</h1>
    </div>
    <div data-role="content">
      <asp:ListView ID="LocationList" runat="server"
        ItemType="AGP.BackOffice.Model.ClientSource"
        DataKeyNames="ID" SelectMethod="LocationList_SelectMethod"
        OnItemDataBound="LocationList_ItemDataBound">
        <LayoutTemplate>
          <ul data-role="listview" data-inset="false" data-divider-theme="b">
            <asp:PlaceHolder ID="itemPlaceholder" runat="server" />
          </ul>
        </LayoutTemplate>
        <ItemTemplate>
          <li data-theme="c">
            <asp:HyperLink ID="HyperLink" runat="server" NavigateUrl="~/Mobile/NewClient.aspx?ClientSourceID={0}&IsMinimalDataCapture={1}"
                            data-transition="slide" Text="<%#: Item.Description %>" />
          </li>
        </ItemTemplate>
      </asp:ListView>
    </div>
  </div> 
```

I have found various articles claiming that the built in page handling in jquery.mobile can be turned off as follows...

```
 <script type="text/javascript">
    $(document).bind("mobileinit", function () {
      $.mobile.ajaxEnabled = false;
      $.mobile.linkBindingEnabled = false;
    });
  </script> 
```

I have added this before the data-role="page" div, however it makes no difference.

Can anybody shed any light on this? I just want the links to be handled as they are by the browser whilst still taking advantage of the jquery.mobile UI elements.

I should also point out that this behaviour is only seen on mobile devices (tested on WP8 & iPad). On the desktop, the URL seems to be fine.

Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T18:43:52.433

发现这个：[JQuery Mobile Links with MVC](https://stackoverflow.com/questions/8247370/jquery-mobile-links-with-mvc)

删除我的 JavaScript 并添加`rel="external"`到每个锚标记。它们现在按需要运行。

仍然有兴趣知道是否有更好的方法来解决这个问题。

# signals - Anyway to pass parameters to a method called when a Gtkmm button is pressed?

> ID：16089576
> 
> 赞同：1
> 
> 时间：2013-04-18T17:34:07.337
> 
> 标签：signals, gtkmm, click

I'm working on a gtkmm program and I would like to have a button that, when pressed, changes a given variable. For intensive purposes lets say I can't make this variable global. Is it still possible to call something like:

```
m_button2.signal_clicked().connect(sigc::ptr_fun(&on_player_button_clicked)); 
```

where on_player_button_clicked is the method that's called when button2 is pressed, but also pass it a parameter. So I want my button, when pressed, to call my method like this:

```
int parameter
m_button2.signal_clicked().connect(sigc::ptr_fun(&on_player_button_clicked(parameter))); 
```

If this is not possible, is there any way for me to get my button to change this variable without making the variable global?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-30T08:20:44.560

在设计方面，至少是OO设计，首先决定谁拥有变量。

然后，想法是向该所有者发送一条消息，“所有者先生，我命令您更改变量”。您可以通过发出“variable_needs_change”信号并让所有者收听它来做到这一点，或者给所有者一个设置器方法并让按钮使用它（通过让回调函数访问所有者的引用）。

但抛开它，有一个简单的绑定选项。这是简单明了的解决方案：使用 sigc::bind 添加参数。如果我没记错的话，在 gtkmm 书中有一个例子（也可能在 sigc++ 教程中）。

# sql - pulling data value that has apostrophe but your input does not?

> ID：16089578
> 
> 赞同：0
> 
> 时间：2013-04-18T17:34:13.910
> 
> 标签：sql, sql-server, sql-server-2008

I have a table with a column name title however the data has apostrophe in it.
My query input parameter removes all apostrophe from it, how would you compare like or equal to get that row back?

```
select * from authors..atricles where title = 'buyers'
buyer's = 'buyers' or like '%buyers%' 
```

If a user inputs buyer's on the page it will remove `'` and the new input string will be buyers.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T17:58:13.360

为了逃避它，你添加另一个单引号：

```
WHERE title LIKE '%buyer''s%' 
```

既然您提到您的查询输入参数删除了所有撇号，那么您将使用搜索`REPLACE`：

```
WHERE REPLACE(title, '''', '') = 'buyers' 
```

以这种方式使用函数将使任何可能的索引无用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T18:10:28.147

我认为这应该有效：

```
SELECT * FROM authors WHERE title LIKE'%buyer%' 
```

# msbuild - How to clear (and possibly include other) items from an ItemGroup?

> ID：16089582
> 
> 赞同：2
> 
> 时间：2013-04-18T17:34:20.053
> 
> 标签：msbuild, itemgroup

In my build process, I'm always using a pattern, whereby somes tasks are designed to *compute* the list of items in an item group, and some other tasks *create* the physical corresponding items.

This allows me to minimize my build times by performing incremental build.

In one of our project, I need to manipulate the items in an `ItemGroup`. My first attempt, was to first, clear the contents of the `ItemGroup` and then, include only the ones I'm interested about back into the `ItemGroup`.

However, I stumbled upon a behavior of MSBuild that does not make sense to me. The issue, is trying to [clear items from](http://msdn.microsoft.com/en-us/library/bb651786%28v=vs.90%29.aspx) an `ItemGroup` only when a particular `Target` executes. That is, only if, after analysing its `Inputs` and `Outputs` attributes, MSBuild determines that the `Target` must be executed.

Here is a minimal code snippet that reproduce my problem:

```
 <Target Name="ComputeCustomItemGroup">
    <CreateItem Include="C:\Temp\fichier1.ext;C:\Temp\fichier2.ext;">
      <Output TaskParameter="Include" ItemName="CustomItemGroup" />
    </CreateItem>
  </Target>

  <Target Name="CreateCustomItemGroup" DependsOnTargets="ComputeCustomItemGroup"
          Inputs="C:\Temp\input"
          Outputs="C:\Temp\output">
    <Message Text="Creating custom item group..." />
    <!-- Would like the ability to clear item group *ONLY* when the target is executed -->
    <!-- But this clears the item group every time it appears in the dependency chain of a currently executing target ! -->
    <ItemGroup>
      <CustomItemGroup Remove="@(CustomItemGroup)" />
    </ItemGroup>
  </Target>

  <Target Name="CustomTarget" DependsOnTargets="CreateCustomItemGroup">
    <Message Text="Executing Custom Target..." />
    <!-- Here, @(CustomItemGroup) is always empty... -->
    <Message Text="CustomItemGroup: @(CustomItemGroup)" />
  </Target>

  <Target Name="Build" DependsOnTargets="CustomTarget" />

</Project> 
```

In the code sample above, the `@(CustomItemGroup)` is initially set to a collection containing a couple of file paths. That's fine.

Now, if you create two files, at the following locations C:\Temp\input and C:\Temp\output (one after the other, obviously), then the result of the sample code above is that `@(CustomItemGroup)` comes back empty, even though the `Target Name="CreateCustomItemGroup"` is not executed.

I've tried using the legacy `CreateItem` way to manipulate `ItemGroup`s but I could not find a safisfying answer.

Can anyone suggest a workaround?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T05:14:03.033

您正面临此处描述的“输出推断” [http://msdn.microsoft.com/en-us/library/vstudio/ee264087%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/vstudio/ee264087%28v=vs.100%29.aspx)

> 目标没有过时的输出并被跳过。MSBuild 评估目标并对项目和属性进行更改，就像目标已运行一样。

考虑重新设计逻辑以使用条件语句进行赋值。

# javascript - 如何映射视图和视图模型 SPA

> ID：16089585
> 
> 赞同：1
> 
> 时间：2013-04-18T17:34:22.303
> 
> 标签：javascript, mvvm, durandal

我正在学习有关pluralsight的单页应用程序的课程。 [http://www.pluralsight.com/training/Courses/TableOfContents/single-page-apps-jumpstart](http://www.pluralsight.com/training/Courses/TableOfContents/single-page-apps-jumpstart)

如果您在课程中看到示例解决方案，您会发现有两个视图和两个视图模型。基于此示例，我需要做的是添加树视图控件和页面顶部（使用剑道 ui 树视图和对话框 jquery ui 控件）。现在的问题是：如何将此树视图控件添加为我的单页应用程序中的新视图？

```
function boot() {
        router.mapNav('home');
        router.mapNav('details');
        log('AquaVet Loaded!', null, true);
        return router.activate('home');
    } 
```

在应用程序的 shell 类中，您可以看到视图/视图模型已映射。

然后在导航视图中使用这些：

```
 <div class="btn-group" data-bind="foreach: router.visibleRoutes">
        <a data-bind="css: { active: isActive }, attr: { href: hash }, text: name" 
            class="btn btn-info" href="#"></a>
    </div> 
```

我想添加一个不应该在导航菜单中的新视图怎么样。我如何区分导航菜单中的视图和其他地方的视图位置（如树视图）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T19:33:01.840

在课程中，您将看到主菜单中没有导航视图。nav 视图是一个纯 html 视图，它被组合到 shell 视图中。我的观点是，您可以使用 Durandal 的 compose 绑定将视图嵌入到任何您想要的位置。

# android - android sqlite save and retrieve utc and convert to local

> ID：16089586
> 
> 赞同：0
> 
> 时间：2013-04-18T17:34:23.897
> 
> 标签：android, sqlite, utc

Could anyone please help figure out this issue:

In my SQLite database I have a `TEXT` field `startDateTimeUTCString`, which is for storing a UTC datetime string.

I have an object called "task" which has a `Date` property called `startDateTimeLocal`. I want to convert the value of `startDateTimeUTCString` (retrieved from database) into `Date` type and then convert it to local timezone value, and store it into `task.startDateTimeLocal`. I pass this `Date` value around my activity for processing.

After processing I want to convert the updated `task.startDateTimeLocal` to UTC time first, then convert into a string value, then save the string value into database field `startDateTimeUTCString`.

I have read through and tried so many implementation of using `SimpleDateFormat` and `DateFormat`, kept getting parse errors all the way.

Any help will be greatly appreciated.

Thanks in advance!

The property in SQLite is "startDateTimeUTC TEXT NOT NULL DEFAULT" The corresponding property in my object is "Date startDateTimeUTC": // getting StartDateTimeUTC public Date getStartDateTimeUTC(){ return this._startDateTimeUTC; }

```
// setting StartDateTimeUTC
public void setStartDateTimeUTC(Date startDateTimeUTC){
    this._startDateTimeUTC = startDateTimeUTC;
} 
```

On my AddNewItemActivity, I have a set of static integers: startYear, startMonth, startDay, startHour, startMinute, and a static Calendar startDateCalendar which represents the local timezone datetime value. I use a DatePickerDialogFragment and a TimePickerDiaglogFragment to set their values and set startDateCalendar to take these integer values:

```
startDateCalendar.set(startYear, startMonth, startDay);
startDateCalendar.set(Calendar.HOUR_OF_DAY, startHour);
startDateCalendar.set(Calendar.MINUTE, startMinute); 
```

I then convert startDateCalendar into a UTC string and insert into SQLite database:

```
SimpleDateFormat sdf = new SimpleDateFormat();
sdf.setTimeZone(TimeZone.getTimeZone("UTC"));
String utcString = sdf.format(sourceCalendar.getTime());

ContentValues contentValues = new ContentValues();
      .....
ContentValues contentValues = new ContentValues();
contentValues.put("startDateTimeUTC", utcString );
db.insert("Task", null, contentValues); 
```

In my DAO code GetAll() method I convert the value from String into Date type:

```
String startDateTimeUTCString = cursor.getString(5);
SimpleDateFormat utcFormat = new SimpleDateFormat();    
Date startDateTimeUTC = utcFormat.parse(startDateTimeUTCString , new ParsePosition(0)); 
```

In my list view adapter I convert the UTC datetime value into local timezone string and display it int he list:

```
SimpleDateFormat sdf = new SimpleDateFormat();
sdf.setTimeZone(TimeZone.getDefault());
String localString= sdf.format(startDateTimeUTC); 
```

I tried various formats when declaring SimpleDateFormat no luck at all...

now I took out all the formats in the declaration codes, all server errors were gone. However I found out that the the conversion from local to UTC failed during insert, i.e. the string saved into SQLite database is not UAT......

=================================

I figured out how to convert local datetime to utc string for saving to SQLite:

```
sourceCalendar.setTimeZone(TimeZone.getTimeZone("UTC"));
SimpleDateFormat sdf = new SimpleDateFormat();
sdf.setTimeZone(TimeZone.getTimeZone("UTC"));
String outputDateString = sdf.format(sourceCalendar.getTime()); 
```

Now I am stuck on converting UTC date to local string for display purpose.....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-09T18:03:51.863

这将为您提供 Android 的 UTC 系统时间毫秒。

```
Calendar c = Calendar.getInstance();
int utcOffset = c.get(Calendar.ZONE_OFFSET) + c.get(Calendar.DST_OFFSET);  
Long utcMilliseconds = c.getTimeInMillis() + utcOffset; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T16:51:34.100

我不确定这是否是 Date 的工作方式，一旦我将字符串转换为 Date ，无论我将 SimpleDateFormat 设置为哪个时区，它都会在本地 TimeZone 中显示值。我需要担心的是在提交到数据库时将日期转换为 UTC 字符串。我不确定这对面临同样问题的其他人是否有帮助，目前我认为问题已解决。

# vba - Is it possible to automate the Compare Presentations feature of PowerPoint 2010?

> ID：16089591
> 
> 赞同：3
> 
> 时间：2013-04-18T17:34:46.480
> 
> 标签：vba, vsto, powerpoint, office-automation, powerpoint-2010

Is it possible, either through VBA or interop / VSTO, to automate the "compare presentations" feature of PowerPoint 2010? Simply invoking it would be a start, though ideally I'd like a bit more control - and in the perfect world be able to programmatically retrieve the results.

PowerPoint 2010 lacks the macro recorder, and thus it's not possible to use the old trick of recording a macro, executing the operation manually, and then looking at the generated code. PowerPoint 2007 has the macro recorder, but doesn't support the compare presentations feature.

I think the answer to this question is probably "no", but I'd be delighted to be proved wrong...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T18:13:47.140

要调用它：

```
Application.CommandBars.ExecuteMso ("ReviewCompareAndMerge") 
```

您可以通过转到功能区自定义对话框找到要使用的其他命令的名称，找到您要使用的命令，然后将光标悬停在它上面。出现的工具提示将向您展示要使用的神奇文本（括号中是最后一部分）。

啊。或者：

```
ActivePresentation.Merge "c:\temp\test.pptx" 
```

# python - How to replace string multiple times?

> ID：16089593
> 
> 赞同：0
> 
> 时间：2013-04-18T17:34:48.517
> 
> 标签：python, regex

I have a 10 000 lines source code with tons of duplication. So I read in the file as text.

Example:

```
 assert PyArray_TYPE(real0) == np.NPY_DOUBLE, "real0 is not double"
    assert real0.ndim == 1, "real0 has wrong dimensions"
    if not (PyArray_FLAGS(real0) & np.NPY_C_CONTIGUOUS):
        real0 = PyArray_GETCONTIGUOUS(real0)
    real0_data = <double*>real0.data 
```

I want to replace all occurances of this pattern with

```
 real0_data = _get_data(real0, "real0") 
```

where real0 can be any variable name [a-z0-9]+

* * *

So don't get confused by the source code. The code doesn't matter, this is text processing and regex.

This is what I have so far:

```
    PATH = "func.pyx"
    source_string = open(PATH,"r").read()

    pattern = r"""
    assert PyArray_TYPE\(([a-z0-9]+)\) == np.NPY_DOUBLE, "([a-z0-9]+) is not double"
    assert ([a-z0-9]+).ndim == 1, "([a-z0-9]+) has wrong dimensions"
    if not (PyArray_FLAGS(([a-z0-9]+)) & np.NPY_C_CONTIGUOUS):
       ([a-z0-9]+) = PyArray_GETCONTIGUOUS(([a-z0-9]+))
    ([a-z0-9]+)_data = ([a-z0-9]+).data"""

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T18:08:36.350

您可以在任何支持多行正则表达式搜索和替换的文本编辑器中执行此操作。

我使用[Komodo IDE](http://www.activestate.com/komodo-ide)来测试它，因为它包含一个优秀的正则表达式测试器（“Rx Toolkit”），用于试验正则表达式。我想也有一些像这样的在线工具。相同的正则表达式适用于免费的[Komodo Edit](http://www.activestate.com/komodo-edit)。它也应该在支持 Perl 兼容的正则表达式的大多数其他编辑器中工作。

在 Komodo 中，我使用选中了 Regex 选项的替换对话框来查找：

```
assert PyArray_TYPE\((\w+)\) == np\.NPY_DOUBLE, "\1 is not double"\s*\n\s*assert \1\.ndim == 1, "\1 has wrong dimensions"\s*\n\s*if not \(PyArray_FLAGS\(\1\) & np\.NPY_C_CONTIGUOUS\):\s*\n\s*\1 = PyArray_GETCONTIGUOUS\(\1\)\s*\n\s*\1_data = <double\*>\1\.data 
```

并将其替换为：

```
\1_data = _get_data(\1, "\1") 
```

鉴于此测试代码：

```
 assert PyArray_TYPE(real0) == np.NPY_DOUBLE, "real0 is not double"
    assert real0.ndim == 1, "real0 has wrong dimensions"
    if not (PyArray_FLAGS(real0) & np.NPY_C_CONTIGUOUS):
        real0 = PyArray_GETCONTIGUOUS(real0)
    real0_data = <double*>real0.data

    assert PyArray_TYPE(real1) == np.NPY_DOUBLE, "real1 is not double"
    assert real1.ndim == 1, "real1 has wrong dimensions"
    if not (PyArray_FLAGS(real1) & np.NPY_C_CONTIGUOUS):
        real1 = PyArray_GETCONTIGUOUS(real1)
    real1_data = <double*>real1.data

    assert PyArray_TYPE(real2) == np.NPY_DOUBLE, "real2 is not double"
    assert real2.ndim == 1, "real2 has wrong dimensions"
    if not (PyArray_FLAGS(real2) & np.NPY_C_CONTIGUOUS):
        real2 = PyArray_GETCONTIGUOUS(real2)
    real2_data = <double*>real2.data 
```

结果是：

```
 real0_data = _get_data(real0, "real0")

    real1_data = _get_data(real1, "real1")

    real2_data = _get_data(real2, "real2") 
```

那么我是如何从您的原始代码中获得该正则表达式的呢？

1.  `(`为、`)`、`.`和`*`with的所有实例添加前缀`\`以转义它们（简单的手动搜索和替换）。
2.  用替换第*一个*实例。这匹配并捕获一串字母数字字符。`real0``(\w+)`
3.  `real0`用替换剩余的实例`\1`。这与 捕获的文本相匹配`(\w+)`。
4.  用 .替换每个换行符和下一行的前导空格`\s*\n\s*`。这匹配行上的任何尾随空格，加上换行符，再加上下一行的所有前导空格。这样，无论匹配的代码的嵌套级别如何，正则表达式都可以工作。

最后，“替换”文本`\1`在需要原始捕获文本的地方使用。

如果你想这样做，你当然可以在 Python 中使用类似的正则表达式。我建议使用`\w`而不是`[a-z0-9]`仅仅为了让它更简单。另外，不要包含换行符和前导空格；而是使用`\s*\n\s*`我使用的方法而不是多行字符串。这样它将独立于我上面提到的嵌套级别。

# php - Wordpress Custom Field Template plugin

> ID：16089600
> 
> 赞同：1
> 
> 时间：2013-04-18T17:34:57.800
> 
> 标签：php, wordpress

i wanted to use custom field below wordpress post. i followed this tutorials [http://idratherbewriting.com/2010/09/11/wordpress-tip-adding-custom-fields-in-posts/](http://idratherbewriting.com/2010/09/11/wordpress-tip-adding-custom-fields-in-posts/) but i am facing some problem to doing this. when i put the code on function.php file it show error. have a look please [https://dl.dropboxusercontent.com/u/55782889/wordpress.PNG](https://dl.dropboxusercontent.com/u/55782889/wordpress.PNG)

Thanks Rasel

# exception-handling - If/Else, Try/Catch For Each Or Try/Catch Over Entire If?

> ID：16089607
> 
> 赞同：0
> 
> 时间：2013-04-18T17:35:20.897
> 
> 标签：exception-handling, try-catch

Here's some example of some code...

```
Private Sub btnDoSomething_Click(sender As System.Object, e As System.EventArgs) Handles btnDoSomething.Click
        If True Then
            Try

            Catch ex As Exception

            End Try                
        Else
            Try

            Catch ex As Exception

            End Try  
        End If
End Sub 
```

Are there any differences to adding a Try/Catch on true and false or just to wrap entire If within one Try/Catch?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T17:39:01.183

一般而言，肯定存在差异，但问题是您的情况是否存在差异。

只有当你打算对它做些什么时，你才应该捕获一个异常。如果您的 if/else 在引发异常的情况下需要不同的操作，那么您应该将 try/catch 放入其中。否则 - 在外面。在这两种情况下——只有当你要对它们做任何事情时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T17:39:50.763

是的，这完全取决于如何处理每个范围内的代码。请记住，您可以在每个部分中使用完全不同的代码，有时您可能希望根据是否满足条件以不同方式处理相同的异常类型。

如果您只想要通用异常处理（错误记录等），那么您应该将所有内容放在 try catch 中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T17:43:14.287

那要看。如果 If 部分中的异常处理需要与 Else 部分中的不同，则将 try catch 放在每个部分中。否则包围它。

循环也是如此。异常是否意味着您需要停止循环？然后你可以包围它。如果循环内部发生异常，您需要继续吗？然后将 try catch 放入循环中。即使您不需要继续前进，您也可以在循环内执行此操作。

这个问题太笼统了。这取决于你想做什么。

# node.js - What causes SocketException (9001) handling request in node.js app and MongoDB ReplicaSet?

> ID：16089609
> 
> 赞同：2
> 
> 时间：2013-04-18T17:35:27.567
> 
> 标签：node.js, mongodb

I have a simple node.js application that makes a single call connection call to my ReplicaSet. Things were actually working fine earlier today and nothing was changed in the application, now my connection is failing (silently) and I'm seeing the following in my mongod logs.

```
Thu Apr 18 17:16:56 [conn1782026] end connection 10.x.x.x:50720 (40 connections now open)
Thu Apr 18 17:16:57 [initandlisten] connection accepted from 10.x.x.x:50721 #1782027 (41 connections now open)
Thu Apr 18 17:16:57 [initandlisten] connection accepted from 10.x.x.x:50722 #1782028 (42 connections now open)
Thu Apr 18 17:16:57 [initandlisten] connection accepted from 10.x.x.x:50723 #1782029 (43 connections now open)
Thu Apr 18 17:16:57 [initandlisten] connection accepted from 10.x.x.x:50724 #1782030 (44 connections now open)
Thu Apr 18 17:16:57 [initandlisten] connection accepted from 10.x.x.x:50725 #1782031 (45 connections now open)
Thu Apr 18 17:16:57 [initandlisten] connection accepted from 10.x.x.x:50736 #1782032 (46 connections now open)
[conn1782028] SocketException handling request, closing client connection: 9001 socket exception [2] server [10.x.x.x:50722] 
```

I haven't been able to track down what causes this or how to fix it.

Here's my connection code:

```
var _ = require("underscore");
var db_options = {
    db:{
            w:1,
            native_parser: false
        },
    server:{
        auto_reconnect:true,
        socketOptions: {}
    },
    replSet:{
        rs_name: "my_replset_name",
        readPreference: "secondary"
    },
    mongos: {}
};
db.client.connect("mongodb://server1:27017,server2:27017,server3:27017/my_database", db_options, function(err, _db){
    if(err){
        console.log(err);
    }else{
        _db.collection("my_collection", function(err, collection){
            collection.find({q:1}).toArray(function(err,item){
                if(err){
                    console.log(err);
                }else{
                    _.each(item, function(r){
                        if(!_.isEmpty(r)){
                            // do something with this item!
                            console.log(r._id);
                        }
                    });
                    console.log("Finished.");
                }
            });
        });
    }
}); 
```

I'm running my ReplicaSet on EC2 and everything can successfully connect to each otherhave a simple node.js application that makes a single call connection call to my ReplicaSet - like I said, this worked and then stopped working without notice.

Does anyone have any insights into this? What causes it? How to prevent it? How to fix it?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-04T15:51:53.953

如果您的操作系统是**rhel5.x**，则默认系统参数
`net.ipv4.tcp_mem=196608 262144 393216`
将其更改为：
`net.ipv4.tcp_mem=786432 1048576 1572864`

4k(perpage) * 1572864(page)=6G（最大tcp内存），默认1.5G

# android - scatter plot with dates at x axis -- add custom labels on X axis

> ID：16089610
> 
> 赞同：0
> 
> 时间：2013-04-18T17:35:27.777
> 
> 标签：android, achartengine

I want to have a scatter plot with dates in x-axis.

Because if I use `ChartFactory.getTimeChartView` I receive a line graph and the problem is:

I make plot with current date as x axis and data (user input) as y axis.I store these data (date and user data) in Lists and also in a file.

The user may enter multiple times data during a day.And some of the data may be the same,so if I use a Linegraph the plot messes up.That's why I need scatter.

1)How can I do this?

2) Also, can someone point me to an example of adding custom labels on the X axis,in order to use a Linegraph?

----------------------UPDATE--------------------------------

I am trying to do this right now (**i would like to know if it could be done as my questions above though**)

I store dates as List String :

```
List<String> dates_asString=new ArrayList<String>(); 
```

I save them:

```
SimpleDateFormat thedate = new SimpleDateFormat("dd/MM/yyyy"); 
        Date d=new Date();
String formattedDate=thedate.format(d);
        dates_asString.add(formattedDate);

 BufferedWriter bw = new BufferedWriter(new OutputStreamWriter(fos));
              for (int i=0;i<mydata.size();i++){
                    bw.write(mydata.get(i)+","+dates_asString.get(i)+"\n");//+"\n"); 
```

In LineGraph:

```
private static List<String> dates_asString = new ArrayList<String>();
    private static List<Double> data = new ArrayList<Double>();
    private static List<Date> dates_asDates = new ArrayList<Date>();

loadfunc();    

//trying to copy the dates_asString to dates_asDates in order to use them in TimeSeries

 SimpleDateFormat formatter = new SimpleDateFormat("dd/MM/yyyy");
        Date convertedDate=new Date();
        try{
       for (int k=0;k<dates_asString.size();k++){
        convertedDate = formatter.parse(dates_asString.get(k));
        date_asDates.add(convertedDate);
       }
        }catch (ParseException e){

            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        TimeSeries series = new TimeSeries("Showing data");
        for (int i=0;i<date_asDates.size();i++){    

            series.add(date_asDates.get(i),data.get(i));    
        }

mRenderer.setXLabels(0);
        for (int i=0;i<dates_asString.size();i++){
            mRenderer.addXTextLabel(i,dates_asString.get(i));

        }

public void loadfunc(){

    SimpleDateFormat thedate = new SimpleDateFormat("dd/MM/yyyy"); 
    Date d=new Date();

    String formattedDate=thedate.format(d);

BufferedReader br = new BufferedReader(new InputStreamReader(fis));
            ....
                     data.add(Double.parseDouble(splitLine[0]));
                    dates_asString.add(formattedDate); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T03:43:06.973

正如[Dan 在他的回答中](https://stackoverflow.com/a/16094864/1752560)所说，您可以使用它`renderer.addXTextLabel(x, "text");`来设置 x 轴标签。

在你的情况下:: 你在注释行犯了错误，你试图添加 x 轴标签两次..

如下图所示进行更改

```
 TimeSeries series = new TimeSeries("Showing data");
    for (int i=0;i<date_asDates.size();i++){    

        series.add(i,data.get(i));    // only this change ll work as u needed
    } 
```

**更新：**将您的代码更改为跟随它不会在添加新数据时崩溃

如果您只希望点与点不成直线可见，则将其更改`ChartFactory.getLineChartIntent(getBaseContext(), dataset, mRenderer,"dd/MM/yyyy");`为`ChartFactory.getScatterChartIntent(getBaseContext(), dataset, mRenderer,"dd/MM/yyyy");`

**MainActivity.java**

```
package com.example.trying;
import java.io.BufferedWriter;
import java.io.File; // imports add all as before too

public class MainActivity extends Activity implements OnClickListener{

View savebtn;
View graphicsbtn;
EditText value,weight;
String filename = "mydata.csv";    
public static List<String> dates_Strings = new ArrayList<String>();
public static List<Double> data = new ArrayList<Double>();
public static List<Date> date = new ArrayList<Date>();

List<Double> mydata=new ArrayList<Double>();

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

     date.clear();
     data.clear();
     dates_Strings.clear();
     //Set up click listeners
    savebtn=(View) findViewById(R.id.savebtn);
    savebtn.setOnClickListener(this);
    graphicsbtn=(View) findViewById(R.id.graphicsbtn);
    graphicsbtn.setOnClickListener(this);

    value=(EditText) findViewById(R.id.enter_data);

}

//called when a button is clicked
public void onClick(View v) {
    switch (v.getId()){
    case R.id.savebtn:
        savefunc();      
        break;
    case R.id.graphicsbtn:        
        Intent i = new Intent(this,LineGraph.class);        
        startActivity(i);
        break;

}
}

public void savefunc(){

    SimpleDateFormat thedate = new SimpleDateFormat("dd/MM/yyyy"); 
    Date d=new Date();

    String formattedDate=thedate.format(d);
    Log.d("tag","format"+formattedDate);
    dates_Strings.add(formattedDate);

    try{
        double thedata=Double.parseDouble(value.getText().toString().trim());
        mydata.add(thedata);
        Log.d("tag","thedata :"+thedata);
    } catch (NumberFormatException e){
        String message="Sorry you did't type anything";

         Toast toast = Toast.makeText(getBaseContext(), message,Toast.LENGTH_SHORT);  
         toast.setGravity(Gravity.CENTER_HORIZONTAL | Gravity.BOTTOM, 0, 100);
         toast.show();
  // Toast.makeText(getBaseContext(), "Sorry you did't type anything",    Toast.LENGTH_SHORT).show();

    }

    File sdCard = Environment.getExternalStorageDirectory();
    File directory = new File (sdCard, "MyFiles");
    directory.mkdirs();            
    File file = new File(directory, filename);

    FileOutputStream fos;

    //saving them
    try {
       fos = new FileOutputStream(file);

          BufferedWriter bw = new BufferedWriter(new OutputStreamWriter(fos));
          for (int i=0;i<mydata.size();i++){
                bw.write(mydata.get(i)+","+dates_Strings.get(i)+"\n");
          }
          value.setText("");
          bw.flush();
          bw.close();

        } catch (IOException e2) {
           e2.printStackTrace();
            }//catch
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.main, menu);
    return true;
}

} 
```

**线图.java**

```
package com.example.trying;

import java.io.BufferedReader;
import java.io.File; // add all other imports

public class LineGraph extends MainActivity {

String filename = "mydata.csv";    

private LinearLayout layout;
private GraphicalView mChartView;

protected void onCreate(Bundle savedInstanceState){

     super.onCreate(savedInstanceState);
     setContentView(R.layout.graph);
     layout = (LinearLayout) findViewById(R.id.chart);

    readfunc();       

    //trying to copy the dates_asString to date (Dates) in order to use them in TimeSeries
    SimpleDateFormat formatter = new SimpleDateFormat("dd/MM/yyyy");
    Date convertedDate;//=new Date();
    try{
   for (int k=0;k<dates_Strings.size();k++){
    convertedDate = formatter.parse(dates_Strings.get(k));
    date.add(convertedDate);
    Log.d("line","convertedDate :"+convertedDate);
   }
    }catch (ParseException e){

        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    TimeSeries series = new TimeSeries("Showing data");
    for (int i=0;i<dates_Strings.size();i++){   
        series.add(i,data.get(i));  //series.add(date.get(i),data.get(i));
    }

    XYMultipleSeriesDataset dataset=new XYMultipleSeriesDataset();
    dataset.addSeries(series);

    //renderer for decay
    XYSeriesRenderer renderer =new XYSeriesRenderer();
    renderer.setColor(Color.YELLOW);
    renderer.setLineWidth(3);
    renderer.setPointStyle(PointStyle.SQUARE);

    XYMultipleSeriesRenderer mRenderer =new XYMultipleSeriesRenderer();
    mRenderer.addSeriesRenderer(renderer);
    mRenderer.setXTitle("Date");
    mRenderer.setYTitle("Data");
    mRenderer.setApplyBackgroundColor(true);
    mRenderer.setBackgroundColor(Color.BLACK);
    mRenderer.setMarginsColor(Color.BLACK);
    mRenderer.setXRoundedLabels(false);
    mRenderer.setShowCustomTextGrid(true);
    mRenderer.setXLabels(0);

    for (int i=0;i<date.size();i++){
        mRenderer.addXTextLabel(i,dates_Strings.get(i));

    }

     //mChartView = ChartFactory.getTimeChartView(this, dataset, mRenderer,"dd/MM/yyyy");

    //mChartView = ChartFactory.getScatterChartView(this, dataset, mRenderer);
    //layout.addView(mChartView);
    Intent intent= ChartFactory.getLineChartIntent(getBaseContext(), dataset, mRenderer,"dd/MM/yyyy");  
    startActivity(intent);

 }

public void readfunc(){

SimpleDateFormat thedate = new SimpleDateFormat("dd/MM/yyyy"); 
Date d=new Date();
String formattedDate=thedate.format(d);

    File sdCard = Environment.getExternalStorageDirectory();
    File directory = new File (sdCard, "MyFiles");
    File file = new File(directory, filename);

    String s;

    FileInputStream fis;

   try {
      fis = new FileInputStream(file);

         BufferedReader br = new BufferedReader(new InputStreamReader(fis));

         do {
             s = br.readLine();     
             if (s != null ){
                 String[] splitLine = s.split(",");
                 data.add(Double.parseDouble(splitLine[0]));
                 //dates_Strings.add(thedate.parse(splitLine[1]));
                 dates_Strings.add(formattedDate);
       }                        
             } while (s != null );
          br.close();                      
       } catch (IOException e) {
          e.printStackTrace();
           }
}

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T12:34:21.387

关于散点图类型：

也许您可以为 XYSeriesRenderer 设置适当的参数：

```
XYSeriesRenderer r = new XYSeriesRenderer();
r.setColor(Color.GREEN);//green point
r.setPointStyle(PointStyle.CIRCLE);//point in shape of circle
r.setFillPoints(true);//enable points
r.setLineWidth(0);//set line to 0 width - invisible
mRenderer.addSeriesRenderer(r); 
```

当你打电话给工厂时：

```
mChartView = ChartFactory.getTimeChartView(this, mDataset, mRenderer,"H:mm:ss"); 
```

我知道这不是干净和正确的方法，但我没有 android 来测试它或找出更多细节......

我没有测试它，所以请给我反馈:)。

希望它有帮助，托尼

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T23:37:06.710

您可以通过以下方式添加自定义标签：

```
renderer.addXTextLabel(x, "label"); 
```

如果您想继续使用时间表方法，那么您可以这样做：

```
lineRenderer.setPointStyle(style);
lineRenderer.setLineWidth(0); 
```

你`lineRenderer`的. _`XYSeriesRenderer``XYMultipleSeriesRenderer`

# data-structures - C# BSP Splitting Algorithm Logical or Calculation Error

> ID：16089611
> 
> 赞同：0
> 
> 时间：2013-04-18T17:35:29.123
> 
> 标签：data-structures, unity3d, binary-tree, game-engine, bsp

I need your advice.

Okay, so I am having a problem with this algorithm. I'm using the recursive method of adding to and maintaining the binary tree for this program, but when Split Once is done 3 times, the code breaks.

**For the sake of example,** lets say we're going to force the algorithm's methods to always perform vertical splits and only vertical splits, and thus it only calls the VertiSplit method I have. The method is as follows. I am doing this from memory, so there may be a thing or two wrong... I am going for the simplest way as possible for this.

```
public void VertiSplit(Node curNode) //The node that called the method is passed in.
{
 int vRatio = curNode.height / curNode.width;
 //if( vRatio <=2) // Commented out so it never does a Horizontal Split.
 //{
     //Calculate the Split Point Data for the Parent node that called the method.
     curNode.splitX = curNode.xCoor + (curNode.width / 2);
     curNode.splitY = curNode.yCoor;
     curNode.splitW = 1; // Is 1 because it is passed into the draw call for the line.
     curNode.splitH = curNode.height;
     // Calculate Data for Children...
     curNode.child1.xCoor = curNode.xCoor;
     curNode.child2.xCoor = curNode.splitX;
     curNode.child1.yCoor = curNode.yCoor;
     curNode.child2.yCoor = curNode.yCoor;
     curNode.child1.width = curNode.splitX;
     curNode.child2.width = curNode.splitX;
     curNode.child1.height = curNode.height;
     curNode.child2.height = curNode.height; //At this point, calculations and assignment of the children's variables is completed. So I'll stop writing the code here.. 
```

Assume that below this point is a Report method, a closing bracket, and an else statement for the false condition of the above if statement that calls the Horizontal Split (HoriSplit) method. Going through this logically. The calculations should go like this. The dungeon size is 512 x 512 square. Split X is the object of interest here.

1st iteration: Node ID: 0 Split X: 256

2nd iteration: Node ID: 1 Split X: 128 Node ID: 2 Split X: 384

3rd iteration: Node ID: 3 Split X: 64 Node ID: 4 Split X: 192 Node ID: 5 Split X: 320 Node ID: 6 Split X: 448

However, for iteration #3, I instead get this:

3rd iteration: Node ID: 3 Split X: 64 Node ID: 4 Split X: 192 Node ID: 5 Split X: 448 Node ID: 6 Split X: 448

The way the code is written, **it should *not*** be doing this. Yet why is it that Node #5 i broken, while the others are okay? I really don't know at this point, and I am at my wit's end about it. Could someone help me?

Also, there's another thing that isn't working. I am trying to convert a temp string variable into 32-bit integer for use with a method called SplitCreateAll that takes the value of numSplits (which is supposed to be an integer) which is assigned the value of temp, which is controlled by a textbox in the the GUI for Unity. For some reason, every time I try to have temp parsed so that numSplits can be assigned it's value, after changing it from 0 by typing in the textbox, an Error occurs where it says that temp is not in the correct format. Can someone tell me what went wrong there too?

EDIT:

```
public void GrowBranches(Node curNode)
{
  int randomval = randNum.Next();

  if(curNode.child1 != null)
     {
       findLeaves(curNode.child1);
       findLeaves(curNode.child2);
     }
  if(curNode.child1 == null)
    {
      curNode.child1 = new Node();
      curNode.child2 = new Node();
      curNode.child1.parent = curNode;
      curNode.child2.parent = curNode;
      curNode.child1.sister = curNode.child2;
      curNode.child2.sister = curNode.child1;
    }
    if(randomval % 2 == 0)
    {
     VertiSplit(curNode);
    }
    else
    {
      HoriSplit(curNode);
    } 
```

There is my GrowBranches method. This is where the Split Methods are called in the recursion chain. GrowBranches is also called by the methods SplitCreateOnce and SplitCreateAll, but the latter is non-functional due to the above stated reason involving the parsing error.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T03:14:15.517

如果我不得不猜测，我会说是这两行：

```
 curNode.child1.width = curNode.splitX;
 curNode.child2.width = curNode.splitX; 
```

查看 xCoord=256, width=256, splitX 为 386 (xCoord + 256/2) 的节点，但这不是子节点的宽度，宽度为 256/2。使用上面的代码，您将拥有一个 xCoord 386、宽度 386 的孩子。

至于关于文本错误的问题的第二部分，如果您使用的是 Unity 文本框，那么当您清除现有值以开始输入时，您最终可能会将一个空字符串传递给 Convert.ToInt32。只需使用 a`Try/Catch`并忽略错误。

# ios - How can I use a SQL database with my iOS app?

> ID：16089613
> 
> 赞同：1
> 
> 时间：2013-04-18T17:35:35.153
> 
> 标签：ios, sql, database, xcode

I currently have an iOS app that is a subscription based app. It is a Newsstand app. I need to be able to allow users who have a previous subscription to the print edition to have access to the iPad content. The newspaper has a list of thier subscribers.

Is it possible to write code to check against this list to see if a user already has paid for a subscription and if so where do I go to research this?

I need to be pointed in the right direction.

Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T18:03:47.150

如果你真的想要 SQLite，那么 fmdb 就是要使用的 goto 库。 [https://github.com/ccgus/fmdb](https://github.com/ccgus/fmdb)

fmdb 将大大简化设置与 sql 文件的连接和运行查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T18:21:39.423

我建议不要从任何移动设备直接调用数据库。相反，您应该使用您喜欢的任何技术（WCF、WebAPI 等）创建服务，通过匹配您存储在数据库中的详细信息来验证订阅。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T19:19:24.390

我有点不确定您的问题的一部分，您希望将数据放在哪里？本地或托管？

如果您有有问题的数据，并且只想远程验证用户，则应该正确开发某种类型的 Web 服务，该区域非常大

如果您不想托管它，您可以调查 windows azure，或者您可以将 tomcat 应用程序构建为 Web 服务，（连接到 sql 服务器）

如果你想快速而肮脏地做到这一点，我可以推荐一个 php 站点和 json 对象......但是我没有使用 iphone 和 ipad 的经验，所以我不知道它们与这种方法的兼容性如何

（如果我是你，我真的不想直接使用 sql，恐怕这个话题太大了，无法在这里解释）

# java - Having some trouble understanding JViewPorts

> ID：16089620
> 
> 赞同：1
> 
> 时间：2013-04-18T17:35:53.833
> 
> 标签：java, swing, viewport, jviewport

I have been trying to understand JViewports and tried to work with one. I have been using this gentleman's [class](http://enhanced-groovydoc.googlecode.com/svn-history/r2/trunk/enhanced-groovydoc/src/main/java/net/sf/sdedit/ui/components/GrabbableViewport.java), which just extends the JViewport class.

If I want to set the viewport in the middle of a 6480*4860 object implementing the JPanel Class, how come this code gives me a blank view, even if, upon debugging,I have confirmation that the class implementing JPanel I am using has been added to the view? Am I completely mixed up in my calls to the different methods or in my comprehension of the coordinates used and their meaning? And one more : Does calling

```
 v.setOpaque(true); 
```

set only the viewport opaque or it will set all its children too? I guess I will quickly know the answer to this one if I figure out how to properly use viewports.

```
public myProgram(){ 
    ...

    myCustomJPanel = new MyCustonJPanel();
    myCustomJPanel.setBackground(Color.WHITE);
    GrabbableViewport v = new GrabbableViewport();
    v.setViewSize(new Dimension(720,540));
    v.setViewPosition(new Point(720,540));
    v.setView(myCustomJPanel);
    v.setViewPosition(new Point(720,540));
    v.setLocation(43, 5);
    appropriateParentPanel.add(v);
} 
```

Here is the class I am trying to use. It takes much more space for this short question, but formatted text should please you more than plain text! If I am not mistaken, though, the problem should not come from here.

```
// Copyright (c) 2006 - 2008, Markus Strauch.
// All rights reserved.
// 
// Redistribution and use in source and binary forms, with or without
// modification, are permitted provided that the following conditions are met:
// 
// * Redistributions of source code must retain the above copyright notice, 
// this list of conditions and the following disclaimer.
// * Redistributions in binary form must reproduce the above copyright notice, 
// this list of conditions and the following disclaimer in the documentation 
// and/or other materials provided with the distribution.
// 
// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" 
// AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE 
// IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE 
// ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE 
// LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR 
// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF 
// SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS 
// INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN 
// CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) 
// ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF 
// THE POSSIBILITY OF SUCH DAMAGE.

package net.sf.sdedit.ui.components;

import java.awt.Component;
import java.awt.Cursor;
import java.awt.Image;
import java.awt.Point;
import java.awt.Rectangle;
import java.awt.Toolkit;
import java.awt.event.MouseEvent;

import javax.swing.ImageIcon;
import javax.swing.JComponent;
import javax.swing.JViewport;
import javax.swing.event.MouseInputListener;

/**
 * A <tt>GrabbableViewport</tt> is a <tt>JViewport</tt> that scrolls its
 * view when the mouse is dragged. While the mouse is being dragged, its cursor
 * is set to a &quot;grabbing hand&quot;, like in applications such as Acrobat
 * Reader.
 * 
 * @author Markus Strauch
 * 
 */
public class GrabbableViewport extends JViewport implements MouseInputListener {

    private static Cursor HAND = new Cursor(Cursor.MOVE_CURSOR);

    private static Cursor DFLT = new Cursor(Cursor.DEFAULT_CURSOR);

    public static void setHandCursorIcon(ImageIcon icon) {
        Image grabbingHand = icon.getImage();
        HAND = Toolkit.getDefaultToolkit().createCustomCursor(grabbingHand,
                new Point(0, 0), "hand cursor");
    }

    /**
     * Constructor.
     */
    public GrabbableViewport () {
        super ();
    }

    private Rectangle rect; 

    private Point point;    

    private JComponent view;    

    public void setView(Component view) {
        super.setView(view);
        if (this.view != view) {
            if (this.view != null) {
                this.view.removeMouseListener(this);
                this.view.removeMouseMotionListener(this);
            }
            if (view != null) {
                view.addMouseListener(this);
                view.addMouseMotionListener(this);
            }
            this.view = (JComponent) view;
        }
    }

    public void mouseClicked(MouseEvent e) {
    }

    public void mouseEntered(MouseEvent e) {
    }

    public void mouseExited(MouseEvent e) {
    }

    public void mousePressed(MouseEvent e) {
        view.setCursor(HAND);
        //((Component) e.getSource()).setCursor(HAND);
        rect = getViewRect();
        point = screenLocation(e);
    }

    private Point screenLocation(MouseEvent e) {
        Point root = view.getLocationOnScreen();
        Point mouse = e.getPoint();
        if (rect != null && !rect.contains(mouse)) {
            return null;
        }
        Point screenPoint = new Point(root.x + mouse.x, root.y + mouse.y);
        return screenPoint;
    }

    public void mouseReleased(MouseEvent e) {
        view.setCursor(DFLT);
        scrollTo(screenLocation(e));
        clear();
    }

    public void mouseDragged(MouseEvent e) {
        scrollTo(screenLocation(e));
    }

    public void mouseMoved(MouseEvent e) {
    }

    private void scrollTo(Point newPoint) {
        if (point != null && newPoint != null && rect != null) {
            int deltaX = point.x - newPoint.x;
            int deltaY = point.y - newPoint.y;
            rect.x = rect.x + deltaX;
            rect.y = rect.y + deltaY;
            ((JComponent) getView()).scrollRectToVisible(rect);
                point = newPoint;
        }
    }

            private void clear() {
                rect = null;
            point = null;
        }
    } 
```

I could give you a sscce but I think this should be simple enough, although I can piece together some example quickly if you ask.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T00:40:46.883

因为`GrabbableViewport extends JViewport`，我*猜*你应该在 a 中使用它，如此[处](https://stackoverflow.com/a/5630271/230513)`JScrollPane`所示。如果没有，该示例可能会帮助[您](http://sscce.org/)使用.`ScrollPanePaint.MyPanel`

```
myCustomJPanel = new MyCustonJPanel();
GrabbableViewport v = new GrabbableViewport();
v.setView(myCustomJPanel);
JScrollPane scrollPane = new JScrollPane();
scrollPane.setViewport(v);
enclosingContainer.add(scrollPane); 
```

另请参阅此相关[示例](https://stackoverflow.com/a/7203419/230513)，该示例利用现有`JScrollPane`操作。

使用`setOpaque(true)`是绘制每个像素的承诺，如此[处](http://www.oracle.com/technetwork/java/painting-140037.html#props)所述。

# c++ - Could not able to trace how Map is working in C++

> ID：16089624
> 
> 赞同：0
> 
> 时间：2013-04-18T17:36:00.467
> 
> 标签：c++, map

In this below code, instead of seeing output as

```
0 -> 1 2
1 -> 2 3
..
..
99 ->100 101 
```

I am getting output as,

```
0 -> 100 101
1 -> 100 101
...
99 -> 100 101 
```

Please help me how to resolve this problem, where exactly it is going wrong? While debugging I found, in first iteration it stores

```
0 -> 1 2 
```

2nd iteration it it updates like,

```
0 -> 2 3
1 -> 2 3 
```

Why?

```
class abc{
    public:
        int x, y;
};
std::map<int, abc*> MAP;
int main()
{
    abc *ab;
    ab = new abc();
    int i = 0;
    for(i = 0; i < 100; i++)
    {
        ab->x = i + 1;
        ab->y = i + 2;
        MAP.insert(std::pair<int, abc*>(i, ab));
    }
    map<int, abc*>::iterator it;
    for(it = MAP.begin(); it != MAP.end(); it++)
    {
        cout << it->first << "->" << it->second->x <<" "<< it->second->y << endl;
    }
    system("pause");
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-18T17:37:14.627

```
ab = new abc(); 
```

你只`abc`分配了一个。你不断地在循环中修改它并重新插入指向它的指针。所以`second`map 的所有值都指向同一个 single `abc`。

* * *

```
abc *ab;
// ab = new abc();

//
//
for(i = 0; i < 100; i++)
{

    ab = new abc();
    ^^^^^^^^^^^^^^
    ab->x = i + 1;
    ab->y = i + 2;
    MAP.insert(std::pair<int, abc*>(i, ab));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T17:39:19.447

您总是引用相同的地址：

```
abc *ab;
ab = new abc(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T17:40:54.957

```
abc *ab;
ab = new abc();
int i = 0;
for(i = 0; i < 100; i++)
{
    ab->x = i + 1;
    ab->y = i + 2;
    MAP.insert(std::pair<int, abc*>(i, ab));
} 
```

由于您将指向类对象的指针存储到映射中。如果您执行上述操作，则在您的 for 循环中，您会不断更改指向对象的值，而不是将新对象存储到 map 中。

尝试以下操作：

```
abc *ab;
int i = 0;
for(i = 0; i < 100; i++)
{

    ab = new abc();
    ab->x = i + 1;
    ab->y = i + 2;
    MAP.insert(std::pair<int, abc*>(i, ab));
} 
```

# java - Java 对象引用是如何工作的？

> ID：16089642
> 
> 赞同：2
> 
> 时间：2013-04-18T17:37:13.877
> 
> 标签：java, object, pointers, reference

我遇到了一个情况，我很困惑。请帮帮我。假设我有这样的代码。

```
MyClass obj1 = null;

List<MyClass> testList = new ArrayList<MyClass>();

testList.add(obj1);//after this line of code, testList will have a "null" at first node

obj1 = new MyClass();//after this line of code, testList still have a "null"
                     //at first node...
                     //What I want is that testList's first node will become a new 
                     //MyClass object 
```

这是我理解的步骤（可能不正确......）：

1.  **obj1**存储指向空的指针...
2.  **testList**存储指向包含“new ArrayList()”的内存的指针
3.  **testList**在其集合中添加**obj1**的指针。
4.  **obj1**存储指向“new MyClass()”的指针
5.  因此，**testList**中的**obj1**应该自动指向“new MyClass()”

 **对不起，我是编程新手......感谢任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T17:56:53.400

这是为什么 testList 在这些代码之后的第一个节点仍然有“null”的解释

```
testList.add(obj1);//after this line of code, testList will have a "null" at first node

obj1 = new MyClass();//after this line of code, testList still have a "null"
                     //at first node...
                     //What I want is that testList's first node will become a new 
                     //MyClass object 
```

**第1步**

```
MyClass obj1 = null; 
```

此行为 MyClass 引用变量（引用值的位持有者）创建空间，但不创建实际的 Myclass 对象。

**第2步**

```
List<MyClass> testList = new ArrayList<MyClass>(); 
```

创建一个列表**testList**可以保存**MyClass**类型的对象

**第 3 步**

```
testList.add(obj1);//after this line of code, testList will have a "null" at first node 
```

testList 第一个节点现在将引用 null 但不是 MyClass 对象。

**第4步**

```
obj1 = new MyClass(); 
```

在堆上创建一个新的 MyClass 对象并将新创建的 MyClass 对象分配给引用变量 obj1。

所以现在列表将如何更新它仍然持有一个 null 但不是 MyClass 对象。

所以现在如果你想让 testList 的第一个节点成为一个新的**MyClass**对象

然后在之后写这个孤独的代码`obj1 = new MyClass();`

```
testList.set(0, obj1); 
```

**所以现在之后的完整代码将是**

```
MyClass obj1 = null;

List<MyClass> testList = new ArrayList<MyClass>();

testList.add(obj1);//after this line of code, testList will have a "null" at first node

obj1 = new MyClass();

testList.set(0, obj1); 
```

**根据我的理解，这就是你的问题。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T17:53:40.697

```
MyClass obj1 = null; 
```

类型为*obj1*的引用变量不`MyClass`引用任何内容（NULL）。

```
List<MyClass> testList = new ArrayList<MyClass>(); 
```

我们声明了一个类型为*testList*`List`的引用变量，并将它分配给堆中一些新创建`ArrayList`的对象。

```
testList.add(obj1); 
```

`List` *testList*的第一个元素被分配了与*obj1*当前持有的相同的引用，即。空值。

```
obj1 = new MyClass(); 
```

`MyClass`我们在堆中创建了一个新对象，并为*obj1*分配了它的引用。但是我们没有为`List` *testList*的第一个元素分配任何新的引用，它被分配了 NULL 引用，所以它仍然没有指向任何地方。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T17:58:15.333

当您将对象添加到`ArrayList`对象时，对象不会被添加到，`ArrayList`但指向对象的指针将被添加。

因此，如果您执行以下操作：

```
Object obj1 = new Object() // [location: x1234]
list.add(obj1); // first index in list points to location x1234
obj1 = new Object(); // [location: x2345]; 
```

现在数组的指针仍然指向旧位置。

情况也是如此`null`。尽管您将链接更改`obj1`为新位置，但数组仍指向旧位置，即`null`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T17:51:49.793

1.  obj1 不指向任何东西，指针不存在
2.  您创建一个新列表， testList 指向该列表
3.  您什么都不添加到列表中，因为您的 obj1 点为空，因此不存在
4.  您创建新对象，obj 现在有一个有效指针

您的列表仍然是空的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-18T18:05:12.643

Java 是严格**按值传递的**。

你的大部分困惑来自于这样一个事实

```
testList.add(obj1); // makes you think that you've added a pointer to the list 
```

现在，如果您将指针修改为

```
obj1 = new MyClass(); // it would reflect at testList.get(0) as well.. NO!! 
```

如果 Java 是“*按引用传递*”，情况就会如此，但因为它`testList.add(obj1);`实际上并没有转换为`testList.add(null);` **复制值**并将 Array 的第一个索引位置（支持此 ArrayList）设置为`null`.

Java 不像 C 和 C++ 使用指针那样工作。它的设计目标之一是通过**EDIT**简化事情：删除指针、它们的算术、多重继承、运算符重载等，仅举几例。

如果您按如下方式修改程序，则更清楚：

```
MyClass obj1 = new MyClass("Object 1"); // modify the constructor to take an id
List<MyClass> testList = new ArrayList<MyClass>();
testList.add(obj1);
obj1 = new MyClass("Object 2");
System.out.println(testList.get(0).toString()); // implement toSting() to id MyClass 
```

`testList`将包含`"Object 1"`not `"Object 2"`。**

# clojure - 哪个术语用于描述具有多种“模式”的功能？

> ID：16089645
> 
> 赞同：1
> 
> 时间：2013-04-18T17:37:18.297
> 
> 标签：clojure, functional-programming

例如，[Clojure 的 range 函数有四种模式：](http://clojure.github.io/clojure/clojure.core-api.html#clojure.core/range)

> ```
> Usage: (range)
>        (range end)
>        (range start end)
>        (range start end step)
> 
> Returns a lazy seq of nums from start (inclusive) to end
> (exclusive), by step, where start defaults to 0, step to 1, and end
> to infinity. 
> ```

有形容词来描述这些功能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T23:47:25.930

我将它们称为多参数或参数重载，因为可以将可变参数重载视为单个单独的参数重载。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-18T23:49:06.863

我相信它们被称为**arity-overloaded**函数，而可变参数函数采用无限数量的参数。

[http://clojure.org/functional_programming](http://clojure.org/functional_programming)

> Clojure 支持*在*单个函数对象、自引用和可变参数函数中使用 &

# javascript - 在 ember.js 中使用自定义 jquery-events

> ID：16089647
> 
> 赞同：0
> 
> 时间：2013-04-18T17:37:24.110
> 
> 标签：javascript, jquery, ember.js

*我在我的 ember.js 应用程序中使用自定义 jQuery UI 插件，并希望对自定义 jQuery 事件做出反应以更新控制器/模型的值。*

我发现了什么：在 stackoverflow 上出于相同目的提出的一个[问题给出了在视图的](https://stackoverflow.com/questions/9735349/how-to-bind-jquery-events-in-my-view)*didInsertElement*函数中使用 jQuery.bind()/[jQuery.on() 的答案。在视图的*didInsertElement*方法中使用*jQuery.on()*会导致事件处理程序内部的*this*绑定到它发生的 Dom-Element 的问题。

 **所以理想情况下，有一种方法可以让其他 jQuery 事件像 ember 带来的那样工作：在 Ember.View-Instance 上调用匹配的方法名称。

你知道任何让自定义 jQuery 事件工作的方法吗？可能使用 Mixin 在视图等上创建适当的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T12:36:58.237

听起来这是一个 Javascript 问题，而不是 jQuery 或 Ember 问题。理解和操作“this”的含义是 Javascript 中最大的学习曲线之一：

```
///...in the view
didInsertElement : function(){
    var view = this;
    this.$().zoomablebg(); //this is the name of the custom jQ UI-Plugin
    // the view variable now holds a reference to the ember view
    // and creates a closure so that you can refer to it in the event handler
    this.$().on("zoomablebgstopdrag", function(e){ view.zoomablebgstopdrag(e) });
},
zoomablebgstopdrag: function(b){
    console.log(this); //this refers to the view now. 
},
//more view code 
```

希望有帮助！**

# java - Jackson 序列化：忽略空值（或 null）

> ID：16089651
> 
> 赞同：158
> 
> 时间：2013-04-18T17:37:30.317
> 
> 标签：java, json, jackson

我目前正在使用杰克逊 2.1.4，当我将对象转换为 JSON 字符串时，我在忽略字段时遇到了一些麻烦。

这是我的类，它充当要转换的对象：

```
public class JsonOperation {

public static class Request {
    @JsonInclude(Include.NON_EMPTY)
    String requestType;
    Data data = new Data();

    public static class Data {
        @JsonInclude(Include.NON_EMPTY)
        String username;
        String email;
        String password;
        String birthday;
        String coinsPackage;
        String coins;
        String transactionId;
        boolean isLoggedIn;
    }
}

public static class Response {
    @JsonInclude(Include.NON_EMPTY)
    String requestType = null;
    Data data = new Data();

    public static class Data {
        @JsonInclude(Include.NON_EMPTY)
        enum ErrorCode { ERROR_INVALID_LOGIN, ERROR_USERNAME_ALREADY_TAKEN, ERROR_EMAIL_ALREADY_TAKEN };
        enum Status { ok, error };

        Status status;
        ErrorCode errorCode;
        String expiry;
        int coins;
        String email;
        String birthday;
        String pictureUrl;
        ArrayList <Performer> performer;
    }
}
} 
```

这是我转换它的方法：

```
ObjectMapper mapper = new ObjectMapper();
mapper.setVisibility(PropertyAccessor.FIELD, Visibility.ANY);

JsonOperation subscribe = new JsonOperation();

subscribe.request.requestType = "login";

subscribe.request.data.username = "Vincent";
subscribe.request.data.password = "test";

Writer strWriter = new StringWriter();
try {
    mapper.writeValue(strWriter, subscribe.request);
} catch (JsonGenerationException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} catch (JsonMappingException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
}

Log.d("JSON", strWriter.toString()) 
```

这是输出：

```
{"data":{"birthday":null,"coins":null,"coinsPackage":null,"email":null,"username":"Vincent","password":"test","transactionId":null,"isLoggedIn":false},"requestType":"login"} 
```

我怎样才能避免那些空值？我只想为“订阅”目的获取所需信息！

这正是我正在寻找的输出：

```
{"data":{"username":"Vincent","password":"test"},"requestType":"login"} 
```

我还尝试了@JsonInclude(Include.NON_NULL) 并将我的所有变量都设置为null，但它也不起作用！谢谢你们的帮助！

* * *

## 回答 #1

> 赞同：279
> 
> 时间：2013-04-18T17:40:10.583

您将注释放在错误的位置 - 它需要在类上，而不是在字段上。IE：

```
@JsonInclude(Include.NON_NULL) //or Include.NON_EMPTY, if that fits your use case 
public static class Request {
  // ...
} 
```

如评论中所述，在 2.x 以下的版本中，此注释的语法为：

```
@JsonSerialize(include = JsonSerialize.Inclusion.NON_NULL) // or JsonSerialize.Inclusion.NON_EMPTY 
```

另一种选择是`ObjectMapper`直接配置，只需调用 `mapper.setSerializationInclusion(Include.NON_NULL);`

（作为记录，我认为这个答案的流行表明这个注释*应该*在逐个字段的基础上适用，@fasterxml）

* * *

## 回答 #2

> 赞同：55
> 
> 时间：2013-08-01T00:26:54.460

您还可以设置全局选项：

```
objectMapper.setSerializationInclusion(JsonInclude.Include.NON_NULL); 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2013-12-19T10:00:48.377

你也可以尝试使用

```
@JsonSerialize(include=JsonSerialize.Inclusion.NON_NULL) 
```

如果您正在处理版本低于 2+ (1.9.5) 的 jackson，我对其进行了测试，您可以轻松地在类上方使用此注释。不为属性指定，仅用于类声明。

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2015-09-15T08:20:48.177

您需要添加`import com.fasterxml.jackson.annotation.JsonInclude;`

添加

```
@JsonInclude(JsonInclude.Include.NON_NULL) 
```

在 POJO 之上

如果你有嵌套 POJO 那么

```
@JsonInclude(JsonInclude.Include.NON_NULL) 
```

需要添加每个值。

注意：JAXRS (Jersey) 自动处理此场景 2.6 及更高版本。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2014-11-12T21:58:29.927

对于杰克逊 2.x

```
@JsonInclude(JsonInclude.Include.NON_NULL) 
```

就在场前。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2016-08-19T11:18:56.537

我最近在使用 2.6.6 版时遇到了类似的问题。

```
@JsonInclude(JsonInclude.Include.NON_NULL) 
```

在归档或类级别上使用上述注释未按预期工作。POJO 在我应用注释的地方是可变的。当我将 POJO 的行为更改为不可变时，注释就发挥了它的魔力。

我不确定它的新版本或此库的先前版本是否具有类似的行为，但对于 2.6.6，您当然需要拥有不可变 POJO 才能使注释工作。

```
objectMapper.setSerializationInclusion(JsonInclude.Include.NON_NULL); 
```

在 ObjectMapper 中直接在全局级别设置序列化包含的各种答案中提到的上述选项也可以工作，但我更喜欢在类或文件级别控制它。

因此，如果您希望在 JSON 序列化时忽略所有空字段，则在类级别使用注释，但如果您只想在类中忽略少数字段，则在这些特定字段上使用它。如果您想更改特定响应的行为，这种方式更具可读性和易于维护。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-04-01T13:56:30.580

或者您可以使用 GSON [ [https://code.google.com/p/google-gson/](https://code.google.com/p/google-gson/) ]，其中这些空字段将被自动删除。

**示例DTO.java**

```
public class SampleDTO {

    String username;
    String email;
    String password;
    String birthday;
    String coinsPackage;
    String coins;
    String transactionId;
    boolean isLoggedIn;

    // getters/setters
} 
```

**测试.java**

```
import com.google.gson.Gson;

public class Test {

    public static void main(String[] args) {
        SampleDTO objSampleDTO = new SampleDTO();
        Gson objGson = new Gson();
        System.out.println(objGson.toJson(objSampleDTO));
    }
} 
```

输出：

```
{"isLoggedIn":false} 
```

我使用**了 gson-2.2.4**

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-01-12T16:14:06.897

如果您想从序列化中排除布尔类型，下面的代码可能会有所帮助：

```
@JsonInclude(JsonInclude.Include.NON_ABSENT) 
```

# java - 在使用 Apache FOP 创建的 PDF 中添加索引页

> ID：16089653
> 
> 赞同：1
> 
> 时间：2013-04-18T17:37:40.810
> 
> 标签：java, pdf-generation, xsl-fo, apache-fop

我使用 Apache FOP 编写了一个应用程序，它可以生成包含多个章节的 PDF。有没有办法，我可以知道 - 哪一章出现在哪一页上。实际上，我需要在开始时创建索引，它告诉哪个章节出现在哪个页面上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-17T16:59:04.320

您可以在需要知道页码的元素上放置一个 ID，然后使用`<fo:page-number-citation ref-id="id"/>`.

例子：

1.  在每个包含章节标题的块上放置一个带有自动生成的 ID 的 ID：

    ```
    <xsl:for-each select="chapter">
        <fo:block id="{generate-id(.)}">
            <xsl:value-of select="@title"/>
        </fo:block>
    </xsl:for-each> 
    ```

2.  然后，在索引所在的开头循环遍历相同的输入元素时，引用您为块提供的 ID：

    ```
    <xsl:for-each select="chapter">
        <fo:block id="{generate-id(.)}">
            <fo:page-number-citation ref-id="{generate-id(.)}"/>
        </fo:block>
    </xsl:for-each> 
    ```

您的索引（这里更像是目录）是否在实际内容之前生成并不重要，因为 ID 是由 XSL 解析器计算的，并且 FOP 在页面布局之后解析这些引用（并且因此页码）已确定。

# javascript - wysihtml5 - 如何禁用下划线标记

> ID：16089654
> 
> 赞同：4
> 
> 时间：2013-04-18T17:37:41.070
> 
> 标签：javascript, html, wysiwyg, wysihtml5

我的网站上的 wysihtml5 有一个小问题。我只想允许几个 html 标记，如果我从解析器规则中删除下划线，甚至从 wysihtml5 库中删除下划线命令，我仍然可以按 CTRL(command)+U 为选定的文本添加下划线。我应该怎么做才能摆脱这种行为？感谢您的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T06:00:12.537

**新答案：**这是我更新的解决方案。我[更新了现有的 keydown 事件处理程序](https://github.com/eyecatchup/wysihtml5/commit/433053830e778e0878a1a4791c685aa04da7f9f7)（并[添加了一个用于跟踪 ctrl 按下状态的 keyup 处理程序](https://github.com/eyecatchup/wysihtml5/commit/0e8fde32ac204b14a682fbc5bcba1739e584b022)），如下所示：

```
// --------- Shortcut logic ---------
var ctrlDown = 0;

dom.observe(element, "keydown", function(event) {
  var keyCode  = event ? event.which : window.event.keyCode,
    command    = shortcuts[keyCode];
  if (1 == event.ctrlKey) {
    console.log('Ctrl key pressed. Setting ctrlDown = 1.');
    ctrlDown = 1;
  }
  if (85 == keyCode && 1 == ctrlDown) {
    console.log('Pressed "U" (keyCode 85), but Ctrl key still down. Don\'t fire!');
    return event.preventDefault(), !1;
  }
  if (1 == ctrlDown && !event.altKey && command) {
    console.log('Shortcut Ctrl + keyCode ' + keyCode + ' triggered.');
    that.commands.exec(command), event.preventDefault();
  }
});

dom.observe(element, "keyup", function(event) {
  // note: "event.ctrlKey" doesn't work with keyup, use keyCode/which 
  if (17 == (event ? event.which : window.event.keyCode)) {
    console.log('Ctrl key released. Setting ctrlDown = 0.');
    ctrlDown = 0;
  }
}); 
```

我[在 github 向您发送了一个拉取请求](https://github.com/xing/wysihtml5/pull/377)。

* * *

**原始答案：**要禁用 Ctrl+u 键盘快捷键，我需要做的就是从第 8494 行的快捷方式对象中删除“u”（85）的 keyCode `wysihtml5-0.4.0pre.js`。

改变

```
 shortcuts = {
    "66": "bold",     // B
    "73": "italic",   // I
    "85": "underline" // U
  }; 
```

至

```
 shortcuts = {
    "66": "bold",     // B
    "73": "italic"    // I
  }; 
```

并且您将无法再在编辑器中使用 Ctrl+u 快捷键。

或者，您可以捕获 keydown 事件并禁用 Ctrl+u 快捷方式（即阻止默认行为）。就像是：

```
// --------- disable ctrl+u shortcut for underlining texts ---------
dom.observe(element, "keydown", function(event) {
  if ((event.ctrlKey || event.metaKey) && 'u' == String.fromCharCode(event.which).toLowerCase()) {
    // do something
  }       
}); 
```

# php - MySQL检查表单输入的标题是否相同，如果相同忽略，如果不同更新另一个表？

> ID：16089658
> 
> 赞同：0
> 
> 时间：2013-04-18T17:38:04.413
> 
> 标签：php, mysql

我有一个“编辑”表单，它使用预先填充的数据（之前通过“输入”表单输入）加载各种文本输入。我有 2 个重要的文本输入是独一无二的，因为用户可以选择输入自定义标题或自定义描述（而不是使用默认标题和/或描述）。

首先，学生有一个 StTitlePref，它告诉我们他们是否更喜欢通用或科学标题（TkTitleSci、TkTitleCom）。所以，这是预先知道的。为了讨论，我们假设 Common 是预先选择的 (TkTitleCom)。

**逻辑**

如果用户已经在“输入”表单中创建了一个具有***默认标题***的 TaskInstance ，当“编辑”表单加载预填充数据时，它将加载该***默认标题***。当用户提交表单时，我想做一个数据库检查，看看标题是否与默认的完全一样。如果相同，我不想将数据添加到TaskInstance.TkInstCustomTitleCom（它应该保持为NULL）并且基本上该字段的表单数据将被忽略。我希望TaskInstance 记录依赖TaskInstance.fkTaskID 来加载Tasks.TkTitleCom。

如果用户已经在“输入”表单中创建了一个带有***自定义标题***的 TaskInstance ，当“编辑”表单加载预填充数据时，它将加载该***自定义标题***。当用户提交表单时，我想做一个数据库检查，看看标题是否与默认的完全一样。由于它不会相同，我想将数据添加到 TaskInstance.TkInstCustomTitleCom 中。

我想将相同的逻辑应用于 TkDesc 和 TkInstCustomDesc。有人可以让我开始使用 MySQL 吗？我不知道从哪里开始。我的页面使用 PHP。

**数据库**

```
Students
1.) StID
2.) StNameFirst
3.) StNameLast
4.) StTitlePref
5.) fkProID

Tasks
1.) TkID
2.) TkSide (the task by nature has a side?: Y or N) 
3.) TkTitleSci
4.) TkTitleCom
5.) TkDesc

TaskInstance
1.) TkInstID
2.) TkInstSide (which side is the task?: L, R or null)
3.) TkInstCustomTitleSci
4.) TkInstCustomTitleCom
5.) TkInstCustomDesc
6.) fkTkID
7.) fkStID 
```

# ios - 默认应用方向

> ID：16089659
> 
> 赞同：4
> 
> 时间：2013-04-18T17:38:06.880
> 
> 标签：ios, objective-c, cocoa-touch, orientation

我有一个用旧版本的 Xcode 编写的应用程序。现在我正在使用 Xcode 4.6.1。这是我从公司外部开发的另一位开发人员那里继承的应用程序。

这个应用程序的问题之一是它的界面。它应该默认为 LandscapeLeft（这是 pList 文件中设置的值）。该应用程序会忽略此指令，而是默认为纵向模式。

我需要做些什么来强制代码尊重这个值吗？我对 iOS/Objective-C 比较陌生。代码编译并运行，只是界面没有做我想要的。

因为这是一个仅限 iPad 的应用程序，所以要容易一些。

**编辑** 我尝试将以下代码添加到我的一个有问题的视图控制器中，但它没有被兑现。关于如何将这种观点强制为景观的任何想法？（IDE中是否有设置 - 看起来Xcode曾经有一个方向属性，但我在4.6.1中找不到它）

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
    // Overriden to allow any orientation.
    return ((interfaceOrientation==UIInterfaceOrientationMaskLandscapeLeft) || (interfaceOrientation == UIInterfaceOrientationMaskLandscapeRight));
}

- (NSUInteger) supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskLandscapeLeft;
}

- (NSInteger) supportedInterfaceOrientationsForWindow
{
    return UIInterfaceOrientationMaskLandscape;
}

- (BOOL) shouldAutoRotate
{
    return YES;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-07T14:19:47.603

我希望这能帮到您。`AppDelegate.m`在类中添加其中一个（您想要的方向）方法

**要在横向模式下强制完全运行应用程序：**

```
- (NSUInteger)application:(UIApplication *)application supportedInterfaceOrientationsForWindow:(UIWindow *)window
{
    return UIInterfaceOrientationMaskLandscape;
} 
```

**要在纵向模式下强制完全运行应用程序：**

```
- (NSUInteger)application:(UIApplication *)application supportedInterfaceOrientationsForWindow:(UIWindow *)window
{
    return UIInterfaceOrientationMaskPortrait;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-18T18:05:16.903

检查应用程序中的视图控制器是否强制视图方向。检查 Apple 文档中的“处理视图旋转”部分和与旋转相关的任务：

[http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIViewController_Class/Reference/Reference.html](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIViewController_Class/Reference/Reference.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-07T16:19:47.573

看起来您已经在视图控制器中正确实现了所有旋转代码，所以这可能是您的问题。不久前，我在你的鞋子里设置了我的代码，苹果指定它是为了以横向模式加载我的应用程序，但由于某种原因它只是没有正确加载应用程序。因此，在一堆论坛帖子和许多论坛回复之后，结果显示在我的视图控制器中，我没有在 loadView 中设置视图控制器视图。因此，请确保在视图控制器的加载视图方法中，您希望根视图设置为视图控制器 self.view。告诉我进展如何

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-08T12:24:31.193

`rootViewController`-property 被添加到 iOS 4 中的-class 中。`UIWindow`通常这个值设置在`UIApplicationDelegate`（在你的情况下可能`AppDelegate.m`）。如果`rootViewController`-property 不正确，则旋转事件有时无法通过视图层次结构正确传递。

`self.window.rootViewController = myRootViewController;`如果它不存在，请尝试。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-08T11:42:40.560

您使用的是 iOS 6.0 或更高版本吗？然后尝试实现 preferredInterfaceOrientationForPresentation 方法。

```
- (UIInterfaceOrientation) preferredInterfaceOrientationForPresentation
{
    return UIInterfaceOrientationLandscapeLeft;
} 
```

如果您的根视图是 UINavigationController，您可能希望对其进行子类化并在其中实现新的定向方法。

当我想在推送到同一个导航控制器的不同 UIViewController 中支持不同的默认方向时，我有一个类似这样的自定义 UINavigationControler：

```
@implementation MyNavigationController

- (BOOL)shouldAutorotate;
{
    return YES;
}

- (NSUInteger) supportedInterfaceOrientations
{
    if ([[self topViewController] respondsToSelector:@selector(supportedInterfaceOrientations)])
        return [[self topViewController] supportedInterfaceOrientations];
    else
        return [super supportedInterfaceOrientations];
}

- (UIInterfaceOrientation) preferredInterfaceOrientationForPresentation
{
    if ([[self topViewController] respondsToSelector:@selector(preferredInterfaceOrientationForPresentation)])
        return [[self topViewController] preferredInterfaceOrientationForPresentation];
    else
        return [super preferredInterfaceOrientationForPresentation];
}

@end 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-18T18:06:15.167

Click on your Project file in Xcode. Then click on 'Targets'. Choose you orientation (Scroll down!) Make sure in IB that the View (Under inspector) is set to portrait.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-05-08T09:24:38.157

只需打开您的 plist 并编辑“**支持的界面方向**”并将“**横向（左主页按钮） ”拖到“****纵向（底部主页按钮）** ”上方

默认情况下，如果您支持 iOS6 之前的版本并在 iOS6 之后的 SDK 中运行，则首先加载顶部值。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-05-07T14:56:25.010

在较旧的 Xcode 版本中，您所要做的就是转到 .xib 文件，选择带有“Portrait”箭头的框，然后将其更改为“Landscape”，然后在 .m 文件中执行以下操作：

```
 - (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
// Overriden to allow any orientation.
return interfaceOrientation==UIInterfaceOrientationLandscapeLeft || interfaceOrientation == UIInterfaceOrientationLandscapeRight;
 } 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-05-02T18:30:11.020

**以横向模式启动**

在 iOS 5 中，您需要在每个视图控制器中实现以下方法。

```
// Called only in IO 5 and earlier.
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationLandscapeRight ||
            interfaceOrientation == UIInterfaceOrientationLandscapeLeft );
} 
```

并在 Info.plist 中将 UIInterfaceOrientation “初始界面方向”设置为 UIInterfaceOrientationLandscapeRight

并以横向模式布置您的视图。

根据[Apple 的开发者文档](https://developer.apple.com/library/ios/#documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/AdvancedAppTricks/AdvancedAppTricks.html)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-05-07T08:31:03.773

试试这个，我们有同样的问题。

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    BOOL returningValue=NO;

    if (interfaceOrientation==UIInterfaceOrientationIsPortrait(interfaceOrientation))
    {
        returningValue=NO;
    }
    else if(UIInterfaceOrientationIsLandscape(interfaceOrientation))
    {
        returningValue=YES;
    }

    return returningValue;
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-05-06T11:51:30.497

在 iOS 6 之前，即在 iOS 5 及更早版本中，应用程序和视图控制器的旋转由单独的视图控制器控制，而在 iOS 6 及更高版本中，负责旋转的视图控制器是容器视图控制器，例如 UINavigationController 和 UITabBarController。您在项目中使用什么作为 rootviewcontroller？

自动旋转在这篇文章中清楚地解释了[iOS中的自动旋转](http://buddingdevelopers.com/autorotation-in-ios/)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2013-05-08T04:35:13.290

从那里检查 iPad 引用 jhhl[的横向启动应用程序：](https://stackoverflow.com/questions/2947501/launching-application-in-landscape-orientation-for-ipad)

> 如果您在第一个插槽中设置了支持的界面方向和另一个方向，则在 info.plist 中设置初始界面方向将被忽略！将您的初始方向也放在那里 - 模拟器将正确启动，应用程序也将正确启动

编辑：还有一件事-问题可能出在完全不同的地方。你确定你有正确的视图控制器层次结构吗？如果控制器没有以正确的方式添加到窗口或另一个控制器，则旋转事件和逻辑将不起作用。事实上，我刚刚检查了我几个月前写的一个应用程序，它有同样的问题——iPad，必须从横向开始。没有花哨的东西，但在 Info.plist 中设置方向，附加 rootViewController 并在旋转方法中设置正确的返回值。

# c# - 从 SQL 数据库生成图形的选项有哪些？

> ID：16089660
> 
> 赞同：3
> 
> 时间：2013-04-18T17:38:09.177
> 
> 标签：c#, sql-server, reporting, sql-server-2012

我有一个 SQL Server 2012 数据库，我需要从中构建一个带有图表的每日自动报告。创建图表的最佳解决方案是什么？

我正在考虑使用 C# 和 Excel 自动化一切，但我希望会有更好/更简单的解决方案。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T22:14:01.930

[我会谦虚地推荐我公司编写的一个名为PowerShell Pipeworks](http://powershellpipeworks.com/)的网络和数据框架（它是免费的、开源的和公共领域的）。这使您可以使用如下代码绘制图形：

```
Select-Sql -TableName DBTable | Out-Html -AsBarGraph 
```

它还有一个 cmdlet，Start-At，可以正常运行，所以你的脚本类似于

```
Start-At -Time "9:00 AM" -Everyday -ScriptBlock { 
    Select-Sql -TableName DBTable -ConnectionStringOrSetting SqlConnectionSecretSetting | Select-Object @{Name='DisplayedProperty';Expression={$_.CalculatedValue} | Out-Html -AsBarGraph |New-WebPage -UseJQueryUI | Set-Content $pathToHtmlFile
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-26T22:31:56.287

您可以从命令行使用[sqlchart](http://www.sqldashboards.com/sqlchart)绘制任何 sql 查询图表。例如，这会生成一个 .png 文件 730x250：

```
sqlchart -D stockdb -P 1433 -servertype mssql -host localhost -e "select * from ohlc where sym='AMZN' AND (date > CURDATE()-60)" -o amazon-candlestick-dark.png --chart candlestick --height 250 --width 730 --theme dark 
```

[![sql 股票图表](https://i.stack.imgur.com/3RRCN.png)](https://i.stack.imgur.com/3RRCN.png)

然后，您可以使用标准脚本语言将其附加到电子邮件中。在 linux 上发送电子邮件的说明在[这里](http://www.sqldashboards.com/b/send-email-with-graphs/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T17:48:29.097

您可以尝试使用 C# 从 SQL 获取数据，然后使用 C#[创建 Excel（.XLS 和 .XLSX）文件](https://stackoverflow.com/questions/151005/create-excel-xls-and-xlsx-file-from-c-sharp)中的库生成图表（我自己之前使用 EPPlus 制作图表）。这两个步骤都非常简单和标准。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T17:54:39.273

在 SSRS 中安装和设计报告 - 按计划通过电子邮件发送/存储它们。

Powershell 也是一个选项，如果您需要有关 powershell 的更多详细信息，请告诉我。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-19T15:23:13.327

如果您想要“包含电池”的解决方案，您可以尝试[DBxtra](http://www.dbxtra.com/)，它可以从 SQL Server 和其他数据库创建报告，并使用 Schedule Server 选项自动导出或通过电子邮件发送它们。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-19T19:52:27.150

以下是有关 powershell 解决方案的详细信息：

1.  您将需要学习一点 powershell（您永远不会后悔所花费的时间）
2.  安装 Powershell v3.0
3.  安装模块 Invokesqlquery（这可以方便地与 sql 通信，可以从[http://powershell4sql.codeplex.com/](http://powershell4sql.codeplex.com/)下载）
4.  查看[http://blogs.technet.com/b/richard_macdonald/archive/2009/04/28/3231887.aspx](http://blogs.technet.com/b/richard_macdonald/archive/2009/04/28/3231887.aspx)的图表

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-04-25T09:01:07.090

试试格拉法纳。您也可以将其链接到 SQL 数据库。 [https://grafana.com/](https://grafana.com/)

# mysql - WHERE 子句中的 SQL 错误

> ID：16089661
> 
> 赞同：-2
> 
> 时间：2013-04-18T17:38:09.537
> 
> 标签：mysql, sql, mysql-error-1054

我有桌子

```
Department: id, name
Employee: id, departmentId, name, surname 
```

departmentId 是引用 Department(id) 的外键查询：

```
SELECT * FROM Employee WHERE Employee.departmentId = Department.id; 
```

返回错误“where 子句中的未知列 Department.id”

我不能放置这个错误。我该如何解决？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T17:39:50.983

您实际上需要包含`department`表格

```
SELECT * 
FROM Employee 
JOIN Department
   ON Employee.departmentId = Department.id; 
```

这使用`JOIN`ANSI 标准的显式语法。您应该避免使用隐式连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T17:39:53.730

那是因为您的`Department`表不在 FROM 子句中。包括它。

```
select *
from Employee, Department
where Employee.departmentId = Department.id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T17:40:09.063

你没有在你的 from 子句中包括 Department....

`SELECT * FROM Employee, Department WHERE Employee.departmentId = Department.id;`

# cuda - K20c中的Hyper-Q分为8个？

> ID：16089667
> 
> 赞同：1
> 
> 时间：2013-04-18T17:38:25.673
> 
> 标签：cuda

我有一台带有 13 个 SMX 的 Kepler K20c，我正在对其进行一些生物信息学研究。为了更好地了解 Hyper-Q，我从 Nvidia 下载了这个示例：[simpleHyperQ](http://docs.nvidia.com/cuda/cuda-samples/index.html#simplehyperq)，但我得到了不同的结果。

## 他们的结果

![在此处输入图像描述](https://i.stack.imgur.com/Kr0UW.png)

## 我的结果

![在此处输入图像描述](https://i.stack.imgur.com/0THh3.png)

该示例只是在每个流中启动两个不同的内核，以在 Fermi 和 Kepler 中显示不同。但我的结果看起来介于开普勒和费米之间！看起来好奇怪！谁能告诉我为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T18:26:48.050

Thanks to Michael. The problem is caused by CUDA_DEVICE_MAX_CONNECTIONS, just set this variable to 32 using:

```
export CUDA_DEVICE_MAX_CONNECTIONS=32 
```

That will fix this

# jquery - 单击时出现在我的关闭图标周围的框架

> ID：16089668
> 
> 赞同：0
> 
> 时间：2013-04-18T17:38:28.180
> 
> 标签：jquery

我有一个带有“x”图像背景的 div，我可以单击它来关闭父元素：

![在此处输入图像描述](https://i.stack.imgur.com/T49AL.png)

它周围的代码是：

```
function remove_cell(el) {
   $(el).closest("div.cell").remove();
}

<div class="handle">
    <div class="grip"></div>
    <div class="closeX" onclick="remove_cell(this)"> </div>
</div> 
```

但是当我单击“x” div 时，我会在它周围看到带有手柄的丑陋框架。释放鼠标按钮时删除工作，但有谁知道在 mousedown 上放置此框架的内容以及如何摆脱它？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T17:59:58.917

在您的代码中，停止事件传播或返回 false 以停止单击弹出窗口下方的元素

```
function remove_cell(el) {
   $(el).closest("div.cell").remove();
   return false;
} 
```

编辑：实际上，由于您使用的是内联代码（不是最好的主意），因此需要内联：

```
<div class="closeX" onclick="remove_cell(this); return false"> </div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T00:54:50.100

问题原来是它所在的较大的 div（上面的橙色框）有 contenteditable=true。显然在这种情况下，如果您单击图像元素，浏览器（我使用的是 FF）会抛出此选择框，即使该图像是您单击的 div 的背景（我的 div.closeX）。我通过为 sub div (div.handle) 赋予属性 contenteditable=false 来摆脱它，这仍然使橙色 div 中的内容可以根据需要进行编辑。

作品：

```
<div class="cell " contenteditable="true">
   <div class="handle" contenteditable="false">
    <div class="closeX" onclick="remove_cell(this)"> </div>
   </div>
</div> 
```

# python - 限制使用 tkFileDialog.asksaveasfile 时保存的文件扩展名

> ID：16089674
> 
> 赞同：3
> 
> 时间：2013-04-18T17:38:41.827
> 
> 标签：python, user-interface, tkinter

我目前正在使用 Tkinter 在 python 中编写一个 GUI，用户可以使用扩展名“.espace”将 GUI 的状态保存在他们的目录中。

`filename = tkFileDialog.asksaveasfilename(defaultextension=".espace")`

如果用户指定了不同的文件扩展名，则文件将使用他们指定的扩展名保存。有没有办法防止这种情况发生？这样他们就完全只能保存扩展名为“.espace”的文件了吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-08-04T08:41:34.297

您可以使用 'filetypes' 选项指定文件类型。下面的示例将保存对话框上的文件类型下拉菜单更改为 .espace 和所有文件。

```
filename = tkFileDialog.asksaveasfilename(defaultextension=".espace", filetypes=(("espace file", "*.espace"),("All Files", "*.*") )) 
```

我还没有找到使用 asksaveasfilename 来限制使用其他文件扩展名的选项。我认为您可以编写一个循环来强制用户使用该扩展：

```
import os
import sys
ext = ""
while ext != ".escape":
   filename = tkFileDialog.asksaveasfilename(defaultextension=".espace", filetypes=(("espace file", "*.espace"),("All Files", "*.*") ))
   file,ext = os.path.splitext(filename) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-01-31T13:30:59.243

为了使@IsraelJ 的解决方案适用于不同的扩展名并抵抗大写/小写字母，我建议：

```
fileext = ".space"
filename = filename if filename[-len(fileext):].lower() == fileext else filename + fileext 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-05-04T08:14:19.510

嗨，我知道我迟到了 7 年，但你可以强制你的扩展我在对话框之后执行一个简单的 if 命令，只需添加这个简单的行：

```
filename = filename if ".space" in filename else filename + ".space" 
```

基本上检查是否使用了默认扩展名，如果没有，它将添加到末尾。如果用户键入另一个扩展名，它将失效。

# python - 如何编写一个用@defer.inlineCallbacks 装饰的方法，它可能会产生也可能不会产生？

> ID：16089675
> 
> 赞同：2
> 
> 时间：2013-04-18T17:38:42.307
> 
> 标签：python, twisted

我的方法是以下形式：

```
@defer.inlineCallbacks
def myAsyncMethod():
    if someCondition:
        yield anotherAsyncMethod() 
```

问题是，如果`someCondition`不是，`True`则不会发生任何屈服，这实际上变成了一个同步函数。然后装饰器导致这是一个错误。

现在，我只是在做`yield 1`最后的事情。这是正确的做法吗？我当然可以这样做：

```
d = Deferred()
d.callback(0)
yield d 
```

但我看不出有什么不同

编辑：我的意思是，如果我尝试这样做，`yield myAsyncMethod()`那么它会产生异常。我不想处理异常。避免它的一种方法是在 myAsyncMethod() 的末尾产生一些东西，但是是否有另一种简单的方法来做到这一点。这里的常见做法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T19:02:29.797

前提不正确。考虑：

```
>>> def foo():
...     if False:
...             yield
... 
>>> foo()
<generator object foo at 0x7f579cc4ccd0>
>>> 
```

在这里，从不评估 yield 语句。不过，这并不会停止`foo`返回生成器。

这意味着您可以`inlineCallbacks`毫无问题地装饰这样的功能。

```
>>> @inlineCallbacks
... def foo():
...     if False:
...             yield
... 
>>> foo()
<Deferred at 0x7f08328e3ef0  current result: None>
>>> 
```

由于生成器没有元素，因此您得到的结果`Deferred`是已经有的`None`，正如您在此处看到的那样。

此外，这意味着您可以调用这样的函数并从另一个`inlineCallbacks`-decorated 函数中生成它而不会出现问题：

```
>>> @inlineCallbacks
... def bar():
...     print "Foo result is:", (yield foo())
... 
>>> bar()
Foo result is: None
<Deferred at 0x7f08328e3ef0  current result: None>
>>> 
```

在这里，您看到`bar`执行，产生了调用的结果`foo`，打印出的结果，`Deferred`然后用它自己的完成`Deferred`（也已经有`None`结果）。

# r - RPART 输出中的标识级别

> ID：16089676
> 
> 赞同：0
> 
> 时间：2013-04-18T17:38:45.537
> 
> 标签：r, rpart

我有 4 组：敏感性、类别、范围、持续时间。这 4 个中的每一个都有 4 个级别。敏感度 - A、B、C、D 类别 - 1、2、3、4 程度 - 现场、局部、区域、泛区域 持续时间 - 短期、中期、长期、不可逆

我使用这些（总共有 256 个）的组合来获得严重性分类。有 7 个严重等级：S1、S2、S3、S4、S5、S6、N。

使用 RPART，我得到一棵 Duration=cd 作为第一个二进制中断的树。然后树左侧的下一个是 Sensitivity=ab。我如何知道 c 和 d 是哪个持续时间级别？我怎么知道 a 和 b 的灵敏度级别是什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-02T14:21:20.210

使用`print()`会给你你所追求的吗？这将打印模型中的节点列表，然后打印每个节点的变量。

```
rpartmodel <- rpart(Price ~ Country + Mileage + Type, data =  car.test.frame)

print(rpartmodel) 
```

或者尝试使用 rpart.plot 包绘制你的树？

```
library(rpart.plot)

prp(rpartmodel, faclen = 9) 
```

对图进行更多自定义（我发现），并用类别名称标记分割。`faclen`上面控制因子拆分显示的字符数。

# wpf - WPF 3D 和 Helix 3D 工具包图形，在一个视口中包含约 500,000 个三角形 - 优化

> ID：16089677
> 
> 赞同：1
> 
> 时间：2013-04-18T17:38:49.923
> 
> 标签：wpf, optimization, graphics, 3d, helix-3d-toolkit

我是堆栈溢出的新手，也是 3D 图形编程的新手。我的任务是创建一个将读取数据的应用程序（目前我正在从分隔的文本文件中读取，但最终将从数据数组中读取）并以 3D 图形方式显示数据。数据是从正在扫描日志的 3D 扫描仪读取的 x、y、z 坐标。我需要从 4 个不同的角度在屏幕上显示这些日志的 3D 表示。我正在将数据读入二维 Point3D 数组，然后使用它在 HelixViewport3D 中创建 3D 模型。我使用嵌套的 for 循环来检查数组中的数据点是否在特定的 x、Z 范围内——如果是，我需要从该数据中创建一个三角形。传递整个数组后，我将 Model3DGroup 添加到我的视口的子项中：

```
topModel.Content = topGroup;
this.mainViewport.Children.Add(topModel); 
```

这需要大约 8 秒，缩放、平移、旋转非常慢，屏幕上的所有这些数据（大约 500,000 个三角形）。有什么方法可以提高 WPF 3D 图形的性能？我实际上不需要能够在完成的应用程序中进行缩放/平移/旋转，但它有助于调试。最终的应用程序将只是从不同方面以 4 种不同方式静态显示的相同模型。但是，我需要能够读取数据并在 1-5 秒内显示图形。非常感谢任何帮助，我希望我的问题很清楚！

编辑：在深入研究顶点缓冲之后，这就是我需要做的。我使用的积分太多了。如果有人可以向我指出一些关于在 c# 中进行顶点/索引缓冲的文献，将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-26T15:07:47.707

I have solved this issue. Thanks for the input Capt Skyhawk! You saying that you doubted this was a WPF3D shortcoming helped me look in the right places. My problem was that the way I wrote this made **every triangle it's own ModelVisual3D!!** I re-wrote the code to contain only 3 GeometryModel3D (sp?) objects, and all the triangles are placed in a MeshGeometry3D and then the mesh is used to create a model. This made the models render in < 0.1 seconds. I now have a new issue- for some reason only about half of the triangles are showing up in the model in my viewports. I'm not sure why, though it may be that I have too many Point3D points or too many triangle indices in my mesh.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T17:45:06.483

我怀疑这是 WPF3D 的一个缺点。这很可能是加载过程。解析具有 500,000 个三角形（甚至更多点！）的文本文件是花费大量处理时间的地方。

如果在 8 秒内没有包含文本文件的加载，则非常错误。

你在使用索引缓冲区吗？如果没有，那么您就是在用那么多顶点射击自己。

# comments - 如何在 antlr 中禁止嵌套评论

> ID：16089680
> 
> 赞同：0
> 
> 时间：2013-04-18T17:38:59.417
> 
> 标签：comments, antlr

我目前在 antlr 中有一个多行注释词法分析器规则，如下所示：

```
MULTILINE: '/*' .* '*/' {$channel=HIDDEN;} ; 
```

但是，这目前允许执行以下操作：

```
/* /* hello */ */ 
```

有没有可能的方法来禁用 antlr 中的嵌套评论？我尝试过各种各样的事情，比如

```
MULTILINE: '/*' (~(MULTILINE)|.*) '*/' {$channel=HIDDEN;} ; 
```

但这不起作用。任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T17:50:54.447

不，那是不正确的：`.*`并且`.+`不贪婪。

给定由以下语法生成的解析器：

```
grammar T;

parse
 : (t=. {System.out.printf("\%-15s'\%s'\n", tokenNames[$t.type], $t.text);} )* EOF
 ;

MULTILINE
 : '/*' .* '*/' {$channel=HIDDEN;}
 ;

OTHER
 : .
 ; 
```

输入`"/* /* hello */ */"`将在您的命令行上产生以下内容：

```
其他 ' '
其他 '*'
其他 '/'
```

即，`"/* /* hello */"`被放到`HIDDEN`通道上，并且`OTHER`构建了 3 个令牌。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-16T20:02:15.380

尝试这个：

无法在评论正文中识别前缀或后缀。此外，不允许嵌套。

```
COMMENT_NON_NEST
    : '/*'
      ( ('/'|'*'+)? ~[*/] )*?
      ('/'|'*'+?)?
      '*/'
      {$channel=HIDDEN;}
    ; 
```

# javascript - pg 似乎没有正确关闭连接

> ID：16089684
> 
> 赞同：2
> 
> 时间：2013-04-18T17:39:14.357
> 
> 标签：javascript, node.js, node-postgres

我正在使用 Node.js 和 postgresql 编写应用程序。当用户进行身份验证时，它会访问数据库以检查用户的密码，然后据说会关闭与数据库的连接。但是，如果用户输入错误的密码并再次尝试进行身份验证，我会在服务器控制台上收到此错误：

```
UNCAUGHT EXCEPTION...
{ [Error: write EPIPE] code: 'EPIPE', errno: 'EPIPE', syscall: 'write' }
Error: write EPIPE 
```

我相信它第一次没有正确关闭连接。这是应该关闭连接的脚本部分：

```
query.on('end', function(){
    client.end();
    if (pass == this.dbpass){
        console.log(pass);
        console.log(this.dbpass);
        return callback (200, "OK", {}, true);
    } else {
        console.log(pass);
        return callback(200, "OK", {}, false);
    }
}); 
```

还有另一种方法可以关闭我不知道的连接吗？

# java - Jena 多个 rdfs:label

> ID：16089692
> 
> 赞同：3
> 
> 时间：2013-04-18T17:39:50.867
> 
> 标签：java, jena, ontology, owl, rdfs

我是 Jena 和 Owl 的新手，我得到了一个本体。我可以用 Protege 4.2 打开它而没有任何问题，但是当我尝试用 Jena 打开它时，我得到： `Exception in thread "main" org.apache.jena.riot.RiotException: {E201} Multiple children of property element`。

我一直在我的本体中寻找它可能是什么，我注意到某些元素在一种语言中具有多个标签，例如：

```
<AnnotationAssertion>
    <AnnotationProperty abbreviatedIRI="rdfs:label"/>
    <AbbreviatedIRI>atc:A02BX02</AbbreviatedIRI>
    <Literal xml:lang="no" datatypeIRI="&rdf;PlainLiteral">Sukralfat</Literal>
</AnnotationAssertion>
<AnnotationAssertion>
    <AnnotationProperty abbreviatedIRI="rdfs:label"/>
    <AbbreviatedIRI>atc:A02BX02</AbbreviatedIRI>
    <Literal xml:lang="no" datatypeIRI="&rdf;PlainLiteral">antepsin</Literal>
</AnnotationAssertion>
<AnnotationAssertion>
    <AnnotationProperty abbreviatedIRI="rdfs:label"/>
    <AbbreviatedIRI>atc:A02BX02</AbbreviatedIRI>
    <Literal datatypeIRI="&xsd;string">sucralfate</Literal>
</AnnotationAssertion>
<AnnotationAssertion>
    <AnnotationProperty abbreviatedIRI="rdfs:label"/>
    <AbbreviatedIRI>atc:A02BX02</AbbreviatedIRI>
    <Literal xml:lang="no" datatypeIRI="&rdf;PlainLiteral">sukralfat</Literal>
</AnnotationAssertion> 
```

这会导致问题吗？我使用的所有代码都适用于其他本体，所以我认为它确实来自这个本体。你知道什么可能导致这个异常吗？

## 编辑

因此，我采用了最小化的情况，但仍然遇到相同的错误：

```
<?xml version="1.0"?>

<!DOCTYPE Ontology [
    <!ENTITY xsd "http://www.w3.org/2001/XMLSchema#" >
    <!ENTITY xml "http://www.w3.org/XML/1998/namespace" >
    <!ENTITY rdfs "http://www.w3.org/2000/01/rdf-schema#" >
    <!ENTITY rdf "http://www.w3.org/1999/02/22-rdf-syntax-ns#" >
]>

<Ontology xmlns="http://www.w3.org/2002/07/owl#"
     xml:base="http://www.ebi.ac.uk/Rebholz-srv/atc/public/ontologies/atc.owl"
     xmlns:rdfs="http://www.w3.org/2000/01/rdf-schema#"
     xmlns:xsd="http://www.w3.org/2001/XMLSchema#"
     xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
     xmlns:xml="http://www.w3.org/XML/1998/namespace"
     ontologyIRI="http://www.ebi.ac.uk/Rebholz-srv/atc/public/ontologies/atc.owl">
    <Prefix name="" IRI="http://www.ebi.ac.uk/Rebholz-srv/atc/public/ontologies/atc.owl#"/>
    <Prefix name="atc" IRI="http://www.legemiddelverket.no/Legemiddelsoek/Sider/Default.aspx#"/>
    <Prefix name="owl" IRI="http://www.w3.org/2002/07/owl#"/>
    <Prefix name="rdf" IRI="http://www.w3.org/1999/02/22-rdf-syntax-ns#"/>
    <Prefix name="xml" IRI="http://www.w3.org/XML/1998/namespace"/>
    <Prefix name="xsd" IRI="http://www.w3.org/2001/XMLSchema#"/>
    <Prefix name="rdfs" IRI="http://www.w3.org/2000/01/rdf-schema#"/>
    <Declaration>
        <Class abbreviatedIRI="atc:J"/>
    </Declaration>
    <AnnotationAssertion>
        <AnnotationProperty abbreviatedIRI="rdfs:label"/>
        <AbbreviatedIRI>atc:J</AbbreviatedIRI>
        <Literal datatypeIRI="&xsd;string">ANTIINFECTIVES FOR SYSTEMIC USE</Literal>
    </AnnotationAssertion>
</Ontology> 
```

这是java代码：

```
InputStream in = FileManager.get().open(filename);
if (in == null) {
    throw new IllegalArgumentException("File: " + filename + " not found");
}
model = ModelFactory.createOntologyModel(OntModelSpec.OWL_MEM);
model.read(in, null);
try {
    in.close();
} catch (IOException e) {
    System.err.println("Couldn't close the inputStream");
} 
```

这有帮助吗？我真的没有任何想法了......

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-18T21:58:53.997

那是一个[OWL2 XML](http://www.w3.org/TR/owl2-xml-serialization/)格式的文件。Jena 不支持这种格式，但它支持 RDF/XML 中的 OWL。

换句话说，它期待错误的 XML 风格并感到困惑。

尝试将其保存为另一种格式。

# svg - SVG 到 SWF、AVI 转换器

> ID：16089696
> 
> 赞同：1
> 
> 时间：2013-04-18T17:39:54.747
> 
> 标签：svg, flash, avi

我使用 SMIL 制作了 SVG 动画。但是我需要导出为其他格式。

你知道任何可以将动画 SVG 转换为 SWF、GIF、AVI（或任何其他视频格式）的程序吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-27T13:18:48.780

使用 ffmpeg 分两步进行这种转换很容易。

**第 1 步**：从您的屏幕生成电影。

1.  在 Mozilla Firefox 或 Internet Explorer 中打开您的动画 SVG。
2.  在终端中使用此命令：

    ```
    ffmpeg -s 1440x640 -r 25 -f x11grab -i :0.0 -b 6000k out.avi 
    ```

    和：

    *   **-s**指定动画的格式（此处为 1440x640 像素）。
    *   **-r**每秒帧数（此处为 25）。
    *   **-f**选择你的屏幕。
    *   **-b**质量（6000k 是好的质量）。
    *   **out.avi**文件的名称和格式。
3.  现在以全屏模式 (F11) 观看您的动画。如果你的动画是循环的，那就更好了。

4.  停止录制 (Ctrl + C)

**第 2 步**：只保存有趣的部分

在终端中使用此命令：

```
ffmpeg -i out.avi -b 6000k -r 25 -t "00:00:10" -ss "00:00:09" "final.avi" 
```

和：

*   **-i**要剪切的文件。
*   **-b**质量。
*   **-r**帧速率。
*   **-t**记录的持续时间（此处为 10 秒）。
*   **-ss**开始录制（这里是 9 秒）。
*   **final.avi**输出文件。

现在你有一个 .avi 文件

# android - 提供缓慢响应的片段选项卡

> ID：16089698
> 
> 赞同：1
> 
> 时间：2013-04-18T17:17:45.187
> 
> 标签：android, android-tabhost

我将 v4 支持库用于`FragmentTabHost`.

要求是，当我每次在片段中将标签切换到另一个和另一个切换到一个时

`onCreateView()`&`onActivityCreated()`正在打电话。这就是为什么我的代码性能很慢。

那么，还有其他解决方案吗？如何提高`fragment`标签的性能？

# security - 安全检查以避免页面上的直接访问者

> ID：16089699
> 
> 赞同：0
> 
> 时间：2013-04-18T17:39:57.557
> 
> 标签：security

我有一个只想从 iFrame 加载的页面。

我使用此链接上的解决方案来做到这一点。 [如何识别网页是在 iframe 中加载还是直接加载到浏览器窗口中？](https://stackoverflow.com/questions/326069/how-to-identify-if-a-webpage-is-being-loaded-inside-an-iframe-or-directly-into-t)

但它在 IE 中不起作用，所以我使用这样的条件注释

```
<!--[if IE 9]>
<script type="text/javascript">
    window.location = "http://mysite.com/nodirectvisit.html";
</script>
<![endif]--> 
```

他们现在一起在 IE、Chrome、FF 和 Opera 中工作。

我只是想问一下还有其他方法可以直接访问我的页面吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T17:49:11.047

如果用户禁用 javascript，那么您的代码将不会运行。也许使用 Sessions 来跟踪用户来自哪里？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T17:50:31.040

任何禁用 javascript 或 NoScript 的人都可以直接打开该页面。javascript应该阻止大多数用户。

您可以检查 iframe 页面的引用者以确保它是包含 iframe 的页面。推荐人不是最可靠的领域，但如果您更担心人们访问不在 iframe 中的页面而不是人们根本看不到它，那可能是要走的路。

# java - 插入数据库时 由于没有当前事务而无法执行操作

> ID：16089700
> 
> 赞同：5
> 
> 时间：2013-04-18T17:40:02.810
> 
> 标签：java, android, multithreading, sqlite, android-sqlite

在我的 Android 应用程序中，我必须从不同的线程将数据插入到几个 SQLite 表中（一个线程用于插入一个表，并且有 5 个表）。有很多数据，所以我在每个线程中使用`beginTransaction()`-> `setTransactionSuccessful()`->`endTransaction();`并且所有线程同时启动，但在第二个或有时第三个线程中我总是遇到这个异常：

![在此处输入图像描述](https://i.stack.imgur.com/4Q9uN.png)

我使用[这里提到](http://touchlabblog.tumblr.com/post/24474750219/single-sqlite-connection)的单个 SQLite 连接（单例），但是这个问题仍然存在。所以我希望能得到一些帮助。在此先感谢！

PS如果我有竞争条件，我应该使用什么其他方式进行多线程插入？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-18T17:44:16.613

我认为您的问题是竞争条件。由于您有多个线程正在启​​动和结束事务，您可能会得到类似以下操作的内容：

```
beginTransaction()
// this may be a noop because a transaction is already open
beginTransaction()
setTransactionSuccessful()
setTransactionSuccessful()
endTransaction()
// this may throw because the previous end closes the transaction
endTransaction() 
```

我不认为 Sqlite 支持在单个连接上打开多个事务，并且正如您所指出的，多个连接是不可能的。

如果事务的目标是加速数据，那么你将不得不改变你的架构，而不是从多个线程写入。您可以使用某种实用程序类来执行实际的数据库更新，`synchronized`这样所有线程都会调用并决定何时打开或关闭事务。另一个想法是让一个线程执行您的数据库操作，而所有其他线程写入一个`BlockingQueue`与写入线程共享的线程。

# java - 显示为数字的字符链接列表

> ID：16089709
> 
> 赞同：0
> 
> 时间：2013-04-18T17:40:29.363
> 
> 标签：java

所以我试图制作一个字符的链表，首先我要指出的是，我们已经不允许在 java 中使用内置的链表方法。当我添加字符然后尝试显示它们时，它只会给我一个数字列表。为什么会这样？

```
class Node{
        int data;
        Node next;
        public Node(Character x){
            data = x; next = null;
        }
        public Node next(){return next;}
        public void setNext(Node p){
            next = p;
        }
        public void set(Character x){data = x;}
        public int data(){return data;}
    }

    class Reader{
            Node head = null;//empty list
            public void add(Character x){ //add at head
                Node nw = new Node(x);
                nw.setNext(head);
                head = nw;
            }
            public void display(){
                Node k = head; 
                System.out.print('[');
                while(k!=null){
                    if(k.next!=null)
                        System.out.print(k.data()+","); 
                    else
                        System.out.print(k.data());
                    k=k.next(); 
                }   
                System.out.print(']'); 

            }

        }

    class assignment9{

        public static void main(String[]args){

            Reader r1 =  new Reader();
            r1.add('r');
            r1.add('e');
            r1.add('l'); 
            r1.add('l');
            r1.add('o');
            r1.display();

        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T17:41:39.367

在您的节点内部，如果您希望将数据表示为 char，请不要将数据存储为 int。int 是数字类型，char 是字符类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T17:46:46.740

刚投到`char`

`System.out.print((char)k.data()+",");`

和

`System.out.print((char)k.data());`

您可以`int`在这里使用，但最好在您的情况下为每个变量使用最合适的类型`char`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T17:42:17.120

您在调用 data() 时打印出整数。如果您希望将其表示为字符，请确保数据是字符类型。

# entity-framework - 逆向工程数据库上的 EF 5.0 迁移。无法更新模型更改，因为表已存在

> ID：16089710
> 
> 赞同：3
> 
> 时间：2013-04-18T17:40:30.753
> 
> 标签：entity-framework, entity-framework-5, entity-framework-migrations

我正在使用 EF5.0 的 EF 电动工具 Beta 3 对现有数据库进行逆向工程。

当我从项目上下文菜单中选择“首先进行逆向工程代码”时，我会按预期获得所有模型和 DBContexts + 映射。一切看起来都很好。

在逆向工程过程完成后，我立即成功启用了迁移。

但是我想向其中一个模型添加一个新属性。添加新属性后，

我运行 PM> Add-Migration AddMyPropertyToMyTable

创建迁移文件，

如果我然后尝试 PM> Update-Database

我收到一条错误消息，告诉我这些表已经存在。

我在这里学习教程：> [http://msdn.microsoft.com/en-us/data/jj200620](http://msdn.microsoft.com/en-us/data/jj200620)

为什么我会收到此错误？当然该表存在，我只是对其进行了逆向工程

我应该在逆向工程后删除数据库吗？或者在逆向工程数据库的情况下，我是否必须对实际数据库进行更改，然后再次对其进行工程以在我的项目中获得所需的更改（那么逆向工程首先有什么意义？）

本教程是否缺少某些内容，即在模型更改后使数据库可更新所需的额外步骤？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-18T18:04:46.377

当您使用现有数据库启用迁移时，EF 没有添加`__MigrationHistory`表或初始迁移 ( `DbMigration`) 文件。

您可以在包管理器控制台中使用以下命令添加初始迁移：

```
Add-Migration Initial -IgnoreChanges 
```

这将是一个空的初始迁移。然后强制EF创建`__MigrationHistory`表，你可以使用：

```
update-database 
```

然后应该创建`__MigrationHistory`表（在系统表下）

您现在应该能够进行模型更改，并创建新的迁移文件（或通过在`Configuration.cs`文件夹下的文件中配置它来使用自动迁移`Migrations`）。

您可以使用 手动运行这些迁移更改，或者使用初始化`update-database`程序让数据库在应用程序启动时自动迁移到最新的迁移。`MigrateDatabaseToLatestVersion`

例如，您可以在 app.config/web.config 中设置它，这样就不会在生产环境中设置它。

# jquery - JQuery-Validate 动态更新规则不起作用

> ID：16089720
> 
> 赞同：1
> 
> 时间：2013-04-18T17:40:55.107
> 
> 标签：jquery, jquery-validate

jQuery：1.9.1 jQuery 验证：1.11.1

我有一个呈现给用户的用户个人资料页面。当用户对特殊字段（密码或新密码）进行更改时，我想将某些输入字段设为 REQUIRED 和 VALIDATED。但是，规则只起到了一半的作用，并且允许张贴表格。如果我强制执行规则（例如“fullname”和“displayname”），那么它们总是有效的。我不能动态更新验证规则吗？我究竟做错了什么？

```
<script type="text/javascript">
$(document).ready(
    function()
    {
        function updateRules()
        {
            var mLen = $('#passwordnew').val().length;
            if (mLen > 0)
            {
                $('#passwordold').rules('add', {required: true, minlength: 6});
                $('#passwordold').attr('required', 'true');
                $('#passwordnew').rules('add', {required: true, notEqual: '#passwordold'});
                $('#passwordnew').attr('required', 'true');
                $('#passwordconf').rules('add', {required: true, equalTo: '#passwordnew'});
                $('#passwordconf').attr('required', 'true');
            } else {
                $('#passwordold').rules('remove');
                $('#passwordold').attr('required', 'false');
                $('#passwordnew').rules('remove');
                $('#passwordnew').attr('required', 'false');
                $('#passwordconf').rules('remove');
                $('#passwordconf').attr('required', 'false');
            }
        }

        // Change
        $('#passwordold').change(updateRules);
        $('#passwordnew').change(updateRules);

        // Popover
        $('#profile :input').hover(
            function()
            {
                $(this).popover('show')
            },
            function()
            {
                $(this).popover('hide')
            }
        );

        // Validation
        $('#profile').validate(
            {
                rules:
                    {
                        displayname: {required: false, minlength: 2},
                        emailnew: {required: false, email: true},
                        fullname: {required: true, minlength: 5},
                    },
                messages:
                    {
                        displayname:
                            {
                                minlength: "{{ Lang::line( 'user.profile.displayname.validate.minlength' ) -> get() }}",
                            },
                        emailnew:
                            {
                                email: "{{ Lang::line( 'user.profile.emailnew.validate.email' ) -> get() }}"
                            },
                        fullname:
                            {
                                required: "{{ Lang::line( 'user.profile.fullname.validate.required' ) -> get() }}",
                                minlength: "{{ Lang::line( 'user.profile.fullname.validate.minlength' ) -> get() }}",
                            },
                        passwordold:
                            {
                                required: "{{ Lang::line( 'user.profile.passwordold.validate.required' ) -> get() }}",
                                minlength: "{{ Lang::line( 'user.profile.passwordold.validate.minlength' ) -> get() }}",
                            },
                        passwordnew:
                            {
                                required: "{{ Lang::line( 'user.profile.passwordnew.validate.required' ) -> get() }}",
                                minlength: "{{ Lang::line( 'user.profile.passwordnew.validate.minlength' ) -> get() }}",
                                notEqual: "{{ Lang::line( 'user.profile.passwordnew.validate.notequal' ) -> get() }}",
                            },
                        passwordconf:
                            {
                                required: "{{ Lang::line( 'user.profile.passwordconf.validate.required' ) -> get() }}",
                                equalTo: "{{ Lang::line( 'user.profile.passwordconf.validate.equalto' ) -> get() }}"
                            }
                    },
                errorClass: "help-inline",
                errorElement: "span",
                highlight: function(element, errorClass, validClass)
                {
                    $(element).parents('.control-group').addClass('error');
                },
                unhighlight: function(element, errorClass, validClass)
                {
                    $(element).parents('.control-group').removeClass('error');
                    $(element).parents('.control-group').addClass('success');
                }
            }
        );
    }
);
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T18:41:32.727

`.validate()`是插件的*初始化*，它应该只在 DOM 准备好时被调用*一次。*

```
$(document).ready(function() {

        // Validation INITIALIZATION
        $('#profile').validate({
            // your options and rules
        });

        function updateRules() {
            // your code
        }

        // Change
        $('#passwordold').change(updateRules);
        $('#passwordnew').change(updateRules);

        // Popover
        $('#profile :input').hover(
            function() {
                $(this).popover('show')
            },
            function() {
                $(this).popover('hide')
            }
        );

}); 
```

# c++ - const_cast 类构造函数中的 const 成员

> ID：16089722
> 
> 赞同：5
> 
> 时间：2013-04-18T17:40:58.097
> 
> 标签：c++, constructor, constants

当我希望类的成员变量在类的生命周期内保持不变时，我有时会使用 const_cast，但它需要在构造函数期间是可变的。例子：

```
struct qqq {
 const vector<foo> my_foo;

  qqq(vector<foo>* other) {
    vector<foo>& mutable_foo = const_cast<vector<foo>&>(my_foo)
    other->swap(mutable_foo);
  }
}; 
```

我曾假设在构造函数中执行此操作基本上没问题，因为此时没有其他人依赖它，因此它不会与优化等交互不良。

但是最近有人告诉我这是“未定义的行为”，并且在任何情况下构造 const 对象后对其进行变异基本上是非法的。

有人可以澄清吗？这是一个不好的/未定义的行为/要做的事情吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-18T17:43:33.750

**这是未定义的行为**。根据 C++11 标准的第 7.1.6.1/4 段：

> `mutable`除了可以修改声明的任何类成员（7.1.1）外，任何`const` 在其生命周期（3.8）期间修改对象的尝试都会导致未定义的行为。

在这种情况下，您似乎希望您的对象在构造后“变为”常量。这是不可能的。

如果你`vector`的意思是`const`，你应该在构造函数的[**初始化列表**](http://www.cprogramming.com/tutorial/initialization-lists-c++.html)中初始化它：

```
qqq(vector<foo>& other) 
    : my_foo(std::move(other)) 
//  ^^^^^^^^^^^^^^^^^^^^^^^^^^^
{
} 
```

请注意，除非您有充分的理由通过指针传递 - 在这种情况下，您还应该检查指针是否非空 - 您应该考虑通过引用传递（如上所示），这是常见的做法。

**更新：**

正如 Pete Becker 在评论中正确指出的那样，正确的设计将表明从`vector`参数移动的决定应该属于 ' 的构造函数的*调用者*，`qqq`而不是构造函数本身。

如果构造函数总是应该从它的参数中移动，那么你可以让它接受一个右值引用，明确构造函数本身对调用者的期望：

```
qqq(vector<foo>&& other) 
//             ^^
    : my_foo(std::move(other)) 
//  ^^^^^^^^^^^^^^^^^^^^^^^^^^^
{
} 
```

这样，调用者必须在' 的构造函数的输入中提供一个*右值：*`qqq`

```
std::vector<foo> v;
// ...
qqq q1(v); // ERROR!
qqq q2(std::move(v)); // OK! Now the client is aware that v must be moved from 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T17:45:13.500

是的，它确实是 UB（未定义行为）。`const`对象一旦初始化就不能修改。您应该做的是使用成员初始化器列表，也许与一个函数一起使用：

```
struct qqq {
  const vector<foo> my_foo;

  qqq(vector<foo> *other) : my_foo(initialiseFoo(*other)) {}

  static vector<foo> initialiseFoo(vector<foo> &other) {
    vector<foo> tmp;
    other.swap(tmp);
    return tmp;
  }
}; 
```

一个体面的优化器应该能够摆脱临时的。

如果可以使用 C++11，其实更简单：

```
struct qqq {
  const vector<foo> my_foo;

  qqq(vector<foo> *other) : my_foo(std::move(*other))
  {
    other->clear();  //Just in case the implementation of moving vectors is really weird
  }
}; 
```

# datepicker - jQuery datepicker 没有打开焦点

> ID：16089723
> 
> 赞同：0
> 
> 时间：2013-04-18T17:41:06.067
> 
> 标签：datepicker, jquery-ui-datepicker, uidatepicker

这是我的场景：我有一个索引页面，上面有 2 个单选按钮和一个用于结果的跨度区域。单击其中一个单选按钮时，span 会填充一个 ajax 生成的页面，该页面具有一个输入框，如下所示：

```
<input size='25' class='datepicker' value='Click to enter deposit date' READONLY type='text'    id='depositDate' name='depositDate'> 
```

在这个页面的底部有一个“添加记录”按钮，它会触发 JavaScript 验证。验证是这样的：

```
var inpDepDate  = $.trim($("#depositDate").val());
if(inpPayDate=='Click to enter pay date') // Validate pay date
{
    alert('Invalid pay date; re-enter');

    document.getElementById('payDate').focus();
    document.getElementById('payDate').select();

    return false;
} 
```

在我的 javascript 文件中还有：

```
$(function(){
    $( "#depositDate" ).live('focus', function() {
        $(this).datepicker({
            changeMonth: true,
            changeYear: true,
            minDate: "+1D",
            showOtherMonths: true,
            selectOtherMonths: true}).focus();
    });
}); 
```

问题是当验证失败时，文本会突出显示并被选中，但不会自动打开。

我尝试了很多东西，实际上是这个网站上的很多东西，但没有运气。它似乎永远无法识别现场活动。但是，如果我在验证失败后单击文本框（并且文本被突出显示），日历打开就好了。我在 jQuery 和 ui 方面相当新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T17:48:22.147

如果您过去已经调用过 datepicker，则不需要重新实例化它`#depositDate`。（或在payDate）

尝试这个：

```
if(inpPayDate=='Click to enter pay date') // Validate pay date
{
    alert('Invalid pay date; re-enter');

    $("#payDate").datepicker("show");
    return false;
} 
```

# jquery - 使用 twitter bootstrap popover 修复 jquery 验证插件中的正则表达式

> ID：16089725
> 
> 赞同：-1
> 
> 时间：2013-04-18T17:41:09.223
> 
> 标签：jquery, twitter-bootstrap, jquery-validate

我有这段代码，当有空格时会显示一个弹出框。

```
$.validator.addMethod(
        "regex",
        function(value, element, regexp) {
            var re = new RegExp(regexp);
            return this.optional(element) || re.test(value);
        });

 $('#validateForm').validate({
     rules: {
         product: {
             required: true,
             term: {regex: /^\s*$/}
         }
     },
     messages: {
         product: {
             required: "A text is much",
             term: "Please avoid spaces"
         },
     },  

     showErrors: function (errorMap, errorList) {

         $.each(this.successList, function (index, value) {
             $('#'+value.id+'').popover('destroy');
         });

         $.each(errorList, function (index, value) {

             $('#'+value.element.id+'').attr('data-content',value.message).popover({
                 placement: 'top',
                 trigger: 'manual'
             }).popover('show');

         });

     }

 }); 
```

发生的情况是，一旦没有空格，弹出框就不会被破坏。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T05:09:06.923

此正则表达式对空格和空字符串都有效。

如果你只想匹配空格，你应该使用这个正则表达式：`/^\s+$/`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T15:22:45.827

声明的结构`rules`如下...

```
rules: {                       // <- rules:
    field_name: {              // <- name attribute of field                   
        rule_name: parameter,  // <- rule: parameter
        required: true,   // example 1
        min: 30           // example 2
    }
}, 
```

现在你的代码：

```
rules: {
    product: {
        required: true,
        term: {regex: /^\s*$/}
    }
}, 
```

究竟`term`应该是什么？为什么在`regex`里面`term`？

*   如果`term`是规则，则不能将规则 ( `regex`) 嵌套在规则 ( `term`) 中。
*   `term``rule` [根据文档](http://docs.jquery.com/Plugins/Validation#List_of_built-in_Validation_methods)，它不是“内置” 。
*   `term`根据您的代码，也不是“自定义”规则。
*   如果`term`是字段`name`，则不能将字段 () 嵌套在字段 ( `term`) 内`product`。

假设你的正则表达式是正确的，它应该是这样的......

```
rules: {
    product: {
        required: true,
        regex: /^\s*$/
    }
}, 
```

另外，请记住，如果您的自定义方法返回`true`，则该字段验证，如果返回`false`，该字段将验证失败并显示错误。

# r - 将两个命名向量与矩阵中的缺失值组合起来

> ID：16089727
> 
> 赞同：1
> 
> 时间：2013-04-18T17:41:12.960
> 
> 标签：r, matrix

我有一个命名向量 x：

```
 x <- seq(10, 80, 10)
names(x) <- month.abb[1:8] 
```

...和一个命名向量 y：

```
 y <- seq(10, 110, 10)
names(y) <- month.abb[2:12] 
```

我需要将 x 和 y 组合在一个矩阵中。对于 x 或 y 中缺失的月份，值应为 0（不是 NA）。这是我需要的矩阵：

```
xy <- matrix(c(c(seq(10, 80, 10), 0, 0, 0, 0), c(0, seq(10, 110, 10))), nrow = 2, ncol = 12, byrow = TRUE,
             dimnames = list(c("x", "y"),
                             month.abb)) 
```

我无法以编程方式将 x 和 y 组合成一个矩阵。请问有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T17:49:34.690

`rbind.fill.matrix`从“plyr”包中尝试：

```
library(plyr)
temp <- rbind.fill.matrix(t(x), t(y))
temp[is.na(temp)] <- 0
temp
#      Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec
# [1,]  10  20  30  40  50  60  70  80   0   0   0   0
# [2,]   0  10  20  30  40  50  60  70  80  90 100 110 
```

* * *

坚持使用基础 R，也可以只使用以下内容：

```
A <- matrix(0, ncol = 12)
colnames(A) <- month.abb
temp <- list(x, y)
do.call(rbind, 
        lapply(seq_along(list(x, y)), function(z) {
          A[, names(temp[[z]])] <- temp[[z]]
          A
        }))
#      Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec
# [1,]  10  20  30  40  50  60  70  80   0   0   0   0
# [2,]   0  10  20  30  40  50  60  70  80  90 100 110 
```

# c++11 - 为什么局部变量的 const-ness 会抑制返回值的移动语义？

> ID：16089730
> 
> 赞同：15
> 
> 时间：2013-04-18T17:41:28.763
> 
> 标签：c++11, return, constants, move-semantics, rvalue-reference

```
struct STest : public boost::noncopyable {
    STest(STest && test) : m_n( std::move(test.m_n) ) {}
    explicit STest(int n) : m_n(n) {}
    int m_n;
};

STest FuncUsingConst(int n) {
    STest const a(n);
    return a;
}

STest FuncWithoutConst(int n) {
    STest a(n);
    return a;
}

void Caller() {
    // 1\. compiles just fine and uses move ctor
    STest s1( FuncWithoutConst(17) );

    // 2\. does not compile (cannot use move ctor, tries to use copy ctor)
    STest s2( FuncUsingConst(17) );
} 
```

上面的示例说明了在 C++11 中，正如在 Microsoft Visual C++ 2012 中实现的那样，函数的内部细节如何修改其返回类型。直到今天，我的理解是返回类型的声明是程序员需要知道的，以了解如何处理返回值，例如，当作为参数传递给后续函数调用时。**不是这样。**

我喜欢`const`在适当的地方制作局部变量。它帮助我整理思路并清晰地构建算法。但请注意返回已声明的变量`const`！即使不再访问该变量（`return`毕竟执行了一条语句），并且即使声明的变量`const`早已超出范围（参数表达式的评估已完成），它也无法移动，因此将被复制（如果无法复制，则编译失败）。

这个问题与另一个问题有关，[移动语义和返回常量值](https://stackoverflow.com/questions/7138780/move-semantics-returning-const-values)。不同之处在于，在后者中，函数被声明为返回一个`const`值。在我的示例中，`FuncUsingConst`声明返回一个 volatile 临时变量。然而，函数体的实现细节会影响返回值的类型，并决定返回值是否可以用作其他函数的参数。

**这种行为是否符合标准？**
**这怎么能算有用呢？**

额外问题：考虑到调用和实现可能在不同的翻译单元中，编译器如何在编译时知道差异？

* * *

编辑：试图改写这个问题。

一个函数的结果怎么可能比声明的返回类型更多？函数声明不足以确定函数返回值的行为，这似乎完全可以接受吗？对我来说，这似乎是 FUBAR 的一个例子，我只是不确定是否应该责怪标准或微软的实施。

作为被调用函数的实现者，不能指望我知道所有的调用者，更不用说监控调用代码的每一个微小变化。另一方面，作为调用函数的实现者，我不能依赖被调用函数不返回一个恰好在函数实现范围内声明为 const 的变量。

函数声明是一个契约。现在值多少钱？我们在这里讨论的不是语义等价的编译器优化，比如复制省略，这很好，但不会改变代码的含义。无论是否调用了 copy ctor 都会改变代码的*含义*（甚至会破坏代码到无法编译的程度，如上图所示）。要理解我在这里讨论的尴尬，请考虑上面的“奖金问题”。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-18T18:20:37.343

> 我喜欢在适当的地方将局部变量设为 const。它帮助我整理思路并清晰地构建算法。

这确实是一个很好的做法。`const`尽可能使用。但是，在这里，您不能（如果您希望您的`const`对象被移动）。

`const`在函数中声明一个对象的事实是，只要对象还活着，*就不会改变对象的状态——换句话说，在调用它的析构函数之前永远不会改变。*甚至在它的析构函数被调用*之前。*只要它还活着，`const`对象的状态就不会改变。

但是，在这里，您以某种方式期望该对象在它因超出范围而被破坏之前被移动，并且*移动***正在改变状态**。你不能从一个`const`物体上移动——即使你不再使用那个物体也是如此。

但是，您*可以*做的是创建一个非`const`对象并仅通过`const`绑定到该对象的引用在您的函数中访问它：

```
STest FuncUsingConst(int n) {
    STest object_not_to_be_touched_if_not_through_reference(n);
    STest const& a = object_not_to_be_touched_if_not_through_reference;

    // Now work only with a

    return object_not_to_be_touched_if_not_through_reference;
} 
```

通过一些纪律，您可以轻松地强制执行函数在创建后不应修改该对象的语义 - 除了在返回时允许从该对象移动。

**更新：**

正如[balki](https://stackoverflow.com/users/463758/balki)在评论中所建议的那样，另一种可能性是将常量引用绑定到非常量临时对象（根据第 12.2/5 节，其生命周期将延长），并`const_cast`在返回时执行 a ：

```
STest FuncUsingConst(int n) {
    STest const& a = STest();

    // Now work only with a

    return const_cast<STest&&>(std::move(a));
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T19:51:27.343

> 如果对象的复制/移动构造函数 [...] 被隐式 odr 使用并且特殊成员函数不可访问，则程序是非良构的

-- n3485 C++ 标准草案 [class.copy]/30

我怀疑您的问题出在 MSVC 2012 上，而不是 C++11 上。

这段代码，即使没有调用它，也不是合法的 C++11：

```
struct STest {
  STest(STest const&) = delete
  STest(STest && test) : m_n( std::move(test.m_n) ) {}
  explicit STest(int n) : m_n(n) {}
  int m_n;
};

STest FuncUsingConst(int n) {
  STest const a(n);
  return a;
} 
```

因为没有合法的方法可以`a`变成返回值。虽然可以省略返回值，但省略返回值并不会消除复制构造函数存在的要求。

如果 MSVC2012 允许`FuncUsingConst`编译，则违反 C++11 标准。

# python - 没有for循环的行、列赋值

> ID：16089737
> 
> 赞同：3
> 
> 时间：2013-04-18T17:41:52.423
> 
> 标签：python, numpy

我编写了一个小脚本，通过知道它们的行和列坐标将值分配给 numpy 数组：

```
gridarray = np.zeros([3,3])
gridarray_counts = np.zeros([3,3])

cols = np.random.random_integers(0,2,15)
rows = np.random.random_integers(0,2,15)
data = np.random.random_integers(0,9,15)

for nn in np.arange(len(data)):
    gridarray[rows[nn],cols[nn]] += data[nn]
    gridarray_counts[rows[nn],cols[nn]] += 1 
```

实际上，然后我知道在同一个网格单元中存储了多少值以及它们的总和是多少。但是，在长度为 100000+ 的数组上执行此操作会变得非常慢。有没有不使用for循环的另一种方法？

类似的方法可能吗？我知道这还不行。

```
gridarray[rows,cols] += data
gridarray_counts[rows,cols] += 1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T17:59:09.677

我会使用`bincount`这个，但现在 bincount 只需要 1darrays，所以你需要编写自己的 ndbincout，比如：

```
def ndbincount(x, weights=None, shape=None):
    if shape is None:
        shape = x.max(1) + 1

    x = np.ravel_multi_index(x, shape)
    out = np.bincount(x, weights, minlength=np.prod(shape))
    out.shape = shape
    return out 
```

然后你可以这样做：

```
gridarray = np.zeros([3,3])

cols = np.random.random_integers(0,2,15)
rows = np.random.random_integers(0,2,15)
data = np.random.random_integers(0,9,15)

x = np.vstack([rows, cols])
temp = ndbincount(x, data, gridarray.shape)
gridarray = gridarray + temp
gridarray_counts = ndbincount(x, shape=gridarray.shape) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T17:50:41.147

你可以直接这样做：

```
gridarray[(rows,cols)]+=data
gridarray_counts[(rows,cols)]+=1 
```

# c# - 无法测试 SmtpClient.TimeOut

> ID：16089745
> 
> 赞同：2
> 
> 时间：2013-04-18T17:42:35.190
> 
> 标签：c#, c#-4.0

我正在使用 Visual Studio 2010、.NET 4.0，我正在尝试测试 SMTPClient.TimeOut 属性并实际让它抛出 SmtpException。但是，即使我将 TimeOut 属性设置为 1 毫秒，它仍然会发送电子邮件，看起来好像是在 1 毫秒内发送，但我发现有趣的是，当我检查对象时，我可以看到一个名为 timedOut 的私有成员变量设置为true，表明它实际上已超时。

![在此处输入图像描述](https://i.stack.imgur.com/94ADo.png)

这是我的代码：

```
try
{
            MailMessage emailMsg = new MailMessage(this.EmailFrom, this.EmailTo, this.EmailSubject, msg);
            //SmtpClient emailClient = new SmtpClient(this.EmailServer);
            SmtpClient emailClient = new SmtpClient();
            emailClient.Credentials = new System.Net.NetworkCredential("username", "password");

                emailMsg.IsBodyHtml = true;
                emailClient.Timeout = Properties.Settings.Default.SMTPTimeOut;
                emailClient.Timeout = 1;

                emailClient.Send(emailMsg);
                sendingEmail = true;

            return sendingEmail;
        }
        catch (Exception ex)
        {
              // Handle time out exception here.
         } 
```

有没有人见过这个或知道更好的测试方法？现在我正在打gmail的smtp。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T17:48:02.027

我相信你可以使用telnet。打开 telnet 并将该 ip 用作您的 smtp 服务器。它不会连接，所以它应该超时。没有测试过这个。

[http://technet.microsoft.com/en-us/library/aa995718(v=exchg.65).aspx](http://technet.microsoft.com/en-us/library/aa995718(v=exchg.65).aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T18:07:35.267

为了最终测试它是否有效，我在本地机器上编写了一个非常简单的 TCP 服务器控制台应用程序。我使用了以下教程来了解如何做到这一点： http: [//bit.ly/XoHWPC](http://bit.ly/XoHWPC)

通过创建这个控制台应用程序，我能够使用发送电子邮件并将其指向我的本地计算机 (127.0.0.1,25) 的服务。TCP Server 控制台应用程序接受了连接，但我从未发回响应。

我发送电子邮件的服务按预期成功超时，因此我最终可以验证它是否正常工作。这是教程中的 TCP Server Console 应用程序片段，作为指南。如果您有时间，我建议您阅读整个教程。

**程序.cs**

```
using System;
using System.Text;
using System.Net.Sockets;
using System.Threading;
using System.Net;

namespace TCPServer
{
    class Program
    {
        static void Main(string[] args)
        {

            Server server = new Server();
        }
    }
} 
```

**服务器.cs**

```
using System;
using System.Text;
using System.Net.Sockets;
using System.Threading;
using System.Net;

namespace TCPServer
{
    public class Server
    {

        private TcpListener tcpListener;
        private Thread listenThread;

        public Server()
        {
            this.tcpListener = new TcpListener(IPAddress.Any, 25);
            this.listenThread = new Thread(new ThreadStart(ListenForClients));
            this.listenThread.Start();
        }

        private void ListenForClients()
        {
            this.tcpListener.Start();

            while (true)
            {
                //blocks until a client has connected to the server
                TcpClient client = this.tcpListener.AcceptTcpClient();

                //create a thread to handle communication 
                //with connected client
                Thread clientThread = new Thread(new ParameterizedThreadStart(HandleClientComm));
                clientThread.Start(client);
            }
        }

        private void HandleClientComm(object client)
        {
            TcpClient tcpClient = (TcpClient)client;
            NetworkStream clientStream = tcpClient.GetStream();

            byte[] message = new byte[4096];
            int bytesRead;

            while (true)
            {
                bytesRead = 0;

                try
                {
                    //blocks until a client sends a message
                    bytesRead = clientStream.Read(message, 0, 4096);
                }
                catch
                {
                    //a socket error has occured
                    break;
                }

                if (bytesRead == 0)
                {
                    //the client has disconnected from the server
                    break;
                }

                //message has successfully been received
                ASCIIEncoding encoder = new ASCIIEncoding();
                System.Diagnostics.Debug.WriteLine(encoder.GetString(message, 0, bytesRead));
            }

            tcpClient.Close();
        }
    }
} 
```

# facebook-apps - 创建了一个应用程序来自动将 wordpress 博客帖子发布到 facebook 页面 - 只有我可以看到帖子

> ID：16089746
> 
> 赞同：1
> 
> 时间：2013-04-18T17:42:36.183
> 
> 标签：facebook-apps, facebook-app-requests

我为我的网站 runtheworlds.com 在 Wordpress 中安装了一个名为 Simple Facebook Connect 的插件。我必须创建一个应用程序，将设置放入插件中，它应该可以让我在我的 facebook 粉丝页面上发布博客文章： [https ://www.facebook.com/runtheworlds](https://www.facebook.com/runtheworlds)

我已经能够看到该帖子——我可以在我的新闻源和实际的 Facebook 粉丝页面上看到它，但没有其他人可以看到它。我检查了设置，它似乎是公开发布的，但除了我之外没有其他人可以看到这些帖子。有什么想法可能导致这种情况吗？

# android - 带有项目和子项目的android listview无法正常工作

> ID：16089748
> 
> 赞同：0
> 
> 时间：2013-04-18T17:42:45.480
> 
> 标签：android, android-listview, hashmap, android-ui, simpleadapter

我有一个数据库，我选择 2 个字符串，一个作为项目，另一个是描述。我正在尝试将这 2 个字符串映射到列表视图项目子项目布局中。以下代码是我到目前为止所尝试的。

```
List<Map<String, String>> data = new ArrayList<Map<String, String>>();
Map<String, String> datum = new HashMap<String, String>(2);
SimpleAdapter adapter = new SimpleAdapter(this, data,
        android.R.layout.simple_list_item_2, 
        new String[] { "item","descr" }, 
        new int[] { android.R.id.text1, android.R.id.text2 });
itemList.setAdapter(adapter);

Cursor cours = MainActivity.mydb.query("sub_menu", null, "cat_id = "
        + menuid + " AND sub_flag = 1", null, null, null, null);

if (cours.moveToFirst()) {
    do {
        datum.put("item", cours.getString(cours.getColumnIndex("sub_label")));
        datum.put("descr", cours.getString(cours.getColumnIndex("sub_description")));
        data.add(datum);
        Log.d("testt", datum.toString());

        adapter.notifyDataSetChanged();

    } while (cours.moveToNext());
} 
```

现在的问题是，它将向列表视图添加 5 个具有相同值的条目，这些值是从数据库中选择的最后一行，这不是什么。知道如何解决这个问题吗？

编辑。在对其进行试验后，我发现我正在覆盖最终具有所有条目的保存值的对象数据。修复就像将基准线的初始化线移动到循环中一样简单。这是最终代码

```
List<Map<String, String>> data = new ArrayList<Map<String, String>>();
        String[] from = new String[] { "rowid", "col_1" };
        int[] to = new int[] { android.R.id.text1, android.R.id.text2 };

        Cursor cours = MainActivity.mydb.query("sub_menu", null, "cat_id = "
                + menuid + " AND sub_flag = 1", null, null, null, null);

        if (cours.moveToFirst()) {

            do {
                Map<String, String> datum = new HashMap<String, String>(2);
                datum.put("rowid",
                        cours.getString(cours.getColumnIndex("sub_label")));
                datum.put("col_1", cours.getString(cours
                        .getColumnIndex("sub_description")));
                data.add(datum);
            } while (cours.moveToNext());

        }
        SimpleAdapter adapter = new SimpleAdapter(this, data,
                android.R.layout.simple_list_item_2, from, to);
        itemList.setAdapter(adapter); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T18:22:30.973

定制`ListView`和使用`CursorAdapter` [这里](http://www.mysamplecode.com/2012/07/android-listview-cursoradapter-sqlite.html)有一个很好的例子可以帮助你。

# c++ - VS 2008 C++：如何将其他文件复制到输出文件夹？

> ID：16089749
> 
> 赞同：0
> 
> 时间：2013-04-18T17:42:52.277
> 
> 标签：c++, visual-studio, visual-c++

在 MS Visual Studio 2008 中，很容易将 C# 项目中的非 C# 文件（例如 XML 文件）复制到输出文件夹。只需将文件添加到项目中，在解决方案资源管理器中选择它，然后选择属性，然后有一个名为“复制”的选项。您可以选择“不复制”、“复制”和“如果更新就复制”。

但在 C++ 中，这并不容易，可能是因为在早期版本的 Microsoft 编译器中从来没有类似的东西。我唯一的选择是使用老式 DOS 命令行命令添加构建后事件，以将文件复制到目标路径。如果目标文件已经存在，我无法比较输入文件和目标文件的日期。

我尝试将文件添加到我的 C++ 项目中，就像在 C# 项目中一样。文件的选项包括自定义构建步骤。我尝试将复制命令放在那里，但它不起作用。

是否有某种我不知道的方法可以获得与 C# 中相同的结果：一种很好、干净、简单的方法来指定文件从项目文件夹复制到输出文件夹（如果它比文件更新）在输出文件夹中？

非常感谢！

罗伯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T18:04:01.193

在您的构建后事件中，您可以使用 robocopy 而不是基本的复制命令（它更智能，可以在某种程度上管理文件修改日期，例如`robocopy /xo <...>`）

请参阅[http://technet.microsoft.com/en-us/library/cc733145%28v=WS.10%29.aspx](http://technet.microsoft.com/en-us/library/cc733145%28v=WS.10%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T13:57:45.970

xcopy "源文件名" "目标" /D /Y 应该这样做。在命令窗口中进行测试时，需要使用反斜杠而不是正斜杠。

# android - 在 Android 运行时更改语言

> ID：16089750
> 
> 赞同：2
> 
> 时间：2013-04-18T17:42:59.727
> 
> 标签：android, runtime

我必须在 Android 的运行时更改语言（是的，我知道这不是一个好的行为，但这是一个要求......）。

所以我有一个基础课，每个活动都从它延伸出来。该类具有以下功能：

```
public static void changeLanguage(Context context) {
    Resources res = context.getResources();
    /*
     * Change locale settings in the app.
     */
    DisplayMetrics dm = res.getDisplayMetrics();

    /*
     * Store and load data in this preferences
     */
    android.content.res.Configuration conf = res.getConfiguration();
    String[] localArray = res.getStringArray(R.array.language_short_array);
    if (localArray != null) {
        SharedPreferences settings = context.getSharedPreferences(
                MyService.APP_ID, MODE_PRIVATE);
        conf.locale = new Locale(localArray[settings.getInt(
                PREFERED_LANGUAGE_KEY, 0)]);
        res.updateConfiguration(conf, dm);
    }
} 
```

我会在 onCreate 中调用这个方法：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    changeLanguage(this);
} 
```

这是在超类中。我的活动从它扩展并首先调用 super.onCreate。在这个调用之后，他们设置了他们的布局并初始化了他们的设置......

我认为我的代码行会成功。但我有以下问题：有时，活动会改变语言，有时不会！

如果我在它上面设置了一个调试断点，并且在程序暂停后我按下继续，一切正常。所以我认为，在某些情况下，我的应用程序“足够慢”，语言会正确改变，而如果应用程序太快，语言不会改变......

我的问题有什么解决办法吗？我如何确定我的语言会随时正确更改？

非常感谢！

编辑：这是一个从我的超类扩展的类的示例

```
public class MainMenuActivity extends BaseActivity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_start);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T22:01:09.430

`changeLanguage(this);`仅在语言更改或加载应用程序时才需要调用..`res.updateConfiguration(conf, dm);`更新全局配置并且特定于您的应用程序实例而不是您的活动实例。

当您更改`locale`in 时，`Activity`您必须重新创建它`Activity`才能看到您的语言更改。这可以通过强制改变方向然后强制它返回来轻松完成，如下所示：

```
setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);
setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);
setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_SENSOR); 
```

如果您在更改语言后回击，您将看到旧语言，因为`onCreate`未调用。您必须检测到`onResume`语言已更改并强制重新创建`Activity`.

-= 编辑 =-

使用屏幕方向重新加载`Activity`已被证明在某些设备上有点错误。我现在正在使用它来重新加载当前`Activity`：

```
public static void resetScreen(Activity activity) {
    if (activity != null) {
        if (Build.VERSION.SDK_INT >= 11) {
            activity.recreate();
        } else {
            Intent intent = activity.getIntent();
            activity.overridePendingTransition(0, 0);
            intent.addFlags(Intent.FLAG_ACTIVITY_NO_ANIMATION);
            activity.finish();

            activity.overridePendingTransition(0, 0);
            activity.startActivity(intent);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T17:51:29.620

我认为您需要发布一个扩展超类的 Activity 示例。不过，在 onCreate() 中调用 changeLanguage 对我来说似乎很可疑。这只会在应用程序首次初始化时运行。要在您的应用程序加载后更改语言，您必须停止它并重新创建它。

# javascript - 淘汰赛“为”绑定？

> ID：16089752
> 
> 赞同：10
> 
> 时间：2013-04-18T17:43:12.143
> 
> 标签：javascript, knockout.js, knockout-2.0

**原始问题**

是否有人拥有或知道用于淘汰赛的绑定，该绑定将允许类似于 for 循环的行为？我可以让 foreach 做我想做的事，但如果我不必那样做就好了。

**编辑 2**

我正在尝试根据用户所做的选择创建表行。在某些情况下，我需要 x 行，其中 x 是数组的长度，有时 x 表示显示 n 个数组所需的最大行数。

例如：image1 是基于 4 个不同的数组构建的，它们的大小都不同 image2 是从同一个数组构建的，在这种情况下是双倍的。

![在此处输入图像描述](https://i.stack.imgur.com/yXMBo.png) ![在此处输入图像描述](https://i.stack.imgur.com/YPgQc.png)

```
<div data-bind="if: selectedTab()">
<table>
<thead>
  <tr>
    <td>
      <div class="a-i-post-All"></div>
    </td>
    <!-- ko foreach:$root.selectedTab().races-->
    <td>
      <input type="checkbox" />
    </td>
    <!-- /ko -->
  </tr>
</thead>
<tbody data-bind="foreach: selectedTab().runners"> // <-- This is an empty array created by the max number of Runners in the selectedTabs array of Races
  <tr>
    <td>
      <div class="a-i-post"></div>
    </td>
    <!-- ko foreach:$root.selectedTab().races-->
    <td>
      <!-- ko if: Runners.length > $parentContext.$index()-->
      <input type="checkbox" />
      <!-- /ko -->
    </td>
    <!-- /ko -->
  </tr>
</tbody> 
```

以上工作正常并创建了我想要的，但我不喜欢将 selectedTab.runners 从一个数字变成一个空数组，只是为了让它循环 n 次来创建行。我愿意接受建议。**注意**截至我最初发布这个问题时，我已经对这段代码进行了相当大的修改，现在只发生了一次与我最初的问题相关的事件。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-19T00:01:24.740

我的[重复](https://github.com/mbest/knockout-repeat)绑定正是这样做的。

```
<tbody>
  <tr data-bind="repeat: { foreach: selectedTab().runners, index: '$runner' }">
    <td>
      <div class="a-i-post"></div>
    </td>
    <td data-bind="repeat: selectedTab().races">
      <!-- ko if: $item().Runners.length > $runner -->
      <input type="checkbox" />
      <!-- /ko -->
    </td>
  </tr>
</tbody> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-04-21T17:16:01.057

您可以创建一个数组对象：

```
 <!-- ko foreach: new Array(the_length_you_need) -->
       <span>&#9733;</span>
  <!-- /ko --> 
```

这将为**the_length_you_need**次打印一颗星

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-18T20:17:38.960

你可以这样做：

```
<div data-bind="foreach: [0,0,0,0,0]">
    <span data-bind="text: $index"></span>
</div> 
```

你会得到元素0-4。

但是，正如克里斯在评论中所说，这似乎很奇怪。告诉我们您要做什么，我们会为您指明正确的方向。

# facebook - 如何从单个应用程序中获取 Facebook 喜欢的数量？

> ID：16089754
> 
> 赞同：1
> 
> 时间：2013-04-18T17:43:16.890
> 
> 标签：facebook, facebook-like, facebook-javascript-sdk

我已经进行了一些搜索，但似乎无法找到答案。我想知道有多少 Facebook 喜欢来自特定应用程序，而不是整个粉丝页面本身。

设置：

我有一个我管理的公司的“粉丝页面”。该公司不时进行促销活动，通常通过附加到粉丝页面的 FB 应用程序进行。这些应用程序的类型各不相同，但通常只是托管在 heroku 上的一个页面选项卡应用程序，带有类似的门。

显然，点赞门上的点赞会导致粉丝页面的点赞。有没有办法找出有多少喜欢来自特定的喜欢门/页面标签应用程序？FB Insights 显示“喜欢的来源”，但我没有找到任何列出单个应用程序的内容。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T15:27:07.583

尽管`page_fans_by_like_source_unique`您可以从中获得很多指标，但目前还没有一个可以区分选项卡。

我目前使用的方法是在我的应用程序端进行跟踪，将信息保存到数据库中，因为喜欢和不同的事件都会使用新的签名请求刷新应用程序 iframe。逻辑是[@dleavitt 在这里描述的逻辑](https://stackoverflow.com/a/7355522/445887)

资料来源：http: [//developers.facebook.com/docs/reference/api/insights/#like_sources](http://developers.facebook.com/docs/reference/api/insights/#like_sources)

# android - 使用带有 min sdk-8 的 MapFragment

> ID：16089755
> 
> 赞同：3
> 
> 时间：2013-04-18T17:43:24.457
> 
> 标签：android, android-mapview, google-maps-api-2

我希望在我的应用程序中使用谷歌地图。为此，我正在使用 MapFragment。MapFragment 需要最低 sdk 版本 11。但我希望最低 sdk 版本为 8，以便我的应用程序适用于 Android 2.2 及更高版本。当我使用 MapView 时，我没有得到地图。我只是得到地图中的网格。我该如何解决这个问题？需要帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T17:47:44.657

而不是使用地图片段`SupportMapFragment`

[在这里](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/SupportMapFragment)阅读

并参考[这个](https://stackoverflow.com/a/14083334/792232)SO answer。正如 Jeo Malin 所说，不要使用`MapView`它已被弃用。使用 MapV2

[在这里](https://developers.google.com/maps/documentation/android/)学习。

# php - 使用函数创建一组变量 php

> ID：16089758
> 
> 赞同：-1
> 
> 时间：2013-04-18T17:43:35.693
> 
> 标签：php, function, variables, scope

我正在尝试创建一个函数来创建一组像这样的数组的变量

```
function breakDownPOSTArray($count, $fields) {
    $repeat = 1;
    $num = 0;   
    while ($repeat <= $count) {
        $a = "array" . $repeat;
        $$a = array_slice($_POST, $num, $fields);
        $repeat ++;
        $num += 4;
    } 
```

我希望能够在函数之外使用这些变量。就目前而言，我在函数外部声明变量并将它们全局拉入，但感觉就像它正在击败对象，我重复自己太多了。

有没有更好的方法来实现我想要的而不清除函数外部的变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T17:47:22.470

您可以做的是返回一个数组和`extract()`函数的返回值。

```
function breakDownPOSTArray($count, $fields) {
    $repeat = 1;
    $num = 0;
    $array = array();
    while ($repeat <= $count) {
        $array["array" . $repeat] = array_slice($_POST, $num, $fields);
        $repeat++;
        $num += 4;
    }
    return $array;
}

// To call it:
extract(breakDownPOSTArray(..., ...)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T17:45:23.653

不，函数中定义的变量是在堆栈中创建的，并且在函数返回后它们不再存在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T17:50:47.153

假设你有充分的理由来完成你正在寻找的东西......

改变

```
$a = "array" . $repeat;
$$a = array_slice($_POST, $num, $fields); 
```

到

```
$GLOBALS["array" . $repeat] = array_slice($_POST, $num, $fields); 
```

...感觉就像我对一个复杂的设计，但我看不到足够的代码来肯定地说。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T17:58:24.133

您可以将变量声明为全局变量，例如：

```
$sxml = new SimpleXMLElement('<somexml/>');

function foo(){
    global $sxml;
    $child = $sxml->addChild('child');
}

foo(); 
```

来源： [无法访问函数内的全局变量](https://stackoverflow.com/questions/5449526/cant-access-global-variable-inside-function)

# vba - 更新记录集时“超出系统资源”，可能在其他点

> ID：16089759
> 
> 赞同：2
> 
> 时间：2013-04-18T17:43:38.643
> 
> 标签：vba, ms-access, excel

我在使用 Excel 2010 前端、Access 2010 后端的应用程序时遇到间歇性问题。它同时被 5-10 个用户使用。最近，用户开始间歇性地收到以下错误：

`Run-time error '3035': System resource exceeded.`

有时调试按钮是灰色的，所以我无法跳转到导致错误的代码，但是当它可以点击时，它会将我带到以下代码：

```
 'Open connection to back end DB
 Set db = OpenDatabase(dbPath)

 'Open a recordset of a table
 Set RS = db.OpenRecordset(Tbl)

 'loop through rows in a 2D array
 For i = FR To LR
  RS.AddNew
   'loop through columns of the 2D array
   For j = 1 to LC
    'set values for various fields in the new record, using values from the array
   Next
  RS.Update
 Next 
```

在这里，`RS.Update`被标记为导致错误的行。

奇怪的是，这个问题来来去去。用户在尝试提交某个数据集时会反复收到，然后，几个小时后，当他们再次尝试提交相同的数据集时，操作成功且没有错误。同样令人困惑的是，有时调试按钮可用，有时不可用。

一个问题可能是 Access 后端的大小；它目前约为 650 MB，直到它增长到大约 600 MB，我们才开始收到这些消息。

关于可能导致这种情况的任何想法？各种谷歌点击表明，当连接查询具有太多字段时，有时会发生此问题，但这只是表的记录集，而不是连接查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T04:03:25.543

啊，我认为这是当您向无法跟上锁定文件管理的后端数据库写入大量内容时弹出的奇怪错误之一。

解决方案是确保从每个客户端保持与后端数据库的连接打开，并保持该连接直到关闭客户端。
只需打开一个记录集到一个表（比如一个只有一条记录的虚拟表），并保持该记录集打开，直到您关闭应用程序。

在资源方面，保持此连接打开不会对性能或内存消耗产生不利影响，但它将确保每次打开然后关闭连接时不会连续创建/删除锁定文件。

保持该连接打开也将大大[提高您的数据访问的性能](http://immitev.blogspot.hk/2005/01/where-is-ole-db-connection-pooling_28.html)。

**编辑：**

使用记录集时应该更加明确，并准确指定所需的操作模式：

```
Set RS = db.OpenRecordset(Tbl, dbOpenTable, dbFailOnError) 
```

或者，如果您只附加数据，速度会更快：

```
Set RS = db.OpenRecordset(Tbl, dbOpenTable, dbAppendOnly + dbFailOnError) 
```

还要确保在完成附加数据后关闭记录集！：

```
 Set RS = db.OpenRecordset(Tbl, dbOpenTable, dbAppendOnly + dbFailOnError)
    With RS
        'loop through rows in a 2D array
        For i = FR To LR
           .AddNew
              'loop through columns of the 2D array
              For j = 1 To LC
                 'set values for various fields in the new record, 
                 'using values from the array
              Next
           .Update
        Next
        .Close
    End With
    Set RS = Nothing 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-19T03:07:01.837

**短篇小说** 我的 3035 错误是由一个没有主键的文件的 add.new 引起的。

# 编写分配了主键的文件副本并替换无键文件似乎已解决了该问题。

**长话短说** 我在添加到现有后端表的 Add.New 时遇到了 3035 错误，记录超过 81,000 条。在网上搜索想法并提出干货后，我思考了可能的问题。

我压缩/修复了后端文件没有影响。然后决定检查文件设计。事实证明没有分配主键。

将主键分配给自动编号 ID 字段会导致相同的 3035 错误！所以我将数据结构复制到一个新文件中，为新文件分配了一个主键，然后将原始文件的查询追加到新文件中。最后我重命名了文件。

使用新文件似乎正在工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-12T22:36:50.467

这是由于可用虚拟内存 (VM) （即交换磁盘）用完造成的。一个 32 位应用程序不能使用超过 2gb 的空间，由于某种原因，Access 使用了大量的虚拟机，当它需要更多并且无法获得任何虚拟机时，您就会耗尽系统资源。

解决方案是确保您的 VM 至少是 RAM 的 4 倍，并至少每天重新启动您的 PC，只有这样才能从其他应用程序留下的垃圾中清除 VM。

你永远不会在 32 位操作系统上遇到这个问题，现在只有 64 位操作系统才会发生这种情况。

# excel - 在 Excel 中求平均值时将 -ve 数字转换为零

> ID：16089760
> 
> 赞同：1
> 
> 时间：2013-04-18T17:43:39.337
> 
> 标签：excel

在 Excel 中编写平均函数时，如何将 -ve 数字转换为 0？

我有一列混合了 +ve 和 -ve 值，并且希望在运行平均函数时将 -ve 值转换为 +ve。

这是我到目前为止所做的事情的背景。理想情况下，我更喜欢不涉及 VBA 使用的情况。

> =平均（C：C）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-18T18:01:08.077

`=AVERAGE(IF(LEN(C:C)>0,ABS(C:C),""))`如果你想把 -ve 变成 +ve，你可以直接输入，然后平均它们。请记住，您需要`Ctrl+Shift+Enter`在输入此单元格时点击，以便将其作为数组公式执行。

要将 -ve 变为 0，然后对其进行平均，请使用它`=AVERAGE(IF(LEN(C:C)>0,IF(C:C<0,0,C:C),""))`并作为数组公式输入（Ctrl+Shift+Enter）

要回复上述评论，您只需替换`AVERAGE`为`STDEV.P`即可获得标准偏差。公式的另一部分只是检查单元格，如果它是空白的则忽略它，如果它是负数则将其变为 0，或者如果它 >=0 则只传递它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-18T17:54:57.640

要忽略负数，请使用

```
=AVERAGEIF(C:C,">0") 
```

要将零点用作平均值的一部分，请使用：

```
=SUMIF(C:C,">0")/COUNT(C:C) 
```

您从中获得平均值的范围在哪里`C:C`（从您给定的示例中）。

* * *

为了回应 grandocu 的建议，要获得 STDEV，您可以使用数组公式：

```
=STDEV.P(IF(C:C>0,C:C,0)) 
```

根据您关注的记录数量，我还可能建议创建一个新列，其中包含与您的原始日期相关的值。即，如果您有一列`C:C`具有正值和负值，请在列中输入`D:D`如下公式：

```
=IF(C2>0,C2,0) 
```

然后，改为在 D 列上运行您的平均值/标准差计算。这将有助于避免使用复杂/不太常见的公式，并且在查看数据表时可以在视觉上使事情更容易理解。

# windows - 自定义外壳中 Windows 平板电脑上的 Windows 按钮

> ID：16089765
> 
> 赞同：0
> 
> 时间：2013-04-18T17:43:56.737
> 
> 标签：windows, windows-8, tablet, autohotkey

我正在为 Windows 8 平板电脑开发自定义外壳。我想拦截平板电脑窗口按钮按下事件。我不知道该怎么做。我目前正在使用 c#，但愿意考虑任何可能的解决方案。我试过自动热键，但平板电脑按钮不能与键盘窗口键相同。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T17:49:44.527

我依稀记得读过 Windows 8 需要以管理员权限运行。你能试试吗？

# java - 通用对象列表的 Guice 绑定

> ID：16089767
> 
> 赞同：7
> 
> 时间：2013-04-18T17:44:01.153
> 
> 标签：java, guice

我需要告诉 guice 我想要将 OneFoo 和 TwoFoo 作为 Foo 列表注入 Bar 的绑定语句是什么？这里的设置是一个责任链。现在我有两个实现，但 Bar 不需要知道这一点。

```
@Inject
Bar(List<Foo> foos) {...}
...
class OneFoo implements Foo {
    @Inject
    OneFoo(...) {...}
...
class TwoFoo implements Foo {
    @Inject
    TwoFoo(...) {...} 
```

但我正在努力使用 Types、TypeLiteral 等来配置两个 Foo 实现将提供给 Bar 的绑定。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-23T20:44:53.210

`@Provides`如果您在编译时知道绑定，则可以在模块中使用方法：

```
class MyModule extends AbstractModule() {
    @Override
    protected void configure() {
        // ...
    }

    @Provides
    @Inject
    public List<Foo> foos(OneFoo one, TwoFoo two) {
        return Arrays.asList(one, two);
    }
} 
```

您可以`foos`根据需要展开 的参数列表。一个类似但更详细的方法是使用 Provider：

```
protected void configure() {
    bind(new TypeLiteral<List<Foo>>() {})
       .toProvider(FooListProvider.class);
}

static class FooListProvider implements Provider<List<Foo>> {
    @Inject
    Provider<OneFoo> one;
    @Inject
    Provider<TwoFoo> two;

    public List<Foo> get() {
        return Arrays.asList(one.get(), two.get());
    }
} 
```

如果你想要一个注入 OneFoo 和 TwoFoo 的单例列表，你可以添加一个`@Singleton`注解。我建议此时也使列表不可变：

```
@Singleton
@Provides
@Inject
public List<Foo> foos(OneFoo one, TwoFoo two) {
    return Collections.unmodifiableList(Arrays.asList(one, two));
} 
```

另一方面，如果您想要一个未注入 OneFoo 和 TwoFoo 的单例列表，则可以使用 TypeLiteral：

```
@Override
protected void configure() {
    bind(new TypeLiteral<List<Foo>>() {})
        .toInstance(Arrays.asList(new OneFoo(), new TwoFoo()));
} 
```

在这种情况下，我再次建议使列表不可修改。

# java - Basic Java Swing - 在运行时添加带有图标的 JLabels

> ID：16089776
> 
> 赞同：0
> 
> 时间：2013-04-18T17:44:27.317
> 
> 标签：java, swing, user-interface

我正在制作一个包含代表游戏地图的图标的网格，有时需要重新绘制这个网格。我正在从基础开始。这是我开始工作的一些代码

```
 int i = 1;
    while (i < 50) {
            pnlMap.add(new JLabel(String.valueOf(i)));
        i += 1;
    } 
```

现在我希望 JLabels 显示图标，但我无法弄清楚参数的语法`pnl.add()`

我想这就像

`pnlMap.add(new JLabel("").setIcon(new ImageIcon(ClientGUI.class .getResource("/resources/wall.jpg"))));`

你可以猜到这是行不通的。错误：`The method add(Component) in the type Container is not applicable for the arguments (void)`

**如何获取上述代码以添加带有图标的 JLabels？**

（另外说明，这种对象构造叫什么，你只是动态地“添加新的 JLabel”而不是之前初始化它？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T17:47:06.983

与 a 的构造函数不同`JLabel`，该`setIcon`函数不返回任何内容（或返回`void`）。这意味着您的代码看起来有点像这样：

```
pnlMap.add(void); 
```

这就是抛出该错误的原因。

因此，只需对代码稍作修改即可使循环正常工作。

```
int i = 1;
while (i < 50) {
    JLabel label = new JLabel(String.valueOf(i));
    label.setIcon(new ImageIcon(ClientGUI.class .getResource("/resources/wall.jpg")));
    pnlMap.add(label);
    i += 1;
} 
```

**编辑：** 回答您关于`new JLabel()`代码构造的问题。令人惊讶的是，它被称为动态对象构造。

# asp.net - 单击 Add Button ，在 vb.net 中初始化一个字段集

> ID：16089777
> 
> 赞同：1
> 
> 时间：2013-04-18T17:44:30.060
> 
> 标签：asp.net, vb.net, forms

```
<Fieldset>
   <asp:table runat="server">
      <asp:TableRow runat="server">                 
         <asp:TableCell runat="server">
              <asp:DropDownList ID="Mark" runat="server"> </asp:DropDownList>
         </asp:TableCell>
         <asp:TableCell runat="server">
              <asp:DropDownList ID="visit" runat="server">
              </asp:DropDownList>
         </asp:TableCell>
      </asp:TableRow>
    </asp:table>
</Fieldset>

<asp:Button ID="Add" runat="server" Text="Add Rank" OnClick ="Adding" /> 
```

我不知道 onclick="Adding" 方法的代码后面的页面应该做什么。单击“添加”按钮时，我希望再次在表单上生成上述字段集。我如何在 vb.net 中实现这一点？对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T20:33:02.317

将 Fieldset 包含在 Repeater 控件中。将中继器绑定到列表。为要显示的每个附加字段集在列表中添加一个项目。

# c++ - 如何决定我应该使用指针还是常规变量？

> ID：16089778
> 
> 赞同：1
> 
> 时间：2013-04-18T17:44:31.493
> 
> 标签：c++

在 C++ 中，我可以将字段声明为某种类型的常规变量，在构造函数中实例化它，然后再使用它：

```
private:    Foo field;
...

A::A() {
    // upd: likely i instatiate field wrong ways (see comments)
    field = FieldImpl();
}
....
method(field); 
```

或者，我可以使用指针：

```
private:    Foo* field;
...

A::A() {
    field = new FieldImpl();
}

A::~A() {
    delete field;
}

...
method(*field); 
```

声明字段时，如何决定是使用指针还是常规变量？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-18T17:48:07.887

在以下情况下，您可能需要使用指针：

*   被引用的对象可以比父对象更长寿。
*   由于大小，您要确保引用的对象在堆上。
*   指针是从类外部提供的。
*   Null 是一个可能的值。
*   该字段可以动态设置为不同的对象。
*   实际的对象类型是在运行时确定的。例如，该字段可能是指向多个子类中的任何一个的基类指针。

您可能还想使用[智能指针](http://en.wikipedia.org/wiki/Smart_pointer)。

**上面的最后一点适用于您的示例代码。**如果您的字段是 Foo 类型，并且您为其分配了一个 FieldImpl，那么剩下的就是 FieldImpl 的 Foo 部分。这被称为[切片问题](https://stackoverflow.com/questions/274626/what-is-the-slicing-problem-in-c)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-18T17:50:48.213

**正则变量**if

*   `Foo`是类的一个组成部分，即每个实例总是有自己`Foo` *的*
*   `Foo`不是太大（它可以放在堆栈上）。

**指针**如果

*   几个实例可能共享一个`Foo`，
*   可能有些实例`Foo`在某些时候没有，*或者*
*   `Foo`真的很大，应该总是在堆上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T17:47:59.017

C++ 在设计时考虑了自动变量。像 RAII 这样的关键 C++ 习语依赖于自动变量。由于 C++ 的设计决策，使用自动变量比使用指针更简单、更容易。除非您确实需要它们提供的功能，否则不应增加使用指针的复杂性。（如果你必须使用智能指针。）

需要证明复杂性是合理的，在此示例中，您没有显示指针示例中额外复杂性的任何原因，因此您应该使用自动变量。

> 经过 10 年的 C# 和 Java 指针很简单，而常规变量对我来说很复杂 :) 所以应该有更多不使用指针的原因。例如，我猜指针不是处理器缓存

C# 和 Java 的设计与 C++ 不同。它们的语法和运行时旨在使指针成为更简单（或唯一）的方法，并且它们会处理在幕后为您创建的一些问题。试图绕过该语言以避免 Java 和 C# 中的指针会增加复杂性。

此外，C# 和 Java 在更大程度上依赖于多态类型，并且它们没有 C++ 所具有的“不为不使用的东西付费”的政策。多态类型需要指针，但 C# 和 Java 很乐意让您付出代价，即使您不需要，而 C++ 不这样做。

# regex - Perl regex extracting a match using braces

> ID：16089780
> 
> 赞同：0
> 
> 时间：2013-04-18T17:44:43.413
> 
> 标签：regex, perl, filepath

I tested the following code

```
#! /usr/bin/perl 

use strict;
use English;

#this code extracts the current scripts filename 
#by removing the path from the filepath

my $Script_Name = $PROGRAM_NAME;

${Script_Name} =~ s/^.*\\//; #windows path

#${Script_Name} =~ s/^.*\///; #Unix based path

print $Script_Name; 
```

and i don't understand why these braces extract the match without using a /r modifier. can anyone explain why and how this works or point me to some documentation?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T17:56:07.797

你开始有点糊涂了！

牙套没什么区别。`${Script_Name}`与 相同`$Script_Name`。

您的代码首先将脚本文件的整个路径从 复制`$PROGRAM_NAME`到`$Script_Name`.

然后替换删除所有内容，包括最后一个反斜杠，只留下文件名。

如果您想修改一个字符串并将修改结果放入另一个字符串，则将使用`/r`修饰符，因此您可以一步编写代码

```
$Script_Name = $PROGRAM_NAME=~ s/^.*\\//r 
```

# php - Facebook api php按ID选择朋友

> ID：16089784
> 
> 赞同：0
> 
> 时间：2013-04-18T17:44:49.460
> 
> 标签：php, facebook, api, profile, friend

我想使用 facebook api php 获取特定朋友的生日日期。我在变量 $_POST[friend_id] 中有朋友列表的表单传递了朋友的 ID。我正在做这样的事情，但我无法获得朋友数据：

```
$user = $facebook->getUser();
$perms = array('scope' => 'email,user_photos,read_mailbox,friends_birthday,user_birthday,user_likes');

if ($user) {
  try {
    $user_profile = $facebook->api('/me');
    //get friend data
    $friend_profile = $facebook->api('/me/friends/' . $_POST[friend_id]);
  } catch (FacebookApiException $e) {
    $user = null;
  }

} else {    
    die('<script>top.location.href="'.$facebook->getLoginUrl($perms).'";</script>');
}

echo $friend_profile['birthday']; 
```

但是我看不到生日日期。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T19:10:33.940

您的 API 调用是错误的，要获得朋友的生日，您需要这个：

```
$friend_profile = $facebook->api('/' . $_POST[friend_id] . '?fields=birthday'); 
```

而且您应该删除对 api (/me) 的第一次调用，因为每次调用都需要一些时间并且您不使用数据。

# c++ - 如何在 C++ 中找到一个数的质因数？

> ID：16089786
> 
> 赞同：2
> 
> 时间：2013-04-18T17:45:02.020
> 
> 标签：c++, primes, factors

我正在尝试项目 euler 问题 3，但我没有得到想要的结果。我的逻辑：

1.  列出数字 13195 的所有因数并将它们保存在一个数组中。
2.  检查数组中的每个数字是否都是素数。
3.  如果发现该数字是素数，则将其保存在另一个数组中。
4.  显示第二个数组的内容。
5.  希望它只包含主要因素。

结果：第一个数组包含预期的所有因素，第二个我认为重复第一个数组或在一些非素数中滑动，请帮助！:)

我的代码：

```
#include <iostream>

using namespace std;

long int x,y=2;
long int number=13195;
long int f[1000000],ff[1000000];
int st=1;
int open=0;
int open2=0;
int a=0;
bool isprime;

int main()
{

    for(x=1;x<=number;x++)
    {
        if(number%x==0)
        {
            f[a] = x;
            a++;
        }
    }
    while(st<=16)
    {
        while(y<f[st])
        {
            if(f[st]%y==0 && f[st]!=y)
            {
                break;
            }
            else if(f[st]%y!=0 && f[st!=y])
            {
                ff[open] = f[st];
            }
            y++;
        }
        open++;
        st++;
    }
    for(open2=0;open2<open;open2++)
    {
        cout<<ff[open2]<<" is a prime factor of "<<number<<"\n";
    }
    return 0;
} 
```

使用它来寻找主要作品：

```
while(st<=a){
    int k = f[open];
    for(int i=2;i<k;i++)
    {
        if(k%i==0)
        {
            isprime = false;
            break;
        }
        else if(f[open]!=0 && f[open]%i!=0 && f[open]!=i)
        {
            isprime =true;
        }

    }
    if(isprime==true)
    {
        ff[st] = k;
        open3++;
        isprime = false;
    }
    open++;
    st++;
    }
    cout<<"The primes of them are "<<open3<<"."<<"\n";
    cout<<"Press RETURN to show them."<<"\n";
    cin.get();
    for(open2=0;open2<=open3;open2++)
    {
        cout<<ff[open2]<<" is a prime factor of "<<number<<"."<<"\n";
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T17:55:57.893

为什么你不尝试

```
for(x=1;x<=number;x++)
{
    if(number%x==0 && isPrime(x))
    {
        f[a] = x;
        a++;
    }
} 
```

......

```
int isPrime(int x)
{

 for(int i=2;i<=x/2;i++)
 {
   if(x%i==0)
   return 0;
 }
 return 1;
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T17:47:12.823

至少：

```
else if(f[st]%y!=0 && f[st!=y]) 
```

应该

```
else if(f[st]%y!=0 && f[st]!=y) 
```

在第一种方式中，您试图始终访问`f[0]`或`f[1]`通过执行`f[st!=y]`.

# ios - 在关闭视图 iAds 在 ios 5 ipad 中变为黑色。（深黑色）

> ID：16089788
> 
> 赞同：1
> 
> 时间：2013-04-18T17:45:06.923
> 
> 标签：ios, ios5, iad

我有一个基于标签的应用程序。我在应用委托类中创建了一个 iAd 对象，并在我的三视图控制器类中使用它。它在第二个选项卡的屏幕和第三个选项卡的屏幕上运行良好。在第二个选项卡上有一个表格视图，当单击该表格视图的行时，我导航到新视图，我在其中为 iAd 使用了相同的代码。单击 iAd 时，iAd 屏幕以横向模式打开，关闭屏幕时变为黑色并记录以下内容。

```
[ADHostWindowController supportsOrientation:]: message sent to deallocated instance 0x100bc740 
```

我在应用程序委托中创建了这样的对象：

```
self.bannerView = [[ADBannerView alloc]init];
[self.bannerView setDelegate:self]; 
```

我在这样的视图控制器中添加横幅：

```
[[[self appdelegate] bannerView] setFrame:CGRectMake(0, hightofView-180, 768, 66)] 
```

我所有的视图控制器都是纵向的，但 iAd 总是以横向模式打开。这适用于 iOS 6，但不适用于 iPad 上的 iOS 5。我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T02:22:34.973

查看 Apple 的 iAd 示例中的 TabbleBanner 代码：[https ://developer.apple.com/library/ios/#samplecode/iAdSuite/Introduction/Intro.html](https://developer.apple.com/library/ios/#samplecode/iAdSuite/Introduction/Intro.html)

我没有详细调查，但您需要遵循 Apple iAd 指南：[https ://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/iAd_Guide/BannerAdvertisements/BannerAdvertisements.html](https://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/iAd_Guide/BannerAdvertisements/BannerAdvertisements.html)

要创建一个 ADBanner，在每个 UIViewController 中，添加一个到 self.view

```
@property (strong,nonatomic) ADBannerView *bannerView;
- (void)viewDidLoad
{
    [super viewDidLoad];
    [self createADBanner];
}

- (void)createADBanner{
    self.bannerView = [[ADBannerView alloc] initWithFrame:CGRectZero];
    self.bannerView.currentContentSizeIdentifier = ADBannerContentSizeIdentifierPortrait;
    [self.bannerView setDelegate:self];
    [self.view addSubview:self.bannerView];
} 
```

首先，如果需要将其放置在顶部或底部，则需要修改bannerView 的大小和setCenter。

```
- (void)viewDidLayoutSubviewsj{
    if (UIInterfaceOrientationIsLandscape(self.interfaceOrientation)) {
        self.bannerView.currentContentSizeIdentifier = ADBannerContentSizeIdentifierLandscape;
        self.bannerView.center = CGPointMake(self.view.center.x, self.view.frame.size.height - self.bannerView.frame.size.height/2);
    } else {
        self.bannerView.currentContentSizeIdentifier = ADBannerContentSizeIdentifierPortrait;
        self.bannerView.center = CGPointMake(self.view.center.x, self.view.frame.size.height - self.bannerView.frame.size.height/2);
    }
} 
```

旋转时做同样的事情：

```
- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration{
    if (UIInterfaceOrientationIsLandscape(toInterfaceOrientation)) {
        self.bannerView.currentContentSizeIdentifier = ADBannerContentSizeIdentifierLandscape;
        self.bannerView.center = CGPointMake(self.view.center.x, self.view.frame.size.height - self.bannerView.frame.size.height/2);
    } else {
        self.bannerView.currentContentSizeIdentifier = ADBannerContentSizeIdentifierPortrait;
        self.bannerView.center = CGPointMake(self.view.center.x, self.view.frame.size.height - self.bannerView.frame.size.height/2);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T13:12:55.213

我猜您的问题与 iAd 无关，而是与内存问题有关。似乎类对象`ADHostWindowController`被过早地释放。

我的建议是确保在调用 supportsOrientation: 之前**不释放**ADHostWindowController，即 (retainCount>=1)。（这肯定是在 iAd 打开之后）。

诊断：在打开 iAd 之前尝试记录该 ADHostWindowController 的保留计数（然后可能再保留一次），看看会发生什么。

# jquery - 无法在后续调用中获取 AJAX 数据的维度

> ID：16089792
> 
> 赞同：2
> 
> 时间：2013-04-18T17:45:24.227
> 
> 标签：jquery

我想我要疯了。

我想要做的就是通过 AJAX 获取数据的维度，无论调用多少次。它第一次运行良好，但每次后续调用我总是得到一个 0 值 - 尽管它出现在页面上，正如人们所期望的那样。

```
// The AJAX part
function getDetails(request){
    $placehold.empty();
    return jQ.get(request);
};

// Filter & render AJAX data
function renderData(data){
    var endResult = $(data).find('#productDetails');
    endResult.fadeTo(0,0).appendTo($placehold);
    $placehold.removeClass('loading');
    endResult.fadeTo(300,1); // <- Added as per request
    // Console log previously uncalled data works fine
    // Called again, I get zero every single time
    console.log( jQ('#anyElementInAJAXData').outerHeight(false) );
};

// Click handler
jQ('#slides').on('click', '.slideLink', function(e){
    e.preventDefault();
    var target = jQ(this).attr("href");
    $placehold.fadeIn(360).addClass('loading');
    getDetails(target)
        .done( function(result) {
            renderData(result);
        })
}); 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T21:00:58.910

您的问题似乎在于 endResult.fadeTo(0,0).appendTo($placehold); 方法。appendTo 只会在fadeTo 完成后发生，但是你的方法的其余部分是在fadeTo 刚刚开始时执行的。这“可能”解决它：

```
var endResult = $(data).find('#productDetails');
endResult.fadeTo(0,0, function() {
  $(this).appendTo($placehold);
  $placehold.removeClass('loading');
  $(this).fadeTo(300,1); // <- Added as per request
  // Console log previously uncalled data works fine
  // Called again, I get zero every single time
  console.log( jQ('#anyElementInAJAXData').outerHeight(false) );
}); 
```

# sql - SQL 使用聚合函数作为过滤条件

> ID：16089799
> 
> 赞同：0
> 
> 时间：2013-04-18T17:46:05.303
> 
> 标签：sql, ms-access

我正在尝试使用选择查询来显示我的数据库中过去提出超过 5 次投诉的所有客户。我试过这个查询：

```
SELECT customer_ID, COUNT(customer_feedback.feedback_type) AS complaints
FROM customer_feedback
WHERE complaints>5 
GROUP BY customer_ID; 
```

但它不起作用。Access 无法识别 WHERE 子句中的表达式“投诉”。所以我尝试了这个，更糟糕的是：

```
SELECT customer_ID, COUNT(customer_feedback.feedback_type) AS complaints
FROM customer_feedback
WHERE COUNT(customer_feedback.feedback_type)>1 
GROUP BY customer_ID; 
```

我确信有一个我现在想不出的简单解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T17:52:20.763

```
SELECT customer_ID, COUNT(customer_feedback.feedback_type) AS complaints
FROM customer_feedback
GROUP BY customer_ID
HAVING COUNT(customer_feedback.feedback_type)>5; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T17:47:51.223

在 SQL Server 中，这将是 group by 的“having”子句的一部分

```
select something, count(*)
from somewhere
group by something
having count(*) > 5 
```

# c# - Temporarily stop form events from either being raised or being handled?

> ID：16089800
> 
> 赞同：4
> 
> 时间：2013-04-18T17:46:08.743
> 
> 标签：c#, .net, winforms, events

I have a ton on controls on a form, and there is a specific time when I want to stop all of my events from being handled for the time being. Usually I just do something like this if I don't want certain events handled:

```
private bool myOpRunning = false;

private void OpFunction()
{
    myOpRunning = true;
    // do stuff
    myOpRunning = false;
}

private void someHandler(object sender, EventArgs e)
{
    if (myOpRunning) return;
    // otherwise, do things
} 
```

But I have A LOT of handlers I need to update. Just curious if .NET has a quicker way than having to update each handler method.

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-18T18:16:05.713

您必须创建自己的机制来执行此操作。不过还不错。考虑添加另一层抽象。例如，一个简单的类调用`FilteredEventHandler`检查 myOpRunning 的状态，或者调用真实的事件处理程序，或者抑制事件。该类看起来像这样：

```
public sealed class FilteredEventHandler
{
    private readonly Func<bool> supressEvent;
    private readonly EventHandler realEvent;

    public FilteredEventHandler(Func<bool> supressEvent, EventHandler eventToRaise)
    {
        this.supressEvent = supressEvent;
        this.realEvent = eventToRaise;
    }

    //Checks the "supress" flag and either call the real event handler, or skip it
    public void FakeEventHandler(object sender, EventArgs e)
    {
        if (!this.supressEvent())
        {
            this.realEvent(sender, e);
        }
    }
} 
```

然后，当您连接事件时，请执行以下操作：

```
this.Control.WhateverEvent += new FilteredEventHandler(() => myOpRunning, RealEventHandler).FakeEventHandler; 
```

当`WhateverEvent`被提升时，它会调用`FilteredEventHandler.FakeEventHandler method`. 该方法将检查标志并调用或不调用真实的事件处理程序。这在逻辑上与您已经在做的几乎相同，但是检查 myOpRunning 标志的代码只在一个地方，而不是散布在您的代码中。

**编辑以回答评论中的问题：**

现在，这个例子有点不完整。完全取消订阅事件有点困难，因为您丢失了对已连接的 FilteredEventHandler 的引用。例如，您不能这样做：

```
this.Control.WhateverEvent += new FilteredEventHandler(() => myOpRunning, RealEventHandler).FakeEventHandler;
//Some other stuff. . .
this.Control.WhateverEvent -= new FilteredEventHandler(() => myOpRunning, RealEventHandler).FakeEventHandler; //Not gonna work! 
```

因为你连接了一个代表并解开了一个完全不同的代表！当然，这两个委托都是 FakeEventHandler 方法，但这是一个实例方法，它们属于两个完全不同的 FilteredEventHandler 对象。

不知何故，您需要获取对您构造的第一个 FilteredEventHandler 的引用才能解钩。这样的事情会起作用，但它涉及跟踪一堆 FilteredEventHandler 对象，这可能并不比您尝试解决的原始问题更好：

```
FilteredEventHandler filter1 = new FilteredEventHandler(() => myOpRunning, RealEventHandler);
this.Control.WhateverEvent += filter1.FakeEventHandler;
//Code that does other stuff. . .
this.Control.WhateverEvent -= filter1.FakeEventHandler; 
```

在这种情况下，我要做的是让 FilteredEventHandler.FakeEventHandler 方法将其“this”引用传递给 RealEventHandler。这涉及更改 RealEventHandler 的签名以采用另一个参数：

```
public void RealEventHandler(object sender, EventArgs e, FilteredEventHandler filter); 
```

或将其更改为采用您创建的 EventArgs 子类，该子类包含对 FilteredEventHandler 的引用。这是更好的方法

```
public void RealEventHandler(object sender, FilteredEventArgs e);
//Also change the signature of the FilteredEventHandler constructor:
public FilteredEventHandler(Func<bool> supressEvent, EventHandler<FilteredEventArgs> eventToRaise)
{
  //. . .
}
//Finally, change the FakeEventHandler method to call the real event and pass a reference to itself
this.realEvent(sender, new FilteredEventArgs(e, this)); //Pass the original event args + a reference to this specific FilteredEventHandler 
```

现在，被调用的 RealEventHandler 可以自行取消订阅，因为它引用了正确的 FilteredEventHandler 对象，该对象传递给了它的参数。

我最后的建议是*不要这样做！* Neolisk 在评论中指出了这一点。做这样复杂的事情表明设计存在问题。将来需要维护此代码的任何人（甚至您，令人惊讶！）都很难弄清楚所涉及的非标准管道。

通常，当您订阅事件时，您只做一次就忘记了——尤其是在 GUI 程序中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T17:57:12.997

你可以用反射来做到这一点......

```
public static void UnregisterAllEvents(object objectWithEvents)
{
    Type theType = objectWithEvents.GetType();

    //Even though the events are public, the FieldInfo associated with them is private
    foreach (System.Reflection.FieldInfo field in theType.GetFields(System.Reflection.BindingFlags.NonPublic | System.Reflection.BindingFlags.Instance))
    {
        //eventInfo will be null if this is a normal field and not an event.
        System.Reflection.EventInfo eventInfo = theType.GetEvent(field.Name);
        if (eventInfo != null)
        {
            MulticastDelegate multicastDelegate = field.GetValue(objectWithEvents) as MulticastDelegate;
            if (multicastDelegate != null)
            {
                foreach (Delegate _delegate in multicastDelegate.GetInvocationList())
                {
                    eventInfo.RemoveEventHandler(objectWithEvents, _delegate);
                }
            }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-11-26T10:10:27.930

您可以禁用放置所有这些控件的容器。例如，如果您将它们放入 a`GroupBox`或`Panel`简单地使用：`groupbox.Enabled = false;`或`panel.Enabled = false;`。您还可以禁用表单`From1.Enabled = false;`并显示等待光标。您仍然可以将这些控件复制并粘贴到窗体以外的容器中。

# c# - Can application built with .NET 4.5 run on .NET 4.0?

> ID：16089802
> 
> 赞同：6
> 
> 时间：2013-04-18T17:46:23.970
> 
> 标签：c#, .net, .net-4.0, .net-4.5, .net-framework-version

My project is targeting to .NET 4.5\. It doesn't use any new 4.5 methods, so it actually works fine on the machine with only .NET 4.0 installed.

This is all good until I added some extension methods and reflection. Then when I ran this .NET 4.5 program on the 4.0 machine, it failed with "System.TypeLoadException: Could not load type 'System.Runtime.CompilerServices.ExtensionAttribute' from assembly mscorlib". The famous ExtensionAttribute program that has been documented well [here](http://www.mattwrock.com/post/2012/02/29/What-you-should-know-about-running-ILMerge-on-Net-45-Beta-assemblies-targeting-Net-40.aspx).

Another quick way to test this is to add the following line. Then the program will throw the exception when running on .NET 4.0 only.

```
Console.WriteLine(typeof(System.Runtime.CompilerServices.ExtensionAttribute).Assembly.FullName); 
```

I'm wondering if there is a way to work around it. For example, the ILMerge (when using the correct /targetplatform option as documented in the link) actually changes the ExtensionAttribute from mscorlib to System.Core if the project is target to .NET 4.0 (with 4.5 installed). But it doesn't seem to work on the project targeted to .NET 4.5.

I know this is a long shot. But just want to see if anyone has other ideas since it was so close.

Thanks.

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-18T17:50:33.023

一般来说，这是行不通的。它*在某些情况下*确实有效，因为 4.5 是 4.0 的就地替代品，但它一般不会有效。我个人已经看到移动到不同程序集中的类型存在问题，并且绑定设置不正确，就像您所看到的那样。反射类型不是在 4.5 中移动的唯一类型。

> 我的项目针对.NET 4.5。它不使用任何新的 4.5 方法，因此它实际上可以在仅安装 .NET 4.0 的机器上正常工作。

如果是这种情况，您只需将应用程序更改为面向 .NET 4.0。这应该允许它在仅安装了 .NET 4 的机器上安全运行。

# java - 如果它在同一个类中，您可以访问实例的私有变量吗？（备份）

> ID：16089807
> 
> 赞同：0
> 
> 时间：2013-04-18T17:46:52.630
> 
> 标签：java, scope, private

举个例子，

```
public class SwapNumbers {

private int aNumber = 0; ///////////////////////////////////

    public SwapNumbers(){

    }

    public void changeNumber(int changed){
    aNumber = changed;

    }
    public void swap(SwapNumbers otherNumber){ ///////////

    aNumber = otherNumber.aNumber; //Can we access aNumber?
    }

} 
```

这个交换会起作用吗？我的第一直觉是它不起作用，因为它试图访问私有值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T17:48:03.993

是的。创建一个成员`private`意味着它可用于当前类及其任何内部类，但受静态限定符的约束。

包私有（或默认值，没有任何访问修饰符）意味着它可用于同一包中的任何类。

`public`修饰符使其可用于任何地方的任何包中的任何类。小心这些:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T17:52:06.730

如果您在同一个类中，则访问该类中的任何变量（私有、受保护或公共）都不会出现问题。

您将无法从外部访问私有变量

```
public class SwapNumber {
...
} 
```

# lisp - What's the equivalent of constructors in CLOS?

> ID：16089809
> 
> 赞同：7
> 
> 时间：2013-04-18T17:47:03.807
> 
> 标签：lisp, common-lisp, clos

How would you express the following Java code in Lisp?

```
class Foo {
    private String s;

    public Foo(String s) {
        this.s = s;
    }
}

class Bar extends Foo {
    public Bar(int i) {
        super(Integer.toString(i));
    }
} 
```

In Lisp, is `make-instance` or `initialize-instance` the equivalent of a constructor? If yes, how do you call the super class constructor(s)?

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-18T20:02:00.413

在一个方法中使用`CALL-NEXT-METHOD`来调用下一个。

通常只需使用标准方法组合工具并为`:BEFORE`.`:AFTER``:AROUND``INITIALIZE-INSTANCE`

单程：

```
(defclass foo ()
  ((s :type string :initarg :s)))

(defclass bar (foo) ())

(defmethod initialize-instance :around ((b bar) &key i)
  (call-next-method b :s (princ-to-string i))) 
```

例子：

```
CL-USER 17 > (make-instance 'bar :i 10)
#<BAR 402000B95B>

CL-USER 18 > (describe *)

#<BAR 4130439703> is a BAR
S      "10" 
```

请注意，我在调用`CALL-NEXT-METHOD`时没有更改它分派的参数。我只是更改了`&key`initarg 参数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-02-14T02:55:47.127

这是 Rainier 示例的放大版，它增加了一个小转折：通过约束槽值进行专业化（子类化），至少在构建时是这样。考虑一个用于二维矩形的类*m-box ：*

```
(defclass m-box ()
  ((left   :accessor m-box-left   :initform 0 :type integer :initarg :left  )
   (top    :accessor m-box-top    :initform 0 :type integer :initarg :top   )
   (width  :accessor m-box-width  :initform 0 :type integer :initarg :width )
   (height :accessor m-box-height :initform 0 :type integer :initarg :height))) 
```

我们可以这样尝试：

```
(describe (make-instance 'm-box :left 42 :top -39 :width 5 :height  11))

: #<M-BOX {10047A8F83}>
:   [standard-object]
: 
: Slots with :INSTANCE allocation:
:   LEFT    = 42
:   TOP     = -39
:   WIDTH   = 5
:   HEIGHT  = 11 
```

现在考虑一个子类或特化：让一个*m-block*是一个具有单位宽度和高度的 m-box。我们将*initialize-instance*方法设置为传递*left*和*top*的值，但不传递*width*和*height*：

```
(defclass m-block (m-box) ())
(defmethod initialize-instance
    :around
    ((mb m-block)
     &key (left 0) (top 0))
  (call-next-method mb :left left :top top :width 1 :height 1)) 
```

我们可以如下创建一个*m-block*的实例：

```
(describe (make-instance 'm-block :left 17 :top -34 :width 5 :height  11))

: #<M-BLOCK {10049C0CC3}>
:   [standard-object]
: 
: Slots with :INSTANCE allocation:
:   LEFT    = 17
:   TOP     = -34
:   WIDTH   = 1
:   HEIGHT  = 1 
```

构造函数不会阻止用户设置*width*和*height*的尝试，就像对一些不存在的插槽所做的那样：

```
(describe (make-instance 'm-block :left 17 :top -34 :plugh 2345))

Invalid initialization argument:
  :PLUGH
in call for class #<STANDARD-CLASS COMMON-LISP-USER::M-BLOCK>.
   [Condition of type SB-PCL::INITARG-ERROR] 
```

但构造函数*确实*用 1 更正了用户的无效输入。

`error`如果用户尝试输入无效的*宽度*或*高度*，您可能希望通过调用使模型更加紧密：

```
(defclass m-block (m-box) ())
(defmethod initialize-instance
  :around
  ((mb m-block)
   &key (left 0) (top 0) (width 1) (height 1))
  (when (or (/= 1 width) (/= 1 height))
    (error "an m-block must have unit width and height"))
  (call-next-method mb :left left :top top :width 1 :height 1)) 
```

用户的以下尝试被拒绝：

```
(describe (make-instance 'm-block :left 17 :top -34 :width 5 :height  11))

an m-block must have unit width and height
   [Condition of type SIMPLE-ERROR] 
```

但是这个也演示了*height*的默认设置，它经历了：

```
(describe (make-instance 'm-block :left 17 :top -34 :width 1))

: #<M-BLOCK {1005377983}>
:   [standard-object]
: 
: Slots with :INSTANCE allocation:
:   LEFT    = 17
:   TOP     = -34
:   WIDTH   = 1
:   HEIGHT  = 1 
```

这个例子允许用户在`setf`之后调整宽度或高度。我不知道如何在子类的实例中而不是在超类的实例中使宽度和高度*只读。*

# jquery - 从另一个输入字段中获取值

> ID：16089814
> 
> 赞同：0
> 
> 时间：2013-04-18T17:47:19.303
> 
> 标签：jquery

这是第四位的输入字段：

```
<td><input type="number" name="tour" value="12" size="2" maxlength="2"></td> 
```

这个 Js 不工作：

```
var hTour = $(this).parents('tr').find('td:nth-child(4)').val(); 
```

怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T17:49:40.767

您的 JavaScript 正在获取`td`元素的值。您可能想要`input`元素的值：

```
var hTour = $(this).closest('tr').find('td:nth-child(3) input').val(); 
```

`:nth-child()`是零索引的，所以`:nth-child(0)`是第一个元素，`:nth-child(1)`是第二个，依此类推。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T17:55:37.050

实际上使用您的代码：

```
var hTour = $(this).parents('tr').find('td:nth-child(4)').val(); 
```

您正在寻找`td`. 但是你需要像这样的输入值`td`：

```
var hTour = $(this).parent('tr').find('td:nth-child(4) input').val(); 
```

来自[**:nth-child() 选择器 API 文档**](http://api.jquery.com/nth-child-selector/)

> **index**：要匹配的每个子元素的索引，从 1 开始，字符串为偶数或奇数，或等式（例如 :nth-child(even), :nth-child(4n) ）

还

```
Given a single <ul> containing two <li>s, $('li:nth-child(1)') selects
the first <li> while $('li:eq(1)') selects the second. 
```

# c++ - 如何使用grabWindow只截取窗口的某个区域？

> ID：16089816
> 
> 赞同：0
> 
> 时间：2013-04-18T17:47:26.820
> 
> 标签：c++, qt, qt5

我目前正在使用以下代码截取窗口的屏幕截图（句柄类型为 HWND）：

```
QPixmap::grabWindow((WId) handle).save("haystack.png", "png"); 
```

但是，我只需要对窗口的某个区域（矩形）进行截图。

就我而言，矩形具有以下顶点：

左上角：(536, 535)

右下角：(778, 592)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T17:52:05.857

就在文档中：

```
QPixmap QPixmap::grabWindow( WId window,
                             int x = 0,
                             int y = 0,
                             int width = -1,
                             int height = -1 ); 
```

# mysql - 结果正好有 4 个小写字母 a

> ID：16089818
> 
> 赞同：-6
> 
> 时间：2013-04-18T17:47:28.070
> 
> 标签：mysql, regex

从 MySQL 表中`town`，我必须找到包含 4 个小字母 a 的所有名称的数量

```
SELECT count(*)
FROM `town`
where `name` REGEXP 
```

我只需要那个正则表达式。任何人？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T17:51:55.497

```
a{4} 
```

应该找到所有出现的 4 个连续的 a。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T17:55:00.757

`a.*a.*a.*a`将找到包含至少 4`a`的所有出现

`a{4}`会找到所有连续四个 a 的

`[aA].*[aA].*[aA].*[aA]`是第一个不区分大小写的版本。

`[aA]{4}`是第二个不区分大小写的版本。

此处不需要正则表达式，如果可能的话，使用 LIKE '%a%a%a%a%' 是不必要的开销。道具交给我从谁那里偷来的 rene。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T17:52:53.660

从长远来看，非正则表达式解决方案是可能的：

```
SELECT count(*)
FROM `town`
where length(SUBSTRING_INDEX(name, 'a', 5)) = LENGTH(name)
and length(SUBSTRING_INDEX(name, 'a', 5)) > 3 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T18:35:50.107

这是我测试的问题。现在我们得到了答案

```
SELECT count(*)
FROM `town`
where
`name` REGEXP BINARY '^([^a]*a[^a]*){4}$' 
```

或者

```
SELECT count(*)
FROM `town`
where
length(`name`) - length(replace (`name`,'a', '')) = 4 
```

# r - 理解 R 中的 predict()

> ID：16089819
> 
> 赞同：2
> 
> 时间：2013-04-18T17:47:29.880
> 
> 标签：r, predict

我正在阅读 R 中的 predict() 并且很困惑：

有一个 Spam 数据集，我们从中使用随机抽样创建了训练数据和测试数据。我们使用了 trainSpam（训练数据集来训练系统）。我们想通过测试数据集（testSpam）来看看模型有多好。

```
predictionModel = glm(numType ~ charDollar, family = "binomial", data = trainSpam)

predictionTest = predict(predictionModel, testSpam) 
predictedSpam = rep("nonspam", dim(testSpam)[1]) 
predictedSpam[predictionModel$fitted > 0.5] = "spam" #Here is my problem
table(predictedSpam, testSpam$type) 
```

在我们说的那一行：

```
predictedSpam[predictionModel$fitted > 0.5] = "spam" 
```

如何`predictionModel$fitted`预测测试数据中的垃圾邮件。它似乎正在使用从训练数据中拟合的 predictionModel$。然后我们继续与测试数据的垃圾邮件进行比较。有人可以解释吗？

这是我的理解。在行中：

> predictionModel = glm(numType ~ charDollar, family = "binomial", data = trainSpam)

我们使用 trainSpam 数据创建模型。

在下一行：

> predictionTest = predict(predictionModel, testSpam)

我们使用相同的模型创建预测测试，但使用测试数据。

在下一行：

> predictSpam = rep("nonspam", dim(testSpam)[1])

我们创建了一个包含所有值“非垃圾邮件”的向量

在下一行：

> 预测垃圾邮件[predictionModel$fitted > 0.5] = "垃圾邮件"

我们正在使用 predictionModel$fitted，它已在训练数据上进行拟合，以决定将哪些行分类为垃圾邮件。难道我们不应该使用类似 predictTest 的东西来识别垃圾邮件吗？

我的想法应该是：

```
> predictionModel = glm(numType ~ charDollar, family = "binomial", data = trainSpam)

> predictionTest = predict(predictionModel, testSpam,type="response")
> predictedSpam = rep("nonspam", dim(testSpam)[1])
> predictedSpam[predictionTest > 0.5] = "spam"
> table(predictedSpam, testSpam$type) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T18:38:26.147

我认为您希望`type="response"`在`predict`通话中，因为默认值否则将是线性预测器。

```
?predict.glm    # different than ?predict 
```

（当然，如果我正确地直觉你未说明的目标是在你的测试集中找到概率大于 0.5 的案例。此外，如果你真的根据训练数据获得预测，这意味着你的测试数据框格式不正确，并且您需要编辑您的问题以包含两者的输出`str(trainSpam)`，`str(testSpam)`因此我们可以向您展示如何正确创建`data`参数`predict`。）

更新后：所以它看起来`charDollar`在测试和训练集中，所以你不应该`predictionTest`从训练集中得到预测。您应该得到预测 > 50% 的垃圾邮件案例： testSpam[ predict(fit, data=testSpam, type="response) > .5 ]

我不确定使用了什么代码来创建`predictionTest`，并且想知道您是否打算键入`predictedSpam`. 这是我认为会成功的：

```
predictedSpam = predict(predictionModel, testSpam) 
spam <- predictedSpam[ predictedSpam$fitted > 0.5 ] 
```

# php - 总结动态生成的字段

> ID：16089824
> 
> 赞同：0
> 
> 时间：2013-04-18T17:47:57.760
> 
> 标签：php

我创建了一个脚本，它使用 php 动态填充表的字段。如果您查看下面的代码片段，现在我想添加所有`$sub_total`内容以创建一个`$total_cost`. 不确定我是否很好地解释了这一点，但任何方向都将不胜感激。

```
// loop through results of database query, displaying them in the table
    while($row = mysql_fetch_array( $result )) {

            // Calculate hours done per day

            $hrs_done = $row['time_out'] - $row['time_in'];

            if($hrs_done > $row['con_hr']){$hrs = $hrs_done;}
            else{$hrs = $hrs_done;}

            // echo out results into a table

            echo "<tr>";
            echo '<td bgcolor="#FFFFFF">' . $row['date'] . '</td>';
            echo '<td bgcolor="#FFFFFF">' . $hrs . '</td>';
            echo '<td bgcolor="#FFFFFF">' . $row['rate'] . '</td>';
            echo '<td bgcolor="#FFFFFF">'?>

           // Multiply hrs by rate to get sub total charge for day    

           <?php $sub_total = $hrs * $row['rate'];
           echo $sub_total ;
           ?>

             <?php '</td>';
            echo "</tr>"; 
    } 
    // close table>
    echo "</table>"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T17:59:03.417

while 循环的每次迭代都会创建一个新变量 $subtotal，您希望将其添加到常量变量 $total 中。

所以在循环中，您可以将 $subtotal 添加到 $total 并在 while 循环退出后回显 $total

```
while($row = mysql_fetch_array( $result )) 
{
  // your code
  $total = $total + $subtotal; // shorthand is -  $total += $subtotal.
} 

echo $total; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T17:51:16.673

如果我正确理解您想要的行为。`$sub_total`在循环期间，在完成循环后添加每个`$total_cost`和`echo`this`while`

```
<?php

    $total_cost = 0;

    while($row = mysql_fetch_array( $result )) {
        $sub_total = $hrs * $row['rate'];
        $total_cost += $sub_total;
    } 

    echo "Total cost: " . $total_cost;
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T17:53:07.117

首先，您应该寻找使用`mysqli`或`PDO`用于数据库访问的教程，因为`mysql_*`函数已被弃用。

其次，这个问题就像在循环中迭代时添加小计项目一样简单

```
$grand_total = 0;
while($row = mysql_fetch_array( $result )) {
       // your other code omitted for clarity

       $sub_total = $hrs * $row['rate'];
       $grand_total += $sub_total;
       echo $sub_total ;

       // more code
}
echo $grand_total; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T17:56:40.097

您的 IF/ELSE 块在两种情况下都会导致相同的结果。这是期望的结果吗？

另一方面，我不确定我是否理解你的正确，但如果我理解了，这就是我的答案。

由于您想收到所有 $sub_total，因此您需要所有其他已构建 $sub_total 的变量：

他们是：

```
$hrs = $hrs_done = $row['time_out'] - $row['time_in']
$row['rate']; 
```

如果您尝试使用 SUM() MySQL 函数，您将收到上述列的总和：

```
SELECT sum(time_out) as 'sum_time_out', sum(time_in) as 'sum_time_in', sum(rate) as 'sum_rate' FROM myTable;

$hrs_sum = $hrs_done_sum = $row['sum_time_out'] - $row['sum_time_in'];
$stotal_cost = $hrs)sum * $row['sum_rate']; 
```

# java - Xstream marshaller 不解组 xml post body

> ID：16089830
> 
> 赞同：1
> 
> 时间：2013-04-18T17:48:04.613
> 
> 标签：java, spring, rest, xstream

我正在尝试创建春季休息服务。我的 servlet.xml 如下所示：

```
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:context="http://www.springframework.org/schema/context"
xmlns:mvc="http://www.springframework.org/schema/mvc" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
 xmlns:util="http://www.springframework.org/schema/util"
xsi:schemaLocation="
    http://www.springframework.org/schema/beans     
    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
    http://www.springframework.org/schema/context 
    http://www.springframework.org/schema/context/spring-context-3.0.xsd
    http://www.springframework.org/schema/mvc
    http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd">

    <bean class="org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor"/>

<!-- Database Configuration -->
<import resource="classpath:DataSource.xml"/>
<import resource="classpath:Hibernate.xml"/>

<!-- Beans Declaration -->
<import resource="classpath:Employee.xml"/>

<context:component-scan base-package="com.nilenium.service.controller" />

<mvc:annotation-driven />

      <bean class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter">
   <property name="messageConverters">
  <list>
   <ref bean="jsonConverter"/>
   <ref bean="marshallingHttpMessageConverter"/>
  </list>
   </property>
  </bean>

   <bean id="jsonConverter" class="org.springframework.http.converter.json.MappingJacksonHttpMessageConverter"></bean>

  <bean id="xstreamMarshaller" class="org.springframework.oxm.xstream.XStreamMarshaller">
   <property name="autodetectAnnotations" value="true"/>
   <property name="annotatedClasses">
    <list>
        <value>com.nilenium.employee.model.Employee</value>                         
        <value>com.nilenium.employee.model.EmployeeRecord</value>                           
    </list>                     
  </property>

</bean>

    <bean id="marshallingHttpMessageConverter"
      class="org.springframework.http.converter.xml.MarshallingHttpMessageConverter">
    <property name="marshaller" ref="xstreamMarshaller"/>
    <property name="unmarshaller" ref="xstreamMarshaller"/>
</bean>

  <bean class="org.springframework.web.servlet.view.ContentNegotiatingViewResolver">
 <property name="order" value="1" />
  <property name="ignoreAcceptHeader" value="true" />
 <property name="defaultContentType" value="application/json" />
  <property name="mediaTypes">
 <map>
 <entry key="json" value="application/json" />
 <entry key="xml" value="application/xml" />
 </map>
 </property>

<property name="defaultViews">
 <list>
<!-- JSON View -->
<bean class="org.springframework.web.servlet.view.json.MappingJacksonJsonView" />

<!-- XML View -->
 <bean class="org.springframework.web.servlet.view.xml.MarshallingView">
 <constructor-arg>
  <bean class="org.springframework.oxm.xstream.XStreamMarshaller">
   <property name="autodetectAnnotations" value="true"/>
   <property name="aliases">
    <props>
     <prop key="employee">com.nilenium.employee.model.Employee</prop>
     <prop key="employee">com.nilenium.employee.model.EmployeeRecord</prop>
     </props>
</property>
  </bean>
 </constructor-arg>
</bean>
   </list>
  </property>
 </bean>

</beans> 
```

我的模型类是这样的：

```
package com.nilenium.employee.model;

import java.io.Serializable;

import org.codehaus.jackson.annotate.JsonProperty;
import org.codehaus.jackson.map.annotate.JsonRootName;

import com.thoughtworks.xstream.annotations.XStreamAlias;

@XStreamAlias("employee")

public class Employee implements Serializable {

private static final long serialVersionUID = 1L;

private int employeeId;
private String employeeName;

public int getEmployeeId() {
    return employeeId;
}

public void setEmployeeId(int employeeId) {
    this.employeeId = employeeId;
}

public String getEmployeeName() {
    return employeeName;
}

public void setEmployeeName(String employeeName) {
    this.employeeName = employeeName;
}

public Employee(int employeeId, String employeeName)
{
    this.employeeId = employeeId;
    this.employeeName = employeeName;

}
public Employee() {
}
} 
```

我的服务控制器类是这样的：

```
package com.nilenium.service.controller;

import java.util.List;
import javax.servlet.http.HttpServletResponse;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Controller;
import org.springframework.ui.ModelMap;
import org.springframework.web.bind.annotation.ExceptionHandler;
import org.springframework.web.bind.annotation.PathVariable;
import org.springframework.web.bind.annotation.RequestBody;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.bind.annotation.ResponseBody;

import com.nilenium.employee.bo.EmployeeBo;
import com.nilenium.employee.model.Employee;
import com.nilenium.employee.model.EmployeeRecord;

@Controller
@RequestMapping("/Service")
public class NileniumServiceController {

@Autowired
private EmployeeBo employeeBo;

@ExceptionHandler
 public String exceptionHandler(Exception e){
    return "serviceError"; 
 }

@RequestMapping(value =  "employeeId/{employeeId}", method = RequestMethod.GET, headers = "Accept=application/xml, application/json")
public Employee getEmployeeName(@PathVariable int employeeId,
        HttpServletResponse resp,
        ModelMap model) {
//      System.out.println("Emp Name : " + employeeName);
    Employee empReturned = new Employee();
    empReturned.setEmployeeId(employeeId);
    empReturned.setEmployeeName("Demo Name");

    return empReturned;

}

@RequestMapping(value = "/employees", method = RequestMethod.GET, headers = "Accept=application/xml, application/json")
public EmployeeRecord getAllEmployeeDetails(HttpServletResponse resp,
        ModelMap model) {

    List<Employee> empListReturned = employeeBo.getAllEmployee();
    EmployeeRecord eRecords = new EmployeeRecord();
    eRecords.setEmployeeList(empListReturned);
    return eRecords;
}

@RequestMapping(value = "/storeemployee",method = RequestMethod.POST, headers = {"Accept=text/xml, application/json"})
public Employee storeEmpRecord(@RequestBody Employee employee,HttpServletResponse resp,
        ModelMap model)
{
    System.out.println("Emp Id received : "+employee.getEmployeeId());
    System.out.println("Emp Name received : "+employee.getEmployeeName());
//      Employee empReturned = employeeBo.findByEmployeeId(1);

    return employee;
}

} 
```

当我尝试将 xml 发布到`storeEmpRecord`方法时，xstream marshaller 无法将 xml 请求转换为相应的对象（`Employee`对象）。

我的测试客户端是这样的：

```
package com.nilenium.test;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.UnsupportedEncodingException;
import java.net.URISyntaxException;

import org.apache.http.HttpEntity;
import org.apache.http.HttpException;
import org.apache.http.HttpResponse;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.entity.StringEntity;
import org.apache.http.impl.client.DefaultHttpClient;
import org.springframework.aop.framework.adapter.DefaultAdvisorAdapterRegistry;

import com.nilenium.employee.model.Employee;
import com.thoughtworks.xstream.XStream;
import com.thoughtworks.xstream.io.xml.DomDriver;

public class RestPostTest {
public static void main(String[] args) {
Employee emp = new Employee();
emp.setEmployeeId(1);
emp.setEmployeeName("Nilalohita");

XStream xStream = new XStream(new DomDriver());
xStream.alias("employee", Employee.class);
System.out.println(xStream.toXML(emp));
String xmlBody = xStream.toXML(emp);
HttpClient client = new DefaultHttpClient();
String jsonDemo = "{\"employeeId\":2,\"employeeName\":\"He-Man\"}";
try {
    HttpPost post = new  HttpPost("http://localhost:8080/SampleMaven/Service/storeemployee");
//      post.addHeader("Accept", "application/json");
//      post.addHeader("Content-Type", "application/json");

    post.addHeader("Accept", "application/xml");
    post.addHeader("Content-Type", "application/xml");

    StringEntity entity = new StringEntity(xmlBody, "UTF-8");
//      entity.setContentType("application/json");
    entity.setContentType("application/xml");
    post.setEntity(entity);

    HttpResponse response = client.execute(post);

    BufferedReader rd = new BufferedReader(new   InputStreamReader(response.getEntity().getContent()));
      String line = "";
      while ((line = rd.readLine()) != null) {
       System.out.println(line);
      }

} catch (URISyntaxException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} catch (UnsupportedEncodingException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} catch (HttpException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
}
}
} 
```

如果我做错了什么，请告诉我。使用`@XMLroot`Employee 类而不是`@XStreamAlias("employee")`.

我收到以下错误。完整的堆栈跟踪是这样的

```
 Caused by:</h3><pre>javax.servlet.ServletException: Unable to locate object to be marshalled in model: {}
  at  org.springframework.web.servlet.view.xml.MarshallingView.renderMergedOutputModel(MarshallingView.java:100)
  at org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:250)
at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1047)
at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:817)
at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:719)
at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:644)
at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:560)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:727)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:820)
at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:487)
at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:362)
at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:181)
at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:726)
at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:405)
at org.mortbay.jetty.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:206)
at org.mortbay.jetty.handler.HandlerCollection.handle(HandlerCollection.java:114)
at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
at org.mortbay.jetty.Server.handle(Server.java:324)
at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:505)
at org.mortbay.jetty.HttpConnection$RequestHandler.content(HttpConnection.java:843)
at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:648)
at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:205)
at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:380)
at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:395)
at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:488) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T20:01:48.787

问题出在控制器方法中：

```
@RequestMapping(value = "/storeemployee",method = RequestMethod.POST, headers = {"Accept=text/xml, application/json"})
public Employee storeEmpRecord(@RequestBody Employee employee,HttpServletResponse resp,
    ModelMap model)
{
    System.out.println("Emp Id received : "+employee.getEmployeeId());
    System.out.println("Emp Name received : "+employee.getEmployeeName());
//      Employee empReturned = employeeBo.findByEmployeeId(1);
return employee;
} 
```

Spring MVC 不会（不能）`model`自动添加对象。您需要将`employee`对象添加到`ModelMap`. 然后将模型映射传递给编组视图，该视图查找它可以编组的任何对象，并将它们编组以进行响应。

`Unable to locate object to be marshalled in model: {}`意味着 Marshalling View 收到了一个 ModelMap，其中没有带有 XStream 注释的对象。

希望这可以帮助。

# lucene - Lucene 查询因混合 MUST/MUST_NOT 而失败

> ID：16089831
> 
> 赞同：8
> 
> 时间：2013-04-18T17:48:07.703
> 
> 标签：lucene, lucene.net

给定一个包含此文本的文档，索引在名为 Content 的字段中：

```
The dish ran away with the spoon. 
```

以下查询无法匹配该文档：

```
+Content:dish +(-Content:xyz)   <-- no results! 
```

我希望将查询视为**必须包含“dish”，不得包含“xyz”**。失败的是“不得已”的部分。

我知道 +- 组合看起来很有趣，但在语法上它应该是正确的，特别是考虑到以下变体都有效：

```
+Content:dish +(-Content:xyz +Content:spoon)   <-- this works
+Content:dish -Content:xyz                     <-- this works 
```

那么为什么不起作用`+(-Content:xyz)`呢？这是设计使然，还是错误，或者我只是错过了什么？我正在使用 Lucene.Net，但我认为常规 Lucene 的行为相同。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-18T19:00:40.103

Lucene 并不是从一个完整的视图开始的，比如一个 SQL 数据库。Lucene 从没有匹配的文档开始，并根据搜索的子句查找内容。这就是为什么：

```
-Content:xyz 
```

靠它自己真的行不通。它知道不带入 content:xyz，但没有得到任何匹配的文件。您的查询也是如此，因为它被放置在子查询中。

`-Content:xyz`首先评估，它自己没有文档。那么你有，有效地

```
+Content:dish +(no documents) 
```

`-`将其视为一个`AND NOT`而不是简单的一个很有用`NOT`（尽管不要认为这意味着 +/- 和 AND/OR/NOT 语法必须直接相互映射）。

如果您希望能够执行这样一个孤独的否定查询，您需要首先引入所有文档。[MatchAllDocsQuery](http://lucene.apache.org/core/4_0_0/core/org/apache/lucene/search/MatchAllDocsQuery.html)是实现这一目标的最佳方式，例如：

```
BooleanQuery query = new BooleanQuery();
query.add(new BooleanClause(new MatchAllDocsQuery(), BooleanClause.Occur.SHOULD));
query.add(new BooleanClause(new TermQuery(new Term("Content","xyz")), BooleanClause.Occur.MUST_NOT)); 
```

将等效于仅对 WHERE 子句进行否定的 SQL 样式查询。

当然，在您列出的情况下，这并不是真正必要的，因为：

```
+Content:dish -Content:xyz 
```

完全够用。

# html - 导航栏定位元素

> ID：16089835
> 
> 赞同：1
> 
> 时间：2013-04-18T17:48:22.200
> 
> 标签：html, css, menu, navigation, hover

您好，这是我需要构建的：[样机](http://s1.directupload.net/file/d/3229/dcj752ty_jpg.htm)

我停留在导航栏，这里是 CSS：

/* CSS 文档 */

```
body {background:#fff url(bg.jpg) repeat-x; margin:0; padding:0; height:1800px; font-        family:Arial, Helvetica, sans-serif;}

#wrapper {width: 1000px; margin: 0 auto;}

#header {height: 400px; width: 1000px; display: block; position: relative; }
#header .logo {position: absolute; width: 374px; height: 221px; display: block; float:     left; cursor: pointer; background: url(logo.png) 0 0 no-repeat transparent; top: 55px;     left: 10px;}
#header .contact-info {position: absolute; width: 293px; height: 133px; display: block;     float: left; cursor: pointer; background: url(contact-info.png) 0 0 no-repeat transparent;     top: 100px; left: 700px;}

ul.mn {
position: absolute;
float: left;
top: 316px;
width: 316px;
margin: 0;
padding: 0;
list-style-type: none;
}

ul.mn li {
float: left;
}

ul.mn li a {
display: block;
float: left;
height: 73px;
margin-left: 6px;
}

ul.mn li a.mn1 {
width: 104px;
background-image: url('mn1.png');
background-position: 0 0;
}

ul.mn li a.mn2 {
width: 212px;
background-image: url('mn2.png');
}

ul.mn li a.active, ul.mn li a:hover {
background-position: 0 73px;
} 
```

和 HTML：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>RW-Fliesen</title>
<link rel="stylesheet" type="text/css" href="style.css" />

</head>

<body>

<div id="wrapper">

<div id="header_wrapper">

    <div id="header">

        <a href="index.html" class="logo" title="Logo"></a>

        <div class="contact-info" title="contact-info"></div>

        <ul class="mn">
        <li><a href=" " title="" class="mn1 "></a></li>
        <li><a href=" " title="" class="mn2 "></a></li>
        </ul>

    </div>

</div>

</div>

</body>
</html> 
```

当我只有一个导航元素时看起来一切都很好：[只有一个元素的导航](http://dh-creative-webdesign.de/rw-fliesen.html)

但是当我添加第二个导航元素时，Navi 看起来像这样：[Navi with more than one element](http://s1.directupload.net/file/d/3229/fsx9njxj_png.htm)

我们该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T19:40:32.083

我猜你给每个`li`标签一个宽度。

```
ul.mn li a.mn1 {
  width: 104px;  
  background-image: url('mn1.png');
  background-position: 0 0;
} 
```

在上面的代码中，您给出了 104px 的宽度，因为 HOME 的图像是 104px 宽。所以猜测你的下一个菜单项将有更大的宽度，它的父`ul`级不能容纳在一行中。`ul`宽度为 316px。

```
ul.mn {
  position: absolute;
  float: left;
  top: 316px;
  width: 316px;
  margin: 0;
  padding: 0;
  list-style-type: none;
} 
```

您需要增加宽度`ul`才能使其工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T22:55:43.697

假设您试图模仿您在初始帖子中引用的模型站点。我相信您应该对解决菜单栏的 css 代码部分进行以下调整。您提供的内容：

```
ul.mn { position: absolute; float: left; top: 316px; width: 978px; margin: 0; padding:0; list-style-type: none; } 
```

我的提议：

```
ul.mn { position: absolute; float: left; top: 316px; width: 850px; margin: 0 auto 0 10px; padding:0; list-style-type: none;} 
```

请注意，我更改了宽度以反映由每个定义的按钮 div 的组合宽度决定的宽度，从 978px 到 850px，然后我建议不要将所有边距设置为 0，而是将顶部设置为 0，右侧自动、底部 0 和左侧 10 像素（因为根据我从您的模型中看到的菜单左侧与徽标的左侧对齐）。进行这些更改后，我可以让您的菜单栏很好地位于标题 div 的底部。

请至少告诉我你的进展情况。我一直在寻求分享想法并学习其他解决问题的方法。我相信它会让我们变得更加聪明。

祝你好运，史蒂夫

# android - PNG 比 GIF 使用更多内存

> ID：16089837
> 
> 赞同：0
> 
> 时间：2013-04-18T17:48:24.480
> 
> 标签：android, image, png, gif, formats

我创建了一个使用大量 GIF 的 Android 应用程序。我收到一些反馈说图像没有在 Galaxy S III 上显示，我使用这篇文章意识到我的 GIF 是问题所在：[图像没有在 Galaxy S3 上加载](https://stackoverflow.com/questions/15146250/images-not-loading-on-galaxy-s3)。

但我有一个担忧。我从一篇文章中借了一些代码来告诉我我正在使用多少内存。当我使用 GIF 时，我得到如下值：

```
I/memory  (  547): App Memory: Pss=12.15 MB
I/memory  (  547): Private=10.52 MB
I/memory  (  547): Shared=8.47 MB 
```

当我切换到 PNG 时，我得到这样的值：

```
I/memory  (  547): App Memory: Pss=21.33 MB
I/memory  (  547): Private=20.18 MB
I/memory  (  547): Shared=14.02 MB 
```

为什么使用 PNG 时内存使用量要高得多？

我有 110 张图片，大小从 75x75 到 1048x907（1KB 到 148KB）不等。GIF 的总大小为 1.39MB，PNG 的总大小 = 1.48MB。至于压缩，我使用 Paint.NET 来保存它们并使用“自动检测”作为位深度。

编辑：我回去看了看，大部分图像都保存为 8 位、256 色。

我猜 GIF 占用更少磁盘空间的事实是令人困惑的部分。似乎Android应该更轻松地处理PNG。

我正在使用表面视图并调用 canvas.drawBitmap

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T17:53:16.697

你的图片有多大？两者似乎有所不同...如果图像很小，例如 10px x 10px，那么 GIF 通常会变小。对于较大的图像，PNG（几乎？）总是较小的文件大小。

一般来说，我总是将 PNG 用于重要的资产，比如游戏中的玩家、按钮等。而 JPEG 用于背景等。

你是如何压缩你的PNG的？如果有的话？

# jquery - outputLabel 在淡入 jquery 后不呈现

> ID：16089841
> 
> 赞同：0
> 
> 时间：2013-04-18T17:48:37.050
> 
> 标签：jquery

fadein jquery 运行后 p:outputLabel 不会呈现。只有 PainelLogin.png 会渲染。p:outputLabel 确实渲染但立即淡出而无需任何操作等...

HTML表格：

```
 <div id="login-form">
    <p:outputLabel for="j_username" value="#{bundle.login_lblEMail}" />
    <p:inputText id="j_username" name="j_username"
    value="#{loginMB.usuario.nome}" />
    </div> 
```

脚本 ：

```
 $(document).ready(function() {

        $("div#login-form").fadeIn("slow");
        document.getElementById('login-form').style.display = 'block';
}); 
```

CSS：

```
#login-form {
    background-image: url("../resources/imagens/PainelLogin.png");
    background-repeat: repeat;
    -moz-opacity: 0.70;
    -khtml-opacity: 0.70;
    width: 300px;
    height:200px;
    display:none;
    z-index: -1;
    border-radius: 3px;
} 
```

你能帮我解决这个问题吗？提前谢谢..亚历克斯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T22:55:41.327

```
<style>
#login-form {
    background-image: url("../resources/imagens/PainelLogin.png");
    background-repeat: repeat;
    /*-moz-opacity: 0.70;
    -khtml-opacity: 0.70;*/
    width: 300px;
    height:200px;
    display:none;
    z-index: -1;
    border-radius: 3px;
}
</style> 
```

向您展示如何编写 jQuery 语法，这里是您的示例翻译。如果您已经在同一元素上专门使用 jQ a，则不需要完整的长语法。

```
$(document).ready(function() {
    $("div#login-form")
    .css({
        display:'bock', /*haha should be 'block' but is not needed in your code */
        border: '1px solid #000000'
    })
    .fadeIn(1000);
}); 
```

`$().fadeIn()`需要一个以 ms 为单位的值，

如果您`document.getElementById`使用元素，则不需要`<p>`，它们本质上是块，但如果您对它们进行样式设置，请使用更快的原生 CSS 或尝试学习一些 jQuery 语法。也许你也会因为你选择的 HTML 类型而出错，这是 IE 有时会生气的，但这个[thinker.io](http://tinker.io/826f8/1)到目前为止有效。我现在不能在 IE 上测试它，我在一个 11 岁的 MAC 上跳来跳去。正如我所看到的，这个问题在这里也可以重现，所以我认为上面的改变会起作用。让我知道..

**编辑：**在此 thinker.io 中，我还更改了您的 html 标记以显示它们变得可见

**编辑：** display：'bock'，我喜欢这样-我现在就这样！:)

# iar - CC2510 的 IAR Idatastack 错误

> ID：16089846
> 
> 赞同：1
> 
> 时间：2013-04-18T17:48:56.563
> 
> 标签：iar

我在德州仪器 CC2510 上使用 IAR。我没有插入任何评估套件。当我尝试“不下载调试”时，当我尝试运行代码时出现以下错误 - “堆栈'IdataStack'的堆栈指针（当前IData：0x07）在外面堆栈范围（IData：0xC0 到 IData：0x100）”知道如何解决这个问题吗？调试设置为模拟器。在项目选项下选择了正确的设备。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T08:43:21.767

你选择在模拟器中调试而不下载你要调试的代码。因此，将不会有任何代码将模拟处理器从其默认加电状态带到主启动状态。尝试通过下载进行调试，以便使用您要调试的图像初始化模拟器。

# laravel - 在 Laravel 3l 中，我想从 has_many 关系中使用 Eloquent 获得结果

> ID：16089849
> 
> 赞同：0
> 
> 时间：2013-04-18T17:49:00.937
> 
> 标签：laravel, laravel-3

我有 3 张桌子：

邀请、巢穴和用户。

邀请具有nest_id。巢有 user_id

我想获取所有具有相同nest_id 的用户。我如何在 elequent 中做到这一点？

模型具有 has_many 关系

* * *

我正在尝试在控制器中执行此操作：

```
$users = User::with('invite')->where('invites.nest_id', '=', $id)->get(); 
```

* * *

我收到此错误：

```
SQLSTATE[42S22]: Column not found: 1054 Unknown column 'invites.nest_id' in 'where clause'

SQL: SELECT * FROM `users` WHERE `invites`.`nest_id` = ?

Bindings: array (
  0 => '2',
) 
```

* * *

这是说我没有nest_id 列，但我有。

* * *

```
class User extends Eloquent
{

public static $table = 'users';
public static $accessible = array('username', 'email', 'picture', 'password');

public function nest()
{
    return $this->has_many('Nest');
}

    public function invite()
{
     return $this->has_many('Invite');
} 
```

* * *

```
class Nest extends Eloquent
{

public static $table = 'nests';

public function user()
{
    return $this->belongs_to('User');
}

public function idea()
{
    return $this->has_many('Idea');
}

public function invite()
{
    return $this->has_many_and_belongs_to('Invite');
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T20:08:51.317

Laravel 关系不使用连接，因此无法访问关系中的其他表。对于涉及“许多”的关系，这通常会更有效。这确实意味着您必须倒过来考虑这样的事情——您需要拥有给定 Nest 的 Invites 用户。

```
$invites = Invite::with('user')->where('nest_id', '=', $nest_id);
foreach ($invites as $invite)
{
    $invite->user;
} 
```

# c++ - 找出两个温度之间的差异

> ID：16089853
> 
> 赞同：-2
> 
> 时间：2013-04-18T17:49:05.750
> 
> 标签：c++

我有一个函数应该找到两个温度之间的差异。首先，我打印出摄氏温度和大约华氏温度，然后找到并打印它们之间的差异。我的问题是，当我运行程序时，所有的输出差异都是 58。

它应该在哪里打印出这样的东西：

```
C----AF----Diff
1----32----31
2----34----32 
```

等等

我的代码：

```
void calDiff(int& cel, int& appFar, int diff){
while(cel!= 101){
    diff = appFar - cel;
    cout << diff << endl;
    cel++;
    appFar++;
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T17:52:59.107

1.  您需要一个将摄氏温度转换为华氏温度的函数。
2.  您不想更改`cel`and `appFar`，然后删除引用`&`。

```
int cel2far(int cel)
{
     // convert cel to far and return approx. far
}

void calDiff(int cel, int appFar, int diff)
{
    while(cel!= 101){
        diff = appFar - cel;
        cout << diff << endl;
        cel++;
        appFar = cel2far(cel);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T17:54:02.810

您每次循环将摄氏度和华氏温度都增加一个，因此每次的差异都是相同的。仅仅因为您通过参考传递温度并不意味着它会在您更改它时为您重新计算华氏温度。您应该将摄氏度加一，重新计算华氏度，然后计算差异。

# python - 如何使用 django 分页显示对象范围？

> ID：16089855
> 
> 赞同：0
> 
> 时间：2013-04-18T17:49:09.117
> 
> 标签：python, django, dajaxice

我正在制作一个显示 5x5 [Dota 2](http://blog.dota2.com/)玩家物品背包网格的 AJAX 分页模板（见截图——它是由 steam 制作的）。

![Dota 2 玩家背包](https://i.stack.imgur.com/JTbkQ.png)

问题是，一个页面可以有空槽。

下面的代码不会处理它。如果第二个 slot 为空（没有`Item`value`slot_nb`字段`2`），当它应该显示在第二个页面时，具有 value 的对象将显示在第一页上（slot_nb 索引从`Item`开始）`slot_nb``25``0`

```
def get_pagination_page(page=1):
    items = Items.objects.all()
    paginator = Paginator(items, 25) # 25 items per page
    try:
        page = int(page)
    except ValueError:
        page = 1

    try:
        items = paginator.page(page)
    except (EmptyPage, InvalidPage):
        items = paginator.page(paginator.num_pages)

    return items 
```

我基本上想要的是渲染每个页面`Item.objects.filter(slot_nb=range(((page_nb*25)-25)), ((page_nb*25)-1))`（`page_nb`从 1 开始）

有可能实现这样的目标吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T18:40:29.330

Paginator 实际执行切片操作。

```
# paginator.py
...
return Page(self.object_list[bottom:top], number, self) 
```

所以你所要做的就是通过`Items`订购`slot_nb`

```
items = Items.objects.all().order_by('slot_nb') 
```

# paypal - 欧洲众筹支付网关（特别是葡萄牙）

> ID：16089858
> 
> 赞同：2
> 
> 时间：2013-04-18T17:49:15.703
> 
> 标签：paypal

我正在为我的小众筹网站实施贝宝自适应支付，我发现实际上贝宝并没有为非美国开发者提供选择。

[https://developer.paypal.com/webapps/developer/support/faq#non-US-dev](https://developer.paypal.com/webapps/developer/support/faq#non-US-dev)

有没有人发现这个问题的任何其他解决方案，用于欧洲国家的众筹，特别是西班牙或葡萄牙？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-13T14:46:57.177

Adaptive Payments 可在 PayPal 支持的任何国家/地区使用。您链接到的页面专门指的是 REST API，这是一种不同的产品，目前仅在美国可用。

您可以前往[https://apps.paypal.com](https://apps.paypal.com)注册自适应支付。

# macos - 在 OSX 上安装 OpenGL 4.0

> ID：16089860
> 
> 赞同：1
> 
> 时间：2013-04-18T17:49:25.767
> 
> 标签：macos, opengl, opengl-4

我想知道是否有任何可能的方法可以在 OSX 上更新到最新版本的 OpenGL。有没有办法在 OSX 上运行使用 OpenGL 4.0 调用的程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T20:42:37.383

等待 Apple 和/或[Mesa](http://www.mesa3d.org/)支持 4.0。

# c# - 在 .NET 中使用 sp_start_job 的返回值

> ID：16089863
> 
> 赞同：0
> 
> 时间：2013-04-18T17:49:29.347
> 
> 标签：c#, sql, asp.net-mvc, stored-procedures, sql-server-2008-r2

`sp_start_job`当我在存储过程中使用它时，我遇到了一个令人沮丧的问题，将其结果存储在一个变量中，然后选择该变量以供 .NET 使用。当我的 SP 在 Management Studio 查询窗口中运行时，它可以完美运行，所以我不知道出了什么问题。

我有一个由我的 SP 的结果集填充的对象：

```
public class SQLServerAgentResult : StoredProcResult
{
    public int? JobStatus { get; set; }
    public int? JobStartResult { get; set; } //This is the property for the result of sp_start_job
    public int? LastJobResult { get; set; }
} 
```

此方法使用数据上下文填充它：

```
public IList<SQLServerAgentResult> ExecuteSqlAgent(string JobName, bool? RunJob, TimeSpan? PollingInterval)
{
    const string myName = "usp_Run_Monitor_Agent_Job";

    List<SqlParameter> spParams = new List<SqlParameter>();

    spParams.Add(new SqlParameter()
    { 
        DbType = System.Data.DbType.String,
        ParameterName = "JobName",
        Value = JobName
    });
    string sp_exec = "usp_Run_Monitor_Agent_Job @JobName";

    if (RunJob != null)
    {
        spParams.Add(new SqlParameter()
        { 
            SqlDbType = System.Data.SqlDbType.Bit,
            DbType = System.Data.DbType.Boolean,
            ParameterName = "RunJob",
            Value = RunJob
        });
        sp_exec += ", @RunJob";
    }
    if (PollingInterval != null)
    {
        spParams.Add(new SqlParameter()
        {
            SqlDbType = System.Data.SqlDbType.VarChar,
            DbType = System.Data.DbType.Time,
            ParameterName = "TimerDelay",
            Value = PollingInterval
        });
        sp_exec += ", @TimerDelay";
    }

    try
    {
        Context.CommandTimeout = 120;
        List<SQLServerAgentResult> result = Context.SQLServerAgentResult.SqlQuery(sp_exec, spParams.ToArray()).ToList();

        return result;

    }
    catch (Exception ex)
    {
        log.Error(myName + " error", ex);
        throw ex;
    }
} 
```

应该注意的是，这个对象总是用我的存储过程中的数据填充的，`JobStatus`而且`LastJobResult`总是正确的。但是，`JobStartResult`应该包含 的结果的`sp_start_job`，只有存储过程中使用的变量的初始化值（在本例中为空值）。这可能是一个有效的结果（SP 可以决定不运行`sp_start_job`），但是当`sp_start_job`完成时，结果似乎没有保存到变量中，而我的对象将包含初始化值。

这是我的 SQL 代理 SP：

```
CREATE PROCEDURE usp_Run_Monitor_Agent_Job @JobName NVARCHAR(MAX), @RunJob BIT = 1, @TimerDelay VARCHAR(50) = '00:00:01'
AS

DECLARE @JobStatus INT
DECLARE @JobStart INT
DECLARE @JobResult INT
DECLARE @SQL NVARCHAR(MAX)
DECLARE @Params NVARCHAR(MAX)
DECLARE @IsProcessing BIT

SET @JobStatus = 0  --Works fine in .NET
SET @JobStart = null --If this is initialized as -1, 5, or 43276852349, then that is the result I will see in .NET, without exception
SET @JobResult = 0  --Works fine in .NET
SET @IsProcessing = 0

SET @SQL = N'SELECT @JobStatus_OUT = current_execution_status FROM OPENROWSET(''SQLNCLI'', ''Server=localhost;Trusted_Connection=yes;'', ''EXEC MSDB.dbo.sp_help_job @job_name = ''''' + @JobName + ''''', @job_aspect = ''''JOB'''' '')'
SET @Params = N'@JobStatus_OUT INT OUTPUT'

--Check to see if the job is currently running
EXEC sp_executesql @SQL, @Params, @JobStatus_OUT = @JobStatus OUTPUT;

--Check to see if the job is idle
IF @JobStatus = 4
BEGIN
    --Check to see if we should run the job
    IF @RunJob = 1
    BEGIN
        --This next line is the problem. It runs, but @JobStart doesn't contain the result of the sp_start_job when run through .NET.
        EXEC @JobStart = MSDB.dbo.sp_start_job @Job_Name = @JobName
        SET @IsProcessing = 1
        WHILE @IsProcessing = 1
        BEGIN
            --Now we need to wait for the job to finish
            WAITFOR DELAY @TimerDelay
            EXEC sp_executesql @SQL, @Params, @JobStatus_OUT = @JobStatus OUTPUT;

            --4 is "idle"
            --5 is "suspended", which means the job isn't running but it won't be able to be re-executed either
            IF @JobStatus = 4 OR @JobStatus = 5
                SET @IsProcessing = 0
        END
    END
END

SET @SQL = N'SELECT TOP 1 @JobResult_OUT = run_status FROM OPENROWSET(''SQLNCLI'', ''Server=localhost;Trusted_Connection=yes;'', ''SET FMTONLY OFF; EXEC MSDB.dbo.sp_help_jobhistory @job_name = ''''' + @JobName + ''''', @mode = ''''FULL'''' '') WHERE step_id = 0 ORDER BY run_date DESC, run_time DESC;'
SET @Params = N'@JobResult_OUT AS INT OUTPUT'
EXEC sp_executesql @SQL, @Params, @JobResult_OUT = @JobResult OUTPUT;

--Return job statuses
SELECT CAST(1 AS BIGINT) AS ID, @JobStatus AS JobStatus, @JobStart AS JobStartResult, @JobResult AS LastJobResult 
```

在故障排除过程中，我试图操纵`@JobStart`after`sp_start_job`执行的值。同样，我可以在 SSMS 中这样做并接收预期的结果，但从 .NET 中，变量仍将包含初始化值。

我愿意接受任何可以解释为什么它在 SSMS 而不是 .NET 中运行良好的信息，以及如何让它在 .NET 中运行。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T14:17:16.777

我修改了我的存储库方法以使用 ADO.NET 来调用我的存储过程。最初，我使用数据上下文来执行此操作。无论出于何种原因，它现在正确填充`JobStartResult`. 因此，代码现在按预期工作。

但是，我不知道*为什么*存储过程在通过数据上下文调用和通过 ADO.NET 调用时表现不同。

# python - 从python中带有名称的字符串中提取姓氏

> ID：16089866
> 
> 赞同：-3
> 
> 时间：2013-04-18T17:49:42.447
> 
> 标签：python, split

我有一个字符串，其名称用“and”分隔，以两种形式输入：“First Last”或“Last, First”。我想生成一个仅包含按字母顺序排序的姓氏的列表。我是 Python 新手，所以我想知道是否有更短或更好的方法来做我所做的事情：

```
names = 'John Foo and Baz, Mike Tom and Bar Foo, S. P.' 
authors  = [ i.strip() for i in names.split("and") ]
comma = [ i.split(',')[0] for i in [i for i in authors if "," in i] ]
nocomma = [ i.split()[-1] for i in [i for i in authors if not "," in i] ]
surnames = comma + nocomma
surnames.sort()
print surnames 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T18:15:26.337

事实上，您可以改进以下几点：

*   您应该拆分`' and '`以避免拆分包含字母的名称`and`（这种方式`trim`不再需要）
*   `for`不需要两个列表推导中的双循环
*   如果将 移到`if`列表理解的左侧，则只需要其中一个

最后，如果您愿意，您可以将整个内容放在一个稍长的列表理解中：

```
surnames = sorted(i.split(",")[0] if "," in i else i.split()[-1]
                  for i in names.split(" and ")) 
```

但是请注意，这仅在使用逗号分隔的样式书写具有多个姓氏的人时才有效。

# javascript - 在 node.js 上扩展 lodash/下划线？

> ID：16089871
> 
> 赞同：3
> 
> 时间：2013-04-18T17:49:58.027
> 
> 标签：javascript, node.js, module, underscore.js, lodash

Lodash 和 Underscore 有一个名为 mixin 的方法，允许您扩展库。你如何编写一个可以扩展它们的库？

例如，如果您创建了一个名为“extend_lodash.js”的文件，其内容如下：

```
_.mixin({
   new_function:function(){}
}) 
```

您将如何在您的项目中使用它？下面的代码不起作用：

```
_ = require("lodash");
require("extend_lodash.js"); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-10-30T19:30:09.670

正如“mu 太短”所暗示的那样，让您的文件使用 lodash mixin 返回 lodash。

在您的“extend_lodash.js”文件中：

```
var _ = require('lodash');
_.mixin({
  new_function:function(){}
});
module.exports = _; 
```

然后在调用者中，你只需要你的 mixin 并从中获取 lodash：

```
var _ = require("extend_lodash"); 
```

# javascript - 用文本框替换文本包含此文本

> ID：16089872
> 
> 赞同：-4
> 
> 时间：2013-04-18T17:49:58.920
> 
> 标签：javascript, html

我有一个包含一些文本的 html 文档，假设文档中的每一行都有一个单词，我想用包含该单词的文本框替换每个单词。有没有简单的方法（在javascript中）？一个实际的例子：假设我有一个 html 文档，其中包含一个包含我的成绩的表格，并且有一个包含平均值的单元格，我想用一个文本框替换每个成绩，然后让用户编辑成绩以计算新的平均

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T18:00:03.093

在[jsfiddle](http://jsfiddle.net/Xotic750/3VY4D/)上，但您需要更好地解释自己

```
<div>this</div>
<div>word</div>
<div>or</div>
<div>that</div>
<div>word</div>

var divs = document.getElementsByTagName("div");

Array.prototype.forEach.call(divs, function(div) {
    var word = div.textContent,
        textArea = document.createElement("input");

    div.textContent = "";
    textArea.value = word;
    div.appendChild(textArea);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T17:58:46.027

假设所有这些词都在 a 中`div`，这就是我使用 jQuery 解决问题的方法（抱歉，如果您正在寻找纯 JS）

HTML

```
<div>These are all yours words. You want to split ALL of these to new textboxes</div> 
```

jQuery

```
var currentText = $("div").text();
var arrWords = currentText.split(" ");

$("div").empty();
var newHtml = "";

for (var i = 0; i < arrWords.length; i++) {
    newHtml += "<input type='text' value='" + arrWords[i] + "'/><br/>";
}

$("div").append(newHtml); 
```

这是一个小提琴：http: [//jsfiddle.net/SeYqU/2/](http://jsfiddle.net/SeYqU/2/)

# javascript - 需要 Bootstrap Typeahead 本地、预取或远程

> ID：16089875
> 
> 赞同：14
> 
> 时间：2013-04-18T17:50:06.987
> 
> 标签：javascript, jquery, typeahead.js, bootstrap-typeahead, twitter-typeahead

我尝试让[这个](http://www.deanhume.com/Home/BlogPost/twitter-bootstrap-typeahead-and-asp-net-mvc---key-value-pairs/88)twitters typeahead 示例运行，但我在 chromes 控制台中收到错误：

> 未捕获的错误：需要本地、预取或远程之一 jquery-1.9.1.js:507

我正在使用 typeayhead 0.9.1（Nuget-Package）。这是版本问题吗？所有示例都在请求中设置源而不是本地/预取/远程。

编辑：原来 Twitter Bootstrap Typeahead 和 Twitter Typeahead 是两个不同的库。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-18T18:09:12.873

这仅意味着您需要提供一个列表，Typeahead 将在其中搜索完成值。

您必须真正传递至少一个数据源 (`prefetch`或`remote`) 或一个数据集 ( `local`)。

[https://github.com/twitter/typeahead.js#jquerytypeaheaddatasets](https://github.com/twitter/typeahead.js#jquerytypeaheaddatasets)

* * *

另外，应该注意的是[*Twitter typeahead*](http://twitter.github.io/typeahead.js/)和[*Twitter Bootstrap typeahead*](http://twitter.github.io/bootstrap/javascript.html#typeahead)不是同一个插件。他们有不同的API。您阅读的文章谈到了 Twitter Bootstrap 预输入：http: [//twitter.github.io/bootstrap/javascript.html#typeahead](http://twitter.github.io/bootstrap/javascript.html#typeahead)但您将它用作 Twitter 预输入！

# c# - SignalR HubProxy.Invoke 线程安全

> ID：16089876
> 
> 赞同：4
> 
> 时间：2013-04-18T17:50:10.083
> 
> 标签：c#, .net, multithreading, signalr

我的 (.Net) SignalR 客户端是一个多线程应用程序，我可以在所有客户端应用程序线程中重用一个 IHubProxy 吗？还是我需要同步对 IHubProxy.Invoke 的调用？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-18T18:21:33.597

SignalR `HubProxy`（以及扩展名`HubConnection`and `Connection`）应该是线程安全的。事实上，如果你`HubConnection.CreateHubProxy`多次调用同一个`hubName`，你应该得到相同的缓存`IHubProxy`对象。

如果您在使用`IHubProxy`非同步代码时发现任何问题，[请报告问题](https://github.com/SignalR/SignalR/issues)。

# ruby-on-rails - 为什么没有实例方法适用于 DateTime 对象？

> ID：16089881
> 
> 赞同：1
> 
> 时间：2013-04-18T17:50:26.473
> 
> 标签：ruby-on-rails, ruby

```
require 'date'
now = DateTime.now
sunday = now - now.wday

>> sunday = now - now.wday
=> #<DateTime: 53058180361250947/21600000000,-5/24,2299161> 
```

由于`sunday`is 是一个`DateTime`对象，我应该能够调用它的实例方法，例如`to_date`or `midnight`，这两个方法都在 Rails 文档中列出。

但是，这就是我得到的

```
>> sunday.to_time
NoMethodError: undefined method `to_time' for #<DateTime: 53058180361250947/21600000000,-5/24,2299161>
        from (irb):17 
```

实际上，这些实例方法都不适用于它。我正在使用irb模式，我不知道发生了什么。谁能告诉我如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T17:53:30.713

它们不是 Ruby 方法，它们是 Rails 方法，特别是在 Active Support 中。而且，在 IRB 中，默认情况下不加载 Active Support。

[http://api.rubyonrails.org/classes/DateTime.html#method-i-to_time](http://api.rubyonrails.org/classes/DateTime.html#method-i-to_time)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T18:02:12.050

将第一行更改为：

```
require 'active_support/time' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T18:32:14.010

你没有`require`主动支持模块。您可以加载整个模块，`require 'activesupport/all'`但大多数情况下这太过分了。

相反，Active Support 允许我们挑选想要包含在代码中的功能。“ [Active Support Core Extensions](http://edgeguides.rubyonrails.org/active_support_core_extensions.html) ”会告诉你一切。您可能想查看以下部分：

*   “[延期至今](http://edgeguides.rubyonrails.org/active_support_core_extensions.html#extensions-to-date)”
*   “[日期时间的扩展](http://edgeguides.rubyonrails.org/active_support_core_extensions.html#extensions-to-datetime)”
*   《[时间的延伸](http://edgeguides.rubyonrails.org/active_support_core_extensions.html#extensions-to-time)》

# android - 在sqlite数据库中插入行的最快方法是什么

> ID：16089884
> 
> 赞同：3
> 
> 时间：2013-04-18T17:50:37.583
> 
> 标签：android, json, sqlite

我有大约 7000 行要插入到设备的（Android Galaxy tab2）sqlite 数据库中。目前我正在解析 JSON 文件并使用“for”循环将行插入数据库。但是将数据解析和插入到 sqlite 数据库需要 120 多秒。有没有其他更快的方法来做到这一点？

谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T17:58:51.637

我遇到了完全相同的情况。首先，我使用的是 DatabaseUtil.insertHelper，600 个条目花了我 +30 秒的时间。

我做了更多的挖掘，发现我插入的每一行都被提交了，这非常昂贵。

为了解决这个问题，我切换到[ORMLite](http://ormlite.com/sqlite_java_android_orm.shtml)，使用 insertAll 方法：

```
/**
* Inserts multiple objects into the database quickly by committing them all at once
*
* @param objects The objects to insert
*/
public void insertAll(final T[] objects) {
    try {
        dao.callBatchTasks(new Callable<Void>() {

        @Override
        public Void call() throws Exception {
            for (T object : objects) {
                dao.create(object);
            }
            return null;    
        }
        });
    } catch (Exception e) {
    AdbLogger.error("Error inserting new " + className + "s in the database");
}
} 
```

这里的想法是他们插入对象数组，然后最后只做一个大提交。在此切换之后，插入变得几乎是瞬间的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-16T04:53:14.407

你应该使用`statements`

```
database.beginTransaction();
SQLiteStatement stmt = database.compileStatement(sql);

for (int i = 0; i < NUMBER_OF_ROWS; i++) {
    //generate some values

    stmt.bindString(1, randomName);
    stmt.bindString(2, randomDescription);
    stmt.bindDouble(3, randomPrice);
    stmt.bindLong(4, randomNumber);

    long entryID = stmt.executeInsert();
    stmt.clearBindings();
}

database.setTransactionSuccessful();
database.endTransaction(); 
```

[参考](https://stackoverflow.com/a/19637484/609782)

这里是[另外一个链接](http://www.techrepublic.com/blog/software-engineer/turbocharge-your-sqlite-inserts-on-android/)，其中给出了这两种插入方法之间的比较。（对于 100 条记录，正常插入需要 1657 毫秒，而语句`endTransaction()`需要 92 毫秒）

# javascript - Javascript 菜单悬停问题

> ID：16089886
> 
> 赞同：1
> 
> 时间：2013-04-18T17:50:42.687
> 
> 标签：javascript, jquery, menu

我正在尝试为他们以前的 Web 开发人员创建的客户端编辑 javascript 菜单。我不擅长 Javascript。客户要求我在 ROLLOVER 上展开菜单可扩展项，而不是在单击时展开。所以，我将 .click 更改为 .hover ，效果很好。问题是，当您将鼠标从主标题移到菜单的实际可扩展区域时，菜单会逐渐消失/消失。我感觉这与 .mouseneter 部分有关，但我不确定如何继续。想法？

```
function fadeMenu(el) {
    var delayMenu = setTimeout(function () {
        $(el).fadeOut(300);
        $(el).prev('.dropdown-toggle').removeClass('dropdown-enabled').animate({
            backgroundColor: 'transparent',
            color: '#000000'
        }, 300, function () {
            $(this).css({
                color: '',
                backgroundColor: ''
            });
        });
    }, 500);

    el.data('delayMenu', delayMenu);
}

$(document).ready(function () {
    $('a.dropdown-toggle').click(function () {
        var menu = $(this).next('.dropdown-menu');
        var link = $(this).parent('li');
        var otherMenus = $('.dropdown-menu').not(menu);
        var otherToggles = $('.dropdown-toggle').not($(this));
        var toggle = $(this);
        var toColor = '';

        if ($(menu).is(":visible")) {
            if ($(link).is(":hover")) {
                toColor = '#ff7e00';
            } else {
                toColor = '#000000';
            }

            $(menu).fadeOut(300);
            $(toggle).removeClass('dropdown-    enabled').stop().animate({
                backgroundColor: 'transparent',
                color: toColor
            }, 300, function () {
                $(this).css({
                    color: '',
                    backgroundColor: ''
                });
            });
        } else {
            if ($(otherMenus).is(':visible')) {
                $(otherMenus).fadeOut(300);
            }

            $(toggle).stop().animate({
                backgroundColor: '#1f1f1f',
                color: '#ffffff'
            }, 300).addClass('dropdown-enabled');
            $(menu).fadeIn(300);

            $(otherToggles).stop().animate({
                backgroundColor: 'transparent',
                color: '#000000'
            }, 300, function () {
                $(otherToggles).css({
                    color: '',
                    backgroundColor: ''
                });
            });

        }

        return false;
    });

    $('.dropdown-menu').mouseenter(function () {
        clearTimeout($(this).data('delayMenu'));
    }).mouseleave(function () {
        fadeMenu($(this));
    });

    $('.dropdown-toggle').mouseenter(function () {
        clearTimeout($(this).next('.dropdown-menu').data('delayMenu'));
    }).mouseleave(function () {
        fadeMenu($(this).next('.dropdown-menu'));
    });
}); 
```

# git - Maven 集成多个 Git 项目

> ID：16089893
> 
> 赞同：0
> 
> 时间：2013-04-18T17:51:07.463
> 
> 标签：git, maven, module, git-submodules

嗨：我有几个 git 项目，我想将它们集成到一个 Maven 构建中。有哪些可用的模板来执行此操作，是否存在描述这种构建的现有原型？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T18:55:41.113

我会为这个解决方案使用[maven 模块。](http://maven.apache.org/guides/mini/guide-multiple-modules.html)如果您构建然后是父级，则所有子级也将被构建。

[在这里](http://www.sonatype.com/books/mvnex-book/reference/multimodule.html)您可以找到一个如何使用 Maven 子模块的小示例。

这可以成为您的解决方案吗？

# database - VBScript：与 ODBC 的连接失败并显示错误消息“对象关闭时不允许操作”

> ID：16089898
> 
> 赞同：0
> 
> 时间：2013-04-18T17:51:18.017
> 
> 标签：database, vbscript, odbc, database-connection

我有下面的代码，它给我一个错误“对象关闭时不允许操作”。我在这里想念什么？

```
 Dim dbconnect, dbresults

 Set dbconnect = CreateObject("ADODB.Connection")
 Set dbresult = CreateObject("ADODB.Recordset")

dbconnectString =  "driver=iSeries Access ODBC Driver;System=***;UID=***;PWD=***;Naming=1"
dbconnect.Open (dbconnectString)        
mySQLQuerry ="Select XOORIG  from FIQDLIB.FSFPXO as400xo WHERE as400xo.xoefdt = 1130418 and as400xo.xotrsq in (75440)"
dbresult.Open mySQLQuerry, dbconnect 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T07:59:10.697

打开连接后检查[连接状态](http://msdn.microsoft.com/en-us/library/ms675068)`WScript.Echo dbconnect.State`。您的连接字符串也看起来关闭。根据[此页面](http://connectionstrings.com/as-400#ibm-iseries-access-odbc-driver)，驱动程序名称应放在大括号中。

# php - PHP Cron 脚本 - 从 CSV 文件和电子邮件中读取（UTF-8？）

> ID：16089903
> 
> 赞同：0
> 
> 时间：2013-04-18T17:51:35.567
> 
> 标签：php, mysql, utf-8, cron, hebrew

我在这个问题上苦苦挣扎了几天，阅读并尝试了我遇到的任何问题，但没有找到解决方案：这是我想做的底线：我有一个仅限会员的系统。当成员在留言板上发布消息时，所有其他人都会通过电子邮件收到通知。简单的。我使用 PHP 脚本在 CSV 文件中创建收件人列表（电子邮件和姓名），存储该文件以供 cron 作业稍后打开并将电子邮件发送出去。简单的。哦...名称是希伯来语脚本，因为它们存储在 MySQL 数据库中。我已经手动尝试了脚本（通过浏览器运行它，一切都很顺利）。但是，通过 cron 运行它不会读取名称并将其留空：

```
while($arrMailAttrib = fgetcsv($hFile))
{
    $sAptName   = $arrMailAttrib[0];
    $sAptNum    = $arrMailAttrib[1];
    $sTo        = $arrMailAttrib[2];
    $sSubject   = $arrMailAttrib[3];
    $sMsgURL    = $arrMailAttrib[4];
    $sBody      = "<span style=\"font-family: Arial, Helvetica, sans-serif; direction: rtl !important; vertical-align: right; display: block;\" lang=\"he\" dir=\"rtl\"> <p>שלום $sAptName (מספר חבר $sAptNum),</p> <p>הודעה חדשה בנושא '$sSubject' נוצרה בלוח המודעות הוירטואלי.</p> <p>על מנת לצפות בהודעה ישירות במערכת <a href=\"$sMsgURL\">כאן</a></p> <p>על מנת להכנס למערכת  הכנס ל: <a href=\"http://www.somesite.com\">http://www.somesite.com</a> </p> <p><font size=\"-1\" color=\"#999999\">זוהי הודעת אימייל אוטומטית. נא לא להגיב לכתובת אימייל זו.</font></p> <p>&nbsp;</p> </span>";
    if(defined('_DEBUG_')) {fputs($hLogFile, "sending email with subject '$sSubject' to $sTo\n");}
    mail($sTo, $sSubject, $sBody, $sHeaders);
} 
```

CSV 是使用从数据库中获取的名称和电子邮件直接创建的。我很肯定这与编码有关 - 但我似乎无法确定到底是什么。这是 CSV 文件中的几行：שמואלי，

```
1,בהיר,someone1@gmail.com,הודעה נסיונית,http://www.somesite.com/_new.message_present.php?fldMsg=111
    כהן,2,someone2@gmail.com,הודעה נסיונית,http://vwww.somesite.com/_new.message_present.php?fldMsg=112
    שפיר,4,someone3@hotmail.com,הודעה נסיונית,http://www.somesite.com/_new.message_present.php?fldMsg=113
    ליבוביץ,5,someone4@metis.asia,הודעה נסיונית,http://www.somesite.com/_new.message_present.php?fldMsg=114 
```

另一件值得注意的事情是，我收到来自 cron 作业的电子邮件错误，其中仅包含以下文本：“Content-type:text/html”

顺便说一句 - 电子邮件对收件人来说很好，电子邮件的正文以希伯来语显示。唯一缺少的是主题和名称。

任何人 ...？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T18:01:40.533

可能是编码问题试试这个：在记事本中打开你的 .csv 文件，然后选择 -> 另存为。在“另存为”框的底部，有一个标记为“编码”的选择框。选择 UTF-8。选择 UTF-8 后，选择“另存为类型”下的任何类型，然后将文件保存为与原始文件名略有不同的文件名。

您还必须将此行添加到您的 php 代码中： header("Content-Type: text/html; charset=UTF-16LE");

你能告诉我们你到底得到了什么消息错误:)字符是如何显示的？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T13:25:07.857

好的，找到了解决方案。这适用于所有遇到类似问题的人，不一定是希伯来语，而是任何其他多字节语言： ***fgetcsv*不支持 multibyte**。因此，它永远不会阅读希伯来语。第一步是我必须用*fwrite写入文件并用**fread*读取它，而不是使用*fputcsv*和*fgetcsv*。第二步是使用 mb_send_mail() 函数而不是普通的 mail() 函数，在调用它之前，设置 mb_language('he') 和 mb_internal_encoding('UTF-8')。现在一切正常。Cron 完美地发送电子邮件。

# jquery - JQuery Hoverintent slideUp的问题

> ID：16089904
> 
> 赞同：1
> 
> 时间：2013-04-18T17:51:35.777
> 
> 标签：jquery, jquery-ui, jquery-plugins, jquery-effects, hoverintent

我一直在使用 JQuery Hoverintent 插件，我已经取得了一些不错的进展，但我也有一个问题，使用 .hide、.slideUp 等带有 out: 函数以确保 hoverintent 滚动的覆盖不会不只是在悬停时立即消失。目前我无法弄清楚为什么：只是让覆盖立即消失而没有任何效果。

查询：

```
$(function satisfactionGaugeHoverIntent() {
    satisfactionConfig = {
        sensitivity: 3, // number = sensitivity threshold (must be 1 or higher)
        interval: 200, // number = milliseconds for onMouseOver polling interval
        timeout: 0, // number = milliseconds delay before onMouseOut
        over: function () {
            $('#satisfactionOverlay').show("drop", { direction: "up" }, 1000);
        },
        // function = onMouseOver callback (REQUIRED)
        out: function () {
            $('#satisfactionOverlay').slideup('slow', 500);
        } // function = onMouseOut callback (REQUIRED)
    }
    $('#satisfactionChartButton').hoverIntent(satisfactionConfig);
}); 
```

HTML：

```
<div id="satisfactionChartButton" class="large-3 large-offset-1 columns modalGaugeArea allGaugesSetup">
    <div class="chartModalTitle">Customer Satisfaction</div>
    <div id="customerSatisfactionGauge" class="gaugeContainer"></div>
    <input id="customerSatisfactionGaugeValue" type="hidden" data-url="@Url.Action(MVC.ATSNavigator.SatisfactionTotalAverageData())" />
    <div class="chartModalDialog">rating out of 5</div>
    <div id="satisfactionOverlay">
        <div class="overlayChartTitle">
            Customer Satisfaction<br />
            Chart
        </div>
        <img class="overlayImages" src="@Url.Content(Links.Content.img.wht_Desktop_Analytics_png)" />
        <div class="overlayChartDialog">Click to View Chart</div>
    </div>
</div> 
```

over: 函数运行良好，out 是问题。有什么建议为什么看起来这个功能不起作用？

# php - Python 和 PHP / MAMP

> ID：16089917
> 
> 赞同：1
> 
> 时间：2013-04-18T17:52:23.857
> 
> 标签：php, python, mysql, mamp

我最近让 python 在终端中使用 MAMP。下面的脚本在终端中工作并打印它应该的内容：

```
#!/usr/bin/python
import MySQLdb

db = MySQLdb.connect (unix_socket = '/Applications/MAMP/tmp/mysql/mysql.sock',
                    host = 'localhost',
                    user = '*****',
                    passwd = '****',
                    db = 'Database')

cur = db.cursor() 

cur.execute("SELECT * FROM TABLE")

for row in cur.fetchall() :
    print row[0]
    print row[1] 
```

但是，当我通过 PHP 调用它时它不起作用：

```
exec("python test.py",$output);
echo $output[0] 
```

我收到以下 PHP 错误

> 注意：未定义的偏移量：第 7 行 /test.php 中的 0

我创建了第二个测试 python 脚本，如下所示：

```
import MySQLdb
print 'worked' 
```

它按预期工作 - 但只有当我有

```
import MySQLdb 
```

注释掉了。

有什么建议么？

# python - python处理给定函数所需的时间？

> ID：16089919
> 
> 赞同：0
> 
> 时间：2013-04-18T17:52:27.610
> 
> 标签：python, function, processing

我编写了一个 python 脚本，它与许多函数进行了大量的字符串比较。如果我要运行当前流程，则需要一个月才能完成。我想让代码更有效率，但不知道应该把重点放在哪里。

有没有办法让 python 告诉你它通过每个函数需要多长时间？

显然，让它计算处理函数所需的时间会占用资源。

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T17:54:10.420

您正在寻找的是探查器，这是一个很好的起点：[http ://docs.python.org/2/library/profile.html](http://docs.python.org/2/library/profile.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T17:58:01.193

您正在寻找的是[探查器](http://docs.python.org/3.3/library/profile.html)：

> 配置文件是一组统计信息，描述程序的各个部分执行的频率和时间

# java - 在 Java 上使用 SSL 和 Soap，没有 servlet

> ID：16089927
> 
> 赞同：3
> 
> 时间：2013-04-18T17:53:07.453
> 
> 标签：java, soap, ssl

我正在遵循一个相当有用的在线教程来创建一个使用 mysql 调用存储过程的肥皂服务器。这工作得很好，我得到的代码可以使用像 SoapUI 这样的程序正确响应。代码如下：

```
@WebService
public class test {

@WebMethod
public String login(String username, String password) throws SQLException {
    String url = "jdbc:mysql://localhost:3306/test";
    String DBusername = "test";
    String DBpassword = "test";
    Connection con = DriverManager.getConnection(url, DBusername, DBpassword);

    Statement stmt = null;
    String query = " CALL authorize_user('" + username + "','" + password + "')";

    try {
        stmt = con.createStatement();
        ResultSet rs = stmt.executeQuery(query);
        while (rs.next()) {
            String login = rs.getString("au_result");

            if (login != null)
                return login;
            else {
                return "Login Failed";
            }
        }
    } catch (SQLException e) {
        System.out.println("Error: " + e);
    } finally {
        if (stmt != null) {
            stmt.close();
        }
    }
    return "Login Failed";
}

public static void main(String[] args) {
    test test = new test();
    @SuppressWarnings("unused")
    Endpoint endpoint = Endpoint.publish("http://localhost/testing", test);
} 
```

}

因此，当您输入数据库中的用户名和密码时，它会返回一个肯定的结果。这只是测试代码，因为可能会按照现在的设置方式注入代码，但很快就会改变。

但是，我正在尝试找到一种为此服务器使用 SSL 的方法，而我能找到的唯一信息是如何在使用包装程序或某些 servlet 包装器创建肥皂服务器时使用 SSL。在这一点上我们不想走这条路，除非我们能找到一个非常非常好的理由来浪费时间学习新代码。我将如何在不使用任何第三方代码的情况下为此代码使用 SSL 连接？我们已经拥有一家信誉良好的公司的证书，该证书在我们的常规网站的服务器上运行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-28T01:36:37.913

您是否考虑过非编程解决方案？

只需将带有 SSL 的 Apache 作为反向代理放在您的 Web 服务器之前。

*   无需编写一行代码（安全漏洞的可能性较小）
*   您获得 SSL
*   你得到平衡器（如果你需要的话）
*   你得到缓存（如果你需要的话）等等

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-30T14:37:51.670

您已经包含了一个连接到数据库以验证用户 ID 和密码的代码（下面我的示例中的最后一步），这有点令人困惑，因为据我所知，这不是您需要帮助的。让我先了解您的架构（我希望这是我们所有人开始设计数据架构以保护用户 ID 存储的方式）。

```
web-app -> user authentication client
   ---->{SOAP CALL}--->
       SSL-proxy-of-some-sort -> SOAP server -> User Authentication Service -> user ID database. 
```

这是正确的表示吗？如果是，我假设您希望将用户密码存储在隐藏在防火墙后面的单独数据存储中，并且只能使用 SOAP 访问以避免“生活社交”情况（黑客窃取了 5000 万用户 ID 和密码）黑客有可能通过某些 SQL 注入软件或其他漏洞访问数据存储。如果这样理解正确吗？

现在在大多数情况下，我同意 Victor Ronin 的上述回应，即您应该考虑使用带有 SSL 的 Apache 服务器来前置您的“soap 服务器”。但是，即使要访问 SSL 包装的 SOAP 服务器（不管您如何操作），您仍然需要编写可以处理这种 SSL 通信的 Java 代码。我建议您查看这篇文章（不是我的），看看是否有帮助。

[http://juliusdavies.ca/commons-ssl/ssl.html](http://juliusdavies.ca/commons-ssl/ssl.html)

顺便说一句，除非您通过 WAN 进行此身份验证，否则我无法想象需要 SSL 加密。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-30T13:15:41.990

您应该尝试使用处理程序链，这样处理程序链将在您的任何肥皂调用之前执行，您可以丢弃任何不适合您想做的任何事情的消息。

更多关于howTo的信息：http://pic.dhe.ibm.com/infocenter/wasinfo/v6r1/index.jsp?topic=%2Fcom.ibm.websphere.wsfep.multiplatform.doc%2Finfo%2Fae%2Fae% [2Ftwbs_jaxwshandler .html](http://pic.dhe.ibm.com/infocenter/wasinfo/v6r1/index.jsp?topic=%2Fcom.ibm.websphere.wsfep.multiplatform.doc%2Finfo%2Fae%2Fae%2Ftwbs_jaxwshandler.html)

# php - 无法从另一个文件调用 PHP 内容

> ID：16089928
> 
> 赞同：0
> 
> 时间：2013-04-18T17:53:07.613
> 
> 标签：php, joomla

我正在开发一个 Joomla 模块，并且正在测试基本方法。我有我的第一个文件：

文件1.php

```
<?php
defined('_JEXEC') or die('Direct Access to this location is not allowed.');
$AdVisualV2jMODPHP_ver='0.3.0070';
$Station_ID = $params->get('Station_ID');

$Start=0;
$Page=10;
echo 'AVVIAMO LA PROCEDURA 0.0.66 - '.$Station_ID.'<br>';
echo '<div id="TabellaEventi"></div>';
echo '<INPUT Type="BUTTON" VALUE="Avanti" ONCLICK="avanti()"> ';
echo '<INPUT Type="BUTTON" VALUE="Indietro" ONCLICK="indietro()"> ';
echo '<br>';
?>

<script>

function avanti() {
    xmlhttp=new XMLHttpRequest();
    xmlhttp.onreadystatechange=function()
        {
        if (xmlhttp.readyState==4 && xmlhttp.status==200)
            {
            Esito=xmlhttp.responseText;
            }
        }
    xmlhttp.open('GET','DisplayEvents.php',false);
    xmlhttp.send();
//  document.write(Esito);
    document.getElementById('TabellaEventi').innerHTML='CLICCO QUESTO AVANTI';
}

function indietro() {
    document.getElementById('TabellaEventi').innerHTML='Pulsante INDIETRO nella div<br>questo su due righe<br>';
}
</script> 
```

这里有文件 DisplayEvents.php：

```
<?php
echo 'Da qui siamo nella routine display<br>';
echo 'Procediamo pure<br>';
?> 
```

我在其他时候使用过这种方式，使用 XMLHttpRequest 我将文件 DisplayEvents.php 的所有文本输出放入变量 Evento 中，然后我可以打印或做我想做的事。但根本行不通。

其他时候我在带有 PHP 的 HTML 文件中使用过这种方式，这次是带有 PHP 的 PHP，但我无法理解。

这次我哪里错了？谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T17:56:05.147

根据您提供的信息，我很想知道您的路径是否有问题。

改变：

```
xmlhttp.open('GET','DisplayEvents.php',false); 
```

至：

```
xmlhttp.open('GET','/DisplayEvents.php',false); 
```

使用 Chrome 的开发者控制台或 Firefox 和 FireBug 并查看网络选项卡上的响应。这将清楚地向您显示状态和响应代码。

另外，请查看您的文件`access_logs`，看看是否有调用该`DisplayEvents.php`文件的条目。

# sql - SQL Server 生成脚本以更改数据类型

> ID：16089929
> 
> 赞同：0
> 
> 时间：2013-04-18T17:53:09.940
> 
> 标签：sql, sql-server

我正在使用 SQl 服务器管理工​​作室，试图将数据类型从 char(8) 更改为 char(10) 但是它不会让我真正“保存”生成脚本（我必须将脚本发送给场外的人）

有没有办法在 SQL Management Studio 中执行此操作（实际数据库为 2008R2）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T17:57:35.840

```
ALTER TABLE table_name ALTER COLUMN column_name new_datatype nullability 
```

请小心，在句末添加`null`或`not null`代替，`nullability`因为在其他情况下这可能会改变

只是为了展示可空性如何惹恼：[这里的 sqlfiddle](http://www.sqlfiddle.com/#!3/d41d8/12691)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T18:02:16.563

SSMS 可以在数据库图中生成更改脚本。只需将您的表格添加到新图表中，进行更改，然后不保存，然后点击“生成更改脚本”按钮（或菜单项）。

或者您可以`alter table`从头开始编写正确的语句。

# grid - 自定义网格页面大小如何工作？

> ID：16089931
> 
> 赞同：1
> 
> 时间：2013-04-18T17:53:11.783
> 
> 标签：grid, report, rally

我们使用 Rally 自定义网格应用程序根据查询显示用户故事。我真的不明白“页面大小”的价值。

如果查询返回 100 行并且“页面大小”设置为十 (10)。看来该页面确实停在十行。

我不应该看到“下一页”按钮/图标/等>吗？这将使我看到接下来的十个。

此“页面大小”允许值 200 及以下？为什么最大值是 200？我可以将此最大值更改为 500 吗？

提前感谢吉姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T20:29:36.610

如果我没记错的话，自定义网格曾经在底部有一个分页工具栏，如下所示：

![在此处输入图像描述](https://i.stack.imgur.com/xVg3r.png)

不幸的是，这似乎不再是一种选择。由于它目前的功能，将页面大小设置为最大值 (200) 是唯一合乎逻辑的选择，因为它允许您在网格中查看尽可能多的条目。但是，我会支持 200 有时还不够的论点。

# maven - Maven + Jaxb 编组重音字符 + 单元测试

> ID：16089945
> 
> 赞同：1
> 
> 时间：2013-04-18T17:54:13.200
> 
> 标签：maven, jaxb, marshalling, unmarshalling

我目前有一个单元测试，它将 XML 文件解组为 Jaxb 对象，然后将其编组为字符串并将其与原始 xml 字符串进行比较：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = {"/info/info-element-reader-test-context.xml"})
public class InfoElementReaderTest {

    private static final Logger logger = LoggerFactory.getLogger(InfoElementReaderTest.class);

    @Autowired
    private InfoElementReader infoElementReader;

    @Test
    public void testMarshalling() throws Exception {

        Marshaller marshaller = infoElementReader.getJaxbContext().createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.setProperty(Marshaller.JAXB_ENCODING, "UTF-8");

        // Unmarshall into java bean
        InfoElement infoElement = infoElementReader.unmarshallInfoElement();
        ByteArrayOutputStream outStream = new ByteArrayOutputStream();
        marshaller.marshal(infoElement, outStream);
        logger.info("marshalled XML: {}", outStream.toString());

        String fromFile = IOUtils.toString(infoElementReader.getInfoResource().getInputStream(), "UTF-8").replaceAll("\\s","");

        String marshalled = outStream.toString().replaceAll("&quot;", "\"").replaceAll("\\s","");

        assertEquals("file contents should equal marshalled output", fromFile, marshalled);
    }
} 
```

当我在我的 IDE（Intellij IDEA）中运行此测试时，它似乎没有问题，但是当我使用 mvn clean package 编译时，此单元测试失败，因为 XML 中的所有重音字符，即。Reddetelefoníamóvil，变成 Reddetelefon[?am?vil 和弦显然不相等。

不确定这是否是 maven 或其他问题的问题，但我们将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T21:37:05.830

您是否在 pom 文件中设置了编码？UTF-8

# vb.net - OleDB 获取表问题 - 工作表名称完全是数字

> ID：16089947
> 
> 赞同：0
> 
> 时间：2013-04-18T17:54:21.987
> 
> 标签：vb.net, oledb

我正在使用以下函数从 OleDB 模式表中获取工作表名称：

```
Public Function GetSheetName(ByVal dtSchema As DataTable) As String
        Dim sheetName As String = ""
        Try

            If Not dtSchema.Rows(0)("TABLE_NAME").ToString().Contains("#") Then
                sheetName = dtSchema.Rows(0)("TABLE_NAME").ToString()
            End If

        Catch ex As Exception
            BuildResultTraceString("Exception in GetSheetName")
            BuildResultTraceString(ex.Message)
        End Try

        Return sheetName
    End Function 
```

然后我得到这样的表：

```
sql.Append("SELECT * FROM [" & sheetName & "A22:T10000]")
dt = _dh.GetTable(sql.ToString()) 
```

但是，当我尝试加载名为“20130418113010937”的工作表时，Get Table 方法会捕获此异常：

`The Microsoft Access database engine could not find the object ''20130418113010937$'A2:I10000'`

它适用于我正在使用的所有其他工作表名称，但不适用于这个名称。我认为这是因为它完全是数字的。有什么解决方法吗？该过程是自动化的，因此除非我以某种方式以编程方式进行，否则我无法手动更改工作表名称。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T18:37:00.920

你是对的，问题是数字表名称。当您使用 OleDB 检索工作表名称时，它会通过用单引号将数字名称括起来（大概是为了保留其字符串）来为您提供“帮助”。

删除表名两端的单引号，你应该很好：

```
sheetName = dtSchema.Rows(0)("TABLE_NAME").ToString().Trim("'") 
```

# c# - C# - 获取文件夹后代的 LastWriteTime

> ID：16089948
> 
> 赞同：2
> 
> 时间：2013-04-18T17:54:23.163
> 
> 标签：c#, file-io, directory

如何检索文件夹**任何**后代的最新写入时间？

我需要一个方法来返回在指定日期时间之后修改的所有文件的路径。我想我可以通过确保目录[LastWriteTime](http://msdn.microsoft.com/en-us/library/system.io.filesysteminfo.lastwritetime.aspx)在指定范围内来节省大量昂贵的磁盘读取，然后再遍历其文件和子目录。

这样做的原因是，当目录顶层中的文件发生更改时，文件夹的最后写入时间也会更新。但是，最后一次写入时间不会比文件的直接父级更远。换句话说，如果孙文件被改变，它的属性被更新，它的父亲文件夹也是如此，但不是祖父文件夹。

是否有另一个高级指标可以用来完成此操作，或者我是否必须求助于递归遍历每个文件夹，而不管上次更改时间如何？

这是目前的方法：

```
private void AddAllFilesOfAllSubdirsWithFilterToList(string dirPath, ref List<FileInfo> filesList, DateTime minDate)
{
    // Return files in this directory level
    foreach (string filePath in Directory.GetFiles(dirPath, "*.*", SearchOption.TopDirectoryOnly))
    {
        FileInfo fileInfo = new FileInfo(filePath);
        if (fileInfo.LastWriteTimeUtc > minDate)
        {
            filesList.Add(fileInfo);
        }
    }

    // Return recursive searches through sudirs
    foreach (string subDirPath in Directory.GetDirectories(dirPath))
    {
        DirectoryInfo dirInfo = new DirectoryInfo(subDirPath);
        if (dirInfo.LastWriteTimeUtc > minDate)
        {
            GetAllFilesOfAllSubdirsWithFilter(subDirPath, ref filesList);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T15:54:19.320

感谢你的帮助！

**摘要：**因此，由于`DirectoryInfo`对象上没有显示文件树中任何后代的最后写入时间的属性（仅适用于子文件），因此让 CLR 返回所有后代文件的集合似乎是一个简单的修复方法

```
Directory.GetFiles(dirPath, "*.*", SearchOption.AllDirectories); 
```

但是，在我的情况下，这有一些性能弱点：

1.  这个过程是从后端 Web 处理程序运行的，因此性能很重要，因为浏览器正在等待写入目录结果
2.  所有文件都由 返回`GetFiles`，让您在之后过滤它们。就我而言，这是一个**庞大**的集合，我只能从中收集到少数最近更改的文件
3.  我之前没有提到这一点，但我也有一些我不想搜索的路径集合，我在我的实际代码中传递了这些路径——在迭代子文件夹之前检查路径为我提供了性能改进

这是我现在拥有的：

```
private void AddAllFilesOfAllSubdirsWithFilterToList(ref List<FileInfo> filesList, string dirPath, DateTime startDateUtc, DateTime? optionalEndDateUtc = null, List<string> blockedDirs = null)
{
    // Input validation
    if (String.IsNullOrEmpty(dirPath))
    {
        throw new ArgumentException("Cannot search and empty path");
    }

    DirectoryInfo currentDir = new DirectoryInfo(dirPath);
    if (!currentDir.Exists)
    {
        throw new DirectoryNotFoundException(dirPath + " does not exist");
    }
    if (filesList == null)
    {
        filesList = new List<FileInfo>();
    }

    // Set endDate; add an hour to be safe
    DateTime endDateUtc = optionalEndDateUtc ?? DateTime.UtcNow.AddHours(1);

    // The current folder's LastWriteTime DOES update every time a child FILE is written to,
    // so if the current folder does not pass the date filter, we already know that no files within will pass, either
    if (currentDir.LastWriteTimeUtc >= startDateUtc && currentDir.LastWriteTimeUtc <= endDateUtc)
    {
        foreach (string filePath in Directory.GetFiles(dirPath, "*.*", SearchOption.TopDirectoryOnly))
        {
            FileInfo fileInfo = new FileInfo(filePath);
            if (fileInfo.LastWriteTimeUtc > _sinceDate)
            {
                filesList.Add(fileInfo);
            }
        }
    }

    // Unfortunately, the current folder's LastWriteTime does NOT update every time a child FOLDER is written to,
    // so we have to search ALL subdirectories regardless of the current folder's LastWriteTime
    foreach (string subDirPath in Directory.GetDirectories(dirPath))
    {
        if (blockedDirs == null || !blockedDirs.Any(p => subDirPath.ToLower().Contains(p)))
        {
            AddAllFilesOfAllSubdirsWithFilterToList(ref filesList, subDirPath, startDateUtc, optionalEndDateUtc, blockedDirs);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T18:23:02.493

很抱歉，但我认为您必须浏览所有子目录。

只需从上面的代码中更改您的 SearchOption 以通过子目录递归...

```
private void AddAllFilesOfAllSubdirsWithFilterToList(string dirPath, ref List<FileInfo> filesList, DateTime minDate)
{
    // I'm assuming you want to clear this here... I would generally return it 
    //   instead of passing it as ref
    filesList.Clear();

    // Return all files in directory tree
    foreach (string filePath in Directory.GetFiles(dirPath, "*.*", SearchOption.AllDirectories))
    {
        FileInfo fileInfo = new FileInfo(filePath);
        if (fileInfo.LastWriteTimeUtc > minDate)
        {
            filesList.Add(fileInfo);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T18:23:55.567

**您**不必通过目录树递归。CLR 非常乐意为您做这件事。

```
public FileInfo[] RecentlyWrittenFilesWithin( string path , string searchPattern , DateTime dateFrom , DateTime dateThru )
{
  if ( string.IsNullOrWhiteSpace( path ) ) {  throw new ArgumentException("invalid path" , "path" );}
  DirectoryInfo root = new DirectoryInfo(path) ;
  if ( !root.Exists ) {  throw new ArgumentException( "non-existent directory" , "path" ) ; }
  bool isDirectory = FileAttributes.Directory == ( FileAttributes.Directory & root.Attributes ) ;
  if ( isDirectory ) {  throw new ArgumentException("not a directory","path");}

  FileInfo[] files = root.EnumerateFiles( searchPattern , SearchOption.AllDirectories )
                         .Where( fi => fi.LastWriteTime >= dateFrom && fi.LastWriteTime <= dateThru )
                         .ToArray()
                         ;
  return files ;
} 
```

根据这里的上下文（例如，如果你的程序是某种服务），你可以`FileSystemWatcher`在你的根目录上建立一个并监控发生的变化。

# ios - iOS ,NSDocumentDirectory 获取 nsurl 或路径文件

> ID：16089957
> 
> 赞同：3
> 
> 时间：2013-04-18T17:54:45.133
> 
> 标签：ios, nsdictionary, mpmovieplayercontroller, nsurl

我有保存 mp3 文件的代码

```
NSArray *documentPath = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *docDirectory = [documentPath objectAtIndex:0];

    NSString *fileName = [[NSString alloc] initWithFormat:@"%@%@.mp3", dateString ,timeString ];

    NSURL* fileURL = [NSURL URLWithString:myString];
    NSError* error = nil;
    NSData* data = [NSData dataWithContentsOfURL:fileURL options:0 error:&error];

     NSString *savePath = [docDirectory stringByAppendingPathComponent:fileName];

    [data writeToFile:savePath atomically:YES]; 
```

现在我想通过**MPMoviePlayerController读取这个文件**

如何获取路径或nsurl文件

--- somthing 代码与此相同

```
 NSURL * urlv = [[NSURL alloc] initWithString:myString];
     avPlayer = [[MPMoviePlayerController alloc] initWithContentURL:urlv];
    [avPlayer prepareToPlay];
    [avPlayer play]; 
```

请帮助搜索 mystrig 或 nsurl 源

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-18T18:39:52.977

```
NSString *filename = @"whatever you've saved your filename as";
NSArray *pathArray = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask,YES);
NSString *documentsDirectory = [pathArray objectAtIndex:0];
NSString *yourSoundPath = [documentsDirectory stringByAppendingPathComponent:filename];

if ([[NSFileManager defaultManager] fileExistsAtPath:soundPath])
{
    NSURL *soundURL = [NSURL fileURLWithPath:soundPath isDirectory:NO];
}

//Then just init your player with the contents of that URL 
```

# java - $%,.2f 代表什么？

> ID：16089958
> 
> 赞同：4
> 
> 时间：2013-04-18T17:54:55.917
> 
> 标签：java, printf

我目前正在阅读 Deitel 关于 Java 的书，并在他们的一个程序中遇到了这段代码：

```
public String toString()
{
  return String.format( "%s: %s\n%s: $%,.2f; %s: %.2f", 
     "commission employee", super.toString(), 
     "gross sales", getGrossSales(), 
     "commission rate", getCommissionRate() );
} 
```

正如标题所说，“.2f”前面的“$%”代表什么？我已经知道 .2f 是什么意思。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-18T17:57:48.677

这个`$`角色在这里没有什么特别的意义。它只是`$`显示在字符串中的文字。该`%`字符在这里具有通常的含义——用一个值替换（在这里，有 2 个小数位）。

请注意，字符可能在`$`字符之后具有含义`%`。[`Formatter`](http://docs.oracle.com/javase/7/docs/api/java/util/Formatter.html)有关详细信息，请参阅 javadocs的“参数索引”部分。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-18T17:57:38.467

$ 实际上是美元符号，而 % 是参数 %,.2f 的开头（带有 2 个小数和逗号的浮点数）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-18T17:59:50.953

`%,.2f` - 格式浮点数，带逗号，小数点后 2 位。

# javascript - 计算“ng-repeat”循环了多少次，然后在 Angular.js 中导出为字符串/值？

> ID：16089961
> 
> 赞同：0
> 
> 时间：2013-04-18T17:55:18.187
> 
> 标签：javascript, angularjs

我目前正在尝试在我的 Angular.js 应用程序中构建一个“喜欢”功能。我有基本的“喜欢”部分，代码如下：

```
$scope.likeClicked = function () {

      if (!hasLiked) {
          hasLiked = true;
          $scope.liked = 'Unlike';
          $scope.likeCount += 1;
      } else {
          hasLiked = false;
          $scope.liked = 'Like';
          $scope.likeCount -= 1;          
      }

  }; 
```

我想要实现的是，因为“喜欢”将由 JSON 文件提供，然后使用“ng-repeat”循环，所以是一个计算 JSON 文件中有多少喜欢的函数。需要注意的是，我们提供的 JSON 文件并没有明确地用数字表示“喜欢”，您只知道他们在文件中有一个“名称”对象。

请帮忙，我以前从未使用过 JSON！

谢谢。

J.P

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T22:27:00.910

不要试图从`ng-repeat`. 这有点倒退——为什么要进行 DOM 查找来获取范围内已经可用的信息？你可能想要这样的东西：

```
$http.get('likes.json').success(function(data) {

  $scope.likes = data;

});

$scope.addLike = function(item) {
    // add item to $scope.likes
} 
```

然后在您的 html 中您可以执行以下操作：

```
<p>You have liked {{likes.length}} items.</p>
<ul>
    <li ng-repeat="item in items">
        {{item}}
        <button ng-click="addLike(item)"></button>
    </li>
</ul> 
```

# c++ - c++程序的输出

> ID：16089966
> 
> 赞同：1
> 
> 时间：2013-04-18T17:55:36.607
> 
> 标签：c++, prefix, operator-precedence, postfix-notation

当我试图提高我的 c++ 知识时，我从一个旧的编程竞赛中发现了这个问题。今年我会努力参加比赛，所以我要做好准备。

以下程序的输出是什么？

```
#include <iostream>

using namespace std;

int dat=1;
int counter=0;

class ClassB;

class B {

  public: 
          virtual void f(int d=5)=0;
          };

class A {

  unsigned i;
  public:
         int pod;
         int index;

         A& operator++() { cout<<"A "<<pod--<<dat++<<endl; A* b=new A;  return *b; }
         A operator++(int) {cout<<"B "<<pod++<<dat--<<endl; A* b=new A;  return *b;}
         A& operator--() {cout<<"C "<<dat++ <<++pod<<endl; A* b=new A;  return *b;}
         A operator--(int) {cout<<"D "<<dat--<<--pod<<endl; A* b=new A;  return *b;}
         void operator+(A& b) {cout<<"Addition Index "<<index<<endl; pod++;}

         friend void B::f(int);
         A() : i(0), pod(dat) {pod++; index=++counter; cout<<"CA "<<"Index "<<index<<endl; }
         ~A(){pod++; cout<<"DA Index "<<index<<endl;}

};              

 const ClassB& returnClassA(const ClassB& p) {return p;}

class ClassB: public A, public B {
    public:
         void f(int d=2){A c; c++; pod*=d--;}
         ClassB(){cout<<"CB Index "<<index<<endl;}
         ~ClassB(){cout<<"DB Index "<<index<<endl;}
};

ClassB returnClassB(ClassB s) {return s;}

class ClassC : public ClassB {
  public:
         ClassC(){cout<<"CC Index "<<index<<endl;}
         ~ClassC(){cout<<"DC Index "<<index<<endl;}
};

ClassB returnClassC(ClassB s){return s;}

int main()
{           
    ClassC x;      
    A v,w;               
    B *c = new ClassB;   

   --++v--+++w;

   returnClassC(returnClassB(returnClassA(x))); 

   return 0;

} 
```

这应该在纸上解决，但是因为我是初学者，所以我使用了编译器。此外，变量 counter 和 index 是我添加的，因此我可以跟踪正在创建的对象。原来的表达式是--++v--+++w--；但我用 --++v--+++w 改变了它；因为编译器给了我错误。

那个部分：

```
ClassC x;      
A v,w;               
B *c = new ClassB; 
```

输出：

1.  加州索引 1
2.  CB指数1
3.  CC 索引 1
4.  加州索引 2
5.  加州索引 3
6.  加州索引 4
7.  CB指数4

我明白。

我无法理解下一个表达式 --++v--+++w; 所以一开始我试着理解--++v--++的输出；然后我会添加 +w。

--++v--++的输出；是：

1.  11
2.  加州索引 5
3.  乙 10
4.  加州索引 6
5.  一个 0 -1
6.  加州索引 7
7.  C 02
8.  加州索引 8
9.  DA 指数 6
10.  DA 指数 5

这意味着操作的顺序是--(++((v--)++))。为什么会这样？关于首先评估哪些操作是否有一些规则？另外我不明白为什么要调用索引为 6 和 5 的对象的析构函数？

如果我使用原始表达式，--++v--+++w; ，输出为：

1.  11
2.  加州索引 5
3.  乙 10
4.  加州索引 6
5.  一个 0 -1
6.  加州索引 7
7.  C 02
8.  加州索引 8
9.  加法索引 8
10.  DA 指数 6
11.  DA 指数 5

为什么最后评估 +w 操作？是因为运算符优先级吗？另外，我发现如果我写 cout << v.index 它将返回 2，这意味着 v 仍然是之前创建的原始对象。那么索引为 5-8 的对象去哪里了呢？我怎样才能访问它们？

最后一部分，returnClassC(returnClassB(returnClassA(x))); 输出：

1.  数据库索引 1
2.  DA 指数 1
3.  数据库索引 1
4.  DA 指数 1
5.  数据库索引 1
6.  DA 指数 1

我不明白为什么要调用析构函数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T18:21:09.017

一些需要注意的事情当你在 C++ 中重载运算符时，有一些事情需要知道，例如 ++ 你可以做一个预增量

```
++i 
```

或后增量

```
i++ 
```

为了告诉编译器您正在重载哪个，您需要在签名中没有参数或 int

```
A operator++(int) 
```

正在超载帖子增量，

```
A& operator++() 
```

重载预增量

在 C++ 中，对象的析构函数在两种情况下被调用

1.  您对指向使用 new 分配的对象的指针调用 delete

    ```
    A* = new A(); //constructor is called
    delete(A);//destructor is called 
    ```

2.  您为堆栈上创建的对象保留上下文

    ```
    if(something) {
        A a();
        ...
    } //here a's destructor is called because a no longer exists 
    ```

请注意您的代码中一些运算符如何返回一个副本，而另一些则返回一个引用。

```
A operator++(int) 
```

这个函数正在返回一个副本。这意味着当您调用此特定函数时，将在函数内部为正在调用的新 A 调用一次构造函数，然后在从函数返回时再次调用 b 指向的对象的副本。

[您可以在 [此处] ( http://en.cppreference.com/w/cpp/language/operator_precedence](http://en.cppreference.com/w/cpp/language/operator_precedence) )找到有关运算符优先级的一些信息

我注意到有些人告诉你从这样的代码中学习是没有用的。我同意以这种方式编码非常糟糕，但它可以教会你很多关于构造函数/析构函数、堆/堆栈和运算符如何在 C++ 中工作的知识。可能有更好的学习方法，这对我来说似乎是“期中考试”。

# javascript - JS多重替换

> ID：16089974
> 
> 赞同：1
> 
> 时间：2013-04-18T17:55:57.230
> 
> 标签：javascript, replace

我有个问题。

我不知道怎么解释，所以我举个例子：

我想替换`=)`为`bla1`，我想替换`=))`为`bla2`。

但发生的事情`=))`是`bla1)`

我能做些什么？

非常感谢，对不起我的英语

**编辑：** 我不能`=))`先更换。我有更多这样的迹象。(>:),:((,:)) 等等...)。它们都在数组中，我使用一个循环来替换它们。全部更改会非常复杂。数组很大

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T17:57:30.800

首先更换更专业的。

1.  将 =)) 替换为 bla2
2.  将 =) 替换为 bla1

**例子**

```
var text = "This =)) is =) some demo =)) =) =)) text";
text = text.replace(/=\)\)/g, "bla2"); // =))
text = text.replace(/=\)/g, "bla1"); // =)

// text = This bla2 is bla1 some demo bla2 bla1 bla2 text 
```

**失败的例子**

```
var text = "This =)) is =) some demo =)) =) =)) text :))";
text = text.replace(/=\)/g, "bla1"); // =)
text = text.replace(/=\)\)/g, "bla2"); // =))

// text = This bla1) is bla1 some demo bla1) bla1 bla1) text 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-23T11:34:45.400

你可以试试这个例如...

```
If you want to replace multiple "-" from single string
var str = "only-for-test";
str.replace(/-/g, "");

//out put : onlyfortest 
```

# java - (Cordova 2.6.0 | Phonegap) 无法调用未定义的方法 'exec'

> ID：16089980
> 
> 赞同：0
> 
> 时间：2013-04-18T17:56:23.283
> 
> 标签：java, cordova, phonegap-plugins, phonegap-build

我在使用新版本的 cordova.js (2.6.0) 时遇到了一些问题。这些方法`exec`似乎不再存在。

```
var PhoneNumberPlugin = { 
    callNativeFunction: function (success, fail, resultType) { 
       return cordova.exec( success, fail, 
                           "com.phonenumber", 
                           "nativeAction", [resultType]);
    } 
}; 
```

```
ERROR: 04-18 14:47:20.039: E/Web Console(6623): Uncaught TypeError: Cannot call method 'exec' of undefined at file:///android_asset/www/PhoneNumberPlugin.js:4 
```

* * *

我现在怎么能调用原生插件呢？方法我也看到了`callbackFromNative`！有谁知道这个能不能帮帮我？！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T18:54:32.783

这是您插件的完整代码吗？请参阅[https://github.com/phonegap/phonegap-plugins/wiki/Defining-Your-Cordova-Plugin-As-A-Cordova-Module](https://github.com/phonegap/phonegap-plugins/wiki/Defining-Your-Cordova-Plugin-As-A-Cordova-Module)我认为这应该有所帮助。

另外，您确定您正在等待 Cordova 完全加载到页面中吗？例如，等到 onDeviceReady 触发。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T18:08:18.623

你的问题是没有定义科尔多瓦。确保您的 cordova.js 实际正在加载，并且在您创建此插件之前已加载。

# c++ - 具有混合参数类型的模板重载

> ID：16089983
> 
> 赞同：2
> 
> 时间：2013-04-18T17:56:27.550
> 
> 标签：c++, templates

我正在使用 C++（C++11 也可以）开发一个属性系统，以便类可以向脚本系统提供数据。我想提供各种“类型”的属性，最简单的一种在内部保持其价值，如下所示：

```
// Simple Property
template<typename Value>
class Property {
    public:

        Value get() const;

        void set(Value value);

    private:

        Value m_value;
} 
```

在大多数情况下，这没关系，但有时，该值是计算出来的，或者由于其他原因必须在属性对象之外。对于这种情况，我想提供一个这样的模板：

```
// Complicated Property
template<
    typename Value, 
    typename ValueOwner, 
    Value (ValueOwner::*Getter)(void) const,
    void (ValueOwner::*Setter)(Value)
>
class Property {
  // Stuff for calling the getter & setter
} 
```

有什么方法可以让这两个模板共存而不重命名其中一个？我试过这个来专门化 Getter / Setter 模板：

```
// Complicated Property
// ...

// Simple Property
template<typename Value>
class Property<Value, void, nullptr, nullptr>; 
```

但是编译器不喜欢这样并抱怨`creating pointer to member function non-class type "const void"`. 呃，当然 void 没有成员函数。

然后我尝试用足够的参数声明模板，然后专门化上述模板，如下所示：

```
template<typename A, typename B, typename C, typename D>
class Property;

// Simple Property
// ...

// Complicated Property
// ... 
```

但这也不起作用，因为 Getter / Setter 模板不期望类型名作为第三个和第四个参数，而是指向成员函数的指针。

下次尝试：

```
// Complicated Property
// ...

// Simple Property
template<typename Value>
class Property<
    Value, 
    Property<Value>, 
    &Property<Value>::get, 
    &Property<Value>::set
>; 
```

编译失败，因为编译器现在没有`Property<Value>`模板参数中的模板。

好吧，也许这个：

```
// Complicated Property
// ...

template<typename Value>
struct PropertyDummy {
    Value get() const;
    void set(Value);
}

// Simple Property
template<typename Value>
class Property<
    Value, 
    PropertyDummy<Value>,
    &PropertyDummy<Value>::get, 
    &PropertyDummy<Value>::set
>; 
```

这产生`template argument involves template parameter(s)`了 getter 和 setter 模板参数。他们当然会。

无论如何，将模板重命名为对我有用的东西`Property`就`SimpleProperty`足够了。但我很好奇是否有解决方案，以便我可以同时编写

```
Property<int> simpleProperty;

Property<int, MyClass, &MyClass::get, &MyClass::set> complicatedProperty; 
```

并让编译器弄清楚我的意思是哪个模板。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T18:01:55.727

是否需要在编译时指定 getter 和 setter？您可以使用`Value`和`ValueOwner`模板参数获取类型：

```
template<
    typename Value, 
    typename ValueOwner, 
>
class Property {
public:
    typedef Value (ValueOwner::*Getter)(void) const;
    typedef void (ValueOwner::*Setter)(Value);

    Property(Getter getter, Setter setter)
        : getter(getter), setter(setter) {}

    // ...

private:
    Getter getter;
    Setter setter;
}; 
```

然后将适当的函数指针传递给构造函数：

```
Property<int, MyClass> complicatedProperty(&MyClass::get, &MyClass::set); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-18T18:11:20.303

> 但我很好奇是否有解决方案，以便 [...]

**是的，有**。

您可以使用以下方法。首先，在客户端不应处理的某个命名空间中创建一个虚拟类模板：

```
namespace detail
{
    template<typename T>
    struct dummy
    {
        T get() const { return T(); }
        void set(T) { }
    };
} 
```

然后，定义以下主模板：

```
#include <type_traits>

// Simple Property
template<typename Value,
         typename ValueOwner = detail::dummy<Value>,
         Value (ValueOwner::*Getter)(void) const = &ValueOwner::get,
         void (ValueOwner::*Setter)(Value) = &ValueOwner::set,
         bool = std::is_same<ValueOwner, detail::dummy<Value>>::value
         >
class Property {
    public:
        Value get() const;
        void set(Value value);
    private:
        Value m_value;
}; 
```

最后一个虚拟模板参数的值取决于是否`dummy<Value>`作为第二个参数传递（当然，客户端不应该使用`dummy`类模板）。

`false`然后，您可以针对最后一个参数是（意味着为第二个模板参数提供了一些参数）的情况专门化您的模板：

```
// Complicated Property
template<
    typename Value,
    typename ValueOwner,
    Value (ValueOwner::*Getter)(void) const,
    void (ValueOwner::*Setter)(Value)
>
class Property<Value, ValueOwner, Getter, Setter, false> 
{
  // Stuff for calling the getter & setter
}; 
```

最后，您可以使用您提出的两个声明：

```
struct MyClass
{
    int get() const { return 42; }
    void set(int) { }
};

int main()
{
    Property<int> simpleProperty;
    Property<int, MyClass, &MyClass::get, &MyClass::set> complicatedProperty;
} 
```

这是一个[实时编译示例](http://ideone.com/pOX9wh)。

# .net - 不同层对属性的不同访问

> ID：16089987
> 
> 赞同：0
> 
> 时间：2013-04-18T17:56:29.970
> 
> 标签：.net, domain-driven-design

假设您的域实体中有一个 Status 属性。该属性用于了解对象的系统状态，在表示层必须以只读方式使用。该层不能直接修改状态属性。相反，一种应用程序服务具有更改状态的特定操作。

有没有办法使表示层的状态属性只读但应用程序服务可写？或者我只是以错误的方式建模？我正在使用.NET。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T19:55:04.330

最佳实践是将表示模型与域模型分离。具体来说，创建一个视图模型并将 UI 绑定到该模型，而不是直接绑定域对象。可以通过将域对象传递给构造函数来初始化视图模型。例子：

```
class SomeEntity
{
 public string Status { get; set; }
}

class SomeEntityViewModel
{
 public SomeEntityViewModel(SomeEntity e)
 {
  this.Status = e.Status;
 }
 public string Status { get; private set; }
} 
```

这样，应用程序服务可以更改状态，但视图不能直接这样做。

# javascript - 如何将类添加到数组中的 img 元素？

> ID：16089988
> 
> 赞同：0
> 
> 时间：2013-04-18T17:56:38.400
> 
> 标签：javascript, jquery

只需尝试将类添加到数组中的 img

```
aftArray = $('.aft'); // creates array of HTML imgs
aftArray[0].addClass('currentTest'); // should change CSS by adding this class 
```

这是FF产生的错误

```
[12:53:18.593] TypeError: aftArray[0].addClass is not a function... 
```

怎么回事？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T17:57:40.623

您试图在 DOM 对象而不是 jQuery 对象上调用 addClass。Indexer 为您提供 ojbect 您需要使用 eq() 来获取 jQuery 对象。

```
aftArray.eq(0).addClass('currentTest'); 
```

在这种特殊情况下，您不必进行迭代。

```
$('.aft').addClass('currentTest'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T17:57:21.957

因为`[0]`给了你 DOM 元素！你想用[`.eq(0)`](http://api.jquery.com/eq/)

# php - 为什么md5加密后密码不匹配？

> ID：16089990
> 
> 赞同：-5
> 
> 时间：2013-04-18T17:56:43.860
> 
> 标签：php

在数据库中设置 md5 加密，然后在 login.php 中我使用 select 语句进行匹配：

```
<?php
    session_start();
    include"db.php";
    if ( isset( $_POST['email_id'] ) ) {
        $email_id = $_POST['email_id'];
        $password = $_POST['password'];
        $sql="SELECT * FROM user WHERE email_id='$email_id' AND password='md5($password)' LIMIT 1";
        $res = mysql_query($sql);
        $count = mysql_num_rows($res);
        if ( $count == "1" ) {
            $row = mysql_fetch_array($res);
            $name = $row["first_name"];
            $_SESSION["name"] = $name;
            $_SESSION["password"] = $password;
            header("location:index.php");
            exit();
        } else {
            echo "Invalid LOGIN information.";
            exit();
        }
    }
?> 
```

将显示消息“无效的登录信息”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T17:57:52.800

你需要连接你的字符串

```
$sql = "SELECT * FROM user 
        WHERE email_id='$email_id' 
        AND password='".md5($password)."' LIMIT 1"; 
```

或者最好这样做

```
$password = md5($fetched_password);
$sql = "SELECT * FROM user 
        WHERE email_id = '$email_id' 
        AND password='$password' LIMIT 1"; 
```

而且您不必使用`LIMIT 1`查询**HAS**来获取唯一行，否则您的数据库设计不正确，此外，电子邮件，我使用**唯一用户 ID**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T18:15:22.200

这个 OP 怎么样，而不是使用 md5 来存储密码，为什么不使用 bcrypt？有一个很棒的库，叫做 password_compat，它可以为您完成所有繁重的工作。谷歌密码_compat。

接下来我建议使用 PDO 而不是 Mysql_ 函数，因为它们不再受支持。

为什么要按我说的做？

Md5 最初是在早期实现文件检查的。即使使用 sha1/2 仍然不够用现在的计算能力。使用 bcrypt 破解密码对系统来说是极其昂贵的。所以请看bcrypt。

为什么要使用 pdo？因为与其使用可能使您容易受到注入攻击的 Mysql 函数，您可以参数化您的值以更好地防止注入。您的第一个问题是安全 OP，而不是您尝试实现的逻辑。我希望你是最好的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T17:59:47.660

```
 $sql="SELECT * FROM user WHERE email_id='$email_id' AND password='md5($password)' LIMIT 1"; 
```

你已经检查过你的mysql表了吗？该条目应该`md5(YOUR_PASSWORD)`代替 md5 哈希...

您不能内联 php-code / 将 mysql-functions 放入引号中：

MySQL有一个MD5函数：

```
 $sql="SELECT * FROM user WHERE email_id='$email_id' AND password=MD5('$password') LIMIT 1"; 
```

或者使用 PHP 的 md5 函数：

```
 $sql="SELECT * FROM user WHERE email_id='$email_id' AND password='".md5($password)."' LIMIT 1"; 
```

ps：如果你使用MySQL方式，别忘了用`mysql_real_escape_string`！

# ms-access - 限制链接表结果

> ID：16089997
> 
> 赞同：4
> 
> 时间：2013-04-18T17:57:12.487
> 
> 标签：ms-access

我有一个表，该表已从另一个同时具有活跃和非活跃员工的数据库链接。我只想查看链接表中的活跃员工。我知道如何通过查询来做到这一点，但是如果有办法只显示在状态字段中具有“活动”的记录，我不想进行查询。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-18T22:34:29.310

在数据表视图中打开链接表后，单击`Status`列然后应用过滤器...在 Access 2007 中，单击“主页”功能区的“排序和过滤器”部分上的过滤器（漏斗）图标。从结果对话框的“文本过滤器”下拉列表中选择“等于”，然后`Active`在文本区域中输入。单击确定并通过单击保存图标或使用`Ctrl`+`s`键盘快捷键保存表格布局。

然后在设计视图中打开表。当它警告您不能修改链接表的设计时，单击“是”以“仍然打开它”。（您不会修改表格*设计*，但您将更改其`TableDef.Properties`集合中的一个项目。）从那里，打开表格的属性表，找到“Filter On Load”属性并将其设置为`Yes`. `Yes`当 Access 询问是否保存更改时， 关闭表并单击。

`Status="Active"`如果我的说明足够，当您在数据表视图中重新打开链接表时，您应该只看到那些行。

这是我系统的屏幕截图，我在其中`([AssetMovements1].[AssignedTo] Like"a*")`为`AssetMovements1`链接表保存了过滤器表达式 。

![表属性表](https://i.stack.imgur.com/QZfjt.png)

如果您愿意，可以从 VBA 代码设置这些属性。请注意，这`Filter`是一个用户创建的属性，这意味着在您为其分配值之前，它不存在于`Properties`集合中。从代码中，您需要使用该`CreateProperty`方法，然后分配属性值。