# StackOverflow 问答 13149000-13149999

# html - ipad图像高度问题的网页设计百分比布局

> ID：13149001
> 
> 赞同：0
> 
> 时间：2012-10-30T23:19:05.133
> 
> 标签：html, ios, css, ipad, safari

我在使用百分比的定义列表中调整图像大小时遇到​​问题。该页面在我在桌面上尝试过的每个浏览器中都能正确加载，但由于某种原因，在 iPad 上它会使 DT 标签之外的图像流血。为了您的舒适，我在 jsbin 上重新创建了这个问题。 [http://jsbin.com/okaqun/1](http://jsbin.com/okaqun/1)

如您所见，数据库 imgs 正在超出边界线。

请帮我解决这个问题！它让我发疯太久了！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T16:11:04.573

我设法找到了解决方案，但这并不是我想要的。通过将带有 CSS 的图像设置为背景图像，图像大小设置为包含，我在所有设备上都得到了我想要的结果，但这远非最佳。

```
.list dt{
    background: #1B1B1B 0% no-repeat url('http://aux.iconpedia.net/uploads/21188781911187876141.png');
    background-size: contain;
    height: 17%;
    border-top: 1px solid #262626;
    border-bottom: 2px solid #101010;
} 
```

虽然通过弄乱代码，我认为我发现了一些有趣的东西......如果我将 DT 高度设置为 0%，然后再回到 17%，则里面的图像会正确调整大小。对这种行为有什么解释吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T03:58:49.900

我相信 iOS 在缩放奇数（1、3、5、7...）的图像时存在问题。您是否尝试将图像更改为均匀的宽度/高度？

# objective-c - 在哪里设置委托

> ID：13149004
> 
> 赞同：0
> 
> 时间：2012-10-30T23:19:30.767
> 
> 标签：objective-c, delegates

我正在尝试覆盖 UIWebView 对象中的 URL 点击。我知道我需要在“设置 webView 委托”的位置添加以下代码（根据[此线程](https://stackoverflow.com/questions/2899699/uiwebview-open-links-in-safari)）：

```
// TODO: This should intercept URL clicks in a UIWebView, causing (for now) links to open in Safari. It doesn't work yet; possibly it's in the wrong place. Should be in the same place as we 'set the webView delegate'...
// This doesn't appear to be set anywhere yet, which is probably where I'm going wrong.
- (BOOL)webView: (UIWebView*)webView shouldStartLoadWithRequest: (NSURLRequest*)request navigationType: (UIWebViewNavigationType)navigationType {

    if ( navigationType == UIWebViewNavigationTypeLinkClicked ) {
        [[UIApplication sharedApplication] openURL:[request URL]];
        return NO;
    }

    return YES;
} 
```

但是，我不知道在哪里实际放置代码。关于上述线程的一个建议是将它放在 viewDidLoad 方法中，在“self.webView.delegate = self;”的一行下方。但是，我的 UIWebViews 实际上是自定义 UIView 的一部分，它的调用方式很像 UIAlertView（实际上，它几乎是 UIAlertView 的精确复制品，除了它包含 UIWebView）......所以，我的主应用程序的 ViewController 代码没有“看到” self.webView 对象，所以我不能在那里设置委托。而且，指定我的自定义 UIView 对象（调用 UIWebView 对象）的“m”文件没有 viewDidLoad 方法。

真的很挣扎，大概是因为我不知道代表在哪里设置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T23:23:39.910

> 而且，指定我的自定义 UIView 对象（调用 UIWebView 对象）的“m”文件没有 viewDidLoad 方法。

然后将其放入`- initWithFrame:`方法中：

```
- (id)initWithFrame:(CGRect)frm
{
    if ((self = [super initWithFrame:frm])) {
         webView = [[UIWebView alloc] initWithFrame:frm]; // or whatever

         self.webView.delegate = self;
    }
    return self;
} 
```

# java - Java-单线程和多线程的压缩差异

> ID：13149012
> 
> 赞同：0
> 
> 时间：2012-10-30T23:20:02.893
> 
> 标签：java, multithreading, compression, gzip

所以我会先说我的多线程程序无法输出 gzip 可以成功解压缩的东西，所以可能还有其他问题。但是我注意到的是，单线程和多线程的每个块的压缩大小是完全不同的。

在我的单线程运行中，我有一个设置了 SYNC_FLUSH 的 GZIPOutputStream(System.out, true)。我不断地从 system.in 读取，直到我的缓冲区已满。

```
GZIPOutputStream compressor = new GZIPOutputStream(System.out, true);
bytesRead = inBytes.read(buff,0,BLOCK_SIZE);
....
while(bytesRead != -1)
{
    offset += bytesRead;
    if (offset == BLOCK_SIZE)
    {
        compressor.write(buff,0,offset);
        compressor.flush();
        offset = 0;
    }

    if((bytesRead=inBytes.read(buff,offset,BLOCK_SIZE-offset)) == -1) {
        compressor.write(buff,0,offset);
        compressor.finish();
    }
}
compressor.close(); 
```

如您所见，在缓冲区满了之后，我告诉压缩器写入输出，然后调用flush。确保我强制它压缩并清除任何剩余的输出，因此当它再次写入时，缓冲区中没有任何剩余数据。

因此，它与您的原始输入开始时的长度非常相似（因此每个块都是它自己的单独流）。

所以在我的多线程程序中，我没有一个 GZIPOutputStream 写入和刷新，而是有一堆线程，每个线程都有自己的 GZIPOutputStream。所以基本上，用对线程的调用替换该部分

```
List<Future<byte[]>> results = new ArrayList<Future<byte[]>>();
bytesRead = inBytes.read(buff,0,BLOCK_SIZE);

while(bytesRead != -1)
{
    offset += bytesRead;
    if (offset == BLOCK_SIZE)
    {
        results.add(exec.submit(new workerThread(buff,offset)));
        offset = 0;
    }

    if((bytesRead=inBytes.read(buff,offset,BLOCK_SIZE-offset)) == -1) {
        results.add(exec.submit(new workerThread(buff,offset)));
    }
} 
```

我只是将缓冲区传递给他们进行压缩。我所有的线程都是

```
private ByteArrayOutputStream bOut = new ByteArrayOutputStream();
private byte[] finalOut;
....
public byte[] call() {
    try{
        GZIPOutputStream compress = new GZIPOutputStream (bOut, true);
        compress.write(input,0,size);
        compress.flush();
        compress.close();
     }
     catch (IOException e)
     {
        e.printStackTrace();
        System.exit(-1);
     }
     finalOut = bOut.toByteArray();
     return finalOut;
 } 
```

我认为我所做的只是将压缩工作交给线程。我没有改变其他任何东西。但是，当我运行我的多线程程序并 hexdump 结果时，我注意到两个程序之间的每个块通常有很大不同。我使用了一个小缓冲区和小输入，因此更容易阅读。

我的多线程程序出现 crc 错误，这意味着至少 gzip 可以识别格式并开始解压缩。只是当它完成时，最终的结果与它期望的 CRC 不匹配（例如解压缩输出的大小等）。

老实说，我不确定为什么会发生这种情况。我本来预计会出现一些更明显的错误，但这个错误似乎很随机。肯定是压缩的。并且单线程和多线程程序之间的前几个字节（当然是在标头之后）通常是相同的，所以我认为我没有乱序连接（加上 executor.get() 函数应该处理） .

我只是难过。我知道 gzip 可以解压缩连接的流。我实际上将我的输入分成两半并分别输出，然后将它们组合到我的单线程程序中，它解压缩得很好。

作为记录，我只是在一个包含 328 个“A”字符的文件上尝试过，所以它不是很大。单个线程的 GZIPOutputStream 的 hexdump 是

```
0000000 8b1f 0008 0000 0000 0000 7472 581c 0000
0000010 0000 ffff 681a 0004 0000 ffff 21a2 02e2
0000020 0000 ff00 03ff a800 5bff 5c79 0001 0000 
```

对于多线程来说

```
0000000 8b1f 0008 0000 0000 0000 7472 19a4 22e0
0000010 1146 0000 ff00 03ff 7500 5f6c 80d1 0000
0000020 1f00 088b 0000 0000 0000 a200 e221 4622
0000030 0011 0000 ffff 0003 6c75 d15f 0080 0000
0000040 8b1f 0008 0000 0000 0000 21a2 02e2 0000
0000050 ff00 03ff 8a00 193b 5c21 0000 0000 
```

他们很不一样。

哇，这最终真的很长。对于那个很抱歉。只是真的很困惑和卡住。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T06:06:23.840

不需要 `flush()`and调用。将完成，并且调用只是将不必要的空块添加到 deflate 流中。因为你不需要，你不需要设置true，因为它不会做任何事情。`finish()``close()``flush()``flush()``syncFlush`

制作一个大的 gzip 流和制作一堆小的 gzip 流当然会产生完全不同的结果。每个 gzip 流的头部和尾部都有 18 个字节的开销。对于您正在使用的小块，该开销完全支配了结果。

您的线程示例中有一个很大的错误。虽然无线程示例压缩了 328 个“A”，但线程示例将“A”和换行符（十进制 10）混合在一起。也许您应该开始甚至不尝试压缩，看看您是否可以分解一些输入（真实文本，而不仅仅是一系列相同的字符），将块发送到线程，让线程对数据完全不做任何事情，并且然后正确地重建原始输入。一旦你能做到这一点，然后回来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T01:25:34.483

从某处开始：

> 他们很不一样。

如果我从评论中的假设成立 (gzip 满足 unzip(gzip(a+b))=unzip(gzip(a) + gzip(b)) 对于两个字符串 a,b)，那么这是预期的行为。

根据[RFC](https://www.rfc-editor.org/rfc/rfc1952#page-6)，每个 gzip 调用都会写入一个标头。在[Java](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/7-b147/java/util/zip/GZIPOutputStream.java#GZIPOutputStream.writeHeader%28%29)中：

```
private void writeHeader() throws IOException {
    out.write(new byte[] {
                  (byte) GZIP_MAGIC,        // Magic number (short)
                  (byte)(GZIP_MAGIC >> 8),  // Magic number (short)
                  Deflater.DEFLATED,        // Compression method (CM)
                  0,                        // Flags (FLG)
                  0,                        // Modification time MTIME (int)
                  0,                        // Modification time MTIME (int)
                  0,                        // Modification time MTIME (int)
                  0,                        // Modification time MTIME (int)
                  0,                        // Extra flags (XFLG)
                  0                         // Operating system (OS)
              });
} 
```

[GZIP_MAGIC 是 8b1f：](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/7-b147/java/util/zip/GZIPOutputStream.java#GZIPOutputStream.0GZIP_MAGIC)

```
private final static int GZIP_MAGIC = 0x8b1f; 
```

[Deflater.DEFLATED 为 8：](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/7-b147/java/util/zip/Deflater.java#Deflater.0DEFLATED)

```
public static final int DEFLATED = 8; 
```

标题将以：
`1f 8b 80 ...`
您可以在输出中清楚地看到这部分（字节交换）。对于每个新的 gzip 部分，标题都会重新开始。因此，您的分块输出的长度必须大于正常输出。

关于多线程问题：我需要一个完整的示例来查看发生了什么。

# symfony - Symfony2 翻译级联优先级

> ID：13149016
> 
> 赞同：0
> 
> 时间：2012-10-30T23:20:22.647
> 
> 标签：symfony, internationalization, translation

我应该如何处理像这样的常见翻译？

```
send: Send 
```

我的应用程序的主包（在 src/ 中）需要这个词，但对于其他供应商包（在 vendor/ 中）也需要这个词。我不确定优先级是如何工作的，但似乎供应商优先。例如：如果 SomeVendorBundle 有这个翻译，它将在我的整个应用程序中更改：

```
send: Submit 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T09:52:42.573

将您的翻译按类别分组：

```
common.save: Save
common.created_at: Created at

user.created_at: Signed up at 
```

# java - Android 增强现实应用程序从屏幕点转换列表位置

> ID：13149018
> 
> 赞同：4
> 
> 时间：2012-10-30T23:20:33.313
> 
> 标签：java, android, math, augmented-reality, projection

我有一个问题，我找不到解决方案。

我制作了一个 Android 增强现实应用程序。在我的应用程序中，我有一个兴趣点列表，每个兴趣点都作为一个位置（经度、纬度、高度）。

我知道我的位置，并且我有（相机的）方位角。

现在我的问题是：如何在屏幕上绘制这些点（gps 点）（x，y 点）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-03T10:27:38.963

我无法得到你正在尝试绘制的内容，但我假设你正在尝试在相机屏幕上绘制这些 poi，如下所示：![在此处输入图像描述](../Images/47d8ec3e33365aa091f4df548d9dd899.png)。为此，您必须使用传感器和 gps 位置，这有点棘手，我建议您查看[Mixare ，您可以在](http://code.google.com/p/mixare/wiki/GettingStarted)[此处](http://www.bango29.com/go/blog/2010/mixare-augmented-reality-tutorial)获得完整的代码和教程。继续您想要实现的目标。祝您好运。

# jquery - 使用 OpenGraph API 和 JQuery 自动发布到 Facebook (onLoad)

> ID：13149019
> 
> 赞同：0
> 
> 时间：2012-10-30T23:20:52.043
> 
> 标签：jquery, facebook, web-applications, facebook-opengraph

当用户在我的网站上提交“图章”时，我试图自动发布到用户的 Facebook 时间线。我正在运行一个测试脚本，整个代码如下。

您将在下面看到我用来测试脚本的两种方法：

*   一个监听 .openGraphButton 类的点击事件
*   另一个在正文 onLoad 事件中调用 postFB() 函数。

问题：

当用户单击“fb”按钮时，脚本工作正常并发布到 fb 墙/时间线。但是，当页面加载并尝试通过 onLoad 调用发布时，我收到错误消息代码。

目标：

我想在页面加载时自动发布到用户的 Facebook 时间线（即不让用户单击“fb”按钮）。这样，当用户发布新帖子（在我的网站上又称为“图章”）时，帖子/图章将出现在 Facebook 上。

注意：我使用“邮票”一词来指代用户在我的域/网站上的帖子。

我的代码：

```
<head>
<script src="http://code.jquery.com/jquery-latest.js"></script>
</head>
<body onLoad="postFB(30,85)">
<div id="fb-root"></div>
<script type="text/javascript">

    $(document).ready(function(){
        $('.openGraphButton').click(function(){
            var action = $(this).attr('action');
            var page = $(this).attr('page');
            var userid = 30;
            var stokeid = 85;
            postFB(userid,stokeid);
        });
    });

    function postFB(userid, stokeid){
        var url = "http://www.domain.com/profile-stoke.php?pid="+userid+"&sid="+stokeid;
        postAction ('stamp','passport',url);
    };

    function postAction( action, object_type, object_url ){
        FB.api('/me/[APP_NAME_SPACE]:stamp', 'post', { passport : object_url },function(response){
            if (!response || response.error) {
                        alert('Error occured' + action + '?' + object_type + '=' + object_url);
            } else {
                alert('Post was successful! Action ID: ' + response.id);
            }
        });
    }    
</script>
<script>
  window.fbAsyncInit = function() {
    FB.init({
      appId      : 'APP_ID', // App ID
      channelUrl : '//www.domain.com/channel.html', // Channel File
      status     : true, // check login status
      cookie     : true, // enable cookies to allow the server to access the session
      xfbml      : true  // parse XFBML
    });

    // Additional initialization code here
  };

  // Load the SDK Asynchronously
  (function(d){
     var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement('script'); js.id = id; js.async = true;
     js.src = "//connect.facebook.net/en_US/all.js";
     ref.parentNode.insertBefore(js, ref);
   }(document));
</script>
<div id="fb-root"></div><script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=APP_ID";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>

<input type="button" value="fb" class="openGraphButton" action="stamp" page="http://www.domain.com/profile-stoke.php?pid=30&sid=85" />
</body> 
```

更新：

好的，所以我收到错误代码 2500 并显示以下消息：“必须使用活动访问令牌来查询有关当前用户的信息。”。但是，当我单击按钮时，它工作正常。我尝试实现一个 jquery 点击事件来模拟点击，但我得到了同样的错误。有任何想法吗？

提前感谢您的帮助 - 我很感激。

# c - 使用单独的函数来初始化结构数组

> ID：13149020
> 
> 赞同：0
> 
> 时间：2012-10-30T23:20:51.753
> 
> 标签：c

我一直在到处搜索，但我能找到的只是初始化结构数组的东西，而不是另一个函数。这是我以前的家庭作业。我的任务是从文本文件中读取命令，将它们存储到一个数组中，然后将这些命令传送到一个名为画板的程序中。我实际上觉得我应该在另一个函数中初始化/重新初始化我的结构数组，因为文本文件中有一个结束命令（我认为结束命令之后什么都没有）。仔细看了一下，我忘了迎合你可以连续阅读两个文本文件的事实。还有其他的方法，老师在课堂上给我们展示了一种方法来迎合它。但我想知道如何按照我的方式去做。您将如何调用初始化/重新初始化结构数组并将值发送回调用它的位置的函数？我们使用指针对吗？我们将如何去做呢？

这是我的代码：

```
void fileParsing(FILE * fp, FILE* pipe)
{
   /*defines and initializes the commands being searched and counted */
   int Figure =0;
   int draw =0;
   int End =0;
   int printFigure =0;
   int drawFigure =0;
   int translate =0;
   int child =0;
   int comment =0;
   int i, j;

   struct figure array_figure[19];  //WTF!!!! WHY 19?????
   //assigns absurd values to array to distinguish when to stop looking for coordinates
   for(i=0; i < FIGURE_MAX; ++i)
   {
      memset(array_figure[i].name, 0, LINE_LEN);
      for(j=0; j<POINTS_MAX; ++j)
      {
         array_figure[i].Coord[j].xcoor = fup_value;
         array_figure[i].Coord[j].ycoor =fup_value;
      }
   }
   //array_figure[15].name = "adsfsdf";

   //printf("\n%d",array_figure[0].Coord[0].xcoor);
   int count = 0;
   int count2 = 0;
   int drawCount = 0;
   int reset;
   //if(reset = 0; reset < 256; reset++);
   //strncpy(array_figure[count].name, "0", LINE_LEN);

   //printf("about to go into a while loop\n");

   while(fgets(line, LINE_LEN, fp)!=NULL)
   {
      sscanf(line, "%s%s%d%d", command, name, &x, &y);

      //looks for commands and organizes them accordingly
      if(strncmp(command, "Figure", 6) == 0)
      {
         printf("Found a Figure command\n");
         sscanf(line, "%s%s%d%d", command, name, &x, &y);

         originX = x;
         originY = y;

         //assigns name and initial point
         strncpy(array_figure[count2].name, name, LINE_LEN);
         array_figure[count2].Coord[count].xcoor = x; //change: count2 from '3' from array_figure[i]
         array_figure[count2].Coord[count].ycoor = y;
         //printf("%s: %lf, %lf\n", array_figure[count2].name, array_figure[count2].Coord[count].xcoor, array_figure[count2].Coord[count].ycoor);

         count++;
         //printf("%d\n", count);

         //fprintf(output, "%d  %d\n", x, y); //MIGHT BE NEEDED!
         //originX = x;
         //originY = y;
      }

      else if(strncmp(command, "draw", 5) == 0)
      {
         printf("Found a draw command\n");
         sscanf(line, "%s%d%d", command, &x, &y);
         //strncpy(array_figure[count].name, "0", LINE_LEN);

         //priFiguntf("%s\n", array_figure[2].name);

         //creates a new origin coordinate
         originX = array_figure[count2].Coord[count-1].xcoor;
         originY = array_figure[count2].Coord[count-1].ycoor;

         //assigns more coordinates
         array_figure[count2].Coord[count].xcoor = originX + x;
         array_figure[count2].Coord[count].ycoor = originY + y;
         //printf("%lf, %lf\n", array_figure[count2].Coord[count].xcoor, array_figure[count2].Coord[count].ycoor);
         //printf("%c\n", array_figure[count]);

         count++;
         //printf("%d\n", count);
      }

      else if(strncmp(command, "drawFigure", 10) == 0)
      {
         printf("Found a drawFigure command\n");
         sscanf(line,"%s%s\n", command, name);
         //if statement; iterates through to with strncmp to find figure name to draw

         //printf("%s\n", name);
         drawFigureCount= 0;
         //checks for which element matchs the specified name for drawing
         while(
            strncmp(array_figure[drawFigureCount].name, name, LINE_LEN) != 0 &&
            drawFigureCount < FIGURE_MAX)
            drawFigureCount++;

         if(drawFigureCount < FIGURE_MAX)
         {
            //printf("\tstartingX/Y assign\n");
            startingX = array_figure[drawFigureCount].Coord[0].xcoor;
            startingY = array_figure[drawFigureCount].Coord[0].ycoor;
            //printf("\tdone - startingX/Y assign\n");
            //sends coordinates to sketchpad
            for(i=1; i< POINTS_MAX; ++i)
            {
               if(array_figure[drawFigureCount].Coord[i].xcoor != fup_value &&
                  array_figure[drawFigureCount].Coord[i].ycoor != fup_value)
               {
                  //printf("\t\tdraw segment sent to output\n");
                  fprintf(pipe,
                     "drawSegment %ld %ld %ld %ld\n",
                     lround(startingX), lround(startingY),
                     lround(array_figure[drawFigureCount].Coord[i].xcoor),
                     lround(array_figure[drawFigureCount].Coord[i].ycoor)
                     );
                  //printf("\t\tdone - draw segment sent to output\n");

                  //printf("\t\tstartingX/Y update\n");
                  startingX = array_figure[drawFigureCount].Coord[i].xcoor;
                  startingY = array_figure[drawFigureCount].Coord[i].ycoor;
                  //printf("\t\tdone - startingX/Y update\n");

               } else break;
            }
            //printf("\tbroke out of the loop or the loop ended\n");
         }
      }

      //checks for "end" in the input file to know when to stop making coordinates for a figure
      else if(strncmp(command, "End", 3) == 0)
      {
         printf("Found a End command\n");
         //strncpy(array_figure[count].name, command, LINE_LEN);
         //printf("%s\n", array_figure[count].name);

         count2++;
         count = 0;
      }

      //organizes and prints coordinates to console
      else if(strncmp(command, "printFigure", 11) == 0)
      {
         //printf("Print Figure %s\n", name); **UNCOMMENT**
         while(strncmp(array_figure[printFigureCount].name, name, LINE_LEN) != 0 &&
            printFigureCount < FIGURE_MAX)
            printFigureCount++;

         if(printFigureCount < FIGURE_MAX)
         {
            for(i=0; i< POINTS_MAX; ++i)
            {
               if(array_figure[printFigureCount].Coord[i].xcoor != fup_value &&
                  array_figure[printFigureCount].Coord[i].ycoor != fup_value)
               {
                  //converts values to int for printing
                  int intConvertX = (int) array_figure[printFigureCount].Coord[i].xcoor;
                  int intConvertY = (int) array_figure[printFigureCount].Coord[i].ycoor;
                  //printf("%d %d\n", intConvertX, intConvertY); **UNCOMMENT**
               }
            }
         }
      }

      else if(strncmp(command, "translate", 9) == 0)
      {
         printf("Found a Translate command\n");
         //translate++;
      }
      /*else if(strncmp(command, "clearScreen", 11) == 0)
      {
      sscanf(line, "%s%s", command, clear);
      printf("%s\n", clear);

      }*/
      else if(strncmp(command, "child", 5) == 0)
      {
         sscanf(line, "%s%s", command, clear);
         printf("Found a child command\n");
         //printf("\t\t\tsending child\n");

         fprintf(pipe, "%s", &line[5]);
         printf("passed fprintf\n");

         if(strncmp(clear, "clearScreen", 11) == 0)
         {
            printf("%s\n", clear);
            fprintf(pipe, "%s", &clear[11]);
            break;
         }

         //printf("\t\t\tdone -- sending child\n");
      }
      else if(strncmp(command, "#", 1) == 0)
      {
         printf("Found a # command\n");
         //printf("%s", line); **COMMENT OUT**
      }
   } 
```

`"clearScreen"`如果您在它说它将出现在文本文件中时注意到它，`"child clearScreen"`那么`if(strncmp(clear, "clearScreen", 11) == 0)`. 之后我让它中断，但我想让它调用另一个函数来重新初始化一个数组，这样我就不必离开这个函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T23:46:04.740

取决于您所说的“初始化”。

如果您将结构数组声明为

```
struct figure array_figure[19]; 
```

并且您只想将元素的所有值设置回其默认值，然后您可以将数组传递给函数并在函数内部修改它（从技术上讲，您将指针传递给第一个元素）。此类函数的签名可能如下所示：

```
void modify(struct figure *array_of_structs, unsigned int length_of_array) 
```

并按如下方式调用它：

```
modify(array_figure, 19); // if 19 is the length, that is 
```

如果您想要一个全新的数组，那么您必须按照 Jonathan Cruz 的建议分配一个新数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T23:26:23.903

初始化你使用 malloc 来分配所需的内存。malloc 返回一个指针，因此您可以将其放入函数中。如果要重新初始化，可以释放结构并重新进行。

就像是：

```
typedef struct mystruct {
    // ...
}MyStruct;

MyStruct* getMyStruct() {
    return (MyStruct*) malloc(sizeof(MyStruct));
} 
```

检查这些链接，这可能会有所帮助。

[http://www.cplusplus.com/reference/clibrary/cstdlib/malloc/](http://www.cplusplus.com/reference/clibrary/cstdlib/malloc/)

[http://www.cplusplus.com/reference/clibrary/cstring/memset/](http://www.cplusplus.com/reference/clibrary/cstring/memset/)

# matplotlib - matplotlib 底图颜色条文本位置

> ID：13149025
> 
> 赞同：4
> 
> 时间：2012-10-30T23:21:36.487
> 
> 标签：matplotlib, colorbar, matplotlib-basemap

我对颜色条的文本位置有疑问。我正在使用 matplotlib Basemap 制作一些绘图，并且我使用了 use`colorbar()`功能。

现在我需要把我的颜色条放在我图的左边。所以我使用`location='left'`，但刻度和标签的文本在颜色栏的右侧给出，覆盖了图片的一部分。

有什么办法可以更改栏左侧的文字吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-31T09:26:50.467

遗憾的是不是以完全集成的方式，但是当您处理诸如 mpl 之类的 OO 绘图库时，大多数事情都是可能的。

大约 3 个月前（https://github.com/matplotlib/matplotlib/pull/956），我进行了一项更改，以更易于访问的形式实现了此功能，但我们决定不合并它，因为有一些根本性的变化正在进行这使得这种变化不太适用于可能类型的情节。

要在左侧生成带有刻度的颜色条，您可以执行以下操作：

```
<your_colorbar_instance>.ax.yaxis.set_ticks_position('left') 
```

一个真实的工作示例：

```
import matplotlib
# create a dummy scalar mappable to create a colour bar with:
sm = plt.cm.ScalarMappable(cmap=plt.get_cmap('Reds'))
sm.set_array(range(10))

# create the colorbar and put the ticks on the left hand side
cb = plt.colorbar(sm)
cb.ax.yaxis.set_ticks_position('left')

plt.show() 
```

高温下，

# php - $.post() 函数不起作用？

> ID：13149035
> 
> 赞同：-1
> 
> 时间：2012-10-30T23:22:22.977
> 
> 标签：php, javascript, jquery, mysql

我已经尝试了几天几夜以找到解决方案。没有。

我知道它是如何`$.post`工作的，但由于某种原因它只是没有。

这就是我想要做的。

1.  将 post 函数调用到查询 MySQL 值的 PHP 页面（无需输入）。
2.  将 a 设置`<p>`为此值。

有什么建议么？非常感激。

```
function refresh()
{
$.post("check.php",change(data));
}

function change(text)
{
getElementbyId('money').innerHTML=text;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-30T23:30:23.547

绝对不是帖子的工作方式......

```
$.post("check.php", change);

function change(text)
{
   document.getElementById('money').innerHTML = text;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T23:32:39.163

或者更简单...

```
$.post("check.php",change); 
```

在设置 ajax 调用时，您不想调用 change 函数。您想将回调函数传递给`$.post()`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T23:36:48.100

错误是在没有“文档”的情况下调用 getElementById，您应该使用：

```
document.getElementById("money").innerHTML=text; 
```

或（如果您使用的是 jQuery）

```
$("#money").html(text_value); 
```

试试这个代码：

```
function refresh()
{
   $.post('check.php', function(data) {
     $("#money").html(data);
   });
}

refresh(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T23:30:35.770

这只是一个快速完成的代码，但是这个呢？

```
function change(text)
{
document.getElementbyId('money').innerHTML=text;
}

$.post('check.php', change); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-30T23:32:48.537

如果您使用处理函数，则需要省略参数并仅提供处理函数名称，或者将处理函数与参数包装在匿名函数中

```
$.post("check.php",change); 
```

或者

```
$.post("check.php",function(data){
   change(data)
); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-01T13:11:55.410

试试这个（在[http://jsfiddle.net/sRZ7z/1/](http://jsfiddle.net/sRZ7z/1/)中测试）：

```
 function refresh()
    {    
         $.ajax({
              //replace your url
              url: '/echo/html/',
              type: 'POST',
              // you can delete "data" parameter if not needed
              // is only for testing ajax on jsfiddle addording to the documentation
              // http://doc.jsfiddle.net/use/echo.html
              data: {
                    html: "Test ajax"
              },
         }).done(function ( data ) {
              $("#money").html(data);
         });
    }

    $(document).ready(function() {
         refresh();
    }); 
```

# c++ - 在 CentOS 和 Win7 上使用 QCryptographicHash 不匹配 MD5 哈希

> ID：13149040
> 
> 赞同：1
> 
> 时间：2012-10-30T23:23:29.263
> 
> 标签：c++, qt, md5

### 前言

我正在开发一个需要在两台机器（客户端和服务器）之间传输 FTP 文件的项目。我想通过比较客户端上生成的 MD5 校验和与服务器上生成的校验和来验证传输后文件的完整性。我使用 Qt 的 QCryptographicHash 类编写了一个命令行程序来执行此操作。减去错误检查，这是完整的代码：

### 最小的工作示例

```
#include <QCoreApplication>
#include <QByteArray>
#include <QFile>
#include <QCryptographicHash> 
#include <QTextStream>
#include <QStringList>

int main (int argc, char* argv[]) {
    QCoreApplication app(argc, argv);
    QTextStream cout(stdout, QIODevice::WriteOnly);
    QStringList arglist = app.arguments();

    QFile file(arglist.at(1));
    if(!file.open(QIODevice::ReadOnly)){
        /*error checking*/
    }

    QCryptographicHash cryptoHash(QCryptographicHash::Md5);
    while(!file.atEnd()){
        cryptoHash.addData(file.readLine());
    }

    QByteArray hashByteArray = cryptoHash.result();

    cout << hashByteArray.toHex() <<endl;
    file.close();
    return 0;
} 
```

### 问题

在任何机器上，此代码都会给出任何输入文件的可重复 MD5 散列。但是，在我的客户端上散列时为同一文件生成不同的散列值，而不是在我的服务器上散列时生成的散列值不同。我一直在努力解决这个问题，但似乎无法确定为什么这些哈希不匹配。我最后的想法是，这可能是与架构相关的问题，[正如这篇 SO 帖子中所讨论的那样](https://stackoverflow.com/questions/697361/md5-hash-calculates-differently-on-server)。但是，就我而言，我使用的是 Qt 的 MD5 散列实现，所以我想确保在我放弃 Qt 的方法或修改它们的源代码（这里是[md5.h](http://qt.gitorious.org/qt/qtbase/blobs/master/src/3rdparty/md5/md5.h)在这里[md5.cpp](http://qt.gitorious.org/qt/qtbase/blobs/master/src/3rdparty/md5/md5.cpp)，顺便说一句）。

机器细节。服务器：CentOS 5.8 64 位。客户端：Win7 64 位，但在 Windows 上，此应用程序是使用 Qt 的 32 位版本编译的，并且是 32 位应用程序。

顺便说一句，我打算同时分发我的应用程序的 32 位和 64 位版本。如果它与架构相关并且我被困在使用 Qt 的源代码，我该如何调和这个问题？

**编辑 1**：我忘了提到我正在通过 FTP 以二进制模式传输所有文件，并且文件大小在客户端和服务器上匹配。我最初确信这是一个行尾问题，但似乎并非如此，因为即使在二进制模式 FTP 传输中我也遇到了这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-02-10T08:58:39.640

除非您已经拥有它，否则无需处理内容部分。

```
QCryptographicHash hash(QCryptographicHash::Md5);     
QFile file(path);
 if (file.open(QIODevice::ReadOnly))
    {

       if ( hash.addData(&file) )
           return hash.result().toHex();

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T07:13:53.263

您不应该使用 readline 更好的方法是在字节数组中读取它，然后像这样计算哈希

```
QFile file("/home/opc0de/somefile.dat");

    if (file.open(QIODevice::ReadOnly)) {
        QByteArray fileData = file.readAll();
        QByteArray hashData = QCryptographicHash::hash(fileData, QCryptographicHash::Md5);

        qDebug() << hashData.toHex();
    } 
```

希望能帮助到你。

# wordpress - 使用 post slug 作为菜单名称为自定义帖子类型中的每个帖子自动创建菜单

> ID：13149045
> 
> 赞同：0
> 
> 时间：2012-10-30T23:24:21.970
> 
> 标签：wordpress, custom-post-type

我正在尝试编写一个函数，在发布帖子时为帖子类型“人”中的每个帖子创建带有 wp_create_nav_menu() 的菜单。

如果您有任何想法，我非常渴望看到它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T13:35:04.723

好的，我找到了解决方案

```
 `$myPages = $wpdb->get_results("SELECT * FROM $wpdb->posts WHERE post_type = 'people' AND post_status = 'publish'"); 

foreach ($myPages as $q ){
  $id = 'menu-'.$q->ID;
  $ai_post_title = strtolower($q->post_title);
  $ai_slug_as_menu_title = str_replace(" ", "-", $ai_post_title);
  wp_create_nav_menu( $ai_slug_as_menu_title );
}` 
```

# java - Java 类 istance（覆盖 ToString 方法）输出“adt.BinaryNode@1e24e45”

> ID：13149046
> 
> 赞同：4
> 
> 时间：2012-10-30T23:24:23.227
> 
> 标签：java, string, instance

您好，我`toString()`在自己的类中覆盖了方法，但不知何故，输出并不完全是我想要的。对不起新手问题，但我无法弄清楚问题出在哪里，任何提示/帮助都非常感谢。谢谢你。

我的课：

```
public class Country implements Comparable<Country>{
    private String name;
    private String capital;
    private int area;

    public Country(String a, String b, int c) {
        this.name = a;
        this.capital = b;
        this.area =c;
    }

    @Override
    public String toString(){
        return(this.name + " "+ this.capital+" " + this.area);
    }
} 
```

数据：

```
private void  preorder(BinaryNode  <type>  a){
      if (a != null){
       System.out.println(a.toString());
       preorder(a.left);
       preorder(a.right );
      }
} 
```

应用程序：

```
BinarySearchTree <Country> db = new BinarySearchTree<Country>();
    Country ob  = new Country("Romania", "Buc", 123);
    db.addNewElement(ob);
        ob  = new Country("Hungaria", "Bud", 50);
    db.addNewElement(ob);
        ob  = new Country("Vatican", "Vat", 1);
    db.addNewElement(ob);
    db.printAll(); 
```

输出：

```
adt.BinaryNode@1e5e2c3
adt.BinaryNode@18a992f
adt.BinaryNode@4f1d0d 
```

编辑：在 msitake 的“chaitanya10”提示之后修复

数据：

```
private void  preorder(BinaryNode  <type>  a){
      if (a != null){
       System.out.println(a.elm.toString()); // ACCES the data in node not the hole node.
       preorder(a.left);
       preorder(a.right );
      }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T23:28:25.107

你的方法`BinaryNode<type>`作为一个，你不是在`argument`呼吁。你有没有。将其更改为`toString``brinaryNode<type>``COuntry``overriden toString()``Country``BinaryTree`

```
private void  preorder(Country a){
      if (a != null){
       System.out.println(a.toString());

      }
} 
```

或 `override toString() in BinaryNode`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T23:28:17.727

您正在调用 BinaryNode 的 toString 方法，而不是 Country

# javascript - HTML 页面被添加到 iFrame 中

> ID：13149049
> 
> 赞同：0
> 
> 时间：2012-10-30T23:25:03.400
> 
> 标签：javascript, html, css, gwt

我在 gwt 中创建了一个 iFrame。我需要在该 IFrame 中绘制一些 SVG。这是我正在做的 1\. 创建一个 IFrame 2\. 调用 jsp 文件，该文件调用了其他几个 js 文件。3\. 绘制图形

问题 - 我希望所有图形都在 iFrame 上，而实际上它是在 iFrame 内创建一个新的 HTML 页面本身。我怎么能阻止这个。同样，新的 HTML 页面没有显示滚动条，我该如何添加它，因为我所有的图形都在流出并且对我不可见。有没有办法这样做。请帮我一些指示。

我不确定如何复制代码，所以我没有这样做。

谢谢！

```
 <html>
  <head>
  <script type="text/javascript">
   alert("Inside the jsp file");
   var criticalPath = window.top.criticalPath;

   </script>
   </head>
   <body>
   <script type="text/javascript" src="./js/flow.js"></script>          
   </body>
   </html> 
```

考虑上面的代码，flow.js 正在绘制饼图。现在所有这些代码都写在一个jsp文件中。此 jsp 代码是从 iframe 中的 gwt 代码调用的。现在我希望这个饼图在 iFrame 中，但它在 iFrame 内创建新的 HTML 页面

```
 <iFrame>
     <html>
             ..........
     </html>
     </iFrame> 
```

我不希望这种情况发生。在 iFrame 中创建的新 html 也没有滚动条，因为我的饼图失去了焦点。为什么会这样？任何原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T06:15:33.630

iFrame 始终包含 HTML 文档。这就是创建 iFrame 标签的目的。您的 jsp 文件在此 iFrame 内呈现为 HTML 文档。

要添加滚动条，请将 CSS 添加到您的 jsp 文件中。在包含您的 svg 图像的元素上设置溢出：自动。

# jquery - 设置字符串部分样式的函数

> ID：13149051
> 
> 赞同：1
> 
> 时间：2012-10-30T23:25:04.303
> 
> 标签：jquery, string, styling

有人可以就此提出建议吗？我正在尝试创建一个 jquery 函数，该函数将采用字符串的最后 3 个字符并以不同的方式设置它们。在我的情况下，字体大小的一半。

所以在像 €100.50 这样的字符串中，0.50 会更小

有人可以指出我正确的方向吗？或者，如果插件/脚本已经存在，请告诉我

谢谢！

十二月

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T23:45:34.910

> 有人可以指出我正确的方向吗？...

使用`replace`将文本包装在标签中并添加一个类以使用 CSS 对其进行样式设置：

```
$el.html( $el.text().replace(/.{3}$/, '<span class="small">$&</span>') ); 
```

**演示：http:** [//jsbin.com/epuzag/4/edit](http://jsbin.com/epuzag/4/edit)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T23:45:58.573

也许你可以使用一个函数来获取所需字符串的长度并剪切它的最后 3 个字母，然后将它们放入一个新字符串中，放入一个带有所需类的新标签（跨度或其他东西）中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T23:40:10.910

好吧，不一定涉及 jquery 。您可以将字符串作为参数包装到样式 DIV 中。

就像是：

```
 txt = $("#id").text();
 txt = style_string(txt);

 function style_string(string){
      ...
     if(){
        string = "<div class='class-to-style'>" +string+"</div>"
      }....

 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T23:50:09.780

您要修改的文本需要包含在另一个 html 元素中，您可以在其中添加类或内联样式以进行 css 调整

假设这个盯着 html，并使用 jQuery 来获取和设置 mosified text/html：

```
<span>€100.50</span> 
```

.

```
$('span').html(function(idx, oldHtml) {
    var startStr = oldHtml.substring(0, oldHtml.length - 3)
    var endStr = '<small>' + oldHtml.substring(oldHtml.length - 3) + '</small>'
    return startStr + endStr;

}); 
```

演示：http: [//jsfiddle.net/vJ63t/](http://jsfiddle.net/vJ63t/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-30T23:52:22.390

试试这个：

```
function formatString( txt ) {

    var i = txt.lastIndexOf( "." ); 
    if( i === -1 ) return txt; // if txt => $10 return

    return txt.slice( 0, i ) + "<span class='smaller'>" + txt.slice( i ) + "</span>";
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-31T00:11:24.120

我经常使用像这样的格式化程序：

HTML

```
<div id="price"></div> 
```

CSS

```
.decimal {
 font-size:10px; 
 color:black;
} 
```

JS

```
function formatPrice(price, containerId, digits) {

  var startStr,
      endStr,
      containerElem = $("#"+containerId);

  //cut last specified digits
  startStr = price.substr( 0, price.length - digits );
  endStr = price.substr( price.length - digits, price.length );

  //DOM elements

  $("<span/>")
    .text(endStr)
    .addClass("decimal")
    .appendTo(containerElem)
    .parent()
    .prepend(startStr);
}

var price = "€100.50";
formatPrice(price, "price", 3); 
```

# c# - 带有 xds 文件的 ASP.Net Web 应用程序失败

> ID：13149052
> 
> 赞同：1
> 
> 时间：2012-10-30T23:25:05.673
> 
> 标签：c#, asp.net, .net, web-applications, dataset

该网站可以在我的本地机器上运行，但是一旦我部署了它，我的 mySQL 适配器就会出错。

我正在使用 Visual Studio 2010 .Net 4 以及 mySQL 及其 .Net 连接器的最新副本。我收到的错误引用了我从中部署它的位置。

我用 BLL 和 DAL 构建了网站，DAL 包含一个数据集 xds，这似乎是问题的根源。

[这是](http://bodyguardhealthclub.com.au.173-248-177-8.cld1.temphostspace.com/index.aspx)它当前所在的地址，索引和成员页面在数据从 BLL 中提取时起作用，而不是从 DAL 中提取，因为数据首先被转换，这存在于捕获错误的 try catch 中。如果您导航到补充页面，您会收到错误，因为有一个`ObjectDataSource`直接连接到数据集并且那里没有 try catch。

我们尝试了多种方法来尝试修复错误，我和朋友已经搜索了解决问题的方法，但我们找不到任何有效的方法。

我和他一样只是新手，所以我没有任何经验可以借鉴，并希望有任何帮助。

这是错误：

> 无法加载文件或程序集 'MySql.Data, Version=6.5.4.0, Culture=neutral, PublicKeyToken=c5687fc88969c44d' 或其依赖项之一。找到的程序集的清单定义与程序集引用不匹配。（来自 HRESULT 的异常：0x80131040）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T08:18:29.343

添加了这个：

```
<assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
  <dependentAssembly>
    <assemblyIdentity name="MySql.Data" publicKeyToken="c5687fc88969c44d" />
    <bindingRedirect oldVersion="0.0.0.0-6.3.7.0" newVersion="6.5.4.0" />
  </dependentAssembly>
</assemblyBinding> 
```

并将我引用的`MySql.Data`库的属性更改`CopyLocal`为`True`.

# algorithm - 这条线在matlab中是什么意思？Dijkstra算法的简单实现

> ID：13149057
> 
> 赞同：0
> 
> 时间：2012-10-30T23:25:31.430
> 
> 标签：algorithm, matlab, dijkstra

这是 Dijkstra 算法的一个实现。如果`Distance = Inf*ones(N,1)`， 的值是多少`Distance(CurrentNode)`？？有人还可以举一个 src 和 ConMat 的示例值吗？谢谢！

```
while (nVisited <N)
   Visited(CurrentNode) = 1;
   for i=1:N
       if (ConMat(CurrentNode,i)>0)
           temp = ConMat(CurrentNode,i) + **Distance(CurrentNode)**;
           if (temp< Distance(i))
               Distance(i) = temp;
               PrevNode(i) = CurrentNode;
           end
       end
   end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T23:42:21.137

distance 是一个长度为 n 的数组，其中 n 是节点数。distance(i) 是从 src 到节点 i 的最佳距离。所有距离都从无穷大开始，但距离（src）从 0 开始。然后我们更新距离

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T23:45:37.293

`Distance = Inf * ones(N,1)`返回

```
信息
信息
信息

...
信息

```

*一个大小为Nx1*的数组。

* * *

`CurrentNode`包含您的算法正在计算路径的顶点的索引。假设您有一个简单的图表，如下图（从[Wikipedia](http://en.wikipedia.org/wiki/Dijkstra's_algorithm)窃取）：

![在此处输入图像描述](../Images/fbd3935407ee528af489986d6c3f047c.png)

您的初始`src`节点是您开始搜索的节点 - 在本例中为 index `1`。对于您的初始节点，`Distance`是`0`. 所以, `Distance( 1 ) = 0`, 而其他的`Distance`等于`Inf`( `Distance(src+1:end) = Inf`)。

* * *

`ConMat`是您的矩阵表示形式的图表。

# php - 需要帮助清理 $_POST 数组中的数据

> ID：13149063
> 
> 赞同：-2
> 
> 时间：2012-10-30T23:26:09.833
> 
> 标签：php

这不起作用。当我在表单中输入 html 时。例如，当我输入水平规则时，即使 $value 是通过 strip_tags 传递的，它也会显示在 echo 输出中。

```
function sanitizeString($var){
   $var = strip_tags($var);
   $var = htmlentities($var);
   return stripslashes($var);
}

foreach($_POST as $key => $value){
   echo $key."<br>";
   sanitizeString($value);
   echo $value."<br>";
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T23:27:35.510

你实际上并没有改变`$value`。您正在丢弃返回值。试试`$value = sanitizeString($value);`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T23:29:29.267

你可以试试

```
$_POST = array_map(function ($var) {
    return stripslashes(htmlentities(strip_tags($var)));
}, $_POST);

foreach ( $_POST as $key => $value ) {
    echo "$key = $value <br>";
} 
```

或 Better Sill 使用`filter_var`

```
$_POST = array_map(function ($var) {
    return filter_var($var, FILTER_SANITIZE_STRING, FILTER_FLAG_STRIP_HIGH | FILTER_FLAG_STRIP_LOW);
}, $_POST); 
```

不同之处

```
$var = "index.php?name=guest<script>alert('attacked')</script>";
var_dump(stripslashes(htmlentities(strip_tags($var))));
var_dump(filter_var($var, FILTER_SANITIZE_STRING, FILTER_FLAG_STRIP_HIGH | FILTER_FLAG_STRIP_LOW)); 
```

输出

```
string 'index.php?name=guestalert('attacked')' (length=37)
string 'index.php?name=guestalert(&#39;attacked&#39;)' (length=45) 
```

# java - GWT：何时使用 Button 以及何时使用 ButtonCell

> ID：13149071
> 
> 赞同：0
> 
> 时间：2012-10-30T23:27:42.470
> 
> 标签：java, gwt, user-interface, widget

我观看了有关 GWT 性能的 Google I/O 视频，该视频建议尽可能多地使用 Cell Widget，因为它们比普通 Widget 更快且重量更轻。

我正在尝试确定是否应该使用：

*   `com.google.gwt.user.client.ui.Button`（按钮小部件）；或者
*   `com.google.gwt.cell.client.ButtonCell`（单元格小部件）

我读过关于小部件和单元格的一些相互矛盾的文献；一些作者说，只有在没有任何需要响应的事件时才使用单元格。

所以我问：单元小部件没有处理程序并且无法响应事件是真的吗？如果是这样，`ButtonCell`肯定会被点击的a有什么用！如果这不是真的，那么似乎单元小部件完全*替代*了“旧”小部件框架 - 这是真的，还是还有`Button`其他“旧”小部件同类的用例？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T00:13:32.830

严格来说，ButtonCell 不是一个“单元格小部件”，它是一个“单元格”，用于像 CellList 或 CellTable 这样的单元格小部件来呈现其内容。

用于显示大量类似结构的数据（列表/表格）以及在此类表格中呈现特定“单元格”的单元格小部件 - 您应该使用这些轻量级的无状态小部件（ButtonCell、TextCell）。好处来自生成的 dom 元素和 JS 的数量更少。此外，CellWidgets 仍然可以接收浏览器事件，但您应该明确指定它。有关此主题的更多信息 - 请参阅[Google 官方指南](https://developers.google.com/web-toolkit/doc/latest/DevGuideUiCustomCells)。

如果您不使用单元格小部件 - 您不需要使用单元格，例如，如果您想制作一个用户输入表单并放置一些标签和按钮 - 使用标签和按钮小部件，如果您需要显示列表>100 行 - 您可能希望在 CellList 小部件中使用 TextCell 和 ButtonCell。

# matlab - MATLAB：非线性模型拟合的 Anova

> ID：13149072
> 
> 赞同：2
> 
> 时间：2012-10-30T23:27:46.943
> 
> 标签：matlab, curve-fitting, anova

在 Matlab 中，有没有一种快速的方法来对两个非线性模型拟合执行 ANOVA？与此 R 命令类似： [http](http://rss.acs.unt.edu/Rdoc/library/drc/html/anova.drc.html) ://rss.acs.unt.edu/Rdoc/library/drc/html/anova.drc.html，用作：anova(model2, model1)。正如上面链接中指定的那样，我想要的测试是：“如果指定了两个对象，则给出从较大模型到较小模型的减少测试。（这仅在模型嵌套时才具有统计意义，即：一个模型是另一个模型的子模型。）"

我只发现了这个： http: [//www.mathworks.com/help/stats/linearmodel.anova.html](http://www.mathworks.com/help/stats/linearmodel.anova.html) 用于线性模型。

我正在使用 fit() 命令生成拟合，所以如果我没记错的话，保持拟合的对象是“cfit”类型

# java - try-catch 环绕回调

> ID：13149076
> 
> 赞同：4
> 
> 时间：2012-10-30T23:27:56.630
> 
> 标签：java, callback, try-catch

```
public class Test {

    public static void main(String[] args) {

        try {
            doSomething(new TestCallback() {
                @Override
                public void doCallback() {
                    throw new NullPointerException();
                }
            });
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    public static void doSomething(TestCallback callback){
        callback.doCallback();
    }

    interface TestCallback {
        public void doCallback();
    }
}

RESULT:
java.lang.NullPointerException
    at managers.concurrency.Test$1.doCallback(Test.java:11)
    at managers.concurrency.Test.doSomething(Test.java:20)
    at managers.concurrency.Test.main(Test.java:8) 
```

在上面的代码中我们会得到`NullPointerException`，因为回调代码是在堆栈的不同部分执行的。有没有办法在本地捕获此类异常？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T23:37:30.293

您已经捕获了异常。尝试如下 -

```
 try {
        doSomething(new TestCallback()  {
            @Override
            public void doCallback()  {
                throw new NullPointerException();
            }
        });
    } catch (Exception e) {
        System.out.println("Exception caught !!!");
    } 
```

输出：

```
捕捉到异常！！！

```

# objective-c - 如何通过单击事件获取 UIBarButtonItem 的当前索引以将其删除？

> ID：13149077
> 
> 赞同：1
> 
> 时间：2012-10-30T23:28:11.657
> 
> 标签：objective-c, ios, events, uibarbuttonitem, uitoolbar

我正在学习Objective-C和iOS开发。所以`UIBarButtonItem`，我`UIToolBar`在. 但这**真的很**糟糕，并且代码不是很具有声明性，如您所见：`UIControlEventTouchDown``selector`

 **```
- (void)barButtonClicked:(id)sender
{
     NSArray * const itemsArray = userToolbar.items;
     NSMutableArray * mutableItems = [NSMutableArray arrayWithArray:itemsArray];
    [mutableItems removeObjectAtIndex:0];
    [userToolbar setItems: mutableItems animated:YES];
} 
```

如您所见，我根据`userToolbar`项目数组中的索引删除了项目。这不是我真正想要的。我有`UIToolBar`将近 10-12 岁的孩子`UIBarItemButtons`，我想为他们所有人定义一个共同事件：通过单击将其从栏中删除。所以我需要这样的东西：

`[mutableItems removeObjectAtIndex:sender.currentIndexInToolBarItemsArray]`

那么，问题是我该如何实现呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T00:04:17.537

不要删除常量索引 0 处的对象，而是使用以下`removeObject:`方法`NSMutableArray`：

```
[mutableItems removeObject:sender]; 
```**

# java - 为什么我们不应该在 catch 块中进行清理？

> ID：13149078
> 
> 赞同：2
> 
> 时间：2012-10-30T23:28:14.073
> 
> 标签：java, exception-handling, try-catch-finally

> **可能重复：**
> [为什么在 Try ... Catch 中使用 finally](https://stackoverflow.com/questions/1158667/why-use-finally-in-try-catch)

为什么我们不应该使用 catch 块来清理代码？

我没有过多地使用错误处理技术，但现在开始将它们用于几乎每个程序。*关于时间*

因此，在浏览文章/文档时，我遇到了 finally 块。

正如它所暗示的，无论是否存在异常，finally 块都会运行（当然，如果 JVM 或 PC 强制关闭，它不会运行）。finally 块通常用于清理代码（资源）。

所以基本上，如果我的代码没有出现异常，那我为什么要清理代码。我不应该将清理代码放在 catch 块而不是 finally 块中。

我尝试寻找类似的问题，但似乎没有人问过这个问题。所以我继续提出了一个问题：D

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-30T23:30:26.723

因为该`catch`块*不能保证执行。* 该`finally`块确实有这样的保证，除非您将电源线踢出墙壁。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T00:16:20.293

正如@RobertHarvey 指出的那样，该`catch`块*不能保证执行*，因此该`finally`块是避免使用此类代码以使您的代码更清晰：

```
 try
    {
        // do something
    }
    catch(Exception e)
    {
        // error handling
        // clean up
    }
    // clean up 
```

这样你就可以像这样：

```
 try
    {
        // do something        
    }
    catch(Exception e)
    {
        // error handling
    }
    finally
    {
        // clean up
    } 
```

如果您想要执行第一个代码，该`finally`块将为您提供帮助，即您想要清理（例如关闭文件），无论是否有异常，如果您只想在发生错误时清理，您`CAN`清理在 catch 块中。

# scala - 如何使用 Class[T] 参数实例化一个新的 Scala 类？

> ID：13149082
> 
> 赞同：1
> 
> 时间：2012-10-30T23:28:26.633
> 
> 标签：scala, akka

这是我现在拥有的代码，我引用了一个名为 Processor 的 Akka Actor 的任何子类：

```
def newProcessorProps(processorClass: Class[_ <: Processor]): Props = {
  Props(new processorClass).withDispatcher("dispatcher")
} 
```

我只是不知道如何使用该参数实例化一个新类。我认为这里不需要反思，因为我已经上课了。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T23:37:07.860

如果您将类对象作为值，则可以通过调用其上的`newInstance()`方法来实例化。所以你会这样做：

```
def newProcessorProps(processorClass: Class[_ <: Processor]): Props = {
  Props(processorClass.newInstance()).withDispatcher("dispatcher")
} 
```

您还可以使用类型的 Manifest 来实例化该类型的对象

```
def newProcessorProps[T <: Processor](implicit m: Manifest[T]): Props = {
  Props(m.erasure.newInstance().asInstanceOf[T]).withDispatcher("dispatcher")
} 
```

然后像这样为特定的处理器调用它：

```
newProcessorProps[SpecificProcessor] 
```

这只有在我认为 T 有一个无参数的构造函数时才有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T00:46:46.167

根据[文档，从技术上讲，它是 Props(processorClass) 或 Props[ProcessorClassType]](http://doc.akka.io/api/akka/2.1.0-RC1/#akka.actor.Props%24)

# c# - 还没有工作，我正在尝试调整 Bitmap/s 的大小，但它们仍然是 1920X1080，为什么？

> ID：13149085
> 
> 赞同：1
> 
> 时间：2012-10-30T23:29:21.297
> 
> 标签：c#

这是代码：

```
if (Form1.ExtractAutomatic == true)
            {
                using (var bitmap = new Bitmap(_width, _height, _width * 3, PixelFormat.Format24bppRgb, pBuffer))
                {
                    if (!this.Secondpass)
                    {
                        long[] HistogramValues = Form1.GetHistogram(bitmap);
                        Form1.Histograms.Add(HistogramValues);
                        long t = Form1.GetTopLumAmount(HistogramValues, 1000);
                        Form1.averagesTest.Add(t);

                    }
                    else
                    {

                        if (_frameId > 0)
                        {
                            double t = Form1.averagesTest[_frameId] / 1000.0 - Form1.averagesTest[_frameId - 1] / 1000.0;
                            w.WriteLine("averagesTest >>>  " + t);
                            double tt = framesCounts();
                            if (_frameId == framesCounts())
                            {
                                w.Close();
                            }
                            if (Form1.averagesTest[_frameId] / 1000.0 - Form1.averagesTest[_frameId - 1] / 1000.0 > 0.0) 
                            {
                                count = 6;
                            }

                            if (count > 0)
                            {
                                ResizeBitmap(bitmap, 10, 10);
                                bitmap.RotateFlip(RotateFlipType.Rotate180FlipX);
                                bitmap.Save(Path.Combine(_outFolder, _frameId.ToString("D6") + ".bmp"),ImageFormat.Bmp);
                                count --;
                            } 
```

而 ResizeBitmap 是：

```
public static Bitmap ResizeBitmap(Bitmap b, int nWidth, int nHeight)
        {
            Bitmap result = new Bitmap(nWidth, nHeight);
            using (Graphics g = Graphics.FromImage((Image)result))
                g.DrawImage(b, 0, 0, nWidth, nHeight);
            return result;
        } 
```

为什么硬盘上的文件是 1920X1080 而不是 10X10 ？为什么储蓄如此缓慢？我认为在这种情况下将文件保存到硬盘大约 2600 帧应该很快，不是吗？

有人可以告诉我如何根据我的代码修复它吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T23:31:51.453

它应该是

```
bitmap = ResizeBitmap(bitmap, 10, 10); 
```

您没有将调整大小的位图分配给任何东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T23:32:36.180

方法返回位图，所以需要使用方法的返回值：

```
Bitmap newBitmap = ResizeBitmap(bitmap, 10, 10); 
```

仍然与此处相同的答案：[如何在此函数中调整位图的大小？](https://stackoverflow.com/questions/13143511/how-do-i-resize-the-bitmap-in-this-function)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T23:40:01.267

在您的第一个代码示例的底部附近使用它：

```
using (Bitmap resized_bmp = ResizeBitmap(bitmap, 10, 10))
{
    resized_bmp.RotateFlip(RotateFlipType.Rotate180FlipX);
    resized_bmp.Save(Path.Combine(_outFolder, _frameId.ToString("D6") + ".bmp"),ImageFormat.Bmp);
    count --;
} 
```

正如 Tim 建议的那样，这使用了一个新`Bitmap`变量（并正确处理它）来执行保存。

# iphone - 喜欢通过 Graph API 或 Open graph 在 iPhone 应用程序中的粉丝页面？

> ID：13149087
> 
> 赞同：0
> 
> 时间：2012-10-30T23:29:35.883
> 
> 标签：iphone, facebook, facebook-graph-api, facebook-like

似乎我可以添加粉丝页面“喜欢”按钮的唯一方法是[使用 UIWebView](http://www.raywenderlich.com/1626/how-to-post-to-a-users-wall-upload-photos-and-add-a-like-button-from-your-iPhone-app)。

我个人不喜欢这种方法，我更希望能够通过 Graph API 喜欢该页面，类似于此处解释的内容：[https ://developers.facebook.com/docs/howtos/publish-to-饲料-ios-sdk/](https://developers.facebook.com/docs/howtos/publish-to-feed-ios-sdk/)

在[这个问题](https://stackoverflow.com/questions/5837010/liking-a-page-on-behalf-of-a-user) 中，ToddH 的最后一个回答是，可以通过 Graph API“点赞”粉丝页面。然而，根据 Stan 的回答，您似乎不能通过 Graph API 点赞粉丝页面，因为这违反了 Facebook 的平台政策，但您可以通过 Open graph（我还没有使用过）点赞。

简而言之：我可以使用 Graph API 来点赞粉丝页面吗？如果不是，我唯一的选择是使用 UIWebView（如 Ray 的教程中所述），或者我有一个新的选择来使用 Facebook 的 Open graph？（如果合法，请详细说明此选项）

编辑：简短的回答是否定的，您不能使用 Graph API/Open Graph 来喜欢粉丝页面。请看下面我的回答。

另外我想补充一点，我不明白为什么对这个问题投反对票如此重要。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T17:24:45.783

正如在 Facebook 工作的 Igy 在上面的评论中所写，没有办法直接通过 Graph API 或通过 Open Graph 来实现。

在我的项目中，我添加了一个按钮，单击时通过 UIWebView 导航到 facebook 粉丝页面，用户可以从那里喜欢该页面。

# ruby - 使用用户输入 Ruby 打开一个文件

> ID：13149090
> 
> 赞同：0
> 
> 时间：2012-10-30T23:30:20.483
> 
> 标签：ruby, file-io

我从这样的用户那里获取一个字符串变量：

```
mail = gets 
```

我想用这个变量打开一个文件。

```
file = File.new(mail, "r") ##obviously this isn't working 
```

我如何实际使用此邮件变量来打开该名称的文件？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T23:38:03.813

```
mail = gets.chomp 
```

gets 函数给出一个以 \n 结尾的字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T00:36:05.927

我更喜欢`mail = gets.strip`.

`strip`似乎比它稍慢，**但**`chomp`我发现它更具可读性。

如果您对基准感到好奇，请在[此处](https://gist.github.com/3984074)查看要点。

# python - 是否有关于如何在 Windows 上安装 Berkeley DB XML Python API 的良好文档或您自己的说明？

> ID：13149107
> 
> 赞同：2
> 
> 时间：2012-10-30T23:32:13.683
> 
> 标签：python, windows, python-2.7, berkeley-db, berkeley-db-xml

我应该第一次安装 Berkeley DB 和 Berkeley DB XML，并且特别努力解决了这个`IOError: No such file or directory db\include\db.h`问题。但在那之后我遇到了另一个问题：`Namerror: name 'db_ver_list' is not defined`. 是否有任何文档可以让我在 Windows 上安装这些用于 Python 的数据库 API？或者你可以给我指示或步骤来做到这一点。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T00:46:05.670

我相信对于 Windows 上的 Python 2.7，您唯一的选择是按照[Oracle 提供的说明从](http://www.oracle.com/technetwork/products/berkeleydb/downloads/index.html)[源代码](http://www.oracle.com/technetwork/products/berkeleydb/downloads/index.html)构建模块（根据这些[说明](http://www.oracle.com/technetwork/products/berkeleydb/downloads/index.html)，[源代码](http://docs.oracle.com/cd/E17276_01/html/ref_xml/xml_win/intro.html)包含在子目录中构建 Python 绑定的特定说明）。`dbxml-2.5.16\dbxml\src\python`

您需要安装免费的 Visual C++ 2008 Express 编译器，该编译器可以从离线安装[Visual Studio 2008 Express iso](https://www.microsoft.com/en-gb/download/details.aspx?id=20682)安装，以便能够执行 Berkeley DB/DBXML[源代码](http://docs.oracle.com/cd/E17276_01/html/ref_xml/xml_win/intro.html)的编译。

# .net - Visual Studio 2012 Express 桌面和颜色主题编辑器扩展

> ID：13149112
> 
> 赞同：4
> 
> 时间：2012-10-30T23:32:31.950
> 
> 标签：.net, visual-studio, visual-studio-2012

我最近安装了 VS2012 Express Desktop 和 Express Web。我不得不说我对新的黑暗和光明主题有点缺乏热情。考虑到这一点，我已经找到并尝试安装[Visual Studio 2012 Color Theme Editor](http://visualstudiogallery.msdn.microsoft.com/366ad100-0003-4c9a-81a8-337d4e7ace05)。

我已经在我的办公机器（运行 Visual Studio 2012 的高级版）上成功安装并使用了它，但是在 Express 版本上安装失败。

速成版根本不支持此扩展，还是在 VS2012 Express 中管理主题有替代方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T11:55:04.280

感谢 jmoerdyk 提供此链接……一切正常！

[http://alinconstantin.blogspot.co.uk/2012/09/using-color-themes-with-visual-studio.html](http://alinconstantin.blogspot.co.uk/2012/09/using-color-themes-with-visual-studio.html)

# spss - 如何从 SPSS 中的另一个语法文件中获取一个语法文件？

> ID：13149117
> 
> 赞同：3
> 
> 时间：2012-10-30T23:33:04.637
> 
> 标签：spss

在 R 中有一个`source`函数，您可以在其中从另一个 R 脚本获取 R 脚本。我希望能够在 SPSS 中做同样的事情。

**如何从另一个 SPSS 语法文件中获取 SPSS 语法文件？**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-31T00:15:56.740

*在@AndyW 的评论之后更新。*

有`INSERT`and`INCLUDE`命令。`INSERT`比`INCLUDE`. [请参阅此处的 INSERT](http://publib.boulder.ibm.com/infocenter/spssstat/v20r0m0/index.jsp?topic=%2Fcom.ibm.spss.statistics.help%2Fsyn_insert_syntax.htm)文档。

以下是基本语法模板：

```
INSERT  FILE='file specification'
       [SYNTAX = {INTERACTIVE*}]
                 {BATCH       }
       [ERROR = {CONTINUE*}]
                {STOP     }
       [CD = {NO*}]
             {YES}
       [ENCODING = 'encoding specification'] 
```

因此，可以将以下命令放在 SPSS 语法文件中

```
INSERT FILE='foo.sps'. 
```

它会导入`foo.sps`语法文件。默认情况下，语法必须遵循交互模式的规则，并且代码不会因错误而停止。

为了避免必须指定文件的完整路径，可以将工作目录指定为`INSERT`语句中的参数或使用单独的`CD`命令。例如，

```
CD '/user/jimbo/long/path/to/project' 
```

另一种选择是使用`FILE HANDLE`.

有关详细信息，请参阅 SPSS 语法参考（[此处以大 PDF 文件的形式](ftp://public.dhe.ibm.com/software/analytics/spss/documentation/statistics/21.0/en/client/Manuals/IBM_SPSS_Statistics_Command_Syntax_Reference.pdf)提供）。

# c++ - c++ - 在 Sublime Text 中构建系统，Windows 8

> ID：13149118
> 
> 赞同：2
> 
> 时间：2012-10-30T23:33:17.527
> 
> 标签：c++, build, sublimetext2

我刚刚开始学习编程（在 C++ 上），开始我的意思是完全开始（“hello world”开始......）。不想使用多个 IDE，我希望能够使用我的文本编辑器 Sublime Text 2 编写和构建简单程序。有人可以通过分步教程告诉我如何实现 C++ 编译和Sublime Text 中的执行功能。

我在网站上搜索了 Sublime Text 构建系统，但答案非常具体，无法帮助像我这样的新手（但他们以后可能会帮助我）。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T23:58:49.830

Sublime Text 2 将允许你在应用程序中构建 .cpp 文件，但你必须在你的机器上安装 GNU c++ 编译器并在你的路径上定义它才能工作。

以下链接提供了一个 g++ 版本供您使用，并提供了执行此操作的详细说明

[http://www.claremontmckenna.edu/pages/faculty/alee/g++/g++.html](http://www.claremontmckenna.edu/pages/faculty/alee/g++/g++.html)

一旦你安装了 g++，你就可以构建你的 .cpp 文件并在 sublime text 2 中运行它。

快乐编码！:)

# jquery - 使用 IE 的 jQuery ajax 跨域表单提交问题

> ID：13149122
> 
> 赞同：1
> 
> 时间：2012-10-30T23:33:43.540
> 
> 标签：jquery, cross-domain

我的 IE 有问题，大吃一惊吧？我有一个将姓名、电话和电子邮件提交到另一个域下的脚本的网络表单。我是 jquery.ajax 来提交表单的。我还使用 jquery.validate 进行表单验证。姓名和电子邮件是必需的。电话是可选的。

当我在 Chrome 中提交表单时，它运行良好。我收到了感谢电子邮件，我的数据到达了另一个域上的脚本。

当我在 IE9 中尝试相同的表单时，我填写了所有字段并点击提交，它看起来像是已提交（我在表单所在的位置收到感谢消息），但没有任何数据进入服务，我没有也不会收到确认电子邮件-因此实际上并未发布。

那么我怎样才能让这个脚本在 IE7、8、9 中工作。这是现在的脚本...当我取消注释成功操作中的警报时，我会在 IE 中收到警报。它只是不发布数据。我在这里看到了很多关于这个的帖子，但我并没有以一种可以理解的方式把所有的部分放在一起。

我听说这可以直接使用 IE10。

```
jQuery.validator.setDefaults({
submitHandler: function() {

var cons_info_component = jQuery("#cons_info_component").val();
var cons_mail_opt_in = jQuery("#cons_mail_opt_in").val();
var longnum = jQuery("#1540_6383_2_8347_1").val();
var survey_id = jQuery("#SURVEY_ID").val();
var cons_email_opt_in = jQuery("#cons_email_opt_in").val();
var cons_email_opt_in_requested = jQuery("#cons_email_opt_in_requested").val();
var cons_first_name = jQuery("input#cons_first_name").val();
var cons_last_name = jQuery("input#cons_last_name").val();
var cons_email = jQuery("input#cons_email").val();
var cons_phone = jQuery("input#cons_phone").val();

if(cons_phone === "PHONE NUMBER (OPTIONAL)") { cons_phone = ''; }

var ACTION_SUBMIT_SURVEY_RESPONSE = jQuery("#ACTION_SUBMIT_SURVEY_RESPONSE").val();

var dataString = 'cons_info_component='+cons_info_component+'&cons_mail_opt_in='+cons_mail_opt_in+'&1540_6383_2_8347='+longnum+'&SURVEY_ID='+survey_id+'&cons_first_name='+cons_first_name+'&cons_last_name='+cons_last_name+'&cons_email='+cons_email+'&cons_phone='+cons_phone+'&cons_email_opt_in='+cons_email_opt_in+'&cons_email_opt_in_requested='+cons_email_opt_in_requested+'&ACTION_SUBMIT_SURVEY_RESPONSE='+ACTION_SUBMIT_SURVEY_RESPONSE;

jQuery.ajax({   
type: "POST",
url: "http://urlthatIsubmittoo.com/script/",
crossDomain: true,
cache: false,
data: dataString,

statusCode: {
404: function() {
  //alert('page not found');
},
200: function() {
  //alert('success');
}
},
 success: function() {
    //alert('submited');    
},
 complete: function() {

    jQuery('div.convioform').html("<div class='tybox'></div>"); 
    jQuery('div.convioform .tybox').html("<h5 class='webform-title'>Thank You</h5><p>You'll soon be receiving our e-mails and updates now.</p>");
        }
    }); // close .ajax line

},  
 }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T23:55:39.283

将其插入文件顶部（通过 github/jaubourg）：

```
if ( window.XDomainRequest ) {
    jQuery.ajaxTransport(function( s ) {
        if ( s.crossDomain && s.async ) {
            if ( s.timeout ) {
                s.xdrTimeout = s.timeout;
                delete s.timeout;
            }
            var xdr;
            return {
                send: function( _, complete ) {
                    function callback( status, statusText, responses, responseHeaders ) {
                        xdr.onload = xdr.onerror = xdr.ontimeout = jQuery.noop;
                        xdr = undefined;
                        complete( status, statusText, responses, responseHeaders );
                    }
                    xdr = new XDomainRequest();
                    xdr.onload = function() {
                        callback( 200, "OK", { text: xdr.responseText }, "Content-Type: " + xdr.contentType );
                    };
                    xdr.onerror = function() {
                        callback( 404, "Not Found" );
                    };
                    xdr.onprogress = jQuery.noop;
                    xdr.ontimeout = function() {
                        callback( 0, "timeout" );
                    };
                    xdr.timeout = s.xdrTimeout || Number.MAX_VALUE;
                    xdr.open( s.type, s.url );
                    xdr.send( ( s.hasContent && s.data ) || null );
                },
                abort: function() {
                    if ( xdr ) {
                        xdr.onerror = jQuery.noop;
                        xdr.abort();
                    }
                }
            };
        }
    });
} 
```

# php - Laravel 以编程方式获取特定页面

> ID：13149124
> 
> 赞同：3
> 
> 时间：2012-10-30T23:33:50.893
> 
> 标签：php, jquery, ajax, pagination, laravel

我正在尝试使用 Laravel 和 jQuery ajax 实现分页。

我需要将页码发送到后控制器并获取该特定页面的结果。

所以我的问题是。有没有办法从 Laravel 中的 Paginator 获取特定页面，例如`$model->page(3)`从分页数据中获取第三页作为数组，所以我可以将其序列化为 JSON 并作为响应发回？

**更新：**

感谢 Laravel 的 irc 频道上的好人，我找到了答案。所以我会写在这里作为对其他人的帮助。魔法是这样的：

`Input::merge(array("page" => $page_number))`

你实际上让 Laravel 的 Paginator 认为在动作中传递了一个“页面”参数。整齐啊:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T09:32:28.887

感谢 Laravel 的 irc 频道上的好人，我找到了答案。所以我会写在这里作为对其他人的帮助。魔法是这样的：

```
Input::merge(array("page" => $page_number)) 
```

你实际上让 Laravel 的 Paginator 认为在动作中传递了一个“页面”参数。整齐啊:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-26T20:37:25.767

要跟进，您需要开始您的路线才能获得。比如：Route::get('...');

如果 Route 带有 post，例如 Route::post('...'); 这不起作用。

djandreski 非常感谢您提供此解决方案，希望对其他人有所帮助。

# css - 使用 css 媒体选择器时，视网膜显示器上是否同时加载标准和高分辨率图像？

> ID：13149125
> 
> 赞同：0
> 
> 时间：2012-10-30T23:33:57.020
> 
> 标签：css, image, retina-display

我正在使用下面显示的 css 为“视网膜”显示器提供高分辨率图像。标准和高分辨率图像是否都加载在“视网膜”显示设备上？还是只是高分辨率图像？

```
.icon {
  background-image: url(example.png);
}

@media only screen and (-Webkit-min-device-pixel-ratio: 1.5),
only screen and (-moz-min-device-pixel-ratio: 1.5),
only screen and (-o-min-device-pixel-ratio: 3/2),
only screen and (min-device-pixel-ratio: 1.5) {
  .icon {
    background-image: url(example@2x.png);
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T03:11:20.600

最后一页仅使用高分辨率图像。首先加载整个 CSS 样式表，然后浏览器确定它实际需要显示的内容。`@media`引用高分辨率图像的查询将覆盖`.icon`视网膜设备的原始实例。

# expressionengine - 将 exp-resso 商店从 1.5.3 升级到 1.6.0

> ID：13149127
> 
> 赞同：2
> 
> 时间：2012-10-30T23:34:11.933
> 
> 标签：expressionengine, expresso-store

有人在将商店从 1.5.3 升级到 1.6.0 时遇到问题吗？

```
A PHP Error was encountered
Severity: Notice
Message: Undefined index: register_member
Filename: store/mod.store.php
Line Number: 463

A PHP Error was encountered
Severity: Notice
Message: Undefined index: username
Filename: store/mod.store.php
Line Number: 474

A PHP Error was encountered
Severity: Notice
Message: Undefined index: screen_name
Filename: store/mod.store.php
Line Number: 474

A PHP Error was encountered
Severity: Notice
Message: Undefined index: password
Filename: store/mod.store.php
Line Number: 474

A PHP Error was encountered
Severity: Notice
Message: Undefined index: password_confirm
Filename: store/mod.store.php
Line Number: 474 
```

升级后，上述错误开始出现在结帐页面上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T07:31:20.427

要尝试的事情：

*   **确保您已在Add-ons > Modules > Run Module Updates**下运行升级脚本
***   尝试打开其他浏览器。如果这解决了问题，那么它可能与会话有关。清空你的`exp_store_carts`桌子应该为所有客户解决这个问题。*   尝试删除并重新上传此模块的所有文件。然后如上所述运行更新。**

 **作为最后的手段，您也可以尝试完全卸载并重新安装该模块。**

# .net - 在 .NET 中创建的 Guid 的前四个字节分布有多均匀？

> ID：13149139
> 
> 赞同：4
> 
> 时间：2012-10-30T23:35:56.153
> 
> 标签：.net, guid

网络和 StackOverflow 上有大量关于 GUID 的信息。关于独特性的问题确实无穷无尽。这**不是关于 2^128 uniqueness 的问题**。

我的问题是确定**第一部分**的随机性，特别是 GUID的*前*四个字节在 .NET 中。根据研究，它应该是时间戳的最低有效 32 位。但是时间戳是如何转换的呢？这是多么随机？

有谁知道第一部分是如何由 .NET 构建的，是否真的均匀分布在 4 个字节中？

**时间戳**如何用于构造**前 32 位**？

时钟精度如何影响它？

Microsoft 是否尝试过确保前 4 个字节是随机的？

**为什么：**大容量 Guid 使用在前 4 个字节中有 2 个主要业务案例，用于良好的随机 guid。如果每个新 GUID 的分布均匀，则可以根据需要的分区数量使用基于前 1、2、3 或 4 个字节的表分区。我见过一个 20 亿行的表，每天有 1000 万次插入，其中 128 个分区使用前 2 个字节作为分区键。注意在 DB2 下，必须使用密钥的第一部分。引用 DB2 DBA。这大大提高了数据库的吞吐量。第二种用途是批处理作业并行键分配。如果您知道您有大约 N 行作为批处理任务，则可以将键范围分配给并行作业。如果没有同构拆分，调度程序必须首先计算每个作业的 from 和 to 键。如果这意味着读取 1 亿条数据并在内存中管理它们只是为了调度工作，前 x 分钟因作业调度而丢失。在我看到的示例中，大约需要 15 分钟。因此，有两个很好的理由使用并希望均匀分布 GUId。

SAP Banking 系统实际上引入了一个自定义 GUID 例程来解决 GUID 第一部分中缺乏随机性的问题。对于可以访问 SAP 银行系统的用户，函数是 BANK_DISTRIBUTED_ID_CREATE。代码中的注释解释了他们为什么这样做。那些可以访问 SAP 支持的人有一个注释 496904 解释了为什么他们认为有必要修复 guid。

在自定义例程之前，AIX 下的 GUID 中存在明显的偏差。C++ 内核。唯一是的，但是随机的，尤其是第一部分，显然不是。

更新：当我决定编写一个程序进行调查时：Windows XP 上的 .net 4，戴尔 Intel Core 2 Duo。

如果有兴趣，我已经包含了测试程序结果。使用生成的指南

```
var G = Guid.NewGuid(); 
```

结果在 SAMPLE 100,000,000 guid 上看起来不错。（更大的集仍在运行）出于我的目的，看起来分布均匀，足以假设 OK。

```
Byte 0: with Value 6A was least frequent : 389140 times
Byte 0: with Value 58 was most  frequent : 392241 times
Byte 1: with Value 25 was least frequent : 388905 times
Byte 1: with Value B3 was most  frequent : 392552 times
Byte 2: with Value D2 was least frequent : 389114 times
Byte 2: with Value CC was most  frequent : 391984 times
Byte 3: with Value 66 was least frequent : 388744 times
Byte 3: with Value 16 was most  frequent : 392838 times 
```

**编辑：根据评论添加背景研究**

我在 AIX 系统上看到了 GUID 示例。我们已经有超过 20 亿。它们分布不均。2 个字节有明显的偏差。因此，引入了一个特殊的例程来生成同质的 guid。我想知道.net 是否有类似的偏差

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T12:49:48.390

Guids 似乎分布均匀。对 10 亿个 Guid 的测试看起来不错。如果考虑前 4 个字节。这意味着它们对分区很有用，并且可以粗略推断而不是从 Db 中读取范围。

# ruby-on-rails - Ruby on rails 测试不断给我错误

> ID：13149141
> 
> 赞同：1
> 
> 时间：2012-10-30T23:36:32.470
> 
> 标签：ruby-on-rails, ruby

我正在使用 Ruby on Rails 制作一个简单的社交网络。我想在注册时为个人资料名称添加某些字符的限制。所以，在我的 User.rb 文件中，我有以下内容：

```
class User < ActiveRecord::Base
  # Include default devise modules. Others available are:
  # :token_authenticatable, :confirmable,
  # :lockable, :timeoutable and :omniauthable
  devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :trackable, :validatable

  # Setup accessible (or protected) attributes for your model
  attr_accessible :email, :password, :password_confirmation, :remember_me,
                  :first_name, :last_name, :profile_name
  # attr_accessible :title, :body

  validates :first_name, presence: true
  validates :last_name, presence: true

  validates :profile_name, presence: true,
                           uniqueness: true,
                           format: {
                             with: /^[a-zA-Z0-9_-]+$/,
                             message: "must be formatted correctly."
                           }
  has_many :statuses

  def full_name
    first_name + " " + last_name
  end
end 
```

我设置了一个测试来验证它是否有效，这就是测试的内容：

```
test "user can have a correctly formatted profile name" do
user = User.new(first_name: '******', last_name: '****', email: '********@gmail.com')
user.password = user.password_confirmation = '**********'
user.profile_name = '******'
assert user.valid? 
```

结尾

当我运行测试时，我不断收到错误消息，说我的`assert user.valid?`线路有问题。所以我想我在我的`with: /^[a-zA-Z0-9_-]+$/`.

我得到的错误是`1) Failure: test_user_can_have_a_correctly_formatted_profile_name(UserTest) [test/unit/user_test.rb:40]:`

但是在第 40 行，它有这段代码`assert user.valid?`

任何帮助表示赞赏:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T00:58:26.587

> 所以我想我用正则表达式弄乱了一些语法。

你的语法很好。

但是，您的错误消息清楚地表明您使用的配置文件名称不匹配。

您是否在配置文件名称中使用了其他字符，例如空格？还是时期？

试试这样：

```
/^[a-zA-Z0-9_-]+$/.match "foobar" #=> #<MatchData "foobar"> 
```

如果数据不匹配，你将得到 nil：

```
/^[a-zA-Z0-9_-]+$/.match "foo bar" #=> nil 
```

# reporting-services - 使用 SSRS 和共享客户数据库的临时报告

> ID：13149145
> 
> 赞同：0
> 
> 时间：2012-10-30T23:36:53.213
> 
> 标签：reporting-services, ssrs-2012

我有一个数据库，里面有很多客户。表的每一行都有一个客户 ID，表示数据属于哪个客户。

是否可以让最终用户使用 Ad-Hoc 报告来构建报告，但只让他们查看与其客户 ID 关联的数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T02:53:11.700

在报告中，您可以使用内置字段 UserID 来返回当前用户的域名，例如 MYDOMAIN\Username。

如果您可以创建一个将客户 ID 映射到域名的表并将其连接到您的主数据表，那么您可以将 where 子句添加到您的数据集查询中，例如

```
WHERE MappingTable.DomainUsername = @CurrentUser 
```

在报表中，创建一个名为 CurrentUser 的隐藏参数并将值设置为 Globals!UserID.Value

您需要在报表数据源中使用 Windows 身份验证，其中报表用户凭据被传递到数据源，此解决方案才能正常工作。

* * *

编辑：我看到我误读了您的原始问题，该问题实际上是在询问是否可以允许用户在限制他们对数据的视图的同时创建临时报告。这种情况排除了在报告本身中实施的任何解决方案，因为用户将设计他们自己的报告。相反，您可能需要在源数据库中实现某种形式的安全层，例如使用视图。如果您的用户使用域登录，您可以使用与上述类似的方法。例如，您的视图可能包含对 SUSER_NAME() 的引用，以限制该特定用户的数据。

# ruby - 确定变量是否是Ruby中的数字的最佳方法是什么？

> ID：13149146
> 
> 赞同：1
> 
> 时间：2012-10-30T23:36:56.410
> 
> 标签：ruby, ruby-on-rails-3

> **可能重复：**
> [在 Ruby on Rails 中测试字符串是否为数字](https://stackoverflow.com/questions/5661466/test-if-string-is-a-number-in-ruby-on-rails)

目前我有这个（可怕的）代码：

```
def is_num(num_given)
  begin
    num_given.to_i
    worked = true
  rescue
    worked = false
  ensure
    return worked
  end
end 
```

我对此进行了重构：

```
def is_num(num_given)
  num_given.to_i.is_a?(Numeric) rescue false
end 
```

这对我来说仍然感觉不对，有更好的方法吗？

这两种实现都适合我的目的，我只是在寻找一些代码兴奋。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T00:25:55.543

`something.is_a?(Numeric)`是要走的路。参考您的后一个示例，无需调用`to_i`输入。

请注意，`something.is_a?(Numeric)`如果您要查看字符串是否为数字，这将不起作用...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T00:48:21.327

这是另一个解决方案。它不是很像 Ruby，但这是故意的（例如，`while`比`str.chars.each`这种情况下要快）。

```
# is a character between 0 and 9? (based on C's isdigit())
def digit?(c)
  o = c.ord
  o >= 48 && o <= 57 # '0'.ord, '9'.ord
end

# is a string numeric (i.e., represented as an integer or decimal)?
def numeric?(str)
  str = str.to_s unless str.is_a?(String)
  l = str.length
  i = 0

  while i < l
    c = str[i]
    if c == '.' || c == '-'
      i += 1
      next
    end

    return false if !digit?(c)

    i += 1
  end

  true
end 
```

这是单元测试。如果我错过了一个案例，请告诉我。对于其他回答者，只需将`subject`块更改为您的功能。

```
if $0 == __FILE__
  require 'minitest/autorun'
  describe :digit? do
    %w(- + : ? ! / \ ! @ $ ^ & *).each do |c|
      it "flunks #{c}" do
        digit?(c).must_equal false
      end
    end

    %w(0 1 2 3 4 5 6 7 8 9).each do |c|
      it "passes #{c}" do
        digit?(c).must_equal true
      end
    end
  end

  describe :numeric? do
    subject { :numeric? }
    %w(0 1 9 10 18 123.4567 -1234).each do |str|
      it "passes #{str}" do
        method(subject).call(str).must_equal true
      end
    end

    %w(-asdf 123.zzz blah).each do |str|
      it "flunks #{str}" do
        method(subject).call(str).must_equal false
      end
    end

    [-1.03, 123, 200_000].each do |num|
      it "passes #{num}" do
        method(subject).call(num).must_equal true
      end
    end
  end
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T23:47:46.427

您列出的功能不起作用：

```
is_num("a") #=> true 
```

问题是它们不会为无效输入引发错误。你想要的是`Integer`，这会引发一个你可以挽救的错误：

```
def is_num(num_given)
  !!Integer(num_given) rescue false
end 
```

这有效：

```
irb(main):025:0> is_num("a")
=> false
irb(main):026:0> is_num(5)
=> true
irb(main):027:0> is_num((1..2))
=> false
irb(main):028:0> is_num("3")
=> true 
```

（不过，可能有更自然的方法来做到这一点。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T23:43:29.873

您始终可以使用简单的正则表达式：

```
def is_num(num_given)
  num_given =~ /\d+(\.\d+)?/
end 
```

# android - Google Cloud Messaging (GCM) 可以与 Kindle Fire 搭配使用吗？

> ID：13149147
> 
> 赞同：13
> 
> 时间：2012-10-30T23:37:01.877
> 
> 标签：android, kindle-fire

C2DM 需要 Google ID，现在 C2DM 已被 GCM 取代，而 GCM 显然不需要 Google ID。

这是否意味着它仅与没有 Google Play Appstore 或 Google 堆栈可用的设备（例如 Kindle Fire）兼容？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-31T02:41:07.590

简短的回答是否定的。

实际从 GCM 服务器接收消息的机制依赖于 Google Services Framework，Google Play 和 GTalk 等捆绑服务是该框架的一部分。

如果您没有安装框架，您将无法接收来自 GCM 服务器的消息。基本上，如果您的手机上没有 Google Services Stack，它将无法正常工作。

参考这个链接：http: [//developer.android.com/guide/google/gcm/gcm.html](http://developer.android.com/guide/google/gcm/gcm.html)

> 它要求运行 Android 2.2 或更高版本的设备也安装了 Google Play Store 应用程序，或者运行 Android 2.2 和 Google API 的模拟器。但是，您不仅限于通过 Google Play 商店部署您的 Android 应用程序。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-23T05:25:47.410

Kindle for tablet 支持 ADM（亚马逊设备消息），与 GCM 类似，但实现方式不同。[在此处查找有关 ADM 的更多信息](https://developer.amazon.com/sdk/adm.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T00:06:56.790

你在哪里读到它不需要谷歌ID？在我看来它仍然需要一个谷歌帐户？

从文档中截取：

```
<!-- GCM requires a Google account. -->
<uses-permission android:name="android.permission.GET_ACCOUNTS" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T00:07:13.507

我不相信。我认为 Google Cloud Messaging 需要在设备上安装 Google Play Services。

# math - 在给定椭圆度的情况下画一个椭圆

> ID：13149154
> 
> 赞同：3
> 
> 时间：2012-10-30T23:37:51.877
> 
> 标签：math, drawing, ellipse

我正在对一些数据进行可视化，但遇到了障碍。我需要根据如下所示的数据绘制一些椭圆：

```
{
    x: 455.53 //the center x coordinate
    y: 122.44 //the center y coordinate
    e1: .24101 //value from -1 to 1, represents stretching along x when positive, along y when negative
    e2: -.44211 //value from -1 to 1, represents stretching along the 45 degree line when positive and 135 when negative 
} 
```

长话短说，我不知道该怎么做……这只是一次可视化，所以效率不是问题。如果有人可以建议如何操纵 e1/e2 来获得焦点或主轴/主轴和旋转角度，那将是非常棒的。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T15:46:03.940

这种指定椭圆率的形式在[引力透镜](http://en.wikipedia.org/wiki/Gravitational_lensing_formalism)中很常见。这些椭圆度数是复椭圆度值的实部和虚部；请参阅[弱透镜可观测](http://en.wikipedia.org/wiki/Gravitational_lensing_formalism#Weak_lensing_observables)部分和那里的 ε 表达式。

由于政策决定，我不能在这里做正确的数学符号；看到这个元问题。[https://meta.stackexchange.com/questions/4152/adding-support-for-math-notation](https://meta.stackexchange.com/questions/4152/adding-support-for-math-notation)。因此，我将简单地指出，矢量的大小是长短轴比的变换，并且角度是两个分量比的反正切的一半。

# java - 使用路径列表从 SSH 查询大量文件

> ID：13149155
> 
> 赞同：0
> 
> 时间：2012-10-30T23:37:52.617
> 
> 标签：java, linux, ssh

我有一个 path(.txt) 列表，它是从数据库示例中通过 SSH 连接数据的路径：

```
/home/data3/bb/00/01/01/01/2001-abc.xml 
```

我需要将所有这些文件都放到我的本地机器上，服务器在 linux 中运行，我曾经从 SSH 客户端获取文件。

由于所有文件都基于一些父文件，例如 /bb/....，所以我过去常常下载整个文件。

但是这次公用文件太大了下载不了，我需要的xml也只是庞大的服务器里面的一部分而已。

有谁知道如何获取这些文件？Java中是否有任何SSH库，所以我可以直接在JAVA中读取xml的内容？或者无论如何要阅读路径列表并只下载我想要的文件？

这些文件通常如下：

```
/home/data3/bb/00/01/01/01/200142123-abc.xml
/home/data3/bb/00/01/02/01/200123423-fseaf.xml
/home/data3/bb/03/03/01/01/200112312-fefe.xml 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T23:42:52.327

您可以使用该`rsync`实用程序。如果本地机器已经有许多文件，这将特别有用，在这种情况下`rsync`不会传输它们。

Rsync 也可以压缩文件。这对您来说可能很容易：

```
rsync -azvr  source_host:/home/data3/bb/ /home/data3/bb/ 
```

# c# - ABCPDF 计算标题大小和位置。

> ID：13149160
> 
> 赞同：2
> 
> 时间：2012-10-30T23:38:39.260
> 
> 标签：c#, asp.net, abcpdf

问题是一个头文件，我必须将它包含在 abcpdf 生成的 pdf 文件的每一页上。

头文件包含多个图像文件和多行文本，具体情况因情况而异。

问题是我不知道如何计算标题的大小。我需要有它的大小来分配矩形位置，以便将每个页面上的其余 html 文件与标题放在一起。我正在使用 C#。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T12:46:51.733

首先，您需要在顶部创建具有足够空间以允许添加标题的文档。以下设置适用于页眉约为页面 1/5 的普通 A4 文档。请记住，PDF 上的坐标来自右下角而不是左上角。

```
//Setting to create the document using ABCPdf 8
var theDoc = new Doc();
theDoc.MediaBox.String = "A4";

theDoc.HtmlOptions.PageCacheEnabled = false;
theDoc.HtmlOptions.ImageQuality = 101;
theDoc.Rect.Width = 719;
theDoc.Rect.Height = 590;
theDoc.Rect.Position(2, 70);
theDoc.HtmlOptions.Engine = EngineType.Gecko; 
```

下面的代码在文档的每一页上放置一个标题，一个标题图像，然后是图像下方的彩色框，其中包含一些自定义文本。

在这种情况下，标题图像为 1710 x 381，以保持图像的分辨率尽可能高，以免在打印时看起来模糊。

```
private static Doc AddHeader(Doc theDoc)
{
    int theCount = theDoc.PageCount;
    int i = 0;

    //Image header 
    for (i = 1; i <= theCount; i++)
    {
         theDoc.Rect.Width = 590;
         theDoc.Rect.Height = 140;
         theDoc.Rect.Position(0, 706);

         theDoc.PageNumber = i;
         string imagefilePath = HttpContext.Current.Server.MapPath("/images/pdf/pdf-header.png");

         Bitmap myBmp = (Bitmap)Bitmap.FromFile(imagefilePath);
         theDoc.AddImage(myBmp);
     }

     //Blue header box
     for (i = 2; i <= theCount; i++)
     {
         theDoc.Rect.String = "20 15 590 50";
         theDoc.Rect.Position(13, 672);
         System.Drawing.Color c = System.Drawing.ColorTranslator.FromHtml("#468DCB");
         theDoc.Color.Color = c;
         theDoc.PageNumber = i;
         theDoc.FillRect();
     }

     //Blue header text
     for (i = 2; i <= theCount; i++)
     {
         theDoc.Rect.String = "20 15 586 50";
         theDoc.Rect.Position(25, 660);
         System.Drawing.Color cText = System.Drawing.ColorTranslator.FromHtml("#ffffff");
         theDoc.Color.Color = cText;
         string theFont = "Century Gothic";
         theDoc.Font = theDoc.AddFont(theFont);
         theDoc.FontSize = 14;
         theDoc.PageNumber = i;
         theDoc.AddText("Your Text Here");
     }
     return theDoc;
} 
```

# c# - 防止按钮获得焦点

> ID：13149161
> 
> 赞同：0
> 
> 时间：2012-10-30T23:38:45.237
> 
> 标签：c#, windows-mobile, compact-framework, windows-mobile-6.5

我有一个具有多种形式的解决方案，每个都可能有文本框/控件和一个显示 SIP 的按钮（底栏是隐藏的）。

当用户单击我的 SIP 按钮时，SIP 已启用，但焦点现在是按钮。我希望用户单击按钮 - 要显示的 SIP，但焦点保持在用户单击按钮之前具有焦点的控件上。有谁知道如何做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T13:49:52.430

您可以通过从 Control 类派生并覆盖 OnPaint 方法来创建自定义按钮，而不是使用标准按钮。以这种方式创建的控件在处理 Click 事件时默认不会获得焦点（在 VS2008 netcf 2.0 上测试）。

```
public partial class MyCustomButton : Control
{
    public MyCustomButton()
    {
        InitializeComponent();
    }

    protected override void OnPaint(PaintEventArgs pe)
    {
        pe.Graphics.DrawString("Show SIP", Font, new SolidBrush(ForeColor), 0, 0);
        // Calling the base class OnPaint
        base.OnPaint(pe);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T09:13:33.620

nathan 的解决方案也适用于 Compact Framework 或本机 Windows Mobile 应用程序。在文本框中 GotFocus 设置一个全局变量并在按钮单击事件中使用它来将焦点设置回最后一个活动文本框：

```
 //global var
    TextBox currentTB = null;
    private void button1_Click(object sender, EventArgs e)
    {
        inputPanel1.Enabled = !inputPanel1.Enabled;
        if(currentTB!=null)
            currentTB.Focus();
    }

    private void textBox1_GotFocus(object sender, EventArgs e)
    {
        currentTB = (TextBox)sender;
    } 
```

问候

约瑟夫

编辑：TextBox 子类的解决方案：

```
class TextBoxIM: TextBox{
    public static TextBox tb;
    protected override void OnGotFocus (EventArgs e)
    {
        tb=this;
        base.OnGotFocus (e);
    }
}
...
private void btnOK_Click (object sender, System.EventArgs e)
{    
    string sName="";
    foreach(Control c in this.Controls){
        if (c.GetType()==typeof(TextBoxIM)){
            sName=c.Name;
            break; //we only need one instance to get the value
        }
    }
    MessageBox.Show("Last textbox='"+sName+"'");
    } 
```

然后，使用 TextBoxIM 代替放置 TextBox。

# wordpress - 如何按字母顺序在 Wordpress 中显示自定义字段？

> ID：13149162
> 
> 赞同：2
> 
> 时间：2012-10-30T23:38:47.480
> 
> 标签：wordpress, custom-fields, alphabetical

我需要在 WP 页面上显示一个自定义字段，该字段仅包含以字母 A 开头的值，没有重复项。目前，我正在使用之前由 Soju 提供的代码。这按字母顺序排序，但我不能让它只显示以一个字母开头的值：

```
 <?php
    $movie_reviews = get_posts( 
    'numberposts=-1&order=ASC&orderby=meta_value&meta_key=LAST%20NAME' );
    $directors = array();
    foreach( $movie_reviews as $post ) {
        $director = get_post_meta( $post->ID, 'LAST NAME', true );
    }
    $directors = array_unique($directors);
    foreach( $movie_reviews as $post ) : setup_postdata( $post );
    foreach ($directors as $director) {
    }
    if (strtolower($director[0])=='') {
        // display what you want
    }
    ?>
    <span><li>
    <?php $director = get_post_meta( $post->ID, "LAST NAME", $single = true );
    if( $director !== '' ) {
    echo $director;
    } ?></br></li>
    </span>
    <?php endforeach; ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T02:37:59.530

我认为您最好在数据库查询中而不是使用 PHP 来处理这个问题。使用您当前的代码，您将进行数十次效率低下的数据库调用。

## 拉记录

WordPress 将所有自定义字段存储在`wp_postmeta`表中，可以按如下方式检索。

```
mysql> SELECT post_id, meta_value FROM wp_postmeta WHERE meta_key = 'LAST NAME';
+---------+-------------------+
| post_id | meta_value        |
+---------+-------------------+
|       4 | Spielberg         |
|       6 | AveryTiredman     | <-- in the list twice
|       8 | bLanguage         |
|      10 | aWakeMahn         |
|      12 | dScreensAreBrukin |
|      14 | Aluloby           |
|      16 | AaLetterC         |
|      19 | AveryTiredman     | <-- 
+---------+-------------------+
8 rows in set (0.00 sec) 
```

我已经使用自定义字段创建了多个帖子`LAST NAME`来复制您的网站。如您所见，上面的查询提取了我作为自定义字段输入的所有姓氏。

您可以使用以下内容过滤和排序结果。

```
mysql> SELECT meta_value AS last_name FROM wp_postmeta
       WHERE meta_key = 'LAST NAME' and meta_value LIKE 'a%'
       GROUP BY meta_value
       ORDER BY meta_value;
+---------------+
| last_name     |
+---------------+
| AaLetterC     |
| Aluloby       |
| AveryTiredman | <-- only shown once
| aWakeMahn     |
+---------------+
4 rows in set (0.00 sec) 
```

如您所见，上面的查询仅提取以字母开头的唯一记录，`"a"`并按名称对它们进行排序。

**注意：**我将列名更改为与`SELECT meta_value AS last_name`.

## 与 WordPress 一起使用

WordPress 有自己的数据库类，其中包含一个名为的方法[`get_results()`](http://codex.wordpress.org/Class_Reference/wpdb#SELECT_Generic_Results)，可以让您运行自己的查询。该方法将返回一个允许您访问列名的对象数组。

```
<?php $directors = $wpdb->get_results("SELECT meta_value AS last_name FROM wp_postmeta WHERE meta_key = 'LAST NAME' and meta_value LIKE 'a%' GROUP BY meta_value ORDER BY meta_value") ?>
<ol>
  <?php foreach( $directors as $director ) : ?>
    <li><?php echo $director->last_name ?></li>
  <?php endforeach ?>
</ol> 
```

我知道您对此并不陌生，因此我尝试将其列出，以便您了解发生了什么。如果您有任何问题，请告诉我，我会尽力帮助您。

* * *

## 更新

制作带有链接以通过导演过滤的页面的最简单方法是使用自定义页面模板。基本上，创建一个以`page-directors.php`以下内容命名的文件。然后添加一个新页面并将模板设置为`"Directors Page"`.

```
<?php
/**
 * Template Name: Directors Page
 */

// get a distinct set of the first letters available
$letters = $wpdb->get_results("SELECT DISTINCT substring(meta_value, 1, 1) as letters FROM wp_postmeta WHERE meta_key = 'LAST NAME' ORDER BY meta_value", ARRAY_N); 

// get the letter from the URL
// and make sure there is only a single letter
$director_letter = filter_input(INPUT_GET, 'director', FILTER_VALIDATE_REGEXP, array('options' => array('regexp' => '/^[a-z]$/i')));

// set a default if none is available
if( $director_letter == false ) {
  $director_letter = 'a';
}else {
  $director_letter = strtolower($director_letter);
}

// don't trust user's input
$director_letter = mysql_real_escape_string($director_letter);

// same query as before but includes letter from user
$directors = $wpdb->get_results("SELECT meta_value AS last_name FROM wp_postmeta WHERE meta_key = 'LAST NAME' and meta_value LIKE '$director_letter%' GROUP BY meta_value ORDER BY meta_value");

get_header();
?>
<div id="primary">
    <div id="content" role="main">
        <?php while ( have_posts() ) : the_post(); ?>

      <!-- 
        CSS:
        #director_letters li {
          list-style: none;
          display: inline;
        }
      -->
      <ol id="director_letters">
        <?php foreach( $letters AS $letter ) : ?>
          <li><a href="<?php echo add_query_arg('director', strtolower($letter[0])) ?>"><?php echo strtoupper($letter[0]) ?></a></li>
        <?php endforeach ?>
      </ol>

      <h2>Directors</h2>

      <ol>
        <?php foreach( $directors AS $director ) : ?>
          <li><?php echo $director->last_name ?></li>
        <?php endforeach ?>
      </ol>

        <?php endwhile; // end of the loop. ?>
    </div>
</div>
<?php get_footer() ?> 
```

## 更新#2

如果您使用我已经为您编写的代码和 SQL 查询，您应该能够弄清楚。我不想只给你答案，因为你不会那样学习。所以这就是我要做的。我将为您提供完成它所需的步骤，并让您弄清楚。如果您有任何问题或遇到困难，请发表评论，我会帮助您。

1.  您需要创建另一个将导演的姓氏作为`GET`参数的自定义页面模板。这将与我用来显示董事姓氏的第一个字母的完全相同。

2.  接下来，您将需要查询该`wp_postmeta`表并选择与主管`post_id` `WHERE`的`meta_value`姓氏相同的值。

3.  您将需要遍历帖子 ID 并显示帖子的标题。

> **注意：**您会发现很方便的一个功能是[`get_the_title()`](http://codex.wordpress.org/Template_Tags/get_the_title). 您可以传递帖子的 id，它将返回标题。

到目前为止，我向您展示的所有内容都可以用来回答您的问题。但是，正如我之前所说，如果您遇到无法解决的问题，请告诉我。

此外，一旦您完成此功能，请将代码添加回您的原始问题。很有可能我们可以大大提高它的效率:)

PS如果您不理解我提供给您的某些代码，请告诉我。拥有你不理解的代码对你没有任何好处:)

## 更新#3

我制作了一个[视频，](http://youtu.be/8eYE-PEaGB0)从头开始解释所有步骤。首先是提取导演的姓氏，然后显示所有字母，最后显示导演的所有 WordPress 帖子。

# symfony - Symfony2：在 security.interactive_login 事件中设置会话变量的控制器的功能测试

> ID：13149163
> 
> 赞同：1
> 
> 时间：2012-10-30T23:39:04.820
> 
> 标签：symfony

我已经在 security.interactive_login 事件上实现了一个监听器，以设置一个在我的应用程序中使用的会话变量，正如[Symfony2 中所建议的：成功登录事件后，执行一组操作](https://stackoverflow.com/questions/11180351/symfony2-after-successful-login-event-perform-set-of-actions)。问题是在功能测试中没有触发 security.interactive_login 事件（我想这是合乎逻辑的，因为没有实际的交互式登录）。鉴于此限制：如何使用用户登录时设置的会话变量运行功能测试？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T13:28:00.987

如果您使用基本身份验证，您最终可以手动触发事件处理程序进行测试，但我认为更正确的方法是通过登录表单登录到应用程序并使用客户端提交它 - 应该以这种方式触发事件侦听器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T20:05:24.820

只是为了详细介绍解决方法：

在功能测试用例中我改变了

```
$client = static::createClient(array(), array(
    'PHP_AUTH_USER'=>'alberto'
    ,'PHP_AUTH_PW'=>'********'
    )
); 
```

为了

```
$client = static::createClient();
$crawler = $client->request('GET','/secured/login');
$form = $crawler->selectButton('Aceptar')->form();
$form['_username'] = 'alberto';
$form['_password'] = '********';
$crawler = $client->submit($form); 
```

# javascript - 如何使用 jQuery 附加 li 并在 onclick 方法上使用 id

> ID：13149164
> 
> 赞同：1
> 
> 时间：2012-10-30T23:39:09.017
> 
> 标签：javascript, jquery, html

好的，下面是我的代码：

```
for (var mycounter = currentcanvas.getObjects().length; mycounter > 0; mycounter--) {
    var id = currentcanvas.getObjects().length - mycounter;
    alert(id);
    $("#frontlayers").prepend('<li id="' + id + '" class="layers"></span> Layer ' + (id + 1) + ': ' + "  " + ' </li>');
    $("#" + id).click(function(e) {
        alert(id);
    });
}​ 
```

这正确地添加了带有文本“Layer 1”和“Layer 2”的 li，但是当我单击它们时，警报始终是 2 而不是 0 和 1。有谁知道为什么会这样？抱歉，我对 jQuery 比较陌生。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T23:50:08.390

这是一个很好的用途，`$.each`因为使用处理函数可以避免变量闭包的范围问题`i`：

```
$.each(currentcanvas.getObjects(), function(i, v) {
     var id = i;  // nb: numeric ID fields only allowed in HTML5
     $('<li>', {
         id: id,
         'class': 'layers',
         text: 'Layer ' + (id + 1) + ': '
     }).appendTo('#frontlayers').on('click', function(e) {
         alert(id);
     });
}); 
```

也就是说，由于您的 ID 无论如何都存储在单击的元素上，因此您可以直接使用它 -`this.id`

# mysql - 为什么日期时间列上的索引在 MySQL 中具有低基数？

> ID：13149165
> 
> 赞同：3
> 
> 时间：2012-10-30T23:39:26.650
> 
> 标签：mysql, datetime, indexing, cardinality

我有一个超过 1800 万行的表格，并且正在快速增长。

我在日期时间列（数百万个唯一值）、intColumn 1（具有大约 40k 个唯一值）、intColumn 2（具有大约 3k 个唯一值）和 intColumn 3（具有 1k 个唯一值）上创建了一个复合索引。

指数的基数最终是 197！

我对此感到非常困惑，想知道我是否做错了什么，或者我是否遗漏了什么。这个索引似乎没用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T00:12:57.493

尝试运行`ANALYZE TABLE`，然后检查基数。显示的基数只是一个估计值，它可能不正确。

另外，看看[这里](https://dba.stackexchange.com/questions/10340/primary-key-index-with-a-datetime-as-first-part-of-the-compound-key-is-never-use)，它可能会有所帮助。

# excel - 如何将任意范围的值更改为范围值？

> ID：13149167
> 
> 赞同：0
> 
> 时间：2012-10-30T23:39:35.280
> 
> 标签：excel, matlab, range

我将在 EXCEL 或 MATLAB 中将数组作为 [1 2 6 12 13 15 20 8 30 31] 转换为范围 [1 2 3 4 5 6 7 8 9 10]。有什么功能可以做到吗？有什么建议可以将这种任意范围转换为确定范围吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T09:03:44.663

### MATLAB 解决方案

在 MATLAB 中，[`unique`](http://www.mathworks.com/help/matlab/ref/unique.html)可以做到这一点。例如：

```
A = [1 1 1 1 4 4 5 3 3 6 6 6 6 8]
[C, ia, ic] = unique(A); 
```

现在`ic`保存您正在寻找的值：

```
ic = 
    1    1    1    1    3    3    4    2    2    5    5    5    5    6 
```

`ic`此外，如果您愿意，您可以重新映射到新订单。例如，这是一个类似于*您*建议的新订单：

```
new_order = [1 3 2 4 6 5];
ic_new = new_order(ic); 
```

产生：

```
ic_new = 
    1    1    1    1    2    2    4    3    3    6    6    6    6    5 
```

希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T23:52:04.243

在 Matlab 中：

```
v = [1 2 6 12 13 15 20 8 30 31];
v_index = 1:length(v); 
```

# python - 以下 for 循环如何工作？

> ID：13149173
> 
> 赞同：2
> 
> 时间：2012-10-30T23:40:31.917
> 
> 标签：python, for-loop, iteration

```
def escape_html(s):
    for (i, o) in (("&","&amp;"),(">", "&gt;"),("<", "&lt"),('"', "&quot;")):
        s = s.replace(i , o)
    return s 
```

我以前从未见过这样的事情。

for 循环的第一行是什么意思？

一般来说，循环做什么以及它是如何做到的？

注意：s 是一个字符串

请尝试解释完整的迭代过程。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T23:45:22.867

用英语讲：

对于以下值对列表中的每一对值，执行循环中的内容。在这种情况下，(i, o) 仅表示“将值从对中分配给名为 i & o 的变量”。

在第一次迭代中，`i`是 "&" 并且`o`是 "&"

每次通过循环时，它都会将出现的 of 替换`i`为替换，`o`因此源文本中的任何“&”都变为“&”，“>”变为“>”，等等。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-30T23:47:17.057

这是非常直接的python。

for 循环正在从可迭代对象中解压缩单个项目。因此，例如，您可以执行以下操作：

```
>>> c = [('a', 'b', 'c'), ('d', 'e', 'f')]
>>> for i, j, k in c:
...     print i, j, k
... 
a b c
d e f 
```

在您的情况下`(i, o)`，正在使用元组的元组中的值填充。的实例`i`然后被替换为 的值`o`。这个函数用代表每个的实体替换 html 特殊字符。

```
>>> s = 'foo & bar'
>>> s = s.replace('&', '&amp;')
>>> s
'foo &amp; bar' 
```

此功能等效地执行：

```
def escape_html(s):
    s = s.replace("&","&amp;")
    s = s.replace(">", "&gt;")
    s = s.replace("<", "&lt")
    s = s.replace('"', "&quot;")
    return s 
```

代替使用适当的调试器，尝试添加一些打印语句以查看发生了什么：

```
def escape_html(s):
    print "ORIGINAL STRING: %s" % (s)
    for (i, o) in (("&","&amp;"),(">", "&gt;"),("<", "&lt"),('"', "&quot;")):
        print "\t(i, o) = ('%s', '%s')" % (i, o)
        s = s.replace(i , o)
        print "\ts = %s" % (s, )
        print
    return s

mystring = """<h3>This is a test</h3><script>alert("I hacked you!");</script>"""
print escape_html(mystring) 
```

**输出**

```
ORIGINAL STRING: <h3>This is a test</h3><script>alert("I hacked you!");</script>
    (i, o) = ('&', '&amp;')
    s = <h3>This is a test</h3><script>alert("I hacked you!");</script>

    (i, o) = ('>', '&gt;')
    s = <h3&gt;This is a test</h3&gt;<script&gt;alert("I hacked you!");</script&gt;

    (i, o) = ('<', '&lt')
    s = &lth3&gt;This is a test&lt/h3&gt;&ltscript&gt;alert("I hacked you!");&lt/script&gt;

    (i, o) = ('"', '&quot;')
    s = &lth3&gt;This is a test&lt/h3&gt;&ltscript&gt;alert(&quot;I hacked you!&quot;);&lt/script&gt;

&lth3&gt;This is a test&lt/h3&gt;&ltscript&gt;alert(&quot;I hacked you!&quot;);&lt/script&gt; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-30T23:45:39.620

`for`每对项目`i`和`o` `in`对的序列`(("&","&amp;"),(">", "&gt;"),("<", "&lt"),('"', "&quot;"))`，它是字符串中的`replace`每个实例。`i``o``s`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-30T23:49:26.973

`(("&","&amp;"),(">", "&gt;"),("<", "&lt"),('"', "&quot;"))`是一个 4 元组，每个元素都是一个 2 元组（例如，`("&","&amp;")`）。元组是一个固定长度的序列。你可以在这里阅读更多关于它们的信息：http: [//anh.cs.luc.edu/python/hands-on/3.1/handsonHtml/loopsandtuples.html](http://anh.cs.luc.edu/python/hands-on/3.1/handsonHtml/loopsandtuples.html)

第一行只是对序列的 for 循环。左侧（在'in'之前）利用了python解包。它采用元组的两个值并将它们分配，一个分配到 ，另一个分配`i`到`o`。

通常，对于每个元组，for 循环将元组的第一个元素替换为第二个元素。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-30T23:45:15.083

```
for (i, o) in (("&","&amp;"),(">", "&gt;"),("<", "&lt"),('"', "&quot;")): 
```

i 和 o 是您的循环变量。`& > < "`是要替换的字符，并且`&amp; &gt; &lt; &quot;`是要替换它们的字符。

在循环的第一次迭代中`i = &`和`o = &amp;`在第二次迭代中`i = >`，`o = &gt;`依此类推。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-30T23:46:06.307

您正在迭代的东西是一个元组的元组（在这种情况下是对）。

所以对于循环的每次迭代，i 得到第一件事，o 得到第二件事。例如，在第一次迭代中，i 得到 & 并且 o 得到 &。

所以它只是不断地创建新的字符串，将 i 替换为 o。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-10-30T23:46:37.610

考虑该元组`tupl =(("&","&amp;"),(">", "&gt;"),("<", "&lt"),('"', "&quot;"))`以使其更简单。

所以项目`tupl`是`("&","&amp;")`, `(">", "&gt;")`, 等等

所以 for 循环变成：

```
 for (i,o) in tupl: 
```

它的作用是从 tupl 中逐一获取项目，并尝试执行以下操作：

`(i,o)=("&","&amp;")`，或者简单地说，它在第一次迭代`i,o=("&","&amp;")`中分配`'&'`to`i`和`&amp;`to ，在第二次迭代中分配to和to ，依此类推。`o``>``i``&gt;``o`

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-10-30T23:46:57.903

`(("&","&amp;"),(">", "&gt;"),("<", "&lt"),('"', "&quot;"))`是元组中的元组。

让我们将其简化为更简单的术语。

```
for (x, y) in ( ('a', 'b'), ('c', 'd') ):
    print x, y 
```

这将打印每个元组的内容...

```
a, b
c, d 
```

也许这可以解决问题。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-10-30T23:48:01.013

`(("&","&amp;"),(">", "&gt;"),("<", "&lt"),('"', "&quot;"))`是一个包含 4 个元素的元组。

索引 0 处的元素是元组`("&","&amp;")`

当您说 时`a, b = 0, 1`，python 对它的评估与 相同`(a, b) = (0, 1)`，其中变量被分配了相应的值。即`a`取值`0`并`b`取值`1`。

您的 for 循环有效地循环了包含 4 个元素的大元组。由于每个元素都是一个 2 元组，因此您可以将它们各自的值分配给两个变量`i`，并且`o`

# jquery - 遍历标签值并根据索引添加唯一词

> ID：13149176
> 
> 赞同：1
> 
> 时间：2012-10-30T23:40:40.993
> 
> 标签：jquery, label, each

我有一组带有标签的单选按钮，我想根据循环通过的索引添加不同的单词。IE: a apple, b bob, c cab, d dash

我的html：

```
 <div id="charity-mod">
  <div>
   <input id="A-1" type="radio" value="A">
   <label id="chars" for="A-1">a</label>

   <input id="B-1" type="radio" value="B">
   <label id="chars" for="B-1">b</label>

   <input id="C-1" type="radio" value="C">
   <label id="chars" for="C-1">c</label>

   <input id="D-1" type="radio" value="D">
   <label id="chars" for="D-1">d</label>
  </div>
 </div> 
```

查询：

```
$('#charity-mod label').each(function(index){
  switch (index) {
   case 0:
      $('#chars').eq(index).after("<b>apple</b>");
      break;
    case 1:
      $('#chars').eq(index).after("<b>bob</b>");
      break;
    case 2:
      $('#chars').eq(index).after("<b>cab</b>");
      break;
    case 3:
      $('#chars').eq(index).after("<b>dash</b>");
      break;
   }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T23:43:59.747

ID 属性应该是唯一标识符，因此，您需要从更改 `<label id="chars" for="A-1">a</label>`为`<label class="chars" for="A-1">a</label>`

这样做，您甚至可以使用更干净的 jQuery：

```
var words = ["apple", "bob","cab", "dash"];

    $('.chars').each(function(index){
      $('#chars').eq(index).after("<b>"+words[index]+"</b>");
    }
}); 
```

# ios - Phonegap 2.1 iOS 本地化

> ID：13149178
> 
> 赞同：0
> 
> 时间：2012-10-30T23:40:44.600
> 
> 标签：ios, cordova

我找到[了这个插件](https://github.com/phonegap/phonegap-plugins/tree/master/iPhone/Localizable)并试图让它适用于 PhoneGap 2.1。我像下面这样更新了它。我将插件引用放在 Cordova.plist 中并创建了可本地化的字符串。

因此，`NSLog(jsString);`代码将正确的本地化字符串打印到控制台

```
[6766:c07] <null>("Hello"); 
```

但我无法让它在 JS 文件中工作。它没有给出任何错误，但也不起作用。即使我删除了`result`.

```
 app.Localizer.get('HelloKey',

                      function(result) {
                                   alert("We got a setting: " + result);
                                   }); 
```

我的修改：

```
localizable.js
**************

function localizable() {
}

localizable.prototype.get = function(name, success) 
{

    Cordova.exec("localizable.get", name, success);

};

Cordova.addConstructor(function()
{
    if(!window.plugins)
    {
        window.plugins = {};
    }
    window.plugins.localizable = new localizable();
}); 
```

-

```
localizable.h
*************

#import <Cordova/CDVPlugin.h>
#import <Foundation/Foundation.h>

@interface localizable : CDVPlugin {}
-   (void) get:(NSMutableArray*)arguments withDict:(NSMutableDictionary*)options;
@end 
```

-

```
localizable.m
*************

#import "localizable.h"

@implementation localizable
- (void)get:(NSMutableArray*)arguments withDict:(NSMutableDictionary*)options
{
    NSUInteger argc = [arguments count];
    NSString* jsString;

    if(argc == 2)
    {
        NSString *key = [arguments objectAtIndex:0];
        NSString *successCallback = [arguments objectAtIndex:1];

        NSString *returnVar = NSLocalizedString(key, nil);

        jsString = [NSString stringWithFormat:@"%@(\"%@\");",successCallback,returnVar];

        NSLog(jsString);

        [self writeJavascript:jsString]; //Write back to JS
    }   

}
@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T03:20:11.193

您正在使用旧的 phonegap 语法。虽然我不是说这就是问题所在。但我做了以下事情，它对我有用。也许你可以在下面试试这个。它与您的代码基本相同，但语法不同。

**JavaScript**

```
window.getString = function(str) {
    cordova.exec(
                 function(ans){gotString(ans);},
                 function(err){},"Tools","getString",[str]
                );
}

function gotString(ans) {
    navigator.notification.alert(ans);
}

function onDeviceReady() {
    window.getString("invalid_msg");
} 
```

**工具.h**

```
#import<Foundation/Foundation.h>
#import<Cordova/CDV.h>

@interface Tools: CDVPlugin

-(void) getString:(CDVInvokedUrlCommand*) command; 
```

**工具.m**

```
#import "Tools.h"
@implementation Tools

-(void) getString:(CDVInvokedUrlCommand*) command {
    NSString *string = [command.arguments objectAtIndex:0];
    CDVPluginResult *pluginResult = [CDVPluginResult resultWithStatus:CDVCommandStatus_OK messageAsString:NSLocalizedString(string,nil)];
    [self.commandDelegate sendPluginResult:pluginResult callbackId:command.callbackId];   
}

@end 
```

**Localizable.strings** (zh)

```
"invalid_msg" = "It is not correct" 
```

**Localizable.strings** (de)

```
"invalid_msg" = "Das ist falsch" 
```

# ios - iOS - 如果找到匹配项，则更新托管对象

> ID：13149179
> 
> 赞同：4
> 
> 时间：2012-10-30T23:40:51.247
> 
> 标签：ios, core-data, nsmanagedobject

在获取要修改的对象后，我似乎无法弄清楚如何更新核心数据对象。

这就是我想要做的：

1）从核心数据匹配谓词条件中查找第一个对象：

```
NSInteger storeId = 235;  //find object with this id in core data

NSManagedObjectContext *context = [[NSManagedObjectContext alloc] init];
[context setPersistentStoreCoordinator:[self.managedObjectContext persistentStoreCoordinator]];

NSFetchRequest *request = [[NSFetchRequest alloc] init];
NSEntityDescription *entity = [NSEntityDescription entityForName:@"Store"
                                          inManagedObjectContext:context];
[request setEntity:entity];
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"id == %i",storeId];
[request setPredicate:predicate];

NSArray *results = [context executeFetchRequest:request error:NULL]; 
```

2）如果找到匹配，更新匹配对象（这是我需要帮助的地方）：

```
if (results != nil && [results count] > 0)
{
    /** Not sure how to get the correct context and modify object **/

    Store *matchingObject = [results objectAtIndex:0];
    [context setValue:[NSNumber numberWithInteger:storeId] forKey:"id"];
}

/** Save the context */
NSError *error = nil;
if (![context save:&error]) {     
        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
        //abort();
} 
```

感谢您提供任何帮助...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T23:53:40.800

尝试直接修改对象属性并保存：

```
matchingObject.id = [NSNumber numberWithInteger:storeId]; 
```

该对象最初是使用 获取的，`context`因此您应该能够通过调用 save on 来保存您的更改`context`。

# mysql - RS.GetValue(RS.GetOrdinal("balance")) 产生一个意外的值

> ID：13149185
> 
> 赞同：4
> 
> 时间：2012-10-30T23:42:09.317
> 
> 标签：mysql, vb.net, decimal

我正在使用 Visual Studio 2005 和 mysql 4.0，我有一个表，其中包含一个字段（十进制 16,4），用于存储发票金额和另一个表，其中包含该发票的付款（字段也是十进制 16,4 )

我读取了数据并获得了一些包含 4 列的记录（发票、金额、付款、余额）

```
invoice 454, Amount 8125.68 payments: 8125.68 balance : 0 
```

付款来自 sum(payments) 报表。

相关支付记录数据为：8122.16, 0.0900, 0.0050, 1.6900, 1.7350

总数为 8125.68

我读到这样的数据：

```
Dim Conn As New MySqlConnection(myConnString)
Dim RS As MySqlDataReader
dim Q as string="SELECT.........." ' MYSQL STATEMENT

Dim CM As New MySqlCommand(Q, Conn)

RS = CM.ExecuteReader

While RS.Read
   RS.GetValue(RS.GetOrdinal("invoice")) 
   RS.GetValue(RS.GetOrdinal("amount")) 
   RS.GetValue(RS.GetOrdinal("payments")) 
   RS.GetValue(RS.GetOrdinal("balance")) 
End While 
```

一切都很好，但它的价值：

```
RS.GetValue(RS.GetOrdinal("balance")) 
```

是`0.000000009456544`，而不是`0.00`！这里发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-26T22:58:51.840

我想`DECIMAL`用`DOUBLE`在 MySQL 4.0 的黑暗时代。因此，令人费解的结果和评论。

（回答是为了从未回答中删除。）

# c - 预处理器相等性测试，这是标准吗？

> ID：13149189
> 
> 赞同：19
> 
> 时间：2012-10-30T23:42:33.840
> 
> 标签：c, c-preprocessor

我曾在项目偏好中设想过其中之一

*   `TESTING`=`HOST`
*   `TESTING`=`TARGET`
*   `TESTING`完全没有定义

我的问题是后者。

似乎不是

```
#if TESTING==HOST
#error "HOST defined"  // add temporarilly for testing porpoises
#endif 
```

我需要编码

```
#ifdef TESTING   
#if TESTING==HOST
#error "HOST defined"  // add temporarilly for testing porpoises
#endif
#endif 
```

我确信这不是标准行为，因为 if`TESTING`没有定义那么它肯定不等于`HOST`，而且我不需要`#ifdef TESTING`GCC 编译器的额外内容。

但是，当我使用 Atmel AVR Studio（我*认为*它基于 MS Visual Studio）时，有必要`#ifdef TESTING`在几十个地方添加该首字母 :-(

看起来我别无选择，但我只是想知道是否有任何 C 标准真的需要这个。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-10-30T23:45:30.173

```
#if TESTING==HOST 
```

如果`TESTING`没有定义，那么

它相当于：

```
#if 0==HOST 
```

来自 C 标准：

> （C99，6.10.1p4）“在执行了由于宏扩展和定义的一元运算符而导致的所有替换之后，所有剩余的标识符（包括那些在词法上与关键字相同的标识符）都被替换为 pp-number 0””

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-31T00:11:33.207

请注意，您可以这样做：

```
#ifndef TESTING
    ...
#elif TESTING == HOST
    ...
#elif TESTING == TARGET
    ...
#else
    #error "Unexpected value of TESTING."
#endif 
```

还：

```
#if defined(TESTING) && TESTING == HOST
    ...
#endif 
```

如果你想折叠测试。括号是可选的（`#if defined TESTING`有效），但我认为包含它们更清楚，尤其是当您开始添加其他逻辑时。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-30T23:47:11.047

原始的 C 预处理器`#ifdef`在使用符号之前需要显式验证。假设未定义的符号具有默认值是一项相对较新的创新（可能由 Javascript 等脚本语言驱动）。

为什么不总是确保定义了符号？：

```
#ifndef TESTING
 #define TESTING  (default value)
#endif

#if TESTING==HOST
  ...
#elif TESTING==TARGET
 ...
#else
 ...
#endif 
```

另一种选择，也许强制选择？：

```
#ifndef TESTING
 #error You must define a value for TESTING
#endif 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-06-26T19:16:39.867

我有同样的问题。如果没有定义我想要的#if 参数，它曾经是编译器会出错。我学到了艰难的方式，这不再是这种情况。我想出的解决方案如下：

```
#define BUILDOPT 3

#if 3/BUILDOPT == 1
    <compile>
#endif 
```

如果 BUILDOPT 未定义，则除以 0 时会出现编译错误。如果 BUILDOPT != 3 && > 0 则 #if 失败。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-06-26T19:34:18.287

我的最终实现是将 BUILDOPT 设置为 1 以启用代码，> 1 以禁用。然后#if 变为#if 1/BUILDOPT==1。

# c# - 如何让内部类访问外部类属性

> ID：13149191
> 
> 赞同：0
> 
> 时间：2012-10-30T23:42:52.523
> 
> 标签：c#, inheritance, nested-class

所以，这可能是什么应该是什么的孩子的问题，但我很难找出执行以下操作的最佳方法。

假设我有一个厨房，我想发出一个命令来打开我的烤面包机，所以我会在按钮点击事件中调用这样的东西：

```
private void buttonToaster_On_Click(object sender, EventArgs e)
{
   myKitchen.Toaster.Activate();
} 
```

我设想做下面描述的事情。但是，在 C# 中，它说我必须将 RelayBoard“myStuff”设为静态。如果出于某种原因我想用它来控制多个厨房，我宁愿不让它成为静态的，但是我将如何制作它以便我可以实例化一个厨房，拥有一个可以与其中的所有东西对话的中继板，并在其下创建电器访问 RelayBoard“myStuff”以将命令写入的厨房？

```
class Kitchen
{
  RelayBoard myStuff = new RelayBoard();

  Appliance Toaster = new Appliance();
  Appliance Coffee_Maker = new Appliance();

  class Appliance
  {
     void Activate()
     {
        myStuff.WriteCommand(ApplianceAddress, 1);
     }

     void Deactivate()
     {
        myStuff.WriteCommand(ApplianceAddress, 0);
     }
  }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T23:45:57.240

只需将它的引用传递给厨房对象：

```
class Appliance
{
  private Kitchen _parent;
  public Appliance(Kitchen parent) { _parent = parent; }
  void Activate()
  {
    _parent.myStuff.WriteCommand(ApplianceAddress, 1);
  }

  void Deactivate()
  {
    _parent.myStuff.WriteCommand(ApplianceAddress, 0);
  }
} 
```

# haskell - 如何将文本文件读入haskell程序？

> ID：13149192
> 
> 赞同：0
> 
> 时间：2012-10-30T23:42:54.347
> 
> 标签：haskell

我有一个文本文件，每行包含两个列表。每个列表可以包含任意数量的字母数字参数。例如 [t1,t2,...] [m1,m2,...] 我可以将文件读入 ghc，但是如何将其读入另一个主文件以及主文件如何分别识别每个参数然后处理它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T01:30:55.397

我认为您最好自己弄清楚其中的大部分内容，但我为您提供了一些建议。首先，在其余代码正常工作之前，尽量不要处理文件访问，否则您最终可能会到处都有 IO。从一些示例数据开始：

```
sampleData = "[m1,m2,m3][x1,x2,x3,x4]\n[f3,f4,f5][y7,y8,y123]\n[m4,m5,m6][x5,x6,x7,x8]" 
```

您不应该`sampleData`在代码中提及其他任何地方，但您应该在 ghci 中使用它进行测试。

一旦你有一个可以做你想做的一切的功能，例如`processLists::String->[(String,String)]`，你可以`readFile "data.txt" :: IO String`用

```
readInLists :: FilePath -> IO [(String,String)]
readInLists filename = fmap processLists (readFile filename) 
```

如果`fmap`对您没有意义，您可以阅读[我不小心写的教程](https://stackoverflow.com/questions/13134825/how-do-functors-work-in-haskell/13137359#13137359)。

如果它们真的是字母数字，您可以很容易地拆分它们。以下是一些方便的功能，并附有示例。

```
tail :: [a] -> [a]
tail "(This)" = "This)" 
```

你可以用它来扔掉你不想要的东西在你的字符串的前面。

```
break :: (Char->Bool) -> String -> (String,String)
break (== ' ') "Hello Mum" = ("Hello"," Mum") 
```

所以`break`使用一个测试来找到第二个字符串的第一个字符，并打破它之前的字符串。请注意，中断字符仍然存在于下一个字符串的前面。`span`是相同的，但使用测试来测试第一个列表中的内容，所以

```
span :: (Char->Bool) -> String -> (String,String)
span (/= ' ') "Hello Mum" = ("Hello"," Mum") 
```

您可以将这些函数与`(==',')`, 或`isAlphaNum`（您必须`import Data.Char`在文件顶部才能使用它）一起使用。

你可能想看看我在[这个答案](https://stackoverflow.com/questions/12119420/haskell-ghci-using-eof-character-on-stdin-with-getcontents/12124266#12124266)`splitWith`中的功能。它们基于 Prelude 的定义和来自 Prelude 的定义。`splitOn``split``words`

# asp.net-mvc - 将 HTML 编码的表单数据发布到服务器

> ID：13149196
> 
> 赞同：0
> 
> 时间：2012-10-30T23:44:00.043
> 
> 标签：asp.net-mvc, asp.net-mvc-3, webforms-view-engine

我目前正在使用 MVC 3（WebForm 视图引擎）并有一个显示用户评论的表单。

如果我有一个带有 & 符号的评论，`<%= Html.Textbox() %>`将其编码为`&amp;`. 但是，如果表单随后被发布到服务器，ASP.NET 就会认为提交的内容是恶意的。

在将内容发送到服务器之前，我发现自己必须[使用 JavaScript 使用 HTML 解码方法。](https://stackoverflow.com/a/9609450/84395)

我能够得到我想要的结果，但我觉得我做的不对。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T23:55:19.310

您可以使用特殊属性来允许通过使用`AllowHtml`属性发布安全的 html 标签，您将定义您的模型/视图模型如下

```
public class Comment
{

       public int Id{get; set;}

       [AllowHtml] // Allow safe html tags
       public string Comment {get; set;}   
} 
```

# java - Java中的自定义异常类命名

> ID：13149197
> 
> 赞同：1
> 
> 时间：2012-10-30T23:44:12.320
> 
> 标签：java, exception, custom-exceptions

我正在尝试创建一个自定义异常类，但命名时遇到问题。这是我到目前为止所拥有的：

```
public class MyException extends Exception {
     public MyException() {
     }
} 
```

现在，我想要一个未调用的异常`MyException`。我可以用吗：

```
public void EmptyException() {
} 
```

感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T00:04:05.163

最好为每个文件创建一个异常：

在**MyException.java 中**：

```
public class MyException extends Exception {
    //useless to define here the default constructor
} 
```

在**EmptyException.java 中**

```
public class EmptyException extends Exception {
    //useless to define here the default constructor
} 
```

在这种情况下，使用内部类 =**代码气味**。

如果两个异常确实链接在一起，则更喜欢继承而不是内部类：

```
public class EmptyException extends MyException {
  //useless to define here the default constructor since parent's constructor is zero-arg one.
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T23:45:58.957

是的，当然，再次做同样的事情 :) 创建一个名为 EmptyException 的新类

在同一个班级：

```
 public class EmptyException extends Exception {
         public EmptyException() {
         }
        public class InnerException extends Exception { //Inner class
           public InnerException() {
               }

          }
    } 
```

# ios - 根视图控制器被创建了两次

> ID：13149199
> 
> 赞同：1
> 
> 时间：2012-10-30T23:44:18.313
> 
> 标签：ios, xib, ios4

我一直在与[消息被发送到 dealloc'd 实例时发生崩溃作斗争。](https://stackoverflow.com/questions/13146101/alertviewdiddismisswithbuttonindex-message-sent-to-deallocated-instance)

事实证明，我的根视图控制器在 iOS4.3 中被创建了两次。在`MainWindow_iPhone.xib`我创建我的根视图控制器并将其连接到我的 AppDelegate 上的 IBOutlet。我的根视图控制器的两个实例被创建，导致我的应用程序出现问题。

我从 中删除了根视图控制器`MainWindow_iPhone.xib`，而是在代码中创建了根视图控制器，`application:didFinishLaunchingWithOptions:`问题就消失了。现在只创建了我的根视图控制器的一个实例。

为什么当我在里面制作时会创建两个副本`MainWindow_iPhone.xib`？

# c# - 通过数组搜索时，并非所有代码路径都返回一个值

> ID：13149200
> 
> 赞同：1
> 
> 时间：2012-10-30T23:44:22.757
> 
> 标签：c#, arrays, return

我正在尝试创建一种方法，该方法在数组中搜索用户指定的名称并返回其在数组中的位置，如果未找到该名称，则返回 -1。我以为我有它，但是我收到一条错误消息，指出“并非所有代码路径都返回一个值”代码以方法的名称将其抛出，因此它不是很具体，尽管我并不期望该错误具有太多特异性。

无论如何，这是代码，谁能告诉我是什么引发了错误？

```
 static int FindStudent()//search for student name
    {
        while (z < NameArray.Length)
        {
            if (name == NameArray[z])
            {
                return z;
            }//end if statement
            else
            {
                z++;
            }//end else statement
        }//end while loop
        if (z==5)
        {
            return -1;
        }//end student not found
    }//end FindStudent method 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T23:52:17.480

删除您的最终 if 语句。正如您的代码现在一样，如果您的数组中恰好有 4 个项目并且它们都不匹配，它只会返回 -1。就此而言，您也可以删除您的 else ；因为它上面的 if 返回，所以 else 是隐含的。

```
static int FindStudent()//search for student name
{
    while (z < NameArray.Length)
    {
        if (name == NameArray[z])
        {
            return z;
        }
        z++;
    }
    return -1;// student not found
} 
```

# sql - SQL 从课程代码中查找课程名称

> ID：13149201
> 
> 赞同：1
> 
> 时间：2012-10-30T23:44:33.513
> 
> 标签：sql

我有 2 张桌子，`students`并且`courses`. 在学生表中，每个学生都有一个课程代码，在课程表中，我有带有他们姓名的课程代码。

运行查询时如何返回课程名称？

因此，例如，如果我运行基本`SELECT * FROM Students`程序，它会显示**“Jimmy | Computing”**而不是**“Jimmy | 12390814”**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T23:46:04.610

`JOIN`两张桌子。试试这样的，

```
SELECT   a.*, b.courseName
FROM     students a
         INNER JOIN courses b
               ON a.courseCode = b.courseCode
-- WHERE .... 
```

# ruby-on-rails - 如何在 Redis & Rails 中设置动态哈希键（哈希数据类型）？

> ID：13149202
> 
> 赞同：0
> 
> 时间：2012-10-30T23:44:49.907
> 
> 标签：ruby-on-rails, redis

尝试设置包含动态键名的哈希数据类型。例如，我有一个名为“event_id”的属性，其中包含一个整数。我希望它与哈希键名分开。

```
 self.attributes.each do |field, value|
          $redis.hset(event_id, field, value)
          end
         end 
```

使用上面的当前代码，redis 中的键看起来像

```
 32434 
```

目标是我可以在该键前面添加一些文本，以便理想情况下该键看起来像

```
 this:is:the:event_id:32434 
```

我无法在不破坏语法的情况下找出关键参数中的语法。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T00:11:18.390

我通过创建一个“redis 命名空间”来解决这个问题。然后，我将调用这个新的命名空间来获取我想要的正确键名，而不是执行 $redis，这是通用命名空间。命名空间是组织 redis 数据的好方法。

```
 $redis_event   = Redis::Namespace.new("offer:with:event_id:", :redis => r) 
```

# php - 检查一个数组值是否存在于php中

> ID：13149205
> 
> 赞同：2
> 
> 时间：2012-10-30T23:45:08.563
> 
> 标签：php, arrays, foreach

我有一个这样的php代码。

```
<?php 
      $books = get_group('books');
      if($books){
      $booksfilter = "";
      foreach($books as $book){
        $booksfilter .= "<ul class=\"books\">";
        $booksfilter .= "<li><a href='".$book['books_image'][1]."' >image</a></li>";
        $booksfilter .= "<li>".$book['books_image_title'][1]."</li>";
        $booksfilter .= "<li>".$book['books_image_description'][1]."</li>";
        $booksfilter .= "</ul>";
         }
        echo $booksfilter; 
       } ?> 
```

代码工作正常。我的问题是我在为 li 元素提供 css 填充时遇到了一些问题。当数组没有值时，它会创建空白空间。那么谁能告诉我如何检查该值是否存在。

我的意思是我想要这样的东西

```
if value exists ($book['books_image_description'][1])
{
    $booksfilter .= "<li>".$book['books_image_description'][1]."</li>";
} 
```

谁能帮我？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T23:48:43.367

```
if ($book['books_image_description'][1]) {
   ...
} 
```

如果这是一个字符串，并且在大多数其他情况下，转换为布尔值就可以了。

`boolean`一个空字符串的强制转换等于`false` 如果键不存在，它将是一个空指针，它也被强制转换为布尔值`false`。

所以你以 1 的价格获得 2 ...不会插入`li`if 键不存在和 if 存在并且它的值是一个空字符串 - 我认为这是你的想法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T23:51:09.257

使用 array_key_exists 函数

```
if(array_key_exists(1, $book['books_image_description']))
{
    ...
} 
```

# oauth - Yelp API Google App 脚本 OAuth

> ID：13149211
> 
> 赞同：4
> 
> 时间：2012-10-30T23:45:26.127
> 
> 标签：oauth, google-apps-script, yelp

我正在尝试使用 Google Apps 脚本来查询 Yelp Search Api 并将结果放入电子表格中。使用此示例作为模型调用 yelp 时遇到问题：

```
var consumerKey = "... register your app with Twitter ...";
var consumerSecret = "... register your app with Twitter ...");

var oauthConfig = UrlFetchApp.addOAuthService("twitter");
oauthConfig.setAccessTokenUrl("http://api.twitter.com/oauth/access_token");
oauthConfig.setRequestTokenUrl("http://api.twitter.com/oauth/request_token");
oauthConfig.setAuthorizationUrl("http://api.twitter.com/oauth/authorize");
oauthConfig.setConsumerKey(consumerKey);
oauthConfig.setConsumerSecret(consumerSecret);

// "twitter" value must match the argument to "addOAuthService" above.
var options = {
  "oAuthServiceName" : "twitter",
  "oAuthUseToken" : "always"
};

var url = "http://api.twitter.com/1/statuses/user_timeline.json";
var response = UrlFetchApp.fetch(url, options);
var tweets = JSON.parse(response.getContentText());

// Handle tweets 
```

[https://developers.google.com/apps-script/class_oauthconfig](https://developers.google.com/apps-script/class_oauthconfig)

此类仅具有设置 Yelp 似乎未提供的访问令牌 URL 的方法。他们只是直接提供 Token 和 Token Secret。我假设这些会像消费者密钥和秘密一样设置，但我还没有找到办法。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-31T17:24:13.633

Yelp API 使用 oAuth1.0a 来授权和识别 API 调用者，而不是可能正在使用应用程序的最终用户。这不像 Twitter 场景，您必须让您的用户登录。因此，您不需要任何访问令牌 URL 或其他详细信息。您可以创建所有必要的令牌以开始使用。这是设置完所有内容后 API 控制台的外观（出于明显的原因，我对密钥进行了混淆）-

![Yelp API 控制台](../Images/6271db9029245ea6597969f8d836f0e5.png)

现在，您需要使用 UrlFetchApp 从服务器端进行 API 调用，而不是使用 jQuery AJAX API，因为 Yelp API 似乎不允许 CORS，并且 HtmlService 不允许使用 JSONP。否则，您将在控制台中收到如下错误 -

![Chrome 控制台](../Images/ec38f58c29a2a2ce896597bb0e6e5027.png)

最后，这里有一些示例代码可以帮助您入门。我基于他们的 JavaScript[示例](https://github.com/Yelp/yelp-api/blob/master/v2/js/search.html)来制作这些-

```
 var auth = { 
    consumerKey: "YOURKEY", 
    consumerSecret: "YOURSECRET",
    accessToken: "YOURTOKEN",
    accessTokenSecret: "YOURTOKENSECRET",
  };

  var terms = 'food';
  var near = 'San+Francisco';

  var accessor = {
    consumerSecret: auth.consumerSecret,
    tokenSecret: auth.accessTokenSecret
  };

  var parameters = [];
  parameters.push(['term', terms]);
  parameters.push(['location', near]);
  parameters.push(['oauth_consumer_key', auth.consumerKey]);
  parameters.push(['oauth_consumer_secret', auth.consumerSecret]);
  parameters.push(['oauth_token', auth.accessToken]);

  var message = { 
    'action': 'http://api.yelp.com/v2/search',
    'method': 'GET',
    'parameters': parameters 
  };

  OAuth.setTimestampAndNonce(message);  

  OAuth.SignatureMethod.sign(message, accessor);

  var parameterMap = OAuth.getParameterMap(message.parameters);
  parameterMap.oauth_signature = OAuth.percentEncode(parameterMap.oauth_signature)

  var url = OAuth.addToURL(message.action,parameterMap);
  var response = UrlFetchApp.fetch(url).getContentText();
  var responseObject = Utilities.jsonParse(response);
  //have my JSON object, do whatever we want here, like add to spreadsheets 
```

我还添加了几个 GS 脚本文件，其中包含来自提供的链接的[oAuth JS](http://oauth.googlecode.com/svn/code/javascript/oauth.js)代码和[SHA1 JS](http://oauth.googlecode.com/svn/code/javascript/sha1.js)代码的内容（只需将粘贴复制到脚本编辑器中的新文件中）。但是，如果您喜欢冒险，您也可以使用[实用程序 API](https://developers.google.com/apps-script/service_utilities)手动签署和编码必要的 oAuth 参数。

希望这可以帮助。我能够使用所有提供的样本获得 Yelp 响应。

# javascript - 使用 javascript 或 jQuery 的实体阻塞 DIV

> ID：13149224
> 
> 赞同：2
> 
> 时间：2012-10-30T23:46:17.700
> 
> 标签：javascript, jquery, html, css

我试图在水平和垂直方向上并排用 DIV 制作实心块，而我已经设法做到了，而 div 具有相同的高度。但是当一个 div 有更大的高度和宽度时，它会在另一个 div 之下，而那些 div 应该在它旁边和之下。这是问题的示例（[http://givemeaudience.com/test.html）&](http://givemeaudience.com/test.html)以下是我的代码：

```
<!doctype html>
<html>
<head>
<meta charset="UTF-8">
<title>Test</title>
<meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0;">
<style>
    body{margin:0px;padding:0px;font-family:Verdana, Geneva, sans-serif;font-size:12px;}
    #container{position:relative;}
    #container .box{width:143px;height:143px;background:#eee;padding:5px;position:absolute;}
    #container .s21{width:303px;}
    #container .s32{width:463px;height:303px;background:#F60;}
</style>
<script type="text/javascript" src="js/jquery-1.8.0.min.js"></script>

<script type="text/javascript">
    function relocate(){
        var browserWidth = $(window).width();
        var defaultWidth = 160;
        var yPos = 7;
        var xPos = 7;
        $('.box').each(function(i, obj) {
            elementWidth = $(this).width();

            if(xPos + elementWidth > browserWidth){
                yPos = yPos + 160;
                xPos = 7;
            }
            $(this).css('top',yPos+'px');
            $(this).css('left',xPos+'px');

            xPos = xPos + 17 + $(this).width();
        });
    }

    $(document).ready(function(){
        relocate();
        $(window).resize(function() {
            relocate();
        });
    });
</script>

</head>

<body>

<div id="container">
<div class="box" id="">
    Test
</div>
<div class="box" id="">
    Test
</div>
<div class="box" id="">
    Test
</div>
<div class="box" id="">
    Test
</div>
<div class="box s32" id="">
    Test
</div>
<div class="box" id="">
    Test
</div>
<div class="box" id="">
    Test
</div>
<div class="box" id="">
    Test
</div>
<div class="box" id="">
    Test
</div>
<div class="box" id="">
    Test
</div>
<div class="box" id="">
    Test
</div>
<div class="box" id="">
    Test
</div>

</div>

</body>
</html> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T11:10:14.237

如果您想在#container 中压缩您的 .box`es，更好的解决方案 - 将它们显示为“内联块”并根据需要浮动（向左或向右）。但是你应该知道，块的顺序之前应该是专门的。这里是简单的 CSS 框对齐：

```
#container {
    white-space: nowrap;
}
.box {
    white-space: auto;        
    display: inline-block;
    vertical-align: top;
    float:left;
} 
```

[http://jsfiddle.net/iegik/DBkXU/](http://jsfiddle.net/iegik/DBkXU/)

无论如何，如果您想立即重新订购它们，盒子的尺寸通常应该是 - 预定义的宽度和高度（例如，XS、S、M、L、XL、XXL - 尺寸）。然后将它们放在矩阵中：

```
[ 2x1,  0,  1x2, 1x3 ],
[ 1x1, 1x2,  0,   0  ],
[ 1x1,  0,  1x1,  0  ] 
```

# ipad - 如何实现当用户在其外部点击时自行关闭的搜索栏

> ID：13149225
> 
> 赞同：1
> 
> 时间：2012-10-30T23:46:20.523
> 
> 标签：ipad, uigesturerecognizer, uisearchbar

我正在构建一个 iPad 应用程序。我正在尝试将 UISearchBar 实现为一个视图，如果用户在它之外点击它就会自行关闭。

当点击 Search 按钮时，我会创建一个搜索栏并将其动画到我的表格视图上方的位置。我还创建了一个 UITapGestureRecognizer 子类（我稍后会解释）并将其添加到应用程序的窗口中：

```
- (void) searchTap:(id)sender
{
    if (!self.controller.filterBar)
    {
        _filterBarStartFrame = CGRectMake(0.0, 44.0, 320.0, 0.0);
        CGRect filterBarEndFrame = CGRectMake(0.0, 0.0, 320.0, 44.0);
        _tableViewStartFrame = self.controller.tableView.frame;
        CGRect tableViewEndFrame = CGRectMake(self.controller.tableView.frame.origin.x, self.controller.tableView.frame.origin.y + 44.0, self.controller.tableView.frame.size.width, self.controller.tableView.frame.size.height - 44.0);

        self.controller.filterBar = [[UISearchBar alloc] initWithFrame:_filterBarStartFrame];
        self.controller.filterBar.delegate = self;
        [self.controller.tableView.superview addSubview:self.controller.filterBar];

        [UIView animateWithDuration:0.5 animations:^{self.controller.tableView.frame = tableViewEndFrame;}];
        [UIView animateWithDuration:0.5 animations:^{self.controller.filterBar.frame = filterBarEndFrame;}];

        tgr = [[FFTapGestureRecognizer alloc] initWithTarget:self action:@selector(filterBarTap:)];
        [[[UIApplication sharedApplication] keyWindow] addGestureRecognizer:tgr];
        [self.controller.filterBar becomeFirstResponder];
    }
} 
```

显示搜索栏后，我会捕获并点击测试所有单击。如果点击在搜索栏之外，我会关闭搜索栏：

```
- (void) filterBarTap:(FFTapGestureRecognizer*) sender
{
    if (sender.state == UIGestureRecognizerStateEnded)
    {
        if (![self.controller.filterBar hitTest:[sender locationInView:self.controller.filterBar] withEvent:nil])
        {
            //if tap is outside filter bar, close the filter bar
            [self searchBarCancelButtonClicked:self.controller.filterBar];
        }
        else
        {
            //pass the tap up the responder chain
            //THIS DOESN'T WORK!
            [self.controller.filterBar touchesEnded:sender.touches withEvent:sender.event];
        }
    }
} 
```

但是，如果点击在搜索栏中，我希望搜索栏正常处理点击。我能看到的唯一方法是将 touchesEnded 发送到搜索栏，传递触摸和事件。我没有，所以我将 UITapGestureRecognizer 子类化以在它收到 touchesEnded 时捕获两者：

```
- (void) touchesEnded:(NSSet*)touches withEvent:(UIEvent *)event
{
    self.touches = touches;
    self.event = event;

    [super touchesEnded:touches withEvent:event];
} 
```

我重新实现了剩下的 3 个 touches... 方法，我也重新实现了 reset 来调用它的超类。

唉，除了将发生在其框架内的点击传递给搜索栏外，所有这些诡计都有效。点击取消按钮没有任何作用。点击清除按钮没有任何作用。

谁能告诉我我该怎么做？

谢谢

# javascript - 在其他下拉菜单中选择后禁用下拉选项

> ID：13149228
> 
> 赞同：2
> 
> 时间：2012-10-30T23:46:58.623
> 
> 标签：javascript, html, ajax, forms, loops

我有 12 个下拉输入区域，一年中的每个月份都有 1 个。每个下拉菜单都可以选择相同的 24 个选项。

我需要这样做，例如，如果在一月份的下拉框中选择了选项#4，则不能在任何其他下拉菜单中选择该选项#4。它仍然在下拉列表中，但只是被禁用。

这将有一个 ajax 触发器来检查其他下拉菜单的值并动态更改其他下拉菜单。

我可以做一个循环来动态检查和禁用这些值，而不必做很多 if 语句吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T00:07:23.913

您可以使用 jQuery`option`在所有其他下拉列表中查找元素（在我的示例中，由某个指定`class`...并且可以轻松更改为另一个选择器 - 我认为选择器`"select"`太宽泛了），然后`option`使用禁用实际元素`.prop("disabled", true)`. 但这比这更棘手，因为您需要跟踪先前选择的值，以便在选择不同的值时再次启用下拉菜单。这是一个希望对您有所帮助的示例：

[http://jsfiddle.net/p5Arj/](http://jsfiddle.net/p5Arj/)

```
$(document).ready(function () {
    $(".test").each(function () {
        var $self = $(this);
        $self.data("previous_value", $self.val());
    });

    $(".test").on("change", function () {
        var $self = $(this);
        var prev_value = $self.data("previous_value");
        var cur_value = $self.val();

        $(".test").not($self).find("option").filter(function () {
            return $(this).val() == prev_value;
        }).prop("disabled", false);

        if (cur_value != "") {
            $(".test").not($self).find("option").filter(function () {
                return $(this).val() == cur_value;
            }).prop("disabled", true);

            $self.data("previous_value", cur_value);
        }
    });
}); 
```

因此，当您选择一个时，这会禁用所有其他下拉菜单的相同选项，并确保当您选择另一个时，在所有其他下拉菜单中启用前一个。例如，在第一个下拉列表中选择“3”...查看第二个下拉列表 - 看到“3”已禁用...返回第一个下拉列表并选择“1”...查看第二个下拉列表 -看到“3”再次启用，但“1”被禁用。这就是`.data`我的代码中的用途。

当然，如果您 100% 确定所讨论的每个问题都相同，则可以替换使用`value`with 。`selectedIndex``options``select`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T00:26:29.157

[http://jsfiddle.net/Rk5e9/9/](http://jsfiddle.net/Rk5e9/9/)

只有大约 10 行，而且没有 ajax！

```
<select class="unique-value">
    <option value="-1" selected="selected">Default</option>
    <option value="1">First</option>
    <option value="2">Second</option>
    <option value="3">Third</option>
</select>

<select class="unique-value">
    <option value="-1" selected="selected">Default</option>
    <option value="1">First</option>
    <option value="2">Second</option>
    <option value="3">Third</option>
</select>

<select class="unique-value">
    <option value="-1" selected="selected">Default</option>
    <option value="1">First</option>
    <option value="2">Second</option>
    <option value="3">Third</option>
</select>

Script:
$(document).ready(function(){
    $('.unique-value').focus(function(){
        var val = $(this).val();
        $(this).attr('data-current-value', val); 
    });

    $('.unique-value').change(function(){
        var val = $(this).val();
        if(val != -1)
            $('.unique-value option[value=' + val + ']').attr('disabled', 'disabled'); 

        var oldval = $(this).attr('data-current-value');
        $('.unique-value option[value=' + oldval + ']').removeAttr('disabled'); 
    });        
});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-15T11:07:06.263

我认为这将是最短的解决方案：

```
<select class="select-value">
    <option value="1">First</option>
    <option value="2">Second</option>
    <option value="3">Third</option>
</select>

<select class="select-value">
    <option value="1">First</option>
    <option value="2">Second</option>
    <option value="3">Third</option>
</select>

<select class="select-value">
    <option value="1">First</option>
    <option value="2">Second</option>
    <option value="3">Third</option>
</select> 
```

和jQuery代码：

```
 $(document).on('change', '.select-attendee', function(){
        $current=$(this);
        $(".select-attendee").not($current).children("option[value='"+$current.val()+"']").attr('disabled', "disabled");
    }); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-30T23:51:04.523

假设您每个月都有一个下拉菜单，并且每周都有一个选项。

```
<select class="month" id="october">
  <option class="week" value="week1">Week One</option>
  <option class="week" value="week2">Week Two</option>
</select> 
```

假设您选择一周，然后收听该事件。

```
$(".month").change(function(event) {
   // Get the week just selected.
   var selectedWeek = $(this).children(".week:selected").val();
   // Enabled all weeks before disabling the selected week.
   $("option.week").removeAttr("disabled");
   // Disable all week options matching this selection.
   $("option.week[value="+selectedWeek+"]").attr("disabled", "disabled");
}); 
```

# java - PMD Eclipse 在文件保存时运行

> ID：13149230
> 
> 赞同：0
> 
> 时间：2012-10-30T23:47:09.457
> 
> 标签：java, eclipse, pmd

我正在使用 eclipse Juno 及其 PMD 插件。如何设置我的 Eclipse 以在文件保存操作上运行 PMD？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T01:31:50.427

您可以在项目属性中启用 PMD：

![项目属性 (Eclipse)](../Images/e4cdb4776442bd7526f74c51b587b129.png)

之后，PMD 警告和错误将在保存时在 Java 文件中更新。

# sql - 如何使用内置函数从字符串中的随机位置提取子字符串？

> ID：13149232
> 
> 赞同：1
> 
> 时间：2012-10-30T23:47:14.577
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我有一系列以下列方式存储的数据：

```
Word of various kinds (ANT\username1) and even more words
This is another row, the words are random (ANT\username2)
Thankfully the username only ever shows once (ANT\username1) 
```

上面代表三个单独的行。

这些数据的一般流程是：

*   括号可以出现在文本的任何位置
*   每个字符串的用户名部分 (ANT\usernamex) 只会出现一次
*   用户名部分之前和之后的文本总是不同的长度。
*   用户名文本可能并不总是存在

正如您可能已经猜到的那样，我需要做的是从每一行中获取用户名，并且在不存在的地方返回 null。不幸的是，我不知道如何解决这个问题——我玩过 left() 和 right() 函数，但真的不知道如何解决这个问题。如果任何使用多个函数来完成任务的答案能够快速解释逻辑流程（这样我就可以阅读函数的文档来学习），我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T01:01:51.740

注意数据不符合预期时的具体结果。这适用于格式`'(ANT\....)'`。

```
-- sample table
create table t(s varchar(max));
insert t select 
'Word of various kinds (ANT\) blank' union all select
'Word of various kinds (ANT) blank' union all select
'Word of various kinds (ANT\ no closing' union all select
'Word of various kinds (ANT\(ANT\me) double up' union all select
'' union all select
'(ANT\' union all select
null union all select
'Word of various kinds (ANT\username1) and even more words' union all select
'This is another row, the words are random (ANT\username2)' union all select
'Thankfully the username only ever shows once (ANT\username1)';

-- Query
select Original = s,
       Extracted = nullif(STUFF(LEFT(s, CharIndex(')',s+')',
                   PatIndex('%(ANT\%', s)) -1), 1,
                   PatIndex('%(ANT\%', s + '(ANT\')+4,''),'')
from t; 
```

# javascript - 我的美国号码格式代码中的有趣行为

> ID：13149235
> 
> 赞同：2
> 
> 时间：2012-10-30T23:47:23.720
> 
> 标签：javascript, jquery, regex

我试图让 10 位数字看起来像美国电话号码（即（###）###-####）。我的代码确实实现了第一个目标，但它也做了一些我不太明白的事情。输入数字时，字符“()”会在输入任何其他数字之前显示。我希望左括号首先出现，右括号在输入第三个数字后出现。请不要给我新的解决方案；尝试指出我所描述的问题。

```
<script type="text/javascript">
  $('.drumbi-caller-number').live('keydown', function (event) {
    if (event.keyCode == 8 || event.keyCode == 37 || event.keyCode == 39) {
    } else {
        inputval = $(this).val();
        var string = inputval.replace(/[^0-9]/g, "");
        var first3 = string.substring(0,3);
        var next3 = string.substring(3,6);
        var next4 = string.substring(6,9);  
        var string = ("(" + first3 + ")" + next3 + "-" + next4);
        $(this).val(string);
    }
});
</script> 
```

这是一个显示此行为的 jsFiddle：http: [//jsfiddle.net/bigthyme/j6kHn/3/](http://jsfiddle.net/bigthyme/j6kHn/3/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T23:51:57.913

替换`keydown`为`keyup`,`keydown`输入元素的值未更新

也有条件地设置你的`string`，只有在足够长的情况下：

```
var string = string.length > 2 ? ("(" + first3 + ")" + next3 + "-" + next4) : first3; 
```

这是代码：http: [//jsfiddle.net/j6kHn/10](http://jsfiddle.net/j6kHn/10)

顺便说一句：你也应该`.live(...)`用`.on(...)`as `.live()`is deprecated 替换..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T23:51:21.770

您需要`first3`在附加括号之前检查长度：

```
var string = ("(" + first3 + ((first3.length>=3)?")":"") + next3 + "-" + next4); 
```

尽管不在您的问题中，但您可以对连字符执行相同的操作：

```
var string = ("(" + first3 + 
     // only append the ) if the you have 3+ chars
     ((first3.length>=3)?")":"") + 
     next3 + 
     // only append the - if the you have 6+ chars
     (((first3+next3).length>=6)?"-":"") + 
     next4); 
```

您还应该使用`.on()`代替`live()`;

看看这一切都在[这个 jsFiddle中工作](http://jsfiddle.net/j6kHn/8/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T23:59:32.273

一起去

```
$('.foo').on('keyup', function (event) {
  $(this).val($(this).val().replace(/\D/g, "").replace(/(\d{0,3})(\d{0,3})(\d{0,4}).*/, "($1) $2-$3"));
}); 
```

**[在此处](http://jsfiddle.net/wMtfA/)**测试此代码。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-31T00:04:17.880

尝试使用此代码，它应该可以解决您的所有问题：

演示：http: [//jsfiddle.net/bN6Rh/3/](http://jsfiddle.net/bN6Rh/3/)

jQuery：

```
$('.foo').on('keyup', function(event) {
    if (event.keyCode == (8 || 37 || 39)) { }
    else {
        inputval = $(this).val();
        var string = inputval.replace(/[^0-9]/g, "");
        var first3 = string.substring(0, 3);
        var next3 = " " + string.substring(3, 6);
        var next4 = string.substring(6, 10);
        if (string.length < 3) { // Less than 3
            var string = "(" + first3;
        }
        else if (string.length > 2 && string.length < 7) { // More than 2 and less than 7
            var string = "(" + first3 + ")" + next3;
        }
        else { // Anything else
            var string = "(" + first3 + ")" + next3 + "-" + next4;
        }
        $(this).val(string);
    }
});​ 
```

问题是您没有检查字符数，因此只要输入任何内容`()-`，上面的代码还会添加您提到的所需空间。

代码当然可以更压缩：

```
$('.foo').on('keyup', function(e) {
    if (e.keyCode == (8 || 37 || 39));
    else {
        var str = this.value.replace(/[^0-9]/g, "");

        var f3 = str.substring(0, 3),
            n3 = " " + str.substring(3, 6),
            n4 = str.substring(6, 10);

        if (str.length<3) str = "(" + f3;
        else if (str.length>2&&str.length<7) str="("+f3+")"+n3;
        else str="("+f3+")"+n3+"-"+n4;

        this.value = str;
    }
});​ 
```

# ruby-on-rails - Ruby aws-sdk - 超时错误

> ID：13149240
> 
> 赞同：3
> 
> 时间：2012-10-30T23:48:26.460
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, amazon-s3

我正在尝试使用以下简单代码将文件上传到 S3：

```
bucket.objects.create("sitemaps/event/#{file_name}", open(file)) 
```

我得到以下信息：

**在超时期限内未读取或写入您与服务器的套接字连接。空闲连接将被关闭。**

可能出了什么问题？任何提示将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-31T18:40:59.437

当无法根据打开的文件正确确定内容长度时，通常会发生此超时。S3 正在等待未到来的额外字节。修复非常简单，只需以二进制模式打开文件。

红宝石 1.9

```
bucket.objects.create("sitemaps/event/#{file_name}", open(file, 'rb', :encoding => 'BINARY')) 
```

红宝石 1.8

```
bucket.objects.create("sitemaps/event/#{file_name}", open(file, 'rb')) 
```

如果您传入文件的路径，aws-sdk gem 将为您处理此问题：

```
# use a Pathname object
bucket.objects.create(key, Pathname.new(path_to_file))

# or just the path as a string
bucket.objects.create(key, :file => path_to_file) 
```

此外，您可以在 s3 中的对象存在之前对其进行写入，因此您也可以这样做：

```
# my favorite syntax
obj = s3.buckets['bucket-name'].objects['object-key'].write(:file => path_to_file) 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T23:58:04.200

尝试修改超时参数，看看问题是否仍然存在。

从 AWS 网站：[http](http://aws.amazon.com/releasenotes/5234916478554933) ://aws.amazon.com/releasenotes/5234916478554933 （新配置选项）

```
# the new configuration options are:
AWS.config.http_open_timeout #=> new session timeout (15 seconds)
AWS.config.http_read_timeout #=> read response timeout (60 seconds)
AWS.config.http_idle_timeout #=> persistant connections idle longer are closed (60     seconds)
AWS.config.http_wire_trace #=> When true, HTTP wire traces are logged (false)

# you can update the timeouts (with seconds)
AWS.config(:http_open_timeout => 5, :http_read_timeout => 120)

# log to the rails logger
AWS.config(:http_wire_trace => true, :logger => Rails.logger)

# send wire traces to standard out
AWS.config(:http_wire_trace => true, :logger => nil) 
```

# objective-c - 分配简单布尔时的 EXC_BAD_ACCESS

> ID：13149244
> 
> 赞同：0
> 
> 时间：2012-10-30T23:49:20.350
> 
> 标签：objective-c, ios

我是 iOS 新手。我试图在导致该视图控制器的 prepareforsegue 方法中的视图控制器中设置一个布尔值。当我尝试设置布尔值时，我收到 EXC_BAD_ACCESS 错误。我能做些什么来解决这个问题？

```
 addBookViewController  *addViewController = [segue destinationViewController];
   Book *temp = [self.dataController objectInListAtIndex:[self.tableView indexPathForSelectedRow].row];
   addViewController.book = temp;
   *addViewController.editMode=YES; //EXC_BAD_ACCESS (Code =0, address=0x0) 
```

这是目标视图控制器的头文件：

```
 @interface addBookViewController : UITableViewController <UITextFieldDelegate>
    @property (strong, nonatomic) Book *book;
    @property (assign) BOOL *editMode;
    @end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T23:51:48.727

`BOOL`不是对象类型，而是原始类型（标量）。你不需要指向它的指针。改变

```
@property (assign) BOOL *editMode; 
```

进入

```
@property (assign) BOOL editMode; 
```

也改变

```
*addViewController.editMode=YES; 
```

至

```
addViewController.editMode=YES; 
```

请阅读有关 C 指针的教程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T23:51:06.320

BOOL 不是一个类，它是一个简单的类型，如 int 或 float。去掉星号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T23:51:59.197

代替

```
*addViewController.editMode=YES; 
```

它应该是

```
addViewController.editMode=YES; 
```

也没有

```
@property (assign) BOOL *editMode; 
```

但

```
@property (readwrite,assign) BOOL editMode; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T23:52:16.430

BOOL 不是对象，因此您不能为指针定义是/否。

# c# - 返回我的 Session["cart"] 中所有项目的部分视图的操作

> ID：13149246
> 
> 赞同：0
> 
> 时间：2012-10-30T23:49:45.210
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-partialview

使用 Ajax，我可以在 AddToCart 操作中将 ProductID 添加到我的购物车列表中。

这是代码：

```
public ActionResult AddToCart(int productID)
{
    List<int> cart = (List<int>)Session["cart"];
    if (cart == null){
       cart = new List<int>();
    }
    cart.Add(productID);

    Session["cart"] = cart;

    return new JsonResult() { Data = new { Status = "Success" } };
} 
```

在我的存储库中，我有以下 LINQ 方法来按 ID 获取产品的详细信息：

```
public Products GetProductByID(int id)
{
    return db.Products.SingleOrDefault(s => s.Id == id);
} 
```

产品具有名称、描述和价格作为属性。

我有一个用于模型绑定的 ViewModel：

```
public class ProductsViewModel
{
    public string Description { get; set; }
    public string Name { get; set; }
    public double price { get; set; }
    public string Image { get; set; }
    public int ProductId { get; set; }
} 
```

我有另一个持有这个 ProductsViewModel 的 Viewmodel，它是我用 foreach 循环的 ProductList：

```
public class HomeIndexViewModel
    {
        public List<ProductsViewModel> Productlist { get; set; }
    } 
```

现在我需要创建一个动作，即 ShoppingCart，它应该返回 Session["cart"] 中所有项目的部分视图。所以我可以在我的视图中显示它们以及产品详细信息

该操作不需要任何参数。它只会查看会话并返回带有所选产品列表的模型。

我 100% 确定的是，在 ShoppingCart 视图中，我将 100% 使用以下代码行：

```
@model AvanShop.ViewModels.HomeIndexViewModel 
```

然后做一个看起来像这样的foreach循环：

```
 @foreach (var item in Model.Productlist)
            {
             code to display the products that are inside the cart  
            } 
```

这是一个关于我如何在我的索引视图中显示所有产品的操作索引的示例。

```
public ActionResult Index()
        {
            var Productlist = repository.GetAllProducts();
            var model = new HomeIndexViewModel()
            {
                Productlist = new List<ProductsViewModel>()
            };

            foreach (var Product in Productlist)
            {
                FillProductToModel(model, Product);
            }
            return View(model);
        }

private void FillProductToModel(HomeIndexViewModel model, ProductImages productimage)
{
    var productViewModel = new ProductsViewModel
    {

        Description = productimage.Products.Description,
        ProductId = productimage.Products.Id,
        price = productimage.Products.Price,
        Name = productimage.Products.Name,
        Image = productimage.ImageUrl,
    };
    model.Productlist.Add(productViewModel);
} 
```

我不知道如何做到这一点，任何提示或帮助表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T00:04:42.053

**注意：**我建议调用该操作`ShoppingCart`，而不是`GetShoppingCart`; 这更好地适应了 MVC 的约定，但这是一个小问题，不是必需的。

```
public ActionResult GetShoppingCart()
{
    var cart = Session["cart"] as List<int>;

    var products = cart != null ? cart.Select(id => 
             {
                 var product = GetProductById(id);
                 return new ProductsViewModel
                    {
                       Name = product.Name,
                       Description = product.Description,
                       price = product.Price
                    }
             }) : new List<ProductsViewModel>();

    return PartialView(products);
} 
```

而你的观点（我假设你正在使用 Razor 视图）`Views/{your controller name}/GetShoppingCart.cshtml`，：

```
@model IEnumerable<ProductsViewModel>

@if(Model.Any())
{
   The following items are in your cart:
   <ul>
   @foreach(var product in Model)
   {
      <li>@product.Name - @product.Price.ToString("{0:C}")</li>
   }
   </ul>
}
else
{
   You have no items in your shopping cart.
} 
```

# jquery - jQuery选择器选择所有类型的文本框

> ID：13149248
> 
> 赞同：3
> 
> 时间：2012-10-30T23:49:55.323
> 
> 标签：jquery

有没有一种简单的方法来选择所有类型的文本框？

IE。`<input type=`文本或电子邮件或网址或号码`/>`

我不介意密码或文本区域。

例如。我有这段代码可以选择所有具有自定义属性（'特殊'）的文本输入，它可以缩短吗？

```
$("input[type='text'][special],input[type='email'][special],input[type='url'][special],input[type='password'][special]") 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T23:51:52.503

[:input 选择器](http://api.jquery.com/input-selector/)是否涵盖了您感兴趣的案例？

```
$(":input[special]") 
```

**文件：**

> `:input selector`基本上选择所有表单控件。
> 
> **附加说明：**
> 因为`:input`是 jQuery 扩展而不是 CSS 规范的一部分，使用的查询`:input`不能利用原生 DOM querySelectorAll() 方法提供的性能提升。要在使用`:input`to 选择元素时获得最佳性能，首先使用纯 CSS 选择器选择元素，然后使用[`.filter(":input")`](http://api.jquery.com/filter/).

```
$("[special]").filter(":input"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T23:51:33.817

你可以使用：

```
$(':input[special]') 
```

虽然这也会抓住复选框等。

[http://api.jquery.com/input-selector/](http://api.jquery.com/input-selector/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T00:05:56.210

您可以使用`$(":input[special]")`或`$("[special]").filter(":input")`;

但我认为这更快：

```
$("input").filter(function() {
    return this.type !== "hidden" && this.getAttribute("special");
}); 
```

或者没有`radio`and `checkbox`'es

```
$("input").filter(function() {
    return this.type !== "hidden" && this.type !== "radio" && this.type !== "checkbox" && this.getAttribute("special");
}); 
```

**请参阅文档[`:input`](http://api.jquery.com/input-selector/)**

> `:input selector`基本上选择所有表单控件。
> 
> **附加说明：**
> 因为`:input`是 jQuery 扩展而不是 CSS 规范的一部分，使用的查询`:input`不能利用原生 DOM querySelectorAll() 方法提供的性能提升。要在使用`:input`to 选择元素时获得最佳性能，首先使用纯 CSS 选择器选择元素，然后使用[`.filter(":input")`](http://api.jquery.com/filter/).

# java - GWT CSS、布局和布局面板？

> ID：13149249
> 
> 赞同：0
> 
> 时间：2012-10-30T23:49:57.430
> 
> 标签：java, css, gwt, layout, user-interface

我正在尝试构建一个外观漂亮的 GWT 面板（我的第一个面板），并且一直在尝试决定如何处理其布局。

根据[布局Javadoc](http://google-web-toolkit.googlecode.com/svn/javadoc/2.1/com/google/gwt/layout/client/Layout.html)：

> 用于布置容器元素及其子元素的辅助类。

和[LayoutPanel Javadoc](http://google-web-toolkit.googlecode.com/svn/javadoc/2.0/com/google/gwt/user/client/ui/LayoutPanel.html)：

> 使用 Layout 类将其子项放置在任意层中的面板。

所以看起来你可以：

*   扩展 a`ComplexPanel`并使用 a`Layout`来管理其布局；或者
*   使用`LayoutPanel`似乎内置了此功能的 a ；或者
*   只需向 an 添加元素`HTMLPanel`并使用 CSS 执行所有定位/布局

我不是 100% 确定，但这感觉就像您拥有这些选项（可能还有其他选项），因为它们在不同情况下相互提供优势，或者因为 GWT API 发生了很大变化，并且随着时间的推移添加了更新的布局方法.

如果是前者，那么安全性和性能是我唯一的优先事项，所以我问：**一种方法是否比其他方法更高效和/或更安全**？如果是后者，那么 GWT 最新且最受鼓励的方法是哪一种？在我看来，最大的控制是将所有内容留给 CSS，根本不使用`Layout`/ `LayoutPanel`！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T05:51:50.723

LayoutPanel 使用绝对定位，它还为其子级提供大小。我喜欢将它用于我最外面的布局容器，因为它占据了整个浏览器窗口并在调整浏览器窗口大小时调整其子窗口的大小。

对于内部小部件（例如菜单、主区域），许多人喜欢使用 VerticalPanel 和 Horizo​​ntalPanel（甚至是 LayoutPanel），因为它们很简单。我避免使用这些面板，因为它们提供了基于表格的刚性布局。我更喜欢使用 HTMLPanel 或 FlowPanel，并通过 CSS 实现所需的布局。

请注意，在讨论不同面板的优缺点时，我不会使用“旧”或“新”属性。它们都翻译成标准的 HTML。如果您对 CSS 感到满意（很多开发人员不满意），那么您应该尽可能多地使用 CSS，因为这是浏览器经过优化后要做的事情，而且您可以构建更流畅、一致和面向未来的内容（即更容易改变）布局。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T05:43:47.587

您正在构建什么样的应用程序？

*   您是否需要面板之间的“用户定位分离器”？
*   您需要单独的滚动面板吗？

如果没有，请坚持使用 CSS。

从 HTML/CSS 模型开始，然后将其转换为 GWT UiBinder 文件。特别是在[响应式网页设计方面](http://en.wikipedia.org/wiki/Responsive_web_design)，您可以从 Twitter Bootstrap 等现成的 CSS 框架开始获得巨大的先机。

# c++ - eclipse cdt 中无法识别结构

> ID：13149250
> 
> 赞同：0
> 
> 时间：2012-10-30T23:50:04.200
> 
> 标签：c++, eclipse-cdt

我正在尝试通过 eclipse cdt 编写一个基于控制台的计算器。但是识别我的 struct Calc 似乎有问题

有我的头文件：

```
#ifndef __CALC_H__
#define __CALC_H__
#include <iostream>

struct Calc {
  Calc();
  Calc(const Calc &other);

  bool error;
  int display;
  char oper;
  int result;
  int memory;

  void digit(int digit);
  void op(char oper);
  void equals();

  void memPlus();
  void memClear();
  void memRecall();

  bool isError() const;

  void allClear();
};

std::ostream &operator<<(std::ostream &out, const Calc &c);

#endif 
```

和我的源文件

```
#include "calc.h"

void doOperation(Calc& calc){
    switch(calc.oper){//ide tells me oper cant be resolved
    case '+':
        break;
    case '-':
        break;
    case '*':
        break;
    case '/':
        break;
    }
}

void Calc(){

}

void Calc(const Calc& other){//ide tells me Calc does not name a type

} 
```

所以问题是 1.oper 不能被识别为 Calc 的数据成员 2.当我使用 Calc 作为参数时，eclipse 找不到类型 Calc 我哪里做错了？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T23:56:28.600

两件事，第一个构造函数没有返回类型，所以

```
void Calc() {} 
```

不是要走的路 - 失去`void`返回类型。其次，您需要在`Calc`成员函数上使用范围解析运算符 - 再次丢失`void`

```
 Calc::Calc(const Calc& other){
 } 
```

# objective-c - 如果我想通过它的地址知道一个对象是否在 NSArray 中，我应该怎么做？

> ID：13149258
> 
> 赞同：0
> 
> 时间：2012-10-30T23:50:50.170
> 
> 标签：objective-c, xcode4.5

[NSArray containsObject] 使用 isEqual。isEqual 默认为地址。

假设我想知道 [NSArray containsObject] 是否基于参考？所以我想知道那个实际的对象，而不是一个与其相等的对象，是否在数组中。

我想用它来比较核心数据对象。核心数据对象可能会被删除和取消引用，我想知道所有包含引用它的元素的数组会发生什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T23:56:14.230

> isEqual 默认为地址

在那种情况下，有问题吗？

听起来您想将对象存储在`isEqual`不使用地址的位置，但*仍*使用该地址进行此​​检查，对吗？

没有`-[containsObjectIdenticalTo:]`，但有一个`-[indexOfObjectIdenticalTo:]`；如果返回除了 NSNotFound 之外的任何内容，则包含它。

```
if ([anArray indexOfObjectIdenticalTo:anObject] != NSNotFound) {
} 
```

正如[NSArray 参考文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/NSArray.html)明确指出的那样：

> 如果对象地址相同，则认为对象相同。

有一整套`Identical`方法`NSArray`和其他集合，正是为了这个目的。

# java - 是否有等同于“ListView.addHeaderView”的 XML 标记？

> ID：13149264
> 
> 赞同：13
> 
> 时间：2012-10-30T23:51:26.867
> 
> 标签：java, android, android-layout

是否有可以在布局文件中使用的 XML 标记[`ListView.addHeaderView()`](http://developer.android.com/reference/android/widget/ListView.html#addHeaderView%28android.view.View%29)？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-06T04:38:48.680

我写了一个简单的`ListView`像你的要求。

1.  `attrs.xml`在文件夹中声明自定义属性`value`：

    ```
    <resources>
        <declare-styleable name="HeaderListViewFromXML"> 
            <attr name="headerView" format="reference"/>
        </declare-styleable>
    </resources> 
    ```

2.  创建`HeaderListViewFromXML`类扩展`ListView`

    ```
    public class HeaderListViewFromXML extends ListView {
        private int headerId;

        public HeaderListViewFromXML(Context context) {
            this(context, null);
        }

        public HeaderListViewFromXML(Context context, AttributeSet attrs) {
            this(context, attrs, 0);
        }

        public HeaderListViewFromXML(Context context, AttributeSet attrs, int defStyle) {
            super(context, attrs, defStyle);
            TypedArray a = context.getTheme().obtainStyledAttributes(attrs, R.styleable.HeaderListViewFromXML, defStyle, defStyle);

            try {
                headerId = a.getResourceId(R.styleable.HeaderListViewFromXML_headerView, View.NO_ID);
                if (headerId != View.NO_ID) {
                    LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                    View header = inflater.inflate(headerId, null);
                    addHeaderView(header);
                }
            } finally {
                a.recycle();
            }
        }
    } 
    ```

3.  声明自`HeaderListViewFromXML`定义`layout.xml`

    ```
    <RelativeLayout
            xmlns:android="http://schemas.android.com/apk/res/android"
            xmlns:app="http://schemas.android.com/apk/res-auto"
            android:layout_width="match_parent"
            android:layout_height="match_parent">
        <com.example.rewidget.HeaderListViewFromXML
                android:id="@+id/listWithHeader"
                android:layout_width="fill_parent"
                android:layout_height="150dp"
                android:layout_marginTop="60dp"
                android:background="#00FF00"
                // custom attribute. Point to layout in header1.xml
                app:headerView="@layout/header1" />
    </RelativeLayout> 
    ```

4.  在 Activity 中，像往常一样使用`ListView`

    ```
    public class MainActivity extends Activity {
        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_main);
            ListView list = (ListView) findViewById(R.id.listWithHeader);

            String[] values = new String[] { "Android", "iPhone", "WindowsMobile", "Blackberry", "WebOS", "Ubuntu", "Windows7", "Max OS X", "Linux", "OS/2" };
            ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, android.R.id.text1, values);

            list.setAdapter(adapter);
        }
    } 
    ```

# this - 如何从 ScriptSharp 访问 JavaScript？

> ID：13149273
> 
> 赞同：1
> 
> 时间：2012-10-30T23:52:04.403
> 
> 标签：this, script#

我正在尝试执行以下操作。

```
var handler = e => { handle(); item.Unbind("event", this); }
item.Bind("event", handler); 
```

在 JavaScript 中 this 可以正常工作，但 ScriptSharp 将 JavaScript 的 this 替换为引用包含该代码的方法的类的实例。如何避免这种行为并从 lambda 本身获取对 lambda 的引用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T20:17:25.403

这是你可以做到的（假设 Bind 接受一个带有 Action 签名的委托）：

```
SomeObject item = ...;
Action handler = null;

handler = delegate() {
   // do something ... eg. call Handle();
   item.Unbind("event", handler);
};
item.Bind("event", handler); 
```

另外，请参阅这个问题：[How to write a function in script# to be called with any object as this,而不仅仅是定义它的类的实例？](https://stackoverflow.com/questions/13135498/how-to-write-a-function-in-script-to-be-called-with-any-object-as-this-not-jus)用于编写在脚本中生成“this”引用的代码的技术。

# iphone - 不检索任何产品，应用内购买

> ID：13149274
> 
> 赞同：2
> 
> 时间：2012-10-30T23:52:08.503
> 
> 标签：iphone, ios, in-app-purchase

```
- (void) requestProductData
{
SKProductsRequest *request= [[SKProductsRequest alloc]
initWithProductIdentifiers: [NSSet setWithObjects: @"com.mycompany.appname.item1", @"com.mycompany.appname.item2", nil]];
request.delegate = self;
[request start];
}

- (void)productsRequest:(SKProductsRequest *)request didReceiveResponse:
    (SKProductsResponse *)response
{
NSArray *myProducts = response.products;
NSLog(@"%i Products retrieved", [myProducts count]);

[request autorelease];
} 
```

如您所见，我设置了一个 NSLog 来返回产品的数量。
我一直在检索 0 个产品。
产品 ID && 捆绑标识符与 iTunes 连接匹配。
在应用程序购买状态是“准备提交”，应用程序状态是“准备上传”
我应该在 iTunes Connect 中设置什么？或与代码有关的东西？

**编辑：**
我目前没有有效的 iOS 付费应用程序合同有什么不同吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T00:02:16.060

苹果服务器没有找到您的产品，您应该在`response.invalidProductIdentifiers`. 很可能，您没有在 iTunesConnect 中创建它们，或者您可能有错字。如果您的产品尚未获得批准，您可能必须确保您在沙盒中。

# python - 将嵌套列表拆分为两个列表

> ID：13149278
> 
> 赞同：15
> 
> 时间：2012-10-30T23:52:19.283
> 
> 标签：python, list, split, nested

我有一个这样的嵌套列表：

```
 my_list = [[1320120000000, 48596281], [1320206400000, 48596281], [1320292800000, 50447908]] 
```

我想把它分成如下所示的东西：

```
 my_list1 = [48596281, 48596281, 50447908] 
    my_list2 = [1320120000000, 1320206400000, 1320292800000] 
```

我知道这很简单，但我无法让它工作。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-10-30T23:54:15.647

这就是内置函数[`zip`](http://docs.python.org/2/library/functions.html#zip)的用途。

```
my_list2, my_list1 = zip(*my_list) 
```

如果你想要列表而不是元组，你可以这样做

```
my_list2, my_list1 = map(list, zip(*my_list)) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-30T23:54:17.443

您可以使用列表理解。

```
my_list1 = [i[1] for i in my_list]
my_list2 = [i[0] for i in my_list] 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-30T23:54:30.893

使用 `list comprehension`：

```
In [6]: lis1,lis2=[x[0] for x in my_list],[x[1] for x in my_list]
In [7]: lis1
Out[7]: [1320120000000L, 1320206400000L, 1320292800000L]

In [8]: lis2
Out[8]: [48596281, 48596281, 50447908] 
```

或使用[`operator.itemgetter()`](http://docs.python.org/2/library/operator.html#operator.itemgetter)：

```
In [19]: lis1,lis2=map(itemgetter(0),my_list) , map(itemgetter(1),my_list)

In [20]: lis1
Out[20]: [1320120000000L, 1320206400000L, 1320292800000L]

In [21]: lis2
Out[21]: [48596281, 48596281, 50447908] 
```

`timeit`比较：

```
In [42]: %timeit lis1,lis2=[x[0] for x in my_list],[x[1] for x in my_list]  #winner if lists are required
100000 loops, best of 3: 1.72 us per loop

In [43]: %timeit my_list2, my_list1 = zip(*my_list) # winner if you want tuples
1000000 loops, best of 3: 1.62 us per loop

In [44]: %timeit my_list2, my_list1 = map(list, zip(*my_list))
100000 loops, best of 3: 4.58 us per loop

In [45]: %timeit lis1,lis2=map(itemgetter(0),my_list),map(itemgetter(1),my_list)
100000 loops, best of 3: 4.4 us per loop 
```

# extjs - extjs4 树子项直到单击“排序”标题按钮才显示

> ID：13149281
> 
> 赞同：1
> 
> 时间：2012-10-30T23:52:38.660
> 
> 标签：extjs, extjs4

我调用 root.appendChild() 将几个子节点添加到树形面板根并调用 root.expand() 来展开树，但是直到我单击标题上的任何排序按钮后子节点才显示。我需要设置任何属性来以编程方式显示子节点吗？

感谢帮助。

以下是代码：

```
 tree.getRootNode().removeAll();

        var root = tree.setRootNode({
            PRTNUM:'root',
            id: 'treeRoot',
            leaf: false
        });

        for (var i = 0; i < result.data.length; i++) {
            var rec = result.data[i];
            var node = root.appendChild({
                PRTNUM: rec.PRTNUM,
                DESC: rec.DESC,   
                icon: this.convertTypeToIcon(rec.TYPE),
                id: rec.PRTNUM,
                leaf: true

            });
        }

        root.expand(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T01:32:41.597

由于您的根节点最初没有子节点，因此它被标记为叶子。我发现以下内容适用于最初为叶子的父节点，您必须以编程方式添加节点：

```
parentNode.set("leaf", false);  //must be set to work properly
parentNode.appendChild(newChild);
parentNode.expand(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T18:20:27.887

我发现在调用 appendChild() 后添加以下行修复了“树网格”直到单击“排序”列按钮才展开。谢谢。

```
 root.expandChildren(true);

        root.sort(function() {}); 
```

# javascript - 为什么 10..toString() 有效，但 10.toString() 无效？

> ID：13149282
> 
> 赞同：71
> 
> 时间：2012-10-30T23:52:48.270
> 
> 标签：javascript, syntax

> **可能重复：**
> [在 JavaScript 中使用 toString](https://stackoverflow.com/questions/6853865/usage-of-tostring-in-javascript)

```
152..toString(2) 
```

正确创建二进制字符串“10011000”，但

```
152.toString(2) 
```

抛出异常

> “SyntaxError：标识符在数字文字之后立即开始”

为什么？后者的语法实际上听起来更正确，而前者看起来很奇怪！

* * *

## 回答 #1

> 赞同：103
> 
> 时间：2012-10-30T23:55:21.060

数字后的A`.`可能看起来模棱两可。它是小数还是对象成员运算符？

但是，解释器*认为*它是小数，因此您缺少成员运算符。

它认为它是这样的：

```
(10.)toString();  // invalid syntax 
```

当您包括第二个`.`时，您有一个小数，后跟成员运算符。

```
(10.).toString(); 
```

* * *

*@pedants 和 downvoters*

`.` *人物*表现出*模棱两可*。可以理解为成员运算符，也可以是小数，视其位置而定。如果没有歧义，就没有问题可问。

规范对该特定位置的字符的解释`.`是它将是一个小数。这是由 ECMAScript 的数字文字语法定义的。

仅仅因为规范解决了 JS 解释器的歧义，并不意味着`.`字符的歧义根本不存在。

* * *

## 回答 #2

> 赞同：101
> 
> 时间：2012-10-30T23:59:53.040

词法分析器（又名“tokenizer”）在读取新标记时，在第一次找到一个数字时，将继续使用字符（即数字或**一个**点），直到它看到一个*不*属于合法数字的字符。

`<152.>`是合法标记（不需要尾随 0）但`<152..>`不是，因此您的第一个示例简化为这一系列标记：

```
<152.> <.> <toString> <(> <2> <)> 
```

这是合法的（和预期的）序列，而第二个看起来像

```
<152.> <toString> <(> <2> <)> 
```

这是非法的 - 没有将号码与`toString`通话分开的句号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T23:55:17.943

`10.`是`float number`一个你可以使用 toString 的`float`

例如。

```
parseFloat("10").toString() // "10" 
```

# apache-camel - 如何将 SolrInputDocument 或 XML 作为值添加到 camel-solr xml 路由中？

> ID：13149285
> 
> 赞同：1
> 
> 时间：2012-10-30T23:53:22.923
> 
> 标签：apache-camel

```
<route>
    <from uri="direct:insert"/>
    <setHeader headerName="SolrOperation">
        <constant>INSERT</constant>
    </setHeader>
    <setHeader headerName="SolrField.id">
        <simple>${body}</simple>
    </setHeader>
    <to uri="solr://localhost:8983/solr"/>
</route> 
```

这是将 ${body} 设置为“id”字段的示例代码，但由于它支持消息正文作为 SolrInputDocument 或等效的 XML，我想如何在上述 XML 路由中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T17:29:59.360

如果您有 SolrInputDocument，则只需将其作为消息正文传递给路由并确保正确设置了 OPERATION 标头...

```
//example producer code
SolrInputDocument doc = new SolrInputDocument();
doc.addField("id", "MA147LL/A", 1.0f);
template.sendBodyAndHeader("direct:start", doc, SolrConstants.OPERATION, SolrConstants.OPERATION_INSERT);

//simplified route that just expects the message body and OPERATION header are setup appropriately
<from uri="direct:insert"/>
<to uri="solr://localhost:8983/solr"/> 
```

有关更多信息，请参阅单元测试...

[https://svn.apache.org/repos/asf/camel/trunk/components/camel-solr/src/test/java/org/apache/camel/component/solr/SolrUpdateTest.java](https://svn.apache.org/repos/asf/camel/trunk/components/camel-solr/src/test/java/org/apache/camel/component/solr/SolrUpdateTest.java)

# objective-c - 从主捆绑包加载证书时出现问题

> ID：13149286
> 
> 赞同：0
> 
> 时间：2012-10-30T23:53:29.913
> 
> 标签：objective-c, ios6

我在将证书加载到 ios 应用程序（iOS 6.0 SDK）时遇到了一些问题，这是我的代码。

```
 NSData* certData = [NSData dataWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"xxx" ofType:@"crt"]];
      if( [certData length] ) {

          CFDataRef myCertData = (__bridge CFDataRef)certData;

          SecCertificateRef cert = SecCertificateCreateWithData (kCFAllocatorDefault, myCertData);

          if( cert != NULL ) { 
```

证书始终为空，有人知道为什么吗？

提前致谢

# gps - Pandas DataFrame 的哪些功能可用于对 GPS Tracklog 数据进行建模（从 GPX 文件中读取）

> ID：13149288
> 
> 赞同：1
> 
> 时间：2012-10-30T23:54:10.957
> 
> 标签：gps, pandas

自从我开始使用 Pandas DataFrame 反序列化 GPS 数据并执行一些数据处理和分析以来，已经有几个月了。

尽管我对 Pandas 的健壮性、灵活性和强大功能印象深刻，但我对哪些功能以及应该使用哪种方式对数据进行正确建模感到有点迷茫，无论是为了清晰、简单还是计算速度。

基本上，每个 DataFrame 主要由一个`datetime`对象索引，至少有一列用于纬度-经度元组，一列用于高程。

我做的第一件事是计算一个新列，其中坐标对之间的测地距离（第一个是 0.0），使用一个以两个坐标对作为参数的函数，从那个新列我可以计算沿轨道的累积距离，我将其用作[线性参考系统](http://webhelp.esri.com/arcgiSDEsktop/9.3/index.cfm?TopicName=An_overview_of_linear_referencing)

我需要解决的问题是：

1.  有没有一种方法可以在同一个数据框中使用两个不同的单调递增列（累积距离和时间戳），在运行时在每个给定上下文中选择更方便的列，并使用这些索引自动对齐新插入的行?
2.  在应用`diff`可以矢量化的函数的特定情况下（像数组操作而不是迭代的成对循环一样应用），有没有办法在熊猫中惯用地做到这一点？我应该创建一个支持 diff ( `__sub__`) 操作的“坐标”类以便我可以`dataframe.latlng.diff`直接使用吗？

我不确定这些问题是否得到了很好的表述，但这至少在一定程度上是由于大量的可能性和一些零散的文档（还）。

此外，非常欢迎任何关于将 Pandas 用于 GPS 数据（跟踪日志）或地理空间数据的提示。

谢谢你的帮助！

# csv - 如何在 Confluence wiki 中的 CSV 宏中以整数显示逗号

> ID：13149294
> 
> 赞同：1
> 
> 时间：2012-10-30T23:54:32.867
> 
> 标签：csv, macros, escaping, number-formatting, confluence

我在 Confluence 4.x 中使用 CSV 宏，并且我的一列包含整数数据。当与宏一起显示时，wiki 不会将逗号放入大整数中（我的 CSV 文件中有 7 位整数）。我将整数的列类型设置为“I”，但这没有帮助。这是宏的限制还是我忽略的设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-02T01:41:47.670

使用以下选项之一：

*   将分隔符更改为空格并手动插入逗号
*   [升级到 5.1](https://bobswift.atlassian.net/wiki/display/TBL/CSV+Macro#CSVmacro-Commonparameters)以使用 columnType`FC`或`CC`

# html - 如何使用 twitter bootstrap 在导航上获得下拉菜单？

> ID：13149297
> 
> 赞同：1
> 
> 时间：2012-10-30T23:54:47.337
> 
> 标签：html, css, drop-down-menu, twitter-bootstrap

我正在尝试在导航中使用 twitter bootstrap 让下拉菜单工作，但遇到了麻烦。当我点击“更多...”时，什么也没有出现。

有什么建议吗？

```
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Home</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <script type="text/javascript" src="http://platform.twitter.com/widgets.js"></script>
    <script src="http://twitter.github.com/bootstrap/assets/js/google-code-prettify/prettify.js"></script>   

    <script src="http://twitter.github.com/bootstrap/assets/js/jquery.js"></script>  
    <script src="http://twitter.github.com/bootstrap/assets/js/bootstrap-dropdown.js"></script>

    <link href="bootstrap1.css" rel="stylesheet">

  </head>

<body>
    <!-- Navbar
    ================================================== -->
    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
           <a class="brand" href="/">Name</a>
          <div class="nav-collapse collapse">

            <ul class="nav">
              <li class="active">
                <a href="/">Home</a>
              </li>
              <li class="">
                <a href="/browse">Browse</a>
              </li>
              <li class="">
                <a href="/about">About</a>
              </li>

              <li class="">
                <a href="/faq">FAQ</a>
              </li>

              <li>
                <a href="http://submeup.tumblr.com/">Blog</a>
              </li>

              <li class="">
                <a href="/contactinfo">Contact</a>
              </li>

              <li class="dropdown">
                <a class="dropdown-toggle" data-toggle="dropdown" href="#">More...  </a>
                    <ul class="dropdown-menu" >
                        <li>First</li>
                        <li>First</li>
                        <li>First</li>
                        <li>First</li>
                    </ul>
              </li>

            </ul>

                    <ul class="nav pull-right">
                    <li><a href="/accounts/register/">Sign up</a></li>
                    <li class="divider-vertical"></li>
                    <li><a href="/accounts/login/">Login</a></li>
                </ul>

          </div>
        </div>
      </div>
    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T00:21:03.607

尝试添加`role="menu"`到`<ul class="dropdown-menu" >`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T02:35:11.747

我得到了最新版本的引导程序，它现在似乎可以工作了。

# localhost - Windows Phone 8 模拟器：访问本地主机

> ID：13149304
> 
> 赞同：14
> 
> 时间：2012-10-30T23:55:47.990
> 
> 标签：localhost, windows-phone, windows-phone-8

我使用 VS 2012 默认模板创建了 MVC4 移动应用程序。它在桌面浏览器中运行良好，`http://localhost/mvcapplication1/`但是当我尝试在 WP8 Emulator 浏览器中运行相同的应用程序时，它无法运行并显示消息“我们在显示此页面时遇到问题”。我也尝试使用 IP 地址（127.0.0.1），但仍然没有运气。请告诉我如何使用 WP8 Emulator 浏览器连接到 localhost？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-31T00:07:44.707

Windows Phone 8 模拟器实际上是一个完整的虚拟机，有自己的内部 IP 地址。
因此，`localhost`指的是（虚拟）电话，而不是您的 PC。

要连接到主机 PC，您需要输入其内部 IP 地址。

您还需要配置 IIS Express 和防火墙以接受来自其他计算机的连接。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-19T14:26:34.073

我也在寻找这个问题的答案，发现现在有一个来自微软的官方答案：

[http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj684580%28v=vs.105%29.aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj684580%28v=vs.105%29.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-22T11:46:51.897

您可以安装 fiddler 并阅读有关如何为 windows 模拟器配置 fiddler 的说明。

这篇文章对我来说很好：http: [//blogs.msdn.com/b/wsdevsol/archive/2013/06/05/configure-the-windows-phone-8-emulator-to-work-with-fiddler。 aspx](http://blogs.msdn.com/b/wsdevsol/archive/2013/06/05/configure-the-windows-phone-8-emulator-to-work-with-fiddler.aspx)

配置完成后，模拟器将自动使用 fiddler 作为代理服务器，您的本地主机也应该可以在模拟器中正常工作。

记得在启动模拟器之前启动fiddler来路由流量，否则它不会工作。您还可以监控 Windows 模拟器发出的 http/https 请求。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-17T21:26:25.993

尝试使用您的 IP 而不是使用 (localhost)

1- 从开始菜单打开命令提示符 2- 编写 ipconfig 3- 如果它不起作用，您将在 ipv4 地址旁边找到您的 IP 地址尝试 MSDN 中的这些附加步骤

为对 IIS Express 的 HTTP 请求创建防火墙例外 从 Windows 开始屏幕中，搜索 Windows 防火墙。单击以运行程序。在 Windows 防火墙屏幕上，单击高级设置。在具有高级安全性的 Windows 防火墙屏幕上，选择入站规则。然后单击新建规则。在新建入站规则向导的规则类型页面上，选择端口。然后单击下一步。在协议和端口页面上，在特定本地端口字段中输入 IIS Express 正在使用的端口号。然后单击下一步。

在操作页面上，选择允许连接。然后单击下一步。在配置文件页面上，选择私有，如果适用，选择域。不要选择公开。然后单击下一步。在名称页面上，键入规则的名称 - 例如，用于测试的本地 Web 服务。然后单击完成。

# html - 与其余边框颜色不同的垂直边框-渗入下方的水平边框-Firefox colspan问题 我有一个我希望/中的垂直边框与其余边框颜色不同的地方（所有边框都是 1 像素宽，表格顶部没有边框）。这看起来很简单——问题是在 Firefox、Safari 和 Chrome 中，这些垂直边框“渗入”下面的水平边框，看起来不太好。在 Firefox 中，如果 下方的行包含与 相同数量的列/单元格，它看起来没问题，但如果我使用，我会得到“ 问问题 问问题 2012-10-30T23:56:02.357 1405 次 This question shows research effort; it is useful and clear 6 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 我有一个我希望/

中的垂直边框与其余边框颜色不同的地方（所有边框都是 1 像素宽，表格顶部没有边框）。这看起来很简单——问题是在 Firefox、Safari 和 Chrome 中，这些垂直边框“渗入”下面的水平边框，看起来不太好。在 Firefox 中，如果 下方的行包含与 相同数量的列/单元格，它看起来没问题，但如果我使用，我会得到“出血”。 <colspan>显而易见的解决方案是在垂直边框上使用例如“solid”，在下面的</colspan> CSS table { border-collapse: collapse; } tbody th, tbody td { border: 1px solid #0F0; } thead td, thead th, tbody th { border-left: 1px solid #F00; border-right: 1px solid #F00; } HTML

|  |
| --- |
| 水平边框上使用“double” | ——这在 Safari 和 Chrome 中确实有效。但是，我还没有为 Firefox 想出一个解决方案，我想我已经尝试了一切。我无法删除边框折叠，因为这是其他目的所需要的。（是的，默认情况下它看起来像我想要的 IE8 和 Opera！） 查看示例：http: //jsfiddle.net/7YdCQ/ 代码（一个非常简单的带有强烈颜色的示例）- CSS（所有边框都是实心的）： table { border-collapse: collapse; } thead th { border-left: 1px solid #F00; border-right: 1px solid #F00; } tbody th, td { border: 1px solid #0F0; } HTML（2 个表格，1 个带有 colspan）： 

&#124; Thead TD 1 &#124; Thead TD 2 &#124; Thead TD 3 &#124;
&#124; --- &#124; --- &#124; --- &#124;
&#124; Tbody TH colspan 3 &#124;
&#124; Tbody TD &#124; Tbody TD &#124; Tbody TD &#124;

&#124; Thead TD 1 &#124; Thead TD 2 &#124; Thead TD 3 &#124;
&#124; --- &#124; --- &#124; --- &#124;
&#124; Tbody TD &#124; Tbody TD &#124; Tbody TD &#124;

两件事，第一个构造函数没有返回类型，所以 void Calc() {} 不是要走的路 - 失去void返回类型。其次，您需要在Calc成员函数上使用范围解析运算符 - 再次丢失void Calc::Calc(const Calc& other){ } htmlcssfirefoxhtml-tableborder 4 1 回答 1 This answer is useful 1 解决方案是正确覆盖 CSS 样式。使用colspanin和标签 | 进行测试。编辑示例：http: //jsfiddle.net/7YdCQ/21/ |
| --- | --- | --- |

| Thead TH 1 | Thead TD colspan 2 |
| --- | --- |
| Tbody TH colspan 3 |
| Tbody TD | Tbody TD | Tbody TD |

| Thead TD 1 | Thead TD 2 | Thead TD 3 |
| --- | --- | --- |
| Tbody TD | Tbody TD | Tbody TD |

于 2012-11-04T21:23:47.507 回答 Related 1 ios - 使用 Amazon Cloudfront 将视频分发到 iPhone，具有固定的内容编程 1 c# - 在 .NET 网络浏览器中对谷歌的阿拉伯语查询 3 c++ - c ++未定义对静态变量的引用 1 mysql - MySQL按“每天的关系”排序 2 c# - 具有相同列的相同表的数据建模 1 objective-c - 如何在 Objective-C OpenGL 中正确使用 InitWindow？ 1 mysql - mysqldump 过滤器？ 1 php - 作为浏览器输出 1 php - 我的 CSS 代码在 TinyMCE 中没有正确读取 1 delphi - 带 Dephi 的 SAPI：异步语音不起作用 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：13149306
> 
> 赞同：6
> 
> 时间：
> 
> 标签：html, css, firefox, html-table, border

我有一个我希望/`<table>`中的垂直边框与其余边框颜色不同的地方（所有边框都是 1 像素宽，表格顶部没有边框）。这看起来很简单——问题是在 Firefox、Safari 和 Chrome 中，这些垂直边框“渗入”下面的水平边框，看起来不太好。在 Firefox 中，如果 下方的行包含与 相同数量的列/单元格，它看起来没问题，但如果我使用，我会得到“出血”。`<thead>``<th>``<thead>``<thead>``<colspan>`

显而易见的解决方案是在垂直边框上使用例如“solid”，在下面的`<th>`水平边框上使用“double” `<td>`——这在 Safari 和 Chrome 中确实有效。但是，我还没有为 Firefox 想出一个解决方案，我想我已经尝试了一切。我无法删除边框折叠，因为这是其他目的所需要的。（是的，默认情况下它看起来像我想要的 IE8 和 Opera！）

查看示例：http: [//jsfiddle.net/7YdCQ/](http://jsfiddle.net/7YdCQ/)

代码（一个非常简单的带有强烈颜色的示例）- CSS（所有边框都是实心的）：

```
table { border-collapse: collapse; }
thead th { border-left: 1px solid #F00; border-right: 1px solid #F00; }
tbody th, td { border: 1px solid #0F0; } 
```

HTML（2 个表格，1 个带有 colspan）：

```
<table>
    <thead>
        <tr>
            <th>Thead TD 1</th>
            <th>Thead TD 2</th>
            <th>Thead TD 3</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <th colspan="3">Tbody TH colspan 3</th>
        </tr>
        <tr>
            <td>Tbody TD</td>
            <td>Tbody TD</td>
            <td>Tbody TD</td>
        </tr>
    </tbody>
</table>
<table>
    <thead>
        <tr>
            <th>Thead TD 1</th>
            <th>Thead TD 2</th>
            <th>Thead TD 3</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>Tbody TD</td>
            <td>Tbody TD</td>
            <td>Tbody TD</td>
        </tr>
    </tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T21:23:47.507

解决方案是正确覆盖 CSS 样式。使用`colspan`in和标签`<th>`进行测试。编辑示例：http: [//jsfiddle.net/7YdCQ/21/](http://jsfiddle.net/7YdCQ/21/)`<thead>``<tbody>`

CSS

```
table { border-collapse: collapse; }
tbody th, tbody td { border: 1px solid #0F0; }
thead td, thead th, tbody th { border-left: 1px solid #F00; border-right: 1px solid #F00; } 
```

HTML

```
<table>
    <thead>
        <tr>
            <th>Thead TH 1</th>
            <td colspan='2'>Thead TD colspan 2</td>
        </tr>
    </thead>
    <tbody>
        <tr>
            <th colspan='3'>Tbody TH colspan 3</th>
        </tr>
        <tr>
            <td>Tbody TD</td>
            <td>Tbody TD</td>
            <td>Tbody TD</td>
        </tr>
    </tbody>
</table>
<br>
<table>
    <thead>
        <tr>
            <th>Thead TD 1</th>
            <th>Thead TD 2</th>
            <th>Thead TD 3</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>Tbody TD</td>
            <td>Tbody TD</td>
            <td>Tbody TD</td>
        </tr>
    </tbody>
</table> 
```

# facebook - Facebook 未读取 Open Graph 属性 - 正文中的元标记问题

> ID：13149307
> 
> 赞同：0
> 
> 时间：2012-10-30T23:56:08.040
> 
> 标签：facebook, facebook-graph-api

请参阅此 facebook 工具以检查打开的图形属性：[https ://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fwww.buysell.com%2Freviews%2Fid%2F2599%2F](https://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fwww.buysell.com%2Freviews%2Fid%2F2599%2F)

我在 中没有看到任何`<meta>`标签`<body>`，所以我不明白为什么 facebook 会这样说。需要修复此问题，因为当他们喜欢/分享链接时它会影响用户体验。

[http://www.buysell.com/reviews/id/2599/](http://www.buysell.com/reviews/id/2599/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T00:06:50.140

您 `<noscript>`在 head 部分有一个无效的标签 - 尝试删除它并查看 facebook 的解析器是否可以正确解析它

# python - 使用 while 循环而不是 for 来计算单词并在字符串中定位实例

> ID：13149309
> 
> 赞同：0
> 
> 时间：2012-10-30T23:56:19.877
> 
> 标签：python, string, list, for-loop, while-loop

这次我有更多代码要添加到[问题](https://stackoverflow.com/questions/13079318/counting-total-words-in-string-counting-spaces)中。我们的 TA 希望我们写一个函数，然后打印字符串中的总单词数，每个单词都是由空格分隔的一组字符，打印`<B>`标签的数量，并打印超链接的数量。

样本输入为：

```
#statHTML("<B> Article One </B> <a href=http://news.google.com>News</a>") 
```

但他希望我们只使用 WHILE 循环。我已经完成了，但只有 FOR 循环。请协助，因为我无法得到它，甚至我的朋友都被卡住了

这是我到目前为止的代码。

```
str1T = len(str1.split())
print (str1T_strat_two)
str_t=str1.count('<B>')
print (str_t)
total = len(str1.split('<B>')) - 1
print (total)
print (str1.count('href')) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T23:59:53.470

这是一个让你前进的指南。

```
string = "Article One News"
words = string.split()

i = 0
while i < len(words):
    word = words[i]
    # Do whatever you want with this word
    i += 1 
```

您可以使用所需的任何代码代替注释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T00:01:45.613

您可以轻松地将任何 for 循环转换为 while 循环

```
for x in y:
    #stuff 
```

进入这个

```
try:
    x = next(y)
    while 1:
        #stuff
        x = next(y)
except StopIteration:
    pass 
```

# c++ - g++没有这样的文件或目录崇高文本

> ID：13149312
> 
> 赞同：0
> 
> 时间：2012-10-30T23:56:38.797
> 
> 标签：c++, compilation, build-process, sublimetext2

尝试在 Windows 8 上使用 Sublime Text 2 编译 hello world，得到以下错误：

```
g++: : No such file or directory
g++: No input files
[Finished in 0.7s with exit code 1] 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T01:48:30.503

解决了，但是发帖很尴尬。问题是我认为 Sublime Text 2 在退出程序时会自动保存。SB2 会自动打开您正在处理的最后一个文件，所以我认为它已经保存了。将文件保存到任何路径都可以消除错误并可以正常编译。

# ios - AFNetworking - 在所有 JSON 请求完成之前触发批处理操作完成块

> ID：13149314
> 
> 赞同：1
> 
> 时间：2012-10-30T23:56:44.320
> 
> 标签：ios, json, afnetworking, afjsonrequestoperation

我刚刚开始使用 AFNetworking，并且在使用 enqueueBatchOfHTTPRequestOperations 将 3 个 AFJSONRequestOperation 对象批处理时遇到了异常。我发现，队列的 completionBlock 偶尔会在所有 AFJSONRequestOperation 完成块触发之前触发。在做了一些研究之后，这似乎与 AFJSONRequestOperation 将响应数据解析为 JSON 相关，它在单独的队列中执行，这意味着请求在解析完成之前向队列报告已完成。

因此，我的问题是 - 我是否可以将 AFHTTPRequestOperation 对象用于我的 3 个请求，并在请求完成块中自己手动解析 JSON？这是否会保证队列完成块仅在所有请求完成后才会触发？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T12:38:54.213

我将代码更改为使用 AFHTTPRequestOperation 而不是 AFJSONRequestOperation 并手动解析 JSON，过去几天我一直在测试新版本。我没有看到问题发生过一次，所以我认为可以肯定地说队列完成块在所有请求完成之前触发仅在使用 AFJSONRequestOperation 时发生。

# php - 在页面顶部显示微时间的时间

> ID：13149315
> 
> 赞同：0
> 
> 时间：2012-10-30T23:56:44.763
> 
> 标签：php

我正在使用 microtime 来获取脚本执行时间

```
$time_start = microtime(true);
....
....
//many process here, many result be printed here
$time_end = microtime(true);
$time = substr(($time_end - $time_start),0,5);
echo time; 
```

是否可以`$time`在结果页的上方打印？我也尝试过使用css，也打印在上面，但是，`$time`仍然打印在resul页面的底部。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T00:26:14.910

```
//many process here, many result be printed here
$time_end = microtime(true);
$time = substr(($time_end - $time_start),0,5);
?>
<div class="time">
    <?php echo time; ?>
</div>

<style>
.time{
    position:absolute;
    top:0;
    right:0;
    z-index:9999;
}
</style> 
```

您是否尝试过像这样将其回显到 dom 中？

# java - 将 Oracle 的“PasswordStore”导入 Eclipse

> ID：13149317
> 
> 赞同：0
> 
> 时间：2012-10-30T23:56:56.197
> 
> 标签：java, eclipse, swing

所以我开始探索 Java 编程，我觉得我对 C++ 的基本语法、约定和差异有了相当的了解。为了了解有关 Swing 的更多信息，我想深入了解 Oracle 网站（[此处](http://docs.oracle.com/javase/tutorial/ui/overview/demo.html)）上提供的 PasswordStore 源代码。我应该提到我正在使用 Eclipse IDE (Juno)。

不幸的是，但令人尴尬的是，我不知道如何将项目导入 Eclipse。我通过 Google 搜索找到的大部分信息都告诉我在创建新项目时使用“从现有资源创建项目”选项，但我在“新建 Java 项目”对话框中找不到该选项。使用 Import->General->Existing Projects Into Workspace 会导致“找不到要导入的项目”消息（我尝试了主文件夹和除子文件夹中的子文件夹之外的所有子`src`文件夹）。

`Makefile`提供的文件夹包含一个名为,的“文件”类型文件`manifest.mf`和一个名为`build`. 四处挖掘，我还发现了`genfiles.properties`、`project.properties`、`build-impl.xml`、`project.xml`和一堆 Java 源文件。直接子文件夹是`build`、`dist`和。我可以直接打开源文件，但我想正确地做到这一点。`nbproject``src`

有人能告诉我我应该在这里做什么吗？

# jquery - 像 Windows 8 磁贴一样对 div 进行排序

> ID：13149322
> 
> 赞同：0
> 
> 时间：2012-10-30T23:57:29.000
> 
> 标签：jquery, windows-8, microsoft-metro

[小提琴](http://jsfiddle.net/MTxXZ/51/)- 这是示例。

我正在尝试做一些看起来完全像 Windows 8 瓷砖网格的事情。我们有 3 种类型的瓷砖尺寸

*   正常=1x1；
*   宽=2x1；和
*   大=2x2。

我的意思是，瓷砖不需要精确排序，但它们之间不能有空格。

我检查了`Masonry`, `Isotope`, `freetile`, `vGrid`，`Wookmark`并且出现了同样的问题：**空白**。

我知道有时在逻辑上可能无法避免差距，但在这种情况下确实是可能的。

它不必是 jquery 插件类型的解决方案 - 我唯一需要的是不同的瓷砖，但适合彼此尺寸并在我“打包”它们时避免它们之间的间隙。

```
$('article').freetile(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T17:06:54.580

在 SO 上搜索 Isotope + gaps 和 Masonry + gaps。已经处理过无数次了。根据 DOM 中 1x1、2x1 和 2x2 div 的出现顺序，在某些浏览器宽度下，“间隙”是不可避免的，尤其是当您的元素很大时。

请参阅[https://stackoverflow.com/a/11438705/963514](https://stackoverflow.com/a/11438705/963514)或[https://stackoverflow.com/a/12116760/963514](https://stackoverflow.com/a/12116760/963514)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T11:12:45.497

我已经做到了。关键是设置columnWidth。如果图块之间有 150 像素和 10 像素的边距，那么它就是 columnWidth:160。

# reporting-services - 每 N 个不同的 SSRS 组

> ID：13149323
> 
> 赞同：0
> 
> 时间：2012-10-30T23:57:34.210
> 
> 标签：reporting-services, ssrs-grouping

我正在尝试解决一个问题。例如，假设我有一个包含 3 列（名称、时间戳、值）的表，其中包含 30 个唯一或不同的名称和超过 1,000 行

我创建了一个折线图，它为每个名称（系列组）绘制值（Y）与时间（X），因此该图表中有 30 条线。

然而，在一个图表中有 30 个系列在大多数情况下过于混乱和难以辨认。所以我把图表放在一个表格中（尽管“列表”可能更合适）。然后，我按“名称”对表格进行分组，这为每个图表提供了一个名称（系列），这很好但仍然不理想，因为这会生成大量图表并占用很多页面。

我现在想保留名称分组，但每个图表有 5 个名称（系列）。

我相信这很简单，但我已经通过搜索和尝试无数分组表达式数天来解决这个问题，但没有任何成功。

此外，顺序或排名并不重要。

这是一个接近我需要但不适合的分组示例，因为它每 5 行而不是每个不同名称 5 组。此表达式每 5 行分组... =Cieling(RowNumber(Nothing)/5)

谢谢

约翰。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T10:30:02.250

解决问题的最简单方法是在查询中添加该信息。如果您使用的是 SQL Server，您可以添加到查询中：

```
SELECT Name, Timestamp, Value,
ROW_NUMBER() OVER(PARTITION BY Name) as rownum
.... 
```

然后你在桌子上的分组表达式可以是`=Fields!rownum.Value Mod 5`

# javascript - 遍历 DOM 的最快方式（广度优先）

> ID：13149325
> 
> 赞同：0
> 
> 时间：2012-10-30T23:57:46.377
> 
> 标签：javascript, jquery, dom, traversal

对不起，如果这听起来像一个奇怪的需求。

用户可以以任意顺序创建包含任意数量元素的 HTML 页面，Div 将被分配一个类。我无法控制订单或订单的放置位置。

我需要遍历 DOM 并使用特定于我的框架的类名在每个 div 上调用一个 init 函数。所以我不知道他们将被放置的顺序。

以下是我的挑战： - 我正在使用递归 .children() Jquery 调用，然后遍历当前元素的每个子元素......我认为我需要找到一种更快的方法来执行此操作，这会影响性能。- 迭代时，$.each() 比标准 for 循环更快。我不知道为什么。$.each() 对较小的集合执行得更快吗？（即尺寸 < 20 ）

我的另一种选择是在每个类上做一个选择器，但我需要做几次迭代，因为这不能保证排序，所以迭代抵消了任何性能优势。

所以我的需要： - 首先遍历 DOM 广度的更好的执行方式。如果我能找到比 JQuery 函数更好的性能，那么普通的 Javascript 就可以了。

抱歉，我知道这听起来有点奇怪。非常欢迎任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T00:07:08.327

首先，您不应该受到巨大的性能影响。这个问题可能在你的代码中的其他地方，但你没有向我们展示你目前拥有的东西，所以我无法说。也就是说，这是一个应该很快的想法：

```
var classes = ["class1", "class2", "class3"];
i = classes.length, divs, j, curDiv;

while(i--) {
    divs = document.getElementsByClassName(classes[i]);
    j = divs.length;

    while(j--) {
        var curDiv = divs[j];
        // call some init function on the current div
    } 
} 
```

如果这不是很快，那么您肯定在其他地方遇到了问题（另外，不要忘记确保在文档加载后调用它）。

* * *

至于是否`$.each()`比标准`for`循环快，这几乎是一个经验法则：本机代码比库代码快（但库代码通常更方便）。在这种情况下也是如此；您的平均`for`循环将比`$.each()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-04-07T03:55:59.713

这里有一些更简洁的东西，有一些当前的语法。

```
 function bfs(root) {
      const queue = [];
      while (root) {
        console.log(root);
        [...root.children].forEach(child => queue.push(child));
        root = queue.shift();
      }
    }

    bfs(document.body);
```

```
 <html>
      <head>
        <title>Breadth First</title>
      </head>

      <body>
        <div class="a">
          <div class="aa">
            <span class="aaa"></span>
            <span class="aab"></span>
          </div>
        </div>
        <div class="ab">
          <span class="aba"></span>
          <span class="abb"></span>
        </div>
        <script src="main.js"></script>
      </body>
    </html>
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-05T15:42:18.077

对于广度优先树遍历...

```
const html = `<div class="a">
    <div class="aa">
        <span class="aaa">
        </span>
        <span class="aab">
        </span>
    </div>
    <div class="ab">
        <span class="aba">
        </span>
        <span class="abb">
        </span>
    </div
</div>`;

const parser = new DOMParser();
const doc = parser.parseFromString(html, "text/html");

function BFT_dom(root) {

    const queue = [];
    let currentEl = root;

    while(currentEl) {
      console.log(currentEl) // Do something to element here

      for(let i = 0; i < currentEl.children.length; i++) {
          queue.push(currentEl.children[i]);
      }
      currentEl = queue.shift();
  }

}

BFT_dom(doc) 
```

# c++ - 任何人都知道一个好的、免费的 C++ 调试器吗？

> ID：13149330
> 
> 赞同：0
> 
> 时间：2012-10-30T23:58:21.977
> 
> 标签：c++, debugging, codeblocks, debuggervisualizer

我一直在处理那些没有任何意义的错误，甚至更大的错误是试图弄清楚 Code::Blocks 的调试器是如何工作的。如果有任何方法可以让它显示指针的内容，或者能够在范围的变量之间切换，那么我的问题已经解决了，尽管总是欢迎替代方案。

帮帮我，在整个代码中分散 couts 是有史以来最违反直觉和引发精神错乱的负担。D|

编辑：操作系统是 Windows

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T00:07:06.593

[VS2012 express](http://www.microsoft.com/visualstudio/eng/products/visual-studio-express-for-windows-desktop)像啤酒一样免费。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T00:01:34.043

g++ [http://gcc.gnu.org/](http://gcc.gnu.org/) “GNU 编译器集合包括 C、C++、Objective-C、Fortran、Java、Ada 和 Go 的前端，以及这些语言的库（libstdc++、libgcj、. ..). GCC 最初是作为 GNU 操作系统的编译器编写的。GNU 系统被开发为 100% 自由软件，在尊重用户自由的意义上是自由的。”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T00:07:28.750

> 如果有任何方法可以让它显示指针的内容

是的。在 Code::Blocks 中，您应该能够在 Watches 列表中单击鼠标右键并选择“取消引用指针”。如果指针是对象的成员，您可能必须通过右键单击 Watches 列表并键入对该成员的完整引用来手动添加它。

```
// Type 'pA->int1' in the 'Add watch' and code::blocks should add it. 
class A {
  public:
    int int1;
};

int main()
{
  A * pA = new A;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T14:14:11.690

要添加到其他答案（显然是 GDB ......），[LLDB](http://lldb.llvm.org/)是 BSD 风格的许可，它更宽松。它是[LLVM 编译器基础结构](http://llvm.org/)的一部分。与 GDB 非常相似（参见[比较](http://lldb.llvm.org/lldb-gdb.html)）。

按照您的编辑：它还没有为 Windows 准备好，但正在努力，所以应该很快。

# r - 检查每一行是否有东西（行长> 1）

> ID：13149335
> 
> 赞同：-1
> 
> 时间：2012-10-30T23:59:23.670
> 
> 标签：r, loops, for-loop

基本上我有一个矩阵和行，我想在列表中附加一个“1”，否则附加一个“0”

代码如下：

```
is.there.A <- function(a,b,c,d,e) {

  library(combinat)
  x <- c(a,b,c,d,e)  
  matrix <- matrix(combn(x,3), ncol=3, byrow=T) 
  row <- nrow(matrix)
  list <- list()

  for (i in seq(row)) {

    if (matrix[i,] %in% "A") {c(list, "1")}

    else {c(list, "0")} 

    print(list)

    }

} 
```

但它不起作用，这会显示出来。

警告信息：

> 1: 在 if (matrix[i, ] %in% "A") { :
> 
> 条件的长度 > 1 并且只使用第一个元素

问题是如何克服这一点以实现目标

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T00:05:57.250

你的意思是测试`"A" %in% matrix[i,]`，而不是相反。但是，请注意

```
row <- nrow(matrix)
list <- list()
for (i in seq(row)) {
   if ("A" %in% matrix[i,]) {c(list, "1")}
   else {c(list, "0")}
} 
```

可以改写

```
rowSums(matrix == "A") > 0 
```

它返回一个逻辑向量 (TRUE/FALSE)，这是最适合您的函数的输出。但是，如果您确实需要一个 '1' 或 '0' 的列表，则可以将其包装如下：

```
as.list(ifelse(rowSums(matrix == "A") > 0, "1", "0")) 
```

另请注意，命名对象不是一个好主意，`matrix`因为它也是 R 中函数的名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T00:08:20.343

您可以通过使用避免显式循环`apply`

```
is.there.A <- function(a,b,s,d,e) {

  library(combinat)
  x <- c(a,b,s,d,e)  
  .matrix <- matrix(combn(x,3), ncol=3, byrow=T) 

  any_A <- apply(.matrix, 1, `%in%`, x = 'A')
  as.list(as.numeric(any_A))

} 
```

永远不要在 for 循环中增长对象，预先分配然后填充。

避免使用函数名称命名对象（例如`c`or`matrix`或`list`）

# jquery - 当 jqgrid 在 jquery 选项卡上时，内联编辑的奇怪行为

> ID：13149336
> 
> 赞同：1
> 
> 时间：2012-10-30T23:59:23.717
> 
> 标签：jquery, jqgrid, tabs, inline, editing

我的 jqgrid 使用图标来编辑、保存、取消实现内联编辑，它工作正常但是当我简单地将网格移动到 jquery 选项卡中时，相同的操作链接执行不同的 url，而不是我最近在 jquery 选项卡之外测试的 origianla。

这是代码，在此先感谢：

```
jQuery("#listPagos").jqGrid({
                url: '/FacturaProveedor/ListaPagos?facturaid=' + document.getElementById("FacturaProveedorId").value,
                datatype: 'json',
                mtype: 'GET',
                colNames: ['FacturaProveedorId', 'ID', 'Vence', 'Importe', 'Programado', 'Pago', 'ImportePagado', 'Saldo', ''],
                colModel: [
                    { name: 'FacturaProveedorId', index: 'FacturaProveedordeId', editable: true, width: 20, editoptions: { disabled: 'disabled' }, hidden: true },
                    { name: 'FacturaProveedorPagoId', index: 'ItemId', width: 20, editable: true, editoptions: { disabled: 'disabled' }, hidden: true },
                    { name: 'FechaVencimiento', index: 'NombreCorto', width: 70, editable: true, sorttype: 'date', formatter: 'date', formatoptions: { srcformat: 'd-m-Y', newformat: 'd-m-Y' }, align: 'center' },
                    { name: 'ImporteAPagar', index: 'Unidades', width: 50, editable: true },
                    { name: 'FechaProgramacion', index: 'Unidades', width: 70, editable: false, sorttype: 'date', formatter: 'date', formatoptions: { srcformat: 'd-m-Y', newformat: 'd-m-Y' }, align: 'center' },
                    { name: 'FechaPago', index: 'Unidades', width: 70, editable: false, sorttype: 'date', formatter: 'date', formatoptions: { srcformat: 'd-m-Y', newformat: 'd-m-Y' }, align: 'center' },                    
                    { name: 'ImportePagado', index: 'Unidades', width: 50, editable: false, hidden: true },
                    { name: 'Saldo', index: 'Unidades', width: 100, editable: false },
                    { name: 'act', index: 'act', width: 50, sortable: false },
                ],
                pager: jQuery('#pager'),
                rowNum: 10,
                rowList: [5, 10, 20, 50],
                sortname: 'Id',
                sortorder: "desc",
                viewrecords: true,
                gridComplete: function () {
                    var ids = jQuery("#listPagos").jqGrid('getDataIDs');
                    for (var i = 0; i < ids.length; i++) {
                        var cl = ids[i];
                        be = "<input  type='image' style='padding: 0 5px 0 5px;' src='/Content/img/pencil_color.gif' onclick=\"jQuery('#listPagos').editRow('" + cl + "');\"  />";
                        se = "<input  type='image' style='padding: 0 5px 0 5px;' src='/Content/img/disk_color.png' onclick=\"jQuery('#listPagos').saveRow('" + cl + "');\"  />";
                        ce = "<input  type='image' style='padding: 0 5px 0 5px;' src='/Content/img/cancel_color.png' value='C' onclick=\"jQuery('#listPagos').restoreRow('" + cl + "');\" />";
                        jQuery("#listPagos").jqGrid('setRowData', ids[i], { act: be + se + ce });
                    }
                },
                editurl: '/FacturaProveedor/ActualizaProgramacionPago',
                caption: '',
                loadonce: true,
                autowidth: true,
            }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T01:03:52.313

我发现问题不在于 jquery 选项卡，而是@Beginform{} 当 jqgrid 位于此（Beginform）动作图标内时，它假定表单的控制器动作而不是我在 jqgrid 中设置的 urlaction。

对不起我的英语不好。

# include - 包括文件 - 共享源和重复名称

> ID：13149338
> 
> 赞同：3
> 
> 时间：2012-10-30T23:59:33.077
> 
> 标签：include, c-preprocessor

我有一种情况，我正在使用两个具有重复头文件名的库。例如`timer.h`存在于两个库中。我认为对此的正常解决方案是明确指定包含中的目录，`#include <dir1/timer.h>`以便`#include <dir2/timer.h>`编译器知道我指定的是哪个目录。但是，我的问题是我正在使用的库之一不在我的项目的子目录中。它存在于更高层次的其他地方。那是...

*   根
    *   图书馆1
    *   项目
        *   项目文件夹
            *   图书馆2

这样做是为了让多个项目可以引用 Library1。这似乎是一个好主意。但是，既然我有 Library2 的名称冲突，它就会产生问题。另一个重要的细节是我经常使用两个不同的工作站。Library1 在这些工作站上的绝对位置不相同，两者之间的相对位置（相对于项目文件夹）也不相同。到目前为止，我一直在做的是将两个绝对位置添加到预处理器的搜索路径中。

无论如何，我会很感激你可能提供的任何指导。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T00:08:11.903

你在正确的轨道上`"dir1/timer.h"`和`"dir2/timer.h"`。但与其将`dir`其视为`"project1/timer.h"`. 现在，在您的 makefile 中，如果它不在一个公共位置，您将需要将其`project1`添加到您的搜索路径中。`include`

您的代码中不应该有相对路径（否`../file.h`）。它们应该相对于项目的基本目录（例如`#include <sys/socket.h>`或`#include <linux/sched.h>`）。然后由您的 makefile 来查找它们（这两个示例位于标准搜索路径中，因此它们将起作用）。对于您的情况，您可以`-I<path to project directory>`然后`#include "other_project/library.h"`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T00:35:39.400

我更喜欢在我的项目中包含特定版本的外部库的副本，并根据需要更新到较新的版本（但实际上并不更改项目中的外部库）。如果您只是参考每个人都使用的当前（更改）版本，那么您的项目可能会更改行为，甚至无需更改其代码。您的项目的发布还必须引用您在该时间点使用的任何版本的库才能完成。

如果你这样做，如果你想使用这种方法，相对路径总是相同的（比如“../ExternalLib”）。或者你可以按照戴夫的建议去做。

# ruby-on-rails-3 - Rails：我怎样才能写这个，所以如果它返回 nil 就不会失败？

> ID：13149342
> 
> 赞同：0
> 
> 时间：2012-10-30T23:59:54.200
> 
> 标签：ruby-on-rails-3

我只是不确定如何最好地编写它。干杯!

```
def get_prices(c)
  @print_prices = Billing.where(:name => c).first.attributes.select{ |i| i.match(/^print_/) }
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T00:02:18.857

一种方法：

```
def get_prices(c)
  billings = Billing.where(:name => c)
  @print_prices = billings.first.attributes.select{ |i| i.match(/^print_/) } unless billings.empty?
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T00:03:00.480

`Billing.where(:name => c).first`您应该存储并测试它的返回值。

# java - Java中的简单多线程

> ID：13149343
> 
> 赞同：1
> 
> 时间：2012-10-31T00:00:12.813
> 
> 标签：java, multithreading, concurrency

目前，我正在一个无线程模型上运行，该模型无法正常工作，因为在处理我正在处理的数据之前内存不足。我已经进行了所有可以优化代码的更改，但它仍然不够快。

显然，我应该继续使用线程模型。我想知道执行以下操作的最简单，最简单的方法是：

*   主线程将一些信息传递给工作人员
*   该工作人员执行了一些我将从主要方法中重构出来的工作
*   工人将消失，新工人将在需要时实例化

我从来没有使用过 java 线程，从我读过的内容来看，它看起来很复杂，即使我正在寻找的东西看起来很简单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T00:15:46.890

如果您有多个具有相同优先级的独立工作单元，最好的解决方案通常是某种工作队列，其中有限数量的线程（为优化性能而选择的数量）位于一个`while(true)`循环中，将工作单元从队列中取出并执行它们.

通常，最佳线程数将是处理器数 +/- 1，但在某些情况下，如果线程倾向于因磁盘 I/O 请求或诸如此类而停止，则更大的线程数将是最佳的。

但请记住，可能需要调整整个系统。例如，您可能需要更多磁盘臂，当然也可能需要更多 RAM。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T00:07:21.950

我会先通读[Java 并发](http://docs.oracle.com/javase/tutorial/essential/concurrency/)作为复习；）

特别是，我会花一些时间来了解[Executors API](http://docs.oracle.com/javase/tutorial/essential/concurrency/executors.html)，因为它可以完成您所描述的大部分工作，而无需大量处理许多锁的开销；）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T01:24:41.503

将内存消耗分配给多个线程不会改变整体内存消耗。从我读到的你的问题中，我想站出来告诉你：增加Java引擎的堆，这会有所帮助。看起来您必须优化 Java 启动参数而不是您的代码。如果我错了，那么您将不得不缓冲数据。到磁盘！不在同一内存模型中的线程。

# php - PHP中未定义的连接变量

> ID：13149344
> 
> 赞同：1
> 
> 时间：2012-10-31T00:00:13.080
> 
> 标签：php

我有一个php脚本如下：

```
function addPost(BlogPost $item, $tags) {
        $connection = mysql_connect('localhost', '***', '***') or die(mysql_error());
        mysql_select_db('jschaible1') or die(mysql_error());

        $queryString = "insert into BlogPost values ( null, '" . $item->Title . "', '" . $item->Body . "', " . "now());";

        $result = mysql_query($queryString) or die(mysql_error());

        $dbResult = mysql_query('select * from blogpost where Title = "' . $item->Title . '";') or die(mysql_error());
        while ($row = mysql_fetch_array($dbResult)) {
            $tableID = $row['BlogPostID'];
        }

        foreach($tags as $t) {
            $queryString = "insert ignore into Tag values('" . strtolower($t) . "');";
            mysql_query($queryString) or die(mysql_error());

            $queryString = "insert into blogposttag values (" . $tableID . ", '" . strtolower($t) . "');";
            mysql_query($queryString) or die(mysql_error());
        }

        echo $connection;
        mysql_close($connection) or die(mysql_error());
    } 
```

该函数的调用方式如下：

```
<?php
    session_start();

    $errors = '';

    if (!isset($_SESSION['dadfg6d5f6df54']))
        header('Location:admin.php');
    else {
        include('Classes.php');
        include('mySql.php');
        include('utils.php');

        if(isset($_POST['Submit'])) {
            if ($_POST['Title'] == '') {
                $errors = 'Post must have a title!';
            }
            else if ($_POST['PostBody'] == '') {
                $errors = 'Post must be something!';
            }
            else if (strlen($_POST['PostBody']) < 10) {
                $errors = "Write something substantial, c'mon!";
            }
            else if ($_POST['Tags'] == '') {
                $errors = "At least one tag must be entered";
            }
            else {
                $newPost = new BlogPost(NULL, sanitize($_POST['Title']), sanitize($_POST['PostBody']), NULL);

                $newPost->Title = addEmoticons($newPost->Title);
                $newPost->Body = addEmoticons($newPost->Body);

                $tags = str_replace(',', '', $_POST['Tags']);
                $tags = str_replace(';', '', $tags);
                $tags = explode(' ', $tags);

                error_reporting(E_ALL); ini_set('display_errors', 1);
                addPost($newPost, $tags) or die();

                $errors = 'Post added successfully';
            }
        }
    }
?> 
```

当它到达 mysql_close() 时，页面停止执行，我得到一个空白页面。这真的让我很沮丧，我完全不明白为什么会这样，尤其是看到 PREVIOUS 行上的回声如何输出“资源 id#6”。我没有收到错误消息，只是一个空白页！请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T00:07:05.503

您的函数没有返回值。因此，它返回`NULL`评估[为“假”值](http://php.net/manual/en/language.types.boolean.php)。由于您通过`or die()`调用跟踪它，因此错误评估会触发`or die()`并终止您的脚本。

```
// Don't do this:
addPost($newPost, $tags) or die();

// Do this:
addPost($newPost, $tags); 
```

在你的函数结束时，你可以`return TRUE`，但除非你希望根据你添加的成功或失败返回一个值，否则完全没有必要。你拥有它的方式，`die()`只会造成不应有的伤害。由于函数中所有潜在的失败点都将在出错时终止脚本，因此返回`TRUE`. 只需`die()`在函数调用之后删除。

# javascript - 在 Firefox 中处理事件

> ID：13149346
> 
> 赞同：0
> 
> 时间：2012-10-31T00:00:55.947
> 
> 标签：javascript, jquery, firefox

我有以下在 Chrome 22 中运行良好但在 Firefox 16 中给我一个错误：

```
$('#search-query').on('keyup',function(){
  e=window.event;
  if(e.keyCode===13){
    alert('that was a return');
  } 
```

我将如何以跨浏览器的方式进行这项工作？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T00:01:28.910

使用 jQuery 包装器事件。火狐不支持`window.event`

```
$('#search-query').on('keyup',function(e){

  if(e.keyCode===13){
    alert('that was a return');
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T00:09:17.313

Firefox 不支持`window.event` 试试这个

```
$('#search-query').on('keyup',function(e){
  var evt = e || window.event;
  var keyPressed = evt.which || evt.keyCode;
  if(keyPressed ===13){
    alert('that was a return');
  }
}); 
```

# vba - 将 Outlook 电子邮件回复作为任务收集并填充到 Excel 电子表格中

> ID：13149347
> 
> 赞同：2
> 
> 时间：2012-10-31T00:00:59.213
> 
> 标签：vba, excel, outlook, task

将不胜感激任何帮助/建议

我对 VBA 和宏很陌生。我从事行政工作，我有很多相互关联的任务，我想加快这个过程。

我收到一封来自经理的批准电子邮件，告诉我新员工在开始工作时需要/批准哪些项目。然后，我需要为我需要记住的每个项目创建一个任务/提醒，以便为该员工组织并将所有响应传输到共享驱动器上的跟踪电子表格，以便我们可以跟踪新员工的应用程序/项目。

如果我可以设置一个规则，那么当我收到其中一封电子邮件时，会自动为每个带有“是”的项目创建一个任务，而忽略“否”和所有“是/否”响应填充到 excel 表中的下一个可用单行中。更好的是，当我将 Outlook 中的任务标记为“已完成”时，它会将这些信息转移到 Excel 工作表中——这可能是一厢情愿的想法。

例如，电子邮件可能如下所示：

```
Employee Name: John Doe
Line Manager: Jane Smith
Start Date: 1/1/2012 
Item 1: Yes
Item 2: No
Item 3: Yes
Item 4: Yes 
```

并且 excel 将为上述每一项提供一列。

再次 - 非常感谢任何帮助/建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T08:35:40.627

[该站点](http://www.itjungle.com/fhg/fhg100610-story01.html)确实有助于处理传入邮件的自动化，我强烈建议您阅读有关让 Outlook VBA 在那里工作的提示。

此代码略微改编自该页面。以 TODO 开头的注释行仍然需要填写，但这应该让您开始走上正轨。

```
Option Explicit
'
' Place this code in the "ThisOutlookSession" class module
'
' The code will:
'
' Monitor the Inbox
' Check for the existence of a specific kind of e-mail
' Move the processed e-mail to a "processed" folder
'
Private WithEvents olInboxItems As Items

'
' Application_Startup() is a reserved function that will automatically
' be called when Outlook starts.
'
Private Sub Application_Startup()
    Set olInboxItems = Session.GetDefaultFolder(olFolderInbox).Items
End Sub

'
' This event is fired when the Inbox receives a new message
' (it can also be fired when manually moving a message from
'  another folder back to the inbox)
'
Private Sub olInboxItems_ItemAdd(ByVal Item As Object)

'    On Error Resume Next (commented out for ease of debugging)

    Dim olMailItem As MailItem
    Dim strAttachmentName As String
    Dim Employee() As Variant
    Dim v() As String
    Dim i As Long
    Dim NumItems As Long
    Dim line As Variant
    '
    ' Only inspect mail items
    ' Ignore appointments, meetings, tasks, etc.
    '
    If TypeOf Item Is MailItem Then
        Set olMailItem = Item
        '
        ' Test for specific subject line
        '
        If InStr(olMailItem.Subject, "My Subject Line") > 0 Then
            ' Get an array of lines in the body of the email
            v = Split(olMailItem.Body, vbCrLf) 

            ' TODO Parse the array for the data required to populate your Excel file
            ' TODO Open (or activate) the Excel file
            ' TODO Add the data to the Excel file

            ' Once complete, move mail item to OK/Errors folder
            ' This code assumes the folders already exist
            ' and are subfolders of the Inbox folder
            '
            ' In older versions of Outlook, olDestFolder
            ' should be declared as type MAPIFolder
            ' instead of Folder
            '
            Dim olDestFolder As Folder, strFolderName As String
            If Err.Number Then
                strFolderName = "Processed_Errors"
            Else
                strFolderName = "Processed_OK"
            End If
            '
            ' Display Message
            '
            Set olDestFolder = _
                Session.GetDefaultFolder(olFolderInbox).Folders(strFolderName)
            If Err.Number Then
                olMailItem.Move olDestFolder
                MsgBox Err.Description + strFolderName + vbCrLf + _
                       "Check the error folder", _
                       vbCritical, "Automated e-Mail processing unsuccessful"
            Else
                olMailItem.Move olDestFolder
                MsgBox "Message has been processed and placed in " + strFolderName, _
                        vbInformation, "Automated e-Mail processing successful"
            End If
        End If
    End If
    Set Item = Nothing
    Set olMailItem = Nothing
End Sub 
```

# javascript - 谷歌地图通过主干javascript在div标签中返回但不显示

> ID：13149349
> 
> 赞同：3
> 
> 时间：2012-10-31T00:01:06.117
> 
> 标签：javascript, google-maps, backbone.js, rendering

我已经开始使用地理定位，我可以获得坐标等。我想在地图中显示它，但是当我将地图返回到 div 时，什么都没有显示。现在我查看了 div，地图正在返回，但不可见。这是有问题的 div

请注意，这似乎只是一个小地图的链接

```
 <a style="position: static; overflow-x: visible; overflow-y: visible; float: none;                 display:     inline; " target="_blank" href="http://maps.google.com/maps?ll=51.263519,-7.124185&amp;z=21&amp;t=m&amp;hl=en-US" title="Click to see this area on Google Maps"><div style="width: 62px; height: 24px; cursor: pointer; "><img style="position: absolute; left: 0px; top: 0px; -webkit-user-select: none; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; width: 62px; height: 24px; " src="http://maps.gstatic.com/mapfiles/google_white.png" draggable="false"></div></a> 
```

这就是我正在做的，Html Home

### 你的地点

```
<div data-role="content" id="location1">
<div  id="map" style="width:100%; height:100%"></div> 
```

我的模型如下

```
 bb.model.Map = Backbone.Model.extend({
  defaults: {
    center: new google.maps.LatLng(51.26351898,-6.14462727),
    zoom: 20,
    mapTypeId: google.maps.MapTypeId.ROADMAP
  }
}); 
```

我的看法如下

```
 bb.view.Location = Backbone.View.extend(_.extend({  

   id: 'map',
   initialize: function(){
     this.map = new google.maps.Map(this.el, this.model.attributes);
 this.render();
   },
 render: function(){
 //    $('#map').replaceWith(this.el);
   $('#map').replaceWith(this.el);
      $('#location-page').page();

   }, 
```

}))

我也在使用以下脚本。

```
 <script type="text/javascript"  src="http://maps.google.com/maps/api/js?sensor=false"></script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T01:27:25.500

你在这里有各种各样的问题，所以我们会从上到下。

当你这样说时：

```
<div data-role="content" id="location1">
    <div  id="map" style="width:100%; height:100%"></div>
</div> 
```

上的 100% 宽度和高度值是`#map`指父元素，所以你说

> 制作`#map`相同的大小`#location1`

默认情况下， a `<div>`，像所有块元素一样，将与其父元素一样宽（假设没有边距、填充，......）并且足够高以包含其内容。如果您没有任何强制`#location1`为特定大小的 CSS，那么它将与页面（或它拥有的任何父级）一样宽，并且高度为零。这意味着它`#map`也将是零像素高。所以你需要确保`#location1`有一个指定的高度。

当您在视图定义中这样说时：

```
id: 'map', 
```

您只是告诉 Backbone 设置[它为您的视图创建](http://backbonejs.org/#View-el)`id="map"`的：[`<div>`](http://backbonejs.org/#View-el)

> **埃尔** `view.el`
> 
> [...]`this.el`是从视图的`tagName`、`className`和属性（如果指定`id`）创建的。`attributes`如果不是，`el`则为空`div`。

说`id: 'map'`不会`#map`从 DOM 中获取用作 view's `el`，它只是让您拥有`<div id="map"></div>`as your view's `el`。您可能希望`el`在视图定义中指定：

```
el: '#map' 
```

您似乎正在尝试`el`使用[`replaceWith`](http://api.jquery.com/replaceWith/). 这应该工作，或多或少，但你仍然将地图绑定到零高度`<div>`，然后将零高度`<div>`放入 DOM。Short 很好，但你看不到 0px 高的东西。

另外，你不需要`Backbone.View.extend(_.extend({ ... }));`，你只需要`Backbone.View.extend({ ... });`。

假设您有一些东西可以给出`#location1`高度，那么像这样的视图：

```
Backbone.View.extend({
    el: '#map',
    initialize: function() {
        this.map = new google.maps.Map(
            this.el,
            this.model.toJSON()
        );
        this.render();
    },
    render: function() {
        return this; // This is standard practice.
    }
}); 
```

应该让事情动起来。

演示：http: [//jsfiddle.net/ambiguous/ue4zL/1/](http://jsfiddle.net/ambiguous/ue4zL/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T00:05:33.450

确保 this.el 具有非零高度。你正在摧毁#map 并用全新的东西代替它......

# java - 我的 Android XML 布局左侧的图像无法正确显示。我在这里做错了什么？

> ID：13149353
> 
> 赞同：0
> 
> 时间：2012-10-31T00:01:38.963
> 
> 标签：java, android, eclipse, android-layout, android-xml

这是看起来的样子，这是我的 XML 代码。

有人可以为我发布固定的 XML 布局代码并解释我做错了什么吗？我希望左侧的 - 符号一直位于左侧，就像右侧的 > 符号一样。黑色文本应位于 - 符号的右侧。

![在此处输入图像描述](../Images/29fd556fd9691c0417b226313eddbe93.png)

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="fill_parent"
  android:layout_height="wrap_content">

  <TableLayout
        android:id="@+id/tableLayout1"
        android:layout_width="fill_parent"
        android:layout_height="44dip"
        android:stretchColumns="0"
        android:divider="@null"       
         >

        <TableRow
            android:id="@+id/tableRow1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:background="@drawable/infocells"
            android:divider="@null"  >

            <ImageView
                android:id="@+id/imgDelete"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:src="@drawable/minus" />

            <TextView
                android:id="@+id/txtKey"
                android:text="Some text"
                android:textSize="16dip"
                android:textStyle="bold"
                android:layout_marginLeft="8dip"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:gravity="left|center_vertical"
                android:layout_weight="1.0"
                android:layout_marginTop="11dp"
                android:layout_marginBottom="6dp"
                android:textColor="@color/black"
            />

            <TextView
                android:id="@+id/txtValue"
                android:text="Some text"
                android:textSize="16dip"
                android:layout_marginRight="8dip"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:gravity="right|center_vertical"
                android:layout_weight="1.0"
                android:layout_marginTop="11dp"
                android:layout_marginBottom="6dp"
                android:textColor="@color/darkblue"
            />

            <ImageView
                android:id="@+id/imageView1"
                android:layout_marginTop="7dp"
                android:layout_marginRight="7dp"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:src="@drawable/arrow" />

        </TableRow>

        </TableLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T04:48:16.443

你为什么不利用和`RelativeLayout`使用它的各种属性，你可以根据你的其他观点对齐你的`TextView`和布局`ImageView``android:layout_alignParentLeft="true"``android:layout_alignParentLeft="true"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T00:58:43.330

在您的中，您可以使用[translationX](http://developer.android.com/reference/android/view/View.html#attr_android%3atranslationX)`ImageView`设置您的 X 位置，如下所示：

```
<ImageView
   android:id="@+id/imgDelete"
   android:layout_width="wrap_content"
   android:layout_height="wrap_content"
   android:translationX="-25"
   android:src="@drawable/minus" /> 
```

去尝试一下。这只是一个快速的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T07:27:55.543

这是一个关于如何做到这一点的想法。试试看。

```
<RelativeLayout>
           <ImageView
                     android:id="@+id/imgDelete"
                     android:layout_alignParentLeft="true" />

           <TextView
                    android:id="@+id/txtKey"
                    android:layout_toRightOf="@+id/imgDelete" />

           <TextView
                    android:id="@+id/txtValue"
                    android:layout_toRightOf="@+id/txtKey" />

           <ImageView
                    android:id="@+id/imageView1"
                    android:layout_alignParentRight="true" />

    </RelativeLayout> 
```

# vba - 如何以编程方式单击另一个工作簿中的 ActiveX 按钮？

> ID：13149355
> 
> 赞同：0
> 
> 时间：2012-10-31T00:01:50.983
> 
> 标签：vba, excel, activex

我有一个工作簿`Wbk1`，其中工作表有一个 ActiveX 按钮。我想从另一个工作簿运行按钮的关联 Sub `Wbk2`，. 仅仅将 Sub 的代码复制到其中是不切实际的，`Wbk2`因为它又会从`Wbk1`. 我尝试了以下方法：

```
Sub pushButton()

Dim obj As OLEObject
Dim btn As MSForms.CommandButton

For Each obj In Wkb1.Sheets("testSheet").OLEObjects
  If TypeOf obj.Object Is MSForms.CommandButton Then
    set btn=obj.Object
    debug.print btn.Caption 'used to test whether or not For loop is picking up button
    obj.Activate
    SendKeys " "
  End If
Next

End Sub 
```

这不仅是一个不雅的`SendKeys()`hack，而且行不通；按钮获得焦点，但没有被按下。我知道 For 循环正确地遍历对象，包括 CommandButton，因为我可以获取按钮的标题。我如何点击这个按钮（从而运行它的私有子）`Wbk2`？

编辑：有问题的实际文件名格式为 123A_1.0-2.0.xlsm。我认为这些时期对下面评论和回复中发布的解决方案造成了一些麻烦，因为当我删除这些时期时，这些技术是成功的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T00:26:03.193

刚刚怎么样

```
Application.Run (wb1.Name & "!MacroName") 
```

# php - xml 到 php 数组的问题

> ID：13149356
> 
> 赞同：1
> 
> 时间：2012-10-31T00:01:58.313
> 
> 标签：php, xml

我的 php 简单 xml 对象有问题。

我的日志中有以下 xml 数据

```
SimpleXMLElement Object
(
    [@attributes] => Array
        (
            [title] => test
            [scanner] => Data
            [id] => WordData
            [position] => 1800
            [error] => false
            [num] => 6
        )

    [subpod] => Array
        (
            [0] => SimpleXMLElement Object
                (
                    [@attributes] => Array
                        (
                            [title] => Surnames
                        )

                    [plaintext] => Common (US population: 650 people, white: 63% | black: 35%)
                    [img] => SimpleXMLElement Object
                        (
                            [@attributes] => Array
                                (

                                    [alt] => Common (US population: 650 people, white: 63% | black: 35%)
                                    [title] => Common (US population: 650 people, white: 63% | black: 35%)
                                    [width] => 349
                                    [height] => 18
                                )

                        )

                )

            [1] => SimpleXMLElement Object
                (
                    [@attributes] => Array
                        (
                            [title] => Cities
                        )

                    [plaintext] => Littleton Common (Massachusetts, 2789 people)
                    [img] => SimpleXMLElement Object
                        (
                            [@attributes] => Array
                                (

                                    [alt] => Littleton Common (Massachusetts, 2789 people)
                                    [title] => Littleton Common (Massachusetts, 2789 people)
                                    [width] => 287
                                    [height] => 18
                                )

                        )

                )

            [2] => SimpleXMLElement Object
                (
                    [@attributes] => Array
                        (
                            [title] => Buildings
                        )

                    [plaintext] => Rotunda on Woolwich Common (London, Greater London)
                    [img] => SimpleXMLElement Object
                        (
                            [@attributes] => Array
                                (

                                    [alt] => Rotunda on Woolwich Common (London, Greater London)
                                    [title] => Rotunda on Woolwich Common (London, Greater London)
                                    [width] => 356
                                    [height] => 18
                                )

                        )

                )
              .....more simpleXmlElement object
          )
) 
```

我的 php 变量`$xmlObj = SimpleXMLElement Object`但是当我有以下

```
if (is_array($xmlObj->subpod)){
    echo 'is array';    
}else {
    echo 'not array';
} 
```

输出总是“不是数组”，我希望我的代码回显“是数组”

我认为`$xmlObj->subpod`是一个数组。当我测试`$xmlObj->subpod[0]->plaintext`时，它实际上会返回字符串。我不知道如何解决这个问题。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T00:19:46.977

在`SimpleXMLElement Object`Everything is 中`SimpleXMLElement Object`，print_r 和 var_dump 有时是关于数组的——它们是可遍历的对象，但您可以对它们执行大多数操作，就好像它们是数组一样。如果您坚持使用纯数组，则可以将此节点转换为数组：

```
$subpod = (array)$xmlObj->subpod; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T00:08:03.183

如果你这样做`var_dump($xmlObj->subpod)`，你会发现它仍然是一个`SimpleXMLElement`对象。但是，它仍然可以像数组一样被调用。（请参阅[此示例](http://www.php.net/manual/en/simplexml.examples-basic.php#example-5152)后面的注释，它暗示该类实现了[ArrayAccess](http://php.net/manual/en/class.arrayaccess.php)，即使类文档没有。）

检查此结构的正确方法是使用[SimpleXMLElement::count()](http://www.php.net/manual/en/simplexmlelement.count.php)：

```
if ($xmlObj->subpod->count() > 0) { ... } 
```

**编辑**：您问题中的输出可能来自`print_r`，这有时在其输出中是无用的（例如，告诉您某些东西不是数组）。尝试`var_dump`改用，因为它通常对调试更有用。这里唯一需要注意的是，您看不到 SimpleXMLElement 对象的整个嵌套对象结构！

# ms-word - 用于将 pdf 转换为 word 的 asp.net 网络应用程序

> ID：13149363
> 
> 赞同：0
> 
> 时间：2012-10-31T00:02:57.333
> 
> 标签：ms-word, pdf-conversion

是否有任何清晰和适当的过程可以将 pdf 文件转换为包含 asp.net 网络应用程序中所有格式和图像的 word 文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T15:17:53.537

最好的方法是使用 OCR。它将识别 PDF 文件中的文本和图像，然后您可以将其保存在 DOC 文件中。我知道一个名为 Leadtools 的第三方工具包应该可以帮助您满足您的要求，因为它支持 ASP.NET 环境。您可以查看他们的[在线 OCR 演示](http://demo.leadtools.com/OnlineRecognitionDemo) 此外，您可以查看他们的网站以获取更多信息，或联系他们的支持团队。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T07:16:42.997

PDF 是一种演示格式，其中所有内容都按绝对位置放置。没有段落和其他结构化元素（除非它是带标签的 PDF）。从技术上讲，您可以以任何顺序逐个字符地输出每个单词，但在视觉上它看起来像普通文本。因此，要正确转换为单词，需要进行内容识别或某种 OCR（例如 ABBYY FineReader）

市场上有一些付费组件允许进行文本提取，还有一些允许将页面转换为图像（显然，这不是转换为单词的理想方法）。

# asp.net - CustomValidation 未在第二次单击时触发

> ID：13149366
> 
> 赞同：0
> 
> 时间：2012-10-31T00:03:32.463
> 
> 标签：asp.net, validation, customvalidator

我在gridview中有文本框和一个按钮。单击按钮时，文本框具有验证。但是，当第二次单击按钮时，验证事件永远不会被触发。

```
<asp:GridView ID="ChapterGridView" 
               EnableSortingAndPagingCallbacks="false" 
               AllowSorting="false" 
               AllowPaging="false" 
               runat="server"                            
               AutoGenerateColumns="False" 
               CellPadding="2" 
               ForeColor="#333333"
               GridLines="None"  
               Width="780px" 
               OnRowCommand="ChapterGridView_OnRowCommand" 
               ShowFooter="False" 
               AutoGenerateDeleteButton="true"
               AutoGenerateEditButton="true"
               onrowediting="ChapterGridView_RowEditing"
               onrowdeleting="ChapterGridView_RowDeleting" 
               onrowcancelingedit="ChapterGridView_RowCancelingEdit" 
               onrowupdating="ChapterGridView_RowUpdating"
               onrowupdated="ChapterGridView_RowUpdated"
               DataKeyNames="ChapterId"
               ValidationGroup="ChapterValidation"
               Visible="true">
            <FooterStyle BackColor="#eeeeee" Font-Bold="True" ForeColor="White" />
            <Columns>
                <asp:TemplateField HeaderText="*End Page" HeaderStyle-HorizontalAlign="Left">
                    <ItemTemplate><%# Eval("EndPage")%></ItemTemplate>
                    <EditItemTemplate>
                        <asp:TextBox ID="EndPage" runat="Server" Text='<%# Eval("EndPage") %>'></asp:TextBox>
                        <asp:CustomValidator ID="TotalPagesValidator" ValidationGroup="ChapterValidation" OnServerValidate="TotalPages_ServerValidate" EnableClientScript="false" ErrorMessage="Number of pages in chapter are greater than number of pages in entire publication." Display="None" ControlToValidate="EndPage" runat="server" />
                    </EditItemTemplate>
                    <FooterTemplate>
                        <asp:TextBox ID="EndPage" runat="Server"></asp:TextBox>
                        <asp:CustomValidator ID="TotalPagesValidator2" ValidationGroup="ChapterValidation" OnServerValidate="TotalPages_ServerValidate" EnableClientScript="false" ErrorMessage="Number of pages in chapter are greater than number of pages in entire publication." Display="None" ControlToValidate="EndPage" runat="server" />

                        <asp:Button ID="btnInsert" runat="Server" Text="Insert" CommandName="Insert" UseSubmitBehavior="false" ValidationGroup="ChapterValidation" /></span>
                    </FooterTemplate>
                </asp:TemplateField>
            </Columns>
        </asp:GridView> 
```

编辑的相同验证按预期工作。但不适用于“插入”按钮。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T02:21:38.230

1：你是否设置了断点以确保有回发？是否完全调用了服务器端验证？

2：您可以尝试将插入的验证组更改为编辑以外的其他内容。

**编辑**将 ValidatorCallOut 与 CustomValidator 与 ServerSide Validation 一起使用存在问题。

[http://forums.asp.net/t/1054676.aspx](http://forums.asp.net/t/1054676.aspx)

[http://programminginhell.wordpress.com/2008/08/03/hello-world/](http://programminginhell.wordpress.com/2008/08/03/hello-world/)

这是在 jquery 对话框中显示错误的另一种方式：[http ://weblogs.asp.net/gurusakar/archive/2011/03/28/part-3-showing-asp-net-server-side-messages-in-a-自定义对话框服务器端与asp-net-ajax.aspx](http://weblogs.asp.net/gurusarkar/archive/2011/03/28/part-3-showing-asp-net-server-side-messages-in-a-custom-dialog-server-side-with-asp-net-ajax.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T23:01:15.647

@TrekStir - 感谢您为我指明正确的方向。

问题是有代码在添加一行后使页脚不可见。由于某种原因导致验证代码不触发。我想出了一种在不将页脚设置为不可见的情况下实现功能的方法，这解决了问题。

# sql - 查询未正确减去

> ID：13149369
> 
> 赞同：0
> 
> 时间：2012-10-31T00:03:39.737
> 
> 标签：sql, oracle10g

我有这两张表：

```
SQL> SELECT * FROM TAB_A;
MYDATE        P4         D1      D2      P5      P6
--------- ---------- ---------- ----------- ----------- -----------
30-OCT-12    949,324  4,437,654  10,203,116  25,303,632  13,900,078

SQL> SELECT * FROM TAB_B;
MYDATE        P4         D1      D2      P5      P6
--------- ---------- ---------- ----------- ----------- -----------
30-OCT-12    937,796  4,388,477  10,091,811  25,028,402  13,755,882 
```

我需要减去它们各自的列并将结果存储到第三个表中，如下所示：

```
SQL> INSERT INTO TAB_C (MYDATE, P4) SELECT SYSDATE,A.P4-B.P4 FROM  TAB_A A,TAB_B B WHERE A.MYDATE=B.MYDATE;

SQL> SELECT * FROM TAB_C;
MYDATE        P4         D1      D2      P5      P6
--------- ---------- ---------- ----------- ----------- -----------
30-OCT-12     926,268 
```

结果是错误的。基础数学：`949324-937796=11528`. 数值存储为数字数据类型。我在这里想念什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T04:59:06.430

尝试这个：

```
INSERT INTO TAB_C (MYDATE, P4)
VALUES (SYSDATE, SELECT (A.P4-B.P4) FROM  TAB_A A, TAB_B B WHERE A.MYDATE=B.MYDATE) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T00:06:46.743

```
SELECT SYSDATE ,A.P4, B.P4, A.P4-B.P4 
FROM  TAB_A A,TAB_B B 
WHERE A.MYDATE=B.MYDATE 
```

确保 p4 值是您所期望的...

# javascript - 在 iOS 6 上隐藏 Safari 的地址栏

> ID：13149371
> 
> 赞同：1
> 
> 时间：2012-10-31T00:04:03.490
> 
> 标签：javascript, safari, ios6, hide, address-bar

我正在尝试隐藏网页的地址栏。在 Iphone 4 及更低版本上，它可以使用

window.scrollTo(0,1);

和元标签。但是对于 IOS 6，这些似乎不起作用。我在 stackoverflow 中检查了其他类似的问题，但找不到有效的解决方案。有没有人遇到过类似的问题？如果是，除了将站点作为 Web 应用程序添加到主屏幕然后从那里启动之外，还有其他解决方案吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T22:24:55.187

玩弄脚本后，我注意到以下内容：每当我重新加载页面时，地址栏都会隐藏。因此，作为解决此问题的方法，我触发了 reload 事件（通过 resize 函数）并在 resize 函数中执行 window.scroll(0,1) 。

我有一个功能

```
var hideAddressBar = function() {
   if(document.documentElement.scrollHeight<window.outerHeight/window.devicePixelRatio)
   document.documentElement.style.height=(window.outerHeight/window.devicePixelRatio)+'px';
   setTimeout(function() {
       window.scrollTo(1,1)
   }, 0);

   if(navigator.userAgent.match(/Android|iPhone/gi)){
      window.scrollTo(0,1);
   }
} 
```

我最初只在 Onload 事件上调用此函数。Tis 适用于 ios 5，但不适用于 ios6。我意识到在我的脚本中，在渲染页面后调用了一个调整大小的函数。所以我在调整大小结束时调用了 hideaddressbar 函数。因此，如果在呈现页面后您是否要重新调整大小或重新加载，您可能需要检查您的脚本？如果是这样，则在重新加载完成后调用 hideAddressBar。我希望这能解决你的问题。

# php - PHP区分图像url和带有该图像的页面的url

> ID：13149373
> 
> 赞同：1
> 
> 时间：2012-10-31T00:04:07.593
> 
> 标签：php, image, dom

我有一个脚本，可以从用户提供的 URL 中查找图像。

所以对于输入字符串：“http://www.google.com/”，我使用类似

```
$html = file_get_html ( $url );
if ($html->find ( 'img' )) {....} 
```

它将结果显示为“http://www.google.com/images/srpr/logo3w.png”。

但是如果用户输入一个字符串“http://www.google.com/images/srpr/logo3w.png”。没有 img 标签。URL 有效，但代码失败。这种情况如何包含在代码中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T00:09:25.990

最好的方法是[执行 HEAD 请求](http://php.net/manual/en/function.http-head.php)并检查内容类型以查看 URL 是否对应于图像。如果是图像，则对它做任何你想做的事情，但如果它是 HTML 页面，则使用你的其他代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T00:09:36.303

您可以使用 curl 从服务器获取内容类型。然后，如果它是图像 mime 类型，您可以直接使用它而不是解析 html。

[使用 cURL 和 php 获取外部文件的 mime 类型](https://stackoverflow.com/questions/2610713/get-mime-type-of-external-file-using-curl-and-php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T00:13:12.460

根据您要对图像执行的操作，我将使用[file_get_contents](http://php.net/manual/en/function.file-get-contents.php)获取页面内容，然后使用[imagecreatefromstring](http://php.net/manual/en/function.imagecreatefromstring.php)将其转换为 gd 图像资源。如果无法将其转换为图像，则返回 false，因此您可以使用 str_get_html 解析 html（假设您使用的是[http://simplehtmldom.sourceforge.net/](http://simplehtmldom.sourceforge.net/)）

# javascript - 在引导程序中禁用输入。如何将其应用于不同的 TAG？

> ID：13149376
> 
> 赞同：8
> 
> 时间：2012-10-31T00:04:28.610
> 
> 标签：javascript, jquery, css, twitter-bootstrap, handsontable

通过`disabled`在输入上使用属性可以防止用户输入并触发稍微不同的外观。
这是演示[http://jsfiddle.net/D2RLR/3023/](http://jsfiddle.net/D2RLR/3023/)

假设我想将相同的样式应用于不同的 TAG，例如表格。
事实上，我正在使用`handsontable`生成一个`Excel-like data grid editor`.
我如何`disabled attribute`在以下情况下申请（像表格一样的标签）？

这是使用`handsontable`和`bootstrap` [http://jsfiddle.net/D2RLR/3025/的演示](http://jsfiddle.net/D2RLR/3025/)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-31T00:38:08.067

您不能应用 Bootstrap 的现有`input[disabled]`样式，但可以添加完全模仿样式的新 CSS。

例如：

```
#exampleGrid td {
    cursor: not-allowed;
    background-color: #EEE;
    color: #9E9999;
} 
```

显然这不包括您的只读逻辑，并且[您的小提琴看起来有点奇怪](http://jsfiddle.net/fPmWP/)（因为列和行标题是相同的颜色），但这就是它的要点。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-31T00:11:55.690

在这里检查：

[http://handsontable.com/demo/conditional.html](http://handsontable.com/demo/conditional.html)

有`.readOnly`细胞属性 - 使用它！

HTML 输入也有`readonly`属性，不仅仅是`disabled`属性，它们的行为之间存在一些相当大的差异。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-17T19:05:13.407

也许这可以帮助...更改单元格的外观，您可以对其进行编辑。

**HTML**

```
<table class="editableTable">
    <thead>
        <tr>
            <th>Code</th>
            <th>Name</th>
            <th>E-mail</th>
            <th>Telephone</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>001</td>
            <td>João Carlos</td>
            <td>joca@email.com</td>
            <td>(21) 9999-8888</td>
        </tr>
        <tr>
            <td>002</td>
            <td>Maria Silva</td>
            <td>mariasilva@mail.com</td>
            <td>(81) 8787-8686</td>
        </tr>
        <tr>
            <td>003</td>
            <td>José Pedro</td>
            <td>zepedro@meuemail.com</td>
            <td>(84) 3232-3232</td>
        </tr>
    </tbody>
</table> 
```

**CSS**

```
* {
    font-family: Consolas;
}

.editableTable {
    border: solid 1px;
    width: 100%
}

.editableTable td {
    border: solid 1px;
}

.editableTable .editingCell {
    padding: 0;
}

.editableTable .editingCell input[type=text] {
    width: 100%;
    border: 0;
    background-color: rgb(255,253,210);
} 
```

**JS**

```
$(function () {

    $("td").dblclick(function () {
        var originalContent = $(this).text();

        $(this).addClass("editingCell");
        $(this).html("<input type='text' value='" + originalContent + "' />");
        $(this).children().first().focus();

        $(this).children().first().keypress(function (e) {
            if (e.which == 13) {
                var newContent = $(this).val();
                $(this).parent().text(newContent);
                $(this).parent().removeClass("editingCell");
            }
        });

        $(this).children().first().blur(function(){
            $(this).parent().text(originalContent);
            $(this).parent().removeClass("editingCell");
        });
    });

}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T00:22:18.580

Boostrap 仅根据其禁用属性对输入进行样式设置，例如：

```
input[disabled], select[disabled], textarea[disabled], input[readonly], select[readonly], textarea[readonly] {
    background-color: #EEEEEE;
    cursor: not-allowed;
} 
```

所以你将无法使用引导程序来做到这一点，因为表没有这样的属性。

您应该使用各种插件或滚动您自己的插件。

# ipad - iPad 控制台警告消息：“收到未指定的 GSEvent .....”

> ID：13149380
> 
> 赞同：1
> 
> 时间：2012-10-31T00:04:46.693
> 
> 标签：ipad, cocoa-touch, warnings

我写了一个简单的多项选择测验应用程序。查看 iPad 上的控制台（模拟器上不会发生错误）我得到减弱的“收到未指定为路由到最前面的 GSEvent（类型 X），转发到系统应用程序”，其中 X 为 1、2或 6。

有人知道这个警告是什么意思吗？

涉及很多代码，但我可以根据可能重要的内容发布位。该应用程序基本上是一些涉及导航堆栈的屏幕转换，以及一些根据正确/错误答案播放不同声音的按钮。我找不到导致警告的原因 - 它似乎与任何用户交互都不对应。

我意识到这有点模糊，但如果有人能指出我大致的方向......

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T00:07:49.373

忽略这个噪音。GSEvent 是一个私有的 CoreFoundation 类，您可能不必担心它的作用。iOS 中存在一些不一致（如果您在内核中关闭详细启动，甚至会在启动期间显示*错误*），可以“安全地”忽略这些不一致 - 最多向 Apple 提交错误报告，但实际上，不要打扰。

# javascript - Ruby on Rails：使用 JavaScript 设计身份验证

> ID：13149384
> 
> 赞同：0
> 
> 时间：2012-10-31T00:05:41.310
> 
> 标签：javascript, ruby-on-rails-3, authentication, devise

在我的 RoR 项目中，用户可以将 JavaScript 链接拖放到浏览器的书签管理器/栏。

JavaScript 链接调用另一个 JavaScript 文件，例如`LoadUserData.js`.

我正在使用设计进行身份验证。

我的问题是：当用户点击书签时：

1.  如果用户已登录，将加载用户数据；
2.  否则，书签会将用户重定向到登录页面。

如何实施？

彼得

# ruby - 为什么文件对象在 Ruby 中关闭后仍然存在？

> ID：13149394
> 
> 赞同：0
> 
> 时间：2012-10-31T00:06:52.323
> 
> 标签：ruby, irb

对象关闭后是否还在内存中？如果是这样，那是因为垃圾收集还没有开始吗？看起来它只是被标记为已删除，而不是实际上已从内存中消失。这是在 IRB 中制作的，如果这可能会影响它的话。

提前致谢！

```
1.9.3p125 :001 > f = File.open("myfile.txt", "r")
=> #<File:myfile.txt>     

1.9.3p125 :002 > f
=> #<File:myfile.txt>

1.9.3p125 :002 > f.size
 => 122 

1.9.3p125 :003 > f.close
 => nil 

1.9.3p125 :004 > f
 => #<File:myfile.txt (closed)> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T00:10:22.633

关闭文件后，该*对象*仍存在于内存中。你的变量`f`持有对它的引用，所以它还不能消失。就像任何其他对象一样，您仍然可以访问它，直到所有对它的引用都消失了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T00:20:35.963

`f`是对类实例的引用`File`。只要引用存在，实例（对象）就不会被垃圾收集。现在，这个特定的对象碰巧有一个方法被调用`close`，它导致文件被关闭，但这对引用没有任何作用`f`，需要将其设置为指向其他东西才能启动垃圾收集。

因此，要摆脱该对象，*就像任何其他*对象一样，您必须将其他内容分配给`f`- 实例或任何其他类没有特殊情况可以`File`为您将此类引用归零。（确实，如果任意方法可以默默地导致您的引用变为`nil`，然后在您尝试使用它时导致异常，那将是有问题的。）

**编辑**：还要考虑这样一个事实，即您可以通过调用来检查文件是否已关闭`f.closed?`。如果`f`在关闭时（或关闭后的某个时间`nil`）变为，尝试调用引用会导致异常……</p> `closed?``nil`

# php - 使用 jQuery 从 PHP 获取多个响应

> ID：13149396
> 
> 赞同：1
> 
> 时间：2012-10-31T00:07:03.360
> 
> 标签：php, jquery, ajax

我希望在屏幕上显示 PHP 脚本正在做什么的基于文本的描述。例如触发函数，然后 PHP 脚本启动。用户然后看到“第 1 步开始”......然后在几秒钟后看到“第 2 步开始”......等等。可能有数百个步骤，我希望用户看看发生了什么。

我的 jQuery：

```
$(document).ready(function() {
    $('#start').click(function() {
        $.ajax({
          url: "do.php",
          success: function( html ) {
              $("#results").append(html);
              return false;
          }
        });
    });
}); 
```

然后是我的 PHP（说明问题，我的实际代码做了很多工作）：

```
echo "step 1 done";
sleep(2);
echo "step 2 done";
sleep(2);
echo "step 3 done"; 
```

目前，“结果” div 仅在 4 秒后一次性显示“步骤 1 完成步骤 2 完成步骤 3 完成”。我希望它显示“第 1 步完成”，然后在 2 秒后显示“第 2 步完成”，再过 2 秒后显示“第 3 步完成”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T00:10:12.650

这不是 AJAX 的工作方式。你在你的 PHP 代码中睡着了，你的 JavaScript 会在它睡着的时候等待响应。一旦得到响应，它将执行您的函数来更新 HTML。

如果您想暂停页面 HTML 的更新，您可能需要使用 JSON 之类的东西将来自 PHP 页面的响应作为单独的元素发送，然后可以在 JavaScript 中对其进行迭代。然后，您可以使用`setTimeout`暂停从 PHP 页面返回的数据的显示。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T00:12:01.090

由于 Ajax 的异步特性，您必须将不同 php 文件中的步骤分开，并在回调中发出多个`$.ajax`请求，或者更好的是，使用[deferreds](http://api.jquery.com/category/deferred-object/)。`success`

# grails - 将所见即所得 FCKEditor 与 Groovy/Grails 工具套件一起使用

> ID：13149409
> 
> 赞同：1
> 
> 时间：2012-10-31T00:08:14.570
> 
> 标签：grails

我已经安装了 FCKEditor 插件，有人可以告诉我下一步该去哪里。我正在使用 Groovy/Grails 工具套件，并希望使用 WYSIWYG 编辑器并用它构建我的 .gsp 页面。如何在 Groovy/Grails 工具套件 IDE 中启动此编辑器。

# mysql - 自定义查询计数和分组日期

> ID：13149412
> 
> 赞同：0
> 
> 时间：2012-10-31T00:08:23.320
> 
> 标签：mysql

从数据库中，我试图找到在过去 X 天内更新的配置文件，并根据日期对它们进行分组。

我的 SQL 结构如下所示：
id (int)
date_modified (date)

这会产生如下结果：

```
+----+---------------+  
| id | date_modified |  
+----+---------------+  
| 86 | 2012-06-22    |  
| 87 | 2012-06-22    |  
| 88 | 2012-06-22    |  
| 89 | 2012-06-22    |  
| 63 | 2011-10-31    |
| 72 | 2012-02-06    |
| 60 | 2011-10-17    |
| 71 | 2012-02-29    |
| 69 | 2011-11-18    |
| 76 | 2012-02-29    |
| 70 | 2011-11-18    |
| 75 | 2012-02-29    |
| 73 | 2012-02-06    |
| 74 | 2012-02-28    |
| 77 | 2012-02-29    |
| 80 | 2012-05-07    |
| 82 | 2012-06-12    |
| 83 | 2012-08-15    |
| 84 | 2012-09-07    |
| 85 | 2012-08-15    |
+----+---------------+ 
```

理想情况下，我想处理查询，使其产生如下结果：

```
+-------+----------+  
| total | days_ago |  
+-------+----------+  
| 4     | 1        |
| 6     | 2        |
| 8     | 3        |  
| 12    | 7        |
| 3     | 30       |
| 55    | 90       |  
| 28    | 180      |  
| 37    | 270      |  
| 42    | 360      |  
+----+-------------+ 
```

它将 date_modified 转换为几天前并按上面显示的增量对其进行分组。

我假设在选择查询中使用案例是可能的，但我对如何去做有点茫然。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T00:10:37.173

您需要使用[DATEDIFF](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_datediff) MySQL 函数：

> DATEDIFF() 返回 expr1 – expr2，表示为从一个日期到另一个日期的天数。expr1 和 expr2 是日期或日期和时间表达式。计算中仅使用值的日期部分。

在您的情况下，只需使用即可解决

```
SELECT COUNT(date_modified) as total, DATEDIFF(date_modified, NOW()) as days_ago FROM mytable GROUP BY date_modified; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T06:52:17.603

您需要在表名中 - tbl，插入您现在使用的查询。对于特定日期，您需要 now() 更改为“2012-06-10”。

查询**[SQLFIDDLE 示例](http://sqlfiddle.com/#!2/a46f1/6)**：

```
SELECT 
COUNT(id) total ,
DATEDIFF(now(),date_modified) days_ago 
FROM tbl
GROUP BY date_modified
ORDER BY days_ago 
```

结果：

```
| TOTAL | DAYS_AGO |
--------------------
|     1 |       54 |
|     2 |       77 |
|     4 |      131 |
|     1 |      141 |
|     1 |      177 |
|     4 |      245 |
|     1 |      246 |
|     2 |      268 |
|     2 |      348 |
|     1 |      366 |
|     1 |      380 | 
```

# git - 将整个 git 存储库恢复到特定版本

> ID：13149413
> 
> 赞同：1
> 
> 时间：2012-10-31T00:08:26.273
> 
> 标签：git, version-control

我有一个 git 存储库，我从开发中推送并从测试和生产中提取。

假设到目前为止我进行了 17 次提交，并且所有服务器都是同步的。
现在我想在生产中恢复提交 #15，但[不仅仅是（几个）文件](https://stackoverflow.com/q/215718/341929)：我希望我的生产服务器上的所有文件都反映提交 #15。

我也不想为此创建一个新的提交，并且也希望能够前滚到最新的提交，或者来自中央存储库的其他提交。

我的第一个猜测是在不声明任何文件的情况下运行它，例如，

```
git checkout [commit-15-SHA1] 
```

有没有更好/更安全的方法？*git方式*是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T00:22:20.780

如果你想恢复，然后从提交 #15 分支，保持提交 #15**之后**的所有修订完整，那么你的方法是一个好方法。

```
git checkout [Commit-15-SHA] 
```

如果您只想在提交历史记录中“备份”，而不会丢失当前更改和最近的两次提交，请尝试软重置。

```
git reset --soft [Commit-15-SHA] 
```

但是，如果您想取消您更改的所有内容，包括提交 15 之后的所有修订**，**那么您需要进行硬重置。

```
git reset --hard [Commit-15-SHA] 
```

[在此处](http://www.kernel.org/pub/software/scm/git/docs/git-reset.html)阅读有关 git reset的更多信息。

# google-analytics - 在控制台（GA 调试）中看到“跟踪事件”，但在网络面板中看不到网络请求

> ID：13149414
> 
> 赞同：1
> 
> 时间：2012-10-31T00:08:33.683
> 
> 标签：google-analytics

我对赛道事件问题感到困惑。

```
//_gaq.push(['_trackEvent', 'Cat', 'Act', 'Label', 1.1]);
_gaq.push(['_trackPageview', '/new']); 
```

这是有效的，我可以在 GA Debugger 中看到：

```
_gaq.push processing "_trackPageview" for args: "[]":  ga_debug.js:18
Track Pageview ga_debug.js:18
Tracking beacon sent! 
```

我可以在网络面板中看到 __utm.gif 请求。

但是当我将代码更改为：

```
_gaq.push(['_trackEvent', 'Cat', 'Act', 'Label', 1.1]);
//_gaq.push(['_trackPageview', '/new']); 
```

这是 GA 调试器在控制台中的输出：

_gaq.push 为 args 处理“_trackEvent”：“[Cat,Act,Label,1]”：ga_debug.js:18 跟踪事件

但我从来没有看到“发送的跟踪信标！”。而且我在网络面板中看不到 __utm.gif 请求。等了几天后，我没有在 GA Report 中看到任何记录。所以我很确定它从未发送过。

在这种情况下我做错了什么吗？非常感谢您的任何帮助！

更新：

我终于测试了几次并知道：

传递给 Ga 的值必须是 INT 类型。所以 1.1 不工作，但 1 工作。

我认为 GA Debugger 应该添加一个警告并在控制台中输出它:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T13:46:23.817

更新：

我终于测试了几次并知道：

传递给 Ga 的值必须是**INT**类型。所以 1.1 不工作，但 1 工作。

我认为 GA Debugger 应该添加一个警告并在控制台中输出它:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-19T08:58:59.090

[您可以使用名为Trackie](https://github.com/pualien/Trackie)的 chrome 扩展程序检查标签实现

# jquery - jquery.min.js - Google 托管 - 发出自动 ajax 请求

> ID：13149416
> 
> 赞同：1
> 
> 时间：2012-10-31T00:08:47.050
> 
> 标签：jquery

我通过添加了 jQuery；

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script> 
```

当我的页面加载时，我得到了这个；

```
XMLHttpRequest cannot load http://fiddle.jshell.net/favicon.png. Origin http://demo.chrisdlangton.com is not allowed by Access-Control-Allow-Origin. 
```

网络显示发起者是“jquery.min.js”！！！

现在纠正我，如果我错了，但似乎谷歌托管的 jQuery 库在未经同意或警告的情况下代表他们的用户制作 XMLHttpRequest！？

编辑：在我被否决之前，以下内容是作为评论发布的，这使得投反对票的人在通过判断之前没有阅读所有内容同样糟糕；我只有一小段代码，我的 css、js、html、php 中没有任何引用“favicon”，更不用说 jshell 或 fiddle。通过删除 jQuery 链接，我不再遇到这种情况。此外，通过使用我从较早日期存储在我的电脑上的 jQuery 脚本，版本 1.8.2，我根本没有得到这个，因此它不在我之前下载的 jQuery 中。当我保存谷歌托管的 .js 并在本地添加到我的 html 时，我收到此错误。今天早上，当我的 html 中仍然有 google 托管的 .js 时，没有错误通过消除过程，它由 google 托管的明确 jQuery 导致了这种情况。

编辑：这种情况现在已经停止发生 - 我已经下载了导致它的 .js 的副本，并且当我使用这个下载的副本时看到它仍然发生，但在链接到托管的 .js 时却没有。我将向 Google 提交错误报告，也许他们在玩诡计……谁知道呢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T00:15:09.440

您的页面上还有其他脚本吗？或浏览器中与 jsfiddle 相关的插件？即使它说 jquery.min.js 是源代码，也可能是（正在）调用 jQuery ajax 函数。

我不会假设 Google 的托管受到了损害，可能是调用了 ajax 函数。

# python - 如何使用编解码器将一种语言转换为 utf-8 编码文档？

> ID：13149417
> 
> 赞同：0
> 
> 时间：2012-10-31T00:08:47.687
> 
> 标签：python, codec

所以基本上我对 Python 还是很陌生，我有一个问题，我有一个日文文档，我试图将其转换为 utf-8 编码的文档。当我这样做时，我真的不知道我应该得到什么回报。当我运行我目前拥有的程序时，它只会删除所有内容并给我留下一个空白的 utf-8 编码文档。这是我所拥有的，非常感谢任何帮助。

编辑：对不起，这是一个错字，我修复了原始编码。它是 Shift-jis。

```
import codecs

codecs.open("rshmn10j.txt", 'r', encoding='shift-jis')

newfile = codecs.open("rshmn10j.txt", 'w', encoding='utf-8')
newfile.write(u'\ufeff')
newfile.close() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T00:14:00.853

如果您尝试将文档从编码“x”转换为编码“utf8”，则首先必须使用编码它的编码来读取文档。

```
import codecs

original_document_encoding = "shift-jis" # common japanese encoding.
with codecs.open("rshmn10j.txt", 'r', encoding=original_document_encoding) as in_f:
    unicode_content = in_f.read()

with codecs.open("rshmn10j.out.txt", 'w', encoding='utf-8') as out_f:
    out_f.write(unicode_content) 
```

`with`此处用于在退出块时自动关闭文件。

# wordpress - 在此服务器上找不到请求的 URL /about

> ID：13149418
> 
> 赞同：69
> 
> 时间：2012-10-31T00:09:09.983
> 
> 标签：wordpress, .htaccess, wordpress-theming

我的 wordpress 网站的主页似乎显示正确，但如果您点击进入任何其他页面，我会收到以下错误消息：

```
Not Found

The requested URL /about was not found on this server.

Apache/2 Server at www.wildlionmedia.co.uk Port 80 
```

我不确定是主题问题还是 .htaccess 文件没有被正确重写。

[http://www.wildlionmedia.co.uk/](http://www.wildlionmedia.co.uk/)

有什么想法可以解决这个问题吗？

```
# Switch rewrite engine off in case this was installed under HostPay.
RewriteEngine On

SetEnv DEFAULT_PHP_VERSION 53

DirectoryIndex index.cgi index.php

# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine Off
RewriteBase /wildlionmedia.co.uk/
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /wildlionmedia.co.uk/index.php [L]
</IfModule>

# END WordPress 
```

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2017-04-21T05:37:58.257

如果以上所有点都不起作用。然后试试这个。我尝试过这个。它对我有用。

1.  去**/etc/httpd/conf/httpd.conf**。
2.  **将AllowOverride** None更改为**AllowOverride All**。
3.  **重新启动**apache 服务器。

**2017 年更新**

对于新版本的 apache，该文件称为**apache2.conf**

因此，要访问该文件，请键入**sudo nano /etc/apache2/apache2.conf**并更改块内的对应行`<Directory /var/www >`

* * *

## 回答 #2

> 赞同：66
> 
> 时间：2012-10-31T01:02:20.480

这不是典型的 Wordpress 重写块。这是：

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>
# END WordPress 
```

见[http://codex.wordpress.org/Using_Permalinks#Where.27s_my_.htaccess_file.3F](http://codex.wordpress.org/Using_Permalinks#Where.27s_my_.htaccess_file.3F)

> 我的 .htaccess 文件在哪里？WordPress 的 index.php 和 .htaccess 文件应一起位于常规选项页面上的站点地址 (URL) 设置所指示的目录中。由于文件名以点开头，因此文件可能无法通过 FTP 客户端看到，除非您更改 FTP 工具的首选项以显示所有文件，包括隐藏文件。如果您通过 Godaddy Hosting Connection 安装 WordPress，某些主机（例如 Godaddy）可能不会显示或不允许您编辑 .htaccess。
> 
> 创建和编辑 (.htaccess) 如果您还没有 .htaccess 文件，请创建一个。如果您对服务器具有 shell 或 ssh 访问权限，则一个简单的 touch .htaccess 命令将创建该文件。如果您使用 FTP 传输文件，请在本地计算机上创建一个文件，将其命名为 1.htaccess，将其上传到 WordPress 文件夹的根目录，然后将其重命名为 .htaccess。
> 
> 您可以通过 FTP、shell 或（可能）您主机的控制面板来编辑 .htaccess 文件。

**最简单和最快的方法是在仪表板>>设置>>永久链接中重置您的永久链接，并确保 .htaccess 是可写的，以便 WordPress 可以自己编写规则。**

并且：您是否知道您正在调用`index.cgi`您的默认文档而不是`index.php`？那是错误的。删除`index.cgi`. 或者尝试删除整行，因为可能不需要在您的服务器上定义默认文档。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2017-07-27T10:11:08.693

它对我有用：

转到 Wordpress 管理仪表板 > “设置” > “永久链接” > “通用设置”，将单选按钮设置为“自定义结构”并粘贴到文本框中：

```
/index.php/%year%/%monthnum%/%day%/%postname%/ 
```

并单击保存按钮。

我从这个[链接得到了这个解决方案](https://wordpress.org/support/topic/how-to-set-permalinks-back-to-post-name-and-avoid-404-not-found-error/)

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2019-09-21T13:45:16.437

FWIW：我从头开始重建了 LAMP 服务器并安装了 WordPress。保存我的永久链接设置以生成 .htaccess 文件后，我遇到了同样的问题。原来 mod_rewrite 没有启用。我[在 Digital Ocean 上看到了这篇文章](https://www.digitalocean.com/community/tutorials/how-to-rewrite-urls-with-mod_rewrite-for-apache-on-ubuntu-16-04#step-1-%E2%80%94-enabling-mod_rewrite)。
自由贸易协定：

> 首先，我们需要激活 mod_rewrite。它可用，但未通过干净的 Apache 2 安装启用。

```
$ sudo a2enmod rewrite 
```

> 这将激活模块或提醒您该模块已启用。要使这些更改生效，请重新启动 Apache。

```
$ sudo systemctl restart apache2 
```

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2017-04-01T10:36:01.707

我删除了以前的 .htaccess 文件并通过单击 Settings->Permalinks 中的保存按钮创建了新文件

现在页面开始正常工作......

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2013-08-19T20:47:55.897

Wordpress 网站上有一个值得信赖的答案：

> 我的 .htaccess 文件在哪里？
> 
> WordPress 的 index.php 和 .htaccess 文件应一起位于常规选项页面上的站点地址 (URL) 设置所指示的目录中。由于文件名以点开头，因此文件可能无法通过 FTP 客户端看到，除非您更改 FTP 工具的首选项以显示所有文件，包括隐藏文件。如果您通过 Godaddy Hosting Connection 安装 WordPress，某些主机（例如 Godaddy）可能不会显示或不允许您编辑 .htaccess。
> 
> 创建和编辑 (.htaccess)
> 
> 如果您还没有 .htaccess 文件，请创建一个。如果您对服务器具有 shell 或 ssh 访问权限，则一个简单的 touch .htaccess 命令将创建该文件。如果您使用 FTP 传输文件，请在本地计算机上创建一个文件，将其命名为 1.htaccess，将其上传到 WordPress 文件夹的根目录，然后将其重命名为 .htaccess。
> 
> 您可以通过 FTP、shell 或（可能）您主机的控制面板来编辑 .htaccess 文件。
> 
> 以下永久链接重写代码应包含在您的 .htaccess 文件中（自 WordPress 3.0 起）：

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>
# END WordPress 
```

*取自[这里](http://codex.wordpress.org/Using_Permalinks#Where.27s_my_.htaccess_file.3F)。

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2017-08-28T19:59:20.373

它对我有用：

转到 Wordpress 管理仪表板 > “设置” > “永久链接” > “通用设置”，将单选按钮设置为“自定义结构”并粘贴到文本框中：

```
/index.php/%year%/%monthnum%/%day%/%postname%/ 
```

并单击保存按钮。

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2020-07-16T16:12:07.273

我找到了一个非常简单的解决方案。

1.  转到**固定链接** **设置**
2.  对 URL使用**纯文本**
3.  按**保存**按钮

现在，WordPress 中的所有页面 URL 都应该可以正常工作了。

您可以将 URL 返回到以前的设置，WordPress 将正确地重新生成 URL。我在我的情况下选择**Post name**，它工作正常。

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2017-04-20T13:53:51.723

选择的答案并没有为我解决这个问题。所以对于那些还在为这个问题摸不着头脑的人，我找到了另一种解决方案！

在我的 Apache 设置中`httpd.conf`（您可以通过在控制台中运行找到 conf 文件`apachectl -V`），启用以下模块：

`LoadModule rewrite_module modules/mod_rewrite.so`

现在该网站按预期工作。

* * *

## 回答 #10

> 赞同：6
> 
> 时间：2018-05-10T14:20:18.493

Hie,

Although late If anybody suffering from the similar issues here is what you can do to allow permalinks by modifying your virtual host file or whereever you are hosting your WP sites.

So basically everything works fine - you set up permalinks to post and suddenly the url dissapears. You went to a lot of disscussion forums (Like me) tried a lot of modifying and got "Permission to server 403" errors or URL not found error. All you have to do is go to the host file, for example 000-default.conf if using a default virtual host or your config file inside sites-enabled,

use in the directory section :

```
<Directory "path/to/dir">
Options Indexes FollowSymLinks
AllowOverride All
Require all granted
</Directory> 
```

Donot use the following inside directory

```
Order allow,deny
Allow from all 
```

The Order and Allow directives are deprecated in **Apache 2.4**.

Likewise you can setup the directory in /etc/apache2/apache2.conf set the directory for your path and donot use the above - this will cause permission 403 error.

In addition to that you will need to enable mod_rewrite for apache

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2019-09-23T23:47:23.490

尽管在重新生成 .htaccess 文件时几乎没有对这个问题的解决方案进行编码；确实，当站点迁移到某个新服务器时，它对你们大多数人都不起作用。

**让我们深入了解一些基础知识。**

假设对于我们大多数人来说，WordPress 环境在 PHP 服务器 APACHE 上运行，该服务器控制着我们环境的大部分初始依赖项。同时 .htaccess 的生成也主要依赖于 Apache 的配置。

因此，如果这样说，.htaccess 创建冲突的贡献主要发生在 WordPress 网站从运行 WordPress 环境的旧版本 Apache 和 PHP 的服务器迁移到新版本的 PHP 和 Apache 时。

因为 nrwer 和旧版本的依赖关系不同，这就是为什么新版本的 Apache2 默认不允许 .htaccess 指令创建 .htaccess 文件的原因；因此，我们必须手动将 WordPress 网站的根目录权限从“AllowOverride None”设置为“AllowOverride All”。

相比之下，AllowOverride 指令用于允许在 Web 服务器中使用 .htaccess 以允许在每个目录的基础上覆盖 Apache 配置。

使用以下修复更改 apache2.conf 目录权限设置：

[如何处理 GCP WordPress 错误“此页面无法正常工作 example.com 当前无法处理此请求。HTTP ERROR 500](https://stackoverflow.com/questions/52251640/how-to-deal-with-gcp-wordpress-error-this-page-isn-t-working-example-com-is-cur/52902074#52902074)

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2018-09-12T01:39:03.850

这是 Wordpress 的另一个版本，原来的版本没有按预期工作。

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteRule ^index\.php$ - [END]
    RewriteCond $1 ^(index\.php)?$ [OR]
    RewriteCond $1 \.(gif|jpg|png|ico|css|js)$ [NC,OR]
    RewriteCond %{REQUEST_FILENAME} -f [OR]
    RewriteCond %{REQUEST_FILENAME} -d
    RewriteRule ^(.*)$ - [END]
    RewriteRule ^ /index.php [L]
</IfModule>
# END WordPress 
```

来自此 Github[存储库](https://gist.github.com/nicolasramy/3206657)的参考，稍作修改。**经过过度测试后，这条规则并不能解决所有问题。**我们有一个 Wordpress 网上商店，它有 40 个插件，并且在某个地方存在重写冲突。我真诚地希望下一个版本的 Wordpress 没有 URL 重写。

* * *

```
RewriteRule ^index\.php$ - [L] 
```

[![语法重写规则](../Images/ac1240ff9e4ee2f09e31a0afc22b4886.png)](https://i.stack.imgur.com/M5PoQ.png)

表示字符串的`^`开始，`\`转义`.`或表示任何字符，并`$`表示字符串的结束。

`^index\.php$`if http(s)://hostname/ **index.php** `-` do nothing`[END]`标志不仅可以用来终止当前轮的重写处理，而且可以防止任何后续的重写处理。

* * *

```
RewriteCond $1 ^(index\.php)?$ [OR] 
```

[![语法重写条件](../Images/07a16f7e046eeb8a73c056c384f60573.png)](https://i.stack.imgur.com/4s1T3.png)

在`RewriteCond`使用作为测试字符串引用从 url http(s): **//hostname/bla/bla.php**`$1`的开头到结尾的所有内容的捕获内容。如果在替换或条件中使用，则它引用捕获的反向引用。对于 http(s): **//hostname/bla/ble.php**捕获into和into 。可以通过 访问多个捕获组。**`RewriteRule (bla)/(ble\.php)$ -`**`bla``$1``ble.php``$2``$3..N`****

 ****`( )`将几个字符组合成一个单元，`?`强制匹配可选。 `[OR]`flag 允许您将重写条件与逻辑 OR 关系结合起来，而不是默认的 AND。

简而言之，如果**bla/bla.php**包含 index.php 或下一个条件

* * *

```
RewriteCond $1 \.(gif|jpg|png|ico|css|js)$ [NC,OR] 
```

`( )`将几个字符组合成一个单元，`|`将字符分隔为子组，并在其中任何一个条件下对它们进行条件化。 `[NC]`flag 导致 RewriteRule 以不区分大小写的方式匹配。

简而言之，如果**bla/bla.php**以任何文件类型或下一个条件结尾

* * *

```
RewriteCond %{REQUEST_FILENAME} -f [OR] 
```

服务器变量是 %{ NAME_OF_VARIABLE } 形式的变量，其中 NAME_OF_VARIABLE 可以是从以下列表中获取的字符串：

[![在此处输入图像描述](../Images/8609e6a810659732accb6f1f6fa449a4.png)](https://i.stack.imgur.com/FC1Jv.png)

`%{REQUEST_FILENAME}`是匹配请求的文件或脚本的完整本地文件系统路径，如果在引用 REQUEST_FILENAME 时服务器已经确定了这一点。否则，例如在虚拟主机上下文中使用时，与 REQUEST_URI 的值相同。根据 AcceptPathInfo 的值，服务器可能只使用了 REQUEST_URI 的一些前导组件来将请求映射到文件。

`-f`检查常规文件。将测试字符串视为路径名并测试它是否存在。

简而言之，如果**bla/bla.php**是一个文件或下一个条件

* * *

```
RewriteCond %{REQUEST_FILENAME} -d 
```

`-d`检查目录。将测试字符串视为路径名并测试它是否存在。

简而言之，如果**bla/bla.php**是一个目录

* * *

```
RewriteRule ^(.*)$ - [END] not as in Github [S=1] 
```

此语句仅在其中一个条件返回 true 时执行。

`.`匹配任何字符`*`零次或多次。

该`[S]`标志用于跳过您不想运行的规则。跳过标志的语法是`[S=N]`，其中`N`表示要跳过的规则数（前提是 RewriteRule 匹配）。这可以被认为是重写规则集中的 goto 语句。在以下示例中，我们只想在请求的 URI 与实际文件不对应时运行 RewriteRule。

简而言之，什么都不做

* * *

```
RewriteRule ^ /index.php [L] 
```

该`[L]`标志导致 mod_rewrite 停止处理规则集。在大多数情况下，这意味着如果规则匹配，则不会处理更多规则。这对应于 Perl 中的最后一条命令，或 C 中的 break 命令。使用此标志指示应立即应用当前规则而不考虑进一步的规则。

简而言之，将每个路径重写为 http(s)://hostname/ **index.php**

* * *

我从 apaches.org 文档中一起获取了这个小文档。下面的链接。

*   [Apache mod_rewrite 简介](https://httpd.apache.org/docs/current/rewrite/intro.html)
*   [Apache 模块 mod_rewrite](https://httpd.apache.org/docs/current/mod/mod_rewrite.html)
*   [Apache mod_rewrite 重写规则标志](https://httpd.apache.org/docs/current/rewrite/flags.html)

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2019-01-21T06:35:53.177

在设置 > 永久链接 wordpress 设置简单并再次测试。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-06-10T22:34:42.047

我使用[http://jafty.com/blog/enable-mod_rewrite-on-apache-ec2-linux-server/](http://jafty.com/blog/enable-mod_rewrite-on-apache-ec2-linux-server/)来确定升级到 PHP 5.6（从 4.9.13 开始）后，它还会更新 http（Apache），我需要编辑 /etc/httpd/conf/httpd.conf 文件，我引用...

> 基本上，您将添加 All insted of None 到 AllowOverride，您不想编辑主目录配置，您想编辑如下所示的配置：

```
<Directory “/var/www/html”&gt; 
```

不是：

```
<Directory /> 
```

然后使用以下命令重新启动 Apache：

sudo 服务 httpd 重启

注意 - 在我累了我确实改变了一个不同的目录元素，它没有任何区别，所以确保你为 /var/www/html

本文还解释了如何检查 mod-rewrite 是否启用。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2020-07-16T08:49:13.753

在我的 MacOS Catalina 机器上，我发现在`/etc/apache2/users/my-username.conf`默认位置创建了一个附加文件

```
AllowOverride none 
```

将其更改为`All`最终使事情对我有用。Mac 面临的挑战是很难使用 Finder 访问这些目录，因此很容易不发现该文件

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2017-06-22T03:45:55.147

我遇到了同样的问题。我的主页可以访问，但在服务器上找不到该文章。

转到`cpanel file manager > public_html`并删除`.htaccess`.

然后转到 WordPress 中的永久链接设置，将永久链接设置为您想要的任何内容，然后保存。中提琴一切恢复正常。

这个问题是在我更新 WordPress 之后发生的。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2017-10-02T12:50:12.873

**解决了永久链接问题 Wordpress ** 1) 登录到 wordpress 仪表板 > 点击设置 > premalinks > 然后选择帖子名称。2) 登录到您的托管服务器后，转到 .htaccess 文件并替换代码。

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule> 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2017-10-16T05:51:55.617

确保在 APACHE 设置中启用了 mode_rewrite。请参阅此处的链接 [https://github.com/h5bp/server-configs-apache/wiki/How-to-enable-Apache-modules](https://github.com/h5bp/server-configs-apache/wiki/How-to-enable-Apache-modules)

然后确保你有正确的 .htaccess [https://wordpress.org/support/topic/404-errors-with-permalinks-set-to-postname/](https://wordpress.org/support/topic/404-errors-with-permalinks-set-to-postname/)

并在任一 Apache 设置中更正虚拟主机设置 [如何设置 AllowOverride all](https://stackoverflow.com/questions/18740419/how-to-set-allowoverride-all)

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2019-10-28T16:00:34.003

我正在使用 MacOS，以下操作解决了我的问题：

我复制自： [https ://akrabat.com/setting-up-php-mysql-on-os-x-10-7-lion/](https://akrabat.com/setting-up-php-mysql-on-os-x-10-7-lion/)

cd /etc/apache2

将配置文件授予 root 写入权限： sudo chmod u+w httpd.conf sudo vim httpd.conf

找到#LoadModule php5_module libexec/apache2/libphp5.so

并删除前导 #

找到#LoadModule rewrite_module libexec/apache2/mod_rewrite.so

并删除前导 #

**在该部分中找到 AllowOverride None 并更改为 AllowOverride All 以便 .htaccess 文件可以工作。**

改回权限：sudo chmod uw httpd.conf

通过在终端中运行以下命令重新启动 Apache：

须藤 apachectl 重启

* * *

## 回答 #20

> 赞同：-1
> 
> 时间：2017-09-27T03:50:11.217

仅更改 .htaccess：

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>
# END WordPress 
```****

# postgresql - 如何将查询结果分解为单独的列？

> ID：13149421
> 
> 赞同：2
> 
> 时间：2012-10-31T00:09:27.223
> 
> 标签：postgresql, pivot, crosstab

跟进我之前的问题：

[要作为列插入表中的栅格记录的像素值](https://stackoverflow.com/q/13146046/398670)

想象一下我的查询结果有 5300 行，结果如下：

```
+-------+ 
|value  |
+-------+
| 15624 |
| 15899 |
| 56267 |
| 85955 |
+-------+ 
```

我希望它们在一个表中，列中的前 53 行，`val1`列中的后 53 行，`val2`依此类推。最后，我的表中将有 100 个新列。这可能吗？如果是这样，我该如何实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T01:09:20.470

这是[使用多维数组的一种可能更理智的方法](https://stackoverflow.com/a/13150376/398670)。

请永远，永远，永远，永远使用以下查询：

```
CREATE EXTENSION tablefunc;

SELECT * FROM crosstab(
  'SELECT ''row1''::text, width_bucket(x, 1, 53001, 100), array_agg(x order by x)::integer[] from generate_series(1,53000) x GROUP BY 2'
) ct(
 rowname text,
    col1 integer[], col2 integer[], col3 integer[], col4 integer[], col5
    integer[], col6 integer[], col7 integer[], col8 integer[], col9 integer[],
    col10 integer[], col11 integer[], col12 integer[], col13 integer[], col14
    integer[], col15 integer[], col16 integer[], col17 integer[], col18 integer[],
    col19 integer[], col20 integer[], col21 integer[], col22 integer[], col23
    integer[], col24 integer[], col25 integer[], col26 integer[], col27 integer[],
    col28 integer[], col29 integer[], col30 integer[], col31 integer[], col32
    integer[], col33 integer[], col34 integer[], col35 integer[], col36 integer[],
    col37 integer[], col38 integer[], col39 integer[], col40 integer[], col41
    integer[], col42 integer[], col43 integer[], col44 integer[], col45 integer[],
    col46 integer[], col47 integer[], col48 integer[], col49 integer[], col50
    integer[], col51 integer[], col52 integer[], col53 integer[], col54 integer[],
    col55 integer[], col56 integer[], col57 integer[], col58 integer[], col59
    integer[], col60 integer[], col61 integer[], col62 integer[], col63 integer[],
    col64 integer[], col65 integer[], col66 integer[], col67 integer[], col68
    integer[], col69 integer[], col70 integer[], col71 integer[], col72 integer[],
    col73 integer[], col74 integer[], col75 integer[], col76 integer[], col77
    integer[], col78 integer[], col79 integer[], col80 integer[], col81 integer[],
    col82 integer[], col83 integer[], col84 integer[], col85 integer[], col86
    integer[], col87 integer[], col88 integer[], col89 integer[], col90 integer[],
    col91 integer[], col92 integer[], col93 integer[], col94 integer[], col95
    integer[], col96 integer[], col97 integer[], col98 integer[], col99 integer[],
    col100 integer[]
); 
```

解决这个问题的正确方法几乎肯定是*在您的应用程序*中。SQL 擅长很多事情。这不是其中之一，尤其是在具有非常有限的枢轴支持的 PostgreSQL 中。在任何数据库中，这都是一件疯狂的事情。

就我而言，如果我必须使用查询来生成列列表，这表明系统被迫做一些不太适合的事情：

```
select string_agg('col'||n||' integer[]',', ') FROM generate_series(1,100) n; 
```

# javascript - 使用 jQuery 对 DOM 元素进行排序以排序数组

> ID：13149426
> 
> 赞同：3
> 
> 时间：2012-10-31T00:09:50.247
> 
> 标签：javascript, jquery, arrays, sorting

刚才我问了这个问题： [javascript sort array to align with order array](https://stackoverflow.com/questions/13148941/javascript-sort-array-to-align-with-order-array/13148972) based on what原来是错误的前提。（我已经起床太久了，请让我休息一下）。

我真正需要做的是对 DOM 元素进行排序。**性能是**我的应用程序的关键，因为它将在 CPU 非常匮乏的情况下运行。所以我所拥有的是这样的：

```
<div id="moduleWrap">
    <div class="module">Jack</div>    <!-- 0 -->
    <div class="module">Jill</div>    <!-- 1 -->
    <div class="module">Nancy</div>   <!-- 2 -->
    <div class="module">Tom</div>     <!-- 3 -->
    <div class="module">Cartman</div> <!-- 4 -->
</div> 
```

在 JavaScript 中：

```
$modules = $('#moduleWrap .module');
order    = [3,1,4,0,2]; 
```

我需要的是这个：

```
<div id="moduleWrap">
    <div class="module">Tom</div>     <!-- 3 -->
    <div class="module">Jill</div>    <!-- 1 -->
    <div class="module">Cartman</div> <!-- 4 -->
    <div class="module">Jack</div>    <!-- 0 -->
    <div class="module">Nancy</div>   <!-- 2 -->
</div> 
```

我认为（错误地）我可以对 jQuery 对象进行排序并简单地附加结果。事实并非如此。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-31T00:14:38.817

我只需遍历`order`数组并相应地重新排列 DOM 元素：

```
var elements = [];
$.each(order, function(i, position) {
    elements.push($modules.get(position));
});

$('#moduleWrap').append(elements); 
```

[**演示**](http://jsfiddle.net/HHvsv/)

为了提高性能，你可以带走越来越多的 jQuery。例如：

```
var wrapper = document.getElementById('moduleWrap');
for(var i = 0, l = order.length; i < l; i++) {
    wrapper.appendChild($modules.get(order[i]));
} 
```

[**演示**](http://jsfiddle.net/HHvsv/1/)

jQuery 很棒，因为它让事情变得简单，但是如果你需要高性能，你宁愿不用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T00:50:32.273

试试这个。

从 DOM 树中分离元素可能会加快这个过程。

```
$modules.detach();

var len = order.length,
    temp = [];

for( var i = 0; i < len; i++ ) {
  temp.push( $modules[ order[i] ] );
}

$("#moduleWrap").append( temp ); 
```

在这里[摆弄 http://jsfiddle.net/rEFu3/](http://jsfiddle.net/rEFu3/) ​</p>

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-31T14:14:22.610

我知道这已经晚了，但也许它会对某人有所帮助。我试图做类似的事情，#Felix Kling 的回答让我达到了 90%。但在我的情况下，我有一个等于订单值的 div id，如下所示：

```
order    = [3,1,4,0,2];

<div id="0" class="module">Jack</div>    <!-- 0 -->
<div id="1" class="module">Jill</div>    <!-- 1 -->
<div id="2" class="module">Nancy</div>   <!-- 2 -->
<div id="3" class="module">Tom</div>     <!-- 3 -->
<div id="4" class="module">Cartman</div> <!-- 4 --> 
```

然后我可以简单地使用位置值推送元素

```
var elements = [];
$.each(order, function(i, position) {
    elements.push($('#'+position));
});

$('#moduleWrap').append(elements); 
```

# android - 在“计算启动按钮工具提示”期间发生内部错误

> ID：13149438
> 
> 赞同：0
> 
> 时间：2012-10-31T00:11:16.440
> 
> 标签：android, eclipse

首先，我知道 9 月 21 日有一篇类似的帖子，受害者最终不得不重新安装 Eclipse 以及随之而来的一切。我希望有一个不那么困难的解决方案......

我已经在我的项目上工作了几个月，今天在进行路由编译时出现了错误：在“计算启动按钮工具提示”期间发生内部错误。连同四十个左右其他毫无意义的错误。下面的位图显示了错误。我刚刚对 if 语句进行了简单的更改。现在，我所做的任何事情都无法摆脱这些错误。

与上一篇文章不同，此工作区中的另一个项目得到了相同的错误。其他工作区中的项目正在编译。我正在尝试将项目导入新的工作区，但遇到了重大问题。

我对 Android 和 Eclipse 相当陌生（我通常使用 C# 和 Visual Studio）。这种想法经常发生吗？谢谢，加里

编辑：我通过创建新工作区并将其导入新工作区来运行项目。那么，显然是工作空间以某种方式损坏了？

![Eclipse 错误图像](../Images/06562f74b7bbbb7b443a80cd0f7cee6f.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T05:51:30.800

You are looking at the wrong problem. Your error log is sorted by message, but it should be sorted by date to really find the latest error. And then your real problem might be the "invalid preference page path: XML syntax".

Did you recently update your ADT installation? And do you have some very old version of Eclipse maybe? Because there can be quite some trouble using old Eclipse versions with ADT, which don't correctly recognize the dependencies to the Eclipse Webservice Tools (which again provide XML tooling).

# ios - ios route-me框架中的天气雷达数据叠加

> ID：13149444
> 
> 赞同：1
> 
> 时间：2012-10-31T00:11:33.287
> 
> 标签：ios, ipad, mapkit, core-location

我对 ios 开发很陌生，我正在尝试使用 mapkit 和 corelocation 框架。我想做的是在显示降雨、风暴等的地图上显示最近的天气数据。我正在尝试制作如下图所示的内容。

链接：[http ://cdn-static.zdnet.com/i/story/70/00/002370/radarscope-mac-os-ogrady.jpg](http://cdn-static.zdnet.com/i/story/70/00/002370/radarscope-mac-os-ogrady.jpg)

为了获取天气数据，我现在会使用一个可以为我生成 kml 文件的免费工具（如果有其他更好的方法，请提出建议）。然后将使用该 kml 文件将其覆盖在地图上。

由于这是一个测试应用程序，数据不需要自动更新（非常感谢一些关于如何处理这个问题的指针）。

上述方法是实现这一目标的最佳解决方案还是有另一种更好的方法？此外，是否有可能获得完全相同的颜色编码以及上图中显示的地图的整体外观？

我计划使用 ios route-me 框架 IOS 5 构建一个 ipad 应用程序。

提前致谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T02:30:25.530

我会看看 Weather Underground 的 API：

[地下天气](http://www.wunderground.com/weather/api/)

# android - Android 片段：何时使用隐藏/显示或添加/删除/替换？

> ID：13149446
> 
> 赞同：123
> 
> 时间：2012-10-31T00:11:51.663
> 
> 标签：android, android-fragments

假设我希望将某个容器视图中的当前片段替换为另一个。是不是用替换...

```
 FragmentTransaction ft = getSupportFragmentManager().beginTransaction();
    ft.replace(R.id.fragment_container, newFragment, null);
    ft.commit(); 
```

...或以下，显示和隐藏？

```
 FragmentTransaction ft = getSupportFragmentManager().beginTransaction();
    ft.hide(oldFragment);
    ft.show(newFragment);
    ft.commit(); 
```

这样做的一种方法是否更有效？找不到有关何时使用这些方法或它们如何影响所涉及片段的生命周期的太多信息。谢谢！

* * *

## 回答 #1

> 赞同：144
> 
> 时间：2012-11-01T20:32:39.630

您应该考虑您计划对片段执行的操作，以决定遵循哪条路径。如果你使用 FragmentTransaction 来隐藏 Fragment，那么它仍然可以处于其生命周期的运行状态，但它的 UI 已经与窗口分离，因此不再可见。因此，从技术上讲，您仍然可以与片段交互，并在以后需要时重新附加其 UI。如果您替换片段，您实际上是将其从容器中拉出，它将经历生命周期中的所有拆卸事件（onPause、onStop 等），如果由于某种原因您再次需要该片段，您将不得不将其重新插入容器并让它再次运行所有初始化。

如果您很有可能再次需要该片段，那么只需隐藏它，因为重绘它的布局比完全重新初始化它的操作成本更低。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-31T00:47:30.867

你基本上是自己回答的。如果您想替换（不再需要旧片段）`replace()`，如果您想暂时隐藏它，请使用`hide()`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-25T05:24:29.437

我在我的活动中使用了带有 4 个片段的隐藏/显示方法，它解决了我的解决方案，但是当我显示我的对话框时随机出现一段时间，当我使用添加和替换方法时，它会给出窗口错误令牌异常，然后不会发生错误令牌异常，所以我认为显示/隐藏方法并不完美

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-06-25T06:57:34.740

如果视图“重”，我认为应该使用隐藏/显示。有这样的回调：onHiddenChanged。如果您使用隐藏/显示，那将很有帮助。

# javascript - foo in bar - 'in' 运算符 javascript？

> ID：13149450
> 
> 赞同：2
> 
> 时间：2012-10-31T00:12:06.933
> 
> 标签：javascript, arrays

我最近阅读了一篇关于 CSS 浏览器功能检测的教程……最终产品是这样的……

```
var prefix = ['Moz', 'webkit', 'O', 'ms', 'Khtml'],
    test_style = document.createElement('div').style;

var css_check = function(prop) {
    if (prop in test_style) {
        return true;
    }
    for (var i = 0; i < prefix.length; i++) {
        if (prefix[i] + prop in test_style) {
            return true;
        }
    }
    return false;
};

css_check('whatev_css_property'); 
```

我不明白的部分是这个......

`if (prop in test_style)`或`if (foo in bar)`。

从我读过的内容来看，`if (foo in bar)`它用于检查一个值是否在数组中，但我在这里可能错了，我没有找到太多关于此的文档。另外，如果这用于检查数组中的值，那么如何是`test_style = document.createElement('div').style`数组？没有意义...

我很困惑。任何澄清将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T00:15:37.750

该语句`if (foo in bar)`测试对象是否具有*名为*`bar`的属性。它不测试具有 value 的属性。 *`foo``foo`*

 *那是：

```
var bar = {"a" : "x", "b" : "y"};
alert("a" in bar); // true
alert("x" in bar); // false 
```

您可以在数组上使用此语法，因为它们是一种对象。如果`bar`是一个数组，那么`foo in bar`如果`foo`是具有值的数组的数字索引或者`foo`是某个其他属性或方法名称，则为真。

> 另外，如果这用于检查数组中的值，那么如何是`test_style = document.createElement('div').style`数组？

`test_style`是一个对象，而不是一个数组。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T00:15:51.127

`in`运算符用于检查数组或对象中是否存在*键，例如*

```
3 in [1, 2, 3] // false, since the array indices only go up to 2
2 in [1, 2, 3] // true
'x' in { x: 5 } // true
'toString' in Object.prototype // true 
```

那里的`style`属性是[CSSStyleDeclaration](https://developer.mozilla.org/en-US/docs/DOM/CSSStyleDeclaration)的一个实例，它包含活动浏览器中每个支持的样式属性的属性。

您在帖子中提供的代码片段检查查看浏览器是否支持该样式的某个版本（官方版本或具有许多常见供应商前缀之一）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T00:15:26.740

```
 document.createElement('div').style 
```

将返回一个具有 CSS 属性的对象。您可以使用它`key in`来检查对象中是否存在特定属性。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-31T00:16:15.853

`if (foo in bar)`用于检查命名的值是否`foo`是对象的属性`bar`。由于数组只是经过特殊处理的对象，因此假设它可用于检查数组中的值是正确的。

`test_style = document.createElement('div').style`返回具有属性的对象；既然是这种情况，您可以使用`foo in bar`语法来检查它。*

# java - TextView 扩展；不支持的操作异常

> ID：13149452
> 
> 赞同：0
> 
> 时间：2012-10-31T00:12:55.133
> 
> 标签：java, android, android-layout, android-view

我已经扩展了 a`TextView`来实现`Checkable`. 我没有碰过任何`TextView`东西，除了`onCreateDrawableState`. 此外，我刚刚实现了 Checkable 方法。（为清楚起见进行了删节。）

```
public class CheckableTextView extends TextView implements Checkable {

public CheckableTextView(Context context, AttributeSet attrs) {
    super(context, attrs);
}

@Override
protected int[] onCreateDrawableState(int extraSpace) {
    final int[] drawableState = super.onCreateDrawableState(extraSpace + 1);
    if (isChecked()) {
        mergeDrawableStates(drawableState, CheckedStateSet);
    }
    return drawableState;
} 
```

它在 ICS 上编译得很好，但在 Android 2.3 中，当程序试图放大这个视图时，我得到了一个非常奇怪的错误。

```
10-31 00:51:20.414: E/AndroidRuntime(601): FATAL EXCEPTION: main
10-31 00:51:20.414: E/AndroidRuntime(601): android.view.InflateException: Binary XML file line #3: Error inflating class net.blackenvelope.utrechtafval.map.layouts.CheckableTextView 
```

...

```
10-31 00:51:20.414: E/AndroidRuntime(601): Caused by: java.lang.reflect.InvocationTargetException
10-31 00:51:20.414: E/AndroidRuntime(601):  at java.lang.reflect.Constructor.constructNative(Native Method)
10-31 00:51:20.414: E/AndroidRuntime(601):  at java.lang.reflect.Constructor.newInstance(Constructor.java:415)
10-31 00:51:20.414: E/AndroidRuntime(601):  at android.view.LayoutInflater.createView(LayoutInflater.java:505)
10-31 00:51:20.414: E/AndroidRuntime(601):  ... 45 more
10-31 00:51:20.414: E/AndroidRuntime(601): Caused by: java.lang.UnsupportedOperationException: Can't convert to dimension: type=0x2
10-31 00:51:20.414: E/AndroidRuntime(601):  at android.content.res.TypedArray.getDimensionPixelSize(TypedArray.java:463)
10-31 00:51:20.414: E/AndroidRuntime(601):  at android.view.View.<init>(View.java:1963)
10-31 00:51:20.414: E/AndroidRuntime(601):  at android.widget.TextView.<init>(TextView.java:344)
10-31 00:51:20.414: E/AndroidRuntime(601):  at android.widget.TextView.<init>(TextView.java:337)
10-31 00:51:20.414: E/AndroidRuntime(601):  at net.app.layouts.CheckableTextView.<init>(CheckableTextView.java:11)
10-31 00:51:20.414: E/AndroidRuntime(601):  ... 48 more 
```

我似乎无法找出这种 type=0x2 的含义。

这是 XML：

```
<?xml version="1.0" encoding="utf-8"?>

<app.CheckableTextView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/overlay_type_title"
    android:layout_width="match_parent"
    android:background="@drawable/overlay_list_bg_selector"
    android:layout_height="wrap_content"
    android:drawableLeft="@drawable/overlay_list_icon"
    android:drawablePadding="10dp"
    android:gravity="center_vertical"
    android:minHeight="?android:attr/listPreferredItemHeightSmall"
    android:paddingLeft="10dp"
    android:paddingRight="?android:attr/listPreferredItemPaddingRight"
    android:textAppearance="?android:attr/textAppearanceListItemSmall" 
    >
</app.CheckableTextView> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T00:40:18.063

`?android:attr/listPreferredItemPaddingLeft`并且`?android:attr/listPreferredItemPaddingRight`仅在 API 14+（ICS 及更高版本）中可用。因此，它没有将其解释为 API 9-10 (2.3) 上的维度。

我建议使用你自己的价值观。如果您熟悉资源文件，请添加一个`<dimen>`具有类似于您在 ICS 上看到的填充值的属性，然后引用它。

如果您不熟悉自定义 XML 值，请[查看`dimen`文档](http://developer.android.com/guide/topics/resources/more-resources.html#Dimension)。

# zend-framework2 - Zend Framework 2 控制器插件在单元测试中不可用

> ID：13149454
> 
> 赞同：5
> 
> 时间：2012-10-31T00:13:00.650
> 
> 标签：zend-framework2

大家好，我是 Zend 的新手，被要求使用 Z2 进行开发。我正在尝试通过控制器插件添加可重用的功能，但我没有成功进行单元测试。它在常规应用程序中运行良好。

```
// Application\Controller\Plugin\HelloWorld.php
namespace Application\Controller\Plugin;

use Zend\Mvc\Controller\Plugin\AbstractPlugin;
use Zend\Http\Client;
use Zend\Http\Request;

class HelloWorld extends AbstractPlugin
{

    public function helloWorld()
    {
        return "HELLO WORLD";
    }
}

// Application\Controller\IndexController.php
namespace Application\Controller;

use Zend\Mvc\Controller\AbstractActionController;
use Zend\View\Model\ViewModel;

class IndexController extends AbstractActionController
{

    public function indexAction()
    {
        echo $this->helloworld()->helloWorld();
    }
}

//Application\config\module.config.php
...
'controller_plugins' => array(
     'invokables' => array(
          'helloworld' => 'Application\Controller\Plugin\HelloWorld',
      ),
 ),
... 
```

我得到的错误是：

```
Zend\ServiceManager\Exception\ServiceNotFoundException: Zend\ServiceManager\ServiceManager::get was unable to fetch or create an instance for helloworld 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-31T16:52:39.847

如果为控制器创建单元测试，则在专用的受控单元中测试控制器。您不初始化应用程序，不加载模块，也不解析完整的配置文件。

要对控制器进行单元测试，请在方法中自己添加插件，`setUp()`以将其作为可调用的方式直接放在服务管理器中。如果你想测试你的配置是否有效，你宁愿看功能测试。首先尝试引导完整的应用程序，然后通过创建请求和断言响应来测试您的控制器。

因为功能测试有点难解决，所以从控制器（插件）开始在单元测试中进行测试更容易：

```
namespace SlmLocaleTest\Locale;

use PHPUnit_Framework_TestCase as TestCase;
use Application\Controller\IndexController;

class IndexControllerTest extends TestCase
{
    public function setUp()
    {
        $controller = new IndexController;
        $controller->getPluginManager()
                   ->setInvokableClass('helloworld', 'Application\Controller\Plugin\HelloWorld');

        $this->controller = $controller;
    }

    public function testCheckSomethingHere()
    {
        $response = $this->controller->indexAction();
    }
} 
```

例如，您可以替换`setInvokableClass()`为`setService()`注入模拟。

# mysql - MySQL Workbench - Schema 和 Database 一样吗？

> ID：13149455
> 
> 赞同：7
> 
> 时间：2012-10-31T00:13:10.817
> 
> 标签：mysql, mysql-workbench

我正在尝试为 php 代码设置数据库名称。

但我有一个疑问，因为在 Workbench 我有一个名为******的 MySQL 模式。它等同于数据库还是不同的东西？我之所以这么问，是因为我没有找到在 Workbench 中创建数据库的任何明确参考。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-31T00:17:17.707

是的，在 MySQL 中，模式和数据库是同义词。这甚至扩展到语法：

```
CREATE DATABASE foo;
DROP SCHEMA foo;

CREATE SCHEMA bar;
DROP DATABASE bar; 
```

模式和数据库基本上都是表的命名空间。

在 SQL 的一些其他实现中，术语数据库和模式的使用方式不同。

# android - 混合 simple_list_item_1 和 simple_list_item_2 的 ListView

> ID：13149458
> 
> 赞同：1
> 
> 时间：2012-10-31T00:13:38.127
> 
> 标签：android, listview, android-2.2-froyo

我想要一个 ListView ，它使用 显示每个项目的名称和信息`simple_list_item_2`，所以它看起来像这样：

```
SWITZERLAND
a country with many delicious cheeses

BRITAIN
famous for its clocktower

AUSTRALIA
in Australia, everything is upside down! 
```

大写的文本表示每个 ListView 元素中的大黑色文本，而较低的大写文本表示该元素的灰色小字体。

但是，我希望用户能够添加他自己的国家，所以第一个元素会显示为

```
ADD NEW COUNTRY... 
```

没有任何小字体。我可以使用`simple_list_item_2`并简单地将小文本设置为`""`，但这会使大文本笨拙地对齐。我希望这个特殊的“添加新国家”元素看起来与`simple_list_item_1`.

`simple_list_item_1`但是，使用or的决定`simple_list_item_2`是在我的适配器的初始化中做出的：

```
MyAdapter adapter = new MyAdapter(
            this,
            android.R.layout.simple_list_item_2, 
            myListOfListViewElements); 
```

然后当我填充 ListView 时，这个决定就实现了：

```
myListView.setAdapter(adapter); 
```

那么如何在一个 ListView 中同时使用这两种 simple_list_item 呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T02:06:47.877

对于您只处理一个“特殊”项目的特定情况，@dymmeh 的答案绝对是一种很好且易于实施的方法。对于更通用的情况，您需要处理不一定位于顶部的多个不同项目`ListView`，您可以参考适配器中的以下两种方法：

*   `getItemViewType(int position)`
*   `getViewTypeCount()`

根据第一个方法的返回值，Android 将`convertView`在适配器的`getView(...)`方法中为您提供所需的内容。一种常见的方法是简单地将布局 id 作为类型（例如`R.layout.row_layout`）返回，但您可以真正使用您喜欢的任何东西，只要这些值唯一地标识一个类型。

之后，在构建 ViewHolder/RowWrapper 时，您需要做一些额外的工作来填充正确的布局。对于每种视图类型，如果`convertView == null`. 将至少有一种视图类型（这是默认情况），最多`getViewTypeCount()`. [可以在此处找到说明该想法的示例](http://android.amberfog.com/?p=296)。

有关视图类型方法的更多详细信息：

*   [ArrayAdapter 的 getViewTypeCount 和 getItemViewType 方法](https://stackoverflow.com/questions/5300962/getviewtypecount-and-getitemviewtype-methods-of-arrayadapter)

附带说明：我实际上考虑不将 'add...' 选项作为 的一部分`ListView`，而是将其放置在它的顶部或上方，以便于访问；即无需先滚动回顶部。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T00:30:33.913

您始终可以通过在调用 / 之前调用“添加新国家/地区”`addHeaderView(View view)`作为标题`ListView`视图。将 onClick 侦听器附加到该标题视图以捕获任何点击`setAdapter(adapter)``setListAdapter(adapter)`

这样，您的“添加新国家/地区”将显示为列表视图中的第一个条目

# ruby-on-rails - 将布尔值转换为字符串

> ID：13149461
> 
> 赞同：1
> 
> 时间：2012-10-31T00:14:01.243
> 
> 标签：ruby-on-rails, ruby, string

我试图标准化存储在我的数据库中的数据。从某种意义上说，我希望所有内容都存储为字符串。将所有数据类型转换为rails中的字符串的最佳方法是什么？

所以如果我的数据库中有这样的东西：

```
 t.funny = no #(boolean) 
```

如果我在一个循环中将数百个这些字符串转换为字符串，那么最好的方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T01:13:46.810

您可以对 ActiveRecord 或数据库的连接适配器（例如，`pg`PostgreSQL 的 gem）进行猴子补丁，并让它将布尔值存储为字符串（例如，`Y`或`N`）。

另一方面，如果您将所有内容存储为字符串，这告诉我您不关心有类型的模式。如果是这样，也许您可​​能想看看 NoSQL （尤其是 MongoDB 和 CouchDB 具有强大的 Rails 集成）之类的替代方案，其中一切都只是本质上键 => 值的“文档”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-31T00:25:26.873

猴子补丁被接受了吗？:)

这是一个：

```
class Object
  def to_sb
    return 'no' if [FalseClass, NilClass].include?(self.class) 
    return 'yes' if self.class == TrueClass
    self
  end  
end  

v = true
v.to_sb
=> "yes"

v = nil
v.to_sb
=> "no"

v = false
v.to_sb
=> "no"

v = 'blah'
v.to_sb
=> "blah" 
```

现在在你的模型中你可以使用`t.funny.to_sb`

意味着字符串布尔

请注意，非布尔值将按原样返回

## [**在此处**](http://cibox.org/slivu/stackoverflow?lang=ruby&file=converting-boolean-values-to-string.rb&run=true)查看实际操作[](http://cibox.org/slivu/stackoverflow?lang=ruby&file=converting-boolean-values-to-string.rb&run=true)

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T22:16:56.160

false 和 nil 都被视为相同，因此代码可以写为

```
class Object
  def to_bool
    return 'no' unless self
    return 'yes' if self.class == TrueClass
    self
  end
end 
```

结果：

```
v = true
v.to_sb
=> "yes"

v = nil
v.to_sb
=> "no"

v = false
v.to_sb
=> "no"

v = 'blah'
v.to_sb
=> "blah" 
```**

# c# - 引用其他类对象和变量

> ID：13149462
> 
> 赞同：-1
> 
> 时间：2012-10-31T00:14:10.623
> 
> 标签：c#, xml, pointers, reference

我对 c# 很陌生，这可能是一个非常菜鸟和简单的问题，我会尽力解释问题是什么：

我正在努力在类之间“引用”变量......让我解释一下情况和我需要做什么：

我有一个“节点”类，其中包含一堆变量，例如“名称”、“长度”、“XCoordinate”、“YCoordinate”、“节点类型”——它们都是我从 XML 文件中读取的字符串。

我还有一个“NodeLinkage”类，其中包含一堆字符串变量（也从 XML 文件中读取），例如“Length”、“TrackType”等等。

问题：我从一个 XML 文件中收集这些数据，并且需要编写两个文本文件（一个用于节点，一个用于链接 (NodeLinkage)）。NodeLinkage 文件还需要具有与 Node 文件中相同的一些信息（例如“NodeAName”和“NodeBName”——两个“Node”对象名称）。我希望有某种方法可以在每个“NodeLinkage”中使用“指针”（或类似的东西）来引用这些特定的节点......因此存储名称（和所需的任何其他变量）更容易......

这些 XML 文件有多达 5000 个节点，以及大量的链接，并且读取 XML 文件以便首先读取节点数据，然后读取链接数据。

读取（列表/地图/字典）时存储此信息（节点和节点链接）的最佳方式是什么，以及如何使用“指针”之类的东西从链接中引用特定的节点/节点名称。

* * *

编辑！：

感谢到目前为止已经回复的人！这是正在读取的 XML 文件的示例：

```
<Nodes>
    <Node Name="WAI2" LongName="Waitara" Length="100" NodeType="6" ... (other attributes)>
        <NodeMasterTimingPoint NodeName="WAI1"></NodeMasterTimingPoint>
    </Node>
    <Node Name="WAI3" LongName="Waitara" Length="100" NodeType="6" ... (other attributes)>
        <NodeMasterTimingPoint NodeName="WAI1"></NodeMasterTimingPoint>
    </Node>
    .... other nodes
</Nodes>

<Links>
    <Link NodeAName="WAI1" NodeBName="WAI2" Length="200" TrackType="37" SBId="10482">
    </Link>
    ... more links
</Links> 
```

每个节点/链接记录有大约 15-20 个属性。

如您所见，链接记录使用两个“NodeXName”......我想知道是否有任何方法可以引用或“指向”这两个节点，因此在打印链接数据时可以使用类似 NodeA.Name 的东西。因此，如果需要，也可以使用其他数据，例如 NodeA.Length。

```
Node Class:

class cNode
{
    public string Name;
    public string LongName;
    public string PlatformName;
    public string NodeType;
    public string Length;
    public string MasterTimingNode;
    public string MasterJunctionNode;
    public string[] PenaltyFromNode;
    public string[] PenaltyToNode;
    public string[] Penalty;
    public string PFMORI;
    public string XCRD;
    public string YCRD;
    public string PlanLocation;

    // Few methods which aren't important
    public string GetDataString()
    {
    ...
    }

} 
```

NodeLinkage 类与上面的 Node 类非常相似。

我还有一个带有 main 方法的“main”类，它将简单地读取 XML 文件并为每个节点/链接分配值——虽然不确定如何存储这些？列表？地图？

如前所述，在读取链接数据之前读取和存储节点数据（因此创建节点对象）。

再次感谢尼克。

很抱歉有大量的东西要阅读。:P

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T01:17:16.817

From what I can tell, "NodeType" would be an attribute of a "Node". However it is not clear what the relationship between a "Node" and a "NodeLinkage" is. I suspect this NodeLinkage is really just a way of dealing with the relationship between objects during serialization/deserialization (in case those words haven't been explained to you yet, serialization is the process of taking a set of objects in memory and persisting them to files and/or databases; deserialization is creating a set of objects from files and/or databases).

Objects in memory ("object instances") will have references to other objects; for example, your "Node" might have only a single NodeType, or it might have multiple NodeTypes. Either way, as far as your instance of a Node is concerned, NodeType (or NodeTypes) is simply a reference to another object. It doesn't matter if one or a hundred nodes all share the same node type; they will all point to the same NodeType instance -- you won't have a hundred nodes with a hundred NodeType instances.

However, when the time comes to serialize, to avoid duplicating a bunch of NodeType entries, you will want to be able to abstract a NodeType with an identifier (you will often see this called an Identity property). Before we get to the solution, let's take a look at our class structures and how they would serialize:

```
 public class NodeManager
    {
        public List<Node> Nodes { get; set; }
    }

    public class Node
    {
        public string Name { get; set; }
        public List<NodeType> NodeTypes{ get; set; }
        public int Length { get; set; }
        public int XCoordinate { get; set; }
        public int YCoordinate { get; set; }
    }

    public class NodeType
    {
        public string Name { get; set; }
        public string SomeOtherNodeTypeProperty { get; set; }
        public string YetAnotherNodeTypeProperty { get; set; }
    } 
```

In this object model, the NodeManager class serves as your in-memory repository for all of the Nodes that have been instantiated. This is the class you will serialize from, or deserialize to. It contains a collection of Nodes, and nothing else. In a more detailed model, it will probably contain methods to create, add, delete and query the Node collection in useful ways, but for the purposes of discussing ser/deser this is enough.

As you can see, a Node object can have multiple types. If we were to create ten thousand Nodes in memory, each with a few types, we would have a massive duplication of the NodeType XML nodes in the written file, because the serializer has no way to abstract a NodeType instance into a reference to a NodeType. Our XML file will look something like this (not precisely like this; I did this by hand):

```
<?xml version="1.0" encoding="utf-8"?>
<Nodes>
    <Node>
        <Name>Foo</Name>
        <Length>5</Length>
        <XCoordinate>24</XCoordinate>
        <YCoordinate>36</YCoordinate>
        <NodeTypes>
            <NodeType>
                <Name>Type 1</Name>
                <SomeOtherNodeTypeProperty>Blah</SomeOtherNodeTypeProperty>
                <YetAnotherNodeTypeProperty>Meh</YetAnotherNodeTypeProperty>
            </NodeType>
            <NodeType>
                <Name>Type 2</Name>
                <SomeOtherNodeTypeProperty>Foo</SomeOtherNodeTypeProperty>
                <YetAnotherNodeTypeProperty>Bar</YetAnotherNodeTypeProperty>
            </NodeType>
            <NodeType>
                <Name>Type 3</Name>
                <SomeOtherNodeTypeProperty>Fizz</SomeOtherNodeTypeProperty>
                <YetAnotherNodeTypeProperty>Buzz</YetAnotherNodeTypeProperty>
            </NodeType>
        </NodeTypes>
    </Node>
    <Name>Bar</Name>
    <Length>15</Length>
    <XCoordinate>224</XCoordinate>
    <YCoordinate>336</YCoordinate>
    <NodeTypes>
        <NodeType>
            <Name>Type 1</Name>
            <SomeOtherNodeTypeProperty>Blah</SomeOtherNodeTypeProperty>
            <YetAnotherNodeTypeProperty>Meh</YetAnotherNodeTypeProperty>
        </NodeType>
        <NodeType>
            <Name>Type 2</Name>
            <SomeOtherNodeTypeProperty>Foo</SomeOtherNodeTypeProperty>
            <YetAnotherNodeTypeProperty>Bar</YetAnotherNodeTypeProperty>
        </NodeType>
        <NodeType>
            <Name>Type 3</Name>
            <SomeOtherNodeTypeProperty>Fizz</SomeOtherNodeTypeProperty>
            <YetAnotherNodeTypeProperty>Buzz</YetAnotherNodeTypeProperty>
        </NodeType>
    </NodeTypes>
    </Node>
</Nodes> 
```

Notice how the two nodes each support 3 Node types, and they are complete duplicates of each other. To avoid this we can add a NodeTypeID property. This is simply a value that is guarenteed to be unique across all NodeType instances. When we have that, instead of having to write out an entire NodeType, we can just write it's ID, and from the ID we can get to the rest of the information about a NodeType. Let's add a new property to our NodeType :

```
public class NodeType
{
    public int NodeTypeId { get; set; }
    public string Name { get; set; }
    public string SomeOtherNodeTypeProperty { get; set; }
    public string YetAnotherNodeTypeProperty { get; set; }
} 
```

Now that there is a NodeTypeID property when we serialize our nodes, it looks a lot cleaner:

```
<?xml version="1.0" encoding="utf-8"?>
<NodeRoot>
    <Nodes>
        <Node>
            <Name>Foo</Name>
            <Length>5</Length>
            <XCoordinate>24</XCoordinate>
            <YCoordinate>36</YCoordinate>
            <NodeTypes>
                <NodeType NodeTypeId="1"/>
                <NodeType NodeTypeId="2"/>
                <NodeType NodeTypeId="3"/>
            </NodeTypes>
        </Node>
        <Node>
            <Name>Bar</Name>
            <Length>15</Length>
            <XCoordinate>224</XCoordinate>
            <YCoordinate>336</YCoordinate>
            <NodeTypes>
                <NodeType NodeTypeId="1"/>
                <NodeType NodeTypeId="2"/>
                <NodeType NodeTypeId="3"/>
            </NodeTypes>
        </Node>
    </Nodes>
    <NodeTypes>
        <NodeType>
            <Name>Type 1</Name>
            <SomeOtherNodeTypeProperty>Blah</SomeOtherNodeTypeProperty>
            <YetAnotherNodeTypeProperty>Meh</YetAnotherNodeTypeProperty>
        </NodeType>
        <NodeType>
            <Name>Type 2</Name>
            <SomeOtherNodeTypeProperty>Foo</SomeOtherNodeTypeProperty>
            <YetAnotherNodeTypeProperty>Bar</YetAnotherNodeTypeProperty>
        </NodeType>
        <NodeType>
            <Name>Type 3</Name>
            <SomeOtherNodeTypeProperty>Fizz</SomeOtherNodeTypeProperty>
            <YetAnotherNodeTypeProperty>Buzz</YetAnotherNodeTypeProperty>
        </NodeType>
    </NodeTypes>
</NodeRoot> 
```

This is getting pretty long so I'll wrap it here; hopefully I've given you the direction you're looking for.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T00:39:43.577

听起来您只想将“Node”类型的变量添加到 NodeLinkage 类中，然后在读取 XML 文件时分配它

然后所有相关的节点信息将通过对相应节点的引用提供给 NodeLinkage 类

我想这取决于节点链接可以引用多少个节点，您可以硬编码几个引用，例如

```
class NodeLinkage 
{
    public Node NodeA { get; set; }
    public Node NobeB { get; set; }
} 
```

或持有一个字典/列表

```
class NodeLinkage 
{
    public List<Node> Nodes { get; set; }
} 
```

听起来你也需要建立你的节点列表

```
List<Node> Nodes = new List<Node>();
// Read node data
Nodes = SomeRoutineThatGetsThem();

List<NodeLinkage> Links = new List<NodeLinkage>();
// Read link data
Links = SomeRoutineThatGetsThem2();

// Create node linkage refs
foreach(var link in Links) 
{
    // Find the nodes that should be associated with this link - maybe using Linq?
    var assocNodes = Nodes.Where(n => n.NodeID == link.NodeID); // No idea what your setup is so this is a random pseudo code bit!
    // blah - assign etc
} 
```

到目前为止，这对您有用吗？

# php - 无法将新字段添加到 foreach 中的数组

> ID：13149464
> 
> 赞同：5
> 
> 时间：2012-10-31T00:14:26.337
> 
> 标签：php, multidimensional-array

我有一个二维数组：

```
$test = array(
    "foo" => array(
        'a' => 1,
        'b' => 2,
        'c' => 3
    ),
    "bar" => array(
        'a' => 1,
        'b' => 2,
        'c' => 3
    ),
    "baz" => array(
        'a' => 1,
        'b' => 2,
        'c' => 3
    )
); 
```

我想在外部数组的每个元素中添加一个以`'d'`值命名的字段`4`，以便生成的数组变为：

```
array(
    "foo" => array(
        'a' => 1,
        'b' => 2,
        'c' => 3,
        'd' => 4
    ),
    "bar" => array(
        'a' => 1,
        'b' => 2,
        'c' => 3,
        'd' => 4
    ),
    "baz" => array(
        'a' => 1,
        'b' => 2,
        'c' => 3,
        'd' => 4
    )
) 
```

我试过这个：

```
foreach ( $test as $elem ) 
{
    $elem['d'] = 4;
} 
```

这是行不通的。我做错了什么，我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-31T00:17:42.633

数组和原语在 PHP 中是按值传递的（尽管对象是通过引用传递的）。在循环中克服此问题的一种方法是在`foreach`循环中通过引用访问子数组：

```
// Call $elem by reference with &
foreach ( $test as &$elem ) {
    $elem['d'] = 4;
}

print_r($test);
array(3) {
  ["foo"]=>
  array(4) {
    ["a"]=>
    int(1)
    ["b"]=>
    int(2)
    ["c"]=>
    int(3)
    ["d"]=>
    int(4)
  }
  ...
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-31T00:18:46.600

```
$test = array(
    "foo" => array(
        'a' => 1,
        'b' => 2,
        'c' => 3
    ),
    "bar" => array(
        'a' => 1,
        'b' => 2,
        'c' => 3
    ),
    "baz" => array(
        'a' => 1,
        'b' => 2,
        'c' => 3
    )
);

foreach($test as $key => $val)
    $test[$key]['d'] = 4;

print_r($test); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-23T17:53:09.897

您可以利用 php 函数和回调：

```
array_walk($test, function ( & $value) {                                                                                                                                                            
     $value['d'] = 4;
}); 
```

# objective-c - 如何快速知道一个对象是否从 NSArray 中的对象引用？

> ID：13149465
> 
> 赞同：0
> 
> 时间：2012-10-31T00:14:27.617
> 
> 标签：objective-c

```
 BOOL isnot=true;
    for(BGAddressAnnotation * old in oldAnnot){
        if(new.myBiz==old.myBiz){
            //[self animationOutAndInBetweenNew:new andOld:old];
            isnot=false;
        }else{
        }
    } 
```

起初我很困惑为什么我的程序员这样做而不是仅仅使用 NSArray containsObject。然后我意识到了。他不是在查看对象是否在数组中。

该数组的类型为 BGAddressAnnotation。每个都包含对 myBiz 的引用。他想知道该商业是否包含在 oldAnnot 旅馆中。

有没有更快的方法来使用说，keyPath，或者他的方式确实是方式

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-22T22:21:12.387

您可以尝试以下方法，我敢肯定它会更快。如果不是，我至少认为它更好看！

```
NSArray *oldAnnot = ...
NSArray *oldAnnotBizs = [oldAnnot valueForKeyPath:@"@unionOfObjects.myBiz"];
BOOL isFound = [oldAnnotBizs containsObject:new.myBiz]; 
```

请注意，我已经颠倒了您的 BOOL 变量的含义，因为我认为您应该避免使用双重否定（例如 isFound=YES 比 isnot=NO 更好）。

# search - Sphinx 搜索相关性。排名、排序、权重、关键字顺序

> ID：13149468
> 
> 赞同：2
> 
> 时间：2012-10-31T00:14:40.483
> 
> 标签：search, sphinx

我在 Sphinx 中遇到了相关性问题。我使用 SphinxQL 有一个相当简单的开箱即用设置，没什么特别的。我的数据库有大约 300k 个文档。默认排名模式。

搜索查询例如：“apple imac pro”(apple|imac|pro)。

**结果包含以下内容：**

1 个苹果 imac ...
2 个苹果 imac ...
3-20。苹果专业...

现在，我的数据库中当然没有“apple imac pro”这样的东西，但是当有更多“apple imac”和/或“imac apple”结果时，为什么它会跳到“apple pro”结果？如果“imac”更接近原始搜索查询中的行首，为什么它会跳到“pro”部分？

字段中关键字的顺序是否会影响顺序/权重？

**我对结果的期望是：**

1.  全部显示 "apple imac pro" - 没有
2.  显示所有“apple imac”或“imac apple”项目
3.  显示所有“apple pro”或“pro apple”项目/显示所有“imac pro”或“pro imac”项目
4.  显示所有“apple”或“imac”或“pro”项目

使用 MySQL 全文搜索，这种事情似乎更容易完成。结果会比 Sphinx 给我的更接近我的预期。

我尝试将排名模式更改为 sph04，但无济于事。

有什么我做错了吗？我能做些什么来“解决”这个问题吗？

提前致谢。

# c# - Perforce P4API.NET Repository.GetDepotFiles() 返回已删除的文件

> ID：13149481
> 
> 赞同：3
> 
> 时间：2012-10-31T00:16:31.213
> 
> 标签：c#, .net, file-io, perforce, p4api.net

我使用了 Perforce Repository.GetDepotFiles() 并注意到该函数返回与搜索模式匹配的文件，但也返回已在 Perforce Depot 中删除的文件。如何过滤搜索以排除已删除的文件？

我在 Depot 中进行文件搜索的代码：

```
IList<FileSpec> filesToFind = new List<FileSpec>();
FileSpec fileToFind = new FileSpec(new DepotPath("//depot/....cpp"), null, null, VersionSpec.Head);
filesToFind.Add(fileToFind);
IList<FileSpec> filesFound = pRep.GetDepotFiles(filesToFind, null); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-08T13:40:15.987

使用命令行 p4.exe，您可以获得未删除文件的列表，如下所示：

```
 p4 files -e //depot/....cpp 
```

该命令`p4 files`支持几个不同的标志，例如“-a”和“-A”。这些由 p4api.net.dll 支持：

```
 Options options = new FilesCmdOptions(FilesCmdFlags.AllRevisions, maxItems: 10);
  IList<FileSpec> filesFound = rep.GetDepotFiles(filesToFind, options); 
```

`FilesCmdFlags.AllRevisions`对应于'-a'标志（并且`FilesCmdFlags.IncludeArchives`是'-A'）。不幸的是，p4api.net.dll 似乎不支持“-e”。

但是有一个使用 P4Command 的解决方法：

```
 var cmd = new P4Command(rep, "files", true);
  StringList args = new StringList(new[] { "-e", "//depot/....cpp" });
  P4CommandResult result = cmd.Run(args);

  IEnumerable<FileSpec> foundFiles =
    result.TaggedOutput.Select(o => 
      new FileSpec(new DepotPath(o["depotFile"]),
                   null,
                   null,
                   VersionSpec.None));

  foreach (FileSpec file in foundFiles)
    Console.WriteLine("Found {0}", file.DepotPath); 
```

我正在使用 p4net.api.dll 版本 2013.3.78.1524。

# ios - 当它有焦点时突出显示ios文本框的简单方法？

> ID：13149482
> 
> 赞同：2
> 
> 时间：2012-10-31T00:16:40.450
> 
> 标签：ios, textbox, uitextfield, ios6

我们的 iOS6 应用程序数据输入量大且字体较小，我们希望让用户更容易在屏幕上的众多字段中找到当前关注的字段。

首先，我注意到 iOS 在默认情况下不会做任何事情来吸引用户的注意力到一个焦点文本字段，这与许多其他平台和应用程序不同。这是因为文本字段不应显示焦点突出显示是明确的设计指南还是隐含的应用商店*要求*？我不想因为这件小事而将我们的应用程序从应用程序商店中弹出。;-)

假设焦点突出显示是允许的，有没有一种简单的方法可以在文本框获得焦点时在文本框内部或外部显示“发光”，就像我可以在 web 应用程序上使用 CSS 一样`box-shadow`，就像在[这个 jsFiddle](http://jsfiddle.net/eYZWt/1/)中一样。

最后，您是否知道已经完成我们正在尝试做的 iOS 应用程序的好例子？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-31T00:43:41.363

我不认为这样做是被禁止的。尽管我认为 Apple 会建议是否有必要标记选定的文本字段，但您应该考虑将视图拆分为多个屏幕。单个屏幕不应该太杂乱。

但是，如果在您的情况下这是不可能或不想要的，那么实现“发光效果”的最简单方法是（根据您认为合适的方式修改值）：

```
#import <QuartzCore/QuartzCore.h>

textField.layer.masksToBounds = NO;
textField.layer.shadowColor = [[UIColor blueColor] CGColor];
textField.layer.shadowOffset = CGSizeZero;
textField.layer.shadowRadius = 10.0f;
textField.layer.shadowOpacity = 1.0; 
```

（不要忘记将 Quarz 框架添加到您的项目中）

它看起来像这样： ![在此处输入图像描述](../Images/7390b62aa37903c4b8bf72366dc6e9cd.png)

# java - 等距平铺生成

> ID：13149483
> 
> 赞同：2
> 
> 时间：2012-10-31T00:16:43.787
> 
> 标签：java, loops, isometric

所以我的问题是，通常当我生成我的地图时，我会使用以下内容：

```
for(int x = 0; x < width; x++) {
    for(int y = 0; y < height; y++) {
       tiles.add(new Tile(x, y));
    }
} 
```

你可以得到公正的。无论如何，我几乎需要以实用的方式在等距/45 度旋转中做到这一点。

说你要添加新 Tile(width / 2, 0) 的第一个循环。

下一个循环，您将添加 new Tile((width / 2) - 1, 0) 和 new Tile((width / 2) + 1, 0)。

我已经尝试了几种不同的方法来做到这一点，但没有取得太大的成功。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T00:44:25.333

如果我理解正确，您似乎正在尝试代表等距游戏的图块，例如：

![在此处输入图像描述](../Images/74e79904aac1f787024a119a80ae1bd2.png)

为此，您`Tile`的 s 使用以下布局存储其位置的 (x,y) 信息：

```
y \ x | 0 | 1 | 2 | 3 | 4 | 5 | 6
------+---+---+---+---+---+---+---
   0  |   |   |   | A |   |   |
------+---+---+---+---+---+---+---
   1  |   |   | B |   | C |   |
------+---+---+---+---+---+---+---
   2  |   | D |   | E |   | F |
------+---+---+---+---+---+---+---
      |   |   |   |   |   |   | 
```

等等。

但是，我建议将图块网格的内部表示与其显示方式分离。仅仅因为您想要等距图形并不一定意味着您也必须将`Tile`s' (x,y) 位置存储为菱形。

相反，请为每个图块尝试以下布局：

```
y \ x | 0 | 1 | 2 | 3 
------+---+---+---+---
   0  | A | C | F | 
------+---+---+---+---
   1  | B | E |   | 
------+---+---+---+---
   2  | D |   |   | 
------+---+---+---+---
      |   |   |   | 
```

也就是说， tile`A`创建为`new Tile(0,0)`， tile `B`as`new Tile(0,1)`等。

使用此表示，您将获得优势，即等轴测显示中的相邻图块仅`1`在 x 或 y 方向上有所不同。这应该使`tiles`列表的初始化步骤更加容易。

要将这些坐标映射到等轴测显示位置，请记住该`A`位置的图块位于`(0,0)`菱形的顶部。然后，您可以计算所有其他图块相对于该图块的显示位置：

*   x坐标的差异转化为向右和向下移动
*   y 坐标的差异转化为向左和向下移动

因此，让我们假设您的显示器`A`在像素坐标处呈现`(px, py)`，并且每个图块的呈现宽度为`pWidth`，高度为`pHeight`。

`tile`然后可以通过向右行走`tile.x`时间和向左行走时间来计算水平偏移量`tile.y`。由于等轴测视图，您在每一步中仅偏移一半宽度。

```
int pxTile = (tile.x - tile.y) * pWidth / 2 + px; 
```

垂直偏移的计算方法类似。虽然`tile.x`和`tile.y`在水平方向上相互抵消（因为左右彼此相反），但它们都有助于在垂直方向上向下移动。

```
int pyTile = (tile.x + tile.y) * pHeight / 2 + py; 
```

除非您的游戏进行滚动/缩放，否则您可以`Tile`在构造函数中计算每个右侧的像素坐标，因为它们仅取决于 (x,y) 的值和常量`width`、`px`、`py`、`pWidth`和`pHeight`。

# screen - ES文件资源管理器和其他文件浏览器中的Android /sdcard长时间显示黑屏（10+分钟）

> ID：13149484
> 
> 赞同：0
> 
> 时间：2012-10-31T00:16:43.933
> 
> 标签：screen

我正在使用 Android ICS 4.0.4

我的 ES 文件资源管理器、Solid Explorer、文件管理器和其他文件浏览器黑屏将近 10 分钟甚至更长时间。

我在 ES File Explorer 的 logcat 中找到了这些行：

```
W/ActivityManager(  388): Launch timeout has expired, giving up wake lock!
W/ActivityManager(  388): Activity idle timeout for ActivityRecord{4159fd50 com.estrongs.android.pop/.view.FileExplorerActivity} D/StateMachine(  388): handleMessage: E msg.what=131155

I/ActivityThread(14305): Pub com.estrongs.android.provider.fex: com.estrongs.android.pop.FexProvider 
I/ActivityThread(14305): Pub com.estrongs.files: com.estrongs.android.pop.app.FileContentProvider
E/ObjectHelper(14305): Can't find method:setCompatibilityInfo W/System.err(14305): java.io.FileNotFoundException: /sdcard/.estrongs/hide2.txt: open failed: ENOENT (No such file or directory)

I/ActivityManager(  388): Displayed com.estrongs.android.pop/.view.FileExplorerActivity: +4m35s322ms

I/ActivityManager(  388): Process com.estrongs.android.pop (pid 14305) has died.
W/ActivityManager(  388): Force removing ActivityRecord{417b2f88 com.estrongs.android.pop/.view.FileExplorerActivity}: app died, no saved state

I/WindowManager(  388): Input event dispatching timed out sending to application AppWindowToken{41c52bb0 token=Token{416c55d8 ActivityRecord{4159fd50 com.estrongs.android.pop/.view.FileExplorerActivity}}}
E/ActivityManager(  388): ANR in com.estrongs.android.pop (com.estrongs.android.pop/.view.FileExplorerActivity)
E/ActivityManager(  388): Reason: keyDispatchingTimedOut 
```

我不认为 SD 卡有任何问题，但我不是这方面的专家，所以任何人都可以给我一个线索，说明是什么导致了显示 SD 卡内容的巨大延迟？

例如，在 Solid Explorer 中，我有 2 个并排的窗口，左侧的一个以根文件和文件夹开头，并且该窗口总是可以的，但右侧的另一个窗口大部分时间显示 /sdcard 的内容一个带有旋转圆圈的黑屏，10 或 15 分钟后它会显示其中的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-03T23:15:12.387

可能您的文件 /media/your_device_name/.estrongs/hide2.txt 已损坏。你隐藏了一些文件夹吗？
尝试更正（或删除？我没有尝试）它。
我使用 Debian 完成了这项工作（在通过 USB 电缆连接我的平板电脑之后）。
祝你好运。

这是一个例子；旧文件包含：

```
-1 4 root014 5 local011 3 mnt011 6 sdcard012 6 Movies110 8 Pictures011 11 Screenshots110 3 smb010 3 net010 6 search010 
```

它显示了三个被错误隐藏的隐藏文件夹（电影、图片、截图）；工作文件包含：

```
-1 4 root014 5 local011 3 mnt011 6 sdcard012 6 smb010 3 net010 6 search010 
```

# javascript - jQuery mobile + iScroll，无法向下滚动

> ID：13149485
> 
> 赞同：12
> 
> 时间：2012-10-31T00:16:48.293
> 
> 标签：javascript, jquery, jquery-mobile, iscroll4, iscroll

我正在尝试将[jQuery Mobile](http://jquerymobile.com)与[iScroll 4](http://cubiq.org/iscroll-4)集成。我知道已经有一个[项目](https://github.com/watusi/jquery-mobile-iscrollview)可以做到这一点，但是，由于输入元素的[错误](https://github.com/watusi/jquery-mobile-iscrollview/issues/55)（打字时页面像疯了一样跳跃） ，我正在避免它。

我当前的实现如下所示：

**[http://jsfiddle.net/AqHsW/](http://jsfiddle.net/AqHsW/)** -*（JSFiddle 示例）* [[替代镜像](https://dl.dropbox.com/u/16088211/soBug.html)]

正如您可能注意到的那样，这完美无缺，除了一个主要问题： **无法向下滚动。**这个问题似乎是跨操作系统/浏览器。

但是，如果我重写该`onBeforeScrollStart`方法：

```
var scroller = new iScroll('wrapper', { onBeforeScrollStart: null }); 
```

它工作得更好一些。现在可以滚动，但行为会出现故障（以及响应缓慢），允许用户滚动他想要的高度等等。

*（但是，这样做似乎只会改变 iOS 上的内容）*

我现在正在寻找这个问题的解决方案，它最好支持 iOS 5 和 6，以及`<input>`元素的使用。考虑到 iScroll 和 jQuery Mobile 是当今的两个主要框架，这应该是一个很常见的问题。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-02T22:03:28.077

我用你的代码玩了一下，找到了一些东西和一个解决方案，检查[jsfiddle](http://jsfiddle.net/NUK88/2/)。

*   由于您加载*jQuery*，请使用`jQuery(document).ready()`.

*   在的直接子元素上初始化*iScroll*似乎`wrapper`比在`wrapper`.

*   我没有通过 CSS 设置包装器高度，而是使用 javascript 来更精确并避免溢出。

*   仅供参考，`scroll`已经被定义为一个函数。*（在你的小提琴中你用作`scroll`变量）*

*   现在它就像一个魅力！

* * *

```
$(function(){

    var footerHeight = $('[data-role="footer"]').outerHeight(true),
        headerHeight = $('[data-role="header"]').outerHeight(true),
        padding = 15*2; //ui-content padding

   $('#wrapper, #scroller').height( $(window).innerHeight() - headerHeight - footerHeight - padding );

   // To make inputs focusable,
   // you can rebind their touchend's event to trigger their focus

   $('input').on('touchend', function(){
       $(this).focus();
   });

   var iScroller = new iScroll('scroller');

});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-23T03:57:39.817

你可能会看到这个演示： http: [//lab.cubiq.org/iscroll5/demos/event-passthrough/](http://lab.cubiq.org/iscroll5/demos/event-passthrough/)

```
myScroll = new IScroll('#wrapper', { eventPassthrough: true, scrollX: true, scrollY: false, preventDefault: false }); 
```

# c# - 从列表框中删除选定的项目

> ID：13149486
> 
> 赞同：23
> 
> 时间：2012-10-31T00:16:49.097
> 
> 标签：c#, listbox

我想这样做，但是列表框在每次删除时都会更改，因此即使我尝试创建一个新对象，它也会引发运行时异常。

我试过这样：

```
ListBox.SelectedObjectCollection selectedItems = new ListBox.SelectedObjectCollection(lstClientes);
   selectedItems = lstClientes.SelectedItems;
if (lstClientes.SelectedIndex != -1)
{ 
    foreach (string s in selectedItems)
        lstClientes.Items.Remove(s);
}
else
    MessageBox.Show("Debe seleccionar un email"); 
```

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-10-31T00:24:14.680

`foreach`迭代（使用 a ）通过它时，您不能修改集合。而是使用反向`for`循环：

```
ListBox.SelectedObjectCollection selectedItems = new ListBox.SelectedObjectCollection(lstClientes);
selectedItems = lstClientes.SelectedItems;

if (lstClientes.SelectedIndex != -1)
{ 
    for (int i = selectedItems.Count - 1; i >= 0; i--)
        lstClientes.Items.Remove(selectedItems[i]);
}
else
    MessageBox.Show("Debe seleccionar un email"); 
```

使用反向循环可确保您在删除它们后不会跳过任何内容。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-31T00:21:56.787

```
selectedItems = lstClientes.SelectedItems; 
```

此行不会创建新集合，而是设置对列表框中的集合的引用。因此，您正在遍历一个集合并尝试立即从中删除项目。这不可能

您可以使用它，例如：

```
foreach (string s in lstClientes.SelectedItems.OfType<string>().ToList())
   lstClientes.Items.Remove(s); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-08-06T15:41:36.830

就像这样简单：

```
while (lst.SelectedItems.Count > 0)
{
   lst.Items.Remove(lst.SelectedItems[0]);
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-05-11T02:52:20.733

```
lst.Items.Remove(lst.Items[lst.SelectedIndex]); 
```

如果您不想循环，可以使用它

注意：这仅适用于删除 1 个项目（多选它只会删除第一个选定的项目）

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-08-14T23:32:38.440

为了建立帕特里克的回答，我倾向于使用反向索引删除，因为它保留了待删除项目的索引，而它们被删除而不删除相同的项目。

```
private void BtnDelete_Click(object sender, EventArgs e) {
    if (listBox.SelectedIndex == -1) {
        return;
    }

    // Remove each item in reverse order to maintain integrity
    var selectedIndices = new List<int>(listBox.SelectedIndices.Cast<int>());
    selectedIndices.Reverse();
    selectedIndices.ForEach(index => listBox.Items.RemoveAt(index));
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-02-04T11:08:20.997

我找到了更好的解决方案。

```
 if (listBoxIn.SelectedItems.Count != 0)
        {
            while (listBoxIn.SelectedIndex!=-1)
            {
                listBoxIn.Items.RemoveAt(listBoxIn.SelectedIndex);                  
            }
        } 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-01-02T06:48:26.613

我今天遇到了同样的问题，想要一些更清洁的东西，并提出了这个 Linq 解决方案：

```
foreach (int index in myListBox.SelectedIndices.Cast<int>().Select(x => x).Reverse())
    myListBox.Items.RemoveAt(index); 
```

与 Patrick 的向后迭代和删除选定项目的解决方案基本相同。然而，我们不是向后迭代，而是反转要删除的项目列表并向前迭代。我们不再遍历原始枚举，因此我们可以删除 foreach 中的项目。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-06-28T16:09:19.810

这是删除所选项目的最简单方法

```
 for(int v=0; v<listBox1.SelectedItems.Count; v++) {
            listBox1.Items.Remove(listBox1.SelectedItems[v]);
        } 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2016-05-06T09:41:32.423

创建一个全局变量：

```
public partial class Form1 : Form
    {

        Int32 index;
    } 
```

然后在选定的索引更改处将该索引保存在您定义的 var 中：

```
 private void lsbx_layers_SelectedIndexChanged(object sender, EventArgs e)
        {

           layerindex = lsbx_layers.SelectedIndices[0];//selected index that has fired the event
         } 
```

最后，删除元素：

```
 lsbx_layers.Items.RemoveAt(Layerindex); 
```

# php - MySQL：复杂查询动态选择？

> ID：13149487
> 
> 赞同：1
> 
> 时间：2012-10-31T00:17:00.917
> 
> 标签：php, mysql, sql, join

我现在在一个复杂的 MySQL 查询上搜索了很多次。

这是一个成就系统。

表结构简单，形式对称。

第一个表 (achievements_base) 包含成就参考：每个成就有： - 一个 ID（行的 ID，自动递增和唯一）， - 一个 code_id（成就的参考）， - 一个 rank_id（成就的子类别code_id), - 和成就名称（显示目的）。

第二个表（achievements_user）包含用户获得的成就：每个解锁的成就都有： - 一个 ID（如果是行，自动递增且唯一）， - code_id（成就的参考）， - rank_id（子- 成就的 code_id 类别）， - 和用户 ID。

表格语法是：

```
achievements_base
id - code_id - rank_id - name
1 - 1 - 1 - foo
2 - 1 - 2 - bar
3 - 1 - 3 - foobar
4 - 1 - 4 - foofoo
5 - 2 - 1 - barbar

achievements_user
id - code_id - rank_id - user_id
1 - 1 - 1 - 1
2 - 1 - 2 - 1
3 - 2 - 1 - 1 
```

我想显示用户没有的成就（GROUP BY code_id）

```
In the table exemple above, for example, expected result is, for the user_id 1 :
3 - 1 - 3 - foobar 
```

但我不知道该怎么做！我已经尝试过多次查询。

对不起我的英语，我是法国人！

谢谢 ！

编辑，我尝试过的查询之一的示例：

```
SELECT AB.name
FROM achievements_base AB
RIGHT JOIN achievements_users AU 
ON AU.code_id = AB.code_id AND AU.rank_id = AB.rank_id
WHERE (SELECT COUNT(*) FROM achievements_users AU WHERE AU.user_id = 1) = 0
GROUP BY AB.code_id
ORDER BY AB.code_id ASC 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T00:36:02.963

```
SELECT ab.*
FROM achievements_base ab
LEFT OUTER JOIN achievements_user au 
ON ab.id = au.code_id
WHERE au.user_id = {userid} 
```

未经测试，我刚刚学习联接，但外部联接绝对是您想要使用的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T00:37:28.700

下面的呢？

```
SELECT code_id
FROM achievements_base
WHERE code_id NOT IN
( 
   SELECT code_id
   FROM achievements_user
   WHERE user_id = 1
)
GROUP BY code_id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T00:37:00.780

这样的事情呢？**编辑**这应该可以解决问题..

```
SELECT 
    * 
FROM
    achievements_base 
WHERE id NOT IN 
    (SELECT 
        ab.id 
    FROM
        achievements_base ab 
        RIGHT JOIN achievements_user au 
            ON (
                ab.code_id = au.code_id 
                AND ab.rank_id = au.rank_id
            ) 
    WHERE au.user_id = 1) 
```

# jquery - jQuery mobile listview - 在右侧添加一些文本

> ID：13149490
> 
> 赞同：2
> 
> 时间：2012-10-31T00:17:24.260
> 
> 标签：jquery, jquery-mobile

我刚开始使用jquery mobile，所以请多多包涵。我正在尝试创建一个列表视图，其中项目的价格在右侧对齐（项目的描述与左侧对齐——这部分工作正常）。

我搜索了互联网，找不到任何可能对我有帮助的东西。

这是我的代码：

```
<div id="home" data-role="page">
    <div data-role="header">
            <h1>For sale</h1>
    </div>

    <div data-role="content">   
        <ul data-role="listview" data-inset="true" data-filter="false">
            <li><a href="#itemA">A</a></li>   <!-- want to put a right-aligned price in here!-->
            <li><a href="#itemB">B</a></li>
            <li><a href="#itemC">C</a></li>
            <li><a href="#itemD">D</a></li>
            <li><a href="#itemE">E</a></li>
        </ul>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T20:22:49.000

另一个想法：您可以添加一个 2 列网格，请参见此处[http://jquerymobile.com/test/docs/content/content-grids.html](http://jquerymobile.com/test/docs/content/content-grids.html)

> **两列网格**
> 
> 要构建一个两列 (50/50%) 的布局，从一个类为 ui-grid-a 的容器开始，并在其中添加两个子容器，第一列使用 ui-block-a 和 ui-block -b 第二个：
> 
> ```
> <div class="ui-grid-a">
>     <div class="ui-block-a"><strong>I'm Block A</strong> and text inside will wrap</div>
>     <div class="ui-block-b"><strong>I'm Block B</strong> and text inside will wrap</div>
> </div><!-- /grid-a --> 
> ```
> 
> 网格类可以应用于任何容器

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-19T15:39:17.920

I found the solution on the [documentation](http://jquerymobile.com/demos/1.2.1/docs/lists/lists-formatting.html).

You can use something like this within your `li` element:

```
<p class="ui-li-aside ui-li-desc"><strong>2.75</strong></p> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T01:21:19.900

you can override the CSS as described [here](http://jquerymobile.com/demos/1.2.0/docs/api/themes.html)

> **Overriding themes**
> 
> The themes are meant as a solid starting point, but are meant to be customized. Since everything is controlled by CSS, it's easy to use a web inspector tool to identify the style properties you want to modify.

in your case add this

```
 <style>
 .ui-page .ui-content .ui-listview .ui-li {
   text-align: right;
 }
 </style> 
```

and you will get this result
![enter image description here](../Images/6ead37029a3a4d5edb15aa5cf2bf5fc1.png)

**EDIT**: I just reread your question, you like to have the description on the left and only the price on the right, probably you should follow the advice of Jeff then...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-31T00:24:19.720

您可能正在寻找类似计数气泡的内容，这些内容显示在文档的[此页面](http://jquerymobile.com/demos/1.2.0/docs/lists/lists-count.html)上。您可以用价格替换计数。

该[文档](http://jquerymobile.com/demos/1.2.0/docs/lists/docs-lists.html)指出：

> 要在列表项的右侧添加计数指示符，请将数字包装在具有类的元素中`ui-li-count`

# list - 如何通过以下方式组合非对称列表

> ID：13149493
> 
> 赞同：2
> 
> 时间：2012-10-31T00:17:36.017
> 
> 标签：list, scala

> **可能重复：**
> [Scala - 可以通过 for 循环多次使用 yield 吗？](https://stackoverflow.com/questions/1140164/scala-can-yield-be-used-multiple-times-with-a-for-loop)
> [两个列表的笛卡尔积](https://stackoverflow.com/questions/8217764/cartesian-product-of-two-lists)

我尝试通过以下方式组合一些 Scala 列表，但到目前为止没有成功。

```
List (List ("abc", "def"), List ("gh", "ij", "kl"), List ("mnop") ...) 
```

-> 结果应该是

```
List(
List("abc", "gh", "mnop"),
List("abc", "ij", "mnop"),
List("abc", "kl", "mnop"),
List("def", "gh", "mnop"),
List("def", "ij", "mnop"),
List("def", "kl", "mnop")
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T01:19:52.603

```
for {
  a <- List("abc","def")
  b <- List("gh", "ij", "kl")
  c <- List("mnop")
} yield List(a, b, c) 
```

# objective-c - 动画多个精灵 Cocos2d

> ID：13149496
> 
> 赞同：2
> 
> 时间：2012-10-31T00:18:07.890
> 
> 标签：objective-c, ios, animation, cocos2d-iphone

我正在尝试在我目前正在开发的游戏中向游戏层添加多个动画精灵。为此，我创建了一个实例 sprite: bunsen，并且对于需要添加的每个 bunsen，我运行这个循环：

```
else if (blockValue == 2 || blockValue == 3 || blockValue == 4 || blockValue == 5) {
                bunsen = [CCSprite spriteWithSpriteFrameName:@"15_1.png"];
                if (blockValue == 2) {
                    bunsen.rotation = 90;
                }
                else if (blockValue == 3) {
                    bunsen.rotation = 180;
                }
                else if (blockValue == 4) {
                    bunsen.rotation = 270;
                }
                float tileY = screenSize.height-((countery*startData4)+startData4/2+7.5)/2;
                float tileX = ((counterx*startData4)+startData4/2+5)/2;
                bunsen.position = ccp(tileX,tileY);
                tileName = [NSString stringWithFormat:@"%i.png",blockValue];
                [bunsen runAction:bunsens];
                [bunsenAnimation addChild:bunsen];

            } 
```

如果一个级别上只有一个本生，这很好用，但是当有多个本生时，只有最后一个被添加的本生是动画的，我假设这是因为所有以前的本生实例都被设置回`[CCSprite spriteWithSpriteFrameName:@"15_1.png"];`所以我然后将我的代码更改为：

```
else if (blockValue == 2 || blockValue == 3 || blockValue == 4 || blockValue == 5) {
                CCSprite *bunsen = [CCSprite spriteWithSpriteFrameName:@"15_1.png"];
                if (blockValue == 2) {
                    bunsen.rotation = 90;
                }
                else if (blockValue == 3) {
                    bunsen.rotation = 180;
                }
                else if (blockValue == 4) {
                    bunsen.rotation = 270;
                }
                float tileY = screenSize.height-((countery*startData4)+startData4/2+7.5)/2;
                float tileX = ((counterx*startData4)+startData4/2+5)/2;
                bunsen.position = ccp(tileX,tileY);
                tileName = [NSString stringWithFormat:@"%i.png",blockValue];
                [bunsen runAction:bunsens];
                [bunsenAnimation addChild:bunsen];

            } 
```

注意这次本生的本地声明，所有这些结果是没有一个精灵变成动画......如果我`bunsen = [CCSprite spriteWithSpriteFrameName:@"15_1.png"];`在 else if 循环开始之前移动到，那么我会得到一个错误：已经添加了孩子或其他东西线，所以基本上我需要做的是重新声明本生，这样它就不会在不停止先前添加的本生上的动作“本生”的情况下抛出一个孩子已经添加的错误，但是我想不出任何简单的方法这样做……有人吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T20:05:34.480

您不能在多个节点上运行相同的操作。只是改变

```
runAction:bunsens 
```

到

```
runAction:[bunsens copy] 
```

# dictionary - 二维数组的 IEqualityComparer 实例

> ID：13149499
> 
> 赞同：0
> 
> 时间：2012-10-31T00:18:32.733
> 
> 标签：dictionary, f#, hashset, iequalitycomparer, structural-equality

F# 支持二维数组与`=`运算符的结构相等性，以及在 F# 集合（如`Set`. 但是如何在 .NET 类中使用相同的相等比较`HashSet`呢？默认情况下，它使用引用相等，尽管有一个构造函数采用`IEqualityComparer<T>`I 的实例，但无法找到适合二维数组的内置实例。

我看了看`System.Collections.StructuralComparisons.StructuralEqualityComparer`，但这似乎有两个问题。首先，它不是通用的，其次，它似乎不支持二维数组：

```
> let xss = Array2D.create 2 2 99;;
> let yss = Array2D.create 2 2 99;;

// `=` operator does what I want
> xss = yss;;
val it : bool = true

// pre-defined StructuralEqualityComparer object doesn't work
> open System.Collections;;
> let comp = StructuralComparisons.StructuralEqualityComparer;;
val comp : IEqualityComparer
> (xss :> IStructuralEquatable).Equals(yss, comp);;
System.ArgumentException: Array was not a one-dimensional array.
   at System.Array.GetValue(Int32 index)
   at System.Array.System.Collections.IStructuralEquatable.Equals(Object other, IEqualityComparer comparer)
   at <StartupCode$FSI_0023>.$FSI_0023.main@() 
```

最终，我想修复以下代码，使其返回 1，而不是 2：

```
> let hashset = new Generic.HashSet<int[,]>();;
> hashset.Add xss;;
> hashset.Add yss;;
> hashset.Count;;
val it : int = 2 
```

我也会对使用 的解决方案感到满意`Dictionary`，但我认为同样的问题也适用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T00:25:24.803

```
let a = Array2D.create 2 2 99
let b = Array2D.create 2 2 99
let set = System.Collections.Generic.HashSet(HashIdentity.Structural)
set.Add a
set.Add b
printfn "%A" set.Count // 1 
```

[[在线演示](http://ideone.com/9kQUEs)]

# lambda - 在 Scheme 中使用“let over lambda”形式定义多个局部函数

> ID：13149500
> 
> 赞同：1
> 
> 时间：2012-10-31T00:18:41.300
> 
> 标签：lambda, scheme, sicp, lexical-scope

我对在 Scheme 中定义多个可以相互调用的词法范围函数感到好奇。在 SICP 工作时，我使用块结构生成了以下函数来解决练习 1.8（使用牛顿法计算立方根）：

```
(define (cbrt x)
  (define (good-enough? guess prev-guess)
    (< (/ (abs (- guess prev-guess))
          guess)
       0.001))
  (define (improve guess)
    (/ (+ (/ x (square guess))
          (* 2 guess))
       3))
  (define (cbrt-iter guess prev-guess)
    (if (good-enough? guess prev-guess)
        guess
        (cbrt-iter (improve guess)
                   guess)))
  (cbrt-iter 1.0 0.0)) 
```

这很好用，但它让我想知道 Scheme（也许还有 Common Lisp）如何使用词法作用域和`let`表单来处理相同的场景。我尝试使用`let`以下 kludgy 代码来实现它：

```
(define (cbrt x)
  (let ((calc-cbrt
         (lambda (guess prev-guess)
           (let ((good-enough?
                  (lambda (guess prev-guess)
                    (< (/ (abs (- guess prev-guess))
                          guess)
                       0.001))))
             (good-enough? guess prev-guess))
           (let ((improve
                  (lambda (guess)
                    (/ (+ (/ x (square guess))
                          (* 2 guess))
                       3))))
             (improve guess))
           (let ((cbrt-iter
                  (lambda (guess prev-guess)
                    (if (good-enough? guess prev-guess)
                        guess
                        (cbrt-iter (improve guess)
                                   guess)))))
             (cbrt-iter 1.0 0.0)))))
    (calc-cbrt 1.0 0.0))) 
```

我在下面看到的问题是`cbrt-iter`尝试调用该`good-enough?`过程时。由于该`good-enough?`过程仅在第一个嵌套 `let`块的范围内是本地的，`cbrt-iter`因此无法访问它。似乎可以通过将`cbrt-iter`函数嵌套在 的`let`中来解决`good-enough`，但这似乎也很笨拙和尴尬。

`define`在这种情况下，有什么不同的形式？表单是否`define`扩展到`lambda`表达式而不是“让 lambda”表单（我记得在 Little Schemer 书中使用表单做了类似的事情`((lambda (x) x x) (lambda (y) ...))`，但我不确定这将如何工作）。此外，作为比较，Common Lisp 如何处理这种情况——是否可以使用词法范围`defun`的 's ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T01:33:16.833

首先，你不需要引入一个新的过程`calc-cbrt`——你可以直接调用`calc-iter`。

其次，和的含义`define`大相径庭`let`。 `Define` *将定义安装*到本地范围中，如您的示例中所示。然而，`let`表达式只是表达式的语法糖`lambda`（详见 SICP 1.3 节）。结果（正如您提到的），声明的变量 via`(let (<decl1> ...) <body>)`仅在`<body>`. 因此，您的模式`(let <decls1> <body1>) (let <decls2> <body2>) ...`不起作用，因为没有一个定义将“幸存”以在其他范围内看到。

所以，我们应该这样写：

```
(define (cbrt x)
   (let ((good-enough? (lambda ...))
         (improve (lambda ...))
         (cbrt-iter (lambda ...)))
     (cbrt-iter 1.0 0.0))) 
```

现在，至少，调用`cbrt-iter`可以看到`cbrt-iter`.

但是还是有问题。当我们评估 时，我们评估where`(cbrt-iter 1.0 0.0)`的主体并取值 1.0 和 0.0。但是，在 的主体中，变量和不在范围内。`cbrt-iter``guess``prev-guess``cbrt-iter``improve``good-enough?`

您可能很想使用嵌套`let`的 s，这通常是一个不错的选择：

```
(define (cbrt x)
   (let ((good-enough? (lambda ...))
         (improve (lambda ...)))
     (let ((cbrt-iter (lambda ...)))
       (cbrt-iter 1.0 0.0)))) 
```

问题是 cbrt-iter 需要调用自己，但直到 inner 的主体才在范围内`let`！

这里的解决方案是使用`letrec`，这类似于`let`但使新绑定在所有声明以及正文中可见：

```
(define (cbrt x)
   (let ((good-enough? (lambda ...))
         (improve (lambda ...)))
     (letrec ((cbrt-iter (lambda ...)))
       (cbrt-iter 1.0 0.0)))) 
```

我们甚至可以`letrec`用来创建相互递归的过程，就像我们可以使用`define`.

不幸的是，我需要一些时间来解释如何`letrec`以及`define`实际工作，但这是秘密：它们都在内部使用*突变*来在环境数据结构中创建循环，允许递归。（还有一种方法可以使用 only 创建递归`lambda`，称为*Y 组合*器，但它相当复杂且效率低下。）

幸运的是，所有这些秘密都将在第 3 章和第 4 章中揭晓！

从另一个角度来看，你可以看看[布朗大学的在线 PL 课程](http://www.cs.brown.edu/courses/csci1730/2012/)，它基本上直接进入了这个主题（虽然它省略了`define`），但我发现 SICP 更擅长强迫你理解所创建的有时复杂的环境结构。

# html - html 充斥着 ahref 标签

> ID：13149504
> 
> 赞同：0
> 
> 时间：2012-10-31T00:19:09.183
> 
> 标签：html

我正在为我的网站编写一个前端页面，它由代码 igntier 运行，但现在基本上只是视图文件中的 HTML / CSS。

我遇到的问题是我有一个“通知”框，在我所有的 PHP 编辑器中看起来都很好（我主要使用 sublime text 2，但我在 php eclipse 和 notpad++ 中检查我的代码是否有干净的缩进）但是当我打开它时使用浏览器，每个 DIV 上面都有一个 /a，每个评论都用一个

我在谷歌上搜索“充满 ahref 的 HTML”，它只是带来了纽约因飓风桑迪而泛滥的新闻，这对我完全有帮助。

我有连接到 HTML 的社交媒体，但我删除了它并且标签仍然存在。

我有诺顿的谷歌浏览器扩展和我的指纹扫描仪，我禁用了它们，没有任何帮助。

我从我的页面中删除了所有 jquery，除了 src="jquery.js" 拉入 jquery 源。

我什至还尝试重命名所有通知类名称，但没有帮助。

请帮忙！下面是一些源代码：

```
 <div class="notifications">
                <a href="#">Notifications <span class="notify-number">2</span></a>

                <div class="notifications-container">

                    <div class='notification'>

                        <div class='notification-left'><img src="<?php echo base_url(); ?>misc/image/uploads-user.-pics-sample.-pic1.png/40/40"></div>
                        <!-- End notification Left -->

                        <div class='notification-right' id="blah">Your friend <span>Alex</span> changed their profile picture.</div>
                        <!-- End notification right -->

                        <div class='notification-close'><a href="#">X<a></div>
                        <!-- End Notification Close -->

                        <div class="spacer"></div>

                    </div>
                    <!-- End Notification -->

                    <div class='notification'>

                        <div class='notification-left'><img src="<?php echo base_url(); ?>misc/image/images-icons-calendar.png/40/40"></div>
                        <!-- End notification Left -->

                        <div class='notification-right'>"2012 Ending Giveaway" is ending in a day or less! <a href="#">Check it out here!</a></div>
                        <!-- End notification right -->

                        <div class='notification-close'><a href="#">X<a></div>
                        <!-- End Notification Close -->

                        <div class="spacer"></div>

                    </div>
                    <!-- End Notification -->

                    <div class='notification'>

                        <div class='notification-left'><img src="<?php echo base_url(); ?>misc/image/images-icons-document.png/40/40"></div>
                        <!-- End notification Left -->

                        <div class='notification-right'>There are new tutorials for you to view! <a href="#">Check here to view tutorials!</a></div>
                        <!-- End notification right -->

                        <div class='notification-close'><a href="#">X<a></div>
                        <!-- End Notification Close -->

                        <div class="spacer"></div>

                    </div>
                    <!-- End Notification -->

                    <div class='notification'>

                        <div class='notification-left'><img src="<?php echo base_url(); ?>misc/image/images-icons-video.png/40/40"></div>
                        <!-- End notification Left -->

                        <div class='notification-right'>There is new videos for you to view! <a href="#">Check here to view videos!</a></div>
                        <!-- End notification right -->

                        <div class='notification-close'><a href="#">X<a></div>
                        <!-- End Notification Close -->

                        <div class="spacer"></div>

                    </div>
                    <!-- End Notification -->

                    <div class='notification'>

                        <div class='notification-left'><img src="<?php echo base_url(); ?>misc/image/images-icons-video.png/40/40"></div>
                        <!-- End notification Left -->

                        <div class='notification-right'>Your friend <span>Izikea</span> added a new video! <a href="#">Check here to see it!</a></div>
                        <!-- End notification right -->

                        <div class='notification-close'><a href="#">X<a></div>
                        <!-- End Notification Close -->

                        <div class="spacer"></div>

                    </div>
                    <!-- End Notification -->

                    <div class='notification'>

                        <div class='notification-left'><img src="<?php echo base_url(); ?>misc/image/images-icons-document.png/40/40"></div>
                        <!-- End notification Left -->

                        <div class='notification-right'>Your friend <span>Izikea</span> added a new tutorial <a href="#">Check here to see it!!</a></div>
                        <!-- End notification right -->

                        <div class='notification-close'><a href="#">X<a></div>
                        <!-- End Notification Close -->

                        <div class="spacer"></div>

                    </div>
                    <!-- End Notification -->

                    <div class='notification'>

                        <div class='notification-left'><img src="<?php echo base_url(); ?>misc/image/images-icons-post.-wall.png/40/40"></div>
                        <!-- End notification Left -->

                        <div class='notification-right'>Your friend <span>Izikea</span> posted on your wall <a href="#">Check here to see it!!</a></div>
                        <!-- End notification right -->

                        <div class='notification-close'><a href="#">X<a></div>
                        <!-- End Notification Close -->

                        <div class="spacer"></div>

                    </div>
                    <!-- End Notification -->

                </div>
                <!-- End Notifications Container -->

            </div>
            <!-- End Notifications --> 
```

这是我在页面上的社交媒体。

```
 <div class="social-media">

                    <div class="facebook-like-button">
                        <div class="fb-like" data-href="http://www.grosource.com" data-send="true" data-layout="button_count" data-width="150" data-show-faces="false"></div>
                    </div>

                    <div class="twitter-follow-button">
                        <a href="https://twitter.com/GroSource" class="twitter-follow-button" data-show-count="false" data-lang="en">Follow @twitterapi</a>
                        <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
                    </div>
                    <div class="twitter-tweet-button">
                        <a href="http://www.grosource.com/" class="twitter-share-button" data-lang="en">Tweet</a>
                        <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="https://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
                    </div>

                    <div class="google-plus-button">
                        <!-- Place this tag where you want the +1 button to render. -->
                        <g:plusone size="medium" href="http://www.grosource.com/"></g:plusone>

                        <!-- Place this tag after the last +1 button tag. -->
                        <script type="text/javascript">
                          (function() {
                            var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
                            po.src = 'https://apis.google.com/js/plusone.js';
                            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
                          })();
                        </script>
                    </div>

                </div> 
```

如果您需要更多，请告诉我。

谢谢，大卫

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T00:21:42.490

错误的结束标签。

```
<a href="#">X<a> 
```

应该：

```
<a href="#">X</a> 
```

应该有结束标签，而不是在最后打开。检查其他人。我至少看到了3个。

# visual-studio - Windows Phone 8 模拟器错误 - 创建开关时发生了一些事情

> ID：13149509
> 
> 赞同：59
> 
> 时间：2012-10-31T00:20:05.027
> 
> 标签：visual-studio, windows-phone-8

我有一个类似的问题，如这个问题中提到的：

[无法创建虚拟机](https://stackoverflow.com/questions/13148828/windows-phone-8-unable-to-create-the-virtual-machine)

但是，我的问题在错误描述中有点不同：

![在此处输入图像描述](../Images/24d92a454b62bcf321a800cc753628ea.png)

*Windows Phone 模拟器无法创建虚拟机：创建交换机时发生了一些事情：Xde 找不到主机的 IPv4 地址。*

我有 SLAT 兼容的硬件，在 BIOS 中启用了虚拟化，我的 Windows 8 安装是 64 位并且它**没有被**虚拟化。Hyper-V 已安装（尝试重新安装它，但没有帮助）。编辑：未安装 VirtualBox 或任何其他虚拟化软件（Hyper-V 除外）

EDIT2：似乎已经安装了其他一些网络软件。必须删除它很糟糕，因为我专业需要它。我希望他们修复它。

EDIT3：我[在我的博客上找到了更多详细信息。](http://igrali.com/2012/10/31/windows-phone-8-emulator-wasnt-able-to-create-the-virtual-machine/)

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-11-02T22:09:55.530

它已经得到了回答，但是对我来说更容易（并且无需卸载 VirtualBox）：

*“进入 Hyper V。进入虚拟交换机管理器。创建一个名为“Windows Phone Emulator Internal Switch”的虚拟交换机。将其设置为内部连接类型。现在启动模拟器。它应该可以工作。”*

在运行模拟器之前我必须重新启动机器，但现在一切正常：VS2012、Xde 和 VirtualBox。

积分转到[TheGeekNextDoor](http://social.msdn.microsoft.com/Forums/en-US/wptools/thread/10877c5a-a0f4-4552-a28b-987562615189#ecb48323-948f-450a-ae56-e4c940dbff15)。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-10-31T01:00:09.283

从开始菜单打开 Hyper-V 管理器，然后打开虚拟交换机管理器。移除所有现有交换机，并尝试创建一个新的虚拟交换机，并将连接类型设置为内部。

之后您可能需要运行`XdeCleanup.exe`。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2012-10-31T00:44:23.040

有同样的错误信息。删除 VirtualBox 后，一切正常

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-01-18T16:00:40.547

对于它的价值，在我关闭所有 vEthernet 适配器上的“确定性网络增强器”后，我的问题似乎消失了，如下所示：

![网络适​​配器设置](../Images/0dd56f8bc8b626fd1a9010d07884937c.png)

[我受到启发，按照此处](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj681694%28v=vs.105%29.aspx)Microsoft 的在线文档进行了尝试。请参阅标题为“重新配置模拟器使用的 Hyper-V 虚拟适配器”的部分。

希望这个坚持。这是一个累人的过程，试图跟上什么工作，而不是这个“新的和增强的”模拟器。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-11-04T02:44:36.297

这对我有用。转到 Windows 8 开始屏幕。向右滚动并查看 HyperV 磁贴。

进入 Hyper V。进入 Virtual Switch Manager。创建一个名为“Windows Phone Emulator Internal Switch”的虚拟交换机，使其连接类型为内部。

现在启动模拟器。它应该工作。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2014-02-01T20:08:13.550

这里的一些答案很有帮助，通过测试试错法，我找到了适合我的解决方案。注意：我在 Windows 8 64 位上安装了 Cisco VPN 客户端。我不想删除 Cisco 客户端。

1.  打开 Hyper-V Manager – Virtual Switch Manager 并创建名为“Windows Phone Emulator Internal Switch”的虚拟交换机。使其连接类型为“内部”。您不必删除任何现有的虚拟交换机。
2.  打开“网络连接”。右键单击“vEthernet Windows Phone Emulator Internal Switch”并选择“属性”。取消选择“确定性网络增强器”，然后单击“确定”。您也可以使用其他 vEthernet 接口来做到这一点。
3.  运行模拟器，它应该可以工作。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-11-01T07:49:50.227

Xde 目前似乎与 Cisco VPN Client v5.x 不兼容；安装 VPN 客户端后，您确实会收到此错误。卸载 Cisco VPN Client 可解决此问题。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2013-04-23T11:56:21.597

这帮助我解决了同样的问题：http: [//mobileworld.appamundi.com/blogs/petevickers/archive/2012/11/01/troubleshooting-windows-phone-8-emulator-problems.aspx](http://mobileworld.appamundi.com/blogs/petevickers/archive/2012/11/01/troubleshooting-windows-phone-8-emulator-problems.aspx)

无需卸载virtualbox，甚至可以同时运行

希望这对某人有帮助

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-04-08T16:48:47.723

我找到了解决这个愚蠢错误的方法。我在这个问题上工作了将近 1 个月。

我最近刚做了两件事，我的模拟器确实在 Hyper-V 中创建了虚拟机，并将我的应用程序部署到了模拟器中。

1.  禁用防病毒软件。（我用的是熊猫云杀毒）
2.  如果您关闭了，请启用防火墙

我希望这会奏效。

谢谢。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2013-05-25T19:50:34.370

我遇到了一些问题。最后，通过随机禁用和启用我的网络适配器，即使是外部适配器，我也能够让虚拟交换机正常工作。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-08-23T20:11:29.757

我可以通过删除 VMWare Player 和 Virtual Box 来解决此问题，然后执行 Windows Phone 8 SDK 的修复安装（控制面板-> 卸载 -> Windows Phone 8 SDK -> 更改 -> 修复

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-08-09T21:42:21.743

如果此问题发生在 Windows 10 上，有一个简单的解决方法...导航到：

*   开始菜单
*   设置
*   网络和互联网
*   地位
*   网络重置

这会清理所有虚拟网络适配器，以便模拟器可以重新创建它们。重新启动后，删除模拟器，然后重新创建它，它应该创建必要的网络适配器，使其能够正常工作。

**免责声明：**这项技术适用于我在 Windows 10 机器上使用 Visual Studio Emulator for Android。我知道它不是 Windows 8，也不是 Windows Phone 模拟器，但根本问题是一样的，所以如果有人登陆这里并拥有 Windows 10，你可能想试试这个。

# actionscript-3 - 访问 AS3 中的子类属性

> ID：13149512
> 
> 赞同：0
> 
> 时间：2012-10-31T00:20:48.857
> 
> 标签：actionscript-3, flash, class

我无法访问类的子对象的属性。当我尝试跟踪它时出现此错误：

> 通过静态类型 flash.display:DisplayObject 的引用访问可能未定义的属性tipo。

我的代码如下：

**班级**

```
public class naftaBonusClass extends MovieClip {
    private var _tipo = "nafta";

    public function get tipo():String
    {
        return _tipo;
    }
} 
```

**主要的**

```
if (getChildAt(i).localToGlobal(new Point(stage.y,0)).y > 650){
    trace(getChildAt(i).tipo);
    removeChildAt(i);
} 
```

我的另一个问题是我是否可以知道孩子的班级，因为我想管理各种不同的班级并知道每个孩子是什么班级。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T00:34:43.153

您需要先将结果`.getChildAt()`转换为您的`naftaBonusClass`对象：

```
if(getChildAt(i).localToGlobal(new Point(stage.y, 0)).y > 650)
{
    var myObj:naftaBonusClass = getChildAt(i) as naftaBonusClass;
    trace(myObj.tipo);

    removeChildAt(i);
} 
```

或者简单地说：

```
trace((getChildAt(i) as naftaBonusClass).tipo); 
```

[这是有关 AS3 中的类型转换的更多信息](https://stackoverflow.com/questions/9660275/as3-casting-one-type-to-another/9660323#9660323)。

至于不知道每个对象将是什么，这是您需要正确清理和管理的东西。例如，您可以将每个元素存储在一个数组中，并且每个数组都应该包含某种类型的对象。然后，您将能够使用类型化`for each()`循环查看 Array：

```
for each(var i:naftaBonusClass in naftaList)
{
    trace(i.tipo);
} 
```

更进一步，您可以为您的对象创建一个基类并在其中存储一个方法，该方法将在您的循环中调用。这样，您只需要强制转换为基类并调用该方法，该方法可以在您的子类中被覆盖：

```
class MyChild extends MovieClip
{
    public function update():void{ }
} 
```

然后你的修改`naftaBonusClass`：

```
class naftaBonusClass extends MyChild
{
    private var _tipo:String = "nafta";

    // This is where the work should be done.
    override public function update():void
    {
        trace(tipo);
    }

    public function get tipo():String
    {
        return _tipo;
    }
} 
```

和你更新的循环：

```
if(getChildAt(i).localToGlobal(new Point(stage.y, 0)).y > 650)
{
    (getChildAt(i) as MyClass).update();
    removeChildAt(i);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T01:17:06.347

您可能希望对该实例进行类型转换，除非您希望将其视为显示对象：

```
if (getChildAt(i).localToGlobal(new Point(stage.y,0)).y > 650) {
    trace(naftaBonusClass(getChildAt(i)).tipo);
    removeChildAt(i);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T01:22:33.250

马蒂告诉你的是实现你想要的最好的方法。但是如果你无法知道或控制对象的类，那么你总是可以向下转换它们并像这样访问tipo：

```
if (getChildAt(i).localToGlobal(new Point(stage.y,0)).y > 650){
    var theObject:Object = getChildAt(i) as Object;
    if(theObject.hasOwnProperty("tipo")){
        trace(theObject.tipo);
    }
    removeChildAt(i);
} 
```

# windows-7 - 对 _gzopen 等的未定义引用

> ID：13149515
> 
> 赞同：2
> 
> 时间：2012-10-31T00:21:11.913
> 
> 标签：windows-7, g++, cygwin, mingw

嗨，我有一个在非 Windows 机器上构建的 c 程序（我认为是 ubuntu 机器，但也可能是 mac os）。

我快速浏览了一下并尝试了cygwin（安装了cygwin，使用终端转到包含c程序的目录并调用make。）

这产生：

```
$ make
g++ -lz -Wextra -O3 -o bin/lda src/lda_main.o src/data.o src/lda.o c/lda_init.o
   src/lda_io.o src/lda_sampler.o src/opts.o

src/data.o:data.cpp:(.text+0x5d): undefined reference to `_gzopen'
src/data.o:data.cpp:(.text+0x9e): undefined reference to `_gzgets'
src/data.o:data.cpp:(.text+0x138): undefined reference to `_gzgets'
src/data.o:data.cpp:(.text+0x1f0): undefined reference to `_gzgets'
src/data.o:data.cpp:(.text+0x257): undefined reference to `_gzclose'
src/data.o:data.cpp:(.text+0x3cb): undefined reference to `_gzopen'
src/data.o:data.cpp:(.text+0x498): undefined reference to `_gzgets'
src/data.o:data.cpp:(.text+0x4b4): undefined reference to `_gzclose'

/usr/lib/gcc/i686-pc-cygwin/4.5.3/../../../../i686-pc-cygwin/bin/ld: src/data.o:
   bad reloc address 0x1c in section `.eh_frame'
collect2: ld returned 1 exit status
Makefile:16: recipe for target `lda' failed
make: *** [lda] Error 1 
```

我确实安装了 gcc g++ 以及 zlib。

然后我在正确的目录中使用 mingw32-make 尝试了 mingw32。返回错误的速度比眼睛看到的要快： `ld.exe: cannot find -lz`

有什么建议么？请记住，我是一名受过培训的经济学家，我们知道这有多么有用:-)。简单会和我走得很远。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T00:45:09.603

更改生成文件，使其`-lz`位于目标文件列表之后。

使用命令行：

```
g++ -lz -Wextra -O3 -o bin/lda src/lda_main.o src/data.o src/lda.o src/lda_init.o
   src/lda_io.o src/lda_sampler.o src/opts.o 
```

不会在库中搜索各种目标文件所需的外部引用。如果你安排它，命令看起来像：

```
g++ -Wextra -O3 -o bin/lda src/lda_main.o src/data.o src/lda.o src/lda_init.o
   src/lda_io.o src/lda_sampler.o src/opts.o -lz 
```

然后`libz`将搜索目标文件需要的任何外部引用。

# https - Restkit SSL 教程

> ID：13149516
> 
> 赞同：0
> 
> 时间：2012-10-31T00:21:21.337
> 
> 标签：https, restkit

我尝试将 restkit 与 SSL 一起使用，但它不起作用。我有以下例外：

" Domain=NSURLErrorDomain Code=-1200 "发生 SSL 错误，无法与服务器建立安全连接。" 用户信息=0xc465d70

我在论坛上阅读了文档并发布了问题，但没有答案...

*   我添加了安全框架
*   我试图设置 RESTKIT_SSL_VALIDATION 指令......但我不清楚如何设置这个指令：在项目中使用 restkit ？湾。还是在restkit项目本身？C。XCode 中的菜单设置此指令？

我在 Restkit 论坛上发布的 Restkit 问题： [https ://groups.google.com/forum/?fromgroups=#!topic/restkit/8BW_1L2btIA](https://groups.google.com/forum/?fromgroups=#!topic/restkit/8BW_1L2btIA)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T06:16:12.967

我认为这是一种网络问题，请尝试以下步骤：-

-尝试重新启动 iMac/MacBook

-尝试重新启动互联网路由器

- 尝试使用完全不同的互联网连接（例如在朋友家或网吧）

此外，让我们尝试设置 disableCertificateValidation = YES。在您的 RKClient 中。

# r - R：在继承 data.frame 的 S4 对象上应用 terms.formula

> ID：13149517
> 
> 赞同：4
> 
> 时间：2012-10-31T00:21:22.160
> 
> 标签：r, inheritance, s4

我正在尝试创建一个从数据框继承的新类：

```
> setClass('new.frame',
    representation(colour='character'),
    contains = 'data.frame') 
```

这是该类的一个实例，用于测试：

```
> test_data = data.frame(cbind(runif(5), runif(5)))
> names(test_data) = c('X', 'Y')
> test_frame = new('new.frame', test_data, colour='red') 
```

只是为了确保它看起来没问题...

```
> data.frame
Object of class "new.frame"
          X         Y
1 0.8766306 0.4741213
2 0.1221508 0.5117665
3 0.4838761 0.4973627
4 0.7858294 0.4064749
5 0.5147703 0.9135304
Slot "colour":
[1] "red" 
```

...并确保继承有效

```
> is.data.frame(test_frame)
[1] TRUE
> getClass(class(test_frame))
Class "new.frame" [in ".GlobalEnv"]

Slots:

Name:                .Data              colour               names
Class:                list           character           character

Name:            row.names            .S3Class
Class: data.frameRowLabels           character

Extends: 
Class "data.frame", directly
Class "list", by class "data.frame", distance 2
Class "oldClass", by class "data.frame", distance 2
Class "vector", by class "data.frame", distance 3 
```

这是我在尝试利用作为数据框的属性时遇到的问题：

```
> terms.formula(Y ~ X, data = test_frame)
Error in terms.formula(Y ~ X, data = test_frame) : 
  'data' argument is of the wrong type 
```

我可能错过了一些愚蠢的事情。如果是这样，在此先感谢您指出。

如果我对这里的问题是正确的，那么无论如何我可以让 terms.formula 认识到我给它一个 data.frame 的事实吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T07:33:23.420

执行`debug(terms.formula)`然后运行`terms.formula(Y ~ X, data = test_frame)`表明您的代码在引用代码块的第 3 行和第 4 行失败：

```
if (!is.null(data) && !is.environment(data) && !is.data.frame(data)) 
    data <- as.data.frame(data, optional = TRUE)
terms <- .Internal(terms.formula(x, specials, data, keep.order, 
    allowDotAsName)) 
```

问题一定是对的调用`.Internal(terms.formula())`需要一个 'plain old' `data.frame`，而是传递了一个 class 的对象`new.frame`。作为一种解决方法，为什么不只传递`terms.formula()`它期望的对象类型（一个朴素的 data.frame）？

这是一种简单的方法：

```
terms.formula(Y ~ X, data = unclass(test_frame))
# Y ~ X
# attr(,"variables")
# list(Y, X)
# attr(,"factors")
#   X
# Y 0
# X 1
# attr(,"term.labels")
# [1] "X"
# attr(,"order")
# [1] 1
# attr(,"intercept")
# [1] 1
# attr(,"response")
# [1] 1
# attr(,".Environment")
# <environment: R_GlobalEnv> 
```

# iphone - 摆脱/修复断点 3.1 和 4.1 Xcode iOS 6

> ID：13149519
> 
> 赞同：0
> 
> 时间：2012-10-31T00:21:42.373
> 
> 标签：iphone, xcode, ios6

如何修复以下编码，以便在模拟器中运行应用程序时不会出现断点。一旦我保存并运行该应用程序，它就说没有问题，但在运行过程之后它立即停止并说断点 3.1 4.1 错误。

```
#import "XYZViewController.h"
#import <MediaPlayer/MediaPlayer.h>

@interface XYZViewController ()

@end

@implementation XYZViewController

 - (void)viewDidLoad

{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    NSString *movFile = [[NSBundle mainBundle]pathForResource:@"movie1" ofType:@"MP4"];

    movPlayer = [[MPMoviePlayerController alloc]  initWithContentURL: [NSURL fileURLWithPath:movFile]];

     movPlayer.allowsAirPlay=YES;
    [movPlayer.view setFrame:CGRectMake(0, 0, 320, 480)];
    [self.view addSubview:movPlayer.view];
    [movPlayer play];

}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.

}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T00:44:49.307

如果您设置了一个断点，或者存在运行时错误，则会出现断点。如果你没有在那里设置断点，那么这是一个运行时错误。

鉴于您提到了 3.1 4.1 错误，这表明存在运行时错误。您应该仔细查看断点所在的行，看看是否有任何问题。此外，发布此断点所在的位置将帮助其他人帮助您。

不知道断点在哪里，我的猜测是您没有正确的电影文件名（请记住 iOS 区分大小写）或 movie1.MP4 未添加到项目中。

# actionscript-3 - 如何测量 Flash 中的时间间隔，不包括浏览器暂停的时间段？

> ID：13149520
> 
> 赞同：0
> 
> 时间：2012-10-31T00:21:51.583
> 
> 标签：actionscript-3, flash

我想测量游戏中事件的时间。目前我只是在事件开始和结束时保存时间戳，并计算差异。

当用户在活动期间切换浏览器中的选项卡时，就会出现问题。这会导致闪存暂停，这会打乱我的间隔计算，因为它取决于“实时”时间，而不是闪存“活动”的时间。

有什么简单的解决方案吗？就像一些内部计时器随着游戏的其余部分暂停，我可以启动和检查而不是减去时间戳。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T00:26:55.510

如果您可以检测到用户何时在 javascript 中切换选项卡（可能是模糊事件），您可以使用 localconnection 告诉 flash 保存另一个时间戳，然后当页面重新获得焦点时，向 flash 发送另一个时间戳。现在您必须在添加差异和忽略差异之间来回切换，而不是仅减去两个时间戳。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T01:09:27.247

首先，启动一个常规的 Timer()。然后为激活和停用添加侦听器......当您的应用失去焦点（用户转到另一个选项卡、另一个应用等）时，这些事件会触发：

```
addEventListener(Event.ACTIVATE, activateListener);
addEventListener(Event.DEACTIVATE, deactivateListener); 
```

然后在侦听器方法中停止并启动计时器。

# python - Python - for 循环仅输出最后一次迭代

> ID：13149523
> 
> 赞同：1
> 
> 时间：2012-10-31T00:22:11.057
> 
> 标签：python, xml

我正在尝试创建一个应用程序来创建一个 xml 文件，并且我想为某些元素分配一个文本。此文本包含文件夹上的图像文件。代码如下：

```
 import glob
    import os
    import os.path

    from xml.etree import ElementTree
    from xml.dom import minidom
    import xml.etree.ElementTree as ET

    def prettify(elem):
    """Return a pretty-printed XML string for the Element.
    """
        rough_string = ElementTree.tostring(elem, 'utf-8')
        reparsed = minidom.parseString(rough_string)
        return reparsed.toprettyxml(indent="  ")

    path = "/home/unkuiri/Ubuntu One/Wallpapers/*"

    background = ET.Element('background')
    starttime = ET.SubElement(background, 'starttime')
    year = ET.SubElement(starttime, 'year')
    month = ET.SubElement(starttime, 'month')
    day = ET.SubElement(starttime, 'day')
    hour = ET.SubElement(starttime, 'hour')
    minute = ET.SubElement(starttime, 'minute')
    second = ET.SubElement(starttime, 'second')
    static = ET.SubElement(background, 'static')
    duration_stat = ET.SubElement(static, 'duration')
    files = ET.SubElement(static, 'file')
    transition = ET.SubElement(background, 'transition')
    duration_trans = ET.SubElement(transition, 'duration')
    from1 = ET.SubElement(transition, 'from')
    to = ET.SubElement(transition, 'to')

    dirList = glob.glob(path)

    while len(background.findall("./static/file")) <= len([name for name in os.listdir('.') if os.path.isfile(name)]):
            background.append(static)
            background.append(transition)
            continue

    for fname in dirList:   

        to.text = fname
        files.text = fname
        from1.text = fname

    print prettify(background) 
```

此代码输出格式正确的 xml，但仅使用最后一个路径，重复次数与文件夹中的文件数一样多。我想要的是它为每个“文件”元素打印一个路径，并在前面的“to”元素和下一个“元素”上打印相同的路径。也许这是一个我不知道的简单解决方案。我还是个新手。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T00:33:25.460

您只是创建一个元素并多次添加*相同的元素。*

`fname`在你的 for 循环中，你一遍又一遍地分配该元素的成员，所以最后它只剩下最后一个

您需要创建一个新元素并每次在 for 循环中填充它

可能你应该有更多这样的东西

```
background = ET.Element('background')
dirList = glob.glob(path)

for fname in dirList:   

    starttime = ET.SubElement(background, 'starttime')
    year = ET.SubElement(starttime, 'year')
    month = ET.SubElement(starttime, 'month')
    day = ET.SubElement(starttime, 'day')
    hour = ET.SubElement(starttime, 'hour')
    minute = ET.SubElement(starttime, 'minute')
    second = ET.SubElement(starttime, 'second')
    static = ET.SubElement(background, 'static')
    duration_stat = ET.SubElement(static, 'duration')
    files = ET.SubElement(static, 'file')
    transition = ET.SubElement(background, 'transition')
    duration_trans = ET.SubElement(transition, 'duration')
    from1 = ET.SubElement(transition, 'from')
    to = ET.SubElement(transition, 'to')

    to.text = fname
    files.text = fname
    from1.text = fname 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T15:06:51.913

我已经设法用这段代码解决了这个问题：

```
 import glob
    from xml.etree import ElementTree
    from xml.dom import minidom

    def prettify(elem):
        """Return a pretty-printed XML string for the Element.
        """
        rough_string = ElementTree.tostring(elem, 'utf-8')
        reparsed = minidom.parseString(rough_string)
        return reparsed.toprettyxml(indent="  ")

    import xml.etree.ElementTree as ET

    path = "/home/unkuiri/Ubuntu One/Wallpapers/*"

    background = ET.Element('background')
    dirList = glob.glob(path)
    starttime = ET.SubElement(background, 'starttime')
    year = ET.SubElement(starttime, 'year')
    year.text = '2012'
    month = ET.SubElement(starttime, 'month')
    month.text = '10'
    day = ET.SubElement(starttime, 'day')
    day.text = '10'
    hour = ET.SubElement(starttime, 'hour')
    hour.text = '00'
    minute = ET.SubElement(starttime, 'minute')
    minute.text = '00'
    second = ET.SubElement(starttime, 'second')
    second.text = '00'

    for i,fname in enumerate(dirList):    

        static = ET.SubElement(background, 'static')
        duration_stat = ET.SubElement(static, 'duration')
        duration_stat.text = '1795.0'
        files = ET.SubElement(static, 'file')
        transition = ET.SubElement(background, 'transition')
        duration_trans = ET.SubElement(transition, 'duration')
        duration_trans.text = '5.0'
        from1 = ET.SubElement(transition, 'from')
        to = ET.SubElement(transition, 'to')

        from1.text = dirList[i-1]

        files.text = dirList[i-1]

        to.text = dirList[i]

    print prettify(background) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T00:30:23.290

您在每次迭代时都踩到 /files/from1 而不将它们保存在任何地方。在您有机会对数据进行任何操作之前，每次迭代都会覆盖上一次迭代的内容。

你的意思是把这些变量存储起来吗？你的意思是`print prettify(background)`每次迭代都做吗？

# c++ - 了解 glNormal3f

> ID：13149524
> 
> 赞同：6
> 
> 时间：2012-10-31T00:22:16.660
> 
> 标签：c++, opengl, graphics

我无法理解 glNormal3f，我知道它适用于“标准化”顶点的“法线”......或类似的东西，但我不明白什么是顶点的“法线”。你能解释一下这个功能吗？我不明白openGL中的“正常”是什么意思......

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-31T00:31:40.977

顶点的“法线”是与顶点“垂直”的向量。在数学中，“正常”是“垂直”的概括。对于多边形，这个“法线向量”垂直于多边形并且对于它的所有顶点都是相同的。您可能会为多边形的每个顶点分配不同的法线向量的一个原因是，如果您使用非常小的三角形覆盖曲面。在这种情况下，您不希望三角形的三个顶点的法线向量都相同。

现在这个法线向量是做什么用的？典型应用程序用于在 OpenGL 中启用光照时进行着色计算。法线向量可以确定来自光源的光是否照射到表面以及光线与表面形成的角度。例如，这可用于确定表面是否有阴影或是否包含镜面高光。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-31T00:30:37.623

调用`glNormal`会将法线向量发射到最后发射的顶点。顶点法线通常计算为入射到顶点的面的法线的归一化平均值。面的法线是矢量，因此它们垂直于面所描述的平面。

此功能已弃用，您真的应该选择一本好的/教程或书籍。

另请参见[顶点法线](http://en.wikipedia.org/wiki/Vertex_normal)和相关条目。

如果你不应该使用`glVertex*`和相关的`glNormal*`功能，你应该使用什么？着色器和 VBO。看看[这个](https://stackoverflow.com/questions/62540/whats-a-good-book-for-learning-opengl)问题。

# android - 将 DatePicker 值传递给 Intent

> ID：13149528
> 
> 赞同：1
> 
> 时间：2012-10-31T00:23:09.180
> 
> 标签：android, android-intent, datepicker

我有一个简单的表单，上面有一个 DatePicker 组件。用户可以输入他们的出生日期，然后提交表格。一旦提交，他们就会看到他们在表格中输入的内容的审查。除了 DatePicker 之外，表单上的所有其他组件都在工作。我成功地将 DatePicker 中的一个值传递到我的 Intent 中，但由于某种原因，我得到了一个非常奇怪、不受欢迎的日期......

有谁知道我如何检索用户输入的实际值？下面是我在模拟器中得到的屏幕。

![模拟器截图](../Images/40d42b968f1756d054b54e2698898096.png)

这是我的 onCreate 方法中代码的一部分，我将日期信息放入意图中

```
Date myDate = new Date(date.getDayOfMonth(), date.getMonth(), date.getYear());
            i.putExtra("dob", myDate.toString()); 
```

然后在显示结果的活动中，这是我显示从意图中提取的信息的代码。

```
dob.setText("Their date of birth is: " + extras.get("dob")); 
```

如您所见，我确实成功获得了输出，但这不是我在 DatePicker 本身上选择的日期。我根本没有运行时错误。我认为这是一个格式化的事情。不确定，所以任何反馈表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T00:43:52.197

我纠正了这个问题。我决定从 DatePicker 中检索值并将它们存储在整数变量中，而不是创建一个 Date 对象并将其传递给我的意图。

```
 int day = date.getDayOfMonth();
            int month = date.getMonth();
            int year = date.getYear();

            i.putExtra("day", day);
            i.putExtra("month", month);
            i.putExtra("year", year); 
```

在此之后，我从新 Activity 中的 Intent 中检索值，对其进行格式化并将它们显示在 TextView 中。

```
 int day = extras.getInt("day");
    int month =extras.getInt("month");
    int year = extras.getInt("year");
    dob.setText("Their date of birth is: " + String.valueOf(day) + "/" + String.valueOf(month + 1) + "/" + String.valueOf(year)); 
```

由于某种原因，我不得不在月份中添加 1 如果我选择一月份，它将输出 0。

# php - 我可以从数据库中填充对象但仍然可以访问其方法吗？

> ID：13149529
> 
> 赞同：-1
> 
> 时间：2012-10-31T00:23:17.840
> 
> 标签：php, methods, datamapper, stdclass

这是我今天的第二篇文章，因为我对 PHP 的 OOP 非常陌生，所以如果这是一个愚蠢的问题，请耐心等待...

我创建了一个漂亮的类，我希望它能够与我的“JOB”对象一起使用，其中包括能够使用这个单一对象从许多表中提取数据，以便最终用户看到相关数据。例如，在我的课堂上，我有：

```
public function showProjectManager() {
    $q = "SELECT m.name FROM " . jJOBS . " AS j JOIN " . jMEI . " AS m ON m.uid = j.mei WHERE id = " . $this->id;
    $r = $this->_dblink->query($q);
    $row = $r->fetch_assoc();
    return $row['name'];
} 
```

因为 jJOBS 表中存储的数据只是一个引用另一个表中的 id 的数字。有几条这样的数据存储在主 jJOBS 表中。

因此，在另一段代码中有一个下拉框，允许用户选择特定的“作业”并使用 AJAX 调用我想显示来自该作业的数据。我要做的是创建一个 JOB 对象（其中包括 showProjectManager 方法），使用**mysqli_fetch_object**从数据库中读取所有属性，然后调用 showProjectManager 方法，如下所示：

```
 $disp = new Job();
    $q = "SELECT * FROM " . jJOBS . " WHERE id = " . $job_id;
    $r = $jobsdb->query($q);
    $disp = $r->fetch_object();
    $zList .= "<li><span class='smLabels l'>Project Manager :</span>\n<span class='smText r'>" . $disp->showProjectManager() . "</span></li>"; 
```

但每当我从数据库中获取对象时，**$disp**对象就会恢复为 stdClass。如何维护正确的类并从数据库访问我需要的值？我所读到的关于这个主题的所有内容都需要使用看起来非常复杂的 DataMapper，尤其是对于这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T00:52:33.990

最简单的方法是将类名传递给`fetch_object`，如下所示：

```
$q = "SELECT * FROM " . jJOBS . " WHERE id = " . $job_id;
$r = $jobsdb->query($q);
$disp = $r->fetch_object("Job"); 
```

根据文档，这将创建`$disp`为类型的对象，`Job`并填写所有字段，*然后*调用`Job`构造函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T00:47:56.903

您正在重置 $disp 变量。您需要在作业对象中设置作业。像这样将 id 传递给构造函数。

```
class Job {
    private $job = null;

    function __construct($id = null) {
        if(isset($id)) {
            $q = "SELECT * FROM " . jJOBS . " WHERE id = " . $job_id;
            $r = $jobsdb->query($q);
            $job = $r->fetch_object();
            $this->job = $job;
        }
    }

    function getJob() {
        return $this->job;
    }

    public function showProjectManager() {
        $q = "SELECT m.name FROM " . jJOBS . " AS j JOIN " . jMEI . " AS m ON m.uid = j.mei WHERE id = " . $this->job->id;
        $r = $jobsdb->query($q);
        $row = $r->fetch_object();
        return $row->name;
    }
}

?> 
```

然后

```
$disp = new Job(123);
$disp->someJobObjectFunction(); 
```

# redirect - 重定向到 Business Catalyst 中的默认域

> ID：13149531
> 
> 赞同：2
> 
> 时间：2012-10-31T00:23:29.983
> 
> 标签：redirect, business-catalyst

我有一个 Business Catalyst 站点，需要将以下域重定向到默认域。www.membersalliance.com.au/ www.membersalliance.com.au/index.aspx

默认域是 www.membersalliance.com.au

我们被告知这三个页面被 google 视为单独的内容，我们希望将它们合并到默认域中。

我已经和 adobe 支持人员谈过了，他们说：</p>

> 可以重定向到另一个页面，这没有问题。但是我们在这里寻找的是没有任何其他带有域名的后缀。当一个页面被设置为起始页面时，会自动删除页面的后缀/名称，但其他页面并非如此。所以，它们仍然会显示页面的名称，即使您将其重定向到主页（为您的域设置的起始页）。</p>

所以，我可以重定向到 www.membersalliance.com.au/home.html 但这是否被谷歌视为 www.membersalliance.com.au 的单独页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-14T22:16:31.357

如果您使用 301 重定向重定向页面（如果您使用重定向，这就是 BC 重定向页面的方式）Google 只会看到一个页面，而不是多个页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-27T15:08:39.300

查看有关“规范”网址的 Google 网站管理员工具帮助。 [https://support.google.com/webmasters/answer/139394?hl=en](https://support.google.com/webmasters/answer/139394?hl=en)

在您的情况下，添加到页眉：

```
<link rel="canonical" href="www.membersalliance.com.au"/> 
```

这将告诉 Google 将主页的所有变体都记录在一个域中。

# objective-c - 从另一个“m”文件调用方法

> ID：13149533
> 
> 赞同：0
> 
> 时间：2012-10-31T00:23:54.410
> 
> 标签：objective-c

我的应用程序的大部分代码都在一个名为*MyViewController*的“m”文件中。该应用程序实现了一个包含 UIWebView 对象的自定义 UIView。UIView 和 UIWebView 的代码保存在名为*CustomUIView*的单独“m”文件中。

我已经设法使用委托覆盖对 UIWebView 对象中的 URL 超链接的点击。但是，我想让这些点击启动存储在我的主应用程序代码中的方法。此方法称为“popupView”，并采用单个参数“inputArgument”。inputArgument 是用户单击的 URL 的文本。事实上，这个方法与导致我的自定义 UIView 启动的方法完全相同。

无论如何，我想做的是让我覆盖的 URL 点击导致*popupView*方法启动，从而导致另一个 UIView 在被点击的上面打开。

问题是检测到 URL 点击的“m”文件看不到“popupView”方法，因为它包含在*MyViewController*的“m”文件中。如何从另一个“m”文件中调用*popupView方法？*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T00:35:35.490

## 直接地

1.  中声明`MyViewController`的方法`-popupView:`。`MyViewController.h`
2.  `#import` `MyViewController.h`在`CustomUIView.m`.
3.  提供`CustomUIView`对 的 [one] 实例的引用`MyViewController`，例如通过在 中`@property`声明的方式`CustomUIView.h`。

对于`(1)`，`@interface`( `MyViewController`in `MyViewController.h`) 应该看起来有点像这样

```
@interface MyViewController : UIViewController
{
    //....
}
- (void)popupView:(NSString *)urlText;
//....
@end 
```

对于`(2)`,`UIViewController.m`应该在顶部附近的某个地方有以下内容

```
#import "CustomUIView.h"
#import "MyViewController.h" 
```

因为`(3)`，`@interface`in`CustomUIView.h`应该看起来像

```
@interface CustomUIView : UIView
{
    //....
}
@property (nonatomic, weak) MyViewController *viewController;
@end 
```

`CustomUIView`在创建owned by实例后的一段时间内，需要设置此属性`MyViewController`。如果您`CustomUIView`是 in `MyViewController.xib`，则可以通过将关键字添加`IBOutlet`到属性声明中来设置此属性，如下所示

```
@property (nonatomic, weak) IBOutlet MyViewController *viewController; 
```

并将此属性指向`XIB`. 相反，如果您以`CustomUIView`编程方式创建，则可以在初始化后立即在其上设置此属性。

## 代表

然而，这远非最佳实践。[使用委托模式](https://developer.apple.com/library/mac/#documentation/General/Conceptual/DevPedia-CocoaCore/Delegation.html)会好得多。为此，您需要

1.  定义一个委托[协议](http://developer.apple.com/library/mac/#documentation/cocoa/conceptual/objectivec/chapters/ocProtocols.html)。
2.  添加一个“代表”`@property`到`CustomUIView`.
3.  在适当的时候调用委托对象的委托方法。
4.  在`MyViewController`.
5.  `@property`将实例所`CustomUIView`拥有的实例的“委托”设置`MyViewController`为`MyViewController`实例。

让我们将委托协议称为富有想象力的东西，例如`CustomUIViewDelegate`. 对于`(1)`，我们将在顶部声明`CustomUIView.h`如下：

```
@class CustomUIView;

@protocol CustomUIViewDelegate <NSObject>
- (void)customUIView:(CustomUIView *)customView didSelectURLText:(NSString *)urlText;
@end 
```

请注意，我们必须[前向声明](http://en.wikipedia.org/wiki/Forward_declaration)我们的类`CustomUIView`，以便编译器能够理解协议方法中第一个参数的类型`customUIView:didSelectURLText:`。

对于`(2)`，我们将做一些与上面非常相似的事情`(3)`：您`CustomUIView` `@interface`将看起来像

```
@interface CustomUIView : UIView
{
    //....
}
@property (nonatomic, weak) id<CustomUIViewDelegate> *delegate;
@end 
```

同样，如果我们要在 Interface Builder 中设置此属性，我们将需要使用`IBOutlet`关键字向 IB 宣布它：

```
@property (nonatomic, weak) IBOutlet id<CustomUIViewDelegate> *delegate; 
```

对于（3），我们需要在适当的时候调用`customUIView:didSelectURLText:`委托对象的委托方法。`self.delegate`

在你的问题中，你写了

> 我已经设法使用委托覆盖对 UIWebView 对象中的 URL 超链接的点击。

所以，假设`CustomUIView`有一个实例方法

```
- (void)didSelectURL:(NSURL *)url
{
    //....
} 
```

当用户在 UIWebView 中选择一个链接时调用*它*。的`CustomUIView`代表需要知道这一点：

```
- (void)didSelectURL:(NSURL *)url
{
    //...
    if ([self.delegate respondsToSelector:@selector(customUIView:didSelectURLText:)]) {
    {
        [self.delegate customUIView:self didSelectURLText:url.absoluteString];
    }
} 
```

请注意，我们首先检查`CustomUIView`实例的委托对象是否`customUIView:didSelectURLText:`通过调用感兴趣的选择器 ( ) 来`respondsToSelector:`实现它。

对于`(4)`，我们*首先*需要添加`<CustomUIViewDelegate>`to`MyViewController`的`@interface`声明，并确保添加到`#import` `CustomUIView.h`我们使用符号的文件中`CustomUIViewDelegate`。我们`MyViewController`的 '`@interface`看起来像这样：

```
#import "CustomUIView.h"

@interface MyViewController : UIViewController <CustomUIViewDelegate>
{
    //....
}
//....
@end 
```

更重要的是，我们需要在's中**实现**`CustomUIViewDelegate`协议；到目前为止，我们只宣布采用它。`MyViewController``@implementation``MyViewController`

为此，由于我们的协议仅包含一种方法，因此我们只需要添加自己的`-customUIView:didSelectURLText:`. 我们`MyViewController`的 '`@implementation`看起来像这样：

```
#import "MyViewController.h"

@implementation MyViewController

//....

- (void)popupView:(NSString *)urlText
{
    //....
}

#pragma mark - CustomUIViewDelegate

- (void)customUIView:(CustomUIView *)customView didSelectURLText:(NSString *)urlText
{
    [self popupView:urlText];
}

//....

@end 
```

最后，对于`(5)`，我们需要设置实例拥有的`delegate`实例的属性。我对' 与其实例的关系知之甚少，无法明确描述如何执行此操作，但我将提供一个示例：我假设您以编程方式将 '添加为' 视图的子视图。所以你的实现看起来有点像这样：`CustomUIView``MyViewController``MyViewController``CustomUIView``-[MyViewController loadView]``CustomUIView``MyViewController``-loadView`

```
- (void)loadView
{
    [super loadView];

    //....

    CustomUIView *customView = //....        
    //....
    [self.view addSubview:customView];

    //....

} 
```

此时剩下要做的就是`delegate` `@property`将局部变量的设置`customView`为`self`：

```
customView.delegate = self; 
```

**编辑**`CustomUIView`：根据有关和之间关系的新信息更新（5）`MyViewController`。

在您的评论中，您写道您`CustomUIView`被添加为`cvc.view`where `cvc`is an instance of `CustomUIViewController`in`CustomUIView`的子视图`-[CustomUIView show]`。因此，您注意到写作`customView.delegate = self;`与写作相同`self.delegate = self`，这显然不是您想要做的。

您想将`CustomUIView`' 的`delegate`属性设置为 的实例`MyViewController`。因此，您的方法`-[CustomUIView show]`应该类似于

```
- (void)show
{
    //....
    [cvc.view addSubview:self];

    self.delegate = mvc;
} 
```

`mvc`的实例在哪里`MyViewController`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T00:35:15.333

好吧，既然您正在编写`CustomUIView`，为什么不实现一个构造函数，并以这种方式在实例变量中`initWithPopupDelegate:(MyViewController *)delegate`保留对实例的引用，然后在其上调用该方法。`MyViewController`

（`@class MyViewController;`在顶部`CustomUIView.h`和`#import "MyViewController.h"` 顶部添加，`CustomUIView.m`以便编译器知道您正在使用的类。）

或者，如果只有一个`MyViewController`实例，您可以为 定义一个类方法`MyViewController`，例如，`+ (MyViewController *)instance`并让它返回对一个实例的引用（您将其存储在类变量中并在创建实例时第一次设置，参见“单例模式”）。但是在不知道代码细节的情况下，我建议第一个解决方案（委托）更简单、更灵活。

# arrays - 在 Symfony 2.1 语义配置中允许数组（使用默认值）或 null

> ID：13149534
> 
> 赞同：13
> 
> 时间：2012-10-31T00:23:57.837
> 
> 标签：arrays, symfony, symfony-2.1

我需要在包的语义配置中定义一个具有给定默认值的数组节点。这目前看起来像：

```
$node->arrayNode('foo')
         ->prototype('scalar')->end()
         ->defaultValue(array('1', '2', '3'))
     ->end(); 
```

我想给用户一个选项来覆盖这个数组，`null`比如：

```
my_bundle:
  foo: ~ 
```

我不能使用空数组 (`[]`或`array()`) 来代替`null`应该`[]`具有不同语义的`null`.

这是可能的还是有任何不难看的解决方法？目前我只是得到一个例外：

> InvalidTypeException：路径“my_bundle.foo”的类型无效。预期的数组，但得到 NULL

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-31T11:34:14.443

您可以尝试以下方法：

```
$node->arrayNode('foo')
     ->beforeNormalization()
       ->ifTrue(function($v) { return $v === null; })
       ->then(function($v) { return array(); })
     ->end()
     ->prototype('scalar')->end()
     ->defaultValue(array('1', '2', '3'))
 ->end(); 
```

或者也许更简单：

```
$node->arrayNode('foo')
     ->treatNullLike(array())
     ->prototype('scalar')->end()
     ->defaultValue(array('1', '2', '3'))
 ->end(); 
```

否则，您可以使用 variableNode 而不是 arrayNode；这将为您提供更多自由，但开箱即用的验证/合并逻辑更少。

# vala - 需要 vala 中的 setter/getter

> ID：13149535
> 
> 赞同：2
> 
> 时间：2012-10-31T00:24:05.970
> 
> 标签：vala, design-by-contract

有什么方法可以在 Vala 中执行以下操作？

```
public int year {
    get { return this.year; }
    set requires (1500 < value && value < 2050) { this.year = value; }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T03:30:21.010

不，但是'requires'实际上只是[GLib.return_if_fail](http://valadoc.org/glib-2.0/GLib.return_if_fail.html)和[GLib.return_val_if_fail](http://valadoc.org/glib-2.0/GLib.return_val_if_fail.html)的语法糖，所以你可以这样做：

```
public int year {
    get { return this.year; }
    set {
        GLib.return_if_fail (1500 < value && value < 2050);
        this.year = value;
    }
} 
```

# ruby-on-rails - 如何使用“render json”获取仅具有外键的单个对象

> ID：13149536
> 
> 赞同：0
> 
> 时间：2012-10-31T00:24:09.850
> 
> 标签：ruby-on-rails, json, foreign-keys, has-many, belongs-to

我正在使用 Rails 3.2.8 构建后端，并且我有一个巨大的对象图，其中包含很多依赖项等。

**例子：**

```
A belongs_to B (and of course B has_many A)
B belongs_to C
C belongs_to D
etc... 
```

如果我现在打开 URL“http://0.0.0.0:3000/ds.json”，我会得到整个对象图。

```
[{"id":1,"c":{
    "id":1,"b":{
        "id":1,"a":{
            "id":1
        }
    }
}] 
```

（我有一个自定义数据库，其中外键没有“_id”后缀）。

相反，如果我打开“ds.json”，我只想获得“C”的 id：

```
[{"id":1,"c":1}] 
```

这可能吗？

**编辑：** 我的模型看起来像这样（我认为这是问题所在，但我无法更改数据库方案）：

```
class Location < ActiveRecord::Base
  self.table_name = 'location'
  self.primary_key = 'id'

  belongs_to :map, foreign_key: :map
end

class Map < ActiveRecord::Base
  self.table_name = 'map'
  self.primary_key = 'id'

  has_many :locations, foreign_key: :map
end 
```

问题似乎是rails只是在“位置”中看到“地图”并且只是抓住了整个对象，因为“地图”是对象的名称和位置表中的id列......

我如何告诉 Rails object 和 id-column 之间的区别？！

# python - SQLite：没有这样的列错误

> ID：13149541
> 
> 赞同：0
> 
> 时间：2012-10-31T00:24:49.087
> 
> 标签：python, sqlite

我得到了`sqlite3.OperationalError: no such colum: bla`错误。

我有一个 sqlite 文件，它只包含一个`foo`带有 column的表`bar`。

```
connection = lite.connect(db.sqlite)
def insertEvent(self, bar):            
    with connection:                                                          
        cur = connection.cursor()                                               
        cur.execute("INSERT INTO foo(bar) VALUES (bar);")

insertEvent("bla") 
```

我的语法是错误的还是为什么会出现错误？在所有其他问题中，我找不到任何有用的解决方案。

以防万一：我正在使用 sqlite3 库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T00:30:51.587

尝试将插入语句更改为

```
cur.execute("INSERT INTO foo(bar) VALUES (?);", (bar,)) 
```

您没有`bar`在插入语句中使用参数。

# azure - 从 github 发布到 azure 网站时自动运行测试？

> ID：13149547
> 
> 赞同：1
> 
> 时间：2012-10-31T00:25:43.260
> 
> 标签：azure, github, continuous-integration, continuous-deployment

如果我将我的天蓝色网站绑定到 TFS，我可以配置构建以在项目中运行单元测试。但是，从 github 发布时，我似乎找不到类似的选项。我错过了什么吗？

我的网站发布得很好，但是根据我在日志中看到的信息，我很确定测试没有被执行。在我的不成文的书中，持续集成要求所有测试都执行并通过，然后才能将构建推送到生产中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T00:29:50.233

[http://social.msdn.microsoft.com/Forums/en-US/azuregit/thread/1743558f-1366-4748-b87e-576da9b19678](http://social.msdn.microsoft.com/Forums/en-US/azuregit/thread/1743558f-1366-4748-b87e-576da9b19678)

猜猜我最初并没有在寻找正确的东西。希望很快有更新。

# arrays - 在表格视图中显示一年的日期

> ID：13149550
> 
> 赞同：0
> 
> 时间：2012-10-31T00:26:03.220
> 
> 标签：arrays, nsmutablearray, nsdate, tableview, nsdateformatter

我在这里尝试完成的是使用带有原型单元格的 tableView，并在每个单元格中显示一年或两年的日期。我已经使用以下代码在标签中显示今天的日期：

```
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateFormat:@"MM/dd/yyyy"];
NSDate *dateNow = [NSDate date];
dateArray = [NSMutableArray arrayWithObjects:[dateFormatter stringFromDate:dateNow], nil]; 
```

它可以将一个日期（今天的日期）添加到第一个单元格。我不知道如何让它以 1 的间隔增加所有天数。有什么帮助吗？

我使用以下代码在数组中显示信息：

```
static NSString *CellIdentifier = @"Cell";

Custom *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
cell.dateLabel.text = [dateArray objectAtIndex:indexPath.row]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T05:04:04.157

您不需要维护日期数组。如果要显示第*n*^行，只需在开始日期添加*n天并使用它。*

因此，您可以将开始日期存储在实例变量中：

```
NSDate *_startDate; 
```

要确定 tableView 中应该有多少行，你必须弄清楚那一年有多少天（我假设你只显示一年）：

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
  // get the calendar
  NSCalendar *calendar = [NSCalendar currentCalendar];

  // get the date that points to the first day of the first month of the year containing the start date
  // note that we include the era, because some calendars have more than an "AD"/"BC" kind of era
  NSDateComponents *yearStartComponents = [calendar components:(NSEraCalendarUnit | NSYearCalendarUnit) fromDate:_startDate];
  [yearStartComponents setMonth:1];
  [yearStartComponents setDay:1];
  NSDate *startOfYear = [calendar dateFromComponents:yearStartComponents];

  NSDateComponents *yearDiff = [[NSDateComponents alloc] init];
  [yearDiff setYear:1];

  // add one year to that date
  NSDate *startOfNextYear = [calendar dateByAddingComponents:yearDiff toDate:startOfYear options:0];

  // figure out how many days were between the two dates
  NSDateComponents *dayDiff = [calendar components:NSDayCalendarUnit fromDate:startOfYear toDate:startOfNextYear options:0];

  return [dayDiff day];
} 
```

然后当您需要单元格时，您可以使用 indexPath 的“行”作为从开始日期开始的天数：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
  UITableViewCell *cell = ...;

  NSCalendar *calendar = [NSCalendar currentCalendar];
  NSDateComponents *diff = [[NSDateComponents alloc] init];
  [diff setDay:[indexPath row]];
  NSDate *date = [calendar dateByAddingComponents:diff toDate:_startDate options:0];

  NSLocale *locale = [NSLocale currentLocale];
  NSString *formatted = [NSDateFormatter localizedStringFromDate:date dateStyle:NSDateFormatterShortStyle timeStyle:NSDateFormatterNoStyle locale:locale];

  [[cell textLabel] setText:formatted];

  return cell;
} 
```

这种方法有几个好处：

1.  无论一年的长度如何，它都有效。无论当年有 353、355、365、366 还是 384 天，它都可以。
2.  无论当前日历如何，它都有效。那里不仅仅是公历。 `NSCalendar`支持公历、佛教、中国、希伯来、伊斯兰、伊斯兰民间、日本、中华民国、波斯、印度和 ISO8601 日历。
3.  您没有对格式字符串进行硬编码。通过使用`NSDateFormatterStyles`，您将为日期使用适当的简写符号，无论是“5/12/12”还是“5 Dec '12”或完全不同的日期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T15:41:28.520

干得好，

在 viewDidload 中，

```
dateArray = [[NSMutableArray alloc] init];  //dateArray is global

NSDate *thisDate, *nextDate;
thisDate = [NSDate date];

NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateFormat:@"MM/dd/yyyy"];
[dateArray addObject: [dateFormatter stringFromDate:thisDate]];

NSCalendar *gregorian = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
NSDateComponents *components = [[NSDateComponents alloc] init];
components.day = 1;

for (int i = 0; i<365; i++) //Not considering leap years
{
      nextDate = [gregorian dateByAddingComponents:components toDate:thisDate options:0];
       [dateArray addObject:[dateFormatter stringFromDate:nextDate]];
      thisDate = nextDate;
} 
```

在 cellForRowAtIndexPath

```
cell.dateLabel.text = [dateArray objectAtIndex:indexPath.row]; 
```

# c# - 获取当前显示模式

> ID：13149554
> 
> 赞同：1
> 
> 时间：2012-10-31T00:26:09.850
> 
> 标签：c#, asp.net-mvc-4

假设以下自定义模式提供程序：

```
DisplayModeProvider.Instance.Modes.Insert(1, new DefaultDisplayMode("CustomMode")
{
ContextCondition = //some bool logic
}); 
```

如何从我的代码中获取当前显示模式？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-31T01:51:22.780

按照文档，当前显示模式后缀将是用户代理。你可以从`HttpContext.Current.Request.UserAgent`

为了获取 DisplayMode 对象，您可以执行以下操作：

```
var currentMode = DisplayModeProvider.Instance.Modes.SingleOrDefault(x => x.DisplayModeId == HttpContext.Current.Request.UserAgent); 
```

希望能帮助到你。

# android - Android返回/菜单键问题

> ID：13149557
> 
> 赞同：1
> 
> 时间：2012-10-31T00:26:15.860
> 
> 标签：android, actionscript-3, softkeys

我想阻止返回和菜单键的默认功能，并在底部弹出一个退出菜单。我的问题是，当我的应用程序中有一个文本输入功能时，每次按下一个键通常都会弹出我创建的退出菜单在底部，然后一遍又一遍地关闭菜单..

对不起，如果我太含糊了..这是我的代码..

“options_mc”是我创建的退出菜单。

```
options_mc.visible = false;

function fl_ExitApplication(event:MouseEvent):void
{
NativeApplication.nativeApplication.exit(0);
}

stage.addEventListener(KeyboardEvent.KEY_DOWN, fl_OptionsMenuHandler);

function fl_OptionsMenuHandler(event:KeyboardEvent):void
{
if((event.keyCode == 95) || (event.keyCode == Keyboard.MENU, Keyboard.DOWN))

{switch (event.keyCode)
{case Keyboard.BACK:
 event.preventDefault();
 trace("back");}
}

{
    if(options_mc.visible == false){
        options_mc.visible = true;
        options_mc.addEventListener(MouseEvent.CLICK, fl_ExitApplication);
    } else if(options_mc.visible == true){
        options_mc.visible = false;
        options_mc.removeEventListener(MouseEvent.CLICK, fl_ExitApplication);
    }
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T00:41:50.437

覆盖活动中的 onBackPressed() 方法

```
 @Override
 public void onBackPressed() {

     super.onBackPressed();
     finish();
 } 
```

它将停止活动，另一种方法是实现操作菜单，请参阅此示例

[链接1](http://www.androidhive.info/2011/09/how-to-create-android-menus/)

# java - 如何在构建之间对 Java 应用程序进行版本控制？

> ID：13149563
> 
> 赞同：8
> 
> 时间：2012-10-31T00:27:22.293
> 
> 标签：java, git, maven, build-automation

目前，我的 Java 应用程序在每个构建中都有相同的版本。我正在使用 Maven，但我不确定如何设置工作流以在每次构建时向应用程序添加版本。

我想这适用于我的版本控制系统？我正在使用 git，这是否意味着我需要 git 标签？

感谢您的任何见解，我知道这是一个大问题，但我不知道从哪里开始。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-31T00:43:03.253

例如，您首先将您的版本设置为 1-SNAPSHOT。

然后，您使用 maven-release-plugin 提前并经常发布。

在此期间，每个快照都会获得一个唯一的时间戳。

如果要应用非官方 maven 版本的版本，请参阅 buildnumber-maven-plugin。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-31T00:47:17.563

我使用这个 Maven 插件：

[https://github.com/ktoso/maven-git-commit-id-plugin](https://github.com/ktoso/maven-git-commit-id-plugin)

并让它`git.properties`为我生成一个文件。这包括提交 ID、评论等。

从那里，你可以做任何你喜欢的事情。我的 webapp 中有一个属性页面，它简单地遍历`git.properties`. 为我工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T00:48:40.493

您可以使用 Maven POM 文件来定义版本。[这](http://maven.apache.org/pom.html#Maven_Coordinates)是一个解释。

您也可以使用[此](http://maven.apache.org/plugins/maven-release-plugin/examples/update-versions.html)更新版本。

# android - 关于将视频流式传输到 iOS 和 Android 设备分析的问题

> ID：13149564
> 
> 赞同：1
> 
> 时间：2012-10-31T00:27:23.290
> 
> 标签：android, ios, video, streaming

帮派：

我是一名嵌入式软件工程师，开始着手使用 Linux 流媒体解决方案。并且没有网络和智能手机操作系统的经验。

当我们在 PC 端将视频流式传输到 PC（通过 VLC 接收）时，我们发现 H.264 有 1.2 秒的延迟。这包括

1.  传感器抓取数据
2.  数据通过网络发送
3.  VLC 缓冲和播放

一段时间后我们发现，VLC 上有缓冲控制。然而，对于 H.264 流媒体，我们可以设置的最小值是 400 - 500 毫秒。但是，在 Android 手机上，我们无法找到一些延迟/缓冲非常短（最小）的软件。

任何人都可以建议

*   视频流到智能手机的延迟通常是如何测量/分析的？
*   你有什么安卓/iOS上的网络嗅探软件可以推荐吗？
*   我在 Apple 的文档中看到 HTTP 直播推荐 10 秒的“文件大小”。无论如何要克服这个？（在 iOS 上安装嗅探工具需要越狱吗？）

# javascript - 当我尝试清理它时，为什么这个用于 ender 的事件处理代码会中断？

> ID：13149565
> 
> 赞同：0
> 
> 时间：2012-10-31T00:27:24.767
> 
> 标签：javascript, jquery, internet-explorer, jquery-events, ender

这是正常工作的代码：

```
bonzo.aug({
  bind: function (event, handler) {

    if (this[0].attachEvent)
            this[0].attachEvent('on'+event, handler);
          else
            this[0].addEventListener(event, handler);
        },
  unbind: function (event, handler) {
            if (this[0].detachEvent)
              this[0].detachEvent('on'+event, handler);
            else
              this[0].removeEventListener(event, handler);
          },
  once: function (event, handler) {
          function doOnce(e) {
            bonzo(this).unbind(event, doOnce);
            handler.call(this, e);
          }
          this.bind(event, doOnce);
        }
}); 
```

但是，当我尝试将它的一部分合并和汤化一点时，`unbind`然后`once`打破：

```
(function($){
  $.ieEventApi = !!window.attachEvent; // !-[1,];

  $.addEventListener = $.ieEventApi ? "attachEvent" : "addEventListener",
  $.removeEventListener = $.ieEventApi ? "detachEvent" : "removeEventListener",
  $.onForIe = $.ieEventApi ? 'on' : '',
  $.adaptEventHandlerForIe = function(f){
    return function(e){
      e.target = e[(e.target ? e.target : (e.srcElement || document))];
      return f(e);
    };
  };

  $.aug({
    bind: function (event, handler) {
            for(var i = 0; i < this.length; i++) // I'd use Bonzo.each if I could find any documentation for its use.. :-\
                this[i][$.addEventListener]($.onForIe+event, $.adaptEventHandlerForIe(handler), false); // The "false" is superfluous on IE, but apparently not problematically so.
            return this;
          },
    unbind: function (event, handler) {
              for(var i = 0; i < this.length; i++)
                this[i][$.removeEventListener]($.onForIe+event, $.adaptEventHandlerForIe(handler), false); 
              return this;
            },
    once: function (event, oncehandler) {
            // This just calls the other two, which already handle iteration.
            this.bind(event, doOnce);
            return this;

            function doOnce(e) {
              $(e.target /*Or should I be using e.target here?*/ ).unbind(event, doOnce);
              oncehandler.call(this, e);
            }
          }
  });
})(bonzo); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T01:13:02.887

不应该以下行

```
e.target = e[(e.target ? e.target : (e.srcElement || document))]; 
```

像

```
e.target = e[e.target ? 'target' : (e.srcElement ? 'srcElement' : 'document')]; 
```

? 我的意思是，当您引用对象中的道具并使用方括号时，您应该以字符串格式编写内部值。所以`e.etc`应该变成`e['etc']`.

# ruby-on-rails - Rails capistrano 部署找不到 rake

> ID：13149566
> 
> 赞同：0
> 
> 时间：2012-10-31T00:27:27.903
> 
> 标签：ruby-on-rails, deployment, capistrano

我正在使用 capistrano、unicorn、rbenv、nginx、linode、ubuntu 12.04 部署我的第一个 Rails 应用程序。当我跑

> bin/cap 部署：冷

在我的应用程序根目录中，我收到以下错误：

```
 * 2012-10-31 01:19:36 executing `bundle:install'
  * executing "cd /home/mr_deployer/apps/prjct_mngr/releases/20121031001933 && bundle install --gemfile /home/mr_deployer/apps/prjct_mngr/releases/20121031001933/Gemfile --path /home/mr_deployer/apps/prjct_mngr/shared/bundle --deployment --quiet --without development test"
    servers: ["xxxxxxxxxxxxx"]
    [xxxxxxxxxxxxx] executing command
 ** [out :: xxxxxxxxxxxxx] Could not find rake-0.9.2.2 in any of the sources
 ** [out :: xxxxxxxxxxxxx] Run `bundle install` to install missing gems.
    command finished in 1046ms
*** [deploy:update_code] rolling back
  * executing "rm -rf /home/mr_deployer/apps/prjct_mngr/releases/20121031001933; true"
    servers: ["xxxxxxxxxxxxx"]
    [xxxxxxxxxxxxx] executing command
    command finished in 625ms
failed: "sh -c 'cd /home/mr_deployer/apps/prjct_mngr/releases/20121031001933 && bundle install --gemfile /home/mr_deployer/apps/prjct_mngr/releases/20121031001933/Gemfile --path /home/mr_deployer/apps/prjct_mngr/shared/bundle --deployment --quiet --without development test'" on xxxxxxxxxxxxx 
```

我已经在我的开发机器上运行了 bundle install --path vendor/bundle，并且 gem rake 安装在开发机器和 linode vps 上。为什么找不到rake？

更新：

我尝试将 linode 上的 rake gem 的路径添加到 linode 上的 bashrc 和 deploy.rb 文件中的 :default_envoronment 。仍然得到同样的错误......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T16:17:06.923

Capistrano 尝试`cd /home/mr_deployer/apps/prjct_mngr/releases/20121031001933 && bundle install --gemfile /home/mr_deployer/apps/prjct_mngr/releases/20121031001933/Gemfile --path /home/mr_deployer/apps/prjct_mngr/shared/bundle --deployment --quiet --without development test`在您的服务部署到的远程计算机上运行命令。

看起来远程节点没有`rake`安装`bundle`尝试使用。

也许您应该检查所有必要的 gem 是否安装在远程机器上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T16:50:50.097

此错误并不表示您要部署到的计算机上未安装 rake。此错误意味着 Bundler 在尝试安装您的 gem 时，无法在您的 Gemfile 中列出的源中找到 Rake 版本 0.9.2.2。您的 Gemfile 是否包含类似的行`source "http://rubygems.org"`？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T00:40:06.770

尝试在 capistrano receipe 中指定您的路径，例如：

```
default_environment["PATH"] = "/usr/local/bin:/usr/bin:/usr/local/rvm/bin/:/var/lib/gems/1.9.1/bin" 
```

如果您不知道您的路径如何，请通过 ssh 连接到您的服务器并运行命令

```
echo $PATH 
```

# java - 当我在 Android 中触摸菜单项时，有没有办法更改操作栏菜单项的文本？

> ID：13149568
> 
> 赞同：0
> 
> 时间：2012-10-31T00:27:49.183
> 
> 标签：java, android, eclipse, android-actionbar, android-menu

当我触摸此“编辑”按钮时，我希望它更改为“完成”。有没有办法做到这一点？

![在此处输入图像描述](../Images/e7365216eaaf51dbac4049c454b1a1fc.png)

我试过这个，但它只在打开右侧的菜单时才有效：

```
@Override
public boolean onPrepareOptionsMenu(Menu menu) {

    // change the text here.

    return super.onPrepareOptionsMenu(menu);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T01:22:06.207

I assume that, at some point, you inflate the menu, yes?

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.some_menu_layout, menu);
    return true;
} 
```

So you can go into your menu (in this case, `res/menu/some_menu_layout.xml`), and find the `android:id` of the menu item you want to find. You should then be able to use `menu.findItem(theId).setTitle("Done");`. (You may have to save your `Menu` variable as a local member to do this.)

# c++ - C++ 程序崩溃（数组和 2 指针 binsearch 函数）

> ID：13149569
> 
> 赞同：0
> 
> 时间：2012-10-31T00:28:11.960
> 
> 标签：c++, arrays, search, pointers, binary

当我运行这个程序并输入一个值来搜索程序崩溃时（`exe`已停止工作，关闭程序）。一旦输入值 65，我得到一个 Number not found 无限循环输入要搜索的值（-1 退出）：

这是代码：

```
#include <iostream>
using namespace std;

void Search(int[], int * , int * );

int main()
{

  int i,KEY,num, array[] = {98,87,76,65,54};

  for(i=0;i<5;i++)
    cout << array[i] << " ";

  Search(array, &KEY, &num);

  cout << endl;
  system("pause");
  return 0;
}

void Search(int arr[5], int * current, int * numel)
{

  int low, high,search,N;

  cout << "\nWhat Number would you like to search for? (-1 to quit) : ";
  cin >> search;

  while(search!=-1)
  {
    low=0;
    high=N-1;
    while(low<=high)
    {
      *current=(low+high)/2;
      if (search > arr[*current])
        low=*current+1;
      else if(search<arr[*current])
        high=*current-1;
      else
        break;
    }
    if(arr[*current]==search)
      cout << "Number found at index " << *current << endl;
    else
      cout << "Number not found." << endl;
    cout << "Enter a value to search (-1 to quit) :";
  }
  return;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T00:41:27.987

`Search`对于初学者来说，如果寻找的数字不在数组中，则无法退出主循环。

然后你`high`在它被赋予任何价值之前使用它。

可能还有其他问题。在开发过程中你是如何测试它的？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T00:40:49.197

`N`没有初始化，所以谁知道这个语句是什么：

```
high=N-1; 
```

会做？

# c++ - 如何初始化 unique_ptr 对象的向量？

> ID：13149570
> 
> 赞同：1
> 
> 时间：2012-10-31T00:28:23.930
> 
> 标签：c++, vector, c++11, unique-ptr

> **可能重复：**
> [我可以列出初始化只移动类型的向量吗？](https://stackoverflow.com/questions/8468774/can-i-list-initialize-a-vector-of-move-only-type)

`::std::unique_ptr`我已经尝试过了，但收到有关调用的复制构造函数的投诉。这似乎不对。:-(

```
#include <vector>
#include <memory>

int main()
{
   typedef ::std::unique_ptr<int> qint_ptr_t;
   ::std::vector<qint_ptr_t>{ {new int(5), new int(6) } };
   return 0;
} 
```

有没有办法用初始化列表初始化`vector`对象`unique_ptr`？

# android - 即使设置了 configChanges，Android 活动也会在方向更改时重新启动

> ID：13149571
> 
> 赞同：3
> 
> 时间：2012-10-31T00:28:26.853
> 
> 标签：android, android-manifest

我有一个 Android 库项目和使用这个库项目的主应用程序。主应用程序的清单文件如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.test.myapp"
    android:installLocation="preferExternal"
    android:versionCode="3"
    android:versionName="1.1" >

    <uses-sdk android:minSdkVersion="8" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:screenOrientation="sensor"
            android:configChanges="orientation|screenSize"
            android:label="@string/app_name"
            android:name="MyAppActivity" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <activity android:name="com.google.ads.AdActivity"
            android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize" />
    </application>
</manifest> 
```

我还覆盖了主应用程序中的 onConfigurationChanged() 方法。现在，当我在 Android 模拟器中运行应用程序并通过 Ctrl+F11 更改方向时，应用程序的主要活动将重新启动。

根据我在此处和 Google 上找到的所有注释，当我在清单文件中设置 android:configChanges="orientation|screenSize" 参数时，这不应该发生......但确实如此:(

有什么想法我在这里想念的吗？
提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T00:36:02.383

如果你用abs，那是个限制，你解决不了。但是你不使用那个库，所以在清单文件的活动标签中给出这个

```
 android:configChanges="keyboard|keyboardHidden|orientation" 
```

删除那个

```
 android:screenOrientation="sensor" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T00:36:24.910

您需要添加`keyboard|keyboardHidden`到`android:configChanges`属性。当然在模拟器上（我认为在某些设备上），当你改变方向时，键盘状态也会改变。当您没有处理方向更改时，这也是防止您的活动双重重启所必需的。

# google-chrome - 使用 Google Chrome 进行固定位置和线性渐变的问题

> ID：13149578
> 
> 赞同：1
> 
> 时间：2012-10-31T00:30:27.000
> 
> 标签：google-chrome, css, webkit, linear-gradients

我需要一个具有线性渐变背景的固定 div。在所有浏览器中，背景始终位于 div 内的正确位置，而不是使用 Google Chrome (23.0.1271.52 beta-m)，div 内容保持固定，但背景沿页面滚动。

用 Firefox 看看这个，然后用 Chrome：http: [//jsfiddle.net/h3WNk/](http://jsfiddle.net/h3WNk/)

我尝试使用`background-attachment: fixed`，但这种方式根本不显示渐变。

似乎使用绝对定位有效，但即使用户滚动页面，我也需要将 div 固定在页面的左下角。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T23:36:52.457

还尝试了 Chrome 22（非测试版）相同的结果。令人惊讶的是，我发现添加一个`opacity`属性可以使 webkit 正确呈现背景，而无需随页面滚动！什么错误

# hibernate - 两阶段提交 + JTA + JMS + Hibernate

> ID：13149583
> 
> 赞同：0
> 
> 时间：2012-10-31T00:31:07.327
> 
> 标签：hibernate, transactions, jms, jta

我有一个要求，将消息放入队列，然后进行方法调用以更新通过 Hibernate 完成的数据库。我想将此作为单个事务的一部分，以便如果数据库中的更新调用失败，JMS 回滚并且不要将消息放入队列中。我尝试配置它，但看起来我错过了一些东西。任何帮助将不胜感激。

我调用 JMS 和 DAO 的方法是

```
@Transactional(rollbackFor = Exception.class)               
public boolean retrieveBatchOrders(BatchPullCriteria batchPullCriteria) throws SQLException, IOException{

    List<IntrmStrg> IntrmStrgOrderLst  = iStorageDAO.retrieveByStoreId(batchPullCriteria);
    List<IntrmStrg> IntrmStrgFinalLst  = iStorageDAO.retrieveOrdersByStoreIdLst(batchPullCriteria,IntrmStrgOrderLst);
    sendMsgToQueue.sendMessageToTarget(IntrmStrgFinalLst);

    iStorageDAO.updateOrdersStatus(IntrmStrgFinalLst,batchPullCriteria.getRetrievedBy(),BATCHRTRVD);
    return true;
}

@Transactional

public void updateOrdersStatus(List<IntrmStrg> IntrmStrgLst , String retrivedBy, String status ){
        Date retriveDate = new Date();
        Timestamp retriveDTimestamp = new Timestamp(retriveDate.getTime());
    try{
        for (Iterator<IntrmStrg> iterator = IntrmStrgLst.iterator(); iterator.hasNext();) {
            IntrmStrg intrmStrg = (IntrmStrg) iterator.next();
            intrmStrg.setRtrvdBy(retrivedBy);
            intrmStrg.setRtrvdDt(retriveDTimestamp);
            intrmStrg.setStts(status);
            LOGGER.info("Updating Order Status with ID" + intrmStrg.getIntrmStrgId());
            getHibernateTemplate().getSessionFactory().getCurrentSession().beginTransaction();
            getHibernateTemplate().update(intrmStrg);
            LOGGER.info("Updated Order Status with ID" + intrmStrg.getIntrmStrgId());
            getHibernateTemplate().getSessionFactory().getCurrentSession().getTransaction().commit();
        }
    }
    catch(HibernateException he)
    {
        getHibernateTemplate().getSessionFactory().getCurrentSession().getTransaction().rollback();
    }

    if (LOGGER.isDebugEnabled()) {
        LOGGER.info("Order Status Updated");    
    }

} 
```

应用程序.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:p="http://www.springframework.org/schema/p"
    xmlns:aop="http://www.springframework.org/schema/aop" xmlns:tx="http://www.springframework.org/schema/tx"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
       http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.0.xsd
       http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.0.xsd">

   <tx:annotation-driven transaction-manager="transactionManager"/>

   <bean id="txManager" class="org.springframework.transaction.jta.JtaTransactionManager">

   </bean>

    <bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource">
        <property name="driverClassName" value="oracle.jdbc.OracleDriver" />
        <property name="url"
            value="" />
        <property name="username" value="" />
        <property name="password" value="" />
    </bean>

    <bean id="iStorageSessionFactory"
        class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">
        <property name="dataSource">
            <ref local="dataSource" />
        </property>
        <property name="mappingDirectoryLocations">
            <list>
                <value>classpath:org/entity</value>
            </list>

        </property>
        <property name="hibernateProperties">
            <props>
                <prop key="hibernate.dialect">org.hibernate.dialect.Oracle10gDialect</prop>
                <prop key="hibernate.default_schema">DEV1</prop>
                <prop key="hibernate.show_sql">true</prop>
            </props>
        </property>

    </bean>

    <bean id="transactionManager"
        class="org.springframework.jdbc.datasource.DataSourceTransactionManager"
        lazy-init="true">
        <property name="dataSource" ref="dataSource" />
    </bean>

        <!-- -DAO Beans -->

    <bean id="storageDAO" class="org.kp.oppr.iStorage.dao.IStorageDAOImpl" >
    <property name="sessionFactory">
            <ref local="iStorageSessionFactory" />
        </property>
    </bean>

    <!--  Service Beans  -->
    <bean id="iStorageService" class="org.kp.oppr.iStorage.services.IStorageServiceImpl" >
    </bean>

        <!-- BROKER CONNECTION SETTING FOR TARXHB00 -->
    <bean id="jmsFactory" class="com.ibm.mq.jms.MQQueueConnectionFactory">
        <property name="hostName" value="${mq.conn.hostName}" />
        <property name="port" value="${mq.conn.hostPort}" />
        <property name="queueManager" value="${mq.conn.queueManager}" />
        <property name="channel" value="${mq.conn.channel}" />
        <property name="transportType" value="${mq.conn.transportType}" />
    </bean>

    <bean id="jmsFactorySecurity"
        class="org.springframework.jms.connection.UserCredentialsConnectionFactoryAdapter">
        <property name="targetConnectionFactory" ref="jmsFactory" />
        <property name="username" value=" " />
        <property name="password" value=" " />
    </bean>

    <bean id="jmsQueueSender" class="org.kp.oppr.storage.jms.JmsQueueSender">
        <property name="connectionFactory" ref="jmsFactorySecurity"></property>
    </bean>

    <bean id="SendMsgToQueue" class="org.kp.oppr.storage.jms.SendMsgToQueue">
    <property name="queueNamePrfix" value="${QUEUE_PREFIX}"></property>
    <property name="queueNameSufix" value="${QUEUE_SUFFIX}"></property>
    </bean>

    <bean id="iStorageConfig" class="org.kp.oppr.storage.config.storageConfig">
        <property name="maxNumberofOrders" value="${MAX_ORDER_COUNT}"></property>
    </bean>

</beans> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T02:21:32.433

主要问题是您使用的事务管理器不支持 XA。

您将应用程序部署到哪个容器？Spring 提供了与市场上主要容器一起使用的事务管理器。

如果它是一个独立的应用程序，或者它在不支持 JTA 的容器上运行，您可能希望在您的应用程序中使用其他一些事务管理器，例如 Bitronix 或 Atomikos

# html - 什么是 name 属性，什么时候应该使用它？（不是指表单域）

> ID：13149588
> 
> 赞同：0
> 
> 时间：2012-10-31T00:31:54.520
> 
> 标签：html, forms, iframe, name-attribute

我意识到它用于在提交到服务器时指定表单字段的名称。但是在框架和表格的上下文中`@target`呢？

有人可以解释以下模式的交易吗？

### 编辑：我熟悉该模式，以前使用过它，并且知道它的作用，所以我想更深入地解释该属性可以在哪些其他上下文中使用，以及这些上下文是如何使用的相互关联。

`<form target=foo></form`

...进而...

`<iframe name=foo />`

哦！而且，在向服务器识别表单字段之外使用它是否被认为是不好的做法？我听说过一些我不记得在某些情况下不推荐使用的地方。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T00:37:01.007

在这种情况下，`target=foo`应该将表单提交到具有 name 属性的 iframe `foo`。这将在该 iframe 中加载表单提交的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T06:06:15.657

除了对每个元素的定义之外，没有更深入地解释某些属性如何用于不同元素。如果元素`foo`有属性`zap`并且元素`bar`有属性`zap`，那么这些属性只共享名称，当然除非它们被*定义*为具有相同的含义。属性可能有完全不同的含义，它们可能取完全不同的值；这一切都取决于他们的定义。

在实践中，HTML 的设计者试图在这里保持一定的一致性，以便属性的名称反映其含义。例如，该`align`属性对于不同的元素具有部分相同的含义（例如，`align`for的含义与for`h1`相同），部分相似的含义（例如，for与for相似，但不相同）。但是例如属性 for确实与for无关。`align``h2``align``h1``align``table``type``ol``type``script`

HTML 4.01 规范中的[属性索引](http://www.w3.org/TR/REC-html40/index/attributes.html)概述了这些问题。您还可以在`name`此处查看汇总的不同元素的属性。

在 HTML 4.01 中，`name`已声明为`applet`，但这只是因为元素本身已被弃用。但是对于`form`and `a`，规范的散文说：“注意。包含此属性是为了向后兼容。应用程序应该使用 id 属性来识别元素。” 这种或类似的陈述经常被误解为适用`name`于一般元素；那将是完全错误的，甚至是荒谬的。

表单字段元素需要该`name`属性，以便它们对表单数据做出贡献，因为贡献基于他的属性（和元素的值）。如果您希望将这样的元素指定为要在属性中引用的“浏览上下文”，那么它在两种类型的`meta`元素之一中以及在元素中也是必不可少的。`iframe``target`

# bash - 如何避免在 sed(1) 中添加 '\n'

> ID：13149589
> 
> 赞同：1
> 
> 时间：2012-10-31T00:32:10.277
> 
> 标签：bash, scripting, sed

我想使用 bash 脚本插入一大段代码。

这就是我使用 sed(1) 让它工作的方式；

```
$ sed "/);/i\
\ \ \ \ 'doctrine' => array(\n\
        'driver' => array(\n\
            __NAMESPACE__ . '_driver' => array(\n\
                'class' => 'Doctrine\ORM\Mapping\Driver\AnnotationDriver',\n\
                'cache' => 'array',\n\
                'paths' => array(__DIR__ . '\../src/' . __NAMESPACE__ . '/Entity')\n\
            ),\n\
            'orm_default' => array(\n\
                'drivers' => array(\n\
                    __NAMESPACE__ . '\Entity' => __NAMESPACE__ . '_driver'\n\
                )\n\
            )\n\
        )\n\
    ),\n
" config/autoload/local.php; 
```

注意：我必须在每行末尾添加 \n 和 \ 才能使其正常工作。

有没有办法“不”必须这样做？插入纯文本？也许是一个不同的命令？

**编辑：我的问题是如何插入文本而不必添加所有反斜杠和换行符。**

这是我需要插入的文本：

> ```
> 'doctrine' => array(
>     'driver' => array(
>         __NAMESPACE__ . '_driver' => array(
>             'class' => 'Doctrine\ORM\Mapping\Driver\AnnotationDriver',
>             'cache' => 'array',
>             'paths' => array(__DIR__ . '/../src/' . __NAMESPACE__ . '/Entity')
>         ),
>         'orm_default' => array(
>             'drivers' => array(
>                 __NAMESPACE__ . '\Entity' => __NAMESPACE__ . '_driver'
>             )
>         )
>     )
> ) 
> ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T00:44:48.367

这是一种方法：

```
sed '/);/i\
'doctrine' => array(\
    'driver' => array(\
        __NAMESPACE__ . '_driver' => array(\
            'class' => 'Doctrine\ORM\Mapping\Driver\AnnotationDriver',\
            'cache' => 'array',\
            'paths' => array(__DIR__ . '/../src/' . __NAMESPACE__ . '/Entity')\
        ),\
        'orm_default' => array(\
            'drivers' => array(\
                __NAMESPACE__ . '\Entity' => __NAMESPACE__ . '_driver'\
            )\
        )\
    )\
)' file.php 
```

如果您尝试插入文件，请尝试：

```
sed '/);/ { 
    h
    r replacement.txt
    g
    N
}' file.php 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T02:35:26.170

如果您坚持使用`sed`，一种方法（不在每行末尾使用反斜杠）是将其保存到临时文件中，例如

```
cat >tempfile <<'EOF'
  code here...
EOF 
```

然后使用`r`（读取）命令`sed`

```
sed '/);/ r tempfile' config/autoload/local.php 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T00:38:41.897

```
cat << 'EOF' >> config/autoload/local.php
'doctrine' => array(
    'driver' => array(
        __NAMESPACE__ . '_driver' => array(
            'class' => 'Doctrine\ORM\Mapping\Driver\AnnotationDriver',
            'cache' => 'array',
            'paths' => array(__DIR__ . '/../src/' . __NAMESPACE__ . '/Entity')
        ),
        'orm_default' => array(
            'drivers' => array(
                __NAMESPACE__ . '\Entity' => __NAMESPACE__ . '_driver'
            )
        )
    )
)
EOF 
```

要将这些行与 sed 一起使用，您可以使用以下命令打印到变量中`read`：

```
read -d '' multiLineString <<"EOF"
'doctrine' => array(
    'driver' => array(
        __NAMESPACE__ . '_driver' => array(
            'class' => 'Doctrine\ORM\Mapping\Driver\AnnotationDriver',
            'cache' => 'array',
            'paths' => array(__DIR__ . '/../src/' . __NAMESPACE__ . '/Entity')
        ),
        'orm_default' => array(
            'drivers' => array(
                __NAMESPACE__ . '\Entity' => __NAMESPACE__ . '_driver'
            )
        )
    )
)
EOF 
```

然后`$multiLineString`与`sed`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T10:10:01.397

这可能对您有用（GNU sed）：

```
cat <<\! >insert_file
    'doctrine' => array(
    'driver' => array(
        __NAMESPACE__ . '_driver' => array(
            'class' => 'Doctrine\ORM\Mapping\Driver\AnnotationDriver',
            'cache' => 'array',
            'paths' => array(__DIR__ . '/../src/' . __NAMESPACE__ . '/Entity')
        ),
        'orm_default' => array(
            'drivers' => array(
                __NAMESPACE__ . '\Entity' => __NAMESPACE__ . '_driver'
            )
        )
    )
)

!
sed '/);/e cat insert_file' file.php 
```

# c - 在C中从HTTP代理服务器重建请求头到远程服务器

> ID：13149593
> 
> 赞同：2
> 
> 时间：2012-10-31T00:32:32.280
> 
> 标签：c, http, proxy, get

我需要开发一个 HTTP 代理服务器。我的代理服务器能够从网络浏览器中检索 HTTP 请求。而且我还能够连接到服务器。我无法理解如何进一步：它如何将请求从代理服务器发送到远程服务器。
我有以下查询：

1.  **从 HTTP 代理服务器发送到远程服务器的请求头格式**
2.  **它与我从网络浏览器中收到的 GET、HEAD 和 POST 方法的标题相同吗？**

我尝试发送整个标题：
GET [http://www.gmail.com/HTTP/1.1](http://www.gmail.com/) Accept
: text/html, application/xhtml+xml, */*
Accept-Language: en-US
User-Agent: Mozilla/5.0 (兼容；MSIE 9.0；Windows NT 6.1；WOW64；Trident/5.0)
接受编码：gzip，放气
代理连接：保持活动
主机：www.gmail.com

或：GET / HTTP/1.1
主机：www.gmail.com:80

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T02:53:21.153

您需要从代理请求到 HTTP 服务器请求的基本转换是更改第一行：

```
GET http://www.gmail.com/ HTTP/1.1 
```

到

```
GET / HTTP/1.1 
```

浏览器向代理发送请求时需要完整的 URL，以便代理可以进一步连接到真实服务器。但是，对服务器的 HTTP 请求*不得*在行中包含协议和主机名部分`GET`。

但是，这可能不是您唯一需要做的事情。HTTP 代理是一个相当复杂的应用程序，因为浏览器代理连接与代理服务器连接上的协议版本号和连接选项不同。

[RFC 2616](https://www.rfc-editor.org/rfc/rfc2616)包含大量有关 HTTP 代理应用程序正确行为的信息。

# groovy - groovy 可以在 jamvm 上运行吗？

> ID：13149595
> 
> 赞同：1
> 
> 时间：2012-10-31T00:33:12.127
> 
> 标签：groovy, jamvm

我想在嵌入式硬件中的 jamvm 上运行 groovy。以下是我尝试过的，但没有任何效果。

1) `$GROOVY_HOME/bin/groovy ...`

它抱怨没有设置 JAVA_HOME。由于 JamVm 是一个独立的可执行文件，如果可能的话，如何在 JamVM 中设置 JAVA_HOME？如果问题减少到设置它，它很容易解决。

2) `jamvm -cp $GROOVY_HOME/embedded/embeddable/groovy-all-2.0.5.jar:. TestClass`

我在[http://groovy.codehaus.org/Embedding+Groovy](http://groovy.codehaus.org/Embedding+Groovy)（'完整示例'部分）中运行了示例并得到了以下异常。我在 Mac 上运行了相同的示例，很好。

```
Exception in thread "main" BUG! exception in phase 'semantic analysis' in source unit '/root/test/Tester.groovy' 0
at org.codehaus.groovy.control.CompilationUnit.applyToSourceUnits(CompilationUnit.java:907)
at org.codehaus.groovy.control.CompilationUnit.doPhaseOperation(CompilationUnit.java:566)
at org.codehaus.groovy.control.CompilationUnit.compile(CompilationUnit.java:515)
at groovy.lang.GroovyClassLoader.doParseClass(GroovyClassLoader.java:279)
at groovy.lang.GroovyClassLoader.parseClass(GroovyClassLoader.java:258)
at groovy.lang.GroovyClassLoader.parseClass(GroovyClassLoader.java:244)
at groovy.lang.GroovyClassLoader.parseClass(GroovyClassLoader.java:185)
at TestClass.main(TestClass.java:8)
Caused by: java.lang.ArrayIndexOutOfBoundsException: 0
at org.codehaus.groovy.vmplugin.v5.Java5.makeParameters(Java5.java:396) 
```

3）我试过了

`java -cp ../groovy-2.0.5/embeddable/groovy-all-2.0.5.jar groovy.lang.GroovyShe ll <script.groovy>`

没用，得到以下

`java.lang.ExceptionInInitializerError at org.codehaus.groovy.reflection.ReflectionCache.getCachedClass(ReflectionCache.java:107)`

请建议一种在 jamvm 上运行 groovy 的方法。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T15:15:51.170

JAVA_HOME 是一个环境变量。您可以使用“导出”命令来设置它。ExceptionInInitializerError 意味着它无法创建一个类。要真正了解问题，我们需要嵌入的异常

# android - MapView 仍然显示空白视图

> ID：13149596
> 
> 赞同：2
> 
> 时间：2012-10-31T00:33:20.130
> 
> 标签：android, google-maps

我已经获得了我的 API 密钥并设置了所有权限。我还设置它使用谷歌地图库，但是当我加载地图布局时我仍然得到灰色网格。我也无法让模拟器使用坐标。它说“禁用的提供商网络”，但是当我在手机上调试时坐标工作得很好。

这是我的布局文件。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

    <com.google.android.maps.MapView
        android:id="@+id/map_view"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:enabled="true"
        android:clickable="true"
        android:apiKey="0inWE-rpNsby-evq_ORv1bdMuhprR3R38VeZaAw"
        />

    <LinearLayout android:id="@+id/zoom"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_centerHorizontal="true"
        /> 

</RelativeLayout> 
```

这是相应的Java文件。

```
package com.example.zip.code;

import android.app.Activity;
import android.content.Intent;
import android.location.Criteria;
import android.location.Location;
import android.location.LocationManager;
import android.os.Bundle;
import android.view.Menu;
import android.view.MenuInflater;
import android.view.MenuItem;

import com.google.android.maps.MapView;
import com.google.android.maps.GeoPoint;
import com.google.android.maps.MapActivity;
import com.google.android.maps.MapController;

public class OpenMap extends MapActivity  {
    private MapController mapController;
     private LocationManager locationManager;
      private String prov;
      double lat;
      double lng;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.maplayout);
        //Criteria crit = new Criteria();
        //prov = locationManager.getBestProvider(crit, false);
        //Location loc = locationManager.getLastKnownLocation(prov);
        // Get Mapping Controllers etc
        MapView mapView = (MapView) findViewById(R.id.map_view);
        mapController = mapView.getController();

        // Center on Current Position
        //mapController.setCenter(new GeoPoint((int) (loc.getLatitude() * 1E6),
                                                //  (int) (loc.getLongitude() * 1E6)));
       // mapController.setCenter(new GeoPoint(1924000,-99120000));
        mapController.setZoom(11);
        mapView.setBuiltInZoomControls(true);

    }

    protected boolean isRouteDisplayed() {
        // TODO Auto-generated method stub
        return false;
    }

    @Override
      public boolean onCreateOptionsMenu(Menu menu) {
          MenuInflater inflater = getMenuInflater();
          inflater.inflate(R.menu.mapsettings, menu);
          return true;
      }

      @Override
      public boolean onOptionsItemSelected(MenuItem item) {
          // Handle item selection
          switch (item.getItemId()) {
              case R.id.zipswap:
                  swapToZip();
                  return true;
              default:
                  return super.onOptionsItemSelected(item);
          }
      }

      public void swapToZip(){
          Intent i = new Intent(getApplicationContext(), MainActivity.class);
          startActivity(i);
      }
} 
```

我不知道似乎出了什么问题。我已经使用了所有应该需要的东西，但我仍然得到一个灰色的网格。我需要一个单独的密钥来进行调试吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T00:58:56.120

如果你运行或调试你的 Eclipse，你应该有谷歌地图的调试密钥，这是一个帮助你获取调试 API 密钥的链接

检查“获取 SDK 调试证书的 MD5 指纹”部分

[http://code.google.com/android/add-ons/google-apis/mapkey.html](http://code.google.com/android/add-ons/google-apis/mapkey.html)

或者

新链接路径 [https://developers.google.com/maps/documentation/android/mapkey](https://developers.google.com/maps/documentation/android/mapkey)

在发布构建时，您必须将现有的调试 API 密钥替换为 API 密钥。

# sql-server - 对于以下场景，如何通过 SQL Server 中的一条 UPDATE 语句进行更新？

> ID：13149601
> 
> 赞同：0
> 
> 时间：2012-10-31T00:33:49.493
> 
> 标签：sql-server

对于以下情况，如何通过一个 UPDATE 语句进行更新？我有 2 张桌子。TableA 包含以下字段：TestNumber、CO、CO2、N20、CH4，TestNumber 列的值为 1、2、3

```
TableA

TestNumber      CO      CO2     N2O     CH4  
 1                                                              
 2                                                              
 3 
```

第二个名为 TableB 的表包含以下字段：TestNumber、TestIdentifier、TestValue，其值如下：

```
TableB

TestNumber      TestIdentifier  TestValue      
 1                 CO           12.3   
 1                 CO2          10     
 2                 CO           9.8    
 2                 N20          45     
 3                 CO           12.5   
 3                 CO2          13.0 
```

我期望结果为：

```
TestNumber      CO      CO2     N2O     CH4   
 1              12.3    10                                             
 2              9.8             45                                     
 3              12.5    13.0 
```

我使用一大块代码来做到这一点，比如声明表变量。然后将 TableB 中的数据存储到表变量中。然后 SET rowCount =1 然后循环并删除一行并更新工作完美的 TableA。我得到了我的预期结果。但我相信我可以直接执行 UPDATE 命令，而无需过多的表变量声明和循环。我正在更新，但不是直接更新。

我想学习如何在不循环的情况下直接更新。

回复：

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T06:34:29.897

尝试这个 ：

您可以使用与具有的列名相同的形式`PIVOT`转换`TableB``TableA``TestIdentifier``TableB`

```
Select TestNumber ,[Co],[CO2],[N2O],[CH4]
FROM
   ( Select TestNumber,TestIdentifier,TestValue from TableB) as sourceTable
pivot 
   (
    sum(TestValue) 
    for TestIdentifier in ([Co],[CO2],[N2O],[CH4])
   )
as pvt 
```

现在您可以简单地使用内部连接`TestNumber`并更新`TableA`

```
Update t
set t.Co=cte.CO,
t.CO2=cte.CO2,
t.N2O=cte.N2O,
t.CH4=cte.CH4
from TableA as t
inner join cte 
on cte.TestNumber=t.TestNumber 
```

完整的sql查询是

```
;With cte (TestNumber ,[Co],[CO2],[N2O],[CH4])
 as
 (
  Select TestNumber ,[Co],[CO2],[N2O],[CH4]
  FROM
      ( Select TestNumber,TestIdentifier,TestValue from TableB) as sourceTable
  pivot 
      (
       sum(TestValue) 
       for TestIdentifier in ([Co],[CO2],[N2O],[CH4])
      )
  as pvt
 )
  Update t
  set t.Co=cte.CO,
  t.CO2=cte.CO2,
  t.N2O=cte.N2O,
  t.CH4=cte.CH4
  from TableA as t
  inner join cte 
  on cte.TestNumber=t.TestNumber 
```

要获得完整的解决方案，请尝试[SQLFIDDLE](http://sqlfiddle.com/#!3/77d86/2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T01:10:38.697

您可以阅读有关数据透视表的内容……也许会有所帮助。但是如果你的第一个表是静态的。我的意思是，它总是相同的列和相同的行，你可以这样做：

```
Update tableA set
CO = (Select sum(testValue) from TableB where testNumber = 1 and testIdentifier = 'CO'),
CO2 = (Select sum(testValue) from TableB where testNumber = 1 and testIdentifier = 'CO2'),
N20 = (Select sum(testValue) from TableB where testNumber = 1 and testIdentifier = 'N20'),
CH4 = (Select sum(testValue) from TableB where testNumber = 1 and testIdentifier = 'CH4')
where testNumber = 1 
```

您可以为其他测试再写两次...或者如果它们是可变的..您可以在 while 循环中编写

# javascript - javascript html5 element remove

> ID：13149602
> 
> 赞同：1
> 
> 时间：2012-10-31T00:33:58.170
> 
> 标签：javascript, html, object, audio

How do you remove a html element which is not in the DOM tree( stored in a separate structure) by JS

I have a project where i make an audio request (html5) audio.src="someserver" Server long polls and sends the data to audio. and audio plays it.

when audio is finished browser receives a command to stop the audio.

I store these audio elements in a hashtable in javascript and not in dom structure like standard html/

so remove parent/child does not apply.

as far as I know we dont even need to clean these objects as when there is no reference to that object, It should be deleted(internally) So is setting my audio element to NULL enough. ?

I am getting performance hits in my browser ?

Also a reminder that when we make the audio request there are also 4-5 other longed polled requests.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T00:41:43.820

DOM nodes aren't much different than any other JS object. If they don't have any references to them, they should get garbage collected.

That said there may be implicit references. If it's playing an audio file for instance the browser itself may have references to it in order maintain the player. So as long as the audio element is completely stopped and dereferenced, it should automatically get cleaned up.

I think you are over thinking this.

# c++ - 将整数识别为二维数组下标中的浮点数

> ID：13149603
> 
> 赞同：1
> 
> 时间：2012-10-31T00:34:12.463
> 
> 标签：c++, arrays, subscript

这是我目前正在使用的代码

```
template <class T>
float Knapsack<T>::knapTable()
{
  const int MAXSIZE = 40000;
  int temps = nObjects - 1;
  float** memoize = new float*[MAXSIZE];

  for(int y = 0; y < weight[nObjects]; y++)
    memoize[nObjects][y] = 0;

  for(int y = weight[nObjects]; y < knapCap; y++)
    memoize[nObjects][y] = price[y];

  for(int i = temps; i >= 1; i--)
  {
    for(int y = weight[i]; y < knapCap; y++)
      memoize[i][y]= max(memoize[i+1][y], (memoize[i+1][y-weight[i]]+price[i]));
  }

  return memoize[1][nObjects];

} 
```

出于某种原因，我不断收到错误消息：knapsack.hpp:68:64: error: invalid types 'float*[float]' for array subscript。

就是这一行： float** memoize = new float*[MAXSIZE];

由于某种原因，编译器似乎将 MAXSIZE 识别为浮点数，它是一个 const int。

有没有办法解决这个问题？

编辑了更多代码头文件#ifndef KNAPSACK_H #define KNAPSACK_H

```
#include <stdexcept>
#include <assert.h>
#include <iostream>
#include <limits.h>
using namespace std;

template <class T>
class Knapsack
{
  private:
    float knapPrice;
    int knapCap, nObjects;
    float weight[40000];
    float price[40000];
  public:

    Knapsack(): knapPrice(0), knapCap(0), nObjects(0) {}
    ~Knapsack() {knapPrice = 0; knapCap = 0;}

    float knapFull (int position, int currentCap);

    float knapTable ();

    float greedyKnap (int currentCap);

    float max(float noAdd,float addOb);

    void printPrice();
    //valueized and valued are modified versions of mergeSort and merge
    //designed to sort two arrays by a fraction of the two.
    void valueize(int ini, int last);

    void valued(int ini, int middle, int last);

    void fillWandP();

    void setNObjects(int n);

    void setKnapCap(int boom);
};
#include "knapsack.hpp"
#endif 
```

主函数 //虽然我不认为这会影响它 #include "sortClass.h" #include "knapsack.h" #include #include #include #include using namespace std;

```
//mergeSort main;
int main()
{
    Knapsack<float> a;
    float sacked = 0;

    int nO = 18;
    int cap = 700;
    a.setNObjects(nO);

a.setKnapCap(cap);

    a.fillWandP();

    for(int b = 0; b <3800000; b++)//for getting good times
  sacked = b;

    int startAll = clock()*1000000;
    sacked = a.knapFull(1, cap);
    int knapped = clock()*1000000;
    int boom = a.knapTable();
    int tabled = clock()*1000000;
    a.valueize(1, cap);
    int andDone = a.greedyKnap(cap);
    int greedified = clock()*1000000;
    cout<<startAll<<endl;

    greedified = greedified - tabled;
    tabled = tabled - knapped;
    knapped = knapped - startAll;
    cout<<"Recursion profit:"<<sacked<<" Time: "<<knapped<<endl;
    cout<<"Memoization profit:"<<boom<<" Time: "<<tabled<<endl;
    cout<<"Greedy profit: "<<andDone<<" Time: "<<greedified<<endl;

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T01:28:10.440

`weight`被声明`float weight[40000]`为`class Knapsack`。

然后在函数中使用一个元素`weight`作为索引：`memoize``knaptable()`

```
memoize[i][y]= max(memoize[i+1][y], (memoize[i+1][y-weight[i]]+price[i]));
//                                                  ^^^^^^^^^ 
```

作为记录，这就是 g++ 4.6.1 产生错误的那一行；它不指向`memoize`声明的行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T01:28:21.043

```
 for(int i = temps; i >= 1; i--)
  {
    for(int y = weight[i]; y < knapCap; y++)
      memoize[i][y]= max(memoize[i+1][y], (memoize[i+1][y-weight[i]]+price[i]));
  } 
```

`y-weight[i]`是一个浮点数。这是你的问题。

解决此问题后，您会发现仍然存在问题，您正在分配一个指针数组，但您还需要为每个指针分配**第二个维度**，然后才能使用该数组。

类似于以下内容：

```
float** memoize = new float*[MAXSIZE];

for(size_t i = 0; i < MAXSIZE; ++i)
{
  memoize[i] = new float[MAXSIZE];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T01:06:57.460

不一定相关，但您没有正确使用数组/指针。您在调用时创建了第一级指针，`float** memoize = new float*[MAXSIZE]`但是您只有一个指针数组，而不是双精度数组。您还需要将每个初始化`memoize[i]`为数组。

话虽如此，看起来您`memoize`无论如何都不应该为您的数组分配内存。只需将其声明为

```
float memoize[SIZE][SIZE]; 
```

这样，您就不必担心内存清理或其他任何事情，而且更有意义。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T01:28:21.330

我想也许你只需要为第二个指针分配内存，就像

```
float** memoize = new float*[MAXSIZE];
    memoize=(float**)malloc(sizeof(float*)*MAXSIZE);
    for(int i=0;i<MAXSIZE;i++)
    {
        memoize[i]=(float*)malloc(sizeof(float)*MAXSIZE);
    } 
```

# ruby-on-rails - Rails bootstrap css未按正确顺序加载

> ID：13149609
> 
> 赞同：0
> 
> 时间：2012-10-31T00:35:32.557
> 
> 标签：ruby-on-rails, css, twitter-bootstrap

我完全不明白这一点，我完全被难住了。我有引导程序、默认 css 文件，然后是单个页面 css 文件。我的 css 文件如下所示：

```
// Place all the styles related to the Hotel controller here.
// They will automatically be included in application.css.
// You can use Sass (SCSS) here: http://sass-lang.com/
//*= require_self
//*= require jquery.ui.all
//*= require bootstrap_and_overrides.css.scss
//*= require defaults.css.scss
//*= require_tree ./hotels 
```

这是它的加载方式：

```
 <link href="/assets/hotels.css?body=1" media="screen" rel="stylesheet" type="text/css" />

<link href="/assets/jquery.ui.core.css?body=1" media="screen" rel="stylesheet" type="text/css" />
<link href="/assets/jquery.ui.theme.css?body=1" media="screen" rel="stylesheet" type="text/css" />
<link href="/assets/jquery.ui.accordion.css?body=1" media="screen" rel="stylesheet" type="text/css" />
<link href="/assets/jquery.ui.autocomplete.css?body=1" media="screen" rel="stylesheet" type="text/css" />
<link href="/assets/jquery.ui.button.css?body=1" media="screen" rel="stylesheet" type="text/css" />
<link href="/assets/jquery.ui.datepicker.css?body=1" media="screen" rel="stylesheet" type="text/css" />
<link href="/assets/jquery.ui.dialog.css?body=1" media="screen" rel="stylesheet" type="text/css" />
<link href="/assets/jquery.ui.progressbar.css?body=1" media="screen" rel="stylesheet" type="text/css" />
<link href="/assets/jquery.ui.resizable.css?body=1" media="screen" rel="stylesheet" type="text/css" />
<link href="/assets/jquery.ui.selectable.css?body=1" media="screen" rel="stylesheet" type="text/css" />
<link href="/assets/jquery.ui.slider.css?body=1" media="screen" rel="stylesheet" type="text/css" />
<link href="/assets/jquery.ui.tabs.css?body=1" media="screen" rel="stylesheet" type="text/css" />
<link href="/assets/jquery.ui.base.css?body=1" media="screen" rel="stylesheet" type="text/css" />
<link href="/assets/jquery.ui.all.css?body=1" media="screen" rel="stylesheet" type="text/css" />
<link href="/assets/bootstrap_and_overrides.css?body=1" media="screen" rel="stylesheet" type="text/css" />
<link href="/assets/defaults.css?body=1" media="screen" rel="stylesheet" type="text/css" />
<link href="/assets/hotels/add_fonts.css?body=1" media="screen" rel="stylesheet" type="text/css" />

<link href="/assets/hotels/carousel.css?body=1" media="screen" rel="stylesheet" type="text/css" />
<link href="/assets/hotels/carousel_side_text.css?body=1" media="screen" rel="stylesheet" type="text/css" />
<link href="/assets/hotels/directions.css?body=1" media="screen" rel="stylesheet" type="text/css" />
<link href="/assets/hotels/fileuploader.css?body=1" media="screen" rel="stylesheet" type="text/css" />
<link href="/assets/hotels/gmaps4rails.css?body=1" media="screen" rel="stylesheet" type="text/css" />
<link href="/assets/hotels/index.css?body=1" media="screen" rel="stylesheet" type="text/css" />
<link href="/assets/hotels/specials.css?body=1" media="screen" rel="stylesheet" type="text/css" /> 
```

但是当我检查萤火虫中的一个元素时，它是：

[一堆来自 Bootstrap 的东西]

[我的默认文件中的 CSS ] <---- 被引导程序覆盖

[一堆来自 Bootstrap 的东西]

所以我不明白。我的默认设置是在引导之后加载的，但是它们被引导覆盖了。我不明白这怎么可能。

编辑添加：

这是我试图摆脱左边距的 span7 div。不幸的是，正如您所见，我的覆盖位于该块的中间。左边距：0px；正在被覆盖。

```
.row-fluid .span7 {
    width: 57.265%;
}
bootst...?body=1 (line 6396)
.row-fluid [class*="span"] {
    -moz-box-sizing: border-box;
    display: block;
    float: left;
    margin-left: 2.5641%;
    min-height: 30px;
    width: 100%;
}
bootst...?body=1 (line 6290)
.row-fluid .span7 {
    width: 57.4468%;
}
bootst...?body=1 (line 469)
.row-fluid [class*="span"] {
    -moz-box-sizing: border-box;
    display: block;
    float: left;
    margin-left: 2.12766%;
    min-height: 30px;
    width: 100%;
}
bootst...?body=1 (line 363)
.text-line-buttons {
    float: left;
    margin-left: 0;
    text-align: left;
}
**defaul...?body=1 (line 224)
.span7 {
    width: 670px;
}**
bootst...?body=1 (line 6185)
[class*="span"] {
    float: left;
    margin-left: 30px;
}
bootst...?body=1 (line 6141)
.span7 {
    width: 540px;
}
bootst...?body=1 (line 258)
[class*="span"] {
    float: left;
    margin-left: 20px; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T01:00:20.943

您是否尝试过将 !important 写入您的 css 文件？也许很烦人，但你可以试试......

[!重要的CSS](http://webdesign.about.com/od/css/f/blcssfaqimportn.htm)

# c# - 需要 HtmlAgilityPack 命名空间管理器或 XsltContext。此查询具有前缀、变量或用户定义的函数

> ID：13149612
> 
> 赞同：1
> 
> 时间：2012-10-31T00:35:39.750
> 
> 标签：c#, html-agility-pack

我正在使用 HtmlAgilityPack，我正面临这个错误

```
Namespace Manager or XsltContext needed. This query has a prefix, variable, or user-defined function. 
```

使用此代码

```
 Document.LoadHtml(textBox1.Text);

    var result = Document.DocumentNode.SelectNodes("id('side_info')/x:div[2]/x:a/x:span");
    textBox1.Text = result.ToString(); 
```

[注意] 我正在为 Firefox 使用 XPath Checker 插件，它告诉命名空间 x 位于 uri [http://www.w3.org/1999/xhtml/](http://www.w3.org/1999/xhtml/)

但我无法将名称空间添加到 HtmlAgilityPack SelectNodes

* * *

## 回答 #1

> 赞同：-8
> 
> 时间：2012-10-31T12:17:55.477

好的，我用 SelectSingleNode 和 XSLTContext 解决了这个问题。

# python - 制作一个制作.exe的程序

> ID：13149614
> 
> 赞同：1
> 
> 时间：2012-10-31T00:35:52.037
> 
> 标签：python, exe

我正在使用 Python 2.7

我正在寻找用我的程序制作 .exe 的最佳方法。我的程序是一个生成 .py 文件的应用程序开发工具。将此 .py 文件转换为 .exe 的最佳方法是什么？

转换将在用户计算机上进行，他们可能没有安装 python。

-谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T00:38:43.260

最好的方法是将[py2exe](http://www.py2exe.org/)与[distutils](http://docs.python.org/2/library/distutils.html)一起使用。这是我在 github 上的一个项目的[setup.py 示例：](https://github.com/softwaredoug/VisPerf/blob/master/perfvis/setup.py)

```
from distutils.core import setup
import py2exe
from version import version

# This is a GUI app, so I set the windows variable
# I include in with the exe a single data file -- LICENSE.text
# I then set a bunch of options specific to py2exe
setup(windows=[{'script':'mainWindow.py', 'dest_base':'VisPerf'}],
      data_files = ['../LICENSE.txt'],
      options = {
    'py2exe': {
        'dist_dir':("../bin/32/%s" % version),
        'dll_excludes': [
            'MSVCP90.dll'
         ],
        'optimize' : 2
     }
}) 
```

然后从命令行：

```
C:\YourDirHere\>python setup.py py2exe 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T01:56:43.997

过去一年左右我一直在使用[PyInstaller](http://www.pyinstaller.org/)，并且真的很喜欢它。下面我有一些将我从 py2exe 拉到 pyinstaller 的关键特性

1.  它不需要安装（即没有`python setup.py install`）来使用它。它旨在从目录中调用。

2.  可执行文件可以使用单个命令构建，即：`python pyinstaller.py -F -o publish -n MyExeName my_handy_script.py`

3.  最新版本不需要分发“MSVCP90.dll”（或类似的）库。有关与此库相关的一些令人头疼的问题，请参阅[此 SO 帖子。](https://stackoverflow.com/questions/10060765/create-python-exe-without-msvcp90-dll)

4.  Pyinstaller 似乎可以创建更小的单个文件可执行文件。

5.  Pyinstaller 适用于 Linux、Windows 和 Mac

6.  正在积极开发中（py2exe 最近更新近 4 年前）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T00:37:38.873

我以前用过这个程序：[py2exe](http://www.py2exe.org/)是一个不错的选择。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T00:38:28.017

[py2exe](http://www.py2exe.org/)（及其`py2app`MacOSX 对应物）通常用于此目的。我用过`py2app`，可以说我很满意。我认为这`py2exe`也是快速和容易的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-31T00:38:52.390

您可以使用[py2exe](http://www.py2exe.org/)，但前提是计算机上安装了 python。如果没有安装 python，就无法进行转换。

# image - 难以调整存储在 JLabel 中的图像大小

> ID：13149624
> 
> 赞同：0
> 
> 时间：2012-10-31T00:36:59.673
> 
> 标签：image, jlabel

我设法增加了 JLabel 的图像（其中存储了一个 imageIcon）。当我按下增加尺寸按钮时，面板上的图像原始尺寸增加了，这正是我想要的。但是，当我单击减小尺寸按钮时（我认为将其除以比例可能会修复它）标签减小，但实际图像外观（我猜的尺寸）发生了变化。它不是减小尺寸，就像我的增加按钮增加尺寸一样。我花了几个小时试图弄清楚为什么通过乘以它，我能够增加标签的大小和其中的图像（这意味着不仅标签在增加，实际图像也在增加）但减少（我是除法而不是乘法）它不起作用。这是我的增加和减少听众。

```
 public class IncreaseSizeListener implements ActionListener {
    static JLabel increasedLabel;
    @Override
    public void actionPerformed(ActionEvent e) {        
        increasedLabel = CardLabelListener.selectedLabel;
        Icon icon = CardLabelListener.selectedLabel.getIcon();
        int scale =2;
        System.out.println("Increased size fired");
        //I can now resize images, based on my needs
        BufferedImage bi = new BufferedImage(
            scale*icon.getIconWidth(),
            scale*icon.getIconHeight(),
            BufferedImage.TYPE_INT_ARGB);
            Graphics2D g = bi.createGraphics();
            g.scale(scale,scale);
            icon.paintIcon(null,g,0,0);
            g.dispose();
            JLabel temp = new JLabel(new ImageIcon(bi));
            //to ensure proper size is kept for the enlarged image
            CardLabelListener.selectedLabel.setSize(icon.getIconWidth()*scale, icon.getIconHeight()*(scale));
            CardLabelListener.selectedLabel.setIcon(temp.getIcon());
            CardLabelListener.selectedLabel.updateUI(); 
    }

}

public class DecreaseSizeListener implements ActionListener {
    static JLabel increasedLabel;
    @Override
    public void actionPerformed(ActionEvent e) {        
        increasedLabel = CardLabelListener.selectedLabel;
      Icon icon = CardLabelListener.selectedLabel.getIcon();

        int scale =2;
        //I can now resize images, based on my needs
        BufferedImage bi = new BufferedImage(
            icon.getIconWidth()/scale,
            icon.getIconHeight()/scale,
            BufferedImage.TYPE_INT_ARGB);
            Graphics2D g = bi.createGraphics();
            g.scale(scale,scale);
            icon.paintIcon(null,g,0,0);
            g.dispose();
            JLabel temp = new JLabel(new ImageIcon(bi));
            //to ensure proper size is kept for the enlarged image
        CardLabelListener.selectedLabel.setSize( (icon.getIconWidth()/scale), (icon.getIconHeight()/(scale)));
            CardLabelListener.selectedLabel.setIcon(temp.getIcon());
            CardLabelListener.selectedLabel.updateUI();

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T03:28:22.123

在您的减少动作侦听器中更改`g.scale(scale,scale);`为`g.scale(0.5d,0.5d);`

或者你可以这样做...

```
int scale = 0.5;
//I can now resize images, based on my needs
BufferedImage bi = new BufferedImage(
    icon.getIconWidth() * scale,
    icon.getIconHeight() * scale,
    BufferedImage.TYPE_INT_ARGB);
Graphics2D g = bi.createGraphics();
g.scale(scale,scale);
icon.paintIcon(null,g,0,0);
g.dispose();
// This really isn't required...
//JLabel temp = new JLabel(new ImageIcon(bi));
//to ensure proper size is kept for the enlarged image
// There is a better way...
//CardLabelListener.selectedLabel.setSize( (icon.getIconWidth()/scale), (icon.getIconHeight()/(scale)));
// This isn't required
//CardLabelListener.selectedLabel.setIcon(temp.getIcon());
// This doesn't do what you think it does...
//CardLabelListener.selectedLabel.updateUI();

CardLabelListener.selectedLabel.setIcon(new ImageIcon(bi));
CardLabelListener.selectedLabel.setSize(CardLabelListener.selectedLabel.getPreferredSize()); 
```

现在增加和减少算法几乎相同（除了因子），您应该能够使用单一方法;）

这几乎是我最终得到的代码......

```
public class ScaleMyIcon {

    public static void main(String[] args) {
        new ScaleMyIcon();
    }

    public ScaleMyIcon() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new ScaleMyIconPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    protected class ScaleMyIconPane extends JPanel {

        public ScaleMyIconPane() {

            setLayout(new BorderLayout());

            ImageIcon image = null;

            try {
                image = new ImageIcon(ImageIO.read(getClass().getResource("/stormtrooper-tie.jpg")));
            } catch (IOException ex) {
                ex.printStackTrace();
            }

            JLabel label = new JLabel(image);
            add(label);

            JPanel buttons = new JPanel();
            JButton increase = new JButton("+");
            JButton decrease = new JButton("-");

            buttons.add(increase);
            buttons.add(decrease);

            increase.addActionListener(new IncreaseSizeListener(label));
            decrease.addActionListener(new DecreaseSizeListener(label));

            add(buttons, BorderLayout.SOUTH);
        }
    }

    public class Scaler {

        public Icon getScaledInstance(Icon original, double scale) {
            BufferedImage bi = new BufferedImage(
                    (int)Math.round(scale * original.getIconWidth()),
                    (int)Math.round(scale * original.getIconHeight()),
                    BufferedImage.TYPE_INT_ARGB);
            Graphics2D g = bi.createGraphics();
            g.scale(scale, scale);
            original.paintIcon(null, g, 0, 0);
            g.dispose();

            return new ImageIcon(bi);
        }
    }

    public class IncreaseSizeListener extends Scaler implements ActionListener {

        private JLabel increasedLabel;

        private IncreaseSizeListener(JLabel label) {
            increasedLabel = label;
        }

        @Override
        public void actionPerformed(ActionEvent e) {
            Icon icon = increasedLabel.getIcon();
            int scale = 2;
            increasedLabel.setIcon(getScaledInstance(icon, scale));
        }
    }

    public class DecreaseSizeListener extends Scaler implements ActionListener {

        private JLabel decreasedLabel;

        private DecreaseSizeListener(JLabel label) {
            decreasedLabel = label;
        }

        @Override
        public void actionPerformed(ActionEvent e) {
            Icon icon = decreasedLabel.getIcon();
            decreasedLabel.setIcon(getScaledInstance(icon, 0.5d));
        }
    }
} 
```

**用不同的方法更新**

当我在处理它时，我注意到了两个问题。上下比例之间没有联合，并且您从未使用原始图像进行缩放，您总是在缩放脏图像。尝试缩小图像并再次备份。

这是我对如何克服这些问题的看法

```
public class ScaleMyIcon {

    public static void main(String[] args) {
        new ScaleMyIcon();
    }

    public ScaleMyIcon() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new ScaleMyIconPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    protected class ScaleMyIconPane extends JPanel {

        public ScaleMyIconPane() {

            setLayout(new BorderLayout());

            ImageIcon image = null;

            try {
                image = new ImageIcon(ImageIO.read(getClass().getResource("/stormtrooper-tie.jpg")));
            } catch (IOException ex) {
                ex.printStackTrace();
            }

            JLabel label = new JLabel(image);
            add(label);

            JPanel buttons = new JPanel();
            JButton increase = new JButton("+");
            JButton decrease = new JButton("-");

            buttons.add(increase);
            buttons.add(decrease);

            increase.addActionListener(new IncreaseSizeListener(label));
            decrease.addActionListener(new DecreaseSizeListener(label));

            add(buttons, BorderLayout.SOUTH);

        }
    }

    public static class Scalable {

        private JLabel label;
        private Icon original;
        private static double scale = 1;

        private Scalable(JLabel label) {
            this.label = label;
            original = label.getIcon();
        }

        public JLabel getLabel() {
            return label;
        }

        public double getScale() {
            return scale;
        }

        public void setScale(double scale) {
            this.scale = scale;
        }

        public void incrementScale(double factor) {

            setScale(getScale() + factor);

        }

        public Icon getScaledInstance() {

            BufferedImage bi = new BufferedImage(
                    (int) Math.round(scale * original.getIconWidth()),
                    (int) Math.round(scale * original.getIconHeight()),
                    BufferedImage.TYPE_INT_ARGB);
            Graphics2D g = bi.createGraphics();
            g.scale(scale, scale);
            original.paintIcon(null, g, 0, 0);
            g.dispose();

            return new ImageIcon(bi);

        }
    }

    public class IncreaseSizeListener extends Scalable implements ActionListener {

        public IncreaseSizeListener(JLabel label) {
            super(label);
        }

        @Override
        public void actionPerformed(ActionEvent e) {
            incrementScale(0.05);
            getLabel().setIcon(getScaledInstance());
        }
    }

    public class DecreaseSizeListener extends Scalable implements ActionListener {

        private DecreaseSizeListener(JLabel label) {
            super(label);
        }

        @Override
        public void actionPerformed(ActionEvent e) {
            incrementScale(-0.05);
            getLabel().setIcon(getScaledInstance());
        }
    }
} 
```

# solr - Solr 4.0 中的 BaseTokenFilterFactory 去了哪里？

> ID：13149627
> 
> 赞同：4
> 
> 时间：2012-10-31T00:37:13.307
> 
> 标签：solr

用于创建您自己的令牌和字符过滤器的 Solr 文档说明如下。

[http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters#Specifying_an_Analyzer_in_the_schema](http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters#Specifying_an_Analyzer_in_the_schema)

> 如果你想使用自定义 CharFilters、Tokenizers 或 TokenFilters，你需要编写一个非常简单的工厂，它是 BaseTokenizerFactory 或 BaseTokenFilterFactory 的子类，像这样......

```
public class MyCustomFilterFactory extends BaseTokenFilterFactory {
  public TokenStream create(TokenStream input) {
    return new MyCustomFilter(input);
  }
} 
```

我在 Solr 4 的源代码中的任何地方都找不到 BaseTokenFilterFactory。

这是 Solr 3.6.1 中的 org.apache.solr.analysis 包

[http://svn.apache.org/viewvc/lucene/dev/tags/lucene_solr_3_6_1/solr/core/src/java/org/apache/solr/analysis/](http://svn.apache.org/viewvc/lucene/dev/tags/lucene_solr_3_6_1/solr/core/src/java/org/apache/solr/analysis/)

这是 Solr 4.0.0 的同一个包

[http://svn.apache.org/viewvc/lucene/dev/tags/lucene_solr_4_0_0/solr/core/src/java/org/apache/solr/analysis/](http://svn.apache.org/viewvc/lucene/dev/tags/lucene_solr_4_0_0/solr/core/src/java/org/apache/solr/analysis/)

该文档看起来适用于 Solr 3.6，但我需要知道如何使用 4.0 创建自定义过滤器。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-31T04:03:17.987

`BaseTokenFilterFactory`现在有了 solr 4.0 `org.apache.lucene.analysis.util.TokenFilterFactory`，所以你可以检查[一下](http://solr.pl/en/2012/05/14/developing-your-own-solr-filter/)。

# arrays - csh将字符串添加到数组中，空格问题

> ID：13149637
> 
> 赞同：6
> 
> 时间：2012-10-31T00:39:16.617
> 
> 标签：arrays, string, shell, scripting, csh

我在用 csh 做一些基本的事情时遇到了麻烦。我有一个字符串：

```
set newCmd = "$expansionCmd –option1 –option2 …" 
```

我正在创建一个由这些字符串组成的数组，稍后我想执行它：

```
set expansionCmdList = ($expansionCmdList[*] "$newCmd")   
#I also tried without quotes, e.g. just $newCmd 
```

最后我尝试迭代并执行这些命令：

```
foreach exCmd ($expansionCmdList) 
    `exCmd`    #execute it in the shell
end 
```

然而问题是数组条目不是完整的字符串，而是字符串的每个部分都由空格分隔，即第一个条目只是“$expansionCmd”，下一个条目将是“-option1”等。

提前为使用 c shell 道歉，我公司的代码库被它卡住了。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-31T01:10:51.350

每当您扩展整个数组并希望保持其各个元素的身份不变时，您需要`:q`在扩展上使用 (for "quoted") 修饰符。否则，一旦您执行类似`set expansionCmdList=($expansionCmdList[*] "$newCmd")`的操作，列表中所有先前的命令都会被拆分为它们的组成词，每个词现在都是它自己的数组元素。简单演示：

```
% set a = ( a "b c" d )
% echo $a[2]
b c
% set a = ( $a[*] e )
% echo $a[2]
b 
```

糟糕，您甚至在进入执行循环之前就弄乱了数组。事情变得更好`:q`：

```
% set a = ( a "b c" d )
% set a = ( $a:q e )
% echo $a[2]
b c 
```

您需要在 for 循环中使用相同的修饰符：

```
foreach exCmd ($expansionCmdList:q) 
```

最后，``exCmd``尝试运行一个字面上名为“exCmd”的命令，然后获取其输出并将*其*作为命令运行。您可能想要做的只是执行一个等于变量值的命令。您可能会在这里遇到更多空白问题，并且您无法通过将每个命令设为数组来解决它们，因为 csh 不支持数组数组。公平警告。但是如果命令没有任何引用需求，这将起作用：

```
 $exCmd 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-04T20:05:58.863

Mark 的解决方案对于大多数应用程序来说显然是优越的，但还有另一种选择。不是`foreach`直接使用，而是获取数组的大小并遍历序列：

```
set BUILD_MATRIX = ( "makefile.make:make --jobs --makefile=makefile.make" \
                     "Makefile:make --jobs --makefile=Makefile" \
                     "build.xml:ant" )

foreach i ( `seq ${#BUILD_MATRIX}` )
  echo $i
  echo $BUILD_MATRIX[$i]
end 
```

（复制自[Accessing array elements with space in TCSH](https://stackoverflow.com/q/27302603/1443496)）

# javascript - 使用远程网站进行身份验证，然后链接到安全页面

> ID：13149638
> 
> 赞同：0
> 
> 时间：2012-10-31T00:39:20.980
> 
> 标签：javascript, jquery, html

拥有多个承包商的客户需要登录我的系统，然后通过链接到我系统中的安全页面来打开新选项卡。身份验证是通过 ajax 完成的，因此调用验证 url 并发布您的用户名和密码将为您提供 cookie + 有效会话。

我被要求提供一个示例，说明如何自动登录，然后能够打开指向安全页面的链接。我没有太多时间想出这个。

```
<html>
<body>

<form id="login" action="http://domain.com/validate" method="post" target="iframe" style="display:none;">
  <input type="text" name="username" value="test">
  <input type="text" name="password" value="admin">
</form>

<iframe name="iframe" style="display:none;"></iframe>

<script type="text/javascript">
window.onload = function() {
  document.getElementById("login").submit();
};
</script>

<!-- Launch a new tab to view post -->
<a href="http://domain.com/post/id/1234" target="_blank">1234</a><br>
<a href="http://domain.com/post/id/2345" target="_blank">2345</a>

</body>
</html> 
```

当我们使用 googles chrome 框架处理 IE < 9 时，该代码在我感兴趣的所有浏览器中运行良好。

有没有更好的方法来处理表单提交过程？目前，来自表单提交操作的响应被发送到 iframe。我这样做是为了停止页面重新加载。这可以用javascript而不是iframe来处理吗？

# ruby-on-rails - 来自方法的系统调用（ruby on rails）

> ID：13149640
> 
> 赞同：0
> 
> 时间：2012-10-31T00:39:32.307
> 
> 标签：ruby-on-rails, methods, system, call

我需要从 Ruby of Rails 的方法进行系统调用，但我希望它保持在同一页面上。现在由于某种原因它不执行，但显示：

```
Routing Error

No route matches [POST] "/devices/22918"
Try running rake routes for more information on available routes. 
```

这是按钮：

```
<%= link_to image_tag("/images/glossy_green_button.png"), device , :method => :turnon, :confirm => "Are you sure?" %> 
```

这是方法：

```
def turnon
@device = Device.find(params[:id])
result = `/perl/toggle.pl @device.infodot on`
end 
```

请让我知道我做错了什么，

谢谢你

D

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T00:57:32.210

你根本没有`method`正确使用。您正在使用它来定位`action`您要执行的控制器（请注意，为了清楚起见，我明确表示操作而不是方法）。控制器中的可用操作由您的文件定义。您`routes.rb`最终应该阅读或重新[阅读](http://guides.rubyonrails.org/routing.html)

在您的情况下，假设您有一个资源`device`（我想这就是您所拥有的），您将首先在`routes.rb`文件中创建一个新操作

```
resources :devices do
  put :turnon, on: :member
end 
```

[您可以在此处](http://guides.rubyonrails.org/routing.html#adding-member-routes)阅读有关此语法的文档，但基本上我`turnon`通过`HTTP PUT method`每个设备上的 提供该操作，这意味着它可以通过 URL`/devices/1/turnon`或通过`url_helper`: `turnon_device_path`(或`turnon_device_url`)

我假设您的开启操作将修改现有事物，而不是创建新事物，这就是我使用`PUT`动词的原因

然后链接将类似于：

```
<%= link_to image_tag("/images/glossy_green_button.png"), turnon_device_path(device) , :method => :put, :confirm => "Are you sure?" %> 
```

看到方法就是我新建的路由对应的HTTP方法。

我还假设您将该`turnon`方法放在`DevicesController`.

最后，当您想在 ajax 中执行此操作时，您可以查看`remote: true` [选项](http://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-link_to)

# django - 如何呈现 POST 并使其显示在另一个页面上

> ID：13149642
> 
> 赞同：0
> 
> 时间：2012-10-31T00:39:44.373
> 
> 标签：django, django-forms, django-views, render

我正在尝试创建一个类似于 craigslist 的市场网站。我根据 Django 教程“使用表单”创建了一个表单，但我不知道如何呈现从 POST 表单中获得的信息。我想让我从 POST 获得的信息（主题、价格...等）显示在这样的另一个页面上。[http://bakersfield.craigslist.org/atq/3375938126.html](http://bakersfield.craigslist.org/atq/3375938126.html)并且，我希望这个产品（例如 1960 年法国椅）的“主题”（请查看 form.py）显示在这样的另一个页面上。[http://bakersfield.craigslist.org/ata/](http://bakersfield.craigslist.org/ata/) }

我可以得到一些建议来处理提交的信息吗？这是目前的代码。我将感谢您的所有回答和帮助。

<-！这是我的代码-->

◆forms.py

```
from django import forms

class SellForm(forms.Form):
    subject = forms.CharField(max_length=100)
    price = forms.CharField(max_length=100)
    condition = forms.CharField(max_length=100)
    email = forms.EmailField()
    body = forms.TextField() 
```

◆views.py

```
from django.shortcuts import render, render_to_response
from django.http import HttpResponseRedirect
from site1.forms import SellForm

def sell(request):

    if request.method =="POST":
        form =SellForm(request.POST)
        if form.is_valid():
            subject = form.cleaned_data['subject']
            price = form.cleaned_data['price']
            condition = form.cleaned_data['condition']
            email = form.cleaned_data['email']
            body = form.cleaned_data['body']

            return HttpResponseRedirect('/books/')

    else:
        form=SellForm()

    render(request, 'sell.html',{'form':form,}) 
```

◆urls.py

```
from django.conf.urls import patterns, include, url
from django.contrib import admin
admin.autodiscover()

urlpatterns = patterns('',
    url(r'^sechand/$','site1.views.sell'),
    url(r'^admin/', include(admin.site.urls)),

) 
```

◆sell.html

```
<form action = "/sell/" method = "post">{% csrf_token%} 
{{ form.as_p }}
<input type = "submit" value="Submit" />
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T22:45:28.040

我假设您`Sell`的数据库中有一个模型/表（您存储用户的“销售”），否则它没有任何意义。这意味着您可以节省一些时间并使用`ModelForm`. 而不是简单的`Form`. 模型表单接受一个数据库表并为其生成一个 html 表单。

**表格.py**

```
from django.forms import ModelForm
from yourapp.models import Sell

class SellForm(ModelForm):
    class Meta:
        model = Sell 
```

在您的 views.py 中，您还需要一个视图来显示`Sells`您的用户发布的内容供其他人查看。您还需要一个 html 模板，该视图将使用每个`Sell`.

**sell_display.html**

```
{% extends 'some_base_template_of_your_site.html' %}
{% block content %}
<div id="sell">
  <h3> {{ sell.subject }}</h3>
  <p> {{ sell.condition }}</p>
  <p> {{ sell.body }}</p>
  <!-- the rest of the fields.. -->
</div>
{% endblock %} 
```

我们还需要一个新的 url 条目来显示特定的`Sell`

**网址.py**

```
from django.conf.urls import patterns, include, url
from django.contrib import admin
admin.autodiscover()

urlpatterns = patterns('',
    # Changed `sell` view to `sell_create`
    url(r'^sechand/$','site1.views.sell_create'),
    # We also add the detail displaying view of a Sell here
    url(r'^sechand/(\d+)/$','site1.views.sell_detail'),
    url(r'^admin/', include(admin.site.urls)),
) 
```

**视图.py**

```
from django.http import HttpResponseRedirect
from django.shortcuts import render_to_response, get_object_or_404
from yourapp.models import Sell
from yourapp.forms import SellForm

def sell_detail(request, pk):
    sell = get_object_or_404(Sell, pk=int(pk))
    return render_to_response('sell_display.html', {'sell':sell})

def sell_create(request):
    context = {}
    if request.method == 'POST':
        form = SellForm(request.POST)
        if form.is_valid():
            # The benefit of the ModelForm is that it knows how to create an instance of its underlying Model on your database.
            new_sell = form.save()   # ModelForm.save() return the newly created Sell.
            # We immediately redirect the user to the new Sell's display page
            return HttpResponseRedict('/sechand/%d/' % new_sell.pk)
    else:
        form = SellForm()   # On GET request, instantiate an empty form to fill in.
    context['form'] = form
    return render_to_response('sell.html', context) 
```

我认为这足以让你继续前进。有一些模式可以使这些东西更加模块化和更好，但我不想让你有太多的信息，因为你是一个 django 初学者。

# database - 允许 NULL 或创建未验证用户

> ID：13149643
> 
> 赞同：0
> 
> 时间：2012-10-31T00:39:46.023
> 
> 标签：database, database-design, null, foreign-keys

我正在开发允许用户从注册帐户或匿名发布的 Web 应用程序。我应该允许`NULL`在表中的`UserId`列中`Post`还是为未注册用户创建未经验证`User`并引用他们的 ID？

# 未经验证的用户

**用户**

```
| UserId | Name       |
+--------+------------+ 
| 1      | Unverified |
| 2      | Real User  | 
```

**邮政**

```
| PostId | UserId | Post           |
+--------+--------+----------------+
| 1      | 1      | Blah blah...   |
| 2      | 1      | Blah blah...   |
| 3      | 2      | Blah blah...   | 
```

#                                        - 对 -

# 允许`NULL`

**用户**

```
| UserId | Name       |
+--------+------------+ 
| 1      | Real User  | 
```

**邮政**

```
| PostId | UserId | Post           |
+--------+--------+----------------+
| 1      | NULL   | Blah blah...   |
| 2      | NULL   | Blah blah...   |
| 3      | 1      | Blah blah...   | 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T00:45:56.940

不依赖 NULL 来表示含义通常被认为是一种很好的做法。我可能会使用 0 或 1 来表示匿名用户。也更容易搜索；您不必一直在 IS NULL 或 = 之间切换，具体取决于您是在搜索匿名用户还是真实用户。

# c++ - C++：从 x509v3 证书中检索主题替代名称

> ID：13149650
> 
> 赞同：1
> 
> 时间：2012-10-31T00:40:16.927
> 
> 标签：c++, openssl, x509

我正在尝试解析 x509v3 证书。我拼凑了如何获取我需要的所有部分，除了主题替代名称中的 URI 字段。我有以下代码。当我在用于创建测试证书的配置文件中更改主题 alt 名称字段时，我看到计数、SA 和类型输出的相应更改，因此它似乎正在读取 SA URI 的正确区域。但是，我的 SA 输出始终显示为“1”，因此它似乎不是正确的结构成员，因为我的 URI 字段中有一个名称。

从证书文本输出（通过 openssl 命令）：

```
X509v3 Subject Alternative Name: 
URI:ThisIsTheUri, email:foo@bar.com 
```

编码：

```
GENERAL_NAMES* subjectAltNames =
               (GENERAL_NAMES*)X509_get_ext_d2i(&certificate, NID_subject_alt_name, NULL, NULL);

boost::int32_t altNameCount = sk_GENERAL_NAME_num(subjectAltNames);
std::cout << "Alt Name Count: " << altNameCount << "." << std::endl;
for (boost::int32_t i = 0; i < altNameCount; ++i)
{
  GENERAL_NAME* generalName = sk_GENERAL_NAME_value(subjectAltNames, i);
  if (generalName->type == GEN_URI)
  {
    subjectAltName = std::string(reinterpret_cast<char*>(generalName->d.ia5->data));
    // subjectAltName should be "ThisIsTheUri", but is "1".
    std::cout << "SA: '" << subjectAltName << "'." << std::endl;
  }
  else
  {
    std::cout << "Type: '" << generalName->type << "'." << std::endl;
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T20:29:57.630

诀窍是使用 ASN1_STRING_data() 和 ASN1_STRING_length() 来提取 ia5 字符串：

```
std::string(reinterpret_cast<char*>(ASN1_STRING_data(generalName->d.uniformResourceIdentifier)),
            ASN1_STRING_length(generalName->d.uniformResourceIdentifier)); 
```

# objective-c - 如何检查是否有载波信号？

> ID：13149652
> 
> 赞同：0
> 
> 时间：2012-10-31T00:40:20.767
> 
> 标签：objective-c, ios, xcode

我打算开发一个 iphone 应用程序，我需要知道是否可以检查 iphone 是否有任何运营商信号，或者它是否为“无服务”。

我已经与一些开发人员进行了交谈，有些人一直告诉我这是可能的，而另一些人则说这是不可能的......

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T01:02:38.527

您可以查看 MKNetworkKit 处理域可达性的方式。没有深入研究，但我认为它可以区分 wifi、蜂窝网络和无服务之间的区别。那应该给你你需要的一切。

[https://github.com/MugunthKumar/MKNetworkKit](https://github.com/MugunthKumar/MKNetworkKit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-10T01:18:14.267

您可以使用：

```
int wl = CTGetSignalStrength(); 
```

# list - 方案，如何将列表中的负数平方，使列表的其余部分保持不变

> ID：13149654
> 
> 赞同：1
> 
> 时间：2012-10-31T00:40:28.577
> 
> 标签：list, scheme, mit-scheme, accumulate

我一直在打一个电话来积累，内容如下：

```
(define (accumulate op initial sequence)
  (if (null? sequence)
      initial
      (op (car sequence)
          (accumulate op initial (cdr sequence))))) 
```

但是，当我尝试通过过滤器选择某些东西来解决问题时，答案不起作用。我到目前为止是这样的：

```
(define (f2b items)
   (accumulate (lambda (x y)
     (cons (append 
        (map square (filter negative? (filter number? x))) x) y)) () items)
  ) 
```

我给出的输入是：

```
(f2a '(("sdas" 89) (-53 "sad"))) 
```

我得到的输出是：

```
 ((sdas 89) (2809 -53 sad)) 
```

我似乎无法让负数消失。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T16:22:56.877

使用过滤器和映射会容易得多。过滤器是预定义的，但看起来像这样。

```
 (define (filter1 predicate sequence)
          (cond 
               ((null? sequence) null)
                ((predicate (car sequence))
                 (cons (car sequence)
                       (filter predicate (cdr sequence))))
                (else (filter predicate (cdr sequence))))) 
```

map 也是预定义的，它只是在列表上运行一个函数。

这应该很容易编写，但是如果您需要帮助，您应该为过滤器中的谓词编写一个 lamdba。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T07:04:04.850

实际上，您描述的功能通常不是累加器的工作。相反，对列表中的负数求平方似乎是地图之类的完美工作。

首先，让我们做：

```
(define (make-positive x)
    (if (and (number? x) (negative? x))
        (square x)
        x)) 
```

现在假设我们要对一个名为 的列表进行操作`lst`。如果它只是一个平面列表，比如`'(1 "2" -5 -4 6)`，那么我们可以

```
(map make-positive lst) 
```

由于我们需要对嵌套两层深的列表进行操作，我们可以这样做：

```
(map (lambda (x)
        (map make-positive x))
     lst) 
```

如果我们想对嵌套任意深度的列表进行操作，我们可以这样做：

```
(define (nested-map fn elm)
   (if (list? elm)
       (map (lambda (x) (nested-map fn x)) elm)
       (fn elm)))

(nested-map make-positive lst) 
```

PS - 我们可以`map`这样定义：

```
(define (map fn lst)
   (if (empty? lst)
       '()
       (cons (fn (car lst))
             (map fn (cdr lst))))) 
```

# knockout.js - KnockOutJS，数据绑定删除了我的对话框中的内容

> ID：13149655
> 
> 赞同：0
> 
> 时间：2012-10-31T00:40:30.700
> 
> 标签：knockout.js, knockout-2.0

我在我的一个页面上使用淘汰赛。我有一个编辑链接列表，当您单击它们时，将显示一个 jqueryUi 对话框。由于某些原因，该内容已被删除。

```
<div id="tagDialog" data-bind="with: selectedTag">
    Tag Name:

    <input type="text" data-bind="value: Name"/>

</div> 
```

如果我从我的代码中删除 data-bind="with: selectedTag" ，对话框中的内容将显示出来。但我需要这个数据绑定。

我在 jsFiddle 上上传了我的代码，你可以在那里进行测试。点击“编辑”你会看到。

[http://jsfiddle.net/GBLNR/](http://jsfiddle.net/GBLNR/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T01:21:37.483

看起来你有一个小错字。这：`data-bind="click: $root.selecTag"`应该是：`data-bind="click: $root.selectTag"`

# wpf - WPF - 如何以一种奇怪的方式列出 DataGrid 或 ListView 中的对象？

> ID：13149656
> 
> 赞同：0
> 
> 时间：2012-10-31T00:40:36.473
> 
> 标签：wpf, mvvm, datagrid

我有一个可观察的集合，其中包含一些对象。这些对象中有 4 个字符串。我希望能够在数据网格中显示这些数据，但不像你想的那样。如果我让它自动生成列，那么我会得到每个字段的列。我需要的是一组列，以便将我的项目作为自定义模板添加到每个单元格中。它应该从左上角开始，并继续向右，并在每一行的末尾重新开始。

例如：假设我有 10 个项目和 3 列。我应该自动有 3 行，每行 3 列，最后一行有 1 个项目。这些项目将包含 4 个正确显示数据的文本块。

我无法弄清楚如何使数据网格以这种方式运行。我开始认为另一种控件可能会更好，但我不确定。如果有人可以帮助处理数据网格，或者用另一个控件为我指明正确的方向，我将不胜感激。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T01:54:10.277

听起来您正在寻找 WrapPanel。尽管您必须单独提供列表中所需的项目，而不是对象的一部分。您可以绑定到迭代对象列表的 IEnumerable，然后逐个返回每个字符串。

```
public IEnumerable<String> SomeList
{
    get
    {
        foreach (var item in SomeOtherList)
        {
            yield return item.String1;
            yield return item.String2;
            yield return item.String3;
            yield return item.String4;
        }
    }
} 
```

# android - 更改时触发宏，根据日期移动信息

> ID：13149657
> 
> 赞同：1
> 
> 时间：2012-10-31T00:40:37.520
> 
> 标签：android

每个月都有一个带有工作表的大工作簿。主页是我让经理从另一个报告中粘贴信息的地方。我要做的是编写一个 VBA 宏，每次将信息粘贴到输入工作表的特定单元格（更改时触发）时都会自动触发。此外，我希望宏然后每个月将带有 10 月日期的帐户剪切/粘贴到 10 月表等中。请帮忙

# sql - 将数据从 SQL Server 导入 Neo4J

> ID：13149658
> 
> 赞同：1
> 
> 时间：2012-10-31T00:40:38.147
> 
> 标签：sql, neo4j

首先让我解释一下。我的平台主要是 Windows，我的数据主要位于关系数据库 (SQL Server 2008) 中。我主要使用 C#，但偶尔使用 PERL 和 JavaScript。我希望了解图形数据库可以为我的数据做什么，但似乎有源源不断的工具和实用程序不可用，我需要安装和学习这些工具和实用程序。我忙于学习工具，以至于我失去了对我真正想要的东西的关注，那就是使用图形数据库。Neo4j 似乎相对较小，应该可以访问以评估其功能。我想通过最初通过外键建立的关系将我的数据从现有 SQL 数据库导入 Neo4J。这个想法似乎相对简单，但似乎我需要学习 Java、PHP 等。不仅可以访问 Neo4J，还可以访问现有的数据库。我想知道是否有人有一些可以相当简单地实现这一目标的建议、工具和文档。我做PHP的路线吗？爪哇？我需要哪些额外的库/包？什么工具最有用？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T18:40:52.977

我想你想要 Neo4J 批量导入器，[可以在 github 上找到](https://github.com/jexp/batch-import)。使用它，我们能够导出 2000 万个节点和关系以将它们导入 Neo4j。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-12T03:50:57.643

我想你必须自己写。[Neo4jD](http://sonyarouje.com/2012/02/10/neo4jd-net-client-for-neo4j-graph-database-part-2/)看起来很有趣。

# windows-8 - Windows 8 上的 Windows Mobile/嵌入式设备模拟器

> ID：13149659
> 
> 赞同：4
> 
> 时间：2012-10-31T00:40:38.707
> 
> 标签：windows-8, windows-mobile-emulator

我们设计和开发在 Windows Mobile 和 Windows Embedded 上运行的应用程序，因为这是目前大多数工业条码扫描器上的操作系统。

给，我们经常使用 Windows Mobile Device Emulator 来模拟我们的软件并给客户演示。随着 Windows 8 的发布，Windows Mobile 设备中心似乎不再有效。需要此组件来“固定”设备以获取网络连接。

有没有办法让 Windows Mobile/Embedded 模拟器在 Windows 8 上运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T06:15:13.797

您需要卸载`Windows Mobile Device Center`并安装最新版本（2012 年 12 月）。

访问`Microsoft`网络并下载`Windows Mobile Device Center for Vista`（32 位或 64 位，具体取决于您的硬件）。没有选项`Windows 8`，但 的版本`Vista`在`Windows 8`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T08:45:23.520

您始终可以在移动/嵌入式项目上使用 Windows CE 版本

# cordova - Phonegap 2.1 cordova.exec 更新

> ID：13149660
> 
> 赞同：0
> 
> 时间：2012-10-31T00:40:47.003
> 
> 标签：cordova

我在其中一个插件中有这个 JS。我正在尝试将其移植到 Phonegap 2.1。问题是接收者代码无法解析调用者函数名称，它说`<null>`。

```
 PhoneGap.exec("localizable.get", name,GetFunctionName(success)); 
```

我试过了

```
 cordova.exec("localizable.get", name, GetFunctionName(success));
    cordova.exec("localizable.get", name, success);
    cordova.exec("localizable.get", name, success.name); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T23:04:59.793

exec 参数应该是：

```
cordova.exec(successfunction, errorfunction, "service", "action", [arguments]); 
```

# jquery - 如何使用 jquery 动态设置 div 的高度？

> ID：13149662
> 
> 赞同：0
> 
> 时间：2012-10-31T00:41:02.873
> 
> 标签：jquery, height

这是我的代码，但它不起作用（div 总是浮动到页面的顶部。我希望它位于页面的中心）。

HTML：

```
<div id="overlay">Stuff</div> 
```

查询：

```
$(document).ready(function(){
    var height = $('#overlay').height();
    var marginTop = (height)/2;
    document.getElementById("overlay").style.marginTop="-"+marginTop+"px";
    document.getElementById("overlay").style.top="50%";
}); 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T00:43:56.453

```
$(document).ready(function(){
    resize();
    $(window).resize(resize);
});

function resize()
{
    var height = $('#overlay').height();
    $('#overlay').css('margin-top', (($(window).height() - height) / 2) + 'px');
} 
```

请记住，您希望窗口高度减去覆盖高度。然后除以二，你就有了你想要的利润。

# python - 在 Google App Engine 中存储评论的有效方法？

> ID：13149663
> 
> 赞同：2
> 
> 时间：2012-10-31T00:41:08.593
> 
> 标签：python, google-app-engine

使用 Google App Engine，实体的大小限制为 1 MB。假设我有一个博客系统，并且期望每篇文章有数千条评论，有些段落很长。通常，没有限制，您只需将所有评论存储在与博客文章相同的实体中。但是在这里，会担心达到 1 MB 的限制。

另一种可能的方法，虽然效率低得多，但将每个评论存储为一个单独的实体，但这需要多次阅读才能获得所有评论，而不是仅仅阅读一次才能获得博客文章及其评论（如果它们在同一实体）。

处理此类案件的有效方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T04:06:26.060

如果评论是线程化的，将它们存储为单独的实体可能是有意义的。

如果评论可以成为投票的目标，那么将它们存储为单独的实体是有意义的。

如果可以编辑评论，则将它们存储为单独的实体可以减少争用，并避免必须对所有评论进行悲观锁定，或者避免最后一次编辑覆盖先前编辑的风险情况。

如果您可以翻阅评论，出于多种原因将它们存储为单独的实体是有意义的，索引就是其中之一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T03:16:19.813

我有六个建议：

1）将评论存储在单独的实体中。使用内置缓存和游标的 NDB API。因此，您可以限制每次查看的查询成本。您可以使用仅键查询、祖先查询和投影查询进行快速访问。请参阅：[https ://developers.google.com/appengine/docs/billing](https://developers.google.com/appengine/docs/billing)

2) 独立的实体使并发和索引更容易。

3) 看看 Search API 和 Prospective Search API。如果您有很多评论，搜索将很重要。由于搜索，您应该为您的评论使用单独的实体，这使得访问搜索结果变得非常容易。

4) 当您使用诸如 mapreduce 之类的工具来分析评论时，处理单独的实体也是首选。

5) 您可以随时根据您对博客引擎和 appstats 的体验进行优化。数据存储是真正的瓶颈还是使用的实例数量。我不知道你的用例，但你也可以使用客户端（浏览器）来优化和缓存结果。

6）处理评论的第三方解决方案呢？请参阅 Nick Johnson 的这篇文章，使用 Disqus javascript 在他的应用引擎博客引擎中进行评论和搜索：http: [//blog.notdot.net/2009/10/Blogging-on-App-Engine-part-6-Comments-and-搜索](http://blog.notdot.net/2009/10/Blogging-on-App-Engine-part-6-Comments-and-Search)

# jquery - 如何过滤任何选择字段的表单提交，其中选择了带有空白或没有值的选项？

> ID：13149664
> 
> 赞同：2
> 
> 时间：2012-10-31T00:41:19.420
> 
> 标签：jquery, forms

我有表单标记，如......

```
<form id='cart' action="/cart/add" method="post">
    <div id="product-variants">
        <div class="selector-wrapper clearfix">
        <select class="product-select" name='id[]'>
            <option value="">&nbsp;---</option>
            <option value="a">Option A</option>
            <option value="b">Option B</option>
            <option value="c">Option C</option>
        </select>
        <select class="product-select" name='id[]'>
            <option value="">&nbsp;---</option>
            <option value="a">Option A</option>
            <option value="b">Option B</option>
            <option value="c">Option C</option>
        </select>
        </div>
    </div>
</form> 
```

我正在尝试编写一个例程来过滤掉（禁用）任何值为空白的选择输入，这样它就不会被发送到我无法控制的后端。这是我根据对我在这里找到的其他问题的回答得出的结论。

```
jQuery(function(){
  jQuery("#cart").submit(function(){
    $(this).children(':input[value=""]').attr("disabled", "disabled");
    $(this).children('select option[value=""]').parent().attr("disabled","disabled");
    return true; // ensure form still submits
  });
}); 
```

提交功能的第二行虽然不起作用。我已经尝试了几种组合，但无法弄清楚如何实现这一点。谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T00:44:35.437

你可以试试这个

```
$(this).find('select').filter(function() {
      return this.value === ''
 }).prop("disabled", true); 
```

或者

```
$(this).find('select').each(function() {
     if (this.value == '') {
        $(this).prop("disabled", true);
     }
}); 
```

**完整代码**

```
jQuery(function() {
    jQuery("#cart").submit(function(e) {
       // e.preventDefault();
        $(this).find('select').each(function() {
            if (this.value == '') {
                $(this).prop("disabled", true);
            }
        });
    });

    jQuery("#cart").submit();
});​ 
```

**[检查小提琴](http://jsfiddle.net/sushanth009/5LBK4/)**

[另一个](http://jsfiddle.net/sushanth009/5LBK4/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T00:54:35.783

```
jQuery("#cart").submit(function(e) {
  jQuery(this).find(':input').prop('disabled',function(){/* ':input will find select and input tags*/
        return $(this).val() =='';
   });
}); 
```

在提交处理程序中返回 true 是多余的。`select`初始代码的另一个问题是`input`元素不是表单的子元素。`children`是直系后代

# asp.net-mvc - 如何在没有 EF 的情况下使用 MVC 进行 ServiceStack 身份验证

> ID：13149666
> 
> 赞同：2
> 
> 时间：2012-10-31T00:41:29.500
> 
> 标签：asp.net-mvc, authentication, oauth, openid, servicestack

我正在研究这个例子[`AccountController`](https://github.com/ServiceStack/ServiceStack.UseCases/blob/master/CustomAuthenticationMvc/Controllers/AccountController.cs)并尝试实现我自己的。我正在尝试进行 OAuth（通过 GMail），所以我一直在使用它`ExternalLoginCallback(string)`。该示例确实如此`OAuthWebSecurity.Login`。当我也尝试这样做时，我得到：

```
You must call the "WebSecurity.InitializeDatabaseConnection" method before you call any other method of the "WebSecurity" class. 
```

深入研究后，似乎`InitializeDatabaseConnection`使用 Entity Framework 在 SQL Server 上配置数据库。我没有使用 SQL Server (Mongo DB)，所以我不能使用这种方法。**如何在没有 SQL Server 的情况下使用带有 MVC 的 ServiceStack 身份验证？**

# sharepoint-2010 - 发送数据表单模态窗口 Sharepoint

> ID：13149670
> 
> 赞同：0
> 
> 时间：2012-10-31T00:41:49.770
> 
> 标签：sharepoint-2010

我正在通过 Sharepoint 2010 开发应用程序，我正在使用 ECMAScript 客户端对象模型，因此从一个使用 SP.UI.ModalDialog.showModalDialog(options) 的应用程序页面打开另一个页面。从第二页开始，我想将用户插入的信息发送回父页面。我怎样才能做到这一点？。

非常感谢您的任何评论！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T20:08:40.113

您可以在 showModalDialog 方法的选项中传递回调函数。这个回调函数有两个参数，一个 dialogResult 和一个可以包含任何数据的 object 类型的 returnValue。 [http://msdn.microsoft.com/en-us/library/ff410058.aspx](http://msdn.microsoft.com/en-us/library/ff410058.aspx)

当您使用方法 commonModalDialogClose 关闭模态对话框时，您可以传递结果和对象参数并在父窗口的回调函数中使用它们。 [http://msdn.microsoft.com/en-us/library/ff409682.aspx](http://msdn.microsoft.com/en-us/library/ff409682.aspx)

# c# - C# TreeView OnDrawNode 工作缓慢并创建工件

> ID：13149674
> 
> 赞同：1
> 
> 时间：2012-10-31T00:42:50.850
> 
> 标签：c#, .net, windows, winforms, treeview

我正在开发自定义 C# TreeView，我想做一些自定义绘制来突出显示节点名称中的关键字。

我做了：

```
DrawMode = TreeViewDrawMode.OwnerDrawText; 
```

在自定义 TreeView 的构造函数中并覆盖 OnDrawNode：

```
protected override void OnDrawNode(DrawTreeNodeEventArgs e)
    {
        if (!e.Node.IsVisible) { return; }
        if (e.Node.Bounds.IsEmpty) { return; }

        e.DrawDefault = false;

        ...draw calls... 
```

但是在我这样编码之后它的工作很奇怪，感知到的行为包括：

1.  OnDrawNode 正在调用未展开且不可见的子节点
2.  当 TreeView 的内容更新时，用户会同时看到旧内容和新内容相互重叠。旧内容直到大约半秒或更长时间才会消失。
3.  渲染速度比原始绘图调用慢得多。

我所做的另一个修改是我在此处找到的用于抑制 TreeView 更新时发生闪烁的代码片段：http: [//dev.nomad-net.info/articles/double-buffered-tree-and-list-views](http://dev.nomad-net.info/articles/double-buffered-tree-and-list-views) 但似乎与问题没有直接关系，因为删除后我仍然可以看到文本重叠。

我想知道是否有人对这个问题有任何想法？

任何想法将不胜感激。谢谢你。

编辑：

OnDrawNode 的内容如下：

```
string pattern = keyword;
if (!string.IsNullOrWhiteSpace(pattern))
{
    Regex regularExpressionnew = Regex(pattern);
    Match match = regularExpression.Match(e.Node.Text);
    while (match.Success)
    {
        CaptureCollection captureCollection = match.Groups[0].Captures;
        foreach (Capture capture in captureCollection)
        {
            int highlightStartIndex = capture.Index;
            int highlightEndIndex = capture.Index + pattern.Length;
            e.Graphics.FillRectangle(nodeHightLightColor, GetTextBoundsBetweenIndex(e.Graphics, e.Node.Text, highlightStartIndex, highlightEndIndex, e.Bounds));
        }
        match = match.NextMatch();
    }

Brush drawBrush = new SolidBrush(Color.Black);
e.Graphics.DrawString(e.Node.Text, Font, drawBrush, e.Bounds); 
```

GetTextBoundsBetweenIndex 本质上是计算覆盖 highlightStartIndex 和 highlightEndIndex 之间的字符的正方形区域。

但是如果正则表达式被注释掉并且只剩下文本渲染，就会发生滞后和重叠。

# c++ - 为什么 setw 和 width 不适用于 ostringstream？

> ID：13149678
> 
> 赞同：0
> 
> 时间：2012-10-31T00:43:08.070
> 
> 标签：c++, string, stl, iostream

我有以下代码：

```
template<typename _Tp>
std::string string_from_number(_Tp number, int precision = 5)
{
  std::ostringstream oss;
  oss.width(precision+1);
  oss<<number;
  return oss.str();
} 
```

但是，字符串长度不是预期的 5，而是保持默认值。
替换`oss.width`为`oss<<std::setw`也不起作用。我究竟做错了什么？

编辑：

如果数字是双精度型，比如 0.123456789，问题就很明显了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T01:23:15.533

为了控制浮点数中显示的位数，您想要的功能是`precision`，而不是`width`。如果您想确保获得以固定表示法（而不是科学）显示的数字，还请查看与成员函数`fixed`一起使用的格式标志。`setf`

# wpf - wpf 字符串格式整数 1234 到 12:34 仅在 XAML

> ID：13149679
> 
> 赞同：3
> 
> 时间：2012-10-31T00:43:19.600
> 
> 标签：wpf, string-formatting

我有 1234 值，我必须将其显示为 0012:34，当用户单击该文本框以编辑该值时，它应该只显示 1234，当标签退出时它应该返回到 0012:34。如果我使用转换器，它在获得焦点时不会改变格式。我在数据模板中有这个文本框，也无法在后面的代码中访问它，这意味着我无法在 Got_Focus 事件中进行格式化。有人可以帮忙格式化吗？我可以使用 int 或 string 作为数据类型。

谢谢，罗西

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T03:31:15.793

您可以使用扩展[WPF 工具包中的](http://nuget.org/packages/Extended.Wpf.Toolkit)[WatermarkTextBox](http://wpftoolkit.codeplex.com/wikipage?title=WatermarkTextBox&referringTitle=Home)：

```
<xctk:WatermarkTextBox Text="{Binding Value}" Watermark="{Binding Value, Mode=OneWay, Converter={StaticResource YourValueConverter}}" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T07:20:08.250

作为水印文本框的替代方案，您可以使用行为。

`System.Windows.Interactivity`需要参考。

例子：

xml:

```
<Window x:Class="WatermarkTextBox.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity"
        xmlns:WatermarkTextBox="clr-namespace:WatermarkTextBox" Title="MainWindow" Height="350" Width="525">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition />
            <RowDefinition />
        </Grid.RowDefinitions>
        <TextBox Grid.Row="0" Width="300" Height="30">
            <i:Interaction.Behaviors>
                <WatermarkTextBox:WatermarkBehavior />
            </i:Interaction.Behaviors>
        </TextBox>
        <TextBox Grid.Row="1" Width="300" Height="30" />
    </Grid>
</Window> 
```

行为：

```
using System.Windows;
using System.Windows.Controls;
using System.Windows.Interactivity;

namespace WatermarkTextBox
{
    public class WatermarkBehavior : Behavior<TextBox>
    {
        private string _value = string.Empty;

        protected override void OnAttached()
        {
            AssociatedObject.GotFocus += OnGotFocus;
            AssociatedObject.LostFocus += OnLostFocus;
        }

        protected override void OnDetaching()
        {
            AssociatedObject.GotFocus -= OnGotFocus;
            AssociatedObject.LostFocus -= OnLostFocus;
        }

        private void OnGotFocus(object sender, RoutedEventArgs e)
        {
            AssociatedObject.Text = _value;
        }

        private void OnLostFocus(object sender, RoutedEventArgs e)
        {
            _value = AssociatedObject.Text;
            AssociatedObject.Text = string.Format("Watermark format for: {0}", _value);
        }
    }
} 
```

# sql - 从 IIS 连接到 SQL 数据库

> ID：13149683
> 
> 赞同：0
> 
> 时间：2012-10-31T00:43:47.320
> 
> 标签：sql, sql-server, iis, web-applications, iis-7

这是我的连接字符串，Web 服务（托管在 IIS 中，在 ApplicationPoolIdentity 下运行）用于连接到数据库

```
<add name="AdventureWorksEntities"connectionString="metadata=.\AdventureWorks.csdl|.\AdventureWorks.ssdl|.\AdventureWorks.msl;
provider=System.Data.SqlClient;provider connection string='Data Source=TestMachine;Initial Catalog=AdventureWorks;
Integrated Security=True;Connection Timeout=60;multipleactiveresultsets=true'" providerName="System.Data.EntityClient" /> 
```

当我尝试访问该站点时，出现异常：用户 MyDomain\TestMachine$ 登录失败。

为什么 IIS 尝试使用 TestMachine 连接而不是我的用户帐户（例如 MyDomain\TestUser）？我相信的原因可能是因为它托管在使用机器凭据的 ApplicationPoolIdentity 下。

如何指定它以使用发出请求的用户的上下文，而不必在自定义身份下运行应用程序（即我希望它继续在 ApplicationPoolIdentity 下运行）？

如果我`<identity impersonate = true/>'`在 web.config 文件中进行设置，那么我可以从 IIS 服务器计算机本地访问该站点，并且可以访问数据库，但是远程访问该站点会失败。我的 Web 服务正在使用 Windows 身份验证。对此有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T01:07:55.147

您需要在 IIS 中启用 Windows 身份验证和 ASP.NET 模拟

然后在你的 web.config

```
 <system.web>
    <authentication mode="Windows" />
    <identity impersonate="true" />
</system.web> 
```

# c - 在 eglibc-2.13 中 sin() 是如何实现的？

> ID：13149697
> 
> 赞同：3
> 
> 时间：2012-10-31T00:45:16.267
> 
> 标签：c, linux, math, glibc, libc

我需要追踪`double sin(double x)`在 eglibc-2.13 中究竟是如何实现的。我下载了源代码，唯一有意义的部分是 __sin 函数，它是特定于平台的。它是我在 /usr/lib/i386-linux-gnu/libm.a 中的核心吗？

如何追踪从 sin() 到 __sin() 的宏定义？我**真正**需要的是确切的代码（文件名和行就足够了）以及构建过程推断要使用哪个实现的方式。架构的 i386。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T01:19:35.367

(e)glibc 构建过程是黑魔法。你不想尝试去理解它。然而，glibc 坚持一个文件一个公共函数的编码风格，所以一般来说，如果你有源代码树并且你想找到某个函数的实现，最简单的事情是

```
$ find * -name '*function*' -print 
```

从顶层`function`开始，当然是用函数的名称替换。

具体来说`sin`：数学函数的通用实现在`math`目录中：但是，似乎*没有*通用定义`sin`。所以下一个要看的地方是`sysdeps`。所有不通用的东西都在 中`sysdeps`，特别`sysdeps/ieee754`是所有数学函数都依赖于 IEEE 754 浮点规范，但没有其他系统依赖关系的地方。此目录按类型组织：`sysdeps/ieee754/dbl-64`包含 IEEE 的所有数学函数`double`。在这里你会找到[`sysdeps/ieee754/dbl-64/s_sin.c`](http://sourceware.org/git/?p=glibc.git;a=blob;f=sysdeps/ieee754/dbl-64/s_sin.c;hb=HEAD)，这是你正在寻找的代码。（所有这些文件上的`e_`, `s_`, `k_`, 等前缀曾经意味着某些东西，但 AFAIK 不再有意义。）

如果有`sin`针对特定处理器的汇编语言实现，它将位于名为`sin.S`（或可能`s_sin.S`）的文件中`sysdeps`。不过，似乎没有。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T22:31:55.920

不是答案，只是一点背景：

当您在 C 代码中使用`sin()`或`cos()`时，几乎可以肯定是*编译器*提供了实现，而不是您的 C 库。例如，查看[GCC 提供的内置函数列表](http://gcc.gnu.org/onlinedocs/gcc/Other-Builtins.html#Other-Builtins)。链接页面还描述了使用内置函数而不是 C 库提供的版本的情况。

# vbscript - 逐行读取txt文件

> ID：13149698
> 
> 赞同：5
> 
> 时间：2012-10-31T00:45:20.130
> 
> 标签：vbscript

我无法让 vbscript 逐行读取文本。这是代码应该执行的步骤：

1.  阅读文件夹.txt
2.  打开 folder.txt 中列出的文件
3.  回显 test.txt 中的内容
4.  阅读文件夹列表.txt
5.  打开 folder-list.txt 中列出的文件
6.  打开 dirlist.txt 并逐行回显

folder.txt 包含的示例：

```
C:\Documents and Settings\Administrator\Desktop\ArtistCG\[ Go! Go! Heaven!!]_____________25 -______ ___- [525067]\test.txt
C:\Documents and Settings\Administrator\Desktop\ArtistCG\[12CUT] _____ (Gakkou no Kaidan) [518382]\test.txt
C:\Documents and Settings\Administrator\Desktop\ArtistCG\[2____] _____!__CD__________ [521206]\test.txt
C:\Documents and Settings\Administrator\Desktop\ArtistCG\[Ability] _____________________ [514182]\test.txt 
```

folder-list.txt 包含的示例：

```
C:\Documents and Settings\Administrator\Desktop\ArtistCG\[ Go! Go! Heaven!!]_____________25 -______ ___- [525067]\dirlist.txt
C:\Documents and Settings\Administrator\Desktop\ArtistCG\[12CUT] _____ (Gakkou no Kaidan) [518382]\dirlist.txt
C:\Documents and Settings\Administrator\Desktop\ArtistCG\[2____] _____!__CD__________ [521206]\dirlist.txt
C:\Documents and Settings\Administrator\Desktop\ArtistCG\[Ability] _____________________ [514182]\dirlist.txt 
```

每个 dirlist.txt 包含的示例

```
C:\Documents and Settings\Administrator\Desktop\ArtistCG\[ Go! Go! Heaven!!]_____________25 -______ ___- [525067]\00.jpg
C:\Documents and Settings\Administrator\Desktop\ArtistCG\[ Go! Go! Heaven!!]_____________25 -______ ___- [525067]\a_01.jpg
C:\Documents and Settings\Administrator\Desktop\ArtistCG\[ Go! Go! Heaven!!]_____________25 -______ ___- [525067]\a_02.jpg
C:\Documents and Settings\Administrator\Desktop\ArtistCG\[ Go! Go! Heaven!!]_____________25 -______ ___- [525067]\a_03.jpg 
```

这是vbscript代码

```
Option Explicit

Dim objFSO, strTextFile, strData, strLine, arrLines, aniTextFile, aniData, aniLines, meLine, objTextFile, fso, inputFileList, sFolderName, fname
Dim iim1, iret, iret2, iret3, i
CONST ForReading = 1

strTextFile = "C:\Documents and Settings\Administrator\Desktop\ArtistCG\folder.txt"
Set objFSO = CreateObject("Scripting.FileSystemObject")
strData = objFSO.OpenTextFile(strTextFile,ForReading).ReadAll
arrLines = Split(strData,vbCrLf)

For Each strLine in arrLines
  strData = objFSO.OpenTextFile(strLine,ForReading).ReadAll
WScript.Echo strData

aniTextFile = "C:\Documents and Settings\Administrator\Desktop\ArtistCG\folder-list.txt"

Set objFSO = CreateObject("Scripting.FileSystemObject")
aniData = objFSO.OpenTextFile(aniTextFile,ForReading).ReadAll
aniLines = Split(aniData,vbCrLf)

Set fso = CreateObject("Scripting.FileSystemObject")
Set listFile = fso.OpenTextFile(aniLines).ReadAll
do while not listFile.AtEndOfStream 
    fName =  listFile.ReadLine()
    WScript.Echo fName
    Loop
Next 
```

到目前为止，我只完成了步骤 1 到 4，但我无法让它读取 dirlist.txt。这里有什么解决方案吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-31T02:42:11.090

线

```
Set listFile = fso.OpenTextFile(aniLines).ReadAll 
```

不起作用有两个原因：

*   `Set`只能在将*对象*分配给变量时使用，但`ReadAll`返回一个*字符串*。
*   `OpenTextFile()`需要一个字符串，但`aniLines`它是一个字符串*数组*。

要处理数组的所有元素，您可以使用如下内容：

```
For Each line In aniLines
  ' read dirlist.txt file
Next 
```

问题是您要如何读取`dirlist.txt`文件。您可以对其他文件执行相同操作：读取文件的全部内容并将其拆分为一个数组：

```
listFile  = fso.OpenTextFile(line).ReadAll
listLines = Split(listFile, vbCrLf) 
```

然后使用像上面那样的另一个循环来处理数组的字段`listLines`。这种方法更适合小文件，因为代码更简单。

或者您可以使用该`ReadLine`方法（当您必须处理大文件时最好使用该方法，因为它可以避免内存耗尽）：

```
Set listFile = fso.OpenTextFile(line)  ' <-- remove .ReadAll from this line!
Do Until listFile.AtEndOfStream
  fName = listFile.ReadLine
  ' do stuff with fName
Loop 
```

我推荐使用`Do Until`而不是`Do While Not`，因为语义相同，但前者更接近自然语言，因此更易于阅读。

`FileSystemObject`此外，在脚本的开头实例化一个对象并在脚本的其余部分中使用该实例就足够了。一遍又一遍地实例化它是没有意义的。

# javascript - 如何在垂直滚动上使用 Stellar.js 从侧面移动/动画元素？

> ID：13149700
> 
> 赞同：3
> 
> 时间：2012-10-31T00:45:27.290
> 
> 标签：javascript, jquery, plugins, scroll, parallax

我正在使用[Stellar.js](http://markdalgleish.com/projects/stellar.js/) jQuery 插件来创建视差滚动效果，但我不确定 Stellar 是否支持我想要完成的任务。我有基本的视差滚动效果正常工作（主要基于[来自 TutsPlus 的本教程](http://webdesign.tutsplus.com/tutorials/complete-websites/create-a-parallax-scrolling-website-using-stellar-js/)）。

我想要完成的是，当用户向下滚动页面时，某些元素会从所有不同的角度移动/动画到视图中——与滚动位置相关联。例如，当用户向下滚动页面时，一个苹果从屏幕的右上角进入视图，当用户继续向下滚动页面时，苹果沿对角线路径向左下角移动。屏幕。如果用户向上滚动，苹果将以向后的方式继续沿着相同的路径。Stellar 可以做到这一点吗？我必须使用不同的插件吗？我可以使用其他插件 WITH Stellar 来实现这种效果吗？

对此的任何帮助将不胜感激。如果您需要更多信息，请告诉我。

谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-04T20:33:23.723

Stellar.js 支持创建[位置属性插件](https://github.com/markdalgleish/stellar.js#writing-a-position-property-plugin)，允许您编写自定义定位逻辑。

我编写了一个名为“apple”的示例插件，它的功能类似于您想要的：

```
$.stellar.positionProperty.apple = {
    setTop: function($el, newTop, originalTop) {
        $el.css({
            'top': newTop,
            'left': $el.hasClass('apple') ? originalTop - newTop : 0
        });
    },
    setLeft: function($el, newLeft, originalLeft) {
        $el.css('left', newLeft);
    }
}; 
```

您会注意到它包含一个三元组，仅当元素具有“apple”类时才应用“left”值：

```
'left': $el.hasClass('apple') ? originalTop - newTop : 0 
```

这是一个如何为每个元素应用不同定位逻辑的示例。

所以现在，你可以像这样使用插件：

```
$.stellar({
    horizontalScrolling: false,
    positionProperty: 'apple'
}); 
```

显然，您需要对其进行调整以适合您的目的，但这应该足以让您入门。

你可以[在 JSFiddle 上看到这个演示](http://jsfiddle.net/QGd9g/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-07T11:28:46.807

**Jaypee**，我用这段代码来做到这一点：

```
$.stellar.positionProperty.custom = {
  setTop: function($el, newTop, originalTop) {

    if( $el.data('stellar-moveleft') !== undefined ) {
      $el.css({ 'left': originalTop - newTop });
    } else if( $el.data('stellar-moveright') !== undefined ) {
      $el.css({ 'right': originalTop - newTop });
    }

    $el.css({ 'top': newTop });

  },

  setLeft: function($el, newLeft, originalLeft) {
    $el.css('left', newLeft);
  }

}; 
```

根据**markdalgleish**的原始答案，它需要 data-tag:`data-stellar-moveleft`或者`data-stellar-moveright`为了实现您想要的，其余的

# python - Python中布尔表达式的意外结果

> ID：13149702
> 
> 赞同：3
> 
> 时间：2012-10-31T00:45:40.090
> 
> 标签：python, python-2.x, operator-precedence

> **可能重复：**
> [为什么表达式 0 < 0 == 0 在 Python 中返回 False？](https://stackoverflow.com/questions/6074018/why-does-the-expression-0-0-0-return-false-in-python)

Python 2 REPL 的以下输出让我感到困惑：

```
>>> 15>10==True
False
>>> 15>1==True
True
>>> 15>2==True
False
>>> 15>False
True 
```

If`15>10==True`被评估为`(15>10)==True`表达式将简化为`print True==True`，这显然评估为`True`。If`15>10==True`被评估为`15>(10==True)`表达式简化为`15>False`which 也评估为`True`。这两种解释都与表达式 ( `False`) 的实际值相矛盾。

我可以理解`15>1==True`评估 to `True`since`1==True`是正确的，但对我来说没有任何解释是`15>10==True`有意义的。

**摘要：**在 Python 2 中，为什么`15>10==True`计算结果为`False`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T00:52:21.847

这是因为Python 中的[链式比较](http://docs.python.org/2/reference/expressions.html#not-in)。即，`15>10==True`实际上被评估为：

```
15 > 10 and 10 == True 
```

这是`False`。

另一方面，`15>1==True`与

```
15 > 1 and 1 == True 
```

评估为`True`。

* * *

引用文档：

> 与 C 不同，Python 中的所有比较操作都具有相同的优先级，低于任何算术、移位或按位操作。同样与 C 不同的是，像 a < b < c 这样的表达式具有数学中的常规解释：

```
comparison    ::=  or_expr ( comp_operator or_expr )*
comp_operator ::=  "<" | ">" | "==" | ">=" | "<=" | "<>" | "!="
                   | "is" ["not"] | ["not"] "in" 
```

> 比较产生布尔值：True 或 False。
> 
> 比较可以任意链接，例如，x < y <= z 等价于 x < y 和 y <= z，除了 y 只计算一次（但在这两种情况下，当找到 x < y 时根本不计算 z是假的）。
> 
> 形式上，如果 a, b, c, ..., y, z 是表达式并且 op1, op2, ..., opN 是比较运算符，则 a op1 b op2 c ... y opN z 等价于 a op1 b和 b op2 c 和 ... y opN z，除了每个表达式最多计算一次。
> 
> 请注意，a op1 b op2 c 并不意味着 a 和 c 之间的任何类型的比较，因此，例如，x < y > z 是完全合法的（尽管可能不漂亮）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T00:53:47.873

我相信您在不知不觉中遇到了 python[运算符](http://docs.python.org/2/reference/expressions.html#5.9)的“整洁”功能：

> 与 C 不同，像 a < b < c 这样的表达式具有数学中的常规解释：

```
In [12]: 15>10==True
Out[12]: False 
```

在这个表达式中，True 恰好被视为 1，即：

```
In [13]: 15>10==1
Out[13]: False 
```

但是然后在 > 运算符中将 == 替换为，我们会根据上面引用的规则看到新表达式如何为真：

```
In [14]: 15>10>1
Out[14]: True 
```

# python - 是否可以在 Twisted (Python) 中使用原始套接字

> ID：13149703
> 
> 赞同：2
> 
> 时间：2012-10-31T00:45:55.910
> 
> 标签：python, sockets, networking, twisted, raw-sockets

我正在编写一个 NAT 的实现，并且需要使用原始套接字。我已经习惯了 Twisted 架构，并且喜欢它处理并发连接的方式。

进入 Twisted 协议的数据经过处理、NAT 化、制表并发送出原始套接字。进入原始套接字的数据被操纵、查找、NAT 并定向到适当的协议实例。

有一个原始套接字就足够了吗？如果同时有大量连接进来怎么办。不扭曲处理，或者扭曲在无连接协议中几乎没有优势。如果有优势，任何人都可以将我引向原始套接字扭曲示例

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T08:02:18.767

Twisted 很好地支持无连接协议。例如，参见[`listenUDP`](http://twistedmatrix.com/documents/current/api/twisted.internet.interfaces.IReactorUDP.listenUDP.html)。

中有用于操作 IP 级协议数据的模块`twisted.pair`，但并非所有模块都有效；[特别是，tuntap 支持不起作用](http://tm.tl/6169)。

据我所知，没有这样的例子，但据我所知，一个原始套接字应该没问题。但是，您需要编写自己的传输，将套接字包装在[`IReadDescriptor`/中`IWriteDescriptor`并使用`IReactorFDSet`](http://twistedmatrix.com/documents/current/api/twisted.internet.interfaces.IReactorFDSet.html). 但是，如果您足够熟练地知道首先需要原始套接字，那么这应该不会太难。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-08T15:22:02.653

在扭曲的源代码中四处挖掘，您会发现[twisted.pair](http://twistedmatrix.com/documents/current/pair/index.html)，它不再真正维护，但为您提供了大约 90% 的原始套接字所需的内容。

我在某处有一些示例代码，展示了如何在 BSD 上使用 /dev/bpf 。唯一需要注意的是，它是纯 python，所以没有 tcpdump 样式的数据包过滤器（端口 80 和主机 blah.com）——你只需要从消防水管中喝水。

# php - 通过 ajax 更新 Wordpress 元数据时的并发问题

> ID：13149708
> 
> 赞同：0
> 
> 时间：2012-10-31T00:46:26.813
> 
> 标签：php, jquery, wordpress, concurrency, progress

这是场景：我正在构建一个 Wordpress 插件来管理我参与的一些调查研究。项目管理员能够从 WP 管理界面上传一个 csv 文件。在客户端，当文件上传时，它会遍历文件的每一行，提取有关用户的必要信息，然后进行 AJAX 调用以将参与者添加到项目中。我决定在客户端解析 csv 文件并一一提交 ajax 请求，以便在每次返回时更新进度条。javascript看起来像这样：

```
$( '#csv_upload_button' ).click( function() {
    // declare the necessary variables
    var f = $( '#csv_file_input' )[0].files[0],
        fr = new FileReader,
        rows, headers, dialog, count, remaining;
    // when the file loads
    fr.onload = function() {
        // get the rows, the count, number remaining to process, and headers
        rows = fr.result.split( "\n" );
        remaining = count = rows.length - 1; // -1 to account for header row
        headers = $.trim( rows[0] ).split( ',' );
        // create the dialog box to show the progress bar
        dialog = $( '<div></div>' )
                    .html( 
                        '<p>Loading...</p>' +
                        '<p><progress id="csv_upload_progress" max="' + count + 
                        '" min="0" value="0"></p>' )
                    .dialog( { modal: true; } );
        // then for each row in the file
        $( rows ).each( function( i, r ) {
            // create an object to hold the data
            var data = {}, row = $.trim( r ).split( ',' ), j;
            if ( i > 0 ) { // data starts on the second row
                // map the data into our object
                for ( j = 0; j < headers.length; j++ ) {
                    data[ headers[ j ] ] = row[ j ];
                }
                // send it to the server
                $.post(
                    ajaxurl, 
                    { 
                        action: 'import_panel_member', 
                        data: data, 
                        postid: $( '#post_ID' ).val() 
                    }, 
                    function( result ) {
                        var prog = $( '#csv_upload_progress' );
                        prog.attr( 'value', prog.attr( 'value' ) + 1 );
                        if ( 0 == --remaining ) {
                            // stuff to do when everything has been loaded
                        }
                    }
                );
            }
        });
    };
    // read the csv file
    fr.readAsText( f );
}); 
```

PHP 看起来像这样：

```
function import_panel_member() {
    header( 'content-type: application/json' );
    // get the variables sent from the client
    $postid = $_POST[ 'postid' ];
    $data   = $_POST[ 'data'   ];
    /*
     * ...do other things involving talking to a 3rd party server...
     */
    // get the WP meta data variable to be updated
    $participants = get_post_meta( $postid, '_project_participants', true );
    // modify it
    $participants[] = $data;
    // update the database
    update_post_meta( $postid, '_project_participants', $participants );
    // return a message to the client
    echo json_encode( (object) array( 'success' => 1, 'message' => 'added' ) );
    exit;
} 
```

问题在于，由于这些请求是异步发生的，因此元数据字段似乎`_project_participants`仅由要处理的最后一条记录更新。换句话说，只有列表中的最后一个人会显示在参与者列表中。以下是我尝试过的一些事情：

1.  **更改`$.post()`为`$.ajax()`并设置`async: false`**
    这可行，但速度要慢得多（由于同步调用），并且由于某种原因，它会阻止我的对话框出现，直到所有 ajax 调用完成。
2.  **将整个 csv 文件上传到服务器并在那里处理，**
    而不是在客户端解析 csv。这也有效，但我认为我无法从服务器获得可用于更新进度条的中间反馈。这个请求可能需要相当长的时间，我不希望用户在请求完成之前“放弃”它。这样做时，有时服务器从不响应 ajax 调用。

所以也许我很贪心，只想吃我的蛋糕，也是。如何利用异步请求的速度，这让我有机会通过进度条向用户提供反馈，但又不会因为服务器上的并发问题而搞砸自己？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T00:46:26.813

我想到了。答案是两种方法的混合。我可以使用一系列`$.post()`调用来做在异步模式下效果更好的东西，然后上传整个 csv 来做在同步模式下效果更好的东西。如果没有在 SO 中输入完整的解释，永远不会明白这一点！

# google-chrome - Java documentation search engine at chrome

> ID：13149725
> 
> 赞同：0
> 
> 时间：2012-10-31T00:49:12.507
> 
> 标签：google-chrome, search-engine, javadoc, google-search

I'm trying to add custom search engine to chrome omnibox, one of these which I wanted was Java Documentation. I failed and I have no more ideas how to solve it.

The search engine that I want to use: [http://docs.oracle.com/javase/search.html](http://docs.oracle.com/javase/search.html) And I need link with variable '%s' at position of searching phrase.

+Maybe any better searching engine for Java Doc?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T18:39:10.160

Right clicking the search engine in your link didn't work for me, neither did that URL.

Here are the ones I got to work:

**Search limited to Java 7 doc:**

[http://search.oracle.com/search/search?search_p_main_operator=all&group=Documentation&q=%s+url%3A%2Fjavase%2F7%2Fdocs%2Fapi&docsets=%2F7%2Fdocs%2Fapi](http://search.oracle.com/search/search?search_p_main_operator=all&group=Documentation&q=%s+url%3A%2Fjavase%2F7%2Fdocs%2Fapi&docsets=%2F7%2Fdocs%2Fapi)

**Search in all Java SE:**

[http://search.oracle.com/search/search?search_p_main_operator=all&group=Documentation&q=%s+url%3A%2Fjavase&docsets=%2F7%2Fdocs%2Fapi](http://search.oracle.com/search/search?search_p_main_operator=all&group=Documentation&q=%s+url%3A%2Fjavase&docsets=%2F7%2Fdocs%2Fapi)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T10:44:10.130

I manage to do it, if manually enter: [http://docs.oracle.com/javase/search.html?search_p_main_operator=all&group=Documentation&q=&searchField=%s&docsets=](http://docs.oracle.com/javase/search.html?search_p_main_operator=all&group=Documentation&q=&searchField=%s&docsets=)

But there is second much easier way to do it, just press right click on search engine and click "add search engine".

# html - 如何制作不使用 100% 页面宽度的 div：位置：固定；因为页面是可滚动的

> ID：13149727
> 
> 赞同：1
> 
> 时间：2012-10-31T00:49:34.597
> 
> 标签：html

我正在制作一个页面，其中有一个需要 100% 页面宽度的标题和主图像。虽然我需要能够向下滚动页面，因此我需要一种方法来使`div`100% 的页面宽度没有固定位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T00:51:23.863

你在寻找类似[http://twitter.github.com/bootstrap/components.html#navbar](http://twitter.github.com/bootstrap/components.html#navbar)的东西吗？

最简单的方法是（[DEMO](http://jsfiddle.net/jxgFM/)）：

```
.navbar {
    display: block;
    border: 1px solid red;
    height: 60px;
    background-image: url(http://www.phing.info/trac/chrome/site/logo.gif);
    background-repeat: no-repeat;
    text-align: center;
    /*background-size: cover;*/
    background-size: contain;
}​ 
```

# php - 由 Joomla 提供支持的网站可以扩展以允许数百万用户吗？

> ID：13149729
> 
> 赞同：0
> 
> 时间：2012-10-31T00:49:47.933
> 
> 标签：php, joomla, joomla1.5, joomla2.5, joomla1.6

我非常喜欢 Joomla，它是一个很棒的 CMS，但是如果我有合适的服务器并设置我的 MYSQL 数据库，它可以扩展吗？

Joomla 本身是否存在限制，或者它的可扩展性是否取决于服务器和适当的数据库操作？

假设我创建了一个会员 joomla 网站，它变得非常繁忙并且像 twitter 或 facebook 一样变得越来越大，如果我有足够的服务器，它是否能够扩展？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T00:55:04.377

可能不是。没有一个常用的 CMS 可以轻松扩展到那么远。要做到这一点，您需要在功能或速度上做出妥协，并且您需要创造性地完全避免数据库访问，或者创造性地将您的站点连接到更具可扩展性的数据存储。

一般来说，它需要整个系统工程师团队来扩展任何非静态网站到那个程度，并且使用默认依赖 MySQL 的重型 PHP 框架可能会使这变得更加困难。

# ios - iOS Autolayout：调整大小父视图中的 UILabels 问题

> ID：13149733
> 
> 赞同：30
> 
> 时间：2012-10-31T00:50:32.333
> 
> 标签：ios, ios6, autolayout

我有一个只包含 UILabel 的视图。此标签包含多行文本。父级具有可变宽度，可以使用平移手势调整大小。我的问题是，当我调整 UILabel 的大小时，它不会重新计算其高度以使所有内容仍然可见，它只是将其切断。

我已经设法通过一些 hack 来修复它，但是运行起来非常慢：

```
- (void)layoutSubviews {

    CGSize labelSize = [self.labelDescription sizeThatFits:CGSizeMake(self.frame.size.width, FLT_MAX)];

    if (self.constraintHeight) {
        [self removeConstraint:self.constraintHeight];
    }

    self.constraintHeight = [NSLayoutConstraint constraintWithItem:self.labelDescription attribute:NSLayoutAttributeHeight relatedBy:NSLayoutRelationEqual toItem:nil attribute:NSLayoutAttributeNotAnAttribute multiplier:1.0 constant:labelSize.height];

    [self addConstraint:self.constraintHeight];

    [super layoutSubviews];
} 
```

这不应该通过自动布局自动发生吗？

**编辑**

我的观点结构是：

```
UIScrollView
---> UIView
     ---> UILabel 
```

以下是 UIScrollView 的约束：

```
<NSLayoutConstraint:0x120c4860 H:|-(>=32)-[DescriptionView:0x85c81c0]   (Names: '|':UIScrollView:0x85db650 )>,
<NSLayoutConstraint:0x120c48a0 H:|-(32@900)-[DescriptionView:0x85c81c0] priority:900   (Names: '|':UIScrollView:0x85db650 )>,
<NSLayoutConstraint:0x120c48e0 H:[DescriptionView:0x85c81c0(<=576)]>,
<NSLayoutConstraint:0x120c4920 H:[DescriptionView:0x85c81c0]-(>=32)-|   (Names: '|':UIScrollView:0x85db650 )>,
<NSLayoutConstraint:0x120c4960 H:[DescriptionView:0x85c81c0]-(32@900)-| priority:900   (Names: '|':UIScrollView:0x85db650 )>,
<NSLayoutConstraint:0x8301450 DescriptionView:0x85c81c0.centerX == UIScrollView:0x85db650.centerX>, 
```

以下是对 UIView 的约束：

```
<NSLayoutConstraint:0x85c4580 V:|-(0)-[UILabel:0x85bc7b0]   (Names: '|':DescriptionView:0x85c81c0 )>,
<NSLayoutConstraint:0x85c45c0 H:|-(0)-[UILabel:0x85bc7b0]   (Names: '|':DescriptionView:0x85c81c0 )>,
<NSLayoutConstraint:0x85c9f80 UILabel:0x85bc7b0.trailing == DescriptionView:0x85c81c0.trailing>,
<NSLayoutConstraint:0x85c9fc0 UILabel:0x85bc7b0.centerY == DescriptionView:0x85c81c0.centerY> 
```

UILabel 本身对它没有任何限制，除了将其固定到其父级的边缘

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-11-28T23:08:28.763

好吧，我终于搞定了。解决方案是设置`preferredMaxLayoutWidth`in `viewDidLayoutSubviews`，但仅*在*第一轮布局之后。您可以简单地通过将异步调度回主线程来安排这一点。所以：

```
- (void)viewDidLayoutSubviews {
    dispatch_async(dispatch_get_main_queue(), ^{
        self.theLabel.preferredMaxLayoutWidth = self.theLabel.bounds.size.width;
    });
} 
```

这样，在标签的宽度被其与超级视图相关的约束正确设置*之后*`preferredMaxLayoutWidth`，您才进行设置。

 *这里的工作示例项目：

[https://github.com/mattneub/Programming-iOS-Book-Examples/blob/master/ch23p673selfSizingLabel4/p565p579selfSizingLabel/ViewController.m](https://github.com/mattneub/Programming-iOS-Book-Examples/blob/master/ch23p673selfSizingLabel4/p565p579selfSizingLabel/ViewController.m)

**编辑：**另一种方法！子类 UILabel 和覆盖`layoutSubviews`：

```
- (void) layoutSubviews {
    [super layoutSubviews];
    self.preferredMaxLayoutWidth = self.bounds.size.width;
} 
```

结果是一个自调整大小的标签 - 无论其宽度如何变化（假设其宽度由约束/布局更改），它都会自动更改其高度以适应其内容。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-11-19T04:09:43.800

在向 Apple 提出错误后，我已经解决了这个问题。多行文本需要两次布局的问题，这一切都依赖于属性`preferredMaxLayoutWidth`

以下是需要添加到包含多行标签的视图控制器的相关代码：

```
- (void)viewWillLayoutSubviews
{
    // Clear the preferred max layout width in case the text of the label is a single line taking less width than what would be taken from the constraints of the left and right edges to the label's superview
    [self.label setPreferredMaxLayoutWidth:0.];
}

- (void)viewDidLayoutSubviews
{
    // Now that you know what the constraints gave you for the label's width, use that for the preferredMaxLayoutWidth—so you get the correct height for the layout
    [self.label setPreferredMaxLayoutWidth:[self.label bounds].size.width];

    // And then layout again with the label's correct height.
    [self.view layoutSubviews];
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-11-24T21:34:00.240

在适用于 iOS 7/8 的 Xcode 6.1 中，我只需设置`preferredMaxLayoutWidth`一个在我的视图上调用的 setter 方法来显示标签的文本，就可以让它工作。我猜它是`0`从一开始就设置好的。下面的示例，`self.teachPieceLabel`标签在哪里。该标签与 Interface Builder 中视图中的其他标签一起与约束相连。

```
- (void)setTeachPieceText:(NSString *)teachPieceText {
      self.teachPieceLabel.text = teachPieceText;
      [self.teachPieceLabel setPreferredMaxLayoutWidth:[self.teachPieceLabel bounds].size.width];
} 
```*

# xpath - 如何使用 xpath 获取具有值的节点的索引列表

> ID：13149737
> 
> 赞同：1
> 
> 时间：2012-10-31T00:51:12.363
> 
> 标签：xpath

使用以下内容；

```
 <a>
  <b>false</b> 
  <b>true</b> 
  <b>false</b> 
  <b>false</b> 
  <b>true</b> 
  </a> 
```

我想使用 /a/b[.='true'].position() 之类的结果获得以下结果，例如 2,5 （如在 2 个位置的集合中）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T02:15:05.820

**一、XPath 1.0 解决方案**：

**使用**：

```
count(/*/*[.='true'][1]/preceding-sibling::*)+1 
```

这将产生`b`字符串值为“true”的第一个元素的位置：

```
2 
```

重复对类似表达式的求值，其中`[1]`替换为`[2]`,... 等，直到`count(/*/*[.='true'])`

**基于 XSLT 的验证**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output method="text"/>

 <xsl:template match="/">
   <xsl:for-each select="/*/*[.='true']">
    <xsl:variable name="vPos" select="position()"/>

    <xsl:value-of select=
     "count(/*/*[.='true'][$vPos]
               /preceding-sibling::*) +1"/>
    <xsl:text>&#xA;</xsl:text>
   </xsl:for-each>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<a>
    <b>false</b>
    <b>true</b>
    <b>false</b>
    <b>false</b>
    <b>true</b>
</a> 
```

`The XPath expression is constructed and evaluated for every`b `, whose string value is`“真” `. The results of these evaluations are copied to the output`：

```
2
5 
```

* * *

**二、XPath 2.0 解决方案：**

**使用**：

```
index-of(/*/*, 'true') 
```

**基于 XSLT 2.0 的验证**：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output method="text"/>

 <xsl:template match="/">
   <xsl:sequence select="index-of(/*/*, 'true')"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此 XSLT 2.0 转换应用于同一个 XML 文档（上图）时，将评估 XPath 2.0 表达式并将此评估的结果复制到输出**：

```
2 5 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T01:18:51.910

[python](/questions/tagged/python "显示标记为“python”的问题")语言的基本（和工作）方法：

```
from lxml import etree
root = etree.XML("""
<a>
  <b>false</b> 
  <b>true</b> 
  <b>false</b> 
  <b>false</b> 
  <b>true</b> 
</a>
""")

c = 0
lst = []

for i in root.xpath('/a/b/text()'):
    c+=1
    if i == 'true':
        lst.append(str(c))

print ",".join(lst) 
```

# url - Redex 删除 URL 但保留 @something

> ID：13149738
> 
> 赞同：0
> 
> 时间：2012-10-31T00:51:19.580
> 
> 标签：url

我需要删除 URL，但我需要保留 @something 之类的字符串，这是我的 redex：

```
"[^@][(https?|ftp|file)://[-a-zA-Z0-9+&#/%?=~_|!:,.;]*[-a-zA-Z0-9+&#/%=~_|]]" 
```

然而，当我用它来删除字符串时，它并没有删除我`http://notwww.things`唯一以 " `http://www`" 开头的字符串，它确实 elminates `@somethings`。

有人可以帮我纠正我的redex吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T00:58:33.453

您应该`.`在字符类中转义点 ( )。否则，此正则表达式将替换`all`字符。

# objective-c - iOS 6 中 NSMapTable 的下标语法

> ID：13149740
> 
> 赞同：5
> 
> 时间：2012-10-31T00:51:34.297
> 
> 标签：objective-c, syntax, objective-c-category

我`NSMapTable`在 iOS 6 项目的许多地方使用，并且希望能够使用新的字典下标样式来访问对象。（`NSMapTable`行为大多类似于`NSMutableDictionary`，但可以为其存储的键和值配置各种内存管理选项。[此 StackOverflow 问题](https://stackoverflow.com/questions/6904533/nsmaptable-and-nsmutabledictionary-differences)的更多背景信息。）

`NSMapTable`尝试在实例上使用下标语法时，编译器会报告此问题：

> 在“NSMapTable *”类型的对象上找不到读取字典元素的预期方法。

如何使用类别进行扩展`NSMapTable`以允许新式`NSDictionary`下标？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T01:11:23.017

答案其实很简单；有关如何实现下标的更多信息，请参阅[此问题。](https://stackoverflow.com/questions/11658669/how-to-enable-the-new-objective-c-object-literals-on-ios)添加这样的类别。

标题：

```
@interface NSMapTable (Subscripting)

- (void)setObject:(id)obj forKeyedSubscript:(id <NSCopying>)key;
- (id)objectForKeyedSubscript:(id)key;

@end 
```

执行：

```
@implementation NSMapTable (Subscripting)

- (void)setObject:(id)obj forKeyedSubscript:(id <NSCopying>)key {
    [self setObject:obj forKey:key];
}

- (id)objectForKeyedSubscript:(id)key {
    return [self objectForKey:key];
}

@end 
```

这让我想知道，在某些或所有情况下，下标访问实际上是否比替代方法慢一点，但是“过早优化”一词使这种想法变得无关紧要。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-02-17T13:33:32.813

改进了@mjh 的答案，其中包含`NSDictionary`为键设置对象的行为`nil`并添加了 Obj-C 泛型：

```
@interface NSMapTable<KeyType, ObjectType> (Subscripting)

- (void)setObject:(ObjectType)obj forKeyedSubscript:(KeyType)key;
- (ObjectType)objectForKeyedSubscript:(KeyType)key;

@end

@implementation NSMapTable (Subscripting)

- (void)setObject:(id)obj forKeyedSubscript:(id)key {
    if (object) {
        [self setObject:obj forKey:key];
    } else {
        [self removeObjectForKey:key];
    }
}

- (id)objectForKeyedSubscript:(id)key {
    return [self objectForKey:key];
}

@end 
```

# jquery - jqGrid 将焦点设置为单击的单元格并在 IE 和 Firefox 中实现 datepicker

> ID：13149747
> 
> 赞同：1
> 
> 时间：2012-10-31T00:52:48.957
> 
> 标签：jquery, asp.net-mvc, jqgrid

抱歉，如果这已经得到回答。有很多关于这个的问题，但我不太明白我想要什么。

我有一个 jqGrid。第一个单元格附加了一个日期选择器（在编辑单元格时即时进行，而不是在初始网格定义中）。

当我双击网格中间的单元格时，我希望它进入编辑模式，将焦点设置到单击的单元格而不触发日期选择器（因为我没有双击它）

**通过下面的代码，我在Firefox**中实现了我想要的。这是基于 Olegs（和其他人）关于该主题的优秀帖子。

但是，在**IE9**中，虽然它根据需要设置焦点，但它也会在第一个单元格中触发日期选择器。

我知道默认情况下 jqGrid 会自动移动到第一个单元格，因此无论我是否双击它都会触发 datepicker（如果存在）。也许作为一种解决方法，我需要在第一个位置创建某种微小的虚拟单元，但首先我想借此机会了解更多信息。

这是一些缩写的 jqGrid 代码，您会从 Oleg 和其他人的帖子中识别出点点滴滴。抱歉，此时我无法为您提供 jqGrid 的确切版本，只能说我在 2012 年 10 月上旬下载了它。

我只想说我不完全理解正在发生的事件顺序 - 乍一看，似乎在单击的字段获得焦点*之前附加了日期选择器（？）。*

顺便说一句，这是在 MVC ASP.Net 项目中。我觉得有趣和讽刺的是，我在 MVC / ASP.Net 中获得有用的网格控件的唯一方法就是开始学习 Javascript。

```
$(document).ready(
    function () {
        var lastsel;
        $("#ts").jqGrid({
            //=============
            // Grid Setup
            url: 'Timesheet/GridData/',
            datatype: 'json',
            mtype: 'GET',
            colNames: ['Date', 'Customer', 'Project', 'Description', 'Hours', '$'],
            colModel: [
              { name: 'tsdate', index: 'tsdate', width: 80, editable: true },
              { name: 'Customer', index: 'Customer', width: 250, align: 'left', editable: true, edittype: "select", editoptions: { dataUrl: 'Timesheet/CustomerList'} },
              { name: 'Project', index: 'Project', width: 250, align: 'left', editable: true, edittype: "select", editoptions: { dataUrl: 'Timesheet/ProjectList'} },
              { name: 'Desc', index: 'Desc', width: 300, align: 'left', editable: true },
              { name: 'Hours', index: 'Hours', width: 50, align: 'left', editable: true },
              { name: 'Charge', index: 'Charge', edittype: 'checkbox', width: 18, align: 'center', editoptions: { value: "0:1" }, formatter: "checkbox", formatoptions: { disabled: false }, editable: true }
            ],
            //=============
            // Grid Events
            // when selecting, undo anything else
            onSelectRow: function (rowid, iRow, iCol, e) {
                if (rowid && rowid !== lastsel) {
                    $('#ts').jqGrid('restoreRow', lastsel);
                    lastsel = rowid;
                }
            },
            // double click to edit
            ondblClickRow: function (rowid, iRow, iCol, e) {
                // Go into edit mode (automatically moves focus to first field)
                $('#ts').jqGrid('editRow', rowid, true, onGridEdit);
                // Now set focus on selected field
                if (!e) e = window.event; // get browser independent object
                var element = e.target || e.srcElement
                $("input, select", element).focus();
            },
            postData:
                {
                    startDate: function () { return $('#startDate').val(); }
                }
        }); // END jQuery("#ts").jqGrid

        // This is called when the row is double clicked
        function onGridEdit(RowID) {
            // onGridEdit is attached as the 'edit function' in the call to .jqGrid('editRow' above
            // Attach the datepicker to the tsdate field. For some reason this needs to be in the edit function
            // And does not work in IE 9\. In IE9 it fires the datepicker. In Firefox it only fires when the field
            // gets the focus
            $("#" + RowID + "_tsdate").datepicker({ dateFormat: 'yy-mm-dd' });
        }

    });           // END $(document).ready 
```

**解决方案**在比较 Firefox 和 IE9 之间的调试时，似乎 firefox 事件按顺序运行，而 IE9 事件则没有。

无论如何，Oleg 建议的最终解决方案是将 oneditfunc 函数包装在 setTimeout 函数中：

```
 ondblClickRow: function (rowid, iRow, iCol, e) {
                if (!e) e = window.event; //evt evaluates to window.event or inexplicit e object, depending on which one is defined
                var element = e.target || e.srcElement

                // Go into edit mode (automatically moves focus to first field)
                $(this).jqGrid(
                    'editRow',
                    rowid,
                    {
                        keys: true,
                        oneditfunc: function (rowId) {
                            setTimeout(function () {
                                $("input, select", element).focus();
                                $("#" + rowId + "_tsdate").datepicker({ dateFormat: 'yy-mm-dd' });
                            }, 50);
                        }
                    }
                ); // end jqGrid call

            },  // end ondblClickRow event handler 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T07:17:05.570

我想可以通过移动回调`jQuery.focus`内部的调用来解决焦点问题`oneditfunc`。如果您将回调实现为匿名函数（而不是`onGridEdit`），那么实现将是最简单的：

```
ondblClickRow: function (rowid, iRow, iCol, e) {
    if (!e) e = window.event; // get browser independent object
    var element = e.target || e.srcElement;

    // Go into edit mode (automatically moves focus to first field)
    $(this).jqGrid('editRow', rowid, {
        keys: true,
        oneditfunc: function (rowId) {
            $("input, select", element).focus(); // Now set focus on selected field
            $("#" + rowId + "_tsdate").datepicker({ dateFormat: 'yy-mm-dd' });
        }
    });
} 
```

你怎么能看到我在回调函数中额外使用`$(this)`而不是在内部使用。`$('#ts')`它使代码易于维护并且速度更快。您可以在所有 jqGrid 回调（例如内部`onSelectRow`）中进行相同的更改。此外，我更喜欢使用调用[editRow](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3ainline_editing#editrow)的对象样式。在我看来，它使代码更具可读性，因为使用了命名参数。

# php - PHP/Wordpress，不同的编码风格

> ID：13149749
> 
> 赞同：1
> 
> 时间：2012-10-31T00:52:55.027
> 
> 标签：php, wordpress, coding-style

我注意到 PHP/Wordpress 代码中有一些奇怪的编码风格：

**1)**在函数开始时返回：

我很惊讶我经常看到在函数开始时返回的 PHP/Wordpress 代码。例如：

```
function dosomething() {
   if (!current_user_can($priv)) {
       return;
   }
   .... continued code 
```

用于代替通常被认为是好的做法，即很少有多个返回（它们基本上是 goto）：

```
function dosomething() {
    if (current_user_can($priv)) {
        ... do something
    }
    ... any finishing code
} 
```

**2)** if 中缺少括号

在大多数其他语言中，不带括号的单行 if/else 语句被认为是混乱/危险的，因为其他行可能看起来会运行，而实际上它们并没有运行。然而，我已经在 PHP/Wordpress 中看到过多次使用它。

我想知道这些不同的样式是否具有性能优势，或者使用它们的其他具体原因？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T00:58:45.687

我会说这是值得商榷的。如果您的单行条件没有大括号，则处理上的差异非常小，不可能提高性能。

函数开头的 return 是为了防止它在不满足该条件的情况下甚至运行该进程。您可能已经通过查看代码知道了这一点，但可能没有考虑到该函数将在返回之前进行评估，因此您的函数可能有几十个条件，它在第一个条件之后永远不会满足。如果你不需要，处理这些是没有意义的。

顺便说一句，这根本不是 wordpress 特有的。我到处都看到过这样的做法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T00:55:53.393

两者都与性能无关。第一个只是保证没有授权的用户不能处理函数中的任何内容（以确保他们不会在您的示例中运行“...任何完成代码”），第二个是简单 if/else 语句的样式偏好。

# java - 尽管出现 CRC 错误，仍强制 gzip 解压缩

> ID：13149751
> 
> 赞同：7
> 
> 时间：2012-10-31T00:53:15.907
> 
> 标签：java, gzip, compression

我认为有办法做到这一点，但我不知道怎么做？基本上，我正在编写一个压缩程序，当我尝试解压缩压缩数据时导致出现 crc 错误。通常这意味着解压缩器实际上将我的数据识别为正确的格式并对其进行解压缩，但是当它将结果与 CRC 指示的预期长度进行比较时，它们并不相同。

但是，出于比较的原因，我实际上确实希望查看输出以查看它是否只是一个串联问题（如果解压缩的输出不是乱码而是顺序错误，这应该是相对明显的）。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-31T05:13:33.780

你说“解压缩”，但问题是“gzip”。它是哪一个？这是两个不同的程序，它们以两种不同的格式运行。我将假设gzip。此外，长度不是“由 CRC 指示的”。gzip 预告片包含一个 CRC 和一个未压缩的长度（模 2 ^(32)），这是两个不同的东西。

该`gzip`命令将解压缩所有有效的 deflate 数据并在检查 crc 之前将其写出。因此，例如，如果我获取一个`.gz`文件并在最后损坏 crc（或长度），然后执行以下操作：

```
gzip -dc < corrupt.gz > result 
```

那么结果将是整个正确的未压缩数据流。无需修改和重新编译`gzip`，也无需编写自己的 ungzipper。gzip 会抱怨 crc，但仍然会写入所有数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T01:18:51.383

As far as I'm aware, the CRC check is part of the GZIP wrapper, not part of the actual compressed data in DEFLATE format.

So you should be able to take literally just the bytes that are the compressed data stream, ignoring the GZIP header and CRC at the end, and pass it through an Inflater.

In other words, you need to take just the bytes corresponding to those referred to as "compressed blocks" in the [GZIP File format specification](http://www.gzip.org/zlib/rfc-gzip.html) and try to decompress using a Java Inflater object. A little bit of work but possibly less than re-compiling the GZIP code as Greg suggests (though his option would also work in principle).

# ruby-on-rails - 将 /assets 放入 .slugignore 以使用 assets_sync (S3/CDN) 进行 Heroku 部署

> ID：13149758
> 
> 赞同：6
> 
> 时间：2012-10-31T00:54:24.057
> 
> 标签：ruby-on-rails, heroku, cdn, precompile

我不确定是否有现有的方法可以做到这一点，但是使用asset_sync 的想法是资产是从S3 或某些CDN（例如cloudfront）提供的，因此不需要成为应用程序slug 的一部分。是否有可能在 Heroku 上的 .slugignore 中有 /assets 并且仍然可以让 assets:precompile 和 asset_sync 工作？如果我只是将 /assets 放在 .slugignore 中，它们不会与摘要一起编译，并且对资产的引用没有指纹，因此不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-25T09:42:51.467

编辑 .slugignore 在那里不起作用，因为排除文件在 Heroku 上的所有编译步骤之前开始。但是我们需要编译所有这些，将它们移动到 S3，然后才能删除它们。

我在我的 Rakefile 小脚本中写了一些代码，通过扩展过滤器删除所有不可用的文件：

```
Rake::Task["assets:precompile"].enhance do
    puts 'my assets:precompile hook is started!'
    dir_path = "#{Dir.pwd}/public/sites-fromfuture-net/"
    records = Dir.glob("#{dir_path}**/*")
    records.each do |f|
        if f =~ /.*.png$/ or
                f =~ /.*.jpg$/ or
                f =~ /.*.eot$/ or
                f =~ /.*.svg$/ or
                f =~ /.*.woff$/ or
                f =~ /.*.ttf$/ or
                f =~ /.*.otf$/ or
                f =~ /.*.css$/ or
                f =~ /.*.js$/ or
                f =~ /.*.wav$/ then
            File.delete(f)
        end
    end
    # puts Dir.glob("#{dir_path}**/*")
    puts 'my assets:precompile hook is finished!'
end 
```

还有一件事：我使用了 heroku-deflater gem，它压缩了所有 css 和 js 资产，所以我通过脚本删除了所有 .css 和 .js 文件，但不删除 .css.gz 和 .js.gz 文件，因为Rails 资产检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T16:38:58.830

你读过这篇文章吗？- [https://devcenter.heroku.com/articles/cdn-asset-host-rails31](https://devcenter.heroku.com/articles/cdn-asset-host-rails31)

“同步资产”部分似乎表明资产可以在 heroku 上预编译，然后asset_sync gem 会将它们从那里上传到您的 s3 存储桶（作为预编译步骤的一部分），文章没有提到使用 .slugignore

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-01T17:59:31.657

检查这个：[https ://github.com/VentionCo/heroku-buildpack-post-build-clean](https://github.com/VentionCo/heroku-buildpack-post-build-clean)

这是一个很好的解决方案：一个支持在构建之后删除文件的构建包（与之前删除文件的 .slugignore 不同）。

我正在使用它来删除`node_modules`并`assets`在我的 webpack 构建之后。

# windows-phone-8 - 如何编写我的 Windows Phone 应用程序以使用 wp 8 功能但向后兼容 wp 7

> ID：13149760
> 
> 赞同：1
> 
> 时间：2012-10-31T00:54:53.080
> 
> 标签：windows-phone-8

我想使用一些特定于 wp8 的 api，但我不想在我的应用程序中放弃对 wp7 的支持。

特别是，我想做以下事情：

```
 if(isWindowsPhone8OrNewer)
   {
        var sp = new SpeechSynthesizer();
        sp.SpeakTextAsync("test");
   } 
```

访问 wp8 api 并且不必维护应用程序的两个单独版本的最佳方法是什么？

例如，我需要使用反射吗？

有人可以提供一个例子吗？

非常感谢！猪

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T00:57:10.733

问题的答案很简单：只需不要将您的应用升级到使用 WP8，您就可以继续使用 VS2012 中的 WP8 SDK 维护您的 WP7 应用。

如果您想拆分您的应用程序，并开始使用新的 UI 功能，例如本机 LongListSelector，您可能希望将您的 UI 和视图逻辑（ViewModel 等）分离到单独的程序集中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T06:21:49.723

如果您在 WP8 设备上运行，有一个不错的项目可以从您的 WP7 项目中访问一些 WP8 API：http:
[//mangopollo.codeplex.com/](http://mangopollo.codeplex.com/)

如果您想使用其他新的 WP8 功能，您必须将您的项目升级到 WP8。

# c# - 获取指向矩形数组开头的不安全固定指针

> ID：13149762
> 
> 赞同：1
> 
> 时间：2012-10-31T00:55:13.227
> 
> 标签：c#, .net, unsafe, fixed-statement, multidimensional-array

考虑一个二维矩形阵列。说：

```
int[,] values = new int[len1, len2]; 
```

如何在`unsafe`代码中遍历它的所有值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T00:55:13.227

以下工作在`unsafe`上下文中。

```
fixed (int* baseOffset = values)
{
    var offset = baseOffset;
    var count = len1 * len2;
    for (int i = 0; i < count; i++)
    {
        int value = *offset;
        // Do whatever you need to do here
        offset++;
    }
} 
```

请注意，要获取指向数组中第一项的指针，类型必须匹配。因此，如果您有一个`byte*`要视为 的`ushort*`，则不能在`fixed`语句的括号内强制转换指针，尽管您可以在块中执行此操作。

# jquery - 网页调用自身后jquery不起作用

> ID：13149765
> 
> 赞同：0
> 
> 时间：2012-10-31T00:55:50.210
> 
> 标签：jquery, mobile

有点难以解释。但是这里的网站：

[http://beerportfolio.com/mobile/](http://beerportfolio.com/mobile/)

左上角的按钮打开侧边栏导航。

当用户输入登录信息时，页面会使用以下代码调用自身：

```
<h5>Sign In</h5>

 <form name=\"input\" action=\"index.php\" method=\"post\">
 User Name: <input type=\"text\" name=\"user\"  id=\"user\" />
 </p>
 Password: <input type=\"password\" name=\"password\" id=\"password\" />
 <div class=\"blank-divider\"></div>    
    <p>
 <input type=\"submit\" name = \"login\" value=\"login\" />
 </p>
 </form> 
```

当页面调用自己成功登录或登录失败时，滑出不再打开。

这是jquery的代码：

```
<!--Toggle Menu-->
<script type="text/javascript">
            $(function() {
                $('#navigation').click(function() {
                    $('.navigation').slideToggle('fast');
                    return false;
                });
            });
</script> 
```

要总结如何重现问题，请访问上面的链接。尝试右上角的按钮以查看侧边栏的弹出和弹出。然后输入一些随机登录信息并尝试登录。当下一页加载时，再次尝试左上角的登录按钮，现在侧栏不会出现。

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T01:05:01.050

据我所知，加载页面时没有具有“导航”ID 的元素。如果它是动态添加的，除非您使用 .on 将其绑定到正文，否则它将不起作用。

我将 $('#navigation') 更改为 $('.showMenu') 并且效果很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T21:22:15.797

在做了更多研究之后，我发现这与在 jquery mobile 中使用 ajax 自动完成的页面刷新有关。

对我来说，一个快速的解决方法是：

```
data-ajax="false" 
```

在表单元素中使用上述属性会强制刷新整个页面，从而允许我的查询调用工作。

这不是理想的解决方法，因为我仍在尝试解决这个问题。但目前这是一个快速而肮脏的修复。

# networking - 如何在没有 rDNS 的情况下进行 nmap 并在输出中写入 DNS

> ID：13149769
> 
> 赞同：0
> 
> 时间：2012-10-31T00:56:32.113
> 
> 标签：networking, nmap, port-scanning

我需要使用 nmap 检查端口 443 是否对列表网站开放。所以，我将它们保存到一个文件中。我需要输出告诉我端口是否打开。我使用了命令：

```
nmap -PN -p443 gnmap -oG logs/output.gnmap -iL myfolder/input.txt 
```

问题：输出文件给了我一个不同的域名。Nmap做了rDNS，我发现IP指向不同的域名。请解释。这是否意味着两个域都托管在同一台服务器上？但是，我检查了他们的证书，发现每个域都有不同的证书。我担心列表中的 433 端口，以便稍后检查他们的证书。因此，除了我在文件中输入的证书之外，我不想检查另一个域的证书。

为了解决这个问题，我使用了这个`-n`选项。但问题是输出文件只包含 IP。如何在没有 rDNS 的情况下生成包含我的域结果的输出文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T12:09:00.620

“Grepable”输出格式 ( `-oG`) 已弃用，因为它无法显示 Nmap 扫描的完整输出。`-oG`除非修改 Nmap 并重新编译，否则无法使用该选项获得所需的输出。

幸运的是，XML 输出格式 ( `-oX`) 包含您想要的信息以及更多信息：

```
<hostnames>
  <hostname name="bonsaiviking.com" type="user"/>
  <hostname name="li34-105.members.linode.com" type="PTR"/>
</hostnames> 
```

在此示例中，通过扫描我的域，命令行上提供的主机名具有属性`type="user"`，而作为反向查找结果的主机名具有`type="PTR"`。

# c# - 无法将泛型类型加载到 ASP.NET 应用程序中的另一个 AppDomain

> ID：13149771
> 
> 赞同：2
> 
> 时间：2012-10-31T00:56:54.003
> 
> 标签：c#, asp.net, appdomain

我有一个非常奇怪的问题，在 ASP.NET 中运行时，我无法将泛型类型加载到另一个 AppDomain 中，但它可以在我的测试项目和控制台应用程序中使用。

相关代码基本上是这样做的：

```
Assembly ass = Assembly.GetExecutingAssembly();
string AssemblyPath = ass.Location;

var templateType = typeof(RazorEngine<RazorTemplateBase>);

object instance = LocalAppDomain.CreateInstanceFrom(AssemblyPath,
                                             templateType.FullName)
                                .Unwrap(); 
```

最后一行的代码炸弹。AppDomain 存在，并且其基本执行和 bin 路径与原始 AppDomain 匹配。

在测试项目中运行此代码时，它工作正常。实例已创建（作为 TransparentProxy 远程引用），一切都很好。

在 ASP.NET 中运行时，泛型类型参数出现类型错误：

> GenericArguments[0], 'Westwind.RazorHosting.RazorTemplateBase', on 'Westwind.RazorHosting.RazorEngine`1[TBaseTemplateType]' 违反了类型 'TBaseTemplateType' 的约束。

其中 TBaseTemplateType 与传入的类型相同（即 RazorTemplateBase），RazorEngine 定义如下：

```
public class RazorEngine<TBaseTemplateType> : MarshalByRefObject
    where TBaseTemplateType : RazorTemplateBase 
```

显然，我传递了正确的类型，因为它是实际的限制类型，但不知何故 AppDomain 没有将 Generic 类型识别为相同的类型。

正如我所提到的，它在 Windows 应用程序和测试项目中工作，但在 ASP.NET 中，泛型类型不会跨越 AppDomain 边界进行实例化。使用相同的代码创建一个非泛型类型（即使是从 RazorHosting 继承的该类型 RazorHosting 的相同非泛型版本）并且它工作正常。

难住了。ASP.NET 可以做些什么来使它的行为与在测试项目中运行时如此不同？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T00:19:00.463

我以前遇到过这个奇怪的问题。它似乎归结为 Shadow Copy（ASP.NET 默认使用）、每个 AppDomain 的 ApplicationBase 和 Load Contexts 的组合。

自从我的大脑出现这个问题以来已经有一段时间了，但请查看我对这个问题的回答，看看是否有帮助：

[域问题](https://stackoverflow.com/questions/2932370/how-do-i-pass-references-as-method-parameters-across-appdomains)

# java - 限制数组列表中的值？

> ID：13149772
> 
> 赞同：1
> 
> 时间：2012-10-31T00:56:55.233
> 
> 标签：java

如果我的列表中可以包含 1 或 2 的值，并且我在运行时获取列表并且我无法修改它，那么如果它确实包含任何其他值，那么检查和报告错误的最佳方法是什么？我是否需要根据 1 和 2 的值检查每个元素，以确保列表中不包含其他值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T00:59:49.320

如果您从外部来源获取列表，则需要检查列表的每个元素以确保值在正确的范围内。如果您自己制作列表，则可以继承`ArrayList`or `LinkedList`，并覆盖变异成员（`add`、`insert`等）以检查插入点处的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T01:09:09.087

是的，如果您收到一个现有列表并想确保它只包含某些值，您必须搜索所有单元格，没有更好的算法。换句话说，在未排序列表中搜索的最佳算法是 O(N)。

# flash - Flash 播放器内存使用 - Flash builder 分析器与活动监视器

> ID：13149773
> 
> 赞同：0
> 
> 时间：2012-10-31T00:57:00.677
> 
> 标签：flash, memory, monitoring, profiler, builder

有人可以解释一下 Flash Builder 中的当前内存使用/可以在内存使用图的分析器中看到的/和实际内存使用/可以在 OSX 的活动监视器中看到的/之间的关系。问题是 FB 中的当前内存似乎报告了非常小的值，低于 300K，但是活动监视器显示 Flash 播放器调试器的实际内存使用量正在增长和增长。这怎么可能？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T01:18:03.330

The memory usage in the profiler is only the memory used by the objects allocated in the Flash virtual machine (AVM). In other words: Your main `Sprite` and any objects instantiated by your application, as well as behind-the-scene objects created by the AVM, such as the `Stage`.

Memory usage of the Flash player/debugger includes the process of the player/debugger and the AVM, which is just a native Mac/Windows application. The AVM executes your AS3 code somewhere inside of the Flash player, in its own isolated world.

If you want to keep an eye on your Flash application's memory usage, stick to the profiler.

# java - 在 Java 中将对象从数组复制到数组

> ID：13149776
> 
> 赞同：0
> 
> 时间：2012-10-31T00:57:24.283
> 
> 标签：java

我正在尝试将我创建的对象从一个数组复制到另一个相同类型的 Java 中。当我运行我的程序时，我收到一个 NullPointerException。

相关的类函数是：

```
private int mState;
public Cell(int pRow, int pColumn, int pState) {
    //other things
    setState(pState);
}

public void setState(int pNewState) {
    mState = pNewState;
}

public void setDead() {
    mState = DEAD;
} 
```

以及发生错误的行：

```
mFutureGeneration[i][j].setDead(); 
```

该数组定义为

```
private Cell [][] mFutureGeneration; 
```

然后尺寸为

```
mFutureGeneration = new Cell[100][100]; 
```

它从以下位置接收内容：

```
Cell [][] vSeedArray = new Cell[100][100]; 
```

填充为

```
for (int i = 0; i<100; i++) {
    for (int j = 0; j<100; j++) {
        int vNewState = mGenerator.nextInt(2) - 1;
        vSeedArray[i][j] = new Cell(i,j,vNewState);
    }
} 
```

我认为问题出在副本中，但我一直认为 Java 是通过引用复制的，所以我不明白为什么它会失败。

我用循环复制内容

```
for(int i = 0; i<vSeedArray.length; i++) {
    for(int j=0; j<vSeedArray[i].length; j++) {
            mCurrentGeneration[i][j] = vSeedArray[i][j];
    }
} 
```

任何帮助，将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T01:02:46.017

我不确定您是否曾经分配过任何“单元格”对象——只是保存它们的数组。

如果是这样，那可能是您的 NullPointer 异常的原因。

好链接：

*   [http://www.willamette.edu/~gorr/classes/cs231/lectures/chapter9/arrays2d.htm](http://www.willamette.edu/~gorr/classes/cs231/lectures/chapter9/arrays2d.htm)

向下滚动到“对象数组”部分。

'希望有帮助！

# javascript - 使用javascript刷新页面时防止提交页面

> ID：13149784
> 
> 赞同：0
> 
> 时间：2012-10-31T00:58:37.383
> 
> 标签：javascript

如何使用 javascript 强制刷新页面？但是没有重新提交表格或阻止确认消息说重新发送我之前提交的信息。

![刷新](../Images/36b438b9ff11d472827c3492b4610f78.png)

我需要完成此操作以防止重复输入记录。提前致谢。

我正在使用 window.location.reload()

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T01:01:59.693

`window.location.reload(true)`您可以使用or强制更改方法获取`window.location.href = window.location.href`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T01:00:49.680

您的上一页是 POST 操作的结果。

最佳实践是在发布后执行 HTTP 302 重定向到“干净”的 URL（例如 GET）。

这可以确保 post 操作不会意外执行两次，并且警告会消失。

# wpf - 空列表视图上的行分隔符

> ID：13149786
> 
> 赞同：0
> 
> 时间：2012-10-31T00:58:43.330
> 
> 标签：wpf

`ListView`即使默认行分隔符为空，我如何才能在默认情况下启用默认行分隔符？

默认情况下它是空的。我必须为此做任何风格吗？

# ruby-on-rails - 在 Ruby On Rails 中，如何删除与特定控制器相关的视图

> ID：13149789
> 
> 赞同：0
> 
> 时间：2012-10-31T00:58:50.053
> 
> 标签：ruby-on-rails

例如，我在项目的早期创建了这个 post_controller，但我决定稍后将其销毁。

然后我用

```
rails destroy controller post_controller 
```

卸下控制器。但我也想删除附加到这个控制器的视图。在这种情况下，它们是 app/views/post 文件夹中的 erb 文件。如何删除那些 erb 文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T01:05:01.970

您可以运行`rails d scaffold post`，但要注意这将破坏其余的脚手架元素，包括任何模型/路线/资产等。以下是它将破坏的完整列表：

```
⌘ ~/testapp/ rails d scaffold post
  invoke  active_record
  remove    migration.rb
  remove    app/models/post_controller.rb
  invoke    test_unit
  remove      test/unit/post_controller_test.rb
  remove      test/fixtures/post_controllers.yml
  invoke  resource_route
   route    resources :post_controllers
  invoke  scaffold_controller
  remove    app/controllers/post_controllers_controller.rb
  invoke    erb
  remove      app/views/post_controllers
  remove      app/views/post_controllers/index.html.erb
  remove      app/views/post_controllers/edit.html.erb
  remove      app/views/post_controllers/show.html.erb
  remove      app/views/post_controllers/new.html.erb
  remove      app/views/post_controllers/_form.html.erb
  invoke    test_unit
  remove      test/functional/post_controllers_controller_test.rb
  invoke    helper
  remove      app/helpers/post_controllers_helper.rb
  invoke      test_unit
  remove        test/unit/helpers/post_controllers_helper_test.rb
  invoke  assets
  invoke    coffee
  remove      app/assets/javascripts/post_controllers.js.coffee
  invoke    scss
  remove      app/assets/stylesheets/post_controllers.css.scss
  invoke  scss 
```

**编辑：**

澄清一下，`rails d`只是`rails destroy`. 它也可以用作`rails generate`/ `rails g`。

# python - Django 静态 URL 无法正确呈现图像

> ID：13149791
> 
> 赞同：0
> 
> 时间：2012-10-31T00:58:57.027
> 
> 标签：python, html, django, url, static

我正在编写一个在页面上显示一组图像的视图。

这是模型

```
#models.py
class Movie(models.Model):
    title  = models.CharField(max_length = 500)
    poster = models.ImageField(upload_to = 'qanda/static/movie_posters')

#index.html
    <img src = "{{ STATIC_URL }}movie_posters/{{ movie.poster }}"></a> 
```

当我运行服务器时，图像没有出现。图片试图加载的 URL 是

```
http://127.0.0.1:8000/static/movie_posters/qanda/static/movie_posters/image.jpg 
```

当它应该尝试加载的 URL 是

```
http://127.0.0.1:8000/static/movie_posters/image.jpg 
```

我的假设是由于movie.poster位于'qanda/static/movie_posters'，当我在HTML上渲染它时，它正在加载静态URL（127.0.0:8000/static），然后是'qanda/static/最后是电影海报。如何正确渲染图像？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-31T01:25:59.303

图片 url 的计算方式有两种。

首先在`settings.py`你定义`MEDIA_ROOT`. `MEDIA_ROOT`指定计算机上将存储媒体的绝对文件夹。例如，对于这些设置：

```
MEDIA_ROOT = '/abs/path/to/media/' 
```

如果你有一个领域

```
models.ImageField(upload_to='movie_posters') 
```

然后图像将存储在：

```
/abs/path/to/media/movie_posters/
/abs/path/to/media/movie_posters/poster.jpg <- example 
```

这涉及媒体在硬盘上的存储位置。

第二部分是如何计算这些媒体文件的 url。为此，您`MEDIA_URL`在`settings.py`. 这实际上将 URL 映射到您的`MEDIA_ROOT`位置。那么，如果您`MEDIA_URL`是：

```
MEDIA_URL = 'http://localhost/media/' 
```

然后，如果您要访问存储的图像，`movie_posters/poster.jpg`其绝对路径为`/abs/path/to/media/movie_posters/poster.jpg`，则其 URL 应为`http://localhost/media/movie_posters/poster.jpg`。您可以通过执行以下操作来计算 URL：

```
{{ MEDIA_URL }}{{ movie.poster }} 
```

请注意，我使用`MEDIA_URL`的是`STATIC_URL`. 这些不是一回事。然而，像这样计算 url 并不是很整洁。这就是为什么 Django`ImageField`有`FileField`一个`url`属性：

```
{{ movie.poster.url }} 
```

然后，Django 将根据您的`MEDIA_URL`设置计算正确的 url。

**笔记：**

要使所有这些工作，您必须运行一个单独的媒体服务器。Django 不提供任何媒体文件。在开发中，它只能提供静态文件（与媒体文件不同）。因此，在开发中提供媒体文件的一个好技巧是使用 Python 的简单 Web 服务器。为此，请打开一个新终端（在 Linux 和 Mac 上）或命令提示符（在 Windows 上）窗口/选项卡并导航到您的媒体文件夹。然后只需在那里执行以下命令：

```
python -m SimpleHTTPServer 8090 
```

并确保您的设置是：

```
MEDIA_URL = 'http://localhost:8090/' 
```

然后 Python 将为您的媒体文件提供服务。这对开发很有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T05:51:25.497

如果您只想使用开发服务器来提供媒体服务，您可以暂时将其添加到您的 urls.py

```
urlpatterns = patterns( ...all your awesome urls...) + static(settings.MEDIA_URL, document_root=settings.MEDIA_ROOT) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T01:44:56.923

您可以定义一个自定义模板标记，该标记返回 URL 的基本名称，如下所示：

```
from django import template
import os

register = template.Library()

@register.filter
def getBasename(myURL):
   return os.path.basename(myURL) 
```

这应该放在应用程序的*templatetags*目录中的自定义模板标签（例如 customTemplateTags.py）文件中。

然后您可以使用过滤器来仅获取图像文件名，而不是整个 URL。

```
{% load customTemplateTags %}
<img src = "{{ STATIC_URL }}movie_posters/{{ movie.poster.url|getBasename }}"></a> 
```

# qt - 如何结合 QImage 和 QPixmap？

> ID：13149793
> 
> 赞同：0
> 
> 时间：2012-10-31T00:59:01.283
> 
> 标签：qt, pyqt, qpainter

我正在使用 PyQt，并且已将图像从磁盘加载到`QPixmap`. 我还创建了一个面具，使用：

```
self.mask = QImage(self.image.width(), self.image.height(), QImage.Format_Mono)
self.mask.fill(0) 
```

我想将两者结合起来进行显示，这样当我渲染它时，遮罩中的任何黑色像素都会在图像上以半透明的红色绘制。

我创建了一个自定义小部件，它在绘制事件中呈现图像，如下所示：

```
def paintEvent(self, event):
    p = QPainter(self)
    r = event.rect()

    p.drawPixmap(r, self.image, r) 
```

这工作正常。我不太清楚的是如何获取蒙版中的数据并仅在目标图像中的那些像素上绘制半透明红色。

我尝试将蒙版变成剪切区域，如下所示：

```
mask = QPixmap.fromImage(self.mask.createMaskFromColor(self.mask.color(0)))
p.setClipRegion(QRegion(mask))

color = QColor(255, 0, 0, 128)
p.setPen(Qt.NoPen)
p.setBrush(QBrush(color))
p.drawRect(r) 
```

...但它不绘制任何东西（如果我不调用，它会在整个图像上绘制一个半透明的红色框`setClipRegion`）。

我还尝试将蒙版创建为`QImage.Format_ARGB4444_Premultiplied`, 并使用透明度。虽然这确实有效，但我可以在我的程序中编辑遮罩（并验证遮罩的某些部分是透明的，而某些部分是不透明的）该`self.mask.createAlphaMask()`方法返回一个纯白色矩形。

“创建掩码”方法实际上有什么作用吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T00:42:00.893

要么改变你的面具的设计，要么根据你的面具创建一个新的 QImage。然后在目的地上绘制 QImage。它不仅是一种有效的方法，而且是一种比绘制单个像素或某事更快的方法。相似的。我尝试了几种方法，这是迄今为止最快的（在 QGLWidget 上）。

这个想法是您直接在 QImage 中编码透明度以及未标记的像素，如下所示：

```
QImage dest(<width>, <height>, QImage::Format_ARGB32);
dest.fill(qRgba(0, 0, 0, 0));
for (int y = 0; y < <height>; ++y) {
    QRgb *destrow = (QRgb*)dest.scanLine(y);
    for (int x = 0; x < <width>; ++x) {
        if (<should be marked>)
            destrow[x] = qRgba(255, 0, 0, 127);
    }
}
painter.drawImage(0, 0, dest); 
```

作为参考，请查看此处的代码：

[https://sourceforge.net/p/gerbil/svn/60/tree/trunk/gerbil-gui/bandview.cpp#l59](https://sourceforge.net/p/gerbil/svn/60/tree/trunk/gerbil-gui/bandview.cpp#l59)

# matlab - 如何从矩阵中“按列分组”行？

> ID：13149795
> 
> 赞同：0
> 
> 时间：2012-10-31T00:59:08.057
> 
> 标签：matlab

我正在尝试从矩阵中“按列分组”数据。

数据是从数据库中提取的，矩阵如下所示：

```
'2012-04-26'    'USD'    'BRL'    [    1.8894]
'2012-04-26'    'USD'    'IDR'    [      9185]
'2012-04-26'    'USD'    'INR'    [   52.5350]
'2012-04-26'    'USD'    'MXN'    [   13.2337]
'2012-04-26'    'USD'    'PEN'    [    2.6505]
'2012-04-26'    'USD'    'SGD'    [    1.2412]
'2012-04-26'    'USD'    'TRY'    [    1.7643]
'2012-04-27'    'USD'    'BRL'    [    1.8846]
'2012-04-27'    'USD'    'IDR'    [      9189]
'2012-04-27'    'USD'    'INR'    [   52.5600]
'2012-04-27'    'USD'    'MXN'    [   13.0147]
'2012-04-27'    'USD'    'PEN'    [    2.6395]
'2012-04-27'    'USD'    'SGD'    [    1.2385]
'2012-04-27'    'USD'    'TRY'    [    1.7600] 
```

（这是一个单元阵列）

我想要做的是按日期（第一行）对所有数据进行分组，然后为每个值设置一列，如下所示：

```
'2012-04-26'    [    1.8894]    [      9185]    [   52.5350]    [   13.2337]    [    2.6505]    [    1.2412]    [    1.7643]    
'2012-04-27'    [    1.8846]    [      9189]    [   52.5600]    [   13.0147]    [    2.6395]    [    1.2385]    [    1.7600] 
```

其中每一行代表一个货币对 (USD/BRL, USD/IDR, USD/INR, ...)

请注意，对于每个日期，它们在提取的数据中的行数（货币对）完全相同。

在 Matlab 中是否有一种优雅（且快速）的方法来实现这一点？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T01:28:43.873

鉴于您强调速度在问题中很重要，我提出以下解决方案：

```
%# Build an example cell array 
D = cell(6, 4);
for t = 1:3; D{t, 1} = '2012-04-26'; D{t, 2} = 'A'; D{t, 3} = 'A'; D{t, 4} = t; end;
for t = 4:6; D{t, 1} = '2012-04-27'; D{t, 2} = 'A'; D{t, 3} = 'A'; D{t, 4} = t; end;

%# My Solution
X = [datenum(D(:, 1), 'yyyy-mm-dd'), cell2mat(D(:, 4))];
[UniqueDate, ~, Index] = unique(X(:, 1));
NumObsPerDay = sum(Index == 1);
NumDay = length(UniqueDate);
Soln = [UniqueDate, reshape(X(:, 2), NumObsPerDay, NumDay)']; 
```

在第一行中，我将重要的数据提取到一个数值数组中。数值数组比元胞数组操作起来要快得多，因为单个元素占用的内存要少得多。为了处理日期字符串，我在第一步将它们转换为 matlab[数字日期格式](http://www.mathworks.com.au/help/matlab/ref/datenum.html)。如果您打算大量使用 Matlab，我建议您熟悉数字日期格式，因为它比使用字符串更灵活 - 例如，您可以对数字日期格式执行任何类型的算术运算。

在第二行，我得到一个唯一的日期列表和一个索引。

在第三行和第四行中，我使用索引来获取您拥有数据的天数以及每天的观察次数。**注意**：这条线`NumObsPerDay = sum(Index == 1);`隐含地假设您每天有相同数量的观察值（即其他货币）。但是，您在问题中声明是这种情况，所以我相信您的话:-)

In the fifth line, I create a numerical matrix that has the format you desire. The first column is the unique date vector obtained in line 2, and I've obtained the remaining columns by reshaping the data in `X`. **CAUTION**: This line implicitly assumes that the ordering of the currencies in your cell array are identical for each day. Again, I've made this assumption because it is true in your sample data and you stated you wanted a fast solution.

**FINAL CAUTION:** If either of the assumptions made above are violated then this code will fail, or your data will get mixed up. In other words, if you're certain that all your data conforms to the sample you provided, then this solution should serve, and should also be fast. But if you're not certain, then this is not a good solution for you.

ps if you want to see the dates in string format again, just use `datestr(Soln(:, 1), 'yyyy-mm-dd');`

# c - 通过消息队列发送缓冲区

> ID：13149796
> 
> 赞同：2
> 
> 时间：2012-10-31T00:59:28.630
> 
> 标签：c, linux, pointers, ipc, message-queue

嗨，我正在编写一个通过消息队列发送一组字节的程序，就像这样......

```
#include <sys/msg.h>
#include <stddef.h>

key_t key;
int msqid;
struct pirate_msgbuf pmb = {2, { "L'Olonais", 'S', 80, 10, 12035 } };

key = ftok("/home/beej/somefile", 'b');
msqid = msgget(key, 0666 | IPC_CREAT);

/* stick him on the queue */
msgsnd(msqid, &pmb, sizeof(struct pirate_msgbuf) - sizeof(long), 0); 
```

上面的例子是一个来自beejs网站的简单程序，类似于我的。

然而，我正在做的是发送一条带有这样结构的消息......

```
struct msg_queue{

    long message_type;
    char * buffer;

} 
```

现在，在我发送我的 msg_queue 之前，我创建了一些替代缓冲区，其中包含各种信息，包括空字符等。现在当我做这样的事情时......

```
struct msg_queue my_queue;
my_queue.message_type = 1;
my_queue.buffer = "My message";
msgsnd(mysqid, &pmb, sizeof(struct msg_queue) - sizeof(long), 0); 
```

我接收指针和读取存储在该字符串中的值没有问题。但是，如果我要做类似的事情......

```
struct msg_queue my_queue;
my_queue.message_type = 1;
my_queue.buffer = sum_buffer_with_lots_of_weird_values; // of type char *
msgsnd(mysqid, &pmb, sizeof(struct msg_queue) - sizeof(long), 0); 
```

我通过队列传递给其他进程的指针将读取垃圾而不是存储的值。我尝试将我的任意数组设为静态字符 *，但这也无济于事。如何通过队列正确传递缓冲区？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T01:06:23.553

您不应该向另一个进程发送指针，它们在另一个进程的地址空间中没有意义（或指向非常不同的东西）。

消息队列不适用于可变长度字符串等无限数据。将指针更改为足够大以容纳最大字符串的固定长度 char 数组，并在写入队列之前将字符串复制到数组中。或者使用其他类型的 IPC，例如域套接字。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T08:50:06.110

消息队列用于进程间通信。当您在一个进程中 malloc 一些内存时，它只存在于该进程的内存空间中，其他进程无法访问。

当您发送该指针时，您正在发送一个不可访问的地址空间。它甚至可能导致分段错误。

一种方法是限制缓冲区大小（如果适用）。

结构 msg_queue{

```
long message_type;
char buffer[MAX_LEN]; 
```

}

另一种方法是发送2次。第一个 msgsnd 发送期望的缓冲区大小。下一次发送，您使用第一次发送的大小发送 char 数组。:)

在接收端，您首先获取大小，然后接收缓冲区。

其他方法是使用管道或套接字。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T01:06:38.240

“msgsend()”只会读取缓冲区中的字节。

如果其中一个字节碰巧是一个指针（指向其他地方的某个字符串或对象）......猜猜是什么 - 接收者只会得到二进制指针。不是指向的数据。

您需要做的是将消息的*全部*内容打包到缓冲区中，然后发送该线性缓冲区。

# c# - c# dispatcher timer 和 System.TImers.Timer 过早触发

> ID：13149797
> 
> 赞同：1
> 
> 时间：2012-10-31T00:59:38.273
> 
> 标签：c#, timer, dispatchertimer

我在 msdn 上读到，虽然计时器不能保证以确切的间隔（在我的情况下为 1 秒）触发，但它们不会在间隔*之前*触发。

一台电脑上的计时器工作正常（Windows 7），而另一台电脑（Windows Server 2003）上的每个`0.99999936 seconds`.

我真的很感兴趣为什么会这样。

我注意到了这一点，因为我有代码计数秒到`newSeconds = newSeconds + delta.Seconds` Where `delta`is`DateTime.Now - lastTime`

秒部分显示`1`在 Windows 7 和`0`Windows Server 2003 上。

解决方案是 read `totalseconds`，但我仍然想知道为什么它之前会触发。

谁能详细说明这一点？

## 编辑

我实际上在两个不同的 Windows 2003 电脑上发生了这种情况。我想更深入地了解操作系统之间是否存在差异，.net framework 4 对于 7 和 2003 是否不同？或者人们可能知道的任何其他偏差？计时器是如何实现的，可能是硬件相关问题吗？

与此相反： [C# 计时器在它们的间隔时间之前被触发，](https://stackoverflow.com/questions/2432160/c-sharp-timer-getting-fired-before-their-interval-time) 我一直在发生它，在每个滴答声中。无需长时间运行。谢谢

## 编辑

```
public void OnTick(object sender, EventArgs e)
{
    var delta = DateTime.Now - _lastTime;

    DoStuff

    _lastTime = DateTime.Now
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T01:52:15.403

这一行：

```
newSeconds = newSeconds + delta.Seconds 
```

可能而且可能会越来越远离真正的衡量标准。想象一下用尺子测量 1 英里：你最终会飘走。

实际的时间差异可能是事件触发与您获取时间之间的一小段时间的结果。在这两点之间必须有几个 CPU 周期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T01:59:19.107

我建议您使用响应式扩展。[阅读这篇博](http://blogs.msdn.com/b/rxteam/archive/2012/06/20/reactive-extensions-v2-0-release-candidate-available-now.aspx)文中的“时间到了”一章。

# codeigniter - 如何从 codeigniter 中的库访问（wanwizards）Datamapper？

> ID：13149798
> 
> 赞同：0
> 
> 时间：2012-10-31T00:59:41.490
> 
> 标签：codeigniter, libraries, codeigniter-datamapper

我在一个空的 codeigniter 设置中安装了 Wanwizard 的 Datamapper (http://datamapper.wanwizard.eu)。

我在控制器中使用 datamapper 没有问题，但是当我尝试在我的库中调用 datamapper 对象时。

我收到错误：致命错误：找不到类“用户”。

这是我的图书馆代码：

```
class Auth {

    protected $ci;

    public function __construct()
    {
        $this->ci =& get_instance();
        $this->ci->load->library('datamapper');
    }

    public function signup( $username, $email, $password )
    {   
        $user = new User();
    }
} 
```

有谁知道在库中调用这些数据映射器对象的正确方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-14T08:05:58.460

您可能已经解决了这个问题。对于未来访问这里的人们：

正如 WanWizard 指出的那样，问题是：

1.  您没有在以下位置自动加载数据映射器`application/config/autoload.php`： `$autoload['libraries'] = array('database', 'datamapper');`

2.  该`application/models`文件夹不包含`User.php`文件。

3.  该`User.php`文件不包含`class User extends Datamapper{}`.

另外——Linux 是一个区分大小写的操作系统，在命名文件时请注意遵循 Datamapper 和 CodeIgniter 文档中使用的大小写。

# sublimetext2 - 自定义布局，崇高文本 2

> ID：13149800
> 
> 赞同：22
> 
> 时间：2012-10-31T00:59:57.130
> 
> 标签：sublimetext2, sublimetext

到目前为止，我一直在使用一个 2 列系统，但我觉得我需要第三个，并且在不每次调整宽度的情况下，在屏幕上分布的 3 并不能提供太多视图。

有一种方法可以获得网格布局，但屏幕的下半部分只有一个文件。我知道这是一个很长的镜头，但想知道是否有人知道任何事情 ![当前系统](../Images/28398847001873fca7669a4fd06fb9f8.png)

发现您可以在 Packages/default/Main.sublime-menu 中编辑自定义布局虽然保存有问题`error in trying to parse file: expected value in ~/library/application support/sublime text 2/packages/default/Main.sublime-menu:407:21`

**编辑：为了更好的布局**

发现了一些类似的东西，一直在尝试修改它，但不明白细胞是如何工作的

这个类似

```
"args":
{
    "cols": [0.0, 0.5, 1.0],
    "rows": [0.0, 0.5, 1.0],
    "cells": [
        [0, 0, 1, 2], // (0.0, 0.0) -> (0.5, 1.0)
        [1, 0, 2, 1], // (0.5, 0.0) -> (1.0, 0.5)
        [1, 1, 2, 2]  // (0.5, 0.5) -> (1.0, 1.0)
    ]
} 
```

这使

[![代码](../Images/5d682750f73005f68550fad154c342e5.png)](https://i.stack.imgur.com/zK7ZX.png)

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-10-31T21:17:56.013

假设这些只是左上角 0,0 的坐标，这样的事情应该可以工作：

```
[0, 0, 1, 1],
[1, 0, 2, 1],
[0, 1, 2, 2] 
```

**编辑**：刚刚测试过，确实如此。

在 Packages > User 文件夹中创建`Main.sublime-menu`文件（最好保留默认菜单）并将以下代码放入其中：

```
[{
    "id": "view",
    "children": [{
        "id": "layout",
        "children": [{
             "command": "set_layout",
             "caption" : "Custom: 3 Pane",
             "mnemonic": "C",
             "args": {
                "cols": [0.0, 0.5, 1.0],
                "rows": [0.0, 0.5, 1.0],
                "cells": [
                    [0, 0, 1, 1],
                    [1, 0, 2, 1],
                    [0, 1, 2, 2]
                ]
            }
        }]
    }]
}] 
```

您将`Custom: 3 Pane`在布局选项中看到。无需重新启动 Sublime Text。

对于任何感兴趣的人，[这里有一个](https://gist.github.com/4073661)包含此布局以及翻转版本的要点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-05T19:39:18.700

这对于可视化坐标所指的点非常有帮助：[http ://www.sublimetext.com/forum/viewtopic.php?f=6&t=7284&start=0&hilit=set+layout](http://www.sublimetext.com/forum/viewtopic.php?f=6&t=7284&start=0&hilit=set+layout)

# java - Internet Explorer 中的货币格式日元有额外的符号“ï¿¥”

> ID：13149803
> 
> 赞同：0
> 
> 时间：2012-10-31T01:00:20.923
> 
> 标签：java, internet-explorer, jsp, character-encoding

我只是在使用：

```
NumberFormat cfLocal = NumberFormat.getCurrencyInstance(Locale.JAPAN.toString()); 
```

它在大多数设备/浏览器/货币上都能正常工作，除了在 IE 和日元中我得到了一些额外的字符 - 可能是一个奇怪的编码被发送，或者浏览器特定的设置搞砸了 ¥ 符号的处理？

输出如下所示：

> ï¿¥15,180

将不胜感激任何线索或提示。

**编辑：** 我正在使用 JSP 输出值。JSP 文件是用这个序言定义的：

```
<?xml version="1.0" encoding="ISO-8859-1" ?>
<%@ page language="java" contentType="text/html; charset=UTF-8"
pageEncoding="UTF-8"%> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T02:33:03.260

我不是编码专家，但您的 XML 似乎说一件事，而您的内容类型说另一件事 - 尝试将两者都设置为 UTF-8。

如果您的数据来自应用程序外部（例如数据库、文件等），源的编码是什么？例如，MySQL 数据库可能指定了不同的字符集。

如果您使用的是 Apache 之类的 Web 服务器，是否会更改编码？例如，您可以使用 httpd.conf 指令来设置默认字符集：

```
AddDefaultCharset utf-8 
```

值得检查浏览器中的 HTTP 标头以查看实际发送到浏览器的内容，然后从那里返回。

编辑

再想一想，我不确定 XML 编码是否一定是问题所在。最好先检查标题，然后将其与生成的 html 进行比较。

# javascript - 基于 jQuery 循环插件的幻灯片无法正确调整到屏幕宽度

> ID：13149805
> 
> 赞同：0
> 
> 时间：2012-10-31T01:00:42.783
> 
> 标签：javascript, jquery, slideshow, cycle, easing

我将 jQuery 循环幻灯片添加到我的网站。我的幻灯片可以正常工作，但宽度是个大问题。宽度不适应屏幕，它只是取图像的宽度（最大）并显示它。我的大显示器可以毫无问题地显示所有内容，因为图像恰好与那个一样宽，但我的小显示器显示水平滚动条并且图像不会调整大小。

是否有针对此的特定修复，或者我应该尝试手动修复它？就像，在滚动和页面加载时添加检测选项，以便将 $(document).width() 添加到幻灯片中。或者也许是更好的方法？请帮助我，到目前为止，我已经尝试了所有我想到的东西。欢迎新的想法。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T01:13:50.133

我认为您应该尝试响应式幻灯片而不是 Cycle。这可能会有所帮助：[http ://webdesignandsuch.com/top-30-responsive-jquery-slider-plugins-for-websites/](http://webdesignandsuch.com/top-30-responsive-jquery-slider-plugins-for-websites/)

# opencv - SIFT 特征检测器产生未处理的异常

> ID：13149807
> 
> 赞同：0
> 
> 时间：2012-10-31T01:00:52.327
> 
> 标签：opencv, sift

下面的代码只是为了查看 SIFT 中的特征检测。问题是当我运行它时它会中断。

```
#include <features2d.hpp>
#include <stdafx.h>
#include <stdlib.h>
#include <cv.hpp>
#include <cxcore.hpp>
#include <highgui.h>
#include <iostream>

using namespace cv;
using namespace std;

int _tmain(int argc, _TCHAR* argv[])
{
    Mat img = imread("c:\\chappal.jpg", 0);
    Ptr<FeatureDetector> feature_detector = FeatureDetector::create("SIFT");
    vector<KeyPoint> keypoints;

    feature_detector->detect(img, keypoints);

    Mat output;

    drawKeypoints(img, keypoints, output, Scalar(255, 0, 0));

    namedWindow("meh", CV_WINDOW_AUTOSIZE);
    imshow("meh", output);
    waitKey(0);

    return 0;
} 
```

当逐步调试时，程序在这一行中断：`feature_detector->detect(img, keypoints);`

我一遍又一遍地检查它，不知道问题可能是由什么引起的。

PS我第一次尝试`SiftFeatureDetector`代替但出现错误，因为它在库文件中`FeatureDetector::create("SIFT");`找不到。`SiftFeatureDetector`我从这个论坛上的帖子中了解了这两个代码示例。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-21T18:46:45.357

我不知道你有没有试过，但由于它现在在 nonfree.h 库中，你需要使用 initModule_nonfree()。这为我解决了问题。

# java - 如何从动态创建的 EditTexts 中获取输入？

> ID：13149809
> 
> 赞同：1
> 
> 时间：2012-10-31T01:01:10.563
> 
> 标签：java, android, arraylist, android-edittext

我有一个`Button`添加一行`EditText`到一个`TableLayout`。我需要找出`EditText`添加的每一行中的输入。

例如：某人添加了 3 行，表示有 3 行`EditText`。在每个`EditText`中，他们输入数字 3。我需要存储`EditText`添加到布局中的值，并通过单击按钮将它们全部添加。

我会使用一个列表然后迭代该列表吗？我不确定我将如何做到这一点。

到目前为止，这是我的代码...

```
int count = 1;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);       
    setContentView(R.layout.activity_main);
    getSavedState();

    Button buttonAdd = (Button) findViewById(R.id.button1);
    Button buttonDel = (Button) findViewById(R.id.button2);
    Button buttonCalc = (Button) findViewById(R.id.button3);
    buttonAdd.setOnClickListener(this);
    buttonDel.setOnClickListener(this);
}

public void onClick(View v) {
    TableLayout tableLayout1 = (TableLayout) findViewById(R.id.tableLayout1);
    List<EditText> allEd = new ArrayList<EditText>();

    switch(v.getId()){
        case R.id.button1:
            if(count != 16){
                count++;

                // Create the row only when the add button is clicked
                TableRow tempRow = new TableRow(MainActivity.this);
                EditText tempText1 = new EditText(MainActivity.this);
                EditText tempText2 = new EditText(MainActivity.this);
                TextView tempTextView = new TextView(MainActivity.this);
                EditText editText1 = (EditText) findViewById(R.id.editText1);
                EditText editText2 = (EditText) findViewById(R.id.editText2);
                TextView textView3 = (TextView) findViewById(R.id.textView3);
                tempTextView.setText(count + ".");

                tempRow.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));
                tempText1.setLayoutParams(editText1.getLayoutParams());
                tempText2.setLayoutParams(editText2.getLayoutParams());
                tempTextView.setLayoutParams(textView3.getLayoutParams());
                tempText1.setInputType(InputType.TYPE_CLASS_TEXT);
                tempText2.setInputType(InputType.TYPE_CLASS_NUMBER | InputType.TYPE_NUMBER_FLAG_DECIMAL);
                tempText2.setId(count);
                allEd.add(tempText2);

                tempRow.addView(tempTextView);
                tempRow.addView(tempText1);
                tempRow.addView(tempText2);
                tableLayout1.addView(tempRow);
            } 
            else {
                final AlertDialog alertDialog = new AlertDialog.Builder(MainActivity.this).create(); //Read Update
                alertDialog.setTitle("Error");
                alertDialog.setMessage("You can only have 10 rows!");

                alertDialog.setButton("Ok", new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int which) {
                        alertDialog.dismiss();
                    }
                });

                alertDialog.show();
            }
            break;
        case R.id.button2:
            if(count != 1){
                count--;
                tableLayout1.removeView(tableLayout1.getChildAt(count));
        } 
            else {
                final AlertDialog alertDialog = new AlertDialog.Builder(MainActivity.this).create(); //Read Update
                alertDialog.setTitle("Error");
                alertDialog.setMessage("You must have at least one row!");

                alertDialog.setButton("Ok", new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int which) {
                        alertDialog.dismiss();
                    }
                });

                alertDialog.show();
            }
            break;
        case R.id.button3:
            String[] strings = new String[allEd.size()];
            for(int i = 0; i < allEd.size(); i++) {
                strings[i] = allEd.get(i).getText().toString();
                int input = Integer.parseInt(strings[i]);

                final AlertDialog alertDialog = new AlertDialog.Builder(MainActivity.this).create(); //Read Update
                alertDialog.setTitle("Your calculated GPA");
                alertDialog.setMessage("Your calculated GPA is: " + input/count);
                alertDialog.setButton("Ok", new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int which) {
                        alertDialog.dismiss();
                    }
                });

                alertDialog.show();
            }
        break;

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T01:05:04.797

您需要保留对`EditText`每次按下按钮时添加的 s 的引用。由于你不知道会添加多少，我建议使用 a`List<EditText>`来存储它们。将其设为成员变量，然后您可以从`EditText`列表中的 s 访问输入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T01:22:30.640

当您创建每个`EditText`s 时，您需要将它们添加到类似数组的容器中，例如`ArrayList<EditText>`. 每当您需要访问这些动态`EditText`s 中的任何一个时，您都可以从`ArrayList`.

我可以看到您已经`ArrayList<EditText>`在您的`onClick()`方法中创建了一个。这很好，但是您需要将方法移到`ArrayList`外部，`onClick()`以便可以从您创建的任何其他方法中引用它。所以移动这条线......

```
List<EditText> allEd = new ArrayList<EditText>(); 
```

在方法之外，所以现在的开头几行`onClick()`看起来像这样......

```
List<EditText> allEd = new ArrayList<EditText>();

public void onClick(View v) {
    TableLayout tableLayout1 = (TableLayout) findViewById(R.id.tableLayout1);

    switch(v.getId()){
    case R.id.button1: 
```

另外，请确保您将所有`EditText`s 添加到`ArrayList`- 我看到有一行`allEd.add(tempText2);`但我看不到任何行`allEd.add(tempText1);`- 如果您需要访问`tempText1`，请确保将其添加到列表中。

要执行“加法”计算，您需要遍历 中的条目`ArrayList`，获取它们的值，然后将它们相加。像这样的东西...

```
case R.id.button3:
    // calculate the value first
    int calculation = 0;
    for (int i=0;i<allEd.size();i++){
        // get the entry
        EditText textField = addEd.get(i);

        try {
            // get the value, as a number
            int numberValue = Integer.parseInt(textField.getText());
            // add it to the calculation
            calculation += numberValue;
        } 
        catch (Exception e){
            // ignore errors if the input is empty or isn't a number
        }
    }

    // now display the result
    final AlertDialog alertDialog = new AlertDialog.Builder(MainActivity.this).create();
    alertDialog.setTitle("Your calculated GPA");
    alertDialog.setMessage("Your calculated GPA is: " + input/count);
    alertDialog.setButton("Ok", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int which) {
            alertDialog.dismiss();
        }
    });

    alertDialog.show();
break; 
```

# php - PHP Imagick 无法设置图像背景颜色

> ID：13149812
> 
> 赞同：2
> 
> 时间：2012-10-31T01:02:06.650
> 
> 标签：php, background-color, imagick

我加载透明的png图像，每次我尝试使用`setimagebackgroundcolor()`它设置bg颜色时仍然透明

```
 $input_img = new Imagick();

    $input_img->setBackgroundColor("#ff0000");

    $input_img->readImage("transparent.png");

    $input_img->setimagebackgroundcolor("#00ff00");

    $input_img->setImageFormat("png");

    $input_img->setimagebackgroundcolor("#ff00ff");

    $input_img->writeimage("image.png"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-15T10:05:59.840

代码的第一行为颜色设置了一个新的 Imagickpixel 对象。第二行创建一个新框架，1920 和 1200 是当然的尺寸。

```
$color = new ImagickPixel("white");

$input_img->newImage(1920,1200, $color) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-03T11:03:38.230

诀窍是使用`$im = $im->flattenImages();`：

```
<?php
$im = new Imagick($filename);

$im->setImageBackgroundColor('#ffffff');
$im = $im->flattenImages();

$im->setImageFormat("jpeg");
$im->setImageCompressionQuality(95);
$im->writeImage($filename); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-19T14:51:34.817

尝试这个！

```
$imput_img->setBackgroundColor(new ImagickPixel('blue')); 
```

# php - 混合两种颜色（GD）

> ID：13149816
> 
> 赞同：2
> 
> 时间：2012-10-31T01:02:32.520
> 
> 标签：php, colors, gd

例如：

```
$im = imagecreatefrompng("php.png");
$rgb = imagecolorat($im, 10, 15);
$r = ($rgb >> 16) & 0xFF;
$g = ($rgb >> 8) & 0xFF;
$b = $rgb & 0xFF; 
```

（来自 PHP 文档）

我要添加的颜色：

```
$r2 = rand(0, 255);
$g2 = rand(0, 255);
$b2 = rand(0, 255);

$color = imagecolorallocatealpha($im, $r2, $g2, $b2, 0);        
imagesetpixel($im, 10, 15, $color); 
```

所以原来的颜色 ($r, $g, $b) 被新颜色 ($r2, $g2, $b2) 替换。

但是我怎样才能只*添加*一定数量的$r2，$g2，$b2，而不是完全替换。

所以如果原始颜色是红色，而我生成的第二个随机颜色是绿色，我只想添加第二个颜色的 10% 或 15%。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T01:22:00.667

我还没有真正做太多的图像处理，所以这只是一个长镜头，但你不能做这样的事情：

```
function addPercentageToNumber($number, $minPercentage, $maxPercentage) {
   return $number + rand( ($number / 100) * $minPercentage, ($number / 100) * $maxPercentage  );
}

// Base color
$r2 = rand(0, 255);

// Add 10-20%
$r2 = addPercentageToNumber($r2, 10, 20); 
```

您还需要添加一些代码来处理结果会发生的情况`>255`等等。希望这至少对您有所帮助。:-)

# java - 如何创建机器人测试套件？

> ID：13149817
> 
> 赞同：3
> 
> 时间：2012-10-31T01:02:36.840
> 
> 标签：java, android, testing, junit, robotium

使用下面的代码，测试不会按我想要的顺序执行。test_homescreen 在 test_splashscreen 之前执行。

我想指定要运行的测试及其执行顺序。我相信我需要创建一个测试套件，但我不知道如何实现它。

```
package com.myapp.test;
import com.jayway.android.robotium.solo.Solo;
import android.test.ActivityInstrumentationTestCase2;
import com.myapp.R;

public class myTest extends ActivityInstrumentationTestCase2{

    private static final String TARGET_PACKAGE_ID="com.myapp.test";
    private static final String LAUNCHER_ACTIVITY_FULL_CLASSNAME="com.myapp.gui.SplashScreen";
    private static Class launcherActivityClass;
    static{
        try
        {
            launcherActivityClass=Class.forName(LAUNCHER_ACTIVITY_FULL_CLASSNAME);
        } catch (ClassNotFoundException e){
            throw new RuntimeException(e);
        }
    }
    public myTest ()throws ClassNotFoundException{
        super(TARGET_PACKAGE_ID,launcherActivityClass);
    }
    private Solo solo;

    @Override
    protected void setUp() throws Exception{
        solo = new Solo(getInstrumentation(),getActivity());
    }

    public void test_splashscreen() throws InterruptedException {
        TextView splashAppVersion = (TextView) solo.getView(R.id.AppVersion); 
        assertTrue(splashAppVersion.isShown());     
    }

    public void test_homescreen() throws InterruptedException {
        ListView lv = (ListView) solo.getView(R.id.List);
        assertTrue(lv.isShown());
        }   

    @Override
    public void tearDown() throws Exception {
        try { 
            solo.finishOpenedActivities();    
        } catch (Throwable e) { 
            e.printStackTrace(); 
        }       
        super.tearDown(); 
    }       
} 
```

1.  先执行 test_splashscreen()，然后执行 test_homescreen()

2.  只执行 test_homescreen()

这篇文章似乎与我想要的很接近，但我无法使用它。太笼统了。[Android Robotium - 如何管理测试用例的执行顺序？](https://stackoverflow.com/questions/8217248/android-robotium-how-to-manage-the-execution-order-of-testcases)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T12:45:29.767

正如我们所知，robotium 按字母顺序运行测试用例。因此，为了获得更好的结果，我们可以为单独的活动设置单独的测试用例。稍后与该活动相关的其他测试用例可以保存在同一个包中（为单独的活动保留单独的包）。这将有助于一起运行相同活动的测试用例。要更改测试顺序，您可以在命名测试用例时始终使用字母。例如：“testAddSplash”将在“testHomeScreen”之前运行。

您还可以使用`suite()`方法：

```
public static final Test suite()
{ 
                TestSuite testSuite = new TestSuite(); 
                testSuite.addTest(new MyTestCase("test1")); 
                testSuite.addTest(new MyTestCase("test2")); 
                return testSuite; 
} 
```

您的测试用例必须有一个无参数构造函数和一个带有字符串参数的构造函数，如下所示。

```
public MyTestCase(String name)
{ 
            setName(name); 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T18:39:47.747

首先，依赖以特定顺序运行的测试是不好的。如果他们需要一个接一个地运行，您应该问自己为什么要单独进行测试？如果他们依赖之前的测试状态，之前测试中的任何失败都会导致下一个测试失败。

话虽如此，您可能会说我不在乎，我只是想让它起作用。所以对于你，无论如何我都会给你答案。您当然可以像其他人所说的那样做，并将您的测试重命名为按字母顺序运行。但是您似乎想要更多级别的控制，所以这里是：

```
import junit.framework.Test;
import junit.framework.TestSuite;
public class AllTests {
    public static Test suite() {
        TestSuite suite = new TestSuite(AllTests.class.getName());
        suite.addTest(TestSuite.createTest(myTest.class, "test_splashscreen"));
        suite.addTest(TestSuite.createTest(myTest.class, "test_homescreen"));
        suite.addTest(TestSuite.createTest(myTest.class, "test_splashscreen"));
        return suite;
    }
} 
```

这有很多问题，因为您必须将测试名称作为字符串提供，因此如果您重构测试名称，您的套件将会中断（以及许多其他原因）。通常，测试套件更多地用于在一次运行中将测试类分组在一起。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T15:33:27.650

you can name you test cases like this:

> public void test1_whatever()....
> 
> public void test3_other()...
> 
> public void test2_mytest()...

and when you run them the order will be:

> test1_whatever()
> 
> test2_mytest()
> 
> test3_other()

# text - 8086 写入文件而不覆盖

> ID：13149825
> 
> 赞同：-1
> 
> 时间：2012-10-31T01:03:18.850
> 
> 标签：text, assembly, ascii, x86-16, output

我有一个关于 8086 汇编的作业（这是家庭作业），我需要在屏幕上显示 BMP 图像并从 BMP 创建一个 ASCII 文本文件（就像那些 ASCII 艺术软件一样）。

我已经介绍了显示部分，并且完成了将 BMP“翻译”为 ASCII 的工作。但是，如您所知，BMP 文件的像素行信息是颠倒的，也就是说，最上面的行最后写入文件。

所以我想，为了创建 .txt 文件，我可以简单地写一行，将指针返回到文件的开头，然后再写另一行，依此类推。但是，现在对我来说似乎很明显这样做只会覆盖前一行，我最终得到一个只有一行的文本文件。

所以，总而言之，我的问题是：有没有人对如何处理这种情况有任何建议？我将非常感谢任何帮助。提前致谢！

PD：我不是要求直接的解决方案，只是可能有一些我不知道的东西或一些工具可以帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T01:08:56.527

您不能轻易地插入到文本文件中。

但是，因为您知道要写入多少行文本，以及每行的长度是多少（包括换行符），所以您可以找到文件的正确部分并从那里开始写入。

首先写出完整的空格（和换行符）。然后对于每一行文本，寻找到合适的位置，输出一行文本。

或者，以相反的顺序读取位图扫描线。

# jquery - $.parseJASON() 有什么用？

> ID：13149828
> 
> 赞同：1
> 
> 时间：2012-10-31T01:03:55.103
> 
> 标签：jquery, json

我刚刚开始学习如何使用 JSON，这可能是一个菜鸟问题：¿为什么我必须解析 JSON？

我有一个来自 php 数组的 JSON 对象（我已经使用过它`json_encode`），它看起来像这样：

```
var jason = 
{
  "book1": {
    "price": 10,
    "weight": 30
  },
  "book2": {
    "price": 40,
    "weight": 60
  }
}; 
```

我可以使用该函数循环遍历它`$.each()`，那我为什么要解析它呢？应用解析后，我不能再使用`$.each()`了，不知道为什么。而且我不明白为什么我不能使用这样的东西：`console(jason.book1[1])`;

我知道 jquery 中的描述说：

**描述**：*采用格式良好的 JSON 字符串并返回结果 JavaScript 对象。*

但我真的不明白。无论如何，任何帮助都会得到帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T01:07:43.710

以上是 JavaScript 中的*对象*（从技术上讲不是 JSON，因为 JSON 只是表示对象而不是数据结构的符号。不过这样说有点迂腐）：

但是，假设您有一个这样的字符串：

```
var jason = '{"book1":{"price":10,"weight":30},"book2":{"price":40,"weight":60}}'; 
```

您可以通过多种方式获得该字符串，但要说您拥有它。

`$.parseJSON(jason)`将把那个字符串变成你上面的对象。

看？[http://jsfiddle.net/7Qvd2/](http://jsfiddle.net/7Qvd2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T01:04:55.623

JSON 是数据的表示形式。当它来自 HTML 或 XHR 时，它总是一个字符串（只是一个字符序列）。除了组成它的各个字符之外，它没有任何意义。将`:`属性指向其值的`:`与可能出现在 JSON 中的字符串中的 a 没有不同的含义。

您必须对其进行解析以获取可用版本，即将字符串转换为您的语言中的本机数据结构。这会将字符串解析为其组件。在 JavaScript 中，就是将其转换为对象、数组、布尔值、空值、数字等。在其他语言中，存在等价的类型和结构。

# python - sqlalchemy 中的多对多。如果标签已经存在，防止 SQLAlchemy 插入表中

> ID：13149829
> 
> 赞同：8
> 
> 时间：2012-10-31T01:03:58.070
> 
> 标签：python, postgresql, orm, sqlalchemy, many-to-many

我有一些 ORM 映射表，它们（缩减）如下所示：

```
class Tag(Base):
    __tablename__ = 'tags'

    tag_name = Column(String, primary_key=True)

task2tag_assoc = Table('tasktags', Base.metadata,
    Column('task_id', UUID, ForeignKey('tasks.task_id', ondelete='cascade'), 
           primary_key=True),
    Column('tag_name', String, ForeignKey('tags.tag_name', ondelete='cascade'),
           primary_key=True)
    )

class Task(Base):
    __tablename__ = 'tasks'

    task_id = Column(UUID, primary_key=True)
    _tags = relationship('Tag', secondary=task2tag_assoc, backref='tasks',
            collection_class=set)
    tags = association_proxy('_tags', 'tag_name')

    def __init__(self, task_id, tags):
        self.task_id = task_id
        self.tags = set([tags]) 
```

通过这个设置，我可以创建一个带有新标签的任务就好了。它在表中创建标记行`tags`，然后在表中创建与新任务的关联`tasktags`。

```
t = Task(task_id = uuid4(), tags=['foo', 'bar']) #this works 
```

当我尝试使用`tags`表中已存在的标签创建任务时，问题就来了。

```
t2 = Task(task_oid = uuid4(), tags=['foo', 'baz']) #this will give an integrity error 
```

似乎 SQLAlchemy*总是*尝试将标签插入到标签表中，无论它是否已经存在。如果标签已经存在，我真的希望它只创建关联。这似乎在多对多情况下是相当正常的，但我在文档中找不到任何地方显示我可能做错了什么。

有没有办法得到我想要的行为？

作为背景，我正在使用带有 psycopg2 驱动程序的 postgresql 9.1 DB 和 SQLAlchemy 0.7.9 (Python 2.7.3)

我正在考虑作为最后手段的事情：标签在技术上是一个主键，没有别的，我可以只使用一个 task_id->tag 表而没有标签表。但如果有必要，我希望能够将元数据附加到标签本身。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T02:57:31.830

对于“仅唯一标签”配方，我通常使用唯一对象配方或它的一些变体： [http](http://www.sqlalchemy.org/trac/wiki/UsageRecipes/UniqueObject) ://www.sqlalchemy.org/trac/wiki/UsageRecipes/UniqueObject 。

这自然需要针对特定​​行进行 SELECT 以判断它是否首先存在。“upsert”技术，使用特定于数据库的命令来插入或更新基于数据库端确定的行，目前 ORM 不直接支持。无论如何，您使用的是 Postgresql，它实际上不支持任何本机“upsert”功能，除了一个使用公用表表达式的非常尴尬的系统。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T07:28:34.590

尝试删除这样的关联链接 t2._tags = []

```
t2 = Task(task_oid = uuid4())
t2._tags = []
tags = ['foo', 'baz']
for tag in tags:
    t2._tags.append(Tag(tag)) 
```

# google-maps-api-3 - 谷歌地图 api 实时更新新的 geojson 文件

> ID：13149836
> 
> 赞同：1
> 
> 时间：2012-10-31T01:04:49.040
> 
> 标签：google-maps-api-3, real-time, setinterval, geojson

我想通过大约每 3 分钟传递一个新的本地 geojson 文件来将实时动态添加到我的地图中。什么是最好的方法来做到这一点，以便它对最终用户是无缝的。我在想 ajax 和或 setinterval 函数是答案，但我不知道从哪里开始。如果有人知道任何例子或可以提供一些建议。我将不胜感激。

谢谢你。

这是我使用 AJAX 的尝试。我无法遍历 geoJSON 结构。不知道我做错了什么。AJAX 和 javascript 对我来说仍然有点陌生。

```
 <!DOCTYPE html>
   <html>
    <head>
<p id="demo">coordinates</p>
</br>
<p id="coords">coordinates</p>
<style>
  html, body, #map_canvas { margin: 0; padding: 0; height: 100%; }
</style>
<script
  src="https://maps.googleapis.com/maps/api/js?sensor=false&   libraries=visualization,MVCObject">
</script>
<script>
    var map;

    // ajax request to load json data
    var xhr = new XMLHttpRequest();
    xhr.open('GET', 'json_template.json', true);
    xhr.onload = function() {
    //
    sector_callback(this.responseText);
    //console.log(xhr.responseText);
    };
    xhr.send();

    // function to load map into body when page loads
    function initialize() { 
        var kansas_city = new google.maps.LatLng(39.00495613,-94.64780668);
        var mapOptions = {
        zoom: 10,
        center: kansas_city,
        mapTypeId: google.maps.MapTypeId.TERRAIN
        };

    map = new google.maps.Map(document.getElementById('map_canvas'), mapOptions);
    }

    // function definition to process the geoJSON data
    function sector_callback() {
    var bounds = new google.maps.LatLngBounds();

        //console.log(xhr.responseText);
        for (var i = 0, len = features.length; i < len; i++) {
            var coords = features[i].geometry.coordinates[0];
            siteNames = features[i].properties.Name; // added for site names
            var path = [];
                    //console.log(data);
            for ( var j = 0, len2 = coords.length; j < len2; j++ ){ // pull out each set of coords and create a map object
                var pt = new google.maps.LatLng(coords[j][1], coords[j][0])
                bounds.extend(pt);
                path.push(pt);

                //path.push(new google.maps.LatLng(coords[j][1], coords[j][0]));
            }

            var polygons = new google.maps.Polygon({
            path: path,
                strokeColor: "#000000",
                strokeOpacity: 0.8,
                strokeWeight: 1,
                fillColor: "#000000",
                fillOpacity: 0.35,
            map: map
            });
            createClickablePoly(polygons, siteNames);

            google.maps.event.addListener(polygons, 'mouseover', function() {
            var currentPolygon = this;

            currentPolygon.setOptions({ // setOptions is a method and properties below
                fillOpacity: 0.45,
                fillColor: "#FF0000"
                })
            });

            google.maps.event.addListener(polygons, 'mouseout', function() {
            var currentPolygon = this;
            currentPolygon.setOptions({ 
                fillOpacity: 0.35,
                fillColor: "#000000"
                })
            }); 
        }
    }

 </script>
 </head>
 <body onload="initialize()">
   <div id="map_canvas"></div>
  <h2>AJAX</h2>
   <div id="myDiv"></div>
  </body>
</html> 
```

地理JSON：

```
 {
"type": "FeatureCollection",
"features": [{
    "type": "Feature",
    "properties": {
        "Name": "1_1",
        "Description": ""
    },
    "geometry": {
        "type": "Polygon",
        "coordinates": [
            [
                [-94.963194, 39.316858],
                [-94.959670, 39.321990],
                [-94.959050, 39.321720],
                [-94.958460, 39.321400],
                [-94.957920, 39.321040],
                [-94.957420, 39.320640],
                [-94.956980, 39.320210],
                [-94.956250, 39.319270],
                [-94.955990, 39.318760],
                [-94.955780, 39.318240],
                [-94.955640, 39.317700],
                [-94.955570, 39.317160],
                [-94.955570, 39.316610],
                [-94.963194, 39.316858]
            ]
        ]
    }
}, {
    "type": "Feature",
    "properties": {
        "Name": "214_1",
        "Description": ""
    },
    "geometry": {
        "type": "Polygon",
        "coordinates": [
            [
                [-94.783917, 39.083417],
                [-94.776470, 39.084670],
                [-94.776340, 39.084140],
                [-94.776290, 39.083590],
                [-94.776300, 39.083040],
                [-94.776380, 39.082500],
                [-94.776530, 39.081960],
                [-94.777020, 39.080940],
                [-94.777360, 39.080460],
                [-94.777760, 39.080000],
                [-94.778210, 39.079570],
                [-94.778710, 39.079180],
                [-94.779260, 39.078830],
                [-94.783917, 39.083417]
            ]
        ]
     }
   }]
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T16:51:43.550

`function sector_callback()`不接受任何参数。它应该是类似的东西`function sector_callback(data)`。您不能使用全局变量 xhr，因为 AJAX 是异步的。

```
function sector_callback(data) {
        for (var i = 0, i < data.features.length ; i++) {
            var coords = data.features[i].geometry.coordinates[0];
            //...etc 
```

# node.js - Node.js SFTP 服务器

> ID：13149838
> 
> 赞同：2
> 
> 时间：2012-10-31T01:04:57.727
> 
> 标签：node.js, sftp

我需要通过 SFTP 为用户接受文件。我还需要动态创建、更新、销毁用户帐户。

实现此目的的一种方法是安装 SFTP 服务器，然后编写脚本来处理编辑/更新用户。

在玩了少量 Node.js 之后，似乎它会擅长这种事情。有什么建议如何去做，或者可以做到这一点的模块吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-21T09:55:18.993

node-libssh can act as a SFTP server, see an example at: [https://github.com/rvagg/node-libssh/blob/master/examples/stdiopipe.js](https://github.com/rvagg/node-libssh/blob/master/examples/stdiopipe.js)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T04:54:00.193

node.js 中的一个常见模式是围绕某些服务创建一个节点包装库，在您的情况下是 sftp。看一下代码（遗憾的是缺少文档）node-sftp 项目：

[https://github.com/ajaxorg/node-sftp](https://github.com/ajaxorg/node-sftp)

因此，回顾一下，一个非常常见的事情是在节点中创建一些基于 HTTP 的 API 包装器（可能使用 express），然后与系统上的某些服务进行对话。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T06:06:02.270

我不知道任何特定的 SFTP 实现，但是这个 [https://github.com/substack/node-ssh](https://github.com/substack/node-ssh) 可能可以扩展为在 ssh 连接上支持 SFTP 协议。

SFTP 通过使用 SSH 连接来承载 FTP 协议，这是一种基于文本的协议。

我将从这个文件开始： [https](https://github.com/substack/node-ssh/blob/master/index.js) ://github.com/substack/node-ssh/blob/master/index.js 并更改匹配 CHANNEL_REQUEST_SHELL 的行并将其替换为正确的常量并匹配 sftp 协议通道类型。

如果您需要更多帮助，您可能可以在 freenode 上的 #node.js 上访问子堆栈。

（顺便说一句，python 和 conch 可能对这种事情有更多的支持。node.js 的构建块存在，但我知道没有完整的 SFTP 实现。）

# c++ - 适合在函数参数中将字符串文字转换为 char * 吗？

> ID：13149843
> 
> 赞同：3
> 
> 时间：2012-10-31T01:05:30.283
> 
> 标签：c++, function, pointers, char

我有一个接收`char *`参数的函数：

```
Foo::Foo (char * arg0) {
    ....
} 
```

在原始示例中， a`char[]`用于传递此值...

```
char bar[] = "Bar";
Instance.foo (bar); 
```

...效果很好。

但是，我发现我可以传递一个字符串文字，转换为 a `char *`，而编译器不会发出任何警告。

```
Instance.Foo ((char *) "Bar"); 
```

但是，从我的阅读来看，似乎应该避免 - 指向的内存值可能会改变。

上述陈述是真的（“应该避免”）还是在这种情况下合适？

* * *

*编辑 - 进一步的研究发现[这篇文章](http://cboard.cprogramming.com/faq-board/86924-faq-difference-between-c-cplusplus-style-casting.html)很好地解决了我的问题......*

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-31T01:10:08.597

是的，避免这种情况。现在，如果您的函数使用 a `const char *`，那么使用字符串文字调用它并没有错。

C++ 编译器`char *`仅出于向后兼容的原因支持字符串文字，写入字符串文字会导致未定义的行为。

当你这样做时，你正在做一些根本不同的事情（即用你可以自由修改`char bar[] = "Bar";`的值初始化一个由 4 个字符组成的数组），而不是你做的事情（你正在创建一个指向你可能无法修改的 4 字节字符串的非指针） ）。`{'B', 'a', 'r', '\0'}``char bar* = "Bar";``const`

在我看来，您永远不应该将字符串文字直接转换为 a ，而是将其明确地`char*`放入 a `const char*`then （如果您正在与旧版 API 通信），并附上评论说您正在与有保证的旧版 API 交谈不要改变s。这样做的好处是您可以在升级 API 时在程序中搜索那些 s，或者您想找到涉及写入 a 的分段错误来自何处。`const_cast<char*>``const``char``const_cast``char*`

甚至可以将遗留 API 与在其中`const char*`执行此操作的版本一起包装`const_cast`。

绝对最糟糕的情况是有一堆`char*`s 闲逛，其中一些是可写的，另一些来自字符串文字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T01:08:53.973

应该不惜一切代价避免这种情况，并且只有在您必须与损坏的遗留 API 交互并且只有在您查看了它们的源代码并确保它们没有写入字符串时才能这样做。

保持安全，并`strcpy`在传递字符串之前复制字符串。

究竟什么是恶？写入字符串文字是未定义的行为。

# java - Java程序中覆盖方法toString的问题

> ID：13149844
> 
> 赞同：0
> 
> 时间：2012-10-31T01:05:51.407
> 
> 标签：java

我正在编写一个程序，其中我定义了类函数，并具有对它们执行算术运算的方法。在输出中，在我的 FractionDemo 类中，我在尝试编写输出、获取 @12f9de 等内容时遇到了问题。所以我知道我需要重写该`toString`函数，但我遇到了找不到符号错误。

这是我的代码：

功能：

```
public class Fraction
{
    int numerator;
    int denominator;

    public Fraction(int numerator, int denominator)
    {
        this.numerator = numerator;
        this.denominator = denominator;
    }

    public void setNumerator(int numerator)
    {
        this.numerator = numerator;
        return;
    }

    public void setDenominator(int denominator)
    {
        this.denominator = denominator;
        return;
    }

    public int getNumerator()
    {
        return numerator;
    }

    public int getDenominator()
    {
        return denominator;
    }

    public static Fraction add(Fraction fraction1, Fraction fraction2)
    {
        Fraction fraction3 = new Fraction(((fraction1.getNumerator() * fraction2.getDenominator()) + (fraction1.getDenominator() * fraction2.getNumerator())), (fraction1.getDenominator() * fraction2.getDenominator()));
        return fraction3;
    }

    public static Fraction subtract(Fraction fraction1, Fraction fraction2)
    {
        Fraction fraction3 = new Fraction(((fraction1.getNumerator() * fraction2.getDenominator()) - (fraction1.getDenominator() + fraction2.getNumerator())), (fraction1.getDenominator() * fraction2.getDenominator()));
        return fraction3;
    }

    public static Fraction multiply(Fraction fraction1, Fraction fraction2)
    {
        Fraction fraction3 = new Fraction((fraction1.getNumerator() * fraction2.getNumerator()), (fraction1.getDenominator() * fraction2.getDenominator()));
        return fraction3;
    }

    public static Fraction divide(Fraction fraction1, Fraction fraction2)
    {
        if (fraction2.getNumerator() != 0)
        {
            Fraction fraction3 = new Fraction((fraction1.getNumerator() * fraction2.getDenominator()), (fraction1.getDenominator() * fraction2.getNumerator()));
            return fraction3;
        }
        else throw new IllegalArgumentException("Division by Zero");
    }
} 
```

分数演示：

```
public class FractionDemo
{      
    public static void main(String[] args)
    {
        Fraction fraction1 = new Fraction(4,7);
        Fraction fraction2 = new Fraction(5,6);

        Fraction fractionSum = Fraction.add(fraction1, fraction2);
        System.out.println(fractionSum);

        Fraction fractionDif = Fraction.subtract(fraction1, fraction2);
        System.out.println(fractionDif);

        Fraction fractionProd = Fraction.multiply(fraction1, fraction2);
        System.out.println(fractionProd);

        Fraction fractionDividend = Fraction.divide(fraction1, fraction2);
        System.out.println(fractionDividend);
    }

    public String toString()
    {
        return ("The result is:  " + numerator + "/" + denominator);
    }
} 
```

无论如何，有什么办法可以让输出正确格式化？它说在 FractionDemo 底部的 toString 部分中找不到我的变量。无论我是否使用变量名、像 [fractionSum.getNumerator] 之类的函数调用或其他任何东西。我会马上说我并不真正理解覆盖 toString 的东西，我对 Java 还是很陌生。

让我知道是否有任何我应该添加的内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T01:08:42.530

您的`toString`方法需要在您的`Fraction`课程中，而不是在`FractionDemo`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T01:08:14.343

`toString`必须在`Fraction`类中定义，而*不是*在`FractionDemo`类中。

**更新**：既然你在它，请创建类`final`，创建字段`private final`，删除设置器并`toString`返回*原始*分数表示，没有短语`"The result is: "`（应该是的工作`FractionDemo`）：

```
public final class Fraction 
{

  private final int numerator;
  private final int denominator;

  @Override
  public String toString()
  {
      return (numerator + "/" + denominator);
  }

  ...
} 
```

理由是它`Fraction`应该是一个不可变的值类。

另外，我认为您不应该接受零分母：

```
public Fraction(int numerator, int denominator)
{
    if (denominator == 0) throw new IllegalArgumentException("Denominator can't be zero!");
    this.numerator = numerator;
    this.denominator = denominator;
} 
```

而且，您应该实现`equals`并使`hashCode`您的类具有真正的价值语义。

# javascript - 从我的 ajax 调用中提取 errorThrown

> ID：13149846
> 
> 赞同：0
> 
> 时间：2012-10-31T01:06:08.413
> 
> 标签：javascript, jquery, ajax

我无法从我的 ajax 调用中检索错误消息以确定错误是什么。

我见过这个问题：[Jquery Ajax 中的 errorThrown 返回未定义？](https://stackoverflow.com/questions/7865131/errorthrown-in-jquery-ajax-returns-undefined)

我复制了那个错误调用，但仍然没有结果。

```
grab_songs = function() {
    $.ajax({
        type:'POST',
        url: 'http://tangoalphatango.com/songs.php',
        succss: function(data) {
            $('#result').html('success');
        },
        error: function(x, textStatus, errorThrown){
            alert(errorThrown);
        }
    });
}
$('.song-title').click(grab_songs);​ 
```

[http://jsfiddle.net/ms69K/2/](http://jsfiddle.net/ms69K/2/)

为什么ajax不会给我一个错误信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T00:09:05.820

```
$.ajax({type:'POST',url:'/songs.php',data:{id:song},success:function(data){$('#lyrics').html(data);}}); 
```

请求不再失败，但我不知道发生了什么变化。我永远无法捕获错误消息，浏览器控制台也从未给我错误。我所能做的就是把它归结为服务器错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-13T18:10:50.953

你拼错了成功。这可能是您的第二篇文章在拼写正确时有效的原因。

# java - PreparedStatement导致OOM错误

> ID：13149849
> 
> 赞同：1
> 
> 时间：2012-10-31T01:06:33.390
> 
> 标签：java, memory-management, memory-leaks, garbage-collection, prepared-statement

我有一个包含以下代码的侦听器方法。该方法每秒被调用多次。但是，它会导致我的应用程序内存泄漏。

我认为这可能与我处理准备好的语句的方式有关（为收到的每个对象创建新的语句）。我在做任何明显错误的事情吗？使用后我应该将 PS 设置为 null 吗？是否出于某种原因保留了 PS？

另外，我正在手动指定 PS 的表名。这种重新定义是否完全违背了使用准备好的声明的目的？

```
String text = object.getText();

//determineDb method determines the db for the object based on its content
ArrayList<Topic> toAddList = determineDatabase(text);
if (toAddList.size() > 0) {
    int epoch = (int) (System.currentTimeMillis() / 1000);
    //Topic class contains DB info, topic name and associated terms
    for (Topic a : toAddList) {
        try {
            pst = con
    .prepareStatement("INSERT INTO "
            + a.getTopic()
            + " (created, received, username, text, ignored, retweet, value) VALUES(?, ?, ?, ?, ?, ?, ?)");
            pst.setString(1, String.valueOf(object.getCreatedAt().getTime() / 1000));
            pst.setString(2, String.valueOf(epoch));
            pst.setString(3, object.getUser());
            pst.setString(4, text);
            pst.setInt(5, 0);
            pst.setInt(6, object.isOriginal() ? 1 : 0);
            pst.setDouble(7, otherClass.analyzeString(object.getText()));
            pst.executeUpdate();
        } catch (SQLException ex) {
            System.out.println(ex);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T01:23:04.447

*使用后必须*关闭 PreparedStatement，始终在 finally 块中。java 中任何可能对应于外部资源的对象都应该*小心*处理（一旦不再有用就清理掉）。所有 JDBC 资源都属于这一类（ResultSet、Statement、Connection）。

# c# - 无法加载文件或程序集“Microsoft.Web.Infrastructure，

> ID：13149851
> 
> 赞同：81
> 
> 时间：2012-10-31T01:06:43.233
> 
> 标签：c#, asp.net-mvc

我试图将我的网站上传到服务器。它在我的本地主机上运行良好，因此我将 localhost`wwwroot`文件夹中的所有内容上传到服务器并更改了连接字符串。

但是有这个错误：

```
Exception information: 
    Exception type: InvalidOperationException 
    Exception message: The pre-application start initialization method Start on type RouteDebug.PreApplicationStart threw an exception with the following error message: Could not load file or assembly 'Microsoft.Web.Infrastructure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35' or one of its dependencies. The system cannot find the file specified..
   at System.Web.Compilation.BuildManager.InvokePreStartInitMethods(ICollection`1 methods)
   at System.Web.Compilation.BuildManager.CallPreStartInitMethods()
   at System.Web.Hosting.HostingEnvironment.Initialize(ApplicationManager appManager, IApplicationHost appHost, IConfigMapPathFactory configMapPathFactory, HostingEnvironmentParameters hostingParameters, PolicyLevel policyLevel, Exception appDomainCreationException)

Could not load file or assembly 'Microsoft.Web.Infrastructure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35' or one of its dependencies. The system cannot find the file specified.
   at RouteDebug.PreApplicationStart.Start() 
```

该项目是`nopcommerce`.

应该怎么做才能解决这个错误？

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-10-31T01:17:39.687

You will need to include the dll with your project and add a reference to it as well.

Here is a link to a similar issue already on Stack: [MVC3 Deployment Dependency Problems](https://stackoverflow.com/questions/4742894/mvc3-deployment-dependency-problems)

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2015-04-06T20:12:10.670

事实证明，在进行参考清理后，它删除了`Microsoft.Web.Infrastructure`，但没有从 packages.config 文件中删除。在尝试使用 再次添加它后`Package Manager Console`，Visual Studio 说它已经安装，这是错误的，因为它已被删除。

然后我删除了`packages.config`文件中的代码行

```
<package id="Microsoft.Web.Infrastructure" version="1.0.0.0" targetFramework="net45" /> 
```

并再次运行命令

```
PM> Install-Package Microsoft.Web.Infrastructure 
```

在此之后，现在它工作正常。

* * *

## 回答 #3

> 赞同：33
> 
> 时间：2013-01-14T16:26:17.210

[安装从此处](http://www.microsoft.com/en-us/download/details.aspx?id=1491)下载的 AspNetMVC3ToolsUpdateSetup将解决此问题而无需添加参考

* * *

## 回答 #4

> 赞同：32
> 
> 时间：2015-09-08T06:17:27.237

尽管答案数量很多，但我会添加另一个答案，恕我直言，这会让事情变得更清楚。

正如[Rob](https://stackoverflow.com/users/1116587/rob)和[wrightmail](https://stackoverflow.com/users/622074/jwrightmail)已经提到`Microsoft.Web.Infrastructure`的那样，它是一个 NuGet 包（不需要链接，您可以在 NuGet 包管理器中找到它）。

显然，它被您的项目引用并突然消失了。可能存在多种原因，但重要的是，尽管您可能已通过以下方式[在 Visual Studio 中启用了自动包还原](https://docs.nuget.org/consume/package-restore)：

*   管理解决方案的 NuGet 包（解决方案资源管理器中的上下文菜单），
*   允许 NuGet 下载丢失的包（设置），
*   在 Visual Studio 中构建期间自动检查丢失的包（设置），

某些软件包可能需要手动重新安装。我不知道是什么让 NuGet 感到困惑，也许是手动删除引用，但这是我通常在这种情况下应用的解决方案。以下 PM 控制台有助于恢复软件包，同时保留原始版本（不更新到可能现有的新版本）：

> 更新包 Microsoft.Web.Infrastructure -重新安装

*如果您不想意外地用新版本覆盖现有包，这可能会删除您可能在项目中使用的“旧”功能，则可能需要保留版本。*

而且，作为一个证明，尽管有点冗长，版本没有改变，这是执行命令时的输出：

```
PM> Update-Package Microsoft.Web.Infrastructure -Reinstall
Attempting to gather dependencies information for multiple packages with respect to project 'Samples.NuGet\DemoApp\DemoApp', targeting '.NETFramework,Version=v4.5.2'
Attempting to resolve dependencies for multiple packages
Resolving actions install multiple packages
...
Package removal starts here...
...
Removed package 'Microsoft.AspNet.Web.Optimization 1.1.3' from 'packages.config'
Successfully uninstalled 'Microsoft.AspNet.Web.Optimization 1.1.3' from DemoApp
Removed package 'WebGrease 1.5.2' from 'packages.config'
Executing script file 'D:\Projects\DemoApp\packages\WebGrease.1.5.2\tools\uninstall.ps1'
Successfully uninstalled 'WebGrease 1.5.2' from DemoApp
...
More package removals here. Omitted for brevity...
...
Removed package 'Microsoft.Web.Infrastructure 1.0.0.0' from 'packages.config'
Successfully uninstalled 'Microsoft.Web.Infrastructure 1.0.0.0' from DemoApp
...
More package removals here. Omitted for brevity...
...
Removed package 'Antlr 3.4.1.9004' from 'packages.config'
Successfully uninstalled 'Antlr 3.4.1.9004' from MvcLenseApp
Package 'Antlr.3.4.1.9004' already exists in folder 'D:\Projects\Lense.Mvc5\packages'
--- Install packages (in reverse order) ---
Package 'Antlr.3.4.1.9004' already exists in folder 'D:\Projects\DemoApp\packages'
Added package 'Antlr.3.4.1.9004' to 'packages.config'
Successfully installed 'Antlr 3.4.1.9004' to DemoApp
...
More package installs here. Omitted for brevity...
...
Package 'Microsoft.Web.Infrastructure.1.0.0' already exists in folder 'D:\Projects\Lense.Mvc5\packages'
Added package 'Microsoft.Web.Infrastructure.1.0.0' to 'packages.config'
Successfully installed 'Microsoft.Web.Infrastructure 1.0.0' to MvcLenseApp
...
More package installs here. Omitted for brevity...
...
Package 'WebGrease.1.5.2' already exists in folder 'D:\Projects\DemoApp\packages'
Added package 'WebGrease.1.5.2' to 'packages.config'
Executing script file 'D:\Projects\DemoApp\packages\WebGrease.1.5.2\tools\install.ps1'
Successfully installed 'WebGrease 1.5.2' to DemoApp
Package 'Microsoft.AspNet.Web.Optimization.1.1.3' already exists in folder 'D:\Projects\DemoApp\packages'
Added package 'Microsoft.AspNet.Web.Optimization.1.1.3' to 'packages.config'
...
End of package re-install. 
...
Successfully installed 'Microsoft.AspNet.Web.Optimization 1.1.3' to DemoApp
PM> 
```

当然，如果您希望重新安装所有软件包，您可能需要在[此处](https://docs.nuget.org/consume/package-restore)和[此处](http://blog.nuget.org/20121231/a-quick-tutorial-on-update-package-command.html)熟悉 NuGet 中的更新/安装命令。

* * *

## 回答 #5

> 赞同：27
> 
> 时间：2013-06-11T23:54:46.043

I found that even though it worked on my dev box, the assembly wasn't added to the project. Search for Microsoft.Web.Infrastructure in NuGet and install it from there. Then, make sure it has Copy Local selected.

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2018-05-23T08:24:28.823

在具有现有项目的 VS2015 上的新 Windows 10 机器上遇到此问题。包管理器 3.4.4。启用恢复包。

恢复似乎并不完全有效。必须在包管理器命令行上运行以下命令

```
Update-Package -ProjectName "YourProjectName" -Id Microsoft.Web.Infrastructure -Reinstall 
```

这对我的解决方案文件进行了以下更改，而还原没有这样做。

> ```
> <Reference Include="Microsoft.Web.Infrastructure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35, processorArchitecture=MSIL">
>   <HintPath>..\packages\Microsoft.Web.Infrastructure.1.0.0.0\lib\net40\Microsoft.Web.Infrastructure.dll</HintPath>
>   <Private>True</Private>
> </Reference> 
> ```

只要 ..\packages\Microsoft.Web.Infrastructure.1.0.0.0\lib\net40\Microsoft.Web.Infrastructure.dll 存在，只需将上述元素添加到解决方案文件中的 ItemGroup 部分也可以解决问题。

只需执行 -Reinstall 更容易，但很高兴了解它对包还原的不同之处。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2012-10-31T01:13:19.117

[尝试从https://www.microsoft.com/web/platform/](https://www.microsoft.com/web/platform/)安装 Web Platform

希望能帮助到你。

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2015-05-30T03:29:15.703

Resharper 将 Microsoft.Web.Infrastructure 检测为未使用的引用，因此我将其删除。本地工作正常，但发布到开发后我得到了同样的错误。

结论，删除 Resharper 标记为未使用的引用时要小心

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2015-12-16T09:45:52.557

我有一个类似的问题。NuGet 显示包已成功安装，但引用未添加到我的项目中。

运行`<PM> Install-Package Microsoft.Web.InfraStructure`也没有帮助，因为包管理器一直说它已经安装

我最终通过编辑 csproj 文件并添加以下行来手动添加它：

```
 <Reference Include="Microsoft.Web.Infrastructure">
  <HintPath>..\packages\Microsoft.Web.Infrastructure.1.0.0.0\lib\net40\Microsoft.Web.Infrastructure.dll</HintPath>
  <Private>True</Private>
</Reference> 
```

这解决了问题。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2012-11-09T15:29:02.343

您需要在托管应用程序的服务器上下载 ASP.NET MVC 框架。这是一个快速修复，只需从这里下载并安装（这是 MVC 3 框架[http://www.asp.net/mvc/mvc3](http://www.asp.net/mvc/mvc3)），然后就可以了。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2018-10-29T10:05:08.497

首先从 package.config 中删除 Microsoft.Web.Infrastructure。

并再次运行命令

PM> Install-Package Microsoft.Web.Infrastructure 并确保 Copy Local 属性应为 true。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2017-06-20T08:26:16.393

对我来说`Microsoft.Web.Infrastructure.dll`bin 文件夹中缺少它，它没有设置为在项目中复制本地。从解决方案中的另一个项目复制 dll 并加载页面。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2014-11-30T08:26:02.500

非常简单的解决方案：

在 Visual Studio 中，转到工具/库包管理器/包管理器控制台

```
<PM> Install-Package Microsoft.Web.InfraStructure 
```

玩得开心

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2015-07-31T17:26:15.690

这是我的场景。

我有一个包含项目 A、B、C .. N 的多项目解决方案。

项目 B 是一个包含`selectlist`对象工厂的代码库。

该项目将在开发中按预期运行，但是在发布到我们的测试环境时，我遇到了您遇到的错误：

```
Could not load file or assembly 'Microsoft.Web.Infrastructure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35' or one of its dependencies. The system cannot find the file specified. 
```

发生的事情是通过 nuget 包管理器，我不小心安装了“Microsoft ASP.NET MVC”，它安装了以下依赖项：

*   Microsoft.AspNet.Razor
*   Microsoft.AspNet.WebPages

瞧，Microsoft.AspNet.WebPages 依赖于“Microsoft.Web.Infrastructure”。

我的解决方案是卸载上面提到的三个包（MVC、Razor、WebPages），然后右键单击引用 > 添加引用 > 程序集 > 扩展 > System.Web.MVC。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2020-02-25T23:27:48.290

我必须将引用属性中的“复制本地”设置为 False，然后再设置回 True。这样做会将 Private True 设置添加到 .csproj 文件中。

```
<Reference Include="Microsoft.Web.Infrastructure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35, processorArchitecture=MSIL">      <HintPath>..\packages\Microsoft.Web.Infrastructure.1.0.0.0\lib\net40\Microsoft.Web.Infrastructure.dll</HintPath>
      <Private>True</Private>
    </Reference> 
```

我以为这已经设置好了，因为“复制本地”显示为 True。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2019-08-03T06:29:15.397

在某些情况下，清理项目/解决方案、物理移除`bin/`和`obj/`重建将解决此类错误。例如，当某些包和引用被安装/添加然后删除时，可能会发生这种情况，留下一些工件。

它发生在我身上`Microsoft.Web.Infrastructure`：最初，该项目不需要该程序集。经过一些实验，最终的净效应应该为零，我得到了这个例外。上述步骤解决了它，无需安装未使用的依赖项。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2020-04-08T05:03:57.513

我有这个问题。我将 DLL 包含在项目中，并且默认情况下复制本地的设置为 true。不知道它为什么开始，因为那个 DLL 在项目中存在了很长时间。我听说 ReSharper 可能会删除它，但我不能说我已经运行了未使用的引用删除。

对我有帮助的是： - 在项目上运行“Update-Package Microsoft.Web.Infrastructure -Reinstall”，它更新了整个解决方案，但最终并没有帮助自己。- 然后我浏览了项目的引用并将 Copy Local 设置为 false，然后返回 true。这实际上导致在 DLL 引用下的 CSPROJ 文件中添加了一行：True。或者类似的东西......无论哪种方式，现在构建正在按预期复制文件。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2020-05-29T15:37:18.617

所以，这就是使用 VS2019 对我有用的方法。当 Microsoft.Web.Infrastructure 位于同一解决方案的不同项目中时，我在尝试更新一个项目上的 Nuget 包时遇到此错误。我必须从项目的 Packages 文件夹中删除 Microsoft.Web.Infrastructure.1.0.0.0 文件夹。通过 nuget 重新安装它，然后一切都重新开始工作。疯狂的事情。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2018-08-10T13:37:33.267

在我的机器上，没有正确下载 Nuget 依赖项，nuget 包中的 lib 文件夹不存在，因此出现错误。

**前**

[![在此处输入图像描述](../Images/230a84917b59a412dd76efe11aabe8ff.png)](https://i.stack.imgur.com/MCUF6.png)

我在包文件夹中重命名了 Nuget 包，然后 Nuget 使用必要的 lib 文件夹正确地重新下载了它。

**后** [![在此处输入图像描述](../Images/bfd4a13d8b3979d37e658e2dd63ce569.png)](https://i.stack.imgur.com/OSiw2.png)

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2017-10-04T14:43:03.950

我不知道我的项目发生了什么，但它引用了错误的 DLL 路径。Nuget 正确安装了它，它确实与其他软件包一起在我的文件系统上，但只是引用不正确。

该`packages`文件夹在我的项目中存在两个目录，并且仅通过以`..\packages\`. 我改变了开始的路径，`..\..\packages\`它解决了我的问题。

# php - SQL - 检查单个表的依赖项

> ID：13149852
> 
> 赞同：0
> 
> 时间：2012-10-31T01:06:53.033
> 
> 标签：php, sql, database, foreign-keys, relational

假设您有一个表（A），其中包含有限数量的数据，并且作为主键的字段之一被其他表中的许多外键而不是一个外键引用。

这些表的外键对前面提到的 table(A) 有约束，如果 table(A) 中的一行被删除并且其他表 FK 之一持有对它的引用，删除将失败。

好的，数据库设计已经完成，现在是软件的问题，在这种情况下是 PHP。试图从 table(A) 中删除一行，如果持有引用，应该如何检查以确保该行不能被删除？

我见过事先检查每个表的情况，但是这涉及在每次检查中进行编码，这成为维护的噩梦。此外，我不能简单地尝试删除，因为这需要是一个跨数据库应用程序，因此返回的错误代码不会是一致的。

我很想知道人们通常如何处理这种情况。我提到我正在使用 PHP，但这种情况应该适用于任何语言。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T02:19:58.527

通常，您可以通过尝试在 PRIMARY KEY 表上执行 DELETE 语句、捕获异常并在事务发生时回滚来处理此问题。然后，您可以以您想要的任何形式向用户报告故障。如果所有引用表确实将 FOREIGN KEY 声明回 PRIMARY KEY 表，则此方法有效。

如果你*真的*需要先检查，你需要编写代码来“内省”数据库中存在的键，提取每个引用外键的表和列名，并对每个表发出 SELECT COUNTs。不幸的是，每个数据库引擎都有自己的方法来了解数据库结构，因此您必须为要支持的每个数据库引擎编写一些代码。

# facebook - Facebook API：“分享”已经发布在页面墙上的帖子？

> ID：13149854
> 
> 赞同：12
> 
> 时间：2012-10-31T01:06:58.537
> 
> 标签：facebook, facebook-graph-api

我似乎无法为此找到答案。可能我的 Google-fu 让我失望了。

有没有办法使用 FB 的 Graph API（或任何其他方式），以便在经过身份验证的用户的墙上“分享”页面的帖子，以便增加“分享号”，如附图所示？

![页面帖子旁边的共享计数器](../Images/792724c8e9878e680e6b9795444a526a.png)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-06T11:36:29.863

好的，我的回答在“否”和“也许”之间变化，具体取决于您希望如何实现这一点。

*您是否希望它成为一种完全依赖于代码的程序化、自动共享机制，不需要用户主动共享？*

如果是这样，答案是否定的。实际上它也可能违反平台政策，但这是不可能的。

*您是否介意它是基于对话的共享，对于不同类型的主页帖子具有不一致的行为？*

如果是这样，你很幸运。有些。有一个现已弃用的函数，称为“sharer.php”，它曾经用于共享按钮，当时 Facebook 仍然支持它。尽管这已被弃用，但它不太可能被删除，但不幸的是，这确实意味着周围没有文档。幸运的是，它真的很简单：

`http://www.facebook.com/sharer.php?u=https://www.facebook.com/coca-cola/posts/10152033676358306`

以上是在可口可乐 Facebook 页面上分享帖子的示例。当然，您可能希望对`u`参数进行 URL 编码。你可以把它作为一个普通的链接，或者你可以用 Javascript 将它附加到一个按钮的 onclick 上。但是，这里有一些警告：

*   这似乎仅适用于本身不是“分享”帖子的帖子，例如您发布屏幕截图的帖子。
*   我没有它可以使用的类型的完整列表*，*但是状态更新可以完美地工作。

如果你还是想走这条路，我的建议是：

*   使用 Graph API Page 对象，拉入 /posts 连接
*   过滤到所有属于`type: status`
*   要构造指向此的链接以与 sharer.php 一起使用，请将类型的每个 Post ID 解析`12345678_987654321`为`https://www.facebook.com/12345678/posts/987654321`或从每个 Post 获取 /actions/link 字段（将有一个用于 Comment 和一个用于 Like，但它们都是相同）
*   URLEncode 和上面的 sharer.php 一起使用
*   对于属于 的页面帖子，请`type: link`抓住该`link`字段并将其与上面的 sharer.php 一起使用。这不会根据需要增加共享计数，但它会正确地重新共享链接。

希望其中一些对您有所帮助，最终最适合您的答案可能是“不”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-01-25T00:57:31.423

是的，您可以使用 graph2 api 进行共享。您这样做的方式是使用`/feed`边缘并将您要共享的帖子的网址作为链接传递。

```
POST /v2.2/{page-id}/feed HTTP/1.1
Host: graph.facebook.com

link=https://www.facebook.com/{page_id}/posts/{post_id} 
```

您共享的帖子的权限确实适用。

[https://developers.facebook.com/docs/graph-api/reference/v2.2/page/feed](https://developers.facebook.com/docs/graph-api/reference/v2.2/page/feed)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-19T11:42:51.663

你在使用新的 JS SDK 吗？如果是这样，请参考这个帖子

“使用新的 JS SDK，您可以使用按钮，它将被渲染和使用，但支持的类型较少，如果使用它，您将丢失共享计数。”

参考：[Facebook 分享按钮是否适用于新的 Javascript SDK？](https://stackoverflow.com/questions/3990909/does-the-facebook-share-button-work-with-the-new-javascript-sdk)

# sql - 选择 Distinct on Inner Join Query 通过单个列上的多个值过滤？

> ID：13149857
> 
> 赞同：5
> 
> 时间：2012-10-31T01:07:13.720
> 
> 标签：sql, distinct, where

所以，我不得不说，到目前为止，SQL 是我作为开发人员最弱的一面。也许我想要完成的事情很容易。我有这样的东西（它不是真正的模型，但为了使其易于理解而不浪费太多时间解释它，我想出了一个完全模仿我必须使用的表关系的示例）。一方面，一个表，我们称之为“用户”。主键“UserId”、“UserName”等列。

接下来是另一个表，“许可证”。1:N 与用户相关，每个许可证属于一个用户，一个用户可能有多个许可证。因此，我们将有一个 PK IdLicense、一个 FK IdUser 等等。

接下来是一个名为“设备”的表。在这里，我们定义了不同的设备。IdEquipment，设备名称。没什么好说的了。

最后，在“许可证”和“设备”之间创建 N:M 关系的表。当用户定义许可证时，他们可以指定许可证允许他们操作的不同设备。因此，一个许可证可以关联多个设备，而一个设备可以关联多个许可证。

真正的交易来了。我受命实施某种搜索系统，允许您根据他们有资格操作的设备来获取用户。可以进行多项选择，以便您搜索有资格操作设备的用户“A ”、“B”和“C”。例如，我们有 2 个用户，James 和 Dave。詹姆斯有两张执照，戴夫有一张。James 有资格在他的第一个许可证上使用机器“A”和“D”，在第二个许可证上可以使用机器“B”和“C”。Dave 有资格在他的唯一执照上处理设备类型“B”和“C”。如果有人尝试搜索能够处理设备“A”、“B”和“C”的用户，则只有 James 将是返回记录。

到目前为止，我认为我必须做类似的事情

```
SELECT DISTINCT IdUser
FROM  Users
INNER JOIN Licenses
   ON Licenses.IdUser = Users.idUser
INNER JOIN LicensesEquipments
   ON LicensesEquipments.IdLicense = Licenses.IdLicense
INNER JOIN Equipment
   ON Equipment.IdEquipment = LicensesEquipments.IdEquipment

WHERE Equipment.IdEquipment = ?? 
```

我如何在“A”“B”和“C”的所有 3 个不同的 idEquipments 上过滤这个？显然，我不能让 WHERE Equipment.IdEquipment = 1 和 Equipment.IdEquipment = 2 因为一个单元格不能等于 2 个不同的值。我也不能这样做 WHERE Equipment.IdEquipment = 1 或 Equipment.IdEquipment = 2 因为使用 OR 意味着任何持有至少一种可能性的用户都将被视为有效结果，我正在寻找一个拥有 ALL 3这种情况下的不同设备。

起初，我假设我必须使用表设备创建多个内部连接，使用别名，执行次数与我可能拥有的设备上的过滤器一样多，并使用每个别名和不同的过滤器。但是后来我的代码主管过来告诉我不要管它，因为他说随着添加的过滤器越来越多，成本会变得太高（尽管他没有给我更好的选择......）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T01:11:10.193

```
SELECT Users.idUser
FROM Users
INNER JOIN Licenses ON Licenses.IdUser = Users.idUser
INNER JOIN LicensesEquipments ON LicensesEquipments.IdLicense = Licenses.IdLicense
INNER JOIN Equipment ON Equipment.IdEquipment = LicensesEquipments.IdEquipment
WHERE Equipment.IdEquipment IN ('A', 'B', 'C')
GROUP BY IdUser
HAVING COUNT(DISTINCT Equipment.IdEquipment) = 3 <--must be # of unique items in IN clause 
```

如果您真的只需要用户 ID，您可以从查询中删除`Users`和`Licenses`表：

```
SELECT Licenses.IdUser
FROM Licenses 
INNER JOIN LicensesEquipments ON LicensesEquipments.IdLicense = Licenses.IdLicense
WHERE LicensesEquipments.IdEquipment in ('A', 'B', 'C')
GROUP BY Licenses.IdUser
HAVING COUNT(DISTINCT LicensesEquipments.IdEquipment) = 3 
```

此外，一些别名使其更易于阅读：

```
SELECT l.IdUser
FROM Licenses l
INNER JOIN LicensesEquipments le ON le.IdLicense = l.IdLicense
WHERE le.IdEquipment in ('A', 'B', 'C')
GROUP BY l.IdUser
HAVING COUNT(DISTINCT le.IdEquipment) = 3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-14T09:05:22.317

```
SELECT l.IdUser
FROM Licenses l
INNER JOIN LicensesEquipments le ON le.IdLicense = l.IdLicense
WHERE le.IdEquipment in (`enter code here`'A', 'B', 'C')
GROUP BY l.IdUser
HAVING COUNT(DISTINCT le.IdEquipment) = 3 
```

# c++ - 出版安全、宽松的记忆模型和 memcpy

> ID：13149859
> 
> 赞同：2
> 
> 时间：2012-10-31T01:07:34.540
> 
> 标签：c++, c++11, synchronization, x86, memory-model

我正在尝试在有关发布安全的部分中关注[这篇文章](http://bartoszmilewski.com/2008/12/01/c-atomics-and-memory-ordering/)。我的情况与文章中的简单示例没有什么不同，但“发布”的数据不是单个值，而是一个`struct`. 发布者将单独编写每个字段，因此通过将每个写入与存储一起包装`memory_order_release`我应该没问题。

消费者将首先检查`memory_order_acquire`数据是否准备就绪。然后，我很想使用 a`memcpy`将整个发布的内容复制`struct`到其他地方（因为它更适合其他预先存在的代码），但这似乎不安全，因为我无法指定内存模型。这只是偏执狂还是会是一个严重的问题？

接受特定于 amd64/x86 的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T01:13:18.347

获取语​​义意味着稍后按程序顺序加载不会在障碍之前重新排序，无论您在以后的加载中要求什么语义。所以我相信在获取屏障之后使用 memcpy 读取结构是安全的。

# javascript - Flot 无法在 FireFox 中显示大图

> ID：13149860
> 
> 赞同：1
> 
> 时间：2012-10-31T01:07:34.697
> 
> 标签：javascript, jquery, firefox, internet-explorer-9, flot

我遇到了一个问题，即 Flot 库在 Firefox 中无法显示大图。

这是我的样本。

[http://jsfiddle.net/SunMoonStar/9x7aJ/1334/](http://jsfiddle.net/SunMoonStar/9x7aJ/1334/)

当我将高度设置为 50000 时，我会收到这样的错误

```
NS_ERROR_FAILURE: Component returned failure code: 0x80004005 (NS_ERROR_FAILURE) [nsIDOMCanvasRenderingContext2D.save] 
```

我希望任何人都可以帮助我。

提前致谢。

**更新：**

IE9 标记是因为当我将高度设置为 50000 时，它只能显示 IE9 中图形的一半。

我认为这可能与 FireFox 的原因相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T12:12:44.747

是的; 这是大多数/所有浏览器的常见问题，而不仅仅是 Firefox。这不是 Flot 的问题，而是浏览器画布实现的限制。

画布被设计为在单个屏幕内工作，即最多几千乘几千像素。这是出于多种原因；例如，推动 25 亿像素（50k x 50k）的性能将非常糟糕，几乎毫无用处。所以我严重怀疑浏览器开发人员是否设计或测试了如此大的画布尺寸。

您需要重新考虑页面的架构，考虑到我上面提到的性能问题，这可能无论如何都行不通。我假设，在如此大的尺寸下，你正在做某种滚动。与其创建一个巨大的画布并在父 div 中滚动它，不如使用 Flot 导航插件在更小的画布中滚动图表数据。

# mongodb - map reduce 需要很长时间才能减少 26 条记录

> ID：13149862
> 
> 赞同：-1
> 
> 时间：2012-10-31T01:07:47.603
> 
> 标签：mongodb, mapreduce

这就是我正在做的事情：

```
mongos> db.campaign_raw_data_459_imp.count()
21800002
mongos> db.campaign_raw_data_459_imp.find({ts:1350585328}).count()
26
mongos>  map = function () { emit(this.cookie, 1);}
function () {
  emit(this.cookie, 1);
}
mongos>  reduce = function (key, values) {return 1;}
function (key, values) {
  return 1;
}
mongos> 
mongos> db.campaign_raw_data_459_imp.mapReduce(map, reduce, {out: { replace : "garbage"}}, query={ts:1350585328})
//This is hanging and taking forever, over 10 minutes now 
```

此集合中有 2100 万份文档。而且，对于给定的时间戳 ( `ts`=1350585328)，有 26 条记录。这里的目标是计算匹配记录中有多少唯一 cookie。所以它应该找到所有匹配的文档，其中 26 个。然后根据cookie将它们放入桶中，然后对桶进行计数。我假设它会根据查询首先进行查找，然后对这些返回值进行映射/归约。如果是这种情况，那么集合的大小根本不重要。`count()`眨眼间，它就在第二行中完成了。

`ts`我在and上有这个索引`cookie`，并且我有一个带有三个副本集的三个分片设置。我的集合在三个节点上分片，每个分片是一个具有 3 个成员的副本集。

为什么这需要这么长时间？对于 prod，我将把 ts 开放为一个范围（也许是最后一个小时），所以它会有比 26 个更多的匹配文档。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T02:11:28.003

`mapReduce`调用参数应如下所示（单个对象中的所有选项）：

```
db.campaign_raw_data_459_imp.mapReduce(map, reduce, 
    {out: { replace : "garbage"}, query: {ts:1350585328}}) 
```

# python - 在 Debian 中更改默认 python 版本 — 库导入问题

> ID：13149868
> 
> 赞同：1
> 
> 时间：2012-10-31T01:08:40.673
> 
> 标签：python, installation

我有一些我希望使用 Python 2.7.3 运行的代码，不幸的是我无法让 Debian 完成它。问题是我无法在 Debian 上新安装的 Python 2.7.3 上导入一些库。（Debain 最初有 2.6.x）

我必须在 Debian 上运行一些我希望使用 Python 2.7.3 运行的加密代码。不幸的是，M2Crypto 的导入在 Python 2.7.3 上失败，但在 2.6(.x) 上运行良好。

仅将别名指向 python2.7 将不起作用，因为未正确安装库。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T01:18:55.413

It's not a particularly good idea to change the system Python - *lots* of other stuff depends on it. Instead, use [pip](http://www.pip-installer.org) to install the libraries you need:

```
$ pip-2.7 install M2Crypto 
```

# scala - 在 Scala 中，如何确保理解遍历所有非空列表？

> ID：13149873
> 
> 赞同：0
> 
> 时间：2012-10-31T01:08:49.377
> 
> 标签：scala, scala-collections

我有以下两个列表，我不确定在运行时 list2 是空的还是满的，但 list1 总是非空的，如何确保列表的以下 for 循环值至少被打印

```
val list1 = List(1,2,3)                   //> list1  : List[Int] = List(1, 2, 3)
val list2 = List()                        //> list2  : List[Nothing] = List()
for( counti <- list1 ; countj <- list2 ) yield println (counti + " - " + countj)
                                                  //> res7: List[Unit] = List() 
```

我期待类似的东西

```
1 - BLANK
2 - BLANK
3 - BLANK 
```

但上面的 for 循环给了我空白结果 List()

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-31T01:11:32.963

```
for (
  counti <- list1;
  countj <- if(list2.nonEmpty) list2 else List("BLANK")
) {
  println(counti + " - " + countj)
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T01:14:43.697

`yield`首先，如果您只使用`for`副作用（打印），则不需要：

```
for( counti <- list1 ; countj <- list2 )
  println (counti + " - " + countj) 
```

`countj`其次，如果您有一个空列表，您期望 的值是多少？如果`countj`.

这可能会做你想做的事：

```
// Just print counti
if (list2.isEmpty)
  for( counti <- list1 ) println(counti)
// Print both    
else for ( counti <- list1 ; countj <- list2 )
  println (counti + " - " + countj) 
```

# colors - 动画 CCSprite 的颜色

> ID：13149883
> 
> 赞同：0
> 
> 时间：2012-10-31T01:09:57.573
> 
> 标签：colors, cocos2d-iphone, jquery-animate

我有一个使用 setColor 方法覆盖其颜色的 CCSprite。例如

```
[mySprite setColor:ccBLUE]; 
```

效果很好！

问题是我想为这个属性设置动画，但我找不到任何指示如何执行此操作的资源（除了手动执行！！！）

我想做的是这样的：

```
[mySprite runAction:[ccColorAnimate toValue:ccc3FromUInt(0x00FF00) withDuration:0.5f]]; 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T12:55:44.623

你可以创建一个 CCActionInterval 的子类来实现它。看看抛出它的任何子类的代码来理解，你需要实现什么。

# html - 在 iFrame 中包含站点地图以制作快速站点导航栏？对SEO的影响？

> ID：13149884
> 
> 赞同：2
> 
> 时间：2012-10-31T01:10:04.323
> 
> 标签：html, seo, navigation, sitemap

我正在慢慢建立一个网站（我不会链接到这个网站，所以我看起来不像只是在寻找流量）而且我只有 HTML 和 CSS 的经验。我打算最终学习 PHP、JavaScript 和其他一些与 Web 开发相关的东西......但现在我只想要 HTML 和 CSS 答案（包括“你很笨，你不能那样做”）。

好的，直截了当...我希望我的网站有一个导航栏（可能在左侧），不需要为我创建的每个页面进行更新。我的理论是在一个单独的页面中设置一个搜索引擎友好的站点地图，并使用 iFrames 将该站点地图嵌入到我的所有页面中。这样，当我更新我的站点地图时，我会在每个页面上更新我的导航栏。在我**没有经验的**头脑中，这似乎是一个简单、有效且优雅的解决方案。

我的问题是：搜索引擎爬虫如何看待这个？我知道他们不能很好地处理框架中的数据，但站点地图是它自己的页面，所以爬虫应该能够毫无问题地导航，对吧？这会对搜索引擎信任我的网站的程度产生不利影响（即损害我的页面排名）吗？我是否因为试图做一些非常愚蠢的事情而失去了理智？

任何反馈将不胜感激，如果我违反了 Stackoverflow 的规则，请告诉我，我会做出必要的更改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T10:45:44.460

请访问此 Google 支持页面，了解如何创建手动站点地图。它解释得很好，很容易理解。
[http://support.google.com/webmasters/bin/answer.py?hl=en&answer=34657](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=34657)

# c++ - 在什么情况下 sprintf 比 stringstream 更受欢迎？

> ID：13149886
> 
> 赞同：2
> 
> 时间：2012-10-31T01:10:34.167
> 
> 标签：c++, visual-c++

有没有人有任何具体的例子说明为什么在 C++ 环境中更喜欢 sprintf 而不是 stringstream？此外，如果您在 Microsoft 世界工作，是否有任何理由更喜欢 sprintf 而不是 _snprintf？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T01:17:45.527

我`sprintf`一直在 C++ 中使用。我发现它更容易使用，尤其是在我编写时间戳和其他特殊格式的字符串时。当然，您可以使用流修饰符来做到这一点，但它太冗长了，您无法一眼看出代码实现了什么。

`_snprintf`如果您绝对知道您不会溢出缓冲区，并且您需要尽可能快的写入或者只是不希望额外的参数混乱，那么最好。

说到缓冲区，那是另一回事......通常`sprintf`当我在堆栈上有一个缓冲区或者我正在写入内存中的现有缓冲区时，我会使用它的变体。我不一定想要分配和复制`string`对象的开销。

并不是说我不使用`ostringstream`——我当然会使用（尽管我更经常使用`istringstream`，相反）......但我更喜欢使用两种工具而不是一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T02:51:55.817

您永远不会喜欢`sprintf`流，但在某些情况下您可能会考虑`snprintf`（或`_snprintf`对于 MS 编译器）。

对于已测量性能的适当性能密集型代码片段，`snprintf`可能会比使用流提高性能。

`snprintf`此外，如果您已经在维护`char[]`要传递给 C API 的缓冲区，则可以考虑使用。

重申一下，您应该始终喜欢`_snprintf`或`snprintf`超过，`sprintf`因为它们有助于防止各种安全问题和/或难以发现的错误。

# ruby-on-rails - 键入 $ rails server 和输出看起来像是卡住了

> ID：13149893
> 
> 赞同：0
> 
> 时间：2012-10-31T01:11:22.410
> 
> 标签：ruby-on-rails

我正在做 Michael Hartl 的 Ruby 和 Rails 教程，并且刚刚开始我的第一个应用程序。我`$ rails server`在命令行中输入并得到以下输出：

```
=> Booting WEBrick
=> Rails 3.2.8 application starting in development on http://0.0.0.0:3000
=> Call with -d to detach
=> Ctrl-C to shutdown server
[2012-10-30 20:56:51] INFO  WEBrick 1.3.1
[2012-10-30 20:56:51] INFO  ruby 1.9.3 (2012-10-12) [x86_64-darwin12.2.0]
[2012-10-30 20:56:51] INFO  WEBrick::HTTPServer#start: pid=2205 port=3000

Started GET "/assets/rails.png" for 127.0.0.1 at 2012-10-30 20:57:56 -0400
Connecting to database specified by database.yml
Served asset /rails.png - 200 OK (3ms) 
```

看起来它仍在运行并且卡住了。本教程的下一步要求通过`$ git add`. `$ rails server`我应该在仍然运行时在新的终端窗口中执行此操作吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T01:15:38.923

是的，这将在服务器运行时出现“卡住”。您需要在新窗口中执行任何其他命令。这是您的应用程序显示所必需的。

# node.js - Node.js Passport 在页面加载时获取 Facebook 会话

> ID：13149896
> 
> 赞同：2
> 
> 时间：2012-10-31T01:12:06.027
> 
> 标签：node.js, facebook, authentication, passport.js

我的护照`Facebook Strategy`工作正常。但是，阅读`facebook`文档时我偶然发现了这一点：

**脸书文档**

> 使用查询字符串设置时的特殊注意事项：
> 
> 如果您想在 App Center 中使用服务器端身份验证流程，请务必确保在将代码交换为访问令牌时正确传递了 redirect_uri 参数。您应该将 redirect_uri 参数设置为您网站的点击后到达 URL。在大多数情况下，URL 看起来像：
> 
> [http://www.example.com/?fb_appcenter=1&fb_source=search&code=CODE_HERE](http://www.example.com/?fb_appcenter=1&fb_source=search&code=CODE_HERE) 因此您应该将 redirect_uri 设置为相同的值。请确保此逻辑是动态的，因为附加到您的点击后到达网址的查询参数可能会发生变化。

在 App Center 上有一个`visit website`按钮，可将用户发送到应用程序并在此过程中将他们登录。如何使用护照执行此操作？我是否必须将查询字符串添加到`callbackURL`？我猜这是同样的问题，但我还需要类似`FB.getLoginStatus()`facebook javascript SDK 提供的东西来链接用户，如果他们打开了他们的 facebook 并且之前添加了应用程序。这一切都是由`passport`任何方式提供的吗？

# ruby - Ruby 中的“除非 nil 否则返回”语句

> ID：13149897
> 
> 赞同：1
> 
> 时间：2012-10-31T01:12:10.833
> 
> 标签：ruby

我有以下代码：

```
def test
  show_msg and return unless nil
  puts "This line can not be executed"
end

def show_msg
 puts "exit here"
end

test 
```

输出：

```
exit here
This line can not be executed 
```

我期望唯一的在线：

```
exit here 
```

为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T01:19:21.043

as said in the comments, this doesn't work because `puts` actually [returns nil](http://www.ruby-doc.org/core-1.9.3/IO.html#method-i-puts), so you can either explictly return something from your `show_msg` function, or either use `p` for instance

```
def test
  show_msg and return unless nil
  puts "This line can not be executed"
end

def show_msg
 p "exit here"
end

test 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-31T01:24:50.513

我不确定你想用`unless nil`;做什么 那是无操作的，因为`nil`永远不会是真正的价值。（在 Ruby 中，`nil`除了`false`它自身之外，它是在布尔真值测试上下文中被认为是假的一个值。`nil`当它不等于 时，说“是假的”是令人困惑的`false`，所以 Ruby 主义者反而说这`nil`是“假的”）。

反正`return unless nil`就是和plain一样`return`。

您的`show_msg`方法缺少显式`return`语句，将返回其中最后一条语句的值。该语句是 a `puts`，它返回`nil`。所以`show_msg`也返回`nil`，因为`nil`是错误的，所以`and`在它到达 之前短路`return`。因此，`return`没有执行，Ruby 继续到下一行并执行它。

# c# - 使用外部进程（即不通过页面的代码隐藏）缓存对象的任何方式？

> ID：13149901
> 
> 赞同：0
> 
> 时间：2012-10-31T01:13:03.097
> 
> 标签：c#, asp.net, caching, web-applications, data-caching

我已经获得了我的 ASP.NET Web 应用程序所需的第一批真正海量的数据。到现在为止（实际上是两年！）还没有出现如此昂贵的东西，以至于我不能只在 Page_Load 上执行它或将它存储在 ViewState 或 Session 中。但是现在，我需要一个保持相当静态的对象列表（最多每天更新一次）并包含大约 5000 个对象，并且每次在 Page_Load 上构建它都会导致加载时间受到明显影响。

一些关于缓存的谷歌搜索显示了一些非常基本的例子，使用类似的东西`Cache["myStuff"] = myObject;`，这一切都很好。但我想知道是否有某种方法可以将我的 Web 应用程序设置为在特定时间运行更新，而不管应用程序是否正在被访问或正在使用。

例如，我希望此过程更新列表，使其每天在凌晨 4:00 运行一次，此时没有人使用任何东西。因此，假设在第 1 天下午，Page_Load 检查以获取缓存的对象，但它返回 null，所以在这种情况下，硬着头皮请求/构建第 1 天剩余时间的列表，将其存储在缓存中. 在第 1 天剩下的时间里，没有人必须构建对象，因为它在缓存中并且仍然有效。

第 1 天结束，现在是第 2 天凌晨 4:00。没有人使用任何页面。我希望从第一天起存储在缓存中的对象被删除并重新构建，这样当人们早上到达办公室时，第一个访问该页面的人不需要构建今天的列表，已经完成了。

我唯一的想法是研究创建一个在 Windows 计划任务或其他东西上运行的控制台应用程序。但即便如此，我也不确定如何从这样的外部应用程序与 ASP.NET Web 应用程序进行交互。

希望我说得通。我想要完成的事情甚至可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T01:18:24.857

If you use a distributed cache like MemCached, you could create a Windows Service or Console application for populating the cache. Since both applications (The service and the web app) will use the same cache, it will solve your problem.

Another solution is to have a page just for that (i.e. /startcache.aspx) that will do the cachin on page_load. And you can schedule a request to that page. You could also hide the page from outside the web-app using some kind of firewall (so nobody accesses that page!). Finally, the good part of this solution is that you can reuse your current code, as it will work in the same project.

Hope it helps.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T01:20:26.597

[Redis](http://code.google.com/p/servicestack/wiki/ServiceStackRedis) is another option for an out of proc 3rd party cache/key value store.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T01:43:23.167

减少服务器和后端的负载并提供所有日常数据（我从问题中了解到）

为什么不创建一个数据文件（CSV、XML、JSON）并将其作为数据点提供。

从您的问题来看，客户端（应用程序）似乎能够针对该数据集运行自己的查询。

创建这样的文件可以在固定的时间集上完成，保存一次。不需要包括第三方解决方案（除了他们受人尊敬的品质）

# c# - 任何 CPU - 首选 32 位

> ID：13149905
> 
> 赞同：16
> 
> 时间：2012-10-31T01:13:20.833
> 
> 标签：c#, visual-studio-2012

Any CPU - Prefer 32 bit 选项有什么作用？

虽然我知道 WinRT 不能处理 exe 并且只能运行 Windows Store 应用程序，但[StackOverflow](https://stackoverflow.com/questions/7508965/what-does-the-prefer-32-bit-compiler-flag-mean-for-visual-studio-11-managed-ap)上[存在](https://stackoverflow.com/questions/12066638/what-is-the-purpose-of-the-prefer-32-bit-setting-in-visual-studio-2012-and-how)几个问题，它们提出了相同的问题，并且都引用了这个[博客](http://blogs.microsoft.co.il/blogs/sasha/archive/2012/04/04/what-anycpu-really-means-as-of-net-4-5-and-visual-studio-11.aspx)，上面写着：

> 在 .NET 4.5 和 Visual Studio 11 中，奶酪已被移动。大多数 .NET 项目的默认值还是 AnyCPU，但现在 AnyCPU 的含义不止一种。AnyCPU 有一个额外的子类型，“Any CPU 32-bit Preferred”，这是新的默认值（总体而言，现在 /platform C# 编译器开关有五个选项：x86、Itanium、x64、anycpu 和 anycpu32bitpreferred ）。当使用这种风格的 AnyCPU 时，语义如下：
> 
> *   如果进程在 32 位 Windows 系统上运行，则它作为 32 位进程运行。IL 被编译成 x86 机器码。
> *   如果进程在 64 位 Windows 系统上运行，则它作为 32 位进程运行。IL 被编译成 x86 机器码。
> *   **如果进程在 ARM Windows 系统上运行，它将作为 32 位进程运行。IL 被编译为 ARM 机器码。**

然而，在购买我的 Surface RT 后，我创建了一个 Hello World 程序，将其设置为 Any CPU，检查 Prefer 32 Bit 标志，编译并将其复制到我的 Surface。当我运行该程序时，操作系统告诉我它无法运行该程序，我应该像对待任何 x86/x64 exe 一样关注市场。显示的确切消息是：“此应用程序无法在您的 PC 上运行。要查找此 PC 的应用程序，请打开 Windows 应用商店。”

那么这实际上是做什么的，是否可以在 ARM 上为 Window RT 编译 Any CPU 应用程序？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-31T03:27:29.070

仅根据您指定的报价，它表明它意味着以下内容：

*   如果 CPU 支持 32 位处理，那么最终的机器代码将是 32 位（ARM 或 x86，无所谓）。

*   如果不是，那么机器代码将是 64 位的。

在过去，AnyCPU 的意思是“我与平台无关”。这通常意味着您将在 64 位平台上获得 64 位，否则将获得 32 位。

但是，即使在 64 位 CPU 上，您也可能需要 32 位是有原因的：指针大小只有一半，因此您使用的内存更少；代码更小，因此更适合缓存等。但是，没有办法强制 CLR 使用 32 位，并且在必要的情况下仍保留 64 位。

现在，使用 AnyCPU - 首选 32 位，您可以拥有自己的蛋糕（必要时支持 64 位）并吃掉它（可能时支持 32 位）

注意：如果我没记错的话，Itanium 将是一个只支持 64 位而不是 32 位代码的平台。可能有也可能没有其他人。

*免责声明：我不是专家，这只是来自我在过去 6 个月左右阅读的各种博客文章*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-24T02:19:49.203

Windows RT 需要对 exe 文件进行签名才能运行。但是，如果你[越狱](http://forum.xda-developers.com/showthread.php?t=2092348)你的 RT，那么它可以运行**任何**exe 文件，只要它在 ARM（.NET 或原生 ARM）应用程序上的 Windows 上受支持

有关此选项的更多信息，[请参阅 .NET 4.5 和 Visual Studio 11 中 AnyCPU 的真正含义](http://blogs.microsoft.co.il/blogs/sasha/archive/2012/04/04/what-anycpu-really-means-as-of-net-4-5-and-visual-studio-11.aspx)

# jquery - #nav 干扰循环

> ID：13149906
> 
> 赞同：0
> 
> 时间：2012-10-31T01:13:32.823
> 
> 标签：jquery, cycle

我在 Twitter Bootsrap 结构中使用以下 jQuery .cycle 插件，它也使用 nav 作为 div 类。如何在不使用#nav 作为 div 名称的情况下运行它？

感谢互联网人。

乔伊

```
<style type="text/css">
#slideshow { left: 20px }
#nav { width: 100%; height: 80px; margin: 15px;  }
#nav li { width: 50px; float: left; margin: 8px; list-style: none }
#nav a { width: 50px; padding: 3px; display: block; border: 1px solid #ccc; }
#nav li.activeSlide a { background: #88f }
#nav a:focus { outline: none; }
#nav img { border: none; display: block }
</style> 
```

```
<!--<script type="text/javascript" src="http://malsup.github.com/chili-1.7.pack.js"></script>-->
<script type="text/javascript" src="http://malsup.github.com/jquery.cycle.all.js"></script>
<!--<script type="text/javascript" src="http://malsup.github.com/jquery.easing.1.3.js"></script>-->
<script type="text/javascript">
$(function() {
    $('#slideshow').before('<ul id="nav">').cycle({
        fx:     'fade',
        speed:  'fast',
        timeout: 0,
        pager:  '#nav',
        pagerAnchorBuilder: function(idx, slide) {
            return '<li><a href="#"><img src="' + slide.src + '" width="50" height="50" /></a></li>';
        }
    });
});
</script>

<div id="slideshow" class="pics">
    <img src="http://cloud.github.com/downloads/malsup/cycle/beach1.jpg" width="200" height="200" />
    <img src="http://cloud.github.com/downloads/malsup/cycle/beach2.jpg" width="200" height="200" />
    <img src="http://cloud.github.com/downloads/malsup/cycle/beach3.jpg" width="200" height="200" />
    <img src="http://cloud.github.com/downloads/malsup/cycle/beach4.jpg" width="200" height="200" />
    <img src="http://cloud.github.com/downloads/malsup/cycle/beach5.jpg" width="200" height="200" />
    <img src="http://cloud.github.com/downloads/malsup/cycle/beach6.jpg" width="200" height="200" />
    <img src="http://cloud.github.com/downloads/malsup/cycle/beach7.jpg" width="200" height="200" />
    <img src="http://cloud.github.com/downloads/malsup/cycle/beach8.jpg" width="200" height="200" />
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T02:56:16.880

因为您在选项中定义了寻呼机的选择器，所以您可以给它任何您想要的 ID。`nav`只需将循环 css 和初始化代码中的所有实例更改为其他内容即可。

# c++ - 将单个字符串分成多个堆栈

> ID：13149907
> 
> 赞同：0
> 
> 时间：2012-10-31T01:13:39.747
> 
> 标签：c++, string, loops, stack

我想要做的是取一个字符串，说“（（4 + 2）/ 2）”，并评估它，返回3。我应该通过将字符串分成三个单独的堆栈来做到这一点......一个用于左括号 '('，一个用于数字 '0' - '9'，一个用于运算符，'+' '-' '*' '/' 和 '%'。

我遇到的问题实际上是将字符串分成堆栈。我的代码如下：

```
//The evaluate function takes a string containing an arithmetic expression,
//evaluates it,and returns its result
int evaluate(string exp)
 {
 stack<char> parStack;
 stack<int> numStack;
 stack<char> opStack;

 int j = exp.size();
 int i=0;
 char x;

 //for (i=0; i<j; i++)
 //{
 while (i<j)
 {
     if(exp[i] = '(')
     {
         parStack.push(exp[i]);
         cout << exp[i] << endl;  // just to see what is being pushed
     }
     if((exp[i]='0') || (exp[i]='1') || (exp[i]='2') || (exp[i]='3') || (exp[i]='4') || (exp[i]='5') || (exp[i]='6') || (exp[i]='7') || (exp[i]='8') || (exp[i]='9'))  // I feel this is terribly inefficient
     {
         numStack.push(exp[i]);
     }
     if((exp[i] = '+') || (exp[i] = '-') || (exp[i] = '*') || (exp[i] = '/') || (exp[i] = '%'))
     {
         opStack.push(exp[i]);
     }
     i++;
 }
 //}  // end for

 return -1;

 }  // end evaluate 
```

如您所见，我尝试使用 for 循环和 while 循环来解决这个问题，两者都给出了相同的结果。发生的情况是，由于某种原因，如果我输入“（5 + 3）”，它会打印出“（（（（（”）作为被推送的内容。为什么我的 if 语句会像这样重复自己？暂时忽略返回-1 最后，因为这将完成以实际评估字符串，我确信我可以处理，一旦我可以有效地创建堆栈。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T01:21:12.013

您应该在 if 语句中使用两个“=”

```
if(exp[i] = '(')  //wrong (your code)
if(exp[i] == '(') //right 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-31T01:21:06.417

您使用了 = 运算符而不是 == 运算符。当代码执行 '(' 的 ascii 值时，在 if 条件中检查并分配给您的字符串。只需将其更改为 == 您的代码就可以正常工作......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T01:56:34.817

同样出于实际目的，您可能希望更改 if 条件以使用字符串搜索，如下所示：

```
const char OPEN_PARAN = '(';
const string digits = "0123456789";
const string operators = "*-+%";

//...
while(i < j){
  if(exp[i] == OPEN_PARAN){ ... }
  else if(digits.find(exp[i]) != string::npos){ ... }
  else if(operators.find(exp[i]) != string::npos){ ... }
  else{ ... }
} 
```

# visual-studio-2008 - obtain common.logging.dll for visual studio.net 2008

> ID：13149920
> 
> 赞同：-1
> 
> 时间：2012-10-31T01:16:44.740
> 
> 标签：visual-studio-2008

I would like to download a version for C# 2008 of the common.logging.dll from the followinng url: [http://netcommon.sourceforge.net/](http://netcommon.sourceforge.net/).

Do you know how I can obtain a download to the version I need? If so, can you tell me how to access the version I need?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T01:31:54.607

在您链接中提到的[下载](https://github.com/net-commons/common-logging/downloads)页面中，有 zip。

在最新版本的 zip 中有一个文件夹`bin\net\2.0` ，我假设它应该包含与 .Net 2.0 兼容的 dll，它应该适用于 VS 2008。

# c++ - 如何使用 SOCI 为 SELECT * 编码？

> ID：13149922
> 
> 赞同：0
> 
> 时间：2012-10-31T01:17:00.623
> 
> 标签：c++, rdbms, soci

在[SOCI](http://soci.sourceforge.net/)的大多数示例中，调用者必须知道查询中的字段和类型，并通过 a `soci::rowset<>`of`boost::tuple<>`或其他方式指定它们。

有没有办法在事先**不**知道列的类型和数量的情况下进行编码，就像在`SELECT * FROM ...`查询中一样？

如果是这样，你能发布一个简短的例子吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T09:14:35.000

`soci::rowset<soci::row>`正是您所需要的——`soci::row`提供动态绑定。

从文档：

> 对于某些应用程序，希望能够从任意结构化的表中选择数据（例如，通过“select * from ...”）并根据其类型格式化结果数据。SOCI 通过 soci::row 和 soci::column_properties 类支持这一点。

看：

[http://soci.sourceforge.net/doc/3.2/exchange.html#dynamic](http://soci.sourceforge.net/doc/3.2/exchange.html#dynamic)
[http://soci.sourceforge.net/doc/3.2/statements.html#rowset](http://soci.sourceforge.net/doc/3.2/statements.html#rowset)

详情。

**文档摘录：**

> 例如，下面的代码从任意表中的选定数据行创建 XML 文档：

```
row r;
sql << "select * from some_table", into(r);

std::ostringstream doc;
doc << "<row>" << std::endl;
for(std::size_t i = 0; i != r.size(); ++i)
{
    const column_properties & props = r.get_properties(i);

    doc << '<' << props.get_name() << '>';

    switch(props.get_data_type())
    {
    case dt_string:
        doc << r.get<std::string>(i);
        break;
    case dt_double:
        doc << r.get<double>(i);
        break;
    case dt_integer:
        doc << r.get<int>(i);
        break;
    case dt_long_long:
        doc << r.get<long long>(i);
        break;
    case dt_unsigned_long_long:
        doc << r.get<unsigned long long>(i);
        break;
    case dt_date:
        std::tm when = r.get<std::tm>(i);
        doc << asctime(&when);
        break;
    }

    doc << "</" << props.get_name() << '>' << std::endl;
}
doc << "</row>"; 
```

> 应该传递给 row::get() 的类型 T 参数取决于从 column_properties::get_data_type() 返回的 SOCI 数据类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T01:30:48.443

我不相信有办法。可能是因为“select *”通常被认为是危险的。可以添加、重新排序等列，您的查询现在已中断。为您未来的自己节省一些调试并列出列。

# php - 长时间运行的 PHP 方法 - 如何处理？

> ID：13149924
> 
> 赞同：0
> 
> 时间：2012-10-31T01:17:01.130
> 
> 标签：php

这是我的场景。在注册我的应用程序期间 - 我触发了一些长时间运行的 PHP 方法调用（例如，使用 OpenGraph API 获取 UserFriendLikes 等）。

我希望这些方法在用户没有注意到的情况下在后台运行 - 并让该方法在自己的时间完成。

实现它的最佳方法是什么？只是从用户注册页面调用 longRunningMethod() 是否有效 - 或者我需要做些什么来确保当用户导航到另一个页面等时它不会被终止？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T01:19:34.010

我会使用 shell exec 创建一个新进程。像这样的东西应该工作：

```
shell_exec("./scriptname.php > /dev/null 2>/dev/null &"); 
```

我相信它将启动一个新进程并继续在调用页面上执行，允许用户像往常一样继续。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-31T01:36:41.757

上面 Tim S 的解决方案会起作用，但很难扩展。另一种方法是将工作请求放入队列中，由工作程序提取并处理。换句话说，注册页面可以直接放入队列中，然后用户可以自由导航到其他页面。

看看像[RabbitMQ](http://www.rabbitmq.com/tutorials/tutorial-two-python.html)这样的工作队列 这是文档中描述它的一个词，看起来它将有助于解决您的问题：

> 工作队列（又名：任务队列）背后的主要思想是避免立即执行资源密集型任务而不得不等待它完成。相反，我们将任务安排在以后完成。

如果您不想自己设置 Rabbit MQ，可以尝试在[Iron.io](http://www.iron.io/products/worker)上注册工作人员。我认为它带有一个免费帐户。

# google-maps - 如何获取谷歌地图视口中显示的国家列表？

> ID：13149929
> 
> 赞同：1
> 
> 时间：2012-10-31T01:17:25.543
> 
> 标签：google-maps

例如，我将这张地图放大到[东南亚的一个地区。](https://maps.google.com/?ll=12.511665,116.542969&spn=24.319247,43.022461&t=h&z=5 "例子")

鉴于该缩放级别，我想获取当前显示的所有国家/地区？那可能吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T03:35:05.643

听起来你想要[这样的例子](http://www.geocodezip.com/geoxml3_test/v3_geoxml3_kmltest_linktoB.html?lat=11.562038&lng=117.153352&zoom=5&type=m&filename=http://www.geocodezip.com/geoxml3_test/world_countries_kml.xml)，它在侧边栏中列出了视图中的多边形：

该示例是使用 geoxml3 和 KML 实现的，但您似乎可以使用 FusionTables 做类似的事情（自然地球数据集包含国家多边形并且是公开的）。

# symfony - Symfony2 FOSUserBundle 邀请：“inversedBy”映射错误

> ID：13149930
> 
> 赞同：1
> 
> 时间：2012-10-31T01:17:28.407
> 
> 标签：symfony, entity, fosuserbundle

FOSUserBundle Invitation 的安装已按照手册完成。
从表面上看，它确实有效。
但是，分析器会显示映射错误。
我认为按照手册中的规定设置了“inversedBy”设置。
你怎么看？

实体

```
/** @ORM\Entity */
class Invitation
{
    /**
     * @ORM\OneToOne(targetEntity="User", inversedBy="invitation", cascade={"persist", "merge"})
     */
    protected $user;

    // ...

/**
 * @ORM\Entity
 * @ORM\Table(name="fos_user")
 */
class User extends \FOS\UserBundle\Entity\User
{
    /**
     * @ORM\OneToOne(targetEntity="Invitation", inversedBy="user")
     * @ORM\JoinColumn(referencedColumnName="code")
     * @Assert\NotNull(message="Your invitation is wrong")
     */
    protected $invitation;

    // ... 
```

探查器

```
FOS\UserBundle\Entity\User   Valid

My\SampleBundle\Entity\User 
The field My\SampleBundle\Entity\User#invitation is on the owning side of a bi-directional
 relationship, but the specified mappedBy association
  on the target-entity My\SampleBundle\Entity\Invitation# does not contain
   the required 'inversedBy' attribute.

My\SampleBundle\Entity\Invitation   
The field My\SampleBundle\Entity\Invitation#user is on the owning side of a bi-directional
 relationship, but the specified mappedBy association
  on the target-entity My\SampleBundle\Entity\User# does not contain
   the required 'inversedBy' attribute. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T05:06:32.930

根据参考[http://docs.doctrine-project.org/en/2.0.x/reference/association-mapping.html](http://docs.doctrine-project.org/en/2.0.x/reference/association-mapping.html)，反面（在本例中为邀请）必须将用户称为“mappedBy”，而不是“inversedBy” . 尝试

```
class Invitation
{
    /**
     * @ORM\OneToOne(targetEntity="User", mappedBy="invitation", cascade={"persist", "merge"})
     */
    protected $user;

    // ... 
```

# javascript - 创建一个空的 jQuery 对象：$({}) 或 $()

> ID：13149945
> 
> 赞同：11
> 
> 时间：2012-10-31T01:19:17.877
> 
> 标签：javascript, jquery

我已经看到了以下两个变量初始化来创建一个空的 jQuery 对象。使用其中一个是否有重大区别或优势？

```
var a = $({});
var b = $(); 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-10-31T01:22:36.610

如果您的意思是`$([])`，那是从前 call`$()`实际上等同于`$(document)`（这是一个未记录的功能）的东西。所以要得到一个空集，你必须调用`$([])`. 这[在 jQuery 1.4 中有所改变](http://api.jquery.com/jQuery/#returning-empty-set)；现在记录的功能`$()`是返回一个空集。

*将对象*传递给 jQuery 构造函数是完全不同的野兽。 `$({})`不会创建一个空的 jQuery 对象。它创建一个长度为 1 的 jQuery 对象；所选项目是对象本身。

将 JS 对象传递给 jQuery 构造函数可以让您利用 jQuery 更深奥的特性：在（非 DOM）对象上绑定和触发事件。

例如：

```
var obj = { some: 'stuff' };

$(obj).on('someevent', function() { ... });

$(obj).trigger('someevent'); 
```

**无论哪种方式**，如果您的目标是实例化一个新的空 jQuery 对象，请使用`$()`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-31T01:20:48.313

我想你的意思是：

```
var a = $([]); //<- array not object
var b = $(); 
```

没有我知道的优势，第一个是旧版本，从 1.4 开始你可以使用更高版本。

# python - 类实例化验证

> ID：13149950
> 
> 赞同：0
> 
> 时间：2012-10-31T01:19:34.217
> 
> 标签：python, validation, class

我对python中的类实例化有一个问题。所以我有一堆不同类型的数据存储在同一个目录中，我只想使用仅适用于该类型的 python 类来处理其中的一种类型。不幸的是，数据的类型只有在通过类读入时才知道。所以我想知道是否有一种方法可以`__init__()`在数据类型不正确的情况下简单地停止类实例化，并在读取所有数据时简单地传递给下一个数据集？还是在类实例化时进行验证是个坏主意？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T01:24:12.583

您可以执行以下操作：

```
class MyClass(object):
    def __init__(self,data):
        if type(data) is int:  #In this example we don't want an int, we want anything else
            pass
        else:
            #do stuff here 
```

然后像这样使用它：

```
MyClass('This is ok') 
```

或者

```
MyClass(92) #This is not ok 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T01:37:00.317

正确的做法是，如果提供给类的数据类型错误，则*引发错误：*

```
class MyClass(object):
    def __init__(self, data):
        if not isinstance(data, correct_type):
            raise TypeError("data argument must be of type X") 
```

然后用 try except 子句包装你的实例：

```
try:
    myInstance = MyClass(questionable_data)

except TypeError:
    #data is not the correct type. "pass" or handle in an alternative way. 
```

这是有利的，因为它使数据需要是某种类型的事实非常明显。

另一种选择是按照 sberry 所说的那样做，并在尝试实例化类*之前显式测试数据类型：*

```
if isinstance(data, correct_type):
    myInstance = MyClass(data)
else:
    #data is not the correct type. "pass" or handle in an alternative way. 
```

# ruby-on-rails - 使用 Ajax 的 Omniauth 授权调用

> ID：13149952
> 
> 赞同：7
> 
> 时间：2012-10-31T01:19:44.027
> 
> 标签：ruby-on-rails, ajax, omniauth

将其用作链接时，我的 Rails 3 应用程序中的omniauth 工作正常：

```
link_to("Connect Twitter", "/auth/twitter", :id => "connect-to-twitter") 
```

现在我想通过 ajax 调用'/auth/twitter'。但是，在请求阶段之后不会返回任何内容。这是最后一个日志条目：

```
Started GET "/auth/twitter" for 127.0.0.1 at 2012-10-30 17:53:02 -0700
(twitter) Request phase initiated. 
```

这是我的 ajax 代码（在 Coffeescript 中）：

```
$("#connect-to-twitter").live("click", ->
  alert('get twitter')
  $.get('/auth/twitter', (data) ->
    alert(data)
  )
  return false
) 
```

（我知道这个问题之前在这里被问过，但我还没有看到任何真正的答案。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-04-15T10:04:15.317

我知道这个问题有点老了，但我还是会回答。在面对问题并寻求实现与OP打算相同的目标之后，我这样做了

`Omniauth`我写了一个中间件并插入到中间件的正上方

```
class OmniAuthMiddleware
  def initialize(app)
    @app = app
  end

  def call(env)
    status, headers, body = @app.call(env)
    request = Rack::Request.new(env)
    if request.xhr? and status == 302 and request.path_info =~ /\/auth\/\w+\z/ and body.class == Rack::BodyProxy
      location = headers["Location"]
      body = ActionDispatch::Response.new
      headers = {'Content-Type'=>'text/javascript; charset=utf-8'}
      body.body = ["window.location.href='#{location}'"]
      body.headers = headers
      status = 200
    end
    [status,headers,body]
  end
end 
```

在这里我如何通过中间件在中间件​​堆栈中插入

```
Rails.application.config.middleware.insert_before OmniAuth::Builder,OmniAuthMiddleware 
```

这是我的中间件堆栈的样子

```
...
...
...
use Warden::Manager
use Rack::Mongoid::Middleware::IdentityMap
use ExceptionNotifier
use OmniAuthMiddleware
use OmniAuth::Builder
run PoasterApi::Application.routes 
```

有了这个，我能够实现我想要的

**注意**：我没有在 Omniauth 文档中找到任何关于 ajax 的信息，因为我在争分夺秒，因此我实施了这个修复（因为谷歌搜索从来没有给我一个有利的答案）。Omniauth 也有可能支持 ajax 响应，但正如我所说，我在文档中找不到。答案是那些希望实现完全相同的功能但不确定如何在 Omniauth 中实现它的用户。

我仍在查看 Omniauth 以查找他们是否存在通过设置/调整配置直接在 Omniauth 中执行此操作的方法

希望这有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-22T09:07:48.477

两件事：首先，由于您使用的是 localhost，因此您必须设置端口号（假设为 3000），因此端点应该是**localhost:3000**。其次，您还必须设置一个重定向，它也应该是**localhost:3000**。

# java - Instantiating object using incompletely initialized 'this' as parameter

> ID：13149955
> 
> 赞同：1
> 
> 时间：2012-10-31T01:19:47.360
> 
> 标签：java

Assume I have a Warehouse class. That Warehouse has a TradeDesk. That TradeDesk computes available items to sell based on an instance variable set in Warehouse. A Warehouse's constructor instantiates a TradeDesk, but because TradeDesk needs an instance variable from the incompletely initialized Warehouse, we have a problem. Short of passing the instance value through multiple constructors (which I'd rather avoid; note that the below example is significantly simplified), how do I solve this? Thanks!

```
public class Warehouse {
    TradingDesk td;
    public int val;

    public Warehouse() {
        val = 3;
        td = new TradingDesk(this);
    }
// New class
public class TradingDesk {
    Warehouse associatedWh;
    int val;
    public TradingDesk(Warehouse wh) {
        associatedWh = wh;
        val = associatedWh.val;
    }
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T01:36:06.057

关于您的内部类代码，您尝试`Warehouse`使用外部类的实例初始化该字段。所以代码变成：

```
public class Warehouse {
    private TradingDesk td = new TradingDesk();
    private int val = 3;

    class TradingDesk {
         // you have already access to the outer Warehouse class including its fields
    }
} 
```

实际上，内部类可以访问外部类的所有属性。所以你的问题就消失了。

**编辑 - - - - - - - - -**

这是我处理循环依赖的解决方案：

```
public class Warehouse {
    private TradingDesk td = new TradingDesk();
    private int val = 3;

    public int getVal(){ //so accessible through TradingDesk object
        return val;
    }

    public void associateWhToTd(){
        td.setAssociatedWh(this); // no issue here since "this" is fully already created
    }

    public static void main(String[]args){ // example of usage
        Warehouse wh = new Warehouse();
        wh.associateWhToTd();
    }
}

public class TradingDesk {
    Warehouse associatedWh;

    public void setAssociatedWh(Warehouse wh){
       this.associatedWh = wh;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T01:37:35.817

好吧，您可以创建`TradingDesk`一个内部类`WareHouse`. 这样，它可以直接访问其封闭`WareHouse`的实例变量，而无需传递任何参数，并且可以仅在实例的上下文中创建它的`WareHouse`实例。

```
public class Warehouse {

    private int val;
    private TradingDesk td;

    public Warehouse() {
        this.val = 3;
        this.td = new TradingDesk();
    }

    public class TradingDesk {

        public TradingDesk() {
            //this is the right way to access the enclosing instance
           if(WareHouse.this.val==3){
               //do something
           }
        }

        public WareHouse getAssociatedWareHouse(){
           return WareHouse.this;
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T01:46:11.623

您可以使用延迟实例化的子对象：

```
class Warehouse {
  private TradingDesk td;
  ...

  public Warehouse() {
    ...
  }

  public TradingDesk getTradingDesk() {
    if (td == null) td = new TradingDesk(this);
    return td;
  }
} 
```

请注意，上面的 getter 不是线程安全的。

[`this`施工期间不要逃跑](http://www.ibm.com/developerworks/java/library/j-jtp0618/index.html)。

# opencl - MPI in conjunction with OpenCL?

> ID：13149957
> 
> 赞同：6
> 
> 时间：2012-10-31T01:19:53.120
> 
> 标签：opencl, mpi

While dividing my application in various tasks and convert it for a multi thread environment, I have realized that fundamentally I've got the base concept wrong: OpenCL is not suited for the kind of operations that I need to do in my app, but only for the mathematical part of the problem.

So at this point I was wondering if I could use MPI to fire up n threads on different devices, and then fire up OpenCL kernels if the device has a GPU.

Is this something that is commonly done, or using MPI exclude OCL and vice-versa?

My objective is to run an app on a computer and use any device attached to it (if present), to increase the computational power and share the task. The task itself is divided between crunching numbers (perfect for OCL), OGL render of the results coming from the data crunching part, UI management and interaction and data management (save, store, replace).

From what I understand MPI is not able to address threads to the GPU like OCL does, but OCL main use is math crunching, so it would not do any good if for example my app needs to access the network to retrieve information, or if it needs to use OGL to plot the results of a thread; in which case the best choice would be MPI.

Any suggestion about a viable option would be more than appreciated.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T01:52:33.320

MPI 和 OpenMP 是一种非常标准的 HPC 混合编程模型。对 MPI 和 OpenCL 做同样的事情没有实际或理论上的限制。

MPI 可以处理进程之间的通信，而 openCL 处理 GPU 上的计算密集部分。

一般来说，只要环境一致（相同的操作系统、相同的库版本、相同的架构等），将任何库与 MPI 一起用作多台机器上一组不同进程之间的协调语言是没有限制的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-31T01:47:54.090

这绝对是可行的（见[这个问题和答案](https://stackoverflow.com/questions/8061419/any-advantage-of-mpicuda-over-just-pure-mpi/8064850#8064850)）。MPI 真正做的就是生成程序的多个实例并处理它们之间的通信。它不关心在每个单独的节点上本地执行的操作。例如，有一次我编写了一个 MPI 程序，其中主进程使用 Qt 来可视化它从工作人员那里收到的数据。

# fabricjs - Strange Chrome behaviour after create a new Fabric Canvas

> ID：13149960
> 
> 赞同：1
> 
> 时间：2012-10-31T01:20:09.193
> 
> 标签：fabricjs

After I created a new canvas with fabric. elements with absolute or relative position inside a div (also with relative or absolute) are not rendered correctly, including 'range' type inputs from chrome. Only after I put the mouse hover an object on canvas that these elements go to the right position. In Firefox everything works as expected. Any tips how to solve this?

# ruby - Synchronizing PTY output with Eventmachine

> ID：13149972
> 
> 赞同：2
> 
> 时间：2012-10-31T01:21:43.307
> 
> 标签：ruby, terminal, eventmachine, curses, pty

I'm trying to write an EventMachine server to run an nCurses application via telnet or ssh, using ruby 1.9.3's PTY and io/console modules:

```
require 'rubygems'
require 'socket'
require 'pty'
require 'io/console'
require 'eventmachine'

 module CursesServer
   def post_init
     puts "-- someone connected to the server!"
     @reader, @writer, @pid = PTY.spawn('ruby ./ncurses_app_to_run.rb')
     @reader.sync = true #No buffering stdout     
  end

   def receive_data(data)
     screen = @reader.read(<number_of_bytes>)
     puts "received: " + data # Log input on server side
     send_data screen
     close_connection if data =~ /quit/i
   end

   def unbind
     puts "-- someone disconnected from the server!"
  end
end

# Note that this will block current thread.
EventMachine.run {
  EventMachine.start_server "127.0.0.1", 8081, CursesServer
} 
```

If I play with the value of the argument passed to @reader.read, I can get portions of the screen to display on the client side, however I don't know how to determine the actual size of the client's terminal, either initally or after the client resizes the terminal.

How can I synchronize the output with the size of the client's terminal? Is it possible with telnet/netcat or do I have to use a more robust protocol like ssh?

Thanks in advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T11:42:07.587

也许这可以帮助你。不过，我正在使用 EventMachine 和 ZeroMQ，但它似乎很容易适应。

```
def run_command command
    _start = Time.now
    begin
      PTY.spawn( command ) do |r, w, pid|
        r.sync = true
        begin
          r.each do |line|
            $announce_socket.send_msg "LOG:#{line}"
          end
       rescue => ex
        puts "ERROR: #{ex.message}"
       end
     end
    rescue PTY::ChildExited => e
      $announce_socket.send_msg "CMD_PREMATURE_EXIT:#{e.message}"
      puts "command exited prematurely, notified UI"
    end
    $announce_socket.send_msg "CMD_EXIT:#{Time.now - _start}"
    puts "done running commmand (took #{Time.now - _start} seconds)"
  end
end 
```

和反应堆部分：

```
$context = EM::ZeroMQ::Context.new(1)

def cleanup(exit_code = 0)
  EM::stop()
  exit exit_code
end

trap('INT') do
  cleanup
end

EM.run do

  $announce_socket = $context.socket ZMQ::DEALER, EMDEALERHandler.new
  $announce_socket.identity = MY_ID
  $announce_socket.connect "tcp://#{host_ip}:7777"

  # announce presence
  $announce_socket.send_msg "UP"
end 
```

在此之后，您只需要一个 ROUTER 套接字来推送数据。

# redirect - 如何在黑色的服务器内重定向？

> ID：13149979
> 
> 赞同：1
> 
> 时间：2012-10-31T01:22:46.100
> 
> 标签：redirect, clojure, noir

Noir 为客户端 302 重定向提供（响应/重定向“url”）。但是如何在 Web 服务器本身内重定向？比如写一个登录页面，如果登录失败，如何重定向到带有消息的错误页面？

```
(defpage [:post "/error"] {:keys [msg]}
  (layout [:h3 "ERROR:"] [:p msg]))

(defpage [:post "/do-login"] {:keys [user pass]}
  (if (match user pass)
    (login-ok)
    (redirect-to-error-page but how to carry msg))) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T02:47:34.083

您可以使用“渲染”发送新页面，请参阅[http://webnoir.org/tutorials/forms](http://webnoir.org/tutorials/forms)以获取与您的示例非常相似的示例：

```
(render "/errorpage" msgid) 
```

消息将作为 id 到达，例如“/errorpage/1001”，您可以使用 :id 表示法获取它，请参阅@dAni 在[Noir 渲染函数中的答案导致 NullPointerException](https://stackoverflow.com/questions/12526985/noir-render-function-causes-nullpointerexception)以了解如何使用它。您甚至可以命名您的页面！

# css - 如何在具有绝对位置的同时隐藏css覆盖

> ID：13149981
> 
> 赞同：0
> 
> 时间：2012-10-31T01:22:58.620
> 
> 标签：css

这是我的 HTML

```
<div id="frame">
  <ol>
    <li><img class="image" src="http://www.placehold.it/80X80" /></li>
  </ol>
</div>​ 
```

我的 JsFiddle：[这里](http://jsfiddle.net/RXr2E/1/)

我想将图像放在 div 中，以便 Div 用圆形线包裹图像？这意味着我想在图像上使用圆角，同时将其设置为`position:absolute`?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T01:29:07.587

将`border-radius`属性应用于您的图像类。假设我了解您的最终目标，那应该可以满足您的要求：http: [//jsfiddle.net/cjc343/RXr2E/2/](http://jsfiddle.net/cjc343/RXr2E/2/)

# mongodb - SaveMode 对 DropAll 有影响吗？

> ID：13149985
> 
> 赞同：0
> 
> 时间：2012-10-31T01:23:25.353
> 
> 标签：mongodb

MongoDb，c# 驱动程序：SaveMode 选项是否影响 MongoDb 中的“所有数据删除”操作？如果是这样，是否可以为单个 DropAll 操作停用 SafeMode (SafeMode.False)？我知道可以进行更新操作这个想法是在添加新项目之前从集合中删除所有项目

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T12:45:53.247

当您使用 collection.drop[集合 c# 代码](https://github.com/mongodb/mongo-csharp-driver/blob/master/Driver/Core/MongoCollection.cs#L255) 时，它正在使用 db 命令。这应该使用您的连接的写关注。SAFE 和 UNSAFE 之间不应该有任何错误差异。

所以是的，有影响，但不是，它不会删除每一个文档（除非你使用 remove()），所以它是一个快速的命令。如果你想确保这个命令应用于数据库中的内存，我不会使用 UNSAFE。

# r - R 中 coxme 的 Survfit 等价物？

> ID：13149986
> 
> 赞同：9
> 
> 时间：2012-10-31T01:23:27.680
> 
> 标签：r

我正在努力使用 R 中的 coxme 包。我想使用像 survfit() 这样的函数 - 它通常用于 coxph() 模型的方式 - 绘制调整后的生存曲线并找到不同参数值的中位生存.

如果我使用 coxph 拟合模型而没有随机效应，我可以执行以下操作：

```
library(KMsurv)
data(burn)

my.surv <- with(burn, Surv(T1, D1))

cox_nr = coxph(my.surv ~ Z1 , data = burn)

survfit(cox_nr, newdata = data.frame(Z1 =1)) 
```

这提供了生存估计。但是，如果我用 coxme 拟合相同的模型：

```
library(coxme)
cox_r = coxme(my.surv ~ Z1 + (1|Z11), data = burn)

survfit(cox_r, newdata = data.frame(Z1 = 1)) 
```

> UseMethod（“survfit”，公式）中的错误：没有适用于“survfit”的方法应用于“coxme”类的对象

所以`survfit.coxme`似乎不存在，并且通过阅读`coxme`包文档，我没有看到等价物。我正在尝试做的事情有什么根本错误吗？如果没有，我怎样才能得到这些估计？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T22:08:40.170

我认为 coxme 没有 survfit 方法的原因是脆弱的模型。对数秩或 wilcoxon 检验依赖于失败/审查结果与风险集中的个人之间的一一对应关系。这使您可以使用非参数卡普兰梅尔曲线一致地估计它们的生存曲线，这些曲线始终是单调且非递增的。如果一个人可以有多个结果，则情况并非如此，这就是 coxme(frailty) 正在处理的。以疱疹暴发为例，如果个人可以有不止一次暴发，或者您可以在集群中暴发任意数量的暴发，那么您无法使用 KMcurve 估计生存曲线，您也无法执行对数秩检验。

但是，使用 summary 命令对 Cox 模型的推断渐近等效于基本单变量线性 Cox 模型的对数秩检验。您可以争辩说，对脆弱模型进行总结可以作为处理多个端点的分层等效测试，并且 p 值代表了一个科学上有趣的组件。要以图形方式描述集群内的故障，请考虑使用累积发生率曲线。

# javascript - html2canvas 基础知识

> ID：13149988
> 
> 赞同：0
> 
> 时间：2012-10-31T01:23:47.973
> 
> 标签：javascript, screenshot, html2canvas

```
 <html>

    <head>
    <title>test</title>
    <script src="external/jquery-1.6.2.js"></script> 
    <script type="text/javascript" src="js/html2canvas.js"></script> 

    <script type="text/javascript">
     $(document).ready(function() {
     $('body').html2canvas();
     var queue = html2canvas.Parse();
     var canvas = html2canvas.Renderer(queue,{elements:{length:1}});
     var img = canvas.toDataURL()
     window.open(img);
 });
    </script>
    </head>

    <body>         
    <h1>Testing</h1>
    <img src='http://localhost:8080/test/images/1.jpg'>
    </body>
    </html> 
```

我不应该看到以该网页作为图像打开的新窗口吗？我错过了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-31T19:14:54.617

如果您像我一样不熟悉 html2canvas - 下面是一些样板代码，可以帮助您入门。希望它可以帮助别人。

```
<html>
<head>
<meta charset="utf-8"/>
<title>test2</title>

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.js"></script> 
<script type="text/javascript" src="html2canvas.js"></script> 

<script type="text/javascript">
$(document).ready(function() {
var target = $('body');
html2canvas(target, {
    onrendered: function(canvas) {
    var data = canvas.toDataURL();
    alert(data);
    // data is the Base64-encoded image
    }
});
});
</script>       

</head>
<body>  
<h1>Testing</h1>
<h4>One column:</h4>
<table border="1">
<tr>
  <td>100</td>
</tr>
</table>

</body>
</html> 
```

注意-我使用的是 v0.34。

然后，您可以将[toDataUrl()](https://stackoverflow.com/questions/13154443/turn-todataurl-base64-string-into-image-on-page)用作另一个 html 页面中的 src 标记（或从此处执行的任何操作）：

```
<html>
<head>
<meta charset="utf-8"/>
<title>TEST toDataUrl() DATA FROM PREVIOUS CODE PAGE</title>
</head>
<body>  
<h1>Testing html2canvas</h1>
<img src='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABVYAAAKWCAYAAACidsIoAAAVNUlEQVR4nO3dP4gc1x0H8G+xhRoJIWRQCoPtAxsSsBE4ITYk9haBNAIbDDF2ZbgiVVCIOwtzjV2kORKcVIGEFCEBFy6dyikWggtjcOFKlXAhVKlUtylmJ/fu3Zu53Ttr/5w+H3hIO783M7+58subNwkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMA5XU9y43sakzX3vopL6XoEAAAAADi3WZJ5Mb5L8u1iPKpq8yR3R+p7a+59WdMc9Xo3ybXNtgMAAAAA7Lo+WP1XkqcGakPh6STJbwZq63Z1pHY/x5/hw7V0BAAAAABcWLPFaL3Gf1qw2nt/pLYOkyT3Rur1MxyuoykAAAAA4OKaJXllpLZMsHol3av2mwpWP0zX25DPcvwZfrWOpgAAAACAi+uzkdqywWqS/H2k9jhNc9TbkGtJ/phuX9h319EUAAAAAHCx7Y/UVglW30jyzPfa2elu5vgHtAAAAAAANm6VYLVlkuTGYrT2cG25uph/qTh2uXH+Kzkeqs6Le91YnHO1OtaP8kNXl5aY0z/H9SWfoX6WsTH20S0AAAAAYAedNVh9Nsmni/l3kzxIF4J+lOOBaenlxdxH6V7Zf5Tkr+lWwc6q++43+qrHfpI7ORm+1h+vejXJw4E5k0XP5TXuplspO+RSkg8Wzzxf/PvdSJ8+pAUAAAAAF8xZgtVbOQoi+20GJsW1vkq352np58X1n18cu5Sjj1KV930rXfD6ICd7+7YYby/mX8vJcLUOMydJ7ldz/pmjULgOXh81niFJnk5yr7pPv9L2cKDXO43rAAAAAAA7bNVgtfyQ1P0cf33/VoaDzfI+dWDZB5L1fVurVpd9jtYq0dazvr+otcLZ96rzJ0m+qea8WNSfq2pje9sCAAAAADtslWB1kuOrNX9f1Z+vrvNcUSuP3023lUDvSrqQdt3B6izHg+G6Xj/fNKf3U696vTLSMwAAAACwo1YJVutgsV6RuVfVyxWfrX1Qy/1Y99PttVp63MHq2KraVn2Zfur6j0d6BgAAAAB21CrB6q+reb9L99X7fryc4WCy3n+0Hw+T/GzgftsWrL63RD91/fnGHAAAAABgx60SrNbh6IMc/5hUPT4pzr2W7qNWrXB1nu4jVrVtC1Z/2OhnUs0pa/UetAAAAADABXGeYLUVho6ZpNu3dChcrbcW2LZgNY3+XylqN6vadKRfAAAAAGCHnWcrgNkK97lc/P/ldB+wqu/7qDpnG4PVvq9+z9h7SV5YjP7DXg8WzwgAAAAAXFDn+XjVPMmLI9cuw9Q6hJ0k+aBxvWeKOdsarCbJj9LtD1tuffC3JK/F6/8AAAAAcOGtEqxOcrQqsx/fpNs/tfaLxejNk9xqzCtXwd6vamPBah1erjNY/WDRa+u5AQAAAIALbpL2Xqdje4O2Vq3eTfJmkhvpXon/KCdDyf5V/5sj16v3WG3d660kLyX5b5Irxdwvq3l/avReB6f1nNPqyVHY26oBAAAAABfY9XQB6F/SDlbvpgsvb6T9WvutHO0x2hofNs6bJ/lu8e9H6V75fyHJV4tjf26cM0nyeeP6j3IU/l5N8s7AnNfSbUdwafH/1pyfLua82ajfX/wd+r4mxXP317/RGOUWCAAAAADABfGPHN8bdGw8M3CNy+lWb/67mHsnybMD8/+w+PcHi/O+XJzzSbr9SodMkrxbzP+4usedU/p/O8mrS8xZ5m+wl+EwuRXafprk6ZFnAwAAAAC48CbpVrEuG672Aetzm2gWAAAAAGBbTDO+DcLQ1ggAAAAAAE+sy0l+my4wfZD21gEPczxYrT/kBQAAAADwxHgxR6tVf3nK3GdztG3A/mPuCwAAAABga72Xo1WoN0+Zey1dsHovyZXH3BcAAAAAwNa6luTzdMHqw3QrUV9KcqMYP0lye1H/T5KnNtEoAAAAAMC2eTrJO0k+zsn9VT9O8kaSqxvrDgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADiraZJ5NWYb7eh0Za8AAAAAAGs1y8kgdS9HoeV0E00toQyDAQAAAADW5jDD4eR+UdtbZ1NLEqwCAAAAABvRB5OHjVq5anV/nU0tSbAKAAAAAKxdGUwOBaf1fquz6pyhYHasNtZH3Utdmw7U6nvuV/XDgTmz6hrlCt7+XmXAPBuY0+oHAAAAALiAzhKsliHjYfW714eX+8U1hq7f93BYzJ1Xtf7c/rrTql7e+7A6p/9dhrtlmLqXk0Fpf59yz9n9gTnldQWrAAAAAPAEOG+wutf4nRwFl+XvMqQs9aFm6wNZs7SD1Fn1+6zB6tCcsWB1NjIHAAAAAHhCrLrH6jLB6nxgtNThaau3oRWqglUAAAAAYCPKV9yXqa0SrLbC0lofcraCXStWAQAAAICt1QofW4Fp63hrXn+9MnQcCiDLcLQ8fy/n22O1f5ZWcPu4glV7rAIAAADAE6YMBet9VUuzql7/7pUfhKrD2dp+NXe6ZK3V617jeOujU+UWB2O/6w909cfqcxLBKgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcF4HBwe3Dw4OXt/wuL3pvwMAAAAAwNIODg7mBwcHX2x4zDf9dwAAAAAAWNo2hJrb0AMAAAAAwNLKUHPN2wLcbvUAAAAAALD1qmB1ndsCzFs9AAAAAABsvU0FnIJVAAAAAGBnCVYBAAAAAFYkWAUAAAAAWJFgFQAAAABgRYJVAAAAAIAVCVYBAAAAAFa0RMA5W4yW/STzxZiuUhesAgAAAAA765SAsw9FW8HqdFEr506XrQtWAQAAAICdtUTAuZ92sDrLySB1tmxdsAoAAAAA7KwzBqt76Vag7g0cO60uWAUAAAAAdtcZg9X6Nf9e/7r/aXXBKgAAAACwuwSrAAAAAAAr+h6D1f5V/6FgtawLVgEAAACA3WWPVQAAAACAFZ0xWM3i2HRk3mhdsAoAAAAA7KwlAs7DtIPVaXX8/6/5L1MXrAIAAAAAO+uUgHNejb2qvl/UpjlpsC5YBQAAAAB21qYCTsEqAAAAALCzBKsAAAAAACsSrAIAAAAArEiwCgAAAACwoirg/Prg4OD1NY2vWz0AAAAAAGy9Klj9Yp2j1QMAAAAAwNbbhlBzG3oAAAAAAFjaml//P3VbAAAAAACArbfu1/9P2xYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAuiP8BiMheRhil3yMAAAAASUVORK5CYII='>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T01:28:38.757

尝试将您的脚本放入一个`$(document).ready()`块中。该脚本可能在文档的其余部分准备好之前运行。

# python - Python 错误类型错误：不可排序的类型：int() > list()

> ID：13149989
> 
> 赞同：1
> 
> 时间：2012-10-31T01:23:47.753
> 
> 标签：python, dynamic, dynamic-programming, knapsack-problem

您好我正在编写和测试递归动态编程背包（0-1）（以下代码是主文件和函数）我不断收到错误（在代码之后发布）......我真的很困惑错误是什么所以任何帮助将不胜感激！

# 主文件

```
import Knapsack_Test

size = 10
W = 2**size
knapsack = Knapsack_Test.Knapsack_Test()

for i in range(1, 10):
    knapsack.recursive_knapsack_test(size, W)
size = size + 100*i

W = 2**size 
```

# 函数调用（在类 Knapsack_Test.py 中）

```
def recursive_dynamic_knap(self, v, w, i, W):
    n = len(v) - 1
    if i == n:
        if W < w[n]:
            return 0
        else:
            return v
    elif W < w[i]:
        return self.recursive_dynamic_knap(v, w, i+1, W)

    return max(self.recursive_dynamic_knap(v, w, i+1,W), self.recursive_dynamic_knap(v, w, i+1, W-w[i]) + v[i]) 
```

# 错误

```
Traceback (most recent call last):
  File "\\minerfiles.mst.edu\dfs\users\asadmb\Desktop\Programming 3\Knapsack_Main.py", line 9, in <module>
    knapsack.recursive_knapsack_test(size, W)
  File "\\minerfiles.mst.edu\dfs\users\asadmb\Desktop\Programming 3\Knapsack_Test.py", line 19, in recursive_knapsack_test
    self.knapsack.recursive_dynamic_knap(v, w, j, W)
  File "\\minerfiles.mst.edu\dfs\users\asadmb\Desktop\Programming 3\KnapsackClass.py", line 22, in recursive_dynamic_knap
    return max(self.recursive_dynamic_knap(v, w, i+1,W), self.recursive_dynamic_knap(v, w, i+1, W-w[i]) + v[i])
  File "\\minerfiles.mst.edu\dfs\users\asadmb\Desktop\Programming 3\KnapsackClass.py", line 22, in recursive_dynamic_knap
    return max(self.recursive_dynamic_knap(v, w, i+1,W), self.recursive_dynamic_knap(v, w, i+1, W-w[i]) + v[i])
  File "\\minerfiles.mst.edu\dfs\users\asadmb\Desktop\Programming 3\KnapsackClass.py", line 22, in recursive_dynamic_knap
    return max(self.recursive_dynamic_knap(v, w, i+1,W), self.recursive_dynamic_knap(v, w, i+1, W-w[i]) + v[i])
  File "\\minerfiles.mst.edu\dfs\users\asadmb\Desktop\Programming 3\KnapsackClass.py", line 22, in recursive_dynamic_knap
    return max(self.recursive_dynamic_knap(v, w, i+1,W), self.recursive_dynamic_knap(v, w, i+1, W-w[i]) + v[i])
  File "\\minerfiles.mst.edu\dfs\users\asadmb\Desktop\Programming 3\KnapsackClass.py", line 22, in recursive_dynamic_knap
    return max(self.recursive_dynamic_knap(v, w, i+1,W), self.recursive_dynamic_knap(v, w, i+1, W-w[i]) + v[i])
  File "\\minerfiles.mst.edu\dfs\users\asadmb\Desktop\Programming 3\KnapsackClass.py", line 22, in recursive_dynamic_knap
    return max(self.recursive_dynamic_knap(v, w, i+1,W), self.recursive_dynamic_knap(v, w, i+1, W-w[i]) + v[i])
  File "\\minerfiles.mst.edu\dfs\users\asadmb\Desktop\Programming 3\KnapsackClass.py", line 22, in recursive_dynamic_knap
    return max(self.recursive_dynamic_knap(v, w, i+1,W), self.recursive_dynamic_knap(v, w, i+1, W-w[i]) + v[i])
TypeError: unorderable types: int() > list() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T01:30:40.643

我认为问题在于，在`return max(self.recursive_dynamic_knap(v, w, i+1,W), self.recursive_dynamic_knap(v, w, i+1, W-w[i]) + v[i])`其中一个调用中`recursive_dynamic_knap`是返回`v`，这是一个列表，作为参数没有意义，`max()`因为它是“不可排序的”（不能明智地判断为大于或小于`int`)

# c# - 谷歌地图在 htc one x 等高像素密度设备上显示非常模糊，有什么办法可以解决这个问题吗？

> ID：13149990
> 
> 赞同：1
> 
> 时间：2012-10-31T01:24:04.127
> 
> 标签：c#, javascript, html, google-maps, map

我将谷歌地图嵌入到我的一个移动网站中。该地图在我的 htc one x 设备上显示非常模糊，但不知何故，map.google.com 中的地图非常清晰。

我认为我的 GA 地图 API 中有一些设置可以让我指定密度或图像大小。但是我试过在网上寻找并没有找到它。有谁知道如何解决这个问题？下面是我使用的代码..

```
 var myOptions = {
        zoom: zoomlvl,
        center: myLatlng,
        mapTypeId: google.maps.MapTypeId.ROADMAP,
        mapTypeControl: false

    };

    map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

   var image = 'beachflag.png';
    var beachMarker = new google.maps.Marker({
          position: myLatlng,
          map: map
          icon: image
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T01:11:31.157

这似乎可以自行解决。问题似乎是谷歌 API。当代码指向最新的 Gmap API 时，它就会消失。

# jsp - 不使用 RequestDispatcher 在 Servlet 和 JSP 之间交换信息

> ID：13149991
> 
> 赞同：-1
> 
> 时间：2012-10-31T01:24:10.873
> 
> 标签：jsp, servlets, set

我有一个设置，这样一个弹出窗口加载了 url 即 server.com/getitem?id=2，弹出页面使用 .ready() jquery 从 url 调用带有 id 的 servlet。现在，我需要在这个 servlet 的弹出页面上设置一堆元素。我不能使用 RequestDispatcher，因为它会重新加载弹出窗口，并且会变成一个无休止的加载查找循环。

我见过一些像这样的库[http://juzuweb.org/javadoc/juzu/Response.Update.html](http://juzuweb.org/javadoc/juzu/Response.Update.html)可以从 servlet 设置 jsp 字段而无需转发。但是，我想知道是否有更简单的方法……这似乎是一项简单的任务，但由于缺乏我的 java web 开发经验，我正在努力寻找解决方案。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T12:54:18.817

我正在使用插件 JSTL Core 从 Servlet 更新 JSP 页面上的元素。[http://www.oracle.com/technetwork/java/index-jsp-135995.html](http://www.oracle.com/technetwork/java/index-jsp-135995.html)

# c# - 在 Visual Studio 2010 C# 中使用 resharper 缩进行或选定区域或整个文档

> ID：13149995
> 
> 赞同：0
> 
> 时间：2012-10-31T01:24:25.153
> 
> 标签：c#, visual-studio-2010, indentation

似乎没有任何缩进设置对我有用。试过 CTRl-K,Ctrl-F Ctrk-K,Ctrl-D Ctrl-I

我不想使用制表符移动到每个缩进的行首。是否有一组命令可以在我的 Visual Studio C# 2010 中使用 Resharper 来完成缩进行、选定区域或整个文档？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T02:25:08.077

您可以使用 格式化所选内容，使用 格式化`Ctrl+E, F`整个文档`Ctrl+E, D`。

这样做应该可以整理您可能拥有的任何缺失/不正确的缩进。

**编辑**

你可以通过编辑 -> 高级在 Visual Studio 中找到这些。格式文档和格式选择应该是列表中的前两项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T08:18:23.970

With Resharper, the correct command is Ctrl+Alt+F (Code cleanup) that can you can use to do a number of cleanups including indenting for selection or document

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-13T13:07:22.477

将背景颜色更改为页面背景以外的另一种颜色（我在白色主背景上使用了银色），它会给它一种您正在寻找的缩进感觉。

`Options`> `Environment`> `Fonts and Colors`> 显示项目：`Preprocessor Keyword`然后更改`item background`下拉菜单。