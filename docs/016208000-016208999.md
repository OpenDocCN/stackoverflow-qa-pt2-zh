# StackOverflow 问答 16208000-16208999

# google-maps - 获取酷炫的谷歌地图，如 42floors.com

> ID：16208006
> 
> 赞同：0
> 
> 时间：2013-04-25T06:38:10.893
> 
> 标签：google-maps, google-maps-api-3

我使用 google maps api，我想获得像 42​​floors.com 的 google map UI 这样的 UI。

谁能帮助我他们如何更改 UI？

我猜他们正在使用地图样式 [https://developers.google.com/maps/documentation/javascript/examples/maptype-styled-simple](https://developers.google.com/maps/documentation/javascript/examples/maptype-styled-simple)

```
var map;
var brooklyn = new google.maps.LatLng(40.6743890, -73.9455);

var MY_MAPTYPE_ID = 'custom_style';

function initialize() {

  var featureOpts = [
    {
      featureType: 'road',
      elementType: 'geometry',
      stylers: [
        { hue: -45 },
        { saturation: 100 }
      ]
    },
    {
      featureType: 'landscape',
      elementType: 'geometry',
      stylers: [
        { hue: '#000000' },
        { saturation: 75 },
        { lightness: -100}
      ]
    }
  ];

  var mapOptions = {
    zoom: 12,
    center: brooklyn,
    mapTypeControlOptions: {
      mapTypeIds: [google.maps.MapTypeId.ROADMAP, MY_MAPTYPE_ID]
    },
    mapTypeId: MY_MAPTYPE_ID
  };

  map = new google.maps.Map(document.getElementById('map-canvas'),
      mapOptions);

  var styledMapOptions = {
    name: 'Custom Style'
  };

  var customMapType = new google.maps.StyledMapType(featureOpts, styledMapOptions);

  map.mapTypes.set(MY_MAPTYPE_ID, customMapType);
}

google.maps.event.addDomListener(window, 'load', initialize); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T06:45:45.507

是的，这是地图样式的一个实现。看看他们的代码，在嵌入谷歌地图库后，你会发现一个[自定义的 Javascript 文件](http://42floors.com/assets/application-fa272c55bc98caceb415fb3c40deadc4.js)（链接可能会不时更改）。如果您开始搜索诸如“ROADMAP”之类的字符串，您将找到定义样式的部分。请注意，这个文件被缩小了，不是真正的人类可读的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T07:18:28.417

这不是同一个解决方案，但它会导致正确的解决方案:)

```
var map;
var brooklyn = new google.maps.LatLng(40.6743890, -73.9455);

var MY_MAPTYPE_ID = 'custom_style';

function initialize() {

  var featureOpts = [
    {
      featureType: 'road',
      elementType: 'geometry',
      stylers: [
        { hue: -45 },
        { saturation: 100 }
      ]
    },
    {
      featureType: 'landscape',
      elementType: 'geometry',
      stylers: [
        { hue: '#000000' },
        { saturation: 75 },
        { lightness: -100}
      ]
    }
  ];

  var mapOptions = {
    zoom: 12,
    center: brooklyn,
    mapTypeControlOptions: {
      mapTypeIds: [google.maps.MapTypeId.ROADMAP, MY_MAPTYPE_ID]
    },
    mapTypeId: MY_MAPTYPE_ID
  };

  map = new google.maps.Map(document.getElementById('map-canvas'),
      mapOptions);

  var styledMapOptions = {
    name: 'Custom Style'
  };

  var customMapType = new google.maps.StyledMapType(featureOpts, styledMapOptions);

  map.mapTypes.set(MY_MAPTYPE_ID, customMapType);
}

google.maps.event.addDomListener(window, 'load', initialize); 
```

# batch-file - 如何在构建之前安全地删除文件夹内容

> ID：16208008
> 
> 赞同：1
> 
> 时间：2013-04-25T06:38:21.383
> 
> 标签：batch-file, ant, build, delete-file

我们的夜间构建将代码加载到一个文件夹中（例如：）`C:\build\nib_sw_12`我想在 ANT 从源代码管理加载文件之前删除之前的内容。

但是有些文件没有被删除

1.  由于它们的路径很长（在嵌套文件夹下生成的 java doc 文件）

2.  由于以前的版本，一些“exe”文件仍在运行

我想知道如何删除具有长路径的文件和文件夹+杀死打开的（exe）文件并删除它们？

我想在从源代码管理加载 sw 之前执行此操作。

任何想法我怎么能做到这一点？

环境：Win 2008 R2 x64，ANT

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T07:10:55.947

您可以使用 taskkill 杀死进程，例如杀死`app.exe`进程 just run `taskkill /im "app.exe" /f /t`。问题可能是当您将有几个同名的进程时。要删除目录只需使用`<delete>`任务，我认为它应该删除长路径。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T10:17:03.913

您需要两个*sysinternals*工具的帮助：**handle**和**pskill**。请参阅[http://technet.microsoft.com/en-us/sysinternals/bb795533](http://technet.microsoft.com/en-us/sysinternals/bb795533)

然后，您可以找到锁定文件的程序的 pid

```
for /f "tokens=3 skip=4" %%a in ('handle my_file.dat') do echo %%a 
```

杀死它

```
for /f "tokens=3 skip=4" %%a in ('handle my_file.dat') do pskill %%a 
```

# c# - 最佳重载方法匹配有一些无效参数 Asp.net Wcf？

> ID：16208012
> 
> 赞同：0
> 
> 时间：2013-04-25T06:38:32.560
> 
> 标签：c#, asp.net, wcf, web-services

我收到错误“最佳重载方法匹配有一些无效参数”

我的代码是，

```
System.Collections.Generic.List<ConsultantShares> consultantShareList = (Session["ProjectShare"] as List<ConsultantShares>);
        CIService.CIServiceClient client = new CIService.CIServiceClient();
        client.GetConsultantScoreAsync(consultantShareList,this.txtProjectId.Text,this.ddlWorkClass.SelectedValue);
        client.GetConsultantScoreCompleted += new EventHandler<CIService.GetConsultantScoreCompletedEventArgs>(client_GetConsultantScoreCompleted); 
```

错误列表为，

```
Error   196 The best overloaded method match for
 'CIService.CIServiceClient.GetConsultantScoreAsync(InspectionServices.ConsultantShares[], string, string)'
 has some invalid arguments G:\Design Scoring\InspectionEvaluation\Summary.aspx.cs  32  
9   G:\Design Scoring\InspectionEvaluation\

Error   197 Argument 1: cannot convert from 'System.Collections.Generic.List<InspectionServices.ConsultantShares>' 
to 'InspectionServices.ConsultantShares[]'  G:\Design Scoring\InspectionEvaluation\Summary.aspx.cs  32  
40  G:\Design Scoring\InspectionEvaluation\ 
```

虽然我有以下内容，

在

```
namespace CIService

    {
        [GeneratedCode("System.ServiceModel", "4.0.0.0")]
        [DebuggerStepThrough]
        public class CIServiceClient : ClientBase<ICIService>, ICIService
        {
               public void GetConsultantScoreAsync(ConsultantShares[] cs, string targetProjectId, string workclass);
        public void GetConsultantScoreAsync(ConsultantShares[] cs, string targetProjectId, string workclass, object userState);
        }
    } 
```

希望你的建议

谢谢

编辑：

出现错误

```
Error   30  The type or namespace name 'InventoryProject' does not exist in the namespace 'CIService' (are you missing an assembly reference?)  G:\Design Scoring\InspectionEvaluation\ProjectDetails.aspx.cs   108 23  G:\Design Scoring\InspectionEvaluation\ 
```

CIService.InventoryProject invProject = new CIService.InventoryProject();

而 CIService

```
 public InventoryProject GetInventoryProjectDetail(string consultantId, string projectId)
        {
            ProjectService prjService = new ProjectService();
            return prjService.GetInventoryProjectDetail(consultantId, projectId);
        }

 public List<InventoryProject> GetProjectsByConsultant(string consultantId, int currentPageNumber, int pageSize)
        {
            ProjectService prjService = new ProjectService();
            return prjService.GetProjectsByConsultant(consultantId, currentPageNumber, pageSize);
        } 
```

而 CIService 是我的 WCF 服务，而 InventoryProject.datasource 是数据库管理器的其他一些项目，其 dll 正在此 wcf 项目中使用，但为什么它无法识别“inventoryproject”

希望能得到您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T06:41:30.443

你有两个选择。首先，您可以`.ToList()`在将方法作为参数传递给方法之前调用您的数组，第二个选项是您可以在创建代理时定义默认集合类型（添加服务引用）。

![在此处输入图像描述](https://i.stack.imgur.com/AzimH.png)

您收到错误的原因是，当您添加您可能指定的服务引用时，`System.Collection.Generic.List`作为 Collection 类型。您可以将其修改为数组。

# powershell - 使用预定义的值制作输入框

> ID：16208013
> 
> 赞同：2
> 
> 时间：2013-04-25T06:38:33.913
> 
> 标签：powershell

有没有办法创建一个在文本字段中已经有预定义值的输入框？

首选方式应该是`Read-Host`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T06:58:28.750

我不认为它可以用 .NET 来完成`Read-Host`，但你仍然可以通过使用下面的 .NET 类从 Powershell 来完成，如下所示：

```
[System.Reflection.Assembly]::LoadWithPartialName('Microsoft.VisualBasic')
$Value = [Microsoft.VisualBasic.Interaction]::InputBox("Enter Value", "Test", "Default Value") 
```

# visual-studio-2010 - 在 Visual C# Express 2010 中执行的当前代码行上停止调试器

> ID：16208015
> 
> 赞同：2
> 
> 时间：2013-04-25T06:38:44.603
> 
> 标签：visual-studio-2010, infinite-loop, visual-studio-debugging, break

所以我的程序似乎卡在某个地方的循环中。不幸的是，它并没有耗尽内存或溢出堆栈，所以它只是继续运行。为了弄清楚它在做什么，我当然可以开始在代码中的随机位置放置断点，但我希望有一种更有效的方法。

我想简单地在当前正在执行的代码行处停止调试器，但我在 VS 中找不到此命令。我已经搜索了如何做到这一点并找到了这篇[文章](https://stackoverflow.com/questions/1214355/stop-debugger-on-current-line-of-code-being-executed)，但似乎这是 VS 2008 中的一个功能，而不是 2010 年！？

有人知道我该怎么做吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-27T20:36:58.503

你是对的，你正在寻找暂停按钮（'Debug'类别中的命令'Break All'），这是VS2010的一个特性。如果您看不到它，可能是[此处](https://stackoverflow.com/questions/11053028/debug-exceptions-option-missing-in-vs2010)描述的 IDE 配置文件问题，或者您使用的是 VS2010 express[此处](http://connect.microsoft.com/VisualStudio/feedback/details/530579/visual-c-2010-express-does-not-have-break-all)。

# jquery - jquery遍历行并执行数学函数

> ID：16208020
> 
> 赞同：1
> 
> 时间：2013-04-25T06:39:08.697
> 
> 标签：jquery

我有一个贯穿表格的脚本，并不理想，但我需要让它工作。

表字段`cubicmeters`和`cubesperbundle`由较早的脚本填充。

我需要做的是，现在循环遍历表格并对每一行的输入执行数学函数。

我有一个`rows`具有行数的变量，可用于引用每一行的变量 I。

```
for (var i = 1; i <= rows; i++) {

            var cubes = +$(this).closest('tr').find('input[name^="cubicmeters"+i]').val(); // reference the row 'i'
            var cubesperbundle = +$(this).closest('tr').find('input[name^="cubesperbundle"]').val();
            $(this).closest('tr').find('input[name^="bundles"]').val((cubes*cubesperbundle).toFixed(2));

} 
```

有几点需要注意，这个查询不在头部，而是在页面底部的脚本标签内。原因是该表是用 PHP 填充的，因此 head 脚本将在加载输入之前运行。因此，我将此脚本放在页面底部。此外，填充的 jquery`cubicmeters`仅`cubesperbundle`在 PHP 填充输入`cubicmeters`并`cubesperbundle`回复要填充的输入之后运行。

所以命令：PHP 填充一个`productcode`. jquery（从页面底部调用`cubicmeters`）`cubesperbundle`基于`productcode`. 这一切都必须在加载页面时发生，而无需任何用户触发器。

最后，我需要 jquery 脚本用*`bundles`的结果填充字段`cubesperbundle``cubicmeters`

这个脚本必须运行之前我的html是：

```
<table class="authors-list" border=0 id="ordertable">
    <tr>
        <td>Cubic Meters</td><td>Cubes per Bundle</td><td>Total Bundles</td>
    <tr>
       <td><input type="text" name="cubicmeters1" id="cubicmeters1" value="1.38"></td>
       <td><input type="text" name="cubesperbundle1" id="cubesperbundle1" value="1.485"></td>
       <td><input type="text" name="bundles1" id="bundles1"></td>
    </tr>
    <tr>
       <td><input type="text" name="cubicmeters2" id="cubicmeters2" value="1.38"></td>
       <td><input type="text" name="cubesperbundle2" id="cubesperbundle2" value="1.485"></td>
       <td><input type="text" name="bundles2" id="bundles2"></td>
    </tr>
    <tr>
       <td><input type="text" name="cubicmeters3" id="cubicmeters3" value="1.38"></td>
       <td><input type="text" name="cubesperbundle3" id="cubesperbundle3" value="1.485"></td>
       <td><input type="text" name="bundles3" id="bundles3"></td>
   </tr>
</table> 
```

jsfiddle 在这里：http: [//jsfiddle.net/WfemC/](http://jsfiddle.net/WfemC/)

这显然是行不通的，因此我的问题。

谢谢你的帮助。

**更新**

```
for (var i = 1; i <= rows; i++) {
    (function (index) {
        $.post('get_sku_cubes', {
            data: $('#product' + index).val()
        }, function (result) {
            $('#cubicmeters+ index).val(result);
        });
    })(i)
}

for (var i = 1; i <= rows; i++) {
    (function (index) {
        $.post('get_cubesperbundle, {
            data: $('#product' + index).val()
        }, function (result) {
            $('#cubesperbundle+ index).val(result);
        });
    })(i)
}

$('#ordertable tr').each(function()
{
    var cubes = $(this).closest('tr').find('input[name^="cubicmeters"]').val();

    var cubesperbundle = $(this).closest('tr').find('input[name^="cubesperbundle"]').val();
    $(this).closest('tr').find('input[name^="totalbundles"]').val((cubes*cubesperbundle).toFixed(2));
}); 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T07:03:12.227

您可以使用`.each()`jQuery 中的函数在每一行上循环，然后您可以`$(this)`在每个循环上使用以在当前行上工作。

[小提琴的例子。](http://jsfiddle.net/WfemC/4/)

**编辑：** 用分离的功能[更新了小提琴](http://jsfiddle.net/WfemC/5/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T06:46:42.570

You are doing it all wrong use `.each()` because `for` loop not getting `$(this)`

### [Working DEMO](http://jsfiddle.net/WfemC/2/)

**EDIT**

**HTML**

```
<table class="authors-list" border=0 id="ordertable">
    <tr>
        <td>Cubic Meters</td><td>Cubes per Bundle</td><td>Total Bundles</td>
    <tr>
       <td><input type="text" name="cubicmeters1" id="cubicmeters1" value="1.38"></td>
       <td><input type="text" name="cubesperbundle1" id="cubesperbundle1" value="1.485"></td>
       <td><input type="text" name="bundles1" id="bundles1"></td>
    </tr>
    <tr>
       <td><input type="text" name="cubicmeters2" id="cubicmeters2" value="1.38"></td>
       <td><input type="text" name="cubesperbundle2" id="cubesperbundle2" value="1.485"></td>
       <td><input type="text" name="bundles2" id="bundles2"></td>
    </tr>
    <tr>
       <td><input type="text" name="cubicmeters3" id="cubicmeters3" value="1.38"></td>
       <td><input type="text" name="cubesperbundle3" id="cubesperbundle3" value="1.485"></td>
       <td><input type="text" name="bundles3" id="bundles3"></td>
   </tr>
</table> 
```

**jQuery Code**

```
$('#ordertable tr').each(function()
{
    var cubes           = $(this).closest('tr').find('input[name^="cubicmeters"]').val();
    var cubesperbundle  = $(this).closest('tr').find('input[name^="cubesperbundle"]').val();
    $(this).closest('tr').find('input[name^="bundles"]').val((cubes*cubesperbundle).toFixed(2));
}); 
```

# c# - 我正在通过 OTA 访问 QC API，但部署后显示“无法连接到 HPCQ 服务器”

> ID：16208022
> 
> 赞同：-1
> 
> 时间：2013-04-25T06:39:18.790
> 
> 标签：c#, ota, hp-quality-center

该代码在调试模式下完美运行，但在部署和运行后会出现“无法连接到 HPQC 服务器”错误。以下是详细信息：

1.  我正在使用 QC 10.0
2.  我使用的是 OTA API 而不是 Site Admin API
3.  在服务器上注册 OTA API 需要什么？我的服务器安装了 QC 客户端。除此之外还需要什么？
4.  我添加了参考 TDAPIOLELib

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-28T06:44:28.097

您需要使用 regsvr32 将 OTAClient.Dll 注册到您的服务器上。

此外，当您进行调试时，Visual Studio 会以 32 位模式运行应用程序。确保您部署的应用程序仅在 32 位模式下工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-10T11:48:27.260

OTA 依赖于 OTACLIENT.DLL 和 WEBCLIENT.DLL。确保您的部署服务器已注册两个 DLL，并且 DLL 的版本与您连接到的 HPQC/HPALM 服务器的版本相匹配。

我发现使用内置下载客户端组件仅为当前用户注册 DLL。

# ios - 从右点更改 UISearchBar 宽度

> ID：16208024
> 
> 赞同：0
> 
> 时间：2013-04-25T06:39:26.493
> 
> 标签：ios, animation, width, anchor

我有 UISearchBar，我希望它可以在点击时展开。我有像这样的动画：

```
[UISearchBar beginAnimations:nil context:NULL];
[UISearchBar setAnimationCurve:UIViewAnimationCurveEaseInOut];
[UISearchBar setAnimationDuration:0.5];
[self.searchBar setFrame:CGRectMake(self.searchBar.frame.origin.x, self.searchBar.frame.origin.y, self.searchBar.frame.size.width +100, self.searchBar.frame.size.height)];
[UISearchBar commitAnimations]; 
```

这是有效的，但它从左向右扩展它，但我希望它从右向左扩展它。我想在界面构建器中执行类似操作，您可以从 9 点中选择 1 来扩展它。

我尝试设置

```
[searchBar.layer setAnchorPoint:CGPointMake(1, 0.5)]; 
```

但它没有用。

马尔科

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T07:25:14.280

您可以执行以下操作：

```
[UIView animateWithDuration:0.5
                 animations:^{
                     [UIView animateWithDuration:1.0 animations:^{
                         self.searchBar.frame = CGRectMake(self.searchBar.frame.origin.x - 50.0f, self.searchBar.frame.origin.y, self.searchBar.frame.size.width + 50.0f, self.searchBar.frame.size.height);
                         [self.searchBar layoutSubviews];
                     }];
                 }
                 completion:^(BOOL finished){  }]; 
```

这将使右侧粘住并看到左侧的增长。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T07:22:28.247

您还应该更改 UISearchBar 的来源以获得所需的效果。例如： `self.searchBar.frame = CGRectMake(self.searchBa.frame.origin.x - YOUR_OFFSET, self.searchBa.frame.origin.y, self.searchBa.frame.size.width + YOUR_OFFSET, self.searchBa.frame.size.height)`。

# php - 如何在jquery的另一个数组中迭代数组中的数据

> ID：16208027
> 
> 赞同：2
> 
> 时间：2013-04-25T06:39:36.993
> 
> 标签：php, javascript, jquery

我在 php 中的另一个数组中有一个数组，像这样

```
Array
(
    [common_search] => Array
        (
            [BusinessName] => Sun Shine Vision
            [Address] => Amulia St Madhava Pharmacy Jn
            [Phone] => 
        )

    [cache_table] => Array
        (
            [Details] => Speedtrax,Ample's Bldg Off Banerji Rd., Amulia St,
        )

) 
```

我必须使用 Jquery 在我的结果页面中将这些作为单独的数组进行迭代，因为我想分别获取这些数组以在不同的 div 中显示以设置为 html，我如何分别从两个数组（common_search、cache_table）获取数据。在我的 html 中，我想设置像`$("#common_searchdiv").html(common_search)`and之类的数据`$("#cache_tablediv").html(cache_table)`。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T06:45:14.160

当 json-encoding 命名数组时，它们将在 javascript 中被解析为对象，所以你可以这样做：

```
<script>
   var data = <?=json_encode($data);?>
</script> 
```

因为现在javascript中的数据将是一个对象，所以你可以直接访问属性，比如

```
<script>
data["common_search"]["BusinessName"];
</script> 
```

或迭代它

`$.each`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T06:42:24.520

您不能直接将数据作为数组传递。做数组的json_encode。然后在 jquery 端解析 json，然后运行 ​​each/for 循环。在键的匹配上，您可以添加 if 条件。

做这样的事情

```
var result = $.parseJSON(jsonstring);//jsonstring is your json encoded string.

for(var k in result) {
   if (k == 'common_search') {
       $("#common_searchdiv").html(result[k]); 

   } 
   if (k == 'cache_table') {
       $("#cache_tablediv").html(result[k]);
   }
} 
```

供您参考，它有效

```
var jsonstring = {"common_search":{"strBusinessName":"Sun Shine Vision","strAddress":"Amulia St Madhava Pharmacy Jn","intPhone":""},"cache_table":{"Details":"Speedtrax,Ample's Bldg Off Banerji Rd., Amulia St,"}};
var jsonstring = JSON.stringify(jsonstring).replace(/\'/, "/'");
var result = $.parseJSON(jsonstring);//jsonstring is your json encoded string.

for(var k in result) {

   if (k == 'common_search') {
       alert(result[k]['strBusinessName'])
       $("#common_searchdiv").html(result[k]['strBusinessName']); 

   } 
   if (k == 'cache_table') {
       $("#cache_tablediv").html(result[k]);
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T07:00:36.380

请试试这个。

```
<?php
$arr_temp = Array
(
    'common_search' => Array
        (
            'BusinessName' => "Sun Shine Vision",
            'Address' => "Amulia St Madhava Pharmacy Jn",
            'Phone' => ''
        ),

    'cache_table' => Array
        (
            'Details' => "Speedtrax,Ample's Bldg Off Banerji Rd., Amulia St,"
        )

);

?>
<script>
$(document).ready(function() {
    var data_arr = <?php echo json_encode($arr_temp); ?>;

    $.each(data_arr,function(item){     
        $.each(data_arr[item],function(myitem){
            console.log(myitem);
        });
    });
});
</script> 
```

# android - 在此 uri com.google.earth 上找不到 Google 地球插件

> ID：16208030
> 
> 赞同：0
> 
> 时间：2013-04-25T06:39:45.937
> 
> 标签：android, google-earth, google-earth-plugin

我正在尝试在 2.3.3 版的 android 设备上显示谷歌地球

我尝试了以下代码，询问我“安装 Google 地球”，然后将我重定向到 Google Play 商店。但是，它会显示消息“没有找到 pname:com.google.earth 的结果”

我还将 uri 更改为“com.google.earth”和“m.google.earth”，但它们都不起作用。感谢帮助。

这是我的代码。

```
package com.example.test;

import android.annotation.SuppressLint;
import android.app.Activity;
import android.app.AlertDialog;
import android.app.SearchManager;
import android.content.ActivityNotFoundException;
import android.content.DialogInterface;
import android.content.Intent;
import android.net.Uri;
import android.os.Bundle;
import android.view.Menu;

import com.google.android.gms.maps.model.LatLng;

public class MainActivity extends Activity {

  @SuppressLint("NewApi")
  @Override
  protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    // the new intent we will launch 
    Intent myIntent = new Intent(); 

    // send the intent directly to the google earth activity that can 
    // handle search 
    myIntent.setClassName("com.google.earth", 
    "com.google.earth.EarthActivity"); 

    // we are doing a search query 
    myIntent.setAction(Intent.ACTION_SEARCH); 

    // change this address to any address you want to fly to 
    myIntent.putExtra(SearchManager.QUERY, "2900 Frenchmen Street, New Orleans, LA"); 

        // always trap for ActivityNotFound in case Google earth is not on the device 

        try { 
          // launch google earth and fly to location 
          this.startActivity(myIntent); 
        } 
    catch (ActivityNotFoundException e) { 
      showGoogleEarthDialog(); 
    } 
}

 private void showGoogleEarthDialog() { 

    AlertDialog.Builder downloadDialog = new AlertDialog.Builder(this); 
    downloadDialog.setTitle("Install Google Earth?"); 
    downloadDialog.setMessage("This application requires Google Earth. Would you like to install it?"); 
    downloadDialog.setPositiveButton("Yes", new 
        DialogInterface.OnClickListener() { 
      public void onClick(DialogInterface dialogInterface, int i) { 
        Uri uri = Uri.parse("market://search?q=pname:com.google.earth"); //pname:
        Intent intent = new Intent(Intent.ACTION_VIEW, uri); 
        MainActivity.this.startActivity(intent); 
      } 
    }); 
    downloadDialog.setNegativeButton("No", new 
        DialogInterface.OnClickListener() { 
      public void onClick(DialogInterface dialogInterface, int i) {} 
    }); 
    downloadDialog.show(); 
  } 
  @Override
  public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
  }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T07:32:28.767

我在这里找到解决方案的任何方法。基本上我的意图是没有正确启动谷歌活动。所以我做了以下代码更改，并在活动中显示了谷歌地图。

```
package com.example.test;

import android.annotation.SuppressLint;
import android.content.Intent;
import android.net.Uri;
import android.os.Bundle;
import android.support.v4.app.FragmentActivity;
import android.view.Menu;

import com.google.android.gms.maps.model.LatLng;

public class MainActivity extends FragmentActivity{

   static final LatLng HAMBURG = new LatLng(18.533333, 73.866667);
   static final LatLng KIEL = new LatLng(53.551, 9.993);
   private com.google.android.gms.maps.GoogleMap map;

  @SuppressLint("NewApi")
  @Override
  protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    Uri uri = Uri.parse("geo:18.533333,73.866667");
    Intent it = new Intent(Intent.ACTION_VIEW,uri);
    startActivity(it);
 }
} 
```

# android - JacksonParser 数据绑定和核心原因“找到 APK 的重复文件”？

> ID：16208032
> 
> 赞同：7
> 
> 时间：2013-04-25T06:39:57.610
> 
> 标签：android, json, jar, jackson

我正在尝试学习如何使用杰克逊解析器，以更有效地解析 json 数据。我有这些 jar 文件： [从这个页面下载](http://wiki.fasterxml.com/JacksonDownload)

```
 jackson-core-2.2.0.jar
 jackson-annotations-2.2.0.jar
 jackson-databind-2.2.0.jar 
```

在代码中，我只是尝试将 json 解析为对象数组：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    String json = ReadFromRaw(this, R.raw.json);
    ArrayList<Category> categories = null;
    try {
        ObjectMapper mapper = new ObjectMapper(); 
        categories = mapper.readValue(json, mapper.getTypeFactory().constructCollectionType(List.class, Category.class));
        // categories = mapper.readValue(json, new TypeReference<List<Category>>() {});
    } catch (Exception e) {
        Log.e("MainActivity", "Error: " + e.getMessage());
    }

    SimpleListView myList = (SimpleListView) findViewById(R.id.myList);
    myList.setAdapterWithItems(GetAdapter(categories));
} 
```

不确定是否有必要，但这里也是我的 Category 类：

```
@JsonIgnoreProperties({ "DisplayPriority" })
public class Category {

    @JsonProperty("Id")
    private String categoryId;

    @JsonProperty("name")
    private String categoryName;

    public String getCategoryId() {
        return categoryId;
    }

    public void setCategoryId(String categoryId) {
        this.categoryId = categoryId;
    }

    public String getCategoryName() {
        return categoryName;
    }

    public void setCategoryName(String categoryName) {
        this.categoryName = categoryName;
    }

} 
```

一切似乎都很好，没有错误或警告。但是当我尝试编译时，它给出了这个错误：

```
[2013-04-25 09:32:08 - Training - JacksonParser] Error generating final archive: Found duplicate file for APK: LICENSE
Origin 1: C:\~\workspace\Training - JacksonParser\libs\jackson-core-2.2.0.jar
Origin 2: C:\~\workspace\Training - JacksonParser\libs\jackson-databind-2.2.0.jar 
```

当我在谷歌上搜索这个错误时，它说这些 jar 文件有一些共同的类。而且我不知道该怎么做......我做错了什么吗？或者我做了一些缺少的事情？

在此先感谢，任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-26T17:08:18.443

2.2.0 版本已报告此问题，请参阅[此问题](https://github.com/FasterXML/jackson-databind/issues/214)；但应该在 2.2.1 中解决。

编辑：事实证明，主要问题是这些文件需要位于`META-INF/`jar 下；如果是这样，则不存在冲突。这就是 2.2.1 一旦发布就会做的事情。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-04T00:41:19.043

有点痛苦，但手动重建罐子并没有那么糟糕。

```
git clone git://github.com/FasterXML/jackson-core.git
git clone git://github.com/FasterXML/jackson-databind.git
cd jackson-core
git checkout jackson-core-2.2.0b # not sure what the "b" is about
mv src/main/resources/NOTICE src/main/resources/META-INF/
mv src/main/resources/LICENSE src/main/resources/META-INF/
mvn install
# jar will be at target/jackson-core-2.2.0.jar

cd ../jackson-databind
git checkout jackson-databind-2.2.0
mv src/main/resources/NOTICE src/main/resources/META-INF/
mv src/main/resources/LICENSE src/main/resources/META-INF/
mvn install
# jar will be at target/jackson-databind-2.2.0.jar 
```

乐叹息。多么痛苦。

**编辑**：原来你需要注释来做大多数事情。该练习留给读者。我还发现您可以[在 Maven 上下载新（固定）版本的 jar](http://search.maven.org/#search%7Cga%7C2%7Ccom.fasterxml.jackson)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-08T19:41:03.993

As steve says in his last edit, you can download the newest jars from Maven: [http://repo1.maven.org/maven2/com/fasterxml/jackson/core/](http://repo1.maven.org/maven2/com/fasterxml/jackson/core/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-25T06:55:18.520

我也有同样的问题。所以，我使用旧版本。

> 杰克逊核心asl-1.9.12.jar
> 
> jackson-mapper-asl-1.9.12.jar

您可以从同一页面的“最新稳定 1.x 版本”下载。

# php - 如何绑定 PDO 中的当前列值？

> ID：16208035
> 
> 赞同：0
> 
> 时间：2013-04-25T06:40:06.063
> 
> 标签：php, mysql, sql, pdo

我的网络应用程序中有一个功能，表格是“可快速编辑的”，也就是说，它的单元格可以直接编辑。当用户保存他的更改时，客户端将更改的行、更改的列（不包括未更改的列，只是为了澄清）及其相应的 ID 发送到服务器。

为了`UPDATE`有效地进行查询，我使用了 PDO 的预处理语句功能。这是我目前提出的等效声明：

```
UPDATE table
SET
   col1 = :arg_col1,
   col2 = :arg_col2,
   col3 = :arg_col3
WHERE
   ID = :arg_ID 
```

然后我想出了这个问题，我无法将列设置为其当前值。因为只提交了一行中已编辑的列，所以我只需要将数据绑定到它们各自的列。例如，如果只有`col1`and`col2`被改变，结果语句应该是

```
UPDATE table
SET
   col1 = 'new data',
   col2 = 'an edit',
   col3 = col3   /* Use the current value of the column */
WHERE
   ID = 153454 
```

直接修改语句肯定会使使用相同的预处理语句更新多行的性能提升无效。可悲的是，PDO 似乎没有将列绑定到其当前值的选项。

我应该如何解决这个问题？

* * *

**附加：**出于性能原因，我不希望发送所有列。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T07:46:57.960

不幸的是，您打算采用的方法实际上行不通。您只是不能在一次调用中准备一个语句，然后在所有后续调用中使用它 - 您必须每次都再次准备它。
因此，创建通用查询毫无意义。因此，您可以为数据集创建自定义查询。后一项任务可以自动化：只需动态创建 UPDATE 语句。

一个基于[标签wiki](https://stackoverflow.com/tags/pdo/info)的解决方案（滚动到最底部）：

```
// first, have your update data in array (you can omit this line though)
$update = $_POST;

// next, list all fields a user allowed to
$allowed = array("col1","col2","col3");

// finally, create a SET statement query dynamically
$set = pdoSet($fields,$values, $update);

// voila - your query contains only fields were POSTed:
$sql = "UPDATE users SET $set WHERE id = :id";
$stm = $dbh->prepare($sql);

// just add an ID and execute
$values["id"] = $_POST['id'];
$stm->execute($values); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T07:10:00.600

您实际上不希望`col3`在sql中，您需要做的是动态构建sql，只需将更改的列添加到sql中。

# java - 如何在 Blackberry 项目中存储 32 MB 文件

> ID：16208036
> 
> 赞同：2
> 
> 时间：2013-04-25T06:40:06.503
> 
> 标签：java, database, blackberry, download, large-files

最近我正在为安卓和黑莓开发应用程序。我需要做的是在项目中存储一个 32MB 的 Sqlite 文件作为应用程序使用的初始数据库。在 android 的情况下，它很简单，我可以轻松地将这个大文件存储在 assest 文件夹中，但我很难尝试在黑莓中进行这项工作，因为根据 RIM 公告，应用程序大小不应大于 15 MB。

[http://forums.crackberry.com/blackberry-os-apps-f35/rim-explains-app-memory-limit-637544/](http://forums.crackberry.com/blackberry-os-apps-f35/rim-explains-app-memory-limit-637544/)

如果有任何其他技巧可以实现这一点，任何人都可以帮助我。在应用程序启动期间下载 32 MB 的文件不是一个好主意。将用户导航到应用程序需要很长时间。

提前谢谢了。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T08:38:12.070

我昨天下班后一直在考虑这个问题，我认为您也可以尝试包含数据库包含的相同数据，但采用压缩格式，例如第一次运行应用程序时，您创建并填充更大的本地 sqlite从中建立数据库，然后删除压缩数据。

例如，您可以创建每个表的 CSV 转储，并将其保存到 .csv 文件（即：table.csv）。然后你可以将每一个压缩到一个文件（即：table.gz）。然后，您在应用程序的第二个资源模块中编译每个压缩文件（即：res_module.cod）。当您安装该应用程序时，该模块也会被安装，并将其文件复制到 SDCard。然后主模块从 SDCard 读取文件，解压缩它们并从中填充每个表。之后，您可以通过编程方式卸载assets 模块并删除sdcard 临时文件。这样做的要求是压缩文件应小于 14 MB 以适合一个 cod 文件。

至于数据库模式，可能已经存在用于导出它的格式，否则您可以制作自己的格式，或者如果数据库不太可能更改，则对其进行硬编码（不好的做法）。

# list - Prolog：附加列表失败，不太清楚为什么

> ID：16208038
> 
> 赞同：0
> 
> 时间：2013-04-25T06:40:16.957
> 
> 标签：list, prolog, append

我对 prolog 比较陌生，我想做的是创建一个列表，但我似乎遇到了一个错误，我不太清楚为什么。

这是更详细的前景的跟踪，这是自然语言解析器的一部分。

退出：（75,513）adj（女性）？蠕变

呼叫：(75,513) 列表：附加（_G5921885，[adj(womens)]，_G5921887) ？蠕变

退出：(75,513) 列表：追加（[]，[adj(womens)]，[adj(womens)]) ？蠕变

呼叫：(75,513) np2([七项全能，冠军，曾经，一个，运动员]，_G5921869，_G5921887，[]，[adj(womens)])？

所以...起初每个都可以并被添加到列表中，但是当它尝试将第二个项目添加到列表中时会发生这种情况......

呼叫：（75,514）adj（七项全能）？蠕变

退出：（75,514）adj（七项全能）？蠕变

呼叫：(75,514) 列表：追加（[]，[adj(heptathlon)]，[adj(womens)]) ？蠕变

失败：(75,514) 列表：追加（[]，[adj(heptathlon)]，[adj(womens)]) ？蠕变

这是附加列表的代码：

追加（列表，[adj（H）]，目标列表），

np2（T，Rest，Rem，列表，目标列表）。

如果有人可以分享一些关于我哪里出错以及如何解决它的信息，那就太好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T07:36:08.697

就在这儿：

```
Call: (75,514) lists:append([], [adj(heptathlon)], [adj(womens)]) 
```

这不可能成功，因为 的定义`append/3`与它相矛盾。

> 附加（*？List1*，*？List2*，*？List1AndList2*）：
> 
> *List1AndList2*是*List1*和*List2的串联*

在您的情况下，*List1*是空 list `[]`，因此*List1andList2*应该与*List2*相同，但事实并非如此。我真的不知道您的程序的逻辑可以进一步提供帮助。如果您尝试使用`append/3`附加*List1*和*List2*（而不是例如拆分*List1andList2*），您应该确保*List1andList2*在调用`append/3`.

# ios - Objective-c 中的 Singleton 类有什么用？

> ID：16208041
> 
> 赞同：-1
> 
> 时间：2013-04-25T06:40:24.513
> 
> 标签：ios, objective-c, singleton

我知道 Singleton 类是一个类，它一次只能创建一个对象。

我的问题是：

1 、objective-c中Singleton类有**什么用？**

2 **、如何**创建和使用创建的Singleton类？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-25T06:45:57.723

You normally use a Singleton when you want to expose something to the entire project, or you want a single point of entry to something. Imagine that you have a photos application, and 3 our 4 `UIViewControllers` need to access an Array with Photos. **It might** (most of the time it doesn't) make sense to have a Singleton to have a reference to those photos.

A quick implementation can be found [here](http://iosptl.com/posts/the-singleton-pattern/). And would look like this:

```
+ (id)sharedManager
{
  static id sharedManager;
  static dispatch_once_t once;
  dispatch_once(&once, ^{
    sharedManager = [[self alloc] init];
  });
  return sharedManager;
} 
```

You can see other ways of implementing this pattern [here](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CocoaFundamentals/CocoaDesignPatterns/CocoaDesignPatterns.html#//apple_ref/doc/uid/TP40002974-CH6-SW6).

In Swift 2.1 would look like this:

```
class Manager {

    static let sharedManager = Manager()
    private init() { }
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-25T07:07:40.697

单例是一种特殊的类，其中当前进程只存在该类的一个实例。对于 iPhone 应用程序，一个实例在整个应用程序中共享。

看看这些教程：

[http://pixeleap.com/?p=19](http://pixeleap.com/?p=19)

[http://www.codeproject.com/Tips/232321/Implement-Objective-C-Singleton-Pattern](http://www.codeproject.com/Tips/232321/Implement-Objective-C-Singleton-Pattern)

[http://xcodenoobies.blogspot.in/2012/08/how-to-pass-data-between.html](http://xcodenoobies.blogspot.in/2012/08/how-to-pass-data-between.html)

[http://www.johnwordsworth.com/2010/04/iphone-code-snippet-the-singleton-pattern/](http://www.johnwordsworth.com/2010/04/iphone-code-snippet-the-singleton-pattern/)

[http://www.idev101.com/code/Objective-C/singletons.html](http://www.idev101.com/code/Objective-C/singletons.html)

还有这个视频教程：

[http://www.youtube.com/watch?v=FTfEN8KQPK8](http://www.youtube.com/watch?v=FTfEN8KQPK8)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-25T06:41:30.197

这是一个示例和教程：[http ://www.galloway.me.uk/tutorials/singleton-classes/](http://www.galloway.me.uk/tutorials/singleton-classes/)

这是另一个：[如何在目标 C 中创建单例类](https://stackoverflow.com/questions/5381085/how-to-create-singleton-class-in-objective-c)

单例包含全局变量和全局函数。它是在代码的不同部分之间共享数据的一种非常强大的方式，而无需手动传递数据。

# java - 一个接一个地从java类调用url用于登录，另一个用于Web服务调用

> ID：16208050
> 
> 赞同：0
> 
> 时间：2013-04-25T06:41:09.000
> 
> 标签：java, web-services, url, pentaho

我可以通过调用登录到 pentaho 用户控制台

```
protocal&hostname/pentaho/j_spring_security_check?j_username=joe&j_password=password 
```

从java类之后我想用 `protocal&hostname/pentaho/SolutionRepositoryService?component=createNewFolder&solution=New_Report&path=&name=suzy_reports&desc=suzy_reports`java类本身的url调用web服务调用，但是在调用第二个url时它给出

```
Exception in thread "main" java.io.IOException: Server returned HTTP response code: 401 for URL: protocal&hostname/pentaho/Login;jsessionid=F096F1C25268
D1A795A55892511D6506 
```

但两个网址都可以单独工作

- 有没有办法让两个电话都有一个网址？- 调用第一个 url 并存储会话以便它不要求第二个身份验证？或任何其他解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T07:00:22.503

401 表示未经授权。

我认为你需要在你身边支持会话。授权服务器创建会话后，您的客户端不支持。

您可以尝试使用 HttpClient - 它支持会话和 cookie。

1.  首先使用 HttpClient 调用以进行自动化（将创建一个会话并放置 cookie 值）
2.  使用相同的 HttpClient 实例进行第二次调用

# nginx - 如何在多个端口上运行 Nginx

> ID：16208056
> 
> 赞同：10
> 
> 时间：2013-04-25T06:41:30.573
> 
> 标签：nginx

我正在尝试在具有相同实例的两个端口上配置 nginx，例如在端口 80 和端口 81 上，但到目前为止还没有运气。这是我正在尝试做的一个例子：

```
worker_processes  1;

events {
    worker_connections  1024;
}

http {
    include       mime.types;
    default_type  application/octet-stream;
    sendfile        on;
    keepalive_timeout  65;

    server {
        listen  80;
        server_name  chat.local.com;

        location / {
            proxy_pass http://127.0.0.1:8080;
            proxy_http_version 1.1;
            proxy_set_header Upgrade $http_upgrade;
            proxy_set_header Connection "Upgrade";
            proxy_set_header Host $host;
            proxy_buffering off;

        }
        error_page   500 502 503 504  /50x.html;
        location = /50x.html {
            root   html;
        }

    }

    server {
        listen  81;
        server_name  console.local.com;
        location / {
            proxy_pass http://127.0.0.1:8888;
            proxy_http_version 1.1;
            proxy_set_header Upgrade $http_upgrade;
            proxy_set_header Connection "Upgrade";
            proxy_set_header Host $host;
            proxy_buffering off;
        }
    }
} 
```

当我尝试运行 console.local.com 时，它会显示来自 chat.local.com 的内容。有没有办法让 nginx 在两个端口上运行？提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-25T07:07:45.690

你的配置看起来不错

我认为问题是这样的（如果我错了，请纠正我）：

*   你有 console.local.com 在端口 81 上监听，
*   这意味着您需要以[http://console.local.com:81/的身份访问它](http://console.local.com:81/)
*   当您以[http://console.local.com/](http://console.local.com/)访问它时 （没有明确的端口，因此默认为端口 80），nginx 将检查，注意注意正在侦听该 server_name 的端口 80，因此会将请求传递给默认值服务器块。由于默认服务器块是第一个（在没有配置来更改它的情况下），您最终会在 chat.local.com 处理。

您很可能希望更改您的 console.local.com 以侦听端口 80，因为：

*   两个服务器块中的 server_name 指令足以区分请求
*   这样可以避免您一直在请求中将 :81 添加到域名中

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-04-08T13:41:27.747

您可以简单地添加2次listen语句；像下面
听80；
听 81;

这应该适用于 nginx

# python - 将列表插入二叉树

> ID：16208057
> 
> 赞同：0
> 
> 时间：2013-04-25T06:41:32.183
> 
> 标签：python, insert, binary-tree

我有一个这样的列表：

```
a=[(("x",0.312),("e",0.0232),("f",0.245),("a",0.1322))] 
```

现在我想将它插入到最大堆树中，并且每个节点都必须具有两个值，例如：（“x”，0.312），我可以分别获得这两个值。我知道如何实现最大堆。我需要有关如何处理插入功能的帮助。如果它更容易，它可以是二叉树。谢谢

```
class Heap:
def __init__(self):
    self.heap = list()

#return the size of the tree
def size(self):
    return len(self.heap)

def isLeaf(self, index):
    #returns true if the index refers to a leaf, false otherwise
    return self.size() < 2 * index + 2

def parent(self, index):
    #returns the parent of the node at index
    return(index - 1) // 2

def leftChild(self, index):
    #returns the index of the left child of a node
    return 2 * index + 1

def rightChild(self, index):
    #returns the index of the right child of a node
    return 2 * index + 2

def add(self, value):
    #add a given value to the heap
    #append the value to the list
    #shift the element into the correct position
    self.heap.append(value)
    index= self.size()-1
    while self.parent(index) >=0 and self.heap[index] < self.heap[self.parent(index)]:
        swap= self.heap[index]
        self.heap[index]=self.heap[self.parent(index)]
        self.heap[self.parent(index)]=swap
        index = self.parent(index) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T06:59:18.420

我建议为每个元组创建一个对象，并将这些对象的列表与[`heapq`](http://docs.python.org/2/library/heapq.html)模块一起使用。这样您就可以控制排序顺序并将最小堆转换为最大堆。您还可以将以前的元组元素作为属性独立访问：

```
import heapq

class Item(object):
    def __init__(self, letter, value):
        self.letter = letter
        self.value = value

    def __repr__(self):
        return "Item({0}, {1})".format(self.letter, self.value)

    def __le__(self, other):
        # This is where you control whether it's a min heap or a max heap,
        # and also what you want to sort on: value, letter or both.
        return self.value > other.value

items = [Item(*x) for x in a]
heapq.heapify(items) 
```

**编辑：**更改`<`为`>`.

# ios - 如何在 iOS 中创建一个连续动画，该动画也将在应用程序在后台运行时运行？

> ID：16208060
> 
> 赞同：1
> 
> 时间：2013-04-25T06:41:38.993
> 
> 标签：ios, core-animation

我正在创建一个游戏，其中我必须从上到下连续移动传送带。当我的应用程序进入后台并稍后恢复时出现问题。

对象从当前位置移除，动画停止。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T07:50:52.903

正如评论所描述的那样，您基本上不能这样做，至少不能以一种直截了当的方式。让我向您展示我将如何解决以下问题：

您遇到的主要问题是，当一个对象被动画时，对象的实际位置并没有真正改变。改变的是表示层！那么，你怎么能知道物体的确切位置呢？好吧，理论上您可以通过向图层表示层询问实际的帧、锚点或您正在制作动画的任何属性来做到这一点：

```
 [[myView.layer presentationLayer] frame]; 
```

所以，我要做的是当应用程序进入后台时，我会设置更新所有视图以反映表示层。当你回来时，我会从那里恢复动画。对象应该在正确的位置。

```
 NSAarray *viewsBeingAnimated;

- (void)applicationWillEnterForeground:(UIApplication *)application{
 for (UIView *oneView in viewBeingAnimated){
    // Update whatever other properties that you were animating
    [oneView setFrame:[[myView.layer presentationLayer] frame]];

    [oneView layer] removeAllAnimations];
  } 
} 
```

现在，一旦应用程序恢复，您应该可以从那里继续。

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T08:11:18.663

```
-(void)pauseLayer:(CALayer*)layer{   
CFTimeInterval pausedTime = [layer convertTime:CACurrentMediaTime() fromLayer:nil];
layer.speed = 0.0;
layer.timeOffset = pausedTime;}

#pragma mark -resume game

-(void)resumeLayer:(CALayer*)layer{   
NSLog(@"paused:%f",[layer timeOffset]);
CFTimeInterval pausedTime = [layer timeOffset];
layer.speed = 1.0;
layer.timeOffset = 0.0;
layer.beginTime = 0.0;
CFTimeInterval timeSincePause = [layer convertTime:CACurrentMediaTime() fromLayer:nil] - pausedTime;
layer.beginTime = timeSincePause;} 
```

我正在使用此代码，并且我正在使用基于块的动画来动画数千个图像，一次从 iPhone 屏幕的顶部到底部落下

# wcf - Ninject WCF 扩展与现有的 ServiceHostFactory 和 ServiceHost

> ID：16208061
> 
> 赞同：2
> 
> 时间：2013-04-25T06:41:47.013
> 
> 标签：wcf, ninject, servicehost

我们很难使用 Ninject wcf 扩展。我们在 IIS 中托管我们的服务并使用 svc 文件。我们已经阅读了很多描述`NinjectServiceHostFactory`（在 svc 文件中）与`NinjectHttpApplication`（在`global.asax`文件中）的用法的帖子，看起来很简单。我们的问题是我们已经有了自定义`ServiceHostFactory`和`ServiceHost`.

有人能指出我们结合我们的正确方法`ServiceHostFactory`吗`NinjectServiceHostFactory`？

我们的 svc 文件指向我们自定义的`ServiceHostFactory`.

**更新**

看来我们设法实现了它。我们的 ServiceHostFactory 实现：

```
public class CustomServiceHostFactory : NinjectServiceHostFactory
{
    protected override Type ServiceHostType
    {
        get
        {
            return typeof(CustomServiceHost<>);
        }
    }
} 
```

我们的 ServiceHost 实现：

```
public class CustomServiceHost<T> : NinjectAbstractServiceHost<T>
{
    public CustomServiceHost(IServiceBehavior serviceBehavior, T serviceType, params Uri[] baseAddresses)  : base(serviceBehavior, serviceType, baseAddresses)
    {
        ...
    }

    protected override void OnOpening()
    {
        ...

        base.OnOpening();
    }
} 
```

# c - 通过知道线程名称来设置线程的优先级

> ID：16208062
> 
> 赞同：0
> 
> 时间：2013-04-25T06:41:47.883
> 
> 标签：c, windows-ce, real-time, thread-priority

我正在为 Win CE 开发一个 rt 驱动程序，为了实现我的目的，我需要能够更改线程的优先级。但问题是，我没有源代码，特别感谢微软！因此，我无法在创建线程的位置设置线程的优先级。

目前我所知道的是我从 Visual Sudio 的线程窗口中读取的线程的名称（线程名）。（pThread，hThread 的值总是会改变，因此我不能使用它们。只有静态的东西是线程名。）我可以只知道线程的名称就为线程分配一个值吗？（我可以通过知道它的名称找到它的唯一线程 ID 吗？）我检查了线程的内置函数，存在一个 GetCurrentThread 函数，它检索调用线程的伪句柄。但是，它不适合我。因为将来我不能确定当前线程是我想要的线程。因此我可以设置不同线程的优先级。

总结一下：有没有办法通过只知道线程名称来设置线程的优先级？

问候，

森提乌斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T08:37:21.597

貌似用名字猜不出Thread Id，但是可以尝试使用CreateToolhelp32Snapshot函数列出所有线程或进程，如果知道进程名就可以猜出processid，那么你可以试试匹配属于该进程的线程。祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T08:24:21.790

根据[这个问题及其答案](https://stackoverflow.com/questions/9366722/how-to-get-the-name-of-a-win32-thread)，线程名称实际上并不存在于调试器之外。

# xcode - 如何在 Xcode 中获得智能制表符（“缩进制表符，对齐空格”）行为？

> ID：16208065
> 
> 赞同：38
> 
> 时间：2013-04-25T06:41:52.130
> 
> 标签：xcode, coding-style, alignment, indentation

我曾经使用制表符进行缩进，使用空格进行对齐。像这样（箭头显示制表符，点显示空格）。

![在此处输入图像描述](https://i.stack.imgur.com/3VG2q.png)

在 QtCreator 中，您可以在标准首选项中设置此类编码样式。我找不到在 Xcode 中实现相同目标的方法。你能告诉我这是否可能吗？可能有一个插件吗？

**更新：** 这是在 QtCreator 中如何实现的： ![在此处输入图像描述](https://i.stack.imgur.com/v2zj2.png)

PS请不要试图说服我只使用空格/制表符更好，否则这个问题将变成另一个圣战:)

再一次关于我想要实现的目标：[使用制表符缩进，与空格对齐。Vim 技巧 Wiki](http://vim.wikia.com/wiki/Indent_with_tabs,_align_with_spaces)。

**更新 2：**我刚刚提交了 Apple Radar 错误报告（增强）rdar://22285639。这是[公开的雷达](https://openradar.appspot.com/radar?id=5625019916877824)。

**更新 3：**我收到了 Apple 的答复。我的错误是 rdar://8165023 的副本。

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2013-04-28T13:46:36.110

在 Xcode > 首选项 (`⌘</kbd>`,`):`

![> 文本编辑 > 缩进](https://i.stack.imgur.com/F37hx.png)

如果我正确理解你的问题，这应该为你做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-10T20:48:46.623

如果你想重新映射标准 Xcode 的`⌘</kbd>+`[` to `TAB`, you can do the following:`

1.  安装一个名为“Karabiner”的程序。

2.  转到首选项〜>“杂项和卸载”

3.  在“自定义设置”部分单击“打开 private.xml”按钮

4.  打开文件并将其内容替换为以下代码：

    ```
    <?xml version="1.0"?> 
    <root>
        <item>
            <name>Tab instead of Command+[</name>
            <identifier>private.swap_tab_and_cmnd+[</identifier>
            <autogen>
                __KeyToKey__
                KeyCode::TAB, ModifierFlag::NONE,
                KeyCode::BRACKET_RIGHT, ModifierFlag::COMMAND_L | ModifierFlag::NONE
            </autogen>
        </item> 
    </root> 
    ```

5.  转到首选项〜>“更改密钥”〜>单击“重新加载XML”按钮

6.  在名为“Tab 而不是 Command+[”的复选框中打勾

7.  享受

[![在此处输入图像描述](https://i.stack.imgur.com/s10g6.png)](https://i.stack.imgur.com/s10g6.png)

PS：请注意，此设置在您的机器上全局有效，而不仅仅是在 Xcode 中。但是，我确信 google 可能会帮助您找到如何进一步自定义它的解决方案，仅将更改应用于 Xcode。

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2019-07-30T07:00:33.840

在 XCode
Xcode > Preferences 或使用现在`⌘ ,`打开`Preferences`
单击`Text Edit`选项卡，然后单击子选项卡栏，您可以根据需要 `Indentation`更改设置`Indentation`

[![这是首选项的最后一个视图](https://i.stack.imgur.com/zD2wz.png)](https://i.stack.imgur.com/zD2wz.png)

# java - 获取异常 - java.lang.IllegalStateException：JTA EntityManager 不能使用 getTransaction()

> ID：16208070
> 
> 赞同：5
> 
> 时间：2013-04-25T06:42:16.887
> 
> 标签：java, hibernate, jpa, ejb-3.0

我是 JPA 的新手。我正在尝试创建 EJB 3.0 + JPA (Hibernate) 应用程序。当我将数据持久化到数据库中时，我遇到了异常。

**会话Bean方法**

```
@PersistenceUnit private EntityManagerFactory emf;

@Override
@TransactionAttribute(TransactionAttributeType.REQUIRED)
public void insterCustomerDetails(Customer customer) {
    // TODO Auto-generated method stub
    try{
        //System.out.println("properties:::"+em.getProperties());
        //System.out.println("Model :::"+em.getMetamodel());
    System.out.println("Name ::::" + customer.getName() + "::customer id ::"+customer.getCustomer_id()+"::email::"+customer.getEmail_id()+"::address::"+customer.getAddress()+
            ":::ph number::"+customer.getPhNumber());
    EntityManager em = emf.createEntityManager();
    EntityTransaction et = em.getTransaction();
    et.begin();
    em.persist(customer);
    et.commit();
    em.close();
    }catch(Exception e){
    e.printStackTrace();
}
} 
```

**持久性.xml**

```
<persistence-unit name="RetailUnit" >
    <provider>org.hibernate.ejb.HibernatePersistence</provider>
    <!-- the JNDI data source-->
    <jta-data-source>java/customer</jta-data-source>
    <properties> 
        <!-- if this is true, hibernate will print (to stdout) the SQL it executes, 
            so you can check it to ensure it's not doing anything crazy
             <property name="hibernate.connection.driver_class" value="org.apache.derby.jdbc.ClientDriver"/>
             <property name="hibernate.connection.url" value="jdbc:derby://localhost:1527/company;create=true" />
          <property name="hibernate.connection.username" value="user" />
          <property name="hibernate.connection.password" value="123" /> -->
        <property name="hibernate.show_sql" value="true" />
        <property name="hibernate.format_sql" value="true" />
        <!-- since most database servers have slightly different versions of the 
            SQL, Hibernate needs you to choose a dialect so it knows the subtleties of 
            talking to that server -->
        <property name="hibernate.dialect" value="org.hibernate.dialect.DerbyDialect" />
        <property name="hibernate.archive.autodetection" value="class"/>
        <!-- this tell Hibernate to update the DDL when it starts, very useful 
            for development, dangerous in production -->
        <property name="hibernate.hbm2ddl.auto" value="create" />
    </properties>
</persistence-unit>
</persistence> 
```

**例外**

```
SEVERE: java.lang.IllegalStateException: A JTA EntityManager cannot use getTransaction()
    at org.hibernate.ejb.AbstractEntityManagerImpl.getTransaction(AbstractEntityManagerImpl.java:985)
    at com.sun.enterprise.container.common.impl.EntityManagerWrapper.getTransaction(EntityManagerWrapper.java:857)
    at retail.ejb.service.CustomerSessionBeanImpl.insterCustomerDetails(CustomerSessionBeanImpl.java:24)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.glassfish.ejb.security.application.EJBSecurityManager.runMethod(EJBSecurityManager.java:1052)
    at org.glassfish.ejb.security.application.EJBSecurityManager.invoke(EJBSecurityManager.java:1124)
    at com.sun.ejb.containers.BaseContainer.invokeBeanMethod(BaseContainer.java:5388)
    at com.sun.ejb.EjbInvocation.invokeBeanMethod(EjbInvocation.java:619)
    at com.sun.ejb.containers.interceptors.AroundInvokeChainImpl.invokeNext(InterceptorManager.java:800)
    at com.sun.ejb.EjbInvocation.proceed(EjbInvocation.java:571)
    at com.sun.ejb.containers.interceptors.SystemInterceptorProxy.doAround(SystemInterceptorProxy.java:162)
    at com.sun.ejb.containers.interceptors.SystemInterceptorProxy.aroundInvoke(SystemInterceptorProxy.java:144)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at com.sun.ejb.containers.interceptors.AroundInvokeInterceptor.intercept(InterceptorManager.java:861)
    at com.sun.ejb.containers.interceptors.AroundInvokeChainImpl.invokeNext(InterceptorManager.java:800)
    at com.sun.ejb.containers.interceptors.InterceptorManager.intercept(InterceptorManager.java:370)
    at com.sun.ejb.containers.BaseContainer.__intercept(BaseContainer.java:5360)
    at com.sun.ejb.containers.BaseContainer.intercept(BaseContainer.java:5348)
    at com.sun.ejb.containers.EJBObjectInvocationHandler.invoke(EJBObjectInvocationHandler.java:206)
    at com.sun.ejb.containers.EJBObjectInvocationHandlerDelegate.invoke(EJBObjectInvocationHandlerDelegate.java:79)
    at $Proxy248.insterCustomerDetails(Unknown Source)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at com.sun.corba.ee.impl.presentation.rmi.StubInvocationHandlerImpl.privateInvoke(StubInvocationHandlerImpl.java:241)
    at com.sun.corba.ee.impl.presentation.rmi.StubInvocationHandlerImpl.invoke(StubInvocationHandlerImpl.java:152)
    at com.sun.corba.ee.impl.presentation.rmi.codegen.CodegenStubBase.invoke(CodegenStubBase.java:227)
    at retail.ejb.service.__CustomerSessionBeanRemote_Remote_DynamicStub.insterCustomerDetails(retail/ejb/service/__CustomerSessionBeanRemote_Remote_DynamicStub.java)
    at retail.ejb.service._CustomerSessionBeanRemote_Wrapper.insterCustomerDetails(retail/ejb/service/_CustomerSessionBeanRemote_Wrapper.java)
    at retail.web.mbean.CustomerMB.createCustomer(CustomerMB.java:58)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at com.sun.el.parser.AstValue.invoke(AstValue.java:254)
    at com.sun.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:302)
    at javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:88)
    at com.sun.faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:102)
    at javax.faces.component.UICommand.broadcast(UICommand.java:315)
    at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:794)
    at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1259)
    at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:81)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1550)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722) 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-25T07:02:33.153

如果在 EJB 中使用，您不需要手动使用事务 - 所有方法默认都是事务性的 - 您甚至可以使用`@TransactionAttribute(TransactionAttributeType.REQUIRED)`on 您的方法，这是默认设置。

事务在方法开始时开始，如果没有可用的事务并且在方法返回时提交。无需手动事务控制。

如果您没有令人信服的理由来使用`EntityManagerFactory`，最好注入`EntityManager`正确的而不是在每次调用时从 EMF 中检索它：

```
@PersistenceContext 
private EntityManager em; 
```

# c# - 如何在wix中显示登录自定义安装程序

> ID：16208078
> 
> 赞同：2
> 
> 时间：2013-04-25T06:42:55.893
> 
> 标签：c#, .net, wix

我正在用 wix 制作自定义安装程序。这将有多个步骤来完成偶数。一切正常。现在我想要显示一些消息行。

```
Step 1 starting
step 1 Running...
Step 1 Completed
Step 2 Starting
Step 2 Aborted. File missing.
Step 3 Starting 
```

哪种控制适合？编辑控件？请帮助自定义操作的代码，以便我可以从`C#`代码中附加消息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T12:35:51.663

不幸的是，Windows Installer 没有提供内置机制来显示这样的 UI。要获得该级别的自定义，您需要创建一个[ExternalUIHandler](http://msdn.microsoft.com/en-us/library/windows/desktop/aa370384%28v=vs.85%29.aspx)。本质上，您创建一个可执行文件，注册以从 Windows Installer 获取消息，然后开始安装并以您想要的方式绘制 UI。正如您可能猜到的那样，这需要相当多的工作。

WiX 工具集中的 DTF 为您需要调用的 MSI 函数提供了许多包装器以使其全部工作。请参阅命名空间中类的`SetExternalUI`方法以开始使用。`Installer``Microsoft.Deployment.WindowsInstaller`

祝你好运！前面有很多工作。

# c++ - 如何在 C++ 中使用 UTF-8，从其他编码转换为 UTF-8

> ID：16208079
> 
> 赞同：8
> 
> 时间：2013-04-25T06:42:56.600
> 
> 标签：c++, utf-8, character-encoding

我不知道如何解决：

想象一下，我们有 4 个网站：

*   答：UTF-8
*   B：ISO-8859-1
*   C: ASCII
*   D：UTF-16

我用 C++ 编写的程序执行以下操作：它下载一个网站并对其进行解析。但它必须了解内容。我的问题不是使用 ASCII 字符完成的解析，例如`">"`or`"<"` ）完成的解析。

问题是程序应该从网站的文本中找到所有单词。单词是字母数字字符的任意组合。然后我将这些词发送到服务器。数据库和 Web 前端使用 UTF-8。所以我的问题是：

*   如何将“任何”（或最常用的）字符编码转换为 UTF-8？
*   如何在 C++ 中使用 UTF-8 字符串？我认为`wchar_t`不起作用，因为它有 2 个字节长。UTF-8 中的代码点最长为 4 个字节...
*   对于这样的 UTF-8 字符串，是否有类似`isspace()`, `isalnum()`, `strlen()`,的函数？`tolower()`

请注意：我不做任何输出（比如`std::cout`C++ 中做任何输出（如 ）。只需过滤掉单词并将它们发送到服务器。

我知道 UTF8-CPP 但它没有`is*()`功能。正如我所读到的，它不会从其他字符编码转换为 UTF-8。仅从 UTF-* 到 UTF-8。

编辑：我忘了说，程序必须是可移植的：Windows、Linux、...

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-25T07:42:11.067

> 如何将“任何”（或最常用的）字符编码转换为 UTF-8？

[ICU](http://site.icu-project.org/)（Unicode 的国际组件）是这里的解决方案。它通常被认为是 Unicode 支持的最后发言权。就 Unicode 而言，甚至 Boost.Locale 和 Boost.Regex 也使用它。请参阅我对 Dory Zidon 的回答关于为什么我建议直接使用 ICU 而不是包装器（如 Boost）的评论。

您为给定的编码创建转换器...

```
#include <ucnv.h>

UConverter * converter;
UErrorCode err = U_ZERO_ERROR;
converter = ucnv_open( "8859-1", &err );
if ( U_SUCCESS( error ) )
{
    // ...
    ucnv_close( converter );
} 
```

...然后使用[UnicodeString](http://icu-project.org/apiref/icu4c/classicu_1_1UnicodeString.html)类作为适当的。

> 我认为 wchar_t 不起作用，因为它有 2 个字节长。

的大小`wchar_t`是实现定义的。AFAICR，Windows 是 2 字节（UCS-2 / UTF-16，取决于 Windows 版本），Linux 是 4 字节（UTF-32）。无论如何，由于标准没有为 Unicode*定义*语义`wchar_t`，因此使用它是不可移植的猜测。不要猜测，使用ICU。

> 此类 UTF-8 字符串是否有 isspace()、isalnum()、strlen()、tolower() 等函数？

不是在他们的 UTF-8 编码中，但无论如何你都不会在内部使用它。UTF-8 适合外部表示，但内部 UTF-16 或 UTF-32 是更好的选择。对于 Unicode 代码点（即 UChar32），确实存在上述函数；参考。[uchar.h](http://icu-project.org/apiref/icu4c/uchar_8h.html) _

> 请注意：我不在 C++ 中做任何输出（如 std::cout）。只需过滤掉单词并将它们发送到服务器。

检查[BreakIterator](http://icu-project.org/apiref/icu4c/classicu_1_1BreakIterator.html)。

> 编辑：我忘了说，程序必须是可移植的：Windows、Linux、...

如果我还没有说过，*请*使用 ICU，并为自己省去很多麻烦。即使乍一看似乎有点重量级，但它*是*目前最好的实现，它*非常*便携（我自己在 Windows、Linux 和 AIX 上使用它），您*将*在项目中一次又一次地使用它来来吧，所以花时间学习它的 API 并没有浪费。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-25T07:13:03.383

不确定这是否会为您提供所需的一切，但它可能会有所帮助。您是否尝试过查看：

1) Boost.Locale 库？Boost.Locale 在 Boost 1.48（2011 年 11 月 15 日）中发布，使其更容易在 UTF8/16 之间进行转换

以下是文档中的一些方便示例：

```
string utf8_string = to_utf<char>(latin1_string,"Latin1");
wstring wide_string = to_utf<wchar_t>(latin1_string,"Latin1");
string latin1_string = from_utf(wide_string,"Latin1");
string utf8_string2 = utf_to_utf<char>(wide_string); 
```

2) 还是转换是 C++11 的一部分？

```
#include <codecvt>
#include <locale>
#include <string>
#include <cassert>

int main() {
  std::wstring_convert<std::codecvt_utf8<char32_t>, char32_t> convert;
  std::string utf8 = convert.to_bytes(0x5e9);
  assert(utf8.length() == 2);
  assert(utf8[0] == '\xD7');
  assert(utf8[1] == '\xA9');
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-11-30T15:09:53.557

> 如何在 C++ 中使用 UTF-8 字符串？我认为 wchar_t 不起作用，因为它有 2 个字节长。UTF-8 中的代码点最长为 4 个字节...

这很简单，有一个名为  [**tinyutf8**](https://github.com/DuffsDevice/tinyutf8/)的项目  ，它是/**的替代**品。`std::string``std::wstring`

然后用户可以优雅地对**codepoints**进行操作，而它们的表示总是以`char`s 编码。

* * *

> 如何将“任何”（或最常用的）字符编码转换为 UTF-8？

您可能想查看(C++11)中`std::codecvt_utf8`的[类似模板](http://en.cppreference.com/w/cpp/locale)。`<codecvt>`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T07:07:49.847

UTF-8 是一种利用第 8 位对非 ASCII（7 位代码）使用多个字节的编码。因此，您不会在多字节序列中找到`'\'`, 。`'/'`并且`isdigit`有效（尽管不是阿拉伯语和其他数字）。

它是 ASCII 的超集，可以容纳所有 Unicode 字符，因此绝对要与 char 和 string 一起使用。

检查 HTTP 标头（不区分大小写）；它们在 ISO-8859-1 中，在空行之前，然后是 HTML 内容。

```
Content-Type: text/html; charset=UTF-8 
```

如果不存在，也可能存在

```
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="UTF-8">      <!-- HTML5 --> 
```

ISO-8859-1 是拉丁语 1，您最好从 Windows-1252 转换，Windows 拉丁语 1 扩展使用 0x80 - 0xBF 用于逗号引号等一些特殊字符。尽管指定了 ISO-8859-1，但即使 MacOS 上的浏览​​器也能理解这些。

转换库：@syam 已经提到。

***转换***

我们不考虑 UTF-16。可以读取标题并开始直到字符集的元语句作为单字节字符。

从单字节编码到 UTF-8 的转换可以通过表格进行。例如用 Java 生成的：a`const char* table[]`由 char 索引。

```
table[157] = "\xEF\xBF\xBD";

public static void main(String[] args) {
    final String SOURCE_ENCODING = "windows-1252";
    byte[] sourceBytes = new byte[1];
    System.out.println("    const char* table[] = {");
    for (int c = 0; c < 256; ++c) {
        String comment = "";
        System.out.printf("       /* %3d */ \"", c);
        if (32 <= c && c < 127) {
            // Pure ASCII
            if (c == '\"' || c == '\\')
                System.out.print("\\");
            System.out.print((char)c);
        } else {
            if (c == 0) {
                comment = " // Unusable";
            }
            sourceBytes[0] = (byte)c;
            try {
                byte[] targetBytes = new String(sourceBytes, SOURCE_ENCODING).getBytes("UTF-8");
                for (int j = 0; j < targetBytes.length; ++j) {
                    int b = targetBytes[j] & 0xFF;
                    System.out.printf("\\x%02X", b);
                }
            } catch (UnsupportedEncodingException ex) {
                comment = " // " + ex.getMessage().replaceAll("\\s+", " "); // No newlines.
            }
        }
        System.out.print("\"");
        if (c < 255) {
            System.out.print(",");
        }
        System.out.println();
    }
    System.out.println("    };");
} 
```

# c# - 如何将逗号分隔的字符串转换为换行符分隔的字符串？

> ID：16208081
> 
> 赞同：2
> 
> 时间：2013-04-25T06:43:08.120
> 
> 标签：c#, string, data-transform

我有一个逗号分隔的字符串。如何将其转换为换行符分隔格式。我的字符串如下所示：

```
red,yellow,green,orange,pink,black,white 
```

并且需要以这种方式格式化：

```
red
yellow
green
orange
pink
black
white 
```

这是我的代码：

```
public static string getcolours()
{
    List<string> colours = new List<string>();
    DBClass db = new DBClass();
    DataTable allcolours = new DataTable();
    allcolours = db.GetTableSP("kt_getcolors");
    for (int i = 0; i < allcolours.Rows.Count; i++)
    {
        string s = allcolours.Rows[i].ItemArray[0].ToString();
        string missingpath = "images/color/" + s + ".jpg";
        if (!FileExists(missingpath))
        {
            colours.Add(s);

        }
    }
    string res = string.Join(", ", colours);

    using (System.IO.StreamWriter file = new System.IO.StreamWriter(@"F:\test.txt", true))
    {

        file.WriteLine(res);
    }
    return res;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-25T06:47:13.740

```
res = res.Replace(',','\n'); 
```

这应该有效。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-25T06:45:32.743

你可以试试：

```
string colours = "red,yellow,green,orange,pink,black,white";
string res = string.Join(Environment.NewLine, colours.Split(',')); 
```

或者更简单的版本是：

```
string res2 = colours.Replace(",", Environment.NewLine); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T06:46:36.793

不要字符串连接，只需写下颜色，然后在 \n 上使用连接返回

```
public static string getcolours()
{
    List<string> colours = new List<string>();
    DBClass db = new DBClass();
    DataTable allcolours = new DataTable();
    allcolours = db.GetTableSP("kt_getcolors");
    for (int i = 0; i < allcolours.Rows.Count; i++)
    {
        string s = allcolours.Rows[i].ItemArray[0].ToString();
        string missingpath = "images/color/" + s + ".jpg";
        if (!FileExists(missingpath))
        {
            colours.Add(s);
        }
    }
    using (System.IO.StreamWriter file = new System.IO.StreamWriter(@"F:\test.txt", true))
    {
        foreach(string color in colours)
        {
            file.WriteLine(color);
        }
    }
    return string.Join("\n", colours);;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T06:48:27.927

```
var s = "red,yellow,green,orange,pink,black,white";
var r = string.Join(Environment.NewLine, s.Split(new[] { ',' }, StringSplitOptions.RemoveEmptyEntries)); 
```

# batch-file - 绕过消息 - 批处理文件

> ID：16208082
> 
> 赞同：0
> 
> 时间：2013-04-25T06:43:10.403
> 
> 标签：batch-file

我编写的批处理文件如下：

```
D:\Build\Build_2.0.023\GrConv\FTGraphicConverter.exe -s "D:\Customer Data\JSM Prj\JSM_DEMO\HIS0364\WINDOW\L3_TB3B_MNFLD.EDF" -d "D:\FastTools\FTOutput\common" -l "D:\FastTools\VPInput\CentumTagsToFASTTOOLSitems.csv"

D:\Build\Build_2.0.023\GrConv\FTGraphicConverter.exe -s "D:\Customer Data\JSM Prj\JSM_DEMO\HIS0364\WINDOW\L3_TB3B_MNFLD.EDF" -d "D:\FastTools\FTOutput\common" -l "D:\FastTools\VPInput\CentumTagsToFASTTOOLSitems.csv"

xcopy D:\FastTools\FTOutput\common\Displays C:\Users\Public\tls\wap\cfg\operatorInterfaces\DEPLOY\displays /y 
```

当我运行它并且由于某种原因第一行失败时，它会在命令窗口上显示错误消息，并且在没有手动干预的情况下不会移动第二行执行。

我想抑制错误消息并自动移动到第二行执行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T13:34:41.090

使用 Start /B 在启动进程时不要停止脚本的执行，这意味着所有以“/B”开头的进程将立即启动：

```
Start /B Process.exe

Start /B "" "D:\Build\Build_2.0.023\GrConv\FTGraphicConverter.exe" -s "D:\Customer Data\JSM Prj\JSM_DEMO\HIS0364\WINDOW\L3_TB3B_MNFLD.EDF" -d "D:\FastTools\FTOutput\common" -l "D:\FastTools\VPInput\CentumTagsToFASTTOOLSitems.csv" 
```

使用输出重定向排除错误消息：[http ://ss64.com/nt/syntax-redirection.html](http://ss64.com/nt/syntax-redirection.html)

简化代码：

```
@Echo OFF

Set "FTGraphicConverter_ExecutablePath=D:\Build\Build_2.0.023\GrConv\FTGraphicConverter.exe"
Set "EDF_File=D:\Customer Data\JSM Prj\JSM_DEMO\HIS0364\WINDOW\L3_TB3B_MNFLD.EDF"
Set "CSV_File=D:\FastTools\VPInput\CentumTagsToFASTTOOLSitems.csv"
Set "Output_Dir=D:\FastTools\FTOutput\common"

Set "Input_Displays_Dir=D:\FastTools\FTOutput\common\Displays"
Set "Outut_Displays_Dir=C:\Users\Public\tls\wap\cfg\operatorInterfaces\DEPLOY\displays"

Start /B "" "%FTGraphicConverter_ExecutablePath%" -s "%EDF_File%" -d "%Output_Dir%" -l "%CSV_File%" 2>NUL

%FTGraphicConverter_ExecutablePath% -s "%EDF_File%" -d "%Output_Dir%" -l "%CSV_File%"

xcopy /y "%Input_Displays_Dir%\*" "%Outut_Displays_Dir%\" 
```

**编辑**

如果您不想在 /Background 中启动进程并且只想自动与错误消息交互，那么：

```
Echo Y| Start process.exe 
```

如果 process.exe 最后发送一条错误消息，用户提示询问“Y”“N”键的问题，那么我们会自动发送“Y”键，因此，如果最后出现错误，执行将不会停止。

# regex - 如何使用awk提取较长字符串中括号之间的文本？

> ID：16208086
> 
> 赞同：1
> 
> 时间：2013-04-25T06:43:36.483
> 
> 标签：regex, shell, unix, awk, pattern-matching

我有点 awk/regex 的初学者，所以我为这个愚蠢的问题道歉。合并字段时，我似乎最难使用 awk。我有一个更长的 awk 脚本来解析几个平面文件表，但是我在处理这个特定的列时遇到了一些麻烦。

我的数据如下所示：

```
 EFGH1234
    (ABCD#)EFGH1234
  (LMNOPQ#)RSTU6789 
```

我试图将括号中的文本分开，因为它是自己的列，如下所示：

```
 EFGH1234
    ABCD  EFGH1234
  LMNOPQ  RSTU6789 
```

我试过搜索，到目前为止发现比我在这里尝试做的更复杂的表达式。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T07:26:05.183

这是你需要的吗？我猜这里的提取是指删除括号。

```
perl -pe 's/[\(|\)|\#]/ /g' your_file 
```

或在 awk 中：

```
awk 'gsub("[(|#)]"," "){print}' your_file
    ABCD EFGH1234
  LMNOPQ RSTU6789
  LMNOPQ  RSTU6789 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T07:36:05.687

我假设您正在尝试创建额外的“列”，以便您可以使用它们。[`split()`使用函数](http://www.gnu.org/software/gawk/manual/html_node/String-Functions.html)将您的字段拆分为一个数组。而且，如果您对 split 创建的元素/键的数量进行计数，则可以将此计数用作测试。例如：

```
awk '{ n = split($1, a, /[()#]/); print (n==1 ? $0 : a[2] FS a[4]) }' file 
```

结果：

```
 EFGH1234
ABCD EFGH1234
LMNOPQ RSTU6789 
```

# php - 正则表达式未捕获所有电子邮件

> ID：16208090
> 
> 赞同：0
> 
> 时间：2013-04-25T06:43:58.037
> 
> 标签：php, regex

我正在尝试在 php 程序中接收电子邮件，并且正在使用以下正则表达式

```
([a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+(?:[A-Z]{2}|com|org|net|gov|mil|biz|info|mobi|name|aero|jobs|museum)\b)siU 
```

这似乎可以很好地获取您的标准电子邮件。比如`me @ gmail.com`或`you @ hotmail.com`

失败的地方是结尾为 co.uk 的电子邮件。现在我尝试在我的正则表达式中添加 co.uk

```
([a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+(?:[A-Z]{2}|com|co.uk|org|net|gov|mil|biz|info|mobi|name|aero|jobs|museum)\b)siU 
```

但这只是给我与原始正则表达式相同的输出。电子邮件的输出在哪里， you@co 。我也试过加入英国。我在这个上缺少什么？是第二个时期扔掉它吗？

理想情况下，我试图让它捕获所有带有 .com .net .org co.uk .au .ca 的电子邮件。基本上我正在搜索所有美国、英国、澳大利亚和加拿大的电子邮件。谁能发现我的错误是能够正确输出非美国电子邮件`you @ yoursite.co.uk`而不是`you @ yoursite.co`

谢谢你。例如，显示的电子邮件中的空格仅用于发布此内容。

编辑：我不是要验证电子邮件，它是一系列电子邮件，可以是数组中的任何内容，我试图只为数据库捕获特定的电子邮件。很抱歉最初没有说清楚。

Edit2：这是我的问题的工作字符串。感谢大家

```
^([a-zA-Z0-9_\-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([a-zA-Z0-9\-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$^ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T06:53:20.420

不要使用正则表达式来验证电子邮件地址。使用正确执行此操作的库。

有关详细信息，请参阅[我知道如何验证电子邮件地址，直到我阅读 RFC](http://haacked.com/archive/2007/08/21/i-knew-how-to-validate-an-email-address-until-i.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T06:48:58.590

|co.uk|

尝试（不在 [] 中，点表示任何东西，但断开链接）

```
|co\.uk| 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T06:49:13.333

你必须像这样逃避这个点。

```
co\.uk 
```

如果您尝试仅匹配有效的电子邮件，则此正则表达式应该可以解决问题

```
(\s)?(([^\s]+)\@([^\s]+)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T06:54:44.807

不要对电子邮件使用正则表达式，你不会喜欢它，而且你会失败。

filter_var() [http://php.net/manual/en/function.filter-var.php](http://php.net/manual/en/function.filter-var.php)

FILTER_VALIDATE_EMAIL [http://www.php.net/manual/en/filter.filters.validate.php](http://www.php.net/manual/en/filter.filters.validate.php)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-25T06:52:09.687

> 我在这个上缺少什么？

您正在向非捕获组添加术语。那么基于您的正则表达式的任何输出如何包含非捕获组中的任何内容？更不用说您添加的术语中的错误 nacholibre 提到了。

# php - mysql中的随机查询但显示新记录

> ID：16208092
> 
> 赞同：1
> 
> 时间：2013-04-25T06:44:13.377
> 
> 标签：php, mysql

我正在使用 rand() 函数从有 50 条记录的表中查找 5 条记录。

我希望在页面刷新时显示新记录。

就像在第一次刷新时会显示 5 条记录，在第二次刷新时会显示下 5 条记录，依此类推。

完成记录后，页面应该从开始显示。

这不是每次刷新时都会更新的分页记录。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T06:58:59.020

如果我理解正确，这就是你想要的：

```
if(!isset($_SESSION['page'])){
    $_SESSION['page']=0; //set a session variable if not set
}
//here sql query to get the records somehthing like SELECT * FROM table LIMIT $_SESSION['page']*5 5

$_SESSION['page']++; //increase the session variable
if($_SESSION['page']>10){
    $_SESSION['page']= 0;  //return to first record after all records are done (10*5=50)
} 
```

我认为插入 sql 查询不会有那么大的问题，但举个例子：

```
$query = 'SELECT * FROM table LIMIT '.($_SESSION['page']*5).' '.5; 
```

请注意，当您开始在 sql 查询中使用用户输入时，您应该使用准备好的语句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T06:57:22.310

您可以使用记录的会话计数器和该记录的另一个数组，这已经在前面展示过。达到限制后 - 只需从会话中刷新该计数器。

# php - 使用 session->set_flashdata 导致 502 Bad gateway 错误

> ID：16208093
> 
> 赞同：2
> 
> 时间：2013-04-25T06:44:16.527
> 
> 标签：php, codeigniter, session, internal-server-error

使用时出现 502 bad gateway 错误

```
$this->session->set_flashdata('message', 'Profile updated.'); 
```

我在 nginx 上使用 CodeIgniter。该代码在 localloast(WAMP) 上运行良好。如果我注释掉这些行，应用程序运行良好。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-03-28T10:58:33.423

我发现出了什么问题。首先，有更多服务器知识的同事向我解释说，我的设置可能是 nginx 接收所有请求，然后直接提供静态文件。对于非静态请求，它将工作传递给 apache，并充当中介。因此，当 apache 尝试向 nginx 发送数据时（或者当 nginx 尝试向 apache 发送信息时），可能出现了问题。

由于我以前从未使用过 nginx，因此我也没有想到检查 nginx 日志文件。我可以使用一个错误：

[错误] 27453#0: *9223 上游从上游读取响应标头时发送的标头太大，客户端：

我最终应用了另一个堆栈溢出解决方案的第一位：

将此添加到您的 nginx.conf 文件中，该文件通常位于
代码：
/etc/nginx/nginx.conf：

proxy_buffer_size 128k；
proxy_buffers 4 256k；
proxy_busy_buffers_size 256k；

顺便说一句，它应该被添加到文件的 http 部分。这是解决方案中缺少的东西。

参考：
[https ://forum.codeigniter.com/archive/index.php?thread-59675.html](https://forum.codeigniter.com/archive/index.php?thread-59675.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-03-28T08:44:44.423

在 application/config/config.php 中将“use_database”设置为 TRUE

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-28T11:10:19.203

来自@saho 的回答

$config['sess_use_database'] = 真；

通过更改为数据库，您可以将会话数据移动到数据库的表中，以避免与权限相关的问题。尝试并在此处回复。

```
https://www.codeigniter.com/user_guide/libraries/sessions.html 
```

您可以从官方文档中查看数据库驱动程序部分以避免此类错误。

# java - 将具有 json-format-string 的对象序列化为 json

> ID：16208095
> 
> 赞同：1
> 
> 时间：2013-04-25T06:44:28.733
> 
> 标签：java, gson

我有一个像这样的对象：

```
public class Foo{
  public String f1="[{\"jsonField\":\"something\"},{\"jsonField\":\"something\"}]";
} 
```

Gson 会将其序列化为：

```
{"f1":"[{\"jsonField\":\"something\"},{\"jsonField\":\"something\"}]"} 
```

f1 字段被序列化为字符串。显然，该字段是格式良好的 json 格式字符串。如何将字段序列化为 jso 数组，如下所示：

```
{"f1":[{"jsonField":"something"},{"jsonField":"something"}]} 
```

PS。出于性能考虑，我不能反序列化然后序列化该字段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T06:57:45.373

Gson 正在将您的字符串字段序列化为字符串。这很正常。但是，如果您的字段是`List<String>`，Gson 会给您：

```
{"f1":["jsonField:something","jsonField:something"]} 
```

如果它是一个列表，其中有一个名为的字段，`jsonField`你会得到你真正想要的。

这是 Gson 序列化对象的隐式方式。如果你不喜欢它，你需要实现你自己的`TypeAdapter`，并在 builder 中向 Gson 注册它。

```
GsonBuilder builder = new GsonBuilder();
builder.registerTypeAdapter(MyObject.class, new SomethingGsonAdapter());
Gson gson = builder.create() 
```

你需要定义：

```
public class SomethingGsonAdapter implements JsonDeserializer<DataItem>, JsonSerializer<DataItem>; 
```

# codeigniter - 在codeigniter中上传大小限制

> ID：16208096
> 
> 赞同：3
> 
> 时间：2013-04-25T06:44:30.960
> 
> 标签：codeigniter, codeigniter-2

我有一个用户可以注册的页面。他在此过程中上传了个人资料图片。我想限制大小，但除了 $config['maxsize'] 之外，没有过多强调 codeigniter 文档。我尝试了以下操作，但没有收到任何消息。我将大小设置为 10 (KB) 只是为了测试。我是否必须以某种方式处理它才能将消息传达给我的视图？

```
public function add_user()
    {

        $config['upload_path']   = './uploads/';        
        $config['allowed_types'] = 'gif|jpg|png|jpeg';
        $config['max_size'] = '10';
        //$config['max_width'] = '1024';
        //$config['max_height'] = '768';

        $this->load->library('upload', $config);
        $fullImagePath;
        if (isset($_FILES['userfile']) && !empty($_FILES['userfile']['name']))
          {
          if ($this->upload->do_upload('userfile'))
          {
            // set a $_POST value for 'image' that we can use later
... 
```

顺便说一句，这段代码在我的模型中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-05-22T13:32:42.420

@Chetan Wadhwa，

你确定大小是字节（不是 KB）。请参阅 codeigniter 文档： http: [//www.codeigniter.com/user_guide/libraries/file_uploading.html](http://www.codeigniter.com/user_guide/libraries/file_uploading.html)，必须以 KB 为单位。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-29T09:45:01.323

这个大小不是以 KB 为单位，而是以字节为单位，因此对于 10KB，您应该写入 (10*1024) 字节或“10240”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T07:42:57.833

```
<?php

class upload extends CI_Controller {

function __construct()
{
    parent::__construct();
    $this->load->helper(array('form', 'url'));
}

function index()
{
    $this->load->view('upload_form', array('error' => ' ' ));
}

function do_upload()
{
    $config['upload_path'] = './uploads/';
    $config['allowed_types'] = 'gif|jpg|png';
    $config['max_size'] = '100';
    $config['max_width']  = '1024';
    $config['max_height']  = '768';

    $this->load->library('upload', $config);

    if ( ! $this->upload->do_upload())
    {
        $error = array('error' => $this->upload->display_errors());

        $this->load->view('upload_form', $error);
    }
    else
    {
        $data = array('upload_data' => $this->upload->data());

        $this->load->view('upload_success', $data);
    }

}
}
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T06:50:18.903

您不需要处理错误消息 CI 会注意这种情况，因此请按照codeIgniter 用户指南中指定的[上传类教程进行操作。](http://ellislab.com/codeigniter/user-guide/libraries/file_uploading.html)

# javascript - 使用 Javascript/jQuery 而不是“传统”技术进行 GUI 开发

> ID：16208098
> 
> 赞同：0
> 
> 时间：2013-04-25T06:44:43.053
> 
> 标签：javascript, jquery, qt, user-interface

我习惯于在工作中使用 C++/Qt 开发 GUI，但最近潜入了 Javascript/jQuery 世界。我认为可以很容易地通过 JSON 接口将现有的软件核心连接到 jQuery UI。

我想知道使用 jQuery 作为 GUI 而不是使用 C++/Qt 等传统技术构建 GUI 的缺点/优势是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T06:56:10.063

一般来说，肯定有更多的优点而不是缺点，因为你得到了一个跨平台的 UI，但是如果我们谈论的是原生应用程序，你将不得不使用包装器来访问 os 级别和文件结构的原生功能对于移动设备： Phonegap(Cordova) Titanium 用于桌面应用程序有许多包装器，现在最常见的方法是基于 nodejs 的应用程序，它运行一个 webkit 实例，所以你在 javascript 上同时编写“back”和“front”，例如：AppJs

PS对不起不能提供链接，没有足够的声誉

# javascript - 使表格单元格响应并使其均匀成方形，填充窗口

> ID：16208099
> 
> 赞同：0
> 
> 时间：2013-04-25T06:44:48.783
> 
> 标签：javascript, jquery, html, css

我想让表格单元格响应 - 甚至填充所有可用空间（窗口）的正方形。如果表格宽度为 100% - 它占用所有可用空间，均匀分布单元格，但仅水平分布。我用 jquery 编写了小 javascript，在窗口调整大小事件上调用了这个函数：

```
function windowReszie(){
 $("td").each(function(){
    $(this).css({"height":$(this).width()});
  })
} 
```

但是这种方法很慢，因为我有很多单元格 - 有没有办法只用 css 或任何其他更好、更快的方法来做到这一点？ ![在此处输入图像描述](https://i.stack.imgur.com/7lpZE.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T07:06:21.597

I see some problem with your approach, you're computing the width for every cell.

I'd do something along the lines of

```
function windowReszie(){
  var size =$("td").width();
  $("td").height(size);
} 
```

Another approach would be to set a class and change the css rule associated with the class, but that could be a bit tricky (see : [Changing a CSS rule-set from Javascript](https://stackoverflow.com/questions/1409225/changing-a-css-rule-set-from-javascript))

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T07:07:30.073

尝试仅在第一次添加类`<td>`，`<tr>`然后循环遍历该类...无需检查每个`<td>`项目。

# php - 在 MySQL 中同步两个表中的行数据的最佳方法是什么？

> ID：16208116
> 
> 赞同：2
> 
> 时间：2013-04-25T06:45:22.867
> 
> 标签：php, mysql, sql-update

我有两张表，为方便起见，请考虑以下示例。

*   联系人（有姓名和电子邮件）
*   消息（消息，但也有名称和电子邮件 w/c 需要同步到联系人表）

现在请，对于那些渴望说“使用关系方法”或外键等的人。我知道，但这种情况不同。我需要在消息表本身上拥有消息名称和电子邮件的“副本”，并且只需要不时同步它。

根据同步要求，我需要将消息上的名称与联系人表上的最新名称同步。

对于联系人表中的所有行，我基本上在循环中都有以下 UPDATE SQL

```
UPDATE messages SET name=(
SELECT name FROM contacts WHERE email = '$cur_email')
WHERE email='$cur_email' 
```

以上循环遍历所有联系人，并触发了与我一样多的联系人。

在不使用内部的情况下，我也有几个循环的想法，`SELECT`但我只是认为上面的方法会更有效（是吗？），但我想知道是否有更有效的 SQL 方式？喜欢：

```
UPDATE messages SET name=(
SELECT name FROM contacts WHERE email = '$cur_email')
WHERE messages.email=contacts.email 
```

看起来像加入的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T08:57:14.457

我认为它应该更有效

```
UPDATE messages m  JOIN contacts n  on  m.email=n.email SET m.name=n.name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T08:58:09.857

好的。我现在想通了.. 在更新时使用 JOINS

喜欢：

```
UPDATE messages JOIN contacts ON messages.email=contacts.email
SET messages.email = contacts.email
WHERE messages.email != contacts.email 
```

这很简单！

但是......我不确定这是否真的是我的帖子的答案，因为我的问题是在效率方面“最好的方法是什么”......

对 2000 条记录执行上述查询使我的系统暂停了 4 秒。在执行一些 select 、 php 循环和一些更新语句时感觉它更快..

嗯嗯

- - - 更新 - - - -

好吧，我继续创建了 2 个脚本来测试这个..

在我的 QuadCore i7 Ivybridge 机器上，令人惊讶

通过 SQL JOIN 的单个更新查询比执行一个相当多的查询和循环方法要慢得多。

一方面，我在 1000 条记录上运行了上述简单查询，其中所有记录都需要更新......

脚本执行时间为 4.92 秒！并导致我的机器打嗝一瞬间.. 注意到我的一个核心出现了 100% 的峰值..

对脚本的后续调用（没有需要更新的字段）花费了相同的时间！荒谬的..

另一方面，涉及对所有需要更新的行的 SELECT JOIN 查询，以及在 PHP 中的 foreach() 函数中循环的简单 UPDATE 查询。

脚本花了 3.45 秒完成所有更新。@ 大约 50% 的单核峰值和 1.04 秒的后续查询（没有需要更新的字段）

结案...

希望这对社区有所帮助！

ps 这就是我在与过于“编码标准”的程序员讨论一些逻辑时的意思。如果可以的话，他们的论点是“在 SQL 方面做”，因为它更快，更符合标准而不是粗糙他们说在循环中评估和更新的方法是“脏”代码..嘘。

# java - java使用值字符串创建日期对象

> ID：16208121
> 
> 赞同：26
> 
> 时间：2013-04-25T06:45:41.787
> 
> 标签：java, date

我正在使用它来获取当前时间：

```
java.util.Calendar cal = java.util.Calendar.getInstance();
    System.out.println(new java.text.SimpleDateFormat("EEEE, dd/MM/yyyy/hh:mm:ss")
            .format(cal.getTime())); 
```

我想将值（我打印它）放入一个日期对象中，我尝试了这个：

```
Date currentDate = new Date(value); 
```

但是eclipse告诉我这个功能不好。

**编辑** 是`value`我使用 system.out.println 打印给您的值

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2013-04-25T06:49:36.107

每当您想将字符串转换为日期对象时，`SimpleDateFormat#parse`
请尝试使用

```
String dateInString = new java.text.SimpleDateFormat("EEEE, dd/MM/yyyy/hh:mm:ss")
        .format(cal.getTime())
SimpleDateFormat formatter = new SimpleDateFormat("EEEE, dd/MM/yyyy/hh:mm:ss");
Date parsedDate = formatter.parse(dateInString); 
```

.Additional 事情是，如果你想将 a 转换为`Date`，`String`那么你应该使用`SimpleDateFormat#format`函数。
现在，不推荐使用 Point for you，现在 `new Date(String)`不推荐使用。现在，每当有人想要解析时，他/她都应该使用`SimpleDateFormat#parse`.

有关 SimpleDateFormat 选项中使用的更多日期和时间模式，请参阅[官方文档](https://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)。

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2013-04-25T06:50:31.057

使用 SimpleDateFormat 解析方法：

```
import java.text.DateFormat;
import java.text.SimpleDateFormat;

String inputString = "11-11-2012";
DateFormat dateFormat = new SimpleDateFormat("dd-MM-yyyy");
Date inputDate = dateFormat.parse(inputString, dateFormat ); 
```

由于我们有带有 LocalDate 的 Java 8，我建议使用下一个：

```
import java.time.LocalDate;
import java.time.format.DateTimeFormatter;

String inputString = "11-11-2012";
DateTimeFormatter formatter = DateTimeFormatter.ofPattern("dd-MM-yyyy");
LocalDate inputDate = LocalDate.parse(inputString,formatter); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-25T06:50:55.360

**首先要知道 ECLIPSE 这样做的原因。**

Date 只有一个构造函数**Date(long date)**，它要求 long 数据类型的日期。

您正在使用的构造函数

**日期（字符串 s）** 已弃用。从 JDK 1.1 版开始，由 DateFormat.parse(String s) 取代。

这就是为什么eclipse告诉这个功能不好。

请参阅此官方文档

**[http://docs.oracle.com/javase/6/docs/api/java/util/Date.html](http://docs.oracle.com/javase/6/docs/api/java/util/Date.html)**

* * *

**从您的上下文中弃用的方法 -- 来源 -- [http://www.coderanch.com/t/378728/java/java/Deprecated-methods](http://www.coderanch.com/t/378728/java/java/Deprecated-methods)**

方法或类可能被弃用的原因有很多。如果不破坏向后兼容性，API 可能不容易扩展，因此会被更强大的 API 取代（例如，java.util.Date 已被弃用，取而代之的是 Calendar 或 Java 1.0 事件模型）。在某些情况下，它也可能根本不起作用或产生不正确的结果（例如，某些 java.io 流类在某些编码下不能正常工作）。有时一个 API 只是构思不当（servlet API 中的 SingleThreadModel），然后什么都没有。一些早期的调用已经被“Java Bean”兼容的方法（getSize 的大小，getBounds 的边界等）取代。

* * *

**有几个解决方案只是 GOOGLE IT--**

您可以通过将日期字符串转换为长毫秒来使用日期（长日期），并且stackoverflow为此目的有很多帖子。

**[在java中将日期字符串转换为毫秒](https://stackoverflow.com/questions/8427169/converting-a-date-string-into-milliseconds-in-java)**

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-25T06:51:57.660

```
 import java.util.Date;
 import java.text.SimpleDateFormat; 
```

上面是导入方法，下面是Date的简单代码

```
 SimpleDateFormat dateFormat = new SimpleDateFormat("yyyy/MM/dd HH:mm:ss");
 Date date = new Date();

 system.out.println((dateFormat.format(date))); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-25T07:06:41.533

试试这个 ：-

```
try{
        String valuee="25/04/2013";
        Date currentDate =new SimpleDateFormat("dd/MM/yyyy").parse(valuee);
        System.out.println("Date is ::"+currentDate);
        }catch(Exception e){
            System.out.println("Error::"+e);
            e.printStackTrace();
        } 
```

输出：-

```
 Date is ::Thu Apr 25 00:00:00 GMT+05:30 2013 
```

您的值应该是正确的格式。

在您的问题中，您还要求以下内容：-

```
 Date currentDate = new Date(value); 
```

这种风格的日期构造函数已经被弃用了。所以，它不再使用了。我们知道 Date 有 6 个构造函数。[阅读更多](http://docs.oracle.com/javase/6/docs/api/java/util/Date.html)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-11-04T07:47:59.597

这是使用`SimpleDateFormat` `parse()`方法进行的优化解决方案。

```
SimpleDateFormat formatter = new SimpleDateFormat(
        "EEEE, dd/MM/yyyy/hh:mm:ss");
String strDate = formatter.format(new Date());

try {
    Date pDate = formatter.parse(strDate);
} catch (ParseException e) { // note: parse method can throw ParseException
    e.printStackTrace();
} 
```

需要注意的几件事

*   我们不需要创建日历实例来获取当前日期和时间，而是使用`new Date()`
*   此外，它**不需要**`SimpleDateFormat`在该问题的投票最多的答案中找到2 个实例。只是 **浪费内存**
*   此外，`Exception`当我们知道该`parse`方法只有机会抛出`ParseException`. 在处理异常时，我们需要**尽可能具体。**你可以参考一下，[throws Exception 不好的做法？](https://stackoverflow.com/questions/7966148/throws-exception-bad-practice/7966171#7966171)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-25T06:48:40.643

这是因为值来 String （[用于获取字符串的 Java Date 对象构造函数已被弃用](https://stackoverflow.com/questions/13823797/java-date-object-constructor-for-getting-string-is-deprecated)）

并且`Date(String)`已弃用。

看看[jodatime](http://joda-time.sourceforge.net/)或者你可以把 @SuppressWarnings({“deprecation”}) 放在调用`Date(String)`构造函数的方法之外。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-25T06:51:16.387

你基本上想要做的是： -

```
Calendar cal = Calendar.getInstance();
Date date = cal.getTime(); 
```

原因是，`String`您正在打印的只是您所需格式的`String`表示`Date`。如果您尝试将其转换为日期，您最终会做我上面提到的事情。

`Date`将（**cal.getTime()** ）格式化为 a`String`并试图从中取回 a `Date`- 没有任何意义。`Date`没有这样的格式。您只能`String`使用 SDF 获得它的表示。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-01-14T07:39:29.163

试试这个，它对我有用。

```
 String inputString = "01-01-1900";
    Date inputDate= null;
    try {
        inputDate = new SimpleDateFormat("dd-MM-yyyy").parse(inputString);
    } catch (ParseException e) {
        e.printStackTrace();
    }

    dp.getDatePicker().setMinDate(inputDate.getTime()); 
```

# c# - C# memory allocation: Difference between static class and a static instance

> ID：16208122
> 
> 赞同：0
> 
> 时间：2013-04-25T06:45:42.623
> 
> 标签：c#, memory-management, static, compact-framework, instance

How does CLR allocates memory in these 2 cases:
Are they both allocated in static memory area?

```
static class A 
{
    //Some methods
} 
```

**and**

```
class A 
{
    //Some methods    
}
class B
{
    static A inst = new A();
    //Some methods
} 
```

For the below statement, will the compiler

```
static A inst = new A(); 
```

allocate *A* in heap and assign it to static reference *inst* reference? **Or** it will create a static instance in ***High Frequency heap***?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T06:47:38.240

静态字段与任何静态字段一样，无论类是静态的还是静态的。

静态类只是确保所有成员都是静态的语言技巧，仅此而已。在 .NET 中甚至不存在静态类：静态类将被转换为具有私有实例构造函数的“普通”类。这样就无法构造该类的实例。

# c# - 使用 .NET 将 Excel 文件中的 html 字符串转换为格式化的 word 文件

> ID：16208127
> 
> 赞同：2
> 
> 时间：2013-04-25T06:46:13.270
> 
> 标签：c#, office-interop

输入是 Excel 文件 - 单元格可能包含一些基本的 HTML 格式，如 <b>、<br>、<h2>。

我想读取字符串并将文本作为格式化文本插入到 word 文档中，即 <b>Foo</b> 将在 Word 中显示为粗体字符串。

我不知道使用了哪些标签，所以我需要一个“通用解决方案”，查找/替换方法对我不起作用。

我 从 2011 年 1 月开始使用 WebBrowser 组件找到了一个[解决方案。](https://stackoverflow.com/questions/150208/how-do-i-convert-html-to-rtf-rich-text-in-net-without-paying-for-a-component)因此 HTML 被转换为 RTF 并且 RTF 被插入到 Word 中。我想知道今天是否有更好的解决方案。

使用商业组件对我来说很好。

**更新**

我遇到了 Matthew Manela 的[MarkupConverter](http://code.msdn.microsoft.com/windowsdesktop/Converting-between-RTF-and-aaa02a6e#content)课程。它将 HTML 转换为 RTF。然后我使用剪贴板将片段插入到word文件中

```
// rtf contains the converted html string using MarkupConverter
Clipboard.SetText(rtf, TextDataFormat.Rtf);
// objTable is a table in my word file
objTable.Cell(1, 1).Range.Paste(); 
```

这可行，但是使用剪贴板复制/粘贴多达几千个字符串会破坏什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-03T05:22:42.890

您将需要[OpenXML SDK](http://msdn.microsoft.com/en-us/office/bb265236.aspx)才能使用 OpenXML。进入它可能会非常棘手，但它非常强大，并且比 Office Automation 或 Interop 更加稳定和可靠。

下面将打开一个文档，创建一个`AltChunk`部件，将 HTML 添加到其中，并将其嵌入到文档中。有关更广泛的概述，`AltChunk`请参阅[Eric White 的博客](http://blogs.msdn.com/b/ericwhite/archive/2008/10/27/how-to-use-altchunk-for-document-assembly.aspx)

```
using (var wordDoc = WordprocessingDocument.Open("DocumentName.docx", true))
{
    var altChunkId = "AltChunkId1";
    var mainPart = wordDoc.MainDocumentPart;

    var chunk = mainPart.AddAlternativeFormatImportPart(AlternativeFormatImportPartType.Html, altChunkId);
    using (var textStream = new MemoryStream())
    {
        var html = "<html><body>...</body></html>";
        var data = Encoding.UTF8.GetBytes(html);
        textStream.Write(data, 0, data.Length);
        textStream.Position = 0;
        chunk.FeedData(textStream);
    }

    var altChunk = new AltChunk();
    altChunk.Id = altChunkId;
    mainPart.Document.Body.InsertAt(altChunk, 0);
    mainPart.Document.Save();
} 
```

显然，对于您的情况，您将想要找到（或构建）您想要的表格并将其插入`AltChunk`那里而不是在正文中的第一个位置。请注意，您插入到 word doc 中的 HTML 必须是带有`<html>`标签的完整 HTML 文档。我不确定是否`<body>`需要，但它不会受到伤害。如果您只有 HTML 格式的文本，只需将文本包装在这些标签中并插入到文档中。

您似乎需要使用 Office 自动化/互操作来获取表格高度。请参阅[这个答案](https://stackoverflow.com/a/9587724/789683)，它说 OpenXML SDK 不会更新高度，只有 Word 会。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-04T04:09:02.927

使用此代码它正在工作..

```
Response.AppendHeader("content-disposition", "attachment;filename=FileEName.xls");
Response.Charset = "";
Response.Cache.SetCacheability(HttpCacheability.NoCache);
Response.ContentType = "application/vnd.ms-excel";
this.EnableViewState = false;
//Response.Write("Your HTML Code");
Response.Write("<table border='1 px solid'><tr><th>sfsd</th><th>sfsdfssd</th></tr><tr>
<td>ssfsdf</td><td><table border='1 px solid'><tr><th>sdf</th><th>hhsdf</th></tr><tr>
<td>sdfds</td><td>sdhjhfds</td></tr></table></td></tr></table>");
Response.End(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-01T13:12:23.860

为什么不让 WORD 自己翻译，因为它理解 HTML。

1.  阅读您的 Excel 单元格
2.  将您的值写入 HTML 文本文件，就像它是 WORD 文档一样。
3.  打开 WORD 并让它读取该 HTML 文件。
4.  指示 WORD 将文档另存为新的 WORD 文档（如果需要）。

# android - 在android中使用intent打开带有附件的彩信默认屏幕

> ID：16208130
> 
> 赞同：2
> 
> 时间：2013-04-25T06:46:36.283
> 
> 标签：android

我的要求是我必须直接（没有应用程序选择器）从我的应用程序中打开带有 to、body 和 vcf 附件的消息默认 android 屏幕。我正在使用以下两种方法（方法）。但在第一种方法中，附件即将到来，但首先出现多个应用程序选择器屏幕，然后我必须选择消息应用程序。

在第二种方法中，默认消息传递应用程序正在打开，但附件 (.vcf) 文件未出现。请指教。下面是代码。

方法一：

```
public static void sendMMS(Context ctx,String firstname,String send_to,String body,String vcard)
    {

        Intent sendIntent = new Intent(Intent.ACTION_SEND);
        sendIntent.setType("text/x-vcard");
        sendIntent.putExtra("address", send_to);
        sendIntent.putExtra("sms_body", body);

      File file1 = new File(Environment.getExternalStorageDirectory().getAbsolutePath(),firstname+".vcf");
        sendIntent.putExtra(Intent.EXTRA_STREAM,
                Uri.fromFile(file1));
        ((Activity) ctx).startActivity(sendIntent);
    } 
```

方法二：

```
private void sendMMS()
{
    Intent smsIntent = new Intent(Intent.ACTION_SENDTO);
    smsIntent.addCategory(Intent.CATEGORY_DEFAULT);
    smsIntent.setType("vnd.android-dir/mms-sms");
     File file1 = new File(Environment.getExternalStorageDirectory().getAbsolutePath(),"file.vcf");
     smsIntent.putExtra(Intent.EXTRA_STREAM,
                Uri.fromFile(file1));
    smsIntent.setData(Uri.parse("sms:" + "XXXXXXXXXXX")); 
    startActivity(smsIntent);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-04T11:16:23.180

我最终得到了解决方案，如下所示。主要问题是 1\. 在 Intent 中添加 ClassName 和 2\. 使用从 file:// 开始的文件路径并将其放入 Uri.parse()

```
Intent sendIntent = new Intent(Intent.ACTION_SEND);
        sendIntent.setClassName("com.android.mms", "com.android.mms.ui.ComposeMessageActivity");
        sendIntent.putExtra("sms_body", body); 
        sendIntent.putExtra("address", send_to);
        sendIntent.putExtra(Intent.EXTRA_STREAM, Uri.parse("file:///sdcard/Test.vcf"));
        sendIntent.setType("text/x-vcard");
        startActivity(sendIntent); 
```

# mysql - 基于连接更新 mysql 表

> ID：16208132
> 
> 赞同：1
> 
> 时间：2013-04-25T06:46:37.590
> 
> 标签：mysql, sql

```
SELECT `pro`.`St`, `sho`.`Q`
FROM `sho`
 LEFT JOIN `web`.`pro` ON `sho`.`Pro_id` = `pro`.`ProdID` 
```

上面的 MySQL 代码生成了一个类似的表

```
st q
1  23
4  24 
```

st 来自一个表而 q 来自另一个表 我将如何使用此查询通过从第二个表中添加 q 来更新第一个表中的 st 行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T06:52:35.753

这是你想要的吗？

```
UPDATE  pro a
        INNER JOIN sho b ON b.Pro_id = a.Proid
SET     a.st = b.q 
```

*请在执行此操作之前在您的桌子上进行备份*

# batch-file - 批处理文件不直接执行（双击）

> ID：16208137
> 
> 赞同：1
> 
> 时间：2013-04-25T06:46:51.073
> 
> 标签：batch-file

只是写了一个简单的批处理文件来杀死给定的进程。

```
@ECHO OFF
set /p ProcName=Enter process name:
taskkill /IM "%ProcName%" /t /f 
```

我把它保存为`taskkill.bat`. 我双击这个 bat 文件，出现一个命令提示符窗口并询问`Enter process name:`我每次给出的任何进程名称都询问相同的消息并且根本没有执行`taskkill`命令。

现在在一个`cmd` 窗口中，我拖动批处理文件，并像往常一样询问`Enter process name:`我提供了进程名称，它成功地终止了该进程。

第一次发生了什么？为什么它第二次执行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-26T03:38:35.467

有人注意到批处理文件名与可执行文件相同。

**taskkill.bat**

那是行不通的...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T07:42:08.933

> 您是否第二次以管理员权限执行脚本？taskkill 需要管理员权限才能执行 - 否则它将打印拒绝访问（您可以在脚本末尾设置暂停以查看会发生什么）。要在不需要特殊权限的情况下终止进程，您可以使用 tskill

* * *

> 确切地 ！但是当我在命令提示符中拖动批处理文件时，该命令提示符在没有管理员权限的情况下运行？

这是一个很棒的技巧！- 刚刚测试过:-)。可能它应该被视为一个安全漏洞

# gcc - Cannot find -lfl when using flex

> ID：16208138
> 
> 赞同：1
> 
> 时间：2013-04-25T06:46:59.650
> 
> 标签：gcc, flex-lexer, lex

Here is my sample flex file,

```
%{
/* need this for the call to getlogin() below */
#include <unistd.h>
%}

%%
username        printf("%s\n", getlogin());
%%

main()
{
  yylex();
} 
```

I ran the following command,

```
$ flex sample.fl 
```

I could see the lex.yy.c file now.

I ran the following gcc command

```
$ gcc lex.yy.c -lfl 
```

and got the following error,

```
/usr/bin/ld: cannot find -lfl
collect2: ld returned 1 exit status 
```

I already have flex installed in my computer.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T10:16:18.530

在我的 Fedora 盒子中安装**flex-static.i686**包解决了这个问题。

# windows-phone-8 - Porting Windows 8 Metro App to Windows 8 phone App- identify API that are not implemented

> ID：16208139
> 
> 赞同：0
> 
> 时间：2013-04-25T06:47:07.213
> 
> 标签：windows-phone-8

I am porting a Windows 8 Metro application to a Windows 8 Phone app. While the Win 8 phone app compiles, there are many API's which throw the API not implemented exception at runtime.

Is there a way to identify all the API's that are not implemented in an existing source?

The only way I can think of doing is to identify all API's being used in my app and then check if that API is supported or not.

Thanks, Avinash

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T09:05:09.337

MSDN 将指定是否未实现给定的 API。

它将有一个像这样的部分：（例如，参见[这个页面，这是一个常见的例子）](http://msdn.microsoft.com/en-gb/library/windows/apps/windows.applicationmodel.packageid.fullname)。

> **评论**
> 
> 视窗电话 8
> 
> 此 API 未实现，如果调用将引发异常。

正如页面下方所说的那样，这很令人困惑......

> **最低支持手机** Windows Phone 8

...但正如您已经发现的那样，这是一种误导。

我认为 Intellisense 的工具提示也可以在 Visual Studio 中为您提供帮助。

# iphone - facebook login using SDK

> ID：16208140
> 
> 赞同：3
> 
> 时间：2013-04-25T06:47:10.013
> 
> 标签：iphone, objective-c, facebook, ios6

I am able to get the user profile permissions if user has set facebook account in his iPhone settings. For this I have used following code:

```
if(!_accountStore)
    _accountStore = [[ACAccountStore alloc] init];

ACAccountType *facebookTypeAccount = [_accountStore accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierFacebook];

[_accountStore requestAccessToAccountsWithType:facebookTypeAccount
                                       options:@{ACFacebookAppIdKey: @"app_id", ACFacebookPermissionsKey: @[@"email"]}
                                    completion:^(BOOL granted, NSError *error) {
                                        if(granted){
                                            NSArray *accounts = [_accountStore accountsWithAccountType:facebookTypeAccount];
                                            _facebookAccount = [accounts lastObject];
                                            NSLog(@"Success");

                                            [self me];
                                        }else{
                                           NSLog(@"go to iphone settings");

                                        }
                                    }];

-(void)me 
   {

    NSURL *meurl = [NSURL URLWithString:@"https://graph.facebook.com/me"];

    SLRequest *merequest = [SLRequest requestForServiceType:SLServiceTypeFacebook
                                              requestMethod:SLRequestMethodGET
                                                        URL:meurl
                                                 parameters:nil];

    merequest.account = _facebookAccount;

    [merequest performRequestWithHandler:^(NSData *responseData, NSHTTPURLResponse *urlResponse, NSError *error) {
        NSString *meDataString = [[NSString alloc] initWithData:responseData encoding:NSUTF8StringEncoding];

        NSLog(@"%@", meDataString);

    }];   
} 
```

If user hasn't set his facebook account then control will move to else part i.e. go to iphone settings. In this else part I want to open the facebook login page so that user will be able to login in his facebook account without going to iPhone settings. SO how could we open the facebook login via SDK. Please help me out from this issue.

Thanks in advance.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-06T14:31:59.497

在这种情况下，如果您不使用用户帐户（如果他/她没有在 iOS 设置中设置它），您需要实现 Facebook SDK ( [https://developers.facebook.com/ ios/](https://developers.facebook.com/ios/) ) 在您的应用程序上。这很简单，只需按照以下步骤（[https://developers.facebook.com/docs/getting-started/facebook-sdk-for-ios/](https://developers.facebook.com/docs/getting-started/facebook-sdk-for-ios/)）。

之后，您可以使用`FBSession's`方法`+openActiveSessionWithReadPermissions:allowLoginUI:completionHandler:`执行用户登录。

确实，在我的应用程序中，我什至没有尝试使用 Apple`requestAccessToAccountsWithType:options:completion:;`使用最新的 Facebook SDK 登录用户，默认行为是：

1.  尝试使用 iOS 设置上的用户帐户设置登录；
2.  如果没有找到帐户，尝试打开 Facebook 应用程序以请求登录/权限；
3.  如果设备上未安装 Facebook 应用程序，它会在 Safari 上打开 Facebook，作为后备。

# git - 如何将多个分支合并到 master 中？

> ID：16208144
> 
> 赞同：57
> 
> 时间：2013-04-25T06:47:30.110
> 
> 标签：git

```
 C---D  =>b1
      /    
     /  E---F  =>b2
     | /   
  A--B =======> master
     | \
     \  G---H  =>b3
      \ 
       I---J   =>b4 
```

我想合并`b1`, `b2`, `b3`,`b4`成`master`, 可以一次合并吗？

就像是：

```
git checkout master
git merge b1 b2 b3 b4 
```

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2013-04-26T14:29:00.413

Git 的`merge`命令支持多种[合并策略](https://www.kernel.org/pub/software/scm/git/docs/git-merge.html#_merge_strategies)。有两种策略可以一次合并两个以上的分支。

另请参阅此[问题](https://stackoverflow.com/questions/366860/when-would-you-use-the-different-git-merge-strategies)以获取对每个问题的不太正式的描述。

### 章鱼

> 这解决了两个以上的情况，但拒绝进行需要手动解决的复杂合并。它主要用于将主题分支头捆绑在一起。这是拉取或合并多个分支时的默认合并策略。

最后一条语句暗示如果你这样做`git merge branch1 branch2 ...`，它将使用**章鱼**策略。

### 我们的

> 这解决了任意数量的头，但合并的结果树始终是当前分支头的树，有效地忽略了所有其他分支的所有更改。它旨在用于取代分支的旧开发历史。

有关用例示例，请参阅此[问题。](https://stackoverflow.com/questions/1295171/git-merge-to-master-while-automatically-choosing-to-overwrite-master-files-with)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-25T06:51:33.770

Git 有一个称为 octupus 的合并策略，它可以合并多个分支，只要没有复杂的冲突。执行此操作的命令完全按照您的建议`git merge b1 b2`。

# iphone - NSString 并且没有 UTF-8 符号

> ID：16208145
> 
> 赞同：1
> 
> 时间：2013-04-25T06:47:30.973
> 
> 标签：iphone, objective-c, utf-8, nsstring

对于你们中的一些人（我敢肯定），这个问题很容易回答，但我在理解如何解决这个问题时遇到了一些困难。

我有一个包含如下表格的 .txt 文件：

" 236 ? 26 x00EE 16

正如您可能理解的那样，左列列出了符号，而右列列出了我在我的应用程序中定义的一些代码。

而且……您可能明白，在符号中，有一些“奇怪”。0x00EE 应该是“å”（上面有一个环）。

不幸的是我无法控制左栏，即它来自另一个软件。做了一些实验，我发现：

```
NSLog( @"\x00ee" ); 
```

例如产生警告，告诉 hte 代码不属于 UTF-8 范围。

所以我在徘徊如何将 NSString @"\x00ee" （我从文件中读取，由 6 个字符组成的字符串）转换为唯一的 unicode 字母“å”（上面有一个环）。

谁能帮我？

谢谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T07:18:30.293

您需要找出使用了什么字符集编码。0xEE 是 î 的 unicode。在 Unicode 中，å 是 E5。这以 UTF-8 编码为序列 0xC3 0xA5。以下对我有用：

```
 NSLog(@"\xc3\xa5"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T07:18:19.160

`NSNonLossyASCIIStringEncoding`如果您的输入字符串仅包含 ASCII 字符，那么您可以使用解码`\uNNNN`为相应 Unicode 字符的事实 ：

```
NSString *s = @"\\x00ee"; // from your text file
NSString *s1 = [s stringByReplacingOccurrencesOfString:@"\\x" withString:@"\\u"];
NSData *d = [s1 dataUsingEncoding:NSASCIIStringEncoding];
NSString *s2 = [[NSString alloc] initWithData:d encoding:NSNonLossyASCIIStringEncoding];
NSLog (@"%@", s2); 
```

输出：`î`，即 U+00EE（带有圆形的拉丁小写字母 I）。

（注：`å`是 U+00E5，不是 U+00EE）。

# c++ - C++11 异步 + 然后

> ID：16208147
> 
> 赞同：1
> 
> 时间：2013-04-25T06:47:40.440
> 
> 标签：c++, asynchronous, c++11, future

我尝试编译这个（带有一些明显的小修复） [c++11 异步延续或尝试](https://stackoverflow.com/questions/14200678/c11-async-continuations-or-attempt-at-then-semantics/14200861#14200861) 使用带有 libc++ 的 clang（最新版本）的 .then() 语义，但它不会编译：没有匹配函数调用'然后'。

我找不到原因...你能帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T15:04:00.273

有几个地方没有答案`move`。没有移动，`future`被要求复制，它不能，因为它是一个移动类型。

```
#include <future>

namespace detail
{

template<typename F, typename W, typename R>
struct helper
{
    F f;
    W w;

    helper(F f, W w)
        : f(std::move(f))
        , w(std::move(w))
    {
    }

    helper(const helper& other)
        : f(other.f)
        , w(other.w)
    {
    }

    helper(helper&& other)
        : f(std::move(other.f))
        , w(std::move(other.w))
    {
    }

    helper& operator=(helper other)
    {
        f = std::move(other.f);
        w = std::move(other.w);
        return *this;
    }

    R operator()()
    {
        f.wait();
        return w(std::move(f)); 
    }
};

}  // detail

template<typename F, typename W>
auto then(F f, W w) -> std::future<decltype(w(std::move(f)))>
{ 
    return std::async(std::launch::async,
      detail::helper<F, W, decltype(w(std::move(f)))>(std::move(f),
                                                      std::move(w))); 
}

int
test()
{
    return 1;
}

int
main()
{
    std::future<int> f = std::async(test);
    auto f2 = then(std::move(f), [](std::future<int> f)
    {
        return f.get() * 2; 
    });
} 
```

# delphi - Delphi中应用最大化时组件的anchor属性

> ID：16208151
> 
> 赞同：3
> 
> 时间：2013-04-25T06:47:45.530
> 
> 标签：delphi, delphi-7

我在表单的右侧放置了三个按钮。按钮的锚属性参数**akTop**、**akRight**设置为**true**，其他的 left 设置为**false**，以便在调整表单大小时按钮始终保持在边框附近的右侧。然后我将窗体的**WindowState**属性设置为**wsMaximized**，以便它在启动时覆盖整个屏幕。但是当我启动应用程序时，按钮更靠近中间而不是右侧。但是当我在设计时调整表单大小时，一切似乎都很好。

以下是一些快照，可以准确地向您展示我的意思：

在设计时：

![在此处输入图像描述](https://i.stack.imgur.com/93bcC.png)

![在此处输入图像描述](https://i.stack.imgur.com/APmjR.png)

在运行时：

![在此处输入图像描述](https://i.stack.imgur.com/89oqw.png)

请解释我做错了什么以及如何解决它以使其按预期工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-03T03:02:10.927

这看起来像按钮正在使用它们的设计位置创建，然后将表单设置为最大化，然后设置或放置锚属性。

在设计时锚点已经设置好了，这就是为什么你会看到它们随心所欲地移动。为了证明我的理论，使表单更小，运行应用程序并注意项目位于其较小的设计时间位置。

一个简单的解决方法来得到你想要的。将 Window 状态保持在 wsNormal 和 FormShow（在 Create 之后发生）执行以下操作：

```
procedure TForm1.FormShow(Sender: TObject);
begin
  self.WindowState := wsMaximized;
end; 
```

你会看到你想要的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-29T13:49:04.007

我在其中一个教程中看到了您的答案。但是真的不记得是哪一个了。您可以观看所有视频，甚至您会学到更多东西。它不会一路浪费时间。

链接：[学习德尔福电视](http://learndelphi.tv/)

如果你懒得看视频，你也可以试试下面的方法。将此代码放入表单调整大小：

```
buttoncreate.left := panel.width - (buttoncreate.width + buttonedit.width + buttondelete.width);
buttonedit.left := panel.width - (buttonedit.width + buttondelete.width);
buttondelete.left := panel.width - buttondelete.width; 
```

# php - php保存到文件没有提交按钮

> ID：16208152
> 
> 赞同：0
> 
> 时间：2013-04-25T06:47:52.747
> 
> 标签：php, forms

我上次发布的这个问题不太具体，而且没有任何经验。我已经调查了此事并进一步了解了但我需要一些帮助我有这个代码

```
<script type="text/javascript">
    $("#name").keyup(function() {
        $("#idOfPElementWhichYouWantToEdit").text($(this).val());
    });
</script>
<p id="idOfPElementWhichYouWantToEdit"></p>
<input name="name" id="name" action="<?php echo $_SERVER['PHP_SELF']; ?>" method="post"/>

<?php
$file = "logger.txt";
$handle = fopen($file,'a+') or die("can't open file");
$logged = $_POST['name'];
    $handed = $logged . "\n";
fwrite($handle, $handed);

?> 
```

它可能有几行额外的，但我搞砸了。它的主要目标是在输入时保存到文本文件中。（不需要提交按钮）我将不胜感激对代码的任何帮助或建议。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T07:04:29.713

Add form tag's and use that to call your onkeypress event.

```
<input type="text" onkeypress="saveForm()"> 
```

Then just make you saveForm() over right the file.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T06:53:35.373

你需要添加表单标签

```
 <form id="file_form"><input></form> 
```

并且在 JS 中这个事件需要被调用

```
 $(#file_form).submit() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T07:07:37.837

我同意@yogesh。使用 ajax 来完成这项任务。我发现了一些可能与您的问题相似且对您有用的链接。

1 - [http://www.9lessons.info/2011/03/live-table-edit-with-jquery-and-ajax.html](http://www.9lessons.info/2011/03/live-table-edit-with-jquery-and-ajax.html)。2 - [http://code.google.com/p/jquery-datatables-editable/](http://code.google.com/p/jquery-datatables-editable/)。

只需更改代码以将数据存储在 logger.txt 而不是 DB 中。

# sql - 查询获取每条记录的最小日期

> ID：16208159
> 
> 赞同：2
> 
> 时间：2013-04-25T06:48:22.783
> 
> 标签：sql, sql-server, select

我想获得我的表中每条记录的最小日期，其中包含一个主键的多个日期条目。看看我的表：

```
 CaseNo     Entry_date   
   ABC-001     2/12/13
   ABC-002     2/09/13
   ABC-001     1/01/13
   ABC-001     1/31/13
   ABC-002     1/01/13
   ABC-003     2/01/12
   ABC-003     2/18/13 
```

我想要这个结果：

```
 CaseNo     Entry_date    Min_date
       ABC-001     2/12/13      1/01/13
       ABC-002     2/09/13      1/09/13
       ABC-001     1/01/13      1/01/13
       ABC-001     1/31/13      1/01/13
       ABC-002     1/09/13      1/09/13 
       ABC-003     2/01/12      2/01/13
       ABC-003     2/18/13      2/01/13 
```

我想在我的桌子上记录每个 CaseNo 的最短日期。我试过这段代码：

```
Select
    CaseNo,Entry_date, Min(Entry_date) as Min_date
from mytable group by CaseNo 
```

结果是这样的：

```
 CaseNo     Entry_date    Min_date
   ABC-001     1/01/13      1/01/13
   ABC-002     1/09/13      1/09/13 
   ABC-003     2/01/12      2/01/13 
```

该代码删除了没有最短日期的行。我想将所有记录的最短日期显示为`Min_date`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T09:58:08.587

您可以使用 CTE 或子查询来解决它。CTE 具有更好的性能。

子查询版本

```
SELECT
  CaseNo,
  Entry_date,
  (SELECT MIN(Entry_date) FROM Cases subc WHERE subc.CaseNo=c.CaseNo GROUP BY CaseNo) AS MinEntryDate
FROM Cases c; 
```

CTE版

```
WITH CasesMinEntryDate(CaseNo, MinEntryDate) AS 
(
  SELECT CaseNo, MIN(Entry_date) FROM Cases GROUP BY CaseNo
)
SELECT
  c.CaseNo,
  Entry_date,
  MinEntryDate
FROM Cases c
INNER JOIN CasesMinEntryDate cmed ON c.CaseNo=cmed.CaseNo; 
```

[http://sqlfiddle.com/#!3/0feee/8](http://sqlfiddle.com/#!3/0feee/8)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T09:12:21.220

```
Select a.Case_No,
       a.Entry_date, 
       Min(b.Entry_date) as Min_date 
from   mytable a, 
       mytable b
where  a.case_no = b.case_no
group by a.Case_No, a.entry_date
order by a.entry_date 
```

[http://sqlfiddle.com/#!2/fe6bd/2](http://sqlfiddle.com/#!2/fe6bd/2)

# facebook - 通过 Graph API 检索公共视频

> ID：16208163
> 
> 赞同：2
> 
> 时间：2013-04-25T06:48:32.900
> 
> 标签：facebook, facebook-graph-api, video

我们正在使用 Facebook Graph API 根据以下查询搜索公共帖子：-

" [https://graph.facebook.com/search?q=](https://graph.facebook.com/search?q=) " sSearchText

我们发现此查询当前仅返回与状态更新相关的公开帖子。它不会返回包含视频的帖子。您能否告诉我们如何检索相同的内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T13:55:18.987

您需要使用 FQL 而不是 Graph API。有关如何在 Facebook 中查询视频对象的详细信息，请访问以下链接：

[https://developers.facebook.com/docs/reference/fql/video](https://developers.facebook.com/docs/reference/fql/video)

有关更多详细信息，请参阅此现有问题：[Facebook Graph API 和视频](https://stackoverflow.com/questions/5711622/facebook-graph-api-and-videos?answertab=active#tab-top)

# html - 使用 CSS 突出显示 HTML 表格中的不同项目

> ID：16208164
> 
> 赞同：1
> 
> 时间：2013-04-25T06:48:33.490
> 
> 标签：html, css, stylesheet

代码 ：

```
<html>
<head>
<title>Hello World</title>
</head>
<body>
<table border=1>
<tr>
<td >Old</td>
<td>1</td>
</tr>

<tr>
<td>New</td>
<td>1</td>
</tr>
</table>
</body> 
```

有没有什么技术可以使用 CSS 来突出显示已更改的项目（在本例中为第 2 行的第 1 列）？还是我必须求助于 JavaScript 之类的其他东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T06:52:30.847

使用如下类：

```
<html>
<head>
<style type="text/css">
 .highlight{
    background: fuchsia;
}
</style>
<title>Hello World</title>
</head>
<body>
<table border=1>
<tr class="highlight">
<td >Old</td>
<td>1</td>
</tr>

<tr>
<td>New</td>
<td>1</td>
</tr>
</table>
</body> 
```

如果发生变化，您可以将类添加到特定元素：

```
$(element).addClass('highlight'); 
```

或使用纯 JavaScript：

```
element.class = 'highlight'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T06:50:34.953

如果您询问如何特别突出第二行的第二列，这将起作用：

`table > tr:nth-child(2) > td:nth-child(2) { background-color:#FFEEEE; }`

如果您询问如何在任何地方突出显示更改的行，请使用类。

将此添加到您的文档或样式表中。

`<style> .highlight { background-color:#FFEEEE; }`

将此添加到您的 TD

`class="highlight"`

# vba - Excel - VBA：只要单元格的内容等于特定值就循环

> ID：16208176
> 
> 赞同：1
> 
> 时间：2013-04-25T06:49:17.380
> 
> 标签：vba, excel

我正在尝试修改我的代码以允许在运行循环时考虑更多因素。这是我到目前为止所拥有的，它是一个循环运行 i = 2 到 605（因为在 2 到 605 之间，我**的 G 列的值**始终是相同的“马卡蒂市”）。
![在此处输入图像描述](https://i.stack.imgur.com/x70y2.jpg)
对于这个循环，我定义了一些动作并且运行良好。这是显示我的循环在做什么的相关代码：

```
For i = 2 To lRowBldg
Range("B" & i).Activate

'try to find a match btwn active cell and one of the elements from parsed address
    For Each cell In elementsListRange.Cells
      If Match(ActiveCell.Value, cell.Value) Then
        Range("K" & i).Value = Range("K" & i).Value + 13
        Else
        Range("K" & i).Value = Range("K" & i).Value + 0
      End If
      If Match(ActiveCell.Offset(0, 4).Value, cell.Value) Then
      Range("K" & i).Value = Range("K" & i).Value + 8
        Else
        Range("K" & i).Value = Range("K" & i).Value + 0
      End If
    Next

Next i 
```

但由于我计划对这个文件进行一些修改，我需要重新考虑我的代码。到目前为止，我只有一个城市的这个文件，所以基本上我可以从第一个值循环到最后一个值，这没关系。现在，我计划添加更多城市：例如，从 2 到 605（马卡蒂市）、从 606 到 900（布拉布拉市）、从 901 到……等等。

我尝试做的是这样的：
“**只要 G 列中单元格的值等于 XXXXX（可能是马卡蒂市，可能是 blabla 市，无论如何），就循环**”
如果我提到马卡蒂市，它将循环 i = 2 到 605，如果是 blabla City，则循环 i = 606 到 900，依此类推。

您是否知道如何以不会太消耗资源的方式执行此操作，因为我的文件最终可能会很长？

提前非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T13:23:26.297

你可以试试这个，使用 L & N 列，并**完全避免循环**：

将所有代码放在标准模块中，然后修改*setColumnKValues*中的代码以在 G 列中搜索不同的 cioy 名称。

**假设：**

*   不同的城市将被组合在一起
*   您可以使用几个额外的列（在本例中为 L 和 N）作为中间体
*   您将按照工作表上城市的顺序调用 setFormulasColumnK
*   也就是说，根据您问题中的代码，如果满足条件，您希望在 K 列中添加一个数字。

**它是如何工作的：** 首先，在 N 列中我们放置标记值，显示城市变化的位置，然后在 L 列中输入公式，如果它与传入的城市匹配，则 L=K+13 最后，我们复制粘贴K 列中的新值，并清除 L 和 N 列

```
Private oLastRange As Range
Private iFirstCell As Integer
Private iLastCell As Integer
Private lLastRow As Long

Sub setFormulasColumnK(ByVal sCity As String)

Dim sFormula As String
Dim oRange As Range

lLastRow = Cells(Rows.Count, Range("G1").Column).End(xlUp).Row

Range("N4:N" & lLastRow).Formula = "=IF(G4<>G5,NA(),"""")"

If Not Range("G:G").Find(sCity) Is Nothing Then
    iFirstCell = Range("G:G").Find(sCity).Row
Else
    Exit Sub
End If

Set oRange = Range("N" & iFirstCell)

iLastCell = Range("N" & iFirstCell & ":N" & lLastRow).Find("#N/A", oRange).Row

Range("L" & iFirstCell & ":L" & iLastCell).Formula = "=IF(TRIM(G:G)=""" & sCity & """,K:K+13,0)"
Set oLastRange = Range("L" & iLastCell)

End Sub

Sub setColumnKValues()

    Set oLastRange = Nothing

    Call setFormulasColumnK("Makati City")
    'MsgBox oLastRange.Address
    Call setFormulasColumnK("London")
    'MsgBox oLastRange.Address
    Call setFormulasColumnK("Birmingham")
    'MsgBox oLastRange.Address
    Call setFormulasColumnK("Moscow")
    'MsgBox oLastRange.Address
    Call setFormulasColumnK("Luxembourg")
    'MsgBox oLastRange.Address
    Call setFormulasColumnK("Paris")
    'MsgBox oLastRange.Address

    Range("L4" & ":L" & lLastRow).Copy
    Range("K4" & ":K" & lLastRow).PasteSpecial xlPasteValues
    Range("N4:N" & lLastRow).Clear
    Range("L4" & ":L" & lLastRow).Clear

End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T07:32:45.063

用一段时间？这是一些想法....

```
 Sub Test()
        dim rng as range
        rng = worksheet.find

        While rng.Value2 LIKE "Makhati City"
        'your logic here
        rng.offset(row+1,col+0 or like this)
        Wend
    End Sub 
```

# sql - SQL 查询 GROUP BY

> ID：16208178
> 
> 赞同：-1
> 
> 时间：2013-04-25T06:49:32.497
> 
> 标签：sql, oracle, group-by

我有以下记录和价值观：

```
create table student (
  LastName      varchar(40),
  FirstName     varchar(40),
  SID           number(5),
  SSN           number(9),
  Career        varchar(4),
  Program       varchar(10),
  City          varchar(40),
  Started       number(4),

  primary key (SID),
  unique(SSN)
);

create table enrolled (
  StudentID     number(5),
  CourseID      number(4),
  Quarter       varchar(6),
  Year          number(4),

  primary key (StudentID, CourseID),
  foreign key (StudentID) references student(SID),
  foreign key (CourseID) references course(CID)
);

insert into student
    values ( 'Brennigan', 'Marcus', 90421, 987654321, 'UGRD', 'COMP-GPH', 'Evanston', 2001 );
insert into student
    values ( 'Patel', 'Deepa', 14662, null, 'GRD', 'COMP-SCI', 'Evanston', 2003 );
insert into student
    values ( 'Snowdon', 'Jonathan', 08871, 123123123, 'GRD', 'INFO-SYS', 'Springfield', 2005 );
insert into student
    values ( 'Starck', 'Jason', 19992, 789789789, 'UGRD', 'INFO-SYS', 'Springfield', 2003 );
insert into student
    values ( 'Johnson', 'Peter', 32105, 123456789, 'UGRD', 'COMP-SCI', 'Chicago', 2004 );
insert into student
    values ( 'Winter', 'Abigail', 11035, 111111111, 'GRD', 'PHD', 'Chicago', 2003 );
insert into student
    values ( 'Patel', 'Prakash', 75234, null, 'UGRD', 'COMP-SCI', 'Chicago', 2001 );
insert into student
    values ( 'Snowdon', 'Jennifer', 93321, 321321321, 'GRD', 'COMP-SCI', 'Springfield', 2004 );

insert into enrolled
    values (11035, 1020, 'Fall', 2005);
insert into enrolled
    values (11035, 1092, 'Fall', 2005);
insert into enrolled
    values (11035, 8772, 'Spring', 2006);
insert into enrolled
    values (75234, 3201, 'Winter', 2006);
insert into enrolled
    values (08871, 1092, 'Fall', 2005);
insert into enrolled
    values (90421, 8772, 'Spring', 2006);
insert into enrolled
    values (90421, 2987, 'Spring', 2006); 
```

我的目标是：列出（成对）一起上同一门课的学生。

预期输出：

```
StudentID   COURSEID
11035   1092
8871    1092
11035   8772
90421   8772 
```

我怎样才能做到这一点？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T07:22:24.710

请尝试查询：

```
select * from(
  select a.FirstName, a.LastName, b.StudentID, b.COURSEID, count(*) over (partition by b.COURSEID) CNum
  from STUDENT a inner join enrolled b on a.SID=b.StudentID
  ) x where CNum=2 
```

# cmd - 启动外部 cmd 提示符并与 java 应用程序同时更新它

> ID：16208181
> 
> 赞同：0
> 
> 时间：2013-04-25T06:49:49.320
> 
> 标签：cmd, prompt, processbuilder

我希望能够与我的 Java 代码同时运行外部 cmd 提示符。运行 java 应用程序时需要启动外部 cmd 提示符，并且这个命令提示符需要从我的 java 应用程序更新，我需要从这个命令提示符获取值到 java 应用程序。请提供合适的建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T06:52:47.243

尝试这个

```
Runtime rt = Runtime.getRuntime();
rt.exec("cmd.exe /c start command"); 
```

**更新 2**

要执行命令试试这个

```
rt.exec("cmd.exe /c start cmd.exe /k \"ping localhost\""); 
```

# asp.net-mvc-4 - 如何检查表单数据是否被修改？

> ID：16208183
> 
> 赞同：1
> 
> 时间：2013-04-25T06:50:11.833
> 
> 标签：asp.net-mvc-4

我有一个非常复杂的表格，我不想因为有人进入更新页面而进行所有数据库查询。

我如何知道表单内的内容是否已被修改？

我不使用 knockout.js，也不想实现它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T07:09:11.577

你可以使用javascript。例如，一旦呈现表单，您可以计算校验和，然后在提交之前重新计算该校验和并比较 2 个值。然后你可以设置一个隐藏字段的值，这样当表单提交到服务器时，你就会知道是否有修改：

```
String.prototype.hashCode = function() {
    var hash = 0;
    if (this.length == 0) return hash;
    for (i = 0; i < this.length; i++) {
        char = this.charCodeAt(i);
        hash = ((hash<<5) - hash) + char;
        hash = hash & hash;
    }
    return hash;
};

$(function() {
    var $form = $('form');
    $form.data('checksum', $form.serialize().hashCode())
    $form.submit(function() {
        var initialChecksum = $(this).data('checksum');
        var currentChecksum = $(this).serialize();
        var isDirty = initialChecksum != currentChecksum;
        $('#isDirty').val(isDirty);
    });
}); 
```

并且您的视图模型可能有一个`IsDirty`布尔属性，您可以在处理表单提交的控制器操作中查询该属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T07:19:32.583

也许有一些jQuery。将一些类分配给字段并触发更改事件并将更改的字段的名称放在某个隐藏字段中，然后您可以在服务器端拥有已更改的字段。

```
<input type="hidden" id="changedNames" name ="changedNames" />

$(function () {
    $('.observe').change(function (e) {
        var thisName = $(this).attr('name');
        $('#changedNames').val($('#changedNames').val() + thisName + " ");

    });
}); 
```

# r - R如何在sprintf中输出“\”

> ID：16208191
> 
> 赞同：2
> 
> 时间：2013-04-25T06:50:43.873
> 
> 标签：r, printf

我想要`sprintf`一个带有 a 的字符串，`"\"`但它不起作用：

```
sprintf("& $\pm %s \delta$", 1.23)
Error: '\p' is an unrecognized escape in character string starting ""& $\p" 
```

我努力了：

```
sprintf("& $\\pm %s \\delta$", 1.23)
[1] "& $\\pm 1.23 \\delta$" 
```

但我需要结果`"& $\pm 1.23 \delta"`

我怎样才能得到正确的结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T06:57:52.423

不确定您使用它的目的，但`\\`如果您尝试在 .Rnw 文件中使用它，但 R 需要`\\`. 如果您只是想将其剪切并粘贴到某处，请将其包裹起来，`cat`如下所示：`cat(sprintf("& $\\pm %s \\delta$", 1.23))`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T06:56:00.470

\ 有一个特殊的用途。例如，\n 是换行符，将按原样打印，而不是“\n”。

如果要打印反斜杠，请使用另一个反斜杠对其进行转义。所以“\”将打印一个反斜杠。

希望我有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T06:57:35.737

只需写 \\ - 这将产生一个斜杠。这是因为斜杠是一个特殊字符，在打印之前需要对其进行转义；）

# php - 如何在sql中按周对数据进行分组？

> ID：16208192
> 
> 赞同：3
> 
> 时间：2013-04-25T06:50:48.707
> 
> 标签：php, sql, sql-server

我得到如下表的表值

```
 Name            City             Date
  a                1             Mar 22 2013
  b                2             Apr 19 2013
  c                3             Apr 20 2013 
  d                4             Apr 22 2013
  e                5             Apr 27 2013
  f                6             Apr 30 2013
  g                7             Jun 5  2013 
```

我得到了上表的值。今天的日期是 2013 年 4 月 25 日。我需要按 +7 和 -7 的值进行分组，例如**Apr 18 2013 到 Jun 2 2013**。请帮我这样做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T06:54:27.143

```
select * from yourTable 
where DATEDIFF(day,'2013-04-25',[Date]) between -7 and 7 
```

如果您在查询运行时需要当前日期，则使用`GETDATE()`函数而不是`'2013-04-25'`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-25T07:00:59.223

根据当前日期动态创建条件

```
SELECT *
FROM dbo.yourTable
WHERE Date >= DATEADD(DAY, DATEDIFF(DAY, 0, GETDATE())-7, 0)
  AND Date < DATEADD(DAY, DATEDIFF(DAY, 0, GETDATE())+8, 0) 
```

# java - 如何从 Java 中的非 Android 扫描仪读取 QR 码扫描仪数据

> ID：16208194
> 
> 赞同：-1
> 
> 时间：2013-04-25T06:50:52.173
> 
> 标签：java, qr-code

在我的项目中，我创建了存储加密用户信息的 QRCode Image。现在，我必须学习如何在我的 java Web 应用程序（使用 jsp 和 servlet）中获取由扫描仪（不是安卓手机）发送的加密用户信息数据。我搜索了很多，与这个粒子相关，但我只得到一些粒子，它显示了如何与安卓手机一起使用。所以，你能给我一个链接或一些电子书来学习如何使用二维码扫描仪获取数据并将其插入网页的文本框中。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T07:03:22.363

通常，大多数扫描仪都像键盘一样工作，因此从标准输入中读取将为您提供刚刚读取的字节字符串。如何解释它们取决于扫描仪中的数据格式。这通常很好，但如果您有不止一台扫描仪，或者如果有人要同时使用键盘，这将不起作用。

另一种选择是可以设置为模拟 RS-232 串行端口的扫描仪。在这种情况下，您可以使用诸如[RXTX](http://rxtx.qbang.org/)之类的库，它可以让您打开到串行端口的流并读取传入的数据。

扫描仪所处的模式通常可以使用手册中的条形码进行编程。扫描后，扫描仪会更改模式。

# javascript - 如何更新 simpledialog2 中的空白内容？

> ID：16208197
> 
> 赞同：0
> 
> 时间：2013-04-25T06:50:58.510
> 
> 标签：javascript, jquery, jquery-mobile

我正在使用 simpledialog2 插件，它工作正常，但我想刷新内容而不关闭它。即我有一个应该修改对话框内容的按钮。任何人都可以建议如何清除和更新 simpledialog2 的空白内容而不调用它两次。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T08:08:59.150

你想要这样 [的 jsfiddle 演示吗](http://jsfiddle.net/visnupriya/7YpkR/2/)

代码在这里：

```
$(document).delegate('#opendialog', 'click', function() {
  // NOTE: The selector can be whatever you like, so long as it is an HTML element.
  //       If you prefer, it can be a member of the current page, or an anonymous div
  //       like shown.
  $('<div>').simpledialog2({
mode: 'blank',
        headerText: 'Alert',
        headerClose: true,
        blankContent : 
          "<br/><br/><br/><p id='test_content'>Test Test Test Test</p>"+
        "<a href='#' data-role='button' id='accept_time_btn'>Accept</a>"
   })

})                   
$('#accept_time_btn').live("click",function(){
  // alert(work_order_id)
 $('#test_content').html("Update Test Contents");

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-01T09:44:26.180

上面的例子有时会起作用，但有一个属性必须设置为 true，即 dialogAllow。见下面的代码

```
 $('div').simpledialog2({
                mode : 'blank',
                headerText : "Some text",
                headerClose: true,
                dialogAllow: true,
                dialogForce: false,
                showModal:true,
                blankContent :rhtml

              }); 
```

上面的代码是显示带有空白 HTML 的 Dialog 或者可能包含一些 HTML 内容

下面两个语句将有助于更新现有 simpledialog 上的内容，而无需再次调用它 $.mobile.sdCurrentDialog.updateBlank(rhtml); $('div').simpledialog2('refresh');

希望这对您有所帮助

# c - C 编程为什么我的代码不起作用？

> ID：16208198
> 
> 赞同：-2
> 
> 时间：2013-04-25T06:50:59.390
> 
> 标签：c

`S=1+1*2+1*2*3+1*2*3*4+..n!`因此，我必须为用户给出 n 的位置编写代码。我写了这段代码

```
#include <stdio.h>
int main (void)
{
    int i, n, j, s, p;
    printf("Put a number:");
    scanf("%d",&n);
    s = 0;

    for (i = 1; i <= n; i++);    
    {
     p=1;    
    }

   for (j=1;j<=i;j++)
   {
       s=s+(p*i);
   }
   printf("\n Sum=%d",s);
   return 0;
} 
```

它可以编译，但是当我运行它并输入例如：2，结果应该是 3 时是 9。我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T07:36:25.467

这就是你需要的

```
int f = 1;
int s = 0;
for (i = 1;i <= n;i++)
{     
    f *= i;
    s += f;
} 
```

但我建议您使用调试器查看自己的代码，以了解事情是如何工作的

编辑：

`for (i=1;i<=n;i++);`相当于`i = n+1`

这里的块没用，你只是将 p 设置为 1；

```
{
 p=1;    
} 
```

在下面 i 总是`n+1`并且`p`总是 1，所以你有效地做`i+i+i...`了 n 次

```
for (j=1;j<=i;j++)
{
   s=s+(p*i);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T06:56:12.650

这 ; 在第一个“for”结束语句之后，这是一个空循环。此外，第二个循环应该在第一个循环内，而不是。缩进代码不仅仅是装饰性的——它可以帮助澄清这样的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T06:56:46.277

我建议您先编写一个计算阶乘（n）的函数，然后在循环中使用该函数。

会更容易理解。

```
int fact( int n) {
   // do your factorial compututation
}

int n = 0, sum = 0;

scanf("%d", &n);

for( int i = 0; i<n; i++) 
{
   sum += fact(i);
} 
```

您提供的代码有几个缺陷：

*   `for (i=1;i<=n;i++);`只是在做`i = n;`；我不认为那是你想要做的
*   即使这个循环是正确的，你的 for 的主体也会在每次迭代`{ p=1; }`时分配 1 。`p`我认为这也不是你想要的。
*   我建议自己尝试一下，拿一张纸和一支笔，在你的程序中一步一步来看看每一步发生了什么。在尝试用 C 编写算法之前，您应该在纸上设计算法。

为了优化，这是你的数学问题：

![在此处输入图像描述](https://i.stack.imgur.com/MM4UH.png)

在第二行，如果你保留`prev = n!`，你会看到在你的 for 循环中，你可以通过执行以下操作来优化 fact(i) ：

```
int prev = 1;
int sum = 0;
for( int i = 1; i<n; i++) // start at 1 to skip the first iteration where 0! = 1
{
   sum += prev;
   prev = prev * i; // compute next factorial
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T07:08:39.670

这是该程序背后的主要逻辑`Use a recursive function to calculate the factorial of n,and use this within a for loop to calculate the summation for all values between 1 and n`：

```
#include<stdio.h>

int factorial(int);

int main(void)
  {
   int i,n,s;
   printf("Put a number:");
   scanf("%d",&n);
   s=0;

     for(i=1;i<=n;i++)
     {
       s+=factorial(i);
     }
  printf("\n Sum=%d",s);

  }

int factorial(int x)
  {

    if(x==1)
    return 1;    
    return x*factorial(x-1);

  } 
```

在您的程序中，以下代码完全没有任何用途：

```
for (i=1;i<=n;i++);    
    {
     p=1;    
    } 
```

此外，您不需要这么多变量来完成这项工作。使用递归使其变得更加简单和优雅，如果您这样做是为了完成作业，如果您能以更聪明的方式完成，您可以给老师留下更多印象。使用`for`循环只有整件事才会把事情弄得一团糟。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-25T07:09:42.317

基本上一切都错了:-)

```
#include <stdio.h>

int factorial(int n)
{
    int i, res = 1;

    for(i = 2; i <= n; i++)
        res *= i;

    return res;
}

int main(void)
{
    int i, n, s = 0;
    printf("Put a number:");
    scanf("%d", &n);
    s = 0;
    for (i = 1; i <= n; i++)
        s += factorial(i);

    printf("\n Sum=%d\n", s);
    return 0;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-25T07:02:16.680

我认为基本上它需要两个循环，一个用于添加阶乘值，一个用于计算阶乘的内部循环。

```
#include <stdio.h>
int main (){
        int i,n,j,sum,factorial;
        printf("Put a number:");
        scanf("%d",&n);
        sum = 0;
        for (i=1;i<=n;i++){
                factorial = 1;
                for (j=2;j<=i;j++){
                        factorial *= j;
                }
                sum += factorial;
        }
        printf("\nSum=%d\n",sum);
        return 0;
} 
```

但是我们可以发现，我们不需要每次都从 1 开始计算阶乘，因为我们可以从 factorial(n - 1) 得到 factorial(n)。所以：

```
#include <stdio.h>
int main (){
        int i,n,j,sum,factorial;
        printf("Put a number:");
        scanf("%d",&n);
        sum = 0;
        factorial = 1;
        for (i=1;i<=n;i++){
                factorial *= i;
                sum += factorial;
        }
        printf("\nSum=%d\n",sum);
        return 0;
} 
```

此外，您应该在代码样式和命名约定方面做得更好。

# ios - 意外的接口名称 - Xcode

> ID：16208200
> 
> 赞同：1
> 
> 时间：2013-04-25T06:51:09.973
> 
> 标签：ios, iphone, xcode, appdelegate, presentviewcontroller

我正在开发一个从 iOS 照片库中检索照片的应用程序。选择照片后，我想定位一个 .xib 以显示可以编辑所选照片的​​界面。

但是，由于此错误，构建失败：

> “意外的接口名称‘imageEditorView’：预期的表达式”

这是代码：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:    (NSDictionary *)launchOptions
{
    [self dismissViewControllerAnimated:YES completion:^{
        [self.parentViewController presentViewController:imageEditorView: animated:YES completion:nil];
    }];
} 
```

我在两个控制器的 .h 文件中正确导入了所有外部组件。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T06:58:38.183

试试这样

```
 - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:    (NSDictionary *)launchOptions
    {
        [self dismissViewControllerAnimated:YES completion:^{
            [self.parentViewController presentViewController:imageEditorView: animated:YES completion:nil];
        // in your code problem must be here

        }];
    }
imageEditorView *svc = [[imageEditorView alloc]initWithNibName:@"imageEditorView"  bundle:nil];
[self presentViewController:svc animated:YES completion:NULL]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T07:15:10.307

Your error is here:

```
[self.parentViewController presentViewController:imageEditorView: animated:YES completion:nil];
----------------------------------------------------------------^ 
```

You should use like this

```
[self.parentViewController presentViewController:imageEditorView animated:YES completion:nil]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T07:18:21.280

您的代码有几个问题：

*   `imageEditorView`是一个类的名称。这不能作为消息参数。您需要传递对对象的引用。

*   `imageEditorView`之后，之前有一个额外的冒号`animated`。您需要将其删除。

*   发送`dismissViewControllerAnimated:completion:`到`self`内部`application:didFinishLaunchingWithOptions:`没有任何意义。要么你在你的应用程序委托中定义这个方法，它不理解`dismissViewControllerAnimated:completion:`消息，要么你在视图控制器中定义它，在这种情况下`application:didFinishLaunchingWithOptions:`不会被调用（除非你编写代码来显式调用它，这也将是很不寻常）。

基于所有这些错误，我怀疑您根本不了解太多 Objective-C 或 iOS 编程。您需要通过一些教程来学习基础知识，因为这些都是非常基本的错误。

# python - 被python文件模式“w+”弄糊涂了

> ID：16208206
> 
> 赞同：253
> 
> 时间：2013-04-25T06:51:34.400
> 
> 标签：python, file, io

从[文档](http://docs.python.org/2/library/functions.html#open)中，

> 模式“r+”、“w+”和“a+”打开文件进行更新（注意“w+”会截断文件）。在区分二进制文件和文本文件的系统上，将“b”附加到模式以二进制模式打开文件；在没有这种区别的系统上，添加“b”没有效果。

[在](http://www.tutorialspoint.com/python/python_files_io.htm)这里

> w+ ：打开一个文件进行读写。如果文件存在，则覆盖现有文件。如果文件不存在，则创建一个新文件进行读写。

但是，如何读取打开的文件`w+`？

* * *

## 回答 #1

> 赞同：516
> 
> 时间：2014-05-09T14:19:17.630

## ***以下是打开文件的不同模式的列表：***

*   # r

    > 打开一个只读文件。文件指针位于文件的开头。这是默认模式。

*   # rb

    > 以二进制格式打开一个只读文件。文件指针位于文件的开头。这是默认模式。

*   # r+

    > 打开一个文件进行读写。文件指针将位于文件的开头。

*   # rb+

    > 以二进制格式打开一个文件进行读写。文件指针将位于文件的开头。

*   # w

    > 打开一个仅用于写入的文件。如果文件存在，则覆盖文件。如果文件不存在，则创建一个新文件进行写入。

*   # wb

    > 打开一个仅以二进制格式写入的文件。如果文件存在，则覆盖文件。如果文件不存在，则创建一个新文件进行写入。

*   # w+

    > 打开一个文件进行写入和读取。如果文件存在，则覆盖现有文件。如果文件不存在，则创建一个新文件进行读写。

*   # wb+

    > 打开一个文件以二进制格式写入和读取。如果文件存在，则覆盖现有文件。如果文件不存在，则创建一个新文件进行读写。

*   # 一个

    > 打开要追加的文件。如果文件存在，则文件指针位于文件末尾。也就是说，文件处于附加模式。如果文件不存在，它会创建一个新文件进行写入。

*   # 抗体

    > 打开一个文件以二进制格式追加。如果文件存在，则文件指针位于文件末尾。也就是说，文件处于附加模式。如果文件不存在，它会创建一个新文件进行写入。

*   # 一个+

    > 打开一个文件以进行追加和读取。如果文件存在，则文件指针位于文件末尾。该文件以附加模式打开。如果该文件不存在，则创建一个新文件进行读写。

*   # ab+

    > 以二进制格式打开一个文件以进行追加和读取。如果文件存在，则文件指针位于文件末尾。该文件以附加模式打开。如果该文件不存在，则创建一个新文件进行读写。

* * *

## 回答 #2

> 赞同：165
> 
> 时间：2013-04-25T10:30:37.103

Python中的所有文件模式

*   `r`用于阅读
*   `r+`打开读写（不能截断文件）
*   `w`写作
*   `w+`用于写入和读取（可以截断文件）
*   `rb`用于读取二进制文件。文件指针位于文件的开头。
*   `rb+`读取或写入二进制文件
*   `wb+`写一个二进制文件
*   `a+`打开以追加
*   `ab+`打开一个文件以附加和读取二进制文件。如果文件存在，则文件指针位于文件末尾。该文件以附加模式打开。
*   `x`打开以进行独占创建，如果文件已存在则失败（Python 3）

* * *

## 回答 #3

> 赞同：158
> 
> 时间：2013-04-25T06:57:27.130

假设您正在使用`with`应有的语句打开文件。然后你会做这样的事情来从你的文件中读取：

```
with open('somefile.txt', 'w+') as f:
    # Note that f has now been truncated to 0 bytes, so you'll only
    # be able to read data that you write after this point
    f.write('somedata\n')
    f.seek(0)  # Important: return to the top of the file before reading, otherwise you'll just read an empty string
    data = f.read() # Returns 'somedata\n' 
```

请注意`f.seek(0)`-- 如果您忘记了这一点，该`f.read()`调用将尝试从文件末尾读取，并将返回一个空字符串。

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2019-07-18T01:01:01.080

`r`供阅读

`w`写

`r+`如果文件存在，则用于读/写而不删除原始内容，否则引发异常

`w+`删除原始内容，如果文件存在则读/写，否则创建文件

例如，

```
>>> with open("file1.txt", "w") as f:
...   f.write("ab\n")
... 
>>> with open("file1.txt", "w+") as f:
...   f.write("c")
... 

$ cat file1.txt 
c$ 
```

```
>>> with open("file2.txt", "r+") as f:
...   f.write("ab\n")
... 
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
IOError: [Errno 2] No such file or directory: 'file2.txt' 
```

```
>>> with open("file2.txt", "w") as f:
...   f.write("ab\n")
... 
>>> with open("file2.txt", "r+") as f:
...   f.write("c")
... 

$ cat file2.txt 
cb
$ 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2020-11-18T08:50:03.590

两者似乎工作相同，但有一个问题。

**r+ :-**

*   打开文件进行读写
*   一旦在开始文件中打开，指针将指向 0
*   现在，如果您想阅读，那么它将从头开始阅读
*   如果你想写然后开始写，但是写过程将从指针0开始。所以会有字符覆盖，如果有的话
*   在这种情况下 File 应该存在，要么**FileNotFoundError**将被提出。

**w+ :-**

*   打开文件进行读写
*   如果文件存在，将打开文件并删除所有数据，
*   如果文件不存在，则将创建新文件
*   在开始的文件指针将指向 0（因为没有数据）
*   现在如果你想写点什么，那就写
*   文件指针现在指向文件结尾（在写入过程之后）
*   如果您现在想读取数据，请寻找特定点。（用于开始寻找（0））

因此，总的来说，两者都是为了打开文件进行读写，但区别在于我们是要在开始时擦除数据然后进行读/写，还是按原样开始。

`abc.txt`- 一开始

```
1234567
abcdefg
0987654
1234 
```

`Code for r+`

```
with open('abc.txt', 'r+') as f:      # abc.txt should exist before opening
    print(f.tell())                   # Should give ==> 0
    f.write('abcd')                   
    print(f.read())                   # Pointer is pointing to index 3 => 4th position
    f.write('Sunny')                  # After read pointer is at End of file 
```

`Output`

```
0
567
abcdefg
0987654
1234 
```

`abc.txt`- 运行后：

```
abcd567
abcdefg
0987654
1234Sunny 
```

将 abc.txt 重置为初始值

`Code for w+`

```
with open('abc.txt', 'w+') as f:     
    print(f.tell())                   # Should give ==> 0
    f.write('abcd')                   
    print(f.read())                   # Pointer is pointing to index 3 => 4th position
    f.write('Sunny')                  # After read pointer is at End of file 
```

`Output`

```
0 
```

`abc.txt`- 运行后：

```
abcdSunny 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-04-25T06:57:23.453

该文件被截断，因此您*可以*调用`read()`（不引发异常，与使用 'w' 打开时不同），但您会得到一个空字符串。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-04-25T07:02:48.480

我怀疑有两种方法可以处理我认为您想要实现的目标。

1）这很明显，是以只读方式打开文件，将其读入内存，然后用 t 打开文件，然后写入您的更改。

2）使用低级文件处理例程：

```
# Open file in RW , create if it doesn't exist. *Don't* pass O_TRUNC
 fd = os.open(filename, os.O_RDWR | os.O_CREAT) 
```

希望这可以帮助..

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2016-07-29T01:42:05.433

实际上，关于`r+`模式的所有其他答案都有问题。

`test.in`文件内容：</p>

```
hello1
ok2
byebye3 
```

和 py 脚本的：

```
with open("test.in", 'r+')as f:
    f.readline()
    f.write("addition") 
```

执行它，它`test.in`的内容将变为：

```
hello1
ok2
byebye3
addition 
```

但是，当我们将脚本修改为：

```
with open("test.in", 'r+')as f:
    f.write("addition") 
```

也做`test.in`回应：

```
additionk2
byebye3 
```

因此，`r+`如果我们不进行读取操作，该模式将允许我们从头开始覆盖内容。如果我们做一些读操作，`f.write()`只会追加到文件中。

顺便说一句，如果我们`f.seek(0,0)`之前`f.write(write_content)`，write_content 将从 positon(0,0) 开始覆盖它们。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2021-03-05T16:39:32.597

**这是列表可能会有所帮助**

**字符** **含义**

'r' - 打开阅读（默认）

'w' - 打开写入，首先截断文件

'x' - 打开以独占创建，如果文件已存在则失败

'a' - 打开写入，如果存在则附加到文件末尾

'b' - 二进制模式

't' - 文本模式（默认）

'+' - 打开更新（读取和写入）

默认模式是“r”（打开阅读文本，“rt”的同义词）。模式“w+”和“w+b”打开并截断文件。模式 'r+' 和 'r+b' 打开文件时不会被截断。

参考：[https ://docs.python.org/3/library/functions.html#open](https://docs.python.org/3/library/functions.html#open)

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2021-07-13T19:58:45.250

我也很困惑......但可能是我的回答会帮助某人。我假设您想利用 'w+' 模式的能力来创建文件（如果文件不存在）。

实际上，如果文件不存在，则只有 w、w+、a、a+ 可以创建。

但是，如果您需要读取文件的数据（带有数据的文件确实存在的情况），您不能使用 w+ 开箱即用，因为它会截断文件。糟糕，你不是那个意思！

因此，您最好的朋友可能是带有 file.seek(0) 的 a+：

```
with open('somefile.txt', 'a+') as f:
    f.seek(0)
    for line in f:
        print(f.readline()) 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-06-18T14:48:23.910

正如[h4z3 所说](https://stackoverflow.com/users/11516012/h4z3)，对于实际使用，有时您的数据太大而无法直接加载所有内容，或者您​​有生成器，或者实时传入数据，您可以使用 w+ 存储在文件中并稍后读取。

# iphone - iphone：如何实现不卷曲的翻页效果？

> ID：16208209
> 
> 赞同：9
> 
> 时间：2013-04-25T06:51:42.370
> 
> 标签：iphone, ios, core-animation, core-graphics, page-flipping

我需要在 iOS 应用中实现翻页效果。但是效果不应该像 UIPageViewController 和我检查过的其他一些第三方库那样卷曲页面。该页面应该是刚性的，因为它是贺卡而不是书的页面。我必须实现如下图所示的东西。

![在此处输入图像描述](https://i.stack.imgur.com/Ztwq5.jpg)

如果有人能提供任何建议或示例代码，我将不胜感激。

先感谢您 ！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T15:55:52.450

您需要了解 Core Foundation 如何进行 3D 转换。

这篇文章的答案包含您应该需要的所有链接。

[CATransform3DMakeRotation 是如何使用的？](https://stackoverflow.com/questions/4576534/how-is-catransform3dmakerotation-used)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-02T18:42:59.473

你可以这样做：

```
[UIView beginAnimations:@"View Flip" context:nil]; 
[UIView setAnimationDuration:0.3];
[UIView setAnimationCurve:UIViewAnimationTransitionFlipFromLeft];
[UIView setAnimationTransition:
UIViewAnimationTransitionCurlUp forView:self.view cache:NO];
[UIView commitAnimations]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-03T10:25:01.840

这将对您有所帮助。

```
-(void) animateMe:(UIViewAnimationTransition)style
{
   [self playCardSound];
   [UIView beginAnimations:@"flipview" context:nil];
   [UIView setAnimationDuration:0.5];
   [UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];
   [UIView setAnimationTransition: style forView:self.view cache:YES];
   [UIView commitAnimations];
} 
```

像这样称呼它：

```
[self animateMe:UIViewAnimationTransitionFlipFromLeft];
[self animateMe:UIViewAnimationTransitionFlipFromRight]; 
```

# matlab - 如何在MATLAB中使用SPMD命令实现并行计算？

> ID：16208211
> 
> 赞同：1
> 
> 时间：2013-04-25T06:51:43.033
> 
> 标签：matlab, time, parallel-processing, core, processor

**请任何人建议我在 MATLAB 中**使用 SPMD 命令进行简单的编程代码，通过它我可以很容易地看到使用 SPMD 命令的顺序代码和并行代码之间的时序差异。我已经尝试了很多使用 SPMD 命令的代码，但总是发现在 MATLAB 中使用 SPMD 命令的并行代码比顺序代码花费更多的时间。我有核心 i3 处理器、2 GB RAM、320 GB 硬盘和 MATLAB R2011a。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T11:01:01.130

如果你只有一台机器来运行你的 SPMD 块，你必须加倍努力才能看到​​加速。这是因为 MATLAB 中的许多操作本质上都是多线程的。这种多线程总是比将数据发送到其他 MATLAB 进程（worker）进行计算更有效。如果 MATLAB 本身无法对操作进行多线程处理，您可能会在单台机器上看到使用 SPMD 的加速。

# sql - 带有 if then else 构造的 Sql 触发器

> ID：16208212
> 
> 赞同：2
> 
> 时间：2013-04-25T06:51:50.330
> 
> 标签：sql, postgresql

Thera 在 PostgreSQL 8.4 中触发：

```
 CREATE OR REPLACE FUNCTION updateMarkers()
  RETURNS trigger AS
  $$
  BEGIN
IF NEW.status='Новый' THEN
    UPDATE markers SET statusId=0;
    RETURN NEW;
ELSE IF NEW.status='В работе' THEN
    UPDATE markers SET statusId=2;
    RETURN NEW;
ELSE IF NEW.status='Завершен' THEN
    UPDATE markers SET statusId=3;
    RETURN NEW;
ESLE
    UPDATE markers SET statusId=4;
    RETURN NEW;
END IF;
END;
$$
LANGUAGE plpgsql; 
```

我得到了语法错误`ESLE`。
有什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T06:52:51.617

你写的是 ESLE 而不是`ELSE`...。你的新查询应该是这样的：

```
CREATE OR REPLACE FUNCTION updateMarkers()
  RETURNS trigger AS
  $$
  BEGIN
IF NEW.status='Новый' THEN
    UPDATE markers SET statusId=0;
    RETURN NEW;
ELSEIF NEW.status='В работе' THEN
    UPDATE markers SET statusId=2;
    RETURN NEW;
ELSEIF NEW.status='Завершен' THEN
    UPDATE markers SET statusId=3;
    RETURN NEW;
ELSE
    UPDATE markers SET statusId=4;
    RETURN NEW;
END IF;
END;
$$
LANGUAGE plpgsql; 
```

@edit：ELSE IF 需要在一起：ELSEIF

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-25T12:41:42.643

`UPDATE`或者，在您的情况下，使用[“简单”**`CASE`**](http://www.postgresql.org/docs/current/interactive/functions-conditional.html#FUNCTIONS-CASE)的一个命令更简单、更快：

```
CREATE OR REPLACE FUNCTION updatemarkers()
  RETURNS trigger AS
$$
BEGIN

UPDATE markers
SET    statusid = 
   CASE NEW.status
    WHEN 'Новый'    THEN 0
    WHEN 'В работе' THEN 2;
    WHEN 'Завершен' THEN 3;
    ELSE 4
   END;

RETURN NEW;

END
$$ LANGUAGE plpgsql; 
```

这种简单的形式很好，因为无论如何您都在更新。也适用于 Postgres 8.4。

# c# - 从字符串构造嵌套属性的 LambdaExpression

> ID：16208214
> 
> 赞同：49
> 
> 时间：2013-04-25T06:51:59.117
> 
> 标签：c#, .net, linq, lambda, expression-trees

我试图在运行时根据属性的名称为嵌套属性创建一个 lambda 表达式。基本上我正在尝试创建由以下指定的 lambda 表达式：

```
var expression = CreateExpression<Foo, object>(foo => foo.myBar.name);

private static Expression CreateExpression<TEntity, TReturn>(Expression<Func<TEntity, TReturn>> expression)
{
    return (expression as Expression);
} 
```

随着课程：

```
class Foo
{
    public Bar myBar { get; set; }
}
class Bar
{
    public string name { get; set; }
} 
```

但是我得到的只是类型`Foo`和字符串`"myBar.name"`

如果它是一个普通属性，例如只需要该值，`"myBar"`那么我可以使用以下内容：

```
private static LambdaExpression GetPropertyAccessLambda(Type type, string propertyName)
{
    ParameterExpression odataItParameter = Expression.Parameter(type, "$it");
    MemberExpression propertyAccess = Expression.Property(odataItParameter, propertyName);
    return Expression.Lambda(propertyAccess, odataItParameter);
} 
```

但是，此代码不适用于嵌套属性，我不确定如何创建 LambdaExpression 来完成`foo.myBar.name`.

我认为这将是这样的：

```
GetExpression(Expression.Call(GetExpression(Foo, "myBar"), "name")) 
```

但我似乎无法弄清楚如何让它全部工作，或者是否有更好的方法在运行时做到这一点。

* * *

## 回答 #1

> 赞同：128
> 
> 时间：2013-04-25T07:17:15.390

你的意思是：

```
static LambdaExpression CreateExpression(Type type, string propertyName) {
    var param = Expression.Parameter(type, "x");
    Expression body = param;
    foreach (var member in propertyName.Split('.')) {
        body = Expression.PropertyOrField(body, member);
    }
    return Expression.Lambda(body, param);
} 
```

例如：

```
class Foo {
    public Bar myBar { get; set; }
}
class Bar {
    public string name { get; set; }
}
static void Main() {
    var expression = CreateExpression(typeof(Foo), "myBar.name");
    // x => x.myBar.name
} 
```

?

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2020-10-09T07:23:37.437

要构造 lambda 表达式但使用内联解决方案，您可以执行以下操作：

```
var param = Expression.Parameter(typeOf(FooBar), "x");

// you "concat" your expression here :
var propertyExpression = Expression.PropertyOrField(param, "myBar");
propertyExpression = Expression.PropertyOrField(propertyExpression, "name");
// expected result : "x.myBar.name" as a body expression

var expression = Expression.Lambda(propertyExpression, param);
// x => x.myBar.name 
```

# php - 将数据存储到结构良好的文件系统中是否比查询大型数据库表更快？

> ID：16208218
> 
> 赞同：0
> 
> 时间：2013-04-25T06:52:05.623
> 
> 标签：php, mysql, performance, file

我有一个包含 133,000,000 行的数据库表。我的数据库数据在一年内都不会改变，所以我不需要任何插入到这个数据库中，也不需要任何东西我只需要从中获取数据。例如，获取具有澳大利亚国家/地区的 60 行。考虑到数据量，这很慢。我的问题是，将我的数据存储到索引良好的文件中是否更好。例如，制作所有字母和数字的文件夹。

所以会有 35 个文件夹 A,B,C,D,E,....,7,8,9 然后在每个文件夹中都有一个用于国家、城市等的文件夹......所以澳大利亚进入 A ->国家 -> 澳大利亚，然后在澳大利亚文件夹中，我将数据库中的所有澳大利亚数据分成文件。

这会比仅查询 133,000,000 行的表更快吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T06:55:16.977

这实际上取决于您要如何查询数据。如果您想要做的唯一查询是按国家/地区，那么按国家/地区过滤它会起作用 - 如果您想按城市或州查询怎么办？人口超过 500 万的城市的数据？那时，结构良好、索引良好的数据库每次都会获胜。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T08:42:47.697

您可以根据国家/地区名称将主表划分为子表。例如`table_canada`对于来自国家/地区的所有行`canada`和来自国家/地区`table_usa`的所有行`usa`等等。然后如果你想从他们那里获取数据，你的代码应该是这样的：

```
$country = "canada"; //or from a form like $country = $_POST['country'];
$table = "table_" . $country;
$query = "SELECT * from $table ...";
... 
```

# android - mms-sms/conversations 在 Htc 资源管理器中返回无效计数

> ID：16208239
> 
> 赞同：2
> 
> 时间：2013-04-25T06:53:46.717
> 
> 标签：android, mms

该代码在三星ace、索尼爱立信x10等其他设备上运行得非常好，但在HTC资源管理器中，对话计数返回错误计数。感谢您的关注，我的代码如下所述：-

```
final String[] projection = new String[] { "*" };
Uri uri = Uri.parse("content://mms-sms/conversations/"); // ?simple=true
            Cursor cursorCoversation = mContext.getContentResolver().query(uri,
                    projection, null, null, null);
cursorCoversation.getCount() 
```

# php - 执行 2 无形式的功能

> ID：16208241
> 
> 赞同：0
> 
> 时间：2013-04-25T06:53:57.687
> 
> 标签：php, javascript, jquery, html

我对网络开发很陌生。我想问你们一些事情，所以基本上我有：

```
<form action="save_file.php" method="post">
Username: <input type="text" name="username" size="5" maxlength="15">
Id: <input type="text" name="user_id" size="5" maxlength="15">
<input type="submit" >
</form> 
```

在html的某个地方我也有

```
<button id="btn1">put to txt</button> 
```

所以基本上在我的javascirpt中我有这样的东西

```
<script>
$(document).ready(function(){ 

    $( "#btn1").click(function( ){

        var file_text;

        file_text += $( "#y1f_0" ).text( ) + $( "#separator" ).text( );
        $.post( "save_file.php", {file_data : file_text} , function( data ){
            alert("Data: " + data + "\nStatus: " + status );
        });
})});
</script> 
```

所以我的问题是如何将上面的表格与 btn1 联系起来？因此，当我单击 btn1 时，我还可以从表单中获取值并将其同时提交到 save_file.php，而不是使用单击按钮并提交表单的 2 个函数。非常感谢您的任何帮助！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T07:00:38.670

```
$("#form2 input[name=name]").val(); 
```

那是你要找的吗？您可以在表单中按名称获取元素（实际上您可以通过 ID 或类等获取元素）。但当然你应该给表格提供身份证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T07:01:25.397

```
<form action="save_file.php" method="post">
    Username: <input type="text" id="username" size="5" maxlength="15">
    Id: <input type="text" id="user_id" size="5" maxlength="15">
    <input type="submit" >
</form> 
```

我用 ID 代替了名字。

```
$( "#btn1").click(function( ){
    var Username = document.getElementsById('username').value;
    var Id = document.getElementsById('user_id').value;
    // include the code for saving it to text file. The values of form are stored in the above variables //
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T07:13:57.897

Try adding an id to the form (like "form1") then:

```
$('#btn1').click(function(){
    $('#form1').submit();
}); 
```

This will make btn1 send the actual form like if you juste pressed the submit button. No extras needed.

# javascript - 跨域获取 ajax 请求抛出解析错误

> ID：16208242
> 
> 赞同：0
> 
> 时间：2013-04-25T06:53:58.200
> 
> 标签：javascript, jquery, cross-domain

```
$.ajax({
                type: "GET",
                url: "http://api.zip-tax.com/request/v20",                    
                data: {
                    key: '1234567890',
                    postalcode: '90265',
                    format: 'json'
                },
                success: function (json) {
                    debugger;
                    // do stuff with json (in this case an array)
                    alert("Success");
                },
                error: function (a, b, c) {
                    debugger;
                    alert("Error");
                }
            }); 
```

当我运行上面的代码时，它把我扔进错误块并说

```
SyntaxError: invalid label
[Break On This Error]   

{"version":"v20","rCode":100,"results":[{"geoPostalCode":"902 
```

虽然它也显示`readyState=4, status=200, statusText="success"`，`parsererror` 如果我点击那个 url，我可以看到正确的 json

```
URL: `http://api.zip-tax.com/request/v20?key=1234567890&postalcode=90265&format=json`
Result: `{"version":"v20","rCode":100,"results":[{"geoPostalCode":"90265","geoCity":"MALIBU","geoCounty":"LOS ANGELES","geoState":"CA","taxSales":0.090000003576279,"taxUse":0.090000003576279,"txbService":"N","txbFreight":"N","stateSalesTax":0.064999997615814,"stateUseTax":0.064999997615814,"citySalesTax":0,"cityUseTax":0,"cityTaxCode":"","countySalesTax":0.0099999997764826,"countyUseTax":0.0099999997764826,"countyTaxCode":"19","districtSalesTax":0.014999999664724,"districtUseTax":0.014999999664724},{"geoPostalCode":"90265","geoCity":"PT DUME","geoCounty":"LOS ANGELES","geoState":"CA","taxSales":0.090000003576279,"taxUse":0.090000003576279,"txbService":"N","txbFreight":"N","stateSalesTax":0.064999997615814,"stateUseTax":0.064999997615814,"citySalesTax":0,"cityUseTax":0,"cityTaxCode":"","countySalesTax":0.0099999997764826,"countyUseTax":0.0099999997764826,"countyTaxCode":"19","districtSalesTax":0.014999999664724,"districtUseTax":0.014999999664724},{"geoPostalCode":"90265","geoCity":"TWAIN HARTE","geoCounty":"VENTURA","geoState":"CA","taxSales":0.075000002980232,"taxUse":0.075000002980232,"txbService":"N","txbFreight":"N","stateSalesTax":0.064999997615814,"stateUseTax":0.064999997615814,"citySalesTax":0,"cityUseTax":0,"cityTaxCode":"","countySalesTax":0.0099999997764826,"countyUseTax":0.0099999997764826,"countyTaxCode":"56","districtSalesTax":0,"districtUseTax":0}]}` 
```

请指教。我不想编写服务器端脚本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T06:59:01.450

这不是 JSONP 的工作方式。

使用正确的 JSONP，将一个`<script>`元素放置在页面上，并`src`设置为您请求的 URL。这是由 jQuery 内部处理的。

JSONP 的响应**不是**JSON。它是 JavaScript，调用一个函数，并将 JSON 作为参数传递。这就是允许跨域数据传输的方式，因为您只是请求 Javascript 代码。

发出请求时，您必须提供要与 JSON 响应一起调用的函数的名称，通常如下：

```
http://www.website.com/request/jsonp?param=value&param2=value2&callback=callbackFunc 
```

因此，响应将采用以下格式：

```
callbackFunc({JSON stuff}); 
```

jQuery 在内部处理此回调内容，以便`success`最终调用该方法。

看起来 API 不支持 JSONP（[http://www.zip-tax.com/documentation](http://www.zip-tax.com/documentation)），因此您必须对自己的服务器进行 AJAX 调用，让该服务器发出您需要的请求（它返回 JSON），并在 AJAX 响应中返回 JSON。

# c# - 多个BackgroundWorkers c#

> ID：16208243
> 
> 赞同：0
> 
> 时间：2013-04-25T06:53:58.337
> 
> 标签：c#, multithreading, asynchronous, backgroundworker

我有一个使用两个 BackgroundWorkers 的服务器应用程序：

1) 用于不断检查 SVN 存储库是否更新。

2) 用于管理进程队列。

```
BackgroundWorker revisionsWorker = new BackgroundWorker();
revisionsWorker.DoWork += (queueSender1, queueEvent1) => checkRevision();
revisionsWorker.RunWorkerAsync();

BackgroundWorker queueWorker = new BackgroundWorker();
queueWorker.DoWork += (queueSender2, queueEvent2) => manageComputersQueue();
queueWorker.RunWorkerAsync(); 
```

当 SVN 更新时，该函数会`checkRevision()`更新本地存储库，运行一些脚本，并使用`devenv.com`. `queueWorker`检查服务器是否正忙于运行`checkRevision()`. 如果它不忙，它会根据它们在队列中的位置运行进程。

我的问题是，如果 SVN 已更新，并且`checkRevision()`正在运行（需要一些时间..），`manageComputersQueue()`则在任何时候都不会访问，直到`checkRevision()`完成。

意思是，我希望`manageComputersQueue()`始终运行，如果服务器正忙于执行其他任务，它将通知客户端服务器当前正忙。

是否有可能当 1 个后台工作人员正在做一些事情时，其他后台工作人员正在等待它完成，即使他们都异步运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T06:57:26.553

您可以使用`BackgroundWorker`+执行此操作`*ResetEvent`，但会有点笨拙。

考虑使用[`Task.ContinueWith`](http://msdn.microsoft.com/en-gb/library/dd321405.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T22:42:43.480

您似乎没有订阅`RunWorkerCompleted`事件 - 这意味着您没有任何要向 UI 线程报告的内容。在这种情况下，只需使用`Task.Factory.StartNew`

```
Task.Factory.StartNew( () => checkRevision() )
Task.Factory.StartNew( () => manageComputersQueue() ) 
```

它们不应该相互冲突，除非你在这些方法中有一些明确的逻辑相互阻塞。

# c# - 自定义日历中的事件

> ID：16208245
> 
> 赞同：0
> 
> 时间：2013-04-25T06:54:16.237
> 
> 标签：c#, asp.net, calendar, custom-controls

我创建了一个`Calender`命名`CALENDAR1`并在每个单元格中动态创建了一个`LinkButton`命名为`Login`（在`DayRender`事件中创建）。当我单击 时，我需要执行`Click`事件`Login`。有什么选择吗？

```
 protected void Calendar1_DayRender(object sender, DayRenderEventArgs e)
{

    LinkBut.Text = "<br>Login";

    DateTime time = e.Day.Date;
    string form="dd";
    string day = time.ToString(form);
    int i = Convert.ToInt32(day);

    if(e.Day.Date<=System.DateTime.Today)
    {
        Timein.Text= Convert.ToString(i)+"<br>";
        e.Cell.Controls.AddAt(0,Timein);
    }

    if (e.Day.IsToday)
    {

        e.Cell.Controls.AddAt(2, LinkBut);
    }
} 
```

![在此处输入图像描述](https://i.stack.imgur.com/bFxLZ.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T07:01:20.690

您应该展示您尝试过的内容以及如何创建`HyperLinks`. 但是，如果你想要一个回发和一个`Click`-event，你应该使用 a`LinkButton`来代替。然后只需添加事件处理程序，您可以将`sender`参数转换为`LinkButton`：

```
protected void Calendar1_DayRender(object sender, DayRenderEventArgs e)
{
    LinkButton btn = new LinkButton();
    btn.Click += LinkClicked;
    e.Cell.Controls.Add(btn);
}

private void LinkClicked(Object sender, EventArgs e)
{
     LinkButton btn = (LinkButton) sender;
} 
```

# c# - WPF：如何冻结数据网格中的列标题

> ID：16208248
> 
> 赞同：14
> 
> 时间：2013-04-25T06:54:35.933
> 
> 标签：c#, wpf, xaml, scrollview

如何`DataGrid`在我的`WPF`窗口中冻结我的列标题，以便当我向下滚动时，标题仍然可见。

[**编辑**]

这是我的`XAML`：

```
<ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Visible">
    <DataGrid Name="ModelsGrid" Background="Transparent" Foreground="Black"  RowHeight="30" ColumnWidth="100"  AutoGenerateColumns="False" ItemsSource="{Binding}">
        <DataGrid.Columns>
            <DataGridTextColumn Header="Property ID" Binding="{Binding Path=Id}" />
            <DataGridTextColumn Header="Name" Width="Auto" Binding="{Binding Path=PropertyName}" />
            <DataGridTextColumn Header="Description" Width="Auto" Binding="{Binding Path=Description}" />
            <DataGridTextColumn Header="Access" Width="Auto" Binding="{Binding Path=Accessibility}" />
            <DataGridTextColumn Header="Type" Width="Auto" Binding="{Binding Path=Type}" />
            <DataGridTextColumn Header="Category" Width="Auto" Binding="{Binding Path=Category}" />
        </DataGrid.Columns>
    </DataGrid>
</ScrollViewer> 
```

[**编辑**]

我只需要摆脱`ScrollViewer`它，它就解决了。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-30T06:43:18.510

我只需要摆脱 ScrollViewer 就解决了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T07:24:47.617

Datagrid 有[FreeColumnCount 属性](http://msdn.microsoft.com/de-de/library/system.windows.controls.datagrid.frozencolumncount.aspx)- 将其设置为 1 看看会发生什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-25T16:22:55.913

您可以使用嵌套滚动查看器来执行此操作。这是a of的`Template`属性设置器：`Style``TargetType="DataGrid"`

```
<Setter Property="Template">
  <Setter.Value>
    <ControlTemplate TargetType="DataGrid">

      <DockPanel Dock="Top" HorizontalAlignment="Stretch">

        <ScrollViewer DockPanel.Dock="Top" 
                      CanContentScroll="False" 
                      HorizontalScrollBarVisibility="Disabled" 
                      VerticalScrollBarVisibility="Disabled" 
                      Focusable="false" 
                      Padding="{TemplateBinding Padding}">

          <DockPanel Dock="Top" VerticalAlignment="Stretch">
            <DataGridColumnHeadersPresenter DockPanel.Dock="Top" Grid.Row="0"/>
            <ScrollViewer HorizontalScrollBarVisibility="Hidden" 
                          DockPanel.Dock="Top" 
                          VerticalScrollBarVisibility="Auto" 
                          VerticalAlignment="Stretch" 
                          CanContentScroll="False" 
                          Focusable="false" 
                          Padding="{TemplateBinding Padding}">
              <ItemsPresenter VerticalAlignment="Stretch"/>
            </ScrollViewer>
          </DockPanel>
        </ScrollViewer>
      </DockPanel>

    </ControlTemplate>
  </Setter.Value>
</Setter> 
```

当然，`ScrollViewer`也可以设置样式以反映您的 UI 设计。

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2013-04-30T04:16:58.950

冻结 DataGrid 列非常困难，最好使用 DataGridView

[http://msdn.microsoft.com/en-us/library/28e9w2e1.aspx](http://msdn.microsoft.com/en-us/library/28e9w2e1.aspx)

[http://msmvps.com/blogs/peterritchie/archive/2008/08/11/datagridviewcolumn-frozen.aspx](http://msmvps.com/blogs/peterritchie/archive/2008/08/11/datagridviewcolumn-frozen.aspx)

# haskell - 在 randomIO 上使用 unsafeperformIO 的风险

> ID：16208249
> 
> 赞同：6
> 
> 时间：2013-04-25T06:54:44.637
> 
> 标签：haskell, random, unsafe-perform-io

我正在创建一个在无限循环上生成随机数的 Haskell 应用程序（仅在客户端请求时）。但是，我应该只为此目的使用纯函数。`randomIO`在`unsafeperformIO`没有任何严重稳定性或性能风险的情况下进行包装是否安全？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-25T08:50:04.493

任何使用 都`unsafePerformIO`应该证明结果值仍然是纯的。证明的严谨性取决于您和工作的重要性。例如，这种可悲的使用`unsafePerformIO`and`randomIO`应该是安全的，因为你可以*证明*当`slowTrue`返回任何东西时，它会返回`True`。

```
import System.Random
import System.IO.Unsafe
import Data.Int

slowTrue = unsafePerformIO $ go
  where
    go = do
        x1 <- randomIO
        x2 <- randomIO
        if ((x1 :: Int16) == x2) then return True else go 
```

以下对全局变量（可能是随机变量）的诱人定义并不安全：

```
rand :: Bool -> Int
rand True = unsafePerformIO randomIO 
rand False = 0 
```

问题是同一个表达式现在会产生不同的值：

```
main = do
    print (rand True)
    print (rand True) 
```

在这里打印：

```
-7203223557365007318
-7726744474749938542 
```

（至少在没有优化的情况下编译时——但这只是强调了不恰当使用的脆弱性`unsafePerformIO`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-13T23:27:35.893

> 我正在创建一个在无限循环上生成随机数的 Haskell 应用程序（仅在客户端请求时）。但是，我应该只为此目的使用纯函数。用 unsafeperformIO 包装 randomIO 是否安全，没有任何严重的稳定性或性能风险？

除了性能（无风险）或稳定性（小风险）之外，还要考虑您无缘无故编写非规范 Haskell 的事实。如果您采用这种方法，其他人将难以维护您的代码。

# mysql - 结果显示空的“AND”查询和左连接

> ID：16208252
> 
> 赞同：0
> 
> 时间：2013-04-25T06:55:00.893
> 
> 标签：mysql

```
SELECT 
    j.* , 
    month(j.create_date) as month 
FROM tbl_jobs AS j 
LEFT JOIN tbl_well_data AS wd 
    on j.id = wd.job_id 
LEFT JOIN tbl_well_depth AS wdp 
    on j.id = wdp.job_id 
LEFT JOIN tbl_well_formation AS wf 
    on j.id = wf.job_id 
LEFT JOIN tbl_well_tubing_size AS wts 
    on j.id = wts.job_id 
LEFT JOIN tbl_pumping AS p 
    on j.id = p.job_id 
LEFT JOIN tbl_pumping_puid AS pf 
    on j.id = pf.job_id 
WHERE j.create_date >= '2013-04-01' 
AND j.create_date <= '2013-04-25' 
AND ( pf.puid_id = 109 AND pf.volume BETWEEN 1 AND 2000 AND pf.corrosive = 1 AND pf.bh = 0 AND pf.ct = 1 ) 
AND ( pf.puid_id = 112 AND pf.volume BETWEEN 1 AND 2000 AND pf.corrosive = 1 AND pf.bh = 0 AND pf.ct = 1 ) 
AND FIND_IN_SET('1',j.services) 
```

`AND`当我使用此结果时，使用多个结果时的查询问题显示为空，但我希望`pf.puid_id = 112 AND pf.puid_id = 109`相应地出现，并且这些 puid_id 存在于我的数据库表中，那么为什么会出现此问题？

当我使用 OR 时，结果仅基于 on`pf.puid_id = 112`或 `pf.puid_id = 109`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T06:58:02.550

```
 WHERE j.create_date >= '2013-04-01' 
    AND j.create_date <= '2013-04-25' 
    AND (( pf.puid_id = 109 OR pf.puid_id = 112)
       AND pf.volume BETWEEN 1 AND 2000 
       AND pf.corrosive = 1 AND pf.bh = 0 AND pf.ct = 1 )
    AND FIND_IN_SET('1',j.services) 
```

是的。请使用或。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T16:02:42.713

这是问题所在：

```
AND ( pf.puid_id = 109 AND pf.volume BETWEEN 1 AND 2000 AND 
                             pf.corrosive = 1 AND pf.bh = 0 AND pf.ct = 1 ) 
AND ( pf.puid_id = 112 AND pf.volume BETWEEN 1 AND 2000 AND 
                             pf.corrosive = 1 AND pf.bh = 0 AND pf.ct = 1 ) 
```

你是说你想**同时**`pf.puid_id`等于109 和 112。我相信您的意思是它应该是**两者**之一，而不是同时具有**两个**值。

 ******将这两行替换为：

```
AND ( pf.puid_id IN (109,112) AND pf.volume BETWEEN 1 AND 2000 AND 
                             pf.corrosive = 1 AND pf.bh = 0 AND pf.ct = 1 ) 
```

当您尝试测试某个值是否等于所需值之一时，IN 关键字是您的朋友。它使查询更短且更具可读性。

一个例子——这种情况：

```
WHERE id = 5 OR id = 8 OR id = 13 OR id = 21 OR id = 34 
```

是相同的：

```
WHERE id IN (5,8,13,21,34) 
```

另一个建议。代替：

```
j.create_date >= '2013-04-01' 
AND j.create_date <= '2013-04-25' 
```

和：

```
j.create_date BETWEEN '2013-04-01' AND '2013-04-25' 
```

两者相同且同样正确，但第二个更短且更具可读性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T07:09:57.917

当您对两个 puid_id 使用 AND 时，您希望同时满足两个条件的数学逻辑状态。这意味着您的查询将只匹配同时尊重这两个条件的行。

所以你应该问自己：一个东西怎么可能同时等于两个不同的东西？这就是您尝试使用 AND 执行的操作。

使用 OR 将为您提供至少匹配给定条件之一的行（在这种情况下，不可能同时满足两个条件）。

在继续之前，请考虑阅读更多基本概念。它将提高您的软件质量。

希望我有所帮助。

希望我有所帮助。******

# recursion - 试图找到序言中课程的所有先决条件

> ID：16208253
> 
> 赞同：0
> 
> 时间：2013-04-25T06:55:06.980
> 
> 标签：recursion, prolog

几个小时以来一直被困在一个问题上，此时我真的需要帮助。

目标是创建一个谓词**all_prereqs(C, L)**，它返回课程所有直接和间接先决条件的列表。我们获得了一系列链接到他们的先决条件列表的课程。

```
prereqs(cse115, []).
prereqs(cse116, [cse115]).
prereqs(cse191, [cse115]).
prereqs(cse241, [cse116,cse191]).
prereqs(cse250, [cse116,cse191]).
prereqs(cse305, [cse250]).
prereqs(cse321, [cse341]).
prereqs(cse331, [cse250,mth142]).
prereqs(cse341, [cse241]).
prereqs(cse379, [cse241]).
prereqs(cse380, [cse241]).
prereqs(cse396, [cse250]).
prereqs(cse411, [cse241]).
prereqs(cse421, [cse305]).
prereqs(cse422, [cse421]).
prereqs(cse431, [cse331]).
prereqs(cse435, [cse250,mth309]). 
```

我知道应该有一个助手类，我尝试了类似的东西

```
prereq1(C1,C2):- prereqs(C1,L),prereq1(member(C2,L),C3). 
```

它当然会返回“否”。我已经在纸上写下了必须对这些价值观做些什么，但是我对 Prolog 的缺乏经验阻碍了我这样做。

任何帮助，将不胜感激。

**编辑：**

好的，谢谢您提供的信息。在某一时刻，我确实有这个想法，但不知道如何在列表为空时终止递归。

```
prereq1(C1,C2):-prereqs(C1,L),member(T,L),prereq1(T,C3). prereq1(C1,C2):-T\==[]. 
```

这只是返回 true，当 prereq 列表为空时，我无法理解递归调用的终止。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T08:32:30.210

您在*功能*数据模型中编写代码，但 Prolog 有一个*关系*数据模型。那么你的规则应该是

```
prereq1(C1,C2) :- prereqs(C1,L),member(C2,L),prereq1(C2,C3). 
```

但这也不能成功，因为当遇到一个*空*的先决条件列表的课程时，递归调用总是会失败。注意，初始部分是可以的：

```
prereq2(C1,C2) :- prereqs(C1,L), member(C2,L). 
```

给出所有*直接*的先决条件，那么我们应该通过递归为每个直接添加一个闭包。

```
prereq2(C1,C2) :- prereqs(C1,L), member(T,L), ... 
```

请自己完成，你会得到

```
?- prereq2(cse331, L).
L = cse250 ;
L = mth142 ;
L = cse116 ;
L = cse191 ;
L = cse115 ;
L = cse115 ;
false. 
```

注意重复。Prolog 有一种惯用的方法来处理这个问题：

```
?- setof(C, prereq2(cse331, C), L).
L = [cse115, cse116, cse191, cse250, mth142]. 
```

*编辑*您的 Prolog 应该警告您规则中的单例：

```
prereq1(C1,C2):-prereqs(C1,L),member(T,L),prereq1(T,C3). 
```

`C3`必须成为`C2`。有了这个，你应该已经完成​​了你的任务。当成员将获得空列表时，将“隐式”处理终止 - 在我给出的示例中这将发生多次。

# hibernate - org.hibernate.util.JDBCExceptionReporter - 连接已经关闭

> ID：16208259
> 
> 赞同：1
> 
> 时间：2013-04-25T06:55:25.770
> 
> 标签：hibernate, jpa, connection

保存对象时出现以下错误。谁能告诉我这个日志代表 -

```
2013-04-25 01:22:44 [ajp-bio-8009-exec-3908] ERROR org.hibernate.event.def.AbstractFlushingEventListener  - Could not synchronize database state with session
    org.hibernate.exception.GenericJDBCException: could not insert collection: [consumer.phoneNumber#2527830]
        at org.hibernate.exception.SQLStateConverter.handledNonSpecificException(SQLStateConverter.java:140)
        at org.hibernate.exception.SQLStateConverter.convert(SQLStateConverter.java:128)
        at org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:66)
        at org.hibernate.persister.collection.AbstractCollectionPersister.recreate(AbstractCollectionPersister.java:1243)
        at org.hibernate.action.CollectionRecreateAction.execute(CollectionRecreateAction.java:58)
        at org.hibernate.engine.ActionQueue.execute(ActionQueue.java:273)
        at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:265)
        at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:188)
        at org.hibernate.event.def.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:321)
        at org.hibernate.event.def.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:51)
        at org.hibernate.impl.SessionImpl.flush(SessionImpl.java:1216)
        at org.hibernate.impl.SessionImpl.managedFlush(SessionImpl.java:383)
        at org.hibernate.transaction.JDBCTransaction.commit(JDBCTransaction.java:133)
        at org.hibernate.ejb.TransactionImpl.commit(TransactionImpl.java:76)
        ........

    Caused by: java.sql.SQLException: Connection has already been closed.
        at org.apache.tomcat.jdbc.pool.ProxyConnection.invoke(ProxyConnection.java:117)
        at org.apache.tomcat.jdbc.pool.JdbcInterceptor.invoke(JdbcInterceptor.java:95)
        at org.apache.tomcat.jdbc.pool.interceptor.AbstractCreateStatementInterceptor.invoke(AbstractCreateStatementInterceptor.java:67)
        at org.apache.tomcat.jdbc.pool.JdbcInterceptor.invoke(JdbcInterceptor.java:95)
        at org.apache.tomcat.jdbc.pool.interceptor.ConnectionState.invoke(ConnectionState.java:140)
        at org.apache.tomcat.jdbc.pool.JdbcInterceptor.invoke(JdbcInterceptor.java:95)
        at org.apache.tomcat.jdbc.pool.TrapException.invoke(TrapException.java:41)
        at $Proxy59.prepareStatement(Unknown Source)
        at org.hibernate.jdbc.AbstractBatcher.getPreparedStatement(AbstractBatcher.java:534)
        at org.hibernate.jdbc.AbstractBatcher.prepareStatement(AbstractBatcher.java:116)
        at org.hibernate.jdbc.AbstractBatcher.prepareStatement(AbstractBatcher.java:109)
        at org.hibernate.jdbc.AbstractBatcher.prepareBatchStatement(AbstractBatcher.java:244)
        at org.hibernate.persister.collection.AbstractCollectionPersister.recreate(AbstractCollectionPersister.java:1179)
        ... 92 more
    2013-04-25 01:22:44 [ajp-bio-8009-exec-3908] ERROR org.hibernate.transaction.JDBCTransaction  - Could not toggle autocommit
    java.sql.SQLException: Connection has already been closed.
        at org.apache.tomcat.jdbc.pool.ProxyConnection.invoke(ProxyConnection.java:117)
        at org.apache.tomcat.jdbc.pool.JdbcInterceptor.invoke(JdbcInterceptor.java:95)
        at org.apache.tomcat.jdbc.pool.interceptor.AbstractCreateStatementInterceptor.invoke(AbstractCreateStatementInterceptor.java:71)
        at org.apache.tomcat.jdbc.pool.JdbcInterceptor.invoke(JdbcInterceptor.java:95)
        at org.apache.tomcat.jdbc.pool.interceptor.ConnectionState.invoke(ConnectionState.java:140)
        at org.apache.tomcat.jdbc.pool.JdbcInterceptor.invoke(JdbcInterceptor.java:95)
        at org.apache.tomcat.jdbc.pool.TrapException.invoke(TrapException.java:41)
        at $Proxy59.setAutoCommit(Unknown Source)
        at org.hibernate.transaction.JDBCTransaction.toggleAutoCommit(JDBCTransaction.java:224)
        at org.hibernate.transaction.JDBCTransaction.rollbackAndResetAutoCommit(JDBCTransaction.java:216)
        at org.hibernate.transaction.JDBCTransaction.rollback(JDBCTransaction.java:192)
        at org.hibernate.ejb.TransactionImpl.commit(TransactionImpl.java:88)
        at org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:512)
        at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:754)
        at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:723)
        at org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:393)
        at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:120)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
         .......
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
        at java.lang.Thread.run(Thread.java:679)
    2013-04-25 01:22:44 [ajp-bio-8009-exec-3908] ERROR org.hibernate.transaction.JDBCTransaction  - JDBC rollback failed
    java.sql.SQLException: Connection has already been closed.
        at org.apache.tomcat.jdbc.pool.ProxyConnection.invoke(ProxyConnection.java:117)
        at org.apache.tomcat.jdbc.pool.JdbcInterceptor.invoke(JdbcInterceptor.java:95)
        at org.apache.tomcat.jdbc.pool.interceptor.AbstractCreateStatementInterceptor.invoke(AbstractCreateStatementInterceptor.java:71)
        at org.apache.tomcat.jdbc.pool.JdbcInterceptor.invoke(JdbcInterceptor.java:95)
        at org.apache.tomcat.jdbc.pool.interceptor.ConnectionState.invoke(ConnectionState.java:140)
        at org.apache.tomcat.jdbc.pool.JdbcInterceptor.invoke(JdbcInterceptor.java:95)
        at org.apache.tomcat.jdbc.pool.TrapException.invoke(TrapException.java:41)
        at $Proxy59.rollback(Unknown Source)
        ........... 
```

# sql - 插入现有记录时子查询有什么问题

> ID：16208260
> 
> 赞同：1
> 
> 时间：2013-04-25T06:55:31.130
> 
> 标签：sql, sql-server-2008

**例外 ：**

> 当不使用 EXISTS 引入子查询时，选择列表中只能指定一个表达式。

我正在尝试使用已经插入的一行记录插入一行。请帮我解决这个问题。

```
insert into RDT_ATTACHMENTS  values
((select  MAX(id) from RDT_ATTACHMENTS),1363,(select fname,fpath,fsize,description,refentity,uploadby,uploadon,
      originalfname,LATEST   from RDT_ATTACHMENTS where id = 68)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T07:22:01.673

您需要删除 VALUES 关键字

```
INSERT INTO RDT_ATTACHMENTS
SELECT (SELECT MAX(id) FROM RDT_ATTACHMENTS), 
        1363,
        fname,
        fpath,
        fsize,
        description,
        refentity,
        uploadby,
        uploadon,
        originalfname,
        LATEST   
FROM RDT_ATTACHMENTS 
WHERE id = 68 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T06:59:09.247

请尝试以下查询：

```
insert into RDT_ATTACHMENTS
select  
    MAX(id) over(), -- (SELECT MAX(id) FROM RDT_ATTACHMENTS) to get the max(id) of table
    1363, 
    fname,
    fpath,
    fsize,
    description,
    refentity,
    uploadby,
    uploadon,
    originalfname,
    LATEST   
from RDT_ATTACHMENTS
where id = 68 
```

提供的表`RDT_ATTACHMENTS`在选择中以相同的顺序具有相同数量的列。

# assembly - 如何计算 MASM 数组中负数的数量？

> ID：16208262
> 
> 赞同：1
> 
> 时间：2013-04-25T06:55:31.453
> 
> 标签：assembly, masm

我已经在 MASM 中编写了一些程序，例如一个能够根据您给它的数字从字母和空格中生成一个三角形的程序，以及一个能够加减并显示给您的程序，因为它正在处理您的数字给它，所以我希望这能让你知道我知道多少 MASM。我的问题是这个。我得到了一个包含正数或负数的数组。我的工作是遍历数组并找出哪个是哪个并返回数组中的负数。我理解我输入的代码的含义以及所有单个元素的含义和作用，但我想知道你们是否都可以帮助我弄清楚如何区分负数和正数，以便我可以实现它。

```
;; Do not modify this block of code 
;; (until where comment says you can start your code)
;;
    call Clrscr
    call Randomize       ; Initialize random number generator

;;;;; Generate NUM_NUMS random numbers and store them into the nums array

    mov ecx,NUM_NUMS     ; Number of times to loop
    mov esi,0            ; Relative offset for nums array

NUM_LOOP:
    call Random32        ; Generate a random number
    mov [nums+esi], eax  ; Move random number into array

    add esi,TYPE nums    ; move esi to relative offset of next array element
    LOOP NUM_LOOP        ; end of loop

;;
;; End of do not modify block
;;;;;;;;;;;;;;;;;;;;
;; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T08:37:57.400

有很多方法可以做到这一点。例如（顺便说一下，这些都没有经过测试，并且没有显示循环逻辑以保持简短）

```
 1:
  cmp [nums+esi], 0 ; compare with 0
  jnl _skip
  inc edx           ; increment count if < 0
_skip:
 2:
  mov eax, [nums+esi]
  test eax, eax     ; update sign flag with sign bit
  jns _skip
  inc edx           ; increment count if sign was set (ie, < 0)
_skip:
 3:
  mov eax, [nums+esi]
  add eax, eax      ; create unsigned overflow if < 0
  jnc _skip
  inc edx           ; increment count if overflowed (ie, < 0)
_skip:
 4:
  mov eax, [nums+esi]
  shl eax, 1        ; same as 3, but an other way to create overflow
  jnc _skip
  inc edx
_skip:
 5:
  mov eax, [nums+esi]
  add eax, eax
  adc edx, 0        ; add the overflow directly to the count
 6:
  mov eax, [nums+esi]
  shl eax, 1
  adc edx, 0        ; same as 5
_skip:
 7:
  mov eax, [nums+esi]
  sar eax, 31       ; create 0 if non-negative, -1 if negative
  sub edx, eax      ; subtract -1 from count if negative
 8:
  mov eax, [nums+esi]
  shr eax, 31       ; create 0 if non-negative, 1 if negative
  add edx, eax      ; add 1 to count if negative
 9:
  movdqa xmm0, [nums + esi]
  psrad xmm0, 31
  psubd xmm1, xmm0   ; same idea as 7, but with 4 in parallel
 10:
  movdqa xmm0, [nums + esi]
  psrld xmm0, 31
  paddd xmm1, xmm0   ; same idea as 8, but with 4 in parallel
 11:
  cmp [nums+esi], 0
  lea eax, [edx + 1] ; create count+1
  cmovl edx, eax     ; update count with incremented count if < 0
 12:
  xor eax, eax
  cmp [nums+esi], eax
  setl al            ; 0 if non-negative, 1 if negative
  add edx, eax
 13:
  cmp [nums+esi], 0
  setl al
  movzx eax, al    ; same idea as 12, but no recombination penalty
  add edx, eax 
```

和无穷无尽的变化。任你选。

# c# - C# OOP 抽象基类和继承属性

> ID：16208264
> 
> 赞同：0
> 
> 时间：2013-04-25T06:55:41.853
> 
> 标签：c#, oop, base-class

如果这是菜鸟问题，请向我道歉。
我有以下抽象基类：

```
public abstract class MockDataBase
{
  public virtual string ExternalId { get; set; } 
```

我有派生类：

```
public class UnitMockDataBase: MockDataBase
{
 public override string ExternalId { set { ExternalId = value; } } 
```

这会引发堆栈溢出。
如果我希望基类具有属性：

```
public virtual string ExternalId { get; private/protected set; } 
```

和派生类来覆盖它的设置器，我如何实现它？基类不能有外部 id，只有一些派生类使用它并且需要覆盖。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T07:01:54.530

> 这会引发堆栈溢出。

```
public override string ExternalId { set { ExternalId = value; } } 
```

因为您将进入无限循环，试图在 setter 中设置属性。如果您要实现自定义设置器，那么您应该摆脱自动实现的属性，定义一个字段并通过您的属性封装它。

对于另一个问题

> 基类不能有外部 id，只有一些派生类使用它并且需要覆盖。

这就是您[保护](http://msdn.microsoft.com/en-us/library/bcd5672a%28v=vs.110%29.aspx)访问说明符的原因。你可以`protected`像这样拥有它：

```
public abstract class MockDataBase
{
    private string _ExxternalID;

    public virtual string ExxternalID
    {
        get { return _ExxternalID; }
        protected set { _ExxternalID = value; }
    }
}
public class UnitMockDataBase : MockDataBase
{
    public override string ExxternalID
    {
        get
        {
            return base.ExxternalID;
        }
        protected set
        {
            base.ExxternalID = value;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T06:58:26.947

您正在`set`无限循环中调用。要解决此问题，请像这样更改您的代码：

```
public class UnitMockDataBase: MockDataBase
{
    private string _externalId;
    public override string ExternalId 
    {
        get { return _externalId; } } 
        set { _externalId = value; } }
} 
```

因此，当您设置 id （例如`myUnitMockDataBase.ExternalId = "some value"`）时，它会更改`_externalId`并完成。但在这种情况下：

```
public class UnitMockDataBase: MockDataBase
{
    public override string ExternalId { set { _externalId = value; } }
} 
```

当您设置`ExternalId`（例如`myUnitMockDataBase.ExternalId = "some value"`）时，它会调用该`set`块，并且在您的`set`块中您再次调用该`set`块！

**要查看发生了什么，请在 中设置断点`set`并使用调用堆栈并跟踪代码执行步骤**

# javascript - 在不添加到当前 DOM 的情况下进行 DOM 操作（附加脚本标签）

> ID：16208276
> 
> 赞同：0
> 
> 时间：2013-04-25T06:56:24.017
> 
> 标签：javascript, jquery, internet-explorer, dom

我正在尝试将脚本添加到页面 DOM 的 HTML 的 HEAD 中，并将其作为字符串返回，但实际上并未修改当前页面。我只想要字符串输出而不实际影响当前页面。

我有以下代码在 Firefox/Chrome 中完美运行，但在 IE9 中它会导致 ACTUAL DOM 操作：

```
var htmlstr = $("head").html()

var div = document.createElement('div');
div.innerHTML = htmlstr;

var ca = document.createElement("script");
ca.type = "text/javascript";
ca.src = "somefile.js";

div.insertBefore(ca, div.firstChild || null); 
```

我可以在 IE 控制台中看到“ca.src =”行正在触发文件的实际下载并插入到页面 DOM 中，而不仅仅是使用我创建的临时 div 来模拟它。有没有更好的方法来完成这个或一些可以使 IE 符合要求的修复？我知道这可能是一个奇怪的请求，但没有对我们可行的服务器端解决方法。

我应该补充一点，我们不希望 html 字符串中的任何 JS 实际执行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T07:01:54.327

您可以在页面上保留一个可用的 iframe，然后修改 iframe 并从 iframe 中检索内容。

您也可以尝试使用 iframe 来获得相同的结果。

```
i = $("iframe");
s = $("script").attr("src","somefile.js");
z = i.contents().createElement("script");
z.type = "text/javascript";
z.src = "somefile.js";
i.contents().insertBefore(ca,i.contents().firstChild||null); 
```

i.contents() 应该有带有标签的结果。

让我知道这是否有帮助。

# javascript - 如果 li 没有左孩子，则单击它时将其附加到 div 标签上

> ID：16208277
> 
> 赞同：1
> 
> 时间：2013-04-25T06:56:34.313
> 
> 标签：javascript

这是我的 xml 文件：-

```
<root>
  <child_1 entity_id = "1" value="Game" parent_id="0">
    <child_2 entity_id="2" value="Activities" parent_id="1">
      <child_3 entity_id="3" value="Physical1" parent_id="2">
        <child_6 entity_id="6" value="Cricket" parent_id="3">
          <child_7 entity_id="7" value="One Day" parent_id="6"/>
        </child_6>
      </child_3>
      <child_4 entity_id="4" value="Test1" parent_id="1">
        <child_8 entity_id="8" value="Test At Abc" parent_id="4"/>
      </child_4>
      <child_5 entity_id="5" value="Test2" parent_id="1">
        <child_9 entity_id="9" value="Test At Xyz" parent_id="5"/>
      </child_5>
    </child_2>
</child_1>
</root> 
```

这是我的 xslt 从 xml 文件中查找所有活动并将属性值设置为`ul li`
现在我想在它们上设置如果叶子`li`然后单击它并将它附加到我的`<div id="result"></div>`

我试试这个。

```
<head>
    <link rel="stylesheet" href="a.css"></link>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    <title>Untitled Page</title>
    <script>
        var xml = loadXMLDoc("abc.xml");
        var xsl = loadXMLDoc("a.xsl");

        function loadXMLDocOther(location) {
            xhttp = new XMLHttpRequest();
            xhttp.open("GET", location, false);
            xhttp.send("");
            return xhttp.responseXML;
        }

        function loadXMLDoc(dname) {
            if (window.ActiveXObject) {
                return loadXMLDocActiveX(dname);
            }
            else if (window.XMLHttpRequest) {
                return loadXMLDocOther(dname);
            }
        }        
        function transformOther(xml, xsl, target, selected) {
            var xsltProcessor = new XSLTProcessor();
            xsltProcessor.importStylesheet(xsl);

            if (selected) {
                xsltProcessor.setParameter(null, "selected", selected);
            }

            var resultDocument = xsltProcessor.transformToFragment(xml, document);
            target.innerHTML = "";
            target.appendChild(resultDocument);
        }

        function displayResult() {
            var targetElement = document.getElementById("load");

            // code for IE
            if (window.ActiveXObject) {
                transformActiveX(xml, xsl, targetElement);
            }
            // code for Mozilla, Firefox, Opera, etc.
            else if (document.implementation && 
                     document.implementation.createDocument) {
                transformOther(xml, xsl, targetElement);
            }
        }
           $('li:not(:has(*))').click(function(){
           $('#result').text($(this).text());
           });
    </script>
</head>
<body onload="displayResult()">
    <div id="load">
    </div>
    <div id="result">result</div>
</body> 
```

我首先尝试所有代码，但它不起作用。
帮我解决这个问题。
谢谢。

# css - CSS：如何使底部 div 宽度与上面图像的宽度相同？

> ID：16208278
> 
> 赞同：0
> 
> 时间：2013-04-25T06:56:38.950
> 
> 标签：css, dynamic, alignment

[http://www.kuwaitjournals.org/test](http://www.kuwaitjournals.org/test)

我怎样才能`<div>`用顶部的图像来固定主图像的宽度，或者使顶部图像的宽度像主图像一样动态`<div>`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T07:33:36.760

我不确定你想要完成什么，但我想说你只需要使用百分比作为宽度。像这样的HTML：

```
<html>
    <head>
    </head>
    <body>
        <div id="wrapper">
            <img src="foo/bar.jpg" />
            <div id="content">
            </div>
        </div>
    </body>
</html> 
```

这对于 CSS：

```
*, html, body {
    margin: 0px;
    padding: 0px;
}

#wrapper {
    width: 900px;
    margin: 0px auto;
}

img {
    width: 100%; //Sets the image width to 900px
}

#content {
    width: 100%; //Sets the content divs width to 900px
} 
```

这是我认为的问题的答案。如果不是，请告诉我。

# ios - 通过点击 iOS 中的其他位置，超链接的悬停状态不会消失

> ID：16208281
> 
> 赞同：3
> 
> 时间：2013-04-25T06:56:47.770
> 
> 标签：ios, css, hover

请参阅示例页面 ( [http://goo.gl/d8n5W](http://goo.gl/d8n5W) )。

由于 iOS 处理**CSS** `:hover`效果的方式，用户在第一次点击**超链接**时会获得悬停效果。在他们再次点击它之后，`onclick`事件被触发。

但是如果用户在第一次点击后决定不使用超链接（这会使悬停效果出现），他们无法通过点击网页上的其他位置来使悬停效果消失。

同样的问题发生在在新窗口中打开其目的地的超链接上。通过点击它，将打开一个新窗口。然后你回到原来的窗口，你发现超链接的悬停状态是打开的，即使你点击其他地方也不会消失。

当用户点击网页上的其他地方时，有没有办法让悬停效果消失？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-03T18:43:46.497

下面的堆栈溢出链接可能会有所帮助

[如何在启用触摸的浏览器中模拟悬停？](https://stackoverflow.com/questions/2851663/how-do-i-simulate-a-hover-with-a-touch-in-touch-enabled-browsers)

也是有用的资源

[http://designshack.net/articles/css/are-hover-events-extinct/](http://designshack.net/articles/css/are-hover-events-extinct/)

您也可能正在寻找 ios 双击问题

[iOS自动悬停修复？](https://stackoverflow.com/questions/5507964/ios-automatic-hover-fix)

希望这可以帮助

# c - C - 传递分配的指针并在单独的函数中使用 realloc

> ID：16208285
> 
> 赞同：-1
> 
> 时间：2013-04-25T06:56:54.030
> 
> 标签：c, pointers, malloc, argument-passing, realloc

我需要找到一个数字的所有质因数。我已经编写了这段代码，但是当我尝试使用 realloc 在 calculatePrimes 函数中重新分配指针数组时，gcc 会给出错误，即我在使用 realloc 之前没有分配指针。我知道我可以在calculatePrimes 函数中传递双指针并使用malloc，或者使用单指针并返回值。

代码：

```
#include "stdio.h"
#include <math.h>
#include <stdlib.h>

void calculatePrimes(int max, int** array){
    int size=1, i;
    *array[0]=2;
    for(i=0; i<max; i++){
        if(isPrime(i)){
            *array = (int *)realloc(**array, (++size)*sizeof(int));
            *array[size-1]=i;
        }
    }
}

int isPrime(int value){
    int i=2, root = sqrt(value);
    for(;i<root;i++){
        if(value%i==0) return 0;
    }
    return 1;
}

void main(int argc, char*argv[]){
    int input = atoi(argv[1]), numPrimes;
    int *primes=(int *)malloc(sizeof(int));
    calculatePrimes(input, &primes);
    numPrimes=sizeof(primes)/sizeof(int);
    printf("%d\n", numPrimes);
    free(primes);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T06:58:48.903

的错误使用`realloc()`。正确的如下：

```
*array = realloc(*array, (++size)*sizeof(int)); 
```

当您传递`**array`给`realloc()`您时，传递数组的第一个元素的值，`int`而不是`int*`.

请注意，我还删除了演员表。在 C 中，它不是必需的，它可以隐藏您不想隐藏的某些问题。具体来说，它可能会为您提供错误的函数签名`malloc/realloc`，如果您的`int`和`void*`类型不兼容，可能会导致指针损坏。

# c# - 如何检索实际列值。？

> ID：16208287
> 
> 赞同：0
> 
> 时间：2013-04-25T06:56:59.107
> 
> 标签：c#, asp.net, sql

在我的工作中，我有一张桌子

```
reservation_available(seat_id, seat_type, flight_id, available) 
```

其中 flight_id 是一个外键，而 seat_type 连续有两个值（Economic, Business）。要检索 seat_id 和可用，我写道：

```
 using (SqlCommand command = new SqlCommand("SELECT seat_id, seat_type, available FROM reservation_available WHERE seat_type = 'Economic' AND reservation_available.flight_id = '" + flight_id + "' ", connection))
                {

                    string s_ID = seat_id.ToString();
                    string e_avail = EconomicAvailable.ToString();
                    string st = seat_type;

                    SqlDataReader myReader = command.ExecuteReader();

                    while (myReader.Read())
                    {
                        s_ID = myReader[0].ToString();
                        st = myReader[1].ToString();
                        e_avail = myReader[2].ToString();

                    }
                    int sId = Convert.ToInt32(s_ID);
                    int eAvail = Convert.ToInt32(e_avail);

                    myReader.Close();
                    set2(sId, eAvail, st);
                } 
```

和 seat_type = 'Business' 的类似代码。

但是检索到的数据只显示了seat_type =“Business”的“seat_id”。但我想要所选座位类型的相应座位 ID。

需要帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T15:51:39.847

尝试这个

```
SELECT seat_id, seat_type, available FROM reservation_available WHERE (seat_type = 'Business' or seat_type = 'Economic') AND reservation_available.flight_id = '" + flight_id + "' 
```

或基于参数

```
SELECT seat_id, seat_type, available FROM reservation_available WHERE seat_type = '"+varSeatType+"' AND reservation_available.flight_id = '" + flight_id + "' 
```

# php - php-ffmpeg 太慢 - 生成缩略图？

> ID：16208292
> 
> 赞同：1
> 
> 时间：2013-04-25T06:57:18.413
> 
> 标签：php, ffmpeg, ffmpeg-php

我第一次尝试从视频文件创建缩略图预览，上传了 700mb .avi 电影，209747 帧。现在我正在尝试创建 1 个缩略图，但需要 4.7 秒，因为我已设置帧 10000，如果我将其设置为 1000，则生成缩略图只需 0.4 秒。

如何在不到一秒的时间内从不同的帧中生成 5-10 个缩略图？甚至可能吗？使用 exec(ffmpeg) 或 php-ffmpeg 有什么不同吗？在机器 2x Xeon L5420 上使用 0.6-svn ffmpeg、Debian 6.0.7、php 5.4.14 并且仍然很慢......有什么想法吗？如何使用 ffmpeg + 视频的时间而不是帧？

```
$movie = 'ai.avi';
$thumbnail = 'thumbnail.jpg';

$mov = new ffmpeg_movie($movie);
$frame = 10000;
$frame = $mov->getFrame($frame);

if($frame) { 
  $gd_image = $frame->toGDImage();
  if($gd_image) {
    imagejpeg($gd_image, $thumbnail, 100);
    imagedestroy($gd_image);
  }
}
echo '<img src="'.$thumbnail.'" ><br />'; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T10:12:32.610

首先，您使用的是[FFmpeg-php](http://ffmpeg-php.sourceforge.net/)，而不是[php-FFmpeg](https://github.com/alchemy-fr/PHP-FFmpeg)。这是两个不同的项目，您的 FFmpeg-php 项目（非常）旧。

将帧更改为第10,000帧或第1,000帧时的过程差异太大，可能是由于php-ffmpeg图像提取功能不佳造成的。你可以试试我预计需要 80 秒的第 200,000 帧吗？如果这是真的，那么这个`toGDImage()`功能真的太慢了​​！

然后你有一些选择来提高性能：

1.  试试看是否可以`toGDImage()`直接从 FFmpeg-php 调整功能或使用命令，比如`ffmpeg -ss 00:10:00 -i input.avi -vframes 1 output.jpg`
2.  或者尝试实现[php-FFmpeg](https://github.com/alchemy-fr/PHP-FFmpeg)库，其中包含一个快速`extractImage()`函数，它使用上面的命令。

# java - 删除/复制/粘贴在 Eclipse Juno 中不起作用

> ID：16208300
> 
> 赞同：1
> 
> 时间：2013-04-25T06:57:42.877
> 
> 标签：java, eclipse-juno

这似乎与 [Eclipse cut/copy/paste not working](https://stackoverflow.com/questions/14715039/eclipse-cut-copy-paste-not-working)中描述的问题类似。但是，该问题似乎与 CodePro AnalytiX 插件无关。

在调试过程后的某个时刻，复制和粘贴和删除密钥不起作用。同样在编辑菜单中这些选项是隐藏的。

重启 Eclipse 后一切正常。

系统：Windows 7 Enterprise，SP1
Eclipse Juno Service Release 2，已更新。

[Eclipse 论坛](http://www.eclipse.org/forums/index.php/m/895704/)中给出的提示，例如删除 Eclipse 中的键绑定，似乎不是一个解决方案，因为它只是删除了这些快捷方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T08:14:23.007

这通常不是内存问题，我最近也遇到过。我通过执行以下操作解决了它：

1.  在 Eclipse 安装的根目录中打开 eclipse.ini
2.  例如，将您的记忆力增加到至少比现在更多

-XX:MaxPermSize=256m -Xms40m -Xmx1024m

这对我有用...

# delphi - 在 Delphi 中更改引发异常的图标

> ID：16208305
> 
> 赞同：1
> 
> 时间：2013-04-25T06:58:01.557
> 
> 标签：delphi, exception, exception-handling, delphi-2007

在我们的应用程序中，我们创建了几个 Exceptions 类来满足我们的所有需求。但现在的问题是，引发的异常对话框总是 MessageType`mtError`并且当然显示`mtError`-Icon。
对于我们的一些例外情况，我更喜欢*不那么激进*的Icon/MessageType，例如 MessageType `mtInformation`。

有什么方法可以直接在 Exceptionclass 中更改图标，而无需`try...except`在每次出现时再次提升和捕获它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-25T07:04:35.950

您将需要自定义顶级异常处理程序。

编写一个事件处理程序并将其附加到`Application.OnException`. 然后，您可以以任何您喜欢的方式处理特定的异常。

事件处理程序将如下所示：

```
procedure TMainForm.ApplicationException(Sender: TObject; E: Exception); 
begin   
  if E is EMyException then
    ShowExpectedMessageBox(E)
  else
    Application.ShowException(E);
end; 
```

显然你必须为`ShowExpectedMessageBox`. 这可以使用您喜欢的任何图标显示消息框。

当未处理的异常到达消息循环时，将调用[OnException事件。](http://docwiki.embarcadero.com/Libraries/en/Vcl.Forms.TApplication.OnException)如果您没有事件处理程序，框架将调用`Application.ShowException`. 对于那些没有得到特殊待遇的例外情况，您应该这样做。

# java - 二叉树后缀计算器

> ID：16208308
> 
> 赞同：0
> 
> 时间：2013-04-25T06:58:10.430
> 
> 标签：java, binary-tree, calculator, infix-notation, postfix-notation

我正在制作一个后缀计算器，在评估后缀表达式期间，在将表达式从中缀转换为解析树期间，我必须使用堆栈对象和二叉树。

有人可以翻译吗？

我开发了一种后缀计算器方法，并且我开发了一种将表达式从中缀更改为后缀的方法，但我不明白我被要求做什么。我可以在中缀中输入一个表达式并计算它，并将其转换为后缀，但我无法确定我被要求在这里创建什么。

如何在伪代码中实现这一点的示例将非常有帮助，或者只是解释如何将数学表达式存储到二叉树中，以及如何将带有堆栈的二叉树中的表达式计算到解析树中。

我还要说我有点不确定解析树是什么。

任何解释将不胜感激。

这是一个班级的作业，所以如果信息不充分，可以在这里看到：[http ://www.cs.gsu.edu/jbhola/csc3410/Spring13/assign6_expre_tree.html](http://www.cs.gsu.edu/jbhola/csc3410/Spring13/assign6_expre_tree.html)

我的主要观点是我只是不太明白我应该做什么或应该如何做。我们没有被教过如何编程，而且我们缺乏教科书，所以我只是有点盲目地试图围绕整个项目：/

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T07:11:57.733

想象一下，你有一个像 AddNode 这样的节点，它有两个值

```
class AddNode {
    final double a, b;

    double value() {
       return // how could you return the value of this node?
    }
} 
```

使其更通用

```
 interface Node { double value(); }

 class AddNode implements Node {
      final Node a, b;

      double value() {
          return // something which gives the value of this node.
      }
 } 
```

# mysql - 选择查询显示第一次和最后一次

> ID：16208309
> 
> 赞同：0
> 
> 时间：2013-04-25T06:58:11.617
> 
> 标签：mysql, select

这是我当前的表

![在此处输入图像描述](https://i.stack.imgur.com/gGRUi.jpg)

是否有选择查询可用于显示日期的第一次和最后一次？我期待如下表所示的结果。

![在此处输入图像描述](https://i.stack.imgur.com/FtPrX.jpg)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T07:02:08.617

```
SELECT  Day, 
        Date, 
        Department, 
        Name,
        MIN(`Time In`) `Time In`, 
        MAX(`Time Out`) `Time Out`
FROM    tableName
GROUP   BY  Day, Date, Department, Name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T07:15:08.873

```
SELECT  Day, 
        Date, 
        Department, 
        Name,
        A.MIN_TIME,
        B.MAX_TIME 
FROM    tableName
LEFT JOIN (SELECT Date, MIN(`Time In`) AS MIN_TIME FROM tableName GROUP BY Date) AS A 
           ON tableName.Date = A.Date
LEFT JOIN (SELECT Date, MAX(`Time Out`) AS MAX_TIME FROM tableName GROUP BY Date) AS B 
     ON tableName.Date = B.Date
GROUP BY Date 
```

# android - 在 android 聊天气泡中插入 imageview 可调

> ID：16208310
> 
> 赞同：4
> 
> 时间：2013-04-25T06:58:16.660
> 
> 标签：android, android-arrayadapter, android-imageview, nine-patch

我想在我的 android 聊天中执行此操作

![在此处输入图像描述](https://i.stack.imgur.com/m0ShH.png)

但我无法让我的照片适合我的泡泡。-我有一个LinearLayout，他的背景是一个气泡9patch -在这个里面，我有一个imageview，在这里插入图像， **但不知道如何使它适合我们在屏幕上看到的背景。**

这就是我的形象

![在此处输入图像描述](https://i.stack.imgur.com/vxN6X.png)

**可以让我知道如何做到这一点吗？**

感谢。

**更新：28/04/2013**

这是我的布局

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/rtlImganen"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginRight="25dp"
    android:gravity="center_vertical" >

    <LinearLayout
        android:id="@+id/lnyGenImagenMio"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_centerVertical="true"
        android:background="@drawable/bocadilloazulmio"
        android:gravity="right"
        android:orientation="vertical" >

        <RelativeLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

            <ImageView
                android:id="@+id/imgImagenMio"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_centerHorizontal="true"
                android:layout_centerVertical="true"
                android:adjustViewBounds="true"
                android:maxHeight="@dimen/maximagen"
                android:maxWidth="@dimen/maximagen"
                android:scaleType="centerCrop" />

            <ImageView
                android:id="@+id/imgPlayMio"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_centerHorizontal="true"
                android:layout_centerVertical="true"
                android:src="@drawable/play" />
        </RelativeLayout>

        <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="5dp" >

            <ImageView
                android:id="@+id/imgImagenEnvioRecibidoMio"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="bottom"
                android:src="@drawable/enviadorecibido" />

            <TextView
                android:id="@+id/txtFechaImagenVideoMio"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginLeft="5dp"
                android:textColor="#0000FF"
                android:textSize="8sp" />

        </LinearLayout>

    </LinearLayout>

</RelativeLayout> 
```

但我仍然没有解决方案

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-15T17:58:31.373

这只能通过自定义视图来完成。我有同样的问题。查找自定义 ImageView 和路径以及剪切位图。我写了这个片段来从给定的位图中剪下一个语音气泡形状：

```
 public static Bitmap clipit(Bitmap bitmapimg,int direct) {

    //1 = direction right
    //0 = direction left

      Bitmap output = Bitmap.createBitmap(bitmapimg.getWidth(),
                bitmapimg.getHeight(), Config.ARGB_8888);
        Canvas canvas = new Canvas(output);

        final int color = 0xff424242;
        final Paint paint = new Paint();
        final Rect rect = new Rect(0, 0, bitmapimg.getWidth(),
                bitmapimg.getHeight());

        paint.setAntiAlias(true);
        canvas.drawARGB(0, 0, 0, 0);
        paint.setColor(color);

        if(direct == 0) {
        canvas.drawRect(0, 0, bitmapimg.getWidth()-15, bitmapimg.getHeight(), paint);
        Path path = new Path();
        path.moveTo(bitmapimg.getWidth()-15, 10);
        path.lineTo(bitmapimg.getWidth(), 20);
        path.lineTo(bitmapimg.getWidth()-15, 30);
        path.lineTo(bitmapimg.getWidth()-15, 10);
        canvas.drawPath(path,paint);
        }
        if(direct == 1) {
            canvas.drawRect(15, 0, bitmapimg.getWidth(), bitmapimg.getHeight(), paint);             
            Path path = new Path();
            path.moveTo(15, 10);
            path.lineTo(0, 20);
            path.lineTo(15, 30);
            path.lineTo(15, 10);
            canvas.drawPath(path,paint);    
        }

        paint.setXfermode(new PorterDuffXfermode(Mode.SRC_IN));
        canvas.drawBitmap(bitmapimg, rect, rect, paint);
        return output;

  } 
```

这能解决你的问题吗？

# c - 为指向结构数组的指针动态分配内存

> ID：16208311
> 
> 赞同：0
> 
> 时间：2013-04-25T06:58:19.620
> 
> 标签：c, memory-management, structure

嗨我有这个结构

```
typedef struct STUDENT
{
    char studName[20];
    int timeEnter;
    int timeUpdate;
}STUDENT; 
```

以及指向结构数组的本地指针

```
STUDENT *studArr[100]; 
```

我试图通过读取文件的第一行来为结构分配内存，然后使用它为结构分配内存。

```
fscanf(fp, "%s", &first);
**studArr = (STUDENT**) malloc(sizeof(STUDENT*)*first); 
```

我收到一条错误消息，指出没有运算符“=”与分配行上的这些操作数匹配

为什么我得到错误，我在这里做错了什么？

预先感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T07:05:15.407

I think you're confusing things, it looks like you're declaring an array of pointers, when all you need is a single pointer. Note that as long as you're indexing properly, a pointer to "one" `struct` is the same as a pointer to a hundred.

You should probably have:

```
STUDENT *studArr; 
```

then, once you know how many you need (I'm assuming `first` is the number of students to allocate room for):

```
studArr = malloc(first * sizeof *studArr); 
```

Also note that [no casting is needed](https://stackoverflow.com/a/605858/28169).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T07:03:23.220

如果你想分配一个包含 100 个学生的数组，你有两个选择：

```
struct STUDENT
{
    char studName[20];
    int timeEnter;
    int timeUpdate;
};

struct STUDENT studArr1[100];

... OR ...

struct STUDENT *studArr2 = (struct STUDENT *)malloc (sizeof (struct STUDENT) * 100); 
```

如果你只想要一个指针，你可以说：

```
 struct STUDENT *p = studArr1; 
```

PS：

我故意留下了“typedef”的东西，以免混淆基本问题（结构与结构数组与指向结构数组的指针）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T07:04:48.090

You have defined an array of pointers to struct, not a pointer to an array of struct. The memory for the array is already allocated, as a global array.

The type of `**studArr` is STUDENT, and hence is not compatible with the expression to the right of the assignment operator, which is casted to `(STUDENT**)`.

You probably meant:

```
STUDENT **studArr; 
```

[...]

```
fscanf(fp, "%s", &first);
studArr = (STUDENT**) malloc(sizeof(STUDENT*)*first); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T07:05:56.963

As you are using STUDENT *studArr[100]; then it means you have allocated the memory for 100 pointers for STUDENT structure type.

so for allocating the memory you should try.

```
studArr =malloc(sizeof(struct STUDENT)*first); 
```

then you can access all the allocated members as `studArr[i] ....so on`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-25T07:06:16.230

You're not exactly clear on what your overall goal is.

First of all, you want to use `%d` if you want to read in an integer:

```
int count;
if (fscanf(fp, "%d", &count) != 1) { // error... } 
```

Next, don't use `STUDENT` as both the struct name and the typdef. Just leave the struct name out:

```
typedef struct
{
    char studName[20];
    int timeEnter;
    int timeUpdate;
} student_t; 
```

Now, you're going to want just a pointer to an array of `student_t`s:

```
student_t* student_array = NULL; 
```

Finally, allocate that array:

```
student_array = malloc(count * sizeof(student_t)); 
```

* * *

Now you can use it, like:

```
strncpy(student_array[0].studName, "Bobby", 20); 
```

Or get a pointer to an individual student:

```
student_t* bob = &student_array[1];
bob->timeEnter = 42; 
```

# oracle - 为什么我不能在存储函数中使用 Like？

> ID：16208320
> 
> 赞同：1
> 
> 时间：2013-04-25T06:58:54.170
> 
> 标签：oracle, stored-functions

我在 Oracle 中编写了一些存储函数。其中一个是一个非常基本的函数，它以字符串作为参数并返回另一个字符串。这是我的功能：

```
CREATE OR REPLACE 
FUNCTION get_mail_custcode (
    custcodeParam IN customer_table.custcode%TYPE)
    RETURN VARCHAR2
IS
    mail_rc   contact_table.email%TYPE;
BEGIN
    SELECT   cc.email
      INTO   mail_rc
      FROM   contact_table cc, customer_table cu
     WHERE       cu.customer_id = cc.customer_id
             AND cu.custcode like custcodeParam ;

    RETURN mail_rc ;
END; 
```

所以它不起作用..该功能似乎运行良好但没有任何结束执行..该功能是工作时间和时间，我在2或3分钟后手动取消操作（此查询通常会立即产生结果）。在一次又一次地编写查询之后，我终于（并且随机）将其更改`cu.custcode like custcodeParam`为 a`cu.custcode = custcodeParam`并且它正在工作！

所以我的问题是为什么？为什么我不能`like`在存储函数中使用比较器？为什么这不会出错，但函数会无限期地运行。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T08:38:15.943

游标在 Oracle 中的处理方式都是一样的。函数中的查询将被视为与您通过 SQL*Plus 手动输入的查询完全相同。

但是，您的示例中可能不同的是 Oracle 如何处理变量。以下两个查询与优化器根本不同：

```
SELECT * FROM tab WHERE code LIKE 'FOO%'; 
```

和

```
variable v_code VARCHAR2(4)
EXEC :v_code := 'FOO%';
SELECT * FROM tab WHERE code LIKE :v_code; 
```

在第一种情况下，优化器查看常量`FOO%`并立即判断索引`code`非常适合通过索引 RANGE SCAN 快速检索行。

在第二种情况下，优化器必须考虑它`:V_CODE`不是恒定的。优化器的目的是确定一个查询的计划，该计划将由同一查询的连续执行共享（因为计算计划是昂贵的）。

优化器的行为取决于您的 Oracle 版本：

*   在旧的 Oracle 版本（9i 和更早版本）中，变量的值被忽略以构建计划。实际上，无论传递给它的价值如何，甲骨文都必须制定一个有效的计划。在您的情况下，这可能会导致完全扫描，因为 Oracle 必须采取风险最小的选项并认为这`FOO%`很可能是一个值`%FOO`（后者不能通过索引范围扫描有效访问）。
*   在 10g Oracle 中引入了[绑定窥视](http://docs.oracle.com/cd/E11882_01/server.112/e16638/optimops.htm#PFGRF94588)：现在优化器可以访问变量的值并生成合适的计划。主要问题是，在大多数情况下，一个查询只能有一个计划，这意味着曾经传递给函数的第一个变量的值将强制执行所有后续执行的执行计划。如果要传递的第一个值是`%FOO`，则可能会选择 FULL SCAN。
*   在 11g 中，Oracle 具有“[智能游标共享](http://docs.oracle.com/cd/B28359_01/server.111/b28279/chapter1.htm#FEATURENO07493)”：单个查询可以共享多个计划，在上面的示例中，该值`FOO%`将使用 RANGE SCAN，而`%FOO`可能会使用 FULL SCAN。

您使用的是什么版本的 Oracle？

* * *

*更新*

在 10g 和之前的版本中，如果这个函数经常在没有通配符的情况下使用，你应该重写它以确认优化器的行为：

```
BEGIN
   IF instr(custcodeParam, '%') > 0 OR instr(custcodeParam, '_') > 0 THEN
      SELECT cc.email
        INTO mail_rc
        FROM contact_table cc, customer_table cu
       WHERE cu.customer_id = cc.customer_id
         AND cu.custcode LIKE custcodeParam;
   ELSE
      SELECT cc.email
        INTO mail_rc
        FROM contact_table cc, customer_table cu
       WHERE cu.customer_id = cc.customer_id
         AND cu.custcode = custcodeParam;
   END IF;

   RETURN mail_rc;
END; 
```

# java - 无法在 Clob 中存储大字符串

> ID：16208324
> 
> 赞同：0
> 
> 时间：2013-04-25T06:59:01.117
> 
> 标签：java, oracle, hibernate

无法存储包含 xml 数据`String`的大尺寸文件。`CLOB` `String`的大小`String`大于 19000。我能够存储小字符串，但`null`在数据库中获取大字符串的值。请提出相同的解决方案。我正在使用以下代码：

```
Clob myClob = Hibernate.createClob(updateStr);
Reader reader = myClob.getCharacterStream();
myServiceRequest.setRequestData(Hibernate.createClob(reader, (int)myClob.length())); 
```

`updateStr`是一个包含 xml 数据的字符串，它的大小非常大。我无法插入数据库。

RequestData 是我插入 String 的数据库中的列（CLOB 类型）。

# java - 全局 Hadoop 配置存储

> ID：16208325
> 
> 赞同：0
> 
> 时间：2013-04-25T06:59:01.730
> 
> 标签：java, hadoop

有没有办法设置/获取全局 Hadoop 配置对象，比如下面的伪代码？当然，我可以使用静态方法创建自己的类，这些方法可以满足我的需要，但如果可以在 Hadoop Java API 中找到类似的东西，这样不会使依赖关系变得更复杂，那就更好了。到目前为止，我没有发现任何可用的东西。有什么建议吗？

在某些应用程序级别的配置器中。

```
Configuration conf = new Configuration();
conf.set(...);
<something>.SetGlobalConfig(conf); 
```

在较低层的客户端代码中。

```
Configuration conf = <something>.GetGlobalConfig();
// ... something that needs configuration. 
```

更新 1：我知道 Hadoop .xml 配置文件，实际上它是一种可能的解决方案，但最好在代码中完成所有配置，而不需要外部文件。

更新 2：根据提供的决定是使用与作业代码一起打包的“常规”.xml 配置。由于使用相同的工具，客户端可以通过命令行参数“调整”一些参数，这些参数保持类似于 hadoop 的语义。为了将其余代码与 Hadoop 配置/用户方面隔离开来，更多的应用程序代码通过特殊的配置器单调请求配置。

尽管我不介意反对有用的想法，但原始问题被认为已解决。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T07:18:35.163

你打电话时

```
Configuration conf = new Configuration(); 
```

它将查看您项目的类路径中的`core-default.xml`and `core-site.xml`。

这`core-site.xml`正是您想要将“全局”配置放入的位置。

# java - 如何在 Swing 中有效地绘制图像的子部分

> ID：16208327
> 
> 赞同：1
> 
> 时间：2013-04-25T06:59:02.810
> 
> 标签：java, image, swing, masking

假设我`TYPE_4BYTE_ABGR`在 Swing 中有一个 BufferedImage 类型，我只想绘制它的一部分。例如，我想只画左半边或一些三角形或更复杂的东西。

原因是最终图像应由我拥有的单个图像的子部分组成。

最好的方法是什么？

如果可能的话，我更愿意定义一个多边形，然后将此形状用作绘图的蒙版。

我目前的想法：复制单个图像并将所需形状之外的所有像素设置为透明，然后绘制整个图像。我认为这可能有效，但复制和所有内容可能太慢了。

编辑：

我测试了 Guillaume 的解决方案，发现它可以工作并且不会极大地减慢绘画的速度。使用剪辑导致绘制时间从 14 毫秒增加到 35 毫秒，但这些时间非常不准确。[我使用了从这里](https://stackoverflow.com/questions/5541493/how-do-i-profile-the-edt-in-java-swing)分析 EDT 。这是代码。

```
import java.awt.AWTEvent;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Toolkit;
import java.awt.image.BufferedImage;
import java.io.IOException;
import java.net.URL;
import javax.imageio.ImageIO;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;

/**
 *
 */
public class ClipTilesTest {

    // tile size and number of tiles in each row/column
    private static int TILE_SIZE = 100;
    private static int TILE_NUM = 6;

    // taken from https://stackoverflow.com/questions/5541493/how-do-i-profile-the-edt-in-java-swing
    public static class TimedEventQueue extends EventQueue {

        @Override
        protected void dispatchEvent(AWTEvent event) {
            long startNano = System.nanoTime();
            super.dispatchEvent(event);
            long endNano = System.nanoTime();

            if (endNano - startNano > 5000000) {
                System.out.println(((endNano - startNano) / 1000000) + "ms : " + event);
            }
        }
    }

    private static void initUI() {

        Toolkit.getDefaultToolkit().getSystemEventQueue().push(new TimedEventQueue());

        // download image
        BufferedImage image;
        try {
            image = ImageIO.read(new URL("http://download.chip.eu//ii/163859211_4b28e1e687.jpg"));
        } catch (IOException ex) {
            ex.printStackTrace();
            return;
        }
        // take out small chunk
        final BufferedImage tile = image.getSubimage(0, 0, TILE_SIZE, TILE_SIZE);

        JFrame frame = new JFrame();
        frame.setTitle(ClipTilesTest.class.getSimpleName());
        frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);

        // the panel containing some tiles
        JPanel view = new JPanel() {
            @Override
            public void paint(Graphics g) {
                super.paint(g);
                Graphics2D g2d = (Graphics2D) g;

                for (int i = 0; i < TILE_NUM; i++) {
                    for (int j = 0; j < TILE_NUM; j++) {

                        // version 1
                        /*
                        g2d.setClip(i * TILE_SIZE, j * TILE_SIZE , (i+1)*TILE_SIZE, (j+1)*TILE_SIZE);
                        g2d.drawImage(tile, i * TILE_SIZE, j * TILE_SIZE, null);
                        */

                        // version 2

                        g2d.setClip(i * TILE_SIZE, j * TILE_SIZE , i*TILE_SIZE + TILE_SIZE/2, (j+1)*TILE_SIZE);
                        g2d.drawImage(tile, i * TILE_SIZE, j * TILE_SIZE, null);
                        g2d.setClip(i * TILE_SIZE + TILE_SIZE/2, j * TILE_SIZE , (i+1)*TILE_SIZE , (j+1)*TILE_SIZE);
                        g2d.drawImage(tile, i * TILE_SIZE, j * TILE_SIZE, null);

                    }
                }

            }
        };
        view.setPreferredSize(new Dimension(TILE_SIZE * TILE_NUM, TILE_SIZE * TILE_NUM));

        // add, pack, set visible
        frame.add(view);
        frame.pack();
        frame.setVisible(true);

        // now make a repaint event, so we can start measuring
        view.repaint();
    }

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                ClipTilesTest.initUI();
            }
        });

    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T07:47:33.877

实现此效果的一种简单方法是修改`Graphics`对象的“剪辑”并将其设置为您要绘制的形状。

我不知道这有多有效，但是您可以考虑缓存剪切的图像，然后绘制整个缓存的图像。

这是一个小演示代码：

![结果](https://i.stack.imgur.com/sqXkR.jpg)

```
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Image;
import java.awt.Rectangle;
import java.awt.Shape;
import java.awt.geom.Ellipse2D;
import java.net.MalformedURLException;
import java.net.URL;
import java.util.ArrayList;
import java.util.List;
import java.util.Random;

import javax.swing.ImageIcon;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;

public class TestClippedPanel {

    private static class ClippedPanel extends JPanel {

        private ImageIcon image;

        private List<Shape> shapes;

        public ClippedPanel() throws MalformedURLException {
            shapes = new ArrayList<Shape>();
            image = new ImageIcon(new URL("http://download.chip.eu//ii/163859211_4b28e1e687.jpg"));
            Random random = new Random();
            for (int i = 0; i < 10; i++) {
                int x = random.nextInt(image.getIconWidth() - 1);
                int y = random.nextInt(image.getIconHeight() - 1);
                int w = random.nextInt(image.getIconWidth() - x) + 1;
                int h = random.nextInt(image.getIconHeight() - y) + 1;
                shapes.add(new Rectangle(x, y, w, h));
            }
            for (int i = 0; i < 10; i++) {
                int x = random.nextInt(image.getIconWidth() - 1);
                int y = random.nextInt(image.getIconHeight() - 1);
                int w = random.nextInt(image.getIconWidth() - x) + 1;
                int h = random.nextInt(image.getIconHeight() - y) + 1;
                shapes.add(new Ellipse2D.Double(x, y, w, h));
            }
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            Image img = image.getImage();
            for (Shape shape : shapes) {
                ((Graphics2D) g).setClip(shape);
                g.drawImage(img, 0, 0, this);
            }
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(image.getIconWidth(), image.getIconHeight());
        }

    }

    protected void initUI() throws MalformedURLException {
        final JFrame frame = new JFrame(TestClippedPanel.class.getSimpleName());
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        final ClippedPanel panel = new ClippedPanel();
        frame.add(panel);
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                try {
                    new TestClippedPanel().initUI();
                } catch (MalformedURLException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }
        });
    }
} 
```

# image - 参数图像生成器

> ID：16208331
> 
> 赞同：0
> 
> 时间：2013-04-25T06:59:23.263
> 
> 标签：image, object, vision

我正在寻找一个参数图像生成器，它可以针对指定的参数生成同一对象的不同图像（例如，龙虾图像，其中每个图像都包含不同脂肪的相同龙虾）。我需要能够控制参数（例如设置龙虾的肥胖程度）。它所代表的图像和对象基本上可以是任何东西。是否有任何现有的库/软件可以生成此类图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T07:11:33.883

Blender、Google Sketchup、Autocad、3D Canvas、MeshLab（仅用于几何部分）

# c# - 将 AutoCad 与 WPF C# 应用程序集成

> ID：16208332
> 
> 赞同：3
> 
> 时间：2013-04-25T06:59:27.780
> 
> 标签：c#, wpf, autocad

我有一个关于将 AutoCad LT 与 WPF C# 应用程序集成的问题。我有一个客户，我为他开发了一个 ERP 应用程序，这个客户使用 AutoCAD LT 绘制他们生产的产品。他们的产品使用主图，不同的客户订购不同尺寸的产品。

客户问我是否可以将 AutoCad 与他的订单流程集成和自动化。当他下一个新订单时，他希望它打开所订购产品的图纸，对其进行更改，然后以不同的名称将其保存在特定文件夹中。

图纸的更改将由客户代表 (CSR) 完成，应用程序应自动将图纸保存在特定文件夹中，并使用引用特定订单的名称。之后，应用程序应打印绘图，然后关闭 AutoCad 实例。

所以我有以下用例：

1.  CSR：输入新订单并指定主图纸；
2.  应用：打开AutoCAD绘图；
3.  CSR：修改图纸；
4.  CSR：提交订单（在申请中）；
5.  应用：指示AutoCAD打印修改后的图纸；
6.  应用：以新名称将绘图保存在特定文件夹中；
7.  应用程序：关闭 AutoCAD LT 实例。

我的问题是，是否有用于 AutoCad 的 API 可用于实现此功能，或者是否有其他方法可以将这些命令传达给 AutoCad？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T07:21:21.693

看看这个： [AutoCad .Net 开发人员指南](http://docs.autodesk.com/ACD/2010/ENU/AutoCAD%20.NET%20Developer%27s%20Guide/)

> 本简介介绍了通过托管 .NET 应用程序编程接口 (API) 公开 AutoCAD® 对象的概念。

附带说明：您为什么使用文件夹来保存图纸？我认为某种数据库会更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-26T14:31:21.717

在[AutoCAD 开发人员指南](http://docs.autodesk.com/ACD/2010/ENU/AutoCAD%20.NET%20Developer%27s%20Guide/)中的 AutoCAD .NET API 基础部分[-> 进程外与进程内](http://docs.autodesk.com/ACD/2010/ENU/AutoCAD%20.NET%20Developer's%20Guide/index.html?url=WS1a9193826455f5ff2566ffd511ff6f8c7ca-4875.htm)

> 当您开发一个新应用程序时，它可以在进程内运行或在进程外运行。AutoCAD .NET API 设计为仅在进程内运行，这与可在进程内或进程外使用的 ActiveX 自动化库不同。进程内应用程序设计为在与主机应用程序相同的进程空间中运行。在这种情况下，DLL 程序集被加载到作为主机应用程序的 AutoCAD 中。进程外应用程序不会在与宿主应用程序相同的空间中运行。这些应用程序通常构建为独立的可执行文件。如果您需要创建一个独立的应用程序来驱动 AutoCAD，最好创建一个使用 CreateObject 和 GetObject 方法来创建 AutoCAD 应用程序的新实例或返回当前正在运行的实例之一的应用程序。

示例代码显示了如何从独立应用程序访问正在运行的 AutoCAD 实例。基本上你可以做类似的事情（插入你的特定 progId）：

```
[CommandMethod("ConnectToAcad")]
public static void ConnectToAcad()
{

    AcadApplication acAppComObj = null;
    const string strProgId = "AutoCAD.Application.18";

    // Get a running instance of AutoCAD
    try
    {
        acAppComObj = (AcadApplication)Marshal.GetActiveObject(strProgId);
    }
    catch // An error occurs if no instance is running
    {
        try
        {
            // Create a new instance of AutoCAD
            acAppComObj = (AcadApplication)Activator.CreateInstance(Type.GetTypeFromProgID(strProgId), true);
        }
        catch
        {
            // If an instance of AutoCAD is not created then message and exit
            System.Windows.Forms.MessageBox.Show("Instance of 'AutoCAD.Application'" +
                                                 " could not be created.");

            return;
        }
    }

    // Display the application and return the name and version
    acAppComObj.Visible = true;
    System.Windows.Forms.MessageBox.Show("Now running " + acAppComObj.Name +
                                         " version " + acAppComObj.Version);

    // Get the active document
    AcadDocument acDocComObj;
    acDocComObj = acAppComObj.ActiveDocument;

    // Optionally, load your assembly and start your command or if your assembly
    // is demandloaded, simply start the command of your in-process assembly.
    acDocComObj.SendCommand("(command " + (char)34 + "NETLOAD" + (char)34 + " " +
                            (char)34 + "c:/myapps/mycommands.dll" + (char)34 + ") ");

    acDocComObj.SendCommand("MyCommand ");
} 
```

# android - eBay 用户身份验证

> ID：16208333
> 
> 赞同：-1
> 
> 时间：2013-04-25T06:59:38.040
> 
> 标签：android, authentication, ebay-api

我已经为我开发的 Android 应用程序完成了所有必要的步骤——在 ebay 上注册、获取应用程序 ID、设备 ID 和应用程序证书。

我如何开始使用 ebay 对用户进行身份验证以获取他的购买历史记录？为了解决更大的问题，我需要迈出一步，所以现在，我只需要验证用户身份的方法，我将从那里继续。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-18T20:18:15.307

这是一篇旧文章，但我最近通过这个 eBay API 身份验证体验，自己按照 eBay XML 调用格式编写了一个本地移动应用程序，并为可能找到这个问题的其他人提供了答案。

eBay 开发者网站记录了他们的 API 身份验证令牌流程，它讨论了桌面应用程序，但只是将其与原生移动应用程序读取相同，因为他们从未更新过文档。不幸的是，在您的 developer.ebay.com 仪表板上进行设置有些麻烦，但在给出此答案时，步骤和屏幕截图仍然与文档准确无误。对于本机移动应用程序，当您在“步骤 1”中进入仪表板上的该字段时，请使用“授权”类型。

[eBay API 身份验证令牌流程](http://developer.ebay.com/devzone/xml/docs/howto/tokens/gettingtokens.html)

[有关 eBay Auth 令牌流程的更多详细信息](http://developer.ebay.com/devzone/guides/ebayfeatures/Basics/Tokens-MultipleUsers.html)

本机移动应用程序的文档中不太清楚的是，对于“第 2 步”，您还需要让用户使用 android.webkit.WebView 等通过网络手动登录到 signin.ebay.com。目前没有来自 eBay 的身份验证 API 供您使用。

另请注意，您必须将来自 eBay 的接受/拒绝响应映射到服务器上的 URL，如文档屏幕截图所示。每个 URL/参数在“步骤 1”中都有一个字段，它们都必须通过安全的 https。我发现如果我使用 http，更新 eBay 开发人员资料时会出错。无法直接将响应映射到本机应用程序。

正确完成所有这些设置后，应用程序端的流程将围绕 eBay GetSessionID 和 FetchToken API。

一旦您拥有授权令牌，它的有效期为 18 个月，除非用户从他们的“我的 eBay 帐户”页面撤销它。顺便说一句，这也适用于 Apple iOS 原生应用程序。

# qt - QFrame：创建 mousePressEvent

> ID：16208336
> 
> 赞同：0
> 
> 时间：2013-04-25T06:59:45.707
> 
> 标签：qt, events, qt5, qt-designer

实际上，我正在尝试为 QT 5（带有 Qt-Addin 的 VS2010）中的 QFrame 获取 mousePressEvent。在这里和其他论坛上看到了很多建议，但是更新的让它起作用，或者我不理解原理。还看了[涂鸦](http://docs.huihoo.com/qt/4.5/widgets-scribble.html)示例，没有运气

如何获取 QFrame 的 mousePressEvent？我是否必须创建一个从 QFrame 继承的类，然后在 main() 函数中自己初始化这个框架？没有可以将它绑定到 Qt-Designer 的解决方案吗？

尝试了多种方法，主要看到的是这样的：

```
protected:
void TestQtFormsApplication::mousePressEvent(QMouseEvent *qevent)
{
    if (qevent->button() == Qt::LeftButton)
    {
        this->close();
    }
}; 
```

有了这个我得到了错误C2027：使用未定义的类型'QMouseEvent'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T07:03:48.687

子类化`QFrame`和重新实现`mousePressEvent(..)`就像您在示例中一样。记住`accept()`事件以阻止它传播到父小部件。您的错误是因为`QMouseEvent`仅在`QWidget`头文件中前向声明，只需自己包含它。

如果您想在 Qt Designer 中使用您的子类，只需使用 a`QFrame`并将其“提升”到您的子类（[docs](http://qt-project.org/doc/qt-4.8/designer-using-custom-widgets.html#promoting-widgets)）。

# c# - 如何让随机绘制的矩形彼此垂直堆叠？

> ID：16208337
> 
> 赞同：1
> 
> 时间：2013-04-25T06:59:59.917
> 
> 标签：c#, winforms, graphics

我试图让随机绘制的矩形在表单上彼此相邻排列，但我的循环不起作用并且给了我不想要的结果，任何帮助将不胜感激。

我已经创建了一个创建随机矩形并将它们存储在列表集合中的方法。

```
 List<Rectangle> rectangleCollection = new List<Rectangle>();

    void CreateRectangle()
    {
        int TallestRectangle = 0; ;
        int PrevRecX = 0;
        int PrevRecY = 0;

        Pen pen = new Pen(Color.Black);
        Graphics graphic = this.CreateGraphics();

        foreach (Rectangle rect in rectangleCollection)
        {
            if (rect.Height > TallestRectangle) 
                TallestRectangle = rect.Height;
        }

        foreach (Rectangle rect in rectangleCollection)
        {
            if (PrevRecX + PrevRecY == 0)
            {
                graphic.DrawRectangle(pen, new Rectangle(rect.X, (TallestRectangle - rect.Height), rect.Width, rect.Height));
            }
            else
            {
                graphic.DrawRectangle(pen, new Rectangle((PrevRecX + PrevRecY), (TallestRectangle - rect.Height), rect.Width, rect.Height));
            }
            PrevRecX = rect.X;
            PrevRecY = rect.Width;
        }

    }

    void GetRandomRectangle()
    {
        Random ran = new Random();

        int x = 0;
        int y = 0;

        int width = ran.Next(100, 500);
        int height = ran.Next(200, 700);

        Rectangle rec = new Rectangle(x, y, width, height);

        rectangleCollection.Add(rec);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T07:55:28.707

你的第二个`foreach`看起来太复杂了。而且我不认为你真的需要`PrevRecX`. 试试这个，看看它是否符合您的预期。

```
void CreateRectangle()
{
  int TallestRectangle = 0;
  int PrevRecY = 0;

  Pen pen = new Pen(Color.Black);
  Graphics graphic = this.CreateGraphics();

  foreach (Rectangle rect in rectangleCollection)
  {
    if (rect.Height > TallestRectangle)
      TallestRectangle = rect.Height;
  }

  foreach (Rectangle rect in rectangleCollection)
  {
    graphic.DrawRectangle(pen, new Rectangle(rect.X + PrevRecY, (TallestRectangle - rect.Height), rect.Width, rect.Height));
    PrevRecY += rect.Width; // note the +=
  }
} 
```

至于`static Random`，只需在方法外部声明变量并在内部使用它，如下所示：

```
private static Random ran = new Random();
void GetRandomRectangle()
{
  int x = 0;
  int y = 0;

  int width = ran.Next(100, 500);
  int height = ran.Next(200, 700);

  // ...
} 
```

# ruby-on-rails - 更新时嵌套属性双重错误

> ID：16208338
> 
> 赞同：0
> 
> 时间：2013-04-25T07:00:10.640
> 
> 标签：ruby-on-rails, nested-attributes

当我有两个模型时：

```
Guaranty
accepts_nested_attributes_for :product
belongs_to :product 
```

和型号产品：

```
Product
accepts_nested_attributes_for :guaranties
has_many :guaranties 
```

和 2 个视图（将产品添加到担保时的一个视图和第二个视图将担保添加到产品）。使用 fields_for

更新后我有双重错误，例如名称：不能为空，名称：不能为空

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T08:41:26.927

您应该只接受父模型的子模型的嵌套属性，您的两个视图都应该包含父模型和子模型的 fields_for 表单。

[http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html](http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html)

> 嵌套属性允许您通过父项将属性保存在关联记录上。

# java - 递归多次掷骰子的概率

> ID：16208348
> 
> 赞同：1
> 
> 时间：2013-04-25T07:00:42.457
> 
> 标签：java

我将如何使用递归来计算用给定数量的骰子滚动某个数字 r 的概率？我试图将其视为一个选择问题，但对于算法应该如何工作仍然很困惑。

例如，它应该是这样的：

P(4,14)=(1/6)P(3,13)+(1/6)P(3,12)+(1/6)P(3,11)+(1/6)P( 3,10)+(1/6)P(3,9)+(1/6)P(3,8)

P(3,8)=(1/6)P(2,7)+(1/6)P(2,6)+(1/6)P(2,5)+(1/6)P( 2,4)+(1/6)P(2,3)+(1/6)P(2,2)

P(2,4)=(1/6)P(1,3)+(1/6)P(1,2)+(1/6)P(1,1)+(1/6)P( 1,0)+(1/6)P(1,-1)+(1/6)P(1,-2)

=(1/6)(1/6)+(1/6)(1/6)+(1/6)(1/6)+(1/6)(0)+(1/6)(0 )+(1/6)(0)

我只是无法将其转换为代码。

```
static double P(int dice, int r) {
int ret = 1;
for (int i = 2; i < 7; i++) {
     ret = (1/6)(ret*(dice-i))/(i+1);
}
return ret;
    }  

static double RollDice(int dice,int r) {
     if (dice==1 && (r<1 || r>6)){ 
     return 0;
     }
     if (dice==1 && (r>=1 && r<=6)){
        return (1.0/6);
     }

     else {
        return ((1.0/6)*P(dice-1,r-1));
     } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T07:09:25.843

我不明白为什么你必须分开方法`P()`，`RollDice()`因为在你的公式中你（正确地）用`P`.

如果要将公式放入代码中，它应该如下所示：

编辑：将基本情况更改为 0 骰子，从那时起它变得更加简单。

```
static double P(int dice, int r) {
    if (dice == 0) {
        // Zero dice: probabiliy 1 to get 0
        if (r == 0) {
            return 1.0;
        } else {
            return 0.0;
        }
    else {
        // Multiple dice: recursion
        double sum = 0.0;
        for (/* TODO */) {
            sum += //TODO
        }
    }
} 
```

对于递归部分，请尝试通过查看公式来解决：

```
P(4, 14) = (1/6)P(3, 13) + (1/6)P(3, 12) + ... + (1/6)P(3, 8) 
```

即在一般情况下

```
P(dice, r)=(1/6)P(dice-1, r-1) + (1/6)P(dice-1, r-2) + ... + (1/6)P(dice-1, r-6) 
```

这意味着您必须从 to`r-6`循环`r-1`。

而且由于您要对多个递归调用求和，因此您必须使用初始化为 0 的累加器。（我调用的变量`sum`）

编辑：单击[此处](http://ideone.com/SwLvP6)查看完整示例，与[WolframAlpha](http://www.wolframalpha.com/input/?i=probability+of+10+with+3+dice)进行比较以验证结果。

# powerbuilder - 如何插入窗口作为可停靠窗格的内容

> ID：16208350
> 
> 赞同：0
> 
> 时间：2013-04-25T07:00:45.667
> 
> 标签：powerbuilder, avalondock

我有 1 个包含 2 个文档窗格和 2 个可停靠窗格的主窗口。

除此之外，我还有另外 1 个主窗口，我计划将其放置在一个可停靠窗格中。

我该怎么做？，我正在使用`AvalonDock 1.3`and `PowerBuilder 12.5`。

在我尝试使用此方法之前：

```
dockablepane.content=newWindow.innerControl

ERROR: null object reference 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T14:36:52.387

在[Bruce Armstrong 的 PowerBuilder Developer Journal 文章 中](http://pbdj.sys-con.com/node/1947041)，他用自定义的可视用户对象加载了他的面板。考虑到窗口类中隐含了多少额外内容，我想如果您可以将*窗口加载到窗格中，我会感到惊讶。*通过复制和粘贴精心选择的源，您可能很容易将窗口（可能除了特定于窗口的事件之外）转换为自定义可视用户对象。

祝你好运，

特里。

# php - PHP的文件夹大小？

> ID：16208351
> 
> 赞同：2
> 
> 时间：2013-04-25T07:00:52.797
> 
> 标签：php, directory

在这里，我有一个问题来找出父文件夹的大小：

**这是我的示例代码：**

```
function foldersize($dir){
 $count_size = 0;
 $count = 0;
 $dir_array = scandir($dir);
 foreach($dir_array as $key=>$filename){
  if($filename!=".." && $filename!="."){
   if(is_dir($dir."/".$filename)){
    $new_foldersize = foldersize($dir."/".$filename);
    $count_size = $count_size + $new_foldersize[0];
    $count = $count + $new_foldersize[1];
   }else if(is_file($dir."/".$filename)){
    $count_size = $count_size + filesize($dir."/".$filename);
    $count++;
   }
  }

 }

 return $count_size;
} 
```

**例子**

如果我的文件夹结构如下：

```
 mm[30MB]->rr[40MB]->ee[300MB]->ss[309MB] 
```

如果我使用上面的代码来查找`mm`文件夹的大小，它显示的大小为`zero`

任何人提出一些想法............

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T07:21:10.367

**答案是：**

```
function foldersize($dir){
     $count_size = 0;
     $count = 0;
     $dir_array = scandir($dir);
     foreach($dir_array as $key=>$filename){
      if($filename!=".." && $filename!="."){
       if(is_dir($dir."/".$filename)){
        $new_foldersize = foldersize($dir."/".$filename);
        $count_size = $count_size + $new_foldersize;
       }else if(is_file($dir."/".$filename)){
        $count_size = $count_size + filesize($dir."/".$filename);
        $count++;
       }
      }

     }

     return $count_size;
    } 
```

# mysql - 如何为每个唯一的用户 ID 提取两行

> ID：16208353
> 
> 赞同：2
> 
> 时间：2013-04-25T07:00:56.967
> 
> 标签：mysql

以下查询用于提取以下列和行。

问题是我无法从每个用户 ID 中提取两行。如果我使用限制，则仅获取第一两行。

那么我如何为每个唯一用户 ID 提取两行。

例如 ：

```
two rows of userid 222
two rows of userid 122
two rows of userid 367 
```

等等

文字操作：

预期输出：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T07:06:38.340

假设**id**是您的用户 id 并且**post_ID**是唯一的。

```
(SELECT id,name,post,Image,post
    FROM users  
    GROUP BY id
    ORDER BY id
)
UNION
(SELECT id,name,post,Image,post
    FROM users
    WHERE post_ID NOT IN
    (SELECT post_ID
    FROM users  
    GROUP BY id
    ORDER BY id)
    GROUP BY id
    ORDER BY id
)
ORDER BY id, post_ID 
```

* * *

请检查我的查询，我从中得到以下答案：

```
(
SELECT store_id, `key_id` , `string` , `translate` , `locale`
FROM `core_translate` AS C
GROUP BY `store_id`
ORDER BY `store_id`
)
UNION (

SELECT store_id, `key_id` , `string` , `translate` , `locale`
FROM `core_translate` AS C
WHERE `key_id` NOT
IN (

SELECT `key_id`
FROM `core_translate` AS C
GROUP BY `store_id`
ORDER BY `store_id`
)
GROUP BY `store_id`
ORDER BY C.`store_id`
)
ORDER BY store_id, `key_id` 
```

* * *

```
store_id    key_id  string  translate   locale
0   20  Screensize  Screensize  en_US
0   21  Gender  Gender  en_US
1   1   Size    Size    en_US
1   2   Color   Color   en_US
2   5   Large Image     Large Image     en_US
2   6   Medium Image    Medium Image    en_US
3   10  Manufacturer    Manufacturer    en_US
3   11  Dimensions  Dimensions  en_US
4   15  Description     Description     en_US
4   16  Weight  Weight  en_US 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T07:11:56.977

不确定这在 mysql 上是否可行，但你可以这样做。我假设`id`是用户 ID 并且`post_ID`是唯一的。

**编辑**

尝试解决mysql限制。

```
select id,name,post_Imagename_small,Image_title,post_ID from users u1
where u1.post_ID in (
    select u3.post_ID from (
        select u2.post_ID from users u2
        where u2.id = u1.id
        limit 2
    ) s u3
)
order by u1.id 
```

**编辑 2**

在答案不起作用的情况下，[这](http://www.xaprb.com/blog/2006/12/07/how-to-select-the-firstleastmax-row-per-group-in-sql/)是关于这类查询问题的一个很好的阅读，也有各种解决方法。

# android - 如何在 Android 中创建圆形 ImageView？

> ID：16208365
> 
> 赞同：255
> 
> 时间：2013-04-25T07:01:28.937
> 
> 标签：android, imageview, android-imageview, android-image

我怎样才能`ImageView`在 Android 中创建一个四舍五入？

我已经尝试了以下代码，但它不能正常工作。

代码：

```
Bitmap circleBitmap = Bitmap.createBitmap(bitmap.getWidth(), bitmap.getHeight(), Bitmap.Config.ARGB_8888);

BitmapShader shader = new BitmapShader (bitmap,  TileMode.CLAMP, TileMode.CLAMP);
Paint paint = new Paint();
paint.setShader(shader);

Canvas c = new Canvas(circleBitmap);
c.drawCircle(bitmap.getWidth()/2, bitmap.getHeight()/2, bitmap.getWidth()/2, paint);

imageView.setImageBitmap(circleBitmap); 
```

圆圈内的图像：

![在此处输入图像描述](https://i.stack.imgur.com/x8PhM.png)

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：432
> 
> 时间：2013-04-25T07:13:21.237

我也需要一个圆角的 ImageView，我使用了下面的代码，你可以相应地修改它：

```
import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.Bitmap.Config;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.graphics.PorterDuff.Mode;
import android.graphics.PorterDuffXfermode;
import android.graphics.Rect;
import android.graphics.drawable.BitmapDrawable;
import android.graphics.drawable.Drawable;
import android.util.AttributeSet;
import android.widget.ImageView;

public class RoundedImageView extends ImageView {

    public RoundedImageView(Context context) {
        super(context);
    }

    public RoundedImageView(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public RoundedImageView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
    }

    @Override
    protected void onDraw(Canvas canvas) {

        Drawable drawable = getDrawable();

        if (drawable == null) {
            return;
        }

        if (getWidth() == 0 || getHeight() == 0) {
            return;
        }
        Bitmap b = ((BitmapDrawable) drawable).getBitmap();
        Bitmap bitmap = b.copy(Bitmap.Config.ARGB_8888, true);

        int w = getWidth();
        @SuppressWarnings("unused")
        int h = getHeight();

        Bitmap roundBitmap = getCroppedBitmap(bitmap, w);
        canvas.drawBitmap(roundBitmap, 0, 0, null);

    }

    public static Bitmap getCroppedBitmap(Bitmap bmp, int radius) {
        Bitmap sbmp;

        if (bmp.getWidth() != radius || bmp.getHeight() != radius) {
            float smallest = Math.min(bmp.getWidth(), bmp.getHeight());
            float factor = smallest / radius;
            sbmp = Bitmap.createScaledBitmap(bmp,
                    (int) (bmp.getWidth() / factor),
                    (int) (bmp.getHeight() / factor), false);
        } else {
            sbmp = bmp;
        }

        Bitmap output = Bitmap.createBitmap(radius, radius, Config.ARGB_8888);
        Canvas canvas = new Canvas(output);

        final String color = "#BAB399";
        final Paint paint = new Paint();
        final Rect rect = new Rect(0, 0, radius, radius);

        paint.setAntiAlias(true);
        paint.setFilterBitmap(true);
        paint.setDither(true);
        canvas.drawARGB(0, 0, 0, 0);
        paint.setColor(Color.parseColor(color));
        canvas.drawCircle(radius / 2 + 0.7f, radius / 2 + 0.7f,
                radius / 2 + 0.1f, paint);
        paint.setXfermode(new PorterDuffXfermode(Mode.SRC_IN));
        canvas.drawBitmap(sbmp, rect, rect, paint);

        return output;
    }

} 
```

# c# - 发布excel实例

> ID：16208367
> 
> 赞同：1
> 
> 时间：2013-04-25T07:01:31.390
> 
> 标签：c#

如何发布为我的以下代码创建的 excel 实例？杀死 excel 实例。

```
Excel.Workbook Workbook1 = xCel.Workbooks.Open(ExcelFilePath);                
Excel.Workbook Workbook2 = xCel.Workbooks.Add();

foreach (Excel.Worksheet dummysheet in Workbook1.Worksheets)
{                 
  dummysheet.Copy(Workbook2.Worksheets[1],Type.Missing);
}
Workbook2.SaveAs(strFileCopyPath); 
```

//释放excel实例的代码

```
if (sourceWorkbook != null)
                {                   
                    sourceWorkbook = null;
                    destinationWorkbook = null;
                    Thread.Sleep(500);
                }
                if (status.ProcessID > 0)
                 {                    
                    Process p = Process.GetProcessById(status.ProcessID);
                    p.Kill();
                 }

                GC.Collect();
                GC.WaitForPendingFinalizers();
                GC.Collect();
                GC.WaitForPendingFinalizers();

                try { Marshal.FinalReleaseComObject(sourceWorkbook); }
                catch { }
                try { Marshal.FinalReleaseComObject(destinationWorkbook); }
                catch { } 
```

请检查这是否正确。

我知道这是重复的，我只要求你们检查这是否正确。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T07:06:31.757

**Can use following:**

```
GC.Collect();
GC.WaitForPendingFinalizers();
GC.Collect();
GC.WaitForPendingFinalizers(); 
```

# php - 在 PHP 中查询速度很慢，但在客户端中查询速度很快

> ID：16208368
> 
> 赞同：8
> 
> 时间：2013-04-25T07:01:31.983
> 
> 标签：php, mysql

我和我们的团队在 MySQL 查询中遇到了一个奇怪的问题。我们使用`SELECT`带有 a 的语句，`COUNT`出于某种原因，它在我们使用的客户端（SQLyog）中非常“快”，但是当我们使用 PHP 时它真的很慢。

我们尝试使用古老的 mysql_query()，mysqli 扩展，我们也尝试使用 PDO，但都没有任何区别。

在 Stackoverflow 上的其他帖子中，我们发现这可能是一个 DNS 问题，并且可以使用 my.ini 中的“skip_name_resolve”修复它，但我们已经在我们的配置中拥有了这个。

**定时结果：**

客户端：2.092 秒 PHP：9.1071 秒

**这是我们使用的查询：**

```
SELECT SQL_NO_CACHE
  COUNT(m.mm_id) AS total
FROM
  db.media_multimedia m
WHERE m.cat_id IN
  (SELECT
    mc.cat_id
  FROM
    db.media_multimedia_category mc
  WHERE mc.cat_active = 1)
  AND m.mm_published = 1
  AND (
    m.mm_title LIKE "%denniy%"
    OR m.mm_text LIKE "%denniy%"
    OR m.mm_id IN
    (SELECT
      a.mm_id
    FROM
      db.`media_tag_multimedia` a
      LEFT JOIN media.`media_tag` b
        ON a.`tag_id` = b.tag_id
    WHERE b.tag_name LIKE "%denniy%")
  )
  AND m.mm_publishing_date >= "2012-04-24 00:00:00"
  AND m.mm_publishing_date <= "2013-04-24 23:59:59" ; 
```

*注意：对于这个测试用例，我们将 SQL_NO_CACHE 添加到查询中，以确保我们始终获取新的结果集。*

我们使用以下 PHP 和 MYSQL 版本：

MySQL：5.1.61 PHP：5.3.3

有什么建议可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T07:17:44.963

我无法解释性能上的差异，但如果我不得不猜测，我会说以下一项或多项正在发挥作用：

*   由于不同的客户端连接，服务器正在以不同的方式优化您的查询，
*   SQLyog 和 PHP 客户端的不同位置可能是一个因素

就像我说的，只是猜测。

但无论如何，我已尝试按如下方式整理您的查询。我想知道这是否会表现得更好（并且更一致）？

```
SELECT SQL_NO_CACHE
  COUNT(m.mm_id) AS total

FROM
  db.media_multimedia m

  INNER JOIN db.media_multimedia_category mc
  ON m.cat_id = mc.cat_id
  AND mc.cat_active = 1

  LEFT JOIN db.media_tag_multimedia a
  ON m.mm_id = a.mm_id

  INNER JOIN media.media_tag b
  ON a.tag_id = b.tag_id

WHERE 
  m.mm_published = 1
  AND 
  (
    m.mm_title LIKE "%denniy%"
    OR 
    m.mm_text LIKE "%denniy%"
    OR 
    b.tag_name LIKE "%denniy%"
  )
  AND m.mm_publishing_date >= "2012-04-24 00:00:00"
  AND m.mm_publishing_date <= "2013-04-24 23:59:59" ; 
```

# php - 使用 mysqli 正确清理多个用户输入

> ID：16208369
> 
> 赞同：5
> 
> 时间：2013-04-25T07:01:33.397
> 
> 标签：php, security, mysqli, bind

我目前正在使用 mysqli，我想要一种方法来正确清理每个用户输入。我正在寻找最简单的轻量级方法来做到这一点，因为我知道我不应该使用 mysql_real_escape ....

我的查询是这样的

```
$stmt = $sql->prepare("INSERT INTO Persons (msg, ip, time, main, twit, city, lat, lon, lang)
VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)"); 
```

据我了解，我应该使用函数 bindParam ... 如果我这样使用它，我是否完全保护了我的用户输入？

```
$stmt->bind_param('sssssssss', $_POST[msg], ('$ip'), ('$date'), '$_POST[main]', '$_POST[twit]',  ('$cit'), ('$lat'), ('$lon'), '$_POST[lang]');
$stmt->execute();
$stmt->close(); 
```

如果这不能保护我的用户输入，我该如何正确地做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T07:06:42.503

您需要准备声明以确保安全。类似下面的东西（它可能不是 100%，但会给你一个想法）

```
 $sql = new mysqli("localhost", "my_user", "my_password", "world");

    $stmt = $sql->prepare("INSERT INTO Persons (msg, ip, time, main, twit, city, lat, lon, lang)
        VALUES
        (?, ?, ?, ?, ?, ?, ?, ?, ?)");
        $stmt->bind_param("sssssssss",$_POST[msg], $ip, $date, $_POST[main], $_POST[twit],  $cit, $lat, $lon, $_POST[lang]);
    $stmt->execute(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T07:58:16.893

首先你必须遵循基本的**PHP 语法**

`'$_POST[msg]'`将作为文字`$_POST[msg]`字符串插入，而您期望$_POST['msg'] 变量的*值*。

# kml - NMEA 到 KML 创建者 - 开源

> ID：16208370
> 
> 赞同：0
> 
> 时间：2013-04-25T07:01:36.733
> 
> 标签：kml, nmea

我正在寻找来自 NMEA 文件的开源 KML 创建者。我希望它在 c\cpp 中，但任何其他语言也可以。

（对于 Windows 或 Linux）

有谁知道这样的事情？（谷歌没有太大帮助）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-06T14:06:08.743

你可以看看[GPSBabel](http://www.gpsbabel.org/htmldoc-development/Source.html)，一个用于 GPS 格式转换的开源工具。您可以在 SourceForge 中找到代码：http: [//sourceforge.net/projects/gpsbabel/](http://sourceforge.net/projects/gpsbabel/)

# php - Cakephp ClassRegistry::init

> ID：16208372
> 
> 赞同：5
> 
> 时间：2013-04-25T07:01:53.273
> 
> 标签：php, cakephp

我有这个代码：

```
$userObj = ClassRegistry::init('User');
$userObj->contain();
$conditions = "User.studio_id = '".$studioID."' AND User.usergroup_id = 5";
$studioAdmin = $userObj->find($conditions); 
```

导致错误的是这一行：

```
$studioAdmin = $userObj->find($conditions); 
```

当我说错误时，它不会打印任何内容或任何错误警告，它只是停止它下面的代码，我注意到了一个，因为当我尝试`echo`它上面的代码时，它会打印它，但是当我尝试`echo`下面的代码时它，它不打印任何东西，

这里有什么问题。对你的帮助表示感谢！谢谢！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T12:53:28.410

在组件中加载模型的更好实践方法是通过控制器，并使用 loadModel()

在您的组件中，设置 initialize()

```
function initialize($controller, $settings) {
    $this->Controller =& $controller;
} 
```

然后在你的组件函数中，使用 loadModel 加载模型

```
$this->Controller->loadModel('Modelname');
$this->Modelname->save($data); 
```

也用于查找条件

```
$users = $this->Modelname->find('all', array(
   'conditions' => array(
       'User.studio_id'    => $studioID,
       'User.usergroup_id' => 5
   )
)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T12:19:10.650

你应该这样做：

```
$studioAdmin = $userObj->find('all', array( 'conditions' => $conditions ) ); 
```

您是否打开了 PHP 错误消息？您是否检查了日志以查看具体错误是什么？

此外，按照蛋糕标准，最好以这种方式构建您的条件条款：

```
$conditions = array(
                "User.studio_id" => $studioID,
                "User.usergroup_id" => 5"
              ); 
```

# javascript - 如何自定义iframe右键弹出

> ID：16208373
> 
> 赞同：0
> 
> 时间：2013-04-25T07:01:53.800
> 
> 标签：javascript, html, css, web-applications

我在我的应用程序中使用 iframe，如下所示，

示例.html

```
 <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
    <HTML>
    <HEAD>
    <TITLE> New Document </TITLE>
    <META NAME="Generator" CONTENT="EditPlus">
    <META NAME="Author" CONTENT="">
    <META NAME="Keywords" CONTENT="">
    <META NAME="Description" CONTENT="">
    </HEAD>
    <SCRIPT LANGUAGE="JavaScript">
    function rightclickdisabled()
    {
    View.document.designMode = 'On'; 
    window.frames["View"].document.oncontextmenu = function(){return false;}; 
    }
    </SCRIPT>
    <BODY onload="rightclickdisabled();">
    <iframe src="" id="View" name="View" style="height: 100px;width: 460px;border: 1px solid #A1A4B5;" />
    </BODY>
    </HTML> 
```

在这里，我禁用了 iframe 中的右键单击，它工作正常。现在我的问题是'是否可以自定义右键单击弹出菜单'？

我只需要剪切、复制、粘贴和选择弹出窗口中的所有选项。

如果我在 iframe 中禁用了右键单击，我将无法获得这些选项中的任何一个。

请帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T07:10:35.803

不，您不能自定义上下文菜单的内容。您可以完全抑制它，就像您正在做的那样，并且通过一些巨大的努力可以弹出一个带有自定义选项的模拟菜单，但是没有办法在该菜单中包含标准菜单项，如剪切/复制/粘贴，因为无法从 Javascript 触发它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T07:15:43.957

我为一家公司制作了这个插件。虽然它是用 jQuery 构建的。

```
;(function($){

 // We name the function clicker
 $.fn.clicker = function(options) {

     // Default settings - can be replaced by options
     var defaults = {
         mouse: "click"     // click is an event that contains both the mousedown and mouse up event in one.
     }

     // Extend the options and defaults to variables
     var opts = $.extend(defaults, options);

     // Now start the Function
     return this.each(function() {

         // The original element is defined with a variable
         var element = $(this);

         // We have to define the functions that has to react based on the option 'mouse'
         // So if it is - as standard - set to 'click'
         if (opts.mouse == "click") {

             // ... we want to do a 'click'-function (Basic jQuery)
             // when the element is clicked
             element.click(function(e) {

                 // ... we ensure which mouse button has been pressed
                 switch (e.which) {

                     // ... and execute a function based on that information

                     // Left Mouse Button
                     case 1: left_mouse_command(); break;

                     // Middle Mouse Button
                     case 2: middle_mouse_command(); break;

                     // Right Mouse Button
                     case 3: right_mouse_command(); break;

                 }

                 e.preventDefault();

             });

         // Else if 'mouse' is set to 'mouseup'
         } else if (opts.mouse == "mouseup") {

             // ... we want to do a 'mouseup'-function (Basic jQuery)
             // when the mouse is released from the element
             element.mouseup(function(e) {

                 // ... we ensure which mouse button has been pressed
                 switch (e.which) {

                     // ... and execute a function based on that information

                     // Left Mouse Button
                     case 1: left_mouse_command(); break;

                     // Middle Mouse Button
                     case 2: middle_mouse_command(); break;

                     // Right Mouse Button
                     case 3: right_mouse_command(); break;

                 }
                 e.preventDefault();
             });

         // Else if 'mouse' is set to 'mousedown'
         } else if (opts.mouse == "mousedown") {

             // ... we want to do a 'mousedown'-function (Basic jQuery)
             // when the mouse begins to click on the element
             element.mousedown(function(e) {

                 // ... we ensure which mouse button has been pressed
                 switch (e.which) {

                     // ... and execute a function based on that information

                     // Left Mouse Button
                     case 1: left_mouse_command(); break;

                     // Middle Mouse Button
                     case 2: middle_mouse_command(); break;

                     // Right Mouse Button
                     case 3: right_mouse_command(); break;

                 }
                 e.preventDefault();
             }); 
         }
     });
 }
 })(jQuery); 
```

然后你可以写一个这样的jquery代码：

```
$(document).ready(function() {
    $('.element').clicker();
});

function right_mouse_command() {
    // Maybe get coordinates from the mouse
    $('div.box').show();
} 
```

# extjs - Sencha touch 2.2 sql代理不插入数据

> ID：16208377
> 
> 赞同：1
> 
> 时间：2013-04-25T07:01:57.437
> 
> 标签：extjs, proxy, sencha-touch, sencha-touch-2

[我成功尝试了此处](http://miamicoder.com/2012/how-to-create-a-sencha-touch-2-app-part-4/)显示的 sencha touch 应用示例

他们使用存储代理类型作为**localstorage**，它工作得很好，然后我将代理类型更改为 sql，如下所示

```
Ext.define('notesApp.store.Notes', {
    extend : 'Ext.data.Store',
    requires : 'Ext.data.proxy.Sql',
    config : {
        model : 'notesApp.model.Note',
        proxy : {
            type : 'sql',
            database: "SqlProxyTest",
            table: "Notes",
            id : 'notes-app-store'
        },
        sorters : [{property : 'dateCreated', direction : 'DESC'}],
        grouper : {
            sortProperty : 'dateCreated',
            direction : 'DESC',
            groupFn : function(record) {
                if(record && record.data.dateCreated) {
                    return record.data.dateCreated.toString();
                }
                return '';
            }
        }
    }
}); 
```

没有错误。我可以插入数据，我可以在列表视图中看到记录，但 chrome 资源显示“节点表为空”。如果我刷新浏览器，记录就会从列表中消失。

![在此处输入图像描述](https://i.stack.imgur.com/zJfH1.png)

我错过了什么还是在 sencha touch 中使用 sql 代理的正确方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-28T18:40:55.483

如果您更改了模型（添加字段），则必须删除表并重新创建它。当您在数据存储中添加新行时，请务必放置所有字段。

例如，如果我有一个带有名字、姓氏、电子邮件的模型：

```
// This one is not added cause email is absent
       Ext.getStore('Users').add([{
          firstName: 'Toto',
          lastName: 'test',
       }]);

// This one is added
       Ext.getStore('Users').add([{
          firstName: 'toto',
          lastName: 'test',
          email : 'toto@test.te'
       }]); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T08:36:04.990

我犯的错误是，我为我试图插入的记录创建了 id，正如他们在演示示例中所示，当我**从**

```
 Ext.define("NotesApp.model.Note", {
    extend: "Ext.data.Model",
    config: {
        idProperty: 'id',
        fields: [
            { name: 'id', type: 'int' },
            { name: 'dateCreated', type: 'date', dateFormat: 'c' },
            { name: 'title', type: 'string' },
            { name: 'narrative', type: 'string' }
        ]
    }
}); 
```

**至**

```
 Ext.define('notesApp.model.Note', {
    extend : 'Ext.data.Model',
    config : {
        fields : [
            { name : 'dateCreated', type : 'string', dateFormat : 'D'},
            { name : 'title', type : 'string'},
            { name : 'narrative', type : 'string'}
        ],

        validations : [
            {type : 'presence', field : 'dateCreated'},
            {type : 'presence', field : 'title', message : 'Please enter a title for the note!'}
        ]
    }
}); 
```

一切正常。

# android - getInputStream 在 Android 的 Http Digest 身份验证期间给出 FileNotFoundException

> ID：16208393
> 
> 赞同：0
> 
> 时间：2013-04-25T07:03:07.623
> 
> 标签：android, api, http-digest

我正在尝试向具有 HTTP Digest 身份验证的 URL 发送 POST 请求。

我用[这个](http://read.pudn.com/downloads73/sourcecode/mobile/j2me/13232/HttpClient/src/com/enterprisej2me/HttpConnections/DigestAuthHandler.java__.htm)来做文摘。我可以理解，在这个机制中有两个步骤。在第一步中，客户端发送请求，服务器以质询响应。在第二步中，客户端将挑战合并到请求中并从服务器获取响应。使用上面提到的类，那件事可以正常工作。

我不得不将 HttpConnection 更改为 HttpURLConnection 以使其在 Android 中工作。

现在，我有了 DataConnection 类，它使用 Digest Auth 类来完成工作。课程如下：

```
import java.io.ByteArrayOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;
import java.net.HttpURLConnection;
import java.net.URL;

import org.json.JSONObject;

import android.content.ContentResolver;
import android.os.Build;
import android.util.Log;

public class DataConnection {

    private static DataConnection instance = null;
    DigestAuthHandler dah = new DigestAuthHandler("mytestusername",
            "myencryptedtestpassword");

    public static DataConnection getInstance() throws IOException {
        if (instance == null) {
            instance = new DataConnection();
        }
        return instance;
    }

    public HttpURLConnection getHttpConnection(String request_url)
            throws Exception {
        HttpURLConnection conn = (HttpURLConnection) new URL(request_url)
                .openConnection();

        conn.setAllowUserInteraction(false);
            conn.setInstanceFollowRedirects(true);
            conn.setChunkedStreamingMode(0);
        conn.setRequestProperty("User-Agent", System.getProperty("http.agent"));
        conn.setRequestProperty("Content-type",
                "application/x-www-form-urlencoded");
        conn.setRequestProperty("Accept",
                "application/json,text/html;q=0.9,text/plain;q=0.8,image/png,*/*;q=0.5");
        conn.setRequestProperty("Accept-Charset", "UTF-8;q=0.7,*;q=0.7");
        conn.setRequestProperty("Pragma", "no-cache");
        conn.setRequestProperty("Cache-Control", "no-cache");

//      if (Integer.parseInt(Build.VERSION.SDK) < Build.VERSION_CODES.FROYO)
//           System.setProperty("http.keepAlive", "false");

        return conn;
    }

    public String sendPost(String request_url, byte[] data) throws Exception {
        HttpURLConnection connection = null;
        InputStream is = null;
        OutputStream os = null;
        String responseData = "";
        boolean reconnect = true;
        while (reconnect) {
            try {
                connection = getHttpConnection(request_url);
                dah.prepareHeaders(connection,
                        request_url.substring(request_url.indexOf('/', 8)));
                connection.setRequestProperty("Content-Length", data.length
                        + "");
                connection.setDoOutput(true); // POST Method.
                connection.connect();               
                if (connection != null) {
                    os = connection.getOutputStream();
                    os.write(data);
                    os.flush();
                    reconnect = dah.processHeaders(connection);
                    int responseCode = connection.getResponseCode();
                    String responseMessage = connection.getResponseMessage();                   

                    is = connection.getInputStream();
                    int responseLength = (int) connection.getContentLength();

                    if (responseLength != -1) {                     
                        byte[] incomingData = new byte[responseLength];
                        is.read(incomingData);
                        responseData = new String(incomingData);
                    } else {
                        ByteArrayOutputStream bytestream = new ByteArrayOutputStream();
                        int ch;
                        while ((ch = is.read()) != -1) {
                            bytestream.write(ch);
                        }
                        responseData = new String(bytestream.toByteArray());
                        bytestream.close();
                    }
                }
            } catch (Exception exception) {
                throw exception;
            } finally {
                if (connection != null) {
                    connection.disconnect();
                }
                if (os != null) {
                    os.close();
                }
                if (is != null) {
                    is.close();
                }
            }
        }

        try {
            JSONObject responseJson = new JSONObject(responseData);
            Integer status = (Integer) responseJson.get("status");
            int val = status.intValue();
            if (val == 999999) {
                Log.e("Error 99999",
                        "Client application must be upgraded.");
            }
        } catch (Exception e) {
            e.printStackTrace();
        }
        return responseData;
    }
} 
```

在这里，我在方法调用`FileNotFoundException`期间获取 URL 。`getInputStream()`我已经多次验证我请求的 URL 和 Digest Auth 的凭据是 100% 正确的。

请帮忙。

问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T10:33:08.903

The above problem was solved by checking for a blank connection. The problem was that, the connection was blank, but I was trying to call connection.getInputStream() hence it gave error.

# mongodb - 是否可以直接将MongoDB从2.0升级到2.4

> ID：16208396
> 
> 赞同：2
> 
> 时间：2013-04-25T07:03:16.070
> 
> 标签：mongodb

我们在生产中有一个包含 2 个成员和一个仲裁器的副本集。10gen 文档指出 2.0 到 2.2 是二进制兼容的“插入式”升级，因此它是 2.2 到 2.4。从 2.0 版本直接升级到 2.4 版本是否安全？

# selenium-ide - 如何单击 Selenium IDE 中的数据网格行

> ID：16208401
> 
> 赞同：0
> 
> 时间：2013-04-25T07:03:32.283
> 
> 标签：selenium-ide

我有一个网页和一个网格。

我想在 Selenium IDE 中单击网格中的一个单元格。

但这段代码不起作用。

```
 selenium.click("//tr[@id='row8']/td[2]"); 
```

太感谢了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T07:21:27.317

尝试这个。

```
<tr>
    <td>clickAndWait</td>

    <td>id=cellid </td>

    <td></td>
</tr> 
```

在目标定位器字段中给出 id、name、css 或 xpath

# jquery - 使用 animate() 从右向左滑动 div

> ID：16208402
> 
> 赞同：10
> 
> 时间：2013-04-25T07:03:37.287
> 
> 标签：jquery, jquery-animate

我想要一个 div`'.whole'`动画（从右向左滑动）

jQuery

```
$('#menu').click(function() {
      $('.whole').toggleClass('r2');
      $('#slideMenu').toggle();
});

.r2 { right: 200px } 
```

我无法正确使用函数 animate()。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-25T07:07:01.140

这应该有效：

```
$('#menu').click(function(event) {
      event.preventDefault(); // because it is an anchor element
      $('.whole').animate({
          right: '200px'
      });
      $('#slideMenu').toggle();
}); 
```

但是你的`position`属性应该已经在 CSS 中设置了，否则你可能无法得到你需要的东西。

[工作 JSFiddle](http://jsfiddle.net/Abs5H/6/)

解释一下：该函数接受一个属性的 JS 对象，如下所示：

```
{
    right: '200px',
    somethingElse: 'value',
    myboolean: true
} 
```

您还可以将其分配给 var 并将其传递给`animate`：

```
var cssProperties = { right: '200px' }

$('#menu').click(function() {
  $('.whole').animate(cssProperties);
}); 
```

[您可以传递文档](http://api.jquery.com/animate/)中可读的其他论点。

# android - Android 地图 API V2 强制关闭

> ID：16208404
> 
> 赞同：0
> 
> 时间：2013-04-25T07:03:47.717
> 
> 标签：android

我想制作一个谷歌地图应用程序，但出现强制关闭错误。我已经添加了所有权限和谷歌播放服务等。我还为此创建了一个特定的 AVD，但我仍然收到强制关闭错误......所以请帮助我......:-)

这是我的 MainActivity.java 文件。

```
package com.example.mapdemo;

import com.google.android.gms.common.ConnectionResult;
import com.google.android.gms.common.GooglePlayServicesUtil;
import com.google.android.gms.maps.GoogleMap;
import com.google.android.gms.maps.SupportMapFragment;

import android.app.AlertDialog;
import android.os.Bundle;
import android.support.v4.app.FragmentActivity;
import android.support.v4.app.FragmentManager;
import android.view.Menu;
import android.view.MenuItem;
import android.widget.Toast;

public class MainActivity extends FragmentActivity {

 final int RQS_GooglePlayServices = 1;
 private GoogleMap myMap;

 @Override
 protected void onCreate(Bundle savedInstanceState) {
  super.onCreate(savedInstanceState);
  setContentView(R.layout.activity_main);

   FragmentManager myFragmentManager = getSupportFragmentManager();
   SupportMapFragment mySupportMapFragment 
    = (SupportMapFragment)myFragmentManager.findFragmentById(R.id.map);
   myMap = mySupportMapFragment.getMap();

   myMap.setMyLocationEnabled(true);
 }

} 
```

这是我的 activity_main.xml 文件。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:text="@string/hello_world" />
    <fragment
        android:id="@+id/map"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        class="com.google.android.gms.maps.SupportMapFragment"/>

</RelativeLayout> 
```

这是我的 Google_Map 清单文件。

```
<?xml version="1.0" encoding="utf-8"?>

    <manifest xmlns:android="http://schemas.android.com/apk/res/android"
        package="com.example.mapdemo"
        android:versionCode="1"
        android:versionName="1.0" >

        <uses-sdk
            android:minSdkVersion="8"
            android:targetSdkVersion="17" />
        <uses-permission android:name="android.permission.INTERNET"/>
         <uses-permission 
            android:name="com.example.mapdemo.permission.MAPS_RECEIVE"/>
         <uses-permission 
            android:name="com.example.mapdemo.permission.MAPS_RECEIVE"/>
         <uses-permission 
            android:name="com.google.android.providers.gsf.permission.READ_GSERVICES">

         </uses-permission>
         <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
         <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
         <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>

        <uses-feature
            android:glEsVersion="0x00020000"
            android:required="true"/>

        <application
            android:allowBackup="true"
            android:icon="@drawable/ic_launcher"
            android:label="@string/app_name"
            android:theme="@style/AppTheme" >
            <uses-library android:name="com.google.android.maps" />

            <meta-data
    android:name="com.google.android.maps.v2.API_KEY"
    android:value="AIzaSyAjbIPh-1-2yzgbsjWMHHZM8MbD9c6hrbY"/>
            <activity
                android:name="com.example.mapdemo.MainActivity"
                android:label="@string/app_name" >
                <intent-filter>
                    <action android:name="android.intent.action.MAIN" />

                    <category android:name="android.intent.category.LAUNCHER" />
                </intent-filter>
            </activity>
        </application>

    </manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T07:25:30.143

您使用两次：

```
<uses-permission 
            android:name="com.example.mapdemo.permission.MAPS_RECEIVE"/> 
```

尝试使用：

```
<permission android:name="com.example.mapdemo.permission.MAPS_RECEIVE" android:protectionLevel="signature"/>
<uses-permission android:name="com.example.mapdemo.permission.MAPS_RECEIVE"/> 
```

此外，您无法在 Android 模拟器上测试 google map api V2：http: [//developer.android.com/google/play-services/setup.html](http://developer.android.com/google/play-services/setup.html)

> 注意：Android 模拟器不支持 Google Play 服务——要使用 API 进行开发，您需要提供开发设备，例如 Android 手机或平板电脑。

您必须在真实设备上测试您的代码。如果您没有任何设备，您可以测试这个非官方的解决方案：[在 Android 模拟器上运行 Google Maps v2](https://stackoverflow.com/questions/14040185/running-google-maps-v2-on-android-emulator/14271933#14271933)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-20T06:37:09.133

**尝试改变：**

`class="com.google.android.gms.maps.SupportMapFragment"/>`

**至**

`class="com.google.android.gms.maps.MapFragment"/>`

它对我有用。

# c# - Sharing of Session between 2 web application in asp.net

> ID：16208406
> 
> 赞同：1
> 
> 时间：2013-04-25T07:03:52.053
> 
> 标签：c#, asp.net, session-state

I want sharing of session between my 2 web application.web config of my both application have same machineKey but it is not working for sharing of session.Is there any other options?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T07:08:03.160

检查这个，这是可能的，但不推荐。您需要使用 sessionState SQLServer 来实现这一点。

[使用 ASP.NET 会话状态服务跨应用程序共享会话](https://stackoverflow.com/questions/2868316/sharing-sessions-across-applications-using-the-asp-net-session-state-service)

但我建议创建一个表并在其中存储值并以老式方式访问它。最终 sessionState SQLServer 也在做同样的事情。

# java - escape all characters from list in Java

> ID：16208410
> 
> 赞同：0
> 
> 时间：2013-04-25T07:04:02.623
> 
> 标签：java, design-patterns

I want escape all characters from list. In js it is:

```
function escapeRegExp(str) {
  return str.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g, "\\$&");
} 
```

How I can do it in Java?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T07:22:27.870

如果要从字符串创建文字模式，可以使用`java.util.regex.Pattern.quote(String s)`.

# http - Testing multiple mac/ip adresses connections

> ID：16208415
> 
> 赞同：0
> 
> 时间：2013-04-25T07:04:08.957
> 
> 标签：http, networking, testing

I'm building client-server software (some sort of http Rest API)

And there is a throttling module that prevents one IP to do more then N requests/second

I want to do stress testing of the system - so that I can emulate 100-1000 connections from different IP(or MAC) addresses (from hardware I have only boxes in one network)

What tools or scripts can I use for this case ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T07:58:37.943

你当然需要一个流量生成器，尝试使用这个：[http ://robert.rsa3.com/traffic.html](http://robert.rsa3.com/traffic.html)

# sql - SQL Server - 如何获取自己服务器的 IP？

> ID：16208418
> 
> 赞同：3
> 
> 时间：2013-04-25T07:04:42.490
> 
> 标签：sql, sql-server

我看到可以使用 Manangement Studio 中的 IP 连接到远程 SQL 服务器。现在我想允许远程访问我计算机上的数据库。如何找出我自己的 SQL 服务器的 IP，以便我可以使用该 IP 远程登录？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T07:06:31.213

试试这个——

```
SELECT 
      client_net_address = CASE WHEN client_net_address = '<local machine>' 
                                THEN '127.0.0.1' 
                                ELSE client_net_address 
                           END  
    , local_net_address = ISNULL(local_net_address, '127.0.0.1')
    , server_name = @@SERVERNAME
    , machine_name = SERVERPROPERTY('MachineName')
FROM sys.dm_exec_connections
WHERE session_id = @@SPID; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T07:09:03.627

试试这个。

```
SELECT @@SERVERNAME; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T07:58:32.317

您可以 Ping 您的计算机名称。不要 ping “localhost”，因为这会给你 127.0.0.1。你可以去“ping my-pc”，它会通过你的DNS服务器解析你的IP地址。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T07:06:49.287

访问此地址以获取 Google 看到的您的公共 IP 地址。

[https://www.google.com/search?q=what+is+my+ip](https://www.google.com/search?q=what+is+my+ip)

注意：您可能需要打开路由器上的端口并打开防火墙中的端口才能远程连接。此外，您的 SQL 服务器可能仅绑定到您的 localhost 127.0.0.1 地址。您可能需要查看说明以接受服务器的所有 IP 地址上的连接。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-09-20T14:01:51.923

```
DECLARE @IPAdress NVARCHAR(50)=''
SELECT @IPAdress = CASE WHEN dec.client_net_address = '<local machine>'
    THEN (SELECT TOP(1) c.local_net_address FROM
        sys.dm_exec_connections AS c WHERE c.local_net_address IS NOT NULL)
    ELSE dec.client_net_address
    END FROM sys.dm_exec_connections AS dec WHERE dec.session_id = @@SPID;
SELECT @IPAdress 
```

# android - Memory overflow when loading large textures

> ID：16208419
> 
> 赞同：0
> 
> 时间：2013-04-25T07:04:47.077
> 
> 标签：android, opengl-es, renderer, glsurfaceview

I have a GLSurfaceView and a Renderer which loads textures in `onSurfaceCreated`. My textures are created like so :

```
public Texture3D(final GL10 gl, final int id) {
    _pBitmap = BitmapFactory.decodeResource(Utils.getResources(), id);
    gl.glEnable(GL10.GL_TEXTURE_2D);

    gl.glHint(GL10.GL_PERSPECTIVE_CORRECTION_HINT, GL10.GL_NICEST);
    texture = newTextureID(gl);
    gl.glBindTexture(GL10.GL_TEXTURE_2D, texture);
    gl.glTexParameterx(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_WRAP_S, GL10.GL_CLAMP_TO_EDGE);
    gl.glTexParameterx(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_WRAP_T, GL10.GL_CLAMP_TO_EDGE);
    gl.glTexParameterx(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_MIN_FILTER, GL10.GL_LINEAR);
    gl.glTexParameterx(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_MAG_FILTER, GL10.GL_LINEAR);

    gl.glBlendFunc(GL10.GL_SRC_ALPHA, GL10.GL_ONE_MINUS_SRC_ALPHA);

    GLUtils.texImage2D(GL10.GL_TEXTURE_2D, 0, _pBitmap, 0);

    _pBitmap.recycle();     
    _pBitmap = null;

    gl.glEnable(GL10.GL_BLEND);
} 
```

I store them in an HashMap :

```
textures.put(R.drawable.tile, new Texture3D(gl, R.drawable.tile)); 
```

My problem is when I create a texture from a large image (720x1280, 561 Ko) after I sometimes get the following error :

```
04-24 11:05:19.870: D/dalvikvm(27953): GC_CONCURRENT freed 26K, 18% free 50397K/60743K, paused 18ms+6ms, total 57ms
04-24 11:05:19.870: D/dalvikvm(27953): WAIT_FOR_CONCURRENT_GC blocked 2ms
04-24 11:05:19.895: D/dalvikvm(27953): GC_FOR_ALLOC freed 7K, 18% free 50390K/60743K, paused 25ms, total 25ms
04-24 11:05:19.900: I/dalvikvm-heap(27953): Forcing collection of SoftReferences for 14745616-byte allocation
04-24 11:05:19.940: D/dalvikvm(27953): GC_BEFORE_OOM freed 10K, 18% free 50380K/60743K, paused 41ms, total 41ms
04-24 11:05:19.940: E/dalvikvm-heap(27953): Out of memory on a 14745616-byte allocation.
04-24 11:05:19.940: I/dalvikvm(27953): "GLThread 11210" prio=5 tid=35 RUNNABLE
04-24 11:05:19.940: I/dalvikvm(27953):   | group="main" sCount=0 dsCount=0 obj=0x42ec2008 self=0x6095d078
04-24 11:05:19.940: I/dalvikvm(27953):   | sysTid=29199 nice=0 sched=0/0 cgrp=apps handle=1623155456
04-24 11:05:19.940: I/dalvikvm(27953):   | schedstat=( 142147207 17456123 110 ) utm=11 stm=2 core=2
04-24 11:05:19.940: I/dalvikvm(27953):   at android.graphics.BitmapFactory.nativeDecodeAsset(Native Method)
04-24 11:05:19.945: I/dalvikvm(27953):   at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:623)
04-24 11:05:19.945: I/dalvikvm(27953):   at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:476)
04-24 11:05:19.945: I/dalvikvm(27953):   at android.graphics.BitmapFactory.decodeResource(BitmapFactory.java:499)
04-24 11:05:19.945: I/dalvikvm(27953):   at android.graphics.BitmapFactory.decodeResource(BitmapFactory.java:529)
04-24 11:05:19.945: I/dalvikvm(27953):   at com.gbanga.opengl.Texture3D.<init>(Texture3D.java:73)
04-24 11:05:19.945: I/dalvikvm(27953):   at com.gbanga.opengl.Texture3D.setupTextures(Texture3D.java:169)
04-24 11:05:19.945: I/dalvikvm(27953):   at com.gbanga.opengl.OpenGLRenderer.onSurfaceCreated(OpenGLRenderer.java:440)
04-24 11:05:19.950: I/dalvikvm(27953):   at android.opengl.GLSurfaceView$GLThread.guardedRun(GLSurfaceView.java:1494)
04-24 11:05:19.950: I/dalvikvm(27953):   at android.opengl.GLSurfaceView$GLThread.run(GLSurfaceView.java:1240) 
```

That points to the first line of the constructor where I use `BitmapFactory.decodeResource`. On my Galaxy S3 I get the error when I switch to another fragment and then I come back to the fragment that displays the `GLSurfaceView` (`onPause` and `onResume` are called on the `GLSurfaceView`).

How can I avoid this problem ? I tried [this solution](https://stackoverflow.com/a/12384524/1304830) but I lose too much quality and in rare case the bug happens anyway (probably on old phones models).

Is there something wrong how I create / store my textures ? Also do you know why I don't always get this error ? (generally I get it the second time I load the textures).

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T07:48:36.497

您是否熟悉： http: [//developer.android.com/training/displaying-bitmaps/load-bitmap.html](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html) 较新的 Android 具有清单参数：largeHeap=true

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T07:21:25.450

您可以尝试通过从 Android 虚拟设备管理器编辑 AVD 来增加 VM 堆的大小...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T08:30:05.213

如果您的应用程序将处理大量大型纹理，并且如果您想支持旧型号的手机，那么在本机端进行 opengl 处理可能更有利。

NDK 中的 hello-gl2 示例显示了如何做到这一点。在本机方面，您将不受应用程序虚拟机强制执行的限制（但是，您应该确保正确管理内存并且不会导致任何泄漏，因为即使用户关闭您的活动，该进程也会继续运行）

# c++ - 使用特定库的功能

> ID：16208422
> 
> 赞同：4
> 
> 时间：2013-04-25T07:04:58.420
> 
> 标签：c++, c

我有一个问题：我想使用`abs`库的功能`complex`。

但是，我遇到错误警告我`abs`使用的功能是`#define abs(x) (x > 0) ? x : -(x)`.

因此，我认为问题来自我的进口。因为我还包含了 stdio 和 stdlib 库，所以编译器可以使用`abs`这些库之一中定义的函数。

所以我的问题是：如何在不删除任何导入的情况下使用`abs`库的功能？`complex`

非常感谢您的回复。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-25T07:07:39.477

用括号包裹它。

```
(abs)(whatever); 
```

这将强制编译器使用函数版本，因为宏不再匹配。

类似函数的宏通过匹配标识符后跟左括号来工作`(`。由于我们将函数名称本身包装在括号中，因此我们有一个标识符后跟一个右括号`)`，它无法匹配宏。括号在语义上是透明的，但它们抑制了宏语法。

IIRC，是`splint`C 检查器教给我的。在编写 postscript 解释器时，我创建了很好的短宏来访问堆栈。

```
#define push(o) (*tos++ = (o))
#define pop() (*--tos) 
```

在它们成为表达式的一部分的棘手部分之前，这很棒`tos`。为了避免未定义的行为，我必须创建函数版本并将其用于那些棘手的地方。对于新设计，我完全跳过了宏。

* * *

编辑：我有一种挥之不去的感觉，实际上是我在 Coelocanthe 书（Peter Van Der Linden 的*Deep C Secrets*）中学到了这一点，上述情况是我第一次*需要*它的地方。IIRC 他的示例涉及`putchar`或`getchar`通常作为符合 C 实现的函数和宏来实现。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-25T07:09:10.653

采用`#undef`

```
#include "header1.h"
#include "header2.h"
#undef abs // remove abs macro

x = std::abs(y); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-25T07:43:16.280

虽然上面的几个建议非常好，但我会采取完全不同的角度。几乎可以肯定，类似`windows.h`的事情会导致`abs()`. 您应该不能在执行复杂数学运算的文件中包含“windows.h”[至少在大多数类型的程序中]（我不知道 Windows 中有一个函数`complex<T>`作为参数，所以我'很确定你不需要在同一个源文件中同时使用“complex.h”和“windows.h”。这种方法称为“隔离系统依赖项”，这样做是一件非常好的事情。

查看您的代码，找到您实际使用 Windows 函数的位置，然后仅在实际需要它的文件中包含“windows.h”。如果您使用 Visual Studio，您可能会发现“windows.h”作为“stdafx.h”的一部分包含在内，这意味着所有有趣的宏等都包含在所有地方，因为“stdafx .h" 包含在所有源文件中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-25T07:16:47.357

和括号解决方案都`#undef`可以工作，但我建议有一些更强大的东西，因为这两种解决方案都需要你每次想要调用时都这样做`abs`，下次你可能会忘记并导致错误。

你可以做什么：

1.  将您的函数名称更改为不太常见的名称 :`absolute`等`myAbs`...
2.  将您的函数\类放在名称空间下（对于 C++ 而不是 C），那么调用是显式的`myNameSpace::abs(x)`
3.  如果它不能像这里的评论建议的那样工作，我仍然会在我的函数中扭曲调用：

    键入 myAbs（类型参数）{ 返回（绝对值）（参数）；}

# php - 如何在我们的文件中使用 ajax 调用的 php 输出

> ID：16208423
> 
> 赞同：0
> 
> 时间：2013-04-25T07:04:58.720
> 
> 标签：php, jquery, ajax

我有一个将纬度、经度值发送到我的 postgresql 数据库的应用程序。我想使用 jquery，ajax 在我的 OpenLayers 地图上相应地绘制更新点。但这是我坚持的地方：当我单击按钮时，正在发生具有数据库连接并将表的最后一个条目保存在数组中的 php 文件。

但是当我尝试在标记中使用输出时，什么都没有发生。

如何在我的函数中使用 php 的输出值？

这是我尝试使用的代码。

.php 文件：

```
<?php
$conn = pg_connect("host=xxx port=xxx dbname=xx user=postgres password=xxx");
$result = pg_exec($conn,"Query goes here");
$numrows = pg_numrows($result);
for($ri = 0; $ri < $numrows; $ri++)
{
$row = pg_fetch_array($result, $ri);
$data = array(); // create a variable to hold the information
  $lat_latest[] = $row["latitude"];
$long_latest[] = $row["longitude"];  // add the row in to the results (data) array
}
pg_close($conn);
$js_lat = json_encode($lat_latest);
echo "var javascript_lat1 = ". $js_lat . ";\n";
$js_long = json_encode($long_latest);
echo "var javascript_long1 = ". $js_long . ";\n";
?> 
```

我的页面代码是：

```
function init(){
//openlayers map code is here.
    $("button").click(function(){
    $.get("dataconn.php",function(data,status){

    alert("Data:"+data+"Status:" +status);
    var extra_point = new OpenLayers.Feature.Vector(
     new OpenLayers.Geometry.Point(parseFloat(javascript_long1[0]),parseFloat(javascript_lat1[0])),
     {some:'data'},
     {externalGraphic: 'images1/marker-gold.png', graphicHeight: 16, graphicWidth: 16});
     vectorLayer1.addFeatures([extra_point]);
    });
    });
    }
    </script>
    </head>
    <body onload='init();'>
    <div id="map" style = 'width: 1075px; height: 485px'>
    <button> Update </button>
    </div> 
```

单击更新按钮时我收到的警报是

```
Data: 
var javascript_lat1 = ["output of the query"];
var javascript_long1 = ["output of the query"];
Status : success 
```

我尝试访问查询输出值的方式是否正确？请帮忙。对不起，如果这是一个愚蠢的问题。我是 jquery 的新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T07:11:29.953

当您的 php 脚本发送如下字符串时：

```
'var javascript_lat1 = ["output of the query"];' 
```

回到您的代码，这并不意味着您的代码中有一个名为 javascript_lat1 的变量。

您的 php 脚本正在将*字符串*发送回您的 javascript 代码，您必须从中提取要在代码中使用的信息。知道字符串的格式取决于您的 javascript 代码。但是由于您编写了 php 脚本，您可以将字符串以您想要的任何格式发回。然后，您的 javascript 代码可以使用正则表达式、split() 等剖析字符串，以提取您想要在代码中使用的字符串部分。您的 php 代码可以使用的一种非常简单的格式是：

```
"output of query 1, output of query 2" 
```

然后您可以使用逗号 split() 来分隔两条数据，例如：

```
var pieces = data.split(', '); 
```

然后你可以在你的javascript代码中使用pieces[0]和pieces[1]。

另一种选择是使用 $.getJSON() 函数向您的 php 脚本发送请求。如果你这样做，你的 php 脚本应该发回一个 json 格式的字符串，例如：

```
"{lat1: 'blah blah blah', long1: 'foo bar foo bar'}" 
```

然后 $.getJSON() 函数会自动将字符串转换为 javascript 对象并将 js 对象传递给您的回调函数。在回调函数中，您可以使用以下方式访问数据：

```
some_func(data.lat1, data.long1); 
```

# iphone - 在iphone中切换到不同的网络模式

> ID：16208428
> 
> 赞同：0
> 
> 时间：2013-04-25T07:05:16.383
> 
> 标签：iphone

我正在制作一个用户点击按钮的应用程序，然后如果他已经在蜂窝网络中，则切换到“wifi”网络。

如果用户在“wi-fi”网络中，则切换到“蜂窝”网络。但是如何检测网络的类型？以及如何检测可用的不同**类型**的网络？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T07:23:29.083

对于检测网络，您可以参考这篇文章

[http://iostipsntricks.wordpress.com/tag/detect-network-connection-in-ios/](http://iostipsntricks.wordpress.com/tag/detect-network-connection-in-ios/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T07:13:54.803

[Reachability](http://developer.apple.com/library/ios/#samplecode/Reachability/) can help to detect type of network, but it seems no public API for switching the network in Apple's Documents.

# batch-file - 如何使用批处理替换主机文件中的字符串？

> ID：16208429
> 
> 赞同：2
> 
> 时间：2013-04-25T07:05:19.227
> 
> 标签：batch-file, edit, hosts, hosts-file

我正在尝试编写一个批处理文件来查找和替换主机文件中的 IP 地址。

我做了一些研究并发现了这一点，但它似乎不起作用。我得到了“完成”的最后回声。但它不起作用。

```
@echo off

REM Set a variable for the Windows hosts file location
set hostpath=%systemroot%\system32\drivers\etc
set hostfile=hosts

REM Make the hosts file writable
attrib -r %hostpath%\%hostfile%

setlocal enabledelayedexpansion
set string=%hostpath%\%hostfile%

REM set the string you wish to find
set find=OLD IP

REM set the string you wish to replace with
set replace=NEW IP
call set string=%%string:!find!=!replace!%%
echo %string%

REM Make the hosts file un-writable
attrib +r %hostpath%\%hostfile%

echo Done. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T08:35:27.207

您发布的代码只是试图替换文件名中的值，而不是文件内容中的值。

您需要更改代码才能在文件内容中查找和替换。

为此，您需要 (1) 读取文件 (2) 查找并替换字符串以及 (3) 回写

1.  你必须阅读文件。使用`FOR`命令。阅读`HELP FOR`并尝试以下代码。

    ```
    for /f "tokens=*" %%a in (%hostpath%\%hostfile%) do (
      echo %%a
    ) 
    ```

2.  查找和替换

    ```
    for /f "tokens=*" %%a in (%hostpath%\%hostfile%) do (
      set string=%%a
      set string=!string:%find%=%replace%!
      echo !string!
    ) 
    ```

3.  您必须将结果写回文件。将 echo 的输出重定向到临时文件，然后用临时文件替换原始文件

    ```
    echo. >%temp%\hosts
    for /f "tokens=*" %%a in (%hostpath%\%hostfile%) do (
      set string=%%a
      set string=!string:%find%=%replace%!
      echo !string! >>%temp%\hosts
    )
    copy %temp%\hosts %hostpath%\%hostfile% 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T08:25:54.373

```
@echo off

REM Set a variable for the Windows hosts file location
set "hostpath=%systemroot%\system32\drivers\etc"
set "hostfile=hosts"

REM Make the hosts file writable
attrib -r -s -h "%hostpath%\%hostfile%"

REM set the string you wish to find
set find=OLD IP
REM set the string you wish to replace with
set replace=NEW IP

setlocal enabledelayedexpansion
for /f "delims=" %%a in ('type "%hostpath%\%hostfile%"') do (
set "string=%%a"
set "string=!string:%find%=%replace%!"
>> "newfile.txt" echo !string!
)

move /y "newfile.txt" "%hostpath%\%hostfile%"

REM Make the hosts file un-writable - not necessary.
attrib +r "%hostpath%\%hostfile%"

echo Done.
pause 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-25T08:21:09.163

这将起作用。

```
call set newstring=%string:%find%=%replace%% 
```

将结果值分配给新字符串。

# mysql - 检索最近两天的记录

> ID：16208431
> 
> 赞同：-2
> 
> 时间：2013-04-25T07:05:19.983
> 
> 标签：mysql, codeigniter

如何在此处获取最近两天的记录是我的查询，但出现错误。

```
function getbdologHistoryByRefManuals($obj)
{
    $this->db->select('bdo_logs.*,transaction_statuses.status');
    $this->db->from('bdo_logs');
    $this->db->join('transactions','transactions.id=bdo_logs.id');
    $this->db->join('transaction_statuses','transaction_statuses.id=transactions.trans_status_id');
    $this->db->where('log_date >', ADDDATE( CURDATE( ) , INTERVAL -2 DAY ));

    $query = $this->db->get();

    //echo $this->db->last_query();
    if($query->num_rows() == 0){
        return null;
    }

            return $query->result();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T07:07:45.933

```
function getbdologHistoryByRefManuals($obj)
{
    $this->db->select('bdo_logs.*,transaction_statuses.status');
    $this->db->from('bdo_logs');
    $this->db->join('transactions','transactions.id=bdo_logs.id');
    $this->db->join('transaction_statuses','transaction_statuses.id=transactions.trans_status_id');
    $this->db->where('DATE(log_date) >', 'ADDDATE( CURDATE( ) , INTERVAL -2 DAY )');

    $query = $this->db->get();

    if($query->num_rows() == 0){
        return null;
    }

    return $query->result();
} 
```

您缺少在 where 子句中包装 ADDDATE 函数

编辑：
或者你可以这样称呼它

```
$query  ="  SELECT
                bdo_logs.*,
                transaction_statuses.status
            FROM bdo_logs
            JOIN transactions 
                ON transactions.id  =   bdo_logs.id
            JOIN transaction_statuses 
                ON transaction_statuses.id  =   transactions.trans_status_id
            WHERE DATE(log_date) > ADDDATE( CURDATE( ) , INTERVAL -2 DAY )";
$result = $this->db->query($query); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T08:22:50.440

简单的方法：

```
$today = date('Y-m-d');
$newdate = date('Y-m-d', strtotime("-2 days"));
echo $today;
echo '<br />';
echo $newdate; 
```

现在，放入`$newdate`where 条件。

# php - CodeIgniter File Upload overwrite FALSE (default) auto-rename issue

> ID：16208432
> 
> 赞同：2
> 
> 时间：2013-04-25T07:05:22.243
> 
> 标签：php, codeigniter, file-upload

There is an error message in CodeIgniter

> The file name you submitted already exists on the server

Does that make any sense? Let me explain.

There is a preference in [File Uploading Class](http://ellislab.com/codeigniter/user-guide/libraries/file_uploading.html) preferences called "overwrite". It can be TRUE or FALSE. The default value is FALSE. If it's TRUE, then the file will be overwritten. If it's FALSE, then a number will be appended to the filename if another with the same name exists. So, either it'll overwrite the file or it will rename the file. How is it possible to get the above error?

So, it looks like CodeIgniter is unable to rename the files properly.

I looked at my database and found how CodeIgniter has renamed the files. Though there are no other file exists with the same name, some of the filenames are appended an underscore ( _ ), but no number after that. I also found that when I tried to upload a file with file name as "myfilename.zip" several times, "myfilename_.zip", "myfilename_1.zip", "myfilename_2.zip" ... "myfilename_11.zip" found at the upload path. But "myfilename.zip" is not found there and instead of creating "myfilename_12.zip", it showed me the above error.

So, where is the issue? How to solve this?

**Update:** Now I understood why I am getting the error message `The file name you submitted already exists on the server`. The mechanism to check whether any file with the same name exists work for 100 files. It checks whether any file with the same name exists, if found, then it appends a number to filename and check again. This happens 100 times. If still a file with the same name found, it stops, so that the execution of the script will not take much time. So, we can say there is a limit and 100 is a good limit.

But I am still looking for the answer, why some files are appended an underscore, some with an underscore and then a number, and some with just the number. There is no consistency with the pattern to append a number to the files, if another file with the same name exists.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-18T10:04:26.330

我通过设置解决了这个问题`$config['encrypt_name'] = TRUE`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T07:49:23.747

> 我查看了我的数据库，发现 CodeIgniter 是如何重命名文件的。虽然不存在同名的其他文件，但有些文件名附加了下划线 (_)，但后面没有数字

发生这种情况是因为默认情况下，下面的选项将空格更改为下划线...如果您想保留空格，请将其更改为 FALSE。

```
remove_spaces   TRUE 
```

关于您的`"The file name you submitted already exists on the server"`信息-您将不得不做类似...

```
if($_FILES['image']['error'] == 0){
   $file_name = $_FILES['image']['name'];
   if(file_exists($upload_dir.$file_name)) {
      show_error('The file name you submitted already exists on the server!');
   } else {
      //do_upload() etc
   }
} 
```

我还没有测试过这段代码，但它应该会给你一些想法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T07:39:44.660

您还没有将代码放在这里。但是，我认为您已使用 [file_name] 索引将文件名设置为固定文件名，并对其进行了约束。

# java - 访问任意枚举的 .values() 和 .ordinal() 方法？

> ID：16208434
> 
> 赞同：7
> 
> 时间：2013-04-25T07:05:56.693
> 
> 标签：java

我想要一个模拟 EnumMap 的类，但存储 int 值而不是某种对象。现在显然你可以制作一个映射到整数的 EnumMap，但如果可以的话，我想避免很多自动装箱。

所以我想要这样的课程：

```
public class EnumIntAttributeMap
{
    enum Attribute
    {
        Height, Weight;
    }

    private final int[] values;

    public EnumIntAttributeMap()
    {
        this.values = new int[Attribute.values().length];
    }

    public int getValue(Attribute a)
    {
        return this.values[a.ordinal()];
    }

    public void setValue(Attribute a, int value)
    {
        this.values[a.ordinal()] = value;
    }
} 
```

除了我想制作一个在所有枚举中通用的版本。现在，由于 .values() 和 .ordinal() 方法是由编译器隐式添加的，因此访问它们的唯一方法似乎是使用反射，这会消耗我试图通过避免获得的性能提升自动装箱，但也许我缺少一些东西。

有什么想法吗？

**编辑：**

我认为我最初的问题不清楚。我想要一个接受（作为通用参数）枚举的类，然后可以使用相同的操作。

所以我可以将它与任何类型的枚举一起使用，而无需每次都为每种枚举编写类。如：

```
enum Attribute { Height, Weight }

enum AbilityScore {Str, Dex, Con, Int, Wis, Cha}

IdealClass<Attribute> attributeVersion;

IdealClass<AbilityScore> abilityScoreVersion; 
```

等等。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-25T07:31:53.167

这是一个解决方案：

```
public class EnumIntMap<E extends Enum<E>> {

    private final int[] values;

    public EnumIntMap(Class<E> cls)
    {
        this.values = new int[cls.getEnumConstants().length];
    }

    public int getValue(E a)
    {
        return this.values[a.ordinal()];
    }

    public void setValue(E a, int value)
    {
        this.values[a.ordinal()] = value;
    }
} 
```

您还必须使用枚举类初始化地图。

```
enum Attribute { Height, Weight }

enum AbilityScore {Str, Dex, Con, Int, Wis, Cha}

EnumIntMap<Attribute> attributeVersion = new EnumIntMap(Attribute.class);

EnumIntMap<AbilityScore> abilityScoreVersion = new EnumIntMap(AbilityScore.class); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T07:42:22.237

从基因上做到这一点的关键是了解枚举的通用界限：

```
<T extends Enum<T>> 
```

您的班级可以为*任何*枚举工作，如下所示：

```
public class EnumIntAttributeMap<T extends Enum<T>> {
    private final int[] values;
    private final Class<T> clazz;

    public EnumIntAttributeMap(Class<T> clazz) {
        this.clazz = clazz;
        this.values = new int[clazz.getEnumConstants().length];
    }

    public int getValue(T a) {
        return this.values[a.ordinal()];
    }

    public void setValue(T a, int value) {
        this.values[a.ordinal()] = value;
    }
} 
```

请注意，构造函数需要一个*类型 token*，这是由于 java 的运行时类型擦除而需要的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T07:29:32.037

所有 java 都`Enum`隐式地 extend `java.lang.Enum`，所以我认为您正在寻找的是：

```
public class EnumIntAttributeMap<E extends java.lang.Enum<E>> {
    // [...]
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T07:11:08.257

阅读：[Oracle 的枚举文档](http://docs.oracle.com/javase/tutorial/java/javaOO/enum.html)。

我认为您可以做一些类似于行星示例的事情：

```
public enum YourEnum{
    HEIGHT (0),
    WIDTH  (1);

    private final int index;

    YourEnum(int index) {
        this.index = index;
    }
    public int index() { return index; }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-25T07:15:24.700

这是我个人使用的，并为我在 API 中提供了很好的标准化

通用接口 ：

```
public interface IValueEnum<T> {       
   T value();
} 
```

枚举是这样实现的：

```
public enum MyEnum implements IValueEnum<Integer> {
   WIDTH(1),
   HEIGHT(2);

   private final int value;
   MyEnum(int value) { this.value = value; }

   @Override
   public Integer value() {
      return value;
   }
} 
```

现在您可以通过 MyEnum.WIDTH.value() 等获得最终值。由于它使用泛型，因此其他枚举可以使用 Longs 或 Strings 或您拥有的任何东西。它允许您在应用程序中拥有一个简单的基于枚举的接口。它还允许您在地图等中完全通用。

**编辑：基于新示例**

```
public class IdealClass<T extends Enum> {

  T enumValue;

  public IdealClass() {
  }

} 
```

# php - 从表 WHERE b = c 中选择 a

> ID：16208437
> 
> 赞同：-3
> 
> 时间：2013-04-25T07:06:10.257
> 
> 标签：php, mysql

```
$video = mysql_query("SELECT vid FROM fav WHERE uid = ". $loggedInUser->user_id ."");
$result = mysql_query("SELECT * FROM tab WHERE ID = ". $video .""); 
if (!$result)
die("mySQL error: ". mysql_error());
while($row = mysql_fetch_object($result));
echo ",$row->ID,"; 
```

> mySQL 错误：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 '' 附近使用正确的语法

我认为代码不言自明，但我不明白，如何解决这个问题。我做错什么了？我只想获取用户 id (uid) 等于 $loggedInUser->user_id 的视频 id (vid)。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T07:08:49.017

你的意思是这样的？

```
SELECT tab.* FROM tab JOIN fav ON tab.ID = fav.vid AND fav.uid = ### 
```

这样，您无需执行两个查询即可获得相同的结果。如果您也需要一些值`fav`，您可以将它们添加到`SELECT`就像`tab.*`（从 中选择每一列`tab`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T07:08:49.187

`mysql_query`不返回字符串。它返回一个资源。

查看[PHP-MySQL 文档](http://php.net/manual/en/function.mysql-query.php)以了解如何从查询结果中检索数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T07:10:09.317

```
$rec    = mysqli_query("SELECT vid FROM fav WHERE uid = ". $loggedInUser->user_id);  
$video  =   mysqli_fetch_assoc($rec);       
$id =   $video['vid'];      
$result = mysqli_query("SELECT * FROM tab WHERE ID = $id"); 
```

编辑

```
$records    =   array();
$rec    = mysqli_query("SELECT vid FROM fav WHERE uid = ". $loggedInUser->user_id);  

while($row = mysqli_fetch_assoc($rec)){
    $id =   $row['vid'];      
    $result = mysqli_query("SELECT * FROM tab WHERE ID = $id");  
    $records[]  =   mysqli_fetch_assoc($result);
}

echo '<pre>';
print_r($records); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T07:09:44.807

您必须使用`mysql_fetch_array()`此处获取结果，然后分配其值

```
$arr= '';
$video = mysql_query("SELECT vid FROM fav WHERE uid = ". $loggedInUser->user_id ."");
while($row = mysql_fetch_array($video)) {
    $arr = $row['vid'];
}
$result = mysql_query("SELECT * FROM tab WHERE ID = ". $arr .""); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-25T07:15:55.773

试试这个：

```
function getQueryData($sQuery)
{
    $result = mysql_query($sQuery); 
    $rows = Array();
    while($row = mysql_fetch_array($result, MYSQL_ASSOC))
    {
       $rows[] = $row;
    }
    @mysql_free_result($result);    
    return $rows;
}
$video = getQueryData("SELECT vid FROM fav WHERE uid = ". $loggedInUser->user_id ."");
if(!empty($video)) {
   $result = getQueryData("SELECT * FROM tab WHERE ID = ". $video[0]['vid'] .""); 
   print_r($result);
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-04-25T07:14:49.693

我能给出的唯一答案是 RTM :) 但我会向你解释：

方法 mysql_query() 返回一个资源。资源不是字符串、整数或数组。但是您可以从资源中获取所需的所有数据。例如，您可以获得行数（mysql_num_rows()）或查询选择的数据（mysql_fetch_assoc() 将其作为关联数组返回）。

有关更多信息，请查看 php 手册中提供的示例：[http ://www.php.net/manual/en/function.mysql-fetch-assoc.php](http://www.php.net/manual/en/function.mysql-fetch-assoc.php)

**但请**使用 mysqli 或 PDO 代替 mysql。我在这里只是谈论您在 PHP 中使用的函数。PHP 扩展 mysql 自 PHP 5.5 起已弃用，您不应该使用的东西，您现在知道的，将被删除。如果您问，为什么不推荐使用它：http: [//de2.php.net/manual/en/faq.databases.php#faq.databases.mysql.deprecated](http://de2.php.net/manual/en/faq.databases.php#faq.databases.mysql.deprecated)

# ruby - 使用 ruby mechanize 解析站点时切换 ip

> ID：16208440
> 
> 赞同：0
> 
> 时间：2013-04-25T07:06:29.320
> 
> 标签：ruby, ip, mechanize

当我用我的 ruby​​ mechanize 程序解析网站时，有什么方法可以更改或隐藏发送请求 ip？避免来自站点服务器的包子。

我见过网站更改 IP 地址，例如[http://www.newipnow.com/](http://www.newipnow.com/)。但是不知道如何在我的程序中使用它。

这是我的代码：

```
require 'rubygems'
require 'mechanize'
require 'nokogiri'
require 'logger'

Encoding.default_external = Encoding::UTF_8
Encoding.default_internal = Encoding::UTF_8

agent = Mechanize.new do |a| 
    a.ssl_version, 
    a.verify_mode = 'SSLv3', 
    OpenSSL::SSL::VERIFY_NONE, a.user_agent_alias = 'Windows Mozilla'
end

authrization = agent.get("http://vk.com/")
vk_form = authrization.forms.first
vk_form.email = 'myaccount'
vk_form.pass = 'mypassword'
authrization = agent.submit(vk_form, vk_form.buttons.first) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T07:51:26.953

是的，您可以像这样设置代理：

```
agent.set_proxy host, port, user, pass 
```

# c# - NHibernate and Criteria or NPersistence with other Query

> ID：16208443
> 
> 赞同：0
> 
> 时间：2013-04-25T07:06:32.763
> 
> 标签：c#, nhibernate

I would like to ask from some advice. I usually use Java JPA with Criteria Queries and PostgreSQL in my projects (I work with Tapestry Framework which is based on Maven). I feel so comfortable with this tools and I can develop quickly. But now I must develop a proyect in C#. I have been studing similar tools in this platform and I have found NHibernate and NPersistence. The problem is that with NPersistence you can not use Criteria ([http://www.npersistence.org/content/how-use-criteria](http://www.npersistence.org/content/how-use-criteria)), and with NHibernate you can not mapping with NPersistence. So, what do you thing could be more interesting for learn and quickly development?? May I use NHibernate with XML mapping and Criteria or could be better use NPeristence with another kind of queries??

Thanks in advance!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T06:08:06.643

NHibernate 比 Hibernate 有一些高级查询选项。QueryOver 和 Linq 是编译器支持的查询语言。

对于映射，Castle Active Record 类似于 JPA 注释。然而，FluentNHibernate 和 MappingByCode 比 IMO 好得多，因为它们像 xml 映射一样具有持久性无知，但更容易使用。它们都具有自动映射功能，非常棒。

# java - Jboss Rest Easy client fails in google app engine

> ID：16208444
> 
> 赞同：1
> 
> 时间：2013-04-25T07:06:33.320
> 
> 标签：java, google-app-engine, resteasy

We are using Rest easy in our google app engine project. Every thing works fine except with client. Failing with Client framework. ClientRequest throws an ssl exception while we are requesting a non ssl url.

Here is the sample code:

```
// Get Client request Object with the URL
ClientRequest request = new ClientRequest("http://www.test.com/project");
request.body("application/json", requestData.toString());
request.accept(MediaType.APPLICATION_JSON);
ClientResponse response = request.put(ClientResponse.class);
return response.getEntity(String.class) + ""; 
```

Here is the stacktrace:

```
Nested in javax.servlet.ServletException: java.lang.NoClassDefFoundError: javax.net.ssl.HttpsURLConnection is a restricted class. Please see the Google  App Engine developer's guide for more details.:
java.lang.NoClassDefFoundError: javax.net.ssl.HttpsURLConnection is a restricted class. Please see the Google  App Engine developer's guide for more details.
    at com.google.appengine.tools.development.agent.runtime.Runtime.reject(Runtime.java:51)
    at org.apache.http.conn.ssl.SSLSocketFactory.<init>(SSLSocketFactory.java:255)
    at org.apache.http.conn.ssl.SSLSocketFactory.<clinit>(SSLSocketFactory.java:166)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:188)
    at com.google.appengine.tools.development.agent.runtime.RuntimeHelper.checkRestricted(RuntimeHelper.java:70)
    at com.google.appengine.tools.development.agent.runtime.Runtime.checkRestricted(Runtime.java:64)
    at org.apache.http.impl.client.DefaultHttpClient.createClientConnectionManager(DefaultHttpClient.java:219)
    at org.apache.http.impl.client.AbstractHttpClient.getConnectionManager(AbstractHttpClient.java:312)
    at org.apache.http.impl.client.DefaultHttpClient.createHttpContext(DefaultHttpClient.java:254)
    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:618)
    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:576)
    at org.jboss.resteasy.client.core.executors.ApacheHttpClient4Executor.execute(ApacheHttpClient4Executor.java:109)
    at org.jboss.resteasy.core.interception.ClientExecutionContextImpl.proceed(ClientExecutionContextImpl.java:39)
    at org.jboss.resteasy.plugins.interceptors.encoding.AcceptEncodingGZIPInterceptor.execute(AcceptEncodingGZIPInterceptor.java:40)
    at org.jboss.resteasy.core.interception.ClientExecutionContextImpl.proceed(ClientExecutionContextImpl.java:45)
    at org.jboss.resteasy.client.ClientRequest.execute(ClientRequest.java:443)
    at org.jboss.resteasy.client.ClientRequest.httpMethod(ClientRequest.java:677)
    at org.jboss.resteasy.client.ClientRequest.put(ClientRequest.java:537)
    at org.jboss.resteasy.client.ClientRequest.put(ClientRequest.java:542)
    at com.livily.plugin.RESTPlugin.requestURL(RESTPlugin.java:203)
    at com.livily.plugin.RESTPlugin.preChat(RESTPlugin.java:92)
    at org.apache.jsp.test_jsp._jspService(test_jsp.java:136)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:97)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:377)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:313)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:260)
    at com.google.appengine.tools.development.PrivilegedJspServlet.access$101(PrivilegedJspServlet.java:23)
    at com.google.appengine.tools.development.PrivilegedJspServlet$2.run(PrivilegedJspServlet.java:59)
    at java.security.AccessController.doPrivileged(Native Method)
    at com.google.appengine.tools.development.PrivilegedJspServlet.service(PrivilegedJspServlet.java:57)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166)
    at com.google.appengine.api.socket.dev.DevSocketFilter.doFilter(DevSocketFilter.java:74)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.ResponseRewriterFilter.doFilter(ResponseRewriterFilter.java:123)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.HeaderVerificationFilter.doFilter(HeaderVerificationFilter.java:34)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.api.blobstore.dev.ServeBlobFilter.doFilter(ServeBlobFilter.java:61)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.StaticFileFilter.doFilter(StaticFileFilter.java:125)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.BackendServersFilter.doFilter(BackendServersFilter.java:97)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
    at com.google.appengine.tools.development.DevAppEngineWebAppContext.handle(DevAppEngineWebAppContext.java:94)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at com.google.appengine.tools.development.JettyContainerService$ApiProxyHandler.handle(JettyContainerService.java:409)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.Server.handle(Server.java:326)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
    at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:923)
    at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:547)
    at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:212)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
    at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:409)
    at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582) 
```

Why this is using ssl even with non ssl url. Is there any way to avoid this exception.

Please suggest on this.

# java - JMS 连接建立时如何捕捉？

> ID：16208454
> 
> 赞同：3
> 
> 时间：2013-04-25T07:07:03.433
> 
> 标签：java, jms, activemq

我有消息生产者使用**ActiveMQ**发送有关某些事件的 JMS 消息。但是，与 ActiveMQ 的连接可能不会一直处于打开状态。因此，事件被存储，当连接建立时，它们应该被读取和发送。这是我的代码：

```
private void sendAndSave(MyEvent event) {
    boolean sent = sendMessage(event);
    event.setProcessed(sent);
    boolean saved = repository.saveEvent(event);
    if (!sent && !saved) {
        logger.error("Change event lost for Id = {}", event.getId());
    }
}

private boolean sendMessage(MyEvent event) {
    try {
        messenger.publishEvent(event);
        return true;
    } catch (JmsException ex) {
        return false;
    }
} 
```

我想创建某种*ApplicationEventListener*，在建立连接并处理未发送的事件时将调用它。我浏览了 JMS、Spring 框架和 ActiveMQ 文档，但找不到任何线索如何将我的侦听器与 ConnectionFactory 连接起来。

如果有人可以帮助我，我将不胜感激。

这是我的应用程序 Spring 上下文对 JMS 的说明：

```
<!-- Connection factory to the ActiveMQ broker instance.              -->
<!-- The URI and credentials must match the values in activemq.xml    -->
<!-- These credentials are shared by ALL producers.                   -->
<bean id="jmsTransportListener" class="com.rhd.ams.service.common.JmsTransportListener" 
      init-method="init" destroy-method="cleanup"/>
<bean id="amqJmsConnectionFactory" class="org.apache.activemq.ActiveMQConnectionFactory">
    <property name="brokerURL" value="${jms.publisher.broker.url}"/>
    <property name="userName" value="${jms.publisher.username}"/>
    <property name="password" value="${jms.publisher.password}"/>
    <property name="transportListener" ref="jmsTransportListener"/>
</bean>

<!-- JmsTemplate, by default, will create a new connection, session, producer for         -->
<!-- each message sent, then close them all down again. This is very inefficient!         -->
<!-- PooledConnectionFactory will pool the JMS resources. It can't be used with consumers.-->
<bean id="pooledAmqJmsConnectionFactory" class="org.apache.activemq.pool.PooledConnectionFactory" destroy-method="stop">
    <property name="connectionFactory" ref="amqJmsConnectionFactory" />
</bean>

<!-- Although JmsTemplate instance is unique for each message, it is  -->
<!-- thread-safe and therefore can be injected into referenced obj's. -->
<bean id="jmsTemplate" class="org.springframework.jms.core.JmsTemplate">
    <constructor-arg ref="pooledAmqJmsConnectionFactory"/>
</bean> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T14:41:47.433

你描述这个问题的方式，听起来确实像是 JMS 持久订阅的一个打开和关闭的案例。在走这条路之前，您可能需要考虑更传统的实现。除了注意事项之外，ActiveMQ 提供了您可以收听的[咨询消息](http://activemq.apache.org/advisory-message.html)，并将针对包括新连接在内的各种事件发送这些消息。

**=========**

射击，对不起......我不明白问题是什么。我认为咨询根本不是解决方案……毕竟，您需要连接到经纪人才能获得它们，但连接是您所知道的。

因此，如果我理解正确（准备重试＃2 ....），您需要的是一个客户端连接，当它失败时，它会尝试无限期地重新连接。当它重新连接时，您希望触发一个（或更多）事件，将挂起的消息刷新到代理。

因此检测丢失的连接很容易。您只需注册一个 JMS [ExceptionListener](http://docs.oracle.com/javaee/1.4/api/javax/jms/ExceptionListener.html)。至于检测重新连接，我能想到的最简单的方法是启动重新连接线程。当它连接时，停止重新连接线程并使用 Observer/Observable 或 JMX 通知等通知相关方。即使您只有一个代理，您也可以使用[ActiveMQ 故障转移传输，它会为您执行连接重试循环。](http://activemq.apache.org/failover-transport-reference.html)至少，它[应该是](http://activemq.2283324.n4.nabble.com/retry-without-using-Failover-Transport-td2358183.html)，但它并没有为你做很多事情，你自己的重新连接线程无法完成......**但**如果你愿意将一些控制权委托给它，它会缓存你未刷新的消息（请参阅**trackMessages** _**选项），然后在重新连接时发送它们，这就是你想要做的所有事情。**

 **我想如果你的代理宕机了几分钟，这不是一个坏方法，但如果你说的是几个小时，或者你可能会在宕机时间内累积 10k+ 条消息，我只是不知道缓存机制是否如可靠，因为你需要它。

**===================**

移动应用程序...对。不太适合故障转移传输。然后我会实现一个定期连接的计时器（使用http传输可能是个好主意，但不相关）。当它确实连接时，如果没有什么要冲洗的，那么在 x 分钟内见。如果有，请发送每条消息，等待握手并从您的移动商店中清除该消息。然后在 x 分钟后再见。

我假设这是Android？如果没有，请停止阅读此处。我们实际上在前段时间实现了这一点。我只做了服务器端，但如果我没记错的话，连接计时器/轮询器每 n 分钟旋转一次（我认为是可变频率，因为过于激进会耗尽电池）。一旦建立了成功的连接，我相信他们使用意图广播来推动消息推送者做他们的事情。当时的想法是，即使只有一个消息推送器，我们也可以添加更多。**

# java - 用另一个字符串中的每个字符替换字符串中的字符

> ID：16208457
> 
> 赞同：0
> 
> 时间：2013-04-25T07:07:11.523
> 
> 标签：java, string, replaceall

本质上，我需要编写一个字符串方法，它接收两个字符串参数，并将第二个字符串中存在的每个字符替换为第一个字符串中的“”。例如第一个`String toBeFixed = "I have a wonderful AMD CPU. I also like cheese."`和第二个`String toReplaceWith ="oils"`。`The string returned would be "I have a wnderfu AMD CPU. I a ke cheee."`

这是我所拥有的：

```
 public class removeChars
{
    public static String removeChars(String str, String remove) 
        {
            String fixed = str.replaceAll(remove,""); 

            return(fixed);
        }

} 
```

我不确定这是否是对如何使用 replaceAll 方法的误解，因为我已经看到了类似的东西

```
str = str.replaceAll("[aeiou]", ""); 
```

理想情况下，我会想办法把我的第二根绳子扔进去`(remove)`，然后完成，但我不确定这是否可能。我觉得这是一个稍微复杂的问题......我不熟悉数组列表，似乎字符串的不变性可能会给我带来一些问题。

此方法应该能够处理输入的任何值的字符串。任何帮助或指导将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T07:11:53.407

`String.replaceAll`将 Regex 语句作为其第一个参数。匹配`"oils"`将专门匹配短语“油”。

相反，您在帖子中的想法是正确的。`"["+remove+"]"`只要您的删除字符串不包含保留的正则表达式符号，例如括号、句点等，匹配就可以解决问题。（我不确定重复字符。）

如果是，则首先过滤删除字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T07:18:50.207

也许不是最有效的解决方案，但它很简单：

```
public class removeChars {
    public static String removeChars(String str, String remove) {
        String fixed = str;

        for(int i = 0; i < remove.length(); i++) 
             fixed = fixed.replaceAll(remove.charAt(i)+"","");  

        return fixed;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T07:17:55.503

这应该有效。`replace`就像`replaceAll`- 只使用值而不是正则表达式

```
public class removeChars {
    public static String removeChars(String str, String remove) {
        String fixed = str; 

        for(int index = 0; index < remove.length; index++) {
            fixed = fixed.replace(remove.substring(index, index+1), "");
            // this replaces all appearances of every single letter of remove in str
        }

        return(fixed);
    }
} 
```

# python - 如何将包含多个字典的表插入 MySQL 表？

> ID：16208459
> 
> 赞同：0
> 
> 时间：2013-04-25T07:07:18.640
> 
> 标签：python, mysql

我的 python 代码得到以下结果：

```
[

 {filename:'1,2',Name:'Gorge',registration number: '6657', registration date: '2012-09-10 14:31:13'}, 
 {filename:'5,43',Name:'mazu',registration number:'45', registration date:'2012-10-08 17:28:47'}] 
```

一旦我想把它放在一个 MySQL 表中，我就得到了这个错误：

```
Traceback (most recent call last):
  File "C:\Users\jio\Datasets 1\MyTable_info.py", line 63, in <module>
    cur.executemany(query,records)
  File "C:\Python27\lib\site-packages\MySQLdb\cursors.py", line 243, in executemany
    self.errorhandler(self, ProgrammingError, msg.args[0])
  File "C:\Python27\lib\site-packages\MySQLdb\connections.py", line 36, in defaulterrorhandler
    raise errorclass, errorvalue
_mysql_exceptions.ProgrammingError: not enough arguments for format string 
```

我在 MySQL 表中插入结果的 python 代码如下：

```
con = MySQLdb.connect(host = "******", port=***, user = "***", passwd="*****", db="****")
with con:
    cur=con.cursor()
    cur.execute('''CREATE TABLE IF NOT EXISTS info(id INT(10) auto_increment primary key,file_name VARCHAR(10), 
Name VARCHAR(50),Registration ID INT(50),registration time INT(50))''')

    query= "INSERT INTO info (file_name, Name, Registration ID, registration time) VALUES ( %s, %s, %s, %s )"
    cur.executemany(query,records)

    con.commit() 
```

有谁知道我为什么会收到此错误以及该错误是什么意思？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T09:54:20.067

您正在尝试将字符串插入字段 INT(50)。

看一下表格的最后一个字段，注册时间字段。它是一个整数，您正在尝试插入诸如“2012-10-08 17:28:47”或“2012-09-10 14:31:13”之类的值。

为了快速修复，只需将注册时间字段类型更改为 VARCHAR(50)。

但也许，对于性能问题，您应该考虑使用某种 TIMESTAMP 字段而不是 VARCHAR 来实现这种目的。

* * *

除了不要对要添加某种字符串的字段使用 INT 类型。

修改记录变量

[ {filename:'1,2',Name:'Gorge',注册号:'6657',注册日期:'2012-09-10 14:31:13'},{filename:'5,43',Name :'mazu',注册号:'45',注册日期:'2012-10-08 17:28:47'}]

to [('1,2','峡谷','6657', '2012-09-10 14:31:13'),('5,43','mazu','45','2012-10 -08 17:28:47')]

并避免在列名中使用空格

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T07:16:15.597

尝试引用字段名称。记录的内容是什么？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T07:17:17.383

不要在字段名称中使用空格。

如果需要，请用 ` 字符引用它们。

# visual-studio-2010 - Ajax minify 指定输出目录 VS2010

> ID：16208467
> 
> 赞同：1
> 
> 时间：2013-04-25T07:07:41.830
> 
> 标签：visual-studio-2010, microsoft-ajax-minifier

我正在尝试将 Ajax minify 集成到 VS 2010 的构建中。我们使用如下所示的语法，它确实有效，但我希望将文件复制到特定文件夹。目前它在根目录中创建文件。我该如何改变这一点。

这是我正在使用的语法

```
<AjaxMin Switches="-global:jQuery,$"
  JsSourceFiles="@(JS)"  JsCombinedFileName="xx.min.js"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T11:05:56.897

解决方案是使用

```
<AjaxMin Switches="-global:jQuery,$"
 JsSourceFiles="@(JS)"  JsCombinedFileName="Scripts\xx.min.js"/> 
```

# string - 可以使一组字符串唯一的最小数字字符

> ID：16208471
> 
> 赞同：1
> 
> 时间：2013-04-25T07:07:48.200
> 
> 标签：string, algorithm, data-structures, prefix

可以使一组字符串唯一的最少字符数是多少（从第一个字符开始）。

例如，一组字符串：

```
{
    'january',
    'february',
    'march',
    'april',
    'may',
    'june',
    'july'
} 
```

现在，我们不能只使用第一个字符，因为 'j' 既在 'june' 中，又在 'july' 中（另外，'m' 在 'march' 和 'may' 中）。我们也不能使用前 2 个字符，因为 'ma' 既在 'march' 又在 'may' 中。

但是，我们可以使用前 3 个字符！

返回这个数字的最佳算法是什么（除了明显的蛮力）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T07:12:54.193

您可以优化的第一件事是对所需前缀的大小进行二进制搜索。该函数是单调的 - 如果给定数量的字符 n 就足够了，那么任何大于 n 的值也可以。

其次 - 您可以计算每个字符串的滚动哈希，以便您可以在恒定时间内获得每个字符串的给定前缀的哈希码。因此，您将不得不验证数字（哈希码）的唯一性，而不是字符串，这当然更快。我建议像[rabin-karp](http://en.wikipedia.org/wiki/Rabin%E2%80%93Karp_algorithm)那样滚动哈希。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T07:16:04.820

您可以对数据进行排序并比较相邻条目之间不同的第一个字符的索引。这具有 O(N log N) 的复杂性或排序的复杂性。

如果可以将索引计算*合并*到 compare 函数中，则可以得到一个副作用：结果应该是 compare 函数遇到的最大索引。

正如 Steve Jessop 评论的那样，问题可能没有解决方案。确实可以首先计算条目的最小长度。如果可以自由实现比较函数，另一种选择是在比较函数遇到字符串结尾时返回 -1。

```
int global_max = 0;
int compare(const char *a, const char *b) {
    int c=0;
    int result;  // result of comparison -- set as zero if an error has occured
    if (global_max < 0) return 0;
    do {
       if (*a==0 || *b==0) { global_max = -1; return 0; }
       c++;
    } while ((result = (*a++ - *b++)) == 0);
    if (c>global_max) global_max = c;
    return result;
} 
```

# c# - URL 重写后不加载样式和脚本

> ID：16208473
> 
> 赞同：1
> 
> 时间：2013-04-25T07:07:51.337
> 
> 标签：c#, asp.net, url-rewriting

`UrlRewritingNet.UrlRewriter.dll`我已使用扩展名将 URL 重写规则应用于我的网站。在 web.config 文件中，我编写了如下规则：

```
<add name="Default"
     virtualUrl="^~/(.*)/Default.zkn"
     rewriteUrlParameter="ExcludeFromClientQueryString"
     destinationUrl="~/Default.aspx?lang=$1"
     ignoreCase="true"
/> 
```

它很容易更改`http://sitename.com/en/Default.zkn`为 Default.aspx?lang=en

我的`head`部分的一部分如下所示：

```
<link href="Styles/Default.css" type="text/css" rel="Stylesheet" media="screen" /> 
```

但是由于我已经应用了这个，`head`所以没有加载该部分相对指向的样式和附加的 javascript 文件。

然后我尝试添加`~`字符。

```
<link href="~/Styles/Default.css" type="text/css" rel="Stylesheet" media="screen" /> 
```

很多人说这会奏效。但是不，它没有用。

页面加载后，我在浏览器上打开源代码，我看到该`~`字符没有被我的站点文件夹替换。

所以 css 和 js 文件会出现 404 错误。

如何纠正？

有没有办法为 style/js 文件添加新的 URL 重写规则？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T07:45:33.293

也许你可以试试：

```
<%
var basePath = String.Format("{0}{1}",Request.ApplicationPath,  string.IsNullOrEmpty(Request.ApplicationPath) || !Request.ApplicationPath.EndsWith("/") ? "/" : "");
%>

<link href="<%=basePath%>Styles/Default.css" type="text/css" rel="Stylesheet" media="screen" /> 
```

# android - 数着数 仅具有特定列空值的行数

> ID：16208476
> 
> 赞同：0
> 
> 时间：2013-04-25T07:08:03.280
> 
> 标签：android, sqlite, count

我正在创建一个 android 应用程序。其中我有一个没有列的数据库表。从这些列中，我选择 4 个特定列并检查其中是否有空值或空值。它应该给我有空值的行数。我使用的代码是

```
count=db.rawQuery("select * from "+AllValuesTable+" where (app_salutation IS NULL OR app_salutation='') AND (ref_cusagreeno IS NULL or ref_cusagreeno='') AND (asset_categry IS NULL or asset_categry='') AND (off_Applcname IS NULL or off_Applcname='');", null).getCount(); 
```

但我得到的输出是 0 而它应该显示 4....因为有四行这些列是空的。我似乎无法找出问题所在。请帮忙。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T07:14:42.287

On the possibility that you have spaces it may be worth trimming your fileds before comparing to `''` :

```
count=db.rawQuery
  (
   "select * from "+AllValuesTable+" where 
   (app_salutation IS NULL OR TRIM(app_salutation)='') AND
   (ref_cusagreeno IS NULL OR TRIM(ref_cusagreeno)='') AND
   (asset_categry IS NULL OR TRIM(asset_categry)='') AND
   (off_Applcname IS NULL OR TRIM(off_Applcname)='')"
  , null).getCount(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T07:32:13.163

我不知道为什么你的查询没有抛出异常，文档不是很清楚如果sql语句无效会发生什么。在任何情况下，您都不应该以分号结束您的陈述。

```
Official document 
```

> 参数 sql SQL 查询。SQL 字符串不能是 ; 终止

[http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#rawQuery(java.lang.String](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#rawQuery(java.lang.String) , java.lang.String[], android.os.CancellationSignal)

# javascript - 在 jwplayer 中测试 html5 模式

> ID：16208488
> 
> 赞同：2
> 
> 时间：2013-04-25T07:09:05.760
> 
> 标签：javascript, jwplayer

我正在使用支持 Flash 的浏览器使用 JWPlayer 6。

即使安装了 Flash，如何让 JWPlayer 6 使用 HTML 5。

我目前有以下 JWPlayer 配置：

```
jwplayer("player").setup({
    type: 'rtmp',
    streamer: "<?php echo "$wowza/$app_name"; ?>",
    height: 540,
    width: 960,
    'autostart': 'true',
    'bufferlength': '3',
    'file': '<?php echo $stream_name; ?>'
}); 
```

李

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T07:18:03.147

JWPlayer 将选择在任何支持浏览器的情况下使用 HTML5 版本而不是 Flash 版本。 [http://www.longtailvideo.com/support/jw-player/28837/browser-device-support#modes](http://www.longtailvideo.com/support/jw-player/28837/browser-device-support#modes)

您需要在源中列出 RTMP 流和 HLS url，以便 JW 播放器回退。 [http://www.longtailvideo.com/support/jw-player/29394/hls-with-mp4-fallback](http://www.longtailvideo.com/support/jw-player/29394/hls-with-mp4-fallback)

这对你来说可能是这样的：

```
jwplayer("player").setup({
    type: 'rtmp',
     sources: [{
          file: "<?php echo "$wowza/$app_name"; ?>"
        },{
          file: "<?php echo "$wowza/$app_name"; ?>/playlist.m3u8"
        },{
          file: "http://non-wowza/assets/myVideo.mp4"
        }],
    height: 540,
    width: 960,
    'autostart': 'true',
    'bufferlength': '3',
    'file': '<?php echo $stream_name; ?>'
}); 
```

# javascript - 在 ec2 实例上使用 socket.io 得到“websocket 连接无效”错误？

> ID：16208491
> 
> 赞同：6
> 
> 时间：2013-04-25T07:09:16.030
> 
> 标签：javascript, node.js, sockets, websocket, socket.io

我有这个使用 node.js 用 express 和 socket.io 编写的 web 应用程序，该应用程序在 localhost 上运行良好，但是当我推送到我的 ec2 服务器时，它连接了大约 20 秒然后断开连接，然后再次连接等等......

给我节点控制台上的错误

```
warn  - websocket connection invalid
info  - transport end 
```

**服务器**

```
app = express()
server = http.createServer(app)
io = require('socket.io').listen(server) 
```

**客户**

```
socket = io.connect() 
```

我知道问题不在于我的代码，因为我在 localhost 上完全测试了 Web 应用程序，所以唯一的问题是这段代码在哪里运行，即我的 ec2 实例？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-29T04:45:47.193

出现此错误的原因可能有很多：

1.  您正在使用部分支持或不支持 websockets 的浏览器。[您可以在此处](http://caniuse.com/websockets)检查您的浏览器是否支持 websockets 。
2.  使用不支持 websocket 的代理。如果您的客户端和您的节点服务器之间有一些不支持 websocket 的服务器（负载均衡器）。
3.  **您使用的是 socket.io 版本 0.9.1/0.9.1-1。**此行为是此版本报告的[错误](https://github.com/LearnBoost/socket.io/issues/777)。所以升级到最新的 socket.io 版本是 0.9.14。
4.  浏览器连接被防火墙/阻止。
5.  代码相关问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-28T18:11:21.423

确保您在您的 ec2 上使用最新版本的 node、express 和 socket.io。此外，请提供有关本地计算机和 ec2 实例上当前使用的版本的一些数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-29T00:15:12.553

在您的本地机器上运行，您不必处理网络延迟、NAT 问题或防火墙。在 EC2 上运行，您拥有所有这些。

Web Sockets 相对较新且不稳定。因此，首先要确保您运行的是最新版本（并让我们知道它们是什么）。可能安装在本地机器上的 socket.io 版本与安装在 EC2 服务器上的版本不同。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-29T17:12:32.037

如果在失去连接之前的这 20 秒内没有任何活动，则一种可能性是 keep-alive 设置得太低。

有关类似问题，请参阅[https://groups.google.com/forum/?fromgroups=#!topic/socket_io/RUv70BguZ-U 。](https://groups.google.com/forum/?fromgroups=#!topic/socket_io/RUv70BguZ-U)解决方案是使用心跳来保持连接打开。

如果您还没有使用 socket.io heartbeats，请进一步了解它们： [使用 socketio heartbeats 的优点/缺点](https://stackoverflow.com/questions/7061362/advantage-disadvantage-of-using-socketio-heartbeats)

# axis2c - 计算器服务的无效 xml 请求

> ID：16208493
> 
> 赞同：1
> 
> 时间：2013-04-25T07:09:27.563
> 
> 标签：axis2c

我对axis2c 完全陌生，我刚刚下载并解压了适用于Windows 的axis2c 1.6（二进制版本）。我已经按照安装说明成功启动了axis2_http_server。尝试访问 Calculator 服务的 WSDL 工作正常，但对服务的 add 方法的任何调用都会返回“请求中的无效 XML”，并且在运行 axis2_http_server 的控制台窗口中会显示相同的文本。我也试过soapUI。显示的请求是：

```
<soapenv:Envelope

 xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"

  xmlns:typ="http://ws.apache.org/axis2/services/Calculator/types">

<soapenv:Header/>

<soapenv:Body>

  <typ:add>

     <param_1>1.0</param_1>

     <param_2>1.0</param_2>

  </typ:add> 
```

回应是

```
 <soapenv:Fault>

     <faultcode>soapenv:Sender</faultcode>

     <faultstring>Invalid XML format in request</faultstring>

  </soapenv:Fault> 
```

问题出在 in `calc.c (function axis2_calc_add())`，在哪里 `seq_node = axiom_node_get_first_child(complex_node, env);` 返回`NULL`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T20:32:37.013

Calculator 服务示例有多个问题使其无法正常工作。

首先，`add`操作的实现是无效的，它期望这样的请求（这里只是肥皂体的内容）：

```
<typ:add>
    <complex_node>
        <seq_node>
            <param_1>1</param_1>
            <param_2>2</param_2>
        </seq_node>
    </complex_node>
</typ:add> 
```

看起来有人错误地提交了该代码。

其次，在 Calculator 服务中实现的代码不允许请求元素之间有空格。它需要任何第一个节点，希望它是一个元素，但失败了，因为需要元素之间的文本节点。

要在不修改服务的情况下启动该示例：

1.  使用`sub`, `div`,`mul`操作之一。

2.  删除请求元素中的所有空格，如下所示：

`<typ:sub><param_1>3</param_1><param_2>2</param_2></typ:sub>`

然后，您将能够调用该服务。

如果您想查看完整的计算器服务，您可以从 axis2-非官方项目[编译 Axis2/C （或](https://code.google.com/p/axis2c-unofficial/wiki/InstallationManualWindowsSource)[从二进制存档安装它](https://code.google.com/p/axis2c-unofficial/wiki/InstallationManualWindowsBinary)）。

或者，您可以将[更改](https://code.google.com/p/axis2c-unofficial/source/detail?r=fed6120deedc4b28fe7e231fd83d1a4cac79c8c9)应用于原始源代码并重新编译它。

# c# - 如何在 eventdb.cs 中获取我的方法以在我的主窗体中填充我的组合框？

> ID：16208499
> 
> 赞同：0
> 
> 时间：2013-04-25T07:09:48.117
> 
> 标签：c#

我有一个名为 EventDB.cs 的类，它从文本文件中获取数据。我将每 5 行输入为一个名为 events 的对象列表，但在尝试将列表填充到我的主窗体上的组合框中时遇到了麻烦。有人可以指出我做错了什么吗？这是我的 Event.cs、EventDB.cs 和 main ticketinfo.cs 的代码。提前致谢！

事件.cs

```
namespace TicketInformation
{
  public class Event
{
  public Event()
  {
  }

  public Event(int day, string time, double price, string strEvent, string description)
  {
     this.Day = day;
     this.Time = time;
     this.Price = price;
     this.StrEvent = strEvent;
     this.Description = description;
  }

  public int Day { get; set; }

  public string Time { get; set; }

  public double Price { get; set; }

  public string StrEvent { get; set; }

  public string Description { get; set; }

  public string GetDisplayText()
  {
     return StrEvent;
  }

  }
} 
```

事件数据库.cs

```
namespace TicketInformation
{
public static class EventDB
{
  private static string dir = Directory.GetCurrentDirectory();
  private static string path = dir + "\\calendar.txt";

  public static List<Event> ExtractData() //(DateTime dtmDay)
  {
     //int intChosenDay = dtmDay.Day;

     // create object for input stream for text file
     StreamReader textIn =
    new StreamReader(
    new FileStream(path, FileMode.OpenOrCreate, FileAccess.Read));

     //create the list
     List<Event> events = new List<Event>();

     string[] lines = File.ReadAllLines(path);

     for (int index = 4; index < lines.Length; index += 5)
     {
        Event special = new Event();
        special.Day = Convert.ToInt32(lines[index - 4]);
        special.Time = (lines[index - 3]);
        special.Price = Convert.ToDouble(lines[index - 2]);
        special.StrEvent = lines[index - 1];
        special.Description = lines[index];
        events.Add(special);
     }

     //close stream for the text file
     textIn.Close();

     return events;

  }

  }
  } 
```

票务信息.cs

```
static void Main()
  {
     Application.Run(new FrmEvents());
  }

  private List<Event> events = null;

  private void FrmEvents_Load(
     object sender, System.EventArgs e)
  {
     CreateEventList();

  } 

  private void CreateEventList()
  {

     EventDB.ExtractData(events); //(mvwDate.SelectionStart);

     cboEvent.Items.Clear();

     foreach (Event e in events)
     {
        cboEvent.Items.Add(e.GetDisplayText());
     }

  } //end method CreateEventList 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T07:50:34.333

如果您想显示在​​所选日期或之后的事件，您可以执行以下操作：

首先，你需要一个实际的`Events`班级日期——你有日期和时间，但我没有看到日期。因此，让我们仅将`Day`属性用于此示例。

您可以非常轻松地将事件列表绑定到基于`Day`使用 LINQ 选择的组合框：

```
private void CreateEventList()
{

    events = EventDB.ExtractData(); //(mvwDate.SelectionStart);

    var e = (from ev in events
             where ev.Day >= mvwDate.SelectionStart  // mvwDate.SelectionStart needs to be an int
             select ev).ToList();

    cboEvent.Items.Clear();

    cboEvent.DisplayMember = "StrDesc";
    // You could also assign a ValueMember like this:
    //cboEvent.ValueMember = "Day";
    cboEvent.DataSource = e;
} //end method CreateEventList 
```

我的示例中有一些假设（主要是 mvwDate.SelectionStart 是什么），我还没有测试过代码，但这应该会给你另一种方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T07:20:45.973

我认为您`CreateEventList()`在 Ticketinfo.cs 中的方法有误。您根本不会在 Ticketinfo.cs 中更新`events`，您将始终拥有空列表。你应该换行

```
EventDB.ExtractData(events); 
```

至

```
events = EventDB.ExtractData(); 
```

然后应该可以正常工作。现在您的方法将从文件中返回事件。

您的新方法应如下所示：

```
 private void CreateEventList()
  {

     events = EventDB.ExtractData(); //(mvwDate.SelectionStart);

     cboEvent.Items.Clear();

     foreach (Event e in events)
     {
        cboEvent.Items.Add(e.GetDisplayText());
     }

  } //end method CreateEventList 
```

# google-maps - 融合表图中的标记计数

> ID：16208502
> 
> 赞同：0
> 
> 时间：2013-04-25T07:10:00.033
> 
> 标签：google-maps, count, google-fusion-tables, legend

我浏览了这两个链接：[第一个](http://michelleminkoff.com/2012/02/05/how-to-count-queried-rows-in-a-google-fusion-table/)和[第二个](https://github.com/derekeder/FusionTable-Map-Template/wiki/List-search-results)链接解释了如何在融合表地图图层中添加标记计数。我在示例地图中尝试了相同的技术，但没有奏效。实际上，我需要分别计算关键、最佳、正常变压器的数量以及所有变压器的总数。我也想知道我可以在地图图例中添加这些计数吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T14:24:17.430

一年多前，我发布了一个带有示例代码的答案，这与您在“第一个”链接中采用的方法相同。 [https://stackoverflow.com/a/9778985](https://stackoverflow.com/a/9778985)。请参阅 getFTCount() 函数。这两个示例的问题在于它们太旧并且使用已弃用的 FT SQL API，而不是 V1.0 API。

您将需要一个 Google API 密钥。和 jQuery。您需要在代码中更改的一件事是：

```
var apiKey = "XXXXXX";
var queryUrlHead = 'https://www.googleapis.com/fusiontables/v1/query?sql=';
var queryUrlTail = '&key=' + apiKey + '&callback=?'; 
```

**更新：**我修复了您的 jsfiddle 以使其正常工作。几个问题：

*   新的 api 返回 data.columns 和 data.rows，而不是 data.table.rows。
*   我猜新 API 返回的是 json 整数，而不是字符串，并且 jquery 似乎反对将数字传递给 $("#div_id").html() 或 .append()。

注意：计数前的空字符串

`$('#count').html(('' + data.rows[0]));`

[http://jsfiddle.net/S2WMf/8/](http://jsfiddle.net/S2WMf/8/)

# c - jni.h 和预期的 '='、','、';'、'asm' 或 '__attribute__' 在 'void' 之前

> ID：16208513
> 
> 赞同：1
> 
> 时间：2013-04-25T07:10:42.240
> 
> 标签：c, macos, syntax, java-native-interface, header-files

我的工作环境是 mac OSX 10.8.3。

现在我正在测试 JNI。

我制作了 HelloJNI.java 文件并在终端中执行 javac 和 javah 命令。

所以我得到了 HelloJNI.java、HelloJNI.class、org_owls_jni_HelloJNI.h 文件。

然后我把

```
gcc -g -l/usr/local/java/include -l/usr/local/java/include/linux -shared HelloJNI.c -o libhello.so 
```

命令运行程序。并面临 2 条错误消息。

1.  jni.h：没有这样的文件或目录
2.  'void' 之前应有 '='、','、';'、'asm' 或 '<strong>attribute'</li>

我搜索了互联网并找到了一个解决方案，将我的 jdk 升级到 1.7。但我不能这样做，因为其他人使用 1.6。所以我需要另一种解决方案来处理 jdk 1.6 的这个问题。

对于第二个问题，我在 stackoverflow 中找到了一些文章。他们说他们缺少一些语法。但对我来说，在void之前我找不到任何问题。请看一下我的头文件。

```
/* DO NOT EDIT THIS FILE - it is machine generated */
#include <jni.h>
/* Header for class org_owls_jni_HelloJNI */

#ifndef _Included_org_owls_jni_HelloJNI
#define _Included_org_owls_jni_HelloJNI
#ifdef __cplusplus
extern "C" {
#endif
/*
 * Class:     org_owls_jni_HelloJNI
 * Method:    printMessage
 * Signature: ()V
 */
JNIEXPORT void JNICALL Java_org_owls_jni_HelloJNI_printMessage
  (JNIEnv *, jobject);

#ifdef __cplusplus
}
#endif
#endif 
```

我认为这里没有问题，因为它是由命令 javah 自动生成的。

我非常感谢您提前提出的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T07:18:17.720

你的第一个错误是因为你没有 a `jni.h`，就这么简单。你必须找出它在哪里，并确保它在你的包含路径上。

而且，顺便说一句，这是`gcc`用`-I`（大写的眼睛）而不是`-l`（小写的ell）完成的。后者用于指定要使用的*库*而不是要添加到包含路径的目录。也就是说，我相信你的具体问题。

第二个错误是由第一个引起的，这是因为您之前有这个未知令牌`void`：

```
JNIEXPORT void JNICALL Java_org_owls_jni_HelloJNI_printMessage 
```

无疑是因为失踪`jni.h`。

# javascript - 在编辑模式下使用 XPage 获取字段的值 - 可以使用 Dojo 或 JavaScript 吗？

> ID：16208514
> 
> 赞同：0
> 
> 时间：2013-04-25T07:10:42.863
> 
> 标签：javascript, dojo, xpages

我在 XPage 上使用名称选择器，它本身运行良好，并在 XPage 处于编辑模式时将值正确添加到字段中。在将新值放入该字段后，我想立即获取该值并将其添加到 XPage 上其他位置的标签中。我尝试将 Dojo 与字段的 onchange 事件一起使用，但它不起作用（我推测是因为新值尚未出现在文档的 HTML 中）。有没有其他方法可以做到这一点？

在 Notes 客户端中，我使用 @SetField 执行此操作，然后刷新文档。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T14:19:02.980

我对以下问题的 Dojo 解决方案 -

```
var idCE = "#{id:CurrentEditor}";
var idPM = "#{id:PersonalManager}";
var pm = dojo.attr(idPM,"value");
dojo.byId(idCE).innerHTML = pm; 
```

我使用 dojo.attr 获取尚未保存的文档中输入字段的值，然后使用 dojo.byId("id").innerHTML 将其添加到标签中。

如果 CurrentEditor 是一个输入字段，我会使用

```
dojo.attr(idCE,"value",pm) 
```

# backbone.js - 如何在 Marionette JS 应用程序中使用 Twitter 引导模块

> ID：16208515
> 
> 赞同：2
> 
> 时间：2013-04-25T07:10:44.373
> 
> 标签：backbone.js, twitter-bootstrap, marionette

我正在构建一个 Backbone.Marionette webapp。我将 Twitter Bootstrap 用于 UI 元素。

我想在我的一个视图中使用工具提示模块。

**模板**

```
<a href="#" class="hepsock" data-toggle="tooltip" title="first tooltip">Tooltip</a> 
```

**风景**

```
class List.User extends App.Views.ItemView
 template: "users/list/templates/_user"
 tagName: "div"
 className: "item"

 onBeforeRender:
  $('a').tooltip() 
```

使用此设置工具提示时未激活/不起作用，但我没有收到任何错误。

*但是，如果我将此代码直接包含到模板文件中，我会得到工具提示。*

```
<script type="text/javascript">
    $(document).ready(function() {
        $('a').tooltip();
    });
</script> 
```

如何在视图中调用/激活引导模块？

感谢所有输入！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T14:20:00.177

@bryanbuchs 是正确的。这是一个工作示例。

[http://jsfiddle.net/puleos/L6nzS/](http://jsfiddle.net/puleos/L6nzS/)

```
var ToolView = Backbone.Marionette.ItemView.extend({
    template:"#tool-template",
    tagName: "span",
    onRender: function() {
        this.$el.find('a').tooltip();
    }
}); 
```

# android - Android-媒体播放器在屏幕方向时停止

> ID：16208516
> 
> 赞同：1
> 
> 时间：2013-04-25T07:10:45.777
> 
> 标签：android, android-layout, android-screen-support

我正在使用 Android 媒体播放器开发应用程序。当屏幕进入横向模式时，媒体播放器停止。所以，我用

```
android:configChanges="orientation|keyboardHidden" 
```

里面`<activity>`

现在媒体播放器停止问题已解决，但屏幕不会更改为（layout-land）布局。在横向和纵向模式下，都会出现相同的横向布局。请指导我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-16T21:32:15.830

转到 AndroidManifest.xml

并在`<activity>`标签内放置以下内容：

`android:configChanges="orientation|screenSize"`

现在对我有用的媒体播放器在更改屏幕方向时不会停止

# java - Java - é 变成 é - 如何修复它

> ID：16208517
> 
> 赞同：3
> 
> 时间：2013-04-25T07:10:52.427
> 
> 标签：java, unicode, character-encoding

我有一个法语文件夹树。当我阅读它的文件夹/文件时，它返回 é 而不是 é。我替换了字符，但这不是一个好的解决方案。我怎样才能解决这个问题 ？我在谷歌上找到了一些答案，但它对我没有帮助。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T09:18:00.580

启动应用程序时，[将编码设置为 utf-8](http://javarevisited.blogspot.sg/2012/01/get-set-default-character-encoding.html)：

```
java -Dfile.encoding="UTF-8" YourMainClass 
```

请注意，正如上面链接中提到的，许多 Java 类缓存了编码；因此，如果您在运行时更改编码，它可能不会影响我们关注的所有类。

在他对[另一个问题](https://stackoverflow.com/questions/5688728/php-to-rtf-e-becomes-a)[的回答](https://stackoverflow.com/a/5690502/109747)中复制[tchrist](https://stackoverflow.com/users/471272/tchrist)的解释：

> 一个`\N{LATIN SMALL LETTER E WITH ACUTE}`字符是代码点`U+00E9`。在 UTF-8 中，即`\xC3\xA9`.
> 
> 但是，如果您转身将这两个字节视为不同的代码点`U+00C3`和`U+00A9`，它们分别是`\N{LATIN CAPITAL LETTER A WITH TILDE}`和`\N{COPYRIGHT SIGN}`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T07:17:46.800

您正面临编码问题。

任何字符串实际上都是一组位。为了使它们可读，我们使用位组到我们可以阅读的字符表示的映射。这些“地图”代表所谓的编码。

您遇到的问题是因为您读取使用一个“地图”编码的位并使用另一个“地图”显示它。

请务必使用相同的编码，并始终检查您的字符串操作函数是否适用于正在使用的编码。它是您的应用程序正常工作的基础。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T07:16:27.463

这通常发生在您没有以正确的编码格式（可能是 UTF-8）解码文本时。

如果您想要更准确的答案，请将您的代码发布给我们，以便我们尝试更正它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-27T15:20:46.337

代码显示了正确的位——错误是你用来查看这些位的东西被告知这些位的编码与实际不同。

这不是 Java 问题。这是您用来查看 Java 输出的任何软件的问题。例如，您的终端编码可能设置为 ISO-8859-15，而不是 Java 发出的 UTF-8。

为外部世界提供一个全 UTF-8 的工作流程和一个由抽象 Unicode 代码点组成的内部世界确实很有帮助。

我想您可能误读了某些输入，即 UTF-8 格式的输入，但您误读为某些传统的 8 位编码。但我最好的猜测是已经给出的那个，你的显示设备/程序的编码设置错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-01-20T07:35:35.760

我已经使用下面的代码将`é`java unicode 打印到文件正在工作

```
writer1 = new FileWriter(outputFile, true);
writer2 = new BufferedWriter(writer1);
String str = new String(stringBuffer.toString().getBytes(), **"ISO-8859-1"**);
writer2.write(str);
writer1.flush();
writer2.flush(); 
```

# scala - boot.scala 执行后如何更改我的站点地图

> ID：16208519
> 
> 赞同：0
> 
> 时间：2013-04-25T07:10:58.263
> 
> 标签：scala, sitemap, lift

我只是通过在电梯中做一个示例应用程序来学习电梯。如果用户登录，我想显示一个登录页面和其他一些页面。那么如何将这些页面链接添加到我的母版页左侧已经存在的站点地图并删除一些页面链接。我知道 siteMap 将在 boot.scala 文件中设置，但是在执行之后如何修改它。任何人都可以给我一个想法。

谢谢……！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T10:37:17.187

修改站点地图，添加看起来像的条目`Menu.i("smth") / "myPath" >> If(() => userIsLoggedIn, "error")`

这样，如果用户没有登录，他将看不到菜单条目（也无法访问）。如果他已登录，他将看到菜单条目。示例：[http ://simply.liftweb.net/index-3.2.html#toc-Subsection-3.2.4](http://simply.liftweb.net/index-3.2.html#toc-Subsection-3.2.4)

还有Site Mutators（我不明白它们是如何从内部工作的）：[https ://github.com/lift/lift_25_sbt/blob/master/scala_29/lift_basic/src/main/scala/bootstrap/liftweb/Boot .scala#L53](https://github.com/lift/lift_25_sbt/blob/master/scala_29/lift_basic/src/main/scala/bootstrap/liftweb/Boot.scala#L53)

# wordpress - 如何在灯箱中显示多个文本

> ID：16208526
> 
> 赞同：0
> 
> 时间：2013-04-25T07:11:30.737
> 
> 标签：wordpress, jquery-ui, jquery

我已经写了html部分

```
 <ul class="all-products">
  <?php while (have_posts()) :the_post(); ?>
      <li class="single-product">
      <div class="outer-block">
       <div class="inner-block">
       <div class="product-image">
       <?php echo the_post_thumbnail('products-size'); ?>
       </div>
       </div>
       </div>
       <p class="title-product">
       <?php the_title();?> 
       </p>
       <div class="product-content">
       <?php the_content(); ?>
        <a class="show-panel" href="#">more</a>
       </div>
        <div class="lightbox-panel">
        <h3> <?php the_title();?></h3>
         <p><?php the_content(); ?> </p>
         <p align="center">
                <a class="close-panel" href="#">Close this window</a>
            </p>
        </div>
          <div class="lightbox"></div>
     </li>
     <?php endwhile; ?>
  </ul> 
```

在 jquery 中作为

```
 <script type="text/javascript">
var $=jQuery.noConflict();
        $(document).ready(function(){
            $("a.show-panel").click(function(){
                $(".lightbox, .lightbox-panel").fadeIn(300);
            })
            $("a.close-panel").click(function(){
                $(".lightbox, .lightbox-panel").fadeOut(300);
            })
        })
    </script> 
```

在 CSS 中作为

```
.lightbox{
            display:none;
            background:#000000;
            opacity:0.9;
            filter:alpha(opacity=90);
            position:absolute;
            top:0px;
            left:0px;
            min-width:100%;
            min-height:100%;
            z-index:1000;
        }
        .lightbox-panel{
            display:none;
            position:fixed;
            top:100px;
            left:50%;
            margin-left:-200px;
            width:400px;
            background:#FFFFFF;
            padding:10px 15px 10px 15px;
            border:2px solid #CCCCCC;
            z-index:1001;
                            } 
```

现在的问题是它为循环中的所有帖子显示相同的文本（标题和内容）......请帮助我！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T07:33:08.920

当您说`$(".lightbox, .lightbox-panel").fadeIn(300);`时，它会调用页面上具有该类的所有灯箱。您需要将特定的灯箱定位到帖子。

像这样的东西

```
$("a.show-panel").click(function(){
   $(this).parent().siblings('.lightbox-panel').fadeIn(300);
 }) 
```

# python - 霍夫曼编码错误

> ID：16208536
> 
> 赞同：0
> 
> 时间：2013-04-25T07:12:07.173
> 
> 标签：python, huffman-code

我正在尝试实现霍夫曼编码算法。

我写了以下代码

```
def make_leaf(symbol,weight):
    return (symbol,weight)

def is_leaf(x):
    return isinstance(x,tuple) and \
           len(x)==2 and \
           isinstance(x[0],str) and \
           isinstance(x[1],int)

def get_leaf_symbol(leaf):
    return leaf[0]

def get_leaf_freq(leaf):
    return leaf[1]

def get_left_branch(huff_tree):
    return huff_tree[0]

def get_right_branch(huff_tree):
    return huff_tree[1]

def get_symbols(huff_tree):
    if is_leaf(huff_tree):
        return [get_leaf_symbol(huff_tree)]
    else:
        return huff_tree[2]

def get_freq(huff_tree):
    if is_leaf(huff_tree):
        return get_leaf_freq(huff_tree)
    else:
        huff_tree[3]

def make_huffman_tree(left_branch,right_branch):
    return [left_branch,
            right_branch,
            get_symbols(left_branch) + get_symbols(right_branch),
            get_freq(left_branch) + get_freq(right_branch)] 
```

但是，当我尝试通过编写以下代码来构建二叉树时

```
ht01 = make_huffman_tree(make_leaf('A', 4),
                        make_huffman_tree(make_leaf('B',2),
                                          make_huffman_tree(make_leaf('D', 1),
                                                         make_leaf('C', 1)))) 
```

我收到这样的错误：

```
Traceback (most recent call last):
  File "C:\Users\Swadesh\Documents\Anmol\Python\huffman trial.py", line 47, in <module>
    make_leaf('C', 1))))
  File "C:\Users\Swadesh\Documents\Anmol\Python\huffman trial.py", line 41, in make_huffman_tree
    get_freq(left_branch) + get_freq(right_branch)]
TypeError: unsupported operand type(s) for +: 'int' and 'NoneType' 
```

我不知道如何解决这个错误。有人可以帮我吗 ？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T07:20:33.333

您在 get_freq() 函数的最后一行缺少“返回”。

如果您不从函数返回任何内容，Python 将使用 None 作为返回值。

然后，当您尝试在加法中使用此返回值时，您会收到您发布的错误（您不能将 None 添加到整数）。

# java - ThreadPoolExecutor 的 submit() 方法是否饱和会阻塞？

> ID：16208537
> 
> 赞同：0
> 
> 时间：2013-04-25T07:12:19.277
> 
> 标签：java

如果我扩展 ThreadPoolExecutor 并覆盖执行以使用 workQueue.put(command) 而不是 offer(command)。这会有帮助吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-25T07:15:25.530

如果这是您需要的，它会有所帮助，或者它可能不会真正解决您的真正问题。也有可能这只会使您的代码更加复杂而没有明确的好处。

这完全取决于您的情况，这就是默认情况下不这样做的原因。

我认为更好的选择是如果队列已满，则让当前线程执行任务。

# java - 通过 Java Web 应用程序中的黑盒测试测量代码覆盖率

> ID：16208539
> 
> 赞同：3
> 
> 时间：2013-04-25T07:12:26.070
> 
> 标签：java, code-coverage

我们有一个巨大的基于 java 的应用程序，几年前就已经存在了。我们也有大量的块盒测试用例和 QA 团队来进行回归测试。在我们的项目中采取了一项举措来提高应用程序的质量，同时我们必须测量这些黑盒测试用例所覆盖的代码。

我知道我们可以通过 EMMA、Code Cover、Cobertura 等代码覆盖率工具获得代码覆盖率报告，这些工具与白盒单元测试用例（即 JUnit 测试用例）一起使用。

我想知道在应用程序上执行黑盒测试用例时，是否可以使用这些工具中的任何一个来生成类似的代码覆盖率报告。关于这一点，我进行了一些谷歌搜索，发现应用程序代码可以“仪表化”，并且可以生成代码覆盖率报告。

现在我要做的是1.使用“Code pro”eclipse插件在Eclipse中检测代码，2.检测代码后，将生成检测代码的jar文件并将其部署在测试环境中（ Unix 盒子）。

现在的问题是，我的方向是否正确？当对服务器（不是本地机器）上的检测代码进行黑盒测试时，将如何以及在何处生成代码覆盖率报告。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T11:12:42.023

看看jacoco

[http://www.eclemma.org/jacoco/trunk/doc/mission.html](http://www.eclemma.org/jacoco/trunk/doc/mission.html)

这使用 java 代理，可以在运行时检测您的代码

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-25T11:13:28.107

您可以为此使用[jacoco](http://www.eclemma.org/jacoco/trunk/doc/agent.html)，将 jvm 设置为 test 以使用 tcpserver 选项运行，运行测试，然后使用 tcpclient 选项连接到它。如果您想为 n 次运行单独收集覆盖率，那么您可以通过 jmx 连接到它并调用[reset](http://www.eclemma.org/jacoco/trunk/doc/api/org/jacoco/agent/rt/IAgent.html#reset%28%29)

# jquery - 如何从另一个 html 内容中删除 html 内容

> ID：16208541
> 
> 赞同：0
> 
> 时间：2013-04-25T07:12:40.887
> 
> 标签：jquery, html, performance

我有以下html。

```
<dl class="item-options">
            <dd class="truncated" style="color:red;">DSOX3000-232, RS232/UART Serial Decode and Trigger - in <a onclick="return false" class="dots" href="#">...</a>/<div class="truncated_full_value"><dl class="item-options"><dt>Software Applications</dt><dd id="pppp">DSOX3000-232, RS232/UART Serial Decode and Trigger - installed, DSOX3000-AMS, CAN and LIN Automotive Serial Decode - installed, DSOX3000-MAT, Advanced Math Analysis for Infiniivision Oscilloscopes - installed, DSOX3000-VID, Enhanced Video/TV Application Package - installed/</dd></dl></div>
            </dd>          

            <div class="mdata">
                <dd class="truncated">DSOX3000-001, WaveGen 20 MHz Function/Arbitrary Wavefor <a onclick="return false" class="dots" href="#">...</a>/<div class="truncated_full_value"><dl class="item-options"><dt>Advanced Analysis</dt><dd id="pppp">DSOX3000-001, WaveGen 20 MHz Function/Arbitrary Waveform Generator - installed/</dd></dl></div></dd>
            </div>          

            <p id="warranty" style="margin-top:10px"></p>
                <dd>R-51B-001-5F, Return to Agilent Warranty - 5 years</dd><p>
            </p>              
 </dl> 
```

我`<dl class="item-options">`假设所有内容都在一个变量中 `var mycontent`。

如何`<p id="warranty" style="margin-top:10px"></p><dd>R-51B-001-5F, Return to Agilent Warranty - 5 years</dd><p></p>` 从该变量中删除此内容`mycontent`。

`mycontent` 是一个将传递给弹出窗口的变量。所以我想保留

```
<p id="warranty" style="margin-top:10px"></p><dd>R-51B-001-5F, Return to Agilent Warranty - 5 years</dd><p></p> 
```

在 html 文档中，但仅从变量中删除。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T07:15:31.390

试试这个：

```
$(mycontent).find("#warranty").remove(); 
```

**或者**

```
$(".item-options").find("#warranty").remove(); 
```

**编辑：**

一种方法是**clone()** *mycontent*并将其放入一个新变量中。您将能够保留原始的*mycontent*并使用它的克隆，而不会影响原始元素。

```
var mycontentForPopup = $(mycontent).clone().find("#warranty").remove(); 
```

然后，将*mycontentForPopup*用于您的弹出窗口。如果这不起作用，请给我一些反馈..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T07:16:24.360

基本上，您需要选择要删除的节点并 .remove() 它们。假设`mycontent`是对具有类的节点的 jQuery 引用`item-options`：

```
var warranty = mycontent.children('#warranty');
var txtContent = warranty.siblings('dd').last();
warranty.remove();
txtContent.remove(); 
```

如果`mycontent`是一个`DOM`节点，那么只需选择它`jQuery`：

```
var $mycontent = $(mycontent); 
```

一个建议是构造你的元素`DOM`，使`warranty`元素包含与其相关的节点，而`children`不是`siblings`. 否则语义丢失。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T08:23:12.167

你也可以试试这个：

```
$("#warranty", $(mycontent)).remove(); 
```

但我认为代码是错误的：

```
<p id="warranty" style="margin-top:10px"></p>
    <dd>R-51B-001-5F, Return to Agilent Warranty - 5 years</dd><p>
</p> 
```

或者：

```
<p id="warranty" style="margin-top:10px">
    <dd>R-51B-001-5F, Return to Agilent Warranty - 5 years</dd>
</p> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T08:57:36.653

我删除了保修内容

来自`mycontent`变量的标记，如下所示。

```
<p id="warranty" style="margin-top:10px"></p>
     <dd>R-51B-001-5F, Return to Agilent Warranty - 5 years</dd><p>
</p> 
```

var保证=jQuery('#warranty').next().html();

mycontent.=mycontent.replace(保修,'');

# java - JPA 查询语言中的 IN 和 = 运算符

> ID：16208542
> 
> 赞同：6
> 
> 时间：2013-04-25T07:12:42.120
> 
> 标签：java, eclipselink, jpa-2.0, jpql

我对 jpa 查询有疑问。有两个表，即 Post 表和 Tag 表 Post 和 Tag 之间存在多对多关系

Now I want to write a query such that when multiple tags are chosen then all the posts associated with those tags should be selected. 例如，

```
post1 has tags friends and motivation
post2 has tags motivation and pune
post3 has tag boxing 
```

如果选择了标签friends和pune，那么如果选择了标签装箱，则应检索post1和post 2，如果选择了标签装箱和动机，则应仅检索post 3，则应检索所有三个帖子。

我尝试了以下事情

```
SELECT DISTINCT p FROM Post p JOIN p.tags tags WHERE p.tags IN :tags 
```

但它给出了验证器错误

```
The state field path 'p.tags' cannot be resolved to a collection type. 
```

如果我这样尝试

```
SELECT DISTINCT p FROM Post p JOIN p.tags tags WHERE p.tags = :tags 
```

然后它可以正常运行，但是在传递标签列表后它会出错

```
 java.lang.IllegalArgumentException: You have attempted to set a value of type class java.util.ArrayList for parameter tags with expected type of class com.justme.model.entities.Tag from query string SELECT DISTINCT p FROM Post p JOIN p.tags tags WHERE p.tags = :tags. 
```

谢谢你读了这么多:)你能指导我吗？

我怎样才能达到上述结果？我的持久性提供者是 eclipseLink

这是 Post 实体

```
@Entity
@NamedQueries({
    @NamedQuery(name = "Post.selectAllPosts", query = "SELECT p FROM Post p ORDER BY p.dateCreated DESC"),
    @NamedQuery(name = "Post.selectPostForUser", query = "SELECT p FROM Post p WHERE p.user = :user ORDER BY p.dateCreated DESC"),
    @NamedQuery(name = "Post.selectPostsByTags", query = "SELECT DISTINCT p FROM Post p JOIN p.tags tags WHERE p.tags IN :tags") })
public class Post implements Serializable {
private static final long serialVersionUID = 1L;

@Id
@GeneratedValue(strategy = GenerationType.IDENTITY)
private int idpost;

@Lob
private String content;

private String title;

// bi-directional many-to-one association to User
@ManyToOne(cascade = CascadeType.PERSIST)
@JoinColumn(name = "iduser")
private User user;

// bi-directional many-to-many association to Tag
@ManyToMany(cascade = CascadeType.PERSIST)
@JoinTable(name = "post_tag", joinColumns = @JoinColumn(name = "idpost"),         inverseJoinColumns = @JoinColumn(name = "idtag"))
private List<Tag> tags = new ArrayList<Tag>();

@Temporal(TemporalType.DATE)
private Date date = null;
@Temporal(TemporalType.TIMESTAMP)
private Date dateCreated = new Date();

public Post() {
}

public int getIdpost() {
    return this.idpost;
}

public void setIdpost(int idpost) {
    this.idpost = idpost;
}

public String getContent() {
    return this.content;
}

public void setContent(String content) {
    this.content = content;
}

public String getTitle() {
    return this.title;
}

public void setTitle(String title) {
    this.title = title;
}

public User getUser() {
    return this.user;
}

public void setUser(User user) {
    this.user = user;
}

public List<Tag> getTags() {
    return this.tags;
}

public void setTags(List<Tag> tags) {
    this.tags = tags;
}

public Date getDate() {
    return date;
}

public void setDate(Date date) {
    this.date = date;
}

public Date getDateCreated() {
    return dateCreated;
}

public void setDateCreated(Date dateCreated) {
    this.dateCreated = dateCreated;
}

@Override
public String toString() {
    return "Post [idpost=" + idpost + ", content=" + content + ", title="
            + title + ", date=" + date + "]";
}

} 
```

这是标签实体

```
@Entity
@NamedQueries({
    @NamedQuery(name = "Tag.selectTags", query = "SELECT tag FROM Tag tag WHERE tag.tagName LIKE :keyword"),
    @NamedQuery(name = "Tag.selectMatchingTags", query = "SELECT t.tagName FROM Tag t WHERE t.tagName LIKE :keyword"),
    @NamedQuery(name = "Tag.selectTagByName", query = "SELECT tag FROM Tag tag WHERE tag.tagName = :tagName"),
    @NamedQuery(name = "Tag.selectTagsForAllPosts", query = "SELECT DISTINCT tag FROM Tag tag, Post post JOIN tag.posts posts WHERE post.user = :user")})

public class Tag implements Serializable {
private static final long serialVersionUID = 1L;

@Id
@GeneratedValue(strategy = GenerationType.IDENTITY)
private int idtag;

private String tagName;

// bi-directional many-to-many association to Post
@ManyToMany(mappedBy = "tags", cascade = CascadeType.PERSIST)
private List<Post> posts;

public Tag() {

}

public Tag(String tagName) {
    this.tagName = tagName;
}

public int getIdtag() {
    return this.idtag;
}

public void setIdtag(int idtag) {
    this.idtag = idtag;
}

public String getTagName() {
    return this.tagName;
}

public void setTagName(String tagName) {
    this.tagName = tagName;
}

public List<Post> getPosts() {
    return this.posts;
}

public void setPosts(List<Post> posts) {
    this.posts = posts;
}

@Override
public String toString() {
    return tagName;
}

} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-26T02:10:03.317

尝试：

```
 ...
    @NamedQuery(name = "Post.selectPostsByTags", query =
       "SELECT DISTINCT p FROM Post p JOIN p.tags tags WHERE tags IN (:tags)") })
public class Post implements Serializable {
    ... 
```

像这样使用它：

```
@PersistenceContext
public EntityManager em;
...
List<Tag> ltags = new ArrayList<Tag>();
ltags.add(tagOne);
ltags.add(tagTwo);
List<?> list = em.createNamedQuery("Post.selectPostsByTags")
                                                    .setParameter("tags", ltags)
                                                    .getResultList();

for (Object object : list) {
    System.out.println("Results: "+object);
} 
```

# javascript - jQuery 将 div 高度与动态图像高度匹配

> ID：16208549
> 
> 赞同：7
> 
> 时间：2013-04-25T07:13:21.190
> 
> 标签：javascript, jquery, image, css

我有一个宽度设置为 100% 且最小宽度为 1024 像素的图像。我想将我的“阴影”div 保留在图像上，并随着窗口大小的变化匹配它的高度，这会导致图像大小与窗口宽度成比例地变化。我当前的代码似乎什么也没做......

模板在这里[http://jordan.rave5.com/tmp/](http://jordan.rave5.com/tmp/)您会注意到背景覆盖和背景渐变 div 不会扩展 100% 的文档。那是另一个问题。哈哈。我试图让它们成为 BG 100% 的宽度和高度。

**jQuery：**

```
 $('.header-img').css('height', function(imgheight) {
                $('.image-grad').css({'height': + imgheight});
            }); 
```

**CSS：**

```
 .image-grad {
                position: absolute;
                z-index: 600;
                transition: width 2s;
                -webkit-transition: width 2s;
                width: 100%;
                min-height: 174px;
                max-height: 608px;
                background-image: url(images/header-img.png);
                background-repeat: repeat-x;
                background-position: bottom;
                top: 0;
                left: 0;
            }

            .header-img {
                position: relative;
                z-index: 500;
                width: 100%;
                min-width: 1024px;
                opacity: 0.0;
            } 
```

**HTML：**

```
 <img class="header-img" src="slides/fields.jpg" alt="Panoramic Fields" />
                    <div class="image-grad"></div> 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T08:03:53.240

您需要使用设置 div 的高度`.height`

您可以执行以下操作：

[http://jsfiddle.net/Q4DRp/](http://jsfiddle.net/Q4DRp/)

```
var imageGrad = $('.image-grad'),
    image = $('.header-img');

function resizeDiv () {
    imageGrad.height(image.height());
    imageGrad.width(image.width());
}

resizeDiv();

$(window).resize(function() { resizeDiv(); }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T08:01:51.907

这将帮助您调整阴影图像的大小：

**解决方案（未测试）**

```
$('.image-grad').css('height', $('.header-img').attr('height')); 
```

要获取图像的高度，请使用 .attr('height')。然后设置 div 的高度，使用 .css('height','999')。

# c# - foreach c#给出了无法转换的错误

> ID：16208551
> 
> 赞同：2
> 
> 时间：2013-04-25T07:13:26.737
> 
> 标签：c#, winforms, foreach

我有一个用 C# 编写的带有清除按钮的程序，需要清除整个表单的内容。对于我在 foreach 上用于单选按钮和复选框的按钮。

```
foreach (RadioButton rad in quiztabs.TabPages)
{
    rad.Checked = false;
}
foreach (CheckBox chk in quiztabs.TabPages)
{
    chk.Checked = false;
} 
```

但是，当我单击清除按钮时，我得到一个`Unable to cast object of type System.Windows.Forms.TabPage to type System.Windows.Forms.RadioButton`.

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-25T07:17:22.093

您误解了 的行为`foreach`：它不会*过滤*中的所有元素`TabPages`，它会尝试转换*所有*元素。

如果要*过滤*，可以使用 LINQ 显式执行此操作：

```
 foreach (RadioButton rad in quiztabs.TabPages.OfType<RadioButton>())
    {
        rad.Checked = false;
    }
    foreach (CheckBox chk in quiztabs.TabPages.OfType<CheckBox>())
    {
        chk.Checked = false;
    } 
```

但是，这仍然不能解决您的问题，因为[TabPages 集合](http://msdn.microsoft.com/en-us/library/system.windows.forms.tabcontrol.tabpages.aspx)仅包含`TabPage`元素。你*可能*想要的是这样的：

```
foreach (TabPage page in quiztabs.TabPages) 
{
    foreach (RadioButton rad in page.Controls.OfType<RadioButton>())
    {
        rad.Checked = false;
    }
    foreach (CheckBox chk in page.Controls.OfType<CheckBox>())
    {
        chk.Checked = false;
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-25T07:16:25.873

使用`OfType<T>()`方法：

```
foreach (RadioButton item in yourChildern.OfType<RadioButton>())
{
    //your code
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-25T07:18:28.137

利用

`quiztabs.TabPages.OfType<RadioButton>()`而`quiztabs.TabPages.OfType<CheckBox>()`不是`quiztabs.TabPages`在您的代码中。

或者；

```
foreach(Control c in this.Controls)
{
   if(c is RadioButton)
   {
     c.Checked = false;
   }
}

foreach(Control i in this.Controls)
{
   if(i is CheckBox)
   {
     i.Checked = false;
   }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T07:38:12.500

**取其中一个** `List<>` **RadioButton 类型和该列表中的所有单选按钮。**

```
List<RadioButton> list = new List<RadioButton>();
            list.Add(radioButton1);
            list.Add(radioButton2);
            list.Add(radioButton3);
            foreach (RadioButton item in list)
            {
                if(tabControl1.SelectedTab==tabControl1.TabPages[tabControl1.SelectedIndex])
                item.Checked = false;
            } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-25T07:16:18.987

你的问题是这`.TabPages`是一个标签页列表......我相信你想要每个标签页上的控件

```
foreach(TabPage t in quizTabs.TabPages)
{
       foreach (RadioButton rad in t.Controls)
        {
            rad.Checked = false;
        }
        foreach (CheckBox chk in t.Controls)
        {
            chk.Checked = false;
        }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-25T07:17:04.490

`foreach`需要有一个`rad`与您想要迭代的任何内容（此处）相同类型的迭代器（此处`TabPages`）：

所以它看起来像：

```
foreach (TabPage tab in quiztabs.TabPages) { 
```

尽管`TabPages`可以是任何类型的对象`quiztabs.TabPages`。

希望这是有道理的！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-25T07:19:09.733

因为，不是 a 中的制表符`radioButton`，您应该这样做，

```
foreach(TabPage tp in quizTabs.TabPages)
     {
        foreach (RadioButton rad in tp.Controls.OfType<RadioButton>())
        {
            rad.Checked = false;
        }
        foreach (CheckBox chk in tp.Controls.OfType<CheckBox>())
        {
            chk.Checked = false;
        }
    } 
```

# c - 如何连接十六进制数字？

> ID：16208555
> 
> 赞同：8
> 
> 时间：2013-04-25T07:13:38.870
> 
> 标签：c, hex, concatenation

我一直在尝试连接 4 个十六进制数字，但似乎无法做到。

例子：

```
int a = 0x01;
int b = 0x00;
int c = 0x20;
int d = 0xF1;
//Result should be 0x010020F1 
```

我使用的结果`sprintf()`和按位运算总是切断零，给我像 1020F1 这样的答案，这与我想要的有很大不同。有人有更好的方法吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-25T07:15:55.267

假如`unsigned int a,b,c,d;`

```
unsigned int result = (a<<24) | (b<<16)| (c<<8) | d; 
```

但这本质上是依赖于实现的，因为 C++ 标准只指定了最小的整数大小。

所以对于`uint32_t a, b, c, d`：

```
uint32_t result = (a<<24) | (b<<16)| (c<<8) | d; 
```

# iphone - iPhone上的Safari无法显示转义的Unicode字符

> ID：16208556
> 
> 赞同：2
> 
> 时间：2013-04-25T07:13:39.227
> 
> 标签：iphone, html, css, unicode, pseudo-class

我为我的类创建了一个伪类 ( `:before`)，并将它的`content`参数设置`\0027F6`为`&rarr;`（右箭头）的转义 unicode 字符。

在我的 Mac 上的 Google Chrome 上，一切都很好，但我已经用我的 iPhone 在 Safari 上对其进行了测试，它只显示方形符号而不是箭头。

请帮忙

# jsf-2 - JSF ui：调试导致 NullPointerException

> ID：16208558
> 
> 赞同：1
> 
> 时间：2013-04-25T07:13:53.207
> 
> 标签：jsf-2, flash-scope

我的 JSF 应用程序`<ui:debug>`在顶级模板中有一个标记。我有一个将项目保存到数据库的数据项创建页面。然后数据库返回我存储在 JSF 闪存中的已保存项目。然后我重定向到一个新页面并显示我从闪存中检索到的项目。当我查看页面时，Debug页面显示为a `NullPointerException`，有时没有堆栈跟踪，有时有类似的堆栈跟踪（不要注意具体的行号。

```
NullPointerException
at com.sun.facelets.util.DevTools.writeVariables(DevTools.java:158)
at com.sun.facelets.util.DevTools.writeVariables(DevTools.java:144)
at com.sun.facelets.util.DevTools.debugHtml(DevTools.java:135)
at com.sun.facelets.tag.ui.UIDebug.writeDebugOutput(UIDebug.java:92)
at com.sun.facelets.tag.ui.UIDebug.encodeBegin(UIDebug.java:81)
... 
```

如果我删除`<ui:debug>`标签，那么我的页面就会成功显示。是什么导致 NullPointerException？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T07:13:53.207

标记的部分工作`<ui:debug>`是显示所有各种 JSF 范围的内容，包括“flash 范围”。 `DevTools.writeVariables`是一个帮助函数，用于将作用域中的对象转换为可读的内容以显示在调试页面中。它使用诸如`toString()`显示对象之类的方法。存储在闪存中的对象，`toString()`使用以下样板代码覆盖了该方法

```
@Override
public String toString() {
  //TODO: Supply implementation
  return null
} 
```

由于`toString()`返回 null，它后来导致了`NullPointerException`. 如果您正确实施`toString()`，则不会发生此错误。

# jquery - Improving play template with javascript code

> ID：16208563
> 
> 赞同：0
> 
> 时间：2013-04-25T07:14:21.203
> 
> 标签：jquery, scala, playframework, playframework-2.0

I have a play-template with javascript code in it. Everything works but it has two disadvantages:

*   Bad readability with eclipse-play-plugin, javascript is not colored in code highlighting
*   I can't use the jquery-document-ready functionality because (I think) the jquery stuff is not yet loaded at this point of the dom tree. So I had to take the *native* implementation with `setInterval()`

On the other hand, the advantage I have with his solution is:

*   I can use the play-scala-template stuff to generate javascript code
*   all the code is together in one file and not somehow lost in the `public/javascript` folder

Any suggestion to improve the code is welcome! Thanks

```
@(categories: List[WikiCategory])

@import play.i18n._
@import helper._

@main(Messages.get("frontend.wiki.title")) {

<form class="form-search">
    <input type="text" class="input-medium search-query" placeholder="@Messages.get("frontend.wiki.search.placeholder")" id="searchInput"></input>
    <button type="button" class="btn btn-primary" id="searchButton" onclick="search()">@Messages.get("frontend.wiki.search")</button>
</form>

@* most read articles *@
<div class="row">
    @components.wikitable(Messages.get("frontend.wiki.mostread"), WikiArticle.findAllMostReadArticles(5), 999)
</div>

@* articles by category *@
@for((category, i) <- categories.zipWithIndex) {
    @if(i%2 == 0) { <div class="row"> }
        <div class="span6">
            @components.wikitable(category.name, WikiArticle.findAllByCategory(category, 5), category.id)
        </div>
    @if(i%2 == 1) { </div> }
}

<script type="text/javascript">
    var search = function() {
            var input = $('#searchInput').val();
            $.post( "/wiki/search/" + escape(input), function( data ) {
                console.log("found in table999 " + data.length + " articles for criteria " + input); 
                $('#table999').empty();
                $('#table999').append($(template(data)));
            });

            @for((category, i) <- categories.zipWithIndex) {
                $.post( "/wiki/search/@category.id/" + escape(input), function( data ) {
                    console.log("found in table@category.id " + data.length + " articles for criteria " + input); 
                    $('#table@category.id').empty();
                    $('#table@category.id').append($(template(data)));
                });
            }
    }
    var template = function(articles) {
        var table = "";
        for (var i = 0, limit = articles.length; i < limit; i++) {
            table += article(articles[i]);
        }
        return table;
    }
    var shortArticleText = function(text) {
        var lengthText = 80
        if (text.length > lengthText)
            return text.substring(0, lengthText) + "..."
        else
            return text
    }
    var article = function(article) {
        var row = "<tr><td><a href=\"/wikiarticle/" + article.id + "\" class=\"btn btn-primary\">" + article.title + "</a>&nbsp;</td>";
        row += "<td>" + shortArticleText(article.text) + "</td></tr>";
        return row;
    }
    var readyStateCheckInterval = setInterval(function() {
        if (document.readyState === "complete") {
            search();
            clearInterval(readyStateCheckInterval);
        }
    }, 10);
</script>
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T07:25:11.233

正确实现 JS 的最佳方法是...检查浏览器中的 HTML 代码，很可能您在 doc 末尾包含 jQuery，因此它不可用。创建稳定的 HTML 文件并在那里处理 JS，当您将调试并完成它然后将其移动到视图（将部件放置在适当的位置）。

还可以考虑将 JS 脚本移动到单独的`.js`文件中。

# jquery - Codeigniter Shopping Cart with Ajax

> ID：16208564
> 
> 赞同：0
> 
> 时间：2013-04-25T07:14:26.890
> 
> 标签：jquery, ajax, codeigniter, cart

I am having a problem with Ajax and the CodeIgniter shopping cart. The code works well without AJAX. It seems I am unable to post.

```
<script type="text/javascript">
    $('ul.products form').submit(function(){

      $('#noticeMessages').empty(); 
        var id = $(this).find('input[name=id]').val();  

  $.ajax({
          type: 'post',
          url:'../books/addProduct',
          data:{id:id}
          }).done(function(data){

              $('#noticeMessages').append('Your product has been added').css('visibility','visible').fadeIn('fast').fadeOut(5000);
              location.reload();

          });
          return false;
    });
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-08-10T22:03:26.920

尽管这似乎是一个死问题，但我仍然想提出我的建议。这是我会做的

```
 <script type="text/javascript">
        $('ul.products form').submit(function(){

          $('#noticeMessages').empty(); 
           var id = $(this).find('input[name=id]').val();  
          $.ajax({
              type: 'post',
              url:'../books/addProduct',
              data:{id:id},
              success:function(data){
                $('#noticeMessages').append('Your product has been added').css('visibility','visible').fadeIn('fast').fadeOut(5000);
                  location.reload();
              }
             });
        });
    </script 
```

# php - 用逗号分隔值 mysql 搜索

> ID：16208565
> 
> 赞同：-1
> 
> 时间：2013-04-25T07:14:27.370
> 
> 标签：php, mysql

我有 2 张桌子`customers`和`imap_emails`. `customer`表包含客户的电子邮件。

我正在使用 PHP-IMAP 从电子邮件服务器获取电子邮件，然后保存到数据库表`imap_emails`。

该`imap_emails`表有 2 个字段`from`，`to`并且`to`字段包含逗号分隔值。

我需要从第一个表中获取电子邮件，然后搜索`to`并`from`继续`imap_emails`。

首先我考虑了一个`LIKE`搜索条件，但我想要类似`FIND_IN_SET`或其他的东西。

我怎样才能以更好的方式实现这一目标？（由于某些原因，我不能在此表上使用关系）

请指教。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T09:06:13.283

基于 FIND_IN_SET 的连接示例

```
SELECT *
FROM imap_emails
INNER JOIN customers
ON FIND_IN_SET(customers.email, imap_emails.to) > 0 
```

您没有说您想如何缩小范围（即，如果一封电子邮件使用 2 个电子邮件地址，您是否希望将两个电子邮件都带回来），所以在这个阶段不能添加太多。

# monodevelop - 在 monodevelop 中安装 haxe 语言绑定时遇到问题

> ID：16208567
> 
> 赞同：1
> 
> 时间：2013-04-25T07:14:37.110
> 
> 标签：monodevelop, haxe

早上好。

我正在尝试在 monodevelop 中设置 haxe 开发工具，如[本教程所示。](http://www.joshuagranick.com/blog/?p=758)

我的问题是我找不到绑定插件管理器的[haxe 语言。](http://i.stack.imgur.com/WFV5v.png)

有谁知道这个问题的解决方案？

此致

吉尔赫姆·席尔瓦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-27T19:09:33.220

我也遇到了这个问题。我相信这是因为 Haxe 语言绑定目前不支持 (MonoDevelop/Xamarin Studio) 版本 4。而且他们目前似乎不提供主干构建，所以我们可能不走运！ [http://monodevelop.com/download/trunk_builds](http://monodevelop.com/download/trunk_builds)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-03T04:58:56.430

即使是日期为 14/3/2013 的 haxe 绑定也仅适用于 Monodevelop 3.0。我能够从 sourceforge 下载 Monodevelop 3.0.6。如果通过加载项管理器仍然无法正常工作，您可以手动下载它（下面的链接）并按文件安装。

资源：
[http ://addins.monodevelop.com/Project/Index/41](http://addins.monodevelop.com/Project/Index/41) [http://sourceforge.net/projects/monodevelop.mirror/files/?source=navbar](http://sourceforge.net/projects/monodevelop.mirror/files/?source=navbar)

# jsviews - jsView - 如何以道具作为数据来呈现自定义标签的内容？

> ID：16208569
> 
> 赞同：0
> 
> 时间：2013-04-25T07:14:45.323
> 
> 标签：jsviews

我有自定义标签，它可以将自己作为内部标签，我想将其绑定`props`为 `data`. 我可以更改第一个`test`标签`title`属性并查看更改，但不能对内部`test`标签执行此操作。我认为这是因为`this.tagCtx.content.render()`. 下面是示例：

```
<!DOCTYPE html>
<html>
<head>
<script src="js/jquery-1.9.1.min.js" type="text/javascript"></script>
<script src="js/jsrender.js" type="text/javascript"></script>
<script src="js/jquery.observable.js" type="text/javascript"></script>
<script src="js/jquery.views.js" type="text/javascript"></script>

<script id="testTemplate" type="text/x-jsrender">
    <div>{^{>title}}{^{:content}}</div>
</script>

<script id="myTemplate" type="text/x-jsrender">
    {^{test title='Test1'}}
        {^{test title='Test2'}}
        {{/test}}
    {{/test}}
</script>

<script type="text/javascript">
    $.views.tags({
        test: {
            render: function(){
                this.tagCtx.props.content = this.tagCtx.content.render();
                return this.template.render(this.tagCtx.props, this.tagCtx, this.tagCtx.view);
            },

            template: "#testTemplate"
        }
    });

    $.templates({myTemplate: "#myTemplate"});

    $(function () {
        $.link.myTemplate('#container', {});

        $('#editTitle').click(function () {
            $.observable($.view('#container div:first div').data).setProperty('title', prompt());
        });
    });
</script>
</head>
<body>
    <span id="editTitle">EditTitle</span>
    <div id="container"></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T18:26:36.723

这里的问题是内部标签被渲染为字符串，而不是数据链接标签，因为`this.tagCtx.content.render()`调用只是在对应于块内容的编译模板上调用渲染方法。

如果要呈现为数据链接标签，则需要调用`this.tagCtx.render()`.

此外，在调用中`this.tagCtx.render()`您需要标签来呈现其内容，而不是另一个模板。设置`template: "#testTemplate"`将导致标签使用该模板而不是内容。所以你需要的是这些方面的东西：

```
var template = $.templates("#testTemplate"); 

$.views.tags({
    test: {
    render: function() {
            var tagCtx = this.tagCtx;
            tagCtx.props.content = tagCtx.render();
            return template.render(tagCtx.props, undefined, tagCtx.view);
        }
    }
}); 
```

您可能不想在`template.render(...)`调用中将 tagCtx 作为上下文传递。你可以传入 tagCtx.ctx，或者简单地 undefined...

# syntax - How to fix this syntax error, please help me

> ID：16208572
> 
> 赞同：-4
> 
> 时间：2013-04-25T07:15:05.877
> 
> 标签：syntax, php

when i run file its appear with error

> Parse error: syntax error, unexpected T_STRING, expecting ')' in /home/beddings/public_html/mybabystore.com.au/admin/categories.php on line 2364

here is my code

```
$contents[] = array(
    'align' => 'center', 
    'text' => '<br><a href="' . 
        tep_href_link(
            FILENAME_CATEGORIES, 
            '&cPath='. $cPath.'&cID='.$cID.'&checkall=1') 
        . '" onClick="setCheckboxes('mainForm', true); return false;">[Check All Products]</a>&nbsp;&nbsp;<a href="' 
        . tep_href_link(FILENAME_CATEGORIES, '&cPath='. $cPath.'&cID='.$cID) 
        . '" onClick="setCheckboxes('mainForm', true); return false;">[Un Check All]</a>'
); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T07:22:01.213

错误在这里，你需要转义你的单引号

```
setCheckboxes(\'mainForm\', true); 
              ^----------^
//You are using this twice so escape the other one too 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T07:24:07.890

试试这个：

```
$contents[] = array('align' => 'center', 'text' => '<br><a href="' . tep_href_link(FILENAME_CATEGORIES, '&cPath='. $cPath.'&cID='.$cID.'&checkall=1') . '" onClick="setCheckboxes(\'mainForm\', true); return false;">[Check All Products]</a>&nbsp;&nbsp;<a href="' . tep_href_link(FILENAME_CATEGORIES, '&cPath='. $cPath.'&cID='.$cID) . '" onClick="setCheckboxes(\'mainForm\', true); return false;">[Un Check All]</a>'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T07:18:38.717

试试这个你需要转义单引号

```
$contents[] = array('align' => 'center', 'text' => '<br><a href="' . tep_href_link(FILENAME_CATEGORIES, '&cPath='. $cPath.'&cID='.$cID.'&checkall=1') . '" onClick="setCheckboxes(\'mainForm\', true); return false;">[Check All Products]</a>&nbsp;&nbsp;<a href="' . tep_href_link(FILENAME_CATEGORIES, '&cPath='. $cPath.'&cID='.$cID) . '" onClick="setCheckboxes(\'mainForm\', true); return false;">[Un Check All]</a>'); 
```

# sql - 如何将 unix 时间戳 (INT) 转换为 monetdb 时间戳 ('YYYY-MM-DD HH:MM:SS') 本地时间格式

> ID：16208576
> 
> 赞同：4
> 
> 时间：2013-04-25T07:15:17.777
> 
> 标签：sql, timezone, epoch, monetdb

Q1：我想将 unix 时间戳 (INT) 转换为 monetdb 时间戳 ('YYYY-MM-DD HH:MM:SS') 格式，但它给我的是 GMT 时间而不是我的实际时间。

当我做

```
select (epoch(cast(current_timestamp as timestamp))-epoch(timestamp '2013-04-25 11:49:00')) 
```

其中 2013-04-25 11:49:00 是我的系统当前时间它给出了相同的差异

我尝试使用

```
set time zone interval '05:30' HOUR TO MINUTE; 
```

但它并没有改变结果

我怎么解决这个问题？？

示例问题：
我想转换 unix 时间戳 1366869289，它应该在“2013-04-25 11:25:00”左右，但 monetdb 给出“2013-04-25 05:55:00”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T13:43:24.513

对 MonetDB 一无所知，但对时区了解很多，我决定查看他们的文档以了解支持哪些类型的数据类型以及如何处理转换。

我[在 Temporal data types 上找到了这个页面](http://www.monetdb.org/Documentation/SQLreference/Temporal)。基于此，我可以得出结论，`timestamp`MonetDB 中的 a 始终旨在引用 UTC/GMT 时间——这与其他系统是一致的。

为了获得特定时区的值，他们提供了以下示例：

```
SET TIME ZONE INTERVAL '1' HOUR TO MINUTE 
```

我假设这意味着将数据库设置为将所有时间偏移 1 小时，有效地将值全部放在 中`UTC+01:00`，例如英国夏令时的偏移量。

该页面还继续指出使用 just 和 offset 调整时间值可能出现的问题（请参阅 TimeZone ！= [TimeZone 标签 wiki 中的](https://stackoverflow.com/tags/timezone/info)Offset ）。它还提供了各种命名时区的列表。但它没有显示如何将时区设置为命名值之一。此外，他们的列表似乎是专有的，并且不完整。虽然乍一看，它们似乎与 IANA/Olson 时区数据库有相似之处——它们指定的标识符不是有效的 TZDB 名称。

本页还列出了一些其他功能，不做过多解释。一个看起来很有希望满足您的需求的是`LOCALTIMESTAMP`. 也许这会考虑当地时区，这似乎是您正在寻找的。

我找不到特定于 MonetDB 日期/时间/时区处理的任何其他详细信息。文档似乎相当不完整。您可能想联系他们的邮件列表。

# mysql - 如果文件不存在，则默认图像 mysql pdo

> ID：16208577
> 
> 赞同：-1
> 
> 时间：2013-04-25T07:15:18.897
> 
> 标签：mysql, pdo

如果文件不存在，我正在尝试在查询中添加默认图像。当查询没有while循环时我成功了。但是因为我需要循环这个值。我想将默认图像添加到查询中。

我不会收到任何错误，它只是从我的数据库中打印出一些随机信息。

```
function fetch_tweets($uid){ 
    $uid = (int)$uid;
    $query = $this->link->query
         ("SELECT user.id, user.email, user.username,  tweets.message, tweets.date, 
          userdetails.profile_img, userdetails.firstname, userdetails.lastname, 
          following.id, following.user_id, following.follow_id
    FROM user
    LEFT JOIN 
        following ON user.id = following.user_id 
    JOIN userdetails ON user.id = userdetails.user_id
    JOIN tweets ON userdetails.user_id = tweets.user_id
    WHERE user.id='{$uid}'  
    OR 
            user.id IN (SELECT follow_id 
    FROM following 
    WHERE 
        following.user_id = '{$uid}' )  
    GROUP BY tweets.date ORDER BY tweets.date DESC "
    ); 

     $tweet = array();
     while(($row = $query->fetch(PDO::FETCH_ASSOC)) !==FALSE) { 
     $tweet[] = $row;
     $tweet['profile_img'] = (file_exists("img/{$uid}.jpg")) ?
     "img/{$uid}.jpg" :  "img/default.jpg" ;

}   
    return $tweet; 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T07:23:46.340

您在循环中以错误的方式使用了变量 $tweet。

以下行将向数组 $tweet 添加一个新元素：

```
$tweet[] = $row; 
```

以下行更新了 $tweet 数组中名为“profile_img”的元素：

```
$tweet['profile_img'] = "..."; 
```

但我认为，你想要的是这样的：

```
while(($row = $query->fetch(PDO::FETCH_ASSOC)) !== FALSE) { 
    // Update the value for profile_img in the row
    $row['profile_img'] = file_exists("img/{$uid}.jpg") ? "img/{$uid}.jpg" :  "img/default.jpg" ;
    // Add the manipulated row to the $tweet-array
    $tweet[] = $row;
} 
```

请使用 xdebug 之类的调试器进行测试（如果您不熟悉 PHP，设置起来可能有点复杂），或者只使用 var_dump();。你很快就会发现...

# java - 编码感知 RandomAccessReader 实现？

> ID：16208584
> 
> 赞同：0
> 
> 时间：2013-04-25T07:15:32.367
> 
> 标签：java, character-encoding

RandomAccessFile 的默认实现是“损坏的”，因为您无法指定文件的编码方式。

我正在寻找符合以下条件的替代方案：

1.  编码感知
2.  随机访问！（处理非常大的文件，需要能够使用字节偏移量定位光标而不流式传输整个内容）。

我在 Commons IO 中闲逛了一下，但那里什么都没有。我宁愿不必自己实现这一点，因为有太多地方可能出错。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T07:17:13.820

RandomAccessFile 用于访问二进制数据。不可能有效地创建适用于所有情况的随机访问编码文件。

即使您找到了这样的解决方案，我也会仔细检查以确保它适合您的需求。

如果您要编写它，我建议您考虑行和列的随机位置，而不是从文件开头的字符偏移量。

这样做的好处是您只需要记住每行的开头在哪里，您就可以扫描该行以获取您的角色。如果你索引每个字符的位置，这可以为每个字符使用 4 个字节（假设文件小于 4 GB）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T09:15:50.237

事实证明，答案没有我想象的那么痛苦：

```
// This gives me access to buffering and charset magic
new BufferedReader(new InputStreamReader(Channels.newInputStream(randomAccessFile.getChannel()), encoding)), encoding
.... 
```

*然后我可以实现一个逐字符*读取的 readLine() 方法。使用 String.getBytes(encoding) 我可以跟踪文件中的偏移量。在底层 RandomAccessFile 上调用 seek() 可以让我随意重新定位光标。那里可能潜伏着一些错误，但基本测试似乎有效。

```
public String readLine() throws IOException {
    eol = "";
    lastLineByteCount = 0;
    StringBuilder builder = new StringBuilder();

    char[] characters = new char[1];
    int status = reader.read(characters, 0, 1);

    if (status == -1) {
        return null;
    }

    char c = characters[0];
    while (status != -1) {
        if (c == '\n') {
            eol += c;
            break;
        }

        if (c == '\r') {
            eol += c;
        } else {
            builder.append(c);
        }

        status = reader.read(characters, 0, 1);
        c = characters[0];
    }

    String line = builder.toString();

    lastLineByteCount = line.getBytes(encoding).length + eol.getBytes(encoding).length;

    return line;
} 
```

# ios - iOS 对时间 NSString 的 NSArray 进行排序

> ID：16208586
> 
> 赞同：6
> 
> 时间：2013-04-25T07:15:36.167
> 
> 标签：ios, objective-c, sorting, nsarray

我需要对`NSArray`包含时间`NSString`的内容进行排序，例如，

```
NSMutableArray *times = [[NSMutableArray alloc]initWithObjects:@"09:00 AM",@"07:30 AM",@"06:45 PM",@"05:00 PM",@"12:45 AM",@"12:45 PM",@"01:00 AM",@"01:15 PM", nil]; 
```

我需要的是按时间升序对数组进行排序。
有没有办法做这样的事情？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-25T07:29:58.040

```
NSMutableArray *times = [[NSMutableArray alloc]initWithObjects:@"09:00 AM",@"07:30 AM",@"06:45 PM",@"05:00 PM",@"12:45 AM",@"12:45 PM",@"01:00 AM",@"01:15 PM", nil];

NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateFormat:@"hh:mm a"];

NSArray *sortedTimes = [times sortedArrayUsingComparator:^NSComparisonResult(NSString *obj1, NSString *obj2)
{
    NSDate *date1 = [dateFormatter dateFromString:obj1];
    NSDate *date2 = [dateFormatter dateFromString:obj2];
    return [date1 compare:date2];
}]; 
```

优化版：

```
NSMutableArray *times = [[NSMutableArray alloc]initWithObjects:@"09:00 AM",@"07:30 AM",@"06:45 PM",@"05:00 PM",@"12:45 AM",@"12:45 PM",@"01:00 AM",@"01:15 PM", nil];

NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateFormat:@"hh:mm a"];

NSMutableArray *dates = [NSMutableArray arrayWithCapacity:times.count];
for (NSString *timeString in times)
{
    NSDate *date = [dateFormatter dateFromString:timeString];
    [dates addObject:date];
}

[dates sortUsingSelector:@selector(compare:)];

NSMutableArray *sortedTimes = [NSMutableArray arrayWithCapacity:dates.count];
for (NSDate *date in dates)
{
    NSString *timeString = [dateFormatter stringFromDate:date];
    [sortedTimes addObject:timeString];
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-25T07:34:39.480

你可以试试这段代码：

```
NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
    [formatter setDateFormat:@"hh:mm a"];
    [times sortUsingComparator:^NSComparisonResult(NSString* obj1, NSString *obj2) {
        NSDate *firstDate = [formatter dateFromString:obj1];
        NSDate *secondDate = [formatter dateFromString:obj2];
        return [firstDate compare:secondDate];
    }]; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-25T07:18:45.523

由于这些是字符串，它将被排序为

01:15, 12:25, 05:00....

他们也不是`NSDate`。

所以你需要做的是**从这些字符串中创建一个具有 NSDate 的并行数组**，对数组进行排序，然后提取这些值。

* * *

在实施时，我通过新手方式解决了它

```
NSMutableArray *times = [[NSMutableArray alloc]initWithObjects:@"09:00 AM",@"07:30 AM",@"06:45 PM",@"05:00 PM",@"12:45 AM",@"12:45 PM",@"01:00 AM",@"01:15 PM", nil];

NSMutableArray *dates=[NSMutableArray new];

NSDateFormatter *dateFormatter=[NSDateFormatter new];
[dateFormatter setDateFormat:@"hh:mm a"];

for (NSString *stringDate in times) {
        NSDate *date=[dateFormatter dateFromString:stringDate];
        [dates addObject:date];
}

NSSortDescriptor *descriptor = [[NSSortDescriptor alloc] initWithKey:@"self" ascending:YES];
NSArray *descriptors = [NSArray arrayWithObject: descriptor];
NSArray *reverseOrder = [dates sortedArrayUsingDescriptors:descriptors];

[times removeAllObjects];
for (NSDate *date in reverseOrder) {
        NSString *string=[dateFormatter stringFromDate:date];
        [times addObject:string];
}

NSLog(@"%@",times); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T07:19:55.407

对于 NSDate 比较使用这个：

```
+ (BOOL)isDate:(NSDate *)date1 smallerThanAnotherDate:(NSDate *)date2
{
    NSDate* enddate = date1;
    NSDate* currentdate = date2;
    NSTimeInterval distanceBetweenDates = [enddate timeIntervalSinceDate:currentdate];
    double secondsInMinute = 60;
    NSInteger secondsBetweenDates = distanceBetweenDates / secondsInMinute;

    if (secondsBetweenDates == 0)
        return YES;
    else if (secondsBetweenDates < 0)
        return YES;
    else
        return NO;
} 
```

因此，如果您不想将您的时间转换为 NSDate，则单独执行此操作对我有用

```
NSArray *sortedTimes =  [times sortedArrayUsingSelector:@selector(localizedStandardCompare:)]; 
```

# android - dropbox api - 我应该选择哪个 Dropbox 图标？

> ID：16208587
> 
> 赞同：1
> 
> 时间：2013-04-25T07:15:37.227
> 
> 标签：android, dropbox, dropbox-api

我是一名 android 开发人员。我决定在我的项目中包含 dropbox api。

关于保管箱图标，有谁知道我应该为保管箱选择哪种类型的图标？

有安卓`dropbox image for pics / files`吗？

有人可以建议我应该使用什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T22:54:11.707

看这里：[https ://www.dropbox.com/branding](https://www.dropbox.com/branding)

页面上有一个链接可以下载他们的图标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T07:56:09.267

[在http://images.google.com/advanced_image_search](http://images.google.com/advanced_image_search)试试运气，您可以使用正确的许可证类型进行过滤。我唯一的建议是，不要像其他操作系统那样使用玻璃状图标。

# c# - 将 DataTable（动态列）转换为 List

> ID：16208588
> 
> 赞同：1
> 
> 时间：2013-04-25T07:15:43.657
> 
> 标签：c#, linq

我想用下面的示例数据转换 DataTable

```
Employee subject1 subject2 subject3 .......
1        100      80         60......
2        90       70         70... 
```

进入

列表。

其中员工对象如下..

```
public class Employee
{
  public int EmpId { get; set;}
  public Dictionary<string,decimal> SubjectMarks;

} 
```

任何人都可以帮助我将此数据表转换为 c 中的列表或使用 linq。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T07:28:05.880

所以动态主题列从索引 1 开始，到`table.Columns-Count-1`. 然后我会首先创建这些列的数组。然后你可以使用`Select`++ `ToDictionary`：`ToList`

```
DataColumn[] subjectColumns = table.Columns.Cast<DataColumn>().Skip(1).ToArray();
List<Employee> employee = table.AsEnumerable()
    .Select(r => new Employee
    {
        EmpId = r.Field<int>("Employee"),
        SubjectMarks = subjectColumns.Select(c => new
        {
            Subject = c.ColumnName,
            Marks   = r.Field<decimal>(c)
        })
        .ToDictionary(x => x.Subject, x => x.Marks)
    }).ToList(); 
```

假设列的类型已经`int`用于 ID 和`decimal`标记。否则使用`int.Parse`and`decimal.Parse`来转换它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T07:30:37.037

```
 var list = new List<Employee>();
    var id = table.Columns[0];
    var marks = table.Columns.Cast<DataColumn>().Skip(1).ToArray();
    foreach (DataRow row in table.Rows)
    {
        var obj = new Employee { EmpId = (int) row[id] };
        var dict = new Dictionary<string,decimal>();
        foreach (var mark in marks)
        {
            dict[mark.ColumnName] = (decimal)row[mark];
        }
        obj.SubjectMarks = dict;
        list.Add(obj);
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T07:23:32.413

而不是使用字典，然后您可以列出添加科目成绩试试这个：

```
public class Employee
{
  public int EmpId { get; set;}
  public List<string> SubjectMarks { get; set;}
}

var empList = (from emp in dtEmployeeList.AsEnumerable()
               select new Employee()
               {
                   EmpId = (int) emp["Employee"],
                   SubjectMarks = List<string>() 
                   {
                       emp["subject1"].ToString(),
                       emp["subject2"].ToString(),
                       emp["subject3"].ToString()
                   }
               }).ToList() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T07:27:07.570

你可以这样做：

```
System.Data.DataTable table = // your table 
List<Employee> result =
    table.AsEnumerable().Select(i => new Employee()
        {
            EmpId = i.Field<int>("Employee"),
            SubjectMarks = { { "subject1", i.Field<decimal>("subject1") } ,
                             { "subject2", i.Field<decimal>("subject2") } ,
                             { "subject3", i.Field<decimal>("subject3") } }
        }).ToList(); 
```

你需要确保你有一个参考`System.Data.DataSetExtensions`。并且不要忘记添加`using System.Data`.

# multithreading - 如何从vala中的另一个线程中杀死一个线程

> ID：16208590
> 
> 赞同：2
> 
> 时间：2013-04-25T07:15:46.070
> 
> 标签：multithreading, vala

我有一个主线程，它创建另一个线程来执行某些工作。主线程有对该线程的引用。即使线程仍在运行，我如何在一段时间后强行终止该线程。我找不到合适的函数调用来做到这一点。

任何帮助都将是可观的。

我要解决的原始问题是我创建了一个线程来执行 CPU 绑定操作，这可能需要 1 秒或 10 小时才能完成。我无法预测需要多少时间。如果花费太多时间，我希望它在我愿意的时候/如果我愿意，优雅地放弃工作。我可以以某种方式将此消息传达给该线程吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T16:17:20.460

假设你在谈论 GLib.Thread，你不能。即使可以，您也可能不想这样做，因为您最终可能会泄漏大量内存。

你应该做的是要求线程杀死自己。通常这是通过使用变量来指示是否已要求操作尽早停止来完成的。GLib.Cancellable 就是为此目的而设计的，它与 GIO 中的 I/O 操作集成在一起。

例子：

```
private static int main (string[] args) {
  GLib.Cancellable cancellable = new GLib.Cancellable ();
  new GLib.Thread<int> (null, () => {
      try {
        for ( int i = 0 ; i < 16 ; i++ ) {
          cancellable.set_error_if_cancelled ();
          GLib.debug ("%d", i);
          GLib.Thread.usleep ((ulong) GLib.TimeSpan.MILLISECOND * 100);
        }

        return 0;
      } catch ( GLib.Error e ) {
        GLib.warning (e.message);
        return -1;
      }
    });

  GLib.Thread.usleep ((ulong) GLib.TimeSpan.SECOND);
  cancellable.cancel ();

  /* Make sure the thread has some time to cancel.  In an application
   * with a UI you probably wouldn't need to do this artificially,
   * since the entire application probably wouldn't exit immediately
   * after cancelling the thread (otherwise why bother cancelling the
   * thread?  Just exit the program) */
  GLib.Thread.usleep ((ulong) GLib.TimeSpan.MILLISECOND * 150);

  return 0;
} 
```

# c# - C# P/Invoke 和包含字节数组的结构数组

> ID：16208592
> 
> 赞同：0
> 
> 时间：2013-04-25T07:15:53.243
> 
> 标签：c#, interop, pinvoke

我需要从 C# 代码调用本机 DLL。由于我对 C/C++ 不是很熟悉，所以我不知道应该如何在 C# 中声明 C 中定义的结构，以便可以调用它。问题是两个参数似乎是一个结构数组，我不知道如何在 C# 中声明它（参见最后一个代码块）：

**c++头文件：**

```
typedef enum
{   
    OK = 0,
    //others
} RES

typedef struct
{
    unsigned char* pData;
    unsigned int length;
} Buffer;

RES SendReceive(uint32 deviceIndex
    Buffer* pReq,
    Buffer* pResp,
    unsigned int* pReceivedLen,
    unsigned int* pStatus); 
```

**c#声明：**

```
enum
{   
    OK = 0,
    //others
} RES

struct Buffer
{
    public uint Length;
    public ??? Data; // <-- I guess it's byte[]
}

[DllImport("somemodule.dll", CallingConvention = CallingConvention.Cdecl)]
public static extern uint SendReceive(
    uint hsmIndex,
    uint originatorId,
    ushort fmNumber,
    ??? pReq,  // <-- should this be ref Buffer[] ?
    uint reserved,
    ??? pResp, // <-- should this be ref Buffer[] ?
    ref uint pReceivedLen,
    ref uint pFmStatus); 
```

在一个等效的 java 客户端中，我发现参数不仅仅是一个 Buffer，而是一个 Buffer 数组。在 C# 中，它看起来像这样：

```
 var pReq = new Buffer[] 
{
    new Buffer { Data = new byte[] { 1, 0 }, Length = (uint)2 }, 
    new Buffer {Data = requestStream.ToArray(), Length = (uint)requestStream.ToArray().Length },
    //according to the header file, the last item must be {NULL, 0}
    new Buffer { Data = null, Length = 0 }
};

var pResp = new Buffer[] 
{
    new Buffer { Data = new byte[0x1000], Length = 0x1000 }, 
    //according to the header file, the last item must be {NULL, 0}
    new Buffer { Data = null, Length = 0x0 }
}; 
```

这对我来说似乎很奇怪，因为 extern C 方法确实有一个指向 Buffer 结构 (Buffer*) 的指针，而不是指向 Buffer 数组 (Buffer[]*) 的指针。如何在 C# 中定义 Struct 和 extern 方法的参数类型？

任何帮助表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T07:34:35.027

首先，您的结构的参数顺序错误。并且需要将字节数组声明为`IntPtr`手动编组：

```
struct Buffer
{
    public IntPtr Data;
    public uint Length;
} 
```

p/invoke 应该是：

```
[DllImport("MyNativeDll.dll", CallingConvention=CallingConvention.Cdecl)]
static extern RES SendReceive(
    uint deviceIndex, 
    [In] Buffer[] pReq, 
    [In, Out] Buffer[] pResp, 
    out uint pReceivedLen, 
    out uint pStatus
); 
```

字节数组需要`IntPtr`使结构是 blittable。这是必需的，以便可以将数组参数声明为`Buffer[]`.

对字节数组进行编组会有点痛苦。您将希望使用`GCHandle`固定托管字节数组，并调用`AddrOfPinnedObject()`以获取结构数组中每个结构的固定数组的地址。编写一些帮助函数以减少该任务的痛苦是值得的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T07:28:49.020

您在 c# 中的方法签名应该类似于：

```
[DllImport("MyNativeDll.dll")]
public static extern RES SendReceive (uint32 deviceIndex, ref Buffer pReq, ref Buffer pResp, ref uint pReceivedLen, ref uint pStatus); 
```

看到这个项目，它可能会在未来帮助你，所以从.net [http://clrinterop.codeplex.com/releases/view/14120生成本机调用](http://clrinterop.codeplex.com/releases/view/14120)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T07:52:20.727

基于 C++ 标头但未经测试，请查看以下代码：

```
using System;
using System.Runtime.InteropServices;
using System.Text;

namespace WindowsFormsApplication1
{
    public class Class1
    {
        public struct Buffer
        {
            [MarshalAs(UnmanagedType.LPStr)]
            public StringBuilder pData;

            public uint length;
        }

        [DllImport("kernel32.dll", EntryPoint = "LoadLibrary")]
        static extern int LoadLibrary(string lpLibFileName);

        [DllImport("kernel32.dll", EntryPoint = "GetProcAddress")]
        static extern IntPtr GetProcAddress(int hModule, string lpProcName);

        [DllImport("kernel32.dll", EntryPoint = "FreeLibrary")]
        static extern bool FreeLibrary(int hModule);

        [UnmanagedFunctionPointer(CallingConvention.Cdecl, CharSet = CharSet.Ansi)]
        internal delegate IntPtr SendReceive(
            uint deviceIndex,
            ref Buffer pReq,
            ref Buffer pResp,
            uint pReceivedLen,
            uint pStatus);

        public void ExecuteExternalDllFunction()
        {
            int dll = 0;

            try
            {
                dll = LoadLibrary(@"somemodule.dll");
                IntPtr address = GetProcAddress(dll, "SendReceive");

                uint deviceIndex = 0;
                Buffer pReq = new Buffer() { length = 0, pData = new StringBuilder() };
                Buffer pResp = new Buffer() { length = 0, pData = new StringBuilder() };
                uint pReceivedLen = 0;
                uint pStatus = 0;

                if (address != IntPtr.Zero)
                {
                    SendReceive sendReceive = (SendReceive)Marshal.GetDelegateForFunctionPointer(address, typeof(SendReceive));

                    IntPtr ret = sendReceive(deviceIndex, ref pReq, ref pResp, pReceivedLen, pStatus);
                }
            }
            catch (Exception Ex)
            {
                //handle exception...
            }
            finally
            {
                if (dll > 0)
                {
                    FreeLibrary(dll);
                }
            }
        }
    }
} 
```

# objective-c - 双值不考虑小数点后的 00 iOS 6

> ID：16208595
> 
> 赞同：0
> 
> 时间：2013-04-25T07:15:55.360
> 
> 标签：objective-c, ios6, double, nsnumber

在我的应用程序中，用户在文本字段中输入价格。所以我从下面的文本字段中获取价格

```
NSNumber *price = [NSNumber numberWithDouble:[[self stringAfterRemovingCurrencySymbol:self.priceTextField.text] doubleValue]]; 
```

当我打印如下值时

```
DLog(@"Price Value 1: %f",[[self stringAfterRemovingCurrencySymbol:self.buyTextField.text] doubleValue]);

DLog(@"Price Value 2: %@",price); 
```

这是输出（假设用户输入 150.00）

```
Price Value 1: 150.000000
Price Value 2: 150 
```

我想要的是

```
Price Value 1: 150.000000
Price Value 2: 150.00 
```

如果用户输入 150.85 ，我将得到 150.85 。但是当用户输入 .00 时，我没有得到 .00

我应该怎么做才能获得 .00 ？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T07:26:57.383

您可以将 NSNumber 的值作为双精度值并使用标准 printf 格式来指定精度：

```
DLog(@"Price Value 2: %.2f", [price doubleValue]); 
```

# r - emacs：扩展 R 函数的自动完成功能以包含命名空间

> ID：16208615
> 
> 赞同：2
> 
> 时间：2013-04-25T07:16:59.757
> 
> 标签：r, emacs, namespaces, ess

我正在使用 EMACS/ESS 作为`R`.

我发现引用在`base`其相关命名空间之外定义的函数很有帮助；除了作为一般的良好做法外，在包上运行时似乎也是必要`R CMD check`的。我真的很喜欢 EMACS 中的自动完成功能，并且想知道在自动完成函数名称时是否有办法扩展功能以包含命名空间。

例如（在`R`）：

```
library(stats) 
```

然后在`ESS`我开始输入时出现`dn`自动完成`dnorm`（灰色），我可以通过按来完成它`TAB`。

更好的是完成，`stats::dnorm`甚至`stats:::dnorm`这样我就不需要手动检查我正在使用的函数是否在 base. （对于一个相对较新的用户，记住*所有*函数的名称`base`可能需要很多）。

细节：

EMACS：2012-06-10 在 MARVINGNU Emacs 24.1.1 (i386-mingw-nt6.1.7601)

ESS 版本 12.04-4

冰柱（默认安装 c. 2012 年 10 月）。不知道如何找到版本信息。为了这。

如果这还不存在，任何指针都会受到欢迎。请注意，这是[密切相关](https://stackoverflow.com/questions/4682459/emacs-autocomplete-mode-extension-for-ess-and-r)的，但如果答案已经存在，那么我不太明白......

# javascript - AngularJS 的指令绑定

> ID：16208627
> 
> 赞同：1
> 
> 时间：2013-04-25T07:17:30.517
> 
> 标签：javascript, angularjs, angularjs-directive

我在 AngularJS 中创建了一个自定义指令。在链接函数中，我将 ng-model 和 ng-options 属性添加到内部模板，但不幸的是，绑定不起作用。但是当我将内部模板原样放入我的 html 文件时，一切正常。

```
application.directive("customSelect", function () {
var directive = {
    restrict: 'E',
    template: '<select name="ArrDeplocation" class="arrdepSelect"></select>',
    link: function (scope, elem, attr) {
        console.log('scope: ', scope);
        console.log('element: ', elem);
        console.log('attribute: ', attr);

        $(elem.children()[0]).attr('ng-model', 'model.selectedCity');
        $(elem.children()[0]).attr('ng-options', 'city for city in model.cities');

        $(elem.children()[0]).selectmenu();

    }
};
return directive;
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T08:13:54.077

我不明白为什么需要在链接函数中设置属性。您可以简单地放入您的模板中。

[http://plnkr.co/edit/9u6nkLYKHxBBiJ60mpbF?p=preview](http://plnkr.co/edit/9u6nkLYKHxBBiJ60mpbF?p=preview)

```
app.directive("customSelect", function () {
  var directive = {
    restrict: 'E',
    template: '<select name="ArrDeplocation" class="arrdepSelect"'
     + 'ng-model="model.selectedCity" ng-options="city for city in model.cities">    </select>',
    link: function (scope, elem, attr) {
      // run jquery mobile methods here...
    }
  };
  return directive;
}); 
```

您可能想在这里详细说明您真正想要实现的目标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-20T18:36:27.710

如果你想在链接函数中修改你的模板，那么你必须*重新编译*它。

**解决方案：[http ://plnkr.co/edit/bpiqXdQe91RJBaJXTPXO?p=preview](http://plnkr.co/edit/bpiqXdQe91RJBaJXTPXO?p=preview)**

```
app.directive("customSelect", function ($compile) {
  return {
    restrict: 'E',
    template: '<select name="ArrDeplocation" class="arrdepSelect"></select>',
    link: function (scope, elem, attr) {
      elem.find('select').attr({
        'ng-model':   'model.selectedCity',
        'ng-options': 'city for city in model.cities'
      });
      var tpl = elem.html();
      elem.html($compile(tpl)(scope));
      elem.find('select').selectmenu();
    }
  };
}); 
```

将`$compile("html string")`模板编译为：

> 用于将模板（DOM 元素/树）绑定到范围的链接函数

# asp.net - VB。网络和 MongoDB

> ID：16208628
> 
> 赞同：0
> 
> 时间：2013-04-25T07:17:35.590
> 
> 标签：asp.net, vb.net, mongodb, insert, hierarchical

如何使用 VB.net（不使用 MVC 或 Linq）在 mongoDB 中进行分层插入（并删除相同的）？

样本数据：

{“placeName”：“Testplace”，“properties”：{“property1”：“value1”，“property2”：“value2”}，“creator”：“MrX”}

我正在使用 mongodb C# 驱动程序。具有非分层数据的常规插入没有问题。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T07:39:13.817

我正在提供 C# 代码，希望您可以轻松地在 VB.NET 中进行转换

```
 BsonDocument properties = new BsonDocument().Add("P1", V1).Add("P2",V2);
     BsonDocument doc = new BsonDocument();
     doc["placeName"] = "TestPlace";
     doc["properties"] = properties; 
```

# javascript - 如何使用正则表达式替换字符串

> ID：16208629
> 
> 赞同：-6
> 
> 时间：2013-04-25T07:17:36.687
> 
> 标签：javascript, regex

```
var str = '@username(123) test@username2(234) test'
var newstr = '<a href="localhost/home/userid=123">username</a>test<a href="localhost/home/userid=234">username2</a>test' 
```

我怎么能做到这一点在javascript中使用正则表达式

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T07:26:35.370

```
var str = '@username(123) test@username2(234) test'
document.write(str.replace(/@(\w+?)\((\d+?)\)/g, '<a href="localhost/home/userid=$2">$1</a>'));
// Result: <a href="localhost/home/userid=123">username</a> test<a href="localhost/home/userid=234">username2</a> test 
```

# java - 如何在java中使用windows7蓝牙？

> ID：16208633
> 
> 赞同：2
> 
> 时间：2013-04-25T07:17:55.123
> 
> 标签：java, bluetooth

我的java代码：

```
 try {
        LocalDevice ld = LocalDevice.getLocalDevice();
        System.out.println("Address:" + ld.getBluetoothAddress());
        System.out.println("Name:" + ld.getFriendlyName());

        DiscoveryAgent agent = ld.getDiscoveryAgent();
    } catch (BluetoothStateException e) {
    } 
```

错误： **本机**库 bluecove_x64 不可用****

我看到了解决方案-> 参数：-d32 但是

error ***错误：此 Java 实例不支持 32 位 JVM。请安装所需的版本。Java 结果：1***

我的操作系统是 windows7 64bit 和 jdk jdk1.7.0_11 (64bit)

如何在java中使用windows7蓝牙？（服务器）

（我使用 lib -> blueCove 63 - [http://snapshot.bluecove.org/distribution/download/2.1.1-SNAPSHOT/2.1.1-SNAPSHOT.63/](http://snapshot.bluecove.org/distribution/download/2.1.1-SNAPSHOT/2.1.1-SNAPSHOT.63/)）

# google-maps-api-3 - Google 将 Api 版本 2 映射到 Google 地图 Api 版本 3

> ID：16208637
> 
> 赞同：0
> 
> 时间：2013-04-25T07:18:17.090
> 
> 标签：google-maps-api-3, google-maps-api-2

我正在使用以下代码来查找中心并放大使用 google maps api V2 的代码。

```
function calculaCentro(points){
alert("in calcula Centro");
    var gbounds = new GBounds(points);
    alert("gbounds is" +gbounds);
    var center = gbounds.mid();
    return center;
}

function calculaZoom(points){
alert("in calcula zoom");
    var gbounds = new GBounds(points);
    var n = new GLatLng(gbounds.min().y,gbounds.min().x);
    var s = new GLatLng(gbounds.max().y,gbounds.max().x);
    var zoom = map.getBoundsZoomLevel(new GLatLngBounds(n,s));
    return zoom;
} 
```

现在我想将它转换为谷歌地图 Api V3。但找不到 GBounds 的任何确切替代品。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T08:27:24.130

你想要的是 LatLngBounds

[https://developers.google.com/maps/documentation/javascript/reference#LatLngBounds](https://developers.google.com/maps/documentation/javascript/reference#LatLngBounds)

# sql-server-2008 - 在 sql server 2008 中将行转换为没有聚合的列并将列标题显示为第一列

> ID：16208647
> 
> 赞同：0
> 
> 时间：2013-04-25T07:18:41.683
> 
> 标签：sql-server-2008

我的输入是：

```
date      Costed   Celldata
8-Apr-13    1       15
15-Apr-13   1       24
22-Apr-13   1       36 
```

我需要输出为：

```
date       8-Apr-13  15-Apr-13 22-Apr-13
Costed        1         1          1         
Celldata     15         24         36 
```

我申请的查询是：

```
CREATE TABLE testing1(Spot_dt date, Costed INT, celldata INT)

INSERT INTO testing1 (Spot_dt,Costed,celldata) values ('2012-04-08',1,15);
INSERT INTO testing1 (Spot_dt,Costed,celldata) values ('2012-04-15',1,24);
INSERT INTO testing1 (Spot_dt,Costed,celldata) values ('2012-04-22',1,36);

DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT distinct ',' + QUOTENAME(Spot_dt) 
                    from testing1
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT Costed,' + @cols + ' 
             from 
             (
                select Spot_dt, Costed, CellData
                from testing1
            ) x
            pivot 
            (
                min(CellData)
                for Spot_dt in (' + @cols + ')
            ) p '

execute(@query) 
```

我收到的输出是：

```
8-Apr-13    15-Apr-13   22-Apr-13   
1           1           1           
15          24          36 
```

所以基本上我需要一个额外的列，在其中我可以将列标题作为行值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T08:24:42.823

以下应该有效：

```
DECLARE @cols AS NVARCHAR(MAX), @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT distinct ',' + QUOTENAME(Spot_dt) 
                    from testing1
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT valtype dates, ' + @cols + ' 
              from (select Spot_dt, Costed, CellData from testing1) as x
              unpivot (vals for valtype in (Costed, celldata)) as u
              pivot (min(vals) for spot_dt in (' + @cols + ')) as p'

execute(@query) 
```

（在围绕日期旋转数据之前，您需要取消旋转单独的列，以便初始数据集中的每一列在每个日期都有自己的行。）

SQLFiddle[在这里](http://sqlfiddle.com/#!3/ad20e/16)。

# android - 不循环的简单游戏循环？

> ID：16208649
> 
> 赞同：0
> 
> 时间：2013-04-25T07:18:45.360
> 
> 标签：android

我正在为一个简单的游戏做一个简单的游戏循环，但我只看到屏幕很短的时间。似乎游戏循环没有运行。我有布尔值 gameRunning ，当这个值为 TRUE 时，游戏循环应该继续运行 run() 方法，但它不会那样做！我一定错过了什么，但我不能用我的眼睛看到我错过了什么！谁能看到我错过了什么才能运行这个循环？一些帮助！谢谢！

编辑：如果有帮助的话，我添加了 MainActivity 的所有代码

```
public class MainActivity extends Activity  implements OnTouchListener {

// Variables and references
public static int screenWidth, screenHeight;
public static float xTouch, yTouch;
private GameLoop gameLoop;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    //setContentView(R.layout.activity_main);

    // Set screen to landscape
    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);

    // Set screen to full screen
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);

    // Remove title from screen
    requestWindowFeature(Window.FEATURE_NO_TITLE);

    // Get the width and height of the screen area
    Display display = getWindowManager().getDefaultDisplay();
    screenWidth = display.getWidth();
    screenHeight = display.getHeight();

    // Create a new object of GameLoop and pass this context
    gameLoop = new GameLoop(this);
    gameLoop.setOnTouchListener(this);
    setContentView(gameLoop);
}

@Override
protected void onPause() {
    // TODO Auto-generated method stub
    super.onPause();
    gameLoop.pause();
}

@Override
protected void onResume() {
    // TODO Auto-generated method stub
    super.onResume();
    gameLoop.resume();
}

@Override
public boolean onTouch(View v, MotionEvent event) {
    // TODO Auto-generated method stub
    xTouch = event.getX();
    yTouch = event.getY();

    switch (event.getAction()) {

    case MotionEvent.ACTION_DOWN:

        break;

    case MotionEvent.ACTION_UP:

        break;

    case MotionEvent.ACTION_MOVE:

        break;
    }

    // return false;
    return true; // This gets the coordinates all the time
}
} 
```

这是 GameLoop 类的代码：

```
public class GameLoop extends SurfaceView implements Runnable {

    // Variables and references
    private SurfaceHolder surfaceHolder;
    private Canvas canvas;
    private boolean gameRunning = false;
    private Thread gameThread = null;
    private Paint paint;

    // Constructor
    public GameLoop(Context context) {
        super(context);

        surfaceHolder = getHolder();

        // Create Paint object
        paint = new Paint();
    }

    public void pause() {
        gameRunning = false;
        while (true) {
            try {
                gameThread.join();
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
            break;
        }
        gameThread = null;
        System.exit (0);
    }

    public void resume() {
        gameRunning = true;
        gameThread = new Thread(this);
        gameThread.start();
    }

    @Override
    public void run() {
        // TODO Auto-generated method stub

        while (gameRunning) {
            if (!surfaceHolder.getSurface().isValid())
                continue;

        canvas = surfaceHolder.lockCanvas();

        // Call method to draw objects on screen
        drawObjects(canvas);

        surfaceHolder.unlockCanvasAndPost(canvas);
        }
    }

    // Method that draw everything on canvas
    private void drawObjects(Canvas canvas) {

        // Test
        paint.setAntiAlias(true);
        paint.setColor(Color.WHITE);

        // Clear screen with black color
        canvas.drawRGB(0, 0, 0);

        // Draw a circle
        canvas.drawCircle(100, 100, 100, paint);        
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T08:37:17.090

据我所知，您永远不会启动运行游戏循环的线程。

所以在某个地方你需要这样的东西

```
Thread th = new Thread(gameLoop);
th.start(); 
```

祝你好运！

# c - glibc - 获取具有包含指定地址的符号的共享库的句柄

> ID：16208652
> 
> 赞同：2
> 
> 时间：2013-04-25T07:18:51.263
> 
> 标签：c, posix, glibc, dladdr

像 dladdr 这样的东西给了我一个共享对象的动态库句柄，或者一种从共享对象的基地址获取句柄的方法。包含共享对象的文件可能已被移动或删除，所以不，我不能 dlopen() dladdr 给出的文件名。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-12T10:52:09.823

glibc 的 dlopen 句柄基于 link_map。我可以迭代所有的link_map，看看是否有一个l_addr 等于dladdr 给出的那个。该链接映射的地址是句柄。

Dietlibc 也使用 link_map 作为句柄。

对于 uClibc，还有另一个结构 - dyn_elf。它包含一个指向链接映射的指针。全局变量 _dl_symbol_tables 有一个指向 dyn_elf 链表头部的指针。

仿生使用自己的结构，其中包含 struct link_map 作为成员（不是指针）。

# python - 在“条形图”中显示列表的内容

> ID：16208654
> 
> 赞同：2
> 
> 时间：2013-04-25T07:19:06.233
> 
> 标签：python, python-3.x

我是 Python 新手，我正在尝试学习如何将列表与 for 和 while 循环结合起来，为即将在 Uni 举办的研讨会。不过，我绊倒了一件事：

基本上，我将数值存储在一个列表中，我想像这样显示它：

```
1  IIIII
2  II
3
4  III 
5  II 
```

所以我代表数字，即 3 = III

我尝试了这段代码（我已经在我的代码前面建立了计数作为列表）：

```
listIndex = 1
while listIndex < len(count):
    print(listIndex, " ", end='')
    for number in count[listIndex]:
        print("I", end='')
    print()
    listIndex += 1 
```

但我收到以下错误：

```
1   Traceback (most recent call last):
File "/Volumes/USB/workshop7.py", line 145, in <module>
for number in count[index]:
TypeError: 'int' object is not iterable. 
```

我没有看到我做错了什么，我查看了错误，但我不明白为什么我不能遍历那个 for 循环？

for 循环应该使用 listIndex 变量去到列表中的相应索引并检索值，将其显示为一系列是否与存储在那里的数字相对应？任何有助于理解我哪里出错的帮助将不胜感激。*这是为了评估*（5%），所以如果你能帮助我思考而不是给我答案，那将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T07:24:59.543

`count[listIndex]`是一个 int 值，而不是列表。您可以使用`range()`来制作列表，或者更好的是您可以使用“字符串乘法”，即`print('I' * count[listIndex])`省略`for`循环。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T07:24:25.420

因此，您有一个名为“count”的列表，其中包含计数，并且您正在使用 count[listIndex] 获取其中一个。结果是什么？一个int，对吧？

这意味着您的 for 循环正在尝试执行以下操作：

```
for number in 3:
    print("I", end='') 
```

“for number in 3”是在 Python 中进行循环的有效方法吗？编写 for 循环的更好方法是什么？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T08:06:02.470

1.  在 Python 中，列表是 0 索引的，所以你应该从 0 开始 list_index
2.  知道计数后，您无需循环打印“I”。在 Python 中，您可以简单地执行以下操作：

    `print 'I'*count[list_index]`

# android - 检查文件是否存在于文件夹中或不在 Android 的 sdcard 中

> ID：16208659
> 
> 赞同：1
> 
> 时间：2013-04-25T07:19:29.800
> 
> 标签：android, performance, android-download-manager

我正在构建一个 Android 应用程序，它需要一个空数据库位于 sdcard 的特定文件夹中。因此，我构建了一个代码，从服务器下载数据库并以编程方式插入 sdcard，这工作正常。现在的问题是当我从系统运行应用程序时，每次新数据库都通过替换旧数据库来占用。现在我想更改代码，就好像文件夹中不存在数据库文件然后我只需要下载并保存在特定文件夹中

我的代码在这里：

```
 String DownloadUrl = "http://myexample.com/android/timeexample.db";
     String fileName = "timeexample.db";

     DownloadDatabase(DownloadUrl,fileName);

public void DownloadDatabase(String DownloadUrl, String fileName) {
    try {
        File root = android.os.Environment.getExternalStorageDirectory();
        File dir = new File(root.getAbsolutePath() + "/timeexample/databases");
        if(dir.exists() == false){
             dir.mkdirs();  
        }
        URL url = new URL("http://myexample.com/android/timeexample.db");
        File file = new File(dir,fileName);

        long startTime = System.currentTimeMillis();
        Log.d("DownloadManager" , "download beginning");
        Log.d("DownloadManager" , "download url:" +url);
        Log.d("DownloadManager" , "download file name:" + fileName);

        URLConnection uconn = url.openConnection();
        uconn.setReadTimeout(TIMEOUT_CONNECTION);
        uconn.setConnectTimeout(TIMEOUT_SOCKET);

        InputStream is = uconn.getInputStream();

        BufferedInputStream bufferinstream = new BufferedInputStream(is);
        ByteArrayBuffer baf = new ByteArrayBuffer(5000);
        int current = 0;
        while((current = bufferinstream.read()) != -1){
            baf.append((byte) current);
        }
        byte[] buffer = new byte[1024];

        FileOutputStream fos = new FileOutputStream( file);
        fos.write(baf.toByteArray());
        fos.flush();
        fos.close();
        Log.d("DownloadManager" , "download ready in" + ((System.currentTimeMillis() - startTime)/1000) + "sec");

    }

    catch(IOException e) {
        Log.d("DownloadManager" , "Error:" + e);
        e.printStackTrace();
    }   
} 
```

如果每次我这样运行，我的数据都会丢失，因为空数据库正在占用。因此我的要求是如果数据库已经存在，则无需下载。我参考了很多例子来解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T09:02:44.590

当目录已经存在时，您需要从函数返回

这是你的代码

```
public void DownloadDatabase(String DownloadUrl, String fileName) {
try {
    File root = android.os.Environment.getExternalStorageDirectory();
    File dir = new File(root.getAbsolutePath() + "/timeexample/databases");
    if(dir.exists() == false){
         dir.mkdirs();  
    }

URL url = new URL("http://myexample.com/android/timeexample.db");
    File file = new File(dir,fileName); 
```

您需要将其更改为

```
public void DownloadDatabase(String DownloadUrl, String fileName) {
try {
    File root = android.os.Environment.getExternalStorageDirectory();
    File dir = new File(root.getAbsolutePath() + "/timeexample/databases");
    if(dir.exists() == false){
         dir.mkdirs();  
    }
    else 
      return 

URL url = new URL("http://myexample.com/android/timeexample.db");
    File file = new File(dir,fileName); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T07:35:47.210

尝试这个：

```
File extStore = Environment.getExternalStorageDirectory();
File myFile = new File(extStore.getAbsolutePath() + "/book1/page2.db");

if(myFile.exists()){
...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T07:31:13.217

检查数据库文件是否存在

```
File f = new File(Environment.getExternalStorageDirectory()+"/timeexample/databases/timeexample.db");
   if(f.exists())
   { 
     /* do whatever you want */ 
   } 
```

现在，Android 设备中有两种类型的存储可供您使用

```
boolean mExternalStorageAvailable = false;
boolean mExternalStorageWriteable = false;
String state = Environment.getExternalStorageState();

if (Environment.MEDIA_MOUNTED.equals(state)) {
    // We can read and write the media
    mExternalStorageAvailable = mExternalStorageWriteable = true;
} else if (Environment.MEDIA_MOUNTED_READ_ONLY.equals(state)) {
    // We can only read the media
    mExternalStorageAvailable = true;
    mExternalStorageWriteable = false;
} else {
    // Something else is wrong. It may be one of many other states, but all we need
    //  to know is we can neither read nor write
    mExternalStorageAvailable = mExternalStorageWriteable = false;
} 
```

# android - 自定义 ListView 未正确显示

> ID：16208661
> 
> 赞同：0
> 
> 时间：2013-04-25T07:19:32.997
> 
> 标签：android, custom-lists

我正面临这个例外：`java.lang.UnsupportedOperationException: addView(View, LayoutParams) is not supported in AdapterView`

这是我的代码：

```
protected void onCreate(Bundle paramBundle)
{
super.onCreate(paramBundle);
requestWindowFeature(1);
setContentView(R.layout.activity_main);
_listView = (ListView)findViewById(R.id.listView1);
final String[] arrayOfString = SMSHelper.getInstance(this).getSMSCategoryNames();
SMSHelper.getInstance(this).getSMSCountForCategory(arrayOfString[0]);
SMSHelper.getInstance(this).getSMSForCategory(arrayOfString[0]).get(0);
SMSHelper.getInstance(this).getSMSPreviewForCategory(arrayOfString[0], "eat");
MyCustomAdapter localMyCustomAdapter = new MyCustomAdapter(this, 0, getCategoriesData());
this.b = new Bundle();
_listView.setAdapter(localMyCustomAdapter);
_listView.setOnItemClickListener(new AdapterView.OnItemClickListener()
{
  public void onItemClick(AdapterView<?> paramAnonymousAdapterView, View paramAnonymousView, int paramAnonymousInt, long paramAnonymousLong)
  {
    Intent localIntent = new Intent(MainActivity.this, SmsList.class);
    localIntent.putExtra("Category", arrayOfString[paramAnonymousInt].toString());
    MainActivity.this.startActivity(localIntent);
  }
   });
  }

   class MyCustomAdapter extends ArrayAdapter<String>
{
Context ctx;
String[] listDataForView;
int paramArrayOfString;

public MyCustomAdapter(Context paramInt, int paramArrayOfString, String[] arg4)
{
  super(paramInt, paramArrayOfString, arg4);
  this.ctx = paramInt;
  this.paramArrayOfString = paramArrayOfString;
  this.listDataForView=arg4;
}

private String getCategoriesLength(int paramInt)
{
  return SMSHelper.getInstance(this.ctx).getSMSCountForCategory(this.listDataForView[paramInt].toString());
}
public class MyCustomHolder {
    public TextView  localTextView1,localTextView2;;

}
@Override
public View getView(final int paramInt, View paramView, ViewGroup paramViewGroup)
{
     View localView=paramView;
     MyCustomHolder holder = null;

  if(localView==null){
      localView = MainActivity.this.getLayoutInflater().inflate(R.layout.listitem, paramViewGroup);
      holder = new MyCustomHolder();
      holder.localTextView1 = (TextView)localView.findViewById(R.id.textView1);
      holder.localTextView2 = (TextView)localView.findViewById(R.id.textView2);

      localView.setTag(holder);
  }
  else
  {
      holder = (MyCustomHolder)localView.getTag();
  }
  if (paramInt % 2 == 0){
      localView.setBackgroundColor(Color.parseColor("#FFDDFEFE"));
    }

  holder.localTextView1.setText(listDataForView[paramInt].toString());
  holder.localTextView2.setText(getCategoriesLength(paramInt)); 

  return localView;

} 
```

}

**编辑** **LogCat** :--

```
 04-25 07:08:56.328: E/AndroidRuntime(935): FATAL EXCEPTION: main
 04-25 07:08:56.328: E/AndroidRuntime(935): java.lang.UnsupportedOperationException: addView(View, LayoutParams) is not supported in AdapterView
 04-25 07:08:56.328: E/AndroidRuntime(935):     at android.widget.AdapterView.addView(AdapterView.java:461)
 04-25 07:08:56.328: E/AndroidRuntime(935):     at android.view.LayoutInflater.inflate(LayoutInflater.java:415)
 04-25 07:08:56.328: E/AndroidRuntime(935):     at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
 04-25 07:08:56.328: E/AndroidRuntime(935):     at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
 04-25 07:08:56.328: E/AndroidRuntime(935):     at com.example.r.MainActivity$MyCustomAdapter.getView(MainActivity.java:137)
 04-25 07:08:56.328: E/AndroidRuntime(935):     at android.widget.AbsListView.obtainView(AbsListView.java:1315)
 04-25 07:08:56.328: E/AndroidRuntime(935):     at android.widget.ListView.makeAndAddView(ListView.java:1727)
 04-25 07:08:56.328: E/AndroidRuntime(935):     at android.widget.ListView.fillDown(ListView.java:652)
 04-25 07:08:56.328: E/AndroidRuntime(935):     at android.widget.ListView.fillFromTop(ListView.java:709)
 04-25 07:08:56.328: E/AndroidRuntime(935):     at android.widget.ListView.layoutChildren(ListView.java:1580)
      04-25 07:08:56.328: E/AndroidRuntime(935):    at android.widget.AbsListView.onLayout(AbsListView.java:1147)
 04-25 07:08:56.328: E/AndroidRuntime(935):     at android.view.View.layout(View.java:7035)
 04-25 07:08:56.328: E/AndroidRuntime(935):     at android.widget.RelativeLayout.onLayout(RelativeLayout.java:909)
 04-25 07:08:56.328: E/AndroidRuntime(935):     at android.view.View.layout(View.java:7035)
 04-25 07:08:56.328: E/AndroidRuntime(935):     at android.widget.FrameLayout.onLayout(FrameLayout.java:333)
 04-25 07:08:56.328: E/AndroidRuntime(935):     at android.view.View.layout(View.java:7035)
 04-25 07:08:56.328: E/AndroidRuntime(935):     at android.widget.FrameLayout.onLayout(FrameLayout.java:333)
 04-25 07:08:56.328: E/AndroidRuntime(935):     at android.view.View.layout(View.java:7035)
 04-25 07:08:56.328: E/AndroidRuntime(935):     at android.view.ViewRoot.performTraversals(ViewRoot.java:1045)
 04-25 07:08:56.328: E/AndroidRuntime(935):     at android.view.ViewRoot.handleMessage(ViewRoot.java:1727)
 04-25 07:08:56.328: E/AndroidRuntime(935):     at android.os.Handler.dispatchMessage(Handler.java:99)
 04-25 07:08:56.328: E/AndroidRuntime(935):     at android.os.Looper.loop(Looper.java:123)
 04-25 07:08:56.328: E/AndroidRuntime(935):     at android.app.ActivityThread.main(ActivityThread.java:4627)
 04-25 07:08:56.328: E/AndroidRuntime(935):     at java.lang.reflect.Method.invokeNative(Native Method)
 04-25 07:08:56.328: E/AndroidRuntime(935):     at java.lang.reflect.Method.invoke(Method.java:521)
 04-25 07:08:56.328: E/AndroidRuntime(935):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
 04-25 07:08:56.328: E/AndroidRuntime(935):     at      04-25 07:08:56.328: E/AndroidRuntime(935):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T07:27:49.380

试试这个：

```
if(localView==null)
{
      LayoutInflater  inflater = (LayoutInflater) ctx
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
             localView= inflater.inflate(R.layout.listitem, null); 
      holder = new MyCustomHolder();
      holder.localTextView1 = (TextView)localView.findViewById(R.id.textView1);
      holder.localTextView2 = (TextView)localView.findViewById(R.id.textView2);

      localView.setTag(holder);
  } 
```

# java - Java 中的 IMAP 客户端：JavaMail API 还是 Apache Commons Net？

> ID：16208665
> 
> 赞同：29
> 
> 时间：2013-04-25T07:19:55.310
> 
> 标签：java, email, imap, jakarta-mail, apache-commons

我必须用 Java 实现一个 IMAP 客户端。

使用 Apache Commons Net 库有哪些优势？它是否使实现更健壮和更灵活？

我如何处理返回值，它总是产生字符串。

例如：

```
public static void main(String[] args) throws Exception {
    IMAPClient client = new IMAPClient();
    client.connect(SERVER);
    client.login(USERNAME, PASSWORD);
    client.select("INBOX");
    client.fetch("1", "body[header]");
} 
```

我们可以通过以下方式将输出定向到字符串

```
client.addProtocolCommandListener(new PrintCommandListener(System.out, true)); 
```

但是我怎样才能得到一个文件夹列表作为文件夹实例而不是纯字符串输出呢？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2014-10-20T21:15:55.440

短篇小说：这取决于您的实际要求。

**如果您的客户端主要专注于发送和阅读邮件**，那么**JavaMail API**是事实上的标准高级 API，编写邮件、添加标题和/或附件会简单得多。

另一方面，**如果您打算提供 IMAP 协议的所有可能性**，则较低级别的**Apache Commons Net**库将允许更详细的操作，但代价是为简单操作提供更多样板代码。

只是为了完成这个答案，你不应该忘记**Apache Commons Email**，根据项目的[主页](http://commons.apache.org/proper/commons-email/)，它是*建立在 Java Mail API 之上的，它旨在简化*. 它更接近 JavaMail 而不是 Commons Net。

在不知道更多人想要做什么的情况下，很难给出更准确的答案......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-10-20T19:04:03.037

> 如何获取文件夹列表作为文件夹实例而不是纯字符串输出？

看起来 apache IMAPClient 是 IMAP 协议的低级包装器，因此没有提供比字符串更高级的东西。对于更高级别的 API，您可以查看[JavaMail](https://java.net/projects/javamail/pages/Home)库：

```
Session session = Session.getDefaultInstance(System.getProperties(),null);
Store store = session.getStore("imaps");
store.connect(this.host, this.userName, this.password);

// Get default folder
Folder folder = store.getDefaultFolder();

// Get any folder by name
Folder[] folderList = folder.list(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-07-08T16:00:04.750

考虑查看[从 Gmail 中检索未读电子邮件 - JavaMail API + IMAP](https://stackoverflow.com/questions/5366767/retrieve-unread-emails-from-gmail-javamail-api-imap?rq=1)

它是使用 JavaMail API 编码的，但在我看来，它的接口比 Apache 公共库要简单得多。

如果您真的想使用 Apache 公共库，请查看 javadocs 并查看您可以传递哪些其他参数`.select()`。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-09-05T13:37:43.260

我最近检查了一些现代替代品：

1.  [雅虎 IMAP 客户端](https://github.com/yahoo/imapnio)：支持使用 Java Futures 的异步 IO，但对于检查新邮件等简单用例来说，级别较低且可能过于复杂。
2.  [Email4J](https://github.com/jhult/email4j)：易于使用的高级 API，它在下面使用 Java Mail，但尚未在 Maven 中央，并且大型 PR 仍然打开（我正在使用 fork）

对于本地测试，我使用的是轻量级[docker-imap-devel](https://github.com/antespi/docker-imap-devel) docker 镜像。

可以在[IMAP 101: Manual IMAP Sessions](https://www.atmail.com/blog/imap-101-manual-imap-sessions/)中找到一个很好的介绍，查看 IMAP 协议的幕后（有助于调试） 。

*更新*：最后，使用好的旧[javax.mail.imap API](https://javaee.github.io/javamail/docs/api/com/sun/mail/imap/package-summary.html)是最简单的，它`Folder.open()`开箱即用，应该早点检查一下……还有一个实验`IdleManager`可以用来观察邮箱中的新消息带有提供的`ExecutorService`.

# javascript - JavaScript中的函数返回函数方法

> ID：16208670
> 
> 赞同：1
> 
> 时间：2013-04-25T07:20:17.953
> 
> 标签：javascript, functional-programming, closures

自从我不断学习JavaScript并开始更认真地使用以来，我已经有将近半年的时间了。JS 具有类似 C 的语法和其他部分，如闭包、动态类型、可选参数等。

我仍然看不到他强大的语言功能是：**返回函数的函数**：

```
function func(){
   return function(){
       ....
      return result;
   };
};

func()(); 
```

这很酷，我知道这是函数式语言的正常特性，但我从未在现实世界中使用过，我想知道你们中的任何人都必须更多地使用这种方法，以及在哪些情况下才能显示出他的真正力量。

我还在[jsFiddle](http://jsfiddle.net/bogdan_vq/2YR3k/1/)上做了一个小例子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T07:26:40.500

它在绑定事件时很有用。例子：

```
var element1 = document.getElementById('element1');
var element2 = document.getElementById('element2')

element1.addEventListener('click', someEventHandler('action1'));
element2.addEventListener('click', someEventHandler('action2'));

function someEventHandler(act){
    return function(e){
       switch (act){
           case 'action1':
               // do something;
           break;
           case 'action2':
               // do other thing
           break;
       }
    }
} 
```

见[小提琴](http://jsfiddle.net/3wsPr/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T07:32:32.143

另一个用例：为第一次和后续运行执行不同操作的函数：

```
function test() {
    alert("the first call");
    test = function() {
        alert("new function");
    }
} 
```

# c# - 如何在 C# 中将 Int 转换为时间？

> ID：16208671
> 
> 赞同：10
> 
> 时间：2013-04-25T07:20:27.577
> 
> 标签：c#, datetime, time

我有整数值，如 06,07,08,.....,16,17,18,...

我想将此整数值转换为 24 小时时间格式。

我正在做这样的事情

```
//fromTime holds one of the integer value.
DateTime fromTimeDate = DateTime.ParseExact(fromTime.ToString(), 
                                              "HH", 
                                              CultureInfo.InvariantCulture);  

string fromtimestring = fromTimeDate.ToString("hh:mm tt"); 
```

但它给出了错误

> “字符串未被识别为有效的日期时间。”

解析时。

我在这里做错了什么。?

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-04-25T07:25:22.127

请尝试以下代码：

```
int val = 16;
TimeSpan result = TimeSpan.FromHours(val);
string fromTimeString = result.ToString("hh':'mm"); 
```

实际上，我认为 DateTime 不是代表您需求的正确类型，因为您只关心一天内的时间。日期也代表这一天，你不能截断它（据我所知）。

请参阅[TimeSpan.FromHours 方法](http://msdn.microsoft.com/library/system.timespan.fromhours.aspx)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-25T07:27:55.577

最简单的事情是：

```
DateTime time = Date.Today + new TimeSpan (0, 0, seconds); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-25T07:27:30.937

它只能由于两个可能的原因而失败。

*   首先，您`fromTime`持有一位数整数，从`0`to `9`，并且因为它`9`不是`09`，所以它会因 format 失败`HH`。
*   第二个原因可能是整数大于`23`或小于`0`。

您可以将格式修改`H`为对两者都适用的单个数字。

```
DateTime fromTimeDate = DateTime.ParseExact(fromTime.ToString(), "H", CultureInfo.InvariantCulture);   //fromTime holds one of the integer value. 
```

以上将解析从`0`到的任何数字`23`。

顺便说一下`TimeSpan`，`DateTime`您可以将其转换为`TimeSpan`使用[TimeSpan.FromHours](http://msdn.microsoft.com/en-us/library/system.timespan.fromhours.aspx)方法。

```
int fromTime = 23;
TimeSpan ts = TimeSpan.FromHours(fromTime); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-25T07:28:11.817

“HH”格式需要两位数，而`09`整数就是“9”。

使用 a`fromTime.ToString("00")`强制前导 0。

请注意，该 DateTime 的*日期*部分将是“今天”。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-25T07:41:00.303

如果您实际上*有*一个表示小时的 int，则根本不需要进行任何解析：

```
int hour = 23;
var today = DateTime.Today;
var time = new DateTime(today.Year, today.Month, today.Day, hour, 0, 0); 
```

或者（上面@gean08答案的略微修改版本）：

```
var time = DateTime.Today + TimeSpan.FromHours(hour); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-25T07:27:34.457

您编写的代码是正确的，请检查一次............

**“fromTime”值可能是单个数字，例如“6”而不是“06”或“0”或“其他超过 24 的数字”**

“字符串未被识别为有效的日期时间。” 当您在下面的行中使用“hh”而不是“HH”时，您将收到此错误............

```
DateTime fromTimeDate = DateTime.ParseExact(fromTime.ToString(), "HH", 
CultureInfo.InvariantCulture); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-09-09T05:26:24.047

```
 public string timeformat(int time) {
    string hr, min;
    min = Convert.ToString(time % 100);
    hr = Convert.ToString(time / 100);
    if (hr.Length == 1) hr = "0" + hr;
    if (min.Length == 1) min = "0" + min;
    return hr + ":" + min;
} 
```

# spring - 找不到引用的 bean 'org.springframework.security.securityContextSource'

> ID：16208672
> 
> 赞同：0
> 
> 时间：2013-04-25T07:20:30.557
> 
> 标签：spring, spring-security

我正在配置spring security ldap。但是在 spring-security.xml 中，我得到了这个警告

```
Referenced bean 'org.springframework.security.securityContextSource' not found 
```

`<security:authentication-manager>`在线_

谁能告诉我，可能是什么问题？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T10:05:02.390

请确保您有依赖项 spring-ldap-core。3.1.3 示例

```
<dependency>
    <groupId>org.springframework.security</groupId>
    <artifactId>spring-security-ldap</artifactId>
    <version>3.1.3.RELEASE</version>
</dependency> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T15:21:28.387

除了依赖项要求之外，请确保`ldap.xml`在 中引用了您的配置文件（我希望您的 bean 实际在其中声明）`web.xml`，但从事物的声音来看，迈克尔的回答可能是正确的。

# c# - 由于第三个非托管库，当 c# 应用程序崩溃时，是否可以在 Windows 中获取核心转储或堆栈跟踪

> ID：16208674
> 
> 赞同：1
> 
> 时间：2013-04-25T07:20:34.283
> 
> 标签：c#, .net, windows

我有一个应用程序正在使用一些（可能是托管的，这里不确定）c# 包装器用于非托管 c++ 库（在本例中为 gtk#）。

当应用程序由于 c++ 库中这个非托管代码中的一些问题而崩溃时，我的应用程序崩溃了

“binary.exe 已停止工作

Windows 正在寻找解决此问题的方法..."

我的问题是，在我看来，这种问题无论如何都不能作为异常捕获，因为它是由非托管代码引起的。（我到处都在捕捉各种异常）

我的问题是：有没有办法以某种方式有效地分析这次崩溃？在 linux 中，崩溃的 mono 将生成一个 coredump 并将大量调试信息打印到终端中，这可能很有用。但这不是Windows中的情况。有没有办法从崩溃的那一刻获得核心转储或至少是我的应用程序的堆栈跟踪，以便我可以找出我的托管代码的哪一行（在调用导致崩溃的非托管代码之前）我的应用程序崩溃了？

# sencha-touch-2 - Sencha Touch 2.2 中的自定义 API 和代理

> ID：16208675
> 
> 赞同：1
> 
> 时间：2013-04-25T07:20:37.377
> 
> 标签：sencha-touch-2, sencha-cmd

我正在为我的 Sencha Touch 2.2 应用程序使用自定义代理和 API。API 用于连接我们使用的框架，该框架处理所有数据和身份验证。

当我使用代理和 API 而不使用 Sencha CMD 构建时，我没有任何问题。当我使用 Sencha CMD 构建应用程序时，命令“sencha app build testing”，API 没有正确添加。它已添加到资源中，但未从我的代理中正确引用。因此我无法使用该应用程序，因为代理无法加载 API 并给出错误。

我将 APIy 添加到我的 app.json 中：

```
"js": [
   {
        "path": "resources/{foldername}/{APIName}.js"
   }
] 
```

我想我也应该将它添加到另一个地方以使其正常工作，但我不确定在哪里。我需要代理中的 API，我的代理位于文件夹 'app/{foldername}/proxy' 中，包含以下元素：

```
Ext.define('{ProxyName}.proxy', {
    singleton: true,
    _api: null,
    api : function() {
        if(!this._api) {
            this._api = new {apiName}.Data;
            this._api.allowDataTransfer(true);
    }
});

Ext.define('{ProxyName}.proxy.{ProxyName}proxy', {
    extend: 'Ext.data.proxy.Proxy',
    // implements CRUD and references to {ProxyName}.proxy.api() a few times
}); 
```

在 app.js 中，我设置了代理的路径，`Ext.Loader.setPath()`并将代理添加为必需项。

如何正确地将我的 API 添加到我的应用程序中？

# microsoft-metro - 如何在 Metro 应用程序 windows8 中实现随机访问数据虚拟化？

> ID：16208679
> 
> 赞同：2
> 
> 时间：2013-04-25T07:20:56.487
> 
> 标签：microsoft-metro

我有一个与 gridview 绑定的大型集合。我只想在滚动条移动时加载它。这样 UI 就不会长时间锁定。我发现它是通过数据虚拟化完成的，但不知道如何实现。

请帮我！

# symfony - symfony2 翻译转义点

> ID：16208684
> 
> 赞同：0
> 
> 时间：2013-04-25T07:21:20.653
> 
> 标签：symfony, escaping, translation

我在 Symfony2 中公开翻译时遇到问题。

例如：

```
<p>{{ 'You haven\'t confirmed email address yet. We can\'t inform you }}</p> 
```

在 message.en.yml 中：

```
'you haven''t confirmed email address yet':
    ' We can''t inform you': 
```

我希望那个点（。）表现得像普通点，而不是这样。 **如何逃脱这个角色？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T08:11:10.717

当您使用[“类固醇上的翻译组件”](https://github.com/schmittjoh/JMSTranslationBundle)时存在此问题- JMS 翻译包，因为它在生成 YML 文件时支持级别嵌套。Dot 用于执行此操作并且无法转义（到目前为止我还没有发现这种可能性）。可能唯一的解决方案是禁用级别嵌套。不幸的是，需要修改包中的一行。打开`JMS\TranslationBundle\Translation\Dumper\ArrayStructureDumper.php`并更改第 26 行：

```
private $prettyPrint = false; 
```

或直接使用`setPrettyPrint(false)`函数。

# ruby - Object#respond_to 如何？工作？

> ID：16208692
> 
> 赞同：1
> 
> 时间：2013-04-25T07:21:42.880
> 
> 标签：ruby

请参阅此类定义：

```
class T
  def respond_to?(name)
    name.to_s == 't' || super
  end

  def t; p 't'; end
  def t2; p 't2'; end
end 
```

当我打电话

```
T.new.respond_to? :t2 
```

似乎它会返回 false，因为它要么等于 't'，要么不响应 T 的超类，即 Object。但是，它返回 true。那么有人可以解释这是如何工作的吗？

更新：我意识到我之前的想法是错误的。

```
class P
  def t; self.class; end
end

class C < P
  def t
    p self.class
    p super
  end
end 
```

当我打电话给 C.new.t

我希望结果是：

```
C
P 
```

但是，我得到了：

```
C
C 
```

那么返回respond_to？问题，当我调用 super 时，它运行 Object#respond_to?，但仍在 C 的上下文/范围内，因此它返回 true。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T07:25:12.003

`super`并不意味着检查它是否响应'`T`的超类，而只是意味着使用`respond_to`从 ' 的超类扩展的方法`T`。

因为`T`有实例方法`t2`，所以会返回`true`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T12:08:08.340

super 并不意味着“忘记你是 T 的一个实例”，它意味着调用你的超类的实现`respond_to?`

该实现不是硬编码来检查对象的方法，它是一个通用的实现，它遍历对象的祖先检查方法的存在。

# oracle - SSMA for Oracle：将长原始数据映射到图像

> ID：16208703
> 
> 赞同：1
> 
> 时间：2013-04-25T07:22:03.067
> 
> 标签：oracle, sql-server-2008, migration

我需要将数据库从 Oracle 迁移到 MsSql 2008。我的问题是，我需要将 long raw 从 Oracle 映射到 MsSql 中的 Image。不幸的是，当我想更改映射时，ssma 工具的组合框中没有选项。

是否可以配置 ssma 以将 long raw 映射到图像？

PS 我知道 Image 是一种已弃用的类型，但我不能使用不同的类型。

# events - 如何获得 YouTube 视频的结束事件

> ID：16208704
> 
> 赞同：1
> 
> 时间：2013-04-25T07:22:03.690
> 
> 标签：events, video, youtube

我在有一张图片的网站上工作。单击该图像会打开一个 jQuery 对话框。在此对话中，我打开 iframe，iFrame 的 src 是 YouTube 视频 URL。我希望当视频停止时，页面应该自动重定向到联系我们页面。

下面是当有人点击视频图像时我用来打开对话的 JavaScript 代码。

```
<script type="text/javascript" >
        $(function() {
            $( "#dialog" ).dialog({
                autoOpen: false,
                position:['',100],
                show: {
                    effect: "blind",
                    duration: 1000
                },
                hide: {
                    effect: "fade",
                    duration: 1000
                }
            });
            $( "#opener" ).click(function() {
               $( "#dialog" ).dialog( "open" );
               $("#vieoplayId").attr("src","http://www.youtube.com/embed/T6DJcgm3wNY?autoplay=1");
            });
       }); 
```

下面是 HTML 代码

```
<div id="dialog">
   <div id="dialog1">
      <iframe  id="vieoplayId"  src="about:blank" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>
     </div>
</div>                                    
 <div class="video_container">
    <img src="../images/img1.jpg" id="opener" style="cursor:pointer;">
 </div> 
```

# php - Yii - Gii 模块是否支持对外关系？

> ID：16208719
> 
> 赞同：2
> 
> 时间：2013-04-25T07:22:55.137
> 
> 标签：php, mysql, yii, gii

我是 Yii 的新手，我想知道 gii 它是否支持表的关系？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T09:40:27.073

如果您在引用列的注释中包含如下格式，Gii 将为 MyISAM 表创建关系：

`CONSTRAINT FOREIGN KEY (name_of_this_field) REFERENCES related_table_name(related_field_name)`

# android - 如何在单个活动中显示 2 个不同的菜单选项

> ID：16208720
> 
> 赞同：4
> 
> 时间：2013-04-25T07:22:55.850
> 
> 标签：android

我遵循[了本教程](http://android-er.blogspot.com/2009/12/implement-option-menu-using-xml.html)，该教程在此行中返回 True 时显示菜单选项：`myMenuInflater.inflate(R.menu.menu, menu);`

当值返回 false 时，如何添加另一个菜单选项？我想在同一个菜单按钮中显示 2 个不同的菜单选项。我的代码：

```
import android.view.MenuItem;
import android.widget.Toast;
public class AndroidOptionMenu extends Activity {
  /** Called when the activity is first created. */ 
  @Override  public void onCreate(Bundle savedInstanceState)
  {      
      super.onCreate(savedInstanceState); 
      setContentView(R.layout.main); 
  } 
  @Override public boolean onCreateOptionsMenu(Menu menu)
  {
      MenuInflater myMenuInflater = getMenuInflater();
      myMenuInflater.inflate(R.menu.menu, menu);     
      return true;
  }
  @Override public boolean onOptionsItemSelected(MenuItem item) 
  {  
      switch(item.getItemId()) {   
      case(R.id.menu_OK):
          Toast.makeText(this, "OK", Toast.LENGTH_LONG).show(); 
          break; 
      case(R.id.menu_help):
          Toast.makeText(this, "Help", Toast.LENGTH_LONG).show();  
          break; 
      case(R.id.menu_Cancel):  
          Toast.makeText(this, "Cancel", Toast.LENGTH_LONG).show();
          break; 
      }   
      return true; 
  } 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T07:45:08.197

你不能。

至少不使用 onCreateOptionsMenu() 的返回值。

来自[onCreateOptionsMenu() 的 Android 文档](http://developer.android.com/reference/android/app/Activity.html#onCreateOptionsMenu%28android.view.Menu%29)： `You must return true for the menu to be displayed; if you return false it will not be shown.`

您需要找到另一种方法来决定何时显示第一个菜单以及何时显示第二个菜单，然后您可以执行以下操作：

```
@Override public boolean onCreateOptionsMenu(Menu menu)
{
      MenuInflater myMenuInflater = getMenuInflater();
    if(showFirstMenu)
    {
        myMenuInflater.inflate(R.menu.menu, menu);     
    } else {
        myMenuInflater.inflate(R.menu.menu2, menu); // here you show the other menu
    }
      return true;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T08:35:28.037

我记得，您可以使用 onPrepareOptionsMenu 设置运行时在菜单中显示的菜单项。有了它，您可以将菜单项分组为第一个菜单或第二个菜单，然后选择要显示的菜单项。你可以试试；

```
 @Override 
    public boolean onPrepareOptionsMenu(Menu menu)
    {

        MenuInflater myMenuInflater = getMenuInflater();
        if(condition)
        {
          myMenuInflater.inflate(R.menu.menu, menu);     
        } else {
          myMenuInflater.inflate(R.menu.menu2, menu); // here you show the other menu
        }
        return true;
    } 
```

我希望这行得通。

# eclipse - Git & Eclipse：处理用户特定的项目文件

> ID：16208721
> 
> 赞同：1
> 
> 时间：2013-04-25T07:22:58.520
> 
> 标签：eclipse, git

我对 git 中的项目和类文件处理有一个一般性问题：

当然，解决方案应该适用于具有特定环境文件的不同类型的项目，这些文件对于原始构建过程不是必需的，而仅用于设置用户环境：

拥有在 Eclipse 工作区中交互的 x 个项目。这些项目中的每一个都有一个 .classpath 和一个 .project 文件以及一个 .settings 文件夹。

现在，我想确保存储库中有这些文件的初始“原始”版本，这些文件必须适应使用此存储库的用户，并确保这些文件不会由于这种环境而被提交-具体修改过程。

我可以避免这种情况吗？git里面有没有一种flag，表示以后会忽略文件的修改？

.gitignore 在这种情况下不是有效的选项，因为包含在此文件中的文件在最初提交时不会被忽略。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T15:25:31.000

在我看来这是不可能的。但是有一个简单的替代方案：不要将初始版本作为文件提供在 git 存储库中，而是由脚本创建或从另一个位置复制（它本身可能再次在您的存储库中）。然后你可以从一开始就 gitignore 你的文件。

例如，一个非常简单的解决方案是将[Ant 构建器](http://help.eclipse.org/juno/index.jsp?topic=/org.eclipse.platform.doc.user/gettingStarted/qs-93_project_builder.htm)添加到项目的构建器列表中。该 Ant 脚本可以查看您的设置文件并从某个共享位置复制它们、就地修改它们或做任何其他神奇的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T07:31:22.077

我认为您正在寻找[锁定](http://gitolite.com/gitolite/locking.html) 文件。查看链接，让我知道这是否是您要查找的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-07T11:32:10.540

您可能希望使用[`git update-index --assume-unchanged`](https://www.git-scm.com/docs/git-update-index)which 将在提交时忽略这些文件。

不过要小心，如果它们在其他地方被改变（例如被没有改变的人`assume-unchanged`）：

> 如果 Git 需要修改索引中的这个文件，例如在提交合并时，Git 将失败（优雅地）；因此，如果假定的未跟踪文件在上游发生更改，您将需要手动处理这种情况。

考虑到您想要应用它的文件类型，它可能不会那么频繁（例如，当您更新项目类路径时，这应该很少......），因此用户（或 repo 中的脚本）可以小心它自己。

# python - 针对多种类型的 NDB 查询

> ID：16208725
> 
> 赞同：1
> 
> 时间：2013-04-25T07:23:14.590
> 
> 标签：python, google-app-engine

是否可以通过一个查询来查询多种（我正在使用 NDB 模型）？

我正在尝试构建一个类似论坛的消息源，您可以在其中发布普通论坛类型的评论，还可以发布其他内容，例如照片、投票等。

我会让所有这些提要项都属于一个共同的祖先（它们所属的页面）并对此进行查询，但我相信这会极大地限制写入吞吐量。

所以我需要能够在一个查询中查询页面的所有提要项目，并且希望使用单独的模型（如果可能的话）。我可以在应用程序中制作一些假模型来实现这一点（并且对所有类型只使用一种 gae），但想知道是否有人有任何其他想法。

非常感谢你

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T07:42:39.793

你应该使用这个[`PolyModel`](https://developers.google.com/appengine/docs/python/datastore/polymodelclass)类：

> PolyModel 类是数据模型定义的超类，它本身可以是其他数据模型定义的超类。从 PolyModel 类生成的查询可以具有作为该类或其任何子类的实例的结果。

# mongodb - Mongo 数据库占用的磁盘空间比应有的多得多

> ID：16208726
> 
> 赞同：8
> 
> 时间：2013-04-25T07:23:17.247
> 
> 标签：mongodb

在我的 mongo 数据库中，我有一个 5GB 的集合，一个 10MB 的集合，还有一些没有上限的集合。没有封顶的文件包含超过 20 个小文档。

经过长时间（4 小时）压力测试（仅写入 5GB 上限集合），我的数据库使用 18GB。

这就是我的 db.stats 所说的（以 MB 为单位的值）：

```
data-db:PRIMARY> db.stats(1024*1024)
{
    "db" : "data",
    "collections" : 9,
    "objects" : 8723395,
    "avgObjSize" : 208.8405255064112,
    "dataSize" : 1737,
    "storageSize" : 5130,
    "numExtents" : 12,
    "indexes" : 19,
    "indexSize" : 2534,
    "fileSize" : 18423,
    "nsSizeMB" : 16,
    "ok" : 1
} 
```

这是 5GB 的收集统计信息（以 MB 为单位的值）：

```
data-db:PRIMARY> db.sms_message_event.stats(1024*1024)
{
    "ns" : "data.sms_message_event",
    "count" : 8723300,
    "size" : 1737,
    "avgObjSize" : 0.00019912189194456226,
    "storageSize" : 5120,
    "numExtents" : 3,
    "nindexes" : 6,
    "lastExtentSize" : 1026,
    "paddingFactor" : 1,
    "systemFlags" : 1,
    "userFlags" : 0,
    "totalIndexSize" : 2534,
    "indexSizes" : {
        "_id_" : 395,
        "t_1_when_-1" : 475,
        "smsc_message_id_1" : 185,
        "user_id_1_t_1_when_1" : 481,
        "message_id_1" : 318,
        "virtual_number_recipient_when_index" : 678
    },
    "capped" : true,
    "max" : 2147483647,
    "ok" : 1
} 
```

那么为什么 fileSize 比 storageSize 大这么多呢？我现在什至无法运行 repairDatabase() ，但我在每个非上限集合上尝试了 compact() ，但没有结果。实际上，这是预料之中的，因为 db 在压力测试之前是干净的。我的意思是文件被删除了，不仅仅是收藏被删除了。

从日志中，我可以看到在压力测试期间以大约 1 小时的间隔创建了额外的数据文件。

一些日志： http: [//pastie.org/private/t8u9caxstafbjdybgwtsfw](http://pastie.org/private/t8u9caxstafbjdybgwtsfw)

更新：又过了一个晚上，又通过了 4 小时压力测试，它是 28GB :(

```
data-db:PRIMARY> db.stats(1024*1024)
{
    "db" : "data",
    "collections" : 9,
    "objects" : 8724995,
    "avgObjSize" : 208.840894006243,
    "dataSize" : 1737,
    "storageSize" : 5130,
    "numExtents" : 12,
    "indexes" : 19,
    "indexSize" : 2590,
    "fileSize" : 28658,
    "nsSizeMB" : 16,
    "ok" : 1
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-27T18:07:11.707

发生这种情况是因为 MongoDB 在重新使用为上限集合分配的空间时出现错误。它已被归档为[SERVER-9489](https://jira.mongodb.org/browse/SERVER-9489)，将被分类并希望很快得到修复。

您可以在不耗尽磁盘空间的情况下继续运行压力测试的方法是在测试完成后删除测试数据库目录，然后在运行新测试时创建一个新目录（假设您不需要重用相同的数据）。如果您确实需要相同的数据，则可以使用 mongodump 将其保存在运行之间，尽管可能还有其他更简单的选项取决于您的确切使用情况。

# sql - SQL查询更新同一张表

> ID：16208731
> 
> 赞同：-1
> 
> 时间：2013-04-25T07:23:40.267
> 
> 标签：sql, sql-server-2008

我有一个下表

```
Table A
Col1  Col2        Col3
Ant   sugar,ice   2,3
Fly   sugar,ice   2,3
jack  water,dent  4,5
pack  water       4,5
hero  sugar,ice   2,3 
```

我想检查表格数据并且必须将表格更新为

```
Col1  Col2        Col3
Ant   sugar,ice   2,3
Fly   Same as Ant 2,3
jack  water,dent  4,5
pack  water       4,5
hero  Same as Ant 2,3 
```

帮助解决问题，我制作了示例表以了解感谢和问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T07:27:51.040

对于不同的 RDBMS，语法可能会有所不同，但由于您没有指定一个，因此以下查询应该非常接近“标准”SQL，并且应该适用于大多数引擎：

```
UPDATE "Table A" AS A1
SET Col2 = 
(
    SELECT 'Same as ' + MIN(A2.Col1) 
    FROM "Table A" AS A2 
    WHERE A2.Col2 = A1.Col2 
    AND A2.Col1 < A1.Col1
)
WHERE EXISTS
(
    SELECT 1
    FROM "Table A" AS A2 
    WHERE A2.Col2 = A1.Col2 
    AND A2.Col1 < A1.Col1
) 
```

注意：恕我直言，这对于表模式来说绝对是*可怕*的设计，我认为可以肯定地说我永远不会使用以这种方式设计的表。您可能值得阅读一本关于数据库设计的好书，尤其是关于规范化的部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T07:30:44.180

为了`SQL Server`

```
UPDATE  a
SET     a.col2 = CASE WHEN a.col1 = b.min_col1 
                    THEN a.col2
                    ELSE 'Same as ' + b.min_col1
                END
FROM    TableA a
        INNER JOIN
        (
            SELECT  col2, MIN(col1) min_col1
            FROM    TableA
            GROUP   BY col2
        ) b ON a.col2 = b.col2 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!3/2c14a/1)

输出

```
╔══════╦═════════════╦══════╗
║ COL1 ║    COL2     ║ COL3 ║
╠══════╬═════════════╬══════╣
║ Ant  ║ sugar,ice   ║ 2,3  ║
║ Fly  ║ Same as Ant ║ 2,3  ║
║ jack ║ water,dent  ║ 4,5  ║
║ pack ║ water       ║ 4,5  ║
║ hero ║ Same as Ant ║ 2,3  ║
╚══════╩═════════════╩══════╝ 
```

# android - 在所有活动中重用标题 ui 设计和功能

> ID：16208736
> 
> 赞同：3
> 
> 时间：2013-04-25T07:23:50.930
> 
> 标签：android, android-fragments, code-reuse, reusability

我正在开发在所有活动中具有相同标题的应用程序，其中在图像视图、按钮、文本视图等中有一些视图。

现在问题是我想在所有活动中使用这些标题视图，但我不想在每个活动中重新编码和重新设计它。所以是否可以创建标题视图片段并重用其 ui和所有其他活动中的功能。

*   如果没有，那么有什么想法可以使其可重用标头？
*   如果是，那怎么办？

谢谢您的帮助。！

根据我的研究，这个问题的更新！我已经研究并喜欢它可以通过使用 Fragments 轻松实现。但我仍然不明白怎么做？我怎样才能实现该功能？根据这个： [android app中的可重用UI](https://stackoverflow.com/questions/7106625/reusable-ui-in-android-app)

和这个：

[带有片段的可重用用户界面](https://stackoverflow.com/questions/9827072/why-use-fragments)

任何链接和代码都会有所帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T08:33:49.810

伙计，我得到了答案，我的一位朋友与我分享了一个链接，该链接解决了我的问题

链接是： [所有活动的相同标题在所有活动上都相同](https://stackoverflow.com/questions/11579635/common-header-in-different-activities-using-baseactivity-in-android)

申请后填写答案：

这是用于为标头提供功能的 BaseActivity 类

```
abstract public class BaseActivity extends Activity{
    ImageView imVBattery,imVWIFI,imVSabaqLogo;
    Button btnSettings,btnTheme;
    WifiManager wifiManager;

    //set resources to all the contols

    public void setHeader(){    
    imVBattery=(ImageView)findViewById(R.id.imVBattery);
    imVWIFI=(ImageView)findViewById(R.id.imVWIFI);
    imVSabaqLogo=(ImageView)findViewById(R.id.imVSabaqLogo);
    btnSettings=(Button)findViewById(R.id.btnSettings);
    btnTheme=(Button)findViewById(R.id.btnTheme);
    wifiManager= (WifiManager)this.getSystemService(getBaseContext().WIFI_SERVICE);

    }

} 
```

> > 这是我扩展这个基础活动的主要课程：

```
public class Main extends BaseActivity implements OnClickListener{

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.s_main);
            //with the help of this i assign all resources to controls of headers
        setHeader();
    }

} 
```

感谢所有回复并帮助我的人。！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T07:49:45.810

您是否尝试过实现 ViewStub。在这里你得到你的解决方案。

[在这里检查。](http://www.technotalkative.com/android-viewstub-example/)

# plot - 带标签的绘图线

> ID：16208737
> 
> 赞同：1
> 
> 时间：2013-04-25T07:23:58.457
> 
> 标签：plot, label, gnuplot

有一个有几个痕迹的情节。我想用标签绘制一条轨迹。

```
plot "-" ls 3 notitle ,\
     "-" ls 4 title "Trace 1", \
     "-"  ls 5 title "Trace 2" ,\
     "-" with points ls 6 notitle
P1 1.5 17.962924780409974
P2 1.7 16.87322975464215
P3 1.9 15.960477502420257
P4 2.1 15.181442305531792
P5 2.3000000000000003 14.506370414707312
P6 2.5000000000000004 13.914021704740868
P7 2.7000000000000006 13.38877362790406
P8 2.900000000000001 12.918844829323474
P9 3.100000000000001 12.495160353435423
P10 3.300000000000001 12.110601416389963
e
... 
```

如何绘制第一条迹线以便出现`labels`在该点旁边？`P0``P10`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T12:06:36.597

一般来说，当您的数据存储在文件中时，它会更容易。所以为了简短起见，我在这里假设数据是从“Datafile.dat”中读取的

如果您为绘图使用“带标签”选项，则可以在给定位置绘制标签而不是点。

```
plot "Datafile.txt" using 2:3:1 with labels 
```

“使用”的前两个参数指定 (x,y) 位置，而第三个参数告诉标签在哪里。

现在这将只显示点而不显示标签。所以我们可以添加另一个仅显示点的内容，并为标签添加一个偏移量（0.05），这样标签就不会与点重叠：

```
plot "Datafile.txt" using ($2+0.05):($3+0.05):1 with labels, "" using 2:3 
```

现在，如果您想为每个跟踪提供不同的选项（ls、标题等），您可以应用“每个”选项来选择特定的行（跟踪）。例如 "every ::1::1 " 将仅绘制第二条轨迹（第一行是 "0" ）。

总之，你应该对这个解决方案没问题：

```
plot "Datafile.txt" u ($2+0.05):($3+0.05):1 with labels notitle,\
     "" u 2:3 ev ::0::0 ls 3 "Trace 1",\
     "" u 2:3 ev ::1::1 ls 4 "Trace 2",\
     "" u 2:3 ev ::2 ls 6 notitle 
```

# ruby-on-rails - 在 iframe 内的浏览器中显示附加的 pdf - rails

> ID：16208738
> 
> 赞同：3
> 
> 时间：2013-04-25T07:23:59.563
> 
> 标签：ruby-on-rails

我有一个模块，它具有上传 pdf 文件的附件功能。我需要在浏览器/iframe 中的应用程序中显示存储的 pdf 而无需下载。是否有宝石或机会可以在 Rails 中显示/阅读 pdf。

注意： pdf 将包含图像、文本内容等。

提前致谢

兰吉特

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T07:52:02.997

是的，在 github 中有一个名为 Prawn 的 gem。[检查](https://github.com/prawnpdf/prawn/wiki/Using-Prawn-in-Rails-3)一下。

但是使用 Google Docs 实现此功能有更灵活的方法。您可以使用谷歌文档查看器嵌入您的 pdf。

简单地：

```
<a href="https://docs.google.com/gview?url={YOUR_PDF_URL}&embedded=true">Your Pdf Viewer</a> 
```

谢谢。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-09-01T20:56:14.017

This worked for me:

In the 'show.hmtl.erb'

```
<iframe src=<%= @certificate.certificate_pdf %> width="600" height="780" style="border: none;"> </iframe> 
```

just put the embedded ruby of the file as the source worked for me after hours and hours of searching. 'certificate' is my model, and 'certificate_pdf' is my attachment file.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-25T07:43:27.940

在您的控制器中定义如下函数：

```
def show_pdf
  pdf_filename = File.join(Rails.root, "tmp/my_pdf_doc.pdf")
  send_file(pdf_filename, :filename => "your_document.pdf", :disposition => 'inline', :type => "application/pdf")
end 
```

在您的环境配置 (developemnt.rb/production.rb) 文件中：

```
config.action_dispatch.x_sendfile_header = "X-Sendfile" # for apache
config.action_dispatch.x_sendfile_header = 'X-Accel-Redirect' # for nginx 
```

配置修改使 Web 服务器可以直接从磁盘发送文件。

你可以看看这个问题[推荐的方式来在 HTML 中嵌入 PDF？](https://stackoverflow.com/questions/291813/recommended-way-to-embed-pdf-in-html)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-08-12T13:21:40.313

`@person`我使用以下代码使用最新的[Google Docs 嵌入式 pdf 代码规范](https://docs.google.com/viewer)使我的工作在视图中（使用示例对象） ：

```
<iframe src="https://docs.google.com/viewer?url=http://www.mysite.com/<%= @person.pdf.url %>&embedded=true" 
width="100%" height="800" >
<p>Your browser does not support iframes.</p>
</iframe> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-08-19T23:27:51.957

**这是一个示例 PDF iframe：**

[http://googlesystem.blogspot.com/2009/09/embeddable-google-document-viewer.html](http://googlesystem.blogspot.com/2009/09/embeddable-google-document-viewer.html)

**只需将 xyz.pdf 更改为所需的文件名：**

```
<% url = "#{request.protocol}#{request.host_with_port}#{asset_path("xyz.pdf")}" %>

<iframe src="http://docs.google.com/gview?url=<%= url %>&embedded=true" style="width:1170px; height:800px;" frameborder="0"></iframe> 
```

**如果您还没有（在 application.rb 中），您可能还需要添加资产路径：**

```
config.assets.paths << "#{Rails.root}/app/assets/pdf" 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-11-21T00:58:48.067

这对我有用：

```
<iframe src="http://docs.google.com/viewer?url=<%= u @model.modeldoc %>&embedded=true" width="600" height="780" style="border: none;"></iframe> 
```

“u”是一种 ruby​​ 方法，它使 url URL 编码（谷歌文档查看器需要）。这是我在 CodeBiker 的回答中遇到的问题。

关于“u”的更多信息——http: [//rdoc.info/stdlib/erb/1.8.7/ERB/Util%3aurl_encode](http://rdoc.info/stdlib/erb/1.8.7/ERB/Util%3aurl_encode)

# c# - mschart 柱形图 SideBySide 模式关闭，将列下方置于前面

> ID：16208741
> 
> 赞同：1
> 
> 时间：2013-04-25T07:24:07.280
> 
> 标签：c#, mschart, side-by-side

```
Random random = new Random();   
for (int pointIndex = 0; pointIndex < 10; pointIndex++)
{
chart1.Series[0].Points.AddY(10);
chart1.Series[1].Points.AddY(30);
chart1.Series[2].Points.AddY(50);
}

chart1.Series[0]["DrawSideBySide"] = "false";
chart1.Series[1]["DrawSideBySide"] = "false";
chart1.Series[2]["DrawSideBySide"] = "false"; 
```

请在我得到结果时查看此内容。 [MSCHART 的图像](http://imgh.us/Untitled_255.png)

正如你可以看到的那样，没有显示系列 1 和系列 2。我的问题是如何根据点对列进行排序。即，如何将系列 1 列放在前面，系列 2 在系列 1 之后，最后将系列 3。提前谢谢。

图表类型为列

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-16T09:55:53.483

该系列将按照您将它们添加到图表中的顺序绘制。所以 series[2] 将最后绘制，超过其他两个。

# mysql - 如何在 XAMPP 下配置 MySQL 以使用 IPv6

> ID：16208744
> 
> 赞同：2
> 
> 时间：2013-04-25T07:24:24.363
> 
> 标签：mysql, xampp, ipv6

我有 XAMPP v.3.1.0，出于测试目的，我需要使用 IPv6 格式连接到 MySQL 数据库。

如何配置 MySQL？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T07:24:24.363

*   找到我的.ini
*   更改/取消注释`bind-address = :: # for ipv6`
*   启动mysql
*   `mysql -h ::1`如果您设法连接，请使用命令检查控制台

其他资源：

1.  [5.1 MySQL 服务器 :: 5.1.9 IPv6 支持](http://dev.mysql.com/doc/refman/5.5/en/ipv6-support.html)
2.  [MySQL --bind-address=addr](http://dev.mysql.com/doc/refman/5.5/en/server-options.html#option_mysqld_bind-address)

# arrays - Matlab：可扩展数组，丢失数据

> ID：16208751
> 
> 赞同：2
> 
> 时间：2013-04-25T07:24:56.487
> 
> 标签：arrays, matlab, expandable

我有两列数据。第一列是时间，第二列是时间的函数。但是，一些时间值会丢失，因此函数值也会丢失。不知道丢失行的索引（数据量太大）。例如，我有这个：

```
 t   x+w
2t  2x+w
3t  3x+w
6t  6x+w
7t  7x+w 
```

但是，它应该是这样的：

```
 t   x+w
2t  2x+w
3t  3x+w
4t  4x
5t  5x
6t  6x+w
7t  7x+w 
```

我想扩展时间数组并添加相应的函数值。实际上 f(t) 是随机的，但具有线性增长的确定性行为。因此，我是否在数千个值中添加两个值并不重要。那么如何在 Matlab 中做到这一点呢？

对不起我的英语不好。我希望我能解释一下自己。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T07:33:09.547

如果您的数据如下所示：

```
t = [1 2 3 6 7];
x = 2;
w = 10;
X = t*x + w; 
```

现在你可以[插值](http://www.mathworks.com/help/matlab/ref/interp1.html)得到缺失的 X 值：

```
ti = 1:7;
Xi = interp1(t, X, ti); 
```

或者如果你说你有这个：

```
t = [1 2 3 6 7];
X = rand(size(t)); 
```

然后填写随机值：

```
Xi(t) = X; %Space out the origianl random value according to t
Xi(setdiff(1:7,t)) = rand() %Find the missing vlaues using setdiff and replace them with new random values
ti = 1:7; 
```

# c - 在循环中重新分配文件指针

> ID：16208756
> 
> 赞同：2
> 
> 时间：2013-04-25T07:25:10.413
> 
> 标签：c, file, freopen

我需要按顺序将单个文件指针重新分配给多个文件。

我在字符串路径中有正确的文件路径。

当我将路径和文件指针传递给要重新分配的函数时，我得到“中止（核心转储）”..

```
FILE * fptr;        //Global file pointer
FILE * getfptrr(char * path)
{

    fclose(fptr);
    fptr = fopen(path, "r");

    if(fptr!=NULL)
        return fptr;
    else 
    {
        printf("\n Something's Wrong!!! \n");
        exit(1);
    }
} 
```

我应该使用frepoen吗？如何...

还是有其他选择？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T07:27:22.763

在调用之前，您不会检查`fptr`is 。`NULL``fclose`

在定义中初始化`fptr`为，然后在调用之前`NULL`检查它是否不是（或者这实际上是你在这里所做的）。`NULL``fclose``freopen`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T08:16:00.407

您是否在调用 close() 函数：

[1] 作为初始化文件指针的一种方式？

[2] 或者您是否试图关闭以前打开的文件？

如果是这样：

[1] 您可以使用以下方法初始化指针：

```
 fptr = NULL;
    fptr = fopen(path, "r"); 
```

[2] 我建议在使用 fopen() 的同一函数中调用 close()

我建议您使用错误返回码而不是 exit()，因为它是终止程序的更优雅的方式。与在整个代码中使用 exit() 函数相比，错误代码更容易调试和遵循程序逻辑。

# javascript - javascript函数防止默认问题

> ID：16208760
> 
> 赞同：1
> 
> 时间：2013-04-25T07:25:19.493
> 
> 标签：javascript

我有以下 javascript preventdefault 问题。我不太擅长 javascript，但这是我的代码。`event.preventDefault`不起作用，但是如果我替换为，`alert("SOMETEXT")`它会显示警报。

```
function changecartitemquantitykeydown(itemid,event) {
// Allow: backspace, delete, tab, escape, and enter
if ( event.keyCode == 46 || event.keyCode == 8 || event.keyCode == 9 || event.keyCode == 27 || event.keyCode == 13 || 
     // Allow: Ctrl+A
    (event.keyCode == 65 && event.ctrlKey === true) || 
     // Allow: home, end, left, right
    (event.keyCode >= 35 && event.keyCode <= 39)) {
         // let it happen, don't do anything
         return;
}
else {
    // Ensure that it is a number and stop the keypress
    if ((event.shiftKey || (event.keyCode < 48 || event.keyCode > 57) && (event.keyCode < 96 || event.keyCode > 105 )) || (this.value.length == 0 && event.keyCode == 48)) {
        event.preventDefault(); <===== This is not happening
    }   
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T07:50:33.183

我使用了这个并且它有效。

```
function changecartitemquantitykeydown(event) {
// Allow: backspace, delete, tab, escape, and enter
if ( event.keyCode == 46 || event.keyCode == 8 || event.keyCode == 9 || event.keyCode == 27 || event.keyCode == 13 || 
     // Allow: Ctrl+A
    (event.keyCode == 65 && event.ctrlKey === true) || 
     // Allow: home, end, left, right
    (event.keyCode >= 35 && event.keyCode <= 39)) {
         // let it happen, don't do anything
         return;
}
else {
    // Ensure that it is a number and stop the keypress
    if ((event.shiftKey || (event.keyCode < 48 || event.keyCode > 57) && (event.keyCode < 96 || event.keyCode > 105 )) || (this.value.length == 0 && event.keyCode == 48)) {
        //cancelDefaultAction(event);           
        var evt = event ? event:window.event;
        if (evt.preventDefault) {
            evt.preventDefault();
        }
        evt.returnValue = false;
        return false;   
    }   
} 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T07:31:31.467

我认为您的问题在于您在函数“changecartitemquantitykeydown”中有多个参数。如果这是事件回调函数，那么第一个参数应该是事件。如果你调用 preventDefault() ，一切都应该没问题。比你应该想办法在那个函数中获得你想要的 itemid 。

# android - 应用在前台时定期检查更新

> ID：16208762
> 
> 赞同：1
> 
> 时间：2013-04-25T07:25:23.107
> 
> 标签：android, service, handler

我一直在 Stackoverflow 上寻找并在谷歌上搜索正确的方法，但找不到。我想我不会是唯一一个遇到这个问题的人。

我有一个应用程序定期检查服务器上的更新数据。有一个带有时间戳的文件应该被检查。更改后，它将下载新数据（xml 文件）。

目前，我启动了一个处理程序，为了进行测试，我只打印了一个 toast：

```
Handler h; 
Runnable r = new Runnable() {
    @Override
    public void run() {
        Toast.makeText(MyActivity.this, "YEEEEEP!",
                Toast.LENGTH_LONG).show();
        h.postDelayed(this, 5000);
    }
}; 
```

然后在`onCreate()`：

```
h = new Handler();
h.post(r); 
```

在`onDestroy()`我删除了可运行对象，因此当用户在此 Activity 中按下以退出应用程序时，处理程序将停止。

它工作正常，它在其他活动中一直显示吐司，但是当用户按下“主页”按钮时，应用程序当然会继续运行！我想要的是，仅当用户认为应用程序正在运行时才运行更新检查。

以前有人解决过这个问题吗？如果有更好的方法可以通过服务做到这一点，欢迎提出任何建议。但我认为使用服务时问题没有区别。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-25T07:28:35.563

使用广播接收器检查更新。应用程序处于前台模式。

试试这个。

```
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;

public class MyReceiver extends BroadcastReceiver {

  @Override
  public void onReceive(Context context, Intent intent) {
    Intent service = new Intent(context, WordService.class);
    context.startService(service);
  }
} 
```

浏览此内容以获取有关广播接收器的更多详细信息。

[http://developer.android.com/reference/android/content/BroadcastReceiver.html](http://developer.android.com/reference/android/content/BroadcastReceiver.html)

例子。[http://www.compiletimeerror.com/2013/03/android-broadcast-receiver-in-detail.html](http://www.compiletimeerror.com/2013/03/android-broadcast-receiver-in-detail.html)

# android - 多用户聊天在服务器上不起作用

> ID：16208767
> 
> 赞同：2
> 
> 时间：2013-04-25T07:25:57.120
> 
> 标签：android, xmpp, openfire, smack

使用 smack API、openfire 和 XMPP，我在 android 中创建了聊天应用程序。在那我添加了群聊功能。但是在我的本地服务器上它工作得很好但是当我第一次尝试在服务器上运行它时它会给出如下错误：

```
04-25 06:40:02.362: W/System.err(2615): No response from server.: 
04-25 06:40:02.372: W/System.err(2615):     at org.jivesoftware.smackx.muc.MultiUserChat.join(MultiUserChat.java:498)
04-25 06:40:02.372: W/System.err(2615):     at example.newchat.DoInBackgroundWork.onPostExecute(DoInBackgroundWork.java:95)
04-25 06:40:02.372: W/System.err(2615):     at example.newchat.DoInBackgroundWork.onPostExecute(DoInBackgroundWork.java:1)
04-25 06:40:02.372: W/System.err(2615):     at android.os.AsyncTask.finish(AsyncTask.java:631)
04-25 06:40:02.372: W/System.err(2615):     at android.os.AsyncTask.access$600(AsyncTask.java:177)
04-25 06:40:02.372: W/System.err(2615):     at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:644)
04-25 06:40:02.382: W/System.err(2615):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-25 06:40:02.382: W/System.err(2615):     at android.os.Looper.loop(Looper.java:137)
04-25 06:40:02.382: W/System.err(2615):     at android.app.ActivityThread.main(ActivityThread.java:5041)
04-25 06:40:02.382: W/System.err(2615):     at java.lang.reflect.Method.invokeNative(Native Method)
04-25 06:40:02.392: W/System.err(2615):     at java.lang.reflect.Method.invoke(Method.java:511)
04-25 06:40:02.392: W/System.err(2615):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
04-25 06:40:02.392: W/System.err(2615):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
04-25 06:40:02.402: W/System.err(2615):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-06T07:24:57.103

我会发布一些代码，特别是你设置房间并加入它的部分，我没有足够的代表把它放在评论中抱歉:(

如果我的用户名错误，我在使用 smack 登录时没有收到来自服务器的响应。

可以先成功连接服务器吗？

# javascript - 浏览器 javascript 兼容系统级 js 引擎

> ID：16208770
> 
> 赞同：0
> 
> 时间：2013-04-25T07:26:05.987
> 
> 标签：javascript

所有系统级 javascript 引擎（Node、Rhino 等）都实现了**commonjs**规范，该规范声明所有代码都必须包装在匿名函数中。因此，与上下文相关的实验**不会**产生与在浏览器中相同的结果。

比如下面的 if 在 node 下运行；会产生与在 Firebug 中运行时不同的结果：

```
var inner;

inner = 'inner';
this.inner = 'overriden';
console.log(inner);          // node: inner // firebug: overriden 
```

对我来说，在我的*Ubuntu*终端中进行这些实验比在浏览器中更有效。是否有一个 js 运行时可以模拟浏览器的运行时，就像它在我的终端中一样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-25T07:33:52.120

我发现[phantomjs](https://github.com/ariya/phantomjs)与浏览器特定的 javascript 最兼容。. 这可能是因为 phantomjs 本身就是一个无头浏览器。然而，它提供了一个命令行控制台和一种从命令行运行 js 脚本的方法。

# objective-c - 在 NSMutableArray 中使用 insertObject 崩溃

> ID：16208771
> 
> 赞同：0
> 
> 时间：2013-04-25T07:26:05.960
> 
> 标签：objective-c, cocoa, nsmutablearray

我有一个`NSMUtableArray`我想在不同的索引和不同的方法插入一些数据的地方。所以我`NSMutableArray`像`viewDidLoad`这样初始化我的：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    params=[[NSMutableArray alloc]init];
    params =[NSMutableArray arrayWithCapacity:20];
    for (int i = 0; i<20; i++) {

        [params addObject:[NSNull null]];
    }

} 
```

并以不同的方法尝试用`null`实际值替换该值：

```
-(void)doInBackGround{

    NSString * domaine=@"Toto";
    int port =8080;

    [params replaceObjectAtIndex:8 withObject:domaine];

    [params replaceObjectAtIndex:9 withObject:[NSString stringWithFormat:@"%d",nbPort]];

} 
```

我尝试替换`NSMutableArray`“参数”中的值的另一种方法

```
-(void)someMethod{

    NSString * computer=@"Ajax";
    int port =3333;

    [params replaceObjectAtIndex:4 withObject:computer];

    [params replaceObjectAtIndex:5 withObject:[NSString stringWithFormat:@"%d",nbPort]];

} 
```

但是我在尝试替换对象时遇到了崩溃：

```
[params replaceObjectAtIndex:8 withObject:domaine]; 
```

我该如何修复它？我认为我的问题是我在哪里初始化`NSMUtableArray`? 你怎么看？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T07:37:20.093

首先，你要初始化`params`两次，第一次是完全多余的，因为你从来没有对空数组做任何事情。

您的第二次初始化使用`arrayWithCapacity:`返回一个*自动释放*的对象，因此当您尝试替换其中的对象时，它可能已被释放。

熟悉一些内存管理基础知识并使用数组的保留属性。您可能还想切换到使用 ARC（自动引用计数），这样可以减少这种错误的可能性（尽管了解内存管理仍然很有帮助）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T08:29:37.183

在对其进行任何修改之前，首先初始化您的参数 ivar。

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    self.loginValidated =NO;
    NSLog(@"Affichage Login Form");

  params = [[NSMutableArray arrayWithCapacity:20] retain]; 
   // params =[NSMutableArray arrayWithCapacity:20];
    for (int i = 0; i<20; i++) {

        [params addObject:[NSNull null]];
    }

    // Do any additional setup after loading the view from its nib.

   [self performSelectorInBackground:@selector(doInBackGround) withObject:nil];
} 
```

作为 doInBackground 的额外提示，您可以防止无法识别的选择器问题：

```
-(void)doInBackGround{

    NSString * domaine=@"Toto";
    int nbPort =8080;

    if(params){
       [params replaceObjectAtIndex:8 withObject:domaine];
       [params replaceObjectAtIndex:9 withObject:[NSString stringWithFormat:@"%d",nbPort]];
   }
} 
```

# c - C中的局部变量地址

> ID：16208772
> 
> 赞同：5
> 
> 时间：2013-04-25T07:26:06.303
> 
> 标签：c, memory-management

我有这个小程序：

```
#import <stdio.h>
#import <stdlib.h>

void main(void) {

    char a;
    char b;

    printf("Adress a: %p\n", (void *)&a);
    printf("Adress b: %p\n", (void *)&b);

    return 0;
} 
```

b 的地址低于 b 的地址。为什么会这样？还是我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T07:36:00.477

局部变量的存储空间在堆栈上。X86 处理器系列有一个“向下增长”的堆栈。这意味着当分配发生时（例如分配一个变量），堆栈指针向下移动到较低的内存地址。

`&a`大于，`&b`因为 after`&a`被分配，堆栈指针被向下移动到下一次分配的较低地址。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T07:29:16.147

在你的情况下，堆栈会增长。

`a`并按`b`定义顺序分配在堆栈上。所以你有`&a`高于`&b`。

# jquery - jQuery for...in toUpperCase 不是函数

> ID：16208776
> 
> 赞同：2
> 
> 时间：2013-04-25T07:26:24.823
> 
> 标签：jquery

典型输入如下...

```
<input type="checkbox" class="actEmail" data-value="1"/>Department one</li> 
```

在我的职能...

```
var chksDept = $('input[type=checkbox].actEmail:checked');
var depts = Array();

chksDept.each(function() { 
    depts.push($(this).data('value').toUpperCase());  
}); 
```

为什么我收到错误：

> `$(...).data(...).toUpperCase()`不是函数吗？

我需要的是以大写形式获取所有数据值。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T07:35:03.463

从返回的值`this $(this).data('value')`是类型`number`。IE：

```
console.log(typeof $(this).data('value')); 
```

您首先需要检查它是否为 a `number`，并将其转换为 a `string`。像这样：

```
var chksDept = $('input[type=checkbox].actEmail:checked');
var depts = Array();

chksDept.each(function() { 
    var data = $(this).data('value');
    if (typeof data === 'number') {
         data = ""+data;   
    }
    depts.push(data.toUpperCase());  
});

console.log(depts); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-25T07:33:35.307

那是因为属性的`data`方法`data-value='1'`返回一个数字，而 Number 对象没有`toUpperCase`方法，假设您的`data-*`属性同时包含数字和非数字值并且您想将非数字值转换为大写，您可以使用`attr`方法而不是返回一个细绳。

```
$(this).attr('data-value').toUpperCase(); 
```

[http://jsfiddle.net/B8FRE/](http://jsfiddle.net/B8FRE/)

发生这种情况是因为`data-*`属性映射到元素的`dataset`属性，并且元素的属性和属性之间存在差异。

# ios - 如何通过 Mailcore/Libetpan 设置电子邮件 IMAP SEEN 标志

> ID：16208781
> 
> 赞同：0
> 
> 时间：2013-04-25T07:26:53.827
> 
> 标签：ios, objective-c, imap, email-client, mailcore

我正在将[Mailcore](http://libmailcore.com/)库用于 iOS 电子邮件客户端。每当有人查看电子邮件时，我想将电子邮件标记为已查看（即为邮件设置[IMAP SEEN 标志）。](https://www.rfc-editor.org/rfc/rfc3501#section-2.3.2)

这就是 Mailcore[指示](http://libmailcore.com/api/Classes/CTCoreMessage.html#//api/name/isUnread)消息已被[阅读](https://github.com/mronge/MailCore/blob/master/Source/CTCoreMessage.m)的方式：

```
- (BOOL)isUnread {
    struct mail_flags *flags = myMessage->msg_flags;
    if (flags != NULL) {
        BOOL flag_seen = (flags->fl_flags & MAIL_FLAG_SEEN);
        return !flag_seen;
    }        
    return NO;
} 
```

这就是我将消息设置为已读的操作：

```
- (void)setIsRead {
    struct mail_flags *flags = myMessage->msg_flags;
    flags->fl_flags = (flags->fl_flags | MAIL_FLAG_SEEN);
} 
```

（我确认它至少在同一个会话中有效。即，如果我在未读消息上调用此消息，则调用`[self isUnread]`它返回`false`）

我的问题是这不会影响实际的 IMAP 服务器。即，如果我在我的 gmail 中查看相同的电子邮件，它仍会显示为未读。

同样在 CTCoreMessage[文档](http://libmailcore.com/api/Classes/CTCoreMessage.html)中：

> CTCoreMessage 是您处理消息的方式。实例化 CTCoreMessage 的最简单方法是首先设置一个 CTCoreAccount 对象，然后获取一个 CTCoreFolder 对象，然后使用它的便捷方法 messageWithUID: 来获取一个可以使用的消息对象。

我做了这两件事（可能值得一提的是，我一直保持 IMAP 连接处于活动状态。但当我没有主动同步或发送电子邮件等时，我会保持[空闲状态](https://www.rfc-editor.org/rfc/rfc2177)`[self setIsRead]`。但在我打电话给上面，我向它发送[IMAP 完成命令](https://www.rfc-editor.org/rfc/rfc2177)）。

那么缺少什么？我的想法是，我只是在更改已经从 IMAP 服务器获取的消息的本地结构。但我没有用新信息更新服务器。我怎么做？在 Mailcore 中，与服务器交互的唯一方法是通过[+sendMessage:server:username:password:port:connectionType:useAuth:error:](http://libmailcore.com/api/Classes/CTSMTPConnection.html#//api/name/sendMessage:server:username:password:port:connectionType:useAuth:error:) 但这与发送电子邮件一样......这绝对不是我想要的。

想法？

**更新：** 基本上我只是希望能够像这样发出[store IMAP 命令](https://www.rfc-editor.org/rfc/rfc3501#section-6.4.6)（我已经确认它可以在[Telnet 命令行](http://adityo.blog.binusian.org/?tag=telnet-imap-command)上运行）：

```
tag store %message_number% flags \Seen
* %message_number% FETCH (FLAGS (\Seen))
tag OK Success 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T14:34:23.483

MailCore 的作者在这里。

我建议使用此处记录`setFlags:forMessage`的方法：http://libmailcore.com/api/Classes/CTCoreFolder.html#//api/name/setFlags: [forMessage](http://libmailcore.com/api/Classes/CTCoreFolder.html#//api/name/setFlags:forMessage)：`CTCoreFolder`

您上面的内容将覆盖任何现有的标志。而是使用按位运算符获取当前标志`flagsForMessage:flags`，然后使用按位运算符更改您想要的标志。然后在服务器上设置标志

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T13:37:45.350

事实证明.. store 命令存在于 libetpan 中.. 这是我的实现：

```
- (void)setIsRead {
    struct mailimap_set *set;
    struct mailmessage *messageStruct = [self messageStruct];
    struct mailimap_flag_list*flist;
    struct mailimap_store_att_flags * store_flags;
    int err;

    set = mailimap_set_new_single(messageStruct->msg_index);

    flist = mailimap_flag_list_new_empty();
    mailimap_flag_list_add(flist,mailimap_flag_new_seen());
    // TODO: ensure that we're not overwriting original flags of message
    store_flags = mailimap_store_att_flags_new_set_flags(flist);

    err = mailimap_store([self imapSession], set, store_flags);

    mailimap_set_free(set);
    mailimap_store_att_flags_free(store_flags);

    if (err != MAILIMAP_NO_ERROR) {
        NSException *exception = [NSException
                                  exceptionWithName:CTUnknownError
                                  reason:[NSString stringWithFormat:@"Err num: %d", err]
                                  userInfo:nil];
        [exception raise];
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T14:09:34.453

您是否看过用于处理消息（包括设置标志）的 CTCoreFolder API？

# spring-mvc - Spring MVC 控制器的集成测试

> ID：16208787
> 
> 赞同：5
> 
> 时间：2013-04-25T07:27:09.010
> 
> 标签：spring-mvc, model-view-controller, integration-testing, spring-mvc-test

我有一个控制器，它返回 XML 数据以响应调用。下面是代码

```
@RequestMapping(value = "/balance.xml",method = RequestMethod.GET,produces="application/xml")
public AccountBalanceList getAccountBalanceList(@RequestParam("accountId") Integer accountId)
{
    AccountBalanceList accountBalanceList = new AccountBalanceList();
    List<AccountBalance> list = new ArrayList<AccountBalance>();
    list = accountService.getAccountBalanceList(accountId);

    accountBalanceList.setList(list);
    return accountBalanceList;
} 
```

accountBalanceList 用 xml 注释。我从这个调用中得到的响应是这样的

```
<points>
 <point>
  <balance>$1134.99</balance>
  <lots>10000.0</lots>
  <onDate>2012-11-11 15:44:00</onDate>
 </point>
</points> 
```

我想为此控制器调用编写集成测试。我知道如何使用 JSON 响应测试控制器，但我不知道如何测试响应何时为 XML。任何帮助将不胜感激。

问候

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-25T10:13:32.913

假设您正在`Spring 3.2+`使用 Spring MVC 测试框架（在 3.2 之前它是一个独立项目，[可在 github 上找到](https://github.com/SpringSource/spring-test-mvc)）。要改编[官方文档](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/testing.html#spring-mvc-test-framework)中的示例：

```
import static org.springframework.test.web.servlet.request.MockMvcRequestBuilders.*;
import static org.springframework.test.web.servlet.result.MockMvcResultMatchers.*;

@RunWith(SpringJUnit4ClassRunner.class)
@WebAppConfiguration
@ContextConfiguration("test-servlet-context.xml")
public class AccountIntegrationTests {

    @Autowired
    private WebApplicationContext wac;

    private MockMvc mockMvc;

    @Before
    public void setup() {
        this.mockMvc = MockMvcBuilders.webAppContextSetup(this.wac).build();
    }

    @Test
    public void getAccount() throws Exception {
        Integer accountId = 42;
        this.mockMvc.perform(get("/balance.xml")
          .param("accountId", accountId.toString())
          .accept("application/json;charset=UTF-8"))
          .andExpect(status().isOk())
          .andExpect(content().contentType("application/xml"));
          .andExpect(content().xml("<points>(your XML goes here)</points>"));               
    }
} 
```

验证 XML 文件本身的内容就是从响应内容中读取它。

* * *

**编辑：**回复：获取 XML 内容

`content()`[返回ContentResultMatchers](http://static.springsource.org/spring-framework/docs/3.2.0.RC1/api/org/springframework/test/web/servlet/result/ContentResultMatchers.html)的一个实例，它有几个方便的方法来测试内容本身，具体取决于类型。更新了上面的示例以显示如何验证 XML 响应的内容（**请注意**：根据文档，此方法需要[XMLUnit](http://xmlunit.sourceforge.net/)才能工作）

# android - TextView 在更新和滚动时绘制乱码的文本

> ID：16208790
> 
> 赞同：1
> 
> 时间：2013-04-25T07:27:25.393
> 
> 标签：android

我创建了一个测试 android 应用程序，它侦听 RabbitMQ 服务器上的主题并在文本视图中显示消息。

一切正常，除了在添加到“输出”文本视图的每条新消息上，新文本都被绘制在旧文本上。当我滚动时也会发生同样的情况，如第二张图片所示。当应用程序进入后台并再次激活时，文本再次正常显示（见图1）。

![正常输出](https://i.stack.imgur.com/d0U21.png)

![输出乱码](https://i.stack.imgur.com/ocA87.png)

我的布局很简单：我做错了什么？

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical"
android:paddingBottom="@dimen/activity_vertical_margin"
android:paddingLeft="@dimen/activity_horizontal_margin"
android:paddingRight="@dimen/activity_horizontal_margin"
android:paddingTop="60dp" >

<TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Connection status" />

<TextView
    android:id="@+id/status"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:saveEnabled="false"
    android:textAppearance="?android:attr/textAppearanceLarge" />

<TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Received messages:" />

<ScrollView
    android:id="@+id/scrollView1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >
    <TextView
        android:id="@+id/output"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:saveEnabled="false"
        android:textAppearance="?android:attr/textAppearanceSmall" />
</ScrollView> 
```

这是我处理新消息的地方：

```
final Handler myViewUpdateHandler = new Handler() {
    // @Override
    public void handleMessage(Message msg) {
        switch (msg.what) {
        case NEWSTATUS: 
            status.setText((String) msg.obj);
            status.invalidate();
            //also add to output
        case NEWMESSAGE:
            String oldText= (String) output.getText();
            output.setText("");

            String newText = DateUtil.getClockTimeMillis()+" "+(String) msg.obj+"\n"+oldText;

            output.setText(newText);
            output.invalidate();
            break;
        default:
            throw new IllegalArgumentException("no case for:" + msg.arg1);
        }
        super.handleMessage(msg);
    }
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-23T08:04:35.143

我有同样的问题。就我而言，这就是发生的事情以及我是如何解决的：

*   首先，我添加了具有全屏属性的第二个活动（通过 eclipse 向导）

*   然后我决定不使用那种花哨的全屏动画，所以我
    编辑了布局 XML 文件并将其更改为正常的相对视图。

*   应用清单文件表明此活动仍在使用全屏主题。

*   我已经删除了这些行并且...问题解决了。

如果您为布局设置全屏主题，请尝试将其更改为应用程序主主题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T07:33:22.100

尝试从所有情况下删除 invalidate() 方法调用，如果它不能解决问题，请在您的 xml 中将其放入 ScrollView 属性的 TextView（id=output）

```
 android:cacheColorHint="#00000000" 
```

# php - 强制php使用tcp而不是socket而不将mysql主机从localhost更改为127.0.0.1

> ID：16208793
> 
> 赞同：3
> 
> 时间：2013-04-25T07:27:34.327
> 
> 标签：php, mysql

有什么方法可以强制php使用TCP连接而不是本地mysql连接的套接字文件而不将主机参数从“localhost”更改为“127.0.0.1”？

设想：

到目前为止，Apache/php 和 MySQL 都在同一台服务器上。但出于性能和高可用性的原因，我计划将 MySQL 重新定位到另一台服务器。新服务器将被复制到故障转移服务器。在 Apache/php 服务器上，我想使用 haProxy (tcp) 进行连接处理。出于数据保护的原因，我无法将主机参数从“localhost”更改为“127.0.0.1”。

解决方法：

我找到的唯一解决方案是使用 socat 的解决方法：

```
socat UNIX-LISTEN:/path/to/mysql.sock,fork,user=mysql,group=mysql,mode=777 TCP:127.0.0.1:3306 2> /dev/null &" 
```

还有其他方法吗？

# tomcat - 在 tomcat 服务器上使用 Compuware vantage 分析器设置进行分析

> ID：16208802
> 
> 赞同：0
> 
> 时间：2013-04-25T07:28:11.460
> 
> 标签：tomcat, profiling, informatica

我们正在尝试在内部具有 Tomcat 服务器的 Informatica Application Server 上安装 compuware vantage 分析器。

我已经在本地机器上安装了控制台，在服务器上安装了代理。

并对tomcat服务器的catalina.bat文件进行了以下更改..

```
set PATH=C:/Compuware/VantageAnalyzer/agent/windows64;%PATH%
set JAVA_OPTS=%JAVA_OPTS% -xbootclasspath/a:"C:/Compuware/VantageAnalyzer/agent/lib/VantageAnalyzerAgent.jar" -agentlib:VantageAnalyzer=agentname=XYZ 
```

即我们已经设置了环境变量和java 参数。

但我们无法从 Vantage Analyzer 性能控制台连接到 Vantage Agent

谁能帮我解决如何从 Tomcat 服务器中的控制台连接到 Vantage 代理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T19:28:30.257

Compuware 产品经理在这里。我们 (Compuware) 实际上在 2011 年 7 月收购了 dynaTrace，并且一直在将我们的大多数 VA 客户迁移到它。我强烈建议您联系 hayley.hudson@compuware.com 或您的销售代表，如果您已经有关于迁移过程的信息。如果您有任何问题，请告诉我。

# javascript - 如何在 Greasemonkey 中使用 ActiveXObject？

> ID：16208810
> 
> 赞同：1
> 
> 时间：2013-04-25T07:28:56.040
> 
> 标签：javascript, firefox, activex, greasemonkey

我试过了：

```
function AddEmotion(strUrl)
{
    try
    {
        var cpAdder = new ActiveXObject("QQCPHelper.CPAdder");

        if (strUrl != "")
        {   
                cpAdder.AddCustomEmotion(strUrl);
        }
    }
    catch(e)
    {
        alert("error");
    }
} 
```

在 Firefox Greasemonkey 中，但它返回错误。

如何`new ActiveXObject`在 Greasemonkey 中使用？
谢谢你^_^我的朋友。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T00:53:12.003

您不能使用 Greasemonkey 的 ActiveX，因为[**您不能在 Firefox 中使用 JavaScript 的 ActiveX**](https://support.mozilla.org/en-US/kb/activex)（或任何理智的浏览器，感谢上帝！）。
曾经有一些非常冒险的 Firefox 附加组件据称提供了支持，但[没有什么安全可用于 Firefox 的最新/当前版本](https://addons.mozilla.org/en-US/firefox/search/?q=ActiveX&platform=windows)。

现在，您也许可以为此编写自己的 Firefox 扩展程序或插件，但我建议您**找到一种更好的方法来做您想做的任何事情**，即不以任何方式使用 ActiveX。

# php - Unknown column 'first' in field list

> ID：16208811
> 
> 赞同：0
> 
> 时间：2013-04-25T07:28:55.877
> 
> 标签：php, mysql, insert

i stuck in a unknown problem, when i executed my insertion query i getting this..

```
Unknown column 'first_val' in 'field list'insert into test_element set `test_id`='100238', `title`='sdd', `unit`='ds', `first_val`='2', `last_val`='33', `status`='', `create_date`='1366873602' 
```

here u can see the error...and my mysql table is like this ![enter image description here](https://i.stack.imgur.com/DIaQN.png)

and my html form is:

```
 <select id="test" name="test" disabled="disabled" />{test_element_name_list}</option>
                           <div style="display: none;" id="d1"></div>
                           <br />                   
                        </td>
                     </tr>
                     <tr class="dark_txt2">
                        <td width="13%">
                           <span class="Required">*</span>Title:                    
                        </td>
                        <td width="87%">
                           <input id="title" name="title" value="{title}" class="Field400" type="text" style="width:300px" />
                           <div style="display: none;" id="d1"></div>
                           <br />                   
                        </td>
                     </tr>
                     <tr class="dark_txt1">
                        <td width="13%">
                           <span class="Required">*</span>Unit:                 
                        </td>
                        <td width="87%">
                           <input id="unit" name="unit" value="{unit}" class="Field400" type="text" style="width:300px" />
                           <div style="display: none;" id="d1"></div>
                           <br />                   
                        </td>
                     </tr>
                     <tr class="dark_txt1">
                        <td width="13%">
                           <span class="Required">*</span>First Value:                  
                        </td>
                        <td width="87%">
                           <input id="first_val" name="first_val" value="{first_val}" class="Field400" type="text" style="width:300px" />
                           <div style="display: none;" id="d1"></div>
                           <br />                   
                        </td>
                     </tr>
                      <tr class="dark_txt1">
                        <td width="13%">
                           <span class="Required">*</span>Last Value:                   
                        </td>
                        <td width="87%">
                           <input id="last_val" name="last_val" value="{last_val}" class="Field400" type="text" style="width:300px" />
                           <div style="display: none;" id="d1"></div>
                           <br />                   
                        </td>
                     </tr> 
```

and i inserting my post with the help of function, but i am puzzled why my data is not going in mysql table here is code:

```
$SQL="insert into test_element set
    `test_id`='$R[test_id]',
    `title`='$R[title]',
    `unit`='$R[unit]',
    `first_val`='$R[first_val]',
    `last_val`='$R[last_val]',
    `status`='$R[status]',
    `create_date`='$date'"; 
```

a spend lots of hour for sort out this, any help would be highly appreciated...thanx in advance

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T07:31:05.810

Try this and see

```
INSERT INTO table_name (column1, column2) VALUES('demo', 'demo'); 
```

If not, than am sure you are using wrong table name, or you don't have that column and you are showing a preview of some other table

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T07:41:38.907

I think you are connecting to wrong database. check if you are in a local or remote and check your db connection for knowing which database you are connecting.

# ios - 设置屏幕上的推送通知问题

> ID：16208813
> 
> 赞同：0
> 
> 时间：2013-04-25T07:29:09.467
> 
> 标签：ios, apple-push-notifications

在我的应用程序中，**推送通知**已启用。我们可以从应用程序中知道应用程序设置中的推送通知开关是打开还是关闭？

我正在使用这段代码，它每次返回 7：

```
UIRemoteNotificationType types = [[UIApplication sharedApplication] enabledRemoteNotificationTypes]; 
```

# c# - c# Windows Azure Mobile Services 插入/读取数据

> ID：16208817
> 
> 赞同：0
> 
> 时间：2013-04-25T07:29:32.617
> 
> 标签：c#, azure

我正在使用 Windows Azure 移动服务创建一个 Windows 8 应用商店应用程序 (c#) 来存储我的数据。我可以成功地将数据添加到**表（ToDoItem）**，但在读取它时遇到了问题。

添加数据：

```
public class TodoItem
{
    public int Id { get; set; }

    [DataMember(Name = "text")]
    public string Text { get; set; }

    [DataMember(Name = "Private")]
    public bool Private { get; set; }

    [DataMember(Name = "FirstTeam")]
    public string Team1 { get; set; }

    [DataMember(Name = "SecondTeam")]
    public string Team2 { get; set; }
}

public sealed partial class ViewItems : Page
{

    private ObservableCollection<TodoItem> items;
    private IMobileServiceTable<TodoItem> todoTable = App.MobileService.GetTable<TodoItem>();

    private async void InsertTodoItem(TodoItem todoItem)
    {
        await todoTable.InsertAsync(todoItem);
    }

    private void ButtonSave_Click(object sender, RoutedEventArgs e)
    {
        var todoItem = new TodoItem { Text = Ploeg1.Text, Team1 = Ploeg1.Text, Team2 = Ploeg2.Text};
        InsertTodoItem(todoItem);
    }
} 
```

所以这段代码有效！现在的问题：我想在**另一个**空白页中从移动服务中读取数据：

```
public class TodoItem
{
    public int Id { get; set; }

    [DataMember(Name = "text")]
    public string Text { get; set; }

    [DataMember(Name = "Private")]
    public bool Private { get; set; }

    [DataMember(Name = "FirstTeam")]
    public string Team1 { get; set; }

    [DataMember(Name = "SecondTeam")]
    public string Team2 { get; set; }
}

public sealed partial class gamestore : Page
{
    private ObservableCollection<TodoItem> items;
    private IMobileServiceTable<TodoItem> todoTable = App.MobileService.GetTable<TodoItem>();

    private void ButtonRefresh_Click(object sender, RoutedEventArgs e)
    {
       RefreshTodoItems();
    }

    private async void RefreshTodoItems()
    {
        var results = await todoTable2
            .Where(todoItem => todoItem.Private == false)
            .ToListAsync();

        items = new ObservableCollection<TodoItem>(results);
        ListItems.ItemsSource = items;
    }
} 
```

我对此有一些歧义错误。我知道我使用的是相同的名称，但这些是我的列名。我怎样才能使这项工作能够读取另一页上保存的数据？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-25T07:54:46.430

修复了问题！改了几个名字

# javascript - 为 javascript google drive api 设置搜索参数

> ID：16208824
> 
> 赞同：2
> 
> 时间：2013-04-25T07:30:03.820
> 
> 标签：javascript, google-drive-api, google-api-js-client

抱歉，如果这个问题已经存在，我已经搜索了两天。我正在尝试列出谷歌驱动器根文件夹中尚未使用 javascript 删除的所有文件，这是正在使用的代码

```
function retrieveAllFilesInFolder(folderId, callback) {
     gapi.client.load('drive', 'v2', function() {
     var retrievePageOfChildren = function(request, result) {
     request.execute(function(resp) {
       result = result.concat(resp.items);
       var nextPageToken = resp.nextPageToken;
       if (nextPageToken) {
         request = gapi.client.drive.children.list({
          'folderId' : folderId,
          'pageToken': nextPageToken,
          'q' : 'trashed = false '
       });
      retrievePageOfChildren(request, result);
  } else {
     callback(result);
  }
});
}
 var initialRequest = gapi.client.drive.children.list({
  'folderId' : folderId
  });
retrievePageOfChildren(initialRequest, []);
});
} 
```

但结果包含已删除的文件和未删除的文件，所以我真的不知道出了什么问题

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-29T13:06:08.663

我有一个类似的问题，通过将 q 参数也放入初始请求来解决：

```
var initialRequest = gapi.client.drive.children.list({  
'folderId' : folderId, 
'q' : 'trashed = false'
 }); 
```

# objective-c - 执行服务器请求时从后台进入前台时 iPad 应用程序崩溃

> ID：16208830
> 
> 赞同：1
> 
> 时间：2013-04-25T07:30:26.963
> 
> 标签：objective-c, web-services, ipad, crash

当我启动服务器请求并且我的应用程序从后台进入前台时遇到问题，进入前台时它会崩溃。我无法弄清楚它在哪里崩溃，因为它给出了这个错误消息。

```
*** -[WebserviceDataConnection respondsToSelector:]: message sent to deallocated instance 0x1f25e9d0 
```

> **WebserviceDataConnection**是我正在执行服务器请求的类。

我没有任何后台实现应用程序应该在进入后台时存储其状态，并在从先前状态进入前台时恢复。

请帮我。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T07:52:14.880

打开 NSZombieEnabled：[如何在 Xcode 4 中设置 NSZombieEnabled？](https://stackoverflow.com/questions/2190227/how-do-i-set-up-nszombieenabled-in-xcode-4)

然后看看你是如何处理应用程序进入后台的通知并处理完全关闭 Web 服务的。特别要确保`WebserviceDataConnection`该类参与的任何委托关系都为零。

# sql - 如何拆分列值和行值

> ID：16208835
> 
> 赞同：-1
> 
> 时间：2013-04-25T07:30:48.213
> 
> 标签：sql, sql-server, sql-server-2005

使用 SQL Server 2005

```
id value1 value2

001 200 300
002 200x300 400x200
003 300x200 500x600
004 100 200
..... 
```

我想将值列拆分为 2 列

```
If value1 row 200x300 then it should display value1 - 200 and value2 - 300
if value2 row 400x200 then it should display value1 - 400 and value2 - 200 
```

预期产出

```
id value1 value2

001 200 300
002 200 300
002 400 200
003 300 200
003 500 600
004 100 200
.... 
```

这个怎么做。

需要 SQL 查询帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T07:52:49.450

Please check:

```
DECLARE @table as TABLE(id nvarchar(10), Value1 Nvarchar(50), Value2 nvarchar(50))
insert into @table values
('001', '200', '300'),
('002', '200x300', '400x200'),
('003', '300x200', '500x600'),
('004', '100', '200')

select id, Value1, Value2 From @table
select id, Value1, Value2 From @table where CHARINDEX('x', Value2)=0
union all
select id, SUBSTRING(Value1, 1, CHARINDEX('x', Value1)-1) Value1, SUBSTRING(Value1, CHARINDEX('x', Value1)+1, LEN(Value1)) Value2  From @table where CHARINDEX('x', Value2)>0
union all
select id, SUBSTRING(Value2, 1, CHARINDEX('x', Value2)-1) Value1, SUBSTRING(Value2, CHARINDEX('x', Value2)+1, LEN(Value1)) Value2  From @table where CHARINDEX('x', Value2)>0
order by id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T07:49:19.907

尝试这个

```
select * from 
(
select * from Table2 where CHARINDEX('x',value1)=0 and CHARINDEX('x',value2)=0
union all
select ID,
CASE WHEN CHARINDEX('x',value1)>0 then LEFT(value1,CHARINDEX('x',value1)-1) END as value1,
CASE WHEN CHARINDEX('x',value1)>0 then RIGHT(value1,CHARINDEX('x',value1)-1) else value2 end as value2
from Table2
where CHARINDEX('x',value1) > 0 
union all
select ID,
CASE WHEN CHARINDEX('x',value2)>0 then LEFT(value2,CHARINDEX('x',value2)-1) END as value1,
CASE WHEN CHARINDEX('x',value2)>0 then RIGHT(value2,CHARINDEX('x',value2)-1) else value2 end as value2
from Table2
where CHARINDEX('x',value2) > 0 
) a
order by 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T07:50:16.093

请试试这个..

```
 --Create Table :
    Create Table #Temp
    (
    Id  Varchar(10),
    Value1  Varchar(10),
    Value2  Varchar(10)
    )

    --Insert Values :
    Insert into #Temp Values ('001','200','300')
    Insert into #Temp Values ('002','200x300','400x200')
    Insert into #Temp Values ('003','300x200','500x600')
    Insert into #Temp Values ('004','100','200')

    --View Data :
    Select * from  #Temp

    --Query  for Exepected OutPut :
    Select Id,Value1,Value2 from #Temp Where (  Value1 not Like '%x%'  and  Value2 not Like '%x%' )
    Union all
    Select  Id,
    SUBSTRING(Value1,1,CharIndex('x',Value1)-1) as Value1,
    SUBSTRING(Value1,CharIndex('x',Value1)+1,Len(Value1)) as Value2
    from #Temp Where ( Value1  Like '%x%'  )
    Union all
    Select Id,
    SUBSTRING(Value2,1,CharIndex('x',Value2)-1) as Value1,
    SUBSTRING(Value2,CharIndex('x',Value2)+1,Len(Value2)) as Value2
    from #Temp Where ( Value2  Like '%x%'  )
    Order by ID

    --Clean Up:
    Drop table #Temp 
```

# mysql - MySQL 结果集应包含列中具有共同值的行

> ID：16208837
> 
> 赞同：-2
> 
> 时间：2013-04-25T07:30:50.497
> 
> 标签：mysql

我有一张如下表：

```
id, section, row, seat
1  Stalls    A     25
2  Stalls    A     26
3  Stalls    B     1
4  Stalls    B     2
5  Stalls    B     3
6  Stalls    B     4
7  Lounge    C     1
8  Lounge    C     2 
```

正如您可能猜到的那样，这张桌子代表了一个座位计划。我需要能够查询表格以给我相邻的座位。例如，如果我想要三个座位，它应该给我座位号 3,4,5 而不是 1,2,3。但是，如果我想要两个座位，它应该给我座位 id 的 1,2

在 sql 术语中，我需要能够查询在“section”和“row”列中具有相同值的行。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T07:51:47.107

```
select id, section, row,seat,rank
from (select id, section, row,seat, 
      @rank:=if(@lastsection=section and @lastrow=row and @lastseat=seat-1,@rank,@rank+1) rank,
      @lastsection:=section,@lastrow:=row,@lastseat:=seat
      from tblA, (select @lastsection:='',@lastrow:='',@lastseat:='', @rank:=1)v
      order by section,row,seat)s
GROUP BY rank
HAVING count(rank)>=numberofseatdesired; 
```

这将返回具有您想要的相邻座位号的 id、section、row、starting seat。您可能需要第二个查询来检索每个座位的详细 ID。

# jquery - 使用 jQuery 在 h:inputtextarea 中禁用拼写检查

> ID：16208840
> 
> 赞同：0
> 
> 时间：2013-04-25T07:30:54.740
> 
> 标签：jquery, jsf-2

我正在尝试的是在标题中。

所以我在我的 jsf 页面中有：

```
 <h:outputScript name="jsf.js" library="javax.faces" />
    <h:outputScript name="jquery.js" /> 
    <h:outputScript target="head">
        $ = jQuery;
        $(document).ready(function() {});
        $("#question").attr("spellcheck",false);
        $('textarea').attr("spellcheck",false);
    </h:outputScript> 
```

及以下

```
 <h:inputTextarea id="question" cols="90" rows="20" value="#{myBean.question}" /> 
```

但它不起作用。

我也试过

```
$("#question").val("hello world"); 
```

它也不起作用。

最后尝试确保代码被执行

```
 alert('Hello World'); 
```

弹出窗口出现，但没有别的。

有什么问题 ？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-01-15T16:49:19.680

尝试为 false 添加引号，如下所示：

```
$("#question").attr("spellcheck","false");
$('textarea').attr("spellcheck","false"); 
```

# python - Django用模板中的下划线替换空格

> ID：16208842
> 
> 赞同：3
> 
> 时间：2013-04-25T07:30:56.597
> 
> 标签：python, django, django-templates

在我的数据库*作业*表中，状态字段的值为“New_Mexico”。但我需要在像*"New Mexico"*这样的 html 页面中显示。给出一些查找和替换的想法。

*视图.py*

```
def result(request,user_id):
    userid=user_id
    query = Q(emp__companyname=userid) | Q(state=userid )
    details=jobs.objects.filter(query).select_related()
    return render_to_response('result.html', {'details': details}) 
```

*结果.html*

```
{% for d in details %}
    <label>{{ d.state }}</label>
{% endfor %} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-25T08:04:40.177

如果这应该是使用时的默认输出`{{ object }}`，那么您应该`__unicode__`像这样覆盖模型的方法：

```
class MyModel(models.Model):
  title = models.CharField(...)  # this field may hold our string "New_Mexico"
  ...
  def __unicode__(self):
    return self.title.replace('_', ' ') 
```

可能正在使用另`{{ object.human_readable_title }}`一种方法，您可以在模型中定义一个方法：

```
 def human_readable_title(self):
    return self.title.replace('_', ' ') 
```

我认为没有理由为此用例构建您自己的模板标签，除非您想将它用于不同模型的许多字段。

编辑：您的“工作”类中似乎有一个名为“状态”的字段。所以在你的情况下，一个解决方案可能是：在你的模型类中创建一个方法

```
def human_readable_state(self):
  return self.state.replace('_', ' ') 
```

并在模板中使用：

```
<label>{{ d.human_readable_state }}</label> 
```

这应该够了吧。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T07:43:05.320

没有内置的模板标签或过滤器可以做到这一点。

编写您自己的模板过滤器。

[https://docs.djangoproject.com/en/dev/howto/custom-template-tags/#writing-custom-template-filters](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/#writing-custom-template-filters)解释了你想要什么。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-11-06T07:52:44.170

如果您的文本是“python 程序语言”

在 django {{ data.value.split|join:"-" }} 的 html 中使用此代码后

答案是：python-program-language

# security - 如何使用默认安全方法在 cakephp 中编码密码？

> ID：16208845
> 
> 赞同：1
> 
> 时间：2013-04-25T07:31:16.013
> 
> 标签：security, cakephp, passwords, cakephp-2.0

我正在使用 cakephp2。我想在将密码保存到数据库之前对其进行编码。这些代码在我的模型中使用，

```
App::uses('AppModel', 'Model');

class User extends AppModel {
function registration($name,$uname,$pass){
    $newpass = AuthComponent::password($pass);
    $reg=array(
            'name'=>$name,
            'uname'=>$uname,
            'password'=>$newpass,
            'status'=>'1'
        );
    $this->save($reg);
} 
```

} ?>

但是在插入时，我收到一条错误消息，“错误：找不到类 'AuthComponent' 文件：C:\xampp\htdocs\blog\app\Model\User.php”。如何解决这个错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-09-23T06:32:48.600

只需在模型文件中创建一个用于加密密码的函数：

```
 public function beforeSave($options = array()) {
    $this->data['User']['password'] = AuthComponent::password(
      $this->data['User']['password']
    );
    return true;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T12:02:32.927

第一步是确保您已添加 Auth 组件，您可以在 appController.php 中执行此操作

```
public $components = array(
                 'Auth'
          ); 
```

然后使用您的代码

```
App::uses('AppModel', 'Model');

class User extends AppModel {
function registration($name,$uname,$pass){
    $newpass = AuthComponent::password($pass);
    $reg=array(
            'name'=>$name,
            'uname'=>$uname,
            'password'=>$newpass,
            'status'=>'1'
        );
    $this->save($reg);
} 
```

我认为在模型中进行插入查询不是一个好习惯。相反，更好的方法是使用 user.php(model) 中的 beforesave 方法，然后在控制器中进行插入。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-01T13:07:51.223

最好将记录保存在Controller File中的表中。只需在您的AppController文件中创建一个加密密码的函数

```
public function encryptPassword($sPassword = null) {
        return AuthComponent::password($sPassword);
    } 
```

只需在保存记录之前调用该函数

```
$this->request->data['User']['password'] = $this -> encryptPassword($this->request->data['User']['password']); 
```

# asp.net-mvc - 尝试枚举文件夹“”的内容时发生错误。FTP 被动模式不可用

> ID：16208847
> 
> 赞同：0
> 
> 时间：2013-04-25T07:31:20.367
> 
> 标签：asp.net-mvc, ftp, amazon-ec2, iis-8

我正在尝试使用 ftp 将我的 mvc 项目发布到亚马逊 ec2 t1.micro 实例。它使用的是 iis 8。我按照本[教程](http://www.iis.net/learn/publish/using-the-ftp-service/adding-ftp-publishing-to-a-web-site-in-iis-7#01)进行操作。

我有这个错误：

> 尝试枚举文件夹“”的内容时发生错误。FTP 被动模式不可用

有谁知道是什么问题？

提前致谢，

标记

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T09:43:40.193

似乎您的 Amazon 实例上的 FTP 服务器没有启用被动模式。请重新检查。

# html - 悬停时图像摆动（缩放效果）

> ID：16208851
> 
> 赞同：5
> 
> 时间：2013-04-25T07:31:35.097
> 
> 标签：html, css

当我悬停图像时，我的图像链接有点摆动。我不知道如何解决这个问题：/ 我在 css 中使用缩放效果来使图片在悬停时更大一些。

我试图消除阴影效果，但仍然是同样的问题......

**代码**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="icon" href="icon.ico" type="image/ico" />
<title>THU | TheHardUploader</title>
</head>
<style>
    body{
        margin: 0px auto;
        background-image:url(aa.jpg);
        background-position: center;
        background-attachment:fixed;
        background-color:black;
        background-repeat: no-repeat;
        }
    #main{
        margin: 0px auto;
    }

    .banner{
        height: 210px;
        margin-top: 35px;
        background-color: black;
        -khtml-opacity:.50; 
        -moz-opacity:.50; 
        -ms-filter:”alpha(opacity=50)”;
      filter:alpha(opacity=50);
      filter: progid:DXImageTransform.Microsoft.Alpha(opacity=0.5);
      opacity:.50; 
      border-top: 5px solid gray;
      border-bottom: 5px solid gray;
    }

    .logo{
        margin: 0px auto;
        margin-top: -300px;
        position:absolute;
        margin-left: 40px;
    }

    .recordsbild{
        margin: 0px auto;
        margin-left: 250px;
        position:absolute;
        margin-top: -200px;
    }

    .line{
        position:absolute;
        height: 180px;
        width: 10px;
        background-color: white;
        margin-top: -195px;
        margin-left: 950px;
    }
    .musikstil{
        position:absolute;
        font-family: "Arial Rounded MT Bold";
        font-size: 20px;
        margin-left: 420px;
        margin-top:-50px;

    }

    .musikstil a{
        text-decoration: none;
         transition: opacity .35s ease-in-out;
         -moz-transition: opacity .35s ease-in-out;
        -webkit-transition: opacity .35s ease-in-out;
        color: white;
    }

    .musikstil a:hover{
        opacity: 0.2;
    }

    .menu{
        position:absolute;
        width: 120px;
             opacity: 1.0;
    transition: opacity .25s ease-in-out;
   -moz-transition: opacity .25s ease-in-out;
   -webkit-transition: opacity .25s ease-in-out;
    margin: auto;
    margin-top: -190px;
    margin-left: 1020px;
    }

    .menu a{
        color: white;
        font-family:"Arial Rounded MT Bold";
        text-decoration:none;
        font-size: 20px;
         transition: opacity .25s ease-in-out;
         -moz-transition: opacity .25s ease-in-out;
        -webkit-transition: opacity .25s ease-in-out;
    }
    .dub{
        color:white;
    }

    .hard{
        color: #009cff;

    }
    .glitch{
        color: #744eac;

    }
    .chill{
        color: #bc0096;
    }

    .menulogos{
        position:absolute;
        margin-left: 890px;
        margin-top: -215px;
    }
    .shop{
        position: absolute;
        margin-top: 6px;
    }
    .promoting{
        position: absolute;
        margin-top: 41px;
    }
    .about{
        position: absolute;
        margin-top: 35px;
    }
    .artists{
        position: absolute;
        margin-top: 28px;
    }
    .release{
        position: absolute;
        margin-top: 17px;
    }

    .menu a:hover{
        opacity: 0.2;
    }
    .bannerwrap{
        width: 1280px;
        margin: 0px auto;
    }
    .socialmedia{
        margin: 0px;
        margin-left: 350px;
        margin-top: 20px;
    }

    .socialmedia img{
        -webkit-transform:scale(0.9); /*Webkit: Scale down image to 0.8x original size*/
        -moz-transform:scale(0.9); /*Mozilla scale version*/
        -o-transform:scale(0.9); /*Opera scale version*/
        -webkit-transition-duration: 0.5s; /*Webkit: Animation duration*/
        -moz-transition-duration: 0.5s; /*Mozilla duration version*/
        -o-transition-duration: 0.5s; /*Opera duration version*/
        opacity: 1; /*initial opacity of images*/       
    }
    .socialmedia img:hover{
        -webkit-transform:scale(1.1); /*Webkit: Scale up image to 1.2x original size*/
        -moz-transform:scale(1.1); /*Mozilla scale version*/
        -o-transform:scale(1.1); /*Opera scale version*/
        box-shadow:0px 0px 30px gray; /*CSS3 shadow: 30px blurred shadow all around image*/
        -webkit-box-shadow:0px 0px 30px gray; /*Safari shadow version*/
        -moz-box-shadow:0px 0px 30px gray; /*Mozilla shadow version*/
        opacity: 1;

    }

</style>
<body>
    <div id="main">

      <div class="banner">    
      </div>
     <div class="bannerwrap">
      <div class="logo">
         <img src="logo.png" />
      </div>
      <div class="recordsbild">
        <img src="records.png" />
      </div>
      <div class="musikstil">
        <a href="#"> Dubstep &#11; |</a> 
        <a href="#"> &#11; Hardstyle &#11; |</a>
        <a href="#"> &#11; Glitch Hop &#11; |</a> 
        <a href="#"> &#11; Chillstep</a>
      </div>
      <div class="line">
      </div>
      <div class="menulogos">
        <img src="menulogo.png" />
      </div>
      <div class="menu">
        <a href="#" class='contact'> Contact Us </a>
        </br>
        <a href="#" class='shop'> Shop </a>
        </br>
        <a href="#" class='release'> Releases </a>
        </br>
        <a href="#" class='artists'> Artists </a>
        </br>
        <a href="#" class='about'> About Us </a>
        </br>
        <a href="#" class='promoting'> Promoting </a>
      </div> 
      </div>
      <div class="socialmedia">
            <a href="#" class="fb"> <img src="fb.png" /></a>
            <a href="#" class="youtube"> <img src="youtube.png" /> </a>
            <a href="#" class="twitter"> <img src="twitter.png" /> </a>
            <a href="#" class="soundcloud"> <img src="soundcloud.png" /> </a>
      </div>
    </div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-25T07:53:13.247

If you're using a webkit browser the following may help. Adding this to the container of the element you are animating should make the animation smoother. As far as I understand it, it forces the browser into using hardware acceleration.

```
.socialmedia {
     -webkit-backface-visibility: hidden;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-25T07:46:32.820

这是 CSS3 转换的常见问题。我注意到在文本旋转之后。我找到了一些奇怪的解决方案。我不知道这是如何工作的 - 但工作:) 只需使用一些 CSS3 过滤器。任何过滤器。对于 webkit，那可能是

```
-webkit-filter: blur(0px); 
```

[http://jsfiddle.net/Rfg2V/](http://jsfiddle.net/Rfg2V/)

这不会改变默认的模糊属性，但会导致平滑的变换、平移和抗锯齿效果。

对于 Firefox，您可以使用

```
filter: url("data:image/svg+xml;utf8,<svg xmlns=\'http://www.w3.org/2000/svg\'><filter id=\'grayscale\'><feColorMatrix type=\'matrix\' values=\'1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0\'/></filter></svg>#grayscale"); 
```

这解决了问题，但之后具有过滤器属性的元素可能看起来有点模糊。不是因为模糊滤镜，结果与任何滤镜都是一样的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-12-08T09:04:58.737

我知道我参加聚会有点晚了，但由于上述方法都不适合我，我猜在悬停时使用不透明度时，其他人一定有同样的问题。

最终为我工作的解决方案是将其设置为摆动的项目：

`-webkit-transform: translate3d(0, 0, 0); transform: translate3d(0, 0, 0);`

这迫使计算机使用图形处理单元，而不是 CPU 上运行的浏览器。

在此处阅读更多信息：http: [//blog.teamtreehouse.com/increase-your-sites-performance-with-hardware-accelerated-css](http://blog.teamtreehouse.com/increase-your-sites-performance-with-hardware-accelerated-css)

# perl - 如何将 $_ 的值更改为 perl 中 grep 中所需的值？

> ID：16208859
> 
> 赞同：3
> 
> 时间：2013-04-25T07:31:57.057
> 
> 标签：perl, grep

在这段代码中，我想访问`{IS-VAR}`hashes 数组的每个元素的key 的值`@Cleared`。当它进入循环内部时`$_`被设置为 的值`$_->{'NAME'}`。

```
if (grep {$_->{'NAME'} eq $entity_name} @Cleared)
{
  **$is_var = $_->{'IS-VAR'};**
  $var_flag = 1 if ($is_var =~ /^TRUE$/i);
} 
```

有没有办法访问`$_->{'IS-VAR'}`循环内部的值，在这种情况下`$_`是元素`@Cleared`？

的结构`@Cleared`如下：

```
@Cleared = [NAME => 'xxx',
            TYPE => 'yyy',
            IS-VAR => 'TRUE']; 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-25T07:51:28.083

您的代码的问题是您`grep`在`if`语句中使用。这会将结果`grep`转换为标量（即找到的元素数`grep`）。因此，您实际上并不知道哪些元素匹配。

如果将其转换为 for 循环，您将能够访问每个匹配的元素；您的其余代码将逐字运行：

```
foreach (grep {$_->{'NAME'} eq $entity_name} @Cleared)
{
    $is_var = $_->{'IS-VAR'};
    $var_flag = 1 if ($is_var =~ /^TRUE$/i);
} 
```

但是，如果您只是想查找单行是否匹配，则可以将其全部压缩到一个 grep 中：

```
my $is_var = grep {
    $_->{'NAME'} eq $entity_name && $_->{'IS-VAR'} =~ /^TRUE$/i
} @Cleared; 
```

现在`$is_var`包含匹配的元素数量的计数。 `if ($is_var) {...}`如果至少有一个匹配，则为真。

`grep`但是，如果您只需要知道是否至少存在一个匹配项，这并不是最有效的方法。理想情况下，您应该在找到一个匹配项后立即停止：

```
my $is_var;
foreach (@Cleared)
{
    if ($_->{'NAME'} eq $entity_name && $_->{'IS-VAR'} =~ /^TRUE$/i)
    {
        $is_var = 1;
        last;          #break out of the loop
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T07:45:01.547

您可以尝试更简单的 for 循环：

```
for my $cleared (@Cleared) {
  if ($cleared->{NAME} eq $entity_name && $cleared->{IS_VAR} eq 'TRUE') {
    $var_flag = 1
   }
} 
```

# java - Java在检查时间时监听套接字

> ID：16208860
> 
> 赞同：0
> 
> 时间：2013-04-25T07:31:58.643
> 
> 标签：java, multithreading

我有一个问题，

我的客户端需要在特定时间内从服务器监听，如果在这段时间内没有收到服务器的回复，它必须关闭连接。

我在客户端有两个线程，一个在时间到期后将布尔变量更新为 false，另一个线程检查来自服务器的 msg 以及计时器。

我的代码是这样的：

```
while(true){
    if(l=is.readLine().equals(msg))
    {
        // do processing
        break;
    }
    if(timer)
        break;
} 
```

所以我的while循环不断检查味精和计时器。问题是 is.readline() 正在阻止呼叫，并且无限期地等待来自服务器的消息。

我该怎么做？

我试过了

```
if(l=is.readLine()!=null and l.equals(msg)) 
```

但没有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T07:49:08.983

您可以检查这两个条件，但这比拥有一个轮询您的连接并关闭已超时连接的线程要复杂得多。

即有一个线程每隔一秒左右唤醒一次，并调用连接列表中每个连接的 checkTimeout() 方法。如果 checkTimeout 检测到已达到超时，它会设置一个`closed = true;`volatile 标志并关闭（）连接。如果抛出异常，如果在连接关闭后发生，我将忽略它。

您可以使用 SocketTimeout，但这并不总是在所有平台上都按预期工作。见[Socket.setSoTimeout(timeinSECONDS);](http://docs.oracle.com/javase/7/docs/api/java/net/Socket.html#setSoTimeout%28int%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T07:36:52.980

为服务器侦听器创建一个新线程。如果新线程已接收到来自服务器的输入，则让新线程设置内部切换。

在您的主线程中，启动一个循环，等待连接超时或服务器线程连接。如果它连接，则处理服务器的输入。如果没有，并且超时，则终止线程（并可能关闭连接）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T08:02:33.357

在给定的情况下，我认为投票是@Peter 所说的最佳选择。但也可以使用 2 个线程来完成：

```
NetworkThread implements Runnable, Closeable{
BufferedReader r;
volatile boolean readyToClose = false;
@Override
public void run(){
//initialize r as t = new BufferedReader(new InputStreamReader(socket.getInputStream()))
String s = null;
while((s= r.readLine())!=null){
  readyToClose = true;
 //do whatever
}
}
public void close() throws IOException
{
   if(readyToClose()
     r.close();
}
} 
```

有另一个线程将在这段时间内被阻塞（`sleep`）。然后会调用`NetworkThread#close()`。这将关闭流，另一个线程将退出循环。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-26T07:47:21.517

谢谢大家...

我找到了解决这个问题的简单方法......

我在调用 readline 之前检查缓冲区中是否有数据

```
if(ir.ready())
    ir.readLine() 
```

仅当它是非阻塞的时，上面才会调用 readLine。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-25T07:42:16.490

为此，您可以使用 CountdownLatch。启动网络线程，然后在倒计时锁存器上调用 await：

```
CountDownLatch latch = new CountDownLatch(1);

// start network thread
networkThread.start();

boolean wasFinished = latch.await(you_timeout);

// Interrupt network thread as it still waiting:
if(!wasFinished) {
    networkThread.interrupt();
} 
```

读取成功后在网络线程中调用latch.countDown();

# javascript - 如何使用函数显示图像？

> ID：16208863
> 
> 赞同：0
> 
> 时间：2013-04-25T07:32:24.787
> 
> 标签：javascript

我想显示一些存储在文件夹中的图像 (*.jpg)。我想使用函数显示这些图像。为此，我创建了一个由对象组成的数组，每个对象都包含一个我在函数中使用的 id。这是代码：

```
//employee array
var employees =[{
    name:"jacob",
    age :23,
    city:"Boston",
    yoe :12,
    image :'d.jpg',
    id : 1
    },
    {
    name:"aaron",
    age :21,
    city:"Nevada",
    yoe :12,
    image :'b.jpg',
    id : 2
    },
    ...   
}]; 
```

我正在使用员工`id`- 这是图像的名称 - 来显示图像。以下是图像的功能：

```
function getimages(){
    for(var i = 1;i <= employees.length;i++){
        document.getElementById("list + i").innerHTML = employees[i].id+".jpg";
    }
}
getimages(); // to get the images 
```

这是我要显示这些图像的 HTML 部分：

```
<ul>
    <li id="list1">A</li>
    <li id="list2">B</li>
    <li id="list3">C</li>
    <p>123213</p>
</ul> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T07:45:23.383

您将需要替换`document.getElementById("list + i")`为`document.getElementById("list" + i)`.

有时，动态创建 DOM 元素并附加它们可能是值得的，因为您永远不知道何时需要更新这些新元素。你可能有这样的事情：

```
function getimages(){
        for(var i = 1;i <= employees.length;i++) {
             var elem=document.getElementById("list"+i);
             var imagePath=employees[i].id+".jpg";

             // append text
             elem.appendChild( document.createTextNode(imagePath) );

             // append image
             var img = document.createElement("img");
             img.src = imagePath;
             elem.appendChild(img);
        }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T07:44:57.463

要在 -function 中显示图像`getImage`，您可以简单地编写`<img>`-tag

```
document.getElementById("list" + i).innerHTML = '<img src="' +  employees[i].id + '.jpg" />'; 
```

或者您可以按照@Frederik 的建议进行操作，但这需要您编写“核心”javascript。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T08:36:10.680

如果员工人数不同，那么您可能希望使列表元素的数量可变。您可以通过创建一个空的无序列表`<ul id="employees"></ul>`然后更改 getImages 函数来做到这一点：

```
function getImages(){ 
    for(var i = 1, img, li; i <= employees.length; i++) { 

        // create image and set image source
        img = document.createElement("img"); img.src = employee[i].image; 

        // create list item, set ID and attach previously created image
        li = document.createElement("li"); li.id = "list"+i; li.appendChild(img); 

        // attach list item to unordered list of employees
        document.getElementById("employees").appendChild(li);
    }
} 
```

现在您可以拥有任意数量的员工，并且他们都有自己的列表 ID。我还更改了 for 循环中的变量声明，以便重复使用变量，而不是在每次迭代时重新声明。

# selenium - 如何从 Jenkins 运行 Selenium 脚本（Junit）

> ID：16208867
> 
> 赞同：0
> 
> 时间：2013-04-25T07:32:35.573
> 
> 标签：selenium, jenkins

我通过执行 Jenkins 的 Selenium 脚本遇到了一些问题，我完全是初学者，所以如果有人可以提供一些解释，我需要很多解释......

*   所以我在我的 VM Linux 上运行 Jenkins。
*   我在这个 VM 的文件夹中找到了这些 selenium 脚本。

我应该怎么做才能通过 Jenkins 成功运行？

不是很懂，如果能详细点的话。。。

*   如果我必须使用 Maven，Jenkins 中的配置是什么？我必须创建一个 POM.xml 吗？如果是的话要在里面插入什么？我把它放在哪里？

*   如果这不是解决方案？我该怎么办 ？

提前致谢 ！:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T08:51:44.297

如果 Junit 测试在您的工作站上正常运行，那么您必须执行以下操作：

*   确保您的应用程序启动您的应用程序（如果您有 Java 应用程序，请使用例如 Maven Jetty 插件（[http://wiki.eclipse.org/Jetty/Feature/Jetty_Maven_Plugin](http://wiki.eclipse.org/Jetty/Feature/Jetty_Maven_Plugin)`integration-test` ）。如果您使用 Maven Failsafe ，您可以将其收紧插入
*   在工作开始之前，您需要启动一个假 X 服务器：使用 Xvfb Jenkins 插件 ( [https://wiki.jenkins-ci.org/display/JENKINS/Xvfb+Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Xvfb+Plugin) )
*   您的浏览器需要正确的 WebDriver，对于 Google Chrome，请参阅[https://code.google.com/p/selenium/wiki/ChromeDriver](https://code.google.com/p/selenium/wiki/ChromeDriver)

[http://alex.nederlof.com/blog/2012/11/19/installing-selenium-with-jenkins-on-ubuntu/](http://alex.nederlof.com/blog/2012/11/19/installing-selenium-with-jenkins-on-ubuntu/)提供了设置细节。

# jquery - 如何在 DataTables 插件中进行全文搜索

> ID：16208870
> 
> 赞同：0
> 
> 时间：2013-04-25T07:32:44.013
> 
> 标签：jquery, full-text-search, datatables

我正在使用[jQuery DataTables 插件](http://www.datatables.net/)来显示数据。

默认情况下，我在右上角有搜索框，但搜索没有按预期工作。

例如

假设我有记录

```
$ 50
$ 52
$ 45
$ 41
$ 53 
```

当我输入`$ 5`时，它会显示所有记录。发生这种情况是因为它分别搜索 $ 和 5。

知道如何进行全文搜索吗？

`$ 5`预期搜索的结果是

```
$ 50
$ 52
$ 53 
```

知道如何通过 jQuery for datatable 完成这项工作......？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T13:53:42.180

查看文档：oSearch 选项 [https://www.datatables.net/usage/options](https://www.datatables.net/usage/options)

o搜索

此参数允许您在初始化时定义全局过滤状态。作为对象，必须定义“sSearch”参数，但所有其他参数都是可选的。当“bRegex”为真时，搜索字符串将被视为正则表达式，当为假（默认）时，它将被视为直字符串。当“bSmart”DataTables 将使用它的智能过滤方法（在数据中的任何点匹配单词）时，如果为 false，则不会这样做。

# jquery - 在 Jquery uix 多选插件中默认折叠 optgroups

> ID：16208872
> 
> 赞同：0
> 
> 时间：2013-04-25T07:32:49.920
> 
> 标签：jquery, jquery-ui

我正在尝试使用此处找到的 jquery uix 多选插件：

[https://github.com/yanickrochon/jquery.uix.multiselect](https://github.com/yanickrochon/jquery.uix.multiselect)

它工作正常，除了我需要默认折叠我的 optgroup。如何才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T07:40:08.263

有文档[链接](https://github.com/yanickrochon/jquery.uix.multiselect/wiki/API-Documentation)
collapsableGroups (boolean) (default: true) ：告诉选项组是否可以折叠

```
// initialize option
$(selector).multiselect({ collapsableGroups: false }); 
```

或者[这个](https://github.com/yanickrochon/jquery.uix.multiselect/issues/49)

```
var sel = $("#yourSelect").multiselect();
setTimeout(function() {  // let the refresh method happen
    $("#multiselect_groups").next().find("div.group-element").parent()
    .each(function() { 
        if ($(this).data("fnToggle")) $(this).data("fnToggle")(); 
    });
}, 10); 
```

# c - C 文件中使用的 goto 标签相同，但功能不同

> ID：16208875
> 
> 赞同：21
> 
> 时间：2013-04-25T07:33:08.803
> 
> 标签：c, goto

有人可以告诉我在同一个 C 文件的不同函数中使用相同的 goto 标签是否可以接受？

解释我面临的问题：

```
function1()
{
    ...

    goto label

    ...

label:
    ...
}

function2()
{
    ...

   goto label;

    ...

label:
    ...
} 
```

现在发生的事情是标签之后的代码被用于清理 malloc'ed 数据。整个事情在function2中崩溃了。我打印了内存。空闲且相同的位置被多次释放。这是因为所有的goto吗？这是对 goto 语句的有效使用吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-04-25T07:35:59.503

标签是本地的，因此您可以在多个函数中使用相同的标签。

关于是否应该使用的问题`goto`是另一回事，而且不容易回答。简而言之，不要使用`goto`. 但与所有事情一样（尤其是在编程方面），也有`goto`可能有用的例外情况。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-04-25T07:43:06.180

正如 Joachim 所说，标签是本地的；但请注意，标签是函数本地的 - 而不是当前块。`goto`语句不尊重范围，除了全功能范围。

# ios - 如何使用核心图向散点图添加动画？

> ID：16208877
> 
> 赞同：0
> 
> 时间：2013-04-25T07:33:09.453
> 
> 标签：ios, objective-c, xcode4, core-plot

我正在使用核心绘图库在我的应用程序中显示散点图我从教程[http://www.raywenderlich.com/13271/how-to-draw-graphs-with-core-plot-part在我的应用程序中显示散点图-2](http://www.raywenderlich.com/13271/how-to-draw-graphs-with-core-plot-part-2) 现在我希望用户可以看到图表的动画，即在一小段时间后从第 1 点绘制到第 2 点，而不是从第 2 点绘制到第 3 点，依此类推，用户可以看到动画。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-26T16:59:57.647

目前没有对此的内置支持。您可以使用计时器来控制动画。从图中的第一个数据点开始。当计时器为下一个动画帧触发时，添加第二个点，但不要给它它的最终位置。相反，根据时间步长在第一个点和它的最终位置之间插入它的位置。在每个时间步移动第二个点，直到它到达最终位置。在下一步添加第三点。以这种方式继续，直到所有点都显示在它们的最终位置。

使用该`-insertDataAtIndex:numberOfRecords:`方法在正确的时间添加每个点。用于`-reloadDataInIndexRange:`更新最后​​一个点的位置。`reloadData`与强制绘图每次重新加载每个数据点的方法相比，这将提供更好的性能。

# security - Symfony2：登录表单工作正常，但我无权访问登录信息 {{ app.user }}

> ID：16208879
> 
> 赞同：1
> 
> 时间：2013-04-25T07:33:17.243
> 
> 标签：security, symfony, twig

在基本模板**base.html.twig**我写了这段代码

```
 {% if app.user %}
    <a href="{{ path('logout') }}">Logout</a>
  {% else %}
    <a href="{{ path('register') }}">register</a> |
    <a href="{{ path('login') }}">Login</a>
  {% endif %} 
```

*在 /profile 中登录*后 ，我在菜单中看到注销链接，但在 /（和其他页面）中，我在菜单中看到注册和登录链接

```
security:
    ...
    providers:
        administartors:
            entity: { class: DotArtBundle:User, property: username }

    firewalls:
        profile:
            pattern:    ^/profile
            http_basic: ~
            anonymous: ~
            form_login:
                check_path:  /profile/login_action
                login_path:  /login
                use_forward: false
                username_parameter: _username
                password_parameter: _password
            logout:
                path:   /profile/logout
                target: /
                invalidate_session: false
        login:
            pattern:  ^/login
            security: false

    access_control:
        - { path: ^/login,         roles: IS_AUTHENTICATED_ANONYMOUSLY }
        - { path: ^/profile,       roles: ROLE_USER  }
        - { path: ^/profile/admin, roles: ROLE_ADMIN } 
```

我怎么能解决这个问题？

**解决方案：**

我`pattern: ^/profile`改为`pattern: ^/`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T09:50:47.100

侧面提示，根据登录/退出检查。对于未来的更新，使用 is_granted 应该更可靠。

```
{% if is_granted('IS_AUTHENTICATED_REMEMBERED') %}
  <a href="{{ path('logout') }}">Logout</a>
{% else %}
  <a href="{{ path('register') }}">register</a> |
  <a href="{{ path('login') }}">Login</a>
{% endif %} 
```

# properties - 如何将带有空格和尾随反斜杠的路径作为属性传递给 MSBuild

> ID：16208882
> 
> 赞同：10
> 
> 时间：2013-04-25T07:33:22.760
> 
> 标签：properties, msbuild

当我尝试将一些目录路径传递给 MSBuild 脚本时，如下所示：

```
MSBuild.exe myproj.proj /p:DirPath="C:\this\is\directory\" 
```

在 .proj 文件中，我将其用作

```
<PropertyGroup>
  <FilePath>$(DirPath)file.txt</FilePath>
<PropertyGroup> 
```

然后 MSBuild 组成`FilePath`为`c:\this\is\directory"file.txt`. 如果我`DirPath`不带引号但带有斜杠 ( `/p:DirPath=c:\this\is\directory\`) 或不带斜杠但带有引号 ( `/p:DirPath="c:\this\is\directory\"`) 则一切正常。

可以做些什么来允许使用斜杠（这会更方便）和引号（因为路径可以包含空格）传递目录路径？或者它是 MSBuild 中的一个错误，我应该使用一些解决方法，比如在将其传递到 msbuild 时删除尾随反斜杠？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-25T14:04:38.410

这是因为在命令行上设置属性的方式。由于最后一个 '\'，MSBuild 将 " 添加到值的末尾，因此 " 将附加到字符串路径的末尾。

从命令行设置值时添加一个额外的 \ ，字符串将按预期为您附加反斜杠，或者不将 " 放在末尾。

```
MSBuild.exe myproj.proj /p:DirPath="C:\this\is\directory\\" 
```

然后值为：C:\this\is\directory\file.txt

另一个解决方案是您可以将此功能放在您的 MSBuild 项目中以替换 " ：

```
<PropertyGroup>
    <DirPath>$(DirPath.Replace('"',""))</DirPath>
</PropertyGroup> 
```

# google-drive-api - 如何对 https://docs.google.com/c/u/0/data/contactstore 进行 API 调用？

> ID：16208883
> 
> 赞同：2
> 
> 时间：2013-04-25T07:33:22.777
> 
> 标签：google-drive-api

跟进问题：

[可以使用 Drive SDK 在文档评论中以编程方式@提及其他用户吗？](https://stackoverflow.com/questions/15714818/can-one-use-the-drive-sdk-to-programmatically-mention-other-users-in-document-c)

我正在尝试在我们自己的应用程序评论中实现@mentions，这与谷歌提供的应用程序相当。

虽然评论 API 支持通过电子邮件进行标记，如上述问题中所述，但 Google Apps 有一个额外的修饰层，他们在 [https://docs.google.com/c/u/0/data/contactstore](https://docs.google.com/c/u/0/data/contactstore)查询未记录的 API用于自动完成用户名以进行标记。

假设您已通过身份验证并拥有访问令牌，应用程序是否也可以调用此 API 以实现类似于 Google Apps 的高质量评论实现？如果是这样，如何传递访问令牌来进行此调用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T14:46:43.550

抱歉，该 API（以及所有其他“未记录的”API）不供第 3 方使用。对不起。

# visual-studio - Git EndOfLine woes -> 给定一个仅限 Windows 的项目，我怎么能告诉 git 不要做任何事情？

> ID：16208888
> 
> 赞同：1
> 
> 时间：2013-04-25T07:33:37.960
> 
> 标签：visual-studio, git

好的-> 所以我有一些仅限 Windows 的项目。我厌倦了将 crlf 设置为 auto 并且我总是收到关于行尾等的警告。

我希望我的所有文件都以仅 Windows CRLF 结尾。我使用视觉工作室，我们所有的团队都使用视觉工作室。

请问我需要在我的`.gitattributes`文件中设置什么设置？

*注意：请不要把它变成'但是有些人可能会在 VS / 单声道等之外使用它。这是针对私人公司回购*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T08:00:10.637

Git 默认什么都不做，但大多数 Windows Git 安装默认设置`core.autocrlf`为`true`。要撤消此设置，您可以执行以下操作：

```
git config --system --unset core.autocrlf 
```

或为您的用户明确禁用它：

```
git config --global core.autocrlf false 
```

在您的 git 属性中，要在存储库的任何克隆上强制没有行结束规范化，您可以使用它，这意味着：“所有文件都是非文本文件”。

```
* -text 
```

# wai-aria - JAWS 未读取添加到 span 元素的动态值

> ID：16208890
> 
> 赞同：1
> 
> 时间：2013-04-25T07:33:47.863
> 
> 标签：wai-aria, jaws-screen-reader

我有这样的场景，当页面被加载时，会引发一些 Ajax 请求，并且响应将被绘制在`span`元素内部。`span`加载屏幕后，应读取所有更新的元素。

我添加了`aria-live = "polite"`和`role = "alert"`属性，`span`以使 JAWS 可以读取内容。所有更新的`span`元素都会被读取几次，或者只`span`读取最后一次更新的元素。这种行为是不一致的。你能帮我解决这个问题吗？

PS：我也尝试`aria-live`过`assertive`，但在这里也遇到了同样的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-27T03:47:50.540

您可以尝试按 INSERT + ESCAPE 组合键吗？这是为了在 JAWS 开启时刷新屏幕。如果这不起作用，您可以在此处发布 HTML 标记吗？

# jquery - 用于多个操作的 JQuery 语法

> ID：16208891
> 
> 赞同：0
> 
> 时间：2013-04-25T07:33:57.553
> 
> 标签：jquery, syntax, filter

我有一个 if`<span>`元素列表，我需要过滤和应用多个操作（文本替换和有条件地添加一个类）。我有以下工作代码：

```
$('span').filter(function() {
     return $(this).text().toLowerCase()==phrase;
}).text(translation);

$('span').filter(function() { 
     return $(this).hasClass('translatable') && $(this).text().toLowerCase()==phrase;
}).addClass(translated); 
```

这行得通，但显然要通过所有`<span>`s 两次。是否可以将它们组合成一个迭代，类似于：

```
$('span').filter(function() { 
     return $(this).text().toLowerCase()==phrase;
}).function() {
     $(this).text(translation);
     if($(this).hasClass('translatable'))
         this.addClass("translated")
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T07:49:48.270

你可以用 jQuery 的 each 方法来做到这一点

```
$('span').each(function() {
    var $this = $(this);
    if ($this.text().toLowerCase()==phrase){
        $this.text(translate);
        if ( $this.hasClass('translatable') ) {
            $this.addClass("translated");
        }
    }    
}); 
```

或者你可以链接方法

```
$('span').filter(function(){ return $(this).text().toLowerCase()==phrase; })
         .text(translate)
         .filter(function(){ return $(this).hasClass('translatable'); })
         .addClass("translated"); 
```

我个人更喜欢第一种方法。虽然它不如第一种漂亮，但它确实是一次迭代，不像第二种方法有四个单独的迭代。通过正确的优化（感谢 Samuel Caillerie），它应该会稍微快一些。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T08:03:56.443

鉴于`phrase`您的两个过滤器的测试相同，我可能会这样处理：

```
$('span').filter(function() {
     return $(this).text().toLowerCase()==phrase;
})
.text(translation)
.filter('.translatable')
.addClass('translated'); 
```

也就是说，首先找到包含该短语的跨度并设置它们的文本，然后过滤该集合以获取具有`translatable`该类的子集并将该类添加`'translated'`到那些。

# java - Java - 拆分并从字符串中获取所需的字符串

> ID：16208896
> 
> 赞同：-1
> 
> 时间：2013-04-25T07:34:09.523
> 
> 标签：java, split

我有一个如下的字符串`[Lcom.hexgen.ro.request.CreateRequisitionRO;`

如何`com.hexgen.ro.request.CreateRequisitionRO`仅从`[Lcom.hexgen.ro.request.CreateRequisitionRO;`java 中获取字符串 this 。我得到的情况很少，`com.hexgen.ro.request.CreateRequisitionRO;`所以我还必须检查给定的字符串是否具有我期望的格式`com.hexgen.ro.request.CreateRequisitionRO`

请帮我纠正它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T07:43:03.893

您应该使用正则表达式：

```
String input = "com.hexgen.ro.request.CreateRequisitionRO"; //OR "[Lcom.hexgen.ro.request.CreateRequisitionRO;"
Pattern p = Pattern.compile("(\\[L)*([\\w\\.]+)(\\;)*");
Matcher m = p.matcher(input);
while(m.find()){
    System.out.println(m.group(2));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T07:38:52.903

> 如何仅从 [Lcom.hexgen.ro.request.CreateRequisitionRO 获取字符串 com.hexgen.ro.request.CreateRequisitionRO；

```
String res = str.substring(2,str.length-1); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T07:38:59.743

这是一个代码：

```
String toBeFixed = "[Lcom.hexgen.ro.request.CreateRequisitionRO;"; 
String toReplaceWith =toBeFixed.replaceAll("\\[L", "").replaceAll("\\;","");
System.out.println(toReplaceWith); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-25T07:39:11.650

考虑到您有字符串替换查询，这可能适用于您的情况：

```
public void test(){
String s1 = "[Lcom.hexgen.ro.request.CreateRequisitionRO";
String s2 = "com.hexgen.ro.request.CreateRequisitionRO";
System.out.println(getClassName(s1));  
System.out.println(getClassName(s2));
}

public String getClassName(String s){
            if(s.startsWith("\\[L")){
                s = s.substring(2, s.length()-1);
            }
      return s;
 } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-08-10T11:16:52.320

```
Use substring function
String url="com.hexgen.ro.request.CreateRequisitionRO";
int n=url.length();
String url1=url.substring( 
```

# php - 格式化数据库查询的结果

> ID：16208898
> 
> 赞同：0
> 
> 时间：2013-04-25T07:34:28.573
> 
> 标签：php, html, mysql

到目前为止，我有以下 php，它允许用户在数据库的特定列中搜索并显示所有结果。

```
<?php
require("header.php");
if(isset($_REQUEST['searching'])){ //check if form has been submitted
echo"<h2>Results</H2><p>";
connect('final');//connect to DB
//set the values from search form
$field = $_POST['field'];
$query = $_POST['query']; 

    $query = htmlspecialchars($query); // stop HTML characters
    $query = mysql_real_escape_string($query); //stop SQL injection

     $data = mysql_query("SELECT *
     FROM customer 
     INNER JOIN address ON customer.ID = address.customer_ID
     LEFT OUTER JOIN sites ON address.ID = sites.address_ID 
     WHERE customer.ID IN (SELECT customer.ID 
     FROM customer
     INNER JOIN address ON customer.ID = address.customer_ID 
     LEFT OUTER JOIN sites ON address.ID = sites.address_ID
     WHERE upper(customer.$field) LIKE'%$query%')") ;//query the DB with search field in colleumn selected//

     //$data = mysql_query("SELECT * FROM customer INNER JOIN address ON customer.ID = address.Customer_ID LEFT OUTER JOIN sites ON address.ID = sites.address_ID WHERE upper(customer.$field) LIKE'%$query%'") ;

    if($data === FALSE) {
    $error = 'Query error:'.mysql_error();
    echo $error;
    }
    else
    {
    while($results = mysql_fetch_array($data)){// puts data from database into array, loops until no more
            echo "<br>"; 
            echo $results['First_Name']; 
            echo " "; 
            echo $results['Surname']; 
            echo " "; 
            echo $results['Company_Name']; 
            echo " "; 
            echo $results['Telephone']; 
            echo " "; 
            echo $results['Alt_Telephone']; 
            echo " "; 
            echo $results['line_1']; 
            echo " "; 
            echo $results['line2']; 
            echo " "; 
            echo $results['town']; 
            echo " "; 
            echo $results['postcode'];
            echo " "; 
            echo $results['site_name'];

            //posts results from db query
        }
    }

        $anymatches=mysql_num_rows($data); //checks if the querys returned any results
            if ($anymatches == 0) 
                    { 
                        echo "Sorry, but we can not find an entry to match your query<br><br>"; 
                    } 

    } 
```

但是，当我使用 echo 输出时，它只会在页面顶部显示所有结果，并将我的所有 html 内容推到它下方。

如何格式化它以使其出现在我的 html 内容中？例如，在搜索按钮下方。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T07:43:53.173

解决方案是不要回显它将在顶部显示的内容，因为 PHP 先处理代码然后加载 html，因此它将在页面顶部回显数据。

解决方案是在 while 循环中将结果分配到一个数组中，然后使用该数组在 html 中显示它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T07:43:42.157

也许，结束标签“p”会有所帮助？尝试添加

```
echo "</p>"; 
```

到底。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T09:18:56.693

我认为你在那里缺少一些 html 标签，例如：

```
 echo "<div>"; 
        echo $results['First_Name']; 
        echo " "; 
        echo $results['Surname']; 
        echo ", "; 
        echo $results['Company_Name']; 
        echo "</div><address>"; 
        echo $results['Telephone']; 
        echo "<br>"; 
        echo $results['Alt_Telephone']; 
        echo "<br>"; 
        echo $results['line_1']; 
        echo "<br>"; 
        echo $results['line2']; 
        echo "<br>"; 
        echo $results['town']; 
        echo " "; 
        echo $results['postcode'];
        echo "</address><div>"; 
        echo $results['site_name'];
        echo "</div>"; 
```

如果您允许稍微 OT 的答案，您的代码表明您正在学习 PHP。

如果是这样，请记住，在线 PHP 教程经常是多年前编写的，并且处于过时状态，并附有示例代码，显示了您可以做的最糟糕的事情。

假设我的评估是正确的，请考虑在设计良好的框架旁边学习 PHP。Silex 在这方面比较容易上手：

*   [http://silex.sensiolabs.org](http://silex.sensiolabs.org)
*   [http://www.google.com/search?q=silex+app+example](http://www.google.com/search?q=silex+app+example)

您可能想要研究的其他框架：

*   [http://symfony.com](http://symfony.com)
*   [http://framework.zend.com](http://framework.zend.com)
*   [http://www.yiiframework.com](http://www.yiiframework.com)
*   [http://www.fuelphp.com](http://www.fuelphp.com)
*   [http://ellislab.com/codeigniter](http://ellislab.com/codeigniter)
*   [http://cakephp.org](http://cakephp.org)（变老）

还有很多很多。

# angularjs - 在 angularJS 中拦截 ng-click

> ID：16208899
> 
> 赞同：21
> 
> 时间：2013-04-25T07:34:28.963
> 
> 标签：angularjs

是否可以为 ng-click 编写拦截器？我有一个按钮或链接会导致在后端删除一个对象。我想通过向按钮/链接添加一个属性来获得一个确认对话框（模式）。例如：

```
<a href="#" ng-click="deleteIt(id)" confirmation-needed>Delete</a> 
```

AngularJS可以做到这一点吗？有没有更好的方法来解决这个问题？

**编辑**deleteIt 方法驻留在不同的控制器中。

谢谢

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-04-25T09:27:04.303

我在以下位置放置了一个示例指令：

[http://plnkr.co/edit/GJwK7ldGa9LY90bMuOfl?p=preview](http://plnkr.co/edit/GJwK7ldGa9LY90bMuOfl?p=preview)

我通过创建一个指令来实现它：

1.  有一个高于`priority`，`ngClick`以便它在之前被调用`ngClick`，
2.  使它`terminal`不会调用`ngClick`.
3.  侦听点击事件，然后`ngClick`在消息正常时评估值。

作为奖励，您可以传递自己的消息，例如：

```
<a href="#" ng-click="deleteIt(id)" 
    confirmation-needed="Really Delete?"
        >Delete with custom message</a> 
```

代码如下所示：

```
app.directive('confirmationNeeded', function () {
  return {
    priority: 1,
    terminal: true,
    link: function (scope, element, attr) {
      var msg = attr.confirmationNeeded || "Are you sure?";
      var clickAction = attr.ngClick;
      element.bind('click',function () {
        if ( window.confirm(msg) ) {
          scope.$eval(clickAction)
        }
      });
    }
  };
}); 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-09-13T19:05:31.683

我已经放弃让 Piran 的答案按照我的意愿工作。相反，我已经开始用我自己的指令替换 ngClick：

```
.directive('confirmClick', function() {
    return {
        restrict: 'A',
        link: function(scope, elt, attrs) {
            elt.bind('click', function(e) {
                var message = attrs.confirmation || "Are you sure you want to do that?";
                if (window.confirm(message)) {
                    var action = attrs.confirmClick;
                    if (action)
                        scope.$apply(scope.$eval(action));
                }
            });
        },
    };
}) 
```

该指令甚至没有自己的范围，这大大简化了它与其他指令的组合。它直接从`attrs`. 它是这样使用的：

```
<span ng-show="editing" confirm-click="delete()" confirmation="delete confirmation message goes here">some text</span> 
```

该函数必须存在于链`delete()`中更高的某个位置。`$scope`我相信这可以通过仔细研究如何`ng-click`实现来改进，但我还没有开始！

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-05-17T04:14:38.770

我玩了很长时间，但是 Angular 的异步特性使得很难指望每个指令都能很好地协同工作。然后，我看到了@tosh 的回答，这让我开始思考。

我认为这结合了几个优点：**创建指令和前置 ngClick**

因此，只需将此指令添加到您的应用程序中，然后将“confirm-click”属性添加到您的链接中，并将 confirmClick() 函数添加到您的 ngClick 中。

关联：

```
<a href="#" ng-click="confirmClick() && deleteIt(id)" confirm-click>Delete</a> 
```

指示：

```
.directive('confirmClick', function() {
    return {
        link: function (scope, element, attrs) {
            // setup a confirmation action on the scope
            scope.confirmClick = function(msg) {
                // msg can be passed directly to confirmClick('are you sure?') in ng-click
                // or through the confirm-click attribute on the <a confirm-click="Are you sure?"></a>
                msg = msg || attrs.confirmClick || 'Are you sure?';
                // return true/false to continue/stop the ng-click
                return confirm(msg);
            }
        }
    }
}) 
```

这与注入标准的 confirm() 对话框非常相似，但是因为您在指令中拥有它，所以您可以自定义选择运行确认对话框的方式（可能是一个漂亮的模式，而不是窗口对话框）。

**** 奖励答案 ****

我对此进行了更多尝试，并集成了一个使用模式窗口作为确认的解决方案，而不是默认窗口。这是完整的解决方案：[https ://stackoverflow.com/a/237186​​94/1135826](https://stackoverflow.com/a/23718694/1135826)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-25T08:20:52.043

您可以注入`$window`您的控制器，以便您可以`$window.confirm`从您的范围内使用，然后：

```
<a href="#" ng-click="confirm('message') && deleteIt(id)">Delete</a> 
```

# sql-server - 优化 SQL Server 中列中值的搜索

> ID：16208900
> 
> 赞同：2
> 
> 时间：2013-04-25T07:34:30.387
> 
> 标签：sql-server, sql-server-2008, tsql

我对 SQL Server 还很陌生，我在这个非常大的表上遇到了这个问题，这个表是以一种相当尴尬的方式实现的。这是设计外观的摘要图片

**表 A**

```
itemID uniqueidentifier PK
name   vchar(32)
datecreated datetime
dateprocessed datetime
datereviewed datetime
approvalstatus int
workflowstatus int 
```

**表 B**

```
fieldID uniqueidentifier PK
itemID  uniqueidentifier FK(referencing table A's itemID)
name    vchar(32)
value   vchar(32) 
```

在表 A 中，我们记录了一些交易记录，其中一些字段被填充到表 B。例如`AccountNumber`，表 A 中的交易被填充到表 B 中，名称 = accountnumber 和 value = '[actual account number]' 以及所需的 itemID . 现在表 B 非常大，因此使用视图查询特定交易的帐号需要很长时间。

请注意，所有这些名称列以前都在表 A 中，但由于不断变化的业务需要添加更多列，导致团队以这种方式创建结构，以便添加新字段不需要向表 A 添加新列。

优化此表的最佳方法是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T08:22:35.090

您的同事创建的是实体属性值 (EAV) 存储。不管这些是不是邪恶的东西，我都会放在一边。

简短的回答是：您无法优化查询。

更长的答案是：您也许可以在表 B 的 AV 中添加一个（索引）类型字段，以使事情变得更高效。

根据您在其中存储的内容，一个稍微相关的选项可能是使用触发器在其中维护额外的类型化字段，并为后者编制索引。例如，触发器可以维护一个`int`字段，该字段保存标记为类型为的字段的整数值`int`。

也就是说，不要指望这些解决方案会大大提高性能，因为您仍然会进行大量不必要的连接。请记住，这两个技巧都会增加开销（额外的磁盘空间 + 与索引维护相关的时间）。

正确答案是：EAV 存储应该只用于存储*元*信息。

所谓元，我的意思是你很少使用 where 子句的东西，更不用说一个非常有选择性的东西了。

换句话说，确定经常查询的关键字段，无论是where子句，join子句，order by子句等。将它们移回表A，并正确索引它们。

当您使用它时，请考虑从表 A 中移动大多数/所有行中存在的内容：由于不再需要`name`表 B 中的该字段，您移动的每个字段都会为您节省空间，并且您会得到适当的输入数据作为奖励。

# php - PHP preg_replace 排除 < 和 >

> ID：16208905
> 
> 赞同：1
> 
> 时间：2013-04-25T07:34:39.243
> 
> 标签：php, regex, preg-replace

我需要更改此代码：

```
$output = preg_replace("#&lt;a ([^&gt;]*)&gt;([^&lt;]*)&lt;\/a&gt;#", "<a href=\"$1\">$2</a>", $output) 
```

从`&lt;a some.url&gt;description&lt;/a&gt;`到 HTML 代码`<a href="some.url">description</a>`，但是在我改变`< and >`它之后`&lt; and &gt;`并没有做出我想要的。

谢谢您的帮助。

**编辑：**

我不会使用`html_entity_decode()`，因为我希望它能够启用稍微简化的 HTML 标签，但我会禁用大部分 HTML。

我的函数的输入是一个变量，从一个表单中获得：

首先，代码将所有的`<`and`>`替换为`&lt;`and `&gt;`。

比它改回一些修改文本的静态 HTML 标记，例如`<b>`和`</b>`.

但最后，我想将输入为`<a some.url>link</a>`（而不是通过代码更改为`&lt;a some.url&gt;link&lt;/a&gt;`）的每个链接更改`preg_replace()`为标准 HTML 代码`<a href="some.url">link</a>`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T07:38:02.177

[http://php.net/manual/en/function.html-entity-decode.php](http://php.net/manual/en/function.html-entity-decode.php)

```
$str = "this 'quote' is &lt;b&gt;bold&lt;/b&gt;"
html_entity_decode($output)
// output This 'quote' is <b>bold</b> 
```

[http://php.net/manual/en/function.htmlentities.php](http://php.net/manual/en/function.htmlentities.php)

```
$str = "This 'quote' is <b>bold</b>";
htmlentities($output);
// output this 'quote' is &lt;b&gt;bold&lt;/b&gt; 
```

# https - 是否可以使用 http 和 https 使 NGINX 在 Tomcat 上与 Liferay 一起工作？

> ID：16208907
> 
> 赞同：2
> 
> 时间：2013-04-25T07:34:57.727
> 
> 标签：https, proxy, nginx, liferay, tomcat7

我正在尝试在前端配置 NGINX 并在后端配置 Tomcat 以使其协同工作。

我用 2 个连接器配置了我的 Tomcat server.xml：

```
<Connector port="8443" protocol="HTTP/1.1" scheme="https" secure="true" proxyPort="443" proxyName="www.myhost.com" connectionTimeout="20000" URIEncoding="UTF-8" />

<Connector port="8080" protocol="HTTP/1.1" scheme="http" proxyPort="80" proxyName="www.myhost.com" connectionTimeout="20000" URIEncoding="UTF-8" /> 
```

**当用户在http://www.myhost.com**和**https://www.myhost.com**上调用我的网站时，我的 NGINX 服务器会收到请求。在每次调用（不包括缓存...）时，NGINX 都会根据原始请求的方案（http 或 https）在 8080 端口或 8443 上向我的 Tomcat 服务器发送请求。

它工作正常，但 Tomcat 似乎给我的 webapp 提供了错误的信息（实际上，我的 webapp 是 Liferay）。它给出了错误的服务器主机。

例如，当我在 http://www.myhost.com 上调用我的服务器时**， NGINX 在****8080**端口上调用 Tomcat，但 Liferay 似乎收到了一个带有错误服务器主机的请求（http* *s* *://www.myhost.com /)。Liferay 使用这个服务器主机来建立链接。实际上，Liferay 正在构建的所有链接都符合这种模式：http* *s* *://www.myhost.com/....

据我说，根据我的配置，它应该像这样工作：

*   Tomcat 在 8080 端口收到请求。
*   **Tomcat 了解我的电话是在http://www.myhost.com**上的事实
*   Tomcat 应将 proxyHost (www.myhost.com) 和 proxyPort (80) 提供给 Liferay webapp，因为 Tomcat 在端口 (8080) 上收到消息（Liferay 应使用 request.getServerPort() 和 request.getServerHost() 检索这些信息[Tomcat配置](http://tomcat.apache.org/tomcat-7.0-doc/config/http.html)）
*   Liferay 应该考虑这些信息来构建链接 URL（菜单...）。

这是我的问题。Liferay 得到了错误的配置：https 方案上的配置。

我使用这篇文章来配置 NGINX[在 ubuntu 12.04 上安装 nginx 并将其连接到 Tomcat](http://liferay-implementation.blogspot.fr/2012/07/install-nginx-on-ubuntu-1204-and.html)。这篇文章没有解释如何为 https 执行此操作。在我的上下文中，我为 http 和 https 写了两次。

有人已经解决了这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-23T15:38:43.167

这不是推荐的方法。如果你有像 NGINX 这样的代理（在我的例子中是磅），那么 SSL 层应该留给代理。这允许代理检查 HTTP 标头以提供“粘性”会话，其中用户停留在集群外的单个 tomcat Web 服务器上。

在我的情况下，我让 tomcat 在 localhost:8080 上侦听 Pound 在外部 ip:80 上侦听，并且只返回到 https 的重定向（外部 ip:443） Pound 还侦听外部 ip:443，解密 SSL 和代理到 8080 上的 tomcat （实际上是一个tomcats集群）

您还需要在 portal-ext.properties 中设置一些参数：
web.server.http.port=80
web.server.https.port=443
web.server.protocol=https

这告诉 LifeRay 在与 SSL 代理的公共接口匹配的端口 443 上将所有链接生成为 HTTPS。

现在的问题是，如果您直接连接到 8080 上的 tomcat，LifeRay 将生成“错误”链接并将您发送到代理。我还没有找到解决这个问题的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-14T14:55:47.013

使用 nginx 站点配置中的这些代码行，可以使用 nginx 作为 Tomcat 安装的反向代理。

```
server {
  listen 80;
  server_name my.server.com;
  location / {
    proxy_set_header        X-Real-IP $remote_addr;
    proxy_set_header        Host    $http_host;
    proxy_pass              http://127.0.0.1:8080;
  }
} 
```

这允许您在 nginx 上设置另一个虚拟主机（server_name），转发到[http://127.0.0.1:8080](http://127.0.0.1:8080)上的 tomcat 安装。在此处添加 SSL/TLS 支持，而不是在 tomcat 配置中。

我没有检查过 webdav，但是使用带有 webbrowser 的门户就像一个魅力。

# android - 在某些情况下禁用 GridView 滚动

> ID：16208908
> 
> 赞同：2
> 
> 时间：2013-04-25T07:34:59.997
> 
> 标签：android, gridview, scroll

我有一个`GridView`在`GridView`. 在显示我的预览时，我想禁用滚动。我的代码如下所示：

```
grid.setOnTouchListener(new OnTouchListener() {
    public boolean onTouch(View v, MotionEvent event) {
        if(event.getAction() == MotionEvent.ACTION_UP) {
            preview.setVisibility(View.GONE);
            return true;
        } else if(event.getAction() == MotionEvent.ACTION_MOVE) {
            Log.d("test", "isShown: " + preview.isShown());
            return preview.isShown();
        }
        return false;
    }
}); 
```

很简单，但这并不完美。通过消耗事件禁用滚动，但似乎每次在 上执行第一个移动事件`GridView`并且它只移动一次某些像素。

让我感到困惑的是，`isShown: false`在设置为 visble 后，我在 logcat 中没有收到消息`preview`。到目前为止，这也不是明显的反应条件。这意味着我的听众咳嗽的所有事件都`true`按预期返回。

我读到这几乎是重复的，还有更多：

*   [如何在 Android 中禁用 GridView 滚动？](https://stackoverflow.com/q/4852867/995926)
*   [如何在 GridView 中禁用滚动？](https://stackoverflow.com/q/8908228/995926)

但是有一点关于如何禁用它。这是我自己想出来的。

# css - div悬停背景颜色，里面有textarea

> ID：16208912
> 
> 赞同：4
> 
> 时间：2013-04-25T07:35:07.527
> 
> 标签：css, html, textarea

我有一个`textarea`里面的`div`。与的`textarea`大小几乎相同，仅在其周围`div`留下一条窄条可见。`div`我想要实现的（最好仅使用 CSS）是`div`当鼠标光标在其上时具有更改的背景，但在`textarea`. 换句话说，如果鼠标光标位于`div`textarea 周围可见条的顶部，我想要`div` `background color`更改，但如果它位于 textarea 本身的顶部，我不希望它更改

这是一个说明问题的jsfiddle：

[http://jsfiddle.net/TS98t/](http://jsfiddle.net/TS98t/)

HTML：

```
<div class="mydiv">
    <textarea class="mytextarea"></textarea>
</div> 
```

CSS：

```
.mydiv {
    position: absolute;
    left: 0px;
    top: 0px;
    width: 200px;
    height: 200px;
    background-color: green;
}

.mydiv:hover {
    background-color: blue;
}

.mytextarea {
    position: absolute;
    top: 10px;
    bottom: 10px;
    left: 10px;
    right: 10px;
    resize: none;
    background-color: yellow;
} 
```

`div`是绿色的，是`textarea`黄色的。如果我将鼠标移到 div 上，它会变成蓝色。但我不希望它在鼠标悬停在`textarea`.

提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-25T07:39:57.013

选择器级别 4 允许通过[确定选择器](http://dev.w3.org/csswg/selectors4/#subject)语法的主题来实现这一点：

```
.mydiv {
    background-color: green;
}

.mydiv:hover {
    background-color: blue;
}

!.mydiv textarea:hover {
    background-color: green;
} 
```

......但该规范目前是一个非常早期的草案，如果有任何浏览器支持它，我会感到惊讶。

在此之前，您需要查看 JavaScript。例如：

```
.mydiv.textarea_hover {
  background-color: green;
} 
```

和

```
var t = document.querySelector('textarea');
var d = t.parentNode;
t.addEventListener('mouseover', function () {
    d.className += " textarea_hover";
});
t.addEventListener('mouseout', function () {
    d.className = d.className.replace(/ textarea_hover/g, "");
}); 
```

# php - Beanstalkd 服务器不可用的问题？

> ID：16208913
> 
> 赞同：0
> 
> 时间：2013-04-25T07:35:14.170
> 
> 标签：php, laravel, laravel-4, beanstalkd

我想将 beanstalkd 与 Laravel 4 一起使用，这样我就可以将我的邮件排队等待发送。我注意到 laravel 4 已经准备好开箱即用的 beanstalkd（需要设置一些配置设置）。我的问题是使用 GUI 来监控 beanstalkd。我已经安装了 phpBeanstalkdAdmin 和 beanstalkd_console。当我在浏览器中访问 beanstalkd_console 时，一切正常，但出现此错误：

> 错误：服务器不可用

并且使用 phpBeanstalkdAdmin 我只获得了管理界面，并且没有任何按钮起作用。我不能申请服务器，我不能通过他们的界面向任何管子添加任何工作。

我用来在我的 ubuntu 12.10 服务器上运行 beanstalkd 的命令是：

> 豆茎 -l 127.0.0.1 -p 11300

此命令似乎工作正常，服务器运行或开始监控。

我检查了 beanstalkd_console 的 include.php 中的 confif 选项，所有设置都是正确的。有没有人遇到过类似的问题，或者知道可能是什么原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-04T13:04:19.467

尝试以详细的方式运行以查看 beanstalkd 本身或连接是否有任何问题

`beanstalkd -l 127.0.0.1 -p 11300 -V`

或更详细的 -VV（大 V）

# ruby - csv 按日期散列、分组并保存到 .txt

> ID：16208914
> 
> 赞同：0
> 
> 时间：2013-04-25T07:35:15.637
> 
> 标签：ruby, csv, hash

我正在导入 iphone 日志的 csv 文件，并希望按日期对呼叫进行分组，并将每天的呼叫输出到 .txt 文件。

我正在导入：

```
src = <<csv
"name","Date","Duration","Call Type"
"Henry Jones ","2013-04-04 19:30:19","0:00:49","Outgoing"
"Alistair Morgan ","2013-04-05 13:14:07","0:00:03","Outgoing"
"Quentin Blah","2013-04-05 13:19:44","0:04:28","Missed"
"Quentin Blah","2013-04-05 13:25:19","0:09:45","Incoming"
"Henry Jones ","2013-04-05 14:35:29","0:00:24","Incoming"
"Henry Jones ","2013-04-05 15:54:53","0:00:00","Missed"
"Henry Jones ","2013-04-06 16:21:20","0:00:47","Outgoing"
"Bill and Ben Saunders ","2013-04-06 18:33:00","0:00:32","Outgoing"
"Phil Philly","2013-04-08 08:56:06","0:01:18","Outgoing"
"Barry Smith ","2013-04-08 13:51:03","0:00:48","Incoming"
"John Goole ","2013-04-08 18:24:57","0:06:28","Incoming"
"John Goole ","2013-04-08 18:32:07","0:00:35","Outgoing"
"Barry Barry","2013-04-08 18:33:29","0:01:56","Outgoing"
"Phil Michelson","2013-04-09 09:32:14","0:20:30","Outgoing"
"Nick Badson ","2013-04-09 12:00:28","0:00:00","Incoming"
"Henry Jones ","2013-04-09 15:09:02","0:00:00","Outgoing"
csv

require 'csv'
csv_data = CSV.parse (src)

headers = csv_data.shift.map {|i| i.to_s }
string_data = csv_data.map {|row| row.map {|cell| cell.to_s } }
array_of_hashes = string_data.map {|row| Hash[*headers.zip(row).flatten] }

p array_of_hashes 
```

我现在正在努力知道如何对它们进行排序然后输出。

许多 TIA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T07:38:53.297

利用[`Enumerable#sort_by`](http://ruby-doc.org/core-2.0/Enumerable.html#method-i-sort_by)

尝试这个

```
array_of_hashes.sort_by{|h| h["Duration"]} #=> change "Duration" any key you needed. 
```

# android - 在 vuforia 增强现实应用程序中在运行时选择 3d 模型

> ID：16208919
> 
> 赞同：2
> 
> 时间：2013-04-25T07:35:36.523
> 
> 标签：android, vuforia

我正在使用适用于 android 的 vuforia unity 扩展来开发增强现实项目。我有一个 3d 模型（.3ds）列表。我希望当用户从该列表中选择模型时，它会显示在相机视图中。我没有在应用程序中预加载这些模型。相反，这些可以在存储卡中。我在网上搜索过，但大部分教程都是关于在运行时使用 opengl 渲染 .h。有什么解决方案可以解决我的问题吗？请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-21T14:15:12.397

更好的选择是使用第 3 方 3D 加载程序库。提供与 Vuforia 集成的库很少。

JPCT - [http://www.jpct.net/wiki/index.php/Integrating_JPCT-AE_with_Vuforia](http://www.jpct.net/wiki/index.php/Integrating_JPCT-AE_with_Vuforia)
Rajawali - [https://github.com/MasDennis/RajawaliVuforia](https://github.com/MasDennis/RajawaliVuforia)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-04T12:36:33.780

代码编译后无法加载 3d 模型。因为在 vuforia 中，.h 类用于 3d 模型。您必须在启动应用程序之前包含该类。在运行时，您将无法编译该 .h 类。这就是为什么所有 3 个模型都应该预加载为 .h 的原因。

# javascript - 使用 javascript xml xslt 在最后一个 li 上设置点击事件

> ID：16208922
> 
> 赞同：-2
> 
> 时间：2013-04-25T07:35:53.250
> 
> 标签：javascript, xml, xslt

这是我的 xslt 文件：-

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="html" indent="yes" omit-xml-declaration="yes"/>

  <xsl:template match="*" mode="item">
    <li>
      <xsl:value-of select="@value" />
    </li>
    <xsl:apply-templates select="current()[*]" />
  </xsl:template>

  <xsl:template match="*/*">
    <ul>
      <xsl:apply-templates select="*[1] | node()[current()/ancestor::*[2]]" 
                           mode="item" />
    </ul>
  </xsl:template>
</xsl:stylesheet> 
```

有了这个 xslt，我创建了 HTML 标记`ul li`
，这是我的 xml 文件：-

```
<?xml-stylesheet href="b.xsl" type="text/xsl"?>
<root>
  <child_1 entity_id = "1" value="Game" parent_id="0">
    <child_2 entity_id="2" value="Activities" parent_id="1">
      <child_3 entity_id="3" value="Physical1" parent_id="2">
        <child_6 entity_id="6" value="Cricket" parent_id="3">
          <child_7 entity_id="7" value="One Day" parent_id="6"/>
        </child_6>
      </child_3>
      <child_4 entity_id="4" value="Test1" parent_id="1">
        <child_8 entity_id="8" value="Test At Abc" parent_id="4"/>
      </child_4>
      <child_5 entity_id="5" value="Test2" parent_id="1">
        <child_9 entity_id="9" value="Test At Xyz" parent_id="5"/>
      </child_5>
    </child_2>
</child_1>
</root> 
```

现在我想在 li 上设置点击事件，如果 li 有孩子，那么它的文本会打印在 div 标签上。
我也有一个 javascript 函数。

```
$('li:not(:has(*))').click(function(){
   $('#result').text($(this).text());
}); 
```

但我如何申请我不知道这一点。
我需要一点帮助。一些哥们帮我解决这个问题。
谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T10:06:38.510

您当前的 xsl 提供以下输出：

```
<ul>
   <li>Activities</li>
   <ul>
      <li>Physical1</li>
      <ul>
         <li>Cricket</li>
         <ul>
            <li>One Day</li>
         </ul>
      </ul>
      <li>Test1</li>
      <ul>
         <li>Test At Abc</li>
      </ul>
      <li>Test2</li>
      <ul>
         <li>Test At Xyz</li>
      </ul>
   </ul>
</ul> 
```

实际上，嵌套的 ul 本身就是列表项，因此应该在 li 标签内，并且还有一两个其他问题已修复：

```
<ul>
   <li>Activities</li>
   <li>
      <ul>
         <li>Physical1</li>
         <li>
            <ul>
               <li>Cricket</li>
            </ul>
         <li>One Day</li>
      </ul>
   </li>
   <li>Test1</li>
   <li>
      <ul>
         <li>Test At Abc</li>
      </ul>
   </li>
   <li>Test2</li>
      <ul>
         <li>Test At Xyz</li>
      </ul>
   </li>
</ul> 
```

目前尚不完全清楚您要做什么，请编辑问题以显示所需的输出，然后我可以就您需要的 xsl 提供建议。至于包含脚本，以下内容将起作用 - 根据需要使用内联或外部链接：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:template match="/">
    <html>
        <xsl:call-template name="HeaderTemplate" />
    <body>

    </body>
    </html>
</xsl:template>

<xsl:template name="HeaderTemplate">

    <head>
    <script>
        function MyFunction()
            {

            }
    </script>
    <script src="myScript.js"></script>
    </head>

</xsl:template>

</xsl:stylesheet> 
```

# selenium - Selenium WebDriver C#通过href路径查找元素

> ID：16208925
> 
> 赞同：8
> 
> 时间：2013-04-25T07:36:00.813
> 
> 标签：selenium, webdriver, href

我如何点击

`<a href="Vacancies.aspx?param=apply:16 " title="Please click to apply ">Apply</a>`

我在页面上有几个应用链接。我应该点击应用：16（不应用：10,11,n）。

我有一个脚本（watir，ruby）：

`browser.link(:href, "Vacancies.aspx?param=apply:16").click`

Selenium WebDriver C# 应该如何？

我试过
`driver.FindElement(By.LinkText("Apply")).Click();` 但正如你所理解的，这不起作用。

谢谢

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-25T07:42:10.503

试试下面的定位器。

```
By.CssSelector("[href*='Vacancies.aspx?param=apply:16']") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-20T09:49:34.730

就像整理 Santoshsarma 的工作一样！

```
def <yourbutton> = driver.findElement(By.cssSelector("[href*='Vacancies.aspx?param=apply:16']")) 
```

# google-apps-script - 在 Google Apps 脚本中，如何保留用户输入的换行符？

> ID：16208927
> 
> 赞同：2
> 
> 时间：2013-04-25T07:36:07.060
> 
> 标签：google-apps-script, return, newline

我有一个从中收集用户输入的 TextArea()。

我想将此输入返回到电子邮件中，但保留格式很重​​要。如果有人输入回报或段落来分隔他们的陈述，我希望将其反映在输出中。

目前，我将此输入分配给一个变量，然后在 MailApp() 调用中引用该变量。它不会通过此过程保留格式：

```
var user_input=e.parameter.text_area_input;

MailApp.sendEmail({
  to: "someemail@somedomain.com",
  subject: "This is a subject.",
  htmlBody: "Here is the text that was entered: <BR>" + user_input
}) 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-25T09:04:39.397

您正在发送一封 html 电子邮件，因此您需要将换行符 '\n' 替换为换行符 <BR>。

这是选项

```
//Send as text email
MailApp.sendEmail('someemail@somedomain.com',  
                   'This is a subject', 
                   'Here is the text that was entered: \n' + user_input);

//send as html email
MailApp.sendEmail('someemail@somedomain.com',  
                   'This is a subject', 
                   '', {htmlBody: 'Here is the text that was entered: <br>' + user_input.replace(/\n/g, '<br>')}); 
```

我没有测试过代码。它可能有语法错误或拼写错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-09-07T16:44:21.763

您可以使用`\n`to do it, in `JavaScript`,`\n`表示`n`

# asp.net - 在 RewritePath 之后，aspx 页面呈现为纯文本

> ID：16208930
> 
> 赞同：0
> 
> 时间：2013-04-25T07:36:15.947
> 
> 标签：asp.net, httphandler, httpmodule, ihttpmodule

[我的 ASP.NET 应用程序使用与此处](https://stackoverflow.com/questions/276355/can-i-access-session-state-from-an-httpmodule)相同的 HTTP Moule 。但是，每当我尝试在 Application_PostAcquireRequestState 中重写路径时，我都会将 Default.aspx 视为纯文本。

有谁知道为什么它是这样呈现的，而不是被呈现为普通的 aspx 页面？

这是我的 Application_PostAcquireRequestState 的代码

```
public void Application_PostAcquireRequestState(object source, EventArgs e)
{
    HttpApplication app = (HttpApplication)source;

    MyHttpHandler resourceHttpHandler = HttpContext.Current.Handler as MyHttpHandler;

    if (resourceHttpHandler != null)
    {
        // set the original handler back
        HttpContext.Current.Handler = resourceHttpHandler.OriginalHandler;
    }

    // -> at this point session state should be available
    System.Web.HttpApplication context = (System.Web.HttpApplication)source;
    string url = context.Context.Request.RawUrl;
    string path = context.Context.Request.Path;

    if (path.Contains("home"))
    {
        //after this it renders Default.aspx as plain text
        context.Context.RewritePath("~/Default.aspx");
    }

} 
```

重写路径后，我看到：

```
<%@ Page Title="Home Page" Language="C#" MasterPageFile="~/Site.master" AutoEventWireup="true"
    CodeBehind="Default.aspx.cs" Inherits="M._Default" %>

<asp:Content ID="HeaderContent" runat="server" ContentPlaceHolderID="HeadContent">
</asp:Content>
<asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="cphContextMain">
    <asp:Panel ID="pnBodyContent" runat="server">
    </asp:Panel>
</asp:Content> 
```

谢谢

# java - Selenium WebDriver 使用三帧。无法定位元素

> ID：16208939
> 
> 赞同：2
> 
> 时间：2013-04-25T07:36:37.623
> 
> 标签：java, selenium, webdriver, selenium-webdriver

我对 Selenium Webdriver 很陌生。我正在尝试使网页自动化，但我面临两个问题。我无法单击框架中的“搜索”按钮。下面是我的代码。

```
 WebDriverWait wait = new WebDriverWait(driver,120,1000);

     wait.until(ExpectedConditions.frameToBeAvailableAndSwitchToIt("frameview"));

     wait.until(ExpectedConditions.frameToBeAvailableAndSwitchToIt("epilowerframe"));

     wait.until(ExpectedConditions.frameToBeAvailableAndSwitchToIt("productSearchIframe"));

     driver.switchTo().frame("frameview")
     .switchTo().frame("epilowerframe")
     .switchTo().frame("productSearchIframe");

    driver.findElement(By.id("styleSearchForm:goBtn")).click(); 
```

StylesearchForm:goBtn 在 productsearchIframe 内。

我总是收到错误：

> 等待帧可用 120 秒后超时：epilowerframe 构建信息：版本：'2.31.0'，修订：'1bd294d'，时间：'2013-02-27 20:53:56' 系统信息：os.name : 'Windows 7', os.arch: 'amd64', os.version: '6.1', java.version: '1.6.0_33' 驱动程序信息: driver.version: org.openqa.selenium.support.ui 未知。 FluentWait.timeoutException(FluentWait.java:259) at org.openqa.selenium.support.ui.FluentWait.until(FluentWait.java:228) at Nike_Demo.main(Nike_Demo.java:59)

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-11T13:26:12.503

frameToBeAvailableAndSwitchToIt 已经将驱动程序切换到框架。你不需要这样做：

```
 driver.switchTo().frame("frameview")
 driver.switchTo().frame("epilowerframe")
 driver.switchTo().frame("productSearchIframe"); 
```

只需使用代码：

```
 WebDriverWait wait = new WebDriverWait(driver,120,1000);

 wait.until(ExpectedConditions.frameToBeAvailableAndSwitchToIt("frameview"));
 wait.until(ExpectedConditions.frameToBeAvailableAndSwitchToIt("epilowerframe"));
 wait.until(ExpectedConditions.frameToBeAvailableAndSwitchToIt("productSearchIframe"));

 driver.findElement(By.id("styleSearchForm:goBtn")).click(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-03T14:54:38.213

这不是经常出现的问题，但有时，根据应用程序，您可能会过快地切换帧。每次调用 .switchTo() 以进入新帧后，您应该暂停 1-2 秒。这将使浏览器驱动程序有时间在您执行另一个 switchTo() 之前加载新的 DOM。此外，您似乎要切换到每个帧两次；不知道你是否注意到了。

# javascript - AS3 中的 jquery each() 函数

> ID：16208949
> 
> 赞同：1
> 
> 时间：2013-04-25T07:37:20.107
> 
> 标签：javascript, jquery, actionscript-3, flash, apache-flex

尽管 Flash 技术正在消亡，但我仍然必须完成我的项目 :)))

如何在 AS3 中为每个循环实现，它为我提供数组中元素的索引，就像 jquery each() 函数一样

```
jQuery.each( collection, callback(indexInArray, valueOfElement) ) 
```

我用这个

```
for each(var myObj:* in myArray)
{ 
     // do some stuff with myObj
} 
```

如何在每个中使用这样的 myArray.splice(index, 1) 状态？

或者有可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T07:51:23.863

jQuery`.each()`只是一个对象迭代器，它为您做一些额外的检查。您应该能够摆脱如下语法：

```
var i = 0;
for ( property in object ) {
    callback( i++, object[property] )
} 
```

虽然，我不知道 AS3 是如何工作的，但请记住，JavaScript 中的对象属性没有顺序。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-25T08:44:17.203

这会奏效。

```
var arr:Array = new Array();
arr[1] = true;
arr[5] = true;
arr.forEach(function (item:*, index:int, array:Array)
{
    if(item != undefined)
    {
        callback(index, item);          
    }        
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-25T08:42:42.273

为什么不使用属于 Array 对象的[forEach函数，该函数将对数组中的每个项目执行一个函数。](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/Array.html#forEach%28%29)

这是一个使用它的实时示例：[http ://wonderfl.net/c/mLhCM](http://wonderfl.net/c/mLhCM)

前任：

```
var ar:Array = ["hello", 1, "world", 2];
ar.forEach(
   function(elm:*, index:int, arr:Array):void {
            trace("got elm : "+elm+" at index : "+index);
   }
); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-25T08:43:58.273

为什么不简单`for...in`循环：

```
var arr:Array = [2,1,5,0,0,0,87,8,110];

for (var i:String in arr)
{
    trace("Value:" + arr[i] + " at " + i);
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-25T14:12:33.177

不应使用“for each”来遍历索引数组，应使用标准 for(var i=0;xxx;xxx)。
如果由于某种原因您仍然发现自己需要一个 for each 循环，那么这就是获取索引的方法

```
var arr:Array = ['00','11','22','33','44','55','66','77','88','99']
for each(var o:Object in arr){
    trace(arr.indexOf(o))
} 
```

另一种选择是使用 for in 循环

```
for (var key:String in arr){
    trace(key)
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-25T08:45:07.680

你的意思是这样的吗？

```
for(var i:int=0; i<myArray.length; i++){
    var myObj = myArray[i];
} 
```

除非您指定要实现的目标，否则很难确切知道要使用什么:)

# c# - Array.Count() 比 List.Count() 慢得多

> ID：16208951
> 
> 赞同：25
> 
> 时间：2013-04-25T07:37:27.650
> 
> 标签：c#, .net, performance, linq, ienumerable

使用 的扩展方法时`IEnumerable<T>` [`Count()`](http://msdn.microsoft.com/en-us/library/bb535181.aspx)，数组至少比列表慢两倍。

```
Function                      Count()
List<int>                     2,299
int[]                         6,903 
```

差异从何而来？

我知道两者都在调用以下`Count`属性`ICollection`：

> 如果源的类型实现了 ICollection，则该实现用于获取元素的计数。否则，此方法确定计数。

对于它返回的列表[`List<T>.Count`](http://msdn.microsoft.com/en-us/library/27b47ht3.aspx)，对于数组，`Array.Length`。此外，`Array.Length`应该比 更快`List<T>.Count`。

基准：

```
class Program
{
    public const long Iterations = (long)1e8;

    static void Main()
    {
        var list = new List<int>(){1};
        var array = new int[1];
        array[0] = 1;

        var results = new Dictionary<string, TimeSpan>();
        results.Add("List<int>", Benchmark(list, Iterations));
        results.Add("int[]", Benchmark(array, Iterations));

        Console.WriteLine("Function".PadRight(30) + "Count()");
        foreach (var result in results)
        {
            Console.WriteLine("{0}{1}", result.Key.PadRight(30), Math.Round(result.Value.TotalSeconds, 3));
        }
        Console.ReadLine();
    }

    public static TimeSpan Benchmark(IEnumerable<int> source, long iterations)
    {
        var countWatch = new Stopwatch();
        countWatch.Start();
        for (long i = 0; i < iterations; i++) source.Count();
        countWatch.Stop();

        return countWatch.Elapsed;
    }
} 
```

* * *

编辑：

[leppie](https://stackoverflow.com/a/16209739/128662)和[Knaģis](https://stackoverflow.com/a/16209469/128662)的答案非常惊人，但我想补充一点。
[正如乔恩斯基特所说：](http://msmvps.com/blogs/jon_skeet/archive/2010/12/26/reimplementing-linq-to-objects-part-7-count-and-longcount.aspx)

> 实际上有两个等效的块，只是测试不同的集合接口类型，并使用它首先找到的任何一个（如果有的话）。我不知道 .NET 实现是先测试 ICollection 还是 ICollection< T > - 当然，我可以通过实现两个接口但从每个接口返回不同的计数来测试它，但这可能是矫枉过正。除了轻微的性能差异之外，表现良好的集合并不重要 - 我们想首先测试“最有可能”的接口，我相信它是通用接口。

通用的可能是最有可能发生的，但是如果你颠倒两者，即在通用之前调用非通用转换，Array.Count() 会比 List.Count() 快一点。另一方面，非通用版本的 List 速度较慢。

很高兴知道是否有人想调用`Count()`1e8 迭代循环！

```
Function       ICollection<T> Cast     ICollection Cast
List                1,268                   1,738         
Array               5,925                   1,683 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-25T08:05:58.167

原因是`Enumerable.Count<T>()`执行强制转换`ICollection<T>`以从列表和数组中检索计数。

使用此示例代码：

```
public static int Count<TSource>(IEnumerable<TSource> source)
{
    ICollection<TSource> collection = source as ICollection<TSource>;
    if (collection != null)
    {
        return 1; // collection.Count;
    }
} 
```

您可以确定该数组的演员表需要更长的时间，事实上，计数所花费的大部分时间都来自此演员表：

```
Function                      Count()
List<int>                     1,575
int[]                         5,069 
```

关键可能是[文档](http://msdn.microsoft.com/en-us/library/czz5hkty%28v=vs.100%29)中的这个声明（强调我的）：

> 在 .NET Framework 2.0 版中，Array 类实现 System.Collections.Generic.IList、System.Collections.Generic.ICollection 和 System.Collections.Generic.IEnumerable 泛型接口。**这些实现在运行时提供给数组**，因此对文档构建工具不可见。因此，泛型接口不会出现在 Array 类的声明语法中，并且没有接口成员的参考主题，只能通过将数组转换为泛型接口类型（显式接口实现）才能访问这些成员。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-25T08:20:32.043

32 位分析分析（全部以毫秒为单位，只有有趣的位，禁用 JIT 内联）：

```
Name    Count   'Inc Time'  'Ex Time'   'Avg Inc Time'  'Avg Ex Time'
System.Linq.Enumerable::Count(<UNKNOWN>):int32 <System.Int32>   
        20000000    13338.38    7830.49 0.0007  0.0004
System.SZArrayHelper::get_Count():int32 <System.Int32>  
        10000000    4063.9      2651.44 0.0004  0.0003
System.Collections.Generic.List<System.Int32>::get_Count():int32    
        10000000    1443.99     1443.99 0.0001  0.0001
System.Runtime.CompilerServices.JitHelpers::UnsafeCast(Object):System.__Canon <System.__Canon>  
        10000004    1412.46     1412.46 0.0001  0.0001 
```

`System.SZArrayHelper::get_Count()`似乎需要`System.Runtime.CompilerServices.JitHelpers::UnsafeCast`数组案例。

对于列表，`List<int>.Count`只需返回大小。

`Inc time`是包括孩子电话在内的费用。 `Ex time`只是方法体的成本。

禁用内联时，`Array.Count()`速度会慢两倍。

这可能是由于提到了现在已删除的答案。看起来应用的属性（`ReliabilityContract(Consistency.WillNotCorruptState, Cer.Success)`和 `SecuritySafeCritical`）阻止了运行时内联调用，因此差异很大（在我的情况下，在 32 位模式下慢了 38 倍）。

要自己对此进行分析：

获取[https://github.com/leppie/IronScheme/raw/master/IronScheme/tools/IronScheme.Profiler.x86.dll](https://github.com/leppie/IronScheme/raw/master/IronScheme/tools/IronScheme.Profiler.x86.dll) 运行应用程序（仅限 x86 构建）：

```
regsvr32 IronScheme.Profiler.x86.dll
set COR_PROFILER={9E2B38F2-7355-4C61-A54F-434B7AC266C0}
set COR_ENABLE_PROFILING=1
ConsoleApp1.exe 
```

当应用程序退出时，`report.tab`会创建一个文件，然后可以在 Excel 中使用该文件。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-25T08:24:27.847

我发布这个，不是作为答案，而是为了提供一个更可测试的环境。

我已经复制了实际实现`Enumerable<T>.Count()`并更改了原始测试程序以使用它，因此人们可以在调试器中单步执行它。

如果您运行以下代码的发布版本，您将获得与 OP 类似的时间。

对于这两者`List<T>`，`int[]`分配给的第一个演员表`is2`将是非空的，因此`is2.Count`将被调用。

所以看起来差异来自`.Count`.

```
using System;
using System.Collections;
using System.Collections.Generic;
using System.Diagnostics;

namespace ConsoleApplication1
{
    class Program
    {
        public const long Iterations = (long)1e8;

        static void Main()
        {
            var list = new List<int>() { 1 };
            var array = new int[1];
            array[0] = 1;

            var results = new Dictionary<string, TimeSpan>();
            results.Add("int[]", Benchmark(array, Iterations));
            results.Add("List<int>", Benchmark(list, Iterations));

            Console.WriteLine("Function".PadRight(30) + "Count()");
            foreach (var result in results)
            {
                Console.WriteLine("{0}{1}", result.Key.PadRight(30), Math.Round(result.Value.TotalSeconds, 3));
            }
            Console.ReadLine();
        }

        public static TimeSpan Benchmark(IEnumerable<int> source, long iterations)
        {
            var countWatch = new Stopwatch();
            countWatch.Start();
            for (long i = 0; i < iterations; i++) Count(source);
            countWatch.Stop();

            return countWatch.Elapsed;
        }

        public static int Count<TSource>(IEnumerable<TSource> source)
        {
            ICollection<TSource> is2 = source as ICollection<TSource>;

            if (is2 != null)
                return is2.Count;  // This is executed for int[] AND List<int>.

            ICollection is3 = source as ICollection;

            if (is3 != null)
                return is3.Count;

            int num = 0;

            using (IEnumerator<TSource> enumerator = source.GetEnumerator())
            {
                while (enumerator.MoveNext())
                    num++;
            }

            return num;
        }
    }
} 
```

`List.Count`有了这些信息，我们可以简化测试，只关注和之间的时间差异`Array.Count`：

```
using System;
using System.Collections.Generic;
using System.Diagnostics;

namespace ConsoleApplication1
{
    class Program
    {
        static void Main()
        {
            int dummy = 0;
            int count = 1000000000;

            var array = new int[1] as ICollection<int>;
            var list = new List<int> {0};

            var sw = Stopwatch.StartNew();

            for (int i = 0; i < count; ++i)
                dummy += array.Count;

            Console.WriteLine("Array elapsed = " + sw.Elapsed);

            dummy = 0;
            sw.Restart();

            for (int i = 0; i < count; ++i)
                dummy += list.Count;

            Console.WriteLine("List elapsed = " + sw.Elapsed);

            Console.ReadKey(true);
        }
    }
} 
```

上面的代码为在调试器之外运行的发布版本提供了以下结果：

```
Array elapsed = 00:00:02.9586515
List elapsed = 00:00:00.6098578 
```

此时，我心想“当然我们可以优化`Count()`识别`T[]`并`.Length`直接返回。所以我将实现更改`Count()`为：

```
public static int Count<TSource>(IEnumerable<TSource> source)
{
    var array = source as TSource[];

    if (array != null)        // Optimised for arrays.
        return array.Length;  // This is executed for int[] 

    ICollection<TSource> is2 = source as ICollection<TSource>;

    if (is2 != null)
        return is2.Count;  // This is executed for List<int>.

    ICollection is3 = source as ICollection;

    if (is3 != null)
        return is3.Count;

    int num = 0;

    using (IEnumerator<TSource> enumerator = source.GetEnumerator())
    {
        while (enumerator.MoveNext())
            num++;
    }

    return num;
} 
```

值得注意的是，即使在进行此更改之后，阵列在我的系统上*仍然*较慢，尽管非阵列必须进行额外的演员！

我的结果（发布版本）是：

```
Function                      Count()
List<int>                     1.753
int[]                         2.304 
```

我完全无法解释最后一个结果......

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-25T08:02:31.813

那是因为`int[]`需要强制转换，而不需要`List<int>`。如果您要使用 Length 属性，那么结果将完全不同 - 大约。比 .快 10 倍`List<int>.Count()`。

# java - 从 Java 服务器获取登录用户的 NT ID

> ID：16208953
> 
> 赞同：0
> 
> 时间：2013-04-25T07:37:48.353
> 
> 标签：java, spring

我将在服务器中托管我的应用程序。我只想获取登录到我的应用程序的用户的 NT ID。如果有人有答案，请分享？

`system.getremoteUser()`并将`system.getProperty`返回托管机器名称。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T07:52:24.610

If you are specific about NT ID fetching in `Java`, this might work

```
com.sun.security.auth.module.NTSystem NTSystem = new
            com.sun.security.auth.module.NTSystem();
    System.out.println(NTSystem.getName());
    System.out.println(NTSystem.getDomain());
    System.out.println(NTSystem.getUserSID()); 
```

But for a webapplication context where you have NTLM authentication, you should be having NTLM (Windows) users as your application users as-well (this is a general case).

It would be better to query NTLMRealm (in Tomcat) or store user identity (SID etc) in a context (this can be session based or specific custom server-side implementation) while authenticating user via NTLM. Now use this context to retrieve NTLM properties of users (SID, GroupID etc) logged-in.

# crystal-reports-2010 - 水晶报表查看器 13_0_5 在 vpn 中不工作

> ID：16208954
> 
> 赞同：1
> 
> 时间：2013-04-25T07:37:54.453
> 
> 标签：crystal-reports-2010

我正在对用户通过运行时版本为 13.0.5 的 Crystal 报告查看器运行报告时遇到的错误进行故障排除。通过 VPN 访问我的应用程序时，水晶报告查看器在 allInOne.js 文件中出现错误

调试 java 脚本时，错误显示在以下位置

```
return("["+A.map(A.repr,B).join(", ")+"]")},reprString:function(A)**{returnDanaMethodReplace("replace",DanaMethodReplace("replace",DanaMethodReplace("replace",DanaMethodReplace("replace",(DanaMethodReplace("replace",('"'+DanaMethodReplace("replace",A,/(["\\])/g,"\\$1")+'"'),/[\f]/g,"\\f"),/[\b]/g,"\\b"),/[\n]/g,"\\n"),/[\t]/g,"\\t"),/[\r]/g,"\\r"**))},reprNumber:function(A){return A+""},registerJSON:function(B,A,D,C){MochiKit.Base.jsonRegistry.register(B,A,D,C)},evalJSON:function(){return eval(DanaEval("("+arguments[0]+")") 
```

配置：

*   该应用程序部署在我们网络上安装了 32bit_13_0_5 运行时的服务器上，位于卡塔尔。
*   用户从法国通过 VPN 访问我们的网络。
*   用户的浏览器是 Internet Explorer 8。

该问题无法从通过网络访问应用程序的机器上重现。有没有人经历过类似的行为？

# c++ - C ++重命名类成员有什么想法吗？

> ID：16208965
> 
> 赞同：0
> 
> 时间：2013-04-25T07:38:34.053
> 
> 标签：c++, class, rename, member

所以这是我的问题。假设我们有一个可以完成所有工作的类，但是当我使用它时，我想有不同的名称。这是我的意思的例子：

```
class A
{
public:
    int m_Value;

    A();
    ~A();
    void Func1();
    void Func2();
    // ... so on
}; 
```

现在创建该类的一个对象并使用它。

```
void main()
{
    A obj1;
    A obj2;

    obj1.m_NewName1 = 5; // obj1.m_Value has to be changed to obj1.m_NewName1
    obj2.m_NewName2 = 1; //
} 
```

这可以做到吗？

我可以做这样的事情：

```
class C : public A
{
public:
    int &newName1;
    C() : newName1 (A::m_Value)
    {
    }
    //Add some copy consructor and assignment operator
}; 
```

现在考虑这 100 个要重命名的类。不是很方便

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T07:40:31.640

您不能更改类中定义的变量名称。！！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T08:52:10.367

以下内容对您有用吗？

```
class A
{
public:
    int a;
    int& ref_a;
    A(int i): a(i),ref_a(a)
    {`enter code here`
    }

    A(): ref_a(a)
    {
    }

};

int main()
{
    A objA(100);
    printf("%d\n",objA.a);

   objA.ref_a = 10;
   printf("%d\n",objA.a);

    return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T08:17:26.607

这不能在客户端代码中完成。如果您想按名称表示不同的值，方法是使用 std::map 将名称映射到值。

# javascript - Socket.IO - 如何确定谁断开了连接？

> ID：16208969
> 
> 赞同：4
> 
> 时间：2013-04-25T07:38:50.827
> 
> 标签：javascript, node.js, socket.io

我在前端使用 HTML5 和 Javascript，在后端使用 Node.js 构建简单的 Web 应用程序。我还使用 Socket.IO 在客户端和服务器之间来回传递数据。假设我有一个聊天页面，每个人都在其中登录并加入聊天室。我跟踪后端聊天室中的所有人。我想要做的是如果一个人离开那个房间，就把他们从房间里移走。例如，假设某人关闭了他们的浏览器，他们不应再显示为活跃用户。

Socket.IO 有一个断开事件，这似乎是执行此操作的完美工具。例如，当我运行此代码时：

```
socket.on("disconnect", function (){
  console.log("DISCONNECTED");
}); 
```

当有人关闭浏览器时，将打印“DISCONNECTED”。现在我的问题是，我怎么知道到底是谁关闭了那个浏览器？没有数据传递给断开事件，所以我不确定我应该如何检查谁触发了断开事件。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T08:30:05.397

基本上，一旦您侦听了“连接”事件，每当客户端连接到服务器时，您都会得到一个套接字对象。您可以将客户端信息存储到该套接字对象。你可以参考这篇文章，并注意服务端代码，其中编码器在服务端使用 pluarl form 'sockets'（所以服务端会创建许多客户端套接字！）。 [http://psitsmike.com/2011/10/node-js-and-socket-io-multiroom-chat-tutorial/](http://psitsmike.com/2011/10/node-js-and-socket-io-multiroom-chat-tutorial/)

希望以下示例对您有所帮助。

```
//server side
var io = require('socket.io').listen(80)
// sockets here, not socket
io.sockets.on('connection', function(socket){
  // every connection will create a socket
  socket.on('newUser', function(name){
    socket.id = name; // socket stores the username
  });
  socket.on('disconnect', function(){
    console.log(socket.id); // retrieve it from socket object
  });
  // more functionality goes...
}); 
```

和客户端

```
var socket = io.connect('http://localhost:80');
socket.on('connect', function(){
   //emit newUser event so that client info is stored
  socket.emit('newUser', prompt('Please enter your name!'));
  //.... more functionality goes
}); 
```

希望这能帮助你理解！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-25T07:41:42.197

你可以这样做：

```
socket.on("disconnect", function (){
  console.log(this.id); // this.id is the 'id' of the socket that got disconnected
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T07:44:51.060

你的问题没有意义。每个套接字都是到单个客户端的连接。

以下是如何将名称与套接字关联，然后在同一个套接字断开连接时打印相同的名称：

```
io.sockets.on('connection', function(socket) {
    var name = "";
    socket.on('set-name', function(_name) {
        name = _name;
    });
    socket.on("disconnect", function (){
        console.log("DISCONNECTED "+name);
    });
}); 
```

您已经知道哪个连接正在丢失，因为您持有连接对象`socket`

# extjs - 在 extjs4 中显示文本字段的内容

> ID：16208976
> 
> 赞同：0
> 
> 时间：2013-04-25T07:39:06.390
> 
> 标签：extjs

如果文本框有一些内容，我想在文本框附近显示文本框的值，而当它为空时不显示任何内容。这怎么可能 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T09:39:55.750

很多选择。例如，您可以使用 Ext.dom.Element：

```
Ext.onReady(function() {
    Ext.create('Ext.form.field.Text', {
        renderTo: Ext.getBody(),
        fieldLabel: 'Field',
        afterSubTpl: '<div id="my-field-sub-tpl"></div>',
        listeners: {
            change: function(field, val) {
                Ext.get('my-field-sub-tpl').setHTML(val);
            }
        }
    });
}); 
```

参见 jsfiddle：http: [//jsfiddle.net/hDRqS/](http://jsfiddle.net/hDRqS/)

但最好将其作为该领域的插件 - 然后它可以应用于您应用程序的任何领域：http: [//jsfiddle.net/hDRqS/1/](http://jsfiddle.net/hDRqS/1/)

# c++ - 用 Python 生成器替换 C++ STL 输出迭代器

> ID：16208981
> 
> 赞同：1
> 
> 时间：2013-04-25T07:39:15.557
> 
> 标签：c++, python, generics, boost, python-3.x

Python 没有内置的 OutputIterator 等价物。特别是，内置或标准库容器不支持任何允许客户端代码在不知道特定容器类型的情况下向它们发送数据的通用接口。

根据[@Steven Rumbalski 的评论](https://stackoverflow.com/questions/3707418/why-are-collections-not-handled-uniformly-in-python#comment3915694_3707535)和[@Glenn Maynard 的回答](https://stackoverflow.com/a/3707535/336527)，这通常不是问题，因为在 C++ 中将采用 OutputIterator 参数的函数在 python 中将被简单地编写为生成器。

通常，我使用生成器没有问题，并且从不觉得我需要 Python 中的 OutputIterator。但是，在这种情况下，我被卡住了。

我正在用 Python 重新实现 Boost Graph Library 中的一些算法。一个典型的图遍历算法，比如说`depth_first_search`，将“访问者”对象作为参数。访问者本质上是一组回调函数，当遍历算法在其执行过程中遇到不同的事件（例如，发现新顶点、检查边等）时，它会调用这些回调函数。在 C++ 中，我可以让这些回调函数中的一个或多个将数据发送到访问者对象在其初始化时从客户端代码获得的 OutputIterator 对象。（例如，这正是`topological_sort`实现的方式：它接受一个 OutputIterator，将其传递给一个`dfs_visitor`对象，然后访问者对象“监视”事件`finished_vertex`并将它接收到的顶点发送到指定的OutputIterator。当然，更复杂的情况需要多个 OutputIterator 对象和多个回调函数。）

如何使用 Python 生成器实现相同的目标？

我需要以某种方式以生成器“样式”将数据从`depth_first_search`多个指定的数据消费者发送。我只是不知道该怎么做。（我使用的是 Python 3.3。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T08:23:54.147

我认为，该[`generator.send`](http://docs.python.org/2/reference/expressions.html#generator-iterator-methods)方法在这里可以满足您的要求：

```
def depth_first_search(some_args, edge_consumer, vertex_consumer):
    # start the generators
    next(edge_consumer)
    next(vertex_consumer)

    ...
    edge_consumer.send(some_edge)
    vertex_consumer.send(some_vertex)

    ...
    # this raises GeneratorExit at the `yield` in the generator
    edge_consumer.close()
    vertex_consumer.close()

def edge_handler():
    while True:
        e = yield
        print "E", e

def vertex_handler():
    while True:
        v = yield
        print "V", v

depth_first_search(..., edge_handler(), vertex_handler()) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T08:07:17.173

你可以只传递回调函数吗？

```
def depth_first_search(some_args, on_edge=lambda e:None, on_vertex=lambda v:None):
    ...
    on_edge(some_edge)
    on_vertex(some_vertex)

def edge_handler(e):
    print "E", e

def vertex_handler(v):
    print "V", v

depth_first_search(..., on_edge=edge_handler, on_vertex=vertex_handler) 
```

或产生一个目的地：

```
def depth_first_search(some_args, on_edge=lambda e:None, on_vertex=lambda v:None):
    ...
    yield "edge", some_edge
    yield "vertex", some_vertex

for t, value in depth_first_search(...):
    if t == 'edge':
        # ...
    elif t == 'vertex':
        # ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T08:18:49.403

我不知道这是否可行，但是使用像 multimethods 这样的库来实现多调度函数来完成您需要的工作怎么样？我的 Internet 出现 DNS 问题，因此我无法查找语法，因此您将获得伪代码而不是真正的 Python，但这里是我所谈论内容的一般概念：

```
def send_to(data, consumer):
    workfunc = dispatch(type(consumer))
    workfunc(data, consumer)

def send_to_list(data, consumer):
    consumer.append(data)

def send_to_set(data, consumer):
    consumer.add(data)

def send_to_file_obj(data, consumer):
    consumer.write(data) 
```

当然，需要一些管道来将工作功能连接到调度功能，这就是我现在实际上无法查找的内容，因为我的 DNS 已关闭。（幸运的是，StackOverflow 仍在我的浏览器缓存中）。所以我担心这个答案很笼统，缺乏细节，但希望它至少能为你指明一个有用的方向。

# android - Android 并在 jUnit 中测试 simplecalc

> ID：16208984
> 
> 赞同：1
> 
> 时间：2013-04-25T07:39:25.460
> 
> 标签：android, junit

我在 jUnit 中进行测试时遇到问题。这是我的测试课：

```
public class MainActivityTest extends
        ActivityInstrumentationTestCase2<MainActivity> {
    Button button1, button2, button3, button4, button5, button6, button7, button8, button9, buttonResult, buttonPlus;
    EditText resultConsole;
    private static final String FIRSTVALUE = "12";
    private static final String SECONDVALUE = "21";
    private static final String RESULT = "33.0";
    MainActivity mainActivity;

    public MainActivityTest() {
        super("com.example.simpletest", MainActivity.class);
    }

    public void setUp() throws Exception {
        super.setUp();
            setActivityInitialTouchMode(false);
            mainActivity = getActivity();
            button1 = (Button) mainActivity.findViewById(R.id.button1);
            button2 = (Button) mainActivity.findViewById(R.id.button2);
            button3 = (Button) mainActivity.findViewById(R.id.button3);
            button4 = (Button) mainActivity.findViewById(R.id.button4);
            button5 = (Button) mainActivity.findViewById(R.id.button5);
            button6 = (Button) mainActivity.findViewById(R.id.button6);
            button7 = (Button) mainActivity.findViewById(R.id.button7);
            button8 = (Button) mainActivity.findViewById(R.id.button8);
            button9 = (Button) mainActivity.findViewById(R.id.button9);
            buttonResult = (Button) mainActivity.findViewById(R.id.buttonResult);
            buttonPlus = (Button) mainActivity.findViewById(R.id.buttonPlus);
            resultConsole = (EditText) mainActivity.findViewById(R.id.editText1);

    }
    String result;
    public void testPlus(){
            mainActivity.runOnUiThread(new Runnable() {

                @Override
                public void run() {
                    assertTrue(button1.performClick());
                    assertTrue(button2.performClick());
                    assertTrue(buttonPlus.performClick());
                    assertTrue(button2.performClick());
                    assertTrue(button1.performClick());
                    assertTrue(buttonResult.performClick());

                    result =  resultConsole.getText().toString();
                    assertTrue(!result.equals(0));
                    assertEquals(result, RESULT);

                }
            });

    }

} 
```

这是经过测试的课程：

```
public class MainActivity extends Activity {

    Button button1, button2, button3, button4, button5, button6, button7, button8, button9, buttonResult, buttonPlus;
    EditText resultConsole;
    String result = "";
    Double variable = 0.0;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        button1 = (Button) findViewById(R.id.button1);
        button2 = (Button) findViewById(R.id.button2);
        button3 = (Button) findViewById(R.id.button3);
        button4 = (Button) findViewById(R.id.button4);
        button5 = (Button) findViewById(R.id.button5);
        button6 = (Button) findViewById(R.id.button6);
        button7 = (Button) findViewById(R.id.button7);
        button8 = (Button) findViewById(R.id.button8);
        button9 = (Button) findViewById(R.id.button9);
        buttonResult = (Button) findViewById(R.id.buttonResult);
        buttonPlus = (Button) findViewById(R.id.buttonPlus);
        resultConsole = (EditText) findViewById(R.id.editText1);

       button1.setOnClickListener(onClick);
       button2.setOnClickListener(onClick);
       button3.setOnClickListener(onClick);
       button4.setOnClickListener(onClick);
       button5.setOnClickListener(onClick);
       button6.setOnClickListener(onClick);
       button7.setOnClickListener(onClick);
       button8.setOnClickListener(onClick);
       button9.setOnClickListener(onClick);
       buttonPlus.setOnClickListener(onClick);
       buttonResult.setOnClickListener(onClick);
    }

    private View.OnClickListener onClick = new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            switch (v.getId()) {
            case R.id.button1:
                result += button1.getText().toString();
                resultConsole.setText(result);
                break;
            case R.id.button2:
                result += button2.getText().toString();
                resultConsole.setText(result);
                break;
            case R.id.button3:
                result += button3.getText().toString();
                resultConsole.setText(result);
                break;
            case R.id.button4:
                result += button4.getText().toString();
                resultConsole.setText(result);
                break;
            case R.id.button5:
                result += button5.getText().toString();
                resultConsole.setText(result);
                break;
            case R.id.button6:
                result += button6.getText().toString();
                resultConsole.setText(result);
                break;
            case R.id.button7:
                result += button7.getText().toString();
                resultConsole.setText(result);
                break;
            case R.id.button8:
                result += button8.getText().toString();
                resultConsole.setText(result);
                break;
            case R.id.button9:
                result += button9.getText().toString();
                resultConsole.setText(result);
                break;
            case R.id.buttonPlus:
                if(!result.equals("")){
                variable += Double.parseDouble(result);
                resultConsole.setText(variable.toString());
                result = "";
                }
                break;
            case R.id.buttonResult:
                if(!result.equals("")){
                variable += Double.parseDouble(result);
                resultConsole.setText(variable.toString());
                result = "";
                }
                break;
            default:
                break;
            }

        }
    };

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

} 
```

这是一个简单的计算器。我想测试结果并等于结果。要检查结果，我想单击按钮并检查 editText 中的文本。但是出了点问题，因为`testPlus()`即使我设置`RESULT`了`22`. 单击该方法的按钮后的结果应在 33.0 的编辑视图中设置文本，因此单击该方法的按钮后的文本和 RESULT 不同，因此测试不应通过。怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T08:08:59.927

这是解决方案：

```
public void testPlus(){
        mainActivity.runOnUiThread(new Runnable() {

            @Override
            public void run() {
                assertTrue(button1.performClick());

            }
        });
        getInstrumentation().waitForIdleSync();
        mainActivity.runOnUiThread(new Runnable() {

            @Override
            public void run() {

                assertTrue(button2.performClick());

            }
        });
        getInstrumentation().waitForIdleSync();
        mainActivity.runOnUiThread(new Runnable() {

            @Override
            public void run() {

                assertTrue(buttonPlus.performClick());

            }
        });
        getInstrumentation().waitForIdleSync();
        mainActivity.runOnUiThread(new Runnable() {

            @Override
            public void run() {

                assertTrue(button2.performClick());

            }
        });
        getInstrumentation().waitForIdleSync();
        mainActivity.runOnUiThread(new Runnable() {

            @Override
            public void run() {

                assertTrue(button1.performClick());

            }
        });
        getInstrumentation().waitForIdleSync();
        mainActivity.runOnUiThread(new Runnable() {

            @Override
            public void run() {

                assertTrue(buttonResult.performClick());

            }
        });
        getInstrumentation().waitForIdleSync();
        String result =  resultConsole.getText().toString();
        assertTrue(!result.equals(0));

        assertEquals(RESULT, result);
} 
```

# multithreading - 应用程序中的最佳线程数应该是多少？

> ID：16208985
> 
> 赞同：0
> 
> 时间：2013-04-25T07:39:25.600
> 
> 标签：multithreading, operating-system

我的应用程序仅在 Oracle DB 上触发 SELECT 查询。我有多个模式，并且我有一个线程可以从每个模式中读取。每个线程创建自己的连接以连接到 DB。

当我运行三个测试时，我观察到 8-10 个线程的性能最好，然后在单核机器上性能下降。有谁知道这是否有任何原因？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T07:47:48.897

对此没有一般规则或简单的数学方程式。通常最好的是每个核心一个线程，但这取决于。唯一的判断方法是测试您的应用程序。在您的情况下，在单核机器上拥有 8-10 个线程是不好的，这些线程将花费更多时间来相互处理而不是进行实际工作。

# objective-c - 使用 Facebook iOS SDK 3.5 创建应用拥有的对象

> ID：16208991
> 
> 赞同：0
> 
> 时间：2013-04-25T07:39:35.193
> 
> 标签：objective-c, facebook, facebook-opengraph

借助新的 Facebook iOS SDK 3.5，除了自托管对象之外，还可以创建应用拥有和用户拥有的对象。

要创建用户拥有的对象，我可以使用以下代码：

```
NSMutableDictionary<FBOpenGraphObject> *object = [FBGraphObject openGraphObjectForPost];
object[@"type"] = @"books.book";
object[@"title"] = @"Snow Crash";
object[@"image"] = @"TODO";
object[@"url"] = @"https://example.com/book-app/books/Snow-Crash";

[FBRequestConnection startForPostOpenGraphObject:object
                               completionHandler:^(FBRequestConnection *connection, id result, NSError *error) {
                                   if(error) {
                                       NSLog(@"Error: %@", error);
                                   } else {
                                       NSLog(@"Success");
                                   }
                               }]; 
```

有谁知道创建**应用程序拥有的对象**而不是用户拥有的对象需要添加或更改什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-25T20:20:00.920

对于应用程序拥有的对象，您可以使用 curl 操作：

`curl \ -X POST \ "https://graph.facebook.com/app/objects/books.book" \ -F "access_token=$APP_TOKEN" \ -F "object={ \"title\":\"The Hunt for Red October\", \"image\":\"http://ecx.images-amazon.com/images/some_image.jpg\", \"url\":\"https://link.you.want.displayed/example/hunt-for-red-october-link\", \"description\":\"Classic cold war technothriller\", \"data\": { \"isbn\":\"425240339\" } }"`

获得创建对象的 ID 后，只需在程序中对其进行硬编码。如果您需要更大的灵活性或拥有动态内容，那么应用拥有的对象不是正确的选择。

有关 curl 操作的更多详细信息，请查看 Facebook Docs on [App-Owned Objects](https://developers.facebook.com/docs/opengraph/using-objects)。

要查看创建的对象，请访问[Object Explorer](https://developers.facebook.com/tools/object-browser)，并确保从下拉菜单中将对象所有者设置为您的应用程序的名称，如下所示：

![在此处输入图像描述](https://i.stack.imgur.com/Ypban.png)

# c++ - 需要额外的换行符

> ID：16208992
> 
> 赞同：0
> 
> 时间：2013-04-25T07:39:36.410
> 
> 标签：c++, error-handling

```
#include <iostream>
using namespace std;
int main()
{
    int a;
    do
    {
        /* First reset the flag and then clean the buffer*/
        cin.ignore();
        cin.clear();
        /* Input the number from the user*/
        cout << "Enter number\n";
        cin >> a;
        /*Diplay appropiate error if the input was wrong*/
        if(cin.fail())
        {
            cout << "invalid input \n";
        }
        /*Display the number if the input was valid*/
        else
        {
            cout << "number entered is : " << a << endl;
        }
    }
    while(cin.fail());  //repeat until the input is correct
    return 0;
} 
```

每次我执行这个程序时，我都必须先输入一个新行，然后再`cout<<"Enter number\n";`执行。

其背后的原因是什么以及可能的解决方案是什么。

注意：没有`cin.ignore()`程序进入无限循环

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T08:21:36.873

你正在做的事情有几个问题。第一个正如 Benoit 所说：`cin.ignore()`在输出提示之前，您调用得太早了。 `cin.ignore()`将从输入流中准确提取一个字符（除非输入流失败，或者遇到文件结尾）。

第二个是当你循环时（比如说因为用户输入了`"abc"`），你在重置错误`cin.ignore()` *之前*调用，所以它是一个空操作。如果用户输入的不是数字，您将永远循环，因为您将卡在错误的输入上。您可能应该将 放在处理错误`cin.clear()`的分支中。`if`（当然，这意味着您需要某种标志来测试 `do...while`，因为当您到达那里时，错误将被清除。或者，您*可以*将`clear`和 放在`ignore`循环的顶部，但是在一个`if`，所以你只做他们，如果`cin.fail()`。）

第三是你忽略了一个字符。如果用户输入，这将在等待他的输入之前`"abc"`循环四次（加上新行）。`"abc"`通常的解决方案是忽略下一个换行符：

```
cin.ignore( std::numeric_limits<std::streamsize>::max(), '\n' ); 
```

这应该*在*您输入之后完成`int`（可能无论您是否失败，但由于如果您不失败则退出，那么您是否不这样做并不重要）。

最后，关于风格的两点：询问输入是否成功的普遍方法是将流视为布尔值：

```
if ( !cin ) {
    //  error...
} else {
    //  OK...
}

//  ...
} while ( !cin ); 
```

我并不是说这是一种好的做法（在很多方面，我更喜欢你的风格），但它无处不在，以至于其他任何事情都会让你的代码的读者开始思考，并问你为什么做了不同的事情。

我会将带有提示的输入分离到一个单独的函数中，并编写如下内容：

```
template <typename T>
std::istream&
inputWithPrompt( std::istream& source, std::string const& prompt, T& dest )
{
    std::cout << prompt;
    source >> dest;
    return source;
}

int
main()
{
    int a;
    while ( !inputWithPrompt( std::cin, "Enter a number:", a ) ) {
        std::cin.clear();
        std::cin.ignore( std::numeric_limits<std::streamsize>::max, '\n' );
        std::cout << "Invalid input" << std::endl;
    }
    std::cout << "Number entered is: " << a << std::endl;
    return 0;
} 
```

这对我来说似乎更干净：循环直到你成功，然后在你离开循环后执行成功的输出。（可能值得将清理代码、 the`clear`和 the`ignore`放在单独的函数中。如果您输入 using `>>`，您将经常需要它。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T07:48:23.187

编辑以下评论：

`cin.ignore()`期待一些输入，只是忽略它。您应该将这一行移到后面的`if`语句中`cout << "invalid input \n";`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T07:57:06.367

```
 cin.ignore();
   cin.clear();
   /* Input the number from the user*/
   cout << "Enter number\n";
   cin >> a; 
```

至

```
 /* Input the number from the user*/
   cout << "Enter number\n";

   cin.clear();
   cin.ignore();
   cin >> a; 
```

# c# - 如何从 C# 中的非托管 DLL 文件中检索 XML 文件流

> ID：16208994
> 
> 赞同：0
> 
> 时间：2013-04-25T07:39:43.010
> 
> 标签：c#, xml, dll, stream, unmanaged

我收到了来自客户端的非托管 DLL 文件。这个 DLL 文件有一个返回 XML 流的重要方法。我不确定如何“捕捉”这个 XML 流，因为 DLL 文件几乎没有记录。这是我所知道的：

1.  我知道如何调用非托管 DLL 函数，但是我不熟悉结构以及如何使用结构从函数中检索数据。
2.  “文档”说：您可以从函数中获取 XML 流句柄`OpenXmlBridge`

这就是我现在陷入的困境：

```
[DllImport("UnmanagedDllFile.DLL")]
public static extern void OpenXmlBridge(); 
```

我知道这会`void`在执行时返回，但我在这里不知所措。我也知道这个函数存在，因为当我`OpenXmlBridge`用一些随机的东西替换时，我得到了错误。所以直到现在，我想我一直在正确的轨道上。我无法从这里确切地找出要做什么。

我任何人都可以指出我正确的方向，以便我可以从此函数中检索 XML 流句柄。非常感谢任何帮助或提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T07:59:42.767

你可以使用`UnmanagedMemoryStream`类。在这种情况下，您的包装器应如下所示：

```
[DllImport("UnmanagedDllFile.DLL")]
public static extern IntPtr OpenXmlBridge(); 
```

访问它的代码类似于：

```
var length = 0 //stream length here
var pointer = NativeWrapper.OpenXmlBridge();
using(var ms = new UnmanagedMemoryStream((Byte*)pointer, length){
  var xDocument = new XmlDocument();
  xDocument.Load(ms); 
  //process document
} 
```

# spring - 用骆驼发送转换后的jms

> ID：16208995
> 
> 赞同：1
> 
> 时间：2013-04-25T07:39:44.330
> 
> 标签：spring, jms, activemq, apache-camel

谁能帮我。我正在尝试使用骆驼发送消息。也许我的概念错了。我想向 activemq 发送一条简单的消息。我有一个 messageService，它是一个发送方法。问题是我将 pojo 作为消息发送，我希望它自动转换为 json 字符串。这就是我尝试使用骆驼的原因。

我已经定义了一个指向我的发送方法的路由，并在路由中添加了一个编组器。

问题是骆驼似乎每秒不断地发送一条 jms 消息。我想要的是当我调用 sendMethode 时，camel 将我的消息输出转换为 json。

这是我的溃败：

```
<from uri="bean:messageService?method=sendMessage" />
    <marshal>
    <json library="Gson"/>
    </marshal>
<inOnly uri="activemq:com.pack.checkSynchronicityUrl" /> 
```

因此，当我调用服务 messageService 时，我希望骆驼将输出转换为 json 并将其放入队列中。

非常感谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T07:51:24.163

当您有路线时，从 bean 开始

```
<from uri="bean:xxx"/> 
```

使用 bean 组件，然后 Camel 会不断调用 bean 方法，死循环。

所以你需要做其他事情，例如从你的 bean 中的 java 代码，你可以使用生产者模板 api、pojo 生产或使用代理等向 Camel 路由发送消息。请参阅下面的链接

*   [http://camel.apache.org/bean-injection.html](http://camel.apache.org/bean-injection.html)
*   [http://camel.apache.org/producertemplate.html](http://camel.apache.org/producertemplate.html)
*   [http://camel.apache.org/pojo-produce.html](http://camel.apache.org/pojo-producing.html)
*   [http://camel.apache.org/spring-remoting.html](http://camel.apache.org/spring-remoting.html)
*   [http://camel.apache.org/pojo-messaging-example.html](http://camel.apache.org/pojo-messaging-example.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T21:58:11.200

@Claus 已经解释了您的路线问题。

正如您在这些链接中看到的那样，您需要的行为可以通过不同的方式实现。这是一个可以满足您的目的的示例。

将路线定义为：

```
from("direct:start").
   marshal(...).
      to("activemq:com.mele...); 
```

或类似的spring dsl。以下代码可以是 messageService.sendMessage() 方法的一部分：

```
ProducerTemplate template = camelcontext.createProducerTemplate();
template.sendBody("direct:start", myPojo); 
```

# node.js - nodejs如何在cmd中启动

> ID：16208999
> 
> 赞同：0
> 
> 时间：2013-04-25T07:39:54.497
> 
> 标签：node.js

通过 spawn 作为控制台中的起始节点？你需要在cmd中运行node js，而不是单独运行，然后通过她的团队。

```
var iconv = require('iconv-lite');
var fs = require('fs');
function sendData (msg) {
    console.log('write msg ', msg);
    cmd.stdin.write(msg + "\r\n");
}
function execCommand() {
    var s = { 
        e : 'exec_command',
        d : {
          data : {}
        }
    };
    cmd = require('child_process').spawn('cmd', ['/K']);

    cmd.stdout.on('data', function (data) {
        console.log(iconv.decode(data, 'cp866'))
    });
    cmd.stderr.on('data', function (data) {
        console.log(iconv.decode(data, 'cp866'))
    });

}

execCommand();

sendData('node');
sendData(' for (var i in [1,2,3]) {console.log("HAHA", i)}'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-09T18:34:42.333

用于`process.execPath`获取 node.js 解释器的路径，并将其作为第一个参数传递给`require('child_process').spawn`.

```
require('child_process').spawn(process.execPath); 
```

有关文档，请参阅[http://nodejs.org/api/process.html#process_process_execpath](http://nodejs.org/api/process.html#process_process_execpath)。