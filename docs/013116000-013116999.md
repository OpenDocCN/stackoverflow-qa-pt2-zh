# StackOverflow 问答 13116000-13116999

# javascript - Phonegap：动态显示和隐藏状态栏（iOS Xcode）

> ID：13116000
> 
> 赞同：1
> 
> 时间：2012-10-29T04:50:43.030
> 
> 标签：javascript, objective-c, ios, xcode, cordova

我刚刚从 AppStore 下载了 Astrid 待办事项列表，并发现了一些对我来说非常酷和新的东西：一个动态状态栏，它根据用户的操作显示和隐藏。

很长一段时间以来，我一直在与自己进行一场内部斗争，试图决定是否在我的某些应用程序中显示状态栏。这肯定会解决我的矛盾心理。

更准确地说，它的作用是始终显示状态栏，除非它正在同步。发生这种情况时，该栏会巧妙地淡出，并显示加载微调器以及用户反馈。完成后，状态栏会再次淡出。提供用户反馈的非常好和整洁的方式。

有谁知道如何做到这一点？在它上面放置一个透明层，它的不透明度降低到零然后再返回可能是不可能的，因为我假设状态栏将始终保持更大的 z-index（用 CSS 术语来说），但是如何? 我的大多数应用程序都使用 phonegap、cordova，因此与 PG 平台兼容的解决方案更可取。

我首先想到在这篇文章中添加打印屏幕以进一步阐明我的意思，但认为只有一个视频才能充分做到这一点，所以我想如果你不确定我想要的效果，最好自己下载应用程序在这里描绘。如果您对此感到困扰，只需从应用商店安装 Astrid 待办事项列表应用并下拉刷新即可。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T06:32:12.627

您可以使用类动态显示/隐藏状态栏`UIApplication`。

从[UIApplication 类参考](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIApplication_Class/Reference/Reference.html)：

> setStatusBarHidden:withAnimation:
> 
> 隐藏或显示状态栏，可选择为过渡设置动画。
> 
> ```
> - (void)setStatusBarHidden:(BOOL)hidden withAnimation:(UIStatusBarAnimation)animation 
> ```

因此，您可以随意打开/关闭它（并按照您最初在上面提出的那样淡入您想要的任何内容），例如：

```
[[UIApplication sharedApplication] setStatusBarHidden:NO withAnimation:UIStatusBarAnimationFade]; 
```

# php - 消息通过 php 中的 url 传递

> ID：13116002
> 
> 赞同：0
> 
> 时间：2012-10-29T04:50:43.597
> 
> 标签：php

我正在为我的网站进行电子邮件验证。在确认电子邮件后，我想将页面重定向到电子邮件 ID 作为帖子变量。困难是 - 我无法在重定向页面上获取电子邮件 ID

```
if($result2){
echo"your profile is active";
?>
<a href=" fill_profile.php?email=<?php $email?>">fill profile </a>
<?php
$sql3="DELETE FROM $tbl_name1 WHERE confirm_code = '$passkey'";
$result3=mysql_query($sql3);

}

}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T04:51:46.110

```
<a href="fill_profile.php?email=<?php echo $email; ?>">fill profile </a> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T05:05:35.540

您忘记了`echo`将电子邮件发送到浏览器，因此它没有出现在 url 中。任何你想发送浏览器的东西都应该是`echo`'ed。

```
if($result2){
echo"your profile is active";
?>
<a href=" fill_profile.php?email=<?php echo $email?>">fill profile </a>
<?php
$sql3="DELETE FROM $tbl_name1 WHERE confirm_code = '$passkey'";
$result3=mysql_query($sql3);

}

}
?> 
```

# c# - 无法从方法组转换为对象 - C#

> ID：13116004
> 
> 赞同：10
> 
> 时间：2012-10-29T04:50:46.290
> 
> 标签：c#

我正在尝试熟悉 C# 并尝试了以下程序 - 它只输出数组中偶数的平均值。

![代码片段](../Images/fc54841e88aef67edb6d616374777b0a.png)![错误](../Images/052138db5b8d2c143f3b120e3f907feb.png)

如果有人可以在这里突出问题，那就太好了。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-29T04:53:01.497

你需要`select.Average()`（带括号）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-29T04:54:02.440

缺少括号`()`是您错误的原因。应该是`Average()`

没有括号，它被理解为一个方法组。平均方法可以有多个重载，不清楚需要调用哪个具体的重载方法。但是当你提到括号时，它的意图更清晰，方法被调用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T04:53:56.650

你没有打电话`Average`。应该`select.Average()`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-29T04:54:52.697

问题是，您忘记包含括号，因为`Average`它是一种方法（*扩展类型*）。另一种解决方案是使用 lambda 表达式，像这样，

```
var numbers = new[] { 1, 2, 3, 4, 5 };
Console.WriteLine(numbers.Where(x => (x % 2) == 0).Average()); 
```

或者

```
var numbers = new[] { 1, 2, 3, 4, 5 };
var select = (from num in numbers where (num % 2) == 0 select num).Average();
Console.WriteLine(select); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-29T04:55:14.187

它是一个扩展**`Method`**，所以它应该是这样的：`Average()`

与（括号（））

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-09-30T22:12:57.040

这是我的一个粗心错误，我试图像属性一样调用 Method 而不是像方法一样调用 Method()

# iphone - 如何在 2g/3g 网络下从我的 iPhone safari 嗅探数据

> ID：13116008
> 
> 赞同：0
> 
> 时间：2012-10-29T04:51:18.030
> 
> 标签：iphone, mobile-safari

如何在 2g/3g 网络下从我的 iPhone safari 嗅探数据。当我的 iPhone 获得 wifi 连接时，我可以嗅探数据，但我真的想检查 2g/3g 网络下的数据流。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T05:13:05.297

你想通过这样做来达到什么目的？

如果要在网络条件下进行测试，我建议查看**Apple Network Link 调节**器。该实用程序可让您模拟真实世界的网络条件，例如`3G`或`Edge`。

# android - 如何使用ftp在android中上传图像

> ID：13116018
> 
> 赞同：0
> 
> 时间：2012-10-29T04:52:29.740
> 
> 标签：android, ftp

任何人都可以帮助将图像从 sdcard 上传到服务器目录。如果目录存在，我需要上传到那里，否则必须在该路径中创建目录，并且必须使用 ftp 上传图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T05:06:26.377

使用 Apache FTP 客户端

[http://commons.apache.org/net/download_net.cgi](http://commons.apache.org/net/download_net.cgi)

示例代码：

```
public static FTPClient uploadingFilestoFtp() throws IOException
    {
    FTPClient ftpClient = new FTPClient();
    ftpClient.connect(InetAddress.getByName(host));
    ftpClient.login(username,password);
        ftpClient.changeWorkingDirectory(workdir);
        return ftpClient;
    }

class UploadVideo extends AsyncTask<String,Integer,String>
    {

        @Override
        protected String doInBackground(String... params) 
        {
            // TODO Auto-generated method stub
            try
            {
            ftpClient=uploadingFilestoFtp();
            ftpClient.setFileType(FTP.BINARY_FILE_TYPE);
            ftpClient.enterLocalPassiveMode();
            File file = new File(params[0]);
            videoFileSize=file.length();
            BufferedInputStream buffIn = new BufferedInputStream(
                    new FileInputStream(file));
            ProgressInputStream progressInput = new ProgressInputStream(buffIn);
            String randomid=UUID.randomUUID().toString();
            OutputStream os=ftpClient.storeFileStream(randomid+"-"+preferences.getStudentId()+".mp4");

            byte data[] = new byte[1024];
            long total = 0;
            int count;
            while ((count = progressInput.read(data)) != -1) {
                total += count;
                publishProgress((int) (total * 100 / videoFileSize));
                os.write(data, 0, count);
            }

            os.flush();
            os.close();
            progressInput.close();
            buffIn.close();

            }
            catch(IOException e)
            {
                e.printStackTrace();

            }
            return null;
        } 
        @Override
        protected void onPreExecute() 
        {
            super.onPreExecute();
            dialog.show();
        }

        @Override
        protected void onPostExecute(String result)
        {
            // TODO Auto-generated method stub
            super.onPostExecute(result);

        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T05:06:26.523

您可以使用一个名为 SimpleFTP 的库。将 simpleftp.jar 添加到您的类路径并在您需要的任何地方导入包。

```
import org.jibble.simpleftp.*;

try
{
    SimpleFTP ftp = new SimpleFTP();

    // Connect to an FTP server on port 37.
    ftp.connect("ftp.someurl.net", 37, "username", "password");

    // Set binary mode(used to prevent file corruption etc)
    ftp.bin();

    // Change to a new working directory on the FTP server.
    ftp.cwd("mywebdir");

    // Upload some files.
    ftp.stor(new File("pic1.png"));
    ftp.stor(new File("pic2.png"));
    ftp.stor(new File("pic3.png"));

    // or use an InputStream like so:
    ftp.stor(new FileInputStream(new File("file1.png")), "file1.png");
    ftp.stor(mySocket.getInputStream(), "file2.png");

    // disconnect from the FTP server.
    ftp.disconnect();
}
catch (IOException e)
{
    e.printStackTrace();
} 
```

在此处下载 jar 文件： [http ://www.jibble.org/files/simpleftp.jar](http://www.jibble.org/files/simpleftp.jar)

# iphone - 获取国家/地区呼叫前缀

> ID：13116019
> 
> 赞同：12
> 
> 时间：2012-10-29T04:52:46.847
> 
> 标签：iphone, objective-c, ios

只是想知道是否有简单的方法可以从用户的电话中检索**国家/地区呼叫代码。**

例如，我的应用想为用户预先填写国家/地区呼叫代码。

如果用户位于**美国，则返回代码 +1，中国 +83，澳大利亚 +61 等**。

我环顾四周，但我只能看到：

```
NSLocale *locale = [NSLocale currentLocale];
NSString *countryCode = [locale objectForKey: NSLocaleCountryCode]; 
```

哪个返回国家代码的缩写，而不是呼叫前缀？

帮助表示赞赏！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-29T05:17:57.390

有关提供此信息以及格式化电话号码的类，请参阅[RMPhoneFormat 。](https://github.com/rmaddy/RMPhoneFormat)

注意：这是我创建的。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-04-25T06:05:43.883

**这是获取呼叫前缀的代码**

1)

```
- (NSDictionary *)getCountryCodeDictionary {
    return [NSDictionary dictionaryWithObjectsAndKeys:@"972", @"IL",
            @"93", @"AF", @"355", @"AL", @"213", @"DZ", @"1", @"AS",
            @"376", @"AD", @"244", @"AO", @"1", @"AI", @"1", @"AG",
            @"54", @"AR", @"374", @"AM", @"297", @"AW", @"61", @"AU",
            @"43", @"AT", @"994", @"AZ", @"1", @"BS", @"973", @"BH",
            @"880", @"BD", @"1", @"BB", @"375", @"BY", @"32", @"BE",
            @"501", @"BZ", @"229", @"BJ", @"1", @"BM", @"975", @"BT",
            @"387", @"BA", @"267", @"BW", @"55", @"BR", @"246", @"IO",
            @"359", @"BG", @"226", @"BF", @"257", @"BI", @"855", @"KH",
            @"237", @"CM", @"1", @"CA", @"238", @"CV", @"345", @"KY",
            @"236", @"CF", @"235", @"TD", @"56", @"CL", @"86", @"CN",
            @"61", @"CX", @"57", @"CO", @"269", @"KM", @"242", @"CG",
            @"682", @"CK", @"506", @"CR", @"385", @"HR", @"53", @"CU",
            @"537", @"CY", @"420", @"CZ", @"45", @"DK", @"253", @"DJ",
            @"1", @"DM", @"1", @"DO", @"593", @"EC", @"20", @"EG",
            @"503", @"SV", @"240", @"GQ", @"291", @"ER", @"372", @"EE",
            @"251", @"ET", @"298", @"FO", @"679", @"FJ", @"358", @"FI",
            @"33", @"FR", @"594", @"GF", @"689", @"PF", @"241", @"GA",
            @"220", @"GM", @"995", @"GE", @"49", @"DE", @"233", @"GH",
            @"350", @"GI", @"30", @"GR", @"299", @"GL", @"1", @"GD",
            @"590", @"GP", @"1", @"GU", @"502", @"GT", @"224", @"GN",
            @"245", @"GW", @"595", @"GY", @"509", @"HT", @"504", @"HN",
            @"36", @"HU", @"354", @"IS", @"91", @"IN", @"62", @"ID",
            @"964", @"IQ", @"353", @"IE", @"972", @"IL", @"39", @"IT",
            @"1", @"JM", @"81", @"JP", @"962", @"JO", @"77", @"KZ",
            @"254", @"KE", @"686", @"KI", @"965", @"KW", @"996", @"KG",
            @"371", @"LV", @"961", @"LB", @"266", @"LS", @"231", @"LR",
            @"423", @"LI", @"370", @"LT", @"352", @"LU", @"261", @"MG",
            @"265", @"MW", @"60", @"MY", @"960", @"MV", @"223", @"ML",
            @"356", @"MT", @"692", @"MH", @"596", @"MQ", @"222", @"MR",
            @"230", @"MU", @"262", @"YT", @"52", @"MX", @"377", @"MC",
            @"976", @"MN", @"382", @"ME", @"1", @"MS", @"212", @"MA",
            @"95", @"MM", @"264", @"NA", @"674", @"NR", @"977", @"NP",
            @"31", @"NL", @"599", @"AN", @"687", @"NC", @"64", @"NZ",
            @"505", @"NI", @"227", @"NE", @"234", @"NG", @"683", @"NU",
            @"672", @"NF", @"1", @"MP", @"47", @"NO", @"968", @"OM",
            @"92", @"PK", @"680", @"PW", @"507", @"PA", @"675", @"PG",
            @"595", @"PY", @"51", @"PE", @"63", @"PH", @"48", @"PL",
            @"351", @"PT", @"1", @"PR", @"974", @"QA", @"40", @"RO",
            @"250", @"RW", @"685", @"WS", @"378", @"SM", @"966", @"SA",
            @"221", @"SN", @"381", @"RS", @"248", @"SC", @"232", @"SL",
            @"65", @"SG", @"421", @"SK", @"386", @"SI", @"677", @"SB",
            @"27", @"ZA", @"500", @"GS", @"34", @"ES", @"94", @"LK",
            @"249", @"SD", @"597", @"SR", @"268", @"SZ", @"46", @"SE",
            @"41", @"CH", @"992", @"TJ", @"66", @"TH", @"228", @"TG",
            @"690", @"TK", @"676", @"TO", @"1", @"TT", @"216", @"TN",
            @"90", @"TR", @"993", @"TM", @"1", @"TC", @"688", @"TV",
            @"256", @"UG", @"380", @"UA", @"971", @"AE", @"44", @"GB",
            @"1", @"US", @"598", @"UY", @"998", @"UZ", @"678", @"VU",
            @"681", @"WF", @"967", @"YE", @"260", @"ZM", @"263", @"ZW",
            @"591", @"BO", @"673", @"BN", @"61", @"CC", @"243", @"CD",
            @"225", @"CI", @"500", @"FK", @"44", @"GG", @"379", @"VA",
            @"852", @"HK", @"98", @"IR", @"44", @"IM", @"44", @"JE",
            @"850", @"KP", @"82", @"KR", @"856", @"LA", @"218", @"LY",
            @"853", @"MO", @"389", @"MK", @"691", @"FM", @"373", @"MD",
            @"258", @"MZ", @"970", @"PS", @"872", @"PN", @"262", @"RE",
            @"7", @"RU", @"590", @"BL", @"290", @"SH", @"1", @"KN",
            @"1", @"LC", @"590", @"MF", @"508", @"PM", @"1", @"VC",
            @"239", @"ST", @"252", @"SO", @"47", @"SJ", @"963", @"SY",
            @"886", @"TW", @"255", @"TZ", @"670", @"TL", @"58", @"VE",
            @"84", @"VN", @"1", @"VG", @"1", @"VI", nil];
} 
```

2)

```
#pragma mark - Custom Method 
-(void)setDefaultCountryCode{
 NSString *countryIdentifier = [[NSLocale currentLocale] objectForKey: NSLocaleCountryCode];
 NSLog(@"%@",[NSString stringWithFormat:@"+%@",[[self getCountryCodeDictionary] objectForKey:countryIdentifier]]);
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-26T09:29:25.613

通过使用`coretelephony.framework`您可以获得电话号码的国家代码。

```
CTTelephonyNetworkInfo *info = [CTTelephonyNetworkInfo new];

CTCarrier *carrier = info.subscriberCellularProvider;

NSLog(@"Country code is: %@",carrier.mobileCountryCode); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-29T04:58:23.990

是 ISO-3166 中定义的`NSLocaleCountryCode`国家代码，而不是呼叫代码。您需要在其他地方找到调用代码。

有关 ISO3166 -> 调用代码的完整列表，请参阅[链接](http://www.commondatahub.com/live/geography/country/country_dialing_codes)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-27T12:49:31.193

使用[HMDiallingCode](https://github.com/HeshamMegid/HMDiallingCode)。它使用 CoreLocation 和反向地理编码来确定用户所在的国家/地区，然后检索其国际拨号代码。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-09-30T16:35:33.807

我在 cocoacontrols.com 上又遇到了一个这样简单的解决方案。

请查看[适用于 iOS 的国家/地区列表。](https://www.cocoacontrols.com/controls/country-list)

它有一个 json 文件，可以配置为更新更多信息并根据需要使用。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-29T07:33:21.597

那么另一种经过验证的方法是为此调用 WebService ，您可以使用[http://www.webservicex.net/country.asmx](http://www.webservicex.net/country.asmx)的 GetISD WebMethod 并传递当前位置的国家/地区。

通过这种方式，您可以确保获得用户访问应用程序所在国家/地区的相关 ISD ID。

另一种方法是在 SQLite 数据库中拥有所有 ISO 国家，然后根据当前位置的国家/地区执行查找并显示相应的条目。

[如何检索用户的当前城市名称？](https://stackoverflow.com/questions/1382900/how-to-retrieve-users-current-city-name)是使用 . 查找国家名称的方法`CLLocationManager`。

希望这可以帮助，

谢谢， 吉格

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-29T15:51:17.700

您需要将所有国家/地区代码放在一个 csv 文件中，以便稍后您可以从该特定文件中读取国家/地区代码并对特定国家/地区代码的数据进行排序。以下是国家代码的完整列表

```
Afghanistan-93,
Albania-355,
Algeria-213,
Andorra-376,
Angola-244,
Argentina-54,
Armenia-374,
Australia-61,
Austria-43,
Azerbaijan-994,
Bahrain-973,
Bangladesh-880,
Belarus-375,
Belgium-32,
Belize-501,
Benin-229,
Bhutan-975,
Bolivia-591,
BosniaandHerzegovina-387,
Botswana-267,
Brazil-55,
Brunei-673,
Bulgaria-359,
BurkinaFaso-226,
Burundi-257,
Cambodia-855,
Cameroon-237,
Canada-1,
CapeVerde-238,
CentralAfricanRepublic-236,
Chad-235,
Chile-56,
China,People'sRepublicof-86,
Colombia-57,
Comoros-269,
Congo,DemocraticRepublicofthe(CongoﾖKinshasa)-243,
Congo,Republicofthe(CongoﾖBrazzaville)-242,
CostaRica-506,
Coted'Ivoire(IvoryCoast)-225,
Croatia-385,
Cuba-53,
Cyprus-357,
CzechRepublic-420,
Denmark-45,
Djibouti-253,
Ecuador-593,
Egypt-20,
ElSalvador-503,
EquatorialGuinea-240,
Eritrea-291,
Estonia-372,
Ethiopia-251,
Fiji-679,
Finland-358,
France-33,
Gabon-241,
Gambia,The-220,
Georgia-995,
Germany-49,
Ghana-233,
Greece-30,
Guatemala-502,
Guinea-224,
Guinea-Bissau-245,
Guyana-592,
Haiti-509,
Honduras-504,
Hungary-36,
Iceland-354,
India-91,
Indonesia-62,
Iran-98,
Iraq-964,
Ireland-353,
Israel-972,
Italy-39,
Japan-81,
Jordan-962,
Kazakhstan-7,
Kenya-254,
Kiribati-686,
Korea,DemocraticPeople'sRepublicof(NorthKorea)-850,
Korea,Republicof(SouthKorea)-82,
Kuwait-965,
Kyrgyzstan-996,
Laos-856,
Latvia-371,
Lebanon-961,
Lesotho-266,
Liberia-231,
Libya-218,
Liechtenstein-423,
Lithuania-370,
Luxembourg-352,
Macedonia-389,
Madagascar-261,
Malawi-265,
Malaysia-60,
Maldives-960,
Mali-223,
Malta-356,
MarshallIslands-692,
Mauritania-222,
Mauritius-230,
Mexico-52,
Micronesia-691,
Moldova-373,
Monaco-377,
Mongolia-976,
Montenegro-382,
Morocco-212,
Mozambique-258,
Myanmar(Burma)-95,
Namibia-264,
Nauru-674,
Nepal-977,
Netherlands-31,
NewZealand-64,
Nicaragua-505,
Niger-227,
Nigeria-234,
Norway-47,
Oman-968,
Pakistan-92,
Palau-680,
Panama-507,
PapuaNewGuinea-675,
Paraguay-595,
Peru-51,
Philippines-63,
Poland-48,
Portugal-351,
Qatar-974,
Romania-40,
Russia-7,
Rwanda-250,
Samoa-685,
SanMarino-378,
SaoTomeandPrincipe-239,
SaudiArabia-966,
Senegal-221,
Serbia-381,
Seychelles-248,
SierraLeone-232,
Singapore-65,
Slovakia-421,
Slovenia-386,
SolomonIslands-677,
Somalia-252,
SouthAfrica-27,
Spain-34,
SriLanka-94,
Sudan-249,
Suriname-597,
Swaziland-268,
Sweden-46,
Switzerland-41,
Syria-963,
Tajikistan-992,
Tanzania-255,
Thailand-66,
Timor-Leste(EastTimor)-670,
Togo-228,
Tonga-676,
Tunisia-216,
Turkey-90,
Turkmenistan-993,
Tuvalu-688,
Uganda-256,
Ukraine-380,
UnitedArabEmirates-971,
UnitedKingdom-44,
UnitedStates-1,
Uruguay-598,
Uzbekistan-998,
Vanuatu-678,
VaticanCity-379,
Venezuela-58,
Vietnam-84,
Yemen-967,
Zambia-260,
Zimbabwe-263,
Abkhazia-995,
China,Republicof(Taiwan)-886,
Somaliland-252,
SouthOssetia-995,
ChristmasIsland-61,
Cocos(Keeling)Islands-61,
NorfolkIsland-672,
NewCaledonia-687,
FrenchPolynesia-689,
Mayotte-262,
SaintBarthelemy-590,
SaintMartin-590,
SaintPierreandMiquelon-508,
WallisandFutuna-681,
CookIslands-682,
Niue-683,
Tokelau-690,
Guernsey-44,
IsleofMan-44,
Jersey-44,
BritishIndianOceanTerritory-246,
BritishSovereignBaseAreas-357,
FalklandIslands(IslasMalvinas)-500,
Gibraltar-350,
SaintHelena-290,
HongKong-852,
Macau-853,
FaroeIslands-298,
Greenland-299,
FrenchGuiana-594,
Guadeloupe-590,
Martinique-596,
Reunion-262,
Aruba-297,
NetherlandsAntilles-599,
Svalbard-47,
Ascension-247,
TristandaCunha-290,
PalestinianTerritories(GazaStripandWestBank)-970,
WesternSahara-212, 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-12-18T01:37:15.750

**迅速**

```
 let callingCodes = ["AD":"376","AE":"971","AF":"93","AG":"1","AI":"1","AL":"355","AM":"374","AN":"599","AO":"244","AR":"54","AS":"1","AT":"43","AU":"61","AW":"297","AZ":"994",
                        "BA":"387","BB":"1","BD":"880","BE":"32","BF":"226","BG":"359","BH":"973","BI":"257","BJ":"229","BL":"590","BM":"1","BN":"673","BO":"591","BR":"55","BS":"1","BT":"975","BW":"267","BY":"375","BZ":"501",
                        "CA":"1","CC":"61","CD":"243","CF":"236","CG":"242","CH":"41","CI":"225","CK":"682","CL":"56","CM":"237","CN":"86","CO":"57","CR":"506","CU":"53","CV":"238","CX":"61","CY":"537","CZ":"420",
                        "DE":"49","DJ":"253","DK":"45","DM":"1","DO":"1","DZ":"213",
                        "EC":"593","EE":"372","EG":"20","ER":"291","ES":"34","ET":"251",
                        "FI":"358","FJ":"679","FK":"500","FM":"691","FO":"298","FR":"33",
                        "GA":"241","GB":"44","GD":"1","GE":"995","GF":"594","GG":"44","GH":"233","GI":"350","GL":"299","GM":"220","GN":"224","GP":"590","GQ":"240","GR":"30","GS":"500","GT":"502","GU":"1","GW":"245","GY":"595",
                        "HK":"852","HN":"504","HR":"385","HT":"509","HU":"36","ID":"62","IE":"353",
                        "IL":"972","IM":"44","IN":"91","IO":"246","IQ":"964","IR":"98","IS":"354","IT":"39",
                        "JE":"44","JM":"1","JO":"962","JP":"81",
                        "KE":"254","KG":"996","KH":"855","KI":"686","KM":"269","KN":"1","KP":"850","KR":"82","KW":"965","KY":"345","KZ":"77",
                        "LA":"856","LB":"961","LC":"1","LI":"423","LK":"94","LR":"231","LS":"266","LT":"370","LU":"352","LV":"371","LY":"218",
                        "MA":"212","MC":"377","MD":"373","ME":"382","MF":"590","MG":"261","MH":"692","MK":"389","ML":"223","MM":"95","MN":"976","MO":"853","MP":"1","MQ":"596","MR":"222","MS":"1","MT":"356","MU":"230","MV":"960","MW":"265","MX":"52","MY":"60","MZ":"258",
                        "NA":"264","NC":"687","NE":"227","NF":"672","NG":"234","NI":"505","NL":"31","NO":"47","NP":"977","NR":"674","NU":"683","NZ":"64",
                        "OM":"968",
                        "PA":"507","PE":"51","PF":"689","PG":"675","PH":"63","PK":"92","PL":"48","PM":"508","PN":"872","PR":"1","PS":"970","PT":"351","PW":"680","PY":"595",
                        "QA":"974",
                        "RE":"262","RO":"40","RS":"381","RU":"7","RW":"250",
                        "SA":"966","SB":"677","SC":"248","SD":"249","SE":"46","SG":"65","SH":"290","SI":"386","SJ":"47","SK":"421","SL":"232","SM":"378","SN":"221","SO":"252","SR":"597","ST":"239","SV":"503","SY":"963","SZ":"268",
                        "TC":"1","TD":"235","TG":"228","TH":"66","TJ":"992","TK":"690","TL":"670","TM":"993","TN":"216","TO":"676","TR":"90","TT":"1","TV":"688","TW":"886","TZ":"255",
                        "UA":"380","UG":"256","US":"1","UY":"598","UZ":"998",
                        "VA":"379","VC":"1","VE":"58","VG":"284","VI":"340","VN":"84","VU":"678",
                        "WF":"681","WS":"685",
                        "YE":"967","YT":"262",
                        "ZA":"27","ZM":"260","ZW":"263"] 
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2012-11-23T20:24:16.447

我创建了一个 [包含国家代码和调用代码的 NSDictionary](https://stackoverflow.com/a/13534627/172361)，您可以使用它们来查找调用代码。

使用上面的代码和 NSDictionary 你会做这样的事情......

```
NSLocale *locale = [NSLocale currentLocale];
NSString *countryCode = [locale objectForKey: NSLocaleCountryCode];
NSString *callingCode = [dictCodes objectForKey:countryCode]; 
```

# java - 如何在 JTabbedPane 中隐藏选项卡式面板？

> ID：13116020
> 
> 赞同：3
> 
> 时间：2012-10-29T04:52:55.840
> 
> 标签：java, swing

我有：

```
JTabbedPane jtabbedPane = new JTabbedPane();
jTabbedPane.addTab("Tab 1", panel1);
jTabbedPane.addTab("Tab 2", panel2);
jTabbedPane.addTab("Tab 3", panel3); 
```

我想要做的是在条件发生时隐藏选项卡 2（比如不允许用户访问该选项卡式面板。

是的，我知道你可以这样做：

```
jtabbedPane.setEnabled(1, false); // disable Tab 2 
```

这会使它变灰，***但我想完全隐藏它，以便用户甚至不知道它甚至是软件中的一种可能性***。他们甚至不应该意识到它的存在。

我不想做

```
jtabbedPane.remove(1); // remove Tab 2 
```

因为我必须定期删除/添加。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T17:25:03.197

唯一的方法是在您不想看到它时将其删除，并在以后希望它可见时重新添加它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-04-07T13:05:08.930

这项工作在我的项目中。

```
this.TabbedPane.setEnabledAt(1, false); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T05:12:07.437

我认为这只能通过自定义组件来完成。

这是[HideableTabbedPane](http://www-mipl.jpl.nasa.gov/vicar/vicar350/html/javadoc/jpl/mipl/mars/viewer/util/HideableTabbedPane.html)的 api试试

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T05:16:52.570

**解决方案 1：-**为什么不从 1 的值开始 x，所以它跳过 0，而不是从 0 开始并检查 x>1...

**解决方案 2：-** [http://docs.oracle.com/javase/tutorial/uiswing/components/tabbedpane.html#tabapi][1]

[1]：[http](http://docs.oracle.com/javase/tutorial/uiswing/components/tabbedpane.html#tabapi) ://docs.oracle.com/javase/tutorial/uiswing/components/tabbedpane.html#tabapi使用该链接。

**解决方案 3：** - 你可以做这样的事情，只是不绘制 tabArea

```
import javax.swing.*; 
import java.awt.*; 
import java.awt.event.*; 
class Testing { 
public void buildGUI() { 
JTabbedPane tp = new JTabbedPane(); 
tp.addTab("A",getPanel("A")); 
tp.addTab("B",getPanel("B")); 
tp.addTab("C",getPanel("C")); 
tp.setUI(new javax.swing.plaf.metal.MetalTabbedPaneUI(){ 
protected void paintTabArea(Graphics g,int tabPlacement,int selectedIndex){} }); 
JFrame f = new JFrame(); 
f.getContentPane().add(tp); 
f.pack(); 
f.setLocationRelativeTo(null); 
f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE); 
f.setVisible(true);
 } 
public JPanel getPanel(String tabText)
 { 
JPanel p = ... 
```

# iphone - 我无法通过按返回键隐藏键盘

> ID：13116022
> 
> 赞同：2
> 
> 时间：2012-10-29T04:53:14.110
> 
> 标签：iphone, ios, resignfirstresponder

我试过这个：

在`.h`文件中：

```
 @interface TouchLabelViewController : UIViewController<UITextFieldDelegate>
@property (strong, nonatomic) IBOutlet UITextField *aTextField;        
-(IBAction)hideKeyboard:(id)sender; 
```

在`.m`文件中：

```
-(IBAction)hideKeyboard:(id)sender{
    [(UITextField*)sender resignFirstResponder];
} 
```

并且也试过这个。

在`.h`文件中：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    aTextField.delegate = self;
}
@property (strong, nonatomic) IBOutlet UITextField *aTextField;
-(BOOL) textFieldShouldReturn:(UITextField *)textField; 
```

在`.m`文件中：

```
-(BOOL) textFieldShouldReturn:(UITextField *)textField{

    [aTextField resignFirstResponder];
    return YES;
} 
```

但是每当我触摸返回键时，它仍然不会隐藏键盘。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-29T04:59:46.943

当您将委托设置为文本字段时，您可以利用这些（委托）方法。

您应该检查您的委托是否已将委托设置为文本字段

`.h`在你的课堂上设置这个

```
 YourViewController :   UIViewController <UITextFieldDelegate> 
```

现在，您在哪里创建了 TextField 集委托，如下所示

```
 myTextField.delegate = self; 
```

并进一步做你正在做的事情

```
 -(BOOL) textFieldShouldReturn:(UITextField *)textField{
     [textField resignFirstResponder];
     return YES;
  } 
```

**编辑：如果您将当前呈现为 `UIModalPresentationFormSheet` 演示模式，则可能会在不需要时保持键盘可见。默认实现会影响 UIModalPresentationFormSheet 可见性。这就是为什么需要覆盖它以隐藏键盘**

```
 - (BOOL)disablesAutomaticKeyboardDismissal 
 {
   return NO; 
 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T05:02:22.217

TextField 的第一组委托

```
aTextField.delegate = self;

-(BOOL) textFieldShouldReturn:(UITextField *)textField
{
    [textField resignFirstResponder];
    return YES;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T04:57:28.163

```
-(BOOL) textFieldShouldReturn:(UITextField *)textField{
     [textField resignFirstResponder];
    //[aTextField resignFirstResponder];
    return YES;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-13T14:31:04.587

只需`<UITextFieldDelegate>`在 .m 文件中实现如下所示

```
@interface xyzViewController () <UITextFieldDelegate> 
```

`xyzViewController`将是您的视图控制器的名称。使用此代码：

```
- (BOOL)textFieldShouldReturn:(UITextField *)theTextField {
    [theTextField resignFirstResponder];
    return YES;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-29T05:07:53.147

使您的 UITextField 成为一个出口并将其附加到您的 XIB 文件中，然后设置委托并在其中编写代码：

`[texfieldName resignFirstResponder];`

这将起作用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-29T04:55:04.847

将代表交给您的`UITextField`

喜欢

```
- (void)viewDidLoad
{
    yourTextField.delegate = self;//
} 
```

并在委托方法中..

```
-(BOOL) textFieldShouldReturn:(UITextField *)textField{
     [textField resignFirstResponder];
     return YES;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-29T04:56:34.563

您在 XIB 中或以编程方式使用`Delegate`in 。`UITextField`

```
 -(IBAction)hideKeyboard:(id)sender
{
    [your_textfield resignFirstResponder]; // your_textfield is an UITextField
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-11-20T06:09:00.130

对于 UITextField 你可以这样做

在 .h 文件中

```
@interface ViewController : UIViewController<UITextFieldDelegate> 
```

在 .m 文件中

```
- (void)viewDidLoad
{
   textField.delegate = self;
}

-(BOOL)textFieldShouldReturn:(UITextField *)textField
{
    [textField resignFirstResponder];
    return YES;
} 
```

而对于 UITextView 你可以这样做

在 .h 文件中

```
@interface ViewController : UIViewController<UITextViewDelegate> 
```

在 .m 文件中

```
- (void)viewDidLoad
{
   textView.delegate = self;
}

- (BOOL)textView:(UITextView *)textView shouldChangeTextInRange:(NSRange)range replacementText:(NSString *)text {

    if([text isEqualToString:@"\n"]) {
        [textView resignFirstResponder];
        return NO;
    }

    return YES;
} 
```

# android - 从 Android 上的服务器访问文件夹

> ID：13116025
> 
> 赞同：0
> 
> 时间：2012-10-29T04:53:39.960
> 
> 标签：android, url

如果我想访问上传到服务器上的文件夹，我将如何从 Android 项目访问它？我尝试使用以下

```
public URL(String protocol, String host, String file) 
```

**我的代码：**

```
URL url = new URL("file", "www.websitename.com", "/folderX");
MyClassName path = new MyClassName(url); 
```

似乎它仍然无法访问服务器上的文件夹。有什么我想念的或者我应该使用其他方式的吗？logcat 中没有错误，所以我不确定它是什么。也不会抛出 MalformedURLException。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T05:14:43.303

I you want to access the folder and its files from your server you need FTP account details to connect to your server from your android device.There are more FTP Client libraries available to access the files one of them is [http://commons.apache.org/net/download_net.cgi](http://commons.apache.org/net/download_net.cgi)

# python - Python if this and this and this

> ID：13116026
> 
> 赞同：2
> 
> 时间：2012-10-29T04:53:41.770
> 
> 标签：python, if-statement

我是 Python 新手。我正在编写一个字符串函数来检查某个字符串是否包含某些多个值。python中是否有语法允许我做这样的事情：

```
def strParse(str):
    a = 't'
    b = 'br'
    c = 'ht'
    if a in str AND b in str AND c in str:
        print('Ok!') 
```

（我不确定的部分是有多个 if 语句在线。）谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-29T04:55:35.723

为什么不尝试将其输入 Python REPL？你想要做的在 python 中是完全有效的，除了`and`关键字是小写而不是大写。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-29T04:59:46.530

几乎正确，只需`and`小写：

```
def strParse(str):
    a = 't'
    b = 'br'
    c = 'ht'
    if a in str and b in str and c in str:
        print('Ok!') 
```

在这种情况下不会导致问题，但您应该避免使用也是[内置函数的](http://docs.python.org/2/library/functions.html)变量名（`str`是内置函数/类型）

如果你有更多的价值观，你可以像这样更整齐地做同样的事情：

```
values = ['t', 'br', 'ht']
if all(x in instr for x in values):
    print("Ok!") 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-29T04:58:52.623

```
if all(s in text for s in (a, b, c)):
   print("ok") 
```

# c# - 无法使用 String.Format 在 WPF 中显示版本字符串

> ID：13116035
> 
> 赞同：2
> 
> 时间：2012-10-29T04:54:30.187
> 
> 标签：c#, c++, .net, wpf

我是一名 C++ 开发人员，最近转向 C#。我正在开发一个需要处理的 wpf 应用程序`String.Format`。在我的 C++ 应用程序中，我曾经`sprintf`获得过结果，但是当涉及到 C# 时，string.format 帮助我实现了它。现在我遇到了一个棘手的情况，我需要实现类似的事情但具有不同的价值。这是 C++ 代码：

```
char t_str[4] = {};
for(int i = 0; i < 4; i++)
{ 
    sprintf(t_str, "%02X", buffer[i]);
m_apiResponse[i]->setText(String(t_str));
} 
```

where`buffer[0] = 20; buffer[1] = 30; buffer[2] = 40; buffer[3] = 50;`和`m_apiResponse`是一个文本框。

尽管`string.format`也很有帮助，但我宁愿选择简单的方法。我在我的 C# 中这样做了，如下所示：

```
Response1Box = buffer[0].ToString("X2");
Response2Box = buffer[1].ToString("X2");
Response3Box = buffer[2].ToString("X2");
Response4Box = buffer[3].ToString("X2"); 
```

它运作良好，给了我想要的答案。但是现在我在我的 c++ 应用程序中遇到了它的一个扭曲版本.....这是代码：

```
unsigned char buffer[8] = {};
char verString[64] = {};

m_msp430->WriteInternalCommand(cmd, 1, buffer);
m_msp430->ReadInternalCommand(cmd, 4, buffer);

sprintf(verString, "FPGA 0x42 Version (dd/mm/yyyy ID): %02d/%02d/20%02d %02d", ((buffer[3] & 0xF8) >> 3), 
            (buffer[2] & 0x0F), ((buffer[2] & 0xF0) >> 4), (buffer[3] & 0x07));

m_versionString->setText(String(verString), false); 
```

这里 m_versionString 是一个标签，一旦执行了这个语句，它就会打印出例如`FPGA 0x42 Version (dd/mm/yyyy ID): 00/00/2012 23`. 我在 C# 中尝试如下：

```
// Description of VersionString label which displays
    private string _VersionString;
    public string VersionString
    {
        get
        {
            return _VersionString;
        }

        set
        {
            _VersionString = value;
            OnPropertyChanged("VersionString");
        }
    }

    public void GetVersion()
    {
        int cmd = 0x0A42;
        Byte[] buffer = new Byte[8];
        Byte[] verString = new Byte[64];

        mComm.WriteInternalCommand(cmd, 1, ref buffer);
        mComm.ReadInternalCommand(cmd, 4, ref buffer);            

        // Failing to figure out how to achieve it

        VersionString = Convert.ToString(verString);
    } 
```

如何执行这些操作并将其显示在我的 VersionString 上？：） 请帮忙 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T06:35:54.763

您的 C++ 代码不等同于您的 C# 代码。您在 sprintf 之前屏蔽和位移每个字节。C# 不可能知道如何屏蔽单个字节来制作你的字符串。

现在时间不多了..但基本上是这样的..

```
verString = String.Format("FPGA 0x42 Version (dd/mm/yyyy ID): {0}/{1}/20{2} {3}", ((buffer[3] & 0xF8) >> 3), 
        (buffer[2] & 0x0F), ((buffer[2] & 0xF0) >> 4), (buffer[3] & 0x07)); 
```

或者您可以在调用 convert 之前逐个字节地进行而不使用 String.Format

# sql - 插入触发器 - 来自“员工注册”的“EmpCode”值

> ID：13116036
> 
> 赞同：0
> 
> 时间：2012-10-29T04:54:31.233
> 
> 标签：sql, sql-server, sql-server-2008

我有“员工登记”表格（Windows 应用程序）。员工注册完成后，同时我想创建一个用户。从“员工注册”中获取“EmpCode”值并将其设为“用户名”的值。请帮我写一个触发器。

员工登记表列是

```
EMPCODE, 
EMPNAME, 
DESIGNATION, 
DEPARTMENT, 
DOJ,  
EMAILID, 
CATEGORY, 
EMPSTATUS, 
EMPMANAGER etc etc 
```

UserCreation 表列是

```
USERNAME, 
USERPASSWORD, 
USERMAPPINGCODE, 
USERTYPE, 
USERACTIVE, 
USEREMAIL 
```

当 'employee regstratn' 的插入发生时，同时在 'UserCreation' 表中发生以下 thngs ....，

`EMPCODE`的值应保存为`USERNAME`的值。 `EMPNAME`的值应保存为`USERPASSWORD`的值。 `USERMAPPINGCODE`' 值 optional `CATEGORY`' 值应保存为`USERTYPE`' 值。 `USERACTIVE`' 的值为 1 `EMAILID`的值应保存为`USEREMAIL`' 的值

请帮忙....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T05:06:26.517

干得好：

```
CREATE TRIGGER EmployeeTrigger
ON dbo.Employees
FOR INSERT
AS
BEGIN
    DECLARE @empCode BIGINT
    SET @empCode = (SELECT EMPCODE FROM INSERTED)
    DECLARE @empName VARCHAR(50)
    SET @empName = (SELECT EMPNAME FROM INSERTED)
    DECLARE @empCat VARCHAR(50)
    SET @empCat = (SELECT CATEGORY FROM INSERTED)
    DECLARE @empEMail VARCHAR(50)
    SET @empEMail = (SELECT EMAILID FROM INSERTED)
    INSERT INTO dbo.Users (USERNAME, USERPASSWORD, USERMAPPINGCODE, USERTYPE, USERACTIVE, USEREMAIL)
    VALUES  (@empCode, @empName, NULL, @empCat, 1, @empEMail)
END 
```

它可能不会按原样执行，您可能需要调整一些变量名，以防我们中的任何一个出现拼写错误。这是使用包含新插入值的 INSERTED 逻辑表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T07:36:01.960

```
CREATE TRIGGER EmployeeTrigger
ON dbo.Employees
FOR INSERT
AS
BEGIN
  INSERT dbo.Users (USERNAME, USERPASSWORD, USERMAPPINGCODE, USERTYPE, USERACTIVE, USEREMAIL)
  SELECT EMPCODE, EMPNAME, NULL, CATEGORY, 1, EMAILID
  FROM inserted
END 
```

# iphone - iPhone应用程序上的图形

> ID：13116037
> 
> 赞同：0
> 
> 时间：2012-10-29T04:54:42.330
> 
> 标签：iphone, ios, cocoa-touch, graphics

我有一位平面设计师正在为我的 iPhone 应用程序制作一些图形。最近，她为我制作了一个背景图案，并向我提出了两个我不确定如何回答的问题：

1）背景图案的大小应该是多少？

-为此我知道当我编写我的应用程序时，屏幕是 320 x 480 （在纵向模式下），但是这是我应该给她的合适单位吗（我只担心 iPhone 4和下面现在）？例如，我知道有一个视网膜显示器，并且我看到我手机的手机分辨率也被列为 640 x 960。我只是不知道最好告诉她什么是，她没有有任何 iPhone 使用经验，会使用 illustrator、photoshop 等传统图形程序进行图形设计。

2）它应该是什么文件类型？

- 我读过 iPhone 几乎支持所有最流行的图形文件类型，但有没有什么特别适合 iPhone 应用程序的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T05:13:09.637

iPhone 资源图像的标准是 PNG。如果您希望 iPhone 4+ 具有视网膜显示，请让设计人员提供两个版本的 PNG：标准版本和双倍大小版本，应在文件名之后、扩展名之前附加 @2x。

所以

```
image.png 
```

定期解决和

```
image@2x.png 
```

用于视网膜分辨率。iOS 将根据可用的屏幕自动选择最好的一个。

# mysql - 如何将变量传递给 IN 子句？

> ID：13116042
> 
> 赞同：36
> 
> 时间：2012-10-29T04:55:17.173
> 
> 标签：mysql, variables, stored-procedures, in-clause

假设我有一个 SP，其`SELECT`语句如下，

```
SELECT product_id, product_price FROM product 
WHERE product_type IN ('AA','BB','CC'); 
```

但是进入该`IN`子句的数据必须通过包含值字符串的单个变量。下面有东西链接

```
SELECT product_id, product_price FROM product 
WHERE product_type IN (input_variables); 
```

但它不是那样工作的。知道怎么做吗？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-10-29T07:33:34.680

像这样传递参数值 - `'AA,BB,CC'`。[然后，使用FIND_IN_SET](http://dev.mysql.com/doc/refman/5.1/en/string-functions.html#function_find-in-set)函数就足够了-

```
SELECT product_id, product_price
FROM product
WHERE FIND_IN_SET(product_type, param); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-29T05:30:43.300

创建一个用户定义的函数，将逗号分隔的值转换为表，并通过将这两者连接起来可以获得所需的结果。

[更多](http://www.sql-server-helper.com/functions/comma-delimited-to-table.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-12-18T09:36:48.830

# 使用变量传递字符串是一个问题假设这个解决方案

```
DELIMITER $$

CREATE DEFINER=`root`@`localhost` PROCEDURE `spTestListValues`(_list varchar(200))
BEGIN
        SET @LIST=_list; -- assume this a paramter from the stored procedure
    SELECT NULL AS Id,  '' AS Description --insert null value to be used for list box population
    UNION  
    (SELECT id, Description
    FROM test_table
    WHERE FIND_IN_SET(id,@LIST) ORDER BY Description ASC) ;

END 
```

# 从其他查询窗口调用过程

```
call `spTestListValues`('4,5,3'); --no paramter currently for test 
```

# 输出

```
ID Description
NUll 
1   TEST1 
4   TEST2
5   TEST3 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-29T06:27:44.673

尝试使用准备好的语句：
[https ://dev.mysql.com/doc/refman/8.0/en/sql-prepared-statements.html](https://dev.mysql.com/doc/refman/8.0/en/sql-prepared-statements.html)

# android - 服务是否自动启动

> ID：13116047
> 
> 赞同：0
> 
> 时间：2012-10-29T04:55:54.787
> 
> 标签：android, android-intent, android-service

我是 android 的新手。当手机打开时，android 中的服务是否会自动启动？如果是，那很好。如果没有，谁能解释我如何启动特定的服务？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T05:01:32.967

不，服务不会在设备启动后自动启动。但是您可以在设备启动完成时注册一个 android.intent.action.BOOT_COMPLETED 以启动服务：

**AndroidManifest.xml：**

```
 <uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED">
   </uses-permission>
    <receiver android:name=".BootReceiver" android:label="@string/app_name"> 
        <intent-filter> 
           <action android:name="android.intent.action.BOOT_COMPLETED" /> 
           <category android:name="android.intent.category.LAUNCHER" /> 
        </intent-filter> 
    </receiver> 
```

* * *

**BootReceiver.java：**

```
public class BootReceiver extends IntentReceiver 
{

    static final String ACTION = "android.intent.action.BOOT_COMPLETED";

    public void onReceiveIntent(Context context, Intent intent) 
    {
        if (intent.getAction().equals(ACTION)) 
        {
           context.startService(new Intent(context,YourService.class));
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T04:57:42.423

在基于用户的应用程序中，服务不会自动启动

您需要添加以下代码

```
<receiver android:name="com.wallpaper.StartReceiver" xmlns:android="#unknown">
            <intent-filter>
                <action android:name="android.intent.action.BOOT_COMPLETED" />
            </intent-filter>
</receiver> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T05:05:52.833

您最好从这里阅读有关广播接收器的内容 [http://www.vogella.com/articles/AndroidBroadcastReceiver/article.html](http://www.vogella.com/articles/AndroidBroadcastReceiver/article.html)

广播接收器是允许注册系统或应用程序事件的 Android 组件（在您的情况下为 ACTION_BOOT_COMPLETED）

一旦 Android 加载，它就会广播一条消息，表明启动已完成，所有注册接收该事件的应用程序都将收到它，你可以做你的事情......

可以使用下面的代码通过将其添加到清单文件中来完成

```
<receiver android:name="some_pagacakge_name" >
        <intent-filter>
            <action android:name="android.intent.action.BOOT_COMPLETED" />
        </intent-filter>
</receiver> 
```

这里有一些链接 [http://www.grokkingandroid.com/android-tutorial-broadcastreceiver/](http://www.grokkingandroid.com/android-tutorial-broadcastreceiver/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T05:02:02.813

你可以开始你的服务`startService(intent)`

在电话重启时运行它

在清单文件中添加以下权限

`<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" />`

并宣布了一个`Broadcast Receiver`喜欢

```
<receiver android:name=".BootReceiver"
            android:label="BootReceiver">
    <intent-filter>
        <action android:name="android.intent.action.BOOT_COMPLETED"></action>

    </intent-filter>
</receiver> 
```

进而

```
public class BootReceiver extends BroadcastReceiver {
private static final String TAG="BootReceiver";

@Override public void onReceive(Context context,Intent intent){
    try{
        context.startService(new Intent(context,yourServiceName.class));
        Log.i(TAG,"Starting Service yourServiceName");
    }catch(Exception e){
        Log.e(TAG,e.toString());
    }
}
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-29T05:13:12.373

这取决于您要启动哪种服务以及何时启动该服务的要求。如果您想在启动时启动特定服务，那么您必须像 Devangi Desai 提到的那样注册接收器，然后您需要发出该`startService()`方法。

```
public class Receiver extends BroadcastReceiver {

        @Override
        public void onReceive(Context context, Intent intent) {
            String intentAction = intent.getAction();
            if (intentAction.equals(Intent.ACTION_BOOT_COMPLETED))
                context.startService(new Intent(context,
                        ConnectionService.class));
        }
    } 
```

这`ConnectionService.class`是扩展服务并具有服务实现的类。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-29T05:17:28.343

除非您在清单中明确定义它们应在引导时启动，否则它们不会自动启动。为此，您需要添加操作

```
<action android:name="android.intent.action.BOOT_COMPLETED" /> 
```

在您的服务清单文件中。

例子：

```
 <receiver android:name="MyStartupIntentReceiver" >
        <intent-filter>
            <action android:name="android.intent.action.BOOT_COMPLETED" />

            <category android:name="android.intent.category.HOME" />
        </intent-filter>
    </receiver>
</receiver> 
```

有关服务的更多详细信息，请阅读此官方指南： [https ://developer.android.com/guide/components/services.html](https://developer.android.com/guide/components/services.html)

# android - 如何在android默认浏览器上控制屏幕视图

> ID：13116049
> 
> 赞同：0
> 
> 时间：2012-10-29T04:56:29.067
> 
> 标签：android, web-applications, default-browser

我想开发一个网络应用程序，用户可以使用 android 默认网络浏览器（至少）访问它。应用程序屏幕控制存在一些问题，但我仍然无法在其他任何地方找到解决方案，而且我不知道在哪里可以找到相似的解决方案。我需要应用程序

> 1.  全屏
> 2.  If(No.1 is not possible) 导航栏要么永久显示要么永久隐藏
> 3.  应用被固定到该位置，无法水平或垂直滚动​​并且右侧没有出现滚动条

是否可以使用 javascript/css/html 完成所有或部分操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T05:31:11.427

您可以使用此 jquery 函数来隐藏地址栏：

```
 $(document).ready(function() {

      if (navigator.userAgent.match(/Android/i)) {
        window.scrollTo(0,0); // reset in case prev not scrolled  
        var nPageH = $(document).height();
        var nViewH = window.outerHeight;
        if (nViewH > nPageH) {
          nViewH = nViewH / window.devicePixelRatio;
          $('BODY').css('height',nViewH + 'px');
        }
        window.scrollTo(0,1);
      }

}); 
```

您可以尝试使用[NiceScroll](http://areaaperta.com/nicescroll/)插件来获得滚动解决方案。

在尝试任何事情之前，您应该查看以下更多线程：

[从浏览器中删除地址栏（在 Android 上查看）](https://stackoverflow.com/questions/4068559/removing-address-bar-from-browser-to-view-on-android)

[适用于 Android 的全屏 Web 应用程序](https://stackoverflow.com/questions/7517352/fullscreen-web-app-for-android)

[HTML5 全屏 Web 应用程序：没有浏览器栏](https://stackoverflow.com/questions/11280826/html5-full-screen-web-apps-no-browser-bars?lq=1)

你也可以试试：

```
if(navigator.userAgent.match(/Android/i)){
    window.scrollTo(0,1);
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T05:03:16.697

1.  它是允许用户全屏显示的浏览器功能。部分手机浏览器不支持。这包括 android 本机浏览器。如果是，则只是浏览器显示设置隐藏了标签栏和导航栏

2.  当页面溢出并且用户向下滚动时自动出现滚动

3.  对于 android 原生浏览器，该栏固定在网站顶部。因此，如果用户可以向下滚动页面，它将被滚动出去。一些浏览器也有其他额外的栏贴在页面一侧。例如，dolphin 的侧面有书签、历史记录和附加栏

4.  所有这些都可以通过设置元素的高度和宽度来简单地使用 javascript 或 css 进行管理

5.  为获得最佳性能，请改用 Chrome

6.  避免使用 jQuery mobile，它会失败一切

7.  还要记得放这个标签以防止缩放

`<meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>`

# facebook - 如何清除 Facebook 上的应用邀请通知？

> ID：13116053
> 
> 赞同：0
> 
> 时间：2012-10-29T04:57:11.527
> 
> 标签：facebook

当我使用[API](https://developers.facebook.com/docs/reference/dialogs/requests/)发送通知请求时，它们会按预期到达。但是，在用户点击链接并接受应用权限后，通知仍然存在。

我需要打一些额外的电话来清除通知吗？我知道它会在一段时间后自动过期，但这似乎并不完全令人满意。

我错过了什么，或者这真的不可行吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T05:20:14.923

这是在用户接受应用邀请时删除应用请求的方式。

当用户接受邀请时，即通过单击应用程序请求通知进入您的应用程序画布页面，Facebook 在“request_ids”参数中发送逗号分隔的 id。您可以使用图形 api 获取此请求并删除它，如下所示：

在这里，我删除了最后一个请求 id：

```
$ids = $_GET['request_ids'];
$id_arr = explode(",",$ids);
$count  = count($id_arr);
$delete_url="https://graph.facebook.com/".$id_arr[$count-1]. "?access_token=" . $token . "&method=delete";
$result = file_get_contents($delete_url);
echo("Requests deleted (true or false) ?" . $result); 
```

注意 request_ids 字段可能包含多个请求 id，如果他被多次邀请。我不确定，但您可能需要全部删除。

# internet-explorer - IE9中的浏览器模式和文档模式

> ID：13116056
> 
> 赞同：4
> 
> 时间：2012-10-29T04:57:28.967
> 
> 标签：internet-explorer, browser

我使用 IE9 中的开发人员工具在 IE7、8 和 9 浏览器模式之间切换以测试标记和 CSS。我使用以下组合。

IE7 浏览器模式 + 文档模式 IE7 标准

IE8 浏览器模式 + 文档模式 IE8 标准

IE9 浏览器模式 + 文档模式 IE9 标准

但是，如果我使用以下组合，很少会出现设计的位置问题。

IE9 浏览器模式 + IE7 标准

上述组合有效吗？还是我需要强制更改文档模式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T07:46:39.077

The one thing to bear in mind when testing using IE's various compatibility modes is that they are not exact duplicates of a real copy of IE8 or IE7\. There are known bugs and quirks in the various different modes that do not occur in a real copy of IE7 or IE8.

Your question is asking which of the modes is sufficient for testing. My answer would be that none of them are. If you really want to know whether the site works in IE7 and IE8, you need to test it in IE7 and IE8.

Yes, testing in IE9 with a fallback mode will give you a close approximation of the old browser versions, but you'll never be totally certain it's correct. And at the end of the day, the point of testing is to get that certainty.

# iphone - 从服务器获取的货币转换和显示

> ID：13116062
> 
> 赞同：1
> 
> 时间：2012-10-29T04:57:57.973
> 
> 标签：iphone, ios, ios5, itunes

我正在从我的网络服务器获取我的应用程序的应用内购买项目。网络服务器提供产品标题、描述和价格...

目前我正在使用产品标题、描述和价格显示每个产品。目前我以美元显示货币。

现在我怀疑，我可以这样显示价格吗？当我引用一些 URL 时，似乎价格需要本地化。

那么我需要显示从我的服务器获取的本地化价格吗？请让我知道我应该如何进行？

非常感谢您的光临。。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T06:24:35.547

是的，您应该显示本地化价格。

来自[App Store 快速参考：iOS 和 OS X Lion 上的应用内购买入门](https://developer.apple.com/news/pdf/in_app_purchase.pdf)：

> 由于您的应用程序可能以特定地区的货币和语言在 App Store 中提供，因此您的项目的本地化描述和定价信息应通过 StoreKit 的产品请求 API 从 App Store 中提取。您将使用从产品请求返回的信息来填充您呈现给客户的用户界面，以进行商品选择和购买

StoreKit 的产品请求 API 非常简单，它返回一个 ProductResponse，其中包含一个 SKProduct，其中包括价格*和*priceLocale。根据[SKProduct Class Reference](http://developer.apple.com/library/ios/#documentation/StoreKit/Reference/SKProduct_Reference/Reference/Reference.html)，您在当前本地格式化价格的代码应类似于：

```
NSNumberFormatter *numberFormatter = [[NSNumberFormatter alloc] init];
[numberFormatter setFormatterBehavior:NSNumberFormatterBehavior10_4];
[numberFormatter setNumberStyle:NSNumberFormatterCurrencyStyle];
[numberFormatter setLocale:product.priceLocale];
NSString *formattedString = [numberFormatter stringFromNumber:product.price]; 
```

# android - 在 Android 中使用 PhoneGap 选择图像/视频

> ID：13116063
> 
> 赞同：1
> 
> 时间：2012-10-29T04:58:08.217
> 
> 标签：android, cordova

如何在 Android 中使用 PhoneGap 选择图像/视频（或拍摄照片/视频）？

我有一个网络表单需要选择图像/视频内容并提交表单以上传内容。PhoneGap 有能力这样做吗？还是我必须回退到原生 Android 代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T05:04:10.127

是的，您可以使用 phonegap 将图像上传到服务器

这是选择图像或视频的代码

```
document.addEventListener("deviceready", onDeviceReady, false);

function onDeviceReady() {
    pictureSource = navigator.camera.PictureSourceType;
    destinationType = navigator.camera.DestinationType;
}

    function capturePhoto() {
    navigator.camera.getPicture(onPhotoURISuccess, onFail, { quality: 50, 
    destinationType: destinationType.FILE_URI });
}

function getPhoto(source) {
    navigator.camera.getPicture(onPhotoURISuccess, onFail, { quality: 50, 
    destinationType: destinationType.FILE_URI,
    sourceType: source });
}

function onPhotoURISuccess(imageURI) {
    // do whatever with imageURI
} 
```

在html中你必须写

```
<button class="btn large" onclick="capturePhoto();">Capture Photo</button>
<button class="btn large" onclick="getPhoto(pictureSource.PHOTOLIBRARY);">From
        Photo Library</button> 
```

用于视频

```
Camera.MediaType = { 
    PICTURE: 0,             // allow selection of still pictures only. DEFAULT. Will return format specified via DestinationType
    VIDEO: 1,               // allow selection of video only, WILL ALWAYS RETURN FILE_URI
    ALLMEDIA : 2     } 
```

即使你可以通过这个

[http://docs.phonegap.com/en/1.4.0/phonegap_camera_camera.md.html#Camera](http://docs.phonegap.com/en/1.4.0/phonegap_camera_camera.md.html#Camera)

# android - 动态主题和自定义样式

> ID：13116069
> 
> 赞同：4
> 
> 时间：2012-10-29T04:58:29.810
> 
> 标签：android

我有一个可以在运行时选择的具有两个主题（深色和浅色）的应用程序。这行得通。我还有一个 ListView，其中的行可以具有三种不同布局中的一种，每种布局都有一种样式（例如，不同的颜色）。这也有效。但是我不能让这两个功能一起工作。我真的需要六种不同的样式，三个用于一个主题（深色），三个用于另一个（浅色），但我不知道如何根据当前主题为列表项选择样式，或者获得任何效果通过使用 XML 文件的其他方式。我的三个布局每个都指向一个设置颜色的自定义主题，但这会覆盖我设置的任何主题。主题只能包含“可样式化”的项目，所以我不能把我自己的自定义项目放在那里。可能有办法以编程方式执行此操作，但我希望以声明方式进行。有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-07T17:24:40.500

感谢[僚机](https://stackoverflow.com/users/1531054/wingman)的[提示](https://stackoverflow.com/questions/12338244/making-resources-theme-dependent)。我的情况涉及颜色，这有点复杂，所以我会在这里写下我的解决方案。

我有两个主题（浅色和深色），用户可以在“设置”屏幕中进行选择。我有一个`ListView`可以有两种类型的行（普通和注释），每种都有自己的样式。首先，每个布局都需要指向一个样式：

```
<TextView style="@style/PlainItemText" ... /> 
```

（或`NoteItemText`），我们需要定义样式：

```
<style name="PlainItemText">
    <item name="android:textSize">@dimen/list_item_font_size</item>
    <item name="android:textStyle">bold</item>
    <item name="android:textColor">?plainTextColor</item>
</style> 
```

无法固定文本颜色，因为它取决于所选主题。我们必须创建一个自定义属性并用问号引用它，如上所述。我们在 中定义属性`res/values/attrs.xml`：

```
<!-- Attributes we use to set the text color of the various list items. -->
<attr name="plainTextColor" format="reference|color"/>
<attr name="noteTextColor" format="reference|color"/> 
```

然后我们可以定义各种颜色。这里我们有两种样式和两种主题，所以我们需要四个颜色状态列表，每个都在`res/color`. 例如，这里是`res/color/plain_text_color_dark.xml`：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_window_focused="false" android:color="@android:color/white"/>

    <item android:state_selected="true" android:color="@android:color/black"/>
    <item android:state_focused="true" android:color="@android:color/black"/>
    <item android:state_pressed="true" android:color="@android:color/black"/>

    <item android:color="@android:color/white"/>
</selector> 
```

所有这些文件中选择/聚焦/按下的颜色都是相同的，因为它们在突出显示颜色之上。小心`state_window_focused`版本。它的行为不像宣传的那样，在所有情况下我都必须将其设置为默认颜色（上面的最后一行）。现在我们需要创建主题并将属性绑定到其中一种颜色。这些行进入`res/values/themes.xml`：

```
 <style name="Theme.Dark" parent="android:Theme">
     <item name="plainTextColor">@color/plain_text_color_dark</item>
     <item name="noteTextColor">@color/note_text_color_dark</item>
 </style>
 <style name="Theme.Light" parent="android:Theme.Light">
     <item name="plainTextColor">@color/plain_text_color_light</item>
     <item name="noteTextColor">@color/note_text_color_light</item>
 </style> 
```

最后，我们在运行时在 Activity 的`onCreate()`方法中选择一个主题，*然后*调用`super.onCreate()`：

```
if (isDarkTheme) {
    activity.setTheme(R.style.Theme_Dark);
} else {
    activity.setTheme(R.style.Theme_Light);
} 
```

请注意，我没有考虑 Holo 等较新的主题，因此我的应用在 Honeycomb 及更高版本上看起来很旧。我会在某个时候解决这个问题，但这不是回归。

* * *

在我的情况下，一个转折是一些活动有一个更大的标题栏以适应一些按钮。原则上我应该创建四个主题，一个用于窄标题的明暗和一个用于胖标题的明暗。但相反，我创建了一种混合风格：

```
<!-- Mix-in style for activities. -->
<style name="ButtonTitleBar">
    <item name="android:windowTitleSize">44dp</item> 
</style> 
```

并按程序将其添加到我正在使用的任何主题中。此代码在上述`setTheme()`调用之后立即执行：

```
if (buttonTitleBar) {
    // Mix in this other style.
    Resources.Theme theme = activity.getTheme();
    theme.applyStyle(R.style.ButtonTitleBar, true);
} 
```

我没有在任何地方看到这个文档，我不知道它是否合法，但代码`Activity.getTheme()`暗示它应该可以正常工作，并且它在我的所有测试中都有效。这有助于避免您可以在标准 Android 主题列表中找到的主题组合爆炸式增长。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-02-10T19:52:13.807

很久以前，Lawrence Kesteloot 在 2012 年发布了他的解决方案。现在是六年后，一个 Android 的新手，并尝试解决类似的问题：

*如何通过只交换一个主题来交换应用程序的整体风格？*

这是对劳伦斯问题如何组织两个可交换主题的概括。

**我想出了一个基于劳伦斯的解决方案，并更进一步。**

（并不是说它是完美的解决方案，而是一种改进。）

Lawrence 发现了用户定义属性的力量来实现这一目标。他根据当前选择的主题使用它们来处理颜色。

虽然这是有效的，但它仍然需要为每个属性定义属性。它不能很好地扩展。那么为什么不将属性捆绑到样式和主题中并使用相同的机制呢？

这会产生一个主主题，即定义子主题和样式。

**资源/值/attrs.xml**

```
<resources>
     ...
    <attr name="mainViewTheme" format="string"/>
    <attr name="asideViewTheme" format="string"/>
     ...
</resources> 
```

在定义属性来设置主题时，它没有特殊的格式。格式字符串可以做到这一点。

**res/values/styles.xml**

```
<style name="MasterTheme">
     ...
    <item name="mainViewTheme">@style/MainViewTheme</item>
    <item name="asideViewTheme">@style/AsideViewTheme</item>
     ...
</style>

<style name="MainTextTheme">
     ...
</style>

<style name="MainViewTheme">
     ...
</style> 
```

**资源/布局/main.xml**

```
<TextView
    android:theme="?mainViewTheme"
    ... 
```

通过交换主主题，所有风格都得到了调整。它仍然需要定义一些主题属性，然后完成一项强大的工作。不再需要为每个属性设置属性。

# ios - iCarousel：如何在自定义 uiview 中垂直居中图像

> ID：13116070
> 
> 赞同：0
> 
> 时间：2012-10-29T04:58:38.800
> 
> 标签：ios, center, icarousel

在我的屏幕（viewController A）中，我在底部有一个自定义的标签栏，所以所有图像都没有垂直居中。但是，当我转到模态视图然后返回 viewController A 时，所有图像都居中。你能解释一下情况吗？你能给我一个解决方案，在 viewController A 第一次出现时将所有图像居中吗？前： ![在此处输入图像描述](../Images/47164952ca322d86ee64a51bfc0701a3.png)

后： ![在此处输入图像描述](../Images/d4203d70a902b6307bc5ad4bd76e679d.png)

当然在函数中： - (UIView *)carousel:(iCarousel *)carousel viewForItemAtIndex:(NSUInteger)index reusingView:(UIView *)view，我设置view.contentMode = UIViewContentModeCenter; 编辑：由于关闭模态视图控制器后，所有图像都垂直居中，我目前的解决方案是：当视图控制器 A 第一次出现时，我呈现模态视图控制器，然后在没有动画的情况下将其关闭。这个动作是在没有用户通知的情况下透明地完成的，并给出我想要的结果。但是，这种解决方案显然不是最佳选择。最好我知道将图像设置为中心的正确方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T05:34:48.957

您是否尝试过使用 -setViewpointOffset 方法？

```
iCarousel.viewpointOffset = CGPointMake(0, targetOffset); 
```

# javascript - Slick 工具栏示例是 RubySource 的实现吗？

> ID：13116074
> 
> 赞同：1
> 
> 时间：2012-10-29T04:59:05.010
> 
> 标签：javascript, css, ruby-on-rails, wordpress, twitter-bootstrap

最近在RubySource[上闲逛](http://rubysource.com/twitter-bootstrap-less-and-sass-understanding-your-options-for-rails-3-1/)时，我看到他们实现了一个优雅的小工具栏，当您向下滚动页面时会出现该工具栏：

![在此处输入图像描述](../Images/60cbb2c2a56be175cbd554c3540b976a.png)

快速截屏：[http ://screencast.com/t/VnqE2BnzR6M1](http://screencast.com/t/VnqE2BnzR6M1)

据我所知，这是在他们的 WordPress 主题之上的自定义实现。是否有类似的东西已经包含在一个包中或一个演示这种工具栏实现的示例？

（我对 Rails 解决方案特别感兴趣，但考虑到任何初始预卷解决方案，这似乎相当容易适应。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T05:20:25.863

看看这篇文章：[http ://uxdesign.smashingmagazine.com/2012/09/11/sticky-menus-are-quicker-to-navigate/](http://uxdesign.smashingmagazine.com/2012/09/11/sticky-menus-are-quicker-to-navigate/)

最后，有几个类似行为的实现，这是使用 js/css 实现的，因为它是在客户端完成的。

# scala - 未解决的依赖关系：org.scala-tools.sbinary#sbinary_2.9.0;0.4.0：未找到

> ID：13116075
> 
> 赞同：5
> 
> 时间：2012-10-29T04:59:16.200
> 
> 标签：scala

我正在尝试一个名为[junto](https://github.com/parthatalukdar/junto)的工具包来进行标签传播。

当我编译它时，它会下载 Scala。

但是，在此过程中出现了未解决的依赖关系。

详细信息在这里：

```
:: problems summary ::

:::: WARNINGS
module not found: org.scala-tools.sbinary#sbinary_2.9.0;0.4.0

==== local: tried

/root/.ivy2/local/org.scala-tools.sbinary/sbinary_2.9.0/0.4.0/ivys/ivy.xml

==== typesafe-ivy-releases: tried

repo.typesafe.com/typesafe/ivy-releases/org.scala-tools.sbinary/sbinary_2.9.0/0.4.0/ivys/ivy.xml

==== Maven Central: tried

repo1.maven.org/maven2/org/scala-tools/sbinary/sbinary_2.9.0/0.4.0/sbinary_2.9.0-0.4.0.pom

==== sonatype-snapshots: tried

oss.sonatype.org/content/repositories/snapshots/org/scala-tools/sbinary/sbinary_2.9.0/0.4.0/sbinary_2.9.0-0.4.0.pom

::::::::::::::::::::::::::::::::::::::::::::::

::          UNRESOLVED DEPENDENCIES         ::

::::::::::::::::::::::::::::::::::::::::::::::

:: org.scala-tools.sbinary#sbinary_2.9.0;0.4.0: not found

::::::::::::::::::::::::::::::::::::::::::::::

:::: ERRORS
Server access Error: Connection timed out url=https://oss.sonatype.org/content/repositories/snapshots/org/sonatype/oss/oss-parent/7/oss-parent-7.jar

SERVER ERROR: Service Unavailable url=http://repo1.maven.org/maven2/org/scala-tools/sbinary/sbinary_2.9.0/0.4.0/sbinary_2.9.0-0.4.0.pom

Server access Error: Connection timed out url=https://oss.sonatype.org/content/repositories/snapshots/org/scala-tools/sbinary/sbinary_2.9.0/0.4.0/sbinary_2.9.0-0.4.0.pom

Server access Error: Connection timed out url=https://oss.sonatype.org/content/repositories/snapshots/org/apache/apache/7/apache-7.jar

Server access Error: Connection timed out url=https://oss.sonatype.org/content/repositories/snapshots/org/sonatype/oss/oss-parent/6/oss-parent-6.jar

:: USE VERBOSE OR DEBUG MESSAGE LEVEL FOR MORE DETAILS
unresolved dependency: org.scala-tools.sbinary#sbinary_2.9.0;0.4.0: not found
Error during sbt execution: Error retrieving required libraries
(see /root/.sbt/boot/update.log for complete log)
Error: Could not retrieve sbt 0.12.0 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T09:45:55.333

下载 jar 作为非托管依赖项：http: [//mvnrepository.com/artifact/org.scala-tools.sbinary/sbinary_2.9.0/0.4.0](http://mvnrepository.com/artifact/org.scala-tools.sbinary/sbinary_2.9.0/0.4.0)
并将其放在`lib_unmanaged`项目目录中的文件夹下。

或添加包含它的存储库：[http://repo1.maven.org/maven2/](http://repo1.maven.org/maven2/)
[http://repo1.maven.org/maven2/org/scala-tools/sbinary/sbinary_2.9.0/0.4.0/](http://repo1.maven.org/maven2/org/scala-tools/sbinary/sbinary_2.9.0/0.4.0/)

添加到`pom.xml`之间：

```
<repositories>
...
</repositories> 
```

以下：

```
 <repository>
        <id>central</id>
        <name>Maven Central</name>
        <url>http://repo1.maven.org/maven2</url>
    </repository> 
```

或者：

```
 <repository>
        <id>mvnrepository</id>
        <name>mvnrepository</name>
        <url>http://mvnrepository.com/artifact</url>
    </repository> 
```

如果您使用的是 sbt，则应添加`build.sbt`以下内容：

```
resolvers += "mvnrepository" at "http://mvnrepository.com/artifact/" 
```

或者：

```
resolvers += "central" at "http://repo1.maven.org/maven2/" 
```

# iphone - 将数据传递给 UITableView 中的详细视图

> ID：13116081
> 
> 赞同：1
> 
> 时间：2012-10-29T04:59:59.723
> 
> 标签：iphone, ios, uitableview

我想通过在 UITableView 和 detailview 之间传递数据来打印 detailview 中 label.text 上的 indexPath.row 编号，但我无法正确执行。

视图控制器.h

```
#import <UIKit/UIKit.h>
#import "SecondViewController.h"

@interface ViewController : UIViewController<UITableViewDataSource,UITableViewDelegate>{
    NSArray *tableItems;
    NSArray *images;

}

@property (nonatomic,retain) NSArray *tableItems;
@property (nonatomic,retain) NSArray *images;

@end 
```

视图控制器.m

```
#import "ViewController.h"
#import <QuartzCore/QuartzCore.h>
#import "SecondViewController.h"

@interface ViewController ()

@end

@implementation ViewController
@synthesize tableItems,images;
- (void)viewDidLoad
{
    [super viewDidLoad];
    tableItems = [[NSArray alloc] initWithObjects:@"Item1",@"Item2",@"Item3",nil];
    images = [[NSArray alloc] initWithObjects:[UIImage imageNamed:@"clock.png"],[UIImage imageNamed:@"eye.png"],[UIImage imageNamed:@"target.png"],nil];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section{
    return tableItems.count;
}
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{

    //Step 1:Check whether if we can reuse a cell
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"cell"];

    //If there are no new cells to reuse,create a new one
    if(cell ==  nil)
    { 
        cell = [[UITableViewCell alloc] initWithStyle:(UITableViewCellStyleDefault) reuseIdentifier:@"cell"];
        UIView *v = [[UIView alloc] init];
        v.backgroundColor = [UIColor redColor];
        cell.selectedBackgroundView = v;
        //changing the radius of the corners
        //cell.layer.cornerRadius = 10;

    }

    //Set the image in the row
    cell.imageView.image = [images objectAtIndex:indexPath.row];

    //Step 3: Set the cell text content
    cell.textLabel.text = [tableItems objectAtIndex:indexPath.row];

    //Step 4: Return the row
    return cell;

}

- (void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath{
    cell.backgroundColor = [ UIColor greenColor];
}
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{

    SecondViewController *secondViewController = [[SecondViewController alloc] initWithNibName:@"SecondViewController" bundle:nil];

    [secondViewController printRowNumber:indexPath.row+1];

    NSString *selectedRow = [tableItems objectAtIndex:indexPath.row+1];

    secondViewController.selectedRow = selectedRow;

    //[self.navigationController pushViewController:secondViewController animated:YES];
    [self presentViewController:secondViewController animated:YES completion:NULL];
}
@end 
```

SecondViewController.h

```
#import <UIKit/UIKit.h>
#import "ViewController.h"

@interface SecondViewController : UIViewController{
    IBOutlet UILabel *lbl;
    NSString *selectedRow;

}
@property (nonatomic,retain) UILabel *lbl;
@property (nonatomic,retain) NSString *selectedRow;

- (IBAction)goBack:(id)sender;

-(void) printRowNumber:(int)num;
@end 
```

第二视图控制器.m

```
#import "SecondViewController.h"

@interface SecondViewController ()

@end

@implementation SecondViewController

@synthesize lbl,selectedRow;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    //[self changeLabel:@"Hello"];
    //lbl.text = @"Hello";
    // Do any additional setup after loading the view from its nib.
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (IBAction)goBack:(id)sender{

    //ViewController *firstViewController = [[ViewController alloc] initWithNibName:nil bundle:nil];
    //firstViewController.delegate = self;
    [self dismissViewControllerAnimated:YES completion:NULL];
}

-(void) printRowNumber:(int)num{
    lbl.text = selectedRow;
    NSLog(@"%@",lbl.text);
    NSLog(@"%d",num);
}
-(void) changeLabel:(NSString*)str{
    lbl.text = str;
    //lbl.text = @"Hello";
}
@end 
```

不知道如何解决这个问题..需要一些帮助..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T05:15:02.723

我建议你只将当前视图控制器的值传递给下一个视图控制器，不要从当前控制器调用下一个控制器的功能。这将导致对象的释放。

只需传递价值并立即推动该视图控制器并享受价值。希望对你有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T05:16:49.013

> ```
> [secondViewController printRowNumber:indexPath.row+1];
> NSString *selectedRow = [tableItems objectAtIndex:indexPath.row+1];
> secondViewController.selectedRow = selectedRow; 
> ```

如果您在 didSelect 方法中查看这三行代码，您正在调用方法 printRowNumber 而不设置您的 selectedRow 字符串，因此它将不起作用，请尝试将顺序切换为：

> ```
> NSString *selectedRow = [tableItems objectAtIndex:indexPath.row+1];
> secondViewController.selectedRow = selectedRow; 
> ```
> 
> [secondViewController printRowNumber:indexPath.row+1];

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T05:24:59.303

在 SecondViewController 中调用`-(void) printRowNumber:(int)num`viewDidLoad 中的方法并`[secondViewController printRowNumber:indexPath.row+1];`从`rowDidSelect`firstViewController 中移除。

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    [self printRowNumber:[selectedRow intValue]];
} 
```

试试这个它可能对你有帮助....

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-29T05:26:55.653

在下面，您需要更改一小段代码。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{

  SecondViewController *secondViewController = [[SecondViewController alloc] initWithNibName:@"SecondViewController" bundle:nil];

  NSString *selectedRow = [tableItems objectAtIndex:indexPath.row+1];

  secondViewController.selectedRow = selectedRow;

  //[self.navigationController pushViewController:secondViewController animated:YES];
  [self presentViewController:secondViewController animated:YES completion:NULL];

  //this is the change you should do.
  [secondViewController printRowNumber:indexPath.row+1];

} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-29T05:30:31.953

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{

    SecondViewController *secondViewController = [[SecondViewController alloc] initWithNibName:@"SecondViewController" bundle:nil];

    NSString *selectedRow = [tableItems objectAtIndex:indexPath.row+1];

    secondViewController.selectedRow = selectedRow;

    [self presentViewController:secondViewController animated:YES completion:^{
        [secondViewController printRowNumber:indexPath.row+1];
    }];
} 
```

在您呈现控制器后，将创建 SecondViewController 中的视图。因此，如果您在展示控制器之前调用 -printRowNumber: ，您的标签仍未创建。

# jquery - 让 twitter bootstrap 使用 tag-it 的解决方案

> ID：13116082
> 
> 赞同：1
> 
> 时间：2012-10-29T05:00:04.170
> 
> 标签：jquery, jquery-ui, twitter-bootstrap, tag-it

如果我将 Tag-it 添加到 twitter 引导项目中，则字段宽度会随着我输入更多值而不断增长。我需要该字段保持我使用引导类指定的最大宽度。这个解决方案很接近[https://github.com/richardpoole/jquery-tagit/downloads](https://github.com/richardpoole/jquery-tagit/downloads)，但不是用最新的 Tag-it 构建的，因此 tag-it 的预输入功能似乎丢失了。

想法？

# eclipse - 如何在dos提示符下停止将android logcat写入文件

> ID：13116086
> 
> 赞同：0
> 
> 时间：2012-10-29T05:00:36.720
> 
> 标签：eclipse, dos, adb, android-logcat, android-2.2-froyo

我正在使用 Eclipse 使用**sdk 版本 2.2 api level 8.**在 Windows XP 中开发一个 android 应用程序。
在 Eclipse 中，logcat 有一些缓冲区限制。如果 logcat 数据超出限制，则将其截断。然后它只显示最后一部分。所以如果logcat数据大就意味着无奈。

因此，我试图通过在 dos 提示符下使用以下命令将 logcat 写入文件。

```
 adb logcat >D:\log.txt 
```

它可以工作，但我无法终止写入文件。

如何在 DOS 提示符下停止将 logcat 写入文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T16:26:17.577

有两种方法可以解决您的问题

1）取消控制台输出的大小限制（理论上无限大小）

> **转到 Window > Preferences > Run/Debug > Console 取消选中“限制控制台输出”（或者您可以增加控制台缓冲区大小）**

2) 要停止写入文件，请在 DOS 提示符下按**ctrl + c 。**事实上 ctrl + c 在 DOS 提示符下停止任何正在执行的命令。

# android - Android FLAG_DISMISS_KEYGUARD 关闭屏幕

> ID：13116091
> 
> 赞同：2
> 
> 时间：2012-10-29T05:01:55.730
> 
> 标签：android, screen, keyguard

我有一个活动，当它收到 screen_on 意图时会解除密钥保护。然而，屏幕总是在关闭键保护标志后几乎立即关闭。如果这是预期的行为？

# c - 问题在C中返回字符串位置

> ID：13116093
> 
> 赞同：1
> 
> 时间：2012-10-29T05:02:04.420
> 
> 标签：c, string

我正在尝试编写一个程序来检查用户输入的名称列表，以查看输入的新名称是否是列表的一部分。如果它不是列表的一部分，它应该返回 -1 到主目录，并打印没有找到的名称；如果它是列表的一部分，它应该返回 0 并打印名称的位置。

我遇到的问题是我将输入一个名称列表，然后输入一个名称进行搜索，除非该名称是列表中的第一个名称，否则它会显示未找到名称。此外，如果您查看代码，您会注意到我正在打印“找到的名称”而不是字符串位置，这仅仅是因为我还没有弄清楚如何做到这一点。非常感谢您帮助解决这个难题。

```
#include <stdio.h>
#include <conio.h>
#include <string.h>

#define MAX_NAMELENGTH 10
#define MAX_NAMES 5
void initialize(char names[MAX_NAMES][MAX_NAMELENGTH],int Number_entrys,int i);
int search(char names[MAX_NAMES][MAX_NAMELENGTH], int Number_entrys);
int main()
{

char names[MAX_NAMES][MAX_NAMELENGTH];
int i, Number_entrys,search_result;
 initialize(names,Number_entrys,i);
 search_result= search(names,Number_entrys);
 if (search_result==-1){
    printf("Found no names.\n");
}else{
 printf("Names found");
 }
getch();
return 0;
}

void initialize(char names[MAX_NAMES][MAX_NAMELENGTH],int Number_entrys,int i)
{

 printf("How many names would you like to enter to the list?\n");
 scanf("%d",&Number_entrys);

 if(Number_entrys>MAX_NAMES){
               printf("Please choose a smaller entry\n");
               }else{
  for (i=0; i<Number_entrys;i++){
 scanf("%s",names[i]);

 }
}   
}

int search(char names[MAX_NAMES][MAX_NAMELENGTH],int Number_entrys)
{
int x;
char new_name[MAX_NAMELENGTH];
printf("Now enter a name in which you would like to search the list for\n");

scanf("%s",new_name);

for(x = 0; x < Number_entrys; x++) 
{
if ( strcmp( new_name, names[x] ) == 0 )
{
    return x;
}

 } 
 return -1;        
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T05:09:09.700

因为你很早就脱离了你的 for 循环。这是您的代码格式更好且更易于阅读的代码。如果第一个 strcmp 未能返回 0，则整个搜索函数将中止并返回 -1；

```
for(x = 0; x < Number_entrys; x++)
{
     if ( strcmp( new_name, names[x] ) == 0 )
     {
        return x;
     }
     else
     {
         return -1;   
     }  
} 
```

这可能是您想要的：

```
for(x = 0; x < Number_entrys; x++)
{
     if ( strcmp( new_name, names[x] ) == 0 )
     {
        return x;
     }
}
return -1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T05:12:48.700

在函数搜索中 - 在 for 循环中 - 您已经编写了 if else 块，所以当第一个匹配不正确时，它将转到 else 部分。

修复可以是 - 允许 for 循环完全执行，使用一个标志来决定是否找到匹配，如果找到，存储 x

循环后检查标志并相应地返回 x。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T05:41:48.457

试试它正在运行的这段代码，我刚刚删除了，如果你的编译器需要它`<conio.h>`，你可以包含它。`getch()`

```
#include<stdio.h>
#include<string.h>

#define MAX_NAMELENGTH 10
#define MAX_NAMES 5
void initialize(char names[MAX_NAMES][MAX_NAMELENGTH],int Number_entrys);
int search(char names[MAX_NAMES][MAX_NAMELENGTH], int Number_entrys);
int main()
{

char names[MAX_NAMES][MAX_NAMELENGTH];
int i, Number_entrys,search_result;
do
{
 printf("How many names would you like to enter to the list?\n");
 scanf("%d",&Number_entrys);
}while(Number_entrys > MAX_NAMES);

 initialize(names,Number_entrys);
 search_result= search(names,Number_entrys);
 if (search_result==-1){
    printf("Found no names.\n");
}else{
 printf("Names found");
 }

return 0;
}

void initialize(char names[MAX_NAMES][MAX_NAMELENGTH],int Number_entrys)
{
 int i;
 for (i=0; i<Number_entrys;i++){
 scanf("%s",names[i]);
 }
}

int search(char names[MAX_NAMES][MAX_NAMELENGTH],int Number_entrys)
{
int x;
char new_name[MAX_NAMELENGTH];
printf("Now enter a name in which you would like to search the list for\n");
scanf("%s",new_name);

for(x = 0; x < Number_entrys; x++)
{
if ( strcmp( new_name, names[x] ) == 0 )
{

    return x;
 }

 }
 return -1;
} 
```

如果同意然后接受答案..它在我的编译器上工作正常

# r - traceback() for interactive and non-interactive R sessions

> ID：13116099
> 
> 赞同：32
> 
> 时间：2012-10-29T05:02:27.053
> 
> 标签：r, traceback

I observed a different between an interactive and non-interaction R session about `traceback()` which I do not understand. For the code below, it will produce an error, but in an interactive R session, I can see the traceback information, whereas if I save the code to `test.R` and call it via `Rscript test.R` or `R -f test.R`, I can no longer see the traceback:

```
f = function() {
  on.exit(traceback())
  1 + 'a'
}
f() 
```

In an interactive R session:

```
> f = function() {
+   on.exit(traceback())
+   1 + 'a'
+ }
> f()
Error in 1 + "a" : non-numeric argument to binary operator
1: f() 
```

Non-interactive execution:

```
$ Rscript test.R 
Error in 1 + "a" : non-numeric argument to binary operator
Calls: f
No traceback available 
Execution halted 
```

I did not see an explanation in `?traceback`, and I'm wondering if there is a way to enable traceback for non-interactive R sessions. Thanks!

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-10-29T09:58:37.857

With default values of its arguments, `traceback()` will look for an object named `.Traceback` in the `baseenv()` for information on the call stack. It looks (from `src/main/errors.c`) like `.Traceback` is only created if, among other conditions, `R_Interactive || haveHandler`, suggesting that this object is not created during non-interactive sessions. If there is no object named `.Traceback`, you will get the message "No traceback available".

However, by passing a non-NULL value to the `x` argument of `traceback()`, one can obtain information about the call stack from a non-interactive session. With a non-zero integer value (indicating the number of calls to skip in the stack), c-level functions (`R_GetTraceback`) are called to investigate the call stack instead of looking in `.Traceback`.

So there are a couple ways to obtain traceback information in a non-interactive session:

```
f = function() {
  on.exit(traceback(1))
  1 + 'a'
}
f() 
```

Or, setting `options` as Brandon Bertelsen suggested

```
options(error=function()traceback(2)) 
```

The different values passed to `x` in the two examples account for the different number of functions to skip

1.  In the `on.exit` example, `traceback(1)` skips the call to `traceback()`.

2.  In the example setting `options`, there is an extra anonymous function that calls `traceback()` which should/could also be skipped.

In the example in the OP, there's not much more information gained by using `traceback()` compared to the automatic traceback provided in the case of an error in a non-interactive session. However, with functions that take (and are passed) arguments, using `traceback()` will be much more informative than the standard presentation of the call stack in the non-interactive session.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-09-21T07:04:35.877

There is also the possibility to dump debugging information and load them later on. (See good `?debugger` help pages and comments on the topic)

via e.g.:

```
options(error = quote(dump.frames("testdump", TRUE))) 
```

...

```
load("testdump.rda")
debugger(testdump) 
```

or

```
options(error = quote({dump.frames(to.file = TRUE); q(status = 1)})) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-10-14T12:20:31.933

[BenBarnes](https://stackoverflow.com/a/13119318/2361465)'s answer and dshepherd's comment are life saving. I will add one more parameter to avoid clogging up the screen in case one of the parameters is very big.

```
options(error=function(){traceback(2,max.lines=3);if(!interactive())quit("no",status=1,runLast=FALSE)}) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-17T08:28:56.697

The problem with `options(error=function()traceback(2))` is that it does not stop the script execution, which is really really dangerous.

To avoid that you can use:

```
options(error = function() { 
  traceback(2); 
  options(error = NULL); 
  stop("exiting after script error") 
}) 
```

which will properly print the stack trace, then exit properly.

# android - 我可以在 PowerManagerService.java 中控制 android 设备屏幕吗？

> ID：13116100
> 
> 赞同：1
> 
> 时间：2012-10-29T05:02:28.427
> 
> 标签：android, controls, screen

我有一个关于 android 设备屏幕控制的问题。我想在android框架上实现的是：取决于特定的应用程序，我可以控制屏幕是否打开。也就是说，如果我不想要一些应用程序，比如说AngerBirds，让屏幕从状态关闭到打开，我可以做到吗？

从PowerManagerService.java的源代码：我发现有一行代码：

```
 `policy.screenTurningOn(mScreenOnListener);` 
```

那么，这是打开屏幕的代码吗？

然后如果我在这里添加一些条件，例如，如果当前打开屏幕的命令来自应用程序AngryBird，那么我就忽略掉，让屏幕保持关闭状态。这可能吗？

如果可能的话，我可以得到应用程序上下文和打开屏幕的原因吗？

# php - 如何在 PHP 中的最后一个子节点之后附加 XML Childnode

> ID：13116101
> 
> 赞同：0
> 
> 时间：2012-10-29T05:02:37.473
> 
> 标签：php, xml

## 我的 XML 文件：

```
<?xml version="1.0"?>
<file>
    <filename>RLR7610_2012090200293-1.csv</filename>
    <filename>RLR7610_2012090200293-1.pdf</filename>
</file> 
```

## 我的 PHP 代码：

```
function generateXML($_datetodelete, $_filenames){
  $xmlFile = new DOMDocument();      
  $xmlFile->load($this->achive_folder.$_datetodelete.".xml");
  $file = $xmlFile->documentElement;

  foreach($_filenames as $filename) {
    $node_filename = $xmlFile->createElement("filename");
    $node_filename->appendChild($xmlFile->createTextNode($filename));                
    $file->appendData($node_filename);
    $xmlFile->saveXML();
  }
} 
```

我想在最后一个标签之后循环并附加子节点`<filename>`及其文本，但目前它替换所有旧标签`<filename>`而不是附加。我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T12:25:42.920

如果您想在最后将新子项附加到您的 xml 文件中，请使用以下代码。

```
<?php
    //Load the scores XML file
    $xmlFile = new DOMDocument();
    $xmlFile -> load('file.xml');
    $files = $xmlFile -> getElementsByTagName('file');
    $newfile = $xmlFile -> createElement("filename", "RLR7610_2012090200293-1.xml");
    $files -> item(0) -> appendChild($newfile);
    $xmlFile -> save('file.xml');

    // View XML File Content
    if (file_exists('file.xml')) 
    {
        $xml = simplexml_load_file('file.xml');
        print_r($xml);
    } else
        exit('Failed to Open');
?> 
```

# android - 引用片段的父活动的最佳实践？

> ID：13116104
> 
> 赞同：14
> 
> 时间：2012-10-29T05:03:02.500
> 
> 标签：android

我最近一直在处理片段，我只是好奇使用对片段父活动的引用的最佳实践是什么。继续调用 getActivity() 还是在 onActivityCreated 回调上初始化 parentActivity 变量会更好。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-29T05:19:01.110

这实际上包含在 Fragments 的官方 Android 文档中。当您需要父活动的上下文（例如 Toast、Dialog）时，您可以调用`getActivity()`. 当您需要在 Fragment 的接口中调用回调方法时，您应该使用在`onAttach(...)`.

```
public static class FragmentA extends ListFragment {
    ExampleFragmentCallbackInterface mListener;
    ...
    @Override
    public void onAttach(Context context) {
        super.onAttach(context);
        try {
            mListener = (ExampleFragmentCallbackInterface ) context;
        } catch (ClassCastException e) {
            throw new ClassCastException(context.toString() + " must implement ExampleFragmentCallbackInterface ");
        }
    }
    ...
} 
```

[来源](http://developer.android.com/guide/components/fragments.html#EventCallbacks)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-29T05:14:28.530

getActivity() 是最好的。您无需维护要存储的变量（始终，直到应用程序循环！）。如果需要，调用该方法并使用！:)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-11-22T01:40:22.950

如果您在从某个活动调用的片段中，要获取对父活动的引用，您可以在 onViewCreated() 或片段的后续挂钩方法中直接调用它，这只是为了确保父活动不为空

```
getActivity() 
```

如果你真的想确定你需要先检查

```
if (getActivity() != null){ // then your logic with getActivity()} 
```

# php - 如何在 mysql 中使用 Flex/PHP 保存带有一些链接单词的文本？

> ID：13116105
> 
> 赞同：0
> 
> 时间：2012-10-29T05:03:10.283
> 
> 标签：php, mysql, apache-flex, flash-builder

我有一个 CMS，我可以在其中插入带有指向我最喜欢的网站的直接链接的文本，以便在 FrontPage 中查看，但我只想显示它们的名称（粗体或彩色）而不是 URL。我该怎么做！？我正在使用带有其他信息的数据库并且效果很好，但我没有实现这部分。任何解决方案！？提前致谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T05:29:32.050

Try this.

```
<?php
function getTextBetweenTags($string, $tagname) {
    $pattern = "/<$tagname ?.*>(.*)<\/$tagname>/";
    preg_match($pattern, $string, $matches);    
    return $matches[0];
}

$str = '<a href="google.pt" target="_blank"><span style="text-decoration: underline;">Some</span></a>';
$txt = getTextBetweenTags($str, "a");
echo $txt;
?> 
```

# objective-c - 在 iPhone 中将多种日期格式转换为单一格式

> ID：13116110
> 
> 赞同：3
> 
> 时间：2012-10-29T05:03:29.857
> 
> 标签：objective-c, ios, nsdateformatter

我从 html 源代码生成 PDF。我逐行阅读了所有文本。我需要从整个文档中获取所有日期。我确实使用正则表达式获取所有日期。问题是我需要将可以采用任何日期格式（dd-MM-yyyy 或 yyyy-mm-dd 或 dd/mm/yyyy）的字符串转换为特定的日期格式（dd MMMM yyyy）。我被这个困住了。任何帮助都会很棒。我需要阅读包含的日期格式字符串。这是我的代码...

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *fileDocumentDirectorySavePath = [documentsDirectory stringByAppendingPathComponent:@"Sample.txt"];

NSFileManager *fm = [NSFileManager defaultManager];
if (![fm fileExistsAtPath:fileDocumentDirectorySavePath])
    [fm copyItemAtPath:fileBundlePath toPath:fileDocumentDirectorySavePath error:nil];

NSString* fileContents = 
[NSString stringWithContentsOfFile:fileDocumentDirectorySavePath 
                          encoding:NSUTF8StringEncoding error:nil];

// first, separate by new line
NSArray* allLinedStrings = 
[fileContents componentsSeparatedByCharactersInSet:
 [NSCharacterSet newlineCharacterSet]];
NSString* strsInOneLine;
NSArray *DateArray;
// NSString * regularExpression = @"([1-9]|0[1-9]|[12][0-9]|3[01])(st|nd|rd|th) \\w* (19|20)\\d\\d |(\\d{2}-\\d{2}-\\d{4})|(\\d{4}-\\d{2}-\\d{2})|(\\d{2}/\\d{2}/\\d{4})|(\\d{4}/\\d{2}/\\d{2})";

NSString * regularExpression = @"([1-9]|0[1-9]|[12][0-9]|3[01])(st|nd|rd|th) \\w* (19|20)\\d\\d |(\\d{2}-\\d{2}-\\d{4})|(\\d{4}-\\d{2}-\\d{2})|(\\d{2}/\\d{2}/\\d{4})|(\\d{4}/\\d{2}/\\d{2})|((31(?!\\ (Feb(ruary)?|Apr(il)?|June?|(Sep(?=\\b|t)t?|Nov)(ember)?)))|((30|29)(?!\\ Feb(ruary)?))|(29(?=\\Feb(ruary)?\\ (((1[6-9]|[2-9]\\d)(0[48]|[2468][048]|[13579][26])|((16|[2468][048]|[3579][26])00)))))|(0?[1-9])|1\\d|2[0-8])\\ (Jan(uary)?|Feb(ruary)?|Ma(r(ch)?|y)|Apr(il)?|Ju((ly?)|(ne?))|Aug(ust)?|Oct(ober)?|(Sep(?=\\b|t)t?|Nov|Dec)(ember)?)\\ ((1[6-9]|[2-9]\\d)\\d{2})";
NSError *error = NULL;
NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:regularExpression
                                                                       options:NSRegularExpressionCaseInsensitive
                                                                         error:&error];
NSString *resultString;

for (int i = 0; i < [allLinedStrings count]; i++) {
           strsInOneLine = [allLinedStrings objectAtIndex:i];
    DateArray = [regex matchesInString:strsInOneLine options:0 range:NSMakeRange(0, [strsInOneLine length])];
    for (NSTextCheckingResult* result in DateArray)
    {
        resultString = [strsInOneLine substringWithRange:result.range];
        NSLog(@"RESULT STRING ===== >%@",resultString);

        NSDateFormatter *dateFormatter = [[NSDateFormatter alloc]init];
        [dateFormatter setDateFormat:@"dd-MM-yyyy"];
        NSDate *yourDate = [dateFormatter dateFromString:resultString];
        NSLog(@"NEW DATE ====== > %@",yourDate);
        NSString *myDateStr;
        [dateFormatter setDateFormat:@"dd MMMM yyyy"];
        myDateStr = [dateFormatter stringFromDate:yourDate];
        NSLog(@"NEW DATE STRING ====== > %@",myDateStr);

    }

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T08:36:41.300

没有直接的方法可以得到这个。但是，在大多数情况下，有一个类似这样的解决方法。您所要做的就是将所有可能的日期格式化程序添加到下面`dateFormatterList`。

```
- (NSString *)dateStringFromString:(NSString *)sourceString destinationFormat:(NSString *)destinationFormat {

    NSString *convertedDateString = nil;
    NSArray *dateFormatterList = [NSArray arrayWithObjects:@"yyyy-MM-dd'T'HH:mm:ss'Z'", @"yyyy-MM-dd'T'HH:mm:ssZ",
                                  @"yyyy-MM-dd'T'HH:mm:ss", @"yyyy-MM-dd'T'HH:mm:ss.SSS'Z'",
                                  @"yyyy-MM-dd'T'HH:mm:ss.SSSZ", @"yyyy-MM-dd HH:mm:ss",
                                  @"MM/dd/yyyy HH:mm:ss", @"MM/dd/yyyy'T'HH:mm:ss.SSS'Z'",
                                  @"MM/dd/yyyy'T'HH:mm:ss.SSSZ", @"MM/dd/yyyy'T'HH:mm:ss.SSS",
                                  @"MM/dd/yyyy'T'HH:mm:ssZ", @"MM/dd/yyyy'T'HH:mm:ss",
                                  @"yyyy:MM:dd HH:mm:ss", @"yyyyMMdd", @"dd-MM-yyyy",
                                  @"dd/MM/yyyy", @"yyyy-MM-dd", @"yyyy/MM/dd",
                                  @"dd MMMM yyyy", @"MMddyyyy", @"MM/dd/yyyy",
                                  @"MM-dd-yyyy", @"d'st' MMMM yyyy",
                                  @"d'nd' MMMM yyyy", @"d'rd' MMMM yyyy",
                                  @"d'th' MMMM yyyy", @"d'st' MMM yyyy",
                                  @"d'nd' MMM yyyy", @"d'rd' MMM yyyy",
                                  @"d'th' MMM yyyy", @"d'st' MMMM",
                                  @"d'nd' MMMM", @"d'rd' MMMM",
                                  @"d'th' MMMM", @"d'st' MMM",
                                  @"d'nd' MMM", @"d'rd' MMM",
                                  @"d'th' MMM", @"MMMM, yyyy",
                                  @"MMMM yyyy", nil];

    //sourceString = @"20/11/2012";
    //destinationFormat  = @"dd MMMM yyyy";

    if (sourceString) {

        NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];

        for (NSString *dateFormatterString in dateFormatterList) {

            [dateFormatter setDateFormat:dateFormatterString];
            NSDate *originalDate = [dateFormatter dateFromString:sourceString];

            if (originalDate) {

                [dateFormatter setDateFormat:destinationFormat];
                convertedDateString = [dateFormatter stringFromDate:originalDate];
                NSLog(@"Converted date String is %@", convertedDateString);
                break;
            }
        }
        [dateFormatter release];
    }

    return convertedDateString;
} 
```

将此添加到您的班级并将其用作，

```
NSLog(@"%@", [self dateStringFromString:@"2nd August 2012" destinationFormat:@"dd-MM-yyyy"]); 
```

输出：`02-08-2012`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-02T19:17:56.620

Javascript 可以很好地完成这项工作，现在您可以直接从 Swift 调用它！（我也确定目标 C）

例子：

```
import JavaScriptCore

let context = JSContext()
let result: JSValue = context.evaluateScript("Date.parse('2016/5/6')")
let date: NSDate = result.toDate() 
```

繁荣！...以及从变量传递日期的示例：

```
let randomFormatDate = "2016-05-06"
let jsDate = context.evaluateScript("Date.parse('\(randomFormatDate)')")
let cleanDate = jsDate.toDate() 
```

# opencl - 关于clCreateImage2D的使用

> ID：13116111
> 
> 赞同：0
> 
> 时间：2012-10-29T05:03:43.200
> 
> 标签：opencl

通常 clCreateImage2D 中的第二个参数是标志 CL_MEM_READ 等。但我在其中一个示例代码中发现它为 0（P. no: 80, Heterogeneous Computing using openCL ）：

```
 //Create space for the source image on the device
 cl_mem bufferSourceImage = clCreateImage2D(
 context,0,&format, width,height,0,NULL,NULL); 
```

为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T09:03:04.860

cl_mem_flags 是位域：

cl.h

```
/* cl_mem_flags - bitfield */
#define CL_MEM_READ_WRITE                           (1 << 0)
#define CL_MEM_WRITE_ONLY                           (1 << 1)
#define CL_MEM_READ_ONLY                            (1 << 2)
#define CL_MEM_USE_HOST_PTR                         (1 << 3)
#define CL_MEM_ALLOC_HOST_PTR                       (1 << 4)
#define CL_MEM_COPY_HOST_PTR                        (1 << 5)
// reserved                                         (1 << 6)    
#define CL_MEM_HOST_WRITE_ONLY                      (1 << 7)
#define CL_MEM_HOST_READ_ONLY                       (1 << 8)
#define CL_MEM_HOST_NO_ACCESS                       (1 << 9) 
```

这里，0 是 CL_MEM_READ_WRITE 的默认值：

> 用于指定分配和使用信息的位字段，例如应该用于分配缓冲区对象的内存区域以及如何使用它。下表描述了标志的可能值。如果为标志指定的值为 0，则使用默认值，即 CL_MEM_READ_WRITE。来自：[clCreateBuffer](http://www.khronos.org/registry/cl/sdk/1.2/docs/man/xhtml/clCreateBuffer.html)

# android - WebViewClassic NullPointerException

> ID：13116112
> 
> 赞同：3
> 
> 时间：2012-10-29T05:03:48.623
> 
> 标签：android, nullpointerexception

我的应用程序被强制关闭，但从查看堆栈跟踪来看，我的代码实际上并没有被引用，而且我没有使用 WebViewClassic 对象。有任何想法吗？

```
?:??: W/?(?): java.lang.NullPointerException
?:??: W/?(?):   at android.webkit.WebViewClassic.setBaseLayer(WebViewClassic.java:4447)
?:??: W/?(?):   at android.webkit.WebViewClassic.setNewPicture(WebViewClassic.java:7825)
?:??: W/?(?):   at android.webkit.WebViewClassic$PrivateHandler.handleMessage(WebViewClassic.java:7211)
?:??: W/?(?):   at android.os.Handler.dispatchMessage(Handler.java:99)
?:??: W/?(?):   at android.os.Looper.loop(Looper.java:137)
?:??: W/?(?):   at android.app.ActivityThread.main(ActivityThread.java:4745)
?:??: W/?(?):   at java.lang.reflect.Method.invokeNative(Native Method)
?:??: W/?(?):   at java.lang.reflect.Method.invoke(Method.java:511)
?:??: W/?(?):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
?:??: W/?(?):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
?:??: W/?(?):   at dalvik.system.NativeStart.main(Native Method) 
```

# html - 如何在不编写两次代码的情况下两次创建相同的引导下拉菜单

> ID：13116113
> 
> 赞同：0
> 
> 时间：2012-10-29T05:03:47.943
> 
> 标签：html, twitter-bootstrap, drop-down-menu

我正在我的页面中创建引导下拉菜单..我需要为不同的元素创建相同的下拉菜单...我创建了一个下拉菜单，如下所示

```
 <ul>
    <li class="dropdown" id="menu5"><a class="dropdown-toggle" data-toggle="dropdown" href="#menu5"> Settings
    <b class="caret"></b>

</a>
            <ul class="dropdown-menu">
                <li><a href="" id="kwdList">Content</a></li>
                <li><a>Add
                        User</a></li>
                <li><a href="" id="vwUserHier">
                        search</a></li>
                <li><a  href="">Edit</a></li>
            </ul></li>
    </ul> 
```

一个菜单创建正确，但我想创建具有相同选项的其他菜单我应该怎么做...

有没有办法重用下拉菜单类的内容......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T05:16:27.397

您是否尝试过 JQuery 克隆方法？您可能必须将其与 'true' 选项一起使用。

# extjs - Ext JS 3.0.0 - 使用 Ext.LiveGrid 无法将数据从数据存储加载到网格

> ID：13116114
> 
> 赞同：1
> 
> 时间：2012-10-29T05:04:04.527
> 
> 标签：extjs, extjs3

我正在使用 livegrid 查看来自服务器数据存储的所有数据，但问题是数据存储可以加载（我正在使用 Firebug 并检查控制台选项卡）但在我的实时网格中无法查看加载数据存储中的所有数据并说**“没有数据在状态栏显示'**，请帮我解决这个问题。

我正在使用 Ext JS 3.0.0 并将 Ext.ux.Livegrid 添加到我的应用程序中。

这是我的实时网格配置的代码：

```
 var myView = new Ext.ux.grid.livegrid.GridView({
            nearLimit: 100,
            loadMask: {
                msg: 'Buffering. Please wait...'
            }
        });

        var livegrid = new Ext.ux.grid.livegrid.GridPanel({
            enableDragDrop: false,
            cm: new Ext.grid.ColumnModel([
            new Ext.grid.CheckboxSelectionModel(),
            new SharpJs.RowNumberer()
            , { header: 'Nama Kegiatan', dataIndex: 'RCSA_NAME', sortable: true, allowBlank: false }
            , { header: 'Unit', dataIndex: 'AUDITEE_NAME', sortable: true, allowBlank: false }
            , { header: 'Risk Owner', dataIndex: 'NAMA_RISKOWNER', sortable: true, allowBlank: false }
            , { header: 'Kode Kegiatan', dataIndex: 'RCSA_CODE', sortable: true, allowBlank: false, maxLength: 100 }
            , { header: 'Periode', dataIndex: 'RISK_PERIOD_NAME', sortable: true, allowBlank: true }
            , { header: 'SMART', dataIndex: 'Id', renderer: smartRenderer }
            , { header: 'Kajian Risiko', dataIndex: 'Id', renderer: kajRisiko }
            , { header: 'Kesimpulan', dataIndex: 'Id', renderer: sumRenderer }
            , { header: 'Pengesahan', dataIndex: 'LEGITIMATION_NO', renderer: pengRenderer }
            , { header: 'Verifikasi', dataIndex: 'VERIFICATION_NO', renderer: verRenderer }
            , { header: 'Mentor', dataIndex: 'AUDITEE_EMPLOYEE_NAME', renderer: coachRenderer }
            , { header: 'Rollback', dataIndex: 'Id', renderer: rollRenderer }
            , { header: 'Jenis Anggaran', dataIndex: 'TBL_PAR_BUDGET_TYPE_NAME', sortable: true, allowBlank: false }
            , { header: 'Anggaran', dataIndex: 'ANGGARAN', sortable: true, allowBlank: false, renderer: Ext.util.Format.indMoney }
        , { header: 'Verifikasi', dataIndex: 'VERIFIKASI', sortable: true, allowBlank: true }
        , { header: 'Tanggal Pembuatan', dataIndex: 'RCSA_SESSION_DATE', sortable: true, allowBlank: true, renderer: SharpJs.dateRenderer }
            , { header: 'Created Date', dataIndex: 'CREATED_DATE', sortable: true, renderer: SharpJs.dateRenderer }
            , { header: 'Created By', dataIndex: 'CREATED_BY', sortable: true }
            , { header: 'Modified Date', dataIndex: 'MODIFIED_DATE', sortable: true, renderer: SharpJs.dateRenderer }
            , { header: 'Modified By', dataIndex: 'MODIFIED_BY', sortable: true }
        ]),
            loadMask: {
                msg: 'Loading...'
            },
            title: 'Daftar Kajian Kegiatan Proyek',
            height: SharpJs.FormHeight,
            width: SharpJs.FormWidth,
            stripeRows: true,
            store: new Ext.ux.grid.livegrid.Store({
                autoLoad: true,
                url: SharpJs.RootUrl + "TblProjRcsas",
                bufferSize: 300,
                reader: new Ext.ux.grid.livegrid.JsonReader({
                    root: 'resultset',
                    versionProperty: 'version',
                    totalProperty: 'totalCount',
                    fields: [
        'Id'
        , 'AUDITEE'
        , 'AUDITEE_ID'
        , 'AUDITEE_NAME'
        , 'TBL_PAR_PROJ_RISK_PERIOD'
        , 'RISK_PERIOD_ID'
        , 'RISK_PERIOD_NAME'
        , 'RCSA_CODE'
        , 'RCSA_NAME'
        , 'START_DATE'
        , 'END_DATE'
        , 'CREATED_DATE'
        , 'CREATED_BY'
        , 'MODIFIED_DATE'
        , 'MODIFIED_BY'
        , 'ANGGARAN'
        , 'VERIFIKASI'
        , 'TBL_PAR_BUDGET_TYPE_ID'
        , 'TBL_PAR_BUDGET_TYPE_NAME'
        , 'RCSA_SESSION_DATE'
        , 'RCSA_SESSION_TIME'
        , 'RCSA_SESSION_LOCATION'
        , 'VERIFICATION_NO'
        , 'VERIFICATION_DATE'
        , 'VERIFICATION_OWNER'
        , 'LEGITIMATION_NO'
        , 'LEGITIMATION_DATE'
        , 'LEGITIMATION_OWNER'
        , 'AUDITEE_RISKOWNER_ID'
        , 'NAMA_RISKOWNER'
        , 'SURAT_RISKOWNER'
        , 'LEGITIMATION_EXA_STATUS'
        , 'LEGITIMATION_APPROVE_STATUS'
        , 'VERIFICATION_MRF_STATUS'
        , 'VERIFICATION_MRO_STATUS'
        , 'VERIFICATION_KSMR_STATUS'
        , 'AUDITEE_EMPLOYEE_AUDITEE_ID'
        , 'AUDITEE_EMPLOYEE_ID'
        , 'AUDITEE_EMPLOYEE_NAME'
        ],
}),
                    sortInfo: { field: 'Id', direction: 'ASC' },
                    baseParams: {skip:0, take:15}
                }),
            selModel: new Ext.ux.grid.livegrid.RowSelectionModel(),
            view: myView,
            bbar: new Ext.ux.grid.livegrid.Toolbar({
                    view: myView,
                    displayInfo: true
                })
            });

            livegrid.render('DataGrid'); 
```

这是我的实时网格，没有要显示的数据：

[http://i.stack.imgur.com/5qtAd.jpg](http://i.stack.imgur.com/5qtAd.jpg)

谢谢你的帮助..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T17:49:10.133

您的 JsonReader 根属性设置为结果集，但是，我看不到您将其添加到返回的 json 的位置。

返回的 json 构造应遵循 root 参数的规则：[http ://docs.sencha.com/ext-js/3-4/#!/api/Ext.data.JsonReader-cfg-root](http://docs.sencha.com/ext-js/3-4/#!/api/Ext.data.JsonReader-cfg-root)

并且应该包括指定的元素。例子：

```
{resultset:[{unit:"1"},{unit:"2"}]}; 
```

如果缺少根元素，则存储不知道从什么读取数组。

# iphone - iphone中的字体给出了一个图像

> ID：13116117
> 
> 赞同：0
> 
> 时间：2012-10-29T05:04:16.617
> 
> 标签：iphone, email, fonts

我在地址电子邮件中的姓名后添加了字符 。在 Gmail 或 Ubuntu 上，它确实显示为 。但是在 iPhone 上阅读我的电子邮件的人会得到一个小野猪头！

从我在互联网上阅读的内容来看，iphone 默认使用的是 Helvetica 字体。并且蜱不是这种字体的公猪。

有谁知道这可能来自哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T03:11:50.643

我向一位朋友询问了您的图标问题，他让我研究了适用于 iOS 设备的流行表情插件。果然，浏览完图标，就有了你说的小野猪头。

该插件称为 Emoji，它本质上为 iOS 消息应用程序添加了一个额外的键盘。向您报告此问题的用户是否有可能在他们的设备上安装了该插件？这可能是图标的来源。如果您需要有关此问题的更多信息，请告诉我。我希望你能解决它！

# c# - 有什么东西可以让 T4 代码更……干净吗？

> ID：13116123
> 
> 赞同：8
> 
> 时间：2012-10-29T05:04:47.100
> 
> 标签：c#, unit-testing, refactoring, code-generation, t4

我在 T4 模板中塞进了一个相当复杂的东西。基本上我采取类似的东西

> {=foo=} 更多文字...

并将其转换为类（视图），如下所示：

```
public class MyView
{
  public string foo{get;set;}
  public string Write()
  {
    return foo+@" more text...";
  }
} 
```

生成的代码当然比这复杂得多。无论如何，T4 模板现在有超过 600 行代码，而且很快就变得难以管理。我认为主要问题是混合代码和“内容”（即静态代码）。我不太确定如何彻底解决这个问题（当然不会影响生成的代码）。除了简单地测试 T4 执行错误之外，我也没有看到任何可行的方法来对我的 T4 代码进行单元测试。当然，测试它生成的代码似乎是几乎不可能完成的任务。

是否有任何“模型视图”类型的框架或技术可以用来使我的 T4 模板代码更干净？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T19:52:01.910

恕我直言，编写复杂模板时最重要的两个概念是

1.  **分离模型和视图**- 这有助于将模板逻辑保持在最低限度（通常是维护问题的原因）。我个人认为这不需要一个框架，它只需要你去做。
2.  **Partial 是你的朋友**——我通常使用 T4 从模型生成骨架代码。特定的行为可能不值得在模型中投入精力，最好经常通过使用部分类或方法来允许该行为进入。

不那么重要但很好

1.  **使代码可搜索**- 我不依赖 T4 插件，因为我发现它们都不够好，由于缺少 IntelliSense 来导航代码，我必须使代码可搜索。它可以很简单，而不是调用 Column 属性名称，我将其称为 ColumnName。
2.  **在输出中插入“标签”** - 更容易找到生成该部分输出的代码。

分离模型/视图的示例：

```
<#
    // Model for Dependency Pooperties
    Model = new []
    {
        new ClassDefinition ("MyDataGrid")
            {
                P ("CultureInfo"            , "CultureInfo"),
                P ("Pen"                    , "CellBorderPen"),
                P ("IEnumerable<object>"    , "Rows"),
                C ("WColumnDefinition"      , "Columns"),
            },
    };
#>
// Include the view
<#@ include file="..\T4\DependencyProperties.ttinclude" #> 
```

然后视图遍历模型并生成依赖属性。

然后依赖属性的行为被实现为部分方法

```
 partial void Changed_Columns(
        ObservableCollection<WColumnDefinition> oldValue, 
        ObservableCollection<WColumnDefinition> newValue
        )
    {
        HookUpColumns(oldValue, null);
        HookUpColumns(newValue, this);            
    } 
```

请注意，将这种特定行为放入模型中会使模型显着复杂化。

最后; 即使是一个称职的程序员也需要时间来胜任地编写元程序。在我找到一种我认为可以维护的风格之前，我进行了几次尝试，但对我来说，这是值得的，因为我能够更快地交付质量。

我希望这有帮助...

PS。我认为没有人会争辩说 T4 曾经很优雅，但它仍然非常有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T03:53:42.987

经过漫长的旅程，我终于在我的 T4 模板中签入了第一个单元测试。基本上，我所做的是抽象出一个“视图”（实际的 T4 模板）和“逻辑”（生成代码，但实际上并不输出它并且不依赖于 T4）

然后我更进一步，并使用了一个大[技巧](https://stackoverflow.com/questions/13171344/is-this-hack-a-defined-behavior-for-t4)来制作它，以便我的逻辑文件在 T4 之外编译。这具有很好的效果，使智能感知和编译器错误起作用。它还允许我通过简单地引用项目来从单元测试中访问我的逻辑类。

我在博客上写了一篇包含代码示例（之前/之后）和示例单元测试[的文章](http://lastyearswishes.com/blog/view/50ab282bd1f1a567e1160b95)，如果你想详细了解如何做的话。

# php - 通过未加密的 JSON 发送人名的足够安全的方法

> ID：13116129
> 
> 赞同：1
> 
> 时间：2012-10-29T05:06:11.293
> 
> 标签：php, android, json, encryption, ssl

我刚刚完成了为当地健身房开发的应用程序，并且由于我的测试几乎完成，并且版本 1 也即将完成，我开始考虑保护该应用程序免受任何 MITM 类型的攻击。虽然我知道有人甚至想要 MITM 这个应用程序（而不是银行应用程序）的机会几乎为零，但我仍然希望在安全方面有点主动。

虽然应用程序不发送/接收用户信息（来回发送的数据是体重、次数、时间、用户签到的班级名称等），但我正在传输所有活跃健身房成员的姓名（用于自动完成文本框）。我想加密名称，但我发现很难将我的代码从 HTTP 更改为 HTTPS。我的服务器上有 HTTPS 和自签名证书，但似乎无法让 android 端工作（在 eclipse 中保持没有对等证书错误）。作为一种解决方法，我考虑过使用 AES128 加密/散列每个名称，然后在手机上对其进行解密，然后在通过 PHP 将数据发送回数据库时同样执行相同的操作。

这是加密整个会话的充分替代方案吗？称之为“Lazy SSL”，好像有人拿到了密钥，他们就可以解密数据，但同样，我们只是传输名称，没有其他用户信息。

这是我正在使用的未加密代码（我省略了不必要的东西以使这个块更小）：

```
public JSONObject makeHttpRequest(String url, String method, List<NameValuePair> params) {

        if (method == "POST") {
            // request method is POST
            // defaultHttpClient
            DefaultHttpClient httpClient = new DefaultHttpClient();
            HttpPost httpPost = new HttpPost(url);
            httpPost.setEntity(new UrlEncodedFormEntity(params));

            HttpResponse httpResponse = httpClient.execute(httpPost);
            HttpEntity httpEntity = httpResponse.getEntity();
            is = httpEntity.getContent();

        } 
```

这是一个用于解析 Json 的更大的类： [我的整个 JSONParser 类](http://pastebin.com/G8fFJGgL)

我在需要将数据拉取或发送到服务器的地方调用这个类，例如：

```
final JSONParser jsonParser = new JSONParser();

    final List<NameValuePair> params = new ArrayList<NameValuePair>();
    params.add(new BasicNameValuePair("tag", Globals.TAG_GETMEMBERS));
    params.add(new BasicNameValuePair("LastRow", lastRow));
    // getting JSON string from URL
    final JSONObject json = jsonParser.makeHttpRequest(
            Globals.WEBSERVICE_URL, "POST", params); 
```

使用各种资源：

[如何在 Android 上为 SSL 套接字启用自签名证书？](https://stackoverflow.com/questions/3265053/how-to-enable-a-self-signed-certificate-for-ssl-sockets-on-android)

[http://randomizedsort.blogspot.com/2010/09/step-to-step-guide-to-programming.html](http://randomizedsort.blogspot.com/2010/09/step-to-step-guide-to-programming.html)

我能够得到一些有用的东西，我最初尝试使用“信任所有证书”方法，但由于这很容易受到 MITM 的影响，我宁愿不使用它（而且它不起作用。使用我得到的第二个链接至于重新生成证书，我已经下载了充气城堡罐（

我还使用以下命令生成密钥库，并将其导入到我的项目中：

```
keytool -genkey -dname "cn = smashwebserver, ou=Development Team, o=Smash Gyms, L=Sunnyvale, s=California, c=US" -alias ssltest -keypass ssltest -keystore c:\dell\ssltest.keystore -storepass ssltest -validity 180

keytool -export -alias ssltest -keystore c:\dell\ssltest.keystore -file c:\dell\ssltest.cer -storepass ssltest -keypass ssltest

keytool -import -alias ssltestcert -file C:\dell\ssltest.cer -keypass ssltestcert -keystore "C:\Users\Evan Richardson\workspace\SmashGyms\res\raw\ssltestcert" -storetype BKS -storepass ssltestcert -providerClass org.bouncycastle.jce.provider.BouncyCastleProvider -providerpath "C:\Users\Evan Richardson\workspace\SmashGyms\libs\bcprov-jdk15on-147.jar" 
```

生成的 JSONParser 类块如下所示：

```
if (method == "POST") {

            // Load the self-signed server certificate
            char[] passphrase = "ssltest".toCharArray();
            KeyStore ksTrust = KeyStore.getInstance("BKS");
            ksTrust.load(context.getResources().openRawResource(
                    R.raw.ssltestcert), passphrase);
            TrustManagerFactory tmf = TrustManagerFactory
                    .getInstance(KeyManagerFactory.getDefaultAlgorithm());
            tmf.init(ksTrust);

            // Create a SSLContext with the certificate
            SSLContext sslContext = SSLContext.getInstance("TLS");
            sslContext.init(null, tmf.getTrustManagers(),
                    new SecureRandom());

            // request method is POST
            // defaultHttpClient
            DefaultHttpClient httpClient = new DefaultHttpClient();
            HttpPost httpPost = new HttpPost(url);
            httpPost.setEntity(new UrlEncodedFormEntity(params));

            HttpResponse httpResponse = httpClient.execute(httpPost);
            HttpEntity httpEntity = httpResponse.getEntity();
            is = httpEntity.getContent();

        } 
```

但是现在我收到以下错误：

```
10-29 11:55:28.470: W/System.err(9561): java.io.IOException: Wrong version of key store. 
```

我查看了该错误，并在这里找到了可能的解决方案：[Android bouncy castle: IOException](https://stackoverflow.com/questions/5176600/android-bouncy-castle-ioexception)

我已经下载了 145 版本的 bouncycastles Jar，并使用了它。这修复了 ioexception 错误，但现在我得到以下信息：

```
10-29 12:21:57.536: W/System.err(12506): Catch exception while startHandshake: javax.net.ssl.SSLHandshakeException: javax.net.ssl.SSLProtocolException: SSL handshake aborted: ssl=0x10b9a10: Failure in SSL library, usually a protocol error
10-29 12:21:57.536: W/System.err(12506): error:140770FC:SSL routines:SSL23_GET_SERVER_HELLO:unknown protocol (external/openssl/ssl/s23_clnt.c:683 0x4026dced:0x00000000)
10-29 12:21:57.536: W/System.err(12506): return an invalid session with invalid cipher suite of SSL_NULL_WITH_NULL_NULL
10-29 12:21:57.586: W/System.err(12506): javax.net.ssl.SSLPeerUnverifiedException: No peer certificate 
```

奇怪的是，如果我将我的网址更改为“ [https://google.com](https://google.com) ”，我没有收到任何错误，只是以下内容：

```
10-29 14:03:50.198: V/httpresponsetag:(17810): <!DOCTYPE html>
10-29 14:03:50.198: V/httpresponsetag:(17810): <html lang=en>
10-29 14:03:50.198: V/httpresponsetag:(17810):   <meta charset=utf-8>
10-29 14:03:50.198: V/httpresponsetag:(17810):   <meta name=viewport content="initial-scale=1, minimum-scale=1, width=device-width">
10-29 14:03:50.198: V/httpresponsetag:(17810):   <title>Error 405 (Method Not Allowed)!!1</title>
10-29 14:03:50.198: V/httpresponsetag:(17810):   <style>
10-29 14:03:50.198: V/httpresponsetag:(17810):     *{margin:0;padding:0}html,code{font:15px/22px arial,sans-serif}html{background:#fff;color:#222;padding:15px}body{margin:7% auto 0;max-width:390px;min-height:180px;padding:30px 0 15px}* > body{background:url(//www.google.com/images/errors/robot.png) 100% 5px no-repeat;padding-right:205px}p{margin:11px 0 22px;overflow:hidden}ins{color:#777;text-decoration:none}a img{border:0}@media screen and (max-width:772px){body{background:none;margin-top:0;max-width:none;padding-right:0}}
10-29 14:03:50.198: V/httpresponsetag:(17810):   </style>
10-29 14:03:50.198: V/httpresponsetag:(17810):   <a href=//www.google.com/><img src=//www.google.com/images/errors/logo_sm.gif alt=Google></a>
10-29 14:03:50.198: V/httpresponsetag:(17810):   <p><b>405.</b> <ins>That’s an error.</ins>
10-29 14:03:50.198: V/httpresponsetag:(17810):   <p>The request method <code>POST</code> is inappropriate for the URL <code>/</code>.  <ins>That’s all we know.</ins> 
```

这可能表明它实际上是我的自签名证书，但如果我打开 https:servername，它可以工作（当然有默认警告）

**编辑：**

即使接受所有证书，我也遇到了同样的错误，所以我用我正在使用的主机名查看浏览器，同样的错误。然后我查看了路由器上的 NAT 设置……我转发到端口 80，而不是 443。失败。更改为 443，现在看起来它正在工作，至少接受所有证书和以下代码：

```
public JSONObject makeHttpRequest(String url, String method,
        List<NameValuePair> params) throws NoSuchAlgorithmException,
        CertificateException, NotFoundException, KeyStoreException,
        KeyManagementException {

    // Making HTTP request
    try {

        // check for request method
        if (method == "POST") {

            // request method is POST
            // defaultHttpClient

            // Create a trust manager that does not validate certificate chains
            TrustManager[] trustAllCerts = new TrustManager[] { new X509TrustManager() {
                public java.security.cert.X509Certificate[] getAcceptedIssuers() {
                    return null;
                }

                public void checkClientTrusted(
                        java.security.cert.X509Certificate[] certs,
                        String authType) {
                }

                public void checkServerTrusted(
                        java.security.cert.X509Certificate[] certs,
                        String authType) {
                }
            } };

            // Install the all-trusting trust manager
            try {
                SSLContext sc = SSLContext.getInstance("SSL");
                sc.init(null, trustAllCerts,
                        new java.security.SecureRandom());
                HttpsURLConnection.setDefaultSSLSocketFactory(sc
                        .getSocketFactory());
            } catch (Exception e) {
            }

            // Now you can access an https URL without having the certificate in the truststore

            HttpClient client = new DefaultHttpClient();
            client = this.sslClient(client);
            HttpPost httpPost = new HttpPost(url);
            httpPost.setEntity(new UrlEncodedFormEntity(params));

            // Log.v(TAG, EntityUtils.toString(result.getEntity()));

            HttpResponse httpResponse = client.execute(httpPost);
            // Log.v("httpresponsetag:", EntityUtils.toString(httpResponse
            // .getEntity()));
            HttpEntity httpEntity = httpResponse.getEntity();
            is = httpEntity.getContent();

        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T09:32:57.997

忘记重新发明惰性 SSL 或其他任何东西。只需使用 SSL 并修复您的代码。并且*不要*关闭证书验证并信任所有证书。使用自签名证书并不是特别困难，发布您尝试过的内容，人们会为您指明正确的方向。一般来说，您需要：

1.  拿到证书
2.  把它放在你的应用程序的原始资源中
3.  `KeyStore`阅读它并用它初始化 a
4.  将此传递给您的 SSL 套接字工厂
5.  使用 4 中的套接字工厂初始化您的 HTTP 客户端。

如果您正在使用，这就是如何做到这`HttpClient`一点，重点是注册`SSLSocketFactory`：

```
KeyStore ts = KeyStore.getInstance("BKS");
InputStream in = getResources().openRawResource(R.raw.mytruststore);
ts.load(in, TRUSTSTORE_PASSWORD.toCharArray());

SchemeRegistry schemeRegistry = new SchemeRegistry();
schemeRegistry.register(new Scheme("http", PlainSocketFactory
                .getSocketFactory(), 80));
SSLSocketFactory sslSocketFactory = new SSLSocketFactory(ts);
schemeRegistry.register(new Scheme("https", sslSocketFactory, 443));
HttpParams params = new BasicHttpParams();
ClientConnectionManager cm = 
    new ThreadSafeClientConnManager(params, schemeRegistry);

HttpClient client = new DefaultHttpClient(cm, params); 
```

查看更多示例、示例项目和一些背景信息： http: [//nelenkov.blogspot.com/2011/12/using-custom-certificate-trust-store-on.html](http://nelenkov.blogspot.com/2011/12/using-custom-certificate-trust-store-on.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T05:10:18.437

我不明白您为什么要解决 SSL 并发明自己的加密方案。我感觉您的自签名证书正在引起您的问题，也许您需要关闭在 Eclipse 中验证自签名证书？

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-10-29T05:22:16.623

我了解您正在使用 ssl，但如果您愿意，还有另一种选择。它正在使用编码和解码。

```
function encodeString($ss,$ntime){

    for($i=0;$i<$ntime;$i++){

        $ss=base64_encode($ss);

    }

    return $ss;

}

function decodeString($ss,$ntime){

    for($i=0;$i<$ntime;$i++){

        $ss=base64_decode($ss);

    }

    return $ss;

} 
```

你可以像这样使用它，

```
 encodeString("$membername", 3); //3 will make the encryption more strong. Higher the value higher the encryption.

 decodeString("$membername", 3); //decodes the member name. 
```

# django - 带有_id的Django后缀ForeignKey字段

> ID：13116130
> 
> 赞同：25
> 
> 时间：2012-10-29T05:06:20.500
> 
> 标签：django, foreign-keys

假设我的模型中有一个字段 f 定义如下作为外键：

```
f = models.ForeignKey(AnotherModel) 
```

当 Django 同步数据库时，会调用 db 中创建的文件`f_id`，并自动加上 '_id' 后缀。

问题是我希望数据库中的这个字段完全按照我在模型中定义的名称命名，`f`在这种情况下。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-10-29T05:11:51.077

原来有一个关键字参数叫做`db_column`. 如果您希望数据库中名为“f”的字段非常简单：

```
f = models.ForeignKey(AnotherModel, db_column='f') 
```

进一步参考：

> 用于此字段的数据库列的名称。如果没有给出，Django 将使用该字段的名称。
> 
> 如果您的数据库列名是 SQL 保留字，或者包含 Python 变量名中不允许使用的字符（尤其是连字符），那没关系。Django 在幕后引用列名和表名。

[https://docs.djangoproject.com/en/2.2/ref/models/fields/#db-column](https://docs.djangoproject.com/en/2.2/ref/models/fields/#db-column)

# asp.net-mvc-3 - 如何在没有 javascript 的情况下为 DisplayFor/EditorFor 替换绑定到模型列表的行样式

> ID：13116139
> 
> 赞同：0
> 
> 时间：2012-10-29T05:07:08.377
> 
> 标签：asp.net-mvc-3

如何将当前元素的索引传递给 DisplayFor/EditorFor 的视图，以便我可以决定该行是否应显示替代样式？

我的主视图如下所示：

```
<table>
@Html.EditorFor(model => model.MyListOfItems)
</table> 
```

用于 EditorFor 的视图如下所示：

```
@Html.HiddenFor(model => model.IdOfTheItem)
<tr class="shouldBeChangedDependingOnRowEvenOrNot">
<td>@Html.CheckBoxFor(model => model.MarkForBatchEdit)</td>
<td>@Html.DisplayFor(model => model.NameOfThisItem)</td>
<td>@Html.DisplayFor(model => model.StateOfThisItem)</td>
</tr> 
```

好吧，我知道这个类似的问题和建议的解决方案：[alternating row color MVC](https://stackoverflow.com/questions/8593477/alternating-row-color-mvc)

但我不能将它们应用于这种情况。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T05:45:27.977

被`EditorFor`重载以获取[附加的ViewData 参数，因此您可以在](http://msdn.microsoft.com/en-us/library/ff406462%28VS.100%29.aspx)[ViewData](http://msdn.microsoft.com/en-us/library/dd505255%28VS.100%29.aspx)中传递索引，这是键/值对的集合。

```
@Html.EditorFor( model => model.MyListOfItems , new { CurrentIndex = SomeNumber } ) 
```

在您看来，您将使用`ViewData["CurrentIndex"]`.

此外，与其传递元素索引，不如在控制器中进行计算并传递`ViewData`.

```
bool isEvenRow = ((CurrentElementIndex % 2) == 0);
ViewData["isEvenRow"] = isEvenRow; 
```

然后，您将根据值是 true 还是 false 在视图中切换 CSS。

# javascript - 如何将xml行中的日期与今天的日期进行比较

> ID：13116144
> 
> 赞同：0
> 
> 时间：2012-10-29T05:08:08.887
> 
> 标签：javascript, jquery

我有一个 xml 文件，它是在 sharepoint 中使用 jquery 检索的。xml 的其中一行如下所示。

```
<z:row ows_Title='Have dinner party with Host' ows_Due_x0020_Date='2012-05-10 00:00:00' ows_MetaInfo='1;#' ows__ModerationStatus='0' ows__Level='1' ows_ID='1' ows_UniqueId='1;#{2A8F277A-C95B-420C-89A9-3B979F95C8F4}' ows_owshiddenversion='3' ows_FSObjType='1;#0' ows_Created='2012-10-25 03:19:35' ows_PermMask='0x7fffffffffffffff' ows_Modified='2012-10-29 00:56:09' ows_FileRef='1;#personal/Inclusions/Lists/Events/1_.000' /> 
```

现在我想退出“到期日”列并与今天的日期进行比较。对于检索日期，没有问题。但是如何比较两个日期呢？为了将日期与今天进行比较，我这样使用。

```
 var k = new Date();
    var year = k.getYear();
    var month = k.getMonth();
    var day = k.getDate();
    var fulldate = year+"-"+month+"-"+day 
```

但它只显示日期。在 xml 中，我们也有时间。我不想和时间比较。我想只与日期进行比较。如何实现？我想把整个过程放在下面的函数中。

```
$(xData.responseXML).find("z\\:row").each(function() { 
          //here i want to compare that date column with present date

}); 
```

最后我想要，xml 中的日期是否小于今天的日期？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T05:18:40.047

像这样的东西：

```
function isPastDate( date ) {
  return (new Date( date )).getTime() < (new Date()).getTime();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T06:37:40.947

强烈推荐 Date.js 库，用于所有可以大大简化日期工作的比较和格式化方法

[http://www.datejs.com/](http://www.datejs.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T06:21:17.363

最后是所需的比较，如下所示。

```
function compareDates(passdate)
    {   
        var splitdate = passdate.split(" ");
        var splitdate1 = splitdate[0].split("-");
        var newdate = splitdate1[1]+"-"+ splitdate1[2]+"-"+splitdate1[0];
        return ((Date.parse(newdate)) < (new Date()).getTime());
    } 
```

# objective-c - 在 Objective-C 中的单独应用程序中调用方法

> ID：13116148
> 
> 赞同：0
> 
> 时间：2012-10-29T05:08:30.937
> 
> 标签：objective-c, xcode, macos

我正在尝试在 Objective-C/Xcode 中设置几个应用程序、一个后台应用程序（“应用程序是代理”）和一个首选项窗格。

我在这两个应用程序之间进行通信时遇到问题。我相信使用 NSNotification 可以做到这一点，但我想知道这是否可以使用委托。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T05:13:16.693

AFAIK，`NSNotificationCenter`只能在一个应用程序中使用。和[NSDistributedNotificationCenter](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSDistributedNotificationCenter_Class/Reference/Reference.html)可用于实现您的目标。

# python - sphinx-apidoc 用法 - 多个源 python 目录

> ID：13116155
> 
> 赞同：9
> 
> 时间：2012-10-29T05:09:25.020
> 
> 标签：python, python-sphinx, sphinx-apidoc

所以我在两个不同的目录中有我的 python 源文件：-

例如

```
~/work/myproject
~/.virtualenvs/myproject 
```

如何使用`sphinx-apidoc`递归方式查看两个目录以生成我的 reST 文件？

明显地，

```
sphinx-apidoc -o docs/source ~/work/myproject 
```

工作得很好但是当我尝试运行时

```
sphinx-apidoc -o docs/source ~/.virtualenvs/myproject 
```

再一次，sphinx 告诉我“docs/source/modules.rst 已经存在，正在跳过”这当然是真的，因为我已经运行`sphinx-apidoc`过一次来生成它。

那么如何执行一次并在两个目录中搜索呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T17:58:29.057

根据[Sphinx apidoc 文档](http://sphinx-doc.org/man/sphinx-apidoc.html)，命令行语法为：

```
sphinx-apidoc [options] -o <outputdir> <sourcedir> [pathnames ...] 
```

**更新：错误**，请参阅下面@jgbarah 的评论。

这意味着如果您想在两个单独的目录中记录源代码，您*可以*同时传递两个目录/路径名，例如：

```
sphinx-apidoc -o docs/source ~/work/myproject ~/.virtualenvs/myproject 
```

**改进建议**：

您可以在每个项目的文档中创建一个子目录。所以像：

```
sphinx-apidoc -o docs/source/app1 ~/work/myproject1
sphinx-apidoc -o docs/source/app2 ~/work/myproject2 
```

使用目录树，您可以指向两个子目录：

```
.. toctree::
    :maxdepth: 2

    app1/index.rst
    app2/index.rst 
```

# ssis - 多个重定向行到 SSIS 中的不同输出

> ID：13116159
> 
> 赞同：0
> 
> 时间：2012-10-29T05:09:58.300
> 
> 标签：ssis, bids

嗨，根据哪一列出错，是否可以在 SSIS 控件中将多个重定向行（出错时）重定向到不同的输出？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T06:22:12.387

对于 ssis 中的每个数据流组件，`one error flow path` 很难找到哪个列产生了错误，因为没有直接的方法可以在 SSIS 中找到列名。

最多你可以使用脚本组件来查找列名

```
 this.ComponentMetaData.InputCollection[Row.ErrorColumn].Name 
```

但是上面的代码给了你。`lineage ID`不幸的是，使用 lineage id，很难得到列名。

# java - 在多个 map-reduce 作业之间传递数据库连接对象

> ID：13116160
> 
> 赞同：2
> 
> 时间：2012-10-29T05:10:03.943
> 
> 标签：java, database, postgresql, hadoop, mapreduce

从根本上讲，这个问题是关于：可以跨多个进程使用相同的数据库连接（因为不同的 map-reduce 作业位于不同的独立进程中）。

我知道这是一个微不足道的问题，但如果有人也能回答这个问题，那就太好了：如果与数据库的最大连接数（在托管数据库的服务器上预先配置）已经用尽并且新进程试图获得新连接？它是否等待一段时间，如果是，是否有办法为此等待期设置超时。在这种特殊情况下，我说的是 PostGres DB，用于与 DB 对话的语言是 java。

为了给你一个问题的背景，我有多个并行运行的 map-reduce 作业（大约 40 个 reducer），每个都想更新一个 PostGres 数据库。我如何有效地管理这些进程中的这些数据库读/写。注意：数据库托管在独立于 map reduce 作业运行位置的单独机器上。

连接池是一种选择，但有时效率非常低，尤其是对于每秒几次读/写。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T05:14:45.313

> 是否可以跨多个进程使用相同的数据库连接

不，不是以任何理智或可靠的方式。您可以使用代理进程，但无论如何您都离发明连接池只有一步之遥。

> 如果到数据库的最大连接数（在托管数据库的服务器上预先配置）已经用尽并且新进程尝试获得新连接，会发生什么情况？

连接尝试因 SQLSTATE 而失败`53300 too_many_connections`。如果它等待，服务器可能会耗尽其他限制并开始在为现有客户端提供服务时出现问题。

* * *

对于这样的问题，您通常会使用像 C3P0 或 DBCP 这样的工具来进行 JVM 内池化，但是当您有多个 JVM 时，这将不起作用。

您需要做的是使用PgBouncer或[PgPool](http://wiki.postgresql.org/wiki/PgBouncer) [-II 之](http://www.pgpool.net/mediawiki/index.php/Main_Page)类的外部连接池来维护一组来自您的工作人员的轻量级连接。然后，pooler 拥有较少数量的真实服务器连接，并在来自客户端的轻量级连接之间共享这些连接。

连接池通常比不池*更*有效，因为它允许您针对硬件和工作负载优化活动 PostgreSQL 工作进程的数量，从而为工作提供准入控制。

另一种方法是让编写器进程具有一个或多个线程（每个线程一个连接），从 reduce 工作人员那里获取完成的工作并写入数据库，因此 reduce 工作人员可以继续他们的下一个工作单元。如果作者落后太远，您需要有一种方法告诉 reduce 工作人员等待。有几个 Java 排队系统实现可以适用于此，或者您可以使用 JMS。

[大量小数据](https://stackoverflow.com/q/10190156/398670)见IPC Suggestion

使用以下方法尽可能优化写入 PostgreSQL 的方式也是值得的：

*   准备好的报表
*   一种`commit_delay`
*   `synchronous_commit = 'off'`如果服务器崩溃，您是否有能力丢失一些交易
*   将工作批量处理成更大的交易
*   `COPY`或多值`INSERT`s 插入数据块
*   具有有用磁盘子系统的体面硬件，而不是某些具有糟糕 I/O 的 Amazon EC2 实例或具有 5400rpm 磁盘的 RAID 5 盒
*   具有电池支持的回写缓存的适当 RAID 控制器，以降低 fsync() 的成本。如果你不能做大批量的工作或使用提交延迟，最重要的是；如果由于批处理和组提交而导致 fsync 速率较低，则影响较小。

看：

*   [http://www.postgresql.org/docs/current/interactive/populate.html](http://www.postgresql.org/docs/current/interactive/populate.html)
*   [http://www.depesz.com/index.php/2007/07/05/how-to-insert-data-to-database-as-fast-as-possible/](http://www.depesz.com/index.php/2007/07/05/how-to-insert-data-to-database-as-fast-as-possible/)

# c++ - C++ 冒泡排序紧凑指针

> ID：13116166
> 
> 赞同：0
> 
> 时间：2012-10-29T05:11:00.573
> 
> 标签：c++, pointers, bubble-sort

我试图用紧凑的指针实现冒泡排序。排序似乎只对前两个排序，然后在尝试使用教师提供的 DisplayValues 驱动程序时失败

```
 float *Sort(float *first, size_t elements)
{
    {
        for (didSwap = 0, current = first, next = first + 1; current < last; ++current, ++next)
        {
                 didSwap = 1;
            }
        }
        --last;
    }
    while (didSwap);

    return first;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T06:20:00.507

这很简单，教授的例程期望数组按降序排列。您的代码对我来说看起来正确，但它按升序排序。

顺便说一句，您的教授对工作原理有误解`setiosflags`。它应该是

```
cout << setiosflags(ios_base::fixed); 
```

在`cout`流上设置标志。每个流都有自己的标志，您的教授似乎认为有一组全局标志。相同的错误`resetiosflags`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T15:38:17.310

难道不应该有一个“做”来使它成为一个“做{...}”块吗？

```
float *Sort(float *first, size_t elements)
{
    do
    {
        for (didSwap = 0, current = first, next = first + 1; current < last; ++current, ++next)
        {
             didSwap = 1;
        }

        --last;
    }
    while (didSwap);
} 
```

# python - Python 创建一个计算器

> ID：13116167
> 
> 赞同：-1
> 
> 时间：2012-10-29T05:11:10.213
> 
> 标签：python, input, calculator

我对python相当陌生。

我被要求只使用字符串命令、int/string/float 之间的转换等（如果需要）创建一个计算器，并且需要使用函数。也可以使用 while 和 for 循环。

程序需要采用 x/y 或 x/y/z 形式的输入，其中 xyz 是任何正数或负数。其中“/”也可以用加法和减法代替。并且操作数和运算符之间可以存在任意数量的空格。这是我到目前为止的想法。

我会对 +、-、/ 和 * 有一个唯一的定义。我会为用户输入的内容创建一个函数。我会使用“.lstrip”和“.rstrip”来消除空格。

现在我遇到的问题是创建输入函数。我对功能很陌生，这基本上就是我所拥有的。我知道使用起来并不多，但我真的很想知道如何正确输入该功能。

```
def multiplication(x,a,y,b,z):
    if (a== "*"):
        return x*y
    if (b== "*"):
        return y*z

def division(x,a,y,b,z):
    if (a== "/"):
        return x/y
    if (b== "/"):
        return y/z

def addition(x,a,y,b,z):
    if (a== "+"):
        return x+y
    if (b== "+"):
        return y+z

def subtraction(x,a,y,b,z):
    if (a== "-"):
        return x-y
    if (b== "-"):
        return y-z

def (x,y,z):
    x=0
    y=0
    z=0

    zxc=int(input()):# this is where I get stuck and I don't know how to implement x,y,z into the input. 
```

感谢所有帮助。如果您不确定您提供的代码是否过于密集，无法满足我的需求，请在为我浪费您的时间之前询问，制作我可能无法使用的代码。我保证尽快回复。

基本上我试图找到一种方法来**拆分**输入的字符串，然后用它开始计算。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T05:46:33.303

*由于这看起来像家庭作业，我怀疑允许 OP 使用典型的方法来解决问题。我认为这是一个输入验证和字符串操作的练习；其次是程序流程和理解函数返回值。*

您需要在这里做两件事：

1.  找出对您的程序有效的输入。
2.  不断提示用户，直到他或她输入对您的程序有效的输入。

对于#1，我们知道有效输入是数字（正整数或负整数），并且它们必须是表达式的形式。所以这意味着，输入的最小长度将是三个（两个数字和一个数学符号）并且输入中的字符（字符串）是无效的。

这是我们获取用户输入的基本循环：

```
expression = raw_input('Please enter the expression: ')
expression_result = check_input(expression)

while not expression_result:
    print 'You did not enter a valid expression'
    expression = raw_input('Please enter the expression: ')
    expression_result = check_input(expression) 
```

该`check_input`方法将根据我们的规则验证用户输入的内容是否准确：

```
def check_input(input_string):

    # Check the basics
    if len(input_string) < 3:
        return False

    # Check if we are getting passed correct characters
    for character in input_string:
        if character not in '1234567890' or character not in '/*+-':
            return False

    # Things like /23 are not valid
    if input_string[0] in '/*+':
        return False

    return input_string 
```

获得正确的输入后，下一步是将输入拆分为您需要提供给数学函数的各个部分。我会把这部分留给你。

* * *

假设你有正确的字符串（也就是说，它是你程序的有效输入），你现在需要把它分成两部分。

1.  运算符（数学符号）
2.  操作数（数学符号周围的数字）

所以我们知道我们有一组有限的运算符`+,-,/,*`，所以一个想法是使用`split()`字符串的方法。这很好用：

```
>>> s = '4+5'
>>> s.split('+')
['4', '5'] 
```

您将尝试使用所有运算符拆分字符串，然后检查结果。请注意，用不存在的字符分割字符串不会引发任何错误，但您只会返回字符串：

```
>>> s = '4+5'
>>> s.split('/')
['4+5'] 
```

所以一种方法是 - 在运算符上拆分字符串，如果结果列表的长度 > 2，您知道结果列表的第一个成员是运算符的左侧，而列表的第二个成员是在右手侧。

这适用于正数，但是对于负数：

```
>>> s = '-4+3'
>>> s.split('-')
['', '4+3'] 
```

好消息是我们不是第一个遇到这个问题的人。还有另一种计算方程的方法，称为[波兰表示法](http://en.wikipedia.org/wiki/Polish_notation)（也称为前缀表示法）。这是来自维基百科页面的算法：

```
Scan the given prefix expression from right to left
for each symbol
 {
  if operand then
    push onto stack
  if operator then
   {
    operand1=pop stack
    operand2=pop stack
    compute operand1 operator operand2
    push result onto stack
   }
 }
return top of stack as result 
```

要获得波兰风味的正常表达式（称为中缀），请使用[调车场算法](http://en.wikipedia.org/wiki/Shunting-yard_algorithm)，这是计算机科学中我最喜欢的基于火车的算法。

使用 shutting yard 将表达式转换为波兰符号，然后使用伪代码求解方程。您可以将列表用作“堆栈”。

请记住，您的所有输入都是字符串，因此请确保在进行实际数学运算时将它们转换为整数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T05:21:18.057

如果你只是做一个玩具计算器，`eval()`接受局部和全局变量，所以你可以使用这样的东西：

```
def calculate(x=0, y=0, z=0):
    expression = raw_input('Enter an expression: ')

    return eval(expression, None, locals()) 
```

这是一个示例控制台会话：

```
>>> calculate()
Enter an expression: x + 5 - y
5 
```

请注意，这`eval()`并不安全。如果你想让事情变得严肃，你将不得不解析表达式。

此外，由于您的表达式很简单，您可以在输入之前使用正则表达式来验证输入`eval`：

```
def validate(expression):
    operator = r'\s*[+\-/*]\s*'

    return bool(re.match(r'^\s*(?:x{o}y|x{o}y{o}z)$'.format(o=operator), expression)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T06:21:34.020

这是使用正则表达式的可能解决方案大纲。错误检查留作练习。如果这不是家庭作业，并且您想查看充实的解决方案，请在[此处查看](https://gist.github.com/3971894)

```
import re

# input is a list of tokens (token is a number or operator)
tokens = raw_input()

# remove whitespace
tokens = re.sub('\s+', '', tokens)

# split by addition/subtraction operators
tokens = re.split('(-|\+)', tokens)

# takes in a string of numbers, *s, and /s. returns the result
def solve_term(tokens):
    tokens = re.split('(/|\*)', tokens)
    ret = float(tokens[0])
    for op, num in <FILL THIS IN>:
        # <apply the operation 'op' to the number 'num'>
    return ret

# initialize final result to the first term's value
result = solve_term(tokens[0])

# calculate the final result by adding/subtracting terms
for op, num in <FILL THIS IN>:
    result +=  solve_term(num) * (1 if op == '+' else -1)

print result 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-28T03:29:07.610

我有一个替代你的代码。用户可以输入如下内容：8*6/4-3+3，这仍然有效。如果输入字母（d，a，s），它也不会崩溃。非常紧凑。

代码（Python v3.3.0）：

```
valid_chars = "0123456789-+/* \n";
while True:
    x = "x="
    y = input(" >> ")
    x += y
    if False in [c in valid_chars for c in y]:
        print("WARNING: Invalid Equation");
        continue;
    if(y == "end"):
        break
    exec(x)
    print(x) 
```

# javascript - 设置后javascript调用init函数

> ID：13116170
> 
> 赞同：1
> 
> 时间：2012-10-29T05:11:21.030
> 
> 标签：javascript

我正在尝试创建一个 js 对象，我希望用户传入一些 json 数据或默认设置对象属性，如下所示。一切就绪后，我终于想调用一个运行并完成工作的 init 函数。谢谢你的帮助。我不是想创建一个 jQuery 插件。

```
var PictureDialog = function (settings) {
    settings = {
        allowShortKey: true,
        prevID: null,
        prevCounterNumber: null,
        startValue: 0,
        nextValue: 1,
        init: function() {
            //Do work
           //Show dialog
        }
    },settings;

} 
```

电话看起来像这样吗

```
PictureDialog({prevID:1}).init(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T05:25:15.887

不知道为什么你需要一个 `init`函数。我会这样做：

```
(function () {
    var defaultSettings = {
        allowShortKey: true,
        prevID: null,
        prevCounterNumber: null,
        startValue: 0,
        nextValue: 1
    };
    PictureDialog = function (settings) {
        settings = settings || defaultSettings;
        //Do work
        //Show dialog
    };
})(); 
```

外部功能只是为了确保`defaultSettings`不会污染全局范围。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T05:28:34.277

如果我理解正确你想设置一些默认值，在 jQuery 的帮助下你可以`$.extend`像这样使用：

```
function Foo( settings ) {
  var _defaults = { a: 'a', b: 'b' };
  settings = $.extend( settings, _defaults );
} 
```

使用纯 JavaScript，您必须执行以下操作：

```
function Foo( settings ) {
  var _defaults = { a: 'a', b: 'b' };
  settings.a = settings.a || _defaults.a;
  settings.b = settings.b || _defaults.b;
} 
```

至于`init`方法，您可以将其添加到原型并在构造函数中执行，这样您甚至不必在创建新实例时调用它：

```
function Foo( settings ) {
  var _defaults = { a: 'a', b: 'b' };
  ...
  this.init();
}

Foo.prototype = {
  init: function() {
    console.log('initialized!');
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T05:32:06.173

快速简单的方法是这样的：

```
var PictureDialog = function (settings)
{
    settings = {
        allowShortKey: true,
        prevID: null,
        prevCounterNumber: null,
        startValue: 0,
        nextValue: 1,
        init: function()
        {
            //Do work
            //Show dialog
            return this;//<--return object, too
        }
    };
    return settings;//return the object
};
foo = PictureDialog().init();//the init will be called on the return value of PictureDialog 
```

但是，我不明白为什么`PictureDialog`函数需要一个`settings`参数。要么根本不向函数传递任何内容，要么*更改*传递的值：

```
var PictureDialog = (function()
{
    var defaults = {
        allowShortKey: true,
        prevID: null,
        prevCounterNumber: null,
        startValue: 0,
        nextValue: 1,
        init: function()
        {
            //Do work
           //Show dialog
           return this;//<--Very important
        };
    return function (settings)
    {
        settings = settings instanceof Object ? settings : {};
        for (var n in defaults)
        {
            if (defaults.hasOwnProperty(n))
            {//set all properties that are missing from argument-object
                settings[n] = settings[n] || defaults[n];
            }
        }
        return settings;
    };
}());
foo = PictureDialog({allowShortKey: false}).init();//will return full settings object 
```

# java - 如何使方法参数类型为ArrayList take different object types I have an abstract method as part of an abstract class with the following declaration: abstract public ArrayList <device>returnDevices(ArrayList 问问题 问问题 2012-10-29T05:12:00.013 7081 次 This question shows research effort; it is useful and clear 2 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. I have an abstract method as part of an abstract class with the following declaration: abstract public ArrayList <device>returnDevices(ArrayList scanResult); I want the parameter that is passed to be an ArrayList, but the type object in the ArrayList will be dependent on the child class that inherits this superclass and implements the method returnDevices. I thought that I could achieve this by making the method abstract as above, and then in the child class that inherits it do something like: public ArrayList <device>returnDevices(ArrayList scanResult) { Iterator results = scanResult.iterator(); while(results.hasNext()) Packet pkt = (Packet) results.next(); // HERE: I cast the Object } That is fine and does not cause an error, but when I try to call returnDevices by using a parameter of type ArrayList<packet>, like the following: ArrayList <packet>packets = new ArrayList<packet>(); // <----- the "packets" ArrayList is filled here ArrayList <device>devices = returnDevices(packets); ... I get the error: The method returnDevices(ArrayList) in the type ScanResultParser is not applicable for the arguments (ArrayList<packet>) So clearly it is rejecting the parameter type. What is the proper way to achieve what I am trying to do? What are you trying to achieve by doing this? If it's to test under network conditions I would suggest looking into the Apple Network Link conditioner. This utility will let you simulate real world network conditions such as 3G or Edge. javaabstract 4 2 回答 2 This answer is useful 9 -这就是如何在 JavaCollections中进行类型安全的，因此错误的类型不会进入 Collection，因为仅在此期间检查集合，`Compilation而不是在Runtime.. 期间检查集合，即 Cat 对象不应进入 Dog 类型的 Collection . 你可以这样做... public ArrayList <device>returnDevices(ArrayList scanResult) 或者 public <t extends="" object="">ArrayList <device>returnDevices(ArrayList <t>scanResult) 于 2012-10-29T05:16:38.870 回答 This answer is useful 1 问题是，即使Packetis-a不是 a 。泛型类型在 Java 中是不变的。ObjectArrayList<packet>ArrayList 您可以将extendsandsuper关键字与您的类型参数一起使用，以在 Java 泛型中引入该类型的效果。 我认为以下是应该的 abstract public <t extends="" device="">List <t>returnDevices(List <t>scanResult); 有了这个方法，要么获取Devices 列表并返回Devices 列表，要么获取某个子类型的Device列表并返回相同子类型的列表。 旁注：针对某些具体类型（例如ArrayList）进行编码不是一个好习惯。您应该始终尽可能针对接口进行编码（例如List）。 于 2012-10-29T05:18:31.083 回答 Related 0 php - 这个 MySQL 查询 (PHP) 有什么问题？ 0 iphone - 如何按字母顺序排列 MPMusicPlayerController？ 4 iphone - 子类化 UIView 但没有接触 1 javascript - Javascript RegExp，在捕获组中失败 1 javascript - 在 Ember.js 路由中使用动态段 1 javascript - 链接到单独页面上的 div 并在单击链接时突出 显示 div 1 javascript - 制作动画时防止矢量缩小到其原始大小 4 jquery - 使用jQuery淡入网页 1 entity-framework - 实体框架如何只选择几个字段或用 STE 延迟加载？ 3 amazon-web-services - 将本地文件放入 Amazon EBS 卷的最快方法是什么？ Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：13116175
> 
> 赞同：2
> 
> 时间：
> 
> 标签：java, abstract

I have an abstract method as part of an abstract class with the following declaration:

```
abstract public ArrayList<Device> returnDevices(ArrayList<Object> scanResult); 
```

I want the parameter that is passed to be an ArrayList, but the type object in the ArrayList will be dependent on the child class that inherits this superclass and implements the method returnDevices.

I thought that I could achieve this by making the method abstract as above, and then in the child class that inherits it do something like:

```
public ArrayList<Device> returnDevices(ArrayList<Object> scanResult) {

    Iterator<Object> results = scanResult.iterator();
    while(results.hasNext())
        Packet pkt = (Packet) results.next();  // HERE: I cast the Object
} 
```

That is fine and does not cause an error, but when I try to call returnDevices by using a parameter of type `ArrayList<Packet>`, like the following:

```
ArrayList<Packet> packets = new ArrayList<Packet>();
// <----- the "packets" ArrayList is filled here
ArrayList<Device> devices = returnDevices(packets); 
```

... I get the error:

```
The method returnDevices(ArrayList<Object>) in the type ScanResultParser is not applicable for the arguments (ArrayList<Packet>) 
```

So clearly it is rejecting the parameter type. What is the proper way to achieve what I am trying to do?

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-29T05:16:38.870

**-**这就是如何在 Java`Collections`中进行**类型安全的，因此****错误的类型不会进入 Collection**，因为**仅**在此期间检查集合，``Compilation`而**不是**在`Runtime`.. 期间检查集合，即 Cat 对象不应进入 Dog 类型的 Collection .

你可以这样做...

`public ArrayList<Device> returnDevices(ArrayList<? extends Object> scanResult)`

**或者**

`public <T extends Object> ArrayList<Device> returnDevices(ArrayList<T> scanResult)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T05:18:31.083

问题是，即使`Packet`is-a不是 a 。*泛型类型在 Java 中是不变的*。`Object``ArrayList<Packet>``ArrayList<Object>`

 *您可以将`extends`and`super`关键字与您的类型参数一起使用，以在 Java 泛型中引入该类型的效果。

我认为以下是应该的

```
abstract public <T extends Device> List<T> returnDevices(List<T> scanResult); 
```

有了这个方法，要么获取`Device`s 列表并返回`Device`s 列表，要么获取某个子类型的`Device`列表并返回相同子类型的列表。

* * *

旁注：针对某些具体类型（例如`ArrayList`）进行编码不是一个好习惯。您应该始终尽可能针对接口进行编码（例如`List`）。*</t></t></t></packet></t></device></t></device></packet></device></packet></packet></packet></device></device></device>

# emacs - 我如何最好地在 elisp 中使用 common-lisp（如果有的话）？

> ID：13116184
> 
> 赞同：11
> 
> 时间：2012-10-29T05:13:04.723
> 
> 标签：emacs, lisp, elisp, common-lisp

有人可以解释在 elisp 中使用 cl 包的具体问题吗？作为 emacs 中的新编码员，每当我使用 (require 'cl) 选项时，我都觉得自己犯了一个错误。我已阅读并理解 cl 包的字节编译问题。我已经看过旧的论点，并不想复活它们。我也不是在寻找任何关于 common-lisp 是否比 x 品牌 lisp 更好的通才评论。

我想知道的实际上是如何使用 common-lisp，这样我写的任何 elisp 都有很大的机会被大多数 elisp 编码人员接受。具体来说，我应该完全避免使用通用 lisp，还是该语言的某些部分是每个人都可以接受的，而某些部分是大多数程序员会窃笑和嘲笑的？

不希望限制答案的广度，是这样的：

```
(mapcar (lambda(x) (* x x)) '(1 2 3)) 
```

比这更容易接受：

```
(require 'cl)
(loop for el in '(1 2 3) collect (* el el)) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-29T08:07:38.433

在使用大量第三方库和编写一些自己的 eLisp 代码时，我从未遇到过使用 CL 包导致名称冲突的情况。所以，我很想说反对使用 CL 的论点只不过是清教主义（在这个词的原始意义上，不是指事物的宗教方面）。

但是，如果您计划提供很长时间的支持并且想要进行某种备份，这就是我会做的事情（但我自己不会这样做，因为一旦损坏就修复似乎更好战术）。对于您正在使用的 CL 包中的函数，请创建一个特殊文件，其中`defalias`所有这些函数都有一个`cl-`前缀。因此，例如，`(position ...)`您将拥有`(cl-position ...)`. 理论上会为您省去前向兼容性的问题。但是功能不会立即被删除，您会在它们被弃用之前收到警告，并且会有很多时间进行更新。取决于你，真的。

Common Lisp 中的循环宏本身就是一个争议，它不是该语言的典型构造，这就是为什么存在例如迭代库的原因。它还需要您学习“循环迷你语言”才能很好地使用它，这是一种小型特定领域的语言，而且这种构造实际上不需要使用一个。但是，循环有其强大的一面。列表处理函数，例如`mapcar`or`reduce`将在更琐碎的情况下为您提供很好的服务，就像您在示例中使用的那样，但在不太琐碎的情况下`loop`，这将是一种更好且更简洁的方式来做同样的事情。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-29T11:11:30.793

你读过手册的宏[部分](http://www.gnu.org/software/emacs/manual/html_node/elisp/Macros.html#Macros)吗？使用诸如您的`loop`示例之类的宏是完全可以的。

但是你会`eval-when-compile`在要求周围使用。

实际上`(eval-when-compile (require 'cl))`，仅在我的 Emacs 的根 lisp 文件夹中出现了 66 次。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-29T12:24:11.357

除非您打算将代码集成到 Emacs 中，否则请使用 CL 包，并将此代码段放入您的代码中`.emacs`以禁用警告。

```
(byte-compile-disable-warning 'cl-functions) 
```

[注意：您可以在nicferrier 的博客](http://nic.ferrier.me.uk/)上找到有关 elisp 编程的一些建议。

# java - Java set a callback from ExecutorService

> ID：13116192
> 
> 赞同：14
> 
> 时间：2012-10-29T05:14:16.953
> 
> 标签：java, multithreading, callback, threadpool, executorservice

I have a fixedThreadPool that I am using to run a bunch of worker threads to achieve parallel execution of a task with many components.

When all threads have finished, I retrieve their results (which are quite large) using a method (getResult) and write them to a file.

Ultimately, to save memory and be able to see intermediate results, I'd like each thread to write its result to the file as soon as it finishes execution and then free its memory.

Ordinarily, I'd add code to that effect to the end of the run() method. However, certain other objects in this class also calls these threads, but DO NOT want them to write their results to file - instead they use their results to perform other calculations, which are eventually written to file.

So, I was wondering if it's possible to attach a callback function to the event of a thread finishing using the ExecutorService. That way, I can immediately retrieve its result and free the memory in that scenario, but not break the code when those threads are used in other scenarios.

Is such a thing possible?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-07-23T01:17:23.543

如果使用 Google Guava 是一个选项，您可以通过以下方式使用[ListenableFuture接口：](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/util/concurrent/ListenableFuture.html)

1.  通过将 an 转换`ExecutorService`为[ListeningExecutorService](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/util/concurrent/ListeningExecutorService.html)`MoreExecutors.listeningDecorator(existingExecutorService)`
2.  的`submit(Callable<V>)`方法`ListeningExecutorService`已缩小为返回 a `ListenableFuture`，它是 的子接口`Future`。
3.  `ListenableFuture`有一个`addListener()`方法，因此您可以注册一个回调以在未来完成时运行。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2018-01-24T17:01:56.113

您可以使用以下方式在 Java 8+ 中添加线程返回时的回调`CompletableFuture`，其中`t`是您长时间运行的计算的结果，

```
CompletableFuture.supplyAsync(() -> {
    T t = new T();
    // do something
    return t;
}).thenApply(t -> {
    // process t
}); 
```

如果您只想在 Java 7 中使用回调，您可以执行以下操作，

```
int x = 10;
ExecutorService fixedThreadPool = Executors.newFixedThreadPool(x);
Future<T> result = fixedThreadPool.submit(() -> {
    // do calculation
    return T;
});
fixedThreadPool.submit(() -> {
    long minutesToWait = 5;
    T t = null;
    try {
        t = result.get(minutesToWait, TimeUnit.MINUTES);
    } catch (InterruptedException | ExecutionException | TimeoutException e) {
        LOGGER.error(e);
    }
    if (t != null) {
        // process t
    }
}); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-29T05:20:59.183

[`ExecutorService#submit`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutorService.html#submit%28java.util.concurrent.Callable%29)return[`FutureTask<T>`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/FutureTask.html)可以帮助您检索结果，并且该`ExecutorService#get`方法将阻止执行，直到计算未完成。例子 -

```
ExecutorService executor = Executors.newFixedThreadPool(10);
Future<Long> future = executor.submit(new Callable<Long>(){
       @Override
       public Long call() throws Exception {
           long sum = 0;
           for (long i = 0; i <= 10000000l; i++) {
               sum += i;
           }
           return sum;
       }
});
Long result = future.get();
System.out.println(result); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-29T05:20:29.890

> 所以，我想知道是否可以将回调函数附加到使用 ExecutorService 完成的线程事件。

不直接，不，但有几种方法可以实现这一点。想到的最简单的方法是将您的方法包装`Runnable`在另一个`Runnable`可以收获结果的方法中。

所以你会做这样的事情：

```
threadPool.submit(new ResultPrinter(myRunnable));
...

private static class ResultPrinter implements Runnable {
    private final MyRunnable myRunnable;
    public ResultPrinter(MyRunnable myRunnable) {
        this.myRunnable = myRunnable;
    }
    public void run() {
        myRunnable.run();
        Results results = myRunnable.getResults();
        // print results;
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-03-07T07:30:43.033

# 项目织机

[Loom 项目](https://wiki.openjdk.java.net/display/loom/Main)有望为 Java 的并发设施带来新的特性。[现在](http://jdk.java.net/loom/)可以使用基于早期访问 Java 17 的实验性构建。Loom 团队正在征求反馈。有关详细信息，请参阅团队成员（例如 Ron Pressler 或 Alan Bateman）的任何最新视频和文章。Loom 已经发展，因此请研究最新的资源。

Project Loom 的一个方便的功能是制作[`ExecutorService`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/concurrent/ExecutorService.html)be [`AutoCloseable`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/AutoCloseable.html)。这意味着我们可以使用 try-with-resources 语法来自动关闭执行器服务。控制流阻塞在块的末尾，`try`直到所有提交的任务都完成/失败/取消。之后，执行器服务会自动关闭。简化我们的代码，并通过可视化代码结构使我们等待任务完成的意图变得明显。

Project Loom 的另一个重要特性是虚拟线程（又名[纤维](https://en.wikipedia.org/wiki/Fiber_(computer_science))）。虚拟线程在内存和 CPU 方面都是轻量级的。

*   关于内存，每个虚拟线程都会获得一个根据需要增长和缩小的堆栈。
*   关于 CPU，许多虚拟线程中的每一个都位于多个平台/内核线程中的任何一个之上。这使得阻塞*非常*便宜。当一个虚拟线程阻塞时，它被“停放”（搁置），以便另一个虚拟线程可以继续在“真实”平台/内核线程上执行。

轻量级意味着我们一次可以拥有*许多*虚拟线程，甚至数百万。

➥ 您的问题的挑战是在提交的任务准备好返回其结果时立即做出反应，而无需等待所有其他任务完成。这使用 Project Loom 技术要简单得多。

## 只需在另一个线程上调用`get`每个`Future`

因为我们有几乎无限数量的线程，而且阻塞非常便宜，所以我们可以提交一个任务，该任务只需调用[`Future#get`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/concurrent/Future.html#get())以等待每个我们提交给执行器服务的每个[`Future`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/concurrent/Future.html)返回的结果。[`Callable`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/concurrent/Callable.html)对块的调用`get`，等待`Callable`它来自的地方完成工作并返回结果。

通常，我们希望避免将`Future#get`调用分配给传统的后台线程。该线程将停止所有进一步的工作，直到被阻塞的`get`方法返回。但是使用 Project Loom，会检测到该阻塞调用，并且它的线程被“停放”，因此其他线程可能会继续。当阻塞调用最终返回时，Loom 也会检测到，导致不再阻塞任务的虚拟线程很快被安排在“真实”线程上进一步执行。所有这些停放和重新调度都快速而自动地发生，我们作为 Java 程序员无需付出任何努力。

为了演示，我的任务结果被填充到并发映射中。为了表明一旦结果可用，这种情况就会发生，我重写了类`put`上的方法来发送消息。`ConcurrentSkipListMap``System.out.println`

完整的示例应用程序如下所示。但 3 条关键线如下。请注意我们如何实例化一个`Callable`休眠几秒钟的 a，然后将当前时刻作为一个[`Instant`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/time/Instant.html)对象返回。当我们提交每个`Callable`对象时，我们会返回一个`Future`对象。对于每个返回`Future`的 ，我们将另一个任务 a 提交`Runnable`给我们的同一个执行服务，该服务仅调用`Future#get`，等待结果，并最终将该结果发布到我们的结果映射中。

```
final Callable < Instant > callable = new TimeTeller( nth );
final Future < Instant > future = executorService.submit( callable ); // Submit first task: a `Callable`, an instance of our `TimeTeller` class.
executorService.submit( ( ) -> results.put( nth , future.get() ) );   // Submit second task: a `Runnable` that merely waits for our first task to finish, and put its result into a map. 
```

警告：我不是并发方面的专家。但我相信我在这里的做法是合理的。

警告：Project Loom 仍处于实验阶段，其 API 和行为都可能发生变化。

```
package work.basil.example.callbacks;

import java.time.Duration;
import java.time.Instant;
import java.util.concurrent.*;

public class App
{
    public static void main ( String[] args )
    {
        App app = new App();
        app.demo();
    }

    private void demo ( )
    {
        System.out.println( "INFO - Starting `demo` method. " + Instant.now() );
        int limit = 10;
        ConcurrentNavigableMap < Integer, Instant > results = new ConcurrentSkipListMap <>()
        {
            @Override
            public Instant put ( Integer key , Instant value )
            {
                System.out.println( "INFO - Putting key=" + key + " value=" + value + " at " + Instant.now() );
                return super.put( key , value );
            }
        };
        try (
                ExecutorService executorService = Executors.newVirtualThreadExecutor() ;
        )
        {
            for ( int i = 0 ; i < limit ; i++ )
            {
                final Integer nth = Integer.valueOf( i );
                final Callable < Instant > callable = new TimeTeller( nth );
                final Future < Instant > future = executorService.submit( callable ); // Submit first task: a `Callable`, an instance of our `TimeTeller` class.
                executorService.submit( ( ) -> results.put( nth , future.get() ) );   // Submit second task: a `Runnable` that merely waits for our first task to finish, and put its result into a map.
            }
        }
        // At this point flow-of-control blocks until:
        // (a) all submitted tasks are done/failed/canceled, and
        // (b) the executor service is automatically closed.
        System.out.println( "INFO - Ending `demo` method. " + Instant.now() );
        System.out.println( "limit = " + limit + " | count of results: " + results.size() );
        System.out.println( "results = " + results );
    }

    record TimeTeller(Integer id) implements Callable
    {
        @Override
        public Instant call ( ) throws Exception
        {
            // To simulate work that involves blocking, sleep a random number of seconds.
            Duration duration = Duration.ofSeconds( ThreadLocalRandom.current().nextInt( 1 , 55 ) );
            System.out.println( "id = " + id + " ➠ duration = " + duration );
            Thread.sleep( duration );
            return Instant.now();
        }
    }
} 
```

跑的时候。

```
INFO - Starting `demo` method. 2021-03-07T07:51:03.406847Z
id = 1 ➠ duration = PT27S
id = 2 ➠ duration = PT4S
id = 4 ➠ duration = PT6S
id = 5 ➠ duration = PT16S
id = 6 ➠ duration = PT34S
id = 7 ➠ duration = PT33S
id = 8 ➠ duration = PT52S
id = 9 ➠ duration = PT17S
id = 0 ➠ duration = PT4S
id = 3 ➠ duration = PT41S
INFO - Putting key=2 value=2021-03-07T07:51:07.443580Z at 2021-03-07T07:51:07.444137Z
INFO - Putting key=0 value=2021-03-07T07:51:07.445898Z at 2021-03-07T07:51:07.446173Z
INFO - Putting key=4 value=2021-03-07T07:51:09.446220Z at 2021-03-07T07:51:09.446623Z
INFO - Putting key=5 value=2021-03-07T07:51:19.443060Z at 2021-03-07T07:51:19.443554Z
INFO - Putting key=9 value=2021-03-07T07:51:20.444723Z at 2021-03-07T07:51:20.445132Z
INFO - Putting key=1 value=2021-03-07T07:51:30.443793Z at 2021-03-07T07:51:30.444254Z
INFO - Putting key=7 value=2021-03-07T07:51:36.445371Z at 2021-03-07T07:51:36.445865Z
INFO - Putting key=6 value=2021-03-07T07:51:37.442659Z at 2021-03-07T07:51:37.443087Z
INFO - Putting key=3 value=2021-03-07T07:51:44.449661Z at 2021-03-07T07:51:44.450056Z
INFO - Putting key=8 value=2021-03-07T07:51:55.447298Z at 2021-03-07T07:51:55.447717Z
INFO - Ending `demo` method. 2021-03-07T07:51:55.448194Z
limit = 10 | count of results: 10
results = {0=2021-03-07T07:51:07.445898Z, 1=2021-03-07T07:51:30.443793Z, 2=2021-03-07T07:51:07.443580Z, 3=2021-03-07T07:51:44.449661Z, 4=2021-03-07T07:51:09.446220Z, 5=2021-03-07T07:51:19.443060Z, 6=2021-03-07T07:51:37.442659Z, 7=2021-03-07T07:51:36.445371Z, 8=2021-03-07T07:51:55.447298Z, 9=2021-03-07T07:51:20.444723Z} 
```

# ruby-on-rails - 模型模拟自动访问 模型的所有现有方法

> ID：13116199
> 
> 赞同：0
> 
> 时间：2012-10-29T05:15:13.400
> 
> 标签：ruby-on-rails

模型模拟是否会自动访问 rspec 中模型的所有现有方法？我想不仅仅是为了确认。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T12:33:16.097

正如你所怀疑的，他们没有。这是使用模拟/存根和工厂作为测试对象的区别之一：

*   模拟/存根：您为测试所需的对象预定义了一些行为，但您没有对其进行测试，因此它会以一些预定义的响应进行响应。
*   工厂：您使用它们来生成具有所有行为的实际对象，因此可以将所有内容都包含在测试中。当被分解的对象是测试的主题时，您通常使用工厂。

# string - Replacing roman numbers by corresponding numerals

> ID：13116201
> 
> 赞同：1
> 
> 时间：2012-10-29T05:15:23.607
> 
> 标签：string, string-matching, roman-numerals

I am developing a product search platform. I try to show the most appropriate product first based on string matching as I have no other means of identifying what user has searched for. However, one major problem is in a query like this.

User Query :: `Samsung Galaxy S3`

Database Values :: `Samsung Galaxy sIII`, `Samsung Galaxy S III`, `Samsung Galaxy s3`

As we can see, only 1 of the above products is what user will get. Also, if I remove s3 from users query, we will have thousands of irrelevant phones(Entire Samsung galaxy series) visible to the user.

So, I have to filter out the rest. Is there any way, I can efficiently convert roman numbers to numerals. I am using Javascript for string matching. Can this be done by reg exp ? If so, please guide me in that. I have never used it.

Please note solving this problem involves at first identifying the roman number and then converting it to corresponding numerical value. Ex- In case 1 , we have to split out `III` from `sIII` and then convert it to `3`

Any method or way to solve this will be appreciated.

Thanks !

# mysql - Result set is object for 1 record, array for many?

> ID：13116203
> 
> 赞同：5
> 
> 时间：2012-10-29T05:15:53.443
> 
> 标签：mysql, powershell, dataset, dataadapter

I can't believe it, but all indications are that my PowerShell code is returning the result of a `SELECT` query that finds 1 record as an object, but if there are two or more records the same code returns an array of objects. What am I doing wrong?

Below is the code:

```
function Connect-MySQL([string]$MySQLHost, [string]$user, [string]$pass, [string]$database) { 
    Write-Verbose "Connect-MySQL"
    # Load MySQL .NET Connector Objects 
    [void][system.reflection.Assembly]::LoadWithPartialName("MySql.Data") 

    # Open Connection 
    $connStr = "server=$MySQLHost;port=3306;uid=$user;pwd=$pass;database=$database;Pooling=FALSE" 
    try {
        $con = New-Object MySql.Data.MySqlClient.MySqlConnection($connStr) 
        $con.Open()
    } catch [System.Management.Automation.PSArgumentException] {
        Write-Verbose "Unable to connect to MySQL server, do you have the MySQL connector installed..?"
        Write-Verbose $_
        Exit
    } catch {
        Write-Verbose "Unable to connect to MySQL server..."
        Write-Verbose $_.Exception.GetType().FullName
        Write-Verbose $_.Exception.Message
        exit
    }
    Write-Verbose "Connected to MySQL database $MySQLHost\$database"

    return $con 
}

function Disconnect-MySQL($con) {
    Write-Verbose "Disconnect-MySQL"
    $con.Close()
}

function Execute-MySQLNonQuery($con, [string]$sql) { 
    $cmd = New-Object MySql.Data.MySqlClient.MySqlCommand($sql, $con)            # Create SQL command
    $Rows = $cmd.ExecuteNonQuery()                                               # Execute command
    $cmd.Dispose()                                                               # Dispose of command object
#   if ($Rows) { 
        return $Rows
#   } else { 
#       return $false 
#   } 
} 

function Execute-MySQLQuery($con, [string]$sql) { 
    $cmd = New-Object MySql.Data.MySqlClient.MySqlCommand($sql, $con)            # Create SQL command
    $dataAdapter = New-Object MySql.Data.MySqlClient.MySqlDataAdapter($cmd)      # Create data adapter from query command
    $dataSet = New-Object System.Data.DataSet                                    # Create dataset
    $dataAdapter.Fill($dataSet, "data") | Out-Null                               # Fill dataset from data adapter, with name "data"              
    $cmd.Dispose()                                                               # Dispose of command object
    return $dataSet.Tables["data"]                                               # Returns an array of results
}

# Connection Variables 
$MySQLHost = '10.10.10.111' 
$user = 'user' 
$pass = 'test' 
$database = 'test_db' 

# Connect to MySQL Database 
$con = Connect-MySQL $MySQLHost $user $pass $database

# Get requests
$sql = "
SELECT *
FROM o365_statuses as x
WHERE x.action = 'Z'
AND x.status = 0"
$result = Execute-MySQLQuery $con $sql

Write-Host $result.Count
Foreach ($r in $result) {
    write-host "$($r.id) $($r.email)"
} 
```

When `$result` is only 1 record, `$result.Count` returns nothing, and I can access the columns as `$result.id` and not `$result[0].id`. If there are 2 or more records returned the opposite is true.

Please tell me I'm doing something wrong, and that this is not the way PowerShell works.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T20:21:55.197

PowerShell 根据这个简单的算法返回结果：

*   多个项目 --> 返回这些项目的数组
*   仅一项 --> 退回该项

通常，强制 PowerShell 始终返回一个数组是一种很好的做法，使用以下任一方法：

```
,(code)
@(code) 
```

但是，这些运算符**并不**相同！您可以安全地将`@()`分组运算符应用于任何东西以强制数组输出——数组总是有一个`Count`属性，例如：

```
$a = @(Get-Process | select -First 2); $a.Count   # returns 2
$a = @(Get-Process | select -First 1); $a.Count   # returns 1 
```

另一方面，逗号数组构造运算符的工作方式如下：

```
$a = ,(Get-Process | select -First 2); $a.Count   # returns 1
$a = ,(Get-Process | select -First 1); $a.Count   # returns 1 
```

...因为它使用给定的任何内容构建一个**嵌套**数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T06:28:07.807

一个函数“展开”返回的集合，即实际上它返回 null（0 个项目）或单个对象（它可能具有也可能不具有属性`Count`，在您的情况下它没有）或 2+ 个对象的数组（但不是原始集合实例）。

为了解决展开使用`,`操作符：

```
return , $Rows 
```

逗号运算符创建单个对象（操作数）的数组，即一个新集合。这个新集合也在返回时展开，但不是递归展开。那就是返回一个对象，它是`$Rows`原样的，相同的实例。

# visual-c++ - MSVC 2010 error with Boost on /MT

> ID：13116206
> 
> 赞同：1
> 
> 时间：2012-10-29T05:16:22.297
> 
> 标签：visual-c++

I am currently having issue compiling my project with MSVC 2010 when /MT is enable in Code generation.

1>LINK : fatal error LNK1104: cannot open file 'libboost_thread-vc100-mt-sgd-1_51.lib'

If i do /MD it works fine but i want to do /MT so i can run the program on any pc.

i cannot seem to find the file "libboost_thread-vc100-mt-sgd-1_51.lib" even on the boost main website : [http://sourceforge.net/projects/boost/files/boost-binaries/1.51.0-x64/](http://sourceforge.net/projects/boost/files/boost-binaries/1.51.0-x64/)

using bjam i tried : .\b2 --with-thread variant=release link=static threading=multi runtime-link=static

and still no go, same error as before...any idea how i can fix this?

# xml - 第一个最后一个元素第二个变化

> ID：13116208
> 
> 赞同：0
> 
> 时间：2012-10-29T05:16:37.517
> 
> 标签：xml, xslt

XSLT XML 问题。

我对上一个问题有另一个变体。我必须输出每个部分的第一页和最后一页元素。如下所示。

XSLT 1.0 解决方案和 XSLT 2.0 解决方案将不胜感激。我提前感谢您的时间和帮助。

谢谢JJ。

输入：

```
<root>
  <page number="1" section="Arsenal">Arsenal</page> 
  <page number="2" section="Arsenal">Arsenal</page> 
  <page number="3" section="Arsenal">Arsenal</page> 
  <page number="4" section="Arsenal">Arsenal</page> 
  <page number="5" section="Arsenal">Arsenal</page> 
  <page number="6" section="Arsenal">Arsenal</page> 
  <page number="7" section="Chelsea">Chelsea</page> 
  <page number="8" section="Chelsea">Chelsea</page> 
  <page number="9" section="Chelsea">Chelsea</page> 
  <page number="10" section="Chelsea">Chelsea</page> 
  <page number="11" section="Chelsea">Chelsea</page> 
  <page number="12" section="Chelsea">Chelsea</page> 
  <page number="13" section="ManUnited">ManUnited</page> 
  <page number="14" section="ManUnited">ManUnited</page> 
  <page number="15" section="ManUnited">ManUnited</page> 
  <page number="16" section="ManUnited">ManUnited</page> 
  <page number="17" section="ManUnited">ManUnited</page> 
  <page number="18" section="ManUnited">ManUnited</page> 
  <page number="19" section="ManCity">ManCity</page> 
  <page number="20" section="ManCity">ManCity</page> 
  <page number="21" section="ManCity">ManCity</page> 
  <page number="22" section="ManCity">ManCity</page> 
  <page number="23" section="ManCity">ManCity</page> 
  <page number="24" section="ManCity">ManCity</page>
  <page number="25" section="Arsenal">Arsenal</page> 
  <page number="26" section="Arsenal">Arsenal</page> 
  <page number="27" section="Arsenal">Arsenal</page> 
  <page number="28" section="Arsenal">Arsenal</page> 
  <page number="29" section="Arsenal">Arsenal</page>   
 </root> 
```

输出：

```
 <root>
  <page number="1" section="Arsenal">Arsenal</page> 
  <page number="6" section="Arsenal">Arsenal</page> 
  <page number="7" section="Chelsea">Chelsea</page> 
  <page number="12" section="Chelsea">Chelsea</page> 
  <page number="13" section="ManUnited">ManUnited</page> 
  <page number="18" section="ManUnited">ManUnited</page> 
  <page number="19" section="ManCity">ManCity</page> 
  <page number="24" section="ManCity">ManCity</page>
  <page number="25" section="Arsenal">Arsenal</page> 
  <page number="29" section="Arsenal">Arsenal</page> 
 </root> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T08:51:28.980

在 XSLT1.0 和 2.0 中都可以使用的一种方法是简单地让模板具有将匹配具有相同**@section属性的****页面**元素作为最前面和后面的兄弟姐妹

 **```
<xsl:template match="page
    [@section = preceding-sibling::page[1]/@section]
    [@section = following-sibling::page[1]/@section]" /> 
```

这是完整的 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="xml" indent="yes"/>

   <xsl:template match="page[@section = preceding-sibling::page[1]/@section][@section = following-sibling::page[1]/@section]" />

   <xsl:template match="@*|node()">
      <xsl:copy>
         <xsl:apply-templates select="@*|node()"/>
      </xsl:copy>
   </xsl:template>
</xsl:stylesheet> 
```

应用于输入 XML 时，输出以下内容

```
<root>
   <page number="1" section="Arsenal">Arsenal</page>
   <page number="6" section="Arsenal">Arsenal</page>
   <page number="7" section="Chelsea">Chelsea</page>
   <page number="12" section="Chelsea">Chelsea</page>
   <page number="13" section="ManUnited">ManUnited</page>
   <page number="18" section="ManUnited">ManUnited</page>
   <page number="19" section="ManCity">ManCity</page>
   <page number="24" section="ManCity">ManCity</page>
   <page number="25" section="Arsenal">Arsenal</page>
   <page number="29" section="Arsenal">Arsenal</page>
</root> 
```

但是，仅在 XSLT2.0 中，您可以使用带有**group-adjacent**属性的**xsl:for-each-group 。**

 **这个 XSLT 也应该产生相同的输出

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="xml" indent="yes"/>

   <xsl:template match="root">
      <xsl:for-each-group select="page" group-adjacent="@section">
         <xsl:apply-templates select="current-group()[1]|current-group()[last()]"/>
      </xsl:for-each-group>
   </xsl:template>

   <xsl:template match="@*|node()">
      <xsl:copy>
         <xsl:apply-templates select="@*|node()"/>
      </xsl:copy>
   </xsl:template>
</xsl:stylesheet> 
```****

# c++ - SFML 不会开窗？

> ID：13116213
> 
> 赞同：1
> 
> 时间：2012-10-29T05:16:52.557
> 
> 标签：c++, c, sfml

因此，正如标题所示，我正在尝试在**Windows 7**上的**CodeBlocks** (MinGW v.4.7.0)中使用**SFML 1.6**创建一个简单的窗口（不，我没有使用 ATI GPU）。

 ****这是代码：

```
#include <SFML/Window.hpp>

int main()
{
    sf::Window App(sf::VideoMode(800, 600, 16), "SFML Window");
    App.Display();

    return 0;
} 
```

每当我尝试运行此代码时，它只会说`Program.exe is not responding`并且必须使用`Close this program`. 有趣的是，SFML 教程网站上提供的第一个教程（`sf::Clock`在控制台中使用的那个）可以正常工作，因此可以正确加载库。

有人可以帮我找到错误的原因吗？

除了崩溃之外，我没有收到任何编译器或应用程序错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T05:30:49.703

The problem is that you haven't created the main loop which polls for events and handles OS messages. Append this to `main()` (yes, this is a snippet from the SFML documentation):

```
while (App.IsOpened())
{
   // Process events
   sf::Event Event;
   while (App.GetEvent(Event))
   {
      // Close window : exit
      if (Event.Type == sf::Event::Closed)
         App.Close();
   }

   // Clear the screen
   App.Clear();

   // Put your update and rendering code here...

   // Update the window
   App.Display();
} 
```

It is therefore not necessary for you to call `App.Display()` after you create the window.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-17T15:32:04.753

对于那些想要整件事的人​​来说，这是从[SFML 网站](https://www.sfml-dev.org/tutorials/2.5/window-window.php#bringing-the-window-to-life)中提取的一个片段。

```
#include <SFML/Window.hpp>

int main()
{
    sf::Window window(sf::VideoMode(800, 600), "SFML Window");

    // run the program as long as the window is open
    while (window.isOpen())
    {
        // check all the window's events that were triggered since the last iteration of the loop
        sf::Event event;
        while (window.pollEvent(event))
        {
            // "close requested" event: we close the window
            if (event.type == sf::Event::Closed)
                window.close();
        }
    }    

    return 0;
} 
```

你会得到：

![](../Images/ed363d64e963056019619c1d08823084.png)****

# objective-c - 配置应用程序以同步和检索 MBO 数据

> ID：13116219
> 
> 赞同：0
> 
> 时间：2012-10-29T05:17:23.940
> 
> 标签：objective-c, ios, xcode, sybase

我们正在关注sybase的在线文档。
根据该文档，我们已成功导入库和代码。

现在要根据文档配置应用程序，我们必须首先使用以下方法注册回调：

通过执行注册回调对象：

MyCallbackHandler* theCallbackHandler = [MyCallbackHandler new]; [SampleApp_SampleAppDB registerCallbackHandler:theCallbackhandler];

我们应该在哪个文件中编写这段代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-05T10:24:23.153

这应该在应用程序初始化时。例如视图上的 ViewController.m 确实加载了。

# sql-server-2008 - 如何从sql server 2008中的日期获取月份的周数

> ID：13116222
> 
> 赞同：40
> 
> 时间：2012-10-29T05:17:28.957
> 
> 标签：sql-server-2008, tsql

在 microsoft sql server 的 SQL Statement 中，有一个内置函数可以获取周数，但它是一年中的第几周。

```
Select DatePart(week, '2012/11/30') // **returns 48** 
```

返回值**48**是一年中的周数。

而不是**48**，我想得到**1、2、3 或 4**（一个月的周数）。我认为本月的周数可以通过具有本周月数的模块来实现。例如

```
Select DATEPART(week, '2012/11/30')%MONTH('2012/11/30') 
```

但我想知道是否有其他内置函数可以在 MS SQL SERVER 中获取当月的 WeekNumber。

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-10-29T10:35:40.773

这里有 2 种不同的方式，都假设一周从星期一开始

如果您希望周是完整的，那么它们属于它们开始的月份：因此，星期六 2012-09-01 和星期日 2012-09-02 是第 4 周，星期一 2012-09-03 是第 1 周，请使用：

```
DECLARE @date date = '2012-09-01'
SELECT (day(datediff(d,0,@date)/7*7)-1)/7+1 
```

如果您的周数因月份变化而减少，因此星期六 2012-09-01 和星期日 2012-09-02 是第 1 周，星期一 2012-09-03 是第 2 周，请使用以下命令：

```
DECLARE @date date = '2012-09-01'
SELECT 
  datediff(ww,datediff(d,0,dateadd(m,datediff(m,7,@date),0)
    )/7*7,dateadd(d,-1,@date))+1 
```

我收到了杰拉德的电子邮件。他指出了第二种方法的缺陷。现在应该修复

我收到了本威尔金斯的一封电子邮件。他指出了第一种方法的缺陷。现在应该修复

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-08-06T05:20:35.723

```
DECLARE @DATE DATETIME
SET @DATE = '2013-08-04'

SELECT DATEPART(WEEK, @DATE)  -
    DATEPART(WEEK, DATEADD(MM, DATEDIFF(MM,0,@DATE), 0))+ 1 AS WEEK_OF_MONTH 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-10-29T06:56:58.880

没有内置功能。这取决于您所说的每月一周的含义。您可能的意思是它是否在前 7 天（第 1 周），后 7 天（第 2 周）等。在这种情况下，它只是

`(DATEPART(day,@Date)-1)/7 + 1`

如果您想使用与 DATEPART(week,) 相同的周编号，您可以使用当月第一天的周数与相关日期 (+1) 之间的差异：

`(DATEPART(week,@Date)- DATEPART(week,DATEADD(m, DATEDIFF(m, 0, @Date), 0))) + 1`

或者，您可能需要其他东西，具体取决于您所说的周数。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-12-30T03:42:45.323

只要看看日期，看看它在什么范围内。

范围 1-7 是第 1 周，范围 8-14 是第 2 周，依此类推。

```
SELECT 
CASE WHEN DATEPART(day,yourdate) < 8 THEN '1' 
  ELSE CASE WHEN DATEPART(day,yourdate) < 15 then '2' 
    ELSE CASE WHEN  DATEPART(day,yourdate) < 22 then '3' 
      ELSE CASE WHEN  DATEPART(day,yourdate) < 29 then '4'     
        ELSE '5'
      END
    END
  END
END 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-11-10T12:26:03.137

与第二种解决方案类似，代码更少：

```
declare @date datetime = '2014-03-31'
SELECT DATEDIFF(week,0,@date) - (DATEDIFF(week,0,DATEADD(dd, -DAY(@date)+1, @date))-1) 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-03-10T07:34:07.607

看看这个......它工作正常。

```
declare @date as datetime = '2014-03-10'
select DATEPART(week,@date) - DATEPART(week,cast(cast(year(@date) as varchar(4))+'-' + cast(month(@date) as varchar(2)) + '-01' as datetime))+1 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-08-01T11:37:25.577

```
WeekMonth = CASE WHEN (DATEPART(day,TestDate) - datepart(dw,TestDate))>= 22 THEN '5' 
                 WHEN (DATEPART(day,TestDate) - datepart(dw,TestDate))>= 15 THEN '4' 
                 WHEN (DATEPART(day,TestDate) - datepart(dw,TestDate))>= 8 THEN '3'
                 WHEN (DATEPART(day,TestDate) - datepart(dw,TestDate))>= 1 THEN '2' 
                 ELSE '1'
             END 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-10-29T05:36:32.600

没有内置函数可以获取周数。无论如何，我认为除以对您没有帮助，因为一个月中的周数不是恒定的。

[http://msdn.microsoft.com/en-us/library/bb675168.aspx](http://msdn.microsoft.com/en-us/library/bb675168.aspx)

我想您可以将数字（48）除以 4，然后将相同的模块作为该月的周数，然后在结果中加一。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-07-09T21:40:48.553

以下是获取一个月一周的第一天和最后一天的建议：

```
-- Build a temp table with all the dates of the month 
drop table #tmp_datesforMonth 
go

declare @begDate datetime
declare @endDate datetime

set @begDate = '6/1/13'
set @endDate = '6/30/13';

WITH N(n) AS  
(   SELECT 0  
        UNION ALL 
    SELECT n+1 
    FROM N 
    WHERE n <= datepart(dd,@enddate)
)
SELECT      DATEADD(dd,n,@BegDate) as dDate 
into #tmp_datesforMonth
FROM        N
WHERE       MONTH(DATEADD(dd,n,@BegDate)) = MONTH(@BegDate)

--- pull results showing the weeks' dates and the week # for the month (not the week # for the current month) 

select  MIN(dDate) as BegOfWeek
, MAX(dDate) as EndOfWeek 
, datediff(week, dateadd(week, datediff(week, 0, dateadd(month, datediff(month, 0, dDate), 0)), 0), dDate) as WeekNumForMonth 
from #tmp_datesforMonth
group by datediff(week, dateadd(week, datediff(week, 0, dateadd(month, datediff(month, 0, dDate), 0)), 0), dDate) 
order by 3, 1 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2014-08-22T19:49:18.787

使用 Dense_Rank 函数的肮脏但简单的单列。性能会受到影响，但仍然有效。

```
DENSE_RANK()over(Partition by Month(yourdate),Year(yourdate) Order by Datepart(week,yourdate) asc) as Week 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2014-11-26T01:14:16.787

```
floor((day(@DateValue)-1)/7)+1 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2014-12-01T12:49:51.450

干得好....

我使用下面的代码..

```
DATEPART(WK,@DATE_INSERT) - DATEPART(WK,DATEADD(DAY,1,DATEADD(s,-1,DATEADD(mm, DATEDIFF(m,0,@DATE_INSERT),0)))) + 1 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2015-01-02T11:08:28.077

这是一个查询，它可以将周数带入可能`startday`的`endday`星期几。

```
SET DATEFIRST 2    

DECLARE @FROMDATE DATE='12-JAN-2015'
-- Get the first day of month
DECLARE @ALLDATE DATE=DATEADD(month, DATEDIFF(month, 0, @FROMDATE), 0)
DECLARE @FIRSTDATE DATE

;WITH  CTE as
(
     -- Get all dates in that month
     SELECT 1 RNO,CAST(@ALLDATE AS DATE) as DATES 
     UNION ALL
     SELECT RNO+1, DATEADD(DAY,1,DATES )
     FROM    CTE
     WHERE   DATES < DATEADD(MONTH,1,@ALLDATE)
)
-- Retrieves the first day of week, ie, if first day of week is Tuesday, it selects first Tuesday 
SELECT TOP 1 @FIRSTDATE =   DATES 
FROM    CTE 
WHERE DATEPART(W,DATES)=1

SELECT (DATEDIFF(DAY,@FIRSTDATE,@FROMDATE)/7)+1 WEEKNO 
```

有关更多信息，我已经回答了以下问题。可以检查一下。

*   [如何根据 DATEFIRST 找到日期的周数](https://stackoverflow.com/questions/27700839/how-do-i-find-week-number-of-a-date-according-to-datefirst)

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2018-03-15T10:47:24.540

试试下面的代码：

```
declare @dt datetime='2018-03-15 05:16:00.000'
IF (Select (DatePart(DAY,@dt)%7))>0
  Select  (DatePart(DAY,@dt)/7) +1
ELSE
  Select  (DatePart(DAY,@dt)/7) 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2019-09-09T06:10:41.707

有一个内置选项可以获取**一年中的周数**

```
**select datepart(week,getdate())** 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2015-12-21T11:41:14.943

您可以通过获取月份的最小周数并从周数中扣除来简单地获得周数。假设您有一张带日期的表格

```
select
    emp_id, dt , datepart(wk,dt) - (select min(datepart(wk,dt))
from
    workdates ) + 1 from workdates 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2018-03-15T11:36:42.797

解决方案：

```
declare @dt datetime='2018-03-31 05:16:00.000'
IF (Select (DatePart(DAY,@dt)%7))>0
Select  (DatePart(DAY,@dt)/7) +1
ELSE
Select  (DatePart(DAY,@dt)/7) 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2019-02-02T12:32:15.157

```
declare @end_date datetime = '2019-02-28';
select datepart(week, @end_date) - datepart(week, convert(datetime, substring(convert(nvarchar, convert(datetime, @end_date), 127), 1, 8) + '01')) + 1 [Week of Month]; 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2019-05-08T10:12:30.910

这是在任何情况下针对此查询的久经考验的解决方案 - 例如，如果本月 1 日是星期五，那么这也将起作用 -

```
select (DATEPART(wk,@date_given)-DATEPART(wk,dateadd(d,1-day(@date_given),@date_given)))+1 
```

以上是一些解决方案，如果该月的第一个日期是星期五，则将失败，那么第四个将是该月的第二周

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2019-07-22T18:04:25.743

这里的逻辑在每个月也可以工作 4.3 周。从除一月之外的每个月的 DATEPART(WEEK) 中获取。只是另一种看待事物的方式。这也将占第 5 周的月份

```
DECLARE @date VARCHAR(10)
SET @date = '7/27/2019'

SELECT CEILING(DATEPART(WEEK,@date)-((DATEPART(MONTH,@date)-1)*4.3333)) 'Week of Month' 
```

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2021-06-18T07:11:56.003

仅当您在选择列表中显示每月的每周时，以下才会起作用。否则 rank 函数将不起作用，但它是一个很好的解决方案。

```
SELECT DENSE_RANK() OVER (PARTITION BY MONTH(DATEFIELD) 
                          ORDER BY DATEPART(WEEK,DATEFIELD) ASC) AS WeekofMont 
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2021-10-08T00:59:49.240

试试这个

```
declare @date datetime = '20210928'

select convert(int,(((cast(datepart(day,@date) as decimal(4,2))/7)-(1.00/7.00))+1.00)) 
```

* * *

## 回答 #23

> 赞同：-1
> 
> 时间：2016-02-05T11:47:25.210

代码如下：

```
set datefirst 7
declare @dt datetime='29/04/2016 00:00:00'
select (day(@dt)+datepart(WEEKDAY,dateadd(d,-day(@dt),@dt+1)))/7 
```

* * *

## 回答 #24

> 赞同：-1
> 
> 时间：2019-11-12T06:49:59.410

```
select @DateCreated, DATEDIFF(WEEK, @DateCreated, GETDATE()) 
```

# sql - 根据某些条件从表中查询

> ID：13116223
> 
> 赞同：2
> 
> 时间：2012-10-29T05:17:31.793
> 
> 标签：sql, oracle

我有一个这样的场景，有 2 个表 table_1 和 table_2。两个表都有一个名为 column_1 的公共列（没有 foreign_Key 约束！！）。Table_1 可以有一些额外的行，这些行在 table_2 中不存在（换句话说，table_2 是 table_1 的子集）。我想列出所有仅存在于 table_1 但不存在于 table_2 中的项目。请帮助编写相同的sql查询。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T05:19:10.593

```
SELECT a.*
FROM   table1 a
       LEFT JOIN table2 b
           on a.column_1 = b.column_1
WHERE b.column_1 IS NULL 
```

如果这两个表彼此不相关，最好添加一个索引`table1.column_1`，`table2.column_1`这样就不需要全表扫描（*这会降低性能*）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T05:20:28.737

```
 select * from table1 
 inner join table2 on table1.column1=table2.column1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T08:51:13.727

```
select a.* from table1 a left outer join table2 b on a.col1=b.col1; 
```

# assembly - 我如何在寄存器中覆盖特定位？（汇编语言）

> ID：13116226
> 
> 赞同：0
> 
> 时间：2012-10-29T05:17:53.777
> 
> 标签：assembly, mips, cpu-registers

假设我有一个寄存器 t0 0x0000 0000 0000 0000 0000 0001 0010 0001，我想把所有的 1 变成 0。我该如何一一做到这一点？（不使用移动 $t0,$0）

我正在考虑使用 sb（存储字节）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T09:22:36.473

表达式 (a & (-a)) 等于字中的最低有效位。例如

```
0xbcd0 = 1011 1100 1101 0000 =  48336  
         0100 0011 0011 0000 = -48336  
-------------------------------------
 AND =   0000 0000 0001 0000 <-- lsb set 
```

在伪代码中：

```
while (-a & a) { a ^= (-a & a); }  // cache the common sub expression... 
```

有多种方法可以清除/设置某些位：

*   xor：稍微切换一下
*   和：清除除某位以外的所有内容
*   或：设置一点
*   sub：如果已设置，则清除一点
*   add：如果清楚则设置一点（否则会产生向左传播的“进位”）
*   andn：清除一点

*   `(1<<n)`，其中 0<=n< （以位为单位的字长）用于将位位置转换为位掩码

*   `LSB_MASK=(1<<n)-1`是一个位掩码，其中所有*n*最右边（设置了最低有效位）
*   `MSB_MASK=-1<<n`当 W=# of bits in word 时，设置了 (Wn) 个最左边（最高有效）位
*   `(a + (a & LSB_MASK))`在 LSB_MASK 左侧留出“空间”一位

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T05:41:20.233

不知道 MIPS，但这是一种在伪代码中逐位清除的方法。我认为寄存器工作正常，从左侧移出就被扔掉了。

```
mask = -2
Til param = 0:
    (clearing bits one at a time is stupid unless you care which ones are set)
    If (param AND mask) != param, do something

    param <== param AND mask
    Shift mask one bit left 
```

从技术上讲，这将清除低位，然后是低 2 位，然后是低 3 位……等等。但是，如果您正在处理寄存器，这会很好。（一旦你清除了一点，你就不能让它变得*更*零了。:)）

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-29T09:36:41.543

```
[PUSH ax]
 MOV ax, $to
 AND ax, 0
 MOV $to, ax
[PULL ax] 
```

有：`p & 0 = 0`，然后：

```
 0000 0000 0000 0000 0000 0001 0010 0001 
 0000 0000 0000 0000 0000 0000 0000 0000
 --------------------------------------- AND
 0000 0000 0000 0000 0000 0000 0000 0000 
```

# android - 通过代码在android中调用sendevent

> ID：13116228
> 
> 赞同：3
> 
> 时间：2012-10-29T05:18:00.617
> 
> 标签：android, event-handling, touch

```
 adb shell sendevent /dev/input/event0 3 0 45
    adb shell sendevent /dev/input/event0 3 1 784
    adb shell sendevent /dev/input/event0 1 330 1
    adb shell sendevent /dev/input/event0 0 0 0
    adb shell sendevent /dev/input/event0 1 330 0
    adb shell sendevent /dev/input/event0 0 0 0 
```

有没有办法通过android代码调用sendevent？当我从 shell 执行上述命令时，我能够在模拟器中生成点击事件。是否可以从android代码产生相同的效果？任何人请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T00:57:42.090

点击（或触摸）事件的“sendevent”命令需要“root”或“su”权限。

我试图在[这个问题](https://stackoverflow.com/questions/14928197/how-to-simulate-touch-from-background-service-with-sendevent-or-other-way)中解决同样的问题，但我没有找到以这种方式或仅使用 SDK 工具的任何其他方式模拟触摸的任何解决方案。

但是，还有另一种模拟触摸的方法，如[本文所述](http://www.pocketmagic.net/2012/04/injecting-events-programatically-on-android/)。

接下来为我自己工作（应用程序签名并作为系统应用程序运行）：

```
Thread thread = new Thread(){
@Override
public void run(){
    try {
        this.sleep(2000);
    } catch (InterruptedException e) {
        e.printStackTrace();
    }
    Instrumentation m_Instrumentation = new Instrumentation();
        m_Instrumentation.sendPointerSync(MotionEvent.obtain(
                SystemClock.uptimeMillis(),
                SystemClock.uptimeMillis(),
            MotionEvent.ACTION_DOWN,posx, posy, 0));
    m_Instrumentation.sendPointerSync(MotionEvent.obtain(
            SystemClock.uptimeMillis(),
            SystemClock.uptimeMillis(),
            MotionEvent.ACTION_UP,posx, posy, 0));
     }
};
thread.start(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-14T21:58:15.007

我不知道把它放在哪里，但如果有人在使用这里首先发布的方法让“sendevent”代码在 ICS 上工作时遇到问题，我已经想出了如何去做。不过，它确实需要 SU 访问权限。至少对我来说问题是这样的。

我将在下面发布代码，然后解释每个部分。

当您执行“getevent”以获取触摸板上的触摸事件的十六进制代码（我的是 /dev/event1）时，它会吐出一堆数据，从十六进制转换为十进制后将如下所示。

第一组是 7 行，接下来是 9 行，用于单次触摸事件。为什么？没有线索。语法是 this (device) (1, 3, or 0, not understand) (value, 这可能意味着很多东西。在我的例子中，58 是我设备的标识符，53 和 54 表示坐标是值) (value ， ETC）

```
sendevent /dev/input/event1    3    58   255 #means '3, variable 58 is 255'
sendevent /dev/input/event1    3    53   534 #'3, variable 53 (x axis) is 534
sendevent /dev/input/event1    3    54   321 #'3, variable 54 (y axis) is 534
sendevent /dev/input/event1    3    48     8 #'3, variable 48 (pressure maybe) is 8
sendevent /dev/input/event1    0     2     0 #i think the 0,2,0 means 'finger down or up
sendevent /dev/input/event1    1   330     1 #this, followed by 0,0,0 means 'end of event'
sendevent /dev/input/event1    0     0     0 
```

# 与所有这些相同，接受这是事件的另一端，如果第一部分的意思是#'he put his finger down' 这意味着'他捡起它。

```
sendevent /dev/input/event1    3    58     0
sendevent /dev/input/event1    3    53   534
sendevent /dev/input/event1    3    54   321
sendevent /dev/input/event1    3    48     8
sendevent /dev/input/event1    0     2     0 
sendevent /dev/input/event1    0     0     0
sendevent /dev/input/event1    1   330     0
sendevent /dev/input/event1    0     2     0
sendevent /dev/input/event1    0     0     0 
```

乍一看，这似乎是两个不同的触摸事件，这是我出错的地方。这实际上是一种“呼叫和应答类型的情况”。此代码将产生一个单一的触摸事件。顺便说一句，我使用 shell 脚本和 smanager 来获取它，而不必自己破译十六进制数据，它被称为“sendeventgetevent.sh”谷歌它。

我很高，这很难解释，但如果你是 root，下面的代码将在 4.0.4 ICS 中提供的坐标上产生一个单一的触摸事件。当然，您必须对其进行调整以使其正确。下载 sendeventgetevent.sh，使用像 smanager 这样的脚本管理器来运行它并继续运行。

```
$su
sendevent /dev/input/event1    3    58   255;
sendevent /dev/input/event1    3    53   534;
sendevent /dev/input/event1    3    54   321;
sendevent /dev/input/event1    3    48     8;
sendevent /dev/input/event1    0     2     0;
sendevent /dev/input/event1    1   330     1;
sendevent /dev/input/event1    0     0     0;
sendevent /dev/input/event1    3    58     0;
sendevent /dev/input/event1    3    53   534;
sendevent /dev/input/event1    3    54   321;
sendevent /dev/input/event1    3    48     8;
sendevent /dev/input/event1    0     2     0;
sendevent /dev/input/event1    0     0     0;
sendevent /dev/input/event1    1   330     0;
sendevent /dev/input/event1    0     2     0;
sendevent /dev/input/event1    0     0     0; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T18:58:57.480

您应该能够通过 Runtime.exec() 方法发出相同的 shell 命令：http: [//developer.android.com/reference/java/lang/Runtime.html](http://developer.android.com/reference/java/lang/Runtime.html)

# haskell - 为什么 Haskell 在声明类实例时不允许使用类型同义词？

> ID：13116229
> 
> 赞同：35
> 
> 时间：2012-10-29T05:18:07.473
> 
> 标签：haskell, typeclass

虽然我知道 GHC 中有一个[TypeSynonymInstances](http://hackage.haskell.org/trac/haskell-prime/wiki/TypeSynonymInstances)扩展，但我不知道它有多“危险”，我想知道这个限制是否是任意的，有点像单态限制，或者是否有更深层次的原因。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-10-29T06:04:44.997

`TypeSynonymInstances`非常安全。由于不允许任何可能像部分应用的类型同义词这样的花哨的东西，它与在实例头部中键入类型同义词的右侧具有完全相同的效果，即

```
type Foo a = ([a], [a])
instance Bar (Foo a) 
```

是相同的

```
instance Bar ([a], [a]) 
```

但是，请注意，这两个实例都需要，`FlexibleInstances`因为它们包含嵌套的类型构造函数以及重复的类型变量。一般来说，扩展类型同义词后通常会出现这种情况。

我认为这可能是默认情况下不允许它们的原因。

但是，`FlexibleInstances`它也是一个非常安全的扩展。如果您尝试定义重叠实例，例如

```
instance Xyzzy String
instance Xyzzy [a] 
```

至于为什么`FlexibleInstances`默认不可用，我只能猜测是为了简化语言。实例头的标准规则确保实例定义可以重叠的唯一方法是实例头中的类型构造函数是否相同，而`FlexibleInstances`检查重叠则稍微困难一些。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-10-29T06:07:19.627

据我了解，它有点像单态性限制——摆脱它并没有*错，但它会让你面临你可能意想不到的行为。*就像单态限制不会伤害任何东西——所有类型仍然有效——这也应该是完全安全的：无论如何，类型同义词都有限制，这会阻止它们做任何比简单的名称缩短更花哨的事情（*例如*，你永远不能部分应用它们，所以我们不会得到类型级别的 lambda），所以你总是可以用它们定义的右侧替换它们。因此，由于这些定义的右侧可以作为实例头进行检查（或包含进一步的类型同义词以扩展），所以不应该发生任何不安全的事情。

另一方面，正如禁用单态限制会使您面临潜在的奇怪性能特征一样，启用类型同义词实例会使您面临潜在的奇怪类型类错误。因此，让我们启用`-XTypeSynonymInstances`并尝试使用类型同义词编写实例：

```
Prelude> :set -XTypeSynonymInstances
Prelude> instance Num String where (+) = (++)

<interactive>:3:10:
    Illegal instance declaration for `Num String'
      (All instance types must be of the form (T a1 ... an)
       where a1 ... an are *distinct type variables*,
       and each type variable appears at most once in the instance head.
       Use -XFlexibleInstances if you want to disable this.)
    In the instance declaration for `Num String' 
```

`String`看起来像一个普通的旧类型，所以一开始这可能会令人惊讶；但它确实`[Char]`如此，因此根据 Haskell 2010 的严格规则，这个实例是无效的。如果我们通过打开 turn 来放松这些规则`-XFlexibleInstances`（顺便说一句，这[意味着`-XTypeSynonymInstances`](http://www.haskell.org/ghc/docs/latest/html/users_guide/type-class-extensions.html#flexible-instance-head)），这个例子现在可以工作了：

```
Prelude> :set -XFlexibleInstances
Prelude> instance Num String where (+) = (++)
... errors about undefined methods ...
Prelude> "a" + "b"
"ab" 
```

但是事情变得很丑：

```
Prelude> instance Eq String where
Prelude> "a" == "b"

<interactive>:8:5:
    Overlapping instances for Eq [Char]
      arising from a use of `=='
    Matching instances:
      instance Eq a => Eq [a] -- Defined in `GHC.Classes'
      instance Eq String -- Defined at <interactive>:7:10
    In the expression: "a" == "b"
    In an equation for `it': it = "a" == "b" 
```

同样，即使`String`看起来像一个独特的类型，我们已经有一个 的实例`[a]`，所以它与它重叠。（事实上​​，这可能`-XFlexibleInstances`是默认情况下不打开的部分原因。）打开`-XOverlappingInstances`是一个比打开[更狡猾的想法](https://stackoverflow.com/questions/10830757/is-there-a-list-of-ghc-extensions-that-are-considered-safe)`-XFlexibleInstances`。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-29T12:50:39.963

它曾经是被允许的，但为了让 Haskell 对初学者不那么充满惊喜，它被禁止了。

# android - 如何将所有选定的项目显示到另一个活动中，例如在购物车的 viewcart 活动中

> ID：13116234
> 
> 赞同：1
> 
> 时间：2012-10-29T05:18:41.757
> 
> 标签：android, android-intent, android-emulator, android-widget, android-listview

我正在使用 JSON 将数据提取到列表视图中，我为用户提供了单击任何项​​目列表视图行的工具，并且将能够将所选项目查看到另一个活动中，但我仍然只显示用户添加到购物车的单个项目viewcart 活动，现在我想在 viewcart 活动中显示所有选定的项目，例如：在 shoppingcart 的 viewcart 活动表单中，这里我只显示标题和成本，我通过使用 listviewitem 行单击将其提取到 singleitemactivity

单品代码：-

```
 public class SingleMenuItem extends Activity{
static final String KEY_TITLE = "title";
static final String KEY_COST = "cost";
static final String KEY_THUMB_URL = "imageUri";
private EditText edit_qty_code;
private TextView txt_total;
private TextView text_cost_code;
private double itemamount = 0;
private double itemquantity = 0;

@Override
    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.single);

    Intent in = getIntent();
    String title = in.getStringExtra(KEY_TITLE);
    String thumb_url = in.getStringExtra(KEY_THUMB_URL);
    String cost = in.getStringExtra(KEY_COST);

    ImageLoader imageLoader = new ImageLoader(getApplicationContext());

    ImageView imgv = (ImageView) findViewById(R.id.single_thumb);
    TextView txttitle = (TextView) findViewById(R.id.single_title);
    TextView txtcost = (TextView) findViewById(R.id.single_cost);
    TextView txtheader = (TextView) findViewById(R.id.actionbar);

    txttitle.setText(title);
    txtheader.setText(title);
    txtcost.setText(cost);
    imageLoader.DisplayImage(thumb_url, imgv);

    text_cost_code = (TextView)findViewById(R.id.single_cost);
    edit_qty_code = (EditText)findViewById(R.id.single_qty);
    txt_total=(TextView)findViewById(R.id.single_total);

    itemamount=Double.parseDouble(text_cost_code.getText().toString());
    txt_total.setText(Double.toString(itemamount));

    edit_qty_code.addTextChangedListener(new TextWatcher() {

    public void onTextChanged(CharSequence s, int start, int before, int count) {

    // TODO Auto-generated method stub
    }
    public void beforeTextChanged(CharSequence s, int start, int count,
    int after) {

    // TODO Auto-generated method stub
    }
    public void afterTextChanged(Editable s) {
         itemquantity=Double.parseDouble(edit_qty_code.getText().toString());
         itemamount=Double.parseDouble(text_cost_code.getText().toString());
         txt_total.setText(Double.toString(itemquantity*itemamount));
    }
    });             
     ImageButton addToCartButton = (ImageButton) findViewById(R.id.img_add);
    addToCartButton.setOnClickListener(new OnClickListener() {

    public void onClick(View v) {    

        Intent in = new Intent
          (SingleMenuItem.this, com.erachnida.restaurant.versionoct.FinalOrder.class);
        in.putExtra(KEY_TITLE, getIntent().getStringExtra(KEY_TITLE)); 
        in.putExtra(KEY_COST, getIntent().getStringExtra(KEY_COST));
        startActivity(in);

            // Close the activity
            //  finish();
        }
    });    
}} 
```

最终订单代码：-

```
public class FinalOrder extends Activity
{
    static final String KEY_TITLE = "title";
    static final String KEY_COST = "cost";
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.view);  

        Intent in = getIntent();

        String title1 = in.getStringExtra(KEY_TITLE);
        String cost1 = in.getStringExtra(KEY_COST);

        TextView txttitle1 = (TextView) findViewById(R.id.item_name);
        TextView txtcost1 = (TextView) findViewById(R.id.item_cost);

        txttitle1.setText(title1);
        txtcost1.setText(cost1);  
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T05:29:23.560

First check the `extras` for `null` reference like:

```
String extras = getIntent().getExtras();
String newString;
if(extras == null) {
    newString= null;
} else {
    newString= extras.getString("MY_STRING");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T05:25:39.567

如果您在两个活动中使用数据，您可以通过`Bundle`，如果全局使用数据，您还可以使用您的 getter setter 文件扩展`Application`数据并在清单文件中注册。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T05:21:56.313

您可以使用共享首选项

```
SharedPreferences myPrefs = PreferenceManager.getDefaultSharedPreferences(getApplicationContext());
    SharedPreferences.Editor prefsEditor = myPrefs.edit();
    prefsEditor.putString(KEY_TITLE , "Title");
    prefsEditor.putString(KEY_COST , "cost");
    prefsEditor.commit(); 
```

或者使用带有静态变量的类，以便您可以传递它

您可以使用setter来设置数据

```
SomeClass.setTitle(String title){
KEY_TITLE = title;
}

SomeClass.setCost(String cost){
KEY_COST = cost;
} 
```

从您需要的活动中，您可以使用 getter 获取它

```
 SomeClass.getTitle();
    SomeClass.getCost(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T05:23:17.997

`Intent in = getIntent().getextras();`改为使用`Intent in = getIntent();`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-29T05:23:23.423

```
itemsList.get(position); 
```

这就是问题所在。的大小`itemsList`为无，您正在尝试获取 0 的项目索引。因此，android 为您提供了 indexoutofbound 异常。

首先检查 itemsList 的大小是否大于 0，然后尝试从`itemsList`.

例如：-

```
if(itemsList != null && itemsList.size > 0)
{
  HashMap<String, String> map = itemsList.get(position);
} 
```

# php - PHP：如何在提交前存储临时 POST 数据？

> ID：13116239
> 
> 赞同：0
> 
> 时间：2012-10-29T05:19:04.100
> 
> 标签：php, http-post

我正在使用 CakePHP 在移动视图中开发一个应用程序，其中没有 Javascript 代码可以运行。

我的场景：

在用户登录表单中，用户单击提交按钮。但在提交数据和用户进入下一页之前，我制作了一个“中断”页面（呈现一个新视图）。在那里，包含“Facebook”和“不，谢谢”按钮。当他们点击“Facebook”时，他们将连接他们的 Facebook 帐户。但是，如果他们点击“不，谢谢”，登录会继续。

我的问题是，如何制作“不，谢谢”按钮？因为如果我使用`<input type="submit">`按钮，包含其数据的表单在前一页，所以不会点击这个按钮。以及，如何存储 POST 数据，以及当单击“不，谢谢”按钮时，提交的数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T05:23:12.803

您可以将数据存储在会话中，也可以将“不，谢谢”按钮设置为表单的提交按钮，其中上一页的所有数据都存储在隐藏的表单字段中。

就个人而言，出于多种原因，我更喜欢使用会话，但是由于您甚至在问这个问题，我猜您不熟悉会话数据的使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T05:32:56.910

一个更简单的问题是：要在单个页面上制作这两个表单，但在用户登录表单和“中断”页面之间有很多垂直或水平空间，所以看到登录表单的用户看不到中断部分，尽管两者都在同一个`<form></form>`标​​签内. 然后，提交按钮只是指向相同表单的中断部分的链接。这个链接是一个简单的`<a>`带有内联链接的标签，它可以隐藏登录表单并显示中断页面，而不需要 javascript。类似于此页面上转到测试部分 A 的链接

[http://www.dynamicdrive.com/dynamicindex5/bookmarkscroll.htm](http://www.dynamicdrive.com/dynamicindex5/bookmarkscroll.htm)

然后在中断部分，您可以使用一个真正的提交按钮，该按钮使一个 POST 返回请求服务器。

**[编辑]**

此解决方法基于用户滚动不够远的假设。因为大多数用户不会，所以将其设为对他们来说是 1 步流程，而不是在移动设备上特别重要的 2 流程。如果有人这样做，那么空表单将被提交到服务器，然后我们可以运行验证并向用户返回错误。他/她可以填写完整的表格。所以这是一个很好的解决方法，比将数据存储在会话中并为每个通过移动网络登录的用户发出两个 POST 请求更好，这通常是不可靠的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T05:49:34.907

更好的解决方案可能是将两种形式合并为一种形式。然后您不必发出 2 个 http 请求。也许您需要做的就是在另一个提交按钮旁边的原始表单“使用 FaceBook 登录”中添加一个额外的按钮。

# node.js - 来自猫鼬回调的 Express js res.redirect() 不起作用

> ID：13116242
> 
> 赞同：0
> 
> 时间：2012-10-29T05:19:25.287
> 
> 标签：node.js, express, mongoose

我在这里想要做的是，

从`/expense/new`页面提交`POST`请求到`/expense/newPost`

在 Expressjs 上，以这种方式处理

```
app.post('/expense/newPost', function(req, res) { ... 
```

继续，使用`mongoose`我将集合验证为

```
tmpExp = new Expense(req.body);

tmpExp.validate(function(err) {
  if(err || !isValidForm) {
    req.session.form.errField =  _.extend(req.session.form.errField, (err.errors || err ));
    req.session.rePop = req.body;
    res.redirect('/expense/new');
  } else {
    console.log('now saving') // successfully logs here.
    tmpExp.save(expPost, function(err2, savedDoc) {
      if(err2) {
        req.session.flash = { 
            global: true
          , css: "error"
          , message: "Internal Server Error"
        }
        res.redirect('/expense/new');
      } else {
        res.redirect('/expense/new?success=' + savedDoc.bill_id);
      }
    });
  }
}); 
```

为了清楚起见，我删除了一些验证代码。

**现在的问题是，通过浏览器提交 POST 请求后，数据成功保存在 mongodb 中，但浏览器没有重定向，只是等待服务器的响应**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T07:53:17.083

您的保存回调未正确传递。

```
tmpExp.save(expPost, function(err2, savedDoc) { 
```

应该：

```
tmpExp.save(function(err2, savedDoc) { 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T05:38:14.807

假设验证码是您从该文件中剥离的唯一内容，`res`未定义。我建议您只返回 Error 或 null 并在可能存在 res 的父函数中执行剩余的逻辑。这通常也是一个很好的做法，因为您的模型将是可重用的（模型中没有路径部分）

# ruby-on-rails - 错误未定义方法“remote_function”（如何使用 Rails 3 使用 remote_function 进行 Ajax 调用）

> ID：13116243
> 
> 赞同：1
> 
> 时间：2012-10-29T05:19:38.703
> 
> 标签：ruby-on-rails, ajax, ruby-on-rails-3, jquery

我发现这个函数（remote_function）是 Prototype 助手的一部分，它从 Rails 3.1 的框架中删除，如何在 ajax 上进行更改？

```
 country
      %select#country{:name => "country", :onchange => remote_function(:update => 'region_city', :url => { :action => :get_regions_cities_for_country}, :with => 'Form.Element.serialize(this)')}
        = options_for_select( Country.find(:all).map {|u| [u.name,u.id]})
      %div{:id => "region_city"}
        region
        %select#region{:name => "region", :onchange => remote_function(:update => 'city', :url => { :action => :get_cities}, :with => 'Form.Element.serialize(this)')}
          = options_for_select(Country.find(:first).regions.find(:all).map {|u| [u.name,u.id]})
        city
        #{select_tag(:city, options_for_select( Country.find(:first).regions.find(:first).cities.find(:all).map {|u| [u.name,u.id]} ))} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T12:27:47.690

原型不再存在于轨道中。改为使用`jquery-ujs`。请参阅其他问题以获取灵感：[Ruby on Rails - 更改事件的下拉框](https://stackoverflow.com/questions/6863990/ruby-on-rails-drop-down-box-on-change-event)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T11:04:46.590

意见：

```
= select_tag(:district,"<option value='0'>#{t('Please select district')}</option>".html_safe+options_from_collection_for_select(District.all, "id", "title"),:'data-remote' => 'true',:'data-url' => url_for(:controller => 'select', :action => 'getdata'),:'data-type' => 'json')
= select_tag(:state,"<option value='0'>#{t('Please select state')}</option>".html_safe,:'data-remote' => 'true',:'data-url' => url_for(:controller => 'select', :action => 'getdata'),:'data-type' => 'json')
= select_tag(:city,"<option value='0'>#{t('Please select city')}</option>".html_safe)

:javascript

        $(document).ready(function() {
          $('#district').live('ajax:success', function(evt, data, status, xhr) {
            var selectbox2 = $('#state');
            selectbox2.empty();
            var opt = $('<option/>');
            opt.attr('value', "0");
            opt.text("#{t('Please select state')}");
            opt.appendTo(selectbox2);
            $.each(data, function(index, value) {
              var opt = $('<option/>');
              opt.attr('value', value[0]);
              opt.text(value[1]);
              opt.appendTo(selectbox2);
            });
            var selectbox3 = $('#city');
            selectbox3.empty();
            var opt = $('<option/>');
            opt.attr('value', "0");
            opt.text("#{t('Please select city')}");
            opt.appendTo(selectbox3);
          });
          $('#state').live('ajax:success', function(evt, data, status, xhr) {
            var selectbox3 = $('#city');
            selectbox3.empty();
            $.each(data, function(index, value) {
              var opt = $('<option/>');
              opt.attr('value', value[0]);
              opt.text(value[1]);
              opt.appendTo(selectbox3);
            });
          });
        }); 
```

控制器：

```
class SelectController < ApplicationController

  def getdata

    @data_for_select1 = params[:district]
    if @data_for_select1
      @data_for_select2 = State.where(:district_id => @data_for_select1).all
      render :json => @data_for_select2.map{|c| [c.id, c.title]}
    else
      @data_for_select1 = params[:state]
      @data_for_select2 = City.where(:state_id => @data_for_select1).all
      render :json => @data_for_select2.map{|c| [c.id, c.name]}
    end
  end
end 
```

路线：

```
 get 'assets' => 'select#getdata' 
```

注意：你必须有一个本地化使用的短语，否则js不起作用

# ruby-on-rails-3.2 - activeadmin 自定义渲染 if

> ID：13116244
> 
> 赞同：0
> 
> 时间：2012-10-29T05:19:40.603
> 
> 标签：ruby-on-rails-3.2, activeadmin

我下面的代码

```
ActiveAdmin.register Question do
  belongs_to :topic, :optional => true

  controller do
    def index
      @topic = Topic.find_by_id params[:topic_id]
      if @topic
        @questions = @topic.questions
        render 'settings/questions/_by_admin', :layout => 'active_admin'
        return
      end
    end
  end
end 
```

正在投掷

```
 NoMethodError in Admin/questions#index 
```

显示

> /home/amol/.rvm/gems/ruby-1.9.2-p290@xxx/gems/activeadmin-0.5.0/app/views/layouts/active_admin.html.arb 其中第 1 行提出：
> 
> nil:NilClass 的未定义方法“base”

提取的源代码（在第 1 行附近）：

```
1: insert_tag view_factory.layout 
```

任何想法？这里发生了什么事。堆栈跟踪未指向我编写的任何代码文件。

我想要的是，如果存在@topic，那么我想将我的视图呈现为默认视图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T09:47:09.227

我将这个场景`super`作为控制器操作的最后一行调用。

Super 将为您呈现默认视图。

# java - java中的模式和^pattern$ regEx有什么区别？

> ID：13116246
> 
> 赞同：1
> 
> 时间：2012-10-29T05:19:55.257
> 
> 标签：java, regex, pattern-matching

以下两个 regEx 有什么区别？两者都匹配java中的确切字符串。

```
System.out.println("true".matches("true"));
System.out.println("true".matches("^true$")); // ^ means should start and $ means should end. So it should mean exact match true. right ? 
```

两者都打印**true**。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T05:21:55.953

您将无法看到所选字符串的**差异**。

尝试使用： -`"afdbtrue"`或`"tru"`同时使用它们。两个字符串都不匹配第一个模式。

`^true*`-> 这意味着字符串应该以`t`(`Caret(^)`表示字符串的开头) 开头，然后是`r`and ，并且后面`u`可以有 0 个或多个(表示 0 个或多个 u)`e``tru``u*`

```
System.out.println("tru".matches("^true*"));     // true
System.out.println("trueeeee".matches("^true*"));// true
System.out.println("asdtrue".matches("^true*")); // false

System.out.println("tru".matches("true"));       // false
System.out.println("truee".matches("true"));   // false
System.out.println("asdftrue".matches("true"));  // false 
```

*   您的`first and second`sysout 将打印出来`true`，因为`tru`从 开始，`t`在`0` `e`之后`tru`。与 相同`trueee`。那会好的
*   您的第三个系统输出将打印`false`，因为`asdtrue`不以`t`
*   您的第 4 个系统输出，将再次启动，`false`因为它不完全`true`
*   您的`5th and 6th`系统输出将再次打印`false`，因为它们不完全匹配`true`

* * *

**更新**： -

**OP改变**问题后： -

*   `^(caret)`在字符串的开头匹配
*   `$(Dollar)`匹配字符串的末尾。

因此，`^true$`将匹配以 开头`true`和结尾的字符串`true`。因此，现在在这种情况下，您使用的方式`true`和使用方式之间不会有任何区别。`^true$`

`str.matches("true")`将匹配一个完全是`"true"`. 的字符串，`str.matches("^true$")`也将完全匹配`"true"`，因为它以 . 开头和结尾`"true"`。

```
System.out.println("true".matches("^true$"));     // true
System.out.println("This will not match true".matches("^true$"));   // false
System.out.println("true".matches("true"));       // true
System.out.println("This will also not match true".matches("true")); // false 
```

* * *

**更新**： -

但是，如果使用`Matcher.find`方法，则两种模式会有所不同。尝试这个： -

```
 Matcher matcher = Pattern.compile("true").matcher("This will be true");
    Matcher matcher1 = Pattern.compile("^true$").matcher("This won't be true"); 

    if (matcher.find()) {  // Will find
        System.out.println(true);
    } else {
        System.out.println(false);
    }
    if (matcher1.find()) {  // Will not find
        System.out.println(true);
    } else {
        System.out.println(false);
    } 
```

**输出**： -

```
true
false 
```

*   有关这些方法的更多详细信息，请参阅[Matcher 文档](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html)。( [Matcher#find](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html#find%28%29)和[Matcher#matches](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html#matches%28%29) )

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T05:26:52.613

`^`表示字符串的开头

`$`表示字符串的结尾

`matches`方法**如果整个字符串都可以匹配，则仅返回 true**

所以，`"true"`&`"^true$"`都只匹配一个单词，即`true`

* * *

但是，如果您使用`find`方法，那么以下将是有效的所以， `"true"`将匹配那些在任何地方包含 true 的行

```
Is it true//match
How true//match
true is truth//match
not false//no match 
```

`"^true$"` 将匹配任何只有一个单词的行`true`

```
true//match
true is truth//no match
it is true//no match 
```

# wpf - 布局内的 WPF 元素旋转

> ID：13116247
> 
> 赞同：1
> 
> 时间：2012-10-29T05:20:00.370
> 
> 标签：wpf

我想使用 RotateTransfer 对象在画布内旋转一个元素。它旋转得很好，但有时它会移动到画布之外。任何人都可以建议如何将旋转限制在画布之外。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T05:55:51.873

你的意思是说当元素旋转时它会超出画布的边界？

你可以尝试使用`LayoutTranform`而不是`RenderTransform`.

# android - Android - 分享到 Google+ 应用程序时是否可以指定位置？

> ID：13116249
> 
> 赞同：3
> 
> 时间：2012-10-29T05:20:13.587
> 
> 标签：android, location, share, google-plus

我正在开发一个允许用户将图像共享到 Google+ 的应用程序。当我从我的应用程序将图像共享到 Google+ 时，我希望能够指定与图像关联的位置（不是 Google+ 设置的用户当前位置）。有没有办法做到这一点？即，通过设置一些额外的？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T05:34:12.657

当用户通过您的应用程序拍摄图像时，同时获取相应的地理点并将其保存到数据库中。每当用户尝试上传照片时，请获取与图像路径关联的相应地理点并将其发布到 G+，我希望这将是解决此问题的一个很好的可能性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T09:32:35.613

目前，无法代表用户预填充帖子的“位置”部分。如果用户之前使用了 location 字段，它将为后续帖子启用。如果他们将其关闭，他们将不得不为后续帖子重新启用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T21:34:40.347

如果我没记错的话，与 Google+ 共享的图像需要通过 ContentProvider 完成。如果您还没有，您能否将 LATITUDE 和 LONGITUDE 列添加到您的内容提供商？

[http://developer.android.com/reference/android/provider/MediaStore.Images.ImageColumns.html](http://developer.android.com/reference/android/provider/MediaStore.Images.ImageColumns.html)

# timeout - 什么会导致 APNs 反馈服务在网关正常工作时不断超时？

> ID：13116251
> 
> 赞同：0
> 
> 时间：2012-10-29T05:20:25.057
> 
> 标签：timeout, apple-push-notifications, feedback

在编写了我自己的代码之后，我正在使用尽可能多的各种网站的 PHP 代码，但连接到苹果推送通知反馈服务时一切都失败了。

简而言之：

```
$stream_context = stream_context_create();

stream_context_set_option($stream_context, 'ssl', 'local_cert', $certkeypath);      

stream_context_set_option($stream_context, 'ssl', 'passphrase', $pass);

$apns = stream_socket_client('ssl://feedback.sandbox.push.apple.com:2196', $errcode, $errstr, 60, STREAM_CLIENT_CONNECT, $stream_context);

if(!$apns) {
 echo "ERROR $errcode: $errstr\n";
 return;
} 
```

上面的代码今晚 100% 的连接请求超时。但！如果地址从 feedback.sandbox.push.apple.com 更改为 gateway.sandbox.push.apple.com，并且端口从 2196 更改为 2195，那么一切正常 100%，所有推送通知都已传递。我从我的一台设备上删除了该应用程序并继续向其发送推送通知，因此我一直期待反馈的真实结果，但什么也没有。

那么网关工作但反馈没有的原因是否存在，似乎唯一的区别是端口和地址。可能是标志，但我正在使用其他人声称有效的代码。

让我觉得 APNs 反馈服务因维护而停机。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T06:15:18.477

现在 3 周后，一个想法：可以是防火墙吗？

果然，确实如此。

现在，我可以在没有超时的情况下阅读 APNs 反馈。:D

# jquery - 在 JQgrid 中动态添加 Dropdown

> ID：13116256
> 
> 赞同：2
> 
> 时间：2012-10-29T05:20:32.803
> 
> 标签：jquery

我想在 JQGrid 中动态添加下拉菜单。

例如：-

我有以下类型的网格。

![在此处输入图像描述](../Images/63d59d54864e9dbbc557e16aba8f4358.png)

现在，当我单击一个按钮时，应该在网格中添加一个新行。对于新行，第一列数据将是下拉列表、第二个超链接、第三个下拉列表和第四个复选框。

即它应该与第一行相同。

并且对于每个按钮单击新行应添加类似于第一行。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T05:38:10.267

对于 formatter='select' 和 type='select' 类型的属性，jQgrid 在内部维护一个键值对列表。

因此，在插入新行时，您需要提供“ID”作为下拉框的值。

例如 ：

用于插入新行：

```
 $("#listData").jqGrid('addRowData',index,{kpiParameter:1,product:'XYZ',metric:'1',perkSharing:'XYZ'}); 
```

这里，'1' 是 KpiParameter 的 ID。要使此解决方案起作用，您需要在定义 jQgrid 时加载下拉列表的键值对的整个列表。

您可以编写 jqGrid 如下：

```
jQuery('#kpisetup').jqGrid({
            autowidth: true,
            autoheight: true,
            url : '',
            mtype : 'POST',
            colNames : [  'KPI ID','KPI Parameter', 'Product','Metric','Perk Sharing'],
            colModel : [ {name : 'kpi_id',index : 'kpi_id',autowidth: true,hidden:true,align:'center'},
                         {name : 'kpi_parameter',index : 'kpi_parameter',width:200,
                                                sortable:true,
                                                align:'center',
                                                editable:true,
                                                cellEdit:true,
                                                edittype: 'select', 
                                                formatter: 'select',
                                                editrules: { required: true},
                                                editoptions:{value: getKPIParameters()//LOAD ALL THE KPI PARAMETER KEY-VALUE PAIR}
                         },
                         {name : 'product',index : 'product',autowidth: true,formatter:'showlink',formatoptions:{baseLinkUrl:'#'},align:'center'},
                         {name : 'metric',index : 'metric',width:75,
                                                editable:true,
                                                edittype: "select",
                                                align:'center',
                                                formatter: 'select',
                                                editrules: { required: true},
                                                editoptions: {value: '1:select' //LOAD ALL THE METRIC VALUEs}
                         },
                         {name : 'perksharing',align:'left',index : 'perksharing',autowidth: true,editable:true,edittype: "checkbox",align:'center'}
                       ],
            rowNum : 10,
            sortname : 'kpi_parameter',
            viewrecords : true,
            gridview:true,
            pager : '#kpisetup_pager',
            sortorder : 'desc',
            caption : 'KPI Setup',
            datatype : 'json'
        }); 
```

希望这对你有用。

谢谢，甘扬。

# java - 为什么我的代码与我编写的旧方式相比表现不同？

> ID：13116257
> 
> 赞同：0
> 
> 时间：2012-10-29T05:20:43.807
> 
> 标签：java, arrays, object, for-loop

我正在开发一款游戏，我正在尝试优化一些东西。我做了一个 for 循环来缩短以下代码：

```
 // if near pb1

   if (pbMoveCheck_playerNearpb(pb1, pb2, b1, b2, b3, b4, m, p, x, y)
                & pbMoveCheck_doublepb(pb1, pb2, x, y)) {
            pb1Good = true;
            pGood = true;
        }

    // if near pb1
    if (pbMoveCheck_playerNearpb(pb1, pb3, b1, b2, b3, b4, m, p, x, y)
            & pbMoveCheck_doublepb(pb1, pb3, x, y)) {
        pb1Good = true;
        pGood = true;
    }

    // if near pb1
    if (pbMoveCheck_playerNearpb(pb1, pb4, b1, b2, b3, b4, m, p, x, y)
            & pbMoveCheck_doublepb(pb1, pb4, x, y)) {
        pb1Good = true;
        pGood = true;
    }

    // if near pb2
    if (pbMoveCheck_playerNearpb(pb2, pb1, b1, b2, b3, b4, m, p, x, y)
            & pbMoveCheck_doublepb(pb2, pb1, x, y)) {
        pb2Good = true;
        pGood = true;
    }

    // if near pb2
    if (pbMoveCheck_playerNearpb(pb2, pb3, b1, b2, b3, b4, m, p, x, y)
            & pbMoveCheck_doublepb(pb2, pb3, x, y)) {
        pb2Good = true;
        pGood = true;
    }

    // if near pb2
    if (pbMoveCheck_playerNearpb(pb2, pb4, b1, b2, b3, b4, m, p, x, y)
            & pbMoveCheck_doublepb(pb2, pb4, x, y)) {
        pb2Good = true;
        pGood = true;
    }

    // if near pb3
    if (pbMoveCheck_playerNearpb(pb3, pb1, b1, b2, b3, b4, m, p, x, y)
            & pbMoveCheck_doublepb(pb3, pb1, x, y)) {
        pb3Good = true;
        pGood = true;
    }

    // if near pb3
    if (pbMoveCheck_playerNearpb(pb3, pb2, b1, b2, b3, b4, m, p, x, y)
            & pbMoveCheck_doublepb(pb3, pb2, x, y)) {
        pb3Good = true;
        pGood = true;
    }

    // if near pb3
    if (pbMoveCheck_playerNearpb(pb3, pb4, b1, b2, b3, b4, m, p, x, y)
            & pbMoveCheck_doublepb(pb3, pb4, x, y)) {
        pb3Good = true;
        pGood = true;
    }

    // if near pb4
    if (pbMoveCheck_playerNearpb(pb4, pb1, b1, b2, b3, b4, m, p, x, y)
            & pbMoveCheck_doublepb(pb4, pb1, x, y)) {
        pb4Good = true;
        pGood = true;
    }

    // if near pb4
    if (pbMoveCheck_playerNearpb(pb4, pb2, b1, b2, b3, b4, m, p, x, y)
            & pbMoveCheck_doublepb(pb4, pb2, x, y)) {
        pb4Good = true;
        pGood = true;
    }

    // if near pb4
    if (pbMoveCheck_playerNearpb(pb4, pb3, b1, b2, b3, b4, m, p, x, y)
            & pbMoveCheck_doublepb(pb4, pb3, x, y)) {
        pb4Good = true;
        pGood = true;
    } 
```

所以我把它砍成这样：

```
 // Make lists of stuff
    pushBlock1[] listPushBlocksA = { pb1, pb2, pb3, pb4 };
    boolean[] pbGoodList = { pb1Good, pb2Good, pb3Good, pb4Good };

    // if near pb loop
    for (int i = 0; i < listPushBlocksA.length; i++) {
        for (int j = 0; j < listPushBlocksA.length; j++) {
            if (i != j & pbMoveCheck_playerNearpb(listPushBlocksA[i],
                    listPushBlocksA[j], b1, b2, b3, b4, m, p, x, y)
                    & pbMoveCheck_doublepb(listPushBlocksA[i],
                            listPushBlocksA[j], x, y)) {
                pbGoodList[i] = true;
                pGood = true;
            }
        }
    } 
```

当我重新编写代码时，某些东西显然没有翻译过来，因为当我尝试在游戏冲突中切换它时，测试停止工作。不能为我的生活看到什么可能是错的，有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T05:33:38.567

您正在使用`&`运算符，请将其更改为`&&`

你的`if`情况应该如下：

```
if ((i != j) && (pbMoveCheck_playerNearpb(listPushBlocksA[i],
                listPushBlocksA[j], b1, b2, b3, b4, m, p, x, y)
                & pbMoveCheck_doublepb(listPushBlocksA[i],
                        listPushBlocksA[j], x, y))) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T05:40:56.057

1.  使用逻辑 &&，而不是按位 & 运算符。

2.  考虑

    ```
    boolean[] pbGoodList = { pb1Good, pb2Good, pb3Good, pb4Good } 
    ```

    和

    ```
    pbGoodList[i] = true; 
    ```

    你没有改变`pb1Good`, `pb2Good`, `pb3Good`, 或者`pb4Good`像你在显示的原始代码中所做的那样。当您`pbGoodList`使用这些值初始化数组时，`pbGoodList`会保留这些值的唯一不同实例。

    您可以在循环之后将数组中的值复制到各个布尔变量中：

    ```
    pb1Good = pbGoodList[0];
    ... 
    ```

# php - 如何在 wordpress MCE 编辑器中添加自定义选项和按钮

> ID：13116266
> 
> 赞同：4
> 
> 时间：2012-10-29T05:22:40.557
> 
> 标签：php, wordpress, tinymce, wordpress-theming

我正在开发一个高级 Wordpress 主题 [第一次 :)]，我想知道如何将自定义按钮和选项添加到`Tiny MCE Editor`.

像其他高级主题一样，它们提供了一个自定义按钮和一个用于自定义选项的弹出 div 区域（可能是一个简单的 div），我也想这样做。我想要可以这样做的功能。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T09:44:15.230

这是向 Tiny MCE 编辑器添加自定义按钮的绝佳教程：[http ://wp.tutsplus.com/tutorials/theme-development/wordpress-shortcodes-the-right-way/](http://wp.tutsplus.com/tutorials/theme-development/wordpress-shortcodes-the-right-way/)

你也可以试试这个插件：[**Ultimate TinyMCE**](http://wordpress.org/extend/plugins/ultimate-tinymce/)

WordPress Codex 参考：[TinyMCE 自定义按钮](http://codex.wordpress.org/TinyMCE_Custom_Buttons)

# c++ - 类型“std::default_random_engine”无法解析

> ID：13116273
> 
> 赞同：7
> 
> 时间：2012-10-29T05:23:19.137
> 
> 标签：c++, eclipse, c++11

我想在标头随机中使用 default_random_engine 和 uniform_real_distribution 生成一些随机双数。

我使用 Eclipse for C/C++ & MinGW 来构建我的项目。

*   Eclipse 版本：4.2.1
*   Eclipse CDT C/C++ 开发工具版本：8.1.1.201209170703
*   Eclipse CDT GCC 交叉编译器支持版本：1.1.0.201209170703
*   MinGW 版本：4.6.2（使用“gcc -v”检查）

当我在编辑器中键入 std::default_random_engine 时，Eclipse 提示我“无法解析类型'std::default_random_engine'”。

我已经将我的项目配置为支持 C++11 功能

*   [打开 Project Properties->C/C++ Build ->Settings->Tool Settings->GCC C++ Compiler->Miscellaneous->Other Flags。最后加上“-std=c++0x”](http://wiki.eclipse.org/CDT/User/FAQ#CDT_does_not_recognize_C.2B.2B11_features)
*   [Project Properties->C/C++ General->Preprocessor Include Paths, Macros->[Providers] tab->your Built-in Compiler Settings provider（依赖于工具链）。单击“工作区设置”链接，进入“设置”属性页面，再次选择 [发现] 选项卡和您的提供商。有“获取编译器规格的命令”，在其中添加“-std=c++0x”。](http://www.eclipse.org/forums/index.php/mv/msg/373462/909018/#msg_909018)

然后我写了一个列表初始化向量和一个范围来测试C++11的支持，代码工作正常。

```
 vector<int> ivec = {1, 2, 3};
    for (int i : ivec)
        cout << i << " ";
    cout << endl; 
```

“std::default_random_engine”有什么问题，我应该怎么做才能解决这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-29T08:45:13.143

**更新：** 自从我发布原始答案以来已经很长时间了，它已经过时了。我今天（2014 年 3 月 15 日）仔细检查了：在 Eclipse Kepler（内部版本号 20130614-0229）中，足以

*   在*Project > Properties > C/C++ Build > Settings*下添加，然后在*Tool Settings*选项卡 上添加*GCC C++ Compiler > Miscellaneous*`-std=c++11`标志，

*   然后在*Discovery*选项卡上的*Window > Preferences > C/C++ > Build > Settings*下选择*CDT GCC Built-in Compiler Settings*并将标志添加到*Command 以获取编译器规格*。在我的机器上，更改后它看起来像这样： **`-std=c++11`**

     ***`${COMMAND} -E -P -v -dD -std=c++11 "${INPUTS}"`*** 
****   清理并重建您的项目**和**索引（*Project > C/C++ Index > Rebuild*），因为 Eclipse 倾向于缓存错误消息并显示它们，即使它们在更改设置后消失了。*** 

 ****这肯定适用于我的机器。**如果它不在你的身上，那么你可能想试一试：[C++11 full support on Eclipse](https://stackoverflow.com/q/22074724/341970)虽然我不确定这种方法的正确性，也没有必要在我的机器上这样做。截至 2014 年 3 月 7 日，用户[声称](https://stackoverflow.com/questions/22074724/c11-full-support-on-eclipse#comment33807529_22074724)它对他们有帮助，而上述方法没有。

* * *

[原来的帖子，现在已经过时了：]

 ~~这似乎是来自 IDE 的错误错误。

单击项目属性，然后 C/C++ General > Code Analysis > Syntax and Semantic Errors 并取消选择*Type cannot be resolved*。

我还必须在我自己的项目中禁用一堆其他语法和语义错误，例如无效参数、无效重载、符号未解析等。这些虚假错误来自[Codan](http://wiki.eclipse.org/CDT/designs/StaticAnalysis)。

（您可能必须添加`__GXX_EXPERIMENTAL_CXX0X__`到您的定义/预处理器宏中，但不确定这个。）~~**

# c# - 如何在 RichTextBox 中键入半空格？

> ID：13116278
> 
> 赞同：5
> 
> 时间：2012-10-29T05:24:06.593
> 
> 标签：c#, wpf, richtextbox

当我在 RichTextBox 中按“Shift + Space”键入半空格（当我用波斯语写作时）时，它只是插入空格。它正确地输入了所有其他波斯字符，但是当涉及到“Shift+Space”时，它只输入了空格。

这个字符的名称是“零宽度非连接器”，信息在这个链接中给出：[http](http://www.fileformat.info/info/unicode/char/200c/index.htm) ://www.fileformat.info/info/unicode/char/200c/index.htm 。

我应该提到我通过处理 previewKewDown 事件解决了这个问题；但我想知道 RichTextBox 中的这个组合键有什么问题。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T09:34:32.497

我认为问题在于您在 Windows 中的键盘布局。Windows 的波斯语键盘布局根本不支持 ZWNJ。如果您使用 来自[波斯计算社区站点的](http://persian-computing.org/en/Main_Page)*伊朗标准波斯语键盘 (ISIRI 9147)（2.0 版）*，它将可用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T22:49:43.827

我相信这个功能需要作为控件的一部分进行编程（RichTextBox 或某些继承的类），但似乎情况并非如此。

我在[另一个网站](http://sartre2.byu.edu/persian/persianword/zwnj.htm)上找到的一种替代方法是按下`Alt + 0157` *（使用启用了 NumLock 的键盘输入每个数字，一次一个）*，尽管这不如您覆盖`previewKewDown`事件的解决方案。

![符号屏幕](../Images/cfd875fd958e1854987bdafc86128f1a.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-30T16:25:54.350

我遇到了同样的问题，并通过处理`PreviewKeyDown`事件在代码隐藏中解决了问题。只是想补充一点，我对此事的一点研究让我认为`xml:space`底层`Run`元素的属性可能是问题的原因。[在此处](http://msdn.microsoft.com/en-us/library/ms788746.aspx)阅读有关如何在 XAML 中处理空格的信息。

# javascript - 将 HTML、CSS 和 Javascript 添加到 Joomla 的首页

> ID：13116280
> 
> 赞同：0
> 
> 时间：2012-10-29T05:24:21.910
> 
> 标签：javascript, html, css, joomla, joomla2.5

我需要在 joomla 头版中间插入一个**自定义搜索框。***搜索框*将包含 html、css 和 java 脚本。我尝试使用`mod html`和`moduleanywhere`. 仍然没有运气。

如果有任何专业人士可以就此提供建议，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T18:50:58.270

这应该为您解决问题 - [http://extensions.joomla.org/extensions/core-enhancements/coding-a-scripts-integration/custom-code-in-modules/16359](http://extensions.joomla.org/extensions/core-enhancements/coding-a-scripts-integration/custom-code-in-modules/16359)

如果那个对你不起作用，那么这里有一大堆模块基本上做同样的事情 - [http://extensions.joomla.org/extensions/core-enhancements/coding-a-scripts-integration/custom -代码在模块](http://extensions.joomla.org/extensions/core-enhancements/coding-a-scripts-integration/custom-code-in-modules)

作为最后的手段（实际上这是最好的方法），您还可以为您的搜索框创建一个自定义模块。这实际上并不难，而且这样做会更好，因为您没有使用扩展来添加更多代码。

您可以在此处获取有关模块开发的信息 - [http://docs.joomla.org/Module_Development](http://docs.joomla.org/Module_Development) 这里有一个快速视频教程可以帮助您入门 - [http://www.youtube.com/watch?v=Qd93be8YRNY](http://www.youtube.com/watch?v=Qd93be8YRNY)

# ruby - chef-solo：在 postgresql 之前安装 build-essential 配方

> ID：13116282
> 
> 赞同：4
> 
> 时间：2012-10-29T05:24:32.870
> 
> 标签：ruby, postgresql, chef-infra

我正在尝试使用 chef-solo 在我的服务器上安装 postgresql。我通过自己进行引导并在脚本中手动包含 build-esential 包来完成这项工作。现在我想使用knife-solo 来处理引导程序，但在定义配方的执行顺序时遇到了问题。

我想在 postgresql 之前安装 build-essential 包。这是我正在构建的服务器的 json 文件

```
{
    "dbuser": "myuser",
    "dbpass": "mypassword",

    "postgresql":{"password":{"postgres":"mypassword"}},
    "passenger":{"version":"3.0.14", "max_pool_size":"2"},
    "default_attributes":{"build_essential":{"compiletime": "true"}},

    "run_list": [ 
        "recipe[build-essential]",
        "role[web_server]",
        "recipe[sqlite]",
        "recipe[postgresql::server]",
        "recipe[pope::default]"
    ]

} 
```

当我发出命令时

```
knife cook <user>@<my server's ip> 
```

我收到这个错误

```
WARNING: No knife configuration file found
Checking cookbook syntax...
Checking Chef version
Enter the password for test@<my server's ip>: 

[2012-10-29T16:14:44+11:00] INFO: *** Chef 10.16.2 ***
[2012-10-29T16:14:45+11:00] INFO: Setting the run_list to ["recipe[build-essential]", "role[web_server]", "recipe[sqlite]", "recipe[postgresql::server]", "recipe[mysettings::default]"] from JSON
[2012-10-29T16:14:45+11:00] INFO: Run List is [recipe[build-essential], role[web_server], recipe[sqlite], recipe[postgresql::server], recipe[pope::default]]
[2012-10-29T16:14:45+11:00] INFO: Run List expands to [build-essential, apache2, passenger_apache2, sqlite, postgresql::server, mysettings::default]
[2012-10-29T16:14:45+11:00] INFO: Starting Chef Run for test-VirtualBox
[2012-10-29T16:14:45+11:00] INFO: Running start handlers
[2012-10-29T16:14:45+11:00] INFO: Start handlers complete.
[2012-10-29T16:14:46+11:00] INFO: Processing package[postgresql-client] action install (postgresql::client line 37)
[2012-10-29T16:14:47+11:00] INFO: Processing package[libpq-dev] action install (postgresql::client line 37)
[2012-10-29T16:14:47+11:00] INFO: Processing package[make] action install (postgresql::client line 37)
[2012-10-29T16:14:47+11:00] INFO: Processing gem_package[pg] action install (postgresql::client line 42)

================================================================================
Error executing action `install` on resource 'gem_package[pg]'
================================================================================

Mixlib::ShellOut::ShellCommandFailed
------------------------------------
Expected process to exit with [0], but received '1'
---- Begin output of /opt/chef/embedded/bin/gem install pg -q --no-rdoc --no-ri -v "0.14.1" ----
STDOUT: Building native extensions.  This could take a while...
STDERR: ERROR:  Error installing pg:
    ERROR: Failed to build gem native extension.

        /opt/chef/embedded/bin/ruby extconf.rb
checking for pg_config... yes
Using config values from /usr/bin/pg_config
checking for libpq-fe.h... yes
checking for libpq/libpq-fs.h... yes
checking for pg_config_manual.h... yes
checking for PQconnectdb() in -lpq... no
checking for PQconnectdb() in -llibpq... no
checking for PQconnectdb() in -lms/libpq... no
Can't find the PostgreSQL client library (libpq)
*** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.

Provided configuration options:
    --with-opt-dir
    --with-opt-include
    --without-opt-include=${opt-dir}/include
    --with-opt-lib
    --without-opt-lib=${opt-dir}/lib
    --with-make-prog
    --without-make-prog
    --srcdir=.
    --curdir
    --ruby=/opt/chef/embedded/bin/ruby
    --with-pg
    --without-pg
    --with-pg-dir
    --without-pg-dir
    --with-pg-include
    --without-pg-include=${pg-dir}/include
    --with-pg-lib
    --without-pg-lib=${pg-dir}/lib
    --with-pg-config
    --without-pg-config
    --with-pg_config
    --without-pg_config
    --with-pqlib
    --without-pqlib
    --with-libpqlib
    --without-libpqlib
    --with-ms/libpqlib
    --without-ms/libpqlib

Gem files will remain installed in /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/pg-0.14.1 for inspection.
Results logged to /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/pg-0.14.1/ext/gem_make.out
---- End output of /opt/chef/embedded/bin/gem install pg -q --no-rdoc --no-ri -v "0.14.1" ----
Ran /opt/chef/embedded/bin/gem install pg -q --no-rdoc --no-ri -v "0.14.1" returned 1

Cookbook Trace:
---------------
/tmp/chef-solo/cookbooks/postgresql/recipes/client.rb:44:in `from_file'
/tmp/chef-solo/cookbooks/postgresql/recipes/server.rb:24:in `from_file'

Resource Declaration:
---------------------
# In /tmp/chef-solo/cookbooks/postgresql/recipes/client.rb

 42: gem_package "pg" do
 43:   action :nothing
 44: end.run_action(:install)

Compiled Resource:
------------------
# Declared in /tmp/chef-solo/cookbooks/postgresql/recipes/client.rb:42:in `from_file'

gem_package("pg") do
  provider Chef::Provider::Package::Rubygems
  action [:nothing]
  retries 0
  retry_delay 2
  package_name "pg"
  version "0.14.1"
  cookbook_name :postgresql
  recipe_name "client"
  gem_binary "/opt/chef/embedded/bin/gem"
end

================================================================================
Recipe Compile Error in /tmp/chef-solo/cookbooks/postgresql/recipes/server.rb
================================================================================

Mixlib::ShellOut::ShellCommandFailed
------------------------------------
gem_package[pg] (postgresql::client line 42) had an error: Mixlib::ShellOut::ShellCommandFailed: Expected process to exit with [0], but received '1'
---- Begin output of /opt/chef/embedded/bin/gem install pg -q --no-rdoc --no-ri -v "0.14.1" ----
STDOUT: Building native extensions.  This could take a while...
STDERR: ERROR:  Error installing pg:
    ERROR: Failed to build gem native extension.

        /opt/chef/embedded/bin/ruby extconf.rb
checking for pg_config... yes
Using config values from /usr/bin/pg_config
checking for libpq-fe.h... yes
checking for libpq/libpq-fs.h... yes
checking for pg_config_manual.h... yes
checking for PQconnectdb() in -lpq... no
checking for PQconnectdb() in -llibpq... no
checking for PQconnectdb() in -lms/libpq... no
Can't find the PostgreSQL client library (libpq)
*** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.

Provided configuration options:
    --with-opt-dir
    --with-opt-include
    --without-opt-include=${opt-dir}/include
    --with-opt-lib
    --without-opt-lib=${opt-dir}/lib
    --with-make-prog
    --without-make-prog
    --srcdir=.
    --curdir
    --ruby=/opt/chef/embedded/bin/ruby
    --with-pg
    --without-pg
    --with-pg-dir
    --without-pg-dir
    --with-pg-include
    --without-pg-include=${pg-dir}/include
    --with-pg-lib
    --without-pg-lib=${pg-dir}/lib
    --with-pg-config
    --without-pg-config
    --with-pg_config
    --without-pg_config
    --with-pqlib
    --without-pqlib
    --with-libpqlib
    --without-libpqlib
    --with-ms/libpqlib
    --without-ms/libpqlib

Gem files will remain installed in /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/pg-0.14.1 for inspection.
Results logged to /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/pg-0.14.1/ext/gem_make.out
---- End output of /opt/chef/embedded/bin/gem install pg -q --no-rdoc --no-ri -v "0.14.1" ----
Ran /opt/chef/embedded/bin/gem install pg -q --no-rdoc --no-ri -v "0.14.1" returned 1

Cookbook Trace:
---------------
  /tmp/chef-solo/cookbooks/postgresql/recipes/client.rb:44:in `from_file'
  /tmp/chef-solo/cookbooks/postgresql/recipes/server.rb:24:in `from_file'

Relevant File Content:
----------------------
/tmp/chef-solo/cookbooks/postgresql/recipes/client.rb:

 37:    package pg_pack do
 38:      action :nothing
 39:    end.run_action(:install)
 40:  end
 41:  
 42:  gem_package "pg" do
 43:    action :nothing
 44>> end.run_action(:install)
 45:  

[2012-10-29T16:15:03+11:00] ERROR: Running exception handlers
[2012-10-29T16:15:03+11:00] ERROR: Exception handlers complete
[2012-10-29T16:15:03+11:00] FATAL: Stacktrace dumped to /tmp/chef-solo/chef-stacktrace.out
[2012-10-29T16:15:03+11:00] FATAL: Mixlib::ShellOut::ShellCommandFailed: gem_package[pg] (postgresql::client line 42) had an error: Mixlib::ShellOut::ShellCommandFailed: Expected process to exit with [0], but received '1'
---- Begin output of /opt/chef/embedded/bin/gem install pg -q --no-rdoc --no-ri -v "0.14.1" ----
STDOUT: Building native extensions.  This could take a while...
STDERR: ERROR:  Error installing pg:
    ERROR: Failed to build gem native extension.

        /opt/chef/embedded/bin/ruby extconf.rb
checking for pg_config... yes
Using config values from /usr/bin/pg_config
checking for libpq-fe.h... yes
checking for libpq/libpq-fs.h... yes
checking for pg_config_manual.h... yes
checking for PQconnectdb() in -lpq... no
checking for PQconnectdb() in -llibpq... no
checking for PQconnectdb() in -lms/libpq... no
Can't find the PostgreSQL client library (libpq)
*** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.

Provided configuration options:
    --with-opt-dir
    --with-opt-include
    --without-opt-include=${opt-dir}/include
    --with-opt-lib
    --without-opt-lib=${opt-dir}/lib
    --with-make-prog
    --without-make-prog
    --srcdir=.
    --curdir
    --ruby=/opt/chef/embedded/bin/ruby
    --with-pg
    --without-pg
    --with-pg-dir
    --without-pg-dir
    --with-pg-include
    --without-pg-include=${pg-dir}/include
    --with-pg-lib
    --without-pg-lib=${pg-dir}/lib
    --with-pg-config
    --without-pg-config
    --with-pg_config
    --without-pg_config
    --with-pqlib
    --without-pqlib
    --with-libpqlib
    --without-libpqlib
    --with-ms/libpqlib
    --without-ms/libpqlib

Gem files will remain installed in /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/pg-0.14.1 for inspection.
Results logged to /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/pg-0.14.1/ext/gem_make.out
---- End output of /opt/chef/embedded/bin/gem install pg -q --no-rdoc --no-ri -v "0.14.1" ----
Ran /opt/chef/embedded/bin/gem install pg -q --no-rdoc --no-ri -v "0.14.1" returned 1 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-29T08:21:07.367

最简单的解决方案是更新您本地的 postgresql 食谱。您观察到的问题已在最新版本的说明书中得到修复（所有版本 >= 1.0.0）。

现在他们是怎么解决的？首先，您会注意到客户端配方被拆分为`client.rb`和`ruby.rb`。前者只是安装 OS 包，后者是 Ruby gem 以在随后的 Chef 运行中使用。正如您所观察到的，该 gem 的安装需要先安装 build-essentials。这由[build-essential](http://community.opscode.com/cookbooks/build-essential) cookbook 使用的一个新属性控制，称为`node['build-essential']['compile_time']`. 这可以确保在编译期间安装所需的包，即直接在包含 build-essential 配方时安装。

要理解为什么这很重要，您必须了解一点关于[Chef Run 的剖析](http://wiki.opscode.com/display/chef/Anatomy+of+a+Chef+Run)，即执行食谱源代码时的编译时间与构建用于稍后转换的资源集合之间的差异以及以下收敛执行资源以将系统移向预期状态。

通常，大多数实际更改是在收敛阶段完成的。然而，有时有必要在编译阶段之前构建一些东西，以便能够使用它来决定要准确定义哪些资源，就像这里的情况一样。当我们提前安装`pg`gem 时，我们可以使用它来提前与数据库对话，例如决定是否创建数据库。

# android - 在 Github Android 项目中，LoginActivity 是如何启动的？

> ID：13116291
> 
> 赞同：1
> 
> 时间：2012-10-29T05:26:00.710
> 
> 标签：android, android-intent, android-activity

该项目的源代码位于[https://github.com/github/android](https://github.com/github/android)

我无法弄清楚 LoginActivity 是如何启动的。HomeActivity 是第一个启动的活动。不知何故，LoginActivity 也启动了。一般来说，最好有一个策略来跟踪什么 Intent 正在启动一个活动（该 Intent 对象在哪里创建）。在这个特定的场景下，我只是想了解一下 Github 开发者是如何实现认证的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T04:30:43.437

答案一方面是 RTFM，另一方面是对调试器的工作方式感到惊讶。

Github 使用 AccountManager。您可以从以下位置的文档开始：http: [//developer.android.com/training/id-auth/custom_auth.html#ExtendThatThing](http://developer.android.com/training/id-auth/custom_auth.html#ExtendThatThing)

```
 <service
        android:name=".accounts.AccountAuthenticatorService"
        android:exported="false"
        android:process=":auth" >
        <intent-filter>
            <action android:name="android.accounts.AccountAuthenticator" />
        </intent-filter>

        <meta-data
            android:name="android.accounts.AccountAuthenticator"
            android:resource="@xml/authenticator" />
    </service> 
```

第 2 部分 - 默认情况下，AccountAuthenticator 中设置的断点不会触发，因为它们不在同一个`thread`com.github.mobile 中运行。相反，它作为“com.github.mobile:auth”运行。您需要进入 DDMS 透视图以将 com.github.mobile:auth 设置为可调试以使用断点。

# c# - 将 DataTable 中的日期列转换为所需格式，然后再将其导入 sql server

> ID：13116292
> 
> 赞同：1
> 
> 时间：2012-10-29T05:26:07.177
> 
> 标签：c#, asp.net, sql, sql-server

我正在将一个 excel 表导入到 sql server db 表中，该表由 id | 数据（实际上是 mm/dd/yyyy 中的日期）我能够将数据导入数据库表但我希望将 Excel 表的数据（日期）列转换为 yyyy/mm/dd 格式，然后再将其导入sql服务器。这是我导入excel表的代码：

```
 DataTable dt7 = new DataTable();
      dt7.Load(dr);

                // Bulk Copy to SQL Server
     using (SqlBulkCopy bulkCopy = new SqlBulkCopy(sqlConnectionString))
     {                       

     bulkCopy.DestinationTableName = "ExcelTable";

     bulkCopy.WriteToServer(dt7);

     }
     dr.Close(); 
```

我找到了一段代码将 mm/dd/yyyy 转换为 yyyy/mm/dd：

```
 string a = "12/20/2012";
    DateTime dt = Convert.ToDateTime(a);
    string st = dt.ToString("yyyy/MM/dd");
    Label1.Text = a;
    Label2.Text = st; 
```

但我不知道如何在我的代码中实现它。我是一个完整的新手，所以你可能不得不用代码来解释:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T05:40:49.360

您必须从 DataTable 中检索所有 DataRows。选择 Date 列，修改它，放回原处。

```
DataRow[]  ExcelRows;
ExcelDataTable.Rows.CopyTo(ExcelRows,0);

For(int i=0;i<ExcelRows.Length;i++)//i represents the row
{
     var oldDate=ExcelRows [i]["DateColumn"].ToString();
     var newDate=Convert.ToDateTime(oldDate);   
     ExcelRows [i]["DateColumn"] = newDate.ToString("yyyy/MM/dd");   
}  

 bulkCopy.WriteToServer(ExcelRows); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T05:56:10.513

尝试这个：

```
Imports System.Data
Imports System.Data.OleDb
Imports System.Data.SqlClient
Imports System.Web.Configuration

//Declare Variables - Edit these based on your particular situation
Dim sSQLTable As String = "TempTableForExcelImport"
Dim sExcelFileName As String = "myExcelFile.xls"
Dim sWorkbook As String = "[WorkbookName$]"

//Create our connection strings
Dim sExcelConnectionString As String = "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" & Server.MapPath(sExcelFileName) & ";Extended Properties=""Excel 8.0;HDR=YES;"""
Dim sSqlConnectionString As String = WebConfigurationManager.ConnectionStrings("MyConnectionString").ToString

//Series of commands to bulk copy data from the excel file into our SQL table
Dim OleDbConn As OleDbConnection = New OleDbConnection(sExcelConnectionString)
Dim OleDbCmd As OleDbCommand = New OleDbCommand(("SELECT * FROM " & sWorkbook), OleDbConn)
OleDbConn.Open()
Dim dr As OleDbDataReader = OleDbCmd.ExecuteReader()

Using bulkCopy As New System.Data.SqlClient.SqlBulkCopy(con) 
bulkCopy.DestinationTableName = "tblExcel" 

//Define ColumnMappings: source(Excel) --destination(DB Table column)   
bulkCopy.ColumnMappings.Add("col1", "col1") 
bulkCopy.ColumnMappings.Add("col2", "col2") 
:
:
bulkCopy.ColumnMappings.Add("col2", ExcelRows [i]["DateColumn"].ToString("yyyy/MM/dd")) //This is for date

bulkCopy.WriteToServer(dr) 

End Using 
bulkCopy.WriteToServer(dr)
OleDbConn.Close() 
```

# javascript - 当 div 中的输入元素处于焦点时按下 enter 时重复 div

> ID：13116293
> 
> 赞同：0
> 
> 时间：2012-10-29T05:26:15.793
> 
> 标签：javascript

当 div 中的输入元素处于焦点时按下 enter 时，我需要复制 div 的帮助

所以有一个 div 里面有一个输入元素。我需要复制这个 div 并将其放在现有 div 的正下方，只要在光标位于输入元素中时按下 enter。

不使用 jquery 的解决方案会有很大帮助。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T05:29:19.287

这是一个高级概述......

*   监听元素`keypress`上的事件，for of 。`input``keyCode``13`
*   用于`cloneNode()`克隆节点。
*   使用最合适的节点插入方法，例如`appendChild()`插入克隆的元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T05:54:13.573

试试这个

**[演示](http://jsfiddle.net/pintu31/vC3jH/)**

```
<div id='container'>
<div id='div1'>
<input type='text' onkeyup='clone_element(event)' />
</div>
</div>

<script>
function clone_element(evt) {
var charCode = (evt.which) ? evt.which : event.keyCode
if(charCode == 13){
 var cDiv = document.getElementById("div1");
        var clonedDiv = cDiv.cloneNode (true);
        clonedDiv.id = "";
        var container = document.getElementById ("container");
        container.appendChild(clonedDiv);
}
}
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T05:39:20.267

您可以使用以下函数来克隆 div。这很可能是 Alex 提到的解决方案。我已经添加了代码。

```
function cloning(divid) {
    var container = document.getElementById(divid);
    var clone = document.getElementById('div_0').cloneNode(true);
    clone.setAttribute('id','div_'+document.getElementById(divid).getElementsByTagName('div').length);
    container.appendChild (clone);
} 
```

当你按下回车键时调用上面的函数。

```
<script language = "javascript">
function searchKeyPress(e)
    {
    // look for window.event in case event isn't passed in
     if (typeof e == 'undefined' && window.event) { e = window.event; }
     if (e.keyCode == 13)
      {
        alert("Enter received");
        cloning('divid');
      }
    }   

</script>

<input type="text" onkeydown="searchKeyPress()"> 
```

# php - Symfony2 上的 MongoDB+GridFS

> ID：13116294
> 
> 赞同：0
> 
> 时间：2012-10-29T05:26:34.453
> 
> 标签：php, mongodb, symfony, gridfs

我需要在我的 Mongo 数据库中存储一些文件并遇到以下两个问题：

1.  我不关心这些文件的名称，我将通过它们唯一的 mongo id 来解决它们。Mongo db驱动程序默认添加文件名，因为它正在将其内容添加到数据库中，我相信它也会在其上创建一个索引。有没有办法告诉它不要打扰文件的名称？

2.  如果我添加到数据库中的只是 JPEG 类型的图像（相同的内容类型），我是否可以通过使用 Symfony 的 mongo ODM 获得任何优势，如此处[所述](http://php-and-symfony.matthiasnoback.nl/2012/10/uploading-files-to-mongodb-gridfs-2/)

不确定我是否需要创建两个单独的问题，因为它们是完全不同的问题，但是对于这些问题中的任何一个问题的答案或想法将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T22:19:21.810

在此我对您的问题的想法：

1.  我认为没有办法告诉 MongoDB 驱动程序在将文件存储到 GridFS 时忽略文件名。我只是运行了一个简短的测试，文件名将始终存储在文档中。我发现默认情况下不会为文件名创建索引。这可以通过在 mongo shell 中运行 'db.Upload.files.getIndexes()' 来检查，以查看在集合上创建了哪些索引。

2.  我认为您存储的文件类型甚至文件大小没有限制。尽管 GridFS 是大型对象的存储规范，但它看起来对使用它没有任何限制，比如说，许多小型 JPEG 文件。将它与 Symfony 和 Mongo ODM 一起使用的一个小例子是，在请求上传文件时添加 ACL 功能非常容易。

希望这将回答您的问题。

# python - 用于无操作的 Django 查询集

> ID：13116301
> 
> 赞同：0
> 
> 时间：2012-10-29T05:27:47.040
> 
> 标签：python, django

有没有办法指定一个Django Queryset，它什么都不做，但仍然是有效的Queryset？理想情况下，空查询集不应调用 DB，结果将为空。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T05:33:46.817

```
模型.objects.none()
```

总是给你一个空的查询集

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T05:34:49.970

使用[`MyModel.objects.none()`](https://docs.djangoproject.com/en/dev/ref/models/querysets/#django.db.models.query.QuerySet.none)which 将返回一个`EmptyQuerySet`，它是一个`QuerySet`总是计算为空列表的子类。

例如，如果你有一个模型类`Entry`（或者只是使用`models.Model`），你可以简单地创建一个`EmptyQuerySet`：

```
>>> Entry.objects.none()
[] 
```

# closures - 动态选择查询与性能的 DB Closure 函数

> ID：13116302
> 
> 赞同：0
> 
> 时间：2012-10-29T05:28:21.940
> 
> 标签：closures, zend-framework2

我正在为 ZF2 项目制作报告页面。现在我需要生成依赖于过滤器的动态查询（可以是 '=', '>', '>=', '<', '<=', 'IN' ）。我正在使用 DB select 闭包来生成 where 语句。但我担心它是否会成为未来几天的瓶颈（通过性能或限制）。

任何机构都可以建议我的方法是否可以或需要生成字符串 where 语句如
`->where('A > 12 AND B < 12 AND C IN (1,2,3)')`

代替

```
->where(function(Where $where){
    $where->equalTo('A', 10)->equalTo('B', 12)->IN('C', array(1,2,3));
}); 
```

还是有更好的主意？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T08:16:00.537

我有一个更好的解决方案。我没有使用闭包，而是直接使用 Where Object 之类的东西

```
$where = new \Zend\Db\Sql\Where();
$where->equalTo('A', 10)->equalTo('B', 12)->IN('C', array(1,2,3));
$sql->select()->where($where); 
```

它更具动态性，因为 $where 可以由其他值动态更新。如果有人有其他想法，请分享。

# c# - 使用 C# 属性和 JSON

> ID：13116304
> 
> 赞同：1
> 
> 时间：2012-10-29T05:28:31.487
> 
> 标签：c#, json, properties, accessor

我在发送 JSON Feed 请求时遇到了这个问题。问题是提要有一个动态标题（即，当我发送对“testinput1”的请求时，标题响应将是 testinput1.

因此，我需要使我的 RootObject 动态化，但我不确定如何，请您帮帮我吗？

我已经输入了下面代码的麻烦部分

```
Deployment.Current.Dispatcher.BeginInvoke(() =>
{
    textBlock1.Text = "Details Loaded.";
    short_description.Text = feed.testinput1.short_description; // can I make testinput1 a constant? its based on code below
});

public class Event
{
    public string description { get; set; }
    public string datetime { get; set; }
}

public class TrackCode
{
    public string short_description { get; set; }
    public List<Event> events { get; set; }
}

public class RootObject
{
    public string tracker;
    public TrackCode testinput1// This needs to be based on user input each time
    {
        get; // Can I do something here to make sure that the "testinput1" changes each time?
        set;  // And create a constant that can be referred to?
    }
} 
```

希望我能做这样的事情：

```
 short_description.Text = feed.trackcode.short_description; // this is a constant

    public class RootObject
    {
        public string tracker = "AB123456789NZ"; // This is the variable that changes

        public TrackCode trackcode // this becomes a constant
        {
            get { return tracker; }  // uses tracking number as value for JSON when it retrieves it
            set { tracker = value;}
        }
    } 
```

我哪里出错了？谢谢！

# iphone - 在 iOS 应用中添加日历

> ID：13116306
> 
> 赞同：-2
> 
> 时间：2012-10-29T05:28:36.090
> 
> 标签：iphone, ios, ipad

我需要在我的 iOS 应用程序的导航栏中添加一个日历，以便当我单击日历按钮时会弹出一个日历视图，我将能够从中选择一个特定的日期。这是最好的方法吗？？？请回复

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-07T05:58:06.320

我使用**CKCalendar [https://github.com/jaykz52/CKCalendar](https://github.com/jaykz52/CKCalendar)**但我没有找到解决方案，如何在此日历中设置**提醒**并在日历中以不同颜色显示该提醒。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T05:37:24.783

您好，下面是日历自定义控制器的库。

1) [OCCalendar](http://www.cocoacontrols.com/platforms/ios/controls/occalendar)

2) [PM日历](http://www.cocoacontrols.com/platforms/ios/controls/pmcalendar)

3) [MAWeekView](http://www.cocoacontrols.com/platforms/ios/controls/maweekview)

4) [ios 日历](http://www.cocoacontrols.com/platforms/ios/controls/ios-calendar)

5)[卡尔](http://www.cocoacontrols.com/platforms/ios/controls/kal)

6) [CK日历](http://www.cocoacontrols.com/platforms/ios/controls/ckcalendar)

希望上面的图书馆可以帮助你

# ios - Phonegap iOS app: change keyboard appearance to UIKeyboardAppearanceAlert (again)

> ID：13116307
> 
> 赞同：3
> 
> 时间：2012-10-29T05:28:40.800
> 
> 标签：ios, xcode, cordova, keyboard

A couple of months ago, I posted a question asking if and how phonegap users can alter the keyboard appearance to the dark alert ui keyboard (UIKeyboardAppearanceAlert) without targeting individual textfields. I did some extnsive reaearch myself and offered a bounty but yet the question remained unsolved.

[Alter keyboard appearance in native, phonegap/Cordova built iOS App](https://stackoverflow.com/questions/11889830/alter-keyboard-appearance-in-native-phonegap-cordova-built-ios-app)

As of today, I'm still struggling to get this resolved and simply over with. I do realize much probably hasen't happened since last time I bothered you with this question, however, two things have in fact changed which somewhat justifies this seemingly double post:

1.  Phonegap has released version 2.1 which does some new stuff, perhaps this is possible now?
2.  As my client expects me to solve this in any way possible, this time I would also like to ask you for an alternative approach. If it still can't be done, would it be possible to custom make a "keyboard" of my own? I know this of course is technically doable, but is it in any way a recommended approach that would be considered in at least some way smart and justified? As I said, my client pushes hard for this and is not in favor of rebuilding the app completely natively.

Conclusively, as of today is there any way to do this with phonegap / Cordova? If not, would you recommend me to custom make a keyboard using HTML CSS and JavaScript, bearing in mind this is a major comsern for my client? If so, are there any good plugins that I can use as a start? Please check out my old post (linked above) to see what has already been tested.

Thanks in advance, Jonathan

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-08T08:49:40.057

我知道这已经很老了，但我偶然发现它正在寻找同样的东西。无论如何，我找到了一个可能的解决方案，即为 Cordova 创建一个插件[http://cordova.apache.org/docs/en/2.6.0/guide_plugin-development_index.md.html#Plugin%20Development%20Guide](http://cordova.apache.org/docs/en/2.6.0/guide_plugin-development_index.md.html#Plugin%20Development%20Guide)

它确实需要一些本机编码，但至少可以避免从头开始启动已经在 Cordova 中构建的应用程序。

# javascript-objects - Is there a way to iterate through a javascript object's prototype variables and functions?

> ID：13116308
> 
> 赞同：2
> 
> 时间：2012-10-29T05:28:44.873
> 
> 标签：javascript-objects, javascript

**This question is no longer applicable to what I'm trying to do because I have to declare the name of the pmp objects with a name.**

I want to be able to associate an object with each prototype function for my class without doing it manually for each prototype. I've tried seeing what's inside prototype with the following methods, but to no avail

```
myclass.prototype.length == undefined;
myclass.prototype.toString() == [object Object];
myclass.prototype == [object Object]; 
```

This is my code. In the following lines:

```
this.appear = _pmp(k8rModal.prototype._appear);
this.centerSlate = _pmp(k8rModal.prototype._centerSlate);
this.adjustToScreenResize = _pmp(k8rModal.prototype._adjustToScreenResize); 
```

I run a function called '_pmp' that creates a PreMainPost object that appear,centerSlate & adjustToScreenResize will refer to. These objects have a .run() function that will first run the pre() functions then the main() function which is being defined by the constructor parameter and then finally the post() functions.

This is all the context: k8r-modal.js

```
function k8rModal(DOMnamespace){
var _ = this._ = DOMnamespace+"_"; // for DOM namespacing

this.tightWrap=1;
this.visible = 0;

$('body').prepend('<div id="'+_+'stage"></div>');
this.stage = stage = $('#'+_+'stage');
stage.css({
    'display':'none',
    'width':'100%',
    'height':'100%',
    'position': 'fixed',
    'left':'0px',
    'top':'0px',
    'opacity': '.6',
    'background-color':'#333'
});

$('body').append('<div id="'+_+'slate"></div>');
this.slate = slate = $('#'+_+'slate');
slate.css({
    'display':'none',
    'width':'640px',
    'height':'480px',
    'position': 'fixed',
    'left':'0px',
    'top':'0px',
    'background-color':'#eee'
});

var k8rModalInstance = this;
$('.'+_+'caller').on('click',function(){
    k8rModalInstance.appear.run();
});

this.appear = _pmp(k8rModal.prototype._appear);
this.centerSlate = _pmp(k8rModal.prototype._centerSlate);
this.adjustToScreenResize = _pmp(k8rModal.prototype._adjustToScreenResize);

this.centerSlate.run();
this.word="asdf";
$(window).resize(function(){
    alert(k8rModalInstance.word)
  k8rModalInstance.adjustToScreenResize.run();
});
}

k8rModal.prototype._appear = function(){
this.that.visible = 1;
this.that.slate.show();
this.that.stage.show();
}

k8rModal.prototype._centerSlate = function(){
var wWidth, wHeight, slate = $(this.that.slate) ;

wWidth = $(window).width();
wHeight = $(window).height();

slate.css({
    top: (wHeight/2 - ( slate.height()/2))+"px",
    left: ( wWidth/2 - ( slate.width()/2 ) )+"px"
});
}

k8rModal.prototype._adjustToScreenResize = function(){
this.that.centerSlate.run();

} 
```

(pre-main-post.js) pmp.js:

```
function _pmp(func){
return new pmp(this,func);
}

function pmp(that,func){
var func;
this.pre = new funcList();
this.post = new funcList();
this.main = func;
this.that = that;
}

pmp.prototype.run = function(arg){
this.pre.run(arg);
this.post.run(arg,this.main());
}

pmp.prototype.trim = function(){
this.pre = new funcList();
this.post = new funcList();
} 
```

(an object that contains a list of functions)funcList.js:

```
function funcList(){
this.unique; // if a function can be 
this.list=[];
}

funcList.prototype.add = function(func){
if (this.unique){
    var passing = 1;
    for(var i; i<this.list.length; i+=1){
        if (list[i].toString == func.toString){
            passing = 0;
        }
    }
    if (passing){
        this.list.push(func);   
    }
}else{
    this.list.push(func);
}
}

funcList.prototype.remove = function(func){
for(var i; i<this.list.length; i+=1){
    if (list[i].toString == func.toString){
        this.list.splice(i,1);
    }
}
}

funcList.prototype.clear = function(){
this.list = [];
}

funcList.prototype.run = function(arg){
for(var i; i<this.list.length; i+=1){
    (this.list[i])(arg);
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T05:34:27.343

您只能访问本机和函数的原型。如果 myClass 是一个函数，您可以使用

```
for(var prop in myClass.prototype){
    console.log(myClass.prototype[prop]);
} 
```

# c++ - Fastest way to find up to 6 consecutive 0 bits in a char array

> ID：13116310
> 
> 赞同：9
> 
> 时间：2012-10-29T05:29:05.123
> 
> 标签：c++, c, algorithm, bit-manipulation, bit

This is what I'm currently doing:

```
int dataLen = 500;
char data[dataLen];
int desired = 1; // between 1 and 6, inclusive
...
char bits[dataLen * 8];
for (int32 j = 0; j < dataLen; j++) {
    for (int i = 0; i < 8; i++) {
        bits[j*8+i] = ( (data[j] & (1 << (7-i))) ? '1' : '0' );
    }
}
int offset = std::search_n(bits, bits + dataLen*8, desired, '0') - bits; 
```

Really nasty, I know, and it's killing performance.

What's the fastest way to find the bit offset of the first set of `x` consecutive 0 bits in a char array, where `0 < x < 7`? I'm on GCC with SSE 4.2 so builtins like __builtin_ctz, __builtin_popcountl are an option, I just can't figure out the best way to use them.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T06:22:06.287

有多少个数字有 6 个连续的 0 位（即使考虑 2 个连续的字节）？

```
Byte 1
XXXXXXXX
000000??             0/1/2/3
?000000?             0/1/128/129
??000000             0/64/128/192 
```

因此，如果我们一次考虑 1 个字节，那么 0/1/2/3/64/128/192

```
Byte a   Byte b
XXXXXXXX XXXXXXXX
??100000 0???????    (a & 31 == 0) && (b & 128 == 0)
???10000 00??????    (a & 15 == 0) && (b & 192 == 0)
????1000 000?????    (a & 7  == 0) && (b & 224 == 0)
?????100 0000????    (a & 3  == 0) && (b & 240 == 0)
??????10 00000???    (a & 1  == 0) && (b & 248 == 0) 
```

因此，绝对最多 12 次测试可以为您提供所有组合。
我相信如果你巧妙地进行比较，你可以减少这种情况。

如果我们在下面使用表格驱动方法来强化@Michael Burr 解决方案。然后我们可以组织它，以便您可以对每个字节进行一两次比较。

```
struct TestStruct
{
    bool    is6Consecutive;
    bool    hasTrailing;
    int     maskNextByte;
    int     offset;
};
TestStruct   testData[256];

std::size_t findOffsetOf_6ConsecutiveZero(char const* data, size_t size)
{
    for(int loop = 0;loop < (size-1); ++loop)
    {
        char const&           val  = data[loop];
        TestStructure const&  test = testData[val];

        if (test.is6Consecutive)
        {   return loop*8 + test.offset;
        }

        if (test.hasTrailing)
        {
            if ((data[loop + 1] & test.maskNextByte) == 0)
            {   return loop*8 + test.offset;
            }
        }
    }
    // Test last byte
    TestStructure const&  test = testData[data[size-1]];
    if (test.is6Consecutive)
    {   return (size-1)*8 + test.offset;
    }

    return -1;
} 
```

前几个表条目：

```
TestStruct   testData[256] =
{
    {true,  false, 0x00, 0},
    {true,  false, 0x00, 0},
    {true,  false, 0x00, 0},
    {true,  false, 0x00, 0},
    {false, true,  0xf0, 6},  // 4 => 00000100 <Next 4 bytes are zero we hit>
    {false, false, 0x00, 0},  // 5 => 00000101 <Ignore and move on>
    {false, true,  0xf8, 7},  // 6 => 00000110 <Next 5 bytes are zero we hit>
    etc...

}; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-30T05:27:16.373

这是一个与问题中提供的输出相匹配的函数（至少在有限的测试下）。它使用表格查找，表格是由一次性脚本生成的。老实说，我不确定它的性能是否与使用 bit testing hackery 或 GCC builtins 的建议相比具有竞争力，但我敢打赌它不会太远。

```
struct zeros {
    unsigned char leading;
    unsigned char internal;
    unsigned char trailing;
};

// forward declaration so the long, non-interesting table is at the 
//  end of this 
static struct zeros const zero_table[256];

int find_zero_bits_offset( char const* data, int datalen, int desired)
{
    int offset = -1;
    int found = 0;
    char const* dataptr = &data[0];
    char const* endptr  = &data[datalen];

    // first, find which byte the sequence of zeros begins

    while (!found && (dataptr != endptr)) {
        unsigned char ch1 = *dataptr++;
        unsigned char ch2 = (dataptr != endptr) ? *dataptr : 0xff;

        int internal = zero_table[ch1].internal;
        int trailing = zero_table[ch1].trailing;
        int leading =  zero_table[ch2].leading;

        found = (desired <= internal) || 
                (trailing && (desired <= (trailing + leading)));
    }

    // now zero in on where the sequence starts within the byte

    if (found) {
        char ch = 0;
        unsigned int mask = 0;

        --dataptr;

        // dataptr points to the byte where the sequence of zeros starts.
        //  figure out exactly where the sequence is...

        // there's possibly some opportunity for optimization, if neccesary,
        //  by testing if the sequence was found in the "leading", "internal", or
        //  "trailing" cases. But the explicit loop will only iterate at most
        //  8 times (and will early-out on the first iteration if the match is 
        //  for the "leading" case) that it didn't seem too important

        ch = *dataptr;
        offset = (dataptr - data) * 8;

        // figure out where the appropriate internal run starts
        // note that the offset we need to return isn't necessarily the
        //  offset for the run of zeros counted by zero_table[tmp].internal_offset
        //  since a sufficient shorter run might come first

        // there may be a more efficient bithack for this, but the
        //  loop will iterate at most 8 times...
        mask = ((1 << desired) - 1);
        mask <<= (8 - desired);

        while ((ch & mask) != 0) {
            ++offset;
            mask >>= 1;
        }
    }
    else {
        // however you want to handle the "not found" situation. 
        //  This is equivalent to what was in the question:
        offset = (endptr - data) * 8;
    }

    return offset;
}

static struct zeros const zero_table[256] = {
    { 8, 8, 8 },  // 0000 0000
    { 7, 7, 0 },  // 0000 0001
    { 6, 6, 1 },  // 0000 0010
    { 6, 6, 0 },  // 0000 0011
    { 5, 5, 2 },  // 0000 0100
    { 5, 5, 0 },  // 0000 0101
    { 5, 5, 1 },  // 0000 0110
    { 5, 5, 0 },  // 0000 0111
    { 4, 4, 3 },  // 0000 1000
    { 4, 4, 0 },  // 0000 1001
    { 4, 4, 1 },  // 0000 1010
    { 4, 4, 0 },  // 0000 1011
    { 4, 4, 2 },  // 0000 1100
    { 4, 4, 0 },  // 0000 1101
    { 4, 4, 1 },  // 0000 1110
    { 4, 4, 0 },  // 0000 1111
    { 3, 4, 4 },  // 0001 0000
    { 3, 3, 0 },  // 0001 0001
    { 3, 3, 1 },  // 0001 0010
    { 3, 3, 0 },  // 0001 0011
    { 3, 3, 2 },  // 0001 0100
    { 3, 3, 0 },  // 0001 0101
    { 3, 3, 1 },  // 0001 0110
    { 3, 3, 0 },  // 0001 0111
    { 3, 3, 3 },  // 0001 1000
    { 3, 3, 0 },  // 0001 1001
    { 3, 3, 1 },  // 0001 1010
    { 3, 3, 0 },  // 0001 1011
    { 3, 3, 2 },  // 0001 1100
    { 3, 3, 0 },  // 0001 1101
    { 3, 3, 1 },  // 0001 1110
    { 3, 3, 0 },  // 0001 1111
    { 2, 5, 5 },  // 0010 0000
    { 2, 4, 0 },  // 0010 0001
    { 2, 3, 1 },  // 0010 0010
    { 2, 3, 0 },  // 0010 0011
    { 2, 2, 2 },  // 0010 0100
    { 2, 2, 0 },  // 0010 0101
    { 2, 2, 1 },  // 0010 0110
    { 2, 2, 0 },  // 0010 0111
    { 2, 3, 3 },  // 0010 1000
    { 2, 2, 0 },  // 0010 1001
    { 2, 2, 1 },  // 0010 1010
    { 2, 2, 0 },  // 0010 1011
    { 2, 2, 2 },  // 0010 1100
    { 2, 2, 0 },  // 0010 1101
    { 2, 2, 1 },  // 0010 1110
    { 2, 2, 0 },  // 0010 1111
    { 2, 4, 4 },  // 0011 0000
    { 2, 3, 0 },  // 0011 0001
    { 2, 2, 1 },  // 0011 0010
    { 2, 2, 0 },  // 0011 0011
    { 2, 2, 2 },  // 0011 0100
    { 2, 2, 0 },  // 0011 0101
    { 2, 2, 1 },  // 0011 0110
    { 2, 2, 0 },  // 0011 0111
    { 2, 3, 3 },  // 0011 1000
    { 2, 2, 0 },  // 0011 1001
    { 2, 2, 1 },  // 0011 1010
    { 2, 2, 0 },  // 0011 1011
    { 2, 2, 2 },  // 0011 1100
    { 2, 2, 0 },  // 0011 1101
    { 2, 2, 1 },  // 0011 1110
    { 2, 2, 0 },  // 0011 1111
    { 1, 6, 6 },  // 0100 0000
    { 1, 5, 0 },  // 0100 0001
    { 1, 4, 1 },  // 0100 0010
    { 1, 4, 0 },  // 0100 0011
    { 1, 3, 2 },  // 0100 0100
    { 1, 3, 0 },  // 0100 0101
    { 1, 3, 1 },  // 0100 0110
    { 1, 3, 0 },  // 0100 0111
    { 1, 3, 3 },  // 0100 1000
    { 1, 2, 0 },  // 0100 1001
    { 1, 2, 1 },  // 0100 1010
    { 1, 2, 0 },  // 0100 1011
    { 1, 2, 2 },  // 0100 1100
    { 1, 2, 0 },  // 0100 1101
    { 1, 2, 1 },  // 0100 1110
    { 1, 2, 0 },  // 0100 1111
    { 1, 4, 4 },  // 0101 0000
    { 1, 3, 0 },  // 0101 0001
    { 1, 2, 1 },  // 0101 0010
    { 1, 2, 0 },  // 0101 0011
    { 1, 2, 2 },  // 0101 0100
    { 1, 1, 0 },  // 0101 0101
    { 1, 1, 1 },  // 0101 0110
    { 1, 1, 0 },  // 0101 0111
    { 1, 3, 3 },  // 0101 1000
    { 1, 2, 0 },  // 0101 1001
    { 1, 1, 1 },  // 0101 1010
    { 1, 1, 0 },  // 0101 1011
    { 1, 2, 2 },  // 0101 1100
    { 1, 1, 0 },  // 0101 1101
    { 1, 1, 1 },  // 0101 1110
    { 1, 1, 0 },  // 0101 1111
    { 1, 5, 5 },  // 0110 0000
    { 1, 4, 0 },  // 0110 0001
    { 1, 3, 1 },  // 0110 0010
    { 1, 3, 0 },  // 0110 0011
    { 1, 2, 2 },  // 0110 0100
    { 1, 2, 0 },  // 0110 0101
    { 1, 2, 1 },  // 0110 0110
    { 1, 2, 0 },  // 0110 0111
    { 1, 3, 3 },  // 0110 1000
    { 1, 2, 0 },  // 0110 1001
    { 1, 1, 1 },  // 0110 1010
    { 1, 1, 0 },  // 0110 1011
    { 1, 2, 2 },  // 0110 1100
    { 1, 1, 0 },  // 0110 1101
    { 1, 1, 1 },  // 0110 1110
    { 1, 1, 0 },  // 0110 1111
    { 1, 4, 4 },  // 0111 0000
    { 1, 3, 0 },  // 0111 0001
    { 1, 2, 1 },  // 0111 0010
    { 1, 2, 0 },  // 0111 0011
    { 1, 2, 2 },  // 0111 0100
    { 1, 1, 0 },  // 0111 0101
    { 1, 1, 1 },  // 0111 0110
    { 1, 1, 0 },  // 0111 0111
    { 1, 3, 3 },  // 0111 1000
    { 1, 2, 0 },  // 0111 1001
    { 1, 1, 1 },  // 0111 1010
    { 1, 1, 0 },  // 0111 1011
    { 1, 2, 2 },  // 0111 1100
    { 1, 1, 0 },  // 0111 1101
    { 1, 1, 1 },  // 0111 1110
    { 1, 1, 0 },  // 0111 1111
    { 0, 7, 7 },  // 1000 0000
    { 0, 6, 0 },  // 1000 0001
    { 0, 5, 1 },  // 1000 0010
    { 0, 5, 0 },  // 1000 0011
    { 0, 4, 2 },  // 1000 0100
    { 0, 4, 0 },  // 1000 0101
    { 0, 4, 1 },  // 1000 0110
    { 0, 4, 0 },  // 1000 0111
    { 0, 3, 3 },  // 1000 1000
    { 0, 3, 0 },  // 1000 1001
    { 0, 3, 1 },  // 1000 1010
    { 0, 3, 0 },  // 1000 1011
    { 0, 3, 2 },  // 1000 1100
    { 0, 3, 0 },  // 1000 1101
    { 0, 3, 1 },  // 1000 1110
    { 0, 3, 0 },  // 1000 1111
    { 0, 4, 4 },  // 1001 0000
    { 0, 3, 0 },  // 1001 0001
    { 0, 2, 1 },  // 1001 0010
    { 0, 2, 0 },  // 1001 0011
    { 0, 2, 2 },  // 1001 0100
    { 0, 2, 0 },  // 1001 0101
    { 0, 2, 1 },  // 1001 0110
    { 0, 2, 0 },  // 1001 0111
    { 0, 3, 3 },  // 1001 1000
    { 0, 2, 0 },  // 1001 1001
    { 0, 2, 1 },  // 1001 1010
    { 0, 2, 0 },  // 1001 1011
    { 0, 2, 2 },  // 1001 1100
    { 0, 2, 0 },  // 1001 1101
    { 0, 2, 1 },  // 1001 1110
    { 0, 2, 0 },  // 1001 1111
    { 0, 5, 5 },  // 1010 0000
    { 0, 4, 0 },  // 1010 0001
    { 0, 3, 1 },  // 1010 0010
    { 0, 3, 0 },  // 1010 0011
    { 0, 2, 2 },  // 1010 0100
    { 0, 2, 0 },  // 1010 0101
    { 0, 2, 1 },  // 1010 0110
    { 0, 2, 0 },  // 1010 0111
    { 0, 3, 3 },  // 1010 1000
    { 0, 2, 0 },  // 1010 1001
    { 0, 1, 1 },  // 1010 1010
    { 0, 1, 0 },  // 1010 1011
    { 0, 2, 2 },  // 1010 1100
    { 0, 1, 0 },  // 1010 1101
    { 0, 1, 1 },  // 1010 1110
    { 0, 1, 0 },  // 1010 1111
    { 0, 4, 4 },  // 1011 0000
    { 0, 3, 0 },  // 1011 0001
    { 0, 2, 1 },  // 1011 0010
    { 0, 2, 0 },  // 1011 0011
    { 0, 2, 2 },  // 1011 0100
    { 0, 1, 0 },  // 1011 0101
    { 0, 1, 1 },  // 1011 0110
    { 0, 1, 0 },  // 1011 0111
    { 0, 3, 3 },  // 1011 1000
    { 0, 2, 0 },  // 1011 1001
    { 0, 1, 1 },  // 1011 1010
    { 0, 1, 0 },  // 1011 1011
    { 0, 2, 2 },  // 1011 1100
    { 0, 1, 0 },  // 1011 1101
    { 0, 1, 1 },  // 1011 1110
    { 0, 1, 0 },  // 1011 1111
    { 0, 6, 6 },  // 1100 0000
    { 0, 5, 0 },  // 1100 0001
    { 0, 4, 1 },  // 1100 0010
    { 0, 4, 0 },  // 1100 0011
    { 0, 3, 2 },  // 1100 0100
    { 0, 3, 0 },  // 1100 0101
    { 0, 3, 1 },  // 1100 0110
    { 0, 3, 0 },  // 1100 0111
    { 0, 3, 3 },  // 1100 1000
    { 0, 2, 0 },  // 1100 1001
    { 0, 2, 1 },  // 1100 1010
    { 0, 2, 0 },  // 1100 1011
    { 0, 2, 2 },  // 1100 1100
    { 0, 2, 0 },  // 1100 1101
    { 0, 2, 1 },  // 1100 1110
    { 0, 2, 0 },  // 1100 1111
    { 0, 4, 4 },  // 1101 0000
    { 0, 3, 0 },  // 1101 0001
    { 0, 2, 1 },  // 1101 0010
    { 0, 2, 0 },  // 1101 0011
    { 0, 2, 2 },  // 1101 0100
    { 0, 1, 0 },  // 1101 0101
    { 0, 1, 1 },  // 1101 0110
    { 0, 1, 0 },  // 1101 0111
    { 0, 3, 3 },  // 1101 1000
    { 0, 2, 0 },  // 1101 1001
    { 0, 1, 1 },  // 1101 1010
    { 0, 1, 0 },  // 1101 1011
    { 0, 2, 2 },  // 1101 1100
    { 0, 1, 0 },  // 1101 1101
    { 0, 1, 1 },  // 1101 1110
    { 0, 1, 0 },  // 1101 1111
    { 0, 5, 5 },  // 1110 0000
    { 0, 4, 0 },  // 1110 0001
    { 0, 3, 1 },  // 1110 0010
    { 0, 3, 0 },  // 1110 0011
    { 0, 2, 2 },  // 1110 0100
    { 0, 2, 0 },  // 1110 0101
    { 0, 2, 1 },  // 1110 0110
    { 0, 2, 0 },  // 1110 0111
    { 0, 3, 3 },  // 1110 1000
    { 0, 2, 0 },  // 1110 1001
    { 0, 1, 1 },  // 1110 1010
    { 0, 1, 0 },  // 1110 1011
    { 0, 2, 2 },  // 1110 1100
    { 0, 1, 0 },  // 1110 1101
    { 0, 1, 1 },  // 1110 1110
    { 0, 1, 0 },  // 1110 1111
    { 0, 4, 4 },  // 1111 0000
    { 0, 3, 0 },  // 1111 0001
    { 0, 2, 1 },  // 1111 0010
    { 0, 2, 0 },  // 1111 0011
    { 0, 2, 2 },  // 1111 0100
    { 0, 1, 0 },  // 1111 0101
    { 0, 1, 1 },  // 1111 0110
    { 0, 1, 0 },  // 1111 0111
    { 0, 3, 3 },  // 1111 1000
    { 0, 2, 0 },  // 1111 1001
    { 0, 1, 1 },  // 1111 1010
    { 0, 1, 0 },  // 1111 1011
    { 0, 2, 2 },  // 1111 1100
    { 0, 1, 0 },  // 1111 1101
    { 0, 1, 1 },  // 1111 1110
    { 0, 0, 0 },  // 1111 1111
}; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-29T05:44:50.000

逐字遍历数组（32 位或 64 位取决于您的拱门）。使用`__builtin_clz`and`__builtin_ctz`计算每个单词的前导零和尾随零。

连续零有两种情况：

*   一言以蔽之
*   跨越形容词。

第一种情况很容易检查。第二种情况需要检查此项的前导零+前一项的尾随零是否> = 6。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-31T23:53:55.103

请注意这些算术技巧：

```
// remove the trailing one bits
y = x & (x + 1);

x       11100011
        +      1
        --------
x+1     11100100
x&(x+1) 11100000

// remove the trailing zero bits
z = y | (y - 1);

y       11100000
        -      1
        --------
y-1     11011111
y|(y-1) 11111111

// isolate the hole
hole = z - x;
hole = z ^ x;

z       11111111
x       11100011
        --------
z^x     00011100

// Now you can count the set bits of the hole.
length = bitcount(hole);

// Or you can make it by computing highbit only (log2).
length = highbit(z^y) - highbit(x^y); 
```

因此，一种可能的算法是使用这些技巧与大整数算术和循环直到长度==0（没有更多的洞）或长度>=n（你开始下一个循环 x=z;）。

您可以自己模拟大整数，逐字节作用于收集，并在没有进位时停止。

*   仅当 byte==0xFF 时 x+1 才有进位
*   y-1 只有在 byte==0x00 时才有进位
*   highbit 易于在单个字节上编程

这会给出这样的结果：

```
// return 1-based position of highest bit set in a byte
int highbit(unsigned char c)
{
    unsigned char n;
    int position = 0;
    n = c >> 4;
    if( n > 0 ) { c=n; position+=4; };
    n = c >> 2;
    if( n > 0 ) { c=n; position+=2; };
    n = c >> 1;
    if( n > 0 ) { c=n; position+=1; };
    position += c;
    return position;
}

int find_consecutive_zeros( unsigned char *bits , int nbytes , int nzero )
{
    int i,nTrailingOnes,nTrailingZero,sizeOfNextHole;
    unsigned char x,y;
    for(i=0 , x=bits[0]; 1; )
    {
        // perform y=x&(x+1) to count and remove trailing ones
        for(;x==0xFF && i<nbytes-1;x=bits[++i]);
        y = x&(x+1);
        nTrailingOnes = 8*i + highbit( x^y );
        // perform x=y|(y-1); to count and remove trailing zeros
        for(;y==0 && i<nbytes-1;y=bits[++i]);
        x = y|(y-1);
        nTrailingZero = 8*i + highbit( x^y );
        sizeOfNextHole = nTrailingZero - nTrailingOnes;
        // if size of hole is long enough, return it's low bit rank (0-based)
        if( sizeOfNextHole >= nzero ) return nTrailingOnes;
        // or return -1 if no more hole
        if( sizeOfNextHole == 0 ) return -1;
    }
} 
```

您可以通过使用比基本集合更长的字节来提高效率......

**编辑：**当你有一个固定大小的 nzero 像 6 时加速
上面的算法迭代所有的孔，并且可能会在小孔上浪费时间。
您可以使用填充了小孔的预计算表来避免这种情况。

例如 10010101 有 3 个孔太短，因此您可以将其替换为 11111111。
但您必须保持前导零和尾随零不变。

要初始化这样的表，您只需使用 0xFF 和 xor 与包含 1 位代替尾随零`(x|(x-1))^x`的掩码和包含 1 位代替前导零的掩码`((1<<highbit(x))-1)^0xFF`。
为 10000001 添加一个例外，唯一的字节在 1 之间包含 6 个零。

**EDIT2**：我首先处理了第一个字节的最低有效位的位序列，这很适合算术方法。该问题首先明确使用第一个字节的最高有效位。所以我必须反转位以适应问题，这是在初始化表时完成的......

```
int reversebits(unsigned char c)
{
    c = ((c & 0x0F) << 4) | ((c & 0xF0) >> 4);
    c = ((c & 0x33) << 2) | ((c & 0xCC) >> 2);
    c = ((c & 0x55) << 1) | ((c & 0xAA) >> 1);
    return c;
}
void initializeFillShortHoles(unsigned char fillShortHoles[256])
    for(unsigned int x=0;x<256;x++) {
        fillShortHoles[reversebits(x)] = ((1<<highbit(x))-1) ^ (x|(x-1)) ^ x;
    }
    fillShortHoles[0]=0;     // no use to reverse bits for those two
    fillShortHoles[129]=129;
} 
```

然后你只需替换出现的`x=bits[ i ]`with `x=fillShortHoles[ bits[ i ] ]`，你就完成了：

```
int find_6_consecutive_zeros( unsigned char *bits , int nbytes )
{
    static unsigned char fillShortHoles[256];
    static unsigned char highbitTable[256];
    static first=1;
    int i,nTrailingOnes,nTrailingZero,sizeOfNextHole;
    unsigned char x,y;

    if (first)
    {
        first = 0;
        initializeFillShortHoles( fillShortHoles );
        for(i=0;i<256;i++) highbitTable[i]=highbit(i);
    }
    for(x=fillShortHoles[bits[i=0]]; 1; )
    {
        // perform y=x&(x+1) to count trailing ones
        for(;x==0xFF && i<nbytes-1;x=fillShortHoles[bits[++i]]);
        y = x&(x+1);
        nTrailingOnes = 8*i + highbitTable[ x^y ];
        // perform z=y|(y-1); to count trailing zeros
        for(;y==0 && i<nbytes-1;y=fillShortHoles[bits[++i]]);
        x = y|(y-1);
        nTrailingZero = 8*i + highbitTable[ x^y ];
        sizeOfNextHole = nTrailingZero - nTrailingOnes;
        // if size of hole is long enough, return it's low bit rank (0-based)
        if( sizeOfNextHole >= 6 ) return nTrailingOnes;
        // or return -1 if no more hole
        if( sizeOfNextHole == 0 ) return -1;
    }
} 
```

**EDIT3：**最后，对于 nzero<=9，更快的方法是缓存每对字节的位置。

```
int find_n_consecutive_zeros_bypair( unsigned char *bits , int nbytes , int nzero)
{
    static int first=1;
    static signed char holepositionbypair[8][65536];
    signed char position;
    int i;
    unsigned short x;
    if (first)
    {
        first = 0;
        for(i=0;i<8;i++) {
            initializeHolePositionByPair( holepositionbypair[i] , i+1 );
        }
    }
    for (i=0 , x=0xFF; i<nbytes; i++) {
        x = (x << 8) + bits[i];
        if( (position = holepositionbypair[nzero-1][x]) >= 0) return (i-1)*8 + position;
    }
    return -1;
} 
```

注意初始化 x=0xFF 将处理 nbytes<2 的情况。

无论您如何逐对填充缓存孔位置，它都只会在初始化时调用。我当然提出算术方法：

```
int highbit16(unsigned short c)
{
    unsigned short n;
    int position = 0;
    n = c >> 8;
    if( n ) { c=n; position+=8; };
    n = c >> 4;
    if( n ) { c=n; position+=4; };
    n = c >> 2;
    if( n ) { c=n; position+=2; };
    n = c >> 1;
    if( n ) { c=n; position+=1; };
    position += c;
    return position;
}
unsigned short reversebits16(unsigned short c)
{
    c = ((c & 0x00FF) << 8) | ((c & 0xFF00) >> 8);
    c = ((c & 0x0F0F) << 4) | ((c & 0xF0F0) >> 4);
    c = ((c & 0x3333) << 2) | ((c & 0xCCCC) >> 2);
    c = ((c & 0x5555) << 1) | ((c & 0xAAAA) >> 1);
    return c;
}
initializeHolePositionByPair(signed char holepositionbypair[65536],int n)
{
    int i,n1,n0;
    unsigned short x,y;
    signed char position;
    for(i=0;i<65536;i++) {
        position = -1;
        x = i;
        while(x != 0xFFFF) {
            /* remove trailing ones */
            y = x&(x+1);
            n1 = highbit16(x^y);
            /* remove trailing zeros */
            x = y|(y-1);
            n0 = highbit16(x^y);
            if(n0-n1>=n) {
                position = n1; break;
            }
        }
        holepositionbypair[reversebits16(i)] = position;
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-29T08:36:12.377

让我试试 - 怎么样：

```
class bitIterator{
    unsigned char* farray;
    int foffset;
public:
    bitIterator(unsigned char* array, int offset)
        :farray(array), foffset(offset)
    {}

    bool operator*() const {
        return (farray[foffset/8] >> (7 - foffset%8)) & 1;
    }

    bitIterator& operator++(){
        foffset++;
        return *this;
    }

    int offset() const {
        return foffset; 
    }

};

// Just to demonstrate how to call it
int find_first_n(unsigned char* buffer, int length, int n){
    return std::search_n(bitIterator(buffer, 0), bitIterator(buffer, length*8), n, 0).offset();
} 
```

那只是为了好玩...

现在，如果您真的想从中挤出一些性能，我会建议

```
int find_first_n(unsigned char* buffer, int length, int n){
    int prev_trail = 0;
    unsigned int* buf = reinterpret_cast<unsigned int*>(buffer);
    int len = length/sizeof(int); 
    // Last few bytes will need special treatment if your array is not multple of int-size length.
    // However last bytes should not influence overall performance of code - assuming it is used on rather long arrays.
    // If you plan using rather short arrays (20-50 bytes?) you will probably be better off just using plain char.
    for (int i=0; i<len; i++){
        if (!buf[i]) return i*sizeof(int)*8-prev_trail; // __builtin_clz and __builtin_ctz are undefined on zero ;
        // EDIT:
        if (!~buf[i]){
            prev_trail = 0;
            continue;
        }
        // END EDIT!

        int shft = __builtin_clz(buf[i]);
        if (shft + prev_trail >= n) return i*sizeof(int)*8-prev_trail; // Leading + previous trailing <= n
                                                           // Not enough leading zeros, continue search.
        prev_trail = __builtin_ctz(buf[i]); // Store it to use for next int in array
        unsigned int tmp =0;               
        while(shft < sizeof(int)*8-prev_trail){   // While we haven't got to trailing zeros in this uint
            tmp = buf[i] << shft;               // Shift-out leading zeros;
            shft += (__builtin_clz(~tmp));
            tmp = buf[i] << shft;               // Shift-out leading ones;

            lead_zeros = __builtin_clz(tmp);
            if (lead_zeros >= n)                // and see if have enough leading zeros.
                return i*sizeof(int)*8+shft;

            shft += lead_zeros;
        }
        return length*8; // Not found :(
    } 
```

这很难阅读，但概念很简单 - 只需遍历每个 int 大小的块，并查看每个块的前导零 + 前一个的尾随零是否 >= n。如果不只是反复移出前导零和后面的零（设置位），并再次检查尾随零> = n，只要我们没有得到尾随字节。

还有一个想法：

```
int find_first_n(unsigned char* buffer, int length, int n){
    union {
        unsigned char chr[2];
        unsigned int uit;
    };

    unsigned int onemask = 0x8000;
    for (int i = 1 ; i<n; i++) onemask = onemask | (onemask >> 1);

    int* masks = new int[8];
    for (int i = 0; i<8; i++){
        masks[i]=onemask >> i;
    }

    // generating masks - eg. for n == 3 would be:
    // [ 1110 0000 0000 0000 ]
    // [ 0111 0000 0000 0000 ]
    // [ 0011 1000 0000 0000 ]
    // [ 0001 1100 0000 0000 ]
    // [ ... ]
    // [ 0000 0001 1100 0000 ]

    uit = 0;
    for (int i=0; i<length-1; i++){
        chr[0] = buffer[i];
        chr[1] = buffer[i+1];
        for (int j=0; j<8; j++){
            if (!(uit & masks[j])) return i*8+j;
        }
    }
    chr[0] = buffer[length-1];
    chr[1] = 0xff; // Fill with ones at the end.
    for (int j=0; j<8; j++){
        if (!(uit & masks[j])) return (length-1)*8+j;
    }
    return length*8; // Not found :(
} 
```

您可能很想将指向仍在缓冲区中的变量的指针直接转换为 word ( `reinterpret_cast<unsigned short int*>(buffer[i])`) 并在不使用联合的情况下应用掩码。但是请注意，此类操作中有一半会使用未对齐的变量，这会降低性能，并且在某些平台上甚至会产生异常。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-29T06:16:46.353

在这里，试试这个代码。

```
int dataLen = 500;
char data[dataLen];
//Get the data in place with whatever is your algorithm.
int i,j;
unsigned int dataSample;
unsigned int mask;
for(i=0;i<dataLen-1;i++){
    dataSample=((unsigned int)(data[i+1]) << 8) | (unsigned int) (data[i]);
    mask=(1<<6) - 1 ; //6 consecutive 1's
    for(j=0;j<8;j++){
        if((dataSample & (mask << j)) == 0){
            printf("Found consecutive 6 zeros at byte %d offset %d\n",i,j);
            j+=5; // Followed by j++ makes it j+=6.
        }
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-29T10:24:18.310

假设您正在寻找*正好*6 个连续的零。您可以使用这样的代码片段：

```
unsigned d1 = 0xff;
for (int i = 0; i < dataLen; i += 3) {
  unsigned d1 = (d1 << 24) | (data[i] << 16) | (data [i+1] << 8) | (data[i+2]);
  unsigned d2 = ~d1; // ones
  unsigned d3 = d2 & (d2 << 2) & (d2 << 4);
  unsigned d4 = d3 & (d3 << 1);
  if (!d4) continue;
  doSomethingWithTheSequence(i, d4);
} 
```

`d1`将前一次运行的最后一个字节与三个新字节结合起来。因此，您可以以 3 的倍数迭代数据。您可以尝试 2 的倍数，这可能更有效，因为您可以将数据视为 16 位原子量。您还可以尝试 4 的倍数，然后对 64 位数字进行后续计算，尤其是在 64 位平台上时。或者您为跨越字节的零序列引入了一种特殊情况。

`d2`反转位模式，这很有用，因为移位会引入人为的零，但不会引入人为的零。`d3`在偏移量 0、2 和 4 处查找三个匹配的偏移量。`d4`然后添加另一位偏移量，从而组合从 0 到 5 的所有偏移量。所以`d4`当且仅当`d1`. 然后您可以使用`__builtin_clz`来识别 in 中最高`d4`位的位置，这也是这 6 位中的第一个的位置`d1`。从中你可以得到职位`data`。

您可以通过添加一个循环并希望编译器将其优化掉，或者通过提供一个内联模板函数来调整代码以适应其他运行长度，该函数以适合所需运行长度的方式进行`d4`计算。`d2`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-29T07:24:07.023

对于一个字节，你只需要做 3 次测试：

```
if( (byte & 0x3F) == 0) { /* Found */ }
if( (byte & 0x7E) == 0) { /* Found */ }
if( (byte & 0xFC) == 0) { /* Found */ } 
```

将其扩展到更广泛的值应该相对容易。例如，对于`uint32_t`：

```
tempValue1 = value & 0x3F3F3F3F;
tempValue2 = value & 0x7E7E7E7E;
tempValue3 = value & 0xFCFCFCFC;
if( ( (uint8_t)tempValue1 == 0) { /* Found */ }
if( ( (uint8_t)tempValue2 == 0) { /* Found */ }
if( ( (uint8_t)tempValue3 == 0) { /* Found */ }
tempValue1 >>= 8;
tempValue2 >>= 8;
tempValue3 >>= 8;
if( ( (uint8_t)tempValue1 == 0) { /* Found */ }
if( ( (uint8_t)tempValue2 == 0) { /* Found */ }
if( ( (uint8_t)tempValue3 == 0) { /* Found */ }
tempValue1 >>= 8;
tempValue2 >>= 8;
tempValue3 >>= 8;
if( ( (uint8_t)tempValue1 == 0) { /* Found */ }
if( ( (uint8_t)tempValue2 == 0) { /* Found */ }
if( ( (uint8_t)tempValue3 == 0) { /* Found */ }
tempValue1 >>= 8;
tempValue2 >>= 8;
tempValue3 >>= 8;
if( ( (uint8_t)tempValue1 == 0) { /* Found */ }
if( ( (uint8_t)tempValue2 == 0) { /* Found */ }
if( ( (uint8_t)tempValue3 == 0) { /* Found */ } 
```

上面的代码看起来不是最好的方法（因为它可能不是）。我故意这样写，以便更容易了解如何使用 SSE 完成。对于 SSE，它与上述类似（但范围更广）。

但是，对于 SSE，您可以并行进行所有比较并摆脱大量分支。例如，您可以对 3 个掩码中的每一个进行 AND 并使用`PCMPEQB`3 次，然后将这些结果组合在一起，然后执行一次`PMOVMSKB`；这将为您提供一个 16 位值（表示 16 个字节 - 每个源字节一位），可以使用单个 进行测试`if(result_flags == 0) { /* None of the 16 bytes matched */ }`，其中最终测试可能在“do/while”循环的末尾。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-11-26T03:39:58.410

我将通过利用 x86 小端序和未对齐的内存访问能力来解决这个问题。使用 popcount 查找候选词，然后使用 __builtin_ctz 通过循环查找位置。这从您的代码中消除了一个循环，并在单词不是候选词时避免位搜索循环。在大端机器上，您需要使用 htons(*(unsigned short *)p) 来交换字节。这需要一台允许非对齐字访问的机器。您还需要在数组末尾设置额外的 0xFF 字节。

```
unsigned char *p;
unsigned short v;
int c;
for (p = data; p < data + sizeof(data); p++)
  if (__builtin_popcount(*(unsigned short *)p) <= 16 - desired)
  { for (v = *(unsigned short *)p, c = 0; __builtin_ctz(v) < desired; v>>=1, c++) ;
    if (c < 16) // Gotcha @ p starting at bit c
      break;
  }
if (c == 16 || p >= data + sizeof(data)) // didn't find
else // found 
```

# visual-studio - Create an installer that requires installing other app in VS2010

> ID：13116311
> 
> 赞同：1
> 
> 时间：2012-10-29T05:29:06.680
> 
> 标签：visual-studio, installation

I'm trying to create an installer in VS2010\.

My situation is: I have 2 app, during installing a application, I need to check if the other app exists or not. If it exists, just install the first app, otherwise install both of them. How can I do this in VS2010\. I've searched and find a solution [here](https://stackoverflow.com/questions/7721795/need-to-check-already-application-installed-or-not-using-custom-installer-class). But I don't know where I can put these codes.

Any instruction in details would be appreciated. Thank you.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T05:39:53.230

您可能需要考虑创建[自定义 BootStrapper](http://msdn.microsoft.com/en-us/library/ms165429%28v=vs.100%29.aspx)

从上面的链接：

> 安装程序是一个通用安装程序，可配置为检测和安装可再发行组件，例如 Windows Installer (.msi) 文件和可执行程序。安装程序也称为引导程序。它通过一组 XML 清单进行编程，这些清单指定元数据来管理组件的安装。
> 
> 引导程序首先检测是否已安装任何先决条件。如果未安装先决条件，则引导程序首先显示许可协议。其次，在最终用户接受许可协议后，安装开始满足先决条件。否则，如果检测到所有先决条件，引导程序只会启动应用程序安装程序。

# asp.net - gridview will link to different page when click "add" button

> ID：13116312
> 
> 赞同：0
> 
> 时间：2012-10-29T05:29:16.603
> 
> 标签：asp.net

this is my 2nd post in this forum. I am having a difficulty to find a way that when i click the add button it will link to the car page with the same item info from the part page. please check the code below: This is the layout of the item page:

```
<%@ Page Title="Parts" Language="C#" MasterPageFile="~/Site1.Master" AutoEventWireup="true" CodeBehind="Default.aspx.cs" Inherits="Carshop.Pages.Parts.Default"%>
<asp:Content ID="Content1" ContentPlaceHolderID="head" runat="server"></asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="ContentPlaceHolder1" runat="server">
Parts
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="false">
    <Columns>
        <asp:BoundField HeaderText="PartID" DataField="PartID"></asp:BoundField>
        <asp:BoundField HeaderText="ItemName" DataField="ItemName"></asp:BoundField >
        <asp:BoundField HeaderText="ItemDesciption" DataField="ItemDesciption"></asp:BoundField >
        <asp:BoundField HeaderText="Company" DataField="Company"></asp:BoundField >
        <asp:BoundField HeaderText="Price" DataField="Price" DataFormatString="{0:c}" ></asp:BoundField >
        <asp:ImageField HeaderText="Images" DataImageUrlField="Images"></asp:ImageField>     
        <asp:BoundField HeaderText="Active" DataField="Active"></asp:BoundField >
        <asp:TemplateField>
            <ItemTemplate>
                <asp:Button ID="Button1"  runat="server" Text="Add" PostBackUrl="~/Pages/Cart/Default.aspx"></asp:Button>                   
            </ItemTemplate>
        </asp:TemplateField> 
    </Columns>
</asp:GridView> 
```

```
------------------------------------------------------------- 
```

this is the code behide of the page:

```
 namespace Carshop.Pages.Parts
{
    public partial class Default : System.Web.UI.Page
    {
    protected void Page_Load(object sender, EventArgs e)
    {
        using (DBEntities entities = new DBEntities())
        {
            GridView1.DataSource = entities.tblParts.ToList();
            GridView1.DataBind();
        }
    }

    protected void Button1_Click(object sender, EventArgs e)
    {
      // what method should I code here?
    }

}
}

-------------------------------------------------------------- 
```

shopping cart codes:

```
namespace Carshop.Entities
{
//Sealed to stop unwelcome dependencies
public sealed class Shoppingcart
   {
    //singleton is a adesgin pattern
    //Only one object can be created
    private static Shoppingcart instance;

    //Private Data Members
    private int PartID { get; set; }
    private string ItemName { get; set; }
    private string ItemDesciptiopn { get; set; }

    private Shoppingcart() { }

    public static Shoppingcart SetShoppingcart (string _ItemName, string _ItemDesciption)
    {
        if (instance == null)
        {
            instance = new Shoppingcart();
            instance.ItemName = _ItemName;
            instance.ItemDesciptiopn = _ItemDesciption;
        }

        return instance;
    }
} 
```

}

```
----------------------------------------------- 
```

cart page:

```
<%@ Page Title="" Language="C#" MasterPageFile="~/Site1.Master" AutoEventWireup="true" CodeBehind="Default.aspx.cs" Inherits="Carshop.Pages.Cart.Default" %>
<asp:Content ID="Content1" ContentPlaceHolderID="head" runat="server"></asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="ContentPlaceHolder1" runat="server">
Cart
<asp:GridView ID="GridView1" runat="server"></asp:GridView>
</asp:Content> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T05:42:38.003

如果我理解了您的问题，那么当用户单击位于网格视图中的按钮时，您可能希望提供从一页到另一页的值，这可能会对您有所帮助。

```
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="false">
    <Columns>
        <asp:BoundField HeaderText="PartID" DataField="PartID"></asp:BoundField>
        <asp:BoundField HeaderText="ItemName" DataField="ItemName"></asp:BoundField >
        <asp:BoundField HeaderText="ItemDesciption" DataField="ItemDesciption"></asp:BoundField >
        <asp:BoundField HeaderText="Company" DataField="Company"></asp:BoundField >
        <asp:BoundField HeaderText="Price" DataField="Price" DataFormatString="{0:c}" ></asp:BoundField >
        <asp:ImageField HeaderText="Images" DataImageUrlField="Images"></asp:ImageField>     
        <asp:BoundField HeaderText="Active" DataField="Active"></asp:BoundField >
        <asp:TemplateField>
            <ItemTemplate>
                <asp:Button ID="Button1"  
               runat="server" Text="Add" 
               PostBackUrl='<%# "~/Pages/Cart/Default.aspx?PartID="+Eval("TempID") %>'/>
            </ItemTemplate>
        </asp:TemplateField> 
    </Columns>
</asp:GridView> 
```

只需将其绑定`PartID`，`PostBackUrl`然后您就可以获得`PartID`已在您的`Pages/Cart/Default.aspx`页面上单击的内容，而不仅仅是从数据库中选择值，`PartID`您就可以开始了。

# android - append line of code and datetime in microlog

> ID：13116314
> 
> 赞同：2
> 
> 时间：2012-10-29T05:29:20.677
> 
> 标签：android, logging

currently I use like below in microlog.properties file.

```
microlog.formatter.PatternFormatter.pattern=[%d]:[%P] %c - %m %T 
```

and getting the result is `Microlog 38623:[INFO]-this is my class.`

I want to get 1) the datetime as `29-10-2012 : 21:55:40` and 2) `append the line of the class` to the log file.

How can I set to the properties file to set both ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T10:27:11.413

%d 的默认时间说明符是绝对时间。尝试指定您喜欢如何格式化时间，例如`%d{ISO8601}`

Microlog4Android 的灵感来自 Log4j，因此它支持它的许多功能。Microlog4Android 中的格式化程序包括[PatternLayout](http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/PatternLayout.html)中的许多模式。

# tomcat - Tomcat Web Application Access Error

> ID：13116316
> 
> 赞同：0
> 
> 时间：2012-10-29T05:29:29.523
> 
> 标签：tomcat, web-applications, webpage

I have an Web Application running on Tomcat, port 8080.
When I access it with "**http://localhost:8080/AppName**", I get a "page contains secure and nonsecure items" warning and the page loads properly.
But when I access with "**http://10.200.200.20:8080/AppName**", I do not get the "page contains secure and nonsecure items" warning and the page doesn't load at all.
There are no https item in the welcome page nor iFrame. But there is an Ajax Call for WebService in that page. I'm not sure why I get this error. Please share your thoughts on it.

Thanks,
SKR

# html - fav 图标在 html5 样板中不起作用

> ID：13116319
> 
> 赞同：2
> 
> 时间：2012-10-29T05:29:51.453
> 
> 标签：html, favicon, boilerplate

html5 Boilerplate 中的收藏图标不起作用（不显示）

我已经在 localhost 和服务器上尝试过，但在这两种情况下都没有成功。是什么让它工作.?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-29T06:34:06.917

HTML5 Boilerplate 默认不使用`link`图标元素。相反，它依赖于浏览器在根目录中查找 favicon.ico 或 apple-touch-icon.png。

如果您将 HTML5 Boilerplate 放在子目录中，无论是在 localhost 还是在服务器上，都不会出现 favicon，或者会出现服务器根目录中的现有 favicon。`<head>`一个快速的解决方法是在index.html 部分添加这行代码：

```
<link rel="icon" type="image/png" href="apple-touch-icon.png"> 
```

更好的是创建一个 16x16 PNG 图像（例如 favicon.png），而不是使用 57x57 apple-touch-icon.png，它会调整大小并因此失去清晰度。

有关更多详细信息，请参阅[用户指南的](https://github.com/h5bp/html5-boilerplate/blob/v4.0.1/doc/html.md)**网站图标和触摸图标**部分。

# sql - SQL 中的摘要行

> ID：13116320
> 
> 赞同：2
> 
> 时间：2012-10-29T05:30:05.117
> 
> 标签：sql, tsql, stored-procedures

我有一个存储过程，它为每个返回一组行`ActivityUnitId`。

需要的是基于小时数的每个 ActivityUnitId 的前 10 行。我设法实现了这一点，我的查询看起来像

```
With Data AS
(SELECT  
   ProjectID,ActivityUnitID,Description,GroupID,
   SUM(Hours) AS NoiseHours,
   ROW_NUMBER() OVER(PARTITION BY ActivityUnitID ORDER BY SUM(Hours) DESC) as 'RowNum'
FROM         
   tbl_Sub 
INNER JOIN
   tbl_AnalysisData ON tbl_Sub.SubActivityID = tbl_AnalysisData.SubActivityID 
     INNER JOIN
       tbl_Analysis ON tbl_AnalysisData.LookupID = tbl_Analysis.LookupID
         INNER JOIN
           tbl_ActivityUnit ON tbl_ActivityUnit.ActivityUnitID = tbl_Sub.ActivityUnitID
           tbl_Suby.ProjectID = @ProjectID 
         AND
           tbl_Sub.ActivityUnitID = ISNULL(@ActivityUnitID,tbl_Sub.ActivityUnitID)
GROUP BY 
  ActivityUnitID,ProjectID,  Description,AUGroupID
) SELECT * from Data where RowNum<=10 
```

“RowNum”列包含每行的行号，其值已根据小时数分配。所以前 10 行包含前 10 小时的行。

现在我想要的是在每个 ActivityUnitID 的末尾添加一个额外的摘要行。这将包含所有被遗漏的行的小时总和，即 RowNum > 10 的汇总行

所以我最后将得到的是每个 ActivityUnitID 的前 10 行 + 一个额外的行，该行将总结该 ActivityUnitID 的其他行的小时数

例如，假设我有一张有 2 列的表

```
ID  Hours     RowNum
1A    30         1
2B    20         2
3C    10         3
4D     5         4
5E     4         5
6F     3         6 
```

如何对此进行选择，以便获得 RowNum <=3 的行和其他行的总和

```
ID  Hours  
1A   30
2B   20
3C   10
Oth  12 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T05:41:30.560

最简单的方法是`UNION`使用您已经拥有的数据进行总计

```
SELECT  NULL, NULL, 'Totals', NULL, SUM(NoiseHours), 11 AS RowNumber
FROM    Data 
WHERE   RowNum > 10 
```

你的完整陈述可能看起来像这样

```
With Data AS
(
SELECT  ProjectID,ActivityUnitID,Description,GroupID,
        SUM(Hours) AS NoiseHours,
        ROW_NUMBER() OVER(PARTITION BY ActivityUnitID ORDER BY SUM(Hours) DESC) as 'RowNum'
FROM         tbl_Sub 
            INNER JOIN
            tbl_AnalysisData ON tbl_Sub.SubActivityID = tbl_AnalysisData.SubActivityID 
            INNER JOIN
            tbl_Analysis ON tbl_AnalysisData.LookupID = tbl_Analysis.LookupID
            INNER JOIN
            tbl_ActivityUnit ON tbl_ActivityUnit.ActivityUnitID = tbl_Sub.ActivityUnitID
tbl_Suby.ProjectID = @ProjectID 
AND
tbl_Sub.ActivityUnitID = ISNULL(@ActivityUnitID,tbl_Sub.ActivityUnitID)
GROUP BY ActivityUnitID,ProjectID,  Description,AUGroupID
)
SELECT * from Data where RowNum<=10
UNION ALL 
SELECT  NULL, NULL, 'Totals', NULL, SUM(NoiseHours), 11 AS RowNumber
FROM    Data 
WHERE   RowNum > 10 
```

使用联合的*困难*在于联合的两个部分应该具有相同数量和相同类型的列，因此需要在选择中添加*虚拟*列。

# mysql - PowerBuilder MySQL 连接

> ID：13116321
> 
> 赞同：1
> 
> 时间：2012-10-29T05:30:11.350
> 
> 标签：mysql, powerbuilder

如何将我的 PowerBuilder 连接到 MySQL？

首先，我想使用 Database Painter 连接到我的本地 MySQL 数据库，这样我就可以创建我的数据窗口。

然后我想建立一个 DSNLESS 连接，这样我就可以添加 .ini 和 ProfileString 我的连接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T14:33:22.937

为了创建无 DSN 连接，我从[http://www.connectionstrings.com/中提取了此语法](http://www.connectionstrings.com/)

[ODBC](http://www.mysql.com/downloads/connector/odbc/ "下载 ODBC 驱动程序")：

```
SQLCA.DBMS = "ODBC"
SQLCA.DBParm = "Driver={MySQL ODBC 5.1 Driver};Server=myServerAddress;Database=myDataBase;User=myUsername;Password=myPassword;Option=3;" 
```

请注意，您可能需要调整版本号 (5.1) 以匹配您下载的版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-16T07:55:52.237

```
// Profile Transporter3
SQLCA.DBMS = "JDBC"
SQLCA.LogPass = "tss"
SQLCA.LogId = "root"
SQLCA.AutoCommit = False
SQLCA.DBParm = "Driver='com.mysql.jdbc.Driver',URL='jdbc:mysql://localhost:3306/mydb'" 
```

唯一的事情是您需要设置我在链接中发布的 jar 文件的类路径，请参考

现在它连接到 MySQL，出现的大问题是忽略函数名称后的空格我不明白如何在 JDBC 中为 odbc 设置选项，有选项。我浏览了连接器 J 的文档，但没有这样的选项。此问题仅出现在 PowerBuilder 中，因此如果您知道解决方案，请提供。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-22T13:52:26.873

我解决了这个问题 mysql 选项 -i 或 --ignore-spaces 将起作用，所以我在配置文件中设置该选项，即 my.ini

sql-mode="STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION,IGNORE_SPACE"

停止 MySQL 服务，然后启动它可以顺利运行

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-24T11:09:24.783

您必须配置数据库配置文件，如服务器名称、数据库等。在此预览标签页中检查连接并在应用程序打开事件中复制并粘贴命令。

通过 PB 团队

# iphone - Local Notification alternative week repeat

> ID：13116325
> 
> 赞同：3
> 
> 时间：2012-10-29T05:30:44.783
> 
> 标签：iphone, ios, localnotification

I Have two notification and I want to repeat it alternative week.

E.g. One notification set on 1st week's monday and it should repeat on 3rd week's monday. Second notification set on 2nd week's tuesday and it should repeat on 4th week's tuesday.

What should I do for this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T12:02:39.843

获取周数并根据周数做出决定

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T12:08:26.940

```
-(NSString*) getWeekOfMonth {
  NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
 [dateFormatter setDateStyle:NSDateFormatterMediumStyle];
 [dateFormatter setTimeStyle:NSDateFormatterShortStyle];
 [dateFormatter setDateFormat:@"W"];

 NSString *weekNumber = [dateFormatter stringFromDate:[NSDate date]];    
 [dateFormatter release];    
 return weekNumber;
}

NSInteger weekInt = [weekNumber integerValue]; 
```

# java - Proper way to call MediaPlayer.isPlaying() without ANR?

> ID：13116329
> 
> 赞同：0
> 
> 时间：2012-10-29T05:30:52.147
> 
> 标签：java, android

In my app I have a service that plays audio, that service just has a single static `MediaPlayer` object. In `onStart()` from my main activity where I call `MediaPlayer.isPlaying();` to determine which UI elements to show, I get an ANR message and a `NullPointerException` at the line where I call `MediaPlayer.isPlaying();`

I also call `MediaPLayer.isPlaying();` when certain buttons are pressed, and that causes ANR as well, I discovered that after i took away the `MediaPlayer.isPlaying();` call in `onStart();`, since I couldn't get past that without an ANR...

I found this similar question: [MediaPlayer isPlaying() always returning false](https://stackoverflow.com/questions/8306915/mediaplayer-isplaying-always-returning-false)

Where someone says: "Also, while we're on the general MediaPlayer subject, note that isPlaying() can cause an ANR when called on the UI thread. In fact, Google recommends executing all MediaPlayer calls from a background handler thread. Which will also serialize execution of MediaPlayer calls."

I couldn't find anything in documentation about this. So how do I or what is the best way to create a short lived thread in these scenarios so I am able to check the status of my `MediaPlayer`? Or is there another way?

# android - How to upload and retrieve a video file from wowza server?

> ID：13116334
> 
> 赞同：1
> 
> 时间：2012-10-29T05:31:27.477
> 
> 标签：android, wowza

I have to upload a video file which is recording from android mobile camera to wowza server and retrieve the uploaded file from wowza server to android mobile. How can I specify that path using rtmp or http (how to get path)? How can I achieve this? Can anybody help me?

Thanks in advance.

# ios - 图案填满整个屏幕

> ID：13116337
> 
> 赞同：0
> 
> 时间：2012-10-29T05:31:49.093
> 
> 标签：ios, cocoa-touch, uiview, uiviewcontroller

我的应用程序的每个屏幕都有一个共同的色调。它不是背景。它是一种填充整个屏幕的模式，它是所有视图的顶部。您可以在同一屏幕内看到图案从一个视图连续流向另一个视图。而且它既不掩盖其他元素也不参与事件处理。

我尝试在我的 ViewController 中使用此代码实现它。

```
UIColor* texture = [UIColor colorWithPatternImage:[UIImage imageNamed:@"Texture.png"]];
UIView* tintView = [[UIView alloc] initWithFrame:self.view.bounds];
[tintView setBackgroundColor:texture];
[tintView setAlpha:0.5];
[self.view addSubview:tintView]; 
```

但它并没有触及它背后的观点。

`tintView`不应参与任何事件处理。相反，它应该让其背后的其他元素像平常一样处理事件。

其他方法是将其设置为`view`UIViewController 属性的背景，并为所有其他子视图设置一个公共 alpha`view`以显示背后的模式。在大多数情况下，这将是多余的。

有更好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T05:49:45.350

使您的 tintView 成为该方法的子类`UIView`并实现该[`hitTest:withEvent:`](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/uiview/uiview.html)方法，返回 nil。这将使您的视图对触摸透明。或设置`userInteractionEnabled`为`NO`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T05:50:55.953

`background color`用一个设置`Textured image`

```
UIImage *bgimg = [UIImage imageNamed:@"Texture.png"];
self.view.backgroundColor = [UIColor colorWithPatternImage:bgimg]; 
```

# java - Inheritance with generics java

> ID：13116340
> 
> 赞同：0
> 
> 时间：2012-10-29T05:32:17.743
> 
> 标签：java, generics, inheritance, overriding

I am having issues with my subclasses and trying to make my function "method" generic, please see below, I am having issues implementing classes C1 and C2 to use my objects of type B1 and B2 respectively.

Edit: Sorry if it isn't clear, basically I am trying to override the function method, but I need the parameter to be generic, so for class C1 which is a subclass of C it should use B1 as a parameter and for C2 which is a subclass of C1 it should use B2 as a parameter.

The code the behavior that I am looking to achieve but I am struggling to make it compile.

Here are my classes

```
class A{}
class T1{}
class V1{}
abstract class B<T extends T1, V extends V1>{}
class B1 extends B<SomeChildOfT1, SomeChildOfV1>{}
class B2 extends B1{}

abstract class C <E extends B<? extends T1, ? extends T2>> extends A
{
    void method(E)
      {//bla}
}

class C1<E extends B1> extends C<B1>
{
   //method with object B1 as parameter
   @override
   void method(E){
    //bla
    } 
}

class C2 extends C2<B2>
{
    @override
  void method(B2)
  {

  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T07:08:46.350

Is there any reason you can't make `C1< E >` extend `C< E >`? The following compiles for me with suitable edits to your sample:

```
class A{}
class T1{}
class SomeChildOfT1 extends T1 {}
class V1{}
class SomeChildOfV1 extends V1 {}
abstract class B<T extends T1, V extends V1>{}
class B1 extends B<SomeChildOfT1, SomeChildOfV1>{}
class B2 extends B1{}

abstract class C <E extends B<? extends T1, ? extends V1>> extends A {
    void method(E e) {}
}

class C1<E extends B1> extends C<E> {
    @Override void method(E e) {}
}

class C2 extends C1<B2> {
    @Override void method(B2 b2) {}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T06:30:25.060

虽然有点乱，但我认为你应该这样做：

```
class A{}
class T1{}
class V1{}
abstract class B<T extends T1, V extends V1>{}
class B1 extends B<SomeChildOfT1, SomeChildOfV1>{}
class B2 extends B1{}

abstract class C <T extends T1, V extends V1, E extends B<T, V>> extends A
{
    void method(E)
      {//bla}
}

class C1<E extends B1> extends C<SomeChildOfT1, SomeChildOfV1, E>
{
   //method with object B1 as parameter
   @override
   void method(E){
    //bla
    } 
}

class C2 extends C1<B2>
{
    @override
  void method(B2)
  {

  }
} 
```

# iphone - Autoresizing not working in portrait mode

> ID：13116342
> 
> 赞同：0
> 
> 时间：2012-10-29T05:32:30.517
> 
> 标签：iphone, ios5, ios4, ios6

I'm adding a view to `view controller` in which there are certain components. My project needs to support both orientation.

I designed the view controller using **story board** in landscape mode. When a button is pressed in the view controller the view is shown using the scaling animation.

It works perfect when its in landscape mode. When its in landscape mode and button is pressed it works perfect and also the rotation also works perfect. But if its in landscape mode and button is pressed the view doesn't get scaled according to the portrait mode and rotation is also a big problem.

I'm using autosizing and not auto layout

Can anyone please help me? Sorry for my bad english.

Any help is appreciated.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T05:44:31.543

自动调整大小从未被证明是方向模式中框架更改的最佳解决方案。相反，在方向委托方法中手动更改框架：

**- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation 持续时间:(NSTimeInterval)duration;**
**- (void)didRotateFromInterfaceOrientation:(UIInterfaceOrientation)fromInterfaceOrientation;**

检查您当前的方向，例如：

-(void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation 持续时间:(NSTimeInterval)duration {

```
 if (UIInterfaceOrientationIsPortrait(toInterfaceOrientation)) {

       // change frames here for portrait mode
    }
    else
    {
       // change frames here for landscape mode
    } 
```

}

# windows-8 - How to write code for landscape or portrait modes in windows 8?

> ID：13116343
> 
> 赞同：2
> 
> 时间：2012-10-29T05:32:40.250
> 
> 标签：windows-8

How to write code for landscape or portrait through programatically.i need to set my app only run in portrait mode only.please tell me .

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T05:35:53.910

您可以更改它并使其仅在文件**中纵向运行****`package.appxmanifest`**。但请注意，这不适用于模拟器或任何其他没有硬件加速度计的设备。

![设置](../Images/223158ecab65b40865e190be5aacc0f6.png)

**[更多的](http://www.marauderzstuff.com/PermaLink,guid,3a0b6d85-9991-4d85-be21-e5aae3099df3.aspx)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-04T06:53:22.373

将 SupportedOrientations 、 Orintation 属性设置为 Portrait（在 xaml 中）。

# c# - 错误“序列不包含任何元素”

> ID：13116346
> 
> 赞同：1
> 
> 时间：2012-10-29T05:33:01.033
> 
> 标签：c#, linq

我使用了下面的 linq 查询代码，但它返回“序列不包含元素”，我确信应该返回一个项目。

代码如下：

```
tblDocTranstoCon doctranstocon =_DataContext.tblDocTranstoCons
                       .Single(dtcon => (dtcon.Docid == _DocID)
                                     && (dtcon.Transid==e.TransmittoconID)
                                     && (dtcon.Transid==e.TransID)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T05:36:40.197

`SingleOrDefault`如果没有退货，您应该使用。

```
tblDocTranstoCon doctranstocon =_DataContext.tblDocTranstoCons
   .SingleOrDefault(dtcon => (dtcon.Docid == _DocID)
                   && (dtcon.Transid == e.TransmittoconID)
                   && (dtcon.Transid == e.TransID)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T05:46:08.390

要解决此问题，请将方法 Single() 调用替换为 SingleOrDefault() 方法。如果没有与过滤条件匹配的源记录，则 SingleOrDefault() 方法将返回空值。看[这里](http://www.techdreams.org/microsoft/aspnet/fixing-linq-error-sequence-contains-no-elements-c-linq/368-20080925)

# asp.net - 将 SSRS 报告内容复制到剪贴板

> ID：13116351
> 
> 赞同：0
> 
> 时间：2012-10-29T05:34:00.627
> 
> 标签：asp.net, gridview, reporting-services

我在 Gridview 的每一行都有一个按钮（“复制到剪辑”）。在此按钮上单击我想以二进制格式将存储在数据库中的 SSRS 报告复制到剪贴板。有人可以帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T07:02:43.790

使用 url 参数对报表服务器进行 ajax 调用，以获取所需格式的报表。

CSV 是粘贴到剪贴板的好格式。

```
http://localhost/reportserver?/Folder/report&param=val&rs:Command=Render&rs:Format=CSV 
```

然后使用[ZeroClipboard](https://github.com/jonrohan/ZeroClipboard)之类的库将内容粘贴到剪贴板。它的跨浏览器兼容，因为它使用闪存。

# text - awk 比较 2 个文件，打印匹配和差异

> ID：13116353
> 
> 赞同：0
> 
> 时间：2012-10-29T05:34:14.307
> 
> 标签：text, awk, compare

我需要比较两个文件 f1.txt 和 f2.txt 并获取匹配项和不匹配项，对于这种情况，我希望匹配两个文件上的第一个字段。并首先打印 f2.txt 的第二个字段，然后打印 f1.txt 的整行。如果在 f2.txt 上找不到匹配项，则声明“未找到”，然后打印 f1.txt 整行。

F1.txt

```
1;2;3;4;5;6;7;8
1a;2;3;4;5;6;7;8
1b;2;3;4;5;6;7;8
2b;2;3;4;5;6;7;8 
```

F2.txt

```
1;First
1a;Firsta
1b;Firstb 
```

期望的输出：

```
First;1;1;2;3;4;5;6;7;8
Firsta;1a;1a;2;3;4;5;6;7;8
Firstb;1b;1b;2;3;4;5;6;7;8
Not Found;2b;2;3;4;5;6;7;8 
```

我能够获得匹配但不是非匹配

```
awk -F ";" -v OFS="";"" "NR==FNR{a[$1]=$2;next}a[$1]{print a[$1],$0}" f2.txt f1.txt 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T05:43:52.600

这应该这样做：

```
awk -F";" 'NR==FNR{a[$1]=$2;next}{if (a[$1])print a[$1],$0;else print "Not Found", $0;}' OFS=";" f2.txt f1.txt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T06:12:55.857

这非常有用。我进行了一些更改以获取 2 个文件之间的数据，并且每个文件中只有 1 列。

```
awk 'BEGIN { OFS=FS=";" } FNR==NR { array[$1]=$1; next } { print ($1 in array ? array[$1] : "Not Found"), $0 }' file1 file2 
```

# redgate - Redgate Visual Studio 集成中的导航

> ID：13116354
> 
> 赞同：0
> 
> 时间：2012-10-29T05:34:17.473
> 
> 标签：redgate

刚刚为数据库开发安装了 redgate 的 VS 集成。似乎无法导航到从其他程序中调用的程序（例如 ctrl-click 到那里）。

这似乎是一个不费吹灰之力的功能。我错过了什么吗？

谢谢

蒂姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T10:02:37.523

Red Gate Software 对用于管理数据库的 Visual Studio 开发环境进行了一些不同的、独立的扩展。SQL Connect 用于源代码控制数据库，SQL Prompt 将智能感知添加到数据库项目中。如果你能说出哪个扩展以及你认为它应该如何表现，也许我可以提供一些建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T11:12:09.463

编辑窗口不具备与编程代码（C#、VB）窗口相同的首选功能。我向 Red Gate 错误跟踪器添加了一个增强请求。

# neo4j - 在 Neo4J 数据库中查找叶节点

> ID：13116363
> 
> 赞同：7
> 
> 时间：2012-10-29T05:34:56.473
> 
> 标签：neo4j, spring-data, spring-data-neo4j

我们有一个使用 Spring Data Neo4J 的项目。重要实体之一如下所示：

```
@NodeEntity
public class Category {
    @GraphId
    Long id;

    String name;

    @RelatedTo(direction = Direction.INCOMING, type = "CHILD")
    Category parent;

    @RelatedTo(direction = Direction.OUTGOING, type = "CHILD")
    Set<Category> children;
} 
```

我们需要从名称已知的特定类别开始找出所有叶类别（即没有任何子类别的类别）。例如，给定如下所示的层次结构：

```
Electronics
    Camera
        Point and Shoot
        SLR
    Computing
        Desktop
        Laptop
        Tablet
        Netbook
Furniture
    Tables
        Office tables
        Home tables
    Chairs
        Lounge chairs
        Office chairs 
```

搜索“家具”应返回“办公桌”、“家用桌”、“休闲椅”和“办公椅”。同样，搜索“计算”应返回“台式机”、“笔记本电脑”、“平板电脑”和“上网本”。

在创建可以放置在 Spring Data 存储库方法上的密码查询方面需要帮助，以便为我提供从指定节点开始的所有叶节点。

**编辑**在 Wes 的帮助下，以下查询（使用关联的 Spring Data 存储库方法）起作用：

```
@Query(
"START  category=node:__types__(className='org.example.domain.Category') " +
"MATCH  category-[:CHILD*0..]->child " +
"WHERE  category.name={0} AND NOT(child-[:CHILD]->()) " +
"RETURN child")
List<Category> findLeaves(String name); 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-29T06:39:27.317

这是我用密码找到的最简单的方法：http: [//console.neo4j.org/r/cgrndo](http://console.neo4j.org/r/cgrndo)

```
start n=node(*) // you can specify a single node here if you want
match n-[r*]->m
where not(m-->()) // this limits m to be only leaf nodes 
return distinct m; // this returns the distinct leaf nodes (not necessary if there are only simple paths) 
```

编辑：（因为人们最近对此表示赞同......这是使用 3.x 密码的更新）

```
match (n) 
where not (n)-->() 
return distinct n 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-01-06T18:35:54.597

如果您正在寻找cypher 3.0 [http://console.neo4j.org/r/leaf-nodes中的所有](http://console.neo4j.org/r/leaf-nodes)**叶节点**

`match (n)-[r]-() with n, count(r) as c where c = 1 return n`

# haskell - Yesod就地编辑小部件

> ID：13116364
> 
> 赞同：6
> 
> 时间：2012-10-29T05:34:57.607
> 
> 标签：haskell, yesod

我对在 Yesod 中创建具有以下属性的小部件很感兴趣：

*   默认情况下，它仅呈现为一些文本“标题”
*   鼠标悬停时，右上角会出现一个小链接“编辑此”
*   如果用户单击链接或将鼠标悬停在链接上，则文本将替换为包含文本的文本字段/区域，以进行编辑
*   当用户按下 ENTER 时，会向服务器发出 REST 请求以更新值；确认更新后，表单消失并且更新的文本现在出现在文档中

在很大程度上，这是一个严格的 JS 工作，大部分超出了 Yesod 的范围。但是，有一点很重要：我们希望表单本身应该由 Yesod 使用 yesod-forms 生成，而不是手动连接。但是这里的情况有点奇怪：通常表单是静态的，但是这里的表单需要根据数据的不同而有所不同，并且 Yesod 可能需要在 REST 更新后向用户发送一个新表单。Yesod可以做到吗？此外，就验证而言，故事是什么？

# rspec - 可以使用默认属性值创建模拟

> ID：13116367
> 
> 赞同：0
> 
> 时间：2012-10-29T05:35:57.227
> 
> 标签：rspec

可以使用默认属性值创建模拟吗？我不确定这个问题的真正含义。两种可能：

1.  如果是一个对象`t=Movie.find(10)`，然后如果我说`m=mock(t)`，m会自动继承t的所有属性值吗？

2.  有没有办法创建一个具有默认属性的模拟对象，这样我们每次使用它时都可以克隆它，而无需通过系列存根来获取`"initialize"`这些属性？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T08:19:21.037

当涉及到 1) 它没有意义。如果在测试中您可以访问真实对象，`Movie.find(10)`则不必使用模拟。假设您正在使用`rspec_mocks`并且您将编写一个特定方法被调用的断言，您可以简单地编写：

```
t = Movie.find(10)
t.should_receive(:foo) 
```

还要检查一下：[https](https://www.relishapp.com/rspec/rspec-rails/v/2-11/docs/mocks/mock-model) ://www.relishapp.com/rspec/rspec-rails/v/2-11/docs/mocks/mock-model 和这个[https://www.relishapp.com/rspec/rspec- rails/v/2-11/docs/mocks/stub-model](https://www.relishapp.com/rspec/rspec-rails/v/2-11/docs/mocks/stub-model)

在规范中模拟 AR/Mongoid 和其他模型的非常有用的助手。

例如，您可以与`factory_girl`您一起在此模拟上设置属性`movie = mock_model(Movie, FactoryGirl.attributes_for(:move))`

# tcl - TCL 脚本错误

> ID：13116371
> 
> 赞同：0
> 
> 时间：2012-10-29T05:36:09.877
> 
> 标签：tcl

我有两个 tcl 文件。一个是主 tcl 文件（main.tcl），另一个是主 tcl 文件的帮助文件（help.tcl）。我想在执行主文件时从主文件执行该帮助文件。我使用命令“源文件名”为此。但是我遇到了一些错误。在这里我发布了两个 tcl 文件以及执行时发生的错误。请帮我解决这个问题...

```
Error
num_nodes is set 4
warning: Please use -channel as shown in tcl/ex/wireless-mitf.tcl
INITIALIZE THE LIST xListHead
Enter Source Node (0 to 4)
0
Enter Destination Node (0 to 4)
3
SORTING LISTS ...DONE!
channel.cc:sendUp - Calc highestAntennaZ_ and distCST_
highestAntennaZ_ = 1.5,  distCST_ = 716.1
ns: proc1: can't read "n0": no such variable
    while executing
"attach-CBR-traffic $n0 $sink1 64 0.07"
    invoked from within
"set inf0_1[attach-CBR-traffic $n0 $sink1 64 0.07]"
    (file "final.tcl" line 1)
    invoked from within
"source.orig final.tcl"
    ("uplevel" body line 1)
    invoked from within
"uplevel source.orig [list $fileName]"
    invoked from within
"if [$instance_ is_http_url $fileName] {
set buffer [$instance_ read_url $fileName]
uplevel eval $buffer
} else {
uplevel source.orig [list $fileName]
..."
    (procedure "source" line 8)
    invoked from within
"source final.tcl"
    (procedure "proc1" line 6)
    invoked from within
"proc1" 
```

在文件 Main.tcl 中：

```
set val(chan)           Channel/WirelessChannel    ;# Channel Type
set val(prop)           Propagation/TwoRayGround   ;# radio-propagation model
set val(netif)          Phy/WirelessPhy            ;# network interface type
set val(mac)            Mac/802_11                 ;# MAC type
set val(ifq)            CMUPriQueue            ;# interface queue type
set val(ll)             LL                         ;# link layer type
set val(ant)            Antenna/OmniAntenna        ;# antenna model
set val(ifqlen)         340                        ;# max packet in ifq
set val(nn)             4                          ;# number of mobilenodes
set val(rp)             DSR                        ;# routing protocol
set val(x)      630            ;# X axis distance   
set val(y)      570            ;# Y axis distance
set opt(energymodel)    EnergyModel                ;# Initial Energy
set opt(initialenergy)  100                        ;# Initial energy in Joules

set ns [new Simulator]

set nam1 [open nam11.nam w]
$ns namtrace-all-wireless $nam1 $val(x) $val(y)

set trace1 [open trace11.tr w]
$ns trace-all $trace1
$ns use-newtrace

set topo [new Topography]
$topo load_flatgrid $val(x) $val(y)

create-god $val(nn)
Phy/WirelessPhy set Pt_ 0.81

$ns node-config -adhocRouting $val(rp) \
        -llType $val(ll) \
        -macType $val(mac) \
        -ifqType $val(ifq) \
        -ifqLen $val(ifqlen) \
        -antType $val(ant) \
        -propType $val(prop) \
        -phyType $val(netif) \
        -topoInstance $topo \
        -agentTrace ON \
        -routerTrace ON \
        -macTrace ON \
        -movementTrace ON \
        -rxPower 0.36 \
        -txPower 0.14 \
            -channelType $val(chan) \
        -initialEnergy $opt(initialenergy) \
        -energyModel $opt(energymodel)  \

for { set i 0 } {$i < $val(nn)} { incr i } {
  set n($i) [$ns node]
  $n($i) random-motion 0
  $n($i) color black
  $ns initial_node_pos $n($i) 30
}

for { set i 0 } { $i < $val(nn)} { incr i } {
  $ns at 0.0 "$n($i) color black"
  $ns at 0.0 "$n($i) label-color maroon"
}

$ns at 0.0 "$n(0) setdest 220.00 210 3000"
$ns at 0.0 "$n(1) setdest 320.00 310 3000"
$ns at 0.0 "$n(2) setdest 420.00 110 3000"
$ns at 0.0 "$n(3) setdest 520.00 210 3000"

for {set i 0} {$i<$val(nn)} {incr i} {
  set sink($i) [new Agent/LossMonitor]
  $ns attach-agent $n($i) $sink($i)
}

proc attach-CBR-traffic { node sink size itval} {
  #Get an instance of the simulator
  set ns_ [Simulator instance]
  set udp [new Agent/UDP]
  $ns_ attach-agent $node $udp
  #Create a CBR  agent and attach it to the node
  set cbr [new Application/Traffic/CBR]
  $cbr attach-agent $udp
  $cbr set packetSize_ $size    ;#sub packet size
  $cbr set interval_ $itval
  #Attach CBR source to sink;
  $ns_ connect $udp $sink
  return $cbr
}
set cbr001 [attach-CBR-traffic $n(0) $sink(1) 256 0.082]
$ns at 1.0 "$cbr001 start"
$ns at 1.001 "$cbr001 stop"

set cbr001 [attach-CBR-traffic $n(1) $sink(3) 256 0.082]
$ns at 1.002 "$cbr001 start"
$ns at 1.003 "$cbr001 stop"

# neighbor node calculation
set nbr [open Neighbor w]
puts $nbr "\t\t\t\t\tNeighbor Detail"
puts $nbr "\t~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~"
puts $nbr "\tNode\t\tNb node\t\tNode-Xpos\tNode-Ypos\tNb-Xpos\t\tNb-Ypos\t\tDistance(d)"
puts $nbr "\t~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~"
close $nbr

#~~~~~~~~~~~~~~~~ Calculation of neighbor nodes of all node~~~~~~~~~~~~~~~~~~~
proc distance { n1 n2 nd1 nd2} {
  global c n bnd
  set nbr [open Neighbor a]
  set x1 [expr int([$n1 set X_])]
  set y1 [expr int([$n1 set Y_])]
  set x2 [expr int([$n2 set X_])]
  set y2 [expr int([$n2 set Y_])]
  set d [expr int(sqrt(pow(($x2-$x1),2)+pow(($y2-$y1),2)))]
  if {$d<300} {
    if {$nd2!=$nd1} {
      puts $nbr "\t$nd1\t\t$nd2\t\t$x1\t\t$y1\t\t$x2\t\t$y2\t\t$d"
    }
  }
  close $nbr
}

for {set i 0} {$i <$val(nn)} {incr i} {
  for {set j 0} {$j <$val(nn)} {incr j} {
    $ns at 1.002 "distance $n($i) $n($j) $i $j" 
  }
}

# For Input
set f 1
while {$f} {
  puts "Enter Source Node (0 to 4)"
  gets stdin src
  puts "Enter Destination Node (0 to 4)"
  gets stdin dst
  if {$src>=0 && $src<5 && $dst>=0 && $dst<5 && $src!=$dst} {
    set f 0
    set sd [open srcdst w]
    puts $sd "$src $dst"
    close $sd
  } else {
    puts "\n\t---------Enter Proper Input-------\n"
  }
}

#minimum

proc proc1 {} {
  exec awk -f distance.awk srcdst Neighbor &
  exec awk -f mm.awk snd & 
  exec awk -f mnode.awk min snd &
  exec awk -f final.awk srcdst mnode &
  source final.tcl
}

$ns at 1.5 "proc1"

proc proc2 {} {
  global ns trace1 nam1
  $ns flush-trace
  close $trace1
  close $nam1
  exec nam nam11.nam &
  exit 0
}

$ns at 3.0 "proc2"

$ns run 
```

在文件 final.tcl 中：

```
set inf0_1[attach-CBR-traffic $n0 $sink1 64 0.07]
$ns at2.1 "$inf0_1 start"
$ns at2.3 "$inf0_1 stop"
$ns at2.1 "$n(0) color green4"
$ns at2.4 "$ns trace-annotate\"Node-0 send data to its neighbor1\""
set inf1_3[attach-CBR-traffic $n1 $sink3 64 0.07]
$ns at2.1 "$inf1_3 start"
$ns at2.3 "$inf1_3 stop"
$ns at2.1 "$n(1) color green4"
$ns at2.4 "$ns trace-annotate\"Node-1 send data to its neighbor3\"" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T06:34:43.843

`main.tcl`您的文件中似乎没有任何您来源的地方`help.tcl`。但是，在错误消息中，您声称的文件似乎`help.tcl`实际上名为`final.tcl`. 假设这是您的意思，那么我可以诊断错误。

问题是在您的`final.tcl`文件中，第一行尝试执行此语句：

```
set inf0_1 [attach-CBR-traffic $n0 $sink1 64 0.07]
#         ^
#         |
# BTW, unrelated to the error, there is also a missing space here which
# is probably not what you intended. 
```

该语句的问题在于变量`n0`和`sink1`未定义。

**更新的答案**

好的，您对Tcl的理解似乎有很多误解。我强烈推荐阅读 Tcl 语言的文档。幸运的是，与 C 或 Perl 或几乎任何其他语言不同，tcl 语法的完整文档只有一个页面：[http](http://www.tcl.tk/man/tcl/TclCmd/Tcl.htm) ://www.tcl.tk/man/tcl/TclCmd/Tcl.htm 。请特别注意第 8 条规则（变量替换）。

首先你需要知道你的脚本有问题的是错误消息告诉你的：你没有`n0`在程序的任何地方定义变量（也没有定义`sink1`）。然而，有一个全局变量`n`恰好是一个数组。从您的评论看来，这就是您尝试访问时的意思`n0`。如果是这样，则在规则 8 中给出了正确的语法：使用该`arrayname(index)`语法访问数组。在我们继续之前，我想提醒您，Tcl 所谓的数组在技术上是关联数组（在其他语言中它们有时称为散列或映射），因此索引可以是字符串。现在，话虽如此，访问的正确语法`n`是：

```
set inf0_1 [attach-CBR-traffic $n(0) $sink(1) 64 0.07]
#                                 ^        ^ 
```

但这仍然行不通。如果你尝试这个，它仍然会抱怨`n`和`sink`未定义。那是因为 tcl 作用域规则是如何工作的。在函数内部，只有局部变量是可见的。全局变量在函数内部不可用，除非您明确要求 tcl 导入它们。要访问全局变量，您有两种选择：

一、传统方式：使用`global`命令导入全局变量。您可以在源`final.tcl`文件的 proc 中执行此操作：

```
proc proc1 {} {
  global n sink
  # ...
  source final.tcl
} 
```

或者您可以在 final.tcl 文件本身中执行此操作：

```
global n sink
set inf0_1 [attach-CBR-traffic $n(0) $sink(1) 64 0.07]
# ... 
```

第二种方法是使用全局命名空间访问全局变量`::`。这样您就不需要使用以下`global`命令导入变量：

```
set inf0_1 [attach-CBR-traffic $::n(0) $::sink(1) 64 0.07] 
```

修复我上面强调的所有问题应该可以让你的代码运行（假设我猜对了你的意图）。但是我强烈建议阅读 tcl 手册页并熟悉 tcl 以避免将来出现错误。至少您应该了解语法规则、set 的手册页和 proc 的手册页：

*   [http://www.tcl.tk/man/tcl/TclCmd/Tcl.htm](http://www.tcl.tk/man/tcl/TclCmd/Tcl.htm)
*   [http://www.tcl.tk/man/tcl/TclCmd/set.htm](http://www.tcl.tk/man/tcl/TclCmd/set.htm)
*   [http://www.tcl.tk/man/tcl/TclCmd/proc.htm](http://www.tcl.tk/man/tcl/TclCmd/proc.htm)

以下页面也是对 tcl 的一个很好的介绍：[An Introduction to Tcl Scripting](http://wiki.tcl.tk/2263)

# android - 使用foursquare API搜索多个类别和子类别时我应该包括什么端点

> ID：13116372
> 
> 赞同：0
> 
> 时间：2012-10-29T05:36:15.517
> 
> 标签：android, foursquare

嗨，我正在开发一个应用程序，当我想在使用foursquare API 时执行一个或多个类别的搜索时，我需要知道如何访问endpoit url。这就是我如何构建我的 Url 以返回特定类别。以及如何将它与场地搜索的 API 端点结合起来

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T22:19:41.247

您可以在 /venues/search 的“categoryId”参数中指定一个逗号分隔的类别 ID 列表，这会将返回的场所过滤到这些类别中的场所。

# c# - 在 C# 中使用 Streamreader 将多行合并为一行

> ID：13116373
> 
> 赞同：0
> 
> 时间：2012-10-29T05:36:15.267
> 
> 标签：c#, text-files, streamreader

我已经搜索了 SO，但没有找到任何专门解决此问题的内容：所以这里是 - 我有一个文本文件，其中段落的文本行以“return”结尾。所以它最终出现在不同的行上 - 我想将这些多行合并为一行。我在 C#（VS 2010）中使用 Streamreader。

> 例子：
> 
> GE1:1
> 
> xxxxxxxxxxxxxxxxxxxxx
> 
> yyyyyyyyyyyyyy。
> 
> 哈哈哈哈哈哈哈。
> 
> GE1:2
> 
> zzzzzzzzzzz
> 
> kkkkkkkkkkkkkkkkkkkkkkkkk
> 
> 等等....

正如您在上面的示例中看到的，有些段落有 3 行，有些有两行。它各不相同。文本文件中有数千个这样的段落。

基本上我想让我的变量“templine”包含以下内容：（将用于进一步处理）。

```
var templine = "xxxxxxxxxxxxxxxxxxxxx yyyyyyyyyyyyyy. hhhhhhhhhhhhh." 
```

代码：

```
 using (StreamReader sr = new StreamReader(@"C:\Test.txt"))
        using(StreamWriter sw = new StreamWriter(@"C:\Test2.txt"))
        {
            StringBuilder sb    = new StringBuilder ( );

            while (!sr.EndOfStream)
            {
                    string templine = sr.ReadLine();  /// further processing code not relevant. 
```

更新：我需要的是一种检测段落是否有 3 行或 2 行的方法。我知道如何删除换行符等。只是不知道如何知道段落何时结束。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T05:46:43.893

将所有文本合并到一个字符串中

```
var templine = File.ReadAllText(@"c:\temp.txt").Replace(Environment.NewLine, " "); 
```

那 .Replace 是因为看起来您希望将新行替换为空格。

如果您想将其分成 2 或 3 行段落，您需要为我们指定分隔符是什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T05:43:38.737

您可以像这样从字符串中删除新行字符

```
string replacement = Regex.Replace(templine  , @"\t|\n|\r", ""); 
```

或者

```
templine  = templine.Replace("\n", String.Empty);
templine  = templine.Replace("\r", String.Empty);
templine = templine.Replace("\t", String.Empty); 
```

从多行中制作单行

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T05:57:18.970

您可以使用正则表达式。

```
Regex parser = new Regex(@"GE\d*\:\d*\r\n(?<lines>(.*?\r\n){2,3})",
    RegexOptions.Singleline); 
```

然后得到你需要的一切：

```
string[] paragraphs = parser.Matches.Cast<Match>().Select(T =>
    Regex.Replace(T.Groups["lines"].Value, @"\t|\n|\r", string.Empty)).ToArray(); 
```

*（尚未测试。）*

# php - 从 jquery 插件中的多选组中获取值

> ID：13116376
> 
> 赞同：0
> 
> 时间：2012-10-29T05:37:14.433
> 
> 标签：php, javascript, jquery, html, css

我正在研究多选组。这是我在多选组中填充了一些数据的链接，用户可以在其中选择他们的要求。 [http://vignesh.gvignesh.org/chose/chose.php](http://vignesh.gvignesh.org/chose/chose.php)

在这里单击显示选定按钮后，我正在调用 javascript 函数。

```
function chos()
  {
        var a = $(".chzn-select").chosen(); 
        alert(a);
  } 
```

它没有在警报框中显示选定的值。显示一些 [object][object]。我不知道如何获取选定的值。如果我用于获取值的 javascript 函数错误，请告诉我新函数。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T05:47:04.597

只需使用，它会返回当前选择`$("#chossen").val()`的 s 数组。`value`

要获取`option`被选中的实际元素，请尝试`$("#chossen").find("option:selected");`，然后循环遍历这些元素（显然） - 如果您想获取它们的`text`.

# android - 以编程方式在 Android 中配置第 3 方电子邮件帐户

> ID：13116381
> 
> 赞同：4
> 
> 时间：2012-10-29T05:37:43.650
> 
> 标签：android

是否可以以编程方式在 Android 中配置第 3 方电子邮件帐户。有没有这方面的API？

基本上我正在尝试创建一个应用程序：

1.  向用户询问电子邮件地址和密码
2.  验证凭据。如果一切正常，电子邮件帐户会自动配置接收和发送邮件服务器的详细信息

问题是用户不容易记住服务器详细信息等。我们的目标是帮助我们的用户在他们的设备上设置他们的电子邮件帐户

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T05:49:20.667

如果它是一个流行的提供商，例如 gmail、hotmail、aol 等，那么您将能够做到这一点，但个别邮件服务器（例如公司电子邮件等）有自己的配置，因此很难以编程方式进行衡量。

至于如何实现一个邮件客户端，可以查看K9邮件的源码。它是一个优秀的开源、全功能的安卓电子邮件客户端。它支持 POP3、IMAP 和 Exchange 帐户。如果您研究它的来源，您会发现制作 android 电子邮件应用程序所需的一切。它托管在 Github 上：

[https://github.com/k9mail/k-9](https://github.com/k9mail/k-9)

这是 google play store 上的免费应用程序：

[https://play.google.com/store/apps/details?id=com.fsck.k9&hl=en](https://play.google.com/store/apps/details?id=com.fsck.k9&hl=en)

# android - Android Canvas 绘图不一致

> ID：13116383
> 
> 赞同：0
> 
> 时间：2012-10-29T05:37:49.047
> 
> 标签：android, imageview, android-canvas

我有一个 ImageView 子类，它应该在显示图像的下角显示一个徽标。我有这个 onDraw 代码来在图像顶部绘制图标。它在 ICS+ 上运行良好，但没有更低。有谁知道这是什么原因？

```
@Override
protected void onDraw(Canvas canvas) {
    super.onDraw(canvas);

    int canvasHeight = canvas.getHeight();
    int canvasWidth = canvas.getWidth();

    Drawable icon = getResources().getDrawable(R.id.icon);

    int width = icon.getIntrinsicWidth();
    int height = iconcon.getIntrinsicHeight();

    int x = canvasWidth - width - PADDING;
    int y = canvasHeight - height - PADDING;

    icon.setBounds(x, y, canvasWidth - PADDING, canvasHeight - PADDING);
    icon.draw(canvas);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T09:22:09.110

您可能想忽略`canvas.getWidth()`并`canvas.getHeight()`使用接收到的值`onSizeChanged(int w, int h, int oldw, int oldh)`，因为有时它们不匹配并`canvas.getWidth()/getHeight()`给出奇怪的结果。

# mongodb - 如何决定是在 NoSQL 数据库中存储深度文档还是精简相关文档

> ID：13116385
> 
> 赞同：0
> 
> 时间：2012-10-29T05:38:04.763
> 
> 标签：mongodb, database-design, web-applications, nosql

## NoSQL 新手

在我 8 年的 Web 开发中，我一直使用关系数据库。最近，我开始将 MongoDB 用于一个简单的多用户 Web 应用程序，用户可以在其中创建自己的照片库。

## 我的域名

My Domain 很简单，有“用户”>“网站”>“照片集”>“照片”。

我一直在努力决定如何存储这些文件。在应用程序中，有时我只需要一小部分“照片”，有时只需要“集合”，但我总是需要一些关于“用户”的信息，可能还有“站点”。

## 薄与深

目前我正在使用我自己的外键实现来存储多个精简文档。当然，问题是我有时必须多次调用 Mongo 才能呈现单个页面。

## 问题

当然，我确信有办法解决这些低效率、缓存等问题，但是 NoSQLers 如何解决这些问题：

*   像这样关联您的文件是否正常？
*   只存储潜在的海量深层文档会更好吗？
*   我是不是弄错了，实际上我应该专门为不同的视图存储多个文档？
*   如果您为不同的视图存储多个文档，您如何管理更新？
*   是使用 Mongo 的“嵌入”功能的答案吗？这就是大多数解决这个问题的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T16:17:41.440

在使用 NoSQL 数据库，尤其是 MongoDB 时要考虑的问题：

你如何操作数据？

*   动态查询
*   二级索引
*   原子更新
*   地图缩减

你的访问模式（每个集合）怎么样？

*   读/写比率
*   更新类型
*   查询类型
*   数据生命周期

基础知识：

*   文档写入是原子的
*   最大文档大小为 16Meg（使用 GridFS，您也可以存储更大的文件）

注意：

*   粗心的索引
*   大型、深度嵌套的文档

这是关于模式设计的较早讨论：[模式设计基础](http://www.scribd.com/doc/37943580/MongoDB-schema-design-basics)

# php - MySQL数据库不更新

> ID：13116391
> 
> 赞同：1
> 
> 时间：2012-10-29T05:38:22.527
> 
> 标签：php, mysql, database, sql-update

数据库的输出看起来不错，但更新的输入没有传递到数据库

edit.php - 从这里所有值都正确显示

```
<?php
session_start();

$name = $_SESSION['name'];
$sur = $_SESSION['sur'];
$pass = $_SESSION['pass'];

echo $name.' '.$sur.' '.$pass;

//connect
$dbh = mysql_connect ("localhost", "xxx_admin", "xxx") 
       or die ('ERROR!');
       mysql_select_db ("xxx_database"); 

$query="SELECT * FROM client_info WHERE (first='$name' AND last='$sur' AND password='$pass')";
$result=mysql_query($query);

    $id = mysql_result($result,$i,"id");
    $first = mysql_result($result,$i,"first");
    $last = mysql_result($result,$i,"last");
    $phone = mysql_result($result,$i,"phone");
    $mob = mysql_result($result,$i,"mob");
    $fax = mysql_result($result,$i,"fax");
    $email = mysql_result($result,$i,"email");
    $web = mysql_result($result,$i,"web");
    $com = mysql_result($result,$i,"com");
    $add = mysql_result($result,$i,"add");
    $city = mysql_result($result,$i,"city");
    $state = mysql_result($result,$i,"state");
    $zip = mysql_result($result,$i,"zip");
    $zone = mysql_result($result,$i,"zone");
    $office = mysql_result($result,$i,"office");
    $office_num = mysql_result($result,$i,"office_num");
    $ext_mob = mysql_result($result,$i,"ext_mob");
    $ext_phone = mysql_result($result,$i,"ext_phone");
    $ext_office = mysql_result($result,$i,"ext_office");
    $srv = mysql_result($result,$i,"srv");
    $stype = mysql_result($result,$i,"stype");
    $voip = mysql_result($result,$i,"voip");
    $vpass = mysql_result($result,$i,"vpass");
    $regDate = mysql_result($result,$i,"regDate");
    $acct = mysql_result($result,$i,"acct");
    $Nagent = mysql_result($result,$i,"Nagent");
    $agents = mysql_result($result,$i,"agents");
    $password = mysql_result($result,$i,"password");

?>
<html>
<head>
<title></title>
</head>

<body>

<form method="post" action="update.php" name="gen">
<b>Personal Info:</b>
<p>First Name:<input type="text" name="first" size="20" value="<?php echo $first; ?>"/></p>
<p>Last Name:<input type="text" name="last" size="20" value="<?php echo $last; ?>"/></p>
<p>Mob:<input type="text" name="mob" size="20" value="<?php echo $mob; ?>"/>
ext:<input type="text" name="ext_mob" size="4" value="<?php echo $ext_mob; ?>"/></p>
<p>Phone:<input type="text" name="phone" size="20" value="<?php echo $phone; ?>"/>
ext:<input type="text" name="ext_phone" size="4" value="<?php echo $ext_phone; ?>"/></p>
<p>Fax:<input type="text" name="fax" size="20" value="<?php echo $fax; ?>"/></p>
<p>E-mail:<input type="text" name="email" size="35" value="<?php echo $email; ?>"/></p>
<p>Address:<input type="text" name="add" size="40" value="<?php echo $add; ?>"/></p>
<p>City:<input type="text" name="city" size="20" value="<?php echo $city; ?>"/></p>
<p>State:<input type="text" name="state" size="20" value="<?php echo $state; ?>"/></p>
<p>Zip Code:<input type="text" name="zip" size="5" value="<?php echo $zip; ?>"/></p>
<p>Zone:<input type="text" name="zone" size="5" value="<?php echo $zone; ?>"/></p>
<br>

<b>Office Info:</b>
<p>Company:<input type="text" name="com" size="40" value="<?php echo $com; ?>"/></p>
<p>Office Address:<input type="text" name="office" size="40" value="<?php echo $office; ?>"/></p>
<p>Office Num #:<input type="text" name="office_num" size="15" value="<?php echo $office_num; ?>"/>
ext:<input type="text" name="ext_office" size="4" value="<?php echo $ext_office; ?>"/></p>
<p>Website:<input type="text" name="web" size="30" value="<?php echo $web; ?>"/></p><br>

Old password:
<input type="password" size="20" name="oldpassword">
New password:
<input type="password" size="20" name="newpassword">
verify new password
<input type="password" size="20" name="verpassword">

<input type="text" size="20" name="id" value="<?php echo $id; ?>">
<input type="submit" value="Update Database">
</form>

</body>
</html> 
```

update.php - 它说更新成功，但我的数据库没有变化

```
<?php
session_start();

$ud_id=$_POST['id'];
$name = $_SESSION['name'];
$sur = $_SESSION['sur'];
$pass = $_SESSION['pass'];

$ud_first = $_POST['first'];
$ud_last = $_POST['last'];
$ud_phone = $_POST['phone'];
$ud_mob = $_POST['mob'];
$ud_fax = $_POST['fax'];
$ud_email = $_POST['email'];
$ud_web = $_POST['web'];
$ud_com = $_POST['com'];
$ud_add = $_POST['add'];
$ud_city = $_POST['city'];
$ud_state = $_POST['state'];
$ud_zip = $_POST['zip'];
$ud_zone = $_POST['zone'];
$ud_office = $_POST['office'];
$ud_office_num = $_POST['office_num'];
$ud_ext_mob = $_POST['ext_mob'];
$ud_ext_phone = $_POST['ext_phone'];
$ud_ext_office = $_POST['ext_office'];
$ud_password = $_POST['newpassword'];

//connect
$dbh = mysql_connect ("localhost", "xxx_admin", "xxx") 
       or die ('ERROR!');
       mysql_select_db ("xxx_database"); 

$query="UPDATE client_info SET first='$ud_first',last='$ud_last',phone='$ud_phone',mob='$ud_mob',fax='$ud_fax',email='$ud_email',web='$ud_web',com='$ud_com',add='$ud_add',city='$ud_city',state='$ud_state',zip='$ud_zip',zone='$ud_zone',office='$ud_office',office_num='$ud_office_num',ext_mob='$ud_ext_mob',ext_phone='$ud_ext_phone',ext_office='$ud_ext_office',password='$ud_password' WHERE id='$ud_id'";

mysql_query($query);

echo "Record Updated at ID: ".$ud_id;
mysql_close();     

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T06:58:28.393

由于我不知道您的表结构，请尝试此操作并进行相应的调试。

```
$query="UPDATE client_info SET first='$ud_first',
last='$ud_last',
phone='$ud_phone',
mob='$ud_mob',
fax='$ud_fax',
email='$ud_email',
web='$ud_web',
com='$ud_com',
add='$ud_add',
city='$ud_city',
state='$ud_state',
zip='$ud_zip',
zone='$ud_zone',
office='$ud_office',
office_num='$ud_office_num',
ext_mob='$ud_ext_mob',
ext_phone='$ud_ext_phone',
ext_office='$ud_ext_office',
password='$ud_password' WHERE id=$ud_id;";

mysql_query($query) or die(mysql_error()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T05:52:58.517

1.  最重要的是，我强烈建议您在向数据库发送任何内容之前转义您的用户输入。它将逃避特殊字符并避免使用关键字来弄乱您的数据库。为此，只需像这样使用 mysql_real_escape_string() ；

    $ud_first = mysql_real_escape_string($_POST['first']);

2.  您应该检查 mysqli，因为 mysql 已被废弃。如果你刚刚开始你的代码，我建议你尽快切换。效率和安全性将会提高。

3.  添加一个 ; 在你查询的最后。将帮助服务器知道它在哪里结束。

4.  更改`or die ('ERROR!');`为 or`die (mysql_error());`这将回显 mysql 服务器遇到的最后一个错误。它很可能会告诉您您的问题是什么。

我给你这些提示，因为我不明白为什么你的代码不能按预期工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T07:33:57.850

超出了这个问题的范围，但为什么要分别分配每个结果值？

您期望一个结果，并且由于 $i not set 实际上是 null 它可以工作，也许您可​​以通过使用来简化您的生活和代码

```
$r = mysql_fetch_assoc($result);
foreach($r as $key=>$value){ $$key=$value; } 
```

如果预期或可能有更多行，则必须在 foreach 循环或类似解决方案中关闭它。另一方面，处理帖子和保护输入也可能很简单

```
$allowed_post_vars=array('city','zip',...); // define ok variables
foreach($allowed_post_vars as $postvar)// each of them
{ $ud='ud_'.$postvar; // prepare longer name, like $ud_city etc 
  $$ud=mysql_real_escape_string($_POST[$postvar]); //assign it sanitized value
} 
```

# python - 熊猫：用分隔符展平df

> ID：13116394
> 
> 赞同：1
> 
> 时间：2012-10-29T05:38:51.270
> 
> 标签：python, numpy, pandas

我的目标是使用标准输入管道将数据帧加载到数据库中，以加载在命令行执行的加载语句（例如 cat {file_loc} | /path/to/sql --command "COPY table FROM STDIN WITH DELIMITER ','; ”）。我知道这种方法不是最理想的。由于 pyodbc 问题，这是一种解决方法；）

压缩数据帧的最有效方法是什么，以便每一行都是一个字符串，其中包含分隔符分隔的值，末尾有换行符？下面我的解决方案似乎效率低下。

```
from pandas import *
import numpy as np
df = DataFrame(np.random.randint(low=0, high=100, size=(5,3)),columns=['A','B','C'])
df2 = df.apply(lambda d: ','.join([`x` for x in d])) 
```

使用 df.to_csv() 或类似方法编写数据帧太慢了......

```
import timeit
m1="""df2=df.apply(lambda d: ','.join([`x` for x in d]))"""
met1t = timeit.Timer(stmt=m1,setup="from pandas import *; import numpy as np; df = DataFrame(np.random.randint(low=0, high=100, size=(5,3)),columns=['A','B','C'])")
print "Method 1: %.2f usec/pass" % (1000000 * met1t.timeit(number=100000)/100000)
# 381.82 usec/pass

m2="""df.to_csv('testout.csv', index=False, header=False)"""
met2t = timeit.Timer(stmt=m2,setup="from pandas import *; import numpy as np; df = DataFrame(np.random.randint(low=0, high=100, size=(5,3)),columns=['A','B','C'])")
print "Method 2:%.2f usec/pass" % (1000000 * met2t.timeit(number=100000)/100000)
# 551.30 usec/pass 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T20:56:19.623

你能描述一下pyodbc问题吗？

我在这里创建了一个问题。要获得最终性能，您需要使用 C 或 Cython 并使用 C 字符串函数自己构建原始字节字符串。不是很满意，我知道。在某些时候，我们也应该为 pandas 构建一个性能更好的 to_csv：

[http://github.com/pydata/pandas/issues/2210](http://github.com/pydata/pandas/issues/2210)

# c# - 访问 C# 字典和返回值

> ID：13116400
> 
> 赞同：-1
> 
> 时间：2012-10-29T05:39:36.380
> 
> 标签：c#, linq

我有一本字典：

```
Dictionary<ICD_Map2, string> maps = new Dictionary<ICD_Map2, string>(); 
```

我通过按钮单击添加到字典中：

```
private void button2_Click(object sender, EventArgs e)
{
    maps.Clear();
    // Load mapping file.
    var reader = new StreamReader(File.OpenRead(@"Call_Details_Map.csv"));
    while (!reader.EndOfStream)
    {
        var line = reader.ReadLine();
        var values = line.Split(',');

        maps.Add(new ICD_Map2(values[0].Replace("\"",""), values[1].Replace("\"","")), values[2].Replace("\"",""));
    }
} 
```

我想使用 LINQ 并将我的键映射到地图中的“字符串”。

我该怎么做？

```
var File001 = from line in File.ReadLines(ICD_process)
              let l = line.Split(',')
              where l[0] != "\"Statement Date\""
              select new
              {
                  CallType = maps.ToLookup(p => l[5], p => l[3]),
                  Calls = l[11] == "\"\"" ? "0" : (maps.ToLookup(p => l[5], p => l[3]) == "Mobile Data" || maps.ToLookup(p => l[5], p => l[3]) == "Mobile SMS") ? "0" : l[11].Replace("\"","").ToString())
              }; 
```

我在 File001 Linq 方法中的 Calls 变量中遇到错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T06:59:26.973

目前尚不清楚您要达到什么目标，但这是我的建议。现在您正在使用这样的吐线阵列`l[0] != "\"Statement Date\""`。我认为只有您知道索引 9 处应该包含哪些数据。它的可读性不高，容易出错（输入错误`Statemnet Date`，索引错误），而且很难维护。相反，这会创建一个对象，它将为您解析行并通过具有好名称的强类型属性提供数据。

```
public class ICDEntry
{
    public static ICDEntry CreateFrom(string line)
    {
        string[] values = line.Split(',');
        var entry = new ICDEntry();
        // assign values to properties:
        // if (values[0] == "\"Statement Date\"")
        //     entry.StatementDate = DateTime.Parse(values[1]);
        //     entry.IsSomething = values[11] == "\"\""
        return entry;
    }

    public DateTime? StatementDate { get; private set; }
    public string MobileSMS { get; private set; }
    public bool IsSomething { get; private set; }
} 
```

现在您可以解析每一行，然后在强类型世界中查询您的 ICD 条目：

```
var entries = File.ReadLines(ICD_process).Select(l => ICDEntry.CreateFrom(l));
var File001 = from e in entries
              where e.StatementDate.HasValue
              select new {
                  Calls = e.IsSomething ? "0" : e.MobileSMS; // use ICDEntry here
              }; 
```

# wcf - 使用 WCF 的 VPN 隧道

> ID：13116408
> 
> 赞同：2
> 
> 时间：2012-10-29T05:40:17.193
> 
> 标签：wcf

我有一个使用 http 协议的 WCF 服务。如何转换我的 WCF 服务以使用 VPN。

我必须做出一些改变吗？也有人可以向我指出一些与 VPN 隧道和 WCF 相关的基本介绍性内容。

可能这个问题很抽象。但请原谅。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T12:39:50.477

VPN 是一个网络，而不是一个协议。

您唯一能做的就是打开一条通往托管 WCF 服务的 VPN 网络的 VPN 隧道（例如使用 Cisco VPN Client 或 Shrew VPN）。然后你可以在 VPN 网络中访问你的 WCF 服务，一切都将通过 VPN 隧道发送，不管是 HTTP 还是 HTTPS，最后都是 TCP/UDP ..

如果您想保护您的 WCF 消息，请使用 HTTPS、证书等。

# java - 我怎样才能让时钟滴答作响？

> ID：13116414
> 
> 赞同：0
> 
> 时间：2012-10-29T05:40:59.217
> 
> 标签：java

我现在正在制作时钟，目前我的秒针、分针和时针都是使用具有起始坐标和结束坐标 的`Line`对象以图形方式绘制的。`(x0, y0)``(x1, y1)`

现在让我感到困惑的是如何让秒针在每次经过时都“滴答”。即如何更新`(x1, y1)`坐标（由于起始坐标始终在时钟的中心，我们不需要更新它）使其顺时针移动 6 度？这让我很困惑，因为单位圆的方向（以及弧度的方向）是逆时针方向的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T05:44:15.960

有几种方法。因为你可能知道时钟的半径，你可以做

```
theta = (theta - 6)%360;
x1 = radius*cos(theta * PI/180);
y1 = radius*sin(theta * PI/180); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T06:05:03.960

[这个例子](https://stackoverflow.com/questions/12964983/rotate-image-around-character-java/12971987#12971987)出奇的好......

```
public class TestClock {

    public static void main(String[] args) {
        new TestClock();
    }

    public TestClock() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new ClockPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    protected class ClockPane extends JPanel {

        public ClockPane() {
            Timer timer = new Timer(1000, new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    repaint();
                }
            });
            timer.setRepeats(true);
            timer.setCoalesce(false);
            timer.start();
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(200, 200);
        }

        protected Point getPointTo(float angle) {

            int x = Math.round(getWidth() / 2);
            int y = Math.round(getHeight() / 2);

            double rads = Math.toRadians(angle);
            // This is an arbitrary amount, you will need to correct for this
            // I'm working of a width of 200 pixels, so that makes the radius
            // 100...
            int radius = 100;

            // Calculate the outter point of the line
            int xPosy = Math.round((float) (x + Math.cos(rads) * radius));
            int yPosy = Math.round((float) (y - Math.sin(rads) * radius));

            return new Point(xPosy, yPosy);

        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            Graphics2D g2d = (Graphics2D) g.create();

            g2d.setColor(Color.RED);

            Calendar cal = Calendar.getInstance();
            int seconds = cal.get(Calendar.SECOND);
            float angle = -(360f * (seconds / 60f));
            angle += 90; // Correct for 0 being out to the right instead of up

            Point p = getPointTo(angle);

            int x = getWidth() / 2;
            int y = getHeight() / 2;

            g2d.drawLine(x, y, p.x, p.y);

            FontMetrics fm = g2d.getFontMetrics();
            String text = Integer.toString(seconds);
            g2d.drawString(text, getWidth() - fm.stringWidth(text), getHeight() - fm.getHeight() + fm.getAscent());

            g2d.dispose();
        }
    }
} 
```

# php - 带有日光浴室库的 php 作曲家

> ID：13116416
> 
> 赞同：1
> 
> 时间：2012-10-29T05:41:12.420
> 
> 标签：php, composer-php, solarium

我应该如何使用日光浴室库[https://packagist.org/packages/solarium/solarium](https://packagist.org/packages/solarium/solarium)

使用 PHP 作曲家？[http://getcomposer.org/](http://getcomposer.org/)

*   我跑了

`composer require solarium/solarium`

*   它安装正确然后我添加到我的 php 文件中

`include_once './vendor/autoload.php';`

*   那么如何初始化Autoloader呢？在作曲家之前，我将执行以下要求，然后所有功能都将可用。

`require_once(dirname(__FILE__) . '/../Solarium/Autoloader.php');`

*   我尝试了以下但它给了我`Fatal error: Cannot redeclare class Solarium\Autoloader on Solarium\Autoloader.php on line 53`

`new Solarium\Autoloader();`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T08:26:14.233

自动加载器的要点是在使用它们之前您**不必**require_once 文件。只需`new Solarium_Client();`在包含 Composer autoload.php 文件后调用，包括它已经初始化自动加载器。

# git - 在 bitbucket.org 上克隆一个 repo

> ID：13116424
> 
> 赞同：5
> 
> 时间：2012-10-29T05:41:57.850
> 
> 标签：git, bitbucket

我正在尝试在 bitbucket.org 上克隆一个分叉的 repo，但我遇到了这个错误：

```
error: RPC failed; result=
fatal: The remote end hung
fatal: early EOF
fatal: index-pack failed 
```

我不明白这个错误，任何人都知道这个错误，我应该怎么做才能避免这个错误，以便我的克隆成功？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T17:07:26.747

在克隆 1.5 GB 的存储库时，我遇到了同样的错误消息。我通过将克隆方式从[HTTPS 更改为 SSH](https://confluence.atlassian.com/pages/viewpage.action?pageId=270827678)解决了这个问题。SSH 工作。

这些步骤令人生畏，但一次只采取一步。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-26T04:17:17.233

按照此页面中的步骤操作：

[https://confluence.atlassian.com/pages/viewpage.action?pageId=693897332](https://confluence.atlassian.com/pages/viewpage.action?pageId=693897332)

# android - 带有文本视图和切换按钮 i= 的列表视图实现

> ID：13116425
> 
> 赞同：1
> 
> 时间：2012-10-29T05:42:09.393
> 
> 标签：android, list, android-layout, android-listview, listitem

在我的应用程序中，我想创建带有切换按钮和文本视图的列表视图。当我单击列表项时，我想进行下一个活动。但是当我单击 Toogle 按钮时，我需要显示它处于关闭模式或开启模式。下面我添加我的代码。

$ 这是我的主要活动

```
public class MainActivity extends Activity {

    int startminute;
    int endminute;

    Date date;
    ToggleButton togg;
    ListView lv;
    String[] days = { "SUNDAY", "MONDAY", "TUESDAY", "WEDNESDAY", "THURSDAY",
            "FRIDAY", "SATURDAY" };
    boolean[] onOff = new boolean[] { false, false, false, false, false, false,
            false };

    @Override
    protected void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.listview);
        if (savedInstanceState != null) {
            onOff = savedInstanceState.getBooleanArray("status");
        }
        lv = (ListView) findViewById(R.id.listView1);
        lv.setAdapter(new MyAdapter());
        lv.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE);
        lv.setOnItemClickListener(new OnItemClickListener() {

            public void onItemClick(AdapterView<?> arg0, View arg1,
                    int position, long arg3) {

                Intent in = new Intent(MainActivity.this, StartAndEndTime.class);
                in.putExtra("position", position);
                startActivity(in);
            }
        });
    }

    public class MyAdapter extends BaseAdapter {

        public int getCount() {
            return days.length;
        }

        public Object getItem(int position) {
            return position;
        }

        public long getItemId(int position) {
            return position;
        }

        @Override
        public int getItemViewType(int position) {

            return position;
        }

        @Override
        public int getViewTypeCount() {
            return days.length;
        }

        public View getView(final int position, View convertView,
                ViewGroup parent) {
            View v = null;
            TextView arryText;

            if (v == null) {
                LayoutInflater vi = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                v = vi.inflate(R.layout.inflate, null);

                arryText = (TextView) v.findViewById(R.id.inflateText);
                togg = (ToggleButton) v.findViewById(R.id.toggleButton1);
                v.setTag(new ViewHolder(arryText, togg));

                togg.setOnClickListener(new OnClickListener() {

                    public void onClick(View v) {

                        if (togg.isChecked()) {
                            togg.setChecked(false);
                            onOff[position] = false;

                            Toast.makeText(MainActivity.this, "is off",
                                    Toast.LENGTH_SHORT).show();

                        } else {

                            onOff[position] = true;
                            togg.setChecked(true);
                            Toast.makeText(MainActivity.this, "is on",
                                    Toast.LENGTH_SHORT).show();
                        }
                    }
                });

                arryText.setText(days[position]);
                togg.setChecked(onOff[position]);
            }

            return v;
        }
    }

    @Override
    protected void onSaveInstanceState(Bundle outState) {
        super.onSaveInstanceState(outState);
        outState.putBooleanArray("status", onOff);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T05:44:55.083

以这种方式改变你的`getView`方法......

```
public View getView(final int position, View convertView,
        ViewGroup parent) {
    View v = null;
    TextView arryText;

    if (v == null) {
        LayoutInflater vi = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        v = vi.inflate(R.layout.inflate, null);
    }
        arryText = (TextView) v.findViewById(R.id.inflateText);
        togg = (ToggleButton) v.findViewById(R.id.toggleButton1);
        v.setTag(new ViewHolder(arryText, togg));

        togg.setOnClickListener(new OnClickListener() {

                public void onClick(View v) {

                    if (onOff[position]) {
                        togg.setChecked(false);
                        onOff[position] = false;

                        Toast.makeText(MainActivity.this, "is off",
                                Toast.LENGTH_SHORT).show();

                    } else {

                        onOff[position] = true;
                        togg.setChecked(true);
                        Toast.makeText(MainActivity.this, "is on",
                                Toast.LENGTH_SHORT).show();

                    }

                }
            });

        arryText.setText(days[position]);
        togg.setChecked(onOff[position]);

    return v;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T05:59:59.973

这样做：

**在构造函数中：**将 Activity 的上下文传递给 Adapter 类，并为 LayoutInflater 使用相同的上下文：

mInflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);

**在 getView() 中：**

```
View v = null;

if (convertView == null) {
    v = mInflater.inflate(R.layout.demo_list, parent, false);
} else {
    v = convertView;
} 
```

你现在得到了视图（v），向它添加视图/侦听器，然后返回！

**返回 v;**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T06:33:08.020

问题可能出在位置上。试试这个代码：

```
public View getView(final int position, View convertView,
            ViewGroup parent) {
        View v = null;
        TextView arryText;
        final int rowPosition = position;

        if (v == null) {
            LayoutInflater vi = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            v = vi.inflate(R.layout.inflate, null);

            arryText = (TextView) v.findViewById(R.id.inflateText);
            togg = (ToggleButton) v.findViewById(R.id.toggleButton1);
            v.setTag(new ViewHolder(arryText, togg));

            togg.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {
            @Override
            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
            // Save the state here
            onOff[rowPosition]= isChecked;
              Toast.makeText(MainActivity.this, isChecked ? "is on" : "is off",
                                Toast.LENGTH_SHORT).show();
            }
            });

            arryText.setText(days[rowPosition]);
            togg.setChecked(onOff[rowPosition]);

        }

        return v;
    } 
```

# javascript - 需要一个 sql 数据库的接口作为 django 网站上的一种形式

> ID：13116428
> 
> 赞同：0
> 
> 时间：2012-10-29T05:42:13.447
> 
> 标签：javascript, jquery, sql, django, backbone.js

我有一个 django 网站，我需要在该网站上嵌入一个表单，该表单只是 SQL 数据库上的一个表接口。我想执行动态更改，即添加、删除、修改等操作。我不知道我怎么能做到这一点？

我看过一些东西，比如主干 js 和 ember 等等。

有人可以告诉我可以使用哪一个，是否有任何资源或示例可以查看？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T06:41:43.417

由于您已使用 Javascript 和 Jquery 对此进行了标记，因此我假设您指的是通过客户端中的 ajax 异步进行更改。否则，在 Django 中执行此操作的标准方法是使用[ModelForm](https://docs.djangoproject.com/en/dev/topics/forms/modelforms/)

对于异步 CRUD 操作（创建、读取、更新、删除），我执行以下操作：

1) 使用[Django Tastypie](http://django-tastypie.readthedocs.org/en/latest/interacting.html)为您的模型创建一个 RESTful HTTP 接口。这将确保您将获得每个操作的 POST、GET、PATCH/PUT、DELETE http url。

2) 使用 jquery`$.ajax`将您的表单字段绑定到这些操作

```
$.ajax({
  url: 'http://localhost:8000/api/v1/yourmodel/1/',
  type: 'GET',
  accepts: 'application/json',
  dataType: 'json'
}) 
```

[在浏览器中使用Postman 之](https://chrome.google.com/webstore/detail/postman-rest-client/fdmmgilgnpjigdojojpjoooidkmcomcm?utm_campaign=en&utm_source=en-et-na-us-oc-webstrhm&utm_medium=et)类的工具来测试您的 API，或者您也可以使用`curl`

# javascript - ie7 javascript问题

> ID：13116429
> 
> 赞同：0
> 
> 时间：2012-10-29T05:42:17.553
> 
> 标签：javascript, cross-browser

我有以下代码，它可以在一个 IE8、FF 和其他浏览器上工作，但在检查时不适用于 IE7，我发现`formatIncludes[i]`它不起作用，知道 IE7 有什么问题以及任何解决方法

```
var formatIncludes = valueToSet.replace(/[^\D]/g, '');
    for(var i=formatIncludes.length-1; i >= 0 ; i--){
        if(valueToSet && valueToSet != null && valueToSet.endsWith(formatIncludes[i])){
            valueToSet = valueToSet.substr(0, valueToSet.length - 1);
        }else{
            break;
        }
    }

String.prototype.endsWith = function(suffix) {
    return (this.indexOf(suffix, this.length - suffix.length) != -1);
}; 
```

`formatIncludes`可以包含任何字符串值

IE7上的错误

```
Message: 'length' is null or not an object
Line: 352
Char: 2
Code: 0
URI: http://localhost:7001/HHSPortal/framework/skeletons/hhsa/js/util.js 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T05:50:50.780

似乎索引字符串`[i]`不起作用？更一致/正确的解决方案是使用`.charAt(i)`

原因可以在这些中找到：

[string.charAt(x) 还是 string[x]？](https://stackoverflow.com/questions/5943726/string-charatx-or-stringx)

[JavaScript 跨浏览器：将字符串视为数组是否安全？](https://stackoverflow.com/questions/5599881/javascript-cross-browser-is-it-safe-to-treat-a-string-as-array)

# ruby-on-rails - Rails：AJAX 调用后 Will_paginate 无法正常工作

> ID：13116438
> 
> 赞同：1
> 
> 时间：2012-10-29T05:43:15.053
> 
> 标签：ruby-on-rails, ajax, will-paginate

抱歉重复了，经过大量搜索后，我找不到问题的答案。调用后 will_paginate 不起作用`Ajax`。

1.  删除操作后，它根本不显示页码（它只是返回所有结果）。
2.  搜索操作后，页码不会更新，它显示的页面比实际应该存在的页面多。

这是控制器代码。

```
class CitiesController < ApplicationController

 def index
     @cities = City.get_cities(params[:city_name],params[:city_population]).paginate(:page => params[:page])
  respond_to do |format|
    format.html 
    format.js
  end

 end

 def create
      @city = City.new(params[:city])

  if @city.save
       flash[:success] = "City information saved successfully"

       redirect_to cities_path
    else
        render 'index'
    end
 end

def new
    @city = City.new
end

 def destroy
   @city = City.find(params[:id]).destroy
   @city.destroy
   @cities = City.all
   respond_to do |format|
      format.html {redirect_to cities_path}
      format.js
    end
  end

 end 
```

这是索引视图：

```
 <div class="row">
<h1>Search Cities or <%= link_to "Create New City", new_city_path %></h1>
<h3>99 random city information are generated in the database </h2>
<h3>Simply type any letter or city population between 0 and 10 to filter out</h3>
<%= form_tag "/cities/index", method: :get, remote: true do %>
  <%= label_tag(:q, "City Name:") %>
  <%= text_field_tag 'city_name' %>
  <%= label_tag(:q, "City Population greater than, in units of 1 million:") %>
  <%= text_field_tag 'city_population' %>
  <label></label>
  <%= button_tag("Search", :class => "btn") %>
<% end %>
<% flash.each do |key, value| %>
   <div class="alert alert-<%= key %>"><%= value %></div>
<% end %>

<div id='table' class="table table-striped">
    <%= render 'table' %> 
</div>

<%=will_paginate @cities %>
 </div> 
```

这是表格的部分视图：

```
<div class="row">
<h1>Enter City descriptions or <%= link_to "Search Cities", cities_path %></h1>
<%= form_for @city, html: {multipart: true} do |f| %>

<%= f.label :city_name %>
<%= f.text_field :city_name %>

<%= f.label :city_description %>
<%= f.text_field :city_description %>

<%= f.label :city_population_in_units_of_millions %> 
<%= f.text_field :city_population %>
<label></label>

<%= f.file_field :image%>

<label></label>
<%= f.submit "Create new City", :class => "btn"%>
<% end %>
</div>

Finally two js.erb codes associated with index and delete actions:

index.js.erb:

$('#table').html('<%= escape_javascript(render('table')) %>');

destroy.js.erb:

$('#table').html('<%= escape_javascript(render('table')) %>'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T23:09:00.863

自己找到了解决方案。

添加`<%= will_paginate @cities %>`到部分文件中

并更改`@cities = City.all`为

> @cities = City.all.paginate(page: params[:page])

因为`will_paginate`不期望一个`array`对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T05:52:03.110

写在你的控制器中

```
def index
  @cities = City.get_cities(params[:city_name],params[:city_population]).paginate(:page => params[:page])
  respond_to do |format|
   format.html 
   format.js  
  end 
end 
```

在您的视图文件夹中创建`index.js.erb`并写入

```
$('id or class').html('<%=escape_javascript render :partial => which part you update %>') 
```

# ruby-on-rails - 创建自己的用户控制器时设计忘记密码功能不起作用？

> ID：13116440
> 
> 赞同：0
> 
> 时间：2012-10-29T05:43:36.957
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise

我使用设计进行身份验证，我创建了一个用户控制器，并在我的路由中指定如下所示，它允许我创建用户、编辑和删除用户，

```
devise_for :users do
resources :users, :only => [:index, :new, :create, :edit, :update, :destroy]
end 
```

但我无法使用此功能使忘记密码功能正常工作，但如果我指定为

```
devise_for :users 
```

然后我可以使用设计附带的忘记密码功能，当我这样指定时我无法创建、编辑或删除。那么我怎样才能让两者都工作呢？请帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T10:57:36.583

最后我得到了我正在寻找的方式，就是这样......

```
devise_for :users do
      resources :users, :only => [:create]
      end
    devise_scope :user do
      resources :users, :only => [:index, :new, :create, :edit, :update, :destroy]
        end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T06:11:40.900

更改用户的路线，请参阅此

1.  [https://github.com/plataformatec/devise](https://github.com/plataformatec/devise)
2.  [http://railscasts.com/episodes/209-introducing-devise](http://railscasts.com/episodes/209-introducing-devise)

路线之类 - 例如

```
devise_for :users, :path => "usuarios", :path_names => { :sign_in => 'login', :sign_out => 'logout', :password => 'secret', :confirmation => 'verification', :unlock => 'unblock', :registration => 'register', :sign_up => 'cmon_let_me_in' } 
```

# mysql - mysql 根据一个已知字段进行选择

> ID：13116447
> 
> 赞同：1
> 
> 时间：2012-10-29T05:44:38.393
> 
> 标签：mysql

唯一已知的变量是 Item（在本例中为 Car）

我想运行一个查询，它显示与我知道的 Item 颜色相同的所有行。

例如.. 我想运行汽车查询。

SELECT * from TABLE WHERE（项目颜色与汽车颜色匹配）

```
ITEM             COLOR
Car              Blue
House            Red
Boat             Green
Jetski           Red 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T05:47:20.167

**编辑**：

```
select * from table where color = (select color from table where item = 'Car'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T06:21:24.163

这也有效：

```
select table.*
from table inner join table table_1 using (COLOR)
where table_1.ITEM = 'Car'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T05:57:47.620

```
select * from table where color In (select color from table where item = 'Car'); 
```

# javascript - Javascript 中的三元运算符

> ID：13116449
> 
> 赞同：-4
> 
> 时间：2012-10-29T05:44:46.240
> 
> 标签：javascript, ternary-operator

我正在与三元运算符一起工作，我需要一些帮助。我正在转换一个简单的 if-else 语句，但我有一个简单的语法错误，我似乎无法弄清楚。我正在练习代码学院的练习，但我得到的错误是第一行未定义。这是原始代码：

```
if (food === "taco") {
  foodType = "Mexican";
} else {
  foodType = "other";  
} 
```

这是我的代码。第一行是未定义的，但我似乎无法弄清楚如何。

```
var food = prompt("Food type");
var food === "taco" ? "Mexican": "other"; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-29T05:46:29.840

我想你的意思是：

```
foodType = (food === "taco") ? "Mexican": "other"
                   ^condition       ^true    ^false 
```

**[MDN：条件运算符](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Conditional_Operator)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T05:47:10.167

三元语法应该是这样的，

```
variableToBeSet = (condition) ? trueValue : falseValue; 
```

在你的问题中，

```
foodtype = (food === "taco") ? "Mexican": "other"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T05:49:56.707

**布尔表达式 ? 值1：值2**

例如，下面的 if..then..else 语句

```
boolean isSmiley = true;

 String mood = "";

 if (isSmiley == true)
 {
   mood = "I'm Happy!";
 }
 else
 {
   mood = "I'm Sad!";
 } 
```

现在您可以使用如下所示的三元选项

```
 boolean isSmiley = true;
 String mood = (isSmiley == true)?"I'm Happy!":"I'm Sad!"; 
```

# java - Tomcat 6 启动时出现错误

> ID：13116452
> 
> 赞同：0
> 
> 时间：2012-10-29T05:44:55.807
> 
> 标签：java, oracle, hibernate, seam, c3p0

我在我的 Windows 7 机器上本地安装了 apache-tomcat-6.0.35。我也确实有尝试在 Tomcat 上运行的 Hiberanate Java 应用程序。后端使用的 RDBMS 是 Oracle 11g，因此我的机器上确实安装了 Oracle 客户端（11.2.0）。Java 应用程序使用 c3p0-0.9.1.2 在后端创建与 Oracle 的连接池。所有连接信息都存储在 tnsnames.ora 文件中。

整个项目代码都在版本控制系统中，因此完全相同的代码在我同事的机器上运行没有问题，但 Tomcat 无法在我的机器上启动，并显示以下日志。自今年年初（2012 年 2 月）以来，我就遇到了这个问题，但从未得到解决。我再试一次，看看是否有人能注意到我遗漏的东西。感谢您花时间研究这个问题！**非常感谢！**

## 这是我运行 Tomcat 服务器后日志文件中的内容：

```
Using CATALINA_BASE:                 "C:\Users\MyName\.IntelliJIdea11\system\tomcat\Unnamed_cerdoafebd8b4"
Using CATALINA_HOME:   "C:\Program Files (x86)\Apache\Tomcat6\apache-tomcat-6.0.35"
Using CATALINA_TMPDIR: "C:\Program Files (x86)\Apache\Tomcat6\apache-tomcat-6.0.35\temp"
Using JRE_HOME:        "C:\Program Files\Java\jdk1.6.0_31"
Using CLASSPATH:       "C:\Program Files (x86)\Apache\Tomcat6\apache-tomcat-6.0.35\bin\bootstrap.jar"
...
2012-10-29T03:37:54.054Z INFO   [main] EnvironmentProperties  - Filtering properties using environment dev
2012-10-29T03:38:51.693Z INFO   [main] MLog  - MLog clients using log4j logging.
2012-10-29T03:39:40.497Z INFO   [main] C3P0Registry  - Initializing c3p0-0.9.1.2 [built 21-May-2007 15:04:56; debug? true; trace: 10]
2012-10-29T03:39:45.066Z INFO   [main] AbstractPoolBackedDataSource  - Initializing c3p0 pool... com.mchange.v2.c3p0.PoolBackedDataSource@f1bda9a6 [ connectionPoolDataSource -> com.mchange.v2.c3p0.WrapperConnectionPoolDataSource@1091d257 [ acquireIncrement -> 1, acquireRetryAttempts -> 3, acquireRetryDelay -> 1000, autoCommitOnClose -> false, automaticTestTable -> null, breakAfterAcquireFailure -> false, checkoutTimeout -> 0, connectionCustomizerClassName -> null, connectionTesterClassName -> com.mchange.v2.c3p0.impl.DefaultConnectionTester, debugUnreturnedConnectionStackTraces -> false, factoryClassLocation -> null, forceIgnoreUnresolvedTransactions -> false, identityToken -> 2zggjq8q1bc3mwlm6u21f|3bf60430, idleConnectionTestPeriod -> 0, initialPoolSize -> 2, maxAdministrativeTaskTime -> 0, maxConnectionAge -> 604800, maxIdleTime -> 7200, maxIdleTimeExcessConnections -> 120, maxPoolSize -> 10, maxStatements -> 0, maxStatementsPerConnection -> 0, minPoolSize -> 2, nestedDataSource -> com.mchange.v2.c3p0.DriverManagerDataSource@7c977f23 [ description -> null, driverClass -> null, factoryClassLocation -> null, identityToken -> 2zggjq8q1bc3mwlm6u21f|2bbef4c6, jdbcUrl -> jdbc:oracle:thin:@TRACKER_DEV, properties -> {user=******, .username=cerdo_app, password=******, .password=PEOPLE_WHOUSE_ADHOC, url.dev=jdbc:oracle:thin:@TRACKER_DEV, .url=jdbc:oracle:thin:@DW_DEV, .url.dev=jdbc:oracle:thin:@DW_DEV} ], preferredTestQuery -> select 1 from dual, propertyCycle -> 0, testConnectionOnCheckin -> true, testConnectionOnCheckout -> false, unreturnedConnectionTimeout -> 0, usesTraditionalReflectiveProxies -> false; userOverrides: {} ], dataSourceName -> null, factoryClassLocation -> null, identityToken -> 2zggjq8q1bc3mwlm6u21f|293a985, numHelperThreads -> 3 ]
oracle.net.TNSAddress.SOException
    at oracle.net.TNSAddress.ServiceAlias.initFromNVPair(Unknown Source)
    at oracle.net.TNSAddress.ServiceAlias.initFromString(Unknown Source)
    at oracle.net.resolver.AddrResolution.resolveAddrTree(Unknown Source)
    at oracle.net.resolver.AddrResolution.resolveAndExecute(Unknown Source)
    at oracle.net.ns.NSProtocol.establishConnection(Unknown Source)
    at oracle.net.ns.NSProtocol.connect(Unknown Source)
    at oracle.jdbc.ttc7.TTC7Protocol.connect(TTC7Protocol.java:1213)
    at oracle.jdbc.ttc7.TTC7Protocol.logon(TTC7Protocol.java:209)
    at oracle.jdbc.driver.OracleConnection.<init>(OracleConnection.java:252)
    at oracle.jdbc.driver.OracleDriver.getConnectionInstance(OracleDriver.java:365)
    at oracle.jdbc.driver.OracleDriver.connect(OracleDriver.java:260)
    at com.mchange.v2.c3p0.DriverManagerDataSource.getConnection(DriverManagerDataSource.java:134)
    at com.mchange.v2.c3p0.WrapperConnectionPoolDataSource.getPooledConnection(WrapperConnectionPoolDataSource.java:182)
    at com.mchange.v2.c3p0.WrapperConnectionPoolDataSource.getPooledConnection(WrapperConnectionPoolDataSource.java:171)
    at com.mchange.v2.c3p0.impl.C3P0PooledConnectionPool$1PooledConnectionResourcePoolManager.acquireResource(C3P0PooledConnectionPool.java:137)
    at com.mchange.v2.resourcepool.BasicResourcePool.doAcquire(BasicResourcePool.java:1014)
    at com.mchange.v2.resourcepool.BasicResourcePool.access$800(BasicResourcePool.java:32)
    at com.mchange.v2.resourcepool.BasicResourcePool$AcquireTask.run(BasicResourcePool.java:1810)
    at com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread.run(ThreadPoolAsynchronousRunner.java:547) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T14:07:33.433

万一其他人遇到这个问题，这里是问题和解决方案的详细信息（我与 ThapaKaji 离线工作）：

问题最终是 JVM 在其类路径上有两个 Oracle 驱动程序，一个是旧的 10g 版本，另一个是新的 11g 版本（我们发现它是因为 11g 驱动程序中不存在“oracle.net.TNSAddress.ServiceAlias” ）。它有两个版本而他不知道的原因是旧版本来自隐藏在他的 JDK 的 jre/lib/ext 文件夹中的“classes12.jar”。

该问题的解决方案是删除该 JAR，或切换到那里没有该文件的其他 JRE。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T05:54:17.280

如果这在您同事的机器上工作并且在您的机器上不起作用，最相关的原因是防火墙。检查您机器上的个人防火墙。我相信它阻止了连接。

如果它没有帮助检查您的网络配置。您和您的同事是否有可能在不同的子网中而其他防火墙阻止了您？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T10:47:14.197

看属性显示线开头

```
2012-10-29T03:39:45.066Z INFO   [main] AbstractPoolBackedDataSource  - Initializing c3p0 pool... 
```

您会发现您尝试连接的 JDBC URL 是 jdbc:oracle:thin:@TRACKER_DEV 我怀疑您的同事在从源代码管理中检查出应用程序后，会运行某种构建脚本来替换变量，例如 @各种配置文件中的 TRACKER_DEV 和 @DW_DEV。（您可能会发现这些变量是在 Tomcat 配置文件中设置的，或者它们可以在 c3p0 配置文件中设置，例如 c3p0.properties 或 c3p0-config.xml。）使用上面显示的 JDBC url 出现连接错误也就不足为奇了。

祝你好运！

# encryption - 如何制作自动信任 gpg 公钥？

> ID：13116457
> 
> 赞同：41
> 
> 时间：2012-10-29T05:45:27.453
> 
> 标签：encryption, ubuntu-12.04, gnupg, appliance

我正在尝试添加我的 GPG 公钥作为我们设备安装过程的一部分。它的目的是在管理员使用管理员门户将它们拉入他的本地之前加密任何重要的文件，如日志，然后使用私钥解密它们。计划是将公钥导出到文件中，并使用 gpg --import 命令进行设备安装过程来导入它。但我意识到，在进行任何加密之前，需要对密钥进行信任/签名。如何让这个密钥在安装时不受任何人为干预的信任？顺便说一句，我们的设备操作系统是 ubuntu vm，我们使用 kickstart 来自动化。

提前感谢所有帮助。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-06-16T06:01:29.470

您的问题实际上是“我如何加密密钥而不让 gpg 拒绝密钥不受信任的事实？”

一个答案是您可以签署密钥。

```
gpg --edit-key YOUR_RECIPIENT
sign
yes
save 
```

另一个是你可以告诉 gpg 继续并信任。

```
gpg --encrypt --recipient YOUR_RECIPIENT --trust-model always YOUR_FILE 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2014-07-03T00:20:23.743

巧合的是，我遇到了与 OP 类似的情况——我正在尝试使用公钥/私钥来签署和加密不同嵌入式设备的固件。由于尚无答案显示如何为您已导入的密钥添加信任，因此这是我的答案。

在测试机器上创建和测试密钥后，我将它们导出为 ascii：

```
$ gpg --export -a <hex_key_id> > public_key.asc
$ gpg --export-secret-keys -a <hex_key_id> > private_key.asc 
```

然后安全复制并将它们导入构建服务器：

```
$ gpg --import public_key.asc
$ gpg --import private_key.asc 
```

### 重要：添加信任

现在编辑密钥以添加最终信任：

```
$ gpg --edit-key <user@here.com> 
```

在`gpg>`提示符下，输入`trust`，然后输入`5`最终信任，然后`y`输入确认，然后输入`quit`。

现在使用测试文件对其进行测试：

```
$ gpg --sign --encrypt --yes --batch --status-fd 1 --recipient "recipient" --output testfile.gpg testfile.txt 
```

哪个报告

```
...
[GNUPG:] END_ENCRYPTION 
```

在不增加信任的情况下，我会收到各种错误（不限于以下内容）：

```
gpg: There is no assurance this key belongs to the named user
gpg: testfile.bin: sign+encrypt failed: Unusable public key 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2016-02-12T21:55:28.517

*通过使用--trust-model*选项，有一种更简单的方法可以告诉 GPG 信任其所有密钥：

```
 gpg -a --encrypt -r <recipient key name> --trust-model always 
```

从手册页：

```
 --trust-model pgp|classic|direct|always|auto

    Set what trust model GnuPG should follow. The models are:

      always Skip  key  validation  and assume that used 
             keys are always fully trusted. You generally 
             won't use this unless you are using some 
             external validation scheme. This option also 
             suppresses the "[uncertain]" tag printed 
             with signature checks when there is no evidence 
             that the user ID is bound to the key.  Note that 
             this trust model still does  not  allow  the use 
             of expired, revoked, or disabled keys. 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2014-06-12T19:17:08.703

添加`trusted-key 0x0123456789ABCDEF`到您的`~/.gnupg/gpg.conf`替换keyid。这相当于最终信任此密钥，这意味着它所做的认证将被视为有效。仅将此密钥标记为有效而不信任它更难，并且需要签名或将信任模型切换为直接。如果您确定只导入有效密钥，您可以简单地通过添加将所有密钥标记为有效`trust-model always`。在后一种情况下，请确保禁用自动密钥检索（默认情况下未启用）。

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2016-01-07T22:08:18.337

这对我有用：

尝试加密文件会这样响应：

```
gpg -e --yes -r <uid> <filename>

It is NOT certain that the key belongs to the person named
in the user ID.  If you *really* know what you are doing,
you may answer the next question with yes.

Use this key anyway? (y/N)

That causes my shell script to fail. 
```

所以我：

```
$gpg --edit-key <uid>

gpg> trust

Please decide how far you trust this user to correctly verify other 
users' keys (by looking at passports, checking fingerprints from 
different sources, etc.)

  1 = I don't know or won't say
  2 = I do NOT trust
  3 = I trust marginally
  4 = I trust fully
  5 = I trust ultimately
  m = back to the main menu

Your decision? 5
Do you really want to set this key to ultimate trust? (y/N) y

Please note that the shown key validity is not necessarily correct
unless you restart the program.

gpg> quit 
```

现在加密工作正常。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2015-09-29T02:11:00.903

基于@tersmitten 的文章和一些试验和错误，我最终得到了以下命令行来信任给定密钥环中的所有密钥，而无需用户交互。我将它用于与[StackEschange Blackbox](https://github.com/StackExchange/blackbox)和[hiera-eyaml-gpg](https://github.com/sihil/hiera-eyaml-gpg)一起使用的键：

```
# The "-E" makes this work with both GNU sed and OS X sed
gpg --list-keys --fingerprint --with-colons |
  sed -E -n -e 's/^fpr:::::::::([0-9A-F]+):$/\1:6:/p' |
  gpg --import-ownertrust 
```

就个人而言，我更喜欢将结果存储在 trustdb 文件本身而不是依赖于共享 Git 存储库之外的用户环境的解决方案。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2016-12-04T22:52:15.223

这是我想出的用于自动化 GnuPG 密钥管理的技巧，提示 heredoc +`--command-fd 0`就像魔术一样。下面是为帮助 GnuPG 实现自动化而编写的脚本之一的精简版。

```
#!/usr/bin/env bash
## First argument should be a file path or key id
Var_gnupg_import_key="${1}"
## Second argument should be an integer
Var_gnupg_import_key_trust="${2:-1}"
## Point to preferred default key server
Var_gnupg_key_server="${3:-hkp://keys.gnupg.net}"
Func_import_gnupg_key_edit_trust(){
    _gnupg_import_key="${1:-${Var_gnupg_import_key}}"
    gpg --no-tty --command-fd 0 --edit-key ${_gnupg_import_key} <<EOF
trust
${Var_gnupg_import_key_trust}
quit
EOF
}
Func_import_gnupg_key(){
    _gnupg_import_key="${1:-${Var_gnupg_import_key}}"
    if [ -f "${_gnupg_import_key}" ]; then
        echo "# ${0##*/} reports: importing key file [${_gnupg_import_key}]"
        gpg --no-tty --command-fd 0 --import ${_gnupg_import_key} <<EOF
trust
${Var_gnupg_import_key_trust}
quit
EOF
    else
        _grep_string='not found on keyserver'
        gpg --dry-run --batch --search-keys ${_gnupg_import_key} --keyserver ${Var_gnupg_key_server} | grep -qE "${_grep_string}"
        _exit_status=$?
        if [ "${_exit_status}" != "0" ]; then
            _key_fingerprint="$(gpg --no-tty --batch --dry-run --search-keys ${_gnupg_import_key} | awk '/key /{print $5}' | tail -n1)"
            _key_fingerprint="${_key_fingerprint//,/}"
            if [ "${#_key_fingerprint}" != "0" ]; then
                echo "# ${0##*/} reports: importing key [${_key_fingerprint}] from keyserver [${Var_gnupg_key_server}]"
                gpg --keyserver ${Var_gnupg_key_server} --recv-keys ${_key_fingerprint}
                Func_import_gnupg_key_edit_trust "${_gnupg_import_key}"
            else
                echo "# ${0##*/} reports: error no public key [${_gnupg_import_key}] as file or on key server [${Var_gnupg_key_server}]"
            fi
        else
            echo "# ${0##*/} reports: error no public key [${_gnupg_import_key}] as file or on key server [${Var_gnupg_key_server}]"
        fi
    fi
}
if [ "${#Var_gnupg_import_key}" != "0" ]; then
    Func_import_gnupg_key "${Var_gnupg_import_key}"
else
    echo "# ${0##*/} needs a key to import."
    exit 1
fi 
```

运行`script_name.sh 'path/to/key' '1'`或`script_name.sh 'key-id' '1'`导入密钥并分配信任值`1`或编辑所有值`script_name.sh 'path/to/key' '1' 'hkp://preferred.key.server'`

加密现在应该没有投诉，但即使这样做，以下`--always-trust`选项也应该允许加密，即使有投诉。

```
gpg --no-tty --batch --always-trust -e some_file -r some_recipient -o some_file.gpg 
```

如果您希望看到这一点，请检查[Travis-CI](https://travis-ci.org/S0AndS0/Perinoid_Pipes)构建日志以及帮助脚本[GnuPG_Gen_Key.sh](https://github.com/S0AndS0/Perinoid_Pipes/blob/master/Script_Helpers/GnuPG_Gen_Key.sh)如何用于在同一操作中生成和导入密钥...此帮助脚本的第二版将更加清晰并且可以修改，但这是一个很好的起点。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-10-29T23:24:41.830

我想，我想办法做到这一点。我使用“gpg --import-ownertrust”将我的信任数据库导出到一个文本文件中，然后从中删除了我的所有密钥，除了我需要推送的公钥。然后将我的公钥和编辑的所有者信任文件导入服务器。这似乎工作。现在我无法在 Kickstart 文件中执行这些步骤：-(

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2017-09-16T13:32:10.463

使用 powershell，以下是如何信任`john.doe@foo.bar`（改编自 @tersmitten 博客文章）：

```
(gpg --fingerprint john.doe@foo.bar | out-string)  -match 'fingerprint = (.+)'
$fingerprint = $Matches[1] -replace '\s'
"${fingerprint}:6:" | gpg --import-ownertrust 
```

注意：使用`cinst gpg4win-vanilla`

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2019-11-27T23:18:54.737

这个 oneliner 使用来自 STDIN 的 ownertrust 值更新 trustdb——通过将指纹提取为`--import-ownertrust`flag 所需的格式。

如 gpg 手册页中所述，应使用此标志。*如果 trustdb 严重损坏和/或如果您最近备份了 ownertrust 值，您可以重新创建 trustdb*。

```
gpg --list-keys --fingerprint \
    | grep ^pub -A 1 \
    | tail -1 \
    | tr -d ' ' \
    | awk 'BEGIN { FS = "\n" } ; { print $1":6:" }' \
    | gpg --import-ownertrust 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2019-03-29T14:22:33.253

基于 Unix：

```
echo -e "5\ny\n" |  gpg --homedir . --command-fd 0 --expert --edit-key user@exaple.com trust; 
```

欲了解更多信息，请阅读[这篇文章](https://raymii.org/s/articles/GPG_noninteractive_batch_sign_trust_and_send_gnupg_keys.html)。如果您要创建多个密钥，它会详细说明。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2018-12-21T14:57:41.050

有一种使用 --edit-key 自动信任密钥的方法，但无需进入交互式 shell（因此可以在脚本中自动化）。以下是 Windows 的示例：

```
(echo trust &echo 5 &echo y &echo quit) | gpg --command-fd 0 --edit-key your@email.com 
```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2020-08-22T21:21:56.950

信任导入的 gpg 密钥的一种方法：

```
gpg --import <user-id.keyfile>
fpr=`gpg --with-colons --fingerprint <user-id> |awk -F: '$1 == "fpr" {print$10; exit}'`
gpg --export-ownertrust && echo $fpr:6: |gpg --import-ownertrust 
```

在这里，我假设您使用`<user-id>`from导入密钥`<user-id.keyfile>`。第二行只提取指纹，如果你事先知道指纹，你可以放下它。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-12-27T12:05:00.520

我使用以下脚本导入密钥：

```
#!/bin/bash
function usage() {
cat >&2 <<EOF
    Usage: $0 path_of_private_key
    Example: gpg_import.sh ~/.ssh/my_gpg_private.key
    Import gpg key with trust.
EOF
exit 1
}

[[ $# -lt 1 ]] && usage
KEY_PATH=$1

KEY_ID=$(gpg --list-packets ${KEY_PATH}/${GPG_PRIVATE_KEY} | awk '/keyid:/{ print $2 }' | head -1)

gpg --import ${KEY_PATH}/${GPG_PRIVATE_KEY}

(echo trust &echo 5 &echo y &echo quit) | gpg --command-fd 0 --edit-key $KEY_ID 
```

* * *

## 回答 #15

> 赞同：-2
> 
> 时间：2020-05-13T15:26:24.433

尝试这个 ：

```
(echo trust &echo 5 &echo y &echo quit &echo save) | gpg --homedir 'gpgDirectory/' --batch --command-fd 0 --edit-key 'youKey'

--homedir : not required 
```

# java - Android Smack 客户端离线

> ID：13116461
> 
> 赞同：3
> 
> 时间：2012-10-29T05:45:51.467
> 
> 标签：java, android, openfire

我有跨平台通信需求 [聊天]。

所以我使用了 XMPP 协议，但有时我的 Smack Android 客户端会自动离线

服务器详情：

操作系统：Linux

XMPP 服务器：Openfire 3.7.1

用于通信的 Android 端 Smack API [聊天]

在服务器端，我已经配置了所有的东西，比如在“空闲连接策略”中永远不会断开客户端

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-13T14:04:04.570

现在在最新的 4.1.0 中，我们有连接配置。更多详细信息的调试日志。

试试下面的。

```
// Create a connection
XMPPTCPConnectionConfiguration connConfig = XMPPTCPConnectionConfiguration.builder()
            .setServiceName(SERVICE)
            .setUsernameAndPassword(USERNAME, PASSWORD)
            .setDebuggerEnabled(true).build();

XMPPTCPConnection connection = new XMPPTCPConnection(connConfig); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-29T06:06:24.417

尝试在客户端启用 SMACK 日志，也许你会看到一些东西

```
XmppConnectionFactory.setDebug(true) 
```

# ios - presentViewController 黑色背景而不是透明

> ID：13116469
> 
> 赞同：8
> 
> 时间：2012-10-29T05:46:51.947
> 
> 标签：ios, ios5, ios6

我有一个希望以标准方式呈现给用户的视图（从屏幕底部向上滑动）。这个视图的大约一半是透明背景，下半部分有一些输入字段（想象一下键盘弹出的方式）。当我调用`[self presentViewController]`rootViewController 时，它会向上滑动视图，但大约半秒后，视图过去是透明的，它被替换为黑色。presentViewController 和 presentModalViewController 都会发生这种情况。如何改变这种行为？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2015-03-26T11:49:54.643

[这是可能的， rockybalboa](http://www.raywenderlich.com)在 raywenderlich.com的论坛帖子中提供了解决此问题的方法：

[iOS 8 UIModalPresentationCurrentContext 不透明？](http://www.raywenderlich.com/forums/viewtopic.php?f=2&t=18661)

该解决方案是在Objective-C中引用balboa的答案：

> 在 iOS 8 之前，您可以这样做：

```
[backgroundViewController setModalPresentationStyle:UIModalPresentationCurrentContext];
[backgroundViewController presentViewController:_myMoreAppsViewController animated:NO completion:nil]; 
```

> 在 iOS 8 中，您必须这样做：

```
backgroundViewController.providesPresentationContextTransitionStyle = YES;
backgroundController.definesPresentationContext = YES;
[overlayViewController setModalPresentationStyle:UIModalPresentationOverCurrentContext]; 
```

用等效的 Swift 补充上面的代码：

```
backgroundViewController.providesPresentationContextTransitionStyle = true
backgroundController.definesPresentationContext = true
overlayViewController.modalPresentationStyle = .OverCurrentContext 
```

在带有 Swift 1.2 的 iOS 8.1 上使用 Xcode 6.3 beta 3 实现了这一点，它运行良好。

只是在查找和尝试 Ray Wenderlich 论坛解决方案之前，我查看了三个不同的 SO 问题（*最近的现在标记为重复）的评论。*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-29T05:57:37.087

据我所知，当您呈现模型视图控制器时，不支持透明背景。尝试将控制器保留在您的根视图控制器中，并将子视图添加到根视图控制器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T03:28:37.643

最后，它看起来不可能是透明的，我通过将此视图添加为根视图控制器边界之外的子视图来解决这个问题，然后使用动画块将其滑动到位。没有太多额外的代码，但如果能够使用标准的 iOS 行为来做到这一点，那就太好了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-15T20:51:14.453

在使用

```
 Disclaimer *vc = [[Disclaimer alloc]init]; 
```

为我解决问题的是在 IB 中创建一个相应的对象并使用它的故事板 ID 实例化视图控制器：

```
 Disclaimer *vc = (Disclaimer *)[self.storyboard instantiateViewControllerWithIdentifier:@"SBIDDisclaimer"];
[self presentViewController:vc animated:YES completion:nil]; 
```

我猜想通过 IB 做一些额外的初始化。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-02-26T12:28:48.323

使用 SWIFT 4，只需将此代码添加到您想要具有透明背景的视图控制器中。

```
override func viewDidLoad()
{
    super.viewDidLoad()
    self.modalPresentationStyle = .overFullScreen
    self.view.backgroundColor = UIColor.clear

} 
```

# android - Cordova 多页应用程序 - onDeviceReady 将包含在所有页面中

> ID：13116470
> 
> 赞同：1
> 
> 时间：2012-10-29T05:47:02.693
> 
> 标签：android, html, cordova

我正在为 Android 开发多页 Cordova Phone 应用程序。我正在使用 cordova.2.1 。好像我需要在我的应用程序的所有页面中包含回调函数 - **onDeviceReady** ()

两个问题

1.  如果我需要在所有页面中初始化cordova，会对性能产生什么影响

2.  有没有解决方法，所以我只需要在我的第一页和后续页面中进行回调，我可以直接调用cordova.exec

感谢您的建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T17:46:48.687

性能影响肯定会变慢，因为您的页面每次都会尝试检查您的 Cordova 是否可以使用。（对这种现象有自己的经验）。

如果您要在所有页面上使用cordova，那么您需要在这些页面上包含 ondeviceready 回调。

附加信息：[http ://comments.gmane.org/gmane.comp.handhelds.phonegap/8460](http://comments.gmane.org/gmane.comp.handhelds.phonegap/8460)

# c# - NHibernate 3.3：在 Id 中将类型设置为 Ansistring 以便通过代码进行映射

> ID：13116472
> 
> 赞同：1
> 
> 时间：2012-10-29T05:47:07.107
> 
> 标签：c#, nhibernate, orm, mapping-by-code

我正在映射以下实体：

```
public class PersonEntity
{
    public virtual string PersonId { get; set; }

    public virtual String Salutation { get; set; }
    public virtual String FirstName { get; set; }
    public virtual String LastName { get; set; }
    public virtual DateTime Birthdate { get; set; }
}

public class PersonMap : ClassMapping<PersonEntity>
{
    public PersonMap()
    {
        //ComponentAsId(i => i.Key, map => map.Property(p => p.PersonId, m => m.Type(NHibernateUtil.AnsiString)));

        Id(i => i.PersonId, map => map.Type(???)));
        Property(i => i.Salutation);
        Property(i => i.FirstName);
        Property(i => i.LastName);
        Property(i => i.Birthdate);
    }
} 
```

正如您在注释掉的代码中看到的那样，当使用组件作为 Id 时，我可以使用 NHibernateUtil 将类型设置为 AnsiString。但是我无法弄清楚在普通的 Id 映射中要做什么。

我试过使用`new NHibernate.Type.AnsiStringType()`，但这抱怨没有为它定义构造函数。

有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T17:13:47.433

我必须将 AnsiStringType 显式转换为 IIdentifierType 并设置长度属性。

```
 Id(x => x.Id,
       m =>
       {
           m.Generator(Generators.Assigned);
           m.Type((IIdentifierType)TypeFactory.GetAnsiStringType(16));
           m.Length(16);
       }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T19:55:37.283

采用`NHibernate.Type.TypeFactory.GetAnsiStringType(someLength)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-14T06:10:59.063

NHibernate.Type.TypeFactory.GetAnsiStringType(someLength) 在 SetParameterList() 的情况下不起作用，所以我将其更改为 NHibernateUtil.AnsiString。这将参数更改为 varchar(8000) 仍然可以，而不是 nvarchar(4000) 导致执行计划选择发生变化的问题。

# java - 重定向到 AJAX URL

> ID：13116474
> 
> 赞同：0
> 
> 时间：2012-10-29T05:47:13.910
> 
> 标签：java, ajax, jsp, servlets

必须重定向到以下网址：

```
AjaxView1?catalogId=12345&storeId=67890&List=123#AjaxView2?ListId=123&storeId=67890&catalogId=12345 
```

我将此值作为隐藏参数传递给表单并从 java 类重定向。不知何故，AJAX 视图没有被拾取。它正在重定向到前者`AJAXView1`。

您能否建议我需要更改的内容，以便将其重定向到第二个 AJAX 视图“ `Ajaxiew2`”。

我想知道，它将如何处理 URL 重定向中的 # 符号。

**编辑**

我有一个表单，我从中传递 URL 的隐藏参数值。

```
<form name ="LogonList" action="someActionCode"  method="post">
<input type="hidden" name="storeId" value="67890">
<input type="hidden" name="URL" value="AjaxView1?catalogId=12345&storeId=67890&List=123#AjaxView2?ListId=123&storeId=67890&catalogId=12345 >
<input type="submit" value="Submit"/> 
```

someActionCode 将调用一个 java 类，该类将执行一些业务逻辑，在执行业务逻辑后，它将重定向 URL 到作为隐藏参数传递的 URL。

我想知道，它将如何处理`URLredirection`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T10:27:32.863

将第二个 url 作为隐藏值传递，首先执行 firstURL 工作，然后执行以下任一操作。

```
response.sendRedirect("/url2"); 
```

或根据您想要的情况使用这个

```
String destination = "url2";
RequestDispatcher rd = getServletContext().getRequestDispatcher(destination);
rd.forward(request, response); 
```

或根据您想要的情况使用这个

```
String destination = "url2";
RequestDispatcher rd = getServletContext().getRequestDispatcher(destination);
rd.include(request, response); 
```

# iphone - 在 iphone 的 UIScrollView 中滚动图像

> ID：13116478
> 
> 赞同：0
> 
> 时间：2012-10-29T05:47:35.987
> 
> 标签：iphone, image, scroll

我正在工作一个应用程序。在这个随机数的时间图像是滚动的..然后停止图像..在我的代码中，第一个随机数是生成的，它存储在 n..例如。随机否生成 12 次，然后滚动 12 次图像，然后停止..

```
- (void)viewDidLoad
{
int n = 1 + arc4random() % 10 + 10;

    NSString *string = [NSString stringWithFormat:@"%i",n];

    //lbl.text = string;

    NSUInteger i;
    for (i = 1; i <= kNumImages; i++)
    {

       // [kNumImages addObject:[NSNumber numberWithInt:i]];
        NSString *imageName = [NSString stringWithFormat:@"%d.png", i];
        UIImage *image = [UIImage imageNamed:imageName];
        UIImageView *imageView = [[UIImageView alloc] initWithImage:image];
        CGRect rect = imageView.frame;
        rect.size.height = kScrollObjHeight;
        rect.size.width = kScrollObjWidth;
        imageView.frame = rect;
        imageView.tag = i;  
        lbl.text = string;
        [FirstScrollView addSubview:imageView];
        [imageView release];

        if(n == i){
          break;       

    }

} 
```

我想在随机不匹配时停止滚动意味着`n == i`我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T06:18:36.720

[firstScrollView setContentOffset:CGRectMake(n*firstScrollView.frame.size.width,firstScrollView.frame.size.height)];

您只需要设置滚动视图的内容偏移量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T06:06:17.053

尝试这个，

```
- (void)viewDidLoad
{
int n = 1 + arc4random() % 10 + 10;

    NSString *string = [NSString stringWithFormat:@"%i",n];

    //lbl.text = string;

    NSUInteger i;
    for (i = 1; i <= kNumImages; i++)
    {
        if(n == i)
          break;
        else {

       // [kNumImages addObject:[NSNumber numberWithInt:i]];
        NSString *imageName = [NSString stringWithFormat:@"%d.png", i];
        UIImage *image = [UIImage imageNamed:imageName];
        UIImageView *imageView = [[UIImageView alloc] initWithImage:image];
        CGRect rect = imageView.frame;
        rect.size.height = kScrollObjHeight;
        rect.size.width = kScrollObjWidth;
        imageView.frame = rect;
        imageView.tag = i;  
        lbl.text = string;
        [FirstScrollView addSubview:imageView];
        [imageView release];

          }    

    }

} 
```

# php - 使用 Web 服务访问共享点 2007 列表

> ID：13116479
> 
> 赞同：0
> 
> 时间：2012-10-29T05:47:39.370
> 
> 标签：php, web-services, sharepoint, sharepoint-2007

我想在 Web 服务 API 的帮助下访问共享点 2007 列表。我更喜欢的语言是 PHP。我该怎么做呢。我该如何启动它。任何帮助表示赞赏。有人可以对此提供一些见解，因为我是新来的分享点。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T08:24:45.013

你有没有尝试过什么？

这个论坛是为了帮助那些已经开始但被卡住的人。

这对您来说可能是一个很好的起点

[http://www.robertkuzma.com/2011/07/manipulating-sharepoint-list-items-with-php/](http://www.robertkuzma.com/2011/07/manipulating-sharepoint-list-items-with-php/)

作为一项建议，我总是会在谷歌上搜索一下，看看你是否能找到你要找的东西，似乎有很多例子可以让你回到这里，说我正在这样做，但不是确定为什么它不起作用。

# c - 将 argv 的每个值与一个字符串连接起来

> ID：13116483
> 
> 赞同：1
> 
> 时间：2012-10-29T05:48:21.553
> 
> 标签：c, concatenation, argv

我正在开发一个 C 程序，它获取命令行参数并向它们附加文件扩展名。

执行将是这样的： `>myprogram file1 file2` 并将执行另一个程序，该程序将用作参数`file1.txt`和`file2.txt`. 我尝试这样做会添加扩展名并运行一个命令（s1 是路径，s2`argv[i]`在循环中：

```
int getfile(char *s1, char *s2){
char *str2 = malloc(sizeof(s2)+3);
strcpy(str2,s2);
strcat(str2,".txt");
execl(s1,"program",str2,NULL);
exit(0); 
} 
```

该函数将为一个文件（`>program file1.txt`和`>program file2.txt`）运行程序，但我需要找到一种以这种方式运行它的方法（`>program file1.txt file2.txt`）。

我尝试直接修改argv，但没有成功。

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T06:05:01.437

试试这个代码：

```
int main(int argc, char *argv[])
{
   char *buffer;
   char command[512];
   int i = 1;
   for(i = 1; i < argc; i++){
     buffer = malloc(strlen(argv[i]) + 5);
     strcpy(buffer,argv[i]);
     strcat(buffer,".txt");
     sprintf(command,"touch %s\0",buffer);
     system(command);
     free(buffer);
  }
  return 0;
} 
```

一个没有错误检查的简单程序，我喜欢显式添加字符串终止符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-18T16:55:24.993

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>

int main(int argc, int *argv[]){
    if(argc==1){
        printf("You have not entered anything!\n"); 
        return 0; 
    }
    char *arr=malloc(1000*sizeof(char));
    int i; 
    strcat(arr, argv[0]);
    strcat(arr, " ");  
    for(i=0;i<argc-1;i++){
        strcat(arr,argv[i+1]); 
        strcat(arr,".txt"); 
        strcat(arr," "); 

        strcat(arr,"\0"); 
    }

    printf("%s\n",arr);
    free(arr); 
    return 0; 

} 
```

# objective-c - 注册CallBackHandler IOS应用，SUP，Xcode

> ID：13116484
> 
> 赞同：1
> 
> 时间：2012-10-29T05:48:28.277
> 
> 标签：objective-c, ios, xcode4.2, sup

我们正在按照 infocentersybase 中提到的步骤进行操作。我们需要注册一个回调来检索信息。即，以下步骤

**要配置应用程序以同步和检索 MBO 数据，您必须启动客户端引擎、配置物理设备设置、侦听来自服务器的消息并订阅包。

1.  注册回调。

开发任务流 开发人员指南：iOS 原生应用程序 13 客户端框架使用回调机制在消息从服务器到达时通知应用程序。发送的一些事件示例包括登录成功或失败、订阅成功或失败或对 MBO 的更改。通过执行注册回调对象：

> `MyCallbackHandler* theCallbackHandler = [MyCallbackHandler new]; [SampleApp_SampleAppDB registerCallbackHandler:theCallbackhandler];`

我们有`SUPCallBackHandler.h`文件并且`SUPDefaultCallBackHandler.h`在公共目录中。所以我们应该在哪里写对应的.m文件。请帮助我们。如果问题不清楚，请阅读上述步骤，并解释这是什么意思。请帮助我们。

# android - 列表视图和单选按钮问题

> ID：13116485
> 
> 赞同：0
> 
> 时间：2012-10-29T05:48:31.820
> 
> 标签：android, listview, radio-button

> **可能重复：**
> [通过列表视图检查动态生成的复选框时出现问题](https://stackoverflow.com/questions/7738527/getting-an-issue-while-checking-the-dynamically-generated-checkbox-through-list)

我正在开发一个 android 应用程序。我的列表视图中有 2 个单选按钮和 5 个复选框。如果我在第一个列表项中选择了单选按钮，则第三个和第五个单选按钮也被选中..与复选框的情况相同..任何解决方案..我试图设置标签。但是没有用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T05:56:52.993

将这两种方法添加到您的自定义适配器中，可能会解决您的问题。

```
@Override
public int getViewTypeCount() {
    // TODO Auto-generated method stub
    return mName.size();
}

@Override
public int getItemViewType(int position) {
    // TODO Auto-generated method stub
    return position;
} 
```

# php - PHP：将一种日期格式转换为另一种用于动态传入数据格式

> ID：13116487
> 
> 赞同：0
> 
> 时间：2012-10-29T05:48:32.973
> 
> 标签：php

我的申请有问题。我必须将到达日期字符串转换为服务器日期格式。所以我计划将日期和日期格式一起发送到模型类。像

```
$requiredFormat='Y-m-d';
Function($givenDate,$givenFormat){
//convert given date to yyyy-mm-dd format
return $yyyy-mm-dd;
} 
```

我的模型有不同类型的客户端，我的 Web 客户端使用一种格式，而我的移动客户端使用另一种格式，所以我决定发送日期格式和日期。

我不能使用 strtotime 函数，因为不同调用的格式可能不同。 **所需的函数将获得 2 个参数 (arrivedDate,arrivedDateFormat) 并使用这 2 个参数，将arrivedDate 转换为 YYYY-mm-dd 格式** 所以请给我最好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T05:54:15.907

我认为你应该使用[`strtotime`](http://php.net/manual/en/function.strtotime.php).

就像是：

```
echo date('YY "-" mm "-" dd', strtotime($givenDate)); 
```

如果您向我们展示`$givenDate`它的外观，那将是一件好事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T06:05:20.143

用这个

```
Function mydate($givenDate,$givenFormat){
return date($givenFormat,strtotime($givenDate));
} 
```

根据需要使用您的格式，例如`"Y-m-D" or "yyyy-mm-dd"`

并调用functin

```
 echo mydate("29-oct-2012","Y-m-d"); 
```

观看**[现场演示](http://codepad.org/qbtuyOva)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T08:47:19.173

最后我得到了我需要的功能

```
 function convertDate($givenDate,$givenFormat)
{
    $date = DateTime::createFromFormat($givenFormat, $givenDate);
    $ret= $date->format('Y-m-d');
    return $ret;
} 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-10-29T05:57:59.587

像这样写函数。编辑：根据评论更正

```
function getDate($givenDate,$givenFormat){
//convert given date to yyyy-mm-dd format
$newdate = date($givenFormat, strtotime($givenDate));
return $newdate;
} 
```

# c++ - 将 gcov 与 CMake/Cash 结合使用的详细指南？

> ID：13116488
> 
> 赞同：55
> 
> 时间：2012-10-29T05:48:33.957
> 
> 标签：c++, testing, cmake, code-coverage, cdash

我在我的项目中使用 CMake，并设置了一个 cdash 服务器以进行连续/夜间构建。一切正常，通过设置 crontab，我们每小时/每晚的构建/测试结果会自动上传到我们的 cdash 服务器。

我的下一步是将测试覆盖率报告添加到构建中。我在这里找到了文档[http://www.cmake.org/Wiki/CTest:Coverage](http://www.cmake.org/Wiki/CTest:Coverage)但坦率地说它离实用指南有点远。

目前我已经添加了 required 标志（而不是`-fprofile-arcs -ftest-coverage`，我觉得`--coverage`更好），编译过程会生成 .gcno 文件。但后来我被困住了。命令

```
make NightlyCoverage 
```

似乎什么也没做。谁能告诉我下一步该做什么？我想要的结果`make NightlyCoverage`是生成覆盖率报告并将其上传到 cdash 服务器。

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2013-05-14T06:22:07.163

我一直在成功使用[https://github.com/bilke/cmake-modules/blob/master/CodeCoverage.cmake](https://github.com/bilke/cmake-modules/blob/master/CodeCoverage.cmake)。

只需遵循指南：将文件添加到我的`CMAKE_MODULE_PATH`目录中，添加

```
set(CMAKE_MODULE_PATH ${PROJECT_SOURCE_DIR}/CMakeModules)
if(CMAKE_COMPILER_IS_GNUCXX)
    include(CodeCoverage)
    setup_target_for_coverage(${PROJECT_NAME}_coverage ${PROJECT_TEST_NAME} coverage)
endif() 
```

在我的`CMakeLists.txt`. 我还手动添加了`gcov`作为目标的依赖项：

```
if(CMAKE_COMPILER_IS_GNUCXX)
    target_link_libraries(${PROJECT_TEST_NAME} gcov)
endif() 
```

有了这个，我只需输入

```
make my_project_coverage 
```

`coverage`我在构建树的目录中获得了 html 报告。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2017-09-15T06:23:05.690

我`gcovr`用来制作没有以下内容的**GCC 代码覆盖率报告**`CodeCoverage.cmake`：

```
$ cd /path/to/your/project
$ mkdir build && cd build && cmake ..
$ make && make test
$ gcovr -r ../ . 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2019-01-02T09:45:09.200

我通过以下方式设置我的项目“foo”。将 cmake 文件从[https://github.com/bilke/cmake-modules/blob/master/CodeCoverage.cmake](https://github.com/bilke/cmake-modules/blob/master/CodeCoverage.cmake)复制到子目录“cmake_modules”。在 CMakeLists.txt 文件中，`add_executable(foo ...)`我添加了以下内容：

```
if(CMAKE_COMPILER_IS_GNUCXX)
LIST(APPEND CMAKE_MODULE_PATH "${PROJECT_SOURCE_DIR}/cmake_modules")
include(CodeCoverage)
APPEND_COVERAGE_COMPILER_FLAGS()
set(COVERAGE_LCOV_EXCLUDES 'dir1/*' 'dir2/*') // this is optional if you want to exclude some directory from the report
SETUP_TARGET_FOR_COVERAGE_LCOV(NAME foo_coverage
                              EXECUTABLE foo
                              DEPENDENCIES foo)
endif() 
```

在cmake之后，构建目标 make make foo_coverage 并用构建文件夹中的 foo_coverage 文件夹中的 index.html 文件打开报告

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-07-04T14:39:30.850

这个答案与@romblen 的答案相同，但有点过时，所以我将分享我的解决方案。这是我所做的：

1.  创建了一个玩具项目

```
(base) ciaran@DESKTOP-K0APGUV:/mnt/d/CoverageTest$ tree -L 2
.
├── CMakeLists.txt
├── cmake
│   └── CodeCoverage.cmake
├── src
│   ├── domath.cpp
│   ├── domath.h
│   └── testdomath.cpp
└── third_party
    └── googletest 
```

在哪里

```
// src/domath.h

#ifndef COVERAGETEST_DOMATH_H
#define COVERAGETEST_DOMATH_H

class domath {

public:
    int add(int a, int b);
};

#endif //COVERAGETEST_DOMATH_H 
```

和

```
// src/domath.cpp

#include "domath.h"

int domath::add(int a, int b) {
    return a + b;
} 
```

和

```
// src/testdomath.cpp
#include "gtest/gtest.h"
#include "domath.h"

TEST(DoMathTests, testAdd){
    domath m;
    int actual = m.add(4, 6);
    ASSERT_EQ(10, actual);
} 
```

2.  下载 googletest 并将其放在第三方目录下
3.  将这个线程上其他答案所分享的[要点](https://gist.github.com/oneamtu/3734295)复制到`cmake/CodeCoverage.cmake`
4.  安装`gcovr`. 此步骤至关重要，因为此线程上的其他答案不再适用于`gcovr`我已经拥有的版本：

```
(base) ciaran@DESKTOP-K0APGUV:/mnt/d/CoverageTest$ pip install gcovr
(base) ciaran@DESKTOP-K0APGUV:/mnt/d/CoverageTest$ gcovr --version
gcovr 4.2
(base) ciaran@DESKTOP-K0APGUV:/mnt/d/CoverageTest$ which gcovr
/home/ciaran/miniconda3/bin/gcovr 
```

注意，我们需要`gcovr`cmake 脚本的输出。4) 编写一个创建库、测试可执行文件并使用`CodeCoverage.cmake`模块的 cmake 脚本：

```
cmake_minimum_required(VERSION 3.15)
project(CoverageTest)

set(CMAKE_CXX_STANDARD 14)

# setup googletest
add_subdirectory(third_party/googletest)

# create our library
add_library(DoMath STATIC src/domath.h src/domath.cpp)
add_dependencies(DoMath gtest gtest_main)

# create the test executable
add_executable(TestDoMath src/testdomath.cpp)
target_include_directories(TestDoMath PRIVATE third_party/googletest/googletest)
target_link_libraries(TestDoMath PRIVATE
        DoMath gtest gtest_main)
add_dependencies(TestDoMath DoMath gtest gtest_main)

# now for coverage bits
set(CMAKE_MODULE_PATH ${PROJECT_SOURCE_DIR}/cmake)
if (CMAKE_COMPILER_IS_GNUCXX)
    include(CodeCoverage)
    append_coverage_compiler_flags()

    # we need to turn off optimization for non-skewed coverage reports
    set(CMAKE_CXX_FLAGS  "${CMAKE_CXX_FLAGS} -O0")
    set(CMAKE_C_FLAGS "${CMAKE_C_FLAGS} -O0")

    # optional excludes - None needed here
    #    set(COVERAGE_EXCLUDES)

    # importantly, set the path to the gcovr executable that you downladed
    set(GCOVR_PATH "/home/ciaran/miniconda3/bin/gcovr")
    # Works
    setup_target_for_coverage_gcovr_xml(
            NAME TestDoMathCoverageXml
            EXECUTABLE TestDoMath
            DEPENDENCIES TestDoMath DoMath
    )
    # Works
    setup_target_for_coverage_gcovr_html(
            NAME TestDoMathCoverageHtml
            EXECUTABLE TestDoMath
            DEPENDENCIES TestDoMath DoMath
    )
    # This one did not work for me:
    setup_target_for_coverage_lcov(
            NAME TestDoMathCoverageLcov
            EXECUTABLE TestDoMath
            DEPENDENCIES TestDoMath DoMath
    )
endif () 
```

就是这样。现在只需构建新目标。

祝你好运。

# javascript - 不同的href标识

> ID：13116491
> 
> 赞同：0
> 
> 时间：2012-10-29T05:48:50.123
> 
> 标签：javascript, jquery

任何人都可以告诉我，这三件事有什么不同。

```
if ( document.location.href.indexOf('#Work') > -1 ) {
    $('#elementID').animate({"left": "250"}, "slow");
} 
```

```
 if ( document.location.href.indexOf('#Work') > 0 ) {
    $('#elementID').animate({"left": "250"}, "slow");
} 
```

```
if ( document.location.href.indexOf('#Work') != -1 ) {
    $('#elementID').animate({"left": "250"}, "slow");
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T05:52:14.737

“IndexOf”方法将返回在其父级中找到字符串的位置整数。**在这种情况下， document.location.href**中的“#Work”

 **1.  "> -1" 找到字符串时返回。

2.  "> 0" 在第一个字符之后找到字符串时返回

3.  "!= -1" 找到字符串时返回，与位置无关（与 #1 相同）

顺便说一句 - 这是核心 Javascript 而不是 Jquery。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T05:50:24.893

第一个和第三个例子几乎相同。`indexOf`仅`-1`在找不到子字符串时返回，因此它们的工作方式相同。

当`href="#Work"`. `#Work`从字符串中的第一个字符开始，所以`indexOf`会返回`0`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T05:57:13.260

javascript indexOf() 方法返回指定值在字符串中第一次出现的位置，如果要搜索的值从未出现，则返回 -1。所以从技术上讲，第一个和第三个是等价的。如果要搜索的值出现在字符串的开头，第二个将无法按预期工作。**

# c - 编译需要做什么？

> ID：13116493
> 
> 赞同：-3
> 
> 时间：2012-10-29T05:49:07.843
> 
> 标签：c

获取此代码的一些编译器/ lint 错误。不明白他们的意思，不起作用

```
int main(void)
{
    int CountRating();

    return 0;
} 
```

错误：

```
--- Module:   
    int CountRating();
c(70): warning 937: (Note -- old-style function declaration for function 'CountRating')
.c(70): warning 580: (Warning -- Redeclaration of function 'CountRating(void)' (hiding line 25) causes loss of prototype)
}
C1A5E1_CountRating.c(73): warning 752: (Info -- local declarator 'CountRating()' (line 70) not referenced)

--- Global Wrap-up

(70): warning 714: (Info -- Symbol 'CountRating(void)' (line 70, file c) not referenced) 
```

作品：

```
int main(void)
{
    CountRating();

    return 0;
} 
```

我该怎么做才能让它返回一个int？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T05:53:40.600

```
int CountRating(); 
```

表示您正在声明一个函数原型。它可以在函数内完成，但应该避免。（不是最佳实践）。`(int CountRating()`您收到警告，因为原型与实际函数vs不匹配`int CountRating(void)`。

```
CountRating(); 
```

表示您正在从另一个方法调用此函数，这是完全允许的。因此没有警告。

如果要从函数中获取 returnrd 值，请执行以下操作：

```
int value = CountRating(); 
```

# android - 在android的autocompletetextview中显示Web服务的输入值

> ID：13116496
> 
> 赞同：0
> 
> 时间：2012-10-29T05:49:18.173
> 
> 标签：android, autocompletetextview

我现在正在使用一项 Web 服务。如果我提供正确的输入值，此 Web 服务将返回一些字符串值。我的要求是，我需要在 android 的 AutoCompleteTextView 中显示这些输入值。

*例如：*

假设我的 Web 服务有输入值，例如“AX”、“AB”、“B”、“CC”、“CX”、“D”等等。这里我需要在 AutocompleteTextView 中显示这些输入值安卓。

**注意：**我不想在 AutoCompleteTextView 中以字符串格式对这些输入值进行硬编码，因为这些输入值将每天更新。这样就没有硬编码的意义了，不是吗？

请提出建议！

感谢您宝贵的时间！..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T12:20:42.630

这是您可以从服务中以字符串数据的形式获取数据的方式。

```
public String getDataFromService()
{
    try {
        HttpClient httpClient=new DefaultHttpClient();
        HttpGet httpGet=new HttpGet(yourserviceURLgoeshere);
        HttpResponse httpResponse=httpClient.execute(httpGet);
        HttpEntity entity = httpResponse.getEntity();
        is=entity.getContent();
    } catch (ClientProtocolException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    return parseExecutedRequest();
}

private String parseExecutedRequest()
{
    try {
        BufferedReader bufferedReader=new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8);
        StringBuilder stringBuilder=new StringBuilder();
        String line=null;

        while((line=bufferedReader.readLine())!=null)
        {
            stringBuilder.append(line+ "\n");
        }

        is.close();
        result=stringBuilder.toString();
    } catch (UnsupportedEncodingException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    return result;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T05:52:35.137

您必须创建一个 ArrayList 并填充您从 Web 服务获得的数据，并使用您创建的 ArrayList 将适配器 设置**为****AutoCompleteTextView**。

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T05:53:07.837

如果输入值，则在此创建数组并将其绑定到 AutoCompleteTextView。这是示例[单击此](http://www.androidaspect.com/2012/06/autocompletetextview-example.html)**

# iphone - Tapgesture 不工作

> ID：13116501
> 
> 赞同：0
> 
> 时间：2012-10-29T05:49:55.800
> 
> 标签：iphone, ios, uitapgesturerecognizer

我已经创建了一个标签并在其上设置了点击手势，但是当我点击它时它会显示错误。

我的代码是 .h 文件

```
@interface ViewController : UIViewController
{
    UILabel *alabel;
}
@property (strong, nonatomic) UILabel *alabel; 
```

在 .m 文件中

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    alabel = [[UILabel alloc] initWithFrame:CGRectMake(10, 10, 100, 50)];
    alabel.text = @"Drag me!";

    alabel.userInteractionEnabled = YES;

    UITapGestureRecognizer *tapGesture =[[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(labelTap)];
    [alabel addGestureRecognizer:tapGesture];

    [self.view addSubview:alabel];
}

- (void)labelTap:(UITapGestureRecognizer *)tapGesture {
    TouchLabelViewController *touchLabelViewController = [[TouchLabelViewController alloc] initWithNibName:@"TouchLabelViewController" bundle:[NSBundle mainBundle]];
    [self presentModalViewController:touchLabelViewController animated:NO];
    } 
```

日志显示

```
2012-10-29 11:19:17.313 DragableControll[795:f803] -[ViewController labelTap]: unrecognized selector sent to instance 0x68956b0
2012-10-29 11:19:17.316 DragableControll[795:f803] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[ViewController labelTap]: unrecognized selector sent to instance 0x68956b0' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T05:58:02.580

查看您的代码，您错误地将选择器添加到点击手势

```
 UITapGestureRecognizer *tapGesture =[[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(labelTap)]; 
```

你应该这样做

```
 UITapGestureRecognizer *tapGesture =[[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(labelTap:)]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T05:55:57.183

您`selector`的添加不正确。您忘记了需要提供参数的选择器方法：最后即（labelTap :)

**编辑**：用我的替换你的线

```
UITapGestureRecognizer *tapGesture =[[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(labelTap:)]; 
```

`UIGestureDelegate`在 .h 文件中注册

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T05:59:24.250

替换下面的代码

```
UITapGestureRecognizer *tapGesture =[[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(labelTap:)]; 
```

注意：在labelTab附近添加冒号即**（labelTap :)**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T06:06:07.150

在此处更改代码

```
TapGestureRecognizer alloc] initWithTarget:self action:@selector(labelTap:)]; 
```

你已经设置了选择器**(labeltap)**但它应该是**(labeltap :)**

# mysql - Mysql innerjoin 子句不起作用

> ID：13116504
> 
> 赞同：1
> 
> 时间：2012-10-29T05:50:06.327
> 
> 标签：mysql, sql

我有2个表如下：

**`talk`表**：

```
topic_id | topic_name | user_id (user who create topic)
  1           test1        1
  2           test2        2 
```

**`talk_reply`表**：

```
talk_reply_id | message | topic_id | user_id (user who reply to specific topic)
     1            hi1        1         3
     2            hi2        1         4 
```

**`user`表**：

```
user_id  | name
  1        mark
  2        pedro
  3        gates
  4        steve 
```

我的查询如下：

```
SELECT `tr`.`message`, 
       `tr`.`user_id`, 
       `tr`.`topic_id`,  
       `u`.`name` 
FROM `talk_reply` AS `tr`
INNER JOIN `users` AS `u` ON tr.user_id = u.user_id WHERE (tr.topic_id=1) 
```

但我只得到 1 个结果而不是 2 个，我在这里缺少什么？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T05:57:00.327

```
SELECT t.topic_id, t.user_id, u.name, tr.message
FROM talk t
INNER JOIN talk_reply tr ON tr.topic_id = t.topic_id
INNER JOIN users u ON u.user_id = t.user_id
WHERE t.topic_id = '1' 
```

**更新**

```
SELECT tr.topic_id, tr.user_id, u.name, tr.message
FROM talk_reply tr
INNER JOIN users u ON u.user_id = tr.user_id
WHERE tr.topic_id = '1' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T06:05:26.603

```
SELECT tr.`message`, 
       tr.`user_id`, 
       tr.`topic_id`,  
       (select u.`name` from users u where u.user_id = tr.user_id) name
FROM `talk_reply` as tr
WHERE tr.topic_id=1 
```

[**SQLFIDDLE 演示**](http://sqlfiddle.com/#!2/4988b/6)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T07:01:28.020

```
select a.topic_id, a.user_id,b.message,c.name 
from talk a 
inner join talk_reply.b on a.topic_id=b.topic.id
inner join users c on c.user_id=a.user_id 
where t.topic_id=1; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T05:54:56.293

用这个：

```
SELECT `tr`.`message`, 
       `tr`.`user_id`, 
       `tr`.`topic_id`,  
       `u`.`name` 
FROM `talk_reply` AS `tr`
AND `users` AS `u` 
WHERE tr.user_id = u.user_id AND (tr.topic_id=1) 
```

# c++ - 如何使用 C++ win32 API 获取密码到期日期？

> ID：13116505
> 
> 赞同：0
> 
> 时间：2012-10-29T05:50:09.733
> 
> 标签：c++, windows, winapi, active-directory

我正在使用带有 win32 Api 的 C++，并且我想获取使用 ADSI 的用户的密码到期日期。

```
CoInitialize(NULL);

LPWSTR pszADsPath=L"LDAP://CN=arjun,CN=Users,DC=raja,DC=com";
//HRESULT hr;
IADsUser *pUser;

hr = ADsGetObject(pszADsPath, IID_IADsUser, (void**) &pUser);
if(SUCCEEDED(hr))
{
    DATE expirationDate;
    VariantInit(&var);
    hr = pUser->get_PasswordLastChanged(&expirationDate);
    hr = pUser->get_PasswordExpirationDate(&expirationDate);

    if (SUCCEEDED(hr))
        VariantTimeToSystemTime(expirationDate,&lpExpirationDate);

    pUser->Release();
} 
```

调用`get_PasswordLastChanged`将成功并返回上次更改密码的日期，但我需要到期日期。

使用`get_PasswordExpirationDate`，我得到`S_OK`（成功），但它也给出了一个错误代码`-2147463155`。

谁能解释出了什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T05:59:33.287

该错误转换为 ADS_PROPERTY_NOT_FOUND。会不会是这个用户的密码没有过期？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-02-09T13:21:39.460

我知道这是一篇旧帖子，但我寻找了同样的东西并找到了这篇帖子，对我来说，OP 的代码（稍作改动）有效。我添加了 ldap url 并使用端口 636。以防万一有人搜索相同的东西：

```
CCoInitialize CoInitialize;

if( !CoInitialize.IsSuccessful() )
{
    stringstream Text;
    Text << L"CoInitialize returned <" << CoInitialize.GetMessage() << L">" << endl;
    this->WriteLogThreadSafe( Text.str() );

    // Continue anyway because it could be it was already initialized.
}

LPWSTR pszADsPath=L"LDAP://<YOUR LDAP SERVER>:636/<YOUR DN>";
//HRESULT hr;
IADsUser *pUser;

HRESULT hr = ADsGetObject(pszADsPath, IID_IADsUser, (void**) &pUser);
if(SUCCEEDED(hr))
{
    SYSTEMTIME SystemTime = {};
    DATE expirationDate = {};
    VARIANTARG var = {};
    VariantInit(&var);
    hr = pUser->get_PasswordLastChanged(&expirationDate);
    hr = pUser->get_PasswordExpirationDate(&expirationDate);

    if (SUCCEEDED(hr))
        VariantTimeToSystemTime( expirationDate,&SystemTime );

    pUser->Release();
} 
```

# vb.net - 如何在 vb.net 中使用计时器

> ID：13116506
> 
> 赞同：-1
> 
> 时间：2012-10-29T05:50:10.883
> 
> 标签：vb.net

**我有这个代码：**

```
Private Sub Timer1_Tick(sender As Object, e As EventArgs) Handles Timer1.Tick
        Dim num As String
        Dim message As String
        Dim name As String
        message = txtMessage.Text
        Dim count As Integer = Me.TblContactsBindingSource.Count
        If i < TblContactsDataGridView.Rows.Count - 1 Then 'stay within bounds

        i = i + 1 ' for all rows except Row0

        TblContactsDataGridView.Rows(i - 1).DefaultCellStyle.BackColor = Color.White ' restore previous highlight
        TblContactsDataGridView.Rows(i).DefaultCellStyle.BackColor = Color.Bisque 'new highlight
        num = Me.TblContactsDataGridView.Rows(i).Cells(1).Value.ToString()
        name = Me.TblContactsDataGridView.Rows(i).Cells(0).Value.ToString()
        If SerialPort1.IsOpen() Then
            SerialPort1.Write("AT" & vbCrLf)
            SerialPort1.Write("AT+CMGF=1" & vbCrLf)

            SerialPort1.Write("AT+CMGS=" & Chr(34) & num & Chr(34) & vbCrLf)
            SerialPort1.Write(message & Chr(26))
            MessageBox.Show("Message has been successfully sent to " & vbNewLine & name & " (" & num & ") ", "Message Sent", MessageBoxButtons.OK, MessageBoxIcon.Information)

        End If

    Else            'next row is off the bottom so
        'i = 0       'reset index
        'TblSmsDataGridView.Rows(TblSmsDataGridView.Rows.Count - 1).DefaultCellStyle.BackColor = Color.White 'restore bottom row
        'TblSmsDataGridView.Rows(i).DefaultCellStyle.BackColor = Color.Bisque 'highlight top row  

    End If 
```

**在命令按钮中，我有这个：**

```
Timer1.Interval = 2000
Timer1.Enabled = True 'no need to enable it and start it; one or t'other 
```

发生的情况是，消息框一遍又一遍地出现。完成后如何触发消息框自动关闭？我在“else”中注释了代码，因为它一遍又一遍地重复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T05:54:40.330

您必须使用自定义消息框。普通的消息框不会做你想做的事。它将每 2 秒弹出一次。最好的选择是创建一个新表单并将其显示为消息框。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T05:57:47.110

您需要`timer1.enabled = false`在 timer1.tick 处理程序中进行设置。

# postgresql - PostgreSQL 无法在 Windows XP 上启动

> ID：13116511
> 
> 赞同：0
> 
> 时间：2012-10-29T05:50:46.490
> 
> 标签：postgresql, service, windows-xp

我正在尝试针对 PostgreSQL 数据库设置运行 Ruby on Rails 的 Windows XP 测试代理。我已经使用默认设置安装了适用于 Windows 的 PostgreSQL 9.2。但是，当我尝试从服务控制面板启动服务时，会出现以下错误消息（与我尝试将其设置为哪个用户无关）：

```
 The postgres-9.2 -PostgreSQL Server 9.2 service on Local Computer started and then stopped. Some services 
   stop automatically if they have work to do, for example, the Performance Logs and Alerts service. 
```

如果我尝试从命令行启动它（无论是 cmd.exe 还是 git bash 都无关紧要）：

```
 E:\PostgreSQL\9.2\bin\pg_ctl.exe start  -D E:\PostgreSQL\9.2\data 
```

它将声称：

```
 server starting 
```

但是它将无法启动（rake db:migrate 将报告服务器未运行，任务管理器中缺少 postgresql 进程，服务在服务列表中列为关闭，并且

```
 E:\PostgreSQL\9.2\bin\pg_ctl.exe stop  -D E:\PostgreSQL\9.2\data 
```

将报告

```
 pg_ctl: PID file "E:/PostgreSQL/9.2/data/postmaster.pid" does not exist Is server running? 
```

尝试通过 pg_ctl 将其作为服务器启动时：

```
 E:\PostgreSQL\9.2\bin\pg_ctl.exe runservice  -D E:\PostgreSQL\9.2\data 
```

失败：

```
 pg_ctl: could not start service PostgreSQL: error code 1063 
```

编辑：

pg_hba 的内容：

```
 # TYPE  DATABASE        USER            ADDRESS                 METHOD
 local   all             all                all                  trust
 # IPv4 local connections:
 host    all             all                all                  trust
 host    all             all             127.0.0.1/32            trust
 # IPv6 local connections:
 #host    all             all             ::1/128                trust
 # Allow replication connections from localhost, by a user with the
 # replication privilege.
 #host    replication     all                all                 trust
 #host    replication     postgres        127.0.0.1/32           trust
 #host    replication     postgres        ::1/128                trust 
```

根据以下评论检查 pg_log：

```
 2012-10-28 22:47:44 PDT LOG:  local connections are not supported by this build
 2012-10-28 22:47:44 PDT CONTEXT:  line 78 of configuration file "E:/PostgreSQL/9.2/data/pg_hba.conf"
 2012-10-28 22:47:44 PDT FATAL:  could not load pg_hba.conf 
```

第 78 行是

```
 local   all             all                all                  trust 
```

作为服务运行时（无论是通过 pg_ctl runservice 还是从服务控制面板），仍然会发生相同的错误。然而 pg_ctl start 现在启动 postgres 没有发生任何事件。

我会选择“足够好”

PS：事件日志条目只是说“等待服务器启动超时”

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T06:29:14.947

*更新*修改后的问题：

删除以`pg_hba.conf`开头的行`local`。它们与 PostgreSQL 不支持的 UNIX 套接字连接有关。然后，除非还有其他问题，否则您应该能够启动 PostgreSQL。`pg_hba.conf`很可能您从一个讨论 Mac OS X 或 Linux 上的 PostgreSQL 的站点复制并粘贴了一个`local`支持连接的站点。

如果修复后 Pg 仍然无法启动`pg_hba.conf`，请再次检查日志，看看它还抱怨什么。

顺便说一句，一般来说，我不建议尝试将 PostgreSQL 作为服务和通过`pg_ctl`同一数据目录运行。您可能会遇到难以解决且烦人的文件系统权限问题，尤其是在 Windows 上。

* * *

除了@mvp 的建议之外，您还可能尝试在属于管理员组成员的用户下启动 PostgreSQL。这是不允许的，并且会失败。我不同意这项政策，但目前就是这样。

默认情况下，9.2 设置为在 NetworkService 下运行，所以这应该不是问题。如果您将其配置为在不同的用户帐户下运行，这可能是您的问题，也可能是手动运行时的问题。

更有可能的是，手动启动它时，您只是没有对数据目录的文件系统权限。

顺便说一句，如果`E:\`是 FAT32，那就是你的问题。不支持 FAT32。您必须使用 NTFS。

而不是在黑暗中刺伤，您应该真正查看服务器登录`E:\PostgreSQL\9.2\data\pg_log`和事件查看器以查看导致它无法启动的原因。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-29T05:59:32.843

你一定有权限问题。Windows 上的 PostgreSQL 希望以 postgres 用户身份运行。安装程序将自动创建一个并为其分配新密码。

对此几乎没有解决方案。如果您刚刚安装了这个数据库，那么最简单的解决方案是卸载 Postgres，删除本地 postgres 用户（通过`control userpasswords2`），最后再次安装 Postgres（确保您对此框有管理员权限）。祝你好运！

# javascript - 如何记录多个复选框的选择顺序？

> ID：13116521
> 
> 赞同：0
> 
> 时间：2012-10-29T05:52:00.153
> 
> 标签：javascript, html, forms

看看这个 HTML 例子：

```
<html>
<head>
<title>My Page</title>
</head>
<body>
<form name="myform" action="http://www.mydomain.com/myformhandler.jsp" method="POST">
<div align="center"><br>
<input type="checkbox" name="option1" value="Milk"> Milk<br>
<input type="checkbox" name="option2" value="Butter" checked> Butter<br>
<input type="checkbox" name="option3" value="Cheese"> Cheese<br>
<br>
</div>
</form>
</body>
</html> 
```

以及由此产生的输出：

![在此处输入图像描述](../Images/a9e8626294de29b0186a42989cf3b19d.png)

我希望将***选中***的复选框发送到 servlet，但我也想让***订单***用户选中这些复选框。

例如，用户 A 执行以下操作：***选择 Cheese,select Butter, select Milk*** -> 然后***Cheese,Butter,Milk***将**按此顺序**发送到 servlet 。

如果用户 B 执行以下操作：***选择 Cheese，选择 Butter，取消选择 Butter，选择 Milk，选择 Butter*** -> 那么**Cheese,Milk,Butter**将**按此顺序**发送到 servlet 。

欣赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T06:21:46.317

[在此处](http://jsfiddle.net/dLdgJ/3/)检查复选框顺序的小提琴

我使用了以下**JS 代码**

```
checkedOrder = []
inputList = document.getElementsByTagName('input')
for(var i=0;i<inputList.length;i++) {
    if(inputList[i].type === 'checkbox') {
        inputList[i].onclick = function() {
            if (this.checked) {
                 checkedOrder.push(this.value)            
            } else {
                 checkedOrder.splice(checkedOrder.indexOf(this.value),1) 
            }
            console.log(checkedOrder)
        }    
    }
} 
```

​</p>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T06:49:57.720

来，试试这个。

它维护一个包含所有选项值的数组，以及它们被单击的顺序。它处理页面加载时已经检查项目的情况，方法是任意为它们分配一个递增的索引，以适应它们被单击的顺序。

它处理未选择的项目，它还可以为您提供更多信息，作为我完成它的方式的快乐副作用。例如，您可以获取选择顺序的 2、3、4 值。如果我加载页面，然后在取消选择然后重新选择 Butter 之前选择 Milk，然后选择 Cheese，我会返回值~~2,3,4~~ 2,4,3 - 我可以立即看出最后选择的是 Butter，并且它有以前是第一个选择的项目。可能没用，但对我来说仍然是一个有趣的结果。

```
<!DOCTYPE html>
<html>
<head>
<title>My Page</title>
<style>
#myDiv
{
    border: 1px solid black;
    display: inline-block;
}
</style>
<script>
window.addEventListener('load', mInit, false);
function mInit()
{
    var i, inputList = document.getElementsByTagName('input'), n = inputList.length;
    var cbCount = 0;
    var curOrder = 0;

    for (i=0; i<n; i++)
    {
        if (inputList[i].type == 'checkbox')
        {
            cbCount++;
            var cur = inputList[i];
            cur.addEventListener('change', onCbChange, false);
            var mObj = {val:cur.value, selOrder:0};
            if (cur.checked)
            {
                mObj.selOrder = ++curOrder;
            }
            availOptions.push( mObj );
        }
    }
}

var availOptions = [];  // an array to hold objects - { val, selOrder }

function getItem(value)
{
    var i, n = availOptions.length;
    for (i=0; i<n; i++)
    {
        if (availOptions[i].val == value)
            return availOptions[i];
    }
    return null;
}

// just clear it's selOrder member
function mUnselect(value)
{
    var Item = getItem(value);
    Item.selOrder = 0;
}

// iterate through the list, find the highest value of selOrder, increment it and set this item's selOrder to that
function mSelect(value)
{
    var i, n = availOptions.length;
    var curMax=0;
    for (i=0; i<n; i++)
    {
        if (availOptions[i].selOrder > curMax)
            curMax = availOptions[i].selOrder;
    }
    curMax++;
    getItem(value).selOrder = curMax;
}

function onCbChange()
{
    if (this.checked)
        mSelect(this.value);
    else
        mUnselect(this.value);
    alert(this.value + ': ' + this.checked);
}

function showCurState()
{
    var i, n=availOptions.length;
    var mStr = '';
    for (i=0; i<n; i++)
        mStr += availOptions[i].val + ", selOrder: " + availOptions[i].selOrder + "\n"
    alert(mStr);
}

</script>

</head>
<body>
<div id='myDiv' align="left">
<br>
<input type="checkbox" name="option1" value="Milk"> Milk<br>
<input type="checkbox" name="option2" value="Butter" checked> Butter<br>
<input type="checkbox" name="option3" value="Cheese"> Cheese<br>
<br>
<input type='button' onclick='showCurState();' value='Show state'/>
</div>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T06:01:35.777

创建一个全局变量来跟踪订单：

```
var selectOrder = 0; 
```

将此函数绑定到输入中的 onclick 事件：

```
function onClickHandler() {
    var senderId = this.id;

    selectOrder = selectOrder + 1;
    document.getElementById(senderId).setAttribute('data-order', selectOrder);
} 
```

这将按照检查的顺序为每个设置一个 data-* （自定义）属性。因此，当您提交表单时，您可以抓住所有复选框并获得订单，`.getAttribute('data-order');` **不要忘记**在提交时重置您的订单，`selectOrder = 0`以便下次重新排序。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-29T06:07:35.057

试试这个代码。这样效果更好

```
 <html>
<head>
<title>My Page</title>
<script type="text/javascript">
var arr=new Array();
function fnc(myid)
{

    if(document.getElementById(myid).checked == true)
    {
        arr.push(document.getElementById(myid).value);
        alert(arr);
    }
    else
    {
        var item1=document.getElementById(myid).value;
        for(i=0;i<2;i++)
        {
            if(arr[i]=item1)
            {
                found=i;
            arr.splice(found,1);
            }
        }
    }

}
</script>
</head>
<body>
<form name="myform" action="http://www.mydomain.com/myformhandler.jsp" method="POST">
<div align="center"><br>
<input type="checkbox" name="option1" value="Milk" id="Milk" onchange="fnc(this.id)"> Milk<br>
<input type="checkbox" name="option2" value="Butter" id="Butter" onchange="fnc(this.id)"> Butter<br>
<input type="checkbox" name="option3" value="Cheese" id="Cheese" onchange="fnc(this.id)"> Cheese<br>
<br>
</div>
</form>
</body>
</html> 
```

# selenium - 在不引发异常的情况下，如何使用 Capybara 和 Selenium 测试 JavaScript 警报是否存在？

> ID：13116529
> 
> 赞同：0
> 
> 时间：2012-10-29T05:53:00.347
> 
> 标签：selenium, capybara

我正在使用 Capybara 和 Selenium 为我正在编写的 Cucumber 功能驱动 Firefox 浏览器。（不是 Cucumber 问题，但碰巧我正在使用 Cucumber。）我有一个步骤：

```
Then /^I should see a confirmation of the change$/ do
  expect{page.driver.browser.switch_to.alert}.not_to raise_exception
end 
```

[（真正的实现会测试异常的类型，并使用一些魔法来确定我看到的确认文本是否正确。为简洁起见，排除了该代码。）]

我的问题是要测试是否存在模式对话框，我可能必须引发异常。从哲学上讲，这是一个问题，因为这不是异常行为。这是简单的东西。

Selenium中有一个`#is_alert_present`方法，但似乎没有任何方法可以访问它：

*   `page.driver`给我一个[`Capybara::Selenium::Driver`](https://github.com/jnicklas/capybara/blob/be672f3dcfa9a314188416286edd62a0963e6be9/lib/capybara/selenium/driver.rb#L11)。
*   `page.driver.browser`给了我一个`Selenium::WebDriver::Driver`（在我的情况下，它是一个 Firefox 驱动程序）。
*   这些对象似乎都无法访问`Selenium::Client::Base`包含`Selenium::Client::GeneratedDriver`模块的 a ，该模块定义[`#is_alert_present`](http://selenium.googlecode.com/svn/trunk/docs/api/rb/Selenium/Client/GeneratedDriver.html#is_alert_present-instance_method)

在不引发异常的情况下，如何使用 Capybara 和 Selenium 测试 JavaScript 警报是否存在？仅给定 a `Selenium::WebDriver::Driver`，有没有办法访问 a `Selenium::Client:Base`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T18:15:18.410

嗯，我会试试这个：

```
WebDriverWait wait = new WebDriverWait(driver, 300 /*timeout in seconds*/);
 if(wait.until(ExpectedConditions.alertIsPresent())==null)
      return false;
 else
      return true; 
```

`ExpectedConditions`是实现`ExpectedCondition` 接口中定义的有用条件的包装类。

# git - 将文件提交回 GitHub for Windows

> ID：13116532
> 
> 赞同：3
> 
> 时间：2012-10-29T05:53:11.787
> 
> 标签：git, github

[我正在和我的同事一起做一个 Android 项目，他最近在https://github.com](https://github.com)上设置了一个 GitHub 存储库 。最后，我在我的 64 位 Windows 7 机器上下载并安装了 GitHub for Windows。然后我继续前往 GitHub 上的存储库并使用“在 Windows 中克隆”按钮克隆项目。

![在 Windows 中克隆](../Images/d58617c74aa134d912ee7dabd50876c0.png)

一切似乎都很顺利，项目在

```
C:\Android\git-repos\OurProject 
```

在我的机器上。然后我对文件进行了一些更改

```
C:\Android\git-repos\OurProject\Host\Android\src\com\ourproject\client\SettingsActivity.java 
```

然后我观察到更改的文件（以及一些更改的构建文件）确实出现在我机器上的 GitHub 版本上，就像这样

![http://s11.postimage.org/k8o91hq37/changes_on_github.png](../Images/62c35bd94d55236e00c885de0a479aad.png)

我选择了 ' `SettingsActivity.java`' 文件，填写了简短的描述并点击了 ' `Commit`' 按钮。然后我看到了下面的画面

![http://s16.postimage.org/yier6czf9/unsynced_commits.png](../Images/b34eec9a7c403e5381dfc286b64ac2a8.png)

然后，当我点击“同步”

![同步](../Images/be80dc79b284a7aadec544c776e08a01.png)

希望我所做的更改会被推送回主仓库，我收到以下消息

```
unstaged changes
You cannot sync with unstaged changes. Please commit your changes and try again. 
```

为什么我会收到此错误消息？

我确实看过这个线程

[github中的未分级更改是什么？](https://stackoverflow.com/questions/10954329/whats-the-unstaged-changes-in-github)

似乎必须执行以下步骤

1.  混帐添加
2.  git 提交
3.  git 推送

但从这个线程

[GitHub for Windows 的“同步”有什么作用？](https://stackoverflow.com/questions/12104513/what-does-github-for-windows-sync-do)

似乎“同步”按钮可以完成所有三个操作？所以，我不确定如何准确地进行我的提交。我认为我已经提交了我的更改（在上一步中）这一事实意味着我已经上演了它们，这就是提供同步选项的原因。解决此问题的任何帮助将不胜感激。

PS：我还联系了 GitHub 支持团队，并在下面发布了他们的解决方案。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-29T07:12:18.097

只是为了添加 VonC 写的内容......

每次我尝试点击“同步”按钮时，都会显示以下屏幕

![未分阶段的更改](../Images/a6e2e726cf439307c31e77a29056fb63.png)

在阅读了他的建议后，我点击了“Open Shell”并输入

```
git stash 
```

它显示了这样的东西

![电源外壳](../Images/8a2c8219a9ae6a56cac68054413c60fa.png)

在此之后，我能够点击“同步”按钮并且它能够成功同步。

**阅读VonC的评论后添加**

但是，在将该文件成功添加到存储库后，我注意到其他两个构建文件（“BuildConfig.java”和“project.properties”）没有出现在 Windows 的 GitHub 中。所以，在阅读了 VonC 的建议后，我输入了

```
git stash pop 
```

在之前打开的 shell 中，然后这两个文件再次出现在 GitHub for Windows 上。

**收到 GitHub 支持的回复后添加**

不幸的是，当您有未暂存的更改或文件时，您无法同步。但是有一种解决方法：

1.  提交工作目录中的所有内容（使用“WIP”的提交消息或“Work in Progress”的缩写）
2.  同步。
3.  选择“WIP”提交并单击“回滚到此提交”按钮。

当您同步时，会进行本地提交并将其放在您从服务器获得的提交的末尾。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T06:47:47.080

您提交了一个文件，但不是所有文件。
您将无法与工作树同步，包括正在进行的一些更改。
所述更改需要隐藏（仅命令行，根据“ [GitHub - Unsynchronized Commit?](https://stackoverflow.com/questions/8174324/github-unsynchronized-commit) ”），或首先提交（如[本要点](https://gist.github.com/3318347)中所述）。

# c++ - 可以将 unique_ptr 与负索引一起使用而不会泄漏内存吗？

> ID：13116534
> 
> 赞同：1
> 
> 时间：2012-10-29T05:53:18.457
> 
> 标签：c++, memory-leaks, c++11, smart-pointers

我读[了C中是否允许负数组索引？](https://stackoverflow.com/questions/3473675/negative-array-indexes-in-c)并发现有趣的是负值可以用于数组的索引。我用 c++11 再次尝试了它`unique_ptr`，它也可以在那里工作！当然删除器必须替换为可以删除原始数组的东西。这是它的样子：

```
#include <iostream>
#include <memory>

int main()
{
    const int min = -23; // the smaller valid index
    const int max = -21; // the highest valid index
    const auto deleter = [min](char* p)
    {
        delete [](p+min);
    };
    std::unique_ptr<char[],decltype(deleter)> up(new char[max-min+1] - min, deleter);

    // this works as expected
    up[-23] = 'h'; up[-22] = 'i'; up[-21] = 0;
    std::cout << (up.get()-23) << '\n'; // outputs:hi
} 
```

我想知道是否存在内存泄漏的可能性非常小。在堆 ( ) 上创建的内存地址在`new char[max-min+1]`向其添加 23 时可能会溢出并成为空指针。减去 23 仍会产生数组的原始地址，但`unique_ptr`可能会将其识别为空指针。可能不会删除它，`unique_ptr`因为它为空。

那么，之前的代码是否有可能泄漏内存，或者智能指针的行为方式是否安全？

注意：我实际上不会在实际代码中使用它；我只是对它的行为方式感兴趣。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T06:08:31.280

**编辑：** [icepack](https://stackoverflow.com/a/13116720/500104)提出了一个有趣的观点，即在指针算术中只允许两个有效的指针值：

`§5.7 [expr.add] p5`

> 如果指针操作数**和结果**都指向同一个数组对象的元素，或者超过数组对象的最后一个元素，则计算不应产生溢出；**否则，行为是 undefined**。

因此，`new char[N] - min`您的代码已经调用了 UB。

* * *

现在，在大多数实现中，这不会导致问题。但是，的析构函数`std::unique_ptr`将（从这里开始预编辑答案）：

`§20.7.1.2.2 [unique.ptr.single.dtor] p2`

> 效果：如果`get() == nullptr`没有效果。否则`get_deleter()(get())`。

所以是的，如果它确实映射到代表空指针值的任何值（最有可能`0`，但不一定），你就有可能在这里泄漏内存。是的，我知道这是针对单个对象的，但数组 1 的行为完全相同：

`§20.7.1.3 [unique.ptr.runtime] p2`

> 下面仅针对行为不同于主模板的成员函数提供描述。

并且没有关于析构函数的描述。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-29T06:16:32.553

`new char[max-min+1]`不在堆栈上分配内存，而是在堆上分配内存——这就是标准的`operator new`行为方式。该表达式`max-min+1`由编译器评估并产生`3`，因此最终该表达式等于在堆上分配 3 个字节。这里没问题。

但是，减去`min`会导致指针超出所分配内存的开头 23 个字节，`new`并且由于在 new 中您只分配了 3 个字节，这肯定会指向一个不属于您的位置 --> 任何以下内容都将导致未定义的行为.

# android - Android VideoView不播放纵向方向

> ID：13116538
> 
> 赞同：13
> 
> 时间：2012-10-29T05:53:59.037
> 
> 标签：android, orientation, android-videoview, portrait

**平台：** 使用 Android SDK 16 在 Eclipse 中开发。

**问题：** 我有一个 VideoView 元素，它应该以 480x800（纵向）填充整个屏幕，它可以正常播放，但不会定向到纵向。它坚持横向模式，纵横比倾斜以适应这种方式。

**我已经尝试过：**

*   在清单中使用 android:screenOrientation="portrait"
*   在容器和 VideoView 本身中使用 android:orientation="vertical"
*   使用 setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT); 在我调用 setContentView 之前
*   试图将布局宽度和高度设置为 480dpx800dp 而不是 fill_parent
*   试图将 VideoView 的宽度和高度设置为 480px x 800dp 而不是 fill_parent
*   关闭自动旋转显示

**XML：**

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="480dp"
    android:layout_height="800dp"
    android:background="#000000" 
    android:orientation="vertical" > 

    <VideoView
        android:id="@+id/opening_video"
        android:layout_width="480dp"
        android:layout_alignParentRight="true"
        android:layout_alignParentLeft="true" 
        android:layout_alignParentTop="true" 
        android:layout_alignParentBottom="true" 
        android:layout_height="800dp"
        android:orientation="vertical" /> 

    <ImageButton
        android:id="@+id/imageButton1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/transparent_button"
        android:contentDescription="@string/back_button_desc"
        android:background="@android:color/transparent" />

</RelativeLayout> 
```

**编码：**

```
@Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);
        setContentView(R.layout.activity_start_screen);

        VideoView videoView = (VideoView) findViewById(R.id.opening_video);  

        Uri pathToVideo = Uri.parse("android.resource://com.example.consumerengage/" + R.raw.opening_tablet);  
        videoView.setVideoURI(pathToVideo);  
        videoView.setOnPreparedListener(new OnPreparedListener() {
            @Override
            public void onPrepared(MediaPlayer mp) {
                mp.setLooping(true);
            }
        });        

        videoView.requestFocus();  
        videoView.start(); 

       // boolean isPlaying = videoView.isPlaying() ; 

       // videoView.stopPlayback();  
       // videoView.clearFocus(); 

       addListenerOnButton();

    } 
```

**问题：** 我所尝试的一切都没有成功。如何让我的 480x800 视频以纵向播放？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T14:45:34.960

您确定您的视频是 480x800 而不是 800x480？800x480 是标准分辨率，如果您用手机录制纵向视频，输出仍将是 800x480，并且要正常播放，视频应旋转 90 度。您所描述的是如果您尝试在 480x800 videoView 中播放 800x480 视频会发生什么。如果是这种情况，如果您在 Mac 上，您可以使用 Windows Live Moviemaker 或 iMovie 等视频编辑软件旋转它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T19:02:35.263

您正在使用`dp`您应该使用的地方`px`：

```
<VideoView
    android:id="@+id/opening_video"
    android:layout_width="480px"
    android:layout_alignParentRight="true"
    android:layout_alignParentLeft="true" 
    android:layout_alignParentTop="true" 
    android:layout_alignParentBottom="true" 
    android:layout_height="800px"
    android:orientation="vertical" /> 

<ImageButton
    android:id="@+id/imageButton1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:src="@drawable/transparent_button"
    android:contentDescription="@string/back_button_desc"
    android:background="@android:color/transparent" /> 
```

或者，或者（更好） - 只需使用`match_parent`（或`fill_parent`）：

```
<VideoView
    android:id="@+id/opening_video"
    android:layout_width="match_parent"
    android:layout_alignParentRight="true"
    android:layout_alignParentLeft="true" 
    android:layout_alignParentTop="true" 
    android:layout_alignParentBottom="true" 
    android:layout_height="match_parent"
    android:orientation="vertical" /> 

<ImageButton
    android:id="@+id/imageButton1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:src="@drawable/transparent_button"
    android:contentDescription="@string/back_button_desc"
    android:background="@android:color/transparent" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T06:18:45.300

尝试这个：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#000000"> 

    <VideoView
        android:id="@+id/opening_video"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" /> 

    <ImageButton
        android:id="@+id/imageButton1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/transparent_button"
        android:contentDescription="@string/back_button_desc"
        android:background="@android:color/transparent" />

</RelativeLayout> 
```

希望这可以帮助。还要检查你的清单文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-08T21:09:46.450

这就是我最终做的事情：

问题是操作系统版本。如果它是 ICS (4.0) 及更高版本，它将在其一侧播放视频，因此在检测到 android.os.Build.VERSION.SDK_INT 为 14 或更高时，我会加载在其一侧构建的视频，以便播放正确的路。

这是一个非常愚蠢的解决方法，我从来没有真正得到我的问题的答案。视频不应该那样播放。

# facebook - 在 Facebook 上通过帖子嵌入点赞页面操作

> ID：13116542
> 
> 赞同：1
> 
> 时间：2012-10-29T05:54:21.067
> 
> 标签：facebook, facebook-graph-api, facebook-php-sdk

当我们使用 Graph API 在 Facebook 上发布提要时，会传递一个名为“Action”的参数，我们需要在其中传递一个包含操作名称和链接的操作数组。

```
$feed=array(
'message' => "Trial fb post",
    'name' => "trial",
    'caption' => "Trial caption",
    'actions' => array(
        array(
        'name' => 'Give it a try',
            'link' => 'http://www.blinkpot.com/'
            )
    )
    ); 
```

我看到一些帖子有喜欢这个页面的选项，用户可以通过它喜欢相应的页面。如何在我的帖子中附加该操作。

# python - 如何用日志记录模块替换打印调试消息

> ID：13116543
> 
> 赞同：2
> 
> 时间：2012-10-29T05:54:20.783
> 
> 标签：python, logging

到目前为止，我一直在我的代码中添加“打印调试消息”甚至“如果条件：打印调试消息”。但是很多人告诉我这不是最好的方法，我真的应该学习如何使用日志记录模块。快速阅读后，它看起来好像做了我可能想要的一切，然后是一些。它本身看起来像是一个学习项目，我现在想从事其他项目，只需使用最少的功能来帮助我。如果它有什么不同，我在 python 2.6 上，并且由于库和遗留兼容性，将在可预见的未来。

我现在想做的就是在我的代码中添加一些可以逐段打开和关闭的消息，因为我设法调试特定区域。作为“hello_log_world”，我尝试了这个，但它没有达到我的预期

```
import logging

# logging.basicConfig(level=logging.DEBUG)

logging.error('first error')
logging.debug('first debug')

logging.basicConfig(level=logging.DEBUG)

logging.error('second error')
logging.debug('second debug') 
```

你会注意到我使用了非常基本的配置，使用尽可能多的默认值，以保持简单。但似乎它太简单了，或者我不了解日志记录背后的编程模型。

我曾预计 sys.stderr 会以

```
ERROR:root:first error
ERROR:root:second error
DEBUG:root:second debug 
```

...但只出现两条错误消息。设置 level=DEBUG 不会使第二个出现。如果我在程序开始时取消注释 basicConfig 调用，所有四个都会得到输出。

我是否试图以过于简单的级别运行它？

我可以添加到我在那里写的内容中以获得预期行为的最简单的东西是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T06:10:27.923

日志记录实际上遵循特定的层次结构 ( `DEBUG -> INFO -> WARNING -> ERROR -> CRITICAL`)，默认级别是`WARNING`. 因此，您看到两条 ERROR 消息的原因是因为它位于`WARNING`层次结构链的前面。

至于奇怪的评论行为，可以在[日志记录文档](http://docs.python.org/2/library/logging.html#logging.basicConfig)中找到解释（正如你所说的，这对他们自己来说是一项任务:)）：

> 对 basicConfig() 的调用应在对 debug()、info() 等的任何调用之前进行。由于它旨在作为一次性的简单配置工具，因此只有第一个调用实际上会做任何事情：后续调用实际上是无操作的。

但是，您可以使用该`setLevel`参数来获得您想要的：

```
import logging

logging.getLogger().setLevel(logging.ERROR)

logging.error('first error')
logging.debug('first debug')

logging.getLogger().setLevel(logging.DEBUG)

logging.error('second error')
logging.debug('second debug') 
```

缺少参数 to`getLogger()`意味着根记录器已被修改。这基本上是@del（好）答案之前的一步，您开始进入多个记录器，每个记录器都有自己的特定属性/输出级别/等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T06:19:26.720

与其修改代码中的日志记录级别来控制输出，不如考虑创建多个记录器，并分别为每个记录器设置日志记录级别。例如：

```
import logging

first_logger = logging.getLogger('first')
second_logger = logging.getLogger('second')

logging.basicConfig()
first_logger.setLevel(logging.ERROR)
second_logger.setLevel(logging.DEBUG)

first_logger.error('first error')
first_logger.debug('first debug')

second_logger.error('second error')
second_logger.debug('second debug') 
```

这输出：

```
错误：第一个：第一个错误
错误：第二：第二个错误
调试：第二：第二次调试

```

# .net - 使用 Windbg SOS 扩展单步执行源代码

> ID：13116549
> 
> 赞同：8
> 
> 时间：2012-10-29T05:55:02.200
> 
> 标签：.net, debugging, windbg, managed, sos

我最近从本机代码编程切换到托管代码编程。我正在使用.NET。

由于我使用 Windbg 已经有一段时间了，我也想将它用于托管代码调试。

我的搜索把我带到了 SOS（罢工之子）扩展，它似乎有一些非常强大的命令。

尽管我了解 SOS 中使用的大多数命令，但我无法找到正确单步执行源代码的方法，就像我可以对本机代码使用 p 和 t 指令一样。

这使得调试体验变得困难，我真的很想在调试时单步执行代码。

我对此进行了一些研究，发现使用 6.7.05.0 版本的 Windbg 是可能的，其中 MS 似乎已经发布了集成托管调试，但在以后的版本中回滚了。

尽管如此，我对能够在通过 SOS 进行调试时实时单步执行“源”代码非常感兴趣。特别是因为它确实阻碍了我现在的调试体验。

有没有办法做到这一点？

感谢您提供有关如何执行此操作（或实际解决方法）的任何帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-29T13:13:31.480

尝试使用 !sosex.mt 和 !sosex.mgu。'p' 命令应该像宣传的那样工作。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-29T15:28:38.727

Windbg 擅长分析崩溃进程的小型转储。但是，它不是托管调试器。

您可以通过在 Visual Studio 中加载 SOS 来吃蛋糕。这允许使用托管调试器中可用的常规调试工具，以及可以从 SOS 中获得的诊断。有一些限制适用：

*   您必须启用非托管调试，项目+属性，调试选项卡，勾选选项
*   VS 是 32 位进程，因此您只能使用 32 位版本的 SOS。项目 + 属性，构建选项卡，如果您使用的是 64 位版本的 Windows，请确保您已选择 x86。

开始调试并切换到即时窗口。键入`.load sos.dll`，您应该会看到类似`extension C:\Windows\Microsoft.NET\Framework\v4.0.30319\sos.dll loaded`. 键入 !help 并验证您是否看到列出的 SOS 命令。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-16T05:41:48.257

如果您想要将源代码连接到 windbg，您可以按照以下步骤操作：

1.  转到文件-> 源文件路径，选择包含源文件的文件夹。
2.  转到查看->调用堆栈，它将打开一个新窗口。
3.  在调用堆栈中导航并单击相关条目，它将打开一个带有代码浏览器的窗口。

# jquery - 在 div id 或 class 之后限制 Sharebar 浮动

> ID：13116551
> 
> 赞同：3
> 
> 时间：2012-10-29T05:55:05.460
> 
> 标签：jquery, wordpress

我使用了一个名为 Sharebar 的 Wordpress 插件，但由于我想实现一个新主题，我想在它达到某个 div id 或类后阻止它浮动。我已经看到了可以根据底部像素限制它的解决方案，但是由于我有一个评论部分，页脚的大小显然可以变化。这是整个 jQuery 代码供参考。

```
jQuery.fn.sharebar = function(options) {
    var defaults = {horizontal: true, swidth: 65, minwidth: 1000, position: 'left', leftOffset: 20, rightOffset: 10};
    var opts = jQuery.extend(defaults, options); var o = jQuery.meta ? jQuery.extend({}, opts, jQueryjQuery.data()) : opts;

    var w = jQuery(window).width();
    var sharebar = jQuery('#sharebar');
    var sharebarx = jQuery('#sharebarx');
    var parent = jQuery(sharebar).parent().width();
    var start = sharebar_init();

    function sharebar_init(){
        jQuery(sharebar).css('width',o.swidth+'px');
        if (o.position == 'left') jQuery(sharebar).css('marginLeft',(0-o.swidth-o.leftOffset));
        else {
            jQuery(sharebar).css('marginLeft',(parent+o.rightOffset));
        }
        if(w < o.minwidth && o.horizontal) jQuery(sharebarx).slideDown();
        else jQuery(sharebar).fadeIn();
        jQuery.event.add(window, "scroll", sharebar_scroll);
        jQuery.event.add(window, "resize", sharebar_resize);
        return jQuery(sharebar).offset().top;
    }
    function sharebar_resize() {
        var w = jQuery(window).width();
        if(w<o.minwidth){
            jQuery(sharebar).fadeOut();
            if(o.horizontal) jQuery(sharebarx).slideDown();
        }else{
            jQuery(sharebar).fadeIn();
            if(o.horizontal) jQuery(sharebarx).slideUp();
        }
    }
    function sharebar_scroll() {
        var p = jQuery(window).scrollTop();
        var w = jQuery(window).width();
        jQuery(sharebar).css('position',((p+10)>start) ? 'fixed' : 'absolute');
        jQuery(sharebar).css('top',((p+10)>start) ? '10px' : '');
    }

}; 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T06:08:34.900

对于我的一个项目，我使用了包含 Stick Scroll Jquery 插件。它可以根据您的要求完美运行。

[http://blog.echoenduring.com/2010/11/15/freebie-contained-sticky-scroll-jquery-plugin/](http://blog.echoenduring.com/2010/11/15/freebie-contained-sticky-scroll-jquery-plugin/)

试试这个..希望这个帮助！

# java - 浏览器关闭后如何保留会话？

> ID：13116552
> 
> 赞同：3
> 
> 时间：2012-10-29T05:55:14.917
> 
> 标签：java, session, jakarta-ee, tomcat

在 Java EE HttpSession 中，当我将会话超时设置为负数（通过使用 setMaxInactiveInterval）时，我认为即使在浏览器关闭后也应该保留它。但是根据这个页面[Session Lost when close the browser](https://stackoverflow.com/questions/3693180/session-lost-when-closing-the-browser)，似乎没有。

这怎么可能发生？那么我必须使用cookie来存储会话ID吗？那我怎么自己生成这个会话ID呢？如果我自己管理会话，我将失去 HttpSession 的优势。

在这种情况下，我使用的是 Tomcat。大家都是怎么解决这个问题的？有什么最简单的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T06:06:54.787

您可以使用数据库中的标志来检查此人是否已注销，而不是使用 cookie。所以你不必担心过滤器和cookies

确保在用户注销后切换标志。

# php - 将一个多维数组插入另一个多维数组

> ID：13116562
> 
> 赞同：0
> 
> 时间：2012-10-29T05:56:59.427
> 
> 标签：php, multidimensional-array

```
$stack = array(
    'name'           => 'some data',
    'caption'        => 'some data',
    'published'      => 'some data',
    'updated_at'     => 'some data',
    'updated_by'     => 'some data'
);

$data = array('album_id' => 'someID'); 
```

如何将数据数组插入堆栈数组？

更新：我尝试了array_unshift，但它在多维的第二维中插入了 $data 数组，但我希望它与其他数组处于同一级别。

还有一个问题

如果我有另一个数组，比如数据，我想将它插入到第三个位置，我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T06:01:08.603

尝试

```
$stack = $stack + $data; 
```

或者

```
$stack =array_merge($stack, $data); 
```

如果你想添加`$data`到第三个位置`$stack`

```
$chunks = array_chunk($stack, 2, true);
$stack  = array_shift($chunks);
$stack  += $data;
foreach ($chunks as $chunk) { $stack += $chunk; } 
```

# c - 使用 libcurl 在 C 中检索数据

> ID：13116569
> 
> 赞同：2
> 
> 时间：2012-10-29T05:57:32.400
> 
> 标签：c, libcurl

我正在使用 C 和 libcurl 登录网站并从表单中检索一个值（即将字符串“username=random”放入 char 数组）。这是我到目前为止所拥有的：

```
curl = curl_easy_init();
if(curl) {
    curl_easy_setopt(curl, CURLOPT_USERAGENT, "Mozilla/4.0");
    curl_easy_setopt(curl, CURLOPT_AUTOREFERER, 1 );
    curl_easy_setopt(curl, CURLOPT_FOLLOWLOCATION, 1 );
    curl_easy_setopt(curl, CURLOPT_COOKIEFILE, " "); 
    curl_easy_setopt(curl, CURLOPT_URL, "http://www.website.com/login");
    curl_easy_perform(curl);
    curl_easy_setopt(curl, CURLOPT_REFERER, "http://www.website.com/login");
    curl_easy_setopt(curl, CURLOPT_POSTFIELDS,fields );
    curl_easy_perform(curl);
    curl_easy_setopt(curl, CURLOPT_URL, "http://www.website.com/form-with-data");

    res = curl_easy_perform(curl);
    curl_easy_cleanup(curl);

    } 
```

但我不知道从那里去哪里。我尝试将整个页面写入文件，然后手动搜索字符串，但这不起作用。

我确信对此有一个简单的答案，我对 C 和 libcurl 都是新手 :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T06:24:40.870

您当前的代码将做一件事：它将数据写入标准输出。要积累数据，您必须执行以下操作：

```
size_t write_clbk(void *data, size_t blksz, size_t nblk, void *ctx)
{
    static size_t sz = 0;
    size_t currsz = blksz * nblk;

    size_t prevsz = sz;
    sz += currsz;
    void *tmp = realloc(*(char **)ctx, sz);
    if (tmp == NULL) {
        // handle error
        free(*(char **)ctx);
        *(char **)ctx = NULL;
        return 0;
    }
    *(char **)ctx = tmp;

    memcpy(*(char **)ctx + prevsz, data, currsz);
    return currsz;
}

hndl = curl_easy_init();
// Set up the easy handle, i. e. specify URL, user agent, etc.
// Do the ENTIRE setup BEFORE calling `curl_easy_perform()'.
// Afterwards the calls to `curl_easy_setopt()' won't be effective anymore

char *buf = NULL;
curl_easy_setopt(hndl, CURLOPT_WRITEFUNCTION, write_clbk);
curl_easy_setopt(hndl, CURLOPT_WRITEDATA, &buf);
curl_easy_perform(hndl);
curl_easy_cleanup(hndl);

// here `buf' will contain the data
// after use, don't forget:
free(buf); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T06:04:08.343

您熟悉[HTTP](http://en.wikipedia.org/wiki/Http)和[HTML](http://en.wikipedia.org/wiki/Html)吗？您至少应该知道什么是`GET`、`HEAD`和`POST`requests ，以及当用户通过浏览器提交表单时，协议级别究竟发生了什么。您可以通过使用[telnet](http://en.wikipedia.org/wiki/Telnet)并手动键入 HTTP 请求来练习。

然后，您想以`POST`编程方式发出请求。[libcurl](http://curl.haxx.se/libcurl/)有几个例子，你应该看看[postit2.c](http://curl.haxx.se/libcurl/c/postit2.html)

您可能会关注[HTTP cookie](http://en.wikipedia.org/wiki/HTTP_cookie)，并查看[cookie_interface.c](http://curl.haxx.se/libcurl/c/cookie_interface.html)示例。你`CURLOPT_COOKIEFILE`错了（你给了一个由单个空格命名的文件）。

编译时不要忘记启用所有警告和调试信息。如果在 Linux 上，请编译`gcc -Wall -g yourexample.c -lcurl -o yourprog`并改进您的代码，直到没有给出警告。然后学会使用`gdb`调试。

# php - 如果超链接已经在新窗口中打开，则不应点击

> ID：13116570
> 
> 赞同：0
> 
> 时间：2012-10-29T05:57:35.767
> 
> 标签：php, javascript, jquery, html

我的 php 页面中有一个超链接，单击该超链接会在新窗口中打开。但我希望它一次只能在一个窗口中打开，如果它已经在浏览器的新窗口中打开，它应该打开。假设如果我点击 5 次，它会在 5 个新窗口中打开，我只希望它在一个窗口中打开。Mozilla Firefox 出现此问题请帮助我使用 JavaScript 或 Jquery 执行此操作。谢谢，谢谢。很抱歉分享不完整的信息。实际上会通过php代码创建多个链接，这些链接将在不同的窗口中打开。我使用 JavaScript 在不同的窗口中打开它们。我的问题是，如果相同的 url 已经在窗口中打开，或者如果任何 url 被多次单击，它应该只打开一个窗口，则不应再次打开它。这是我的代码：PHP代码

```
<?php 
```

$Class="class='链接'"; $jsfun = 'javascript:openMyLink';

while(condition) { print "点击这里";

} ?>

JS代码：

函数 openMyLink(arg1,arg2,arg3) { var url = "http:///launcher.php?arg1="+arg1+"&arg2="+arg2+"&arg3="+arg3; newwindow = window.open(url, "Mywindow",'height=596, width=795, left=0, top=0, resizable=yes, scrollbars=no, toolbar=no, menubar=no'); }

我尝试将 window.open 的第二个参数也更改为动态而不是“Mywindow”，但它也不起作用。它没有给出 chrome 或 IE 的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T06:43:27.893

如果您只想在单击后在新窗口中打开站点，请使用以下代码...

```
<a id="target" href="javascript:void(0)" onClick="myfunc()">click here</a>
<script type="text/javascript">
x=0;
function myfunc()
{   
    if(x==0)
    {
        x+=1;
        window.open("<--- YOUR SITE URL --->");
    }
}
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T07:11:18.393

On your first page have this code,

```
jQuery(document).ready(function($){

     $("#theLink").click(function(e){
         if($(this).attr("at")=='1')
         { 
              e.preventDefault();
              return false;
         }
  });
}); 
```

and your link should be having an attribute 'at' set to '0' just like

```
<a id="theLink" href="demo.html" target="_blank" at="0">Click here to go away</a> 
```

and let your children or newly opened page have this code.

```
window.opener.$("#theLink").attr("at","1");
$(window).unload(function() {    
   window.opener.$("#theLink").attr("at","0");
}); 
```

This is little tricky but works.

Worked great for me on IE8.

# javascript - 浮动：展开时将下一行 div 块左移到左侧位置

> ID：13116572
> 
> 赞同：2
> 
> 时间：2012-10-29T05:57:43.440
> 
> 标签：javascript, html, css

[在这里](http://jsfiddle.net/techprasad/fJUaD/)查看我的代码。您需要调整结果面板的大小，以便您可以查看至少两个内联块。如果您单击“ `More details`”链接，它将显示详细信息，但也会移动下一行块。

尽管我使用过任何建议，但为什么它会这样显示`clear:both`。

```
.reviewimg_blk {
    border: 1px solid #9B9B9B;
    float: left;
    margin-bottom: 15px;
    margin-right: 15px;
    margin-top: 15px;
    padding: 5px 5px 5px 10px;
    position: relative;
    width: 395px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T06:11:27.570

这是因为`position:relative`. `Position:relative`保持 div 或块的关系，因此下面的块向下移动。在与该下拉部分相关的位置使用`position:absolute`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T06:13:45.413

那是因为你的第一个`itemStyle`div 有更多的内容，所以它比其他 div 占用更多的高度。

因此`<div class="clear"> </div>`，在每两个`itemStyle`div 之后添加或将 min-height 固定到`itemStyle`div。

我在演示中`clear`每两个 div 之后添加了一个类。`itemStyle`

**[演示](http://jsfiddle.net/fJUaD/1/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T06:35:26.630

..***[现场演示](http://jsfiddle.net/fJUaD/4/)***

嗨，现在习惯`Even`和`odd`规则在 css

```
.itemStyle:nth-child(odd) {
clear:left;
    float:left;
} 
```

更多信息[**偶数或奇数**](http://www.w3.org/Style/Examples/007/evenodd.en.html)规则

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T06:45:33.603

这是浮点数的常见问题。

如果您不需要 IE7 支持，请使用`display: inline-block; vertical-align: top;`而不是。`float:left;`

有关跨浏览器解决方案，请参阅[https://blog.mozilla.org/webdev/2009/02/20/cross-browser-inline-block/ 。](https://blog.mozilla.org/webdev/2009/02/20/cross-browser-inline-block/)

# windows - 在 bcdedit 中为 Windows 8 创建启动项

> ID：13116575
> 
> 赞同：1
> 
> 时间：2012-10-29T05:57:48.757
> 
> 标签：windows, bootloader, bcdedit

WI 创建了一个“Windows 8 to go”驱动器并将其（连接到 SATA 端口）连接到 Windows 7 笔记本电脑（而不是 CD 驱动器）。我想修改 Windows 7 引导配置 ( `bcdedit`) 以从另一个驱动器引导 Windows 8。我试图在 中创建一个新条目`bcdedit`，但它会保持加载 Windows 恢复。`device`我创建了 current 和 set和`osdevice`to的副本`partition=E:`。

**问题是**：如何创建正确的引导项？

```
C:\Windows\system32>bcdedit

Windows Boot Manager
--------------------
identifier              {bootmgr}
device                  partition=\Device\HarddiskVolume2
path                    \bootmgr
description             Windows Boot Manager
locale                  en-US
inherit                 {globalsettings}
default                 {current}
resumeobject            {c71c7fc9-e003-11e1-b23d-5c260a473966}
displayorder            {current}
                        {c71c7fce-e003-11e1-b23d-5c260a473966}
toolsdisplayorder       {memdiag}
timeout                 30

Windows Boot Loader
-------------------
identifier              {current}
device                  partition=C:
path                    \Windows\system32\winload.exe
description             Windows 7
locale                  en-US
inherit                 {bootloadersettings}
recoverysequence        {c71c7fcb-e003-11e1-b23d-5c260a473966}
recoveryenabled         Yes
osdevice                partition=C:
systemroot              \Windows
resumeobject            {c71c7fc9-e003-11e1-b23d-5c260a473966}
nx                      OptIn

Windows Boot Loader
-------------------
identifier              {c71c7fce-e003-11e1-b23d-5c260a473966}
device                  partition=E:
path                    \Windows\system32\winload.exe
description             Windows 8
locale                  en-US
inherit                 {bootloadersettings}
recoverysequence        {c71c7fcb-e003-11e1-b23d-5c260a473966}
recoveryenabled         Yes
osdevice                partition=E:
systemroot              \Windows
resumeobject            {c71c7fc9-e003-11e1-b23d-5c260a473966}
nx                      OptIn 
```

ps.：我没有进入bios，所以不能直接开机。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T14:53:30.890

[您可以尝试Visual BCD 包](http://www.boyans.net)中的“双启动修复”工具

运行工具，单击“自动修复”，看看是否会从连接的设备中启动 Windows 8。

如果是，请确认。结果将是一个新的 Windows 8 引导加载程序（以及一个新的引导菜单项）。

不用担心，您当前的 BCD 将被备份以防万一出现问题。请注意纸上的备份位置。

**准备好 Windows 7 恢复 CD/USB 以应对最坏的情况！** （可以使用 bcdedit 恢复/导入 BCD。）

有些人更改启动配置时没有考虑准备好安装/恢复媒体，然后去论坛寻求帮助。

反馈会很棒。

# android - 删除关联通知后前台服务会发生什么情况？

> ID：13116576
> 
> 赞同：0
> 
> 时间：2012-10-29T05:57:57.210
> 
> 标签：android, service

我有一个在前台运行的服务。当用户触摸通知时，我正在寻找一种方法来阻止服务在前台运行。我明白可以通过调用 stopforeground 函数来删除前台服务。我参考了有关前台服务的 android 开发文档，但它没有提及与前台服务相关联的通知被删除时前台服务的行为。所以我的问题是 1）可以通过创建一个通知来停止前台服务，当用户触摸它时清除它？2）如何确定服务不再在前台运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T06:07:19.443

从文档：

```
public final void stopForeground (boolean removeNotification)

Added in API level 5
Remove this service from foreground state, allowing it to be killed if more memory is needed.

Parameters
removeNotification  If true, the notification previously provided to startForeground(int, Notification) will be removed. Otherwise it will remain until a later call removes it (or the service is destroyed). 
```

基本上，它表示如果服务被销毁，那么它的通知也会自动被删除。但是，如果一个服务被简单地停止并且提供的参数是`false`，那么通知将一直存在，直到稍后的调用将其删除或服务被销毁。

因此，在通知的回调中，您可以包含类似的调用`stopForeground(true)`，以便停止服务并删除通知。

# matlab - MATLAB指南针北

> ID：13116586
> 
> 赞同：2
> 
> 时间：2012-10-29T05:59:26.167
> 
> 标签：matlab, plot, matlab-figure

关于 MATLAB 罗盘图，我有一个相当简单的问题。

每当我尝试在 MATLAB 中使用罗盘图绘制方向时，90 度指针总是指向北方。这是因为 MATLAB 中的北参考是 90 度吗？如何更改它以使北参考为 0 度？这是因为我正在使用风速矢量...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T06:35:54.400

生成罗盘图后，尝试：

```
az = 90; % azimuth i.e. rotate around z-axis horizontally by 90 degrees
el = -90; % elevation negative, effectively looking beneath plot
view(az, el); 
```

您也可以使用它`camroll`来执行此操作：

```
camroll(90) 
```

这实际上是顺时针旋转相机看情节，而不是情节本身。因此，如果要将绘图逆时针旋转 90 度，则需要将相机顺时针旋转 90 度...

# c# - FlatRedBall XNA 游戏引擎

> ID：13116590
> 
> 赞同：2
> 
> 时间：2012-10-29T06:00:04.777
> 
> 标签：c#, xna, visual-studio-2012

我计划在我计划制作的下一个游戏中使用 FlatRedBall XNA 引擎，我注意到它生成的 .csproj 文件与 Visual Studios 2012 不兼容。有什么方法可以让 FlatRedBall 合作使用新的 Visual Studios 2012？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T21:38:33.913

一旦您可以获得在 Visual Studio 2012 中运行的普通 XNA 应用程序，FlatRedBall 的 XNA 4.0 实现将在 Visual Studio 中运行。更多信息在这里：

[如何在 Visual Studio 2012 上安装 XNA 游戏工作室？](https://stackoverflow.com/questions/10881005/how-to-install-xna-game-studio-on-visual-studio-2012)

# jquery-mobile - jQuery 移动页面

> ID：13116593
> 
> 赞同：0
> 
> 时间：2012-10-29T06:00:42.517
> 
> 标签：jquery-mobile

我正在为我的移动应用程序使用 jquery mobile。我想制作一个页面`data-role=content` 溢出时应该滚动的页面，但它正在滚动带有页眉和页脚的整个页面。我只想滚动内容 div，并且应该修复页眉和页脚 div。我已经看过 iscrollview 但它只能在 iPhone 或任何其他方式中工作。

请建议我如何制作这个设计。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T07:51:59.103

只需在页眉和页脚中添加一个 data-position="fixed" 即可。检查以下示例：

```
<div data-role="page"> 
    <div data-role="header" data-position="fixed" data-tap-toggle="false">...</div> 
    <div data-role="content">...</div> 
    <div data-role="footer" data-position="fixed" data-tap-toggle="false">...</div> 
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T06:17:22.493

看看[http://cubiq.org/iscroll-4](http://cubiq.org/iscroll-4)；它可能不是 jQuery，但它是一个出色的移动滚动 JavaScript 插件。

您将为每个 UL 添加一个 ID，并分别为每个 UL 添加一个卷轴。

# arrays - 给定未排序的数组，在线性时间和常数空间中找到 i, j 使得 i < j 和 A[i] < A[j]

> ID：13116597
> 
> 赞同：-2
> 
> 时间：2012-10-29T06:01:31.300
> 
> 标签：arrays, algorithm, data-structures

**示例 1：**

输入：5 4 3 2 1

输出：无

**示例 2：**

输入：5 4 3 2 6 1

输出：0、4（索引）

请提出一种算法来在线性时间和恒定额外空间中找到 i、j 和 A[i] < A[j] 的索引。我已经通过`O(n^2)`使用 2 个 for 循环解决了它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-29T06:05:28.193

嗯...我会立即做出一个假设，如果这样`i`和`j`存在，那么也必须存在`i`和`j`这样的`j == i + 1`和`A[i] < A[j]`。如果是这样，该算法就变成了对数组的简单单次传递。

在你的第二个例子中，这将是`i = 3`and `j = 4`。

确实，假设我们找到了`i`和`j`这样的`A[i] < A[j]`和`i + 1 < j`。让我们来看看`A[i + 1]`。如果`A[i + 1]`大于`A[i]`，那么只需设置`j = i + 1`，我们就完成了。否则，如果`A[i + 1]`小于或等于`A[i]`，则只需设置`i = i + 1`并重复。这将始终引导我们找到`j == i + 1`满足`A[i] < A[j]`要求的一对。

换句话说，只需检查您的阵列寻找`A[i] < A[i + 1]`情况。这里的所有都是它的。

# javascript - jquery 两个元素

> ID：13116599
> 
> 赞同：0
> 
> 时间：2012-10-29T06:01:35.530
> 
> 标签：javascript, jquery, html

我是 jquery 和 javascript 的新手。我尝试做两件事，但只有一件在工作。我必须改变颜色，以及增加计数器，如下所述。需要代码方面的帮助。例子 -

```
1 click - 1
2 clicks - 11
5 clicks - 11111 
```

代码 - HTML

```
<div id="flash"> <p>hello</p>
    </div>
<div id="counter">0</div>​ 
```

代码 - JAVASCRIPT

```
$(document).ready(function() {
$('p').click(function() {
    $(this).animate({
        'color': 'rgb(' + (Math.floor(Math.random() * 256)) + ',' + (Math.floor(Math.random() * 256)) + ',' + (Math.floor(Math.random() * 256)) + ')'
    }, 500);
});
$("#flash").click(function() {
    $('#counter').html(function(i, val) {
        return val * 1 + 1;
    });
});
});​ 
```

代码 - CSS

```
p { font-weight: bold; display: inline; cursor: pointer; }​ 
```

这是我尝试使用的代码 - [http://jsfiddle.net/crlf/pVHYc/](http://jsfiddle.net/crlf/pVHYc/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T06:04:32.547

您必须包含 jQueryUI 来为颜色设置动画`.animate()`

对于计数器，您可以将`1`s 连接到它，只需检查它是否是`0`并替换为`1`或连接 a `1`。

```
return val =='0'?1: val + 1; 
```

见[http://jsfiddle.net/pVHYc/6/](http://jsfiddle.net/pVHYc/6/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T06:16:07.973

解决了动画和输出问题。

动画是由于不包括 jquery UI

输出错误，因为您尝试添加但尝试连接

[http://jsfiddle.net/pVHYc/4/](http://jsfiddle.net/pVHYc/4/)

```
$(document).ready(function() {
 $('p').click(function() {
    $(this).animate({
        'color': 'rgb(' + (Math.floor(Math.random() * 256)) + ',' + (Math.floor(Math.random() * 256)) + ',' + (Math.floor(Math.random() * 256)) + ')'
    }, 500);
});
$("#flash").click(function() {
    $('#counter').html(function(i, val) {
        return val * 1 + 1;
    });
});
}); 
```

# scala - 播放框架2：以json字符串为主体测试请求

> ID：13116600
> 
> 赞同：6
> 
> 时间：2012-10-29T06:01:41.973
> 
> 标签：scala, testing, playframework-2.0, specs2

我有以下动作

```
def save() = Action(parse.json) { implicit request =>
  request.body.asOpt[IdeaType].map { ideatype =>
    ideatype.save.fold(
      errors => JsonBadRequest(errors),
      ideatype => Ok(toJson(ideatype))
    )
  }.getOrElse     (JsonBadRequest("Invalid type of idea entity"))
} 
```

我想测试一下

Web 服务可以正常使用 curl，如下所示：

```
curl -X post "http://localhost:9000/api/types" 
--data "{\"name\": \"new name\", \"description\": \"new description\"}" 
--header "Content-type: application/json" 
```

正确返回新资源

```
{"url":"/api/types/9","id":9,"name":"new name","description":"new description"} 
```

我正在尝试用

```
"add a new ideaType, using route POST /api/types" in {
  running(FakeApplication(additionalConfiguration = inMemoryDatabase())) {

    val json = """{"name": "new name", "description": "new description"}"""

    val Some(result) = routeAndCall(
      FakeRequest(
        POST, 
        "/api/types",
        FakeHeaders(Map("Content-Type" -> Seq("application/json"))), 
        json
      )
    )

    status(result) must equalTo(OK)
    contentType(result) must beSome("application/json")
    val Some(ideaType) = parse(contentAsString(result)).asOpt[IdeaType]

    ideaType.name mustEqual "new name"

  }
} 
```

但我收到以下错误：

```
[error] ! add a new ideaType, using route POST /api/types
[error]     ClassCastException: java.lang.String cannot be cast to play.api.libs.json.JsValue (IdeaTypes.bak.scala:35)
[error] controllers.IdeaTypes$$anonfun$save$1.apply(IdeaTypes.bak.scala:36)
[error] controllers.IdeaTypes$$anonfun$save$1.apply(IdeaTypes.bak.scala:35)
[error] play.api.mvc.Action$$anon$1.apply(Action.scala:170) 
```

我遵循了关于这个问题的建议：[Play 2 - Scala FakeRequest withJsonBody](https://stackoverflow.com/questions/11910405/play-2-scala-fakerequest-withjsonbody)

我错过了什么吗？

--

Kim Stebel 解决方案运行良好，但后来我尝试使用 withJsonBody，如下所示：

```
 val jsonString = """{"name": "new name", "description": "new description"}"""
    val json: JsValue = parse(jsonString)

    val Some(result) = routeAndCall(
      FakeRequest(POST, "/api/types").
      withJsonBody(json)
    ) 
```

我收到以下错误：

```
[error] ! add a new ideaType, using route POST /api/types
[error]     ClassCastException: play.api.mvc.AnyContentAsJson cannot be cast to play.api.libs.json.JsValue (IdeaTypes.bak.scala:35)
[error] controllers.IdeaTypes$$anonfun$save$1.apply(IdeaTypes.bak.scala:36)
[error] controllers.IdeaTypes$$anonfun$save$1.apply(IdeaTypes.bak.scala:35) 
```

任何的想法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-29T06:13:51.453

您可能需要传入 a`JsValue`作为请求的正文。换行

```
val json = """{"name": "new name", "description": "new description"}""" 
```

到

```
val jsonString = """{"name": "new name", "description": "new description"}"""
val json = Json.parse(jsonString) 
```

# android - 我们可以通过 USB 数据线通过 USB Host API 将数据传输到 PC 吗？

> ID：13116601
> 
> 赞同：6
> 
> 时间：2012-10-29T06:01:47.290
> 
> 标签：android, usb

请帮助我，

在我的项目中，我需要通过 USB 电缆将数据从 android 设备（3.0 及更高版本）传输到 PC，而不依赖于 USB 调试模式选项（不应选择 USB 调试选项）。

那么这可以通过 USB 主机 API 将数据传输到 PC 吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-18T08:43:52.657

你可以，就像cardock的工作方式一样。
USB主机功能的唯一区别是当android处于主机模式时它提供电源。
这是设备相关的，而不是 API 等级相关的。
但是您不想要主机功能，因为 pc 是主机。
您想处于附件模式。
欲了解更多信息，请查看：[附件模式](http://developer.android.com/guide/topics/connectivity/usb/accessory.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-11T05:54:17.750

您需要有一根 USB 数据传输电缆（也称为 USB 数据链路电缆），该电缆

支持 API 或 SDK，然后使用以下代码：

```
void CU2uDlg::OnOK() 
{
BYTE        buf[65530];
LPU2URET    pU2uRet;
BOOL        bRet;
int         ret;
CString     msgstr;

ret = u2u_open();
if (ret == -1){
    AfxMessageBox("Open U2U device Success.");
}else{
    msgstr.Format("Open U2U device fail，return：%d", ret);
    AfxMessageBox(msgstr);
    return;
}

//send data
bRet = u2u_SendData(buf, 65530, ret);
if(!bRet)
{
    msgstr.Format("Send data error，return：%d", ret);
    AfxMessageBox(msgstr);
    return;
}

//receive data
while (1){
    bRet = u2u_RecvData(recvData, dataLen, ret);
    if( !bRet )
    {
        msgstr.Format("Receive data error，return：%d", ret);
        AfxMessageBox(msgstr);
        u2u_close();
        return;
    }else{
        break;
    }
}
u2u_close();

} 
```

看：

[参考1](http://www.cnblogs.com/LiuKaiFa/p/USB_data_link_cable_API.html) ,[参考2](http://blog.csdn.net/zzkjliu/article/details/12838383)

# c# - “XamlParseException 未处理”

> ID：13116602
> 
> 赞同：1
> 
> 时间：2012-10-29T06:02:11.413
> 
> 标签：c#, .net, wpf

每次运行应用程序时都会遇到此异常。我不知道是什么

> XamlParseException 未处理。
> 
> '调用与指定绑定约束匹配的'chrm.MainWindow'类型的构造函数引发异常。行号“3”和行位置“9”。

我的代码

谷歌浏览器.cs

```
namespace chrm
{
class GoogleChrome
{
    public List<URL> URLs = new List<URL>();
    public IEnumerable<URL> GetHistory()
    {
        // Get Current Users App Data
        string documentsFolder = Environment.GetFolderPath
        (Environment.SpecialFolder.ApplicationData);
        string[] tempstr = documentsFolder.Split('\\');
        string tempstr1 = "";
        documentsFolder += "\\Google\\Chrome\\User Data\\Default";
        if (tempstr[tempstr.Length - 1] != "Local")
        {
            for (int i = 0; i < tempstr.Length - 1; i++)
            {
                tempstr1 += tempstr[i] + "\\";
            }
            documentsFolder = tempstr1 + "Local\\Google\\Chrome\\User Data\\Default";
        }

        // Check if directory exists
        if (Directory.Exists(documentsFolder))
        {
            return ExtractUserHistory(documentsFolder);

        }
        return null;
    }

    IEnumerable<URL> ExtractUserHistory(string folder)
    {
        // Get User history info
        DataTable historyDT = ExtractFromTable("urls", folder);

        // Get visit Time/Data info
        DataTable visitsDT = ExtractFromTable("visits",
        folder);

        // Loop each history entry
        foreach (DataRow row in historyDT.Rows)
        {

            // Obtain URL and Title strings
            string url = row["url"].ToString();
            string title = row["title"].ToString();

            // Create new Entry
            URL u = new URL(url.Replace('\'', ' '),
            title.Replace('\'', ' '),
            "Google Chrome");

            // Add entry to list
            URLs.Add(u);
        }
        // Clear URL History
        DeleteFromTable("urls", folder);
        DeleteFromTable("visits", folder);

        return URLs;
    }

    void DeleteFromTable(string table, string folder)
    {
        SQLiteConnection sql_con;
        SQLiteCommand sql_cmd;

        // FireFox database file
        string dbPath = folder + "\\History";

        // If file exists
        if (File.Exists(dbPath))
        {
            // Data connection
            sql_con = new SQLiteConnection("Data Source=" + dbPath +
            ";Version=3;New=False;Compress=True;");

            // Open the Conn
            sql_con.Open();

            // Delete Query
            string CommandText = "delete from " + table;

            // Create command
            sql_cmd = new SQLiteCommand(CommandText, sql_con);

            sql_cmd.ExecuteNonQuery();

            // Clean up
            sql_con.Close();
        }
    }

     DataTable ExtractFromTable(string table, string folder)
    {
        SQLiteConnection sql_con;
        SQLiteCommand sql_cmd;
        SQLiteDataAdapter DB;
        DataTable DT = new DataTable();

        // FireFox database file
        string dbPath = folder + "\\History";

        // If file exists
        if (File.Exists(dbPath))
        {
            // Data connection
            sql_con = new SQLiteConnection("Data Source=" + dbPath +
            ";Version=3;New=False;Compress=True;");

            // Open the Connection
            sql_con.Open();
            sql_cmd = sql_con.CreateCommand();

            // Select Query
            string CommandText = "select * from " + table;

            // Populate Data Table
            DB = new SQLiteDataAdapter(CommandText, sql_con);
            DB.Fill(DT);

            // Clean up
            sql_con.Close();
        }
        return DT;
    }
}
} 
```

网址.cs

```
namespace chrm
{
class URL
{
    string url;
    string title;
    string browser;
    public URL(string url, string title, string browser)
    {
        this.url = url;
        this.title = title;
        this.browser = browser;
    }

    public string getData()
    {
        return browser + " - " + title + " - " + url;
    }
}
} 
```

最后是 Mainwindow.xaml.cs

```
namespace chrm
{
/// <summary>
/// Interaction logic for MainWindow.xaml
/// </summary>
public partial class MainWindow : Window
{
    GoogleChrome ch = new GoogleChrome();
    public MainWindow()
    {

        InitializeComponent();

        ch.GetHistory();
    }
 }
} 
```

当我将调试放入cs文件时..我看到它不在DataTable ExtractFromTable（字符串表，字符串文件夹）中。所以我只在主窗口中得到错误。

现在做什么？

好的..当我捕捉到它给我的异常时

> System.IO.FileLoadException：混合模式程序集是针对运行时版本“v2.0.50727”构建的，如果没有其他配置信息，则无法在 4.0 运行时中加载。\r\n at chrm.GoogleChrome.ExtractFromTable(String table, String folder )\r\n 在 D:\html5\chrm\chrm\GoogleChrome.cs:line 45\r\n 在 chrm.GoogleChrome.ExtractUserHistory(String folder) 在 D:\html5\chrm \chrm\GoogleChrome.cs:line 35\r\n at chrm.MainWindow..ctor() in D:\html5\chrm\chrm\MainWindow.xaml.cs:line 33

是因为我使用的 dll 是 v2.0 .. 我的应用程序需要 4.0 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T06:31:57.123

根据您的说法`IOException`，我确实会说这是一个错误，因为您在尝试使用针对 .NET 2.0 构建的 DLL 时在 .NET 4.0 中进行编译

尝试在 app.config 文件的配置部分添加它。如果需要，您可以在您的主应用程序或使用上述代码的 DLL 中尝试：

```
<startup useLegacyV2RuntimeActivationPolicy="true">
    <supportedRuntime version="v4.0"/>
</startup> 
```

# android - android:configChanges 选项 -Android

> ID：13116603
> 
> 赞同：2
> 
> 时间：2012-10-29T06:02:30.037
> 
> 标签：android, android-manifest

我知道我们可以将以下值设置为 android:configChanges

```
mcc 
mnc    
touchScreen
keyboardHidden
orientation,etc. 
```

有时我们通过这个`|` 运营商加入他们，但我很困惑加入他们是什么意思。什么变化来了..？请清除我的困惑。

还有你怎么知道通过使用`|`这个操作符会发生什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T06:27:26.897

当你加入

mcc, mnc, touchScreen,keyboardHidden,orientation等

它实际上将`|` 所有参数考虑在一起。

`mcc`就像活动发生变化或`mnc`变化或变化时不应该受到影响一样`screen orientation`。或者`keyboard`弹出或弹出您使用添加的任何参数都`|`将被考虑。

```
mcc

The IMSI mobile country code (MCC) has changed — a SIM has been detected and updated the MCC.

mnc

The IMSI mobile network code (MNC) has changed — a SIM has been detected and updated the MNC.

touchscreen

The touchscreen has changed. (This should never normally happen.) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T06:39:39.837

当运行时发生配置更改时，活动默认关闭并重新启动，但使用这些类型属性声明配置将阻止活动重新启动。

例如，当您`android:configChanges="orientation|keyboardHidden"`在 Manifest 文件中声明 option() 时

1.  `"orientation"`, 使用此属性声明配置将阻止 Activity 重新启动。在其他情况下，您将通知 android 系统您有单独的布局，当布局更改发生时必须绘制它。因此您的 Activity 将删除所有引用之前存储的小部件和值，并使用专为景观设计的布局文件（如果有）重新创建。在布局方向发生之前显示的所有值都可以通过`onSaveInstanceState`和`onRestoreInstanceState`

2.  `"keyboardHidden"`, 隐藏键盘

希望这些要点至少对您有所帮助。

我会尝试在这个主题上添加更多观点。

干杯

# php - 将 PHP 数组作为数组传递给外部 Javascript 函数

> ID：13116604
> 
> 赞同：4
> 
> 时间：2012-10-29T06:02:41.770
> 
> 标签：php, javascript

我正在做一些事情，我需要将一个数组从我的 php 传递给外部 javascript 上的函数。我目前正在做一些测试，看起来像这样：

```
<input type="text" onclick="show_error_message('<?php echo $array_sample ?>')" readonly="readonly"> 
```

javascript函数就是这个：

```
function show_error_message(test) {
alert(test)
} 
```

我的 $array_sample 包含的数据是`array("1","2","3");` 但返回警报将是 Array 并且每当我在传递参数时将其更改`$array_sample`为时，`$array_sample[0]`我都会得到一个数据为 1 作为警报。我想知道如何将整个数组传递给它，以便也由 javascript 中的数组获取。正如你所看到的，我打算将它作为错误处理的弹出消息，这就是为什么我需要它是动态的。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-29T06:08:03.340

采用[`json_encode`](http://php.net/manual/en/function.json-encode.php)

```
onclick='show_error_message(<?php echo  json_encode($array_sample) ?>)' 
```

或者

```
onclick="show_error_message(<?php echo htmlspecialchars(json_encode($array_sample)) ?>)" 
```

注意 php 代码周围没有引号（`'`），这样一个数组文字被传递给`show_error_message`而不是一个字符串。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-29T06:07:40.813

`json_encode()`使用函数将 PHP 数组编码为 json 数据。

并在 Javascript 中用于`JSON.parse()`解析 Json 字符串。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-29T07:22:00.463

下面的代码展示了如何将 php 数组传递给 javascript：

```
<script type="text/javascript">
    function mufunc(a)
    {
        var temp = new Array();
        temp = a.split('~');
        for(i=0;i<temp.length;i++)
        {
            alert(temp[i]); 
        }
    }
</script>

<?php
    $a = array('a','b','c');
    $b = implode("~",$a);
?>
<a href="javascript:void(0)" onClick="mufunc('<?php echo $b; ?>')">Click Here</a> 
```

# php - 使用 PHP 和 Javascript 重新加载数据

> ID：13116611
> 
> 赞同：-3
> 
> 时间：2012-10-29T06:03:45.230
> 
> 标签：php, javascript, mysql

> **可能重复：**
> [使用 Ajax 和 PHP Include 加载内容](https://stackoverflow.com/questions/13118023/loading-content-using-ajax-with-php-include)

所以，我有点问题。我有一个页面，页面中有一个 div，而 div 中有一个 php 的包含。它包括一个实际上用内容填充 div 的页面。现在，我的问题是我想这样做，以便 div 将使用从 MySQL 服务器加载的更多内容进行刷新。我的问题来自页面中的锚链接，并使用（我认为可能是 ajax 是什么？）调用 php 函数从数据库加载更多内容。感谢任何人都可以提供的任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T06:23:21.710

呈现一个 javascript 片段，该片段将在单击该锚点时执行 ajax 发布。在该 php 中，将 div 的 innerHTML 替换为您从 Mysql 加载的内容。

```
 `jQuery(div_id).html(content)` 
```

将用内容替换 div 的 html。

# cuda - CUDA SDK 中的 Reduce3 示例

> ID：13116619
> 
> 赞同：2
> 
> 时间：2012-10-29T06:04:38.837
> 
> 标签：cuda, gpu, nvidia, reduction

我正在阅读 CUDA SDK 中的缩减优化，并且在从 reduce2 到 reduce3 发生的事情之后遇到了问题：

```
/*
    This version uses sequential addressing -- no divergence or bank conflicts.
*/
template <class T>
__global__ void
reduce2(T *g_idata, T *g_odata, unsigned int n)
{
    T *sdata = SharedMemory<T>();

    // load shared mem
    unsigned int tid = threadIdx.x;
    unsigned int i = blockIdx.x*blockDim.x + threadIdx.x;

    sdata[tid] = (i < n) ? g_idata[i] : 0;

    __syncthreads();

    // do reduction in shared mem
    for (unsigned int s=blockDim.x/2; s>0; s>>=1)
    {
        if (tid < s)
        {
            sdata[tid] += sdata[tid + s];
        }

        __syncthreads();
    }

    // write result for this block to global mem
    if (tid == 0) g_odata[blockIdx.x] = sdata[0];
}

/*
This version uses n/2 threads --
it performs the first level of reduction when reading from global memory.
*/
template <class T>
__global__ void
reduce3(T *g_idata, T *g_odata, unsigned int n)
{
    T *sdata = SharedMemory<T>();

    // perform first level of reduction,
    // reading from global memory, writing to shared memory
    unsigned int tid = threadIdx.x;
    unsigned int i = blockIdx.x*(blockDim.x*2) + threadIdx.x;

    T mySum = (i < n) ? g_idata[i] : 0;

    if (i + blockDim.x < n)
        mySum += g_idata[i+blockDim.x];

    sdata[tid] = mySum;
    __syncthreads();

    // do reduction in shared mem
    for (unsigned int s=blockDim.x/2; s>0; s>>=1)
    {
        if (tid < s)
        {
            sdata[tid] = mySum = mySum + sdata[tid + s];
        }

        __syncthreads();
    }

    // write result for this block to global mem
    if (tid == 0) g_odata[blockIdx.x] = sdata[0];
} 
```

我无法想象 reduce3 的第一级减少尝试做什么，或者为什么线程数减少了一半。谁能给我一些指示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T09:53:46.937

两者之间的唯一区别是reduce3在共享内存减少之前执行求和。因此，reduce2 仅从全局内存中加载单个值并将其存储在共享内存中：

```
// load shared mem
unsigned int tid = threadIdx.x;
unsigned int i = blockIdx.x*blockDim.x + threadIdx.x;

sdata[tid] = (i < n) ? g_idata[i] : 0; 
```

reduce3 加载*两个*值，将它们相加，然后将结果存储在共享内存中：

```
unsigned int tid = threadIdx.x;
unsigned int i = blockIdx.x*(blockDim.x*2) + threadIdx.x;

T mySum = (i < n) ? g_idata[i] : 0;

if (i + blockDim.x < n)
    mySum += g_idata[i+blockDim.x];

sdata[tid] = mySum;
__syncthreads(); 
```

因为标准“2 的幂”减少的第一级是在共享内存减少之前由每个线程完成的，所以所需的线程总数是 reduce2 的一半。您还应该注意，reduce2 中使用的一半线程实际上被浪费了——它们只将数据加载到共享内存中，根本不参与缩减。因此，reduce3 将它们移除并使用更少的线程来执行相同的操作。

如果您继续浏览代码的版本，您会看到这个想法扩展到其逻辑结论，其中每个线程在将结果存储到共享内存并执行缩减之前加载并求和许多值。在内存带宽受限的操作中可以提高效率，例如通过使用更少的线程来减少，允许将每个线程的大部分设置开销分摊到更多的输入值上，并减少内存控制器资源的争用。

# windows-8 - Windows 8：在 Windows 8 上运行的服务器和在同一台 Windows 8 PC 上运行应用程序的问题

> ID：13116624
> 
> 赞同：0
> 
> 时间：2012-10-29T06:05:13.323
> 
> 标签：windows-8

我正在尝试在 Windows 8 上运行服务器并在同一台 Windows 8 PC 上运行应用程序。该应用程序获得了 PC 的 IP，以便它连接到该服务器，但连接没有发生。但是，如果我从 2 台不同的 Windows 8 PC 运行服务器和应用程序，它就可以正常工作。

我的应用程序正在尝试通过此服务守护程序服务器连接到 XMPP 服务器（就像一个中间代理服务器）

可能是什么原因？是设置问题吗？

以下是日志：

```
'sample_app.exe' (Win32): Loaded 'D:\LIBRA_WINRT_REL_V_0_1\RAClient_Intf_8_10_12 \Debug\sample_app\AppX\sample_app.exe'. Symbols loaded.

'sample_app.exe' (Win32): Loaded 'C:\Windows\SysWOW64\ntdll.dll'. Cannot find or open the PDB file.

'sample_app.exe' (Win32): Loaded 'C:\Windows\SysWOW64\kernel32.dll'. Cannot find or open the PDB file.

'sample_app.exe' (Win32): Loaded 'C:\Windows\SysWOW64\KernelBase.dll'. Cannot find or open the PDB file.

 'sample_app.exe' (Win32): Loaded 'C:\Program Files\WindowsApps\Microsoft.VCLibs.110.Debug_11.0.50522.1_x86__8wekyb3d8bbwe\vccorlib110d.d     ll'. Symbols loaded.

 'sample_app.exe' (Win32): Loaded 'C:\Windows\SysWOW64\combase.dll'. Cannot find or open the PDB file.

'sample_app.exe' (Win32): Loaded 'C:\Windows\SysWOW64\ole32.dll'. Cannot find or open the PDB file.

 'sample_app.exe' (Win32): Loaded 'C:\Program Files\WindowsApps\Microsoft.VCLibs.110.Debug_11.0.50522.1_x86__8wekyb3d8bbwe\msvcp110d.dll'    . Symbols loaded.

 'sample_app.exe' (Win32): Loaded 'C:\Program Files\WindowsApps\Microsoft.VCLibs.110.Debug_11.0.50522.1_x86__8wekyb3d8bbwe\msvcr110d.dll'     . Symbols loaded.

'sample_app.exe' (Win32): Loaded 'C:\Windows\SysWOW64\oleaut32.dll'. Cannot find or open the PDB file.

'sample_app.exe' (Win32): Loaded 'C:\Windows\SysWOW64\msvcrt.dll'. Cannot find or open the PDB file.

'sample_app.exe' (Win32): Loaded 'C:\Windows\SysWOW64\rpcrt4.dll'. Cannot find or open the PDB file.

'sample_app.exe' (Win32): Loaded 'C:\Windows\SysWOW64\sechost.dll'. Cannot find or open the PDB file.

'sample_app.exe' (Win32): Loaded 'C:\Windows\SysWOW64\gdi32.dll'. Cannot find or open the PDB file.

'sample_app.exe' (Win32): Loaded 'C:\Windows\SysWOW64\user32.dll'. Cannot find or open the PDB file.

'sample_app.exe' (Win32): Loaded 'C:\Windows\SysWOW64\sspicli.dll'. Cannot find or open the PDB file.

'sample_app.exe' (Win32): Loaded 'C:\Windows\SysWOW64\cryptbase.dll'. Cannot find or open the PDB file.

'sample_app.exe' (Win32): Loaded 'C:\Windows\SysWOW64\bcryptprimitives.dll'. Cannot find or open the PDB file.

'sample_app.exe' (Win32): Loaded 'C:\Windows\SysWOW64\imm32.dll'. Cannot find or open the PDB file.

'sample_app.exe' (Win32): Loaded 'C:\Windows\SysWOW64\msctf.dll'. Cannot find or open the PDB file.

The thread 0x4dc has exited with code 0 (0x0).

'sample_app.exe' (Win32): Loaded 'C:\Windows\SysWOW64\Windows.UI.Xaml.dll'. Cannot find or open the PDB file.

'sample_app.exe' (Win32): Loaded 'C:\Windows\SysWOW64\ninput.dll'. Cannot find or open the PDB file.

'sample_app.exe' (Win32): Loaded 'C:\Windows\SysWOW64\advapi32.dll'. Cannot find or open the PDB file.

'sample_app.exe' (Win32): Loaded 'C:\Windows\SysWOW64\shell32.dll'. Cannot find or open the PDB file.

'sample_app.exe' (Win32): Loaded 'C:\Windows\SysWOW64\shlwapi.dll'. Cannot find or open the PDB file.

'sample_app.exe' (Win32): Loaded 'C:\Windows\SysWOW64\wininet.dll'. Cannot find or open the PDB file.

'sample_app.exe' (Win32): Loaded 'C:\Windows\SysWOW64\d3d11.dll'. Cannot find or open the PDB file.

'sample_app.exe' (Win32): Loaded 'C:\Windows\SysWOW64\dwmapi.dll'. Cannot find or open the PDB file.

'sample_app.exe' (Win32): Loaded 'C:\Windows\SysWOW64\uxtheme.dll'. Cannot find or open the PDB file.

'sample_app.exe' (Win32): Loaded 'C:\Windows\SysWOW64\WinTypes.dll'. Cannot find or open the PDB file.

'sample_app.exe' (Win32): Loaded 'C:\Windows\SysWOW64\urlmon.dll'. Cannot find or open the PDB file.

'sample_app.exe' (Win32): Loaded 'C:\Windows\SysWOW64\UIAutomationCore.dll'. Cannot find or open the PDB file.

'sample_app.exe' (Win32): Loaded 'C:\Windows\SysWOW64\twinapi.dll'. Cannot find or open the PDB file.

'sample_app.exe' (Win32): Loaded 'C:\Windows\SysWOW64\iertutil.dll'. Cannot find or open the PDB file.

'sample_app.exe' (Win32): Loaded 'C:\Windows\SysWOW64\dxgi.dll'. Cannot find or open the PDB file.

'sample_app.exe' (Win32): Loaded 'C:\Windows\SysWOW64\SHCore.dll'. Cannot find or open the PDB file.

'sample_app.exe' (Win32): Loaded 'C:\Windows\SysWOW64\cryptsp.dll'. Cannot find or open the PDB file.

'sample_app.exe' (Win32): Loaded 'C:\Windows\SysWOW64\rsaenh.dll'. Cannot find or open the PDB file.

'sample_app.exe' (Win32): Loaded 'C:\Windows\SysWOW64\actxprxy.dll'. Cannot find or open the PDB file.

'sample_app.exe' (Win32): Loaded 'C:\Windows\SysWOW64\Windows.UI.Immersive.dll'. Cannot find or open the PDB file.

'sample_app.exe' (Win32): Loaded 'C:\Windows\SysWOW64\dui70.dll'. Cannot find or open the PDB file.

'sample_app.exe' (Win32): Loaded 'C:\Windows\SysWOW64\DWrite.dll'. Cannot find or open the PDB file.

'sample_app.exe' (Win32): Loaded 'C:\Windows\SysWOW64\d2d1.dll'. Cannot find or open the PDB file.

'sample_app.exe' (Win32): Loaded 'C:\Windows\SysWOW64\MrmCoreR.dll'. Cannot find or open the PDB file.

'sample_app.exe' (Win32): Loaded 'C:\Windows\SysWOW64\BCP47Langs.dll'. Cannot find or open the PDB file.

'sample_app.exe' (Win32): Loaded 'C:\Windows\SysWOW64\profapi.dll'. Cannot find or open the PDB file.

'sample_app.exe' (Win32): Loaded 'C:\Windows\SysWOW64\Windows.UI.dll'. Cannot find or open the PDB file.

'sample_app.exe' (Win32): Loaded 'C:\Windows\SysWOW64\msftedit.dll'. Cannot find or open the PDB file.

'sample_app.exe' (Win32): Loaded 'C:\Windows\SysWOW64\Windows.Globalization.dll'. Cannot find or open the PDB file.

'sample_app.exe' (Win32): Loaded 'C:\Windows\SysWOW64\dxgidebug.dll'. Cannot find or open the PDB file.

'sample_app.exe' (Win32): Loaded 'C:\Windows\SysWOW64\d3d10warp.dll'. Cannot find or open the PDB file.

 'sample_app.exe' (Win32): Loaded 'C:\Windows\SysWOW64\igd10umd32.dll'. Cannot find or open the PDB file.

 'sample_app.exe' (Win32): Loaded 'C:\Windows\SysWOW64\dcomp.dll'. Cannot find or open the PDB file.

The thread 0x84c has exited with code 0 (0x0).

'sample_app.exe' (Win32): Loaded 'C:\Windows\SysWOW64\crypt32.dll'. Cannot find or open the PDB file.

'sample_app.exe' (Win32): Loaded 'C:\Windows\SysWOW64\msasn1.dll'. Cannot find or open the PDB file.

   'sample_app.exe' (Win32): Loaded 'C:\Windows\SysWOW64\dpapi.dll'. Cannot find or open the PDB file.

  'sample_app.exe' (Win32): Loaded 'D:\LIBRA_WINRT_REL_V_0_1\RAClient_Intf_8_10_12\Debug\sample_app\AppX\ra.dll'. Symbols loaded.

  [17:33:7(f0c)ALL ]Faile to Create a log file ( C:Users estDocumentsVisual Studio 2012ProjectsRAClient_IntfDebug\test_re_2012-10-29T17-33-07.log )

  [17:33:7(f0c)ALL ]

  [17:33:7(f0c)ALL ] +-------------------------------------------+

  [17:33:7(f0c)ALL ] | < libra > |

  [17:33:7(f0c)ALL ] | Vesion : 1.2.5+b |

  [17:33:7(f0c)ALL ] | Date : Apr 17, 2012 |

  [17:33:7(f0c)ALL ] +-------------------------------------------+

  [17:33:7(f0c)ALL ]

 'sample_app.exe' (Win32): Loaded 'C:\Windows\SysWOW64\threadpoolwinrt.dll'. Cannot find or open the PDB file.

[17:33:10(f0c)ALL ]Logging in as (test@example.com)

[17:33:10(f0c)ALL ]XMPP Server : 107.108.82.145:5222

[17:33:10(f0c)ALL ]Stun Server : 107.108.72.62:3474

[17:33:10(f0c)ALL ]Turn Server : 107.108.72.62:3474

[17:33:10(f0c)ALL ]Turn ELB Server : 107.108.72.62:3474

[17:33:10(f0c)ALL ]

'sample_app.exe' (Win32): Loaded 'C:\Windows\SysWOW64\Windows.Networking.dll'. Cannot find or open the PDB file.

'sample_app.exe' (Win32): Loaded 'C:\Windows\SysWOW64\Windows.Networking.Connectivity.dll'. Cannot find or open the PDB file.

 'sample_app.exe' (Win32): Loaded 'C:\Windows\SysWOW64\FirewallAPI.dll'. Cannot find or open the PDB file.

'sample_app.exe' (Win32): Loaded 'C:\Windows\SysWOW64\ws2_32.dll'. Cannot find or open the PDB file.

'sample_app.exe' (Win32): Loaded 'C:\Windows\SysWOW64\nsi.dll'. Cannot find or open the PDB file.

'sample_app.exe' (Win32): Loaded 'C:\Windows\SysWOW64\mswsock.dll'. Cannot find or open the PDB file.

'sample_app.exe' (Win32): Loaded 'C:\Windows\SysWOW64\mfplat.dll'. Cannot find or open the PDB file.

'sample_app.exe' (Win32): Loaded 'C:\Windows\SysWOW64\cfgmgr32.dll'. Cannot find or open the PDB file.

'sample_app.exe' (Win32): Loaded 'C:\Windows\SysWOW64\avrt.dll'. Cannot find or open the PDB file.

[17:33:10(f0c)INFO]Physical socket created : 7
IP:107.108.72.78

 PORT:5222

 The thread 0x9bc has exited with code 0 (0x0).

 'sample_app.exe' (Win32): Loaded 'C:\Windows\SysWOW64\dnsapi.dll'. Cannot find or open the PDB file.

  'sample_app.exe' (Win32): Loaded 'C:\Windows\SysWOW64\IPHLPAPI.DLL'. Cannot find or open the PDB file.

  'sample_app.exe' (Win32): Loaded 'C:\Windows\SysWOW64\winnsi.dll'. Cannot find or open the PDB file.

  'sample_app.exe' (Win32): Loaded 'C:\Windows\SysWOW64\FWPUCLNT.DLL'. Cannot find or open the PDB file.

 'sample_app.exe' (Win32): Loaded 'C:\Windows\SysWOW64\rasadhlp.dll'. Cannot find or open the PDB file.

 First-chance exception at 0x75F87945 in sample_app.exe: Microsoft C++ exception: Platform::COMException ^ at memory location 0x0848EBC0\. HRESULT:0x8007274D 
```

日志结束

```
------------------------------------------------------------------------
Call stack before crash (if needed)
------------------------------------------------------------------------
 KernelBase.dll!75f87945() Unknown
 [Frames below may be incorrect and/or missing, no symbols loaded for KernelBase.dll] 
 > msvcr110d.dll!_CxxThrowException(void * pExceptionObject, const _s__ThrowInfo*      pThrowInfo) Line 152 C++
 ra.dll!Concurrency::unobserved_task_exception::throw_stored_exception() Line 196 C++
 ra.dll!Concurrency::details::_ExceptionHolder::_RethrowUserException() Line 953 C++
 ra.dll!Concurrency::details::_Task_impl_base::_Wait() Line 1444 C++
 ra.dll!Concurrency::task<unsigned char>::get() Line 3019 C++
 ra.dll!Concurrency::task<void>::get() Line 3970 C++
 ra.dll!<lambda_05604c12395ee9f669b724ea276b81ae>::operator()(Concurrency::task<void> previousTask) Line 863 C++
 ra.dll!   std::_Callable_obj<<lambda_05604c12395ee9f669b724ea276b81ae>,0>::_ApplyX<int,Concurrency::t    ask<void> >(Concurrency::task<void> && _V0) Line 431 C++
 ra.dll!    std::_Func_impl<std::_Callable_obj<<lambda_05604c12395ee9f669b724ea276b81ae>,0>,std::alloca  tor<std::_Func_class<int,Concurrency::task<void>,std::_Nil,std::_Nil,std::_Nil,std::_Nil,st    d::_Nil,std::_Nil>     >,int,Concurrency::task<void>,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil>:    :_Do_call(Concurrency::task<void> && _V0) Line 239 C++
  ra.dll!  std::_Func_class<int,Concurrency::task<void>,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_    Nil,std::_Nil>::operator()(Concurrency::task<void> _Vx0) Line 515 C++
ra.dll!Concurrency::task<unsigned   char>::_ContinuationTaskHandle<void,int,<lambda_05604c12395ee9f669b724ea276b81ae>,std::inte    gral_constant<bool,1>,Concurrency::details::_TypeSelectorNoAsync>::_Continue   (std::integral_constant<bool,1> __formal, Concurrency::details::_TypeSelectorNoAsync    __formal) Line 3393 C++
  ra.dll!Concurrency::task<unsigned    char>::_ContinuationTaskHandle<void,int,<lambda_05604c12395ee9f669b724ea276b81ae>,std::inte    gral_constant<bool,1>,Concurrency::details::_TypeSelectorNoAsync>::_Perform() Line     3301 C++
 ra.dll!Concurrency::details::_PPLTaskHandle<int,Concurrency::task<unsig ned   char>::_ContinuationTaskHandle<void,int,<lambda_05604c12395ee9f669b724ea276b81ae>,std::integral_constant<bool,1>,Concurrency::details::_TypeSelectorNoAsync>,Concurrency::details::_Co    ntinuationTaskHandleBase>::operator()() Line 1254 C++
 ra.dll!   Concurrency::details::_UnrealizedChore::_InvokeBridge<Concurrency::details::_PPLTaskHandle<     int,Concurrency::task<unsigned   char>::_ContinuationTaskHandle<void,int,<lambda_05604c12395ee9f669b724ea276b81ae>,std::inte      gral_constant<bool,1>,Concurrency::details::_TypeSelectorNoAsync>,Concurrency::details::_Co     ntinuationTaskHandleBase> >   (Concurrency::details::_PPLTaskHandle<int,Concurrency::task<unsigned    char>::_ContinuationTaskHandle<void,int,<lambda_05604c12395ee9f669b724ea276b81ae>,std::inte   gral_constant<bool,1>,Concurrency::details::_TypeSelectorNoAsync>,Concurrency::details::_Co     ntinuationTaskHandleBase> * _PChore) Line 4464 C++
  msvcr110d.dll!Concurrency::details::_UnrealizedChore::_UnstructuredChoreWrapper   (Concurrency::details::_UnrealizedChore * pChore) Line 293 C++
   msvcr110d.dll!Concurrency::details::_UnrealizedChore::_Invoke() Line 4419 C++
  msvcr110d.dll!Concurrency::details::WorkItem::Invoke() Line 172 C++
  msvcr110d.dll!Concurrency::details::InternalContextBase::ExecuteChoreInline   (Concurrency::details::WorkItem * pWork) Line 1605 C++
  msvcr110d.dll!Concurrency::details::InternalContextBase::Dispatch(Concurrency::DispatchState * pDispatchState) Line 1719 C++
  msvcr110d.dll!Concurrency::details::FreeThreadProxy::Dispatch() Line 197 C++
  msvcr110d.dll!Concurrency::details::ThreadProxy::ThreadProxyMain(void * lpParameter)    Line 171 C++
  kernel32.dll!76b583db() Unknown
   ntdll.dll!77199a3f() Unknown
    ntdll.dll!77199a12() Unknown
------------------------------------------------------------------------ 
```

请指教

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T15:35:10.060

我对 WCF 也有类似的问题。据我所知，Windows Store 应用程序无法通过 HTTP 与本地服务通信。

但是 Fiddler 有一个很棒的工具。这解决了我的问题。

看看这个： [http ://blog.virtew.com/2012/08/13/using-fiddler-in-a-windows-8-metro-style-app/](http://blog.virtew.com/2012/08/13/using-fiddler-in-a-windows-8-metro-style-app/)

# mysql - Mysql XML 表导出命令行

> ID：13116627
> 
> 赞同：0
> 
> 时间：2012-10-29T06:05:20.657
> 
> 标签：mysql, command-line, export

也许我在这里没有看到任何东西，但是为什么这个命令行可以完美地工作并在 LINUX 命令行上运行时提供结果集，但是当从 WINDOWS 命令​​行执行时，它会失败并且什么也不返回？

```
mysql -hHOSTNAME -uroot -p --xml -e 'SELECT * FROM db.table' > c:\temp\output.xml 
```

我在这里想念什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T07:05:23.623

你能试试这个吗...

```
C:\>mysql -u <userid> -p<password> -e "SHOW VARIABLES LIKE '%version%'" –-xml 
```

还有这个...

```
mysql -u db_user -p db_name --xml -e "SELECT * FROM table_name" > table_name.xml 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T13:34:58.433

Windows 命令行无法识别`'`为引号字符，因此您的语句参数变为`SELECT`（在第一个空格处截断）。

`"`正如 Heena Hussain 建议的那样，您必须改用。

# android - Android：自定义照片大小

> ID：13116634
> 
> 赞同：1
> 
> 时间：2012-10-29T06:06:06.930
> 
> 标签：android, android-camera, image-resizing, android-photos

我有一个应用程序，其中移动捕获照片然后上传到服务器。我想先检查照片的尺寸，然后根据实际照片尺寸将照片尺寸缩小到某个特定尺寸。实际上，在服务器上它不允许大于某个特定大小（比如 200 kb）的照片。

或者我可以限制相机仅拍摄特定尺寸的照片，即使有人更改相机的设置。

很多问题在这里询问哪个检索照片的宽度和高度。但我想以字节为单位自定义大小。

使用 cameraIntent 打开相机

```
Intent cameraIntent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
startActivityForResult(cameraIntent, CAMERA_REQUEST); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T06:40:23.550

这是AFAIK唯一可能的解决方案，以减小尺寸..

```
public void onActivityResult(int requestcode, int resultcode, Intent data) {
        if (resultcode == RESULT_OK) {
            if (requestcode == SELECT_PICTURE) {
                Uri uri = data.getData();
                String imagePath = getPath(uri);
                int SCALE = 2;
                try{

                BitmapFactory.Options o2 = new BitmapFactory.Options();
                o2.inSampleSize = SCALE;
                Bitmap bitmap= BitmapFactory.decodeFile(imagePath, o2);
                OutputStream os = new FileOutputStream(imagePath);
                bitmap.compress(Bitmap.CompressFormat.PNG, 85, os);
                os.flush();
                os.close();
                File file = new File(imagePath);
                Log.i("Bitmap", "Height Width "+bitmap.getHeight()+" "+bitmap.getWidth());
                Log.i("File","Size in bytes "+file.length());
                while(file.length()>100*1024)
                {
                    SCALE +=2;
                    o2.inSampleSize = SCALE;
                    bitmap= BitmapFactory.decodeFile(imagePath, o2);
                    os = new FileOutputStream(imagePath);
                    bitmap.compress(Bitmap.CompressFormat.PNG, 85, os);
                    os.flush();
                    os.close();
                    file = new File(imagePath);
                    Log.i("Bitmap", "Height Width "+bitmap.getHeight()+" "+bitmap.getWidth());
                    Log.i("File","Size in bytes "+file.length());
                }
                bitmap = BitmapFactory.decodeFile(imagePath, o2);

                }
                catch (Exception e) {
                    e.printStackTrace();
                }
                txtimagepath.setText(imagePath);

            }
        }
    }

protected String getPath(Uri uri) {
        String[] projection = { MediaStore.Images.Media.DATA };
        Cursor cursor = managedQuery(uri, projection, null, null, null);
        int columnIndex = cursor
                .getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
        cursor.moveToFirst();
        return cursor.getString(columnIndex);

    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T06:13:52.513

您不能动态指定生成文件的大小并进行缩放。您必须重新调整高度和宽度，这反过来又会减小文件大小。

可能是一种反复出现的方法，最终可以将文件大小保持在您的限制范围内，这会有所帮助。我想不出任何其他解决方案。至少，Android SDK 没有提供这样的 API。

如果您想保留宽度/高度，那么您可以尝试压缩技术，这会导致质量下降，并最终导致文件大小下降。但同样，没有直接的 API 来实现这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T06:15:20.723

```
Bitmap bt=Bitmap.createScaledBitmap(YourOrignalBitmap,320, 300, false);
ByteArrayOutputStream bos = new ByteArrayOutputStream();
bt.compress(Bitmap.CompressFormat.PNG,100, bos); 
```

在这里您可以固定大小并保持图像质量..

# clojure - 您可以将数据传递给（for ...）中的下一次迭代吗？

> ID：13116636
> 
> 赞同：6
> 
> 时间：2012-10-29T06:06:18.520
> 
> 标签：clojure

我正在下班后学习 clojure，我正在通过制作一个小游戏（喜欢 quil 库）来让我熟悉 clojure 在特定方面和 FP 方面的不同方面。

所以，我的游戏世界存在地图数据结构的 3d 网格（地图矢量的矢量）。我想迭代 3d 空间（地图）中的每个点并在满足条件时更改数据。这是我最初的解决方案：

（游戏数据结构是游戏状态（一张地图））

```
(defn soil-gen [game]
  (let [world-x (game :world-x)
        world-y (game :world-y)
    world-z (game :world-z)]
      (for [x (range world-x) 
          y (range world-y) 
          z (range world-z) 
          :when (> z (* world-z (rand)))]
         (assoc-in game [:world x y z :type] :soil)))) 
```

但这会返回每次迭代的结果列表（我的游戏状态数据结构），而不是一个游戏数据结构。我应该能够以某种方式将每次迭代的结果传回 for。可能像循环/递归之类的东西，但我认为你不能将递归与 for 结合使用。

有人提供线索吗？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-29T06:23:27.640

您可以使用`reduce`with `for`，如下所示：

```
(defn soil-gen [game]
  (let [world-x (game :world-x)
        world-y (game :world-y)
    world-z (game :world-z)]

    (reduce (fn [g [x y z]] (assoc-in g [:world x y z :type] :soil)))
            game
            (for [x (range world-x) 
                  y (range world-y) 
                  z (range world-z) 
                 :when (> z (* world-z (rand)))]
                 [x y z])))) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T06:21:56.563

您可能希望使用类似`reduce`的方法在每次迭代之间传递累积的结果。

简化示例：

```
(reduce 
  (fn [m val] (assoc m val (str "foo" val))) 
  {}               ;; initial value for m 
  (range 5))       ;; seqence of items to reduce over

=> {4 "foo4", 3 "foo3", 2 "foo2", 1 "foo1", 0 "foo0"} 
```

`reduce`通常在函数式编程中有一些“累加值”的概念时非常有用。它还具有非常高效的优点。

# javascript - 可拖动不工作？

> ID：13116638
> 
> 赞同：2
> 
> 时间：2012-10-29T06:06:57.033
> 
> 标签：javascript, jquery, jquery-ui, drag-and-drop

大家好，我有一个功能，我必须在这里拖放元素，这是我的代码：

```
$(document).ready(function() {

    var i = 0;
    $("button[id='columnadd']").click(function () {
        alert(1);
            var domElement = $('<aside id="shoppingCart' + i + '" class="shoppingCart"><h2 class="ui-widget-header">Add Menu Items Here</h2><aside class="ui-widget-content" id="droppable"><ol><li class="placeholder">Add your items here</li></ol></aside></aside>');
            i++;
            $(this).after(domElement);
    });

        $(".small_box li" ).draggable({
            appendTo: "body",
            helper: "clone"
        });
});

$('#shoppingCart ol').droppable({
    accept: '.small_box li',
    drop: function (event, ui) {
        alert(1);
        $(this).find(".placeholder").remove();
        $("<li></li>").text(ui.draggable.text()).appendTo(this);
    }
}); 
```

这是我的html：

```
 <aside class="small_box">
    <h4>BRANDS</h4>
    <ul>
        <li id ="brand1"><a class="" href="#">Brand1</a></li>
        <li id ="brand2"><a href="#">Brand2</a></li>
        <li id ="brand3"><a href="#">Brand3</a></li>
        <li id ="brand4"><a href="#">Brand4</a></li>
     </ul>
    </aside> 
```

我应该可以来这个地方`<li class="placeholder">Add your items here</li>`

```
var domElement = $('<aside id="shoppingCart' + i + '" class="shoppingCart"><h2 class="ui-widget-header">Add Menu Items Here</h2><aside class="ui-widget-content" id="droppable"><ol><li class="placeholder">Add your items here</li></ol></aside></aside>'); 
```

任何帮助深表感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T06:26:55.220

首先，请修复您的代码缩进。

您的代码有一些错误：

1.  `var i = 0;` 我认为它应该是一个全局变量。所以把它放在你的`$(document).ready(function() {})`街区之外；

2.  您在单击时创建一个 DOM 元素（这是放置区域），并且在您单击触发器之前，该元素不在您的页面中。通过`$('#shoppingCart ol').droppable({...})`在`$(document).ready(function() {})`块中执行，您尝试添加`droppable`一个甚至不在您的页面中的元素，所以这不会做任何事情。

您应该做的是在创建该元素并将其放在页面上`droppable` **之后制作该元素。**这是一个例子：

```
$("button[id='columnadd']").click(function () {
  // create the element
  var domElement = $('<aside id="shoppingCart' + i++ + '" class="shoppingCart"><h2 class="ui-widget-header">Add Menu Items Here</h2><aside class="ui-widget-content" id="droppable"><ol><li class="placeholder">Add your items here</li></ol></aside></aside>');

  // put it after $(this)
  $(this).after(domElement);
  // at this point you have domElement in your page

  // make it droppable
  domElement.find("ol").droppable({
    // put options here
    greedy: true,
    drop: function (event, ui) {
      makeItDroppableToo(event, ui, this);
    }
  });
}); 
```

这是使您删除的元素具有自己的占位符的功能

```
function makeItDroppableToo(e, ui, obj) {
  $(obj).find(".placeholder").remove();

  var placeholder = $("<ol><li class='placeholder'>You can also drop it here</li></ol>");
  $("<li></li>").append(ui.draggable.text()).append(placeholder).appendTo($(obj));

  // this is the same as the previous one
  placeholder.droppable({
    // put options here
    greedy: true,
    drop: function (event, ui) {
      makeItDroppableToo(event, ui, this);
    }
  });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-03T09:21:21.043

试试这个小提琴，我正在使用 JQueryUI

[http://jsfiddle.net/ashpriom/yHLGP/](http://jsfiddle.net/ashpriom/yHLGP/)

```
 $(function() {
$( "#draggable" ).draggable();
$( "#droppable" ).droppable({
  drop: function( event, ui ) {
    $( this )
      .addClass( "ui-state-highlight" )
      .find( "p" )
        .html( "Dropped!" );
  }
}); 
```

});

# struts2 - 在struts2中增加一个变量

> ID：13116645
> 
> 赞同：1
> 
> 时间：2012-10-29T06:07:34.573
> 
> 标签：struts2, iterator, increment

是否可以在 struts 2 中增加变量？我有一组复选框，每个复选框都属于不同的组。我根据组 id 和数据库中自己的 id 命名复选框

![在此处输入图像描述](../Images/0271b795a71aaa819803616ad52ef98f.png)

//namesHead : 列表包含所有组 ID 和名称

//subHead : 列表包含所有子组的 id,Name 和主组的引用

```
<s:iterator status="status" value="namesHead"> 
 <input type="checkbox" onclick="selectSimilarSubGroup('<s:property value="%{id}" />')" />Select All
 <s:set name="itrVar" value="1"></s:set>  
 <s:iterator  status="status1" value="subHead" >
   <s:set name="var1" value="%{refer_id}"></s:set>
   <s:set name="var2" value="%{id}"></s:set>
   <s:if test="%{#var1==#var2}">
     <s:set name="itrVar" value="%{#status1.count}"></s:set>  
     <input type="checkbox" multiple id="chk_grp<s:property value="%{id}"/>_<s:property value="%{#status1.count}" />" name="chk_grp" value="<s:property value="%{id_grp}"/>" /> 
     <s:property value="%{name_grp}"/>
   </s:if>
  </s:iterator>
  <s:hidden name="grp_count_%{id}" value="%{#itrVar}" />
</s:iterator> 
```

![在此处输入图像描述](../Images/410362658684c226e3dc22c15b600517.png) 我认为这是因为迭代器在第二个循环中跳过了初始计数。我如何修改代码以获得预期的输出。或者有什么方法可以增加页面本身的变量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T09:28:51.160

嗯......子迭代器状态应该在父迭代器的每次迭代中重置，“两个单独的列表”或“另一个列表中的一个列表”......

有什么东西把柜台弄乱了。尝试删除 中的`<s:set`行`<s:if`，仅用于调试，暂时忽略`<s:hidden`：

```
<s:iterator status="status" value="namesHead"> 
 <input type="checkbox" onclick="selectSimilarSubGroup('<s:property value="%{id}" />')" />Select All
 <s:set name="itrVar" value="1"></s:set>  
 <s:iterator  status="status1" value="subHead" >
   <s:set name="var1" value="%{refer_id}"></s:set>
   <s:set name="var2" value="%{id}"></s:set>
   <s:if test="%{#var1==#var2}">
     <!-- Nothing here -->
     <input type="checkbox" multiple id="chk_grp<s:property value="%{id}"/>_<s:property value="%{#status1.count}" />" name="chk_grp" value="<s:property value="%{id_grp}"/>" /> 
     <s:property value="%{name_grp}"/>
   </s:if>
  </s:iterator>
  <!-- Nothing here -->
</s:iterator> 
```

你看到了什么 ？

# c# - 为什么某些字符文字会导致 Java 中的语法错误？

> ID：13116648
> 
> 赞同：5
> 
> 时间：2012-10-29T06:07:55.680
> 
> 标签：c#, java, unicode, syntax-error

在最新一期的 JavaSpecialists 时事通讯中，作者提到了一段在 Java 中不可编译的代码

```
public class A1 {
  Character aChar = '\u000d';
} 
```

尝试编译它，你会得到一个错误，例如：

```
A1.java:2：字符文字中的非法行结束
              字符 aChar = '\u000d';
                                ^

```

为什么等效的一段 c# 代码没有显示出这样的问题？

```
public class CharacterFixture
{
  char aChar = '\u000d';
} 
```

我错过了什么吗？

编辑：我最初的问题是 c# 编译器如何正确解析 unicode 文件（如果是的话），为什么 java 仍然应该坚持不正确的（如果是的话）解析？编辑：我还想恢复我原来的问题标题？为什么要进行如此繁重的编辑，我强烈怀疑它严重改变了我的意图。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-29T06:12:01.743

Java 的编译器将`\uxxxx`转义序列翻译为最开始的步骤之一，甚至在标记器破解代码之前。当它真正开始标记时，已经没有`\uxxxx`序列了；它们已经变成了它们所代表的字符，因此对于编译器来说，您的 Java 示例看起来就像您实际上在其中以某种方式*输入*了回车一样。它这样做是为了提供一种在源中使用 Unicode 的方法，而不管源文件的编码如何。如有必要，即使 ASCII 文本仍然可以完全表示 Unicode 字符（以可读性为代价），而且由于它做得这么早，您几乎可以在代码中的任何地方使用它们。（您可以说`\u0063\u006c\u0061\u0073\u0073\u0020\u0053\u0074\u0075\u0066\u0066\u0020\u007b\u007d`，编译器会将其读取为`class Stuff {}`，如果你想惹恼或折磨自己。）

C# 不这样做。 `\uxxxx`稍后与程序的其余部分一起翻译，并且仅在某些类型的标记中有效（即，标识符和字符串/字符文字）。这意味着它不能在某些可以在 Java 中使用的地方使用。 `cl\u0061ss`例如，不是关键字。

# c# - 如果输入无效，则文本框重新聚焦

> ID：13116653
> 
> 赞同：0
> 
> 时间：2012-10-29T06:08:26.767
> 
> 标签：c#, silverlight, validation, focus

在编程方面我学得很慢，对不起。我正在silverlight 中做一个windows phone 应用程序。我正在尝试验证输入。

我遇到的问题是我检测到错误的输入并且出现了消息，但是键盘消失了，有效地让他们继续输入错误仍然存​​在。那么有没有办法阻止他们在没有有效输入的情况下离开？

谢谢

```
bool IsDigitsOnly(string str) {
        foreach (char c in str) {
            if (c < '0' || c > '9') {

                return false;

            }
        }

        return true;
    }

    protected Boolean noLetters() {

        if (!IsDigitsOnly(ReadySecTxtBox.Text)) {
            MessageBox.Show("digits only");
            ReadySecTxtBox.Focus();
            return false;
        }
        if (!IsDigitsOnly(RoundSecTxtBox.Text)) {
            MessageBox.Show("digits only");
            return false;
        }
        if (!IsDigitsOnly(RestSecTxtBox.Text)) {
            MessageBox.Show("digits only");
            return false;
        }
        if (!IsDigitsOnly(RelaxSecTxtBox.Text)) {
            MessageBox.Show("digits only");
            return false;
        }
        if (!IsDigitsOnly(ReadyMinTxtBox.Text)) {
            MessageBox.Show("digits only");
            return false;
        }
        if (!IsDigitsOnly(RoundMinTxtBox.Text)) {
            MessageBox.Show("digits only");
            return false;
        }
        if (!IsDigitsOnly(RestMinTxtBox.Text)) {
            MessageBox.Show("digits only");
            return false;
        }
        if (!IsDigitsOnly(RelaxMinTxtBox.Text)) {
            MessageBox.Show("digits only");
            return false;
        }
        if (!IsDigitsOnly(NoRoundsTxtBox.Text)) {
            MessageBox.Show("digits only");
            return false;
        }
        else return true;

    }

    protected Boolean validInputs(){

        if (noLetters()) {

            if (int.Parse(ReadySecTxtBox.Text) < 0 || int.Parse(ReadySecTxtBox.Text) > 59) {
                MessageBox.Show("seconds must be between 0 and 59");

                return false;
            }
            if (int.Parse(RoundSecTxtBox.Text) < 0 || int.Parse(RoundSecTxtBox.Text) > 59) {
                MessageBox.Show("seconds must be between 0 and 59");
                return false;
            }
            if (int.Parse(RestSecTxtBox.Text) < 0 || int.Parse(RestSecTxtBox.Text) > 59) {
                MessageBox.Show("seconds must be between 0 and 59");
                return false;
            }
            if (int.Parse(RelaxSecTxtBox.Text) < 0 || int.Parse(RelaxSecTxtBox.Text) > 59) {
                MessageBox.Show("seconds must be between 0 and 59");
                return false;
            }

            if (int.Parse(ReadyMinTxtBox.Text) < 0 || int.Parse(ReadyMinTxtBox.Text) > 99) {
                MessageBox.Show("minutes must be between 0 and 99");
                return false;
            }
            if (int.Parse(RoundMinTxtBox.Text) < 0 || int.Parse(RoundMinTxtBox.Text) > 99) {
                MessageBox.Show("minutes must be between 0 and 99");
                return false;
            }
            if (int.Parse(RestMinTxtBox.Text) < 0 || int.Parse(RestMinTxtBox.Text) > 99) {
                MessageBox.Show("minutes must be between 0 and 99");
                return false;
            }
            if (int.Parse(RelaxMinTxtBox.Text) < 0 || int.Parse(RelaxMinTxtBox.Text) > 99) {
                MessageBox.Show("minutes must be between 0 and 99");
                return false;
            }

            if (int.Parse(NoRoundsTxtBox.Text) < 1 || int.Parse(NoRoundsTxtBox.Text) > 99) {
                MessageBox.Show("number of rounds must be between 1 and 99");
                return false;
            }

            else return true;
        }
        else return false;
    }

    protected override void OnManipulationStarted(ManipulationStartedEventArgs e) {

        if (validInputs()) {

            totalSec = (int.Parse(RoundSecTxtBox.Text) + int.Parse(RestSecTxtBox.Text)) * int.Parse(NoRoundsTxtBox.Text)
                + int.Parse(RelaxSecTxtBox.Text) + int.Parse(ReadySecTxtBox.Text);
            totalMin = (int.Parse(RoundMinTxtBox.Text) + int.Parse(RestMinTxtBox.Text)) * int.Parse(NoRoundsTxtBox.Text)
                + int.Parse(RelaxMinTxtBox.Text) + int.Parse(ReadyMinTxtBox.Text);

            TotalMinTxtBox.Text = totalMin.ToString("00");
            TotalSecTxtBox.Text = totalSec.ToString("00");
        }

        base.OnManipulationStarted(e);

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T06:15:35.537

使用这段代码片段：

```
private bool Validate(string text)
{
    if (!IsDigitsOnly(text)) {
        MessageBox.Show("digits only");            
        return false;
    }
}

protected Boolean noLetters() {

    if (!Validate(ReadySecTxtBox.Text))
    {
        ReadySecTxtBox.Focus();
        return false;
    }

    if (!Validate(RoundSecTxtBox.Text))
    {
        RoundSecTxtBox.Focus();
        return false;
    }

    //...

    else return true;
} 
```

**补充：**或者你可以这样做。

```
private bool ValidateAndFocus(ref TextBox txt)
{
    if (!IsDigitsOnly(txt.Text)) {
        MessageBox.Show("digits only");            
        txt.Focus();
        return false;
    }
}

protected Boolean noLetters() {

    if (!ValidateAndFocus(ref ReadySecTxtBox))
        return false;

    if (!ValidateAndFocus(ref RoundSecTxtBox))
        return false;

    //...

    else return true;
} 
```

# time - 如何根据时间序列数据计算使用的千瓦数

> ID：13116658
> 
> 赞同：0
> 
> 时间：2012-10-29T06:08:36.500
> 
> 标签：time, series, metering

我有一个功率计，它通过 USB 存储传感器的当前读数（以 kwH 为单位），它可以读取它的频率，并将其与时间戳一起存储在数据库中，例如列：kwh、tiemstamp。请注意，读数的间隔不一致，这似乎是我无法解决电源读取设备 (CurrentCost) 和 USB 接口工作方式的问题。

我想做的是得到一个在 1 小时内（或任何其他时间段）内使用的总千瓦数的数字。

我有点明白这需要在时间序列上进行集成，但是自从我做了类似的事情以来已经有一段时间了，我希望有人可能有一个简单的一两行代码或我可以使用的伪代码。

# android - Android中的自定义GridView滚动问题

> ID：13116661
> 
> 赞同：0
> 
> 时间：2012-10-29T06:09:07.537
> 
> 标签：android, gridview, zooming

我开发了一个应用程序，在应用程序中我想在 GridView 上使用 Pinch 放大和缩小功能，所以我创建了自定义类名 ZoomableLayout，它扩展了 GridView。现在我的 gridview 可以很好地放大或缩小，但一个问题是它不滚动。

请帮我。

提前致谢。

# mongodb - mongodb与json的匹配文档

> ID：13116662
> 
> 赞同：0
> 
> 时间：2012-10-29T06:09:08.860
> 
> 标签：mongodb

有什么方法可以验证 mongodb 的所有文档是否正确输入，即检查 JSON 文件中的数据和插入的数据是否相同？

如果是怎么办？考虑到 db 中有 300 万个文档。

我想用java脚本来做。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T17:08:56.337

您将必须为`find`您希望在数据库中的每个文档运行一个，验证实际上是否存在完全匹配（只需使用整个文档作为匹配标准）。

将来，您可以使用安全模式（在大多数驱动程序中为 safe=True，但语法略有不同）以确保您的写入不会失败。使用安全模式会提醒您写入的结果。

# android - 对话框主题活动宽度

> ID：13116668
> 
> 赞同：1
> 
> 时间：2012-10-29T06:09:43.777
> 
> 标签：android, android-relativelayout

我有一个使用 Dialog 主题的活动。

```
<activity android:name=".GamePreviewDialog" 
        android:theme="@android:style/Theme.Dialog"
        android:label="Chess Set Preview"> 
```

我不知道如何获得对话框的宽度。通常，如果它不是一个对话框，我会在布局上使用 getWidth()。但是，这样做是行不通的。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:id="@+id/gamePreviewMainLayout"
    android:background="@color/game_background">
    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_above="@+id/gamePreviewButtonView"
        android:id="@+id/gamePreview"
        android:background="@color/game_background">
    </RelativeLayout>           
    <LinearLayout 
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:orientation="horizontal" 
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" 
        android:layout_alignParentBottom="true" 
        android:id="@+id/gamePreviewButtonView"
        android:background="@color/background">

        <Button 
            android:text="Close" 
            android:id="@+id/previewCloseBtn"
            android:layout_width="wrap_content" 
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:background="@drawable/chess_mates_btn">
        </Button>
    </LinearLayout>
</RelativeLayout> 
```

在我的 contentView 按照其他帖子中的建议设置后，我也尝试过调用它。关于如何以编程方式获取宽度的任何想法？

```
getWindow().setLayout(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T16:50:29.427

所以事实证明这不是因为Dialog主题，而是因为它是RelativeLayout并且它不知道onResume时的宽度。要解决此问题，您可以在设置视图后使用 View.post() 方法执行设置代码。在这里找到了这个解决方案[android getHeight()/getWidth with RelativeLayout](https://stackoverflow.com/questions/7584957/android-getheight-getwidth-with-relativelayout)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-21T02:59:44.470

当您设置布局宽度 FILL_PARENT 时，您可以获得屏幕尺寸，即您现在的视图宽度

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-10-29T06:14:40.767

在`onCreate()`方法之后，您可以获得高度和宽度。

# iphone - 使用另一个应用程序打开一个 iphone 应用程序

> ID：13116671
> 
> 赞同：0
> 
> 时间：2012-10-29T06:10:03.947
> 
> 标签：iphone, ios, cocoa-touch

> **可能重复：**
> [从另一个 (iOS) 打开应用程序](https://stackoverflow.com/questions/9926668/open-an-application-from-another-ios)

如果 iPhone 上安装了另一个应用程序（也是由我创建的），我想通过单击按钮打开我的应用程序。我该怎么办？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T06:11:52.450

您需要在要启动的应用程序的 Info.plist 中注册自定义 URL 方案。然后在执行启动的应用程序中，您可以使用`UIApplication openURL:`其他应用程序的自定义 URL 方案传入一个 URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T07:01:46.937

使用以下方法

```
- (BOOL)canOpenURL:(NSURL *)url;

- (BOOL)openURL:(NSURL*)url; 
```

`URL_SCHEME`您应该在构建设置 ( `info.plist`) 中为您要打开的应用程序指定url 。

# objective-c - 使视图在其他视图上浮动

> ID：13116675
> 
> 赞同：0
> 
> 时间：2012-10-29T06:10:53.760
> 
> 标签：objective-c, ios, view, floating

我在 ipad 有一个视图。在那个视图中，我有四个按钮。现在，当我单击该按钮时，会打开一个具有固定高度、宽度、x 位置和 y 位置的视图。我想让这个新视图可以停靠。我的意思是我想把这个视图拖到那个大视图的任何地方。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T06:16:08.333

实施[以下内容](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIResponder_Class/Reference/Reference.html)：

1.  `– touchesBegan:withEvent:`

2.  `– touchesMoved:withEvent:`

3.  `– touchesEnded:withEvent:`

4.  `– touchesCancelled:withEvent:`

并使用touch的位置来设置uiview的frame。这样做并不复杂。

一个快速的谷歌搜索产生了这个[教程](http://www.icodeblog.com/2008/10/20/iphone-programming-tutorial-using-uitouch-to-drag-an-image-around-the-screen/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T07:34:46.500

您可以根据自己的情况进行优化..

```
 -(void)dragging:(UIPanGestureRecognizer *)gesture
{
if(gesture.state == UIGestureRecognizerStateBegan)
{
//NSLog(@"Received a pan gesture");
self.panCoord = [gesture locationInView:gesture.view];

}
CGPoint newCoord = [gesture locationInView:gesture.view];
float dX = newCoord.x-panCoord.x;
float dY = newCoord.y-panCoord.y;

gesture.view.frame = CGRectMake(gesture.view.frame.origin.x+dX,          gesture.view.frame.origin.y+dY, gesture.view.frame.size.width, gesture.view.frame.size.height);
} 
```

# android - 从网站制作 Android 应用

> ID：13116677
> 
> 赞同：0
> 
> 时间：2012-10-29T06:11:20.907
> 
> 标签：android

我有一个小型 wordpress 网站，我想尝试用它制作一个 Android 应用程序。但是，我不知道从哪里开始。我发现了 App Inventor，它使创建应用程序变得非常容易。但是，我还没有弄清楚如何从我的网站中提取数据并通过 App Inventor 将其放入应用程序中。谢谢~

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T06:52:48.417

如果您想要网站的确切外观，您可以继续使用[appsgeyser](http://www.appsgeyser.com/)。它会自动创建您的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T08:08:31.477

您还可以尝试解析网站的 HTML 内容并在运行时获取数据。只需使用 HTTP GET 方法来访问您的网站 url，然后检索内容并相应地显示它。

# ruby-on-rails - 在 Ruby on Rails 中编辑自定义视图模板时出错

> ID：13116681
> 
> 赞同：2
> 
> 时间：2012-10-29T06:11:52.507
> 
> 标签：ruby-on-rails, customization, erb, scaffolding

我试图在 ROR 中创建自定义视图页面，如[http://blog.hulihanapplications.com/browse/view/55-ruby-on-rails-multiple-model-form-generator中所示](http://blog.hulihanapplications.com/browse/view/55-ruby-on-rails-multiple-model-form-generator)

然后我得到了一些错误

```
(erb):6:in `template': compile error (SyntaxError)
(erb):3: syntax error, unexpected $undefined
...orm", :locals => {:object => @<%= singular_name ).to_s); _er...
                              ^
(erb):3: syntax error, unexpected '}', expecting ')'
...s); _erbout.concat ", :f => f} %> \n\n<%= link_to 'Show', @"
                              ^
(erb):5: syntax error, unexpected tIDENTIFIER, expecting ')'
...out.concat " %> |\n<%= link_to 'Back', "
                              ^
(erb):6: syntax error, unexpected tIDENTIFIER, expecting ')'
; _erbout.concat(( plural_name ).to_s); _erbout.concat "_path %>\n"
                                                             ^
(erb):6: unterminated string meets end of file
(erb):6: syntax error, unexpected $end, expecting ')'
; _erbout
         ^ 
```

我的编辑页面是

```
<h1>Editing <%= singular_name %></h1>

<%= render :partial => "_form", :locals => {:object => @<%= singular_name %>, :f => f} %> 

<%%= link_to 'Show', @<%= singular_name %> %> |
<%%= link_to 'Back', <%= plural_name %>_path %> 
```

我的部分形式“形式”是

```
 <% for column in object.class.columns %>  
      <% if column.name != "id" %>  
      <div class="field">  
        <div class="label">  
          <%= f.label "#{column.name}".to_sym  %>  
      </div>  

        <% if column.type == :integer || column.type == :float || column.type == :string %>  
        <% if column.name =~ /_id$/ # is this a id/foreign key field %>  
          <% column_class = column.name.gsub(/_id$/, '').classify.constantize %>    
          <% if column_class %>  
            <%= collection_select(object.class.name.underscore.to_sym, column.name.to_sym, column_class.all, :id, :name, :prompt => true) %>  
          <% else %>  
            <%= f.text_field column.name.to_sym  %>  
          <% end %>  
        <% else %>  
          <%= f.text_field column.name.to_sym  %>  
        <% end %>  
      <% elsif column.type == :text %>  
        <%= f.text_area column.name.to_sym  %>  
      <% elsif column.type == :datetime %>  
        <%= f.datetime_select column.name.to_sym  %>    
      <% elsif column.type == :boolean %>  
        <%= f.check_box column.name.to_sym  %>        
      <% else %>  
        <% # Unknown Column Type %>  
      <% end %>       
      </div>  
    <% end %>   
    <% end %> 
```

这是默认的编辑页面

```
<h1>Editing <%= singular_name %></h1>

<%% form_for(@<%= singular_name %>) do |f| %>
  <%%= f.error_messages %>

<% for attribute in attributes -%>
  <p>
    <%%= f.label :<%= attribute.name %> %><br />
    <%%= f.<%= attribute.field_type %> :<%= attribute.name %> %>
  </p>
<% end -%>
  <p>
    <%%= f.submit 'Update' %>
  </p>
<%% end %>

<%%= link_to 'Show', @<%= singular_name %> %> |
<%%= link_to 'Back', <%= plural_name %>_path %> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T07:21:50.250

通过更改 _form.html.erb 解决了我的问题

```
<%% for column in object.class.columns %>  
    <%% if column.name != "id" && column.name !="created_at" && column.name !="updated_at" %>
    <div class="field">  
        <div class="label">  
          <%%= f.label "#{column.name}".to_sym  %>  
      </div>  

        <%% if column.type == :integer || column.type == :float || column.type == :string %>  
        <%% if column.name =~ /_id$/ # is this a id/foreign key field %>  
          <%% column_class = column.name.gsub(/_id$/, '').classify.constantize %>    
          <%% if column_class %>  
            <%%= collection_select(object.class.name.underscore.to_sym, column.name.to_sym, column_class.all, :id, :name, :prompt => true) %>  
          <%% else %>  
            <%%= f.text_field column.name.to_sym  %>  
          <%% end %>  
        <%% else %>  
          <%%= f.text_field column.name.to_sym  %>  
        <%% end %>  
      <%% elsif column.type == :text %>  
        <%%= f.text_area column.name.to_sym  %>  
      <%% elsif column.type == :datetime %>  
        <%%= f.datetime_select column.name.to_sym  %>    
      <%% elsif column.type == :boolean %>  
        <%%= f.check_box column.name.to_sym  %>        
      <%% elsif column.type == :date %>  
         <%%= f.text_field column.name.to_sym, :id=>"date_picker"  %>       
      <%% else %>  
        <%% # Unknown Column Type %>  
      <%% end %>       
      </div>  
    <%% end %>   
    <%% end %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T06:17:33.787

您正在尝试将 ERB 放入您的 ERB 中，但您应该将 Ruby 放入您的 ERB 中。我认为这：

```
<%= render :partial => "_form", :locals => {:object => @<%= singular_name %>, :f => f} %> 
```

应该是这样的：

```
<%= render :partial => "_form", :locals => {:object => singular_name, :f => f} %> 
```

里面的一切都`<%= ... %>`应该是 Ruby 代码，但`@<%= singular_name %>`不是 Ruby。

# shell - 两个文件的区别

> ID：13116683
> 
> 赞同：0
> 
> 时间：2012-10-29T06:12:01.713
> 
> 标签：shell

我有两个文件。我想比较文件，但两个文件中的行顺序不同。您能否提供比较两个文件的最简单方法。

例子：

文件 1

```
My name is sumit.
My surname is vedi.
I like shell scripting. 
```

文件2

```
My surname is vedi.
My name is sumit.
I like shell scripting. 
```

文件之间的差异应为零；但是，行的顺序是不一样的。注意：文件很大。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T06:14:49.243

可能下面的命令会做这件事。

```
diff <(sort file1) <(sort file2) 
```

如果文件很大并且您不需要排序命令，那么您可以使用`awk`：

```
awk 'FNR==NR{a[$0];next}!($0 in a)' file1 file2 
```

上面的命令只会给出 file2 中存在的行，而不是 file1 中的行。

# c# - 如何在 C# WINForm datagridview 中发生鼠标滚轮事件时使滚动条注释滚动

> ID：13116684
> 
> 赞同：0
> 
> 时间：2012-10-29T06:12:01.360
> 
> 标签：c#, winforms, events, datagridview, mouseevent

> **可能重复：**
> [C# - 如何防止我的组合框中的鼠标滚轮滚动？](https://stackoverflow.com/questions/1882993/c-sharp-how-do-i-prevent-mousewheel-scrolling-in-my-combobox)
> [在组合框 VB.NET 中禁用鼠标滚轮](https://stackoverflow.com/questions/2968189/disable-mouse-scroll-wheel-in-combobox-vb-net)

我有一个问题，当我让鼠标滚轮时，我想让 VerticalScrollBar 不在 Datagridview 中滚动。

我有一些这样的代码：

> ```
>  private void dgwFlowerPics_MouseWheel(object sender, MouseEventArgs e)
>     {
>         int iRowIndex = iSelectedIndex; 
> ```

```
 if (e.Delta > 0) 
        {
            SendKeys.Send("{UP}");  

        }
        else 
        {
            SendKeys.Send("{DOWN}"); 
        }
    } 
```

但是当我滚动鼠标时，滚动条仍然滚动。我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T06:20:01.343

我认为这类似于[C# - 如何防止我的组合框中的鼠标滚轮滚动？](https://stackoverflow.com/questions/1882993/c-sharp-how-do-i-prevent-mousewheel-scrolling-in-my-combobox)

在您的事件代码中，您可以执行

```
 void dataGridView1_MouseWheel(object sender, MouseEventArgs e)
    {
        ((HandledMouseEventArgs)e).Handled = true;
    } 
```

当然绑定事件后：

```
dataGridView1.MouseWheel += new MouseEventHandler(dataGridView1_MouseWheel); 
```

# java - 正则表达式检查代码是否包含非 UTF-8 字符？

> ID：13116685
> 
> 赞同：8
> 
> 时间：2012-10-29T06:12:08.187
> 
> 标签：java, regex, utf-8, sonarqube

我在 Sonar 中使用 PMD、checkstyle、findbugs 等。我想要一个规则来验证 Java 代码不包含不属于 UTF-8 的字符。

例如，字符 � 不应该被允许

我在上面的插件中找不到这个规则，但我想可以在 Sonar 中创建一个自定义规则。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-31T17:45:54.737

这是仅匹配有效 UTF-8 字节序列的正则表达式：

```
/^([\x00-\x7F]|[\xC2-\xDF][\x80-\xBF]|\xE0[\xA0-\xBF][\x80-\xBF]|[\xE1-\xEC][\x80-\xBF]{2}|\xED[\x80-\x9F][\x80-\xBF]|[\xEE-\xEF][\x80-\xBF]{2}|\xF0[\x90-\xBF][\x80-\xBF]{2}|[\xF1-\xF3][\x80-\xBF]{3}|\xF4[\x80-\x8F][\x80-\xBF]{2})*$/ 
```

我从[RFC 3629 UTF-8 派生出来，这是 ISO 10646](http://www.ietf.org/rfc/rfc3629.txt)第 4 节的转换格式 - UTF-8 字节序列的语法。

将上面的因子分解会稍微短一些：

```
/^([\x00-\x7F]|([\xC2-\xDF]|\xE0[\xA0-\xBF]|\xED[\x80-\x9F]|(|[\xE1-\xEC]|[\xEE-\xEF]|\xF0[\x90-\xBF]|\xF4[\x80-\x8F]|[\xF1-\xF3][\x80-\xBF])[\x80-\xBF])[\x80-\xBF])*$/ 
```

这个简单的 perl 脚本演示了用法：

```
#!/usr/bin/perl -w
my $passstring = "This string \xEF\xBF\xBD == � is valid UTF-8";
my $failstring = "This string \x{FFFD} == � is not valid UTF-8";
if ($passstring =~ /^([\x00-\x7F]|[\xC2-\xDF][\x80-\xBF]|\xE0[\xA0-\xBF][\x80-\xBF]|[\xE1-\xEC][\x80-\xBF]{2}|\xED[\x80-\x9F][\x80-\xBF]|[\xEE-\xEF][\x80-\xBF]{2}|\xF0[\x90-\xBF][\x80-\xBF]{2}|[\xF1-\xF3][\x80-\xBF]{3}|\xF4[\x80-\x8F][\x80-\xBF]{2})*$/)
    {
    print 'Passstring passed'."\n";
    }
else
    {
    print 'Passstring did not pass'."\n";
    }
if ($failstring =~ /^([\x00-\x7F]|[\xC2-\xDF][\x80-\xBF]|\xE0[\xA0-\xBF][\x80-\xBF]|[\xE1-\xEC][\x80-\xBF]{2}|\xED[\x80-\x9F][\x80-\xBF]|[\xEE-\xEF][\x80-\xBF]{2}|\xF0[\x90-\xBF][\x80-\xBF]{2}|[\xF1-\xF3][\x80-\xBF]{3}|\xF4[\x80-\x8F][\x80-\xBF]{2})*$/)
    {
    print 'Failstring passed'."\n";
    }
else
    {
    print 'Failstring did not pass'."\n";
    }
exit; 
```

它产生以下输出：

```
Passstring passed
Failstring did not pass 
```

# android - Android：弹出按钮按时关闭？

> ID：13116686
> 
> 赞同：1
> 
> 时间：2012-10-29T06:12:27.280
> 
> 标签：android

我有一个工作正常的弹出按钮。当我点击它时，它会被解雇。但是如果用户不对其采取任何操作，我还想添加一个代码以在 5 秒后关闭弹出窗口？那可能吗？

当前代码

```
final ImageButton rredButton=(ImageButton)findViewById(R.id.RredButton);
    rredButton.setOnClickListener(new View.OnClickListener() {

        public void onClick(View arg0) {
            LayoutInflater layoutInflater
            = (LayoutInflater)getBaseContext()      
            .getSystemService(LAYOUT_INFLATER_SERVICE);
            View popupView = layoutInflater.inflate(R.layout.popupright, null);
            final PopupWindow popupWindow = new PopupWindow(               
                    popupView,                
                    LayoutParams.WRAP_CONTENT,                       
                    LayoutParams.WRAP_CONTENT);     
            Button btnNxtScr = (Button)popupView.findViewById(R.id.nextscreen);             
            btnNxtScr.setOnClickListener(new Button.OnClickListener(){     
                @Override     
                public void onClick(View v) {      
                    Intent myintent1 = new Intent(colorActivity.this,colorBlueActivity.class);
                    startActivity(myintent1);
                }
            });
                    popupWindow.showAtLocation(rredButton, Gravity.CENTER, 0, 0);
                    //---                          
                    popupWindow.setFocusable(true);             
                    popupWindow.update();                          
                    //---
        }}); 
```

这是我更新的代码。怎么了？

```
final ImageButton rredButton=(ImageButton)findViewById(R.id.RredButton);
    rredButton.setOnClickListener(new View.OnClickListener() {

        private CountDownTimer mPopUpDismissTimer; 
        public void onClick(View arg0) {
            LayoutInflater layoutInflater
            = (LayoutInflater)getBaseContext()      
            .getSystemService(LAYOUT_INFLATER_SERVICE);
            View popupView = layoutInflater.inflate(R.layout.popupright, null);
            final PopupWindow popupWindow = new PopupWindow(               
                    popupView,                
                    LayoutParams.WRAP_CONTENT,                       
                    LayoutParams.WRAP_CONTENT);     

            getPopUpDismissTimer(3000, 1000);
            mPopUpDismissTimer.start(); 

        }
            private void getPopUpDismissTimer(long millisInFuture, long countDownInterval) { 
            mPopUpDismissTimer = new CountDownTimer(millisInFuture, countDownInterval) {

            @Override
            public void onFinish() {
                Button btnNxtScr = (Button)popupView.findViewById(R.id.nextscreen);             
                btnNxtScr.setOnClickListener(new Button.OnClickListener(){     

                @Override     
                public void onClick(View v) {      
                    Intent myintent1 = new Intent(colorActivity.this,colorBlueActivity.class);
                    myintent1.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                    startActivity(myintent1);

                                };

        });
                popupWindow.showAtLocation(rredButton, Gravity.CENTER, 0, 0);
                //---                          
                popupWindow.setFocusable(true);             
                popupWindow.update();                          
                //---
            }

            @Override
            public void onTick(long millisUntilFinished) {

            }
            };
            }}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T06:28:10.413

得到一个像这样的 CountDownTimer，

私有 CountDownTimer mPopUpDismissTimer；// 实例变量，放入你的活动类

> 私人无效getPopUpDismissTimer（长millisInFuture，长countDownInterval）{PopUpDismissTimer =新CountDownTimer（millisInFuture，countDownInterval）{

```
 @Override
    public void onFinish() {
      // put your logic for dismissing popup button
    }

    @Override
    public void onTick(long millisUntilFinished) {

    }
}; 
```

}

现在，在您想要关闭弹出窗口的地方调用此倒数计时器，例如 -

> getPopUpDismissTimer(5000, 1000); //5000 毫秒是你想要关闭弹窗的时间 mPopUpDismissTimer.start();

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T06:20:59.767

尝试启动新线程，让这个线程休眠 5 秒，然后关闭对话框

就像是：

新线程（）{运行（）{线程.sleep（5000）；在此处关闭对话框 } }.start();

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T06:21:03.193

使用[处理程序](http://developer.android.com/reference/android/os/Handler.html)。

功能`postDelayed(Runnable r, long delayMillis)`还是`sendMessageDelayed(Message msg, long delayMillis)`可以使用的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T06:27:10.853

将以下行添加到您的课程中：

```
private static final int MSG_AUTO_DISMISS = 0; 
```

然后在您的 onClick 代码中：

```
final ImageButton rredButton=(ImageButton)findViewById(R.id.RredButton);
    rredButton.setOnClickListener(new View.OnClickListener() {

        public void onClick(View arg0) {
            //call this when displaying the dialog
            handler.sendEmptyMessageDelayed(MSG_AUTO_DISMISS, 5000);

            //your own code here
        }
    }}); 
```

要隐藏弹出窗口，您必须实现一个处理程序来处理 MSG_AUTO_DISMISS 消息，因此将以下代码添加到您的类中：

```
private Handler handler = new Handler() {
    @SuppressWarnings("deprecation")
    @Override
    public void handleMessage(Message msg) {
        switch (msg.what) {
        case MSG_AUTO_DISMISS:
                            //dismiss your popup here

                            handler.removeMessages(MSG_AUTO_DISMISS); //add this just in case
            break;
        }
    }
}; 
```

# json - javax.xml.stream.XMLStreamException JSON 表达式不能为空

> ID：13116687
> 
> 赞同：0
> 
> 时间：2012-10-29T06:12:28.217
> 
> 标签：json, web-services, jakarta-ee, jersey

我知道这个异常为我报告了什么。它是一个空返回。但我想传递一个空对象，并想接收一个空对象。我不想检查 null 并创建一个空对象，它浪费了 cpu 资源，因为 null 传达了它必须传达的内容，没有找到数据。如何允许 JSON 发送空值。

或者

我在这里没有选择吗，我需要创建一个虚拟对象并通过网络发送它吗？

订阅者列表请求请求 = 新

```
SubscriberListRequest((SubscriberListConcrete)element.getValue()) ;
SubscriberListResponse response ;
clientSession = sessionManager.getClientSession(identityHash) ;
clientSession.getSendQueue().sendRequest(request) ;
try {
    response = (SubscriberListResponse)clientSession.waitAndGetResponse(request) ;
} catch (WaitedLongEnoughException e) {
    return Response.serverError().build() ;
} catch (UnableToResolveResponseException e) {
    return Response.serverError().build() ;
}
//
// Should I check for response.getSubscriberList() == null, create a new SubscriberList() and send it over the wire ?
//
return Response.ok(response.getSubscriberList()).build(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T19:32:03.997

你不能真正通过`null`电线，所以我建议你使用空对象模式（http://en.wikipedia.org/wiki/Null_Object_pattern）并创建一个静态空数组/列表`SubscriberListResponse`，`SubscriberListResponse.getSubscriberList()`以防万一没有结果。然后你不必在你的服务中检查 null ，但`getSubscriberList`要确保你总是返回一个有效的对象。

# java - java - 如何获得总周数和天数

> ID：13116688
> 
> 赞同：0
> 
> 时间：2012-10-29T06:12:37.007
> 
> 标签：java, calendar

```
System.out.println(
  String.format(
     "You are %s weeks, and %s days pregnant", weeks , days )); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T06:17:48.457

如果您正在寻找两个日期之间的天数差异 -

```
public int daysBetween(Date d1, Date d2){
 return (int)( (d2.getTime() - d1.getTime()) / (1000 * 60 * 60 * 24));
 } 
```

星期 -

```
public int weeksBetween(Date d1, Date d2){
 return (int)( (d2.getTime() - d1.getTime()) / (1000 * 60 * 60 * 24 * 7));
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T06:18:53.683

使用**java.util.Calendar**

```
t.get(Calendar.DAY_OF_MONTH)     // --- int value of the day of the month (1-31)

t.get(Calendar.DAY_OF_WEEK)      // --- int value of the day of the week (0-6) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T06:21:04.663

这样做

```
int num ; // no. of days
int weeks ; // no of weeks
//initialise num 
weeks = num/7;
days = num % 7;
System.format("no of weeks"+weeks+"no of days"+days); 
```

# objective-c - iOS 重新定位视图，例如移动应用程序时

> ID：13116691
> 
> 赞同：0
> 
> 时间：2012-10-29T06:13:30.470
> 
> 标签：objective-c, ios, ipad, views

我正在开发一个 iOS 应用程序，其中有一个视图网格 (3x4)。

我希望能够像应用程序一样移动它们：长按让所有东西都开始摇晃，然后您可以将视图移动到您想要的位置，而其他视图则重新定位。

我知道如何检测长按以及如何为视图设置动画，但是视图如何完全移动以便为您移动的视图腾出位置？（就像应用程序一样）。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T06:21:38.093

我要做的就是把它分解成多个步骤。首先，计算网格中每个视图的两个状态。前位置和后位置。核心动画将处理如何从前状态到后状态的中间动画。因为您正在拖动视图，所以您需要检测被拖动的视图最接近哪一行，当它进入该区域时，触发动画。重复这个过程，直到用户放手，也就是视图移动到最后一行 col 并且该过程完成。

# mysql - 单个查询命令

> ID：13116698
> 
> 赞同：1
> 
> 时间：2012-10-29T06:14:03.693
> 
> 标签：mysql

我将 csv 文件内容放入数据库中。当我在命令下手动运行时..它工作正常..但是当我在单个查询下方输入命令提示符时，它没有运行。

```
mysql -uuser -ppassword -hlocalhost -e "LOAD DATA INFILE "C:\csvfile.csv" 
INTO TABLE test.LoadedEmployee FIELDS TERMINATED BY "," ENCLOSED BY '' 
ESCAPED BY '\\' LINES TERMINATED BY "\n" STARTING BY ''" 
```

仅供参考 .. 有效的手动语法：

```
mysql -uuser -ppassword -hlocalhost 
LOAD DATA INFILE "C:\csvfile.csv" INTO TABLE test.LoadedEmployee 
FIELDS TERMINATED BY "," ENCLOSED BY '' ESCAPED BY '\\' 
LINES TERMINATED BY "\n" STARTING BY '' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T06:18:19.673

如果要加载 CSV 文件，请尝试以下操作：仅供参考，这将忽略第一行 - 标题。

```
LOAD DATA INFILE 'data.txt' INTO TABLE tbl_name
FIELDS TERMINATED BY ',' ENCLOSED BY '"'
LINES TERMINATED BY '\r\n'
IGNORE 1 LINES; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T06:48:59.467

尝试这个：

```
load data local infile 'urfile.csv' into table yourtablefields terminated by ','
enclosed by ''  ESCAPED BY '\\'  lines terminated by '\n'
(col1, col2, col3...) 
```

这里把实际的列名放在上面脚本的最后。也把这个脚本放在一个 .bat 文件中并将它保存在你的 .csv 文件所在的位置。现在打开命令提示符并导航到安装 mysql 的目录那里运行批处理文件。

# c# - 使用 FxcopIntegrator 时排除类/方法

> ID：13116702
> 
> 赞同：0
> 
> 时间：2012-10-29T06:14:33.950
> 
> 标签：c#, visual-studio-2010, fxcop

在将 FxCop 与 Visual Studio 集成时，我发现了 [FxCop Integrator]( [http://fxcopintegrator.codeplex.com](http://fxcopintegrator.codeplex.com) )

虽然这似乎是一个非常好的工具（它几乎消除了独立运行 FxCop 的需要），但我在进行 CodeAnalysis 时找不到排除类或方法的方法。

FxcopIntegrator 是否以某种方式支持这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T02:59:14.757

您是否尝试过将它与预先配置有您的类和方法排除项的 FxCop 项目文件一起使用，如[http://fxcopintegrator.codeplex.com/wikipage?title=Analyze%20With%20FxCop%20Project%20File](http://fxcopintegrator.codeplex.com/wikipage?title=Analyze%20With%20FxCop%20Project%20File)中所述？

# android - Android：如何访问音频文件？

> ID：13116708
> 
> 赞同：2
> 
> 时间：2012-10-29T06:15:17.570
> 
> 标签：android, audio, provider

在我的应用程序中，我使用这种方法来访问音频文件：

```
public Cursor pobierzPlikiAudio(){
    String[] STAR = {"*"};
    String selection = MediaStore.Audio.Media.IS_MUSIC + " != 0";
    Uri uri= Uri.parse("content://pl/aplikacja/app/provider/MediaStore/Audio");
    return getContentResolver().query(uri, STAR, selection, null, null);
} 
```

但在我的 LogCat 中，我得到一个 nullPointerException。怎么了？

出现错误的 Logcat：

```
10-29 07:04:17.729: E/AndroidRuntime(24354): FATAL EXCEPTION: main
10-29 07:04:17.729: E/AndroidRuntime(24354): java.lang.RuntimeException: Unable to start activity ComponentInfo{pl.aplikacja.app/pl.aplikacja.app.MainActivity}: java.lang.NullPointerException
10-29 07:04:17.729: E/AndroidRuntime(24354):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1967)
10-29 07:04:17.729: E/AndroidRuntime(24354):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1992)
10-29 07:04:17.729: E/AndroidRuntime(24354):    at android.app.ActivityThread.access$600(ActivityThread.java:127)
10-29 07:04:17.729: E/AndroidRuntime(24354):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1158)
10-29 07:04:17.729: E/AndroidRuntime(24354):    at android.os.Handler.dispatchMessage(Handler.java:99)
10-29 07:04:17.729: E/AndroidRuntime(24354):    at android.os.Looper.loop(Looper.java:137)
10-29 07:04:17.729: E/AndroidRuntime(24354):    at android.app.ActivityThread.main(ActivityThread.java:4441)
10-29 07:04:17.729: E/AndroidRuntime(24354):    at java.lang.reflect.Method.invokeNative(Native Method)
10-29 07:04:17.729: E/AndroidRuntime(24354):    at java.lang.reflect.Method.invoke(Method.java:511)
10-29 07:04:17.729: E/AndroidRuntime(24354):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
10-29 07:04:17.729: E/AndroidRuntime(24354):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
10-29 07:04:17.729: E/AndroidRuntime(24354):    at dalvik.system.NativeStart.main(Native Method)
10-29 07:04:17.729: E/AndroidRuntime(24354): Caused by: java.lang.NullPointerException
10-29 07:04:17.729: E/AndroidRuntime(24354):    at pl.aplikacja.app.MainActivity.onCreate(MainActivity.java:18)
10-29 07:04:17.729: E/AndroidRuntime(24354):    at android.app.Activity.performCreate(Activity.java:4465)
10-29 07:04:17.729: E/AndroidRuntime(24354):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
10-29 07:04:17.729: E/AndroidRuntime(24354):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1931)
10-29 07:04:17.729: E/AndroidRuntime(24354):    ... 11 more 
```

这是 MainActivity.java

```
package pl.aplikacja.app;

import android.os.Bundle;
import android.database.Cursor;
import android.app.Activity;
import android.view.Menu;
import android.widget.TextView;
import android.provider.MediaStore;

public class MainActivity extends Activity {

    private Dostawca dostawca;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

       Cursor tablicaPlikow = dostawca.pobierzPlikiAudio();

       if (tablicaPlikow.moveToFirst()) {

           String title; 
           String artist;  
           String album; 
           int titleColumn = tablicaPlikow.getColumnIndex(MediaStore.EXTRA_MEDIA_TITLE); 
           int artistColumn = tablicaPlikow.getColumnIndex(MediaStore.EXTRA_MEDIA_ARTIST);
           int albumColumn =tablicaPlikow.getColumnIndex(MediaStore.EXTRA_MEDIA_ALBUM); 

               // Get the field values
               title = tablicaPlikow.getString(titleColumn);
               artist = tablicaPlikow.getString(artistColumn); 
               album = tablicaPlikow.getString(albumColumn);

         TextView widok = (TextView) findViewById(R.id.tekst);
         widok.setText(""+title+" "+ artist + " " + album);
   } 

        setContentView(R.layout.activity_main);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T06:32:42.040

我认为你输入了错误的uri。在这个 Uri 上没有媒体文件，这就是你得到空指针异常的原因。按照以下链接
[获取媒体信息](http://www.java2s.com/Code/Android/Media/GetMediainformation.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T07:51:19.110

检查变量`dostawca`，它看起来没有初始化。这就是为什么你在这一行得到空指针异常`Cursor tablicaPlikow = dostawca.pobierzPlikiAudio();`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T06:43:56.370

这是一些获取所有音频并以列表格式显示的代码。

```
 mAdapter = new SimpleCursorAdapter(
                this,
                // Use a template that displays a text view
                R.layout.media_select_row,
                // Give the cursor to the list adatper
                createCursor(""),
                // Map from database columns...
                new String[] {
                    MediaStore.Audio.Media.ARTIST,
                    MediaStore.Audio.Media.ALBUM,
                    //MediaStore.Audio.Media.DATE_ADDED,
                    MediaStore.Audio.Media.TITLE,
                    MediaStore.Audio.Media._ID,
                    MediaStore.Audio.Media._ID},
                    // To widget ids in the row layout...
                    new int[] {
                    R.id.row_artist,
                    R.id.row_album,
                    R.id.row_title,
                    R.id.row_icon,
                    R.id.row_options_button});

        setListAdapter(mAdapter);

        getListView().setItemsCanFocus(true);

        // Normal click - open the editor
        getListView().setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView parent,
                    View view,
                    int position,
                    long id) {
                DoWhatYouWant();
            }                         
        });

    } catch (SecurityException e) {
        // No permission to retrieve audio?
        Log.e("RecordingApp", e.toString());

        // todo error 1
    } catch (IllegalArgumentException e) {
        // No permission to retrieve audio?
        Log.e("RecordingApp", e.toString());

        // todo error 2 
```

此代码与我一起使用.. 如果您有任何问题，请随时提问。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-13T08:32:37.210

使用此代码

```
public void getAllSongsFromSDCARD() 
{
    String[] STAR = { "*" };  //it is projection you can modify it according to your need   
    String sortOrder = MediaStore.Audio.Media.TITLE + " ASC";
    String[] selectionArgs = null;    
    Uri allsongsuri = MediaStore.Audio.Media.EXTERNAL_CONTENT_URI;
    String selection = MediaStore.Audio.Media.IS_MUSIC + " != 0";  // check for music files

    cursor = getContentResolver().query(allsongsuri,STAR,selection,selectionArgs,sortOrder );

    if (cursor != null) {
        if (cursor.moveToFirst()) {
            do {
                String song_name = cursor
                        .getString(cursor
                                .getColumnIndex(MediaStore.Audio.Media.DISPLAY_NAME));
                int song_id = cursor.getInt(cursor
                        .getColumnIndex(MediaStore.Audio.Media._ID));

                String fullpath = cursor.getString(cursor
                        .getColumnIndex(MediaStore.Audio.Media.DATA));

                String album_name = cursor.getString(cursor
                        .getColumnIndex(MediaStore.Audio.Media.ALBUM));
                int album_id = cursor.getInt(cursor
                        .getColumnIndex(MediaStore.Audio.Media.ALBUM_ID));

                String artist_name = cursor.getString(cursor
                        .getColumnIndex(MediaStore.Audio.Media.ARTIST));
                int artist_id = cursor.getInt(cursor
                        .getColumnIndex(MediaStore.Audio.Media.ARTIST_ID));

            } while (cursor.moveToNext());

        }
        cursor.close();
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-01-05T12:46:40.917

用这个

```
public static ArrayList<MediaItem> listOfSongs(Context context) {
    Uri uri = MediaStore.Audio.Media.EXTERNAL_CONTENT_URI;

    // Filter only mp3s, only those marked by the MediaStore to be music and longer than 1 minute
    String selection = MediaStore.Audio.Media.IS_MUSIC + " != 0";

    // +" AND " + MediaStore.Audio.Media.MIME_TYPE + "= 'audio/mpeg'"

    // `+ " AND " + MediaStore.Audio.Media.DURATION + " > 60000";

    String sortOrder = MediaStore.Audio.AudioColumns.TITLE
            + " COLLATE LOCALIZED ASC";
    Cursor c = context.getContentResolver().query(uri, null, selection, null, sortOrder);

    ArrayList<MediaItem> listOfSongs = new ArrayList<MediaItem>();

    try{
        c.moveToFirst();
        while (c.moveToNext()) {
            MediaItem songData = new MediaItem();

            String title = c.getString(c.getColumnIndex(MediaStore.Audio.Media.TITLE));
            String artist = c.getString(c.getColumnIndex(MediaStore.Audio.Media.ARTIST));
            String album = c.getString(c.getColumnIndex(MediaStore.Audio.Media.ALBUM));
            long duration = c.getLong(c.getColumnIndex(MediaStore.Audio.Media.DURATION));
            String data = c.getString(c.getColumnIndex(MediaStore.Audio.Media.DATA));
            long albumId = c.getLong(c.getColumnIndex(MediaStore.Audio.Media.ALBUM_ID));
            String composer = c.getString(c.getColumnIndex(MediaStore.Audio.Media.COMPOSER));

            songData.setTitle(title);
            songData.setAlbum(album);
            songData.setArtist(artist);
            songData.setDuration(duration);
            songData.setPath(data);
            songData.setAlbumId(albumId);
            songData.setComposer(composer);
            listOfSongs.add(songData);
        }
        c.close();
        Log.d("SIZE", "SIZE: " + listOfSongs.size());

    }catch (Exception e){
        Log.d(TAG,"listOfSongs() "+e.getMessage());
    }

    return listOfSongs;
} 
```

# facebook - 使用 Facebook Connect 或其他第 3 方进行网络登录是否安全？

> ID：13116721
> 
> 赞同：-1
> 
> 时间：2012-10-29T06:16:41.027
> 
> 标签：facebook, login, openid

我正在考虑为我正在开发的新应用程序的用户实现登录的最佳方式。我对使用 facebook connect 或其他第三方登录的担忧是，我担心我会受到这些网站的摆布。

如果 Facebook 决定开始对 Facebook Connect 收费怎么办？如果他们决定不再让我的用户登录怎么办（无论出于何种原因）。

我担心的是……如果我的 3rd 方登录服务突然消失或生活困难，我是不是突然倒闭了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T09:04:47.007

Facebook 绝不会为登录可能性收费。还有很多其他免费的选项（比如 Open-ID 和其他东西），所以他们会失去很多人。

如果您不确定，请改用注册插件。它要好得多，您可以存储使用它获得的数据。例如，根据 Facebook 规则，您不能仅仅因为他接受了电子邮件权限而存储用户的电子邮件。您必须告诉他您将存储它，并且他必须能够在您存储之前更改它（例如在文本字段中）。数据政策并不是那么简单。

你去：[https ://developers.facebook.com/docs/plugins/registration/](https://developers.facebook.com/docs/plugins/registration/)

# asp.net - 离开页面时如何使静态变量为空？

> ID：13116722
> 
> 赞同：0
> 
> 时间：2012-10-29T06:16:41.547
> 
> 标签：asp.net, sharepoint-2010, static

我有 2 页： 1\. 添加/编辑页面 2\. 列表页面。在列表页面中，我有一个网格视图。在从网格视图编辑行时，我使用 datakey 值为 ID 设置了一个静态变量，并重定向到“添加/编辑”页面并使用编辑行数据预填充它。我正在使用同一页面添加和编辑。这是我的问题，在我从列表页面单击编辑后，被重定向到预先填充了编辑数据的添加/编辑页面。但是，当我离开此页面并在其他几项业务后重新访问时，我会预先填充页面，因为我正在检查静态变量，这是我不希望发生的。一旦我离开添加/编辑页面，我想让静态变量为空。我怎样才能做到这一点？

# php - 将函数返回值设置为公共/静态变量

> ID：13116726
> 
> 赞同：0
> 
> 时间：2012-10-29T06:17:18.850
> 
> 标签：php, mysql

学生表包含： id firstname lastname

函数 get_db_fields 获取学生表字段。

```
class Student{

public function get_db_fields(){
        $sql = "SELECT * FROM students";
        $result = mysql_query($sql);
        if(!$result){
         die("Failed :" . mysql_error());
        }
        $db_fields = array();
        while($field = mysql_fetch_field($result)){
           $db_fields[] = "'".$field->name."'";
        }
        return join(',',$db_fields);
    }

    public $db_fields = array($this->get_db_fields()); <--- This is not working

} 
```

> return join(',',$db_fields) = 'id','firstname','lastname'

我的问题是如何将返回值设置为 public $db_fields。所以 public $db_fields 将是 "public $db_fields = array('id','firstname','lastname')"

到目前为止我尝试过的

1.)

```
public $db_fields = array($this->get_db_fields()); <--- This is not working 
```

错误：解析错误：语法错误，第 33 行 C:\Program Files\xampp\htdocs\ieti\includes\student.php 中的意外 T_VARIABLE

```
2.) $database_fields = $this->get_db_fields(); 
```

错误：解析错误：语法错误，第 33 行 C:\Program Files\xampp\htdocs\ieti\includes\student.php 中的意外 T_VARIABLE

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T06:26:55.220

创建一个构造函数并将返回的值赋值`get_db_fields`给成员变量`db_fields`。成员变量只能使用在编译时评估的值进行初始化。

```
class Student{

  public $db_fields;

  public function __construct() {
    $this->db_fields = $this->get_db_fields();
  }

// Rest of your code 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T06:33:20.443

```
public $db_fields = array($this->get_db_fields()); 
```

在这里使用“数组”是不对的，应该是

```
public $db_fields =$this->get_db_fields(); 
```

第二，类有这个的构造函数......

所以

```
public function __construct(){
$this->db_fields = $this->get_db_fields();
} 
```

此外，现在不鼓励使用 mysql_query ，如果您使用的是面向对象的已经使用**PDO**。

# java - java.math.BigDecimal 是否适用于 sql server 浮点类型

> ID：13116730
> 
> 赞同：0
> 
> 时间：2012-10-29T06:17:41.970
> 
> 标签：java, sql-server-2008, bigdecimal

java.math.BigDecimal 是否适用于 sql server 浮点类型？

我的应用程序计算不准确，我们决定重构所有应用程序（超过 5 年的发展和 200 年的发展）

我的问题是，如果我想触摸应用程序 sql 执行的整数，它们在 sql 类型 float 中工作得很好，当转换将 b 转换为大十进制时，b 是否会这样处理，反之亦然。

10倍！！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T07:13:33.727

这个问题没有意义。您必须同时转换 SQL 列和 Java 代码。如果两者都不做，您将无法解决任何问题。

# wpf - 使用 Listbox WPF 在布局中绘制线条

> ID：13116732
> 
> 赞同：0
> 
> 时间：2012-10-29T06:17:47.767
> 
> 标签：wpf, listbox, line

我需要使用 WPF 的 ListBox 控件在容器中绘制线条。使用 Listbox 控件的原因是我有一组对象，这些对象基本上是自定义 Line 对象，暴露 x1,y1 和 x2,y2 点。因此，一旦绘制了将添加到集合中的线，它就可以同时显示。

我用来在列表框中画线的代码是：

```
<ListBox Grid.Row="0" Grid.Column="0" VerticalContentAlignment="Stretch" HorizontalContentAlignment="Stretch" VerticalAlignment="Stretch" HorizontalAlignment="Stretch" Grid.ColumnSpan="4" Grid.RowSpan="4" Name="listBoxLines" Visibility="{Binding ElementName=RadioCaliperOn, Path=IsChecked, Converter={StaticResource booleanToVisibilityConverter}}"  Style="{x:Null}" Background="Transparent" BorderThickness="0" ScrollViewer.HorizontalScrollBarVisibility="Disabled" ScrollViewer.VerticalScrollBarVisibility="Disabled" ItemsSource="{Binding Path=Calipers}" >
                    <ListBox.ItemsPanel>
                        <ItemsPanelTemplate>
                            <Canvas HorizontalAlignment="Stretch" VerticalAlignment="Stretch"></Canvas>
                            <!--<Grid HorizontalAlignment="Stretch" VerticalAlignment="Stretch"></Grid>-->
                        </ItemsPanelTemplate>
                    </ListBox.ItemsPanel>

                    <ListBox.Resources>

                        <Style TargetType="ListBoxItem">
                            <Style.Resources>
                                <!-- Background of selected item when focussed -->
                                <SolidColorBrush x:Key="{x:Static SystemColors.HighlightBrushKey}" Color="Transparent" />
                                <!-- Background of selected item when not focussed -->
                                <SolidColorBrush x:Key="{x:Static SystemColors.ControlBrushKey}" Color="Transparent" />
                            </Style.Resources>
                            <Style.Setters>
                                <!--<Setter Property="Background" Value="{StaticResource Brush_CZBscanImagePinkBorder}"/>-->
                                <Setter Property="Background" Value="Transparent"/>
                                <Setter Property="Foreground" Value="Transparent"/>
                                <Setter Property="BorderThickness" Value="0"/>
                                <Setter Property="Margin" Value="0"/>
                                <Setter Property="Padding" Value="0" />
                                <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
                                <Setter Property="VerticalContentAlignment" Value="Stretch"/>
                                <Setter Property="MinHeight" Value="1"/>
                                <Setter Property="MinWidth" Value="1"/>
                                <Setter Property="Height" Value="Auto"/>
                                <Setter Property="Width" Value="Auto"/>
                            </Style.Setters>
                            <Style.Triggers>
                                <Trigger Property="IsSelected" Value="true">
                                    <Setter Property="Background" Value="{StaticResource BrushTransparent}"/>
                                    <Setter Property="Foreground" Value="{StaticResource BrushTransparent}"/>
                                </Trigger>
                            </Style.Triggers>
                        </Style>
                        <Style TargetType="ListBox">
                            <Style.Setters>
                                <Setter Property="ListBox.BorderThickness" Value="0"></Setter>
                            </Style.Setters>
                        </Style>
                        <Style TargetType="ScrollViewer">
                            <Style.Setters>
                                <Setter Property="ScrollViewer.HorizontalScrollBarVisibility" Value="Disabled"></Setter>
                                <Setter Property="ScrollViewer.VerticalScrollBarVisibility" Value="Disabled"></Setter>
                            </Style.Setters>
                        </Style>
                    </ListBox.Resources>

                    <ListBox.ItemTemplate>
                        <DataTemplate>
                            <Line Cursor="Hand" X1="{Binding Converter={StaticResource caliperToLineConverter}, ConverterParameter=X1}" Y1="{Binding Converter={StaticResource caliperToLineConverter}, ConverterParameter=Y1}" X2="{Binding Converter={StaticResource caliperToLineConverter}, ConverterParameter=X2}" Y2="{Binding Converter={StaticResource caliperToLineConverter}, ConverterParameter=Y2}" Stroke="{Binding Converter={StaticResource selectedCalliperColorConverter},RelativeSource={RelativeSource Mode=FindAncestor,AncestorType={x:Type ListBoxItem}}, Path=IsSelected}" StrokeThickness="2" Height="Auto" Margin="0,0,0,0" Stretch="Fill"/>
                        </DataTemplate>
                    </ListBox.ItemTemplate>

                </ListBox> 
```

我面临的问题是，如果集合中有任何现有的行，那么当我只需鼠标单击我的容器来绘制一条线时，列表框的现有项目就会被选中，而我又不能画任何一条线。请让我知道我可以轻松绘制线条的确切方式或方法，每条线都是列表框的一个项目。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T09:01:31.627

尝试使用[ItemsControl](http://msdn.microsoft.com/en-us/library/ms611045.aspx)而不是 ListBox 并扔掉所有`<ListBox.Resources>`东西。所有你需要的应该是

```
<ItemsControl ...>
    <ItemsControl.ItemsPanel>
        <ItemsPanelTemplate>
            <Canvas />
        </ItemsPanelTemplate>
    </ItemsControl.ItemsPanel>
    <ItemsControl.ItemTemplate>
        <DataTemplate>
            <Line ... />
        </DataTemplate>
    </ItemsControl.ItemTemplate>
</ItemsControl> 
```

# jquery-mobile - jQueryMobile 的日期和时间选择器插件在 Android 模拟器中不起作用

> ID：13116736
> 
> 赞同：0
> 
> 时间：2012-10-29T06:18:23.880
> 
> 标签：jquery-mobile, android-emulator

我是 JQueryMobile 的新手，当我在[我的 jsfiddle](http://jsfiddle.net/mapsv3/k5c96/)测试它的工作正常时，但是当我在 Android 模拟器上运行时，它变成了这个[图像](https://docs.google.com/open?id=0B5dnb9JhVY-8aV9uT3lZN1Jrdlk)。缺少日期和时间选择器

下面是我的示例代码，

```
<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title></title>
        <link rel="stylesheet" href="https://ajax.aspnetcdn.com/ajax/jquery.mobile/1.1.1/jquery.mobile-1.1.1.min.css" />
        <link rel="stylesheet" href="resources/css/my.css" />

        <link rel="stylesheet" type="text/css" href="http://code.jquery.com/mobile/latest/jquery.mobile.min.css" />
        <link rel="stylesheet" type="text/css" href="http://dev.jtsage.com/cdn/datebox/latest/jqm-datebox.min.css" />

        <script type="text/javascript" src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
        <script type="text/javascript" src="http://code.jquery.com/mobile/latest/jquery.mobile.min.js"></script>

        <!-- Optional Mousewheel support: http://brandonaaron.net/code/mousewheel/docs -->
        <script type="text/javascript" src="resources/js/jquery.mousewheel.min.js"></script>

        <script type="text/javascript" src="http://dev.jtsage.com/cdn/datebox/latest/jqm-datebox.core.min.js"></script>
        <script type="text/javascript" src="http://dev.jtsage.com/cdn/datebox/latest/jqm-datebox.mode.calbox.min.js"></script>
        <script type="text/javascript" src="http://dev.jtsage.com/cdn/datebox/latest/jqm-datebox.mode.datebox.min.js"></script>

        <script type="text/javascript" src="http://dev.jtsage.com/cdn/datebox/i18n/jquery.mobile.datebox.i18n.en_US.utf8.js"></script>

        <style>
            /* App custom styles */
        </style>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
        <script src="https://ajax.aspnetcdn.com/ajax/jquery.mobile/1.1.1/jquery.mobile-1.1.1.min.js"></script>
        <script src="resources/js/my.js"></script>
    </head>
    <body>
        <!-- Home -->
        <div data-role="page" id="page1">
            <div data-theme="b" data-role="header">
                <a data-role="button" data-inline="true" data-transition="slide" data-theme="b" href="#page1" class="ui-btn-left">
                    Calendar
                </a>
                <a data-role="button" data-inline="true" data-transition="slide" href="#page1" class="ui-btn-right">
                    Save
                </a>
                <h4>
                    Edit Event
                </h4>
            </div>
            <div data-role="content">
                <div data-role="fieldcontain">
                        <label for="txtTitle">
                            Title
                        </label>
                        <input name="" id="txtTitle" placeholder="" value="" type="text" />                    
                </div>

                <div data-role="fieldcontain">
                  <label for="link1">Start Time*</label>
                  <input name="link1" type="text" data-role="datebox" data-options='{"mode": "timebox"}' id="link1" />
                  <label for="link3">End Time*</label>
                  <input name="link3" type="text" data-role="datebox" data-options='{"mode": "timebox"}' id="link3" />
                  <label for="mydate">Date*</label>
                  <input name="mydate" id="mydate" type="date" data-role="datebox" data-options='{"mode": "calbox"}'>
                </div>

            </div>
        </div>
        <script>
            //App custom javascript
        </script>
    </body>
</html>​ 
```

感谢任何人都可以指导我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T22:33:36.957

这似乎是模拟器的问题，我刚刚在我的设备（HTC Desire with Android 2.2）上测试了你的例子，它工作正常，看截图
![在此处输入图像描述](../Images/946b22c1253a0c8ad3223c217ff5056c.png)

唯一的问题是，在按下其中一个图标后，键盘也会打开……但这是另一个问题……![在此处输入图像描述](../Images/586560ae48839ec0643f6f7aac12e046.png)

关于键盘问题，您可能想看看[这些答案](https://stackoverflow.com/questions/5937339/ipad-safari-make-keyboard-disappear)

# amazon-web-services - 如何使用 AppHarbor 和 DB 插件水平扩展应用程序和数据存储

> ID：13116738
> 
> 赞同：3
> 
> 时间：2012-10-29T06:18:34.407
> 
> 标签：amazon-web-services, appharbor, mlab, horizontal-scaling

如果您直接与 AWS 交谈，那么您有几个选择，但基本上您将执行以下操作来扩展您的应用程序：

## 在 EC2 上扩展应用服务器

您将结合使用 CloudWatch 和 EC2 服务来查看性能指标，并根据您认为合适的方式启动和关闭 EC2 应用程序实例。

## 扩展 SQL 和 NoSQL 数据库

这取决于 DB 有点不同，但是[AWS 从你那里抽象了很多东西](http://vimeo.com/52252773)，所以如果你使用他们的服务，有办法通过 DB 以编程方式水平扩展。

## AppHarbor 问题

*   Appharbor 引入了工人的概念。工人是否喜欢多个实例，它们是否会自动进行负载平衡？

*   我可以以编程方式添加/删除工作人员吗？如果是这样，基于什么指标？

*   如果您使用的是附加组件，例如 MongoLab，为了简单起见，您是否必须通过拥有多个 MongoLab 数据库来手动管理分片，或者附加组件提供者是否为您提供该抽象？

*   本质上，AppHarbor 的水平扩展故事是什么？

# iphone - IOS 6 中的引用错误

> ID：13116740
> 
> 赞同：1
> 
> 时间：2012-10-29T06:18:42.007
> 
> 标签：iphone, ios, ios6

我最近更新到 IOS 6。我的项目在 iOS 4.3 上运行良好，现在当我尝试为设备构建时，它显示了很多参考错误。

```
ld: symbol(s) not found for architecture armv7s 
```

实际上我没有所有的源代码，我也一直在为某些类使用 .a，对于那些类 .a，我也要求用 Xcode 4.5.1（用于设备）构建并尝试过，仍然没有用。如果我使用模拟器，它工作正常，因为设备构建问题出现了。我搜索了任何解决方案，发现一些对我的问题没有帮助。任何人在更新到 iOS 6 后都会遇到这种情况。如何摆脱它。

等待您的帮助。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T06:46:50.000

要获得快速解决方案，您可以检查`Build Active Architecture Only`每个项目配置（调试、发布和部署）以及目标的构建设置。这将允许您构建项目。

**注意**：*这只是一个临时解决方案。您确实必须将您正在使用的库或框架更新到支持 armv7s（iPhone5 架构）的最新版本。*

# jquery - 如何使用 Jquery 获取 asp.net 树视图节点的 Valuepath 属性？

> ID：13116741
> 
> 赞同：0
> 
> 时间：2012-10-29T06:18:41.750
> 
> 标签：jquery, asp.net

谁能帮我解决以下问题

1.  如何使用 Jquery 获取 asp.net 树视图节点的 Valuepath 属性？
2.  如何使用 Jquery 在 asp.net treeview 控件中插入节点？
3.  如何使用 Jquery 从 asp.net treeview 控件中删除节点？

我想在客户端使用 jQuery 做这些事情。有没有人有任何想法，如何做这些事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-22T01:50:43.683

回答你的第一个问题

1.如何使用Jquery获取asp.net treeview节点的Valuepath属性？

回答：

```
//**tvFolderStr** is the ID of TreeView. But in javascript it need embed with **_Data**

var selectedItem = tvFolderStr_Data.selectedNodeID.value;
var selectedNode = document.getElementById(selectedItem);
if (selectedNode != null) {
    var nodePath = selectedNode.href;  //result= "javascript:__doPostBack('tvFolderStr','sMyDoc-79\\test2-80')"
    //OR
    var nodePath = selectedNode.pathname;//result="__doPostBack('tvFolderStr','sMyDoc-79\\test2-80')"

    nodePath = nodePath.split(',')[1];
} 
```

NodePath 将包含 valuePath。但它也包含一些其他值，如示例结果所示。您需要从 nodePath 变量中删除那些不需要的文本。

# ipad - 如何为 iPad mini 开发应用程序

> ID：13116744
> 
> 赞同：4
> 
> 时间：2012-10-29T06:18:59.050
> 
> 标签：ipad, uilabel, xcode4.5, ipad-mini

> **可能重复：**
> [处理 iPad Mini 屏幕尺寸](https://stackoverflow.com/questions/13036745/dealing-with-ipad-mini-screen-size)

我想为 iPad Mini 开发应用程序，我的应用程序也应该可以在 iPad 上运行，但 iPad mini 模拟器不附带 Xcode 4.5。

有什么方法可以让我看到我的应用在新 iPad Mini 上的样子？

**我有一个疑问..假设我希望我的标签在 iPad 的中心以及 iPad mini 中，那么我应该如何处理呢？**

**对于 iPad，**

```
UILabel* label=[[UILabel alloc]init];
label.backgroundColor=[UIColor clearColor];
label.frame=CGRectFrame(350,200,20,20);
label.text=@"First ";
[self.view addSubview:label]; 
```

我可以看到我的标签将在中心..

但是如果我将在 iPad mini 中运行相同的代码，那么根据 x 位置，`350`我的标签将位于最右边，它不会在中心。

如何照顾 iPad mini 和 iPad 的屏幕尺寸？

**任何帮助都会得到帮助。**

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-10-29T06:22:28.500

iPad mini 与 iPad 1 和 iPad 2 相同（具有相同的屏幕分辨率）。支持 iPad mini 没有什么不同。

# ruby-on-rails - 当 Gemfile 发生更改时，如何确保 RVM gemset 也同步

> ID：13116747
> 
> 赞同：0
> 
> 时间：2012-10-29T06:19:19.847
> 
> 标签：ruby-on-rails

[如何重新同步 Gemfile.lock 对 Gemfile 的更改](https://stackoverflow.com/questions/13101945/how-to-re-sync-gemfile-lock-on-changes-to-gemfile)

这个问题是上述问题的延续，即使对 Gemfile 进行了更改，我的 RVM gemset 也不同步。

即，如果我将 gem 从 1.0 版迁移到 2.0 版，它们都存在。在这种情况下，我希望从我的 gemset 中删除以前的 gem 1.0。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T06:33:34.417

如果您在应用程序之间共享 gemset，此功能可能会破坏您依赖不同 gems 的其他应用程序。这就是我不再为 gemsets 烦恼的原因。

磁盘空间很便宜，如果您真的担心，您可以定期清除您的 gem，然后重新捆绑以仅重新安装捆绑中的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T07:34:59.147

您可以执行“gem cleanup”以删除本地存储库中已安装 gem 的旧版本

# asp.net - 具有多线程使用锁定方法的asp.net

> ID：13116751
> 
> 赞同：0
> 
> 时间：2012-10-29T06:19:56.507
> 
> 标签：asp.net, multithreading

在该代码中，我想使用 Lock(this) 方法并在 asp.net 中使用多线程如何使用它，请解释一下。我想在它的方法中使用多线程所以请

```
 try
    {

        List<spEMS_MailSentSchedularListResult> dSchedularResult = ESManager.SendSchedularList();
        if (dSchedularResult != null)
        { 
```

// 这里我想锁定方法所以你能解释一下吗

```
 for (int i = 0; i < dSchedularResult.Count; i++)
            {
                try
                {
                    string strBody = "";

                    #region Creating STRBODY
                    strBody = AppConstant.MAIN_DIV_TAG_START + AppConstant.MAIN_TABLE_TAG_START_BGCOLOR.ToString() +

                                AppConstant.MAIN_TABLE_TR_TD_START_ALIGNMENT.ToString() +

                                AppConstant.MAIN_TABLE_TR_TD_END.ToString();
                    #endregion

                }
                catch (Exception ex)
                {
                    Page_Error(ex);
                }
            }
        }
    }
    catch (Exception ex)
    {
        Page_Error(ex);
    }
    finally
    {
        ESManager = null;
    }
} 
```

现在我已经提到了锁的代码是在哪里创建的，请给我积极的答复谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T06:42:55.257

您还没有明确说明要锁定代码的哪一部分。

锁的一般使用是这样的

定义类级别变量

```
private static object syncRoot = new Object(); 
```

当你使用

```
lock (syncRoot)
{
// your code to be locked.
} 
```

希望有帮助

米林德

# php - 第 275 行用户 Sugar/modules/Accounts/Account.php 的访问被拒绝

> ID：13116754
> 
> 赞同：0
> 
> 时间：2012-10-29T06:20:08.060
> 
> 标签：php, mysql, sugarcrm

我在 Sugar CRM 中安装[Inventory Items模块并遇到与](http://www.sugarforge.org/projects/inventory-items)[此处](http://forums.sugarcrm.com/f115/message-after-install-opensales-warning-access-denied-user-odbc-localhost-60980/)提到的相同的问题，我发现我使用的模块可能已经很旧并且它没有正确创建数据库。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T08:52:26.180

将行号更改`275 to 279`为`modules/Accounts/Account.php`

```
if( $result = $this->db->query( $sql ) )
{
  $row = $this->db->fetchByAssoc( $result );
  $this->square_feet = $row['SUM(square_footage)']; 
} 
```

该模块正在替换文件`modules/Accounts/Account.php`，这不是一个好主意，因为 SugarCRM 的升级版本将具有不同的代码。如果您在安装此模块之前进行了备份，请比较您的备份文件和当前文件。

# asp.net-mvc - 如何在加载时将值从父视图传递到部分视图

> ID：13116755
> 
> 赞同：-1
> 
> 时间：2012-10-29T06:20:17.733
> 
> 标签：asp.net-mvc, asp.net-mvc-3, model-view-controller

我正在我的视图中打开一个编辑个人资料页面。我想在他的个人资料页面中显示该人的技能；他的技能存储在另一个表中。现在我想打开一个局部视图来展示他的技能。请帮助我如何显示部分视图。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T11:32:37.217

如果我对您的问题的理解没有错，那么我认为您只是使用

```
 @Html.Action("Skills","Profile", new { id = 1 }) 
```

其中“个人资料”是您的控制器，“技能”是您的操作。

您可以通过将配置文件的 ID 传递给该操作并从该操作中使用该操作来获取配置文件的技能

```
 return Partial(model); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T06:25:23.167

这个问题很模糊，但是假设您在父视图中声明了一个具有名为 Skills 的属性的模型，那么您可以像这样将内容传递给局部视图：

```
@{ Html.RenderPartial("SkillsForm", Model.Skills); } 
```

# android - 如何在三星 Galaxy S3 中加载大型布局？

> ID：13116759
> 
> 赞同：1
> 
> 时间：2012-10-29T06:20:41.233
> 
> 标签：android, android-layout

我想在 Galaxy S3 中加载大型布局，目前默认加载布局。有没有办法做到这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T06:23:02.187

创建文件夹`layout-sw360dp`并在此文件夹中添加 Galaxy S3 的所有布局并检查。这将起作用（经过测试）。

有关更多信息，请查看此[问题](https://stackoverflow.com/questions/12242111/application-skeleton-to-support-multiple-screen)

# ruby-on-rails - 通过 ruby onrails 中的脚手架设置对表的引用

> ID：13116761
> 
> 赞同：20
> 
> 时间：2012-10-29T06:20:54.483
> 
> 标签：ruby-on-rails, ruby

我现在正在做一个关于 ruby​​ on rails 的项目。我创建了一个名为 product 的实体，我想设置与其他名为 category 的实体的多对多关系。

```
script/generate scaffold product prd_name:string category:references 
```

通过执行此代码，只能进行一对一映射。如何在没有硬编码的情况下设置多对多？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-10-29T06:44:47.177

您不应该期望能够仅通过脚手架生成您的应用程序。它只是为了提供一个入门示例。

rails 中最灵活的多对多关系称为[has many through](http://guides.rubyonrails.org/association_basics.html#the-has_many-through-association)。这需要一个连接表，在这种情况下通常称为“分类”。它需要一个`product_id`声明为的列`belongs to :product`和一个`category_id`声明为的列`belongs_to :category`。三个模型（包括连接模型）将这样声明：

```
# Table name: products
# Columns:
#   name:string

class Product < ActiveRecord::Base
  has_many :categorisations, dependent: :destroy
  has_many :categories, through: :categorisations
end

# Table name: categories
# Columns:
#   name:string

class Category < ActiveRecord::Base
  has_many :categorisations, dependent: :destroy
  has_many :products, through: :categorisations
end

# Table name: categorisations
# Columns:
#   product_id:integer
#   category_id:integer

class Categorisation < ActiveRecord::Base
  belongs_to :product
  belongs_to :category
end 
```

请注意，我已经命名了列`name`，而不是`prd_name`因为这既是人类可读的，又避免了表名的冗余重复。强烈建议在使用导轨时这样做。

可以像这样生成模型：

```
rails generate model product name
rails generate model category name
rails generate model categorisation product:references category:references 
```

至于生成脚手架，您可以在前两个命令中`model`替换为。`scaffold`不过，我不推荐它，除非作为查看示例以学习的方式。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-07-20T15:04:58.243

可以使用这样的命令生成带有参考的模型

```
$ rails generate model Comment commenter:string body:text post:references 
```

请参阅[http://guides.rubyonrails.org/getting_started.html#generating-a-model](http://guides.rubyonrails.org/getting_started.html#generating-a-model)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2017-02-17T07:12:56.493

现在可以使用这样的命令生成带有引用的脚手架

```
$ rails generate scaffold Comment commenter:string body:text post:references 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-11-30T09:26:27.993

我们不能通过脚手架来做到这一点。我们必须编辑类的模型来设置多对多关系。

# c# - 如何更新关系数据库 TABELS？

> ID：13116764
> 
> 赞同：0
> 
> 时间：2012-10-29T06:21:02.093
> 
> 标签：c#, database, entity-framework

我正在使用实体框架 4.0。我在更新数据库中的数据时遇到问题。我得到了这个例外：

> *ObjectStateManager 中已存在具有相同键的对象。*
> *ObjectStateManager 无法跟踪具有相同键的多个对象。*

我正在研究关系数据库。以下是 3 个实体及其关系：

```
 1    to   *        1   to    *
Ceremony -----------> Menu ------------> CourseOption 
```

如果我更新已经包含`Menus`and的仪式，一切正常`CourseOptions`。当我们在更新时在仪式中插入新的`Menu`和条目时，问题就来了。`CourseOption`比我得到上述例外。

**更新现有仪式的 C# 代码**

```
public HttpResponseMessage PutCeremony(int id, Ceremony ceremony)
{
    if (ModelState.IsValid && id == ceremony.Id)
    {
       db.Entry(ceremony).State = EntityState.Modified;

       try
       {
           db.SaveChanges();
       }
       catch (DbUpdateConcurrencyException)
       {
           return Request.CreateResponse(HttpStatusCode.NotFound);
       }

       return Request.CreateResponse(HttpStatusCode.OK, ceremony);
    }
    else
    {
       return Request.CreateResponse(HttpStatusCode.BadRequest);
    }
} 
```

我怎样才能摆脱这个问题？请帮忙

**编辑**

今天我花了一整天的时间，我读了很多文章和stackoverflow问题。我发现那`once a product is fetched from the Context, the context is keeping track of it`为什么不使用：

```
db.Entry(ceremony).State = EntityState.Modified; 
```

我用了

```
db.Entry(db.Ceremonies.Find(ceremony.Id)).CurrentValues.SetValues(ceremony); 
```

现在通过执行此更改，异常消失了，Ceremony 实体属性正在正确更改。但是仪式相关的 Menus 条目和 CourseOptions 条目没有更新。请各位大侠给点建议。我是 EF 的新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T18:55:55.013

更新分离的对象图可能非常困难。（这里只有一个子集合的示例：[https](https://stackoverflow.com/a/5540956/270591) ://stackoverflow.com/a/5540956/270591如果您有一个大子集合，那就更复杂了。）

没有通用方法或简单方法，例如将状态设置为`Modified`（它仅将标量属性标记为已更改）并希望它将存储所有对象图更改。

要考虑实施此类更新的详细信息：

*   当菜单被添加到仪式中时用户是否*创建新菜单，或者他是否仅在仪式和**现有*菜单之间建立关系？
*   当菜单从仪式中删除时用户是否*删除*现有菜单，或者他只是释放仪式和菜单之间的关系，但菜单应该仍然存在于数据库中（那么FK必须可以为空）？
*   用户是否可以在您的视图中更改（标量）菜单属性，或者他是否只能在仪式中添加菜单或删除它们而不更改菜单本身？
*   同样的问题也适用于`CourseOptions`每个`Menu`.

对于（相对简单的）用户在您的特定仪式编辑视图中的情况......

*   可以修改仪式的标量属性
*   可以从仪式中删除现有菜单，当它们被删除时应该从数据库中删除，并且相关的`CourseOptions`也应该被删除，并且在数据库中启用了该关系的级联删除
*   可以为应插入数据库的仪式创建和添加新菜单
*   无法更改现有菜单的标量属性
*   不能添加`CourseOptions`到现有的`Menu`，也不能从`Menu`
*   可以将新`CourseOptions`的添加到新的`Menu`（并且`CourseOptions`应该与新菜单一起插入）
*   不能改变现有的标量属性`CourseOption`

...代码如下所示：

```
var ceremonyInDb = db.Ceremonies.Include(c => c.Menus)
    .Single(c => c.Id == ceremony.Id);

db.Entry(ceremonyInDb).CurrentValues.SetValues(ceremony);

foreach (var menuInDb in ceremonyInDb.Menus.ToList())
    if (!ceremony.Menus.Any(m => m.Id == menuInDb.Id))
        db.Menus.Remove(menuInDb);

foreach (var menu in ceremony.Menus)
    if (!ceremonyInDb.Menus.Any(m => m.Id == menu.Id))
        ceremonyInDb.Menus.Add(menu);

db.SaveChanges(); 
```

如果某些限制不适用（即用户可以在您的视图中进行更复杂的修改），则代码会更复杂。但基本思想是从数据库中加载对象图（根和子，`Include`可能还有孙子`Include(...Select(...))`），将原始图与新的分离图进行比较，并根据新图的差异对原始图应用更改。

# android - 在 android 中使用 microlog 进行日志记录的问题

> ID：13116770
> 
> 赞同：1
> 
> 时间：2012-10-29T06:21:22.867
> 
> 标签：android, logging

当我尝试使用 microlog 记录数据时，有时似乎某些数据没有正确记录。这意味着，有时使用 logger.info("..") 的那些行会被记录，而有时这些行不会被记录。

但是，我一直可以从 logCat 中看到这些行，这意味着 LogCat 中的显示正确。

我通常使用 microlog 将数据记录到系统默认文本文件 log.txt 中。

```
protected static final Logger logger = LoggerFactory.getLogger();
protected FileAppender appender = new FileAppender();

PropertyConfigurator.getConfigurator(this).configure();

appender.setFileName("/myapp/log.txt");
appender.setAppend(true);

logger.addAppender(appender);

logger.info("testing"); 
```

微日志属性

```
microlog.level=INFO
microlog.appender=LogCatAppender;FileAppender
microlog.formatter=PatternFormatter
microlog.formatter.PatternFormatter.pattern=[%d]:[%P] %c - %m %T 
```

我怎样才能解决这个问题，以便所有那些使用的线路`logger.info("...")`都会被记录下来`log.txt file`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T11:57:22.747

它对我有用。在打印日志之前创建应用程序的文件夹。

```
 new File(Environment.getExternalStorageDirectory() + "/myapp").mkdir();

    PropertyConfigurator.getConfigurator(this).configure();

    appender.setFileName("/myapp/log.txt");
    appender.setAppend(true);

    logger.addAppender(appender);

    logger.debug("testing"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T10:20:40.097

这可能是一个错误。尝试在代码中设置日志记录级别。如果这有效，则说明您的配置文件有问题或者是错误。

# shell - Linux shell 命令将一行文本附加到所有文本文件（实际上是应用程序日志）

> ID：13116776
> 
> 赞同：1
> 
> 时间：2012-10-29T06:21:39.170
> 
> 标签：shell, unix

我想在目录中附加一行文本所有文本文件（* .log），原因是，我想在应用程序日志中插入一个“标记”文本以插入断点。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T07:18:06.903

使用“for”循环的一种方法：

```
for i in *.log; do echo "MARKER" >> "$i"; done 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T06:28:14.920

```
perl -i -lne 'if(eof){print $_."\MARK"}else{print}' *.log 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T06:30:25.587

使用 sed：

```
sed -i '$a MARKER' *.log 
```

# linux - linux中的等待队列与信号量

> ID：13116779
> 
> 赞同：3
> 
> 时间：2012-10-29T06:21:58.217
> 
> 标签：linux, linux-kernel, operating-system, linux-device-driver

为什么我们在 linux 内核中使用等待队列而不是使用信号量进行同步？使用等待队列与信号量进行同步有什么区别？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T06:35:16.437

信号量是一种变量或抽象数据类型，它为控制并行编程环境中多个进程对公共资源的访问提供简单但有用的抽象。（**[维基百科](http://en.wikipedia.org/wiki/Semaphore_%28programming%29)**）

现在，信号量更多的是一个概念，而不是一个具体的实现。

linux**信号量**数据结构实现**使用等待队列**。如果没有等待队列，您将不知道哪个进程首先需要资源，这可能导致某些进程的等待时间非常长。等待队列**确保了公平性**，并减轻了**资源匮乏**的问题。

```
struct semaphore {
    int count; //+ve or -ve indicates resource free/busy state
    int waking; //number of waiting processes
    int lock ;  /* to make waking testing atomic */
    struct wait_queue *wait; //queued, to prevent starvation, ensure fairness
}; 
```

**[参考](http://www.tldp.org/LDP/tlk/kernel/kernel.html)**

# c# - 什么数据结构最适合存储数百万数据但占用内存最少

> ID：13116781
> 
> 赞同：0
> 
> 时间：2012-10-29T06:22:08.407
> 
> 标签：c#, algorithm, memory

我目前正在使用列表、字典和数据表来存储我的所有数据，但我想知道是否有更好的数据结构或方法（在较低级别）来存储数据以有效地使用内存。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T08:34:42.860

这取决于您的数据和使用情况。如果您只想存储数据，那么最有效的方法是将数组用于整数或浮点数（或任何其他普通旧数据），将字符串池用于字符串。

如果您需要索引数据，例如按键搜索，那么就大小而言，最有效的数据结构之一就是尝试。使用什么键类型无关紧要——整数、浮点数或字符串，trie 可用于创建索引。整数或任何其他键可以表示为二进制字符串并插入到 trie 中。有许多不同的 trie 数据结构，它们使用某种压缩来更有效地存储数据，例如 - Array Mapped Trie。您还可以在最低级别添加一些压缩，例如使用带整数的 base 128 编码或 Golomb 编码。

# android - 如何在触摸微调器时隐藏虚拟键盘

> ID：13116784
> 
> 赞同：21
> 
> 时间：2012-10-29T06:22:21.483
> 
> 标签：android, android-softkeyboard

我有一个编辑文本和一个微调器。当我触摸edittext时，键盘出现，完成文本编辑后，我触摸微调器的下拉箭头，但键盘不会自动消失。请给我一些解决方案。我试过这段代码

```
 InputMethodManager imm=(InputMethodManager)getApplicationContext().getSystemService(SetUpProfileActivity.this.INPUT_METHOD_SERVICE);
        imm.hideSoftInputFromWindow(mDateOfBirth.getWindowToken(), 0); 
```

这是xml

```
<LinearLayout
            android:id="@+id/outerlayout"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical"
            android:padding="10dp" 

            >

            <TextView
                android:id="@+id/name_view"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:text="@string/profile_name"
                android:textColor="#ffffff" />

            <EditText
                android:id="@+id/profile_name"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_marginTop="5dp"
                android:background="@drawable/txtbox"
                android:singleLine="true" />

            <TextView
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_marginTop="5dp"
                android:text="@string/dateofbirth"
                android:textColor="#ffffff" />

            <Spinner
                android:id="@+id/dob"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_marginTop="5dp"
                android:background="@drawable/dropdown" /> 
```

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-10-29T07:02:19.233

试试这个代码，我希望它对你有用。

```
mSpinner.setOnTouchListener(new OnTouchListener() {

            @Override
            public boolean onTouch(View v, MotionEvent event) {
                InputMethodManager imm=(InputMethodManager)getApplicationContext().getSystemService(Context.INPUT_METHOD_SERVICE);
                imm.hideSoftInputFromWindow(mEditText.getWindowToken(), 0);
                return false;
            }
        }) ; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-22T09:15:27.470

如果您在活动中使用 Spinner 和 EditText，那么这就是您肯定会感觉到的问题，

在您的微调器和内部调用 onTouchListener 以引用您的编辑文本并隐藏软键盘。

```
 mySpinner.setOnTouchListener(new View.OnTouchListener() {

        @Override
        public boolean onTouch(View v, MotionEvent event) {
            InputMethodManager inputMethodManager=(InputMethodManager)getApplicationContext().getSystemService(Context.INPUT_METHOD_SERVICE);
            inputMethodManager.hideSoftInputFromWindow(mReuestBloodActNotes.getWindowToken(), 0);
            return false;
        }
    }) ; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T06:25:23.100

试试这个：

```
// hide the keyboard if open
            inputManager.hideSoftInputFromWindow(getParent().getCurrentFocus()
                    .getWindowToken(), InputMethodManager.HIDE_NOT_ALWAYS); 
```

# java - 有没有办法在java中将对象的值固定为常量？

> ID：13116791
> 
> 赞同：1
> 
> 时间：2012-10-29T06:23:13.207
> 
> 标签：java, final

我们知道`final`关键字创建了对对象的常量引用。例如：

```
final Object object = new Object(); 
```

但是，在这种情况下，只有对对象的引用是固定的，在程序的执行运行时不能更改。我仍然可以在该对象上调用 setter 方法并更改其数据成员的值。有没有办法可以在 Java 中防止这种情况（相当于 C++ 中的 const ）？

我理解一种方法，我不应该为这个对象类定义设置器，或者应该只允许设置一次值，但是如果我想将此对象作为参数传递给函数并且不希望该函数更改此对象的值怎么办？数据成员。我可能仍想更改函数之外的值。

在这种情况下，函数原型应该是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T06:29:48.563

诀窍是为对象定义一个只读接口，并将设置器仅放入类中，如下所示：

```
public interface ConstInterface {
    int getFirst();
    String getSecond();
}

public class MutableClass implements ConstInterface {
    private int _first;
    private String _second;
    int getFirst() {
        return _first;
    }
    void setFirst(int f) {
        _first = f;
    }
    String getSecond() {
        return _second;
    }
    void setSecond(String s) {
        _second = s;
    }
}

final ConstInterface obj = new MutableClass(); 
```

此时，您可以`obj`通过其界面以只读方式访问。如果您需要设置属性，请`obj`转换为`MutableClass`并调用设置器。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-29T06:26:13.253

> 但是，如果我想将此对象作为参数传递给函数，并且不希望该函数更改此对象的数据成员的值，该怎么办。我可能仍想更改函数之外的值。

在这种情况下，您应该只将对象的克隆而不是对象本身传递给方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-29T06:31:31.023

你有几个解决方案。

1.  首先，您可以通过设计解决它。创建没有可以修改对象状态的方法的接口。例如，它将仅包含 getter。现在变量类型是接口。客户端将无法修改状态。
2.  如果你的类实现了接口，你可以使用动态代理来包装它，防止调用 setter。顺便说一句，如果您的班级实际上是集合或地图，您可以使用`Collections.unmodifireableMap()`或`Collections.unmodifireableList()`使其确实不可修改。
3.  您可以使用字节码工程。即使您的类没有实现任何接口，这也将起作用。有两种方法可以做到这一点。javassist 和 cglib 等库允许创建包装具体类的动态代理。因此，您可以使用使用这些库之一创建的代理来包装您的对象。调用 setter 时代理会抛出异常。
4.  在编译时使用字节码修改。例如 AspectJ 可以帮助你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T06:28:53.630

另一种选择是创建一个委托，它覆盖所有将更改对象状态的方法，而是抛出异常或执行空操作。

# c# - 在 detailsview 更新模式下务实地将项目添加到下拉列表并绑定数据

> ID：13116796
> 
> 赞同：0
> 
> 时间：2012-10-29T06:23:51.007
> 
> 标签：c#, asp.net

我有一个带有下拉列表的详细视图

```
<asp:TemplateField HeaderText="nid" SortExpression="nid">
                <EditItemTemplate>
                    <asp:DropDownList ID="DropDownList1" runat="server" onclick="btnUpdate_Click">
                    </asp:DropDownList>
                </EditItemTemplate>
                <InsertItemTemplate>
                    <asp:TextBox ID="TextBox1" runat="server" Text='<%# Bind("nid") %>'></asp:TextBox>
                </InsertItemTemplate>
                <ItemTemplate>
                    <asp:Label ID="Label1" runat="server" Text='<%# Bind("nid") %>'></asp:Label>
                </ItemTemplate>
            </asp:TemplateField> 
```

我想在使用单击更新按钮时添加项目而不是将数据绑定到下拉列表

这是功能

```
protected void btnUpdate_Click(object sender, EventArgs e)
{
    Response.Write("abc");
    Node node = new Node();

    node.buildTree("all", "arraylist");
    al.Add(null);
    al = node.getArrayList();

    node.flushContent();
    DropDownList DropDownList1 = (DropDownList)DetailsView1.FindControl("DropDownList1");
    //DetailsView1.DropDownList1.Items.Clear();

    DropDownList1.Items.Add(new ListItem("ROOT", ""));
    foreach (pair item in al)
    {
        DropDownList1.Items.Add(new ListItem(item.getTitle(), item.getId()));
    }
} 
```

我不知道我的方向是否正确，但上面的代码不起作用~有人可以帮忙吗？

谢谢

# jquery - 验证文本区域的长度

> ID：13116797
> 
> 赞同：0
> 
> 时间：2012-10-29T06:24:02.473
> 
> 标签：jquery

嗨，我正在使用 SMS 面板，我想检查文本区域的长度，现在我正在使用这些代码：

```
 $("#txt").keydown(function () {
            var len = $(this).val().length;
            $("#lbl").text(len);
            if (len <= 70) {
                $("#lbl").text("One SMS");
                if (confirm("more than one sms are you sure?")) {
                    $("#lbl").text(len);
                }
            }
            else if (len >= 71 && len <= 133) {
                $("#lbl").text("two SMS");
                if (confirm("more than two sms are you sure?")) {
                    $("#lbl").text(len);
                }
            }
            else if (len > 134 && len <= 199) {
                $("#lbl").text("three SMS");
                alert("more than three sms are you sure?");
            }
        }); 
```

我想当我将文本粘贴到 textArea 时显示警报并选择 no cant input any

谢谢你的建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T06:27:23.767

你的意思是：

```
else if (len >= 71 && len <= 133) {
     $("#lbl").text("two SMS");
     if (confirm("more than two sms are you sure?")) {
         $("#lbl").text(len);
     }
}
else if (len >= 134 && len <= 199) {
       $("#lbl").text("three SMS");
       alert("more than three sms are you sure?");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T07:00:21.810

> 但它并不完美，

我可以看到的一个错误是，它不能完美地工作，你已经使用 keydown 事件来查找长度，所以如果你复制和粘贴没有发生 Keydown 事件，所以你找不到那里的长度，所以您可以在文本框的 onchange 事件中编写相同的函数，以便在复制和粘贴数据时也可以找到长度

```
 $("input").change(function(){
    //your function of finding the length goes here
  }); 
```

如果您发布确切的问题，将更容易获得帮助。

希望这会有所帮助：D

# ruby-on-rails - Pusher 实时聊天小部件不适用于 Ruby on Rails

> ID：13116798
> 
> 赞同：2
> 
> 时间：2012-10-29T06:24:04.440
> 
> 标签：ruby-on-rails, widget, chat, pusher

我试图将 pusher 集成到我的 ruby​​ on rails 应用程序中。但是，我无法使用教程中提供的步骤发送消息。

到目前为止，我已经完成了以下工作： 1\. 按照教程中的步骤进行操作 2\. 让聊天 UI 显示为我想要的 URL。3\. 使用 Sinatara 让 Demo 在我的本地主机上运行。

我必须采取哪些特殊步骤才能使 Pusher 聊天适用于我的 Ruby On rails 应用程序？

教程： http: [//pusher.com/tutorials/realtime_chat_widget](http://pusher.com/tutorials/realtime_chat_widget)

# events - wxPython中的按键事件而不使用pyhook

> ID：13116799
> 
> 赞同：1
> 
> 时间：2012-10-29T06:24:05.550
> 
> 标签：events, event-handling, wxpython, keypress

好吧，我想出了一些代码来检查按下了什么键，它现在非常基本，但是随着我的进步，我将在这里更新，重点是在发生键事件时按下键

```
import wx

class Example(wx.Frame):
    def __init__(self, *args,**kw):
        super(Example, self).__init__(*args,**kw)
        self.InitUI()
    def InitUI(self):
        #frame = wx.Frame(self, style=wx.FRAME_DRAWER | wx.STAY_ON_TOP, size = (100, 100))
        #pnl= wx.Panel(frame)
        pnl= wx.Panel(self)    
        pnl.Bind(wx.EVT_KEY_DOWN, self.OnKeyDown)
        self.st1 = wx.StaticText(self, label='', pos=(30, 10))
        pnl.SetFocus()
        self.SetSize((250,180))
        self.SetTitle('Key Press Event')
        self.Centre()
        self.Show(True)

    def OnKeyDown(self, e):
        key = e.GetKeyCode()
        if  key==wx.WXK_ESCAPE:
            self.st1.SetLabel("ESCAPE")
        elif key ==wx.WXK_CONTROL:
            self.st1.SetLabel("CTRL")
        elif key==wx.WXK_ALT:
            self.st1.SetLabel("ALT")
        elif key==wx.WXK_BACK:
            self.st1.SetLabel("BACKSPACE")
        elif key== wx.WXK_EXECUTE:
            self.st1.SetLabel("ENTER KEY")
def main():
    ex = wx.App()
    Example(None)
    ex.MainLoop()

if __name__=='__main__':
    main() 
```

我正在尝试为此设置一个无边框窗口，但即使我将面板放在样式= FRAME_DRAWER 的框架中它也不起作用，STAY_ON_TOP 也没有，所以这两行被注释了，请看看你是否可以让它工作..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T18:03:31.267

面板倾向于吃掉关键事件或将它们传递给其他小部件。看

[http://wxpython-users.1045709.n5.nabble.com/Catching-key-events-from-a-panel-and-follow-up-to-stacked-panels-td2360109.html](http://wxpython-users.1045709.n5.nabble.com/Catching-key-events-from-a-panel-and-follow-up-to-stacked-panels-td2360109.html)

链接到旧线程：[http ://article.gmane.org/gmane.comp.python.wxpython/50485](http://article.gmane.org/gmane.comp.python.wxpython/50485)

引用 wxPython 的创建者 Robin Dunn 的话：

*   *将键事件处理程序绑定到所有小部件*

*   *捕获 EVT_CHILD_FOCUS 事件并将焦点重置回您想要的位置，只要焦点更改为孩子。*

*   *使用 wx.AcceleratorTable 代替按键事件，因此无论应用程序中的哪个小部件具有焦点，按键都会变成菜单事件。*

*   *将您的密钥处理程序绑定到应用程序而不是框架。所有未处理的事件在被放弃之前都会发送到应用程序对象，因此无论哪个小部件具有焦点，如果它本身不处理关键事件，那么应用程序将有机会获得它。*

您可能还会发现我关于关键事件的旧[教程](http://www.blog.pythonlibrary.org/2009/08/29/wxpython-catching-key-and-char-events/)也很有启发性。

# assembly - 在 Assembly Level Proramming 中用 db 定义一个字节后增加一个值

> ID：13116801
> 
> 赞同：2
> 
> 时间：2012-10-29T06:24:18.593
> 
> 标签：assembly, nasm

嗨，有人可以帮我解决这个问题吗？我是汇编级编程的新手。

在我的 alp 代码中，我用代码定义了一个字节：

```
count db 0 
```

在程序的另一部分中，我试图将值提取到 ah 寄存器中，并像这样向其添加 1：

```
mov ah,count
add ah,1 
```

现在，如何使用**ah**寄存器中的新值和递增值更新**count**识别的内存位置，以便我可以将其用作循环或任何其他目的的计数器？

 *** * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T07:12:29.003

`mov ah, count`行不通。在 Nasm 语法中，这会尝试将地址移动`count`到 ah... 中，但它不适合。你想要“[内容]”。

```
mov ah, [count]
inc ah
mov [count], ah 
```

你也可以...

```
inc byte [count]
; and perhaps...
cmp byte [count], MAXCOUNT
jb looptop 
```

（当然，使用`MAXCOUNT`和`looptop`定义）使用寄存器比使用内存要快，但您也可以这样做。正如 Mat 建议的那样，不要犹豫“尝试一下”！**

# batch-file - 关闭受密码保护的共享

> ID：13116805
> 
> 赞同：1
> 
> 时间：2012-10-29T06:24:45.517
> 
> 标签：batch-file, password-protection, file-sharing

我正在编写一个批处理文件来创建一个文件夹并在网络中共享它。对其的访问必须未经身份验证。该脚本已在 Windows 7 64 位中运行。我使用“net share”来共享我的文件夹和“CALCS”来修改访问控制。它工作正常，但我无法禁用受密码保护的共享。

如何使用批处理文件关闭受密码保护的共享？

# node.js - 将 url slug 标识符添加到猫鼬模式时如何迁移现有对象

> ID：13116806
> 
> 赞同：0
> 
> 时间：2012-10-29T06:24:53.527
> 
> 标签：node.js, mongodb, mongoose, slug

我目前在我的网址中使用 Mongodb ObjectIds，但我想改用这个模块： [https ://github.com/dylang/shortid](https://github.com/dylang/shortid)

但是现有的数据还没有这些数据。我怎样才能将它们全部迁移？我所看到的每一个地方，人们都在说您不需要在 noSQL 中迁移数据。

这是一个示例架构，我添加了“shortid”字段：

```
var ItemSchema = new Schema({
    name    : { type: String, required: true, trim: true }
    , description: { type: String, trim: true }
    , comments  : [CommentSchema]
    , shortid : { type: String, required: true }
}); 
```

我的意图是使用 /items/PPBqWA9 之类的网址，而不是 /items/508cbd80c0e1a44277000003

如果它不存在，我将有一个 .pre('save') 方法生成shortid。

或者，也许我可以将默认值设为调用 ShortId.generate() 的函数？

两个要求：1）永远不要更改它 2）追溯应用于现有对象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T07:39:03.563

我认为您的选择是：让您的代码处理索引可能在很长一段时间内处于过渡状态的事实，或者一次更新所有内容，然后进行一次代码更改。

后者看起来不那么凌乱，但要求您能够批量处理所有项目文档。在这种情况下，您可以：

1.  按照您的建议，使用默认值向您的架构添加唯一索引。using`schema.pre`似乎没有必要，因为`ShortId.generate`它不是异步函数调用。就像是`shortid: { type: String, default: ShortId.generate(), required: true, index: {unique: true}}`

2.  编写一个脚本来加载所有现有项目，并使用新`shortid`属性保存它们。

3.  调整其余代码以开始使用`shortid`而不是`id`.

# android - 集成 Spotify Android 库

> ID：13116815
> 
> 赞同：5
> 
> 时间：2012-10-29T06:25:23.693
> 
> 标签：android, android-ndk, spotify

所以我想将 spotify 库集成到一个 android 应用程序中。我去了[https://developer.spotify.com/technologies/libspotify/](https://developer.spotify.com/technologies/libspotify/)并下载了他们的 lib libspotify-12.1.51-Android-arm-release.tar.gz 问题是与 lib 捆绑的“Android”示例不是t 实际上是 android 项目，它们是 C 代码，lib 是一个 .so 文件。我有 android ndk 和 jni 的基本知识，但是关于将库与 android 集成的文档是不存在的。谁能提供只播放曲目的样本？或指出我可以找到样品的地方。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T12:49:54.927

不幸的是，Spotify 没有适用于 Android 的优秀 Java 库（[有关更多详细信息，请参阅此 StackOverflow 问题](https://stackoverflow.com/questions/13071610/is-there-any-lib-exists-for-libspotify-12-for-android-java)），因此您必须手动编写 JNI 包装器。由于 libspotify 的 Android 版本非常新，因此也没有任何示例，但如果很快看到文档包含它们，我不会感到惊讶。

正如@juned 在他的评论中指出的那样，这个问题详细[说明了如何让 libspotify 库与您的 Android 应用程序链接](https://stackoverflow.com/questions/13115827/)。正确链接 libspotify 后，您可以查看[一些 Android NDK 教程](https://stackoverflow.com/questions/7899740/android-ndk-tutorial-guide-for-beginners)以获得更具体的集成帮助。

如果您在集成过程中遇到问题，请务必查看 Spotify 随附的 libspotify 示例代码。该代码提供了一个很好的参考，说明如何与库中的 Spotify 服务进行正确对话。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T16:55:26.583

看看这个在 Android 上做 libspotify 的示例项目：[https ://github.com/spotify/psyonspotify](https://github.com/spotify/psyonspotify)

如自述文件中所述：

查看代码可以让您深入了解：

*   与 libspotify 集成
*   通过 JNI 进行通信
*   将原始 PCM 数据桥接到 OpenSL

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-13T15:23:10.617

Spotify 已发布适用于 android 的 SDK BETA 版本。

[https://github.com/spotify/android-sdk](https://github.com/spotify/android-sdk)

他们有一些初始化播放器和使用 TRACK_CHANGE 事件播放曲目的示例（仅在 Beta10 中可用）。这是一个不使用 TRACK_CHANGE 的：

```
 mPlayer = Spotify.getPlayer(playerConfig, this, new Player.InitializationObserver() {
            @Override
            public void onInitialized(Player player) {
                mPlayer.addConnectionStateCallback(MainActivity.this);
                mPlayer.addPlayerNotificationCallback(MainActivity.this);
                mPlayer.play("spotify:track:2TpxZ7JUBn3uw46aR7qd6V");
            }

            @Override
            public void onError(Throwable throwable) {
                Log.e("MainActivity", "Could not initialize player: " + throwable.getMessage());
            }
        }); 
```

（从教程中获取代码 - [https://developer.spotify.com/technologies/spotify-android-sdk/tutorial/](https://developer.spotify.com/technologies/spotify-android-sdk/tutorial/)）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-22T08:29:53.000

Spotify 宣布他们发布了 Android SDK ( [https://developer.spotify.com/technologies/spotify-android-sdk/](https://developer.spotify.com/technologies/spotify-android-sdk/) )。
教程在这里（[https://developer.spotify.com/technologies/spotify-android-sdk/tutorial/](https://developer.spotify.com/technologies/spotify-android-sdk/tutorial/)），因此您可以轻松地将 Spotify 集成到您的 Android 应用程序中。

# c# - 异步方法？

> ID：13116816
> 
> 赞同：2
> 
> 时间：2012-10-29T06:25:38.107
> 
> 标签：c#, multithreading, xamarin.ios

我需要在 Monotouch 中异步调用 web 服务，因为 UIAlertView 仅在工作完成后才会显示。

当前代码（伪）

```
Class LoginviewController
{
        void Login(credentials)  
        {  
            showAlert("Logging in") ;   
            bool authenticated = service.Authenticate(Credentials);  
        }
 }       

 class Service
 {
       Public bool Authenticate(object Credentials)
       {
          object[] results = this.Invoke("GetAuth", Credentials)
       }
 } 
```

我正在将 Service 方法移至异步模型，其中 Authenticate 由 Authenticate 组成`BeginAuthenticate(), EndAuthenticate(), AuthenticateAsync(), OnAuthenticateOperationCompleted()`，当然`Authenticate()`.

当所有这些都完成后，我需要在 LoginViewController 上运行 OnAuthenticateCompleted()，所以我将使用`BeginInvokeOnMainThread(delegate....`

这就是我卡住的地方。

如何获取`OnAuthenticateCompleted()`从服务类执行的 LoginViewController 类实例中的方法？

编辑：解决方案：

添加了一个在 Login() 中连接的 OnAuthenticateCompleted 事件处理程序，并调用 AuthenticateAsync() 方法而不是 Authenticate()。

```
Class LoginviewController
    {
            void Login(credentials)  
            {  
                showAlert("Logging in") ;   
                service.AuthenticateCompleted += new GetAuthenticationCompletedEventHandler(OnAuthenticateCompleted);
                service.AuthenticateAsync(Credentials);  
            }

            public void OnAuthenticateCompleted(obj sender, GetAuthenticationCompletedEventArgs args)
            {
                bool authenticated = (bool)args.Results;
                //do stuff
                hideAlert();
            }
     } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T11:44:09.570

您不是`LoginViewController.OnAuthenticateCompleted`从服务类执行，而是在完成的事件处理程序中执行它。

```
class LoginViewController
{
    void Login (credentials)
    {
        service.AuthenticateAsync (credentials, LoginCompletedCallback);
        }

    }
    void LoginCompletedCallback ()
    {
        BeginInvokeOnMainThread (OnAuthenticateCompleteded);
    }
} 
```

# php - Bigcommerce API 连接错误

> ID：13116818
> 
> 赞同：0
> 
> 时间：2012-10-29T06:25:45.070
> 
> 标签：php, api, connection, e-commerce

我是大商业的新手。

我正在尝试连接 Big-commerce 的 PHP API，下面是我的代码。

```
BigCommerce_Api::configure(array(
    'store_url' => 'mystore url',
    'username'  => 'admin',
    'api_key'   => 'my apikey'
));

$ping = BigCommerce_Api::getTime();
if ($ping) 
{
    echo $ping->format('H:i:s');
}
else
{
    echo "error in connection";
} 
```

如果连接完成但出现错误，我会尝试显示时间。

我的代码有什么问题吗？

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T17:57:12.223

默认情况下生成的 URL 看起来像`https://uniquestoreid.mybigcommerce.com/api/v2/`，当使用 BigCommerce API`api/v2`从 URL 中删除时，您的配置应该如下所示：

```
BigCommerce_Api::configure(
    array(
        'store_url' => 'https://uniquestoreid.mybigcommerce.com',
        'username'  => 'username',
        'api_key'   => 'longtokenstring'
    )
); 
```

# jquery - 在给 sumbit 按钮上的 jqGrid 中定期更改标题？on ($(document).ready(function())

> ID：13116819
> 
> 赞同：-1
> 
> 时间：2012-10-29T06:25:45.513
> 
> 标签：jquery, jqgrid

在我的项目中，我必须将所选状态显示为 jqGrid 中的标题。但`$(document).ready(function()`仅在 jqGrid 中显示第一个值。`$(document).ready(function()`我如何更改 ( )上 jqGrid 中的下一个值。

`$(document).ready(function()`，它只会加载第一个条件我如何获得下一个值。

```
$(document).ready(function(){

    current_search = $('#search_type').val();
    var Statevalue = $('#stateId').val(); 
    alert('ss'+Statevalue);
    var tableheadings="";

    if(Statevalue=='MD')
    {
        tableheadings = 'Maryland' ;
    }
    else if(Statevalue=='DC')
    {
        tableheadings= 'District Of Columbia';
    }else
    {
        tableheadings='Virginia';
    } 
```

在这它将完成`'MD'`唯一的`$(document).ready(function()`. 我将如何为和设置`dc`标题`vr`。

我的字幕语法：

```
$("#list1").jqGrid('setCaption',
    'Incident Listing By Congressional District :' + tableheadings); 
```

我需要如何访问`$(document).ready(function()`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T01:50:31.403

您应该在 jqgrid 的加载完成操作时执行此操作。像这样想。您的 jqgrid 在 dom 准备好后被加载，一旦完成，您就可以运行 onLoadComplete 函数并更改标题。如果你在加载完成之前这样做，那么 jqgrid 将替换它。

# android - 如何使用 google api ANDROID 将地点添加到谷歌地图

> ID：13116831
> 
> 赞同：1
> 
> 时间：2012-10-29T06:27:13.597
> 
> 标签：android, google-maps

我目前正在研究如何在我的 android 应用程序中使用 google api 将地点添加到 google 地图。我可以使用 google api 自动完成位置，也可以让反向地理编码工作。我编写了添加地点的代码，但是当我在我的应用程序中添加位置时，未添加图钉。我不知道我的错误在哪里。但我想是我的 google api url 有问题。

**下面是我的代码：**

```
class addPlaces extends AsyncTask<String, String, PlacesList> {

    @Override
    protected PlacesList doInBackground(String... arg0) {
        try {
            Log.v(LOG_KEY, "Adding Place...");
            GenericUrl reqUrl = new GenericUrl(PLACE_ADD_URL);
            reqUrl.put("key", API_KEY);
            reqUrl.put("sensor", "false");
            Log.v(LOG_KEY, "Adding Place...");
            // reqUrl.put("Host:", "maps.googleapis.com");
            /*
             * reqUrl.put( "Host: maps.googleapis.com",
             * "{\"location\":{\"lat\":" + Double.toString(lat) +
             * ",\"lng\":" + Double.toString(lon) +
             * "},\"accuracy\":50.0,\"name\":\"event\",\"types\":[\"school\"],\"language\":\"en\"}"
             * );
             */
            reqUrl.put(
                    "Host: maps.googleapis.com",
                    "{\"location\":{\"lat\":1.347988,\"lng\":103.936179},\"accuracy\":50.0,\"name\":\"events\",\"types\":[\"school\"],\"language\":\"en\"}");
            Log.v(LOG_KEY, "Requested URL= " + reqUrl);

            HttpRequestFactory httpRequestFactory = createRequestFactory(HTTP_TRANSPORT);
            HttpRequest request = httpRequestFactory
                    .buildGetRequest(reqUrl);

            Log.v(LOG_KEY, request.execute().parseAsString());
            place = request.execute().parseAs(PlacesList.class);

            Log.v(LOG_KEY, "STATUS = " + place.status);
            Log.v(LOG_KEY, "Place Added is = " + place);
            return place;

        } catch (HttpResponseException e) {
            // Log.v(LOG_KEY, e.getResponse().parseAsString());
            Log.v(LOG_KEY, e.getMessage());
            try {
                throw e;
            } catch (HttpResponseException e1) {
                e1.printStackTrace();
            }
        } catch (IOException e) {
            e.printStackTrace();
        }
        return place;
    }
} 
```

**已编辑**

```
public class AddItemizedOverlay extends ItemizedOverlay<OverlayItem> {

   private ArrayList<OverlayItem> mapOverlays = new ArrayList<OverlayItem>();

   private Context context;

   public AddItemizedOverlay(Drawable defaultMarker) {
        super(boundCenterBottom(defaultMarker));
   }

   public AddItemizedOverlay(Drawable defaultMarker, Context context) {
        this(defaultMarker);
        this.context = context;
   }

   @Override
   public boolean onTouchEvent(MotionEvent event, MapView mapView)
   {   

       if (event.getAction() == 1) {
           GeoPoint geopoint = mapView.getProjection().fromPixels(
               (int) event.getX(),
               (int) event.getY());
           // latitude
           double lat = geopoint.getLatitudeE6() / 1E6;
           // longitude
           double lon = geopoint.getLongitudeE6() / 1E6;
           //Toast.makeText(context, "Lat: " + lat + ", Lon: "+lon, Toast.LENGTH_SHORT).show();
       }
       return false;
   } 

   @Override
   protected OverlayItem createItem(int i) {
      return mapOverlays.get(i);
   }

   @Override
   public int size() {
      return mapOverlays.size();
   }

   @Override
   protected boolean onTap(int index) {
     OverlayItem item = mapOverlays.get(index);
     AlertDialog.Builder dialog = new AlertDialog.Builder(this.context);
     dialog.setTitle(item.getTitle());
     dialog.setMessage(item.getSnippet());
     dialog.setPositiveButton("OK", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int which) {
        }
    });
     dialog.show();
     return true;
   }

   public void addOverlay(OverlayItem overlay) {
      mapOverlays.add(overlay);
   }

   public void populateNow(){
       this.populate();
   }

} 
```

**覆盖**

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.map_places);

    // Getting intent data
    Intent i = getIntent();

    // Users current geo location
    String user_latitude = i.getStringExtra("user_latitude");
    String user_longitude = i.getStringExtra("user_longitude");

    // Nearplaces list
    nearPlaces = (PlacesList) i.getSerializableExtra("near_places");

    mapView = (MapView) findViewById(R.id.mapView);
    mapView.setBuiltInZoomControls(true);

    mapOverlays = mapView.getOverlays();

    // Geopoint to place on map
    geoPoint = new GeoPoint((int) (Double.parseDouble(user_latitude) * 1E6),
            (int) (Double.parseDouble(user_longitude) * 1E6));

    // Drawable marker icon
    Drawable drawable_user = this.getResources()
            .getDrawable(R.drawable.mark_red);

    itemizedOverlay = new AddItemizedOverlay(drawable_user, this);

    // Map overlay item
    overlayitem = new OverlayItem(geoPoint, "Your Location",
            "That is you!");

    itemizedOverlay.addOverlay(overlayitem);

    mapOverlays.add(itemizedOverlay);
    itemizedOverlay.populateNow();

    // Drawable marker icon
    Drawable drawable = this.getResources()
            .getDrawable(R.drawable.mark_blue);

    itemizedOverlay = new AddItemizedOverlay(drawable, this);

    mc = mapView.getController();

    // These values are used to get map boundary area
    // The area where you can see all the markers on screen
    int minLat = Integer.MAX_VALUE;
    int minLong = Integer.MAX_VALUE;
    int maxLat = Integer.MIN_VALUE;
    int maxLong = Integer.MIN_VALUE;

    // check for null in case it is null
    if (nearPlaces.results != null) {
        // loop through all the places
        for (Place place : nearPlaces.results) {
            latitude = place.geometry.location.lat; // latitude
            longitude = place.geometry.location.lng; // longitude

            // Geopoint to place on map
            geoPoint = new GeoPoint((int) (latitude * 1E6),
                    (int) (longitude * 1E6));

            // Map overlay item
            overlayitem = new OverlayItem(geoPoint, place.name,
                    place.vicinity);

            itemizedOverlay.addOverlay(overlayitem);

            // calculating map boundary area
            minLat  = (int) Math.min( geoPoint.getLatitudeE6(), minLat );
            minLong = (int) Math.min( geoPoint.getLongitudeE6(), minLong);
            maxLat  = (int) Math.max( geoPoint.getLatitudeE6(), maxLat );
            maxLong = (int) Math.max( geoPoint.getLongitudeE6(), maxLong );
        }
        mapOverlays.add(itemizedOverlay);

        // showing all overlay items
        itemizedOverlay.populateNow();
    }

    // Adjusting the zoom level so that you can see all the markers on map
    mapView.getController().zoomToSpan(Math.abs( minLat - maxLat ), Math.abs( minLong - maxLong ));

    // Showing the center of the map
    mc.animateTo(new GeoPoint((maxLat + minLat)/2, (maxLong + minLong)/2 ));
    mapView.postInvalidate();

}

@Override
protected boolean isRouteDisplayed() {
    return false;
} 
```

# c# - 数据未插入数据库

> ID：13116832
> 
> 赞同：1
> 
> 时间：2012-10-29T06:27:18.417
> 
> 标签：c#, sql-server-2008-express

```
String nam = name.Text;
SqlConnection cn = new SqlConnection("Data Source=.\\SQLEXPRESS;AttachDbFilename=|DataDirectory|\\test.mdf;Integrated Security=True;User Instance=True");
SqlCommand cmd = new SqlCommand("INSERT INTO tab(tname)VALUES(@val)", cn);
cmd.Parameters.AddWithValue("@val", nam);
cn.Open();
int cnt = cmd.ExecuteNonQuery();
MessageBox.Show("Message:" + cnt);
cn.Close(); 
```

这是我的代码。消息显示`Message:1`。但是该值未插入数据库测试中。表名是带有列名的选项卡`tname`。

可能会出什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T06:31:33.583

这整个*User Instance 和 AttachDbFileName=*方法是有缺陷的 - 充其量！Visual Studio 将围绕`.mdf`文件进行复制（复制到 Visual Studio 从中运行您的应用程序的输出目录），并且**很可能**您的`INSERT`工作正常 - 但您最终只是查看了**错误的 .mdf 文件**！

如果您想坚持使用这种方法，请尝试在`cn.Close()`调用上设置断点 - 然后`.mdf`使用 SQL Server Mgmt Studio Express 检查文件 - 我几乎可以肯定您的数据在那里。

**我认为真正的解决**方案是

1.  安装 SQL Server Express（反正你已经完成了）

2.  安装 SQL Server Management Studio Express

3.  **在SSMS Express**中创建您的数据库，给它一个逻辑名称（例如`TestDB`）

4.  使用它的逻辑**数据库名称**（在服务器上创建它时给出）连接到它——不要乱用物理数据库文件和用户实例。在这种情况下，您的连接字符串将类似于：

    ```
    Data Source=.\\SQLEXPRESS;Database=TestDB;Integrated Security=True 
    ```

    其他一切都和以前**完全**一样...

# java - 在Java中为链中的变量赋值

> ID：13116833
> 
> 赞同：5
> 
> 时间：2012-10-29T06:27:22.643
> 
> 标签：java, arrays, variable-assignment

> **可能重复：**
> [Java - 操作顺序 - 在一行中使用两个赋值运算符](https://stackoverflow.com/questions/9440844/java-order-of-operations-using-two-assignment-operators-in-a-single-line)

如果我们在链中为变量赋值，如下所示，

```
int x=10, y=15;
int z=x=y;

System.out.println(x+" : "+y+" : "+z); 
```

那么所有三个变量的值`x`，`y`和`z`变为`15`。

* * *

但是，我不理解数组的以下现象。

```
int array[]={10, 20, 30, 40, 50};
int i = 4;

array[i] = i = 0;    
System.out.println(array[0]+" : "+array[1]+" : "+array[2]+" : "+array[3]+" : "+array[4]); 
```

它输出`10 : 20 : 30 : 40 : 0`. `array[4]`它用替换最后一个元素的值`0`。

关于之前的赋值语句 - `int z=x=y;`，我希望第一个元素的值意味着`array[0]`替换为`0`. 为什么不是这样？这很简单，但我无法弄清楚。你能解释一下吗？

* * *

顺便说一句，这个赋值语句`array[i] = i = 0;`是虚拟的，它在这段代码中没有自己的价值，不应该再使用，但我只是想知道在这种情况下事情是如何工作的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-29T06:31:36.617

`int i = 4;`当 i 等于 4 时，`array[i]`等于`array[4]`so`array[i] = i = 0;`等于`array[4] = i = 0;`. 这就是它将索引 4 的值更改为 0 的方式。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-29T06:42:27.067

**分隔符 [] 和 () 更改优先级。这些分隔符内的所有内容都将在 Java 向外查看之前进行计算。**

```
array[i] = i = 0; 
```

在编译器阶段，此行的第一次更改将发生如下：

```
array[4] = i = 0; // subscript separator is evaluated first. 
```

现在，赋值操作是右关联的，因此，`i`被赋值`0`，然后 array[4] 被赋值为`i`ie `0`。

检查以下链接：

*   [http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.7](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.7)
*   [http://docs.oracle.com/javase/specs/jls/se7/html/jls-3.html#jls-3.12](http://docs.oracle.com/javase/specs/jls/se7/html/jls-3.html#jls-3.12)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-29T06:47:19.280

让我打破它......

**您的声明：**

`int array[]={10, 20, 30, 40, 50};`

**执行：**

```
array[0] => 10

array[1] => 20

array[2] => 30

array[3] => 40

array[4] => 50 
```

**您的声明：**

`int i = 4;`

**执行：**

```
i => 4 
```

**您的声明：**

`array[i] = i = 0;`

**执行：**

```
array[4] = i = 0;

array[4] = 0 
```

好吧，如果您愿意`array[0] => 0`，请执行此操作...

```
int i = 0;

array[i] = i = 0 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-29T06:34:09.613

因为`array[i]`在赋值操作之前被评估

# android - File Not Found Exception while trying this code for autoupdate of .apk file

> ID：13116847
> 
> 赞同：0
> 
> 时间：2012-10-29T06:28:36.610
> 
> 标签：android

i am using commonsware sample application for auto update of my application which will be placed on server. but it is throwing me the exception of ClassNotFound

Logcat

```
10-29 12:08:45.164: E/CWAC-Update(361): Exception in applying update
10-29 12:08:45.164: E/CWAC-Update(361): java.io.FileNotFoundException: /.CWAC-Update/update.apk (No such file or directory)
10-29 12:08:45.164: E/CWAC-Update(361):     at org.apache.harmony.luni.platform.OSFileSystem.openImpl(Native Method)
10-29 12:08:45.164: E/CWAC-Update(361):     at org.apache.harmony.luni.platform.OSFileSystem.open(OSFileSystem.java:152)
10-29 12:08:45.164: E/CWAC-Update(361):     at java.io.FileOutputStream.<init>(FileOutputStream.java:97)
10-29 12:08:45.164: E/CWAC-Update(361):     at java.io.FileOutputStream.<init>(FileOutputStream.java:69)
10-29 12:08:45.164: E/CWAC-Update(361):     at com.commonsware.cwac.updater.SimpleHttpDownloadStrategy.openDownloadFile(SimpleHttpDownloadStrategy.java:92)
10-29 12:08:45.164: E/CWAC-Update(361):     at com.commonsware.cwac.updater.SimpleHttpDownloadStrategy.downloadAPK(SimpleHttpDownloadStrategy.java:48)
10-29 12:08:45.164: E/CWAC-Update(361):     at com.commonsware.cwac.updater.UpdateService.downloadAndInstall(UpdateService.java:70)
10-29 12:08:45.164: E/CWAC-Update(361):     at com.commonsware.cwac.updater.UpdateService.doWakefulWork(UpdateService.java:36)
10-29 12:08:45.164: E/CWAC-Update(361):     at com.commonsware.cwac.wakeful.WakefulIntentService.onHandleIntent(WakefulIntentService.java:103)
10-29 12:08:45.164: E/CWAC-Update(361):     at android.app.IntentService$ServiceHandler.handleMessage(IntentService.java:59)
10-29 12:08:45.164: E/CWAC-Update(361):     at android.os.Handler.dispatchMessage(Handler.java:99)
10-29 12:08:45.164: E/CWAC-Update(361):     at android.os.Looper.loop(Looper.java:123)
10-29 12:08:45.164: E/CWAC-Update(361):     at android.os.HandlerThread.run(HandlerThread.java:60)
10-29 12:17:39.586: E/CWAC-Update(436):     at org.apache.harmony.luni.platform.OSFileSystem.openImpl(Native Method) 
```

Here is the code

```
/***
Copyright (c) 2012 CommonsWare, LLC

Licensed under the Apache License, Version 2.0 (the "License"); you may
not use this file except in compliance with the License. You may obtain
a copy of the License at
  http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
 */

package com.example.medecure;

import android.app.Activity;
import android.app.Notification;
import android.os.Build;
import android.os.Bundle;
import android.util.Log;
import android.widget.TextView;

import com.commonsware.cwac.updater.ConfirmationStrategy;
import com.commonsware.cwac.updater.DownloadStrategy;
import com.commonsware.cwac.updater.InternalHttpDownloadStrategy;
import com.commonsware.cwac.updater.NotificationConfirmationStrategy;
import com.commonsware.cwac.updater.SimpleHttpDownloadStrategy;
import com.commonsware.cwac.updater.SimpleHttpVersionCheckStrategy;
import com.commonsware.cwac.updater.UpdateRequest;
import com.commonsware.cwac.updater.VersionCheckStrategy;

public class UpdaterDemoActivity extends Activity {
  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    TextView versionCodeLabel=(TextView)findViewById(R.id.versionCode);

    try {
      int currentVersionCode=
          getPackageManager().getPackageInfo(getPackageName(), 0).versionCode;

      versionCodeLabel.setText(String.valueOf(currentVersionCode));
    }
    catch (Exception e) {
      Log.e("UpdaterDemoActivity", "An impossible exception", e);
    }

    UpdateRequest.Builder builder=new UpdateRequest.Builder(this);
    builder.setVersionCheckStrategy(buildVersionCheckStrategy())
           .setPreDownloadConfirmationStrategy(buildPreDownloadConfirmationStrategy())
           .setDownloadStrategy(buildDownloadStrategy())
           .setPreInstallConfirmationStrategy(buildPreInstallConfirmationStrategy())
           .execute();
  }

  VersionCheckStrategy buildVersionCheckStrategy() {
    return(new SimpleHttpVersionCheckStrategy(
               "http://www.medecure.com/v2/android/update.json"));
                                           //   "http://misc.commonsware.com/update.json"));
  }

  @SuppressWarnings("deprecation")
ConfirmationStrategy buildPreDownloadConfirmationStrategy() {
    // return(new ImmediateConfirmationStrategy());
    Notification n=
        new Notification(android.R.drawable.stat_notify_chat,
                         "Update availalble", System.currentTimeMillis());

    n.setLatestEventInfo(this, "Update Available",
                         "Click to download the update!", null);
    n.flags|=Notification.FLAG_AUTO_CANCEL;

    return(new NotificationConfirmationStrategy(n));
  }

  DownloadStrategy buildDownloadStrategy() {
    if (Build.VERSION.SDK_INT>=11) {
      return(new InternalHttpDownloadStrategy());
    }

    return(new SimpleHttpDownloadStrategy());
  }

  @SuppressWarnings("deprecation")
ConfirmationStrategy buildPreInstallConfirmationStrategy() {
//    return(new ImmediateConfirmationStrategy());
    Notification n=
        new Notification(android.R.drawable.stat_notify_chat,
                         "Update ready to install", System.currentTimeMillis());

    n.setLatestEventInfo(this, "Update Ready to Install",
                         "Click to install the update!", null);
    n.flags|=Notification.FLAG_AUTO_CANCEL;

    return(new NotificationConfirmationStrategy(n));
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T06:44:23.557

There's two accepted ways to include jar libraries for Android:

1.  Place the library in the `libs/` folder at the root of your project.
2.  Include the library in your build path. If you choose this route, you will also need to export the library (Under Order and Exports in Eclipse).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T06:34:43.970

Check your build path. The libraries may not be in your build path. The error clearly says that it's not able to find the class.

```
om.commonsware.cwac.updater.UpdateRequest

```

# javascript - 如何监控来自父网站的子网站点击次数（使用 iframe 添加）

> ID：13116852
> 
> 赞同：0
> 
> 时间：2012-10-29T06:29:02.480
> 
> 标签：javascript, jquery

我有一个名为 A 的网站我想通过 A 使用 iframe 显示另一个名为 myFrame 的网站我想计算 myFrame 中的所有点击次数并希望在我的网站中显示 A.myFrame 网站位于不同的域中。我做了以下代码，但它不工作

```
<html>
<body>
Count: <span id="clicks">0</span>
<iframe id="myframe" src="http://www.myFrame.com" class="restricted" height="400px;" width="400px;" scrolling="no" frameborder="0">     
</iframe>
</body>
</html>

<script language="javascript">
$(function() {
    var clicks = 0;
    $('#myframe').contents().find('a').bind('click', function(e) {
        e.preventDefault();
        clicks++;
        $('#clicks').html(clicks);
    });
});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T06:43:22.683

您可以探索许多[点击劫持利用方法](http://en.wikipedia.org/wiki/Clickjacking)，但您要求的方法是不可能的，因为它违反了[同源策略](http://code.google.com/p/browsersec/wiki/Part2)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T06:49:11.277

不，伙计，我认为如果它在其他域上是不可能的，否则如果你可以在同一个域上获得它，那么可以通过加载函数获取所有 html，然后过滤所有正文并检查是否尝试了任何点击它并相应地更新点击！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T06:44:35.447

主流浏览器禁止跨域脚本。`--disable-web-security`但是您可以通过添加作为程序参数在 Chrome 中禁用它（这对您的安全非常非常危险） 。不过，我不知道如何在其他浏览器中执行此操作。

# android - Android：如何画一条有一定时间延迟的线？

> ID：13116853
> 
> 赞同：0
> 
> 时间：2012-10-29T06:29:04.177
> 
> 标签：android, drawing, line

我正在使用线条绘制字母 A ，如果我给出了绘制 A 的界限，它将显示完整的 A ，但我想逐条显示每一行，在绘制下一行之间有一些时间延迟。

告诉我这个想法。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T06:38:08.487

使用动画，您可以获得所需的输出。当第一个动画结束时，下一个开始，依此类推。 [http://developer.android.com/reference/android/view/animation/Animation.html](http://developer.android.com/reference/android/view/animation/Animation.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T06:38:21.483

使用[`Timer`](http://developer.android.com/reference/java/util/Timer.html)and[`TimerTask`](http://developer.android.com/reference/java/util/TimerTask.html)具有固定的延迟。

# c# - 是否可以使用 C# 在 ArrayList 中存储多种数据类型？

> ID：13116855
> 
> 赞同：4
> 
> 时间：2012-10-29T06:29:15.730
> 
> 标签：c#

在 C# 中，我可以在 ArrayList 中存储多种数据类型吗？像;

```
myArrayList.Add(false);
myArrayList.Add("abc");
myarrayList.Add(26);
myArrayList.Add(obj); 
```

我知道我可以为它制作一个 DataTable 或一个类。

但是，请告诉我：这可能吗？如果是这样，作为一个集合类的缺点是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-29T06:59:30.973

是的，你可以这样存储

```
ArrayList aa = new ArrayList();
aa.Add(false);
aa.Add(1);
aa.Add("Name"); 
```

ArrayList 属于 C# 没有泛型的时代。它已被弃用，取而代之的是 List。除非您必须与使用它的旧 API 交互，否则不应在针对 .NET >= 2.0 的新代码中使用 ArrayList。

[C# 中的 ArrayList 与 List<>](https://stackoverflow.com/questions/2309694/arraylist-vs-list-in-c-sharp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T06:43:05.210

我想`List<object>`帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T07:08:04.573

是的，您可以在 ArrayList 中存储不同类型的对象，但是就像 pst 提到的那样，以后处理它们很痛苦。

如果这些值以某种方式相关，则最好编写一个类来保存它们。这将为您提供强类型，并且将命名值，以便其他查看代码的人有机会了解正在发生的事情。

# c# - 防止 Windows 关闭

> ID：13116856
> 
> 赞同：1
> 
> 时间：2012-10-29T06:29:20.150
> 
> 标签：c#, winforms

我正在使用 Windows 窗体，如果用户尝试关闭窗口或尝试在进程完成之前关闭应用程序（用户忘记完成进程），我想向用户显示进程未完成的消息，如果用户按下确定，我想阻止窗口关闭并让用户完成该过程，我确实在网上找到了一些代码，但它是在 VB 中而不是在 c#

```
private void Form1_FormClosing(object sender, FormClosingEventArgs e)
{
    if (e.CloseReason.Equals(CloseReason.WindowsShutDown))
    {
        Microsoft.VisualBasic.Interaction.Shell("shutdown -a", AppWinStyle.MinimizedFocus, false, -1);
        MessageBox.Show("Shutdown process cancelled!");
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T06:35:19.443

最好改用这段代码片段，`e.Cancel`根据您的要求使用：

```
private void Form1_FormClosing(object sender, FormClosingEventArgs e)
{
    if (e.CloseReason.Equals(CloseReason.WindowsShutDown))
    {
       if (MessageBox.Show("You are closing this app.\n\nAre you sure you wish to exit ?", "Warning: Not Submitted", MessageBoxButtons.YesNoCancel, MessageBoxIcon.Stop) == DialogResult.Yes)
           return;    
       else    
           e.Cancel = true;
    }
} 
```

参考：[SystemEvents.SessionEnding 事件](http://msdn.microsoft.com/en-US/library/microsoft.win32.systemevents.sessionending%28VS.80%29.aspx)

> 当用户尝试注销或关闭系统时发生。

# c# - 在c#中读取写入Excel文件

> ID：13116859
> 
> 赞同：0
> 
> 时间：2012-10-29T06:29:35.357
> 
> 标签：c#, user-interface

我在用 C# 读写 Excel 文件时有点困惑。我在我的应用程序中使用 Interop.Excel.dll。

现在这在我的本地机器上运行良好。我已经安装了 MS Excel。但是，当我在**未安装 MS Excel 的服务器上**运行此应用程序时，它会生成异常。

尽管我已经引用了 dll，但我是否需要安装 MS Excel。

请指导我。

这是例外。

```
===================START=====================
    10/27/2012 7:48:52 PM
    System.Runtime.InteropServices.COMException (0x80040154): Retrieving the COM class factory for component with CLSID {00024500-0000-0000-C000-000000000046} failed due to the following error: 80040154 Class not registered (Exception from HRESULT: 0x80040154 (REGDB_E_CLASSNOTREG)).
       at System.RuntimeTypeHandle.CreateInstance(RuntimeType type, Boolean publicOnly, Boolean noCheck, Boolean& canBeCached, RuntimeMethodHandleInternal& ctor, Boolean& bNeedSecurityCheck)
       at System.RuntimeType.CreateInstanceSlow(Boolean publicOnly, Boolean skipCheckThis, Boolean fillCache)
       at System.RuntimeType.CreateInstanceDefaultCtor(Boolean publicOnly, Boolean skipVisibilityChecks, Boolean skipCheckThis, Boolean fillCache)
       at System.Activator.CreateInstance(Type type, Boolean nonPublic)
       at ImpExpExcelFile.Form1.generateExcel(String loginId, String fileName, DataSet newValues)
    ====================END====================== 
```

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T21:53:15.283

我在 Expected Behavior 工作，我们有一个名为 DocRaptor 的 HTML 到 Excel 的 API，它可以将 HTML 转换为 Excel，而无需在服务器端安装 Excel。

DocRaptor 是一个 Ruby on Rails 应用程序，但您可以使用 C# 通过 HTTP POST 请求生成 Excel 文档。

这是 DocRaptor 主页的链接： [DocRaptor](http://docraptor.com/)

以及指向我们的 C# 示例代码的链接： [DocRaptor C# Example](http://docraptor.com/documentation/examples_csharp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T06:38:54.197

Ofc 你需要安装 MS Excel。Interop.Excel.dll 只是接口包装器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T06:37:43.853

必须安装 Excel。安装，然后重试。不使用 Excel 无法工作

# merge - 如何在 Enterprise Architect 中合并 EAP 文件

> ID：13116861
> 
> 赞同：3
> 
> 时间：2012-10-29T06:29:48.520
> 
> 标签：merge, enterprise-architect

如果两个人正在处理同一个 EAP 文件并且稍后想要合并它。他们能做到吗？

是否可以合并两个 EAP 文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T16:47:40.593

**我最初接受的答案：（另请注意下面的 2018 年更新）**

看看这个手​​册部分： [http ://www.sparxsystems.com/enterprise_architect_user_guide/projects_and_teams/teamdevelopment.html](http://www.sparxsystems.com/enterprise_architect_user_guide/projects_and_teams/teamdevelopment.html)

与所有协作一样，当多人处理相同的数据时，就有可能引发冲突。

在 EA 方面，最直接的方法是 XMI 传输（导入/导出）。

如果您定期协作，您可能希望设置更高级的版本控制。（见上面的链接）小心，功能可用性取决于您使用的 EA 版本。

[正如这里所指出](https://stackoverflow.com/questions/7653504/how-can-several-users-work-on-the-same-enterprise-architect-file-ea-collaborat)的，小型团队可以访问和处理 FS 上完全相同的文件。

**2018 年更新：**

用户指南已更新，可通过新 URL 获得。[当前的用户指南页面](http://www.sparxsystems.com/enterprise_architect_user_guide/14.0/model_repository/teamdevelopment.html)现在区分了以下方法

1.  EA 文件的网络部署
2.  复制（包括一个[处理合并冲突的子页面](http://www.sparxsystems.com/enterprise_architect_user_guide/14.0/model_repository/replication.html)）
3.  XMI 导出/导入

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-10T12:51:06.317

同时，有一个 LieberLieber avbailable 的第 3 方解决方案，Model Versioner，您可以使用它在模型级别区分和合并 EAP 文件： [https ://lemontree.lieberlieber.com](https://lemontree.lieberlieber.com)

# symfony - 如何在检索时自定义 symfony2 表单？

> ID：13116862
> 
> 赞同：1
> 
> 时间：2012-10-29T06:30:03.967
> 
> 标签：symfony, symfony-forms

我有一个案例，我们为体育赛事创建注册。

注册包含特定于每项运动的一些字段。其中一些将被类似命名，尽管它们对于每项运动都会有所不同。示例：“球场上最喜欢的位置”：

对于篮球，它将是以下之间的选择领域：

*   控球后卫
*   得分后卫
*   ETC...

对于棒球，这将是相同的选择字段，但有一些不同的选择：

*   投手
*   内场
*   外场
*   ...

首次创建表单（用于显示）时，运动作为注册数据的一部分传递：

```
$registration = new Registration;
$registration->setEvent($event); 
```

并将`$event->getSport();`为该赛事归还这项运动。

到目前为止一切顺利，并为我的表单生成添加了一个监听器，我只能设置特定于该运动的字段：

```
public static function getSubscribedEvents()
{
    return [FormEvents::POST_SET_DATA => 'preSetData'];
}

/**
 * @param event DataEvent
 */
public function preSetData(DataEvent $event)
{
    $form = $event->getForm();

    if (null === $event->getData()) {
        return;
    }

    // (The get event here means the real life sports gathering)
    $sport = $event->getData()->getEvent()->getSport();
    /**
     * Then I customize the fields depending on the current sport
     */
} 
```

当用户提交此表单时，问题就出现了。在这种情况下，`$event->getData()->getEvent()`是`null`。

“事件”（现实生活中的一个）是`document_id`注册表单中的一个字段（此处使用 MongoDB）。

如果我听`::BIND`事件而不是`::PRE_SET_DATA`，那么我可以访问所有内容，但是自定义表单已经太晚了，因为它已经绑定了。`::PRE_BIND`做同样的事情`::PRE_SET_DATA`。

如何在此处正确检索我的赛事和运动文件，以便自定义我的表格并适当地验证它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T08:04:50.810

Why would you need an event to do such task? You can define the fields in the `buildForm()` action of the form class. To access the event object simply use `$options['data']->getEvent()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T06:11:26.027

所以......终于找到了如何正确地做到这一点。它需要订阅两个不同的事件。

第一次构建表单时，会将一些数据传递给它，因此，`PRE_SET_DATA`事件包含该数据并且一切正常，如问题中所述。

在提交表单的那一刻，它首先创建时没有数据，因此访问的数据`PRE_SET_DATA`将为空。在这种情况下，我们跳过表单自定义：

```
public function preSetData(DataEvent $event)
{
    $myEvent = $event->getData()->getEvent();

    if (null === $myEvent) {
        return;
    }

    $this->customizeForm();
} 
```

这确保了我们在提交表单时不会遇到问题并且没有传递任何数据，但是`getData()`将返回一个空对象而不是 NULL。

现在，当表单提交时，我们将它绑定到接收到的数据。这就是我们想要干预的时候。因此，我们还将订阅该`PRE_BIND`事件：

```
public static function getSubscribedEvents()
{
    return [
        FormEvents::PRE_BIND => 'preBind',
        FormEvents::PRE_SET_DATA => 'preSetData',
    ];
} 
```

在预绑定中，我们收到的数据只是一个值数组，而不是对象图。但是如果我们将对象管理器注入到我们的监听器中，那么我们可以找到我们的对象并使用它们：

```
public function preBind(DataEvent $event)
{
    $data = $event->getData();
    $id = $data['event'];
    $myEvent = $this->om
                ->getRepository('Acme\DemoBundle\Document\Event')
                ->find(new \MongoId($id));
    if($myEvent === null){
        $msg = 'The event %s could not be found';
        throw new \Exception(sprintf($msg, $id));
    }

    $this->customizeForm();
} 
```

# c++ - Qt在菜单项单击时显示模式对话框（.ui）

> ID：13116863
> 
> 赞同：26
> 
> 时间：2012-10-29T06:30:12.800
> 
> 标签：c++, qt, modal-dialog

我想制作一个简单的“关于”模式对话框，从帮助->关于应用程序菜单中调用。我用 QT Creator（.ui 文件）创建了一个模态对话框窗口。

什么代码应该在菜单“关于”插槽中？

现在我有了这段代码，但它显示了一个新的模式对话框（不是基于我的 about.ui）：

```
void MainWindow::on_actionAbout_triggered()
{
    about = new QDialog(0,0);
    about->show();
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-10-29T07:08:55.980

您需要使用`.ui`文件中的 UI 设置对话框。Qt`uic`编译器从您的文件中生成一个头文件`.ui`，您需要将其包含在代码中。假设您的`.ui`文件被调用`about.ui`，并且对话框被命名`About`，然后`uic`创建`ui_about.h`包含一个类的文件`Ui_About`。有不同的方法来设置你的 UI，最简单的你可以做

```
#include "ui_about.h"

...

void MainWindow::on_actionAbout_triggered()
{
    about = new QDialog(0,0);

    Ui_About aboutUi;
    aboutUi.setupUi(about);

    about->show();
} 
```

更好的方法是使用继承，因为它可以更好地封装您的对话框，以便您可以在子类中实现特定于特定对话框的任何功能：

**关于Dialog.h：**

```
#include <QDialog>
#include "ui_about.h"

class AboutDialog : public QDialog, public Ui::About {
    Q_OBJECT

public:
    AboutDialog( QWidget * parent = 0);
}; 
```

**关于Dialog.cpp：**

```
AboutDialog::AboutDialog( QWidget * parent) : QDialog(parent) {

    setupUi(this);

    // perform additional setup here ...
} 
```

**用法：**

```
#include "AboutDialog.h"

...

void MainWindow::on_actionAbout_triggered() {
    about = new AboutDialog(this);
    about->show();
} 
```

无论如何，重要的代码是调用`setupUi()`方法。

**顺便说一句：**上面代码中的对话框是非模态的。要显示模态对话框，请将`windowModality`对话框的标志设置为`Qt::ApplicationModal`或`exec()`使用`show()`.

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-06-21T20:46:49.093

对于模态对话框，你应该使用[`exec()`](http://doc.qt.io/qt-4.8/qdialog.html#exec)QDialogs 的方法。

```
about = new QDialog(0, 0);

// The method does not return until user closes it.
about->exec();

// In this point, the dialog is closed. 
```

[文档](http://doc.qt.io/qt-4.8/qdialog.html)说：

> 显示模态对话框最常见的方法是调用它的`exec()`函数。当用户关闭对话框时，`exec()`会提供一个有用的返回值。

* * *

替代方式：您**不需要**模式对话框。让对话框显示无模式并将其`accepted()`和`rejected()`信号连接到适当的插槽。然后，您可以将所有代码放在*接受*槽中，而不是将它们放在`show()`. 因此，使用这种方式，您实际上不需要模态对话框。

# iphone - 如何在iphone集成中注销foursquare？

> ID：13116868
> 
> 赞同：2
> 
> 时间：2012-10-29T06:30:57.653
> 
> 标签：iphone, ios, xcode4, foursquare, logout

如何在 iPhone 集成应用程序中实现该功能？**`foursquare`** *`Logout`*

我试过这段代码。但它不起作用。

```
NSHTTPCookie *cookie;
NSHTTPCookieStorage *storage = [NSHTTPCookieStorage sharedHTTPCookieStorage];
for (cookie in [storage cookies])
{

    NSString *domainName = [cookie domain];
    NSRange domainRange = [domainName rangeOfString:@"https://foursquare.com/"];
    if(domainRange.length > 0)
    {
        [storage deleteCookie:cookie];

    }

} 
```

# c# - 如何在 C# 中的文件夹中搜索文件夹？

> ID：13116870
> 
> 赞同：0
> 
> 时间：2012-10-29T06:31:00.197
> 
> 标签：c#, directory, datadirectory

我想检查特定文件夹是否存在于 c# 中的文件夹中。目前我正在使用以下代码。

```
 string currentPath = Directory.GetCurrentDirectory();

        foreach (string subDir in Directory.GetDirectories(currentPath))
        {
            if (subDir == currentPath + @"\Database") // if "Database" folder exists
            {
                dbinRoot = true;
            }
        }
        if (dbinRoot == true)
        {
            currentPath = currentPath + @"\Database\SMAStaff.accdb";
        }
        else
        {
            for (int i = 0; i < 2; i++)
            {
                currentPath = currentPath.Remove(currentPath.LastIndexOf("\\"));
            }
            currentPath = currentPath + "\\Database\\SMAStaff.accdb";
        } 
```

我想知道是否有更好的方法来做到这一点？？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T06:39:21.810

您可以使用：

```
Directory.Exists(currentPath + @"\Database") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T06:47:47.580

`Path.Combine`使用方法连接部分路径也更可靠

> if (Directory.Exists(Path.Combine(Directory.GetCurrentDirectory(), @"Database"))){}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T07:01:59.157

您可能正在直接寻找

```
currentPath = Directory.GetCurrentDirectory();
bool fileExists = File.Exists(Path.Combine(currentPath, "Database\\SMAStaff.accdb"))) 
```

并且 for 循环可能包含更好的可读性

```
currentPath = Directory.GetParent(currentPath).FullName; 
```

# windows-8 - 使用 StartRecordToCustomSinkAsync 时出现 InvalidCastException

> ID：13116871
> 
> 赞同：1
> 
> 时间：2012-10-29T06:31:04.683
> 
> 标签：windows-8, windows-store-apps

我正在修改`Media_capture_using_capture_device_sample`示例代码。我想使用`StartRecordToCustomSinkAsync`而不是`StartRecordToStorageFileAsync`. 在示例代码中，我刚刚替换了所需的 API，如下所示：

在`AdvancedCapture.xaml.cpp`,

而不是下面的 API

```
create_task(m_mediaCaptureMgr->StartRecordToStorageFileAsync(recordProfile, this->m_recordStorageFile)).then([this](task<void> recordTask) 
```

我放了

```
task<void>(m_mediaCaptureMgr->StartRecordToCustomSinkAsync(recordProfile,"GrayscaleTransform.GrayscaleEffect",nullptr)).then([this](task<void> recordTask) 
```

[我的意图是在自定义接收器中接收帧]

当我调用 `StartRecordToCustomSinkAsync`它时，它会进入立即执行的 try 块`recordTask.get()`，然后进入 catch 块`InvalidCastException`

请帮助我理解这个场景......

提前致谢

# java - SQLite 查询不返回任何内容，movetoFirst 方法在 Activity 中成功，但在 IntentService 中，给了我错误

> ID：13116873
> 
> 赞同：0
> 
> 时间：2012-10-29T06:31:16.017
> 
> 标签：java, android, sqlite, intentservice

当我查询某些内容并且它没有返回某些内容时， if(cursor.moveToFirst()) { //logic} 在活动中运行良好，但是在意图服务中使用它时不能说同样的话..我不知道出了什么问题，当查询返回某些内容时（选择所有 CLASSROOM_AVAILABLE 值为 0 的行），特定行的“CLASSROOM_AVAILABLE”将从 0 变为 1，如果不返回任何内容，则将所有行的 CLASSROOM_AVAILABLE 从 1 变为 2。 .

```
package my.skul;

import android.app.IntentService;
import android.app.Notification;
import android.app.NotificationManager;
import android.app.PendingIntent;
import android.content.ContentValues;
import android.content.Context;
import android.content.Intent;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;

public class CheckClassroom extends IntentService {

            /**
             * A constructor is required, and must call the super IntentService(String)
             * constructor with a name for the worker thread.
             */
            public CheckClassroom() {
                super("CheckClassroom");
            }

            /**
             * The IntentService calls this method from the default worker thread with
             * the intent that started the service. When this method returns,
             * IntentService stops the service, as appropriate.
             */
            @Override
            protected void onHandleIntent(Intent intent) {

                open();
                getColumns();
                close();

            }
            private DbHelper ourHelper;
            private SQLiteDatabase ourDatabase;

            public void open() {
                ourHelper = new DbHelper();
                ourDatabase = ourHelper.getWritableDatabase();
            }

            public void close() {
                ourHelper.close();
            }

            private class DbHelper extends SQLiteOpenHelper {

                public DbHelper() {
                    super(CheckClassroom.this, "myschool", null, 1);
                    // TODO Auto-generated constructor stub
                }

                @Override
                public void onCreate(SQLiteDatabase arg0) {
                    // TODO Auto-generated method stub

                }

                @Override
                public void onUpgrade(SQLiteDatabase arg0, int arg1, int arg2) {
                    // TODO Auto-generated method stub

                }
            }

            public void getColumns()
            {

                String[] columns = new String[] {"CLASSROOM_ID"};
                Cursor c = ourDatabase.query("CLASSROOM_TABLE", columns, "CLASSROOM_AVAILABLE =  0", null,
                        null, null, null);

                if (c.moveToFirst())
                        {
                    int[] myid = new int[c.getCount()];
                    int i = 0;

                    while (!c.isAfterLast()) 
                        {

                        myid[i]=c.getInt(0);
                        ContentValues cv = new ContentValues();
                        cv.put("CLASSROOM_AVAILABLE", 1);
                        ourDatabase.update("CLASSROOM_TABLE", cv, "CLASSROOM_ID = "+myid[i], null);

                        i++;
                        c.moveToNext();

                        }
                        }

                        else
                        {
                            ContentValues cv = new ContentValues();
                            cv.put("CLASSROOM_AVAILABLE", 2);
                            ourDatabase.update("CLASSROOM_TABLE", cv, "CLASSROOM_ID =1", null);
                        }
                }

                } 
```

这是日志猫

```
10-29 12:04:23.903: D/AndroidRuntime(22782): Shutting down VM
10-29 12:04:23.903: W/dalvikvm(22782): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
10-29 12:04:23.923: E/AndroidRuntime(22782): FATAL EXCEPTION: main
10-29 12:04:23.923: E/AndroidRuntime(22782): java.lang.IllegalStateException: Could not execute method of the activity
10-29 12:04:23.923: E/AndroidRuntime(22782):    at android.view.View$1.onClick(View.java:2072)
10-29 12:04:23.923: E/AndroidRuntime(22782):    at android.view.View.performClick(View.java:2408)
10-29 12:04:23.923: E/AndroidRuntime(22782):    at android.view.View$PerformClick.run(View.java:8816)
10-29 12:04:23.923: E/AndroidRuntime(22782):    at android.os.Handler.handleCallback(Handler.java:587)
10-29 12:04:23.923: E/AndroidRuntime(22782):    at android.os.Handler.dispatchMessage(Handler.java:92)
10-29 12:04:23.923: E/AndroidRuntime(22782):    at android.os.Looper.loop(Looper.java:123)
10-29 12:04:23.923: E/AndroidRuntime(22782):    at android.app.ActivityThread.main(ActivityThread.java:4627)
10-29 12:04:23.923: E/AndroidRuntime(22782):    at java.lang.reflect.Method.invokeNative(Native Method)
10-29 12:04:23.923: E/AndroidRuntime(22782):    at java.lang.reflect.Method.invoke(Method.java:521)
10-29 12:04:23.923: E/AndroidRuntime(22782):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
10-29 12:04:23.923: E/AndroidRuntime(22782):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
10-29 12:04:23.923: E/AndroidRuntime(22782):    at dalvik.system.NativeStart.main(Native Method)
10-29 12:04:23.923: E/AndroidRuntime(22782): Caused by: java.lang.reflect.InvocationTargetException
10-29 12:04:23.923: E/AndroidRuntime(22782):    at my.skul.Mainmenu.sectwenty(Mainmenu.java:71)
10-29 12:04:23.923: E/AndroidRuntime(22782):    at java.lang.reflect.Method.invokeNative(Native Method)
10-29 12:04:23.923: E/AndroidRuntime(22782):    at java.lang.reflect.Method.invoke(Method.java:521)
10-29 12:04:23.923: E/AndroidRuntime(22782):    at android.view.View$1.onClick(View.java:2067)
10-29 12:04:23.923: E/AndroidRuntime(22782):    ... 11 more
10-29 12:04:23.923: E/AndroidRuntime(22782): Caused by: android.database.CursorIndexOutOfBoundsException: Index 0 requested, with a size of 0
10-29 12:04:23.923: E/AndroidRuntime(22782):    at android.database.AbstractCursor.checkPosition(AbstractCursor.java:580)
10-29 12:04:23.923: E/AndroidRuntime(22782):    at android.database.AbstractWindowedCursor.checkPosition(AbstractWindowedCursor.java:214)
10-29 12:04:23.923: E/AndroidRuntime(22782):    at android.database.AbstractWindowedCursor.getLong(AbstractWindowedCursor.java:99)
10-29 12:04:23.923: E/AndroidRuntime(22782):    at my.skul.MyCreateClassrooms.get(MyCreateClassrooms.java:111)
10-29 12:04:23.923: E/AndroidRuntime(22782):    ... 15 more 
```

这是相同的代码，在 Activity 中完美运行..

```
package my.skul;

import java.text.SimpleDateFormat;
import java.util.Date;
import java.util.Random;

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteDatabase.CursorFactory;
import android.database.sqlite.SQLiteOpenHelper;

public class MyCreateClassrooms {

    private static final String DATABASE_NAME = "myschool";
    private static final int DATABASE_VERSION = 1;

    private DbHelper ourHelper;
    private final Context ourContext;
    private SQLiteDatabase ourDatabase;

    private static class DbHelper extends SQLiteOpenHelper {

        public DbHelper(Context context) {
            super(context, DATABASE_NAME, null, DATABASE_VERSION);
            // TODO Auto-generated constructor stub
        }

        @Override
        public void onCreate(SQLiteDatabase db) {
            // TODO Auto-generated method stub

            db.execSQL("CREATE TABLE MAIN_TABLE (OURID INTEGER PRIMARY KEY AUTOINCREMENT, date DATETIME);");

            db.execSQL("CREATE TABLE CLASSROOM_TABLE (CLASSROOM_ID INTEGER PRIMARY KEY AUTOINCREMENT,"
                    + "CLASSROOM_AVAILABLE INTEGER , "
                    + "CLASSROOM_COMPLETION DATETIME);  ");

            db.execSQL("INSERT INTO MAIN_TABLE (date) VALUES (DATETIME('now'))");

        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int arg1, int arg2) {
            // TODO Auto-generated method stub
            db.execSQL("DROP TABLE IF EXIST MAIN_TABLE");

            onCreate(db);

        }

    }

    public MyCreateClassrooms(Context c) {
        ourContext = c;
    }

    public MyCreateClassrooms open() {
        ourHelper = new DbHelper(ourContext);
        ourDatabase = ourHelper.getWritableDatabase();

        return this;

    }

    public void close() {
        ourHelper.close();
    }

     public void getColumns()
     {

            String[] columns = new String[] {"CLASSROOM_ID"};
            Cursor c = ourDatabase.query("CLASSROOM_TABLE", columns, "CLASSROOM_AVAILABLE =  0", null,
                    null, null, null);

            if (!c.moveToFirst())
                    {
                int[] myid = new int[c.getCount()];
                int i = 0;

                while (!c.isAfterLast()) 
                    {

                    myid[i]=c.getInt(0);
                    ContentValues cv = new ContentValues();
                    cv.put("CLASSROOM_AVAILABLE", 1);
                    ourDatabase.update("CLASSROOM_TABLE", cv, "CLASSROOM_ID = "+myid[i], null);

                    i++;
                    c.moveToNext();

                    }
                    }

                    if(c.moveToFirst())
                    {
                        ContentValues cv = new ContentValues();
                        cv.put("CLASSROOM_AVAILABLE", 2);
                        ourDatabase.update("CLASSROOM_TABLE", cv, null, null);
                    }
            }
} 
```

# asp.net - 如何将页面加载中 cod 后面的 url 传递给 C# asp.net 中的 html 部分

> ID：13116880
> 
> 赞同：0
> 
> 时间：2012-10-29T06:31:52.420
> 
> 标签：asp.net

嗨，我想在我的页面中动态播放一部电影，但我的播放器需要一个 URL，并且它只从 Html 部分填充。如何将 URL 表单页面加载传递给 Html 部分。这是我的代码：谢谢

页面加载代码：

```
 protected void Page_Load(object sender, EventArgs e)
    {
       // string n = String.Format("{0}", Request.Form['customerName']);
        string connStr = ConfigurationManager.ConnectionStrings["ConnectionString"].ConnectionString;
        SqlConnection sqlconn = new SqlConnection(connStr);
        SqlCommand sqlcmd = new SqlCommand();
        sqlcmd = new SqlCommand("SELECT Pic FROM AllMemberOfSite where UserName=@UserName", sqlconn);
        sqlcmd.Parameters.AddWithValue("@UserName", (string)Session["User"]);
        sqlconn.Open();
        Image4.ImageUrl = ((string)sqlcmd.ExecuteScalar()).ToString();

        sqlcmd = new SqlCommand("SELECT Video FROM AddVideo where ID=@ID", sqlconn);
        sqlcmd.Parameters.AddWithValue("@ID", Request.QueryString["ID"]);
        string URL = ((string)sqlcmd.ExecuteScalar()).ToString();

        Page.DataBind();
        sqlcmd = new SqlCommand("SELECT Title FROM AddVideo where ID=@ID", sqlconn);
        sqlcmd.Parameters.AddWithValue("@ID", Request.QueryString["ID"]);
        Label6.Text = ((string)sqlcmd.ExecuteScalar()).ToString();

        sqlconn.Close();

    } 
```

这是html鳕鱼：

```
 <?
    $mobile=mobile_device_detect();
          if($mobile)
{
    ?>
     <div class="video-js-box" >
                                                                 <video   id="example_video_1" class="video-js" width="590" height="442" controls="controls" preload="auto" align="center">
      <source src="videos/Ostad Pirmoradi2.flv" type='video/mp4; codecs="avc1.42E01E, mp4a.40.2"' />

    </video>
  </div>

  <?
}else
{?>
        <div name="flashcontent2" id="flashcontent2"></div>
        <script type="text/javascript" language="javascript">
            if (!FlashDetect.installed) {
                document.getElementById("flashcontent2").innerHTML = "<b>This content requires the Adobe Flash Player. If the player does not load here in a moment please install flash. <a href=http://www.adobe.com/go/getflash/>GET FLASH HERE</a></b>";
            } else {
                // Flash embed code starts 
                //delete the below sample

                var so1 = new SWFObject("YTPlayer.swf", "YTPlayer", "640" "320",                 "8", null, true);
                so1.addParam("allowFullScreen", "true");
                so1.addParam("allowSciptAccess", "always");
                so1.addVariable("movieName", "videos/Ostad Pirmoradi2.flv");
                so1.addVariable("autoStart", "true");
                //so1.addVariable("logoPath", "logo/30alogo.png"); // 60*60 dimension
               // so1.addVariable("logoPosition", "top_left"); // accepted values                are top_left, top_right, bottom_left and bottom_right
             //   so1.addVariable("logoClickURL",     "http://www.flvhosting.com              
                      /af/idevaffiliate.php?id=385");
            //    so1.write("flashcontent2");
                // Flash Embed code ends
            }
        </script>
    <?}?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T06:35:45.700

采用`<asp:literal id="myMovie"></asp:literal>`

比来自 c# 的填充`myMovie.Text`

* * *

此外：

```
using(SqlConnection sqlconn = new SqlConnection(connStr))
{
  // the rest of you code
} 
```

这更好，因为在出​​现异常时，您不会让连接打开的时间超过所需时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T06:38:49.247

制作 Source`runat="server"`
并从后面的代码中获取该源 id 并给出

`id.src = "your src from database"`.

就是这样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T06:42:52.623

试试这个

添加这样的方法

```
public string GetURL()
{
 string connStr = ConfigurationManager.ConnectionStrings["ConnectionString"].ConnectionString;
 SqlConnection sqlconn = new SqlConnection(connStr);
 SqlCommand sqlcmd = new SqlCommand();
 sqlconn.Open();
 sqlcmd = new SqlCommand("SELECT Video FROM AddVideo where ID=@ID", sqlconn);
 sqlcmd.Parameters.AddWithValue("@ID", Request.QueryString["ID"]);
 string URL = ((string)sqlcmd.ExecuteScalar()).ToString();
 return URL;
} 
```

并通过这样调用它在前端获得它的价值

假设如果你想在 img 中设置这个 URL 然后写这个

```
<img runat="server" id="image1" src='<%= GetURL() %>' alt="image one" /> 
```

# javascript - 禁用` ` 点击后，但应该触发动作

> ID：13116890
> 
> 赞同：8
> 
> 时间：2012-10-29T06:32:48.550
> 
> 标签：javascript, jsf, ajax4jsf

我的 XHTML 页面中有一个`<h:commandButton>`。我希望在单击按钮后立即禁用该按钮。然后按钮应该调用动作。我的按钮按我的预期被禁用，但问题是该操作没有被触发。
`<h:commandButton value="Go" onclick="this.disabled=true" action="#{bean.go()}"/>`

但是，如果我删除该`onclick`属性，则会触发该操作。

或者，如果我使用`<a4j:commandButton>`它，它可以工作。
以下 a4j 按钮有效。
`<a4j:commandButton value="Go" onclick="this.disabled=true" action="#{bean.go()}"/>`

如何`<h:commandButton>`在单击后禁用 a ，以便该操作仍然触发？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-29T06:56:52.277

使用`setTimeout`，这样动作将被触发并且按钮将被禁用......

```
<h:commandButton value="Go"
   onclick="setTimeout('this.disabled = true;', 50);" 
   action="#{bean.go()}"/> 
```

您也可以查看以下问题：[如何禁用 h:commandButton 而不会阻止调用 action 和 actionListener？](https://stackoverflow.com/q/11744597/617373)

# javascript - 不工作 Google 翻译器 java 用于 ajax 更新面板中的文本框的脚本

> ID：13116891
> 
> 赞同：0
> 
> 时间：2012-10-29T06:32:55.373
> 
> 标签：javascript, asp.net, ajax

我已经使用文本框将英语翻译成古吉拉特语，使用谷歌翻译 java 脚本效果很好，但是当我使用文本框的 ajax 更新面板时它不起作用。

下面是我使用的java脚本。

任何的想法？

谢谢！

```
<script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script type="text/javascript">
        google.load("elements", "1", {
            packages: "transliteration"
        });
        function onLoad() {
            var options = {
                sourceLanguage:
                google.elements.transliteration.LanguageCode.ENGLISH,
                destinationLanguage:
                google.elements.transliteration.LanguageCode.GUJARATI,

                shortcutKey: 'ctrl+g',
                transliterationEnabled: true
            };
            var control =
            new google.elements.transliteration.TransliterationControl(options);
            control.makeTransliteratable(['<%=TextBox1.ClientID%>']);
        }
        google.setOnLoadCallback(onLoad);

        var finalString = "";
        function Changed(textControl) {

            var _txtUnicodeName = document.getElementById('<%=TextBox1.ClientID%>');

            var _EnteredString = _txtUnicodeName.value;
        }
    </script>

    <asp:UpdatePanel ID="Activistupdatepanel" runat="server">
                    <ContentTemplate>
                        <div>
                            <asp:Button ID="Button1" runat="server" Text="Button" onclick="Button1_Click" />
                            <asp:TextBox ID="TextBox1" runat="server"></asp:TextBox>
                        </div>
                    </ContentTemplate>
                </asp:UpdatePanel> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T08:04:21.287

当您使用 UpdatePanel 时，您需要在回发后重新初始化脚本：

```
// maybe this also need to be inside the EndRequest again
google.load("elements", "1", {
    packages: "transliteration"
});

function onLoad() {
    var options = {
        sourceLanguage:
        google.elements.transliteration.LanguageCode.ENGLISH,
        destinationLanguage:
        google.elements.transliteration.LanguageCode.GUJARATI,

        shortcutKey: 'ctrl+g',
        transliterationEnabled: true
    };
    var control =
    new google.elements.transliteration.TransliterationControl(options);
    control.makeTransliteratable(['<%=TextBox1.ClientID%>']);
}

// here you make the first init when page load
google.setOnLoadCallback(onLoad);

// here we make the handlers for after the UpdatePanel update
     var prm = Sys.WebForms.PageRequestManager.getInstance();    
     prm.add_initializeRequest(InitializeRequest);
     prm.add_endRequest(EndRequest);

    function InitializeRequest(sender, args) {      
    }

    // this is called to re-init the google after update panel updates.
    function EndRequest(sender, args) {
        onLoad();
    } 
```

类似问题：当页面[在 Gridview Jquery DatePicker 中重新加载 Asp.Net UpdatePanel时，](https://stackoverflow.com/questions/3341623/asp-net-updatepanel-in-gridview-jquery-datepicker/3341741#3341741)
[jquery 脚本工作](https://stackoverflow.com/questions/13044180/jquery-script-works-when-page-is-reload/13044264#13044264)

# spring - 如何使用spring和hibernate处理多个数据库连接上的错误/异常？

> ID：13116893
> 
> 赞同：0
> 
> 时间：2012-10-29T06:33:09.257
> 
> 标签：spring, hibernate

我正在使用 spring 和 hibernate 处理多个数据库服务器保存，使用 2 个数据源配置同时更新。我在用

```
org.springframework.jdbc.datasource.DriverManagerDataSource 
```

用于创建数据源的类。如果数据库服务器都启动/运行，那么它工作正常。如果我关闭我的一个数据库服务器并尝试捕获异常，那么它不会出现在 catch 块中，并且堆栈跟踪错误会显示在我的 Web 浏览器上。

```
Stack Trace: 
```

```
    ** 开始嵌套异常 **
    java.net.ConnectException
    消息：连接被拒绝：连接
堆栈跟踪：

java.net.ConnectException：连接被拒绝：连接
    在 java.net.PlainSocketImpl.socketConnect（本机方法）
    在 java.net.PlainSocketImpl.doConnect(PlainSocketImpl.java:333)
    在 java.net.PlainSocketImpl.connectToAddress(PlainSocketImpl.java:195)
    在 java.net.PlainSocketImpl.connect(PlainSocketImpl.java:182)
    在 java.net.SocksSocketImpl.connect(SocksSocketImpl.java:366)
    在 java.net.Socket.connect(Socket.java:525)
    在 java.net.Socket.connect(Socket.java:475)
    在 java.net.Socket.(Socket.java:372)
    在 java.net.Socket.(Socket.java:215)
    在 com.mysql.jdbc.StandardSocketFactory.connect(StandardSocketFactory.java:256)
    在 com.mysql.jdbc.MysqlIO.(MysqlIO.java:271)
    在 com.mysql.jdbc.Connection.createNewIO(Connection.java:2771)
    在 com.mysql.jdbc.Connection.(Connection.java:1555)
    在 com.mysql.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:285)
    在 java.sql.DriverManager.getConnection(DriverManager.java:582)
    在 java.sql.DriverManager.getConnection(DriverManager.java:154)
    在 org.springframework.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriverManager(DriverManagerDataSource.java:173)
    在 org.springframework.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver(DriverManagerDataSource.java:164)
    在 org.springframework.jdbc.datasource.AbstractDriverBasedDataSource.getConnectionFromDriver(AbstractDriverBasedDataSource.java:149)
    在 org.springframework.jdbc.datasource.AbstractDriverBasedDataSource.getConnection(AbstractDriverBasedDataSource.java:119)
    在 org.springframework.orm.hibernate3.LocalDataSourceConnectionProvider.getConnection(LocalDataSourceConnectionProvider.java:82)
    在 org.hibernate.jdbc.ConnectionManager.openConnection(ConnectionManager.java:446)
    在 org.hibernate.jdbc.ConnectionManager.getConnection(ConnectionManager.java:167)
    在 org.hibernate.jdbc.AbstractBatcher.prepareStatement（AbstractBatcher.java:116）
    在 org.hibernate.id.insert.AbstractSelectingDelegate.performInsert(AbstractSelectingDelegate.java:54)
    在 org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:2186)
    在 org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:2666)
    在 org.hibernate.action.EntityIdentityInsertAction.execute(EntityIdentityInsertAction.java:71)
    在 org.hibernate.engine.ActionQueue.execute（ActionQueue.java:279）
    在 org.hibernate.event.def.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:321)
    在 org.hibernate.event.def.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:204)
    在 org.hibernate.event.def.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:130)
    在 org.hibernate.event.def.DefaultSaveOrUpdateEventListener.saveWithGeneratedOrRequestedId(DefaultSaveOrUpdateEventListener.java:210)
    在 org.hibernate.event.def.DefaultSaveEventListener.saveWithGeneratedOrRequestedId(DefaultSaveEventListener.java:56)
    在 org.hibernate.event.def.DefaultSaveOrUpdateEventListener.entityIsTransient（DefaultSaveOrUpdateEventListener.java:195）
    在 org.hibernate.event.def.DefaultSaveEventListener.performSaveOrUpdate(DefaultSaveEventListener.java:50)
    在 org.hibernate.event.def.DefaultSaveOrUpdateEventListener.onSaveOrUpdate(DefaultSaveOrUpdateEventListener.java:93)
    在 org.hibernate.impl.SessionImpl.fireSave(SessionImpl.java:562)
    在 org.hibernate.impl.SessionImpl.save(SessionImpl.java:550)
    在 org.hibernate.impl.SessionImpl.save(SessionImpl.java:546)
    在 org.springframework.orm.hibernate3.HibernateTemplate$12.doInHibernate(HibernateTemplate.java:686)
    在 org.springframework.orm.hibernate3.HibernateTemplate$12.doInHibernate(HibernateTemplate.java:1)
    在 org.springframework.orm.hibernate3.HibernateTemplate.doExecute(HibernateTemplate.java:406)
    在 org.springframework.orm.hibernate3.HibernateTemplate.executeWithNativeSession(HibernateTemplate.java:374)
    在 org.springframework.orm.hibernate3.HibernateTemplate.save(HibernateTemplate.java:683)
    在 com.service.RegistrationServiceImpl.add(RegistrationServiceImpl.java:56)
    在 com.controller.RegistrationController.onSubmit(RegistrationController.java:48)
    在 org.springframework.web.servlet.mvc.SimpleFormController.processFormSubmission(SimpleFormController.java:272)
    在 org.springframework.web.servlet.mvc.AbstractFormController.handleRequestInternal(AbstractFormController.java:268)
    在 org.springframework.web.servlet.mvc.AbstractController.handleRequest(AbstractController.java:153)
    在 org.springframework.web.servlet.mvc.SimpleControllerHandlerAdapter.handle(SimpleControllerHandlerAdapter.java:48)
    在 org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:763)
    在 org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:709)
    在 org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:613)
    在 org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:536)
    在 javax.servlet.http.HttpServlet.service(HttpServlet.java:647)
    在 javax.servlet.http.HttpServlet.service(HttpServlet.java:729)
    在 org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:269)
    在 org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:188)
    在 org.apache.catalina.core.StandardWrapperValve.invoke（StandardWrapperValve.java:213）
    在 org.apache.catalina.core.StandardContextValve.invoke（StandardContextValve.java:172）
    在 org.apache.catalina.core.StandardHostValve.invoke（StandardHostValve.java:127）
    在 org.apache.catalina.valves.ErrorReportValve.invoke（ErrorReportValve.java:117）
    在 org.apache.catalina.core.StandardEngineValve.invoke（StandardEngineValve.java:108）
    在 org.apache.catalina.connector.CoyoteAdapter.service（CoyoteAdapter.java:174）
    在 org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:879)
    在 org.apache.coyote.http11.Http11BaseProtocol$Http11ConnectionHandler.processConnection(Http11BaseProtocol.java:665)
    在 org.apache.tomcat.util.net.PoolTcpEndpoint.processSocket(PoolTcpEndpoint.java:528)
    在 org.apache.tomcat.util.net.LeaderFollowerWorkerThread.runIt(LeaderFollowerWorkerThread.java:81)
    在 org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:689)
    在 java.lang.Thread.run(Thread.java:619)

** 结束嵌套异常 *

```

我该如何处理这个异常。如果我的任何数据库服务器已关闭，我想在我的 GUI 中显示我的一个数据库服务器已关闭。

请帮助解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T08:10:38.717

我认为有两种选择：

*   列表项 您应该在服务层中捕获异常（例如在 中`RegistrationServiceImpl`），但您必须在所有服务类中执行此操作。
*   创建一个 Servlet 过滤器来捕获这个特定的异常并将用户重定向到一个显示类似“对不起，数据库已关闭”的页面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T14:04:50.307

spring中有[@ExceptionHandler](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/web/bind/annotation/ExceptionHandler.html)注解。您可以在您的某个公共类中创建处理程序方法。每当抛出异常时，您都可以根据抛出的异常方便地显示所需的消息，如下所示

```
@Component
public class BaseController {

@ExceptionHandler(Throwable.class)
public ModelAndView handleException(Throwable throwable, HttpServletRequest request){

    ModelAndView view = null;
    if (throwable instanceof ConnectException){
        view = //set message and return view;
    }else if (throwable instanceof someOtherException) {
        //do something else;

 //handle as many exceptions as you want
    }else {
           //do something by default for other unhandled/generic exceptions 
          }

    return view;
}

} 
```

该[文档](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/web/bind/annotation/ExceptionHandler.html)解释了有关支持的返回类型的更多信息。

您还可以使处理程序仅处理您想要的异常类型，如下所示：

```
@ExceptionHandler(ConnectException.class)
public ModelAndView handleException(ConnectException ex, HttpServletRequest request){
// handle it 
} 
```

您可以查看此[示例](http://java.dzone.com/articles/spring-3-mvc-exception)，该示例位于类似的行中。

我希望这有帮助。干杯:)

# c - 程序在分叉/执行到后台后需要回车

> ID：13116899
> 
> 赞同：0
> 
> 时间：2012-10-29T06:33:44.603
> 
> 标签：c, exec, fork, freeze, enter

因此，对于一项任务，我们需要构建一个 shell，其中包括模拟 & 命令行运算符。

我已经停止了分叉/执行，问题是使用 WNOHANG 调用 waitpid 会导致我的程序在 execv 终止后挂起。一旦我按回车，提示就会回来，程序正常工作。请注意，阻塞的 waitpid 不会发生这种情况。

这是相关的代码：

```
782   pid_t child = fork();  //Create child process
783   
784   char** charArgs = toCharMatrix(*args);
785   
786   //If creation failed, say so
787   if(child == -1) {
788     fprintf(stderr, "Error: Could not create child process.\n");
789     return -1;
790   } 
791   else if(child == 0) {  //else: child process code
792     
793     //If the given command can be executed, attempt to exectue it
794     if(access(charArgs[0], X_OK) == 0) 
795       execv(charArgs[0], charArgs); 
796     else { //Else tell the user that they are an idiot
797       fprintf(stderr, "%s is not a valid path.\n", charArgs[0]);
798       return -1;
799     } 
800     
801     _exit(0);
802   } 
803   else
804     waitpid(-1, NULL, WNOHANG); 
```

我在最后一个 else 语句（父进程代码）中尝试了很多东西，从返回到基本上任何东西。似乎没有任何帮助。再一次，只需删除 WNOHANG 选项即可解决问题，但不符合分配规范。

我也叫 waitpid(-1, NULL, WNOHANG); 在显示提示之前的主循环中，以避免任何僵尸孩子。这个愚蠢的回车问题是唯一剩下的问题。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T07:05:04.350

它实际上不太可能挂在waitpid上。尝试打印 waitpid 调用的返回码（以及 errno 或 strerror(errno)）。您的代码段没有显示它挂在哪里。程序想要返回键的最可能原因是，您调用了一个读取 stdin 的函数（或父进程确实阻塞等待，而子进程等待返回键）。

# c# - 查询组件尺寸的最佳位置

> ID：13116904
> 
> 赞同：0
> 
> 时间：2012-10-29T06:34:15.880
> 
> 标签：c#, windows-8, microsoft-metro

在 的构造函数中`Page`，我尝试查询其组件大小。

```
public sealed partial class MainPage : Page
{
    public MainPage()
    {
        // Get the canvas size.
        double height = canvas.ActualHeight;
        double width = canvas.ActualWidth;
    }
} 
```

我得到的所有高度和宽度都为 0。我可以知道查询组件大小的最佳位置是什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T08:02:23.073

```
public sealed partial class MainPage : Page
{
    public MainPage()
    {
        this.Loaded += MainPage_Loaded;
    }

    private void MainPage_Loaded(object sender, RoutedEventArgs e)
    {
        // Get the canvas size.
        double height = canvas.ActualHeight;
        double width = canvas.ActualWidth;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T07:09:01.530

`OnNavigatedTo`每次导航到页面时都会触发 get 。所以可能想在那里做。

# wdm - 在 Win2003 32 位上签名驱动程序

> ID：13116905
> 
> 赞同：0
> 
> 时间：2012-10-29T06:34:18.587
> 
> 标签：wdm

我在 Win2003 32 位上签名了一个驱动程序，它不能在 Win2007 x64 上运行。我检查了属性，并且有正确的数字签名信息。

我尝试在 Win2008 x64 上签名，它成功了！

有人知道原因吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T06:49:52.103

因为 32 位驱动程序无法在 64 位 Windows 上运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T09:42:23.743

我发现它受证书文件的影响。这只是在vista +上正常。我正在寻找根本原因。

# android - 为什么 getAction 方法总是返回 ACTION_DOWN？

> ID：13116910
> 
> 赞同：2
> 
> 时间：2012-10-29T06:34:49.813
> 
> 标签：android, touch-event, ontouchlistener

我正在使用 onTouchListener 进行布局。我想在布局之外点击。我为布局设置了 onTouchListetener。但运动事件总是显示 ACTION_DOWN。即使我触摸视图之外，它也没有显示 ACTION_OUTSIDE。谁能帮我找出为什么它没有显示恒定的 ACTION_OUTSIDE。这是我正在使用的代码

```
Layout.setOnTouchListener(new View.OnTouchListener() {

    @Override
    public boolean onTouch(View v, MotionEvent event) {
        Log.i("action",event.getAction()+"");
        if (event.getAction() == MotionEvent.ACTION_OUTSIDE) {
            Toast.makeText(getApplicationContext(), "check", Toast.LENGTH_SHORT).show();
            return true;
        }

        return false;
    }
}); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-29T06:41:44.367

如果您返回`false`，则表示您不希望收到更多的触摸事件。您需要返回`true`以继续获取运动事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T07:19:53.790

事件监听器本身一次监听一个事件动作。第一个当然是 ACTION.DOWN，您的吐司会在其中显示。

就像 Jason Robinson 和 user936414 一样，您必须将其返回为 true，以便对象或侦听器可以在此处执行第二个事件操作 ACTION.OUTSIDE。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-11-27T14:29:51.013

通过添加以下内容非常简单地修复：

```
 override fun onTouchEvent(event: MotionEvent): Boolean {
        return true
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T06:42:35.023

当触摸在活动之外并且设置了标志 FLAG_WATCH_OUTSIDE_TOUCH 时，您将获得 ACTION_OUTSIDE。参考[http://developer.android.com/reference/android/view/WindowManager.LayoutParams.html#FLAG_WATCH_OUTSIDE_TOUCH](http://developer.android.com/reference/android/view/WindowManager.LayoutParams.html#FLAG_WATCH_OUTSIDE_TOUCH)

# 32bit-64bit - 64 位无符号整数会在 32 位系统上环绕吗？

> ID：13116911
> 
> 赞同：0
> 
> 时间：2012-10-29T06:34:51.013
> 
> 标签：32bit-64bit, unsigned-long-long-int

简单的问题，急需解答！

以 32 位机器上的这种情况为例：

```
Unsigned long long n = 1;
n -= 2; 
```

我知道在 64 位机器上，这将环绕到最高的 unsigned long long。但是在 32 位机器上会发生什么，因为 long long 存储为两个单独的字？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T06:36:39.870

如果实现是一致的，那么也是一样的：它将正确地环绕。我假设这是C；C 标准要求这种行为独立于实现细节。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T06:37:27.493

64 位整数数据类型在所有体系结构（包括 32 位）上的行为都相同。如果没有，编程会很困难，不是吗？

# android - Appcelerator Titanium tableviewrow rightImage 在 Android 设备上不起作用

> ID：13116912
> 
> 赞同：0
> 
> 时间：2012-10-29T06:35:06.560
> 
> 标签：android, android-emulator, titanium, titanium-mobile, appcelerator-mobile

我是钛的新手。

我有一个显示一些数据的表格视图。我在每一行添加了一个事件监听器来切换检查图像（rightImage）的显示，如下所示：

```
row.addEventListener('click', function(e){
    if(e.row.getHasCheck()){
            e.row.setHasCheck(false);
            e.row.rightImage = 'android/images/blank.png';
            e.rowData.rightImage = 'android/images/blank.png';
        } else {
            e.row.setHasCheck(true);
            e.row.rightImage = 'android/images/check.png';
            e.rowData.rightImage = 'android/images/check.png';
        }
    }); 
```

*   图片 click.png 和 blank.png 位于文件夹中：project/Resources/android/images（与密度无关）

*   我已经尝试了 e.row.rightImage 和 e.rowData.rightImage ，因为在其他几个问题中都提到了两者。

*   我的 tiapp.xml 中的 Android 清单如下所示：

    ```
    <android xmlns:android="http://schemas.android.com/apk/res/android">
        <manifest>
            <supports-screens 
                android:smallScreens="true"
                android:normalScreens="true"
                android:largeScreens="true"
                android:anyDensity="true"
            />
        </manifest>
    </android> 
    ```

*   我在 Ubuntu Linux 上运行 Titanium 2.1.2GA，并在具有 240 x 320 像素显示屏的 Android 2.3.6 设备上测试该应用程序

*   adb logcat 中唯一相关的部分是：

    ```
    I/InputReader( 1490): dispatchTouch::touch event's action is 0
    I/InputDispatcher( 1490): Delivering touch to current input target
    I/InputReader( 1490): dispatchTouch::touch event's action is 1
    I/InputDispatcher( 1490): Delivering touch to current input target 
    ```

    没有异常，没有警告，错误等。

> **问题**：切换（选中/取消选中）在 Android 模拟器上工作得非常好（实际上它在模拟器上开箱即用，即使没有自定义图像）但它无法工作（无法显示 row.rightImage **）**在任何情况下的**设备。**

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T07:27:30.057

试试这个示例代码来改变一行的正确图像

```
Ti.UI.backgroundColor = 'white';
var win = Ti.UI.createWindow();

var tableData = [];

for(var index = 1; index<= 10; index++)
{
    var row = Titanium.UI.createTableViewRow({
        title       : 'row '+ index, 
        rightImage  : 'images/blue.png'
    });

    tableData.push(row);
}
var table = Ti.UI.createTableView({
    data: tableData
});

table.addEventListener('click', function(e){
        image = 'images/black.png';
        e.source.setRightImage(image);
});
win.add(table);

win.open(); 
```

**注意：我已将 eventListener 添加到 tableView 而不是 row。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T11:05:28.290

后来我能够使它工作。

**在 for 循环内**

```
var row = Titanium.UI.createTableViewRow({
    //I was dealing with contacts
    title : contacts[i].fullName + ", "+ contacts[i].phone.mobile[j], 
    rightImage : 'images/blank.png'
    });
row.addEventListener('click', function(e) {
    if(e.row.getHasCheck()){
        e.row.setHasCheck(false);
        e.row.setRightImage('images/blank.png');            
    } else {
        e.row.setHasCheck(true);
        e.row.setRightImage('images/check.png');            
    }
});
tableData.push(row); 
```

变化不大，但图像路径。

# iphone - 学习为应用内购买构建服务器

> ID：13116918
> 
> 赞同：-1
> 
> 时间：2012-10-29T06:35:38.867
> 
> 标签：iphone, ios, ipad, webserver, in-app-purchase

我是服务器编程的大一新生，现在我想为我的 ipad 应用程序构建一个服务器。此服务器用于应用内购买的服务器模型。用户支付插件费用后，可以从我的服务器下载文件。

请提供如何为应用内购买的服务器模型创建服务器的解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T07:08:29.333

看看这个 MStoreKit：[https ://github.com/MugunthKumar/MKStoreKit](https://github.com/MugunthKumar/MKStoreKit)

在此您将找到一个文件夹“服务器代码”。其中提供了为 IAP（应用内购买）制作服务器的所有信息。

如果你需要别的东西，请告诉我。

# android - 如何在 Android 中创建菜单顶部和底部？

> ID：13116924
> 
> 赞同：0
> 
> 时间：2012-10-29T06:36:05.577
> 
> 标签：android, menubar

我想创建一个菜单，当单击 Aldiko 之类的屏幕中心时可以看到该菜单。

![在此处输入图像描述](../Images/9267c1b5c56deeb0466e9486a8cece46.png)

我已经测试`PopupWindow`过创建菜单项，但我没有任何解决方案**trackbar**。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T06:40:37.363

使用[默认菜单](http://developer.android.com/guide/topics/ui/menus.html)，您可以创建底部或顶部布局。所以你不能用这个。但是您可以创建自己的布局。将一种布局顶部对齐，第二个到底部对齐。最初做`INVISIBLE`了两个布局，当你点击中心然后`VISIBLE`两个布局。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T06:42:52.053

你可以使用 split ActionBar 来获得你想要的东西。使用它的唯一影响是不同屏幕模式（纵向和横向）的外观。您的操作项将根据可用的屏幕空间对齐。如果您正在寻找一些使用 ActionBar 执行此操作的代码，请告诉我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T06:45:42.667

您可以使用`FrameLayout`并将主应用程序布局放在后框架上，并将菜单（具有透明背景）放在顶部框架上。最初将菜单布局的可见性设置为不可见，因此您的应用程序主布局仅可见。现在，当您单击主布局时，只需将可见性更改为可见，当用户再次按下时，再次将顶部布局设置为不可见。

# ajax - 避免使用 MVC 重新显示菜单

> ID：13116925
> 
> 赞同：0
> 
> 时间：2012-10-29T06:36:09.590
> 
> 标签：ajax, asp.net-mvc, menu

我的团队正在创建一个 MVC4 应用程序，该应用程序具有上层菜单结构，其中包含特定于当前登录用户的菜单项，并在下面显示所选菜单项的内容。菜单显示在部分视图“_MainMenu”中，MainMenuController Index 操作负责从数据库中获取菜单数据并返回菜单部分视图。主布局“_Layout”通过调用@Html.Action("Index", "MainMenu") 呈现菜单。

我们希望避免在每次刷新页面时访问数据库来获取菜单结构数据，并且我们还希望避免在选择不同的菜单项时出现任何可见的菜单结构重新加载。

我一直在研究 AJAX，并且我已经实现了一些选择新菜单项将加载菜单下方该项目的内容的方法，方法是将 ID="mainContent" 的 div 替换为部分视图（此 div位于加载的视图“MainContent”上）。这样，菜单永远不会重新加载，页面也永远不会完全刷新（只有不同​​的部分内容视图在选择不同的菜单项时被换入和换出）。

该解决方案有效，但我不确定这是否真的是最佳实践，或者是否有更好的解决方案涉及缓存。AJAX 解决方案的问题之一是 URL 永远不会从“http://MySite/MainContent”更改。这意味着单击浏览器上的“后退”按钮无法按预期工作，并且按 F5 刷新浏览器页面也会丢失当前显示的页面。刷新问题可能可以通过记住选定的菜单项来解决，但我仍然不相信这是 AJAX 的使用方式。

有人可以告诉我，根据他们的经验，他们是否认为缓存对于这种情况是一个更好的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T07:00:17.253

如果用户的菜单项不太可能发生变化，那么您可以使用一个简单的静态字典（long 是用户 id）将数据缓存在后端，并定期刷新。

通常，如果您进行任何缓存，则必须确保在更新基础数据时刷新缓存的数据。因此，只有当您只有一个应用程序访问您的数据库时，它才是简单和安全的。如果有多个应用程序，那么您必须添加一种机制来保持缓存同步。

在我正在处理的项目中，我们将 User-Role-Module 实体和关系存储在 DB 中，并将模块权限绑定到角色而不是用户。由于角色权限不太可能更改，因此可以安全地缓存它们。

# java - 使用过多系统资源的单个 java 线程

> ID：13116927
> 
> 赞同：0
> 
> 时间：2012-10-29T06:36:19.083
> 
> 标签：java, multithreading, sockets

我正在尝试创建一个服务器侦听器。由于数据的性质，它坐下来等待来自客户端的数据并执行设置操作。但是现在，在接收到第一个数据流后，它进入了资源消耗状态，内存使用量猛增，CPU 使用率达到了单个核心的极限。

1 - 我该如何解决这个问题？我怎样才能让它在没有所有资源的情况下**听**，正如你所看到的，它是一个非常非常小的程序。

2 - 发送这些数据流的客户端本身运行一次。它启动，连接到服务器，发送数据并退出。当服务器仍然“开启”时，如果我再次重试运行客户端，服务器不会收到数据。

服务器代码：

```
package mediaserver;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.net.ServerSocket;
import java.net.Socket;
import java.util.logging.Level;
import java.util.logging.Logger;

public class Main {
    ServerSocket ss;
    Socket s;
    BufferedReader br;

    public Main() throws IOException{
        ss = new ServerSocket(1111);
        s = ss.accept();
        br = new BufferedReader(new InputStreamReader(s.getInputStream()));
        new Thread(new runner()).start();
    }

    class runner implements Runnable{

        public void run(){
          while(true){
            try {
                String n = br.readLine();
                System.out.println(n);
            } catch (IOException ex) {
            }
             finally{
                 try {
                       s.close();
                       ss.close();
                    } catch (IOException ex) {
                    }

             }
          }
        }
    }

    public static void main(String[] args) throws IOException {
        new Main();
    }

} 
```

客户代码

```
package mediaserver;

import java.io.BufferedWriter;
import java.io.IOException;
import java.io.OutputStreamWriter;
import java.net.Socket;
import java.net.UnknownHostException;

public class test {
public static void main(String [] args) throws UnknownHostException, IOException, InterruptedException{
    Socket s = new Socket("127.0.0.1", 1111);
    BufferedWriter bw = new BufferedWriter(new OutputStreamWriter(s.getOutputStream()));
    bw.write("");
    bw.newLine();
    bw.flush();

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T06:49:37.347

下面这段代码是一个无限循环：

```
while(true) {
    try {
        String n = br.readLine();
        System.out.println(n);
    } catch (IOException ex) {
        throw new RuntimeException(ex);
    }
    finally {
        ...
    }
} 
```

一旦客户端断开连接，`BufferedReader`实例将遇到文件结尾并`readLine`返回`null`. 然后循环将继续`null`无限打印。

修复它，检查`null`：

```
while(true) {
    try {
        String n = br.readLine();
        if (n == null)
            break;
        System.out.println(n);
    } catch (IOException ex) {
    }
    finally {
        ...
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T14:10:44.193

服务器永远不会在额外运行时获取数据，因为 ss.accept() 只被调用一次。您需要将其包装在一个循环中：

```
s = ss.accept();
br = new BufferedReader(new InputStreamReader(s.getInputStream()));
new Thread(new runner()).start(); 
```

# maven - 我的操作系统是windows7，想搭建sakai oae的开发环境

> ID：13116929
> 
> 赞同：0
> 
> 时间：2012-10-29T06:36:37.157
> 
> 标签：maven, ojdbc

我的操作系统是windows7，我想部署sakai oae的环境

```
When I run
    mvn deploy:deploy-file -DgroupId=com.oracle-jdbc-6 -DartifactId=ojdbc6 -Dversion=10.2.0.1.0 -Dpackaging=jar -Dfile=org.sakaiproject.nakamura.ojdbc.jar -Durl=url -DrepositoryId=repositoryId

I got the error:
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-deploy-plugin:2.7:
deploy-file (default-cli) on project org.sakaiproject.nakamura.ojdbc6: No transf
er protocol found. -> [Help 1] 
```

我不知道为什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T01:24:00.587

您正在尝试将 oracle jdbc jar 安装到本地存储库。不要从包含 POM 的 OAE 源中执行此操作，因为它会尝试读取 POM 并且会感到困惑。只需从新目录执行此操作，它应该安装在您的本地存储库中。

查看此页面底部以获取有关运行 mvn deploy 插件以将 jar 安装到本地 repo 的更多信息： [http ://maven.apache.org/plugins/maven-deploy-plugin/usage.html](http://maven.apache.org/plugins/maven-deploy-plugin/usage.html)

# c# - 如何在 C# 中编辑/更新集合中的数据

> ID：13116931
> 
> 赞同：0
> 
> 时间：2012-10-29T06:36:46.953
> 
> 标签：c#

我的 C# 代码中有一个集合

```
private ObservableCollection<UserForms> _userForms = 
    new ObservableCollection<UserForms>();

public ObservableCollection<UserForms> UserForms { get { return _userForms; } } 
```

我正在用 4 个值填充集合

```
foreach (DataRow dr in DataTable.Rows)
{
                    UserForms.Add(new UserForms()
                    {
                        FormID = Convert.ToInt32(dr["FormID"]),
                        FormName = dr["FormName"].ToString(),
                        FromSyName = dr["FormSyName"].ToString(),
                        Visibility = false,
                        RoleAdd=false,
                        RoleEdit=false,
                        RoleDelete=false
                    });
} 
```

我正在填写这个`Form_Load()`事件

现在我想更新

```
Visibility = true,
RoleAdd=true,
RoleEdit=true,
RoleDelete=true 
```

在集合中的指定行中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T06:49:11.887

您只需要执行以下操作：

```
UserForms[0].Visibility = true; 
```

其中“[0]”是索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T06:51:45.627

如果您`ObservableCollection`是可枚举的（通常是哪些集合），则可以使用 foreach 循环，如下所示：

```
foreach(UserForms uf in UserForms)
{
    if (uf.FormID > 10)
        uf.Visibility = true;
} 
```

在上面的代码中，我更改了`FormID`高于 10 的行的可见性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T06:57:08.250

看起来您需要过滤掉一些项目，然后更新它们。

```
foreach(UserForms uf in UserForms.Where(i=>i.FormName == "FormName"/*put your filtering criteria here*/))
{
    uf.Visibility = true;
    // Set all needed properties here
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T06:57:34.210

您想访问集合的实例。

```
_userForms.ToList().ForEach((f) => f.Visibility = true); 
```

或者如果您知道索引并想要更新单个项目。

```
 _userForms[index].Visibility = true; 
```

或用于多个过滤器项目

```
 var filterColl = coll.Where((c)=> c.FormName.StartsWith("A"));
 filterColl.ToList().ForEach((f) => f.Visibility = true); 
```

希望这可以帮助..

# excel - 根据两个日期值自动填充“缺失”

> ID：13116935
> 
> 赞同：0
> 
> 时间：2012-10-29T06:37:31.393
> 
> 标签：excel, datetime, excel-formula, formula, formulas

我有两个日期列。

我的要求是：

> 如果[今天]和[第一栏中的日期]之间的差异超过两天，则应在第二栏中填写“缺失”一词。用户也可以在第二列输入一些日期值。在这种情况下，不应填写“缺失”。

我可以使用 1 列或更多列进行中间计算。

示例文件可以从[Link](https://docs.google.com/open?id=0Bwjl0SErKySTWXM2bGlCNlZJX1U)下载。在那，单元格“B3”应该自动填充“缺失”而不是单元格“B5”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T07:03:13.740

B1 单元格：

```
=IF((TODAY()-A1)<2,"","Missing")' 
```

如果同一列 (B) 也用于用户输入，则公式将被替换。为了使用户输入更容易，可以将单元格格式化为“隐藏”（公式将不可见），并将数据验证设置为“日期”以控制用户输入。

# java - 无法解决 Eclipse 中的变量错误

> ID：13116940
> 
> 赞同：1
> 
> 时间：2012-10-29T06:37:52.803
> 
> 标签：java, eclipse

尝试编写一个打印斐波那契数列的简单程序。我想创建一个名为 fibNumber 的方法来计算斐波那契数列的值，然后我想在 run() 方法中使用 for 循环来打印该值 15 次。我遇到的麻烦是 for 循环中的 println 方法。Eclipse 说“n 无法解析为值”和“i 无法解析为值”。我以为我在声明变量方面涵盖了所有基础。我错过了什么吗？

我想写的是一直到F15

F0 = 0
F1 = 1
F2 = 1
F3 = 2
F4 = 3
F5 = 5

```
import acm.program.*;

public class FiccononicSequence extends ConsoleProgram {

public void run(){
    println("This program prints out the Fibonacci sequence.");

    for (i = 1; i <= 15; i++){

        println("F" + i + " = " + fibNumber(n));

    }

}

private int fibNumber(int n){
    if (n == 0){
    return 0; 
    }else{ if (n == 1){
    return 1;
    }else{
    return fibNumber(n - 1) + fibNumber(n - 2);

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T07:10:39.047

试试这个...

**-**这里的问题是关于`scope`变量**的**。

**-** `i`应该声明类型`int`，它是方法的**本地**变量，**而不是**方法中的另一个**局部变量**。`run()`**`n``n`**`fibNumber()`****

 ******-** `i`并且`n`完全在**不同的范围内**，彼此**不可见**。

```
for (int i = 1; i <= 15; i++){

        println("F" + i + " = " + fibNumber(i));  // i should be here.

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T06:39:47.743

“n”是什么？您可能应该在那里使用“i”而不是“n”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T06:40:59.937

问题是你如何调用`fibnumber`方法，因为`n`变量没有在`run`方法上下文的任何地方声明：

```
for (int i = 1; i <= 15; i++){
    println("F" + i + " = " + fibNumber(n));  //what's n?
} 
```

要修复它，只需发送`i`变量：

```
for (int i = 1; i <= 15; i++){
    println("F" + i + " = " + fibNumber(i));  //now it compiles!
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T06:41:25.027

您需要`i`在 for 循环中定义并将其传递给`fibNumber`

```
for (int i = 1; i <= 15; i++){<-- Define i 
    println("F" + i + " = " + fibNumber(i));<-- pass `i `
} 
```****

# vb.net - VB.NET：如何在应用程序运行时调整 DatagridView 列宽？

> ID：13116942
> 
> 赞同：2
> 
> 时间：2012-10-29T06:37:56.230
> 
> 标签：vb.net, datagridview

在 VB 中，我正在使用 Windows 窗体 DatagridView。

所以在这里我试图获得运行应用程序后用户应该能够调整列宽大小（动态）的功能。

我经历了很多东西，但它们只提供静态解决方案。但是我想要实现的是在应用程序开始运行之后，如果用户想要自定义列宽，那有什么选择呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T09:16:09.220

我不确定是否能够使用标准的 .NET DataGridViews 执行此操作，但如果您下载并使用基础控件，它们允许您作为标准动态更改列宽。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T02:58:24.513

除非您将 AllowUserToResizeColumns 属性设置为 false，否则用户应该能够使用鼠标随意修改它们，就像 Excel 中的“标准”网格一样。

但是，我怀疑您在问如何保留该设置，以便下次运行它时，将列设置回用户的偏好？

一种方法是处理事件上的 ColumnWidthChanged 事件并将值存储在注册表中：

```
Private Sub DataGridView1_ColumnWidthChanged(sender As Object, e As System.Windows.Forms.DataGridViewColumnEventArgs) Handles data1.ColumnWidthChanged

    Dim dt As DataGridView

    dt = DirectCast(sender, DataGridView)

    With My.Computer.Registry
        .CurrentUser.CreateSubKey(csRegKey & "\Columns\" & dt.Name)
        .SetValue("HKEY_CURRENT_USER\" & csRegKey & "\Columns\" & dt.Name, e.Column.Name, e.Column.Width, Microsoft.Win32.RegistryValueKind.DWord)
    End With

End Sub 
```

其中 csRegKey 是您选择的常量字符串值，用于定义 HKCU 配置单元中存储该值的位置，例如“Software\MyAppName”。

然后，当您的应用程序启动时，读取这些值的注册表并将它们相应地应用于列宽：

```
Dim key As Microsoft.Win32.RegistryKey

key = Microsoft.Win32.Registry.CurrentUser.OpenSubKey(csRegKey & "\Columns\YourDataName")

If key IsNot Nothing Then
    For Each colAny As DataGridViewColumn In Me.data1.Columns
        If key.GetValue(colAny.Name) <> 0 Then
            colAny.Width = key.GetValue(colAny.Name)
        End If
    Next

    key.Close()
End If 
```

# android - 如何使用异步任务定期保存位置更新？

> ID：13116944
> 
> 赞同：0
> 
> 时间：2012-10-29T06:38:06.957
> 
> 标签：android

目前我正在尝试定期收集位置更新，例如每 10 个样本。一旦我使用异步任务将它们传递给服务器，我正在使用数组列表来收集它们并清除主 UI 线程中的数组列表。在异步任务中，我正在使用来自主 UI 的数组列表加载数组列表。

问题是，它正在清除异步任务中的数组列表，即使它位于单独的变量中。如何使活动保持同步。我是否需要让主要活动休眠，直到异步任务完成。我不确定变量。有人可以解释如何做到这一点吗？

```
MainMapActivity(X){
  locationupdate for every 1 min{
  arraylist a;//this collects all location updates 10 samples each time
  call asynctask b;
  clear a;
}
asynctask b{
  arraylist c = getall from  a;
  db= insert(c);//save a into database;
} 
```

清除主 UI 中的 a 会清除变量 c。我怎样才能防止这种情况？变量 c 只有在保存了其中的所有数据后才应清除。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T07:05:17.083

如果我得到你想说的是，那么是的，我们有办法使用处理程序来解决你的问题。

在你的异步任务中，做这样的事情 -

```
 private mLocations;
 public MyTask(Handler mResponseHandler, List<Location> mLocations){
        super();
        this.mLocations = mLocations;
        this.mResponseHandler = mResponseHandler;
    } 
```

在 onPostExecute 中，

```
 onPostExecute(List<Location>){

 @Override
    protected void onPostExecute(Boolean result) {

        super.onPostExecute(result);

        Log.i(TAG, "result = "+result);
        if (mResponseHandler == null) return;

        MyLocationData<Location> resultData = new MyLocationData<Location>();
        if(result != null && result){
            resultData.requestSuccessful = true;
            resultData.responseErrorCode = 0;
        }else{
            resultData.requestSuccessful = false;
            resultData.responseErrorCode = errorCode;  //set this when result is null
        }

        android.os.Message m = android.os.Message.obtain();
        m.obj = resultData;
        mResponseHandler.sendMessage(m);
    }
} 
```

MyLocationData 是一个模型类，我在其中保存所有相关数据。它可以是这样的课程 -

```
 public class MyLocationData<Type> {

    public Type response;
    public int responseErrorCode;
    public boolean requestSuccessful;
} 
```

现在，在您的活动中，您可以获得这些数据，例如，

```
private Handler mExportHandler = new Handler(){ 

        public void handleMessage(android.os.Message msg) {
                MyLocationData<Location> responseData = (MyLocationData<Location>) msg.obj;
                 // your logic for fetching new locations from responseData and using them in your activity   

        };
    }; 
```

# java - 如何将生成的 PCM 字节 [] 保存到 android 支持的音频文件？

> ID：13116946
> 
> 赞同：1
> 
> 时间：2012-10-29T06:38:11.140
> 
> 标签：java, android, audio

该`bytes[]`数组是我自己以特定频率生成的。现在我想将字节保存到`.wav`文件中，以便 MediaPlayer 可以播放它。谁能有一些想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T07:29:56.700

虽然我确定有库可以在某处执行此操作，但我通常只使用我自己的 WAV 文件编写代码，基于[此处](https://ccrma.stanford.edu/courses/422/projects/WaveFormat/)描述的文件格式。如果您想支持多种比特率等，这可能会有点棘手，并且您还需要记住 little-endian 字节顺序。

# ruby-on-rails - Rails 3.2.8 和 rspec、link_to 当前路径、参数哈希未正确转换

> ID：13116947
> 
> 赞同：0
> 
> 时间：2012-10-29T06:38:15.423
> 
> 标签：ruby-on-rails, rspec, ruby-on-rails-3.2, capybara

我最近通过当前应用程序升级到 Rails 3.2.8 并且无法通过一些测试。我做了一个辅助方法，将某些哈希与参数哈希合并并创建到当前页面的链接。我使用了我在上面看到的技术：[link_to 当前页面加上/合并了一个参数](https://stackoverflow.com/questions/5535908/link-to-the-current-page-plus-merged-with-a-param)。

这是一个精简版：

```
def simple_link
  link_to "Page", params.merge(:c => nil)
end 
```

然后我会用类似的东西来测试它：

```
describe "simple_link" do
  it { simple_link.should == "<a href=\"/assets\">Page</a>" }
end 
```

这是在 3.2.6 中通过的。

但是，现在我收到 rspec 错误`No route matches {:c=>nil}`。Rails、rspec 或 capybara 都认为哈希是路由。如果我添加正确的路线，例如：`users_path`，那么 url_for 似乎会拾取哈希。在浏览器上测试，一切正常，没有错误。我是不是做错了什么，在 3.2.8 中是否发生了一些变化，或者这是一个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T23:53:08.817

升级 rails 还会将[旅程](https://github.com/rails/journey)路由 gem 从 1.0.3 升级到 1.0.4。在该升级中，[路由处理约束的方式](https://github.com/rails/journey/issues/39#issuecomment-6360195)发生了变化：

> 1.0.4 修复了 Rails 3.1 的回归，即使用户传入的约束不匹配任何内容，路由器也会返回路由。

由于您（在评论中）提到将旅程降级到 1.0.3 可以解决问题，因此旅程的这种变化几乎肯定是问题的原因。查看这些 github 问题以找到可能的解决方案：

*   [1.0.3 -> 1.0.4 更新在测试中中断 url_for](https://github.com/rails/journey/issues/42)
*   [控制器规范中的 ActionController::RoutingError](https://github.com/rails/journey/issues/39)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T23:58:39.520

错误是我从助手调用 link_to 而没有提供当前请求的方式。现在，我可以通过 stubbing 绕过错误`url_for`，但这不允许我测试 params 哈希。所以试图找到更好的方法。

```
it "should return the right tag" do
  self.stub!(:url_for).and_return '/bar'
  simple_link.should == "<a href=\"/bar\">Page</a>"
end 
```

# javascript - JSON 如何从字符串转换为对象？

> ID：13116949
> 
> 赞同：0
> 
> 时间：2012-10-29T06:38:18.810
> 
> 标签：javascript, json

在幕后，JSON 是使用创建的`eval`吗？

如果不是，字符串如何`'{"val1":1,"val2":2}'`变成一个对象 where`.val1 == 1`和`.val2 == 2`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T06:41:39.927

JSON 通常使用 JSON 解析器转换为 JavaScript 对象。现在的浏览器自带一个可以通过[对象](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/parse)[的`parse`方法访问的`JSON`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/parse)。传统的 pollyfill 是[json2.js](https://github.com/douglascrockford/JSON-js)。

但是，该字符串不是 JSON，无法使用 JSON 解析器进行解析。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T06:43:57.050

试试这个

变量对象 =`JSON.parse(string);`

或者这是另一种方式

```
JSONObject jsonObj = new JSONObject("{\"val1\":\"1\",\"val2\":\"2\"}"); 
```

# java - 如何自己在 Java EE 上生成会话 ID

> ID：13116951
> 
> 赞同：1
> 
> 时间：2012-10-29T06:38:46.780
> 
> 标签：java, jakarta-ee

我想自己生成会话ID `Java EE`。比如我想生成128位、256位的session id，

如何生成它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T06:43:20.923

会话 ID 由应用服务器生成。所以，这取决于它。为此，您必须更改应用程序服务器（我的意思是为其创建一些补丁）。

我相信您可以做到这一点，但您必须分别发现每个应用程序服务器。因此，如果没有补丁，您将无法在服务器上部署您的应用程序。这意味着这种技术似乎不是最优的。

这里最大的问题是“为什么”？我相信你应该更好地解释你的原因问题。我相信这里的人可以为您提供更好的解决方案。

# mysql - mysql select查询中的响应时间不一致

> ID：13116966
> 
> 赞同：1
> 
> 时间：2012-10-29T06:40:02.247
> 
> 标签：mysql, database

我们有很多 MySQL 选择查询来满足一些报告需求。大多数都不太复杂，它们通常包括 1\. 五六连接语句 2\. select 子句中的三四内部查询。

所有索引在生产环境中都正确到位。我们已经多次检查了解释查询语法，它们都可以。

一些查询在响应时间方面表现得非常奇怪。相同的查询有时会在不到 500 毫秒的时间内返回（这表明所有索引都工作正常），当我们在 1 分钟左右运行它时 - 它给出的结果响应时间很长（从 5-6 秒到 30 秒不等） .) 有时（大约 20 次..）它给出了一个超时错误。

这可能是由于服务器负载造成的——但高方差如此频繁，以至于我们认为需要设置其他东西来解决它。

有人可以告诉我一些关于其他事情的方向吗！

谢谢，

苏米特

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T13:17:04.647

这种行为通常是由堆栈中的瓶颈引起的。

就像一栋大楼里的旋转门——门一次可以容纳1个人，每个人需要3秒；只要人们每 3 秒到达的速度不超过 1 人，你就不知道这是一个瓶颈。如果人们在短时间内以更快的速度到达，队列会增加一点，但很快就会消失。如果人们以每 2.5 秒 1 人的速度到达一个小时，则队列变得难以管理，并且可能需要比 1 小时更长的时间才能消失。

您的数据库系统由一个带有旋转门的长走廊组成——大多数门可以并行操作，但它们都是有限的。

（很抱歉这个垃圾类比，但我发现用真实世界的图像来可视化这些东西很有帮助）。

如果查询在其性能配置文件中显示出高度的差异，我会查看系统性能监视器（Linux 中的顶部，Windows 中的 Perfmon）并尝试将缓慢的性能与系统的行为相关联。如果您在查询速度变慢时看到 CPU 使用率突然飙升，那很可能是您的瓶颈；如果您看到磁盘吞吐量突然飙升，您可能会看到那里。

一旦你对瓶颈有了一个假设，你就可以考虑解决它们的方法——在问题上投入硬件通常是最便宜的。

# java - Java中的Reed-Solomon编解码实现示例

> ID：13116967
> 
> 赞同：3
> 
> 时间：2012-10-29T06:40:08.613
> 
> 标签：java, reed-solomon

我需要使用 Reed-Solomon 纠错码对一些文本进行编码和解码。实现应该是Java。

我已经浏览了 Sean Owen 的实现类，但无法通过工作示例构建这些类。

有人可以发布 Reed-Solomon 纠错码或任何参考链接的工作示例。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-02T02:42:50.963

这有点晚了，但在 github 上有一个完整的 Java 示例：

[https://github.com/alexbeutel/Error-Correcting-Codes/tree/master/src](https://github.com/alexbeutel/Error-Correcting-Codes/tree/master/src)

它具有以下类：

*   **Decoder.java** <== RS 解码器类
*   **Encoder.java** <== RS 编码器类
*   **ErrorCodesMain.java** <== 完整的工作示例
*   **GF257.java** <== 伽罗瓦域（257）类
*   **GF28.java** <== Galois Fields(2^8) 类

从命令行构建项目：

```
javac ErrorCodesMain.java Decoder.java Encoder.java GF257.java GF28.java 
```

要运行它：

```
java ErrorCodesMain 
```

这是程序的输出：

```
# of Generators of GF(2^8): 128
# of Generators of GF(257): 128
Generator: 206
Erasures: 38, 1, 7, 15, 28, 16, 29, 28, 7, 8, 

OUTPUT FROM O(nk) IN GF(2^8): Hello, my name is Alex Beutel.
FFT OUTPUT DECODED: Hello, my name is Alex Beutel.
OUTPUT FROM O(nk) IN GF(257): Hello, my name is Alex Beutel. 
```

# mysql - 搜索引擎使用 php , InnoDB 引擎 Mysql

> ID：13116968
> 
> 赞同：0
> 
> 时间：2012-10-29T06:40:08.877
> 
> 标签：mysql

```
SELECT firstname, lastname,comments 
FROMusers 
WHERE MATCH(firstname,lastname,comments) 
AGAINST('$searchterm') 
```

我尝试将上述一个作为搜索引擎的查询，但mysql说仅在MYISAM上支持FULL-TEXT INDEXING，我使用的引擎是innoDB，请告诉我在InnoDB引擎上搜索coloumn INDEX的最佳方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T07:06:28.863

据我所知，MySQL FTS 自 5.6 版（[http://dev.mysql.com/tech-resources/articles/whats-new-in-mysql-5.6.html](http://dev.mysql.com/tech-resources/articles/whats-new-in-mysql-5.6.html)）起就可用于 InnoDB

您应该在此处查看 MySQL Fulltex 搜索文档[http://dev.mysql.com/doc/refman/5.5/en/fulltext-search.html](http://dev.mysql.com/doc/refman/5.5/en/fulltext-search.html)

基本上，我认为您应该了解什么是“索引”以及 MySQL 如何进行索引。这篇文章对于帮助理解 MySQL 全文搜索背后的机制非常有用[http://dev.mysql.com/doc/internals/en/full-text-search.html](http://dev.mysql.com/doc/internals/en/full-text-search.html)

全文搜索中有几个重要的概念：

1.  [布尔模式](http://dev.mysql.com/doc/refman/5.5/en/fulltext-boolean.html)
2.  [自然语言模式](http://dev.mysql.com/doc/refman/5.5/en/fulltext-natural-language.html)
3.  我还建议您阅读MySQL FTS 中的[停用词列表](http://dev.mysql.com/doc/refman/5.5/en/fulltext-stopwords.html)。
4.  [像ft_min_word_len](http://dev.mysql.com/doc/refman/5.5/en/fulltext-fine-tuning.html)这样的系统变量也很重要。

了解了这些之后，我想你就会知道如何正确应用 MySQL 全文搜索了。

# c# - 在注册失败的 ASP.NET MVC3 时将用户添加到角色

> ID：13116969
> 
> 赞同：0
> 
> 时间：2012-10-29T06:40:14.557
> 
> 标签：c#, asp.net-mvc-3, asp.net-membership, asp.net-roles

我喜欢让用户在注册 asp.net mvc web 应用程序时选择他们的角色。我以前通过 asp.net addministration 工具添加了角色。这是我在注册方法中使用的代码

```
public ActionResult Register()  
{
ViewData["roleName"] = new SelectList(Roles.GetAllRoles(), "roleName");
return View();
}

 [HttpPost]
    public ActionResult Register(RegisterModel model)
    {
        if (ModelState.IsValid)
        {
            // Attempt to register the user
            MembershipCreateStatus createStatus;
            Membership.CreateUser(model.UserName, model.Password, model.Email, null, null, true, null, out createStatus);

            if (createStatus == MembershipCreateStatus.Success)
            {
                Roles.AddUserToRole(model.UserName, "roleName");
                FormsAuthentication.SetAuthCookie(model.UserName, false /* createPersistentCookie */);
                return RedirectToAction("Index", "Home");
            }
            else
            {
                ModelState.AddModelError("", ErrorCodeToString(createStatus));
            }
        }

        // If we got this far, something failed, redisplay form
        return View(model);
    } 
```

在注册视图中我得到了这个代码

```
 <label for="roleName">Select Role:</label>
         @Html.DropDownList("roleName")
         @Html.ValidationMessage("roleName") 
```

虽然角色是写在数据库和用户中的。但是 UsersInRoles 表是空的，我得到了这个异常

System.Configuration.Provider.ProviderException：找不到角色“roleName”。

有没有人有同样的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T10:49:25.083

您应该将角色名称参数添加到注册控制器操作以获取用户角色名称选择，或从 FormCollection 中检索角色名称，这是示例将您的注册发布操作更改为：

```
 [HttpPost]
        public ActionResult Register(RegisterModel model, String roleName)
        {
            if (ModelState.IsValid)
            {
                // Attempt to register the user
                MembershipCreateStatus createStatus;
                Membership.CreateUser(model.UserName, model.Password, model.Email, null, null, true, null, out createStatus);

                if (createStatus == MembershipCreateStatus.Success)
                {
                    Roles.AddUserToRole(model.UserName, roleName);
                    FormsAuthentication.SetAuthCookie(model.UserName, false /* createPersistentCookie */);
                    return RedirectToAction("Index", "Home");
                }
                else
                {
                    ModelState.AddModelError("", ErrorCodeToString(createStatus));
                }
            }

            // If we got this far, something failed, redisplay form
            return View(model);
        } 
```

# c# - wpf中的聚光灯效果

> ID：13116971
> 
> 赞同：0
> 
> 时间：2012-10-29T06:40:21.920
> 
> 标签：c#, .net, wpf, opacity, opacitymask

有没有办法在 wpf 中实现聚光灯效果？ [http://www.youtube.com/watch?v=LgLw29c-qr8](http://www.youtube.com/watch?v=LgLw29c-qr8)

我可以理解 OpacityMask 会让我这样做，但是如何将图像（或背景）渲染到画布上，但除了渲染按钮的区域之外，我如何才能将图像（或背景）显示为白色？

这里有几张图片可以更好地解释我的问题，

frame1 显示屏幕左边缘的按钮，遮盖了部分画布背景。 ![框架1](../Images/09bace553a8b9ba0b7fefa9269f61fd9.png)

frame2 显示了屏幕中间的按钮，遮住了画布背景的不同部分。 ![框架2](../Images/0e87520adf5706d096fa899196a15563.png)

被蒙版的实际画布背景 ![画布背景](../Images/3b9ce33ce92f6c61e2394db0c09ace25.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T07:32:13.453

我想出了以下解决方案，

```
<Window x:Class="Masking.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
    x:Name="ParentWindow" 
    WindowStyle="SingleBorderWindow"
    Title="MainWindow" Width="800" Height="600">
<StackPanel>
    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
        <Slider Value="{Binding ElementName=VisualButton, Path=(Canvas.Left)}" Minimum="0" Maximum="800" Width="800" Canvas.Left="0" Canvas.Top="10" TickFrequency="100" LargeChange="10" />
        <TextBlock Text="{Binding ElementName=VisualButton, Path=(Canvas.Left)}" />
    </StackPanel>
    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
        <Slider Value="{Binding ElementName=VisualButton, Path=(Canvas.Top)}" Minimum="0" Maximum="800" Width="800" Canvas.Left="0" Canvas.Top="10" TickFrequency="100" LargeChange="10" />
        <TextBlock Text="{Binding ElementName=VisualButton, Path=(Canvas.Top)}" />
    </StackPanel>
    <Canvas Width="800" Height="600">
        <Canvas.OpacityMask>
            <VisualBrush Stretch="None" Viewbox="0,0,800,600" ViewboxUnits="Absolute" Viewport="0,0,800,600" ViewportUnits="Absolute">
                <VisualBrush.Visual>
                    <Canvas Width="800" Height="600">
                        <Button x:Name="VisualButton" Width="100" Height="100" Canvas.Left="0" Canvas.Top="0" />
                    </Canvas>
                </VisualBrush.Visual>
            </VisualBrush>
        </Canvas.OpacityMask>
        <Canvas.Background>
            <ImageBrush ImageSource="Desert.jpg" />
        </Canvas.Background>
    </Canvas>
</StackPanel> 
```

但我认为这不是正确的方法。如果可能的话，请让我知道更好的方法。

# javascript - 如何在用户键入时显示提示框或工具提示？

> ID：13116972
> 
> 赞同：3
> 
> 时间：2012-10-29T06:40:21.470
> 
> 标签：javascript, html, css, tooltip, typescript

我的页面上有大约 1000 个文本字段，需要在用户当前输入的文本字段上方显示一个工具提示。

这听起来很简单，但我很难弄清楚如何将它显示在页面上的所有其他内容之上并且不破坏文档的流动。

我也不能为此使用任何外部库，这使它变得更加困难。我只被允许使用纯 JS（或编译成纯 JS 的语言，例如 TypeScript）。

有没有人有任何链接，教程或类似的东西？这将非常有帮助。

谢谢

*编辑：* 我知道您可以在元素上使用 Title 属性，但是此工具提示需要的不仅仅是其中的文本，还需要更大并且直接位于文本框上方。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T07:01:23.087

这样的事情可能会帮助你：

[http://jsfiddle.net/ysuw5/](http://jsfiddle.net/ysuw5/)

```
<div id="container">
    <input type="text" class="tooltip" onfocus="theFocus(this);" onblur="theBlur(this);" title="asdf" /><br />
    <input type="text" class="tooltip" onfocus="theFocus(this);" onblur="theBlur(this);" title="asdf2" /><br />
    <input type="text" class="tooltip" onfocus="theFocus(this);" onblur="theBlur(this);" title="asdf3" /><br />
    <input type="text" class="tooltip" onfocus="theFocus(this);" onblur="theBlur(this);" title="asdf4" /><br />

    <div id="tooltip"></div>
</div>

function theFocus(obj) {
    var tooltip = document.getElementById("tooltip");
    tooltip.innerHTML = obj.title;
    tooltip.style.display = "block";
    tooltip.style.top = obj.offsetTop - tooltip.offsetHeight + "px";
    tooltip.style.left = obj.offsetLeft + "px";
}

function theBlur(obj) {
    var tooltip = document.getElementById("tooltip");
    tooltip.style.display = "none";
    tooltip.style.top = "-9999px";
    tooltip.style.left = "-9999px";
} 
```

这显然是非常狭隘的，需要进行修改以完全适合您的需要。我没有费心用 Javascript 绑定`focus`和`blur`事件——这比把它们放在 HTML 中要好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T07:28:27.033

您可以通过多种方式使用“CSS 工具提示”。一个相对简单的想法是将提示内容放在`div`字段之前，最初用 CSS 隐藏。然后，您需要一个`onfocus`将其更改为可见的事件处理程序`div`（以及一个`onblur`使其再次不可见的处理程序）。您将有一个用于提示和字段的容器，并将该容器声明为相对位置，以便可以“绝对”定位提示（即相对于容器）。

示例（[jsfiddle](http://jsfiddle.net/ZYjmN/)）：

```
<!DOCTYPE HTML>
<meta charset=utf-8>
<style>
.textfield {
  position: relative;
}
.textfield .hint {
  display: none;
  position: absolute;
  width: 10em;
  bottom: 1.3em;
  background: #ff9;
  padding: 0 0.2em;
  border: solid 1px;
}
</style>
<script>
function hint(elem) {
  elem.parentNode.firstElementChild.style.display = 'block';
}
function unhint(elem) {
  elem.parentNode.firstElementChild.style.display = 'none';
}
</script>
<p>This is just some filler text.
<table>
<tr>
  <td><label for=bar>Bar</label>
  <td>
  <div class=textfield>
  <div class=hint>This is hint text for the Bar field.</div>
  <input id=bar name=bar onfocus="hint(this)" onblur="unhint(this)">
  </div>
<tr>
  <td><label for=foo>Foo</label>
  <td>
  <div class=textfield>
  <div class=hint>This is hint text for the Bar field.</div>
  <input id=foo name=foo onfocus="hint(this)" onblur="unhint(this)">
  </div>
</table> 
```

（当使用表格来结构化您的表单时，在这种方法中，您需要记住 CSS 定位不适用于表格单元格。这就是为什么您不能将`td`元素用作包装器但需要在`div`其中使用的原因。）

# javascript - 如何在 JavaScript 中设置目标文件夹

> ID：13116974
> 
> 赞同：1
> 
> 时间：2012-10-29T06:40:27.920
> 
> 标签：javascript

使用 Ajax 时如何在 JavaScript 中设置根文件夹？

这是我的代码？

```
var url="../../ajax_permission_data.php"

url=url+"?opp="+operation+"&userid="+userId;

url=url+"&sid="+Math.random() 
```

但我收到错误文件未找到。如果我将此文件放在同一个文件夹中，那么它将起作用。但我不想将所有文件放在同一个文件夹中。所以请帮助我如何设置路径。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T06:49:52.657

```
 var path="http://www.mysite.com/";

    var url=path+"folder/ajax_permission_data.php";

    url=url+"?opp="+operation+"&userid="+userId;

    url=url+"&sid="+Math.random(); 
```

# php - 在php中上传和解压缩大文件

> ID：13116976
> 
> 赞同：0
> 
> 时间：2012-10-29T06:40:36.700
> 
> 标签：php, upload, unzip

我如何上传和解压缩 30-35mb 这样的大文件。服务器上文件大小的限制是什么。当我上传 32mb 的 zip 文件时，它的显示

> 连接被重置
> 
> 加载页面时重置与服务器的连接。
> 
> 该站点可能暂时不可用或太忙。请稍后再试。如果您无法加载任何页面，请检查您计算机的网络连接。如果您的计算机或网络受到防火墙或代理的保护，请确保允许 Firefox 访问 Web。

我的代码可在此链接上找到 [如何解压缩上传的 zip 文件？](https://stackoverflow.com/questions/11325310/how-to-unzip-uploaded-zip-file/12987449#12987449)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T06:49:00.233

PHP中有一个名为[upload_max_filesize的设置。](http://www.php.net/manual/de/ini.core.php#ini.upload-max-filesize)您将不得不更改该值。

编辑：

正如 lanzz 在下面提到的，还有另一个相关的设置，称为[post_max_size](http://www.php.net/manual/en/ini.core.php#ini.post-max-size)，它限制了将被处理/可能由 PHP 发送/发送到 PHP 的最大 POST 数据量。

# java - Eclipse 中的 JPA 生成

> ID：13116982
> 
> 赞同：0
> 
> 时间：2012-10-29T06:41:29.237
> 
> 标签：java, jpa-2.0

我正在研究 JPA。

我从过去 6 个月开始研究它，从未遇到过这个问题。

问题是没有生成 JPA 类。我的意思是我使用 EclipseLink 的 api 为任何 Schema 生成它们，但不知道它没有被生成。

尽管在 Netbeans IDE 中完美地生成了相同模式的 JPA。所以我担心的是，是否有任何程序可以为我生成 JPA。虽然我知道我可以将类从 Netbeans 复制到 Eclipse，但这不是我的解决方案。

请帮我..... ：（

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T08:15:17.980

没有异常痕迹，日志或其他提示，很难猜出问题，但我在 Eclipse 3.7 和 Dali 插件中遇到了非常相似的问题......你有没有机会在你的路径中有一个名称开头的目录有一个`!`？就我而言，这就是问题所在，我的路径是这样的：

`D:\!dev\....\eclipse`

它不会生成类。我调试了它，发现了问题：将我的 Eclipse 移动到文件夹结构后

`D:\dev\....\eclipse`

文件已成功生成。我还提交了有关此问题的[bugzilla 报告。](https://bugs.eclipse.org/bugs/show_bug.cgi?id=388631)

# c# - C# - 检查给定的 url 是文件还是目录？

> ID：13116985
> 
> 赞同：7
> 
> 时间：2012-10-29T06:41:39.147
> 
> 标签：c#, path

我有一个方法可以输入 http 、 ftp 或本地路径。使用输入 url，我需要确定它是文件还是目录。

Path.GetExtension(url) 几乎可以正常工作。但是如果一个目录以/有'.'开头 以它的名义，那么这个检查将失败。

是否有任何其他方法可以检查和列出 url if directory ？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-29T06:46:14.743

你可以使用`File.Exists(url)`和`Directory.Exists(url)`

另一种方法是创建一个扩展数组，然后`Path.GetExtension(url)`对照它检查结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-11-12T13:15:42.540

以下代码获取路径，查看最后一个子字符串（在最后一个 / 之后）并检查是否有一个 '.' 在该子字符串中确定它是文件还是路径。`isFile`将是一个布尔值，真正的意思是它是一个文件。

`var isFile = new Uri(url).AbsolutePath.Split('/').Last().Contains('.');`

# android - ContentProvider 如何在内部工作

> ID：13116994
> 
> 赞同：1
> 
> 时间：2012-10-29T06:42:36.443
> 
> 标签：android, android-contentprovider

大家，我在看android源码。但是我找不到对我有价值的东西。实际上，我想知道是否`ContentProvider`像这样工作`AIDL`。你知道，`AIDL`可以实现两个独立应用程序之间的通信。

所以，我只想看看`ContentProvider`内部是如何工作的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T09:09:44.720

来自 ContentProvider[源代码](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.1.1_r1/android/content/ContentProvider.java#ContentProvider)

> 内容提供者是 Android 应用程序的主要构建块之一，为应用程序提供内容。它们封装数据并通过单个 ContentResolver 接口将其提供给应用程序。仅当您需要在多个应用程序之间共享数据时才需要内容提供程序。例如，联系人数据由多个应用程序使用，并且必须存储在内容提供程序中。如果您不需要在多个应用程序之间共享数据，您可以通过 android.database.sqlite.SQLiteDatabase 直接使用数据库。

根据这个和我发给你的链接中的信息，ContentProvider**没有**使用 AIDL ......它使用的是 ContentResolver 接口。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-21T07:20:58.020

内容提供者在内部使用 IPC 绑定器。“其实Intents和ContentProvider只是Binder的更高层次的抽象”

# java - 在 Java 中遍历泛型 Trie

> ID：13116998
> 
> 赞同：1
> 
> 时间：2012-10-29T06:43:01.747
> 
> 标签：java, generics, trie, tree-traversal

我在java中有一个完全构建的通用Trie。我试图遍历 Trie 以获得每条路径的所有完整组合。例如，如果 Trie 包含字符，那么它将返回所有单词组合。出于我的目的，我试图将每个组合的所有节点放入一个数组中并返回它们。然而，我很难过。我只是想出了在返回父/起始节点之前遍历每个子节点（+子子节点）的遍历（很像 BST 遍历）。我正在使用一个`ArrayList`来保存每个节点的孩子。对不起，如果它有点混乱。代码示例或伪代码将不胜感激。谢谢。

**编辑**

通过组合，我的意思是以下。如果我有一个`Trie<char>`如下所示：

```
 "null"
       /  |   \
      a   i    t
     /   /|\    \
    t   f m n    o 
```

我想要返回的组合是：

```
[a, t]
[i, f]
[i, m]
[i, n]
[t, o] 
```

并且所有这些数组/列表都可以在一个最后返回的 ArrayList 中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T06:58:06.143

使用递归方法（至少）获取树中的所有字符。只需确保将其初始化`chars`为空列表

```
Stack startRead(Tree tree) {
  // validation check
  if (tree == null || !tree.hasChild()) return null;

  // create Stack to store the lists
  Stack listStack = new Stack();

  // for every child
  List children = tree.getChildren();
  for (Tree child : children) {
    // create a list
    List childList = new ArrayList();

    // store (push) it into stack
    listStack.push(childList);

    // call the recursive
    readIt(child, listStack);
  }

  return listStack;
}

void readIt(Tree tree, Stack listStack) {
  // pick the top list from stack
  List current = (List) listStack.pop();

  // this is the base; if tree has no child don't call this method again.
  if (!tree.hasChild()) {
    // if it's leaf add the value to current list
    current.add(tree.getValue());

    // push it back to stack
    listStack.push(current);
  } else {
    // for every child
    List children = tree.getChildren();
    for (Tree child : children) {
      // IMPORTANT! clone the list (if this fails, clone it yourself)
      // clone is called when the tree is branching
      List childList = current.clone();

      // insert this tree value to list
      childList.add(tree.getValue());

      // push it back
      listStack.push(childList);

      // call again
      readIt(child, listStack);
    }
  }
} 
```

有了这个，您将获得一个堆栈的返回值，其中包含每个组合的值列表。

希望这可以帮助。:)