# StackOverflow 问答 14472000-14472999

# php - fputcsv 在处理数组的最终元素时发出警告

> ID：14472001
> 
> 赞同：1
> 
> 时间：2013-01-23T03:30:42.020
> 
> 标签：php

我的问题是关于如何正确处理以下警告：

```
Warning: fputcsv() expects parameter 2 to be array, boolean given 
```

违规行是：

```
foreach($participantInfo as $fields)
{
    fputcsv($participantFile, $fields);
} 
```

当我在 var_dump 上做一个 var_dump 时`$fields`，我发现了两个预期的数组，还有一个 final `bool(false)`。除此之外，代码按预期工作。是否有适当的方法来处理最终的布尔值，或者我应该只抑制函数警告？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T03:33:55.763

```
$participantInfo  = array_filter($participantInfo );
foreach($participantInfo as $fields)
{
    fputcsv($participantFile, $fields);
} 
```

这将从 eqal 中删除所有等于 FALSE 的条目`$participantInfo`，由于您的数组是多维的，因此更深的维度将保持不变。

# c - 如何在循环中使用 fgets 和 sscanf 处理整数

> ID：14472004
> 
> 赞同：0
> 
> 时间：2013-01-23T03:31:50.443
> 
> 标签：c, fgets, scanf

这里是 C 初学者。我正在尝试运行一个循环，将字符串和`ints`输入到`struct`. 当提示输入“姓氏”时，用户可以在没有其他输入的情况下按回车键，循环应该结束。

问题是，使用此代码，循环不会结束（姓和名输入请求一起在同一行上运行）并且薪水的值总是错误的（0 或某个大数字）

```
while (employee_num <= 2)
{
    printf("Enter last name ");
    fgets(employee[employee_num].last_name, sizeof(employee[employee_num].last_name), stdin);                   

    if(strlen(employee[employee_num].last_name) == 0)
        break;

    printf("Enter first name ");
    fgets(employee[employee_num].first_name, sizeof(employee[employee_num].first_name), stdin);

    printf("Enter title ");
    fgets(employee[employee_num].title, sizeof(employee[employee_num].title), stdin);

    printf("Enter salary ");
    fgets(strng_buffer, 1, stdin);
    sscanf(strng_buffer, "%d", &employee[employee_num].salary);     
    ++employee_num;
    getchar();
} 
```

如果我改为尝试此代码，我可以在第一次运行后正确退出循环，但之后无法退出（通过在姓氏部分按 enter - 也许是 \n 我似乎无法清除？）：

```
char strng_buffer[16];
while (employee_num <= 5)
{
    printf("Enter last name ");
    fgets(strng_buffer, sizeof(strng_buffer), stdin);                   
    sscanf(strng_buffer, "%s", employee[employee_num].last_name);       

    if(strlen(employee[employee_num].last_name) == 0)
        break;

    printf("Enter first name ");
    fgets(strng_buffer, sizeof(strng_buffer), stdin);
    sscanf(strng_buffer, "%s", employee[employee_num].first_name);

    printf("Enter title ");
    fgets(strng_buffer, sizeof(strng_buffer), stdin);
    sscanf(strng_buffer, "%s", employee[employee_num].title);

    printf("Enter salary ");
    scanf("%d", &employee[employee_num].salary);        
    ++employee_num;
    getchar();
} 
```

我很好奇如何使这项工作按预期进行，以及此类条目的最佳实践是什么（即使用 sscanf、fgets 等）

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T03:35:09.687

循环在遇到 break 语句时过早中断

```
if(strlen(strng_buffer) == 0)
        break; 
```

未初始化的字符缓冲区`strng_buffer`，恰好有 null 作为导致`strlen`返回的第一个字符`0`

我相信你可能有意

```
if(strlen(employee[employee_num].last_name) == 0)
            break; 
```

作为循环终止符，这是您的拼写错误，导致循环过早退出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T04:27:25.060

问题是`fgets`返回包含换行符（`\n`）的字符串。因此，即使用户在没有输入信息的情况下按下回车，字符串也不会为空。此外，您的缓冲区大小`salary`太小。

因此，要么去掉`\n`每一个，要么`fgets`将支票更改为：

```
if(strlen(employee[employee_num].last_name) == 1) break; 
```

此外，当您获得缓冲区时，将 1 更改为更大的值，例如

```
fgets(strng_buffer, 10, stdin); 
```

但是，如果您确实想`\n`从每个 fget 中删除，您可以执行以下操作：

```
employee[employee_num].last_name[strlen(employee[employee_num].last_name)-1] = 0; 
```

您可以为每个字符串执行此操作，或者更好的是，创建一个执行此操作的函数。

编辑：如果您可以保证用户在每次输入后都会按回车键，那么您可以放心地假设这一点。但是，如果并非总是如此，则最后一个字符可能不是`\n`，仅以这种方式剥离可能会导致问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T04:27:27.190

假设 Abhijit 提到的修复，为什么将第一个转换为第二个？您是否知道第二个的行为与第一个不同，因为添加了`sscanf`? 如果您的意图是缩短第一个，那么第二个似乎相当庞大。与其增加情况，为什么不通过声明 a并重复使用它来`sscanf`缩短第一个，而不是?`struct employee *e = employee + employee_num;``employee[employee_num]`

一个“最佳实践”`fgets`是检查它的返回值。[`fgets`](http://pubs.opengroup.org/onlinepubs/007904975/functions/fgets.html)如果遇到 ，您认为可能会返回什么`EOF`？[`fgets`](http://pubs.opengroup.org/onlinepubs/007904975/functions/fgets.html)如果成功，您认为会返回什么？

一个“最佳实践”`scanf`是检查它的返回值。关于 的返回值`scanf`，我建议仔细阅读[本`scanf`手册](http://pubs.opengroup.org/onlinepubs/007904975/functions/scanf.html)并回答以下问题：

1.  `int x = scanf("%d", &employee[employee_num].salary);`如果我作为输入输入，你认为`x`会是`"fubar\n"`什么？
2.  你认为`'f'`from`"fubar\n"`会去哪里？
3.  如果它`ungetc`'d back to `stdin`，你的下一个员工的姓是什么？
4.  `int x = scanf("%d", &employee[employee_num].salary);``x`如果我在 Windows 上运行此代码并按 CTRL+Z 发送`EOF`到，您认为会是什么`stdin`？
5.  `int x = scanf("%d %d", &y, &z);``x`假设`scanf`成功地将值放入两个变量`y`和中，您期望是什么`z`？

PS`EOF`可以`stdin`通过 CTRL+Z 在 Windows 中发送，在 Linux 和朋友中可以通过 CTRL+D 发送，此外还可以使用管道和重定向来重定向来自其他程序和文件的输入。

# opengl - 我可以使用纹理映射结果作为新的纹理数据吗？

> ID：14472005
> 
> 赞同：1
> 
> 时间：2013-01-23T03:31:56.467
> 
> 标签：opengl, glfw

我使用 OpenGL 和“ [GLFW](http://www.glfw.org/) ”将纹理图像映射到 2D 多边形，这是从 OpenCV 生成的一组顶点。

我的问题是，我可以使用纹理映射的结果作为新纹理（它已经被第一个映射扭曲）与其他多边形映射。我觉得我的解释太糟糕了，请看例子；

![原始纹理](../Images/5108c4109f0abc18a09f23f5e93c0878.png) ![映射后](../Images/8e9267f2af7aa70b005427f2956434cd.png)

左图是我的贴图，右图是映射到多边形后的贴图（贴图划分为 8 块 8 组顶点。我要做的是使用右侧的映射结果作为新的贴图。

可以使用 OpenGL 或 OpenCV 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T16:24:35.193

您需要 2 个 FBO 和 2 个纹理。

您将场景渲染到第一个 FBO (fbo1)，然后将纹理 (texture1) 发送到着色器，然后将场景渲染到第二个 FBO (fbo2)。之后，您将第二个纹理 (texture2) 发送到着色器并在主 FBO（以显示场景）或第一个 FBO（以进行另一次传递）中渲染场景。

例子 ：

1）在 FBO1 中渲染场景 2）将纹理 1 发送到着色器 3）渲染在 FBO2 中修改的纹理 1 4）将纹理 2 发送到着色器 5）在 FBO1 中渲染纹理 2 修改器 6）将纹理 1 发送到着色器等， ETC...

这是我的一个项目的一个小代码，用于描述我试图解释的内容（模糊）。

```
//render the scene to the fbo1
glBindFramebuffer(GL_FRAMEBUFFER, f1);
glClearColor(0.2f, 0.2f, 0.2f, 1.0f);
glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
[self drawWithShader:_programRTT];

//apply horizontal blur the result go in the fbo2
glBindFramebuffer(GL_FRAMEBUFFER, f2);
glActiveTexture(GL_TEXTURE0);
glBindTexture(GL_TEXTURE_2D, t1);
glClearColor(0.0f, 0.0f, 0.0f, 1.0f);
glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
[self drawWithShader:_programBH];

//apply vertical blur the result go in the fbo1
glBindFramebuffer(GL_FRAMEBUFFER, f1);
glActiveTexture(GL_TEXTURE0);
glBindTexture(GL_TEXTURE_2D, t2);
glClearColor(0.0f, 0.0f, 0.0f, 1.0f);
glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
[self drawWithShader:_programBV];

//return to the main fbo and display result on screen
[view bindDrawable];
glActiveTexture(GL_TEXTURE0);
glBindTexture(GL_TEXTURE_2D, t1);
glClearColor(0.0f, 0.0f, 0.0f, 1.0f);
glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
[self drawWithShader:_program]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T04:28:10.377

将您的场景渲染到[带有纹理附件的 FBO，然后使用该纹理渲染更多几何图形](http://www.songho.ca/opengl/gl_fbo.html#example)。

# model-view-controller - Ember.js 递归控制器和视图

> ID：14472007
> 
> 赞同：6
> 
> 时间：2013-01-23T03:32:06.390
> 
> 标签：model-view-controller, recursion, nested, ember.js, ember-router

假设我有一个`Action`对象列表，它对应于 Ember 模型。每个都有几个属性（时间戳）和一个`detail`属性，可以递归地包含更多`detail`的s（任意深度嵌套）。您可以将详细信息视为嵌套列表。

我想编写一个 UI，允许`detail`对任何`Action`对象进行轻松编辑（自动完成值、轻松复制和粘贴、重新排序元素等）。

现在，我的`DetailView`模板将递归地渲染额外`DetailView`的 s：

```
{{#if view.content.hasChildren}}
    {{#each child in view.content.children}}
       {{#DetailView contentBinding=child}}
    {{/each}}
{{#else}}
    {{#EditDetailView contentBinding=view.content.value}}
{{/if}} 
```

所以每个`DetailsView`对应于Details对象树中的一个节点。

但我不清楚如何将控制器添加到组合中——我需要存储其他状态/实现功能（例如，转换 Detail 对象中的值以在 DetailsView 中显示；处理插入/删除/重新排序元素的事件；更改详细信息树的结构）既不属于模型也不属于视图。

理想情况下，我将有一个`DetailsController`作为代理的`Details`per `DetailsView`。**我可以动态实例化控制器并在视图模板中设置它们的内容吗？**我对新 Ember 路由器的理解是在给定的路由中设置控制器和插座；但是，这似乎不适用于这里，因为根本没有进行路由。欢迎所有关于如何处理递归控制器/视图/路由的建议/见解。

我已经查看了[EmberJS Nested Views and Controllers](https://stackoverflow.com/questions/12602429/emberjs-nested-views-and-controllers)，但这表明我`ArrayController`对所有`Detail`s 都有一个，甚至跨`Action`s ......这也不会保留嵌套细节的树结构。

[在升级到 Ember 0.9.6 后，](https://stackoverflow.com/questions/9962647/recursive-view-in-handlebars-template-not-working-after-upgrading-to-ember-0-9-6)我还查看了把手模板中的递归视图不起作用，但该解决方案没有说明任何关于控制器的内容。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-23T16:32:28.363

** 2013 年 2 月 20 日更新**

帮助程序的 API 文档`{{control}}`现在可[在此处](http://emberjs.com/api/classes/Ember.Handlebars.helpers.html#method_control)获得。它警告说“控制助手目前正在开发中，并且被认为是实验性的。”

要启用它，`ENV.EXPERIMENTAL_CONTROL_HELPER = true`请在需要 Ember 之前进行设置。

** 2013 年 2 月 3 日更新**

ember 中添加了一个新助手`{{control}}`，实现了*可重用视图*提案。因此，要拥有一个`DetailsController`代理`Details`，`DetailsView`您可以：

```
{{control 'detail' child}} 
```

例如，参见[{{control}} 测试](https://github.com/emberjs/ember.js/blob/master/packages/ember-routing/tests/helpers/control_test.js)

* * *

> 理想情况下，我将有一个 DetailsController 作为代理，每个 DetailsView 都有一个 Details。我可以动态实例化控制器并在视图模板中设置它们的内容吗？

通常，执行此操作的方法是通过 handlebars`{{render}}`助手，它使用适当的视图和控制器呈现模板。不幸的是，你不能`{{render}}`多次插入同一个模板，所以它不能在一个`{{each}}`块中使用。

最近关于这个话题进行了长时间的讨论。请参阅：[非单例控制器讨论](https://github.com/emberjs/ember.js/issues/1637)！

提出了两种解决方案。第一个涉及向`itemControllerClass`ArrayController 添加属性。如果设置了此属性，则 ArrayController 将自动将新内容包装在指定的类中。这是几周前添加到 ember 中的，它处理大多数用例，在这些用例中，您有一个平面项目列表，并希望每个项目都包含在代理中。

第二个提议，*可重用视图*，允许您为视图提供控制器类。

```
{{view UI.Calendar dateBinding="post.startDate" controllerClass="App.CalendarController"}} 
```

这将为每个 UI.Calendar 小部件创建一个 App.CalendarController 实例，该实例将与小部件的生命周期相关联。到今天为止，这还没有实施。请参阅[{{view}} 应该有一个创建控制器的选项](https://github.com/emberjs/ember.js/issues/1766)！了解最新状态。

因此，对于您概述的用例，AFAIK 没有一个*很好*的方法来实现这一点。同时，将数据绑定到视图：

```
{{view App.DetailView contentBinding="child"}} 
```

然后在视图本身中有一些逻辑似乎是合理的。如果/当可重用视图支持添加到主控时，您可以将该逻辑拉到控制器中。

见：[https ://github.com/emberjs/ember.js/issues/1766](https://github.com/emberjs/ember.js/issues/1766)

# python - 亚马逊搜索 API

> ID：14472008
> 
> 赞同：9
> 
> 时间：2013-01-23T03:32:08.387
> 
> 标签：python, ruby, web-services, amazon, amazon-product-api

有没有用 Ruby 或 Python 访问亚马逊搜索结果（给定查询）的好方法？我一直在寻找 API，发现一个产品广告 API 似乎与搜索不同。

我宁愿不必在给定查询（嵌入在 url 中）的情况下抓取亚马逊搜索网页。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T04:05:47.310

我已经使用 Amazon API 几年了，我承认他们似乎试图隐藏他们对常规附属产品所做的事情，比如亚马逊搜索，就好像他们不希望你使用 API 或至少让它变得困难。

因此，在您的会员仪表板中，单击顶部的“产品 API”选项卡。

接下来，您将需要创建您的公钥和私钥。如果没有创建和设置这些，您将无法访问 API。另请注意，即使 Amazon 确实有 RESTful API，它也需要回调，无论您使用哪种语言。（除非您打算使用 SOAP）一旦创建了这些，它应该会在您的会员仪表板中为您打开一些新选项。

最后，Amazon 提供了 wazoo 的代码示例，但我无法证明 Ruby 或 Python 有什么好处（就像我用 cURL 和 php 完成的那样），但无论如何它应该给你一个很好的起点。去这里：[http ://aws.amazon.com/code/Product%20Advertising%20API?_encoding=UTF8&jiveRedirect=1](http://aws.amazon.com/code/Product%20Advertising%20API?_encoding=UTF8&jiveRedirect=1)

我确实在代码示例和文档中看到了此处列出的 python 和 ruby​​。请注意，亚马逊喜欢经常更改内容，有时会在没有通知的情况下进行更改。但是我在做这个的时候确实注意到了一个关于 AWS 的新节点 js 库的部分......甜。亚马逊确实做得很好。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-23T03:55:18.600

查看[产品广告 API](http://docs.aws.amazon.com/AWSECommerceService/latest/DG/CHAP_Intro_AAWS.html)

从文档中，它将允许您提供结果、允许购物和通过亚马逊完成购买：

1.  > 您的应用程序使用产品广告 API 来提供您向客户展示的商品描述和图像以及客户和卖家评论。

2.  > 客户在您的网站上购物。

3.  > 当客户准备购买其电子商务购物车中的商品时，您的应用程序会向 Product Advertising API 发送一个 HTML 表单，亚马逊通过获取购买信息（例如付款方式和送货地址）来完成购买，然后亚马逊履行通过运送物品订购。

因此，如果您只是想显示搜索结果，那么[这些搜索选项](http://docs.aws.amazon.com/AWSECommerceService/latest/DG/SearchOperations.html)将满足您的需求。

# kendo-ui - 在带有 http 500 错误的帖子上未引发 KendoUI 数据源错误事件

> ID：14472010
> 
> 赞同：0
> 
> 时间：2013-01-23T03:32:10.163
> 
> 标签：kendo-ui

我有一个数据源，其错误处理程序定义如下。在代码中，我故意在 post 上导致错误，服务器返回 500 加上 json 数据，但在 post 上没有引发错误事件。它确实会触发读取事件。请参阅[http://www.ageektech.com/simplyfundraising](http://www.ageektech.com/simplyfundraising) 打开浏览器调试器，刷新页面，单击编辑更改任何值，单击更新。需要帮助找出错误事件未触发的原因。

谢谢，丹

```
 schema : {
        model : myModel,
        data : "__ENTITIES",
          errors: function(e) {
              debugger;
  // var xhr = e.xhr;
    // var statusCode = e.status;
    // var  errorThrown = e.errorThrown;
              //alert(JSON.parse(e.responseText).error.innererror.message);
    return e.errors;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T07:17:19.617

这不是订阅 DataSource 的[错误](http://docs.kendoui.com/api/framework/datasource#error)事件的方式。schema.errors设置用于不同的目的[。](http://docs.kendoui.com/api/framework/datasource#schemaerrors-functionstring-default)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T23:47:37.817

Schema.errors 应包含包含错误消息的 JSON 字段的名称。例如架构：{错误：“错误”}

当您返回 JSON 时，例如： { "Errors": "Stuff went wrong" }

# ms-access - 使用过滤器搜索后如何刷新数据网格

> ID：14472015
> 
> 赞同：0
> 
> 时间：2013-01-23T03:32:37.343
> 
> 标签：ms-access

我尝试了一些代码，但没有。

```
Me.DataGridView1.Refresh() 
```

为什么？我的 datagridview 自动连接到数据库，而不是手动使用命令进行连接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T05:18:55.330

试试下面的代码......我想你除了下面的代码......

```
//Text box Change Event

        private void textBox1_TextChanged(object sender, EventArgs e)
        {
            if (textBox1.Text != "")
                GetData("select * from Sample where num =" + textBox1.Text);
            else
                GetData("select * from Sample");
        }

//Data Bind Event by using BindingSource

        private void GetData(string selectCommand)
    {
        try
        {
            String connectionString ="Your Connection String";
            OleDbDataAdapter dataAdapter = new OleDbDataAdapter(selectCommand, connectionString);
            OleDbCommandBuilder commandBuilder = new OleDbCommandBuilder(dataAdapter);
            DataTable table = new DataTable();
            table.Locale = System.Globalization.CultureInfo.InvariantCulture;
            dataAdapter.Fill(table);
            //BindingSource - Binding
            sampleBindingSource.DataSource= table;
            dataGridView1.AutoResizeColumns( 
                DataGridViewAutoSizeColumnsMode.AllCells );
        }
        catch (SqlException)
        {
            MessageBox.Show("Error Occured");
        }
    } 
```

# asp.net - 如何使asp.net中的gridview可滚动？

> ID：14472016
> 
> 赞同：1
> 
> 时间：2013-01-23T03:32:45.923
> 
> 标签：asp.net, html, css, visual-studio-2010, scroll

我想知道如何在不使用 CSS 和 html 的情况下使我的 asp.net gridview 垂直和水平滚动。

这是我如何使 gridview 可滚动的代码

在 CSS 中：

```
div#scroll  
{
border: 1px solid #C0C0C0;
background-color: #F0F0F0;
width: 584px; 
height: 180px; 
overflow: scroll; 
position: relative;
left: 39px;
top: 813px;
} 
```

在 HTML 中：

```
<div id = "scroll">
<asp:GridView ID="tblitem" runat="server" CellPadding="4" 
ForeColor="#333333" GridLines="None" 
style="z-index: 1; left: -2px; top: 0px; position: absolute; height: 57px; width: 584px" 
         AutoGenerateSelectButton="True" Visible="False">
         <AlternatingRowStyle BackColor="White" />
         <EditRowStyle BackColor="#7C6F57" />
         <FooterStyle BackColor="#1C5E55" Font-Bold="True" ForeColor="White" />
         <HeaderStyle BackColor="#1C5E55" Font-Bold="True" ForeColor="White" />
         <PagerStyle BackColor="#666666" ForeColor="White" HorizontalAlign="Center" />
         <RowStyle BackColor="#E3EAEB" />
         <SelectedRowStyle BackColor="#C5BBAF" Font-Bold="True" ForeColor="#333333" />
         <SortedAscendingCellStyle BackColor="#F8FAFA" />
         <SortedAscendingHeaderStyle BackColor="#246B61" />
         <SortedDescendingCellStyle BackColor="#D4DFE1" />
         <SortedDescendingHeaderStyle BackColor="#15524A" />
    </asp:GridView>
    </div> 
```

我不想使用它，因为当我隐藏我的 gridview 时，我制作的 div 滚动是可见的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T03:40:37.250

试试下面的链接，它会对你有所帮助......这里他们使用 Jquery 来滚动网格视图，这很简单......

[滚动网格视图](http://csharpdotnetfreak.blogspot.com/2011/11/jquery-fixed-header-scrollable-gridview.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T05:44:45.773

您可以在 div 中使用网格并使此 div 可滚动....

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T06:14:57.363

我就是这样做的

**JavaScript：**

```
 function onLoad() {
         FreezeGridViewHeader('MyGridViewID', 'WrapperDiv');
     }

     function FreezeGridViewHeader(gridID, wrapperDivCssClass) {
         /// <summary>
         ///   Used to create a fixed GridView header and allow scrolling
         /// </summary>
         /// <param name="gridID" type="String">
         ///   Client-side ID of the GridView control
         /// </param>
         /// <param name="wrapperDivCssClass" type="String">
         ///   CSS class to be applied to the GridView's wrapper div element.  
         ///   Class MUST specify the CSS height and width properties.  
         ///   Example: width:800px;height:400px;border:1px solid black;
         /// </param>
         var grid = document.getElementById(gridID);
         if (grid != 'undefined') {
             grid.style.visibility = 'hidden';
             var div = null;
             if (grid.parentNode != 'undefined') {
                 //Find wrapper div output by GridView
                 div = grid.parentNode;
                 if (div.tagName == "DIV") {
                     div.className = wrapperDivCssClass;
                     div.style.overflow = "auto";
                 }
             }
             //Find DOM TBODY element and remove first TR tag from 
             //it and add to a THEAD element instead so CSS styles
             //can be applied properly in both IE and FireFox
             var tags = grid.getElementsByTagName('TBODY');
             if (tags != 'undefined') {
                 var tbody = tags[0];
                 var trs = tbody.getElementsByTagName('TR');
                 var headerHeight = 8;
                 if (trs != 'undefined') {
                     headerHeight += trs[0].offsetHeight;
                     var headTR = tbody.removeChild(trs[0]);
                     var head = document.createElement('THEAD');
                     head.appendChild(headTR);
                     grid.insertBefore(head, grid.firstChild);
                 }
                 //Needed for Firefox
                 tbody.style.height =
                      (div.offsetHeight - headerHeight) + 'px';
                 tbody.style.overflowX = "hidden";
                 tbody.overflow = 'auto';
                 tbody.overflowX = 'hidden';
             }
             grid.style.visibility = 'visible';
         }
     } 
```

HTML 标记：

```
 <div id="gvholder">
//My gridviewcontrol
     <asp:GridView ID="MyGridViewID" runat="server" >  
       <Columns>
         ......
         ......
         ......
      <Columns>
     </asp:GridView>

 </div> 
```

**CSS**

```
.WrapperDiv {
    border: 1px solid #CCCCCC;
    height: auto;
    max-height: 400px;
    width: auto;
} 

.WrapperDiv TH {
    position:relative;
    font-size:12px;
    font-weight:bold;
}

.WrapperDiv TR 
{
    /*NeededForIe*/
    height:0px;
} 

.WrapperDiv td
{
font-size:12px;
}

#gvholder
{
float:left;
top:10px;
width:auto;
border:1px solid #CCCCCC;
margin-top:10px;
margin-left:10px; 
box-shadow:1px 2px 9px black;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-27T03:18:48.480

`gridview`用`div`你提到的你不想做的包装，但是为了绕过“隐藏我的网格视图，我制作的 div 滚动是可见的”，你用一个面板包装它并制作`Panel.Visible=true`or `false`。

对我来说，隐藏可滚动的 GridView 而不留空间。

# c# - 隐藏 GridEditColumn 上特定行的列

> ID：14472019
> 
> 赞同：0
> 
> 时间：2013-01-23T03:32:49.573
> 
> 标签：c#, asp.net, telerik, radgrid

我正在使用 Telerik:EditGridColumn。如果该列为空或没有评论，我需要做的是隐藏编辑图像。

我所拥有的是 GridEditcolumn 和一些包含评论的行。如果评论具有空值，则编辑按钮将隐藏。

这是我的代码（aspx.cs）

```
 protected void RadGrid1_ItemDataBound(object sender, Telerik.Web.UI.GridItemEventArgs e)
    {
        if (e.Item is GridDataItem)
        {
            GridDataItem item = e.Item as GridDataItem;
            string strComments = (item["Comments"].FindControl("txtComments") as TextBox).Text;
            if (strComments == null)
            {
                item["btnEdit"].CssClass = "RemoveEdit";
            }
        }
    }

<style type="text/css">
        .RemoveEdit
        {
            display: none !important;
        }
    </style> 
```

对于 aspx

```
<telerik:GridEditCommandColumn HeaderStyle-Width="25px" 
      EditImageUrl="../images/Edit.jpg" UniqueName="Edit"
      ButtonType="ImageButton" ItemStyle-HorizontalAlign="Right">
</telerik:GridEditCommandColumn>

<telerik:GridTemplateColumn HeaderText="Comments" 
     HeaderStyle-Width="400px" DataField="Comments" UniqueName="Comments"
     HeaderStyle-CssClass="tblHeaderNoBorder">
     <ItemTemplate>
        <asp:Label runat="server" ID="lblComments" Text='<%# Eval("Comments") %>' />
     </ItemTemplate>
     <EditItemTemplate>
         <asp:TextBox ID="txtComments" runat="server" Height="40px" 
              Width="100%" TextMode="MultiLine"
              Enabled="true" Text='<%# Eval("Comments") %>'>
         </asp:TextBox>               
     </EditItemTemplate>
</telerik:GridTemplateColumn> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-24T06:31:39.320

尝试这个。

```
protected void RadGrid1_ItemDataBound(object sender, GridItemEventArgs e)
      {
         if (e.Item is GridDataItem)
         {
           GridDataItem item = (GridDataItem)e.Item;
           Label txtProcessStatus = e.Item.FindControl("ProcessStatusLabel") as Label;
           if (txtProcessStatus.Text != "98") //your condition
           {
             ImageButton img = (ImageButton)item["EditCommandColumn"].Controls[0]; //Accessing EditCommandColumn
             img.Visible = false;
           }                  
       } 
```

# security - 使用 OAuth 进行用户身份验证/登录

> ID：14472023
> 
> 赞同：0
> 
> 时间：2013-01-23T03:33:29.370
> 
> 标签：security, authentication, web-applications, login, oauth

我觉得这可能会在这里的另一个 OAuth 问题中得到回答，但我找不到它......

我已经在我正在编写的 Web 服务上实现了 OAuth 提供程序。我的提供者（“应用程序”）的 OAuth 消费者拥有消费者密钥，并以典型的 OAuth 方式获取用户访问令牌（获取请求令牌、重定向到我的生产者以让用户授权、获取访问令牌、存储它等） . 这一切都很好。

我的问题是关于这些 OAuth 消费者如何在使用*我*的应用程序的登录凭据访问他们时对某人进行身份验证。基本上，当有人访问消费者应用程序时，我想：

1.  用户在消费者网站上点击登录。
2.  用户被重定向到我的应用程序并显示了一个登录表单。
3.  登录后，我的应用程序（OAuth 提供者）意识到这个用户已经授权了这个消费者，并将他们重定向回消费者。
4.  在此请求中，消费者以某种方式被告知该用户的用户名（或访问令牌）。

这类似于典型的 OAuth 流程，不同之处在于 OAuth 使用者不需要将授权的请求令牌交换为访问令牌。相反，一旦用户通过身份验证，消费者现在就知道哪个用户通过了身份验证，并且可以立即开始使用他们已经存储的存储令牌/秘密发出请求。

实施时我需要考虑哪些安全条件？这甚至可以安全地实施吗？天真地，这可以通过让生产者向消费者回调返回一些 GET 参数以及用户的用户名（或其他独特的东西）来实现。但是，攻击者可以通过使用他们想要攻击的用户的用户名向消费者的回调发出请求来利用这一点。

想法？这是我试图重新发明和重新实施的已解决问题吗？我的平台是 Java，如果有库已经完成了所有这些。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T07:58:47.973

你的问题是（3）：

> “登录后，我的应用程序（OAuth 提供者）意识到这个用户已经授权了这个消费者，并将他们重定向回消费者。”

您的 OAuth 提供者无法意识到此用户已经过身份验证/授权，因为您的应用程序未完成授权。**您的应用程序**应该决定谁通过身份验证，谁不通过身份验证，以及他被授权做什么。这就是 OAuth 的全部理念。

如果你想实现一个 OAuth 提供者，它“知道”谁通过了消费者的身份验证，那么消费者必须向你的提供者发送一些东西，它会在消费者（OAuth 客户端）和你的应用程序（OAuth 提供者）之间建立耦合。

[OAuth SPEC](https://www.rfc-editor.org/rfc/rfc6749)准确定义了OAuth 的通用接口，所以如果你想坚持它，你应该避免向提供者发送额外的数据，这样它就不会耦合到特定的客户端。

# mysql - mysql索引不能用

> ID：14472027
> 
> 赞同：1
> 
> 时间：2013-01-23T03:34:04.360
> 
> 标签：mysql, performance, indexing

我有一个表 't_table1' 包括 3 个字段：

```
`field1` tinyint(1) unsigned default NULL,
`field2` tinyint(1) unsigned default NULL,
`field3` tinyint(1) unsigned NOT NULL default ’0′, 
```

和一个索引：

```
KEY `t_table1_index1` (`field1`,`field2`,`field3`), 
```

当我运行这个 SQL1 时：

```
EXPLAIN SELECT * FROM table1 AS c WHERE c.field1 = 1 AND c.field2 = 0 AND c.field3 = 0 
```

然后是显示：

```
Select type: Simple
tyle: All
possible key: t_table1_index1
key: NULL
key_len: NULL
rows: 1042
extra: Using where 
```

我认为它说我的索引在这种情况下没用。

但是当我运行这个 SQL2 时：

```
EXPLAIN SELECT * FROM table1 AS c WHERE c.field1 = 1 AND c.field2 = 1 AND c.field3 = 1 
```

表明：

```
Select type: Simple
tyle: ref
possible key: t_table1_index1
key: t_table1_index1
key_len: 5
ref: const, const, const
rows: 1
extra: Using where 
```

这种情况下它使用了我的索引。所以请为我解释一下：

1.  为什么 SQL1 不能使用索引？

2.  使用 SQL1，我如何编辑索引或重写 SQL 以更快地执行？

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T20:33:18.157

查询优化器使用许多数据点来决定如何执行查询。其中之一是索引的*选择性*。使用索引可能需要比表扫描返回的每行更多的磁盘访问，因为引擎必须读取索引然后获取实际行（除非可以仅从索引满足整个查询）。随着索引的选择性降低（即更多行符合条件），使用该索引的效率会下降。在某些时候，进行全表扫描会变得更便宜。

在您的第二个示例中，优化器能够确定您提供的值将导致仅获取一行，因此索引查找是正确的方法。

In the first example, the values were not very selective, with an estimate of 1042 rows being returned out of 1776\. Using the index would result in searching the index, building a list of selected row references and then fetching each row. With so many rows being selected, to use the index would have resulted in more work than just scanning the entire table lineraly and filtering the rows.

# iphone - Adding new entities into Core Data without deleting previous version to avoid app crash

> ID：14472038
> 
> 赞同：2
> 
> 时间：2013-01-23T03:35:21.210
> 
> 标签：iphone, ios, core-data, crash, entities

Hi I am iOS beginner and having CoreData implemented in my app.

Everytime I added new entities in my coredata, I need to re-create the NSManagedObject subclass, clean project, delete the existing app with previous core data and rebuild the app.

I'm thinking that what if my app is v1.0 and available in AppStore, user download and use the app. After few months I added new entities in Core Data (app v2.0), and user need to update their app. Are they needed to delete and re-download the new version to avoid app crash?

I found out someone mentioned that "You can configure core data to look for, and accept extensions of your data model" but I don't know what it means. [Here is the question.](https://stackoverflow.com/a/7123096/1371949)

Any suggestion?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T03:49:03.980

Here is the programming guide [**`Core Data Model Versioning and Data Migration`**](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreDataVersioning/Articles/Introduction.html)

# oauth - 在 Oauth 1.0a 中处理受保护资源的正确方法是什么？

> ID：14472042
> 
> 赞同：0
> 
> 时间：2013-01-23T03:35:51.870
> 
> 标签：oauth

我需要知道如何使用 OAuth 1.0a 处理受保护的资源。我已经阅读了官方文档并看到了一些实现，但有些地方我需要澄清。

1）此时，消费者拥有链接到用户的已批准访问令牌，并且提供者服务器对其进行验证。

*   如果访问令牌无效会怎样？
*   Provider 服务器会发出什么样的状态码？
*   如果发生这种情况，消费者服务器是否应该将用户重定向到他可以授权另一个令牌的屏幕？

2）如果Access Token验证正确，Consumer和Provider会交换信息。例如，消费者会询问用户的电子邮件地址，而提供商会提供。

*   应该使用什么协议来交换这些信息？（杰森？）
*   这些信息应该放在响应的正文中还是放在其他地方？

3) 按照标准，访问令牌和提供的受保护信息应由消费者服务器持久保存。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T03:56:52.187

您可能应该链接官方文档。但无论如何，这里是您问题的快速答案。

> 1.  此时，Consumer 拥有一个链接到用户的已批准访问令牌，并且 Provider 服务器对其进行验证。
> 
> 如果访问令牌无效会怎样？Provider 服务器会发出什么样的状态码？如果发生这种情况，消费者服务器是否应该将用户重定向到他可以授权另一个令牌的屏幕？

根据[RFC 5849](https://www.rfc-editor.org/rfc/rfc5849#page-16)，在任何提供的令牌无效的情况下，提供者应返回 401（未授权）状态代码。

> 当接收到带有无效客户端凭据、无效或过期令牌、无效签名或无效或已使用 nonce 的请求时，服务器应该返回 401（未授权）状态代码。

* * *

> 2.  如果 Access Token 的验证正确，Consumer 和 Provider 将交换信息。例如，消费者会询问用户的电子邮件地址，而提供商会提供。
> 
> 应该使用什么协议来交换这些信息？（Json？）这些信息应该放在响应的正文中还是放在其他地方？

他们应该是这个词`can`，而不是`will`。一旦身份验证完成，规范不强制***要求***提供者和请求者之间传输的任何特定信息。这个决定完全取决于应用程序提供商

* * *

> 3.  遵循标准，访问令牌和提供的受保护信息应由消费者服务器持久保存。

再一次，规范没有强制要求。但是，通常的做法是存储从 Provider 检索到的访问令牌。我不是律师 (IANAL)，但请注意，将从提供商检索到的数据保存到第三方系统中可能会违反法律。

# android - 在主/详细片段中使用 ActionBar Up Navigation

> ID：14472044
> 
> 赞同：17
> 
> 时间：2013-01-23T03:36:02.800
> 
> 标签：android, android-actionbar

我有一个具有主/详细布局的应用程序（1 个活动、1 个 ListView 片段和 1 个详细片段）。当用户单击 ListView 中的项目时，片段事务会在右侧窗格中实例化一个详细片段，其中包括与该项目对应的信息。当显示细节片段时，我隐藏了初始操作栏按钮/项目并显示 3 个新的 AB 项目（完成/删除/取消）。用户可以通过按下后退按钮或按下 3 个 AB 项之一来清理右窗格并返回到初始 UI 状态。

我遇到的问题是，当用户选择应用程序的主页图标（即“向上导航”）时，活动会重新加载（即指示活动正在启动的动画可以被视为操作栏和UI 已重绘）。该问题仅在按下应用程序主页图标时发生。如果用户按下后退按钮或取消/完成/删除操作栏按钮，片段会简单地从右窗格中删除，并且 UI 会返回初始状态而无需任何“重新加载”。

活动的 XML 布局如下（在 LinearLayout 内；美化隐藏了该行）：

```
<fragment class="*.*.*.ListFragment"
        android:id="@+id/titles" android:layout_weight="1"
        android:layout_width="0px"
        android:layout_height="match_parent" />

<FrameLayout android:id="@+id/details" android:layout_weight="2"
        android:layout_width="0px"
        android:layout_height="match_parent" /> 
```

DetailsFragement 在其 onCreate 方法中有 actionBar.setDisplayHomeAsUpEnabled 语句：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setHasOptionsMenu(true);

    ActionBar actionBar = getSherlockActivity().getSupportActionBar();
    actionBar.setDisplayHomeAsUpEnabled(true);

} 
```

对于 ListView 片段和 Detail 片段，onCreateOptionsMenu() 和 onOptionsItemSelected() 方法都在片段中实现。在详细信息片段的代码下方：

```
@Override
public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {
    inflater.inflate(R.menu.edit_menu, menu);
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {

    // some variable statements...

    switch (item.getItemId()) {
        case android.R.id.home:
            //Toast.makeText(getSherlockActivity(), "Tapped home", Toast.LENGTH_SHORT).show();
            onHomeSelectedListener.onHomeSelected();
            return true;

        case R.id.menu_edit_item_done:
            editedTask.setTitle(editedTaskTitle);
            onTaskEditedListener.onTaskEdited(editedTask, UPDATE_TASK, true);
            return true;

        default:
            return super.onOptionsItemSelected(item);

    }
} 
```

在主机活动中，我实现了 onHomeSelectedListner 来处理应用主页图标按下（即“向上导航”：

```
public void onHomeSelected(){

    FragmentManager manager = getSupportFragmentManager();
    FragmentTransaction ft = manager.beginTransaction();
    TaskFragment taskFragment = (TaskFragment)getSupportFragmentManager().findFragmentById(R.id.details);
    ft.remove(taskFragment);
    ft.commit();
    manager.popBackStack();

} 
```

负责处理所有其他操作栏按钮（即完成/删除/取消）的活动侦听器是 onTaskEditedListener，除了处理某些数据的其他代码之外，它具有与上面所示相同的片段事务。

**更新(1/24)** 根据 tyczj 和 straya 的反馈，我在活动的 onCreate()、onResume()、onPause() 中放置了日志语句，以确定 onHomeSelected 和 onTaskEdited 侦听器之间的差异。我可以确认在“向上导航”事件（即 onHomeSelected）期间调用了 onPause()、onCreate() 和 onResume()。而在 onTaskEdited 调用期间（即后退按钮或完成/删除/取消按下）没有调用这些事件。

**更新 (1/25)** 根据 Mark Murphy 的建议，我在“case android.R.id.home”语句中注释掉了 onHomeSelected 方法调用，只是为了看看 Activity 会做什么。当时的想法是，应用程序不会做任何事情，因为 are no 语句。事实证明并非如此。即使没有调用侦听器方法（即删除片段），活动也会重新启动，并且从片段容器中删除详细片段。

**更新 (2/28)** 我暂时解决了我的主要活动通过禁用窗口动画重新启动的事实（如我自己的答案中突出显示的那样）。然而，通过进一步的测试，我发现了一个错误。感谢 Wolfram Rittmeyer 的示例代码，我能够找出我的活动在向上导航期间重新启动（在主/详细单一布局中）的真正原因：1）虽然我使用这个“onHomeSelectedListener”来正确删除片段从后台堆栈中，我仍然在 ListView 片段的 onOptionsItemSelected 中有一些残余代码，这些代码正在创建一个新的意图来启动托管活动。这就是为什么按下应用程序的主页图标会重新启动活动。2）在我的最终实现中（如我自己的答案所示），

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-27T02:40:36.537

经过大量研究和探索，事实证明，我的活动在主/详细配置的“向上导航”期间重新启动的唯一原因是因为我在 ListView Fragment 的 onOptionsItemSelected 中留下了一些代码，该代码另外创建了启动主要活动的意图到我在别处的完整片段交易代码。下面是我在手机（多个活动）和平板电脑（单个活动/多窗格）配置上正常工作的“向上导航”的最终实现。感谢[Wolfram Rittmeyer](https://stackoverflow.com/users/1419069/wolfram-rittmeyer "沃尔夫拉姆·里特迈耶")在他的代码中提供的一些提示（评论部分中的链接）帮助我查明我的问题！

**主活动：**托管片段并执行其他一些特定于应用程序的操作

**ListView Fragment：**处理表格配置中的“向上导航”

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
        case android.R.id.home:
            if(mDualPane){
                FragmentManager manager = getSherlockActivity().getSupportFragmentManager();
                FragmentTransaction ft = manager.beginTransaction();
                DetailFragment detailFragment = (DetailFragment)manager.findFragmentById(R.id.details);
                ft.remove(detailFragment);
                ft.commit();
                manager.popBackStack();
                getSherlockActivity().getSupportActionBar().setDisplayHomeAsUpEnabled(false);
                getSherlockActivity().getSupportActionBar().setHomeButtonEnabled(false);
            }
            return true;

        // Other case statements...

        default:
            return super.onOptionsItemSelected(item);
    }
} 
```

**详细信息片段：**处理手机配置中的导航

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setHasOptionsMenu(true);

    // Sets "up navigation" for both phone/tablet configurations
    ActionBar actionBar = getSherlockActivity().getSupportActionBar();
    actionBar.setDisplayHomeAsUpEnabled(true);
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {

    switch (item.getItemId()) {
        case android.R.id.home:
            if(!mDualPane){
                Intent parentActivityIntent = new Intent(getSherlockActivity(), MainActivity.class);
                parentActivityIntent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_NEW_TASK);
                startActivity(parentActivityIntent);
                getSherlockActivity().finish();
            }
            return true;

        // Other case statements...

        default:
            return super.onOptionsItemSelected(item);
    }

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-23T04:42:59.923

如果您查看[导航设计模式](http://developer.android.com/design/patterns/navigation.html)，您会发现您希望在按下主页按钮时返回到起始活动。

因此，假设您有 2 个活动调用它们`A1`并且`A2`. 单击 A1 中的某些内容会将您带到 A2。如果用户点击主页按钮，您应该将它们返回到 A1 清除堆栈中的所有内容，直到像这样的活动

```
Intent intent = new Intent(this, A1.class);  
intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
startActivity(intent); 
```

这就是旗帜的`Intent.FLAG_ACTIVITY_CLEAR_TOP`作用

> 如果设置，并且正在启动的活动已经在当前任务中运行，那么不会启动该活动的新实例，而是关闭它上面的所有其他活动，并且此 Intent 将被传递到（现在顶部）作为新意图的旧活动。
> 
> 例如，考虑一个由以下活动组成的任务：A、B、C、D。如果 D 调用 startActivity() 的 Intent 解析为活动 B 的组件，则 C 和 D 将完成，B 接收给定的 Intent ，导致堆栈现在是：A，B。
> 
> 上面示例中当前运行的活动 B 实例将在其 onNewIntent() 方法中接收您在此处启动的新意图，或者自身完成并使用新意图重新启动。如果它已声明其启动模式为“multiple”（默认）并且您没有在同一意图中设置 FLAG_ACTIVITY_SINGLE_TOP，那么它将完成并重新创建；对于所有其他启动模式，或者如果设置了 FLAG_ACTIVITY_SINGLE_TOP，则此 Intent 将被传递到当前实例的 onNewIntent()。
> 
> 这种启动模式也可以与 FLAG_ACTIVITY_NEW_TASK 结合使用，效果很好：如果用于启动任务的根活动，它将将该任务的任何当前正在运行的实例带到前台，然后将其清除为根状态。这尤其有用，例如，当从通知管理器启动活动时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T04:46:50.993

不要：中断然后返回 super.onOptionsItemSelected(item)，而只是：返回 true；

更新：

所以你说活动是根据你看到的视图发生的情况“重新启动”的，但是你能通过使用各种生命周期方法来确认活动（和片段）可能会或可能不会发生什么吗？这样，您可以在继续诊断之前确定当前（错误）行为是什么。

更新：

好的，很高兴确定行为:) 现在关于您的问题“为主/详细布局（1 个活动/2 个片段）实现“向上导航”的正确方法是什么？“：典型的方法是 2 个片段得到添加在单个 FragmentTransaction 中，您只需 popBackStack 删除它们并返回到以前的状态。我认为您通过手动删除 FragmentTransaction 中的 Fragment 然后弹出回栈来加倍。试试popBackStack。哦，为了确定和一致，因为您使用的是 ActionBarSherlock 和 support.v4，您是在使用 FragmentActivity（而不是 Activity）和 SherlockFragment 吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T01:42:01.037

我认为你应该只在活动内部处理向上按钮。如果您在手机中，向上按钮将由充当该片段包装器的活动处理，在平板电脑（主/详细模式）中您无论如何都不想要它

# javascript - JQuery 打开/关闭唯一的抽屉

> ID：14472053
> 
> 赞同：0
> 
> 时间：2013-01-23T03:37:12.643
> 
> 标签：javascript, jquery, jquery-ui, jquery-selectors, uislider

我正在努力完成对您来说可能很简单的任务。我想要它，所以每次用户单击左侧栏上的一个“患者”时，都会打开一个抽屉。该抽屉将加载到页面上的隐藏 div (display:none) 中。每个 div 的 id 将是患者的姓氏。显然，我包含的小提琴仅出于演示目的而显示所有相同的姓氏。

但问题是我不知道如何为每个病人打开一个独特的抽屉。我想我需要以某种方式在每个患者的 li 上设置一个开关？

此外，如果他们单击列表中的另一位患者，我希望关闭当前打开的抽屉，并打开他们刚刚单击的那个。此外，如果单击关闭按钮，显然也会关闭抽屉。

我有一个抽屉可以处理这个：

```
 $(".patient").toggle(function(){
            $(this)
                $('#drawer').slideDown("slow")

            }, function(){
                $(this)
                $('#drawer').slideUp("slow")    

            }); 
```

但显然那是行不通的...... :(

在小提琴中，它现在正在打开一个标准的“抽屉”。但我真的希望每个命名 div 的数据以相同的形式加载。如果您不明白，请发表评论。

这是小提琴：

[http://jsfiddle.net/3veht/1/](http://jsfiddle.net/3veht/1/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T03:55:19.123

检查这个小提琴更新....

代码中所做的更改

```
 var divud = $(this).text().split(' ')[1];
                $('#drawer').slideDown("slow");
                $('#'+divud).removeClass('hidden');
              $('#'+divud).slideDown("slow"); 
```

[JSFIDDLE](http://jsfiddle.net/3veht/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T03:57:45.353

在您的 HTML 中添加一个数据元素来指示 ID，在这种情况下假设为患者 ID：

```
<li class="patient green" data-patientId="1">Josh Doe<img src="img/next.png"><img class="imgfix" src="img/accept.png"></li>
<li class="patient red" data-patientId="2">John Adams<img src="img/next.png"><img class="imgfix" src="img/cancel.png"></li> 
```

然后在您的 javascript 中，当您加载数据时，您可以使用该 ID 生成页面请求。我还将切换开关更改为单击并向上滑动前一个，然后向下滑动新的。在小提琴示例中：

```
 $(".patient").click(function(){
     var pat = $(this);
     if ($("#drawer").is(":visible"))
         $("#drawer").slideUp("fast", function () {

            $('#drawer').slideDown("slow")
            $("#drawer").load("/echo/js?js=" + pat.data("patientid"));       
         });
     else   
     {
         $('#drawer').slideDown("slow")
         $("#drawer").load("/echo/js?js=" + pat.data("patientid"));
     }
 }); 
```

更新小提琴：http: [//jsfiddle.net/3veht/6/](http://jsfiddle.net/3veht/6/)

# spring - Spring @transactional 不会为 RuntimeException 回滚

> ID：14472058
> 
> 赞同：0
> 
> 时间：2013-01-23T03:37:52.583
> 
> 标签：spring, db2

我的班级被定义为

```
@Transactional
@Service
public class InteractionHistoryServiceImpl implements InteractionHistoryService { 
```

在该类中，我有一个方法可以对单独的 DB2 存储过程进行 4 次单独调用，如下所示（伪）：

```
@Override
public void createInteractionHistory(String userId, String userChannel,
        CreateInteractionHistoryRequestPayload requestPayload) {

dao.createInteractionHistory(userId, userChannel, viewableBy,
            interactCode, systemCreationDateTime, partyGrpId,
            interactionHistoryController);

dao.createInteractionHistoryDetails(userId, interactonDescription, interactionHistoryController);

dao.createInteractionHistoryDetailsLink(userId, componentId, objectId, objectType, correspondanceType, direction, interactionHistoryController);

dao.createInteractionHistoryDetailsLink(userId, componentId, documentId, DOCUMENT, correspondenceType, direction, interactionHistoryController);
} 
```

现在在最后的调用中，我通过传递一个太大的字段宽度来强制数据库中的异常，因此它根本无法调用 proc。这被捕获并转换为扩展 RuntimeException 的系统异常。

我在异常发生后调试了这段代码，它输入到 spring 框架中并且似乎正在回滚。

当我检查基础表时，我可以看到所有以前存储的过程都成功并且没有回滚，但最终调用没有成功。

这给我留下了不一致的数据和令人头疼的问题，因为我的理解是这些应该全部或全部处理提交/回滚。

我检查了存储的过程，数据库中没有提交。

这里有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T03:56:49.207

您需要考虑您的交易边界。事务边界通常是执行 BEGIN TRANSACTION 和 COMMIT / ROLLBACK 语句的地方，它不完全取决于 Spring，但也可能依赖于数据库实现。

在类级别指定@Transactional 表示类的每个公共方法都具有声明性事务边界（即：事务将在方法执行之前启动，在方法完成时提交/在发生异常时回滚）

在您的情况下，您似乎没有将 4 个*createInteractionHistory*调用包含在一个事务中——而是它们是 4 个单独的事务。因此，当最后一个失败时，前 3 个已经成功。

然而，即使您将所有这 4 个调用包含在单个事务中，也不能保证所有 SQL 都将在一个事务中运行，因为这取决于存储过程中的代码以及 DB2 如何绘制事务边界。

我建议您花一些时间在 Spring 事务边界和传播主题上——还有 DB2 事务。[spring 手册的第 11 章是一个很好的参考。](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/transaction.html)

# c# - TimeSpan 和 DispatchTimer

> ID：14472061
> 
> 赞同：0
> 
> 时间：2013-01-23T03:38:35.763
> 
> 标签：c#, timespan

我正在使用一个类来修改 DateTime 并使用 TimeSpan 通过 DispatchTimer 每秒向 WPF 标签显示 X 小时、Y 分钟、Z 秒。代码本身给出了正确的时间跨度，但是 DispatchTimer 给出了错误的输出。我能得到一些关于这里发生的事情的意见吗？

在调试中断期间仍在查询 ModifiedTime Minutes 属性（悬停在 ModifiedTime.Minutes 上不断给出越来越多的数字。），这是常态吗？

运行时输出从 3 分钟开始，然后显示 8 分钟、13、18、23、28 等。

图书馆：

```
public Clock() {
  load_ = DateTime.Now;
  time_ = new DateTime();
  time_ = DateTime.Now;
  modifiedTime_ = new DateTime();         
  modifiedTime_ = DateTime.Now;
  difference = TimeSpan.Zero;
}

public TimeSpan ModifiedTime {
  //Convert the real time to timespan.
  //display X Years, Y Days, Z Hours...
  get {
  modifiedTime_ = modifiedTime_.AddMinutes(1.0);
  difference = modifiedTime_.Subtract(time_);
  return difference;
  }
  set { difference = value; }
} 
```

WPF：

```
DispatcherTimer dispatcherTimer; 
public MainWindow() {
  InitializeComponent();
  dispatcherTimer = new DispatcherTimer();
  dispatcherTimer.Tick += new EventHandler(dispatcherTimer_Tick);
  dispatcherTimer.Interval = new TimeSpan(0, 0, 1);
  dispatcherTimer.Start();
}
private void dispatcherTimer_Tick(object sender, EventArgs e) {
  lblModTime.Content = clock.ModifiedTime.Hours + " hours, " + clock.ModifiedTime.Minutes + " minutes, " + clock.ModifiedTime.Seconds + " seconds, " + clock.ModifiedTime.Milliseconds + " milliseconds.";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T04:05:01.290

如果我理解正确，您想在每经过一秒的开始时间上增加一分钟。因此，以秒为单位计算差异，然后将其添加为新时间开始的分钟数。

```
public TimeSpan ModifiedTime
{
    get
    {
        TimeSpan elapsed = DateTime.Now - TimeStarted;
        return TimeStarted.AddMinutes(elapsed.TotalSeconds);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T04:06:00.213

Right, every time you call clock.ModifiedTime. in your dispatcher (4 times!) you add a minute to the modified time, plus possibly once more for evaluating the statement in the debugger. That would explain your incrementing your display by 5 each time.

# java - 无法正确使用ehCache

> ID：14472062
> 
> 赞同：0
> 
> 时间：2013-01-23T03:38:36.263
> 
> 标签：java, ehcache

我是ehcache的新手。我无法使用ehcahe ..每次我通过hibernate模板查询时，它只命中数据库..没有缓存:(我错过了什么？

我的**ehcache_xml::**

```
<?xml version="1.0" encoding="UTF-8"?>

    <ehcache xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:noNamespaceSchemaLocation="http://ehcache.org/ehcache.xsd">
    <diskStore path="java.io.tmpdir" />
    <defaultCache maxElementsInMemory="500" eternal="true"
        timeToIdleSeconds="10000" timeToLiveSeconds="60000" overflowToDisk="false" />

    <cache name="com.abc.hibernate.model.ViewOrderSummary"
        maxEntriesLocalHeap="10000" eternal="false" overflowToDisk="true"
        timeToIdleSeconds="300" timeToLiveSeconds="600" diskPersistent="true" />
</ehcache> 
```

以及使用以下哪个属性？

```
 <prop key="hibernate.cache.provider_class">${hibernate.cache.provider_class}</prop> 
                    <prop key="hibernate.cache.provider_class">org.hibernate.cache.EhCacheProvider</prop> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T03:40:24.683

尝试这个

```
<property name="cache.provider_class">org.hibernate.cache.EhCacheProvider</property> 
```

# php - 嵌套 div 在使用 PHP 动态导航标头时被推到容器 div 下方

> ID：14472064
> 
> 赞同：0
> 
> 时间：2013-01-23T03:38:46.140
> 
> 标签：php, css, html

我正在使用动态 PHP 标头开发一个站点，并且似乎已经使该部分正常工作。当试图将剩余内容与标题 div 一起放入容器 div 时，我的问题就出现了。所有其他内容都被忽略并被推到容器下方的左侧和下方。我希望它像标题一样位于容器内部并位于页面中心。

这是我在网站上的位置：http: [//maniandcompany.com/test/test/Print.php](http://maniandcompany.com/test/test/Print.php)

我尝试了几件事，包括溢出：隐藏；无济于事。

**这是HTML页面**

```
<div id="container">

<div id="header">   
<?php include 'header.php'; ?>
</div>

<div id="body">

    <div class="text">
    <h1>Title H1</h1>
    <h3>H3 Copy</h3>

    <h2>H2 Title</h2>
<p>body copy p</p>

    <span class="more_pictures">more images:</span>
    </div>

<div class="main_image"><img src="images/Corporate_Id_main1.jpg" />
    </div>

    </div>

    <div style="clear: both;"></div>

</div> 
```

**这是CSS**

```
/*Container*/
#container {
    width:790px;
    margin:auto;
    overflow:hidden;
}

/*Body*/
#body {
    width:790px;
    margin-top:0px;
    font-family: Arial, Helvetica, sans-serif; 
    font-size: 12px; 
    color: #484941; 
    overflow:hidden;
}

.main_image {
    float:right;
    width:527px;
    height:350px;
    margin-left:3px;
}

.text {
    float:left;
    font-family:Georgia, "Times New Roman", Times, serif;
    width: 220px;
    min-height: 350px;  
    margin-left:20px;
    margin-right:20px;
}

.text h1 {
    font-family:Arial, Helvetica, sans-serif;
    font-size:20px;
    color: #666;
    text-transform: uppercase;

}

.text h2 {
    font-family: Arial, Helvetica, sans-serif; 
    font-size:12px;
    color: #F60;
}

.text h3 {
    font-family:Georgia, "Times New Roman", Times, serif;
    font-size:14px;
    font-style:italic;
    color: #CCC;
    padding-bottom: 20px;
}

.text p {
    font-family:Arial, Helvetica, sans-serif;
    font-size:11px;
    color: #999;
    padding-bottom:10px;
}

.text .more_pictures {
    font-size:9px;
    font-style:italic;
    color: #999;
}

/*header*/
#header {
    width:790px;
    height:140px;

}

#head {
        width:790px;

}

/*logo*/
#logo {
    float:left;
    width: 260px;
    height: 100px;
}

/*main navigation*/
#nav_main {
    float:left;
    font-size: 12px;
    color: #000;
    font-family: Georgia, "Times New Roman", Times, serif;
    text-decoration: none;
    font-style: italic;
    width:240px;
    height:20px;
    text-align:center;
    margin-left:20px;
    margin-top:110px;
    position:absolute;
    z-index:2;

}

#nav_main .current {
    float:left;
    padding-right: 10px;
    color: #F60;
    text-decoration: none;

}

#nav_main .current a:link {
    color: #F60;
    text-decoration: none;
}
#nav_main .current a:visited, a:hover, a:active  {
    color: #F60;
    text-decoration: none;
}

#nav_main .inactive {
    padding-right: 10px;
    float:left;
    color: #000;
    text-decoration: none;

}

#nav_main .inactive a:link{
color: #000;
    text-decoration: none;
}
#nav_main .inactive a:visited {
    color: #000;
    text-decoration: none;
}
#nav_main .inactive a:hover, a:active {
    color: #F60;
    text-decoration: none;
}

/*NAV STYLES*/

#nav {
    float:right;
    height: 100px; /*height of our content box*/
    width: 527; /*width of our content box*/
    margin-left:3px;

}

#nav #greybox {
    height: 20px;
    width: 527px;
    background: #CCC;
    background-color: #ccc;
    margin-bottom:5px;

}

#nav #greybox2 {
    height: 20px;
    width: 527px;
    background: #CCC;
    background-color: #ccc;
    margin-top: 60px;
}

/*Thumbstrip*/

#nav #thumbStrip {
    font-family:Arial, Helvetica, sans-serif;
    font-size:10px;
    color: #F60;
    -webkit-backface-visibility: hidden;
    float: left;
    height: 70px;
    width: 527px;
    margin-bottom:5px; 

}
#nav #thumbStrip .thumb {
    float: left;
    width: 50px;
    height: 50px;
    overflow: hidden;
    -webkit-transition: all 0.5s;
    -moz-transition: all 0.5s;
    transition: all 0.5s;
    margin-left: 3px;
    -moz-box-shadow: 0px 0px 0px #FFF;
    -webkit-box-shadow: 0px 0px 0px #FFF;
    box-shadow: 0px 0px 0px #FFF;
    opacity:0.4;
    filter:alpha(opacity=40);

}
#nav #thumbStrip .thumb:hover {
    -moz-transform: scale(1.7);
    -moz-transform-origin: center top;
    -webkit-transform: scale(1.7);
    -webkit-transform-origin: center top;
    transform: scale(1.7);
    transform-origin: center top;
    background: #FFF;
    -moz-box-shadow: 0px 1px 1px 3px #FFF;
    -webkit-box-shadow: 0px 1px 1px 3px #FFF;
    box-shadow: 0px 1px 1px 3px #FFF;
    height: 60px;
    overflow: visible;
    opacity:1.0;
    filter:alpha(opacity=100);
    position: relative;
    z-index:1;

}
#nav #thumbStrip .thumb .first {
    margin-left: 0px;
}

#nav #thumbStrip .thumb p {
    margin: 0;
    line-height: 1;
    text-align: center;
    font-size: 60%;
    color: inherit;
    text-transform: uppercase;
}

#nav #thumbStrip .thumb img {
    display: block;
    margin-bottom: 2px;
    cursor: pointer;

}
#nav #thumbStrip a:link, .thumbStrip a:visited {
    font-size: 0.8em;
    color: #F60;
}
#nav #thumbStrip a:hover, #thumbStrip a:active {
    border: none;
    color: #F60;
}

/*Thumbstrip First*/

#nav #thumbStrip .thumbfirst {
    float: left;
    width: 50px;
    height: 50px;
    overflow: hidden;
    -webkit-transition: all 0.5s;
    -moz-transition: all 0.5s;
    transition: all 0.5s;
    margin-left: 0px;
    -moz-box-shadow: 0px 0px 0px #FFF;
    -webkit-box-shadow: 0px 0px 0px #FFF;
    box-shadow: 0px 0px 0px #FFF;
    opacity:0.4;
    filter:alpha(opacity=40);

}
#nav #thumbStrip .thumbfirst:hover {
    -moz-transform: scale(1.7);
    -moz-transform-origin: center top;
    -webkit-transform: scale(1.7);
    -webkit-transform-origin: center top;
    transform: scale(1.7);
    transform-origin: center top;
    background: #FFF;
    -moz-box-shadow: 0px 1px 1px 3px #FFF;
    -webkit-box-shadow: 0px 1px 1px 3px #FFF;
    box-shadow: 0px 1px 1px 3px #FFF;
    height: 60px;
    overflow: visible;
    opacity:1.0;
    filter:alpha(opacity=100);
    position: relative;
    z-index:1;

}

#nav #thumbStrip .thumbfirst p {
    margin: 0;
    line-height: 1;
    text-align: center;
    font-size: 60%;
    color: inherit;
    text-transform: uppercase;
}

#nav #thumbStrip .thumbfirst img {
    display: block;
    margin-bottom: 2px;
    cursor: pointer;

}

/*thumb active first*/

#nav #thumbStrip .thumbActiveFirst {
    float: left;
    width: 50px;
    height: 50px;
    overflow: hidden;
    -webkit-transition: all 0.5s;
    -moz-transition: all 0.5s;
    transition: all 0.5s;
    color: #F60;
    -moz-box-shadow: 0px 1px 3px #FFF;
    -webkit-box-shadow: 0px 1px 3px #FFF;
    box-shadow: 0px 1px 3px #FFF;
    opacity:1.0;
    filter:alpha(opacity=100);
}
#nav #thumbStrip .thumbActiveFirst:hover {
    -moz-transform: scale(1.7);
    -moz-transform-origin: center top;
    -webkit-transform: scale(1.7);
    -webkit-transform-origin: center top;
    transform: scale(1.7);
    transform-origin: center top;
    background: #FFF;
    -moz-box-shadow: 0px 1px 1px 3px #FFF;
    -webkit-box-shadow: 0px 1px 1px 3px #FFF;
    box-shadow: 0px 1px 1px 3px #FFF;
    height: 60px;
    overflow: visible;
    opacity:1.0;
    filter:alpha(opacity=100);
    position: relative;
    z-index:1;
}

#nav #thumbStrip .thumbActiveFirst p {
    margin: 0;
    line-height: 1;
    text-align: center;
    font-size: 60%;
    color: inherit;
    text-transform: uppercase;
}

#nav #thumbStrip .thumbActiveFirst img {
    display: block;
    margin-bottom: 2px;
    cursor: pointer;
}

/*thumb active*/

#nav #thumbStrip .thumbActive {
    float: left;
    width: 50px;
    height: 50px;
    overflow: hidden;
    -webkit-transition: all 0.5s;
    -moz-transition: all 0.5s;
    transition: all 0.5s;
    color: #F60;
    margin-left: 3px;
    -moz-box-shadow: 0px 1px 3px #FFF;
    -webkit-box-shadow: 0px 1px 3px #FFF;
    box-shadow: 0px 1px 3px #FFF;
    opacity:1.0;
    filter:alpha(opacity=100);

}
#nav #thumbStrip .thumbActive:hover {
    -moz-transform: scale(1.7);
    -moz-transform-origin: center top;
    -webkit-transform: scale(1.7);
    -webkit-transform-origin: center top;
    transform: scale(1.7);
    transform-origin: center top;
    background: #FFF;
    -moz-box-shadow: 0px 1px 1px 3px #FFF;
    -webkit-box-shadow: 0px 1px 1px 3px #FFF;
    box-shadow: 0px 1px 1px 3px #FFF;
    height: 60px;
    overflow: visible;
    opacity:1.0;
    filter:alpha(opacity=100);
    position: relative;
    z-index:1;
}

#nav #thumbStrip .thumbActive p {
    margin: 0;
    line-height: 1;
    text-align: center;
    font-size: 60%;
    color: inherit;
    text-transform: uppercase;
}

#nav #thumbStrip .thumbActive img {
    display: block;
    margin-bottom: 2px;
    cursor: pointer;
}
#nav #thumbStrip a:link, #content .thumbStrip a:visited {
    font-size: 0.8em;
    color: #F60;
}
#nav #thumbStrip a:hover, #thumbStrip a:active {
    border: none;
    color: #fff;
}

#nav #thumbStrip .thumb .first {
    margin-left: 0px;
} 
```

**在此先感谢您的帮助。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T06:27:21.843

源页面上的第 119 行有一个 div 结束标记，它在您的“清除”div 之前结束您的“body”div。

```
<div class="main_image"><img src="images/Corporate_Id_main1.jpg" />
</div>

</div>  <-- erase this closing tag.

<div style="clear: both;"></div>

</div> 
```

更不用说你有 2 组打开和关闭头部和身体标签。我不确定你是否在其中包含一个 php 文件，然后在你的其他页面中重复它们或什么，但该页面上有很多杂散标签。

# postgresql - PostgreSQL 索引使用，备份 pg_catalog 数据

> ID：14472065
> 
> 赞同：1
> 
> 时间：2013-01-23T03:38:47.937
> 
> 标签：postgresql, indexing, database-backups

我目前正在审查复杂 PostgreSQL 数据库中索引的使用情况。看起来有用的查询之一是

```
SELECT idstat.schemaname AS schema_name, idstat.relname AS table_name,
indexrelname AS index_name,
idstat.idx_scan AS times_used,
pg_size_pretty(pg_relation_size(idstat.relid)) AS table_size, pg_size_pretty(pg_relation_size(indexrelid)) AS index_size,
n_tup_upd + n_tup_ins + n_tup_del as num_writes,
indexdef AS definition
FROM pg_stat_user_indexes AS idstat JOIN pg_indexes ON (indexrelname = indexname AND idstat.schemaname = pg_indexes.schemaname)
JOIN pg_stat_user_tables AS tabstat ON idstat.relid = tabstat.relid
WHERE idstat.idx_scan  < 200
    AND indexdef !~* 'unique'
ORDER BY idstat.relname, indexrelname; 
```

它告诉我索引的使用频率、它使用了多少空间等。

然而：

我从客户端站点获取数据库备份。当我恢复数据库时，查询为 times_used 返回零。我怀疑所有索引都在恢复时重建。

最后，提问：

从 pg_catalog 捕获（备份）数据以便恢复和分析有关索引使用的实际客户端数据的最简单方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T03:49:05.010

提供客户端可以运行的 SQL 脚本`psql -f report_on_live_db.sql live_db_name`。拥有`SELECT`所需的数据。

或者，您可以从客户端获取客户端数据库的原始文件系统级别副本，然后在本地计算机上启动它。这只有在您可以在相同的操作系统和架构上运行 PostgreSQL 时才有效；您不能使用 64 位 PostgreSQL 访问 32 位数据库，也不能使用 Linux PostgreSQL 访问 Windows 或 BSD 数据库。必须使用相同的 PostgreSQL 主版本；您不能使用 9.1 访问 9.0 数据库，反之亦然。

# magento-1.7 - magento-在管理模块中为层级价格添加从和到日期

> ID：14472070
> 
> 赞同：6
> 
> 时间：2013-01-23T03:39:38.383
> 
> 标签：magento-1.7, magento

我需要知道如何在 magento 中为等级价格添加数据范围（从和到日期），这将使价格仅出现在给定的日期范围内。

我是 magento 的新手，所以任何指导都会有很大帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-29T14:28:48.003

由于默认情况下这是不可能的，因此您可以尝试的 magento 是：

在 Admin -> Catalog -> Attribute 中创建 2 个字段，`tierprice_to_date`并将`tierprice_from_date`其添加到`price`属性集中的组中。

在 /app/design/frontend/base/default/template/catalog/product/view.phtml

```
if(date between tierprice_from_date and tierprice_to_date){
    echo $this->getTierPriceHtml();
} 
```

然后创建一个带有观察者的自定义模块，在使用事件将商品添加到购物车时检查价格`'sales_quote_add_item'`：

创建：app/code/local/MageIgniter/TierPriceDateRange/etc/config.xml

```
<?xml version="1.0"?>
<config>
    <modules>
        <MageIgniter_TierPriceDateRange>
            <version>1.0.1</version>
        </MageIgniter_TierPriceDateRange>
    </modules>

    <global>
        <models>
            <tierpricedaterange>
                <class>MageIgniter_TierPriceDateRange_Model</class>
            </tierpricedaterange>
        </models>
         <events>
            <sales_quote_add_item>
                <observers>
                    <tierpricedaterange_observer>
                        <type>singleton</type>
                        <class>tierpricedaterange/observer</class>
                        <method>updatePrice</method>
                    </tierpricedaterange_observer>
                </observers>
            </sales_quote_add_item>
        </events>
    </global>
</config> 
```

创建：app/code/local/MageIgniter/TierPriceDateRange/Model/Observer.php

```
class MageIgniter_TierPriceDateRange_Model_Observer 
{
    public function updatePrice($observer) {
    if(date NOT between tierprice_from_date and tierprice_to_date){
       $cartItem = $observer->getEvent()->getQuoteItem();
       // check if a tier price was apply and change it back to the original price (none tier price)
       $product = Mage::getModule('catalog/product')->load($product->getId());

       if($cartItem->getPrice() == $product->getTierPrice($cartItem->getQty())){
            $new_price = $product->getPrice();
            $product->setOriginalCustomPrice($new_price);
            $product->save();
       }
    }
   return $this;
} 
```

创建：app/etc/modules/MageIgniter_TierPriceDateRange.xml

```
 <?xml version="1.0"?>
    <config>
           <modules>
                  <MageIgniter_TierPriceDateRange>
                          <active>true</active>
                          <codePool>local</codePool>
                  </MageIgniter_TierPriceDateRange>
           </modules>
    </config> 
```

然后清除缓存（如果有）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T08:47:23.360

这在标准 Magento 配置中是不可能的。您必须构建（或让它为您构建）一个自定义模块才能实现这一点。

另请参阅[http://www.magentocommerce.com/boards/viewthread/230679/](http://www.magentocommerce.com/boards/viewthread/230679/)

# c - 如何将父进程和子进程保持在同一个核心上

> ID：14472072
> 
> 赞同：6
> 
> 时间：2013-01-23T03:39:59.803
> 
> 标签：c, linux, performance, fork, scheduling

我知道一个**进程（父进程）**可以使用固定到一个核心**，**`sched_setaffinity`然后分叉的进程继承亲和性，并且也将固定在同一个*核心*上。但是，我不想让它们永远固定在同一个核心上。理想情况下，我希望他们一起留在同一个**CPU**上，即如果父级由操作系统调度程序迁移，则子级应该跟随父级并迁移到与父级相同的 CPU。

一种可能的方法是让`shared variable`where 父级定期更新其当前 CPU。然后子进程可以定期查找此变量并`sched_setaffinity`迁移到与父进程相同的 CPU。但是，这看起来有点 hacky，并且可能涉及它们在不同 CPU 上运行的时间段。有没有更好的方法来实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-02T01:10:31.687

是否可以在线程中而不是在其自己的进程中运行子进程？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T21:43:56.957

帮派调度有帮助吗？然后，父母和孩子将被共同安排。

# c++ - 计算每秒时钟数

> ID：14472073
> 
> 赞同：3
> 
> 时间：2013-01-23T03:40:22.050
> 
> 标签：c++, c++11

我做得对吗？有时，我的程序会为计时解决方案打印 2000+，它总是为 CLOCKS_PER_SEC 打印 1000..

我实际计算的值是多少？是每秒时钟数吗？

```
#include <iostream>
#include <chrono>
#include <thread>
#include <ctime>

std::chrono::time_point<std::chrono::high_resolution_clock> SystemTime()
{
    return std::chrono::high_resolution_clock::now();
}

std::uint32_t TimeDuration(std::chrono::time_point<std::chrono::high_resolution_clock> Time)
{
    return std::chrono::duration_cast<std::chrono::nanoseconds>(SystemTime() - Time).count();
}

int main()
{
    auto Begin = std::chrono::high_resolution_clock::now();
    std::this_thread::sleep_for(std::chrono::milliseconds(1));
    std::cout<< (TimeDuration(Begin) / 1000.0)<<std::endl;

    std::cout<<CLOCKS_PER_SEC;
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T03:58:30.247

为了在 Linux 上获得正确的每秒滴答声，您需要使用`::sysconf(_SC_CLK_TCK)`（在 header 中声明`unistd.h`）的返回值，而不是宏`CLOCKS_PER_SEC`。

后者是 POSIX 标准中定义的常数——它与 CPU 时钟的每秒实际滴答数无关。例如，请参见手册页`clock`：

> C89、C99、POSIX.1-2001。POSIX 要求 CLOCKS_PER_SEC 等于 1000000，与实际分辨率无关。

但是，请注意，即使使用正确的 ticks-per-second 常数，您仍然无法获得每秒的实际 CPU 周期数。“时钟滴答”是 CPU 时钟使用的特殊单位。它与实际 CPU 周期的关系没有标准化的定义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-13T12:52:52.380

在 boost 的库中，有一个计时器类，使用 CLOCKS_PER_SEC 来计算计时器可以经过的最长时间。它说在Windows上CLOCKS_PER_SEC是1000，在Mac OS X，Linux上是1000000。所以在后面的操作系统上，精度更高。

# javascript - 如何构建这个json？

> ID：14472077
> 
> 赞同：0
> 
> 时间：2013-01-23T03:40:40.260
> 
> 标签：javascript, json

```
[{"username" : "11"},
      {"password" : "test"},
      {"detailorder" : [
        {"id" : "1",
         "qty" : "5"},
        {"id" : "2",
         "qty" : "10"}
      ]}
    ] 
```

我如何在javascript中创建上面的json？我对json的理解非常低。我参考了 [如何在 javascript 中动态构建 JSON？](https://stackoverflow.com/questions/4314008/how-do-i-build-json-dynamically-in-javascript). 我需要动态地添加数据，尤其是对于 detailorder。但我从一开始就卡住了。

我写

```
var datajson = []; 
```

我不知道接下来要写什么。对不起，我的英语不好。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T04:08:15.093

创建数组，将其分配给变量并对其进行字符串化。

方法如下：

```
var arr = [
   { username:'11' },
   { password:'test' },
   { detilpesanan: [
       { id:'1',jumlah:'5' },
       { id:'2',jumlah:'10' }
   ]}
];

var json = JSON.stringify(arr); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T03:47:17.100

你的意思是像：

```
var datajson = [
    { "username" : 11 },
    {"password" : "test"},
    {"orderdetail" : 
        { 
            "id": 1,
            "qty": 25           
        },
        { 
            "id": 2,
            "qty": 10           
        }
    }
]; 
```

**添加：**

```
var datajson = {};
datajson.username = 11;
datajson.password = "test";
datajson.detilpesanan = [];
datajson.detilpesanan.push({});
datajson.detilpesanan.unshift({});
datajson.detilpesanan[0]["id"] = 1;
datajson.detilpesanan[0]["jumlah"] = 5;
datajson.detilpesanan[1]["id"] = 2;
datajson.detilpesanan[1]["jumlah"] = 10;

console.log( datajson ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T03:50:45.830

我想建议一些使它更容易的东西。首先，您需要使用 jquery 或任何其他提供 json 解析和 endcoding 的 javascript 库。然后将该结构创建为 javascript 上的标准对象。使用 jquery（或您选择的任何 javascript 库）为您将其编码为 JSON 字符串。

多年来我一直在使用 JSON 格式，但我几乎不记得需要自己写下来。也许有实例，但我认为我没有将它用于实际实现。

您也可以访问 json.org，下载可用的解析器和编码器。

我希望这有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T04:41:29.667

你可以看到： http: [//www.json.org/js.html](http://www.json.org/js.html)

JSON（Javascrtip Serialization Object）是一种序列化对象类型，所以不能先创建对象再序列化这个对象，像这样：

```
 function createPerson()
        {
            var persons = new Array();

            for(i=0; i<3; i++)
            {
                var details = new Array();

                for(k = 0; k<2;k++)
                {
                    var det = new persondetail(k,k*2);
                    details.push(det);
                }

                var p = new person('user'+i,'pdw'+i,details);

                persons.push(p);
            }

                            //-- serialize object, see console output
            console.log(JSON.stringify(persons));

        }

        function person(user, pwd,det)
        {
            this.username = user;
            this.password = pwd;
            this.detilpesanan = det;

        }

        function persondetail(id, jumlah)
        {
            this.id = id;
            this.jumlah = jumlah;
        } 
```

# perl - 使用 Perl POST 到带有标题的页面

> ID：14472078
> 
> 赞同：0
> 
> 时间：2013-01-23T03:40:42.157
> 
> 标签：perl

我有个问题。我昨天问了这个问题，但不是我真正想要的方式，所以我很抱歉。我想要做的是发布到页面电子邮件和密码，但该页面还需要发送特定的标题。（我相信它们被称为请求标头）。我尝试了 LWP::UserAgent 但我只能发布数据，而不是带有它的标题。我该怎么做？我是 Perl 的新手。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T04:08:34.267

您之前提到了用户代理和 cookie。虽然您可以将这些添加到请求中，但这通常是您想要的多个请求，因此可以在 UA 本身中设置。

```
use HTTP::Cookies         qw( );
use HTTP::Request::Common qw( POST );
use LWP::UserAgent        qw( );

my $cookies = HTTP::Cookies->new();
$cookies->set_cookie(...);

my $ua = LWP::UserAgent->new(
   agent      => ...,
   cookie_jar => $cookies,
);

my $request = POST(
   'http://www.example.com/',
   Referer => '...',
   Content => [
      username => ...,
      ...
   ],
);

my $response = $ua->request($request); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-23T17:18:29.030

```
use strict;
use warnings;
use LWP::UserAgent qw( );

my $ua = LWP::UserAgent->new();
$ua->default_header('Cookie' => '...');
$ua->default_header('Referer' => '...');

my $response = $ua->post('url_goes_here', {username=>'test', password=>'pass'});

if($response->is_success)
{
 print $response->as_string;
} 
```

这对我有用。希望有人可以从这个答案中学到一两件事。诀窍是使用`default_header`

# r - 将顶点大小与 igraph 中的标签大小匹配

> ID：14472079
> 
> 赞同：7
> 
> 时间：2013-01-23T03:41:01.207
> 
> 标签：r, igraph

我正在尝试使用 R 中的 igraph 绘制小型网络。网络中的每个顶点都有一个名称，相当于它的标签。我想让每个顶点都有一个矩形符号，它的大小刚好适合它的标签。

这是我的主要灵感。

![海波利亚地图](../Images/7761f735514790df0f56081a118356ad.png)

使用 igraph 执行此操作的最佳方法是什么？

*编辑：更多信息*

代码在[这里](https://github.com/SashaCrofter/network-markup/blob/development/R/json-to-nm.R)

```
jsonToNM <- function(jfile, directed=TRUE) {
  # Requires "rjson" and "igraph"

  nm.json <- fromJSON(file=jfile)
  nm.graph <- c()

  # Initialize the graph with the given nodes
  g <- graph.empty(n=length(nm.json), directed=directed)
  # Add their names
  V(g)$name <- names(nm.json)
  V(g)$label <- V(g)$name

  # Now, add the edges
  for(i in 1:length(nm.json)) {
    # If the node has a "connected" field,
    # then we note the connections by looking
    # the names up.
    if(length(nm.json[[i]]$connected > 0)) {
      for(j in 1:length(nm.json[[i]]$connected)) {
        # Add the entry
        g <- g + edge(names(nm.json)[i],
                        nm.json[[i]]$connected[j])
      }
    }
  }

  plot(g, vertex.label.dist=1.5)
} 
```

电流输出如下。

![电流输出](../Images/1cea4655cfb04c79bc5deccd5f90a23f.png)

我的目标是将标签放置在顶点图形内，并扩大顶点的宽度以容纳标签。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-23T06:49:37.580

这是一个例子。在一些肮脏的技巧中（即将顶点大小乘以 200），关键是使用两个绘图命令，这样我们就可以`strwidth()`在绘图大小设置为第一个（空） 阴谋。

```
library(igraph)
camp <- graph.formula(Harry:Steve:Don:Bert - Harry:Steve:Don:Bert,
                      Pam:Brazey:Carol:Pat - Pam:Brazey:Carol:Pat,
                      Holly   - Carol:Pat:Pam:Jennie:Bill,
                      Bill    - Pauline:Michael:Lee:Holly,
                      Pauline - Bill:Jennie:Ann,
                      Jennie  - Holly:Michael:Lee:Ann:Pauline,
                      Michael - Bill:Jennie:Ann:Lee:John,
                      Ann     - Michael:Jennie:Pauline,
                      Lee     - Michael:Bill:Jennie,
                      Gery    - Pat:Steve:Russ:John,
                      Russ    - Steve:Bert:Gery:John,
                      John    - Gery:Russ:Michael)

V(camp)$label <- V(camp)$name
set.seed(42)   ## to make this reproducable
co <- layout.auto(camp)

plot(0, type="n", ann=FALSE, axes=FALSE, xlim=extendrange(co[,1]), 
     ylim=extendrange(co[,2]))
plot(camp, layout=co, rescale=FALSE, add=TRUE,
     vertex.shape="rectangle",
     vertex.size=(strwidth(V(camp)$label) + strwidth("oo")) * 100,
     vertex.size2=strheight("I") * 2 * 100) 
```

![igraph 顶点标签宽度](../Images/edd38c19775651f7f42149f29c63f472.png)

顺便提一句。这实际上不适用于 SVG 图形，因为无法从 R 中测量文本的宽度，SVG 设备只能进行猜测。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-02T21:27:49.077

我知道这不是您问题的直接答案，但我建议使用不同的工具进行可视化。yEd 非常擅长将节点的宽度调整为标签的大小。您还可以轻松地操作可视化，并将其导出为 SVG 以进行最终润色。它可以从 www.yworks.com 免费获得（免责声明：我不在那儿工作）。

要以易于阅读的格式导出图形（yEd 不理解 igraph 的 gml 格式），请使用 graphml：

```
write.graph(graph, "test.graphml", format="graphml") 
```

在 yEd 中打开它。转到编辑-> 属性映射器并单击“新配置（节点）”（绿色“加号”符号，左上角）。在框架的中间，在“数据源”下，搜索标签的名称（应该是“名称”）。在名为“映射到”的中间选项卡中选择“标签文本”并在右栏中将“转换”设置为“自动”。

现在选择 Tools -> fit node to label（第一次尝试默认参数即可），然后选择您喜欢的布局。您可以导出为各种图像格式，但据我所知，所有这些都是使用位图中间体实现的。因此，我通常会导出到 SVG 并在 inkscape 中进行抛光。如果有人知道更有效的程序来获得在 igraph 中生成的中型图形的美观布局，请告诉我。

# php - 非字母数字、非符号字符的正则表达式

> ID：14472083
> 
> 赞同：0
> 
> 时间：2013-01-23T03:41:46.083
> 
> 标签：php, regex

我正在编写一个简单的表单预验证器。我正在寻找一个 PHP 正则表达式来匹配任何*不规则*符号。也就是说，非拉丁语和非数字字符，以及不包含在正常英语标点符号中的字符（基本上，匹配不在[此 ascii 表](http://www.asciitable.com/)的第二列到第四列中的字符）。那里有任何正则表达式向导可以帮助我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T03:44:08.850

第二到第四列可以翻译成一个简单的正则表达式：

```
/[^ -~]/ 
```

匹配任何不在空格和波浪号之间的字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T03:43:47.790

[答案在这里。](https://stackoverflow.com/questions/2124010/grep-regex-to-match-non-ascii-characters)

长与短。这个PCRE：`[^\x00-\x7F]`

# asp.net-mvc - 如何在 ASP.NET MVC 应用程序区域中使用不同的实体框架 DbContext？

> ID：14472084
> 
> 赞同：3
> 
> 时间：2013-01-23T03:42:00.350
> 
> 标签：asp.net-mvc, entity-framework, asp.net-mvc-4, ef-code-first, asp.net-mvc-areas

目前，我正在使用 MVC 4 和实体框架代码优先方案构建一个 Web 应用程序。

在我的应用程序的主要结构中，我有一个`Dbcontext(BlogDB)`管理一些`Blog`类。它工作正常，因为它在数据库中创建了我需要的所有表。然后我创建了一个区域来托管在线商店。我的想法是创建一个单独的`DbContext`类（`OnlineStoreDB`）来处理仅用于在线商店的类。

我的问题是一旦`OnlineStoreDB`被触发，实体框架不仅为创建表，而且还`OnlineStore`删除了旧表。

我的问题是：

1.  如果您知道保留旧桌子的方法吗？
2.  如何在一个应用程序中准确管理多个 EF 上下文类？

**代码：**

```
public class BlogDB : DbContext
{
    public BlogDB ()
        : base("DBConnection")
    {
        Database.SetInitializer(new BlogInitializer());
    }

    public DbSet<Blog> Blogs { get; set; }
    public DbSet<Author> Authors { get; set; }
    public DbSet<Comment> Comments { get; set; }
}

public class OnlineStoreDB : DbContext
{
    public OnlineStoreDB() :
        base("DbConnection")
    {
        Database.SetInitializer(new OnlineStoreInitializer());
    }

    public DbSet<Order> Orders { get; set; }
    public DbSet<Product> Products { get; set; }
    public DbSet<User> Users { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T03:52:04.120

Xavier，欢迎使用代码优先！

是的，代码优先是一种出色的方法，它承诺了很多。但现在你已经成功了。在微软（或据我所知，在外部）没有聪明的头脑想出一种在不危及数据和可能的模式的情况下智能地更改表的平滑方法。

2 年前，实施策略是删除并重新构建数据库。这是无法容忍的，因为我们中的许多人都没有 SU 访问权限，并且被拦在了我们的轨道上。

对于我首先从代码中发现的所有优势，我更喜欢 DB。虽然数据不容易保存，但注释可以通过伙伴类进行。

微软提出了一些巧妙的迁移策略。我强烈建议你阅读这两篇文章。代码项目二：

1) [http://blogs.msdn.com/b/adonet/archive/2012/02/09/ef-4-3-code-based-migrations-walkthrough.aspx](http://blogs.msdn.com/b/adonet/archive/2012/02/09/ef-4-3-code-based-migrations-walkthrough.aspx)

2) [http://www.codeproject.com/Articles/504720/EntityplusFrameworkplusCodeplusFirstplusMigrations](http://www.codeproject.com/Articles/504720/EntityplusFrameworkplusCodeplusFirstplusMigrations)

无论您决定继续使用 Code-First，它们都应该具有启发性。我听起来像个批评家，但我在一个的优势和另一个的稳定性之间左右为难。

最后，我认为您不应该保留 2 个 dbcontexts。您的 POCO 应在 1 个上下文中合并。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T03:50:22.077

如果要保持表不更改，则需要在两个 DBContexts 中将初始化程序设置为 null （如果它们具有表的子集）。

但是我看不到您为一个数据库创建两个 DBContext 的意义。你能清楚地分开你数据库中的两组表（域）吗？

# xml - Flex：使用数据绑定将一项添加到列表

> ID：14472090
> 
> 赞同：0
> 
> 时间：2013-01-23T03:43:25.207
> 
> 标签：xml, apache-flex, list, mxml, httpservice

我正在尝试使用 Flex/MXML 将 xml 数据加载到列表中。我有一种获取 XML 并将其放入列表的方法（我知道它正在正确读取数据）但是当我运行应用程序时出现此错误：

```
TypeError: Error #1034: Type Coercion failed: cannot convert "User1" to mx.collections.IList.
at Function/<anonymous>()[/Users/Jacob/Documents/Adobe Flash Builder 4.6/App/src/views/MainMenu.mxml:52] 
```

（我删除了一些错误日志）

我看到它说错误发生在第 52 行，如下所示：

```
<s:List id="xml_list" x="44" y="89" width="232" height="341" dataProvider="{get_xml.lastResult.Array.Item}"></s:List> 
```

我做了一些测试，我意识到只有当要添加的数据是 1 项时才会出现错误。如果有超过 1 个项目，那么它可以完美运行并将数据放入列表中。

当 XML 有一个 Item 时，它看起来像这样：

```
<Array>
<Item>Hello</Item>
</Array> 
```

当 XML 有两个项目时，它看起来像这样：

```
<Array>
<Item>Hi</Item>
<Item>Hola</Item>
</Array> 
```

所以我的问题是：有没有办法解决这个问题？非常感谢任何帮助。

谢谢，雅各布

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T05:19:18.440

尝试这个：

```
<s:List id="xml_list" x="44" y="89" width="232" height="341" >
    <s:dataProvider>
        <s:XMLListCollection source="{get_xml.lastResult.Array.Item}" />
    </s:dataProvider>
</s:List> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T05:57:34.237

我已经解决了！我使用了 Serge Him 的帖子的基础，但稍微改变了他的例子。我开始工作的代码是：

```
<s:List id="games_list" x="44" y="89" width="232" height="341">
    <s:dataProvider>
        <s:ArrayCollection source="{get_games.lastResult.Games.Name}"/>
    </s:dataProvider>
</s:List> 
```

非常感谢 Serge Him，他让我指出了正确的方向！

# asp.net - 拒绝访问路径“xxx”的错误

> ID：14472096
> 
> 赞同：0
> 
> 时间：2013-01-23T03:44:13.527
> 
> 标签：asp.net, vb.net, internet-explorer

嗨，我正在创建一个显示错误的文件 txt 并提供链接，以便可以打开文件。

它可以在 Firefox 上工作，但不能在 ie 上工作

这里是屏幕截图

火狐

![在此处输入图像描述](../Images/66a5a33845adb7338001c1b881422eb5.png)

IE

![在此处输入图像描述](../Images/20c2e3a31679d1beb042d6335f240765.png)

```
If (Not System.IO.Directory.Exists("~\Errortext")) Then
                System.IO.Directory.CreateDirectory("~\ErrorText")
            End If

            Dim lodt As New DataTable
            da.Fill(lodt)
            If lodt.Rows.Count > 0 Then
                Dim filex As StreamWriter = File.CreateText("~\ErrorText\Error" & Session("UID") & ".txt")
                Dim i As Integer
                For i = 0 To lodt.Rows.Count - 1
                    filex.WriteLine(Left(lodt.Rows(i).Item("colErr"), Len(lodt.Rows(i).Item("colErr")) - 1))
                Next

                filex.Close()
                lblMessage.Text = "Click on <a href=""../~/ErrorText/Error" & Session("UID") & ".txt"">THIS ONE</a> to proceed"
            Else
                lblMessage.Text = "berhasil"
            End If 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T09:12:28.710

当您使用身份验证模式时，`Windows`IE 会将您的桌面用户身份发送到服务器。您的应用程序将在授予运行 IE 的 windows 用户的权限下在服务器上运行。

您尚未授予此用户对该`ErrorText`文件夹的权限。这就是您在 IE 中收到错误的原因。

如果您不想向每个域用户授予权限，请使用模拟。

```
<identity impersonate="true" /> 
```

这样，所有互联网用户都将在一个安全上下文下运行，并且您可以授予所需的权限。默认情况下，此用户是`IUSR`

您还可以指定您的互联网用户应在哪些用户凭据下获得访问权限

```
<identity impersonate="true" userName="DOMAIN\UserName" password="Password" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T11:17:34.137

感谢 nunespascal 的回答

但它仍然需要 iis 和文件夹的权限以获取更多详细信息，请参见[此处](http://devnet.logixml.com/rdPage.aspx?rdReport=Article&dnDocID=209)

# objective-c - NSString "nil or empty" 检查——这完成了吗？

> ID：14472098
> 
> 赞同：38
> 
> 时间：2013-01-23T03:44:23.763
> 
> 标签：objective-c

我在 NSString 上写了一个小类别，我想知道这个方法是否准确地处理了所有潜在的用例：

**更新：**澄清——我想确保我不会错过一些涉及字符编码等的奇怪案例。

```
@implementation NSString (Helpers)

+(BOOL)stringIsNilOrEmpty:(NSString*)aString {
    if (!aString)
        return YES;
    return [aString isEqualToString:@""];
}
@end 
```

示例用法：

```
-(void) sampleUsage {
    NSString *emptyString = @"";
    NSString *nilString = nil;
    NSAssert([NSString stringIsNilOrEmpty:nilString] == YES, @"String is nil/empty");
    NSAssert([NSString stringIsNilOrEmpty:emptyString] == YES, @"String is nil/empty");
}
@end 
```

* * *

## 回答 #1

> 赞同：132
> 
> 时间：2013-10-09T09:27:17.697

我只使用下一个条件，甚至不需要类别：

```
if (!aString.length)
{
    ...
} 
```

使用 Objective-C 理论，给 NIL 的消息将返回 nil 或零，所以基本上**你不必测试 nil**。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2013-01-23T03:48:14.513

您可以通过删除条件来简化代码：

```
+(BOOL)stringIsNilOrEmpty:(NSString*)aString {
    return !(aString && aString.length);
} 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-04-16T12:24:05.843

@dasblinkenlight 的答案很好，但我将使用的更具可读性的条件检查是：

```
NSString *string = ...;   // define the string
if ([string length] == 0) {
    // Do stuff with the string
} else {
    // The string is empty or nil here
} 
```

非常简洁，不需要单独的便利函数定义。这很容易记住。

编辑：@Michael G. Emmons 将此作为对该答案的最后评论发布……感谢他，但我将其列为其本身的答案。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-01-22T03:23:00.973

这种“非空或空白”测试的一些示例作为 NSString 上的一个类别。

```
// Please note that in general I advocate using a prefix on category methods
// to avoid category collisions.  I've not done this here for clarity. 
// The @interface is also excluded from this example for brevity.

@implementation NSString (MyAdditions)

- (BOOL)isNotEmpty
{
  return [self length] != 0;
}

- (BOOL)isNotBlank
{
  if ([self isNotEmpty])
  {
    NSCharacterSet *nonWhitespaceSet = [[NSCharacterSet whitespaceAndNewlineCharacterSet] invertedSet];
    NSRange range = [self rangeOfCharactersFromSet:nonWhitespaceSet];
    return range.location != NSNotFound;
  }

  return NO;
}

@end 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-05-26T09:58:11.540

确保在计算长度之前检查空格，修剪空格。

```
+(BOOL)stringIsNilOrEmpty:(NSString*)aString {
    return !aString || [[aString  stringByTrimmingCharactersInSet:
                    [NSCharacterSet whitespaceCharacterSet]] length] == 0;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-05-27T19:58:11.477

> 只需检查您的字符串长度
> 
> ```
> > if (!yourString.length){
> >     //your code  } a 
> ```
> 
> 发给 NIL 的消息将返回 nil 或 0，因此无需测试 nil :)。
> 
> 快乐的编码...

# c# - 如何找到两种类型之间最佳拟合的最小协变类型？

> ID：14472103
> 
> 赞同：21
> 
> 时间：2013-01-23T03:45:11.200
> 
> 标签：c#, types, covariance, contravariance

There's`IsAssignableFrom`方法返回一个布尔值，指示一种类型是否可以从另一种类型分配。

我们如何不仅可以测试它们是否可以相互分配，**还要****知道**最佳拟合的**最小协变类型？**

 ****考虑以下示例（C# 4.0）

*   代码

    ```
    // method body of Func is irrelevant, use default() instead
    Func<char[]> x = default(Func<char[]>);
    Func<int[]> y = default(Func<int[]>);

    Func<Array> f = default(Func<Array>);
    Func<IList> g = default(Func<IList>);

    g=x;
    g=y;

    y=x; // won't compile
    x=y; // won't compile

    // following two are okay; Array is the type for the covariance
    f=x; // Array > char[] -> Func<Array> > Func<char[]> 
    f=y; // Array > int[] -> Func<Array> > Func<int[]> 

    // following two are okay; IList is the interface for the covariance
    g=x;
    g=y; 
    ```

在上面的示例中，要查找的是 和 之间的`char[]`类型`int[]`。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-23T03:45:11.200

更新：

事实证明`FindInterfaceWith`可以简化并且构建扁平类型层次结构变得多余，因为不一定涉及基类，只要我们在类型本身是接口时考虑到它；所以我添加了一个扩展方法`GetInterfaces(bool)`。由于我们可以通过覆盖规则对接口进行排序，因此排序后的接口的交集是候选。如果它们都一样好，我说它们都不是最好的。如果不是这样，那么最好的必须覆盖其他之一；并且因为它们是排序的，所以这种关系应该存在于数组中最右边的两个接口中，以表示有一个最好的共同接口是最具体的。

* * *

代码可以通过使用来简化`Linq`；但在我的场景中，我应该尽可能减少对引用和命名空间的要求..

*   **代码**

    ```
    using System;

    public static class TypeExtensions {
        static int CountOverlapped<T>(T[] ax, T[] ay) {
            return IntersectPreserveOrder(ay, ax).Length;
        }

        static int CountOccurrence(Type[] ax, Type ty) {
            var a = Array.FindAll(ax, x => Array.Exists(x.GetInterfaces(), tx => tx.Equals(ty)));
            return a.Length;
        }

        static Comparison<Type> GetCoverageComparison(Type[] az) {
            return (tx, ty) => {
                int overlapped, occurrence;
                var ay = ty.GetInterfaces();
                var ax = tx.GetInterfaces();

                if(0!=(overlapped=CountOverlapped(az, ax).CompareTo(CountOverlapped(az, ay)))) {
                    return overlapped;
                }

                if(0!=(occurrence=CountOccurrence(az, tx).CompareTo(CountOccurrence(az, ty)))) {
                    return occurrence;
                }

                return 0;
            };
        }

        static T[] IntersectPreserveOrder<T>(T[] ax, T[] ay) {
            return Array.FindAll(ax, x => Array.FindIndex(ay, y => y.Equals(x))>=0);
        }

        /*
        static T[] SubtractPreserveOrder<T>(T[] ax, T[] ay) {
            return Array.FindAll(ax, x => Array.FindIndex(ay, y => y.Equals(x))<0);
        }

        static Type[] GetTypesArray(Type typeNode) {
            if(null==typeNode) {
                return Type.EmptyTypes;
            }

            var baseArray = GetTypesArray(typeNode.BaseType);
            var interfaces = SubtractPreserveOrder(typeNode.GetInterfaces(), baseArray);
            var index = interfaces.Length+baseArray.Length;
            var typeArray = new Type[1+index];
            typeArray[index]=typeNode;
            Array.Sort(interfaces, GetCoverageComparison(interfaces));
            Array.Copy(interfaces, 0, typeArray, index-interfaces.Length, interfaces.Length);
            Array.Copy(baseArray, typeArray, baseArray.Length);
            return typeArray;
        }
        */

        public static Type[] GetInterfaces(this Type x, bool includeThis) {
            var a = x.GetInterfaces();

            if(includeThis&&x.IsInterface) {
                Array.Resize(ref a, 1+a.Length);
                a[a.Length-1]=x;
            }

            return a;
        }

        public static Type FindInterfaceWith(this Type type1, Type type2) {
            var ay = type2.GetInterfaces(true);
            var ax = type1.GetInterfaces(true);
            var types = IntersectPreserveOrder(ax, ay);

            if(types.Length<1) {
                return null;
            }

            Array.Sort(types, GetCoverageComparison(types));
            var type3 = types[types.Length-1];

            if(types.Length<2) {
                return type3;
            }

            var type4 = types[types.Length-2];
            return Array.Exists(type3.GetInterfaces(), x => x.Equals(type4)) ? type3 : null;
        }

        public static Type FindBaseClassWith(this Type type1, Type type2) {
            if(null==type1) {
                return type2;
            }

            if(null==type2) {
                return type1;
            }

            for(var type4 = type2; null!=type4; type4=type4.BaseType) {
                for(var type3 = type1; null!=type3; type3=type3.BaseType) {
                    if(type4==type3) {
                        return type4;
                    }
                }
            }

            return null;
        }

        public static Type FindAssignableWith(this Type type1, Type type2) {
            var baseClass = type2.FindBaseClassWith(type1);

            if(null==baseClass||typeof(object)==baseClass) {
                var @interface = type2.FindInterfaceWith(type1);

                if(null!=@interface) {
                    return @interface;
                }
            }

            return baseClass;
        }
    } 
    ```

* * *

有两种递归方法；一个是`FindInterfaceWith`，另一个是一个重要的方法`GetTypesArray`，因为已经有一个名为`GetTypeArray`class的方法`Type`具有不同的用法。

它的工作方式类似于[Akim](https://stackoverflow.com/users/443366/akim)提供的[GetClassHierarchy](https://stackoverflow.com/questions/14107683/how-to-find-the-best-fit-of-common-type-between-two-types/14137582#14137582)方法；但在这个版本中，它构建了一个数组，如：

*   **层次结构的输出**

    ```
    a[8]=System.String
    a[7]=System.Collections.Generic.IEnumerable`1[System.Char]
    a[6]=System.Collections.IEnumerable
    a[5]=System.ICloneable
    a[4]=System.IComparable
    a[3]=System.IConvertible
    a[2]=System.IEquatable`1[System.String]
    a[1]=System.IComparable`1[System.String]
    a[0]=System.Object 
    ```

正如我们所知道的，它们是按特定顺序排列的，这就是它使事情起作用的方式。构建的数组`GetTypesArray`实际上是一棵扁平树。该数组实际上在模型中，如下所示：

*   **图表**

    > ![rFbtV.png](../Images/48072bf85d17d78f8644c21591ca879b.png)
    > 
    > 注意一些接口实现的关系，例如`IList<int>`implements `ICollection<int>`，在这个图中没有用线链接。

返回数组中的接口`Array.Sort`按照`GetCoverageComparison`.

有一些事情要提一下，例如，**多个接口实现**的可能性不仅在某些答案中提到过一次（例如[ [this](https://stackoverflow.com/questions/14107683/how-to-find-the-best-fit-of-common-type-between-two-types/14141496#14141496) ]）；我已经定义了解决它们的方法，它们是：

*   **笔记**

    1.  [GetInterfaces](http://msdn.microsoft.com/en-us/library/system.type.getinterfaces.aspx)方法不按特定顺序返回接口，例如字母顺序或声明顺序。您的代码不能依赖于返回接口的顺序，因为该顺序会有所不同。

    2.  由于递归，基类总是有序的。

    3.  如果两个接口具有相同的覆盖范围，则它们都不会被认为是合格的。

        假设我们定义了这些接口（或者类就可以了）：

        ```
        public interface IDelta {
        }

        public interface ICharlie {
        }

        public interface IBravo: IDelta, ICharlie {
        }

        public interface IAlpha: IDelta, ICharlie {
        } 
        ```

        那么哪个更适合分配`IAlpha`and `IBravo`？在这种情况下，`FindInterfaceWith`只需返回`null`.

在问题[[如何在两种类型（重复）中找到最小的可分配类型？](https://stackoverflow.com/questions/14107683/how-to-find-the-smallest-assignable-type-in-two-types-duplicate)]，我说：

*   **错误的扣除**

    > 如果这个假设是正确的，那么就`FindInterfaceWith`变成了一种多余的方法；`FindInterfaceWith`因为和之间的唯一区别`FindAssignableWith`是：
    > 
    > ***`FindInterfaceWith``null`如果有最好的班级选择，则返回；while`FindAssignableWith`直接返回确切的类。***

但是，现在我们可以看一下方法`FindAssignableWith`，它必须调用其他两个方法是基于最初的假设，矛盾的错误只是神奇地消失了。

* * *

关于排序接口的覆盖率比较规则，在委托`GetCoverageComparison`中，我使用：

*   **双重规则**

    1.  比较源接口数组中的两个接口，每个接口都覆盖源中的其他接口，方法是调用`CountOverlapped`

    2.  如果规则1没有区分它们（返回`0`），则二次排序是调用`CountOccurrence`确定哪个被其他人继承的次数更多，然后比较

        两条规则等价于`Linq`查询：

        ```
        interfaces=(
            from it in interfaces
            let order1=it.GetInterfaces().Intersect(interfaces).Count()
            let order2=(
                from x in interfaces
                where x.GetInterfaces().Contains(it)
                select x
                ).Count()
            orderby order1, order2
            select it
            ).ToArray(); 
        ```

        `FindInterfaceWith`然后将执行可能的递归调用，以确定该接口是否足以被识别为最常见的接口或只是另一个关系，如`IAlpha`and `IBravo`。

关于方法`FindBaseClassWith`，它返回的内容与原始假设不同，即如果任何参数为空，则返回空。它实际上返回另一个传入的参数。

这与问题 [ [`FindBaseClassWith` 方法应该返回什么？](https://stackoverflow.com/questions/14360593/what-should-the-method-findbaseclasswith-return)] 关于`FindBaseClassWith`. 在当前的实现中，我们可以这样称呼它：

*   **方法链**

    ```
    var type=
        typeof(int[])
            .FindBaseClassWith(null)
            .FindBaseClassWith(null)
            .FindBaseClassWith(typeof(char[])); 
    ```

    它会返回`typeof(Array)`；多亏了这个功能，我们甚至可以调用

    ```
    var type=
        typeof(String)
            .FindAssignableWith(null)
            .FindAssignableWith(null)
            .FindAssignableWith(typeof(String)); 
    ```

    我们可能无法用我的实现做的是`FindInterfaceWith`像上面那样调用，因为可能存在 和 之类的`IAlpha`关系`IBravo`。

我已经通过调用`FindAssignableWith`示例在某些情况下测试了代码：

*   **可分配类型的输出**

    ```
    (Dictionary`2, Dictionary`2) = Dictionary`2
    (List`1, List`1) = IList
    (Dictionary`2, KeyValuePair`2) = Object
    (IAlpha, IBravo) = <null>
    (IBravo, IAlpha) = <null>
    (ICollection, IList) = ICollection
    (IList, ICollection) = ICollection
    (Char[], Int32[]) = IList
    (Int32[], Char[]) = IList
    (IEnumerable`1, IEnumerable`1) = IEnumerable
    (String, Array) = Object
    (Array, String) = Object
    (Char[], Int32[]) = IList
    (Form, SplitContainer) = ContainerControl
    (SplitContainer, Form) = ContainerControl 
    ```

    出现`List'1`测试`IList`是因为我`typeof(List<int>)`用`typeof(List<String>)`; 两者`Dictionary'2`都是`Dictionary<String, String>`。对不起，我没有做工作来提供确切的类型名称。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T12:04:04.373

最简单的情况是遍历一个对象的基本类型并检查它们是否可以分配给另一种类型，如下所示：

*   代码

    ```
    public Type GetClosestType(Type a, Type b) {
        var t=a;

        while(a!=null) {
            if(a.IsAssignableFrom(b))
                return a;

            a=a.BaseType;
        }

        return null;
    } 
    ```

如果它们都是类，这将产生`System.Object`两种不相关的类型。我不确定这种行为是否符合您的要求。

对于更高级的情况，我使用了一种名为`IsExtendablyAssignableFrom`.

它可以处理不同的数值类型、泛型、接口、泛型参数、隐式转换、可为空、装箱/拆箱，以及我在实现自己的编译器时遇到的几乎所有类型。

我已将代码上传到单独的 github 存储库 [[此处](https://github.com/impworks/typetools)]，因此您可以在项目中使用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T21:57:53.780

如果你只看基类，问题是微不足道*的*，Impworks 的回答给出了一个解决方案（“迭代一个对象的父对象并检查它们是否可以分配给另一种类型”）。

但是，如果您还想包含接口，则该问题没有唯一的解决方案，因为您会用自己的示例来说明`IDelta`自己`ICharlie`。两个或多个接口很容易同样“好”，因此没有单一的最佳解决方案。可以很容易地构建任意复杂的接口继承图（图），并且从这样的图中很容易看出没有明确定义的“FindAssignableWith”。

此外，C# 中的协变/逆变用于***泛型***类型的变型。让我举个例子。假设我们有

```
type1: System.Func<string>
type2: System.Func<Tuple<int>> 
```

那么当然对于基类，“FindAssignableWith”可能是

```
solutionA: System.MulticastDelegate 
```

但该类型在其类型参数`Func<out T>`中也是*协变*的( ) 。因此，类型`out``T`

```
solutionB: System.Func<System.Object> 
```

也是一种解决方案，因为它`IsAssignableFrom`有两种给定的类型`type1`和`type2`。但同样可以说

```
solutionC: System.Func<System.IComparable> 
```

之所以有效，是因为`string`和`Tuple<>`都是`IComparable`。

所以在一般情况下，没有唯一的解决方案。因此，除非您指定精确的规则来描述您想要什么，否则我们无法提出一种算法来找到您的解决方案。****

# c# - LINQ to Entities 按和 Count() 分组

> ID：14472106
> 
> 赞同：9
> 
> 时间：2013-01-23T03:45:17.233
> 
> 标签：c#, linq, entity-framework, count, group-by

我有以下 LINQ-to-Entities 查询

```
from r in ctx.Rs
join p in ctx.Ps on r.RK equals p.RK
group r by r.QK into gr
select new { QK = (int)gr.Key, Num = gr.Count() } 
```

针对此架构运行

```
Table P  Table R   Table Q
 PK*
 RK ----> RK*
 Text     QK ------> QK*
          Text       Text 
```

如果 Q 中有任何记录而 P 中没有相应记录，则给出此消息：“转换为值类型 'Int32' 失败，因为具体化值为 null。结果类型的泛型参数或查询必须使用可为空的类型。 "

问题是最后一行中的 gr.Count()，但我找不到解决方案。我试图测试 gr 是否为空，但找不到可行的方法。

我已经看到了许多使用 Sum() 而不是 Count() 来解决类似问题的解决方案，但我无法使它们适应我的问题。

我尝试将我的查询更改为类似于[Group and Count in Linq issue](https://stackoverflow.com/questions/12573785/group-and-count-in-linq-issue)中的查询，但我收到了不同的消息。

我还查看[了实体框架](https://stackoverflow.com/questions/13012472/group-and-count-in-entity-framework)（以及其他一些）中的组和计数，但问题有所不同。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-23T04:57:34.517

组键不能为空

```
var results = ctx.Rs.Where(r => r.QK != null)
    .GroupBy(r => r.QK)
    .Select(gr => new { Key = (int)gr.Key, Count = gr.Count() }
    .ToList(); 
```

PS。

1.  大多数情况下，您不需要实体框架中的 'JOIN' 语法。请参阅：[加载相关实体](http://blogs.msdn.com/b/adonet/archive/2011/01/31/using-dbcontext-in-ef-feature-ctp5-part-6-loading-related-entities.aspx)

2.  编写具有描述性意义的变量名称将显着改善您的代码并使其易于理解。可读性在现实世界的生产中确实很重要。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-23T04:53:03.727

我无法阅读您的格式。但是你可以试试：

```
from r in ctx.Rs
join p in ctx.Ps.DefaultIfEmpty() on r.RK equals p.RK
group r by r.QK into gr
select new { QK = (int)gr.Key, Num = gr.Count(x => x.RK != null) } 
```

随着`DefaultIfEmpty`和`x => x.RK != null`正在发生的变化。

# php - 获取另一个数组中不存在的数组

> ID：14472107
> 
> 赞同：0
> 
> 时间：2013-01-23T03:45:25.643
> 
> 标签：php, arrays

例如，我有 2 个数组，如下所示：

```
array1 = (2, 3, 4);
array2 = (1, 2, 3, 4, 5); 
```

我想获取第二个数组的值，其中array1的值在array2中没有找到，所以我们可以得出以下是array3

```
array3 = (1, 5); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T03:47:08.650

区分数组

```
$array3 = array_diff($array2, $array1); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T03:47:17.107

```
$array3 = array_diff($array1, $array2); 
```

# java - java - 如何制作一个更大的数组并从java中的前一个数组中复制信息？

> ID：14472109
> 
> 赞同：-1
> 
> 时间：2013-01-23T03:45:53.300
> 
> 标签：java, arrays

我正在尝试将文本文件中的信息存储到数组中，但该项目要求我们通过创建一个临时数组并在我们读取更多文件以容纳新对象时增加其大小来做到这一点。我怎样才能做到这一点？

```
/**
 * reads a csv data file and returns an array of acquaintances
 * @param path File path of CSV file
 * @return Acquaintances from the file
 */
public static Acquaintance[] read (String path)  {
    //create an array of acquaintances 
    Acquaintance[] acqs = new Acquaintance[0];

    //open the file
    try {
        BufferedReader file = new BufferedReader(new FileReader(path));

        //read the file until the end
        String line;

        while( (line = file.readLine()) != null) {
            // parse the line just read
            String[] parts = line.split(",");

            //create an acquaintance object
            Acquaintance a = new Acquaintance(parts[0], parts[1], Double.parseDouble(parts[2]));

            acqs[0] = a;

            //Add the object to the array

            //(1) create a new Acquaintance array, with one extra element
            Acquaintance[] tmp = new Acquaintance[acqs.length+1];

            //(2) copy all old elements into new
            Acquaintance[] tmp = acqs.clone();

            //(3) assign new Acquaintance object to last element of the array

            //(4) assign new array's address to acqs
            //for loop
        } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-23T04:16:07.640

如果您的老师需要特定的方法，您可能应该在课堂上更仔细地听:-)

您可以像这样增加一个数组：

```
myArray = Arrays.copyOf(myArray,myArray.length+1); 
```

但是看不到 for 循环。您可以使用较旧的 Java 方法来执行此操作，如下所示：

```
Object[] tmpArray = new Object[myArray.length+1];
System.arraycopy(myArray,0,tmpArray,0,myArray.length);
myArray = tmpArray; 
```

同样，不需要 for 循环。唯一的优点是它可以与 Java 1.5 一起运行。在这个问题中，for 循环的唯一“需要”是更有效地执行`System.arraycopy`（由 使用的`Arrays.copyOf`）执行的操作。像这样：

```
Object[] tmpArray = new Object[myArray.length+1];
for(int i=0;i<myArray.length;i++) tmpArray[i]=myArray[i];
myArray = tmpArray; 
```

因此，这个想法是让您练习使用 for 循环，而不是真正以一种好的方式解决问题。

在使用时增加数组的最简单方法是使用某种形式`List`，`java.util.ArrayList`例如，让列表处理存储数据，并在`toArray()`完成后调用列表的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T03:49:15.263

利用

```
Arrays.copyOfRange(T[] original,int from, int to) 
```

复制一个`array`到不同的方法`array`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T04:28:35.807

我将忽略这样一个事实，即为此使用数组的要求毫无意义。您要做的是为您的初始数组分配一个给定的大小，并在您到达存储空间的末尾时将其增加一个设定的数量。通常，只要空间不足，您就会将底层存储增加两倍。下面是一些伪代码：

```
public Acquaintance[] getAcquaitances(final String path) {
    if(path == null) return null;

    int count = 0, initialSize = 16;
    Acquaintance[] temporaryArr = new Acquaintance[initialSize];

    // Open file here

    String line = null;
    while((line = file.readLine()) != null) {
        if(count >= temporaryArr.length) {
            Acquaintance[] switch = temporaryArr;
            temporaryArr = new Acquaintance[switch.length * 2] // increase size by factor of 2
            for(int i = 0; i < switch.length; i++) {
                temporaryArr[i] = switch[i];
            }
         }

         temporaryArr[count] = createAcquantainceFromLine(line);

         ++count;
     }

     Acquaintance[] results = new Acquaintance[count];
     for(int i = 0; i < count; i++) {
         results[i] = temporaryArr[i];
     }

     return results;
} 
```

稍作修改，上面的代码应该适合你。研究它，嵌入它，然后完全忽略它，如果您将来需要扩展数组，请改用[ArrayList](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html)。或[System.arraycopy](http://docs.oracle.com/javase/6/docs/api/java/lang/System.html#arraycopy%28java.lang.Object,%20int,%20java.lang.Object,%20int,%20int%29)。

# neon - 汇编 asm 代码，如何从不同的源点加载数据？

> ID：14472121
> 
> 赞同：0
> 
> 时间：2013-01-23T03:47:27.167
> 
> 标签：neon

我试图改进一些代码，但对我来说似乎很难。我在 Android NDK 上开发。我想改进的 C++ 代码如下：

```
unsigned int test_add_C(unsigned int *x, unsigned int *y) {
unsigned int result = 0;
for (int i = 0; i < 8; i++) {
    result += x[i] * y[i];
}
return result; 
```

}

和霓虹灯代码：

```
unsigned int test_add_neon(unsigned *x, unsigned *y) {

unsigned int result;
__asm__ __volatile__(
        "vld1.32    {d2-d5}, [%[x]] \n\t"
        "vld1.32    {d6-d9}, [%[y]]!    \n\t"
        "vmul.s32   d0, d2, d6      \n\t"
        "vmla.s32   d0, d3, d7      \n\t"
        "vmla.s32   d0, d4, d8      \n\t"
        "vmla.s32   d0, d5, d9      \n\t"
        "vpadd.s32  d0, d0          \n\t"
        "vmov       %0, r4, d0      \n\t"
        :"=r"(result)
        :"r"(x)
        :"d0", "d2", "d3", "d4", "d5", "d6", "d7", "d8", "d9", "r4"
);
return result; 
```

}

但是当我编译代码时，它会提示未定义的命名操作数“x”和“y”。我不知道如何从数组 x 和 y 加载数据。有人可以帮助我吗？多谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T16:15:21.923

内联汇编中的变量名不能被编译器“看到”，并且必须包含在输入/输出操作数列表中。

换行

```
:"r"(x) 
```

到

```
:[x]"r"(x),[y]"r"(y) 
```

将解决您的“未定义命名操作数”问题。但是，我马上看到了更多潜在的问题。

首先，`s32`您的乘法指令的数据类型应该是`u32`，因为您指定`x`和`y`是`unsigned int`类型。

其次，你后期增量`y`但不在`x`行中

```
"vld1.32    {d2-d5}, [%[x]]     \n\t"
"vld1.32    {d6-d9}, [%[y]]!    \n\t" 
```

除非这是故意的，否则最好保持一致。

# android - 在android中你可以在ui线程之外加载资源吗

> ID：14472124
> 
> 赞同：7
> 
> 时间：2013-01-23T03:47:30.330
> 
> 标签：android

我有一个希望是一个简单的问题。我想知道您是否可以安全地从非 ui 线程加载资源。我说的是“res”文件夹中的东西。我只是找不到任何可以明确回答这个问题的文档。SDK 中有很多关于 UI 线程上不允许的内容的提及。我从未见过任何提到以这种方式加载资源的东西。

例如，我可以从后台线程调用此代码吗？ `Bitmap icon = BitmapFactory.decodeResource(context.getResources(), R.drawable.icon_resource);`

如果我删除 context.getResources() 部分并且只做： `Bitmap icon = BitmapFactory.decodeResource(res, R.drawable.icon_resource);`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-23T04:37:42.077

**是的**，你可以！

但这在很大程度上取决于 API 如何处理此类调用。例如。如果 API 需要上下文，那么您可能必须通过保存 UI 上下文并将其传递给后台线程来为其提供正确的上下文。

但是，在设置 UI 组件时，您将不得不返回到 UI 线程。

# .net - 如何将其他解决方案的项目添加到新创建的解决方案中？

> ID：14472126
> 
> 赞同：0
> 
> 时间：2013-01-23T03:47:54.200
> 
> 标签：.net, winforms, c#-4.0, windows-installer, setup-project

我已经创建了一个安装项目 MyApplicationFull，我想添加我的其他两个应用程序 MyApp1 和 MyApp2 的项目，这还应该包括 MyApp1 和 MyApp2 的 setup.exe。我如何将所有项目和 setup.exe 添加到 MyApplicationFull 中，并且在运行时应该安装两个应用程序（MyApp1 和 MyApp2）。

我使用 .net 4.0，WinForms，c#

提前致谢

当我调试时它会抛出这个错误。我认为我所做的程序一定有问题。

```
error C1189: #error :  This file requires _WIN32_WINNT to be #defined at least to 0x0403\. Value 0x0501 or higher is recommended.    c:\program files\microsoft visual studio 10.0\vc\atlmfc\include\atlcore.h ,MyApp2AddInShim 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T03:59:36.940

在解决方案资源管理器中右键单击解决方案，然后选择添加现有项目...

# design-patterns - 工厂对象或产品对象

> ID：14472129
> 
> 赞同：0
> 
> 时间：2013-01-23T03:48:02.077
> 
> 标签：design-patterns, object, factory

我正在了解有关工厂设计模式的更多信息，并遇到了来自 Microsoft 的以下示例（我在 java 中对其进行了重新编码）。[这里的例子](http://msdn.microsoft.com/en-us/library/ee817667.aspx)

简洁版本：

*   一个抽象的 Product 类

*   扩展产品的具体产品类

*   一个抽象的工厂类

*   扩展工厂的具体工厂类

*   装配类

    ```
    public class ProductAssembler {

    public void AssembleProduct(Factory factory)
    {
    Product p = factory.getProduct();
    //do something
    }
    } 
    ```

*   一个客户

    ```
    public static void main(String[] args)
    {
    Factory factory = new ConcreteFactory();
    new ProductAssembler().AssembleProduct(factory);
    } 
    ```

问题：

*   在 main 方法中创建工厂对象而不是产品对象的目的是什么，为什么他们不将产品对象传递给 assembleproduct 方法并更改该方法以使其接受产品而不是工厂？
*   装配类是否也是“客户”的一部分？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T08:11:05.590

`assembleProduct()`in`ProductAssembler`不想处理实例化产品。所以它想把它委托给一个工厂，这样当引入更新种类的产品时，现有的工厂会改变（或添加新的工厂）但`ProductAssembler`不需要改变。代替实例化，`assembleProduct()`调用`factory.getProduct()`.

就工厂模式而言，`ProductAssembler`就是客户端。但是，如果您从应用程序的角度来看，您`main()`是客户端，因此不处理 Product 对象。

# extjs - 商店在 extjs4 中看不到网格上的变化

> ID：14472130
> 
> 赞同：2
> 
> 时间：2013-01-23T03:48:06.763
> 
> 标签：extjs, extjs4, extjs4.1

我正在尝试将更改从网格保存到商店，但我不确定我是否以正确的方式进行操作。

店铺：

```
store_jvhdr = new Ext.data.JsonStore({
        model: 'model_jvhdr',
        proxy: {
            type: 'ajax',
            api: {
                read: './journalservlet?batNbr='+batNbr+'&operation=GET_RECORD',
                update: './journalservlet',
                create: './journalservlet'
            },
            reader: {
                type: 'json',
                root: 'data'
            }
        },
        autoLoad: true,
        listeners: {
            load: function(store, records, successful){
                ...
            }
        }
        }); 
```

这是附加到网格的侦听器

```
listeners: {
   itemdblclick: function(dv, record, item, index, e){
    ...
   },
   edit: function(editor, e){
      console.log('test');
      store_jvdtl.commitChanges();
      store_jvdtl.sync();
   }
} 
```

我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T08:44:27.167

使用`store_jvdtl.sync();`是正确的，但我认为您不想称其`commitChanges()`原因是`commitChanges()`将商店中的记录标记为“干净”，或者更确切地说，删除它们的脏状态。

结果，当您调用`sync()`商店时，不会认为它有任何更改要发送，所以我原以为您不会收到对您的代理 api url 发出的 ajax 请求。

# ruby - 根据字符串的一部分对 Ruby 数组进行排序

> ID：14472131
> 
> 赞同：1
> 
> 时间：2013-01-23T03:48:07.290
> 
> 标签：ruby, arrays, sorting

我有以下数组...

```
[ "global/20130102-001", "global/20131012-001, "country/uk/20121104-001" ] 
```

我需要根据字符串的数字部分对数组进行排序。所以上面的排序如下：

```
[ "country/uk/20121104-001", "global/20130102-001", "global/20130112-001 ] 
```

有没有办法调用 .sort 并忽略每个元素的第一部分，所以我只对数字进行排序？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-23T03:55:02.277

当然，只需使用`sort_by`.

```
 arr.sort_by do |s| 
     s.split('/').last
  end 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-23T03:51:36.010

是的，有办法。你应该使用 a `#sort_by`。它的块被传递一个数组元素并且应该返回元素的“可排序值”。在这种情况下，我们使用正则表达式来查找您的数字字符串（当然，您可以在那里使用另一种逻辑，例如在斜杠上拆分）。

```
arr = [ "global/20130102-001", "global/20131012-001", "country/uk/20121104-001" ]

arr.sort_by {|el| el.scan(/\d{8}-\d{3}/)} # => ["country/uk/20121104-001", "global/20130102-001", "global/20131012-001"] 
```

# python - 突然出现导入错误

> ID：14472132
> 
> 赞同：4
> 
> 时间：2013-01-23T03:48:09.083
> 
> 标签：python, django, git, virtualenv

所以我在 Ubuntu 上设置了一个 virtualenv，安装了所有东西，并让开发站点运行`runserver`. 我自己的所有单元测试都通过了，但是许多 Django 包的单元测试没有通过。

所以我试图`git bisect`弄清楚这一点，检查我最早的提交。我在历史上走得太早了，当开发环境使用不同的数据库引擎、包等时，网站当然无法运行。然后我决定做一些比失败的 Django 单元测试更重要的事情（因为我自己的工作），所以我回到了开发分支中的最新提交。

我`runserver`再次启动，但是这次当我重新加载主页时，我遇到了错误：

```
Traceback:
File "...venv.../local/lib/python2.7/site-packages/django/core/handlers/base.py" in get_response
  101\.                             request.path_info)
File "...venv.../local/lib/python2.7/site-packages/django/core/urlresolvers.py" in resolve
  298\.             for pattern in self.url_patterns:
File "...venv.../local/lib/python2.7/site-packages/django/core/urlresolvers.py" in url_patterns
  328\.         patterns = getattr(self.urlconf_module, "urlpatterns", self.urlconf_module)
File "...venv.../local/lib/python2.7/site-packages/django/core/urlresolvers.py" in urlconf_module
  323\.             self._urlconf_module = import_module(self.urlconf_name)
File "...venv.../local/lib/python2.7/site-packages/django/utils/importlib.py" in import_module
  35\.     __import__(name)
File "...project dir.../myproject/urls.py" in <module>
  2\. import frontpage.views

Exception Type: ImportError at /
Exception Value: No module named views 
```

在我尝试 git bisect 之前，一切都运行良好。但不再是了，至少在我的本地机器上。

所以我四处搜索，并将我`ROOT_URLCONF`的从更改`'myproject.urls'`为 just `'urls'`。现在我收到此错误消息：

```
Traceback:
File "...venv.../local/lib/python2.7/site-packages/django/core/handlers/base.py" in get_response
  101\.                             request.path_info)
File "...venv.../local/lib/python2.7/site-packages/django/core/urlresolvers.py" in resolve
  298\.             for pattern in self.url_patterns:
File "...venv.../local/lib/python2.7/site-packages/django/core/urlresolvers.py" in url_patterns
  328\.         patterns = getattr(self.urlconf_module, "urlpatterns", self.urlconf_module)
File "...venv.../local/lib/python2.7/site-packages/django/core/urlresolvers.py" in urlconf_module
  323\.             self._urlconf_module = import_module(self.urlconf_name)
File "...venv.../local/lib/python2.7/site-packages/django/utils/importlib.py" in import_module
  35\.     __import__(name)

Exception Type: ImportError at /
Exception Value: No module named urls 
```

我用谷歌搜索了一些，并认为也许我的 Python 路径不包括我的项目目录......但是不，当我在项目文件中包含 a 时，它完全`print sys.path`可以`settings.py`！

那么这里有什么问题呢？我正在使用 Django 1.4.3，并使用`python manage.py runserver`. 我发誓我的网站在几个小时前还在工作，而且我已经完成了`git checkout development`很多`git reset`次......我尝试删除 virtualenv，重新创建它，然后重新安装所有 Python 包。我仍然遇到同样的错误。

（另外，我确实激活了 virtualenv，我什至尝试重新启动，以防万一......到目前为止没有运气）

**更新**

按照 Lennart 的建议，我在导入失败之前启动了调试器，发现它`import frontpage`有效，但不是`import frontpage.views`,`frontpage.tests`或其他任何东西。我`__init__.py`的目录中也有一个文件`frontpage`。至此，`sys.path`包含我的项目文件夹就好了...

我也已经包括`frontpage`在我`INSTALLED_APPS`的里面了。

**固定的**

感谢 Lennart，我检查了该`frontpage`模块确实被正确导入。显示了正确的`.pyc`文件，但这让我想知道 pyc 文件是否与我的实际代码不同步。

所以我删除了所有的 pyc 文件，重新启动了服务器，一切又正常了:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T06:32:22.183

有时您会收到 ImportErrors，因为您尝试导入的模块遇到了一些问题。例如，可能`frontpage.view`正在尝试导入具有 SyntaxError 的模块。弄清楚到底发生了什么的最好方法是`import pdb;pdb.set_trace()`在失败的导入之前放置一个并尝试`s`进入导入。

还要确保在导入时`frontpage`获得预期的模块，特别检查 modules`__file__`属性，并且它是`__init__.pyc`你期望的。

# sqlite - 具有布尔值的sqlite？

> ID：14472133
> 
> 赞同：2
> 
> 时间：2013-01-23T03:48:13.733
> 
> 标签：sqlite

我从服务器获取一些文本和布尔值，我需要将它们保存在数据库中。

这是我的桌子。我在 sqlite 中将布尔值定义为 INTEGER，因为没有布尔值。

```
db.execSQL("CREATE TABLE outcomesStore(id INTEGER PRIMARY KEY AUTOINCREMENT , allowgo INTEGER,cod TEXT,youdidComments INTEGER, youwent INTEGER,ByDate INTEGER ," +
                "OnCompletion INTEGER,yourtext TEXT , yourGroup TEXT, yourConsultation INTEGER )"); 
```

我正在从服务器获取这些值。

```
Store[] Storedata = Configuration.getStore();

    booleanvalues[0] = Store[0].isallowgo (); 
```

并像这样插入

```
 helperdatabase = new DatabaseHelperInurseBusiness(this);
            db = helperdatabase.getWritableDatabase();

            ContentValues insertOutcomes = new ContentValues();

            insertOutcomes.put(helperdatabase.ALLOW_GO,booleanvalues[0]);
        db.insert("outcomesStore", helperdatabase.ALLOW_GO,insertOutcomes); 
```

它甚至没有给出任何错误都不起作用。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-01-23T06:41:25.977

实际上，SQLite 确实支持`BOOLEAN`类型，但可能并不完全符合您的期望。

`BOOLEAN`您可以使用标准创建类型列`CREATE TABLE`，然后填充它：

```
CREATE TABLE mytable (name VARCHAR(10), flag BOOLEAN);
INSERT INTO mytable (name, flag) VALUES ('Alice', 0);
INSERT INTO mytable (name, flag) VALUES ('Bob',   1); 
```

然后您可以取回数据，并`BOOLEAN`在执行此操作时使用标准逻辑：

```
SELECT * FROM mytable WHERE flag 
```

或使用不同的`BOOLEAN`表达方式：

```
SELECT * FROM mytable WHERE NOT flag 
```

等等。（[强制性 SQLFiddle](http://sqlfiddle.com/#!5/54ecd/1)）

换句话说，这一切都很好，唯一的问题是您必须使用`0`代替`FALSE`和`1`代替`TRUE`（*这包括尝试从客户端软件设置值*）。请注意，这与其他 SQL 引擎有些相似（例如，PostgreSQL 支持使用`'0'`/ `'1'`、`'f'`/`'t'`和`false`/`true`来设置`FALSE`/`TRUE`客户端软件的值）。

此外，如果您要`BOOLEAN`在数字上下文中使用此字段（例如相加或相乘），它将表现为数字 0 或 1，而在其他 SQL 引擎中添加`BOOLEAN`并`INTEGER`可能由于类型不兼容而导致异常。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-23T08:38:33.257

我得到了解决方案。

感谢 Yaqub 艾哈迈德。

```
 insertOutcomes.put(DatabaseHelperInurseBusiness.ALLOW_GO,storedata.isAllowGo()== true ? 1:0); 
```

# github - Mylyn 的 Emacs 组织模式文件的连接器？

> ID：14472139
> 
> 赞同：4
> 
> 时间：2013-01-23T03:48:53.673
> 
> 标签：github, org-mode, mylyn

是否有类似于 org 模式文件的 mylyn 连接器？

和其他人一样，我是 Mylyn 和 org 模式的粉丝。（[你如何组织你的工作？](https://stackoverflow.com/questions/1661204/how-do-you-organize-your-work)）它们都是有价值的任务管理工具：Eclipse 上的 Mylyn 和 Emacs 上的 Org 模式。Org 模式使用简单的文本文件作为任务存储库，而 Mylyn 可以与各种任务存储库连接，例如 Git 问题列表、Jira（我没有使用过）等。我想从 mylyn 看到的一个功能是它还应该能够使用 org 文件作为任务存储库。

org 文件相对于大多数任务存储库对我来说是有利的，因为我将所有 org 文件同步到 git 存储库中，并且可以从几乎每台安装了 git 和 emacs 的计算机上访问它们，而且还因为 org 模式有这个很好的议程视图，提醒一天要做些什么。

同时我也喜欢保持在 java 项目中使用 mylyn 的好处，因为它管理编程上下文。如果我们有一个 org 模式连接器让 mylyn 将 mylyn 任务与 org 文件同步，那将是完美的。

如果没有这样的 org 文件的 mylyn 连接器，有人可以建议一个与 Mylyn 配合良好的免费任务存储库吗？现在我正在使用 Mylyn 和 github 问题列表。这很好，但它缺少一些基本功能，例如在服务器端跟踪时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T19:32:39.893

我与来自 Tasktop 的人（他们是 mylyn 开发人员）进行了交谈，但不幸的是，目前还没有这样的连接器。

# java - Http post数据登录不起作用？

> ID：14472140
> 
> 赞同：0
> 
> 时间：2013-01-23T03:48:56.570
> 
> 标签：java, android, http, login, http-post

我有一个问题，我想通过安卓设备登录一个网站。我看过很多关于这个的样本，但它对我不起作用。这是我的代码：

```
 DefaultHttpClient httpclient = new DefaultHttpClient();
    HttpPost httppost = new HttpPost("http://www.example.com/login.php");
    httppost.setHeader("Content-Type","text/html");
    ArrayList<BasicNameValuePair> pairs = new ArrayList();
    pairs.add(new BasicNameValuePair("username", "test1"));
    pairs.add(new BasicNameValuePair("password", "pass1"));
    try {
        UrlEncodedFormEntity p_entity = new UrlEncodedFormEntity(pairs, HTTP.UTF_8);

        /** Assign the POST data to the entity */
        httppost.setEntity(p_entity);

        /** Perform the actual HTTP POST */
        HttpResponse response = httpclient.execute(httppost);

        TextView txtView = (TextView)findViewById(R.id.txtMessage);
        txtView.setText(EntityUtils.toString(response.getEntity()));

    } catch (UnsupportedEncodingException uee) {
        uee.printStackTrace();
    } catch (IOException ioe) {
        ioe.printStackTrace();
    } 
```

我不明白 new BasicNameValuePair("username", "test1") 。这里的态度是什么.???

```
<input type="text" name="username" size="25" maxlength="40" value="" class="post" id="autofocus" tabindex="1"/>

<input type="password" name="password" size="25" maxlength="32" class="post" tabindex="2"/> 
```

它只是返回登录页面。它不会将参数传递给 login 。有什么建议么 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T03:52:25.177

`test1`是您的用户名，`pass1`也是您的密码。

如果您从 edittexts 获取用户名和密码，请使用此代码

```
pairs.add(new BasicNameValuePair("username", ed_user.getText().toString()));
pairs.add(new BasicNameValuePair("password", ed_pass.getText().toString())); 
```

你的编辑文本`ed_user`在哪里？`ed_pass`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T18:30:11.080

检查 HTML 页面的源代码并找到以下部分（示例）：

```
<form name="frm" method="post" action="/cgi-bin/websms/index.pl" onSubmit="return validate()"> 
```

现在根据表单的 action="..." 部分在您的程序中更新您的 URL。

# android - 如何使分段搜索栏/滑块如下所示？

> ID：14472144
> 
> 赞同：9
> 
> 时间：2013-01-23T03:49:13.153
> 
> 标签：android, user-interface, slider

我想知道是否有人可以提供提示或来源来实现“圆圈 - 谁在附近？”中使用的以下滑块小部件。这是我第一次遇到这个，我不知道该小部件的确切名称是什么。： ![在此处输入图像描述](../Images/6359df8ea65e503c5cb30de3c61a05d9.png)

![在此处输入图像描述](../Images/977022235d658123d49a1a81802bd8ab.png)

我正在考虑使用自定义搜索栏背景来执行此操作，但是我不确定如何确定搜索栏将在下一步到达的确切像素。因为，这将独立于设备。就我而言，我打算使用图像，而不是指标。

请不要指向此链接[http://www.mokasocial.com/2011/02/create-a-custom-styled-ui-slider-seekbar-in-android/](http://www.mokasocial.com/2011/02/create-a-custom-styled-ui-slider-seekbar-in-android/)因为这不是我想要实现的。他们似乎使用静态图像页脚来显示 D、W、K。我已经尝试过那个应用程序，它甚至没有精确到点或 D、W、K。我看过 AT&T Android Slider Controls，但他们似乎没有提供任何来源。我发现一些 iOS 开发人员实现了这一点，但是我并不真正了解 obj C 代码以便在 Android 中实现这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-26T00:41:03.020

在 @Milanix 使用[https://github.com/karabaralex/android-comboseekbar](https://github.com/karabaralex/android-comboseekbar)上的库回答之后，这是对我有用的最小示例代码：

```
<com.infteh.comboseekbar.ComboSeekBar
        android:id="@+id/seekbar" 
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        custom:color="#000"
        custom:textSize="12sp"
        custom:multiline="false"
        /> 
```

然后在活动中

```
private ComboSeekBar mSeekBar;
List<String> seekBarStep = Arrays.asList("All","1","5","10","20");
mDistanceSeekBar.setAdapter(seekBarStep); 
```

这将使用默认可绘制对象创建一个黑色分段搜索栏。如果您需要添加一些自定义，请 `ComboSeekBar.onDraw()`查看`CustomDrawable.draw()`和`CustomThumbDrawable.draw()`。

这个项目几乎已经完成，但仍然是一个坚实的起点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T03:53:47.480

这只是一个`seekbar`有自定义`thumb`和背景的。您可以使用 9patch 作为背景，这样它就可以很好地填充，只需将它们设置为您的样式

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-01T15:30:22.563

@Giulio 谢谢你的帖子，我和 Ron Eskinder 有同样的问题。我通过删除 xml 文件中的 :"custom:color" 、 "custom:textsize" 和 "custom:multiline" 来修复它。然后在Java中我把这个：

```
mSeekBar =  (ComboSeekBar) findViewById(R.id.seekbar);
List<String> seekBarStep = Arrays.asList("All","1","5","10","20");
mSeekBar.setAdapter(seekBarStep); 
```

希望这会有所帮助

# ruby-on-rails - Rails 3-如何在创建操作中访问传递给新操作的参数

> ID：14472146
> 
> 赞同：1
> 
> 时间：2013-01-23T03:49:19.953
> 
> 标签：ruby-on-rails, ajax, ruby-on-rails-3

所以我有以下链接，它将参数 experience_id 传递给 experience_skills 控制器的新操作。

```
<%= button_to 'Add Skill', new_experience_skill_path(:experience_id => experience.id),:remote => "true", :class => "btn", :id => "new-experience-skill-btn" %> 
```

这很好——即 params[:experience_id] 是正确的值！

问题是我需要在 experience_skills 控制器的创建操作中访问 params[:experience_id] 以使某些 javascript 和 ajax 正常运行。

如何在创建操作中访问传递给新操作的参数？？？

提前谢谢你的帮助。当然，如果你给我正确的答案，我会接受。-亚历克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T04:12:33.357

您尝试在哪个地方访问 params[:experience_id] ？在新的行动或创造行动？

在您的表格中，您可以这样做，例如：

```
 <div class="field">    
       <%= f.hidden_field :experience_id, :value => @instant_obj.id %>
   </div> 
```

然后，在您的控制器中执行新操作

```
 @instant_obj = CLASS.find(params[:experience_id]) 
```

不确定它可以帮助你..

修改：如果没记错的话，只会在New，从我的场景来说，在Message的新控制器中，它需要advertising_id，它是隐藏字段，为了创建Message，它还需要advertising_id，所以，我会做的

```
@advertisement = Advertisement.find(params[:advertisement_id])
@message = Message.new(:advertisement_id => @advertisement.id) 
```

然后当我保存我的消息模型（在创建动作控制器中）时，它将保存所有细节。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T04:04:24.607

如果您在 new 中使用表单，则可以从隐藏字段发送此值。

# c++ - eclipse 和 VC++6：NMAKE 致命错误 U1073

> ID：14472150
> 
> 赞同：1
> 
> 时间：2013-01-23T03:49:59.363
> 
> 标签：c++, eclipse, visual-c++, visual-c++-6

当我尝试配置我`Eclipse`来调试我的`VC6`程序时，我不断收到此错误：

```
NMAKE : fatal error U1073: don't know how to make 'LN_BASE.CPP' 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T14:24:14.827

这是因为 nmake 找不到 src 文件；

我将代码文件从 src 目录移动到项目根目录，然后问题解决了。

# scheme - 如何在 Edwin 中加载文件

> ID：14472153
> 
> 赞同：3
> 
> 时间：2013-01-23T02:42:44.897
> 
> 标签：scheme, mit-scheme, edwin

这可能是一个愚蠢的问题，但我无法终生解决这个问题，也无法在网上找到回答我问题的参考资料。

我一直在使用 Edwin（这是我第一次使用 Emacs）来学习 MIT Opencourseware 6.001 课程，但我不知道如何加载文件。

启动时，我键入 Cx Cf 以创建一个新文件“test.scm”。然后我输入一些 Scheme 代码并输入 Cx Cs 来保存它。

但是，如果我关闭 Edwin，重新启动它，然后键入 Cx Cf test.scm，我只会得到一张白纸。相反，如果我键入 Mx dired，滚动到 test.scm 并按 RET，我仍然会得到一张白纸。该文件在 Windows 中占用了一些空间，所以我认为问题不是保存而是加载（特别是因为我同样无法加载麻省理工学院提供的预制 .scm 文件）

如果这很重要，我正在 Windows 7 上运行 MIT/GNU 方案...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T07:31:16.850

有一个开放的错误报告：[http](http://savannah.gnu.org/bugs/?35250) ://savannah.gnu.org/bugs/?35250 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-04T09:54:39.207

及时回答有点晚了。我就是这样做的：

1.  使用记事本（或其更好的表亲，记事本++）在文件中创建函数
2.  使用 .scm 扩展名保存文件。把它放在你能记住的地方。
3.  以这种方式加载所述文件（不要忘记双 \\）：`(load "c:\\path_to_your_folder\\your_file.scm")`
4.  现在你可以访问你的函数了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-28T14:40:38.860

我已经按照上面的错误报告更改了Edwin的版本，关于Edwin无法打开文件的错误实际上已经消失了。但是，有一个新问题，有时Ctrl键不起作用。因此，如果这个bug对你来说不是很重要，最好的方法还是使用这个新版本。

# android - jQuery mobile 上的对话框处于活动状态时如何使用后退按钮关闭

> ID：14472154
> 
> 赞同：1
> 
> 时间：2013-01-23T03:50:36.733
> 
> 标签：android, cordova, jquery-mobile

我正在使用 PhoneGap 和 jQuery moble 创建一个 Android 应用程序 UI。虽然 jQuery mobile 的对话框以 HTML 格式显示，但当按下设备的返回键时，该应用程序将退出。我想关闭的不是应用程序，而是它的对话框。我应该编程什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T05:59:25.700

你应该倾听`backbutton`事件并采取相应的行动。像这样的东西应该工作：

```
document.addEventListener("backbutton", function() {
  $('your_dialog_element').dialog('close');
}, false); 
```

# jquery - 颜色动画jQuery的问题

> ID：14472158
> 
> 赞同：0
> 
> 时间：2013-01-23T03:51:05.300
> 
> 标签：jquery, jquery-ui, jquery-plugins, jquery-animate, jquery-color

我不太确定这里有什么问题。我已经包含了 jQuery UI，这样我就有了颜色兼容性。

```
<script type="text/javascript" src="<?php bloginfo('template_directory'); ?>/jquery-ui-1.10.0.custom.js"></script> 
```

我之前也尝试过使用 jQuery 颜色插件。

我想更改字体颜色，但我的代码似乎不起作用。我添加了 backgroundColor 来测试它并且有效。

如果您有任何想法为什么它不起作用，请告诉我。

```
$('.menu-item').mouseover(function() {
  $(this).animate({
    color: '#fff',
    backgroundColor: '#000000',
  }, 500, function(     
  ) {
  });
});

$('.menu-item').mouseleave(function() {
  $(this).animate({
    color: '#fff',
    backgroundColor: '#ffffff',
  }, 500, function(
  ) {
  });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T15:23:28.293

我意识到我需要将目标更改为 '.menu-item' 到 '.menu-item a'

一旦我添加了“a”并更改了字体颜色，它就完美地工作了。

感谢 Explosion Pills 和 James Montagne。我也将使用您链接到詹姆斯的那个网站。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T11:52:13.903

它不起作用，因为`mouseleave`您没有将字体颜色设置回黑色，所以它变得不可见试试这个它正在工作。

```
$('div').mouseover(function() {
  $(this).animate({
  color: '#fff',
  backgroundColor: '#000000',
}, 500, function(     
    ) {
   });
});

$('div').mouseleave(function() {
  $(this).animate({
  color: '#000',
  backgroundColor: '#ffffff',
}, 500, function(
  ) {
  });
}); 
```

[检查小提琴](http://jsfiddle.net/hAw5z/1/)

# java - 在 mvel 中使用 ParserContext.addImport 时发生错误

> ID：14472162
> 
> 赞同：0
> 
> 时间：2013-01-23T03:51:29.627
> 
> 标签：java, import, mvel

下面是伪代码

```
public void testImportInContext() {
    ParserContext ctx = new ParserContext();
    ctx.addImport("List", List.class);
    ctx.addImport("ArrayList", ArrayList.class);

    MVEL.eval("List test = null;User u =null", ctx);
} 
```

发生异常

```
 - [Error: could not access: List; in class: org.mvel2.ParserContext]
 - [Near : {... List test = null;User u =null ....}] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T13:34:38.257

因为您只能在编译器中使用此功能。eval() 解释器不支持静态类型分析。eval 的第二个参数用于评估上下文对象。不是 ParserContext。

# ajax - 如何从多个 URL 填充主干模型

> ID：14472169
> 
> 赞同：13
> 
> 时间：2013-01-23T03:52:43.933
> 
> 标签：ajax, backbone.js

我想使用由来自不同 URL 端点的数据组成的单个主干模型。是否可以在单个模型中指定多个 URL？我想避免手动调用 AJAX。

到目前为止，我一直在使用[jQuery Deferreds](http://api.jquery.com/category/deferred-object/)来调用多个 URL 并将它们的结果合成到一个对象中。

到目前为止，我可以想到两种选择：为每个 URL 构建一个带有部分模型的 Backbone 模型，或者使用一个 URL 然后覆盖`Model.fetch()`调用其他 URL。但没有一个让我感到舒服。

（或者我可以尝试贿赂 API 开发人员以提供合并的 URL 端点......）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-23T04:46:38.663

我认为您建议的两种方式都非常合理，但我个人会投票赞成这种`fetch`方法。

使用嵌套模型具有“开箱即用”的优势；换句话说，通过为每个服务器 <=> 客户端映射使用一个模型，您可以避免更改任何`Backbone.Model`方法。但是，这种方法的问题在于您最终会得到多个模型的组合。

如果这仍然有意义（除了数据检索），那么坚持使用嵌套模型。但如果不是这样，您将强制其余代码使用多个模型，而不仅仅是一个模型，以保持您的数据检索代码简单。如果您只想使数据检索代码复杂化并保持其他一切简单，那么您最好覆盖`fetch`.

`fetch`做一件事，那就是通过数据与远程 URL 之间的一对一映射来检索数据。如果您想要一个**一对多**`fetch`的映射，那么只需覆盖默认行为就非常有意义。另外，您知道重写它是相当安全的，`fetch`因为它的名称 is not `_fetch`，并且 Backbone 使用下划线样式将其命名为伪私有方法（例如。`_validate`）。

如果您仍然不喜欢其中任何一种方法，还有另一种选择：`request`事件。最新版本的 Backbone 有一个名为的新事件`request`，只要 a`fetch`启动就会触发。这意味着您可以设置一个事件处理程序来检索辅助数据以响应主数据的请求，如下所示：

```
Backbone.Model.extend({
    initialize: function() {
        this.on('request', this.handleRequest);
        _.bindAll(this, 'handleTriggeredResponse');
    },
    handleRequest: function() {
        $.ajax({url: secondDataUrl, complete: this.handleTriggeredResponse});
        $.ajax({url: tertiaryDataUrl, complete: this.handleTriggeredResponse});
    },
    handleTriggeredResponse: function(response) {
        this.set(response.data);
    },
    url: firstDataUrl
}); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-06-14T01:54:03.193

还有另一种解决方案。使用支持数组或 url 哈希的高级 jquery ajax 执行覆盖默认 Backbone.ajax 函数。一旦所有请求完成，它将并行加载数据并将控制权传递回 Backbone 模型。

```
ajaxForArray = ->
  options = _.first arguments
  $.when.apply $, options.url.map (url) ->
    $.ajax _.merge _.omit(options, ['url', 'success']), {url}
  .done ->
    resp =
      if options.url.length > 1
        _.slice(arguments).map (arg) -> _.first arg
      else
        _.first arguments
    options.success? resp

ajaxForHash = ->
  options = _.first arguments
  pairs = _.transform options.url, (memo, url, key) ->
    memo.push {key, url}
  , []
  $.when.apply $, pairs.map (pair) ->
    $.ajax _.merge _.omit(options, ['url', 'success']), url: pair.url
  .done ->
    resp = _.slice(arguments).reduce (memo, arg, i) ->
      memo[pairs[i].key] = _.first arg
      memo
    , {}
    options.success? resp

Backbone.ajax = ->
  options = _.first arguments
  if _.isArray options.url
    ajaxForArray.apply $, arguments
  else if _.isObject(options.url) and not _.isFunction options.url
    ajaxForHash.apply $, arguments
  else
    $.ajax.apply $, arguments 
```

现在可以使用 URL 数组设置模型，例如

```
class ArrayBasedModel extends Backbone.Model
  url: ['/aoo', '/boo', '/coo']
  parse: (resp) ->
    super _.extend {}, resp[0], resp[1], resp[2] 
```

或网址的哈希值，例如

```
class HashBasedModel extends Backbone.Model
  url: {aoo: '/aoo', boo: '/boo', coo: '/coo'}
  parse: (resp) ->
    super _.extend {}, resp.aoo, resp.boo, resp.coo 
```

因此，当 parse() 被覆盖时，只需添加一些合并所有 ajax 调用结果的基本逻辑，以将其传递给 Backbone.Model.parse()。

毕竟，来自不同 URL 的属性将在一个模型属性中可用。

# bash - 在 bash 脚本中使用 find - 如何处理 find 返回“文件或目录不存在”的情况

> ID：14472171
> 
> 赞同：5
> 
> 时间：2013-01-23T03:52:53.990
> 
> 标签：bash, find

我在我的 bash 脚本中使用 find 命令，就像这样

```
for x in `find ${1} .....`;
do
    ...
done 
```

但是，如何处理脚本的输入是不存在的文件/目录的情况？（即我想在发生这种情况时打印一条消息）

我尝试使用 -d 和 -f，但我遇到问题的情况是 ${1} 是“。” 或者 ”..”

当输入不存在时，它不会进入我的 for 循环。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T03:59:45.493

Bash 为您提供了开箱即用的功能：

```
if [ ! -f ${1} ];
then
    echo "File/Directory does not exist!"
else
    # execute your find...
fi 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T03:56:16.937

Bash 脚本有点奇怪。实施前练习。但是[这个网站](http://tldp.org/LDP/abs/html/fto.html)似乎很好地分解了它。

如果该文件存在，这有效：

```
if [ -e "${1}" ]
then
  echo "${1} file exists."
fi 
```

如果该文件不存在，则此方法有效。注意“！” 表示“不”：

```
if [ ! -e "${1}" ]
then
  echo "${1} file doesn't exist."
fi 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T03:59:06.883

将查找分配给变量并针对该变量进行测试。

```
files=`find ${1} .....`
if [[ "$files" != “file or directory does not exist” ]]; then
  ...
fi 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T04:07:02.167

你可以尝试这样的事情：

```
y=`find . -name "${1}"`
if [ "$y" != "" ]; then
  for x in $y; do
    echo "found $x"
  done
else
  echo "No files/directories found!"
fi 
```

# java - Oracle 提示：返回记录集中新创建的行

> ID：14472173
> 
> 赞同：0
> 
> 时间：2013-01-23T03:53:15.687
> 
> 标签：java, oracle11g

请问是否有提示先返回最新创建的数据？

示例此语句

```
Select * from table where rownum=>5000 
```

有时新创建的行不在结果集中，并且

```
Select * from table where rownum=>5000 order by creation_date 
```

如果按creation_time 或last_modified 排序，则返回时间过长。

所以我可以知道是否有办法提示 ORACLE 至少确保那些新插入的行在结果集中？

它不需要按任何顺序排列，只要新创建的行会出现在结果中即可。

我已经用尽了所有方法来使用 last_modified 或 creation_time 的顺序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T04:22:08.677

首先，索引日期列。

其次，按降序指定 order by，因此最新日期首先出现。

第三，使用第一行提示，因为您实际上只想要快速的第一行，但如果您真的想要 5000 条记录，它不再只是第一行。您可以使用第一行提示传递所需数量的行，这允许 oracle 为您需要的任何数据量选择最佳方法。

第四，确保您拥有表和索引的最新统计信息。

# build - 使用 bitbake 进行分布式编译

> ID：14472175
> 
> 赞同：10
> 
> 时间：2013-01-23T03:53:36.163
> 
> 标签：build, distributed, distcc, bitbake

您知道如何使用分布式 bitbake 编译构建 oe 项目吗？我考虑过distcc。

```
export PATH=~/distcc/bin:$PATH
make -jn CC=linux-gcc 
```

make 将从指向 distcc 的路径调用 linux-gcc。
distcc 会将任务安排到所有已知的主机。
-jn 将创建 n6 个 make 实例。
它工作正常。
但现在我想将 distcc 与 bitbake 一起使用。
我知道如何将 -jn 与 bitbake 一起使用。
只需使用`export PARALLEL_MAKE=-jn`

但是如何将导出`PATH=~/distcc/bin:$PATH`与 bitbake 一起使用。必须站在
. 但是 bitbake 会将（放在 org.openembedded.dev/conf/bitbake.conf 中）放在.`distcc/bin``$PATH`
`$PATH_prepend``$PATH`

或者有人得到了另一种工具来更好地使用 bitbake 进行分布式构建？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-06-18T18:51:22.983

试试冰淇淋：[https ://github.com/icecc/icecream/blob/master/README.md](https://github.com/icecc/icecream/blob/master/README.md)

> 与 distcc 一样，Icecream 从构建中获取编译作业并将其分发到允许并行构建的远程机器之间。但与 distcc 不同的是，Icecream 使用中央服务器将编译作业动态调度到最快的免费服务器。

OpenEmbedded 和 Yocto Project 都支持 Icecream。见[https://git.yoctoproject.org/cgit.cgi/poky/plain/meta/classes/icecc.bbclass](https://git.yoctoproject.org/cgit.cgi/poky/plain/meta/classes/icecc.bbclass)

安装 Icecream，然后将以下内容添加到您的**site.conf**或**local.conf**

```
INHERIT += "icecc"

# This value overrides PARALLEL_MAKE when ICECC is enabled
# This would enable icecc for local and cross
ICECC_PARALLEL_MAKE = "-j 24" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T14:13:09.887

一种更类似于 BitBake 的并行调用构建方式是编辑 local.conf 并取消注释 BB_NUMBER_THREADS 和 PARALLEL_MAKE 并将它们的值设置为您拥有的核心数量的两倍。现在，无论何时调用 BitBake，它都会使用这些值。

# linux - 如何执行流式字符转换？

> ID：14472179
> 
> 赞同：5
> 
> 时间：2013-01-23T03:54:43.220
> 
> 标签：linux, encoding, glibc, iconv

我将数据存储在磁盘中的文件太大而无法存储在主内存中。

我想通过 将这些数据从磁盘流式传输到数据处理管道中`iconv`，如下所示：

```
zcat myfile | iconv -f L1 -t UTF-8 | # rest of the pipeline goes here 
```

不幸的是，我看到 iconv 在内存中缓冲整个文件，直到它在输出任何数据之前用完。这意味着我在一个内存占用最小的管道中的阻塞操作上用尽了我的所有主内存。

我试过这样调用 iconv ：

```
stdbuf -o 0 iconv -f L1 -t UTF-8 
```

但看起来 iconv 自己在内部管理缓冲——这与 Linux 管道缓冲区无关。

我在 Arch Linux 中使用 gblic 2.6 和 2.7 打包的二进制文件看到了这一点，并且我在 Debian 中使用 glibc 2.5 对其进行了复制。

有没有办法解决这个问题？我知道流字符转换并不简单，但我认为这样一个常用的 unix 工具可以在流中工作；处理不适合主内存的文件并不罕见。我是否必须滚动我自己的二进制链接到`libiconv`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T04:40:11.373

考虑带有 iconv_open 的 iconv(3) 调用——将一个简单的 C 例程挂接到这两个调用。从标准输入读取，写入标准输出。阅读此示例：

```
http://www.gnu.org/software/libc/manual/html_node/iconv-Examples.html 
```

此示例明确旨在处理您所描述的内容。- 避免“有状态”等待数据。

# mongodb - 修复数据库需要多少额外空间

> ID：14472182
> 
> 赞同：6
> 
> 时间：2013-01-23T03:55:13.227
> 
> 标签：mongodb

我已经[在 mongodb google group](https://groups.google.com/d/topic/mongodb-user/oi6S-LKfTrs/discussion)中提出了这个问题，但这里没有任何回复。

我们有一个单节点 mongo（版本 2.0.1）实例。即使在每天归档之后，我们的磁盘空间也用完了，因为 mongo 不会将空间返回给操作系统并尝试自己使用它。目前，我们的设置变得非常稀疏，大约 50% 的空间处于空闲状态。您可以看到数据 + 索引大小约为 1170 GB，而存储大小约为 2158 GB，文件大小约为 2368 GB。

```
db.stats()    
{  
    "db" : "default",            
    "collections" : 106,  
    "objects" : 553988389,  
    "avgObjSize" : 2094.1392962010254,  
    "dataSize" : NumberLong("1160128855044"),  
    "storageSize" : NumberLong("2315777236208"),  
    "numExtents" : 1487,  
    "indexes" : 107,  
    "indexSize" : 97914435136,  
    "fileSize" : NumberLong("2543459500032"),  
    "nsSizeMB" : 16,  
    "ok" : 1  
} 
```

我们想要回收空间，因为这不是一个关键任务系统（它就像一个原木倾倒场）可以维持停机时间。我们不想花在创建副本集上，我们也在物理数据中心，因此不希望仅附加额外的磁盘来修复数据库。
我想了解：-
- 修复数据库需要多少可用磁盘空间 - 修复数据库
后我们希望恢复多少空间 - 修复数据库
需要多长时间。
- 如果修复数据库继续运行，那么杀死它并重新启动数据库是否安全。

我们的大部分数据位于单个集合中，因此紧凑集合是否比修复数据库更好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T11:09:18.677

首先，我建议您从 2.0.1 升级。如果不是 2.2.2，至少到 2.0.7。修复需要 2 倍的文件大小。作为文件大小，您最终应该会比您的数据大小略大。需要多长时间取决于系统资源和系统的繁忙程度。Compact 不会释放磁盘空间——它只是在数据文件中进行碎片整理。

在 2.2.x 中，您可以使用 [collMod](http://docs.mongodb.org/manual/reference/command/collMod/)

命令设置 usePowerOf2Sizes 以减少文件碎片。例如插入 800 字节的文档，将分配 1024 字节。删除该文档并插入一个 900 字节的文档，现在 1024 空间可以重复使用。如果没有这个，可能只会分配 850 字节，并且会为 900 字节的文档分配新的可用空间。

杀死repairDatabase应该没问题 - 文件被复制到新位置，碎片整理然后在完成时复制回来，但你必须测试它以确定:)

# html - 无法使用 Bootstrap 或 CSS 更改 nav-pills 背景颜色

> ID：14472183
> 
> 赞同：1
> 
> 时间：2013-01-23T03:55:17.803
> 
> 标签：html, css, twitter-bootstrap

我有一个简单的导航栏固定在我的页面顶部，可以在[这里](http://homegrowndevelopment.com/)看到，但我一生都无法弄清楚如何更改背景颜色。我尝试在 Bootstrap CSS 文件中编辑 a:hover 代码，并使用各种不同的类调用在我自己的自定义 CSS 文件中覆盖它，但仍然没有运气。有人可以帮帮我吗？我知道这一定很简单，我只是难住了。

这是我的导航栏 HTML 代码：

```
 <div class="navbar navbar-fixed-top">
        <div class="navbar-inner">
            <div class="container">
                <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                </a>
                <a class="brand" href="index.html">Homegrown</a>
            <div class="nav-collapse">
                <ul class="nav nav-pills pull-right">
                    <li class="active"><a href="index.html">Home</a></li>
                    <li><a href="index.html">About</a></li>
                    <li><a href="index.html">Contact</a></li>
                </ul><!-- /.nav -->
            </div><!--/.nav-collapse -->
            </div><!-- /.container -->
        </div><!-- /.navbar-inner -->
    </div><!-- /.navbar --> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T03:58:18.190

导航栏背景的样式为`.navbar-inner`. 找出什么元素具有什么风格的一种简单方法是使用调试工具，如 chromes 检查器（在视图 > 开发人员 > 开发人员工具下）或 firebug for firefox（http://getfirebug.com/）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-19T06:09:32.963

如果您使用的是 Sass 或 Less，您可以从 _navs.scss 自定义这些变量：

```
//== Pills
$nav-pills-border-radius:                   $border-radius-base !default;
$nav-pills-active-link-hover-bg:            $component-active-bg !default;
$nav-pills-active-link-hover-color:         $component-active-color !default; 
```

你可以找到对应的less值和文件。

这是文档： http: [//getbootstrap.com/customize/#navbar](http://getbootstrap.com/customize/#navbar)

但是，对于这种自定义，源更容易理解。

# c# - XML 查询不总是拉出结果？

> ID：14472188
> 
> 赞同：1
> 
> 时间：2013-01-23T03:55:52.343
> 
> 标签：c#, xml, linq

我一直在玩弄 XML，试图了解它是如何工作的，但遇到了一个奇怪的问题。有时，当我查询我的 XML 文件时，我没有得到我知道存在的结果。事实上，我唯一得到结果的是第一个条目。以下是一些示例 XML 条目和一个用于查看用户是否存在的小函数。

```
<users>
  <user>
    <username>a</username>
    <firstname>a</firstname>
    <lastname>a</lastname>
  </user>
  <user>
    <username>b</username>
    <firstname>b</firstname>
    <lastname>b</lastname>
  </user>
  <user>
    <username>rawr</username>
    <firstname>a</firstname>
    <lastname>a</lastname>
  </user>
</users> 
```

>

```
private bool FindUser(string username)
{
        XDocument doc = XDocument.Load(filePath);

        var data = from item in doc.Descendants("users")
                   where item.Element("user").Element("username").Value == username.ToLower()
                   select new
                   {
                       usernameEle = item.Element("user").Element("username").Value
                   };

        var p = data.FirstOrDefault();
        if (p != null)
            return true;
        else
            return false;
} 
```

如果我尝试搜索用户“a”，它会返回 true。如果我搜索任何其他用户名，它会返回 false。

我确信有一个简单的解决方案，但它让我望而却步！任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T04:46:01.517

您的查询只是查看第一个`user`元素。您想将其更改为查看所有用户。一种简单的方法就是获取所有“用户”元素，然后根据您的答案测试用户名值。

一个较短的实现是：

```
bool IsUserPresent(string username)
{
    username = username.ToLower();
    var doc = XDocument.Load(filePath);
    return doc
      .Descendants("user")
      .Any(u => u.Element("username").Value == username));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T04:33:37.803

我想出了答案……但我不确定为什么会这样。我对 XML 还是有点陌生​​...

我将“item.Element(“user”).Element(“username”).Value”更改为“item.Element(“username”).Value”。还将“from item in doc.Descendants("users")”更改为“from item in doc.Descendants("user")”

```
var data = from item in doc.Descendants("users")
           where item.Element("user").Element("username").Value == username.ToLower()
           select new
           {
               usernameEle = item.Element("user").Element("username").Value
           }; 
```

到

```
var data = from item in doc.Descendants("user")
           where item.Element("username").Value == username.ToLower()
           select new
           {
               usernameEle = item.Element("username").Value
           }; 
```

它现在能够检索的不仅仅是第一个条目。如果我搜索 b 或 rawr，我会得到适当的结果。

奇怪的。

# machine-learning - 关于 Blei 的 lda-c-dist 的推断结果

> ID：14472190
> 
> 赞同：0
> 
> 时间：2013-01-23T03:56:09.800
> 
> 标签：machine-learning, lda, topic-modeling

我对 lda-c-dist 包的推理结果有疑问。查看推理结果时应该显示多少个单词？例如，如果我将单词数设置为非常大的数 N（假设所有术语的数量为 N），则似乎存在一些单词组。在每组中，词的索引范围从 1 到 N。

我得到的是，假设术语数是 10，我将显示的单词数分配给 10。

```
Topic 0xx:
001
008
009
002
003
007
000
004
005
006 
```

看来，可能是我应该设置显示 3 的单词，而不是 10。

那么，对于一个主题，调用topics.py查看主题时，应该指定多少字呢？

此外，我将使用这个输出来计算两个主题的相似度。所以 ...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T11:13:37.367

实际上，可以有与词汇表一样多的项目。此处显示的只是表示的有限数量的概率降序。

# javascript - Javascript 倒计时关闭窗口

> ID：14472195
> 
> 赞同：0
> 
> 时间：2013-01-23T03:56:56.767
> 
> 标签：javascript

```
$(function(){
      var count = 5;
      countdown = setInterval(function(){
        $(".countdown").html("Closing in " + count + "...");
        if (count == 0) {
          window.close();
        }
        count--;
      }, 1000);
    }); 
```

似乎不适合我。但是，如果我更改`window.close();`为`window.location = "http://google.com";`，它可以工作。倒计时后关闭窗口的任何帮助都会有很大帮助！

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T04:01:30.237

您在哪个浏览器中尝试此操作？通常在打开多个选项卡的浏览器中工作并不那么简单。我使用下面的方法打开和关闭一个窗口（单个选项卡），它对我有用

```
window.open('', '_self', ''); 
window.close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T04:08:26.183

嗯，我在 Chrome 的标签中测试了这个。没用。但是当我弹出我自己的窗口（我的应用程序会这样做），然后在那个窗口中触发这段代码时，它就可以工作了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T04:21:31.857

您不能关闭不是用 window.open() 创建的窗口。

你想去一些随机的网站，突然你的浏览器就关闭了吗？大多数人不希望这样，因此浏览器开发人员会阻止它发生。有一些黑客可以工作，但大多数时候浏览器会修复这些黑客并且它们停止工作。

如果您想在公司环境中控制它，您可以随时让用户在信息亭模式下运行他们的浏览器。

# c++ - 没有头文件的 C++ 函数

> ID：14472196
> 
> 赞同：3
> 
> 时间：2013-01-23T03:57:06.193
> 
> 标签：c++, function, header-files

独立的 C++ 函数是否需要头文件和代码文件？

我正在编写一些 C++ 函数，这些函数使用我的其他一些 C++ 类，但它们本身不属于某个类。它们打算在 dll 中编译，所以我想知道是否有必要在单独的头文件中声明它们，或者我是否可以/应该将声明放在 .cc 文件中。

也许这只是不好的做法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T04:03:36.703

头文件很有用，因为它能够让其他源文件知道在不同翻译单元中声明的函数。

编译器需要这样做才能检查您调用的内容对于类型检查器是否正确。但必要性来自声明本身，而不是来自头文件的存在。

对于 DLL，如果我没记错的话，你不会因为在使用它们时无论如何都要声明函数的签名而被迫这样做，例如。

```
extern C __declspec(dllimport) void foo(); 
```

当然，这意味着无论如何您都需要转发声明它们，因此我认为拥有 DLL 的头文件没有任何问题，它只会将所有签名放在一起。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T04:00:22.230

如果要在定义它的源文件之外使用函数，则绝对需要声明。最好将声明放在头文件中，以使其保持一致，否则您最终只会重复自己并引入潜在的错误来源。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T04:00:54.697

这不是绝对必要的，但强烈推荐。

将函数声明放在头文件中，将函数定义放在源 (.cc) 文件中。其动机是允许用户（这里是其他程序员）只查看接口而不是实现（因为它可以更改）。此外，它允许其他源文件包含您的头文件并使用您提供的功能。

唯一的例外是静态函数，它们不应该在头文件中声明，因为它们不应该在源文件之外查看或使用。

# java - 在外部存储（SD卡）上写入日志时如何安全使用android-logging-log4j？

> ID：14472198
> 
> 赞同：3
> 
> 时间：2013-01-23T03:57:08.363
> 
> 标签：java, android, logging, log4j, sd-card

作为一个长期使用 log4j 的用户，在这个项目[https://code.google.com/p/android-logging-log4j/的帮助下发现 log4j 在 Android 上可用真的很开心](https://code.google.com/p/android-logging-log4j/)

对于我当前的 Android 项目，我将日志写入 logcat 和 SD 卡上的文件，日志文件对我的项目具有很大的价值。

但是最近我的 beta 测试用户的一些反馈显示，如果在我的应用程序写入日志时移除 SD 卡，则会导致强制关闭。

我目前的解决方案是在首次使用 log4j 时检测是否安装了外部存储；如果没有检测到外部存储，我将禁用日志文件输出。

```
import java.io.File;

import org.apache.log4j.Level;

import android.os.Environment;
import de.mindpipe.android.logging.log4j.LogConfigurator;

public class ConfigureLog4j {
    private static boolean configured = false;

    public static void configure() {
        if (configured == true) {
            return;
        }

        String status = Environment.getExternalStorageState();

        final LogConfigurator logConfigurator = new LogConfigurator();

        if (status.equals(Environment.MEDIA_MOUNTED)) {
            logConfigurator.setUseFileAppender(true);
            logConfigurator.setFileName(Environment.getExternalStorageDirectory() + File.separator + "msgant.log");
        } else {
            logConfigurator.setUseFileAppender(false);
        }
        logConfigurator.setRootLevel(Level.DEBUG);
        // Set log level of a specific logger
        logConfigurator.setLevel("org.apache", Level.ERROR);
        logConfigurator.configure();

        configured = true;
    }
} 
```

它远非完美的解决方案，实际上，它不会解决我当前的 log4j 崩溃问题，因为我无法决定用户何时尝试卸载 SD 卡。

或者我应该围绕 log4j 做一个包装，并在那里实现存储检测逻辑？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T05:38:44.460

您可以随时收听 sdcard 事件并相应地重新配置 log4j。

```
<receiver android:name="com.project.events.SdCardEventListener" >
    <intent-filter>
        <action android:name="android.intent.action.MEDIA_REMOVED" />
        <action android:name="android.intent.action.MEDIA_MOUNTED" />
    </intent-filter>
</receiver> 
```

这将允许您在移除卡时重新配置 log4j（您可能可以使用设备内部存储，直到再次插入 SD 卡。

`SdCardEventListener`应该扩展`BroadcastReceiver`，然后根据需要重新配置记录器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T04:00:06.000

我会让 log4j 将日志发送到在您的服务器上侦听的[SocketAppender 。](http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/net/SocketAppender.html)唯一的问题是`If the remote server is down, the logging requests are simply dropped`.

# c# - 计算不同屏幕分辨率下的分离器距离

> ID：14472200
> 
> 赞同：0
> 
> 时间：2013-01-23T03:57:31.480
> 
> 标签：c#, resolution, splitter

我有一个包含以下内容的表格：

1.  分路器控制
2.  第一个面板中的 Datagridview
3.  第二个面板上动态创建的控件

我在做什么，根据所需的控件数量，我根据控件的数量调整分隔器距离，以便所有控件都可见并且空白空间自动减少。在我的屏幕分辨率为 1920x1080 的系统上，它工作正常，但是当我尝试在不同的分辨率上使用它时，分离器距离设置不正确，控件不正确可见。现在我想根据用户屏幕分辨率计算分离器距离。

谁能指导我如何实现这一目标？

# jquery - 在来自 aspx 页面的单独文件中的 OnClientClick 事件上触发 jquery

> ID：14472201
> 
> 赞同：0
> 
> 时间：2013-01-23T03:57:31.760
> 
> 标签：jquery, asp.net

我有一个带有按钮的 aspx 文件：

```
 <asp:TableRow HorizontalAlign="Left">
    <asp:TableCell HorizontalAlign="Center" ColumnSpan="2">
        <asp:Button ID="ButtonSaveUser" runat="server" Text="Register" OnClick="ButtonSaveUser_Click"
            OnClientClick="chkForm()" />
    </asp:TableCell>
</asp:TableRow> 
```

我希望能够将我的 jquery 存储在一个单独的文件中，以使其更清洁、更易于使用。因此，我包含了指向此文件 (Scripts/RegistrationValidation.js) 的链接，如下所示：

```
$(document).ready(function() {

chkForm();   }); 
```

我读到按钮的 OnClientClick 事件应该链接到它所执行的代码。但是，当我在第一行设置断点时，它不会超过等待 DOM 加载的第一行。

顺便说一句，我已经在 IE9 和 Chrome 上尝试过同样的问题。

是 DOM 没有加载吗？我不知道那是什么。

保罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T04:15:21.997

首先，jquery 或 javascrip 是 Web 客户端脚本。也就是说，以下脚本与 C# 服务器脚本是分开的。

```
$(document).ready(function() {

chkForm();   }); 
```

您应该调试脚本并考虑是否加载了 jquery 脚本。例如

```
alert('debug!');
$(document).ready(function() {

alert('loaded!');
});
alert('unload!'); 
```

其次，您可以在firefox或chrome浏览器上学习firebug扩展。该扩展可以帮助您直接查找脚本是否已加载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T04:23:08.343

[虽然 JavaScript 提供了在页面呈现时执行代码的加载事件，但在完全接收到所有资产（例如图像）之前，不会触发此事件。](http://api.jquery.com/ready/)

`$(document).ready(function(){});`仅在 DOM 完全加载时有效。问题是什么？

# php - 将 PHP 多维数组转换为 Postgres HStore

> ID：14472208
> 
> 赞同：1
> 
> 时间：2013-01-23T03:58:15.617
> 
> 标签：php, arrays, postgresql, multidimensional-array, hstore

有没有人想出一个很好的解决方案来将数组转换为 Postgres HStore 值？

Pomms 转换器，[https://github.com/chanmix51/Pomm/blob/master/Pomm/Converter/PgHStore.php](https://github.com/chanmix51/Pomm/blob/master/Pomm/Converter/PgHStore.php)不适用于多维数组。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T19:57:13.907

如果您有兴趣将 PHP 数组转换为 PostgreSQL Hstore 数组（数据类型：hstore[]），那么[PHPG 的 Utils](https://github.com/JDBurnZ/PHPG/blob/master/phpg_utils.php)类就可以解决问题（免责声明：我是该项目的维护者）：

**关联数组的 PHP 数组到 PostgreSQL Hstore 数组：**

```
<?php
include 'phpg_utils.php';

$array = array(
  array(
    'name' => 'John',
    'age' => 32
  ),
  array(
    'name' => 'Jane',
    'age' => 28
  )
);

$hstore_array = PHPG_Utils::hstoreFromPhp($array, True);
print $hstore_array;

// Outputs:
//   {"\"name\"=>\"John\",\"age\"=>\"32\"","\"name\"=>\"Jane\",\"age\"=>\"28\""} 

// You can then directly insert this into the database:
pg_query("INSERT INTO my_table (hstore_arr_col) VALUES ('" . pg_escape_string($hstore_array) . "')"); 
```

**PHP 关联数组到 PostgreSQL Hstore：**

```
$array = array(
    'name' => 'John',
    'age' => 32
);

$hstore = PHPG_Utils::hstoreFromPhp($array);
print $hstore ;

// Outputs:
//   "name"=>"John","age"=>"32"

// You can then directly insert this into the database:
pg_query("INSERT INTO my_table (hstore_col) VALUES ('" . pg_escape_string($hstore) . "')"); 
```

**更新：**

在 PostgreSQL 9.4+ 的世界中，我强烈建议使用 PostgreSQL 的[JSONB](http://www.postgresql.org/docs/9.4/static/datatype-json.html)数据类型而不是 HSTORE。这使您可以轻松地将 PHP 关联数组编码为 JSON，反之亦然。这意味着没有特殊的库和全面的官方支持。

# php - PHP不处理表单上的复选框

> ID：14472209
> 
> 赞同：0
> 
> 时间：2013-01-23T03:58:16.067
> 
> 标签：php, html, forms, checkbox, process

我在表单中添加了两个复选框，设置为在发送时邮寄到电子邮件地址。听起来不错，只是它不处理表单。在我添加复选框之前，一切都处理得很好-

这是`HTML`：

```
<form id="form" method="post" name="validation" action="index.php" onsubmit="received()">
    <fieldset>
        <label for="name">Full Name:</label>
        <input type="text" name="name" title="Enter your name">

        <label for="attending"># Attending:</label>
        <input style="margin-left:190px;" type="text" name="attending" title="Optional">

        <label for="guests">Name of Guest(s): </label>
        <input style="margin-left:370px;" type="text" name="guests">

        <span class="fakelabel">Please Check All that Apply:</span>

        <input type="checkbox" name="prenuptial" value="Yes"><span class="additions">I Will Be Attending the Prenuptial Dinner</span><br>

        <input type="checkbox" name="transportation" value="Yes"><span class="additions">I Will Be Requiring Transportation To and From the Wedding</span>

        <div class="submitcontainer">
            <input type="submit" style="font-size:0;" name="submit" class="submitbutton" id="submit">
    </fieldset>
</form> 
```

过程（我删掉了很多，只留下新添加的区域-）

```
 $name = strip_tags($_POST['name']);
 $attending = strip_tags($_POST['attending']);
 $guests = strip_tags($_POST['guests']);
 $prenuptial = strip_tags($_POST['prenuptial'] == 'Yes');
 $transportation = strip_tags($_POST['transportation'] == 'Yes');
 $to = 'email@yahoo.com'; 
 // Send Message

 mail($email, "RE: Wedding RSVP", $intro, $headers); 
 mail($to, "Wedding RSVP", "Name: {$name}\n Attending: {$attending}\n Guests: {$guests}\n Prenuptial: {$prenuptial}\n Transportation: {$transportation}\n");  
 ?> 
```

***我想知道错误是否在此处的最后一行？***

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T04:04:13.010

为什么`strip_tags`？

这样做，下面的代码将检查您是否选择了复选框。如果您已检查，它会发送`Yes`else `No`。`No`如果您不想发送，请将文本更改为 null。

```
 $name = strip_tags($_POST['name']);
 $attending = strip_tags($_POST['attending']);
 $guests = strip_tags($_POST['guests']);
 $prenuptial = (isset($_POST['prenuptial']) && $_POST['prenuptial'] == 'Yes') ? "Yes" : "No";
 $transportation = (isset($_POST['transportation']) && $_POST['transportation'] == 'Yes') ? "Yes" : "No";
 $to = 'email@yahoo.com'; 
```

See You have given value is `yes`in both the checkbox, 所以当你发布一个 for`yes`将是这两个复选框的值。

```
<input type="checkbox" name="prenuptial" value="Yes"><span class="additions">I Will Be Attending the Prenuptial Dinner</span><br>
<input type="checkbox" name="transportation" value="Yes"><span class="additions">I Will Be Requiring Transportation To and From the Wedding</span> 
```

如果你想要任何其他值，你可以把它。你可以检查使用`isset`

例如 - 你可以像这样添加它

```
<input type="checkbox" name="prenuptial" value="I Will Be Attending the Prenuptial Dinner"><span class="additions">I Will Be Attending the Prenuptial Dinner</span><br>  
<input type="checkbox" name="transportation" value="I Will Be Requiring Transportation To and From the Wedding"><span class="additions">I Will Be Requiring Transportation To and From the Wedding</span> 
```

在php中这样写

```
$prenuptial = '';
if (isset($_POST['prenuptial'])) {
    $prenuptial = $_POST['prenuptial'];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T04:02:27.547

我看到了几件事。首先，您应该检查复选框键是否存在（如果用户不检查它们，它们将丢失）。[您可以看到一种方法来](https://stackoverflow.com/questions/2520952/how-come-checkbox-state-is-not-always-passed-along-to-php-script)确保它们始终存在。

其次，您的父母在错误的位置。你有：

```
strip_tags($_POST['transportation'] == 'Yes'); 
```

你的意思是：

```
strip_tags($_POST['transportation']) == 'Yes'; 
```

`strip_tags`第三，如果您正在检查价值，则不需要。就此而言，您甚至不需要进行平等测试。由于复选框只会在选中时出现，您可以简单地调用：

```
$transpertation = isset($_POST['transportation']); 
```

还应该注意的是，复选框实际上应该只用于传递 0 或 1 而不是特定的字符串值，但大多数浏览器都会让你不使用 value 属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T04:03:45.340

改变这个：

```
$prenuptial = strip_tags($_POST['prenuptial'] == 'Yes');
$transportation = strip_tags($_POST['transportation'] == 'Yes'); 
```

对此：

```
$prenuptial = strip_tags($_POST['prenuptial'] == TRUE);
$transportation = strip_tags($_POST['transportation'] == TRUE); 
```

或对此：

```
$prenuptial = !empty(strip_tags($_POST['prenuptial']));
$transportation = !empty(strip_tags($_POST['transportation'])); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T04:05:57.213

尝试检查复选框是否已设置，然后给它们一个值，即：

```
if(isset($_POST['transportation']) && $_POST['transportation'] == 'Yes')
{
    $transportation = 'Yes';
}
else
{
    $transportation = 'No';
} 
```

# bash - 为什么我不能在我的 gnuplot bash 脚本上执行我的 xlabel 偏移量？

> ID：14472216
> 
> 赞同：0
> 
> 时间：2013-01-23T03:58:59.450
> 
> 标签：bash, gnuplot

我一直在关注有关如何运行 gnuplot 的各种教程，并提出了这个脚本。到目前为止一切顺利，但是当我尝试更改偏移量时，`xlabel`或者`ylabel`我在终端中收到一条消息：

```
gnuplot> set xlabel "Applied Current [mA]" -0.3 
                                           ^
         line 0: ';' expected 
```

我正在绞尽脑汁，所以我什至在互联网上测试了示例 xlabel 和 ylabel 并且出现了相同类型的错误

```
#!/bin/bash

gnuplot << TOEND
# Set the output file
set terminal postscript eps color enhanced 
set output 'fp.eps' 
unset key

set title "Voltage as a Function of Current" 

set noborder 
set xtics axis
set ytics axis

set format x "%2.0f" 
set format y "%2.0f" 

u(x)=m*x+b
fit u(x) "nfp.dat" using 1:2 via m,b

v(x)=m*x+b
fit v(x) "wfp.dat" using 1:2 via m,b

set xzeroaxis linestyle 2 lt 1 lc 0
set xlabel "Applied Current [mA]" -0.3 

set yzeroaxis linestyle  2 lt 1 lc 0
set ylabel "Voltage [mV]" 

set xrange [ -15.00 : 15.00 ]
set yrange [ -20.0 : 20.0 ]

plot  'nfp.dat' using 1:2, \
       v(x), 'wfp.dat' using 1:2, \
      'sfp.dat' using 1:2 

TOEND
convert -density 100 fp.eps fp.png 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T04:39:25.990

我认为你错过了`offset`国旗。尝试：

```
set xlabel "Applied Current [mA]" offset -0.3 
```

# html - 如何在网页上使用 html 和 css 布局tictactoe

> ID：14472217
> 
> 赞同：-1
> 
> 时间：2013-01-23T03:59:01.480
> 
> 标签：html, css

我的问题是在制作 tictactoe 之前我应该​​研究哪些 html 和 css 功能。

![在此处输入图像描述](../Images/95f76d37a69ad435ec94c75e094aa470.png)

我目前正在使用带有丑陋 X 和 O 字符的 CSS 的 HTML 表格：

我的 CSS：

```
table tr td {
    border: 1px solid;
} 
```

我的 HTML：

```
<table>
    <tr>
        <td>O</td><td></td><td></td>
    </tr>
    <tr>
        <td></td><td>X</td><td></td>
    </tr>
    <tr>
        <td></td><td></td><td>X</td>
    </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T04:01:23.647

给你的`td`sa 固定宽度和高度，并将[' `table`s 的边框设置为折叠](https://developer.mozilla.org/en-US/docs/CSS/border-collapse)：

```
table {
    border-collapse: collapse;
}

td {
    border: 5px solid #000;
    width: 100px;
    height: 100px;
    line-height: 100px;
    text-align: center;
} 
```

您还应该调查[`border-radius`](https://developer.mozilla.org/en-US/docs/CSS/border-radius).

* * *

[这是小提琴](http://jsfiddle.net/z8YKw/)，但其余的取决于你。

# regex - 如何从 url 中删除数字并使用 301 重定向

> ID：14472221
> 
> 赞同：1
> 
> 时间：2013-01-23T03:59:24.417
> 
> 标签：regex, .htaccess, redirect, http-status-code-301

我有很多用户个人资料 url 并希望从 url 中删除用户 ID 并使用 .htaccess 重定向 301 例如我当前的 url 是[http://www.example.com/1084-jerome-smith/profile.php](http://www.example.com/1084-jerome-smith/profile.php)并希望重定向这个方式[http://www.example.com/jerome-smith/profile.php](http://www.example.com/jerome-smith/profile.php)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T04:34:34.077

你可以试试这个：

```
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_URI}  ^/(.*)/[\d]+-(.*)$    [NC]
RewriteRule .*  %1/%2  [R=301,L] 
```

它将永久重定向：

`http://www.example.com/1084-jerome-smith/profile.php`

到：

`http://www.example.com/jerome-smith/profile.php`

* * *

将重定向任何具有以下格式的 URL：`http://www.example.com/OptionalFolders/NumericID-anything-anything/anyname.php`，在这种情况下要删除`NumericID`的数字在哪里。`1084`

# java - 玩！2.1-RC2 JavaForms validate() 没有静态引用

> ID：14472223
> 
> 赞同：2
> 
> 时间：2013-01-23T03:59:33.930
> 
> 标签：java, playframework-2.0, playframework-2.1

我一直在玩游戏！2.1 示例按照 ZenTasks 示例设置基本登录系统。我卡住的地方是 JavaForms 部分。我想使用通过 Guice DI 提供的身份验证服务的实例来验证登录请求。

我正在关注[Play20 Sample](https://github.com/playframework/Play20/blob/master/samples/java/zentasks/app/controllers/Application.java#L19)。`authenticate()`此示例在表单提交后请求表单验证时使用静态方法运行身份验证。关于如何在非静态范围内执行此验证步骤的任何想法？

注意：我看过Play！验证插件以及 SecureSocial 插件，但是这些项目对于我现在想做的事情来说太过分了。此外，我对允许在 JavaForms 中进行非静态验证的通用解决方案感兴趣。

**编辑：** 我在这里要求的内容似乎有些混乱。我希望找到的是另一种方法来执行由 Play 发送的表单提交的验证步骤！框架 Form.form() 生成的表单。目前，它要求在不是通过 DI 框架创建的 POJO 实例上调用 validate() 方法。这导致访问授权服务等需要静态引用...

**编辑 2：** 我正在使用的当前解决方案是：

```
public static class AuthServiceFormReference {
    @Inject
    public static Provider<AuthService> authService;        
}

// In my auth module configure()
//...
    requestStaticInjection(AuthController.AuthServiceFormReference.class);
//...

public static class Login {
    @Required
    public String email;
    @Required
    public String password;

    public String validate(){
        if(AuthServiceFormReference.authService.get().authenticateAdmin(email, password) == null) {
            return "Invalid user or password";
        }
        return null;
    }
} 
```

这是一个不错的解决方法，但它仍然依赖于静态注入:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T13:28:36.323

假设您[使用 Spring](https://github.com/guillaumebort/play20-spring-demo)，您可以像在任何其他 Java 程序中一样执行此操作：

```
@Configurable
public class MyModel {
    @Autowired
    transient MyService myService;

    public String validate() { ... }
} 
```

注释使`@Configurable`类能够进行依赖注入。瞬态限定符确保该字段不会被拾取为要保存到数据库中的字段。

在我的一个项目中，Spring 与 Play 2.0/2.1 配合得很好。我不认为模型对象中的依赖注入美观，但如果你需要它，你可以使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T17:16:01.333

Play Framework 不提供`Dependency Injection`开箱即用的功能。但是，您可以将其与 Guice 或 Spring 集成。作为一个懒惰的开发人员，您还可以`Singleton`为该服务创建一个，或使其成为一个插件（因为它可能需要为应用程序启动做准备工作）。然后，您可以获得对您的插件的引用 - `Play.application().plugin(AuthPlugin.class)`。

在这种特殊情况下，您可以在验证方法中进行数据库查找，例如

```
User u = User.find.where().eq("username", username).eq("password`,password).findUnique();
if (u == null)
 return "Error.";
else
 return null; 
```

所以这不是关于 Play 框架，而是一般的 Java 编程。

# api - Magento Rest API Oauth URL 返回 404

> ID：14472228
> 
> 赞同：5
> 
> 时间：2013-01-23T04:00:07.657
> 
> 标签：api, magento, rest, oauth

来自 Magento wiki：

[http://www.magentocommerce.com/api/rest/authentication/oauth_authentication.html#OAuthAuthentication-OAuthProcess](http://www.magentocommerce.com/api/rest/authentication/oauth_authentication.html#OAuthAuthentication-OAuthProcess)

获取 API 令牌时，您首先在以下位置获取未经授权的请求令牌：

www.mystore.com/oauth/initiate

但是，我的代码不起作用，当我在浏览器中浏览到上述 url 时，我得到一个 404。

我将商店代码附加到基本 url（例如 www.mystore.com/en/）我不知道这是否会改变任何东西。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2015-06-30T17:15:51.610

Magento Wiki 有一个错字：

```
$adminAuthorizationUrl = 'http://yourhost/admin/oAuth_authorize'; 
```

应该：

```
$adminAuthorizationUrl = 'http://yourhost/admin/oauth_authorize'; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-12-22T21:10:14.177

我一天中的大部分时间都在为此苦苦挣扎，所以这是一个迟来的贡献，以防它对任何人有所帮助：

Magento 记录的授权 URL admin/oauth_authorize 假定您没有使用自定义 URL 进行管理员访问。“admin”是访问 Magento 仪表板的标准 URL，但许多人出于安全考虑对其进行了更改。如果您已将管理员 URL 更改为“admin”以外的其他内容，请改用它。

IOW 如果您在[https://yoursite.com/foo](https://yoursite.com/foo)访问您的 Magento 仪表板，那么您的授权 URL 是 foo/oauth_authorize。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-11-18T15:01:33.433

我也遇到了问题，以下请求返回了 404 http 状态：

```
http://yourmagentostore.com/oauth/initiate 
```

解决方案非常简单：如果您在同一个域上使用多个商店和/或商店视图，请不要忘记添加映射到商店视图的 url 路径。例如

```
http://yourmagentostore.com/<my-store-view-path>/oauth/initiate 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-06-04T10:44:09.477

我只是有同样的问题。类似的问题不多，也没有解决办法。这很奇怪，因为这似乎是缺少的配置选项“global/request/direct_front_name”，它没有在 Core/Oauth 模块中设置。如果没有这个重要的设置，所有的教程怎么能工作！？

如果没有“oauth”设置，每次调用 /oauth/[controller] 都会导致解析“noRouteAction”（参见 Mage_Core_Controller_Request_Http::setPathInfo() 和 Mage_Core_Controller_Request_Http::isDirectAccessFrontendName($storeCode)），而不是默认的 indexAction。

因此，解决方案是在本地配置或自己的扩展中设置此设置，如下所示

```
<?xml version="1.0"?>
<config>
  [...]
  <global>
    [...] 
    <request>
        [...] 
        <direct_front_name>
            <oauth/>
        </direct_front_name>
    </request>
  </global>
</config> 
```

之后，您至少可以最终获得令牌。我现在正在检查进一步的过程。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-14T16:15:12.007

有一个微妙之处，别忘了 http:// 所以你打电话给商店应该是

`http://yourmagentostore.com/oauth/initiate`

还有更多关于 REST 服务设置的内容，然后在您发布的链接上，它只是一个概述。在您真正获得休息响应之前，商店中有大量配置，当用户未被识别、未经授权或没有适当的 ACL 权限时，您将获得 404 或 500 响应。我想这可以阻止黑客，但要排除故障是一种负担。我一直在走这条路，虽然我使用的是自动化工具，但商店的设置和故障排除是一样的。

看看我的博客，我会用 Magento REST API 的冒险来保持最新状态
干杯！
Rich Borek
[http://magento-simplified.blogspot.com](http://magento-simplified.blogspot.com)

# ruby - 符号的使用和符号表

> ID：14472231
> 
> 赞同：2
> 
> 时间：2013-01-23T04:00:24.363
> 
> 标签：ruby, symbols

1.  在许多 Rails 方法中，符号作为参数传递。我不确定其中一些参数是如何引用其他方法的。换句话说，符号指向另一种方法。我了解符号 like`:something`将如何始终指向相同的内存分配，这与`"something"`. 如果我有一个符号`:x`并且还定义了一个方法`x()`，这是否意味着这两者以某种方式联系在一起？

2.  [一本 Ruby 书籍](http://ruby.railstutorial.org/)描述了符号表的概念：

    > 符号是一个标识符，其值为自身。从广义上讲，这从 Ruby 程序员的角度描述了符号的行为方式。但它并没有告诉你从 Ruby 解释器的角度来看什么是字面上的符号。实际上，符号是指向符号表的指针。符号表是 Ruby 的内部已知标识符列表——例如变量和方法名。

    我偶然发现它是如何指代不同的方法或字符串的。有人可以帮我理解这个符号表以及它与用作方法名称的符号的关系吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-23T04:06:35.827

符号本身与方法没有任何联系。某些方法可以接受符号来动态调用其他方法，使用符号作为它们的名称。观察：

```
class Foo
  def bar
    "called bar"
  end

  def baz
    "called bazzz"
  end

  def invoke m
    send m
  end
end

f = Foo.new
f.invoke :bar # => "called bar"
f.invoke :baz # => "called bazzz"

# since `invoke` just delegates execution to `send`, and `send` can accept strings as well
#   we can pass a string here. 
f.invoke 'baz' # => "called bazzz" 
```

这与中的情况相同

```
before_filter :init_session
validates_presence_of :first_name 
```

和许多其他人

## 编辑：

> 如果我有一个符号：x 并且还定义了一个方法 x()，这是否意味着这两个以某种方式链接？

**不**，它们没有任何联系。您可以放心地忽略有关符号表的那段内容。目前对您来说这是不必要的实现细节。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T04:59:43.820

符号名称和方法名称没有以任何方式链接。符号与字符串的关系最为密切。字符串和符号之间的区别在于，符号是整个 Ruby 解释器的唯一对象，而字符串始终是唯一对象。为了说明这一点，打开 IRB：

```
irb
1.9.3-p362 :001 > "hello".object_id
 => 70162149682220 
1.9.3-p362 :002 > "hello".object_id
 => 70162149699280 
1.9.3-p362 :003 > :hello.object_id
 => 460328 
1.9.3-p362 :004 > :hello.object_id
 => 460328 
1.9.3-p362 :005 > "hello".to_sym.object_id
 => 460328 
```

如您所见，两个包含“hello”的相同字符串具有不同的对象 ID，即使它们包含相同的内容。另一方面，只要符号的内容相同，符号总是具有相同的对象 ID。您可以看到将字符串 "hello" 转换为 symbol 会得到与 symbol 相同的对象 id `:hello`。符号的使用内存效率更高，并且相等比较更快。权衡是符号本质上是内存泄漏，因为一旦定义它，就永远无法从内存中删除它。

正如 Sergio 所说，您可以使用方法调用方法`send`，但`send`使用 Ruby 的强大反射在运行时按名称执行方法，除了方法名称由符号标识之外，它与符号无关。

编辑：如果您对它的工作原理感到好奇，请查看[Ruby Metaprogramming](http://ruby-metaprogramming.rubylearning.com/html/ruby_metaprogramming_2.html)以了解您能够做的事情。但是，要准确了解其工作原理，您需要查看 Ruby 语言的 C 源代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T06:51:41.900

如果您定义了符号 :x 并且还定义了一个方法 x() 并打印 :x.class => Symbol ，x.class =>“返回字段的数据类型，或者如果没有返回则 NilClass”。

这表明符号 :x 和方法 x() 之间没有关系。

用 Symbol 完成的事情也可以用 Ruby 中的 String 完成。

如果您想要一个字符串实例，则使用符号代替字符串意味着您想要一个用于特定字符串的内存位置，显然是为了提高性能。

Ruby 在内部将方法名称保存为符号。

因此，在传递方法名称时最好使用 Symbol ，例如 attr_accessor 和 send ，但这不是强制性的，否则您可以使用 String 。

# algorithm - 如何压缩指针？例如。任意位指针

> ID：14472232
> 
> 赞同：9
> 
> 时间：2013-01-23T04:00:32.133
> 
> 标签：algorithm, pointers, data-structures, compression, octree

我正在编写一个复杂的树数据结构，它存储了很多指针。指针本身占用了大量空间，这就是我期望保存的。

所以我在这里问是否有这方面的例子。例如：对于 64 位数据类型，如果它指向的数据肯定是连续的，我可以使用 32 位或更少的指针吗？

我找到了一篇名为[Transparent Pointer Compression for Linked Data Structures](http://llvm.org/pubs/2005-06-12-MSP-PointerComp.html)的论文，但我认为可能有一个更简单的解决方案。

## 更新：

它是一个[八叉树](https://en.wikipedia.org/wiki/Octree)。一篇关于 GPU 的论文是[GigaVoxels: A Voxel-Based Rendering Pipeline For Efficient Exploration Of Large and detailed Scenes](http://maverick.inria.fr/Publications/2011/Cra11/)，他们在 GPU 上使用 15 位指针

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T04:03:17.170

不使用指针，而是使用数组的索引。`short`如果数组长度小于 65536，则索引可以是 a ，如果小于 2147483648 ，则索引可以是[int32_t 。](http://en.cppreference.com/w/cpp/types/integer)

任意指针实际上可以位于内存中的任何位置，因此无法将其缩短超过几位。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T05:46:03.180

一种选择是编写自定义分配器来分配大块连续内存，然后将节点连续存储在那里。然后，您的每个节点都可以通过一个简单的索引来引用，该索引可以使用简单的指针算法（例如：）映射回内存`node_ptr = mem_block_ptr + node_index`。

很快您就会意识到拥有多个这样的内存块意味着您不再知道特定节点驻留在其中的哪个内存块中。这就是[分区](http://en.wikipedia.org/wiki/Partition_%28database%29)出现的地方。您可以选择水平和/或垂直分区。两者都大大增加了复杂性，并且都各有利弊（参见[[1]](http://www.25hoursaday.com/weblog/2009/01/16/BuildingScalableDatabasesProsAndConsOfVariousDatabaseShardingSchemes.aspx)和[[2]](http://37signals.com/svn/posts/1509-mr-moore-gets-to-punt-on-sharding#)）。

这里的关键是*确保以可预测的方式拆分数据*。

参考：

1.  [构建可扩展的数据库：各种数据库分片方案的优缺点](http://www.25hoursaday.com/weblog/2009/01/16/BuildingScalableDatabasesProsAndConsOfVariousDatabaseShardingSchemes.aspx)
2.  [37signals - 摩尔先生开始关注分片](http://37signals.com/svn/posts/1509-mr-moore-gets-to-punt-on-sharding#)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T05:47:16.337

如果指针的*使用*占用大量空间：

使用指针数组，并用该数组中的索引替换指针。这只是增加了另一个间接性。使用少于 64k 的指针，您需要一个 [ *short* ] 数组 (Linux)

简单的实现

```
#define   MAX_PTR  60000

void *aptr[MAX_PTR];
short nb = 0;

short ptr2index(void *ptr) {
  aptr[nb] = ptr;
  return (short)nb++;
}

void *index2ptr(short index) {
  return aptr[index];
}

... utilization ...

... short next; // in Class

Class *c = new Class();
mystruct->next = ptr2index((void *)c);

...

Class *x = (Class *)index2ptr(otherstruct->next); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-23T04:39:09.013

在某些情况下，您可以简单地使用数组来保存节点。一个二叉树节点 at`arr[i]`会有来自`arr[(i*2)+1]`to的子节点`arr[(i+1)*2]`。如果 i != 0，它的父级将位于`arr[(i-1)/2]`。当然，要计算真正的指针地址，您可以说`&arr[i]`。对于按规范填充的树（例如用于堆的树）来说，这实际上是一种相当常见的实现。

但是，为了让节点自己知道如何找到它的子节点，您可能需要一个索引或指向容器的指针。*（即便如此，只有两件中的一件，你必须做一些跳圈；你真的需要两件才能轻松地*做事*. 但是必须计算而不是记住它，当你试图不记得太多时，你付出的代价有点大。）为了使数据保持合理的空间效率，你必须让节点变笨；使它们基本上成为结构，甚至只是值，并让树类完成所有节点查找工作。它只是分发指向节点的指针，而该指针将是容器计算节点索引所需的全部内容（因此，它的子节点将在哪里）。您还必须将树指针和节点指针都传递给任何想要遍历树的函数。*

 *但是请注意，除非您的树始终接近满（也就是说，除非您的大多数/所有叶节点都在末尾），否则这不会节省太多空间。对于不在树底部（顶部是根）的每个叶节点，您会浪费 ((node size) * (tree size / i)) 字节。

如果您不能指望树已满，或者节点位于某个受限空间中，那么这里没有太多需要优化的地方。树的全部意义在于节点具有指向其子节点的指针；您可以使用数组来伪造它，但必须很容易以某种方式找到节点的子节点才能使树变得有价值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-25T08:04:04.690

处理您的问题的一个非常简单的方法就是使用更少的指针（看起来很傻）？

比较以下两种方法：

```
template <typename T>
struct OctreeNaiveNode {
    T value;
    Point center;
    OctreeNaiveNode* parent;
    std::unique_ptr<OctreeNaiveNode> children[8];
}; // struct OctreeNaiveNode

// sizeof(OctreeNaiveNode) >= sizeof(T) + sizeof(Point) + 9 * sizeof(void*)

template <typename T>
struct OctreeNode {
    T value;
    Point center;
    std::unique_ptr<OctreeNode[]> children; // allocate for 8 only when necessary
}; // struct OctreeNode

// sizeof(OctreeNode) >= sizeof(T) + sizeof(Point) + sizeof(void*) 
```

它是如何工作的：

*   父指针只对简单的迭代器是必需的，如果你的迭代器比节点少得多，那么拥有深度迭代器更经济：即，将一堆父节点保存到根的迭代器。请注意，在 RB-tree 中它不能很好地工作（平衡），但在八叉树中它应该更好，因为分区是固定的。
*   单个子指针：建立一个指向子数组的指针，而不是一个指向子指针的数组。这不仅意味着 1 个动态分配而不是 8 个（堆碎片/开销更少），而且还意味着节点内的 1 个指针而不是 8 个。

高架：

*   `Point = std::tuple<float,float,float>`=> `sizeof(T) + sizeof(Point) >= 64`=> +100%
*   `Point = std::tuple<double,double,double>`=> `sizeof(T) + sizeof(Point) >= 256`=> +25%

因此，与其深入研究压缩指针策略，我建议您首先重新设计数据结构以减少指针/间接。*

# php - Bugzilla：在管理页面中设置时，'auth_env_email' 变量存储在哪里？

> ID：14472233
> 
> 赞同：-2
> 
> 时间：2013-01-23T04:00:36.583
> 
> 标签：php, perl, authentication, bugzilla

使用管理页面，我设置了一个选项，如果用户已经在我们的主站点上运行了会话，则允许他们跳过登录。至少，这是我对环境的理解。不幸的是，我无法再访问管理页面来检查设置的确切名称。

我在文本字段中输入：

> $_SESSION['用户名']

我这样做是因为这是我们主站点上用于电子邮件地址的会话变量的名称。

还有一个下拉框可以选择是使用 Env、CGI 还是两种登录类型。我选择了两者，只是为了安全，直到我知道“Env”配置正确。

保存设置后，我登录到我们的主站点，然后将其打开，直接进入 Bugzilla，产生以下错误：

> Bugzilla 遇到了内部错误。请保存此页面并将其发送至 it@XXXXXXXXXX.com，并附上您在此消息出现时正在执行的操作的详细信息。
> 
> URL：[http](http://bugs.XXXXXXXXXX.com/admin.cgi) ://bugs.XXXXXXXXXX.com/admin.cgi Bugzilla 没有收到来自环境的电子邮件地址。这意味着 '$_SESSION['username']' 环境变量为空或不存在。

然后我尝试转到标准登录页面，但遇到了同样的错误。

接下来，我尝试在文件系统和数据库中找到字符串 '$_SESSION['username']'，但找不到。

我检查了我的 localconfig 文件，它只包含数据库访问凭据。网上有一些关于“数据”目录的讨论，但我似乎没有。有没有人有任何建议我可以如何从中恢复？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T05:22:51.433

我通过编辑对我来说位于“/usr/share/bugzilla/Bugzilla/Auth/Login/Env.pm”的文件解决了这个问题。

我在下面添加了一行：

```
my $env_email = 'peter@XXXXXXX.com'; 
```

紧接在以下行之后：

```
my $env_realname = $ENV{Bugzilla->params->{"auth_env_realname"}} || ''; 
```

*（使用您在 Bugzilla 中注册的电子邮件地址）*

然后我保存了文件并在我刷新 bugzilla 页面时自动登录。然后我更正了设置，然后将我更改的文件恢复为原始状态。

# android - Android java.lang.NumberFormatException：无效的 int：“res/drawable-hdpi/ic_menu_share.png”

> ID：14472235
> 
> 赞同：3
> 
> 时间：2013-01-23T04:01:03.417
> 
> 标签：android, android-actionbar, actionbarsherlock, crash-reports

我们昨天在市场上发布了一个应用程序，我发现它没有安装在 HTC/索尼爱立信手机上。我终于可以拿到一部 HTC 手机并获得以下 logcat，但无法调试和解决问题

设备信息

```
build.board: montblanc
build.bootloader: s1
build.brand: SEMC
build.cpu_abi: armeabi-v7a
build.cpu_abi2: armeabi
build.device: LT22i
build.display: 6.1.1.B.1.54
build.fingerprint: SEMC/LT22i_1261-6006/LT22i:4.0.4/6.1.1.B.1.54/ybt3zw:user/release-keys
build.hardware: st-ericsson
build.host: BuildHost
build.id: 6.1.1.B.1.54
build.manufacturer: Sony
build.model: LT22i
build.product: LT22i_1261-6006
build.radio: unknown
build.serial: CB5121XDB7
build.tags: release-keys
build.time: 1350305827000
build.type: user
build.user: BuildUser
version.codename: REL
version.incremental: ybt3zw
version.release: 4.0.4
version.sdk_int: 15 
```

原木猫

```
01-23 00:09:35.735 E/AndroidRuntime(29152): FATAL EXCEPTION: main
01-23 00:09:35.735 E/AndroidRuntime(29152): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.m7.nomad/com.m7.nomad.SplashActivity}: android.view.InflateException: Binary XML file line #24: Error inflating class android.widget.LinearLayout
01-23 00:09:35.735 E/AndroidRuntime(29152):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1967)
01-23 00:09:35.735 E/AndroidRuntime(29152):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1992)
01-23 00:09:35.735 E/AndroidRuntime(29152):     at android.app.ActivityThread.access$600(ActivityThread.java:127)
01-23 00:09:35.735 E/AndroidRuntime(29152):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1158)
01-23 00:09:35.735 E/AndroidRuntime(29152):     at android.os.Handler.dispatchMessage(Handler.java:99)
01-23 00:09:35.735 E/AndroidRuntime(29152):     at android.os.Looper.loop(Looper.java:137)
01-23 00:09:35.735 E/AndroidRuntime(29152):     at android.app.ActivityThread.main(ActivityThread.java:4448)
01-23 00:09:35.735 E/AndroidRuntime(29152):     at java.lang.reflect.Method.invokeNative(Native Method)
01-23 00:09:35.735 E/AndroidRuntime(29152):     at java.lang.reflect.Method.invoke(Method.java:511)
01-23 00:09:35.735 E/AndroidRuntime(29152):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:823)
01-23 00:09:35.735 E/AndroidRuntime(29152):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:590)
01-23 00:09:35.735 E/AndroidRuntime(29152):     at dalvik.system.NativeStart.main(Native Method)
01-23 00:09:35.735 E/AndroidRuntime(29152): Caused by: android.view.InflateException: Binary XML file line #24: Error inflating class android.widget.LinearLayout
01-23 00:09:35.735 E/AndroidRuntime(29152):     at android.view.LayoutInflater.createView(LayoutInflater.java:606)
01-23 00:09:35.735 E/AndroidRuntime(29152):     at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
01-23 00:09:35.735 E/AndroidRuntime(29152):     at android.view.LayoutInflater.onCreateView(LayoutInflater.java:653)
01-23 00:09:35.735 E/AndroidRuntime(29152):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:678)
01-23 00:09:35.735 E/AndroidRuntime(29152):     at android.view.LayoutInflater.inflate(LayoutInflater.java:466)
01-23 00:09:35.735 E/AndroidRuntime(29152):     at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
01-23 00:09:35.735 E/AndroidRuntime(29152):     at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
01-23 00:09:35.735 E/AndroidRuntime(29152):     at com.android.internal.policy.impl.PhoneWindow.generateLayout(PhoneWindow.java:2712)
01-23 00:09:35.735 E/AndroidRuntime(29152):     at com.android.internal.policy.impl.PhoneWindow.installDecor(PhoneWindow.java:2772)
01-23 00:09:35.735 E/AndroidRuntime(29152):     at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:251)
01-23 00:09:35.735 E/AndroidRuntime(29152):     at android.app.Activity.setContentView(Activity.java:1835)
01-23 00:09:35.735 E/AndroidRuntime(29152):     at com.m7.nomad.SplashActivity.onCreate(SplashActivity.java:46)
01-23 00:09:35.735 E/AndroidRuntime(29152):     at android.app.Activity.performCreate(Activity.java:4465)
01-23 00:09:35.735 E/AndroidRuntime(29152):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
01-23 00:09:35.735 E/AndroidRuntime(29152):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1931)
01-23 00:09:35.735 E/AndroidRuntime(29152):     ... 11 more
01-23 00:09:35.735 E/AndroidRuntime(29152): Caused by: java.lang.reflect.InvocationTargetException
01-23 00:09:35.735 E/AndroidRuntime(29152):     at java.lang.reflect.Constructor.constructNative(Native Method)
01-23 00:09:35.735 E/AndroidRuntime(29152):     at java.lang.reflect.Constructor.newInstance(Constructor.java:417)
01-23 00:09:35.735 E/AndroidRuntime(29152):     at android.view.LayoutInflater.createView(LayoutInflater.java:586)
01-23 00:09:35.735 E/AndroidRuntime(29152):     ... 25 more
01-23 00:09:35.735 E/AndroidRuntime(29152): Caused by: java.lang.NumberFormatException: Invalid int: "res/drawable-hdpi/ic_menu_share.png"
01-23 00:09:35.735 E/AndroidRuntime(29152):     at java.lang.Integer.invalidInt(Integer.java:138)
01-23 00:09:35.735 E/AndroidRuntime(29152):     at java.lang.Integer.parse(Integer.java:375)
01-23 00:09:35.735 E/AndroidRuntime(29152):     at java.lang.Integer.parseInt(Integer.java:366)
01-23 00:09:35.735 E/AndroidRuntime(29152):     at com.android.internal.util.XmlUtils.convertValueToInt(XmlUtils.java:123)
01-23 00:09:35.735 E/AndroidRuntime(29152):     at android.content.res.TypedArray.getInt(TypedArray.java:254)
01-23 00:09:35.735 E/AndroidRuntime(29152):     at android.view.View.<init>(View.java:2969)
01-23 00:09:35.735 E/AndroidRuntime(29152):     at android.view.ViewGroup.<init>(ViewGroup.java:418)
01-23 00:09:35.735 E/AndroidRuntime(29152):     at android.widget.LinearLayout.<init>(LinearLayout.java:178)
01-23 00:09:35.735 E/AndroidRuntime(29152):     at android.widget.LinearLayout.<init>(LinearLayout.java:174)
01-23 00:09:35.735 E/AndroidRuntime(29152):     ... 28 more
01-23 00:09:36.246 E/wpa_supplicant(11724): RX ctrl_iface - hexdump_ascii(len=11):
01-23 00:09:36.246 E/wpa_supplicant(11724):      53 49 47 4e 41 4c 5f 50 4f 4c 4c                  SIGNAL_POLL     
01-23 00:09:39.239 E/wpa_supplicant(11724): RX ctrl_iface - hexdump_ascii(len=11):
01-23 00:09:39.239 E/wpa_supplicant(11724):      53 49 47 4e 41 4c 5f 50 4f 4c 4c                  SIGNAL_POLL     
01-23 00:09:41.161 E/AndroidRuntime(29212): FATAL EXCEPTION: main
01-23 00:09:41.161 E/AndroidRuntime(29212): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.m7.nomad/com.m7.nomad.SplashActivity}: android.view.InflateException: Binary XML file line #24: Error inflating class android.widget.LinearLayout
01-23 00:09:41.161 E/AndroidRuntime(29212):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1967)
01-23 00:09:41.161 E/AndroidRuntime(29212):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1992)
01-23 00:09:41.161 E/AndroidRuntime(29212):     at android.app.ActivityThread.access$600(ActivityThread.java:127)
01-23 00:09:41.161 E/AndroidRuntime(29212):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1158)
01-23 00:09:41.161 E/AndroidRuntime(29212):     at android.os.Handler.dispatchMessage(Handler.java:99)
01-23 00:09:41.161 E/AndroidRuntime(29212):     at android.os.Looper.loop(Looper.java:137)
01-23 00:09:41.161 E/AndroidRuntime(29212):     at android.app.ActivityThread.main(ActivityThread.java:4448)
01-23 00:09:41.161 E/AndroidRuntime(29212):     at java.lang.reflect.Method.invokeNative(Native Method)
01-23 00:09:41.161 E/AndroidRuntime(29212):     at java.lang.reflect.Method.invoke(Method.java:511)
01-23 00:09:41.161 E/AndroidRuntime(29212):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:823)
01-23 00:09:41.161 E/AndroidRuntime(29212):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:590)
01-23 00:09:41.161 E/AndroidRuntime(29212):     at dalvik.system.NativeStart.main(Native Method)
01-23 00:09:41.161 E/AndroidRuntime(29212): Caused by: android.view.InflateException: Binary XML file line #24: Error inflating class android.widget.LinearLayout
01-23 00:09:41.161 E/AndroidRuntime(29212):     at android.view.LayoutInflater.createView(LayoutInflater.java:606)
01-23 00:09:41.161 E/AndroidRuntime(29212):     at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
01-23 00:09:41.161 E/AndroidRuntime(29212):     at android.view.LayoutInflater.onCreateView(LayoutInflater.java:653)
01-23 00:09:41.161 E/AndroidRuntime(29212):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:678)
01-23 00:09:41.161 E/AndroidRuntime(29212):     at android.view.LayoutInflater.inflate(LayoutInflater.java:466)
01-23 00:09:41.161 E/AndroidRuntime(29212):     at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
01-23 00:09:41.161 E/AndroidRuntime(29212):     at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
01-23 00:09:41.161 E/AndroidRuntime(29212):     at com.android.internal.policy.impl.PhoneWindow.generateLayout(PhoneWindow.java:2712)
01-23 00:09:41.161 E/AndroidRuntime(29212):     at com.android.internal.policy.impl.PhoneWindow.installDecor(PhoneWindow.java:2772)
01-23 00:09:41.161 E/AndroidRuntime(29212):     at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:251)
01-23 00:09:41.161 E/AndroidRuntime(29212):     at android.app.Activity.setContentView(Activity.java:1835)
01-23 00:09:41.161 E/AndroidRuntime(29212):     at com.m7.nomad.SplashActivity.onCreate(SplashActivity.java:46)
01-23 00:09:41.161 E/AndroidRuntime(29212):     at android.app.Activity.performCreate(Activity.java:4465)
01-23 00:09:41.161 E/AndroidRuntime(29212):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
01-23 00:09:41.161 E/AndroidRuntime(29212):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1931)
01-23 00:09:41.161 E/AndroidRuntime(29212):     ... 11 more
01-23 00:09:41.161 E/AndroidRuntime(29212): Caused by: java.lang.reflect.InvocationTargetException
01-23 00:09:41.161 E/AndroidRuntime(29212):     at java.lang.reflect.Constructor.constructNative(Native Method)
01-23 00:09:41.161 E/AndroidRuntime(29212):     at java.lang.reflect.Constructor.newInstance(Constructor.java:417)
01-23 00:09:41.161 E/AndroidRuntime(29212):     at android.view.LayoutInflater.createView(LayoutInflater.java:586)
01-23 00:09:41.161 E/AndroidRuntime(29212):     ... 25 more
01-23 00:09:41.161 E/AndroidRuntime(29212): Caused by: java.lang.NumberFormatException: Invalid int: "res/drawable-hdpi/ic_menu_share.png"
01-23 00:09:41.161 E/AndroidRuntime(29212):     at java.lang.Integer.invalidInt(Integer.java:138)
01-23 00:09:41.161 E/AndroidRuntime(29212):     at java.lang.Integer.parse(Integer.java:375)
01-23 00:09:41.161 E/AndroidRuntime(29212):     at java.lang.Integer.parseInt(Integer.java:366)
01-23 00:09:41.161 E/AndroidRuntime(29212):     at com.android.internal.util.XmlUtils.convertValueToInt(XmlUtils.java:123)
01-23 00:09:41.161 E/AndroidRuntime(29212):     at android.content.res.TypedArray.getInt(TypedArray.java:254)
01-23 00:09:41.161 E/AndroidRuntime(29212):     at android.view.View.<init>(View.java:2969)
01-23 00:09:41.161 E/AndroidRuntime(29212):     at android.view.ViewGroup.<init>(ViewGroup.java:418)
01-23 00:09:41.161 E/AndroidRuntime(29212):     at android.widget.LinearLayout.<init>(LinearLayout.java:178)
01-23 00:09:41.161 E/AndroidRuntime(29212):     at android.widget.LinearLayout.<init>(LinearLayout.java:174)
01-23 00:09:41.161 E/AndroidRuntime(29212):     ... 28 more
01-23 00:09:42.252 E/wpa_supplicant(11724): RX ctrl_iface - hexdump_ascii(len=11):
01-23 00:09:42.252 E/wpa_supplicant(11724):      53 49 47 4e 41 4c 5f 50 4f 4c 4c                  SIGNAL_POLL     
01-23 00:09:45.255 E/wpa_supplicant(11724): RX ctrl_iface - hexdump_ascii(len=11):
01-23 00:09:45.255 E/wpa_supplicant(11724):      53 49 47 4e 41 4c 5f 50 4f 4c 4c                  SIGNAL_POLL     
01-23 00:09:48.268 E/wpa_supplicant(11724): RX ctrl_iface - hexdump_ascii(len=11):
01-23 00:09:48.268 E/wpa_supplicant(11724):      53 49 47 4e 41 4c 5f 50 4f 4c 4c                  SIGNAL_POLL     
01-23 00:09:51.261 E/wpa_supplicant(11724): RX ctrl_iface - hexdump_ascii(len=11):
01-23 00:09:51.261 E/wpa_supplicant(11724):      53 49 47 4e 41 4c 5f 50 4f 4c 4c                  SIGNAL_POLL     
01-23 00:09:52.061 E/AndroidRuntime(29272): FATAL EXCEPTION: main
01-23 00:09:52.061 E/AndroidRuntime(29272): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.m7.nomad/com.m7.nomad.SplashActivity}: android.view.InflateException: Binary XML file line #24: Error inflating class android.widget.LinearLayout
01-23 00:09:52.061 E/AndroidRuntime(29272):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1967)
01-23 00:09:52.061 E/AndroidRuntime(29272):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1992)
01-23 00:09:52.061 E/AndroidRuntime(29272):     at android.app.ActivityThread.access$600(ActivityThread.java:127)
01-23 00:09:52.061 E/AndroidRuntime(29272):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1158)
01-23 00:09:52.061 E/AndroidRuntime(29272):     at android.os.Handler.dispatchMessage(Handler.java:99)
01-23 00:09:52.061 E/AndroidRuntime(29272):     at android.os.Looper.loop(Looper.java:137)
01-23 00:09:52.061 E/AndroidRuntime(29272):     at android.app.ActivityThread.main(ActivityThread.java:4448)
01-23 00:09:52.061 E/AndroidRuntime(29272):     at java.lang.reflect.Method.invokeNative(Native Method)
01-23 00:09:52.061 E/AndroidRuntime(29272):     at java.lang.reflect.Method.invoke(Method.java:511)
01-23 00:09:52.061 E/AndroidRuntime(29272):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:823)
01-23 00:09:52.061 E/AndroidRuntime(29272):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:590)
01-23 00:09:52.061 E/AndroidRuntime(29272):     at dalvik.system.NativeStart.main(Native Method)
01-23 00:09:52.061 E/AndroidRuntime(29272): Caused by: android.view.InflateException: Binary XML file line #24: Error inflating class android.widget.LinearLayout
01-23 00:09:52.061 E/AndroidRuntime(29272):     at android.view.LayoutInflater.createView(LayoutInflater.java:606)
01-23 00:09:52.061 E/AndroidRuntime(29272):     at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
01-23 00:09:52.061 E/AndroidRuntime(29272):     at android.view.LayoutInflater.onCreateView(LayoutInflater.java:653)
01-23 00:09:52.061 E/AndroidRuntime(29272):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:678)
01-23 00:09:52.061 E/AndroidRuntime(29272):     at android.view.LayoutInflater.inflate(LayoutInflater.java:466)
01-23 00:09:52.061 E/AndroidRuntime(29272):     at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
01-23 00:09:52.061 E/AndroidRuntime(29272):     at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
01-23 00:09:52.061 E/AndroidRuntime(29272):     at com.android.internal.policy.impl.PhoneWindow.generateLayout(PhoneWindow.java:2712)
01-23 00:09:52.061 E/AndroidRuntime(29272):     at com.android.internal.policy.impl.PhoneWindow.installDecor(PhoneWindow.java:2772)
01-23 00:09:52.061 E/AndroidRuntime(29272):     at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:251)
01-23 00:09:52.061 E/AndroidRuntime(29272):     at android.app.Activity.setContentView(Activity.java:1835)
01-23 00:09:52.061 E/AndroidRuntime(29272):     at com.m7.nomad.SplashActivity.onCreate(SplashActivity.java:46)
01-23 00:09:52.061 E/AndroidRuntime(29272):     at android.app.Activity.performCreate(Activity.java:4465)
01-23 00:09:52.061 E/AndroidRuntime(29272):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
01-23 00:09:52.061 E/AndroidRuntime(29272):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1931)
01-23 00:09:52.061 E/AndroidRuntime(29272):     ... 11 more
01-23 00:09:52.061 E/AndroidRuntime(29272): Caused by: java.lang.reflect.InvocationTargetException
01-23 00:09:52.061 E/AndroidRuntime(29272):     at java.lang.reflect.Constructor.constructNative(Native Method)
01-23 00:09:52.061 E/AndroidRuntime(29272):     at java.lang.reflect.Constructor.newInstance(Constructor.java:417)
01-23 00:09:52.061 E/AndroidRuntime(29272):     at android.view.LayoutInflater.createView(LayoutInflater.java:586)
01-23 00:09:52.061 E/AndroidRuntime(29272):     ... 25 more
01-23 00:09:52.061 E/AndroidRuntime(29272): Caused by: java.lang.NumberFormatException: Invalid int: "res/drawable-hdpi/ic_menu_share.png"
01-23 00:09:52.061 E/AndroidRuntime(29272):     at java.lang.Integer.invalidInt(Integer.java:138)
01-23 00:09:52.061 E/AndroidRuntime(29272):     at java.lang.Integer.parse(Integer.java:375)
01-23 00:09:52.061 E/AndroidRuntime(29272):     at java.lang.Integer.parseInt(Integer.java:366)
01-23 00:09:52.061 E/AndroidRuntime(29272):     at com.android.internal.util.XmlUtils.convertValueToInt(XmlUtils.java:123)
01-23 00:09:52.061 E/AndroidRuntime(29272):     at android.content.res.TypedArray.getInt(TypedArray.java:254)
01-23 00:09:52.061 E/AndroidRuntime(29272):     at android.view.View.<init>(View.java:2969)
01-23 00:09:52.061 E/AndroidRuntime(29272):     at android.view.ViewGroup.<init>(ViewGroup.java:418)
01-23 00:09:52.061 E/AndroidRuntime(29272):     at android.widget.LinearLayout.<init>(LinearLayout.java:178)
01-23 00:09:52.061 E/AndroidRuntime(29272):     at android.widget.LinearLayout.<init>(LinearLayout.java:174)
01-23 00:09:52.061 E/AndroidRuntime(29272):     ... 28 more 
```

**XML 文件（进行更改后）**

```
<ImageView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    android:contentDescription="Splash Screen"
    android:gravity="center"
    android:src="@drawable/splash_logo" /> 
```

**进行更改之前的 XML**

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@color/primary_color"
    android:gravity="center"
    android:orientation="vertical"
    android:textAlignment="center" >

    <ImageView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:contentDescription="Splash Screen"
        android:gravity="center"
        android:src="@drawable/splash_logo" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T04:57:18.483

请在此处发布您的 xml 代码。“由以下原因引起：android.view.InflateException：二进制 XML 文件第 24 行：膨胀类 android.widget.LinearLayout 时出错”。这一行表明第 24 行有问题。

# c# - ZedGraph：XAxis.DateAsOrdinal 上的自定义标签

> ID：14472238
> 
> 赞同：1
> 
> 时间：2013-01-23T04:01:24.250
> 
> 标签：c#, zedgraph

我对这个问题感到困惑：我有一个带有 ZedGraph 对象的 WinForm 绘制一条简单的曲线。它在每个点上方都有一个自定义文本对象“C”。当我将 XAxis.Type 更改为 DateAsOrdinal 时，“C”文本标签消失了。如何使用 DateAsOrdinal 获得“C”？

代码如下，任何人都可以尝试：

```
 private void DrawChart( ZedGraphControl zGraph ) {
        GraphPane pane = zGraph.GraphPane;
        pane.Title.Text = "My Sample Test";
        pane.XAxis.Title.Text = "Date";
        pane.YAxis.Title.Text = "Price";

        // Uncomment below line: all "C" labels disappear!
        //pane.XAxis.Type = AxisType.DateAsOrdinal;

        double x, y;
        PointPairList points = new PointPairList();
        DateTime day = new DateTime( 2012, 1, 1 );

        for ( int i = 0 ; i < 36 ; i++ ) {
            x = day.ToOADate();
            y = 1.5 + Math.Sin( (double)i * 0.2 );
            points.Add( x, y );

            // this label disappears when XAxis.Type = DateAsOrdinal!
            TextObj text = new TextObj( "C", x, y + 0.1, CoordType.AxisXYScale, AlignH.Center, AlignV.Center );
            text.ZOrder = ZOrder.A_InFront;
            text.FontSpec.Border.IsVisible = false;
            pane.GraphObjList.Add( text );

            day = day.AddDays( 1 );   // goto next day (x-coord)
        }

        LineItem curve = pane.AddCurve( "Stock", points, Color.Black, SymbolType.None );

        zGraph.AxisChange();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T11:32:03.923

尝试

> 新的 TextObj("C", i + 1, y + .....

Ordinal XAxis 表示表达式意味着 x 值将运行 1、2、3...

# r - 矩阵横向扩展

> ID：14472243
> 
> 赞同：3
> 
> 时间：2013-01-23T04:01:54.410
> 
> 标签：r, matrix, scale

给定一个 100x100 矩阵，我们要计算一个 20x20 矩阵，它的每个单元格代表原始矩阵的 5x5 平方的平均值。

如何执行？（如果您对此操作有更好的名称，请评论以重命名问题）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T04:20:58.427

这里有几个选项。

直接的方法是`aggregate()`从**raster**包中使用：

```
m <- matrix(1:10000, ncol=100)

library(raster)
r <- raster(m)
as.matrix(aggregate(r, 5))

## aggregate() also supports non-square aggregation windows
as.matrix(aggregate(r, c(20, 50)))
#        [,1]   [,2]   [,3]   [,4]   [,5]
# [1,]  975.5 2975.5 4975.5 6975.5 8975.5
# [2,] 1025.5 3025.5 5025.5 7025.5 9025.5 
```

对于更优雅或更模糊的方法（取决于您的观点），请使用几个矩阵乘法：

```
m <- matrix(1:10000, ncol=100)

mm <- suppressWarnings(matrix(rep(c(1, rep(0, 20)), each=5), ncol=20, nrow=100))
(t(mm) %*% m %*% mm)/25 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-23T04:21:02.800

让我做一个小玩具的例子：

```
R > mat = matrix(1:36, 6,6)
R > mat
     [,1] [,2] [,3] [,4] [,5] [,6]
[1,]    1    7   13   19   25   31
[2,]    2    8   14   20   26   32
[3,]    3    9   15   21   27   33
[4,]    4   10   16   22   28   34
[5,]    5   11   17   23   29   35
[6,]    6   12   18   24   30   36

R > A = matrix(paste(ceiling(col(mat)/2), ceiling(row(mat)/2), sep = "-"), nc = ncol(mat))
R > A
     [,1]  [,2]  [,3]  [,4]  [,5]  [,6] 
[1,] "1-1" "1-1" "2-1" "2-1" "3-1" "3-1"
[2,] "1-1" "1-1" "2-1" "2-1" "3-1" "3-1"
[3,] "1-2" "1-2" "2-2" "2-2" "3-2" "3-2"
[4,] "1-2" "1-2" "2-2" "2-2" "3-2" "3-2"
[5,] "1-3" "1-3" "2-3" "2-3" "3-3" "3-3"
[6,] "1-3" "1-3" "2-3" "2-3" "3-3" "3-3"

R > matrix(tapply(mat, A, mean), 3, 3)
     [,1] [,2] [,3]
[1,]  4.5 16.5 28.5
[2,]  6.5 18.5 30.5
[3,]  8.5 20.5 32.5 
```

这样，对于一个 6*6 的矩阵，计算每个 2*2 的块矩阵，我们得到一个 3*3 的汇总矩阵。

[参考](https://stackoverflow.com/questions/9430950/r-split-matrix-into-arbitrary-number-of-blocks)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T05:08:31.607

派对迟到了，但你来了：

```
# width/height of the sub-squares
side <- 5
# test matrix
test <- outer(1:100,1:100)
# make a selection matrix categorising each cell
select <- matrix(
                  rep(1:(length(test)/(side^2)),each=side),
                  nrow=nrow(test)
                )[,rep(1:(ncol(test)/side),each=side)]
# get the result
matrix(
        sapply(1:(length(test)/(side^2)),function(x) mean(test[select==x])),
        nrow=(ncol(test)/side)
      ) 
```

# c# - 初始化字典 >

> ID：14472245
> 
> 赞同：8
> 
> 时间：2013-01-23T04:02:08.010
> 
> 标签：c#, dictionary

我想知道如何声明/初始化字典？下面一个给出错误。

```
Dictionary<string, List<string>> myD = new Dictionary<string, List<string>>()
{
  {"tab1", MyList }
};

List <string> MyList = new List<string>() { "1" }; 
```

错误是：字段初始值设定项无法引用非静态字段、方法或属性 MyList。它不是在字典之前或之后出现的列表声明。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-03-06T07:59:27.917

```
Dictionary<string, List<string>> myD = new Dictionary<string, List<string>>()
{
    {"tab1", new List<string> { "1" } },
    {"tab2", new List<string> { "1","2","3" } },
    {"tab3", new List<string> { "one","two" } }
}; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-23T04:06:27.437

正如斯科特张伯伦在[回答](https://stackoverflow.com/questions/14472245/initialize-dictionarystring-liststring/14472392#14472392)中所说：

> 如果这些是非静态字段定义，则不能像那样使用字段初始值设定项，您必须将数据放入构造函数中。
> 
> ```
> class MyClass
> {
>     Dictionary<string, List<string>> myD;        
>     List <string> MyList;
> 
>     public MyClass()
>     {
>         MyList = new List<string>() { "1" };
>         myD = new Dictionary<string, List<string>>()
>         {
>           {"tab1", MyList }
>         };
>     }
> } 
> ```

另外对于静态字段

```
private static List<string> MyList = new List<string>()
{    
   "1"
};

private static Dictionary<string, List<string>> myD = new Dictionary<string, List<string>>()
{
    {"tab1", MyList }

}; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-23T04:19:38.963

如果这些是非静态字段定义，则不能像那样使用字段初始值设定项，您必须将数据放入构造函数中。

```
class MyClass
{
    Dictionary<string, List<string>> myD;        
    List <string> MyList;

    public MyClass()
    {
        MyList = new List<string>() { "1" };
        myD = new Dictionary<string, List<string>>()
        {
          {"tab1", MyList }
        };
    }
} 
```

# jquery - jQuery：slideDown()、slideUp() 和 stop()

> ID：14472253
> 
> 赞同：0
> 
> 时间：2013-01-23T04:03:13.723
> 
> 标签：jquery, jquery-slide-effects

我有一个菜单条。我计划：

1.  `slideDown()`**当我将鼠标悬停**在菜单条上时的子菜单（最初是`display: none`DIV ）
***   **鼠标移出**`slideUp`时隐藏子菜单。**

 ****这是代码：

```
<div id="main_menu" onmouseover="$('#submenu').stop(true,false).slideDown();" onmouseout="$('#submenu').stop(true,false).slideUp();">Main Menu</div>
<div id="submenu" style="display: none">Some submenu contents here</div> 
```

我试图实现的是，当我将鼠标悬停在子菜单上时，子菜单保持并停止鼠标移出（`slideUp()`动画。我该如何实现？

注意：鉴于**main_menu**和**sub_menu**没有重叠。

**更新**：这里是[jsFiddle](http://jsfiddle.net/shivanraptor/9KfYr/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T04:15:25.933

一个简单的方法是添加一个父 dom，并将鼠标事件绑定到它。

html

```
<div id="menu">
    <div id="main_menu">Main Menu</div>
    <div id="submenu" style="display: none">Some submenu contents here</div>
</div> 
```

js

```
$('#menu').hover(function () {
    $('#submenu').stop(true, false).slideDown();
},

function () {
    $('#submenu').stop(true, false).slideUp();
}); 
```

这是 jsfiddle 演示。[http://jsfiddle.net/vyDVd/](http://jsfiddle.net/vyDVd/)

**更新**

如果您不想添加父 dom，可以尝试将其作为子菜单`submenu`放入。`main_menu`

我在这里更新你的 jsfiddle 演示 [http://jsfiddle.net/9KfYr/2/](http://jsfiddle.net/9KfYr/2/)

我添加了 2 个 css 属性`#submenu`以保持 UI 不变。

```
position:absolute;
top:30px; 
```

在这里，我建议使用jQuery 提供的[.hover()](http://api.jquery.com/hover/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-12-21T15:09:42.317

实际上，我能够使用纯 css 实现这一点：

```
.header-submenu-item {
	display:none;
}
.header-parent-link:hover + .header-submenu-item,
.header-submenu-item:hover {
	display:block;
}
```

```
<div class="header-parent-link">Item 1</div>
  <div class="header-submenu-item"></div><!-- Empty submenu -->
<div class="header-parent-link">Item 2</div>
  <div class="header-submenu-item">
    <a href="#">Child Item</a>
    <a href="#">Child Item</a>
    <a href="#">Child Item</a>
  </div>
```

它不包括 slideDown() 效果，但非常简单。我想，可以使用其他 css 效果来实现滑动。****

# django - 为什么 collectstatic 不复制我的静态文件？

> ID：14472259
> 
> 赞同：19
> 
> 时间：2013-01-23T04:04:03.717
> 
> 标签：django, static

我有一个`MyApp/static/MyApp`目录。

当我运行时`./manage.py collectstatic`，我希望将 MyApp 目录复制到`STATIC_ROOT`，但事实并非如此。

我也有`DownloadedApp/static/DownloadedApp`，它复制到`STATIC_ROOT fine`.

我错过了什么？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-01-23T04:35:40.220

你的`STATIC_ROOT`,`STATICFILES_FINDERS`和`STATICFILES_DIRS`是`settings.py`什么？

运行时`collectstatic`，默认`STATICFILES_FINDERS`值`django.contrib.staticfiles.finders.FileSystemFinder`将从您在`STATICFILES_DIRS`.

另一个默认`STATICFILES_FINDERS`值`django.contrib.staticfiles.finders.AppDirectoriesFinder`将`/static/`在您的`INSTALLED_APPS`.

找到的所有静态文件都将放在指定的`STATIC_ROOT`目录中。

[查看此链接到 collectstatic 文档](https://docs.djangoproject.com/en/dev/ref/contrib/staticfiles/#django-admin-collectstatic)

[这个链接解释了settings.py中的各种静态设置](https://docs.djangoproject.com/en/dev/ref/settings/#static-files)

您还可以使用`python manage.py findstatic`来查看将查看哪些目录`collectstatic`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-01-13T16:03:23.500

这只是发生在我身上，我不小心将应用程序的静态文件目录放在了 .gitignore 文件中。所以在我的本地机器上收集得很好，但在生产中静态文件实际上丢失了（gitignored）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-08-07T07:14:23.837

只需这样做并使命名约定相同

```
STATIC_URL = '/static/'
STATICFILES_DIRS = [
    os.path.join(BASE_DIR, 'static')
]
STATIC_ROOT = os.path.join(BASE_DIR, 'assets') 
```

**静态**目录包含您的所有项目资产

**当您运行此 cmd 时，**资产目录将自动创建****

 **```
python3 manage.py collectstatic 
```

这会将所有静态文件夹内容复制到资产文件夹中

希望这可以帮助 ：）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-06-02T00:05:47.457

您缺少将要复制静态文件的 STATIC_ROOT，只需在 settings.py 中添加此行

```
STATIC_ROOT=os.path.join(BASE_DIR,'staticfiles') 
```

你的 settings.py 看起来像这样：

```
STATIC_URL = '/static/'
STATIC_ROOT=os.path.join(BASE_DIR,'staticfiles') 
```

#手动添加

```
STATICFILES_DIRS = [
   os.path.join(BASE_DIR, "static")

] 
```

记得在 urls.py 中添加 STAIC_ROOT 路径

```
from django.contrib import admin
from django.urls import path, include
from django.conf import settings
from django.conf.urls.static import static

urlpatterns = [
    path('admin/', admin.site.urls),
    path("" ,include("home.urls")),

]+static(settings.STATIC_URL, document_root=settings.STATIC_ROOT) 
```

毕竟你可以运行：

```
python manage.py collectstatic 
```

它将在您的目录中为您创建一个静态文件文件夹

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-05-07T22:55:44.283

我的印象是比较将基于内容。结果证明是基于日期的。所以，不要在`collecstatic`.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-01-18T20:03:33.353

如果您已经为静态正确设置了所有内容并且正在使用，请`nginx`输入此命令

```
sudo nginx -t 
```

您将看到`error`为什么您的静态文件没有被提供并修复该特定错误

就我而言，我给出了错误的路径`nginx config`

```
location /static {
        root /home/ubuntu/myproject/app/static/;
    } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-10-03T15:16:33.317

这发生在我身上，因为在调查某些日期发生的错误时，更改了我的计算机日期和时间。

因此，它扰乱了诸如 collectstatic 之类的东西，以及我的浏览器历史记录。

不要更改您的计算机日期和时间。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-02-01T20:48:09.430

一个快速的解决方法是：

1.  转到项目的文件目录并将项目的“静态”文件夹重命名为“静态旧”之类的其他名称
2.  在项目目录中创建一个名为“static”的新空文件夹
3.  现在，如果您运行`python manage.py collectstatic`它，它将看到您的静态文件夹中没有任何内容，并将复制所有静态文件。**

# mysql - 在mysql中正确组织数据

> ID：14472268
> 
> 赞同：0
> 
> 时间：2013-01-23T04:04:44.783
> 
> 标签：mysql

所以据我所知，mysql 中没有集合、列表、字典或数组。我想构建一个系统，它有两个核心组件，关于比赛的信息，然后是比赛中的角色列表。如果 mysql 中有列表，那么我会做这样的事情：

```
game_id INT,
characters list<varchar>,
....more data 
```

我希望能够执行的基本查询是这样的：

```
SELECT * FROM games WHERE characters IN LIST(list); 
```

我可能只选择一个字符，或者我可以指定 10 个字符。问题是如何在 mysql 中有效地做到这一点，而不是`WHERE`在`OR`. 角色也没有特定的顺序……但我想我可以根据他们的 ID 对它们进行排序。

我想到的唯一方法是创建包含基本信息的第一个表和仅包含角色 id 和 game_id 的第二个表。

有人对如何使用我可能不知道的一些花哨的 mysql 技巧很好地组织这些数据有任何建议吗？查询也需要很快，因为最终可能会有很多。除非我添加查看/下载计数器，否则读取次数将多于写入次数......比我猜它的写入/更新次数要多于读取次数。

谢谢，我很乐意提供更多信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T04:17:06.180

如果我正确理解你的问题，我能想到两种方法......

**方法 1** ... 添加一个`game_characters`看起来像 ...

```
CREATE TABLE `games_characters` (
  `game_id` int(11) DEFAULT NULL,
  `character_id` int(11) DEFAULT NULL,
  KEY `games` (`game_id`),
  KEY `characters` (`character_id`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8; 
```

...那么查询将类似于...

```
SELECT *
FROM `games` as g
LEFT JOIN `games_characters` as gc
  ON (g.`id` = gc.`game_id`)
WHERE gc.`character_id` IN (12,52,86,23) 
```

**方法 2** ... 使用 LIKE，不太适合大型数据库，但避免了额外的表 ...`characters`记录将包含来自另一个表的一堆 id，`characters`用句点分隔，例如“.23.51.252.75.93”。 . 查询看起来像

```
SELECT *
FROM `games`
WHERE `characters` LIKE '%.23.%'
   OR `characters` LIKE '%.58.%' 
```

您的 CMS 必须解析和重建字符串。

# c++ - C++ 模板隐式使用

> ID：14472272
> 
> 赞同：2
> 
> 时间：2013-01-23T04:05:03.167
> 
> 标签：c++, function, templates, arguments, explicit

我已经定义了这样的功能：

```
template<typename T>
void SwapMe(T *first, T *second)
{
    T tmp = *first;
    *first = *second;
    *second = tmp;
} 
```

然后像这样使用它：

```
SwapMe(&data[i], &data[j]); 
```

如您所见，我没有明确使用，`SwapMe<T>(...);`但它确实有效！
为什么 C++ 标准允许避免显式指定参数的类型？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T04:09:42.103

必要的`T`可以从 的类型***推导***`*first`出来。

仅当编译器不能自动进行推导时，才需要由程序员显式指定。

这种（看似简单但实际上非常复杂）现象被称为[Argument Dependent Name Lookup或 Koenig lookup，以其发明者](http://en.wikipedia.org/wiki/Argument-dependent_name_lookup)[Andrew Koenig](http://en.wikipedia.org/wiki/Andrew_Koenig_%28programmer%29)的名字命名。

# ajax - 使用 jQuery 无限滚动

> ID：14472273
> 
> 赞同：0
> 
> 时间：2013-01-23T04:05:11.863
> 
> 标签：ajax, jquery

该脚本工作正常，但是当内容结束时，页面永远不会到达末尾。当加载的内容结束时，我需要让它停止无限滚动。

另一个问题，我不想立即加载所有的 div，我需要每五分之五加载一次，我该怎么做？

js：

```
if($(window).scrollTop() == $(document).height() - $(window).height())
    {
        $('div#loadmoreajaxloader').show();
        $.ajax({
        url: "loadmore.php",
        success: function(html)
        {
            if(html)
            {
                $("#postswrapper").append(html);
                $('div#loadmoreajaxloader').hide();
            }else
            {
                $('div#loadmoreajaxloader').html('<center>No more posts to show.</center>');
            }
        }
        });
    } 
```

html:

```
<div id="postswrapper">
   <div class="item">content</div>
   ...
   <div id="loadmoreajaxloader" style="display:none;"><center><img src="bigLoader.gif" /></center></div>
</div> 
```

loadmore.php 包含许多`<div class="item">content</div>`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T05:48:10.480

好的，我首先在这里做 2 个假设，即您正在调用使用[滚动侦听](http://api.jquery.com/scroll/)器提供的代码。其次，您可能想稍后调用相同的代码。

要停止它，您需要创建一个标志以便它停止调用（或者如果您以后不想使用它，则取消绑定滚动），要对结果进行分页，您需要创建一个变量来计算您实际显示的页面但您还需要修改处理 ajax 请求的代码，以便它使用我们发送的页面数据。

```
flag = true; //Flag to identify if the code should request more results
page = 1;    //Current page 
$(document).scroll(function(){
    if(flag && ($(window).scrollTop() == $(document).height() - $(window).height()))
            {
            $('div#loadmoreajaxloader').show();
            $.ajax({
            url: "loadmore.php",
        data: {page:page}
            success: function(html)
            {
               if(html)
               {
                   $("#postswrapper").append(html);
                   $('div#loadmoreajaxloader').hide();
                   page++; 
               }else
               {
                   flag = false;
                   $('div#loadmoreajaxloader').html('<center>No more posts to show.</center>');
              }
            }
        });
    }
}); 
```

# java - 按值传递 - 树未删除

> ID：14472275
> 
> 赞同：0
> 
> 时间：2013-01-23T04:05:27.530
> 
> 标签：java, oop, pass-by-reference, pass-by-value

> **可能重复：**
> [Java、按值传递、引用变量](https://stackoverflow.com/questions/498747/java-pass-by-value-reference-variables)

我对 JAVA 按值传递究竟如何与对象一起工作有点困惑。例如，如果我将一个对象作为参数传递给该方法。我知道它的地址是作为值传递的。好的，对象的副本是否保留在传递对象的原始位置表单中，因为如果我在被调用的 API 中创建对对象的新引用并更改其中的某些内容，它不会反映在我的调用者中API。

下面是一段典型的代码，我尝试删除一棵树，但它仍然存在。

```
public class DeleteTree {

public static void main(String[] args) {

    Node root = new Node(5);
    for(int i = 0 ; i < 10 ; i++){
        if(i == 5) continue;
        root.insertNode(i);
    }

    deleteTreeNonRecursive(root);
    System.out.println(root.key);

}

public static void deleteTreeNonRecursive(Node root){

    Queue<Node> q = new LinkedList<Node>();
    q.add(root);
    while(!q.isEmpty()){
        Node temp = q.poll();
        if(temp.leftChild != null)q.add(temp.leftChild);
        if(temp.rightChild != null)q.add(temp.rightChild);
        temp = null;
    }

} 
```

**预期的 O/P：**空指针异常。

**实际 O/P：** 5。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T04:08:57.687

`Java`始终使用按值传递。当涉及到对象引用时，它是传递的引用值。当您传递对象引用时，它是传递的引用值的副本。使用它，您始终可以访问该对象并更改其属性（在适用的情况下），但是将该引用分配给另一个对象或 null 显然不会对调用方法中的原始引用产生任何影响。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T04:10:27.183

在 Java 中，您总是按值传递对对象的引用（它本身已分配到堆上）。不会发生重复，因为您只是在传递指针。

在您的示例中，您只是在设置`temp = null`，但这确实什么也没做，因为 temp 是指向 a 的指针，`Node`但它是函数的局部变量，当您将其设置`null`为原始对象时，根本不会因为您只是在修改值而被触及在不修改被引用对象的情况下进行引用。

要删除树，您只需要这样做：

```
Node root = new Node(5);
    for(int i = 0 ; i < 10 ; i++){
        if(i == 5) continue;
        root.insertNode(i);
    }

root = null; 
```

# emacs - 有什么简单的方法可以让 Org Mode 不逃逸一些字母吗？

> ID：14472282
> 
> 赞同：0
> 
> 时间：2013-01-23T04:06:24.500
> 
> 标签：emacs, org-mode

我不希望 Org Mode 转义一些字母，尤其是对于普通列表。例如，对于以下内容：

1.  测试一个例子

我不希望 Org 模式转义普通列表，而在将其导出为 HTML 时只显示原始文本。

我想我可以通过使用示例、文字和代码块来做到这一点。这意味着在 Org 模式下有以下类型的标签：

```
#+BEGIN_EXAMPLE

#+begin_src emacs-lisp

#+BEGIN_HTML 
```

但这对于一个字母来说太复杂了，我想要像 \ 这样的东西来不逃避普通列表。就是这样的风格：

> \1。例如测试

在 Org 模式中有什么喜欢 \ 的吗？有没有办法做到这一点？

谢谢

水林

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T11:53:55.977

对于这个具体的例子，有意想不到的解决方案：

```
(setq org-plain-list-ordered-item-terminator 41) 
```

它禁用表单的普通列表`1.`，请参阅

```
(customize-variable 'org-plain-list-ordered-item-terminator) 
```

有了它的组织代码

```
 Text text text
   1\. some test
  text text 
```

将导出为

```
<p>
  Text text text
   1\. some test
  text text 
</p></div> 
```

`1.`如果在一行中应解释为纯列表，而在下一行中 - 作为纯文本，则此解决方案不起作用。而且一般情况下，有些情况是任何设置都无法解决的。另请参阅我关于普通列表的[评论。](https://stackoverflow.com/a/14234593/1937596)

# soundcloud - 通过 Soundmanager2 播放 SoundCloud 链接

> ID：14472284
> 
> 赞同：3
> 
> 时间：2013-01-23T04:06:32.593
> 
> 标签：soundcloud, soundmanager2

我在我的网站上使用 Soundmanager Mp3 按钮。但是，我想使用 Soundcloud Api 通过 Soundmanager 流式传输曲目，而不是托管 MP3。基本上，我想通过 Soundmanager 按钮流式传输 Soundcloud 链接。可能的？

我尝试创建一个 jQuery 循环（如下），但仍然没有任何运气。

```
<ol>
<li><a class="sm2_button" href="http://soundcloud.com/....">Track Title</a>
</li>
</ol> 
```

和 jQuery

```
$("ol a").each(function()
    { 
        var thisLink = $(this);                         
        var track_url = this.href;                      // save href value of each link to 'track_url' i.e. soundcloud.com/...
        this.href = this.href.replace(track_url, "#");  // replace href value with '#'
        var consumer_key = 'My Consumer Key';
            // now resolve the stream_url through Soundcloud's getJSON method
        $.when($.getJSON('http://api.soundcloud.com/resolve?url=' + track_url + '&format=json&consumer_key=' + consumer_key + '&callback=?', function(track) {
            url = track.stream_url + '?consumer_key=' + consumer_key;   
            })).done(function() {
                // and place an 'onclick' on each link
                $(thisLink).attr('onclick', "if (basicMP3Player.lastSound) { basicMP3Player.lastSound.stop(); } document.getElementById('mp3').type='audio/mpeg'; document.getElementById('mp3').href = '" + url + "'; basicMP3Player.handleClick({target: document.getElementById('mp3')});");
            });
    }); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-26T18:56:26.630

这也让我发疯了。经过一堆挖掘，如果我在链接中指定了一个 mp3 mimetype，我就能让它工作：

```
<ol>
    <li><a type="audio/mp3" class="sm2_button" href="https://api.soundcloud.com/tracks/49349198/stream?client_id=YOUR_CLIENT_ID">Track Title</a></li>
</ol> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T12:06:46.127

您也可以尝试使用 SoundCloud [Javascript SDK](http://developers.soundcloud.com/docs/api/sdks)，它会为您处理大部分工作。

```
SC.initialize({
  client_id: "YOUR_CLIENT_ID",
  redirect_uri: "http://example.com/callback.html",
});

SC.stream("/tracks/293", function(sound){
  sound.play();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T22:00:52.670

我试过这个并认为我有它......有人看到什么吗？

```
 <script src="http://connect.soundcloud.com/sdk.js"></script>
    <script>
    SC.initialize({
      client_id: "My Consumer Key",
      redirect_uri: "My Redirect",
    });

    SC.get("/users/MYUSERID/tracks", {limit: 1000}, function(tracks){
      alert("Latest track: " + tracks[0].title);
    });

    $(".sm2_button").live("click", function(sound){
         sound.play();
      });

    </script>

    <script>
    $(document).ready(function() {

      $(".sm2_button").each(function()
        { 
            var thisLink = $(this);                         
            var track_url = this.href;                      // save href value of each link to 'track_url' i.e. soundcloud.com/...
            this.href = this.href.replace(track_url, "#");  // replace href value with '#'
            var consumer_key = 'My Consumer Key';
                // now resolve the stream_url through Soundcloud's getJSON method
            $.when($.getJSON('http://api.soundcloud.com/resolve?url=' + track_url + '&format=json&consumer_key=' + consumer_key + '&callback=?', function(track) {
                url = track.stream_url + '?consumer_key=' + consumer_key;   
                })).done(function() {
                    // and place an 'onclick' on each link
                    $(thisLink).attr('onclick', "if (basicMP3Player.lastSound) { basicMP3Player.lastSound.stop(); } document.getElementById('mp3').type='audio/mpeg'; document.getElementById('mp3').href = '" + url + "'; basicMP3Player.handleClick({target: document.getElementById('mp3')});");
                });
        }); 
          }); </script> 
```

# c++ - 如何在 3D 中放置一个点以创建某个角度？

> ID：14472287
> 
> 赞同：3
> 
> 时间：2013-01-23T04:06:43.903
> 
> 标签：c++, math, 3d, rotation, trigonometry

我有一个关于 3D 的小问题。

以下是我的问题的一个例子。

我有两点：

答：12 4 5 B：6 8 -10

我还有一点：C：5 6 7

我需要变换（？）点 C，使角度 ABC 为 48 度。

我该怎么做呢？如果有人可以帮助我使用公式，或者甚至可以将上述示例变为可行的示例，我将不胜感激。

换一种说法：如何变换 Cx、Cy 和 Cz 使角 ABC 为 48 度？

我真的很感激这方面的一些帮助，因为我现在被困住了。

旁注：我已经实现了一种寻找角度的方法：

```
float Angle( float x1, float y1, float z1,
             float x2, float y2, float z2 )
{
  float x, y, z;
  CrossProduct( x1, y1, z1, x2, y2, z2, &x, &y, &z );

  float result = atan2 ( L2Norm( x, y, z ),
                         DotProduct( x1, y1, z1, x2, y2, z2 ) );

  return result;
} 
```

你使用它：角度（Bx - Ax，By - Ay，Bz - Az，Cx - Bx，Cy - By，Cz - Bz）；

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T05:11:52.860

```
 A------C    
       |     
 c''   |    c'
       B 
```

由于 3D 中的三个点定义了一个平面，因此在该平面上只有 2 个可能的变换 C-->c' 或 C-->c'' 候选。

c' 将是 c' = A+t*(BA) + u*(CA) 约束 Normalize(c'-A) dot Normalize(BA) == cos (48 / 180 * pi)。

我首先建议标准化 D=(BA)，然后：

```
D dot D+u*(C-A) = 1 * |D+u(C-A)| * cos (48 degrees)

Dx*(Dx+u*(Cx-Ax))+ Dy*(Dy+u*(Cy-Ay))+Dz*(Dz+u*(Cz-Az)) ==
    0.669 * sqrt ((Dx+u*(Cx-Ax))^2+(Dy+u*(Cy-Ay))^2+(Dz+u*(Cz-Az))^2) 
```

其形式为 a+u*b == 0.669*sqrt(c+du+e*u^2)，通过两边均方可简化为*u*中的二次多项式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T04:52:08.100

C点的轨迹实际上是一个圆锥体，可以想象，B是顶点，AB线是圆锥体的中心线，也就是说3D圆锥体在AB上是对称的。

# php - 为 SQL Server 抓取数据时更改 mySQL 表并添加列是否正常？

> ID：14472290
> 
> 赞同：1
> 
> 时间：2013-01-23T04:06:54.553
> 
> 标签：php, mysql, sql, sql-server

我有一个 mySQL 数据库，一旦登录，它就会从在线用户那里接收数据。数据表是这样创建的......

```
CREATE TABLE   
IF NOT EXISTS `results` (
       `id` INT(11) NOT NULL AUTO_INCREMENT,
       `patient_id` CHAR(10) NOT NULL,
       `login_id` CHAR(7) NOT NULL,
       `result_date` date NOT NULL,
       `result` VARCHAR(4) NOT NULL,
       created_at TIMESTAMP NOT NULL,
       PRIMARY KEY(`id`)
   ) DEFAULT CHARSET = utf8 COMMENT = 'List of Member Test Results'
    ; 
```

完成后，我们的 IT 经理决定更改我的数据库和 PHP 代码，以便他可以轻松地将数据提取到他的 SQL Server 数据库中。我的问题有两个，这是否必要，这样做是否存在潜在问题。

他改变的东西；将 result_date 从 a 更改`date`为其他数据类型，因此他可以在我的端以 SQL Server 格式输入。他更改了时间戳/创建时间，因此他的更改不会更新时间戳，并且他添加了一个布尔/计数器列，因此他的数据库知道它是否已从该行中提取。此外，他添加了第三个日期（日期类字段为非日期类型），因此当他从我的数据库中提取时，他可以标记那个时间。

对我来说，这不仅看起来有点矫枉过正，而且还迫使我允许更改我的数据库。最后，我被骂“你为什么要使用`created_at timestamp NOT NULL`”。不想在这件事上找人，但这个问题让我有点困惑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T04:49:36.200

正如其他人在评论中指出的那样，您的 IT 经理确实看起来不那么敏锐。为了简化他的事情，他为什么不直接在 ImportIDFromMySQL 的 SQL 表中添加一列并使用您的自动增量。在那里，他有或没有。至于关心日期/时间戳，他应该只将额外的列添加到他的“漂亮”表中，而不要管你的生产内容。

有时 bean-counter 经理真的可以应付。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T04:46:33.800

更改数据库并进行更改是可以的。但是，我的建议是创建镜像数据库，然后他可以在镜像数据库上做他想做的事。改变数据库的结构可能会导致许多层面的许多问题。在更改、删除、截断或使用与删除和更新语句相关的任何功能之前，请始终备份您的数据库。

您的 IT 经理应该已经创建了一个镜像数据库。好吧，继续前进，他仍然可以。

# iphone - 什么时候放入viewWillAppear，什么时候放入viewDidLoad？

> ID：14472295
> 
> 赞同：5
> 
> 时间：2013-01-23T04:07:17.010
> 
> 标签：iphone, ios, viewdidload, viewwillappear

我习惯了`viewWillAppear`和`viewDidLoad`中的任何一个，直到知道为止都可以。但是我认为应该有一些规则来指导何时放入`viewWillAppear`以及何时放入`viewDidLoad`？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-23T04:14:04.983

我使用的简单规则是这样的。`viewDidLoad`是加载视图资源的时间。该视图尚未在屏幕上绘制。因此，不应将处理视图的几何图形和视觉效果的计算和代码放在此处。它们应该在`viewWillAppear`or`viewDidAppear`方法中。

也可以多次调用 viewWillAppear

1.  当显示弹出框/模态视图并删除
2.  当显示和删除警报视图/操作表/uiactivityController 的视图时。

由于这些原因，`viewWillAppear`不应包含需要较长时间才能完成的代码。（至少是在主线程上运行的代码）。每个视图只需要运行一次的代码也不应该显示。

我确定还有更多，但这些很容易记住，我希望它有所帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-23T04:46:15.830

**viewDidLoad：** *提醒您视图已完成加载*

**viewWillAppear：** *在视图加载之前运行*

`viewDidLoad`是你必须做一次的事情。`viewWillAppear`每次视图出现时都会被调用。你应该做一些你只需要做一次的事情`viewDidLoad`——比如设置你的`UILabel`文本。但是，您可能希望每次用户查看视图的特定部分时都对其进行修改，**例如** *，每次您进入“正在播放”视图时，iPod 应用程序都会将歌词滚动回顶部。*

但是，当您从服务器加载内容时，您还必须考虑延迟。如果您将所有网络通信打包到 viewDidLoad 或 viewWillAppear 中，它们将在用户看到视图之前执行 - 可能导致您的应用程序短暂冻结。首先向用户显示带有某种活动指示器的未填充视图可能是个好主意。当您完成网络时，可能需要一两秒钟（或者甚至可能失败 - 谁知道？），您可以使用您的数据填充视图。在各种 Twitter 客户端中可以看到如何做到这一点的好例子。例如，当您在 Twitterrific 中查看作者详细信息页面时，该视图只会显示“正在加载...”，直到网络查询完成。

# mysql - MySQL 如何从该选择中选择和构建一个集合？

> ID：14472296
> 
> 赞同：0
> 
> 时间：2013-01-23T04:07:18.533
> 
> 标签：mysql

我怎样才能用 MYSQL 做这样的事情？

```
user_id  user_group_id   is_primary
1        2               1
1        3               0
1        4               0
2        2               0
2        3               1
3        2               0
3        3               1 
```

进入类似的东西

```
user_id   user_group_ids
1         3,4
2         2
3         2 
```

基本上声明会是这样的......

```
SELECT user_id, user_group_ids FROM tablename WHERE is_primary = 0 
```

因此，我只是试图获取不是主要的 SET 并从中构建一个 SET。我想用 SELECT 语句来做到这一点。允许我构建 user_group_ids 的选择语句将用于在另一个表中设置 user_group_ids 记录。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T04:10:44.143

```
SELECT
   user_id,
   GROUP_CONCAT(user_group_id) as user_group_id
FROM mytable
WHERE is_primary = 0
GROUP BY user_id 
```

[在这里演示](http://sqlfiddle.com/#!2/f2855/3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T04:11:08.307

您可以使用

```
SELECT user_id, group_concat(user_group_ids) as user_group_ids 
FROM tablename 
WHERE is_primary = 0 
GROUP BY user_id 
```

这将通过 user_id 将 user_group_ids 组合在一起

# django - 为什么我得到一个无效语法的错误（urls.py，第 34 行）

> ID：14472297
> 
> 赞同：0
> 
> 时间：2013-01-23T04:07:37.043
> 
> 标签：django, django-urls, django-generic-views

我的 url.py

```
from django.conf.urls import patterns, include, url 
import os.path
from crm.views import *

(r'^workDailyRecord/(?P<mode_name>\w+/)?$', workDailyRecord),
(r'^user/search/$', searchUser),
#   (r'^tset/$', mainPage),
#   (r'^ptpt/$', mainPage),
    (r'^tptp/$', TodayLogView.as_view(), name='archive_today'), #34 Line
) 
```

***为什么？***我收到那个？？为什么？请帮我！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T04:15:01.357

您必须`url`按以下参数顺序使用：

```
...
url(r'^tptp/$', TodayLogView.as_view(), name='archive_today'),
... 
```

[文档](https://docs.djangoproject.com/en/1.4/topics/http/urls/#url)摘录：

> 您可以使用 url() 函数而不是元组作为 patterns() 的参数。如果您想指定一个没有可选额外参数字典的名称，这很方便。

# python - Python方式 - 迭代数组，检查索引处的元素，将新字符串附加到数组

> ID：14472298
> 
> 赞同：1
> 
> 时间：2013-01-23T04:07:39.900
> 
> 标签：python, lambda

我正在尝试完成以下任务：

```
Iterate a list
    if an element (string) does not have a '$' at the first position
        apply a '$'  and append the new value to the array 
```

我正在尝试类似的东西：

```
 symbols = ['aol', 'goog', ...]
  (symbols.append('$'+val) if '$' != val[0] for val in symbols) 
```

但我收到语法错误。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T04:09:55.263

遍历列表的浅表副本并检查`$`using `str.startswith()`：

```
In [81]: symbols = ['aol', 'goog','$foo','bar']

In [82]: for x in symbols[:]:
    if not x.startswith('$'):
        symbols.append('$'+x)
   ....:         

In [83]: symbols
Out[83]: ['aol', 'goog', '$foo', 'bar', '$aol', '$goog', '$bar'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T04:18:22.627

您可以按照 Ashwini 的建议进行操作，或者您可以理解列表并附加现有列表

```
symbols + [('' if e.startswith('$') else '$') + e for e in symbols] 
```

它执行 Ashwini 建议的操作，但不是附加到现有列表，而是理解一个新列表（相对更快）并附加到现有列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T04:25:57.493

```
symbols.extend('$' + s for s in symbols if s[:1] != '$') 
```

这类似于其他人发布的内容，但为了简洁而不是“startswith”，使用切片（使用空字符串运行）并附加到原始列表以符合原始问题陈述似乎暗示的内容——尽管问题陈述混淆地交替使用“列表”和“数组”。

# python - 樱桃检查连接状态

> ID：14472301
> 
> 赞同：1
> 
> 时间：2013-01-23T04:08:15.173
> 
> 标签：python, cherrypy

我有一个旨在在服务器上运行很长时间的cherrypy api。

我有一个不可靠的客户端，由于我无法控制的各种原因，它可能会死掉或关闭连接。

在我的服务器 api 运行期间，我想定期检查连接的状态，确保客户端仍在侦听并在客户端离开时中止我的操作。

我找不到任何描述如何在服务cherrypy请求时轮询连接状态的好地方。

这种长期运行的一个例子是在小缓冲区（有限内存）块中计算多个大文件（数十 GB）的 md5。

我不需要任何缩短运行时间的解决方案，因为这不是我的目标。我想尽可能长时间地保持此连接打开，但如果它关闭则中止。

这是我的代码的简单示例：

```
@cherrypy.expose
def foo(self):
    cherrypy.response.headers['Content-Type'] = 'text/plain'
    def run():
        for result in get_results(): # get_results() is a heavy method mentioned
            yield json.dumps(result)
    return run()
foo._cp_config = {'response.stream': True} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T15:51:56.583

知道客户端已经死亡的唯一可靠方法是尝试将一些数据写入套接字，对于 CherryPy 可以使用`yield`. 您必须生成非空字符串，因此您必须返回一个可以处理一些填充文本的 Content-Type，例如`<head>`HTML 文档的开始标记后的一些额外空格。如果客户端关闭连接，CherryPy 服务器将停止从处理程序请求额外的已生成数据（并调用`close`生成器上的任何方法，以便您进行清理）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T13:06:04.817

据我所知，CherryPy 没有为您提供任何机制来检测客户死亡。它只会告诉您响应是否花费了太长时间才能完成（因此会被发送出去）。

您可以参考[这个 SO 线程](https://stackoverflow.com/questions/5686490/detect-socket-hangup-without-sending-or-receiving/5686720)以获取更多信息。

# php - posts_per_page 显示的项目比预期少 2 个

> ID：14472305
> 
> 赞同：1
> 
> 时间：2013-01-23T04:08:39.497
> 
> 标签：php, wordpress

我在这里的第一个问题，如果我做错了什么，我很抱歉：S

我有一个名为“portfolio”的自定义帖子类型，以及一个用于显示这些帖子的模板。不幸的是，当使用 posts_per_page 时，模板总是显示比我输入的少 2 个项目。到目前为止，这是我所拥有的：

```
<?php
     $paged = (get_query_var('paged')) ? get_query_var('paged') : 1;
     $args= array('post_type' => 'portfolio', 'paged' => $paged,
            'posts_per_page' => '4');
     query_posts($args);
     if( have_posts() ) :
 ?> 
```

然后它继续进入 while 循环以发布结果。关于可能导致这种情况的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T06:18:58.290

尝试在您的代码之前重置您的查询。

```
wp_reset_query();
query_posts($args); 
```

函数参考：[wp_reset_query()](http://codex.wordpress.org/Function_Reference/wp_reset_query)

# actionscript-3 - AS3 工作者和大数据文件不可能？

> ID：14472311
> 
> 赞同：4
> 
> 时间：2013-01-23T04:09:33.657
> 
> 标签：actionscript-3, apache-flex, air

所以我从服务中加载大量数据。我刚刚使用 Flex 4.9 SDK 和 AIR 3.4 将我们的项目更新到了最新的 4.7 FB。实施工人。它们似乎非常适合一次性任务，但在互联网数据加载方面除外。我还没有找到魔法限制，但似乎如果你加载一个正在接收大量重播的互联网请求（Loader、URLLoader、HttpService ......无论如何），工作人员只是锁定并退出。主线程在所有情况下都可以做到这一点（但 UI 在加载完成之前没有响应）。这就是为什么我对工作人员如此兴奋的原因是将有时大数据负载卸载到后台工作人员。

有没有其他人遇到过这个？我在网上看到了关于 Worker 类文档的评论，其他一些人也看到了类似的问题，并建议将从互联网加载的数据放回主线程。看起来像“那么工人的意义何在”？

他们只能做局部计算吗？数学很酷……但 HTTP Gets 不是吗？

我试着给工人应用程序特权..那里没有帮助。有没有神奇的 worker.canloadlargefiles = true？（修辞）。

任何方向或帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T08:55:27.763

好吧，不是解决方案，而是**解决方法**。与其挖掘 VM 的内部结构，不如使用 KISS（保持简单和愚蠢）原则，将您的数据划分为可管理的块。您不需要划分文件或数据，但可以通过请求格式告诉服务器这样做，以便它向您发送不会使 VM 超时的可管理部分数据。检索并加入客户端的块以形成大文件。

那是我的两分钱。

# php - Zend 框架：将多个项目放在“HtmlTag”中

> ID：14472317
> 
> 赞同：0
> 
> 时间：2013-01-23T04:09:51.103
> 
> 标签：php, zend-framework, web

我目前有这个 php 代码：

```
 // add element: Submit / Create button
    $submit = $this->createElement('submit', 'submit');
    $submit->setName('submit-form');
    $submit->setDecorators(array(array('ViewHelper'),array('Errors')));
    $this->addElement($submit);

    // add element: Reset button
    $reset = $this->createElement('reset', 'reset');
    $reset->setAttrib('class', 'minimal');
    $reset->setDecorators(array(array('ViewHelper'),array('Errors')));
    $this->addElement($reset); 
```

这基本上呈现了这一点：

```
 <input type="submit" name="submitform" id="submitform" value="submitform" />
    <input type="reset" name="reset" id="reset" value="reset" /> 
```

而我想要得到的是这个......

```
 <span>
        <input type="submit" name="submitform" id="submitform" value="submitform" />
        <input type="reset" name="reset" id="reset" value="reset" />
    </span> 
```

我将如何实现这一目标？请和谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T05:35:46.753

您可以使用Zend_Form 的[**addDisplayGroup**](http://framework.zend.com/manual/1.12/en/zend.form.forms.html#zend.form.forms.displaygroups)方法。它将您的元素分组到您在此函数中提供的结构中。

*显示组是一种为显示目的创建元素虚拟分组的方法。*

# silverlight - Silverlight PivotViewer 语义缩放同时显示两个 PivotViewer 模板

> ID：14472320
> 
> 赞同：0
> 
> 时间：2013-01-23T04:10:02.630
> 
> 标签：silverlight, silverlight-5.0, pivotviewer, semantic-zoom

我在 Silverlight 5 用户控件中使用 PivotViewer 控件。我定义了两个 PivotViewerTemplates 以利用语义缩放。定义的第一个模板的 MaxWidth 为 300，第二个模板没有设置 MaxWidth。在 PivotViewer 控件中的某个“缩放”处，两个 PivotViewerTemplate 都同时显示（此时两个模板也有些透明）。就好像它在从一个 PivotViewerTemplate 转换到另一个之间卡住了一样。

如何防止两个 PivotViewerTempaltes 同时显示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T06:18:26.470

您看到的是两个模板之间的过渡效果。在进行大规模过渡时，它会提供平滑的动画。但是，根据您的 MaxWidth 和集合中的项目数量，它可能会有点粘。

您会发现，如果您使用 MaxWidth，您可以最大限度地减少您的收藏的影响。

# sql-server - 跨存储过程的连接范围临时表

> ID：14472322
> 
> 赞同：0
> 
> 时间：2013-01-23T04:10:11.970
> 
> 标签：sql-server, tsql, stored-procedures, database-connection, temp-tables

我正在研究数据虚拟化解决方案。用户可以编写自己的 SQL 查询作为我所做查询的过滤器。我不想每次从数据库中选择一些东西时都运行这个过滤器查询（它可能是一系列复杂的连接）。

我的想法是在脚本级别使用 # temp 表并保持连接处于活动状态。然后将从中选择此#temp 表，但仅在用户更改过滤器时才更新。我的想法是我实际上可以从存储过程中使用它，并且表的范围仅限于该连接。

我从建议使用动态 sql 和 ## 以连接进程 ID 命名的全局临时表的人那里得到这个想法，以便使每个连接都有一个唯一的全局临时表。这是为了克服跨存储过程共享临时表的问题。但这似乎有点笨拙。

我用下面的代码做了一个快速测试，似乎工作正常

```
-- Run script at connection open from some app
SELECT * INTO #test
FROM   dataTable

-- Now we can use stored procedures with #test table
EXECUTE selectFromTempTable

EXECUTE updateTempTable @sqlFilterString

EXECUTE selectFromTempTable 
```

我能看到的唯一真正的问题是连接必须保持活动状态，持续时间可能是几个小时。一个用户可以同时运行多个连接。单个数据库服务器上的用户数最多为 20。如果这是一个大问题，我可以做到这一点，以便应用程序可以根据需要关闭和打开它们，这样每个用户一次只能打开 1 个连接。甚至可能在不使用时关闭它，并在需要时重新打开，延迟必须等待查询运行。

这是不好的做法吗？或因不运行过滤器查询而扼杀任何性能优势？这是在 SQL Server 2008 及更高版本上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T09:29:37.087

我想我会创建一个永久表，使用 spid（进程 ID）作为键值。每个连接都有自己的进程 ID，因此任何人都可以使用它来识别表中的条目：

```
create table filter( 
  spid int, 
  filternum int, 
  filterstring varchar(255), 
  <other cols> );
create unique index filterindx on filter(spid, filternum); 
```

然后当用户创建过滤器条目时：

```
delete from filter where spid = @@spid
insert into filter(spid, filternum, filterstring) select @@spid, 1, 'some sql thing'
insert into filter(spid, filternum, filterstring) select @@spid, 2, 'some other sql thing' 
```

`where spid = @@spid` 然后您可以通过选择等访问每个用户的过滤器值

# php - PHP else 语句不能正常工作.. is_numeric 和 isset

> ID：14472324
> 
> 赞同：0
> 
> 时间：2013-01-23T04:10:15.907
> 
> 标签：php, if-statement

在下面的 If.. else 语句中，我想先看看是否有第四个面包屑（URI 数组 4），然后看看它是否是一个数字。

但两者总是返回真、数字、字母或空..

谁能告诉我为什么？

```
// checks the third breadcrumb contained within the breadcrumbs class to see
// if it is an article. Then uses a recursive function to search the first
// and second breadcrumbs to see if they exist within their respective menu
// arrays. finally, if that validates, then the fourth breadcrumb is checked
// to see if it exists (not empty) AND if it is a number.
else 
if (($this->breadcrumbs->getCrumb(3)=='article' && 
     $array_helper->recValueReturn($this->breadcrumbs->getCrumb(2),
     $this->getNavTwo()) && 
     $array_helper->recValueReturn($this->breadcrumbs->getCrumb(1),
     $this->getNavOne())) || ($this->breadcrumbs->getCrumb(4)) && 
     is_numeric($this->breadcrumbs->getCrumb(4))) {
... 
```

以下始终验证为 False：

```
else
if (($this->breadcrumbs->getCrumb(3)=='article'&&
     $array_helper->recValueReturn($this->breadcrumbs->getCrumb(2),
     $this->getNavTwo()) &&
     $array_helper->recValueReturn($this->breadcrumbs->getCrumb(1),
     $this->getNavOne())) &&
     (array_key_exists($this->breadcrumbs->getCrumb(4),
      $this->breadcrumbs->getCrumbs())&&
      is_numeric($this->breadcrumbs->getCrumb(4)))) {
... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T06:25:56.617

供将来参考，以及其他阅读本文的人。

该问题已在 BreadCrumbs 类本身中得到解决。

以前，面包屑有一个私有数组，其中包含分解的 URI 值。我使用以下方法检索了一个 url 索引：

```
public function getCrumb($x) { return $this->breadcrumbs[$x] } 
```

但是如果我直接修改这个getter以包含一个isset：

```
public function getCrumb($x) {
    if (isset($this->breadcrumbs[$x])) {
        return $this->breadcrumbs[$x];
    } else {
            return null;
    }
} 
```

然后在OP中使用第一个*else..if* ..问题解决了。有用。

# maven - 如何将maven多个模块报表合二为一

> ID：14472328
> 
> 赞同：0
> 
> 时间：2013-01-23T04:10:32.533
> 
> 标签：maven, module, report, maven-module

我有 10 个文件夹，每个文件夹都承载一个相应的项目。在每个项目的pom.xml中都添加了report插件，不方便在每个项目中查看report，请问有没有办法将所有项目的report整合为一个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T07:28:08.373

您可以创建另一个 Maven 项目并将这 10 个项目作为它的模块。然后将报表部分添加到这个新项目中，这样现有的 10 个项目就不再需要任何报表配置了。像这样：

```
<?xml version="1.0" encoding="UTF-8"?>
<project  ...>
    ...
    <modules>
        <module>project-a</module>
            <module>project-b</module>
            ...
            <module>project-z</module>
    </modules>
    ...
    <reporting>
        <plugins>
        ...
        </plugins>
    </reporting>
</project> 
```

# python - 从动词列表中检索动词

> ID：14472333
> 
> 赞同：2
> 
> 时间：2013-01-23T04:11:16.047
> 
> 标签：python, regex, string, list, nlp

我有一个字符串列表，这些字符串都是动词。我需要获取每个动词的词频，但我想将“want”、“wants”、“wanting”和“wanted”等动词计为一个动词。形式上，“动词”被定义为一组 4 个单词，其形式为 {X, Xs, Xed, Xing} 或形式为 {X, Xes, Xed, Xing}，其中 X 是动词。我将如何从列表中提取动词，以便得到“X”并计算词干出现的次数？我想我可以以某种方式使用正则表达式，但是我是正则表达式的新手，我完全迷路了。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-23T04:36:37.453

有一个名为[nltk](http://nltk.org/)的库，它具有一系列用于文本处理的疯狂函数。函数的子集之一是`stemmers`，它只做你想做的事（使用在该领域有丰富经验的人开发的算法/代码）。下面是使用[Porter Stemming](http://tartarus.org/martin/PorterStemmer/)算法的结果：

```
In [3]: import nltk

In [4]: verbs = ["want", "wants", "wanting", "wanted"]

In [5]: for verb in verbs:
   ...:     print nltk.stem.porter.PorterStemmer().stem_word(verb)
   ...:     
want
want
want
want 
```

您可以将它与 a 结合使用`defaultdict`来执行类似的操作（注意：在 Python 2.7+ 中， a`Counter`将同样有用/更好）：

```
In [2]: from collections import defaultdict

In [3]: from nltk.stem.porter import PorterStemmer

In [4]: verbs = ["want", "wants", "wanting", "wanted", "running", "runs", "run"]

In [5]: freq = defaultdict(int)

In [6]: for verb in verbs:
   ...:     freq[PorterStemmer().stem_word(verb)] += 1
   ...:     

In [7]: freq
Out[7]: defaultdict(<type 'int'>, {'run': 3, 'want': 4}) 
```

需要注意的一件事：词干分析器并不完美 - 例如，添加`ran`到上面会产生以下结果：

```
defaultdict(<type 'int'>, {'ran': 1, 'run': 3, 'want': 4}) 
```

但是希望它能让你接近你想要的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T04:52:31.860

要完全通过模式匹配获取基本词，您可以使用以下代码：

```
import re

for word in verblist:
    mtch = re.match(r"([a-zA-Z]*)((ed)|(ing)|(s))", word)
    if mtch:
        base = mtch.group(1)
    else:
        base = word
    #process the base word here 
```

请记住，这不能很好地处理不规则动词，并且它依赖于仅包含动词的列表。现在，要实际跟踪计数，dict 可能是最好的。可以在循环之前创建一个 dict `counts = {}`。然后，要为每个单词递增，您可以在每次迭代结束时执行以下操作：

```
 if base in counts:
        counts[base] += 1
    else:
        counts[base] = 1 
```

RocketDonkey 在我打字的时候打败了我，他的回答看起来会更好，但我还是发布了，因为这不需要安装额外的库，如果这对你有价值的话。

# html - 在 html 中列出。如何放置不同颜色的点，但文字是黑色的？

> ID：14472336
> 
> 赞同：-1
> 
> 时间：2013-01-23T04:11:28.590
> 
> 标签：html, css

我的列表：

```
<ul style="list-style:disc;">
    <li style="color:Red; margin-left: 7px; font-weight:bold; text-decoration:underline;">Отказано</li>
    <li style="color:#ADD8E6; margin-left: 7px; font-weight:bold; text-decoration:underline;">Установлено</li>
    <li style="color:#6B8E23; margin-left: 7px; font-weight:bold; text-decoration:underline;">Установлен частично</li>
    <li style="color:#B8860B; margin-left: 7px; font-weight:bold; text-decoration:underline;">Тестируется</li>
    <li style="color:#ADFF2F; margin-left: 7px; font-weight:bold; text-decoration:underline;">Готов</li>
</ul> 
```

但是列表中带有颜色的文本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T04:22:25.203

试试下面的代码，它会帮助你...

```
<html>
    <head>
    <style type="text/css">
        ul.specials li p { color:black; }
    </style>
    </head>
    <body>

<ul style="list-style:disc;" class="specials">
    <li style="color:Red; margin-left: 7px; font-weight:bold; text-decoration:underline;"><p>Отказано</p></li>
    <li style="color:#ADD8E6; margin-left: 7px; font-weight:bold; text-decoration:underline;"><p>Установлено</p></li>
    <li style="color:#6B8E23; margin-left: 7px; font-weight:bold; text-decoration:underline;"><p>Установлен частично</p></li>
    <li style="color:#B8860B; margin-left: 7px; font-weight:bold; text-decoration:underline;"><p>Тестируется</p></li>
    <li style="color:#ADFF2F; margin-left: 7px; font-weight:bold; text-decoration:underline;"><p>Готов</p></li>
</ul>
    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T04:26:24.270

您应该为所需的 li 颜色添加一个类，然后为文本颜色设置一个跨度：

```
ul li {
    list-style-type: disc;
    margin-left: 2em;
}

li.a {
    color: red;
}

li.b {
    color: #ADD8E6;
}

li.c {
    color: #6B8E23;
}

ul li span {
    color: black;
    text-decoration: underline;
} 
```

看到这个[jsFiddle](http://jsfiddle.net/RYh7U/20/)

# time - Google Analytics 中的逐页“参与度”

> ID：14472338
> 
> 赞同：0
> 
> 时间：2013-01-23T04:11:40.213
> 
> 标签：time, report, duration

我喜欢使用的一种报告是“参与度”报告。我想逐页应用此指标。例如，我想了解更多页面上的平均时间，我想查看特定页面的时间分布（持续时间）。这可以在谷歌分析中实现吗？我高清查看了二级维度和自定义报告，但看不到实现这一目标的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T22:07:47.483

我不能代表 Web 框架，但无论是 Android 还是 iOS SDK，您都可以通过使用具有类别、操作或标签为预定义 bin 的[事件](https://developers.google.com/analytics/devguides/collection/android/v2/events)来查看时间（持续时间）或任何其他直方图的分布. 例如，您可以将垃圾箱命名为“time00001”、“time00002”等，然后在代码中调用类似这样的内容：

```
sendEvent("EngagementReport", "duration", "time00001", 1); 
```

然后，

1.  单击参与 > 事件 > 概述。
2.  在页面底部，单击“事件标签”部分下的“查看完整报告”链接。
3.  单击右上角的气泡图标。
4.  单击右上角的条形图标（但略低于气泡图标的左下角）
5.  按字母顺序排列 x 轴，您应该能够看到按这样一种方式排序的箱“time00001”、“time00002”等，以便您可以看到每页上持续时间的直方图。

我不确定如何在网络分析中做到这一点，但我很确定这不是太难。这是我的结果：

![在此处输入图像描述](../Images/1d4e188515f1421742ecd406c6a8dbe2.png)

# java - 2D 游戏设计 - y 变量未解决？

> ID：14472340
> 
> 赞同：1
> 
> 时间：2013-01-23T04:12:22.230
> 
> 标签：java, 2d, block

我的代码如下。

```
package net.ferrell.wrathoftuemdaym;

import java.awt.*;

public class Level {
    public Block[][] block = new Block[50][50];

    public Level() {
        for(int x = 0; x < block.length; x++) {
            for(int y = 0; y < block[0].length; y++);
                block[x][y] = new Block(new Rectangle(x * Tile.tileSize, y * Tile.tileSize, Tile.tileSize, Tile.tileSize), Tile.air);
        }

    }

    public void generateLevel() {
        for(int x = 0; x < block.length; x++) {
            for(int y = 0; y < block[0].length; y++);
                if(x == 0 || y == 0 || x == block.length-1 || y == block[0].length-1) {
                    block[x][y].id = Tile.earth;
                }
        }

    }

    public void tick() {

    }

    public void render(Graphics g) {
        for(int x = 0; x < block.length; x++) {
            for(int y = 0; y < block[0].length; y++);
                block[x][y].render(g);
        }

    }
} 
```

在写有“block[x][y]”的行中，y 无法解析为变量。我不知道这个问题的解决方法，只有在这个类中存在问题。请帮我。我不明白，因为 x 可以解决...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T04:14:19.047

这是你的罪魁祸首

```
for(int y = 0; y < block[0].length; y++); 
```

它应该是

```
for(int y = 0; y < block[0].length; y++) 
```

就我个人而言，我总是将大括号放在代码块中，即使它只有一行。

# svn - 免费在线存储库 (CVS)

> ID：14472344
> 
> 赞同：3
> 
> 时间：2013-01-23T04:13:25.527
> 
> 标签：svn, cvs

是否有托管公司会提供免费的私有存储库，专门使用 CVS（或 Eclipse 签入/签出）进行版本控制？我有一个项目，我是唯一的用户，我需要保留它的版本谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T16:03:15.283

如果您熟悉 CVS，您应该尝试使用很久以前设计为 CVS 替代品的 Subversion。它遵循与 CVS 非常相似的工作流程（就是这样设计的），并且比 CVS 有一些不错的改进。另外，与十多年来没有更新的 CVS 不同，Subversion 得到了积极的支持。

您可以将 Subversion 存储库放在文件系统上（使用`file://`协议），但这很笨拙。但是，有很多[免费的私人 Subversion 托管站点](https://stackoverflow.com/questions/59791/free-online-private-svn-repositories)。

另一种可能性是使用 Git。但是，请注意，Git 的使用可能比 Subversion 更复杂一些。这是因为 Git 中的每个*工作副本*实际上都是一个完整的 Git 存储库。您在本地存储库中工作，就好像它是一个工作目录一样，并且像 Subversion 一样，您在那里*提交*您的更改。这很好，因为您不需要服务器，但仍然拥有完整的文件版本历史记录。

但是，Git 还允许您将更改*推送*（签出）和*拉取*（提交）到其他 Git 存储库，这就是为什么使用它可能会有点复杂——您现在正在使用多个级别的存储库。但是，这种复杂性带来了一些不错的能力。您可以使用 HTTP、FTP 甚至电子邮件在 Git 存储库之间共享更改。而且，您可以决定与哪些 Git 存储库共享更改。我可以从一个存储库中*提取*代码，然后让其他用户使用我的存储库进行*推送*和*拉取。*最后，不要*将*我的更改推送回原始存储库，而是将这些更改*推送给**拉*取的其他人*原始存储库中的代码。在不影响整个项目（甚至从原始项目获得提交权限）的情况下，只与特定的人群共享代码很容易。*

 *如果你不熟悉 Subversion 或 Git，我建议你先学习 Subversion。CVS 开发人员可能会在一小时内了解他们需要了解的有关 Subversion 的所有信息。Subversion 拥有我在开源项目中见过的最好的[在线手册之一。](http://svnbook.com)

然后，花时间学习 Git。我将 Git 用于我的个人项目，许多开源项目由于各种原因已经转移到 Git。它在小型项目中变得非常流行。Git 和 Subversion 都将*Tortoise*集成到 Windows Explorer shell 中。两者也都与 Eclipse 集成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T13:14:00.773

CollabNet 为 1 位用户提供免费的 cloudforge（以前称为 codesion）服务。

[访问http://cloudforge.com/pricing](http://cloudforge.com/pricing)下的个人计划并注册一个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T16:59:52.443

1.  对于 SCM 功能，您可以使用**任何**由相应 Eclipse 团队提供者支持的 VCS（已知支持 Git、Mercurial、Subversion）
2.  SourceForge 提供 CVS 托管*

# .htaccess - 将 URL 路径重新路由到参数

> ID：14472346
> 
> 赞同：0
> 
> 时间：2013-01-23T04:13:48.740
> 
> 标签：.htaccess

我想将 URL 屏蔽`http://example.com/index.php?path=controller/function`为`http://example.com/controller/function`. `function`不需要在场。

如何使用 htaccess 文件执行此操作？

以下不起作用。

```
RewriteRule ^/?assets/(.*)$ assets/$1 [L] # directory for CSS, images, and JavaScript
RewriteRule ^$ /index [redirect]
RewriteRule ^([a-zA-Z]+)/?([a-zA-Z/]*)$ index.php?path=$1/$2 [L] 
```

目前，如果我`http://example.com/controller/function`在浏览器中输入，我会收到 404 错误，但输入`http://example.com/index.php?path=controller/function`有效。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-23T05:05:18.287

你可以试试这个：

```
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_URI} !index\.php [NC]
RewriteRule ^([^/]+)(.*)?$ index.php?path=$1$2   [L] 
```

它在内部映射

`http://example.com/var1/var2`

到：

`http://example.com/index.php?path=var1/var2`

保留传入的尾部斜杠行为并且`var2`是可选的。

# c++ - 为什么我们需要将函数标记为 constexpr？

> ID：14472359
> 
> 赞同：54
> 
> 时间：2013-01-23T04:15:54.603
> 
> 标签：c++, c++11, constexpr

C++11 允许使用说明`constexpr`符声明的函数在模板参数等常量表达式中使用。对允许的内容有严格的要求`constexpr`；本质上，这样的函数只封装了一个子表达式，没有别的。（编辑：这在 C++14 中是放松的，但问题是存在的。）

为什么需要关键字？**得到了什么？**

它确实有助于揭示接口的意图，但它[不能通过](https://stackoverflow.com/q/13295089/153285)保证函数在常量表达式中可用来验证该意图。编写`constexpr`函数后，程序员仍然必须：

1.  编写测试用例或以其他方式确保它实际用于常量表达式。
2.  记录在常量表达式上下文中哪些参数值是有效的。

与揭示意图相反，装饰函数`constexpr`可能会增加错误的安全感，因为会检查切向句法约束而忽略中心语义约束。

* * *

**简而言之：**如果`constexpr`函数声明只是可选的，会对语言产生任何不良影响吗？或者会对任何有效的程序产生任何影响？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-01-23T04:39:26.953

## 防止客户端代码期望超过您的承诺

假设我正在编写一个库并在其中有一个当前返回常量的函数：

**`awesome_lib.hpp`：**

```
inline int f() { return 4; } 
```

如果`constexpr`不需要，您 - 作为客户端代码的作者 - 可能会离开并执行以下操作：

**`client_app.cpp`：**

```
#include <awesome_lib.hpp>
#include <array>

std::array<int, f()> my_array;   // needs CT template arg
int my_c_array[f()];             // needs CT array dimension 
```

然后我应该更改`f()`说从配置文件返回值，您的客户端代码会中断，但我不知道我冒着破坏您的代码的风险。实际上，可能只有当您遇到一些生产问题并重新编译时，您才会发现这个额外的问题使您的重建工作受挫。

通过仅更改 的*实现*，`f()`我将有效地更改*接口*的使用。

相反，C++11 及更高版本提供`constexpr`，因此我可以表示客户端代码可以对保留的函数有合理的期望 a `constexpr`，并按原样使用它。 *我知道并赞同将这种用法作为我界面的一部分。* 就像在 C++03 中一样，编译器继续保证客户端代码不会构建为依赖于其他非`constexpr`函数，以防止上述“不需要/未知的依赖”情况；这不仅仅是文档 - 它是编译时执行。

值得注意的是，这延续了 C++ 的趋势，即为预处理器宏的传统用途提供更好的替代方案（考虑`#define F 4`，以及客户端程序员如何知道 lib 程序员是否认为更改为公平游戏`#define F config["f"]`），以及他们众所周知的“邪恶”，例如因为在语言的命名空间/类范围系统之外。

## 为什么没有“明显”从不 const 函数的诊断？

我认为这里的混乱是由于`constexpr`没有主动确保结果实际上是编译时 const 的任何参数集：相反，它要求程序员对此负责（否则标准中的 §7.1.5/5认为程序格式错误，但不需要编译器发出诊断）。是的，这很不幸，但它并没有删除`constexpr`.

所以，也许从*“有什么意义”`constexpr`这个*问题切换到考虑*“为什么我可以编译一个`constexpr`永远不会真正返回 const 值的函数？”会有所帮助。*.

答：因为需要详尽的分支分析，可能涉及任意数量的组合。诊断的编译时间和/或内存成本可能过高——甚至超出任何可以想象的硬件的能力。此外，即使实际上必须准确诊断此类情况，对于编译器编写者（他们可以更好地利用他们的时间）来说，这也是一个全新的蠕虫罐头。还会对程序产生影响，例如从函数内部调用的函数的定义`constexpr`需要在执行验证时可见（以及函数调用的函数等）。

同时，缺乏*继续*`constexpr`禁止用作 const 值：严格性在 sans- `constexpr`side 上。如上图所示，这很有用。

## 与非`const`成员函数的比较

*   `constexpr`防止`int x[f()]`而缺乏`const`防止`const X x; x.f();`- 它们都***确保客户端代码不会硬编码不需要的依赖项***

*   在这两种情况下，***您都不希望编译器`const[expr]`自动确定 -ness***：

    *   `const`当您已经可以预期该函数将演变为修改可观察值时，您不希望客户端代码调用对象上的成员函数，从而破坏客户端代码

    *   如果您已经预料到稍后在运行时确定它，您不希望将值用作模板参数或数组维度

*   它们的***不同之处***在于编译器强制`const`在成员函数中使用其他成员`const`，但不强制使用编译时常量结果`constexpr`（由于实际的编译器限制）

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-11-07T08:02:05.887

当[我向](https://groups.google.com/a/isocpp.org/d/msg/std-discussion/nrAu_YbCbYM/0eQsx6ip1DwJ)Clang 的作者 Richard Smith 提问时，他解释说：

> constexpr 关键字确实具有实用性。
> 
> 它会影响何时实例化函数模板特化（如果在未评估的上下文中调用 constexpr 函数模板特化，则可能需要实例化它们；非 constexpr 函数的情况并非如此，因为对 one 的调用永远不能成为常量的一部分表达）。如果我们删除了关键字的含义，我们就必须尽早实例化更多的特化，以防调用碰巧是一个常量表达式。
> 
> 它通过限制实现在翻译期间尝试评估所需的函数调用集来减少编译时间。（这对于需要实现来尝试常量表达式求值的上下文很重要，但如果这种求值失败也不是错误——尤其是静态存储持续时间的对象的初始化程序。）

这一切一开始似乎并不令人信服，但如果你仔细研究细节，事情就会在没有`constexpr`. 一个函数在被 ODR 使用之前不需要被实例化，这本质上意味着在运行时使用。函数的特殊之处`constexpr`在于它们可能违反此规则并且无论如何都需要实例化。

函数实例化是一个递归过程。实例化一个函数会导致它使用的函数和类的实例化，而不管任何特定调用的参数如何。

如果在实例化这个依赖树时出现问题（可能会付出巨大的代价），那么很难接受这个错误。此外，类模板实例化可能具有运行时副作用。

给定函数签名中依赖于参数的编译时函数调用，重载解析可能会导致函数定义的实例化，这仅仅是对重载集中的那些定义的辅助，包括甚至没有被调用的函数。这种实例化可能会产生副作用，包括格式错误和运行时行为。

可以肯定的是，这是一个极端情况，但如果您不要求人们选择加入功能，则可能会发生坏事`constexpr`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-23T04:29:57.130

没有关键字，编译器无法诊断错误。编译器无法告诉您该函数在语法上是无效的`constexpr`. 尽管您说这提供了一种“虚假的安全感”，但我认为最好尽早发现这些错误。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-23T04:36:11.900

我们可以没有`constexpr`.，但在某些情况下，它使代码更容易和直观。
例如，我们有一个类，它声明了一个具有一定参考长度的数组：

```
template<typename T, size_t SIZE>
struct MyArray
{
  T a[SIZE];
}; 
```

按照惯例，您可以声明`MyArray`为：

```
int a1[100];
MyArray<decltype(*a1), sizeof(a1)/sizeof(decltype(a1[0]))> obj; 
```

现在看看它是如何搭配的`constexpr`：

```
template<typename T, size_t SIZE>
constexpr
size_t getSize (const T (&a)[SIZE]) { return SIZE; }

int a1[100];
MyArray<decltype(*a1), getSize(a1)> obj; 
```

简而言之，任何函数（例如`getSize(a1)`）只有在编译器识别为 时才能用作模板参数`constexpr`。

`constexpr`也用于检查负逻辑。它确保给定对象处于编译时。这是参考[链接](http://www.stroustrup.com/C++11FAQ.html#constexpr)，例如

```
int i = 5;
const int j = i; // ok, but `j` is not at compile time
constexprt int k = i; // error 
```

# python - Numpy 与组合生成器：如何加速组合？

> ID：14472362
> 
> 赞同：2
> 
> 时间：2013-01-23T04:16:02.953
> 
> 标签：python, performance, numpy, itertools

据我了解，[itertools 函数](http://docs.python.org/2/library/itertools.html) [是用 C 编写的](http://blog.behnel.de/index.php?p=163)。如果我想加快这个示例代码的速度：

```
import numpy as np
from itertools import combinations_with_replacement

def combinatorics(LargeArray):
     newArray = np.empty((LargeArray.shape[0],LargeArray.shape[0]))
     for x, y in combinations_with_replacement(xrange(LargeArray.shape[0]), r=2):
         z = LargeArray[x] + LargeArray[y]
         newArray[x, y] = z
     return newArray 
```

由于`combinations_with_replacement`是用 C 编写的，这是否意味着它无法加速？请指教。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T04:28:33.487

确实`combinations_with_replacement`是用 C 编写的，这意味着您不太可能加快该部分代码的实现。但是您的大部分代码并没有花在寻找组合上：它是在执行`for`添加的循环上。当你使用 numpy. [这个版本将通过广播的魔力](http://docs.scipy.org/doc/numpy/user/basics.broadcasting.html)做几乎相同的事情：

```
def sums(large_array):
    return large_array.reshape((-1, 1)) + large_array.reshape((1, -1)) 
```

例如：

```
>>> ary = np.arange(5).astype(float)
>>> np.triu(combinatorics(ary))
array([[ 0.,  1.,  2.,  3.,  4.],
       [ 0.,  2.,  3.,  4.,  5.],
       [ 0.,  0.,  4.,  5.,  6.],
       [ 0.,  0.,  0.,  6.,  7.],
       [ 0.,  0.,  0.,  0.,  8.]])
>>> np.triu(sums(ary))
array([[ 0.,  1.,  2.,  3.,  4.],
       [ 0.,  2.,  3.,  4.,  5.],
       [ 0.,  0.,  4.,  5.,  6.],
       [ 0.,  0.,  0.,  6.,  7.],
       [ 0.,  0.,  0.,  0.,  8.]]) 
```

不同之处在于`combinatorics`将下三角形保留为随机乱码，`sums`从而使矩阵对称。如果您真的想避免将所有内容添加两次，您可能可以，但我想不出该怎么做。

哦，还有另一个区别：

```
>>> big_ary = np.random.random(1000)
>>> %timeit combinatorics(big_ary)
1 loops, best of 3: 482 ms per loop
>>> %timeit sums(big_ary)
1000 loops, best of 3: 1.7 ms per loop 
```

# youtube-api - 我看到了使用列表的作者/媒体 $credit 标签，同一频道上是否有可能有多个作者？

> ID：14472367
> 
> 赞同：1
> 
> 时间：2013-01-23T04:16:14.557
> 
> 标签：youtube-api

例如[http://gdata.youtube.com/feeds/api/users/google/uploads?v=2&start-index=1&max-results=50&alt=json](http://gdata.youtube.com/feeds/api/users/google/uploads?v=2&start-index=1&max-results=50&alt=json) ,

"作者":[{"name":{"$t":"Google"},"uri":{"$t":"http://gdata.youtube.com/feeds/api/users/Google" },"yt$userId":{"$t":"K8sQmJBp8GCxrOtXWBpyEA"}}]

"media$credit":[{"$t":"google","role":"uploader","scheme":"urn:youtube","yt$display":"Google","yt$type" ：“伙伴”}]

**author**和**media$credit**标签都是一个列表，那么列表中是否有可能是**索引 1**？如果不可能，为什么要**列出**？

**谢谢**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T01:48:30.497

我不知道会为这些字段返回多个值的任何情况。我不能确定为什么它是一个列表而不是单个元素。

# vba - VBA：复杂的计数

> ID：14472368
> 
> 赞同：1
> 
> 时间：2013-01-23T04:16:16.640
> 
> 标签：vba, excel, countif

我正在尝试使用多个 AND 参数在 VBA 中实现 CountIf UDF。我构建了以下代码，它给了我一个`app-defined or obj error`.

```
Sub Count_PoA()
    Dim LastRow As Long
    With ActiveSheet
        LastRow = .Cells(.Rows.Count, "C").End(xlUp).Row - 5
    End With

    For i = 6 To LastRow
        Count = 0
        For j = 17 To 58
            For k = 12 To 397 Step 13
                If Sheet9.Range("JA:KD & i") = Sheet2.Cells(1, j) And Sheet4.Cells(i, k) = "TRUE" And Sheet4.Cells(i + 4, k) = "TRUE" Then
                    Count = Count + 1
                End If
                Count = Sheet2.Range("B" & j)
            Next
        Next
    Next
End Sub 
```

理想情况下，我想要相当于：

`COUNIF(Dim someRange as Range, condition1, condition2, condtion3, ...)` 其中 condition1 可以是一个值或表达式，并且所有条件都在 AND 条件中连接在一起

例子： `COUNTIF(Range("JA:KD & i"), Sheet2.Cells(j,1) And Sheet4.Cells(i, k) = "TRUE" And Sheet4.Cells(i + 4, k) = "TRUE")`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T07:05:09.790

您可以尝试以下方法：因为我们没有看到您的工作表，所以我采用了自己的样本数据。大多数范围都是硬编码的，但您可以更改它并相应地使其动态化。算术运算符是您需要手动更改的一件事，例如`<, >, =`

```
Option Explicit

Sub myCountIFS()
Dim counts As Integer, i As Integer
Dim LastRow As Long
Dim vArray1 As Variant
Dim cnd1 As String, cnd2 As String, cnd3 As String

LastRow = Sheets(1).Cells(Sheets(1).Rows.Count, "B").End(xlUp).Row - 1
vArray1 = WorksheetFunction.Transpose(WorksheetFunction.Transpose(Sheets(1).Range("B2").Resize(LastRow, 3).Value))

cnd1 = Sheets(1).Range("F2").Value
cnd2 = Sheets(1).Range("G2").Value
cnd3 = Sheets(1).Range("H2").Value

For i = LBound(vArray1) To UBound(vArray1)
    If vArray1(i, 1) = cnd1 And vArray1(i, 2) = cnd2 And vArray1(i, 3) < CInt(cnd3) Then
        counts = counts + 1
    End If
Next i

Sheets(1).Range("I2") = counts

End Sub 
```

输出：

![在此处输入图像描述](../Images/56c6b9150901d3d97594cdef49d74971.png)

# php - php通过引用将数组存储在数组中

> ID：14472380
> 
> 赞同：2
> 
> 时间：2013-01-23T04:18:20.393
> 
> 标签：php

我有以下问题。有一些php行。

在 var_dump 中`$testArrayA`，“def”条目`test2`不存在，因为它是在`$testArrayB`添加到`$testArrayA`.

在我看来，就我而言，这`$testArrayB`不是通过引用存储在`$testArrayA`. 如何按引用存储它，我必须做什么才能在 var_dump 中有“def”条目？

非常感谢提前

```
$testArrayA = [];
$testArrayB = [];
$testArrayB["ghi"] = "test1";
$testArrayA["abc"] = $testArrayB;
$testArrayB["def"] = "test2"; 
```

var_dump：

```
array(1) {
  ["abc"]=>
    array(1) {
       ["ghi"]=>
       string(5) "test1"
      }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-23T04:25:34.337

这只是通过引用传递的问题：

```
$testArrayA = [];
$testArrayB = [];
$testArrayB["ghi"] = "test1";
$testArrayA["abc"] = &$testArrayB;
$testArrayB["def"] = "test2"; 
```

var_dump($testArrayA);

```
array (size=1)
'abc' => &
array (size=2)
  'ghi' => string 'test1' (length=5)
  'def' => string 'test2' (length=5) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-23T04:25:33.423

采用：

```
$testArrayA["abc"] = &$testArrayB; 
```

***笔记：***

与 C 的指针不同，PHP 中的引用是一种通过不同名称访问相同变量内容的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T04:26:25.000

在php手册中

数组赋值总是涉及值复制。使用引用运算符通过引用复制数组。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T04:36:50.090

```
$testArrayA = null;
$testArrayB = null;
$testArrayB["ghi"] = "test1";
$testArrayA["abc"] = $testArrayB;
$testArrayB["def"] = "test2";
print_r($testArrayA);
echo ("<br>");
print_r($testArrayB);

Array ( [abc] => Array ( [ghi] => test1 ) ) 
Array ( [ghi] => test1 [def] => test2 ) 
```

“def”条目与“ghi”是不同的引用，但它们都属于testArrayB。

$testArrayA["abc"] = $testArrayB;

此代码仅是值引用，而不是地址引用。

# php - 具有多个连接的复杂连接查询

> ID：14472382
> 
> 赞同：0
> 
> 时间：2013-01-23T04:18:29.223
> 
> 标签：php, mysql, sql, yii

我有以下表格

**产品**

```
id                      int(11)         AUTO_INCREMENT                                                  
name                    varchar(254)                                                                     
product_category_id     int(11) 
```

产品属于**ProductCategories中****的一个** 类别。一个类别有子类别（自加入）

 **```
id                      int(11)         AUTO_INCREMENT                                                  
name                    varchar(254)                                                                     
parent_id               int(11) 
```

Product 也有**一个存储在****ProductMedia**中的图标。

```
id                      int(11)         AUTO_INCREMENT                                                  
url                     varchar(254)                                                  
type                    enum('icon','banner','video')                                                                     
product_id              int(11) 
```

什么是获取所有产品及其关联图标的最有效方法，这些产品属于一个类别，包括其子类别中的产品（如果有）。

例子：

```
Product  
1\. iphone              - Mobile(category)
2\. sIII                - Mobile (category) 
3\. liginting connector - Cable(category)
4\. iPhone USB charger  - Charger(category)

ProductCategories
1\. Mobile   - 0(parent)
2\. Cables   - 1(parent)
3\. Sim      - 1
4\. Shoes    - 0
5\. Chargers - 2 
```

当我搜索移动类别时，它需要给我所有 4 个产品，在电缆下它需要给最后 2 个，但在充电器下只有最后一个

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T04:23:58.193

为此使用连接

```
SELECT 
    p.*,
    pc.name,
    pm.url,
    pm.type
FROM Product as p
LEFT JOIN ProductMedia as pm ON pm.product_id = p.id
LEFT JOIN ProductCategories as pc ON pc.id = p.product_category_id 
```

你可以这样做
编辑：

```
select
  p.name,
  ifnull(pc.Category,pc.name) as Category,
  pm.type
from product as p
  left join (select
           l.id        as id,
           l.name,
           l.parent_id,
           if(r.parent_id <> 0,l.name, CONCAT(l.name,'|',r.name )) as Category
         from productcategories as l
           left join productcategories as r
         on r.id = l.parent_id) as pc
    on pc.id = p.id
  left join productmedia as pm
    on pm.product_id = p.id 
```

输出

```
name                        |   Category            |   type 
----------------------------------------------------------------
iphone                      |   Mobile              |   banner 
sIII                        |   Charger|Mobile      |   icon 
iphone liginting connector  |   HeadPhones|Mobile   |   video 
```

您可以使用 php explode 展开 Category

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T06:14:00.867

根据我从你那里得到的问题，你想要这样的东西。

```
SELECT 
    p.*,
    m.url,
    m.type
FROM Product as p
LEFT JOIN ProductMedia as m ON m.product_id = p.id
LEFT JOIN ProductCategories as c ON c.id = p.product_category_id
where c.id='Mobile' 
```**

# jquery - 想让这个动画回到以前的位置

> ID：14472384
> 
> 赞同：0
> 
> 时间：2013-01-23T04:18:37.477
> 
> 标签：jquery, html, css, jquery-ui

我正在制作一个动画，用 CSS 设计，动作用 JQUERY 完成。这工作正常，现在如果用户再次单击按钮，那么这个动画应该有它以前的位置。

**这是我的代码-**

```
<!DOCTYPE html>
<html>
<head>
<script src="http://code.jquery.com/jquery-latest.min.js"></script>
<script>

$(document).ready(function(){
$(".t").click(function(){
$("p").animate({left:'350px',top:'350px'},1000);
$("p").animate({left:'600px'},1000);
$("p").animate({top:'348px',opacity:'0.8'},500);

});});
$(document).ready(function(){
$(".t").click(function(){

$(".u").animate({right:'350px',top:'260px'},1000);
$(".u").animate({left:'500px'},500);
});});
$(document).ready(function(){
$(".t").click(function(){
$("#q").animate({top:'250px',opacity:'0.4'},1000);
$("#q").animate({left:'500px'},500);
$("#q").animate({top:'460px'},500);
$("#q").animate({left:'500'},500);

});
});
$(document).ready(function(){
$(".t").click(function(){
$("#s").animate({top:'350px',left:'400px'},500);
$("#s").animate({top:'360px'},500);
});

});
$(document).ready(function(){
$(".t").click(function(){
$("#c").animate({top:'360px',left:'500px',opacity:'0.5'},500);
});
});

</script>
</head>
<body>

<input type="submit" style="width:80px;font-size:2em;color:white;height:80px;box-shadow:0px -0px 5px skyblue; border-radius:100%;font-weight:bold;font-family:calibri;text-shadow: -1px -1px 0px #111111;background-color:#98bf22;cursor:pointer;" value="Press" class="t"></input>

<span id="s" style="background:red;width:100px;height:100px;position:absolute;box-shadow:0px 0px 5px 1px white;top:22%;left:20%;border-top-left-radius:100%;border-bottom-left-radius:100%;"></span>
<p style="background:#777641;border-top-right-radius:100%;border-bottom-right-radius:100%;width:100px;height:100px;position:absolute;top:21.3%;left:60%;box-shadow:0px 0px 5px 2px white;"></p>
<span class="u" style="background:#2198bf;border-top-right-radius:100%;border-top-left-radius:100%;width:100px;height:100px;position:absolute;top:14%;left:40%;box-shadow:0px 0px 5px 3px white;"></span>
<span id="q" style="background:blue;width:100px;border-bottom-left-radius:100%;border-bottom-right-radius:100%;height:100px;position:absolute;top:30%;left:40%;box-shadow:0px 0px 5px 2px white;"></span>
<span id="c" style="background:yellow;width:100px;height:100px;position:absolute;top:22%;left:40%;box-shadow:0px 0px 5px 1px white;"></span>

</body>
</html> 
```

这是小提琴- [http://jsfiddle.net/stackmanoz/vbkBQ/9/](http://jsfiddle.net/stackmanoz/vbkBQ/9/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T04:41:40.187

这个脚本做你所期望的

```
 $(document).ready(function(){
$(".t").click(function(){
    if($("p").css("left") == '60%'){  //check if p exist in the default position
        $("p").animate({left:'350px',top:'350px'},1000);
        $("p").animate({left:'600px'},1000);
        $("p").animate({top:'348px',opacity:'0.8'},500);
    }else{ //if p is animated and move to new position reset is position
        alert("here");
        $("p").css('top','21.3%');
        $("p").css('left','60%');
    }
});}); 
```

此脚本检查 P 元素是否已设置动画并移动到新位置，如果移动则重置它，否则为该元素设置动画。也可以对小提琴中的其他元素进行类似的检查。

# delphi - 将字节的零终止原始缓冲区复制到字符串

> ID：14472385
> 
> 赞同：1
> 
> 时间：2013-01-23T04:18:44.107
> 
> 标签：delphi, type-conversion, ansi

对不起，我一直在问所有这些问题。无论如何，我的问题是我是否正确地将值转换为字符串？（不是 unincode 字符串）。

```
const
address:dword=$0057B568;
var
a:string;
len,i:dword;
begin
len:=0;
repeat
inc(len);
until ((pbyte(address+len)^=0));//and(pbyte(address+1)^=0));(for unincode)

for I:=0 to len do
a:=a+chr(pbyte(address+I)^);
//stringreplace(a,#0,'',[rfreplaceall,rfignorecase]);
MessageBox(0,pchar(a),'',0);
end. 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-23T04:31:13.420

不，这是不正确的。代码相差一个字节。首先，它通过忽略第一个字节来假设字符串至少有一个字符长。接下来，它复制一个额外的字节。您的代码可以大大简化：

```
a := PAnsiChar(address); 
```

# iphone - 如何分隔 NSString 的各个部分？

> ID：14472388
> 
> 赞同：0
> 
> 时间：2013-01-23T04:19:15.547
> 
> 标签：iphone

我有一个 NSStrings 的 NSMutableArray，其中数组的每个元素的格式等于 @"key is 1::value is 1"。现在我想将“::”之前的字符串部分存储在array1中，将“::”之后的字符串部分存储在array2中。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T04:42:30.680

我找到了方法。在迭代原始数组的元素时，我将分别在数组 1 和数组 2 中添加 beforeString 和 afterString

```
for(int i=0;i<self.originalArray.count;i++)
    {
      NSString *temp=[self.originalArray objectAtIndex:i];

        NSRange r = [temp rangeOfString:@"::"];
        NSString *beforeString = [temp substringToIndex:r.location];
        NSString *afterString = [temp substringFromIndex:r.location+2];

        [array1 addObject:beforeString];  
        [array2 addObject:afterString];  
     } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T04:21:06.760

拆分字符串的关键是使用 NSString 上的[componentsSeparatedByString:](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/occ/instm/NSString/componentsSeparatedByString%3a)方法将字符串拆分为 NSArray。阅读有关此方法如何处理空白字符串等的文档，但这就是您要使用的。

您说您有一个字符串数组，因此基本实现将涉及迭代该数组并将每个元素添加到其他两个数组。

```
NSMutableArray *arrayOfStrings = [NSMutableArray array];
NSMutableArray *array1 = [NSMutableArray array];
NSMutableArray *array2 = [NSMutableArray array];

for (NSString *string in arrayOfStrings)
{
    NSArray *components = [string componentsSeparatedByString:@"::"];
    if ([components count] == 2)
    {
        NSString *obj1 = [components objectAtIndex:0];
        NSString *obj2 = [components objectAtIndex:1];
        [array1 addObject:obj1];
        [array2 addObject:obj2];
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T04:24:43.703

**这是代码：**

```
NSArray *temp = [YourString componentsSeparatedByString:@"::"];
NSString *str1 = [temp objectAtIndex:0];
NSString *str2 = [temp objectAtIndex:1]; 
```

但在访问数组中的对象之前.. 检查它是否包含该值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T04:25:12.260

用这个：

```
[array1 addObject:[[YourString componentsSeparatedByString:@"::"] objectAtIndex:0]];
[array2 addObject:[[YourString componentsSeparatedByString:@"::"] objectAtIndex:1]]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-23T04:27:20.187

尝试这个 ：：

```
NSString *s = @"key is 1::value is 1";

NSArray *a = [s componentsSeparatedByString:@"::"];

NSLog(@" -> %@ --> %@", [a objectAtIndex:0], [a objectAtIndex:1]); 
```

# c - Windows上的C，复制文件的代码不起作用

> ID：14472389
> 
> 赞同：3
> 
> 时间：2013-01-23T04:19:16.040
> 
> 标签：c, windows, copy, cmd

我有这段代码；它在您直接将参数写入 时有效`system()`，如果您将参数传递给它则无效。请问有什么帮助吗？

```
char dest[100];
char file[50];
char dir[100];

printf("Enter source path: ");
scanf("%s", dir);

printf("Enter filename: ");
scanf("%s", file);

printf("Enter destination path: ");
scanf("%s", dest);

system("move \"c:\\users\\putty.exe\" g:\\ \n" );  /* <--works        */
system("move \"%s%s\" %s", dir,file,dest);         /* <--doesn't work */ 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T04:26:00.973

你可以试试这个

```
char dest[100];
char file[50];
char dir[100];
char command[300];
printf("Enter source path: ");
scanf("%s", dir);
printf("Enter filename: ");
scanf("%s", file);
printf("Enter destination path: ");
scanf("%s", dest);
sprintf(command,"move %s%s %s", dir,file,dest);  
system(command); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-23T04:23:29.383

该`system()`命令不是`snprintf()`替代品。您需要使用`snprintf()`然后`system()`：

```
char command[1024];
...
snprintf(command, sizeof(command), "move \"%s%s\" %s", dir, file, dest);
system(command); 
```

或者，鉴于您在 Windows 上，您可以使用`snprintf_s()`而不是`snprintf()`. 您可能还注意到，如果用户没有在`dir`值的末尾留下反斜杠，那么目录和文件名的最后一个组成部分会组合在一起。您可能应该使用：

```
snprintf(command, sizeof(command), "move \"%s\\%s\" %s", dir, file, dest); 
```

尽管 Windows 内核对路径名中的斜杠非常满意，但命令处理器却不那么满意。由于您不是直接调用操作系统，而是调用命令处理器来运行程序，因此我相信您需要使用反斜杠。

请注意，您的编译器应该已经告诉您您没有`system()`正确调用。标头是`<stdlib.h>`并且表明该函数只接受一个参数。

> ### ISO/IEC 9899:2011 §7.22.4.8`system`功能
> 
> 概要
> 
> ¶1`#include <stdlib.h>`
> 
> `int system(const char *string);`
> 
> 描述
> 
> ¶2 如果 string 是空指针，则该`system`函数确定主机环境是否具有命令处理器。如果 string 不是空指针，则该`system` 函数将指向的字符串传递`string`给该命令处理器，以按照实现应记录的方式执行；这可能会导致程序调用`system`以不符合的方式运行或终止。

如果您的编译器没有告诉您您`system()`在第二次调用时误用了，或者没有抱怨`system()`在使用之前声明的内容，那么您需要在编译时调高警告级别，或者获得更好的编译器。如果它在警告您，您需要注意它所说的内容。请记住，编译器比您更了解 C。

# android - 在 android 中使用共享首选项在表单中填写数据

> ID：14472390
> 
> 赞同：0
> 
> 时间：2013-01-23T04:19:24.243
> 
> 标签：android

我正在开发一个用于管理和创建个人和名片的 android 应用程序。如何在创建卡片时使用共享首选项（我将在其中存储我的个人和专业信息）。每次我需要创建新卡时，程序都应该要求我从共享首选项中收集信息，并且我的“创建新卡”表单应该要求添加新字段（例如共享首选项中不存在的另一个或新电子邮件) 动态。

请让我知道解释这种情况的任何示例示例.....我在互联网上进行了广泛搜索以找到一些示例，但无法根据我的要求获得任何示例。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T04:28:20.407

根据您的要求，最好使用[`sqlite database`](http://www.vogella.com/articles/AndroidSQLite/article.html). 因为如果您要添加更多记录，那么最好使用数据库来存储类似类型的数据..

否则，如果您只想使用共享首选项，请尝试这样...

```
SharedPreferences preferences = PreferenceManager.getDefaultSharedPreferences(this);
//Storing data
Editor edit = preferences.edit();
edit.putString("pref_empId", _empid);
edit.putString("pref_userName", _username);
edit.putString("pref_userType", _usertype);
edit.commit();

//Retrieving 
pref_userName = preferences.getString("pref_userName", "n/a");
pref_empId =  preferences.getString("pref_empId","n/a");
pref_userType =  preferences.getString("pref_userType","n/a"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T04:33:13.693

在共享首选项中，您可以将信息存储为键值对。有关详细信息，请阅读[http://developer.android.com/guide/topics/data/data-storage.html#pref](http://developer.android.com/guide/topics/data/data-storage.html#pref)

# asp.net-mvc-3 - 从 sql server 数据库中检索图像并在 MVC3 中显示

> ID：14472394
> 
> 赞同：1
> 
> 时间：2013-01-23T04:20:06.827
> 
> 标签：asp.net-mvc-3

我以二进制格式在数据库中存储了一些图像，现在我想在我的视图中显示这些图像，我们如何将这些图像从二进制格式再次转换为图像格式？

这是我在控制器中的操作方法

```
 public ActionResult DislpayAllImage()
           {
            DataSet dsa = new DataSet();
            dsa = objImage.getAllImages();
            DataTable dt = new DataTable();
            dt = dsa.Tables[0];
            if (dt != null)
            {
            for (int i = 0; i < dt.Rows.Count; i++)
            {
                Byte[] image = (Byte[])dt.Rows[i]["UsImage"];
                return File(image, "image/jpg");
             }
            }
        return View();

    } 
```

这是我在模型中的代码

```
 public DataSet getUserImage(int Id)
     {
        DataSet ds = new DataSet();
        try
        {
            DbCommand db = dbcon.GetStoredProcCommand("GetImage");
            dbcon.AddInParameter(db, "@Id", DbType.Int16, Id);
            db.CommandType = CommandType.StoredProcedure;
            return ds = dbconstr.ExecuteDataSet(dbCmd);
        }
        catch(Exception ex)
        {
            return ds = null;
        }
    } 
```

看法

```
 @foreach( var image in ViewData.Images )
 {
  <img src="@Url.Action("DislpayImage", "Home",new { id = image.ImageID })" />
 } 
```

我怎样才能在剃刀视图中显示我的图像，上面的代码也可以吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T05:02:05.907

您需要`DislpayImage()`像这样从视图中调用控制器的 Action()：

```
<img src="<%= Url.Action("DislpayImage", "Controller") %>" alt="myimage" /> 
```

或者

```
<img src="@Url.Action("DislpayImage", "Controller")" alt="myimage" /> 
```

希望它可以帮助你。

* * *

**编辑**

只需将要显示的图像的 id 传递给控制器​​操作

```
public ActionResult DislpayImage(int id)
     {
        DataSet dsa = new DataSet();

        dsa = objImage.getUserImage(id);
        var imagedata = dsa.Tables[0].Columns["MyImage"];
        return File(imagedata, "image/jpg");

     } 
```

现在传递要在视图中显示的图像的 id，如下所示：

```
<img src="@Url.Action("DislpayImage", "Controller", new { id="2" })" alt="myimage" /> 
```

现在您将获得 id 为 2 的图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T04:29:45.717

```
<% foreach( var image in ViewData.Images ) { %> 
  <%= Html.Image( Url.Action( "Show", "Image", new { id = image.ImageID } ) ) %> 
<% } %>

 public class ImageController : Controller

    {

        public void Show(string id)

        {

           Image image = GetImage(id);

           Response.Buffer = True;
           Response.Clear();
           Response.ContentType = "image/gif";
           Response.BinaryWrite( image.Data );
           Response.End();

       }

    } 
```

此回复只是另一个论坛答案的副本。这不是我自己的。我把它贴在这里是为了帮助你和这个论坛中的其他人遇到同样的问题。

这是主要链接：[http ://forums.asp.net/post/2264885.aspx](http://forums.asp.net/post/2264885.aspx)

# c# - 如何使用 Visual Studio 2012 在 IIS 8.0 中部署 WCF Web 服务？

> ID：14472395
> 
> 赞同：5
> 
> 时间：2013-01-23T04:20:14.060
> 
> 标签：c#, .net, wcf, visual-studio-2012, iis-8

我被卡住了，不知道如何在 iis8.0 中部署 wcf web 服务，任何人都可以帮助我了解在 iis 中部署 wcf web 服务的详细过程吗？

有没有需要设置的设置？

尝试过的是......

然后我通过提供站点名称和物理路径 (C:\inetpub\wwwroot\NEWFOLDER) 在 iis 中创建了一个新网站。然后我在管理模式下打开了 VS 解决方案并发布了它。在打开的对话框中，在 IIS 站点下创建了一个新的 Web 应用程序并将其发布。它是成功的，也可以在输出窗口中看到。

当单击 Connecting to http://localhost:[port#]/WebApplicationName 行的链接时，它会显示目录结构。然后单击 .svc 文件，它会给出错误消息“由于扩展​​配置，无法提供您请求的页面。如果页面是脚本，请添加处理程序。如果应该下载文件，请添加 MIME 映射

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-23T10:40:18.443

WCF Servive 处理程序未安装在您的服务器上。

在服务器管理器中

*   根据操作系统/框架版本展开“.Net 3.5”或“.Net 4.5”。

*   在“WCF 服务”下，选中“HTTP-Activation”（用于 http 绑定）或“Non-http”以用于其他绑定（tcp、命名管道等）。

*   点击“安装”按钮。

就这样

# ravendb - TransformResults 在字典上失败

> ID：14472397
> 
> 赞同：1
> 
> 时间：2013-01-23T04:20:58.353
> 
> 标签：ravendb

这是一个后续问题：[Accessing dictionary in TransformResults failed](https://stackoverflow.com/q/14451633/246811)

给定以下类：

```
 public class Product
    {
        public string Id { get; set; }
        public string Name { get; set; }
        public SpecialType DefaultOffer { get; set; }
        public Dictionary<SpecialType, string> Specials { get; set; }
    }

    public enum SpecialType
    {
        None = 0,
        Something1,
        Something2
    } 
```

我创建一个索引如下：

```
 public class ProductSummariesViaTransform : AbstractIndexCreationTask<Product>
    {
        public ProductSummariesViaTransform()
        {
            Map = products => from p in products
                              select new { p.Name };

            TransformResults = (db, products) =>
                                from product in products
                                select new
                                {
                                    Id = product.Id,
                                    Name = product.Name,
                                    SpecialOffer = product.Specials[product.DefaultOffer]
                                };
        }
    } 
```

如果我使用此索引进行查询，`.AsProjection<ProductSummary>()`则 SpecialOffer 始终为空，尽管 Id 和 Name 已正确填充。

但是，如果我更改转换以显式加载文档（如下所示），则 SpecialOffer 会按预期填充。

```
 TransformResults = (db, products) =>
                                from product in products
                                let p = db.Load<Product>(product.Id) // explicit load
                                select new
                                {
                                    Id = product.Id,
                                    Name = product.Name,
                                    SpecialOffer = p.Specials[p.DefaultOffer] // use explicit doc
                                }; 
```

撇开 TransformResults 是否是最好的方法的问题不谈，似乎没有必要在 Transform 中再次加载 Product 文档以便能够访问`Specials`字典。

我的理解是底层文档始终可用于转换。我错过了什么还是这是一个错误？

完整（通过）单元测试可在[https://gist.github.com/4601829](https://gist.github.com/4601829)获得。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T07:15:09.427

`AsProjection`更改传递给 TransformResults 的数据。你需要我们`As`或`OfType`，而不是。

# python - 使用 Python 使用 COM 访问返回值

> ID：14472401
> 
> 赞同：2
> 
> 时间：2013-01-23T04:21:04.837
> 
> 标签：python, com, ole

我正在使用带有 win32com 的 Python 来访问 COM 对象。其中一个 COM 对象应该返回另一个 COM 对象，但返回的是一个关于被调用方法的元组。有没有办法访问返回的数据？

我编写的语句是：

项目 = server.OPCHDAItems.AddItem("TIC101",1)

item 应该是添加的对象，一个 OPCHDAItem。当我打印项目时，我会得到

<COM 对象添加项>

该项目被添加到 OPCHDAItems 集合中，因为我可以看到集合的大小在增加。

从阅读有关 win32com 的文档中可以看出，方法调用返回了一个元组，但我找不到如何访问方法调用的返回数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T06:10:42.603

我可能错了，但我认为 OPCHDAItem 已正确添加。`print`是使用类的or`__repr__`方法`__str__`来打印一些东西。一个COM类是自动生成的，所以我猜这些方法没有重载。

尝试使用 MakePy 实用程序生成 COM 对象的接口（请参阅[http://oreilly.com/catalog/pythonwin32/chapter/ch12.html](http://oreilly.com/catalog/pythonwin32/chapter/ch12.html)）。它将创建一个包含 COM 对象描述的文件。在此文件中，您应该看到对象的属性和方法列表。

我希望它有帮助

# jquery - 1-2 像素抖动动画水平手风琴

> ID：14472406
> 
> 赞同：0
> 
> 时间：2013-01-23T04:22:01.723
> 
> 标签：jquery, animation

我正在为需要一些简单动画的网站构建自定义标题。标题以 3 个相同大小的 div 开始，当其中一个 div 被激活（单击）时，剩余的 div 会缩小，而激活的 div 会扩展以填充水平空间。

标题工作正常，但是当 div 扩展/缩小时，标题的整体水平尺寸往往会发生 1-2 像素的变化，这会使标题看起来抖动。如果您在与它交互时将注意力集中在标题的右侧，则可以看到它。

我已将代码简化为最基本的形式，并将其添加到 jsbin 中。

[http://jsbin.com/acikib/13/edit](http://jsbin.com/acikib/13/edit)

有什么方法可以消除抖动，或者有更好的实现方法可以避免它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T04:47:12.087

你的数学是关闭的。将最大宽度更改为`816`而不是`818`.

您的 CSS 声明每个块都是`296`, 所以`296*3 = 888`. 你的 Javascript 告诉大块是`818`，小块是`36`。 `818+36*2 = 890`.

因此，您将框的总大小增加了 2 个像素，这第一次导致了锯齿状动画。

[http://jsbin.com/acikib/20/edit](http://jsbin.com/acikib/20/edit)

# c - 二进制移位运算符。如何确定手术后的价值？

> ID：14472407
> 
> 赞同：0
> 
> 时间：2013-01-23T04:22:12.840
> 
> 标签：c

是否有简单的方法来确定有符号数的左移或右移输出？ [此](http://msdn.microsoft.com/en-us/library/f96c63ed%28v=vs.80%29.aspx)页面将左移描述为`expr1*2*expr2`，将右移描述为`expr1/2*expr2`，但是当我在 CI 中尝试类似的操作时`27 << 5`，得到的值大于`27*2*5 = 270`。此外，对于负输入，例如`-27 << 4`or `-120 >> 5`，这些操作如何工作？在轮班工作时是否需要考虑特殊情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T04:27:45.387

移位相当于乘以*2 的幂*，而不仅仅是参数乘积的两倍。换句话说， 27 << 5 == 27 * 2 ⁵。右移等效于下限除法，但没有为负操作数定义。

如果乘以或除以 2 的固定幂，最好用`*`or`/`运算符写出来。如果可能，编译器会将其转换为更快的移位操作，并且您可以避免围绕负数、操作顺序等的粗糙边缘。

有很多资源可以帮助您深入挖掘（或者确实应该在 MSDN 之前咨询非平台特定问题），例如[Wikipedia](http://en.wikipedia.org/wiki/Bitwise_operation#Bit_shifts)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T04:29:17.160

当您（向左）移动多个二进制位时，它不是移位的乘法。这是乘以`2^shift`（2 的移位幂）。

*例如*

```
shift    multiplier
 1       2
 2       4
 3       8
 4       16 
```

右移是相同的，但实际上是一个除法。

所以.. `27 << 5`是这样的：

```
27      == 00000000 00011011
27 << 5 == 00000011 01100000 == 864 
```

并向右移动：

```
27 >> 1 == 00000000 00001101 == 13
27 >> 2 == 00000000 00000110 == 6
27 >> 3 == 00000000 00000011 == 3
27 >> 4 == 00000000 00000001 == 1
27 >> 5 == 00000000 00000000 == 0 
```

当你移动负数时，我相信最左边的位通常会被保留。不过我不确定。老实说，我只移动过无符号数字，我个人不相信移动有符号值。

每当您移动时，您都需要注意截断（*即*会丢失一些位）。通常它只是被截断的零位，但如果你移动得足够多（或者你向右移动）你会丢失 1 位。这取决于您的整数类型的容量，并且绝对可以利用您的优势。

# sql - 我们应该如何计算 SQL 中不同对/元组的数量？

> ID：14472409
> 
> 赞同：9
> 
> 时间：2013-01-23T04:22:28.477
> 
> 标签：sql

假设架构是这样的：

```
First Name | Last Name | Age | ID
====================================
John         Smith       18    123
John         Smith       21    234
John         Smith       19    123
Cathy        Zhang       20    144
Cathy        Zhang       20    144
Jackie       Chan        35    456 
```

假设我想计算每个（名字，姓氏）之后不同对的数量。所以输出应该是：

```
John         Smith       3
Cathy        Zhang       1
Jackie       Chan        1 
```

我想我可以先做：

```
SELECT FirstName,LastName,Age,ID,COUNT(*); 
```

接着

```
SELECT FirstName,LastName,COUNT(*) 
```

有更好的方法吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-23T04:26:28.977

要返回每个不同名字姓氏的计数，您可以使用`COUNT`and `GROUP BY`：

```
SELECT FirstName, LastName, COUNT(*)
FROM TableName
GROUP BY FirstName, LastName 
```

在您上面的示例中，我认为您的意思是张的计数为 2。

- 编辑

如果我正确理解您的最新评论，您还想使用`DISTINCT`：

```
SELECT FirstName, LastName, Age, Id, COUNT(*)
FROM (SELECT DISTINCT FirstName, LastName, Age, Id FROM TableName) T
GROUP BY FirstName, LastName, Age, Id 
```

祝你好运。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T04:36:39.397

请试试：

```
SELECT 
    FirstName, 
    LastName, 
    COUNT(*) 
FROM (
        SELECT DISTINCT * FROM YourTable 
    ) X
GROUP BY FirstName, LastName 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-23T04:26:42.470

尝试使用，

```
SELECT firstName, lastName, count(1) FROM name_tab GROUP BY firstName, lastName; 
```

# c# - 加载图片编辑

> ID：14472411
> 
> 赞同：1
> 
> 时间：2013-01-23T04:22:47.630
> 
> 标签：c#, drawing, picturebox

我应该从文件中加载图像，并且该图像应覆盖图片框的 80％，然后在其上绘制一些东西...加载没有问题，但是尝试在其上绘制任何内容会导致错误，该错误具有不正确的参数(g.FillRectangle...)。

我在堆栈建议中找到了刷新图片框的建议，但它没有任何改变......
而且我不知道如何解决这个问题......

```
private void button1_Click_1(object sender, EventArgs e)
{
    pictureBox1.Width = (int)(Width * 0.80);
    pictureBox1.Height = (int)(Height * 0.80);

    // open file dialog 
    OpenFileDialog open = new OpenFileDialog();
    // image filters
    open.Filter = "Image Files(*.jpg; *.jpeg; *.gif; *.bmp)|*.jpg; *.jpeg; *.gif; *.bmp";
    if (open.ShowDialog() == DialogResult.OK)
    {
        // display image in picture box
        pictureBox1.Image = new Bitmap(open.FileName);
        // image file path
        //  textBox1.Text = open.FileName;
        g.FillRectangle(Brushes.Red, 0, 0, 20, 50);
        pictureBox1.Refresh();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T04:29:46.130

在图像上绘制的使用[`Graphics.FromImage`](http://msdn.microsoft.com/en-us/library/system.drawing.graphics.fromimage.aspx)或[`Control.CreateGraphics`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.creategraphics%28v=vs.100%29.aspx)方法：

```
var img = new Bitmap(open.FileName);
using (Graphics g = Graphics.FromImage(img))
{
    g.FillRectangle(Brushes.Red, 0, 0, 20, 50);  
}
pictureBox1.Image = img; 
```

`PictureBox`或直接按事件绘制`Paint`（例如使用[`Anonymous Methods`](http://msdn.microsoft.com/en-us/library/0yw3tz5k%28v=VS.100%29.aspx)）：

```
pictureBox1.Paint += (s, e) => e.Graphics.FillRectangle(Brushes.Red, 0, 0, 20, 50); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T04:47:49.043

下面的代码对我来说很好......你能试试同样的吗

```
private void button1_Click(object sender, EventArgs e)
        {
            pictureBox1.Width = (int)(Width * 0.80);
            pictureBox1.Height = (int)(Height * 0.80);

            // open file dialog 
            OpenFileDialog open = new OpenFileDialog();

            // image filters
            open.Filter = "Image Files(*.jpg; *.jpeg; *.gif; *.bmp)|*.jpg; *.jpeg; *.gif; *.bmp";
            if (open.ShowDialog() == DialogResult.OK)
            {
                // display image in picture box
                pictureBox1.Image = new Bitmap(open.FileName);
                // image file path
                //  textBox1.Text = open.FileName;
                Graphics g = Graphics.FromImage(pictureBox1.Image);
                g.FillRectangle(Brushes.Red, 0, 0, 20, 50);
                pictureBox1.Refresh();
            }
        } 
```

# scala - 使用私有构造函数向类添加方法？

> ID：14472413
> 
> 赞同：0
> 
> 时间：2013-01-23T04:22:55.983
> 
> 标签：scala

有一个类（特别是com.twitter.scalding 中的[TypedPipe[T]](https://github.com/twitter/scalding/blob/develop/src/main/scala/com/twitter/scalding/TypedPipe.scala)）只有一个私有构造函数，我希望向它添加一些方法。它看起来像这样

```
class TypedPipe[+T] private ( a : Int) { 

} 
```

这通常通过定义隐式转换方法来完成。但是，我需要访问 a 来定义我想要的方法。这在 Scala 中是不可能的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T08:27:37.930

如果我正确解释了您的问题，答案是肯定的，这在 Scala 中根本不可能。这与私有构造函数无关。如果它是公开的，您将遇到完全相同的问题。

```
class TypedPipe[+T] private ( a : Int) { 

} 
```

这里的重点是没有`val`or `var`before `a`。`a`不是 的属性`TypedType`，而只是其构造函数的**参数**，即**没有创建属性来保存对象内部 a 的值**

这等效于 Java 代码：

```
public class MyClass{
    private final String value;
    public MyClass(int a){
        System.out.println("I was initialized with " + a);
        this.value="b";
    }
} 
```

您实际上可以使用 REPL 轻松检查它。如果您想`a`在构造函数之外访问，它必须是 a`var`或 a`val`

```
class TypedPipe[+T] private ( a : Int) {
  println(a)
}

class TypedPipe1[+T] private (val a : Int) {
  println(a)
} 
```

我是 REPL 中 javap 反汇编程序的忠实粉丝：

```
scala> :javap -p TypedPipe

scala> Compiled from "TypedType.scala"
public class TypedPipe extends java.lang.Object implements scala.ScalaObject{
    private TypedPipe(int);
}

scala> :javap -p TypedPipe1

scala> Compiled from "TypedType.scala"
public class TypedPipe1 extends java.lang.Object implements scala.ScalaObject{
    private final int a;
    public int a();
    private TypedPipe1(int);
} 
```

如您所见，在第一个版本中，没有成员属性来保存 的值`a`，也没有 getter

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T04:31:47.343

只有`TypedPipe`的同伴可以调用它的构造函数。时期。大概有一个工厂（在所说的伴侣中）可以用来创建实例（否则它有什么好处？）。从那里你可以......这些天接受的术语是什么？“延长？” “提高？” 或者，正如我们老前辈所说，“皮条客”那种。

# ruby - 在安装 nokogiri 的 OSX 10.8 上缺少 libiconv

> ID：14472414
> 
> 赞同：3
> 
> 时间：2013-01-23T04:23:00.917
> 
> 标签：ruby, gem, nokogiri, libiconv

我知道以前有人问过这个问题，但我很难让它发挥作用，不幸的是，很多宝石都依赖于 nokogiri

我正在使用 rvm 运行 10.8.2，ruby 1.9.3

运行以下命令，从有关该主题的各种要点/堆栈溢出问题中获得： gem install nokogiri -- --with-iconv-dir=/usr/local/Cellar/libiconv/1.13.1

给出“libiconv 丢失。”

即使查看该目录内部也会显示 libiconv 目录。

我怎样才能让这个工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T17:06:45.997

[http://nokogiri.org/tutorials/installing_nokogiri.html](http://nokogiri.org/tutorials/installing_nokogiri.html)上有说明，解释了过去对 homebrew 0.9 用户有效的方法。

如果这些说明对您不起作用，请发送电子邮件至 nokogiri-talk，我们会解决并更新安装文档。

# ios - Xcode：使用核心图像与 alpha 合成

> ID：14472415
> 
> 赞同：7
> 
> 时间：2013-01-23T04:23:05.617
> 
> 标签：ios, image, core-graphics, core-image

我想创建一个 CoreImage 过滤器链，并能够通过将其单独的效果与 alpha 或不透明度设置合成来控制链中每个过滤器的“强度”，但我没有看到与 alpha 合成的方法或文档中的不透明度。

我想我可以跳出核心图像过滤器链并与核心图形上下文合成。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-11-23T09:27:22.287

CIColorMatrix[过滤](https://developer.apple.com/library/mac/documentation/GraphicsImaging/Reference/CoreImageFilterReference/Reference/reference.html#//apple_ref/doc/filter/ci/CIColorMatrix)器可用于更改 CIImage 的 alpha 分量，然后您可以将其合成到背景图像上：

```
CIImage *overlayImage = … // from file, CGImage etc
CIImage *backgroundImage = … // likewise

CGFloat alpha = 0.5;
CGFloat rgba[4] = {0.0, 0.0, 0.0, alpha};
CIFilter *colorMatrix = [CIFilter filterWithName:@"CIColorMatrix"];
[colorMatrix setDefaults];
[colorMatrix setValue:overlayImage forKey: kCIInputImageKey];
[colorMatrix setValue:[CIVector vectorWithValues:rgba count:4] forKey:@"inputAVector"];

CIFilter *composite = [CIFilter filterWithName:@"CISourceOverCompositing"];
[composite setDefaults];
[composite setValue:colorMatrix.outputImage forKey: kCIInputImageKey];
[composite setValue:backgroundImage forKey: kCIInputBackgroundImageKey];

UIImage *blendedImage = [UIImage imageWithCIImage:composite.outputImage]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-07-29T12:37:18.573

mrwalker 提供了一个很好的答案，我将其转换为 Swift。

## 斯威夫特 5

```
let sourceImage: CIImage = ...

// This is where I get the overlayImage, and intensity is alpha, used later
guard let ciFilter = LUTBuilder.getCIFilter(from: filter.filter), let intensity = filter.intensity else { return CIImage() }
ciFilter.setValue(sourceImage.clampedToExtent(), forKey: kCIInputImageKey)

let overlayImage = ciFilter.outputImage!.cropped(to: sourceImage.extent)

let alpha = CGFloat(intensity)
let rgba = [0.0, 0.0, 0.0, alpha]

guard
    let colorMatrix = CIFilter(name: "CIColorMatrix"),
    let composite = CIFilter(name: "CISourceOverCompositing")
else { return CIImage() }

colorMatrix.setDefaults()
colorMatrix.setValue(overlayImage, forKey: kCIInputImageKey)
colorMatrix.setValue(CIVector(values: rgba, count: 4), forKey: "inputAVector")

composite.setDefaults()
composite.setValue(colorMatrix.outputImage, forKey: kCIInputImageKey)
composite.setValue(sourceImage, forKey: kCIInputBackgroundImageKey)

return composite.outputImage ?? CIImage() 
```

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2013-01-23T04:35:27.263

就这样搞定了。此答案中的代码：[https ://stackoverflow.com/a/3188761/1408546](https://stackoverflow.com/a/3188761/1408546)

```
UIImage *bottomImage = inputImage;
UIImage *image = filterOutput;
CGSize newSize = CGSizeMake(inputImage.size.width, inputImage.size.height);
UIGraphicsBeginImageContext( newSize );
[bottomImage drawInRect:CGRectMake(0,0,newSize.width,newSize.height)];
[image drawInRect:CGRectMake(0,0,newSize.width,newSize.height) blendMode:kCGBlendModeNormal alpha:_opacity];
UIImage *blendedImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

# python - 我的 python 套接字不会收到？

> ID：14472418
> 
> 赞同：0
> 
> 时间：2013-01-23T04:23:18.687
> 
> 标签：python, sockets

我有 python 套接字问题
我可以启动脚本，使用 wireshark，数据被发送到我的电脑，
但是 Python 看不到数据？
正如我所看到的，套接字应该在数据包嗅探器上接收什么，有什么想法吗？
我几乎尝试了所有方法，但无论如何我似乎都无法让它工作。
我一直想永远完成这件事，但没有更多的时间去做。
但现在我愿意。

```
import sys
import socket
import os
import hashlib
import subprocess

class ConnectToServer:

    port = 12345
    host = "80.69.129.118"

    s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    s.bind((socket.gethostname(), 12345))

    s.connect((host , port))
    message = "LOGON\n Protocol-Version: 2.0\n App-type: Windows x86\n Operator: PC_CLIENT\n name: palpythonbot@gmail.com\n capabilities: 4\n"

class SendAndReceive:

    s.send(message)
    rply = s.recv(10)
    #####WONT RECEIVE RPLY
    print rply
    passmd5 = hashlib.md5()
    passmd5.update(pal_pass)
    authmessage = "AUTH\n Encryption-Type: 1\n Online-Status: 1\n Last: 1\n" +     passmd5.hexdigest()
    s.send(authmessage)
    rply1 = s.recv(10)
    print rply1
    s.close() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T06:49:39.240

我看到两件事看起来很可疑：

*   您在稍后用于通信的套接字上使用 bind()。这通常仅用于您用于 accept() 调用的套接字。
*   检查您的对等方是否需要 CRLF 行结尾。如果它正在等待 CRLF 对，它甚至不会将您发送的多行识别为单个完整行。

顺便说一句，可读性黑客：

```
authmessage = ("AUTH\n"
               " Encryption-Type: 1\n"
               " Online-Status: 1\n") 
```

括号扩展了表达式，“两个”“字符串”被自动连接起来。另外，正如我写的那样，前导空格是否正确？

# gnuplot - 在gnuplot中绘制具有多条记录的一维二进制数组（uint8）

> ID：14472419
> 
> 赞同：5
> 
> 时间：2013-01-23T04:23:24.887
> 
> 标签：gnuplot

我知道这个问题类似于[Gnuplot: How to plot multiple time series from a binary format](https://stackoverflow.com/questions/9441293/gnuplot-how-to-plot-multiple-time-series-from-a-binary-format/9878787#9878787)；但是我已经设置了一个略有不同的示例，所以希望可以发布（自我回答如下）。

我正在生成这样的二进制数据（`genbindata.pl`Perl 脚本见下文）：

```
$ perl genbindata.pl > bin.dat
$ du -b bin.dat 
234 bin.dat 
```

这个二进制文件`bin.dat`的格式如下（前两行是基于 1 和基于 0 的索引）：

```
>|  1   2   3   4 |  5   6 ... 104 |105 106 ... 204 |205 206 ... 234
>|000 001 002 003 |004 005 ... 103 |104 105 ... 203 |204 205 ... 233
>| WW  WW  WW  WW | XX  XX ...  XX | YY  YY ...  YY | ZZ  ZZ ...  ZZ 
```

... `WW`4 个字节的签名在哪里；`XX`是 100 个字节的正弦曲线，值从 0 到 63；`YY`是 100 个字节的余弦值，从 64 到 127；是 30个`ZZ`字节的随机值；这里考虑一个字节`uint8`。

**我想要做**的是按`bin.dat`原样使用它（*也就是说，我不想编写脚本来解析数据，并以更`gnuplot`友好的格式*输出） - 并绘制正弦和余弦数据，用单独的颜色，在一个图表上。

我找到了帮助的[Binary general](http://gnuplot.sourceforge.net/docs_4.2/node103.html)部分（在`gnuplot`终端中输入相同`help binary general`），但很难理解它（*并且在网上找不到更多其他信息*）。所以 - 在网上搜索（少数）示例之后 - 我`gnuplot`在终端模式下启动，我正在尝试以下`gnuplot`命令：

`plot "bin.dat" binary skip=4 array=100x1:100x1 format='%uint8%uint8' origin=(0,0):(100,0) using 0:1 with lines`

...希望它的意思是：“跳过前四个字节，将下一个字节解释为 100 个字节的一维数据（格式为 '%uint8'，跳过后原点位于 0,0），然后是 100 个字节的一维数据（一列100行，格式为'％uint8'，跳过后原点为100,0）；并使用伪列0（点的索引）作为x轴，以及数组的第一个结果，用线条绘制“ ...不幸的是，这**并不**意味着 - 因为没有绘制任何内容，并且该命令失败并显示“*该样式的使用规范太多*”。

然后我想 - 好吧，如果有“太多`using`”，那么我会在`1`那里绘制：

```
 gnuplot> plot "bin.dat" binary skip=4 array=100x1:100x1 format='%uint8%uint8' origin=(0,0):(100,0) using 1 with lines
    Warning: empty y range [0:0], adjusting to [-1:1] 
```

这实际上会生成一个图 - 在 y=0 处有一条平坦的红线。

因此，鉴于它抱怨 y 范围，我将原始参数的顺序（（100,0）更改为（0,100）），最后得到一个不生成任何消息的命令：

```
gnuplot> plot "bin.dat" binary skip=4 array=100x1:100x1 format='%uchar%uchar' origin=(0,0):(0,100) using 1 with lines
gnuplot> 
```

...但它只绘制一条倾斜线：

[![gnuplot-失败-1](../Images/d6578f3e2f3abedaa4fc3b31907dc285.png)](https://i.stack.imgur.com/Cs7jd.png)

...完全不像我期望的正弦曲线`:(`

所以，我的问题是 - 我怎样才能`gnuplot`绘制我想要的数据？

* * *

这里是`genbindata.pl`：

```
#!/usr/bin/env perl

use 5.10.1;
use warnings;
use strict;
use open IO => ':raw'; 

binmode(STDIN);
binmode(STDOUT);

my $signatur = "SIGN";
my @signature = unpack('C*', $signatur);

my (@ch1, @ch2) = ()x2;

# generate 100 samples of (co)sinusoid
for ( my $ix = 0; $ix < 100; $ix++ ) {
  my $val1 = 1 + sin($ix*2*3.14/100); # range: 0-2
  my $val2 = 1 + cos($ix*2*3.14/100); # range: 0-2
  my $ch1val = int($val1*32);
  my $ch2val = int($val2*32+64);
  push(@ch1, $ch1val);
  push(@ch2, $ch2val);
  #print STDERR "val[$ix]: $ch1val, $ch2val\n";
}

# generate 30 samples random
my @end = ();
for ( my $ix = 0; $ix < 30; $ix++ ) {
  my $val = int(128*rand() + 32);
  push(@end, $val);
  #~ print STDERR "val[$ix]: $val\n";
}

# concatenate arrays:
my @output = (@signature,@ch1,@ch2,@end);
my $sizarr = scalar(@output);
#~ print STDERR " ".." ";

# print output - uint8: "C"
my $outstr = pack("C*", @output);
my $lenstr = length($outstr);
#~ print STDERR "output size: $sizarr; output length: $lenstr\n";
print $outstr;

# end 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-23T04:27:50.577

好吧，上面的问题存在一些误解；我为此使用 gnuplot 4.4。首先，请注意我如何认为“ `100x1`”中的“ `array=100x1:100x1`”表示 100 行和 1 列的数据集 - 这与一维数组相同（隐含索引）。然而，事实**并非**如此；注意`help binary array`说：

> 注意：Gnuplot 4.2 版使用语法 array=128x128 而不是
> array=(128,128)。较旧的语法现已弃用，但可能
> 仍然有效 [...]
> 
> 坐标将由 gnuplot 生成。必须
> 为数组的每个维度指定一个数字。例如，`array=(10,20)`表示
> 底层采样结构是**二维**的，沿
> 第一 (x) 维有 10 个点 [..]

因此，即使“ `100x1`”*在概念上*可能与 1D 数组相同——只是通过这样编写，我已经将 2D 数据指示为`gnuplot`（*例如图像；我希望它的实例化方式不同于 100 的 1D 数组元素，在内部`gnuplot`*）。所以，我应该写“ `array=(100):(100)`”。请注意，原则上可以为一维删除括号，因此“ `array=100:100`”也可以 - 除非使用`-1`（读取到文件末尾）作为维度；然后必须使用括号，否则会发生错误。

然后就是多条记录的问题。我很少能找到对这些“多条记录”的引用`gnuplot`- 有[二进制语法减少 [Was: 冗长的讨论...] (gnuplot.devel)](http://permalink.gmane.org/gmane.comp.graphics.gnuplot.devel/1579)：

> 如何丢弃每个文件功能的多条记录。如果要绘制多个大数据集，只需创建多个文件。

一方面，我很高兴他们保留了多记录功能 - 但我当然希望能更好地解释它。我在[Gnuplot 中发现的另一条评论，Plot with sum of datasets](http://www.graphicsgroups.com/9-gnuplot/9bc8bdf3399b94f3.htm)：

> ... gnuplot（3.6，即）可以在单个记录上绘制数据组合，但不能组合来自多个记录的数据，更不用说多个数据集了。
> 
> 您必须编写一个预处理器来执行这些计算。

`help binary array`只是说：

> 冒号可用于分隔多条记录的维度。
> 例如，`array=25:35`表示文件中有两条一维记录
> 。

这让我想到，如果我将“ `array=(100):(100)`”指定为两个（多个）记录，我可以分别在 a`using 0:1`和`using 0:2`语句中“访问”这些记录（使用伪列 0 来索引它们的数据）。事实证明，情况**并非**如此——在我看来，这种多记录规范所允许的唯一设施是能够通过`origin`和/或`skip`参数控制它们，但只能*在一个 plot 内*。

谈到记录，注意还有`help binary record`：

> 此关键字与 具有相同的功能`array`，具有相同的语法。但是，`record`会导致 gnuplot 不生成坐标信息。这是针对此类信息可能包含在二进制数据文件的列之一中的情况。

这并没有告诉我太多 - 但我认为这意味着，原则上，如果使用;*应该*指定伪列 0 来索引数据。`record`但不应该*这样*做`array`。因此，以下两个命令是等价的：

`plot "bin.dat" binary array=(50) format='%uint8' using 1 with lines
plot "bin.dat" binary record=(50) format='%uint8' using 0:1 with lines`

...它将前 50 个样本作为一维数据的第一个（也是唯一一个）记录，其（唯一）数据列格式化为`uint8`- 并绘制它：

[![gnuplot-50-samps](../Images/d58fb5b1548134bcf1de934e8deda262.png)](https://i.stack.imgur.com/I84ht.png)

注意

*   `record`使用 just将`using 1`生成与上述等效命令相同的图像；
*   但是这样做`array`会`0:1`从问题 OP 中生成一行！

很遗憾，似乎没有一种明显的方法来调试“列标识符”背后的结构，例如`1`in `using 1`，以便以一种或另一种方式确认；但我认为以上意味着：

*   在 中`record`，`1`描述了一个 1 列 (50x1) 数据集 - 因此它可以与另一个 1 列索引耦合
*   在 中`array`，`1`实际上描述了一个 2 列 (50x2) 数据集，其中第一列是索引 - 这就是为什么当它与另一个索引（伪列 0）耦合时，会生成一行（^(因为索引伪列与第一列耦合）列 from `1`，这也是一个索引 - 即单调上升（或下降）整数的列表)）

然后，注意`format`参数 -`help binary format`状态：

> [...] 例如，`format="%uchar%int%float"`
> 将无符号字符与第一个 using 列关联，将 int 与
> 第二列关联，将 float 与第三列关联。[...]

现在，这让我想到，如果我想处理两个一维多记录，我必须使用这样的东西：

`plot "bin.dat" binary array=(50):(50) format='%uint8%uint8' using 1 with lines`

...生成：

[![gnuplot-2rec-50-samps-resamp](../Images/01b8d6d9b765d3bfcd35bd7c43093720.png)](https://i.stack.imgur.com/66FJA.png)

很明显，与正弦重叠的余弦部分在某种程度上是错误的。但更有趣的是，该图仅在 50 个样本中显示了这些函数的整个周期——虽然我们已经明确生成了数据，所以正弦和余弦都有 100 个样本的周期！因此，数据以某种方式重新采样 - 事实证明，问题出在`format`.

通过指定“ `array=(50):(50)`”，我们指定*了两个*（多个）记录，它们是**1-D**，因此每个记录都有一个（并且只有一个）列。但是，“ `format='%uint8%uint8'`”**并不是**指两条记录的每一列的格式——它显然是指第二个*维度*；并且鉴于我们的两个记录是一维的，`gnuplot`只需从记录中删除所有其他样本。

`format='%uint8'`因此，我们可以在 plot 命令中只指定一个“ ”：

`plot "bin.dat" binary array=(50):(50) format='%uint8' using 1 with lines`

...在 50 个样本中只得到半个周期：

[![gnuplot-2rec-50-samps](../Images/8988a6bbe5fe42ce0f1297237037d3c1.png)](https://i.stack.imgur.com/MNVQB.png)

......正如预期的那样。但这仍然不能解决记录之间的重叠。

重要的是要记住，多个记录似乎总是归因于同一个情节。然后可以使用`origin`参数调节偏移量；`help binary keywords origin`状态：

> 要将数组定位在图形上的其他位置，该`origin`关键字指示
> gnuplot 将数组的左下点定位在
> 元组指定的点处。元组应该是双倍的`plot`和三倍的`splot`。

所以，我们可以这样做：

`plot "bin.dat" binary array=(50):(50) format='%uint8' origin=(0,0):(50,0) using 1 with lines`

...我们可以将其解释为：获取两个*连续*的 1D 记录，其中它们唯一的维度/列格式为`uint8`- 并在图上将第一个记录偏移/移动 (0,0)，将第二个记录偏移/移动 (50,0 )（+x 方向 50 个单位）。我们现在期望这两个记录将被连接起来，实际上：

[![gnuplot-2rec-50-samps-conc](../Images/6bee63ebb06f025a9c29df9c0d77cc2e.png)](https://i.stack.imgur.com/3bj87.png)

...我们现在可以观察我们期望的前 100 个数据样本。

如果我们只是将第二条记录从先前匹配的位置移开一点（例如，还剩 10 个单位），则可以更容易地看出这些记录是“同一情节的一部分”：

`plot "bin.dat" binary array=(50):(50) format='%uint8' origin=(0,0):(40,0) using 1 with lines`

...在用线条绘制时：

[![gnuplot-2rec-50-samps-disp](../Images/61d337a3a8a5c98b4c611e87a536659a.png)](https://i.stack.imgur.com/tNv9U.png)

可以立即看出这不再是一个函数，以及原点偏移产生了什么影响。

话虽如此，我们现在可以通过明确指定其中的所有记录及其偏移量来绘制整个数据：

`plot "bin.dat" binary array=(4):(100):(100):(30) format='%uint8' origin=(0,0):(4,0):(104,0):(204,0) using 1 with lines`

...按预期生成连接的四个记录 - 重新创建整个数据集：

[![gnuplot-4rec-all](../Images/112f11a3b13ab1677ef27cd1adb8ef58.png)](https://i.stack.imgur.com/h5kUp.png)

笔记：

*   使用`array=(4):(100):(100):(-1)`(for read to end) 生成相同的图像
*   使用`origin=(0,0):(4,0):(104,0)`(leave out last) 和 4 条记录`array`，导致最后 30 个字节从头开始重叠
*   使用`array=(4):(100):(100)`(leave out last) 使最后 30 个字节从图中消失（原始记录有 3 个或 4 个）

最后，我们看一下skip参数。国家`help binary skip`：

> [...] 例如，如果文件在数据区域开始之前包含一个 1024 字节的标头，您可能希望使用
> plot '<file_name>' binary skip=1024 ...

这可能有点误导，因为*这两个*命令：

`plot "bin.dat" binary array=(100) format='%uint8' using 1 with lines
plot "bin.dat" binary skip=4 array=(100) format='%uint8' using 1 with lines`

...生成相同的情节：

[![gnuplot-1rec-nooffs](../Images/0f14f0bfde82344f86ab4c5918a81151.png)](https://i.stack.imgur.com/lywiC.png)

...*没有*可见的跳跃；但是，如果我们移动`skip=4`关键字列表的末尾（之前`using`），命令变为：

`plot "bin.dat" binary array=(100) format='%uint8' skip=4 using 1 with lines`

...并生成：

[![gnuplot-1rec-offs](../Images/272dec3c2c931149fd659f8b12aa9fd8.png)](https://i.stack.imgur.com/tJgQI.png)

...跳过确实可见的地方。

另请注意`help binary skip`：

> 如果文件中有多个记录，您可以为每个记录指定一个前导偏移量。例如，要在第一条记录之前跳过 512 字节，在第二条和第三条记录之前跳过 256 字节
> plot <file_name> binary record=356:356:356 skip=512:256:256 ...

让我们来说明一下 - 下面的命令：

`plot "bin.dat" binary array=(100):(100) format='%uint8' origin=(0,0):(100,0) skip=4 using 1 with lines`

...有两个一维记录（*我们必须添加`origin`到偏移量，否则记录将再次重叠*），但只有一个跳过 - 这基本上将整个序列向左移动了四个单位：

[![gnuplot-2rec-跳过](../Images/43bca17adbb6da71bfa2664e3a527f4c.png)](https://i.stack.imgur.com/deQMr.png)

如果我们现在在 skip 中处理这两个字段，如命令中所示：

`plot "bin.dat" binary array=(100):(100) format='%uint8' origin=(0,0):(100,0) skip=4:20 using 1 with lines`

...我们可以在输出中注意到：

[![gnuplot-2rec-2skip](../Images/071c3d7f237066421e8946cac9feb488.png)](https://i.stack.imgur.com/woQkt.png)

...第二条记录已向左移动了 20 个单位 - 为了弥补最后丢失的 20 个单位，其余数据来自下一条记录（在 plot 命令中未解决）。

现在我们可以回到最初的问题——“在一个图表上用不同的颜色绘制正弦和余弦数据”。

在此之前，让我们注意每个图有两个数据“函数”，更容易看到`origin`参数实际上移动了图上的记录；例如，这个命令：

`plot "bin.dat" binary array=(100) format='%uint8' origin=(4,0) using 1 with lines, \
"" binary array=(100) format='%uint8' origin=(104,0) using 1 with lines`

...结果：

[![gnuplot-1rec-2func](../Images/55eb9b729d9daa90c2eae9c856cf8a9f.png)](https://i.stack.imgur.com/23SIQ.png)

...其中*相同*的前 100 个数据样本在图中的两个不同位置呈现（并使用不同的颜色）。

综上所述，很明显：尝试将数据“解析”和“拆分”——例如，通过使用`array=(4):(100):(100):(30)` ——“记录”，对于每个绘图拥有*两个*数据“函数”并没有多大帮助（如暗示的那样）通过不同的颜色）；仅具有单个数据“功能”。

也就是说，对于两个数据函数的情况，我们只能指定：单个一维记录及其长度`array`；其（仅）列的格式；以及通过`skip`- 每个数据“函数”的偏移量：

`plot "bin.dat" binary array=(100) format='%uint8' skip=4 using 1 with lines, \
"" binary array=(100) format='%uint8' skip=104 using 1 with lines`

...为了获得所需的渲染：

[![gnuplot-1rec-2func](../Images/de844613b035c03e30c6305e9cbcb583.png)](https://i.stack.imgur.com/IlbUl.png)

最后一点 - 我们可以获得完全相同的图表，通过替换`binary array`-`binary record`除了而不是`using 1`，我们应该写`using 0:1`：

`plot "bin.dat" binary record=(100) format='%uint8' skip=4 using 0:1 with lines, \ "" binary record=(100) format='%uint8' skip=104 using 0:1 with lines`

...即使在这种特殊情况下，`using 1`也可以。

好吧，希望这对某人有所帮助，
干杯！

# php - 在一个表中显示不同的列和非不同的列

> ID：14472423
> 
> 赞同：-1
> 
> 时间：2013-01-23T04:23:46.277
> 
> 标签：php, mysql

我有 3 个表，其中一个包含用户信息（包括 Log_Name）、日志（您可以在其中找到登录名）和评估（如果用户回答了“评估”）。所有都由 user_id 字段连接。

我想以这种方式在 php 中输出它：

![在此处输入图像描述](../Images/fdc2dfbe8c1367350c39c6b4a4742a4e.png)

你能帮我解决这个问题吗？

**编辑：** 有人建议我先循环 Log_Name 并在该循环内，我将循环登录然后将它们显示在表格中。但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T09:14:09.933

看看[**GROUP_CONCAT**](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)

```
<?php
    session_start();
    require_once "common.php";

    $sql = "SELECT *,GROUP_CONCAT(log.date) as login_date FROM user INNER JOIN log ON log.user_id = user.id INNER JOIN evalution ON evalution.user_id = user.id GROUP BY user.id";
    $result = mysql_query($sql) or die(mysql_error());

?>
<table width="40%" border=1>
    <tr>
        <td>Log_Name</td>
        <td>Login</td>
        <td>Evalution</td>
    </tr>
    <?php
        while($row = mysql_fetch_assoc($result))
        {
    ?>
    <tr>
        <td><?php echo $row['name'];?></td>
        <td><?php echo str_replace(",","<br/>",$row['login_date']); ?></td>
        <td><?php echo $row['evalution']; ?></td>
    </tr>
    <?php
        }
    ?>
</table>
```

GROUP_CONCAT(log.date) 将返回逗号分隔的日期列表，然后您可以根据需要显示它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T04:37:11.493

将评估作为不同的表之间的推理在哪里？反正：

```
SELECT u.Log_Name, l.log_time, e.evaluation FROM users_info u LEFT JOIN logs l ON l.user_id = u.user_id LEFT JOIN evaluation e ON e.user_id = u.user_id WHERE u.user_id = 'id' 
```

之后，您将只显示所需的带有 HTML 行跨度的表格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T04:34:47.327

我建议摆脱这个想法，`DISTINCT`只使用一个`ORDER BY`子句。然后，您可以通过检查相关组何时更改来在前端进行分组。使用 MySQL 可能还有一个技巧，`GROUP BY`但它不会转换为其他 RDBMS。

# ios - 32 位和 64 位的 %d 格式

> ID：14472424
> 
> 赞同：10
> 
> 时间：2013-01-23T04:23:46.677
> 
> 标签：ios, objective-c, xcode, macos

```
NSInteger precedence = [self operatorPrecedence];
[d appendFormat:@"precedence:%d, ", precedence]; 
```

给出：

> 警告：格式指定类型“int”，但参数的类型为“NSInteger”（又名“long”）

并且 Xcode 建议更改`%d`为`%ld`.

但是，它仅适用于 32 位*或*64 位目标，如下`NSInteger`所示：

```
 #if __LP64__ || (TARGET_OS_EMBEDDED && !TARGET_OS_IPHONE) || TARGET_OS_WIN32 || NS_BUILD_32_LIKE_64
 typedef long NSInteger;
 typedef unsigned long NSUInteger;
 #else
 typedef int NSInteger;
 typedef unsigned int NSUInteger;
 #endif 
```

对于 32 位和 64 位目标，消除警告的最佳方法是什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-23T04:34:58.723

按照[Apple 的 64 位转换指南中的说明进行操作](http://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/Cocoa64BitGuide/ConvertingExistingApp/ConvertingExistingApp.html#//apple_ref/doc/uid/TP40004247-CH5-SW6)。

对于`NSInteger`，使用`%ld`并将值转换为`long`。

```
[d appendFormat:@"precedence:%ld, ", (long)precedence]; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-23T04:35:22.677

尝试这个

**升级版：**

```
NSInteger precedence = [self operatorPrecedence];
[d appendFormat:@"precedence:%ld, ", (long)precedence]; 
```

# bash - 如何将计算机名称与 if 语句中的名称列表进行比较

> ID：14472426
> 
> 赞同：2
> 
> 时间：2013-01-23T04:23:57.607
> 
> 标签：bash

-对于 bash 脚本-我想知道是否可以将添加的计算机名称与 if[ $1 = ] 内的计算机名称列表进行比较，而无需循环，只是为了检查它是否是列表中的计算机-继续，如果不 - 停止。谢谢你的想法

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T04:31:37.613

不知道为什么你不想使用循环：

```
COMPUTERS=( hosta hostb hostc )

for COMPUTER in ${COMPUTERS[@]}; do
    if [ "${COMPUTER}" == "${1}" ];
    then
        echo "Yep. It's in the list."
    fi
done 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T23:04:51.023

有几种方法。如果你真的想使用 if，你可以这样做（注意变量周围的空格）：

```
#!/bin/bash
COMPUTERS="hosta hostb hostc"

if [[ " $COMPUTERS " =~ " $1 " ]] ; then
    echo "Yes, $1 is in the list"
else
    echo "No, $1 is not in the list"
fi 
```

我自己喜欢案例：

```
case " $COMPUTERS " in
    *" $1 "*) echo "Yes, $1 is in the list" ;;
    *) echo "No, $1 is not in the list" ;;
esac 
```

注意：这些都不是万无一失的。例如，“hosta hostb”将匹配可能不是您想要的，但如果您知道您的数据格式正确，或者应用额外的检查，它很简单并且有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T09:32:35.430

如果您有一个包含可用主机名的空格分隔列表：

```
COMPUTERS="hosta hostb hostc"
echo ${COMPUTERS} | grep -qw "$1" && echo "$1 is in the list" 
```

# php - php变量在另一个文件中搜索

> ID：14472428
> 
> 赞同：-1
> 
> 时间：2013-01-23T04:24:08.977
> 
> 标签：php

这是我现在使用的代码

```
 <?php

 $url = 'http://www.PULLDATADOMAIN.Com/Here'; 
 $Stuff = 'Wow im not a complete idiot';
 $After = 'This is not what im doing';

 $contents = file_get_contents($url);
 echo $contents; 

?> 
```

好的，到目前为止，这很原始。它所做的只是从 $url 中提取 html 源代码并将其显示在页面上。

但我希望它做的是拉那个 html，然后搜索它在哪里找到变量 $After

然后输出/回显 $contents 的前半部分，然后输出`$mystuff`，然后输出`$contents`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T04:43:32.550

试试这个

$url = 'https://www.google.com/roboat.txt';

$Stuff = '当我们及时得到帮助时，生活是美好的';

$After = '/您请求的服务暂时不可用/';

$contents = file_get_contents($url);

$result = preg_split($After,$contents);

print_r($结果);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T04:51:50.197

你想要达到的目标并不是很困难。您应该提及到目前为止您尝试过的方法。

我不会给你解决方案，只会给你提示。

步骤 1）您可以使用**strpos**函数查找**$stuff**字符串的位置，然后使用**substr**函数仅提取**$contents的前半部分**

步骤 2) 然后你可以附加你想要的新字符串**$mystuff**

第 3 步）现在再次使用第 1 步中找到的位置和**substr**函数和**strlen**搜索字符串**$stuff**的长度，您可以打印后半部分。

# iis-6 - iis和sql server错误？

> ID：14472429
> 
> 赞同：0
> 
> 时间：2013-01-23T04:24:18.510
> 
> 标签：iis-6

我使用 c# 创建带有 Framework="4.0" 和 sql 数据库的 asp 网站我可以在 vb 2010 中浏览它而没有任何错误然后我将它放在带有 windows 7 的 iis6 现在我可以浏览该网站但我可以连接它给我的 sql 数据库

* * *

## “/”应用程序中的服务器错误。

由于检索用户的本地应用程序数据路径失败，无法生成 SQL Server 的用户实例。请确保用户在计算机上有本地用户配置文件。连接将被关闭。

* * *

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T04:32:43.223

假设您在尝试使用 Sql Express 时在 Win 7 上使用 IIS 遇到此错误，您可以尝试通过更改运行 App Pool 的 id 来解决该错误。默认情况下，在较新版本的 IIS 中，应用程序池作为“应用程序池标识”运行。您可以尝试切换到域 a/c 或网络服务。

如果这不能解决问题，请尝试按照以下步骤操作：http: [//support.microsoft.com/kb/2002980](http://support.microsoft.com/kb/2002980)

# javascript - dom事件的多个条件

> ID：14472431
> 
> 赞同：0
> 
> 时间：2013-01-23T04:24:41.117
> 
> 标签：javascript

我需要对单个 DOM 事件做两件事

我尝试使用它，但它不起作用。

HTML

```
<input type="test" name="box" id="box" onkeyup="keyPressedBox(this)">
<input type="test" name="name" id="name" onkeyup="keyPressedName(this)">

<input type="checkbox" class="form-checkbox" checked="checked" id="sdp_1" name="sdp_1" />
<input type="checkbox" class="form-checkbox" checked="checked" id="sdp_2" name="sdp_2"/> 
```

Javascript

```
<script>
     function keyPressedName(str) {
        if ($(str).val() != '') {
            $('#sdp_2').prop('checked', false);
        } else {
            $('#sdp_2').prop('checked', true);
        }

        return true;
    }

    function keyPressedBox(str) {
        if ($(str).val() != '') {
            $('#sdp_1').prop('checked', false);
        } else {
            $('#sdp_1').prop('checked', true);
        }
        return true;
    }

</script> 
```

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T04:34:53.463

做这样的事情

```
onkeypress="keyPressed();" 
```

和`keyPressed`。`input`两个盒子里都有 2 个功能。功能将是，

```
<script src="http://code.jquery.com/jquery-latest.js"></script>
<script>
        function keyPressedName(str) {
            if ($(str).val() != '') {
                $('#sdp_2').prop('checked', false);
            } else {
                $('#sdp_2').prop('checked', true);
            }

            return true;
        }

        function keyPressedBox(str) {
            if ($(str).val() != '') {
                $('#sdp_1').prop('checked', false);
            } else {
                $('#sdp_1').prop('checked', true);
            }
            return true;
        }

    </script> 
```

HTML 将是

```
<input type="test" name="box" id="box" onkeyup="keyPressedBox(this)">

<input type="test" name="name" id="name" onkeyup="keyPressedName(this)"> 
```

JS小提琴

[http://jsfiddle.net/RMEKh/2/](http://jsfiddle.net/RMEKh/2/)

# c - 如何在 ntfs 中为文件创建标准信息属性

> ID：14472433
> 
> 赞同：0
> 
> 时间：2013-01-23T04:24:50.507
> 
> 标签：c

我有一个用 NTFS 格式化的 USB。我需要使用“C”创建一个文件，所以我想知道

1.  如何在读取 mft 文件的 $BITMAP 属性后为我的文件分配一个免费条目。
2.  如何为我的文件创建属性（$STANDARD INFORMATION 和 $FILENAME ATTRIBUTE）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-08-05T17:16:37.910

所以我意识到我迟到了几年，但实际上已经成功地做了这样的事情，我会提供对我有用的东西。

[flatcap - NTFS 文档](https://flatcap.org/linux-ntfs/ntfs/) -> 这是我找到的最好的文档，除了[Brian Carrier 的文件系统取证分析](http://www.campus64.com/digital_learning/data/cyber_forensics_essentials/info_file_system_forensic_analysis.pdf)

我正在做的事情与您正在尝试做的事情之间的最大区别是我正在重建已删除的文件而不是创建新文件。所以我的主要优势是能够使用复制的属性，只需稍作改动。以下是我的一些发现。

新文件记录需要 $Standard_Information (0x10) $Filename (0x30) $Security_Descriptor (0x50) 和 $Data (0x80) 属性。如果你在 $Secure 系统文件中索引文件，你可以不使用 Security_Descriptor，但我建议使用 $Security_Descriptor 以实现向后兼容性和简单性，这也是 linux ntfs-3g 的做法（我从观察 ntfs-中学到了很多3g 使用 git 的 difftool 对文件系统部分的更改）。您可以从具有您想要的相同权限的示例文件中复制 $Security_Descriptor。您也可以从类似文件中复制其他属性的基本结构并进行以下更改：

*   $Standard_Information 和 $Filename 需要新的时间戳。您还需要更新父目录的文件记录中的 File Altered 和 MFT Altered $Standard_Information 时间戳（中间 2），并且所有这些时间戳都应该匹配。

*   $Data 非常简单。如果是常驻，您只需要确保指定正确的数据长度，如果是非常驻，您将需要从 flatcap 读取数据运行的大部分数据。

*   $Filename 应该只需要一个新的名称长度和属性长度来匹配新名称。

*   如果文件记录是全新的，则需要为文件记录头（前 24 个字节左右）提供正确的文件记录大小填充到 8 字节边界和 seq 编号 1（否则，如果它需要增加 1正在重新分配）。

*   非常重要的是，每当您更新任何具有 USN（文件和索引记录）的内容时，您都要对其进行更新，并将每个扇区的末尾与 USN 交换到更新序列数组中。我不确定你应该增加多少，但我编写了代码来为每个写入的扇区增加它，这似乎有效。

您需要阅读索引记录才能将文件正确放置在父目录中：

*   确保将新文件的相应索引条目键插入到目录 B*tree 的正确索引记录或节点中。
*   索引记录 USN 需要更新，它的长度和自引用键中的时间戳也是如此。

关于处理 $MFT 的 $Bitmap 属性。我不确定 NTFS 是如何做到这一点的，当我了解更多信息时会更新，但这就是我所做的。重要的是要意识到 NTFS 有一个低编号文件记录的 MFT 保留，除非卷处于压力之下，否则不会写入这些记录，并且如果您写入错误的记录窗口会发现您的新文件已损坏。

*   您不需要更新 USN
*   每个位代表一个文件记录。
*   找到最后一个（不是第一个）完整文件记录，然后选择第一个空的。
*   填写该位并在新文件的索引条目表示中记录 MFT 文件参考地址。
*   将您的新文件记录写入该位置。

MFT 文件参考地址是 48 位文件参考号（您在 $Bitmap 中找到）的组合，它只不过是 $MFT 中的记录索引（0 是第一条记录等）和 16 位序列号（在文件记录标题中找到）文件参考号可用于查找任何文件记录，方法是首先解析 $MFT 文件记录的 $Data 属性，然后逐个计数记录，直到达到该编号（显然您不会t 实际上需要用一些简单的数学计算它们，但是当你阅读 Data Runs 时，我觉得如何做到这一点会变得更加清晰）。

我可能忘记了很多东西，但我有点希望有人在我开始研究的时候把这些东西写下来，因为那时我的生活可能会轻松一点。

# java - 没有按照我的要求显示 Struts 磁贴

> ID：14472434
> 
> 赞同：2
> 
> 时间：2013-01-23T04:25:06.740
> 
> 标签：java, struts-1

对于我的一个 Web 应用程序，我希望我的所有页面都显示为它们的顶部、左侧和底部部分是相同的。
为此，我计划使用 Struts Tiles 配置。但这对我来说不可行。
可能是我在配置它们时犯了一些错误。
请指导我。以下是我在“tiles-def.xml”中的配置

```
 <definition name="mainLayout" path="/pages/layout/classicLayout.jsp">
        <put name="header" value="/pages/layout/header.jsp" />
        <put name="footer" value="/pages/layout/footer.jsp" />
        <put name="menu" value="/pages/layout/menu.jsp" />
        <put name="body"   value="/pages/layout/bodyLayout.jsp" />
    </definition>
    <definition name="outputPage" extends="mainLayout">
        <put name="title" value="HELLO" />
        <put name="body"   value="/pages/Welcome.jsp" />
    </definition> 
```

我希望每当“Welcome.jsp”显示时，它的顶部（即页眉）、底部（即页脚）和左侧部分（即菜单）来自“mainLayout”磁贴的指定设置。但这并没有按照我的预期显示。

**编辑：**
我的 Struts-config 文件包含以下设置

```
<global-forwards>
        <!-- Default forward to "Welcome" action -->
        <!-- Demonstrates using index.jsp to forward -->
        <forward
            name="welcome"
            path="/Welcome.do"/>
</global-forwards>

<!-- =========================================== Action Mapping Definitions -->

    <action-mappings>
            <!-- Default "Welcome" action -->
            <!-- Forwards to Welcome.jsp -->
        <action
            path="/Welcome"
            forward="/pages/Welcome.jsp"/>
    </action-mappings> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T12:27:21.690

如果我正确理解了您的问题，您希望控制来自 tiles_defs.xml 的页面表示。
我在您的代码中看到的是您几乎完成了。
当您希望“Welcome.jsp”充当“outputPage”的主体时，您必须再拥有一个 jsp（例如“tilesTest.jsp”），其中包含“outputPage”的定义。
此外，您需要更改您的转发标签（在 struts 配置中）并将其指向该新页面。
您的新页面包含以下代码

```
<%@page language="java" pageEncoding="shift-jis"%>
<%@ taglib uri="/tags/struts-bean" prefix="bean" %>
<%@ taglib uri="/tags/struts-html" prefix="html" %>
<%@ taglib uri="/tags/struts-logic" prefix="logic" %>
<%@ taglib uri="/tags/struts-tiles" prefix="tiles" %>
<tiles:insert definition="outputPage" flush="true" /> 
```

你的 struts-config.xml 文件将是这样的

```
 <action
            path="/Welcome"
            forward="/pages/tileTest.jsp"/> 
```

希望这能解决您的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T07:01:14.013

根据你的我已经做了一个示例项目并上传到 GitHub 你可以从[这个](https://github.com/neetu2umca/Tiles_Demo)url下载

[https://github.com/neetu2umca/Tiles_Demo](https://github.com/neetu2umca/Tiles_Demo)

# javascript - 使用画笔功能绘制多条线时的问题

> ID：14472435
> 
> 赞同：2
> 
> 时间：2013-01-23T04:25:08.580
> 
> 标签：javascript, html, svg, d3.js, brush

我正在尝试使用 d3 在一张图表中绘制几条线，并使用画笔功能（[http://bl.ocks.org/1667367](http://bl.ocks.org/1667367)）实现

![在此处输入图像描述](../Images/839026f031b181455cb495269c566405.png)

下面的部分代码将在右侧显示每一行的名称。

```
focudraw.select("text")
  .datum(function(d){
      return {name:d.name,value : d.values[d.values.length-1]};
  })
  .attr("transform",function(d){ 
      return "translate("+x(d.value.date)+","+y(d.value.price)+")"
    })
  .text(function(d){return d.name}); 
```

但是，如果我在移动 contextdraw（在下面）时动态刷机，那么文本的位置不会改变，我也没有太多的想法可以修改。

我想我应该专注于画笔功能中的 focudraw.select("text") ，正确更改 d.values 的索引，我知道如何将**new** x.domain()[ 1 ] 映射到 d.values 的最后一个索引，但是位置不是那么准确...

```
function brush(){
x.domain(brush.empty() ? navx.domain() : brush.extent());

focudraw.select("path").attr("d",function(d){
  return line(d.values);    
});

focudraw.select("text")
  .datum(function(d){
      return {name:d.name,value : d.values[d.values.length-1]};
  })
  .attr("transform",function(d){ 
      return "translate("+x(d.value.date)+","+y(d.value.price)+")"
    })
  .text(function(d){return d.name});

focu.select(".x.axis").call(xAxis); 
```

}

# java - java web项目中的字符编码

> ID：14472438
> 
> 赞同：0
> 
> 时间：2013-01-23T04:25:20.333
> 
> 标签：java, character, encode, webproject

我只是在 java web 项目中遇到了一个奇怪的编码问题。

```
System.out.println("search url: " + searchURL);    
searchURL = new String(searchURL.getBytes("utf-8"), "utf-8");
System.out.println("test===" + new String(searchURL.getBytes("utf-8"))); 
```

* * *

我在java main函数中测试了上面的代码，在汉字中它可以正常工作。

```
output:
search url: https://api.datamarket.azure.com/Data.ashx/Bing/Search/Image?Query=%27机器 猫%27&$format=json&$skip=0

test===https://api.datamarket.azure.com/Data.ashx/Bing/Search/Image?Query=%27机器 猫%27&$format=json&$skip=0 
```

* * *

但是当在tomcat中运行这段代码时。

```
output:
search url: https://api.datamarket.azure.com/Data.ashx/Bing/Search/Image?Query=%27机器 猫%27&$format=json&$skip=0

test===https://api.datamarket.azure.com/Data.ashx/Bing/Search/Image?Query=%27鏈哄櫒 鐚?27&$format=json&$skip=0 
```

然后我在tomcat中测试这个：

```
searchURL = new String(searchURL.getBytes("utf-8"), "utf-8");
System.out.println(new String(searchURL.getBytes("gbk"));
System.out.println(new String(searchURL.getBytes("gb2312")); 
```

以上都可以。所以为什么 ？任何建议将不胜感激，真的谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T04:57:51.673

您的 jvm 和 tomcat jvm 之间的默认字符集会有所不同

尝试

```
System.out.println(Charset.defaultCharset()); 
```

这将使用默认字符集对可能是也可能不是 utf-8 的字符串进行编码

```
System.out.println("test===" + new String(searchURL.getBytes("utf-8"))); 
```

因此，虽然字节数组是 utf-8，但解码器可能会期待别的东西。

# c# - 即使数据库关闭，如何允许用户更新数据到服务器

> ID：14472453
> 
> 赞同：0
> 
> 时间：2013-01-23T04:27:20.613
> 
> 标签：c#, .net-4.0

我目前正在使用 .net 4.0 开发一个 asp.net mvc 4 应用程序。

一个关键要求是，即使数据库已关闭，我也必须允许对系统进行更新（它可能在夜间关闭，但某些用户仍需要登录并使用系统）。

我以前从未遇到过这个问题，也不知道该怎么做？甚至有可能吗？

请给我一些说明或一些教程链接。我真的很感激。

（我也做了一些研究，在asp.net mvc中找到了一些关于异步控制器的教程。但不知道它是否能满足我的要求？）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T04:32:44.563

您可以使用 MSMQ 将您的请求排队到服务器并一一处理。您需要确保该服务器永远不会停机。更多信息在

[MSMQ 的主要优点](https://stackoverflow.com/questions/9077598/key-benefits-of-msmq)

[http://technet.microsoft.com/en-us/library/cc723251.aspx](http://technet.microsoft.com/en-us/library/cc723251.aspx)

# c++ - 代理类/句柄与子类

> ID：14472461
> 
> 赞同：1
> 
> 时间：2013-01-23T04:27:57.347
> 
> 标签：c++

> **可能重复：**
> [Pimpl idiom vs Pure virtual class interface](https://stackoverflow.com/questions/825018/pimpl-idiom-vs-pure-virtual-class-interface)

在隐藏实现中，我已经阅读了很多关于“代理类”或“处理类”或“柴郡猫微笑”技术的内容，其中您基本上包含指向“真实”类的指针作为公共/代理类中的数据成员，然后在“真实”类中实现所有内容。

但是我正在查看一些示例代码，并注意到另一种似乎更容易的技术，因为它不需要您还在句柄类中编写“虚拟”方法然后调用句柄类中的真实方法，也不需要它根本需要任何数据成员，而且总体上看起来更加精简。

该技术是将所有公共方法简单地定义为一个`struct`（或一切都在的类`public`）和所有`virtual=0`成员函数，仅此而已。因此没有实现。然后，定义一个返回指向 this 的指针的静态函数，`struct`以便客户端可以使用该类。但是在幕后，这个方法实际上返回了结构的一个子类，然后你可以在这个子类中做更多的事情。

如果这很简单，而且我认为它比包含一个指向单独类的指针的数据成员的公共类更优雅，并且必须实现公共类对数据成员方法的调用，那么为什么这不是隐藏实现中讨论最多的技术？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T05:13:32.163

如[本文所述](http://gamasutra.com/view/news/167098/Indepth_PIMPL_vs_pure_virtual_interfaces.php#.UP9wkko4XoB)：

**大多数人推荐 PIMPL 方法的原因是它具有一些明显的优势：**

*   不需要工厂函数，您可以使用 new()、delete() 或在堆栈上创建对象。
*   您可以轻松地进行子类化。
*   接口方法不是虚拟的，因此调用它们可能会更快。（另一方面，我们需要额外的内存获取来获取实现对象。）
*   PIMPL 可以在现有类中引入，而无需更改其外部接口或与其他类的关系。

**抽象类方法有它自己的一些优点：**

*   更简洁的代码和更少的输入，因为我们不必为公共接口中的方法编写转发存根。
*   多个类可以实现同一个接口。我们可以静态或动态地选择我们想要使用的特定实现，这给了我们更大的灵活性。

# ios - Multiplie MOC 的 Rest Kit 持久性/性能问题

> ID：14472467
> 
> 赞同：1
> 
> 时间：2013-01-23T04:28:30.647
> 
> 标签：ios, multithreading, core-data, restkit

这是我第一次使用新版本的 RestKit 和多个 MOC，所以这让我有点难过。我正在使用 RestKit 0.20-pre5 并通过 RestKit 操作以及在整个应用程序中手动添加托管对象。

RestKits 提供了两个 MOC 来管理性能：mainQueue 和 PersistantStore 对象上下文。通过检查 RestKits 代码，所有新的托管对象都保存到 mainQueue MOC（基于 RKObjectManager 行 433 和各种指针地址的检查）。RestKit 创建的对象可以很好地持久化（当然是在调用 save 之后），但是每当我在同一个 mainQueue MOC 中创建自己的 ManagedObjects 并保存它时，当我重新启动应用程序时它们不会持久化。（我经常保存相关的 MOC）

这就是持久存储的用武之地。每当我将持久存储与 mainQueue MOC 一起保存时，数据都会持久存在。我想这与 RKManagedObjectStore 合并更改有关，每当我在persistantStoreMOC 上调用 save 时（通过通知）所以......一切都好吗？

问题是，每当我保存两个上下文时，都会有一个持续至少 1 秒的明显滞后（它最多可以变化 3 秒！）。这种滞后似乎增加了我创建的更多 NSManagedObjects。我已经运行了仪器并且没有内存问题。我一定是错误地使用了核心数据的 RestKits 实现。

作为记录，我使用以下方法保存：

```
- (void)saveContext
{
    __block BOOL _blockSuccess;
    __block NSError *_blockError;

    NSManagedObjectContext *persistantContext = [[[RKObjectManager sharedManager] managedObjectStore] persistentStoreManagedObjectContext];

    [globalManagedObjectContext performBlockAndWait:^{
            _blockSuccess = [globalManagedObjectContext save:&_blockError];
    }];
    if (! _blockSuccess) NSLog(@"Failed to save context: %@", _blockError);

    [persistantContext performBlock:^{
        _blockSuccess = [persistantContext save:&_blockError];
        if (! _blockSuccess) NSLog(@"Failed to save context: %@", _blockError);
    }];
} 
```

每当我们想要保存应用程序的状态时，都会从单例对象中调用它。（globalManagedObjectContext 只是一个指向 RestKits mainQueueObjectContext 的宏）。删除 persistantContext 保存会消除滞后，但当然不会保留数据。

任何人的帮助（尤其是布莱克沃特斯；）将不胜感激！

干杯，

阿隆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T20:48:05.870

我相信答案是使用`saveToPersistentStore:`RKAdditions 类别添加到 NSManagedObjectContext 的方法。

这是取自[这里](https://twitter.com/Mckruz/status/291237522472857600)和[这里](http://restkit.org/api/0.20.0/Categories/NSManagedObjectContext+RKAdditions.html#//api/name/saveToPersistentStore%3a)。

你在使用的时候还有问题吗？

# android - 让这个客户端服务器 android 应用程序工作。我在edittext窗口中输入什么IP地址？

> ID：14472473
> 
> 赞同：1
> 
> 时间：2013-01-23T04:28:52.340
> 
> 标签：android, sockets, client-server

我有两个 android 平板电脑，我想通过套接字编程将消息从客户端发送到服务器。我粘贴了示例代码来制作服务器和客户端应用程序，并将它们安装在两个安卓平板电脑上。都连接到wifi

在客户端应用程序上有一个编辑文本，我应该在其中输入 IP 地址，然后下面的按钮称为“连接电话”。

在单击“连接电话按钮”之前，我应该在编辑文本中输入什么 IP 地址

这是“连接电话”按钮的 onclick 监听器

```
 private OnClickListener connectListener = new OnClickListener() {

    @Override
    public void onClick(View v) {
        if (!connected) {
            serverIpAddress = serverIp.getText().toString();
            if (!serverIpAddress.equals("")) {
                Thread cThread = new Thread(new ClientThread());
                cThread.start();
            }
        }
    }
}; 
```

客户端和服务器应用程序的完整代码如下所示；

客户端代码：

```
 package com.example.client;

 // import statements

 public class ClientActivity extends Activity {

private EditText serverIp;

private Button connectPhones;

private String serverIpAddress = "";

private boolean connected = false;

private Handler handler = new Handler();

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.client);

    serverIp = (EditText) findViewById(R.id.server_ip);
    connectPhones = (Button) findViewById(R.id.connect_phones);
    connectPhones.setOnClickListener(connectListener);
}

private OnClickListener connectListener = new OnClickListener() {

    @Override
    public void onClick(View v) {
        if (!connected) {
            serverIpAddress = serverIp.getText().toString();
            if (!serverIpAddress.equals("")) {
                Thread cThread = new Thread(new ClientThread());
                cThread.start();
            }
        }
    }
};

public class ClientThread implements Runnable {

    public void run() {
        try {
            InetAddress serverAddr = InetAddress.getByName(serverIpAddress);
            Log.d("ClientActivity", "C: Connecting...");
            Socket socket = new Socket(serverAddr, 8080);
            connected = true;
            while (connected) {
                try {
                    Log.d("ClientActivity", "C: Sending command.");
                    PrintWriter out = new PrintWriter(new BufferedWriter(new OutputStreamWriter(socket
                                .getOutputStream())), true);
                        // where you issue the commands
                        out.println("Hey Server!");
                        Log.d("ClientActivity", "C: Sent.");
                } catch (Exception e) {
                    Log.e("ClientActivity", "S: Error", e);
                }
            }
            socket.close();
            Log.d("ClientActivity", "C: Closed.");
        } catch (Exception e) {
            Log.e("ClientActivity", "C: Error", e);
            connected = false;
        }
    }
 }
 } 
```

服务器代码；

```
 package com.example.server;

  // import statements

  public class ServerActivity extends Activity {

private TextView serverStatus;

// default ip
// public static String SERVERIP ="10.0.2.15";

// designate a port
public static final int SERVERPORT = 8080;

private Handler handler = new Handler();

private ServerSocket serverSocket;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.server);
    serverStatus = (TextView) findViewById(R.id.server_status);

    SERVERIP = getLocalIpAddress();

    Thread fst = new Thread(new ServerThread());
    fst.start();
}

    public class ServerThread implements Runnable {

    public void run() {
        try {
            if (SERVERIP != null) {
                handler.post(new Runnable() {
                    @Override
                    public void run() {
                        serverStatus.setText("Listening on IP: " + SERVERIP);
                    }
                });
                serverSocket = new ServerSocket(SERVERPORT);
                while (true) {
                    // listen for incoming clients
                    Socket client = serverSocket.accept();
                    handler.post(new Runnable() {
                        @Override
                        public void run() {
                            serverStatus.setText("Connected.");
                        }
                    });

                    try {
                        BufferedReader in = new BufferedReader(new InputStreamReader(client.getInputStream()));
                        String line = null;
                        while ((line = in.readLine()) != null) {
                            Log.d("ServerActivity", line);
                            handler.post(new Runnable() {
                                @Override
                                public void run() {
                                    // do whatever you want to the front end
                                    // this is where you can be creative
                                }
                            });
                        }
                        break;
                    } catch (Exception e) {
                        handler.post(new Runnable() {
                            @Override
                            public void run() {
                                serverStatus.setText("Oops. Connection interrupted. Please reconnect your phones.");
                            }
                        });
                        e.printStackTrace();
                    }
                }
            } else {
                handler.post(new Runnable() {
                    @Override
                    public void run() {
                        serverStatus.setText("Couldn't detect internet connection.");
                    }
                });
            }
        } catch (Exception e) {
            handler.post(new Runnable() {
                @Override
                public void run() {
                    serverStatus.setText("Error");
                }
            });
            e.printStackTrace();
        }
    }
}

// gets the ip address of your phone's network
private String getLocalIpAddress() {
    try {
        for (Enumeration<NetworkInterface> en = NetworkInterface.getNetworkInterfaces(); en.hasMoreElements();) {
            NetworkInterface intf = en.nextElement();
            for (Enumeration<InetAddress> enumIpAddr = intf.getInetAddresses(); enumIpAddr.hasMoreElements();) {
                InetAddress inetAddress = enumIpAddr.nextElement();
                if (!inetAddress.isLoopbackAddress()) { return inetAddress.getHostAddress().toString(); }
            }
        }
    } catch (SocketException ex) {
        Log.e("ServerActivity", ex.toString());
    }
    return null;
}

@Override
protected void onStop() {
    super.onStop();
    try {
         // make sure you close the socket upon exiting
         serverSocket.close();
     } catch (IOException e) {
         e.printStackTrace();
     }
}

 } 
```

logcat 错误；

```
01-22 18:37:40.100: E/ClientActivity(19568): C: Error
01-22 18:37:40.100: E/ClientActivity(19568): java.net.ConnectException: failed to connect to /10.0.2.15 (port 8080): connect failed: EHOSTUNREACH (No route to host)
01-22 18:37:40.100: E/ClientActivity(19568):    at libcore.io.IoBridge.connect(IoBridge.java:114)
01-22 18:37:40.100: E/ClientActivity(19568):    at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:192)
01-22 18:37:40.100: E/ClientActivity(19568):    at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:172)
01-22 18:37:40.100: E/ClientActivity(19568):    at java.net.Socket.startupSocket(Socket.java:566)
01-22 18:37:40.100: E/ClientActivity(19568):    at java.net.Socket.<init>(Socket.java:225)
01-22 18:37:40.100: E/ClientActivity(19568):    at com.example.client.ClientActivity$ClientThread.run(ClientActivity.java:60)
01-22 18:37:40.100: E/ClientActivity(19568):    at java.lang.Thread.run(Thread.java:856)
01-22 18:37:40.100: E/ClientActivity(19568): Caused by: libcore.io.ErrnoException: connect failed: EHOSTUNREACH (No route to host)
01-22 18:37:40.100: E/ClientActivity(19568):    at libcore.io.Posix.connect(Native Method)
01-22 18:37:40.100: E/ClientActivity(19568):    at libcore.io.BlockGuardOs.connect(BlockGuardOs.java:85)
01-22 18:37:40.100: E/ClientActivity(19568):    at libcore.io.IoBridge.connectErrno(IoBridge.java:127)
01-22 18:37:40.100: E/ClientActivity(19568):    at libcore.io.IoBridge.connect(IoBridge.java:112) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-08T19:33:07.217

When you connect your android device to a WiFi network, it is assigned an IP address. This IP address is visible under the "Settings > About Phone > Status > IP Address" . Now, in your case, the server app runs on one tablet, and client on the other. We need the IP address of the Server only, which you can find out using this method. Enter this IP in the client applications corresponding area, and you're set .

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T05:00:38.133

1.将两个设备与网络（WIFI）连接 2.您可以通过在 android 中以编程方式获取每个设备的 IP 地址 3.并制作一个显示两个 IP 地址的文本视图 4.在两者中键入它来连接它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-09T21:59:47.713

您应该在客户端输入服务器 IP 以请求连接。服务器侦听特定端口。如果您的服务器端应用程序显示 IP 地址，请将其放入客户端应用程序以建立连接。如果您的服务器应用程序没有显示任何内容，只需转到设置> 关于> 状态并找到 IP 地址。从您的服务器端代码中，可以清楚地看到：

```
serverStatus.setText("Listening on IP: " + SERVERIP); 
```

把它放在你的客户端。

# objective-c - 如何在 Objective-C 中打开 iCal 到特定事件/日期？

> ID：14472474
> 
> 赞同：0
> 
> 时间：2013-01-23T04:29:05.827
> 
> 标签：objective-c, macos, calendar, icalendar

我似乎无法在 Mountain Lion 中找到在代码中成功打开 ical 的方法。

我宁愿不使用applescript，而使用可可。让我知道是否有我缺少的 api。

目前我只使用：

```
[[NSWorkspace sharedWorkspace] launchApplication:@"iCal"]; 
```

谢谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-17T21:39:43.523

实际上我使用了以下代码：

```
-(void)show:(NSString*)eventUid InCalendar:(NSString*)calUid {
  iCalApplication *iCal = [SBApplication applicationWithBundleIdentifier:(@"com.apple.iCal")];
  [iCal activate];

  SBElementArray *sbCalendars = [iCal calendars];
  if(sbCalendars != nil && [sbCalendars objectWithID:calUid] != nil) {
    iCalCalendar *sbCalendar = [sbCalendars objectWithID:calUid];
    if([sbCalendar events] != nil){
      iCalEvent *sbCalEvent = [[sbCalendar events] objectWithID:eventUid];
      if(sbCalEvent != nil){
        NSLog(@"%@", sbCalEvent);
        [sbCalEvent show];
      }
    }
  }
} 
```

这工作了很长一段时间，但自从他们引入了 Sandbox 后就停止了工作。一年多前我提交了一个错误，但没有得到苹果的可用答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T05:20:59.377

如果您只想启动应用程序，那么这基本上就是您正在做的事情。[文档中](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSWorkspace_Class/Reference/Reference.html)有一些进一步的信息，[这里](http://theocacao.com/document.page/183)有一篇不错的文章。

但是，如果您想在代码中集成日历，也许您应该使用[Event Kit Framework](http://developer.apple.com/library/mac/#documentation/DataManagement/Conceptual/EventKitProgGuide/Introduction/Introduction.html)

# javascript - JQuery 不会第二次滑出

> ID：14472480
> 
> 赞同：0
> 
> 时间：2013-01-23T04:29:46.800
> 
> 标签：javascript, jquery, jquery-ui, jquery-selectors

作为我上一个问题的后续，我目前在我的实时网站上有这个代码：

[http://jsfiddle.net/3veht/6/](http://jsfiddle.net/3veht/6/)

这与现场直播完全相同。但是由于某种原因，当我去打开一个抽屉时，它会工作一次（打开和关闭），然后如果我再试一次，它就不会工作。控制台完全没有错误。

如果我重新加载页面，它将再次工作一次，然后不再打开。

为了提供帮助，它正在到达数据发送部分，因为它正在返回数据，它只是不会滑下抽屉。

也许有更好的方法来处理独特项目的下滑？这是上面小提琴的预览：

```
 $('.patient').click(function(){
                 var pat = $(this);
                 if ($('#drawer').is(':visible'))
                     $('#drawer').slideUp("slow", function () {

                        $('#drawer').slideDown('slow')
                        $('#drawer').load('/echo/js?js=' + pat.data('patientid'));       
                     });
                 else   
                 {
                     $('#drawer').slideDown('slow')
                     $('#drawer').load('/echo/js?js=' + pat.data('patientid'));
                 }
             }); 
```

编辑：

默认情况下，抽屉在 css 中设置为 display:none

我还注意到，当抽屉关闭时，它会设置一个显示样式：块到抽屉。

也许这有帮助..

此外，查看源代码，Jquery 认为它正在显示抽屉。动画在源中明显移动，但屏幕上没有任何内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T04:50:29.883

尝试这个

```
 $(".patient").click(function(){
             var pat = $(this);
             if ($("#drawer").is(":visible")) {
                 $("#drawer").slideUp("slow");
                    $("#drawer").load("/echo/js?js=" + pat.data("patientid"));     
            } else  {
                 $('#drawer').slideDown("slow");
                 $('#drawer').attr("style", "display:block");
                 $("#drawer").load("/echo/js?js=" + pat.data("patientid"));
             }
      }); 
```

和工作示例[http://jsfiddle.net/3veht/6/](http://jsfiddle.net/3veht/6/)

# c# - Github Restful API 由 sha 提交

> ID：14472482
> 
> 赞同：0
> 
> 时间：2013-01-23T04:29:48.920
> 
> 标签：c#, github

我希望有人能指出正确的方向来调用 github api v3 以获取 sha 的提交详细信息。我收到一条一致的消息“未找到

```
{
message: "Not Found"
} 
```

我正在打的电话是：

[https://api.github.com/repos/](https://api.github.com/repos/) {owner}/{reponame}/{sha}

我需要密钥或安全令牌来完成此呼叫吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T04:36:36.377

这似乎是您需要的 URL：

```
https://api.github.com/repos/{user}/{repo name}/git/commits/{sha} 
```

例子：

```
https://api.github.com/repos/guillaumepotier/Parsley.js/git/commits/3934bc47e17620eb27876e9079ebe360611f8693 
```

# linq - 使用 linqkit 的动态 LINQ

> ID：14472483
> 
> 赞同：1
> 
> 时间：2013-01-23T04:29:52.977
> 
> 标签：linq, dynamic-linq, predicatebuilder, linqkit

遵循来自[http://www.albahari.com/nutshell/predicatebuilder.aspx的示例](http://www.albahari.com/nutshell/predicatebuilder.aspx)

```
IQueryable<Product> SearchProducts (params string[] keywords)
{
  var predicate = PredicateBuilder.False<Product>();

  foreach (string keyword in keywords)
  {
    string temp = keyword;
    predicate = predicate.Or (p => p.Description.Contains (temp));
  }
  return dataContext.Products.Where (predicate);
} 
```

我有一个类似的要求，除了首先我必须进行 AND 查询，其次，与上面的示例不同，我有一堆字段名称和一个要在每个字段中搜索的值。在用户通过之前，字段名称和值都是未知的。我最终做了类似下面的代码，但显然是非常紧密耦合的。

```
 IEnumerable<someClass> qry = context.someClass;
 var pb = PredicateBuilder.True<someClass>();

 foreach (customClass rule in Filters)
            {

                switch ( rule.field)
                    {
                    case "FirstName":
                            pb = pb.And(p=>p.FirstName.Contains(rule.data));
                            break;
                    case "LastName":
                            pb = pb.And(p=>p.LastName.Contains(rule.data));
                            break;
                    case "City":
                           pb = pb.And(p=>p.City.Contains(rule.data));
                           break;

                    }

                qry.AsQueryable().Where(pb);
            }
            return qry; 
```

从上面可以看出，Rule 类具有字段和数据属性。理想的情况是，如果我可以动态创建 predicatebuilder ，例如

```
filterClause = "p=>p." + rule.field + ".Contains(" + rule.data + ")";

pb = pb.And(filterClause);

qry.AsQueryable().Where(pb); 
```

提前感谢您的任何意见

# php - PHP 获取标头不适用于 -

> ID：14472490
> 
> 赞同：5
> 
> 时间：2013-01-23T04:31:15.113
> 
> 标签：php

我正在尝试获取 URL 标头的输出，它适用于子域示例

```
subdomain.example.com 
```

我将收到正常的消息 HTTP 200 ok 等，但如果子域中包含`-`任何内容，则标题中不会显示任何内容。

`-test.tumblr.com`或者`test-.tumblr.com`

有没有更好的方法来做到这一点？我的示例代码如下。

```
$url = "http://-test.tumblr.com";
$url_headers = @get_headers($url);
$urlheader = $url_headers[0];
echo $urlheader; 
```

如果无法通过检查标题来完成，我将如何查看页面是否存在。我尝试过使用 curl，但效果相同。

谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-23T04:44:24.057

当您取消抑制来自 get_headers 的警告时，您是否会收到只能在 url 上使用 get_headers 的警告？

```
Warning: get_headers(): This function may only be used against URLs 
```

尝试在子域前面添加 http://。我在我的主机文件中添加了一个子域 test-.myserver.loc 并且能够获取标题。

```
$url = 'http://test-.myserver.loc';
print_r(get_headers($url)) 
```

[http://us3.php.net/get_headers](http://us3.php.net/get_headers)

# php - 如何自定义 yii 表单验证？

> ID：14472497
> 
> 赞同：0
> 
> 时间：2013-01-23T04:31:41.950
> 
> 标签：php, yii, validation

我是 Yii 的新手。我在 yii wiki 和文档的帮助下完成了一些任务。现在，我已经完成了一份带有验证的员工详细信息更新表格。但是我不知道这个验证过程实际上是在哪里进行的。即使我可以看到验证脚本。以及如何自定义错误消息？谁能帮我抓住这个？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T10:48:11.133

对于内置验证器，您通常可以通过[`message`](http://www.yiiframework.com/doc/api/1.1/CValidator#message-detail)在模型的`rules()`.

一些内置验证器具有您可以设置的其他特定错误消息，例如[`CNumberValidator`](http://www.yiiframework.com/doc/api/1.1/CNumberValidator)还具有属性[`tooSmall`](http://www.yiiframework.com/doc/api/1.1/CNumberValidator#tooSmall-detail)和[`tooBig`](http://www.yiiframework.com/doc/api/1.1/CNumberValidator#tooBig-detail). 对于带有其他错误消息的验证器，这些都在验证器的参考文档中突出显示。

使用自定义验证规则时，您可以使用[`CModel::addError`](http://www.yiiframework.com/doc/api/1.1/CModel#addError-detail)or明确指定错误消息[`CValidator::addError`](http://www.yiiframework.com/doc/api/1.1/CValidator#addError-detail)，因此您可以完全控制它。

显示输入表单时，您可以使用属性自定义各种元素的[`CHtml::errorCss`](http://www.yiiframework.com/doc/api/1.1/CHtml#errorCss-detail)CSS 类（有错误的输入元素的 CSS 类）、[`CHtml::errorMessageCss`](http://www.yiiframework.com/doc/api/1.1/CHtml#errorMessageCss-detail)（显示在输入元素旁边的错误消息的类）和[`CHtml::errorSummaryCss`](http://www.yiiframework.com/doc/api/1.1/CHtml#errorSummaryCss-detail)（错误的类如果您选择打印，通常会出现在表格顶部的摘要）。从 Yii 1.1.13 开始，您还可以自定义[`CHtml::errorContainerTag`](http://www.yiiframework.com/doc/api/1.1/CHtml#errorContainerTag-detail)为每个验证错误消息选择标签名称（此标签将获取`errorMessageCss`类）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T04:48:00.073

你没有给我们太多的工作，所以这里是一个检查电话号码特定格式的例子，这个片段在一个模型中，你的模型中有更多的规则：

```
public function rules()
{
    array('contact_phone', 'phoneNumber'), //custom check fn see below
}

/** 
 * check the format of the phone number entered
 * @param string $attribute the name of the attribute to be validated
 * @param array $params options specified in the validation rule
 */
 public function phoneNumber($attribute,$params='')
 {
    if(preg_match("/^\(?\d{3}\)?[\s-]?\d{3}[\s-]?\d{4}$/",$this->$attribute) === 0)
    {   
        $this->addError($attribute,
            'Contact phone number is required and  may contain only these characters: "0123456789()- " in a form like (858) 555-1212 or 8585551212 or (213)555 1212' );  
    }   
 } 
```

您还应该查看 YII wiki 以获取很多关于验证的好信息，例如[这个](http://www.yiiframework.com/wiki/56/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-13T06:57:42.590

我可能只是在这里放了一个带有自定义错误的自定义验证器。看看我如何使用`$this->getAttributeLabel($field)`来获取验证器内给定字段的属性名称/标签，以便将其输出到自定义错误中：

```
public function checkFormFields($params)
{
    $patternAccount = '/\d{20}/'; // двадцать цифр
    $patternBic = '/\d{9}/'; // девять цифр
    $patternINN = '/\d{10,12}/'; // от десяти до двенадцати цифр
    $fields = explode(',', $params); // get the names of required fields
    foreach ($fields as $field)
     { 
         if($this->$field == '') 
            $this->addError($this->$field, Yii::t('general', $this->getAttributeLabel($field) ) .' '. Yii::t('general', 'should not be empty')); 
        if( $field == 'CurrentAccount' OR $field == 'CorrespondentAccount' ) 
        { 
            if(!preg_match($patternAccount, $this->$field))
                $this->addError($this->$field, Yii::t('general', $this->getAttributeLabel($field) ) .' '. Yii::t('general', 'should contain exact 20 digits')); 
        }               
        elseif( $field == 'BIC' ) 
        { 
            if(!preg_match($patternBic, $this->$field))
                $this->addError($this->$field, Yii::t('general', $this->getAttributeLabel($field) ) .' '. Yii::t('general', 'should contain exact 9 digits')); 
        }
        elseif( $field == 'INN' ) 
        { 
            if(!preg_match($patternINN, $this->$field))
                $this->addError($this->$field, Yii::t('general', $this->getAttributeLabel($field) ) .' '. Yii::t('general', 'should contain between 10 and 12 digits')); 
        }
     } 
```

希望这将帮助您清楚如何自定义错误。

# javascript - style = "right:0px" 属性在 IE9 中不起作用？

> ID：14472503
> 
> 赞同：2
> 
> 时间：2013-01-23T04:32:14.723
> 
> 标签：javascript, css, jquery-ui, internet-explorer, jquery-plugins

我制作了一个聊天应用程序，在屏幕的右下角有聊天窗口。它按预期保留在右侧下角，在 chrome 、 firefox 、 IE8 、 IE7 中。但仅在 IE9 中，聊天窗口会被推到左侧下角。我不知道这是什么原因。

我使用的聊天窗口插件是 Jquery UI 聊天框插件。 [http://magma.cs.uiuc.edu/wenpu1/chatbox.html](http://magma.cs.uiuc.edu/wenpu1/chatbox.html)

该代码具有以下语句，定义了聊天窗口的位置

```
<div class="ui-widget ui-corner-top ui-chatbox" outline="0" style="right: 0px;" 
```

这实际上将我的聊天窗口定位到这个右侧下角。

我实际上在开发人员工具 chrome 中尝试过，当我删除它时`"style="right : 0px"`，它实际上将聊天窗口推到了左侧下角。

但我不知道为什么这在 IE9 中不起作用。

您可以通过打开链接在 IE9 中试用[http://magma.cs.uiuc.edu/wenpu1/chatbox.html](http://magma.cs.uiuc.edu/wenpu1/chatbox.html)

并单击此页面中的“添加聊天框”链接。您可以看到聊天框移动到左侧下角。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T20:30:22.763

尝试为容器添加宽度......应该可以。

```
width: 205px;

<div class="ui-widget ui-corner-top ui-chatbox" outline="0" style="right: 0px; width: 205px;"> 
```

# android - 无法获取 activity_main.xml 文件

> ID：14472506
> 
> 赞同：0
> 
> 时间：2013-01-23T04:32:36.373
> 
> 标签：android, xml, android-layout

我无法在布局中获取 activity_main.xml 文件。我没有得到我的代码

```
setContentView(R.layout.activity_main.xml); 
```

我收到此错误

```
 activity_main cannot be resolved or is not a field. 
```

请解释我需要做什么才能获得访问权限。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T04:34:46.090

删除不需要的导入，例如`import android.R;`

检查中是否有错误`res folder`。特别是在`string.xml`或者`drawable folder files`如果没有错误意味着清理您的项目并重试

# jquery - jQuery - 设置用户定义的变量

> ID：14472509
> 
> 赞同：0
> 
> 时间：2013-01-23T04:32:46.387
> 
> 标签：jquery, variables, jquery-plugins

我在我的网站中使用 jQuery sharrre 插件。但有一个问题。我想更改插件的默认变量，以及如何在插件代码之外进行更改。

插件代码中有一个默认变量

```
urlCurl: 'sharrre.php',  //PHP script for google plus... 
```

是否可以像这样在插件之外设置这个var：

```
jQuery(function(){
  defaults = {
    urlCurl: '<?php echo get_template_directory() . '/inc/sharrre.php' ?>'
    }
}); 
```

**这是 sharrre 插件代码**

```
/*
 *  Sharrre.com - Make your sharing widget!
 *  Version: beta 1.3.3 
 *  Author: Julien Hany
 *  License: MIT http://en.wikipedia.org/wiki/MIT_License or GPLv2 http://en.wikipedia.org/wiki/GNU_General_Public_License
 */

;(function ( $, window, document, undefined ) {

  /* Defaults
  ================================================== */
  var pluginName = 'sharrre',
  defaults = {
    className: 'sharrre',
    share: {
      googlePlus: false,
      facebook: false,
      twitter: false,
      digg: false,
      delicious: false,
      stumbleupon: false,
      linkedin: false,
      pinterest: false
    },
    shareTotal: 0,
    template: '',
    title: '',
    url: document.location.href,
    text: document.title,
    urlCurl: 'sharrre.php',  //PHP script for google plus...
    count: {}, //counter by social network
    total: 0,  //total of sharing
    shorterTotal: true, //show total by k or M when number is to big
    enableHover: true, //disable if you want to personalize hover event with callback
    enableCounter: true, //disable if you just want use buttons
    enableTracking: false, //tracking with google analitycs
    hover: function(){}, //personalize hover event with this callback function
    hide: function(){}, //personalize hide event with this callback function
    click: function(){}, //personalize click event with this callback function
    render: function(){}, //personalize render event with this callback function
    buttons: {  //settings for buttons
      googlePlus : {  //http://www.google.com/webmasters/+1/button/
        url: '',  //if you need to personnalize button url
        urlCount: false,  //if you want to use personnalize button url on global counter
        size: 'medium',
        lang: 'en-US',
        annotation: ''
      },
      facebook: { //http://developers.facebook.com/docs/reference/plugins/like/
        url: '',  //if you need to personalize url button
        urlCount: false,  //if you want to use personnalize button url on global counter
        action: 'like',
        layout: 'button_count',
        width: '',
        send: 'false',
        faces: 'false',
        colorscheme: '',
        font: '',
        lang: 'en_US'
      },
      twitter: {  //http://twitter.com/about/resources/tweetbutton
        url: '',  //if you need to personalize url button
        urlCount: false,  //if you want to use personnalize button url on global counter
        count: 'horizontal',
        hashtags: '',
        via: '',
        related: '',
        lang: 'en'
      },
      digg: { //http://about.digg.com/downloads/button/smart
        url: '',  //if you need to personalize url button
        urlCount: false,  //if you want to use personnalize button url on global counter
        type: 'DiggCompact'
      },
      delicious: {
        url: '',  //if you need to personalize url button
        urlCount: false,  //if you want to use personnalize button url on global counter
        size: 'medium' //medium or tall
      },
      stumbleupon: {  //http://www.stumbleupon.com/badges/
        url: '',  //if you need to personalize url button
        urlCount: false,  //if you want to use personnalize button url on global counter
        layout: '1'
      },
      linkedin: {  //http://developer.linkedin.com/plugins/share-button
        url: '',  //if you need to personalize url button
        urlCount: false,  //if you want to use personnalize button url on global counter
        counter: ''
      },
      pinterest: { //http://pinterest.com/about/goodies/
        url: '',  //if you need to personalize url button
        media: '',
        description: '',
        layout: 'horizontal'
      }
    }
  },
  /* Json URL to get count number
  ================================================== */
  urlJson = {
    googlePlus: "",
    //new FQL method by Sire
    facebook: "https://graph.facebook.com/fql?q=SELECT%20url,%20normalized_url,%20share_count,%20like_count,%20comment_count,%20total_count,commentsbox_count,%20comments_fbid,%20click_count%20FROM%20link_stat%20WHERE%20url=%27{url}%27&callback=?",
    //old method facebook: "http://graph.facebook.com/?id={url}&callback=?",
    //facebook : "http://api.ak.facebook.com/restserver.php?v=1.0&method=links.getStats&urls={url}&format=json"
    twitter: "http://cdn.api.twitter.com/1/urls/count.json?url={url}&callback=?",
    digg: "http://services.digg.com/2.0/story.getInfo?links={url}&type=javascript&callback=?",
    delicious: 'http://feeds.delicious.com/v2/json/urlinfo/data?url={url}&callback=?',
    //stumbleupon: "http://www.stumbleupon.com/services/1.01/badge.getinfo?url={url}&format=jsonp&callback=?",
    stumbleupon: "",
    linkedin: "http://www.linkedin.com/countserv/count/share?format=jsonp&url={url}&callback=?",
    pinterest: ""
  },
  /* Load share buttons asynchronously
  ================================================== */
  loadButton = {
    googlePlus : function(self){
      var sett = self.options.buttons.googlePlus;
      //$(self.element).find('.buttons').append('<div class="button googleplus"><g:plusone size="'+self.options.buttons.googlePlus.size+'" href="'+self.options.url+'"></g:plusone></div>');
      $(self.element).find('.buttons').append('<div class="button googleplus"><div class="g-plusone" data-size="'+sett.size+'" data-href="'+(sett.url !== '' ? sett.url : self.options.url)+'" data-annotation="'+sett.annotation+'"></div></div>');
      window.___gcfg = {
        lang: self.options.buttons.googlePlus.lang
      };
      var loading = 0;
      if(typeof gapi === 'undefined' && loading == 0){
        loading = 1;
        (function() {
          var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
          po.src = '//apis.google.com/js/plusone.js';
          var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
        })();
      }
      else{
        gapi.plusone.go();
      }
    },
    facebook : function(self){
      var sett = self.options.buttons.facebook;
      $(self.element).find('.buttons').append('<div class="button facebook"><div id="fb-root"></div><div class="fb-like" data-href="'+(sett.url !== '' ? sett.url : self.options.url)+'" data-send="'+sett.send+'" data-layout="'+sett.layout+'" data-width="'+sett.width+'" data-show-faces="'+sett.faces+'" data-action="'+sett.action+'" data-colorscheme="'+sett.colorscheme+'" data-font="'+sett.font+'" data-via="'+sett.via+'"></div></div>');
      var loading = 0;
      if(typeof FB === 'undefined' && loading == 0){
        loading = 1;
        (function(d, s, id) {
          var js, fjs = d.getElementsByTagName(s)[0];
          if (d.getElementById(id)) {return;}
          js = d.createElement(s); js.id = id;
          js.src = '//connect.facebook.net/'+sett.lang+'/all.js#xfbml=1';
          fjs.parentNode.insertBefore(js, fjs);
        }(document, 'script', 'facebook-jssdk'));
      }
      else{
        FB.XFBML.parse();
      }
    },
    twitter : function(self){
      var sett = self.options.buttons.twitter;
      $(self.element).find('.buttons').append('<div class="button twitter"><a href="https://twitter.com/share" class="twitter-share-button" data-url="'+(sett.url !== '' ? sett.url : self.options.url)+'" data-count="'+sett.count+'" data-text="'+self.options.text+'" data-via="'+sett.via+'" data-hashtags="'+sett.hashtags+'" data-related="'+sett.related+'" data-lang="'+sett.lang+'">Tweet</a></div>');
      var loading = 0;
      if(typeof twttr === 'undefined' && loading == 0){
        loading = 1;
        (function() {
          var twitterScriptTag = document.createElement('script');
          twitterScriptTag.type = 'text/javascript';
          twitterScriptTag.async = true;
          twitterScriptTag.src = '//platform.twitter.com/widgets.js';
          var s = document.getElementsByTagName('script')[0];
          s.parentNode.insertBefore(twitterScriptTag, s);
        })();
      }
      else{
        $.ajax({ url: '//platform.twitter.com/widgets.js', dataType: 'script', cache:true}); //http://stackoverflow.com/q/6536108
      }
    },
    digg : function(self){
      var sett = self.options.buttons.digg;
      $(self.element).find('.buttons').append('<div class="button digg"><a class="DiggThisButton '+sett.type+'" rel="nofollow external" href="http://digg.com/submit?url='+encodeURIComponent((sett.url !== '' ? sett.url : self.options.url))+'"></a></div>');
      var loading = 0;
      if(typeof __DBW === 'undefined' && loading == 0){
        loading = 1;
        (function() {
          var s = document.createElement('SCRIPT'), s1 = document.getElementsByTagName('SCRIPT')[0];
          s.type = 'text/javascript';
          s.async = true;
          s.src = '//widgets.digg.com/buttons.js';
          s1.parentNode.insertBefore(s, s1);
        })();
      }
    },
    delicious : function(self){
      if(self.options.buttons.delicious.size == 'tall'){//tall
        var css = 'width:50px;',
        cssCount = 'height:35px;width:50px;font-size:15px;line-height:35px;',
        cssShare = 'height:18px;line-height:18px;margin-top:3px;';
      }
      else{//medium
        var css = 'width:93px;',
        cssCount = 'float:right;padding:0 3px;height:20px;width:26px;line-height:20px;',
        cssShare = 'float:left;height:20px;line-height:20px;';
      }
      var count = self.shorterTotal(self.options.count.delicious);
      if(typeof count === "undefined"){
        count = 0;
      }
      $(self.element).find('.buttons').append(
      '<div class="button delicious"><div style="'+css+'font:12px Arial,Helvetica,sans-serif;cursor:pointer;color:#666666;display:inline-block;float:none;height:20px;line-height:normal;margin:0;padding:0;text-indent:0;vertical-align:baseline;">'+
      '<div style="'+cssCount+'background-color:#fff;margin-bottom:5px;overflow:hidden;text-align:center;border:1px solid #ccc;border-radius:3px;">'+count+'</div>'+
      '<div style="'+cssShare+'display:block;padding:0;text-align:center;text-decoration:none;width:50px;background-color:#7EACEE;border:1px solid #40679C;border-radius:3px;color:#fff;">'+
      '<img src="http://www.delicious.com/static/img/delicious.small.gif" height="10" width="10" alt="Delicious" /> Add</div></div></div>');

      $(self.element).find('.delicious').on('click', function(){
        self.openPopup('delicious');
      });
    },
    stumbleupon : function(self){
      var sett = self.options.buttons.stumbleupon;
      $(self.element).find('.buttons').append('<div class="button stumbleupon"><su:badge layout="'+sett.layout+'" location="'+(sett.url !== '' ? sett.url : self.options.url)+'"></su:badge></div>');
      var loading = 0;
      if(typeof STMBLPN === 'undefined' && loading == 0){
        loading = 1;
        (function() {
          var li = document.createElement('script');li.type = 'text/javascript';li.async = true;
          li.src = '//platform.stumbleupon.com/1/widgets.js'; 
          var s = document.getElementsByTagName('script')[0];s.parentNode.insertBefore(li, s);
        })();
        s = window.setTimeout(function(){
          if(typeof STMBLPN !== 'undefined'){
            STMBLPN.processWidgets();
            clearInterval(s);
          }
        },500);
      }
      else{
        STMBLPN.processWidgets();
      }
    },
    linkedin : function(self){
      var sett = self.options.buttons.linkedin;
      $(self.element).find('.buttons').append('<div class="button linkedin"><script type="in/share" data-url="'+(sett.url !== '' ? sett.url : self.options.url)+'" data-counter="'+sett.counter+'"></script></div>');
      var loading = 0;
      if(typeof window.IN === 'undefined' && loading == 0){
        loading = 1;
        (function() {
          var li = document.createElement('script');li.type = 'text/javascript';li.async = true;
          li.src = '//platform.linkedin.com/in.js'; 
          var s = document.getElementsByTagName('script')[0];s.parentNode.insertBefore(li, s);
        })();
      }
      else{
        window.IN.init();
      }
    },
    pinterest : function(self){
      var sett = self.options.buttons.pinterest;
      $(self.element).find('.buttons').append('<div class="button pinterest"><a href="http://pinterest.com/pin/create/button/?url='+(sett.url !== '' ? sett.url : self.options.url)+'&media='+sett.media+'&description='+sett.description+'" class="pin-it-button" count-layout="'+sett.layout+'">Pin It</a></div>');

      (function() {
        var li = document.createElement('script');li.type = 'text/javascript';li.async = true;
        li.src = '//assets.pinterest.com/js/pinit.js'; 
        var s = document.getElementsByTagName('script')[0];s.parentNode.insertBefore(li, s);
      })();
    }
  },
  /* Tracking for Google Analytics
  ================================================== */
  tracking = {
    googlePlus: function(){},
    facebook: function(){
      //console.log('facebook');
      fb = window.setInterval(function(){
        if (typeof FB !== 'undefined') {
          FB.Event.subscribe('edge.create', function(targetUrl) {
            _gaq.push(['_trackSocial', 'facebook', 'like', targetUrl]);
          });
          FB.Event.subscribe('edge.remove', function(targetUrl) {
            _gaq.push(['_trackSocial', 'facebook', 'unlike', targetUrl]);
          });
          FB.Event.subscribe('message.send', function(targetUrl) {
            _gaq.push(['_trackSocial', 'facebook', 'send', targetUrl]);
          });
          //console.log('ok');
          clearInterval(fb);
        }
      },1000);
    },
    twitter: function(){
      //console.log('twitter');
      tw = window.setInterval(function(){
        if (typeof twttr !== 'undefined') {
          twttr.events.bind('tweet', function(event) {
            if (event) {
              _gaq.push(['_trackSocial', 'twitter', 'tweet']);
            }
          });
          //console.log('ok');
          clearInterval(tw);
        }
      },1000);
    },
    digg: function(){
      //if somenone find a solution, mail me !
      /*$(this.element).find('.digg').on('click', function(){
        _gaq.push(['_trackSocial', 'digg', 'add']);
      });*/
    },
    delicious: function(){},
    stumbleupon: function(){},
    linkedin: function(){
      function LinkedInShare() {
        _gaq.push(['_trackSocial', 'linkedin', 'share']);
      }
    },
    pinterest: function(){
      //if somenone find a solution, mail me !
    }
  },
  /* Popup for each social network
  ================================================== */
  popup = {
    googlePlus: function(opt){
      window.open("https://plus.google.com/share?hl="+opt.buttons.googlePlus.lang+"&url="+encodeURIComponent((opt.buttons.googlePlus.url !== '' ? opt.buttons.googlePlus.url : opt.url)), "", "toolbar=0, status=0, width=900, height=500");
    },
    facebook: function(opt){
      window.open("http://www.facebook.com/sharer/sharer.php?u="+encodeURIComponent((opt.buttons.facebook.url !== '' ? opt.buttons.facebook.url : opt.url))+"&t="+opt.text+"", "", "toolbar=0, status=0, width=900, height=500");
    },
    twitter: function(opt){
      window.open("https://twitter.com/intent/tweet?text="+encodeURIComponent(opt.text)+"&url="+encodeURIComponent((opt.buttons.twitter.url !== '' ? opt.buttons.twitter.url : opt.url))+(opt.buttons.twitter.via !== '' ? '&via='+opt.buttons.twitter.via : ''), "", "toolbar=0, status=0, width=650, height=360");
    },
    digg: function(opt){
      window.open("http://digg.com/tools/diggthis/submit?url="+encodeURIComponent((opt.buttons.digg.url !== '' ? opt.buttons.digg.url : opt.url))+"&title="+opt.text+"&related=true&style=true", "", "toolbar=0, status=0, width=650, height=360");
    },
    delicious: function(opt){
      window.open('http://www.delicious.com/save?v=5&noui&jump=close&url='+encodeURIComponent((opt.buttons.delicious.url !== '' ? opt.buttons.delicious.url : opt.url))+'&title='+opt.text, 'delicious', 'toolbar=no,width=550,height=550');
    },
    stumbleupon: function(opt){
      window.open('http://www.stumbleupon.com/badge/?url='+encodeURIComponent((opt.buttons.delicious.url !== '' ? opt.buttons.delicious.url : opt.url)), 'stumbleupon', 'toolbar=no,width=550,height=550');
    },
    linkedin: function(opt){
      window.open('https://www.linkedin.com/cws/share?url='+encodeURIComponent((opt.buttons.delicious.url !== '' ? opt.buttons.delicious.url : opt.url))+'&token=&isFramed=true', 'linkedin', 'toolbar=no,width=550,height=550');
    },
    pinterest: function(opt){
      window.open('http://pinterest.com/pin/create/button/?url='+encodeURIComponent((opt.buttons.pinterest.url !== '' ? opt.buttons.pinterest.url : opt.url))+'&media='+encodeURIComponent(opt.buttons.pinterest.media)+'&description='+opt.buttons.pinterest.description, 'pinterest', 'toolbar=no,width=700,height=300');
    }
  };

  /* Plugin constructor
  ================================================== */
  function Plugin( element, options ) {
    this.element = element;

    this.options = $.extend( true, {}, defaults, options);
    this.options.share = options.share; //simple solution to allow order of buttons

    this._defaults = defaults;
    this._name = pluginName;

    this.init();
  };

  /* Initialization method
  ================================================== */
  Plugin.prototype.init = function () {
    var self = this;
    if(this.options.urlCurl !== ''){
      urlJson.googlePlus = this.options.urlCurl + '?url={url}&type=googlePlus'; // PHP script for GooglePlus...
      urlJson.stumbleupon = this.options.urlCurl + '?url={url}&type=stumbleupon'; // PHP script for Stumbleupon...
      urlJson.pinterest = this.options.urlCurl + '?url={url}&type=pinterest'; // PHP script for Pinterest...
    }
    $(this.element).addClass(this.options.className); //add class

    //HTML5 Custom data
    if(typeof $(this.element).data('title') !== 'undefined'){
      this.options.title = $(this.element).attr('data-title');
    }
    if(typeof $(this.element).data('url') !== 'undefined'){
      this.options.url = $(this.element).data('url');
    }
    if(typeof $(this.element).data('text') !== 'undefined'){
      this.options.text = $(this.element).data('text');
    }

    //how many social website have been selected
    $.each(this.options.share, function(name, val) {
      if(val === true){
        self.options.shareTotal ++;
      }
    });

    if(self.options.enableCounter === true){  //if for some reason you don't need counter
      //get count of social share that have been selected
      $.each(this.options.share, function(name, val) {
        if(val === true){
          //self.getSocialJson(name);
          try {
            self.getSocialJson(name);
          } catch(e){
          }
        }
      });
    }
    else if(self.options.template !== ''){  //for personalized button (with template)
      this.options.render(this, this.options);
    }
    else{ // if you want to use official button like example 3 or 5
      this.loadButtons();
    }

    //add hover event
    $(this.element).hover(function(){
      //load social button if enable and 1 time
      if($(this).find('.buttons').length === 0 && self.options.enableHover === true){
        self.loadButtons();
      }
      self.options.hover(self, self.options);
    }, function(){
      self.options.hide(self, self.options);
    });

    //click event
    $(this.element).click(function(){
      self.options.click(self, self.options);
      return false;
    });
  };

  /* loadButtons methode
  ================================================== */
  Plugin.prototype.loadButtons = function () {
    var self = this;
    $(this.element).append('<div class="buttons"></div>');
    $.each(self.options.share, function(name, val) {
      if(val == true){
        loadButton[name](self);
        if(self.options.enableTracking === true){ //add tracking
          tracking[name]();
        }
      }
    });
  };

  /* getSocialJson methode
  ================================================== */
  Plugin.prototype.getSocialJson = function (name) {
    var self = this,
    count = 0,
    url = urlJson[name].replace('{url}', encodeURIComponent(this.options.url));
    if(this.options.buttons[name].urlCount === true && this.options.buttons[name].url !== ''){
      url = urlJson[name].replace('{url}', this.options.buttons[name].url);
    }
    //console.log('name : ' + name + ' - url : '+url); //debug
    if(url != '' && self.options.urlCurl !== ''){  //urlCurl = '' if you don't want to used PHP script but used social button
      $.getJSON(url, function(json){
        if(typeof json.count !== "undefined"){  //GooglePlus, Stumbleupon, Twitter and Digg
          var temp = json.count + '';
          temp = temp.replace('\u00c2\u00a0', '');  //remove google plus special chars
          count += parseInt(temp, 10);
        }
        //get the FB total count (shares, likes and more)
        else if(json.data && json.data.length > 0 && typeof json.data[0].total_count !== "undefined"){ //Facebook total count
          count += parseInt(json.data[0].total_count, 10);
        }     
        else if(typeof json.shares !== "undefined"){  //Facebook
         count += parseInt(json.shares, 10);
        }
        else if(typeof json[0] !== "undefined"){  //Delicious
          count += parseInt(json[0].total_posts, 10);
        }
        else if(typeof json[0] !== "undefined"){  //Stumbleupon
        }
        self.options.count[name] = count;
        self.options.total += count;
        self.renderer();
        self.rendererPerso();
        //console.log(json); //debug
      })
      .error(function() { 
        self.options.count[name] = 0;
        self.rendererPerso();
       });
    }
    else{
      self.renderer();
      self.options.count[name] = 0;
      self.rendererPerso();
    }
  };

  /* launch render methode
  ================================================== */
  Plugin.prototype.rendererPerso = function () {
    //check if this is the last social website to launch render
    var shareCount = 0;
    for (e in this.options.count) { shareCount++; }
    if(shareCount === this.options.shareTotal){
      this.options.render(this, this.options);
    }
  };

  /* render methode
  ================================================== */
  Plugin.prototype.renderer = function () {
    var total = this.options.total,
    template = this.options.template;
    if(this.options.shorterTotal === true){  //format number like 1.2k or 5M
      total = this.shorterTotal(total);
    }

    if(template !== ''){  //if there is a template
      template = template.replace('{total}', total);
      $(this.element).html(template);
    }
    else{ //template by defaults
      $(this.element).html(
                            '<div class="box"><a class="count" href="#">' + total + '</a>' + 
                            (this.options.title !== '' ? '<a class="share" href="#">' + this.options.title + '</a>' : '') +
                            '</div>'
                          );
    }
  };

  /* format total numbers like 1.2k or 5M
  ================================================== */
  Plugin.prototype.shorterTotal = function (num) {
    if (num >= 1e6){
      num = (num / 1e6).toFixed(2) + "M"
    } else if (num >= 1e3){ 
      num = (num / 1e3).toFixed(1) + "k"
    }
    return num;
  };

  /* Methode for open popup
  ================================================== */
  Plugin.prototype.openPopup = function (site) {
    popup[site](this.options);  //open
    if(this.options.enableTracking === true){ //tracking!
      var tracking = {
        googlePlus: {site: 'Google', action: '+1'},
        facebook: {site: 'facebook', action: 'like'},
        twitter: {site: 'twitter', action: 'tweet'},
        digg: {site: 'digg', action: 'add'},
        delicious: {site: 'delicious', action: 'add'},
        stumbleupon: {site: 'stumbleupon', action: 'add'},
        linkedin: {site: 'linkedin', action: 'share'},
        pinterest: {site: 'pinterest', action: 'pin'}
      };
      _gaq.push(['_trackSocial', tracking[site].site, tracking[site].action]);
    }
  };

  /* Methode for add +1 to a counter
  ================================================== */
  Plugin.prototype.simulateClick = function () {
    var html = $(this.element).html();
    $(this.element).html(html.replace(this.options.total, this.options.total+1));
  };

  /* Methode for add +1 to a counter
  ================================================== */
  Plugin.prototype.update = function (url, text) {
    if(url !== ''){
      this.options.url = url;
    }
    if(text !== ''){
      this.options.text = text;
    }
  };

  /* A really lightweight plugin wrapper around the constructor, preventing against multiple instantiations
  ================================================== */
  $.fn[pluginName] = function ( options ) {
    var args = arguments;
    if (options === undefined || typeof options === 'object') {
      return this.each(function () {
        if (!$.data(this, 'plugin_' + pluginName)) {
          $.data(this, 'plugin_' + pluginName, new Plugin( this, options ));
        }
      });
    } else if (typeof options === 'string' && options[0] !== '_' && options !== 'init') {
      return this.each(function () {
        var instance = $.data(this, 'plugin_' + pluginName);
        if (instance instanceof Plugin && typeof instance[options] === 'function') {
          instance[options].apply( instance, Array.prototype.slice.call( args, 1 ) );
        }
      });
    }
  };
})(jQuery, window, document); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T04:47:27.483

您应该阅读插件文档，但仅基于查看您似乎想要使用的语法：

```
$("selector").sharrre({urlCurl: '/path/inc/sharrre.php'}); 
```

我不能提倡 PHP 和 JavaScript 的混合。通过以某种方式将其添加到 DOM 来获取正确的路径部分，也许使用`<base>`.

# c++ - Swap() 函数的哪种实现更好，在什么情况下更好？

> ID：14472510
> 
> 赞同：0
> 
> 时间：2013-01-23T04:32:55.093
> 
> 标签：c++, templates, stl, std, swap

我定义了两个函数：

1）。

```
template<class T> inline
void swap(T &first, T &second)
{   
    if (&first != &second)
    {
        T tmp = first;
        first = second;
        second = tmp;
    }
} 
```

2）。

```
template<typename T>
inline void SwapMe(T *first, T *second)
{
    if(*first != *second)
    {
        T tmp = *first;
        *first = *second;
        *second = tmp;
    }
} 
```

哪个实现更好（第一个等于 std::swap() ）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T05:31:12.917

没有人说案例 2 是危险的。如果您的代码将包含 NULL 指针，您是否会收到程序崩溃：SwapMe (NULL, NULL)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T04:38:00.513

第一个版本更好地使用通过引用传递或通过值传递的变量。

第二个更适合指向值的指针。

它们是不同的，因为引用是与指针不同的动物。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T07:34:04.723

有一个标准函数模板与您的（即）*大致*相同，并且有一个标准函数模板与您的（即）*大致*相同。`swap``std::swap`*`SwapMe``std::iter_swap`*

 *两者都不是真正的“更好”，它们各有用途。它们中的任何一个都可以使用另一个来实现，但是正如在标准中发生的那样，它`iter_swap`是根据 定义的`swap`，因此`swap`被认为是更基本的操作。这是`swap`您将为自己的类型进行 ADL 重载。

在您的代码`*first != *second`中，您的测试`SwapMe`非常可疑。它需要`T`have `operator!=`，并且考虑到某些类型可能会很慢，这并不是什么优化`!=`，因此它为常见情况（当对象不相等时）增加了很大的成本。此外，根据类型的定义`T`，交换相等的对象可能会产生影响（`vector`例如，在 的情况下，容量不参与相等比较，但*在*`std::swap`使用or交换时会交换`vector::swap`）。所以目前`SwapMe`情况更糟，但我怀疑这不是故意的:-)

事实上，`swap`函数中的任何此类测试都是可疑的，因为它往往会减慢常见情况，即使只是微小的。但是，如果您使测试相同，那么它们是否应该存在是与参数类型应该是什么不同的参数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-23T04:46:55.737

两者都不是更好，除了第一个，因为我更喜欢它。其他人会更喜欢第二种，因为他们认为应该在调用者端明确说明函数可能会修改其参数。我的想法是，如果您不知道函数的作用，则不应调用它们，并且它们的作用应该从名称中显而易见，就像交换一样。我还认为，C++ 中原始指针的唯一目的是作为非拥有、可重新定位和/或可空引用。除非您有必要实现自己的内存管理类，例如标准库中的那些。*

# java - Jython - 尝试连接到数据库导致 java.sql l.SQLException：找不到合适的驱动程序

> ID：14472515
> 
> 赞同：1
> 
> 时间：2013-01-23T04:33:23.870
> 
> 标签：java, confluence, jython-2.5

我正在使用 Confluence Script Plugin 在 Confluence 中编写 Jython 宏。我有一些代码在升级到 Confluence 和插件后最近停止工作。我已经尝试了在 SO 和网络上找到的各种可能的解决方案，但没有任何运气。

我正在尝试连接到 Oracle 数据库以查询一些值。这是我的代码：

```
import sys
from oracle.jdbc.driver import OracleDriver
from java.sql import DriverManager, SQLRecoverableException

def connect(user, pw, sid, host, port):
    connection = None
    DriverManager.registerDriver(OracleDriver())

    try:
        connection = DriverManager.getConnection("jdbc:oracle:thin:@"+host+":"+port+":"+sid, user, pw)
    except SQLRecoverableException, e:
        print 'ERROR: Cannot connect to database %s %s %s: %s.' % (host, port, sid, e)
    except:
        print 'ERROR: Cannot connect to database %s %s %s: %s.' % (host, port, sid, sys.exc_info()[1])

    return connection

conn = connect(db_user, db_pw, db_sid, db_host, db_port) 
```

运行此程序会导致以下错误（注意：删除了真实主机名、端口和 sid）：

```
ERROR: Cannot connect to database host port sid: java.sql.SQLException: No suitable driver found for jdbc:oracle:thin:@host:port:sid. 
```

这个错误让我觉得 ojdbc6.jar 找不到或不在正确的目录中。以防万一，我明确地将它添加到类路径中。这仍然没有奏效。将其添加到类路径后，我通过检查进程 args 验证了类路径已正确设置，并且我看到 ojdbc6.jar 正在 catalina.out 中处理。（注意：实际安装路径已删除）

进程参数：

```
argv[21]: -classpath
argv[22]: :<install_path>/atlassian-confluence-4.3.1/lib/ojdbc6.jar:<install_path>/atlassian-confluence-4.3.1/bin/bootstrap.jar 
```

catalina.out：

```
*sys-package-mgr*: processing new jar, '<install_path>/atlassian-confluence-4.3.1/lib/ojdbc6.jar' 
```

我还验证了我们当前使用的是 jdk1.6.0_33，因此 ojdbc6.jar 应该是正确的瘦客户端。有谁知道可能导致错误的原因是什么？

*   JDK：Sun 1.6.0_33-b03
*   Jython：2.5.2
*   汇合：4.3.1
*   脚本插件：4.1.0
*   操作系统：SunOS 5.10
*   应用服务器：Apache Tomcat/6.0.32

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-24T18:36:13.523

我也无法正常工作。但是，当我切换到使用 Oracle 调用接口( [OCI](http://www.oracle.com/technetwork/articles/dsl/mastering-oracle-python-providers-1395759.html) ) 方法在上面的文章中描述，一切都完美无缺。正如文章所述，使用 OCI 有几个优点，例如连接池等。下面是对我有用的代码：

```
import sys
import java.sql.SQLException
from oracle.jdbc.pool import OracleDataSource

cs = "jdbc:oracle:thin:@localhost:1521:XE"

ods = OracleDataSource()
ods.setURL(cs)
ods.setUser("hr")
ods.setPassword("hr")
try:
    conn = ods.getConnection()
except java.sql.SQLException, e:
    print "Problem connecting to \"%s\"" % cs
    sys.exit()

stmt = conn.createStatement()
rs = stmt.executeQuery("select * from departments order by 2")

while rs.next():
    print rs.getString(2)

rs.close()
stmt.close()
conn.close() 
```

# ios - NSMutableArray 越界错误

> ID：14472520
> 
> 赞同：0
> 
> 时间：2013-01-23T04:33:54.217
> 
> 标签：ios, nsmutablearray

我有一个方法的这一部分给我一个错误。这是一个单词过滤器，用户键入 a，所有单词都出现，等等......

当用户删除搜索栏文本并单击表格上的某些内容时出现错误，我超出范围异常。

filtersListContent 的打印输出是单个“”条目，我应该如何防止“”使程序崩溃？

谢谢

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{

    if ([_filteredListContent count]>0){
        NSLog(@"%i",indexPath.row);
        NSLog(@"%@",_filteredListContent);
        _searchBar.text=[self.filteredListContent objectAtIndex:indexPath.row];
        //Save to user default 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T04:45:23.690

我不确定是什么导致了您的问题，但从给出的代码看来，所选行似乎是“越界”。我会改变我的支票：

```
[_filteredListContent count] > 0 
```

类似于：

```
[_filteredListContent count] > indexPath.row 
```

同样，这只是基于给定的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T04:43:06.357

我猜您正在使用搜索显示控制器在表格中进行搜索。但同时您对两个表使用相同的数组引用（self.filteredListContent）（一个是搜索结果表，另一个是用于显示所有单词的原始表）。当您在搜索栏中键入字符时，您正在修改 self.filteredListContent 数组。这就是为什么当您搜索 self.filteredListContent 被修改的东西（可能包含的对象少于用于加载原始表的对象）然后您选择原始表的任何行时，如果您尝试访问数组中不存在的索引处的对象，它将崩溃.

**所以我建议你保留两个数组。一个用于加载原始表和一个用于搜索结果表**

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-23T04:56:09.257

**以下是单词过滤器的简单示例。**

```
-(void)viewDidLoad
{
    self.listOfTemArray = [[NSMutableArray alloc] init];
    self.ItemOfMainArray = [[NSMutableArray alloc] initWithObject:@"/ArrayList/"];

    [self.listOfTemArray addObjectsFromArray:self.ItemOfMainArray];
}

#pragma mark -
#pragma mark Table view Methods

- (NSInteger)numberOfSectionsInTableView:(UITableView *)aTableView {
    // Return the number of sections.
    return 1;
}
- (NSInteger)tableView:(UITableView *)aTableView numberOfRowsInSection:(NSInteger)section {
    // Return the number of rows in the section.
    return [self.listOfTemArray count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
{
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"Foobar"];
    if (cell == nil) 
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"Foobar"];

        cell.selectionStyle = UITableViewCellSelectionStyleBlue;
        cell.textLabel.textColor = [UIColor blackColor];
    }

        cell.textLabel.text = [self.listOfTemArray objectAtIndex: indexPath.row];

    return cell;
}

#pragma mark -
#pragma mark SearchBar methods

- (void)searchBar:(UISearchBar *)theSearchBar textDidChange:(NSString *)searchText
{
        NSString *name = @"";
        NSString *firstLetter = @"";

    if (self.listOfTemArray.count > 0)
         [self.listOfTemArray removeAllObjects];

        if ([searchText length] > 0)
        {
                for (int i = 0; i < [self.ItemOfMainArray count] ; i = i+1)
                {
                        name = [self.ItemOfMainArray objectAtIndex:i];

                        if (name.length >= searchText.length)
                        {
                                firstLetter = [name substringWithRange:NSMakeRange(0, [searchText length])];
                                //NSLog(@"%@",firstLetter);

                                if( [firstLetter caseInsensitiveCompare:searchText] == NSOrderedSame )
                                {
                                    // strings are equal except for possibly case
                                    [self.listOfTemArray addObject: [self.ItemOfMainArray objectAtIndex:i]];
                                    NSLog(@"=========> %@",self.listOfTemArray);
                                }
                         }
                 }
         }
         else
         {
             [self.listOfTemArray addObjectsFromArray:self.ItemOfMainArray ];
         }

        [self.tblView reloadData];
} 
```

**此代码在您的情况下可能有用...**

***谢谢：）***

# node.js - 找不到模块“浏览器”

> ID：14472522
> 
> 赞同：10
> 
> 时间：2013-01-23T04:33:58.523
> 
> 标签：node.js, browserify

我收到此错误：

> 错误：找不到模块“浏览器”

当我将此行添加到我的 app/server.js 文件时：

```
var browserify = require('browserify'); 
```

现在我对 Node 还是很陌生，但我认为我正确安装了它，通过

```
npm install -g browserify 
```

根据[他们的文档](https://github.com/substack/node-browserify#install)。

我很确定这是检查我的全局模块的命令：

```
D:\Websites\MySite> npm ls -g
C:\Users\Mark\AppData\Roaming\npm
├─┬ browserify@1.17.2
│ ├─┬ buffer-browserify@0.0.4
│ │ └── base64-js@0.0.2 
```

它在那里列出了browserify。那我为什么不能`require`呢？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-04-23T12:24:46.290

我遇到了同样的问题，但如果你想安装 browserify 模块，你可以使用它

```
 npm install  browserify 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-07-14T10:41:31.870

尝试：

```
npm install js-base64 
```

如果您遇到以下错误

```
npm ERR! Error: EACCES: permission denied, unlink '/Users/host/module/node_modules/npm/node_modules/.bin/node-gyp'
npm ERR!     at Error (native)
npm ERR!  { [Error: EACCES: permission denied, unlink '/Users/host/module/node_modules/npm/node_modules/.bin/node-gyp']
npm ERR!   errno: -13,
npm ERR!   code: 'EACCES',
npm ERR!   syscall: 'unlink',
npm ERR!   path: '/Users/host/module/node_modules/npm/node_modules/.bin/node-gyp' }
npm ERR! 
npm ERR! Please try running this command again as root/Administrator. 
```

然后使用以下命令：

```
sudo npm install -g js-base64 --save 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-24T06:05:22.117

我必须找到另一种为全局安装 browserify 的方法，以便您可以将此命令用于 linux

```
sudo npm install browserify -g 
```

# android - android项目中的多个包

> ID：14472523
> 
> 赞同：0
> 
> 时间：2013-01-23T04:34:12.210
> 
> 标签：android, android-manifest

看看我的 AndroidMenifest.xml

```
 <?xml version="1.0" encoding="utf-8"?>
    <manifest xmlns:android="http://schemas.android.com/apk/res/android"
        package="com.myapp"
        android:versionCode="1"
        android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="16" />

    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" >
    </uses-permission>

    <application
        android:allowBackup="true"
        android:debuggable="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity      android:name="com.myapp.activities.exercisesetsactivity.ExercisesetsActivity">
            <intent-filter>
                <action android:name="android.intent.action.MAIN"/>
                <category android:name="android.intent.category.LAUNCHER"/>
            </intent-filter>
        </activity>
        <activity
            android:name="com.myapp.activities.mainactivity.MainActivity"
            android:label="@string/app_name" >
            <!--intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter-->
        </activity>

        <service
            android:name="com.myapp.services.guideservice.GuideService"
            android:exported="false" >
        </service>
    </application>
    </manifest> 
```

最初，我有 MainActivity 是我的默认活动。后来我试着把它改成ExercisesetsActivity。那就是我开始在我的 logcat 中遇到错误的地方。

```
 > 
    01-22 22:09:51.831: E/AndroidRuntime(22676): FATAL EXCEPTION: main
        01-22 22:09:51.831: E/AndroidRuntime(22676): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.myapp/com.myapp.activities.exercisesetsactivity.ExercisesetsActivity}: java.lang.NullPointerException
        01-22 22:09:51.831: E/AndroidRuntime(22676):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1983)
        01-22 22:09:51.831: E/AndroidRuntime(22676):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
        01-22 22:09:51.831: E/AndroidRuntime(22676):    at android.app.ActivityThread.access$600(ActivityThread.java:130)
        01-22 22:09:51.831: E/AndroidRuntime(22676):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
        01-22 22:09:51.831: E/AndroidRuntime(22676):    at android.os.Handler.dispatchMessage(Handler.java:99)
        01-22 22:09:51.831: E/AndroidRuntime(22676):    at android.os.Looper.loop(Looper.java:137)
        01-22 22:09:51.831: E/AndroidRuntime(22676):    at android.app.ActivityThread.main(ActivityThread.java:4745)
        01-22 22:09:51.831: E/AndroidRuntime(22676):    at java.lang.reflect.Method.invokeNative(Native Method)
        01-22 22:09:51.831: E/AndroidRuntime(22676):    at java.lang.reflect.Method.invoke(Method.java:511)
        01-22 22:09:51.831: E/AndroidRuntime(22676):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
        01-22 22:09:51.831: E/AndroidRuntime(22676):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
        01-22 22:09:51.831: E/AndroidRuntime(22676):    at dalvik.system.NativeStart.main(Native Method)
        01-22 22:09:51.831: E/AndroidRuntime(22676): Caused by: java.lang.NullPointerException
        01-22 22:09:51.831: E/AndroidRuntime(22676):    at android.content.ContextWrapper.getApplicationContext(ContextWrapper.java:101)
        01-22 22:09:51.831: E/AndroidRuntime(22676):    at com.myapp.activities.exercisesetsactivity.ExercisesetsActivity.<init>(ExercisesetsActivity.java:24)
        01-22 22:09:51.831: E/AndroidRuntime(22676):    at java.lang.Class.newInstanceImpl(Native Method)
        01-22 22:09:51.831: E/AndroidRuntime(22676):    at java.lang.Class.newInstance(Class.java:1319)
        01-22 22:09:51.831: E/AndroidRuntime(22676):    at android.app.Instrumentation.newActivity(Instrumentation.java:1053)
        01-22 22:09:51.831: E/AndroidRuntime(22676):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1974)
        01-22 22:09:51.831: E/AndroidRuntime(22676):    ... 11 more 
```

如果我将它更改为 MainActivity，它工作正常。但是，我希望首先出现练习集活动。

```
package com.myapp.activities.exercisesetsactivity;

import java.io.File;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;

import com.myapp.R;
import com.myapp.activities.mainactivity.MainActivity;
import com.myapp.businessclasses.Exercisesetlist;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.os.Environment;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.ListView;
import android.widget.TextView;

public class ExercisesetsActivity extends Activity {
**private Exercisesetlist myExerciseSetList = new Exercisesetlist(this.getApplicationContext());**

private class currentListAdapter extends ArrayAdapter<String> {

    public currentListAdapter() {
        super(ExercisesetsActivity.this, R.layout.activity_exercisesetlist,
                ExercisesetsActivity.this.myExerciseSetList.setNames);
        // TODO Auto-generated constructor stub
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        // TODO Auto-generated method stub
        LayoutInflater inflater = getLayoutInflater();

        View row = inflater.inflate(R.layout.activity_exercisesetlist, parent,
                false);
        TextView label = (TextView) row.findViewById(R.id.tvItems);

        String strContent = ExercisesetsActivity.this.myExerciseSetList.setNames
                .get(position);
        label.setText(strContent);
        label.setTag(position);
        label.setOnClickListener(exerciseClickListner);

        return row;
    }

}

private android.view.View.OnClickListener exerciseClickListner = new android.view.View.OnClickListener() {

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
        int pos = (Integer) v.getTag();

        Intent intent = new Intent(ExercisesetsActivity.this.getApplicationContext(),
                MainActivity.class);
        intent.putExtra(ExercisesetsActivity.this.getResources().getString(R.string.EXERCISESETID),
                ExercisesetsActivity.this.myExerciseSetList.setIDs.get(pos));
        startActivity(intent);
    }
};

// This is temporary
public void copyDBifnotexists() {
    String DATABASE_PATH = Environment.getExternalStorageDirectory()
            .getPath() + "/myapp/data/";
    String DATABSE_NAME = "db.db";

    File folders = new File(DATABASE_PATH);
    File file = new File(folders, DATABSE_NAME);
    if (!file.exists()) {
        folders.mkdirs();

        try {
            InputStream inputStream = this.getResources().openRawResource(
                    R.raw.db);
            FileOutputStream fileOutputStream = new FileOutputStream(file);

            byte buf[] = new byte[1024];
            int len;
            while ((len = inputStream.read(buf)) > 0) {
                fileOutputStream.write(buf, 0, len);
            }

            fileOutputStream.close();
            inputStream.close();
        } catch (IOException e1) {
            e1.printStackTrace();
        }
    }
}

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    // TODO Auto-generated method stub
    setContentView(R.layout.activity_exercisesetlist);

    // This is temporary
    copyDBifnotexists();

    ListView lv = (ListView) findViewById(R.id.lvExerciselist);
    lv.setAdapter(new currentListAdapter());
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T05:02:00.800

```
private Exercisesetlist myExerciseSetList = new Exercisesetlist(this.getApplicationContext()); 
```

我不确定，但这可能是因为如果不调用 OnCreate() 方法，您将无法获得该活动的上下文。所以尝试在 OnCreate() 方法中初始化它，如下所示，看看会发生什么。

```
private Exercisesetlist myExerciseSetList;
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    // TODO Auto-generated method stub
    setContentView(R.layout.activity_exercisesetlist);

    myExerciseSetList = new Exercisesetlist(this.getApplicationContext());

} 
```

希望它会帮助你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T05:04:28.717

`Exercisesetlist myExerciseSetList`在您的活动方法中初始化您的实例，`onCreate()`如下所示：

> ```
>  public void onCreate(Bundle savedInstanceState) {
>           super.onCreate(savedInstanceState);
>          // TODO Auto-generated method stub
>          setContentView(R.layout.activity_exercisesetlist);
>          myExerciseSetList = new Exercisesetlist(this.getApplicationContext());
>       } 
> ```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T05:04:41.540

我会尝试回答这个问题。我假设，`Exercisesetlist`是一个辅助类（setter / getter）。

改变这个：

```
private Exercisesetlist myExerciseSetList = new Exercisesetlist(this.getApplicationContext()); 
```

对此：

```
public class ExercisesetsActivity extends Activity {
    private Exercisesetlist myExerciseSetList;
    ....
    ....
} 
```

和：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    // TODO Auto-generated method stub
    setContentView(R.layout.activity_exercisesetlist);

    // This is temporary
    copyDBifnotexists();

    // INSTANTIATE THE Exercisesetlist INSTANCE
    myExerciseSetList = new Exercisesetlist(ExercisesetsActivity.this);

    ListView lv = (ListView) findViewById(R.id.lvExerciselist);
    lv.setAdapter(new currentListAdapter());
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T06:31:06.197

在您的清单文件中，在活动标记中，您将 android:name 指定为

```
 android:name="com.myapp.activities.exercisesetsactivity.ExercisesetsActivity" 
```

删除 com.myapp 并指定为

```
 android:name=".activities.exercisesetsactivity.ExercisesetsActivity" 
```

那么您将不会收到错误消息。

# java - 使用 jdbcTemplate 进行分页

> ID：14472525
> 
> 赞同：5
> 
> 时间：2013-01-23T04:34:17.830
> 
> 标签：java, sql, spring, jdbc

我们现在面临的问题之一是处理我们从数据库中获得的大 ResultSet 的分页。

目前，作为 SQL 存储过程返回的行调用`jdbcTemplate.query`范围从 100K 到 300K，并且分页在`extractData`方法内完成。

**显示在用户中的页面只有 20 行。**

这很慢，有没有办法使用`jdbcTemplate`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T05:39:17.423

你可以看看[这个](https://gist.github.com/criminy/1206700)

一个很好的例子。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T04:55:19.383

我相信 JdbcTemplate 没有特定的分页功能。但是，即使这样做也可能无法帮助您的代码运行得更快。

通常，面向用户的页面的大小不超过 200 行，因此查询 100-300K 行似乎过多并浪费大量内存。

您需要首先决定使用哪种分页策略。两种常见的策略是查询前 N 个页面，并将其存储在临时缓存中 - 或者仅查询足以填充一个页面大小（例如：200 行），并且仅在用户请求时才查询接下来的 200 行。

您还需要确定缓慢的真正原因是什么。行大小是一个因素，但不是唯一因素。您必须分析您的架构结构、索引、查询连接等。

请记住，在正常用例下——尽管您最多可以向用户展示 10000 个页面，但典型用户不太可能浏览所有这些页面——也许只有前 5-10 个页面很重要——因此，如果你可以，将结果集限制在一个小数字会更有意义

# javascript - 会有 HTML5 剪贴板 API 吗？

> ID：14472526
> 
> 赞同：23
> 
> 时间：2013-01-23T04:34:20.450
> 
> 标签：javascript, html, api, clipboard

我对我们在剪贴板访问方面落后于其他标准 Web API 的程度感到沮丧。

我正在开发一个 web 应用程序，可让您在浏览器中绘制和编辑 SVG 图形。File API 让我可以完全在客户端加载和读取 SVG 文件，而 SVG API 显然可以让我显示 SVG 图形。

但是不可能像在 Illustrator 中复制某些东西一样，将我从浏览器中绘制的任何内容粘贴到 Photoshop 中。

W3C 以安全为由否认操纵复制事件的能力：

> 允许作者更改用户复制的内容，或自动复制从未选择过的内容，并允许无限制地调用粘贴信息，这可能会引发各种安全和隐私问题。
> 
> 一个问题的示例场景是用户选择一个链接并复制它，但另一个链接被复制到剪贴板。其影响范围从粘贴时的意外结果到尝试的“网络钓鱼”攻击。

*资料来源：[http ://www.w3.org/TR/clipboard-apis/#other-security-and-privacy-considerations](http://www.w3.org/TR/clipboard-apis/#other-security-and-privacy-considerations)*

然而，最新的浏览器通过简单的权限对话框支持地理定位，这与安全/隐私考虑同样重要。

![地理位置权限对话框](../Images/38fb98d7c471147aaa0ac4c6fa983ba8.png)

为什么我们不能将相同的东西复制到剪贴板？它甚至可以限制为需要 CTRL+C 事件，以避免滥用。

> “so-and-so.com 想要控制您正在复制的数据。[允许] [拒绝]”

用户可以为他们信任的 web 应用程序允许一次，并永远从中获得更多。开发人员可以用网络做更多令人兴奋的事情。

最近采用的[粘贴捕获](https://stackoverflow.com/questions/6219197/how-to-manage-image-pasting-from-clipboard-in-html5)给了我一些希望。例如，我非常喜欢在[imgur](http://imgur.com)上可以做的事情。（尝试在您的操作系统中复制图像并将其粘贴到 imgur 的主页上）。

我描述的东西有可能被复制吗？它是否正在处理中？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-23T04:46:23.547

优秀的职位。+1 我想看看这个应用程序。但我认为你已经用所有文档回答了你自己的问题。

您应该向 WHATWG 提出请愿，因为您所说的似乎是一个很好的解决方案，而且他们（WHATWG）似乎并不希望创建此标准，因为担心剪贴板转储以捕获（可能）敏感的用户数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-08T19:58:51.307

这只是对 html5 的支持，以允许根据用户的请求使用字符串数据或其他数据设置剪贴板。我不是为了截屏到剪贴板

# jquery - 使用 JQuery 检测什么浏览器

> ID：14472529
> 
> 赞同：-1
> 
> 时间：2013-01-23T04:34:45.900
> 
> 标签：jquery, jquery-plugins, jquery-selectors

如何检测用户在 JQuery 1.9 中使用的浏览器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T04:46:32.257

该`jQuery.browser()`方法自 jQuery 1.3 以来已被弃用，并在 1.9 中被删除。如果需要，它可以作为 jQuery Migrate 插件的一部分使用。

有关更多信息，请参阅：[jQuery 1.9 中的注释更改](http://jquery.com/upgrade-guide/1.9/#jquery-browser-removed)

推荐使用： http: [//modernizr.com/](http://modernizr.com/)

# sql - 用随机数据填充表

> ID：14472534
> 
> 赞同：3
> 
> 时间：2013-01-23T04:34:49.993
> 
> 标签：sql, sql-server-2008

我有两个表如下。

“区域”表

```
|    AreaKey      |    AreaID    |
|-----------------|--------------|
| <identity/int>  |  <varchar>   | 
```

“读数”表

```
|    ReadingKey   |      AreaKey      |   Reading   |    ReadingDateTime   |
|-----------------|-------------------|-------------|----------------------|
| <identity/int>  |<FK:AreaKey-Areas> |   <float>   |      <datetime>      | 
```

*   Readings 表中的“AreaKey”是 Areas 表中“AreaKey”的外键。

区域表已经有一些行 id 范围从 1 到 50 的数据。

我想用一些示例数据填充读数表 - （“读数”列的随机浮点值介于 1.0 和 100.0 之间，以及给定日期时间范围之间的 ReadingDateTime 的随机日期时间值；例如在当前日期时间和 3 个月前的日期时间之间） . 这些值应该通过**随机**选择已经存在于 Areas 表中的 AreaKeys 插入到 Reading 表中。

换句话说，我想将随机读数值插入随机选择的区域，并具有随机的日期时间。

谁能给我一个关于如何做到这一点的线索？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T04:42:56.043

你看过[RedGate 的 SQL 数据生成器](http://www.red-gate.com/products/sql-development/sql-data-generator/)吗？RedGate 工具对我们公司来说是一大福音。

除了工具建议，只需编写一个快速应用程序：

1.  为您的 Area 表生成一个键列表
2.  将一些随机记录插入到您的区域表中
3.  将一些随机记录插入到您的读数表中，从您在步骤 #1 中创建的键列表中选择随机元素

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T05:00:07.930

假设您的 Areas 表有 50 条记录，行 id 为 1-50，我会考虑使用该`RAND`函数。

像这样的东西似乎有效：

```
SELECT ROUND(((50 - 1 -1) * RAND() + 1), 0) as AreakKey,
    ROUND(((100 - 1 -1) * RAND() + 1), 1) as Reading,
    DATEADD(mm,-3,GETDATE()) +
(
ABS(
    CAST(
        CAST( NewID() AS BINARY(8) ) AS INT
    )
)
%
CAST(
    (GETDATE() - DATEADD(mm,-3,GETDATE())) AS INT
    )
) as ReadingDateTime 
```

这是一些[SQL Fiddle](http://sqlfiddle.com/#!3/d41d8/7855)。

祝你好运。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T04:41:49.973

您可以使用 NEWID() 并将结果选择到临时表中。请检查[http://msdn.microsoft.com/en-us/library/ms190348.aspx](http://msdn.microsoft.com/en-us/library/ms190348.aspx)

```
Select column into #temp from table
order by NEWID() 
```

# asp.net-mvc - MVC3 会话开始事件触发两次

> ID：14472540
> 
> 赞同：2
> 
> 时间：2013-01-23T04:35:22.457
> 
> 标签：asp.net-mvc, global-asax

我认为 global.asax 中的 session_start 事件应该只在我第一次访问网站上的页面时触发。但是我注意到在 asp.net mvc3 中，当我转到它每次运行的不同路径时。

前任。

```
http://webserver/home/index - runs once here (link 1) 
http://webserver/contact/index - runs once here (link 2) 
```

我是否需要配置一些东西以便 session_start 只运行一次？我通过将会话变量设置为当前日期时间来测试这一点，并在布局页面上显示会话变量。当我从上方单击链接 1 时，它显示一个时间，当我从上方单击链接 2 时，它显示一个时间。两次都不一样。有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T04:45:09.903

如果`Session_Start`或`Session_End`中未定义处理程序`Global.asax`，则当 Session 包中没有存储任何内容时，将为每个请求生成一个新的 Session ID。这就是您的情况

类似，[ASP.Net Session_Start 总是触发](https://stackoverflow.com/questions/4885276/asp-net-session-start-always-firing)

# php - RESTful API URL 结构

> ID：14472553
> 
> 赞同：1
> 
> 时间：2013-01-23T04:36:59.803
> 
> 标签：php, api, url, rest, laravel

我被困在如何为我正在开发的 RESTful API 构建我的 URL。我的问题来自这样一个事实，即有时我需要从一次调用中获取多个连接表。

在一种情况下，我需要获得两张桌子。我有一个名为 的表`courses`和一个名为 的表`topics`。我需要获得该`course_name`行，然后是属于该课程的所有主题。

在另一个例子中，我需要获得三个表。我需要加入`topics`到表`parts`中`bullet_points`

我应该如何在网址中引用这些？

应该是这样的吗？要获得一门课程：

```
courses/:course_id/ 
```

要获得课程及其主题：

```
courses/:course_id/topics 
```

要获得一个主题及其部分和要点：

```
courses/:course_id/topics/:topic_id/parts 
```

我是新手，所以想知道我应该如何真正接近网址的结构。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T05:18:04.980

我认为您建议的 URL 结构很好。它也很好地对应于良好的资源布局。

```
// courses
$list = $model->getCourseList();

// courses/c_id
$course = $model->getCourse($c_id);

    // courses/c_id/topics
    $courseTopicList = $course->getTopicList();

    // courses/c_id/topics/t_id
    $courseTopic = $course->getTopic($t_id);

        // courses/c_id/topics/t_id/parts
        $courseTopicParts = $topic->getParts(); 
```

# php - wkhtmltopdf 图像作为 ObjectType

> ID：14472568
> 
> 赞同：0
> 
> 时间：2013-01-23T04:38:05.480
> 
> 标签：php, image, pdf, http-headers, wkhtmltopdf

我搜索但找不到类似的帖子，所以如果我错过了，我深表歉意。

我在我的 PHP 脚本的命令行中使用 WKHTMLTOPDF，它工作得非常好，但是有一个小问题。

我的项目背景：将假医疗表格生成为 html 页面，并将 html 页面转换为 pdf。html 是一个基于简单医疗表格的简单表格（就像您在医生办公室填写的表格一样）。html页面是表格中的所有文本，没有图像。

我的 html 页面成功输出到 pdf 文件，但是当我检查标题信息时：

```
 obj
    /Type /Catalog
    /Pages 2 0 R
    /Outlines 9 0 R
    /PageMode /UseOutlines
    /Dests <<
    /__WKANCHOR_2 8 0 R

endobj
5 0 obj
<<
/Type /Page
/Parent 2 0 R
/Contents 12 0 R
/Resources 14 0 R
/Annots 15 0 R
/MediaBox [0 0 595 842]
>>
endobj 
```

我真正需要的是将我的 HTML 作为图像存储在 PDF 中，以便标题返回为：

```
/Type /XObject
/Subtype /Image
/Name /Im0
/Filter [ /DCTDecode ]
/Width 1275
/Height 467
/ColorSpace 10 0 R
/BitsPerComponent 8
/Length 9 0 R 
```

尽管我的 HTML 都是文本，但是否可以使用 WKHTMLTOPDF（或任何其他库）将我的 HTML 页面存储为 PDF 中的图像？PDF 需要专门以这种方式工作，因为我们的软件会从 PDF 中提取图像以显示为缩略图。

在这一点上，我已经编写了一个小代码片段来将我的 HTML 转换为 JPEG，然后再转换为 PDF，但是该过程有一个完全独立的问题。

任何帮助是极大的赞赏。我完全被困在这一点上，我祈求希望能解决这个问题。我已经阅读了 WKHTMLTOPDF 文档，但没有遇到任何可行的信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T21:56:03.077

利用兄弟 WKHTMLTOIMAGE 和 ImageMagick，我将我的脚本编辑为：

```
wkhtmltoimage file.html file.jpeg
convert file.jpeg file.pdf 
```

现在有一个图像存储在 pdf 中，可以由另一个开发人员程序提取出来。

# android - 如何在android中使用默认日历？

> ID：14472570
> 
> 赞同：3
> 
> 时间：2013-01-23T04:38:25.633
> 
> 标签：android

我正在制作基于日历的应用程序，我正在尝试将我的应用程序转到默认日历并在互联网上搜索，但我不能这样做，所以可以使用 Intent Advance 打开默认日历，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T04:42:33.973

试试这个

```
PackageManager packmngr = this.getPackageManager(); 
Intent intent = new Intent(Intent.ACTION_MAIN);
intent.addCategory(Intent.CATEGORY_LAUNCHER); 
List<ResolveInfo> list = packmngr.queryIntentActivities(intent, PackageManager.PERMISSION_GRANTED);
ResolveInfo Resolvebest = null;
for (final ResolveInfo info : list){
if (info.activityInfo.packageName.endsWith(".calendar"))
        Resolvebest = info;
}
if (Resolvebest != null){
 intent.setClassName(Resolvebest.activityInfo.packageName,
 Resolvebest.activityInfo.name);
 startActivity(intent);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T04:40:52.207

```
Intent intent = new Intent(Intent.ACTION_EDIT);  
intent.setType("vnd.android.cursor.item/event");
intent.putExtra("title", "Some title");
intent.putExtra("description", "Some description");
intent.putExtra("beginTime", eventStartInMillis);
intent.putExtra("endTime", eventEndInMillis);
startActivity(intent); 
```

该文档可在[此处找到](http://developer.android.com/guide/topics/providers/calendar-provider.html#intents)

# python - 解决 scikit-learn OneVsRest RandomForests 的缓慢解酸问题

> ID：14472574
> 
> 赞同：3
> 
> 时间：2013-01-23T04:39:09.480
> 
> 标签：python, serialization, scikit-learn

我有一个应用程序，我正在加载非常大的 python 对象——它们是序列化的 scikit-learn 分类器及其相关的词汇表。

分类器足够大（大约 1-100 MB），将它们加载到内存中是一项非常重要的任务。实际读取速度很快，但 unpickling 需要很长时间，对于 4MB 分类器来说大约需要 10 秒。

有没有比 cPickle.dumps/cPickle.loads 更快的方法来序列化/反序列化对象？

附加信息：

分类器是 10 个元素的一对一随机森林的实例。分类器在大约 1000 个样本、大约 500 个特征和 52 个可能的标签上进行了训练。该`min_density`参数设置为 0。

* * *

cPickle.load 的 cProfile 输出：

```
 Ordered by: standard name

   ncalls  tottime  percall  cumtime  percall filename:lineno(function)
        1    0.000    0.000  300.168  300.168 <ipython-input-4-9b8a128f290d>:1(loader)
        1    0.899    0.899  301.067  301.067 <string>:1(<module>)
    51380  288.151    0.006  288.151    0.006 __init__.py:93(__RandomState_ctor)
    51380    0.059    0.000    0.404    0.000 fromnumeric.py:1774(amax)
        1   11.613   11.613  300.168  300.168 {cPickle.load}
        1    0.000    0.000    0.000    0.000 {method 'disable' of '_lsprof.Profiler' objects}
    51380    0.344    0.000    0.344    0.000 {method 'max' of 'numpy.ndarray' objects}
        1    0.000    0.000    0.000    0.000 {open} 
```

我正在 github.com/scikit-learn 上打开一个关于此的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T09:21:54.153

您是否尝试过使用 joblib 选择器？它捆绑在 sklearn 包中：

```
>>> from sklearn.externals import joblib
>>> joblib.dump(model, '/path/to/model.pkl')
>>> model_copy = joblib.load('/path/to/model.pkl') 
```

**编辑**：实际上对于随机森林，使用 HIGHEST 协议的默认酸洗似乎更快：

```
>>> from cPickle import dump, load, HIGHEST_PROTOCOL
>>> dump(model, open('/tmp/model_highest.pkl', 'wb'), HIGHEST_PROTOCOL)
>>> load(open('/tmp/model_highest.pkl', 'rb')) 
```

**Edit2**：根据您的个人资料报告，问题似乎是伪随机数生成器实例的解压。您能否提供您用于训练模型的确切 python 片段以及数据集的形状，并将其与分析报告一起作为 scikit-learn 项目的 github 问题跟踪器上的错误包含在内？

# javascript - HTML: JavaScript: 阻止表单提交和调用 Javascript 函数

> ID：14472583
> 
> 赞同：29
> 
> 时间：2013-01-23T04:40:32.037
> 
> 标签：javascript, jquery, html, forms

我想在按下表单中的提交按钮时进行 AJAX 调用。事实上，我无法删除，`<form>`因为我也想进行客户端验证。我试过这段代码。

```
<form name="search" >
Name: <input type="text" name="name1"/>
Age: <input type="text" name="age1"/>
<input type="submit" name="Submit" value="Submit" onclick="makeSearch()"/>
</form> 
```

JS

```
function makeSearch(){
alert("Code to make AJAX Call");
} 
```

使用此代码后 alert() 未显示但页面已重新加载。我想阻止页面重新加载并调用 JS 函数。

谢谢

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-01-23T05:16:46.673

将`onsubmit`属性添加到`form`标签：

```
<form name="search" onsubmit="return makeSearch()" >
  Name: <input type="text" name="name1"/>
  Age: <input type="text" name="age1"/>
  <input type="submit" name="Submit" value="Submit"/>
</form> 
```

最后添加javascript `return false`：

```
function makeSearch() {
  alert("Code to make AJAX Call");
  return false;
} 
```

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2013-01-23T04:43:05.520

正确的 jQuery 方法是：

```
$("form").on('submit', function (e) {
   //ajax call here

   //stop form submission
   e.preventDefault();
}); 
```

就像你说的，你也可以删除`<form>`元素并将ajax调用绑定到按钮的`click`事件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T05:12:19.760

使用[jQuery.post](http://api.jquery.com/jQuery.post/)，并更改提交按钮。

[提交按钮是为通过POST (native method, not ajax)](http://en.wikipedia.org/wiki/POST_(HTTP))向服务器发送数据而创建的，我建议仅在特殊情况下使用它，例如上传文件时。

如果您继续使用提交按钮进行 ajax 请求，您将在 IE 中遇到很多问题。

```
 <html>
    <head>
        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
        <script language="javascript">
            function makeSearch()
            {
                if(validateIdata())
                {
                    alert("send ajax request");
                    return;
                    $.ajax({    
                      type: 'POST',
                      url: url, //- action form
                      data: {name1:$('#name1').val(),age1:$('#age1').val()},
                      success: function(){
                        alert('success');
                      }
                    });
                }
            }

            function validateIdata()
            {
                if($('#name1').val() =='')
                {
                    alert("Invalid Name");
                    return false;
                }

                if($('#age1').val() =='')
                {
                    alert("Invalid Age");
                    return false;
                }

                return true;
            }
        </script>
    </head>
    <body>
        <form name="search" >
        Name: <input type="text" id="name1" name="name1"/>
        Age: <input type="text" id="age1" name="age1"/>
        <input type="button" name="Submit" value="Submit" onclick="makeSearch()"/>
    </form>
    </body>
    </html> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-23T05:38:00.767

```
<form name="search" >
Name: <input type="text" name="name1"/>
Age: <input type="text" name="age1"/>
<input type="submit" name="Submit" value="Submit" onclick="return makeSearch();"/>
</form>

function makeSearch(){
alert("Code to make AJAX Call");
} 
```

只需在 onclick 函数中使用 return 它会对你有好处

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-12-10T12:25:43.440

```
document.getElementById("bt1").type='submit';
                    document.getElementById("bt1").onclick="";
                    var elem = document.getElementById("bt1");
                    if (typeof elem.onclick == "function") {
                        elem.onclick.apply(elem);
                    }

<form id="org" action="">
                        <fieldset class="log">
                            <legend>Log in</legend>
                            <label for="uname">Username</label>
                            <input type="text" name="uname" id="uname" value="" required/><br />
                            <label for="pword">Password</label>
                            <input type="password" name="pword" id="pword" value="" required/><br />
                            <input type="button" onclick="organizer()" value="LOG IN" class="red-btn" id="bt1"/>
                        </fieldset>
                    </form> 
```

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2013-01-23T04:46:35.653

终于我得到了答案

```
$("form").live("submit", function() {
        makeSearch();
        return false;
    }); 
```

# java - 设置具有数组作为实例变量的 DTO 对象

> ID：14472586
> 
> 赞同：3
> 
> 时间：2013-01-23T04:41:02.667
> 
> 标签：java, jpa, ejb

是否有任何方法可以一次设置具有 Array 作为实例变量的 DTO 对象？这是 DTO

```
public class AbcDTO {

String label;
Float[] time;
String[] startTime;
//getters and setters 
 } 
```

这是我试图设置这个 DTO 的 bean 类

```
q = em.createNamedQuery("namedQuery");
        q.setParameter(1, anaId);
        List<Object> objects = new ArrayList();
        objects = q.getResultList(); 
```

现在对象列表，对象，将包含一个列表，其中列表的每个元素都有两个字段，时间和开始时间，来自数据库。如何使用给定的列表设置 DTO 对象。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T08:49:33.330

使用当前的 DTO，您将不得不遍历结果列表，收集`time`和`startTime`值并将它们分配给您的 DTO。JPA 没有为此提供直接的方法。

您可以做的是将您的 DTO 更改为具有`time`单个`startTime`字段。然后，您可以使用构造函数表达式将结果列表映射到 DTO 列表：

```
List<AbcDTO2> dtos = em.createQuery("SELECT new com.example.AbcDTO2( o.time, o.startTime) FROM Entity o").getResultList(); 
```

# iphone - 在 iTunes 连接中我的应用程序状态为“准备销售”后，必须更新我的代码。

> ID：14472593
> 
> 赞同：1
> 
> 时间：2013-01-23T04:41:39.890
> 
> 标签：iphone, app-store-connect

我们使用 phone gap 框架在 IOS 平台上开发了一个应用程序，并通过 iTunes Connect 获得了苹果的批准，现在状态为“准备销售”。现在我想更新，即根据要求修改我的代码。修改后，要遵循的流程是指是否需要重新提交应用程序或任何其他步骤来修改应用程序中的代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T04:48:22.320

您必须重新提交。不过，有一个选择，无论您是想在更新版本获得批准后立即发布还是您自己发布（即，当它获得批准后，您可以根据自己的意愿将其出售）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T04:49:07.200

您必须将新版本的签名版本上传到商店。您的固定版本必须像您之前的当前版本一样通过 Apple 审核流程。

同时，您唯一的选择是向您的用户提供当前的“准备销售”版本，或者等到改进的版本获得批准。当您发布该版本时，用户可以通过商店更新到新版本。

请注意，除非您在应用程序本身中执行此操作，否则您无法强制用户更新到较新版本。

# python - .pop() 似乎在 Python 中触发了 TypeError，即使结果应该是一个列表

> ID：14472595
> 
> 赞同：3
> 
> 时间：2013-01-23T04:41:46.950
> 
> 标签：python, graph, typeerror

所以下面的 Python 代码得到了错误： TypeError: 'NoneType' object has no attribute ' **getitem** '

我无法弄清楚为什么列表“路径[1](https://stackoverflow.com/questions/9320766/python-math-typeerror-nonetype-object-is-not-subscriptable) ”没有被识别为列表，而是被识别为 NoneType。

我检查了以前的堆栈问题，谷歌搜索，所有这些，但我无法弄清楚为什么会这样。[这](https://stackoverflow.com/questions/9320766/python-math-typeerror-nonetype-object-is-not-subscriptable)很接近（我认为），但我不知道为什么我的 state = path[-1] 调用会出现此错误。

有什么想法吗？非常感激。

谢谢

代码：

```
import re
import string

gr = {
    "A":["B","C","D"],
    "B":["A","E"],
    "C":["A","E"],
    "D":["A","H","I","J"],
    "E":["B","C","F","G","H"],
    "F":["E"],
    "G":["E","H"],
    "H":["D","E","G","K"],
    "I":["D","K","L"],
    "J":["D","M"],
    "K":["I","M","H"],
    "L":["I"],
    "M":["K","J"]
    }

def graphSearch(graph, start, dest):
    frontier = [[start]]
    explored = []
    options = []
    if frontier == []: return "I hope you enjoyed riding aboard the failboat"
    while len(frontier)>0:
        path = frontier.pop()
        state = path[-1]
        if state == dest: 
            return path
        else:
            for a in graph[state]:
                if a not in path:
                    newP = path.append(a)
                    frontier.append(newP)
    return options

print graphSearch(gr, "A", "M") 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T04:52:25.230

```
newP = path.append(a)
frontier.append(newP) 
```

append 不会返回任何内容（它会修改原始列表），因此您最终会将一堆附加`None`到您的列表中。

`.pop()`工作正常; 这`state = path[1]`是失败的，因为`pop()`弹出了`None`您在上一次迭代中附加的项目之一。

# css - 使用引导程序时如何使图标变小？

> ID：14472599
> 
> 赞同：17
> 
> 时间：2013-01-23T04:42:20.980
> 
> 标签：css

如果我想最小化图标大小，使用引导程序时如何使图标变小？

这是演示[http://jsfiddle.net/AqUBu/](http://jsfiddle.net/AqUBu/)

我想最小化这个人类图标的大小。

![在此处输入图像描述](../Images/769b097f5df10815f2ffd084f23c17c9.png)

```
<span class='badge badge-success'><i class='icon-user icon-white'></i><i class='icon-user icon-white'></i><i class='icon-user icon-white'></i></span> 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2014-02-12T13:57:47.717

如果您使用的是 Bootstrap 3，则可以使用该`<small>`标签，如下所示：`<small><span class="glyphicon glyphicon-send"></span></small>` 它与 Bootstrap 3 完美配合。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2016-05-09T04:51:49.343

字形图标和其他图标可以使用 CSS 属性***精确调整大小***`font-size:`

你知道...是字形和所有。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2016-04-19T13:18:07.747

您可以使用`class="btn btn-xs"`

参考：[https ://getbootstrap.com/components/](https://getbootstrap.com/components/)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-09-02T13:50:54.207

来自[http://getbootstrap.com/css/#small-text](http://getbootstrap.com/css/#small-text)

> **小文本**
> 
> 为了不强调内联或文本块，使用 `<small>`标签将文本设置为父级大小的 85%。标题元素接收自己`font-size`的嵌套`<small>`元素。
> 
> 您也可以使用内联元素`.small`代替 any `<small>`。

尝试：

```
<span class='badge badge-success small'>
  <i class='icon-user icon-white'></i>
  <i class='icon-user icon-white'></i>
  <i class='icon-user icon-white'></i>
</span> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-04-30T05:19:38.947

以上都不适合我，我使用的是 Bootstrap 4 和 FontAwesome 图标的组合。我发现 Bootstrap 4 有自己的类来制作更小的按钮：

```
<button class="btn btn-sm btn-secondary ">
    <i class="fa fa-pencil"></i>
</button> 
```

[Bootstrap 4 按钮文档 (#Sizes)](https://getbootstrap.com/docs/4.0/components/buttons/#sizes)

如果您想制作比这更小的按钮，您可能必须制作一些自定义 css，因为简单地更改图标的大小将不再修改环绕按钮的大小。

# dojo - dojo中发生错误时如何更改工具提示显示的默认消息

> ID：14472603
> 
> 赞同：0
> 
> 时间：2013-01-23T04:42:39.747
> 
> 标签：dojo

每当我提交表单时，默认情况下没有在文本字段中输入任何内容，我都会收到一条消息“**请填写此字段**”。

我如何将消息更改为名字是必需的

```
< html >

< head >< /head >

< body >

< form action="a.html" >

< label for="firstName">First Name: < /label > 

< input type="text" id="firstName" name="firstName" 

      dojoType="dijit.form.ValidationTextBox"

      required="true" 

      propercase="true" 

      promptMessage="Enter first name." 

      invalidMessage="First name is required." 

      trim="true" 

/>< br>

< input type="submit" value="submit"/>

< /form>

< /body >

< /html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T04:47:43.297

听起来您也想设置“missingMessage”：

*   [http://livedocs.dojotoolkit.org/dijit/form/ValidationTextBox](http://livedocs.dojotoolkit.org/dijit/form/ValidationTextBox)

# c# - Visual Studio 2012 无法使用 Web 表单模板

> ID：14472610
> 
> 赞同：1
> 
> 时间：2013-01-23T04:43:48.063
> 
> 标签：c#, asp.net, visual-studio-2010, templates, web

![在此处输入图像描述](../Images/9ad8e37f1d7c14ada44061e166a0cf7d.png)你好。我首先下载了 Visual Studio Express 2012。我在创建 Web 表单时遇到了问题。没有可用的网络表单选项，如左图。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T04:52:43.040

在 Visual Studio 命令提示符中，您需要运行以下命令：

devenv /installvstemplates

# android - 安卓手机的活动碎片

> ID：14472616
> 
> 赞同：0
> 
> 时间：2013-01-23T04:44:47.007
> 
> 标签：android, android-fragments, android-activity

`advantages/disadvantages`在为手机和平板电脑设计时，在应用程序中使用片段而不是活动是什么？

我们是否应该有针对手机的活动和针对平板电脑的片段。除了制作碎片之外，手机碎片还有什么优势`code reusable`吗？

android开发网站[http://developer.android.com/guide/components/fragments.html](http://developer.android.com/guide/components/fragments.html)在手机上说，碎片被分成了`different activities.`，那么使用碎片有什么意义呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T04:50:44.340

> # 1 & 2 使用片段的目的是什么？与使用活动/视图/布局相比，使用片段的优点和缺点是什么？

片段是 Android 创建可重用用户界面的解决方案。您可以使用活动和布局（例如使用包含）来实现一些相同的目的。但是，片段从 HoneyComb 和更高版本连接到 Android API。让我详细说明；

*   操作栏。如果您希望在那里的选项卡导航您的应用程序，您很快就会看到 ActionBar.TabListener 推断为您提供了 FragmentTransaction 作为 onTabSelected 方法的输入参数。您可能会忽略这一点，并做一些其他聪明的事情，但是您将针对 API 工作，而不是使用它。

*   FragmentManager 以一种非常聪明的方式为您处理“返回”。Back 并不意味着回到上一个活动，就像常规活动一样。这意味着回到之前的片段状态。

*   您可以使用酷炫的 ViewPager 和 FragentPagerAdapter 来创建滑动界面。FragmentPagerAdapter 代码比常规适配器更简洁，它控制各个片段的实例化。

*   如果您在尝试为手机和平板电脑创建应用程序时使用 Fragments，您的生活会轻松很多。由于这些片段与 Honeycomb+ APIS 紧密相关，因此您也希望在手机上使用它们以重用代码。这就是兼容性库派上用场的地方。

*   您甚至可以并且应该将片段用于仅适用于手机的应用程序。如果您考虑到便携性。我使用 ActionBarSherlock 和兼容性库来创建“看起来像 ICS”的应用程序，这些应用程序在 1.6 版中看起来都一样。您将获得最新的功能，如操作栏、选项卡、溢出、拆分操作栏、viewpager 等。

> # 2

在 Fragment 之间进行通信的最佳方式是 Intent。当您按下 Fragemnt 中的某个东西时，您通常会调用 StartActivity() 并在其上包含数据。意图将传递给您启动的活动的所有片段。

有关 Fragments 的更详细了解，请查看[链接](http://andytsui.wordpress.com/2011/10/23/to-fragment-or-not-to-fragment/)

# gcc - GCC 在预处理时使用不同名称的标头

> ID：14472624
> 
> 赞同：0
> 
> 时间：2013-01-23T04:45:56.957
> 
> 标签：gcc, c-preprocessor

是否可以在进行预处理时请求 gcc（或 cpp？）将代码中的头文件导入链接到不同的头文件？例如，如果我有一个使用大量 的大型代码库`#import <GL/gl.h>`，而在我正在编译的 OpenGL 标头驻留在系统上`#import <OpenGL/gl.h>`，我可以请求预处理器将 GL 中的所有导入请求链接到 OpenGL 吗？ **编辑**：重点不是编辑源代码。就像假设您可以访问的唯一文件是 Makefile。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T08:10:57.370

是的，您可以预处理包含或导入名称。技术被称为“计算包含”并记录[在这里](http://gcc.gnu.org/onlinedocs/cpp/Computed-Includes.html)

```
 #define GL_H "GL/gl.h"
 ...
 #include GL_H 
```

在这种情况下的行为`#import`必须与 相同`#include`。

# windows-8 - 在 Windows 8 上安装 Clips

> ID：14472626
> 
> 赞同：1
> 
> 时间：2013-01-23T04:46:02.870
> 
> 标签：windows-8, clisp

有没有人设法在 Windows 8 上安装 CLisp。我无法让它工作。我从SF下载了exe。但是，在我允许应用程序以管理员身份运行后，我什么也看*不到*。我确实注意到我无法删除该文件。所以，我怀疑有一个我没有看到的提示。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T04:59:23.237

尤里卡！

我想我找到了。我能够安装它。我怀疑安装窗口被发送到另一个会话。我的女儿在我做这个（几天）的时候签了名。缓慢重启后（感谢 Microsoft 更新），它按预期工作。我会将其归类为 ID-10-T 错误，但我认为无论其他用户是否登录，我都能看到该对话框是合理的。再次感谢所有评论者。

# c++ - 警告运算符重载上的局部变量，按照教程，不知道该怎么做

> ID：14472631
> 
> 赞同：2
> 
> 时间：2013-01-23T04:46:24.317
> 
> 标签：c++, operator-overloading

我正在阅读有关运算符重载的文档：[http](http://courses.cms.caltech.edu/cs11/material/cpp/donnie/cpp-ops.html) ://courses.cms.caltech.edu/cs11/material/cpp/donnie/cpp-ops.html但是，当我运行下面的代码（在实际上下文中）时，我总是得到关于结果如何是局部变量的警告。我不应该返回局部变量是有道理的，但它似乎工作正常。有没有办法使用如下代码消除警告：

```
const Matrix & Matrix::operator+(const Matrix &other) const
{
  Matrix result(*this);
  result += other;
  return result;
} 
```

像这样的加州理工学院网站上的例子，在[链接的底部](http://courses.cms.caltech.edu/cs11/material/cpp/donnie/cpp-ops.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T04:47:49.393

要删除警告，您需要返回`Matrix`按值。

*理想情况下*，您还应该将其定义为自由函数，因为从语义上讲，它不需要修改调用它的对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T05:00:32.277

`operator+()`不应返回引用类型，因为它是保存操作结果的新（本地声明的）实例。

```
Matrix operator+(Matrix lhs, const Matrix &rhs)
{
  return lhs += rhs;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T05:28:09.303

在您的代码中，您尝试返回对将在您的函数之外销毁的对象的**引用。**您必须返回**对象**（不是对对象的引用）。

# android - Textview 在第一次单击时为空，但在第二次单击时更新

> ID：14472635
> 
> 赞同：2
> 
> 时间：2013-01-23T04:46:34.457
> 
> 标签：android, android-fragments, android-activity, textview

它是使用兼容包的小型 Android 2.2 测试应用程序。我正在尝试在列表项选择的另一个活动上更新另一个片段上的文本视图。但问题是，每次第一次单击都会返回空指针异常，并且只有在第二次尝试时，它的文本才会发生变化。我想知道为什么会这样，什么是好的解决方案。

**列表活动：-**

```
public class ListActivity extends FragmentActivity implements
    ListFragment.OnItemSelectedListener {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_list);
    }

    @Override
    public void onItemSelected(int index) {
        // TODO Auto-generated method stub

        // Check to see if there is a frame in which to embed the
        // detail fragment directly in the containing UI.
        View detailsFrame = findViewById(R.id.detailcontainer);
        if (detailsFrame != null
                && detailsFrame.getVisibility() == View.VISIBLE) {

            DetailFragment detailFragment = (DetailFragment)    getSupportFragmentManager()
                    .findFragmentById(R.id.detailcontainer);

            if (detailFragment == null) {

                detailFragment = new DetailFragment();
            }

            // Execute a transaction, replacing any existing fragment
            // with this one inside the frame.

            getSupportFragmentManager().beginTransaction()
                    .replace(R.id.detailcontainer, detailFragment).commit();

            detailFragment.setTextView(index);

        } else {

            // Otherwise we need to launch a new activity to display
            Intent intent = new Intent(this, DetailActivity.class);
            intent.putExtra("index", index);
            startActivity(intent);

        }
    }
} 
```

**列表片段：-**

```
public class ListFragment extends Fragment {

    private OnItemSelectedListener listener;

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {

        String[] countries = new String[] { "India", "Pakistan", "Sri Lanka",
                "China", "Bangladesh", "Nepal", "Afghanistan", "North Korea",
                "South Korea", "Japan" };

        View view = inflater.inflate(R.layout.list_fragment, container, false);

        ListView listView = (ListView) view.findViewById(R.id.listView);

        // Populate list
        ArrayAdapter<String> adapter = new ArrayAdapter<String>(
                this.getActivity(), android.R.layout.simple_list_item_1,
                countries);
        listView.setAdapter(adapter);

        // operation to do when an item is clicked
        listView.setOnItemClickListener(new AdapterView.OnItemClickListener() {
            @Override
            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {
                Toast.makeText(getActivity(), "ListItem Number " + position,
                        Toast.LENGTH_SHORT).show();

                listener.onItemSelected(position);
            }
        });

        return view;
    }

    // Container Activity must implement this interface
    public interface OnItemSelectedListener {
        public void onItemSelected(int index);
    }

    // To ensure that the host activity implements this interface
    @Override
    public void onAttach(Activity activity) {
        super.onAttach(activity);
        if (activity instanceof OnItemSelectedListener) {
            listener = (OnItemSelectedListener) activity;
        } else {
            throw new ClassCastException(activity.toString()
                    + " must implemenet ListFragment.OnItemSelectedListener");
        }
    }

    public void operation(int index) {

        listener.onItemSelected(index);
    }

} 
```

**详细活动：-**

```
public class DetailActivity extends FragmentActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        DetailFragment details;
        if (getResources().getConfiguration().orientation == Configuration.ORIENTATION_LANDSCAPE) {

            finish();
            return;
        }

        if (savedInstanceState == null) {
            // During initial setup, plug in the details fragment.
            details = new DetailFragment();
            details.setArguments(getIntent().getExtras());
            getSupportFragmentManager().beginTransaction()
                    .add(android.R.id.content, details).commit();
        }

        Bundle extras = getIntent().getExtras();
        int index = extras.getInt("index");
        try {
            details = (DetailFragment) getSupportFragmentManager()
                    .findFragmentById(R.id.detailfragment);
            details.setTextView(index);

        } catch (NullPointerException ex) {
            ex.getStackTrace();
        }

    }

} 
```

**细节片段：-**

```
public class DetailFragment extends Fragment {

    String[] capitals;

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);

        if (container == null)
            return null;

        capitals = new String[] { "delhi", "karachi", "colombo", "beijing",
                "dhaka", "katmandu", "Afghanistan", "pyongyang", "seoul",
                "tokyo" };

        View v = inflater.inflate(R.layout.detail_fragment, container, false);

        return v;
    }

    public void setTextView(int index) {

        try {
            TextView view = (TextView) getView().findViewById(R.id.detailView);
            view.setText(capitals[index]);

        } catch (NullPointerException ex) {
            ex.getStackTrace();
        }
    }

    public int getShownIndex() {
        return getArguments().getInt("index", 0);
    }
} 
```

更新：- 我正在添加 detailFragment xml：-

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="match_parent"
android:background="@color/lightblue"
android:orientation="vertical" >

<TextView
    android:id="@+id/detailView"
    android:layout_width="100dp"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    android:text="@string/detail_frag" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T06:59:49.337

而不是在 DetailActivity 中执行 details.setTextView(index) ，而是在 DetailFragment 的 onActivityCreated 中设置 TextView 的值，同时在 Detailactivity 中的片段 setArgument 方法中传递要设置的值...

```
 DetailsFragment details = new DetailsFragment();
  details.setArguments(getIntent().getExtras());  // pass the value of text view here 
```

并在片段 onActivityCreated 通过 getArguments() 获取该值并将其设置在 textview..

**编辑发送值选择加载片段**

在列表活动中

```
 detailFragment = getFragmentbyTag
  if(detailFragment == null)
      Create Fragment and Add it and Set Arguments here as well
  else
      detailFragment.setTextView(value); // fragment already loaded no need to set arguments 
```

如果你想每次都替换而不是添加一次并使用添加/加载的片段，每次都使用 setarguments .... 并删除以前的片段并添加新的片段（带参数）但最好添加一次并重用，而不是删除和在每次点击时添加/替换

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T05:07:11.870

你试过用这个吗

```
TextView view = (TextView) findViewById(R.id.detailView); 
```

而不是这个

```
 TextView view = (TextView) getView().findViewById(R.id.detailView); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T05:10:46.183

**更新2**

只需初始化您`TextView`就`onCreateView()`无需`DetailFragment`使用参数化创建只需添加评论

检查**详细信息**对象是否为 null 如果 null 像您一样初始化然后调用`setTextView()`

```
if(details==null)
    details = new DetailFragment(index);
else
   setTextView(index); 
```

TextView 里面`onCreateView()`并用了他们的

```
public class DetailFragment extends Fragment {

    String[] capitals;

    int index;
    private TextView textView;

    public DetailFragment(int index){
        this.index = index;
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);

        if (container == null)
            return null;

        capitals = new String[] { "delhi", "karachi", "colombo", "beijing",
                "dhaka", "katmandu", "Afghanistan", "pyongyang", "seoul",
                "tokyo" };

        View v = inflater.inflate(R.layout.detail_fragment, container, false);
        // Initialize textView
        textView = (TextView) v.findViewById(R.id.detailView);
        setTextView(index); // set value value here for first time
        return v;
    }

    public void setTextView(int index) {
        if(textView!=null)
            textView.setText(capitals[index]); 
    }

    public int getShownIndex() {
        return getArguments().getInt("index", 0);
    }
} 
```

# regex - 列出所有具有任意两个连续元音（a、e、i、o、u）的美国州名。使用字符向量 state.name？

> ID：14472644
> 
> 赞同：0
> 
> 时间：2013-01-23T04:47:17.040
> 
> 标签：regex, grep

这就是我所拥有的，但它返回所有 50 个状态

```
grep("[a]|[i]|[o]|[u]",state.name, value=TRUE) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T04:48:52.880

```
grep("[aeiou]{2}", state.name, value=TRUE) 
```

# java - 分岔和山脊终点

> ID：14472646
> 
> 赞同：0
> 
> 时间：2013-01-23T04:47:25.173
> 
> 标签：java, image, image-processing, imagej

有没有办法通过仅使用 Java 代码而不是 Matlab 等来找到图像（手、静脉）中的分叉点和脊终点？我可以通过 Java 的 ImageJ 库来实现这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T08:25:08.760

有一个 ImageJ 插件可以帮助你做到这一点：

[分析骨架](http://fiji.sc/wiki/index.php/AnalyzeSkeleton) （源见[这里](http://fiji.sc/AnalyzeSkeleton_.java)）

您可以在其`SkeletonResult`类的帮助下提取分支点和端点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T06:35:22.600

[您在从指纹图像中提取细节](http://arxiv.org/ftp/arxiv/papers/1201/1201.1422.pdf)中找到的科学描述。[在OpenCV](http://opencv.willowgarage.com/wiki/)中实现了一些算法，请参见分段部分。

OpenCV 库可以使用 JNI 链接到 java。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T05:52:45.693

非常感谢帮助我，我通过了 AnalyzeSkeleton 并通过使用 IJ 在 SkeletonResult Response 中得到了结果。为此，我使用了 IJ.run(imp, "Skeletonize", "");

```
 // Initialize AnalyzeSkeleton_
  AnalyzeSkeleton_ skel = new AnalyzeSkeleton_();
 skel.calculateShortestPath = true;
 skel.setup("", imp);

 // Perform analysis in silent mode
 // (work on a copy of the ImagePlus if you don't want it displayed)
 // run(int pruneIndex, boolean pruneEnds, boolean shortPath, ImagePlus origIP, boolean silent, boolean verbose)
 SkeletonResult skelResult = skel.run(AnalyzeSkeleton_.NONE, false, true, null, true, false);

 // Read the results
 Object shortestPaths[] = skelResult.getShortestPathList().toArray();
 double branchLengths[] = skelResult.getAverageBranchLength();
 int branchNumbers[] = skelResult.getBranches();

 long totalLength = 0;
 for (int i = 0; i < branchNumbers.length; i++) {
     totalLength += branchNumbers[i] * branchLengths[i];
 }

 double cumulativeLengthOfShortestPaths = 0;
 for (int i = 0; i < shortestPaths.length; i++) {
     cumulativeLengthOfShortestPaths +=(Double)shortestPaths[i];
 }
  System.out.println("totalLength "+totalLength);
  System.out.println("cumulativeLengthOfShortestPaths "+cumulativeLengthOfShortestPaths);
System.out.println("getNumOfTrees "+skelResult.getNumOfTrees());
System.out.println("getAverageBranchLength "+skelResult.getAverageBranchLength().length);
System.out.println("getBranches "+skelResult.getBranches().length);
System.out.println("getEndPoints "+skelResult.getEndPoints().length);
System.out.println("getGraph "+skelResult.getGraph().length);
System.out.println("getJunctions "+skelResult.getJunctions().length);
System.out.println("getJunctionVoxels "+skelResult.getJunctionVoxels().length);
System.out.println("getListOfEndPoints "+skelResult.getListOfEndPoints().size());
System.out.println("getListOfJunctionVoxels "+skelResult.getListOfJunctionVoxels().size());
System.out.println("getMaximumBranchLength "+skelResult.getMaximumBranchLength().length);
System.out.println("getNumberOfVoxels "+skelResult.getNumberOfVoxels().length);
System.out.println("getQuadruples "+skelResult.getQuadruples().length); this method .but I am not able to find which method in Skeleton Result class returns bifuraction point could you please help me little more thanks Amar 
```

# facebook - Facebook Graph Api Like 自定义操作批准更改

> ID：14472648
> 
> 赞同：1
> 
> 时间：2013-01-23T04:47:42.583
> 
> 标签：facebook, facebook-graph-api, facebook-like

我创建了一个名为“Like”的自定义 Facebook 图形操作，我的自定义对象说“Photo”，并将 Inherits From 设置为 Like。现在，当我提交批准时，他们会通过以下消息发回更改：

“我正在尝试提交不允许的自定义操作。删除此操作，请提交此操作而不是嵌入式版本。”。

所以我的问题是在这种情况下我需要改变什么？

# python - Python 3 - 编码/解码与字节/字符串

> ID：14472650
> 
> 赞同：104
> 
> 时间：2013-01-23T04:47:47.340
> 
> 标签：python, python-3.x

我是 python3 的新手，来自 python2，我对 unicode 基础知识有点困惑。我读过一些很好的帖子，这让一切变得更加清晰，但是我看到 python 3 上有两种方法可以处理编码和解码，我不确定使用哪一种。

因此，python 3 中的想法是，每个字符串都是 unicode，并且可以以字节编码和存储，或者再次解码回 unicode 字符串。

但是有两种方法可以做到这一点：
`u'something'.encode('utf-8')`将生成`b'something'`，但也会生成`bytes(u'something', 'utf-8')`。
并且`b'bytes'.decode('utf-8')`似乎与`str(b'bytes', 'utf-8')`.

现在我的问题是，为什么有两种方法似乎做同样的事情，并且比另一种更好（为什么？）我一直试图在谷歌上找到答案，但没有运气。

```
>>> original = '27岁少妇生孩子后变老'
>>> type(original)
<class 'str'>
>>> encoded = original.encode('utf-8')
>>> print(encoded)
b'27\xe5\xb2\x81\xe5\xb0\x91\xe5\xa6\x87\xe7\x94\x9f\xe5\xad\xa9\xe5\xad\x90\xe5\x90\x8e\xe5\x8f\x98\xe8\x80\x81'
>>> type(encoded)
<class 'bytes'>
>>> encoded2 = bytes(original, 'utf-8')
>>> print(encoded2)
b'27\xe5\xb2\x81\xe5\xb0\x91\xe5\xa6\x87\xe7\x94\x9f\xe5\xad\xa9\xe5\xad\x90\xe5\x90\x8e\xe5\x8f\x98\xe8\x80\x81'
>>> type(encoded2)
<class 'bytes'>
>>> print(encoded+encoded2)
b'27\xe5\xb2\x81\xe5\xb0\x91\xe5\xa6\x87\xe7\x94\x9f\xe5\xad\xa9\xe5\xad\x90\xe5\x90\x8e\xe5\x8f\x98\xe8\x80\x8127\xe5\xb2\x81\xe5\xb0\x91\xe5\xa6\x87\xe7\x94\x9f\xe5\xad\xa9\xe5\xad\x90\xe5\x90\x8e\xe5\x8f\x98\xe8\x80\x81'
>>> decoded = encoded.decode('utf-8')
>>> print(decoded)
27岁少妇生孩子后变老
>>> decoded2 = str(encoded2, 'utf-8')
>>> print(decoded2)
27岁少妇生孩子后变老
>>> type(decoded)
<class 'str'>
>>> type(decoded2)
<class 'str'>
>>> print(str(b'27\xe5\xb2\x81\xe5\xb0\x91\xe5\xa6\x87\xe7\x94\x9f\xe5\xad\xa9\xe5\xad\x90\xe5\x90\x8e\xe5\x8f\x98\xe8\x80\x81', 'utf-8'))
27岁少妇生孩子后变老
>>> print(b'27\xe5\xb2\x81\xe5\xb0\x91\xe5\xa6\x87\xe7\x94\x9f\xe5\xad\xa9\xe5\xad\x90\xe5\x90\x8e\xe5\x8f\x98\xe8\x80\x81'.decode('utf-8'))
27岁少妇生孩子后变老 
```

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2013-01-23T06:09:07.237

两者都不比另一个更好，它们做的事情完全相同。但是，使用`.encode()`and`.decode()`是更常见的方法。它还与 Python 2 兼容。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-01-23T07:59:29.743

添加到[Lennart Regebro 的回答](https://stackoverflow.com/a/14473492/1346705)甚至可以使用第三种方法：

```
encoded3 = str.encode(original, 'utf-8')
print(encoded3) 
```

无论如何，它实际上与第一种方法完全相同。看起来第二种方法是第三种方法的语法糖。

* * *

编程语言是一种正式表达抽象思想的手段，由机器执行。如果一种编程语言包含人们需要的结构，那么它就被认为是好的。Python 是一种混合语言——即比纯OO 或纯过程语言更自然、更通用。有时函数比对象方法更合适，有时反之亦然。这取决于已解决问题的心理图景。

无论如何，问题中提到的功能可能是语言实现/设计的副产品。在我看来，这是一个很好的例子，它展示了技术上相同事物的替代思维。

换句话说，调用对象方法意味着以*“让对象给我想要的结果”的*方式思考。调用函数作为替代方法意味着*“让外部代码处理传递的参数并提取想要的值”*。

第一种方法强调对象自己完成任务的能力，第二种方法强调单独算法提取数据的能力。有时，单独的代码可能非常特殊，以至于将其作为通用方法添加到对象的类中是不明智的。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2014-05-09T06:36:31.357

要添加到前面的答案，甚至还有第四种方法可以使用

```
import codecs
encoded4 = codecs.encode(original, 'utf-8')
print(encoded4) 
```

# c# - 使用 CMembership.ValidateUser 验证用户登录

> ID：14472654
> 
> 赞同：0
> 
> 时间：2013-01-23T04:48:11.753
> 
> 标签：c#, asp.net

我正在阅读关于`Membership.ValidateUser`.

这就是你实现它的方式；

```
if (Membership.ValidateUser(UsernameTextbox.Text, PasswordTextbox.Text))
      FormsAuthentication.RedirectFromLoginPage(UsernameTextbox.Text, NotPublicCheckBox.Checked); 
```

`paul`如果他/她的用户名是并且密码是，我想验证用户`123`。通过使用`Membership.ValidateUser`我不认为我可以进行验证。请解释`Membership.ValidateUser`如果用户提供了正确的凭据，我该如何验证用户？

# javascript - 验证 HH:MM 时间

> ID：14472660
> 
> 赞同：5
> 
> 时间：2013-01-23T04:48:41.960
> 
> 标签：javascript, html

这是我的 javascript 示例。怎么可能即兴发挥？

```
function a(id) 
{
    var n=document.getElementById(id);
    var re=/^[0-9]:[0-9] [to] [0-9]:[0-9]*$/;

    if(re.test(n.value))
    {
        n.style.backgroundColor="#52F40C";
    }
    else
    {
        window.alert("Invalid Entry");
        n.style.backgroundColor="#F40C0C";
        n.focus();
        n.value="";
    }
} 
```

我想验证用户输入，例如应该是 10:30 到 12:30。我是新手，请推荐我。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-23T04:54:56.147

将此正则表达式用于时间格式 hh:mm

```
^([0-9]|0[0-9]|1[0-9]|2[0-3]):[0-5][0-9]$ 
```

我刚刚放置了时间格式。尝试根据您的要求进行编辑。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T04:58:26.807

我相信，这就是你要找的：

```
^0[0-9]|1[0-9]|2[0-3]:[0-5][0-9] to 0[0-9]|1[0-9]|2[0-3]:[0-5][0-9]$ 
```

你可以在这里查看：[这里](http://jsfiddle.net/ENz9p/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-01-14T10:58:52.967

要检查字符串是否匹配**24 小时格式**（范围*00:00 → 23:59*），请使用[RegExp.prototype.test()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp/test)

```
// Validate "hh:mm" format
const validHHMMstring = (str) => /^([01]?[0-9]|2[0-3]):[0-5][0-9]$/.test(str);

console.log(validHHMMstring("99:99")); // false
console.log(validHHMMstring("24:00")); // false
console.log(validHHMMstring("23:60")); // false
console.log(validHHMMstring("23:59")); // true
console.log(validHHMMstring("00:00")); // true
```

使用喜欢：

```
// Having i.e: <input name="time">
const time = document.querySelector("[name=time]").value.trim();
if (validHHMMstring(time)) {
  // do something, is valid HH:MM
} 
```

# fonts - 图标字体 - 失真（修复 = 字体提示？）

> ID：14472662
> 
> 赞同：1
> 
> 时间：2013-01-23T04:49:00.257
> 
> 标签：fonts, svg, icons, font-face

编辑*根据第一条评论，我相信我的问题是我的方法缺乏字体提示。有谁知道如何处理使用矢量软件创建的图标字体来解决字体提示（或缺少）问题？帮助表示赞赏！

我正在创建一种用于我的图标的字体（比使用图像更灵活、更高效）。但是，我的一些图标被扭曲了，我不知道为什么。即使是非常简单的图标也是这样做的。我在想也许这是我的方法。这就是我所做的：

1.  Inkscape - 创建 960px x 960px 的矢量图标
2.  在页面上居中并使用字体编辑器创建新字形
3.  使用 freefontconverter.com 创建 .ttf 文件
4.  使用 www.fontsquirrel.com/fontface/generator 获取 .ttf 文件并转换为各种其他文件类型（svg、eot、wof、svg、ttf）。所有标准选项，除了删除字距和自定义子集（仅英文字符）
5.  在我的 css 样式表中使用以下代码（我没有想出代码，使用我在某处找到的指南，我认为它在我的书签中的某处）：

> ```
> @font-face {
>   font-family: 'iconFont';
>   src: url('iconfont-webfont.eot');
>   src: url('iconfont-webfont.eot?#iefix') format('embedded-opentype'),
>        url('iconfont-webfont.svg#iconFont') format('svg'),
>        url('iconfont-webfont.ttf') format('truetype');
>   font-weight: normal;
>   font-style: normal;
> }
> 
> .iconFont {
>   display:inline-block;
>   font-family:'IconFont';
> } 
> ```

起初我以为这是我的旧显示器，但刚买了一个新显示器，它仍然会发生。有时某些图标的边缘会出现锯齿状或歪斜。即使是简单的图标也会生效。例如，带有方形边框的日历图标......由于某种原因，底部边框的厚度是侧边框的两倍。甚至那些不是很糟糕的图标也永远不会像图像图标那样清晰。但我不明白，因为文本字体很清晰......所以我一定做错了什么？

任何帮助是极大的赞赏。谢谢！

如果有人可以帮助确定我哪里出错了，将不胜感激。谢谢！

# jquery - 在 jquery 库描述区域中添加超链接

> ID：14472664
> 
> 赞同：-1
> 
> 时间：2013-01-23T04:49:05.550
> 
> 标签：jquery, hyperlink, image-gallery, elastislide

我正在使用一个名为 Elastislide 的 jQuery 插件，可以在这里看到：http: [//tympanus.net/codrops/2011/09/20/responsive-image-gallery/](http://tympanus.net/codrops/2011/09/20/responsive-image-gallery/)

我遇到的问题是我试图在图库图像描述区域中插入一个超链接，但它似乎不允许任何 html 编码在这个区域工作。有什么办法吗？

相关的 html 代码如下所示：

```
<div id="rg-gallery" class="rg-gallery">
   <div class="rg-thumbs">
   <!-- Elastislide Carousel Thumbnail Viewer -->
      <div class="es-carousel-wrapper">
         <div class="es-nav">
             <span class="es-nav-prev">Previous</span>
             <span class="es-nav-next">Next</span>
         </div>
         <div class="es-carousel">
            <ul>
              <li>
                 <a href="#">
                    <img src="images/print_thumbs/1.jpg" data-large="images/print_images/1.jpg" alt="image01" data-description="This is my text. would love a linked word on some of them" />
                 </a>
              </li> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T05:20:44.367

首先，您的问题令人困惑-“我正在尝试将超链接插入图库图像描述区域”，因为我假设您指的是 data-description 属性。如果是这样，是的，您不能添加超链接。为了解决这个问题，您可以向 img 标签添加另一个数据属性，如下所示：

```
<img src="images/print_thumbs/1.jpg" data-large="images/print_images/1.jpg" alt="image01" data-description="This is my text. would love a linked word on some of them" data-extlink="http://www.google.com" /> 
```

并通过更改您的代码来使用新属性，我将参考[http://tympanus.net/Tutorials/ResponsiveImageGallery/](http://tympanus.net/Tutorials/ResponsiveImageGallery/)因为您还没有提供您的代码。您将不得不修改[http://tympanus.net/Tutorials/ResponsiveImageGallery/js/gallery.js](http://tympanus.net/Tutorials/ResponsiveImageGallery/js/gallery.js)代码：

```
var $thumb = $item.find('img'),
    largesrc    = $thumb.data('large'),
    title       = $thumb.data('description'),
    extlink = $thumb.data('extlink');

if( title )
    $rgGallery.find('div.rg-caption').show().children('p').empty().html( '<a href="'+extlink+'">'+title+'</a>' ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T05:11:48.803

if(title) $rgGallery.find('div.rg-caption').show().children('p').empty().text(title);

而不是 .text 使用 .html 并在数据描述中输入 html 链接（如 google）这是一种快捷方式，更好的方法是更改​​此设置 title = $thumb.data('description'); 随心所欲

但第一种方法更容易，应该可以

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-02T07:08:16.657

实际上，这确实可以将文本更改为 html。请务必将链接用单引号而不是双引号括起来。它就像一个魅力。您甚至可以使用中断标签。

所以改变这个：

```
if( title ) $rgGallery.find('div.rg-caption').show().children('p').empty().text( title ); 
```

对此：

```
if( title ) $rgGallery.find('div.rg-caption').show().children('p').empty().html( title ); 
```

在gallery.js 中并在您的html 页面中写下您的信息：

```
<li><a href="#"><img src="images/thumbs/2.jpg" data-large="images/2.jpg" alt="image02"   data-description="A plaintful story from a sistering vale. <a href='http://www.google.com'>Link goes to Google</a>" /></li> 
```

# codeigniter - 如何在codeigniter中取消设置特定的数据数组

> ID：14472667
> 
> 赞同：0
> 
> 时间：2013-01-23T04:49:14.393
> 
> 标签：codeigniter, session

我和这些家伙一起工作已经两天了。在这里需要帮助。

这是我的看法

```
$username = json_decode($this->session->userdata('users'), TRUE);

    foreach ($username AS $key => $value) {

    <?php echo $value['username']; ?>
    <?php echo $value['firstname']; ?>
    <?php echo $value['lastname']; ?>
    <?php $u = $value['username']; ?>
    <?php echo "<a href=".base_url()."index.php/bets/un_sess/$u /> X </a> " ?>

    <?php } ?> 
```

这是我的控制器

```
$user1 = json_decode($this->session->userdata('users'), TRUE);
 foreach ($user AS $key => $value) {
       $index = array_search($username, $user);
       unset($user[$index]);          
      $this->session->set_userdata('users', $user); 
```

来自 user_data 的数组

```
{"username":"user1","firstname":"name1","lastname":"name2"},
{"username":"user2","firstname":"test","lastname":"test"} 
```

这个的输出是当我第一次点击
用户名时它的工作但是当我点击另一个用户名时它给出了这样的错误

> 遇到 PHP 错误
> 
> 严重性：警告
> 
> 消息：isset 中的非法偏移类型或为空
> 
> 文件名：库/Session.php
> 
> 行号：433 遇到 PHP 错误
> 
> 严重性：警告
> 
> 消息：为 foreach() 提供的参数无效
> 
> 文件名：controllers/bets.php
> 
> 行号：290

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T00:40:14.193

好的，因为我的问题没有答案。这是我的解决方案

```
 $user = json_decode($this->session->userdata('users'), TRUE);
        foreach ($user AS $key => $value) {
          if ($username == $value['username']){

          unset($user[$key]);
         }
        }

       $this->session->set_userdata('users', json_encode($user)); 
```

# magento-1.7 - 在主屏幕上从左到右移动列

> ID：14472671
> 
> 赞同：0
> 
> 时间：2013-01-23T04:49:43.160
> 
> 标签：magento-1.7, magento

我正在研究magento，我希望左侧出现的类别出现在右侧。我尝试了很多教程，但没有得到它。请帮助我。我是 magento 的新手。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T09:07:32.927

# php - MySQL QUERY "LIKE" 什么都不返回

> ID：14472673
> 
> 赞同：0
> 
> 时间：2013-01-23T04:50:21.627
> 
> 标签：php, mysql, select, sql-like

我正在使用 MySQL 版本 5.0.51a 和 PHP 来访问数据库，当它应该返回至少 2 行与 LIKE 条件匹配时，这个查询什么也不返回。

```
$result = mysql_query("SELECT * FROM user WHERE name LIKE '%".$search."%'OR email LIKE    '%".$search."%' ORDER BY ".$order, $con); 
```

**$search**变量是“名称**”**，

ORDER、$order 或 $con 没有问题，我已经尝试过了，并且有 2 行名称为“Name”，但不知何故它找不到这些行并且它什么也不返回。

有谁知道问题出在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T05:36:07.300

尝试删除双逗号

```
$result = mysql_query("
                    SELECT 
                        * 
                    FROM user 
                    WHERE name LIKE '%{$search}%' OR email LIKE '%{$search}%' 
                    ORDER BY ".$order, $con); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T06:07:40.700

正如其他人指出的那样，它主要取决于语法，这是另一种方式：

```
$result = mysql_query(" SELECT * FROM user 
WHERE '%{$search}%' IN (name, email )
 ORDER BY ".$order.','. $con)
; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-23T05:00:20.267

请尝试以下查询：

```
$result = mysql_query("SELECT * FROM user WHERE name LIKE '%".$search."%'
OR email LIKE '%".$search."%' 
ORDER BY ".$order.','.$con); 
```

# android - 新手的Android相机方向

> ID：14472675
> 
> 赞同：3
> 
> 时间：2013-01-23T04:50:41.563
> 
> 标签：android, android-camera

我正在使用相机并**面临相机方向问题**。我在互联网上找到了一些答案，我认为这个答案可能最适合我。

**谁能给我详细的说明，[如何](https://stackoverflow.com/questions/3841122/android-camera-preview-is-sideways/5110406#5110406)在我的相机项目中添加这个答案。？**

这是我的[完整相机项目代码。](http://www.mediafire.com/?8ht63xpteih0as3)

直接代码在这里

```
public class AndroidCamera extends Activity implements SurfaceHolder.Callback{

 Camera camera;
 SurfaceView surfaceView;
 SurfaceHolder surfaceHolder;
 boolean previewing = false;
 LayoutInflater controlInflater = null;

 Button buttonTakePicture;

 final int RESULT_SAVEIMAGE = 0;

   /** Called when the activity is first created. */
   @SuppressWarnings("deprecation")
@Override
   public void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);
       setContentView(R.layout.main);

       getWindow().setFormat(PixelFormat.UNKNOWN);
       surfaceView = (SurfaceView)findViewById(R.id.camerapreview);
       surfaceHolder = surfaceView.getHolder();
       surfaceHolder.addCallback(this);
       surfaceHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);

       controlInflater = LayoutInflater.from(getBaseContext());
       View viewControl = controlInflater.inflate(R.layout.control, null);
       LayoutParams layoutParamsControl
        = new LayoutParams(LayoutParams.FILL_PARENT,
        LayoutParams.FILL_PARENT);
       this.addContentView(viewControl, layoutParamsControl);

       buttonTakePicture = (Button)findViewById(R.id.takepicture);
       buttonTakePicture.setOnClickListener(new Button.OnClickListener(){

   @Override
   public void onClick(View arg0) {
    // TODO Auto-generated method stub
    camera.takePicture(myShutterCallback,
      myPictureCallback_RAW, myPictureCallback_JPG);
   }});

       LinearLayout layoutBackground = (LinearLayout)findViewById(R.id.background);
       layoutBackground.setOnClickListener(new LinearLayout.OnClickListener(){

   @Override
   public void onClick(View arg0) {
    // TODO Auto-generated method stub

    buttonTakePicture.setEnabled(false);
    camera.autoFocus(myAutoFocusCallback);
   }});
   }

   AutoFocusCallback myAutoFocusCallback = new AutoFocusCallback(){

  @Override
  public void onAutoFocus(boolean arg0, Camera arg1) {
   // TODO Auto-generated method stub
   buttonTakePicture.setEnabled(true);
  }};

   ShutterCallback myShutterCallback = new ShutterCallback(){

  @Override
  public void onShutter() {
   // TODO Auto-generated method stub

  }};

 PictureCallback myPictureCallback_RAW = new PictureCallback(){

  @Override
  public void onPictureTaken(byte[] arg0, Camera arg1) {
   // TODO Auto-generated method stub

  }};

 PictureCallback myPictureCallback_JPG = new PictureCallback(){

  @Override
  public void onPictureTaken(byte[] arg0, Camera arg1) {
   // TODO Auto-generated method stub
   /*Bitmap bitmapPicture
    = BitmapFactory.decodeByteArray(arg0, 0, arg0.length); */

   Uri uriTarget = getContentResolver().insert(Media.EXTERNAL_CONTENT_URI, new ContentValues());

   OutputStream imageFileOS;
   try {
    imageFileOS = getContentResolver().openOutputStream(uriTarget);
    imageFileOS.write(arg0);
    imageFileOS.flush();
    imageFileOS.close();

    Toast.makeText(AndroidCamera.this,
      "Image saved",
      Toast.LENGTH_SHORT).show();

   } catch (FileNotFoundException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
   } catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
   }

   camera.startPreview();
  }};

 @Override
 public void surfaceChanged(SurfaceHolder holder, int format, int width,
   int height) {
  // TODO Auto-generated method stub
  if(previewing){
   camera.stopPreview();
   previewing = false;
  }

  if (camera != null){
   try {
    camera.setPreviewDisplay(surfaceHolder);  
    camera.startPreview();
    previewing = true;
   } catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
   }
  }
 }

 @Override
 public void surfaceCreated(SurfaceHolder holder) {
  // TODO Auto-generated method stub
  camera = Camera.open();
 }

 @Override
 public void surfaceDestroyed(SurfaceHolder holder) {
  // TODO Auto-generated method stub
  camera.stopPreview();
  camera.release();
  camera = null;
  previewing = false;
 }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T18:52:22.020

为了修复你的相机的方向改变了你的`surfaceCreated`功能，将相机从默认的安卓相机默认的横向模式旋转到纵向模式（因为你的活动是纵向模式）：

```
@Override
public void surfaceCreated(SurfaceHolder holder) {
   camera = Camera.open();
   Parameters parameters = camera.getParameters();
   camera.setDisplayOrientation(90);
   camera.setParameters(parameters);
} 
```

当您尝试拍照时，您的应用程序也会崩溃......但这不是手头的问题......尽管它可能与您需要将以下行添加到清单中有关：

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

:)

# jquery - qq Fileuploader在IE9中总是显示“上传失败”

> ID：14472677
> 
> 赞同：-1
> 
> 时间：2013-01-23T04:50:52.017
> 
> 标签：jquery, asp.net-mvc, file-upload, nopcommerce

我是 qqFileuploader 的初学者。我在我的 MVC3 应用程序中使用 qq 文件上传器

Uploader 在 Firefox 和 Chrome 中运行良好，但总是显示“失败”消息

在 IE 9 中。请看我的图片

![在此处输入图像描述](../Images/77ec1f2184ecfcc44c3509579d579d3e.png)

我一无所知。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T19:03:11.477

我最近有一个类似的问题。

问题源于它没有得到它正在寻找的 JSON - 我已将内容类型设置为返回，而这实际上是把它搞砸了。

我在 VB.net 中有这一行： `context.Response.ContentType = "application/json"`

一旦我删除它，问题就消失了。只需确保您对返回的 JSON 格式正确。我假设你是因为它在 Firefox 和 Chrome 中工作，但出于某种原因，IE 认为它是 XML，尽管我特别告诉它它应该是 JSON。

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-11T18:05:01.217

我遇到过同样的问题！我的解决方法是在我的 php 文件中从 $_GET["qqfile"] 更改为 $_FILES["qqfile"]。我只对 IE9 进行此修复。而且我的脚本也只上传了 1 个文件。

# c# - 输入 C# WPF 后在文本框中读取文本

> ID：14472678
> 
> 赞同：0
> 
> 时间：2013-01-23T04:50:58.643
> 
> 标签：c#, wpf, textbox, keydown, enter

我在 C# WPF 中有一个简单的要求。我有一个文本框，我将在其中输入一些文本。当我按 Enter 时，我希望触发一个事件。我的代码是

```
 private void AddKeyword(object sender, KeyEventArgs e)
  {
     if(e.Key == Key.Enter)
      {
         //DO something
      }
  } 
```

我已经设置了我的文本框 AcceptReturn =True; 该方法根本不起作用，当我按 Enter 时，我没有看到任何事件被触发。请帮帮我。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T04:54:09.597

这对我来说很好

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Grid>
        <TextBox Height="23" HorizontalAlignment="Left" Margin="10,10,0,0" Name="textBox1" VerticalAlignment="Top" Width="190" KeyUp="textBox1_KeyUp" />
    </Grid>
</Window> 
```

和

```
using System.Windows;
using System.Windows.Input;

namespace WpfApplication1
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();
        }

        private void textBox1_KeyUp(object sender, KeyEventArgs e)
        {
            if (e.Key == Key.Enter)
            {
                e.Handled = true;
                MessageBox.Show("Enter Fired!");
            }
        }
    }
} 
```

# c - 如何从 C 中的字符串获取和评估表达式

> ID：14472680
> 
> 赞同：4
> 
> 时间：2013-01-23T04:51:39.017
> 
> 标签：c, string

如何从**C中的字符串获取和评估表达式**

```
char *str = "2*8-5+6"; 
```

这应该在评估后给出结果为**17 。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T04:59:25.650

自己试试。你可以使用堆栈数据结构来评估这个字符串这里是实现（它在c ++中） [堆栈数据结构用于字符串计算的参考](http://cboard.cprogramming.com/cplusplus-programming/115490-can-someone-help-me-write-calculator-cplusplus-using-stack.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T04:59:27.883

你必须自己做，C 没有提供任何方法来做到这一点。C是一种非常低级的语言。最简单的方法是找到一个库，或者如果不存在，请使用 lex + yacc 创建您自己的解释器。

一个快速的谷歌建议如下：

*   [http://www.gnu.org/software/libmatheval/](http://www.gnu.org/software/libmatheval/)
*   [http://expreval.sourceforge.net/](http://expreval.sourceforge.net/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-18T02:41:05.490

你应该试试[TinyExpr](https://github.com/codeplea/tinyexpr)。它是一个可以添加到项目中的单个 C 源代码文件（没有依赖项）。

使用它来解决您的问题只是：

```
#include <stdio.h>    
#include "tinyexpr.h"

int main()
{
    double result = te_interp("2*8-5+6", 0);
    printf("Result: %f\n", result);
    return 0;
} 
```

那将打印出：`Result: 17`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-02-08T15:14:40.617

C 没有标准`eval()`函数。

有很多库和其他工具可以做到这一点。

但是，如果您想学习如何自己编写表达式求值器，这可能会非常容易。这*不是*微不足道的：它实际上是一个非常深入的理论问题，因为您基本上是在编写一个微型解析器，可能构建在一个微型词法分析器上，就像一个真正的编译器一样。

编写解析器的一种直接方法涉及一种称为[*递归下降*](https://en.wikipedia.org/wiki/Recursive_descent_parser)的技术。编写递归下降解析器与解决大问题或难题的另一种伟大技术有很多共同之处，即将大而难的问题分解成更小且更容易的子问题。

所以让我们看看我们能想出什么。我们将编写一个函数，该函数`int eval(const char * expr)`接受一个包含表达式的字符串，并返回计算`int`结果。但首先让我们编写一个小的主程序来测试它。我们将读取用户使用 输入的一行文本`fgets`，将其传递给我们的`expr()`函数，然后打印结果。

```
#include <stdio.h>

int eval(const char *expr);

int main()
{
    char line[100];
    while(1) {
        printf("Expression? ");
        if(fgets(line, sizeof line, stdin) == NULL) break;
        printf(" -> %d\n", eval(line));
    }
} 
```

所以现在我们开始写`eval()`。第一个问题是，在解析字符串时，我们如何跟踪读取字符串的距离？一个简单（虽然有点神秘）的方法是传递一个*指向*下一个字符的指针的指针。这样任何函数都可以在字符串中向前（或偶尔向后）移动。所以我们的`eval()`函数几乎什么都不做，除了获取指向要解析的字符串的指针的地址，导致`char **`我们刚刚决定需要，并调用一个函数`evalexpr()`来完成这项工作。（但别担心，我没有拖延；一会儿我们就会开始做一些有趣的事情。）

```
int evalexpr(const char **);

int eval(const char *expr)
{
    return evalexpr(&expr);
} 
```

所以现在是时候写了`evalexpr()`，这将开始做一些实际的工作。它的工作是对表达式进行第一个顶级解析。它将寻找一系列被添加或减去的“术语”。所以它想得到一个或多个子表达式，它们之间有`+`或`-`运算符。也就是说，它将处理如下表达式

```
1 + 2 
```

或者

```
1 + 2 - 3 
```

或者

```
1 + 2 - 3 + 4 
```

或者它可以读取单个表达式，例如

```
1 
```

或者任何被添加或减去的术语都可以是一个更复杂的子表达式，因此它也能够（间接地）处理诸如

```
2*3 + 4*5 - 9/3 
```

但底线是它想要获取一个表达式，然后可能是 a `+`or`-`后跟另一个子表达式，然后可能是 a `+`or`-`后跟另一个子表达式，依此类推，只要它一直看到 a `+`or `-`。这是代码。由于它是将表达式的附加“项”相加，因此它通过调用函数来获取子表达式`evalterm()`。它还需要查找`+`and`-`运算符，它通过调用函数来完成此操作`gettok()`。有时它会看到除`+`or以外的运算符`-`，但这些不是它要处理的工作，所以如果它看到其中一个，它会“取消”它并返回，因为它已经完成了。所有这些函数都传递指针到指针`p`因为正如我之前所说，这就是所有这些函数在解析字符串时如何跟踪它们在字符串中移动的方式。

```
int evalterm(const char **);
int gettok(const char **, int *);
void ungettok(int, const char **);

int evalexpr(const char **p)
{
    int r = evalterm(p);
    while(1) {
        int op = gettok(p, NULL);
        switch(op) {
            case '+': r += evalterm(p); break;
            case '-': r -= evalterm(p); break;
            default: ungettok(op, p); return r;
        }
    }
} 
```

这是一些非常密集的代码，仔细观察它并说服自己它正在做我描述的事情。它调用`evalterm()`一次，以获取第一个子表达式，并将结果分配给局部变量`r`。然后它进入一个潜在的无限循环，因为它可以处理任意数量的加减项。在循环内部，它获取表达式中的下一个运算符，并使用它来决定要做什么。（不要担心第二个，`NULL`参数`gettok`; 我们会在一分钟内解决这个问题。）

如果它看到 a `+`，它会获取另一个子表达式（另一个术语）并将其添加到运行总和中。类似地，如果它看到 a `-`，它会得到另一个项并将其从运行总和中减去。如果它得到其他任何东西，这意味着它已经完成，所以它“取消”它不想处理的运算符，并返回运行总和——这实际上是它评估的值。（该`return`语句还打破了“无限”循环。）

在这一点上，你可能会感到“好吧，这开始有意义了”和“等一下，你在这里玩得又快又松，这永远行不通，是吗？” 但它会起作用，正如我们将看到的。

我们需要的下一个函数是收集要通过 evalexpr() 一起添加（和减去）的“项”或子表达式。该功能是`evalterm()`，它最终非常相似 -*非常*相似 - `evalexpr`。`*`它的工作是收集一系列由and/or连接的一个或多个子表达式`/`，并将它们相乘和相除。此时，我们将把这些子表达式称为“primaries”。这是代码：

```
int evalpri(const char **);

int evalterm(const char **p)
{
    int r = evalpri(p);
    while(1) {
        int op = gettok(p, NULL);
        switch(op) {
            case '*': r *= evalpri(p); break;
            case '/': r /= evalpri(p); break;
            default: ungettok(op, p); return r;
        }
    }
} 
```

这里实际上没有什么可说的了，因为 的结构`evalterm`最终与 evalexpr*完全*一样，除了它用`*`and做事`/`，它调用`evalpri`获取/评估它的子表达式。

那么现在让我们来看看`evalpri`。它的工作是计算表达式的三个最低级别但优先级最高的元素：实际数字、带括号的子表达式和一元运算`-`符。

```
int evalpri(const char **p)
{
    int v;
    int op = gettok(p, &v);
    switch(op) {
        case '1': return v;
        case '-': return -evalpri(p);
        case '(':
            v = evalexpr(p);
            op = gettok(p, NULL);
            if(op != ')') {
                fprintf(stderr, "missing ')'\n");
                ungettok(op, p);
            }
            return v;
    }
} 
```

首先要做的是调用`gettok`我们在`evalexpr`and中使用的相同函数`evalterm`。但现在是时候多说一点了。它实际上是我们的小解析器使用的[*词法分析器。*](https://en.wikipedia.org/wiki/Lexical_analysis)词法分析器返回原始“令牌”。标记是编程语言的基本句法元素。标记可以是单个字符，例如`+`or `-`，也可以是多字符实体。整数常量 like`123`被认为是单个标记。在 C 中，其他标记是关键字，如`while`，和标识符`printf`，以及多字符运算符，如`<=`and `++`。（不过，我们的小表情评估器没有这些。）

所以`gettok`必须返回两件事。首先，它必须返回它找到的令牌类型的代码。对于单字符标记`+`，`-`我们会说代码就是字符。对于数字常量（即*任何*数字常量），我们会说它`gettok`会返回字符`1`。但是我们需要一些方法来知道数字常量的值是什么，正如你可能已经猜到的，这就是`gettok`函数的第二个指针参数的用途。当`gettok`返回`1`时表示一个数字常量，并且如果调用者传递一个指向一个`int`值的指针，`gettok`将在那里填充整数值。（我们将看到`gettok`一会儿起作用。）

无论如何，通过这种解释`gettok`，我们可以理解`evalpri`。它获取一个标记，传递一个局部变量的地址`v`，如果需要，可以在其中返回标记的值。如果标记是一个`1`指示整数常量，我们只需返回该整数常量的值。如果标记是 a `-`，这是一个一元减号，所以我们得到另一个子表达式，取反并返回它。最后，如果标记是 a `(`，我们得到另一个完整的表达式，并返回*它的*值，检查以确保它`)`后面还有另一个标记。而且，您可能会注意到，在括号内，我们递归调用顶层`evalexpr`函数来获取子表达式，因为显然我们希望允许任何子表达式，即使是包含低优先级运算符的子表达式，例如`+`and `-`，在括号内。

我们几乎完成了。接下来我们可以看看`gettok`。正如我提到的，`gettok`是词法分析器，检查单个字符并从中构造完整的标记。我们现在终于开始了解如何使用传递的指针到指针`p`。

```
#include <stdlib.h>
#include <ctype.h>

void skipwhite(const char **);

int gettok(const char **p, int *vp)
{
    skipwhite(p);
    char c = **p;
    if(isdigit(c)) {
        char *p2;
        int v = strtoul(*p, &p2, 0);
        *p = p2;
        if(vp) *vp = v;
        return '1';
    }
    (*p)++;
    return c;
} 
```

表达式可以包含任意空格，这些空格会被忽略，因此我们使用辅助函数跳过它`skipwhite`。现在我们看看下一个角色。 `p`是一个指向那个字符的指针，所以这个字符本身就是`**p`. 如果是数字，我们调用`strtoul`转换它。 `strtoul`有用地返回一个指向它扫描的数字后面的字符的指针，因此我们使用它来更新`p`. `vp`我们用为我们计算的实际值填充传递的指针`strtoul`，并返回`1`指示整数常量的代码。

否则——如果下一个字符不是数字——它是一个普通字符，大概是一个类似`+`or`-`或类似标点符号的操作符`(` `)`，所以我们简单地返回这个字符，然后递增`*p`以记录我们已经使用它的事实。正确地“递增”`p`有点棘手：它是一个指向指针的指针，我们想要递增指向的指针。如果我们写`p++`或者`*p++`它会增加指针`p`，那么我们需要`(*p)++`说它是我们想要增加的指向指针。（另见[C 常见问题 4.3](http://c-faq.com/ptrs/unopprec2.html)。）

还有两个实用函数，然后我们就完成了。这是`skipwhite`：

```
void skipwhite(const char **p)
{
    while(isspace(**p))
        (*p)++;
} 
```

这只是跳过零个或多个空格字符，由`isspace`函数 from确定`<ctype.h>`。（同样，我们注意记住这`p`是一个指针对指针。）

最后，我们来到`ungettok`. 这是递归下降解析器（或者实际上是几乎任何解析器）的一个标志，它必须在输入中“向前看”，根据下一个标记做出决定。然而，有时它决定它毕竟还没有准备好处理下一个标记，所以它想把它留在输入中，以便解析器的其他部分稍后处理。

可以说，填充输入“回到输入流”可能很棘手。这个实现`ungettok`很简单，但绝对不完美：

```
void ungettok(int op, const char **p)
{
    (*p)--;
} 
```

它甚至不看它被要求放回的令牌；它只是将指针向上备份 1。*如果*（但仅当）它被要求取消获取的令牌实际上是最近获得的令牌，并且它不是整数常量令牌时，这将起作用。事实上，对于编写的程序，只要它解析的表达式格式正确，情况总是如此。可以编写一个更复杂的版本`gettok`来明确检查这些假设，如果需要的话，它可以备份多字符标记（例如整数常量），但是这篇文章比我写的要长得多故意的，所以我暂时不担心这个。

但如果你还在我身边，我们就完了！如果您还没有，我鼓励您将我提供的所有代码复制到您友好的社区 C 编译器中，然后尝试一下。例如，您会发现`1 + 2 * 3`给出 7（而不是 9），因为解析器“知道”这一点`*`并且`/`具有比`+`and更高的优先级`-`。就像在真正的编译器中一样，您可以使用括号覆盖默认优先级：`(1 + 2) * 3`给出 9。从左到右的关联性也有效：`1 - 2 - 3`是 -4，而不是 +2。它也处理大量复杂的，也许令人惊讶（但合法）的情况：`(((((5)))))`评估为 5，`----4`评估为 4（它被解析为“负负负负四”，因为我们的简化解析器没有 C'`--`

然而，这个解析器确实有一个很大的限制：它的错误处理很糟糕。它会处理合法的表达式，但是对于非法的表达式，它要么做一些奇怪的事情，要么就忽略这个问题。例如，它会简单地忽略它无法识别或没有预料到的任何尾随垃圾——表达式`4 + 5 x`,`4 + 5 %`和`4 + 5 )`所有计算结果都为 9。

尽管有点像“玩具”，但这也是一个非常真实的解析器，正如我们所见，它可以解析很多真实的表达式。通过研究这段代码，您可以了解很多关于如何解析表达式（以及如何编写编译器）的知识。（一个脚注：递归下降不是编写解析器的唯一方法，实际上真正的编译器通常会使用相当复杂的技术。）

您甚至可能想尝试扩展此代码，以处理其他运算符或其他“主要”（例如可设置变量）。事实上，曾几何时，我从类似这样的东西开始，并将其一直扩展到一个实际的 C 解释器。

# linux - 进程内存大小 solaris

> ID：14472681
> 
> 赞同：1
> 
> 时间：2013-01-23T04:51:41.703
> 
> 标签：linux, unix, solaris, sysadmin, solaris-10

在 solaris 10 机器上运行 perl 脚本。知道 RAM 大小为 25 GB。有两个疑问。

1.  通常为一个 solaris 进程分配多少 RAM 内存。它是分配给任何脚本或进程的默认值吗？哪里可以设置？我如何确定我可以拥有多少最大静态数组大小以及我可以分配多少动态内存？我需要发出什么命令来找出在 solaris 中分配给进程的内存？是否可配置？

2.  当脚本给我内存不足错误时。这是否意味着它使用了整个 RAM 和虚拟内存？当脚本抛出内存不足错误时，有什么方法可以知道内存是如何使用的？我需要发出什么命令才能在solaris中找到它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T06:15:52.120

[1）根据它的要求，不超过ulimit](http://docs.oracle.com/cd/E23824_01/html/821-1461/ulimit-1.html#scrolltoc "Solaris 11.1 手册页：ulimit(1)")设置的限制。[pmap](http://docs.oracle.com/cd/E23824_01/html/821-1461/pmap-1.html#scrolltoc "Solaris 11.1 手册页：pmap(1)")和[ps](http://docs.oracle.com/cd/E23824_01/html/821-1461/ps-1.html#scrolltoc "Solaris 11.1 手册页：ps(1)")等命令可以显示当前进程分配了多少。

2）这可能意味着它使用了所有虚拟内存，或者它达到了进程限制，或者它是一个 32 位进程并且达到了 4gb 地址空间限制。 [*Solaris 应用程序内存管理*](http://www.oracle.com/technetwork/server-storage/solaris10/solaris-memory-135224.html)提供了更多详细信息。

# c# - java decrytpion & c# 加密非法密钥大小问题

> ID：14472683
> 
> 赞同：1
> 
> 时间：2013-01-23T04:51:56.957
> 
> 标签：c#, java, cryptography, aes

我们正在通过 ac# 应用程序从该代码中加密/解密我们组织的文档

```
var msData = new MemoryStream();
            CryptoStream cs = null;
            if (inputFileStream.CanSeek)
                inputFileStream.Seek(0, SeekOrigin.Begin);
            try
            {
                long inputFileLength = inputFileStream.Length;
                var byteBuffer = new byte[4096];
                long bytesProcessed = 0;
                int bytesInCurrentBlock = 0;

                var csRijndael = new RijndaelManaged();
                switch (action)
                {
                    case CryptoAction.Encrypt:
                        cs = new CryptoStream(msData, csRijndael.CreateEncryptor(this.Key, this.IV), CryptoStreamMode.Write);
                        break;

                    case CryptoAction.Decrypt:
                        cs = new CryptoStream(msData, csRijndael.CreateDecryptor(this.Key, this.IV), CryptoStreamMode.Write);
                        break;
                }

                while (bytesProcessed < inputFileLength)
                {
                    bytesInCurrentBlock = inputFileStream.Read(byteBuffer, 0, 4096);
                    cs.Write(byteBuffer, 0, bytesInCurrentBlock);
                    bytesProcessed += bytesInCurrentBlock;
                }
                cs.FlushFinalBlock();

                return msData.ToArray();
            }
            catch(Exception ex)
            {
                new Com.Library.SqlLog().InsertSqlLog(Auth.currentMemberInfo.LoginId, MethodInfo.GetCurrentMethod().Name, ex);
                return null;
            } 
```

它工作正常。现在我正在创建一个 Java 应用程序，它也应该解密这些文档。最初我试图用这段 Java 代码解密文档

```
 try{

    AlgorithmParameterSpec paramSpec = new IvParameterSpec(IV); 
    Cipher cipher = Cipher.getInstance("AES");
    SecretKeySpec key = new SecretKeySpec(keyGen, "AES");
    cipher.init(Cipher.DECRYPT_MODE, key, paramSpec); 
    byte[] output =  new BASE64Decoder().decodeBuffer(new String(convertDocToByteArra("//Path/somePDF.pdf")));  

     byte[] decrypted = cipher.doFinal(output);

     convertByteArrayToDoc(decrypted);
       }catch(Exception e){
           e.printStackTrace();
       } 
```

现在这是我的问题。我将其作为初始化向量传递

```
static byte IV[] = new byte[] {0x0E,0x15,(byte)0xC4,(byte)0xBB,
             (byte)0xEE,(byte)0xDF,0x72,0x0C,0x4F,0x7E,(byte)0xBE,0x67,0x4A,(byte)0xB6,0x45,(byte)0xDE}; 
```

这是一个关键

```
static byte[] keyGen = new byte[]{0x78,(byte)0x9C,(byte)0xF1,0x01,0x12,0x31,(byte)0xCD,0x1E,0x1F,0x16,0x54,0x19,0x1D,(byte)0xFF,(byte)0xC7,
            0x00,0x51,(byte)0xBF,(byte)0xFD,0x31,(byte)0xE1,(byte)0xA1,(byte)0xDC,(byte)0xC9,0x23,0x49,(byte)0xAD,0x11,0x16,0x17,0x1D,0x1F}; 
```

但是当我运行这个程序时，它会抛出下面给出的异常

```
java.security.InvalidKeyException: Illegal key size
    at javax.crypto.Cipher.checkCryptoPerm(Cipher.java:1023)
    at javax.crypto.Cipher.implInit(Cipher.java:789)
    at javax.crypto.Cipher.chooseProvider(Cipher.java:848)
    at javax.crypto.Cipher.init(Cipher.java:1347)
    at javax.crypto.Cipher.init(Cipher.java:1281)
    at DecryptAspEncryptedDocs.main(DecryptAspEncryptedDocs.java:80) 
```

现在我被困在这里，不知道该怎么做。任何帮助将不胜感激。

**编辑 1：**
我已经看到[了这个问题](https://stackoverflow.com/questions/6481627/java-security-illegal-key-size-or-default-parameters)，并且 jar 被放置在 jre/lib/security 和 jdk/lib/security 中。但是问题仍然存在并且抛出`illegal key size`异常

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T06:35:07.593

根据 AES 的密钥大小，它将受到出口控制。我建议您下载无限制的 jce 管辖策略文件并将它们安装到您的 Java 环境中。

AES256 将需要无限的策略文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-20T17:35:23.827

README 中没有明确说明“JCE Unlimited Strength Jurisdiction Policy Files”应该复制到 JDK 中的 jre 中，否则它将不起作用。文件路径应为：/path/to/jdk1.7.0_xx/jre/lib/security

# c# - c# 内存模型、锁定和同步

> ID：14472684
> 
> 赞同：2
> 
> 时间：2013-01-23T04:52:05.313
> 
> 标签：c#, multithreading, locking, shared-memory, memory-model

c# 内存模型是否保证持有锁的线程可以看到所有执行的更新，而任何其他线程先前持有相同的锁？

我一直在阅读 c# 规范，但似乎无法找到这方面的细节。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-23T05:22:19.417

寻求直观的解释：如果没有提供该保证，那么您将无法实现锁定。

寻求正式解释：CLI 规范（Ecma 335）第 I.12.6.5 章涵盖了这一点：

> 获取锁（System.Threading.Monitor.Enter 或进入同步方法）应隐式执行易失性读操作，释放锁（System.Threading.Monitor.Exit 或离开同步方法）应隐式执行易失性写操作.
> 
> 易失性读取具有“获取语义”，这意味着读取保证发生在 CIL 指令序列中读取指令之后发生的任何对内存的引用之前。易失性写入具有“释放语义”，这意味着写入保证发生在 CIL 指令序列中写入指令之前的任何内存引用之后。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-23T05:01:27.753

是的，受某些限制。有关详细信息，您要查找的部分是 3.10。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T04:56:37.203

锁定只是暂停其他需要锁定的线程。这保证了只有一个线程执行对共享数据的更新。

当锁被释放时，另一个线程可以更新数据，它会看到前一个线程的更新。

# glassfish-3 - GlassFish 集群 + EJB 查找

> ID：14472689
> 
> 赞同：0
> 
> 时间：2013-01-23T04:52:47.727
> 
> 标签：glassfish-3, ejb-3.1

我们有 Glassfish 集群，它有两个实例。

在这个集群上，我的 EJB 应用程序已部署并正在运行。

现在我有另一个 EJB-Timer-应用程序，我想将其部署在 Glassfish 服务器（域）而不是集群上，然后我想访问集群的 EJB。据我了解，EJB 计时器无法部署在集群上，因为它可以在集群的两个实例上运行。

有哪些可能的访问方式？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T14:32:01.003

您实际上可以在集群上部署 EJB 计时器。它们只会在一个实例上执行。在启动时，每个@Scheduled bean 都以循环方式分配给一个实例。如果一个实例发生故障，计时器将故障转移到下一个健康的实例。

请记住遵循此处描述的 EJB 计时器的设置过程：http: [//docs.oracle.com/cd/E18930_01/html/821-2418/beahw.html](http://docs.oracle.com/cd/E18930_01/html/821-2418/beahw.html)。简而言之，您需要为计时器数据库指定一个 XA 数据源，而不是使用默认的嵌入式数据源。

我们在 Glassfish 集群生产环境中运行了几个 @Scheduled bean。

# javascript - 在 javascript 中使用 webkit-playsinline

> ID：14472690
> 
> 赞同：4
> 
> 时间：2013-01-23T04:53:01.063
> 
> 标签：javascript, html, video

如何在 javascript 而不是 html5 视频标签中使用 webkit-playsinline？我想像在 javascript 中使用视频标签控制/自动播放属性一样使用它，或者如果你们有任何其他有效的方法？我正在开发一个流式传输视频的 PhoneGap iOS 应用程序。

以下是我尝试过的一些方法，但没有一种方法有效：

> videoPlayer.WebKitPlaysInline = "webkit-playsinline"; videoPlayer.WebKitPlaysInline = "WebKitPlaysInline"; videoPlayer.webkit-playsinline = "webkit-playsinline"; videoPlayer.WebKitPlaysInline = "true"; videoPlayer.WebKitPlaysInline = true; videoPlayer.webkit-playsinline = "true"; videoPlayer.webkit-playsinline = true;

我当前的代码（js）：

```
function loadPlayer() {
    var videoPlayer = document.createElement('video');
videoPlayer.controls = "controls";
    videoPlayer.autoplay = "autoplay";
    videoPlayer.WebKitPlaysInline = true;
    document.getElementById("vidPlayer").appendChild(videoPlayer);
    nextChannel();
} 
```

我当前的代码（html）：

```
<body onload="loadPlayer(document.getElementById('vidPlayer'));"><!-- load js function -->

<li><span class="ind_player"><div id="vidPlayer"></div></span></li><!-- video element creat here --> 
```

任何帮助都非常感谢。谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-09-15T14:13:24.233

你可以在没有 jQuery 的情况下做到这一点：

```
var videoElement = document.createElement( 'video' );
videoElement.setAttribute('webkit-playsinline', 'webkit-playsinline'); 
```

您必须在 iOs 应用程序的 WebView 中激活此功能：

```
webview.allowsInlineMediaPlayback = true; 
```

您可以查看此帖子以获取更多详细信息：

[iPhone 与 iPad/浏览器上的 HTML5 内嵌视频](https://stackoverflow.com/questions/3699552/html5-inline-video-on-iphone-vs-ipad-browser)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-20T13:55:06.190

You need to attach it to the video element and set it as video's attribute

such as :

```
<video class="" poster="" webkit-playsinline>
    <source src="" type="video/ogg" preload="auto">
    <source src="" type="video/mp4" preload="auto">                
</video> 
```

so you could do (with jQuery) :

```
$('video').attr('webkit-playsinline', ''); 
```

# c# - 加密名称

> ID：14472692
> 
> 赞同：3
> 
> 时间：2013-01-23T04:53:23.980
> 
> 标签：c#, .net, algorithm, encryption

我今天正在经历加密，我的同事告诉我一个更简单/自定义的方法，我所做的列在那里，所以你能告诉我那是什么类型的加密或 hashign 吗？他告诉我这是某种散列和加密的混合。对不起，愚蠢的问题，我是新来的。:) 下面的方法需要一个字符串（在我的例子中是密码）。反转它并制作一个字典（添加字典项如下所列）并匹配键和值并返回加密数据。

```
public static string Encrypt(string source)
{
    string enCrypted = "";
    try
    {
        source = Reverse(source);
        Dictionary<char, char> sourceTable = AddDictionaryItems();

        char[] sourceArray = source.ToCharArray();
        StringBuilder encryptedData = new StringBuilder();
        foreach (char chr in sourceArray)
        {
            KeyValuePair<char, char> Pair;
            Pair = sourceTable.First(tuple => tuple.Key == chr);
            encryptedData.Append(Pair.Value);
        }
        enCrypted=encryptedData.ToString();
    }
    catch (Exception ex)
    { 

    }
    return enCrypted;
} 
```

以下方法将项目添加到字典中，项目基本上基于 ascii 代码。我遍历所有asciis，然后在字典中添加相应的字符。但真正的诀窍是在字典中添加项目时。例如，当我在字典中添加“A”作为键时，它的值将是“D”。变量“jump”指定键和值之间的差异。所以如果我的密码是“ABC”，如果我反转那个东西，它会返回“DEF”或“FED”。

```
public static Dictionary<char, char> AddDictionaryItems()
{
    Dictionary<char, char> dc = new Dictionary<char, char>();
    try
    {
        int initial = 33;
        int jump = 3;
        int final = 127 - jump;

        for (int ascii = initial; ascii < final; ascii++)
        {
            dc.Add((char)ascii, (char)(ascii + jump));
        }
        for (int ascii = final; ascii < final + jump; ascii++)
        {
            dc.Add((char)ascii, (char)(initial));
            initial++;
        }
    }
    catch (Exception ex)
    { 
        throw ex;
    }
    return dc;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-23T04:59:42.220

那将是一个[替代密码](http://en.wikipedia.org/wiki/Substitution_cipher)，但是除非你是为了好玩，否则不要将此方法用于任何需要安全的事情。[**每天**](http://www.cecildaily.com/diversions/cryptoquip/)[有成千上万的人为了好玩](http://www.cecildaily.com/diversions/cryptoquip/)[而破解这种加密方法](http://www.cecildaily.com/diversions/cryptoquip/)**（查看您当地的报纸，它可能也有，它通常在填字游戏旁边）。**

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T10:00:41.170

伙计们，我已经定制了我的代码

```
public static string Reverse(string str)
    {
        char[] charArray = str.ToCharArray();
        Array.Reverse(charArray);
        return new string(charArray);
    }

    public static string Encrypt(string source)
    {
        string prefix = Guid.NewGuid().ToString();
        string infix = Guid.NewGuid().ToString();
        string postfix = Guid.NewGuid().ToString();

        int length = source.Length;
        string firstHalf = source.Substring(0, length / 2);
        string secondHalf = source.Substring(length / 2);

        string ConcatedPassword = prefix + firstHalf + infix + secondHalf + postfix;

        string enCrypted = "";
        try
        {
            ConcatedPassword = Reverse(ConcatedPassword);
            Dictionary<char, char> sourceTable = AddDictionaryItems();

            char[] sourceArray = ConcatedPassword.ToCharArray();
            StringBuilder encryptedData = new StringBuilder();
            foreach (char chr in sourceArray)
            {
                KeyValuePair<char, char> Pair;
                Pair = sourceTable.First(tuple => tuple.Key == chr);
                encryptedData.Append(Pair.Value);
            }
            enCrypted = encryptedData.ToString();
        }
        catch (Exception ex)
        {

        }
        return enCrypted;
    }

    public static string Decrypt(string source)
    {
        string deCrypted = "";
        try
        {
            source = Reverse(source);
            Dictionary<char, char> sourceTable = AddDictionaryItems();

            char[] sourceArray = source.ToCharArray();
            StringBuilder decryptedData = new StringBuilder();
            foreach (char chr in sourceArray)
            {
                KeyValuePair<char, char> Pair;
                Pair = sourceTable.First(tuple => tuple.Value == chr);
                decryptedData.Append(Pair.Key);
            }
            deCrypted = decryptedData.ToString();
            string prefixRemoved = deCrypted.Remove(0, 36);
            string postfixRemoved = prefixRemoved.Remove(prefixRemoved.Length - 36);
            string infixRemoved = postfixRemoved.Remove((postfixRemoved.Length - 36) / 2, 36);
            deCrypted = infixRemoved;
        }
        catch (Exception ex)
        {

        }
        return deCrypted;
    }

    public static Dictionary<char, char> AddDictionaryItems()
    {
        Dictionary<char, char> dc = new Dictionary<char, char>();
        try
        {
            int initial = 33;
            int jump = 10;
            int final = 127 - jump;

            for (int ascii = initial; ascii < final; ascii++)
            {
                dc.Add((char)ascii, (char)(ascii + jump));
            }
            for (int ascii = final; ascii < final + jump; ascii++)
            {
                dc.Add((char)ascii, (char)(initial));
                initial++;
            }
        }
        catch (Exception ex)
        {

        }
        return dc;
    }

protected void Page_Load(object sender, EventArgs e)
{
     string password = "$Om3P@55w0r6";
     string encrypted = Encrypt(password);
     string decrypted = Decrypt(encrypted);
} 
```

加密并不安全，但它是一个开始。我希望它可以帮助某人从头开始编写自己的方法。**

# javascript - html 5 nav 标记在 IE7 中的 cakephp 中停止 ajax

> ID：14472693
> 
> 赞同：3
> 
> 时间：2013-01-23T04:53:26.167
> 
> 标签：javascript, html, cakephp, jquery, internet-explorer-7

我在 cake php 中使用 html5 结构。
当我使用`nav`标签时，ajax 链接不起作用，但是当我用`nav`标签替换标签时`div`，ajax 链接正在工作。

是否有任何适当的解决方案来使用`nav`标签运行 ajax 链接。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T06:32:11.427

如果没有 shim，IE7 将无法识别 nav 标记（或其他仅限 html5 的元素）。我知道的最流行的解决方案是 html5shiv：

[https://github.com/aFarkas/html5shiv](https://github.com/aFarkas/html5shiv)

如果您想了解更多有关它的信息，可以在此处进行：

[http://paulirish.com/2011/the-history-of-the-html5-shiv/](http://paulirish.com/2011/the-history-of-the-html5-shiv/)

# javascript - 弹出点击上的 x 图像应该集中在文本框上，但不能按预期工作

> ID：14472697
> 
> 赞同：0
> 
> 时间：2013-01-23T04:54:03.633
> 
> 标签：javascript, jquery, image, gwt, click

我有一个通过 gwt 代码生成的弹出窗口。用户单击（图像 x btn）后，焦点应设置为文本框。但是我在这里所拥有的并没有按预期工作。它的作用是它专注于文本框但不关闭弹出窗口。我需要它先关闭弹出窗口，然后再聚焦文本框。我尝试一一删除 div 的类，但似乎它不会删除“模态”功能，或者页面不再响应任何鼠标或键盘单击。下面的代码只有在 $('#globalSearchTextBox').focus(); 之前有一个 alert("test") 时才能按预期工作。但是每当我删除它时，它都会再次失败。似乎把焦点放在了“x”上 图像丢失并立即转到 globalSearchTextBox 甚至在单击弹出窗口之前，这就是它不关闭它并因此仍处于模态模式的原因。我还尝试在图像单击的 xit 处理程序上的 .java 代码中执行此操作，但仍然无法正常工作。

我没有关于如何正确执行此操作的想法，也不是 jquery 粉丝。:(请帮忙。谢谢。

这是我的代码：

```
$('#imgExitId').live('keydown', function(e) { 
      var keyCode = e.keyCode || e.which; 

      if (keyCode == 9) { 
        e.preventDefault(); 
        //alert("tab press")
         $('#imgExitId').focus();

      } 
      if (keyCode == 13) { 
          e.preventDefault();
//if alert("test") is added, hen it works 
         $('#globalSearchTextBox').focus();

          } 

    }); 
```

我尝试了数百种解决方案，例如模糊、鼠标离开，同时设置超时（我尝试延迟焦点，因为我认为它很快）。我什至尝试删除弹出面板的 .css。

这是弹出窗口的 html（通过 gwt 代码生成）：

```
 <div class="gwt-PopupPanelGlass" style="position: absolute; left: 0px; top: 0px; display: block; width: 1758px; height: 1001px;"></div>
<div style="left: 1156px; top: 39px; position: absolute; overflow: visible;" class="gwt-DecoratedPopupPanel gwt-DecoratedPopupPanel-pnlUserFeedback" id="pnlUserFeedBackId"><div class=""><table cellspacing="0" cellpadding="0" class=""><tbody><tr class="dialogTop"><td class="dialogTopLeft"><div class="dialogTopLeftInner"></div></td><td class="dialogTopCenter"><div class="dialogTopCenterInner"><div class="Caption"></div></div></td><td class="dialogTopRight"><div class="dialogTopRightInner"></div></td></tr><tr class="dialogMiddle"><td class="dialogMiddleLeft"><div class="dialogMiddleLeftInner"></div></td><td class="dialogMiddleCenter"><div class="dialogMiddleCenterInner dialogContent"><div id="pnlUserFeedbackPopupArrowId" class="pnlMainUserFeedback pnlArrow"><img src="images/window-arrow-for-error.gif" class="gwt-Image" title="Error" alt="Error" id="imgUserFeedbackPopupArrowId"><div id="pnlHeaderUserFeedbackPopupId" class="pnlHeaderUserFeedbackPopup"><button type="button" tabindex="0" class="imgExit" title="Close Window" alt="Close Window" id="imgExitId"></button><div class="dataHyperLink lblCloseInUserFeedback" id="lblCloseInUserFeedbackId" style="text-decoration: initial;">close</div><div class="gwt-Label lblHeaderUserFeedbackPopup" id="lblHeaderUserFeedbackPopupId">Error</div><div id="pnlBodyUserFeedbackPopupId" class="pnlBodyUserFeedbackPopup"><div id="pnlMessagePopupId" class="pnlMessagePopup"><img class="gwt-Image imgWarning" title="Warning" alt="Warning" src="images/warning.gif" id="imgWarningId"><div class="gwt-Label lblMessagePopup" id="lblMessagePopupId">Please provide a search term</div></div></div></div></div></div></td><td class="dialogMiddleRight"><div class="dialogMiddleRightInner"></div></td></tr><tr class="dialogBottom"><td class="dialogBottomLeft"><div class="dialogBottomLeftInner"></div></td><td class="dialogBottomCenter"><div class="dialogBottomCenterInner"></div></td><td class="dialogBottomRight"><div class="dialogBottomRightInner"></div></td></tr></tbody></table></div></div> 
```

# javascript - 禁用 使用 javascript 标记内容

> ID：14472699
> 
> 赞同：0
> 
> 时间：2013-01-23T04:54:11.057
> 
> 标签：javascript, jquery, jstree

```
var inputs = document.getElementsByTagName("li");
for(var i = 0; i < inputs.length; i++)
{
    if(inputs[i].id.indexOf(startsWith) == 0) {
        eles.push(inputs[i].id);
    }
}
for(var j=0; j < eles.length; j++) {
    document.getElementById(eles[j]).setAttribute("class","jstree-checked");                
} 
```

`li`我在我的文档标签中取出以特定模式开头的 id 。
我正在更改`li`生成的 id 的标签类别。
我还需要`li`整体禁用标签中存在的内容。
是否可以使用 javascript 或 jquery 来做到这一点？

**更新：**
我在每个`<li>`标签内都有一个复选框和文本消息。
需要禁用复选框（不可点击）并将文本显示为禁用。

```
<li id="1_1" class="jstree-leaf jstree-no-icons jstree-last jstree-leaf jstree-unchecked" crawllocation="D:\company\deploy\AppServer\fusionEAR.ear" name="fusionEAR.ear">
<ins class="jstree-icon"> </ins>
<a class="" href="#" style="">
<ins class="jstree-checkbox"> </ins>
<ins class="jstree-icon "> </ins>
fusionEAR.ear
</a>
</li> 
```

试过这些：

```
for(var j=0; j < eles.length; j++){
//jQV6('#jstreeDivforBrowse').jstree("check_node","#"+eles[j]);
document.getElementById(eles[j]).setAttribute("class","jstree-default jstree-checked");
//$.jstree._reference('#jstreeDivforBrowse').set_type("disabled", "#"+eles[j]); -- First try to disable
//eles[j].disabled = true;-- Second try to disable
//$("#"+eles[j]).attr('disabled', 'true');-- Third try to disable
//$("#"+eles[j]).addClass("jstree-leaf jstree-no-icons jstree-last jstree-leaf jstree-checked").find(":input").attr("disabled", "disabled");-- Fourth try to disable
        } 
```

在任何这些尝试中，我都找不到我的复选框被禁用。但是通过更改给定的循环内的类名，对于所需的 id，选择复选框的任务是成功的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T05:16:37.173

[types插件](http://www.jstree.com/documentation/types)可用于自定义jstree中的节点。

```
 types: {
    "disabled": {
        "select_node": false,
        "open_node":   false,
        "close_node":  false,
        "create_node": false,
        "delete_node": false
    }
} 
```

请注意，我们定义了 a`Type`并将其命名为`disabled`，因此我们为元素添加了属性以`rel`使其禁用。这就是 jsTree使用该属性的方式。`disabled``<li>``type``rel`

随着`Type`被声明，在你的循环中添加，

```
document.getElementById(eles[j]).setAttribute("rel","disabled"); 
```

我希望这可以帮助你。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-23T04:58:21.953

用来 `$("/* li element*/").attr("disabled", "disabled");`禁用它

或 `$("/* li element*/").hide();` 隐藏它

在你的情况下

```
for(var j=0; j < eles.length; j++) {
$("#"+eles[j]).addClass("jstree-checked").find(":input").attr("disabled", "disabled");

} 
```

# php - Mysql 查询在 IE8 和 (FF,chrome) 中显示不同的结果

> ID：14472706
> 
> 赞同：0
> 
> 时间：2013-01-23T04:55:04.047
> 
> 标签：php, mysql, firefox, internet-explorer-8

我在核心 php 中开发了 cms，我在管理部分有简单的搜索表单来搜索数据库。
当我运行 mysql select 查询时，它在 IE8 和 FF 中显示不同的结果

我的**查询**：

```
$q = "select * from users where FirstName='Linda' and LastName='Anderson'"; 
```

在 FF 和 Chrome 中，此查询显示 3 条记录是正确的，但在 IE8 中它只显示一条记录

# c - 我无法在 Windows 7 上设置服务器来监听特定端口

> ID：14472711
> 
> 赞同：-1
> 
> 时间：2013-01-23T04:55:46.023
> 
> 标签：c, winapi, networking, network-programming

我想用winapi学习一些C语言的网络编程。

这就是代码。问题。它仅在端口 5555 上运行，而不是我指定的端口。它编译并运行。windows防火墙弹出，我授权应用程序。我使用 connect() 参数使用 nmap 扫描了我的计算机，它关闭了连接，确保该应用程序在端口 5555 上运行。但是，它不会在屏幕上显示任何内容，除非连接终止。

注释部分是我尝试设置服务器的另一种方式。我尝试了两种方法，但都没有完美地工作。提前致谢。

```
#undef UNICODE

#define WIN32_LEAN_AND_MEAN

#include <windows.h>
#include <winsock2.h>
#include <ws2tcpip.h>
#include <stdlib.h>
#include <stdio.h>

// Need to link with Ws2_32.lib
// #pragma comment (lib, "Mswsock.lib")

#define DEFAULT_BUFLEN 1024

int __cdecl main(void)
{
    WSADATA wsaData;
    int iResult;

SOCKET ListenSocket = INVALID_SOCKET;
SOCKET ClientSocket = INVALID_SOCKET;

struct addrinfo *result = NULL;
struct addrinfo hints;

int iSendResult;
char recvbuf[DEFAULT_BUFLEN];
int recvbuflen = DEFAULT_BUFLEN;

// Initialize Winsock
iResult = WSAStartup(MAKEWORD(2,2), &wsaData);
if (iResult != 0) {
    printf("WSAStartup failed with error: %d\n", iResult);
    return 1;
}

struct sockaddr_in my_addr, *p;

//ZeroMemory(&hints, sizeof(hints));
my_addr.sin_family = AF_INET;
my_addr.sin_addr.s_addr = inet_addr(192.168.0.102)
my_addr.sin_port = htons(9998);
memset(my_addr.sin_zero,'\0', sizeof(my_addr.sin_zero));
/*
hints.ai_family = AF_INET;
hints.ai_socktype = SOCK_STREAM;
hints.ai_protocol = IPPROTO_TCP;
hints.ai_flags = AI_PASSIVE;
*/  

// Resolve the server address and port

/*iResult = getaddrinfo("192.168.0.102", "3222", &hints, &result);
if ( iResult != 0 ) {
    printf("getaddrinfo failed with error: %d\n", iResult);
    WSACleanup();
    return 1;
}*/

//Create a SOCKET for connecting to server
ListenSocket = socket(p->sin_family, p->sin_socktype, p->sin_protocol);

//ListenSocket = socket(result->ai_family, result->ai_socktype, result->ai_protocol);
if (ListenSocket == INVALID_SOCKET) {
    printf("socket failed with error: %ld\n", WSAGetLastError());
    freeaddrinfo(result);
    WSACleanup();
    return 1;
}

// Setup the TCP listening socket
iResult = bind( ListenSocket, 192.168.0.102, (int)p->sin_addrlen);

if (iResult == SOCKET_ERROR) {
    printf("bind failed with error: %d\n", WSAGetLastError());
    freeaddrinfo(result);
    closesocket(ListenSocket);
    WSACleanup();
    return 1;
}
freeaddrinfo(result);

iResult = listen(ListenSocket, SOMAXCONN);
if (iResult == SOCKET_ERROR) {
    printf("listen failed with error: %d\n", WSAGetLastError());
    closesocket(ListenSocket);
    WSACleanup();
    return 1;
}

// Accept a client socket
ClientSocket = accept(ListenSocket, NULL, NULL);
if (ClientSocket == INVALID_SOCKET) {
    printf("accept failed with error: %d\n", WSAGetLastError());
    closesocket(ListenSocket);
    WSACleanup();
    return 1;
}

// No longer need server socket
closesocket(ListenSocket);

// Receive until the peer shuts down the connection
do {

    printf("Running on port: %d\n", p->sin_port)

    iResult = recv(ClientSocket, recvbuf, recvbuflen, 0);
    if (iResult > 0) {
        printf("Bytes received: %d\n", iResult);
    // Echo the buffer back to the sender
        iSendResult = send( ClientSocket, recvbuf, iResult, 0 );
        if (iSendResult == SOCKET_ERROR) {
            printf("send failed with error: %d\n", WSAGetLastError());
            closesocket(ClientSocket);
            WSACleanup();
            return 1;
        }
        printf("Bytes sent: %d\n", iSendResult);
    }
    else if (iResult == 0)
        printf("Connection closing...\n");
    else  {
        printf("recv failed with error: %d\n", WSAGetLastError());
        closesocket(ClientSocket);
        WSACleanup();
        return 1;
    }

} while (iResult > 0);

// shutdown the connection since we're done
iResult = shutdown(ClientSocket, SD_SEND);
if (iResult == SOCKET_ERROR) {
    printf("shutdown failed with error: %d\n", WSAGetLastError());
    closesocket(ClientSocket);
    WSACleanup();
    return 1;
}

// cleanup
closesocket(ClientSocket);
WSACleanup();

return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T09:06:17.550

您的代码中有一堆错误。

尝试这个：

```
#undef UNICODE

#define WIN32_LEAN_AND_MEAN

#include <windows.h>
#include <winsock2.h>
#include <stdlib.h>
#include <stdio.h>

// Need to link with Ws2_32.lib
// #pragma comment (lib, "Mswsock.lib")

#define DEFAULT_BUFLEN 1024

int __cdecl main(void)
{
    WSADATA wsaData;
    int iResult;

    SOCKET ListenSocket = INVALID_SOCKET;
    SOCKET ClientSocket = INVALID_SOCKET;

    int iSendResult;
    char recvbuf[DEFAULT_BUFLEN];

    // Initialize Winsock
    iResult = WSAStartup(MAKEWORD(2,2), &wsaData);
    if (iResult != 0)
    {
        printf("WSAStartup failed with error: %d\n", iResult);
        return 1;
    }

    struct sockaddr_in my_addr;

    short my_port = 9998;

    memset(&my_addr, 0, sizeof(my_addr));
    my_addr.sin_family = AF_INET;
    my_addr.sin_addr.s_addr = inet_addr("192.168.0.102");
    my_addr.sin_port = htons(my_port);

    // Resolve the server address and port

    //Create a SOCKET for connecting to server
    ListenSocket = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP);
    if (ListenSocket == INVALID_SOCKET)
    {
        printf("socket failed with error: %ld\n", WSAGetLastError());
        WSACleanup();
        return 1;
    }

    // Setup the TCP listening socket
    iResult = bind(ListenSocket, (struct sockaddr*)&my_addr, sizeof(my_addr));
    if (iResult == SOCKET_ERROR)
    {
        printf("bind failed with error: %d\n", WSAGetLastError());
        closesocket(ListenSocket);
        WSACleanup();
        return 1;
    }

    iResult = listen(ListenSocket, SOMAXCONN);
    if (iResult == SOCKET_ERROR)
    {
        printf("listen failed with error: %d\n", WSAGetLastError());
        closesocket(ListenSocket);
        WSACleanup();
        return 1;
    }

    printf("Listening on port: %hd\n", my_port);

    // Accept a client socket
    ClientSocket = accept(ListenSocket, NULL, NULL);
    if (ClientSocket == INVALID_SOCKET)
    {
        printf("accept failed with error: %d\n", WSAGetLastError());
        closesocket(ListenSocket);
        WSACleanup();
        return 1;
    }

    // No longer need server socket
    closesocket(ListenSocket);

    printf("Client connected\n");

    // Receive until the peer shuts down the connection
    do
    {
        iResult = recv(ClientSocket, recvbuf, sizeof(recvbuf), 0);
        if (iResult > 0)
        {
            printf("Bytes received: %d\n", iResult);
            // Echo the buffer back to the sender
            iSendResult = send( ClientSocket, recvbuf, iResult, 0 );
            if (iSendResult == SOCKET_ERROR)
            {
                printf("send failed with error: %d\n", WSAGetLastError());
                closesocket(ClientSocket);
                WSACleanup();
                return 1;
            }
            printf("Bytes sent: %d\n", iSendResult);
        }
        else if (iResult == 0)
        {
            printf("Connection closing...\n");
            break;
        }
        else 
        {
            printf("recv failed with error: %d\n", WSAGetLastError());
            closesocket(ClientSocket);
            WSACleanup();
            return 1;
        }
    }
    while (true);

    // shutdown the connection since we're done
    iResult = shutdown(ClientSocket, SD_SEND);
    if (iResult == SOCKET_ERROR)
    {
        printf("shutdown failed with error: %d\n", WSAGetLastError());
        closesocket(ClientSocket);
        WSACleanup();
        return 1;
    }

    // cleanup
    closesocket(ClientSocket);
    WSACleanup();

    return 0;
} 
```

或这个：

```
#undef UNICODE

#define WIN32_LEAN_AND_MEAN

#include <windows.h>
#include <winsock2.h>
#include <ws2tcpip.h>
#include <stdlib.h>
#include <stdio.h>

// Need to link with Ws2_32.lib
// #pragma comment (lib, "Mswsock.lib")

#define DEFAULT_BUFLEN 1024

int __cdecl main(void)
{
    WSADATA wsaData;
    int iResult;

    SOCKET ListenSocket = INVALID_SOCKET;
    SOCKET ClientSocket = INVALID_SOCKET;

    struct addrinfo *result = NULL;
    struct addrinfo hints;

    int iSendResult;
    char recvbuf[DEFAULT_BUFLEN];

    // Initialize Winsock
    iResult = WSAStartup(MAKEWORD(2,2), &wsaData);
    if (iResult != 0)
    {
        printf("WSAStartup failed with error: %d\n", iResult);
        return 1;
    }

    short my_port = 9998;
    char my_port_str[6];
    sprintf(my_port_str, "%hu", my_port);

    memset(&hints, 0, sizeof(hints));
    hints.ai_family = AF_INET;
    hints.ai_socktype = SOCK_STREAM;
    hints.ai_protocol = IPPROTO_TCP;
    hints.ai_flags = AI_PASSIVE;

    // Resolve the server address and port

    iResult = getaddrinfo("192.168.0.102", my_port_str, &hints, &result);
    if (iResult != 0)
    {
        printf("getaddrinfo failed with error: %d\n", iResult);
        WSACleanup();
        return 1;
    }

    //Create a SOCKET for connecting to server
    ListenSocket = socket(result->ai_family, result->ai_socktype, result->ai_protocol);
    if (ListenSocket == INVALID_SOCKET)
    {
        printf("socket failed with error: %ld\n", WSAGetLastError());
        freeaddrinfo(result);
        WSACleanup();
        return 1;
    }

    // Setup the TCP listening socket
    iResult = bind(ListenSocket, result->ai_addr, result->ai_addrlen);
    if (iResult == SOCKET_ERROR)
    {
        printf("bind failed with error: %d\n", WSAGetLastError());
        freeaddrinfo(result);
        closesocket(ListenSocket);
        WSACleanup();
        return 1;
    }

    freeaddrinfo(result);

    iResult = listen(ListenSocket, SOMAXCONN);
    if (iResult == SOCKET_ERROR)
    {
        printf("listen failed with error: %d\n", WSAGetLastError());
        closesocket(ListenSocket);
        WSACleanup();
        return 1;
    }

    printf("Listening on port: %hd\n", my_port);

    // Accept a client socket
    ClientSocket = accept(ListenSocket, NULL, NULL);
    if (ClientSocket == INVALID_SOCKET)
    {
        printf("accept failed with error: %d\n", WSAGetLastError());
        closesocket(ListenSocket);
        WSACleanup();
        return 1;
    }

    // No longer need server socket
    closesocket(ListenSocket);

    printf("Client connected\n");

    // Receive until the peer shuts down the connection
    do
    {
        iResult = recv(ClientSocket, recvbuf, sizeof(recvbuf), 0);
        if (iResult > 0)
        {
            printf("Bytes received: %d\n", iResult);
            // Echo the buffer back to the sender
            iSendResult = send(ClientSocket, recvbuf, iResult, 0);
            if (iSendResult == SOCKET_ERROR)
            {
                printf("send failed with error: %d\n", WSAGetLastError());
                closesocket(ClientSocket);
                WSACleanup();
                return 1;
            }
            printf("Bytes sent: %d\n", iSendResult);
        }
        else if (iResult == 0)
        {
            printf("Connection closing...\n");
            break;
        }
        else
        {
            printf("recv failed with error: %d\n", WSAGetLastError());
            closesocket(ClientSocket);
            WSACleanup();
            return 1;
        }
    }
    while (true);

    // shutdown the connection since we're done
    iResult = shutdown(ClientSocket, SD_SEND);
    if (iResult == SOCKET_ERROR)
    {
        printf("shutdown failed with error: %d\n", WSAGetLastError());
        closesocket(ClientSocket);
        WSACleanup();
        return 1;
    }

    // cleanup
    closesocket(ClientSocket);
    WSACleanup();

    return 0;
} 
```

# asp.net - 如何在转发器中找到控制图像按钮，该按钮已经在数据列表中

> ID：14472712
> 
> 赞同：1
> 
> 时间：2013-01-23T04:55:59.253
> 
> 标签：asp.net, repeater, imagebutton, datalist

如何在中继器中找到控件（即图像按钮），该中继器已经在数据列表中？因为我必须对该图像按钮执行删除操作。

这是我的代码，这里我得到中继器但不是图像按钮：

```
foreach (DataListItem item in Dlist_SearchResult.Controls)
            {

                rptrResult = (Repeater)item.FindControl("Rptr_result");

                imgbtnDelete = (ImageButton)item.FindControl("imgbtnDelete");

            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T04:58:32.887

您可以在 FindControl 中使用递归。FindControl 默认不是递归的。

试试这个：

```
private static Control FindControlRecursive(Control rootCtrl, string ID)
{
    if (rootCtrl.ID == ID)
        return rootCtrl;

    foreach (Control ctr in rootCtrl.Controls)
    {
        Control foundCtl = FindControlRecursive(ctr, ID);
        if (foundCtl != null)
            return foundCtl;
    }

    return null;
} 
```

你可以叫它

```
Button btn = FindControlRecursive((Control)Page,"imgbtnDelete"); 
```

# php - 如果没有详细的 if 子句，如何在 PHP 中找到两个数组子值之间的数组匹配？

> ID：14472713
> 
> 赞同：1
> 
> 时间：2013-01-23T04:56:04.603
> 
> 标签：php, arrays, loops, if-statement, multidimensional-array

我需要根据 PHP 中的最小值和最大值在数组中查找匹配项。缺少精心设计的 foreach,if,elseif,then 子句，我怎样才能有效地获得匹配的行？

例如...给定数组`$arr`（如下）和数字`4`，我如何返回数组行`1`、`2`和`3`？

```
$arr = array(
    0 => array( 'min' => 1,     'max' => 1,     'name' => 'alpha'),
    1 => array( 'min' => 1,     'max' => 9,     'name' => 'beta'),
    2 => array( 'min' => 1,     'max' => 19,    'name' => 'gamma'),
    3 => array( 'min' => 2,     'max' => 29,    'name' => 'delta'),
    4 => array( 'min' => 10,    'max' => 100,   'name' => 'epsilon'),
    5 => array( 'min' => 20,    'max' => 100,   'name' => 'zeta'),
    6 => array( 'min' => 30,    'max' => 100,   'name' => 'eta')
); 
```

我希望把它变成一个函数。像这样的东西：

```
function findMatchingRows($n) {
    $arr = /*** see above ***/;
    /*** your answer! ***/
    return $matchingRows;
}

$n = 12;
print_r(findMatchingRows($n)); 
```

上面的预期结果应该是 rows `2`、`3`和`4`。但我希望它适用于 1 到 100 之间的任何整数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T05:00:32.360

```
$number = 4;
$result = array_filter($arr, function ($elem) use ($number) {
   return $elem['min'] <= $number && $number <= $elem['max'];
}); 
```

# java - 错误预测的分支退休和错误预测的分支执行之间的区别

> ID：14472716
> 
> 赞同：1
> 
> 时间：2013-01-23T04:56:28.203
> 
> 标签：java, optimization, assembly, likwid

我有一个不寻常的案例，我正在检查一个相对简单的 Java，它应该有很好的预测分支行为，但是 likwid-perfctr 报告了一个巨大的（50%）分支错误预测率。但是，运行时间与错误预测率不一致（CPI 非常低，约为 0.3，前端和后端的停顿率很低）。类似的 C++ 程序没有错误预测，但实际上运行时间稍长。

似乎差异在于 BR_MISP_RETIRED_ALL_BRANCHES 与 BR_MISP_EXEC_ANY 事件。用于计算误判率的前者很大，每个循环一个事件。后者非常小，与预期的误判率一致，也与运行时间一致。

对于我尝试过的其他示例程序，它们确实表现出严重的错误预测（例如，在数组中的随机值上进行分支），这些值非常相似。

有人熟悉这两个计数器的确切含义吗？对于错误预测的分支，“已退休”计数器如何比“执行”计数器大 25 倍 - 当任何分支必须在其退休之前执行时？

# sql - UPDATE 中更快的是什么：COALESCE(field,value) 或 WHERE 字段为空

> ID：14472720
> 
> 赞同：1
> 
> 时间：2013-01-23T04:56:50.597
> 
> 标签：sql, sql-server, sql-update, coalesce

什么查询应该更快

```
UPDATE table1
SET field1 = COALESCE(field1, someValue)
WHERE foreignKeyField = someKeyValue 
```

或者

```
UPDATE table1
SET field1 = someValue
WHERE foreignKeyField = someKeyValue AND field1 is null 
```

在 MS SQL Server 中？它取决于什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T06:40:18.253

`ISNULL`我猜，开销会更少，取决于 NULL 条件。这是 COALESCE 与 ISNULL 与 IS NULL OR 的测试比较 - [http://blogs.x2line.com/al/archive/2004/03/01/189.aspx](http://blogs.x2line.com/al/archive/2004/03/01/189.aspx)

另外，请查看此博客的性能比较：ISNULL 与 COALESCE [http://sqlblog.com/blogs/adam_machanic/archive/2006/07/12/performance-isnull-vs-coalesce.aspx](http://sqlblog.com/blogs/adam_machanic/archive/2006/07/12/performance-isnull-vs-coalesce.aspx)，其中说：

> ISNULL 似乎始终比 COALESCE 平均高出 10% 或 12%。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T05:52:15.173

好吧，让我首先声明您的查询有两种不同的含义。更新 table1 并将 field1 设置为始终等于某个值，即使它为 NULL，也不等同于仅在 field1 为 NULL 的情况下更新表。你更新的意图是什么？

以这个[小提琴](http://sqlfiddle.com/#!3/0e404/2)为例：

```
SELECT Field FROM Test WHERE Field IS NULL;
SELECT COALESCE(Field,'') FROM Test; 
```

第一个查询返回一条记录，第二个查询返回 2 条记录。

您可能想知道以下性能：

```
SELECT COALESCE(Field,'') FROM Test;
SELECT ISNULL(Field,'') FROM Test; 
```

虽然我没有测试过，但 ISNULL 的效率应该提高 20-30%。

希望有些帮助。祝你好运。

# java - 在 @Transactional 方法中加载惰性集合

> ID：14472721
> 
> 赞同：0
> 
> 时间：2013-01-23T04:56:56.493
> 
> 标签：java, spring, hibernate

我尝试将集合加载到我的对象（我不能使用 FetchType.EAGER），但我收到以下异常：

```
org.hibernate.LazyInitializationException: failed to lazily initialize a collection of role: Produkt.opinie, could not initialize proxy - no Session 
```

我不知道为什么我在@Transactional 范围内这样做：

```
@Service
@Transactional
public class ProduktService extends AbstractService implements IProduktService {

    public Produkt findProduktById(Integer id) {
        Produkt produkt = (Produkt) getSessionFactory().getCurrentSession()
                .get(Produkt.class, id);
            produkt.getOpinie();
        return produkt;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T05:02:03.967

可能有很多原因。一次拥有@Transactional 注释并不是全部——您需要检查一个事务管理器是否已在您的spring 应用程序上下文中正确配置。然后，您需要检查您的应用程序是否具有适当的 AOP 支持，以便 Spring 可以自动启动和完成带有 @Transactional 注释的方法上的事务。

您还需要一个适当的事务管理器，例如：在您使用 Hibernate 的情况下，您需要配置一个 HibernateTransactionManager。

调试 Spring / Hibernate 发出的实际 SQL 语句以检查您的事务是否真的正常工作也很有帮助

[spring 手册的第 11 章是该主题的好读物。](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/transaction.html)

# oracle - 如何在从 oracle 表生成 xml 时设置空标签

> ID：14472727
> 
> 赞同：0
> 
> 时间：2013-01-23T04:57:30.583
> 
> 标签：oracle, oracle11g

```
SET PAGES 0;
SET LINE 1000;
SET LONG 9999999;
SPOOL C:\pensionnew.xml;
col foo format a60000
SELECT DBMS_XMLGEN.GETXML('SELECT * FROM DATAAG')foo FROM DUAL;
SPOOL OFF; 
```

我使用此代码生成 xml.. 答案是：假设列没有值意味着标签不会出现。为此我需要空标签

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T07:52:44.487

使用它的[API](http://docs.oracle.com/cd/B19306_01/appdev.102/b14258/d_xmlgen.htm#i1014818)，不要使用快速`getxml(string)`版本。

例如：

```
SQL> variable xml clob;
SQL> declare
  2    ctx number;
  3  begin
  4    dbms_lob.createtemporary(:xml, true, dbms_lob.call);
  5    ctx := dbms_xmlgen.newcontext('select * from foo');
  6    dbms_xmlgen.setnullhandling(ctx, dbms_xmlgen.EMPTY_TAG);
  7    dbms_xmlgen.getxml(ctx, :xml);
  8    dbms_xmlgen.closecontext(ctx);
  9  end;
 10  /

PL/SQL procedure successfully completed.

SQL> print xml

XML
--------------------------------------------------------------------------------
<?xml version="1.0"?>
<ROWSET>
 <ROW>
  <ID>1</ID>
  <A>a</A>
 </ROW>
 <ROW>
  <ID>2</ID>
  <A/>
 </ROW>
</ROWSET> 
```

# javascript - TinyMCE 插件“表格”

> ID：14472729
> 
> 赞同：0
> 
> 时间：2013-01-23T04:57:35.483
> 
> 标签：javascript, jquery, plugins, tinymce

我使用 TinyMCE 插件“表”。当我选择多个单元格时，我想知道它们有多少，并相应地执行一些操作。

请告诉我，如何实施？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T09:51:12.990

这似乎不可能开箱即用。您应该考虑复制插件并将您的特殊用例添加到代码中。

# c# - 如何获取方法详细信息？

> ID：14472730
> 
> 赞同：-1
> 
> 时间：2013-01-23T04:57:39.090
> 
> 标签：c#, .net

如何在 Visual Studio 2012 for C# 中找到方法工作详细信息（方法描述），类似于 eclips for java 中的方法描述，它给出方法签名和重载方法列表以及该方法的用途描述。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T04:59:25.560

如果在方法上添加了 XML 注释，那么您将在 Visual Studio intellisense 中看到这些注释。否则，您将看到方法的参数及其重载形式。XML 注释可以添加到方法中，`///`例如：

```
/// <summary>
/// Some method description to show in intellisense. 
/// </summary>
/// <param name="parameter1"></param>
/// <param name="parameter2"></param>
public static void SomeMethod(int parameter1, int parameter2)
{
} 
```

快捷方式是按`/`三下正斜杠，它会出现在方法上。它看起来像：

![在此处输入图像描述](../Images/d132df717f4a92327cc9ec8fa8a163ea.png)

您可能会看到更多关于：[XML 文档注释（C# 编程指南）](http://msdn.microsoft.com/en-us/library/b2s063f7.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T05:00:20.093

`Right click`关于方法和选择`Go to Definition`。或使用`F12`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T05:05:44.087

如果您将您的 Visual Studio 配置为 c#，您可以在光标位于方法括号中间时按 contrl+shift+space，然后您可以看到方法重载和...

# javascript - 扩展锚标签后更改背景图片+ CSS

> ID：14472732
> 
> 赞同：1
> 
> 时间：2013-01-23T04:58:16.583
> 
> 标签：javascript, jquery, html, css

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T05:24:38.577

我假设您有一个 javascript onclick（或类似的）来切换菜单项的样式以展开它。如果您在菜单项上有一个 ID，那么在触发的 JS 中，我将使用测试打开/关闭状态并根据需要覆盖或重置 CSS 项

```
document.getElementById("menuItem").style.backgroundImage = "url(black_t_arrow.gif)"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T05:40:43.540

您需要两个 CSS 类，一个用于折叠，一个用于展开。

HTML：

```
<a id="expander" class="close" href="#">Click to collapse/expand</a> 
```

CSS：

```
.close { background-image: url("/images/collapsed.gif"); }
.open { background-image: url("/images/expanded.gif"); } 
```

JavaScript：

```
/* Useful for multiple CSS classes. */
$('a#expander').click(function(e){
    e.preventDefault();
    var exp = $(this);
    if (exp.hasClass('open')) {
        exp.removeClass('open').addClass('close');
    } else {
        exp.removeClass('close').addClass('open');
    } 
}); 
```

*或者：*

CSS：

```
a#expander { background-image: url("/images/collapsed.gif"); } /* set default image */ 
.open { background-images: url("/images/expanded.gif"); } 
```

JavaScript：

```
/* Swap in/out the class open to override the default background. */
$('a#expander').toggleClass('open'); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-23T06:00:05.527

这似乎是 CSS sprites 的工作，如此[处](http://www.w3schools.com/css/css_image_sprites.asp)所述。我的 jsFiddle 解决方案在[这里](http://jsfiddle.net/amullins/TdUaL/1/)。

基本思想是创建一个包含两个箭头的图像。由于您将此图像用作背景，因此只会`<a>`显示填充标签内容的图像部分。要在一个图像和另一个图像之间切换，您需要做的就是更改 css`background-position`属性。

在您的 DOM 就绪函数内部：

```
$(".expended_div a").on("click", function() {
   if(this.css("background-position") == "0px -8px")
    this.css("background-position", "0px -31px");
   else
    this.css("background-position", "0px -8px");
 }); 
```

为此，请将“black_t_arrow.gif”更改为如下所示：

![箭头精灵](../Images/f9459a63e2c310d7d7e39ce2c6ffa716.png)

很酷的一点是第二张图片没有加载时间。它已经存在，但由于背景图像大于内容区域而被隐藏。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-23T05:10:34.000

# javascript - 如何获取字符串中的html元素数量？

> ID：14472736
> 
> 赞同：1
> 
> 时间：2013-01-23T04:58:28.833
> 
> 标签：javascript, jquery

如何获取字符串中 HTML 元素（HTML 标签）的数量？

例如我有这个字符串：

```
<div> some text
     <div>
           <label>some text</label>
     </div>
</div> 
```

现在我如何在这个字符串中找到 html 标签的数量？上述情况的结果将是 3。

我确实试过这个，认为它会工作，但它没有：

```
$('*').length; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T05:04:38.907

```
var s = "<div> some text<div><label>some text</label></div></div>";   
var length = $(s).find('*').andSelf().length; 
```

[http://jsfiddle.net/jCW7Z/](http://jsfiddle.net/jCW7Z/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T05:16:31.303

如果您使用的是 jQuery（并且看起来确实如此），最简单的方法是使用类似于以下的代码：

```
var count = $( yourString ).find('*').andSelf().length 
```

但是，如果您使用的是 vanilla javascript，则实现看起来更像这样：

```
var temp = document.createElement('div');
temp.innerHTML = yourString;

var count = temp.getElementsByTagName('*').length; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T05:00:44.707

1.  获取文档中的所有元素（document.getElementsByTagName('*')）
2.  对每个元素的元素的 className 属性进行正则表达式匹配

* * *

您可以使用 jQuery: $("html *") 它将返回 html 标签之间的所有元素

1.  对于名称，您必须使用 $("html *").attr('name')
2.  对于值 $("html *").val() 或 $("html *").attr('value')

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T05:04:11.370

可能的方法：[http ://api.jquery.com/length/](http://api.jquery.com/length/)

查看[使用 jQuery 查找字符串中的元素数](https://stackoverflow.com/questions/8868741/find-number-of-element-in-string-with-jquery)

例如

> $( '.myClass', myData ).length;

（尽管这可能不会显示最外面的标签）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-23T05:06:04.447

你可以这样做，

把绳子放在一些隐藏`div`的地方

```
$('#myHiddenDiv').html(string); 
```

然后

你可以在它下面生成几个孩子

这将告诉您正文下的 html 元素数量

```
var count = $("#myHiddenDiv> *").length; 
```

或者：

```
var count = $("#myHiddenDiv").children().length; 
```

你的 div 会是这样的

```
<div id="myHiddenDiv" style="display:none"></div> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-23T05:13:59.800

一个小的，自我记录的例子:)

```
<!DOCTYPE html>
<html>
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
<title>List Elements</title>
</head>
<body>
<div>some text
    <div>
        <label>some text</label>
    </div>
</div>
<script>
var x=document.getElementsByTagName('*');
console.log(x.length)
for (i=0;i<x.length;i++) {
    console.log(x[i]);
}
</script>
</body>

</html> 
```

# c# - 基于下拉选择asp.net的多ajax文件上传

> ID：14472739
> 
> 赞同：1
> 
> 时间：2013-01-23T04:59:08.650
> 
> 标签：c#, asp.net, ajax, file-upload, ajaxcontroltoolkit

基于下拉列表，我正在获取价值并需要用于 ajax 文件上传，现在的问题是我正在正确获取价值，我正在使用两个 ajax 文件上传（ajaxUpload1_OnUploadComplete 和 ajaxUpload2_OnUploadComplete），每当我单击上传控件时从两个控件上传文件转到一个上传方法（ajaxUpload1_OnUploadComplete）仅用于上传文件。我需要一个解决方案。提前致谢。

在 .cs

```
protected void DropDownList1_SelectedIndexChanged(object sender, EventArgs e)
    {

        Session["Value"] = DropDownList1.SelectedItem.Text;
    }

protected void ajaxUpload1_OnUploadComplete(object sender, AjaxControlToolkit.AjaxFileUploadEventArgs e)
    {
        String value = Session["Value"].ToString();
    }

 protected void ajaxUpload2_OnUploadComplete(object sender, AjaxControlToolkit.AjaxFileUploadEventArgs e)
    {
        String value1 = Session["Value"].ToString();
    } 
```

在 .aspx 中

```
 <asp:AjaxFileUpload ID="AjaxFileUpload1" AllowedFileTypes="jpg,jpeg" MaximumNumberOfFiles="10" ThrobberID="1" ContextKeys="1"  OnUploadComplete="ajaxUpload1_OnUploadComplete" runat="server"/>

 <asp:AjaxFileUpload ID="AjaxFileUpload2" AllowedFileTypes="jpg,jpeg"  ThrobberID="2"  MaximumNumberOfFiles="10" ContextKeys="2" OnUploadComplete="ajaxUpload2_OnUploadComplete" runat="server" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T05:07:17.390

我认为这是我之前询问过的 AjaxFileUpload 中的一个错误，除了解决此问题的解决方法外，从未得到任何答复。

```
private string ContextKey = "";
public AjaxFileUpload()
            : base(true, HtmlTextWriterTag.Div)
        {
            if (HttpContext.Current.Items["lastAjaxFileUploadContextKey"] == null)
            {
                HttpContext.Current.Items["lastAjaxFileUploadContextKey"] = 1;
            }
            else
            {
                HttpContext.Current.Items["lastAjaxFileUploadContextKey"] = (int)HttpContext.Current.Items["lastAjaxFileUploadContextKey"] + 1;
            }

            ContextKey = HttpContext.Current.Items["lastAjaxFileUploadContextKey"].ToString();
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-01T09:34:26.927

我也遇到了同样的问题，所以我只删除了第二个 Ajaxfileupload 控件，然后根据下拉选择的值上传文件。我只是使用单个文件上传控件，并添加 Dropdownlist selectedindexchanged 事件，因为您设置了相应的路径。

# php - $_FILES 字段“tmp_name”在 .JPG 文件扩展名上没有值

> ID：14472741
> 
> 赞同：33
> 
> 时间：2013-01-23T04:59:17.120
> 
> 标签：php, file-upload

当我测试具有此扩展名.JPG 的图像文件时，我正在制作上传脚本，我不知道 jpg 或 jpeg 之间有什么区别，但似乎 $_FILES 无法识别此文件类型。

我已经阅读了几个线程，$_FILES 在 mime 类型方面并不那么可靠，所以我决定使用 php 的 mime 类型函数`mime_content_type()`php's `getimagesize()`，`pathinfo()`虽然 pathinfo 返回文件名和类型，但我需要路径对于不存在的文件，所有函数都以 $_FILES['file']['tmp_name'] 作为参数传递。

因此，当我决定上传图像文件（例如 sample.JPG）时，出现了这个问题，我认为这些文件中的大多数都是来自相机的原始文件<-尽管我是这么认为的，但更重要的是我可以上传它们。 JPG、.jpg、jpeg、.png。除了.JPG之外，所有这些都可以正常工作。

主要问题是 $_FILES 中的字段 ['tmp_name'] 在上传 .JPG 时没有值。

遇到此问题的任何人都请分享您的解决方法或“您是如何做到的”之类的事情。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-01-23T05:04:22.340

如果`$_FILES[$field]['tmp_name']`为空，则文件尚未上传。你应该看看`$_FILES[$field]['error']`为什么。

FWIW，据我了解，mime-type in`$_FILES[]`是由浏览器提供的。

**更新**：这里有一些盆栽代码来处理所有文件上传错误：

```
 $message = 'Error uploading file';
        switch( $_FILES['newfile']['error'] ) {
            case UPLOAD_ERR_OK:
                $message = false;;
                break;
            case UPLOAD_ERR_INI_SIZE:
            case UPLOAD_ERR_FORM_SIZE:
                $message .= ' - file too large (limit of '.get_max_upload().' bytes).';
                break;
            case UPLOAD_ERR_PARTIAL:
                $message .= ' - file upload was not completed.';
                break;
            case UPLOAD_ERR_NO_FILE:
                $message .= ' - zero-length file uploaded.';
                break;
            default:
                $message .= ' - internal error #'.$_FILES['newfile']['error'];
                break;
        }
        if( !$message ) {
            if( !is_uploaded_file($_FILES['newfile']['tmp_name']) ) {
                $message = 'Error uploading file - unknown error.';
            } else {
                // Let's see if we can move the file...
                $dest .= '/'.$this_file;
                if( !move_uploaded_file($_FILES['newfile']['tmp_name'], $dest) ) { // No error supporession so we can see the underlying error.
                    $message = 'Error uploading file - could not save upload (this will probably be a permissions problem in '.$dest.')';
                } else {
                    $message = 'File uploaded okay.';
                }
            }
        } 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2014-01-16T10:19:25.970

检查你的`php.ini`，特别是这个设置

```
; Maximum allowed size for uploaded files.
; http://www.php.net/manual/en/ini.core.php#ini.upload-max-filesize
upload_max_filesize = 6M 
```

或者在您的 Apache Config 中执行此操作：

```
<Directory "/var/www/vhosts/path/to/your/directory/import/">
    php_value post_max_size 6M
    php_value upload_max_filesize 6M
</Directory> 
```

我还要说，如果您上传的文件大于您的 php.ini`upload_max_filesize`设置，PHP 不会在错误日志中报告错误，这很糟糕。例如，如果您在将其设置为`2M`（我认为这是默认设置）时上传了一个 6MB 的文件。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-02-03T16:16:22.167

发布答案，因为我的评分太低。

请记住在 php.ini 中设置最大文件大小上限后重新启动服务器。我在这个问题上花了几个小时认为这不是文件大小问题，同时我忘记了重新启动。重新启动后一切正常。

我希望这可以帮助某人。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-05-21T02:10:04.217

我遇到了同样的问题，并且对 .NET 平台的熟悉让你忘记了客户端 html 中发生的事情。

我的问题是我的表单有一个 MAX_FILE_SIZE 隐藏输入，它的值小于文件的等效字节。

你的表格应该有这个；

 **除此之外，您的表单标签必须包含**enctype="multipart/form-data"**

我认为最大文件大小以 kb 为单位，但它以字节为单位，这要归功于 stackoverflow 中的其他页面。

可能导致此问题的另一个原因是人们在之前的评论中提到的 php.ini 设置。您也应该可以`post_max_size = 200M`到 php.ini 文件。

如果您像我一样在 Windows 上进行开发，您可以在 C:\Windows\Temp 看到一个显示错误的转储文件，称为“php**VERSION**_errors.log”。它有助于。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-06-07T12:24:16.127

Seems as though it's a random problem because while I was making a script to upload CSV files, some CSV files would have no problem uploading but in other cases, `$_FILES['file'][tmp_name]` would be empty.

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-12-29T06:31:43.017

我遇到了 $_FILES 字段 'tmp_name' 对 .JPG 文件扩展名没有价值的问题，并通过几个步骤成功修复了它。这些措施将来可能会对某人有所帮助。

1.  首先，我实现了用户“staticsan”提供的 Switch Case 解决方案。链接在这里 - [https://stackoverflow.com/a/14472801/3681985](https://stackoverflow.com/a/14472801/3681985)。该解决方案帮助我跟踪了潜在问题，例如 php.ini 文件和文件夹权限中的参数。
2.  php.ini 文件被命名为 php.ini.default。更改参数 upload_max_filesize 和 post_max_size 没有产生任何结果，直到我将文件重命名为 php.ini。请记住对参数值进行试验。
3.  修复文件名问题后，我遇到了对必须移动上传的临时图像的文件夹的权限的挑战。我已经更改了权限，并且能够看到上传到文件夹中的图像。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-23T07:28:33.163

试试这个，看看会发生什么，

```
if (($_FILES['file']['type']) == "image/jpg" || ($_FILES['file']['type']) == "image/jpeg") {
                      //do uploading stuff here
                    }else{
                    echo 'File is not a valid JPG,JPEG';
                    } 
```**

# url - 颠倒推文和阿拉伯语（卷曲）

> ID：14472742
> 
> 赞同：0
> 
> 时间：2013-01-23T04:59:20.890
> 
> 标签：url, curl, twitter, arabic, topsy

我正在使用以下 URL 来获取所有通过 Topsy API提及波斯语/阿拉伯语单词**“سلام”的推文：**

[http://otter.topsy.com/search.json?q](http://otter.topsy.com/search.json?q) =سلام&page=1&perpage=100&mintime=1244160000&maxtime=1244163600&apikey=FAF7F2D0D8A143978CB7762CE35FCF99

但是，我得到的结果如下：

`{"request":{"parameters":{"page":"1","q":"سلام","maxtime":"1244163600","perpage":"100","mintime":"1244160000"},"response_type":"json","resource":"search","url":"http://otter.topsy.com/search.json?maxtime=1244163600&mintime=1244160000&page=1&perpage=100&q=%D8%B3%D9%84%D8%A7%D9%85"},"response":{"window":"custom","page":1,"total":0,"perpage":100,"last_offset":0,"hidden":0,"list":[],"offset":0}}`

API 将外来词“سلام”读取为：%D8%B3%D9%84%D8%A7%D9%85，因此不会产生任何结果。任何关于做什么的建议将不胜感激！

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T05:12:31.920

两者是等价的。`%D8%B3%D9%84%D8%A7%D9%85`是[HTML 编码的版本](http://www.w3schools.com/jsref/jsref_decodeuri.asp)。

# jira - jira 用户每周报告工作进度

> ID：14472746
> 
> 赞同：3
> 
> 时间：2013-01-23T04:59:25.513
> 
> 标签：jira

如何查看 jira 中用户每周完成/正在进行的任务？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T06:38:48.210

您的问题不是很清楚，您所说的*done/in progress*是什么意思？问题的状态？并通过说*我如何查看*您的确切意思？从 Jira 看到他们？发送每周邮件？

无论如何，如果说*完成/进行中*意味着问题已关闭/未关闭，并且您正在寻找正确的 JQL 查询，那么：

**上周关闭：**

```
project = Development and status = Closed and updated >= "-7d" 
```

**上周工作，但未关闭：**

```
project = Development and status != Closed and updated >= "-7d" 
```

**上周开业，但未关闭：**

```
project = Development and status != Closed and created >= "-7d" 
```

等等。有关更多查询选项，请访问[JIRA 高级搜索](https://confluence.atlassian.com/display/JIRA/Advanced+Searching)。如果您有更多问题，请随时提问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-09T19:50:56.330

我编写了一个简单的 cli 工具[jira-report](https://github.com/veelenga/jira_report)，它查询您的 jira 并将每周报告打印到控制台：

```
$ jira-report
Jira site address: https://jira.company.com
Username for 'https://jira.company.com': admin
Password for 'https://jira.company.com':
Connecting to 'https://jira.company.com'. Pls wait...

What was [admin] doing:

Created: 2
  WFM-7180 - Provide static context for log property in BasicHashAnalyzer
  TST-5862 - Unable to install Nginx on HP-UX with Java 6

Resolved: 8
  GSM-364 - Migration of existing scenario
  WFM-5865 - NullPointerException while finding categories
  TST-5864 - Some NGinx installation improvements
  TST-5863 - NGinx minimal dependency
  SDK-7139 - Move common interfaces and classes from into individual jar
  SDK-7138 - Move common interfaces and classes from into individual dll
  TST-7111 - Event.getDonotNotify doesn't indicate about agent's state
  TST-6985 - TST classes should have static Log fields

Reopened: 0

Closed: 5
  TST-6943 - Remove redundant org.apache.log4j dependency from common part
  TST-5862 - Unable to install NGinx on HP-UX with Java 6
  TST-5857 - Put back support for Jdk 1.6
  TST-5840 - NGinx fails to handle interaction initiated
  GSM-364 -  Migration of existing units 
```

好好享受！

# java - Eclipse RCP 插件应用程序在 Windows 7 中崩溃/冻结

> ID：14472751
> 
> 赞同：1
> 
> 时间：2013-01-23T04:59:54.120
> 
> 标签：java, windows-7, eclipse-plugin, swt

Eclipse RCP 插件应用程序，它混合了 SWT 和 swing/awt 窗口，在 Windows 7 64 位中随机崩溃。特别是当我打开 SWING/awt 对话框时。即使我在 .ini 文件中使用 -consoleLog 也无法调试，因为它也与应用程序一起挂起。

构建细节如下。JRE 版本：1.6_u04
NSIS 安装程序 .ini 配置：-vmargs-Xms64m -Xmx1024m

当我将 jre 更改为 1.6_u18 时，它工作正常。由于更新 18 提供了 win 7 支持。但是仍然有一些窗口冻结:(如果我将 -Xmx 值减少到 512m 那么它可以正常工作。很少会出现 Java 堆空间问题。

请指导我解决此问题的正确方法。另外让我知道我们是否需要调整操作系统中的堆空间？应用程序安装程序附带 JRE 1.6_u04 本身的捆绑包。Windows 7 中是否存在最大堆大小的问题？请指教 ！！

# iphone - 使用MailCode写邮件客户端有点麻烦

> ID：14472752
> 
> 赞同：1
> 
> 时间：2013-01-23T05:00:03.950
> 
> 标签：iphone, ios, objective-c

我正在尝试使用 MailCode 编写邮件客户端。当我运行这段代码

```
CTCoreAccount *account = [[CTCoreAccount alloc] init];
CTCoreFolder *folder;
BOOL success=[account connectToServer:@"imap.qq.com" port:143 connectionType:CONNECTION_TYPE_PLAIN authType:IMAP_AUTH_TYPE_PLAIN login:@"1029418889@qq.com" password:@"****"];
if(!success){
    NSLog(@"error");
}

folder = [account folderWithPath:@"INBOX"];
for (CTCoreMessage *msg in [folder messageObjectsFromIndex:0 toIndex:10]) {
       NSLog(@"%@" , msg.subject);
} 
```

它会提示：

> 在 for{} 块中找不到 messageObjectsFromIndex:toIndex！

这个方法没有在 MailCode 中定义？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T05:27:32.453

尝试`messagesFromSequenceNumber:to:withFetchAttributes:`改用，如下所示：

```
for (CTCoreMessage *msg in [folder messagesFromSequenceNumber:1 to:0 withFetchAttributes:CTFetchAttrEnvelope]) { 
```

# python - 如何正确集成 Filepicker.io、Django 和 S3

> ID：14472754
> 
> 赞同：1
> 
> 时间：2013-01-23T05:00:08.283
> 
> 标签：python, django, filepicker.io

我正在制作一个 Django 应用程序，它允许用户通过管理界面上传图片，然后通过 API 端点访问这些图像的 URL。在管理界面上，应该向用户呈现 Filepicker.io 小部件（以启用拖放功能等），并且应该将文件上传到 S3。我已经在我帐户的 Filpicker 管理页面中输入了我的 S3 凭据。

我的问题是如何将所有这些元素结合在一起。这是我项目中的相应文件：

```
# models.py
from django.db import models
from django_filepicker.models import FPFileField

# Add field introspection for FPFileField 
# See http://south.aeracode.org/wiki/MyFieldsDontWork
from south.modelsinspector import add_introspection_rules
add_introspection_rules([], ["^django_filepicker\.models\.FPFileField"])

class Product(models.Model):
    product_logo = FPFileField(upload_to='uploads') 
```

* * *

```
# forms.py
from django import forms
from django_filepicker.forms import FPFileField
from django_filepicker.widgets import FPFileWidget
from example.models import Product

class ProductForm(forms.ModelForm):
    class Meta:
        model = Product

    def __init__(self, *args, **kwargs):
        self.fields['product_logo'] = FPFileField(widget = FPFileWidget)
        super(ProductForm, self).__init__(*args, **kwargs) 
```

* * *

```
# views.py
from django.http import HttpResponse
from example.models import Product
import json

def example_view():
    result = []
    products = Product.objects.all()
    for product in products:
        # I want the S3 URL here!
        result.append(product.product_logo.url)
    return HttpResponse(json.dumps(result, indent=2)) 
```

我的问题是：

1.  Django 管理界面显示正常的 Django FileField 小部件，而我想要 FPFileWidget
2.  我希望图像文件上传到 S3（不是我网站的 /media 目录）
3.  我想检索 S3 URL 而不是 /media/xxxx URL。

例如，当前的典型响应是这样的：

```
[
  "/media/uploads/fp-file", 
  "/media/uploads/fp-file_1", 
  "/media/uploads/fp-file_2", 
  "/media/uploads/fp-file_3", 
  "/media/uploads/fp-file_4", 
  "/media/uploads/fp-file_5"
] 
```

但我想要类似的东西：

```
[
  "https://s3-ap-southeast-2.amazonaws.com/XXXXXXXXX/TBtOcRSNyBAZZuNBFOpA_blah.png", 
  "https://s3-ap-southeast-2.amazonaws.com/XXXXXXXXX/8ODleDuKRIOAglFs0sKl_etc.png", 
] 
```

* * *

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T07:58:26.743

您将需要更改`DEFAULT_STORAGE_BACKEND`为`s3`存储后端。请查看[.amazon-S3 后端`django-storages`](http://django-storages.readthedocs.org/en/latest/backends/amazon-S3.html)。

要`FPFileWidget`在管理面板上使用，请查看[Django Admin: Using a custom widget for only one model field](https://stackoverflow.com/questions/4176613/django-admin-using-a-custom-widget-for-only-one-model-field)。

更改这两个设置应该适合您。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T18:30:12.723

看看 FPUrlField，它应该可以满足您的需求。当前的 FP*Fields 没有管理界面，但如果您想回馈代码，我们很乐意接受拉取请求

# php - php计算器类

> ID：14472759
> 
> 赞同：1
> 
> 时间：2013-01-23T05:00:28.943
> 
> 标签：php, class

我一直在解决 PHP 脚本。

我想根据一组指令计算结果。指令由关键字和数字组成，每行以空格分隔。从文件加载指令并将结果输出到屏幕。可以指定任意数量的指令。指令是运算符（加、除、减、乘）。指令将忽略数学优先级。最后一条指令应该是“apply”和一个数字（例如“apply 3”）。然后用该数字初始化计算器，并将前面的指令应用于该数字。

```
[Input]
add 2
multiply 3
apply 3
[Output]
15 
```

这是我尝试过的，但我无法获得完成方法的逻辑

```
class Calculator {
    public $result = 0;
    public $queue = Array();
    public parseString($text) {
       // parse input string
       $cmds = explode(" ", $text);
       foreach($cmds as $cmd) {
          $cmd = trim($cmd);
          if(!$cmd) continue; // blank or space, ignoring
          $this->queue[] = $cmd;
       }

       // lets process commands
       $command = false;
       foreach($this->queue as $index => $cmd) { 
           if(is_number($cmd)) {
               // if it's number fire previous command if exists
               if(!$command || !method_exists($this, $command)) {
                   throw new Exception("Unknown command $command");
               }
               $this->$command($index, $cmd);
           }else{
               $command = $cmd;
           }
       }
    }
    public function apply($index, $number) {
       // manipulate $result, $queue, $number
    }
    public function add($index, $number) {
       // manipulate $result, $queue, $number
    }
    public function substract($index, $number) {
       // manipulate $result, $queue, $number
    }
}

$calculator = new Calculator();
$calculator->parseString('...'); 
```

我如何调用或切换加、除、乘、减以及如何区分和触发应用词

任何形式的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T05:20:50.040

您应该先处理申请，然后将其从队列数组中删除。在开始循环使用命令之前，只需测试应用命令并首先运行它。这简化了整个过程。

经过几分钟的实验和聊天，已经解决。

```
<?php
error_reporting(E_ALL);
class Calculator {

public $result = 0;
public $queue = array();

public function parseString($text) {

    // parse input string
    $split = explode(" ", $text); //This gets your input into new lines
    for ($i = 0; $i < count($split); $i += 2) $pairs[] = array($split[$i], $split[$i+1]);

    foreach ($pairs as $bits) {
        if ($bits[0] == "apply") {
            $this->apply($bits[1]); //Set result equal to apply.
            $this->queue[] = "output";
        } else {
            $this->queue[] = $bits; //Set the queue item as an array of (command, value).
        }
    }
    //var_dump($this->queue);
    //die;
    // lets process commands
    foreach ($this->queue as $index => $cmd) {
        if ($cmd == "output") {
            echo "Answer: " .$this->result;
            return;
        } else {
            switch($cmd[0]) {
                case "add":
                    $this->add($cmd[1]);
                    break;
                case "subtract":
                    $this->subtract($cmd[1]);
                    break;
                case "multiply":
                    $this->multiply($cmd[1]);
                    break;
                case "divide":
                    $this->divide($cmd[1]);
                    break;
                default:
                    echo "Unknown command!";
                    break;
            }
        }
    }
}

public function apply($number) {
    // manipulate $result, $queue, $number
    $this->result = $number;

}

public function add($number) {
    // manipulate $result, $queue, $number
    $this->result += $number;

}

public function subtract($number) {
    // manipulate $result, $queue, $number
    $this->result -= $number;

}

public function multiply($number) {
    // manipulate $result, $queue, $number
    $this->result *= $number;
}

public function divide($number) {
    // manipulate $result, $queue, $number
    $this->result /= $number;
}

} 
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T05:22:30.553

尝试使用[array_shift 和 array_pop](http://php.net/manual/en/ref.array.php)函数：

```
//pop the apply num off end off the queue
$result= array_pop($this->queue); 
//now pop the apply operator off end of the queue
$operator = array_pop($this->queue); 

//now get the first operator and numbers using array_shift
$operator = array_shift($this->queue); //get first operator
$num = array_shift($this->queue); //get first number

//loop perform operation on result using number till done.
while($num !== null)
{
  $result = $operator($result, $num);
  $operator = array_shift($this->queue);
  $num = array_shift($this->queue);
} 
```

# redirect - cflocation vs cfheader 用于 301 重定向

> ID：14472760
> 
> 赞同：8
> 
> 时间：2013-01-23T05:00:29.443
> 
> 标签：redirect, coldfusion, cflocation

我正在为我正在处理的项目“重命名”现有文件。为了保持向后兼容性，我保留了一个 cfm 文件以将用户重定向到新文件。

*   购买.cfm：旧
*   shop.cfm：新

为了尽可能保持一切干净，如果用户尝试访问 buy.cfm，我想发送 301 状态码响应。

我知道我可以将任何一个`cflocation`与`statuscode`属性一起使用

```
<cflocation url="shop.cfm" statuscode="301" addtoken="false"> 
```

或者我可以使用`cfheader`标签。

```
<cfheader statuscode="301" statustext="Moved permanently">
<cfheader name="Location" value="http://www.mysite.com/shop.cfm"> 
```

**是否有任何理由使用一种方法而不是另一种方法？**

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-23T05:32:27.237

我认为他们做同样的事情，`<cflocation>`更具可读性

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2017-03-22T15:42:34.160

**我在 ColdFusion 9 上对此进行了测试。**

有一个主要区别，那就是 cflocation 停止执行页面，然后重定向到指定的资源。

来自[Adob​​e ColdFusion 文档](https://helpx.adobe.com/coldfusion/cfml-reference/coldfusion-tags/tags-j-l/cflocation.html)：

> 停止执行当前页面并打开 ColdFusion 页面或 HTML 文件。

所以你需要这样做：

```
<cfheader statuscode="301" statustext="Moved permanently">
<cfheader name="Location" value="http://www.example.com/shop.cfm">
<cfabort> 
```

得到相当于这个：

```
<cflocation url="shop.cfm" statuscode="301" addtoken="false"> 
```

否则，如果其他代码在 cfheader 标记之后运行，您可能会遇到问题。我在修复一些将重定向插入到 application.cfm 文件中的代码时遇到了这个问题——使用 cfheader——而不中止页面处理的其余部分。

我还注意到，在响应标头中，cflocation 还相应地设置了以下标头：

```
Cache-Control: no-cache
Pragma: no-cache 
```

如果需要，如果将 cfheader 标记与 Location 一起使用，可能需要添加这些标头：

```
<cfheader name="Cache-Control" value="no-cache"> 
<cfheader name="Pragma" value="no-cache"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-13T21:22:12.300

为了详细说明 Andy Tyrone 的答案，虽然他们在某些情况下可能会做同样的事情，但 CFHEADER 方法让您可以更好地控制请求中传递的标头。这变得很有用，例如，如果您想将缓存控制标头发送到浏览器或内容交付网络，以便它们不会继续使用相同的旧重定向请求访问您的服务器。没有办法（据我所知）告诉 CFLocation 缓存重定向。

# c++ - C ++中访问器函数的分段错误

> ID：14472765
> 
> 赞同：2
> 
> 时间：2013-01-23T05:00:53.687
> 
> 标签：c++, memory-management

我正在为 C++ 课做家庭作业，遇到了一些困难。由于 item::operator= 调用的 item::name() 中“使用了大小为 8 的未初始化值”和“大小为 8 的无效读取”，我的程序出现了段错误。

```
#ifndef ITEM_H
#define ITEM_H

const double WEIGHT_DEFAULT = 1.0;
const int ITEM_NAME_LENGTH = 30;

class item {
public:
    // Constructors and deconstructor
    item();
    item(char* nme, double weight);
    virtual ~item();

    // Copy constructor
    item(const item& itm);

    // Overload assignment operator
    const item& operator=(const item& itm);

    // Overload inequality operator
    bool operator!=(const item&) const;

    // Mutators and accessors
    const char* name(void) const;
    double weight(void) const;
    void weight(double wght);
    void name(char* nme);

protected:
private:
    char* m_name;
    double m_weight;
};

#endif // ITEM_H 
```

以下是我认为有问题的部分实现：

```
... 

const item& item::operator=(const item& itm)
{
    if (strcmp(this->name(), itm.name()) != 0)
    {

        this->weight(itm.weight());
        strcpy(m_name, itm.name());
    }

    return *this;
}

const char* item::name(void) const {
    return m_name;
}

... 
```

如您所见，部分任务是使用 c 字符串，因此我被混乱的细节所困扰。我对指针和类的理解是，当同时使用两者时，我们需要实现析构函数、复制构造函数和重载赋值运算符。我已经完成了以上所有。我在 Stack Overflow 上查看了有关复制和交换习语的一些信息，并尝试实现它，但也无法让它与我的代码一起使用。

我的大脑变得疲惫不堪，试图弄清楚我哪里出错了。有人可以告诉我我错过了什么吗？

谢谢！

* * *

## 编辑

以下是构造函数、析构函数等：

```
item::item() {
    //ctor

    m_name = new char[ITEM_NAME_LENGTH];
    strncpy(m_name, " ", ITEM_NAME_LENGTH - 1);
    this->weight(WEIGHT_DEFAULT);

    return;
}

item::item(char* nme, double wght) {
    m_name = new char[ITEM_NAME_LENGTH];

    strncpy(m_name, nme, ITEM_NAME_LENGTH - 1);

    // We want to check for a rational value being
    // passed in to weight. In theory, an item has
    // to have *some* kind of weight, so we check
    // for a weight of 0\. If a weight of 0 has been passed in,
    // we instead initialize the item's weight to the
    // default weight (set in the header file).
    if (wght > 0.0) {
        this->weight(wght);
    } else {
        this->weight(WEIGHT_DEFAULT);
    }

    return;
}

item::~item() {
    //dtor

    // TODO: We need to clean up any variables here.
    delete[] m_name;
}

item::item(const item& itm) {
    // copy ctor
    this->weight(itm.weight());
    strncpy(m_name, itm.name(), ITEM_NAME_LENGTH - 1);

}

const item& item::operator=(const item& itm)
{
    if (strcmp(this->name(), itm.name()) != 0)
    {

        this->weight(itm.weight());
        strcpy(m_name, itm.name());
    }

    return *this;
}

bool item::operator!=(const item& itm) const
{
    return (strcmp(m_name, itm.name()) != 0);
} 
```

## 编辑 2

现在我已经停止尝试动态分配名称 c 字符串，我在权重函数上遇到内存错误......

```
double item::weight(void) const {
    return m_weight;
}

void item::weight(double wght)
{
    m_weight = wght;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T05:22:45.617

首先，您不需要显式地`return;`from`void`语句。

第二：创建复制构造函数时，您需要分配将用于保存该构造函数的内存的空间，就像您为常规构造函数所做的那样。

在你的复制构造函数中试试这个：

```
m_name = new char[ITEM_NAME_LENGTH]; 
```

编辑：为了完整起见，这就是我的“似乎正在工作”的代码：

```
#include <stdio.h>
#include <string.h>

const double WEIGHT_DEFAULT = 1.0;
const int ITEM_NAME_LENGTH = 30;

class item {
public:
    // Constructors and deconstructor
    item();
    item(char* nme, double weight);
    virtual ~item();

    // Copy constructor
    item(const item& itm);

    // Overload assignment operator
    const item& operator=(const item& itm);

    // Overload inequality operator
    bool operator!=(const item&) const;

    // Mutators and accessors
    const char* name(void) const;
    double weight(void) const;
    void weight(double wght);
    void name(char* nme);

protected:
private:
    char* m_name;
    double m_weight;
};

const item& item::operator=(const item& itm)
{
    if (strcmp(this->name(), itm.name()) != 0)
    {

        m_name = new char[ITEM_NAME_LENGTH];
        this->weight(itm.weight());
        strcpy(m_name, itm.name());
    }

    return *this;
}

const char* item::name(void) const {
    return m_name;
}

double item::weight(void) const {
    return m_weight;
}

void item::weight(double wght) {
    m_weight = wght;
}

item::item() {
    //ctor

    m_name = new char[ITEM_NAME_LENGTH];
    strncpy(m_name, " ", ITEM_NAME_LENGTH - 1);
    this->weight(WEIGHT_DEFAULT);

    return;
}

item::item(char* nme, double wght) {
    m_name = new char[ITEM_NAME_LENGTH];

    strncpy(m_name, nme, ITEM_NAME_LENGTH - 1);

    // We want to check for a rational value being
    // passed in to weight. In theory, an item has
    // to have *some* kind of weight, so we check
    // for a weight of 0\. If a weight of 0 has been passed in,
    // we instead initialize the item's weight to the
    // default weight (set in the header file).
    if (wght > 0.0) {
        this->weight(wght);
    } else {
        this->weight(WEIGHT_DEFAULT);
    }

    return;
}

item::~item() {
    //dtor

    // TODO: We need to clean up any variables here.
    delete[] m_name;
}

item::item(const item& itm) {
    // copy ctor
    this->weight(itm.weight());
    m_name = new char[ITEM_NAME_LENGTH];
    strncpy(m_name, itm.name(), ITEM_NAME_LENGTH - 1);

}

bool item::operator!=(const item& itm) const
{
    return (strcmp(m_name, itm.name()) != 0);
}

int main(int argc, char* argv[])
{
    item i("test",2.0);
    item b = i;
    item c;
    item d = c;
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T06:23:41.093

我想使用 std::string 作为练习的一部分，对吧？否则，这就是字符串处理的方式。您可以尝试的另一件事是避免字符串的动态分配。相反，只需使用`char m_name[ITEM_NAME_LENGTH];`. 顺便说一句：那是什么长度？如果它是名称中的最大字符数，则需要一个`+1`作为终止 NUL 的字符。

也就是说，还有一件事：在赋值运算符中，您比较`if(this != &other)`，即比较两个对象的地址。关键是要避免容易出错的自我分配。您的作业检查名称是否不同，然后才复制名称和重量。如果只是重量不同呢？

# python - Tkinter 确定键盘布局

> ID：14472766
> 
> 赞同：1
> 
> 时间：2013-01-23T05:01:13.873
> 
> 标签：python, tkinter, keyboard-layout

有没有办法在 Tkinter 中检测当前的键盘布局？

有必要为俄语、法语、希腊语等语言正确处理键盘加速器（有关详细信息，请参阅我的[其他问题](https://stackoverflow.com/questions/14455625/tkinter-international-bind)）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T12:03:11.700

不，Tkinter 中没有内置这样的功能。

为什么不让您的应用程序在应用程序第一次启动时询问用户每个特殊键在哪里？Apple 在 OSX 上做到了这一点——在我第一次启动全新安装时，它要求我按几个键。

您可以将焦点放在小部件中并绑定到`<Any-KeyPress>`，然后从中获取足够的信息以绑定到他们按下的任何键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-12-29T08:49:40.803

好像`keysym`是“？？” 如果布局不是英文。

```
def key_callback(e):
    # Generate Ctrl-V if current layout is not english
    if e.state & 4 > 0 and chr(e.keycode) == 'V' and e.keysym == "??":
        root.focus_get().event_generate("<<Paste>>")
root.bind("<Key>", key_callback) 
```

# python - Cherrypy在处理文件上传时只有端口问题？

> ID：14472767
> 
> 赞同：0
> 
> 时间：2013-01-23T05:01:20.177
> 
> 标签：python, python-3.x, python-imaging-library, cherrypy

我正试图让一个网站再次运行，它失去了一名开发人员和大量无证信息——迫切需要帮助。该站点正在使用以下配置，我的感觉是我没有正确启动cherrypy（cherryd？）。

该站点未使用基于名称的虚拟主机，使用 IP 地址一切正常/运行良好。我们没有使用 mod_python，cherrypy 不是以 apache 开头的。

我们通过.htaccess 中的重写规则将一些请求路由到cherrypy

```
RewriteRule ^ip/(.*) http://127.0.0.1:8081/$1 [proxy] 
```

配置文件：（cpconfig.conf）

```
[global]
server.socket_port = 8081 
```

启动cherryd的命令对我不起作用：

```
cherryd -d -i imageproc -c cpconfig.conf 
```

Cherrypy 似乎开始：

```
ENGINE Listening for SIGHUP.
ENGINE Listening for SIGTERM.
ENGINE Listening for SIGUSR1.
ENGINE Bus STARTING
ENGINE Started monitor thread '_TimeoutMonitor'.
ENGINE Started monitor thread 'Autoreloader'.
ENGINE Serving on 127.0.0.1:8081
ENGINE Bus STARTED 
```

我们的大多数应用程序都可以正常工作。该应用程序是一种设计工具，它使用输入和图像上传来在屏幕上呈现图像。文本输入工作正常。但是，当我们使用应用程序的文件上传部分时，文件似乎正在上传（根据 chrome 的进度指示器），然后它只是等待、超时并最终返回 502 代理错误？

在此等待/超时期间，我可以使用其他文本输入等，并且cherrypy 服务器快速响应.. 它只是在图像上窒息。

这是 Apache 显示的内容。长编码 URL 表示对画布上图像的更改，所有这些都返回 OK。但是随后文件上传失败..

```
[Tue Jan 22 19:56:11 2013] [debug] proxy_util.c(1513): [client 67.176.56.45] proxy: *: found reverse proxy worker for http://127.0.0.1:8081/render?w=805&h=470&z=0.2&l=%5B%7B%22t%22%3A%2233%22%2C%22b%22%3Afalse%2C%22i%22%3Afalse%2C%22u%22%3Afalse%2C%22a%22%3A%22c%22%2C%22fs%22%3A11%2C%22f%22%3A0%2C%22x%22%3A0%2C%22y%22%3A0%2C%22arc%22%3Afalse%2C%22o%22%3A0%2C%22r%22%3A0%2C%22cw%22%3Atrue%7D%2C%7B%22t%22%3A%22%22%2C%22b%22%3Afalse%2C%22i%22%3Afalse%2C%22u%22%3Afalse%2C%22a%22%3A%22c%22%2C%22fs%22%3A11%2C%22f%22%3A0%2C%22x%22%3A0%2C%22y%22%3A0%2C%22arc%22%3Afalse%2C%22o%22%3A0%2C%22r%22%3A0%2C%22cw%22%3Atrue%7D%2C%7B%22t%22%3A%22%22%2C%22b%22%3Afalse%2C%22i%22%3Afalse%2C%22u%22%3Afalse%2C%22a%22%3A%22c%22%2C%22fs%22%3A11%2C%22f%22%3A0%2C%22x%22%3A0%2C%22y%22%3A0%2C%22arc%22%3Afalse%2C%22o%22%3A0%2C%22r%22%3A0%2C%22cw%22%3Atrue%7D%2C%7B%22t%22%3A%22%22%2C%22b%22%3Afalse%2C%22i%22%3Afalse%2C%22u%22%3Afalse%2C%22a%22%3A%22c%22%2C%22fs%22%3A11%2C%22f%22%3A0%2C%22x%22%3A0%2C%22y%22%3A0%2C%22arc%22%3Afalse%2C%22o%22%3A0%2C%22r%22%3A0%2C%22cw%22%3Atrue%7D%2C%7B%22t%22%3A%22%22%2C%22b%22%3Afalse%2C%22i%22%3Afalse%2C%22u%22%3Afalse%2C%22a%22%3A%22c%22%2C%22fs%22%3A11%2C%22f%22%3A0%2C%22x%22%3A0%2C%22y%22%3A0%2C%22arc%22%3Afalse%2C%22o%22%3A0%2C%22r%22%3A0%2C%22cw%22%3Atrue%7D%2C%7B%22t%22%3A%22%22%2C%22b%22%3Afalse%2C%22i%22%3Afalse%2C%22u%22%3Afalse%2C%22a%22%3A%22c%22%2C%22fs%22%3A11%2C%22f%22%3A0%2C%22x%22%3A0%2C%22y%22%3A0%2C%22arc%22%3Afalse%2C%22o%22%3A0%2C%22r%22%3A0%2C%22cw%22%3Atrue%7D%5D&g=%5B%5D&b=, referer: http://97.107.141.248/design/new/1209
[Tue Jan 22 19:56:11 2013] [debug] mod_proxy.c(993): Running scheme http handler (attempt 0)
[Tue Jan 22 19:56:11 2013] [debug] mod_proxy_http.c(1940): proxy: HTTP: serving URL http://127.0.0.1:8081/render?w=805&h=470&z=0.2&l=%5B%7B%22t%22%3A%2233%22%2C%22b%22%3Afalse%2C%22i%22%3Afalse%2C%22u%22%3Afalse%2C%22a%22%3A%22c%22%2C%22fs%22%3A11%2C%22f%22%3A0%2C%22x%22%3A0%2C%22y%22%3A0%2C%22arc%22%3Afalse%2C%22o%22%3A0%2C%22r%22%3A0%2C%22cw%22%3Atrue%7D%2C%7B%22t%22%3A%22%22%2C%22b%22%3Afalse%2C%22i%22%3Afalse%2C%22u%22%3Afalse%2C%22a%22%3A%22c%22%2C%22fs%22%3A11%2C%22f%22%3A0%2C%22x%22%3A0%2C%22y%22%3A0%2C%22arc%22%3Afalse%2C%22o%22%3A0%2C%22r%22%3A0%2C%22cw%22%3Atrue%7D%2C%7B%22t%22%3A%22%22%2C%22b%22%3Afalse%2C%22i%22%3Afalse%2C%22u%22%3Afalse%2C%22a%22%3A%22c%22%2C%22fs%22%3A11%2C%22f%22%3A0%2C%22x%22%3A0%2C%22y%22%3A0%2C%22arc%22%3Afalse%2C%22o%22%3A0%2C%22r%22%3A0%2C%22cw%22%3Atrue%7D%2C%7B%22t%22%3A%22%22%2C%22b%22%3Afalse%2C%22i%22%3Afalse%2C%22u%22%3Afalse%2C%22a%22%3A%22c%22%2C%22fs%22%3A11%2C%22f%22%3A0%2C%22x%22%3A0%2C%22y%22%3A0%2C%22arc%22%3Afalse%2C%22o%22%3A0%2C%22r%22%3A0%2C%22cw%22%3Atrue%7D%2C%7B%22t%22%3A%22%22%2C%22b%22%3Afalse%2C%22i%22%3Afalse%2C%22u%22%3Afalse%2C%22a%22%3A%22c%22%2C%22fs%22%3A11%2C%22f%22%3A0%2C%22x%22%3A0%2C%22y%22%3A0%2C%22arc%22%3Afalse%2C%22o%22%3A0%2C%22r%22%3A0%2C%22cw%22%3Atrue%7D%2C%7B%22t%22%3A%22%22%2C%22b%22%3Afalse%2C%22i%22%3Afalse%2C%22u%22%3Afalse%2C%22a%22%3A%22c%22%2C%22fs%22%3A11%2C%22f%22%3A0%2C%22x%22%3A0%2C%22y%22%3A0%2C%22arc%22%3Afalse%2C%22o%22%3A0%2C%22r%22%3A0%2C%22cw%22%3Atrue%7D%5D&g=%5B%5D&b=
[Tue Jan 22 19:56:11 2013] [debug] proxy_util.c(1999): proxy: HTTP: has acquired connection for (*)
[Tue Jan 22 19:56:11 2013] [debug] proxy_util.c(2055): proxy: connecting http://127.0.0.1:8081/render?w=805&h=470&z=0.2&l=%5B%7B%22t%22%3A%2233%22%2C%22b%22%3Afalse%2C%22i%22%3Afalse%2C%22u%22%3Afalse%2C%22a%22%3A%22c%22%2C%22fs%22%3A11%2C%22f%22%3A0%2C%22x%22%3A0%2C%22y%22%3A0%2C%22arc%22%3Afalse%2C%22o%22%3A0%2C%22r%22%3A0%2C%22cw%22%3Atrue%7D%2C%7B%22t%22%3A%22%22%2C%22b%22%3Afalse%2C%22i%22%3Afalse%2C%22u%22%3Afalse%2C%22a%22%3A%22c%22%2C%22fs%22%3A11%2C%22f%22%3A0%2C%22x%22%3A0%2C%22y%22%3A0%2C%22arc%22%3Afalse%2C%22o%22%3A0%2C%22r%22%3A0%2C%22cw%22%3Atrue%7D%2C%7B%22t%22%3A%22%22%2C%22b%22%3Afalse%2C%22i%22%3Afalse%2C%22u%22%3Afalse%2C%22a%22%3A%22c%22%2C%22fs%22%3A11%2C%22f%22%3A0%2C%22x%22%3A0%2C%22y%22%3A0%2C%22arc%22%3Afalse%2C%22o%22%3A0%2C%22r%22%3A0%2C%22cw%22%3Atrue%7D%2C%7B%22t%22%3A%22%22%2C%22b%22%3Afalse%2C%22i%22%3Afalse%2C%22u%22%3Afalse%2C%22a%22%3A%22c%22%2C%22fs%22%3A11%2C%22f%22%3A0%2C%22x%22%3A0%2C%22y%22%3A0%2C%22arc%22%3Afalse%2C%22o%22%3A0%2C%22r%22%3A0%2C%22cw%22%3Atrue%7D%2C%7B%22t%22%3A%22%22%2C%22b%22%3Afalse%2C%22i%22%3Afalse%2C%22u%22%3Afalse%2C%22a%22%3A%22c%22%2C%22fs%22%3A11%2C%22f%22%3A0%2C%22x%22%3A0%2C%22y%22%3A0%2C%22arc%22%3Afalse%2C%22o%22%3A0%2C%22r%22%3A0%2C%22cw%22%3Atrue%7D%2C%7B%22t%22%3A%22%22%2C%22b%22%3Afalse%2C%22i%22%3Afalse%2C%22u%22%3Afalse%2C%22a%22%3A%22c%22%2C%22fs%22%3A11%2C%22f%22%3A0%2C%22x%22%3A0%2C%22y%22%3A0%2C%22arc%22%3Afalse%2C%22o%22%3A0%2C%22r%22%3A0%2C%22cw%22%3Atrue%7D%5D&g=%5B%5D&b= to 127.0.0.1:8081
[Tue Jan 22 19:56:11 2013] [debug] proxy_util.c(2153): proxy: connected /render?w=805&h=470&z=0.2&l=%5B%7B%22t%22%3A%2233%22%2C%22b%22%3Afalse%2C%22i%22%3Afalse%2C%22u%22%3Afalse%2C%22a%22%3A%22c%22%2C%22fs%22%3A11%2C%22f%22%3A0%2C%22x%22%3A0%2C%22y%22%3A0%2C%22arc%22%3Afalse%2C%22o%22%3A0%2C%22r%22%3A0%2C%22cw%22%3Atrue%7D%2C%7B%22t%22%3A%22%22%2C%22b%22%3Afalse%2C%22i%22%3Afalse%2C%22u%22%3Afalse%2C%22a%22%3A%22c%22%2C%22fs%22%3A11%2C%22f%22%3A0%2C%22x%22%3A0%2C%22y%22%3A0%2C%22arc%22%3Afalse%2C%22o%22%3A0%2C%22r%22%3A0%2C%22cw%22%3Atrue%7D%2C%7B%22t%22%3A%22%22%2C%22b%22%3Afalse%2C%22i%22%3Afalse%2C%22u%22%3Afalse%2C%22a%22%3A%22c%22%2C%22fs%22%3A11%2C%22f%22%3A0%2C%22x%22%3A0%2C%22y%22%3A0%2C%22arc%22%3Afalse%2C%22o%22%3A0%2C%22r%22%3A0%2C%22cw%22%3Atrue%7D%2C%7B%22t%22%3A%22%22%2C%22b%22%3Afalse%2C%22i%22%3Afalse%2C%22u%22%3Afalse%2C%22a%22%3A%22c%22%2C%22fs%22%3A11%2C%22f%22%3A0%2C%22x%22%3A0%2C%22y%22%3A0%2C%22arc%22%3Afalse%2C%22o%22%3A0%2C%22r%22%3A0%2C%22cw%22%3Atrue%7D%2C%7B%22t%22%3A%22%22%2C%22b%22%3Afalse%2C%22i%22%3Afalse%2C%22u%22%3Afalse%2C%22a%22%3A%22c%22%2C%22fs%22%3A11%2C%22f%22%3A0%2C%22x%22%3A0%2C%22y%22%3A0%2C%22arc%22%3Afalse%2C%22o%22%3A0%2C%22r%22%3A0%2C%22cw%22%3Atrue%7D%2C%7B%22t%22%3A%22%22%2C%22b%22%3Afalse%2C%22i%22%3Afalse%2C%22u%22%3Afalse%2C%22a%22%3A%22c%22%2C%22fs%22%3A11%2C%22f%22%3A0%2C%22x%22%3A0%2C%22y%22%3A0%2C%22arc%22%3Afalse%2C%22o%22%3A0%2C%22r%22%3A0%2C%22cw%22%3Atrue%7D%5D&g=%5B%5D&b= to 127.0.0.1:8081
[Tue Jan 22 19:56:11 2013] [debug] proxy_util.c(2308): proxy: HTTP: fam 2 socket created to connect to *
[Tue Jan 22 19:56:11 2013] [debug] proxy_util.c(2414): proxy: HTTP: connection complete to 127.0.0.1:8081 (127.0.0.1)
[Tue Jan 22 19:56:11 2013] [debug] mod_proxy_http.c(1723): proxy: start body send
[Tue Jan 22 19:56:11 2013] [debug] mod_proxy_http.c(1816): proxy: end body send
[Tue Jan 22 19:56:11 2013] [debug] proxy_util.c(2017): proxy: HTTP: has released connection for (*)
[Tue Jan 22 19:56:21 2013] [debug] proxy_util.c(1513): [client 67.176.56.45] proxy: *: found reverse proxy worker for http://127.0.0.1:8081/upload, referer: http://97.107.141.248/design/new/1209
[Tue Jan 22 19:56:21 2013] [debug] mod_proxy.c(993): Running scheme http handler (attempt 0)
[Tue Jan 22 19:56:21 2013] [debug] mod_proxy_http.c(1940): proxy: HTTP: serving URL http://127.0.0.1:8081/upload
[Tue Jan 22 19:56:21 2013] [debug] proxy_util.c(1999): proxy: HTTP: has acquired connection for (*)
[Tue Jan 22 19:56:21 2013] [debug] proxy_util.c(2055): proxy: connecting http://127.0.0.1:8081/upload to 127.0.0.1:8081
[Tue Jan 22 19:56:21 2013] [debug] proxy_util.c(2153): proxy: connected /upload to 127.0.0.1:8081
[Tue Jan 22 19:56:21 2013] [debug] proxy_util.c(2308): proxy: HTTP: fam 2 socket created to connect to *
[Tue Jan 22 19:56:21 2013] [debug] proxy_util.c(2414): proxy: HTTP: connection complete to 127.0.0.1:8081 (127.0.0.1)
[Tue Jan 22 20:01:22 2013] [error] [client 67.176.56.45] (70007)The timeout specified has expired: proxy: error reading status line from remote server 127.0.0.1, referer: http://97.107.141.248/design/new/1209
[Tue Jan 22 20:01:22 2013] [debug] mod_proxy_http.c(1401): [client 67.176.56.45] proxy: read timeout, referer: http://97.107.141.248/design/new/1209
[Tue Jan 22 20:01:22 2013] [error] [client 67.176.56.45] proxy: Error reading from remote server returned by /ip/upload, referer: http://97.107.141.248/design/new/1209
[Tue Jan 22 20:01:22 2013] [debug] proxy_util.c(2017): proxy: HTTP: has released connection for (*) 
```

如果有更好的方式来传达日志，请让我知道什么是首选..

不管怎样，8081上没有别的东西在听……

这是否表明应用程序本身存在与图像上传有关的某种错误？我已经尝试将应用程序代码恢复到一切正常的时间点，按照上述（cherryd）杀死并重新启动cherrypy，但它仍然无法正常工作。

**新信息：** 像这样运行我的应用程序：python imageproc.py

有诀窍，因为我的应用程序中有一个快速启动调用。没有端口问题，图像将上传，一切正常。但是当然关闭术语窗口会终止该过程。所以我仍在寻找正确的方法来让cherrypy离开地面。

就像我说的迫切需要任何指针..谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T13:26:53.713

很可能您的图像大小大于 CherryPy 设置的默认允许请求实体大小（即 100Mb IIRC）。

当请求实体大于阈值时，CherryPy 中止请求并返回 413 错误代码。

尝试在全局配置中设置以下值：

```
[global]
server.max_request_body_size = 20971520000 
```

这会将其设置为 200Mb。

**编辑：**这是将 CherryPy 进程变成守护进程的方法：

```
import cherrypy

class Root(object):
    @cherrypy.expose
    def index(self):
        return "hello world"

if __name__ == '__main__':
    cherrypy.config.update({'server.socket_port': 8081,
                            'server.socket_host': '0.0.0.0'})

    from cherrypy.process.plugins import Daemonizer
    cherrypy.config.update({'log.screen': False})
    Daemonizer(cherrypy.engine).subscribe()

    cherrypy.quickstart(Root()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T18:49:28.320

我正在回答这个问题，因为我剩下的唯一问题与原始问题无关。

我的应用程序调用了cherrypy.quickstart，所以我只需要启动我的应用程序：

```
python appname.py& 
```

所以使用cherryd是错误的方法，并导致上面提到的奇怪的端口/代理相关错误。

作为一个新手，我花了一段时间才弄清楚在我的命令末尾添加“&”会在后台运行我的应用程序，这样我就可以关闭我的终端窗口。

这种组合使我能够在事情破裂之前回到我们在这个项目中的位置。

我剩下的问题是关于保持cherrypy服务启动并使用cron运行，但这是一个单独的问题，我将进一步研究..

# javascript - HTML 表单不允许输入空格

> ID：14472768
> 
> 赞同：2
> 
> 时间：2013-01-23T05:01:22.203
> 
> 标签：javascript, html, ajax

我有一个通过 ajax 加载到灯箱的 HTML 表单。

[您可以在http://www.powerbuy.com.au/](http://www.powerbuy.com.au/)的主页上查看该行为

在页面的右下角有一个链接“让我们为您协商交易”单击此链接会创建一个灯箱并加载表单。

问题是您不能在任何字段中输入空格，它似乎接受任何其他字符、数字和符号，但不接受空格。

我查看了 JS 中任何 keyCode 的代码，但我找不到与空格相关的任何内容。

你能复制这个问题吗？你能告诉我发生了什么事吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T09:20:22.503

您可以简单地编写以下代码：

```
$(document).ready(function(){ 
    $("#id").keydown(function(event) {
    if(event.shiftKey)
    {
        event.preventDefault();
    }
    if (event.keyCode == 32)    {
        event.preventDefault();
    }

    });
}); 
```

“id”是您的文本字段“id”属性值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-13T15:09:26.217

您可以通过如下设置来修复它`enableKeys : false`：

```
Shadowbox.open({
  title      : "Nouvel Addressee",
  content    : $("addressee-lightbox-wrapper").innerHTML,
  player     : "html",
  width      : 920,
  height     : 540,
  enableKeys : false,
  options    : {
    onFinish: function() {
      Event.addBehavior.reload();
    }
  }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T05:51:21.147

原因未知：通过将灯箱弹出窗口从 ajax 加载转换为 iframe 解决。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2014-10-22T11:26:36.907

我有类似的问题。发现，它有一些带有“enableKeys”选项的东西。

有更多方法可以设置此选项，但由于某种原因，只有这个对我有用：

```
Shadowbox.init({

skipsetup: true,
enableKeys: false   

}); 
```

以下是提到的其他一些解决方案[http://shadowbox.1309102.n2.nabble.com/Can-t-add-space-in-text-input-td4518072.html](http://shadowbox.1309102.n2.nabble.com/Can-t-add-space-in-text-input-td4518072.html)

# php - 生成两个随机数第一个小于第二个php

> ID：14472770
> 
> 赞同：2
> 
> 时间：2013-01-23T05:01:32.417
> 
> 标签：php, random, numbers, range, conditional-statements

我需要使用 PHP 生成两个随机数。这很简单，但条件是第一个数字的值应小于第二个数字。

所以假设我需要生成 10 到 1000 之间的下限和上限。所以我需要在这个范围内的两个随机数。第一个数字作为下限（可能是 20）和上限高于值所以（可能是 100）。

谢谢艾哈迈尔。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T05:04:16.550

```
$num1 = rand(20, 999);
$num2 = rand($num1+1, 1000); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T05:11:24.477

```
$smaller = mt_rand(10, 999); // This generates a number between 10 and 999.
$bigger = mt_rand($smaller+1, 1000); // generates a bigger number up to 1000 based on the smaller number 
```

只生成 10 到 1000 之间的两个数字然后对它们进行排序有什么问题吗？还是第二个的大小必须取决于第一个？因为如果没有，

```
$rand = mt_rand(10, 999);
$rand2 = mt_rand(10, 999);
while($rand === $rand2) $rand2 = mt_rand(10, 999);
$bigger = max($rand, $rand2);
$smaller = min($rand, $rand2); 
```

# less - 在 LESS 中引用具有多级嵌套的父级

> ID：14472776
> 
> 赞同：5
> 
> 时间：2013-01-23T05:02:11.887
> 
> 标签：less

我有以下更少：

```
.container {
    .column, .columns {
        .one& {
            width: 40px;
        }
    }
} 
```

当我编译时，我的 CSS 得到以下信息：

```
.one.container .column,
.one.container .columns {
    width: 40px;
} 
```

但我希望得到：

```
.container .one.column,
.container .one.columns {
    width: 40px;
} 
```

LESS中的父运算符 ( `&`) 似乎实际上引用了我期望的祖父母。我是否正确嵌套了东西？文档没有显示任何嵌套深度超过一层的示例。我可以通过嵌套实现我想要的输出吗？

我正在使用通过 npm 安装的 lessc 1.3.3。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T10:01:51.263

重要的`&`是更多地将其视为“父系”组合器，而不是“父级”组合器。也就是说，它将整个嵌套的选择器字符串带到该点（无论有多少层深），并充当字符串替换持有者的等价物。因此，使用您的示例的简化版本...

```
.container {
    .column {
        .one& {
            width: 40px;
        }
    }
} 
```

...该级别的选择器字符串是`.container .column`. 这就是在 的位置“替换”的内容`&`，因此当您像上面那样连接到*开头*时，它会附加在*整个选择器字符串的**开头*，您最终会得到：

 *```
.one.container .column {width 40px;} 
```

但是如果你从*最后*`&`连接（和之间没有空格`.`）那么......

```
.container {
    .column {
        &.one {
            width: 40px;
        }
    }
} 
```

...变成：

```
.container .column.one {width 40px;} 
```

最后一个确实是您想要的*班级组合*，尽管与您希望的顺序不同。但是顺序对浏览器来说并不重要，`.one.column`或者`.column.one`是相同的，它只是意味着一个元素同时应用了两个单独的类，如下所示：

```
<div class="column one"></div>
<div class="one column"></div> 
```

这两者是等价的，并且要么`.one.column`或`.column.one`作为选择器将选择这两个元素，因为这两个元素都有两个类。

如果顺序对你来说绝对重要（你必须让你生成的 CSS 符合你的要求），那么你需要做一些这样的重复：

```
.container {
    .column {
       ...generic column code here...
    }
    .one {
        &.column {
            width: 40px;
            ...any other code dependent on combination of .one.column here...
        }
    }
} 
```*

# asp.net-mvc - ASP.NET MVC 从线程保持会话处于活动状态

> ID：14472777
> 
> 赞同：0
> 
> 时间：2013-01-23T05:02:18.327
> 
> 标签：asp.net-mvc, multithreading, session

我有一个场景，我从一个线程将执行一些后台工作的操作启动一个新线程。有时，如果线程需要更长的时间来完成工作，会话似乎会过期。有什么方法可以让会话在新线程中保持活跃？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T07:03:16.803

您应该避免在后台线程中访问任何 HttpContext 资源，例如 Session。您可以将此线程所需的信息作为参数传递。

例如：

```
public ActionResult Index()
{
    // Get the value you will need from the session
    SomeModel model = (SomeModel)Session["myModel"];

    // start a new Thread
    Thread thread = new Thread(DoWork);
    thread.Start(model);

    return View();
}

private void DoWork(object state)
{
    SomeModel model = (SomeModel)state;
    // do the work here without ever accessing the HttpContext
} 
```

如果您需要来自多个来源的信息，例如会话、模型、Cookie 等等……只需构建一个新模型，将它们全部聚合起来：

```
public class MyModel
{
    public SomeModelFromSession SessionData { get; set; }
    public SomeModelFromCookie CookieData { get; set; }
    ...
} 
```

然后在启动时将此新模型传递给您的后台线程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T19:14:38.987

当您将文件复制到本地文件系统时，将会话/必要数据序列化为具有相同文件名的 json 文件（或将该信息写入数据库）。

我的建议是；

*   这应该由单独的 Windows 服务或在后台运行的可执行文件处理。
*   如果您希望 Web 应用程序处理此问题，您可以在 Web 应用程序启动时创建一个线程，并检查上传的新文件以上传到 S3。但这样做的缺点是，您无法知道 IIS 何时回收 Web 应用程序，并且在某些情况下，您可以拥有多个同一个 Web 应用程序的实例（取决于应用程序池的配置）。所以你必须优雅地处理应用程序重启和拥有多个实例。
*   或者也许你可以使用队列系统（MSMQ，数据库也许）
*   你甚至可以使用 Redis 或数据库。

# pdf-generation - 印地语字符为???? 在 PDF/A 中

> ID：14472778
> 
> 赞同：-1
> 
> 时间：2013-01-23T05:02:26.943
> 
> 标签：pdf-generation

我正在使用 jod converter3（使用 open office 3x）将 html 模板转换为 PDF/A 格式。这在开发环境中运行良好（使用 Eclipse 和 JRE）。但是，在生产（Linux，JBoss 5）上执行相同的程序时，一些模板在输出 pdf 中有印地语字符，带有??? 对英文字符工作正常

尝试通过没有应用服务器的命令行运行我的程序仍然是相同的输出。

java -cp bin:PATH/JARNAME.jar:lib ConvertToPDFA encoding=UTF8 x（不工作）。

HTML 也是 UTF-8 编码的。

请提出问题区域。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T07:22:20.027

检查位置 usr\share\fonts\TTF 下的印地语字体 tiff。如果缺少，则创建相同的并放置所需的字体 tiff。

# macos - 在 OSX 上构建 pygobject 的说明

> ID：14472780
> 
> 赞同：3
> 
> 时间：2013-01-23T05:02:31.927
> 
> 标签：macos, macports, homebrew, pygobject

你如何在 OSX 上构建 pygobject（Python 中的 GTK+ 3 和自省）？我不是 mac 用户——我希望帮助我的同事在他们的 mac 书籍上运行我为 Linux 编写的应用程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T01:27:23.993

在 GNOME wiki 上找到这些说明：[GTK+/OSX/Building](https://wiki.gnome.org/action/show/Projects/GTK+/OSX/Building)和[GTK+/OSX/Python](https://wiki.gnome.org/Projects/GTK+/OSX/Python)

# pygame - 在 Pygame 中，如何以无头模式保存屏幕图像？

> ID：14472781
> 
> 赞同：3
> 
> 时间：2013-01-23T05:02:33.447
> 
> 标签：pygame

我试图通过将每个帧保存为图像而不是使用 ffmpeg 将它们拼接在一起来捕获我的游戏视频。我遵循了这些脚本的示例：

*   [http://www.pygame.org/wiki/DummyVideoDriver](http://www.pygame.org/wiki/DummyVideoDriver)
*   [http://www.pygame.org/wiki/HeadlessNoWindowsNeeded](http://www.pygame.org/wiki/HeadlessNoWindowsNeeded)

这是我的代码的基本逻辑：

```
os.environ['SDL_VIDEODRIVER'] = 'dummy'
pygame.init()
pygame.display.set_mode((1,1))
screen = pygame.Surface((400, 400)).convert()

# screen becomes attribute of game object: game.screen
game = MyGame(screen)

while game.running:
    game.update()   # <--- updates game.screen
    pygame.display.flip()
    pygame.image.save(game.screen, 'frame-%03d.png' % (game.frame_num))

create_video_using_ffmpeg() 
```

如果我注释掉将视频驱动程序设置为“虚拟”的第一行，则图像会按预期显示。但它会打开一个（小）窗口，因此脚本在作为 cronjob 运行时会失败。未注释该行，我只得到一系列空白的黑色图像。

知道出了什么问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T06:33:22.170

我可以通过在作为我的屏幕的基本图像表面绘制一个矩形来解决这个问题：

```
os.environ['SDL_VIDEODRIVER'] = 'dummy'
pygame.init()
pygame.display.set_mode((1,1))

# surface alone wouldn't work so I needed to add a rectangle
screen = pygame.Surface((400, 400), pygame.SRCALPHA, 32)
pygame.draw.rect(screen, (0,0,0), (0, 0, 400, 400), 0)

# screen becomes attribute of game object: game.screen
game = MyGame(screen)

while game.running:
    game.update()   # <--- updates game.screen
    pygame.display.flip()
    pygame.image.save(game.screen, 'frame-%03d.png' % (game.frame_num))

create_video_using_ffmpeg() 
```

也许其他人可以解释为什么这会有所作为。（我最初是否使用了错误的表面参数？）

这成功地作为一个 cronjob 工作。

# java - Component 类的 processEvent() 方法

> ID：14472783
> 
> 赞同：1
> 
> 时间：2013-01-23T05:02:41.153
> 
> 标签：java, event-handling, awt, event-listener

在处理各种事件时，我的一般策略是创建一个`xxxHandler`像`MouseHandler`,`WindowHandler`等这样的类，它扩展了`xxxAdapter`Java 提供的相应类。

我刚刚回顾了一些关于处理事件的其他文本，它说每当您扩展任何`EventListener`接口时，例如`ActionListener`，您必须调用`enableEvents(AWTEvent e)`构造函数中的方法并在`super.processXXXEvent()`生成事件时调用。

我发现这种方法非常令人困惑。这些方法具有访问说明符，`protected`因此我假设这些方法仅供内部使用？

*   这些方法到底是做什么用的？*   他们真的需要处理事件吗？*   `actionPerformed()`与通常的 ,等相比，它们是否提供任何好处`mouseMoved()`，您可以在其中添加代码来处理方法定义中的事件而不调用任何`super`方法？

需要帮助。简单的词受到高度赞赏，而不是技术性的胡言乱语。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-31T15:58:12.757

> 这些方法到底是做什么用的？

该`processEvent()`方法过滤到达它的事件类型。此方法的参数是 type`AWTEvent`类型。过滤后，该方法调用相应的`processXYZEvent()`方法，该方法获取相应的事件对象。

例如，`processMouseEvent(MouseEvent)`

该`processXYZEvent()`方法通过将事件对象传递给处理程序来通知相应的侦听器该事件。

例如，`processMouseEvent(MouseEvent)`通知已注册的鼠标侦听器。

该`enableEvents()`方法决定将什么事件提供给该`processEvent()`方法。此方法不能被覆盖，因为它是最终的。然而，这可以在类的子类中访问，`Component`以决定组件支持什么类型的事件。

> 他们真的需要处理事件吗？

他们的作用如上所述。这意味着它们是处理事件所必需的，因为您只能在创建和分派事件对象并且这些方法执行此操作时才能处理事件。

# sql - SQL Server：没有BEGIN TRANSACTION的回滚

> ID：14472785
> 
> 赞同：6
> 
> 时间：2013-01-23T05:02:54.820
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2005

有没有一种方法可以在没有 ROLLBACK 的情况下回滚到事务的先前状态`BEGIN TRANSACTION`？

```
delete from table1;
ROLLBACK 
```

信息：

> *ROLLBACK TRANSACTION 请求没有对应的 BEGIN TRANSACTION。*

任何输入都会有很大帮助。

谢谢 ！！！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-23T05:43:31.250

要在明确设置 IMPLICIT_TRANSACTIONS ON 时扩展 gerrytans 答案，可以使用 ROLLBACK。请参阅与此相关的[MSDN 文档](http://msdn.microsoft.com/en-us/library/ms187807.aspx)。请注意，这不是默认的[自动提交事务模式](http://msdn.microsoft.com/en-us/library/ms187878%28v=sql.105%29.aspx)。

这使我可以运行如下语句；

```
SET IMPLICIT_TRANSACTIONS ON

INSERT INTO my_table (item_type, start_date_time)
VALUES ('TEST', CURRENT_TIMESTAMP)

ROLLBACK

-- Shouldn't return the 'TEST' value inserted above.
SELECT * FROM my_table ORDER BY start_date_time DESC 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-23T05:19:31.227

正如 SQL 服务器错误告诉你的那样——不，你不能。很多人会很好奇，你为什么首先想要这个。

请记住，SQL Server 有一个隐式事务——即对于您在没有显式 BEGIN TRAN 的情况下发出的 DML，SQL Server 将在屏幕后面为您启动和完成一个事务。

ROLLBACK 的一个常见用途是用于错误处理。如果在事务中间的某个地方您意识到由于用户输入错误或其他原因而无法继续进行 - 那么合理的操作是 ROLLBACK 以返回起点

可能发生的最糟糕的事情是将您的数据状态留在“中间的某个地方”。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-23T05:09:28.913

您必须有一个`BEGIN TRANSACTION`才能使用该`ROLLBACK`命令。你不能回到以前的状态。

# iphone - 从部署到开发手机的工作应用程序在 xCode 中打开一个项目

> ID：14472791
> 
> 赞同：1
> 
> 时间：2013-01-23T05:03:17.190
> 
> 标签：iphone, ios, xcode

我是一个相当新的 iOS 开发人员，仍然处于学习曲线的陡峭部分。

去年年底，我完成了一个应用程序并让它在我的旧 iPhone 4 上成功运行。在几个月没有接触该项目之后，我随后升级了 xCode 等以与 iPhone 5 一起使用。

不知何故，我在 xCode 中的应用出了点问题。我在发布时不断遇到崩溃，并尝试了所有我能想到（和搜索）来解决的问题。

我想做的是从 4 上的工作应用程序中打开 xCode 中的项目，因为我知道它可以工作。可能吗？？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T05:47:42.103

您不能从 iPhone 获取应用程序并在 Xcode 中运行。如果您有用于构建该应用程序的源代码，则可以使用它在您的 Xcode 中运行。一旦你在 iPhone 中安装了一个应用程序，你就不能以正常方式或使用 Xcode 将它转换回源代码。

# css - 垂直对齐与绝对定位

> ID：14472794
> 
> 赞同：2
> 
> 时间：2013-01-23T05:03:58.780
> 
> 标签：css, vertical-alignment, css-tables

在下面的代码中，我试图使绿色 div.middle 元素中的元素垂直对齐到中间。

* * *

我已经尝试过表格单元格方法，但无法正常工作。我听说这是由于绝对定位，但没有成功尝试了这个解决方案： [CSS - Vertical align table-cell don't work with position absolute](https://stackoverflow.com/questions/8896965/css-vertical-align-table-cell-dont-work-with-position-absolute)

这似乎是由于 .table-cell 没有高度 - 我希望它的高度等于其高度不同的父容器。

* * *

jsfiddle：

[http://jsfiddle.net/q5jKM/1/](http://jsfiddle.net/q5jKM/1/)

* * *

有谁知道让绿色 div.middle 元素垂直对齐到中间的方法？任何方法都可以。它只需要能够处理其可变高度。只有css可以吗？或者我必须加入一些 jQuery 吗？

* * *

编辑：

由于浏览器支持并被新标准取代，box-align 也不是一个可行的解决方案。

* * *

CSS

```
 html,body{height:100%;margin:0}
#sidebar {
    width: 22em;
    position:fixed;
    top: 0;
    bottom: 0;
    left: 0;
    z-index:2;
    color: #ffffff;
    background-color: #333333;  
    overflow:auto;
    height: 100%;
}

#sidebar .nav {
    width: 3em;
    float: right;
    background-color: #2e2e2e;
    border-left: 2px groove #454545;
    height: 100%;
    position:relative;
    min-height:34em;    
}

#sidebar .content {
    height: 100%; 
    width: 16.875em; /*    17-(2/16)   - 20em - .nav - nav border*/
    float:left; 
    position:relative;
    min-height:34em;
}

#sidebar .top {
    position:absolute;
    top:0;
}
#sidebar .bottom {
    position:absolute;
    bottom:0;
}

#sidebar .middle {
    position: absolute;
    bottom: 12em;       /*  3.125*3  */
    top: 16em;          /*  3.125*4  */
    background: green;
}

.content .middle {
    overflow:auto;
}

#sidebar .content > div {width: 16.875em; } /*.top .middle .bottom*/
#sidebar .nav > div {width:3em; } /*.top .middle .bottom*/

    /*table-cell trying get vertical-align working*/
#sidebar .table-cell {display:table-cell; vertical-align: middle; }

#sidebar .content p, #sidebar .content li, #sidebar .content img {font-size: .75em; color: #dddddd;}

#sidebar ul {margin:0; padding: 0;}

#sidebar .nav li {
    padding: .5625em;
    list-style:none;
}
#sidebar .nav li img {
    height: 1.875em;
    width: 1.875em
}

#sidebar .nav .top li { border-bottom: 2px groove #454545 }
#sidebar .nav .bottom li { border-top:  2px groove #454545 }

.content li {
    position:relative;
    display:block;
    background-color: #444;
    padding: .72em;
    border-radius: .8em;
    border-bottom: 1px solid #292929;
    border-top: 1px solid #4c4c4c;
    text-align: center;
    font-size: 1em;
    letter-spacing: .1em;
    font-weight: normal;
    height: 1.2em;
}

.content li:after {
    content:"";
    position:absolute;
    display:block; 
    width:0;
    top:.11em; /* controls vertical position */
    right:-.852em; /* value = - border-left-width - border-right-width */
    border-style:solid;
    border-width:1.2em 0 1.2em 1.2em;
    border-color:transparent #444;
}

.content .top li{margin: .95em 0 1.9em 0;}
.content .bottom li{margin: 1.9em 0 .95em 0;}

.content .logo {
    text-align: center;
    padding: 1em 0 2em 0;
    width: 100%;
    border-bottom: 2px groove #454545;
}
.content p.welcome {
    text-align: center;
    line-height: 1.5em;
    margin: 1em 0;
} 
```

HTML

```
<div id="sidebar">

            <div class="nav">
            <div class="top">
            <ul>
                <li><img src="_images/attributes/attribute2.svg"></li>
                <li><img src="_images/attributes/attribute2.svg"></li>
                <li><img src="_images/attributes/attribute2.svg"></li>
                <li><img src="_images/attributes/attribute2.svg"></li>
            </ul>
            </div>
            <div class="middle"><div class="table-cell"><p>test</p></div></div>
            <div class="bottom">
            <ul>
                <li><img src="_images/attributes/attribute2.svg"></li>
                <li><img src="_images/attributes/attribute2.svg"></li>
                <li><img src="_images/attributes/attribute2.svg"></li>
            </ul>
            </div>
            </div>

            <div class="content">
                <div class="top">
                <ul>
                    <li>SIDEBAR LINK</li>
                    <li>SIDEBAR LINK</li>
                    <li>SIDEBAR LINK</li>
                    <li>SIDEBAR LINK</li>
                </ul>
                </div>
                <div class="middle"><div class="table-cell">
                <div class="logo"><img src="_images/g.svg"></div>
                <p class="welcome">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Mauris dictum tellus viverra neque bibendum in mattis ante dignissim. Nam mattis feugiat lorem porttitor adipiscing. Aliquam erat volutpat. Nunc feugiat magna vitae mauris egestas euismod. In hac habitasse platea dictumst. Praesent magna sem, malesuada non fermentum vel, luctus quis mauris. Duis quam purus, ornare vitae eleifend sed, malesuada eget libero. Phasellus sed lorem risus, nec placerat urna. In magna turpis, accumsan ac egestas quis, dictum vel massa. Nulla vitae magna arcu. Maecenas sit amet vestibulum urna. Integer feugiat dignissim leo sed ornare. Maecenas auctor ultricies dui, pulvinar tincidunt velit feugiat quis. Sed egestas ornare elit, et fringilla quam viverra ut.</p>
                </div></div>
                <div class="bottom">
                <ul>
                    <li>SIDEBAR LINK</li>
                    <li>SIDEBAR LINK</li>
                    <li>SIDEBAR LINK</li>
                </ul>
                </div>
                </div>
    </div> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-25T06:47:51.743

添加一个父 div `display:table`和`height:100%`to`.table-cell`将解决这个问题

所以html结构将是：

```
 <div class="middle">
        <div class="table">
           <div class="table-cell">
               <p>test</p>
           </div>
        </div>    
  </div> 
```

添加此样式：

```
#sidebar .table{
   display:table;
   height:100%;
} 
```

请参阅我已修改的[jsfiddle](http://jsfiddle.net/q5jKM/7/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T05:18:53.030

您可以为该表格单元格设置高度。

```
.table-cell{
height: 200px;/* for example */
vertical-align: middle;
display: table-cell;}

<div class="middle"><div class="table-cell"><p>test</p></div></div> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T06:18:36.273

我以前曾经遇到过垂直对齐属性的问题。我倾向于意识到这个属性似乎更适合表格。所以我在 JSFiddle 上的代码中添加了这个，对我来说它看起来不错。你能看看这对你有用吗？

```
 <div class="middle">
                <table height="100%" width="100%">
                    <tr>
                        <td style="vertical-align:middle">
                            <p>test</p>
                        </td>
                    </tr>
                </table>
            </div> 
```

# python - 如何对日期时间或日期对象列表进行排序？

> ID：14472795
> 
> 赞同：98
> 
> 时间：2013-01-23T05:03:59.187
> 
> 标签：python, list, date, sorting, datetime

如何对日期和/或日期时间对象列表进行排序？[这里](https://stackoverflow.com/questions/9907670/how-to-sort-list-of-date-object)接受的答案对我不起作用：

```
from datetime import datetime,date,timedelta

a=[date.today(), date.today() + timedelta(days=1), date.today() - timedelta(days=1)]
print a # prints '[datetime.date(2013, 1, 22), datetime.date(2013, 1, 23), datetime.date(2013, 1, 21)]'
a = a.sort()
print a # prints 'None'....what??? 
```

* * *

## 回答 #1

> 赞同：159
> 
> 时间：2013-01-23T05:06:08.610

你得到`None`是因为`list.sort()`它就**地运行，**这意味着它不返回任何东西，而是修改列表本身。您只需要调用`a.sort()`而无需`a`再次分配它。

有一个内置函数`sorted()`，它返回列表的排序版本 -`a = sorted(a)`也会做你想做的事。

# iphone - 打开数据库+iphone sdk

> ID：14472796
> 
> 赞同：-3
> 
> 时间：2013-01-23T05:04:05.043
> 
> 标签：iphone, ios

总是无法打开数据库。
我正在尝试插入数据。数据被完美插入。
但是当我当时调用获取数据的方法（选择查询）时，数据库无法打开。
我从来没有关闭过数据库。
每次都必须关闭数据库吗？

```
if(sqlite3_open([self.databasePath UTF8String], &database) == SQLITE_OK) 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T05:09:08.280

没有看到完整的代码，我们怎么能指出你的编码错误？...所以我猜你没有将你的数据库复制到文档目录。所以这里是示例代码，根据你的要求使用它。快乐编码:-)

```
-(void) viewdidload
{

    NSString *databaseName=@"xxx.sqlite";

    NSArray *documentPaths=NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,     NSUserDomainMask, YES);

    NSString *docsDir=[documentPaths objectAtIndex:0];

    databasePath=[docsDir stringByAppendingPathComponent:databaseName];

    [self checkAndCreateDatabase];//Copy db to documents directory
    [self readFromDB];
}

-(void)checkAndCreateDatabase
{

     BOOL success;

// Create a FileManager object, we will use this to check the status
// of the database and to copy it over if required
NSFileManager *fileManager = [NSFileManager defaultManager];

// Check if the database has already been created in the users filesystem
success = [fileManager fileExistsAtPath:databasePath];

// If the database already exists then return without doing anything
if(success) return;

// If not then proceed to copy the database from the application to the users filesystem

// Get the path to the database in the application package
NSString *databasePathFromApp = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:databaseName];

// Copy the database from the package to the users filesystem
[fileManager copyItemAtPath:databasePathFromApp toPath:databasePath error:nil];

}

-(void)readFromDB

{

sqlite3 *database;

if(sqlite3_open([databasePath UTF8String], &database)==SQLITE_OK)
{

    NSString *querySql=[NSString stringWithFormat:@"Select * from xxx"];

    const char *sqlStatement=[querySql UTF8String];

    sqlite3_stmt *compiledStatement;

    if(sqlite3_prepare_v2(database, sqlStatement, -1, &compiledStatement, NULL) == SQLITE_OK) {
        // Loop through the results and add them to the feeds array

        while(sqlite3_step(compiledStatement) == SQLITE_ROW)  {
           //get the data from db here                

        }

        sqlite3_finalize(compiledStatement);
    }

    sqlite3_close(database);
}

} 
```

# javascript - 通过使用 kendo 如何将网格数据导出到以下任一文件（csv、excel、Pdf）

> ID：14472802
> 
> 赞同：1
> 
> 时间：2013-01-23T05:04:21.733
> 
> 标签：javascript, html5-canvas, kendo-ui

我正在使用远程数据将数据填充到 Kendogrid 中。因此，是否可以使用 kendoUI 将网格中的数据导出到任何文件，如 csv、excel 和 pdf。

```
 <script>
    $(document).ready(function() {
                            $("#grid").kendoGrid({
                                dataSource: {
                                    type: "odata",
                                    transport: {
                                        read: "http://demos.kendoui.com/service/Northwind.svc/Orders"
                                    },
                                    schema: {
                                        model: {
                                            fields: {
                                                OrderID: { type: "number" },
                                                Freight: { type: "number" },
                                                ShipName: { type: "string" },
                                                OrderDate: { type: "date" },
                                                ShipCity: { type: "string" }
                                            }
                                        }
                                    },
                                    pageSize: 10,
                                    serverPaging: true,
                                    serverFiltering: true,
                                    serverSorting: true
                                },
                                height: 250,
                                filterable: true,
                                sortable: true,
                                pageable: true,
                                columns: [{
                                        field:"OrderID",
                                        filterable: false
                                    },
                                    "Freight",
                                    {
                                        field: "OrderDate",
                                        title: "Order Date",
                                        width: 100,
                                        format: "{0:MM/dd/yyyy}"
                                    }, {
                                        field: "ShipName",
                                        title: "Ship Name",
                                        width: 200
                                    }, {
                                        field: "ShipCity",
                                        title: "Ship City"
                                    }
                                ]
                            });
                        });
                    </script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-11-26T16:56:21.457

Kendo UI 现在支持导出到 Excel 和 PDF。[http://demos.telerik.com/kendo-ui/grid/excel-export](http://demos.telerik.com/kendo-ui/grid/excel-export "Kendo UI 导出演示")

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T05:38:36.573

不幸的是，没有任何用于导出网格的内置功能。

如果您使用的是 ASP.NET MVC，则有一个[代码库](http://www.kendoui.com/code-library/mvc/grid/export-grid-to-excel.aspx)示例演示了这一点，但如果您不使用 MVC，我不知道有哪一个。根据一些论坛的回答，他们没有计划构建这个我不喜欢的东西，并希望我们作为用户可以投票支持这个功能。

这是一个[链接](https://stackoverflow.com/questions/6742567/export-to-excel-in-jquery-or-jqgrid)，它可能有助于它显示如何将 json 响应导出到 cvs。

所以你想要做的是获取你的网格的数据源并调用 .toJson 这样的东西

```
 var mydata= $("#grid").data("kendoGrid").dataSource.data().toJson(); 
```

然后将其传递给我提供的链接中的函数

另请注意：至少我认为，如果要包括过滤和分页，则可能需要获取数据源的视图。视图将是 dataSource.view()

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-25T17:08:39.087

在 github 上，我有一个项目允许您将 Grid 下载到 CSV：[Kendo Grid CSV Export](https://github.com/uber-rob/kendo-grid-csv-download)

# python - 创建 Python CentOS ISO

> ID：14472803
> 
> 赞同：1
> 
> 时间：2013-01-23T05:04:23.013
> 
> 标签：python, linux, centos

在基本的 CentOS/Linux 操作系统上打包基于 python 的应用程序然后创建 iso 映像的最佳方法是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T05:16:20.407

您可以制作基于 kickstart 的安装脚本并将结果打包到 iso 中。这将允许您从头开始安装 CentOS，包括您要在基本安装中安装的任何其他应用程序。

这应该会引导您朝着正确的方向前进：

[http://smorgasbork.com/component/content/article/35-linux/128-building-a-custom-centos-6-kickstart-disc-part-1](http://smorgasbork.com/component/content/article/35-linux/128-building-a-custom-centos-6-kickstart-disc-part-1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T06:44:34.360

打包基于 pyton 的应用程序的最佳方法是从中创建一个 RPM（对于 CentOS）。

您可以[在此处](http://docs.python.org/2/distutils/builtdist.html)阅读有关它的一些信息。

[CentOS 官方文档](http://www.centos.org/docs/5/html/Installation_Guide-en-US/ch-kickstart2.html)中描述了创建包含 CentOS 软件包的 ISO 。正如monkut 提到的，kickstart 是要走的路。

或者，您可以只[创建一个](http://wiki.centos.org/HowTos/CreateLocalRepos)包含您的 RPM 的存储库，并向人们提供有关如何添加存储库和安装软件包的说明。

# python - django 同一查询的 id 和 date 不一致，为什么？

> ID：14472805
> 
> 赞同：2
> 
> 时间：2013-01-23T05:04:36.877
> 
> 标签：python, django

我有下一个模型：

```
class People(models.Model):
    name = models.CharField(max_length=100)
    date = models.DateTimeField() 
```

我的数据类似于：

```
id    name    date
120   john    9-11-2011 19:00:25
121   john    9-11-2011 19:05:55
....
180   steven  10-11-2011 00:00:45
...
468    cleve  10-11-2011 23:55:35 
```

在views.py

- 当我尝试这个时：

```
dates=[]
ids=[]
for i in People.objects.filter(date__range=["2011-11-10", "2011-11-11"]):
    ids.append(i.id)
    dates.append(i.date)
return HttpResponse("ids=%s  dates=%s"% (ids,dates)) 
```

所以，我有一个非常基本的 orm 查询来过滤一天的数据。代码有一个奇怪的问题，因为 ids 应该是`ids=[180...468],` 但它返回

```
ids=[120...408]
dates=[datetime.datetime(2011, 11, 10, 0, 0, 45), ....datetime.datetime(2011, 11, 10, 23, 55, 35) 
```

问题是代码返回的日期是正确的，但是 ID 不正确。这怎么可能，为什么我在同一个查询中得到不一致的 id 和 date ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T08:08:05.783

您可以尝试使用大于/小于过滤器：

```
for i in People.objects.filter(date__lte='2011-11-10').filter(date__gte='2011-11-11'):
    ... 
```

# javascript - Chrome 在请求之间删除 WebSQL 数据库

> ID：14472810
> 
> 赞同：1
> 
> 时间：2013-01-23T05:04:47.657
> 
> 标签：javascript, google-chrome, playframework, angularjs

所以我正在尝试创建一个以 AngularJS 作为前端的离线应用程序并播放！1.2.5作为后端。在客户端，我创建了 2 个页面 - main.html 和 login.html，在 login.html 上提交表单后，将创建一个 WebSQL 数据库

```
var db = openDatabase("users", "1.0", "User Database", 2*1024*1024 
```

添加了一些数据并将用户转发到 main.html。

问题是当我打电话时

```
var db = openDatabase("users", "1.0", "User Database", 2*1024*1024); 
```

在 main.html 上，我得到了数据库，但没有在 login.html 页面上创建任何信息。这里发生了什么？

**编辑：**这是一些代码

login.html（JavaScript 部分）：

var db = window.openDatabase("myDB", "1.0", "示例数据库", 2*1024*1024);

```
db.transaction(function(tx) {
                          tx.executeSql("drop table if exists users");
                          tx.executeSql("create table users (id unique, name)");
                          tx.executeSql("insert into users (id, name) values (?, ?)", [1, "Kevin"]);
}); 
```

主.html：

var db = window.openDatabase("myDB", "1.0", "示例数据库", 2*1024*1024);

```
db.transaction(function(tx) {
                    tx.executeSql("select * from users", [], function(tx, results) {
                            for(i=0; i<results.rows.length; i++) {
                                var u = {
                                    id: results.rows.item(i).id,
                                    name: results.rows.item(i).name,
                                }
                                console.log(u); //Nothing gets returned. Database in Resources tab is empty; no users!
                            }
                        });
}); 
```

我在 index.html 中创建的数据库出现了，但我输入的用户数据不存在。我正在使用默认播放！开发网络服务器。当我使用 LightTPD 时不会出现这个问题，但是我当然无法访问我的 Play！由于 Access-Control-Origin 的东西，应用程序数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T20:14:32.833

我认为您在插入可以执行之前到达 main.html。请记住，WebSQL API 是异步的，因此当您的代码将事务发送到 drop/create/insert 时，您的应用程序不会等待并直接进入 main.html（如果您没有使用回调来更改页面）。

您要做的是发送事务并等待回调（onSuccessSql）更改为 main.html。这是一个例子：

```
db.transaction(function(tx){
        tx.executeSql( "insert into users (id, name)...", onSuccessSql, onError)}, 
onError, onReadyTransaction);

function onReadyTransaction( ){
    console.log( 'Transaction completed' )
}

function onSuccessSql( tx, results ){
  //go to main.html()
}

function onError( err ){
    console.log( err )
} 
```

# iphone - 如何从 facebook 登录重定向到 iphone 应用程序

> ID：14472811
> 
> 赞同：4
> 
> 时间：2013-01-23T05:04:50.963
> 
> 标签：iphone, ios, objective-c, facebook, ios5

在我的 iphone 应用程序中，单击按钮时重定向到 facebook 登录，如 facebook 应用程序。再次登录后重定向到我的应用程序。

我正在使用此代码

```
NSArray *permissions =
[NSArray arrayWithObjects:@"user_photos", @"friends_photos",@"email", nil];

[FBSession openActiveSessionWithReadPermissions:permissions
                                   allowLoginUI:YES
                              completionHandler:
 ^(FBSession *session,
   FBSessionState state, NSError *error) {

     if(!error)
     {
         NSLog(@" hi im sucessfully lloged in");
     }
 }]; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T05:16:05.540

在你的 AppDelegate 中修改方法

```
- (BOOL)application:(UIApplication *)application handleOpenURL:(NSURL *)url  
{

NSString *urlString = [url absoluteString];

if ([urlString hasPrefix:@"fb://xxxxxxxxxxxx"]) {
    [FBSession.activeSession handleOpenURL:url];
    returnValue = YES;
}

return returnValue;
} 
```

还

但请记住，这在 IOS 6 中不会触发。在 ios 6 中，将触发以下方法。

```
 - (BOOL)application:(UIApplication *)application
        openURL:(NSURL *)url
 sourceApplication:(NSString *)sourceApplication
     annotation:(id)annotation {

return [FBSession.activeSession handleOpenURL:url];
 } 
```

如果您的会话状态由于登录或断开连接而改变 FBsession 调用以下方法，您应该处理您的情况。

```
- (void)sessionStateChanged:(FBSession *)session
                  state:(FBSessionState)state
                  error:(NSError *)error {
switch (state) {
    case FBSessionStateOpen: {
        //update permissionsArrat
        [self retrieveUSerPermissions];

        if (!needstoReopenOldSession) {
            //First User information
            [self getUserInformation:nil];
        }

        NSNotification *authorizationNotification = [NSNotification notificationWithName:facebookAuthorizationNotification object:nil];
        [[NSNotificationCenter defaultCenter] postNotification:authorizationNotification];

    }
    case FBSessionStateClosed: {
        break;
    }
    case FBSessionStateClosedLoginFailed: {
        [FBSession.activeSession closeAndClearTokenInformation];
        break;
    }
    default:
        break;
}

if (error) {
    NSNotification *authorizationNotification = [NSNotification notificationWithName:faceBookErrorOccuredNotification object:nil];
    [[NSNotificationCenter defaultCenter] postNotification:authorizationNotification];
}
} 
```

# oracle - 插入记录时如何在oracle中指定日期格式？

> ID：14472814
> 
> 赞同：0
> 
> 时间：2013-01-23T05:05:15.160
> 
> 标签：oracle, vb6

```
INSERT INTO STUDENT_RECORD_DATABASE
  (ROLLNO,FIRST_NAME,MIDDLE_NAME,LAST_NAME,CONTACT,CONTACT1,CONTACT2,ADDRESS,GRADE,DIVID,BLOOD_GROUP,HID,DATE_OF_BIRTH,TRANSPORT,SNAME,MEAL,BUSNO,RUTNO,DID,AID,CARD_TYPE,CARD_NO)
VALUES
 (135,'SHRENIK','ATUL','VAJPEYEE', 8852140367, 7698555412, 235599, 'LEN Q BEHIND DWARKA HOTEL', '9TH','40', 'AB-VE' ,13,'To_Date ('15-Aug-1997','dd-Mon-YYYY') ', 'NO' ,'DWARKA' ,'NO' ,'MH 04 3215' ,1,515,311, 'ESCORT' ,1062) 
```

> 'To_Date ('15-Aug-1997','dd-Mon-YYYY') ', * 第 15 行的错误：ORA-00917：缺少逗号

但是所有逗号都存在，我需要指定这种日期格式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T05:09:09.197

您不必在`TO_DATE()`函数中加上单引号。像这样：

```
INSERT INTO STUDENT_RECORD_DATABASE (ROLLNO,FIRST_NAME,MIDDLE_NAME,LAST_NAME,CONTACT,CONTACT1,CONTACT2,ADDRESS,GRADE,DIVID,BLOOD_GROUP,HID,DATE_OF_BIRTH,TRANSPORT,SNAME,MEAL,BUSNO,RUTNO,DID,AID,CARD_TYPE,CARD_NO)

VALUES
 (135,'SHRENIK','ATUL','VAJPEYEE', 8852140367, 7698555412, 235599, 'LEN Q BEHIND DWARKA HOTEL', '9TH','40', 'AB-VE' ,13,To_Date('15-Aug-1997','dd-Mon-YYYY'), 'NO' ,'DWARKA' ,'NO' ,'MH 04 3215' ,1,515,311, 'ESCORT' ,1062) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T05:23:05.037

TO_DATE() 是一个函数而不是字符串文字，因此您需要删除它周围的单引号。

# google-apps-script - 当电子表格范围不存在时脚本出错

> ID：14472817
> 
> 赞同：0
> 
> 时间：2013-01-23T05:05:30.613
> 
> 标签：google-apps-script, google-sheets

我的 Google Apps 脚本中有这行简单的代码：

```
 s.getRange('C2:C').clearContent(); 
```

但有时我的电子表格只有一行，所以 C1 存在但 C2:C 不存在。在这种情况下，脚本会出错。

有谁知道我如何实现与上述代码相同的功能，但只有第 1 行存在时不会出现错误？

我目前有这个，但我不知道它是否有什么问题。这似乎太简单了：

```
function Test() {
  var ss = SpreadsheetApp.getActiveSpreadsheet();
  var s = ss.getSheetByName('Sheet1');
  var values = s.getRange('C:C');
  var howManyRows = values.getNumRows();

    if (howManyRows >= 2)
       s.getRange('C2:C').clearContent();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T06:21:25.803

该方法`getMaxRows()`返回工作表[中可用行的数量](https://developers.google.com/apps-script/class_sheet?hl=en#getMaxRows)，因此您可以在如下条件下使用它：

```
if(s.getMaxRows()>1){s.getRange('C2:C').clearContent()} 
```

# ios - Opencv 有 podspec 吗？

> ID：14472820
> 
> 赞同：5
> 
> 时间：2013-01-23T05:05:49.487
> 
> 标签：ios, objective-c, opencv, computer-vision, cocoapods

我最近使用了 Cocoapods - Objective C 中的库依赖管理工具。它具有 ZXing、AFNetworking 等常用库的 podspec。有人遇到过Opencv **podspec**吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T02:20:31.283

此问题已修复。您可以使用 CocoaPods 安装 OpenCV。看看这里：[https ://github.com/SebastienThiebaud/OpenCV-iOS/blob/master/README.md](https://github.com/SebastienThiebaud/OpenCV-iOS/blob/master/README.md)

其实pod版本号是错误的，版本0.0.1是OpenCV 2.4.3

对困惑感到抱歉。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-23T05:56:01.700

您可以随时使用搜索功能。使用“pod search opencv”显示 podspec 已退出。坏消息是它是 0.0.1 版本...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-04T12:23:34.560

在您的 Podfile 中添加以下内容并执行命令“pod install --no-repo-update”。

平台：ios，“7.0”

吊舱“OpenCV”，“2.4.9”

# android - Android 原生 SIP 客户端配置

> ID：14472821
> 
> 赞同：1
> 
> 时间：2013-01-23T05:05:51.620
> 
> 标签：android, sip

是否可以从您自己的 android 应用程序（用户名、密码和服务器 IP）配置 Android 本机 SIP 客户端？？。我想在用户安装它时创建 android 应用程序，该应用程序会自动从我的服务器导入 SIP 帐户并在 Android 原生 SIP 客户端中配置（用户名、密码和服务器 IP）。我使用 SIP 演示教程创建了自己的 SIP 客户端，但它语音质量差和许多其他问题..所以现在我想使用 Android 原生 SIP 客户端

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T19:58:40.607

Android 提供了一个支持会话发起协议 (SIP) 的 API。这使您可以将基于 SIP 的互联网电话功能添加到您的应用程序中。Android 包含完整的 SIP 协议栈和集成的呼叫管理服务，让应用程序可以轻松设置呼出和呼入语音呼叫，而无需直接管理会话、传输级通信或音频记录或回放

访问此链接：

[http://developer.android.com/guide/topics/connectivity/sip.html](http://developer.android.com/guide/topics/connectivity/sip.html)

# android - 将 iPhone PhoneGap 应用程序移植到 Android - 扩展问题

> ID：14472826
> 
> 赞同：0
> 
> 时间：2013-01-23T05:06:18.263
> 
> 标签：android, ios, cordova, mobile, scaling

我正在将使用 PhoneGap 2.2.0 构建的 iOS 应用程序移植到 Android 上。我的主要问题是让应用程序根据设备的屏幕尺寸适当缩放。使用`getResources().getDisplayMetrics()`，我得到有关我的 Android 设备的以下信息：

```
DisplayMetrics{
    density=1.5, 
    width=540, 
    height=960, 
    scaledDensity=1.2750001, 
    xdpi=368.06036, 
    ydpi=365.22525
} 
```

这是我的视口：

`<meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, target-densitydpi=143" />`

正如您所看到的，我正在`target-densitydpi`对应用程序进行硬编码以合理扩展以适应我的 Android 设备的屏幕。由于我希望我的应用程序支持多个屏幕，有没有办法使用提供的信息进行适当的`DisplayMetrics`调整`viewport`。

我在网上查找了不同的解决方案，但似乎没有一个能按预期工作。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T08:32:53.130

我建议从不同的角度看待这个问题：如何使我的应用程序缩放到任何设备的屏幕尺寸？此时您正在尝试支持 Android 和 iOS，但稍后您可能还希望支持平板电脑、Windows Phone 8、BB 设备等。因此，我将采用响应屏幕尺寸的 Web 应用程序设计：即应用程序根据可用维度动态分配空间。查看以下响应式设计的链接/框架：

*   [Twitter Bootstrap：响应式脚手架](http://twitter.github.com/bootstrap/scaffolding.html#responsive)
*   [WebBlocks：响应式移动设计](https://github.com/ucla/mwf/wiki/WebBlocks)

您还可以阅读更多关于该技术背后的原因：[为什么 2013 年是响应式网页设计年？](http://mashable.com/2012/12/11/responsive-web-design/)

# javascript - Codecadamy Parse API 第 1 课 | 破碎的？| 创建你的第一个对象

> ID：14472828
> 
> 赞同：1
> 
> 时间：2013-01-23T05:06:21.387
> 
> 标签：javascript, api

这节课应该很简单。他们拼出答案，但我和论坛中的 10 多人无法让这节课发挥作用。

我们是否错误地实现了代码？教训是否具有误导性？答案检查器刚刚坏了吗？

[http://www.codecademy.com/courses/web-beginner-en-B8H1e/0#!/exercises/0](http://www.codecademy.com/courses/web-beginner-en-B8H1e/0#!/exercises/0)

```
$(window).on("html_loaded", function(e) {
    $(".submit_button").click(function(e) {

        // 1\. Set the type of Parse Object, in this case use 'Post'
        var Post = Parse.Object.extend("Post");

        // 2\. Create a new object of type Post
        var myPost = new Post() ;

    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T06:24:38.347

是的，似乎被破坏了，因为单击提交后没有用户反馈。

第 2 部分显示的答案与您已有的答案相同：

```
$(window).on("html_loaded", function(e) {
    $(".submit_button").click(function(e) {

        // This creates our new Post object
        var Post = Parse.Object.extend("Post");
        var myPost = new Post();

        ...

    });
}); 
```

# java - 使用 lambdaj 的多个排序条件

> ID：14472829
> 
> 赞同：1
> 
> 时间：2013-01-23T05:06:35.883
> 
> 标签：java, sorting, collections, lambdaj

如何在 lambdaj 中使用多个排序条件？例如，要获得一个列表，首先按名称排序，然后按年龄排序：

*   **姓名年龄**
*   名称A 14
*   名称 B 12
*   名称B 15
*   名称C 10
*   名称C 11

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T09:27:03.797

看看我对类似问题的回答：[lambdaj and Multiple Sort Conditions in Java](https://stackoverflow.com/questions/9794647/lambdaj-and-multiple-sort-conditions-in-java/10158924#10158924)。简而言之 - 您需要深入研究 lambdaj 源代码，但解决方案非常简单。

# list - 以一种“重叠”的方式将值添加到列表中

> ID：14472831
> 
> 赞同：4
> 
> 时间：2013-01-23T05:07:04.297
> 
> 标签：list, recursion, scheme, racket, accumulator

我将用数学解释，这是我正在努力编写方案代码的转换：

```
(f '(a b c) '(d e f)) = '(ad (+ bd ae) (+ cd be af) (+ ce bf) cf) 
```

where 两个字母连在一起的`ad`意思`(* a d)`。

我试图以纯粹的功能方式编写它，但我正在努力了解如何。任何建议将不胜感激。

这里有些例子：

```
(1mul '(0 1) '(0 1)) = '(0 0 1)
(1mul '(1 2 3) '(1 1)) = '(1 3 5 3)
(1mul '(1 2 3) '(1 2)) = '(1 4 7 6)
(1mul '(1 2 3) '(2 1)) = '(2 5 8 3)
(1mul '(1 2 3) '(2 2)) = '(2 6 10 6)
(1mul '(5 5 5) '(1 1)) = '(5 10 10 5)
(1mul '(0 0 1) '(2 5)) = '(0 0 2 5)
(1mul '(1 1 2 3) '(2 5)) = '(2 7 9 16 15) 
```

所以，模式就像我在开始时发布的那样：

将列表中的第一个数字乘以第二个列表中的每个数字（ad，ae，af），然后继续，（bd，be，bf，cd，ce，cf）并“以某种方式”排列数字以添加相应的数字价值观。我称它为重叠的原因是因为您可以像这样可视化它：

```
(list
       aa'
    (+ ba' ab')
    (+ ca' bb' ac')
        (+ cb' bc')
               cc') 
```

再次，

```
(f '(a b c) '(d e f)) = '(ad (+ bd ae) (+ cd be af) (+ ce bf) cf) 
```

但是，不仅适用于 3x3 列表，适用于任何大小的列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-21T13:16:14.300

这是我的代码。它在球拍中

```
#lang racket

(define (drop n xs)
  (cond [(<= n 0) xs]
        [(empty? xs) '()]
        [else (drop (sub1 n) (rest xs))]))        

(define (take n xs)
  (cond [(<= n 0) '()]
        [(empty? xs) '()]
        [else (cons (first xs) (take (sub1 n) (rest xs)))]))        

(define (mult as bs)
  (define (*- a b)
    (list '* a b))
  (define degree (length as))
  (append 
   (for/list ([i  (in-range 1 (+ 1 degree))])
     (cons '+ (map *- (take i as) (reverse (take i bs)))))
   (for/list ([i  (in-range 1 degree)])
     (cons '+ (map *- (drop i as) (reverse (drop i bs))))))) 
```

`for/list`s 只是映射数字列表并将结果收集到列表中的方法。如果你需要，我可以重新制定它只是地图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T13:18:34.230

假设您想要进行此计算是否正确？

```
(a+b+c)*(d+e+f) = a(d+e+f) + b(d+e+f) + c(d+e+f) 
                = ad+ae+af + bd+be+bf + cd+ce+cf 
```

如果是这样，这很简单：

```
(define (f xs ys)
   (* (apply + xs) (apply + ys)) 
```

如果您对符号版本感兴趣：

```
#lang racket
(define (f xs ys)
  (define (fx x)
    (define (fxy y)
      (list '* x y))
    (cons '+ (map fxy ys)))
  (cons '+ (map fx xs))) 
```

这是一个测试：

```
> (f '(a b c) '(d e f))
'(+ (+ (* a d) (* a e) (* a f)) 
    (+ (* b d) (* b e) (* b f)) 
    (+ (* c d) (* c e) (* c f))) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T07:51:28.453

这是递归的好候选吗？不确定，但这是您要求的直接翻译。

```
(define (f abc def)
  (let ((a (car abc)) (b (cadr abc)) (c (caddr abc))
        (d (car def)) (e (cadr def)) (f (caddr def)))
    (list (* a d)
          (+ (* b d) (* a e))
          (+ (* c d) (* b e) (* a f))
          (+ (* c e) (* b f))
          (* c f)))) 
```

# ruby-on-rails - 在这种情况下如何定义范围？

> ID：14472833
> 
> 赞同：1
> 
> 时间：2013-01-23T05:07:16.677
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有 2 个模型，例如`User`，`Uniquecode`
我正在使用名为的 gem `acts_as_paranoid`，它可以实现逻辑删除。基本上，用户有一个名为“deleted_at”的列，并且日期时间将在用户被删除时设置。

我在 Uniquecode 模型中定义了这个

```
scope :recent, lambda { |n = 10| includes(:user).order("users.last_active_at DESC").limit(n) } 
```

但是，此代码获取所有用户，包括通过逻辑删除删除的用户。那些通过逻辑删除删除的用户，在“deleted_at”列中有时间戳。

如何忽略这些人并仅获取具有这种条件的活跃用户？如何以不同的方式对其进行编码？

*   一次 10 条记录
*   必须按用户表中的“last_active_at”列排序。我想要最新的 10 条记录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T05:47:50.683

这对你有用吗？

```
scope :recent, lambda { |n = 10| includes(:user).where('users.deleted_at', nil).order("users.last_active_at DESC").limit(n) } 
```

# c# - 如何处理大于 double 最大值的浮点值

> ID：14472835
> 
> 赞同：6
> 
> 时间：2013-01-23T05:07:19.237
> 
> 标签：c#, .net, math, bigdecimal

我的值大于 1.97626258336499E-323

我也不能使用 BigInteger，因为它只处理整数值

任何帮助表示赞赏

以下是一些用户给出的一些解决方案失败的代码：

```
BigValue / (Math.Pow((1 + ret), j)); 
```

其中 BigValue 类似于 15000.25

ret 是 -0.99197104212554987

j 将达到 500-600 左右。

我也不知道如何为此使用 Rational Class

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T05:36:55.933

来自 Microsoft 的基类库团队的[BigRational 。](http://bcl.codeplex.com/releases/view/42782)它使用大整数将其存储为分数，但支持各种运算符。

在将其打印为小数时，我认为您需要为此编写自己的实现。我在某处为这门课写过一篇，但我必须找到它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T16:55:33.303

这是一些可能有用的东西。我用了一段时间没有问题。它是一个 .Net BigDecimal 类，您可以从 codeplex 下载它（或只查看源代码）：

[http://bigdecimal.codeplex.com/releases/view/44790](http://bigdecimal.codeplex.com/releases/view/44790)

它是用 VB.Net (.Net 4.0) 编写的，但这无关紧要。

它在 C# 中的使用示例：[http ://www.dreamincode.net/forums/blog/217/entry-2522-the-madman-scribblings/](http://www.dreamincode.net/forums/blog/217/entry-2522-the-madman-scribblings/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T05:31:04.547

您将不得不将语言切换到具有类型的语言（例如 Haskel 和 Python 具有本地包），或者找到具有绑定`BigFloat`的第三方大型浮点库。`C#`有一些关于[GNU MP](http://gmplib.org/)的这种绑定的讨论，但它消失了。也许你会写一个！

另请参阅[讨论](https://stackoverflow.com/questions/10359372/is-there-a-bigfloat-class-in-c)MS BigRational 的讨论。然而，这与 BigFloat 不同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T05:47:02.357

一种解决方案可能是在日志空间中解决您的问题。

您的示例将变为：

```
exp(log(Number) - log(1-0.9999999) * 400) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-24T15:39:25.610

了解如何使用日志来处理此类数字。是的，你可以使用一个大的浮动包，但这几乎总是矫枉过正。您通常可以使用日志获得所需的内容。

# php - 按日期显示 SQL 值组

> ID：14472836
> 
> 赞同：0
> 
> 时间：2013-01-23T05:07:29.983
> 
> 标签：php, sql, sorting, group-by

如何在 PHP 中按日期对 SQL 查询分组进行排序...

我有这张桌子

```
id  date                  Title
1   2012-12-19 11:00:00   Value 10
2   2013-01-04 09:00:00   Value 15
3   2013-01-04 20:00:00   Value 18
4   2013-01-04 21:00:00   Value 5
5   2013-01-07 09:00:00   Value 8
6   2013-01-07 09:40:00   Value 11
7   2013-01-07 11:00:00   Value 12 
```

我想像这样按月份排序

```
December 19
11:00:00      Value 10

January 04
09:00:00      Value 15
20:00:00      Value 18
21:00:00      Value 5

January 07
09:00:00      Value 8
09:40:00      Value 11
11:00:00      Value 12 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T05:50:48.303

尝试以下查询并使用 PHP 循环来获得您想要的结果。您只需要在 PHP 循环中拆分 id、time 和 title 值来格式化数据以供显示。

```
SELECT
GROUP_CONCAT(id) AS id,
DATE_FORMAT(date,'%M %e') AS Date,
GROUP_CONCAT(DATE_FORMAT(date,'%H:%i:%s')) AS TimeValue,
GROUP_CONCAT(title) AS Title
FROM abc
GROUP BY DATE(date)
ORDER BY MONTH(date) DESC 
```

**输出**

```
ID          DATE            TIMEVALUE                       TITLE
1           December 19     11:00:00                        Value 10
2,3,4       January 4       09:00:00,20:00:00,21:00:00      Value 15,Value 18,Value 5
5,6,7       January 7       09:00:00,09:40:00,11:00:00      Value 8,Value 11,Value 12 
```

**SQL小提琴：[http ://sqlfiddle.com/#!2/ec3a8/6](http://sqlfiddle.com/#!2/ec3a8/6)**

**更新：**

输出

```
ID          DATE                TIMEVALUE
1           December 19         11:00:00___Value 10
2,3,4       January 4           09:00:00___Value 15,20:00:00___Value 18,21:00:00___Value 5
5,6,7       January 7           09:00:00___Value 8,09:40:00___Value 11,11:00:00___Value 12 
```

PHP 代码：我假设您根据上述查询输出有如下数组。

```
<?php
$data = array(
        0=>array(
            'id'=>1,
            'date'=>'December 19',
            'time_value'=>'11:00:00___Value 10',
        ),
        1=>array(
            'id'=>2,3,4,
            'date'=>'January 4',
            'time_value'=>'09:00:00___Value 15,20:00:00___Value 18,21:00:00___Value 5',
        ),
        2=>array(
            'id'=>5,6,7,
            'date'=>'January 7',
            'time_value'=>'09:00:00___Value 8,09:40:00___Value 11,11:00:00___Value 12',
        )    
    );
if(is_array($data))
{
    foreach($data as $value)
    {
        if(is_array($value))
        {
            echo '<br />'.$value['date'].'<br />';
            $arrTime = explode(',', $value['time_title']);
            if($arrTime)
            {
                foreach($arrTime as $time)
                {
                    $arrTimeTitle = explode('_', $time);
                    echo $arrTimeTitle[0]."&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;".$arrTimeTitle[1]."<br />";
                }
            }
        }
    }
}
?> 
```

最终的 PHP 输出：

```
December 19
11:00:00     Value 10

January 4
09:00:00     Value 15
20:00:00     Value 18
21:00:00     Value 5

January 7
09:00:00     Value 8
09:40:00     Value 11
11:00:00     Value 12 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T05:23:17.170

您应该尝试使用 PHP 而不是 SQL 来执行此操作。

您可以使用 ORDER BY 日期通过 SQL 检索数据，然后使用 PHP 使用“date()”函数捕获日期格式，然后仅从日期字段和标题字段打印时间部分，直到日期部分与之前抓取的日期部分匹配。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T05:12:55.460

`GROUP_CONCAT`在你的 sql 中使用函数。您可以在一个查询中实现这一点，而不是在 PHP 中尝试多个循环。

例如：-

```
SELECT 
          id,GROUP_CONCAT(date, value, '+') 
FROM 
          tablename 
GROUP BY 
          date 
ORDER BY 
          date DESC; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T05:16:36.447

使用此查询

```
SELECT
  id,
  DATE_FORMAT(date,'%M %e') as DateValue,
  DATE_FORMAT(date,'%h:%i:%s %p') as TimeValue,
  GROUP_CONCAT(Title)
from mytable
group by DATE(date)
ORDER BY MONTH(date) desc 
```

输出

```
id  |   DateValue   |   TimeValue       |   Title
----------------------------------------------------------
1   |   December 19 |   11:00:00        |   Value   10 
2   |   January 4   |   09:00:00        |   Value 15,Value 18,Value 5 
5   |   January 7   |   09:00:00        |   Value 8,Value 11,Value 12 
```

在前端使用 php explode Title ，你会得到一个数组

```
$titles = explode(',',$row['Title']); 
```

# php - AWS DynamoDB 会话与 Elasticache PHP 会话

> ID：14472839
> 
> 赞同：6
> 
> 时间：2013-01-23T05:07:50.310
> 
> 标签：php, amazon-web-services, memcached, amazon-dynamodb, amazon-elasticache

我有一个概念，我想通过 DynamoDB 的冗余和 Elasticache 的速度在 AWS 中运行会话获得人们的意见。

1.  PHP 将会话存储在 DynamoDB 中。
2.  当会话写入 DynamoDB 时，值也会写入 Elasticache（可能以 JSON 格式存储在一个密钥对中，以便快速进行整个检索。
3.  PHP 然后查询 Elasticache 的会话。
4.  如果 PHP 在 Elasticache 中找不到会话，它会检查 DynamoDB - 因此为节点故障、集群故障和站点故障提供备份。如果找到会话，则将其写回 Elasticache（如果可能），如果没有，则在 DynamoDB 中创建一个新会话。

好，坏，凌乱，复杂？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T05:38:55.817

不，这还不错/很复杂——这是 memcache 作为持久数据存储的直写式缓存的一种非常标准的用法。但是，从 AWS 每月计费的角度来看，这是一个非常昂贵的解决方案。

您是否只使用 DynamoDB 进行过基准测试？这是一个由 SSD 支持的键值存储，应该足够快。不过，我说“应该”，因为当我尝试对它做同样的事情时，我遇到了可怕的延迟问题。我们最终完全转向了 ElasticCache 解决方案，只是忍受了节点故障的可能性。但这是针对一个现有的应用程序，它被匆忙地硬塞到 AWS 上，并且使用了大得离谱的会话对象。我没有时间重新审视这个想法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-23T21:58:51.510

为了补充 jamieb 所说的内容，这里有一些链接：

如果您要使用 ElastiCache，我建议您使用他们的[自动发现功能](http://docs.aws.amazon.com/AmazonElastiCache/latest/UserGuide/AutoDiscovery.html)，这样您只需担心一个 memcache 端点，而不管实际有多少缓存节点。

如果您要使用 DynamoDB，您应该使用[AWS SDK for PHP](https://github.com/aws/aws-sdk-php)提供的[DynamoDB 会话处理](https://github.com/aws/aws-sdk-php/blob/master/src/Aws/DynamoDb/Session/SessionHandler.php)程序。这是一个关于如何使用会话处理程序的简单代码示例：

```
<?php

// Load SDK via Composer autoloader
require 'vendor/autoload.php';

// Instantiate the SDK with your config
$aws = Aws\Common\Aws::factory('/path/to/config/file');

// Instantiate the DynamoDB client and register the session handler
$db = $aws->get('dynamodb');
$db->registerSessionHandler(array(
    'table_name' => 'sessions',
    'hash_key'   => 'id',
));

// Use PHP sessions like normal
session_start();
$_SESSION['foo'] = 'bar';
session_commit(); 
```

# javascript - 由概率控制的项目生成器

> ID：14472840
> 
> 赞同：0
> 
> 时间：2013-01-23T05:07:56.740
> 
> 标签：javascript, arrays, random, probability

我对 JS 很陌生，但我想制作一个由概率控制的非常基本的 RPG 项目生成器。这就是我想出的。

我对 itemtype 部分有疑问。在为 itemtype 完成概率滚动后，我想在武器、配饰和盔甲下随机生成一组元素。

它应该是诸如稀有剑、稀有法杖、普通手套或普通宝箱之类的东西。

我该怎么做？

```
var rarityNum = Math.floor( 1 + Math.random() * 100 );
var itemNum = Math.floor( 1 + Math.random() * 100 );

var rarity;
if ( rarityNum > 75 ) { rarity = "rare "; }
else if ( rarityNum > 65 ) { rarity = "uncommon "; }
else { rarity = "common "; }

var weapons =["sword","bow","staff"];
var armors =["chest","leggings","gloves"];

var itemtype;
if ( itemNum > 51 ) { itemtype = "weapons"; }
else if ( itemNum > 40 ) { itemtype = "accessories"; }
else { itemtype = "armors"; }

document.write (rarity);
document.write (itemtype); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T05:37:35.540

```
var item = {
  "Weapon" : ["Sword", "Bow"],
  "Armor"  : ["Chest", "Leggings", "Gloves", "Helmet"],
  "Access" : ["Ring", "Bracelet", "Amulet"]
};

var rareness   = Math.floor( 1 + Math.random() * 100 )
  , item_type  = Math.floor( 1 + Math.random() * 100 )
;//randoms

var rarity =
    rareness > 75? "Rare"     :
    rareness > 65? "Uncommon" :
                   "Common"   ;

var type =
    item_type > 51? "Weapon" :
    item_type > 40? "Access" :
                    "Armor"  ;

var item_list  = item[type]
  , item_index = Math.round( Math.random() * (item_list.length - 1) )
;//items

document.write( rarity + " " + item_list[item_index] ); 
```

# ios - 以编程方式添加的子视图不与其他视图交互，但 xib 添加的视图工作正常

> ID：14472842
> 
> 赞同：1
> 
> 时间：2013-01-23T05:08:03.463
> 
> 标签：ios, uiview, touch, touchesmoved

哈兰哈斯金斯写道：

我在 viewDidLoad 中以编程方式添加了一个名为 userSlider 的视图：

```
 self.userSlider = [[UserSliderView alloc] initWithFrame:CGRectMake(0, -120, 320, 155)];
     [self.userSlider setUser:user];
     [self.userSlider configureView];
     [self.view addSubview:self.userSlider]; 
```

还有一个叫做gameTableView的tableview。

我最初将 userSlider 作为自定义视图添加到 xib 中（因为 UserSlider 有自己的 xib），当我实现这些触摸方法时：

```
 -(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {

UITouch *touch = (UITouch*)[touches anyObject];

start = [touch locationInView:self.view].y;
 }

 -(void) touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {

if(start < 0)

{

    return;

}

UITouch *touch = (UITouch *)[touches anyObject];

CGFloat now = [touch locationInView:self.view].y;

CGFloat diff = now - start;

sliderDirectionIsUp = diff < 0; //sliderDirectionIsUp is a BOOL

if ((self.userSlider.frame.origin.y == 0) && ((now < 120) || (now > 155))) {

    return;

}

float newCenterY = self.userSlider.center.y + diff;

if (newCenterY < roundf(self.userSlider.frame.size.height / 2)) {

    self.userSlider.center = CGPointMake(self.userSlider.center.x, newCenterY);

    CGRect tableViewFrame = self.gameTableView.frame;

    tableViewFrame.origin.y += diff;

    tableViewFrame.size.height -= diff;

    [self.gameTableView setFrame:tableViewFrame];

}

start = now;

 }

 -(void) touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event

 {

CGRect tableViewFrame = self.gameTableView.frame;

if (sliderDirectionIsUp)

{

    tableViewFrame.origin.y = 28;

    tableViewFrame.size.height = (self.view.frame.size.height - tableViewFrame.origin.y);

    //animate userSlider out of visible area

    [UIView animateWithDuration:.3 animations:^{

        self.userSlider.center = CGPointMake(self.userSlider.center.x, -roundf(self.userSlider.bounds.size.height/2.) + 35);

        [self.gameTableView setFrame:tableViewFrame];

    }];

}

else if(start >= 0)

{

    tableViewFrame.origin.y = (self.userSlider.frame.size.height - 7);

    tableViewFrame.size.height = (self.view.frame.size.height - tableViewFrame.origin.y);

    //animate userSlider with top to mainviews top

    [UIView animateWithDuration:.3 animations:^{

        self.userSlider.center = CGPointMake(self.userSlider.center.x, roundf(self.userSlider.bounds.size.height/2.) - 0.5);

        [self.gameTableView setFrame:tableViewFrame];

    }];

}

 } 
```

那么这两种观点都会改变我想要的方式。

但是现在当我以编程方式添加它时，tableView 突然不会改变，除非我在移动它之后在该区域内点击。这真的很奇怪。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T06:21:47.350

如果你的 userSlider 的框架是

```
CGRectMake(0, -120, 320, 155) 
```

我怀疑您的 userSlider 是否可以接收到 sender 事件。因为如果 UIControl 的框架超出 superView ，它可能不会收到 sender 事件（外部部分）。你可以设置框架

```
CGRectMake(0, 0, 320, 155) 
```

试一试。

# python - wxpython的列表控件中的删除

> ID：14472849
> 
> 赞同：1
> 
> 时间：2013-01-23T05:08:45.920
> 
> 标签：python, wxpython

我的代码正在生成以下错误-“无法检索有关列表控件项 3 的信息”。

```
import wx

DATA = [("0", "Zero"), ("1", "One"), ("2", "Two")]
class MainWindow(wx.Frame):
    def __init__(self, *args, **kwargs):
        wx.Frame.__init__(self, *args, **kwargs)

        self.panel = wx.Panel(self)

        self.list = wx.ListCtrl(self.panel, style=wx.LC_REPORT)
        self.list.InsertColumn(0, "Index")
        self.list.InsertColumn(1, "Number")       
        for data in DATA:
            self.list.Append((data[0], data[1]))

        self.button = wx.Button(self.panel, label="Delete")
        self.button.Bind(wx.EVT_BUTTON, self.OnButton)

        self.sizer = wx.BoxSizer(wx.VERTICAL)
        self.sizer.Add(self.list, 1, wx.ALL | wx.EXPAND, 5)
        self.sizer.Add(self.button, 0, wx.ALL | wx.EXPAND, 5)
        self.panel.SetSizerAndFit(self.sizer)

        self.Show()

    def OnButton(self, e):
        current_items = self.list.GetItemCount()
        while ((current_items) >= 0) :
            if (self.list.GetItemText(current_items) == "1" or self.list.GetItemText(current_items-1) == "2"):
                self.list.DeleteItem(current_items)
                wx.MessageBox("Delete item ", 'Delete Information',wx.OK)
            else:
                break
            current_items-=1

if __name__ == "__main__":
    app = wx.App(False)
    win = MainWindow(None)
    win.Centre()
    app.MainLoop() 
```

谁能告诉我代码有什么问题？我应该怎么做才能解决这个错误？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T09:11:49.510

也许你想要这样的东西？

```
import wx

DATA = [("0", "Zero"), ("1", "One"), ("2", "Two")]
class MainWindow(wx.Frame):
    def __init__(self, *args, **kwargs):
        wx.Frame.__init__(self, *args, **kwargs)

        self.panel = wx.Panel(self)

        self.list = wx.ListCtrl(self.panel, style=wx.LC_REPORT)
        self.list.InsertColumn(0, "Index")
        self.list.InsertColumn(1, "Number")       
        for data in DATA:
            self.list.Append((data[0], data[1]))

        self.button = wx.Button(self.panel, label="Delete")
        self.button.Bind(wx.EVT_BUTTON, self.OnButton)

        self.sizer = wx.BoxSizer(wx.VERTICAL)
        self.sizer.Add(self.list, 1, wx.ALL | wx.EXPAND, 5)
        self.sizer.Add(self.button, 0, wx.ALL | wx.EXPAND, 5)
        self.panel.SetSizerAndFit(self.sizer)

        self.Show()

    def OnButton(self, e):
        current_items = self.list.GetItemCount() - 1
        while ((current_items) >= 0) :
            if (self.list.GetItemText(current_items) == "1" or self.list.GetItemText(current_items) == "2"):
                self.list.DeleteItem(current_items)
                wx.MessageBox("Delete item ", 'Delete Information',wx.OK)
            else:
                break
            current_items-=1

if __name__ == "__main__":
    app = wx.App(False)
    win = MainWindow(None)
    win.Centre()
    app.MainLoop() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T06:13:30.203

```
 def OnButton(self, e):
    itemIndex = self.list.GetNextItem(itemIndex,
                                         wx.LIST_NEXT_ALL,
                                         wx.LIST_STATE_SELECTED);
    print itemIndex
    if itemIndex == -1: 
        print "Nothing Selected";

        # // Got the selected item index
     print "SELECTED:",self.list.GetItemText(itemIndex); 
```

尝试类似的东西

# c# - c#反向构建层次结构

> ID：14472854
> 
> 赞同：1
> 
> 时间：2013-01-23T05:09:21.170
> 
> 标签：c#, linq, hierarchy

我有两种方法可以从平面列表返回动态层次结构。第一个在这里使用递归方法效果很好：[(ID/ParentID) list to Hierarchical list](https://stackoverflow.com/questions/9409021/id-parentid-list-to-hierarchical-list)。

我现在正在尝试做同样的事情，只是这次只显示那些已保存报告输出的类别和报告。我不知道从哪里开始，因为我发现的一切都是从根向下构建的，我需要从下往上。

我现在在我的第一种方法中得到了类似的东西：

```
Category 1
  |_Sub Category 1
    |_Report 1
    |_Report 2
      |_Saved Output
Category 2
  |_Sub Category 2
  | |_Report 3
  | |_Report 4
  |_Sub Category 3
    |_Report 5
    |_Report 6
      |_Saved Output
Category 3
  |_Sub Category 4
    |_Report 7 
```

我在第二种方法中想要的是：

```
Category 1
  |_Sub Category 1
    |_Report 2
      |_Saved Output
Category 2
  |_Sub Category 3
    |_Report 6
      |_Saved Output 
```

这是我的基本测试结构：

```
class Flat
{
    public int id { get; set; }
    public int parentId { get; set; }
    public string name { get; set; }
    public bool isOutput { get; set; }

    public Flat(int i, int pid, string n, bool o)
    {
        this.id = i;
        this.parentId = pid;
        this.name = n;
        this.isOutput = o;
    }
}

class MyClass
{
    public int id { get; set; }
    public int parentId { get; set; }
    public string name { get; set; }
    public bool isOutput { get; set; }

    public List<MyClass> children { get; set; }

    public MyClass()
    {
        this.children = new List<MyClass>();
    }
}

List<Flat> items = new List<Flat>()
        {
                new Flat(1,0,"Category 1",false),
                new Flat(4,1,"Sub Category 1",false),
                new Flat(8,4,"Report 1",false),
                new Flat(9,4,"Report 2",false),
                new Flat(15,9,"Saved Output",true),
                new Flat(2,0,"Category 2",false),
                new Flat(5,2,"Sub Category 2",false),
                new Flat(10,5,"Report 3",false),
                new Flat(11,5,"Report 4",false),
                new Flat(6,2,"Sub Category 3",false),
                new Flat(12,6,"Report 5",false),
                new Flat(13,6,"Report 6",false),
                new Flat(16,13,"Saved Output",true),
                new Flat(3,0,"Category 3",false),
                new Flat(7,3,"Sub Category 4",false),
                new Flat(14,7,"Report 7",false)
        }; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T05:25:55.610

要从下向上构建，您需要从所有有效的叶节点（`output == true`）开始，然后向上遍历所有父节点，直到到达根节点。这是一种应该有效的方法：

```
List<Flat> GetSavedOutput(List<Flat> items)
{
    // get all output leaf nodes
    var toAdd = items.Where (i => i.isOutput == true).ToList();
    var result = new List<Flat>();

    // grab all parent nodes that are not already included until
    // there's nothing new to add
    while (toAdd.Count > 0)
    {
        result.AddRange(toAdd);
        toAdd = items.Where (i => !result.Contains(i)
                               && result.Any (r => r.parentId == i.id)).ToList();
    }

    return result;
} 
```

这是简短而快速的，应该适用于小而简单的树，但它不是最有效的方法，因为一遍又一遍地处理相同的节点。一个稍微复杂但更好的方法是遍历每个项目的父树：

```
List<Flat> GetSavedOutput(List<Flat> items)
{
    var savedOutput = items.Where (i => i.isOutput == true).ToList();
    var result = new List<Flat>();

    foreach (var item in savedOutput) {
        result.Add(item);
        var temp = item;
        do {
            temp = items.Single (i => i.id == temp.parentId);
            result.Add(temp);
        } while (temp.parentId != 0);
    }

    return result;
} 
```

如果这仍然不够高效，可以通过在每个`Flat`实例中存储对父节点的引用来获得更高的性能，这样就可以直接引用父节点，`O(1)`而无需使用调用来查找它`Single`，这有效率`O(n)`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T05:49:20.197

首先，我建议定义一个递归方法来确定一个项目是否有一个输出项目的路径，基于给定的列表：

```
static bool HasPathToOutput(List<Flat> items, Flat item)
{
    if (item.isOutput)
    {
        return true;
    }

    // Recursively determine whether any of the item's children have
    // a path to an output
    return items.Where(i => i.parentId == item.id).Any(i => HasPathToOutput(items, i));
} 
```

然后使用该方法通过一些 LINQ 查询运行您的列表，首先获取具有已保存输出路径的项目，然后构建层次结构，最后仅检索位于其层次结构顶部的项目：

```
// Generate a predicate based on the list
List<MyClass> foundItems = 
       items.Where(item => HasPathToOutput(items, item))
            .Select(f => new MyClass { id = f.id, isOutput = f.isOutput, parentId = f.parentId, name = f.name })
            .ToList();

// Generate child relationships
foundItems.ForEach(item => item.children = foundItems.Where(child => child.parentId == item.id).ToList());

// Filter out top-level items
List<MyClass> topLevel = foundItems.Where(i => i.parentId == 0).ToList(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T10:12:05.720

你想遍历你的数据[深度优先顺序](http://en.wikipedia.org/wiki/Tree_traversal)

这将首先查看所有叶节点，将保存的元素添加到列表中，并向父节点发出根节点已保存的信号。

```
public bool StoreSavedElements(List<Tree> elements)
{
    bool nodeSaved = false;

    foreach (Tree child in childs)
    {
        if (child.StoreSavedElements(elements))
        {
            nodeSaved = true;
        }
    }

    if (this.text == "Saved")
    {
        nodeSaved = true;
        elements.Add(this);
    }

    return nodeSaved;
} 
```

# node.js - 从MongoDB中的数组中删除元素

> ID：14472858
> 
> 赞同：2
> 
> 时间：2013-01-23T05:09:39.543
> 
> 标签：node.js, mongodb, schema

我想从存储在 mongodb 文档中的数组中删除特定元素。我正在使用这个：

```
 model.registerCompany.findOneAndUpdate({companyKey:"a key"},
    {$pop:{onlineEmployees:"John"}},
    function(err,doc){
    if(!err)
        console.log("Online list modified: ",doc);
    else
        console.log("Online list modified error :",err);
}); 
```

但我不确定 $pop 是从 array(onlineEmployees) 中删除特定元素“John”还是只是从中弹出最后一个元素。

我做得对还是有其他方法可以做到。

我想我得到了答案.. $pull 用于此目的，如链接中所述：http: [//docs.mongodb.org/manual/reference/operator/pull/#_S_pull](http://docs.mongodb.org/manual/reference/operator/pull/#_S_pull)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-23T09:16:22.673

[$pop](http://docs.mongodb.org/manual/reference/operator/pop/)运算符将删除数组的第一个或最后一个元素，这不一定是正确的。

如果你想要一个特定的元素，你可以[$pull](http://docs.mongodb.org/manual/reference/operator/pull/)具有定义条件的项目：

```
 model.registerCompany.findOneAndUpdate({companyKey:"a key"},
    {$pull:{onlineEmployees:"John"}}, 
```

您必须确保数组中的值是唯一的，以便`$pull`删除与名称“John”匹配的每个元素。

如果数组中存在相同的值，则需要使用`$unset`and`$`位置运算符将目标元素值设置为`null`（遗憾的是 $unset 不会删除元素），然后使用`$pull`删除具有`null`值的元素。为此，您必须确保有效值不能是`null`. 在这种情况下，代码可能类似于：

```
model.registerCompany.findOneAndUpdate({companyKey:"a key", onlineEmployees:"John"},{ $unset: { "onlineEmployees.$" : '' } } ) 
model.registerCompany.findOneAndUpdate({companyKey:"a key"},{ $pull: { "onlineEmployees" : null } } ) 
```

# php - 无法在列表菜单中输入特定值

> ID：14472859
> 
> 赞同：0
> 
> 时间：2013-01-23T05:09:41.977
> 
> 标签：php, twitter-bootstrap

我在一个脚本中有一个播放列表和一个播放器。当单击列表中的任何一个时，它会传递一个我使用 GET 方法（`$_GET['List_id']`）获取的值，然后播放此特定视频。但我需要一个荧光笔来突出显示正在播放的列表项。在 twitter bootstrap 中，它只需要声明**class='active'**。所以我初始化类blank( `$ive = ''`)，当它与它的`$_GET`值匹配时，它会被激活。但这不起作用，使用此代码，所有列表项都显示为活动状态。如何将此“活动”放在`$ive`变量中？

这是我的代码-

```
<?php
include "ste_content/connect.php";

//initialize
$subID = $_GET['Subcategory_id'];
$listID = $_GET['List_id'];
$list = "";
$ive = '';

$strSQL = "SELECT * FROM `video_links` WHERE `Subcategory_id`=".       
    $_GET["Subcategory_id"] ." ORDER BY `Subcategory_id`";
$rs = mysql_query($strSQL);

while($row = mysql_fetch_array($rs)) {
    $strTitle = $row['List_title'];
    $id = $row['List_id'];

    $strLink = "<a href = 'tv.php?List_id=" . $row['List_id'] 
        . "&&Subcategory_id=". $row['Subcategory_id']."'>" 
        . $strTitle . "</a>";

    if(strcmp($listID,$id)==0){
        $ive = 'active';
    }

    $list .= "<li class='$ive'><a href='#'><i class='icon-chevron-right'></i> $strLink </a></li>" ;  
}

mysql_close();
?> 
```

我在 html 中输出这个**$list**变量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T05:18:50.600

您需要`$ive`在每个循环中重置变量，否则第一次匹配后的所有内容都将处于*活动状态*。

尝试这个

```
$list .= sprintf('<li%s><i class="icon-chevron-right"></i> %s </li>',
                 $id == $listID ? ' class="active"' : '', $strLink); 
```

此外，您似乎正在使用in嵌套`<a>`标签。你可能不想这样做`$strLink``$list`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T05:19:00.090

首先，我发现您的代码容易发生 SQL 注入，所以请注意这一点。

您唯一缺少的是您尚未初始化变量 $ive，您需要在 while 循环中初始化变量，如下所示，以便它覆盖在前一个循环中分配的值。

请参阅下面代码中的第二行是我添加的唯一内容：

```
while($row = mysql_fetch_array($rs)) {
$ive = '';
$strTitle = $row['List_title'];
$id = $row['List_id'];

$strLink = "<a href = 'tv.php?List_id=" . $row['List_id'] . "&&Subcategory_id=".  $row['Subcategory_id']."'>" . $strTitle . "</a>";

if(strcmp($listID,$id)==0){
$ive = 'active';
}

$list .= "<li class='$ive'><a href='#'><i class='icon-chevron-right'></i> $strLink    </a></li>" ;  
} 
```

# facebook - 当用户登录我的网站时，如何在 MySql DB 中存储 facebook 用户的信息（密码除外）

> ID：14472862
> 
> 赞同：0
> 
> 时间：2013-01-23T05:09:56.213
> 
> 标签：facebook, facebook-graph-api

我是 facebook 代码集成的新手。我已经阅读了一些关于 Stackoverflow 的文档和许多问题。我只想访问一个使用 facebook 登录凭据登录我的网站的人的详细信息，并获得他的权限。目前我正在尝试以下操作：

```
<?php
   $app_id = 'YOUR_APP_ID';
   $app_secret = 'YOUR_APP_SECRET';
   $my_url = 'POST_AUTH_URL'; 
```

通过进入我的 Facebook 帐户，我得到了 $app_id 和 $app_secret。但我无法理解 $my_url 的含义。它是在我的服务器上运行的那个吗？我正在我的本地主机上尝试所有这些事情，因为我没有在远程服务器上运行我的网站。如果需要在远程服务器上运行网站，请告诉我 $my_url 的正确格式，或者我是否必须在创建它时在我的 Facebook 应用程序中的某个位置设置它。也许，这是一个非常基本的问题，但如果没有帮助，我将无法继续。非常感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T05:16:39.190

$my_url 是回发 URL。当您要求提供 oauth 凭据时，Facebook 将在此处发布其回复。如果您使用的是 localhost，您可以将其作为 facebook 的 URI 提供。您甚至可以提供端口。

例如，对于 rails 应用程序`http://localhost:3000`是可以接受的。由于 facebook 通过您的 Web 浏览器发回该 uri，它也将遵守您在 hosts 文件中放置的任何规则，因此您可以在本地使用生产 uri。

如果您有 www.myapp.com，然后将其添加到您的主机文件中

127.0.0.1 www.myapp.com

它也应该工作。

# css - 为什么css不透明度效果在chrome中不起作用？

> ID：14472865
> 
> 赞同：1
> 
> 时间：2013-01-23T05:10:35.033
> 
> 标签：css, overlay, transparency, opacity

```
.overlayupload {
  background-color: black;
  position: fixed;
  top: 0; right: 0; bottom: 0; left: 0;
  opacity: 0.4; /* also -moz-opacity, etc. */
  -webkit-opacity: 0.4;
  z-index: 10;
} 
```

以上是用于在进行一些处理并使屏幕禁用时覆盖透明 div 的 css..但这仅适用于 mozila..我想让它也适用于 chrome..所以有人可以告诉我如何我可以这样做吗？

以下是 div..

```
<div class="overlayupload" id="uploadprogress"
                        style="display: none"></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T09:43:27.113

```
#uploadprogress{
      opacity:0.8!important;
} 
```

你为什么用`display:none;`它隐藏整个div

# java - 如何使用javascript打印选择标签的下拉值？

> ID：14472867
> 
> 赞同：1
> 
> 时间：2013-01-23T05:10:54.440
> 
> 标签：java, javascript, html, jsp

我有一个选择泰米尔纳德邦城市的下拉菜单。
所有城市都在一个数组列表中并使用 for 循环，我正在迭代值并使用 document.write 写入，但我仍然没有在下拉列表中打印值。

```
<select>
   <script>
      document.writeln('&ltoption value="chennai">');
   </script>
</select> 
```

现在如何打印下拉值？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T05:30:23.120

假设您正在使用 jquery ：

假设您的 HTML 与此类似

```
<SELECT NAME="mylist">
  <option>Volvo</option>
  <option>Saab</option>
  <option>Mercedes</option>
  <option>Audi</option>
</SELECT>

you need to modify your selector to iterate over the <OPTION> tags, your selector was iterating over the <SELECT> tag

var inputName = mylist;
$(':input[name=' + inputName + '] option').each(function(i, selected)    {
        alert($(selected).text());
}); 
```

如果您需要在 java 脚本中：

```
<form>
<select id="myselect">
<option value="cat">Option 1</option>
<option value="dog">Option 2</option>
<option value="bear">Option 3</option>
</select>
</form>

<script type="text/javascript">
var selectobject=document.getElementById("myselect")
for (var i=0; i<selectobject.length; i++){
alert(selectobject.options[i].text+" "+selectobject.options[i].value)
}

</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T05:24:15.023

```
<select>
    <script >
        var list = [1,2,3];
        for(i in list){
            document.write("<option>"+list[i]+"</option>");
        }
    </script>
<select>

var list = ${cities} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T05:30:23.707

我会给你一个演示。

```
 <?php
  $city=array('Chennai','Madurai','Dindigal');//array containing cities
  $count=1;
  echo "<select>";
  foreach($city as $value)
  {
    echo "<option value='city.$count'>".$value."</option>";
  }

  ?> 
```

希望您能理解。您也可以在jsp中将彼此的id用于其他目的

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T05:16:15.493

您的选项标签应如下所示：

```
<option value="chennai">Chennai</option> 
```

您发布的代码片段会产生一个无效（未关闭）的选项标签。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-23T06:05:30.107

自从我在 JSP 中编写任何东西以来已经有好几年了，你的问题有点不清楚，但我认为你在追求这样的东西吗？

```
<%
 String[] cityArray={"Chennai","Madurai","Dindigal"};
%> 
```

这只是一系列城市的例子——我假设你有自己的

然后，在您的页面代码中

```
<select>
<%
 int i=0;
 for(i=0;i<cityArray.length;i++)
 {
  out.print("<option>" + cityArray[i] + "</option>");
 }
%>
</select> 
```

我没有什么可以测试的，而且 jsp 上的内存有点暗，但这就是你的意思吗？

# apache - 一段时间后与 HTTP 连接的 FIN pkt

> ID：14472868
> 
> 赞同：2
> 
> 时间：2013-01-23T05:11:01.280
> 
> 标签：apache, http, networking, tcp, client-server

打开 2 个 TCP 连接：1\. 正常连接（在实现 echo server、client 时）& 2\. HTTP 连接

在将 apache 作为服务器运行时使用 curl(modified) 实用程序打开了 HTTP 连接，其中 curl 在连接建立后的一段时间内没有发送 GET 请求。对于连接建立后的正常连接，服务器正在等待来自客户端的请求。但正如所观察到的，奇怪的是在连接建立后的 HTTP 连接中，如果 GET 请求不是来自客户端（一段时间），服务器正在向客户端发送 FIN pkt 并关闭他的连接部分。 *HTTP客户端在初始连接后立即发送GET请求是否是强制性条件。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T08:24:50.687

Apache 有一个名为 Timeout 的参数。

它的手册页（[Apache Core - Timeout Directive](http://httpd.apache.org/docs/2.2/mod/core.html#timeout)）指出：

> TimeOut 指令定义了 Apache 在各种情况下等待 I/O 的时间长度：
> 
> 1.  从客户端读取数据时，如果读取缓冲区为空，则等待 TCP 数据包到达的时间长度。
> 2.  向客户端写入数据时，如果发送缓冲区已满，则等待数据包确认的时间长度。
> 3.  在 mod_cgi 中，等待 CGI 脚本输出的时间长度。
> 4.  在 mod_ext_filter 中，等待过滤过程输出的时间长度。
> 5.  在 mod_proxy 中，如果未配置 ProxyTimeout，则为默认超时值。

我认为你陷入了**第一个案例**

**编辑**

我潜伏在 W3 HTTP 文档中，发现没有提到超时。

但在第 8 章（连接）中，我发现：

[8.1.4 实际考虑](http://www.w3.org/Protocols/rfc2616/rfc2616-sec8.html#sec8)

*服务器**通常**会有一些超时值，超过这个值它们将不再保持非活动连接。(...) 持久连接的使用对客户端或服务器的超时长度（或存在）没有任何要求。*

这在我看来就像“每个服务器或客户端都可以自由选择关于非活动连接超时的行为”

# php - 重定向后 Codeigniter 会话数据丢失

> ID：14472869
> 
> 赞同：18
> 
> 时间：2013-01-23T05:11:04.393
> 
> 标签：php, codeigniter

我正在使用 codeigniter 2.1.0。

我正在尝试使用 codeigniter 中的会话库来执行注册/登录功能。

使用会话库的注册/登录对于 localhost 来说工作得很好，但是当我把它上线并尝试它时，会话不起作用。

我的控制器登录以这种方式工作。我检查了凭据，一旦确定，我就设置了会话数据并重定向到另一个页面。

```
$user_data = array(
                   'username'       => $result->user_name,
                   'email'          => $result->user_email,
                   'userid'         => $result->user_id,
                   'role'           => $result->user_role,
                   'login_state'    => TRUE,
                   'lastlogin'      => time(),
               );

$this->session->set_userdata($user_data);           
print_r( $this->session->all_userdata());            
redirect(base_url('dashboard')); 
```

此时，当我打印所有会话数据时，它们确实会打印出来。但是在仪表板控制器端，当我尝试打印会话数据时，它们不再存在。

知道为什么吗？在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2018-06-11T07:03:27.420

如果您在 CI 3.x 中工作并且刚刚将您的服务器 php 版本升级到 php 7.x

转到第 281 行的 system/libraries/Session/session.php 并替换`ini_set('session.name', $params['cookie_name']);`为`ini_set('session.id', $params['cookie_name']);`

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2017-03-10T11:48:28.130

我不确定到底是什么问题。最近我也遇到了这个。。

它以前在我运行 php7.0 的开发中工作。

目前它只在我运行 nginx 和 php 5.6 的生产服务器中工作。我的开发服务器似乎无法正常工作并继续在会话表中重新生成新行。我的开发服务器使用 php7.1，在 homestead virtualbox 开发环境中，通常用于 Laravel 项目。

通过采取这一步，我设法克服了这个问题。

1) 转到系统/库/Session/Session.php

2) 通过添加 // 来注释 session_start()。我们要重新定位 sessionn_start()。

3) 转到第 315 行，上面写着安全为王，并注释掉直到第 351 行

[![在此处输入图像描述](../Images/25b0ea59c0567a69a396cd01870f0fb3.png)](https://i.stack.imgur.com/SQOml.png)

4）然后转到您的主 index.php （根 index.php ）

5) 在顶部添加 session_start() 一次。

[![在此处输入图像描述](../Images/b9dad73641f091adfc833053c4be1448.png)](https://i.stack.imgur.com/SQOml.png)

6）好的，再试一次。希望它有效。我的猜测是它不适用于 php 7.1，需要在这个 Session.php 文件中进行一些更新。

7.  我的 CI 版本是 3.1.1

[![在此处输入图像描述](../Images/1eb939e2cc28e27343892bb4e7a172d2.png)](https://i.stack.imgur.com/SQOml.png)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-11-10T03:22:10.500

PHP 7 升级 - *** 已知 SESSION / COOKIE 错误**

此答案解决了已知的会话/cookie 错误 - 当您从 PHP 5 升级到 PHP7 时。

如果您的 CodeIgniter 版本是 @ 3.1.0 或以下 - 并且您正在升级到 PHP 7.1 - 您将需要更新 CodeIgniter。

有一个错误`$this->session->set_userdata();`- 这可能很烦人。一旦您重定向或访问站点结构中的另一个页面，它就会覆盖您的会话。

* * *

关于该错误的一些其他讨论： [https ://github.com/bcit-ci/CodeIgniter/issues/4830](https://github.com/bcit-ci/CodeIgniter/issues/4830)

***节省一些时间，看看帖子“dyanakiev 于 2016 年 10 月 23 日发表评论”** -

*“只是为了确认：3.1.1 一切正常，会话不再有问题。干得好！”*

* * *

请参阅此处的升级说明： [https](https://www.codeigniter.com/use) ://www.codeigniter.com/use …/installation/upgrading.html

最新 CodeIgniter 在这里下载： [https ://codeigniter.com/download](https://codeigniter.com/download)

*我也可以确认这一点：

将 codeigniter 更新到 3.1.6 立即修复了会话问题 - 这是在我将服务器更新到 PHP 7.1 之后发生的。*

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-07-21T09:07:04.417

在我的情况下，经过一些测试（在 localhost 中使用 https 和 http），该问题出现错误并且没有正确设置 $config['cookie_secure']，因此您可以尝试在 config.php 中进行更改：

```
$config['cookie_secure']    = FALSE; // if is not under https, or true if you use https 
```

干杯!

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-01-23T21:56:05.137

也许你没有自动加载库会话。

您是否在控制器仪表板中尝试过：

```
$this->load->library('session');
print_r($this->session->all_userdata()); 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-12-17T15:18:05.327

这是“雪绒花”答案的补充，但我觉得它需要更多关注，因此作为答案发布。

CI 2.1 因存在与会话相关的问题而臭名昭著。我们最好将内置的 Sessions.php 文件替换为下面的文件。

“雪绒花”给出的链接已损坏。他提到的 Session.php 文件是：

```
<?php  if (!defined('BASEPATH')) exit('No direct script access allowed');
//>  makes dw cs4 happy
/**
* Session class using native PHP session features and hardened against session fixation.
*
* @package     CodeIgniter
* @subpackage  Libraries
* @category    Sessions
* @author      Dariusz Debowczyk, Matthew Toledo
* @link        http://www.philsbury.co.uk/index.php/blog/code-igniter-sessions/
*/
class CI_Session {
    var $flashdata_key     = 'flash'; // prefix for "flash" variables (eg. flash:new:message)
    function CI_Session()
    {
        $this->object =& get_instance();
        log_message('debug', "Native_session Class Initialized");
        $this->_sess_run();
    }
    /**
    * Regenerates session id
    */
    function regenerate_id()
    {
        // copy old session data, including its id
        $old_session_id = session_id();
        $old_session_data = $_SESSION;
        // regenerate session id and store it
        session_regenerate_id();
        $new_session_id = session_id();
        // switch to the old session and destroy its storage
        session_id($old_session_id);
        session_destroy();
        // switch back to the new session id and send the cookie
        session_id($new_session_id);
        session_start();
        // restore the old session data into the new session
        $_SESSION = $old_session_data;
        // update the session creation time
        $_SESSION['regenerated'] = time();
        // session_write_close() patch based on this thread
        // http://www.codeigniter.com/forums/viewthread/1624/
        // there is a question mark ?? as to side affects
        // end the current session and store session data.
        session_write_close();
    }
    /**
    * Destroys the session and erases session storage
    */
    function destroy()
    {
        unset($_SESSION);
        if ( isset( $_COOKIE[session_name()] ) )
        {
            setcookie(session_name(), '', time()-42000, '/');
        }
        session_destroy();
    }
    /**
    * Alias for destroy(), makes 1.7.2 happy.
    */
    function sess_destroy()
    {
        $this->destroy();
    }
    /**
    * Reads given session attribute value
    */
    function userdata($item)
    {
        if($item == 'session_id'){ //added for backward-compatibility
            return session_id();
        }else{
            return ( ! isset($_SESSION[$item])) ? false : $_SESSION[$item];
        }
    }
    /**
    * Sets session attributes to the given values
    */
    function set_userdata($newdata = array(), $newval = '')
    {
        if (is_string($newdata))
        {
            $newdata = array($newdata => $newval);
        }
        if (count($newdata) > 0)
        {
            foreach ($newdata as $key => $val)
            {
                $_SESSION[$key] = $val;
            }
        }
    }
    /**
    * Erases given session attributes
    */
    function unset_userdata($newdata = array())
    {
        if (is_string($newdata))
        {
            $newdata = array($newdata => '');
        }
        if (count($newdata) > 0)
        {
            foreach ($newdata as $key => $val)
            {
                unset($_SESSION[$key]);
            }
        }
    }
    /**
    * Starts up the session system for current request
    */
    function _sess_run()
    {
        session_start();
        $session_id_ttl = $this->object->config->item('sess_expiration');
        if (is_numeric($session_id_ttl))
        {
            if ($session_id_ttl > 0)
            {
                $this->session_id_ttl = $this->object->config->item('sess_expiration');
            }
            else
            {
                $this->session_id_ttl = (60*60*24*365*2);
            }
        }
        // check if session id needs regeneration
        if ( $this->_session_id_expired() )
        {
            // regenerate session id (session data stays the
            // same, but old session storage is destroyed)
            $this->regenerate_id();
        }
        // delete old flashdata (from last request)
        $this->_flashdata_sweep();
        // mark all new flashdata as old (data will be deleted before next request)
        $this->_flashdata_mark();
    }
    /**
    * Checks if session has expired
    */
    function _session_id_expired()
    {
        if ( !isset( $_SESSION['regenerated'] ) )
        {
            $_SESSION['regenerated'] = time();
            return false;
        }
        $expiry_time = time() - $this->session_id_ttl;
        if ( $_SESSION['regenerated'] <=  $expiry_time )
        {
            return true;
        }
        return false;
    }
    /**
    * Sets "flash" data which will be available only in next request (then it will
    * be deleted from session). You can use it to implement "Save succeeded" messages
    * after redirect.
    */
    function set_flashdata($newdata = array(), $newval = '')
    {
        if (is_string($newdata))
        {
            $newdata = array($newdata => $newval);
        }
        if (count($newdata) > 0)
        {
            foreach ($newdata as $key => $val)
            {
                $flashdata_key = $this->flashdata_key.':new:'.$key;
                $this->set_userdata($flashdata_key, $val);
            }
        }
    }
    /**
    * Keeps existing "flash" data available to next request.
    */
    function keep_flashdata($key)
    {
        $old_flashdata_key = $this->flashdata_key.':old:'.$key;
        $value = $this->userdata($old_flashdata_key);
        $new_flashdata_key = $this->flashdata_key.':new:'.$key;
        $this->set_userdata($new_flashdata_key, $value);
    }
    /**
    * Returns "flash" data for the given key.
    */
    function flashdata($key)
    {
        $flashdata_key = $this->flashdata_key.':old:'.$key;
        return $this->userdata($flashdata_key);
    }
    /**
    * PRIVATE: Internal method - marks "flash" session attributes as 'old'
    */
    function _flashdata_mark()
    {
        foreach ($_SESSION as $name => $value)
        {
            $parts = explode(':new:', $name);
            if (is_array($parts) && count($parts) == 2)
            {
                $new_name = $this->flashdata_key.':old:'.$parts[1];
                $this->set_userdata($new_name, $value);
                $this->unset_userdata($name);
            }
        }
    }
    /**
    * PRIVATE: Internal method - removes "flash" session marked as 'old'
    */
    function _flashdata_sweep()
    {
        foreach ($_SESSION as $name => $value)
        {
            $parts = explode(':old:', $name);
            if (is_array($parts) && count($parts) == 2 && $parts[0] == $this->flashdata_key)
            {
                $this->unset_userdata($name);
            }
        }
    }
} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-01-23T23:01:45.937

我意识到您正在尝试调试您的问题；但是您是否尝试过在重定向之前删除回声/打印？

我不是“会话”专家，但我也遇到过类似的问题，即在重定向之前打印出调试信息会导致会话数据在下一页中消失。

另外，@edelweiss 很赚钱 :)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-01-23T05:24:07.093

如果您不使用数据库进行会话，请确保您的应用程序有权将会话文件创建到 /tmp（存储文件会话的位置）。

您很可能需要查看生产服务器上的 php.ini 并验证会话保存处理程序是否已定义[http://devzone.zend.com/413/trick-out-your-session-handler/](http://devzone.zend.com/413/trick-out-your-session-handler/)很好地解释了这一点。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-01-23T09:07:03.270

我看到了一个类似的帖子，并被定向到这里尝试使用他的 session.php

它对我有用！

[http://www.philsbury.co.uk/blog/code-igniter-sessions](http://www.philsbury.co.uk/blog/code-igniter-sessions)

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-08-28T13:30:50.400

我在 CI 3.1.1 中遇到了类似的问题。我尝试了 stackoverflow 上建议的大多数解决方案，但大多数都对我不起作用。我有两个不同的项目，项目 A 的会话正在工作，而项目 B 的会话数据在重定向后丢失数据。通过比较两者，我发现可能是问题的解决方案/解释。

我最初的重定向如下所示：

```
redirect ('name_of_function_in_same_controller'); 
```

我将其更改为：

```
redirect ('/name_of_controller/name_of_function_in_controller'); 
```

它开始起作用了。我相信诀窍是在重定向中包含控制器的名称。确保在 routes.php 中提供控制器名称

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2020-04-20T08:29:40.927

显然，我创建的表 ci_sessions 只有最大 64K 的数据（blob），所以我变成了 mediumblob，它现在工作正常

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2018-03-20T14:28:03.417

我通过升级我的 codeigniter 解决了这个问题。去[Codeigniter 下载](https://www.codeigniter.com/user_guide/installation/downloads.html)

下载它并将您的项目系统文件夹替换为新下载的文件夹。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2020-12-17T08:07:43.293

我面临同样的问题，我正在使用 CodeIgniter 版本 3.1.9。我已经下载了 CodeIgniter 的最新版本 3.1.11，并将我当前的“系统”目录替换为 3.1.11 版本可用的新目录。

上述过程解决了我的问题，并且在 PHP 7.3.12 和 7.4.0 版本中运行良好，没有任何问题。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2020-10-26T17:37:31.887

在我们的案例中，问题与 Chrome SameSite cookie 政策有关。

似乎自从 Chrome 76 发布以来，重定向后浏览器不会设置没有“SameSite=None”和“Secure”属性的 cookie。

对于使用 CodeIgniter 3.1.6 的人，如果您从第三方（例如从 OAuth 登录页面）重定向到您的站点，您必须将其添加到您的 config.php 中：

```
$config['cookie_path']      = '/;SameSite=None';
$config['cookie_secure']    = TRUE; 
```

请记住，这具有安全隐患，因此请务必小心并确保您选择了适合您的应用程序要求的最佳解决方案。

此处的相关问题：[如何在使用 SameSite=Strict 的 OAUTH2 之后重定向并且仍然获取我的 cookie？](https://stackoverflow.com/questions/42216700/how-can-i-redirect-after-oauth2-with-samesite-strict-and-still-get-my-cookies/42220786#42220786)

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2017-12-14T18:55:51.323

如果有人在使用 Homestead 时遇到困难（就像我一样），这是一个 CodeIgniter 错误，并且在较新的版本中不存在（我读过），您可以使用 Homestead 6+“每个项目”升级您的 CI 版本或降级您的 PHP 版本，就像在此样品中：

```
//Homestead.yaml
    - map: myproject.test
      to: /home/vagrant/Code/myproject
      php: "5.6" 
```

然后简单运行`homestead provision`。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2019-04-12T10:06:28.007

检查`$config['base_url'] = 'http://localhost/';`您是否在本地主机上工作，并将其更改为`$config['base_url'] = 'http://localhost';`没有最后一个`/`

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2015-10-02T13:23:34.347

确保在使用 $_SESSION 之前使用 session_start()。我有这个问题，我愚蠢地认为

> $this->load->library('session');

会为我这样做，但不是。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2020-06-18T06:50:47.597

报到`application/config/config.php`

并找到`$config['encryption_key'] = '';`如果它是空的，然后设置`ecryption_key`.

如果每次设置会话变量在重定向后不起作用，它肯定会有所帮助。

更多详情： [http ://codeigniter.com/user_guide/libraries/encryption.html](http://codeigniter.com/user_guide/libraries/encryption.html)

* * *

## 回答 #19

> 赞同：-1
> 
> 时间：2017-09-15T23:13:10.420

这可能晚了。但觉得我应该放弃它。也有同样的问题。我正在使用 codeigniter 和 wiredesignz hmvc，我注意到错误来自 htaccess。尝试在重写基本 url 后添加反斜杠

* * *

## 回答 #20

> 赞同：-1
> 
> 时间：2017-03-28T10:54:01.990

我遇到了同样的问题，经过长时间的研究，我找到了解决方案。

我认为我的会话存储在 db 中而不是文件中，但即使是数据库也被限制存储大小，我认为..

它不是codeigniter的任何核心问题，也不是会话自动销毁的东西或其他东西。

它实际上是会话中数据量的负载，如果我们使用 Codeigniter 在会话中保存越来越多的数据（“我不确定原生会话，但对于 codeigniter 我可以确认这一点”），它会自动销毁会话。

因此，您要做的是，转到您正在编写的代码以从数据库或其他地方获取数据，然后保存到用户数据中的会话中，尝试减少会话内保存的数据负载并排除该数据每次都不需要在会话页面上。

如果还有问题请告诉我..

# android - Android：如何在不强制关闭的情况下处理 try catch 中的错误

> ID：14472870
> 
> 赞同：3
> 
> 时间：2013-01-23T05:11:13.430
> 
> 标签：android

当我运行异步任务连接到 HTTP 服务器时，我想在它无法连接到服务器时显示错误消息。相反，应用程序在错误时强制关闭，而不显示错误消息。我想在发生错误而不是崩溃时显示错误消息，但它只是在正文描述警报对话框中显示带有消息错误（e.getMessage（））的警报对话框。

下面是我的代码：

```
private String downloadUrl(String strUrl) throws IOException {
    String data = "";
    InputStream iStream = null;
    try {
        URL url = new URL(strUrl);

        HttpURLConnection urlConnection = (HttpURLConnection) url
            .openConnection();

        urlConnection.connect();
        iStream = urlConnection.getInputStream();

        BufferedReader br = new BufferedReader(new InputStreamReader(
            iStream));

        StringBuffer sb = new StringBuffer();

        String line = "";
        while ((line = br.readLine()) != null) {
            sb.append(line);
        }
        data = sb.toString();
        br.close();
    } catch (IOException e) {
        Log.d(TAG, e.getMessage());
        ErrorDialog(e.getMessage());
    }

    return data;
 }

private class DownloadTask extends AsyncTask<String, Integer, String> {
    String data = null;

    @Override
    protected String doInBackground(String... url) {
        try {
            data = downloadUrl(url[0]);
        } catch (IOException e) {
            Log.d(TAG, e.getMessage());
            ErrorDialog(e.getMessage());
        }

        return data;
    }

    @Override
    protected void onPostExecute(String result) {
        if (result != null && result.length() < 0) {
            ListViewLoaderTask listViewLoaderTask = new ListViewLoaderTask();
            listViewLoaderTask.execute(result);
        }
    }
}

private void ErrorDialog(String Description) {
    AlertDialog.Builder alertDialog = new AlertDialog.Builder(
            ListCategoryActivity.this);
    alertDialog.setTitle("You get Error...");
    alertDialog.setMessage(Description);
    alertDialog.setIcon(R.drawable.ic_warning);

    alertDialog.setNegativeButton("Cancel",
            new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int which) {
                    dialog.cancel();
                }
            });

    alertDialog.show();
} 
```

日志错误：

```
01-23 11:58:36.949: E/AndroidRuntime(5776): FATAL EXCEPTION: AsyncTask #1
01-23 11:58:36.949: E/AndroidRuntime(5776): java.lang.RuntimeException: An error occured while executing doInBackground()
01-23 11:58:36.949: E/AndroidRuntime(5776):     at android.os.AsyncTask$3.done(AsyncTask.java:278)
01-23 11:58:36.949: E/AndroidRuntime(5776):     at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
01-23 11:58:36.949: E/AndroidRuntime(5776):     at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
01-23 11:58:36.949: E/AndroidRuntime(5776):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
01-23 11:58:36.949: E/AndroidRuntime(5776):     at java.util.concurrent.FutureTask.run(FutureTask.java:137)
01-23 11:58:36.949: E/AndroidRuntime(5776):     at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:208)
01-23 11:58:36.949: E/AndroidRuntime(5776):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
01-23 11:58:36.949: E/AndroidRuntime(5776):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
01-23 11:58:36.949: E/AndroidRuntime(5776):     at java.lang.Thread.run(Thread.java:856)
01-23 11:58:36.949: E/AndroidRuntime(5776): Caused by: java.lang.RuntimeException: Can't create handler inside thread that has not called Looper.prepare()
01-23 11:58:36.949: E/AndroidRuntime(5776):     at android.os.Handler.<init>(Handler.java:121)
01-23 11:58:36.949: E/AndroidRuntime(5776):     at android.app.Dialog.<init>(Dialog.java:107)
01-23 11:58:36.949: E/AndroidRuntime(5776):     at android.app.AlertDialog.<init>(AlertDialog.java:114)
01-23 11:58:36.949: E/AndroidRuntime(5776):     at android.app.AlertDialog$Builder.create(AlertDialog.java:913)
01-23 11:58:36.949: E/AndroidRuntime(5776):     at android.app.AlertDialog$Builder.show(AlertDialog.java:931)
01-23 11:58:36.949: E/AndroidRuntime(5776):     at com.haichal.codefive.ListCategoryActivity.ErrorDialog(ListCategoryActivity.java:327)
01-23 11:58:36.949: E/AndroidRuntime(5776):     at com.haichal.codefive.ListCategoryActivity.downloadUrl(ListCategoryActivity.java:150)
01-23 11:58:36.949: E/AndroidRuntime(5776):     at com.haichal.codefive.ListCategoryActivity.access$2(ListCategoryActivity.java:125)
01-23 11:58:36.949: E/AndroidRuntime(5776):     at com.haichal.codefive.ListCategoryActivity$DownloadTask.doInBackground(ListCategoryActivity.java:162)
01-23 11:58:36.949: E/AndroidRuntime(5776):     at com.haichal.codefive.ListCategoryActivity$DownloadTask.doInBackground(ListCategoryActivity.java:1)
01-23 11:58:36.949: E/AndroidRuntime(5776):     at android.os.AsyncTask$2.call(AsyncTask.java:264)
01-23 11:58:36.949: E/AndroidRuntime(5776):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
01-23 11:58:36.949: E/AndroidRuntime(5776):     ... 5 more
01-23 11:58:38.079: E/WindowManager(5776): Activity com.haichal.codefive.ListCategoryActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@41410d58 that was originally added here
01-23 11:58:38.079: E/WindowManager(5776): android.view.WindowLeaked: Activity com.haichal.codefive.ListCategoryActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@41410d58 that was originally added here
01-23 11:58:38.079: E/WindowManager(5776):  at android.view.ViewRootImpl.<init>(ViewRootImpl.java:344)
01-23 11:58:38.079: E/WindowManager(5776):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:267)
01-23 11:58:38.079: E/WindowManager(5776):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:215)
01-23 11:58:38.079: E/WindowManager(5776):  at android.view.WindowManagerImpl$CompatModeWrapper.addView(WindowManagerImpl.java:140)
01-23 11:58:38.079: E/WindowManager(5776):  at android.view.Window$LocalWindowManager.addView(Window.java:537)
01-23 11:58:38.079: E/WindowManager(5776):  at android.app.Dialog.show(Dialog.java:278)
01-23 11:58:38.079: E/WindowManager(5776):  at com.haichal.codefive.ListCategoryActivity.startDownload(ListCategoryActivity.java:100)
01-23 11:58:38.079: E/WindowManager(5776):  at com.haichal.codefive.ListCategoryActivity.initFromDb(ListCategoryActivity.java:91)
01-23 11:58:38.079: E/WindowManager(5776):  at com.haichal.codefive.ListCategoryActivity.onCreate(ListCategoryActivity.java:54)
01-23 11:58:38.079: E/WindowManager(5776):  at android.app.Activity.performCreate(Activity.java:4465)
01-23 11:58:38.079: E/WindowManager(5776):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
01-23 11:58:38.079: E/WindowManager(5776):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1923)
01-23 11:58:38.079: E/WindowManager(5776):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1984)
01-23 11:58:38.079: E/WindowManager(5776):  at android.app.ActivityThread.access$600(ActivityThread.java:126)
01-23 11:58:38.079: E/WindowManager(5776):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1150)
01-23 11:58:38.079: E/WindowManager(5776):  at android.os.Handler.dispatchMessage(Handler.java:99)
01-23 11:58:38.079: E/WindowManager(5776):  at android.os.Looper.loop(Looper.java:137)
01-23 11:58:38.079: E/WindowManager(5776):  at android.app.ActivityThread.main(ActivityThread.java:4456)
01-23 11:58:38.079: E/WindowManager(5776):  at java.lang.reflect.Method.invokeNative(Native Method)
01-23 11:58:38.079: E/WindowManager(5776):  at java.lang.reflect.Method.invoke(Method.java:511)
01-23 11:58:38.079: E/WindowManager(5776):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:787)
01-23 11:58:38.079: E/WindowManager(5776):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:554)
01-23 11:58:38.079: E/WindowManager(5776):  at dalvik.system.NativeStart.main(Native Method) 
```

Logcat 详细 e.getMessage();

```
01-23 11:58:36.909: D/HaichalLog(5776): failed to connect to 
  /192.168.103.121 (port 80): connect failed: ENETUNREACH (Network is unreachable) 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T05:17:27.733

如日志：

> RuntimeException：无法在未调用 Looper.prepare() 的线程内创建处理程序

因为您正试图从 AsyncTask 的 doInBackground 显示 AlertDialog 而我们无法从 doInBackground 方法更新 UI 元素。更改代码以处理 doInBackground 中的执行：

```
String strcatcherror="";
@Override
protected String doInBackground(String... url) {
    try {
        data = downloadUrl(url[0]);
        strcatcherror="";
    } catch (IOException e) {
        Log.d(TAG, e.getMessage());
        strcatcherror=e.getMessage();

    }

    return data;
}

@Override
protected void onPostExecute(String result) {
    if(!strcatcherror.equals("")){
         if (result != null && result.length() < 0) {
           ListViewLoaderTask listViewLoaderTask = new ListViewLoaderTask();
           listViewLoaderTask.execute(result);
         }
       }
     else{
             // show error message here
             ErrorDialog(strcatcherror);
        }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T05:17:50.667

```
 ErrorDialog(e.getMessage()); 
```

您不能**在 doInBackground() 中调用警报对话框**。

所以替代方法是将全局变量（如 XYZ）放在 Asyc 类中，并将 e.getMessage() 设置为 catch 块内的变量 XYZ。并检查该变量是否为空并执行 ErrorDialog(XYZ); 在 onPostExecute() 方法中。

希望它会帮助你。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-23T05:30:49.763

运行与 UI 线程分开的对话框。试试这种方式：

> ```
>  private class DownloadTask extends AsyncTask<String, Integer, String> {
>     String data = null;
>     @Override
>     protected String doInBackground(String... url) {
>        try {
>             data = downloadUrl(url[0]);
>           } catch (IOException e) {
>            Log.d(TAG, e.getMessage());
>         runOnUiThread(new Runnable(){
>           public void run() {
>                  ErrorDialog(e.getMessage());
>                 }
>      });
>     }
> }
>         return data;
>     }
>     @Override
>     protected void onPostExecute(String result) {
>         if (result != null && result.length() < 0) {
>             ListViewLoaderTask listViewLoaderTask = new ListViewLoaderTask();
>             listViewLoaderTask.execute(result);
>         }
>     }
>     } 
> ```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-23T05:55:31.243

您不能直接从 doinbackground() 显示警报对话框。您需要从 runOnUIThread() 调用它或从 postExecute() 调用或向活动处理程序发送消息。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-11-16T13:50:32.207

Urlconnection 有 setTimeout 方法。用 SocketTimeOutException 捕获它（这将被扔回给调用者）。用吐司来处理它。

# hadoop - 在 Terminal-LINUX-HBASE 中看不到 RegionServer

> ID：14472875
> 
> 赞同：1
> 
> 时间：2013-01-23T05:11:29.307
> 
> 标签：hadoop, hbase

我安装了 hadoop，我的 HBase 在它上面运行。我在 hadoop 中的所有守护程序都已启动并运行。在我启动我的 hbase 后，当我发出 JPS 命令时，我可以看到 HMaster 正在运行。

我在伪分布式模式下运行我的 hadoop。当我检查我的本地主机时，它显示 regionserver 正在运行。

但是为什么我在 Linux 的终端中看不到 HRegionServer 运行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T10:14:11.320

可能是因为`hbase.cluster.distributed`未设置或设置为 false `hbase-site.xml`。
根据[http://hbase.apache.org/book/config.files.html](http://hbase.apache.org/book/config.files.html)：

> hbase.cluster.distributed ：
> 集群将处于的模式。独立模式的可能值为 false，分布式模式的可能值为 true。如果为 false，startup 将在一个 JVM 中一起运行所有 HBase 和 ZooKeeper 守护进程。默认值：假

因此，如果将其设置为**true**，您将看到不同的 master、region server 和 ZooKeeper 进程。例如：一个伪分布式 Hadoop/HBase 进程列表如下所示：

```
jps
3991 HMaster
4209 HRegionServer
3140 DataNode
3464 TaskTracker
3246 JobTracker
2942 NameNode
3924 HQuorumPeer 
```

# php - PHP：存储的对象引用存储在 $_SESSION 中时会发生什么

> ID：14472876
> 
> 赞同：1
> 
> 时间：2013-01-23T05:11:36.470
> 
> 标签：php

当对象引用存储在会话容器 ($_SESSION) 中时会发生什么？

在这个过程中，当值被序列化时，对象引用是被转换成副本还是被破坏了？

```
session_start();
$testArrayA = [];
$testArrayB = [];    
$testArrayA["abc"] = &$testArrayB;
$testArrayB["def"] = "test2";
$_SESSION["myvalue"] = $testArrayA; 
```

非常感谢提前

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T05:15:22.650

当会话被写入时，它会被序列化。序列化根本不关心引用，因为它只是读取数据（如果它从引用中读取，它将解析引用的目标）。

您可以通过将最后一行更改为：

```
var_dump(serialize($testArrayA));

string(44) "a:1:{s:3:"abc";a:1:{s:3:"def";s:5:"test2";}}" 
```

这就是存储在会话中的内容。

请注意，如果一个对象实现`__sleep`或`Serializable`接口，它的序列化行为是唯一的。我相信这`PDO`会覆盖序列化行为以破坏其数据库连接引用。

# jquery - XSS 问题在 Web 服务器以外的其他端口上访问 REST API

> ID：14472878
> 
> 赞同：0
> 
> 时间：2013-01-23T05:11:42.723
> 
> 标签：jquery, rest, nginx, xss

我需要一些帮助。我在 domain.se:80 上有 Web 服务器，在 domain.se:8080 上有一个 REST API。我的网站是从 domain.se:80 加载的，它是一个单页应用程序，因此只需一次加载就足够了，随后会调用 REST API。尝试这个时什么也没发生。该应用程序拒绝调用我的 REST API。阅读此内容时，这可能被视为 XSS 问题吗？Web 浏览器是否认为我的 REST API 位于另一个端口（8080）而不是加载站点的位置（80），因为它是由 Javascript 调用的？

有谁认识这个问题？它必须是单页应用程序的一个非常常见的设置。我用 nginx 解决了这个问题，让 nginx 暴露端口 80，然后如果 url 以 /api/v1 开头，则将请求传递给 REST API，并且所有其他请求都传递给 Web 服务器。但这感觉像是一种变通方法，我想让 nginx 不碍事 :)

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T17:11:52.440

所以你有两种选择。

1.  像你做的那样做代理，我们在所有情况下都用 8080 上的 tomcat 做
2.  使用 jsonp 调用而不是直接 json。这不会导致 xss 问题。

您可以在此处阅读有关 jsonp 的更多信息： [http ://en.wikipedia.org/wiki/JSONP](http://en.wikipedia.org/wiki/JSONP)

我通常使用 tomcat 来提供静态组件、负载平衡和安全性。

谢谢

克里斯

# java - 如果 specfile 中不满足某些条件，如何中止安装 rpm 包？

> ID：14472880
> 
> 赞同：2
> 
> 时间：2013-01-23T05:11:50.593
> 
> 标签：java, linux, rpm, rpmbuild, rpm-spec

`Requires`标签不满足的还有一些事情。所以我写了一个脚本来验证这些东西，但我应该把它们放在哪里？如果没有找到，那么我想退出安装，提示用户在尝试再次安装此 rpm 之前执行这些步骤。

写入标签无法使用 rpmbuild 构建 rpm `exit 1`。`%install`说`%install has a bad exit code.`

**编辑：**让我给你举个例子。我最初想测试的是是否存在 Oracle Java 6。如果没有，则提供 Java6 的路径。如果用户未能提供...退出 RPM。不允许使用更高级别的 Java，没有 java 就不能成功安装。如果用户不想安装 java rpm 包，则不能将其放在 Requires 中。

希望我明白我的意思。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-23T07:35:33.970

您可以将 %pre 部分用于此类任务。

> %pre 脚本在要安装软件包之前执行。这是一种在安装前需要做任何事情的罕见软件包；组成 Red Hat Linux Linux 4.0 的 350 个软件包都没有使用它。

一些帮助您入门的指南；脚本内容（未在 %pre 部分中使用）来自 jpackage-utils，您会在那里找到一些其他好的脚本示例：

```
 %pre
  # try to find jvm from java command

  # try javac first, or we might get the location of the jre instead - djw
  java=`which javac 2>/dev/null || :`

  # if we don't have the jdk, then maybe we have the jre - djw
  if [ -z "$java" ] ; then
    java=`which java 2>/dev/null || :`
  fi

  if [ -n "$java" ] ; then
    while [ -h "$java" ] ; do
      java=`readlink $java 2>/dev/null`
    done
    return
  fi

  echo "Can't find java virtual machine, aborting."
  exit 1 
```

# wordpress - 如何访问 Wordpress 仪表板？

> ID：14472886
> 
> 赞同：-1
> 
> 时间：2013-01-23T05:12:29.467
> 
> 标签：wordpress

我在我的 wamp 本地服务器中安装了 wordpress 并使用主题创建了一个站点。到目前为止，我一直在使用主题本身页面之一中可用的仪表板链接来登录 wordpress 并使用仪表板。现在，当我更新页面并获取所有与 wordpress 相关的链接时，我无法再次访问仪表板。如何才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T05:25:01.263

您也可以执行 http://localhost/wp-login.php 或者您可以使用提交您的用户名和密码的表单设置您自己的自定义页面，然后在您自己的页面上处理登录。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T05:14:28.240

转到以下网址 http://localhost/you-site-path/wp-admin

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T05:15:03.263

打开 yoursite.com/wp-admin 并登录以查看您的仪表板。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-23T05:16:33.023

它应该是`localhost/your-wp-folder/wp-admin/`

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-01-23T05:16:33.983

你正在寻找，

```
http://localhost/wp-admin/ 
```

只需在 Wordpress 站点 url 后添加“wp-admin”，您就可以在仪表板上。

# android - 如何在 android 中获取复选框选中的 Listview 值？

> ID：14472889
> 
> 赞同：0
> 
> 时间：2013-01-23T05:12:42.747
> 
> 标签：android, checkbox, selection

我在屏幕上显示带有 Android 列表视图的复选框。现在我想根据复选框选择获取列表项的值。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T05:18:53.863

查看带有复选框的列表视图教程，您将了解获取选中项目的值。[关联](http://www.mysamplecode.com/2012/07/android-listview-checkbox-example.html)

# asp.net - GridView 中列的宽度不固定

> ID：14472891
> 
> 赞同：0
> 
> 时间：2013-01-23T05:13:05.127
> 
> 标签：asp.net, gridview

我尝试不同的“属性”：

*   ItemStyle-宽度
*   ControlStyle-宽度
*   HeaderStyle-宽度

我将 ItemStyle-Wrap 设置为“true”。我使用 css 类：

```
.wraptext
{
    word-wrap:break-word;
    -ms-word-wrap: break-word;
    -moz-word-wrap: break-word;
    -webkit-word-wrap: break-word;
} 
```

它没有帮助我。我的网格视图：

```
<asp:Panel ID="Panel2" Height="570px" Width="100%" runat="server" ScrollBars="Vertical" BackColor="White">
    <asp:GridView ID="tableResults" runat="server" DataSourceID="sourceDetails"
        AutoGenerateColumns="False" OnDataBound="tableResults_Bound"
        OnRowDataBound = "tableResults_DataBound" DataKeyNames="i_id"
        AutoGenerateDeleteButton="True" OnRowDeleted="tableResults_RowDeleted"
        AutoGenerateEditButton = "True" OnRowUpdating="tableResults_RowUpdating"
        OnRowUpdated="tableResults_RowUpdated" AllowSorting="true" AllowPaging="true" PageSize="150"
        Height="300px" BorderStyle="None" Font-Size="12px">            
        <RowStyle BorderColor="Black" />
      <Columns>          
        <asp:TemplateField HeaderText="Код патча" SortExpression="patchcode" ItemStyle-Width="4%">
            <HeaderStyle Width="4%" />
            <ItemTemplate>
                <asp:Label Width="4%" ID="lblPatchCode" runat="server" Text='<%# Eval("patchcode") %>'></asp:Label>
            </ItemTemplate>
        </asp:TemplateField>
        <asp:BoundField HeaderStyle-Width="3%" ItemStyle-Width="3%" DataField="i_number" ReadOnly="true" HeaderText="П/п" SortExpression="i_number"/>
        <asp:BoundField HeaderStyle-Width="20%" ItemStyle-CssClass="wraptext" ItemStyle-Width="20%" DataField="s_name" ReadOnly="true" HeaderText="Наименование работы" SortExpression="s_name"/>            
        <asp:TemplateField HeaderText="Статус" SortExpression="status" ItemStyle-Width="7%">
            <HeaderStyle Width="7%" />
            <ItemTemplate>
                <asp:Label ID="lblStatus" runat="server" Text='<%# Eval("status")%>'></asp:Label>
            </ItemTemplate>
            <EditItemTemplate>
                <asp:Label ID="lblStatus" runat="server" Text='<%# Eval("status")%>' Visible = "false"></asp:Label>                     
                <asp:DropDownList AutoPostBack="true" OnSelectedIndexChanged="ddl_OnSelectedIndexChanged"
                    ID="ddlStatuses" runat="server"></asp:DropDownList>
            </EditItemTemplate>
        </asp:TemplateField>             
      </Columns>           
     </asp:GridView> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T05:19:08.473

[CSS3 word-wrap 属性](http://www.w3schools.com/cssref/css3_pr_word-wrap.asp)是一个 CSS3 特性，因此只能在支持 css3 的现代浏览器中工作`word-wrap`

为了回退到不支持的浏览器，请使用 .NET和page-behind`GridView`中的方法来打破字母。`Eval``public`

# layout - 如何让 laravel 的 @layout 功能正常工作？

> ID：14472893
> 
> 赞同：1
> 
> 时间：2013-01-23T05:13:16.567
> 
> 标签：layout, view, laravel, blade

我是 laravel 的新手，想学习 BLADE，但有一个问题让我很震惊。我有一个

```
index.blade.php

@layout('master') 
```

我也有一个

```
master.blade.php
<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<title>Laravel: A Framework For Web Artisans</title>
<meta name="viewport" content="width=device-width">

</head>
<body>
hi from body
</body>
</html> 
```

问题是，当我尝试调用 index.blade.php 时，它会给我一个错误提示

```
Unhandled Exception
Message:

View [master] doesn't exist.

Location:

C:\xampp\htdocs\laravel-laravel2\laravel\view.php on line 170

Stack Trace:

#0 C:\xampp\htdocs\laravel-laravel2\laravel\view.php(107): Laravel\View->path('master')
#1 C:\xampp\htdocs\laravel-laravel2\laravel\view.php(218): Laravel\View-                                >__construct('master', Array)
#2 C:\xampp\htdocs\laravel-laravel2\laravel\helpers.php(526): Laravel\View::make('master', Array)
#3 C:\xampp\htdocs\laravel-laravel2\laravel\view.php(386) : eval()'d code(2): view('master')
#4 C:\xampp\htdocs\laravel-laravel2\laravel\view.php(386): eval()
#5 C:\xampp\htdocs\laravel-laravel2\laravel\blade.php(71): Laravel\View->get()
#6 [internal function]: Laravel\Blade::Laravel\{closure}(Object(Laravel\View))
#7 C:\xampp\htdocs\laravel-laravel2\laravel\event.php(199): call_user_func_array(Object(Closure), Array)
#8 C:\xampp\htdocs\laravel-laravel2\laravel\event.php(138): Laravel\Event::fire('laravel.view.en...', Array, true)
#9 C:\xampp\htdocs\laravel-laravel2\laravel\view.php(348): Laravel\Event::until('laravel.view.en...', Array)
#10 C:\xampp\htdocs\laravel-laravel2\laravel\view.php(590): Laravel\View->render()
#11 C:\xampp\htdocs\laravel-laravel2\laravel\response.php(268): Laravel\View->__toString()
#12 C:\xampp\htdocs\laravel-laravel2\laravel\laravel.php(180): Laravel\Response->render()
#13 C:\xampp\htdocs\laravel-laravel2\public\index.php(34): require('C:\xampp\htdocs...')
#14 {main} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T09:18:31.317

我有同样的问题。这可能是您的错误，也可能取决于您的环境。无论哪种方式，请尝试以下三件事：

*   放在`@layout('master')`你的 php 文件的顶部 - 没有空格。

*   确保您的主视图标记为 master.blade.php - 没有大写字母。

*   确保 master.blade.php 在 application/views

注意：如果您的主视图位于不同的文件夹中，例如 application/views/some_folder 正确的调用方式是`@layout('some_folder.master')`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-06T14:19:46.357

使用@extends('master') 而不是@layout('master')

# c# - 清除 wpf 中的数据网格值

> ID：14472894
> 
> 赞同：11
> 
> 时间：2013-01-23T05:13:22.563
> 
> 标签：c#, .net, wpf, datagrid

`datagrid`每次单击 a 时，我都需要刷新我的`treeviewitem`。我的代码如下。

```
private void treeView1_SelectedItemChanged(object sender, RoutedPropertyChangedEventArgs<object> e)
{
    this.dataGrid1.Columns.Clear();
    this.dataGrid1.ItemsSource= null;
    String path =this.treeView1.SelectedItem;
    if (!File.Exists(path))
        MessageBox.Show("Not Found");
    else
    {
        ob.provider(path);

        //   String data = @"C:\logs.xml";
        string data = path;
        objref.functionality(data);
        this.dataGrid1.ItemsSource = objref.Result;
    }
} 
```

但是每次当我单击树视图项时，数据网格都不会被清除——它会附加传入的数据。我两个都用过`dataGrid1.Columns.Clear()`，`dataGrid.ItemSource= null;` 我该怎么做？？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-01-23T05:40:10.673

如果您使用以下方法填充 DataGrid：

```
dataGrid.Items.Add(someObject); 
```

然后你应该能够使用：

```
dataGrid.Items.Clear(); 
```

删除所有行。

如果您绑定到 ItemsSource，例如：

```
dataGrid.ItemsSource = someCollection; 
```

然后您应该能够将 ItemsSource 设置为 null，它将删除所有行。

编辑：

不要忘记刷新它：

```
dataGrid.Items.Refresh(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-09-21T00:53:51.130

您可以考虑使用`ObservableCollection<>`class 而不是`IEnumerable<>`.

```
ObservableCollection<User> users = new ObservableCollection<User>();
dataGrid1.ItemsSource = users; 
```

您可以使用以下代码清除数据网格。

```
users.Clear(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-11-16T11:31:48.083

我尝试了几种方法，这是迄今为止最好和最可靠的一种：

```
dataGrid.Columns.Clear();
dataGrid.Items.Clear();
dataGrid.Items.Refresh(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T08:50:17.900

我有一个公共`IEnumerable`集合，每次调用该函数时都会附加该集合。因此，通过覆盖它，我刷新了 Datagrid 中的数据。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-05-06T14:30:17.847

我可以通过将 DataContext 设置为 null 来清除我的数据网格。

```
DataGrid.DataContext=null; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-08-29T10:17:02.580

如果绑定一个Itemsource，最简单的方法是

`dataGrid1.ItemSource = null;`

# c#-4.0 - 即使在 SQL Server 2008 中成功执行命令，数据也没有保存到数据库中？

> ID：14472895
> 
> 赞同：0
> 
> 时间：2013-01-23T05:13:25.023
> 
> 标签：c#-4.0, sql-server-2008-r2

我知道，这似乎是一百万次被问到的问题，但我再次问，因为早期的答案并不能解决我的问题。

我有这个存储过程：

```
ALTER PROCEDURE [dbo].[My_Save_Command_SP] 
    @Param1 varchar (50),
    @Param2 varchar (500),
    @Param3 varchar(500),
    @Param4 varchar (500),
    @Param5 varchar (500),
    @Param6 varchar (500) 
AS
BEGIN
    SET NOCOUNT ON;

    DECLARE  @ParamID BIGINT 
    SET @ParamID = 0

    SET @ParamID = (SELECT ISNULL(ParamID,0) AS ParamID FROM t_MyTable WHERE Param1 = @Param1)

    IF @ParamID > 0 
    BEGIN
       UPDATE t_MyTable 
       SET Param2 = @Param2, Param3 = @Param3, Param4 = @Param4, 
           Param5 = @Param5, Param6 = @Param6
       WHERE Param1 = @Param1 
    END
    ELSE
    BEGIN
      SET @ParamID = (select ISNULL(MAX(ParamID),0) AS ParamID from t_MyTable) 
      SET @ParamID = @ParamID + 1

      INSERT INTO t_MyTable (ParamID, Param1, Param2, Param3, Param4, Param5, Param6) 
      VALUES (@ParamID, @Param1, @Param2, @Param3, @Param4, @Param5, @Param6)
    END
END 
```

下面是后端代码-

```
Boolean bResult = false;
Int32 nCounter = 0;
Int32 nAffectedRow = -1;

using (SqlConnection connection = DBAccessDA.CreateConnection())
{
    SqlCommand command = DBAccessDA.CreateCommand(connection);

    SqlTransaction transaction = connection.BeginTransaction();
    DBAccessDA.CreateStoredprocedure(command, "My_Save_Command_SP");

    for (int i = 0; i < pList.Count; i++)
    {
        nAffectedRow = -1;
        command.Parameters.Clear();
        DBAccessDA.AddInParameter(command, "@Param1", SqlDbType.VarChar, pList[i].Param1);
        DBAccessDA.AddInParameter(command, "@Param2", SqlDbType.VarChar, pList[i].Param2);
        DBAccessDA.AddInParameter(command, "@Param3", SqlDbType.VarChar, pList[i].Param3);
        DBAccessDA.AddInParameter(command, "@Param4", SqlDbType.VarChar, pList[i].Param4);
        DBAccessDA.AddInParameter(command, "@Param5", SqlDbType.VarChar, pList[i].Param5);
        DBAccessDA.AddInParameter(command, "@Param6", SqlDbType.VarChar, pList[i].Param6);

        // This line returns -1  
        nAffectedRow = DBAccessDA.ExecuteNonQuery(command, transaction); 

        if (nAffectedRow > 0)
        {
           nCounter++;
        }
     }

     if (nCounter == pList.Count)
     {
        transaction.Commit();
        bResult = true;
     }
     else
     {
        transaction.Rollback();
        bResult = false;
     }
  } 
```

如果我使用相同的参数从 SQL 查询窗口运行存储过程，它会插入数据，但不是来自代码。请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T15:11:59.337

来自@dan 的评论：

> 我认为是`SET NOCOUNT ON`您的 SP 中的声明是问题所在。受影响的记录数为 0，您的后端代码回滚事务。尝试从 SP 中删除该语句。

# c++ - 在 cpp 中返回一对时出错

> ID：14472897
> 
> 赞同：3
> 
> 时间：2013-01-23T05:13:47.223
> 
> 标签：c++, compiler-errors, binary-tree

我有以下代码：

```
 return new std::pair<BST<Data>::iterator(cursor), true>; 
```

这会导致以下错误：

> 无法将 '(operator new(4u), (, ((int*))))' 从 'int*' 转换为 'std::pair, bool>'
> 模板参数列表中参数 1 的类型/值不匹配模板结构 std::pair'

这里可能有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T06:09:30.383

除了`new`（除非必须，否则不要使用 new）和`return`，为了构造 a `pair`，请使用上述`make_pair()`函数或调用构造函数，如下所示`pair<T1, T2>(v1, v2)`：您将类型 ( `pair<T1, T2>`) 与初始化该类型实例 ( `v1, v2`) 的值混合在一起。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T08:12:52.043

你想返回什么？值对还是指向新对象对的指针？在函数声明中查看返回类型以了解您的意图可能很有用。

如果您想退回一对，您最好使用：

```
template <class T1,class T2>
  pair<T1,T2> make_pair (T1 x, T2 y)
  {
    return ( pair<T1,T2>(x,y) );
  } 
```

也就是说，类似：

```
return  std::make_pair ( BST<Data>::iterator(cursor),  true); 
```

或直接：

```
return ( pair<T1,T2>(x,y) ); 
```

也就是说，类似：

```
return ( std::pair< BST<Data>::iterator , bool>( cursor, true) ); 
```

如果您想要一个指向新创建对象的指针，请使用：

```
return ( new std::pair< BST<Data>::iterator , bool>( cursor, true) ); 
```

现在：

> 这里可能有什么问题？

看着：

```
template <class T1, class T2> struct pair
{
  typedef T1 first_type;
  typedef T2 second_type;

  T1 first;
  T2 second;
  pair() : first(T1()), second(T2()) {}
  pair(const T1& x, const T2& y) : first(x), second(y) {}
  template <class U, class V>
    pair (const pair<U,V> &p) : first(p.first), second(p.second) { }
}; 
```

您正在尝试使用我们需要类型`T1`和`T2`.

# vba - 代码未在所有打开的工作簿上运行

> ID：14472902
> 
> 赞同：0
> 
> 时间：2013-01-23T05:14:29.350
> 
> 标签：vba, excel, excel-2010

[循环浏览打开的工作簿](https://stackoverflow.com/questions/14412208/looping-through-opened-workbooks)

它的代码贯穿所有打开的工作簿，但有一个问题是它运行了大约 10 到 12 次然后停止。谁能给个思路...

```
Sub OpenAllWorkbooks()
    Set destWB = ActiveWorkbook

    Dim DestCell As Range

    FileNames = Application.GetOpenFilename( _
        filefilter:="Excel Files (*.csv*),*.csv*", _
        Title:="Select the workbooks to load.", MultiSelect:=True)

    If IsArray(FileNames) = False Then
        If FileNames = False Then
            Exit Sub
        End If
    End If

    For n = LBound(FileNames) To UBound(FileNames)
        Set wb = Workbooks.Open(Filename:=FileNames(n), ReadOnly:=True)
    Next n

    Dim cwb As Workbook

    For Each cwb In Workbooks
        'With Application

            'cwb.AcceptAllChanges
        'End With

        Call donemovementReport

        ActiveWorkbook.Close True
        ActiveWorkbook.Close False
    Next cwb
 End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T06:26:51.763

为什么要一次性打开所有工作簿？一个一个地打开它们，然后在你的工作完成时关闭它们。例如（**未测试**）

```
 Sub OpenAllWorkbooks()
    Dim wb As Workbook, thisWb As Workbook
    Dim DestCell As Range
    Dim FileNames As Variant
    Dim n As Long

    Set thisWb = ThisWorkbook

    FileNames = Application.GetOpenFilename( _
                filefilter:="Excel Files (*.csv*),*.csv*", _
                Title:="Select the workbooks to load.", MultiSelect:=True)

    If IsArray(FileNames) = False Then
        If FileNames = False Then
            Exit Sub
        End If
    End If

    For n = LBound(FileNames) To UBound(FileNames)
        Set wb = Workbooks.Open(Filename:=FileNames(n), ReadOnly:=True)

        Call donemovementReport

        wb.Close SaveChanges:=True
    Next n
 End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T11:18:35.427

在 95% 的情况下，我用来循环许多文件的解决方案可能会有所帮助：

```
Sub CSV_Cycling()

InputFolder = "D:\DOCUMENTS\"

    LoopFileNameExt = Dir(InputFolder & "*.csv")
    Do While LoopFileNameExt <> ""
    'Application.DisplayAlerts = False
    Application.Workbooks.Open (InputFolder & LoopFileNameExt)
    'Application.DisplayAlerts = True
    [..........YOUR CODE..........]
    LoopFileNameExt = Dir
    Loop 'Input Folder Files Cycling

End Sub 
```

取消注释`Application.DisplayAlerts =`字符串以避免任何警告 - 如果需要（但要小心 - 文件将使用“默认”选项打开）并更改源路径，当然）。

# ektron - 在 Ektron 中创建内容的 XLIFF 文件

> ID：14472903
> 
> 赞同：1
> 
> 时间：2013-01-23T05:14:41.297
> 
> 标签：ektron, xliff

我在 Ektron 8.6 中工作。

我正在创建一个自定义小部件，用于通过传递其内容 ID 为工作区中的相应内容创建 XLIFF 文件。我已经参考了我的 ektron 网站的 workarea 文件夹中的文件，以获取 Ektron API 来模拟此功能（因为这已经由 ektron 处理）。我从以下文件中获得了一些输入：Workarea\controls\content\localization_uc.ascx .cs 并尝试了以下代码：

```
Localization temp = new Localization();
temp.StartExportContentForTranslation("36,12,50", "1031,1041"); 
```

我也试过：

```
 Ektron.Cms.ContentAPI m_refContentApi = new Ektron.Cms.ContentAPI();
            Ektron.Cms.BusinessObjects.Localization.L10nManager localizationManager = null;
            localizationManager = new    Ektron.Cms.BusinessObjects.Localization.L10nManager(m_refContentApi.RequestInformationRef);
            localizationManager.StartExportContentForTranslation("30,35", "1078,1052");
            localizationManager.StartImportTranslation(); 
```

但是这段代码似乎不起作用。我在这里做错了什么？我发现了关于同一问题的另一个[SO question](https://stackoverflow.com/questions/12330302/content-export-in-ektron)。但是该循环也没有解决该问题。有人可以帮我解决这个问题吗？

# c++ - 寻找一个有效的 Hauppauge Colossus 过滤器图

> ID：14472910
> 
> 赞同：2
> 
> 时间：2013-01-23T05:15:12.947
> 
> 标签：c++, directshow, capture

我真的没有运气让我的 Hauppauge Colossus 在我的应用程序中工作。有没有人有这个设备的工作过滤器图？或者需要添加到过滤器图中以查看组件源的 c++/c# 过滤器列表？

回答：

所以我终于弄明白了，我的非问题的答案。如果有人正在寻找相同的东西，过滤器图如下所示：

*   Hauppauge Colossus 横梁
*   Hauppauge Colossus Capture
*   Hauppauge Colossus TSEncoder
*   Hauppauge 图形实用程序过滤器 (Microsoft Demux)
*   Microsoft DTV-DVD 视频解码器
*   Microsoft DTV-DVD 音频解码器
*   视频渲染器
*   音频渲染器

# javascript - 动态地将新数据重新加载到令牌输入中，并更改预填充选项

> ID：14472913
> 
> 赞同：0
> 
> 时间：2013-01-23T05:15:24.083
> 
> 标签：javascript, jquery, autocomplete, jquery-autocomplete, tokenize

我正在使用 James Smith 的 jQuery Tokeninput。初始化令牌输入后，我需要更改提供给它的数据并更改脚本控制下的预填充选项。我怎样才能做到这一点？

这是我的代码：

## 初始化：

```
 $('#nameList').tokenInput(data, {
           theme: "facebook",
          preventDuplicates: true
        }); 
```

稍后在脚本中，我想更改本地“数据”的值并为其添加预填充。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-23T05:22:48.070

您可以将 url 提供给您的服务器端脚本，您可以在其中获取所有必需的数据并将其作为 json 发送...

> 创建一个服务器端脚本（PHP、Rails、ASP.net 等）来生成您的搜索结果。该脚本可以从您喜欢的任何地方获取数据，例如数据库或硬编码列表。您的脚本必须接受一个名为 q 的 GET 参数，该参数将包含要搜索的术语。例如[http://www.example.com/myscript?q=query](http://www.example.com/myscript?q=query)

你可以在[这里浏览文档](http://loopj.com/jquery-tokeninput/)

```
 $(document).ready(function () {
   $("#nameList").tokenInput("http://www.example.com/myscript");
}) 
```

并且您在服务器端的结果应该以 json 格式返回，例如

PHP（如果您使用的是 PHP...）

```
echo json_encode($data); 
```

例子

```
[
   {"id":"856","name":"House"},
   {"id":"1035","name":"Desperate Housewives"},
    ...
] 
```

# c# - 如何在 WCF 中有两个同名的方法？

> ID：14472918
> 
> 赞同：6
> 
> 时间：2013-01-23T05:16:00.807
> 
> 标签：c#, .net, wcf

> **可能重复：**
> [为什么不能重载 WCF 中的方法？](https://stackoverflow.com/questions/10276124/why-you-cant-overload-a-method-in-wcf)

我正在开发一个使用 WCF 服务的项目。我的问题是，在 WCF 服务中，我有一个名为`Display()`client1 的方法。

现在我想添加另一种具有相同名称但具有一个参数的方法，即。`Display(string name)`, 这样新的 clinet2 可以使用新方法，旧的 client1 可以使用旧方法。我怎样才能做到这一点？这是我编写的代码。

```
namespace ContractVersioningService
{
  [ServiceContract]
  public interface IService1 
  {
    [OperationContract]
    string Display();

    [OperationContract]
    string GoodNight();
  }     
}

namespace ContractVersioningService
{
   public class Service1 : IService1
   {
     public string Display()
     {
        return "Good Morning";          
     }

     public string GoodNight()
     {
        return "Good Night";
     }
   }
}    

namespace ContractVersioningService
{
  [ServiceContract(Namespace = "ContractVersioningService/01", Name =      "ServiceVersioning")]
  public interface IService2 : IService1
  {
     [OperationContract]
     string Disp(string greet);
  }
}

namespace ContractVersioningService
{

   public class Service2 : Service1, IService2
   {
      public string Display(string name)
      {
         return name;
      }

      public string Disp(string s)
      {
         return s;
      }
   }
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-23T06:49:56.830

```
 Why WCF doesnot support method overloading directly ? 
```

*   因为 WSDL 不支持方法重载（不是 OOP）。WCF 生成 WSDL，它指定服务的位置以及服务公开的操作或方法。

    **WCF 使用 Document/Literal WSDL Style**：微软提出了这个标准，soap body 元素将包含 web 方法名称。

*   默认情况下，所有 WCF 服务都符合文档文字标准，soap 主体应包含方法名称。

    唯一的方法是使用 Name 属性。例如，

    ```
     [OperationContract(Name="Integers")]
        int Display(int a,int b)
        [OperationContract(Name="Doubles")]
        double Display(double a,double b) 
    ```

编译器将生成以下内容，这对于 wsdl 定位是有意义的

```
 [System.CodeDom.Compiler.GeneratedCodeAttribute("System.ServiceModel", "3.0.0.0")]
    [System.ServiceModel.ServiceContractAttribute(ConfigurationName=
    "ServiceRef.IService1")]
  public interface IService1
   {
       [System.ServiceModel.OperationContractAttribute(
       Action="http://tempuri.org/Service1/AddNumber",
       ReplyAction="http://tempuri.org/IHelloWorld/IntegersResponse")]                   
       int Display(int a,int b)

       [System.ServiceModel.OperationContractAttribute(
       Action="http://tempuri.org/IHelloWorld/ConcatenateStrings",
       ReplyAction="http://tempuri.org/Service1/DoublesResponse")]
       double Display(double a,double b)
  } 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-23T06:28:08.963

好的，我要回答这个问题，因为现在评论变得过度了。

你基本上有两个选择：

*   使用单个接口（请注意，接口继承，就像您在问题中建议的那样，在技术上算作*一个*接口），但是您*必须为*每个服务操作指定一个不同的名称。您可以通过将 C# 方法命名为不同的方法，或者通过应用`[OperationContract(Name = "distinctname")]`属性来做到这一点。

*   使用两个独立的接口，它们之间没有任何继承关系，将每个接口发布在不同的端点上。然后，您可以在每个中都有一个服务操作，具有相同的名称，但具有不同的参数。当然，如果您愿意/需要，您仍然可以使用一个实现类来实现这两个接口。

# android - 摇屏解锁

> ID：14472921
> 
> 赞同：1
> 
> 时间：2013-01-23T05:16:14.660
> 
> 标签：android

我正在开发一个应用程序，它将在摇动时锁定屏幕，它由一个主要活动组成，该活动有两个按钮来启动和停止应用程序。之后，它进入广播接收器，该接收器正在检查屏幕是打开还是关闭，然后重定向到服务。对于前 3 或 4 次摇动锁定并解锁其工作完美，然后无限期执行。

我正在使用的广播接收器是..

```
 public void onReceive(Context context, Intent intent) {

        System.out.println("Entered Broadcaste Reciever");

        if (intent.getAction().equals(Intent.ACTION_SCREEN_OFF)) {
            // DO WHATEVER YOU NEED TO DO HERE

            wasScreenOn = "1";
           System.out.println("Check"+"Screen went OFF");
            Intent i = new Intent(context, UpdateService.class);
            i.putExtra("screenstate", wasScreenOn);
            context.startService(i);
            System.out.println("jrkejhr keh");

        }
        else if (intent.getAction().equals(Intent.ACTION_SCREEN_ON)) {
            // AND DO WHATEVER YOU NEED TO DO HERE

            wasScreenOn = "2";
            Log.i("Check","Screen went ONN");
            System.out.println("Entering to the service.................");
            Intent ScreenOnIntent = new Intent(context,UpdateService.class); 
            ScreenOnIntent.putExtra("screenstate", wasScreenOn);
            context.startService(ScreenOnIntent);  

        }

    } 
```

服务是......

```
 public void onStart(Intent intent, int startId) {
             System.out.println("Entered On Start");    

             data=intent.getStringExtra("screenstate");
             System.out.println("Data from Broadcast Receiver is"+data);
              mShaker = new ShakeListener(this);
                mShaker.setOnShakeListener(new ShakeListener.OnShakeListener () {
                  public void onShake()
                  {
             if(data.equals("1"))
             {
                 System.out.println(".............................................");

                PowerManager TempPowerManager = (PowerManager) getSystemService(Context.POWER_SERVICE);
                PowerManager.WakeLock TempWakeLock = TempPowerManager.newWakeLock(PowerManager.FULL_WAKE_LOCK | PowerManager.ACQUIRE_CAUSES_WAKEUP |PowerManager.ON_AFTER_RELEASE, "TempWakeLock");
                TempWakeLock.acquire();
                final Vibrator vibe = (Vibrator)getSystemService(Context.VIBRATOR_SERVICE);
                vibe.vibrate(100);

             }

              else
             {  
                  final Vibrator vibe = (Vibrator)getSystemService(Context.VIBRATOR_SERVICE);
                    mDPM = (DevicePolicyManager)getSystemService(Context.DEVICE_POLICY_SERVICE);

                            System.out.println("The screen is off and is shaking.........");

                             vibe.vibrate(100);

                            IntentFilter filter = new IntentFilter(Intent.ACTION_SCREEN_ON); 
                            filter.addAction(Intent.ACTION_SCREEN_OFF);
                            BroadcastReceiver mReceiver = new ScreenReceiver();
                            registerReceiver(mReceiver, filter);

                            ComponentName mAdminName = new ComponentName(UpdateService.this,LockActivity.class);

                                System.out.println("The Device  device admin enabled");
                               Intent  intent = new Intent(DevicePolicyManager.ACTION_ADD_DEVICE_ADMIN);
                                intent.putExtra(DevicePolicyManager.EXTRA_DEVICE_ADMIN, mAdminName);
                                  intent.putExtra(DevicePolicyManager.EXTRA_ADD_EXPLANATION,"onEnabled");
                                mDPM.lockNow();
                                mDPM.setMaximumTimeToLock(mAdminName,0);
                                  intent.putExtra("force-locked", DeviceAdminInfo.USES_POLICY_FORCE_LOCK);

   //                                       startActivityForResult(intent, 1); 
                        }

                  }
                });
         } 
```

我只想执行一次..如果屏幕打开执行一次并关闭屏幕，反之亦然..

# ruby - Ruby提取数组值

> ID：14472922
> 
> 赞同：-2
> 
> 时间：2013-01-23T05:16:16.050
> 
> 标签：ruby, arrays, concatenation

我想从一个数组中提取某些值并将它们连接到另一个空数组中：

```
freqs=[1,12,4,15,7,8,11,5,6]
less_freqs=[] 
```

这就是我想出的。

```
freqs.collect{|x| x<9 then x.to_a{|y|less_freqs<<y}} 
```

也许是不同的方法？而且，我什至不确定是否`then`有任何意义。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T05:18:18.600

这是你要找的吗？

```
freqs = [1,12,4,15,7,8,11,5,6]
less_freqs = freqs.select{|x| x < 9 } # => [1, 4, 7, 8, 5, 6] 
```

# ssl-certificate - 为什么不进行反向查找来针对 IP 验证 ssl 证书？

> ID：14472934
> 
> 赞同：2
> 
> 时间：2013-01-23T05:16:45.707
> 
> 标签：ssl-certificate, ip-address

我为“host1.domain.com”生成了一个 ssl 证书。此主机配置了 4 个 NIC。192.168.1.10、192.168.1.11、192.168.1.12 和 192.168.1.13 是 IP。现在，如果我尝试浏览 IP，它会导致证书不匹配，并且可以按预期与主机名一起正常工作。为什么不进行查找以验证针对 ip 的证书？

# asp.net - ie8 asp.net中的网页错误

> ID：14472936
> 
> 赞同：0
> 
> 时间：2013-01-23T05:16:57.927
> 
> 标签：asp.net, c#-4.0, internet-explorer-8

```
Webpage error details

User Agent: Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 6.1; WOW64; Trident/4.0; SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR 3.0.30729; .NET4.0C; .NET4.0E)
Timestamp: Wed, 23 Jan 2013 05:01:55 UTC

Message: Object expected
Line: 62
Char: 1
Code: 0
URI: http://localhost:4001/abc.aspx?id=12 
```

我在每个页面中都收到此错误，特别是在 ie8 中。导致问题的我的脚本是

```
<script type="text/javascript">DM_redirect("http://mobile.dudamobile.com/site/abc");      </script> 
```

它在 Google Chrome 和 Mozilla 上都能完美运行

我如何摆脱这个问题

**正在使用的脚本是这个**

```
http://static.dudamobile.com/DM_redirect.js 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T05:37:57.290

几周前我遇到了类似的问题。您基本上必须在语言中指定“javascript”，因为 IE8 会读取其他内容。

最后这对我有用。

# c# - 在每个循环中过滤一个集合

> ID：14472938
> 
> 赞同：0
> 
> 时间：2013-01-23T05:17:05.190
> 
> 标签：c#, collections, lambda

我有所有 MovieDTO 对象的集合以及用户最喜欢的电影的 MovieDTO 集合。

我想在所有电影集合的每个对象中添加一个布尔标志 Selected =true，如果用户收藏中存在特定项目。

我希望用一些 lambda 表达式或一些 Func 或某种方式来完成它，而不是编写两个 for-each 循环。

```
public class Movie{
 public string Name{get;set;}
 public DateTime ReleaseDate{get;set;}
 public string Director {get;set;}
 public int Id{get;set;}
 //more property
}

//This class is mainly used to highlight the favourite movie in UI
public class MovieDTO{
 public string MovieName{get;set;}
 public boolean Selected{get;set;}
 public int Id{get;set;}
}

List<Movie> AllMovies = MyService.AllMovies();

List<MovieDTO> UserFavouriteMovie = MyService.GetUserMovies();

List<MovieDTO> allMovieDTO = AllMovies.Select(x => new MovieDTO
{
    Name=x.Name,
    //Selected=true/false => here i want 
     // to check if x is exist in UserFavouriteMovie collection
}).ToList(); 
```

有什么建议不在这里为每个循环使用两个吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T05:27:34.070

获取所有名称并将它们放入一个`HashSet`有效搜索中，然后仅`Contains`用于每个项目。

```
var names = new HashSet<string>(UserFavouriteMovie.Select(movie => movie.Name);

List<MovieDTO> allMovieDTO = AllMovies.Select(x => new MovieDTO
{
    Name=x.Name,
    Selected = names.Contains(x.Name),
}).ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T05:22:14.380

假设我们只能通过以下方式比较用户的最爱和电影`name`：

```
var allMovieDTO = AllMovies.Select(x => new MovieDTO
{
   Name = x.Name,
   Selected = UserFavouriteMovies.Any(f => f.name == x.name)
 }).ToList(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-22T15:51:44.183

你特别要求使用 Func 所以虽然我确信有更好的方法来解决这个问题。这是一些代码...

如果列表很大，这可能需要一些时间，因为它将在 UserFavoriteMovie 上搜索每个 AllMovies。

```
 List<Movie> AllMovies = new List<Movie>();

        List<MovieDTO> UserFavouriteMovie = new List<MovieDTO>();

        List<MovieDTO> allMovieDTO = AllMovies.Select(x => new MovieDTO
        {
             MovieName = x.Name
             , Selected = new Func<bool>(() => {

                 if (UserFavouriteMovie.Exists(a => a.Id == x.Id))
                 {
                     return true;
                 }
                 else
                 {
                     return false;
                 }

             }).Invoke()
        }).ToList(); 
```

但是，您不需要使用 Func。就这样做...

```
 , Selected = UserFavouriteMovie.Exists(a => a.Id == x.Id) 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-23T05:44:00.207

未列出 Movie 和 MovieDTO 的详细信息。所以我只是写了一个粗略的演示来满足您的要求。

```
List<int> a = new List<int> { 1, 2, 3, 4 };
List<int> b = new List<int> { 3, 2 };
List<int> c = a.Where(o => b.Contains(o) ).ToList(); 
```

您可以进行一些更改以使其适合您的项目。

# android - 是否有一个意图过滤器来捕捉从浏览器开始下载？

> ID：14472939
> 
> 赞同：0
> 
> 时间：2013-01-23T05:17:14.293
> 
> 标签：android, intentfilter

在包括默认浏览器和 Chrome 在内的多个浏览器应用程序中，如果您长按链接，则会出现一个名为“保存链接”的选项。点击此选项将使用 DownloadManager 开始下载。

我正在尝试找到一个意图过滤器，它可以让用户选择使用我的应用程序来处理下载。我没有运气找到一个。

我通过查看 DownloadManager 知道您可以在下载完成时收到广播，但我希望能够在它开始之前了解它。

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T06:09:05.807

你不与[`DownloadManger`](http://developer.android.com/reference/android/app/DownloadManager.html)虽然`Intent`s 交互。相反，您使用[`getSystemService(String)`](http://developer.android.com/reference/android/content/Context.html#getSystemService%28java.lang.String%29)它来处理它。因此，并不真正支持替代下载管理器。

# c# - 如何在html表格中添加复选框？

> ID：14472941
> 
> 赞同：2
> 
> 时间：2013-01-23T05:17:37.100
> 
> 标签：c#, asp.net, html

我需要在 html 表中添加一个复选框，我知道通常的方法，例如

```
 <td>  
        <input type="checkbox" name ="chk1" />  
    </td> 
```

我目前的代码是

```
string html=""; 
html += "<table>";
html += "<tr><th>" + "A" + "</th><th>" + "B" + "</th><th>" + "C" + </th></tr>";
html += "<tr><td>" + "0" + "</td><td>" + "1" + "</td><td>" + "2" + </td></td>+"<input type="checkbox" name ="chk1" /> "  +</td>  </tr>"; 
html += "</table>"; 
```

但这给出了一个错误

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T05:20:19.947

你错过了一些报价

请使用此代码

```
string html=""; 
html += "<table>";
html += "<tr><th>" + "A" + "</th><th>" + "B" + "</th><th>" + "C" + "</th></tr>";
html += "<tr><td>" + "0" + "</td><td>" + "1" + "</td><td>" + "2" + "</td></td>"+"<input type='checkbox' name ='chk1' /> "  +"</td>  </tr>"; 
html += "</table>"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T05:23:21.520

看来您缺少引号，您也可以删除一些引号（和行）：

```
string html=""; 
html += "<table>";
html += "<tr><th>A</th><th>B</th><th>C</th></tr>";
html += "<tr><td>0</td><td>1</td><td>2</td></td><input type=\"checkbox\" name =\"chk1\" /></td></tr>"; 
html += "</table>"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T05:25:16.280

不需要连接，只需将单引号放在外面，如下例所示：

```
string html = ''; 
html += '<table>';
html += '<tr><th>A</th><th>A</th><th>C</th></tr>';
html += '<tr><td>0</td><td>1</td><td>2</td></td><input type="checkbox" name ="chk1"  /></td></tr>'; 
html += '</table>'; 
```

# ext.net - EXT.Net - 具有属性的动态 UserControlLoader

> ID：14472942
> 
> 赞同：1
> 
> 时间：2013-01-23T05:17:36.640
> 
> 标签：ext.net

我需要以下场景的解决方案。我正在 EXT.Net 控件的帮助下在 ASP.Net 中开发一个应用程序。

在我的场景中，我正在创建动态选项卡 (EXT.Net) 并使用 UserControlLoader 组件动态加载用户控件。

如何动态地将参数传递给 UserControl？下面是我的示例代码。

```
[DirectMethod]
public void AddNewTab()
{
    getTitle gt = new getTitle();
    Ext.Net.Panel panel = new Ext.Net.Panel
    {
        Title = gt.Title(),
        Closable = false,
        Layout = "Fit",
        Items = {
                    new UserControlLoader{
                    Path="ElementChooser.ascx"
                    }
                }
    };
    TabPanel1.Add(panel);
    panel.Render();
    TabPanel1.SetLastTabAsActive();
} 
```

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T05:55:46.527

有点不清楚“将参数传递给用户控件”的含义，但我认为您需要处理 UserControlLoader 的 OnUserControlAdded 和 OnComponentAdded 事件。

第一个在用户控件添加到 UserControlLoader 时触发。

第二个为来自用户控件的每个顶级 Ext.NET 组件触发。

这些事件有助于根据需要配置用户控件及其组件。

这是OnComponentAdded 示例的示例[。](http://examples.ext.net/#/Combination_Samples/Applications/Feed_Viewer/)

# javascript - 如何根据 JQuery 或 Javascript 中 div 的高度设置 padding-top？

> ID：14472948
> 
> 赞同：0
> 
> 时间：2013-01-23T05:17:52.573
> 
> 标签：javascript, jquery, html

大家好，我有一个产品网站，每个产品的 div 高度根据输入的信息而有所不同。

我需要一个我拥有的 div，它可以`position: absolute`根据`padding-top:58em;`包含`padding-top`所有产品信息的一个 div 的高度自动填充。我不确定如何做到这一点，所以如果你们能提供帮助，我将不胜感激:)

希望这是有道理的，如果没有，请告诉我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T06:06:39.653

您是否打算计算 padding-top 以确保您的所有内容都排在底部？例如，您是否希望这样做： http: [//pastehtml.com/view/cq0m3bubz.html](http://pastehtml.com/view/cq0m3bubz.html)？

如果这是您要查找的内容，则无需以编程方式设置 padding-top，您只需设置以下属性（假设容器 div 已经设置了固定高度）：

```
#父母{
    显示：表格；
}

＃孩子 {
     显示：表格单元格；
     垂直对齐：底部；
}

```

我希望这就是你要找的！

# html - css布局布局错误

> ID：14472950
> 
> 赞同：0
> 
> 时间：2013-01-23T05:18:09.833
> 
> 标签：html, css, layout

我目前无法在我的布局中添加边框和边框半径。我尝试了很多不同的东西，但无法让它发挥作用。请帮我。我将在下面提供 HTML 和 CSS 源代码。

**HTML：**

```
<div class="colmask fullpage">
    <div class="col1">
        <!-- Column 1 start -->

        ...content goes here...

        <!-- Column 1 end -->
    </div>
</div> 
```

**CSS：**

```
/* column container */
.colmask {
  position: relative;   /* This fixes the IE7 overflow hidden bug and stops the layout jumping out of place */
  clear: both;
  float: left;
  width: 100%;          /* width of whole page */
  overflow: hidden;     /* This chops off any overhanging divs */

}
/* 1 column full page settings */
.fullpage {
  background: #fff;
}
.fullpage .col1 {
  margin: 0 1em;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T05:26:54.563

我希望这是你的追求，而不是使用边框：1px; 试试 box-shadow: 0 0 2px 0 #000000; jsfiddle.net/XYwc4/1

# asp.net - 从 sharepoint 中的快速启动栏中获取项目

> ID：14472951
> 
> 赞同：0
> 
> 时间：2013-01-23T05:18:09.397
> 
> 标签：asp.net, sharepoint, quicklaunch

我有事要做.. 以 **编程**方式从sharepoint的**快速启动栏中****检索/获取/获取**项目。

 ****也就是说，要以编程方式检索特定站点的所有快速启动栏项目，例如列表、日历、公告等。需要在asp.net中进行。请提供一些帮助。

我是 SharePoint 的新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T13:52:16.530

你可以做这样的事情

> SPNavigationNodeCollection 节点 = web.Navigation.QuickLaunch;
> for(int i = nodes.Count - 1; i >= 0; i--)
> {
> //这将允许您使用 nodes[i] 访问快速启动中可用的所有节点
> }

另见此链接：[http ://www.mtelligent.com/journal/2007/10/7/customizing-the-quick-launch-menu-with-spnavigationnode-spna.html](http://www.mtelligent.com/journal/2007/10/7/customizing-the-quick-launch-menu-with-spnavigationnode-spna.html)

希望这可以帮助****

# php - 为什么我不能在 Javascript 函数中将字符串作为参数传递？

> ID：14472952
> 
> 赞同：2
> 
> 时间：2013-01-23T05:18:12.627
> 
> 标签：php, javascript, function, arguments

我在php中有以下代码：

```
<?php
$apples = 123123;
echo "<td>
         <input type='button' onclick='confirmation($apples)' value='ac/in'>
      </td>";

echo('<script type="text/javascript">
           function confirmation(test) {
              var answer = confirm("Are you sure?")
              if (answer){
                  alert(test);
                  $.get("/index.php?f=func_name_to_call", 
                  {name: "John", hobby: "Programming"}, function(data) {});
              }
           }
</script>');
?> 
```

如果 $apples 是一个数字，那么参数会正确传递；但是，当它是一个字符串时，函数确认（）被破坏。有任何想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-23T05:20:34.817

如果您希望它将参数作为字符串传递，请使用以下编辑过的代码

```
echo "<td><input type='button' onclick='confirmation(\"$apples\")' value='ac/in'></td>"; 
```

仅`\`用于转义双引号，它将被视为字符串。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T05:34:00.803

是的，您必须在调用确认函数时使用转义字符\“\”，因为您在整数类型参数中传递整数，该参数没有双引号。因此它将字符串转换为整数......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T05:54:58.857

```
<?php
$apples = 123123;
?>
<td>
    <input type='button' onclick='confirmation(<?php echo $apples?>)' value='ac/in'>
</td>

<script type="text/javascript">
    function confirmation(test) {
        var answer = confirm("Are you sure?")
        if (answer){
            alert(test);
            $.get("/index.php?f=func_name_to_call", 
            {name: "John", hobby: "Programming"}, function(data) {});
        }
    }
</script> 
```

你会遇到将所有这些转换成的麻烦，`'`因为`"`你回应他们`php`，只是一个建议不要`echo`他们，使用`html`标记，只是逃避你的`php`

# java - 使用 AddElement 更改 DefaultListModel 时不显示 JList

> ID：14472953
> 
> 赞同：0
> 
> 时间：2013-01-23T05:18:17.267
> 
> 标签：java, swing, jscrollpane, jlist, defaultlistmodel

我正在为组件设计课程实施一个程序，目前正在努力解决应该简单使用 Jlist 的问题。程序绘制形状并应将它们显示在框架的 BorderLayout.West 中的 ScrollPane 中的 JList 中。

当前程序显示了 ScrollPane，但不会显示我添加到 shapeListModel 中的对象。我想知道我遗漏了什么，或者我的代码是否有问题。目前，这是参与 JList 创建、分配和更新的所有代码。

```
 //Class Variable Declaration
protected ArrayList<Shape> shapes = new ArrayList<Shape>();
private JScrollPane shapeScrollPane = new JScrollPane();
private JList<String> shapeList;
protected DefaultListModel<String> shapeListModel;

    //Creation of JList objects and what not
shapeListModel = new DefaultListModel<String>();

    //This element is added aimply to try and get one to show up on my JList, 
shapeListModel.addElement("SERIOUSLY FRUSTRATED"); 
    //It does not just so you know

shapeList = new JList<String>(shapeListModel);
shapeList.setModel(shapeListModel);

    //Adding JList to ScrollPane and setting size
shapeScrollPane.add(shapeList);
shapeScrollPane.setPreferredSize(new Dimension(250,600));

//Clarifying JList actions  
shapeList.setSelectionMode(ListSelectionModel.SINGLE_INTERVAL_SELECTION);
shapeList.setLayoutOrientation(JList.HORIZONTAL_WRAP);
shapeList.setVisibleRowCount(-1);
shapeList.addListSelectionListener(this);**

    //This is called everytime a new shape is created and adds it to the Arraylist
    //shapes and the DefaultListModel shapeListModel
shapes.add(newShape);
shapeListModel.addElement(newShape.toString()); 
```

我为我刚才格式错误的问题道歉。我已经坚持了大约 4 个小时，最后两个小时花在网上寻找答案。我现在要问任何人是否在我的代码中看到问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T05:21:32.960

您不会在滚动窗格中“添加”组件。您需要设置它的视口视图。

不要这样做...

```
shapeScrollPane.add(shapeList); 
```

做这个...

```
shapeScrollPane.setViewportView(shapeList); 
```

查看

*   [如何使用滚动窗格](http://docs.oracle.com/javase/tutorial/uiswing/components/scrollpane.html)
*   [`JScrollPane#setViewportView`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JScrollPane.html#setViewportView%28java.awt.Component%29)

另外，这`shapeList.setVisibleRowCount(-1)`让我害怕到无止境。

**更新**

你也不需要这个...

```
shapeList = new JList<String>(shapeListModel);
shapeList.setModel(shapeListModel); 
```

这已经足够了......

```
shapeList = new JList<String>(shapeListModel); 
```

**更新**

此外，如果这与之前关闭的问题中使用的代码相同......

这`canvas.getGraphics()`吓死我了！！如果您的讲师给了您此代码，那么他们不应该教您！

# sql - 在 Rails 中以字符串形式获取 SQL 查询的结果

> ID：14472956
> 
> 赞同：0
> 
> 时间：2013-01-23T05:18:35.040
> 
> 标签：sql, ruby-on-rails, join, average, rails-activerecord

当我像这样从命令行运行复杂的 sql 查询时

```
sqlite3 db/development.sqlite3 < queries.sql 
```

我得到这样的结果

```
Competency Name|Component Name|3.77|4.0|0.23
Another Competency Name|Another Component Name|3.77|4.0|0.23 
```

我可以像这样轻松解析

```
hidden_strengh_strings = results.split("\n")[1..-1];
hidden_strengh_strings.each do |hidden_strength_string|
  hidden_strengh_values = hidden_strength_string.split("|");

  hidden_strength = {}
  hidden_strength.merge!(:competency => hidden_strengh_values[0]);
  hidden_strength.merge!(:component => hidden_strengh_values[1]);
  hidden_strength.merge!(:reviewer_average_score => hidden_strengh_values[2]);
  hidden_strength.merge!(:reviewee_average_score => hidden_strengh_values[3]);
  hidden_strength.merge!(:exceedance => hidden_strengh_values[4]);

  hidden_strengths << hidden_strength
end 
```

但我不知道如何从 ActiveRecord 中获得这些结果。

```
results = ActiveRecord::Base.connection.execute(File.open(Rails.root.join('queries.sql'), 'r') { |f| f.read } ); 
```

似乎没有做我想做的事。

我很乐意采取任何方法来解决这个问题。甚至从 ActiveRecord DSL 中重写 sql。但我需要帮助找到正确的方向。

谢谢 ： ）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T16:20:48.620

Nishant 引导我找到解决方案。

```
ActiveRecord::Base.connection.execute 
```

工作正常，只是查询开始于：

```
select 'HIDDEN STRENGTHS'; 
```

所以 exec 以分号结尾。

谢谢！

# haskell - 分析 IxSet 的方式？

> ID：14472958
> 
> 赞同：3
> 
> 时间：2013-01-23T05:18:42.413
> 
> 标签：haskell, profiling, happstack

我正在继续开发我的程序`IxSet`，我很好奇我是否做错了什么（或者可以优化）。目前它消耗的内存比我认为的要多。

程序在这里：[https](https://bitbucket.org/k_bx/duplicates) ://bitbucket.org/k_bx/duplicates 分析结果在这里：[https ://gist.github.com/4602235](https://gist.github.com/4602235)

ps：请有人添加“ixset”标签，因为我无法创建一个。

更新：

使用 -h 进行内存分析：http: [//img-fotki.yandex.ru/get/6442/72443267.2/0_9d04d_4be1cd9f_orig](http://img-fotki.yandex.ru/get/6442/72443267.2/0_9d04d_4be1cd9f_orig)

更新 2：

相同 -h 文件的整洁内存分析视图：http: [//heap.ezyang.com/view/c1781ec5e53b00d30a9f8cd02f0b8a5e777674c9#form](http://heap.ezyang.com/view/c1781ec5e53b00d30a9f8cd02f0b8a5e777674c9#form)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T15:38:10.750

您只是在使用普通堆分析，它不一定捕获数据结构的使用。正如您所指出的，它通过代码中的函数分解堆。您可以通过探查器获得您想要的几个选项（来自 ghc 指南：[http ://www.haskell.org/ghc/docs/latest/html/users_guide/prof-heap.html#rts-options-堆教授](http://www.haskell.org/ghc/docs/latest/html/users_guide/prof-heap.html#rts-options-heap-prof)）

> -hc（可以缩写为 -h）。按生成数据的成本中心堆栈分解图表。
> 
> -hm 按包含生成数据的代码的模块分解活动堆。
> 
> -hd 按闭包描述分解图。对于实际数据，描述只是构造函数名称，对于其他闭包，它是编译器生成的标识闭包的字符串。
> 
> -hy 按类型细分图表。对于具有函数类型或未知/多态类型的闭包，字符串将代表实际类型的近似值。
> 
> -hr 按保持器集细分图表。
> 
> -hb 按传记分解图表。下面更详细地描述了传记简介

hm、hd 和 hr 可能对您最有用。考虑一下，您还可以通过使用 hb 获取有关严格性属性的一些信息。

# ruby-on-rails - 如何在 Rails 3 中将每页下拉菜单中的项目添加到索引视图？

> ID：14472964
> 
> 赞同：0
> 
> 时间：2013-01-23T05:18:54.427
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在尝试在 Rails 3.2 中创建一个分页索引视图，其中包含一个下拉菜单来选择每页显示的项目数。我正在使用 will_paginate gem，并且分页功能运行良好。

但是，使用下面显示的当前设置，更改下拉菜单选择时出现验证错误。它似乎正在尝试创建或保存 Contact 模型，而不是仅仅向 index 操作发出另一个请求。任何帮助将不胜感激。

这是我的索引操作：

```
def index
  #logic here to set per_page value depending on request?
  @contacts = Contact.paginate(page: params[:page], :per_page => 20)
end 
```

这是我的 index.html.erb 视图，我尝试使用每页项目的下拉菜单：

```
<%= form_tag({ :action => "index", :method => "get" }, { :id => "contacts-index" }) do %>
  <%= select_tag(:view, options_for_select([["10", 10], ["25", 25], ["50", 50]]), { :id => "switch-view" }) %>
<% end %>

<% @contacts.each do |contact| %>
  <%= contact.first_name %><%= contact.last_name %>
<% end %> 
```

最后，当每页的项目发生变化时，这是我用来尝试将新请求提交给 contacts#index 的 jQuery：

```
$(document).ready(function() {
  $("#switch-view").change(function() {
    $("#contacts-index").submit();
  });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T05:42:18.843

`:method => get`应该从第一个哈希中移出。

```
<%= form_tag({ :action => "index"}, { :method => "get", :id => "contacts-index" }) do %> 
```

Without this, it's doing a post and submitting the 'method' as a param. A post to the 'index' url will result in the validation errors you're seeing.

# jquery - 尝试将宽度和高度属性添加到 SRC

> ID：14472967
> 
> 赞同：1
> 
> 时间：2013-01-23T05:19:01.040
> 
> 标签：jquery

我正在尝试将宽度和高度添加到 .attr() 内的 URL 路径 var 并且无法正确获取语法。任何帮助，将不胜感激。

```
$(this).attr('src',lstAlbumart + ' + width="250" height="250" +'); 
```

不会工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T05:20:04.440

同时添加多个属性的语法是传递一个对象。

```
$(this).attr({
   src: lstAlbumart,
   width: 250,
   height: 250
}); 
```

您也可以链接`.attr`调用，但效率较低。

# edsdk - 从佳能 EDSDK 访问相机菜单

> ID：14472969
> 
> 赞同：0
> 
> 时间：2013-01-23T05:19:09.493
> 
> 标签：edsdk

我真正想要的是通过EDSDK拍摄视频时选择曝光类型（自动或手动）。

我可以使用相机菜单来做到这一点。

我没有设法从官方文档中找到一种方法。我的另一次尝试是在我使用相机按钮设置菜单选项时检查所有相机事件，希望有一些未记录的属性 - 这种尝试也失败了。

一个普遍的问题是我猜有没有办法使用 EDSDK 设置相机的菜单选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T11:12:28.190

> 模式：
> 0 = 程序
> 9 = 自动
> 5 = A-DEP

以编程方式，读取可以使用的属性`EdsGetPropertyData`并设置值`EdsSetPropertyData`

```
uint emode = 5;
error = EDSDK.EdsSetPropertyData(Camera, EDSDK.PropID_AEMode, 
                                         0, sizeof(uint), emode); 
```

# vb.net - 如何以最紧凑的方式存储字节或值？

> ID：14472970
> 
> 赞同：0
> 
> 时间：2013-01-23T05:19:10.057
> 
> 标签：vb.net, file, compression, byte

我想知道是否有一种文件格式可以让我以如下所示的格式存储值。我希望文件格式尽可能高效（IE 没有额外的信息，除了我放在里面的内容）。这是我的一个概念，即创建一种更有效的图像存储方法。这是我希望存储的数据示例：

```
800 600 0000FF FF0000 00FF00 969696
... 
```

我最初考虑将它们放在一个`.txt`文件中，但我不认为在一个文件中存储 100 万个数字（对于 1000x1000 图像）`.txt`非常紧凑。

那么，在VB.net中可以写入哪种文件格式最适合存储基本数字呢？

编辑 1：我计划之后使用 GZip 或其他压缩方式进行压缩。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T05:22:29.073

只需以二进制格式存储它们。看[`BinaryWriter`](http://msdn.microsoft.com/en-us/library/system.io.binarywriter.aspx)。

# gnuplot - 用户定义的命令，如 gdb 的定义，用于 gnuplot 终端中的多个命令？

> ID：14472976
> 
> 赞同：1
> 
> 时间：2013-01-23T05:20:08.057
> 
> 标签：gnuplot

只是想我会记录下来（自我回答如下）：

在`gnuplot`终端中使用时，可以使用键盘上的向上和向下箭头来遍历键入的命令历史记录 - 就像在`gdb`.

但是，有时可能会有一系列我经常重复的命令——我想通过发出一个命令来调用它们。例如，有人在 中使用交互式`x11`终端`gnuplot`，并希望获得`png`格式的“屏幕截图”。这需要将终端更改为`png`，设置输出，`plot`发出，并将终端恢复为`x11`; 或者：

```
set terminal png
set output 'gnuplot.png'
replot
set terminal x11 
```

我希望用一个命令调用这个序列——即使我知道这些可以放在一行上，通过使用分号作为分隔符：

```
set terminal png ; set output 'gnuplot.png' ; replot ; set terminal x11 
```

在`gdb`中，有一个命令[define](https://stackoverflow.com/questions/1262639/multiple-commands-in-gdb-separted-by-some-sort-of-delimiter/1262789#1262789)，它允许[用户定义命令](http://www.ofb.net/gnu/gdb/gdb_146.html)；一个简单的问题在`gdb`终端：

```
(gdb) define fn
> finish
> next
> end 
```

...从那时起，您可以`fn`在该终端中键入以调用`finish`and的序列`end`。

有没有类似的东西`gnuplot`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T05:20:58.537

是的，似乎有 - 有一个称为宏（`help macros`in ）的工具，其中可以通过在其名称前添加（“at”字符）来`gnuplot`扩展字符串变量。`@`

默认情况下禁用此功能，因此需要考虑启用它。这就是为什么最好将该序列保存在一个初始化脚本文件中，例如`init.gp`：

```
print ""
print "init.gp starting"

set terminal x11

# define capt string variable as sequence
# of commands, semicolon separated

capt = "print 'Saving...' ; set terminal png ; set output 'gnuplot.png' ; replot ; set terminal x11"

print "macros state: "
show macros

print "enabling macros state:"
set macros
show macros

print "The @capt command should be available now."
print ""
print "init.gp ending"
print "" 
```

然后可以在以下位置进行这样的终端会话`gnuplot`：

```
$ gnuplot

    G N U P L O T
    [...]

Terminal type set to 'wxt'

gnuplot> load "init.gp"

init.gp starting
macros state: 

    command line macros will not be expanded

enabling macros state:

    command line macros will be expanded

The @capt command should be available now.

init.gp ending

gnuplot> plot sin(x)

gnuplot> @capt
Saving...
Terminal type set to 'png'
Options are 'nocrop font /usr/share/fonts/truetype/ttf-liberation/LiberationSans-Regular.ttf 12 size 640,480 '
Terminal type set to 'x11'
Options are ' nopersist'

gnuplot> plot cos(x)
Closing gnuplot.png

gnuplot> exit

$ identify gnuplot.png 
gnuplot.png PNG 640x480 640x480+0+0 8-bit PseudoClass 102c 5.58KB 0.000u 0:00.000 
```

好吧，希望这对某人有所帮助，
干杯！

# sql-server - 全文搜索自动分区方案和功能

> ID：14472978
> 
> 赞同：1
> 
> 时间：2013-01-23T05:20:29.450
> 
> 标签：sql-server, full-text-search, partitioning

我们在 SQL Server 2012 开发（企业）数据库上运行了一些全文搜索。我们注意到分区方案和功能正在（定期）添加到数据库中。我只能假设分区用于 FTS，因为它们具有以下形式：

方案：

```
CREATE PARTITION SCHEME [ifts_comp_fragment_data_space_46093FC3] AS PARTITION [ifts_comp_fragment_partition_function_46093FC3] TO ([FTS], [FTS], [FTS]) 
```

功能：

```
CREATE PARTITION FUNCTION [ifts_comp_fragment_partition_function_46093FC3](varbinary(128)) AS RANGE LEFT FOR VALUES (0x00330061007A00660073003200360036, 0x0067006F00730066006F00720064) 
```

问题是我们的生产服务器正在运行不支持分区的 SQL Server 2012 Standard。因此，它给我们的模式比较（使用 SSDT）增加了额外的管理负担，以每次都排除这些分区。当一个人确实（不可避免地）潜入时，移除它是一种痛苦。我们已经进行了一些广泛的研究，但无法就为什么会发生这种情况提出任何答案。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T08:32:27.620

是的，这些是全文搜索功能的内部内容。你无法控制它们。

但是，我认为这是它们在您的架构比较中出现的错误。你永远不会自己创建/更改/删除它们，它们完全由 sql server 维护，所以我会在[http://connect.microsoft.com上提交错误报告](http://connect.microsoft.com)

# sql-server - SSMS 2008 R2 尝试运行新查询尝试连接到 SQL Server Compact

> ID：14472983
> 
> 赞同：1
> 
> 时间：2013-01-23T05:20:51.543
> 
> 标签：sql-server, sql-server-2008

当我连接到远程生产数据库时，我遇到的问题是非常奇怪的行为。当我启动时，`SQL Server Management Studio 2008 R2`我的新查询窗口打开断开连接，并且我打开的每个新查询窗口也断开连接；虽然当我右键单击并选择连接时，我得到断开连接和更改连接作为选项而不是“连接”。

当我尝试创建一个新的查询窗口或者如果我右键单击更改连接时，会`SSMS`打开一个带有`"connect to SQL Server Compact"`. 用我尝试过的一切，我似乎无法解决这个问题。但是，如果我打开一个`.sql`文件，则`SSMS`可以毫无问题地打开与我的生产数据库的连接；我只是无法打开它的新/空白查询连接。

我没有`SQL Server Compact`安装；我已经重新安装了`SQL Server 2008 R2`。安装是通过 MSDN 下载的完整版 SSMS 完成的；来自about的信息如下：

**Microsoft SQL Server Management Studio 10.50.2550.0 Microsoft Analysis Services 客户端工具 10.50.2500.0 Microsoft 数据访问组件 (MDAC) 6.1.7601.17514 Microsoft MSXML
3.0 4.0 5.0 6.0

所以总而言之，我的问题是如何阻止这种情况发生？

请帮忙; 先感谢您。

# android - 如何在警报框上放置两个按钮

> ID：14472991
> 
> 赞同：0
> 
> 时间：2013-01-23T05:21:34.753
> 
> 标签：android, button, android-alertdialog, buttonclick

我在android中制作了一个简单的警报框程序。现在我必须放置两个按钮“确定”和“取消”但是当我运行程序时它只显示“取消”按钮......我的代码如下：

**主.java**

```
public class MainActivity extends Activity {
Button btn;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.activity_main);
    btn = (Button)findViewById(R.id.button);
    final AlertDialog alertDialog = new AlertDialog.Builder(this).create();
    btn.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub

        alertDialog.setTitle("Title");
        alertDialog.setMessage("Message");
        alertDialog.setButton("OK", new DialogInterface.OnClickListener() {
           public void onClick(DialogInterface dialog, int which) {
              // TODO Add your code for the button here.
               Toast.makeText(getApplicationContext(), "well come", 1).show();
           }
        });
        alertDialog.setButton("cancel",new DialogInterface.OnClickListener() {

            @Override
            public void onClick(DialogInterface dialog, int which) {
                // TODO Auto-generated method stub
                Toast.makeText(getApplicationContext(), "yoy have pressed cancel", 1).show();
            }
        });
        // Set the Icon for the Dialog
        alertDialog.setIcon(R.drawable.ic_launcher);
        alertDialog.show();
        // see http://androidsnippets.com/simple-alert-dialog-popup-with-title-message-icon-and-button  
    }
});
    }
} 
```

先感谢您。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T06:44:49.830

我有同样的问题。这就是所做的。

```
public class MainActivity extends Activity {
    Button btn;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.activity_main);
        btn = (Button)findViewById(R.id.button);
        final AlertDialog alertDialog = new AlertDialog.Builder(this).create();
        btn.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
            alertDialog.setTitle("Title");
            alertDialog.setMessage("Message");
            alertDialog.setButton("OK", new DialogInterface.OnClickListener() {
               public void onClick(DialogInterface dialog, int which) {
                   Toast.makeText(getApplicationContext(), "well come", 1).show();
               }
            });
        alertDialog.setButton2("cancel",new DialogInterface.OnClickListener() {
            @Override
            public void onClick(DialogInterface dialog, int which) {
                Toast.makeText(getApplicationContext(), "yoy have pressed cancel", 1).show();
            }
        });
        // Set the Icon for the Dialog
        alertDialog.setIcon(R.drawable.ic_launcher);
        alertDialog.show();
        // see http://androidsnippets.com/simple-alert-dialog-popup-with-title-message-icon-and-button  
    }
});
    }
} 
```

这工作正常。您必须为警报框的按钮编号。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T05:28:31.470

简单的警报

```
 private AlertDialog AskOption()
 {
    AlertDialog myQuittingDialogBox =new AlertDialog.Builder(this) 
        //set message, title, and icon
        .setTitle("Title") 
        .setMessage("Message") 
        .setIcon(R.drawable.icon)

        .setPositiveButton("yes", new DialogInterface.OnClickListener() {

            public void onClick(DialogInterface dialog, int whichButton) { 

                //your code
            }   
        })

        .setNeutralButton("No", new DialogInterface.OnClickListener() { 
            public void onClick(DialogInterface dialog, int whichButton) { 

                dialog.dismiss();
         } 
        })

        .create();
        return myQuittingDialogBox;

    } 
```

用法

```
AlertDialog al = AskOption();
al.show(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T05:24:21.693

像这样改变我们安排`setPositiveButton`的是`ok`和`setNegativeButton`是`cancel`按钮。

```
 final AlertDialog.Builder alertDialog= new AlertDialog.Builder(this);

 alertDialog.setPositiveButton("OK", new DialogInterface.OnClickListener() {
       public void onClick(DialogInterface dialog, int which) {
          // TODO Add your code for the button here.
           Toast.makeText(getApplicationContext(), "well come", 1).show();
       }
    });
    alertDialog.setNegativeButton("cancel",new DialogInterface.OnClickListener() {

        @Override
        public void onClick(DialogInterface dialog, int which) {
            // TODO Auto-generated method stub
            Toast.makeText(getApplicationContext(), "yoy have pressed cancel", 1).show();
        }
    }); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-23T05:25:03.317

添加按钮的正确方法：

对于积极

```
alertDialog.setPositiveButton("OK",new DialogInterface.OnClickListener() {
    public void onClick(DialogInterface dialog,int id) {
        // perform your action
    }
}); 
```

对于负

```
alertDialog.setNegativeButton("Cancel",new DialogInterface.OnClickListener() {
    public void onClick(DialogInterface dialog,int id) {
        // if this button is clicked, just close
        // the dialog box and do nothing
        dialog.cancel();
    }
}); 
```

[Android 警报对话框示例](http://www.mkyong.com/android/android-alert-dialog-example/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-23T05:25:05.273

```
public void showDialog(Activity activity, String title, CharSequence message) {
AlertDialog.Builder builder = new AlertDialog.Builder(activity);
if (title != null)
    builder.setTitle(title);
builder.setMessage(message);
builder.setPositiveButton("OK", null);
        builder.setNegativeButton("Cancel", null);
builder.show(); 
```

}

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-23T05:27:38.410

您可以使用[AlertDialog.Builder](http://developer.android.com/reference/android/app/AlertDialog.Builder.html)类。有一些方法可以使用这个构建器类在对话框上放置按钮。

1.  [设置正按钮](http://developer.android.com/reference/android/app/AlertDialog.Builder.html#setPositiveButton%28int,%20android.content.DialogInterface.OnClickListener%29)
2.  [设置负按钮](http://developer.android.com/reference/android/app/AlertDialog.Builder.html#setNegativeButton%28int,%20android.content.DialogInterface.OnClickListener%29)
3.  [设置中性按钮](http://developer.android.com/reference/android/app/AlertDialog.Builder.html#setNeutralButton%28int,%20android.content.DialogInterface.OnClickListener%29)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-23T05:33:25.513

您需要使用 setPositiveButton() 和 setnegativeButton() 之类的，

```
import android.os.Bundle;
import android.app.Activity;
import android.app.AlertDialog;
import android.content.DialogInterface;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.Toast;

public class MainActivity extends Activity {
Button btn;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.activity_main);
    btn = (Button)findViewById(R.id.button);
    final AlertDialog alertDialog = new AlertDialog.Builder(this).create();
btn.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub

        alertDialog.setTitle("Title");
        alertDialog.setMessage("Message");
        alertDialog.setPositiveButton("OK",new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog,int id) {
                    // if this button is clicked, close
                    // current activity
                     Toast.makeText(getApplicationContext(), "well come", 1).show();
                }
              });
        alertDialog.setNegativeButton("Cancel",new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog,int id) {
                    // if this button is clicked, just close
                    // the dialog box and do nothing
                     Toast.makeText(getApplicationContext(), "yoy have pressed cancel", 1).show();
                }
            });
        // Set the Icon for the Dialog
        alertDialog.setIcon(R.drawable.ic_launcher);
        alertDialog.show();
        // see http://androidsnippets.com/simple-alert-dialog-popup-with-title-message-icon-and-button  
    }
});
    }
} 
```

# javahg - 如何使用 JavaHg 监控克隆进度

> ID：14472993
> 
> 赞同：1
> 
> 时间：2013-01-23T05:21:55.093
> 
> 标签：javahg

我正在使用 JavaHg 来构建自定义的 GUI 界面。我能够通过代码克隆如下：

```
BaseRepository repo = Repository.clone(new File(checkout_folder), url); 
```

然而，这是一个 GUI 应用程序，它只会停止直到克隆完成。有什么方法可以执行此克隆命令，同时还允许 GUI 监视其进度？

我的直觉告诉我看一下 MercurialEclipse 插件，看看他们是如何在那里做的，但如果有人能提出一种方法，我会很高兴听到它。

问候，古尔塞

编辑：

感谢您提供两种观点的信息，一种是针对当前情况的现实，另一种是针对夜间骑手进度条的建议。

我最近选择了一种狡猾的解决方法，我现在似乎已经摆脱了。

由于我在 hgweb 服务器上托管我的 mercurial 项目，因此我尝试这样做：

*   在我的应用程序中触发结帐（好的，克隆！:)）
*   我的应用程序通过 ssh 访问服务器，并在裸存储库上运行“du”命令，以便签出项目
*   因此，我的应用程序使用该裸存储库使用的返回的总磁盘空间作为对最终结帐应在本地工作文件夹上的总磁盘空间的*估计*
*   然后我的应用程序使用“du”命令每秒轮询一次本地工作文件夹，以查看结帐/克隆当前消耗的磁盘使用量
*   我使用这个 du 结果与来自服务器的 du 结果来显示我的进度条

它不是 100% 准确，但是哦，好吧，它似乎可以完成这项工作......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T22:15:37.897

目前 JavaHg 不支持显示长时间运行操作的进度

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-31T08:26:50.900

使用工作线程可以解决悬挂部分。我会检查监控，但我认为夜间骑手，正在进行的工作栏就可以了。您必须启动一个线程来处理通信并让主线程继续并处理 gui 上的操作。有两个选项可以查看克隆是否结束： - 通过回调方法（这是一种不错的、大书本风格的方法） - 定期检查工作线程（不太好，但如果你进入 while 循环并且讨厌回调它会成功）